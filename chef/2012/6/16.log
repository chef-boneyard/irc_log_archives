[2012-06-16 00:11:45 -0400] littleidea: who can explain what gets indexed in search?
[2012-06-16 00:11:52 -0400] hoover_damm: everything
[2012-06-16 00:11:57 -0400] hoover_damm: and the wiki can explain this
[2012-06-16 00:12:08 -0400] littleidea: link?
[2012-06-16 00:12:09 -0400] hoover_damm: http://wiki.opscode.com/display/chef/Search
[2012-06-16 00:12:21 -0400] littleidea: yeah, read that
[2012-06-16 00:12:23 -0400] hoover_damm: If you run Google Chrome, set wiki.opscode.com to be your search engine
[2012-06-16 00:12:26 -0400] hoover_damm: whenever you have a question
[2012-06-16 00:12:27 -0400] hoover_damm: ask in google
[2012-06-16 00:12:37 -0400] hoover_damm: + chrome
[2012-06-16 00:12:51 -0400] hoover_damm: That'll save you a few extra steps :) and seriously everything does
[2012-06-16 00:13:02 -0400] hoover_damm: all node attributes are indexed.  Data bags are indexed.
[2012-06-16 00:13:09 -0400] littleidea: so here is more specific question
[2012-06-16 00:14:08 -0400] littleidea: if a node is given a role, that has a bunch of other subroles, can the node be searched for the subroles?
[2012-06-16 00:14:59 -0400] littleidea: based on the results of 'Discovering Key Names' from that page, the answer looks like no, at least not directly
[2012-06-16 00:16:33 -0400] hoover_damm: search(:node, "roles:base")
[2012-06-16 00:16:43 -0400] hoover_damm: should return all the nodes with the base role as well
[2012-06-16 00:17:58 -0400] littleidea: what do you mean 'as well', that would return the nodes with the base role exclusively
[2012-06-16 00:19:30 -0400] cwj: for a role[foo] with sub-roles bar, search(:node, "roles:bar") would return nodes which have role[foo] in their run list (assuming they have successfully completed a chef run with that role)
[2012-06-16 00:32:26 -0400] hoover_damm: littleidea, no it wouldn't
[2012-06-16 00:32:53 -0400] hoover_damm: what I described above works just fine
[2012-06-16 00:32:59 -0400] hoover_damm: on Chef Hosted.
[2012-06-16 00:39:25 -0400] timsmith: can if statements be used within a resource to do different things depending on node attributes?
[2012-06-16 00:40:27 -0400] timsmith: I'd like to control a search query in a cookbook based on an node attribute
[2012-06-16 01:23:29 -0400] yfeldblum: timsmith, yes, you can use any ruby programming structures, including the basic ones like conditionals, loops, local variables, etc
[2012-06-16 01:23:49 -0400] timsmith: thanks
[2012-06-16 01:34:32 -0400] timsmith: is there a reason that a role would show up when I do knife role list, but not when I search out the role.  Is that just solr missing some data?
[2012-06-16 01:36:29 -0400] timsmith: found the bug
[2012-06-16 01:36:40 -0400] timsmith: if you have 2 roles with the same description, but different names only 1 will come back in search
[2012-06-16 01:43:29 -0400] yfeldblum: right
[2012-06-16 05:00:27 -0400] miah: herp
[2012-06-16 05:00:46 -0400] miah: same description, or id?
[2012-06-16 06:44:50 -0400] hoover_damm: description is the hint
[2012-06-16 06:44:53 -0400] hoover_damm: id sounds more likely
[2012-06-16 06:49:46 -0400] coderanger: If you forget to change the name field in the role itself and only copy the file, it can be confusing
[2012-06-16 07:03:59 -0400] hoover_damm: that's some good pebcak
[2012-06-16 09:59:59 -0400] tolland: is there any scope for sub classing cookbooks using the "provides"  metadata, something like to have my cookbook "lp_tomcat" provides "tomcat::oracle-jdk" etc?
[2012-06-16 13:19:18 -0400] dkannan: why does "knife cookbook site install" work the way it does ? http://wiki.opscode.com/display/chef/Managing+Cookbooks+With+Knife#ManagingCookbooksWithKnife-install
[2012-06-16 13:19:54 -0400] dkannan: as regards to how it creates branch for the cookbook containing only one cookbook
[2012-06-16 13:23:11 -0400] yfeldblum: dkannan, because each cookbook is a project in and of itself
[2012-06-16 13:33:28 -0400] dkannan: yfeldblum: ok. when the wiki says "you can locally modify the upstream cookbook in your master branch and let git maintain your changes as a separate patch"
[2012-06-16 13:34:43 -0400] dkannan: yfeldblum: do i need to chekout the autogenerated branch for the cookbook, make my changes and merge to master ? to track custom changes to the cookbook
[2012-06-16 13:35:13 -0400] yfeldblum: dkannan, quite the opposite
[2012-06-16 13:35:29 -0400] yfeldblum: dkannan, make your changes on master (or on a feature branch and merge to master)
[2012-06-16 13:36:10 -0400] dkannan: i do not get why a "pristine copy" branch needs to be created ?
[2012-06-16 13:36:42 -0400] yfeldblum: dkannan, at a later point, you can checkout that upstream cookbook branch and update it to a later revision from upstream, and then merge that later revision into master, where it will be merged alongside your changes
[2012-06-16 13:38:18 -0400] dkannan: yfeldblum: oh. nice. let me check how that works. thanks
[2012-06-16 13:43:54 -0400] yfeldblum: dkannan, this pattern has got nothing to do with chef or cookbooks; it's a pattern for vendoring upstream dependencies in git, no matter the type of project or the type of dependencies
[2012-06-16 13:49:06 -0400] dkannan: yfeldblum: ok. was aware of git submodules for vendoring upstream. but this pattern is new to me
[2012-06-16 13:52:20 -0400] yfeldblum: dkannan, why do you want to change the upstream cookbooks?
[2012-06-16 13:54:57 -0400] dkannan: yfeldblum: to contribute changes back. but what i want to do now is make some custom changes to a cookbook. eg. use rbenv instead of rvm
[2012-06-16 13:56:08 -0400] dkannan: yfeldblum: can i upgrade cookbooks. it should merge/conflict with my custom changes
[2012-06-16 13:57:06 -0400] yfeldblum: dkannan, to contribute changes back, you may consider forking the upstream to a separate repo; likewise, to make custom changes
[2012-06-16 13:57:37 -0400] yfeldblum: dkannan, yes, git provides that ability if you are proficient in its use
[2012-06-16 14:13:07 -0400] tolland: i have some cookbooks with prefixs, i see that I can set a "name" metadata attributes, but it seems to get ignored.
[2012-06-16 14:14:22 -0400] tolland: i guess i can create a lp site cookbooks dir, but that suggests that the name metadata item is not yet useful?
[2012-06-16 14:14:52 -0400] ashb: tolland: what do you mean by prefixes?
[2012-06-16 14:15:13 -0400] tolland: oc-tomcat
[2012-06-16 14:15:18 -0400] tolland: lp-tomcat
[2012-06-16 14:15:29 -0400] tolland: they are currentkly all living together in my cookbooks dir
[2012-06-16 14:15:34 -0400] ashb: and what is the point of the prefix? what are you trying to achieve?
[2012-06-16 14:16:01 -0400] tolland: mainly to keep pristine cookbooks available for different uses
[2012-06-16 14:16:18 -0400] tolland: and to track when there are multi upstreams
[2012-06-16 14:16:59 -0400] tolland: it looks like it is simple to achive something similar with multi cookbook dirs
[2012-06-16 14:17:33 -0400] ashb: do you actually ever want the pristine cookbooks on nodes?
[2012-06-16 14:17:56 -0400] ashb: as i understand it multi cookbook dirs are not recomended anymore
[2012-06-16 14:19:05 -0400] tolland: unlikely
[2012-06-16 14:19:43 -0400] ashb: then you don't need the min cookbook dirs - i.e. just put them where ever you want
[2012-06-16 14:19:48 -0400] ashb: knife/chef doens't need to care where they are
[2012-06-16 14:20:08 -0400] ashb: s/min/multiple/
[2012-06-16 14:25:58 -0400] yfeldblum: ashb, what's that about multi cookbook dirs?
[2012-06-16 14:26:20 -0400] ashb: i thought it was recommended against now? (since knife no longer creates site_cookbook)?
[2012-06-16 14:27:48 -0400] yfeldblum: ashb, multiple cookbook paths is not deprecated
[2012-06-16 14:27:51 -0400] ashb: ah k
[2012-06-16 14:28:18 -0400] yfeldblum: ashb, only file-level shadowing is deprecated, which is not the same thing at all as having one cookbook in one dir and another cookbook entirely in another dir
[2012-06-16 14:28:30 -0400] ashb: good to know.
[2012-06-16 14:28:56 -0400] ashb: I think my advice still stands (that tolland can just put them wherever since he doesn't need them available to knife/chef)
[2012-06-16 14:28:59 -0400] ashb: ?
[2012-06-16 14:36:34 -0400] yfeldblum: sure
[2012-06-16 14:39:12 -0400] ashb: symlinks_before_migrate isn't idempotent :/
[2012-06-16 14:46:22 -0400] tolland: ashb: yes, for some reason i was trying to make my main cookbook pretend to be the OC pristine, for no good reason
[2012-06-16 14:47:12 -0400] tolland: if site-cookbooks is deprecated, what is the proposal for supporting a multi cookbook install?
[2012-06-16 14:47:26 -0400] tolland: ie customer1-tomcat, customer2-tomcat etc
[2012-06-16 14:47:32 -0400] ashb: site-cookbook was just the way of shadowing files in the same cookbook
[2012-06-16 14:47:59 -0400] ashb: having multiple cookbook dirs (with different complete cookbooks in each) still works
[2012-06-16 14:49:02 -0400] tolland: it seems like if the "name" meta data attribute was honored, then users could go nuts with their local direcotry structure and chef with blithely ignore them
[2012-06-16 14:49:19 -0400] tolland: for example I like to make folders like
[2012-06-16 14:50:01 -0400] tolland: myimportantfolder, and myimportantfolder_bak, myimportantfolder_bak_bak_bak, this reallyimportantfolder_dontdelete_ever_(deleteme)
[2012-06-16 14:50:15 -0400] tolland: Oh no, thats just one of my customers. ;-)
[2012-06-16 14:50:22 -0400] ashb: can I suggest using a source control instead ;)
[2012-06-16 14:57:04 -0400] tolland: ashb: indeed, I loveth the git-lord also.
[2012-06-16 14:57:46 -0400] tolland: but relying on directory names is a bit primitive somehow
[2012-06-16 17:26:48 -0400] dkannan: hi. was looking at https://github.com/tobami/littlechef
[2012-06-16 17:27:48 -0400] dkannan: has anyone used it. How does it "support" search. read https://github.com/tobami/littlechef/blob/master/littlechef/lib.py
[2012-06-16 17:28:39 -0400] dkannan: do i have to rsync the node dir to every other node ?
[2012-06-16 17:31:05 -0400] Randm: dkannan: it will only let you search your own node, I'm guessing
[2012-06-16 17:32:56 -0400] dkannan: Randm: thanks. wanted to confirm from someone who has used it
[2012-06-16 18:52:14 -0400] hoover_damm: dkannan, pychef?
[2012-06-16 18:52:24 -0400] hoover_damm: dkannan, I use pychef if your looking or a python implementation of chef
[2012-06-16 18:52:28 -0400] hoover_damm: at least with fabric
[2012-06-16 18:53:01 -0400] hoover_damm: oh neat, LittleChef is a whole thing beyond PyChef
[2012-06-16 19:10:15 -0400] ichilton: Is it possible to install Mac App Store apps with Chef?
[2012-06-16 19:32:15 -0400] Randm: ichilton: no
[2012-06-16 19:32:30 -0400] Randm: ichilton:  you can do it as part of a CI cycle, but not from the app store
[2012-06-16 19:32:44 -0400] ichilton: That's a shame :(
[2012-06-16 19:33:11 -0400] ichilton: So you need to buy apps natively from the vendor (if they still do) rather than the App Store if you want to automate?
[2012-06-16 19:35:05 -0400] Randm: dunno
[2012-06-16 19:35:21 -0400] hoover_damm: The Apple Store is unique
[2012-06-16 19:35:38 -0400] Randm: 'unique'
[2012-06-16 19:35:39 -0400] hoover_damm: I don't think you can use the system ruby or install gems with it.  So you would need to create a Objective-C based Chef API
[2012-06-16 19:36:03 -0400] hoover_damm: macruby i believe is allowed in the appstore
[2012-06-16 19:36:13 -0400] hoover_damm: but chef doesn't exactly run on macruby last I checked
[2012-06-16 19:36:17 -0400] hoover_damm: (that was a year ago)
[2012-06-16 19:36:30 -0400] ichilton: sorry, i'm not wanting to install chef with the mac app store - is that what you are talking about?
[2012-06-16 19:36:42 -0400] hoover_damm: nah, automation stuff with chef in the app store
[2012-06-16 19:36:49 -0400] hoover_damm: that's what I had assumed
[2012-06-16 19:36:50 -0400] ichilton: I'm wondering if I can install mac app store apps (like Coda for instance) on a Chef managed workstation
[2012-06-16 19:36:58 -0400] hoover_damm: oh that way
[2012-06-16 19:37:07 -0400] Randm: no
[2012-06-16 19:37:11 -0400] hoover_damm: hrm, usually that requires purchases
[2012-06-16 19:37:22 -0400] ichilton: yeah, assuming i'd pre-purchased it
[2012-06-16 19:38:19 -0400] hoover_damm: http://apple.stackexchange.com/questions/42353/automate-mac-app-store-installs-upgrades
[2012-06-16 19:38:22 -0400] hoover_damm: is one answer
[2012-06-16 19:38:40 -0400] hoover_damm: I mean we've automated installing xcode
[2012-06-16 19:38:42 -0400] hoover_damm: and other stuff
[2012-06-16 19:38:55 -0400] hoover_damm: but usually it's the transcript that I think would be the worry
[2012-06-16 19:39:52 -0400] ichilton: ok, thanks
[2012-06-16 19:41:09 -0400] hoover_damm: ichilton, you can likely automate this in automator
[2012-06-16 19:41:19 -0400] hoover_damm: ichilton, perhaps then have chef call automator to run it?
[2012-06-16 19:41:30 -0400] ichilton: ah, that's interesting - thanks
[2012-06-16 19:41:45 -0400] hoover_damm: you need more apple native like Automator
[2012-06-16 19:41:47 -0400] hoover_damm: to get what you want
[2012-06-16 19:41:51 -0400] ichilton: nod
[2012-06-16 23:30:13 -0400] schuckles1: hi

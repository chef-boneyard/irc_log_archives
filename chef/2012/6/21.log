[2012-06-21 00:00:40 -0400] hongbin: http://pastie.org/4123498
[2012-06-21 00:00:50 -0400] hongbin: The server log
[2012-06-21 00:02:53 -0400] jameson: so using chef just to deploy applications (aka installing git) would be a correct usage of chef
[2012-06-21 00:03:20 -0400] jameson: while doing stuff with the specific applications (doing git clone from github for your project) is outside of chef
[2012-06-21 00:03:36 -0400] jameson: am I using chef correct?
[2012-06-21 00:12:38 -0400] tightwork: jameson: you could do that
[2012-06-21 00:13:50 -0400] jameson: hongbin: thx
[2012-06-21 00:13:52 -0400] jameson: tightwork: thx
[2012-06-21 00:14:53 -0400] jameson: now i just got configure everything :3
[2012-06-21 01:55:36 -0400] bertobull: hi guys
[2012-06-21 01:55:44 -0400] bertobull: anyone here?
[2012-06-21 01:56:38 -0400] bertobull: I'm trying to provision my first  server with chef for a rails app
[2012-06-21 01:56:56 -0400] bertobull: I've downloaded a number of cookbooks
[2012-06-21 01:57:17 -0400] bertobull: one of them is passenger_apache2
[2012-06-21 01:58:09 -0400] bertobull: when I'm defining the role for the web server, I have something like this: "recipe[apache2]"
[2012-06-21 01:58:37 -0400] bertobull: I'm not sure how to define the recipe for "passenger_apache2"
[2012-06-21 01:59:23 -0400] bertobull: at first I thought "recipe[passenger_apache2]" should work, but looking at the passenger_apache2 cookbook, I see a different example
[2012-06-21 02:02:11 -0400] syphon: who's ready to drop some knowledge on me about overriding attributes? I guess I don't understand how they work in chef
[2012-06-21 02:03:02 -0400] yfeldblum: bertobull, what do you mean by "define the recipe"?
[2012-06-21 02:03:26 -0400] yfeldblum: syphon, it's hard to answer questions of the form "how does the world work?"
[2012-06-21 02:03:54 -0400] javawidget: I just learned a lot about attributes here yesterday... maybe I can answer a simple question?
[2012-06-21 02:04:30 -0400] bertobull: yfeldblum: I meant adding the recipe to a runlist
[2012-06-21 02:05:18 -0400] syphon: ok, I have a cookbook filled with default attributes. This works great. I'm trying to figure out how to override them via a node.json file (when I run "chef-solo with -j node.json")
[2012-06-21 02:05:31 -0400] syphon: no matter what I put into the json file, the default attribute value is still used, so I don't know what I'm doing wrong
[2012-06-21 02:05:34 -0400] bertobull: I checked out the metadata.rb file for passenger_apache2. so in my runlist I now have "recipe[passenger_apache2]"
[2012-06-21 02:05:52 -0400] bertobull: and "recipe[passenger_apache2::mod_rails]"
[2012-06-21 02:06:01 -0400] javawidget: which json file?
[2012-06-21 02:06:09 -0400] javawidget: There are json files for environments..
[2012-06-21 02:06:12 -0400] javawidget: roles..
[2012-06-21 02:06:18 -0400] bertobull: I'm getting confused by their README
[2012-06-21 02:06:39 -0400] bertobull: it gave an example of how to "run a rails application on passenger"
[2012-06-21 02:06:55 -0400] syphon: javawidget: node.json,. I'm using "chef-solo -j node.json"
[2012-06-21 02:07:10 -0400] javawidget: Ah...
[2012-06-21 02:07:29 -0400] syphon: it has my runlist (which works) but when I try to use it to override attributes, they don't get picked up. I can show you examples if you like
[2012-06-21 02:07:33 -0400] javawidget: chef-solo might be a bit over my head at the moment - I've been working primarily with chef-server
[2012-06-21 02:07:49 -0400] syphon: well I suspect the syntax might be the same (but not sure on that)
[2012-06-21 02:08:09 -0400] javawidget: is there an override element in your json?
[2012-06-21 02:08:28 -0400] bertobull: check out the pastie. [http://pastebin.com/LfFuTvwq] I don't know where this should go.
[2012-06-21 02:08:35 -0400] javawidget: "override_attributes": maybe?
[2012-06-21 02:08:47 -0400] syphon: my cookbook has this -- default[:myapp][:apps_home] = "/usr/apps"
[2012-06-21 02:08:52 -0400] syphon: and node.json has this -- "overrides": { ":myapp": { ":apps_home": "/home/syphon/apps" } }
[2012-06-21 02:08:58 -0400] yfeldblum: bertobull, that's an example of you writing your own separate recipe in your own separate cookbook, and your own recipe delegates to the passenger_apache2 recipe to set up some stuff
[2012-06-21 02:09:10 -0400] javawidget: That looks correct.
[2012-06-21 02:09:29 -0400] syphon: chef parses the json file correctly and throws no error, yet 'apps_home' doesn't change like I expect it to
[2012-06-21 02:10:07 -0400] javawidget: looks like it should probably be override_attributes
[2012-06-21 02:10:20 -0400] yfeldblum: node.json specifies normal-level attributes only
[2012-06-21 02:11:40 -0400] syphon: where do override-level attributes go, out of curiosity? (I changed it to 'normal' and am trying now)
[2012-06-21 02:12:34 -0400] bertobull: yfeldblum. Thanks! so this would go in the default (or webserver) recipe in my cookbook
[2012-06-21 02:13:19 -0400] yfeldblum: bertobull, right, and then you would add your own recipe to the run-list instead of adding the passenger_apache2 recipe
[2012-06-21 02:13:41 -0400] yfeldblum: bertobull, make sure to add `depends "passenger_apache2"` do your cookbook's metadata.rb
[2012-06-21 02:13:45 -0400] yfeldblum: syphon, in roles
[2012-06-21 02:14:37 -0400] syphon: huh, I see node-specific attributes as being able to override role-specific attributes
[2012-06-21 02:14:42 -0400] syphon: as "should be able to" I should say :)
[2012-06-21 02:15:05 -0400] yfeldblum: syphon, here's an example of a node.json file: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo#InstallingChefServerusingChefSolo-ConfigureChefsolo
[2012-06-21 02:15:43 -0400] yfeldblum: syphon, no, normal-level attributes on nodes have a higher precedence than default-level attributes and a lower precedence than override-level and automatic-level attributes
[2012-06-21 02:16:11 -0400] syphon: hmm, changing 'override' to 'normal' didn't work. It's still using the default attribute
[2012-06-21 02:16:25 -0400] yfeldblum: syphon, you do not need the "normal" key in your node.json file; just list the keys & values
[2012-06-21 02:16:32 -0400] yfeldblum: syphon, as in the examples i linked to
[2012-06-21 02:17:19 -0400] syphon: Hmm, that's the FIRST thing I tried, and it didn't work either!
[2012-06-21 02:17:30 -0400] syphon: let me debug it a bit, and if I can't get it to work, I'll set up a pastebin or something
[2012-06-21 02:18:01 -0400] bertobull: yfeldblum: ok, so i created a cookbook called "mywebapp" with the following files under recipe "default.rb, db.rb and web.rb"
[2012-06-21 02:18:58 -0400] bertobull: I have a runlist for my webserver with these included: "recipe[passenger_apache2]",
[2012-06-21 02:18:58 -0400] bertobull:   "recipe[passenger_apache2::mod_rails]"
[2012-06-21 02:19:35 -0400] bertobull: should I replace both with: "recipe[mywebapp::web]"
[2012-06-21 02:19:54 -0400] yfeldblum: bertobull, yes
[2012-06-21 02:20:15 -0400] bertobull: what about passenger_apache2::mod_rails
[2012-06-21 02:20:47 -0400] yfeldblum: bertobull, yes
[2012-06-21 02:21:11 -0400] syphon: Yeah, the cookbook says this --default[:myapp][:apps_home] = "/usr/apps" -- and the node.json says this -- ":myapp": { ":apps_home": "/home/syphon/apps" }
[2012-06-21 02:21:18 -0400] syphon: yet when I run the cookbook, it uses the default value
[2012-06-21 02:21:18 -0400] bertobull: alright. I'll remove both and replace with my recipe. Thank you!
[2012-06-21 02:21:18 -0400] yfeldblum: bertobull, if you want the code from that recipe run as well, write `include_recipe "passenger_apache2::mod_rails"` in your cookbooks web.rb recipe
[2012-06-21 02:21:43 -0400] yfeldblum: syphon, ":apps_home" =/= "apps_home"
[2012-06-21 02:22:51 -0400] yfeldblum: syphon, prefer to use strings rather than symbols; with that pattern, your cookbook would have `default["myapp"]["apps_home"] = "/usr/apps"`
[2012-06-21 02:23:21 -0400] yfeldblum: syphon, symbols will work, but it all gets confusing with the multiple ways of doing the same thing
[2012-06-21 02:23:57 -0400] yfeldblum: syphon, and your node.json should have ` {"myapp": {"apps_home": "/home/syphon/apps"} } `
[2012-06-21 02:24:22 -0400] yfeldblum: syphon, not sure why you snuck those extra colons ( : ) in there
[2012-06-21 02:24:41 -0400] bertobull: yfeldblum: I have this: include_recipe "passenger"
[2012-06-21 02:24:41 -0400] bertobull: web_app "myapp" do
[2012-06-21 02:24:41 -0400] bertobull:   docroot "#{deploy_to}/current/public"
[2012-06-21 02:24:41 -0400] bertobull:   server_name "#{app_name}.#{node["domain"]}"
[2012-06-21 02:24:42 -0400] bertobull:   server_aliases [ app_name, "localhost", node["hostname"] ]
[2012-06-21 02:24:42 -0400] bertobull:   rails_env "production"
[2012-06-21 02:24:42 -0400] bertobull: end
[2012-06-21 02:27:31 -0400] yfeldblum: bertobull, is there a question in there?
[2012-06-21 02:30:56 -0400] bertobull: just wanted to ensure didn't make a glaring error....but one question is this: I have 3 recipes in my app's cookbook: default, web, db. The default is there to set up the directory structure. I'll be using capistrano to do deployments and it expects a particular directory structure.
[2012-06-21 02:31:15 -0400] bertobull: I use the "directory" resource like so: directory "#{deploy_to}/#{app_name}/#{dir}" do ...
[2012-06-21 02:31:19 -0400] bertobull: I saw that somewhere
[2012-06-21 02:31:51 -0400] syphon: yfeldblum, I'll take your advice about strings over symbols. However, everywhere I referenced 'apps_home', i used symbols. I just switched them all over to strings and there was still no change
[2012-06-21 02:32:05 -0400] bertobull: yfeldblum: but where does app_name and deploy_to come from at ths point?
[2012-06-21 02:33:29 -0400] bertobull: yfeldblum: take a look at this pastie: http://pastebin.com/gM6YgV5H
[2012-06-21 02:33:47 -0400] bertobull: that's in my default.rb inside by custom app cookbook
[2012-06-21 02:34:14 -0400] bertobull: where does one define those variables?
[2012-06-21 02:34:27 -0400] bertobull: app_user, app_group, app_name, etc...
[2012-06-21 02:46:14 -0400] yfeldblum: syphon, the strings vs symbols was generic, not related to this particular case, but i said it because it seems the confusion between them was affecting your node.json
[2012-06-21 02:47:10 -0400] yfeldblum: bertobull, they're local variables; you're free to set them how you like
[2012-06-21 02:47:37 -0400] syphon: yfeldblum, I'm at a loss here. No matter what I put into my node.json, chef-solo will only use the default attribute value defined in my cookbook
[2012-06-21 02:50:00 -0400] yfeldblum: bertobull, e.g. in your recipe, ` deploy_to = "/srv/apps" ; app_name = "my-app" `
[2012-06-21 02:50:20 -0400] yfeldblum: syphon, what does your new cookbook attributes file look like? and your new node.json?
[2012-06-21 02:53:14 -0400] syphon: yfeldblum, http://pastebin.com/D762WQQb
[2012-06-21 02:53:56 -0400] yfeldblum: syphon, again, line 16 is your problem
[2012-06-21 02:54:45 -0400] yfeldblum: syphon, the key should be just plain "apps_home", not ":apps_home"
[2012-06-21 02:54:45 -0400] syphon: ok. Is the syntax different between ruby and json or something? (I'm not terribly strong in either)
[2012-06-21 02:55:18 -0400] yfeldblum: syphon, yes, syntax is different between ruby and json, but no, a ruby symbol like :apps_home does not translate to a string with a colon in the beginning
[2012-06-21 02:56:07 -0400] yfeldblum: chef, when constructing node attributes, will be lenient and allow you to write :apps_home in certain places and in those places will interpret it as though you wrote "apps_home" (notice no colon)
[2012-06-21 02:56:46 -0400] syphon: ok, that makes sense. Thanks for your help
[2012-06-21 03:21:27 -0400] woozie: I just realized the single git repo is deprecated in favor of per cookbook git repos. What is the work flow here? How does one begin downloading what one needs? In the past I cloned the repo and knife cookbook upload -a the whole thing. Is using knife cookbook site install  the recommended way?
[2012-06-21 03:30:30 -0400] bertobull: yfeldblum: got it
[2012-06-21 03:30:32 -0400] bertobull: thank you
[2012-06-21 03:33:08 -0400] yfeldblum: woozie, it's not
[2012-06-21 03:33:56 -0400] yfeldblum: woozie, however, you should never assume that code in someone else's git repository is intended to be production-ready
[2012-06-21 03:34:50 -0400] yfeldblum: woozie, in the case of the opscode-cookbooks, they typically tell people not to make that assumption and always to get opscode's cookbooks from the opscode community site (unless there's a specific reason why not)
[2012-06-21 03:36:55 -0400] woozie: yfeldblum: does knife cookbook site install download from community?
[2012-06-21 03:37:18 -0400] lusis: knife cookbook site vendor does
[2012-06-21 03:37:26 -0400] lusis: but they aren't always opscode cookbooks
[2012-06-21 03:37:29 -0400] lusis: it's the community site
[2012-06-21 03:37:50 -0400] lusis: I usually search first before downloading
[2012-06-21 03:37:54 -0400] yfeldblum: woozie, yes (although "cookbook site install" was renamed to "cookbook site vendor" as lusis mentions)
[2012-06-21 03:44:08 -0400] williamherry: does chef support ssl now?
[2012-06-21 03:49:17 -0400] yfeldblum: williamherry, could you clarify?
[2012-06-21 04:01:00 -0400] lusis: yeah that's kind of a weird question
[2012-06-21 04:14:32 -0400] flaccid_: i guess not
[2012-06-21 04:18:01 -0400] williamherry: I mean use openssl to encrypt data
[2012-06-21 04:18:33 -0400] c_t: encrypted data bags you mean?
[2012-06-21 04:18:59 -0400] c_t: I also have something I'm working on for encrypted cookbook files
[2012-06-21 04:19:20 -0400] c_t: the encrypted cookbook file part is done, but I have to finish the encrypted remote files
[2012-06-21 04:25:45 -0400] kaushal: Hi
[2012-06-21 04:37:08 -0400] williamherry: I mean workstation and client communication with server
[2012-06-21 05:37:50 -0400] tony_: hello
[2012-06-21 05:37:53 -0400] tony_: anyone there?
[2012-06-21 05:38:01 -0400] tony_: question about deploying a rails app
[2012-06-21 05:38:14 -0400] tony_: without using the application cookbook though
[2012-06-21 05:38:45 -0400] tony_: i have a script that changes to the app directory and does bundle install
[2012-06-21 05:39:22 -0400] tony_: when running that recipe, I can see all of the gems being installed and at the end it says bundle is complete
[2012-06-21 05:39:44 -0400] tony_: but then when I do "gem search" i don't see any of the gems
[2012-06-21 05:39:52 -0400] tony_: any ideas to what might be going on?
[2012-06-21 05:41:18 -0400] flaccid_: how did you install chef?
[2012-06-21 05:42:39 -0400] BryanWB_: ohai chefs!
[2012-06-21 05:47:40 -0400] tony_: i'm using hosted chef
[2012-06-21 05:48:00 -0400] tony_: with rackspace gem
[2012-06-21 05:48:29 -0400] tony_: not sure if that answers your question?
[2012-06-21 05:52:08 -0400] flaccid_: that doesn't explain how chef was installed on the client, no
[2012-06-21 05:55:32 -0400] tony_: so I think it installs it using bootstrap method
[2012-06-21 05:55:56 -0400] tony_: and then I usually run chef-client when updating roles or changing recipes
[2012-06-21 05:56:24 -0400] flaccid_: i'm not the best help here but of its omnibus intall gem probably will be using the system GEM_PATH
[2012-06-21 05:56:58 -0400] flaccid_: maybe BryanWB_  can help
[2012-06-21 05:59:19 -0400] BryanWB_: ? sorry joined after question asked
[2012-06-21 05:59:28 -0400] tony_: hey
[2012-06-21 05:59:32 -0400] BryanWB_: tony_: what problem?
[2012-06-21 05:59:44 -0400] tony_: so I'm deploying a rails app, but without using any of the application cookbooks
[2012-06-21 06:00:17 -0400] tony_: part of my recipe has a script that changes to the app directory and runs bundle install
[2012-06-21 06:00:23 -0400] tony_: it shows the gems being installed
[2012-06-21 06:00:42 -0400] tony_: and it says bundle complete
[2012-06-21 06:01:00 -0400] tony_: but then when I do "gem search" i don't see anything
[2012-06-21 06:01:54 -0400] tony_: so, i'm not sure what's going on
[2012-06-21 06:01:55 -0400] flaccid_: if they are installed, they would come up in gem list if searching the same GEM_PATH
[2012-06-21 06:02:24 -0400] BryanWB_: tony_: where is ruby on ur system?
[2012-06-21 06:02:47 -0400] tony_: which ruby, gives the following: /usr/local/rvm/rubies/ruby-1.9.2-p290/bin/ruby
[2012-06-21 06:03:21 -0400] BryanWB_: tony_: pls do ls -al /usr/bin/chef-client
[2012-06-21 06:04:02 -0400] tony_: lrwxrwxrwx 1 root root 25 Jun 21 04:36 /usr/bin/chef-client -> /opt/chef/bin/chef-client
[2012-06-21 06:04:36 -0400] BryanWB_: tony_: hmm, pls do `ls -al /opt/chef`
[2012-06-21 06:04:53 -0400] flaccid_: env | grep GEM
[2012-06-21 06:04:57 -0400] flaccid_: set | grep GEM
[2012-06-21 06:05:04 -0400] flaccid_: in the same env
[2012-06-21 06:05:54 -0400] tony_: total 20 drwxr-xr-x 4 root root 4096 Jun 21 04:36 . drwxr-xr-x 3 root root 4096 Jun 21 04:36 .. drwxr-xr-x 2 root root 4096 Jun 21 04:36 bin drwxr-xr-x 7 root root 4096 Jun 21 04:36 embedded -rw-r--r-- 1 root root  973 Jun 18 22:23 version-manifest.txt
[2012-06-21 06:06:42 -0400] BryanWB_: tony_: ur  gems are inside embedded/lib/**/gems/*    afaict
[2012-06-21 06:07:07 -0400] BryanWB_: as it looks like u using the omnibus client for chef that is coming w/ its own ruby
[2012-06-21 06:07:42 -0400] BryanWB_:   tony_  `/opt/chef/embedded/bin/gem environment`
[2012-06-21 06:09:45 -0400] tony_: ah, they are
[2012-06-21 06:10:09 -0400] tony_: all in here /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/
[2012-06-21 06:10:38 -0400] tony_: any ideas on how to fix this
[2012-06-21 06:14:00 -0400] BryanWB_: tony_: umm, not sure , i bet u would a quick response is send a mail to the ML
[2012-06-21 06:14:07 -0400] BryanWB_: prolly from the cookbookb author
[2012-06-21 06:14:13 -0400] BryanWB_: andreacampi
[2012-06-21 06:16:23 -0400] tony_: cool, I'll try that
[2012-06-21 06:16:32 -0400] tony_: thanks for helping me locate them
[2012-06-21 06:20:30 -0400] tony_: BryanWB_: sorry which cookbook were you exactly referring to?
[2012-06-21 06:20:36 -0400] tony_: omnibus?
[2012-06-21 06:20:36 -0400] bawt: omnibus is a project for building full-stack packages for a variety of platforms, and is used to build the 'chef-full' packages downloaded from http://opscode.com/chef/install or with http://opscode.com/chef/install.sh
[2012-06-21 06:22:56 -0400] BryanWB_: tony_: sorry, thot u were using the application cookbook
[2012-06-21 06:23:26 -0400] BryanWB_: but i bet others are doing something similar to wat u r
[2012-06-21 06:24:47 -0400] tony_: ah, yeah. not using the application cookbook
[2012-06-21 06:25:08 -0400] tony_: do you think an email to andreacampi would still help?
[2012-06-21 06:44:03 -0400] BryanWB_: tony_: best to e-mail ml directly
[2012-06-21 06:58:44 -0400] williamherry: will chef switch from couchdb to mysql?
[2012-06-21 07:03:59 -0400] specialsauce: williamhenry: it seems like mysql will become available,but as an option, not a forced replacement? (http://wiki.opscode.com/display/chef/Opscode+Chef+Short-Term+Roadmap+and+Performance+Improvements)
[2012-06-21 07:05:19 -0400] specialsauce: i'm not really sure i understand why you'd want mysql over couchdb for chef tho
[2012-06-21 07:05:47 -0400] specialsauce: one opinion on why mysql might be more suitable at scale tho - http://sauceio.com/index.php/2012/05/goodbye-couchdb/
[2012-06-21 07:05:54 -0400] BryanWB_: specialsauce: the options will be mysql or couchdb
[2012-06-21 07:06:11 -0400] BryanWB_: specialsauce: sorry, options will be mysql or postgres
[2012-06-21 07:06:20 -0400] BryanWB_: couchdb being phased out
[2012-06-21 07:08:38 -0400] specialsauce: BryanWB_: i'll be sorry to see couchdb go. do you know what the reasons for this are and what version of chef will cease couchdb support?
[2012-06-21 07:10:59 -0400] BryanWB_: specialsauce: there is a whole foodfightshow episode on it ;)
[2012-06-21 07:11:41 -0400] BryanWB_: in the show notes are links to the presentation w/ details
[2012-06-21 07:12:27 -0400] specialsauce: ok, cheers
[2012-06-21 07:25:05 -0400] flaccid_: wt
[2012-06-21 09:19:09 -0400] williamherry: I read from an article which says: chef-server moves from ruby + couchdb to erlang + mysql, can some one give me more details?
[2012-06-21 09:23:22 -0400] dkannan: williamherry: there was a chefconf video on this
[2012-06-21 09:25:27 -0400] dkannan: can i set an attribute on successful run of bash/execute resource ?
[2012-06-21 09:32:49 -0400] specialsauce: williamherry, did you ignore all the responses when you first asked this an hour ago?! readback!
[2012-06-21 09:35:42 -0400] williamherry: specialsauce, sorry, I didn't notice that, seems you didn't spell my name create(herry rather henry), sorry for that, I will read back, ^)^
[2012-06-21 09:38:03 -0400] williamherry: specialsauce, answer your question, why I want mysql over couchdb, I didn't, I just want know more about chef, that it, have a good day
[2012-06-21 09:42:45 -0400] aj__: Morning, could anyone tell me if i should be able to view a windows (win2k8) node status in the status panel for a particular enviroment?
[2012-06-21 09:43:36 -0400] aj__: i have added Linux nodes (RHEL) and i can view their status's fine... BUT i see win2k8 ones at all... any idea what i have done wrong?
[2012-06-21 09:51:13 -0400] BryanWB_: williamherry: u may find this informative http://www.foodfightshow.org/
[2012-06-21 09:51:35 -0400] BryanWB_: williamherry: and specifically http://www.foodfightshow.org/2012/06/episode-16-chef-server-with-kevin-smith.html
[2012-06-21 09:52:15 -0400] williamherry: BryanWB_, Thank you best regard
[2012-06-21 11:27:31 -0400] drrk: hei, getting this error with knife cookbook site install:
[2012-06-21 11:27:32 -0400] drrk: https://gist.github.com/474f92c393a5a7863169
[2012-06-21 11:28:04 -0400] drrk: now I know the problem is the .git that's in the tarball on the cookbooks site, but I don't know how to fix it
[2012-06-21 11:30:36 -0400] dkannan: is the official mailing list. http://lists.opscode.com/sympa/info/chef
[2012-06-21 11:31:00 -0400] dkannan: horrible UI
[2012-06-21 11:31:23 -0400] BryanWB_: dkannan: agreed, horrible ui, moving to google groups iirc
[2012-06-21 11:32:43 -0400] dkannan: BryanWB_: name of the google group ?
[2012-06-21 11:32:51 -0400] dkannan: does it exist yet ?
[2012-06-21 11:37:23 -0400] BryanWB_: dkannan: don't think so
[2012-06-21 12:51:05 -0400] proffalken: hey all, long time no speak... :D
[2012-06-21 12:51:24 -0400] proffalken: Does anyone know if it's possible to add custom fields to metadata.rb in a cookbook?
[2012-06-21 13:08:15 -0400] intinig: hi all. I seem to have no luck with knife and ec2. Since yesterday two new problems arose (trying to start ubuntu ec2 instances): first one - after it start the instance and tries to connect, it fails auth via ssh-key and asks for a password for the ubuntu user // so I run knife bootstrap and I get the second error. During the initialization process, I get this "dpkg: error: requested operation requires superuser privilege" and a
[2012-06-21 13:08:16 -0400] intinig: suggestion to open a ticker.
[2012-06-21 13:08:17 -0400] intinig: ticket
[2012-06-21 13:08:21 -0400] intinig: anyone with the same problem?
[2012-06-21 13:23:04 -0400] Philipp_: was there in change in release 10.12 which broke the service ressource? all my cookbook fail here
[2012-06-21 14:04:38 -0400] dkannan: intinig: have you used chef bootstrap. i do something like knife bootstrap ${host_name} -x ${user_name} -P ${password} --sudo --template-file
[2012-06-21 14:05:03 -0400] dkannan: intinig: and then copy my ssh keys to the machine. using the ssh-copy-id
[2012-06-21 14:05:37 -0400] dkannan: intinig: once the ssh keys are in place knife will work.
[2012-06-21 14:06:14 -0400] dkannan: intinig: or to put it another way. are you able to login to the system - without using knife or chef
[2012-06-21 14:06:25 -0400] leifmadsen: I also use a kickstart or preseed file that installs the machine and automatically creates a 'chef' user with an authorized_keys file so that I can use the keys on my machine to bootstrap remotely
[2012-06-21 14:07:12 -0400] dkannan: leifmadsen: that works only on boxes you control right. not on rackspace or ec2 ?
[2012-06-21 14:07:50 -0400] leifmadsen: intinig: I do the ec2 stuff all the time, and that problem you're having is likely that you don't have the ec2 key that you've selected for your ec2 instance loaded into memory. Usually to fix this I just do:   ssh-agent ; ssh-add ~/.chef/my_ec2_key.pem
[2012-06-21 14:08:06 -0400] leifmadsen: dkannan: ya I scrolled up adn realized he was using knife ec2 after the fact :)
[2012-06-21 14:08:23 -0400] intinig: leifmadsen: I am using -i <my_key>
[2012-06-21 14:08:49 -0400] intinig: dkannan: I can login using ssh without problems.
[2012-06-21 14:08:56 -0400] intinig: but when knife ec2 server start fails
[2012-06-21 14:09:06 -0400] intinig: I run knife bootstrap and it is able to connect, it just fails on the sudo
[2012-06-21 14:09:08 -0400] leifmadsen: and it's configured in your knife.rb with knife[:aws_ssh_key_id] ?
[2012-06-21 14:09:27 -0400] intinig: but that's crazy because the ubuntu user is a sudoer
[2012-06-21 14:09:37 -0400] intinig: leifmadsen: yep, otherwise it would not create the instance
[2012-06-21 14:09:53 -0400] leifmadsen: not sure -- the bootstrap just happens at the time of instantiation for me
[2012-06-21 14:09:58 -0400] leifmadsen: I don't have to run knife bootstrap after
[2012-06-21 14:10:09 -0400] intinig: leifmadsen: exactely because it should not sotp working
[2012-06-21 14:10:49 -0400] leifmadsen: when you bootstrap you have --sudo on the end?
[2012-06-21 14:11:08 -0400] leifmadsen: does the AMI you're using allow the ubuntu user sudo privileges?
[2012-06-21 14:11:22 -0400] intinig: leifmadsen: no and yes respectivel
[2012-06-21 14:11:24 -0400] intinig: respectively
[2012-06-21 14:12:00 -0400] leifmadsen: I think both answers should be yes
[2012-06-21 14:14:07 -0400] intinig: leifmadsen: it worked until yesterday though :)
[2012-06-21 14:14:15 -0400] leifmadsen: not sure
[2012-06-21 14:14:16 -0400] intinig: I used to run knife ec2 server create without any --sudo
[2012-06-21 14:14:23 -0400] intinig: and it worked :)
[2012-06-21 14:14:24 -0400] leifmadsen: I meant via knife bootstrap
[2012-06-21 14:14:28 -0400] leifmadsen: not knife ec2 server create
[2012-06-21 14:14:47 -0400] leifmadsen: without any additional data I have no other suggestions
[2012-06-21 14:17:12 -0400] geekbri: is the SSH key you use to create the nodes part of your ssh agent ?
[2012-06-21 14:17:15 -0400] geekbri: ssh-add -L ?
[2012-06-21 14:17:22 -0400] geekbri: maybe thats the issue?
[2012-06-21 14:28:32 -0400] dkannan: intinig: try putting a verbose option "knife -VV ...."
[2012-06-21 14:34:31 -0400] intinig: dkannan: I am gonna go with -VV
[2012-06-21 14:34:48 -0400] intinig: geekbri: if it was that bootstrap wouldn't work I think :-/
[2012-06-21 14:35:22 -0400] intinig: this it crazy, it worked now, without any change
[2012-06-21 14:35:25 -0400] intinig: to my cmdline
[2012-06-21 14:35:38 -0400] geekbri: -VV is pretty useful when things are blowing up
[2012-06-21 14:46:24 -0400] railsraider: i have a bunch of files to copy in a recipe from the default how can i write it with each?
[2012-06-21 14:46:45 -0400] yUnwEb: hello ppl
[2012-06-21 14:50:11 -0400] railsraider: basically i have a config directory with a lot of files, i need each to be copied to the shared/ config
[2012-06-21 14:50:20 -0400] smith3v: Hi all
[2012-06-21 14:51:45 -0400] railsraider: will this work? cookbook_file "config/*"  do
[2012-06-21 14:52:01 -0400] leifmadsen: ok I'm not sure what I'm missing here, but i have a role that defines a build-essential recipe near the top of the list, and a few other recipes further down in the list that perform a chef_gem. However, the chef_gem is failing because for some reason chef seems to jump right to any usage of chef_gem nearly immediately in the chef-client process
[2012-06-21 14:52:03 -0400] cwj: railsraider: you probably want to make a list
[2012-06-21 14:52:21 -0400] railsraider: cwj: good idea
[2012-06-21 14:52:23 -0400] cwj: like %w{foo.conf bar.conf baz.conf}.each do |conf|
[2012-06-21 14:52:23 -0400] railsraider: thanks
[2012-06-21 14:52:45 -0400] cwj: and put a file resource inside
[2012-06-21 14:57:38 -0400] theborch: purveyors of chef knowledge, anyone have any tips for setting up mongodb with chef
[2012-06-21 14:58:35 -0400] dkannan: railsraider: take a look at cookfile_file resource
[2012-06-21 14:58:46 -0400] railsraider: cwj: another cool way Dir.entries(Dir.pwd)
[2012-06-21 14:58:49 -0400] theborch: I'm trying to get it going with the edelight cookbook, but am having issues setting up a replicaset
[2012-06-21 14:59:16 -0400] yfeldblum: theborch, what's the issue?
[2012-06-21 15:00:10 -0400] theborch: when I set the cluster_name in the role attributes is seems to still be looking for a shard name, except I'm not trying to setup sharding
[2012-06-21 15:01:45 -0400] yfeldblum: theborch, every mongodb cluster has zero or more shards, where each shard is either a single node or a replica set with multiple nodes ... see http://www.mongodb.org/display/DOCS/Sharding+Introduction
[2012-06-21 15:02:20 -0400] railsraider: cwj: actually the best way to iterate through the folder is : Dir.foreach('path to dir) do  | item| next if item == '.' or item == '..'
[2012-06-21 15:02:40 -0400] yfeldblum: theborch, it's fine to have a mongodb cluster with exactly one shard where the one shard is a replica set with (for example) 3 peers
[2012-06-21 15:02:49 -0400] theborch: yfeldblum ah, thanks for pointing that out, still getting familiar with both chef and mongodb
[2012-06-21 15:03:03 -0400] cwj: railsraider: i guess i misunderstood your question because i thought you were trying to populate a directory on the file system with files present in your cookbook
[2012-06-21 15:03:42 -0400] railsraider: i want to copy all the files pin the config folder to the shared/config folder on the app server
[2012-06-21 15:04:06 -0400] leifmadsen: bah, looks like my issue is actually COOK-1296
[2012-06-21 15:04:15 -0400] leifmadsen: needing to move build-essential to compile time
[2012-06-21 15:05:10 -0400] railsraider: leifmadsen: build essential is ran anyway on bootstrap
[2012-06-21 15:05:29 -0400] leifmadsen: how so?
[2012-06-21 15:05:42 -0400] leifmadsen: perhaps it is on ubuntu
[2012-06-21 15:05:49 -0400] railsraider: if you read the template erb file
[2012-06-21 15:07:12 -0400] railsraider: leifmadsen: what os?
[2012-06-21 15:07:20 -0400] leifmadsen: centos 6.2
[2012-06-21 15:08:53 -0400] railsraider: leifmadsen:  just edit the centos erg file for the bootstrap  mine is under /Users/admin/.rvm/gems/ruby-1.8.7-p358/gems/chef-0.10.10/lib/chef/knife/bootstrap
[2012-06-21 15:09:20 -0400] railsraider: on ubuntu the bootstrap is doing   apt-get install -y ruby ruby1.8-dev build-essential wget libruby-extras libruby1.8-extras
[2012-06-21 15:10:05 -0400] railsraider: so you can add a yum install build-essential -y to centos5.erb or make a new template file and pass it to the bootstrap using --distro=
[2012-06-21 15:13:16 -0400] atomic-penguin: leifmadsen, why?
[2012-06-21 15:13:52 -0400] xerxas: hi all !
[2012-06-21 15:14:00 -0400] xerxas: anyone managing his osx workstation with chef ?
[2012-06-21 15:14:02 -0400] atomic-penguin: xerxas, hi!
[2012-06-21 15:14:22 -0400] xerxas: hi atomic-penguin  !
[2012-06-21 15:15:17 -0400] atomic-penguin: xerxas, yes people do that.  I personally don't have a mac osx machine however.  I know jtimberman has a "workstation" cookbook somewhere, perhaps only in a blog post.
[2012-06-21 15:15:34 -0400] xerxas: atomic-penguin:  yes, I saw this blog post ...
[2012-06-21 15:15:42 -0400] atomic-penguin: http://jtimberman.housepub.org/blog/2011/09/04/update-to-managing-my-workstations/
[2012-06-21 15:15:50 -0400] railsraider: leifmadsen: it's not dirty, bootstrap is not a curse simply a bash script to install ruby and chef with the validation - build-essential is needed to compile a lot of packages
[2012-06-21 15:16:11 -0400] leifmadsen: well the fact I'm modifying something local on my machine makes me feel dirty
[2012-06-21 15:16:17 -0400] leifmadsen: now I have to distribute that to all developers
[2012-06-21 15:16:48 -0400] sectionme: There was a whole talk about a company doing that at ChefConf, name escapes me though. I'm using chef on my laptop but with linux.
[2012-06-21 15:16:49 -0400] xerxas: I just re-installed my laptop, and searching for a clean way to bootstrap xcode command line tools, ruby, chef-solo, homebrew ... and then use chef-solo cookbooks
[2012-06-21 15:17:32 -0400] xerxas: I found cinderella which pretty much does that, but I don't find where I customize my run_list, where I change my cookbooks ...
[2012-06-21 15:17:37 -0400] railsraider: leifmadsen you don't have to modify anything copy that file to a new file and pass it as --distro when you bootstrap
[2012-06-21 15:17:47 -0400] railsraider: its documented well
[2012-06-21 15:18:04 -0400] sectionme: xerxas: Depends how much you want to automate it too, I've setup PXE booting so I can reinstall at anytime as long as I'm tethered to my network.
[2012-06-21 15:18:42 -0400] cheeseplus: reminds me that I need to setup my pxe server
[2012-06-21 15:18:55 -0400] mattray: cheeseplus: I've got cookbooks for that
[2012-06-21 15:19:03 -0400] xerxas: sectionme: I'm starting from osx installed (by my sysadmin, it's my professional laptop) (also, I'm sorry, this may be a bit OT)
[2012-06-21 15:19:08 -0400] xerxas: sectionme: do you know cinderella ?
[2012-06-21 15:19:14 -0400] mattray: pxe_dust automates pxe booting and OS installation
[2012-06-21 15:19:19 -0400] sectionme: pxe_dust springs to mind.
[2012-06-21 15:19:35 -0400] cheeseplus: mattray: nice, I've got a smartOS hypervisor box and with the rate I am creating VMs it seems silly not to have one
[2012-06-21 15:19:35 -0400] mattray: Debian & Ubuntu currently supported
[2012-06-21 15:20:02 -0400] railsraider: i need a little help here Dir.foreach('shared/config/') do | item | how do i tell the recipe to check the directory under the same recipe it runs from
[2012-06-21 15:20:32 -0400] mattray: I use pxe_dust extensively while working on OpenStack, lots of reprovisioning of servers
[2012-06-21 15:20:42 -0400] cheeseplus: definitely looking at pxe_dust today
[2012-06-21 15:21:24 -0400] cheeseplus: I'm spinning up 3-5 machines at a time for riak clusters and PXE would save me several manual steps
[2012-06-21 15:21:29 -0400] leifmadsen: I use cobbler for provisioning servers
[2012-06-21 15:21:45 -0400] BryanWB_: am i insane or is it impossible to turn off the the default site in the apache2 cookbook
[2012-06-21 15:22:01 -0400] sectionme: mattray: Out of interest. Do you use DHCP with it or static IP's? As I was looking at the half finished dhcp cookbook and was considering forking it for my own use (dual stack, IPv4/v6).
[2012-06-21 15:22:15 -0400] BryanWB_: override['apache']['disable_default_site'] = false    isn't working for me
[2012-06-21 15:22:47 -0400] sectionme: xerxas: I've not used cinderella no.
[2012-06-21 15:23:28 -0400] mattray: sectionme: my router currently provides dhcp and redirects to an admin server for dhcp-boot
[2012-06-21 15:23:32 -0400] mattray: sectionme: https://github.com/opscode-cookbooks/pxe_dust/blob/master/README.md#usage
[2012-06-21 15:23:42 -0400] xerxas: sectionme: thanks !
[2012-06-21 15:23:57 -0400] mattray: sectionme: at some point I'll revisit that dhcp cookbook since I need it too
[2012-06-21 15:24:34 -0400] mattray: sectionme: for my network, dd-wrt provides dhcp, but I need to have dhcp on a management network and a data network too, easier to do it with a server
[2012-06-21 15:24:36 -0400] sectionme: mattray: Yeah, I've read the docs, doesn't fit my dual stack purpose though unfortunately.
[2012-06-21 15:24:45 -0400] railsraider: anyone knows how cookbook file works?
[2012-06-21 15:24:50 -0400] railsraider: i mean code wise
[2012-06-21 15:24:56 -0400] mattray: sectionme: IPv6 is on my TODO
[2012-06-21 15:25:01 -0400] hoover_damm: gosh I haven't done metal without ipv6 in eons
[2012-06-21 15:25:11 -0400] mattray: and supporting multi-stacks will be essential
[2012-06-21 15:25:12 -0400] hoover_damm: or pxe
[2012-06-21 15:26:05 -0400] sectionme: mattray: Same kinda setup here, pfSense for routers and DD-WRT on APs but I use DHCP for v4 and v6 so run my own.
[2012-06-21 15:26:49 -0400] hoover_damm: mattray, good choice on only selecting ubuntu
[2012-06-21 15:26:59 -0400] mattray: hoover_damm: Debian works too :(
[2012-06-21 15:27:00 -0400] hoover_damm: the madness of having to have multiple tftpd daemons for redhat/centos
[2012-06-21 15:27:11 -0400] hoover_damm: and then another one for ubuntu/debian
[2012-06-21 15:27:13 -0400] hoover_damm: is pretty fun
[2012-06-21 15:27:14 -0400] mattray: hoover_damm: kickstart should be easy
[2012-06-21 15:27:21 -0400] hoover_damm: oh they are
[2012-06-21 15:27:24 -0400] hoover_damm: so is kayak
[2012-06-21 15:27:30 -0400] hoover_damm: well easy is a relative term
[2012-06-21 15:27:52 -0400] hoover_damm: relative to your problem solving skills and being able to setup PXE yourself
[2012-06-21 15:28:10 -0400] hoover_damm: if you can do it yourself, chef should be super easy
[2012-06-21 15:28:12 -0400] sectionme: mattray: If you want a free t-shirt do the he.net IPv6 certification when you get to IPv6 :)
[2012-06-21 15:28:41 -0400] mattray: sectionme: I do not want for free t-shirts ;)
[2012-06-21 15:29:00 -0400] mattray: I've got a hard rule for t-shirts, 1 in, 1 out
[2012-06-21 15:29:24 -0400] mattray: minus of course, my box of Opscode t-shirts
[2012-06-21 15:30:01 -0400] geekbri: Lets just say that anybody who shops at my local salvation army has a plethora of wonderful tech shirts to choose from
[2012-06-21 15:30:44 -0400] mattray: geekbri: yeah, I try not to even bring them home unless I can imagine replacing one
[2012-06-21 15:30:47 -0400] sectionme: mattray: That's where I've gone wrong, haven't thrown any out.
[2012-06-21 15:31:08 -0400] mattray: sectionme: 1 drawer, can't hold anymore. They're even rolled now
[2012-06-21 15:31:15 -0400] railsraider: guys any idea how to get to the folders in files/default/shared/config  of the cookbooh if i do a raw Dir.foreach('shared/config/') do | item | ?
[2012-06-21 15:31:26 -0400] geekbri: mattray: feel free to send me an opscode tshirt... I'd certainly wear it :-P
[2012-06-21 15:31:42 -0400] mattray: geekbri: where are you at? We'll have some at Velocity next week
[2012-06-21 15:31:49 -0400] cheeseplus: mattray: mine all go to goodwill
[2012-06-21 15:31:53 -0400] geekbri: Unfortunately my company could not afford to send me to velocity!
[2012-06-21 15:31:58 -0400] geekbri: I am in Boston
[2012-06-21 15:32:07 -0400] geekbri: you guys should have a chef conf here!
[2012-06-21 15:32:07 -0400] cheeseplus: except for the chefconf one, that one rocks
[2012-06-21 15:32:19 -0400] geekbri: We are having our first chef-boston meetup in july.
[2012-06-21 15:32:30 -0400] geekbri: (not organized by me, but i plan to be there)
[2012-06-21 15:32:33 -0400] mattray: geekbri: email me and I'll make sure Opscode sends t-shirts
[2012-06-21 15:32:39 -0400] geekbri: totally awesome
[2012-06-21 15:32:45 -0400] railsraider: i don't wanna go directly to the cache /var/chef/cache/cookbooks/
[2012-06-21 15:33:05 -0400] railsraider: is there a variable for the cached cookbook location
[2012-06-21 15:33:07 -0400] mattray: railsraider: unfortunately that approach wouldn't work either
[2012-06-21 15:33:19 -0400] mattray: railsraider: you have to know in advance which files are packaged in the cookbook
[2012-06-21 15:33:25 -0400] railsraider: ok
[2012-06-21 15:33:43 -0400] mattray: railsraider: they get pulled down as used in recipes, so the cache wouldn't be populated
[2012-06-21 15:33:54 -0400] railsraider: thanks
[2012-06-21 15:34:40 -0400] mattray: railsraider: if you have a lot of files packaged in a cookbook, maybe think about pushing the list into the recipe as an attribute?
[2012-06-21 15:34:47 -0400] mattray: and iterate over it?
[2012-06-21 15:35:15 -0400] railsraider: yeah i can make the list by hand with W%{}
[2012-06-21 15:35:26 -0400] railsraider: but i wanted to keep it automatic
[2012-06-21 15:35:41 -0400] railsraider: read all files under config and iterate that
[2012-06-21 15:36:16 -0400] mattray: sectionme: cheeseplus: my goal for the dhcp and pxe_dust cookbooks is to eventually drive it with knife, so you can re-provision boxes with "knife pxe delete SERVER" or "knife pxe install cent-6.2 SERVER"
[2012-06-21 15:36:48 -0400] cheeseplus: mattray: that would be really nice
[2012-06-21 15:36:49 -0400] geekbri: mattray: whats your email? mray@opscode.com ?
[2012-06-21 15:36:55 -0400] mattray: matt@opscode
[2012-06-21 15:37:47 -0400] railsraider: mattray:  would doing this cookbook_file "config/*"  do help me?
[2012-06-21 15:38:18 -0400] sectionme: mattray: I was thinking of anything that can't run chef-client to use knife, not sure yet if its the right way to do, to configure switches (hard and soft), routers, etc. Is it possible to do any of that provisioning with crowbar yet?
[2012-06-21 15:38:24 -0400] railsraider: i guess the question is does cookbook_file accepts wildcards
[2012-06-21 15:38:29 -0400] mattray: railsraider: I don't believe it does http://wiki.opscode.com/display/chef/Resources#Resources-CookbookFile
[2012-06-21 15:39:12 -0400] mattray: sectionme: I know that's on their roadmap. We've had discussions about it previously
[2012-06-21 15:39:19 -0400] |shad0w|: http://wiki.opscode.com/display/chef/Resources#Resources-RemoteDirectory
[2012-06-21 15:39:38 -0400] |shad0w|: that should recurse
[2012-06-21 15:40:18 -0400] mattray: sectionme: http://wiki.opscode.com/display/chef/Opscode+Community+Summit+1 read about "External Entities" and "Managed Nodes"
[2012-06-21 15:41:41 -0400] mattray: sectionme: pxe_dust was written while waiting for Crowbar to be open sourced, and I'm still using it because it's a very focused set of functionality that I want
[2012-06-21 15:41:55 -0400] sectionme: mattray: Yeah, I'd seen it in my quest for not re-inventing the wheel but wasn't sure how to find out upto date information about it.
[2012-06-21 15:43:31 -0400] mattray: we're watching the Chef ecosystem to see how people want it done and what works, we'll revisit it
[2012-06-21 15:44:32 -0400] drrk: ooo that's interesting
[2012-06-21 15:44:52 -0400] BryanWB_: |shad0w|: wassup!
[2012-06-21 15:44:55 -0400] drrk: I was wondering how I woudl use chef to manage serial console and PDUs
[2012-06-21 15:45:10 -0400] |shad0w|: whats up BryanWB_
[2012-06-21 15:45:15 -0400] |shad0w|: been afk for a bit...
[2012-06-21 15:45:40 -0400] BryanWB_: |shad0w|: u have? that's crazy ;)
[2012-06-21 15:45:40 -0400] mattray: drrk: that was the discussion at the Community Summit
[2012-06-21 15:45:53 -0400] mattray: but afaik not much progress has been made
[2012-06-21 15:46:15 -0400] |shad0w|: new woman is eating up all my time
[2012-06-21 15:46:16 -0400] drrk: was that at chefconf?
[2012-06-21 15:46:39 -0400] drrk: I would have loved to go to that, but can't get work to pay for flights to seattle
[2012-06-21 15:46:51 -0400] drrk: or SF for that matter
[2012-06-21 15:46:55 -0400] BryanWB_: |shad0w|: they tend to do that ;)
[2012-06-21 15:47:21 -0400] BryanWB_: laterz
[2012-06-21 15:47:22 -0400] mattray: drrk: actually from the Community Summit in November
[2012-06-21 15:47:48 -0400] drrk: does it happen every year?
[2012-06-21 15:49:16 -0400] mattray: drrk: last November was the first
[2012-06-21 15:49:22 -0400] mattray: I believe we're planning another
[2012-06-21 15:49:26 -0400] drrk: ah fair enough :)
[2012-06-21 15:49:27 -0400] mattray: and another ChefConf next Spring
[2012-06-21 15:49:42 -0400] geekbri: East coast?!
[2012-06-21 15:49:44 -0400] geekbri: :)
[2012-06-21 15:49:52 -0400] drrk: Europe ;)
[2012-06-21 15:50:07 -0400] geekbri: I'm all for that if my company will pay to send me there :-P
[2012-06-21 15:50:09 -0400] mattray: plus for the rest of the year I know we've got Velocity, OSCON, Surge, LinuxCon, TXLF, OpenStack Fall Summit so far
[2012-06-21 15:51:16 -0400] drrk: sounds good, i'm not even going to make FOSDEM this year
[2012-06-21 15:51:35 -0400] drrk: as I foolishly scheduled my wedding for the same day
[2012-06-21 15:51:55 -0400] mattray: FOSDEM is every year, your wedding is just once :)
[2012-06-21 15:51:58 -0400] drrk: indeed
[2012-06-21 15:52:07 -0400] geekbri: Just get married at FOSDEM
[2012-06-21 15:52:10 -0400] geekbri: problem solved.
[2012-06-21 15:52:20 -0400] drrk: lol, there wouldn't be a wedding then!
[2012-06-21 15:52:53 -0400] geekbri: Yeah makes sense, too many contributors to you marriage usually ends in a failed project.
[2012-06-21 15:53:10 -0400] drrk: haha
[2012-06-21 15:53:18 -0400] mattray: there was a wedding at the SouthEast LinuxFest a few years ago, they used the afterparty as their reception
[2012-06-21 15:53:33 -0400] mattray: my company footed the bill inadvertently :)
[2012-06-21 15:53:36 -0400] drrk: good way to save money I guess
[2012-06-21 15:55:12 -0400] cjs226: how (un)safe is it to allow 0.0.0.0 access to port 4000 with open source chef?  my environment is currently 100% AWS but we develop locally on our laptops
[2012-06-21 15:55:38 -0400] mattray: cjs226: probably fairly safe. You still need a login
[2012-06-21 15:56:22 -0400] cjs226: mattray: thx
[2012-06-21 15:56:26 -0400] geekbri: plus you can use security groups on AWS to limit who can connect.
[2012-06-21 15:57:33 -0400] cjs226: geekbri: my delimma is developers working remotely on their laptops needing access
[2012-06-21 15:58:59 -0400] Adz: cjs226, perhaps a vpn? the openvpn cookbook seems pretty good.
[2012-06-21 16:00:06 -0400] cjs226: adz: would i have to force ALL traffic over the VPN?
[2012-06-21 16:00:47 -0400] Adz: cjs226, no, openvpn pushes a routing table modification when you connect
[2012-06-21 16:01:00 -0400] cjs226: adz: thx, i'll check that out!
[2012-06-21 16:16:45 -0400] sectionme: xerxas: Yourself and your sysadmin might like it if you pointed him towards http://www.youtube.com/watch?v=kfQy8UzBUvY
[2012-06-21 16:18:00 -0400] sectionme: xerxas: The cookbooks are here https://github.com/pivotal/pivotal_workstation
[2012-06-21 16:28:50 -0400] Sim0n: Yo.
[2012-06-21 16:29:15 -0400] Sim0n: Has anyone used lusis logstash cookbook to install logstash and kibana?
[2012-06-21 16:46:32 -0400] ddosia: guys, what is the preffered way to link jenkins to chef? little bit frustrated by community "chef-jenkins", found few other which i more like, but them contain a lot of bugs
[2012-06-21 16:47:55 -0400] geekbri: mattray: I sent you an email about the boston chef meetup :).
[2012-06-21 16:55:33 -0400] wilsondkw: someone willing to assist on getting a role attribute to override an environment attribute?
[2012-06-21 16:56:51 -0400] sectionme: wilsondkw: http://wiki.opscode.com/display/chef/Setting+Attributes+(Examples)
[2012-06-21 17:03:51 -0400] hector: can we pin override attributes to an environment in a role file ? Similar to: "env_run_lists" ?
[2012-06-21 17:04:17 -0400] mattray: hector: attributes can be set in the environment
[2012-06-21 17:04:50 -0400] mattray: http://wiki.opscode.com/display/chef/Environments#Environments-attributes
[2012-06-21 17:05:25 -0400] hector: ahh ok thanks mattray
[2012-06-21 17:34:18 -0400] Zenigor: @nathenharvey Firstly, thank you for taking time out of your day yesterday to meet with us. I was wondering if you had a few moments to answer a few questions
[2012-06-21 17:50:27 -0400] cassarani: my current Chef run is hanging while executing a script - I can ssh into the server, and I was hoping there would be some way of finding out what's going on
[2012-06-21 17:50:30 -0400] cassarani: is there?
[2012-06-21 17:50:43 -0400] dkannan: does opscode have a ominibus install for chef-solo
[2012-06-21 17:50:54 -0400] cassarani: specifically, it's hanging while trying to install Ruby 1.9.3 with rbenv and ruby_build
[2012-06-21 17:51:41 -0400] miah: dkannan: if you install chef with the omnibus, then you have chef-solo as well
[2012-06-21 17:52:17 -0400] dkannan: miah: do not want rabbitmq, couchdb etc
[2012-06-21 17:54:01 -0400] miah: the omnibus installer does not currently contain those items
[2012-06-21 17:54:46 -0400] dkannan: miah: thx
[2012-06-21 17:58:29 -0400] yfeldblum: cassarani, it takes 5-10 minutes to compile ruby
[2012-06-21 17:58:42 -0400] yfeldblum: cassarani, and that of course depends on the hardware
[2012-06-21 17:58:43 -0400] cassarani: yfeldblum: yeah, that was well over 5-10 minutes, and top wasn't showing any CPU activity
[2012-06-21 17:58:58 -0400] monvillalon: default_attributes(
[2012-06-21 17:58:59 -0400] monvillalon:     "apache" => {
[2012-06-21 17:58:59 -0400] cassarani: yfeldblum: I terminated the chef run and ran another one, and it was fine
[2012-06-21 17:59:00 -0400] monvillalon:         "listen_ports" => [ "80" ]
[2012-06-21 17:59:01 -0400] monvillalon:     }
[2012-06-21 18:02:26 -0400] miah: monvillalon: we try to keep pastes out of here and on gist/pastebin/nopaste/etc
[2012-06-21 18:02:37 -0400] monvillalon: miah: it was an accident :) I'm sorry
[2012-06-21 18:02:41 -0400] miah: coolbeans
[2012-06-21 18:04:33 -0400] monvillalon: Im trying to set the default of apache.listen_ports to 80 but deep mere is mixing them, I'm not sure of the syntax tell it to not to merge and use only 80
[2012-06-21 18:05:06 -0400] monvillalon: or should i use overwrite_attributes to escape the deep merge?
[2012-06-21 18:06:57 -0400] mattray: monvillalon: that sounds right
[2012-06-21 18:07:02 -0400] mattray: defaults get merged
[2012-06-21 18:07:38 -0400] monvillalon: mattray: I was wondering when I would need that :)
[2012-06-21 18:33:36 -0400] smith3v: guys, it seems the latest stable knife-ec2 has a bug with security groups. It just returns "Fog::Compute::AWS::NotFound: The security group 'sg-4e63c727' does not exist" :(
[2012-06-21 18:34:07 -0400] smith3v: Here is more info
[2012-06-21 18:34:08 -0400] smith3v: https://gist.github.com/2967604
[2012-06-21 18:37:01 -0400] mattray: smith3v: not sure what the issue is there, feel free to open a ticket on tickets.opscode.com
[2012-06-21 18:37:37 -0400] mattray: or if you're feeling adventurous, debug it and patch it...
[2012-06-21 18:37:58 -0400] mattray: since you already seem to have Fog working
[2012-06-21 18:38:20 -0400] mattray: is that 1.3.1?
[2012-06-21 18:38:26 -0400] mattray: or Fog trunk?
[2012-06-21 18:39:33 -0400] smith3v: fe-ec2 (0.5.12)
[2012-06-21 18:39:33 -0400] smith3v:  (1.3.1)
[2012-06-21 18:39:53 -0400] smith3v: fog (1.3.1)
[2012-06-21 18:40:02 -0400] smith3v: all gems are stable
[2012-06-21 18:40:55 -0400] smith3v: I'm not on a short leg with Ruby :( Just read Why's guide...
[2012-06-21 18:41:11 -0400] LawrenceSeattle: for some reason I can't install chef gems in ec2.  Looks like the rightscale mirror is missing stuff?
[2012-06-21 18:42:00 -0400] smith3v: I'm investigating the issue myself half a day but it seems I need help.
[2012-06-21 18:42:35 -0400] smith3v: It appeared after updating all gems in system today.
[2012-06-21 18:43:54 -0400] geekbri: mattray: thanks for the help with the boston chef meetup stuff.  I'm hoping it will help the attendance go up a bit!
[2012-06-21 18:43:57 -0400] hoover_damm: smith3v, it's knife ec2 server create --groups test
[2012-06-21 18:44:02 -0400] hoover_damm: not sg-r363c727
[2012-06-21 18:44:12 -0400] hoover_damm: smith3v, there is no need to specify the group id, the group name is appropriate
[2012-06-21 18:44:46 -0400] smith3v: hmm. I used the group IDs for the last months.
[2012-06-21 18:44:54 -0400] mattray: geekbri: good stuff
[2012-06-21 18:44:58 -0400] hoover_damm: smith3v, I do knife ec2 server create -r "role[bob]" -I ami --flavor c1.medium -G default (equiv of --group) -x ubuntu -N name -Z zone -S ssh key
[2012-06-21 18:45:05 -0400] hoover_damm: shouldn't have to use the group ids
[2012-06-21 18:45:10 -0400] hoover_damm: ideally they should / could work
[2012-06-21 18:45:11 -0400] smith3v: :) I'm going to test
[2012-06-21 18:45:18 -0400] mattray: smith3v: please report back :)
[2012-06-21 18:45:21 -0400] hoover_damm: but it's looking for the name
[2012-06-21 18:45:22 -0400] mattray: hoover_damm: thanks
[2012-06-21 18:45:24 -0400] hoover_damm: not the group name
[2012-06-21 18:45:33 -0400] hoover_damm: mattray, just a part of the idle service :)
[2012-06-21 18:46:10 -0400] smith3v: hoover_damm: thanks! You are right. It works fine
[2012-06-21 18:46:39 -0400] hoover_damm: smith3v, it would be nice if group id's worked.  So feel free to create a ticket stating that in knife-ec2 on tickets.opscode.com
[2012-06-21 18:47:10 -0400] hoover_damm: smith3v, because it's fairly easy to see how one could get those mixed up :) and we don't want failure on mixups
[2012-06-21 18:47:58 -0400] smith3v: Ok, I'll register it :)
[2012-06-21 18:49:42 -0400] rvanniekirk: Quick chefism question regarding virtual hosts,  I've got some existing chef servers already instantiated and want to add new vhosts to apache/nginx, rather then going through the process manually, what would be the proper chefism for handling this?
[2012-06-21 18:55:33 -0400] cheeseplus: rvanniekirk: I may be missing something but should just be able to update the cookbooks that generate the vhost files already and do a chef-client run
[2012-06-21 18:55:37 -0400] yfeldblum: rvanniekirk, re-run chef-client or chef-solo (after changing the cookbook, role, data bag item, or other relevant part of the central config database)
[2012-06-21 18:55:56 -0400] cheeseplus: at least I sounded right ;)
[2012-06-21 18:57:09 -0400] rvanniekirk: Ok thanks guys :D
[2012-06-21 19:02:35 -0400] yfeldblum: rvanniekirk, chef-client and chef-solo are meant to be run often and repeatedly
[2012-06-21 19:03:02 -0400] rvanniekirk: Ok, great.  Good to know.
[2012-06-21 19:03:52 -0400] cheeseplus: apparently 50$ is not an ubuntu approved partition size
[2012-06-21 19:08:10 -0400] lflux: probably would be in oracle.
[2012-06-21 19:08:33 -0400] cheeseplus: I want precisely 10 dollars of disk please
[2012-06-21 19:09:14 -0400] c_t: sure thing, cheeseplus
[2012-06-21 19:09:33 -0400] geekbri: I would like to pay for my diskspace in wampum.
[2012-06-21 19:09:35 -0400] c_t: we haven't updated our pricing structure since 1985 though, so that'll get you 26 bytes
[2012-06-21 19:12:41 -0400] pehlert: Hey, I'd like to use the user provider's "password" attribute to set a users password to "" so that he can't log in anymore. However, it complains about ruby-shadow being missing, although I installed libshadow-ruby1.8 .. Is this a known problem?
[2012-06-21 19:15:19 -0400] JasonBox: What flavour of Chef are you using, pehlert?
[2012-06-21 19:20:23 -0400] atomic-penguin: pehlert, safest thing to do is change their shell to /bin/false
[2012-06-21 19:21:06 -0400] atomic-penguin: pehlert, because blanking out a users password should let that person login with no password, probably not what you want
[2012-06-21 19:21:35 -0400] atomic-penguin: pehlert, locking the account may not work correctly with certain pam modules
[2012-06-21 19:23:00 -0400] sectionme:  /bin/false may also not be the best bet.
[2012-06-21 19:23:33 -0400] geekbri: keep in mind that if a user has their shell set to /bin/false but they can connect via SSH you can find ways to do things still.
[2012-06-21 19:23:44 -0400] sectionme: Unless you want people to be able to ssh port forward as disabled users etc.
[2012-06-21 19:23:50 -0400] geekbri: ^ +1
[2012-06-21 19:24:10 -0400] pehlert: JasonBox: Hosted Chef
[2012-06-21 19:24:48 -0400] pehlert: atomic-penguin: I want the user to be able to authenticate by private/public key, so this is unfortunately not an option
[2012-06-21 19:25:03 -0400] atomic-penguin: pehlert, okay right on
[2012-06-21 19:25:31 -0400] atomic-penguin: pehlert, locked accounts can still login by key I believe.
[2012-06-21 19:27:45 -0400] atomic-penguin: I did not know that about /bin/false.  Usually use nologin, but it may not be available everywhere
[2012-06-21 19:27:49 -0400] pehlert: atomic-penguin: You can disable blank passwords in sshd's config
[2012-06-21 19:28:09 -0400] pehlert: So that will probably be pretty secure
[2012-06-21 19:28:56 -0400] sectionme: pehlert: something like https://gist.github.com/2967957 in your sshd config might do what your after. make sure you enable shared keys first though, else you might not get logged back in.
[2012-06-21 19:30:35 -0400] geekbri:  /bin/false and /sbin/nologin are basically the same thing
[2012-06-21 19:30:47 -0400] geekbri: they arent really meant to be any actual source of security.. they are just kinda....
[2012-06-21 19:31:16 -0400] pehlert: sectionme: Yup, that's what I have. Now I only need to find a way to blank out a users password. I'll probably just use 'execute "passwd -d USER"'
[2012-06-21 19:31:16 -0400] geekbri: there :)
[2012-06-21 19:31:33 -0400] sectionme:  /bin/false and /bin/nologin predate SSH iirc, works fine with telnet :P
[2012-06-21 19:31:57 -0400] pehlert: stupid SSH!
[2012-06-21 19:32:40 -0400] atomic-penguin: geekbri, I imagine part of the problem is the complexity of PAM, and SSH's interaction with those pseudo-shells
[2012-06-21 19:35:51 -0400] sectionme: pehlert: Why does the password need to be blank if using shared keys to login? I may have missed this.
[2012-06-21 19:36:57 -0400] sectionme: atomic-penguin: It's because SSH isn't just a remote shell, like for example telnet, you can ssh into a machine and not start a shell using -N irrc.
[2012-06-21 19:37:33 -0400] |shad0w|: doesn't key auth bypass pam altogether?
[2012-06-21 19:38:24 -0400] sectionme: |shad0w|: https://wiki.archlinux.org/index.php/SSH_Keys#pam_ssh
[2012-06-21 19:38:58 -0400] |shad0w|: thanks sectionme
[2012-06-21 19:39:36 -0400] |shad0w|: hmm, that just looks like a hook to start ssh key agent for you
[2012-06-21 19:39:54 -0400] geekbri: aww it doesn't support elliptic curve encryption keys! :(
[2012-06-21 19:41:40 -0400] |shad0w|: i guess people that use pam_ssh aren't running an agent or forwarding on their client workstation in the first place. seems like a silly module
[2012-06-21 19:41:57 -0400] sectionme: pehlert: this may bite you http://www.openssh.org/faq.html#3.2
[2012-06-21 19:41:59 -0400] geekbri: I'm not sure how I would live without ssh agent
[2012-06-21 19:42:48 -0400] qhartman: upgraded to 10.12 the other day and am now getting this exception when trying to run chef-expander: http://pastebin.com/ENADGCh5
[2012-06-21 19:44:50 -0400] qhartman: the side effect of this is that our knife searches aren't returning correct results
[2012-06-21 19:45:04 -0400] coderanger: miah: Every time I see the london olympics logo I have to stifle a 12-year-old giggle
[2012-06-21 19:45:41 -0400] miah: coderanger: ya. it is a bit uh..
[2012-06-21 19:45:44 -0400] sectionme: qhartman: You have two versions of eventmachine installed by the looks of it and the wrong version is getting loaded first, try 'gem list | grep eventmachine', uninstall the one giving the hasstle and see if it works maybe?
[2012-06-21 19:47:15 -0400] qhartman: sectionme, great, thanks for the suggestion
[2012-06-21 19:48:12 -0400] qhartman: yeah, I'm showing both 1.0.0.rc.1 and 0.12.10
[2012-06-21 19:48:13 -0400] jhayden: hello, is it possible to add a line into an existing file during a recipe run?
[2012-06-21 19:48:44 -0400] jhayden: ie: I would like to add a line to /etc/services for nape during an install of nrpe
[2012-06-21 19:48:44 -0400] qhartman: sectionme, any way to tell which is "right" for chef?
[2012-06-21 19:49:01 -0400] jhayden: nrpe
[2012-06-21 19:49:03 -0400] geekbri: I can't even tell what the london2012 olympics logo is supposed to be.
[2012-06-21 19:49:11 -0400] geekbri: it looks like it was designed by me.  That is not a compliment
[2012-06-21 19:49:11 -0400] dumfries: two rocks
[2012-06-21 19:49:25 -0400] qhartman: jhayden, you could do a script call and 'echo "what I want" >> file'
[2012-06-21 19:49:38 -0400] sectionme: qhartman: "can't activate eventmachine (~> 0.12.10, runtime) ..., already activated eventmachine-1.0.0.rc.1", so remove 1.0.0.rc.1
[2012-06-21 19:50:16 -0400] qhartman: sectionme, thanks. What I figured, but I'm a bit skittish with Ruby stuff still. Thanks.
[2012-06-21 19:50:27 -0400] coderanger: geekbri: It is supposed to be a stylized view of the isles
[2012-06-21 19:50:39 -0400] geekbri: oh yeah?  ..... thats awful.
[2012-06-21 19:50:57 -0400] dumfries: horrible still.
[2012-06-21 19:51:17 -0400] geekbri: I hope they had a committee of like 12 people that picked that.
[2012-06-21 19:51:24 -0400] geekbri: thats the only thing that could make me hate it more.
[2012-06-21 19:52:04 -0400] sectionme: It's been commented on many times here in the UK in the past about the olympics 2012 logo looking like a member of the Simpsons giving someone oral. It also cost a fortune IIRC.
[2012-06-21 19:52:31 -0400] dumfries: Well it comes with free rooftop rocket launchers ;)
[2012-06-21 19:54:31 -0400] qhartman: sectionme, looks like that did the trick. Thanks again
[2012-06-21 19:54:45 -0400] sectionme: qhartman: happy to help.
[2012-06-21 20:03:10 -0400] qhartman: hm, how soon after restarting solr and expander should I expect searches to give me valid results?
[2012-06-21 20:03:39 -0400] wamcvey: How is the best way to override a template that a cookbook has explicitly defined? In particular, the postgresql cookbook uses a template for pg_hba.conf, but different roles using that recipe have different database access requirements, so I really need to have a per-role customization of that template.
[2012-06-21 20:04:47 -0400] qhartman: wamcvey, the best way I've found to handle that situation is to have a single recipe / cookbook for managing that file, and then have the other cookbooks / recipes that want to change it set attributes for it so it makes the right changes
[2012-06-21 20:04:58 -0400] dschultz: qhartman: You may need to run knife index rebuild, then check via knife search again
[2012-06-21 20:05:57 -0400] qhartman: rather than having them make the changes themselves. the sysctl cookbook on the community site is a good example of this
[2012-06-21 20:06:07 -0400] qhartman: dschultz, I'll give that a shot
[2012-06-21 20:06:57 -0400] qhartman: dschultz, hm, still not showing new info... :-\
[2012-06-21 20:07:24 -0400] wamcvey: qhartman: Sorry, but I don't understand. If I include postgresql::server into a recipe, then that template is goign to run with the static vendor-recipe supplied pg_hba.conf.erb template. I could create my own rule in a cookbook to override, but won't that just constantly churn the contents of the file, requiring frequent (every chef run) restarts?
[2012-06-21 20:08:55 -0400] qhartman: wamcvey, the approach I mentioned would require modifying the postgres recipe to not use the template, or have it honor attributes set by other recipes and apply them to the template
[2012-06-21 20:09:52 -0400] qhartman: Short of that, the only way to "override" it would be to modify the template itself, or add logic to your other recipes for changing the config
[2012-06-21 20:09:56 -0400] wamcvey: qhartman: Oh... ok... so I would modify the postgresql::server recipe to just comment out that template explansion, and move it to my own recipe.
[2012-06-21 20:10:03 -0400] qhartman: but that's a road I've been down, and it gets hairy
[2012-06-21 20:11:07 -0400] qhartman: so yeah, it takes some work, but ultimately having one thing that manages files that multiple things may need to change seems to be the cleanest approach
[2012-06-21 20:11:19 -0400] rvanniekirk: Ok, another quick question,  how can I make chef skip over the "press q to continue" prompt I get from RVM when I do, say, "rvm install 1.9.3-p194"
[2012-06-21 20:11:24 -0400] wamcvey: qhartman: ok... Ideally, it would be great if the cookbook would use a node parameter for the the template name to use, falling back to it's own pg_hba.conf.erb if none were specified.
[2012-06-21 20:11:44 -0400] qhartman: wamcvey, sure, that's possible
[2012-06-21 20:13:26 -0400] wamcvey: qhartman: thanks for the tip.
[2012-06-21 20:13:53 -0400] qhartman: wamcvey, sure thing
[2012-06-21 20:15:30 -0400] qhartman: wamcvey, again, checkout the sysctl cookbook for inspiration.
[2012-06-21 20:17:56 -0400] qhartman: dschultz, looks like that re-index did work. I just fat-fingered my test search. Cheers!
[2012-06-21 20:19:31 -0400] qhartman: rvanniekirk, I'm not an RVM user, but I'm guessing there's a command line switch that will disable that.
[2012-06-21 20:20:03 -0400] qhartman: rvanniekirk, something equivalent of the "-y" for yum and other utils that quashes confirmation dialogs.
[2012-06-21 20:20:09 -0400] dschultz: qhartman: That's awesome! Seems like a common issue when there are lots of attributes and Ohai data, thus it exceeds the MaxFieldLength limit. Btw, I assume you increased the MaxFieldLength values in the solrconfig.xml files?
[2012-06-21 20:20:25 -0400] qhartman: dschultz, I did not
[2012-06-21 20:20:47 -0400] qhartman: The only upgrade docs I found didn't make mention of such a thing
[2012-06-21 20:21:25 -0400] qhartman: but I happened to jump the gun a bit. I meant ot only be upgrading to 10.10, but got 10.12. I was doing the upgrade while a release was in progress, so I might have beat the docs to the door
[2012-06-21 20:24:13 -0400] dschultz: qhartman: Hm, I missed the upgrade part. I've yet to upgrade to 10.12 myself, yet. Though, I have had to mod the config files as I ran into the same issue before. There was a bug filed for this a while back: http://tickets.opscode.com/browse/CHEF-2346
[2012-06-21 20:24:23 -0400] qhartman: dschultz, hm, this is (was) a 0.10.0  installation I inherited, and I'm not seeing a solrconfig.xml file anywhere I would expect it. Found a jetty.xml, but that doesn't seem right
[2012-06-21 20:25:13 -0400] dschultz: qhartman: Check /var/lib/chef/solr/conf/solrconfig.xml and /var/lib/chef/solr/solr-jetty/webapps/solr/conf/solrconfig.xml
[2012-06-21 20:25:30 -0400] qhartman: dschultz, will do
[2012-06-21 20:25:47 -0400] dschultz: Grep for MaxFieldLength, as there are multiple values set in one of those files, can't recall which.
[2012-06-21 20:26:40 -0400] qhartman: roger
[2012-06-21 20:28:39 -0400] qhartman: dschultz, looks like 100000 is the most-liked value
[2012-06-21 20:29:25 -0400] dschultz: qhartman: Yep, that's what I've went with
[2012-06-21 20:30:27 -0400] qhartman: so, onto the next thing
[2012-06-21 20:31:07 -0400] qhartman: has anyone gotten the python 1.0.6 cookbook to work with 10.12? The supposed fix linked to from the cookbook's page on the community site doesn't work for me.
[2012-06-21 20:31:50 -0400] qhartman: I was just about to dive into it, but if that wheel has already been invented I have other stuff to burn time on
[2012-06-21 20:32:57 -0400] qhartman: here's the ticket for the problem I'm running into: http://tickets.opscode.com/browse/COOK-1320
[2012-06-21 20:38:04 -0400] yUnwEb: if I submit a patch for an open ticket, should I put it as resolved?
[2012-06-21 20:40:52 -0400] chip-: When doing knife search, if I want to return multiple values with -a, is this possible?
[2012-06-21 20:40:54 -0400] sectionme: Anyone know if Artur Bergman has released his artur cookbook he mentioned at ChefConf?
[2012-06-21 20:41:02 -0400] chip-: tried comma-separated and multiple -a flags, neither worked.
[2012-06-21 20:43:58 -0400] ashb: chip-: probably not without writing a plugin or similar
[2012-06-21 20:45:09 -0400] mattray: chip-: -a is the attribute you want to show from the node, I don't think it supports multiple values (yet)
[2012-06-21 20:45:46 -0400] mattray: it could be something that spins out of the search streamlining we showed at ChefConf
[2012-06-21 20:45:56 -0400] mattray: in fact, that would be pretty slick
[2012-06-21 20:46:56 -0400] wamcvey: qhartman: interesting history on that bug... jtimberman commented and said he'd mark it as untriaged, but instead marked as 'triaged'. And then the originator of the bug report resolved and marked the bug fix, without the fix ever getting pulled into the main distro.
[2012-06-21 20:47:24 -0400] qhartman: wamcvey, wheee. Gotta love stuff like that
[2012-06-21 20:48:05 -0400] wamcvey: I'm glad you're looking at it... it's been affecting a lot of my recipes...
[2012-06-21 20:48:21 -0400] qhartman: I pulled down the fix that Viral Shah submitted, but it didn't work for me on my first shot. I'm going to spin up a new box and see if it really does fix it or not.
[2012-06-21 20:52:27 -0400] qhartman: what's the quickest way to diff all the files in two directories and end up with readable output?
[2012-06-21 20:52:47 -0400] wamcvey: diff -r -U  ?
[2012-06-21 20:52:47 -0400] qhartman: <- not a programmer
[2012-06-21 20:53:07 -0400] Babar: or use tools, like meld, tkdiff3 and the like
[2012-06-21 20:53:43 -0400] qhartman: I use meld for looking at individual files, but it doesn't seem to handle a whole bunch of files well (as far as I can see)
[2012-06-21 20:55:14 -0400] dodizzle: is there a way to install and register a chef client in kickstart?
[2012-06-21 20:55:46 -0400] dodizzle: want to aviod having to bootstrap after its built
[2012-06-21 20:56:03 -0400] wamcvey: qhartman: meld can do directories... inidividual file difference become tabs.... but diff -r  can be pretty effective. You don't have to list the diff output all in one go, you could instead just get a report of which files are different, and then look at those file difference individually.
[2012-06-21 20:56:27 -0400] qhartman: wamcvey, cool, thanks.
[2012-06-21 20:58:08 -0400] jtimberman: wamcvey: qhartman: I just merged the pull request for COOK-1320.
[2012-06-21 20:58:30 -0400] qhartman: jtimberman, yay!
[2012-06-21 20:58:33 -0400] jtimberman: not ready for a new release (there may be other tickets that we need to merge and test first), though
[2012-06-21 20:58:45 -0400] qhartman: progress is progress
[2012-06-21 20:59:08 -0400] wamcvey: thanks jtimberman!
[2012-06-21 20:59:21 -0400] chip-: I've asked this a couple of times, but didn't see any answers, sorry if it's repetitive:
[2012-06-21 20:59:24 -0400] dodizzle: jtimberman rules!
[2012-06-21 20:59:27 -0400] chip-: is there a way to force 'from file' for all knife operations?
[2012-06-21 20:59:36 -0400] chip-: disable direct knife foo edit / create operations?
[2012-06-21 20:59:42 -0400] chip-: (I guess delete you'd have to do direct)
[2012-06-21 21:00:24 -0400] qhartman: chip-, Some of my workmates have done similar things with aliases / wrapper scripts. I don't know of a way to do it that's baked in though.
[2012-06-21 21:01:18 -0400] chip-: Damn. I need a way to make it 'upon pain of losing your goddamn job' if an object exists on the Chef server but isn't in the repo.
[2012-06-21 21:01:44 -0400] qhartman: chip-, ah, yeah, we have the same issue
[2012-06-21 21:01:59 -0400] qhartman: I've spent a bunch of time pulling shit out of chef and commiting to git
[2012-06-21 21:02:12 -0400] qhartman: and getting it all synced
[2012-06-21 21:02:53 -0400] qhartman: too bad there's no git blame for people who didn't commit.... ^_^
[2012-06-21 21:03:02 -0400] ashb: one way would be to have a post-commit hook upload it
[2012-06-21 21:03:30 -0400] ashb: doesn't help for node runlists or attributes though
[2012-06-21 21:03:38 -0400] ashb: as those can only be 'live' and not from file
[2012-06-21 21:03:43 -0400] chip-: I'm less concerned about things in the repo that aren't on the Chef server
[2012-06-21 21:03:49 -0400] chip-: and more concerned about things on the Chef server that aren't in the repo
[2012-06-21 21:04:07 -0400] chip-: as ashb said, post-commit hook at the repo can take care of updating the server.
[2012-06-21 21:04:22 -0400] jtimberman: chip-: check out the 'knife-essentials' gem
[2012-06-21 21:04:36 -0400] ashb: you could possible write a knife plugin that would look at the output of knife status and enforce your policies
[2012-06-21 21:04:47 -0400] ashb: (I'm only guessing as I'm not sure what is achievable with a plugin)
[2012-06-21 21:05:01 -0400] |shad0w|: don't give anyone access to the chef-server...
[2012-06-21 21:05:31 -0400] qhartman: jtimberman, wamcvey : It doesn't look like that pull fixes the problem I'm having, which presents the same way as the one in COOK-1320. I think I've figured out how to fix it though. If I get it going I guess I'll setup a github account.... :D
[2012-06-21 21:06:19 -0400] chip-: jtimberman: co-exists or conflicts with spork?
[2012-06-21 21:09:40 -0400] jtimberman: chip-: co-exists, but i don't actually use either of those plugins myself - I have like, 2 years of knife sub-command finger habits.
[2012-06-21 21:10:03 -0400] chip-: jtimberman: One would hope you had such habits.
[2012-06-21 21:10:28 -0400] chip-: After a year in a vacuum here, more or less, shouting to the crashing waves that Chef is completely awesome, can you please get on board?" to my dev team, someone finally listened
[2012-06-21 21:10:44 -0400] chip-: and now out of nowhere it's snowballed to 20 people wanting to contribute and use it instead of 2 of us
[2012-06-21 21:10:59 -0400] chip-: which is awesome, but they're all bristling at things like having to send pull requests to the 2 people who know the repo
[2012-06-21 21:11:10 -0400] chip-: or having to conform to our design patterns
[2012-06-21 21:11:22 -0400] chip-: (like use knife from file)
[2012-06-21 21:15:46 -0400] gabebug: are there any recommendations for chef playing nicely with rvm? i'm tempted to have chef itself run from the omnibus installs since it's more stable, but i find a lot of recipes like passenger_apache2 directly pick from node[:languages][:ruby]. is it considered OK to override_attribute [:languages][:ruby] on the role/node to point to an rvm install?
[2012-06-21 21:19:34 -0400] javawidget: What'
[2012-06-21 21:20:15 -0400] javawidget: What's the best way to write elements from a databag into a templated file ?
[2012-06-21 21:27:21 -0400] mattray: javawidget: http://wiki.opscode.com/display/chef/Data+Bags#DataBags-AMoreCompleteExample
[2012-06-21 21:27:51 -0400] mattray: the data bag is just a hash, so pass the parts you want into the template as variables
[2012-06-21 21:35:22 -0400] dnszero: my google-fu has failed me How do I edit just one line of a config file with chef without having to manage the whole file?
[2012-06-21 21:36:06 -0400] gabebug: dnszero: i don't think there's a simple way of doing it. you could potentially make exec out to perl or see to do a search/replace on the file
[2012-06-21 21:36:27 -0400] chip-: either a conf.d pattern with includes, or you have chef manage the whole file, and just make that one line a variable in the template, or you shell out to (perl/sed) and do it that way
[2012-06-21 21:36:31 -0400] chip-: er
[2012-06-21 21:36:34 -0400] chip-: what he said
[2012-06-21 21:36:34 -0400] qhartman: dnszero, If you want to edit a single line, you could run sed and do an in-place edit
[2012-06-21 21:37:15 -0400] cheeseplus: +1 for the sed inplace edit
[2012-06-21 21:38:19 -0400] dnszero: hmm, ok just wanted to see if there was a chef method for that I was overlooking. Basically I just want to add "search blah.com" to /etc/resolv.conf but I don't care what else is in that file
[2012-06-21 21:39:28 -0400] chip-: probably shelling out and doing an ifcase that greps and runs the insert if not present, then
[2012-06-21 21:40:04 -0400] dnszero: ok, I'll give that a shot. Thanks guys!
[2012-06-21 21:40:19 -0400] gabebug: i wouldn't imagine the only_if/not_if grep being much more efficient than blindly running the see though
[2012-06-21 21:40:29 -0400] qhartman: dnszero,
[2012-06-21 21:40:51 -0400] qhartman: are your interfaces configured with dhcp?
[2012-06-21 21:41:07 -0400] qhartman: If you do that, your settings will get stomped everytime the lease renews
[2012-06-21 21:41:09 -0400] gabebug: here's a more refined question: does ohai overwrite the languages.ruby attributes even if i have them set as overwrite_attributes in my role file?
[2012-06-21 21:41:30 -0400] qhartman: you need to edit the dhclient.conf and have it add a dhcp config override
[2012-06-21 21:41:38 -0400] gabebug: or should i never try to overwrite with the languages attributes in general
[2012-06-21 21:41:42 -0400] qhartman: for it to survive lease renewals
[2012-06-21 21:42:13 -0400] dnszero: qhartman: good point I forgot about that (and a few servers will be that way)
[2012-06-21 21:42:25 -0400] qhartman: dnszero, I have some code for that kicking around, hangonasec
[2012-06-21 21:42:54 -0400] cassarani: silly question, but one I can't seem to find the answer to on the Opscode Wiki - how can I write a recipe that uses another cookbook's providers?
[2012-06-21 21:43:14 -0400] cassarani: in other words, I have a myapp_db recipe that needs to call the postgresql providers defined by the database cookbook
[2012-06-21 21:43:32 -0400] cassarani: do I have to somehow include the database cookbook in my recipe, or will it be there automatically?
[2012-06-21 21:44:49 -0400] qhartman: dnszero, http://pastebin.com/NVnFwcUa note that the prepend domain-name-servers settings get inserted in reverse order, so the primary has to go at the bottom ofthe list
[2012-06-21 21:45:57 -0400] qhartman: cassarani, If you include the cookbook weith the providers, they should just be available so long as you list that cookbook as a dependency in the one you are writing. (I think that's how it works anyway)
[2012-06-21 21:46:10 -0400] dnszero: qhartman: tyvm
[2012-06-21 21:46:28 -0400] cassarani: qhartman: oh I see, so I don't need to use anything like include_recipe (but for providers..) in my own recipe?
[2012-06-21 21:46:41 -0400] qhartman: cassarani, not as far as I unerstand it
[2012-06-21 21:46:58 -0400] qhartman: but this gets into an area I'm not super familiar with, so I could be wrong
[2012-06-21 21:47:11 -0400] cassarani: qhartman: ok thanks a lot
[2012-06-21 21:47:57 -0400] qhartman: Bottom line, if the recipe is associated with the node, any providers it brings are available
[2012-06-21 21:48:09 -0400] qhartman: look in the wiki for "anatomy of a chef run" to see how it all comes together
[2012-06-21 21:51:50 -0400] cassarani: yeah, that wiki page is golden
[2012-06-21 21:52:20 -0400] qhartman: yeah, getting pointed at that increased my understanding of chef a LOT
[2012-06-21 21:53:14 -0400] cassarani: it's all finally starting to click for me
[2012-06-21 21:53:19 -0400] cassarani: but boy was it a steep learning curve
[2012-06-21 21:53:31 -0400] doomviking: no doubt
[2012-06-21 21:53:38 -0400] cassarani: starting with Vagrant and Chef Solo didn't help, either - most cookbooks I found online were completely incompatible
[2012-06-21 21:53:41 -0400] doomviking: but then there
[2012-06-21 21:53:46 -0400] cassarani: one of the most frustrating times of my life that was
[2012-06-21 21:53:49 -0400] leifmadsen: ya I learned about compile time vs run time today from that page :)
[2012-06-21 21:53:52 -0400] doomviking: there's the "ah ha" moment
[2012-06-21 21:54:01 -0400] cassarani: doomviking: yeah for me it was when I wrote my first non-trivial recipe
[2012-06-21 21:54:02 -0400] leifmadsen: I now know why my chef_gem stuff runs no matter where I put it early in the process :)
[2012-06-21 21:54:51 -0400] doomviking: nice
[2012-06-21 21:55:33 -0400] leifmadsen: learning style lately is annoying because I now want to go back and fix everything i wrote a month ago :)
[2012-06-21 21:57:07 -0400] qhartman: leifmadsen, yeah,. I ahve that same problem. I joined this company right when we were tossed into a fire with a major chef re-work trying to add support for Centos to all our recipes (and their dependencies)
[2012-06-21 21:57:23 -0400] qhartman: Looking back on the code we wrote over those weeks now just makes me cringe
[2012-06-21 21:57:34 -0400] qhartman: Need to throw a flare in it and start over
[2012-06-21 21:57:57 -0400] leifmadsen: ah yes, I built stuff against ubuntu first for a provisioning server (to serve files for a telephony application) and now I'm building a recipe for centos for the webapp; it's more work on the centos side :)
[2012-06-21 21:58:25 -0400] leifmadsen: oh this is a new one....
[2012-06-21 21:58:38 -0400] leifmadsen: a stack overflow in regexp
[2012-06-21 21:59:34 -0400] cassarani: leifmadsen: you mean a stack exchange site about regexps?
[2012-06-21 21:59:44 -0400] leifmadsen: cassarani: no, RegexpError: Stack overflow in regexp matcher: /^(\S+) ([0-9]+) (\S+) (\S+) (\S+) \[(.*)\] ([i,a,r]) (\S+)$/
[2012-06-21 21:59:51 -0400] cassarani: haha
[2012-06-21 22:00:19 -0400] leifmadsen: I think it's a problem with the RPM that is being installed, but I can't be sure
[2012-06-21 22:03:41 -0400] garrettux: leifmadsen: I ran into that regexp stack overflow issue at one point
[2012-06-21 22:03:44 -0400] garrettux: http://tickets.opscode.com/browse/CHEF-2694
[2012-06-21 22:04:43 -0400] cassarani: can I specify more than one action when using a provider
[2012-06-21 22:04:52 -0400] cassarani: and if so, do I need to use an array?
[2012-06-21 22:04:58 -0400] cassarani: or can I just string arguments along?
[2012-06-21 22:04:59 -0400] leifmadsen: garrettux: interesting...
[2012-06-21 22:05:11 -0400] cassarani: i.e. "action :create, :grant" or "action [:create, :grant]"?
[2012-06-21 22:05:12 -0400] leifmadsen: garrettux: wish I understood why it was happening when trying to install this package ;)
[2012-06-21 22:06:21 -0400] garrettux: leifmadsen: when I ran into it the overflow was actually in the error report handler
[2012-06-21 22:06:45 -0400] garrettux: leifmadsen:  IIRC i used the chef_handler cookbook to monkey patch it to bypass the error report
[2012-06-21 22:07:13 -0400] leifmadsen: huh...
[2012-06-21 22:07:29 -0400] garrettux: require 'chef/handler'
[2012-06-21 22:07:29 -0400] garrettux: require 'chef/resource/directory'
[2012-06-21 22:07:29 -0400] garrettux: class Chef
[2012-06-21 22:07:31 -0400] garrettux:   class Handler
[2012-06-21 22:07:32 -0400] garrettux:     class ErrorReport < ::Chef::Handler
[2012-06-21 22:07:35 -0400] garrettux:       def report
[2012-06-21 22:07:37 -0400] garrettux:         #Chef::FileCache.store("failed-run-data.json", Chef::JSONCompat.to_json_pretty(data))
[2012-06-21 22:07:38 -0400] garrettux:         #Chef::Log.fatal("Saving node information to #{Chef::FileCache.load("failed-run-data.json", false)}")
[2012-06-21 22:07:40 -0400] garrettux:       puts "not printing error for stack overflow"
[2012-06-21 22:07:42 -0400] garrettux:       end
[2012-06-21 22:07:45 -0400] garrettux:     end
[2012-06-21 22:07:46 -0400] garrettux:   end
[2012-06-21 22:07:48 -0400] cassarani: garrettux: http://gist.github.com
[2012-06-21 22:07:48 -0400] garrettux: end
[2012-06-21 22:08:48 -0400] garrettux: lol.. thanks
[2012-06-21 22:08:48 -0400] garrettux: https://gist.github.com/2968872
[2012-06-21 22:09:43 -0400] leifmadsen: garrettux: and you use that where?
[2012-06-21 22:10:17 -0400] garrettux: I was using the chef_handler cookbook to distribute error handlers to my nodes, i put that in one of the handlers
[2012-06-21 22:10:33 -0400] leifmadsen: gotcha
[2012-06-21 22:11:16 -0400] garrettux: basically an ugly hack to bypass the code in gems/chef-10.12.0/lib/chef/handler/error_report.rb
[2012-06-21 22:11:21 -0400] leifmadsen: ya
[2012-06-21 22:18:51 -0400] mgalkiewicz: hi my server has new ip address
[2012-06-21 22:19:12 -0400] mgalkiewicz: however it is not updated in node[:ipaddress]
[2012-06-21 22:19:20 -0400] mgalkiewicz: how to force such update?
[2012-06-21 22:30:19 -0400] danryan: mgalkiewicz: has chef run on the server yet?
[2012-06-21 22:31:50 -0400] mgalkiewicz: danryan: what do you mean
[2012-06-21 22:32:22 -0400] danryan: mgalkiewicz: well, in what context are you trying to access the node[:ipaddress] attribute?
[2012-06-21 22:32:32 -0400] mgalkiewicz: from search
[2012-06-21 22:33:50 -0400] danryan: mgalkiewicz: ah indeed. Node attributes are saved to the chef-server at the end of a chef run (or if node.save is called, but that's another story). If your server has changed, you'll need to run chef-client on that server so that chef-server can be told of those changes.
[2012-06-21 22:34:57 -0400] mgalkiewicz: I have run chef-client on machine with chef-server which is basically the server with new ip address
[2012-06-21 22:34:59 -0400] thehar: ohai tad2much
[2012-06-21 22:35:09 -0400] tad2much: ohai thehar
[2012-06-21 22:35:42 -0400] ribo: running chef 10.12.0 when I run chef solo, it creates a TON of <defunct> chef-solo processes
[2012-06-21 22:39:49 -0400] ribo: ah might be because I was running it on a t1.micro
[2012-06-21 22:40:10 -0400] mgalkiewicz: danryan: any other ideas?
[2012-06-21 22:40:35 -0400] mgalkiewicz: danryan: hmm but chef-client did not finish successfully
[2012-06-21 22:47:51 -0400] qhartman: wamcvey, jtimberman : Fixed the other problem with the python recipe that was killing me.
[2012-06-21 22:47:56 -0400] mgalkiewicz: danryan: fixed thx for help
[2012-06-21 22:48:42 -0400] wamcvey: qhartman: is there a link to a patch you can share?
[2012-06-21 22:49:35 -0400] qhartman: wamcvey, that was going to be my next question, it's a tiny little change, what's the best way to get it out there?
[2012-06-21 22:50:40 -0400] wamcvey: github seems to be pretty popular... or comment on the problem ticket.
[2012-06-21 22:53:03 -0400] cassarani: hmm, I need to add a line to a user's .bashrc, but I want to leave the rest of the file alone
[2012-06-21 22:53:12 -0400] cassarani: in fact I want to leave it up to the distro to choose whatever goes into the bashrc
[2012-06-21 22:53:21 -0400] cassarani: how can I do this in an idempotent way?
[2012-06-21 22:53:43 -0400] hoover_damm: what are you trying to add?
[2012-06-21 22:53:48 -0400] cassarani: sourcing rbenv
[2012-06-21 22:53:56 -0400] hoover_damm: lol
[2012-06-21 22:54:02 -0400] hoover_damm: why isn't that in /etc/profile.d?
[2012-06-21 22:54:13 -0400] hoover_damm: sounds like your doing it wrong :)
[2012-06-21 22:54:21 -0400] cassarani: it is, but /etc/profile.d doesn't get executed when Capistrano logs in during a deploy
[2012-06-21 22:54:31 -0400] cassarani: so I can't run bundle install because.. there is no bundle
[2012-06-21 22:54:31 -0400] hoover_damm: nope, blame net-ssh
[2012-06-21 22:54:34 -0400] hoover_damm: don't use capistrano
[2012-06-21 22:54:36 -0400] hoover_damm: ;)
[2012-06-21 22:54:41 -0400] hoover_damm: fabric + pychef ftw
[2012-06-21 22:54:48 -0400] hoover_damm: but that's just my personal dig on cap
[2012-06-21 22:54:48 -0400] cassarani: right, that's not very helpful because I do use Capistrano
[2012-06-21 22:55:03 -0400] hoover_damm: if cap logged in right
[2012-06-21 22:55:06 -0400] hoover_damm: it would work
[2012-06-21 22:55:10 -0400] qhartman: wamcvey, Just for expediency, in case you are hitting the same problem I am (python::default breaks when trying to install virtualenv with the python_pip resource, or any new package for that matter) , here's a paste of the patch file:
[2012-06-21 22:55:12 -0400] qhartman: http://pastebin.com/GtdWAecu
[2012-06-21 22:55:21 -0400] cassarani: that's beside the point, my question is about adding a line to a file in an idempotent way
[2012-06-21 22:55:32 -0400] hoover_damm: basically i'd suggest profile.d and then make cap source it
[2012-06-21 22:55:45 -0400] hoover_damm: you can totally add a line in .bashrc or whatever
[2012-06-21 22:56:10 -0400] hoover_damm: but there is a certain wrong to adding source rvmrc or source rbenv to bashrc
[2012-06-21 22:56:12 -0400] hoover_damm: doesn't get loaded always
[2012-06-21 22:56:27 -0400] hoover_damm: usually a weird screen braindead thing
[2012-06-21 22:56:28 -0400] hoover_damm: but still
[2012-06-21 22:56:39 -0400] cassarani: well I'm not happy with the solution either
[2012-06-21 22:56:48 -0400] cassarani: I guess the best way to do it is to get Capistrano to do things properly
[2012-06-21 23:05:52 -0400] hoover_damm: I'm just pointing out the fallacy your dealing with
[2012-06-21 23:05:56 -0400] hoover_damm: not trying to dissuade you really
[2012-06-21 23:08:39 -0400] leifmadsen: hmm, is there anything special I'm supposed to do for the 'creates' option in an execute resource? I used something like:  creates "/var/foo/.generated", and the execute command ran, but I don't see the .generated file in the path specified
[2012-06-21 23:08:55 -0400] coderanger: leifmadsen: You have to create that file
[2012-06-21 23:08:59 -0400] qhartman: creates doesn't actually create it
[2012-06-21 23:09:08 -0400] qhartman: it just makes the block not run if hte file is there
[2012-06-21 23:09:13 -0400] coderanger: #creates is just shorthand for #not_if { ::File.exists?(path) }
[2012-06-21 23:09:17 -0400] leifmadsen: then the doc is wrong :)
[2012-06-21 23:09:20 -0400] leifmadsen: creates A file this command creates - if the file exists, the command will not be run.
[2012-06-21 23:09:34 -0400] coderanger: leifmadsen"A file this command creates"
[2012-06-21 23:09:38 -0400] qhartman: the doc is right, it's just a bit ambiguous
[2012-06-21 23:09:40 -0400] coderanger: Your command isn't creating the file
[2012-06-21 23:09:43 -0400] hoover_damm: the language is bad
[2012-06-21 23:09:43 -0400] leifmadsen: o.O
[2012-06-21 23:09:46 -0400] hoover_damm: the wording is right
[2012-06-21 23:10:01 -0400] leifmadsen: ummm.... ok
[2012-06-21 23:10:28 -0400] leifmadsen: the way that is worded, it creates a file, and if it has created it already on next iteration, it won't execute again
[2012-06-21 23:10:46 -0400] leifmadsen: I'm going to update it
[2012-06-21 23:10:48 -0400] coderanger: leifmadsen: The "command" being referenced is the command you give it
[2012-06-21 23:10:55 -0400] hoover_damm: "A file is created by this command. - if this file exists, the command will not eb run again"
[2012-06-21 23:11:02 -0400] hoover_damm: s/eb/be
[2012-06-21 23:11:08 -0400] hoover_damm: pure wording
[2012-06-21 23:11:10 -0400] leifmadsen: well it's the execute command, it could execute anything, not just creating a file
[2012-06-21 23:11:20 -0400] coderanger: execute is a resource, not a command :)
[2012-06-21 23:11:33 -0400] leifmadsen: pedantic
[2012-06-21 23:12:15 -0400] leifmadsen: if it doesn't actually create anything, the attribute name is also poorly worded
[2012-06-21 23:13:22 -0400] coderanger: It is a historical artifact, as I said it is often clearer to use not_if
[2012-06-21 23:13:28 -0400] paulmooring: leifmadsen: I changed it to "If the file exists the command will not be run, the command should create this file."
[2012-06-21 23:13:35 -0400] paulmooring: more clear?
[2012-06-21 23:13:50 -0400] coderanger: paulmooring: Why don't you have op on here? :)
[2012-06-21 23:13:52 -0400] leifmadsen: paulmooring: yes thank you
[2012-06-21 23:14:04 -0400] leifmadsen: paulmooring: that's what I was similarly going to change it to
[2012-06-21 23:14:05 -0400] paulmooring: coderanger: no one gave it to me?
[2012-06-21 23:14:13 -0400] coderanger: paulmooring: Poke holoway
[2012-06-21 23:20:37 -0400] paulmooring: leifmadsen: Thanks for the example in the wiki, people who update documentation are the best kind of people :)
[2012-06-21 23:20:55 -0400] leifmadsen: paulmooring: I've written my fair share of documentation :)
[2012-06-21 23:21:18 -0400] leifmadsen: asteriskdocs.org
[2012-06-21 23:22:08 -0400] lflux: leifmadsen: shouldn't there be an && instead of a ;
[2012-06-21 23:22:09 -0400] cassarani: anyone have any recommendations for the best readily available Redis cookbook?
[2012-06-21 23:22:13 -0400] cassarani: there's like 5 out there
[2012-06-21 23:22:14 -0400] lflux: in the command example in your change
[2012-06-21 23:22:17 -0400] lflux: :)
[2012-06-21 23:22:23 -0400] leifmadsen: lflux: I considered that actually -- I think both are valid though
[2012-06-21 23:22:49 -0400] leifmadsen: && is probably better actually so that the file isn't generated if the command prior fails
[2012-06-21 23:22:53 -0400] lflux: exactly
[2012-06-21 23:22:56 -0400] leifmadsen: I think that's the main diff
[2012-06-21 23:23:01 -0400] dodizzle: cassarani for something simple like redis its sometimes easier to just write your own cookbook
[2012-06-21 23:23:20 -0400] whitley: Is there a Chef idiom for an optional recipe?  I'd like to create one for local (non-VCS) customizations in a Vagrant setup.
[2012-06-21 23:23:31 -0400] cassarani: dodizzle: probably explains why I can find so many Redis cookbooks :)
[2012-06-21 23:23:40 -0400] lflux: leifmadsen: yeah, I always use && when constructing my oneliners, so you don't hose something if the first mkdir fails.
[2012-06-21 23:23:42 -0400] leifmadsen: lflux: updated, thanks, you're right
[2012-06-21 23:23:47 -0400] lflux: np
[2012-06-21 23:23:48 -0400] jesserobbins: @whitley: condiment?
[2012-06-21 23:24:32 -0400] lflux: (I supposed I could have edited the wiki myself if I had bothered to log in(
[2012-06-21 23:24:52 -0400] leifmadsen: heh
[2012-06-21 23:24:55 -0400] leifmadsen: I was right there, so no biggie
[2012-06-21 23:25:04 -0400] leifmadsen: the comment included your name for props :D
[2012-06-21 23:25:12 -0400] lflux: woot :)
[2012-06-21 23:26:49 -0400] whitley: @jesserobbins: is that a thing? link? not seeing in opscode/chef, nor is search on "opscode chef condiment" useful..
[2012-06-21 23:27:48 -0400] jesserobbins: @whitley: sorry, should have put a smiley-face next to that.  I was suggesting a name for the feature you are describing.
[2012-06-21 23:28:31 -0400] leifmadsen: there is the "link" resource :)
[2012-06-21 23:28:35 -0400] whitley: right.  cute.  also has highest Google-noise for a chef search I've tried yet. impressive!  ;-)
[2012-06-21 23:30:36 -0400] whitley: I'll hunt around for whatever Chef uses to resolve cookbook/recipe locations.
[2012-06-21 23:32:24 -0400] coderanger: whitley: Optional in what sense
[2012-06-21 23:33:11 -0400] whitley: ala -- include_recipe_if_exist "foo::local_customizations"
[2012-06-21 23:34:05 -0400] chip-: Anybody have a good example repo with for chefspec usage?
[2012-06-21 23:34:21 -0400] coderanger: whitley: No, there is no good way to do that
[2012-06-21 23:34:36 -0400] coderanger: whitley: You can catch the error though
[2012-06-21 23:35:15 -0400] whitley: right, I was considering after-the-fact via rescue.  will give that a go, thanks.
[2012-06-21 23:48:18 -0400] jeremyolliver: Does anyone here know much about encrypted_data_bags ?
[2012-06-21 23:48:46 -0400] leifmadsen: the typical way to form a question is to state what you're having a problem with and back it up with data, or what you're trying to accomplish
[2012-06-21 23:48:56 -0400] jeremyolliver: I'm trying out as per the wiki, but when I open the bag item again, there's nothing but an id in the json, the other password attributes I'm setting are missing
[2012-06-21 23:49:34 -0400] jeremyolliver: so specifically, Creating or saving encrypted databags don't appear to be saving the attributes I'm setting, does anyone know why that might be?
[2012-06-21 23:50:36 -0400] jeremyolliver: I am specifying --secret-file option with knife when showing and editing the item
[2012-06-21 23:51:43 -0400] jeremyolliver: I'm doing `knife data bag edit --secret-file=.chef/encrypted_data_bag_secret passwords postgresql`
[2012-06-21 23:51:59 -0400] jeremyolliver: setting a password, saving and exiting the file then: `knife data bag show --secret-file=.chef/encrypted_data_bag_secret passwords postgresql`
[2012-06-21 23:52:12 -0400] jeremyolliver: but there's nothing but id: postgresql shown
[2012-06-21 23:54:57 -0400] jessicab: jeremyolliver - perhaps adding -VV to the commands to get debug output might give you more info on why its failing?
[2012-06-21 23:56:27 -0400] jeremyolliver: I'll give it a try, I'm thinking perhaps I'm editing it incorrectly
[2012-06-21 23:59:42 -0400] jeremyolliver: jessicab: -VV didn't show any errors unfortunately, but I didn't know that option, that's useful

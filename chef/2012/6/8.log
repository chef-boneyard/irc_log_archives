[2012-06-08 00:13:11 -0400] JasonBox: ah
[2012-06-08 00:13:23 -0400] JasonBox: role with a role in its run_list doesn't inherit those values?
[2012-06-08 00:16:49 -0400] JasonBox: I am setting a default_attribute in role A and have role A in role B's run_list, no joy?
[2012-06-08 00:22:24 -0400] JasonBox: Apparently fixed, http://tickets.opscode.com/browse/CHEF-1508
[2012-06-08 00:22:35 -0400] JasonBox: But I have 0.10.6
[2012-06-08 00:38:21 -0400] JasonBox: wow, so roles don't work in any way the way I thought they did
[2012-06-08 00:40:50 -0400] josephholsten: JasonBox: I'd love to know what you originally expected
[2012-06-08 00:44:54 -0400] JasonBox: To be able to override attributes specified in included roles higher up the chain?
[2012-06-08 00:45:18 -0400] JasonBox: http://pastie.org/4047508
[2012-06-08 00:45:25 -0400] JasonBox: That's what I am seeing, that's how it works?
[2012-06-08 00:45:33 -0400] JasonBox: Never investigated nesting roles before
[2012-06-08 00:49:25 -0400] knuckolls: JasonBox: this is anecdotal, but my impression is that the override attributes are applied in the order that the roles are evaluated when the run_list is compiled down to the set of recipes that need to get run
[2012-06-08 00:50:25 -0400] JasonBox: At least in my example, the default_attribute for the leaf role simply disappears
[2012-06-08 00:50:40 -0400] JasonBox: I find that somewhat mystifying
[2012-06-08 00:50:42 -0400] knuckolls: yeah it took me a few reads of the pastie to figure out what was going on, but i got it
[2012-06-08 00:51:02 -0400] JasonBox: So I must misunderstanding how it works entirely
[2012-06-08 00:51:02 -0400] knuckolls: if you change it to override instead of default, does it work?
[2012-06-08 00:51:09 -0400] knuckolls: i always use overrides in roles
[2012-06-08 00:51:14 -0400] JasonBox: Good question, I tried that but forgot, let me see
[2012-06-08 00:51:27 -0400] erikh: w 12
[2012-06-08 00:51:59 -0400] JasonBox: I have a suspicion not
[2012-06-08 00:52:37 -0400] JasonBox: I can certainly use leaf roles simply to collect recipes to run, though
[2012-06-08 00:52:59 -0400] JasonBox: Yeah, override or default makes no matter
[2012-06-08 00:53:02 -0400] knuckolls: h, :/
[2012-06-08 00:53:06 -0400] knuckolls: hm i mean
[2012-06-08 00:53:08 -0400] JasonBox: leaf role attributes are simply consumed into a void
[2012-06-08 00:53:19 -0400] knuckolls: i don't feel like that's how it works with my roles at work
[2012-06-08 00:53:29 -0400] knuckolls: but i don't have it in front of me right now
[2012-06-08 00:53:40 -0400] JasonBox: This is 0.10.6, so maybe it's me
[2012-06-08 00:53:48 -0400] knuckolls: oh. might have been a bug that's fixed
[2012-06-08 00:53:49 -0400] JasonBox: Was thinking about trying out omnibus today anyway
[2012-06-08 00:53:56 -0400] knuckolls: you can just try a new node to see if it's different
[2012-06-08 00:54:14 -0400] knuckolls: if not, i'd file a jira if it still exists in the newest version
[2012-06-08 00:54:21 -0400] knuckolls: because i don't think that's expected behaviour
[2012-06-08 01:08:28 -0400] JasonBox: hrm no joy with 0.10.10 & ruby 1.9.1
[2012-06-08 02:15:48 -0400] tom: hello
[2012-06-08 02:16:26 -0400] jflowers: hi all
[2012-06-08 02:16:59 -0400] jflowers: the first time I run chef solo it exits without running and recipes/cookbooks
[2012-06-08 02:17:28 -0400] jflowers: I did not see this with the previous version 0.10.8
[2012-06-08 02:17:40 -0400] jflowers: this is new with version 0.10.10
[2012-06-08 02:17:47 -0400] flaccid_: you need to have setup solo.rb and node.json per the doc
[2012-06-08 02:17:49 -0400] jflowers: anyone else seen this?
[2012-06-08 02:18:04 -0400] jflowers: per the doc
[2012-06-08 02:18:11 -0400] jflowers: as far as I know I have
[2012-06-08 02:18:20 -0400] jflowers: the second time I run it work great
[2012-06-08 02:18:30 -0400] jflowers: the second time I run it works great
[2012-06-08 02:19:03 -0400] jflowers: maybe I don't know which doc
[2012-06-08 02:20:53 -0400] flaccid_: its the chef solo doc on the wiki,not sure what you are doing wrong if you have configured those files correctly
[2012-06-08 02:20:55 -0400] jflowers: I am going off this doc: http://wiki.opscode.com/display/chef/Chef+Solo
[2012-06-08 02:21:40 -0400] flaccid_: i use that one too and works great for 0.10.10
[2012-06-08 02:21:43 -0400] flaccid_: iirc
[2012-06-08 02:23:55 -0400] jflowers: it is a time consuming issue to try and figure out
[2012-06-08 02:24:09 -0400] jflowers: I have to reset my test vm after each try
[2012-06-08 02:24:26 -0400] jflowers: cause it works fine on the second run
[2012-06-08 02:26:09 -0400] tom: hello
[2012-06-08 02:26:29 -0400] tom: trying to figure out how to install some packages using apt cookbook
[2012-06-08 02:26:45 -0400] tom: is this even the right channel for these kind of questions?
[2012-06-08 02:27:09 -0400] tom: I'm fairly new to Chef and the whole web development business
[2012-06-08 02:28:12 -0400] knuckolls: hey tom, you'll install apt packages with the package resource
[2012-06-08 02:28:21 -0400] knuckolls: here's a list of all the available resources for your recipes
[2012-06-08 02:28:22 -0400] knuckolls: http://wiki.opscode.com/display/chef/Resources
[2012-06-08 02:28:49 -0400] tom: so from my understanding
[2012-06-08 02:28:59 -0400] tom: when i include the apt recipe
[2012-06-08 02:29:17 -0400] tom: that's equivalent to doing sudo apt-get update
[2012-06-08 02:29:39 -0400] knuckolls: i believe so, lemme read the recipe
[2012-06-08 02:29:53 -0400] knuckolls: yeah that's what it does
[2012-06-08 02:30:02 -0400] tom: i'm trying to figure out if i have some step such as:
[2012-06-08 02:30:11 -0400] knuckolls: the apt cookbook also provides the apt_repository resource, so you can add custom apt repos if you so desire
[2012-06-08 02:30:18 -0400] tom: apt-get install g++
[2012-06-08 02:30:25 -0400] tom: that's what i'm trying to figure out
[2012-06-08 02:30:38 -0400] knuckolls: yeah i'd read through that entire page of resources i linked above
[2012-06-08 02:30:38 -0400] tom: exactly where to place those custom apt_repos
[2012-06-08 02:30:39 -0400] knuckolls: the '
[2012-06-08 02:30:46 -0400] knuckolls: the 'package' resource is what you're looking for
[2012-06-08 02:30:53 -0400] knuckolls: and it doesn't require the apt cookbook to be installed
[2012-06-08 02:31:33 -0400] knuckolls: https://github.com/opscode-cookbooks/rabbitmq/blob/master/recipes/default.rb
[2012-06-08 02:32:02 -0400] knuckolls: you can see an example in that recipe of how it sets up a custom repo for the rabbitmq debs, then uses 'package "rabbitmq-server"'
[2012-06-08 02:32:18 -0400] knuckolls: which on ubuntu and debian effectively runs the command apt-get install rabbitmq-server
[2012-06-08 02:32:29 -0400] tom: ah I see
[2012-06-08 02:32:35 -0400] tom: ok, i'll read through it
[2012-06-08 02:32:37 -0400] tom: thanks
[2012-06-08 02:32:45 -0400] knuckolls: np, good luck :)
[2012-06-08 02:51:52 -0400] thedeeno: How can I manage the PATH chef-client runs with?
[2012-06-08 02:56:43 -0400] yfeldblum: thedeeno, by exporting your favorite PATH and then running chef-client
[2012-06-08 03:02:14 -0400] thedeeno: ah, I thought there may be an init file I could edit or something
[2012-06-08 03:14:41 -0400] yfeldblum: thedeeno, there is, depending on how you installed chef-client ...
[2012-06-08 03:22:41 -0400] thedeeno: knife bootstrap?
[2012-06-08 03:22:42 -0400] bawt_: knife bootstrap is http://wiki.opscode.com/display/chef/Knife+Bootstrap
[2012-06-08 03:30:47 -0400] jeremyolliver: hey does anyone know how I can get rid of a set 'normal' attribute that a recipe has manually set?
[2012-06-08 03:31:25 -0400] jeremyolliver: postgresql recipe has set[:postgresql][:dir] = "/etc/postgresql/#{node[:postgresql][:version]}/main"
[2012-06-08 03:32:03 -0400] jeremyolliver: and if I override the version attribute in a role, it doesn't get changed in the dir attribute
[2012-06-08 03:32:54 -0400] jeremyolliver: I can't even edit to remove the attribute D:
[2012-06-08 03:33:08 -0400] jeremyolliver: it's like the ghost of christmas past, come to haunt me
[2012-06-08 03:34:17 -0400] thedeeno: jeremyolliver: I'm kinda new to chef, but as far as I understand, if the recipe has manually overridden an attribute that's the highest possible priority
[2012-06-08 03:34:49 -0400] flaccid_: [:postgresql][:dir] isn't a node attribute though?
[2012-06-08 03:35:12 -0400] yfeldblum: thedeeno, i mean, how the bootstrap installed chef-client ... platform package, gem, chef-full, etc
[2012-06-08 03:35:34 -0400] jeremyolliver: http://wiki.opscode.com/display/chef/Attributes
[2012-06-08 03:35:35 -0400] jeremyolliver: @flaccid the set command manually sets an attribute on a node
[2012-06-08 03:35:42 -0400] jeremyolliver: number 6 on that priority list I think
[2012-06-08 03:36:07 -0400] yfeldblum: jeremyolliver, `knife node edit`, although the next chef-client run on that node will just re-set it
[2012-06-08 03:36:14 -0400] jeremyolliver: If I do knife edit node <nodename>
[2012-06-08 03:36:23 -0400] jeremyolliver: the attribute shows under "normal_attributes"
[2012-06-08 03:36:34 -0400] thedeeno: I may be confused with what you're saying. Are you saying that you see `['my_attribute'] = value` in the upstream cookbook?
[2012-06-08 03:36:37 -0400] yfeldblum: jeremyolliver, you can add another recipe to the run-list which unsets that attribute from the normal-level attributes
[2012-06-08 03:36:38 -0400] jeremyolliver: I save it, and knife tells me "Node not updated, skipping node save"
[2012-06-08 03:36:44 -0400] jeremyolliver: unset?
[2012-06-08 03:36:47 -0400] jeremyolliver: I think I'll have to
[2012-06-08 03:37:13 -0400] jeremyolliver: I'm already forking the postgresql cookbook, it's just annoying to have to manually call the unset command
[2012-06-08 03:37:20 -0400] jeremyolliver: rather than being able to edit it out
[2012-06-08 03:37:26 -0400] yfeldblum: jeremyolliver, in a recipe which occurs later in the run-list than the postgresql recipe, `node.normal["postgresql"].delete("dir")` or something like that
[2012-06-08 03:37:42 -0400] jeremyolliver: yeah, will do
[2012-06-08 03:38:17 -0400] flaccid_: ah ok thanks i should read that again then
[2012-06-08 03:38:24 -0400] yfeldblum: jeremyolliver, also, please open a ticket to encourage the authors of the cookbook to use the default-level attributes instead of the normal-level attributes in an attributes file
[2012-06-08 03:38:30 -0400] jeremyolliver: from what I've seen so far, it seems like staying away from normal attributes and only ever using default or override attributes is the way to go
[2012-06-08 03:38:45 -0400] jeremyolliver: ha, sure, it's an official opscode cookbook though :/
[2012-06-08 03:38:48 -0400] yfeldblum: jeremyolliver, are you trying to use a different value for that attribute or you just want it gone?
[2012-06-08 03:38:55 -0400] thedeeno: yfeldblum: I think I just have some gaps. I'm not a system administrator (though learning as fast as I can). I'm trying to build ruby from source and then use it in my recipe. Kinda confused about how this would work. Is chef expecting my distro's version of ruby to be the only one?
[2012-06-08 03:39:06 -0400] yfeldblum: jeremyolliver, tickets.opscode.com
[2012-06-08 03:39:24 -0400] jeremyolliver: yfeldblum: I ran chef once. It installed postgres 8.4 Oops, so I've been re-running now that I've set the version to postgres 9.1
[2012-06-08 03:39:35 -0400] jeremyolliver: but the dir attribute remains unchanged
[2012-06-08 03:39:56 -0400] jeremyolliver: Hmm, I wonder if I need to change the level I'm setting the attribute
[2012-06-08 03:40:04 -0400] yfeldblum: jeremyolliver, try not to
[2012-06-08 03:40:17 -0400] jeremyolliver: first the cookbook sets a default postgres version
[2012-06-08 03:40:20 -0400] yfeldblum: jeremyolliver, unsetting it via `knife node edit` *should* work
[2012-06-08 03:40:26 -0400] jeremyolliver: but my role sets an override version
[2012-06-08 03:40:58 -0400] jeremyolliver: the 'normal' attributes live in between, so perhaps I need to set the version via a default, so it's changed before the normal level dir attribute is set
[2012-06-08 03:41:12 -0400] yfeldblum: thedeeno, chef is a normal ruby gem, and assumes nothing at all about the ruby (except e.g. for a minimum version of ruby)
[2012-06-08 03:42:02 -0400] jeremyolliver: yfeldblum: Yeah, that was my assumption that knife edit should work. I first edited via the web interface (self hosted chef server) and it said "saved" but nothing changed
[2012-06-08 03:42:21 -0400] yfeldblum: jeremyolliver, there are four concurrent and independent attributes trees; at any time, you can ask: "what is the merged attribute XYZ", but you can aso ask "what is the default-level attribute XYZ", "what is the normal-level attribute XYZ", etc
[2012-06-08 03:43:10 -0400] yfeldblum: jeremyolliver, when you ask for the merged attribute, it merges the four trees on the fly and computes the merged attribute that you wanted
[2012-06-08 03:43:45 -0400] yfeldblum: jeremyolliver, when you set an attribute, it's always on one of the four levels; you can't set a merged attribute
[2012-06-08 03:44:25 -0400] jeremyolliver: yfeldblum: so do you think setting the version as a default will help?
[2012-06-08 03:45:01 -0400] yfeldblum: jeremyolliver, it really ought to be set as a default
[2012-06-08 03:45:21 -0400] yfeldblum: jeremyolliver, but sometimes you need to hack it
[2012-06-08 03:46:07 -0400] jeremyolliver: yfeldblum: yeah, that was my line of thought as well. Thanks for the help, I'll only set it via a default through the fork of the cookbook I'm already making
[2012-06-08 03:46:44 -0400] yfeldblum: jeremyolliver, i encourage you liberally to employ: `Chef::Log.info("\n#{JSON.pretty_generate(node.to_hash)}")`
[2012-06-08 03:47:23 -0400] yfeldblum: jeremyolliver, or just take a piece of the node data: `Chef::Log.info("\n#{JSON.pretty_generate(node["postgresql"].to_hash)}")`
[2012-06-08 03:47:34 -0400] jeremyolliver: yfeldblum: okay thanks. This phantom dir attribute is definitely in the "normal_attributes" section when I edit the node via knife
[2012-06-08 03:47:56 -0400] jeremyolliver: yfeldblum: so that log command will show the merged attributes?
[2012-06-08 03:48:10 -0400] jeremyolliver: e.g. the four levels compiled to the actual state?
[2012-06-08 03:48:48 -0400] yfeldblum: jeremyolliver, `node.to_hash` gives a simple ruby Hash with the merged attributes, and `node["postgresql"].to_hash` gives a simple ruby Hash with the merged attributes from the "postgresql" subtree
[2012-06-08 03:49:10 -0400] yfeldblum: and the rest of it is JSON pretty-printing and printing the result to the log
[2012-06-08 03:49:42 -0400] jeremyolliver: yup cool, just checking if it was the merged attributes, thanks :)
[2012-06-08 03:53:09 -0400] jeremyolliver: node.normal["postgresql"].delete("dir") did the trick, thanks again, gotta go
[2012-06-08 04:02:29 -0400] thedeeno: yfeldblum: i'm a little confused. when I run `knife ssh <mynode> 'which chef-client' I get /usr/bin/chef-client. However when I run 'which ruby' I get nothing, cause according to root there is no ruby
[2012-06-08 04:02:34 -0400] thedeeno: how is chef-client working?
[2012-06-08 04:03:35 -0400] thedeeno: sodu which chef-client/ruby*
[2012-06-08 04:03:38 -0400] yfeldblum: thedeeno, why don't you `cat /usr/bin/chef-client` and find out?
[2012-06-08 04:04:01 -0400] hoover_damm: head /usr/bin/chef-client
[2012-06-08 04:04:02 -0400] thedeeno: cause that would be too easy? :) didn't know it was a script
[2012-06-08 04:04:06 -0400] hoover_damm: review the #! shebang
[2012-06-08 04:06:20 -0400] thedeeno: ok, so opscode has it's own local ruby version (this is what I want to do too :))
[2012-06-08 04:06:49 -0400] yfeldblum: thedeeno, why?
[2012-06-08 04:07:09 -0400] thedeeno: need ruby 1.9.3 on ubuntu 11.10
[2012-06-08 04:07:21 -0400] thedeeno: and curiosity
[2012-06-08 04:07:39 -0400] thedeeno: easier way?
[2012-06-08 04:10:27 -0400] hoover_damm: why do you need 1.9.3 on 11.10?
[2012-06-08 04:10:51 -0400] yfeldblum: thedeeno, what do you need 1.9.3 for?
[2012-06-08 04:11:09 -0400] hoover_damm: so does brightbox or whomever those dudes are
[2012-06-08 04:11:47 -0400] thedeeno: I saw brightbox, as for why no reason than it being the latest and I feel I should know how to get it running
[2012-06-08 04:11:57 -0400] thedeeno: other than*
[2012-06-08 04:12:23 -0400] thedeeno: Maybe it's not worth the curve though. Side, as I'm reading the source, gem_package resource, and now omnibus I think I just don't understand the 'sane path' stuff.
[2012-06-08 04:13:18 -0400] hoover_damm: lol and you use rvm right?
[2012-06-08 04:13:22 -0400] hoover_damm: sane path is the same sane path as rvm
[2012-06-08 04:13:34 -0400] thedeeno: hoover_damm: well I was, until we spoke last night
[2012-06-08 04:13:59 -0400] thedeeno: I'm trying to understand how this all fits together without it now
[2012-06-08 04:14:01 -0400] hoover_damm: if your goal is to have it work without the least amount of struggle
[2012-06-08 04:14:05 -0400] hoover_damm: system ruby is going to be cleanest
[2012-06-08 04:14:25 -0400] thedeeno: just apt-get install ruby?
[2012-06-08 04:14:29 -0400] hoover_damm: I love using omnibus
[2012-06-08 04:14:44 -0400] thedeeno: what is it exactly?
[2012-06-08 04:14:46 -0400] hoover_damm: but if your seeking the most straight forward  solution... using my ppa or brightbox's ppa
[2012-06-08 04:14:50 -0400] hoover_damm: and apt-get install ruby-1.9.1-full
[2012-06-08 04:15:18 -0400] hoover_damm: https://launchpad.net/~brightbox/+archive/ppa
[2012-06-08 04:15:52 -0400] hoover_damm: you'd basically want your bootstrap to install ruby 1.9.1
[2012-06-08 04:15:54 -0400] hoover_damm: and then install chef
[2012-06-08 04:15:57 -0400] thedeeno: well that sounds too easy :). Though I'm willing to struggle a bit if it helps me understand this better
[2012-06-08 04:16:00 -0400] hoover_damm: lemme save you some time
[2012-06-08 04:16:44 -0400] thedeeno: ty. I was under the impression that knife bootstrap installed ruby. Now I'm seeing it was this embedded ruby
[2012-06-08 04:16:52 -0400] thedeeno: which makes more sense since I couldn't find ruby on the node
[2012-06-08 04:16:56 -0400] hoover_damm: thedeeno, https://gist.github.com/8e46e6aa01c6d05a451b
[2012-06-08 04:17:15 -0400] hoover_damm: thedeeno, if you with to use brightbox's ppa please change out line 7
[2012-06-08 04:17:22 -0400] hoover_damm: the rest should be the same
[2012-06-08 04:18:01 -0400] hoover_damm: drop that in .chef/bootstraps and then knife ec2 server create -d ubuntu11.10-ruby193
[2012-06-08 04:18:26 -0400] hoover_damm: or --distro if you prefer
[2012-06-08 04:18:46 -0400] thedeeno: doesn't line 9 say ruby1.9.1?
[2012-06-08 04:18:48 -0400] hoover_damm: fyi mine is 1.9.3p193 and theirs is likely 194, both should have libyaml
[2012-06-08 04:19:04 -0400] hoover_damm: yes, unfortunately Debian has opted to keep the version the same
[2012-06-08 04:19:08 -0400] hoover_damm: 1.9.2 is 1.9.1
[2012-06-08 04:19:11 -0400] hoover_damm: and 1.9.3 is also 1.9.1
[2012-06-08 04:19:36 -0400] hoover_damm: I as well as brightbox were just the packagers... you can shoot Debian
[2012-06-08 04:19:37 -0400] thedeeno: yikes...
[2012-06-08 04:19:45 -0400] hoover_damm: http://packages.qa.debian.org/r/ruby1.9.1.html
[2012-06-08 04:19:58 -0400] hoover_damm: kinda freaky I agree
[2012-06-08 04:20:23 -0400] thedeeno: well, this will def save me some time. Thanks a bunch for this! I'm still left with some burning questions
[2012-06-08 04:20:27 -0400] thedeeno: tho
[2012-06-08 04:20:35 -0400] hoover_damm: ask em quickly?
[2012-06-08 04:21:03 -0400] thedeeno: for instance, if I did build ruby from source, and I wanted to my ruby commands to leverage during a chef run how would I modify the path to use it?
[2012-06-08 04:21:16 -0400] thedeeno: so say it exists in /mylocation/ruby
[2012-06-08 04:21:35 -0400] thedeeno: how do I make it accessible with `sudo chef-client`
[2012-06-08 04:21:54 -0400] thedeeno: (not sure if that's a small or big question)
[2012-06-08 04:22:39 -0400] hoover_damm: thedeeno, you make that available by adding it to the path
[2012-06-08 04:22:49 -0400] hoover_damm: thedeeno, say your bootstrap builds ruby, and then installs it.
[2012-06-08 04:23:17 -0400] hoover_damm: thedeeno, you'd have a line line around 7 inserted saying export PATH=/mylocation/ruby:$PATH
[2012-06-08 04:23:35 -0400] hoover_damm: thedeeno, you'd likely want to toss that also in /etc/profile.d in a new file so all new logins would get that same path change
[2012-06-08 04:24:32 -0400] thedeeno: is it stupid to modify the path in recipes?
[2012-06-08 04:25:03 -0400] hoover_damm: bootstrap no
[2012-06-08 04:25:20 -0400] hoover_damm: doing this ruby thing? kinda sketch
[2012-06-08 04:25:24 -0400] hoover_damm: otherwise no not a big deal
[2012-06-08 04:25:33 -0400] thedeeno: what about regular cookbooks?
[2012-06-08 04:25:43 -0400] thedeeno: say a build something in a cookbook in an odd location
[2012-06-08 04:26:00 -0400] yfeldblum: thedeeno, the "embedded ruby" shipped with the chef-full installer follows the principle of "separation of chef and system"
[2012-06-08 04:26:19 -0400] thedeeno: but want it to be available without prefix when using the execute resource
[2012-06-08 04:27:13 -0400] yfeldblum: w00tz got librarian passing again on travis
[2012-06-08 04:28:12 -0400] thedeeno: thanks for your work on that gem yfeldblum
[2012-06-08 04:28:35 -0400] thedeeno: I <3 it so far
[2012-06-08 04:28:57 -0400] yfeldblum: it's a public repo?! hmm i should change that
[2012-06-08 04:29:59 -0400] yfeldblum: haha nah
[2012-06-08 04:30:09 -0400] thedeeno: to late, got it
[2012-06-08 04:32:30 -0400] thedeeno: what do you think yfeldblum, dumb to adjust the path during a chef-run?
[2012-06-08 04:32:44 -0400] yfeldblum: thedeeno, very :P
[2012-06-08 04:33:11 -0400] yfeldblum: thedeeno, perfectly fine to set an execute resource's path env var if you like
[2012-06-08 04:34:41 -0400] thedeeno: ok, I'll put the fire stick down
[2012-06-08 04:35:10 -0400] thedeeno: hmm, I think I understand how all this fits together much better now
[2012-06-08 04:37:01 -0400] thedeeno: there's no ruby 'python cookbook' equivalent?
[2012-06-08 04:37:57 -0400] thedeeno: I  like hoover_damm's bootstrap script, but I only need 1.9.3 for this particular app. I could live with system ruby in other places.
[2012-06-08 04:38:32 -0400] erikh: w/ 5
[2012-06-08 05:56:53 -0400] ssd7: Ohai Chefs
[2012-06-08 06:38:46 -0400] nmistry: is there a way to excecute something on the management workstation while doing the knife bootstrap?  Make it part of the recipe
[2012-06-08 06:39:30 -0400] Mithrandir: execute "ssh ", but no, not really.
[2012-06-08 06:39:59 -0400] nmistry: so i guess i need to write a wrapper and just query the node after its done bootstrapping for the info i need?
[2012-06-08 06:40:35 -0400] nmistry: hmm
[2012-06-08 06:41:08 -0400] nmistry: is there a way to have the chef server respond to "events"..  like.. when a node or client is added, do this..
[2012-06-08 06:43:11 -0400] nmistry: basically im looking for a mechanism for the node creation to get injected into our logging server w/ some basic info.
[2012-06-08 06:43:46 -0400] nmistry: node is not on the same network as our infrastructure network.
[2012-06-08 06:44:33 -0400] bdha: Write your own bootstrap script.
[2012-06-08 06:45:08 -0400] bdha: http://wiki.opscode.com/display/chef/Custom+Knife+Bootstrap+Script
[2012-06-08 06:47:07 -0400] nmistry: thanks bdha
[2012-06-08 06:47:58 -0400] bdha: np
[2012-06-08 06:49:29 -0400] nmistry: one last question,  handlers (for exceptions, etc) are executed on the node, or on the management workstation.  I would assume the machine where chef-client is running.
[2012-06-08 06:50:32 -0400] Mithrandir: all code is run on the client
[2012-06-08 06:50:38 -0400] Mithrandir: the server is fairly dumb
[2012-06-08 06:50:41 -0400] Mithrandir: (by design)
[2012-06-08 06:50:57 -0400] Mithrandir: it serves up json, stores json and does searching, but that's about it
[2012-06-08 06:52:41 -0400] nmistry: k
[2012-06-08 06:52:51 -0400] nmistry: thanks Mithrandir
[2012-06-08 06:59:44 -0400] iroller: Ohai chefs
[2012-06-08 07:05:11 -0400] WilliamHerry: Hi, I am new to chef, I want to know if chef support install package with git?
[2012-06-08 07:06:33 -0400] iroller: Hey opscode guys, could you help a little? I want to fork and maintain a private version of github/opscode/chef and build gems for my own versions. So the question about versioning - which way is better? Should I use minor versions like "0.10.10.1", or "0.10.10.mycompany.1" or... ?
[2012-06-08 07:28:34 -0400] jds: Heya
[2012-06-08 07:29:03 -0400] jds: I'm just starting with chef and a bit confused on the ideal approach for certain things
[2012-06-08 07:30:11 -0400] jds: Say I've got a remote git repository, and want a recipe that sticks its contents in my home directory
[2012-06-08 07:31:55 -0400] jds: I could just do 'command "git clone foo.com/bar.git ~/.baz"', but that seems a bit...ad hoc?
[2012-06-08 07:32:20 -0400] jds: I'm struggling to figure out what the standard way of doing this sort of thing is
[2012-06-08 07:36:22 -0400] tomoj: jds: did you google "chef git"?
[2012-06-08 07:36:58 -0400] tomoj: see examples in the "SCM Resources" section here http://wiki.opscode.com/display/chef/Deploy+Resource
[2012-06-08 08:19:08 -0400] abc_: hi there
[2012-06-08 08:19:56 -0400] abc_: if i understand correctly, chef (the client -server version) works using the pull model where the chef-client runs as an agent on the nodes and periodically contacts the chef-server for updates
[2012-06-08 08:21:01 -0400] abc_: is there a way to make chef work using the push model? (where the chef-server pushes out the updates to the nodes only when the admin uploads a new set of recipes/cookbooks to the chef-server?
[2012-06-08 08:25:52 -0400] itwasntandy: the chef client will always pull from the server
[2012-06-08 08:25:54 -0400] specialsauce: abc_ -  proper push, no, server-triggered pull, yes. but you'd have to bear in mind the thundering herd problem
[2012-06-08 08:26:15 -0400] itwasntandy: however you could have a trigger which instigates chef-clients on nodes following a recipe upload
[2012-06-08 08:26:19 -0400] specialsauce: it would be quite easy to disable client daemon or cron, and then trigger a client pull using knife ssh or whatever
[2012-06-08 08:28:30 -0400] abc_: yes, server-triggered pull is what i want. i don't want the chef-clients to keep polling.. I just want to do the node configuration just once and leave it at that and hence want to avoid the daemon + polling overhead at the node
[2012-06-08 08:29:51 -0400] abc_: specialsauce: can't i do a server-triggered pull and still avoid the thundering herd problem by using the splay parameter somehow (just like how it uses that to avoid thundering-herd in the usual pull model)?
[2012-06-08 08:30:11 -0400] specialsauce: abc_ indeed - you'd just have to remember to manage that yourself
[2012-06-08 08:30:42 -0400] abc_: specialsauce: oh.. ok.. thanks!
[2012-06-08 08:31:18 -0400] abc_: itwasntandy: thanks for your help too :)
[2012-06-08 08:31:32 -0400] jds: tomoj: I think I was googling along the lines of 'chef install package from git repository" and just found a lot of stuff about checking out chef itself from its git repo
[2012-06-08 08:31:42 -0400] jds: thanks for the wiki link
[2012-06-08 08:32:29 -0400] abc_: specialsauce:  however, i still have one doubt - you said i can disable client daemon or cron.. does that mean i run chef-solo on the nodes and chef-server on the main server?
[2012-06-08 08:33:12 -0400] Adz: jds, look at the deploy resource
[2012-06-08 08:33:46 -0400] Adz: oh, you were already told that
[2012-06-08 08:35:52 -0400] specialsauce: abc_ the chef-client can be run manually, by cron, or daemonised. You need to leave the client installed obviously, you don't need to disable the ability to manualyl run it, but just turn off any cron you have for it and stop it running daemonised by disabling init script or whatever
[2012-06-08 08:36:06 -0400] specialsauce: depending on how you installed chef client neither the cron or daemon may be set up anyway
[2012-06-08 08:37:36 -0400] abc_: specialsauce: ah! ok.. so just install chef-client at the nodes and leave it at that (without running them) and then from the chef-server i can trigger the chef-clients to run whenever i want.. right?
[2012-06-08 08:38:52 -0400] specialsauce: yep, that's about the size of it. as i say, knife ssh might be easiest way to trigger yur clients, but there's plenty of other ways too
[2012-06-08 08:40:04 -0400] abc_: specialsauce: ok, got it! thanks a ton for your help! :)
[2012-06-08 08:41:01 -0400] specialsauce: abc_ : no problem, normally me asking for help here :-P
[2012-06-08 08:41:21 -0400] abc_: specialsauce: hehe :)
[2012-06-08 09:30:41 -0400] jeekl: How do you guys manage network conf with chef? Puppet uses augeas, from what I understand, but I couldn't find any good chef-augeas integration from some quick googling.
[2012-06-08 09:32:09 -0400] vdvluc: on Ubuntu i use a template for /etc/network/interfaces and use a service resource to restart the network
[2012-06-08 09:33:02 -0400] specialsauce: jeekl, yeah augeas is kind of incompatible with basic chef principles really / not necessary. you would just use cookbooks for whatever network service etc you were wanting to manage
[2012-06-08 09:33:24 -0400] Tensibai: Hello
[2012-06-08 09:33:37 -0400] jeekl: I was thinking more, setting up routes, stuff like that...
[2012-06-08 09:34:29 -0400] Tensibai: When using default attribute within a cookbook, must I have to set them as override in role or could they stay on default on role ?
[2012-06-08 09:35:31 -0400] specialsauce: jeekl, fair enough, i've not had the need to manage that yet. good luck in your search
[2012-06-08 09:36:02 -0400] specialsauce: Tensibai, you can use a default attribute, overrides are optional
[2012-06-08 09:36:21 -0400] specialsauce: it will fall back on the highlest level precedence attribute available
[2012-06-08 09:36:30 -0400] Tensibai: http://wiki.opscode.com/display/chef/Attributes <= from there I should get default attribute surpseeding cookbooks default, but I end up with a non existing atribute...
[2012-06-08 10:20:25 -0400] railsraider: i deleted the node and client form chef server, and re-ran chef-client on the node but it runs on empty list and does not get added to the chef-server
[2012-06-08 10:20:30 -0400] railsraider: how do i add the node back?
[2012-06-08 10:20:52 -0400] railsraider: i tried bootstrap, and it runs fine but the node does not register with chef server
[2012-06-08 10:21:24 -0400] zts: railsraider: what's in the chef-client logs when you try re-running it (please pastebin)
[2012-06-08 10:22:17 -0400] railsraider: zts: empty http://www.pastie.org/private/iqp62bmd9znybhnleycla
[2012-06-08 10:22:29 -0400] railsraider: thats running chef-client from the node it self
[2012-06-08 10:23:50 -0400] zts: railsraider: that suggests that your node is already registered under the name 'localhost'
[2012-06-08 10:24:44 -0400] railsraider: how do i re-register it with chef-server
[2012-06-08 10:25:20 -0400] zts: railsraider: delete the client from the chef server, delete /etc/chef/client.pem, make sure /etc/chef/validation.pem is present, and then run chef-client
[2012-06-08 10:25:45 -0400] railsraider: weird i did that twice
[2012-06-08 10:25:49 -0400] railsraider: i'll try again
[2012-06-08 10:26:04 -0400] railsraider: i see it!
[2012-06-08 10:26:10 -0400] railsraider: localhost node in chef
[2012-06-08 10:26:12 -0400] railsraider: server
[2012-06-08 10:26:25 -0400] railsraider: i can just rename it right?
[2012-06-08 10:27:18 -0400] zts: I'm not aware of any way to rename client/node - I'd suggest fixing the name and then reregistering
[2012-06-08 10:28:05 -0400] railsraider: k thank!
[2012-06-08 10:28:24 -0400] railsraider: where's the name for the node?
[2012-06-08 10:28:33 -0400] railsraider: hosts file?
[2012-06-08 10:28:48 -0400] zts: it defaults to the fqdn of your system (the output of "ohai fqdn")
[2012-06-08 10:29:04 -0400] zts: if you want to override it, you can set node_name in /etc/chef/client.rb - see http://wiki.opscode.com/display/chef/Chef+Configuration+Settings#ChefConfigurationSettings-nodename
[2012-06-08 10:31:07 -0400] railsraider: zts: after deleting the client.pem and re running chef-client i get a 403 , did i missed anything?
[2012-06-08 10:31:32 -0400] railsraider: validation.pem is there
[2012-06-08 10:31:48 -0400] zts: railsraider: please pastebin the chef-client output of that run
[2012-06-08 10:32:16 -0400] railsraider: http://www.pastie.org/4049538
[2012-06-08 10:32:38 -0400] railsraider: i removed the client from chef sevrer
[2012-06-08 10:32:40 -0400] zts: okay, note this line: [Fri, 08 Jun 2012 10:30:20 +0000] INFO: HTTP Request Returned 409 Conflict: Client already exists
[2012-06-08 10:32:58 -0400] zts: so you need to delete the client with the same name from the chef server, and then run chef-client again
[2012-06-08 10:40:25 -0400] aj_: Hi, Im trying to get one cookbook with multiple recipies, e.g. one for RHEL nodes and one for Win2K8 nodes etc.. I thought chef had this functinoality but for the life of me i cant find the correct terms to search for to find any documentation about how it matches OS to recipes...
[2012-06-08 10:40:40 -0400] aj_: Or I could just be confused and i never did that :D
[2012-06-08 10:41:23 -0400] railsraider: zts: thanks man! it worked my hosts file was incorrect
[2012-06-08 10:42:21 -0400] zts: aj_: it doesn't do that.  What you can do is have a single recipe (eg, mycookbook::install) which looks at node.platform, then uses include_recipe to load the appropriate recipe (eg, include_recipe "mycookbook::install_rhel")
[2012-06-08 10:42:42 -0400] zts: railsraider: hurrah!  I've had that problem before too :)
[2012-06-08 10:42:55 -0400] aj_: Ahh ok... that will explain my lack of search results :D
[2012-06-08 10:43:13 -0400] zts: aj_: yeah, you may be thinking of files and templates - both of which do have a mechanism for that
[2012-06-08 10:43:40 -0400] aj_: Ahh that might be it..
[2012-06-08 10:43:57 -0400] railsraider: if anyone knows of a way to hosts your own apt-repo with specific packages on it (not using apt-mirorr for a full clone) it'll make my day :)
[2012-06-08 10:44:19 -0400] zts: aj_: see "Template Location Specificity" on this page - http://wiki.opscode.com/display/chef/Templates
[2012-06-08 10:44:51 -0400] Sephi: railsraider: can't u specifie your own repo with wget ?
[2012-06-08 10:45:09 -0400] Sephi: or just get what u need
[2012-06-08 10:45:27 -0400] aj_: Ahh thats the page.. for some reason i thought that it would work the same way with recipies
[2012-06-08 10:45:34 -0400] specialsauce: railsreader: we do this with with yum, and used to do this at my last worksplace with apt/debian, easily possible
[2012-06-08 10:45:36 -0400] railsraider: yes, my question is how to add to that repo specific packages and not just do a dumb clone of all the repo
[2012-06-08 10:47:59 -0400] Sephi: i dunno if it works but if you have a server running, you can add the package you want on it (in .tar or whatever)
[2012-06-08 10:48:05 -0400] aj_: Would you guys reccoment i have one recipe that incudes OS dependant recipes or skip that step and just have two recipes that i can apply to diffent machines dependant on OS
[2012-06-08 10:48:23 -0400] Sephi: then u need just tu untar them and install them
[2012-06-08 10:48:24 -0400] aj_: i think just having two recipies seems pretty simple...
[2012-06-08 10:48:38 -0400] zts: railsraider: I haven't done that myself yet, but I've bookmarked this howto for when I do: http://blog.mycrot.ch/2011/04/26/creating-your-own-signed-apt-repository-and-debian-packages/
[2012-06-08 10:49:09 -0400] railsraider: zts: thanks bro
[2012-06-08 10:49:13 -0400] specialsauce: railsreader: its a bit out of scope for a chef channel, but as i say, its easily possible, done it before, building a whole custom repo
[2012-06-08 10:49:40 -0400] Sephi: gonna check that too
[2012-06-08 10:49:44 -0400] Sephi: thx zts
[2012-06-08 10:49:55 -0400] railsraider: cool, how do i verify that a package was fully installed by chef?
[2012-06-08 10:49:56 -0400] zts: aj_: "it depends" - if there's truly nothing in common between the two platforms, then it's really a matter of personal preference
[2012-06-08 10:50:22 -0400] zts: aj_: often you'll find that there's enough common parts that it makes sense to have a single recipe, and just include the platform-specific bits
[2012-06-08 10:52:06 -0400] zts: railsraider, Sephi: no problem, hope it helps.  And all credit goes to jonlives for writing the post :)
[2012-06-08 10:52:52 -0400] aj_: I set up a apt-repo for our own locally generated packages.. if thats what your after? i found the debian documentation the best.. Most of the ubuntu docs were aimed at creating a local mirror of packages..
[2012-06-08 10:54:14 -0400] aj_: Thanks for the help zts! i think i will go for two recipies... all of our configuration is taken care of inside MSI's or RPM's so i dont think there will be any overlap...
[2012-06-08 10:58:33 -0400] zts: aj_: sounds reasonable - and you can always change your mind later, if you need to.  I can certainly imagine "linux" and "windows" having less in common than "debian" and "rhel" (for example)
[2012-06-08 11:12:10 -0400] railsraider: how do i get all dependencies to install automatically? http://www.pastie.org/4049721
[2012-06-08 11:15:12 -0400] railsraider: something with using options no ?
[2012-06-08 11:16:38 -0400] bdha: Read the error. Your package repo is in a busted state. You need to fix it.
[2012-06-08 11:20:29 -0400] railsraider: bdha: i need to install all the dependencies, how do i do that in the reipe?
[2012-06-08 11:21:51 -0400] railsraider: found it options -fix-broken
[2012-06-08 13:02:03 -0400] geekbri: ls
[2012-06-08 13:02:06 -0400] geekbri: whoops
[2012-06-08 13:08:56 -0400] fish_: wondering what a client can do with the validation.pem - only registering new clients or any further access to the chef server?
[2012-06-08 13:10:50 -0400] meineerde: fish_: no, only registering new clients
[2012-06-08 13:12:02 -0400] fish_: meineerde: do you have any details on that? wondering if it's okay to be very permissive with access to that file
[2012-06-08 13:13:04 -0400] meineerde: fish_: well, the general workflow is to copy it to the to-be-registered sverer, register a new client and then delete the file
[2012-06-08 13:14:14 -0400] meineerde: fish_: if you are overly security concerned, you could also create the client from elsewhere and copy the client certoficate directly to the server. it is up to you what you deem more unsafe: having a certificate lying around with which you can generate new clients or moving a valid client certificate around
[2012-06-08 13:14:20 -0400] fish_: meineerde: I'm working on a fully automated bootstrapping process, the goal is to put in new hardware and have it be available in chef some minutes later without touching anything. for that I need to make the validation.pem accessible without any authentication and I'm not sure if this is good practice..
[2012-06-08 13:14:54 -0400] fish_: if it really can only register new clients, that's fine
[2012-06-08 13:14:58 -0400] meineerde: fish_: have you already had a look at the knife bootstrap process?
[2012-06-08 13:15:19 -0400] fish_: but if it could read node attributes, delete nodes and stuff like that, it would be concerend more
[2012-06-08 13:15:22 -0400] meineerde: it is designed to register new servers when all you have is a working ssh server
[2012-06-08 13:15:29 -0400] fish_: meineerde: sure, that's what we're doing right now
[2012-06-08 13:15:56 -0400] meineerde: fish_: well, by transition, you could use it to create a new client which then can access this data
[2012-06-08 13:16:04 -0400] fish_: but now I want to have the system register themself with chef
[2012-06-08 13:16:20 -0400] fish_: 15:10 < meineerde> fish_: no, only registering new clients
[2012-06-08 13:16:27 -0400] fish_: ^- if this is true, I'm fine :)
[2012-06-08 13:16:42 -0400] fish_: just want to make sure that it hasn't more permissions then that
[2012-06-08 13:16:56 -0400] zts: fish_: Prior to http://tickets.opscode.com/browse/CHEF-2649 you could create admin clients with validation.pem
[2012-06-08 13:17:11 -0400] zts: fish_: but now, it'll just create normal clients
[2012-06-08 13:17:21 -0400] meineerde: yes, ther certificate itself can only register new clients. but if you can do this, an "attacker" could use the validation.pem to create a new client and use this to read about everything
[2012-06-08 13:17:59 -0400] yfeldblum: fish_, you should be very restrictive with access to that file
[2012-06-08 13:20:27 -0400] fish_: yfeldblum: yep, I thought so..
[2012-06-08 13:20:43 -0400] fish_: well, I'm going to make it only available in our pxe vlan, that should be secure enough
[2012-06-08 13:23:08 -0400] zts: fish_: That's what I do.  Also use recipe[chef-client::delete_validation] as part of your bootstrap, so that you're not leaving it lying around on newly provisioned machines
[2012-06-08 13:29:49 -0400] zts: fish_: you might also want to consider implementing some kind of notification for new client registrations, so that things don't slip by unnoticed
[2012-06-08 13:30:17 -0400] zts: fish_: also, if you're not going to provision any more machines for a while, consider generating a new validation.pem (which will invalidate the old one)
[2012-06-08 13:45:13 -0400] geekbri: is it valid to do a notifies :nothing ?
[2012-06-08 13:45:42 -0400] myusuf3: what resource are you doing this with?
[2012-06-08 13:46:11 -0400] myusuf3: also; does anyone know why I specificy for something to be installed with package resource
[2012-06-08 13:46:12 -0400] geekbri: myusuf3: there is a runit created service, I need to do some testing with config files and don't want it getting the restart notification
[2012-06-08 13:46:15 -0400] myusuf3: and it isn't installed?
[2012-06-08 13:46:54 -0400] myusuf3: geekbri is there a setting to control the restart notification?
[2012-06-08 13:47:03 -0400] myusuf3: if not; you will need to write it
[2012-06-08 13:47:37 -0400] zts: geekbri: why not just remove the 'notifies' attribute from that resource?  It's not mandatory...
[2012-06-08 13:47:58 -0400] geekbri: zts: beacuse I will want to restore it, and I dont want to have to remove all the different lines where its happening.
[2012-06-08 13:48:22 -0400] geekbri: i mean I believe all resources inherit the :nothing action by default
[2012-06-08 13:48:30 -0400] geekbri: So I suspect its no issue at all.
[2012-06-08 13:50:11 -0400] myusuf3: geekbri so try it and see
[2012-06-08 13:50:31 -0400] geekbri: ... yes that is what I planned on doing.  I just figured I would see if anybody had done it before to verify
[2012-06-08 13:50:43 -0400] myusuf3: zts any idea? why the package resource isn't installing nginx
[2012-06-08 13:50:48 -0400] myusuf3: geekbri :)
[2012-06-08 13:51:47 -0400] zts: myusuf3: best advice would be to run with "chef-client -l debug", and then search the output from "nginx" - it should have some details about why it chose not to act
[2012-06-08 13:52:15 -0400] myusuf3: zts is that available with chef-solo?
[2012-06-08 13:52:30 -0400] zts: myusuf3: yeah, "chef-solo -l debug" should also work
[2012-06-08 13:52:50 -0400] myusuf3: kk mind taking a look at the reciepe just to see if anything is up
[2012-06-08 13:52:54 -0400] myusuf3: that stands out?
[2012-06-08 13:53:04 -0400] zts: myusuf3: no problem, please gist/pastebin it and I'll take a look
[2012-06-08 13:54:21 -0400] myusuf3: zts https://gist.github.com/371fe91bae399834f7c4
[2012-06-08 13:55:04 -0400] zts: myusuf3: that has an extra "package 'nginx'" on line 1, which shouldn't be there
[2012-06-08 13:55:43 -0400] myusuf3: zts, gone
[2012-06-08 13:55:55 -0400] myusuf3: that was me trying to solve the problem
[2012-06-08 13:56:06 -0400] myusuf3: << python developet
[2012-06-08 13:56:07 -0400] zts: no problem, it looks pretty sane other than that
[2012-06-08 13:56:57 -0400] myusuf3: zts, package nginx when should that be used?
[2012-06-08 13:57:11 -0400] zts: I'd probably avoid an option called "--force-yes" unless it was definitely required though :)
[2012-06-08 13:58:45 -0400] zts: I _think_ that if you just do "package 'nginx'" (without a do ... end block after it), it will try to install the package called 'nginx'
[2012-06-08 13:59:08 -0400] zts: you can re-open (re-declare) resources, so having it twice in your recipe isn't a syntax error
[2012-06-08 13:59:47 -0400] myusuf3: hmm
[2012-06-08 13:59:54 -0400] myusuf3: so this is the error its giving me
[2012-06-08 13:59:55 -0400] fish_: zts: thanks a lot for sharing your best practices. will add notifications (already planned) and thanks for the hint with chef-client::delete_validation
[2012-06-08 13:59:57 -0400] myusuf3: best as I can tell
[2012-06-08 14:00:15 -0400] zts: fish_: no problem
[2012-06-08 14:00:24 -0400] myusuf3: https://gist.github.com/168a8e9b9457cb46cf9c
[2012-06-08 14:01:48 -0400] myusuf3: zts do I need to specify I am on a ubuntu machine/
[2012-06-08 14:01:51 -0400] myusuf3: https://gist.github.com/168a8e9b9457cb46cf9c
[2012-06-08 14:02:24 -0400] zts: myusuf3: it sounds like the reverse problem, actually - that chef-solo detects that you're on ubuntu, but doesn't know what to do about it
[2012-06-08 14:02:36 -0400] myusuf3: hmm
[2012-06-08 14:02:41 -0400] myusuf3: :(
[2012-06-08 14:02:43 -0400] zts: myusuf3: which is a problem, as it means that it won't know which provider to use to install your package (among other things)
[2012-06-08 14:02:47 -0400] zts: which version of chef-solo are you using?
[2012-06-08 14:02:58 -0400] myusuf3: 0.10.0
[2012-06-08 14:03:12 -0400] myusuf3: sorry
[2012-06-08 14:03:15 -0400] myusuf3: 0.10.10
[2012-06-08 14:03:37 -0400] myusuf3: it has previously work with another cookbook
[2012-06-08 14:03:44 -0400] myusuf3: but decided it was overkill
[2012-06-08 14:03:55 -0400] myusuf3: and wrote my own reciepe in another cookbook
[2012-06-08 14:04:04 -0400] zts: could you please run again, this time with "-l info", and gist the entire output for me?
[2012-06-08 14:06:07 -0400] myusuf3: zts, yeah sure thanks for the help
[2012-06-08 14:06:15 -0400] specialsauce: Has anyone got any good documentation anywhere on cuken? The basic readme etc are a little impenetrable for somone new to this area, especially since it mostly palms you off to the cucumber-nagios documentation. i just need a really basic example of it in use
[2012-06-08 14:08:44 -0400] ashb: specialsauce: i'd avoid cucumber et al anyway unles the ability to write tests for someone who doesn't know how to code is useful
[2012-06-08 14:09:22 -0400] zts: myusuf3: not a problem, sorry we haven't (yet) found the solution
[2012-06-08 14:10:21 -0400] myusuf3: zts, https://gist.github.com/231cfb1a3292f2452aa8
[2012-06-08 14:10:29 -0400] myusuf3: info has less info correct
[2012-06-08 14:10:36 -0400] myusuf3: it doesn't even mention the nginx failure
[2012-06-08 14:10:38 -0400] myusuf3: which is awesome
[2012-06-08 14:10:45 -0400] myusuf3: it just goes on to say there is no nginx service
[2012-06-08 14:10:54 -0400] specialsauce: ashb: can you explain that a bit? I've spent a fair amount of time looking at options and decided that its unit tests that don't provide much for our usage of chef, but that ability to "test the platform" via an integration-esque test would be very useful
[2012-06-08 14:11:26 -0400] myusuf3: zts, apprecaite the help, no need to apologize probabaly something I am doing wrong
[2012-06-08 14:11:31 -0400] ashb: specialsauce: so write integration tests in ruby. just don't use some fake restricted 'natural' language test
[2012-06-08 14:11:36 -0400] specialsauce: do you mean you wouldn't bnother with the whole naturual language abstraction? how would you go about coding similar tests?
[2012-06-08 14:11:40 -0400] specialsauce: ah ok, in ruby
[2012-06-08 14:11:45 -0400] zts: myusuf3: ah, there's a typo in your second "notifies" - it says 'services' but should say 'service'
[2012-06-08 14:11:54 -0400] ashb: all cucumber will do is turn the 'english' into method calls anyway
[2012-06-08 14:12:17 -0400] specialsauce: ashb: i'm not coming from a ruby background so its a hill/new experience either way
[2012-06-08 14:12:18 -0400] zts: myusuf3: just to explain the output, that failure happened during the "compile" phase - so it was happy with the package resource you've defined, but blew up on the second cookbook_file
[2012-06-08 14:12:33 -0400] zts: myusuf3: it's in the "converge" phase that it should try to install the package, so that's what we'll be looking for next
[2012-06-08 14:12:36 -0400] ashb: specialsauce: cool. definately avoid cucumber then :)
[2012-06-08 14:12:37 -0400] specialsauce: i'm just thinking that cucumber seems to be gaining ground as a standard way to write tests
[2012-06-08 14:13:38 -0400] myusuf3: zts which I fixed
[2012-06-08 14:13:44 -0400] myusuf3: and i think it installed
[2012-06-08 14:13:55 -0400] myusuf3: so cool, learned a few things
[2012-06-08 14:13:58 -0400] specialsauce: i have no more reason to lean towards it than that, that its popular and self-commenting to a degree - in ruby i'd have to code the comments on what's failing as well as the test code itself
[2012-06-08 14:14:12 -0400] myusuf3: how are you aware of what state it is in/
[2012-06-08 14:14:45 -0400] myusuf3: or phase rather
[2012-06-08 14:15:33 -0400] zts: myusuf3: that's a good question!  I'm not sure whether there's something in the debug logs which would indicate that.
[2012-06-08 14:15:40 -0400] zts: myusuf3: if you haven't seen it, this page is worth a read: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-06-08 14:16:30 -0400] myusuf3: zts, I apprecaite the help. I will definitely look into it.
[2012-06-08 14:17:06 -0400] myusuf3: can chef setup database tables and what not as well?
[2012-06-08 14:17:31 -0400] rweng: can I access data_bag_item in a library? Tried including Chef::Mixin::Language, but then I get NameError: Cannot find a resource for user_bag on ubuntu version 12.04
[2012-06-08 14:18:20 -0400] zts: myusuf3: no problem
[2012-06-08 14:18:39 -0400] zts: myusuf3: I've seen things for managing databases and database users, but not tables - that would require some extra work
[2012-06-08 14:18:53 -0400] zts: myusuf3: Take a look at this cookbook - https://github.com/opscode/cookbooks/tree/master/database
[2012-06-08 14:19:31 -0400] rweng: damn. nevermind :)
[2012-06-08 14:24:53 -0400] geekbri: A lot of people use things like sqlalchemy and activerecord to handle the management of schemas
[2012-06-08 14:26:06 -0400] gchristensen: yeah that seems out of the scope of chef, and more within the scope of your application... but that's just me.
[2012-06-08 14:28:19 -0400] geekbri: I think you could make arguments for how it should be managed by chef, and arguments for why it should be managed directly but your application
[2012-06-08 14:28:33 -0400] geekbri: with something like rails, you can just on a deployment call the migration task and it will be done
[2012-06-08 14:28:43 -0400] geekbri: which is nice, and means chef doesn't have to worry about much else, other than calling a rake task
[2012-06-08 14:29:07 -0400] geekbri: SQLAlchemy is just essentially pythons equivalent of active record (I believe... that book is still sitting unopened on my desk )
[2012-06-08 14:37:22 -0400] stellard: Hi, I am new to chef and just wondering how exactly you can rerun your configuration on all of your nodes
[2012-06-08 14:40:12 -0400] specialsauce: stellard, personally via the chef-client daemon mode. but you can also do it via cron, or trigger a pull as needed from your server
[2012-06-08 14:42:25 -0400] stellard: specialsauce: i see, so is this the best method to release the code to the servers?
[2012-06-08 14:42:53 -0400] stellard: I was thinking that you would just run the config across all servers again to redeploy the latest code
[2012-06-08 14:44:20 -0400] specialsauce: stellard: i'm not saying its the best method, just what i do. what is best for you may vary, there's different options for different requirements
[2012-06-08 14:44:41 -0400] specialsauce: i prefer to run it daemonised so it periodically enforces, which prevents the temptation to hack locally
[2012-06-08 14:45:02 -0400] specialsauce: but triggering it manually from the server only as needed is perfectly valid and others do this
[2012-06-08 14:48:46 -0400] yfeldblum: application database migrations are app ops, not infra ops
[2012-06-08 14:49:47 -0400] yfeldblum: you may elect to include app ops within the purview of your infra ops; but it must at least be recognized that there is that difference between the two and that it is a choice to use the same tool for both
[2012-06-08 14:50:03 -0400] stellard: great, thanks for that. Makes it more clear now.
[2012-06-08 14:50:13 -0400] stellard: what the options are
[2012-06-08 14:51:56 -0400] specialsauce: np
[2012-06-08 14:52:57 -0400] specialsauce: yfeldblum, yeah hit this boundary too trying to draw a line between the two, we go as far as adding users and creating empty DBs, and leave migrations and schema to the app ops tools
[2012-06-08 14:53:27 -0400] yfeldblum: specialsauce, that's also where i draw that line
[2012-06-08 14:53:30 -0400] yfeldblum: specialsauce, kind of
[2012-06-08 14:54:34 -0400] yfeldblum: specialsauce, adding an empty db an an admin user for that db (but only for that db) is on the boundary, and really falls into the category of provisioning, which in the simple cases are often dealt with in infra ops rather than as a separate thing
[2012-06-08 14:55:28 -0400] yfeldblum: specialsauce, so in the simpler cases at least, yes, that's where i would draw that line too, where you don't have db provisioning automation separate from the rest of your infra automation
[2012-06-08 14:57:48 -0400] yfeldblum: the point of that kind of a db provisioning service would be to shift provisioning an individual db from the umbrella of infra ops to the umbrella of app ops
[2012-06-08 15:07:03 -0400] geekbri: specialsauce, yfeldblum: that is what we are doing here as well.  We will setup the DBs to the point where we create a blank database and the necessary users.
[2012-06-08 15:07:56 -0400] yfeldblum: geekbri, and leave schema, migration, & seeding to app ops?
[2012-06-08 15:09:31 -0400] geekbri: yfeldblum: yeah.
[2012-06-08 15:15:37 -0400] hasrb: Is there a place on a chef client that records when the last run is and the outcome of it? Or any run details
[2012-06-08 15:15:45 -0400] hasrb: *was
[2012-06-08 15:16:06 -0400] hasrb: or just the checksum in /etc/chef/cache?
[2012-06-08 15:16:10 -0400] gale: hasrb: look at http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2012-06-08 15:16:18 -0400] hasrb: gale: thanks!
[2012-06-08 15:16:41 -0400] gale: fairly straight forward to get something going
[2012-06-08 15:16:59 -0400] gale: but it would be nice to have a yes it worked/no it didn't by default
[2012-06-08 15:17:38 -0400] hasrb: gale: gotcha, this is what I was looking for
[2012-06-08 15:20:29 -0400] hasrb: or the log_location directive kind of too
[2012-06-08 15:23:35 -0400] Tensibai: I have a strange behavior... I've a node attribute loaded from env which gets "iterated" on itself ... I can't guess why
[2012-06-08 15:24:08 -0400] Tensibai: Is there a way to validate my default attributes file and env/role attributes ?
[2012-06-08 15:27:19 -0400] Tensibai: appears it is when I link a role including my cookbook setting default attributes ...
[2012-06-08 15:27:22 -0400] Tensibai: sounds weird
[2012-06-08 15:31:14 -0400] akytse: Hey guys can anyone suggest me a open source application which is written in java, using db like mongodb/postgresql/mysql and uses web servers like jetty/glassfish/tomcat/apache ??
[2012-06-08 15:31:45 -0400] akytse:  if any suggestion please mail it to my id akshayonwork@gmail.com
[2012-06-08 15:34:36 -0400] barefoot: way to stay on /topic ?
[2012-06-08 15:34:40 -0400] specialsauce: heh
[2012-06-08 15:35:30 -0400] akytse: any app ?
[2012-06-08 15:36:36 -0400] Tensibai: akytse: to do what ?
[2012-06-08 15:36:38 -0400] specialsauce: akytse, i don't think anyone knows quite what to make of your query,what you're trying to achieve, or what it has to do with chef?
[2012-06-08 15:36:45 -0400] Tensibai: akytse: There's some...
[2012-06-08 15:37:53 -0400] Tensibai: akytse: let's say: openbravo (java/mysql/tomcat)
[2012-06-08 15:38:11 -0400] akytse: to model application in chef server and client !
[2012-06-08 15:38:32 -0400] akytse: any application <tensibai> ?
[2012-06-08 15:39:53 -0400] Tensibai: openbravo is an erp in java using mysql as backend and tomcat as engine, so it may fit your needs (but quite heavy work in sight)
[2012-06-08 15:40:17 -0400] specialsauce: akytse, so you're going to install an application based on the platform it is built on rather than what it does functionally? That's... bizarre
[2012-06-08 15:41:18 -0400] Tensibai: or in wide list: crowd, jira ...
[2012-06-08 15:41:35 -0400] Tensibai: well there's quite a lot of answer in fact :p
[2012-06-08 15:42:21 -0400] akytse: <specialsauce> Im trying to model an application as it is without using any business logic in between .. so that i can call it through chef-client ..
[2012-06-08 15:43:41 -0400] Tensibai: sorry, read 3 three time but I still don't understand what you mean
[2012-06-08 15:43:55 -0400] zts: akytse: what is your goal?  Are you looking for some example you can use to learn Chef?
[2012-06-08 15:47:01 -0400] specialsauce: akytse, i think we're all still struggling to understand what you want to do. can you explain really simply what you need to achieve please?
[2012-06-08 15:47:32 -0400] akytse: @ tensibai -> I need applications written in java with the above dependencies i told .. I will make use of source code or war file and model it in server so that i can access from client !
[2012-06-08 15:48:19 -0400] geekbri: ?
[2012-06-08 15:48:48 -0400] geekbri: is this an epic troll?
[2012-06-08 15:48:56 -0400] geekbri: s/troll/trolling
[2012-06-08 15:49:06 -0400] akytse: @ specialsause -> Yes i will be installing application based on java platform in chef-server .
[2012-06-08 15:49:36 -0400] Tensibai: Oo
[2012-06-08 15:49:39 -0400] specialsauce: akytse, are you definitely talking about chef here meaning the configuration management product by opscode?
[2012-06-08 15:50:00 -0400] juliancdunn: :q
[2012-06-08 15:50:03 -0400] juliancdunn: whoops
[2012-06-08 15:51:44 -0400] split[|]brain:  /ignore -channels #chef,#zfs * JOINS PARTS QUITS NICKS
[2012-06-08 15:52:11 -0400] akytse: @ specialsause -> Yes im using chef -server and chef-client for configuring open source application with them and make use of it .
[2012-06-08 15:53:39 -0400] Tensibai: akytse: ok, but installing any app as is without a real need, I can't get the point
[2012-06-08 15:54:12 -0400] Tensibai: if it's just a pooc you may try craowd, jire, openbravo, and others
[2012-06-08 15:54:24 -0400] Tensibai: aww, crowd*, jira*
[2012-06-08 15:54:43 -0400] split[|]brain:  /ignore -channels #chef * JOINS PARTS QUITS NICKS
[2012-06-08 15:55:57 -0400] akytse: @ tensibai @specialsauce -> For example i need applications like jamwiki or dokuwiki .. if you know any open source applications please do suggest ..
[2012-06-08 15:57:03 -0400] akytse: @ tensibai -> using sourcecode it can be used by making necessary changes right !
[2012-06-08 15:57:50 -0400] specialsauce: akytse, aha, so you basically just want a chef cookbook that sets up a wiki product (open source)?
[2012-06-08 15:58:57 -0400] Tensibai: Well if you say so ... I don't get the point of modifying something like an ERP to do something like jira (for exemple)
[2012-06-08 15:59:02 -0400] Tensibai: but anyway: http://en.wikipedia.org/wiki/List_of_free_and_open_source_software_packages
[2012-06-08 15:59:19 -0400] Tensibai: you may do your pick up there for your needs
[2012-06-08 15:59:37 -0400] akytse: @specialsauce -> not only wiki product i just gave example , i'm looking for java applications actually ..
[2012-06-08 16:00:56 -0400] Tensibai: akytse: well, crowd is an atlassian app, to maange identification, jira is an atlassian app to manage bugs/projects, they do use the same infra but serve very different purposes
[2012-06-08 16:01:35 -0400] Tensibai: And in cookbook term, there's the application cookbook to install java apps and more
[2012-06-08 16:01:46 -0400] Tensibai: But that's out of my scope of knowledge for now :p
[2012-06-08 16:01:56 -0400] specialsauce: i give up, i'm off home
[2012-06-08 16:02:29 -0400] zts: akytse: People generally use Chef to automate the software they are already using.  It doesn't make sense to ask for suggestions about software to start using.
[2012-06-08 16:02:40 -0400] danryan: hey chefs, I seem to recall a tool that parsed a cookbook's contents and generated a README. Any ideas where I might find it?
[2012-06-08 16:02:43 -0400] Tensibai: (I've a small doubt about the open sourcing of atlassian apps in fact)
[2012-06-08 16:03:04 -0400] Tensibai: Off home too, evening als
[2012-06-08 16:03:06 -0400] Tensibai: alls*
[2012-06-08 16:03:08 -0400] akytse: Ok Tensibai thats lot of information from you thanks a lot i will check with the link .. :)
[2012-06-08 16:03:53 -0400] akytse: @ specialsauce Thanks for taking time to think about my problem .. thankyou :)
[2012-06-08 16:07:25 -0400] zts: I'm glad they left happy, but I sure wish I understood what they were trying to achieve
[2012-06-08 16:07:39 -0400] hasrb: danryan: if you find that let me know, sounds useful. Might want to check out Docco(http://jashkenas.github.com/docco)
[2012-06-08 16:08:31 -0400] hasrb: danryan: here's an nginx cookbook that's using it - http://fnichol.github.com/iterative_chef/iterations/initial-draft/cookbooks/sandbox/recipes/nginx_source.html
[2012-06-08 16:09:25 -0400] danryan: hasrb: that is righteous, thanks!
[2012-06-08 16:18:03 -0400] split[|]brain: hi guys, recovering cfengine user, diving into chef. I was trying to find out nodes that had a recipe in their run-list
[2012-06-08 16:18:12 -0400] JasonBox: Wow, the number of 'unless windows' changes to mysql cookbook is scary
[2012-06-08 16:18:18 -0400] split[|]brain: I ran 'knife search node -i 'recipes:blah'
[2012-06-08 16:18:45 -0400] split[|]brain: it took 73m to come back with a response
[2012-06-08 16:18:52 -0400] mattray: if anyone care about Chef & OpenStack, #openstack-chef is a thing
[2012-06-08 16:19:08 -0400] mattray: also, https://github.com/mattray/knife-openstack/ is waiting for the next public release of Fog, it's essentially in the can
[2012-06-08 16:19:21 -0400] split[|]brain: should search be that slow? or am I not doing it right?
[2012-06-08 16:20:44 -0400] erikh: mattray: awesome!
[2012-06-08 16:26:33 -0400] rweng: is there a way to get the run_context or node in a library?
[2012-06-08 16:27:01 -0400] erikh: rweng: I usually pass the node in
[2012-06-08 16:28:21 -0400] rweng: erikh: yeah, though there might be another way, like an alternative to including Chef::Mixin::RecipeDefinitionDSLCore (which doesn't work in my case)
[2012-06-08 16:28:28 -0400] rweng: thanks though :)
[2012-06-08 16:28:45 -0400] erikh: yeah, dunno. what I'm doing works for me, I don't know if there's a best practice.
[2012-06-08 16:51:34 -0400] yfeldblum: split[|]brain, it should not be that slow
[2012-06-08 16:52:22 -0400] yfeldblum: erikh, there is a best practice: standard ruby
[2012-06-08 16:53:12 -0400] erikh: yes but some people are new to "standard ruby"
[2012-06-08 16:53:17 -0400] erikh: same problem rails had 7 years ago or so.
[2012-06-08 16:54:51 -0400] yfeldblum: heh
[2012-06-08 16:56:49 -0400] JasonBox: Indeed
[2012-06-08 16:57:36 -0400] yfeldblum: one option is: https://github.com/fnichol/chef-rvm/blob/master/recipes/default.rb#L36-40
[2012-06-08 16:58:04 -0400] yfeldblum: that includes module functions into the recipe class so they can be called directly from your recipes
[2012-06-08 16:59:57 -0400] yfeldblum: another option is to define instance methods directly in the class Object: https://github.com/fnichol/chef-rvm/blob/master/libraries/rvm_shell_chef_wrapper.rb#L28-105
[2012-06-08 17:00:18 -0400] yfeldblum: that example defines the method Object#create_rvm_shell_chef_wrapper
[2012-06-08 17:00:53 -0400] yfeldblum: a third approach is always to reference the context when calling library methods: MyLibraryModule.some_method(run_context, arg1, arg2)
[2012-06-08 17:01:56 -0400] erikh: I just write a normal class.
[2012-06-08 17:02:01 -0400] erikh: pass hte node into the constructor.
[2012-06-08 17:09:16 -0400] split[|]brain: yfeldblum: the result set was 1000 nodes, is that enough to make a difference in the execution time?
[2012-06-08 17:10:30 -0400] yfeldblum: split[|]brain, two likely causes: a problem with hosted-chef, and your `knife` process thrashing
[2012-06-08 17:12:32 -0400] yfeldblum: split[|]brain, actually it looks like the knife search implementation does stream the results and present them one-by-one, so not sure if that's it
[2012-06-08 17:12:46 -0400] yfeldblum: erikh, great option as well
[2012-06-08 17:20:05 -0400] split[|]brain: yfeldblum: ok thx, I will open a ticket
[2012-06-08 17:30:32 -0400] monvillalon: Im using bootstrap on a ec2 machine but its giving permission errors on client.pem because I have to use the ec2-user to log in
[2012-06-08 17:32:33 -0400] yfeldblum: split[|]brain, if it's with hosted-chef, you may want to email support@opscode.com instead
[2012-06-08 17:34:11 -0400] split[|]brain: yfeldblum: yup, that's what I meant
[2012-06-08 18:25:29 -0400] erratic: ohai parrots
[2012-06-08 18:25:45 -0400] erratic: I was wondering if someone could help me consolidate my mapreduce calls down
[2012-06-08 18:25:47 -0400] erratic: http://pastie.org/private/oosnmfkqls3djbqpcuyjw
[2012-06-08 18:26:19 -0400] erratic: ideally I'd want something that looks like [[ip, hostname], [ip, hostname], [ip,hostname]]
[2012-06-08 18:26:30 -0400] erratic: Im not rly good with ruby
[2012-06-08 18:29:39 -0400] erratic: as my hand reaches for the parrot, its beak opens (to bite my finger off)
[2012-06-08 18:30:11 -0400] erratic: parrots
[2012-06-08 18:30:13 -0400] erratic: rac rac
[2012-06-08 18:30:28 -0400] erratic: very frustrating
[2012-06-08 18:30:45 -0400] hoover_damm: erratic, likely search the hardest way
[2012-06-08 18:30:50 -0400] hoover_damm: review the ssh_known_hosts cookbook
[2012-06-08 18:30:58 -0400] hoover_damm: at least in that pattern
[2012-06-08 18:31:16 -0400] hoover_damm: erratic, or review other cookbooks... that works but meh
[2012-06-08 18:31:41 -0400] erratic: thanks hoov
[2012-06-08 18:35:16 -0400] myusuf3: zts, you still around?
[2012-06-08 18:37:12 -0400] erratic: think Im starting to get a headache
[2012-06-08 18:37:18 -0400] erratic: good thing I have like
[2012-06-08 18:37:25 -0400] erratic: a bottle of tylenol and a bunch of tylonal packets
[2012-06-08 18:42:03 -0400] hoover_damm: erratic, lol
[2012-06-08 18:42:17 -0400] greenmoss: within a cookbook attributes file, is there a variable to reference the current cookbook name?
[2012-06-08 18:42:43 -0400] hoover_damm: erratic, search is a gallon of laughs but once you get past the main problem
[2012-06-08 18:42:46 -0400] hoover_damm: it's not a big deal
[2012-06-08 18:43:12 -0400] hoover_damm: erratic, generally I use blocks a lot to pull data out
[2012-06-08 18:43:31 -0400] myusuf3: anyone have a moment to help me debug an issue, I have been stuck on for an hour?
[2012-06-08 18:44:13 -0400] resno: heh, i cant get all the depencies for chef.. this is likely a badsign eh?
[2012-06-08 18:46:50 -0400] chrisftw: myusuf3: I was stuck on something:  This is what helped me:  "sudo chef-client -l debug"
[2012-06-08 18:48:04 -0400] atomic-penguin: resno, what platform can't you get all the dependencies?
[2012-06-08 18:50:40 -0400] myusuf3: chrisftw, already looking at it; I have been using chef for a week or so; and debug doesn't mean much till it does
[2012-06-08 18:51:33 -0400] chrisftw: myusuf3: I have used it for a little longer.  but still a noob.  What is the actual error you are getting?
[2012-06-08 18:51:44 -0400] resno: atomic-penguin: ubuntu 12.04 im getting a weirdissue actually
[2012-06-08 18:52:18 -0400] hoover_damm: myusuf3, if you can ask your question and post the cookbook that you have questions about
[2012-06-08 18:52:23 -0400] atomic-penguin: resno, have you looked at omnibus?
[2012-06-08 18:52:27 -0400] atomic-penguin: omnibus?
[2012-06-08 18:52:27 -0400] bawt_: omnibus is a project for building full-stack packages for a variety of platforms, and is used to build the 'chef-full' packages downloaded from http://opscode.com/chef/install or with http://opscode.com/chef/install.sh
[2012-06-08 18:53:07 -0400] resno: hmm
[2012-06-08 18:53:14 -0400] resno: didnt know about this
[2012-06-08 18:54:43 -0400] atomic-penguin: resno, takes out most of the guesswork of installing chef
[2012-06-08 18:55:05 -0400] hoover_damm: apt-get update ... wget / install / run chef
[2012-06-08 18:55:08 -0400] resno: i enjoy guess work
[2012-06-08 18:55:17 -0400] hoover_damm: instead of apt-get update / install ruby / install rubygems / install gems
[2012-06-08 18:55:26 -0400] atomic-penguin: ikr
[2012-06-08 18:55:31 -0400] hoover_damm: and if you do rdoc
[2012-06-08 18:55:39 -0400] hoover_damm: we're saving you 3 minutes by going to omnibus
[2012-06-08 18:55:42 -0400] hoover_damm: at least
[2012-06-08 18:55:55 -0400] resno: and it even thanks me!
[2012-06-08 18:55:57 -0400] resno: how polite!
[2012-06-08 18:56:20 -0400] hoover_damm: opscode guys are quite polite
[2012-06-08 18:56:39 -0400] resno: hoover_damm: you saythat and the next guy will curse me out ;)
[2012-06-08 18:57:17 -0400] resno: hoover_damm: following that, where do i go?
[2012-06-08 18:57:37 -0400] resno: knife configure-i?
[2012-06-08 18:57:40 -0400] atomic-penguin: doh, recompiled kernel, forgot snd-usb-audio.  Headphones no work :(
[2012-06-08 18:57:54 -0400] resno: atomic-penguin: you too acually
[2012-06-08 18:58:21 -0400] atomic-penguin: resno, me too what?
[2012-06-08 18:58:42 -0400] resno: now its installed, where do i pickup? validation.pem isnt there
[2012-06-08 18:59:14 -0400] hoover_damm: resno, knife bootstrap -d chef-full
[2012-06-08 18:59:26 -0400] ampledata: guys take a picture i'm wearing a button up shirt today
[2012-06-08 18:59:34 -0400] hoover_damm: resno, it will download omnibus and install it and register it
[2012-06-08 18:59:53 -0400] myusuf3: hoover_damm, there is the error.log and the recipe
[2012-06-08 18:59:53 -0400] myusuf3: https://gist.github.com/6c596f812ba20bd2d3a9
[2012-06-08 18:59:57 -0400] resno: no knife configuration file found hoover_damm
[2012-06-08 19:00:09 -0400] resno: must pass an fqdn orip to bootstrap
[2012-06-08 19:00:21 -0400] resno: should i just wipe and start fresh?
[2012-06-08 19:00:52 -0400] hoover_damm: myusuf3, change line 7 to action :nothing
[2012-06-08 19:01:05 -0400] hoover_damm: myusuf3, then add a resource at the bottom to start it
[2012-06-08 19:02:22 -0400] hoover_damm: myusuf3, in the future this works just as well... https://gist.github.com/c1125c5e4245a695d97b
[2012-06-08 19:02:42 -0400] hoover_damm: pardon the extra end at line 15 i was lazy on my copy and paste
[2012-06-08 19:07:09 -0400] myusuf3: so I can change support to :nothing?
[2012-06-08 19:08:02 -0400] hoover_damm: action to nothing
[2012-06-08 19:08:56 -0400] myusuf3: hoover_damm then what did you mean about the resource/
[2012-06-08 19:09:33 -0400] hoover_damm: myusuf3, see the gist i linked
[2012-06-08 19:09:39 -0400] hoover_damm: myusuf3, that's a better way to do it
[2012-06-08 19:10:01 -0400] myusuf3: hoover_damm it may be better; but I dont understand it; python developer <<<
[2012-06-08 19:10:14 -0400] myusuf3: so it would be impossible for me to maintain it
[2012-06-08 19:10:28 -0400] myusuf3: what am I doing wrong with the way I chose to go about it
[2012-06-08 19:12:57 -0400] other_guy: Is there a way to make my role overrides *replace* rather than merge with existing defaults on a recipe?
[2012-06-08 19:14:10 -0400] other_guy: The problem is that I have a default value that's an array of hashes
[2012-06-08 19:14:21 -0400] hoover_damm: myusuf3, the gist I linked would depend on the nginx cookbook that opscode provides
[2012-06-08 19:14:37 -0400] hoover_damm: myusuf3, part of creating a pattern that is supportable is using cookbooks that your coworkers can use easily
[2012-06-08 19:14:58 -0400] hoover_damm: myusuf3, in that I believe in using the Opscode cookbooks if possible because that lowers the learning curve
[2012-06-08 19:15:31 -0400] ranjibd: other_guy, i guess chef does a deep merge .. wondering if thats possible ...
[2012-06-08 19:15:33 -0400] hoover_damm: myusuf3, checking over the readme in https://github.com/opscode-cookbooks/nginx should give you some examples on how to use it.
[2012-06-08 19:15:52 -0400] other_guy: Yeah chef does that's my trouble.
[2012-06-08 19:15:59 -0400] other_guy: It's merging instead of overriding
[2012-06-08 19:16:22 -0400] other_guy: which is a little aggravating since they're called "overrides"
[2012-06-08 19:16:33 -0400] hoover_damm: myusuf3, guess it doesn't.  so you'd need to include_recipe "nginx::source" to install nginx via source for example.  Then drop the template in sites-available, and do nginx_site to enable the site
[2012-06-08 19:16:50 -0400] hoover_damm: myusuf3, nginx_site drops some wrappers that are like apache's site-enabled / disabled
[2012-06-08 19:17:08 -0400] hoover_damm: myusuf3, if you need to modify the nginx.conf you should do that in the nginx recipe or make the change in your config file for your site
[2012-06-08 19:19:19 -0400] other_guy: I can't tell what the architectural consistency of roles is supposed to be
[2012-06-08 19:19:55 -0400] yfeldblum: other_guy, not sure i followed the question
[2012-06-08 19:20:14 -0400] yfeldblum: other_guy, individual bits of data get overridden; not whole trees
[2012-06-08 19:20:29 -0400] atomic-penguin: other_guy, with regard to attributes?
[2012-06-08 19:21:04 -0400] other_guy: atomic-penguin: with regard to roles and recipes.  Sometimes roles are subordinate to recipes and other times they're not.
[2012-06-08 19:21:14 -0400] other_guy: yfeldblum, the problem is this...
[2012-06-08 19:22:01 -0400] other_guy: I have a value that contains an array. say it's { default_value => ["hi", "there"]}
[2012-06-08 19:22:19 -0400] other_guy: In my role I set that to { default_value => ["hi", "there"]}
[2012-06-08 19:22:22 -0400] other_guy: whoops
[2012-06-08 19:22:32 -0400] other_guy: I mean { default_value => ["you", "here"]}
[2012-06-08 19:23:00 -0400] other_guy: when the whole thing gets mashed I wind up with { default_value => ["hi", "there", "you", "here"]}
[2012-06-08 19:23:12 -0400] other_guy: Which i don't want.
[2012-06-08 19:23:19 -0400] atomic-penguin: other_guy, so yes, you are talking about attributes
[2012-06-08 19:23:32 -0400] atomic-penguin: other_guy, you can handle it in at least two different ways
[2012-06-08 19:23:59 -0400] other_guy: The only way I've found to deal with it so far is simply not to set a default attribute, and require a role to define it.
[2012-06-08 19:24:00 -0400] atomic-penguin: http://wiki.opscode.com/display/chef/Deep+Merge
[2012-06-08 19:24:22 -0400] atomic-penguin: ...or operate on your array in the recipe for your edge case
[2012-06-08 19:25:01 -0400] atomic-penguin: since you have access to Ruby, you could subtract %w[ hi there ] for your edge case
[2012-06-08 19:26:09 -0400] other_guy: I don't have access to the default value in the role
[2012-06-08 19:26:09 -0400] atomic-penguin: you can also use different levels of attributes in your roles, to override
[2012-06-08 19:26:31 -0400] other_guy: so I can't %w[ hi there ] from the set, because I don't have the set to do the operation on
[2012-06-08 19:26:35 -0400] atomic-penguin: default in your general case role, override in your edge case role
[2012-06-08 19:27:33 -0400] other_guy: what about { default_value => ["!merge", "hi", "there"]}
[2012-06-08 19:27:34 -0400] other_guy: ?
[2012-06-08 19:27:59 -0400] atomic-penguin: !merge:hi, !merge:there
[2012-06-08 19:28:26 -0400] atomic-penguin: explained on the deep merge wiki page ^^
[2012-06-08 19:28:31 -0400] other_guy: or just !merge: to overwrite
[2012-06-08 19:28:37 -0400] other_guy: everything
[2012-06-08 19:28:55 -0400] other_guy: oh, wait
[2012-06-08 19:29:19 -0400] other_guy: no, yeah that seems right one sec testing
[2012-06-08 19:31:18 -0400] other_guy: shit
[2012-06-08 19:31:27 -0400] other_guy: no dice
[2012-06-08 19:34:17 -0400] other_guy: nope, not explicitly eithe
[2012-06-08 19:34:18 -0400] other_guy: r
[2012-06-08 19:34:29 -0400] atomic-penguin: other_guy, cleanest way to handle this: https://gist.github.com/2897736
[2012-06-08 19:35:32 -0400] other_guy: atomic-penguin, That would actually work.  The trouble is that Role A in this scenario is a Recipe
[2012-06-08 19:35:49 -0400] atomic-penguin: wut?
[2012-06-08 19:35:50 -0400] bawt_: wut are you doing man!
[2012-06-08 19:36:06 -0400] atomic-penguin: Role A is a recipe?
[2012-06-08 19:36:22 -0400] other_guy: I have a Recipe, it has some default values set in its default attributes list
[2012-06-08 19:36:28 -0400] atomic-penguin: okay
[2012-06-08 19:36:41 -0400] erratic: is it a recipe for DISASTER!?
[2012-06-08 19:36:41 -0400] atomic-penguin: Then override like in role_b
[2012-06-08 19:36:52 -0400] other_guy: I have a Role that uses that recipe, that has some overrides in it.
[2012-06-08 19:37:24 -0400] other_guy: The overrides don't happen in the Gist example, what I'm seeing is the concatenation of "value"
[2012-06-08 19:37:24 -0400] atomic-penguin: okay, if you "override" a "default" array attribute, it should not merge
[2012-06-08 19:37:54 -0400] atomic-penguin: if you try to "default" in a role, with a "default" array attribute, the two default arrays will merge
[2012-06-08 19:38:13 -0400] other_guy: Yeah I get that.
[2012-06-08 19:38:43 -0400] other_guy: https://github.com/basho/riak-chef-cookbook/blob/master/attributes/control.rb#L22
[2012-06-08 19:40:30 -0400] other_guy: https://gist.github.com/2897760
[2012-06-08 19:41:24 -0400] other_guy: when my config is generated I end up with "userlist" => { "default_user" => ["user", "pass", "MyUsername", "MyPassword"]}
[2012-06-08 19:41:41 -0400] other_guy: Which makes Riak Control shit the bed
[2012-06-08 19:42:16 -0400] atomic-penguin: other_guy, don't see how it could, your riak namespace is missing from your role
[2012-06-08 19:43:03 -0400] other_guy: sorry I deleted it when I made the gist
[2012-06-08 19:43:04 -0400] other_guy: one sec
[2012-06-08 19:43:13 -0400] atomic-penguin: https://gist.github.com/2897766
[2012-06-08 19:44:04 -0400] other_guy: https://gist.github.com/2897760
[2012-06-08 19:44:05 -0400] resno: even the prebuild deb, is failing
[2012-06-08 19:44:35 -0400] resno: i guess im just not meant to use chef
[2012-06-08 19:45:09 -0400] other_guy: atomic-penguin: that's basically exactly what I'm already doing.
[2012-06-08 19:45:27 -0400] other_guy: I end up with a concatted Array
[2012-06-08 19:45:45 -0400] resno: other_guy: are you chef0server or hosted chef?
[2012-06-08 19:45:55 -0400] other_guy: chef-server
[2012-06-08 19:46:01 -0400] atomic-penguin: other_guy, what version of chef?
[2012-06-08 19:46:27 -0400] other_guy: 0.10.10
[2012-06-08 19:46:32 -0400] resno: im fairly frustrated with chef at this point, and nothing has worked to get chef-server going
[2012-06-08 19:47:28 -0400] atomic-penguin: other_guy, let me play around with this, see if I can reproduce the problem
[2012-06-08 19:47:35 -0400] atomic-penguin: other_guy, maybe its a recipe bug
[2012-06-08 19:47:52 -0400] other_guy: resno, it has been somewhat frustrating but it it's preferrable to the alternative
[2012-06-08 19:48:17 -0400] resno: other_guy: the alternative being puppet of cfegngine?
[2012-06-08 19:48:24 -0400] resno: s/of/or/
[2012-06-08 19:48:39 -0400] other_guy: I couldn't use puppet because the DSL was too limiting
[2012-06-08 19:48:58 -0400] other_guy: I didn't try cfengine
[2012-06-08 19:49:03 -0400] resno: ah, i cant use chef cause i cant get it installed so.. puppet seems best
[2012-06-08 19:49:21 -0400] resno: ive played with this for a few days now, and puppet just installed perfectly
[2012-06-08 19:49:32 -0400] itwasnta1dy: resno: chef installs pretty easily too in my experience
[2012-06-08 19:49:49 -0400] resno: itwasnta1dy: chef isnt installing forme
[2012-06-08 19:49:57 -0400] itwasnta1dy: was pretty easy
[2012-06-08 19:50:08 -0400] resno: itwasntandy: centos? which version?
[2012-06-08 19:50:12 -0400] itwasntandy: 5.6
[2012-06-08 19:50:19 -0400] resno: ill try that then
[2012-06-08 19:50:24 -0400] other_guy: I installed onto Ubuntu 12.04 from Opscode's apt repo
[2012-06-08 19:50:40 -0400] resno: im using openvz and 12.04 isnt stable yet
[2012-06-08 19:50:42 -0400] itwasntandy: why do you want to install chef server yourself though?
[2012-06-08 19:50:52 -0400] itwasntandy: hosted chef makes much more sense for me at least
[2012-06-08 19:51:28 -0400] resno: im totally confused by chef and was hoping this would help me get it straight
[2012-06-08 19:51:40 -0400] resno: but its just making things worse
[2012-06-08 19:51:50 -0400] atomic-penguin: itwasntandy, the hosted platform might work well for you, but maybe it doesn't fit his needs... and thats OK
[2012-06-08 19:51:52 -0400] other_guy: itwasntandy, we went hosted due to cost
[2012-06-08 19:51:52 -0400] itwasntandy: what is confusing you?
[2012-06-08 19:52:02 -0400] other_guy: self-hosted rather
[2012-06-08 19:52:41 -0400] other_guy: $120 a month is 7 API servers and redundant load balancers for us
[2012-06-08 19:52:52 -0400] itwasntandy: atomic-penguin: sure, I realise that.. I ran my own chef servers for >2 years at my last place
[2012-06-08 19:53:15 -0400] resno: other_guy: this isnt productino so, spending tons of money is worthless
[2012-06-08 19:53:44 -0400] greenmoss: resno: you get 5 free nodes to start with, for hosted
[2012-06-08 19:53:49 -0400] greenmoss: this can be enough for a test drive
[2012-06-08 19:54:06 -0400] greenmoss: then if you like it you can set up the chef server
[2012-06-08 19:54:06 -0400] resno: greenmoss: did you see my original statement about chef?
[2012-06-08 19:54:14 -0400] resno: im totally confused by chef and was hoping this would help me get it straight
[2012-06-08 19:54:15 -0400] greenmoss: *looks*
[2012-06-08 19:54:20 -0400] greenmoss: oh that
[2012-06-08 19:54:24 -0400] resno: ya
[2012-06-08 19:54:36 -0400] greenmoss: in my experience, setting up chef server makes everything *more* confusing, not less
[2012-06-08 19:55:10 -0400] resno: what i dont get is using hosted chef, why you still need something of a server
[2012-06-08 19:55:19 -0400] itwasntandy: you don't
[2012-06-08 19:55:30 -0400] greenmoss: well, you really don't need a server of any kind, if you want to use chef-solo for instance
[2012-06-08 19:56:06 -0400] resno: i dont get why youd go chef-solo
[2012-06-08 19:56:16 -0400] itwasntandy: greenmoss: but without the server you don't have search and all the fun stuff
[2012-06-08 19:56:22 -0400] greenmoss: yeah, search is handy
[2012-06-08 19:56:30 -0400] greenmoss: and automatic synchronizing of cookbooks is too
[2012-06-08 19:56:51 -0400] greenmoss: but if you don't need either, I can totally see simplifying things by using only chef-solo
[2012-06-08 19:56:58 -0400] itwasntandy: resno: what makes you think you need a server with hosted chef?
[2012-06-08 19:57:16 -0400] resno: so comparing usinga premade cookbook and writing your own, is writing your own better for getting started?
[2012-06-08 19:57:26 -0400] itwasntandy: you still of course configured your nodes to talk to _a_ chef server. but its not one you host yourself. its normally just api.ean.com
[2012-06-08 19:57:34 -0400] itwasntandy: opps
[2012-06-08 19:57:36 -0400] itwasntandy: api.opscode.com
[2012-06-08 19:57:56 -0400] greenmoss: I'd use the premade "getting_started" cookbook, then maybe try a few modifications on that
[2012-06-08 19:58:13 -0400] resno: greenmoss: thats what i did
[2012-06-08 19:58:16 -0400] itwasntandy: resno: depends on how your best learn. some people can learn by reading, others by doing. I'm the latter.
[2012-06-08 19:59:08 -0400] greenmoss: resno: but it's not working, because the communication with the chef server is failing?
[2012-06-08 19:59:57 -0400] resno: greenmoss: when i used that, i was trying to use a pre-made cookbook but it failed for someodd reason
[2012-06-08 20:00:32 -0400] other_guy: resno, once you get it running I was able to make a fully automated setup and teardown platform running on Rackspace Cloud Servers that manages keepalived redundant HAProxy machines, our product API servers, RabbitMQ for our message bus, and a Riak cluster for data
[2012-06-08 20:00:40 -0400] other_guy: it took me 4 days
[2012-06-08 20:00:44 -0400] resno: oh, heres my confusion. the "workstation" and chef-client portion
[2012-06-08 20:01:02 -0400] other_guy: the worst part was having to make my own version of the knife-rackspace tool
[2012-06-08 20:01:20 -0400] other_guy: Because the default one is sorta useless for automation
[2012-06-08 20:01:38 -0400] itwasntandy: resno: workstation, is your laptop/desktop, where you want to use knife to upload stuff to the chef server from
[2012-06-08 20:01:45 -0400] itwasntandy: and do searches across nodes, roles or whatever
[2012-06-08 20:01:52 -0400] itwasntandy: chef-client is a node which runs chef.
[2012-06-08 20:03:07 -0400] resno: itwasntandy: so you can install the workstation where ever then?
[2012-06-08 20:03:22 -0400] resno: and then the client runs on the machine thats needing the cookbook
[2012-06-08 20:03:35 -0400] other_guy: resno, precisely
[2012-06-08 20:04:01 -0400] greenmoss: resno: yeah, the chef-client is anywhere that you actually run "chef-client", either as a daemon, or from cron (I do cron)
[2012-06-08 20:04:15 -0400] greenmoss: the workstation is where you run "knife"
[2012-06-08 20:04:37 -0400] resno: do you all typically run the workstation on your desktop/laptop or a server?
[2012-06-08 20:04:49 -0400] greenmoss: yes
[2012-06-08 20:04:53 -0400] other_guy: desktop/laptop
[2012-06-08 20:04:58 -0400] greenmoss: oh, that was an either/or
[2012-06-08 20:05:04 -0400] resno: greenmoss: :D
[2012-06-08 20:05:16 -0400] other_guy: you could run it from the same machine as chef-server, but I found that annoying
[2012-06-08 20:05:27 -0400] greenmoss: yes, usually on the workstation
[2012-06-08 20:05:43 -0400] greenmoss: I *can* also run it on my chef nodes, but usually don't
[2012-06-08 20:06:11 -0400] resno: ok, ill take another swing at it and sans the self hosted for now
[2012-06-08 20:06:47 -0400] greenmoss: so, my track record of getting this stuff working, was about 2 months for puppet, on and off, with varying levels of frustration
[2012-06-08 20:07:02 -0400] greenmoss: then when I decided to go with chef instead, another month of puzzling
[2012-06-08 20:07:08 -0400] greenmoss: I'm just slow I guess :)
[2012-06-08 20:10:03 -0400] split[|]brain: my problem right now is after years of using cfengine trying not to shove the square peg in the round hole
[2012-06-08 20:10:16 -0400] resno: greenmoss: heh, i got puppet installed and just quickly played with installing apps, but nothing serious. took me a day, then chef i cant get to that point, and ive been playing with it a week
[2012-06-08 20:12:30 -0400] greenmoss: resno: one thing to check is whether your client actually has any recipes or roles assigned
[2012-06-08 20:12:48 -0400] greenmoss: if not, and it just has an empty run-list, it will run but not do anything
[2012-06-08 20:13:09 -0400] greenmoss: that has bitten me a few times
[2012-06-08 20:13:17 -0400] resno: ah ok
[2012-06-08 20:14:09 -0400] atomic-penguin: other_guy, weird, it doesn't merge when I tried it.
[2012-06-08 20:14:24 -0400] other_guy: gah
[2012-06-08 20:14:57 -0400] atomic-penguin: I don't even see where they use that in recipe code though
[2012-06-08 20:14:58 -0400] other_guy: you got an app.config file with only one set of those values
[2012-06-08 20:15:14 -0400] other_guy: it's handled by the helper
[2012-06-08 20:15:38 -0400] other_guy: libraries/riak_template_helper.rb
[2012-06-08 20:15:55 -0400] other_guy: brought over from their riak-ruby-client, where it has caused me some grief as well
[2012-06-08 20:16:02 -0400] other_guy: It's too clever by half
[2012-06-08 20:16:31 -0400] atomic-penguin: other_guy, so what is different about your setup from mine?  I'm testing on rhel6 with omnibus
[2012-06-08 20:17:04 -0400] other_guy: The reason it exists is to deal with the transforming JSON/Ruby Hash into Erlang
[2012-06-08 20:17:13 -0400] atomic-penguin: so 1.9.2p180
[2012-06-08 20:17:30 -0400] other_guy: I'm testing on Ubuntu 12.04
[2012-06-08 20:18:12 -0400] other_guy: ruby 1.8.7 (2011-06-30 patchlevel 352)
[2012-06-08 20:18:16 -0400] atomic-penguin: other_guy, with omnibus or system ruby?
[2012-06-08 20:18:25 -0400] other_guy: system
[2012-06-08 20:18:59 -0400] atomic-penguin: Does 0.10.10 even support 1.8.7?
[2012-06-08 20:19:07 -0400] greenmoss: yes
[2012-06-08 20:19:28 -0400] greenmoss: I'm using chef 0.10.10 with 1.8.7
[2012-06-08 20:20:33 -0400] leifmadsen: seems to work for me too
[2012-06-08 20:20:35 -0400] leifmadsen: ubuntu 12.04
[2012-06-08 20:21:00 -0400] other_guy: atomic-penguin, I just tried it with all the rest of the stuff in my role stripped out, and it still fails, so I know it's not a role issue
[2012-06-08 20:21:02 -0400] atomic-penguin: the cookbook totally didn't work on rhel6, but the attributes didn't merge
[2012-06-08 20:21:39 -0400] rava: is it possible to define a node's environments and name in json so that when running chef-client -j node.json will apply them?
[2012-06-08 20:21:54 -0400] other_guy: atomic-penguin can you gist your resulting app.config?
[2012-06-08 20:22:19 -0400] rava: i've tried defining "name": "testnode" and "chef_environment": "test", but they are never applied unless I pass chef-client -N and -E repsectively during registration
[2012-06-08 20:22:48 -0400] atomic-penguin: wtf, it is in there though
[2012-06-08 20:23:25 -0400] atomic-penguin: other_guy, that has got to be a recipe bug, /methinks
[2012-06-08 20:24:37 -0400] other_guy: I can't figure out how that can be a recipe bug, because the helper doesn't re-create that value
[2012-06-08 20:25:05 -0400] other_guy: hmmm
[2012-06-08 20:25:06 -0400] atomic-penguin: https://gist.github.com/2897766
[2012-06-08 20:25:07 -0400] rava: i should clarify this is strictly for registering a node for the first time
[2012-06-08 20:25:27 -0400] other_guy: lol, you needed to pick Erlang as your language :-)
[2012-06-08 20:25:48 -0400] other_guy: It looks deceptively similar to JSON though
[2012-06-08 20:27:40 -0400] barefoot: how do you load a databag via shef? keeps telling me "ArgumentError: wrong number of arguments (0 for 1)" no matter what I feed it
[2012-06-08 20:28:06 -0400] other_guy: atomic-penguin, the good news is we're both crazy
[2012-06-08 20:28:31 -0400] atomic-penguin: other_guy, well, it doesn't show up in the chef data, just the overridden values
[2012-06-08 20:28:34 -0400] hippiehacker: if I'm using a script resource, and I want to debug it, how do I keep it from being deleting at the end of the chef-run?
[2012-06-08 20:28:48 -0400] atomic-penguin: But it is in the rendered template
[2012-06-08 20:29:28 -0400] atomic-penguin: other_guy, I would file an issue against the cookbook
[2012-06-08 20:29:53 -0400] other_guy: Thanks, I will.  I'm going to be in Basho's office next week with the guy that manages these, so I'll annoy him
[2012-06-08 20:30:14 -0400] other_guy: Thank you for at least verifying the behavior
[2012-06-08 20:30:32 -0400] rava: any ideas on if one can use a json file passed to chef-client during initial registration of a node to assign the node's name and chef_environment attributes?
[2012-06-08 20:30:35 -0400] atomic-penguin: I can leave the gist up for reference, if need be
[2012-06-08 20:30:56 -0400] yfeldblum: barefoot, stuff = Chef::DataBagItem.load("data_bag_name", "data_bag_item_name")
[2012-06-08 20:32:50 -0400] other_guy: that'd be great, thank you
[2012-06-08 20:32:55 -0400] ssd7: Ohai Chefs
[2012-06-08 20:33:51 -0400] atomic-penguin: beer-30, I'm out
[2012-06-08 20:34:02 -0400] barefoot: yfeldblum: ty, I assume "TypeError: can't convert nil into String" means it cant find the data_bag?
[2012-06-08 20:34:03 -0400] erikh: that man has the right idea
[2012-06-08 20:34:26 -0400] rava: ssd7: cute pun
[2012-06-08 20:36:01 -0400] ssd7: :)
[2012-06-08 20:36:02 -0400] yfeldblum: barefoot, doubtful
[2012-06-08 20:36:59 -0400] yfeldblum: barefoot, i'd expect an exception identifying that fact by name
[2012-06-08 20:37:22 -0400] barefoot: yfeldblum: me too, just new to chef/ruby so wasnt sure
[2012-06-08 20:47:13 -0400] werdnativ: anyone understand what's the difference between 'rubies' and 'user_rubies' here? https://github.com/fnichol/chef-rbenv#-rubies
[2012-06-08 20:49:28 -0400] greenmoss: *reads "rubies" as "rabies"*
[2012-06-08 20:56:14 -0400] werdnativ: yeah, rabid rubies...
[2012-06-08 21:21:15 -0400] thedeeno: does the gem_package resource install gems to the ruby that chef-client is running with?
[2012-06-08 21:45:51 -0400] dtrott: What determines when a new version of a cookbook is download to a host I have a new version of my cookbook but it doesn't seem to be downloading (I haven't been able to find any version restrictions for it) ?
[2012-06-08 22:20:56 -0400] JasonBox: So can anyone explain how attributes are inherited by nested roles?
[2012-06-08 22:39:21 -0400] dtrott: Found the issue the new version wasn't downloaded because it depended upon a missing version of a different cookbook, the fact that chef figured that out was rather impressive (the error message could use some work though ...)
[2012-06-08 22:50:31 -0400] aslan: hey guys when we upload a cookbook to chef does it have to be indexed by solr?
[2012-06-08 23:05:52 -0400] atomic-penguin: aslan, pretty sure yes.  But if you're curious as to the inner workings, take a look at this for an overview, http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-06-08 23:06:51 -0400] atomic-penguin: SOLR would have to index everything in Couch, would it not?
[2012-06-08 23:07:30 -0400] aslan: atomic-penguin: i know it does index the nodes and data bags... i was just not sure about the recipe itself
[2012-06-08 23:08:22 -0400] aslan: atomic-penguin: it might be a wrong assumption but why would you need to index your cookbooks? do we have logic that needs search and index of the cookbook itself?
[2012-06-08 23:14:59 -0400] atomic-penguin: aslan, I'm assuming the chef-client needs to be able to search for cookbook/recipe names and file checksums
[2012-06-08 23:16:44 -0400] yfeldblum: aslan, no
[2012-06-08 23:17:47 -0400] aslan: yfeldblum: so cookbooks go directly to couchdb and then loaded to the node? no solr/indexing is done on the cookbook itself?
[2012-06-08 23:18:35 -0400] yfeldblum: aslan, metadata is indexed
[2012-06-08 23:18:37 -0400] yfeldblum: aslan, https://github.com/opscode/chef/blob/master/chef/lib/chef/cookbook_version.rb#L107-116
[2012-06-08 23:19:39 -0400] aslan: yfeldblum: makes sense ... thanks
[2012-06-08 23:19:56 -0400] yfeldblum: aslan, but when i looked i didn't see contents being indexed ... they might be, worth another look, but i didn't see it
[2012-06-08 23:20:36 -0400] aslan: yfeldblum: i dont see a reason for it ... it makes sense to not index it
[2012-06-08 23:21:04 -0400] yfeldblum: aslan, that which makes sense, and that which is, are entirely unrelated
[2012-06-08 23:39:23 -0400] ed__: question for install gurus, any idea on how to fix solo boot strap for chef-server with epel fix from 6-5 to 6-7
[2012-06-08 23:39:40 -0400] ed__: i change the cookbook but it just reverts when i run the step to re-run chef-solo
[2012-06-08 23:40:06 -0400] ed__: this is for RedHat Linux 6 distro
[2012-06-08 23:40:45 -0400] ed__: same bug found here http://community.opscode.com/questions/111
[2012-06-08 23:51:04 -0400] JasonBox: So if I set a default_attribute in a role and then include that role in a top level role, should that attribute exist?

[2012-06-22 00:00:24 -0400] jessicab: hm.. yea, ive never seen that happen when ive used them, your commands sound correct
[2012-06-22 00:00:49 -0400] jessicab: the id is the only thing not encrypted, so it could be a few things though.. perhaps its not reading the key correctly?
[2012-06-22 00:01:53 -0400] jeremyolliver: yeah, maybe, I'll check the file permissions
[2012-06-22 00:02:40 -0400] jeremyolliver: This is the same silent failures I had when doing `knife node edit` and trying to change normal attributes. Successful save message, but nothing updated
[2012-06-22 00:05:14 -0400] jeremyolliver: Hmm, permissions are fine, didn't have executable, but adding that didn't help
[2012-06-22 00:05:38 -0400] jeremyolliver: Tried regenerating my secret file as well, looks like I initially had a greater than 512 length key
[2012-06-22 00:06:17 -0400] hoover_damm: is there something up with ubuntu and ec2 today?
[2012-06-22 00:06:22 -0400] hoover_damm: i'm getting bzip2 errors on apt-get update
[2012-06-22 00:06:26 -0400] hoover_damm: which is pretty freakish
[2012-06-22 00:06:38 -0400] hoover_damm: Get:1 http://us-east-1.ec2.archive.ubuntu.com natty/universe Translation-en_US [202 kB]
[2012-06-22 00:06:41 -0400] hoover_damm: 99% [1 Translation-en_US bzip2 0 B] [Waiting for headers] [Waiting for headers]bzip2: (stdin) is not a bzip2 file.
[2012-06-22 00:06:59 -0400] erikh: their mirrors are always spotty in my experience
[2012-06-22 00:07:03 -0400] erikh: the ec2 ones that is
[2012-06-22 00:07:10 -0400] jeremyolliver: that looks like a file transfer issue hoover_damm
[2012-06-22 00:07:19 -0400] jeremyolliver: 99%, with 0 B
[2012-06-22 00:07:21 -0400] hoover_damm: yeah i've got 5 instances showing it
[2012-06-22 00:07:25 -0400] hoover_damm: 4 working
[2012-06-22 00:07:26 -0400] hoover_damm: 5 failing
[2012-06-22 00:07:33 -0400] hoover_damm: i'm totally wtf'ing
[2012-06-22 00:07:42 -0400] erikh: that would be hte canonical definition of "spotty" :)
[2012-06-22 00:07:51 -0400] hoover_damm: erikh, cute pun
[2012-06-22 00:07:58 -0400] erikh: oh ha
[2012-06-22 00:08:08 -0400] hoover_damm: i'll host it on ec2 for the moment
[2012-06-22 00:08:15 -0400] hoover_damm: just for worse ideas
[2012-06-22 00:08:21 -0400] erikh: you could just plug in mirror.anl.gov probably
[2012-06-22 00:08:25 -0400] erikh: they're reliable.
[2012-06-22 00:08:34 -0400] jeremyolliver: that pun took me a while to work out
[2012-06-22 00:08:57 -0400] jeremyolliver: does anyone know what version of chef encrypted data bags were added? It seems recent to me
[2012-06-22 00:09:06 -0400] erikh: it's a 0.10.x feature
[2012-06-22 00:09:07 -0400] jeremyolliver: and I'm not having luck with it :(
[2012-06-22 00:09:10 -0400] erikh: not sure what 'x' is.
[2012-06-22 00:09:14 -0400] jeremyolliver: I thought so
[2012-06-22 00:09:34 -0400] jeremyolliver: I haven't used prior chef versions, I'm working on my first setup with it
[2012-06-22 00:10:45 -0400] jeremyolliver: oh hey 0.10.12 is out, time to look at the patch notes I guess
[2012-06-22 00:11:02 -0400] philwo: jeremyolliver: It's "10.12.0" now ;)
[2012-06-22 00:11:42 -0400] jeremyolliver: Ah, so it is, my brain completely missed that when reading
[2012-06-22 00:11:55 -0400] jeremyolliver: I suppose 0.10 does sound extremely alpha
[2012-06-22 00:12:03 -0400] philwo: Big jump, but now we're ahead of Puppet again
[2012-06-22 00:12:06 -0400] philwo: mwahaha
[2012-06-22 00:12:48 -0400] jeremyolliver: haha
[2012-06-22 00:13:14 -0400] jeremyolliver: oh what? Changelog in the github repo only has release notes up to 0.8.10
[2012-06-22 00:14:15 -0400] jeremyolliver: ah well it's on the blog
[2012-06-22 00:14:30 -0400] jeremyolliver: nice to see some semantic versioning up in here now though
[2012-06-22 00:17:10 -0400] _josh: is there a chef resource for unzipping a zip archive for *nix boxes? windows_zip looks like it's a windows specific to windows servers
[2012-06-22 00:18:41 -0400] jeremyolliver: _josh: most cookbooks I've seen just have a bash block to manually call tar or gunzip or whatever
[2012-06-22 00:18:56 -0400] chip-: _josh: look at the ark cookbook
[2012-06-22 00:19:33 -0400] chip-: _josh: it is AWESOME. It is designed to provide resources for that tedious pull archive, checksum, unzip it business.
[2012-06-22 00:19:48 -0400] jeremyolliver: Hmm, I don't see any mention of fixing bugs to do with encrypted data bags in the release notes
[2012-06-22 00:19:52 -0400] chip-: No more remote_file resources and all of that.
[2012-06-22 00:20:01 -0400] chip-: well, no more dealing directly anyway
[2012-06-22 00:20:31 -0400] jeremyolliver: I'd probably be asking for trouble trying to upgrade my chef install from 0.10.10 on the offchance it fixes a bug
[2012-06-22 00:20:41 -0400] _josh: chip-, cool, i'll check out ark, thanks!
[2012-06-22 00:25:57 -0400] rburton-: Anyone get knife working on mac?
[2012-06-22 00:27:32 -0400] hoover_damm: rburton-, that should be easy
[2012-06-22 00:27:47 -0400] chip-: Anybody doing much with chef spec in general?
[2012-06-22 00:27:52 -0400] rburton-: I can't get the following working http://wiki.opscode.com/display/chef/Knife
[2012-06-22 00:27:57 -0400] rburton-: knife isn't found
[2012-06-22 00:28:05 -0400] rburton-: -bash: knife: command not found
[2012-06-22 00:28:46 -0400] hoover_damm: you installed the chef gem?
[2012-06-22 00:28:51 -0400] rburton-: hm
[2012-06-22 00:28:59 -0400] rburton-: doing that ;)
[2012-06-22 00:29:05 -0400] chip-: That'd do it
[2012-06-22 00:30:20 -0400] chip-: I'm trying to write chefspec tests for one cookbook, and it's complaining about another cookbook completely when I try to run rspec. Very weird.
[2012-06-22 00:31:45 -0400] rburton-: nice worked
[2012-06-22 00:31:47 -0400] rburton-: thanks
[2012-06-22 00:32:50 -0400] cassarani: has anyone tried setting up a Ubuntu 12.04 machine as a Chef client with the apt packages?
[2012-06-22 00:32:59 -0400] cassarani: it says on the wiki they only support up to 11.10
[2012-06-22 00:35:20 -0400] jeremyolliver: Oh god what? so apparently I can't even create regular databags via knife data bag create
[2012-06-22 00:35:27 -0400] jeremyolliver: forget encrypted ones :(
[2012-06-22 00:35:43 -0400] hoover_damm: why's that?
[2012-06-22 00:45:44 -0400] jeremyolliver: not sure
[2012-06-22 00:46:19 -0400] jeremyolliver: but `knife data bag create <bagname> <itemname>` leaves me with an item with nothing but an id, despite having put other attributes in there
[2012-06-22 00:46:42 -0400] jeremyolliver: up till now I've been using `knife data bag from file`
[2012-06-22 00:46:46 -0400] hoover_damm: knife data bag create foobar
[2012-06-22 00:46:55 -0400] hoover_damm: to create the main bag
[2012-06-22 00:47:08 -0400] hoover_damm: and actually doing this interactively is :( not fun
[2012-06-22 00:47:23 -0400] hoover_damm: if you can do your databags in .rb or .json format and data bag foo from file bar
[2012-06-22 00:47:24 -0400] hoover_damm: will win
[2012-06-22 00:48:21 -0400] jeremyolliver: oh my god, I made it work
[2012-06-22 00:48:44 -0400] jeremyolliver: I used knife data bag from file in combination with the --secret-file option
[2012-06-22 00:48:48 -0400] hippiehacker: https://gist.github.com/2969564 # trying to figure out how to debug a possibly broken solr
[2012-06-22 00:48:49 -0400] jeremyolliver: and presto, success
[2012-06-22 00:49:11 -0400] jeremyolliver: I still have no idea why knife edit commands aren't working for me
[2012-06-22 00:49:15 -0400] hoover_damm: :)
[2012-06-22 00:49:25 -0400] jeremyolliver: perhaps the editor command is a bit wonky
[2012-06-22 00:50:23 -0400] hoover_damm: editing json in vim usually fails for me badly
[2012-06-22 00:51:19 -0400] jeremyolliver: I'm using sublime 2, but whatever's going on, someone thought it would be okay for a failed edit to show a success message
[2012-06-22 00:51:36 -0400] jeremyolliver: not sure if the culprit is the sublime or knife
[2012-06-22 00:51:38 -0400] hoover_damm: i use emacs
[2012-06-22 00:51:47 -0400] hoover_damm: knife is used to unix editors
[2012-06-22 00:51:54 -0400] chip-: jeremyolliver: Don't' get in the habit of editing things directly on the server.
[2012-06-22 00:51:58 -0400] chip-: I use subl as my editor too
[2012-06-22 00:52:00 -0400] hoover_damm: so it's possible that some gui editors will get in the way
[2012-06-22 00:52:04 -0400] hoover_damm: it's not likely
[2012-06-22 00:52:05 -0400] jeremyolliver: Yeah, I won't
[2012-06-22 00:52:06 -0400] jeremyolliver: I use everything from file
[2012-06-22 00:52:08 -0400] chip-: but you don't want to knife edit / create / etc foo
[2012-06-22 00:52:10 -0400] chip-: yeah.
[2012-06-22 00:52:28 -0400] chip-: but
[2012-06-22 00:52:30 -0400] chip-: that said
[2012-06-22 00:52:30 -0400] chip-: EDITOR=$HOME/bin/subl -w
[2012-06-22 00:52:35 -0400] chip-: that'll do ay
[2012-06-22 00:52:36 -0400] chip-: *ya
[2012-06-22 00:53:17 -0400] jeremyolliver: yeah, I think I haven't got the -w option set
[2012-06-22 00:53:32 -0400] jeremyolliver: I use that for my git editor variable
[2012-06-22 00:53:51 -0400] bertobull: hi guys, I've configured my cookbooks and roles
[2012-06-22 00:54:03 -0400] bertobull: now I want to provision my servers with knife
[2012-06-22 00:54:26 -0400] bertobull: I ran knife boostrap x.x.x.x
[2012-06-22 00:54:30 -0400] bertobull: that went well
[2012-06-22 00:54:40 -0400] bertobull: now I want to run 'chef-client'
[2012-06-22 00:54:51 -0400] bertobull: but how do I tell it which role to select?
[2012-06-22 00:54:59 -0400] jeremyolliver: bertobull: you've got to ssh on to the server and run chef-client manually after that
[2012-06-22 00:55:08 -0400] jeremyolliver: and it remembers the role you set in your bootstrap
[2012-06-22 00:55:16 -0400] jeremyolliver: general workflow is this:
[2012-06-22 00:55:46 -0400] jeremyolliver: knife bootstrap -E production -r 'role[database],role[app]' x.x.x.x
[2012-06-22 00:56:09 -0400] bertobull: ohh thanks jeremyolliver
[2012-06-22 00:56:14 -0400] jeremyolliver: then generally don't run bootstrap again, and afterwards just ssh and run chef-client
[2012-06-22 00:56:30 -0400] jeremyolliver: running bootstrap overrides *everything* you've setup generally
[2012-06-22 00:56:33 -0400] bertobull: one thing. I already ran bootstrap but I didn't mention a role
[2012-06-22 00:56:39 -0400] jeremyolliver: deletes the node info off the chef server
[2012-06-22 00:56:59 -0400] jeremyolliver: if you need to add more roles you can edit them on the chef-webui or by other means
[2012-06-22 00:57:07 -0400] jeremyolliver: just remember bootstrap will be destructive
[2012-06-22 00:57:08 -0400] bertobull: I just ran this: 'knife bootstrap x.x.x.x'
[2012-06-22 00:57:25 -0400] bertobull: so I should probably re-run it with your instructions
[2012-06-22 00:57:32 -0400] jeremyolliver: bertobull: you can run it again to set the role and environment, that's probably easiest
[2012-06-22 00:57:37 -0400] chip-: stay away from webui. Always work knife foo from file ./fooname.json
[2012-06-22 00:57:45 -0400] chip-: you will save yourself many scalability tears.
[2012-06-22 00:58:18 -0400] jeremyolliver: sure, chip- what about knife node from file overriding existing info about the node though?
[2012-06-22 00:58:25 -0400] jeremyolliver: e.g. recent runs under status
[2012-06-22 00:58:30 -0400] bertobull: jeremyolliver: +beer+
[2012-06-22 00:59:05 -0400] chip-: I don't use knife node to upload, just to archive.
[2012-06-22 00:59:27 -0400] jeremyolliver: chip-: so what's your strategy for adding new roles to a node?
[2012-06-22 00:59:28 -0400] chip-: but if you look at a nodename.json, it's not a full dump of node attributes.
[2012-06-22 00:59:55 -0400] chip-: er, I lied. I totally do that. Hurr.
[2012-06-22 01:00:00 -0400] jeremyolliver: haha
[2012-06-22 01:00:03 -0400] chip-: I was thinking 'directly editing node attributes'
[2012-06-22 01:00:22 -0400] hoover_damm: directly editing node attributes
[2012-06-22 01:00:23 -0400] hoover_damm: sigh
[2012-06-22 01:00:25 -0400] hoover_damm: that's so painful
[2012-06-22 01:00:27 -0400] jeremyolliver: Yeah, I make sure all config that exists on the chef server I also have in my chef-repo
[2012-06-22 01:00:39 -0400] chip-: But I don't generally change anything on a node except the run list
[2012-06-22 01:00:44 -0400] chip-: why would you directly edit anything else?
[2012-06-22 01:00:44 -0400] hoover_damm: I guess i've not had to do anything per node in a long time
[2012-06-22 01:00:46 -0400] hoover_damm: pure roles
[2012-06-22 01:00:51 -0400] chip-: right
[2012-06-22 01:01:00 -0400] jeremyolliver: but I get annoyed by `knife node from file` overriding
[2012-06-22 01:01:00 -0400] hoover_damm: gosh remember chef before roles?
[2012-06-22 01:01:03 -0400] hoover_damm: THAT WAS WILD!
[2012-06-22 01:01:29 -0400] jeremyolliver: so I have role composition going on
[2012-06-22 01:01:42 -0400] chip-: jeremyolliver: why wouldn't you just pull down the latest with knife node show -fjson node name, edit that, then re-up it?
[2012-06-22 01:02:00 -0400] chip-: oh man
[2012-06-22 01:02:05 -0400] jeremyolliver: top level roles for each kind of server I manage: e.g. role[web_app] which is composed of role[ruby] etc
[2012-06-22 01:02:08 -0400] chip-: I just did a "Why don't you just -"
[2012-06-22 01:02:10 -0400] chip-: my bad.
[2012-06-22 01:02:20 -0400] jeremyolliver: that way I can edit the  role[web_app] without worrying about it
[2012-06-22 01:02:39 -0400] jeremyolliver: it's working okay for me so far
[2012-06-22 01:03:20 -0400] jeremyolliver: I haven't got a wild set of varying nodes, just two identical uat and prod clusters that run the same app
[2012-06-22 01:03:21 -0400] chip-: roles for run lists, environments for attributes.
[2012-06-22 01:03:34 -0400] chip-: jeremyolliver: you used spark yet?
[2012-06-22 01:03:37 -0400] chip-: *spork
[2012-06-22 01:03:46 -0400] jeremyolliver: spork? no, what's that?
[2012-06-22 01:03:53 -0400] hoover_damm: jeremyolliver, set the variables on the chef environment?
[2012-06-22 01:03:57 -0400] chip-: knife plugin from the good people at etsy
[2012-06-22 01:04:05 -0400] jeremyolliver: okay will check it out
[2012-06-22 01:04:09 -0400] chip-: Lets you promote code through environments
[2012-06-22 01:04:14 -0400] hoover_damm: jeremyolliver, if your doing uat and production i'm hoping your putting those different attributes in the environment
[2012-06-22 01:04:16 -0400] jeremyolliver: Hmm, sounds nice
[2012-06-22 01:04:21 -0400] chip-: and force foodcritic before upload
[2012-06-22 01:04:26 -0400] chip-: and bump versions automatically
[2012-06-22 01:04:27 -0400] chip-: and and
[2012-06-22 01:04:29 -0400] chip-: it's good.
[2012-06-22 01:04:32 -0400] jeremyolliver: haha, I've got to get the damn thing up and running first
[2012-06-22 01:04:35 -0400] hoover_damm: jeremyolliver, I had a client i reworked everything into environment and role attributes
[2012-06-22 01:04:38 -0400] hoover_damm: to merge in
[2012-06-22 01:04:43 -0400] jeremyolliver: then I'll set about locking down cookbook versions per environment
[2012-06-22 01:04:50 -0400] hoover_damm: so if you bootup uat, you get uat password and gems
[2012-06-22 01:04:56 -0400] hoover_damm: bootup production you get production password and gems
[2012-06-22 01:05:10 -0400] jeremyolliver: I'll definitely have to look at spork then
[2012-06-22 01:05:21 -0400] hoover_damm: jeremyolliver, knife-essentials?
[2012-06-22 01:05:35 -0400] jeremyolliver: I am setting a bunch of attributes in roles at the mo
[2012-06-22 01:05:49 -0400] jeremyolliver: though only in default attributes
[2012-06-22 01:06:05 -0400] hoover_damm: time to expand that pattern
[2012-06-22 01:06:07 -0400] hoover_damm: move up to environments
[2012-06-22 01:06:09 -0400] jeremyolliver: assuming I'll just override them in environments when I'm upgrading stuff
[2012-06-22 01:06:21 -0400] hoover_damm: have some in both
[2012-06-22 01:06:28 -0400] jeremyolliver: I've got about half-half in each
[2012-06-22 01:06:34 -0400] hoover_damm: that's a good spot
[2012-06-22 01:08:35 -0400] jeremyolliver: spork has freezing cookbook versions? oh good, now I don't have to write a knife plugin for that
[2012-06-22 01:08:51 -0400] jeremyolliver: I think most of the stuff will be beyond what I need
[2012-06-22 01:08:58 -0400] yfeldblum: jeremyolliver, have you thought about a mechanism to enforce that chef-server has the exact cookbooks code as exists in a git branch?
[2012-06-22 01:09:17 -0400] jeremyolliver: I'm the only one setting up chef for this client and it's 12-14 servers
[2012-06-22 01:10:30 -0400] jeremyolliver: yfeldblum: I haven't been worried about that, I just noticed that you can lockdown cookbook versions per environment, but that doesn't stop you modifying a cook book and re-uploading with the same version number
[2012-06-22 01:12:10 -0400] yfeldblum: jeremyolliver, that's right
[2012-06-22 01:19:41 -0400] hoover_damm: spork expands what is already available
[2012-06-22 01:19:47 -0400] hoover_damm: it's got a lot of neat stuff on the side clearly
[2012-06-22 01:19:58 -0400] hoover_damm: but it's just enhancing what knife brings already
[2012-06-22 01:22:19 -0400] jeremyolliver: cool thanks
[2012-06-22 01:22:28 -0400] jeremyolliver: well I've got to go now, thanks for the help all
[2012-06-22 01:22:53 -0400] jeremyolliver: \quit
[2012-06-22 01:58:26 -0400] bertobull: I was able to install all but one of my runlist item
[2012-06-22 01:58:51 -0400] bertobull: I couldn't install ruby. I'm trying to install ruby through rbenv
[2012-06-22 01:59:13 -0400] bertobull: so I'm using the rbenv cookbook here: https://github.com/fnichol/chef-rbenv
[2012-06-22 01:59:44 -0400] bertobull: It says I just need to 'include' ruby_build: http://community.opscode.com/cookbooks/ruby_build
[2012-06-22 02:00:07 -0400] bertobull: so I just added the ruby_build cookbook to my runlist of recipes after rbenv
[2012-06-22 02:00:12 -0400] bertobull: but ruby was never installed
[2012-06-22 02:00:22 -0400] bertobull: rbenv was installed though
[2012-06-22 02:00:46 -0400] dboune: Do any of you now of a recipe example, or some doc for reference, for the situation where a service must actually stopped before a template action may occur, if it is actually necessary to occur?
[2012-06-22 02:01:31 -0400] dboune: seem to have lost a "be" up there
[2012-06-22 02:02:49 -0400] bertobull: anyone?
[2012-06-22 02:04:43 -0400] rabidpraxis: so, when I run chef client now with 10.12.0, I get about 90 defunct chef-client processes hanging out. Anyone know anything about this?
[2012-06-22 02:05:51 -0400] cheeseplus: rabidpraxis: what os?
[2012-06-22 02:06:59 -0400] rabidpraxis: cheeseplus: Ubuntu 11.10
[2012-06-22 02:07:37 -0400] rabidpraxis: Running ruby 1.9.3p194
[2012-06-22 02:07:57 -0400] hoover_damm: if you have 90 defuncts there's likely a reason
[2012-06-22 02:08:23 -0400] hoover_damm: stack trace of your chef client run in debug mode maybe useful.  But if you can determine what resource you use that is starting up multiple defuncts
[2012-06-22 02:08:26 -0400] hoover_damm: that would be helpful
[2012-06-22 02:08:39 -0400] rabidpraxis: ok
[2012-06-22 02:08:50 -0400] hoover_damm: basically they shouldn't happen normally and if they do, provide as much detail as you can
[2012-06-22 02:13:20 -0400] rabidpraxis: looks like all of the ohai plugins are throwing exceptions.
[2012-06-22 02:14:06 -0400] bertobull: guys, have anyone install ruby with rbenv using chef?
[2012-06-22 02:15:56 -0400] hoover_damm: rabidpraxis, they always do
[2012-06-22 02:16:06 -0400] hoover_damm: rabidpraxis, however sometimes ohai exceptions have caused regressions with defuncts
[2012-06-22 02:16:18 -0400] hoover_damm: rabidpraxis, exceptions should be because you lack java or python or something
[2012-06-22 02:18:44 -0400] rabidpraxis: hoover_damm: A good number of them are erroring on popen4
[2012-06-22 02:20:21 -0400] hoover_damm: unfortunately without more detail or context that doesn't help
[2012-06-22 02:24:12 -0400] rabidpraxis: Whats the best procedure for more context? gist of the debug log?
[2012-06-22 02:25:31 -0400] hoover_damm: yep
[2012-06-22 02:27:33 -0400] rabidpraxis: BAM! https://gist.github.com/2969853
[2012-06-22 02:28:21 -0400] hoover_damm: [2012-06-22T02:15:50+00:00] DEBUG: Plugin c threw exception #<Ohai::Exceptions::Exec: command /lib/libc.so.6 doesn't exist or is not in the PATH> /var/lib/gems/1.9.1/gems/ohai-6.14.0/lib/ohai/mixin/command.rb:341:in `rescue in popen4'
[2012-06-22 02:28:25 -0400] hoover_damm: huh?
[2012-06-22 02:29:46 -0400] hoover_damm: oh my lord
[2012-06-22 02:29:47 -0400] hoover_damm: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/c.rb#L40
[2012-06-22 02:29:49 -0400] hoover_damm: that's silly
[2012-06-22 02:30:06 -0400] hoover_damm: rabidpraxis, do you have /lib/libc.so.6?
[2012-06-22 02:30:09 -0400] hoover_damm: or is it a new name?
[2012-06-22 02:30:20 -0400] hoover_damm: wtf this is 11.10?
[2012-06-22 02:30:22 -0400] Randm: well, that's a first.
[2012-06-22 02:30:23 -0400] hoover_damm: this should be easy
[2012-06-22 02:30:44 -0400] hoover_damm: Randm, well that's pretty ugly
[2012-06-22 02:30:50 -0400] hoover_damm: that code will fail one day
[2012-06-22 02:30:55 -0400] Randm: yah
[2012-06-22 02:31:03 -0400] rabidpraxis: I dont
[2012-06-22 02:31:23 -0400] Randm: and apparently today is that day
[2012-06-22 02:31:35 -0400] Randm: rabidpraxis: ubuntu 11.10, x86, x64?
[2012-06-22 02:32:15 -0400] hoover_damm: heh yeah I got the OK to put up an apt mirror on EC2
[2012-06-22 02:32:20 -0400] hoover_damm: because the EC2 mirror is on the fritz
[2012-06-22 02:32:24 -0400] hoover_damm: that made me so /facepalm
[2012-06-22 02:32:27 -0400] rabidpraxis: Randm: x64
[2012-06-22 02:33:13 -0400] hoover_damm: he's right
[2012-06-22 02:33:18 -0400] hoover_damm: precise lacks /lib/libc*
[2012-06-22 02:33:21 -0400] hoover_damm: and /lib64/libc*
[2012-06-22 02:33:32 -0400] Randm: durr..?
[2012-06-22 02:33:44 -0400] hoover_damm: wow
[2012-06-22 02:33:51 -0400] Randm: x64 removed ld.so.X right too?
[2012-06-22 02:33:59 -0400] hoover_damm: nope
[2012-06-22 02:34:01 -0400] hoover_damm: it's moved
[2012-06-22 02:34:09 -0400] Randm: I thought that got removed for some reason
[2012-06-22 02:34:11 -0400] hoover_damm:  /lib/x86_64-linux-gnu/libc.so.6
[2012-06-22 02:34:15 -0400] Randm: hmm
[2012-06-22 02:34:26 -0400] hoover_damm: rabidpraxis, please file a ticket on that libc thing if you could
[2012-06-22 02:34:30 -0400] hoover_damm: rabidpraxis, that's totally a :o
[2012-06-22 02:34:39 -0400] rabidpraxis: sure.
[2012-06-22 02:34:41 -0400] hoover_damm: rabidpraxis, btw where did you get your p194 from?
[2012-06-22 02:34:43 -0400] hoover_damm: brightbox?
[2012-06-22 02:34:45 -0400] rabidpraxis: yeah
[2012-06-22 02:34:56 -0400] hoover_damm: cool
[2012-06-22 02:37:36 -0400] hoover_damm: rabidpraxis, out of curiosiity you don't get new defuncts by just running ohai do you?
[2012-06-22 02:41:27 -0400] rabidpraxis: hoover_damm: actually, I do
[2012-06-22 02:41:28 -0400] hoover_damm: rabidpraxis, short of the ohai plugins that you wrote it looks pretty clean
[2012-06-22 02:41:39 -0400] hoover_damm: rabidpraxis, if you remove your custom ohai plugins, and run ohai
[2012-06-22 02:41:41 -0400] hoover_damm: does it still fail?
[2012-06-22 02:48:25 -0400] rabidpraxis: hoover_damm: pardon my ignorance, but Im not sure where those are located
[2012-06-22 02:49:37 -0400] rabidpraxis: I see one at /etc/chef/ohai_plugins
[2012-06-22 02:49:50 -0400] hoover_damm: that's where it is
[2012-06-22 02:50:00 -0400] hoover_damm: ironic as this is your plugin likely
[2012-06-22 02:50:03 -0400] hoover_damm: ;)
[2012-06-22 02:50:45 -0400] rabidpraxis: the only plugin I have in the ohai_plugins dir is nginx
[2012-06-22 02:51:08 -0400] hoover_damm: so let's take it out
[2012-06-22 02:51:58 -0400] hoover_damm: as it's likely the nginx plugin is at fault
[2012-06-22 02:54:09 -0400] rabidpraxis: hoover_damm: humm.. similar results with nginx plugin ngnixed
[2012-06-22 02:56:18 -0400] hoover_damm: weird
[2012-06-22 02:56:25 -0400] hoover_damm: fwiw i totally can't reproduce your error
[2012-06-22 02:56:35 -0400] hoover_damm: 99.997% sure it's your custom plugins
[2012-06-22 02:58:21 -0400] rabidpraxis: I have not created any custom ohai plugins, if that is what you are referring to
[2012-06-22 02:59:06 -0400] rabidpraxis: I am assuming that these plugins that it is unable to load are located within the ohai gem
[2012-06-22 03:01:27 -0400] thedeeno: do bluepill and runit cover the same space?
[2012-06-22 03:02:17 -0400] thedeeno: iow, should I pick one or the other for service management?
[2012-06-22 03:06:09 -0400] hoover_damm: rabidpraxis, your gist shows it being installed
[2012-06-22 03:06:19 -0400] hoover_damm: rabidpraxis, sorry to say it but it came from  your cookbooks
[2012-06-22 03:07:00 -0400] hoover_damm: rabidpraxis, https://gist.github.com/2969853 around like 640
[2012-06-22 03:07:17 -0400] hoover_damm: comes from your nginx cookbook
[2012-06-22 03:07:35 -0400] hoover_damm: rabidpraxis, or the regular opscode one
[2012-06-22 03:07:43 -0400] hoover_damm: rabidpraxis, i didn't realize opscode added that mybad
[2012-06-22 03:09:16 -0400] rabidpraxis: hoover_damm: it happens during a regular ohai call as well. That should isolate it to an issue with ohai, right?
[2012-06-22 03:09:54 -0400] hoover_damm: ohai and the ohai plugins
[2012-06-22 03:09:54 -0400] hoover_damm: yep
[2012-06-22 03:10:02 -0400] rburton-: In order to use chef, I'll need a chef server?
[2012-06-22 03:10:17 -0400] thedeeno: rburton-: no, you can use chef-solo
[2012-06-22 03:10:29 -0400] rburton-: Okay, I'll have to read up on that.
[2012-06-22 03:11:19 -0400] hoover_damm: rburton-, or use hosted?
[2012-06-22 03:11:39 -0400] rburton-: Until I start making a profit, that might be an issue :)
[2012-06-22 03:11:48 -0400] hoover_damm: how many nodes?
[2012-06-22 03:12:08 -0400] rburton-: Iniitally, just two
[2012-06-22 03:12:19 -0400] hoover_damm: hosted
[2012-06-22 03:12:22 -0400] hoover_damm: it's free for 5 nodes
[2012-06-22 03:12:22 -0400] hoover_damm: ;)
[2012-06-22 03:12:30 -0400] rburton-: Hmm makes sense
[2012-06-22 03:12:36 -0400] thedeeno: hosted has an easy start up guide which helped me out a bunch too, fwiw
[2012-06-22 03:12:59 -0400] hoover_damm: yep
[2012-06-22 03:13:56 -0400] rburton-: Right now I use engineyard. So I'll just manage a few nodes using chef
[2012-06-22 03:15:46 -0400] hoover_damm: oh wow moving from old-chef solo
[2012-06-22 03:15:48 -0400] hoover_damm: to modern chef
[2012-06-22 03:15:50 -0400] hoover_damm: that's quite a step up
[2012-06-22 03:17:05 -0400] hoover_damm: well good luck :)
[2012-06-22 03:17:19 -0400] hoover_damm: you'll find a plethora of goods out here
[2012-06-22 03:17:32 -0400] hoover_damm: and the irc channel here is a great help just as the mailing lists.
[2012-06-22 03:17:34 -0400] hoover_damm: bawt, lists?
[2012-06-22 03:17:34 -0400] bawt: lists is http://lists.opscode.com
[2012-06-22 03:17:45 -0400] hoover_damm: have a good day rburton- :)
[2012-06-22 03:17:56 -0400] hoover_damm: and have fun
[2012-06-22 03:17:56 -0400] rburton-: :) thanks
[2012-06-22 03:20:11 -0400] thedeeno: are bluepill and runit often used together?
[2012-06-22 03:20:25 -0400] thedeeno: I see them scattered across many cookbooks
[2012-06-22 03:22:11 -0400] Randm: I think that's just people compensating for the different systems out there
[2012-06-22 03:22:50 -0400] thedeeno: are the designed to do the same thing? I'm still trying to understand process management
[2012-06-22 03:22:55 -0400] thedeeno: they*
[2012-06-22 03:24:14 -0400] Randm: https://github.com/arya/bluepill
[2012-06-22 03:24:21 -0400] Randm: http://smarden.org/runit/
[2012-06-22 03:24:25 -0400] Randm: basically yeah, process supervision
[2012-06-22 03:24:32 -0400] Randm: it'll restart the process if it crashes
[2012-06-22 03:24:49 -0400] thedeeno: yeah, i've read through both of those links, i'm just a bit confused if they overlap or not
[2012-06-22 03:24:54 -0400] thedeeno: it seems like they do
[2012-06-22 03:25:04 -0400] thedeeno: but then I see both in these cookbooks
[2012-06-22 03:25:29 -0400] thedeeno: but maybe you're right, just accounting for not being able to use bluepill everywhere or something
[2012-06-22 04:07:20 -0400] jtimberman: thedeeno: runit > bluepill imo
[2012-06-22 04:07:32 -0400] jtimberman: because its written in C instead of Ruby.
[2012-06-22 04:07:41 -0400] jtimberman: (and I've been using it forever.)
[2012-06-22 04:07:43 -0400] jtimberman: :)
[2012-06-22 04:08:05 -0400] miah: <3 runit
[2012-06-22 04:12:43 -0400] erikh: what should I do with an extra, early 2010 or so mac mini?
[2012-06-22 04:24:26 -0400] miah: build a tardis
[2012-06-22 04:29:27 -0400] coderanger: erikh: XBMC
[2012-06-22 04:31:50 -0400] cheeseplus: erikh: Plex
[2012-06-22 04:32:14 -0400] cheeseplus: xbmc based but with OSX love and a slick iPhone/iPad/Android client
[2012-06-22 04:32:43 -0400] erikh: actually, I have plex on the roku now
[2012-06-22 04:32:50 -0400] erikh: and the server is a linux box with lots and lots of storage
[2012-06-22 04:32:56 -0400] erikh: which is why I'm trying to find a new use for the mini :)
[2012-06-22 04:32:59 -0400] cheeseplus: thats the way to do it
[2012-06-22 04:33:52 -0400] cheeseplus: after I got rid of the original xbox (modded with XBMC) it's been minis for HTPC
[2012-06-22 04:34:05 -0400] erikh: yeah, they're good machines for that
[2012-06-22 04:34:11 -0400] miah: the more i use redhat, the more i see many cookbooks are not tested / developed for it at all
[2012-06-22 04:34:12 -0400] erikh: just the roku does netflix and hulu a lot better
[2012-06-22 04:34:31 -0400] cheeseplus: miah: haha, yea I've noticed that as well
[2012-06-22 04:34:34 -0400] erikh: miah: that's the story I've been told, yeah
[2012-06-22 04:34:36 -0400] cheeseplus: coming from centos shops
[2012-06-22 04:34:44 -0400] erikh: lots of in-house rewriting
[2012-06-22 04:34:45 -0400] miah: i am fixing some things
[2012-06-22 04:34:50 -0400] miah: and pushing upstream
[2012-06-22 04:35:03 -0400] miah: https://github.com/miah/percona-install
[2012-06-22 04:35:03 -0400] cheeseplus: miah: good, I'll be doing the same for smartos stuff methinks
[2012-06-22 04:35:05 -0400] miah: please review
[2012-06-22 04:35:43 -0400] miah: i need to test the changes on debian and clean up the documentation still
[2012-06-22 04:37:03 -0400] miah: i'm beating on nginx and varnish right now.. the varnish cookbook doesn't support redhat at all and nginx isn't idempotent
[2012-06-22 04:37:23 -0400] cheeseplus: miah: I'll give it a since I have some centos vms just chilling
[2012-06-22 04:37:30 -0400] cheeseplus: it a look*
[2012-06-22 04:37:36 -0400] miah: i use vagrant quite a bit
[2012-06-22 04:38:23 -0400] cheeseplus: work was kind enough to get me an optiplex 990 (3.4Ghz 8 core / 16GB) that I'm running smartos on
[2012-06-22 04:38:37 -0400] miah: ah cool
[2012-06-22 04:38:38 -0400] cheeseplus: it has all the vms
[2012-06-22 04:39:00 -0400] cheeseplus: that way I can use chef-server, just to make sure things don't get weird
[2012-06-22 04:39:06 -0400] miah: i am going to build a amd lowpower for home dev soon
[2012-06-22 04:40:27 -0400] miah: but i do have like... too many computers already.
[2012-06-22 04:42:33 -0400] cheeseplus: I got rid of a lot of "junk" when I was married
[2012-06-22 04:42:47 -0400] miah: ya. all of my stuff is fairly recent
[2012-06-22 04:42:53 -0400] cheeseplus: slowly amassing an arsenal again
[2012-06-22 04:43:21 -0400] miah: i have an arsenal of macbooks and lowpower linux devices
[2012-06-22 04:43:44 -0400] cheeseplus: is there a standard/best practice way to get chef to handle the questions when upgrading a package?
[2012-06-22 04:43:58 -0400] miah: questions?
[2012-06-22 04:44:20 -0400] cheeseplus: right now it's just two MBPs, mac mini, dell d600 (old), and the optiplex 990
[2012-06-22 04:44:21 -0400] miah: like, yum wants you to say yes ?
[2012-06-22 04:44:32 -0400] cheeseplus: miah: debian in my case but yea
[2012-06-22 04:44:48 -0400] miah: ah. most of those things have a argument you can pass that says 'yes'
[2012-06-22 04:45:00 -0400] miah: i believe its 'yum -y foo'
[2012-06-22 04:45:35 -0400] miah: you can also supply preseed configs for debian stuff
[2012-06-22 04:45:36 -0400] erikh: dpkg has a pre-seeding system where you can pre-configure packages.
[2012-06-22 04:45:42 -0400] erikh: check out the mysql cookbook, it does that.
[2012-06-22 04:45:49 -0400] cheeseplus: erikh: will do
[2012-06-22 04:46:02 -0400] cheeseplus: miah: yea, knew that part just wasn't sure if chef had already abstracted that
[2012-06-22 04:46:08 -0400] erikh: note you'll probably end up pulling apart your packages to make use of that feature
[2012-06-22 04:46:29 -0400] miah: cheeseplus: ya. it has quite a bit of that stuff
[2012-06-22 04:46:37 -0400] miah: the package providers are fairly complex
[2012-06-22 04:46:43 -0400] miah: the yum provider is like.. 1k lines :/
[2012-06-22 04:46:54 -0400] cheeseplus: erikh: yea that is what I'd like to avoid
[2012-06-22 04:47:29 -0400] erikh: yeah, there are alternative packagers like fpm, but if you want to stay in the debian ecosystem....
[2012-06-22 04:48:36 -0400] miah: <3 fpm
[2012-06-22 04:48:42 -0400] miah: THANKS JORDAN
[2012-06-22 04:58:12 -0400] Mithrandir: I dislike the preseed in a chef context, since it's not really idempotent
[2012-06-22 04:58:27 -0400] Mithrandir: it only applies on install/upgrade, not when it's running
[2012-06-22 04:59:36 -0400] miah: Mithrandir: indeed
[2012-06-22 05:00:09 -0400] cheeseplus: so just catch that an existing package is installed and if so use the "-y" option?
[2012-06-22 05:01:13 -0400] miah: i think i need bed. gnite
[2012-06-22 06:22:13 -0400] BryanWB_: ohai chefs!
[2012-06-22 06:22:27 -0400] c_t: ohai BryanWB_
[2012-06-22 06:22:57 -0400] BryanWB_: ohai c_t
[2012-06-22 06:23:21 -0400] lflux: ohai
[2012-06-22 06:23:33 -0400] lflux: downloaded a bunch of FoodFight podcasts for my flight to SF
[2012-06-22 06:25:41 -0400] BryanWB_: lflux: nice! i hope u don't hate it
[2012-06-22 06:26:19 -0400] lflux: I'll let you know later :)
[2012-06-22 06:26:44 -0400] BryanWB_: the first 5 have pretty bad auido quality as I made n00b recording mistakes
[2012-06-22 06:27:05 -0400] lflux: think I grabbed the latest 3 or so
[2012-06-22 06:27:38 -0400] BryanWB_: those are good, tho Etsy episode prolly my favorite
[2012-06-22 06:28:05 -0400] lflux: Etsy seem awesome
[2012-06-22 06:28:17 -0400] lflux: from what I've seen on the tubes
[2012-06-22 06:29:17 -0400] lflux: I'm going to velocity, 12+ hour flights across the world. overslept and grabbed literally the first book I saw at home for reading material. Turned out to be John Allspaw's book on Capacity Planning
[2012-06-22 06:31:50 -0400] Mithrandir:  kindle
[2012-06-22 06:32:58 -0400] lflux: got kindle app on ipad, but can't use it before plane is airborne
[2012-06-22 06:33:04 -0400] lflux: ergo I still need a backup deadtree
[2012-06-22 06:35:09 -0400] Mithrandir: I'm talking about a real kindle
[2012-06-22 06:35:13 -0400] Mithrandir: not a silly app.
[2012-06-22 06:36:05 -0400] lflux: still can't use the real kindle before airborne since it's an electronic device
[2012-06-22 06:36:15 -0400] lflux: at least in europe they count it as such, dunno about us
[2012-06-22 06:36:23 -0400] Mithrandir: IME, they don't care
[2012-06-22 06:37:10 -0400] lflux: the SAS cabin crew are kinda strict about stuff like that :(
[2012-06-22 06:37:20 -0400] Mithrandir: not IME.
[2012-06-22 06:37:37 -0400] Mithrandir: maybe the swedish crews are stricter, dunno.
[2012-06-22 06:37:40 -0400] royh: Norwegian are just crazy..
[2012-06-22 06:38:29 -0400] royh: i was wearing my headphones (w/o music playing or anything) and got asked to take them off nonetheless..
[2012-06-22 06:38:31 -0400] lflux: might grab one while in the US, resolution on those is great
[2012-06-22 06:38:41 -0400] royh: and it's not backlit
[2012-06-22 06:39:11 -0400] royh: i read a lot on my ipad, but from what i can tell the kindle is a totally different experience
[2012-06-22 06:39:29 -0400] royh: i haven't actually used one, just seen people use it on the metro and stuff like that
[2012-06-22 06:39:56 -0400] lflux: ipads are tiring to read on
[2012-06-22 06:40:29 -0400] Mithrandir: kindles aren't
[2012-06-22 06:40:32 -0400] royh: if you boost the brightness to max it's pretty decent (at least ipad 3), but then the battery dies out fast
[2012-06-22 06:41:01 -0400] Mithrandir: also, excellent battery life and with 3g, you can just grab books when the fancy strikes you.
[2012-06-22 06:41:10 -0400] royh: anywhere?
[2012-06-22 06:41:11 -0400] bawt: anywhere is fine
[2012-06-22 06:41:18 -0400] Mithrandir: bawt: forget anywhere.
[2012-06-22 06:41:18 -0400] bawt: couldn't find keyword anywhere.
[2012-06-22 06:41:22 -0400] royh: i mean, in any country?
[2012-06-22 06:41:23 -0400] Mithrandir: bawt: forget anywhere
[2012-06-22 06:41:23 -0400] bawt: okay
[2012-06-22 06:41:44 -0400] Mithrandir: royh: yes.  You need GSM coverage or better, of course, but there are few places that don't have that nowadays.
[2012-06-22 06:41:58 -0400] royh: that's nice
[2012-06-22 06:42:11 -0400] royh: wonder if they're gonna make a color one soon
[2012-06-22 06:42:15 -0400] Mithrandir: I've picked up books in between getting on the plane and they closing the door, and I picked up some books when I was in .th earlier this year.
[2012-06-22 06:42:24 -0400] Mithrandir: eink and colour don't mix, it seems.
[2012-06-22 06:42:34 -0400] royh: that's too bad :(
[2012-06-22 06:42:40 -0400] lflux: Mithrandir: that sounds like a hilarious recipe to going broke fast
[2012-06-22 06:42:58 -0400] lflux: "ooh I need this book! and this one! and another!"
[2012-06-22 06:43:10 -0400] Mithrandir: lflux: it doesn't have infinite storage. :-)  And yeah, it requires you to exercise a bit of self-control.
[2012-06-22 06:43:30 -0400] Mithrandir: but then, lots of books are cheap or free; there are not many books I've bought that are more than $10
[2012-06-22 06:43:59 -0400] royh: yeah, and if you actually read them it's not like a movie. my burnthrough rate on those are a lot higher :P
[2012-06-22 06:44:57 -0400] Mithrandir: I'm 3/4 through the first four books of the Ice & Fire series (Game of Thrones, etc), I think I paid around $12 for all of them and it's taken me quite some time to get through them.
[2012-06-22 06:45:21 -0400] Mithrandir: in terms of entertainment/, it's a high number.
[2012-06-22 06:45:52 -0400] royh: i don't really read fiction
[2012-06-22 06:46:53 -0400] dstufft: ASOIAF is *excellent*
[2012-06-22 06:47:08 -0400] Mithrandir: dstufft: it tends toward long in places.
[2012-06-22 06:47:15 -0400] dstufft: it does
[2012-06-22 06:47:20 -0400] lflux: I'm still waiting on last Wheel of Time before I pick up another epic fantasy series that isn't finished
[2012-06-22 06:47:20 -0400] dstufft: but still excellent ;)
[2012-06-22 06:47:28 -0400] lflux: been burned once by that.
[2012-06-22 06:47:36 -0400] Mithrandir: and I'm not sure I'm a fan of the "kill all the main characters" approach. :-P
[2012-06-22 06:47:48 -0400] dstufft: Mithrandir: you've hit the red wedding? don't wanna spoiler but that was one of the most gut wrenching chapters i've ever read
[2012-06-22 06:47:59 -0400] Mithrandir: scairbus: I have
[2012-06-22 06:48:04 -0400] dstufft: and I reread that like 4 times jsut to fully grasp it all
[2012-06-22 06:48:07 -0400] Mithrandir: scairbus: oops, tab error, sorry
[2012-06-22 06:48:32 -0400] Mithrandir: dstufft: let's not spoil, but yeah, it's a harsh world in there and gets harsher.
[2012-06-22 06:51:50 -0400] lflux: cya all att velocity, time to board.
[2012-06-22 06:54:33 -0400] Mithrandir: enjoy
[2012-06-22 06:54:37 -0400] Mithrandir: though I won't be there this year
[2012-06-22 07:36:24 -0400] pehlert: Phew.. In my recipes, can I somehow query all nodes and their respective arguments that have a specific role in their runlist?
[2012-06-22 07:36:49 -0400] coderanger: pehlert: search(:node, 'roles:foo')
[2012-06-22 07:37:15 -0400] pehlert: Whoa, that's easy. Thanks a lot
[2012-06-22 07:37:35 -0400] coderanger: :)
[2012-06-22 08:18:58 -0400] BryanWB_: does 'depends' in metadata.rb cause all the attributes in the depended upon cookbook to be loaded?
[2012-06-22 08:19:16 -0400] BryanWB_: or must u call include_recipe for the attributes to be loaded?
[2012-06-22 08:20:52 -0400] BryanWB_: they are!
[2012-06-22 08:45:06 -0400] tony_: anybody here?
[2012-06-22 08:45:22 -0400] tony_: I'm taking a look at the new nginx cookbook
[2012-06-22 08:45:38 -0400] tony_: the source recipe in particular
[2012-06-22 08:46:15 -0400] tony_: line 80 has the following:   cwd ::File.dirname(src_filepath)
[2012-06-22 08:46:36 -0400] tony_: does anybody know where that points to
[2012-06-22 08:48:54 -0400] BryanWB_: tony_: u need pry
[2012-06-22 08:49:03 -0400] BryanWB_: gem install pry pry-nav pry-doc
[2012-06-22 08:49:23 -0400] BryanWB_: at line 80, insert  require 'pry'; binding.pry
[2012-06-22 08:49:30 -0400] BryanWB_: will give u full debugger
[2012-06-22 08:51:16 -0400] tony_: oh cool, i'll try that
[2012-06-22 08:51:44 -0400] BryanWB_: oops that in a recipe?
[2012-06-22 08:51:55 -0400] BryanWB_: so ruby_block b4 that resource
[2012-06-22 08:52:19 -0400] tony_: ok, now i lost you a bit
[2012-06-22 08:52:22 -0400] BryanWB_: ruby_block "foo" do  ; block  require ....; binding.pry; end end
[2012-06-22 08:52:51 -0400] tony_: all of that should be before the bash script block?
[2012-06-22 08:56:41 -0400] BryanWB_: y
[2012-06-22 08:57:55 -0400] tony_: no, that should wrap around the bash block
[2012-06-22 09:15:13 -0400] jerem`: I get a problem with cookbook_file ressource
[2012-06-22 09:18:44 -0400] jerem`: here my error :http://ziirish.info/y/9-2JK
[2012-06-22 09:24:42 -0400] pehlert: Why doesn't chef automatically install missing ruby gems (such as mysql for the mysql cookbook?!)
[2012-06-22 09:25:29 -0400] superbaloo: because it wont do anything unless you ask him to
[2012-06-22 09:25:56 -0400] jerem`: I get an error with a cookbook_file ressources in my recipe : http://ziirish.info/y/9-2JK
[2012-06-22 09:26:01 -0400] pehlert: So I have to add my own recipe in a separate cookbook to do that? That feels a bit unclean to me
[2012-06-22 09:26:56 -0400] ashb: pehlert: it does: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/client.rb#L70
[2012-06-22 09:27:59 -0400] ashb: jerem`: my guess is the problem *might* be chef-solo
[2012-06-22 09:28:29 -0400] ashb: though that doesn't seem likely
[2012-06-22 09:29:06 -0400] jerem`: ashb: my chef version is : 0.8.16
[2012-06-22 09:29:16 -0400] ashb: okay then the answer is that is too old
[2012-06-22 09:29:53 -0400] ashb: don't use the debian(?) provided chef packages. they are hideously out of date
[2012-06-22 09:30:20 -0400] jerem`: yes i'm under debian
[2012-06-22 09:30:52 -0400] ashb: http://wiki.opscode.com/display/chef/Installing+Chef+Client+on+Ubuntu+or+Debian
[2012-06-22 09:30:53 -0400] pehlert: ashb: That's weird, I just got "LoadError: no such file to load -- mysql"
[2012-06-22 09:30:54 -0400] jerem`: ashb: you really think that Chef 0.8.16 is too old for this cookbook_file ressource ?
[2012-06-22 09:31:13 -0400] ashb: jerem`: absolutely. its *at least* 2 years old
[2012-06-22 09:31:22 -0400] jerem`: thanks a lot
[2012-06-22 09:31:33 -0400] pehlert: ashb: Also: "Missing gem 'mysql'"
[2012-06-22 09:31:41 -0400] ashb: pehlert: are you running chef with the system ruby?
[2012-06-22 09:31:56 -0400] ashb: pehlert: apt-cache policy libmysql-ruby says what?
[2012-06-22 09:32:28 -0400] pehlert: ashb: Yes.. But apparently it installed libmysql-ruby.. INFO: package[libmysql-ruby] installed version 2.8.2+gem2deb-1build1.. I had that problem before with another gem afair
[2012-06-22 09:33:16 -0400] pehlert: apt-cache says installed
[2012-06-22 09:33:33 -0400] ashb: $ gem which mysql
[2012-06-22 09:33:40 -0400] ashb: for me it says /usr/lib/ruby/1.8/i486-linux/mysql.so
[2012-06-22 09:34:14 -0400] pehlert: ashb: I don't have rubygems on that system.. Could that be the problem?
[2012-06-22 09:35:35 -0400] pehlert: Nope, I still get the error.. gem says /usr/lib/ruby/vendor_ruby/1.8/x86_64-linux/mysql.so
[2012-06-22 09:37:40 -0400] ashb: pehlert: not sure - my knowledge of how rubygems works is basically non-existent
[2012-06-22 09:39:53 -0400] pehlert: irb(main):001:0> require 'mysql'
[2012-06-22 09:39:54 -0400] pehlert: => true
[2012-06-22 09:39:56 -0400] pehlert: I don't get this
[2012-06-22 09:47:56 -0400] pehlert: Now that's what I call an annoying bug!
[2012-06-22 09:49:49 -0400] pehlert: Ahh, chef seems to use an entirely different ruby here that seems to have installed in the bootstrapping process
[2012-06-22 09:50:01 -0400] pehlert: from /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'
[2012-06-22 09:54:15 -0400] pehlert: Where can I find knife's source code?
[2012-06-22 09:55:57 -0400] jerem`: ashb: I'm using Linux Mint Debian based. When adding repo and update my apt cache the opscode repo is ignored
[2012-06-22 09:56:18 -0400] jerem`: I followed the wiki.opscode.com
[2012-06-22 10:04:47 -0400] jerem`: it's ok ! Mint Debian based is Debian wheezy
[2012-06-22 10:09:18 -0400] macros: pehlert: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.12.0/lib/chef/knife*
[2012-06-22 10:13:27 -0400] jerem`: ashb: thanks it was the chef version ;)
[2012-06-22 10:13:32 -0400] jerem`: problem solved
[2012-06-22 10:54:55 -0400] agosse: in a recipe, what's the difference between node[:foo] and node["foo"]?
[2012-06-22 10:56:03 -0400] specialsauce: agosse: http://www.robertsosinski.com/2009/01/11/the-difference-between-ruby-symbols-and-strings/
[2012-06-22 10:56:34 -0400] agosse: ta
[2012-06-22 10:57:11 -0400] specialsauce: np
[2012-06-22 10:58:03 -0400] agosse: specialsauce: how about as they relate to attributes that I'm setting in a json?
[2012-06-22 11:00:59 -0400] specialsauce: agosse: you can use them interchangeably for most purposes. I beleive foodcritic lint check likes you to use strings ratehr than symbols for that purpose as best practice
[2012-06-22 11:01:01 -0400] workmad3: agosse: all node attributes in chef are stored in a 'Mash' which basically allows indifferent access
[2012-06-22 11:02:27 -0400] agosse: workmad3: ok - that's kind of what I thought - since the docs aren't really consistent, and I'm trying to figure out why some attribute doesn't seem to be getting set
[2012-06-22 11:03:25 -0400] agosse: one problem seemed to be that old versions of attribute files from my cookbook were getting stuck in the chef cache on a node
[2012-06-22 12:11:58 -0400] geekbri: Thanks for the stickers opscode!
[2012-06-22 12:12:17 -0400] gyre007: guys...Im trying to set up some python libs on one of my CentOS 6.2 servers...however when im trying to use python_pip resource I'm getting a FATAL error "Cannot find a resource for python_pip on centos version 6.2"
[2012-06-22 12:12:27 -0400] gyre007: anyone came across this on centos 6.2 ?
[2012-06-22 12:13:40 -0400] gyre007: I forgot to mention Chef version 10.12
[2012-06-22 12:16:04 -0400] ashb: gyre007: include_recipe "python" might be needed
[2012-06-22 12:18:05 -0400] gyre007: ashb, mm...ok ...will give that a shot...
[2012-06-22 12:18:33 -0400] gyre007: documentation doesn't mention that though...
[2012-06-22 12:19:26 -0400] gyre007: but python recipe will try to install python...
[2012-06-22 12:19:27 -0400] leifmadsen: then this is a great opportunity to help update it :)
[2012-06-22 12:19:55 -0400] gyre007: this is what I've got for my needs... https://github.com/milosgajdos83/sentry-cookbook/blob/master/recipes/python-stuff.rb
[2012-06-22 12:20:06 -0400] leifmadsen: huh, I have an execute resource defined, and the one defined just about it ran, but not the one at the end of my recipe... o.O
[2012-06-22 12:20:07 -0400] geekbri: AWww yeah! sign that cla, update those docs, issue a jira ticket, make a pull request... then true love happens
[2012-06-22 12:20:11 -0400] gyre007: leifmadsen, well. if I was sure that that's the case then I would've updated it :)
[2012-06-22 12:20:40 -0400] leifmadsen: gyre007: just saying, when you test and find out if that resolves it, don't forget to leave behind some docs :D
[2012-06-22 12:21:14 -0400] gyre007: leifmadsen, sure..will keep that in mind...
[2012-06-22 12:22:03 -0400] ashb: gyre007: you might not need to include the receipe - perhaps you just need a depends in your cookbook
[2012-06-22 12:22:59 -0400] nicholasr-bf: kill-9 4012
[2012-06-22 12:23:07 -0400] nicholasr-bf: kill -9 4082
[2012-06-22 12:23:14 -0400] nicholasr-bf: argh sorry
[2012-06-22 12:23:41 -0400] geekbri: I love me a nicely formatted read me
[2012-06-22 12:23:49 -0400] nicholasr-bf: trying to rescue my stuffed up Virtualbox VM...
[2012-06-22 12:27:35 -0400] BryanWB_: what is the platform? node attribute in chef 10.12.0 ?
[2012-06-22 12:27:49 -0400] BryanWB_: i don't c it in earlier versions of chef
[2012-06-22 12:30:50 -0400] ashb: damn help zombie on ML :/
[2012-06-22 12:41:17 -0400] gyre007: ok so ashb was right - I was missing python cookbook as a dependency...however ptyhon_pip LWRP on CentOS is calling pip and CentOS is so messed up that it does not provide pip but python-pip....so the lwrp thingy fails...
[2012-06-22 12:43:50 -0400] gyre007: so it looks like a bug or something like that...in Ubuntu/Debian it should definitely work as ubuntu's/debian's pip executable really is called "pip" as oppose to CentOS' which is called "pip-python"
[2012-06-22 12:46:45 -0400] leifmadsen: ah, so sounds like a case statement for the two names needs to be added somewhere
[2012-06-22 12:48:48 -0400] gyre007: leifmadsen, yup
[2012-06-22 12:50:14 -0400] gyre007: does anyone know the link to OpenSource Chef repo ? or where is it hosted ? Id like to look into that....
[2012-06-22 12:58:51 -0400] cburyta: is this what your looking for? https://github.com/opscode/chef
[2012-06-22 13:01:54 -0400] geekbri: BryanWB_: are you unit testing any of your cookbooks by any chance?
[2012-06-22 13:06:19 -0400] BryanWB_: geekbri: y
[2012-06-22 13:06:49 -0400] geekbri: BryanWB_: I happen to see you reply to lophtys tweet about it, and I wanted to add unit testing to one of my cookbooks.  Wasn't sure what tools people are using for that :)
[2012-06-22 13:07:07 -0400] BryanWB_: geekbri: i like minitest-handler, i also happen to maintain it
[2012-06-22 13:07:15 -0400] hippiehacker: http://help.opscode.com/discussions/questions/246-best-practices-for-multiple-developers-kniferb-in-chef-repo-or-not # where did this page go?
[2012-06-22 13:07:16 -0400] bmg: Hi Guys! I am rather new to chef and try to test it. After setting up a workstation, i have a problem to register it as a client. How do i get the client.pem?
[2012-06-22 13:07:41 -0400] geekbri: BryanWB_: nice, I just added it to my github watch list. I'll look into it... and of course pester you if I have questions :)
[2012-06-22 13:07:50 -0400] BryanWB_: geekbri: https://github.com/btm/minitest-handler-cookbook,  and there are a coupple foodfight episodes ontesting
[2012-06-22 13:08:07 -0400] BryanWB_: geekbri: use that one ^^ as i collaborate on it w/ btm
[2012-06-22 13:08:09 -0400] geekbri: BryanWB_: I'll have to go through the archives later and find them :)
[2012-06-22 13:09:46 -0400] marwood: Hi, when using 'knife ssh', is it possible to have the ssh command executed with sudo?
[2012-06-22 13:09:47 -0400] gyre007: cburyta, yep, cheers
[2012-06-22 13:09:59 -0400] BryanWB_: marwood: y
[2012-06-22 13:10:16 -0400] marwood: Why or yes?
[2012-06-22 13:13:01 -0400] marwood: Why? because the user running knife doesn't have access to the private key needed to connect to the client, this is only accessible through using ssh via sudo to a different user
[2012-06-22 13:14:20 -0400] BryanWB_: marwood: yes
[2012-06-22 13:15:34 -0400] marwood: would you mind pointing me in the right direction?
[2012-06-22 13:18:44 -0400] BryanWB_: marwood: i use the users cookbook to copy the public key of each sysadmin onto all machines
[2012-06-22 13:19:42 -0400] BryanWB_: and  use -i ../your/key    iirc
[2012-06-22 13:19:52 -0400] marwood: rather than do that, I'm using a centralised key which is only accessible via sudo ssh
[2012-06-22 13:20:27 -0400] BryanWB_: then use -i to point to that key i guess
[2012-06-22 13:23:05 -0400] makuk66: marwood: "knife ssh" doesn't execute an ssh command  it uses a built-in ssh client. So no, you can't run that as someone else. You can of course run "knife" itself as someone else.
[2012-06-22 13:24:03 -0400] leifmadsen: sudo knife ssh -i /my/key/path ... I guess
[2012-06-22 13:24:31 -0400] leifmadsen: might need to point at config as well with -c
[2012-06-22 13:24:32 -0400] marwood: ah, bums. Then of course doing sudo knife fails because it's still trying to access my chef.pem but whilst running as the other user
[2012-06-22 13:24:42 -0400] leifmadsen: see above
[2012-06-22 13:24:59 -0400] marwood: so I'd have to have a config in the other user too, and point it to that?
[2012-06-22 13:25:13 -0400] leifmadsen: you'd point at your config that you use anyways
[2012-06-22 13:25:34 -0400] leifmadsen: but since it's not in /root/ you'd point at your /home/user/chef/knife.rb or whatever
[2012-06-22 13:25:51 -0400] marwood: it wouldn't be able to access my chef private key
[2012-06-22 13:25:54 -0400] paulmooring: marwood: why would you want to run knife w/ sudo?
[2012-06-22 13:25:59 -0400] marwood: sudo isn't going to root
[2012-06-22 13:26:13 -0400] leifmadsen: marwood: really the better way is to make the key part of a system group you're a part of
[2012-06-22 13:26:37 -0400] marwood: hmm that might just be acceptable
[2012-06-22 13:26:45 -0400] leifmadsen: it's the better way!(tm)
[2012-06-22 13:26:46 -0400] leifmadsen: :D
[2012-06-22 13:27:47 -0400] marwood: the chef key, you mean?
[2012-06-22 13:28:02 -0400] leifmadsen: I'm talking that private ssh key you seem to be having trouble accessing
[2012-06-22 13:28:21 -0400] leifmadsen: I assume all your configs are in a standard location like ~/.chef/
[2012-06-22 13:28:36 -0400] marwood: ah, well no you see then the problem is the private key is readable by anyone in that group. Having it only accessible via sudo ssh means that it can only be read by ssh
[2012-06-22 13:29:24 -0400] leifmadsen: then my suggestion of putting your user into the same group appears to be applicable
[2012-06-22 13:30:13 -0400] marwood: I don't want the key readable by anyone else. It should only be readable by ssh when run under sudo
[2012-06-22 13:30:56 -0400] bmg: Which client key do i have to use, when i sudo chef-client?
[2012-06-22 13:31:46 -0400] makuk66: marwood: what is it you're trying to prevent? You want people to run knife commands on backend servers, but not be able to ssh into the machine? Is that because you're worried about non-knife-controlled commands that can make your backends inconsistent, or because you're worried that that key can get compromised and abused by others?
[2012-06-22 13:32:45 -0400] yfeldblum: marwood, as makuk66 asks, what is the attack that you are worried about?
[2012-06-22 13:32:56 -0400] marwood: the objective is to protect the key itself, I do not want the private key being readable
[2012-06-22 13:36:51 -0400] marwood: I think I've cracked it now anyway. Making the chef keys group readable by the user sudo knife is executed as
[2012-06-22 13:38:45 -0400] tubbo: chef tastes good
[2012-06-22 13:55:44 -0400] jperry2: anyone using continuous delivery for their chef changes?
[2012-06-22 14:00:38 -0400] makuk66: jperry2: that's a nebulous concept. If you mean "manually use knife to upload changes and deliver to chef-client running automatically on the targets", that's one way, if you mean "have repo checkins trigger knife uploads/imports and then rely on chef-client running automatically", that's another.
[2012-06-22 14:01:16 -0400] drrk: makuk66: "have repo checkins trigger knife uploads/imports and then  rely on chef-client running automatically"
[2012-06-22 14:01:24 -0400] drrk: is that somethign there are scripts for around?
[2012-06-22 14:01:39 -0400] makuk66: don't know; I don't do that
[2012-06-22 14:02:03 -0400] drrk: or rather, I want a git pre commit hook that checks the consistancy
[2012-06-22 14:04:45 -0400] makuk66: I think that's possible; have a look at "rake -T" in a chef repo for targets to help. I don't think that does everything though; I think data bag creation needs to explicit
[2012-06-22 14:15:22 -0400] jperry2: makuk66 "have repo checkins trigger knife uploads/imports and then rely on chef-client running automatically"
[2012-06-22 14:15:44 -0400] jperry2: I was thinking of having someone check in their changes and then have our ci server run some tests
[2012-06-22 14:16:02 -0400] jperry2: after tests pass then have the user push a button to promote it to the production environment
[2012-06-22 14:16:10 -0400] jperry2: this is using all the same chef server
[2012-06-22 14:16:21 -0400] jperry2: I wonder if it makes sense to have two chef servers for this purpose
[2012-06-22 14:16:42 -0400] jperry2: I found something like https://github.com/mdsol/knife-flow
[2012-06-22 14:16:47 -0400] jperry2: but this uses hosted chef
[2012-06-22 14:17:09 -0400] jperry2: we aren't using that so I wonder if there is another tool out there that can accomplish something like this or more what I was saying in my previous message
[2012-06-22 14:18:06 -0400] BryanWB_: jperry2: off-topic, still using minitest-handler-cookbook?
[2012-06-22 14:18:35 -0400] BryanWB_: curious if u still have to run chef-client 2x to get tests to run
[2012-06-22 14:22:24 -0400] randomautomator: hey guys question
[2012-06-22 14:22:42 -0400] randomautomator: what does a role json file look like if i want to run a cookbook named "mysql" with and old version
[2012-06-22 14:22:55 -0400] randomautomator: let's say it's at version 0.2 and i want to run 0.1
[2012-06-22 14:25:30 -0400] cwj: roles dont allow you to specify cookbook versions, but environments do
[2012-06-22 14:27:05 -0400] randomautomator: ah ok
[2012-06-22 14:32:10 -0400] drrk: wow that felt good, finally been told I can get rpicing for Chef training :)
[2012-06-22 14:33:14 -0400] gabebug: question about cookbook attribute referencing/interpolation. if i have in my cookbook's attribute's file, default[:name] = "Bob", default[:greeting] = "Hello, Bob", but then do override[:name] = "John" in my node attributes, I end up with name = "John", greeting = "Hello, Bob", as if the "precedence" controls the order of loading instead of actual precedence. I didn't see this covered in the docs. is this expected?
[2012-06-22 14:33:22 -0400] gyre007: is there way how you can access information about the node's platform in custom defined providers ? I tried node['platform'] but that seems to be empty
[2012-06-22 14:37:07 -0400] mattray: gabebug: http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2012-06-22 14:38:19 -0400] gabebug: mattray: indeed, i've combed over that page. what i would expect to happen is that my override to :name would be in place by the time default[:greeting] was evaluated
[2012-06-22 14:38:42 -0400] gabebug: at least that's what "precedence" infers to me
[2012-06-22 14:39:27 -0400] randomautomator: gyre007: i think maybe just query #{platform}
[2012-06-22 14:39:48 -0400] gabebug: granted, the only time it's really relevant is when you have other attributes referencing/interpolating, but that's not covered in the docs
[2012-06-22 14:40:53 -0400] jperry2: @BryanWB - Yes still using minitest-handler
[2012-06-22 14:41:16 -0400] jperry2: @BrayanWB: I posted a comment on an issue I create awhile back
[2012-06-22 14:41:19 -0400] jperry2: about workflow
[2012-06-22 14:41:23 -0400] jperry2: if you can check that out
[2012-06-22 14:41:24 -0400] jperry2: thx
[2012-06-22 14:42:09 -0400] leifmadsen: I suspect this isn't possible, but using a private chef server, and executing chef-client via knife ssh, can the update handle a reboot in the middle of the run?
[2012-06-22 14:42:28 -0400] leifmadsen: (assuming a recipe performed the reboot and it wasn't caused by someone pressing a reset button or something :))
[2012-06-22 14:43:33 -0400] ashb: leifmadsen: no. (private server or not doesn't matter)
[2012-06-22 14:43:38 -0400] leifmadsen: jperry2: BryanWB_: thanks for the mention of that minitest handler cookbook. I'm looking into testing and specifically minitest today, so that looks something right up my alley!
[2012-06-22 14:43:48 -0400] leifmadsen: ashb: thanks, that was my suspicion :)
[2012-06-22 14:43:50 -0400] ashb: but cookbooks are supposed to be idempotent
[2012-06-22 14:43:57 -0400] ashb: so the reboot won't cause any problems as such
[2012-06-22 14:44:12 -0400] gyre007: randomautomator, but OHAI should already populate that variable
[2012-06-22 14:44:21 -0400] leifmadsen: ashb: ya, basically I'd just have ot run the chef-client again right?
[2012-06-22 14:44:23 -0400] gyre007: at that stage
[2012-06-22 14:44:41 -0400] jperry2: @BryanWB - I think the next biggest thing to improve mintiest handler is to allow you to use the tests without pushing them to the server
[2012-06-22 14:44:43 -0400] ashb: leifmadsen: yeah - most people just run it as a daemon/cron so that would automatic
[2012-06-22 14:45:03 -0400] jperry2: the reason for this I don't want to rev my cookbook or constantly push my changes when I'm doing test driven infrastructure
[2012-06-22 14:45:06 -0400] leifmadsen: ashb: yep, right now we're using knife ssh as a more "push" service, but I suspect we'll flip to the service method shortly
[2012-06-22 14:45:18 -0400] jperry2: maybe have a way to share it through vagrant or something else
[2012-06-22 14:45:23 -0400] ashb: leifmadsen: you can always cron an at boot time run before you triggerthe reboot
[2012-06-22 14:46:03 -0400] ashb: leifmadsen: time string of '@reboot' - see crontab(5)
[2012-06-22 14:46:21 -0400] geekbri: I dont think the cron LWRP supports the @reboot string.  At least it didn't last time I checked.
[2012-06-22 14:46:23 -0400] ashb: '@reboot chef-client'
[2012-06-22 14:46:40 -0400] ashb: geekbri: no but you can either add it or do it in other ways
[2012-06-22 14:47:10 -0400] leifmadsen: ashb: oh neat :)
[2012-06-22 14:47:23 -0400] leifmadsen: ashb: thanks for the info
[2012-06-22 14:48:13 -0400] gyre007: is platform? function documented somewhere ?
[2012-06-22 14:48:20 -0400] ashb: and as geekbri says you can't do that (currently) via the cron resource - you'd have to put the file in /etc/cron.d manually
[2012-06-22 14:48:55 -0400] ashb: fg
[2012-06-22 14:48:56 -0400] leifmadsen: ashb: geekbri: awesome, much obliged
[2012-06-22 14:49:03 -0400] geekbri: no problem good sir
[2012-06-22 14:49:15 -0400] leifmadsen: heh
[2012-06-22 14:52:33 -0400] gyre007: randomautomator, platform? is unavailable there too
[2012-06-22 14:52:36 -0400] gyre007: very very very strange
[2012-06-22 14:53:27 -0400] gyre007: is there something important Im missing out ?  https://github.com/milosgajdos83/sentry-cookbook/blob/master/providers/pip.rb
[2012-06-22 14:54:01 -0400] randomautomator: i dunno but it works ok for me
[2012-06-22 14:54:15 -0400] randomautomator: here's a statement i use default.rb:if (platform?("ubuntu"))
[2012-06-22 14:54:29 -0400] gyre007: randomautomator, in custom defined provider ??
[2012-06-22 14:54:44 -0400] randomautomator: that's just in a recipe
[2012-06-22 14:54:51 -0400] randomautomator: shouldn't any different pulling that in a custom provider
[2012-06-22 14:54:57 -0400] randomautomator: be*
[2012-06-22 14:55:10 -0400] gyre007: well...it seems like it is...strange...
[2012-06-22 14:55:18 -0400] randomautomator: lemme try it real quick
[2012-06-22 14:55:19 -0400] magoo: is is possible to have multiple exception handlers?
[2012-06-22 14:56:09 -0400] gyre007: When I use it in  https://github.com/milosgajdos83/sentry-cookbook/blob/master/providers/pip.rb I get exception: NoMethodError - undefined method platform?
[2012-06-22 15:02:52 -0400] lusis: magoo: iirc yes
[2012-06-22 15:03:01 -0400] jperry2: anyone using a good cookbook promotion tool for chef server
[2012-06-22 15:03:03 -0400] yfeldblum: gyre007, why are you calling `platform?` in the class body, outside of an instance method?
[2012-06-22 15:05:20 -0400] yfeldblum: randomautomator, it is generally considered unconventional in Ruby to surround the condition given to `if` with parentheses - that's something that would be normal in other languages (C, Java, JavaScript) but certainly not in Ruby or Python
[2012-06-22 15:05:56 -0400] ashb: s/normal/required/
[2012-06-22 15:08:20 -0400] yfeldblum: gyre007, ohai isn't an acronym; ohai is this: https://www.google.com/search?tbm=isch&q=o+hai
[2012-06-22 15:09:21 -0400] yfeldblum: magoo, you can have as many handlers as you like; each is invoked in turn and is given the run-state to inspect
[2012-06-22 15:10:20 -0400] RJ2: I'm seeing this error, ubuntu 12.04/64, chef 10.12: Chef::Exceptions::Service: service[procps] could not determine how to inspect the process table, please set this nodes 'command.ps' attribute
[2012-06-22 15:10:23 -0400] magoo: ah, nice
[2012-06-22 15:10:50 -0400] magoo: i'm using the chef_handler cookbook and invoking handlers via recipes so I was hoping this was the case
[2012-06-22 15:11:00 -0400] RJ2: i tried settings command.ps to /bin/ps, didn't help - not sure what it wants
[2012-06-22 15:11:09 -0400] magoo: *attempting to implement the cloudkick handler
[2012-06-22 15:11:23 -0400] yfeldblum: ashb, yes, thanks
[2012-06-22 15:11:56 -0400] yfeldblum: jperry2, what do you mean by "cookbook promotion tool"?
[2012-06-22 15:12:02 -0400] jperry2: so there is knife-flow
[2012-06-22 15:12:10 -0400] jperry2: but that works for hosted chef
[2012-06-22 15:12:16 -0400] jperry2: it could be tweaked
[2012-06-22 15:12:35 -0400] jperry2: but I wanted a way to have something that we can use as a tool to promote your cookbook through the environments
[2012-06-22 15:12:36 -0400] gyre007: yfeldblum, i know what ohai is...what I meant is ohai populates node attributes when chef-client is run...arrgh
[2012-06-22 15:13:19 -0400] jperry2: I guess I'm looking for something that can work in a continuous delivery pipeline
[2012-06-22 15:13:25 -0400] jperry2: and I'm looking for ideas
[2012-06-22 15:13:51 -0400] jperry2: do folks usually just have one chef server or do they use two
[2012-06-22 15:13:57 -0400] jperry2: one for testing and development
[2012-06-22 15:14:04 -0400] jperry2: then the other when its ready for primetime
[2012-06-22 15:14:24 -0400] specialsauce: jperry2 - i've seen people use different approaches, we have 3 chef servers
[2012-06-22 15:14:34 -0400] specialsauce: one for dev, testing, and live respectively
[2012-06-22 15:14:50 -0400] specialsauce: we use jenkins for the CI pipeline
[2012-06-22 15:15:22 -0400] jperry2: @specialsauce - how do you ensure that you are testing against other changes that are in the live server
[2012-06-22 15:15:32 -0400] jperry2: what is preventing things from going into the live area
[2012-06-22 15:15:40 -0400] yfeldblum: jperry2, i'm in the minority on this i suppose, but i'd suggest having a chef-server per operated infrastructure, including in *local* development, and that you enforce that the cookbooks in each chef-server are exactly the cookbooks in the associated git branch
[2012-06-22 15:15:59 -0400] specialsauce: jperry2, do you mean through Chef via git or via some other channel?
[2012-06-22 15:16:44 -0400] jperry2: I guess at what point are your changes checked in
[2012-06-22 15:16:50 -0400] jperry2: do you have an example of the workflow?
[2012-06-22 15:16:59 -0400] jperry2: from dev all the way through production
[2012-06-22 15:17:13 -0400] specialsauce: jperry: we use jenkins not just for tests but for the git pull and knife import on the server
[2012-06-22 15:17:14 -0400] gyre007: why on earth am I getting that exception I've no idea :)
[2012-06-22 15:17:23 -0400] jperry2: @yfeldblum - are you suggesting each developer have their own chef server?
[2012-06-22 15:17:27 -0400] specialsauce: so stuff can only get on there if its been commited, merged and pushed
[2012-06-22 15:17:59 -0400] jperry2: I see so is jenkins pushing the upload to each environment or only the testing and live environments?
[2012-06-22 15:18:05 -0400] yfeldblum: jperry2, yes, that's what i mean
[2012-06-22 15:18:14 -0400] yfeldblum: jperry2, but locally
[2012-06-22 15:18:33 -0400] jperry2: because how is someone suppose to do test driven infrastructure if they have to check it in each time
[2012-06-22 15:18:34 -0400] specialsauce: jperry2, each environment has its own mgmt server with both chef and jenkins on it
[2012-06-22 15:18:35 -0400] BryanWB_: jperry2: u mean run them locally on ur own machine?
[2012-06-22 15:18:37 -0400] RJ2: oh, the ohai whitelist plugin doesnt include command
[2012-06-22 15:18:42 -0400] jperry2: I'm fine with doing that locally but pushing the changes not so much
[2012-06-22 15:19:18 -0400] jperry2: @BrayanWB - yeah without using chef solo
[2012-06-22 15:19:27 -0400] specialsauce: jperry2, and I agree with yfeldblum, extending this back to as near the people writing the recipes as possible is a good thing, we haven't got as far as local chef on dev's localhosts but I like the idea
[2012-06-22 15:19:44 -0400] magoo: yfeldblum: do you have an example of your jenkins setup?
[2012-06-22 15:19:55 -0400] magoo: this is one of the things I need to do next
[2012-06-22 15:20:22 -0400] jperry2: @specialsauce: are you suggesting that someone spins up a vm that has chef server installed and then upload everything?
[2012-06-22 15:20:27 -0400] jperry2: this way they can test locally
[2012-06-22 15:20:27 -0400] BryanWB_: hmm, u don't mind screwing up your workstation?
[2012-06-22 15:20:35 -0400] geekbri: INCEPTION, do you manage your per environment chef servers with a chef server?
[2012-06-22 15:20:41 -0400] jperry2: @BraynWB - I'm using vagrant
[2012-06-22 15:20:43 -0400] magoo: agoddard wrote street-chef which I was able to implement into our local vagrant setup pretty easily.
[2012-06-22 15:20:50 -0400] magoo: fwiw
[2012-06-22 15:20:59 -0400] specialsauce: I don't know about yfeldblum but I was imagning more VM or toft than applying them directly to localhost
[2012-06-22 15:21:12 -0400] BryanWB_: jperry2: ok, just to test the conditions on the vm w/ out doing a convergenc?
[2012-06-22 15:21:29 -0400] jperry2: @magoo - link to street-chef?
[2012-06-22 15:21:34 -0400] magoo: sure
[2012-06-22 15:21:52 -0400] jperry2: I would have the server do convergence
[2012-06-22 15:21:59 -0400] magoo: https://github.com/agoddard/street-chef
[2012-06-22 15:22:18 -0400] magoo: there are a couple little things that I addressed that I should have done a PR for
[2012-06-22 15:22:23 -0400] jperry2: @specialsauce what does a developer do when they are writing tests and a cookbook
[2012-06-22 15:22:27 -0400] jperry2: can you walk me through it
[2012-06-22 15:22:41 -0400] yfeldblum: magoo, no
[2012-06-22 15:23:58 -0400] magoo: yfeldblum: i assume you're just using jenkins to build your whole (or parts of) environment from scratch on an aws node?
[2012-06-22 15:24:30 -0400] yfeldblum: specialsauce, e.g. i could imagine sticking chef-server in a VM or LXC or somehow easily distribute a prebaked isolated chef-server; and testing cookbooks in a VM or multiple VMs or LXCs or such; and all of that is done locally or perhaps an extension of locally (e.g. just-for-you cloud VMS that get spun up when you'e getting started and get spun down when you go home)
[2012-06-22 15:24:35 -0400] yfeldblum: magoo, false
[2012-06-22 15:24:45 -0400] magoo: haha, oh well
[2012-06-22 15:25:41 -0400] jperry2: @yfeldblum - do you run the tests in each of your environments through a ci server?
[2012-06-22 15:25:45 -0400] BryanWB_: anybody know what the node.normal_attrs[:platform?] attribute is for? it suddenly shows up on the noded i have upgraded to Chef 10.12
[2012-06-22 15:25:56 -0400] BryanWB_: and it is 'ubuntu' instead of redhat :(
[2012-06-22 15:26:23 -0400] yfeldblum: jperry2, no
[2012-06-22 15:26:33 -0400] jperry2: or only locally?
[2012-06-22 15:26:53 -0400] yfeldblum: jperry2, no
[2012-06-22 15:27:02 -0400] specialsauce: jperry2: we actually have a slightly unusual setup, in that we don't spin up anything explicitly for testing. We have a large pool  of "test" environments, and we split one off from the herd via jenkins, throw the latest cookbooks at it, and then apply tests to it.
[2012-06-22 15:27:22 -0400] yfeldblum: jperry2, at present, a dev infrastructure parallel to a prod infrastructure
[2012-06-22 15:27:50 -0400] specialsauce: the test envs are micro envs
[2012-06-22 15:28:55 -0400] specialsauce: everyone does this differently at present, all just very new almost everywhere
[2012-06-22 15:29:06 -0400] agoddard: magoo: hopefully street-chef still works, I haven't given it much love for a while :-/
[2012-06-22 15:29:31 -0400] jperry2: @agoddard - do you need to pull in all the community cookbooks?
[2012-06-22 15:29:37 -0400] magoo: there's one small thing that breaks it... i should have done a PR when I got started
[2012-06-22 15:31:12 -0400] agoddard: other than the ones listed in the Cheffile?
[2012-06-22 15:31:13 -0400] jperry2: @specialsauce - I guess I want to know what part of the upload is automated and what isn't
[2012-06-22 15:31:37 -0400] jperry2: @agoddard - Ah okay if that is it then that is fine
[2012-06-22 15:32:02 -0400] jperry2: I wasn't sure if there were more based on the this comment "this will install the opscode community cookbooks which the chef-server bootstrap will need"
[2012-06-22 15:32:28 -0400] gyre007: so simple question - is there ANY WAY how I can get some information about platform on which the chef-client is running in customly defined provider ?
[2012-06-22 15:32:50 -0400] specialsauce: jperry2, all automated, we push to git, git triggers jenkins, jenkins does all the tests and the env spluits and the chef runs etc
[2012-06-22 15:32:51 -0400] gyre007: platform? and node[:platform] are throwing exceptions...
[2012-06-22 15:33:11 -0400] agoddard: jodell: ah, yep.. I think it should only need apt, build-essential and chef, but this probably written for 0.10.4 or earlier, I should give it some love to get it working wth the new packages
[2012-06-22 15:33:38 -0400] agoddard: jperry2: ^ (damn tab.. :) )
[2012-06-22 15:34:12 -0400] jperry2: @specialsauce - so the locally someone has to check in in order to run their tests prior to checking in?
[2012-06-22 15:34:44 -0400] jperry2: sorry I mean someone has to check their stuff in in order to test it?
[2012-06-22 15:35:03 -0400] jperry2: seems risky that i can't test it locally before committing it to the chef repo
[2012-06-22 15:35:14 -0400] jperry2: even though I am pushing it to the chef server
[2012-06-22 15:35:15 -0400] specialsauce: jperry2, at present yes, which is where i like yfeldblum's idea but its one step beyond where we are now
[2012-06-22 15:35:21 -0400] jperry2: ok
[2012-06-22 15:35:26 -0400] specialsauce: jperry2, we use branches, so committing isn't so scary
[2012-06-22 15:35:34 -0400] specialsauce: we're not committing to head/master/whatever
[2012-06-22 15:35:43 -0400] specialsauce: the 3 chef servers use diffefrent branches
[2012-06-22 15:35:44 -0400] jperry2: okay how many branches do you have?
[2012-06-22 15:35:46 -0400] jperry2: ah
[2012-06-22 15:35:47 -0400] jperry2: okay
[2012-06-22 15:35:47 -0400] specialsauce: 3
[2012-06-22 15:35:50 -0400] specialsauce: one per server
[2012-06-22 15:36:00 -0400] jperry2: what branches do you run your automated tests?
[2012-06-22 15:36:07 -0400] specialsauce: the first one
[2012-06-22 15:36:17 -0400] yfeldblum: specialsauce, same :P
[2012-06-22 15:36:21 -0400] specialsauce: :-)
[2012-06-22 15:36:48 -0400] auxome: Question -- I'm getting interesting error messages when a chef-client run starts on a windows box that I can't seem to get to the bottom of. If I search the merb exception message, it returns an opscode page that now just links to the main support page (rewritten, I guess). Anyone know what the "INFO: HTTP Request Returned 403 Forbidden: Merb::ControllerExceptions::Forbidden" is caused by, specifically?
[2012-06-22 15:37:20 -0400] auxome: comes right after these messages: DEBUG: Sending HTTP Request via PUT to api.opscode.com:443/organizations/<redacted>/clients/<client>, which is followed by DEBUG: decompressing gzip response, then the 403
[2012-06-22 15:37:50 -0400] yfeldblum: specialsauce, to be clear: what i suggested is exactly how most many of us go about developing web and other applications; i see infrastructure as an application of some particular kind, and i see the general principles of writing applications as being applicable as well to writing infrastructures-as-applications
[2012-06-22 15:38:26 -0400] jperry2: so it goes like this, commit my changes to branch-dev -> jenkins then pushes to the dev chef server then runs my tests -> if pass then migrates them to branch-test and pushes them to the test chef server -> then jenkins migrates to prod repo then pushes them to prod chef server?
[2012-06-22 15:38:28 -0400] specialsauce: yfeldblum, agree completely, for our app stuff every dev develops locally and this is the correct pattern and where the easiest 90% of issues are ironed out
[2012-06-22 15:39:10 -0400] yfeldblum: specialsauce, there are of course many out there who still SSH in to the development box and change a PHP file, and then copy the change to the production box, but this is a practice has been declining over time in favor of better and more-rigorous practices
[2012-06-22 15:39:22 -0400] specialsauce: jperry2, for us, no. there is a manual safety break between each of the 3 servers. ie we would have to merge manually. this allows us to manage when we send out changes etc
[2012-06-22 15:40:02 -0400] specialsauce: yfeldblum, jesus, never worked anywhere like that, maybe i've just been lucky :-O
[2012-06-22 15:40:31 -0400] jperry2: @specialsauce - got it.  Is your cookbook pulled out of the dev chef server if tests fail or left?
[2012-06-22 15:40:54 -0400] yfeldblum: specialsauce, and as the tools surrounding infrastructure advance and progress, we will look back on our past selves in astonishment that we ever developed the infrastructure in a dev env and then copied it to the prod env and that we ever thought that doing so was state-of-the-art
[2012-06-22 15:41:02 -0400] specialsauce: jperry2, don't forget to critically examine whether this workflow suits your need or sounds insane to you btw, i'm not telling you this is how you need it set up
[2012-06-22 15:41:29 -0400] jperry2: @specialsauce - understood.  I like to see what others are doing
[2012-06-22 15:41:31 -0400] yfeldblum: specialsauce, yes, um ... very yes
[2012-06-22 15:41:43 -0400] jperry2: I won't be taking that approach but maybe use some of the ideas you have there
[2012-06-22 15:42:15 -0400] jperry2: at the least being able to test locally is our first requirement
[2012-06-22 15:42:34 -0400] jperry2: which are able to do now but you must push your changes to the chef server which we only have one of
[2012-06-22 15:42:49 -0400] jperry2: it's fine because we manage the versions we use in production with a production environment file
[2012-06-22 15:43:14 -0400] jperry2: are you guys using mintiest chef handler for your tests or something else?
[2012-06-22 15:43:24 -0400] jperry2: I'm wondering do you run all your roles?
[2012-06-22 15:43:31 -0400] jperry2: or only that cookbook that changed
[2012-06-22 15:43:40 -0400] jperry2: how do you guys determine what is the best coverage your getting
[2012-06-22 15:43:59 -0400] jperry2: running tests for every permutation would not be ideal as it would take a long time to move your changes forward
[2012-06-22 15:44:08 -0400] tubbo: jperry2: i call geico, usually
[2012-06-22 15:44:11 -0400] jperry2: @BryanWB any suggestions on this one
[2012-06-22 15:44:36 -0400] magoo: jperry2: mintiest?
[2012-06-22 15:45:06 -0400] specialsauce: magoo i think probably https://github.com/calavera/minitest-chef-handler
[2012-06-22 15:45:50 -0400] gyre007: randomautomator, you found out anything ? im dead stuck with this...
[2012-06-22 15:46:02 -0400] jperry2: @specialsauce we are too
[2012-06-22 15:46:04 -0400] jperry2: just checking
[2012-06-22 15:46:30 -0400] jperry2: but back to the big question is what type of coverage are you doing
[2012-06-22 15:46:39 -0400] jperry2: meaning say you have a  recipe in 5 different roles
[2012-06-22 15:46:42 -0400] jperry2: or you have 50 different roles
[2012-06-22 15:46:54 -0400] jperry2: what approach are you taking to have confidence things won't break
[2012-06-22 15:48:04 -0400] magoo: nice
[2012-06-22 16:02:29 -0400] pehlert: Is there a way in Chef to get the id of a specific user on the client node?
[2012-06-22 16:04:45 -0400] cheapRoc: opscode servers go down for everyone else?
[2012-06-22 16:05:48 -0400] jperry2: @yfeldblum,@specialsauce - you see my message about what tests you run?
[2012-06-22 16:06:26 -0400] yfeldblum: jperry2, no
[2012-06-22 16:06:41 -0400] specialsauce: yfeldblum is a bot :-P
[2012-06-22 16:06:44 -0400] jperry2: it was around what roles/recipes do you run in your tests
[2012-06-22 16:07:16 -0400] specialsauce: jperry2, ah sorry, thought that was for Bryan. We do no unit testing at all since I'm not convinced about it in the context of Chef. We are in early days of developing integration tests at the end of our pipeline but these are fairly primitive for now and I haven't found a convincing answer for the best way to test yet
[2012-06-22 16:07:32 -0400] paulmooring: pehlert: like the uid and gid ?
[2012-06-22 16:07:43 -0400] jperry2: @specialsauce - same here
[2012-06-22 16:07:50 -0400] leifmadsen: specialsauce: that's the state I'm at as well
[2012-06-22 16:07:54 -0400] jperry2: we don't use unit testing
[2012-06-22 16:08:01 -0400] jperry2: but integration tests
[2012-06-22 16:08:06 -0400] jperry2: we have many roles
[2012-06-22 16:08:18 -0400] jperry2: for example we test the base role
[2012-06-22 16:08:39 -0400] yfeldblum: jperry2, i haven't solved every problem yet
[2012-06-22 16:08:42 -0400] yfeldblum: jperry2, just one
[2012-06-22 16:08:58 -0400] leifmadsen: our management wants integration testing mostly, so that we can verify the data we expect on the servers is actually there
[2012-06-22 16:09:23 -0400] jperry2: I think the more roles you create etc running them doesn't make sense  in a CD pipeline
[2012-06-22 16:09:29 -0400] jperry2: it would take forever to get your changes through
[2012-06-22 16:09:56 -0400] jperry2: I'm either thinking have a few roles that we test or only what changes have those tested
[2012-06-22 16:10:48 -0400] jperry2: cucumber-chef has been another option I have been keeping my eye on as it utilizes lxc's so you could have each run a different role
[2012-06-22 16:10:57 -0400] jperry2: and have all that tested in parallel
[2012-06-22 16:11:07 -0400] specialsauce: jperry2, I'm just not convinced on *what* tools like cucumber-chef test though
[2012-06-22 16:11:16 -0400] jperry2: its the same thing
[2012-06-22 16:11:25 -0400] jperry2: it tests your stuff at the end of a convergence
[2012-06-22 16:11:35 -0400] jperry2: but you have to use cucumber tests
[2012-06-22 16:11:38 -0400] jperry2: not minitest specs
[2012-06-22 16:11:57 -0400] jperry2: cucumber-chef will use a test lab and have it spin up several lxcs
[2012-06-22 16:12:04 -0400] jperry2: and you can run your run list on each lsc
[2012-06-22 16:12:06 -0400] jperry2: lxc
[2012-06-22 16:12:14 -0400] jperry2: one ec2 image can run about 50 lxcs
[2012-06-22 16:12:38 -0400] jperry2: it also allows you to replicate what one of your environments might look like
[2012-06-22 16:12:49 -0400] jperry2: to some degree obviously =
[2012-06-22 16:14:32 -0400] randomautomator: gyre007 sorry i got pulled into some work
[2012-06-22 16:14:43 -0400] paulmooring: pehlert: if you're trying to find out information on a user `node['etc']['passed']['root']['uid']` would give roots uid for example
[2012-06-22 16:16:26 -0400] gyre007: randomautomator, I see...im stuck completely...don't understand what's going o haha...I must be missing something
[2012-06-22 16:16:56 -0400] specialsauce: jperry2, what I've found tho is that the stuff that has failed in my experience would not be caught by any of those sorts of tests
[2012-06-22 16:18:25 -0400] specialsauce: eg, in a recipe you test if you put a file in place, in a test you test if the file gets created, but if you have a single rogue character in the file it may subtly make something fail. This is no easy answer to this stuff
[2012-06-22 16:19:40 -0400] randomautomator: yeah... i'm not really an expert at this either so it might take me a while to muster up something anyway
[2012-06-22 16:21:01 -0400] jperry2: @specialsauce I agree
[2012-06-22 16:21:22 -0400] geekbri: specialsauce: that kind of stuff can be especially hard to test, because what should be in a file can change very quickly and very often
[2012-06-22 16:21:22 -0400] jperry2: you could always test for that value if you really wanted to
[2012-06-22 16:21:23 -0400] specialsauce: jperry2, the only two answers that convince me on Chef testing is to test your platform and your app - ie run the kind of checks against it that you would normally be testing from eg nagios tot est the platform, and then run behat or whatever tests to test your code executes OK on it as designed
[2012-06-22 16:21:31 -0400] specialsauce: antyhing less than that and you're going to miss stuff
[2012-06-22 16:22:20 -0400] specialsauce: and this stuff is going to vary by organisation and can't be easily put in a tool for everyone to use, it needs to be re-engineered by everyone out there
[2012-06-22 16:23:06 -0400] pehlert: paulmooring: Excellent, thanks
[2012-06-22 16:47:17 -0400] tubbo: is api.opscode.com down for anyone else?
[2012-06-22 16:47:40 -0400] tubbo: i think we're being throttled or something...2 devs from this office are trying to upload cookbooks to our hosted chef environment and we can't get through
[2012-06-22 16:47:54 -0400] tubbo: but it seems api.opscode.com can be pinged from other IPs... http://network-tools.com/default.asp?prog=ping&host=api.opscode.com
[2012-06-22 17:02:50 -0400] jtimberman: we don't throttle API requests as far as i know.
[2012-06-22 17:03:14 -0400] jtimberman: and i'm able to upload cookbooks.
[2012-06-22 17:03:20 -0400] jtimberman: tubbo: can you email support@opscode.com?
[2012-06-22 17:03:32 -0400] jtimberman: include output from running knife with -VV
[2012-06-22 17:04:51 -0400] cheapRoc: we're seeing a downed router at nlayer
[2012-06-22 17:04:56 -0400] cheapRoc: same place
[2012-06-22 17:06:01 -0400] cheapRoc: https://gist.github.com/23ea93f2b6f524284750
[2012-06-22 17:07:08 -0400] tubbo: also happening for opscode.com...basically anything that goes through *.nlayer.net...
[2012-06-22 17:08:21 -0400] geekbri: http://www.internetpulse.net/
[2012-06-22 17:08:43 -0400] jtimberman: I go straight from qwest -> rackspace for api.opscode.com
[2012-06-22 17:08:48 -0400] jtimberman: I don't know who nlayer is
[2012-06-22 17:09:27 -0400] auxome: just because the next hop shows * * * doesn't mean it's down
[2012-06-22 17:09:30 -0400] auxome: could just be filtering icmp
[2012-06-22 17:09:36 -0400] cheapRoc: well i'm not lying so i guess we'll wait and see
[2012-06-22 17:10:12 -0400] cheapRoc: no its definitely stopping there
[2012-06-22 17:10:15 -0400] auxome: not saying you are, just saying there might be more here...that's not a definitive explanation for whatever you are seeing
[2012-06-22 17:10:19 -0400] cheapRoc: i understand how trace route works
[2012-06-22 17:10:54 -0400] jtimberman: auxome: indeed.
[2012-06-22 17:11:04 -0400] jtimberman: i'm not saying you're lying :)
[2012-06-22 17:11:09 -0400] auxome: my traceroute shows icmp filtered after: 16  core1-aggr401a-3.ord1.rackspace.net (173.203.0.157)  67.395 ms  73.821 ms  68.640 ms
[2012-06-22 17:11:14 -0400] cheapRoc: obvious answer is to move to san fran
[2012-06-22 17:11:17 -0400] jtimberman: auxome: as does mine
[2012-06-22 17:11:37 -0400] cheapRoc: or texas, whatever is closer to throw packets at rackspace
[2012-06-22 17:11:58 -0400] tubbo: i had to pop a cop cuz he wouldnt give me my props in oaktown
[2012-06-22 17:11:58 -0400] auxome: what *is* awesome is your routing loop that somehow exits at hop 10
[2012-06-22 17:12:32 -0400] cheapRoc: totally
[2012-06-22 17:12:33 -0400] tubbo: auxome: it's gotta go to NYC first to pick up a few things
[2012-06-22 17:12:50 -0400] yfeldblum: jtimberman, any chance chef@lists.opscode.com is rejecting mail?
[2012-06-22 17:12:51 -0400] auxome: don't move to SF. YOu need to go to Oak Land.... http://www.youtube.com/watch?v=CzkoeyhAAdk
[2012-06-22 17:13:36 -0400] jtimberman: yfeldblum: dunno
[2012-06-22 17:14:08 -0400] cheapRoc: i thought philly had the slowest j walkers
[2012-06-22 17:14:44 -0400] jelder: i'm having trouble with "knife ssh" and the --manual-list argument
[2012-06-22 17:15:08 -0400] jelder: if i specify two hosts, the result is "host1 bash: host2: command not found"
[2012-06-22 17:15:35 -0400] jtimberman: jelder: whats your command line
[2012-06-22 17:16:02 -0400] jelder: oh never mind, it was a quoting issue
[2012-06-22 17:18:07 -0400] gene: morning (PST) all. A colleague has been confused by a doc page. I've been clarifying but upon reading the doc page I'm now  unsure if the page is confusing or if I'm wrong about how chef-client work. The page ( http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run ) says "The Chef Client then queries the Chef Server for a list of all the Libraries, Attributes, Definitions and Recipes in all Cookbooks, and transfers them to the local file cache." and
[2012-06-22 17:21:06 -0400] jperry2: anyone using chef-hatch-repo?
[2012-06-22 17:30:29 -0400] zts: gene: your question got cut off - last words were: transfers them to the local file cache." and
[2012-06-22 17:30:36 -0400] gene: whoops
[2012-06-22 17:30:42 -0400] gene: lemme try again
[2012-06-22 17:30:50 -0400] gene: morning (PST) all. A colleague has been confused by a doc page. I've been clarifying but upon reading the doc page I'm now  unsure if the page is confusing or if I'm wrong about how chef-client work.
[2012-06-22 17:30:57 -0400] gene: The page ( http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run ) says "The Chef Client then queries the Chef Server for a list of all the Libraries, Attributes, Definitions and Recipes in all Cookbooks, and transfers them to the local file cache." and "We first load all the Libraries from every cookbook, making any language extensions or ruby classes available."
[2012-06-22 17:31:00 -0400] gene: This can't mean literally "all Cookbooks" and "every cookbook" right? This must mean all the cookbooks which are in the nodes expanded run_list, not all the cookbooks that the chef server knows about?
[2012-06-22 17:31:16 -0400] gene: zts : thanks
[2012-06-22 17:31:37 -0400] juliancdunn: gene: correct
[2012-06-22 17:31:44 -0400] juliancdunn: not all the cookbooks, ever
[2012-06-22 17:31:54 -0400] gene: ok, i'll update that wiki page and add a few clarifying words
[2012-06-22 17:31:56 -0400] gene: thanks
[2012-06-22 17:34:21 -0400] gene: juliancdunn : and am I correct in assuming that the "all" and "every" cookbooks mentioned here are specifically all/every cookbook that exists in the expanded run_list? or is it the unexpanded run_list
[2012-06-22 17:36:21 -0400] gene: I guess I mean, in that "anatomy of a chef run" at what stage does the reading of the node's run_list happend and the expanding of the run_list (exploding roles, following dependencies, etc) happen?
[2012-06-22 17:41:08 -0400] gene: I mean honestly, I'm a little surprised/confused that that anatomy page doesn't mention run_lists or expanding run_lists at all
[2012-06-22 17:41:56 -0400] cassarani: is there a Chef-mandated way of running update-rc.d for new services?
[2012-06-22 17:42:07 -0400] cassarani: I would have thought it could be done transparently by the Service resource, but I guess not?
[2012-06-22 17:46:43 -0400] jtimberman: gene: in the node's expanded run list and any cookbooks that are listed as dependencies in the metadata.
[2012-06-22 17:47:06 -0400] jtimberman: so if you expanded run list had ["foo", "bar"], and "bar" depended on "baz", all three are downloaded.
[2012-06-22 17:47:25 -0400] jtimberman: cassarani: specify the actions you want to take on the service resource.
[2012-06-22 17:47:28 -0400] gene: jtimberman : got it. do you know where in the sequence on that anatomy page it happens
[2012-06-22 17:47:33 -0400] jtimberman: cassarani: action :nothing is the default for service.
[2012-06-22 17:47:51 -0400] jtimberman: cassarani: action [:enable,:start] is commonly used to make sure the service is enabled at boot time and started.
[2012-06-22 17:48:04 -0400] jtimberman: gene: "synchronize cookbooks" stage.
[2012-06-22 17:48:11 -0400] gene: got it, that was my assumption
[2012-06-22 17:48:12 -0400] cassarani: jtimberman: so if I'm using the default provider, action :enable will run update-rc.d?
[2012-06-22 17:48:15 -0400] jtimberman: gene: is when the cookbooks are synchronized, or downloaded :)
[2012-06-22 17:48:24 -0400] jtimberman: cassarani: as long as your platform is supported :)
[2012-06-22 17:48:28 -0400] jtimberman: cassarani: ubuntu or debian?
[2012-06-22 17:48:34 -0400] cassarani: jtimberman: clever - Ubuntu 12.04
[2012-06-22 17:48:48 -0400] jtimberman: cassarani: yeah you should be fine then as long as your service behaves properly :)
[2012-06-22 17:48:56 -0400] gene: jtimberman : thanks
[2012-06-22 17:49:05 -0400] cassarani: jtimberman: excellent, thank you :)
[2012-06-22 17:49:40 -0400] cassarani: jtimberman: so should I do a template "/etc/init.d/#{myservice}" do ... end, followed by service myservice do action :enable end ?
[2012-06-22 17:49:51 -0400] cassarani: since I do have to create my init script manually
[2012-06-22 17:52:05 -0400] jtimberman: cassarani: https://gist.github.com/2974207
[2012-06-22 17:52:28 -0400] cassarani: jtimberman: brilliant
[2012-06-22 18:00:04 -0400] cheeseplus: perhaps a silly question - when using knife to upload a cookbook is there a way to get it to not use the directory name as the cookbook name?
[2012-06-22 18:00:44 -0400] jtimberman: cheeseplus: i don't think so, maybe you can set name "thing" in the cookbook's metadata but i haven't tried that.
[2012-06-22 18:01:28 -0400] cheeseplus: jtimberman: I've just been renaming the directories before upload but it gets confusing when working on forks
[2012-06-22 18:01:33 -0400] cheeseplus: lots of "git remote -v"
[2012-06-22 18:02:39 -0400] gyre007: randomautomator, ok so I managed to get it working...BUT I found out that node object is NOT available in custom providers...if you need something from node object properties (ie attributes) you can pass it to the provider via particular resource...
[2012-06-22 18:08:02 -0400] miah: moin
[2012-06-22 18:09:59 -0400] cheeseplus: moin moin
[2012-06-22 18:16:08 -0400] cassarani: jtimberman: so surely if I'm using Upstart as a provider, :enable does nothing, right?
[2012-06-22 18:16:19 -0400] cassarani: jtimberman: and also, can I technically say that an Upstart service supports :restart?
[2012-06-22 18:16:25 -0400] cassarani: since Upstart handles restart as a stop-start
[2012-06-22 18:16:36 -0400] jtimberman: cassarani: yes i believe so for restart. i don't know for sure about enable.
[2012-06-22 18:16:49 -0400] cassarani: presumably enable is just a noop
[2012-06-22 18:17:03 -0400] cassarani: if you're using Upstart that is
[2012-06-22 18:17:12 -0400] cassarani: no update-rc.d necessary
[2012-06-22 18:17:46 -0400] jtimberman: looks like we update the init file
[2012-06-22 18:17:46 -0400] jtimberman:           conf.search_file_replace(/^#start on/, "start on")
[2012-06-22 18:17:54 -0400] jtimberman: to enable the service.
[2012-06-22 18:19:49 -0400] cassarani: jtimberman: lol fair enough
[2012-06-22 18:19:49 -0400] swolf: i'm walking through the fast start guide for windows, step 4/5 -- the validation.pem file that knife gets seems to be empty :-\
[2012-06-22 18:20:02 -0400] cassarani: useful if your templates have that line commented out by default I guess
[2012-06-22 18:23:28 -0400] jessicab: swolf - is the .chef/org-validator.pem file empty too? im pretty sure its just copying that to /etc/chef/validation.pem
[2012-06-22 18:25:09 -0400] randomautomator: ahhh nice to know gyre007 , i'll have to keep that in mind
[2012-06-22 18:25:31 -0400] swolf: jessicab:  no.  the only thing i can say there is, am i missing something by having that file in chef-repo/chef as opposed to chef-repo/.chef?  i'm just confused by having a period in the folder name, maybe its syntax i'm unused to
[2012-06-22 18:25:46 -0400] swolf: [that file] meaning the org-validator.pem
[2012-06-22 18:26:31 -0400] miah: upstart doesn't really support restart though
[2012-06-22 18:26:46 -0400] miah: because most people make the assumption that they can restart a service, even if it isn't already started
[2012-06-22 18:27:06 -0400] miah: upstart doesn't correctly handle that
[2012-06-22 18:27:29 -0400] miah: so be careful with upstart and restart
[2012-06-22 18:27:30 -0400] jessicab: swolf - the . just means its a hidden file in linux.. itll be much easier to set it up with that, otherwise youd have to send knife the location of the knife config with -c
[2012-06-22 18:28:05 -0400] swolf: jessicab:  gotcha, thanks.
[2012-06-22 18:30:10 -0400] barefoot: how can I make sure to restart a runit_service on every run?
[2012-06-22 18:31:22 -0400] miah: uh. every run?
[2012-06-22 18:31:33 -0400] miah: idempotence?
[2012-06-22 18:31:33 -0400] bawt: idempotence is really hard to test, running 2x only ensures that your not_if works, you might fail in any number of clever ways if something else in the context changes
[2012-06-22 18:31:44 -0400] miah: bawt, you fail.
[2012-06-22 18:32:01 -0400] swolf: jessicab: when i run the knife client list commant it looks in C:\chef
[2012-06-22 18:32:21 -0400] swolf: so had to pass it C:\git\chef-repo\chef
[2012-06-22 18:32:27 -0400] swolf: perhaps that is the root of my problem?
[2012-06-22 18:32:51 -0400] swolf: i see the .rb file is set for               validation_key           "#{current_dir}/ipcommerce-validator.pem"
[2012-06-22 18:33:15 -0400] swolf: but i was executing the above command from c:\git\chef-repo\chef
[2012-06-22 18:33:23 -0400] swolf: err.. one down from there
[2012-06-22 18:33:34 -0400] swolf: cuz in the directory it was picking up knife.rb when i ran the knife command
[2012-06-22 18:33:55 -0400] jessicab: swolf - hm interesting.. im pretty sure it just checks there if it cant find anything in the .chef file locally.. if youre in chef-repo when you run the command it should work if .chef is within that folder
[2012-06-22 18:34:33 -0400] JasonBox: bawt: lol
[2012-06-22 18:34:45 -0400] jessicab: that line sounds correct, its just telling it that knife.rb is in the same folder as your org key
[2012-06-22 18:44:37 -0400] hoover_damm: swolf, current_dir = File.dirname(__FILE__) ?
[2012-06-22 18:45:02 -0400] hoover_damm: and if it needs more tlc
[2012-06-22 18:49:48 -0400] swolf: ok, so here was my problem.  i didnt do a mkdir to create the .chef file, and when you try to create a folder in windows explorer it wont let you do the .{foldername} thing, so i just named my folder chef.  and while i passed the location of my config file into the knife client list call, i didnt pass it into the knife configure client, and it was giving me a message that it couldn't find the knife config, but created the validation.pem file anyway.  and
[2012-06-22 18:49:49 -0400] swolf: that is why validation.pem was empty.  thanks for your help, poor job of following instructions on my part
[2012-06-22 18:50:01 -0400] swolf: *to create the .chef folder* i mean
[2012-06-22 18:50:58 -0400] jessicab: swolf - ah interesting, ill throw a tip on the page about creating the file, maybe thatll help the next person who follows it
[2012-06-22 18:51:06 -0400] hoover_damm: swolf, perhaps better instructions to indicate the difficulty of creating .chef?
[2012-06-22 18:51:14 -0400] hoover_damm: and the proper steps to do it?
[2012-06-22 18:51:24 -0400] hoover_damm: like jessicab offered
[2012-06-22 18:53:28 -0400] |shad0w|: bawt: forget idempotence
[2012-06-22 18:53:29 -0400] bawt: okay
[2012-06-22 18:53:43 -0400] |shad0w|: bawt: idempotence is http://wiki.opscode.com/display/chef/Glossary#Glossary-Idempotent
[2012-06-22 18:53:54 -0400] |shad0w|: idempotence?
[2012-06-22 18:53:54 -0400] bawt: idempotence is http://wiki.opscode.com/display/chef/Glossary#Glossary-Idempotent
[2012-06-22 18:54:37 -0400] jessicab: hoover_damm - yea, i just threw one on there.. i was just editing that page yesterday anyways :P
[2012-06-22 18:55:03 -0400] hoover_damm: cool
[2012-06-22 18:55:59 -0400] jameson: is it common practice to store deployment keys on ec2 images or in a files/cookbook ?
[2012-06-22 18:56:03 -0400] jameson: er cookbook/files
[2012-06-22 19:00:35 -0400] senthilr: no, not in images
[2012-06-22 19:00:43 -0400] swolf: perhaps.  you all are super helpful!  the instructions definitely say to use .mkdir.  i googled 'how to create file with a period in the name Windows' and it came up with this http://superuser.com/questions/64471/create-rename-a-file-folder-that-begins-with-a-dot-in-windows, which basically says to use mkdir lolz.  i think more importantly what happened is my %HOMEPATH% is set to \, and thus i couldn't concat it with anything for a command.  also, when i
[2012-06-22 19:00:44 -0400] swolf: installed git i used the defaults which seem to be missing the shell extension to give me the git command, even after logging out and logging back in, so those to things combined kind of got me away from following the directions as closely.  one other thing, for awhile after installing chef i could ony make the chef commands in command prompt from c:\opscode\chef\bin, at some point they started working, but the fix wasn't re-opening cmd prompt.  my poor u
[2012-06-22 19:00:44 -0400] swolf: nderstanding of how to register commands to work in cmd.exe has me stumped here.
[2012-06-22 19:01:38 -0400] swolf: sorry for the mouthful :-x
[2012-06-22 19:01:57 -0400] jameson: swolf: you using the providers for git?
[2012-06-22 19:02:20 -0400] jameson: senthilr: so I should be including the id_rsa in files/ oh my cookbooks? is there a better way?
[2012-06-22 19:03:11 -0400] jessicab: swolf - hm.. weird, i havent seen that when ive been testing in windows, reopening cmd windows just always seems to work.. about git, are you sure you selected the middle options both times?
[2012-06-22 19:03:33 -0400] jessicab: swolf - during install that is, gives you a choice of three options twice
[2012-06-22 19:10:17 -0400] swolf: jameson: i'm new to git so i couldn't say.  i've only used svn before
[2012-06-22 19:10:58 -0400] swolf: jessicab:  mm i saw the middle option but didnt select it.  i should have, but figured since i didnt know what i was doing to just choose the default ;p
[2012-06-22 19:12:21 -0400] swolf: mm, just noticed it says to change the cookbook path in the knife.rb to this
[2012-06-22 19:12:22 -0400] swolf: cookbook_path            ["#{ENV['HOME']}/chef-repo/cookbooks"]
[2012-06-22 19:12:33 -0400] swolf: but %HOME% doesnt seem to register as an environment variable
[2012-06-22 19:12:40 -0400] swolf: so i'll leave it as is
[2012-06-22 19:13:26 -0400] jessicab: swolf - leaving it as is wont work, but you could provide the full path.. i think env[home] is just %HOMEPATH% in windows though
[2012-06-22 19:15:07 -0400] jessicab: swolf - if youre curious.. it just doesnt work as it is because windows doesnt understand the /../ part.. in linux that means go back one directory
[2012-06-22 19:15:59 -0400] gmcinnes3: Hi y'all. What's the recommended way to install the open source chef server these days?  apt-get? does that get me the embedded ruby etc?
[2012-06-22 19:29:10 -0400] cwj: to get the embedded ruby goodness you must use the omnibus installer
[2012-06-22 19:29:40 -0400] cwj: http://www.opscode.com/chef/install/
[2012-06-22 19:31:14 -0400] mattray: cwj: that's the client
[2012-06-22 19:31:55 -0400] mattray: gmcinnes3: the omnibus server hasn't been released yet
[2012-06-22 19:32:23 -0400] mattray: so it's http://wiki.opscode.com/display/chef/Installing+Chef+Server I believe
[2012-06-22 19:32:39 -0400] cwj: ahso
[2012-06-22 19:32:58 -0400] gmcinnes3: oh. gotcha.
[2012-06-22 19:35:23 -0400] miah: i think if you want to beta the omnibus server though you can get on the list
[2012-06-22 19:35:34 -0400] miah: email adam =)
[2012-06-22 19:38:32 -0400] jameson: i wish the Chef::Providers::Git woudl let you switch between branches :(
[2012-06-22 19:38:37 -0400] swolf: jessicab: gotcha, thanks.  the /../ does work for windows though, at least in certain contexts which i've used it
[2012-06-22 19:39:14 -0400] hoover_damm: omnibus-server is the same as the omnibus client just actually working no?
[2012-06-22 19:43:53 -0400] jameson: am I the only person who uses git inside of a recipe?
[2012-06-22 19:44:34 -0400] hoover_damm: jameson, git clone then git checkout branch?
[2012-06-22 19:44:41 -0400] jameson: hoover_damm: yeah
[2012-06-22 19:44:46 -0400] hoover_damm: :(
[2012-06-22 19:44:53 -0400] hoover_damm: it's been awhile since I had to do thta... pre git provider days
[2012-06-22 19:45:01 -0400] rocket: is there a way to define a conditional run resource depending on the existance of another resource?  eg I am trying to make a resource depend on a resource in an iptables recipe
[2012-06-22 19:45:03 -0400] jameson: you used script ?
[2012-06-22 19:45:11 -0400] hoover_damm: yup
[2012-06-22 19:45:24 -0400] rocket: if the iptables recipe isnt defined do not run the iptables definition ...
[2012-06-22 19:45:40 -0400] jameson: I'm leaning towards changing that in provider and filing it as an issue (git provider doesn't effectively provide git) or something
[2012-06-22 19:46:18 -0400] jameson: rocket: there is a if not node[:recipes][:iptables] then...
[2012-06-22 19:48:58 -0400] toffermann: I'm new to chef. After I use Apt recipe to get 'apt-get update' to run, what's the best way to get 'apt-get upgrade' to run (to apply security updates)?
[2012-06-22 19:49:19 -0400] jameson: rocket: try node.recipes.include?("cookbook-name::recipe-name")
[2012-06-22 19:49:38 -0400] jameson: rocket: see mongodb cookbook's default recipe
[2012-06-22 19:50:13 -0400] FiremanDecko: tofferman: since apt-get update always updates you can simply define another resource after that to execute apt-get upgrade
[2012-06-22 19:50:15 -0400] hoover_damm: toffermann, there's a cron you can setup to do that
[2012-06-22 19:50:35 -0400] hoover_damm: debian/ubuntu provides it
[2012-06-22 19:50:37 -0400] rocket: thanks I will take a look at that one
[2012-06-22 19:50:37 -0400] hoover_damm: i forget the name of it
[2012-06-22 19:51:01 -0400] FiremanDecko: Is it possible to bulk update node attributes? either using knife or pychef?
[2012-06-22 19:51:14 -0400] FiremanDecko: I want to update 1000 nodes and i dont want to make 1000 API requests
[2012-06-22 19:51:38 -0400] hoover_damm: FiremanDecko, yes
[2012-06-22 19:51:44 -0400] jameson: rake roles?
[2012-06-22 19:51:48 -0400] jameson: :X
[2012-06-22 19:52:23 -0400] hoover_damm: FiremanDecko, search for the nodes you want to modify and enumerate it
[2012-06-22 19:53:08 -0400] hoover_damm: FiremanDecko, .each do |name| b=Chef::Node.load("#{name.name}")
[2012-06-22 19:53:20 -0400] hoover_damm: horrible example but basically you need to enumerate it
[2012-06-22 19:53:32 -0400] mattray: FiremanDecko: that's why we use Roles
[2012-06-22 19:53:39 -0400] hoover_damm: if you want to override a node value
[2012-06-22 19:53:41 -0400] hoover_damm: roles / etc
[2012-06-22 19:53:42 -0400] FiremanDecko: right. I need to find out if pychef can support this i suppose.
[2012-06-22 19:53:50 -0400] hoover_damm: pychef can do it
[2012-06-22 19:53:53 -0400] mattray: update the attribute in the Role and everyone who uses that Role will get the update on their next chef-client run
[2012-06-22 19:54:13 -0400] FiremanDecko: I want to update half the nodes in a role, then later update the other half
[2012-06-22 19:54:38 -0400] mattray: FiremanDecko: perhaps an Environment?
[2012-06-22 19:54:40 -0400] mattray: or 2
[2012-06-22 19:54:49 -0400] toffermann: FiremanDecko: I've been sticking to using the opscode recipes as I start out (I figure they're the best examples of how to use chef properly.)
[2012-06-22 19:55:11 -0400] toffermann: FiremanDecko: Is there no pre-written opscode recipe that will run 'apt-get upgrade'?
[2012-06-22 19:55:21 -0400] hoover_damm: that's when you use search and you tell it how many rows to retrieve
[2012-06-22 19:55:24 -0400] FiremanDecko: I had considered environments also. and tags.
[2012-06-22 19:55:37 -0400] hoover_damm: and then tell it to start at the next row you stopped at..
[2012-06-22 19:55:37 -0400] jtimberman: toffermann: while that is an intended goal, our recommended practices have evolved along with the tool, and we do have a fair amount of technical debt to clean up
[2012-06-22 19:55:41 -0400] hoover_damm: to take the next half
[2012-06-22 19:56:06 -0400] jtimberman: we're working with andrew crump of the foodcritic project to have that tool lint check cookbooks per current recommendations, and get our own cookbooks in line with that
[2012-06-22 19:56:10 -0400] hoover_damm: the easiest answer is to set the attribute on all the nodes and control your chef run better
[2012-06-22 19:56:36 -0400] jtimberman: toffermann: we don't run 'apt-get upgrade' in a recipe because we don't recommend doing a full system upgrade like that with chef directly.
[2012-06-22 19:56:55 -0400] jameson: jtimberman: github pull-reqs wont be handled unless i submit a ticket as well?
[2012-06-22 19:56:56 -0400] jtimberman: it is better to specifically tell chef which packages you want to always upgrade with action :upgrade on their package resource(s).
[2012-06-22 19:57:18 -0400] jtimberman: jameson: we probably won't notice them until there's a ticket in resolve state.
[2012-06-22 19:57:43 -0400] jtimberman: jameson: since i'm on all 127 cookbooks, plus all our internal projects, i get a fuckton of git mail notifications :)
[2012-06-22 19:58:07 -0400] hoover_damm: jtimberman, i bet you filter those
[2012-06-22 19:58:10 -0400] jameson: jtimberman: so.. I will be filing a ticket then.
[2012-06-22 19:58:15 -0400] jtimberman: jameson: yes please.
[2012-06-22 19:58:19 -0400] FiremanDecko: thx: hoover
[2012-06-22 19:58:21 -0400] jtimberman: contributing?
[2012-06-22 19:58:21 -0400] bawt: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-06-22 19:58:39 -0400] jameson: contributing
[2012-06-22 19:58:43 -0400] toffermann: jtimberman: I see. I've been using chef with vagrant. When you 'vagrant up' with the default base box, it's pretty out of date, so I always run apt-get upgrade to upgrade the 40 or so packages that need it.
[2012-06-22 19:59:10 -0400] toffermann: jtimberman: Obviously, this is just playing around with chef. Not production.
[2012-06-22 19:59:24 -0400] hoover_damm: toffermann, that's more of a image issue
[2012-06-22 19:59:30 -0400] jameson: toffermann: you can upgarade then repackage the image
[2012-06-22 19:59:34 -0400] hoover_damm: toffermann, you can have the same problem on ec2 if you use ubuntu's default images
[2012-06-22 20:00:04 -0400] hoover_damm: toffermann, and updating the kernel and half the system on some 'cloud' or vagrant box feels eh wrong?
[2012-06-22 20:00:05 -0400] toffermann: jtimberman: So, I was just wondering how to get chef to do it automatically.
[2012-06-22 20:00:27 -0400] erikh: the hard part is when the dialogues come up for stuff you don't really care about
[2012-06-22 20:00:28 -0400] toffermann: But it sounds like the real solution is to use a better base image/vm.
[2012-06-22 20:00:33 -0400] erikh: throws the bootstrap process for a real loop
[2012-06-22 20:00:56 -0400] erikh: e.g., (for me at least) postfix
[2012-06-22 20:00:59 -0400] hoover_damm: toffermann, you end up owning your own basically
[2012-06-22 20:01:02 -0400] hoover_damm: :(
[2012-06-22 20:01:09 -0400] erikh: building an AMI is really easy though.
[2012-06-22 20:01:23 -0400] hoover_damm: for me or you.  Not for everyone
[2012-06-22 20:02:00 -0400] rocket: toffermann: veewee to rebuild the base image... otherwise you could just call a execute "yum update" or your distros equivalent at the beginning of a site specific cookbook
[2012-06-22 20:02:06 -0400] hoover_damm: how many people remove the orphan ssh keys? clean up your .emacs.d or .viminfo?
[2012-06-22 20:02:24 -0400] hoover_damm: you don't have to, but having a clean AMI to start from that's dependable is a lifesaver
[2012-06-22 20:02:52 -0400] hoover_damm: we constantly get hit with the 1024 fd limit when we use the ubuntu images
[2012-06-22 20:03:03 -0400] rocket: and its faster over time .. eg many sites rebuild their base boxes every week or every month etc.
[2012-06-22 20:03:08 -0400] hoover_damm: sure you can modify limits in cloudinit but it's not early enough for me
[2012-06-22 20:03:18 -0400] hoover_damm: which then  you reboot.  At that point make the ami
[2012-06-22 20:03:19 -0400] hoover_damm: lol
[2012-06-22 20:05:15 -0400] erikh: we build our AMIs about every two weeks
[2012-06-22 20:05:32 -0400] geekbri: console-kit-daemon removal
[2012-06-22 20:05:50 -0400] hoover_damm: automate it?
[2012-06-22 20:05:53 -0400] erikh: we use chef to preseed the servers with a ton of stuff
[2012-06-22 20:06:09 -0400] geekbri: first thing i always remove from my ubuntu images :)
[2012-06-22 20:06:17 -0400] erikh: it's not vital they're rebuild so frequently, but it vastly improves deployment time
[2012-06-22 20:06:27 -0400] erikh: as code, bundles, etc gets seeded on them
[2012-06-22 20:07:17 -0400] hoover_damm: command-not-found
[2012-06-22 20:07:17 -0400] jameson: jtimberman: can chef bring nodes down (like an ec2 instance)
[2012-06-22 20:07:18 -0400] hoover_damm: first thing to go
[2012-06-22 20:07:58 -0400] toffermann: Ok. Thanks all, for the advice.
[2012-06-22 20:10:01 -0400] mattray: jameson: bring nodes down? like "knife ec2 server delete"?
[2012-06-22 20:10:29 -0400] jameson: mattray: that would gracefully shutdown
[2012-06-22 20:10:32 -0400] jameson: ?
[2012-06-22 20:10:57 -0400] hoover_damm: delete isn't exactly a graceful shutdown
[2012-06-22 20:11:04 -0400] geekbri: it issues an ec2 terminate
[2012-06-22 20:11:08 -0400] hoover_damm: if xen works right
[2012-06-22 20:11:09 -0400] mattray: why would you shut them down? ;)
[2012-06-22 20:11:12 -0400] hoover_damm: it can be a proper shutdown
[2012-06-22 20:11:32 -0400] hoover_damm: but if you depend on ec2's scheduler to always work right
[2012-06-22 20:13:18 -0400] mattray: send it a "shutdown" command via knife ssh?
[2012-06-22 20:13:25 -0400] hoover_damm: note, if you 'poweroff' it will go into a stopped state
[2012-06-22 20:13:32 -0400] hoover_damm: which will stop billilng except for EBS
[2012-06-22 20:14:04 -0400] hoover_damm: you can modify that behavior to 'terminate' instead of stop.  That is in your runtime parameters of when you create the instance
[2012-06-22 20:15:13 -0400] jtimberman: jameson: chef "can"
[2012-06-22 20:15:23 -0400] jtimberman: but that isn't really something you'd want to do in a recipe, i think
[2012-06-22 20:16:14 -0400] jtimberman: jameson: generally that's something you'd do with knife, or with a management console thing
[2012-06-22 20:16:58 -0400] jameson: jtimberman, mattray, hoover_damm: ok thx. so using knife would be the answer.
[2012-06-22 20:17:33 -0400] hoover_damm: using something external of chef is a best practice
[2012-06-22 20:18:03 -0400] hoover_damm: but there is nothing wrong with if chef_environment == "retirement" ..
[2012-06-22 20:18:16 -0400] jameson: heh
[2012-06-22 20:18:17 -0400] hoover_damm: and you can use the fog code to stop itself
[2012-06-22 20:18:19 -0400] hoover_damm: yes you can
[2012-06-22 20:19:31 -0400] leifmadsen: is this an appropriate forum to ask about errors with minitest? (the error being a TypeError I'm getting)
[2012-06-22 20:20:04 -0400] jtimberman: leifmadsen: using minitest in a cookbook or similar? or just general minitest unit testing some other ruby code?
[2012-06-22 20:20:11 -0400] leifmadsen: cookbook
[2012-06-22 20:20:17 -0400] jtimberman: certainly :)
[2012-06-22 20:20:18 -0400] leifmadsen: via minitest-handler
[2012-06-22 20:20:30 -0400] jtimberman: though i don't know who here might be familiar enough with that to answer (i'm not, yet0
[2012-06-22 20:20:47 -0400] leifmadsen: I think it might be a ruby error, let me get a pastebin and someone can look if they wish :)
[2012-06-22 20:20:54 -0400] leifmadsen: I dont' think it's the actual test that's the problem...
[2012-06-22 20:22:27 -0400] leifmadsen: http://pastebin.ca/2163954
[2012-06-22 20:22:47 -0400] leifmadsen: the error being: TypeError: no implicit conversion from nil to integer
[2012-06-22 20:33:20 -0400] cjs226: how can i test for the presence of node['attribute']['sub_attribute'] without encountering "NoMethodError: undefined method `[]' for nil:NilClass" when it's not set?
[2012-06-22 20:42:05 -0400] jameson: cjs226: node['attributre'] && node[attributt][subattribut]
[2012-06-22 20:42:16 -0400] jameson: cjs226: node['attributre'] && node[attributt][subattribut] == 'someattribute'
[2012-06-22 20:48:00 -0400] cjs226: jameson: thx for replying.  unfortunately i still receive "NoMethodError: undefined method `[]' for nil:NilClass" when subattribute isn't set with that syntax
[2012-06-22 20:49:20 -0400] ashb: cjs226: nopaste a snippet of thecode you have now
[2012-06-22 20:52:27 -0400] jameson: cjs226: sounds like a scope or a ruby error.  because the && should verify up to existence
[2012-06-22 20:57:02 -0400] PapaSierra: morning. i have set up a brand new server on rackspace. ubuntu 12. a friend has set up a recipe repo on git hub. being that the server is empty i'm looking at setting up chef solo. this looks interesting as it sets up ruby then chef. it dies on line 48
[2012-06-22 20:57:40 -0400] PapaSierra: interestingly the only tract of solo.rb on the server at this point is in: /usr/lib/ruby/gems/1.8/gems/chef-10.12.0/lib/chef/application/solo.rb
[2012-06-22 20:59:42 -0400] ashb: cjs226: jameson: ['attribute'] vs [attribute]
[2012-06-22 21:00:01 -0400] ashb: node['attribute'] && node['attribute']['somesubattr']
[2012-06-22 21:11:21 -0400] cjs226: jameson, & ashb: thx for the assistance, unfortunately I've run out of time.  i'll pick this up in the morning.
[2012-06-22 21:13:26 -0400] PapaSierra: can anyone shed light on why solo.rb would be placed in that odd location? ^
[2012-06-22 21:13:50 -0400] cheesepl_: just testing out cookbook I know works with chef-server with chef-solo and vagrant and getting: TypeError: superclass mismatch for class Tuple
[2012-06-22 21:14:45 -0400] cheesepl_: looks like it is catching on this line: 1   class Tuple < DelegateClass(Array) - any ideas?
[2012-06-22 21:15:03 -0400] hippiehacker: I just registered a client (client.pem was created, and it shows up in knife client list), but it's getting 401 Unauthorized when it tries to setup its own node (hosted-chef) when running chef-client
[2012-06-22 21:17:44 -0400] jelder_: any advice on troubleshooting "Net::HTTPServerException: 403 "Forbidden"" on a new machine?
[2012-06-22 21:18:19 -0400] jelder_: this is with managed chef
[2012-06-22 21:19:37 -0400] cheesepl_: jelder_: I do recall hearing about some routing problems earlier
[2012-06-22 21:19:58 -0400] jelder_: routing problems, like an opscode outage?
[2012-06-22 21:20:10 -0400] hippiehacker: jelder_: https://gist.github.com/2975268 I'm getting similar errors, but it's 401 not authorized
[2012-06-22 21:20:27 -0400] cheesepl_: jelder_: as I recall it was a router along the way for some people
[2012-06-22 21:20:59 -0400] jelder_: cheesepl_:  i don't see how a routing issue could cause layer 7 errors
[2012-06-22 21:21:24 -0400] cheesepl_: just passing along what I heard
[2012-06-22 21:23:38 -0400] mattray: did the client already exist and you're trying to create it again?
[2012-06-22 21:23:47 -0400] mattray: you can't reuse nodes
[2012-06-22 21:24:03 -0400] jelder_: yeah i think that was it, missed a step
[2012-06-22 21:24:32 -0400] mattray: knife node delete blah; knife client delete blah
[2012-06-22 21:24:47 -0400] mattray: seems like there should be a purge for knife node delete
[2012-06-22 21:24:53 -0400] jelder_: agree
[2012-06-22 21:25:08 -0400] mattray: since I think it's there for some of the knife cloud plugins
[2012-06-22 21:26:08 -0400] randomautomator: hey guys i'm having a little problem with attribute overriding
[2012-06-22 21:26:18 -0400] randomautomator: i can only get it to work if i apply it to the environment profile
[2012-06-22 21:26:24 -0400] randomautomator: and not when i do the following: https://gist.github.com/2975293
[2012-06-22 21:26:40 -0400] randomautomator: can anyone explain?
[2012-06-22 21:34:07 -0400] mattray: randomautomator: what value is on your node?
[2012-06-22 21:34:40 -0400] mattray: knife node show debian05.testing.net -a code
[2012-06-22 21:34:45 -0400] jameson: how do i pull cookbooks from my hosted-chef?
[2012-06-22 21:34:55 -0400] mattray: jameson: knife cookbook download
[2012-06-22 21:36:06 -0400] jameson: yay
[2012-06-22 21:38:05 -0400] jameson: timops: hi tim
[2012-06-22 21:38:15 -0400] timops: hey jameson! how's it going?
[2012-06-22 21:38:24 -0400] timops: just replied to your email =)
[2012-06-22 21:38:43 -0400] jameson: I was wondering what your handle was until you logged in
[2012-06-22 21:39:07 -0400] jameson: and I got pip to run with the -r options and passing in the file handle
[2012-06-22 21:39:15 -0400] jameson: er. file name
[2012-06-22 21:39:38 -0400] timops: awesome, good to hear it's working
[2012-06-22 21:40:43 -0400] rocket: I am trying to setup something like the mysql cookbook where it sets a database password
[2012-06-22 21:40:49 -0400] rocket: I am getting this error however
[2012-06-22 21:40:52 -0400] rocket: NameError: Cannot find a resource for secure_password on centos version 6.2
[2012-06-22 21:41:01 -0400] rocket: anyone have a clue what might be going on...
[2012-06-22 21:41:26 -0400] rocket: ultimately I am trying to call a mysql -uroot -p < "set_the_new_password"
[2012-06-22 21:41:42 -0400] rocket: and I am trying to clone pieces of the mysql cookbook but ran into this problem .. :/
[2012-06-22 21:44:34 -0400] randomautomator: matt this is my output:  knife node show debian05.testing.net -a code
[2012-06-22 21:44:34 -0400] randomautomator: code:
[2012-06-22 21:44:38 -0400] miah: iirc, the mysql cookbook uses the openssl cookbook to generate the password
[2012-06-22 21:44:43 -0400] miah: make sure your dependancies are met
[2012-06-22 21:45:11 -0400] randomautomator: code shows nothing
[2012-06-22 21:46:25 -0400] randomautomator: actually sorry let me grab it again
[2012-06-22 21:46:28 -0400] randomautomator: i forgot i changed something
[2012-06-22 21:48:25 -0400] randomautomator: shows this:
[2012-06-22 21:48:31 -0400] randomautomator: code:
[2012-06-22 21:48:31 -0400] randomautomator:   version:        201
[2012-06-22 21:50:16 -0400] randomautomator: actually let me start over because i think i submitted that in the chef webconsole
[2012-06-22 21:50:18 -0400] rocket: jtimberman: ping
[2012-06-22 21:50:22 -0400] mattray: randomautomator: what do you think it should be?
[2012-06-22 21:50:34 -0400] mattray: randomautomator: based on http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence, that looks good to me
[2012-06-22 21:50:52 -0400] rocket: I am trying to figure out this error
[2012-06-22 21:50:54 -0400] rocket: Cannot find a resource for secure_password
[2012-06-22 21:51:18 -0400] rocket: i have node.set_unless['key']['server_root_password'] = secure_password
[2012-06-22 21:51:23 -0400] rocket: set in a recipe
[2012-06-22 21:51:30 -0400] randomautomator: ok so i ran it again with the following json : https://gist.github.com/2975416
[2012-06-22 21:51:41 -0400] randomautomator: so chef-client -k runlist.json again with the new code value of "204"
[2012-06-22 21:51:46 -0400] rocket: and the openssl cookbook is depended on in the metadata file ..
[2012-06-22 21:52:06 -0400] jelder_: i'm now getting 'FATAL: Net::HTTPServerException: 403 "Forbidden"' every time i create an instance with knife-ec2, even when using a totally new hostname
[2012-06-22 21:52:08 -0400] randomautomator: now i do a knife node show debian05.testing.net -a code  : it shows   version:        201
[2012-06-22 21:52:21 -0400] randomautomator: so i don't see the override taking place
[2012-06-22 21:52:43 -0400] randomautomator: however if i goto the web administration portal and submit an override on the environment it seems to take
[2012-06-22 21:59:52 -0400] randomautomator: so any ideas on that matt?
[2012-06-22 22:01:34 -0400] mattray: not really
[2012-06-22 22:02:43 -0400] hippiehacker: anyone seen anything interesting for deploying presigned/generated ssl certificates via encrypted data bags?
[2012-06-22 22:04:10 -0400] miah: hippiehacker: ya. atomic penquin has a nice certificates cookbook
[2012-06-22 22:04:31 -0400] miah: hippiehacker: https://github.com/atomic-penguin/cookbook-certificate
[2012-06-22 22:05:07 -0400] hippiehacker: thanks miah
[2012-06-22 22:07:56 -0400] kvanderw: where would I find docs on how to setup node specific attributes like fqdn & ip address?
[2012-06-22 22:08:26 -0400] kvanderw: preferably a how-to - the wiki is hurting my head
[2012-06-22 22:08:33 -0400] kvanderw: :/
[2012-06-22 22:08:35 -0400] hoover_damm: ohai | less
[2012-06-22 22:08:48 -0400] hoover_damm: those map to node
[2012-06-22 22:08:50 -0400] mattray: kvanderw: those are set by ohai plugins
[2012-06-22 22:09:57 -0400] kvanderw: is there a place in the chef-repo folder structure where a file is provided that specifies node specific attributes? - this is for the build process
[2012-06-22 22:11:02 -0400] miah: kvanderw: no. convergence happens.
[2012-06-22 22:11:06 -0400] miah: convergence?
[2012-06-22 22:11:06 -0400] bawt: convergence is http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-06-22 22:12:24 -0400] kvanderw: if I can't put them in a file - then I'm too old to understand - where do I STATE the values so that a build time, the new machine is provisioned with the appropriate IP and FQDN
[2012-06-22 22:12:52 -0400] kvanderw: I understand (I think / hope) the convergence thing
[2012-06-22 22:13:17 -0400] kvanderw: I just don't seem to grok the location and structure of node specific variables.
[2012-06-22 22:13:33 -0400] miah: node specific variables don't really exist
[2012-06-22 22:13:50 -0400] miah: they are built based on attributes set by roles, environments, and cookbooks
[2012-06-22 22:14:09 -0400] kvanderw: so I'm a noob and using the wrong terms - surely there exists a way to define an IP address and FQDN ??
[2012-06-22 22:14:11 -0400] miah: during convergence, attributue priority causes your node to end up with a specific set of attributes
[2012-06-22 22:14:14 -0400] miah: no
[2012-06-22 22:14:21 -0400] miah: you could write a cookbook that sets that for a specific node
[2012-06-22 22:14:30 -0400] miah: but generally, we tend to think about 'services' rather than 'systems'
[2012-06-22 22:14:42 -0400] miah: knowing the ip or hostname of a specific server usually isn't as valuable as you'd think
[2012-06-22 22:14:57 -0400] miah: a node provides a series of resources or services
[2012-06-22 22:15:03 -0400] miah: those are what we care about. everythign else can be dynamic
[2012-06-22 22:15:25 -0400] kvanderw: so, if I can't know about the IP & FQDN, how do I deploy a replacement set of servers, restore data, and be back online??
[2012-06-22 22:15:51 -0400] josephholsten: kvanderw: there are a large set of attributes that are just populated by ohai, things that are kinda read-only, &c
[2012-06-22 22:15:52 -0400] kvanderw: i mean, convergence still has to obtain the information about the servers somewhere
[2012-06-22 22:16:27 -0400] miah: ohai provides the ip / fqdn, but its based on what the system has already had defined
[2012-06-22 22:16:35 -0400] miah: generally, your provisioning system takes care of assigning a ip
[2012-06-22 22:16:50 -0400] josephholsten: very useful for when using search to find a database master, or other service discovery
[2012-06-22 22:16:51 -0400] miah: consider: ec2. you don't know what ip you're going to get, because it really doesn't matter
[2012-06-22 22:18:24 -0400] kvanderw: true - but I'm not on ec2 - so, it does matter here
[2012-06-22 22:18:37 -0400] kvanderw: I'm just on a xenserver implementation
[2012-06-22 22:18:54 -0400] josephholsten: kvanderw: we're probably talking about different ideas of IP
[2012-06-22 22:19:08 -0400] miah: ip's for the most part don't matter to chef
[2012-06-22 22:19:11 -0400] josephholsten: a node shouldn't care what its IP is
[2012-06-22 22:19:11 -0400] miah: hostnames are for humans
[2012-06-22 22:19:20 -0400] kvanderw: it is grabbing dhcp - so there is communications -
[2012-06-22 22:19:46 -0400] josephholsten: but when a node needs to find another node, it can grab attributes like that through search
[2012-06-22 22:19:50 -0400] kvanderw: well,
[2012-06-22 22:19:52 -0400] kvanderw: I'm trying (badly so far) to write a recipe for 'aegir'
[2012-06-22 22:19:55 -0400] kvanderw: 'aegir' needs the FQDN during the install
[2012-06-22 22:20:09 -0400] miah: node['fqdn']
[2012-06-22 22:20:10 -0400] kvanderw: I don't really care about IP except I am trying to save a step
[2012-06-22 22:20:19 -0400] miah: and node['ipaddress']
[2012-06-22 22:20:20 -0400] kvanderw: but the FQDN is the biggie for me
[2012-06-22 22:20:22 -0400] miah: provide that detail
[2012-06-22 22:20:28 -0400] kvanderw: sure, I can reference them in the node
[2012-06-22 22:20:37 -0400] kvanderw: but how to get the data there to begin with
[2012-06-22 22:20:38 -0400] miah: you don't really set thoes, but you could have a cookbook that changes your settings, which would then cause thoes attributes to change
[2012-06-22 22:20:47 -0400] miah: the data doesnt exist to begin with
[2012-06-22 22:20:50 -0400] kvanderw: it doesn't read my mind yet anyway
[2012-06-22 22:20:56 -0400] miah: ohai just pulls that data out of things like 'ipconfig'
[2012-06-22 22:21:02 -0400] miah: or ifconfig
[2012-06-22 22:21:06 -0400] miah: or whatever depending on your system
[2012-06-22 22:21:18 -0400] josephholsten: kvanderw: that'll be in chef 12 ;-)
[2012-06-22 22:21:38 -0400] kvanderw: josephholsten: we can only hope :)
[2012-06-22 22:22:05 -0400] kvanderw: so I should not expect to be able to deploy a build with recipes and have access to a working system.
[2012-06-22 22:22:22 -0400] kvanderw: I need to go into it after the build and update the IP and FQDN to my needs.
[2012-06-22 22:22:25 -0400] kvanderw: ??
[2012-06-22 22:22:46 -0400] miah: if you want to _set_ a specific ip address, then you need to set up dhcp correctly. or write a cookbook that pulls down some configuration detail and sets it properly
[2012-06-22 22:23:10 -0400] miah: chef isn't build to "manage your ip" address out of the box. its a framework of api's that allows you to build such a thing
[2012-06-22 22:23:13 -0400] kvanderw: the "or write a cookbook" part is what I am interested in.  I think
[2012-06-22 22:23:39 -0400] miah: good luck writing a cookbook if you don't understand convergence =)
[2012-06-22 22:23:55 -0400] kvanderw: that is where I am now - and still trying to understand how to pass variables on a per node basis
[2012-06-22 22:23:57 -0400] josephholsten: sassy pants
[2012-06-22 22:23:59 -0400] miah: it shouldn't be _too_ difficult. i wrote a decent cookbook to manage hostnames. but never cared about ip's
[2012-06-22 22:24:17 -0400] kvanderw: starting with hostnames is happiness for me
[2012-06-22 22:24:26 -0400] miah: generally, most people in the chef world stopped caring about individual nodes
[2012-06-22 22:24:34 -0400] miah: and instead care about services, or roles those nodes are part of
[2012-06-22 22:24:40 -0400] josephholsten: does your dns server have fqdns for all IPs in your dhcp range?
[2012-06-22 22:25:14 -0400] kvanderw: josephholsten: good point - been years since I managed it that way - have to find some old docs, but yes, that would work I think.
[2012-06-22 22:25:20 -0400] hoover_damm: kvanderw, you don't pass attributes on a per node basis
[2012-06-22 22:25:20 -0400] sascha_d: at my first place using chef, everything was managed with static host names and IPs
[2012-06-22 22:25:24 -0400] hoover_damm: kvanderw, in general you use roles
[2012-06-22 22:25:30 -0400] hoover_damm: or environments to set attributes
[2012-06-22 22:25:30 -0400] sascha_d: we wrote a host file lwrp
[2012-06-22 22:26:04 -0400] miah: ya. thats the way to deal with it.
[2012-06-22 22:26:04 -0400] kvanderw: sascha_d: intersting - any details on that file?
[2012-06-22 22:26:18 -0400] miah: 'that file' is going to vary depending on your environment
[2012-06-22 22:26:41 -0400] josephholsten: the trick is having IPs and FQDNs minimally set up before you try to use chef. I haven't enjoyed what little I've done managing them with chef
[2012-06-22 22:26:46 -0400] sascha_d: https://github.com/automatedlabs/shared-cookbooks/tree/master/hosts
[2012-06-22 22:26:54 -0400] miah: essentially: you'll need a centralized db of some sort (could be a text file) that maps something unique to the node (eg a service tag) to a IP Address and FQDN
[2012-06-22 22:27:08 -0400] miah: then your cookbook will make a decision based on what it finds in that db
[2012-06-22 22:27:12 -0400] miah: the rest is basic unix shit
[2012-06-22 22:27:15 -0400] josephholsten: I should post our modified /etc/hosts lwrp
[2012-06-22 22:27:33 -0400] miah: i will release my hostname cookbook soon. i need to do some work on it. but i don't give a fuck about /etc/hosts
[2012-06-22 22:27:44 -0400] sascha_d: it makes me sad
[2012-06-22 22:28:19 -0400] sascha_d: I said, /etc/hosts host management should diaf (don't start your irc lines with /)
[2012-06-22 22:28:21 -0400] kvanderw: miah: as I said - a bit of a noob and lousy with all the terminology - but a unique identifier (eg a service tag) is all I would really need - the rest, as you say is basic unix stuff
[2012-06-22 22:28:44 -0400] miah: *cough* http://en.wikipedia.org/wiki/Hosts_(file)#History
[2012-06-22 22:28:59 -0400] miah: kvanderw: so, ohai pulls details out of your system. look at it.
[2012-06-22 22:29:11 -0400] sascha_d: The place where we used static hosts also didn't use DNS because "it might fail"
[2012-06-22 22:29:18 -0400] sascha_d: I WAS NOT IN CHARGE
[2012-06-22 22:29:23 -0400] kvanderw: sascha_d: LOL
[2012-06-22 22:30:17 -0400] josephholsten: we still have services mentioned in our hostnames
[2012-06-22 22:30:19 -0400] miah: sascha_d: such places are typically run by somebody who doesn't know their ass from a glory hole
[2012-06-22 22:30:26 -0400] josephholsten: it's a continual process
[2012-06-22 22:31:01 -0400] miah: ohai?
[2012-06-22 22:31:02 -0400] bawt: ohai is the tool used to expose system information as a JSON hash, used for the platform / platform version lookups and available via the node accessor or independent
[2012-06-22 22:31:19 -0400] miah: bawt: sometimes i want to punch you.
[2012-06-22 22:31:31 -0400] miah: bawt: other times i want to <3 you
[2012-06-22 22:31:35 -0400] hoover_damm: bawt, !chat miah
[2012-06-22 22:31:43 -0400] hoover_damm: too bad that don't work anymore
[2012-06-22 22:32:16 -0400] hoover_damm: bawt, chat
[2012-06-22 22:32:17 -0400] bawt: I mean, that's what it's trying to get data from birth to the private keys?
[2012-06-22 22:32:26 -0400] hoover_damm: oh it does

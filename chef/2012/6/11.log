[2012-06-11 00:50:31 -0400] sako: hey all, so is a ~/.chef a good place to store user key, org key, and knife configs?
[2012-06-11 00:50:46 -0400] sako: or is that used by chef in any way later?
[2012-06-11 00:59:44 -0400] hoover_damm: sako, I shove it in chef-repo/.chef/
[2012-06-11 00:59:54 -0400] hoover_damm: sako, then have it symlinked to ~/.chef/knife.rb and so forth
[2012-06-11 01:00:41 -0400] hoover_damm: sako, https://gist.github.com/1315560b320dc30699a8
[2012-06-11 01:01:56 -0400] hoover_damm: that's my .chef/knife.rb
[2012-06-11 01:02:14 -0400] hoover_damm: that allows you to export ORGNAME=anotherorg
[2012-06-11 01:02:16 -0400] hoover_damm: and :)
[2012-06-11 01:02:43 -0400] sako: i see.. good stuff
[2012-06-11 01:03:01 -0400] sako: hoover_damm: prob a good idea for me to just fork chef-repo from opscode github and make it private?
[2012-06-11 01:03:07 -0400] hoover_damm: yup
[2012-06-11 01:03:30 -0400] hoover_damm: sako, have you rtfm's the getting-started guide? and others?
[2012-06-11 01:04:32 -0400] hoover_damm: sako, https://github.com/opscode/chef-fundamentals/blob/master/slides/getting-started/01_slide.md
[2012-06-11 01:04:41 -0400] hoover_damm: it's kinda boring, but it covers a lot of the basics that you'll need
[2012-06-11 01:13:46 -0400] sako: hoover_damm: ive been covering the getting started
[2012-06-11 01:13:51 -0400] sako: cool thanks!
[2012-06-11 01:15:08 -0400] hoover_damm: cool good luck
[2012-06-11 01:45:01 -0400] sako: there is no way to change your opscode username huh?
[2012-06-11 01:45:55 -0400] erikh: any reason you can't just create a new user?
[2012-06-11 01:47:40 -0400] sako: that works too ill just do that
[2012-06-11 01:47:41 -0400] sako: thanks
[2012-06-11 02:31:10 -0400] dylst: when using encrypted data bags, the default value for the secret key file is:  /etc/chef/encrypted_data_bag_secret.  where does that file come from?
[2012-06-11 02:31:37 -0400] dylst: at the moment, my encrypted_data_bag_secret is stored in my local .chef/ directory
[2012-06-11 02:50:31 -0400] schuckles1: does anyone know of a nagios irc channel?
[2012-06-11 02:54:45 -0400] hoover_damm: schuckles1, like #nagios?
[2012-06-11 02:56:45 -0400] schuckles1: ya
[2012-06-11 02:59:46 -0400] LinuxHorn: dylst: You need to copy the secret file out to the nodes. I do this when bootstrapping as part of my bootstrap image/script
[2012-06-11 03:00:47 -0400] dylst: LinuxHorn:  Gotcha.  Where do you copy the secret file from exactly?  Just some location that's secure that the node has access to?
[2012-06-11 03:05:15 -0400] LinuxHorn: Personally I keep it in ~/.chef on my laptop instead of it my git repo, create an attribute in knife.rb with its location, and run code during bootstrap to call the location of the file from that knife attribute and copy the secret file to the node
[2012-06-11 03:08:14 -0400] dylst: LinuxHorn:  Ahhhh that makes perfect sense.  Thank you!
[2012-06-11 03:09:24 -0400] LinuxHorn: Np!  Im off to bed, pm me if you need help, and I'll send u the code I use in the am. It is really simple and I stole it from an example I found elsewhere
[2012-06-11 07:06:43 -0400] ranjibd: ark?
[2012-06-11 07:06:44 -0400] bawt_: ark is http://community.opscode.com/cookbooks/ark
[2012-06-11 07:35:59 -0400] Guest37193: hi, how cant i check if a data bag exists and if not go on with the next cookbook?
[2012-06-11 07:36:04 -0400] Guest37193: can*
[2012-06-11 07:51:04 -0400] Guest37193: how can i skip a cookbook and continue with the next one?
[2012-06-11 08:02:42 -0400] alclonky: is there a clean way to check if a data_bag/data_bag item exists in a recipe?
[2012-06-11 08:02:43 -0400] alclonky: cleaner then begin - rescue - else
[2012-06-11 09:11:57 -0400] BlaBlup: Hello
[2012-06-11 09:12:10 -0400] BlaBlup: can anybody help me to bring my chef server up agein
[2012-06-11 09:12:17 -0400] BlaBlup: we had a server crash
[2012-06-11 09:12:29 -0400] BlaBlup: I got it almost to work
[2012-06-11 09:12:49 -0400] BlaBlup: but get errors when i try to upload something to the chef server
[2012-06-11 09:13:30 -0400] BlaBlup: The errors we get are: "merb : chef-server (api) : worker (port 4001) ~ end of file reached - (EOFError)"
[2012-06-11 09:13:36 -0400] BlaBlup: on the chef server
[2012-06-11 09:23:25 -0400] jonlives: BlaBlup: tried restarting the worker process?
[2012-06-11 09:25:42 -0400] nacer: mmm there is some maintenance ?
[2012-06-11 09:26:05 -0400] nacer: opscode hosted api seem to have some issue
[2012-06-11 09:26:53 -0400] nacer: 503 error and 401
[2012-06-11 09:29:58 -0400] royvandermeij: hey guys, when i update a role. How can I update all nodes with that role?
[2012-06-11 09:30:07 -0400] royvandermeij: Do I have to ssh into all of them separately?
[2012-06-11 09:31:22 -0400] makuk66: if you have chef running on the nodes, then they will pick it up on the next run. If you don't, then you can use "knife ssh" to run chef-client manually on the nodes
[2012-06-11 09:31:46 -0400] royvandermeij: ah sweet
[2012-06-11 09:31:58 -0400] royvandermeij: and where is defined when the next run will be?
[2012-06-11 09:32:58 -0400] BlaBlup: I tried to restart every process (one at a time to see where the problme is)
[2012-06-11 09:33:09 -0400] BlaBlup: All came up without errors
[2012-06-11 09:33:27 -0400] kopf: I'm getting an error when trying to easy_install libxml2-dev inside a recipe: easy_install_package[libxml2-dev] (sapi::default line 87) had an error: Chef::Exceptions::Package: No version specified, and no candidate versi
[2012-06-11 09:33:32 -0400] kopf: on available for libxml2-dev
[2012-06-11 09:33:47 -0400] nacer: jtimberman: kallistec schisamo ? stop sleeping :)
[2012-06-11 09:35:12 -0400] makuk66: royvandermeij: that depends on how you've setup chef-client on your nodes. See http://wiki.opscode.com/display/chef/Chef+Client
[2012-06-11 09:36:04 -0400] royvandermeij: makuk66: oh nice. I did a setup using the bootstrap command
[2012-06-11 09:36:10 -0400] royvandermeij: so i don't think they have an interval
[2012-06-11 09:36:15 -0400] royvandermeij: but i'll check it out. thanks :)
[2012-06-11 09:36:28 -0400] royvandermeij: is hosted chef down?
[2012-06-11 09:36:43 -0400] royvandermeij: can't connect in the past 5 minutes
[2012-06-11 09:36:54 -0400] nacer: royvandermeij: same issue here
[2012-06-11 09:37:11 -0400] royvandermeij: it's working again
[2012-06-11 09:37:21 -0400] royvandermeij: although really slow (manage.opscode;com that is)
[2012-06-11 09:38:37 -0400] nacer: royvandermeij: it's back for me to
[2012-06-11 09:39:00 -0400] nacer: slow it's not really a problems , down it's a problem
[2012-06-11 09:39:49 -0400] royvandermeij: :)
[2012-06-11 09:40:23 -0400] nacer: lMy associate was saying, so if they are down, we can't deploy new release ? mmmm yes !
[2012-06-11 09:41:11 -0400] royvandermeij: if you're really scared about that you could just use your own chef server
[2012-06-11 09:41:46 -0400] nacer: royvandermeij: i'am not and i don;t want to manage my own serv
[2012-06-11 09:41:57 -0400] royvandermeij: same here ;-)
[2012-06-11 09:42:19 -0400] nacer: i have already managed my server and it's not worth it
[2012-06-11 09:43:18 -0400] royvandermeij: hmm.. i've created some roles
[2012-06-11 09:43:31 -0400] royvandermeij: but every role i've created has a run list entry with  "recipe[recipe[recipe[]]]"
[2012-06-11 09:43:39 -0400] royvandermeij: (all through hosted chef)
[2012-06-11 09:43:45 -0400] royvandermeij: and can't seem to delete that entry
[2012-06-11 09:44:06 -0400] nacer: Weird
[2012-06-11 09:44:52 -0400] royvandermeij: hmm.. it's only for empty roles
[2012-06-11 09:45:05 -0400] sonne: greetings :)
[2012-06-11 09:45:08 -0400] royvandermeij: if i place a recipe and remove that entry it stays away
[2012-06-11 09:45:17 -0400] nacer: royvandermeij: normally empty is empty :)
[2012-06-11 09:45:21 -0400] royvandermeij: but when i remove a recipe then that entry returns
[2012-06-11 09:45:26 -0400] royvandermeij: :)
[2012-06-11 09:45:52 -0400] nacer: royvandermeij: can you show me a role in this case ?
[2012-06-11 09:46:13 -0400] royvandermeij: i'm just setting everything up
[2012-06-11 09:46:15 -0400] royvandermeij: but I have three roles
[2012-06-11 09:46:24 -0400] royvandermeij: default, webserver, worker
[2012-06-11 09:46:37 -0400] royvandermeij: in default there's one cookbook named build-essentials
[2012-06-11 09:46:53 -0400] nacer: don;t empty recipe[] in you role
[2012-06-11 09:46:58 -0400] nacer: ^put
[2012-06-11 09:47:27 -0400] nacer: if your doing that
[2012-06-11 09:47:52 -0400] nacer: smoke + coffe time
[2012-06-11 09:47:59 -0400] royvandermeij: good plan
[2012-06-11 09:58:51 -0400] BlaBlup: I think i found the answer myself and I don't know why i didnt see it before
[2012-06-11 09:59:05 -0400] BlaBlup: the couchdb server was running out of space
[2012-06-11 12:22:28 -0400] Sephi: hi there
[2012-06-11 12:22:45 -0400] atomic-penguin: hello
[2012-06-11 12:23:01 -0400] Sephi: i installed chefsolo on Ubuntu serv 10.04 thx to opscode site
[2012-06-11 12:23:21 -0400] Sephi: but i thing i'm stuck in sort of chef bash
[2012-06-11 12:23:27 -0400] Sephi: how do i get out ?
[2012-06-11 12:23:40 -0400] atomic-penguin: chef bash?
[2012-06-11 12:24:00 -0400] Sephi: (got <name>@Chefsolo:~$ on the left of my screen)
[2012-06-11 12:24:04 -0400] Sephi: yup
[2012-06-11 12:24:12 -0400] Sephi: i dunno what this is
[2012-06-11 12:24:33 -0400] Sephi: typed help had a command list and option to get usual man and all
[2012-06-11 12:24:56 -0400] Sephi: but nothing to get back to the normal state
[2012-06-11 12:25:09 -0400] forestbird: Ctrl-D ?
[2012-06-11 12:25:09 -0400] royvandermeij: Sephi: looks like your just in your prompt
[2012-06-11 12:25:13 -0400] royvandermeij: not related to chef
[2012-06-11 12:25:33 -0400] atomic-penguin: Sephi, did you name your machine Chefsolo?
[2012-06-11 12:25:51 -0400] Sephi: forestbird: nop it just killed my term (putty)
[2012-06-11 12:25:58 -0400] Sephi: nop
[2012-06-11 12:26:05 -0400] Sephi: was Chef vm
[2012-06-11 12:26:11 -0400] Sephi: atomic-penguin:
[2012-06-11 12:26:46 -0400] Sephi: nop name of my machine was Chef_vm
[2012-06-11 12:28:12 -0400] atomic-penguin: I think royvandermeij is right.  It doesn't seem to have anything to do with Chef
[2012-06-11 12:28:59 -0400] atomic-penguin: If you're stuck in 'shef' the Chef shell, you can exit with 'exit' though
[2012-06-11 12:29:26 -0400] Sephi: it seems od to me
[2012-06-11 12:29:58 -0400] Sephi: let's go check all that thx anyway
[2012-06-11 12:36:42 -0400] Sephi: atomic-penguin, forestbird, royvandermeij found
[2012-06-11 12:37:02 -0400] Sephi: it was my machine name got confused by other vm i used to test
[2012-06-11 12:37:07 -0400] Sephi: sorry  -_-"
[2012-06-11 12:37:13 -0400] atomic-penguin: Sephi thats okay
[2012-06-11 13:55:33 -0400] superbenk: Hello.
[2012-06-11 13:57:51 -0400] superbenk: I'm adding a custom Ohai plugin using the Ohai cookbook (the network_addr plugin by Josh Timerman).  I've modified it to set another attribute, network['lanip'] that takes the IP address of a specific interface.  When I try to use this plugin in Vagrant, I find that the network attribute hash isn't populated until after the Chef run is complete so any cookbooks that use the attributes fail because they come up as 'nil'.
[2012-06-11 13:58:28 -0400] superbenk: I thought the Ohai auto-attribs were all populated prior to running other cookbooks so they should be available
[2012-06-11 14:05:27 -0400] ashb: superbenk: there's already network.interfaces.eth0.addresses in default ohai - can you not just use that?
[2012-06-11 14:06:32 -0400] ashb: $ ohai network/interfaces/eth0/addresses
[2012-06-11 14:07:03 -0400] superbenk: I could.  I was trying to simplify it for other recipes in an environment
[2012-06-11 14:07:13 -0400] ashb: superbenk: also look at the nginx plugin for how to get ohai plugins to reload inline i think
[2012-06-11 14:07:20 -0400] superbenk: The default interface changes based on environments
[2012-06-11 14:07:47 -0400] superbenk: the 'ipaddress' attribute won't work because the LAN isn't always on the interface with the default GW
[2012-06-11 14:08:35 -0400] superbenk: Once the node is provisioned successfully, the 'lanip' attribute is available and works fine
[2012-06-11 14:08:47 -0400] superbenk: It just breaks during initial provisioning
[2012-06-11 14:09:26 -0400] yfeldblum: superbenk, where in the run-list is "recipe[ohai]"?
[2012-06-11 14:09:31 -0400] superbenk: First
[2012-06-11 14:10:14 -0400] superbenk: In env_run_lists():  "vagrant" => ["recipe[ohai]", "role[snmp-vagrant]"] + base_recipes + ["role[dns-vagrant]", "role[dns-client]"]
[2012-06-11 14:10:32 -0400] ashb: superbenk: and confirm that its still first in the actual chef client logs?
[2012-06-11 14:10:41 -0400] ashb: ISTR something somewhere where the order of cookbooks was getting munged or reversed
[2012-06-11 14:10:54 -0400] superbenk: I'll check that
[2012-06-11 14:13:13 -0400] superbenk: It seems to happen during compilation of the client that it fails (prior to actually running anything)
[2012-06-11 14:13:58 -0400] yfeldblum: superbenk, what in particular fails?
[2012-06-11 14:15:52 -0400] superbenk: This in particular in the djbdns cookbook attributes (I've modified it to use the lanip attribute):
[2012-06-11 14:15:53 -0400] superbenk: default[:djbdns][:public_dnscache_allowed_networks] = [node['network']['lanip'].split(".")[0,2].join(".")]
[2012-06-11 14:16:08 -0400] superbenk: I get this error: FATAL: NoMethodError: private method `split' called for nil:NilClass
[2012-06-11 14:16:37 -0400] superbenk: Because node['network']['lanip'] is nill
[2012-06-11 14:18:37 -0400] zts: superbenk: the problem is that your ohai plugin isn't installed until the ohai cookbook runs, which happens after cookbook attribute files are processed
[2012-06-11 14:19:09 -0400] yfeldblum: superbenk, attributes files are loaded and run first for all cookbooks, probably in topologically-sorted order of cookbook metadata dependencies, then recipes are run in order of run-list
[2012-06-11 14:19:36 -0400] superbenk: So I need to take that logic out of the attributes file & it should be ok?
[2012-06-11 14:19:42 -0400] yfeldblum: superbenk, that's right
[2012-06-11 14:19:46 -0400] superbenk: I'll give it a shot
[2012-06-11 14:28:39 -0400] Sephi: hi there (again)
[2012-06-11 14:28:55 -0400] Sephi: i'm trying to use Chef solo and folowed tuto
[2012-06-11 14:29:14 -0400] Sephi: but where can i get the knife config file
[2012-06-11 14:29:31 -0400] Sephi: it was said i could dl it but i didn't find where
[2012-06-11 14:29:56 -0400] royvandermeij: Sephi: I'm also a chef beginner but I went directly for chef hosted (free for up to 5 nodes)
[2012-06-11 14:30:08 -0400] royvandermeij: imho is chef solo pretty pointless
[2012-06-11 14:30:16 -0400] jonathandade: Me too. It seems a good way to start
[2012-06-11 14:30:41 -0400] Sephi: yup i saw that you could get the config file there
[2012-06-11 14:30:54 -0400] yfeldblum: Sephi, knife is typically for use with chef-client + chef-server
[2012-06-11 14:31:03 -0400] yfeldblum: Sephi, rather than for use with chef-solo
[2012-06-11 14:31:12 -0400] Sephi: yfeldblum ok
[2012-06-11 14:31:25 -0400] Sephi: so i didn't figured out exactly what it did
[2012-06-11 14:31:41 -0400] superbenk: Thanks, guys seems removing that logic from the attributes solved my problems
[2012-06-11 14:31:48 -0400] Sephi: i thought it was to apply cookbooks to your chef client
[2012-06-11 14:33:45 -0400] yfeldblum: Sephi, knife is, in large part, a CLI for you to interact with your chef-server (or with hosted-chef or private-chef)
[2012-06-11 14:34:19 -0400] yfeldblum: superbenk, no probs
[2012-06-11 14:35:07 -0400] Sephi: yfeldblum right thx
[2012-06-11 14:36:53 -0400] royvandermeij: Sephi: my steps for getting everything working were: created hosted chef account, setup workstation, create fps, run knife bootstrap on workstation
[2012-06-11 14:36:56 -0400] royvandermeij: and done
[2012-06-11 14:43:33 -0400] yfeldblum: royvandermeij, why do you think chef-solo is pointless?
[2012-06-11 14:45:30 -0400] royvandermeij: well chef-solo is more for learning purposes right?
[2012-06-11 14:45:53 -0400] royvandermeij: but for learning purposes it's imho better to use hosted chef
[2012-06-11 14:45:58 -0400] royvandermeij: easier to setup
[2012-06-11 14:46:02 -0400] royvandermeij: easier to maintain
[2012-06-11 14:46:59 -0400] jelder: is there any way (perhaps using chef-solo) to edit and run a cookbook locally, without uploading it?
[2012-06-11 14:47:30 -0400] Sephi: royvandermeij: in fact it's not only for learning
[2012-06-11 14:48:12 -0400] mugenken: hi everyone. if i remove a recipe from a role that i gave to a node this recipe still shows up in the node info as shown be "knife node show NODE" under recipes. is that desired behaviour? how do i remove recipes from all nodes the edited role was applied to?
[2012-06-11 14:48:15 -0400] Sephi: i'm a student and work for 2 month
[2012-06-11 14:48:33 -0400] Sephi: they want me to choose and set their config manager
[2012-06-11 14:48:51 -0400] LinuxHorn: do i need to do anything to get a simple package action :install to work?  i have the apt recipe installed, do i need to call it from the recipe that i'm trying to install a package from?
[2012-06-11 14:49:19 -0400] LinuxHorn: i have this in a recipe i am calling:
[2012-06-11 14:49:20 -0400] ashb: LinuxHorn: apt receipe is only needed for calling apt-get update or installing a custom apt repo
[2012-06-11 14:49:20 -0400] LinuxHorn:  package "libxslt-dev" do
[2012-06-11 14:49:20 -0400] LinuxHorn:    action :install
[2012-06-11 14:49:20 -0400] LinuxHorn:  end
[2012-06-11 14:49:25 -0400] ashb: that alone should be enough
[2012-06-11 14:49:35 -0400] LinuxHorn: yeah, it's completely skipping that code
[2012-06-11 14:49:54 -0400] ashb: run with chef-client -l debug
[2012-06-11 14:49:59 -0400] ashb: what does it say its doing for that package?
[2012-06-11 14:50:48 -0400] mugenken: ah i see. it gets removed after the next chef run on the client :)
[2012-06-11 14:51:20 -0400] LinuxHorn: i don't see it mentioning apt at all frrom that recipe
[2012-06-11 14:51:22 -0400] LinuxHorn: but
[2012-06-11 14:51:24 -0400] LinuxHorn: [2012-06-11T14:50:15+00:00] DEBUG: Platform debian not found, using all defaults. (Unsupported platform?)
[2012-06-11 14:51:33 -0400] LinuxHorn: do i need to add supported os to metadata?
[2012-06-11 14:52:57 -0400] LinuxHorn: it loads the recipe, but then seems to skip over my package section and go right to installing the gem i want on line 27 of the recipe:  https://gist.github.com/2910412
[2012-06-11 14:53:07 -0400] royvandermeij: Sephi: I'd figure it's not just for learning. But i frankly don't see the point of using chef-solo when there is such a thing as a free hosted server
[2012-06-11 14:53:10 -0400] LinuxHorn: the gem fails install cause the packages i need weren't isntalled
[2012-06-11 14:53:25 -0400] ashb: LinuxHorn: debug logs please
[2012-06-11 14:53:38 -0400] LinuxHorn: check the gist i just posted
[2012-06-11 14:53:44 -0400] LinuxHorn: https://gist.github.com/2910412
[2012-06-11 14:53:53 -0400] LinuxHorn: if need be i'll post the full log, but i think that's enough
[2012-06-11 14:53:55 -0400] Sephi: royvandermeij: honnestly i don't get it
[2012-06-11 14:54:45 -0400] ashb: LinuxHorn: more context please
[2012-06-11 14:54:59 -0400] LinuxHorn: re-running debug now
[2012-06-11 14:55:01 -0400] ashb: and the full receipe code please
[2012-06-11 14:55:05 -0400] royvandermeij: Sephi: let's just agree to disagree then ;-)
[2012-06-11 14:55:39 -0400] LinuxHorn: ashb: https://gist.github.com/2910412
[2012-06-11 14:55:46 -0400] Sephi: Ok you got a point ^^"
[2012-06-11 14:56:36 -0400] LinuxHorn: ashb: recipe, https://gist.github.com/2910478
[2012-06-11 14:56:40 -0400] yfeldblum: royvandermeij, no, chef-solo is not "just" for learning
[2012-06-11 14:57:26 -0400] yfeldblum: royvandermeij, why do you think it is?
[2012-06-11 14:57:54 -0400] royvandermeij: I really don't want to step on any toes or anything like that, especially cause there has been so much work put in chef
[2012-06-11 14:58:25 -0400] royvandermeij: imho using chef-solo is more work
[2012-06-11 14:58:39 -0400] royvandermeij: syncing cookbooks
[2012-06-11 14:58:41 -0400] yfeldblum: royvandermeij, heh, this isn't about toes ... i'm curious about what led you to this conclusion?
[2012-06-11 14:58:41 -0400] royvandermeij: etc
[2012-06-11 14:58:45 -0400] ashb: LinuxHorn: dunno- try it
[2012-06-11 14:58:54 -0400] ashb: I never bother with the 'supports' stuff
[2012-06-11 14:59:04 -0400] LinuxHorn: supports didn't work
[2012-06-11 14:59:13 -0400] jonlives: chef-solo is commonly used on appliances, for one specific usecase, when you want to use cm but they can't call out.
[2012-06-11 14:59:17 -0400] LinuxHorn: and i verified those packages are in fact in the apt repo
[2012-06-11 14:59:19 -0400] royvandermeij: with chef server it's: boot up new server, bootstrap new server from workstation, run chef-client on node
[2012-06-11 14:59:26 -0400] LinuxHorn: i can install them with an apt-get install
[2012-06-11 14:59:37 -0400] ashb: LinuxHorn: oh i see the problem
[2012-06-11 14:59:44 -0400] ashb: line 32 says install this gem right now
[2012-06-11 14:59:59 -0400] royvandermeij: jonlives: but why use chef when it's for one specific usecase?
[2012-06-11 15:00:02 -0400] ashb: but the package's haven't been installed yet - they'll only get installed when the receipe converges
[2012-06-11 15:00:45 -0400] ashb: you either need to remove lines 32...36 or add similar .run_action(:install) for the two pacakges
[2012-06-11 15:00:46 -0400] jelder: it's too bad chef can't be made to just run apt-get update whenever apt-get install fails
[2012-06-11 15:01:00 -0400] jonlives: royvandermeij: because you might have a complex config setup, say to be run each time you ship software updates, and using chef might make that easier to manage. I'm thinking apply update -> run chef-solo to install bits, restart services etc. One major vendor does this very thing :)
[2012-06-11 15:01:16 -0400] jonlives: *at least one vendor I should say
[2012-06-11 15:01:39 -0400] royvandermeij: jonlives: ah, I'd never thought of that
[2012-06-11 15:01:45 -0400] royvandermeij: point taken
[2012-06-11 15:01:46 -0400] yfeldblum: royvandermeij, sure, but i'm curious how you came to the conclusion that chef-solo was only for learning
[2012-06-11 15:02:18 -0400] royvandermeij: because it's just for one server
[2012-06-11 15:02:20 -0400] jonlives: royvandermeij: github enterprise appliances do that very thing. chef-solo is *often* used for learning, but it's not the only use case :)
[2012-06-11 15:02:40 -0400] royvandermeij: I use another tool for the scenario you just described
[2012-06-11 15:02:52 -0400] royvandermeij: that's why i'd never thought of using chef for that :)
[2012-06-11 15:03:32 -0400] LinuxHorn: thx ashb
[2012-06-11 15:03:57 -0400] yfeldblum: royvandermeij, well, you can certainly use it with just one server - or, like joyent, you can use it to configure the a worldwide cloud
[2012-06-11 15:04:10 -0400] atomic-penguin: Relevant: http://www.youtube.com/watch?v=he7vxhm6v64
[2012-06-11 15:05:07 -0400] yfeldblum: royvandermeij, for example, were there various tutorials or getting-started articles that described using chef-solo on a single server?
[2012-06-11 15:05:23 -0400] royvandermeij: I only read one tutorial (railscasts.com)
[2012-06-11 15:05:45 -0400] royvandermeij: and by seeing that I figured for my self that for learning purposes hosted chef was a better solution
[2012-06-11 15:06:04 -0400] Sephi: OMAGAD i created a Monster >_<"
[2012-06-11 15:07:12 -0400] yfeldblum: royvandermeij, perhaps there's something you consider to be essential for a multi-server integrated configuration management, that chef-solo lacks?
[2012-06-11 15:07:17 -0400] barefoot: yfeldblum: saw the joyent cloud talk at chefcon, was interesting
[2012-06-11 15:08:22 -0400] zts: Sephi: naw, you just woke it
[2012-06-11 15:08:35 -0400] jonathandade: Never wake teh sleeping dragon
[2012-06-11 15:08:44 -0400] jonathandade: s/teh/the/
[2012-06-11 15:09:29 -0400] Sephi: zts i'm so sorry
[2012-06-11 15:09:36 -0400] Sephi: ^^"
[2012-06-11 15:09:38 -0400] magoo: running vagrant, ubuntu 10.04, provisioning from chef-server and this morning, provisioning our environment is resulting in multiple Hash Sum mismatch on various debian packages. I can ssh to the vm and run apt-get update and then provision again and it'll move past that one package and fail on another. Repeat and so forth.
[2012-06-11 15:10:01 -0400] magoo: it worked perfectly last week
[2012-06-11 15:10:12 -0400] zts: Sephi: don't worry :)
[2012-06-11 15:16:58 -0400] jelder: hello, i'm affected by http://tickets.opscode.com/browse/CHEF-3123, and i see that a fix has been committed to master, but it doesn't like that is part of the current prerelease gem. is there anything i can do to workaround?
[2012-06-11 15:17:14 -0400] royvandermeij: yfeldblum: well if it's multi server, why not just create a specific role for that server?
[2012-06-11 15:17:41 -0400] jelder: copying https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/mdadm.rb into mycookbook/providers throws NameError: uninitialized constant #<Class:0x00000003108170>::Chef::Mixin
[2012-06-11 15:21:12 -0400] patcon: msonnabaum: yo sonny-b, not sure if you've run into it yet, but the pear_channel resource fails to add pear.drush.org in chef 0.10.10 (but no issue with 0.10.8)
[2012-06-11 15:22:01 -0400] royvandermeij: oh well. Gotta go. thanks for the explanations
[2012-06-11 15:22:07 -0400] patcon: it seems it tried to channel-discover too soon or something. haven't had time to sort out how a change in chef core could alter the behavior of an unchanged pear_channel resource, but it's definitely a thing
[2012-06-11 15:26:28 -0400] patcon: anyone know how to choose a version via the omnibus installer script?
[2012-06-11 15:26:29 -0400] patcon: http://www.opscode.com/chef/install.sh
[2012-06-11 15:26:39 -0400] patcon: kinda like rvm does? is this doable?
[2012-06-11 15:27:44 -0400] patcon: re: `curl -L get.rvm.io | bash -s 1.14.1`
[2012-06-11 15:29:02 -0400] thom: curl ... |bash -v 10.12.0
[2012-06-11 15:29:10 -0400] thom: based on inspecting the thing
[2012-06-11 15:30:08 -0400] thom: patcon: ^
[2012-06-11 15:30:40 -0400] patcon: ah.. thanks thom. was just reading through -- platform_version was hardcoded at the top and I misunderstood :)
[2012-06-11 15:31:17 -0400] patcon: thanks and ugh -- i hate the be the pre-emptive asker :)
[2012-06-11 15:50:02 -0400] Sephi: hi (yeah i'm back)
[2012-06-11 15:50:34 -0400] Sephi: how do you do when you need to get somthing installed on an ubuntu nodes
[2012-06-11 15:50:40 -0400] Sephi: my point :
[2012-06-11 15:51:01 -0400] Sephi: got action:installed in the file but when i run it
[2012-06-11 15:51:32 -0400] ashb: installed or install?
[2012-06-11 15:51:39 -0400] Sephi: debug shows :apt-get install package=version_or whatever
[2012-06-11 15:51:46 -0400] Sephi: hem
[2012-06-11 15:52:01 -0400] Sephi: install
[2012-06-11 15:52:01 -0400] ashb: (just checking the typo was just now not in the cookbook itself)
[2012-06-11 15:52:16 -0400] Sephi: yup it's a typo from a cookbook
[2012-06-11 15:53:13 -0400] Sephi: but after this goes throug a exec command ( i thing ) and it specifies the version of the wanted package
[2012-06-11 15:53:53 -0400] Sephi: does anybody know where the 'install' procedure is written so i may check it
[2012-06-11 15:54:42 -0400] ashb: lib/chef/provider/package/apt.rb or similar
[2012-06-11 15:55:02 -0400] ashb: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/package/apt.rb
[2012-06-11 16:08:48 -0400] magoo: i'd like to send an email to my team upon successful git deploys. Is it possible to use a module in an after_ hook?
[2012-06-11 16:09:54 -0400] CharlieSu: Can anyone help me figure out why the JAVA cookbook is failing on me?  Clean install of Ubuntu 12.04 and Chef using Omnibus. https://gist.github.com/2a515a38982e9a55b7c8
[2012-06-11 16:11:27 -0400] CharlieSu: It seems like jdk_home isn't set. I'm not sure if I should be setting this myself or not.
[2012-06-11 16:11:45 -0400] Sephi: CharlieSu: best thing is to try
[2012-06-11 16:11:50 -0400] Sephi: set it and try
[2012-06-11 16:12:00 -0400] CharlieSu: Sephi: what do i set it to though?
[2012-06-11 16:12:29 -0400] Sephi: i don't know many about Java
[2012-06-11 16:12:47 -0400] Sephi: but what i do when something goes not the way i want to
[2012-06-11 16:13:03 -0400] Sephi: 1- run with debug level
[2012-06-11 16:13:12 -0400] knuckolls: magoo: probably best to use the exception and report handlers that chef provides
[2012-06-11 16:13:13 -0400] knuckolls: http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2012-06-11 16:13:19 -0400] Sephi: try with sudo mode
[2012-06-11 16:13:32 -0400] Sephi: do it step by step on another term
[2012-06-11 16:13:50 -0400] Sephi: to see if it's my command or chef that goes wrong
[2012-06-11 16:13:51 -0400] CharlieSu: i did run w/ debug
[2012-06-11 16:13:53 -0400] knuckolls: magoo: you can match such that it notifies you when the git resource fires and makes a change
[2012-06-11 16:14:21 -0400] Sephi: w/debug is it for Java ?
[2012-06-11 16:16:27 -0400] CharlieSu: Sephi: huh?
[2012-06-11 16:18:03 -0400] magoo: knuckolls: that'll do nicley
[2012-06-11 16:18:13 -0400] Sephi: you said i did run w/ debug
[2012-06-11 16:18:34 -0400] CharlieSu: Sephi: yes.. SEe the link above...
[2012-06-11 16:20:24 -0400] Sephi: yup sorry
[2012-06-11 16:21:26 -0400] CharlieSu: jtimberman: Since you helped with the Java cookbook can you take a look at this?  Clean install of Ubuntu 12.04 and Chef using Omnibus. https://gist.github.com/2a515a38982e9a55b7c8
[2012-06-11 16:22:52 -0400] Sephi: seems i won't be able to help you =(
[2012-06-11 16:23:26 -0400] CharlieSu: Sephi: it is this line  '        FileUtils.ln_sf jdk_home, java_home
[2012-06-11 16:23:36 -0400] CharlieSu: because jdk_home is blank
[2012-06-11 16:23:55 -0400] atomic-penguin: CharlieSu, you using 1.5.0 of java cb?
[2012-06-11 16:24:08 -0400] CharlieSu: atomic-penguin: yes
[2012-06-11 16:24:19 -0400] UForgotten: is there a good function in chef to search/replace text in a file or add it if it doesn't exist?  one thing I keep finding in cookbooks is where it just keeps appending the same crap each time chef runs
[2012-06-11 16:25:25 -0400] yfeldblum: UForgotten, https://github.com/opscode/chef/blob/master/chef/lib/chef/util/file_edit.rb
[2012-06-11 16:25:38 -0400] Sephi: CharlieSu: like i said i really don't know much in java
[2012-06-11 16:26:39 -0400] UForgotten: yfeldblum: thanks, I'll play around with that.
[2012-06-11 16:27:19 -0400] UForgotten: yfeldblum: I just need to find some examples of its use :)
[2012-06-11 16:31:01 -0400] CharlieSu: atomic-penguin: I'm using Ubuntu 12.04 and the only cookbook i've loaded is teh JAva 1.5.0 cookbook.. It is failing beause of line 63 which isn't being set because of line 57..   https://github.com/opscode/cookbooks/blob/master/java/recipes/openjdk.rb#L63
[2012-06-11 16:31:17 -0400] CharlieSu: atomic-penguin: here is the irb output of what I think is happening https://gist.github.com/045dfdc48749d6bf3668
[2012-06-11 16:31:59 -0400] chef_newbie: Hi - I am facing a really frustrating situation with chef and the HadoopCookbook cookbook -
[2012-06-11 16:32:08 -0400] chef_newbie: the cookbook has been upload to my chef server
[2012-06-11 16:32:18 -0400] chef_newbie: and I added the default recipe to my node
[2012-06-11 16:32:41 -0400] chef_newbie: I then connect to my node and run : sudo chef-client
[2012-06-11 16:33:06 -0400] chef_newbie: and it fails claiming that Cookbook hadoop not found
[2012-06-11 16:33:20 -0400] chef_newbie: it starts well : Loading cookbooks [HadoopCookbook, java, yum]
[2012-06-11 16:33:29 -0400] chef_newbie: but then claims a dependency on the hadoop cookbook
[2012-06-11 16:33:33 -0400] chef_newbie: that it does not have
[2012-06-11 16:33:39 -0400] atomic-penguin: CharlieSu, you think maybe its trying x86_64 instead of amd64?
[2012-06-11 16:33:46 -0400] chef_newbie: ( I am using : https://github.com/lnxchk/HadoopCookbook)
[2012-06-11 16:33:54 -0400] forestbird: atomic-penguin: that's the same
[2012-06-11 16:34:02 -0400] atomic-penguin: CharlieSu, what is in your /usr/lib/jvm directory
[2012-06-11 16:34:42 -0400] atomic-penguin: forestbird, not if the recipe is coded to not look for the path *.amd64
[2012-06-11 16:35:33 -0400] zts: chef_newbie: it looks like you'll need to rename that to 'hadoop' and re-upload it
[2012-06-11 16:35:44 -0400] atomic-penguin: forestbird, I understand the fact that it is a term used for an equivalent architecture
[2012-06-11 16:36:15 -0400] chef_newbie: zts : ok - i'll try that
[2012-06-11 16:36:34 -0400] CharlieSu: atomic-penguin: that his exactly what I think
[2012-06-11 16:36:34 -0400] CharlieSu: https://gist.github.com/2532b18f1b95fb88a78e
[2012-06-11 16:37:08 -0400] chef_newbie: is there any best practice in renaming a cook book?
[2012-06-11 16:38:05 -0400] zts: chef_newbie: just rename the directory in your "cookbooks" folder
[2012-06-11 16:38:27 -0400] atomic-penguin: CharlieSu, there appears to be a fix upstream in 1.5.1 on master, https://github.com/opscode-cookbooks/java
[2012-06-11 16:38:43 -0400] atomic-penguin: CharlieSu, https://github.com/opscode-cookbooks/java/blob/master/recipes/openjdk.rb#L56
[2012-06-11 16:39:29 -0400] CharlieSu: atomic-penguin: how can i install 1.5.1?
[2012-06-11 16:39:53 -0400] chef_newbie: well - its working now. <zts> : what was enforcing the need for the cookbook to be called hadoop?
[2012-06-11 16:40:10 -0400] atomic-penguin: CharlieSu, you could knife-github it, or just add that Line 56 I linked
[2012-06-11 16:40:25 -0400] jelder: can anyone comment on when the next prerelease gem might go out? my chef rollout is blocked until https://github.com/opscode/chef/commit/31338422fcb252e60511f579e50b2ffc1d5fda61 is live
[2012-06-11 16:40:29 -0400] CharlieSu: atomic-penguin: thanks!
[2012-06-11 16:40:32 -0400] zts: chef_newbie: the cookbook refers to itself as "hadoop" in many places, and the comment on the git repo suggests that it is lnxchk's fork of the "hadoop" cookbook
[2012-06-11 16:41:01 -0400] chef_newbie: I noticed indeed that the metadata.rb listed the recipes as hadoop
[2012-06-11 16:41:16 -0400] zts: chef_newbie: examples of where it was calling itself "hadoop" are in metadata.rb (the 'recipe' lines), and various recipes which said: include_recipe "hadoop"
[2012-06-11 16:41:33 -0400] hoover_damm: maybe he wants to rename it to hadoop?
[2012-06-11 16:41:39 -0400] hoover_damm: and not HadoopCookbook
[2012-06-11 16:41:39 -0400] chef_newbie: I was just curious as of how chef decided : ok, it's going to be hadoop
[2012-06-11 16:41:50 -0400] chef_newbie: and not HadoopCookbook
[2012-06-11 16:41:55 -0400] zts: chef_newbie: how did you come to use that particular git repo, rather than the "hadoop" cookbook on the community site?
[2012-06-11 16:42:06 -0400] chef_newbie: I need RHEL support
[2012-06-11 16:44:13 -0400] atomic-penguin: CharlieSu, np
[2012-06-11 16:58:59 -0400] zts: chef_newbie: sorry - I meant, did you find some document which pointed you to that repo, or just from a google search?
[2012-06-11 16:59:12 -0400] jelder: has anyone been able use mdadm on debian or ubuntu lately?
[2012-06-11 16:59:12 -0400] chef_newbie: google search
[2012-06-11 16:59:27 -0400] chef_newbie: I'm really a newbie with Chef and hadoop
[2012-06-11 16:59:33 -0400] chef_newbie: and I am trying to provision a small cluster
[2012-06-11 16:59:45 -0400] chef_newbie: I went through the excellent slides in the same repo
[2012-06-11 16:59:54 -0400] chef_newbie: on chef fundamentals
[2012-06-11 17:00:16 -0400] chef_newbie: and now painfully going through trying to install a recipe on a node
[2012-06-11 17:00:26 -0400] chef_newbie: other recipes like getting-started work fine
[2012-06-11 17:00:39 -0400] chef_newbie: I sometimes wish we could have "co-developement"
[2012-06-11 17:00:49 -0400] chef_newbie: or live interaction between newbies and experts
[2012-06-11 17:01:08 -0400] chef_newbie: and the next user group is not before a month from now
[2012-06-11 17:01:30 -0400] zts: chef_newbie: generally, if you download a cookbook from the community site (community.opscode.com), you know it will have the right name
[2012-06-11 17:01:45 -0400] chef_newbie: noted
[2012-06-11 17:01:48 -0400] zts: chef_newbie: but people can name github repositories anything they like, so they often will have different names than the cookbook expects
[2012-06-11 17:02:08 -0400] chef_newbie: I believe she was planning on merging her cookbook with the community one
[2012-06-11 17:02:16 -0400] chef_newbie: once it was in a stable state
[2012-06-11 17:02:21 -0400] zts: yeah
[2012-06-11 17:02:29 -0400] chef_newbie: my new issue now is with the java cookbook : Chef::Exceptions::Package: No version specified, and no candidate version available for java-1.6.0-openjdk
[2012-06-11 17:02:40 -0400] chef_newbie: I thought there were sane defaults :D
[2012-06-11 17:07:08 -0400] miketheman: chef_newbie: how are you specifying the openjdk install?
[2012-06-11 17:07:24 -0400] chef_newbie: i just added java to my run list
[2012-06-11 17:07:38 -0400] chef_newbie: I believe it falls by defaults on the openjdk
[2012-06-11 17:07:49 -0400] miketheman: are you using version 1.5.0 of the cookbook?
[2012-06-11 17:07:49 -0400] chef_newbie: since Oracle prevents direct download
[2012-06-11 17:08:16 -0400] chef_newbie: yes
[2012-06-11 17:09:30 -0400] miketheman: can you gist the output of the error?
[2012-06-11 17:13:34 -0400] chef_newbie: https://gist.github.com/2911387
[2012-06-11 17:15:34 -0400] miketheman: possibly update with the output of `chef-client -ldebug` ?
[2012-06-11 17:18:25 -0400] kindsol_: https://github.com/rightscale/rightscale_cookbooks
[2012-06-11 17:18:53 -0400] chef_newbie: <miketheman> I updated the gist
[2012-06-11 17:20:09 -0400] miketheman: chef_newbie: what platform/distro is that?
[2012-06-11 17:20:15 -0400] chef_newbie: redhat
[2012-06-11 17:20:26 -0400] chef_newbie: nassim@castor ~]$ uname -a Linux castor 2.6.18-274.el5 #1 SMP Fri Jul 8 17:36:59 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux
[2012-06-11 17:21:48 -0400] miketheman: that's very odd, consdering that  java-1.6.0-openjdk is included in rhn repositories
[2012-06-11 17:22:08 -0400] miketheman: can you run: `yum info java-1.6.0-openjdk` ?
[2012-06-11 17:24:17 -0400] chef_newbie: nassim@castor ~]$ yum info java-1.6.0-openjdk Plugin "product-id" can't be imported Plugin "subscription-manager" can't be imported Loaded plugins: security aegisco                                                                                                                                                                          62/62 Error: No matching Packages to list
[2012-06-11 17:24:27 -0400] chef_newbie: I'm behind firewall btw
[2012-06-11 17:24:52 -0400] miketheman: well then. you may not be able to connect out to your repository for packages.
[2012-06-11 17:25:32 -0400] eherot: Does anyone know if there is a workaround for http://tickets.opscode.com/browse/CHEF-2848 that does not involve installing any packages by hand?
[2012-06-11 17:25:52 -0400] chef_newbie: sudo yum install java-1.6.0-openjdk [sudo] password for nassim:  Loaded plugins: product-id, security, subscription-manager Updating Red Hat repositories. Setting up Install Process No package java-1.6.0-openjdk available. Nothing to do
[2012-06-11 17:26:06 -0400] miketheman: chef_newbie: well then. Chef will not solve that problem
[2012-06-11 17:26:17 -0400] chef_newbie: that makes sense
[2012-06-11 17:26:33 -0400] chef_newbie: well - thanks for looking into this with me
[2012-06-11 17:26:36 -0400] miketheman: no problem
[2012-06-11 17:26:41 -0400] chef_newbie: I'll chef with our sys admins
[2012-06-11 17:26:53 -0400] miketheman: LOL
[2012-06-11 17:27:28 -0400] eherot: chef_newbie: did you just verb a noun?
[2012-06-11 17:27:33 -0400] sivy: quick question: what's the difference between passing `action :dosomething` in a block, vs do ... action :nothing ... end.run_action(:dosomething)
[2012-06-11 17:27:48 -0400] chef_newbie: ooops - I meant check :D
[2012-06-11 17:28:00 -0400] erikh: I accidentally the chef
[2012-06-11 17:47:21 -0400] fields_: I am trying to bootstrap the chef server installation with chef solo, and I'm getting the following error: FATAL: Chef::Exceptions::Package: package[couchdb] (couchdb::default line 37) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for couchdb
[2012-06-11 17:58:22 -0400] hoover_damm: fields_, what distro/release?
[2012-06-11 17:58:56 -0400] fields_: fedora 8
[2012-06-11 17:59:14 -0400] hoover_damm: fedora 8 was roughly 2006/2007
[2012-06-11 17:59:24 -0400] hoover_damm: it likely will have more problems then just couchdb
[2012-06-11 17:59:31 -0400] hoover_damm: erlang, rabbitmq, ruby
[2012-06-11 17:59:52 -0400] hoover_damm: might want to pick something more modern
[2012-06-11 18:00:01 -0400] fields_: ruby and rabbitmq have no problems
[2012-06-11 18:00:04 -0400] hoover_damm: fields_, not the answer you wanted to hear likely and i'm sorry for that.
[2012-06-11 18:00:19 -0400] hoover_damm: what version of erlang?
[2012-06-11 18:00:27 -0400] fields_: I can try it on amazon linux, which I guess is more like centos
[2012-06-11 18:00:36 -0400] hoover_damm: or use centos or use ubuntu
[2012-06-11 18:01:00 -0400] hoover_damm: or current fedora
[2012-06-11 18:02:43 -0400] jtimberman: fields_: amazon linux is definitely more like centos in that they based it off centos, and it will have more up to date packages.
[2012-06-11 18:03:20 -0400] jtimberman: fields_: if you're using fedora, we have version 10 listed as the minimum requirement on the wiki, but that might still be a bit old.
[2012-06-11 18:04:31 -0400] hoover_damm: 8 is just old
[2012-06-11 18:06:08 -0400] miketheman: a lot of our cookbook contribs are getting that to work well
[2012-06-11 18:07:30 -0400] jtimberman: they are!
[2012-06-11 18:07:33 -0400] jtimberman: and thank you for those :)
[2012-06-11 18:07:49 -0400] jtimberman: It's great that it is often as simple as adding "amazon" to the platform checking lists.
[2012-06-11 18:08:21 -0400] fields_: I will try it out with a new amazon linux instance
[2012-06-11 18:08:23 -0400] fields_: thanks
[2012-06-11 18:08:24 -0400] miketheman: sometimes. :) I think the platform_family will help with that a lot
[2012-06-11 18:08:27 -0400] jtimberman: we're probably going to start an effort to switch to platform_family instead of platform for a lot of it after 10.12 is released.
[2012-06-11 18:08:58 -0400] UForgotten: yfeldblum: I dont see how I can specify file ownership, etc on the file.
[2012-06-11 18:09:18 -0400] miketheman: will we be able to drill down, and have: `if platform_family is foo, and platform is foo-v6.x` type of vfp operations?
[2012-06-11 18:09:45 -0400] jtimberman: miketheman: i think there's additional tickets related to that but i don't recall off hand
[2012-06-11 18:10:09 -0400] jtimberman: miketheman: i know Jamie Winsor (reset) submitted a patch for adding version operators to vfp
[2012-06-11 18:10:48 -0400] UForgotten: anyone have some good examples for file_edit that can set ownership of a file and by idempotent to adding some lines?
[2012-06-11 18:10:50 -0400] miketheman: jtimberman: that'd be great - especially if I can build a Mash of"here's what I know about specifically" and add to it as it grows
[2012-06-11 18:14:43 -0400] miketheman: UForgotten: I don't think file_edit can set permissions, rather do that after editing.
[2012-06-11 18:16:24 -0400] UForgotten: miketheman: I suppose I could do that, just a lot of work to do something so simple :(  is file_edit the preferred method versus just using sed? Because it looks like I have to make two method calls with file_edit to accomplish idempotence
[2012-06-11 18:17:44 -0400] miketheman: UForgotten: personally not a fan of using file_edit - rather I believe that: "if this cookbook owns this file, then it drops this file" - this achieves idempotence easily.
[2012-06-11 18:17:55 -0400] atomic-penguin: I think its weird the platform_family is /rhel/ instead of /redhat/
[2012-06-11 18:18:16 -0400] miketheman: atomic-penguin: naming things is hard, right?
[2012-06-11 18:18:17 -0400] atomic-penguin: While the rest of the platform_family keys are based off a platform key
[2012-06-11 18:18:52 -0400] UForgotten: miketheman: not always easy when it involves adding things to system files such as a bashrc or ssh authorized keys, tc
[2012-06-11 18:19:14 -0400] UForgotten: JasonBox: I bet you do :P
[2012-06-11 18:19:21 -0400] JasonBox: Hey now...
[2012-06-11 18:19:24 -0400] JasonBox: =P
[2012-06-11 18:19:31 -0400] UForgotten: JasonBox: you still in tampa or did you come back to whorelando
[2012-06-11 18:19:33 -0400] miketheman: UForgotten: it's as easy as you want it to be. :)
[2012-06-11 18:19:54 -0400] miketheman: with a simple policy of not using file_edit, we figure out how to do it without that.
[2012-06-11 18:20:36 -0400] atomic-penguin: miketheman, not that I really care all that much
[2012-06-11 18:22:24 -0400] atomic-penguin: miketheman, just assumed the first time I used platform_family that it would be /redhat/.
[2012-06-11 18:22:47 -0400] miketheman: aha. you made an assumption.
[2012-06-11 18:22:47 -0400] UForgotten: JasonBox: you know who I am, right? or have U Forgotten ?
[2012-06-11 18:23:09 -0400] miketheman: that's the worst self-pun I've seen in a while. :)
[2012-06-11 18:23:17 -0400] atomic-penguin: miketheman, to be fair, the only place it was documented (may still be) was on the blog (not the wiki)
[2012-06-11 18:23:58 -0400] UForgotten: miketheman: this is the exact reason I chose this as my nick.  Recurring use has paid dividends
[2012-06-11 18:26:28 -0400] miketheman: atomic-penguin: documented in code. :) https://github.com/opscode/chef/blob/master/chef/lib/chef/mixin/language.rb#L133
[2012-06-11 18:28:13 -0400] JasonBox: UForgotten: I never forget!
[2012-06-11 18:29:48 -0400] UForgotten: JasonBox: No, the elephant never forgets.  http://www.gsbrown.org/compuserve/all-new-electronic-mail-1982-04/elephant-ad-800.jpg
[2012-06-11 18:31:03 -0400] chip-: Is there a way to disable direct editing of nodes/roles/environments/etc with knife?
[2012-06-11 18:31:07 -0400] chip-: And force from json instead?
[2012-06-11 18:33:03 -0400] erikh: w/ 6
[2012-06-11 18:33:34 -0400] juliancdunn: I'm trying to use shef to debug cookbooks but it won't load any from a remote chef server. keeps saying "Cookbook [xyz] not found."
[2012-06-11 18:33:42 -0400] juliancdunn: how do I get shef to download cookbooks?
[2012-06-11 18:49:51 -0400] JSharp: hey guys, don't know if anyone from opscode is in here, but I just tried to create a new account on hosted chef, and it's coming back with an error. Just wanted to let you folks know.
[2012-06-11 18:50:59 -0400] JSharp: And now it's all like > Username has already been taken. The name votizen is not unique! ... (fffuuu)
[2012-06-11 18:51:27 -0400] geekbri: yfeldblum: I'm having a very strange issue with librarian-chef.  It doesn't seem to want to checkout a github repo with a specific tag.  If I have it checkout the head (which is what the tag points out) it works fine.  If I check out a previous tag... it works fine.  If I go into the cookbook dir where it downloaded and do a checkout of the tag, it works fine (assuming I did an install when it was pointing to head).  Any idea how to debug this?
[2012-06-11 18:52:10 -0400] JSharp: oh, seems I got the mail anyway.. weird
[2012-06-11 18:56:44 -0400] hoover_damm: geekbri, referance is a reference
[2012-06-11 18:56:56 -0400] hoover_damm: geekbri, so the head reference should be easy to replace with remote/v1.0.0
[2012-06-11 18:56:57 -0400] hoover_damm: or whatever
[2012-06-11 18:57:59 -0400] hoover_damm: at least that's the facts.  Obviously not working as it should
[2012-06-11 19:01:52 -0400] geekbri: hoover_damm: yeah I know how it all works, its just not working in this one particular instance. I have plenty of other entries in my Cheffile that are referring to branch names or tags.  I just wish there was further debugging output beyond "failed to checkout <commit id>"
[2012-06-11 19:03:35 -0400] geekbri: I'll probably go in and edit the gem later to add some debugging.  I just don't have time currently :)
[2012-06-11 19:04:12 -0400] hoover_damm: geekbri, that can also be a problem with the git repo
[2012-06-11 19:04:25 -0400] geekbri: hoover_damm: I was able to checkout the repo itself without any problems.
[2012-06-11 19:04:29 -0400] hoover_damm: geekbri, github does git fsck on each push so they try to keep it clean.  But sometimes a dangling bit can get there
[2012-06-11 19:04:35 -0400] hoover_damm: and it'll fail in only certain scenario's
[2012-06-11 19:04:41 -0400] geekbri: interesting.
[2012-06-11 19:04:56 -0400] hoover_damm: pretty rare, but if your the owner a git push up to that tag
[2012-06-11 19:04:58 -0400] hoover_damm: may fix it
[2012-06-11 19:05:16 -0400] geekbri: I am not the owner, but I can reach over and slap the owner :)
[2012-06-11 19:05:32 -0400] geekbri: I suppose he could force another push just to see if that fixes it
[2012-06-11 19:05:36 -0400] hoover_damm: well have the owner verify that sha isn't missing
[2012-06-11 19:05:50 -0400] hoover_damm: and if it is, push it up
[2012-06-11 19:06:03 -0400] geekbri: it isn't, its there. I checked his repo
[2012-06-11 19:06:05 -0400] hoover_damm: if it works in other cases, and not in this
[2012-06-11 19:06:09 -0400] geekbri: like is aid i was able to clone the repo, and even checkout the tag
[2012-06-11 19:06:54 -0400] hoover_damm: if pristine works, and preexisting doesn't perhaps you have something locally dirty?
[2012-06-11 19:07:16 -0400] hoover_damm: fresh clone of your chef repo pointing to the tag and see if it works?
[2012-06-11 19:11:16 -0400] geekbri: I dont think there is anything wrong with the repo itself.  even from a dirty one, i can do a git pull then a checkout on the tag
[2012-06-11 19:13:57 -0400] hoover_damm: geekbri, git fsck it?
[2012-06-11 19:16:10 -0400] geekbri: hoover_damm: I don't see any errors
[2012-06-11 19:16:37 -0400] hoover_damm: git fsck --tags should show the sha for the tag in question
[2012-06-11 19:16:58 -0400] geekbri: looks ok to me.
[2012-06-11 19:17:27 -0400] hoover_damm: pristine copy of chef-repo reproduces the failure?
[2012-06-11 19:19:10 -0400] geekbri: Well if I try any of checking out by hand there are no issues.  The issues are only when librarian-chef is trying to check it out
[2012-06-11 19:19:23 -0400] geekbri: but a librarian-chef clean and librarian-chef install will explode everytime
[2012-06-11 19:19:41 -0400] geekbri: however if I point it at just head (provide no ref) it works just fine.  Head is the same commit as the tag I am trying to use.
[2012-06-11 19:19:56 -0400] yfeldblum: geekbri, is it an annotated tag or a regular tag?
[2012-06-11 19:20:40 -0400] geekbri: regular tag.
[2012-06-11 19:21:27 -0400] yfeldblum: gist the exception?
[2012-06-11 19:21:41 -0400] steelnwool: Good day.
[2012-06-11 19:21:46 -0400] geekbri: yfeldblum: failed to checkout 165c87bd0479ca29417e3db24d5460c96518b4dc
[2012-06-11 19:22:06 -0400] geekbri: yfeldblum: the repo is github.com/kohder/chef-volumes  the tag is v0.0.5
[2012-06-11 19:22:30 -0400] steelnwool: I'm going thru this : http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo and when I get to the first run of chef-solo, I get this : http://pastie.org/4069227
[2012-06-11 19:23:43 -0400] hoover_damm: 165c87bd0479ca29417e3db24d5460c96518b4dcrefs/tags/v0.0.5
[2012-06-11 19:23:44 -0400] hoover_damm: 80483f07d093660707da8452c49dfcea945c8578refs/tags/v0.0.5^{}
[2012-06-11 19:24:27 -0400] geekbri: isn't the first just the commit ID of the actual tag object, not the commit the tag is reffering to
[2012-06-11 19:24:54 -0400] hoover_damm: geekbri, so your hittinv v0.0.5?
[2012-06-11 19:25:20 -0400] geekbri: hoover_damm: im trying ot use :ref 'v0.0.5' (which happens to be the HEAD of master)
[2012-06-11 19:25:40 -0400] yfeldblum: if the SHA of the tag is different from the SHA of the commit the tag points to, i think that's an annotated tag
[2012-06-11 19:25:41 -0400] geekbri: if i try ref 'v0.0.4' it works without issue, as does leaving off REF entirely (which grabs the HEAD of master)
[2012-06-11 19:25:47 -0400] hoover_damm: :ref 'tags/v0.0.5'
[2012-06-11 19:25:48 -0400] hoover_damm: ?
[2012-06-11 19:25:54 -0400] hoover_damm: ooo
[2012-06-11 19:26:32 -0400] hoover_damm: geekbri, odd
[2012-06-11 19:26:38 -0400] yfeldblum: annotated tags are broken in librarian-0.0.23 because that version starts checking that what is checked out is what was asked to be checked out
[2012-06-11 19:26:46 -0400] yfeldblum: annotated tags are fixed in librarian master
[2012-06-11 19:26:50 -0400] geekbri: yfeldblum: I just checked one of my repos, and I use lightweight tags.. . a git rev-parse <tag> gave me a SHA1 of the lgithweight tag
[2012-06-11 19:27:03 -0400] hoover_damm: geekbri, so try master?
[2012-06-11 19:27:24 -0400] geekbri: yfeldblum: I'll update to master of librarian
[2012-06-11 19:27:29 -0400] forestbird: does anyone have some tips for chef with vagrant? i mean chef solo is perfect for using it only locally but how do you integrate it with chef server? i imagine the devlopment uses only chef solo and then it is deployed somewhere but there still needs to be the possiblity to test locally again with chef solo
[2012-06-11 19:27:55 -0400] yfeldblum: forestbird, so test locally with chef-server and chef-client
[2012-06-11 19:28:19 -0400] yfeldblum: forestbird, install chef-server on the virtualbox VM, or make another VM to run chef-server, or run chef-server on the host and run chef-client in the guest
[2012-06-11 19:28:39 -0400] yfeldblum: geekbri, let me know if that fixes it
[2012-06-11 19:28:52 -0400] geekbri: yfeldblum: I'll let you know.   It'll take me a minute to get to updating :)
[2012-06-11 19:29:14 -0400] forestbird: yfeldblum: ok, fair enough. you think that's easier than trying to mess with chef solo?
[2012-06-11 19:29:56 -0400] yfeldblum: forestbird, no, i think that if you plan to use chef-server/chef-client in production, then you should test with chef-server/chef-client
[2012-06-11 19:30:01 -0400] geekbri: yfeldblum: it is for sure an annotated tag in his because a git show <tag> shows the tagger.  In my repostory the same doesn't.  However just FYI the lightweight tags in my repo do have their own SHA1 just like the annotated tags
[2012-06-11 19:30:13 -0400] geekbri: which makes sense since they are their own objects.
[2012-06-11 19:30:39 -0400] backwacking: anyone have any luck getting apache2::mod_xsendfile to install on an amazon ami instance?
[2012-06-11 19:31:49 -0400] forestbird: yfeldblum: yes, i think you are correct. hmm. you know i'm trying to figure out a scenario that the devs do not despise :)
[2012-06-11 19:32:35 -0400] yfeldblum: forestbird, devs run their own chef-servers
[2012-06-11 19:32:40 -0400] yfeldblum: forestbird, how about that?
[2012-06-11 19:33:02 -0400] yfeldblum: forestbird, they're running their own mysql's right?
[2012-06-11 19:33:12 -0400] miketheman: backwacking: you need to enable the epel repo for amazon linux for that package
[2012-06-11 19:33:36 -0400] forestbird: yfeldblum: yeah, or whatever they need for the specific project...
[2012-06-11 19:33:46 -0400] yfeldblum: forestbird, exactly
[2012-06-11 19:33:54 -0400] yfeldblum: forestbird, and they need a chef-server for this specific project
[2012-06-11 19:33:58 -0400] backwacking: thanks miketheman. now i will go and try and figure that out!
[2012-06-11 19:34:25 -0400] forestbird: yfeldblum: looks like they do :)
[2012-06-11 19:35:11 -0400] miketheman: backwacking: the yum::epel recipe sohuld do what you want as of version 0.6.0
[2012-06-11 19:35:13 -0400] yfeldblum: forestbird, what you can do for them is: make it easy for them to set up & run a chef-server and use it with vagrant VMs
[2012-06-11 19:35:36 -0400] yfeldblum: forestbird, you can do that with some scripts, some broader tooling, or even just some docs
[2012-06-11 19:35:54 -0400] yfeldblum: forestbird, because installing chef-server is still a little tricky
[2012-06-11 19:36:05 -0400] backwacking: oh great. i am going to try and run it now. just found what you were talking about
[2012-06-11 19:36:15 -0400] miketheman: enjoy
[2012-06-11 19:36:17 -0400] backwacking: miketheman: thanks again
[2012-06-11 19:36:30 -0400] backwacking: i will be back i suck at this stuff :)
[2012-06-11 19:37:09 -0400] forestbird: yfeldblum: indeed. maybe using chef solo to install chef server with vagrant? something like that.
[2012-06-11 19:39:31 -0400] lusis: remind me again how gem_package works with omnibus?
[2012-06-11 19:39:41 -0400] lusis: by default it'll install gems to omnibus, correct?
[2012-06-11 19:39:57 -0400] miketheman: lusis: apparently so
[2012-06-11 19:40:09 -0400] yfeldblum: forestbird, the opscode wiki has a tutorial on using chef-solo to install chef-server
[2012-06-11 19:40:19 -0400] yfeldblum: lusis, other way around
[2012-06-11 19:40:33 -0400] lusis: yfeldblum: well that's a pain in the ass
[2012-06-11 19:40:44 -0400] yfeldblum: lusis, chef_gem installs a gem into chef's private ruby and clears the rubygems cache path for the loaded ruby
[2012-06-11 19:40:57 -0400] lusis: how the hell do you make that reusable?
[2012-06-11 19:41:01 -0400] lusis: for handlers and such
[2012-06-11 19:41:05 -0400] yfeldblum: lusis, gem_package installs a gem into the system ruby, if one is found, or if one is not found, into chef's ruby
[2012-06-11 19:41:06 -0400] lusis: grrr
[2012-06-11 19:41:14 -0400] yfeldblum: lusis, what do you mean by "reusable"?
[2012-06-11 19:41:31 -0400] lusis: yfeldblum: here I just shipped you a cookbook that uses gem_package to install something.
[2012-06-11 19:41:37 -0400] lusis: now if you're using omnibus
[2012-06-11 19:41:42 -0400] lusis: it goes to the omnibus ruby
[2012-06-11 19:41:46 -0400] lusis: but if you later add a system ruby
[2012-06-11 19:41:47 -0400] lusis: boom
[2012-06-11 19:42:02 -0400] lusis: at least if I'm understanding what you're saying
[2012-06-11 19:42:18 -0400] yfeldblum: lusis, not sure what you think would go boom
[2012-06-11 19:42:20 -0400] forestbird: yfeldblum: ok, thanks
[2012-06-11 19:42:26 -0400] lusis: the gem would get installed to the wrong spot
[2012-06-11 19:42:50 -0400] lusis: it behaves one was if omnibus is installed without a system ruby
[2012-06-11 19:42:55 -0400] lusis: and a different way if there's a system ruby
[2012-06-11 19:43:07 -0400] lusis: s/was/way
[2012-06-11 19:43:17 -0400] yfeldblum: lusis, right
[2012-06-11 19:43:24 -0400] lusis: yeah that's kinda daft
[2012-06-11 19:43:25 -0400] lusis: hrmmm
[2012-06-11 19:43:42 -0400] yfeldblum: lusis, install ruby early?
[2012-06-11 19:43:42 -0400] lusis: so if I'm trying to provide cookbooks to folks
[2012-06-11 19:43:54 -0400] lusis: and say I need a gem for a chef handler
[2012-06-11 19:44:17 -0400] lusis: if anyone installs a system ruby at any point, stuff gets borked
[2012-06-11 19:44:30 -0400] lusis: because I need that gem to be installed with the omnibus ruby
[2012-06-11 19:44:40 -0400] yfeldblum: lusis, right, so use chef_gem?
[2012-06-11 19:44:47 -0400] lusis: now I have to see when that was added
[2012-06-11 19:45:01 -0400] lusis: because that means the cookbooks aren't backwards compat
[2012-06-11 19:45:39 -0400] spox: lusis: http://community.opscode.com/cookbooks/chef_gem
[2012-06-11 19:45:47 -0400] lusis: just violates the principle of least surprises is all
[2012-06-11 19:45:55 -0400] yfeldblum: lusis, there's a chef_gem cookbook, or you could switch the resource based on the version of chef
[2012-06-11 19:45:57 -0400] lusis: I wouldn't expect that to be the behavior
[2012-06-11 19:56:47 -0400] handschuh: hi all, im working on a erb template and want to add somethim if its call by a given recipe. i found "self.cookbook_name" but it not the thin i search for, is there any other way? thanks
[2012-06-11 20:01:12 -0400] yfeldblum: handschuh, sounds like a bad idea; you should probably pass that info to the template via the variables hash
[2012-06-11 20:11:16 -0400] handschuh: @yfeldblum, let me explain a bit more
[2012-06-11 20:13:40 -0400] handschuh: i have elasticsearch cookbook with default and jetty recipe. and i just want to have one elasticsearch config file, so i just want to include a paar of the config file if its called by recipe jetty. can you get a more clear view?
[2012-06-11 20:14:42 -0400] yfeldblum: handschuh, yes, very easy: pass something into the variables attribute in the template resource
[2012-06-11 20:15:09 -0400] yfeldblum: template("/etc/es") { variables :jetty_part_only => true }
[2012-06-11 20:15:39 -0400] handschuh: can you send my an link of an example, never used something like that
[2012-06-11 20:15:41 -0400] yfeldblum: handschuh, the *only only only* input to your template file should be the variables passed into the template resource
[2012-06-11 20:15:49 -0400] handschuh: cool
[2012-06-11 20:16:12 -0400] yfeldblum: handschuh, if you need to do if-then-else in the template based on some data, pass that data into the template via the variables attribute in the template resource
[2012-06-11 20:18:19 -0400] handschuh: if then ... sound better for me, so i was searching like <% if self.cookbook_name == recipe[elasticsearch::jetty] ...
[2012-06-11 20:18:47 -0400] handschuh: but i will have a look for your advice
[2012-06-11 20:18:50 -0400] handschuh: thanks
[2012-06-11 20:19:41 -0400] yfeldblum: handschuh, you should do: <% if !(@jetty_part_only) %> ... <% end %>
[2012-06-11 20:29:45 -0400] kamabe_1: does chef parse the default attributes in a role file differently than in a regular attributes file? i placed a symbol in the regular attributes file for a recipe and everything worked fine. then i did the same in the default attributes section of a role, but it converted the attribute to a string and complained it didn't get a symbol like expected.
[2012-06-11 20:31:47 -0400] yfeldblum: kamabe_1, there's no such thing as a symbol in JSON
[2012-06-11 20:32:14 -0400] yfeldblum: kamabe_1, and you probably should not be using symbols in attributes (use symbols only when you have a specific need for symbols)
[2012-06-11 20:33:05 -0400] yfeldblum: kamabe_1, roles are JSON, not ruby; Knife has a fancy DSL for roles that you can use ruby for, but Knife compiles them into JSON before uploading them to the chef-server
[2012-06-11 20:34:21 -0400] knuckolls: yfeldblum: kamabe works with me, power flickered and her machine went down but mine didn't. that makes sense. we do have a specific need for a symbol but we can .to_sym a string. thanks!
[2012-06-11 20:34:23 -0400] qhartman: I have multiple recipes that want to make changes /etc/sysctl.conf and a few other system-wide config files. Some want to change existing settings, some want to add new settings. What's the best way to handle this to have all the settings applied correctly? I'm running into trouble with templates over-writing non-default settings other recipes set, or settings needing to be in a particular place so just concatenating them t
[2012-06-11 20:34:23 -0400] qhartman: o the end doesn't work.
[2012-06-11 20:34:57 -0400] knuckolls: qhartman: control sysctl.conf with attributes
[2012-06-11 20:35:00 -0400] knuckolls: and set them in roles
[2012-06-11 20:35:08 -0400] knuckolls: so only one thing writes to that file
[2012-06-11 20:35:30 -0400] knuckolls: i either wrote that cookbook for us, or used one from upstream
[2012-06-11 20:35:33 -0400] knuckolls: let me figure that out.
[2012-06-11 20:35:39 -0400] knuckolls: or open source it
[2012-06-11 20:35:46 -0400] yfeldblum: knuckolls, cool
[2012-06-11 20:35:49 -0400] fields_: when trying to run the bootstrap on amazon linux, I get : FATAL: Errno::ENOENT: No such file or directory - /usr/local/rvm/gems/ruby-1.9.3-p194/gems/chef-0.10.10/distro//etc/init.d/chef-solr
[2012-06-11 20:36:03 -0400] fields_: it appears that it hasn't properly picked up the environment type
[2012-06-11 20:36:07 -0400] fields_: where can I set that?
[2012-06-11 20:36:55 -0400] fields_: that distro dir seems to have "arch  common  debian  README  redhat  windows" as options. Presumably I want red hat?
[2012-06-11 20:37:16 -0400] knuckolls: qhartman: http://community.opscode.com/cookbooks/sysctl
[2012-06-11 20:37:31 -0400] knuckolls: qhartman: you can pull it in easily with librarian
[2012-06-11 20:37:53 -0400] knuckolls: cookbook "sysctl"
[2012-06-11 20:44:59 -0400] pwf: so if i want to use a certain private ssl cert for a bunch of machines, should i put it in an encrypted data bag?
[2012-06-11 20:45:21 -0400] pwf: it seems like if i have to manually distribute the key for the databag, i might as well just manually distribute the key
[2012-06-11 20:45:27 -0400] pwf: i mean, the cert
[2012-06-11 20:50:52 -0400] neurodamage: anyone been able to use cucumber-chef without having to use the opscode platform? or is it required to use the opscode platform when using that gem?
[2012-06-11 20:51:57 -0400] neurodamage: nevermind saw the answer to that question on the front of their page :(
[2012-06-11 20:52:23 -0400] yfeldblum: pwf, why would you use an encrypted data bag?
[2012-06-11 20:52:45 -0400] yfeldblum: pwf, what attack vectors are you hoping to mitigate against by using an encrypted data bag?
[2012-06-11 20:53:24 -0400] pwf: yfeldblum: i was looking at this http://lists.opscode.com/sympa/arc/chef-dev/2012-02/msg00046.html
[2012-06-11 20:54:46 -0400] yfeldblum: pwf, on the question of encrypted data bags vs cleartext (or regular) data bags - what attacks would be prevented by using encrypted data bags?
[2012-06-11 20:55:02 -0400] yfeldblum: pwf, there's no reason you have to add data bags to your git repo
[2012-06-11 20:55:06 -0400] yfeldblum: pwf, whether encrypted or regular
[2012-06-11 20:55:15 -0400] pwf: true
[2012-06-11 20:55:24 -0400] pwf: i mean, i didn't know that it was true, but apparently it is
[2012-06-11 20:55:30 -0400] yfeldblum: pwf, you can have data bags items that you just upload without adding to git
[2012-06-11 20:55:43 -0400] pwf: still don't want them on the opscode site i guess
[2012-06-11 20:55:45 -0400] yfeldblum: pwf, indeed, i prefer not to add any data bags or data bag items to git at all
[2012-06-11 20:57:29 -0400] yfeldblum: pwf, given that you are already entrusting to opscode the hosting of your code which you run with root permissions anyway, and that opscode technically could alter that code in any way they like, and that such alteration can at any time include decrypting all encrypted data bag items downloaded to the chef-client and uploading the contents to opscode ...
[2012-06-11 20:57:47 -0400] pwf: touche ;)
[2012-06-11 20:58:23 -0400] pwf: i don't see a reason to use databags anyways. i'll just keep my recipe as-is, generating self signed shit
[2012-06-11 20:58:36 -0400] pwf: and if i really need the right cert i'll just drop it in afterwards
[2012-06-11 20:58:52 -0400] pwf: well no i guess i'll set it up in a databag
[2012-06-11 21:00:15 -0400] yfeldblum: pwf, it does add a modicum of security because it does guard against passive attacks by opscode, so you may consider using it for that reason
[2012-06-11 21:00:56 -0400] yfeldblum: pwf, or by Amazon, or by a hacker that can only mount a passive attack
[2012-06-11 21:02:01 -0400] pwf: keeping it in a databag encrypted or not goes against the rule i learned. that is, have as few copies of the private key as possible
[2012-06-11 21:12:32 -0400] x0nic: does anyone know how I can use the remote_file resource with basic authentication?
[2012-06-11 21:12:39 -0400] monvillalon: I created a new server with knife-ec2, and chef failed.  I updated the recipe and uploaded it to the server.  How can I update the node, do I run chef-client?
[2012-06-11 21:13:08 -0400] monvillalon: x0nic: Im imagine you can add the auth data to the url http://user:pass@hostname/path/
[2012-06-11 21:13:39 -0400] x0nic: hrm, never tried that
[2012-06-11 21:13:58 -0400] hoover_damm: net/http does basic auth differently then your browser
[2012-06-11 21:14:41 -0400] hoover_damm: hrm, or does it
[2012-06-11 21:15:06 -0400] hoover_damm: http://ruby-doc.org/stdlib-1.9.2/libdoc/net/http/rdoc/Net/HTTP.html
[2012-06-11 21:16:18 -0400] x0nic: so i would throw that in a roby_block?
[2012-06-11 21:16:58 -0400] x0nic: awesome, user:pass@hostname worked
[2012-06-11 21:17:01 -0400] x0nic: thanks!
[2012-06-11 21:17:33 -0400] hoover_damm: x0nic, should be able to easy / and then write in the same ruby_block even
[2012-06-11 21:17:40 -0400] dwhsix: what the heck is the name of the gem for talking to chef server from ruby code? blanking on it...
[2012-06-11 21:17:55 -0400] yfeldblum: dwhsix, a) chef b) spice
[2012-06-11 21:18:10 -0400] dwhsix: yfeldblum: ah, spice was what I was thinking of. thx!
[2012-06-11 21:18:18 -0400] hoover_damm: x0nic, although headers({"AUTHORIZATION" => "Basic #{Base64.encode64("username:password")}"})
[2012-06-11 21:18:21 -0400] hoover_damm: may work too
[2012-06-11 21:18:21 -0400] hoover_damm: in remote_file
[2012-06-11 21:18:34 -0400] x0nic: that didn't work in remote_file. already tried that
[2012-06-11 21:18:48 -0400] hoover_damm: x0nic, unfortunate
[2012-06-11 21:20:28 -0400] yfeldblum: x0nic, hoover_damm, nearly every HTTP request to the chef-server-api must be signed
[2012-06-11 21:20:59 -0400] hoover_damm: eh?
[2012-06-11 21:21:02 -0400] x0nic: this was a request to a different server. I am trying to get a file from my build server
[2012-06-11 21:21:17 -0400] x0nic: http://user:pass@hostname worked though
[2012-06-11 21:21:18 -0400] hoover_damm: +1 what x0nic said
[2012-06-11 21:21:26 -0400] hoover_damm: x0nic, glad it works.
[2012-06-11 21:21:34 -0400] yfeldblum: whoops, that wasn't relevant
[2012-06-11 21:23:29 -0400] dwhsix: googling "chef spice tutorial" doesn't have any relevant hits until middle of 2nd page :-(
[2012-06-11 21:24:02 -0400] dwhsix: no matter
[2012-06-11 21:30:04 -0400] monvillalon: if chef failed how do I run chef-client again? i logged in via ssh and i get an empty run list
[2012-06-11 21:30:27 -0400] hoover_damm: monvillalon, chef-client -j /etc/chef/first-run.json -E <environment>
[2012-06-11 21:30:47 -0400] hoover_damm: monvillalon, you can omit -E and the environment if you dont' want to use environments or want it in _default
[2012-06-11 21:31:12 -0400] monvillalon: hoover_damm: thnxs, would this download updated cookbooks?
[2012-06-11 21:31:55 -0400] monvillalon: hoover_damm: I have a first-boot.json
[2012-06-11 21:32:53 -0400] hoover_damm: monvillalon, yep it will
[2012-06-11 21:33:12 -0400] monvillalon: hoover_damm: thnxs
[2012-06-11 21:34:20 -0400] dwhsix: so anyone have a pointer on using the spice gem?
[2012-06-11 21:38:08 -0400] yfeldblum: dwhsix, spice looks like a set of DataMapper models
[2012-06-11 21:38:53 -0400] dwhsix: yfeldblum: sorta more just hung up on configuring it to talk to the server ;-)
[2012-06-11 21:39:10 -0400] dwhsix: wondering if anyone has a gist they can post with a simple example
[2012-06-11 21:41:13 -0400] yfeldblum: dwhsix, set Spice.server_url = "abcdef" and the other config keys before using any of the spice models
[2012-06-11 21:41:13 -0400] simonjj: are all resources available inside of a ruby_block ?
[2012-06-11 21:41:20 -0400] yfeldblum: dwhsix, the config keys are: https://github.com/danryan/spice/blob/master/lib/spice/config.rb#L19-25
[2012-06-11 21:41:53 -0400] dwhsix: yfeldblum: was just starting to grok that think I'm getting it
[2012-06-11 21:41:56 -0400] dwhsix: thx!
[2012-06-11 21:42:33 -0400] danryan: yo dwhsix, how can I help?
[2012-06-11 21:43:21 -0400] dwhsix: danryan: simple example?  say for listing nodes the server knows about?
[2012-06-11 21:43:52 -0400] danryan: dwhsix: fo sho. Quick question: are you using a published gem (and which version), or checked out master?
[2012-06-11 21:44:00 -0400] danryan: (master deviates quite a bit)
[2012-06-11 21:44:30 -0400] dwhsix: published, so 0.8.0 yeah, I noticed there's been quite a refactor
[2012-06-11 21:44:41 -0400] dwhsix: can switch to master if that's easier
[2012-06-11 21:46:49 -0400] danryan: well master is in an odd state of flux where it works but it doesn't look like it should :)
[2012-06-11 21:47:09 -0400] dwhsix: awesome ;-)
[2012-06-11 21:47:29 -0400] dwhsix: whichever's easier
[2012-06-11 21:47:49 -0400] danryan: dwhsix: stick this somewhere https://gist.github.com/2912956
[2012-06-11 21:48:01 -0400] danryan: if it's a rails app, I typically put it in an initializer
[2012-06-11 21:48:55 -0400] dwhsix: k - is this using master?
[2012-06-11 21:49:08 -0400] danryan: that config's good for latest gem release
[2012-06-11 21:49:25 -0400] yfeldblum: danryan, you should probably provide a way to reset the connection manually in case the config needs to change
[2012-06-11 21:49:39 -0400] danryan: yfeldblum: aye, https://github.com/danryan/spice/wiki/Configuration
[2012-06-11 21:49:54 -0400] danryan: there's a Spice.reset as well as direct writer methods for each config value
[2012-06-11 21:50:27 -0400] dwhsix: danryan: ok, now I feel dumb for not seeing the wiki pages
[2012-06-11 21:50:38 -0400] yfeldblum: danryan, don't see how that helps with https://github.com/danryan/spice/blob/master/lib/spice.rb#L46-50
[2012-06-11 21:51:19 -0400] dwhsix: but wiki is for master?
[2012-06-11 21:51:21 -0400] yfeldblum: danryan, you may also think about providing a way to have multiple connections at once, although i don't know how well DataMapper supports such a thing
[2012-06-11 21:51:23 -0400] dwhsix: > Spice.clients
[2012-06-11 21:51:23 -0400] dwhsix: NoMethodError: undefined method `clients' for Spice:Module
[2012-06-11 21:51:48 -0400] danryan: dwhsix: ah yeah, the wiki is based on master hm
[2012-06-11 21:52:30 -0400] dwhsix: danryan: either way I can either switch to master or
[2012-06-11 21:52:42 -0400] dwhsix: if yuo can give me a couple of lines of example for 0.8.0
[2012-06-11 21:52:47 -0400] danryan: yfeldblum: good point, and good suggestion :)
[2012-06-11 21:54:43 -0400] mostlygeek: anybody ever use munin on EC2 w/ chef?
[2012-06-11 21:59:58 -0400] danryan: hmm, dwhsix: I spose the best thing will probably be to use master for now. I will work on that tonight and push out a 1.0 gem version
[2012-06-11 22:00:17 -0400] dwhsix: yeah, I'm in the progress of switching to it
[2012-06-11 22:00:26 -0400] dwhsix: no worries & thanks, danryan
[2012-06-11 22:00:30 -0400] danryan: sweet
[2012-06-11 22:00:47 -0400] danryan: feel free to hit me up if you run into more issues
[2012-06-11 22:01:02 -0400] dwhsix: will do, thx
[2012-06-11 22:13:57 -0400] dyer: Hey guys, question Any one know how I can debug this error?  https://gist.github.com/cda420161dfa8d082ca5    Seems to only happen when I try to use shef.  I am able to run the complete run list w/o any problems
[2012-06-11 22:18:09 -0400] ampledata: i've gotten this before
[2012-06-11 22:18:21 -0400] ampledata: iirc it's fixed in 0.10.9
[2012-06-11 22:19:46 -0400] ampledata: let me see if i can find it
[2012-06-11 22:21:28 -0400] dyer: k, ty
[2012-06-11 22:21:34 -0400] dyer: 10.12 out yet?
[2012-06-11 22:21:38 -0400] dyer: 10.10 was a bust for me
[2012-06-11 22:21:41 -0400] ampledata: http://tickets.opscode.com/browse/CHEF-2796
[2012-06-11 22:22:56 -0400] ampledata: dyer: looks like that's targeted for 10.10
[2012-06-11 22:23:22 -0400] dyer: k, but 10.10 is a dude, notifications on remote resource didn't work
[2012-06-11 22:26:29 -0400] dyer: I use those extensively
[2012-06-11 22:26:30 -0400] ampledata: oic
[2012-06-11 22:26:30 -0400] ampledata: remote resource?
[2012-06-11 22:26:31 -0400] monvillalon: I'm getting  cannot determine group id but when I check in the console its there
[2012-06-11 22:26:33 -0400] UForgotten: wasn't there a script that I can wget to install chef-solo ?
[2012-06-11 22:26:33 -0400] UForgotten: I looked through chat archives and couldn't find it, I'm not searching for the right thing.  it had a codename of some sort
[2012-06-11 22:26:36 -0400] UForgotten: omnibus or something
[2012-06-11 22:27:28 -0400] sabooky: I'm looking at a coworkers cookbook and it breaks because he has an entry in the attributes/default.rb file that refers to node[:other_cb][:home]
[2012-06-11 22:27:40 -0400] sabooky: I get an error that Nil doesn't have '[]
[2012-06-11 22:27:42 -0400] sabooky: '
[2012-06-11 22:28:00 -0400] monvillalon: Im getting:Chef::Exceptions::GroupIDNotFound: directory[/var/run/newrelic] (newrelic::default line 27) had an error: Chef::Exceptions::GroupIDNotFound: cannot determine group id for 'newrelic', does the group exist on this system?
[2012-06-11 22:28:14 -0400] monvillalon: monvillalon: but id -g newrelic responds ok
[2012-06-11 22:28:21 -0400] sabooky: Is there a way to handle this attribues file conditionally to avoid the error? or ensure that "other_cb"'s variables are loaded first
[2012-06-11 22:28:40 -0400] sabooky: neither CB is in my run_list.. but I still error our during chef-solo's parsing of cookbooks
[2012-06-11 22:29:53 -0400] simonjj: how would I notify a look such as: "%w{ rpm1 rpm2 rpm3} do |myrpm| package myrpm end" via notification ?
[2012-06-11 22:31:16 -0400] dyer: ampledata: -->  http://tickets.opscode.com/browse/CHEF-3135
[2012-06-11 22:31:47 -0400] ampledata: dyer! {code} tags!
[2012-06-11 22:31:56 -0400] dyer: ?
[2012-06-11 22:31:59 -0400] ampledata: https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all
[2012-06-11 22:32:12 -0400] ampledata: wrap your Resource examples in {code} to make em easier to read
[2012-06-11 22:32:14 -0400] ampledata: please ;)
[2012-06-11 22:32:52 -0400] dyer: ampledata, ok, but this isn't my ticket
[2012-06-11 22:32:59 -0400] ampledata: oh
[2012-06-11 22:33:00 -0400] ampledata: n/m
[2012-06-11 22:33:03 -0400] ampledata: man i wish i could edit tickets
[2012-06-11 22:33:04 -0400] dyer: ;)
[2012-06-11 22:33:29 -0400] dyer: Man, I wish template errors told you which line
[2012-06-11 22:33:53 -0400] ampledata: dyer i've been pining to add erb syntax checks to our testing infra
[2012-06-11 22:34:09 -0400] dyer: That would be a nice blog
[2012-06-11 22:34:28 -0400] ampledata: https://github.com/cypher/git-ruby-syntax-check
[2012-06-11 22:35:19 -0400] dyer: ok, but its not a syntax error per say, Its a nil reference somewhere
[2012-06-11 22:35:23 -0400] dyer: not sure this would help
[2012-06-11 22:36:25 -0400] ampledata: ah
[2012-06-11 22:36:39 -0400] ampledata: you could change anything using your template to be more defensive
[2012-06-11 22:36:52 -0400] ampledata: and not pass in complex structs
[2012-06-11 22:36:56 -0400] ampledata: fwiw
[2012-06-11 22:36:58 -0400] dyer: I just am not sure why so I have to do the old "comment out a line", push, try again
[2012-06-11 22:37:15 -0400] dyer: yea, its not really that complicated structure
[2012-06-11 22:37:24 -0400] ampledata: like don't call node[] objects from templates
[2012-06-11 22:37:54 -0400] dyer: https://gist.github.com/9766b755f810aea03f18
[2012-06-11 22:39:13 -0400] ampledata: what's your template generator look like?
[2012-06-11 22:39:30 -0400] dyer: template generator  ?
[2012-06-11 22:39:34 -0400] ampledata: resource
[2012-06-11 22:40:06 -0400] dyer: refresh
[2012-06-11 22:40:46 -0400] ampledata: hrm that doesn't look right
[2012-06-11 22:40:55 -0400] ampledata: your template is using node[:prism][:local_ipv4]
[2012-06-11 22:41:01 -0400] ampledata: gut your node attribute looks way different
[2012-06-11 22:41:04 -0400] ampledata: gut=but
[2012-06-11 22:41:17 -0400] ampledata: unless that's not all of the attributes
[2012-06-11 22:41:23 -0400] ampledata: oh i misread
[2012-06-11 22:41:24 -0400] ampledata: sorry
[2012-06-11 22:41:31 -0400] ampledata: ampledata--
[2012-06-11 22:41:35 -0400] dyer: :)
[2012-06-11 22:42:23 -0400] ampledata: are you using all of the items from asr_engines in your template?
[2012-06-11 22:42:56 -0400] dyer: yes
[2012-06-11 22:43:02 -0400] ampledata: haha good luck :)
[2012-06-11 22:43:10 -0400] dyer: ?
[2012-06-11 22:43:25 -0400] ampledata: i mean i can totally see how you'd hit a 'nil' error
[2012-06-11 22:43:40 -0400] ampledata: you're passing in a list of dicts, one of which has another list as a value
[2012-06-11 22:43:43 -0400] dyer: yea, and I only showed u an example
[2012-06-11 22:43:52 -0400] dyer: the real struct is a whole lot bugger
[2012-06-11 22:43:57 -0400] dyer: 70 engines
[2012-06-11 22:44:28 -0400] ampledata: so yeah i guess the danger is
[2012-06-11 22:44:40 -0400] ampledata: one of those 70 getting an attribute changed, or even removed
[2012-06-11 22:44:48 -0400] ampledata: and the next template generation failing
[2012-06-11 22:45:01 -0400] dyer: yea, I just wish chef was kind enough to show u where
[2012-06-11 22:45:27 -0400] ampledata: i guess one alternative you could try
[2012-06-11 22:45:35 -0400] dyer: I am sure Erubius is telling Chef where the problem is in the template, but Chef is just eating it for some reason
[2012-06-11 22:45:39 -0400] ampledata: is to generate the list of engines in the recipe
[2012-06-11 22:45:50 -0400] ampledata: and ensure all the k/v's you'll need are there
[2012-06-11 22:45:58 -0400] ampledata: or yeah
[2012-06-11 22:46:02 -0400] ampledata: chef could not hide the error
[2012-06-11 22:46:14 -0400] dyer: What do u mean "could not"
[2012-06-11 22:46:25 -0400] hoover_damm: erb -x file.erb
[2012-06-11 22:46:25 -0400] ampledata: what you said, it's "eating" the error
[2012-06-11 22:46:39 -0400] dyer: hoover_damm  ?
[2012-06-11 22:49:13 -0400] dyer: shit, I have to step away for a few and give my son a bath, bbiaf hoover_damm i'll look for ur response when I get back
[2012-06-11 22:50:23 -0400] hoover_damm: dyer, was just looking over https://gist.github.com/9766b755f810aea03f18/5777fe6b7ced499ab2478ac8e52f65763ff48cb6 trying to get the problem your having
[2012-06-11 22:50:42 -0400] hoover_damm: looking at that text, and that node data... ouch
[2012-06-11 22:52:00 -0400] hoover_damm: a hash in an array
[2012-06-11 22:58:18 -0400] yfeldblum: dyer, Chef::Log.info is your  friend
[2012-06-11 22:59:08 -0400] yfeldblum: dyer, at the beginning of each iteration of the loop, log the asr_engine data structure; when the exception hits, it's on the last one you logged
[2012-06-11 22:59:45 -0400] hoover_damm: log is totally your friend
[2012-06-11 23:00:02 -0400] hoover_damm: log "bob eats lunch meat with #{node[:cpu][:total].to_i]} processors"
[2012-06-11 23:00:45 -0400] ampledata: omg dont use log
[2012-06-11 23:00:47 -0400] ampledata: use Chef::Log
[2012-06-11 23:01:26 -0400] ampledata: https://github.com/ampledata/cookbook-style-guide
[2012-06-11 23:01:29 -0400] hoover_damm: http://www.youtube.com/watch?v=2C7mNr5WMjA
[2012-06-11 23:02:26 -0400] hoover_damm: ampledata, semi-valid reasoning but I prefer to juse log over Chef::Log
[2012-06-11 23:02:26 -0400] yfeldblum: `log` won't work from within an ERB template anyway
[2012-06-11 23:02:36 -0400] hoover_damm: just*
[2012-06-11 23:02:47 -0400] hoover_damm: just means if you do lwrp that you have to use Chef::Log like a good boy
[2012-06-11 23:02:50 -0400] hoover_damm: knowing your scope is good
[2012-06-11 23:03:00 -0400] ampledata: log is pretty misleading
[2012-06-11 23:03:48 -0400] yfeldblum: `log` writes to the log during convergence, not compilation; use `log` in a recipe when you want to declare a log entry during compilation but trigger the log entry during convergence; use `Chef::Log` when you want to log normally
[2012-06-11 23:04:20 -0400] hoover_damm: la la la la ... log song!
[2012-06-11 23:04:22 -0400] hoover_damm: all i can say
[2012-06-11 23:04:31 -0400] ampledata: let me add that to the style guide
[2012-06-11 23:04:51 -0400] ampledata: yfeld: is taht from docs somewhere, or should i quote you?
[2012-06-11 23:05:32 -0400] hoover_damm: and we should put all this also on wiki.opscode.com as a note/info to the log resource
[2012-06-11 23:05:35 -0400] hoover_damm: as good boys and girls
[2012-06-11 23:06:33 -0400] ampledata: added note to style guide
[2012-06-11 23:11:02 -0400] jeremyolliver: Does anyone know how I can go about getting the gem_package resource to work when I've got an http_proxy set?
[2012-06-11 23:11:24 -0400] jeremyolliver: I've got the http_proxy set in client.rb and it's coming through in Chef::Config
[2012-06-11 23:12:27 -0400] jeremyolliver: but no luck when gem install get's called, the http proxy isn't used unless I manually set a particular gem_package to have "--http-proxy=http://x.x.x.x:8080" as an option string
[2012-06-11 23:13:03 -0400] jeremyolliver: which doesn't work too well when I've got standard cookbooks installing via gem_package, I don't want to modify them all
[2012-06-11 23:14:45 -0400] yfeldblum: ampledata, https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/log.rb#L40-43
[2012-06-11 23:15:00 -0400] yfeldblum: ampledata, no reason to quote me
[2012-06-11 23:15:30 -0400] yfeldblum: ampledata, creating the `log` resource does nothing w.r.t the log: https://github.com/opscode/chef/blob/master/chef/lib/chef/resource/log.rb
[2012-06-11 23:15:50 -0400] yfeldblum: ampledata, the logging is done in the provider, linked above
[2012-06-11 23:16:25 -0400] yfeldblum: ampledata, and all provider actions are triggered during the host run-context's convergence, or if the resource is told to `run_action`
[2012-06-11 23:24:41 -0400] alex_____: hi
[2012-06-11 23:25:01 -0400] alex_____: is there a way to run chef-client for a specific server
[2012-06-11 23:25:04 -0400] alex_____: through knife
[2012-06-11 23:25:29 -0400] sivy: so, I'm trying to write a script that will let a node decommission itself on sys halt (rc0) but apparently knife doesn't get a config on provisioned boxes. I could use some tips on making sure that knife can access chef server form a provisioned box
[2012-06-11 23:25:31 -0400] pwf: knife ssh "some:search_string" "sudo chef-client"
[2012-06-11 23:25:36 -0400] pwf: alex_____: ^
[2012-06-11 23:25:42 -0400] alex_____: i know something like: knife ssh role[ROLE] chef-client
[2012-06-11 23:26:00 -0400] alex_____: would do that for all nodes with that particular role in the run_list
[2012-06-11 23:26:05 -0400] pwf: if you wanna do it by role name the search string is "role:whatever"
[2012-06-11 23:26:50 -0400] pwf: sivy: are you setting up chef-client with the bootstrap script?
[2012-06-11 23:27:02 -0400] sivy: pwf knife ec2 etc
[2012-06-11 23:27:11 -0400] pwf: you should be able to just make a knife config that points to wherever those files get set up
[2012-06-11 23:27:28 -0400] sivy: knife ec2 server create etc
[2012-06-11 23:27:45 -0400] alex_____: that's what i'm doing
[2012-06-11 23:27:58 -0400] alex_____: let's say i then add something to the run_list
[2012-06-11 23:28:08 -0400] alex_____: for that new node
[2012-06-11 23:28:12 -0400] pwf: yeah sivy that follows the standard bootstrap process i think
[2012-06-11 23:28:21 -0400] pwf: http://wiki.opscode.com/display/chef/EC2+Bootstrap+Fast+Start+Guide#EC2BootstrapFastStartGuide-Step3%253ABootstraptheEC2Instance
[2012-06-11 23:28:37 -0400] pwf: whichever bootstrap_file you give will say where the client keys and stuff go
[2012-06-11 23:29:25 -0400] pwf: this may help you alex_____ http://wiki.opscode.com/display/chef/Search#Search-SearchforNodesBasedonRunListEntries
[2012-06-11 23:29:55 -0400] pwf: sivy: you can make a custom bootstrap template file that can provide its own knife config
[2012-06-11 23:30:04 -0400] pwf: that way you could guarantee it's there when you bootstrap
[2012-06-11 23:30:28 -0400] sivy: pwf: ok, i'll take a look. we're not using a custom bootstrapper right now
[2012-06-11 23:41:00 -0400] yfeldblum: sivy, i would not recommend trying to automate the Knife CLI tool
[2012-06-11 23:41:25 -0400] sivy: yfeldblum: ok, i'll bite; why?
[2012-06-11 23:41:42 -0400] yfeldblum: sivy, i'd suggest using the actual chef-server-api via either the REST API directly, or via a ruby client such as the "chef" gem or the "spice" gem
[2012-06-11 23:42:32 -0400] chip-: Repeat question, if anyone answered this morning I missed it: Is there a way to enforce that people do not use knife foo edit to directly edit-in-place particular resources?
[2012-06-11 23:42:42 -0400] chip-: I want everyone doing knife foo from file and using json docs that are in the repo
[2012-06-11 23:42:43 -0400] yfeldblum: sivy, you can write against knife, but it's better practice to write against the actual API than to write against knife
[2012-06-11 23:43:25 -0400] chip-: As the team grows this is becoming increasingly important, as there's a couple of code cowboys who want in on this and I don't want them messing everything up and then blaming the tools for not enforcing change control.
[2012-06-11 23:43:28 -0400] sivy: yfeldblum: hm. makes sense, though I'm only looking for a one-liner
[2012-06-11 23:43:30 -0400] yfeldblum: chip-, the chef-server-api and knife are very raw or low-level tools; it sounds like, in your organization, you may want something extra to hide the messy details
[2012-06-11 23:43:40 -0400] sivy: knife node delete <nodename> -y
[2012-06-11 23:43:59 -0400] sivy: and knife does all the auth for me
[2012-06-11 23:44:25 -0400] sivy: yfeldblum: but i'll take a look at the api
[2012-06-11 23:45:45 -0400] yfeldblum: sivy, knife isn't really an API meant for automation; it's more of a CLI meant for human use; use knife if you like, but i prefer to automate APIs
[2012-06-11 23:46:04 -0400] sivy: yfeldblum: well, i'm looking at chef-server-api now
[2012-06-11 23:46:20 -0400] sivy: how does it handle authentication?
[2012-06-11 23:47:30 -0400] yfeldblum: sivy, it's tricky, which is why i suggested using a ready-made client api such as the chef gem or the spice gem
[2012-06-11 23:47:54 -0400] sivy: yfeldblum: is the chef gem different than the chef-server-api gem?
[2012-06-11 23:49:24 -0400] sivy: yfeldblum: ok, i'll keep digging. Any pointers to usage would be appreciated.
[2012-06-11 23:50:51 -0400] yfeldblum: sivy, the chef gem is the gem that includes chef-client, chef-solo, shef, and knife
[2012-06-11 23:51:08 -0400] yfeldblum: sivy, therefore, it also has a client API for dealing with the chef-server-api
[2012-06-11 23:51:44 -0400] yfeldblum: sivy, the chef-server-api is the API endpoint for the chef-server; all cookbook uploads, data bag from files, searches, etc., go to the chef-server-api
[2012-06-11 23:52:02 -0400] sivy: yeah, i figured that out. sorry for the dumb ques.
[2012-06-11 23:54:50 -0400] sivy: Google is not so good at finding examples of using the client api from ruby, as opposed to the 1001 tutorials on using knife :/
[2012-06-11 23:56:17 -0400] yfeldblum: sivy, https://github.com/opscode/chef/tree/master/chef/lib/chef/knife

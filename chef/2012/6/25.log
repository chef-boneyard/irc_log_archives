[2012-06-25 00:11:36 -0400] hakunin: looks like opscode nginx recipe is broken with bluepill
[2012-06-25 00:27:34 -0400] williamherry: how do I use node specified info when I write a recipe, like node's IP addr, I know this info are collected by Ohai, how do I get them to use in recipe
[2012-06-25 00:34:24 -0400] cheeseplus: williamherry: node[:platform] for example
[2012-06-25 00:35:29 -0400] cheeseplus: williamherry: node[:ipaddress] in your case
[2012-06-25 00:35:51 -0400] williamherry: cheeseplus, thank you, how do I know all available those thing
[2012-06-25 00:36:36 -0400] cheeseplus: knife node show NODE -a
[2012-06-25 00:36:52 -0400] cheeseplus: oops
[2012-06-25 00:36:59 -0400] cheeseplus: knife node show NODE -l
[2012-06-25 00:37:13 -0400] cheeseplus: -a ATTRIBUTE will just show you the attribute you are curious about
[2012-06-25 00:40:22 -0400] williamherry: cheeseplus, thank you
[2012-06-25 00:42:40 -0400] cheeseplus: williamherry: np, now if only my superclass mismatch problem was that easily solved
[2012-06-25 00:49:09 -0400] cakehero: Where could I find information on the override-runlist option?
[2012-06-25 01:04:23 -0400] miah: w00t. im an idiot. and my code is fixed. horray.
[2012-06-25 01:22:09 -0400] hakunin: sigh. not only is official nginx recipe breaking with bluepill enabled because it tries to start bluepill before creating log_dir, it also recompiles nginx from source on every run, not_if block is broken.
[2012-06-25 01:22:48 -0400] miah: ya
[2012-06-25 01:22:54 -0400] miah: im going to tackle the nginx cookbook this week
[2012-06-25 01:22:56 -0400] miah: its not idempotent
[2012-06-25 01:23:14 -0400] miah: and numerous other problems
[2012-06-25 01:23:40 -0400] hakunin: miah: do you know if any well-working alternative exists?
[2012-06-25 01:23:48 -0400] miah: not that i know of
[2012-06-25 01:23:54 -0400] miah: i have a fork, but i haven't done any work on it yet
[2012-06-25 01:23:59 -0400] z: 'apache2'
[2012-06-25 01:24:06 -0400] miah: i've been working on varnish this weekend
[2012-06-25 01:24:18 -0400] z: miah: I saw on Travis
[2012-06-25 01:24:29 -0400] miah: https://github.com/miah/varnish/tree/rhel
[2012-06-25 01:24:39 -0400] hakunin: z: what is 'apache2'?
[2012-06-25 01:24:46 -0400] miah: its the apache2 cookbook
[2012-06-25 01:24:51 -0400] miah: =)
[2012-06-25 01:25:12 -0400] z: miah: Are you doing all your testing via Travis, or have you been delving into other options for private cookbooks?
[2012-06-25 01:25:42 -0400] z: going to have to figure out an approach in the next little while, wondered if anyone had recommended reading
[2012-06-25 01:35:27 -0400] valdezjoelt: hi I'm having issues, uploading a cookbook. ERROR: Connection refused connecting to chefserver:4000 for /cookbooks, retry 1/5, is there someone encountered this problem?
[2012-06-25 01:36:01 -0400] valdezjoelt: hi I'm having issues, uploading a cookbook. ERROR: Connection refused connecting to chefserver:4000 for /cookbooks, retry 1/5, is there someone encountered this problem?
[2012-06-25 01:37:10 -0400] z: is chefserver actually resolvable?
[2012-06-25 01:37:19 -0400] z: if so is chef-server running, and does netstat show it?
[2012-06-25 01:39:32 -0400] miah: z: i am trying to put all my testing in travis. i have to start diving into minitest and chefspec and seeing what i can do for actually testing my cookbooks
[2012-06-25 01:39:50 -0400] miah: right now most of my testing is just running foodcritic
[2012-06-25 01:40:01 -0400] valdezjoelt: hi z
[2012-06-25 01:40:14 -0400] valdezjoelt: yes i can actually go in thru webui
[2012-06-25 01:40:35 -0400] z: valdezjoelt: webui runs on a different port
[2012-06-25 01:40:53 -0400] valdezjoelt: i can telnet to 4000
[2012-06-25 01:40:55 -0400] miah: make sure your chef server is running
[2012-06-25 01:41:59 -0400] valdezjoelt: let me double check
[2012-06-25 01:42:40 -0400] hoover_damm: connection refused is a confusing message
[2012-06-25 01:42:45 -0400] hoover_damm: you actually should eb running in debug mode
[2012-06-25 01:42:48 -0400] hoover_damm: be*
[2012-06-25 01:43:00 -0400] hoover_damm: valdezjoelt, it's possible that if you delete the cookbook in question and then reupload it
[2012-06-25 01:43:03 -0400] hoover_damm: it should work
[2012-06-25 01:43:49 -0400] valdezjoelt: let me try :)
[2012-06-25 01:43:50 -0400] hoover_damm: valdezjoelt, but you should modify server.rb to move it to debug mode, restart chef-server and then try again and post the logs at http://gist.github.com and let us know
[2012-06-25 01:44:09 -0400] hoover_damm: because delete / re-upload is not a good pattern
[2012-06-25 01:44:19 -0400] valdezjoelt: okey thanks hoover_damm
[2012-06-25 01:44:28 -0400] hoover_damm: np
[2012-06-25 01:45:33 -0400] hoover_damm: that error is normally couchdb specific so you should verify you have enough disk space, and check out /var/lib/couchdb btw
[2012-06-25 01:45:43 -0400] hoover_damm: if chef.couch is 80gigs or whatever
[2012-06-25 01:45:48 -0400] hoover_damm: couchdb has fun then
[2012-06-25 01:46:17 -0400] hoover_damm: there's a compaction function builtinto the chef-server cookbook
[2012-06-25 01:47:00 -0400] hoover_damm: https://github.com/opscode-cookbooks/chef-server/blob/master/recipes/default.rb#L24-L51
[2012-06-25 01:47:52 -0400] williamherry: I install bind cookbook from site and run it, it fail with: ERROR: knife search failed: I don't know how to search for bind data objects.
[2012-06-25 01:48:05 -0400] hoover_damm: and if you run ubuntu pre-karmic I believe... your erlang possibly could be the issue
[2012-06-25 01:48:49 -0400] hoover_damm: https://issues.apache.org/jira/browse/COUCHDB-275
[2012-06-25 01:48:52 -0400] hoover_damm: and because it's in erlang
[2012-06-25 01:49:00 -0400] hoover_damm: erlang reloads couchdb
[2012-06-25 01:49:10 -0400] hoover_damm: well actually that's the wrong terminology
[2012-06-25 01:49:25 -0400] hoover_damm: but because it's erlang the function the crashes crashed.  Not couchdb which can cause the connection refused
[2012-06-25 01:49:55 -0400] hoover_damm: but without debug logs we can't say so i'm just babbling
[2012-06-25 01:49:59 -0400] williamherry: I can search node, does that means some thing
[2012-06-25 01:50:16 -0400] hoover_damm: williamherry, knife search bind_data:?
[2012-06-25 01:50:46 -0400] hoover_damm: williamherry, searching databags is fairly straight forward.  If you create a databag called app, you would then knife search app id:1
[2012-06-25 01:51:18 -0400] williamherry: hoover_damm, thanks, I know what's going on now
[2012-06-25 01:51:27 -0400] williamherry: I have to create data bag
[2012-06-25 01:53:26 -0400] leifmadsen: if anyone has access to the versions in jira at tickets.opscode.com, the version "10.12.0" is invalid and should be changed to "0.10.12"
[2012-06-25 01:54:00 -0400] hoover_damm: leifmadsen, just email out if no one responds shortly (to the regular chef ml)
[2012-06-25 01:54:13 -0400] leifmadsen: ah I'm not on that list :S
[2012-06-25 01:54:19 -0400] hoover_damm: should change that
[2012-06-25 01:54:31 -0400] leifmadsen: I suspect I wouldn't check it that often
[2012-06-25 01:54:38 -0400] leifmadsen: I'm more an irc and jira kinda person
[2012-06-25 01:54:48 -0400] hoover_damm: consider it an archive to search through
[2012-06-25 01:54:56 -0400] leifmadsen: that's what google is for :)
[2012-06-25 01:54:57 -0400] hoover_damm: every often you'll post
[2012-06-25 01:55:12 -0400] leifmadsen: then I'll have to load thunderbird which I loath
[2012-06-25 01:55:17 -0400] hoover_damm: rofl
[2012-06-25 01:55:20 -0400] valdezjoelt: hi hoover_damm, how do i set to debug mode inside the /etc/chef/server.rb
[2012-06-25 01:55:21 -0400] hoover_damm: what do you do then? gmail?
[2012-06-25 01:55:27 -0400] leifmadsen: yep
[2012-06-25 01:55:28 -0400] hoover_damm: valdezjoelt, log_level
[2012-06-25 01:55:31 -0400] leifmadsen: I have 3 gmail accounts
[2012-06-25 01:55:34 -0400] hoover_damm: leifmadsen, so subscribe to gmail?
[2012-06-25 01:55:39 -0400] hoover_damm: through gmail?
[2012-06-25 01:55:45 -0400] leifmadsen: poor threading in gmail
[2012-06-25 01:56:08 -0400] leifmadsen: I might subscribe so I can post and check once every 2 weeks
[2012-06-25 01:56:14 -0400] leifmadsen: but not tonight, as I must stretch and obtain sleep
[2012-06-25 01:56:31 -0400] leifmadsen: is that a bot?
[2012-06-25 02:02:05 -0400] valdezjoelt: hi hover_damm this is the log the content of the log file in debug mode http://pastebin.com/nfwJUHUc
[2012-06-25 02:05:24 -0400] hoover_damm: valdezjoelt, looks like the right log.  Now try and upload the cookbook and review that log
[2012-06-25 02:05:36 -0400] hoover_damm: valdezjoelt, and paste what happens when you upload, redact whatever you'd like
[2012-06-25 02:13:49 -0400] rayrod2030: I'm having trouble with the service resource properly starting tomcat for me in a recipe.  anybody willing to assist?
[2012-06-25 02:56:32 -0400] williamherry: where is the place to specify some option that override default setting
[2012-06-25 02:56:46 -0400] williamherry: for a specified node?
[2012-06-25 04:03:01 -0400] BryanWB: miah, what problem w/ ark?
[2012-06-25 04:21:01 -0400] miah: doh. where is bryan
[2012-06-25 04:21:50 -0400] miah: the problem is im a derpy
[2012-06-25 05:28:17 -0400] BryanWB_: yo chefs!
[2012-06-25 07:23:16 -0400] railsraider: i am unable to use source  inside bash script     source /etc/profile.d/rvm.sh  STDERR: sudo: source: command not found
[2012-06-25 07:28:07 -0400] railsraider: what user does chef-client run as? its not reading any PATH settings
[2012-06-25 07:31:34 -0400] railsraider: do i need to explicitly set a PATH on each chef-run?
[2012-06-25 07:43:06 -0400] specialsauce: railsraider - "source" is a bash built-in iirc, are you certain that your root user has its shell set to bash?
[2012-06-25 07:43:23 -0400] railsraider: 100%
[2012-06-25 07:43:40 -0400] specialsauce: If so, this is probably something to do with how you are executing the wcript via sudo, can you paste the whole chunk?
[2012-06-25 07:43:54 -0400] railsraider: sure
[2012-06-25 07:44:23 -0400] railsraider: the export PATH  did work
[2012-06-25 07:46:29 -0400] railsraider: specialsauce: here's the output http://www.pastie.org/private/yxiy0czpmub5i74ns4yla
[2012-06-25 07:56:33 -0400] specialsauce: railsraider: i can't see clearly what's failing for you there. it looks like the supported way to do this is to use the "environment" parameter on an execute resource (http://wiki.opscode.com/display/chef/Resources#Resources-Execute) but I can't see a comparable for a script resource. It may be that only execute resrouce preserves these variables and makes them available? I'm not familiar with the code itself
[2012-06-25 07:58:39 -0400] jerem`: I get an error after an info message :
[2012-06-25 07:58:40 -0400] jerem`: INFO: HTTP Request Returned 404 Not Found: I don't know how to search for users data objects.
[2012-06-25 07:58:51 -0400] jerem`: FATAL: Net::HTTPServerException: 404 "Not Found"
[2012-06-25 07:59:08 -0400] jerem`: on my chef-client node, do you have ideas ?
[2012-06-25 08:03:11 -0400] jerem`: http://ziirish.info/y/z254T
[2012-06-25 08:08:53 -0400] specialsauce: jerem: not come across that, have you done a quick grep for "users" in your chef repo and had a look at what this might be? Are you using anything dynamic-ish like search, databags etc etc to retrieve users data?
[2012-06-25 08:11:30 -0400] jerem`: specialsauce: i'm not using a databag
[2012-06-25 08:11:40 -0400] specialsauce: jerem`, search?
[2012-06-25 08:17:18 -0400] jerem`: specialsauce: in my mind, I forgot a databag for my recipe
[2012-06-25 08:18:25 -0400] specialsauce: jerem`, ok, cool
[2012-06-25 08:22:14 -0400] wonko_be: hey
[2012-06-25 08:22:33 -0400] wonko_be: is it possible to notify a external resource from within a LWRP action?
[2012-06-25 08:22:44 -0400] wonko_be: external being a resource in the default recipe of the LWRP
[2012-06-25 08:46:43 -0400] jerem`: what's the problem with this error message ? Chef::Exceptions::Package: No version specified, and no candidate version available for nagios-plugins
[2012-06-25 08:49:12 -0400] specialsauce: jerem`, if that's on a package install, you can pass a version through in the resource definition. It looks like you aren't doing this explicitly and it can't find the package from the resource prvider you are specifying
[2012-06-25 08:49:56 -0400] specialsauce: ie if you are specifiying a package resource using yum, this is it saying "'yum install nagios-plugins' returned an error because it couldn't find that package"  i think
[2012-06-25 08:50:31 -0400] jerem`: In fact, the nagios-plugins package isn't  in my repositories, so the error message say me a version problem
[2012-06-25 08:52:08 -0400] jerem`: specialsauce: yeah
[2012-06-25 08:55:17 -0400] jerem`: specialsauce: but If I've the package in my repo, and without specify a version in my nodes/station.json , it doesn't should take the only one version of the package ?
[2012-06-25 08:56:00 -0400] jerem`: yum search my-package // return only one version of the package
[2012-06-25 08:57:33 -0400] specialsauce: jerem`, I believe that is what happens if you dont' specify a version, yes. ie you should be able to leave "version" blank if you don't mind what version installs
[2012-06-25 08:59:41 -0400] jerem`: yep ok specialsauce thanks
[2012-06-25 09:04:51 -0400] wonko_be: jerem`: that might also be because some dependency of the package isn't available... read it as "can't install package"
[2012-06-25 09:08:48 -0400] specialsauce: wonko_be, true generally but he also stated the package isn't in his repository in this case
[2012-06-25 09:14:28 -0400] wonko_be: ah, sorry, missed that
[2012-06-25 10:00:02 -0400] matti: miah: Nice about.me page. I can sanely connect your twitter handle to your nick here.
[2012-06-25 10:26:40 -0400] pehlert: Folks, after a few days of work, I have just bootstrapped a fully functional mail server environment thanks to Chef! Thanks to all contributors who made this possible!
[2012-06-25 10:54:25 -0400] BryanWB_: pehlert: our pleasure!
[2012-06-25 10:54:35 -0400] BryanWB_: pehlert: enjoy!
[2012-06-25 10:59:43 -0400] ddosia: hello guys, i have a Q about callbacks. If i need trigger some action on chef server when some event occured on client node, how could i do it?
[2012-06-25 11:31:58 -0400] pehlert: Within a chef run, can I force ohai to reread the node attributes?
[2012-06-25 11:33:15 -0400] pehlert: Oh, sorry. There is the ohai resource ;-)
[2012-06-25 11:36:05 -0400] maruq: hi guys
[2012-06-25 11:36:32 -0400] maruq: just wondering if anyone's tried mixing Chef environments with Librarian-Chef?
[2012-06-25 11:42:30 -0400] Mez: Hi all. Trying to use the opscode cookbooks to just install php in fpm mode - but it's determined to install it in modphp mode (wtih apache) this is ubuntu precise.  Anyone have any ideas?
[2012-06-25 11:48:28 -0400] maruq: Mez: there seems to be a php-fpm cookbook, but no docs :(
[2012-06-25 11:48:47 -0400] leifmadsen: docs make it too easy; now it's an adventure!
[2012-06-25 11:48:50 -0400] maruq: from the looks of things, it'll install php5-fpm & php5-cgi
[2012-06-25 11:49:07 -0400] Mez: maruq: It depended on the php package
[2012-06-25 11:49:25 -0400] Mez: and I think the old version by default used "php5" as the first package, which would force an apache install.
[2012-06-25 11:49:29 -0400] Mez: I think the new one doesn't do that
[2012-06-25 11:49:34 -0400] Mez: I'm just testing it.
[2012-06-25 11:50:02 -0400] Mez: also, that's annoying
[2012-06-25 11:50:13 -0400] RJ2: any idea why "knife status" shows the wrong time?
[2012-06-25 11:50:24 -0400] Mez: RJ2: is your time set wrong ?
[2012-06-25 11:50:32 -0400] RJ2: "372395 hours ago"
[2012-06-25 11:50:42 -0400] maruq: Mez: the php-fpm one seems to install a "dot deb" cookbook, which specifies it's own apt repo
[2012-06-25 11:50:58 -0400] rgsteele: If recipe A has an 'include_recipe' statement for recipe B, can something in B 'notify' a resource in A without any namespacing?  If not, should using "notifies: restart, 'service[A::resourcename]'" do the trick?
[2012-06-25 11:51:00 -0400] RJ2: nope the time on chefserver and that node match
[2012-06-25 11:51:14 -0400] Mez: maruq: that's only if it's a certain version of ubuntu I think.
[2012-06-25 11:51:25 -0400] RJ2: it's wrong on all nodes except the chefserver one, the "hours ago" time is large, but chef-client runs every 30 mins
[2012-06-25 11:51:32 -0400] RJ2: i can see successful runs in the logs on that node
[2012-06-25 11:51:39 -0400] RJ2: and it has my latest recipe changes applied
[2012-06-25 11:52:24 -0400] maruq: Mez: yeah. took a look at php cookbook, you can specify ['php']['install_method'] as source
[2012-06-25 11:52:37 -0400] Mez: maruq: I don't want to install from source.
[2012-06-25 11:52:40 -0400] maruq: if so, it sets the option "--enable-fpm"
[2012-06-25 11:53:00 -0400] Mez: maruq: the problem is that the php cookbook was installing apache.
[2012-06-25 11:54:01 -0400] Mez: I *believe* that was due to me using an old version of the cookbook... which installed the "php5" package first (it now installs php5-cgi first)
[2012-06-25 11:54:13 -0400] Mez: which *should* fix the problem. Cept my apt-update is broken
[2012-06-25 11:54:15 -0400] maruq: Mez: which version of the cookbook are you using? 1.0.2 doesn't seem to specify apache2 at all, but it could be an OS level dependency
[2012-06-25 11:54:24 -0400] Mez: can someone please fix the damned bot
[2012-06-25 11:54:44 -0400] Mez: maruq - the "php5" package uin ubuntu depends on libapache2-mod-php5 | php-cgi | php-cli
[2012-06-25 11:54:59 -0400] Mez: so if it installs php5 and none of those are installed... it'll install the apache mod
[2012-06-25 11:56:13 -0400] maruq: Mez: hmm could you install php-cgi / php-cli first before installing php5?
[2012-06-25 11:56:39 -0400] Mez: maruq - yes - but that's not how the cookbook works
[2012-06-25 11:56:46 -0400] Mez: Who owns opscode-rs-prepr ??
[2012-06-25 11:56:51 -0400] Mez: cause it's getting on my nerves
[2012-06-25 11:58:43 -0400] maruq: @Mez :( , php::package (v.1.0.2) calls php5-cgi php5 php5-dev php5-cli php-pear. Not sure if that would work?
[2012-06-25 11:59:06 -0400] Mez: maruq... I don't know :) I'm attempting to try
[2012-06-25 11:59:15 -0400] maruq: Mez: good luck ;)
[2012-06-25 12:16:53 -0400] zts: rgsteele: the former - resources are in a global namespace, so your "notifies" doesn't need to include the cookbook name anywhere
[2012-06-25 12:17:42 -0400] zts: ;/.l , jkl-=]
[2012-06-25 12:17:43 -0400] zts: ]
[2012-06-25 12:17:46 -0400] zts: ]
[2012-06-25 12:17:56 -0400] zts: ...well, that's hopefully my boneheaded moment for the day
[2012-06-25 12:17:58 -0400] zts: sorry :)
[2012-06-25 12:18:40 -0400] maruq: zts, rgsteele: In 0.9.x, you had to have the resource exist before it could be called. Under 10.x, it doesn't matter
[2012-06-25 12:19:37 -0400] zts: maruq: that's still true in 0.10.x if you're using the old syntax - though dgsteele's example used the new one
[2012-06-25 12:20:18 -0400] zts: maruq: in both cases, resource names are in a global namespace - ie, the order of definition matters, but not the location
[2012-06-25 12:20:35 -0400] maruq: zts: true.
[2012-06-25 12:26:18 -0400] ringods: Does anyone have a code snippet to check upon a minimal version of Chef?
[2012-06-25 12:26:51 -0400] jatan: ringods, run the test suite? :)
[2012-06-25 12:27:16 -0400] ringods: jatan: ??
[2012-06-25 12:28:30 -0400] jatan: ringods, what are you trying to achieve?
[2012-06-25 12:29:12 -0400] ringods: jatan: in my cookbook, I want to log an "unsupported on Chef < 0.10.10". This is for a Mac OS X service resource, and the Mac OS X service provider is added since 0.10.10
[2012-06-25 12:33:21 -0400] ringods: jatan: in environments, you can specify version constraints on cookbook versions, so somewhere in Chef there must be some piece of code to test actual against defined versions. But I can't seem to find it in the chef gem Any idea?
[2012-06-25 12:34:28 -0400] jatan: nope, not off the top of my head, but I'd always recommend looking at the tests suite.. that's how I got started :)
[2012-06-25 12:34:42 -0400] jatan: since most things implemented are nicely covered there
[2012-06-25 12:35:48 -0400] ringods: ok, tnx
[2012-06-25 12:36:44 -0400] maruq: ringods, japan: how does the version stuff work there? I'm looking at trying to use librarian-chef for the cookbooks + chef-envs, but not sure the 2 things know about each other
[2012-06-25 12:38:22 -0400] ringods: Found the code: chef/version_constraint.rb
[2012-06-25 12:44:04 -0400] Mez: hmm... si there an issue tracker for the opscode cookbooks ?
[2012-06-25 12:44:28 -0400] yfeldblum: tickets.opscode.com
[2012-06-25 12:44:32 -0400] z: Mez: good to see you in #chef ;)
[2012-06-25 12:44:41 -0400] Mez: z: long time no see :)
[2012-06-25 12:44:49 -0400] matti: Mez :)
[2012-06-25 12:48:01 -0400] Mez: oh, man - everyone's in here :)
[2012-06-25 12:48:09 -0400] Mez: @ jtimberman : http://tickets.opscode.com/browse/COOK-1389
[2012-06-25 12:49:35 -0400] yfeldblum: maruq, librarian-chef looks at the cookbook's metadata.rb and pulls out the basic dependency metadata (it doesn't yet look at the conflicts or other advanced metadata yet though, but it'd extremely unusual to find a cookbook that currently uses them)
[2012-06-25 12:50:49 -0400] maruq: yfeldblum: thanks. I meant more can I have different environments declared in my librarian-chef, or have different librarian-chef files declared in the environments?
[2012-06-25 12:51:29 -0400] maruq: yfeldblum: eg. my production env uses on cheffile, my staging uses another, test has a 3rd one, etc
[2012-06-25 12:51:50 -0400] maruq: that way I can test cookbooks before bumping them through to prod ;)
[2012-06-25 12:52:45 -0400] maruq: In theory, I could do most of this through chef environments, but it'd be nice to use librarian-chef so that I can keep consistency between chef server & chef solo setups
[2012-06-25 12:52:58 -0400] maruq: using chef-solo + vagrant for dev stuff
[2012-06-25 12:53:15 -0400] xerxas: Hi all
[2012-06-25 12:54:51 -0400] xerxas: anyone using the postgresql cookbook ? I've included postgresql::server in my run_list, it keeps installing me postgresql::client, wich installs make, and gem pg, and than fails at building the native gem ... but I don't even want to look why it fails, as I don't need gem pg ...
[2012-06-25 12:55:25 -0400] xerxas: any idea how I would only install postgresql ?
[2012-06-25 12:55:31 -0400] jatan: xerxas, you kind of do, since lots of PG configuration can only be done by accessing the server over SQL
[2012-06-25 12:55:32 -0400] xerxas: am I supposed to write my own cookbook ?
[2012-06-25 12:56:16 -0400] xerxas: jatan:  I don't need these stuff, maybe I need libpq, but no more
[2012-06-25 12:56:18 -0400] jatan: xerxas, if you want to avoid the compile, then yes, otherwise filing an issue for it seems like the way to go
[2012-06-25 12:57:31 -0400] yfeldblum: maruq, librarian-chef works best with the git-based workflows (or other scm-based workflows)
[2012-06-25 12:57:47 -0400] yfeldblum: maruq, but you can always have different Cheffiles in different git branches
[2012-06-25 12:58:08 -0400] xerxas: jatan: ok, thanks
[2012-06-25 12:58:27 -0400] maruq: yfeldblum: hmm true. I guess map the git branch + chef file to an environment?
[2012-06-25 12:59:05 -0400] yfeldblum: maruq, that is an option
[2012-06-25 12:59:49 -0400] yfeldblum: maruq, i personally favor multiple chef-servers instead of multiple chef-environments in one chef-server for some of these types of cases
[2012-06-25 12:59:54 -0400] sfritz: Unable to access http://wiki.opscode.com/. Anyone here who can?
[2012-06-25 13:00:10 -0400] z: sfritz: Works for me.
[2012-06-25 13:00:32 -0400] maruq: yfeldblum: yeah, I guess that sort of works, it's just annoying to switch knife.rb every 5 mins
[2012-06-25 13:00:57 -0400] maruq: although I guess you could always pass options in at cli & alias the command
[2012-06-25 13:01:43 -0400] sfritz: I get a 354 (net::ERR_CONTENT_LENGTH_MISMATCH)
[2012-06-25 13:01:54 -0400] mayank: Hi I am noob to chef though I've used puppet before and I need some help in setting up my chef infrastructure in place
[2012-06-25 13:01:59 -0400] yfeldblum: maruq, i don't switch knife.rb; i just prefix knife commands with an environment variable
[2012-06-25 13:02:11 -0400] yfeldblum: maruq, e.g. `KNIFE_ENV=qa knife status`
[2012-06-25 13:02:49 -0400] yfeldblum: maruq, the knife.rb is just pure plain old ruby, so feel free to go wild with it
[2012-06-25 13:02:53 -0400] maruq: yfeldblum: yep, that's kind of what I meant. you could then alias that as "knife_qa"
[2012-06-25 13:03:50 -0400] mayank: I have setup open source chef server and I've been able to configure my workstation as knife client as well .... also I've been able to make instances configure through chef ... however now I need some way to ensure that my chef server remains in sync with my git repository and I am not sure how to go about this task ...
[2012-06-25 13:04:21 -0400] geekbri: You could have the knife.rb perform a git checkout of the qa branch when do KNIFE_ENV=qa or something
[2012-06-25 13:04:37 -0400] geekbri: and it go do a librarian clean and instal
[2012-06-25 13:04:43 -0400] sfritz: z: Does work in Firefox, seems that Chrome is the problem
[2012-06-25 13:04:50 -0400] geekbri: hrm..... I could see some dangers with that but.... it should work.
[2012-06-25 13:05:01 -0400] maruq: geekbri: hmm interesting idea ;)
[2012-06-25 13:05:31 -0400] geekbri: maruq: if you take that route, i'd just be careful, and put plenty of safety checks in :)
[2012-06-25 13:05:57 -0400] yfeldblum: geekbri, you go around handing out loaded guns in the park too, i take it :P
[2012-06-25 13:06:16 -0400] geekbri: yfeldblum: hehe, yes but I tell people to be careful who they shoot at ;)
[2012-06-25 13:06:52 -0400] maruq: yfeldblum: check out this sweet shooter I got from geekbri, I just pull this trigger and oh god! my face!
[2012-06-25 13:07:12 -0400] geekbri: In my defense, i didn't say it was a good idea... I just said it would work!
[2012-06-25 13:07:29 -0400] maruq: yfledblum, geekbri: yeah, something to toy with, but not in production ;)
[2012-06-25 13:07:44 -0400] geekbri: I mean you can put square wheels on a car too I guess.  If its all you can get your hands on :-P
[2012-06-25 13:11:19 -0400] mayank: any ideas guys how should i go about this job ?
[2012-06-25 13:14:05 -0400] mayank: anyone ?
[2012-06-25 13:16:46 -0400] specialsauce: mayank: i can think of lots of ways. we use commit hooks on the git server do update the chef server when cahnges are pushed to git. but there's many other possibilities
[2012-06-25 13:21:06 -0400] mayank: specialsauce: I wanted to run a cron job on chef server which pulls from git and updates the chef server ...  however every time I execute rake install on chef server it seems to upload cookbooks though cookbooks are already there on the server
[2012-06-25 13:21:15 -0400] mayank: is this ok ?
[2012-06-25 13:23:45 -0400] specialsauce: mayank - a cron is OK but a polling pull is a bit wasteful on resources compared to a commit hook. In terms of the second point (uploading everything), there has been some discussion on the mailing list recently about this, this seems to be what it does at the moment. I don't know how other people get around this other than writing scrips to find only changed files etc
[2012-06-25 13:26:09 -0400] garrensmith: morning
[2012-06-25 13:26:58 -0400] garrensmith: anyone here using knife-solo? I seem to be getting authentication problems or something, whenever I try and do a knife prepare it doesn't install chef, I'm setup my ssh keys correctly because I can ssh into the box. Any help would be awesome
[2012-06-25 13:28:14 -0400] xerxas: jatan:  ok, you were right , I want these features ! ;)
[2012-06-25 13:28:31 -0400] xerxas: then, I'll dig the issue, or search ...
[2012-06-25 13:35:34 -0400] Loof: I want to use Chef to deploy on AWS using this pattern: 1) Start up new instances using current snapshot; Update only new instances 2) <OPTIONALLY> Switch Production to 'Maintanence page'; Wait for DB changes & manual review 3) Switch LB to use new instances; stop all old prod instances
[2012-06-25 13:36:26 -0400] Loof: I wonder if there's a best practice for doing this sort of staged change... or a pattern/tutorial to follow... or if I should be using a different tool.
[2012-06-25 13:37:39 -0400] garrensmith: do you guys setup your machines with passwordless sudo?
[2012-06-25 13:51:05 -0400] BryanWB_: i do
[2012-06-25 13:52:36 -0400] mparadise: http://www.berryreview.com/2012/06/25/blackberry-10-l-series-and-n-series-specs-leak
[2012-06-25 13:52:42 -0400] mparadise: sorry, wrong window
[2012-06-25 14:01:53 -0400] railsraider: Hey, I need to create a new ssh key and somehow add it to another server ski can get access to it
[2012-06-25 14:02:09 -0400] railsraider: is there a way to do that with chef
[2012-06-25 14:03:55 -0400] maruq: railsraider: would something like this work? https://github.com/opscode-cookbooks/users
[2012-06-25 14:04:51 -0400] railsraider: maruq:  i am using that cookbook, the problem is not generating the key but adding the key to a server that chef-run does not have any access to to begin with
[2012-06-25 14:05:41 -0400] maruq: there's a few other options there: http://community.opscode.com/search?query=users&scope=search
[2012-06-25 14:30:58 -0400] frank_: hi all. got a problem with chef-client (latest "chef" gem) on ubuntu 10.04. see http://pastie.org/private/tzjyailpl0nbysagxsixuq
[2012-06-25 14:31:17 -0400] frank_: it looks like a few of the bugs in the JIRA, but those all reflect previous versions
[2012-06-25 14:31:32 -0400] frank_: any clues what might cause the FATAL: TypeError: wrong argument type Hash (expected Data) ?
[2012-06-25 14:33:27 -0400] frank_: it does work with the apt-get'abble chef. but i prefer to use the gem installed one
[2012-06-25 14:42:09 -0400] garrensmith: anyone having issues with the omnibus installer installing into /opt/chef instead of /opt/opscode?
[2012-06-25 14:44:54 -0400] agosse: ok - dumb question of the day
[2012-06-25 14:45:15 -0400] agosse: i'm trying to not_if "ls foo" a template
[2012-06-25 14:45:40 -0400] agosse: when foo doesn't exist, chef throws an exception because foo doesn't exist
[2012-06-25 14:45:42 -0400] jelder_: not_if { File.exists? "foo" }
[2012-06-25 14:45:55 -0400] agosse: not if "ls #{foo}"
[2012-06-25 14:45:59 -0400] jelder_: shelling out is generally frowned upon
[2012-06-25 14:46:27 -0400] agosse: jelder_: i'll need to find which example i got that from then and blame the author
[2012-06-25 14:46:40 -0400] jelder_: good idea :)
[2012-06-25 14:55:15 -0400] z: anyone know what causes foodcritic to exit code 3 usually?
[2012-06-25 14:55:16 -0400] z: Command failed with status (3): [foodcritic --epic-fail any /Users/agh/Drop...]
[2012-06-25 14:55:24 -0400] z: it is making Rake quite angry :-)
[2012-06-25 15:02:33 -0400] hoover_damm: 3 is no such process
[2012-06-25 15:02:34 -0400] hoover_damm: ;)
[2012-06-25 15:03:06 -0400] hoover_damm: at least if that's a standard unix error code
[2012-06-25 15:03:50 -0400] garrettux: hi guys!
[2012-06-25 15:04:21 -0400] garrettux: has anybody in here ever used the rabbitmq cookbook?
[2012-06-25 15:04:29 -0400] garrensmith: matschaffer: ping
[2012-06-25 15:04:58 -0400] matschaffer: garrensmith: greetings!
[2012-06-25 15:05:34 -0400] garrensmith: hey, could you release a new version of knife-solo with the fixes to look in /opt/chef for chef. I cant used knife-solo on a new install until thats released
[2012-06-25 15:06:34 -0400] garrensmith: matschaffer: from what I see you have the fixes in master. Just haven't released a newer gem file
[2012-06-25 15:06:34 -0400] jelder_: what's the deal with accessing node attributes via symbols? it seems to be discourages (e.g., by foodcritic) but every where else in the ruby world is preferred
[2012-06-25 15:07:05 -0400] hoover_damm: jelder_, old crew meet new crew
[2012-06-25 15:07:36 -0400] jelder_: hoover_damm: are you a symbols guy or a strings guy?
[2012-06-25 15:07:39 -0400] matschaffer: garrensmith: I can _probably_ get that in today. If not you can also run `rake install` in a master checkout to install from course
[2012-06-25 15:07:49 -0400] hoover_damm: jelder_, sytring
[2012-06-25 15:08:14 -0400] garrensmith: matschaffer: cool, I'm using bundler and installing via git. Other than that thanks for knife-solo really awesome work
[2012-06-25 15:08:17 -0400] matschaffer: s/course/source/
[2012-06-25 15:08:18 -0400] jelder_: hoover_damm: is that because of inertia, or for a technical reason?
[2012-06-25 15:08:55 -0400] matschaffer: garrensmith: thanks man! yeah, I'd release now, but I'm trying to sort out some fedora stuff atm so there'll be a little git gymnastics involved to pull that back out again.
[2012-06-25 15:08:57 -0400] hoover_damm: jelder_, inertia mostly
[2012-06-25 15:10:09 -0400] garrensmith: matschaffer: no prob, just spend 5 hours solving this and didn't know what the issue was. But it looks like its working so should be good.
[2012-06-25 15:10:56 -0400] matschaffer: ah, damn. Sorry about that. If you didn't stumble across -VV, try that next time. Usually makes spotting the error a little easier.
[2012-06-25 15:11:10 -0400] hoover_damm: jelder_, there is no technical reason to avoid symbols over strings
[2012-06-25 15:11:18 -0400] hoover_damm: jelder_, but it's just like => vs :
[2012-06-25 15:11:32 -0400] hoover_damm: jelder_, as Ruby is evolving and changing syntax to be frinedlier, new patterns evolve that people can adopt
[2012-06-25 15:11:35 -0400] hoover_damm: or ignore
[2012-06-25 15:12:09 -0400] jelder_: yeah that form bugs me. it makes situations where k and v are both symbols look weird
[2012-06-25 15:13:39 -0400] garrensmith: matschaffer: yeah -VV is awesome that did help me, tool me a little while longer. Any way. Got it working now. No rush to the gem. Maybe put it in the readme as a notice so if anyone else like me comes across this, they know to install from source
[2012-06-25 15:13:53 -0400] matschaffer: I dig that. Good call
[2012-06-25 15:17:05 -0400] agosse: jelder_: next dumb question
[2012-06-25 15:17:13 -0400] jelder_: cool
[2012-06-25 15:18:03 -0400] agosse: jelder_: in checking to see if file exists, using File.exists? throws an undefined method exception because it's using Chef::Provider::File
[2012-06-25 15:18:23 -0400] agosse: jelder_: i can use Class::File, but that causes a warning
[2012-06-25 15:18:51 -0400] jelder_: you can always access the top level class namespace by prepending the (implied) ::
[2012-06-25 15:18:56 -0400] jelder_: so, ::File.exists? foo
[2012-06-25 15:20:42 -0400] agosse: jelder_: hm.. ruby is full of magic syntax
[2012-06-25 15:33:40 -0400] hoover_damm: agosse, it is
[2012-06-25 15:34:45 -0400] hoover_damm: http://pragprog.com/book/ppmetr/metaprogramming-ruby was honestly one of my best books for learning ruby
[2012-06-25 15:34:57 -0400] hoover_damm: partially because it taught me evil, and told me why it was wrong
[2012-06-25 15:35:16 -0400] hoover_damm: their regular Ruby Pickaxe is damn good obv
[2012-06-25 15:53:36 -0400] workmad3: ::Constant isn't magic syntax though... it's fairly common for languages that use :: for some form of namespacing to allow :: to be prepended as an 'absolute' path
[2012-06-25 15:54:17 -0400] workmad3: it might not be well known, but it's not magic :) (not like creating a self.included(base) method in a module for example :) )
[2012-06-25 16:09:00 -0400] rayrod2030: anybody ever have issues getting a tomcat init script to start with the service resoruce?
[2012-06-25 16:12:05 -0400] hoover_damm: rayrod2030, care to get into more detail about the problems your having with tomcat?
[2012-06-25 16:12:59 -0400] rayrod2030: hoover_damm: Ok so basically I've got a tomcat cookbook working with some customizations and the only part that I can't get working is having the tomcat service start properly.  A chef run shuts it down well enough but can't manage to restart it.
[2012-06-25 16:13:10 -0400] rayrod2030: I have tested that the init script I am using works normally from the command line.
[2012-06-25 16:13:20 -0400] hoover_damm: right, but command line != chef
[2012-06-25 16:13:33 -0400] hoover_damm: chef add's LC_ALL="C" by default
[2012-06-25 16:13:59 -0400] hoover_damm: so does chef fail when you tro ty restart it? what's the error message? (you can post it on gist.github.com)
[2012-06-25 16:14:16 -0400] rayrod2030: and when running chef-client in debug mode I notice that chef shuts down the service, checks for it's presence in ps and then attempts to restart it.  The service prints out "starting tomcat.." but the jvm never comes up.
[2012-06-25 16:14:42 -0400] hoover_damm: check the tomcat error logs?
[2012-06-25 16:14:50 -0400] hoover_damm: there should be a log telling you something
[2012-06-25 16:14:55 -0400] rayrod2030: yes error logs are silent for tomcat.
[2012-06-25 16:14:58 -0400] hoover_damm: if it fails without a word :( that's just sad
[2012-06-25 16:15:43 -0400] hoover_damm: rayrod2030, i'd suggest to post your question to the mailing list and include what version of tomcat ubuntu, etc.
[2012-06-25 16:15:47 -0400] hoover_damm: rayrod2030, http://www.catb.org/~esr/faqs/smart-questions.html
[2012-06-25 16:16:00 -0400] BryanWB_: rayrod2030: i have had many issues w/ tomcat svc, and i ended hacking my own thing up
[2012-06-25 16:16:02 -0400] stephen_d_: @so, my team is having a problem with the usage of remote_file. we have the flag to create backups set to false, but we are still seeing backups being created, and we have to keep manually going to the backup directory to remove the backups. we could write a recipe to do this for us, but ideally, we shouldn't have to, since backup is set to false. so, does anyone have any ideas what the problem could be?
[2012-06-25 16:16:14 -0400] hoover_damm: rayrod2030, I don't have any suggestions off the top of my head and unless anyone else can answer your question
[2012-06-25 16:16:42 -0400] rayrod2030: BryanWB_: that's pretty much where I am headed soon.
[2012-06-25 16:16:44 -0400] hoover_damm: rayrod2030, I would suggest posting it to the mailing list.  What you described sounds straight forward
[2012-06-25 16:16:48 -0400] BryanWB_: rayrod2030: https://github.com/bryanwb/tomcat/blob/master/templates/default/tomcat.init.debian.erb
[2012-06-25 16:17:08 -0400] hoover_damm: BryanWB_, any reason your arn't a jboss man?
[2012-06-25 16:17:10 -0400] BryanWB_: rayrod2030: be wary u need different scripts for tomcat6 and tomcat7, i have both in that repo
[2012-06-25 16:17:20 -0400] BryanWB_: hoover_damm: hah! i prefer jetty
[2012-06-25 16:17:37 -0400] hoover_damm: BryanWB_, look at jboss
[2012-06-25 16:17:40 -0400] BryanWB_: hoover_damm: but not my choice, and i do spend a lot of my time on my jboss cookbooks
[2012-06-25 16:17:42 -0400] hoover_damm: you won't look at jetty the same again
[2012-06-25 16:17:49 -0400] BryanWB_: jboss 7 isn't bad
[2012-06-25 16:17:58 -0400] BryanWB_: but writing lwrps for it is a bear
[2012-06-25 16:18:03 -0400] hoover_damm: it's one of the best application servers out there
[2012-06-25 16:18:20 -0400] garrensmith: Anyone know what could cause this when using the opscode postgress cookbook uninitialized constant Chef::Recipe::PGError
[2012-06-25 16:18:28 -0400] hoover_damm: the fact that people pay money for it as well
[2012-06-25 16:18:30 -0400] hoover_damm: and lots of it
[2012-06-25 16:18:46 -0400] rayrod2030: bryanwb_: I'm using your init script and your cookbook I believe.
[2012-06-25 16:18:56 -0400] BryanWB_: fuck, i was afraid of that
[2012-06-25 16:19:01 -0400] rayrod2030: or your fork of it.
[2012-06-25 16:19:02 -0400] rayrod2030: :)
[2012-06-25 16:19:26 -0400] maruq: Is there a preferred way of installing a ruby via RVM, then installing gems into it?
[2012-06-25 16:19:46 -0400] BryanWB_: i would love to troubleshoot it but that's my task for this week, i gotta get my fork of lusis' logstash production-ready
[2012-06-25 16:19:54 -0400] BryanWB_: s/this/next/ week
[2012-06-25 16:20:02 -0400] maruq: I've been using https://github.com/fnichol/chef-rvm, but it seems the rvm::gem_package only works for latest ruby :(
[2012-06-25 16:20:40 -0400] maruq: er, rather if I don't define a ruby version, it works with ruby 193, if I do (eg. 192), it fails
[2012-06-25 16:21:22 -0400] yfeldblum: maruq, https://github.com/fnichol/chef-rvm/issues
[2012-06-25 16:22:19 -0400] maruq: yfeldblum: sorry, I knew it was their issue, not chef's, just wondering if others have a preferred way of doing things?
[2012-06-25 16:23:07 -0400] BryanWB_: rayrod2030: pls log a github issue and i will try to look at it
[2012-06-25 16:23:10 -0400] yfeldblum: maruq, just telling ya my preferred way, which is to get fnichol to fix it :P
[2012-06-25 16:23:19 -0400] maruq: haha
[2012-06-25 16:23:31 -0400] danryan: garrensmith: sounds like the `pg` gem isn't installed. It could also be that it's installed, but a newer version They changed the namespace from PGError to PG::Error
[2012-06-25 16:23:47 -0400] garrensmith: danryan: cool let me try that thanks
[2012-06-25 16:32:35 -0400] garrensmith: danryan: I'm not getting NameError: uninitialized constant Chef::Recipe::PG
[2012-06-25 16:35:02 -0400] garrensmith: s/not/now
[2012-06-25 16:37:20 -0400] dboune: is there some way to stop a service only if a template action needs to run?
[2012-06-25 16:37:26 -0400] dboune: I have a service that must be stopped before the config is changed, but I don't want it to stop on every single chef-client run.
[2012-06-25 16:38:47 -0400] eherot: Does anyone know if there's a knife plugin that can do something like prompting the user if they try to upload a cookbook/data bag/role/etc without first doing a "git pull?"
[2012-06-25 16:54:13 -0400] dboune: subscribes and notifies only run after the template provider/action has run, and by then, it is too late
[2012-06-25 17:05:07 -0400] chip-: Anybody here work much with chefspec yet? I've been trying to write some sample tests, but they're not going very well.
[2012-06-25 17:11:54 -0400] hoover_damm: eherot, i use knife-essentials and force the diff method down the throat
[2012-06-25 17:11:58 -0400] hoover_damm: eherot, perhaps spork could help
[2012-06-25 17:12:06 -0400] eherot: hmm
[2012-06-25 17:12:18 -0400] hoover_damm: eherot, https://github.com/jonlives/knife-spork
[2012-06-25 17:13:36 -0400] eherot: yah, had been meaning to check that out after learning about it at chefconf
[2012-06-25 17:14:46 -0400] chip-: eherot: spark won't do that, but it WILL help, and it's totally worth using
[2012-06-25 17:15:00 -0400] chip-: and I think spork could be extended to include the functionality you want.
[2012-06-25 17:15:52 -0400] eherot: i'd think that functionality should be easy to add to any implementation, it's just a matter of running a "git status" before any upload
[2012-06-25 17:19:14 -0400] hoover_damm: eherot, I'd much prefer a git diff and then say 'are you sure your in the right world'? if the lines are too big
[2012-06-25 17:19:30 -0400] hoover_damm: eherot, one of the biggest problems I have with chef-server is when  my perceptioin of what should be, isn't
[2012-06-25 17:19:36 -0400] hoover_damm: perception*
[2012-06-25 17:19:53 -0400] eherot: diff would also be useful
[2012-06-25 17:19:56 -0400] hoover_damm: eherot, coworker reloads a role without looking.  Someone uploads a cookbook they forgot to do friday
[2012-06-25 17:20:06 -0400] hoover_damm: eherot, these are the things that screw me personally
[2012-06-25 17:20:07 -0400] eherot: uhhuh
[2012-06-25 17:20:33 -0400] hoover_damm: environment is a certain way for 2 weeks, coworker reloads it without realizing his copy is tainted
[2012-06-25 17:20:39 -0400] hoover_damm: and a diff would have proved it
[2012-06-25 17:20:47 -0400] hoover_damm: his local copy was the problem not what was in git
[2012-06-25 17:21:28 -0400] hoover_damm: that's where knife diff comes into play for me
[2012-06-25 17:21:40 -0400] hoover_damm: you review the diff then you accept the upload
[2012-06-25 17:22:52 -0400] eherot: thing is, at least if you always remember to pull first, then when there is an inconsistency you can blame it on someone not checking in
[2012-06-25 17:23:20 -0400] eherot: a diff between what's in git and what's on the chef server would probably be a pretty good sanity check
[2012-06-25 17:23:40 -0400] hoover_damm: knife essentials makes it easy
[2012-06-25 17:23:44 -0400] hoover_damm: knife diff roles/production.json
[2012-06-25 17:23:47 -0400] hoover_damm: knife diff cookbook/
[2012-06-25 17:23:53 -0400] eherot: hmm
[2012-06-25 17:24:02 -0400] eherot: ok, will have to check those both out when done with current project
[2012-06-25 17:33:54 -0400] holoway: we have started recommending that everything that you do manually should always be in version control
[2012-06-25 17:34:07 -0400] holoway: and anything you automate with (ie: hit the API directly to configure) should not
[2012-06-25 17:34:46 -0400] yfeldblum: holoway, i would not agree with that recommendation
[2012-06-25 17:35:01 -0400] yfeldblum: holoway, rather, i'd suggest that everything you do manually, you learn to automate
[2012-06-25 17:36:36 -0400] yfeldblum: holoway, i'd suggest to put code in version control and to find another strategy for data besides version control
[2012-06-25 17:37:34 -0400] holoway: yfeldblum: I think we agreee
[2012-06-25 17:37:53 -0400] holoway: I just wasn't clear enough :)
[2012-06-25 17:38:23 -0400] yfeldblum: holoway, maybe, but i'm throwing in data bags, some roles, and some environments into the "another strategy besides version control" bucket
[2012-06-25 17:38:58 -0400] yfeldblum: all data bags because they're always data, and those roles and those environments which are data and not code
[2012-06-25 17:40:24 -0400] hoover_damm: holoway, that's the goal
[2012-06-25 17:40:25 -0400] bgood: When i try to bootstrap an ec2 instance that doesn't have the same ssh key as my chef server the bootstrap fails with perms issues.  Is there something special i need to do?
[2012-06-25 17:40:34 -0400] hoover_damm: holoway, sometimes getting to that goal is a little more work then we'd like
[2012-06-25 17:40:54 -0400] hoover_damm: for me it falls between the keyboard and the chair
[2012-06-25 17:41:24 -0400] matschaffer: yfeldblum: I tend to keep a base version of those in VCS for starting from a fresh org, but maybe some sort of export/import is in order
[2012-06-25 17:41:38 -0400] hoover_damm: I really need to automate my home system.  There's so much I do at home with Gentoo that would be awesome if I automated it.
[2012-06-25 17:41:47 -0400] hoover_damm: and I hate the thought of having to rebuild another server from scratch
[2012-06-25 17:41:53 -0400] hoover_damm: sucks
[2012-06-25 17:42:06 -0400] matschaffer: yfeldblum: the context is that we typically start prototyping on our own org, then move stuff over once the client's org is ready
[2012-06-25 18:18:45 -0400] Bruce: Anyone seeing "uninitialized constant Chef::Recipe::PGError" with the postgresql cookbook?
[2012-06-25 18:19:17 -0400] Bruce: Error start here:[Mon, 25 Jun 2012 11:12:57 -0700] ERROR: bash[assign-postgres-password] (postgresql::server line 58) has had an error [Mon, 25 Jun 2012 11:12:57 -0700] ERROR: bash[assign-postgres-password] (/var/chef/cache/cookbooks/postgresql/recipes/server.rb:58:in `from_file') had an error: bash[assign-postgres-password] (postgresql::server line 58) had an error: NameError: uninitialized constant Chef::Recipe::PGError
[2012-06-25 18:27:48 -0400] cheeseplus: Bruce: iirc PGError moved to PG::Error - trying to find it in my logs
[2012-06-25 18:28:26 -0400] cheeseplus: "danryan: garrensmith: sounds like the `pg` gem isn't installed. It could also be that it's installed, but a newer version They changed the namespace from PGError to PG::Error"
[2012-06-25 18:28:59 -0400] garrensmith: Bruce cheeseplus yeah having the same issue, trie PG::Error didn't fix it
[2012-06-25 18:30:01 -0400] Bruce: gem install pg errors out with: Invalid output formatter  For help on options, try 'rdoc --help'  ERROR:  While generating documentation for pg-0.14.0
[2012-06-25 18:30:59 -0400] danryan: garrensmith: is the pg gem installed?
[2012-06-25 18:31:05 -0400] danryan: Bruce: try installing without rdoc
[2012-06-25 18:31:19 -0400] danryan: Bruce: gem install pg no-rdocno-ri
[2012-06-25 18:31:25 -0400] garrensmith: danryan: yes and doing require 'pg' PGError or PG:Error from the irb works fine
[2012-06-25 18:31:31 -0400] danryan: stupid formatting
[2012-06-25 18:31:44 -0400] danryan: gem install - - no-rdoc - -no-ri
[2012-06-25 18:32:02 -0400] danryan: Bruce: but without the spaces :)
[2012-06-25 18:33:13 -0400] Bruce: Got it, thanks
[2012-06-25 18:35:13 -0400] garrensmith: danryan: how do you guys keep track so that your recipes always work and dont have these kind of issues
[2012-06-25 18:35:22 -0400] Bruce: pg gem installed OK with no-rdoc & no-ri args, same chef-client err on postgresql cookbook. Is the "PGError to PG::Error" change also needed?
[2012-06-25 18:36:22 -0400] danryan: Bruce: garrensmith: hmm, PGError just maps to PG::Error. Is `require 'pg'` anywhere in the recipe?
[2012-06-25 18:37:40 -0400] Bruce: database/libraries/provider_database_postgresql.rb:          require 'pg' database/libraries/provider_database_postgresql_user.rb:          require 'pg' postgresql/recipes/server.rb:      require 'pg'
[2012-06-25 18:37:57 -0400] garrensmith: danryan: yes just before require 'rubygems'; Gem.clear_paths; require 'pg'
[2012-06-25 18:46:18 -0400] Bruce: If I s/PGError/PG::Error/ in postgresql/recipes/server.rb, then the error is: uninitialized constant Chef::Recipe::PG instead of the earlier: uninitialized constant Chef::Recipe::PGError. Sorry, total ruby/chef noob here.
[2012-06-25 18:49:54 -0400] miah: garrensmith: software development requires testing. cookbook/recipe development is just software development.
[2012-06-25 18:56:06 -0400] garrensmith: miah: I guess so, as someone new to this, its really difficult to get going :-)
[2012-06-25 18:56:41 -0400] leifmadsen: does anyone have a simple example or link that shows how to execute a chef-client on a node, and have it report data to jenkins that can be then interpreted for a pass/fail? (I'm planning on using minitest output for this)
[2012-06-25 19:00:41 -0400] eherot: Is there a way in a chef recipe to get the name that was passed to chef-client -N NODENAME ?
[2012-06-25 19:00:50 -0400] hoover_damm: node.name?
[2012-06-25 19:01:13 -0400] eherot: hmm, seems almost too obvious
[2012-06-25 19:03:56 -0400] cheeseplus: could anyone be so kind as to tell me if lines 5-8 this a good/bad idea (tm): https://gist.github.com/2990545
[2012-06-25 19:04:21 -0400] cheeseplus: s/this/are/
[2012-06-25 19:05:51 -0400] qhartman: cheeseplus, looks ok to me, but I'm no expert on Ruby
[2012-06-25 19:06:19 -0400] Bruce: re: lines 5-8, looks like a force to override any existing config for that package and accept the upstream maintainer's config. Or were you questioning the rationale for this?
[2012-06-25 19:06:25 -0400] cheeseplus: neither am I so I'm hoping someone else is
[2012-06-25 19:06:53 -0400] cheeseplus: Bruce: I am trying to force override on purpose, just curious if it's the "right" way to do so
[2012-06-25 19:07:09 -0400] cheeseplus: our cookbook still comes in and writes out a new config after
[2012-06-25 19:07:32 -0400] cheeseplus: but debian likes to ask you questions which breaks upgrading via chef
[2012-06-25 19:14:34 -0400] miah: garrensmith: its impossible to learn software development over night.
[2012-06-25 19:14:38 -0400] swolf_: noob question:  how do i access a provider from one cookbook in another cookbook
[2012-06-25 19:15:10 -0400] miah: swolf_: use 'depends <cookbook>' in your cookbooks metadata.rb, then you can reference <cookbookname>_<provider> from inside your cookbook.
[2012-06-25 19:23:19 -0400] yfeldblum: miah, true, and indeed that is true in spite of all the "Learn XYZ in 24 hours" books out there
[2012-06-25 19:24:23 -0400] yfeldblum: matschaffer, just curious, what do you consider to be "base"?
[2012-06-25 19:28:01 -0400] swolf_: miah:  thx!  that worked.
[2012-06-25 19:28:22 -0400] swolf_: another question, how would i grab every file from a directory to be copied to the server without having to explicitly specify each file
[2012-06-25 19:28:53 -0400] matschaffer: yfeldblum: I guess I'd consider it "at least enough that the cookbook of the same rev can run w/o manual tweaks"
[2012-06-25 19:33:54 -0400] yfeldblum: swolf_, the remote_directory resource perhaps?
[2012-06-25 19:35:24 -0400] Toumar: I'm having an issue using knife-ec2 - when I make knife ec2 server create calls, I get the error "Could not find chef (>= 0) amongst [list of gems] (Gem::LoadError). I know this isn't a chef specific issue, but I'm hoping someone in here will be able to point me to the fix
[2012-06-25 19:39:23 -0400] miah: yfeldblum: yup. it takes about 10,000 hours to really learn something =)
[2012-06-25 19:39:41 -0400] miah: yfeldblum: http://norvig.com/21-days.html
[2012-06-25 19:41:18 -0400] JasonBoxLaptop: Long time...
[2012-06-25 19:41:34 -0400] miah: indeed.
[2012-06-25 19:41:58 -0400] miah: but to truly master something you can't just know x, you have to know x and how it interacts with w, y, and z =)
[2012-06-25 19:42:14 -0400] miah: programming isn't just writing code. its testing, architecting, etc etc etc
[2012-06-25 19:48:55 -0400] yfeldblum: or just do it the way neo learned kung fu
[2012-06-25 19:49:09 -0400] miah: fwiw. i've been using unix since '96, i've been programming on and off for about as long. i still feel like i know nothing =)
[2012-06-25 19:53:54 -0400] cheeseplus: miah: yea I'm terrible at writing code but I've spent the better part of my life debugging other people's messes and merging code
[2012-06-25 19:54:14 -0400] cheeseplus: on obscure platforms nonetheless (game consoles)
[2012-06-25 19:55:15 -0400] miah: yup
[2012-06-25 19:55:44 -0400] miah: its overall experience in a field that makes a expert, not expertise in a _single_ field.
[2012-06-25 19:56:12 -0400] miah: you could _never_ learn how to repair just a single type of combustable engine. the lessons you learn apply to many different types from various manufacturers.
[2012-06-25 19:56:47 -0400] chip-: negative triple word score for using architect as a verb
[2012-06-25 19:56:51 -0400] chip-: :P
[2012-06-25 19:57:29 -0400] miah: verb [ with obj. ] (usu. be architected) Computing
[2012-06-25 19:57:30 -0400] miah: design and make: few software packages were architected with Ethernet access in mind.
[2012-06-25 19:57:56 -0400] chip-: I've been doing ops or IT for money for 20 years now, and if I ever get to the point where I think I'm not a rank beginner, it's a sure sign of career stagnation.
[2012-06-25 19:58:09 -0400] miah: yup
[2012-06-25 19:58:11 -0400] cheeseplus: chip-: absolutely agreed
[2012-06-25 19:58:24 -0400] cheeseplus: which is why I am now building things written in Erlang, I like feeling dumb
[2012-06-25 19:58:34 -0400] chip-: cheeseplus: which game consoles? :)
[2012-06-25 19:58:35 -0400] miah: failure is a great way to learn
[2012-06-25 19:59:21 -0400] cheeseplus: chip-: 360, PS3, WiiU, and of course PC
[2012-06-25 19:59:24 -0400] chip-: (I used to collect consoles, especially the niche-y failure ones, but sold them all last year. Just curious.)
[2012-06-25 19:59:34 -0400] spox: catastrophe is a great way to learn quickly
[2012-06-25 19:59:47 -0400] miah: i used to collect consoles too. i donated all of them to my friends museum. now i collect shoes. ;)
[2012-06-25 20:00:00 -0400] cheeseplus: for the record, the development tools for WiiU will make you go crazy and set things on fire
[2012-06-25 20:00:47 -0400] miah: actually.. if i collect anything now its 'virtual video games' (i have over 9000 steam games), and books (i <3 reading).
[2012-06-25 20:00:55 -0400] chip-: I stopped collecting anything physical after my last move, and went through the first revision of a purge cycle.
[2012-06-25 20:01:03 -0400] chip-: Amazing how much crap we sold last year.
[2012-06-25 20:01:06 -0400] miah: chip-: yup. moving will do that =)
[2012-06-25 20:01:25 -0400] cheeseplus: getting married or divorced will do it too
[2012-06-25 20:01:28 -0400] chip-: miah: Moving from SF to Colorado and back and then to a second apartment inside of 4 years especially.
[2012-06-25 20:01:33 -0400] chip-: (Also getting divorced in there)
[2012-06-25 20:01:49 -0400] JasonBoxLaptop: chip-: heh yeah
[2012-06-25 20:02:23 -0400] chip-: New plan: all objects in my life must be beautiful, immediately useful (inside of 30 days), or both. Anything that does not meet that criteria must go.
[2012-06-25 20:03:01 -0400] miah: ah ya. i've moved a _ton_ and only recently have been massively purging. divorce, plus a girlfriend who is crazy organized got me together =)
[2012-06-25 20:03:10 -0400] cheeseplus: chip-: I'm in the same boat right now
[2012-06-25 20:03:23 -0400] chip-: The exception is for logical objects (mostly media, ebooks /music /etc), which I can hoard with impunity if they are properly cataloged, and workbench tools (which must be immediately useful within 6 months).
[2012-06-25 20:03:42 -0400] chip-: Otherwise, chuck that shit.
[2012-06-25 20:03:46 -0400] cheeseplus: I can't get rid of my game consoles (360, PS3, Dreamcast, SNES, PSP2) but everything else is going
[2012-06-25 20:03:58 -0400] miah: i purged all the useless books that i wasn't learning from, and tons of other random things. i feel like i've definitely improved my life in the past 6 months and learned a ton more as i wasn't as distracted by useless bs.
[2012-06-25 20:03:59 -0400] cheeseplus: someone will have to pry that dreamcast from my cold dead hands
[2012-06-25 20:04:14 -0400] miah: cheeseplus: i donated my neogeo to my friends museum.
[2012-06-25 20:04:22 -0400] chip-: Anything that could be proper emulated went, including the CIB Dreamcast + 4 controllers + ethernet adapter + 50 games + etc.
[2012-06-25 20:04:30 -0400] miah: (also my dreamcast, saturn, every atari, sony, nintendo, etcc..)
[2012-06-25 20:04:52 -0400] cheeseplus: miah: that is noble and probably the only way I would let mine go
[2012-06-25 20:04:57 -0400] cheeseplus: I need to know they will be cared for
[2012-06-25 20:05:10 -0400] chip-: I eBay'ed all of it. Not so noble, but it satisfied the "they will be cared for" itch.
[2012-06-25 20:05:18 -0400] miah: for the record.. http://www.themade.org/content/what-are-we
[2012-06-25 20:05:43 -0400] chip-: Otherwise I'd be facing down that I spent tens of thousands of dollars and years of my life collecting and cataloging and caring for things that had no value beyond that which I continued to ascribe to them.
[2012-06-25 20:05:49 -0400] chip-: couldn't have that!
[2012-06-25 20:05:57 -0400] chip-: Reality: Not allowed.
[2012-06-25 20:06:25 -0400] chip-: Back ontopic: I want to give foodcritic + spork integration a giant hug.
[2012-06-25 20:07:11 -0400] miah: ya
[2012-06-25 20:07:35 -0400] miah: i am working spork + foodcritic into our workflow. i've been writing a doc and getting feedback from the team. its going to take a bit of effort to get it all going though.
[2012-06-25 20:08:19 -0400] miah: i need to get better at writing in general. i am super awesome on irc.. not so much when it comes to technical writing =)
[2012-06-25 20:08:29 -0400] holoway: miah: it is very hard!
[2012-06-25 20:08:37 -0400] chip-: Still can't get chefspec working though. It trips on my LWRP invocations (I use the apt LWRP pretty liberally)
[2012-06-25 20:08:42 -0400] holoway: such a specific kind of writing
[2012-06-25 20:08:50 -0400] holoway: that is so very different from how I think/speak
[2012-06-25 20:09:13 -0400] miah: yup
[2012-06-25 20:09:23 -0400] cheeseplus: miah: just make sure you post to a blog ;)
[2012-06-25 20:09:32 -0400] miah: i rented about a dozen books from the library and have been reading / practicing
[2012-06-25 20:09:48 -0400] miah: oh. i plan on posting a bunch of things to my blog soon. i have several articles in development now.
[2012-06-25 20:09:58 -0400] miah: i just need to complete them =)
[2012-06-25 20:10:01 -0400] holoway: miah: you rocking velocity this year?
[2012-06-25 20:10:10 -0400] miah: holoway: i don't have tickets
[2012-06-25 20:10:16 -0400] miah: i will likely be rocking the hallway track though
[2012-06-25 20:10:23 -0400] holoway: right on
[2012-06-25 20:10:24 -0400] miah: probably tomorrow / wednesday, and then i'm crashing devopsdays.
[2012-06-25 20:10:48 -0400] miah: because a. nerd conferences need more awesome women. and b. i didnt get a ticket :/
[2012-06-25 20:11:37 -0400] miah: i _just_ started at scribd. i didnt feel it was right to spend $1k for a conference 5 days after i started =)
[2012-06-25 20:12:30 -0400] cheeseplus: miah: ha, I showed up at chefconf the week before I started at basho
[2012-06-25 20:12:47 -0400] miah: lol
[2012-06-25 20:12:57 -0400] cheeseplus: was an awesome idea but I am still paying for it
[2012-06-25 20:13:24 -0400] miah: basho wasn't as interested in me :( i'll have to continue to improve my awesome factor to get more attention next time i'm trying to get hired =)
[2012-06-25 20:14:52 -0400] miah: though honestly, im not sure i could have dealt with another 'remote' type job right now. im <3'ing our office and the people here.
[2012-06-25 20:14:57 -0400] miah: working in isolation was brutal.
[2012-06-25 20:19:09 -0400] thehar: yawn
[2012-06-25 20:23:14 -0400] thehar: ohnoes
[2012-06-25 20:23:42 -0400] thehar: miah: congrats on scribd. how's soma?
[2012-06-25 20:23:54 -0400] miah: soma is soma
[2012-06-25 20:24:01 -0400] thehar: hey be nice. i live in soma.
[2012-06-25 20:24:04 -0400] miah: its a desolate wasteland filled with startups
[2012-06-25 20:24:12 -0400] thehar: hehe
[2012-06-25 20:24:16 -0400] miah: and generally smells like urine and vomit
[2012-06-25 20:24:22 -0400] thehar: only on specific streets
[2012-06-25 20:24:41 -0400] chip-: I wrote an LWRP recently to install elastic search plugins, but it looks like only the first invocation of it in my recipe is working.
[2012-06-25 20:24:44 -0400] chip-: Gist: https://gist.github.com/2991000
[2012-06-25 20:24:54 -0400] chip-: Trying to figure out if this is Chef's issue or elasticsearch's issue
[2012-06-25 20:25:23 -0400] miah: chip-: you should change line 10 and 20
[2012-06-25 20:25:32 -0400] miah: 'new_resource.name' rather than "install plugin"
[2012-06-25 20:25:51 -0400] chip-: which file?
[2012-06-25 20:25:57 -0400] miah: providers
[2012-06-25 20:26:05 -0400] cheeseplus: miah: it's my first go at remote working, been in huge studios so isolation is something I wanted to try out.
[2012-06-25 20:26:05 -0400] chip-: thanks
[2012-06-25 20:26:07 -0400] chip-: my first LWRP
[2012-06-25 20:26:10 -0400] miah: because your resource gets the name of "install plugin" and thus, it will only ever execute once
[2012-06-25 20:26:17 -0400] chip-: Ahhhh.
[2012-06-25 20:26:26 -0400] miah: vs, new_resource.name, which changes for each resource
[2012-06-25 20:27:12 -0400] chip-: Right
[2012-06-25 20:27:16 -0400] chip-: makes total sense now that you've explained it.
[2012-06-25 20:27:18 -0400] chip-: A+ thank you
[2012-06-25 20:27:26 -0400] miah: ya
[2012-06-25 20:27:54 -0400] miah: also, since you specified plugin_name as being :name_attribute => true
[2012-06-25 20:28:09 -0400] miah: you can use 'new_resource.name' througout rather than new_resource.plugin_name
[2012-06-25 20:28:17 -0400] chip-: Mo' betta
[2012-06-25 20:28:21 -0400] miah: but feel free to use either if it makes it easier for you to understand whats going on
[2012-06-25 20:29:16 -0400] miah: cheeseplus: ya definitely. it really depends on the team your working with. my previous team i ended up working in isolation most of the time.
[2012-06-25 20:29:51 -0400] cheeseplus: miah: hipchat has been really great for our setup
[2012-06-25 20:30:09 -0400] miah: cool
[2012-06-25 20:30:47 -0400] powdahound: cheeseplus: awesome :) ping me if you ever have questions. i'm one of the devs
[2012-06-25 20:31:12 -0400] cheeseplus: powdahound: I just might ;)
[2012-06-25 20:32:11 -0400] cheeseplus: the only real issue I've noticed has been very strange networking circumstances and messages never getting sent but the application deals with those failures in a very nice, informative way
[2012-06-25 20:33:57 -0400] maruq: powdahound: we use hipchat too. nice app.
[2012-06-25 20:34:11 -0400] chip-: Also glad to see more Chef people at Basho. :)
[2012-06-25 20:34:24 -0400] chip-: <3 Riak <3
[2012-06-25 20:34:28 -0400] maruq: only issue we really have is if someone starts a gif-war, it lags out, but otherwise it's nice
[2012-06-25 20:34:36 -0400] powdahound: haha yeah
[2012-06-25 20:34:38 -0400] cheeseplus: chip-: well I wasn't a chef person before but I'm learning very quickly
[2012-06-25 20:34:47 -0400] powdahound: the next release of our app (hopefully this week) has an option to hide gifs by default
[2012-06-25 20:34:52 -0400] chip-: cheeseplus: the Riak cookbook is very German-engineered
[2012-06-25 20:34:55 -0400] chip-: :)
[2012-06-25 20:35:26 -0400] cheeseplus: thank mr. cribbs for ath
[2012-06-25 20:35:28 -0400] cheeseplus: that*
[2012-06-25 20:35:42 -0400] cheeseplus: I've just done some easy PR merging and basic updates
[2012-06-25 20:36:34 -0400] chip-: Anyway, right on. Go Go Basho.
[2012-06-25 20:37:57 -0400] cheeseplus: powdahound: the gifs are the highlight of my day
[2012-06-25 20:38:03 -0400] cheeseplus: chip-: thanks!
[2012-06-25 20:38:39 -0400] powdahound: i need to experiment with riak and see if it'd be a good fit for our data. getting tired of couchdb
[2012-06-25 20:39:33 -0400] cheeseplus: powdahound: most people come our way after couchdb or mongodb issues
[2012-06-25 20:39:36 -0400] cheeseplus: so it seems at least
[2012-06-25 20:39:55 -0400] powdahound: makes sense
[2012-06-25 20:40:50 -0400] chip-: One of our devs didn't like it at first. "It's just an over-glorified hash table!" I don't think she quite grasped nosql.
[2012-06-25 20:41:04 -0400] bdha: jtimberman: Does the daemontools provider not update run files on purpose, or is it a bug?
[2012-06-25 20:41:08 -0400] thehar: transactions!
[2012-06-25 20:41:17 -0400] chip-: As an ops person, I'm in love. "Need more DB capacity!" knife ec2 server create -r "role[riak]".
[2012-06-25 20:41:31 -0400] thehar: you're so agile.
[2012-06-25 20:41:46 -0400] chip-: datacenter replication's easy as pie, too.
[2012-06-25 20:42:09 -0400] cheeseplus: chip-: yep, it's just a big k/v store that scales super easily
[2012-06-25 20:42:15 -0400] yfeldblum: if you need riak scale, and you need transactions, one of those will have to give ...
[2012-06-25 20:42:16 -0400] chip-: Right! I love it!
[2012-06-25 20:42:17 -0400] erikh: <3 hipchat
[2012-06-25 20:42:20 -0400] chip-: She did not.
[2012-06-25 20:42:36 -0400] chip-: Project's still on Riak, she is not on project. So it goes.
[2012-06-25 20:42:37 -0400] cheeseplus: from an ops perspective it's super boring and predictable
[2012-06-25 20:42:41 -0400] chip-: YES
[2012-06-25 20:42:47 -0400] powdahound: (megusta)
[2012-06-25 20:42:48 -0400] chip-: (did I mention I love it? I love it.)
[2012-06-25 20:42:49 -0400] cheeseplus: not exactly a great tagline but I love it
[2012-06-25 20:43:11 -0400] chip-: "Does exactly what it says on the tin, no elaborate care or feeding required" is a big deal.
[2012-06-25 20:43:12 -0400] cheeseplus: Riak: the most operationally uneventful database you will ever use!
[2012-06-25 20:43:28 -0400] cheeseplus: chip-: I find that ops people love that part much more than devs
[2012-06-25 20:43:29 -0400] chip-: I've had it fuck up on me occasionally (mostly related to riak-search), but generally yes.
[2012-06-25 20:44:40 -0400] chip-: 18 months with Riak compared with 18 months with (other nosql here) is no contest. I barely touch it.
[2012-06-25 20:45:07 -0400] powdahound: bdha: it looks like it wouldn't update the file only adds it when first enabled: https://github.com/opscode/cookbooks/blob/master/daemontools/providers/service.rb#L55
[2012-06-25 20:45:25 -0400] cheeseplus: chip-: this is what we like to hear
[2012-06-25 20:45:29 -0400] bdha: powdahound: Correct. I'm wondering if that's by design, or just a bug.
[2012-06-25 20:45:48 -0400] powdahound: i'd call it a bug :) i know the runit cookbook updates its run files
[2012-06-25 20:47:10 -0400] bdha: Sounds buglike. :)
[2012-06-25 20:48:38 -0400] chip-: miah: fix to LWRP confirmed, works great. Thanks again.
[2012-06-25 20:49:28 -0400] geekbri: props to whoever authored the FileAccessControl class at chef for knowing when to put in a helpful comment
[2012-06-25 20:49:43 -0400] geekbri: or more specifically the unix module contained inside of it :)
[2012-06-25 21:01:18 -0400] hoover_damm: everyone needs to file for equipment
[2012-06-25 21:01:18 -0400] hoover_damm: hehe
[2012-06-25 21:03:22 -0400] eherot: hmm.  Just realized that a search by attributes does not seem to reflect the results of the current chef run
[2012-06-25 21:03:43 -0400] eherot: this is a problem for potentially self-referential searches running during bootstrap
[2012-06-25 21:03:58 -0400] eherot: am I imagining things or is this actually true?
[2012-06-25 21:05:16 -0400] holoway: eherot: it is totally true
[2012-06-25 21:05:21 -0400] eherot: rats
[2012-06-25 21:05:28 -0400] holoway: eherot: since you haven't saved the node object
[2012-06-25 21:05:31 -0400] eherot: yep
[2012-06-25 21:05:32 -0400] holoway: and even if you had, search is async
[2012-06-25 21:05:43 -0400] holoway: so no promise that it would be ready in time for you to need it
[2012-06-25 21:06:03 -0400] holoway: if you need that behavior (including yourself in the set) you'll want ot add it manually
[2012-06-25 21:06:26 -0400] eherot: yep, that was my solution.  Just wanted to make sure I wasn't wasting my time
[2012-06-25 21:06:41 -0400] hoover_damm: eherot, node.save
[2012-06-25 21:06:41 -0400] eherot: check node["attribute"] else search.
[2012-06-25 21:06:45 -0400] hoover_damm: eherot, then you almost have to reset
[2012-06-25 21:06:50 -0400] hoover_damm: I'm sure holoway knows a better way
[2012-06-25 21:06:52 -0400] hoover_damm: or someone else
[2012-06-25 21:06:56 -0400] eherot: hmm, that seems kludgy
[2012-06-25 21:07:04 -0400] hoover_damm: eherot, first runs that depend on themselves is kind of wonky
[2012-06-25 21:07:04 -0400] eherot: also, not good recipe practice
[2012-06-25 21:07:25 -0400] hoover_damm: i did that the other week trying to find the first node in the environment in this role
[2012-06-25 21:07:35 -0400] hoover_damm: but oh wait, if you are truly the first node... this will never be true on the first run
[2012-06-25 21:07:41 -0400] hoover_damm: second run you will!
[2012-06-25 21:07:50 -0400] eherot: trying to build a list of servers in a pacemaker cluster based on servers that list a particular attribute in their roles
[2012-06-25 21:07:59 -0400] hoover_damm: I resolved it as a bad pattern and I should try and not do that if I can
[2012-06-25 21:11:15 -0400] joemiller: can the opscode users cookbook be used with chef-solo and local databags, or does it require chef-server ?
[2012-06-25 21:13:28 -0400] chip-: I'm having a syntax fail.
[2012-06-25 21:13:45 -0400] chip-: I want to unpack a 2d array in a loop as part of my recipe call for this elasticsearch cookbook
[2012-06-25 21:13:49 -0400] chip-: Gist: https://gist.github.com/2991286
[2012-06-25 21:14:00 -0400] chip-: oh
[2012-06-25 21:14:01 -0400] chip-: hurrr
[2012-06-25 21:14:22 -0400] swolf_: yfeldblum:  yeah that would work, except i don't want to have to host all my files on the chef server.  or maybe thats where i'm gravely mistaken
[2012-06-25 21:14:25 -0400] chip-: just noticed I'm using the wrong attribute name, to start
[2012-06-25 21:14:34 -0400] swolf_: the thing about it is msi's suck
[2012-06-25 21:15:14 -0400] swolf_: furthermore, the package type here https://github.com/opscode-cookbooks/windows is breaking on me.  but i dont want to use msi's anyhow
[2012-06-25 21:15:33 -0400] swolf_: but i dont want to host all my files on the chef server
[2012-06-25 21:17:36 -0400] holoway: swolf_: how is it breaking on your?
[2012-06-25 21:17:39 -0400] holoway: did you file a bug?
[2012-06-25 21:21:33 -0400] swolf_: holoway:  so first it popped up a dialog, and i said to myself 'no, we can't have that', so i changed line 165 in package.rb in providers to read /qn instead of /qb
[2012-06-25 21:23:30 -0400] swolf_: could be uac thats my problem, i just didnt care to look into it enough.  i'll check it out and let you know
[2012-06-25 21:25:17 -0400] swolf_: i'm just wondering what the difference is between installing an external package, and pointing to a network share with my files on it.  packaging just adds an unecessary layer imo
[2012-06-25 21:26:13 -0400] swolf_: i was thinking to use zips, but i dont want to have to add my own onlyif logic if i don't have to, and it seems liek thats not baked into those
[2012-06-25 21:26:30 -0400] yfeldblum: swolf_, packaging gives a number of extra guarantees
[2012-06-25 21:29:24 -0400] jgoulah: anyone know why rvm would cause a ruby_noexec_wrapper error eg) https://gist.github.com/ca33fedd74b5ef5c5d90
[2012-06-25 21:39:02 -0400] yfeldblum: jgoulah, you may need to use `rvmsudo` instead of `sudo` in this case
[2012-06-25 21:39:49 -0400] jgoulah: ah
[2012-06-25 21:40:00 -0400] jgoulah: interesting
[2012-06-25 21:40:06 -0400] jgoulah: whats up with that?
[2012-06-25 21:41:24 -0400] miah: chip-: glad i could help =)
[2012-06-25 21:41:33 -0400] miah: (also glad that i was right considering i haven't written much lwrp code)
[2012-06-25 21:45:11 -0400] coderanger: Did someone just rewrite librarian?
[2012-06-25 21:45:18 -0400] aslan: hi guys... i just noticed under my couchdb folder there is a .chef_design file that is holding gigabyte size views
[2012-06-25 21:45:27 -0400] aslan: is there a way to compact those?
[2012-06-25 21:45:34 -0400] coderanger: aslan: You have to do it
[2012-06-25 21:45:42 -0400] coderanger: The chef::server recipe does it if you use that
[2012-06-25 21:45:51 -0400] coderanger: otherwise just call the compaction from cron
[2012-06-25 21:46:33 -0400] aslan: coderanger: is there a command line that i can run manually ?
[2012-06-25 21:46:47 -0400] coderanger: https://github.com/opscode-cookbooks/chef-server/blob/master/recipes/default.rb#L24
[2012-06-25 21:53:13 -0400] aslan: coderanger: it worked for all of them except data_bag_items
[2012-06-25 21:53:25 -0400] aslan: i get a error not found reason missing
[2012-06-25 21:53:50 -0400] hakunin: hoover_damm: considering that you made damm/unicorn-chef, i'm wondering why didn't you provide a service
[2012-06-25 21:54:32 -0400] jameson: I can use search in a template file right?
[2012-06-25 21:54:36 -0400] hakunin: hoover_damm: what would the bluepill-based (i guess) service look like for it? could you give an example?
[2012-06-25 21:55:09 -0400] hakunin: it's actually damm/chef-unicorn
[2012-06-25 21:55:11 -0400] hakunin: sorry
[2012-06-25 21:56:42 -0400] hoover_damm: hakunin, did I forget to include a .pill?
[2012-06-25 21:56:50 -0400] hakunin: hoover_damm: no it's there,
[2012-06-25 21:57:13 -0400] hakunin: hoover_damm: i'd think a service should be there too, no?
[2012-06-25 21:57:13 -0400] hoover_damm: i'm not using bluepill properly
[2012-06-25 21:57:24 -0400] hoover_damm: that's likely what your wanting
[2012-06-25 21:57:45 -0400] hakunin: hoover_damm: i'm just trying to figure out how to start it :)
[2012-06-25 21:58:04 -0400] hoover_damm: hakunin, it drops it in /etc/unicorn so then you'd want to have bluepill run/start
[2012-06-25 21:58:39 -0400] hakunin: hoover_damm: and the latter shouldn't be a chef service resource?
[2012-06-25 21:58:55 -0400] hakunin: i'm actually new to bluepill, used monit before
[2012-06-25 21:59:28 -0400] hoover_damm: hakunin, nope
[2012-06-25 21:59:53 -0400] hoover_damm: hakunin, https://github.com/opscode-cookbooks/bluepill
[2012-06-25 22:00:25 -0400] hoover_damm: hakunin, you should modify my cookbook to write to the same place that node["bluepill"]["state_dir"]
[2012-06-25 22:00:32 -0400] hoover_damm: hakunin, and then just use the bluepill cookbook to start it
[2012-06-25 22:00:41 -0400] jtimberman: joemiller: the users cookbook uses search on the data bag specified, so it won't work with solo
[2012-06-25 22:00:58 -0400] hakunin: hoover_damm: oh, make my own service using the method in there
[2012-06-25 22:01:25 -0400] hoover_damm: hakunin, that will feel a lot better
[2012-06-25 22:02:19 -0400] hakunin: thanks, doing that
[2012-06-25 22:03:13 -0400] hakunin: hoover_damm: although modifying your cookbook means copying it away from where i keep dependency cookbooks, so i won't be able to easily update it (i'm using librarian-chef)
[2012-06-25 22:03:14 -0400] jameson: would running <%= search(:node, "role:db")[0][:IP] %> print the IP address of the DB?
[2012-06-25 22:03:31 -0400] jameson: *the db being a db with a role:db
[2012-06-25 22:05:44 -0400] hoover_damm: hakunin, I'm open to pull requests.  I just don't have the time nor desire to work on bluepill/unicorn atm
[2012-06-25 22:05:47 -0400] hoover_damm: to fix it
[2012-06-25 22:05:56 -0400] hoover_damm: I don't wanna just do some random code and hope it works :(
[2012-06-25 22:06:56 -0400] hakunin: hoover_damm: i'm with you 100%. even if i send you a PR you gonna be like "well, i haven't tested it, maybe... ah, will deal with it later". At least that's exactly my thought process usually
[2012-06-25 22:10:25 -0400] hoover_damm: hakunin, well it drops it in unicorn so you can do bluepill load /etc/unicorn/whatever.pill for the shortterm
[2012-06-25 22:11:39 -0400] hakunin: hoover_damm: already modifying the cookbook, not a big deal. thanks!
[2012-06-25 22:12:28 -0400] hoover_damm: yep
[2012-06-25 22:25:13 -0400] qhartman: I'm working on buildign a cookbook that requires an SSH public key to be generated and copied from server A to server B to allow a system-level user to rsync files from A to B.  Is this a problem that has been solved already? Right now I'm at a loss as to how to accomplish it without manual intervention or re-using keys.
[2012-06-25 22:25:47 -0400] qhartman: or multiple chef-client runs
[2012-06-25 22:34:27 -0400] jameson: anyone know why I get a error about "search" ijn templates ?
[2012-06-25 22:34:37 -0400] jameson: was I suppose to require it somewhere?
[2012-06-25 22:35:43 -0400] jameson: oh nvm... inside recipes only
[2012-06-25 22:40:12 -0400] hakunin: hoover_damm: everything great but you didn't provide the start command anywhere. should figure out my own i guess
[2012-06-25 22:43:38 -0400] hoover_damm: hakunin, *nod* the small bits :(
[2012-06-25 22:44:42 -0400] hakunin: hoover_damm: none of the small bits would've given me a moment of delay if i was any good as a sysadmin, not learning _everything_ (substantial) about provisioning in the last week
[2012-06-25 22:50:14 -0400] cheeseplus: any idea on why options isn't getting evaluated in this block? : https://gist.github.com/2991964
[2012-06-25 22:51:33 -0400] workmad3: cheeseplus: you're doing 'options = ' which creates a local variable called options instead of setting the options for the resource
[2012-06-25 22:53:41 -0400] cheeseplus: workmad3: a ha
[2012-06-25 22:56:41 -0400] cheeseplus: workmad3: and of course it works now with the "="
[2012-06-25 22:57:50 -0400] cheeseplus: I totally copied it from what I thought was a similar block but upon examining the earlier bit it was definitely only accessing it locally
[2012-06-25 22:57:57 -0400] cheeseplus: workmad3: thank you!
[2012-06-25 23:06:44 -0400] swolf__: holoway:  /qn was what was causing the failures, and only on uninstall.  /qb worked though.
[2012-06-25 23:12:59 -0400] swolf__: holoway:  i feel the problem has to be something goofy with my environment.  the installer just kicks out a 1603, not a ton of info to provide on a bug.  perhaps there is a log somewhere for msi's..
[2012-06-25 23:16:43 -0400] cheeseplus: swolf__: probably in Event Viewer
[2012-06-25 23:16:57 -0400] cheeseplus: swolf__: also not surprised with crazy errors from MSIs
[2012-06-25 23:17:13 -0400] cheeseplus: I had tons of issues automating windows build farms because of their nonsense
[2012-06-25 23:17:18 -0400] swolf__: ya man msi's suck
[2012-06-25 23:17:36 -0400] cheeseplus: I like the idea but their typically poorly put together
[2012-06-25 23:17:43 -0400] cheeseplus: or the MSI is just a shell for some other installer
[2012-06-25 23:18:57 -0400] swolf__: yup.
[2012-06-25 23:19:33 -0400] swolf__: and adding this whole layer of complixity with product codes, upgrade codes
[2012-06-25 23:20:05 -0400] cheeseplus: oh god I know /facepalm
[2012-06-25 23:20:37 -0400] cheeseplus: creating an installer, even when you know how to in Visual Studio, is always an ordeal
[2012-06-25 23:21:25 -0400] swolf__: yeah those installer projects are garbage.
[2012-06-25 23:23:03 -0400] cheeseplus: I was getting ready to jump into Chef on Windows but the company fell apart so now I don't have to worry about it ;)
[2012-06-25 23:25:09 -0400] swolf__: lolz

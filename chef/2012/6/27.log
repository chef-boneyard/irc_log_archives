[2012-06-27 00:07:27 -0400] hoover_damm: josephholsten, btm does that weekly
[2012-06-27 00:07:31 -0400] hoover_damm: josephholsten, no need to ask :)
[2012-06-27 00:08:44 -0400] josephholsten: sure, but he doesn't get around to all of them
[2012-06-27 00:09:36 -0400] hoover_damm: josephholsten, I'd like to believe that btm does the best that he can and if he needs help he gets it.
[2012-06-27 00:09:55 -0400] josephholsten: he does way better than I could, certainly
[2012-06-27 00:12:52 -0400] josephholsten: hmm, when do cookbook issues get closed? apparently not on merge. On release to community?
[2012-06-27 00:14:38 -0400] rburton-: Any recommendations on how I should upgrade ruby on a server? What recipe should I use?
[2012-06-27 00:14:54 -0400] hoover_damm: josephholsten, there is no review until you resolve said ticket
[2012-06-27 00:15:09 -0400] paulmooring: hoover_damm: it's marked resolved
[2012-06-27 00:15:33 -0400] hoover_damm: paulmooring, *nod* I was just telling him
[2012-06-27 00:15:44 -0400] hoover_damm: bawt, contributing?
[2012-06-27 00:15:44 -0400] bawt: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-06-27 00:15:50 -0400] hoover_damm: definitive guide
[2012-06-27 00:16:45 -0400] josephholsten: hoover_damm: was asking b/c of http://tickets.opscode.com/browse/COOK-1182
[2012-06-27 00:16:50 -0400] josephholsten: it's merged, but not closed
[2012-06-27 00:16:56 -0400] josephholsten: thus my confusion
[2012-06-27 00:17:11 -0400] erikh: probably gets closed @ release time
[2012-06-27 00:18:18 -0400] josephholsten: rburton-: that's a good question. I use the rbenv cookbook, but it seems like there should be a good one for system ruby
[2012-06-27 00:18:45 -0400] rburton-: Great thanks, I saw that and was digging into it.
[2012-06-27 00:19:26 -0400] josephholsten: looks like http://community.opscode.com/cookbooks/ruby hasn't been updated since opscode stopped maintaining it
[2012-06-27 00:20:37 -0400] rburton-: I'll look into both thanks joe. :)
[2012-06-27 00:20:39 -0400] rburton-: about to land in SFO
[2012-06-27 00:20:39 -0400] rburton-: w00t
[2012-06-27 00:21:44 -0400] maek: can anyone offer insight on this https://gist.github.com/3000425 - chef-client is telling me a version of a cookbook my cookbook is asking for is not found but that cookbook is installed according to knife
[2012-06-27 00:21:55 -0400] maek: also my metadata.rb for that cookbook just says yum with no version constraint
[2012-06-27 00:27:13 -0400] hoover_damm: maek, the error message is pretty clear on that
[2012-06-27 00:27:42 -0400] hoover_damm: Unable to satisfy constraints on cookbook yum, which does not exist, due to run list item (riot_base >= 0.0.0). Run list items that may result in a constraint on yum: [(riot_base = 2.6.8) -> (yum >= 0.0.0)]","unsatisfiable_run_list_item":"(riot_base >= 0.0.0)","non_existent_cookbooks":[],"most_constrained_cookbooks":["Package yum"]}
[2012-06-27 00:29:56 -0400] maek: hoover_damm: can you be explicit with me cause im lost
[2012-06-27 00:30:26 -0400] maek: hoover_damm: like its asking for 0.0.0
[2012-06-27 00:32:41 -0400] josephholsten: anyone know if it's normal for OSSEC to take down the 2.5.1 tarball after the 2.6 release? current ossec cookbook is broken nao
[2012-06-27 00:32:56 -0400] hoover_damm: maek, truthfully it looks straight forward
[2012-06-27 00:33:08 -0400] hoover_damm: maek, should work
[2012-06-27 00:33:30 -0400] hoover_damm: maek, what's your environment show for riot_base?
[2012-06-27 00:35:00 -0400] hoover_damm: cookbook "riot_base" ">= 0.0.0"
[2012-06-27 00:35:15 -0400] hoover_damm: ?
[2012-06-27 00:36:06 -0400] maek: hoover_damm:   riot_base:  2.6.8
[2012-06-27 00:36:27 -0400] maek: and thats on the chef server also
[2012-06-27 00:37:04 -0400] hoover_damm: maek, uhm somewhere you define riot_base >= 0.0.0
[2012-06-27 00:37:05 -0400] hoover_damm: ?
[2012-06-27 00:37:14 -0400] maek: hmm ok let me dig more
[2012-06-27 00:37:48 -0400] maek: and that wont work for 2.6.8 because its a major version higher?
[2012-06-27 00:37:56 -0400] maek: everything is grater then 0.0.0
[2012-06-27 00:43:46 -0400] maek: hoover_damm: also thanks :)
[2012-06-27 00:46:31 -0400] hoover_damm: maek, nah >= should work
[2012-06-27 00:47:38 -0400] hoover_damm: maek, i generally lock them only to =
[2012-06-27 00:47:43 -0400] hoover_damm: and don't bother with >= or any of the rest
[2012-06-27 01:45:41 -0400] jameson: so i get this from vagrant: [Wed, 27 Jun 2012 01:26:39 +0000] FATAL: NameError: Cannot find a resource for luarocks on ubuntu version 12.04
[2012-06-27 01:45:56 -0400] jameson: luarock is a provider i made in a different recipe
[2012-06-27 01:46:09 -0400] jameson: basically a clone of python's pip provider
[2012-06-27 01:46:46 -0400] jameson: anyone have any idea
[2012-06-27 01:47:08 -0400] jameson: why I can't get hte LWRP even though I included it in the runlist?
[2012-06-27 01:47:58 -0400] cwj: is the provider included in the same cookbook as the recipe which is trying to use it?
[2012-06-27 01:48:06 -0400] jameson: no
[2012-06-27 01:48:13 -0400] jameson: it's ina different cookbook
[2012-06-27 01:49:02 -0400] cwj: ok, you need to make sure you have used include_recipe
[2012-06-27 01:49:28 -0400] cwj: if your lwrp is implemented in a cookbook foo and you want to use it in recipe bar::baz, that recipe needs include_recipe 'foo'
[2012-06-27 01:49:51 -0400] cwj: and you will also want to make sure you have specified a dependency on cookbook foo in the metadata for cookbook bar
[2012-06-27 01:50:56 -0400] jameson: hrm, i did both of that
[2012-06-27 01:51:33 -0400] jameson: is it because i didn't include_recipe luarocks?
[2012-06-27 01:51:54 -0400] jameson: and that default.rb installs the stuff needed?
[2012-06-27 01:53:58 -0400] cwj: i dont know if it is sufficient to include_recipe any recipe from the cookbook where the lwrp is defined
[2012-06-27 01:55:01 -0400] cwj: i think every time i've written a lwrp i have had an empty default recipe and then i include_recipe 'cookbooknamehere'
[2012-06-27 01:55:24 -0400] jameson: was your provider called cookbooknamehere ?
[2012-06-27 01:55:50 -0400] cwj: no
[2012-06-27 01:56:27 -0400] cwj: like i have a lwrp for sending messages to hipchat, the cookbook is called hipchat, the resource hipchat_message
[2012-06-27 01:56:46 -0400] yfeldblum: cwj, jameson, the calling cookbook needs to write in its metadata.rb file `depends "cookbook-with-lwrp"`
[2012-06-27 01:56:57 -0400] cwj: right, thats what i was saying
[2012-06-27 01:57:30 -0400] jameson: mm
[2012-06-27 01:57:31 -0400] jameson: weird
[2012-06-27 01:57:38 -0400] jameson: depends "lua"
[2012-06-27 01:57:46 -0400] jameson: is in metatdata.rb in the caller
[2012-06-27 01:58:50 -0400] jameson: let g:netrw_dirhistmax  =0
[2012-06-27 01:58:51 -0400] jameson: let g:netrw_dirhist_cnt =0
[2012-06-27 01:58:56 -0400] jameson: include_recipe "lua"
[2012-06-27 01:59:13 -0400] jameson: is in my caller's recipe
[2012-06-27 01:59:58 -0400] cwj: is your lua cookbook on github?
[2012-06-27 02:00:07 -0400] jameson: it just does
[2012-06-27 02:00:11 -0400] jameson: no
[2012-06-27 02:00:19 -0400] jameson: the provider/resource is a copy of the python one
[2012-06-27 02:00:27 -0400] jameson: with python, pip replaced with Lua, LuaRocks
[2012-06-27 02:00:42 -0400] jameson: and it installed lua5.1, luarocks from package
[2012-06-27 02:02:34 -0400] nicholasf: hi, what's the best way to upload all of the cookbooks in my cookbooks dir to my hosted chef server?
[2012-06-27 02:02:46 -0400] jameson: knife cookbook upload -a
[2012-06-27 02:02:50 -0400] nicholasf: cheers
[2012-06-27 02:03:41 -0400] jameson: cwj: possibly problems with "resource_for_platofmr" ?
[2012-06-27 02:04:48 -0400] cwj: jameson: really hard to give helpful input without being able to see source for both of those cookbooks
[2012-06-27 02:05:04 -0400] jameson: yeh :|
[2012-06-27 02:16:43 -0400] jameson: cwj: do you have a recipe that uses chef-hipchat?
[2012-06-27 02:18:42 -0400] hoover_damm: heh another hipchat user?
[2012-06-27 02:18:50 -0400] hoover_damm: i haven't written that cookbook myself
[2012-06-27 02:18:52 -0400] hoover_damm: was planning on it
[2012-06-27 02:19:02 -0400] jameson: i'm just
[2012-06-27 02:19:12 -0400] jameson: python_pip is in core so ~_~
[2012-06-27 02:19:41 -0400] jameson: oh
[2012-06-27 02:19:42 -0400] jameson: i know
[2012-06-27 02:20:03 -0400] jameson: lua_luarocks
[2012-06-27 02:21:13 -0400] jameson: if this runs >_<
[2012-06-27 02:22:49 -0400] jameson: cwj: yup -_- was not using lua_luarocks
[2012-06-27 02:23:58 -0400] jameson: build-essential receipe would install make, gcc right?
[2012-06-27 03:23:56 -0400] nicholasf: is there a command in knife for uploading a cookbook and all of its dependencies
[2012-06-27 03:23:57 -0400] nicholasf: ?
[2012-06-27 03:26:51 -0400] jameson: mm
[2012-06-27 03:28:23 -0400] jameson: er
[2012-06-27 03:28:44 -0400] jameson: usually.. when you d
[2012-06-27 03:29:07 -0400] jameson: nicholasf: you can do knife cookbook install [cookbook]
[2012-06-27 03:29:15 -0400] jameson: and it will install the dependencies on the hosted-chef
[2012-06-27 03:29:37 -0400] Dave: Has anyone ever seen chef-solo hang immediately - no stacktrace, no nothing?
[2012-06-27 03:29:54 -0400] nicholasf: jameson: that installs it locally, afterward I have to run knife cookbook upload [cookbook]
[2012-06-27 03:29:57 -0400] Dave: This all of a sudden started happening on 10.12.0
[2012-06-27 03:30:15 -0400] Dave: Ubuntu 11.10
[2012-06-27 03:30:25 -0400] jameson: nicholasf: I usually do a knife cookbook upload -a first so I don't run into that problem
[2012-06-27 03:30:40 -0400] jameson: knife doesn't have a smart upload updated cookbooks command :|
[2012-06-27 03:31:00 -0400] Dave: No matter what we pass for config or json, it just stops at INFO: *** Chef 10.12.0 ***
[2012-06-27 03:31:11 -0400] nicholasf: jameson: ah yeh, but I found uploading *everything* there (when I only want to upload cookbook X plus its dependencies to be overkill
[2012-06-27 03:31:16 -0400] nicholasf: that's the reason I asked
[2012-06-27 03:32:17 -0400] jameson: yeah, there isn't :|
[2012-06-27 03:32:43 -0400] jameson: nicholasf: i believe knife cookbook install [] does it on the server end... not on the local (site) end
[2012-06-27 03:33:40 -0400] jameson: nicholasf: oh wait nvm,
[2012-06-27 03:33:48 -0400] jameson: i'm thinking of downlading from the hosted chef :X
[2012-06-27 03:33:51 -0400] nicholasf: ah ok - :)
[2012-06-27 03:34:04 -0400] nicholasf: yeh, I dont think there is a fix for it. But I should RTFM for myself :)
[2012-06-27 03:36:33 -0400] jameson: nicholasf: yeah, smart uploading is a feature request ;_;
[2012-06-27 03:36:41 -0400] nicholasf: figures
[2012-06-27 03:38:03 -0400] jameson: also, shorthand of
[2012-06-27 03:38:09 -0400] jameson: knife cookbook -> knife cb
[2012-06-27 03:40:55 -0400] nicholasf: jameson: ta, didnt know that
[2012-06-27 03:41:48 -0400] jameson: oh no
[2012-06-27 03:41:50 -0400] jameson: it doesn't work
[2012-06-27 03:41:51 -0400] jameson: i wish it did :P
[2012-06-27 04:14:42 -0400] hoover_damm: alias it?
[2012-06-27 04:22:28 -0400] hakunin_: guys, anyone here knows chef? if i have this written in the recipe (very small gist) why wouldn't postgres start? https://gist.github.com/7ca857cdf1f508e723bf
[2012-06-27 04:23:05 -0400] hakunin_: i stop postgres in service block and then the init-database should notify service to start, right?
[2012-06-27 04:23:21 -0400] hakunin_: but after that the next command errors out because cannot connect to postgres
[2012-06-27 04:23:33 -0400] hakunin_: so i ssh into server, and postgres is not running indeed
[2012-06-27 04:25:38 -0400] hoover_damm: are you using my cookbooks again?
[2012-06-27 04:25:43 -0400] hakunin: hoover_damm: lol
[2012-06-27 04:26:07 -0400] hoover_damm: nah that doesn't look like my shitty code
[2012-06-27 04:26:10 -0400] hakunin: hoover_damm: postgres i think is from opscode, but i copied and hacked a bunch of it
[2012-06-27 04:26:56 -0400] hakunin: hoover_damm: point is  the code actually works, the only problem is the part where it has to first stop the service then start it after initdb ran
[2012-06-27 04:27:20 -0400] hakunin: so i think it stops it  because postgresql is not running when i checked (and it should be running by default after package install)
[2012-06-27 04:27:26 -0400] hoover_damm: hakunin, heh i forked it too
[2012-06-27 04:27:30 -0400] hoover_damm: made a 9.1 cookbook
[2012-06-27 04:27:42 -0400] hakunin: i used somebody's 9.1 cookbook
[2012-06-27 04:27:43 -0400] hoover_damm: hakunin, pimped out the settings so I got decent throughput
[2012-06-27 04:27:46 -0400] hakunin: and hacked it further
[2012-06-27 04:27:49 -0400] hoover_damm: could be mine
[2012-06-27 04:27:56 -0400] hoover_damm: i posted it on the community site
[2012-06-27 04:28:33 -0400] hakunin: hoover_damm: oh no this one is opscode but they had 9.1 working for ubuntu 12.04
[2012-06-27 04:28:43 -0400] hakunin: so i didn't go with special 9.1 fork
[2012-06-27 04:29:03 -0400] hakunin: hoover_damm: this code you see here is mine though
[2012-06-27 04:29:06 -0400] hoover_damm: yeah debian tunes itself horribly
[2012-06-27 04:29:11 -0400] hoover_damm: and once you start to tune it
[2012-06-27 04:29:13 -0400] hoover_damm: you need to reinit
[2012-06-27 04:29:20 -0400] hoover_damm: basically the default debian setup is garbage to me
[2012-06-27 04:29:25 -0400] hoover_damm: (note the words, to me!)
[2012-06-27 04:29:36 -0400] hakunin: heh
[2012-06-27 04:29:54 -0400] hakunin: could it be because i'm making a service and calling action :stop in there?
[2012-06-27 04:30:22 -0400] hakunin: so when init-database notifies the service with :start, it actually doesn't work because of it somehow?
[2012-06-27 04:30:44 -0400] hakunin: in other words i have no clue what's going on behind the scenes there
[2012-06-27 04:30:45 -0400] hoover_damm: https://github.com/damm/postgresql/
[2012-06-27 04:31:05 -0400] hoover_damm: I spent 3 days building that cookbook and I had a clue of what i'm doing
[2012-06-27 04:31:59 -0400] hoover_damm: the 9.1 was just a cherry on top.  It's about the semaphore settings, the shared memory / etc properly tuned
[2012-06-27 04:32:03 -0400] hakunin: hoover_damm: in my version i also started working on master/slave stuff
[2012-06-27 04:32:04 -0400] hoover_damm: so that postgresql can scale
[2012-06-27 04:32:11 -0400] hoover_damm: master/slave is easy
[2012-06-27 04:32:15 -0400] hoover_damm: mine is always enabled
[2012-06-27 04:32:23 -0400] hoover_damm: you just manually set it up, and setup recovery.conf
[2012-06-27 04:32:24 -0400] hoover_damm: and win
[2012-06-27 04:32:40 -0400] hoover_damm: automating master/slave is impossible without knowing what factors you have to work with
[2012-06-27 04:32:48 -0400] hoover_damm: so what you write will likely only work for you :(
[2012-06-27 04:33:05 -0400] hoover_damm: step off amazon and you can't aws_snapshot
[2012-06-27 04:33:06 -0400] hoover_damm: ...
[2012-06-27 04:33:16 -0400] hoover_damm: rsync may not always be open to ssh
[2012-06-27 04:33:16 -0400] hoover_damm: ..
[2012-06-27 04:34:38 -0400] hakunin: hoover_damm: so you have no idea why it didn't start on line 17 in my gist?
[2012-06-27 04:35:03 -0400] hakunin: hoover_damm: i sshed into server and ran "sudo service postgresql start" and it worked
[2012-06-27 04:35:09 -0400] hakunin: but recipe didn't start it
[2012-06-27 04:35:36 -0400] hakunin: causing my next step to error out because it couldn't connect
[2012-06-27 04:35:36 -0400] hoover_damm: not off hand
[2012-06-27 04:35:47 -0400] hoover_damm: the blocking around not_if is obscure
[2012-06-27 04:36:16 -0400] hoover_damm: you define the service, so it's prolly the stupid perl wrapper
[2012-06-27 04:36:33 -0400] hoover_damm: troubleshooting a postgresql startup failure is ... insane
[2012-06-27 04:36:58 -0400] hoover_damm: all I can suggest is to try my cookbook and then pile your hacks on top
[2012-06-27 04:37:09 -0400] hakunin: hoover_damm: i'm sure it didn't fail to start, chef simply didn't tell it to start
[2012-06-27 04:37:56 -0400] hakunin: hoover_damm: in my cookbook i had to work quite a bit on making sure that postgres stops for a bit, database reinitializes in the correct path, then postgres starts again, sets up a db, and some users. it'll be a lot to change again. this is the only hiccup left
[2012-06-27 05:01:05 -0400] supergrilo: can we install chef without compilers package? I use chef and all my debian machines are pre compiled. I don't need/use the gem resource for example...
[2012-06-27 05:02:42 -0400] thermistor: hla
[2012-06-27 05:03:10 -0400] thermistor: hoping some can help me, trying to create a database
[2012-06-27 05:03:17 -0400] thermistor: getting this error "DEBUG: Re-raising exception: LoadError - cannot load such file -- mysql"
[2012-06-27 05:04:14 -0400] thermistor: recipe is:
[2012-06-27 05:04:15 -0400] thermistor: mysql_connection_info = {:host => "localhost", :username => 'root', :password => node['mysql']['server_root_password']}  mysql_database "como_stage" do   connection mysql_connection_info   database_name "como_stage"   action :create end
[2012-06-27 05:05:42 -0400] thermistor: hrm, here is a gist
[2012-06-27 05:05:43 -0400] thermistor: https://gist.github.com/0b246b142a5e6b35eae4
[2012-06-27 05:07:09 -0400] hoover_damm: hakunin, having spent 3 days troubleshooting the setup.  I'm fairly sure your about 2 days more in
[2012-06-27 05:07:18 -0400] hoover_damm: good luck :)
[2012-06-27 05:12:53 -0400] jatan: supergrilo, you could if you had your own chef packages with no dependencies..
[2012-06-27 05:13:10 -0400] jatan: but I don't think it's worth the extra effort
[2012-06-27 05:13:19 -0400] jatan: there are no major space savings to be had
[2012-06-27 05:14:13 -0400] jatan: thermistor, you're missing the mysql gem
[2012-06-27 05:14:51 -0400] jatan: supergrilo, as for security, well.. if your host is compromised as far as them having shell access, they could plant their own compilers.. so you not supplying any doesn't really matter
[2012-06-27 05:19:52 -0400] supergrilo: no ... Security does not matter. I do not use anything on the chef you need. I need an installation that does not occupy space
[2012-06-27 05:21:32 -0400] supergrilo: you know lxc?
[2012-06-27 05:23:39 -0400] supergrilo: okay ... I try to create myself. If I can i will document. If anyone knows someone who has tried to let me know please.
[2012-06-27 05:23:51 -0400] williamherry: does chef support selinux now?
[2012-06-27 05:24:00 -0400] BryanWB_: williamherry: not afaik
[2012-06-27 05:26:07 -0400] williamherry: BryanWB_, is 'setenforce 0' the right way to disable it in chef?
[2012-06-27 05:28:19 -0400] BryanWB_: williamherry: sure, buit i use the selinux cookbook, which essentially does the same thing
[2012-06-27 05:28:57 -0400] williamherry: BryanWB_, thanks
[2012-06-27 05:29:02 -0400] thermistor: jatan, thanks, yes, I can install mysql with package_gem as per this https://gist.github.com/0b246b142a5e6b35eae4, but isn't mysql already supposed to be installed by mysql::client?
[2012-06-27 05:30:49 -0400] BryanWB_: williamherry: i have experienced a good chunk of the issues related to rhel/centos + chef, i may not be available so much on #chef this week but if u shoot an e-mail w/ a bunch of q's, I will try to respond quickly
[2012-06-27 05:34:55 -0400] williamherry: BryanWB_, that would be greate
[2012-06-27 05:35:50 -0400] BryanWB_: williamherry: just send it to the chef-ml, that way u also get feedback from people smarter than myself, like atomic-penguin
[2012-06-27 05:37:56 -0400] cheeseplus: and others can benefit :)
[2012-06-27 05:38:21 -0400] BryanWB_: exactly!
[2012-06-27 05:39:19 -0400] williamherry: BryanWB_, good idea
[2012-06-27 05:57:29 -0400] MITPALADIN: question - is it possible to use chef to create a multi-node (2 webservers, 1 rails app server) across different EC2 regions (1 webserver in APAC, others in US-East)?
[2012-06-27 06:02:52 -0400] cheeseplus: MITPALADIN: entirely possible
[2012-06-27 06:04:09 -0400] cheeseplus: MITPALADIN: you'd probably be making use of fog http://rubygems.org/gems/fog
[2012-06-27 06:04:22 -0400] cheeseplus: also, http://wiki.opscode.com/display/chef/Launch+Cloud+Instances+with+Knife
[2012-06-27 06:04:45 -0400] cheeseplus: the rest is just putting together the right combination of cookbooks
[2012-06-27 06:07:31 -0400] MITPALADIN: hmm so would we need to use knife ec2 server create twice? once for each region-specific instance?
[2012-06-27 06:11:04 -0400] MITPALADIN: like right now i've figured out how to create a single instance in a single region using something like "knife ec2 server create -x ec2-user -I ami-e565ba8c -G webserver -i ~/.ssh/web.pem -S webserver  -r 'role[meldd]'"
[2012-06-27 06:12:19 -0400] cheeseplus: MITPALADIN: there is a parallel gem but the simplest way would be to instantiate each one seperately
[2012-06-27 06:14:03 -0400] miah: herp herp
[2012-06-27 06:14:32 -0400] cheeseplus:  MITPALADIN: it's not been touched in a bit but here is https://github.com/cparedes/knife-parallel-ec2
[2012-06-27 06:15:24 -0400] MITPALADIN: :) "this knife plugin isnt ready for prime time yet"
[2012-06-27 06:15:51 -0400] miah: i am tired
[2012-06-27 06:15:53 -0400] cheeseplus: you can always fork it
[2012-06-27 06:16:21 -0400] MITPALADIN: i'll give it a try, but without it, does chef require a certain order of instance creation for them to talk to each other?
[2012-06-27 06:16:22 -0400] cheeseplus: miah: I am unusually so, the Texas heat is taking it's toll on me
[2012-06-27 06:16:47 -0400] MITPALADIN: like appserver, then webserver1, etc?
[2012-06-27 06:16:49 -0400] cheeseplus: MITPALADIN: the nodes don't need to talk directly to each other - at least in terms of chef
[2012-06-27 06:17:08 -0400] miah: doh
[2012-06-27 06:17:15 -0400] miah: i couldnt deal with the heat in houston
[2012-06-27 06:17:27 -0400] cheeseplus: any intercommunication would be facilitated by your recipes
[2012-06-27 06:17:44 -0400] cheeseplus: and the attributes on the nodes that the server can then use to fill in blanks
[2012-06-27 06:18:02 -0400] MITPALADIN: :) move to Singapore guys, perpetual spring hits the spot
[2012-06-27 06:18:19 -0400] miah: i live in san francisco
[2012-06-27 06:18:31 -0400] miah: we only have spring / fall =)
[2012-06-27 06:18:41 -0400] cheeseplus: miah: and I will always be jealous
[2012-06-27 06:18:43 -0400] BryanWB_: MITPALADIN: big ups to Singapore, I love that place
[2012-06-27 06:18:59 -0400] BryanWB_: if u ever looking to hire devops ppl there, lemme know!
[2012-06-27 06:19:12 -0400] miah: hah
[2012-06-27 06:19:17 -0400] cheeseplus: Austin is great, except for 3 months of the year where you can't go outside without heat stroke
[2012-06-27 06:19:23 -0400] miah: ya
[2012-06-27 06:19:52 -0400] MITPALADIN: definite shortage of dev talent here in SG, big banks and corps just soak them right up
[2012-06-27 06:19:54 -0400] miah: but you also live close to elgin, and can go to Southside Market..
[2012-06-27 06:19:59 -0400] BryanWB_: curry crab ftw!
[2012-06-27 06:20:25 -0400] MITPALADIN: that'd be 'black pepper crabs'! ;)
[2012-06-27 06:20:38 -0400] miah: i dont think i will ever work for a large corp again
[2012-06-27 06:20:40 -0400] cheeseplus: miah: we have all the tacos and brisket
[2012-06-27 06:20:40 -0400] miah: too much bs
[2012-06-27 06:20:46 -0400] miah: i know!
[2012-06-27 06:20:49 -0400] BryanWB_: MITPALADIN: even better!
[2012-06-27 06:21:20 -0400] cheeseplus: miah: we've got significantly less asian cuisine though (outside of the top chef guy)
[2012-06-27 06:21:26 -0400] miah: ya
[2012-06-27 06:21:47 -0400] MITPALADIN: heh, so any recipe references on how to get nodes to talk to each other?
[2012-06-27 06:22:09 -0400] miah: cheeseplus: i live here. http://www.coastnews.com/sf/clement/clement.htm
[2012-06-27 06:22:41 -0400] BryanWB_: MITPALADIN: for that purpose, i have heard of ppl using zookeeper
[2012-06-27 06:23:14 -0400] cheeseplus: MITPALADIN: I don't see why you'd need to get them to talk amongst themselves in that configuration though, they can just ask the chef server for information on other nodes
[2012-06-27 06:23:43 -0400] miah: how do you want the nodes to talk to each other.. and more importantly. why?
[2012-06-27 06:23:48 -0400] cheeseplus: ^
[2012-06-27 06:24:11 -0400] MITPALADIN: yea, i just need the APAC webserver to know to route all requests to the appserver in US-East
[2012-06-27 06:24:29 -0400] BryanWB_: MITPALADIN: can u use cloudformation for that?
[2012-06-27 06:24:41 -0400] cheeseplus: that would be something that would be part of your recipes, at least in my mind
[2012-06-27 06:24:57 -0400] miah: MITPALADIN: are we talking actual network routes, or a load balancer / proxy software ?
[2012-06-27 06:25:15 -0400] MITPALADIN: so far i've only used recipes to install gems and packages :P
[2012-06-27 06:26:26 -0400] cheeseplus: simple example: one node does a chef-client run and grabs all the IPs/FQDNs for a given role and pipes them into a config file
[2012-06-27 06:26:28 -0400] miah: ok. well. there is a ok apache2 cookbook. the nginx cookbook is pretty broken but you can try to use it.
[2012-06-27 06:26:43 -0400] miah: how is your web -> application server set up?
[2012-06-27 06:26:58 -0400] miah: is it backend pool or uri routing?
[2012-06-27 06:26:58 -0400] MITPALADIN: guess i'd need a load balancer on top with a single url, which routes requests to the closest of 2 webservers, if not cached then hit the appserver
[2012-06-27 06:27:45 -0400] miah: lb -> cache -> webserver -> app server ?
[2012-06-27 06:28:09 -0400] MITPALADIN: yea
[2012-06-27 06:28:45 -0400] MITPALADIN: right now its just a single node running rails stack with default Webrick
[2012-06-27 06:28:58 -0400] miah: oh wow. so you still have quite a bit of architecting to do
[2012-06-27 06:29:05 -0400] MITPALADIN: still figuring out how to make it multi-node
[2012-06-27 06:29:20 -0400] BryanWB_: MITPALADIN: i think using search may be enough
[2012-06-27 06:29:44 -0400] miah: webrick -> unicorn -> nginx -> varnish -> load balancer (unless you use dns lb to your cache or cdn)
[2012-06-27 06:30:01 -0400] miah: search is powerful
[2012-06-27 06:30:41 -0400] cheeseplus: without it, all would be lost
[2012-06-27 06:31:04 -0400] MITPALADIN: lots to learn!  i've never touched varnish before
[2012-06-27 06:31:16 -0400] cheeseplus: it is the business
[2012-06-27 06:31:46 -0400] cheeseplus: I've never had to deploy it myself but I've seen the performance and heard it's praises sung from the mountain tops
[2012-06-27 06:31:47 -0400] BryanWB_: if u want to communicate state changes b/w nodes in real-time u want something more heavyweight like zookeeper
[2012-06-27 06:31:56 -0400] BryanWB_: but for ur usecase, search should be enough
[2012-06-27 06:32:31 -0400] cheeseplus: yea zookeeper would be overkill for the setup but still super useful
[2012-06-27 06:32:57 -0400] BryanWB_: miah: u put varnish behind haproxy and not in front?
[2012-06-27 06:38:00 -0400] MITPALADIN: hmm, how about using AWS elastic load balancer, then the 2 webservers, and the rails appserver?
[2012-06-27 06:41:08 -0400] cheeseplus: MITPALADIN: you'd need to use the Cloudformation API
[2012-06-27 06:41:36 -0400] cheeseplus: MITPALADIN: or https://github.com/websterclay/chef-elb
[2012-06-27 06:43:29 -0400] MITPALADIN: interesting, thanks, though reading further it looks like each ELB is region-specific
[2012-06-27 06:45:06 -0400] MITPALADIN: which would rather defeat the purpose of having a webserver in APAC and one in US-East, no?  requests from SG would have to hit ELB in say US-East, then APAC web server, then US-East appserver...
[2012-06-27 06:48:28 -0400] cheeseplus: it could but having one webserver communicating across the country to the rails appserver seems like it would be a potential perf issue as well
[2012-06-27 06:48:57 -0400] cheeseplus: I am by no means an expert with regard to the rails stack or even webserver though
[2012-06-27 06:53:48 -0400] miah: BryanWB_: depends. you might not need haproxy depending on how you set things up
[2012-06-27 06:59:34 -0400] MITPALADIN: k, think i will try setting up ELB -> 2 webserver -> 1 app server in US-East first, do perf benchmarking, then see what happens if I move one of the webservers to APAC
[2012-06-27 06:59:42 -0400] MITPALADIN: thanks guys!
[2012-06-27 07:02:18 -0400] cheeseplus: MITPALADIN: good luck
[2012-06-27 07:23:53 -0400] williamherry: chef-server on centos6.2 can not start, it say: Cipher is not a module (TypeError)
[2012-06-27 07:24:08 -0400] williamherry: I use rubygem-chef* package
[2012-06-27 08:11:42 -0400] hakunin: hoover_damm: so i'm reading your postgres recipe
[2012-06-27 08:11:52 -0400] hakunin: very involved stuff there
[2012-06-27 08:13:01 -0400] hakunin: hoover_damm: you sure it's a good idea to store configs and data in the same place instead of putting configs in /etc/postgresql?
[2012-06-27 08:19:19 -0400] mosez: man... running chef-client is a pain.... evertime there is another package that returns code 100
[2012-06-27 08:24:54 -0400] jacobat: Hi. All of a sudden the validation key for the chef server seems to have become invalid, so no client can talk to the server. Anyone else seen this happen?
[2012-06-27 08:27:23 -0400] specialsauce: jacobat: I've seen Chef say this before, but after a restart all become find. I can't remember if it was a couch, chef or rabbit issue but for me I bounced all and all was wel. Only seen this once.
[2012-06-27 08:27:45 -0400] jacobat: I'll try that
[2012-06-27 08:30:55 -0400] jacobat: Seems it was couchdb that went bad
[2012-06-27 08:31:59 -0400] jacobat: [Wed, 20 Jun 2012 16:40:38 GMT] [error] [<0.70.0>] ** Generic server <0.70.0> terminating
[2012-06-27 08:32:02 -0400] jacobat: Ouch
[2012-06-27 08:39:57 -0400] specialsauce: yep, i think that's what I saw. Not happened again since. Not investigated properly tbh
[2012-06-27 08:40:13 -0400] jacobat: I'm guessing disk space issues
[2012-06-27 08:40:20 -0400] jacobat: Disk was getting close to full
[2012-06-27 08:40:26 -0400] jacobat: Needed to run compaction on couch
[2012-06-27 08:47:57 -0400] amitbk: Hi, I'm having a hard time installing a vagrant VM with LAMP and wordpress using chef-solo. It seems that even though mysql is installed during the process, when the wordpress recipe needs it - it can not access it.
[2012-06-27 08:48:17 -0400] amitbk: So I get the error: [Wed, 27 Jun 2012 08:15:51 +0000] FATAL: LoadError: no such file to load -- mysql
[2012-06-27 08:48:53 -0400] amitbk: I'm trying to install it on a Ubuntu 12.04 image.
[2012-06-27 08:54:36 -0400] alex999: hi! I think I have a very similar problem like here: http://community.opscode.com/questions/111
[2012-06-27 08:56:06 -0400] alex999: my problem is every time I edit the /tmp/chef-solo/cookbooks/yum/attributes/default.rb and restart chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz it seems to get overwritten again
[2012-06-27 08:56:42 -0400] amitbk: Should I open a bug or is it something could be fixed in my configuration?
[2012-06-27 09:02:43 -0400] alex999: just found that: http://tickets.opscode.com/browse/COOK-1339
[2012-06-27 09:46:27 -0400] jimcrofty: Hi folks, i'm using a directory resource in a recipe that's throwing a Chef::Exceptions::ValidationFailed.
[2012-06-27 09:47:11 -0400] jimcrofty: It thinks there are invalid chars in the unix group name (groupname is platform^log^access).
[2012-06-27 09:48:13 -0400] jimcrofty: ^ chars are fine... I just need to get Chef to understand that. Anyone know how to redefine or ignore the validation checks?
[2012-06-27 10:16:24 -0400] zts: jimcrofty: what version of Chef? And can you pastebin your recipe and the full error?  A quick look at the code suggests it should accept any string...
[2012-06-27 10:16:37 -0400] zts: oh, and which platform are you running on?
[2012-06-27 10:17:35 -0400] jimcrofty: I'm running 0.10.8 and the error is:
[2012-06-27 10:17:35 -0400] jimcrofty: FATAL: Chef::Exceptions::ValidationFailed: Option group's value LIVERPOOLFC\platform^log^access does not match regular expression [/^([-a-zA-Z0-9_.\\ ]+)$/, /^\d+$/]
[2012-06-27 10:17:57 -0400] jimcrofty: Looks like I need to tweak that regex and put ^ in the character class
[2012-06-27 10:20:39 -0400] zts: aha, sorry, I was looking in the wrong place
[2012-06-27 10:20:48 -0400] jimcrofty: :)
[2012-06-27 10:22:55 -0400] zts: no promises, but it looks like the way to change that is to set Chef::Config[:group_valid_regex] in your config file
[2012-06-27 10:23:31 -0400] jimcrofty: looks promising, I'll check it out. Thanks1
[2012-06-27 10:24:19 -0400] zts: no problem, let me know if it works :)
[2012-06-27 10:24:37 -0400] jimcrofty: Will do! :)
[2012-06-27 10:25:43 -0400] zts: you might also want to add a comment to this issue, as it matches your problem though with a different character: http://tickets.opscode.com/browse/CHEF-2986
[2012-06-27 10:29:47 -0400] jimcrofty: good call, done.
[2012-06-27 10:48:43 -0400] iram: hi, I need a little help in chef HA setup, which would be a proper way to setup a multinode chef deployment?
[2012-06-27 10:51:38 -0400] iram: should I cluster couchDB , rabbitmq and solr and then make each chef server access its own or go for active passive setup?
[2012-06-27 11:08:00 -0400] laurent\: iram: have you looked at http://wiki.opscode.com/display/chef/Architecture ?
[2012-06-27 11:11:25 -0400] iram: I have looked at it, I am little confused whcih is the best way to achieve HA
[2012-06-27 11:12:45 -0400] laurent\: http://wiki.opscode.com/display/chef/Scalability+and+High+Availability there isn't much here
[2012-06-27 11:12:56 -0400] iram: thats whats i am stuck at
[2012-06-27 11:13:28 -0400] laurent\: atm i'm running chef/solr/rabbitmq/couchdb on the same server
[2012-06-27 11:13:28 -0400] iram: I dont know what to do with solr indexer
[2012-06-27 11:14:03 -0400] iram: i can do continous replication of couchdb easily
[2012-06-27 11:14:18 -0400] iram: use ha queues for mq
[2012-06-27 11:14:23 -0400] laurent\: active/passive is a form of HA
[2012-06-27 11:14:34 -0400] laurent\: so go for it, that's what i'll do later
[2012-06-27 11:14:57 -0400] iram: has anyone done solr indexer HA
[2012-06-27 11:14:59 -0400] iram: ?
[2012-06-27 11:15:23 -0400] laurent\: http://wiki.apache.org/solr/SolrCloud
[2012-06-27 11:15:25 -0400] iram: I tried using same mq and replicated couchdb , it seems only 1 server works at one time
[2012-06-27 11:15:39 -0400] iram: the other one starts showing merb errors
[2012-06-27 11:15:48 -0400] laurent\: i still have the url opened in my browser, i looked at it last week :)
[2012-06-27 11:16:01 -0400] iram: thanks i will check that
[2012-06-27 11:16:11 -0400] laurent\: why don't you start with active/passive first ?
[2012-06-27 11:16:13 -0400] iram: is DRDB right way to go?
[2012-06-27 11:16:25 -0400] iram: some people are suggesting that
[2012-06-27 11:16:44 -0400] laurent\: it's up to you, i haven't been using drbd for years.
[2012-06-27 11:17:53 -0400] iram: i will try setting up active passive first then I will report with findings
[2012-06-27 11:18:27 -0400] iram: someone needs to get a document up
[2012-06-27 11:19:16 -0400] laurent\: maybe i'll do it later, but i'm quite busy atm
[2012-06-27 11:19:44 -0400] laurent\: so it won't be before mid july
[2012-06-27 11:20:18 -0400] iram: maybe I can help in some way
[2012-06-27 11:23:01 -0400] laurent\: iram: then i guess you might want to start with this : http://www.clusterlabs.org/doc/en-US/Pacemaker/1.1/html/Clusters_from_Scratch/ :)
[2012-06-27 11:25:00 -0400] iram: sure, thanks
[2012-06-27 11:50:40 -0400] BryanWB_: reset: around? got some berkshelf questions
[2012-06-27 11:50:49 -0400] reset: whats up
[2012-06-27 11:51:20 -0400] BryanWB_: reset: i  want use the path   my_cookbook/tmp/cookbooks     as the path to install my shims in
[2012-06-27 11:51:43 -0400] reset: did that not work?
[2012-06-27 11:51:49 -0400] BryanWB_: that causes an infinite loop for my_cookbook unfortunately
[2012-06-27 11:52:06 -0400] reset: let me look at it
[2012-06-27 11:52:25 -0400] BryanWB_: ok, i put the error in a gist
[2012-06-27 11:52:47 -0400] reset: link it to me
[2012-06-27 11:53:34 -0400] BryanWB_: reset: https://gist.github.com/3003620
[2012-06-27 11:53:55 -0400] reset: are there any contents already in my_cookbook/tmp/cookbooks?
[2012-06-27 11:54:59 -0400] BryanWB_: reset: there is a .gitignore
[2012-06-27 11:55:12 -0400] BryanWB_: reset: https://github.com/karmi/cookbook-elasticsearch/tree/master/tmp/cookbooks
[2012-06-27 11:55:23 -0400] reset: ok i'm looking at it now
[2012-06-27 11:56:38 -0400] reset: can you type berks ver
[2012-06-27 11:56:41 -0400] reset: and tell me what version you have
[2012-06-27 11:57:05 -0400] rgsteele: Is it possible to use data bags inside of an attributes file?  The several attempts I've made have failed miserably.
[2012-06-27 11:57:33 -0400] reset: BryanWB_: also is tmp/cookbooks a symlink, or a hardlink, or anything other than a regular directory?
[2012-06-27 11:57:34 -0400] BryanWB_: reset: 0.3.2
[2012-06-27 11:58:14 -0400] BryanWB_: reset: they are regular directories
[2012-06-27 11:58:24 -0400] reset: ok
[2012-06-27 11:58:29 -0400] reset: can you also link me your Berksfile
[2012-06-27 11:58:59 -0400] BryanWB_: y
[2012-06-27 12:00:14 -0400] BryanWB_: reset: https://github.com/bryanwb/cookbook-elasticsearch/blob/master/Berksfile
[2012-06-27 12:01:43 -0400] reset: ok I can repro it
[2012-06-27 12:01:44 -0400] reset: hang on
[2012-06-27 12:10:23 -0400] reset: BryanWB_: think I got it
[2012-06-27 12:10:55 -0400] reset: BryanWB_: can you try and install the shims to a directory outside of the filepath of your source with the path location defined
[2012-06-27 12:12:59 -0400] BryanWB_: that works
[2012-06-27 12:13:02 -0400] reset: BryanWB_: i'm going to push a new version that fixes this bug right now. The issue is that you can't write shims to a subpath of a path location on disk
[2012-06-27 12:13:02 -0400] BryanWB_: reset: ^^
[2012-06-27 12:13:14 -0400] reset: I wrote the error handler for it
[2012-06-27 12:13:25 -0400] reset: but because I didn't expand the path before passing it to the linker
[2012-06-27 12:13:29 -0400] reset: it had no idea
[2012-06-27 12:13:33 -0400] reset: that is what it was attempting to do
[2012-06-27 12:13:35 -0400] BryanWB_: reset: tks!  it will be super helpful for cookbook testing to make everything self-conttained
[2012-06-27 12:13:45 -0400] reset: you still can keep it all self contained
[2012-06-27 12:14:22 -0400] BryanWB_: w/out your patch?
[2012-06-27 12:14:31 -0400] reset: the patch will just give you a better error message
[2012-06-27 12:14:40 -0400] reset: it's a file system limitation
[2012-06-27 12:15:04 -0400] BryanWB_: why is it building an infinitely long file path?
[2012-06-27 12:15:12 -0400] reset: you can't create a hard link of a target within a sub directory of that target
[2012-06-27 12:15:25 -0400] reset: because I was checking to see if somebody would try to do that
[2012-06-27 12:15:26 -0400] BryanWB_: ah
[2012-06-27 12:15:34 -0400] reset: but because the function that writes the shims wasn't expanding the user's input
[2012-06-27 12:15:48 -0400] reset: it didn't know until it attempted to link things up
[2012-06-27 12:15:53 -0400] reset: that the filepath was actually recursing
[2012-06-27 12:16:15 -0400] BryanWB_: reset: tks for ur help!
[2012-06-27 12:16:25 -0400] BryanWB_: and tks for the gr8 tool
[2012-06-27 12:16:26 -0400] reset: absolutely
[2012-06-27 12:17:09 -0400] reset: for now, i'd create your shims at a any other location on disk :)
[2012-06-27 12:18:48 -0400] BryanWB_: reset: would be neat if I could tell berkshelf not to create a shim for a cookbook if the other shims are a sub-path of that cookbook
[2012-06-27 12:18:54 -0400] BryanWB_: a --no-parent option
[2012-06-27 12:19:18 -0400] BryanWB_: then w/ vagrant i git it two cookbook locations  [ '.' , 'tmp/cookbooks' ]
[2012-06-27 12:20:28 -0400] reset: I'm going to eat the error and raise a warning
[2012-06-27 12:20:35 -0400] reset: that way the shim won't be created
[2012-06-27 12:21:22 -0400] BryanWB_: that works for me
[2012-06-27 12:23:03 -0400] leifmadsen: oops, if you're on the HIstory tab and make a comment, you're not going to see your comment, and thus post it twice
[2012-06-27 12:24:24 -0400] reset: BryanWB_: hows this
[2012-06-27 12:24:25 -0400] reset: ~/code/riot-cookbooks/artifact (master )  bundle exec berks in --shims tmp/asdff
[2012-06-27 12:24:26 -0400] reset: Using artifact (0.10.0) at path: '/Users/reset/code/riot-cookbooks/artifact'
[2012-06-27 12:24:26 -0400] reset: Installing ark (0.0.10) from git: 'git://github.com/bryanwb/chef-ark.git' with branch '721692625e1bff6f651f1032ef14adf355dc216b'
[2012-06-27 12:24:35 -0400] reset: Installing java (1.4.3) from git: 'git://github.com/bryanwb/java.git' with branch '8576a1b3a65599bfe50e49f462921071a2e04cb0'
[2012-06-27 12:24:35 -0400] reset: WARNING: Skipping shim for artifact (0.10.0) '/Users/reset/code/riot-cookbooks/artifact'.
[2012-06-27 12:24:36 -0400] reset: WARNING: Cannot write the shim of a source with a path location into a subdirectory of itself.
[2012-06-27 12:24:37 -0400] reset: Shims written to: 'tmp/asdff'
[2012-06-27 12:24:53 -0400] BryanWB_: reset: perfect :)
[2012-06-27 12:28:16 -0400] reset: BryanWB_: if you update to 0.3.3 this will be fixed
[2012-06-27 12:28:26 -0400] reset: I just pushed the update
[2012-06-27 12:28:40 -0400] BryanWB_: reset: gr8, tks again, hope to reward ur effort w/ a blog post
[2012-06-27 12:29:00 -0400] reset: appreciate it
[2012-06-27 12:29:19 -0400] reset: we'll be posting some better docs on how we're doing our process at Riot in the near future
[2012-06-27 12:29:42 -0400] BryanWB_: that will be gr8, would also be kewl to have ur team on foodfightshwo
[2012-06-27 12:30:30 -0400] reset: I'm sure we'd be done for that
[2012-06-27 12:30:33 -0400] reset: down*
[2012-06-27 12:30:58 -0400] reset: shoot me an email with some details and we'll work it out - jwinsor@riotgames.com
[2012-06-27 12:31:50 -0400] BryanWB_: gr8
[2012-06-27 12:31:59 -0400] reset: gotta go to bed, just realized it's 530am here
[2012-06-27 12:32:12 -0400] reset: if you run into any other bugs just submit them on the github page
[2012-06-27 12:32:23 -0400] reset: I'll get to them quick quick
[2012-06-27 13:07:46 -0400] cakehero: I'm using chef-solo and vagrant, does chef run as root by default or do I have to tell it to run as root?
[2012-06-27 13:08:09 -0400] cakehero: When upgrading the riak DB package I get an error that I can't run the dpkg command unless I'm root
[2012-06-27 13:19:23 -0400] asimaslam: Hey. I was wondering if anyone could give me some details about notifications. I am notifying the same resource about template changes. Will that restart multiple times or only once?
[2012-06-27 13:22:25 -0400] jonlives: asimaslam: only once, unless you specify immediately iirc
[2012-06-27 13:22:31 -0400] jonlives: but normally only once
[2012-06-27 13:22:42 -0400] asimaslam: jonlives: thanks, that makes sense
[2012-06-27 13:24:22 -0400] thedeeno: when I decrypt my data bag locally (with my secret file) it works fine. When decrypted with a chef-client I get 'FATAL: OpenSSL::Cipher::CipherError: bad decrypt'
[2012-06-27 13:24:25 -0400] thedeeno: thoughts?
[2012-06-27 13:24:42 -0400] ashb_: have you put the keyfile in the right place on the node?
[2012-06-27 13:24:49 -0400] thedeeno: /etc/chef/
[2012-06-27 13:25:25 -0400] thedeeno: it's odd, it only seems to happen for one of my encrypted bags. I've deleted and recreated this bag, ensuring that I'm using the correct file
[2012-06-27 13:25:33 -0400] thedeeno: are there any limitations on what I can store in the bag?
[2012-06-27 13:26:20 -0400] ashb_: don't think there is anything. just to check its /etc/chef/encrypted_data_bag_secret
[2012-06-27 13:26:33 -0400] ashb_: might be worth checking that file hasn't been truncated or similar
[2012-06-27 13:30:54 -0400] thedeeno: ashb: do you know what the permissions on the secret file are supposed to be?
[2012-06-27 13:31:11 -0400] ashb: anything so long as the chef-client process can read it
[2012-06-27 13:31:13 -0400] ashb: let me check what i used
[2012-06-27 13:31:51 -0400] ashb: thedeeno: root:root 0400 for me
[2012-06-27 13:38:08 -0400] thedeeno: so odd, I've manually copied the same file to the server, checked the permissions, manually specified the path in the 'decrypt' method and _still_ nothing. It works locally too. Totally scratching my head
[2012-06-27 13:38:57 -0400] thedeeno: works locally with 'knife data bag show' that is
[2012-06-27 13:41:28 -0400] ashb: thedeeno: curious. I suggest trying the mailing list
[2012-06-27 13:51:26 -0400] kesor: can I have two cookbooks that have the same namespace for recipes?
[2012-06-27 13:52:57 -0400] kesor: more specically, the nginx cookbook has support for modules. so I want to add a nginx::passenger module that resides in a different folder from the nginx module as I don't want to store nginx in git (am using librarian).
[2012-06-27 13:54:20 -0400] drrk: e/names
[2012-06-27 14:04:56 -0400] atomic-penguin: omnibus?
[2012-06-27 14:04:56 -0400] bawt_: omnibus is a project for building full-stack packages for a variety of platforms, and is used to build the 'chef-full' packages downloaded from http://opscode.com/chef/install or with http://opscode.com/chef/install.sh
[2012-06-27 14:13:16 -0400] kesor: so only way to do it is to fork modules?
[2012-06-27 14:16:18 -0400] cakehero: how should I manage keep apt-get package repos up to date w/chef?
[2012-06-27 14:16:30 -0400] kesor: use the apt cookbook
[2012-06-27 14:16:32 -0400] cakehero: When I deploy a new machine they are out of date
[2012-06-27 14:16:34 -0400] cakehero: ok cool
[2012-06-27 14:24:21 -0400] cakehero: When I install an application using the application cookbook github fails with this result: The requested URL returned error: 401 while accessing https://github.com/dkullmann/test-repo.git/info/refs
[2012-06-27 14:25:05 -0400] kesor: you are not authorized
[2012-06-27 14:25:25 -0400] cakehero: Is that a real URL? I browse there and I can enter my github username/pass and it doesn't work
[2012-06-27 14:25:31 -0400] cakehero: but we also don't' have any tags, heh
[2012-06-27 14:25:45 -0400] cakehero: here's the actual url
[2012-06-27 14:25:52 -0400] cakehero:  https://github.com/att-innovate/mhealth.git/info/refs
[2012-06-27 14:26:05 -0400] cakehero: it's like a basic auth prompt
[2012-06-27 14:26:31 -0400] kesor: could be a bug in the cookbook
[2012-06-27 14:27:45 -0400] cakehero: okay, I'll check it out and see if it seems wrong
[2012-06-27 14:27:53 -0400] cakehero: and debug against running by hand, etc
[2012-06-27 14:28:27 -0400] cakehero: This is my first chef deployment so I'm not sure when I broke things vs. when things are broken but usually just assume I broke them =)
[2012-06-27 14:30:24 -0400] yfeldblum: cakehero, you might try using the git repository's git-type URL (git@github.com:dkullman/test-repo.git, or the url with a git:// prefix) and using a deploy key
[2012-06-27 14:30:49 -0400] cakehero: deploy key instead of my private key - right?
[2012-06-27 14:31:11 -0400] cakehero: I thought github identified me by my private key so I figured I'd give that a shot but I know a deploy key is the right way to go
[2012-06-27 14:34:10 -0400] specialsauce: ohai chefs. I'm using a handler on the chef-clients to grab run_status.updated_resources (Chef::RunStatus ) to get a list of resources that changed on run. However I can't see anything in there to see how to get at *what* changed about the resource on run. Eg if a file changed, were the permissions changed? the owner? the contents? Am I missing an easy way of getting at this data?
[2012-06-27 14:37:18 -0400] hippiehacker: specialsauce: run_status.updated_resources is added to whenever a provider for a resource sets @new_resource.updated_by_last_action(true)
[2012-06-27 14:37:46 -0400] zts: specialsauce: I don't believe that's recorded, unfortunately
[2012-06-27 14:37:56 -0400] hippiehacker: there is nothing stored about what what updated that I am aware of
[2012-06-27 14:39:01 -0400] specialsauce: ok, thanks zts hippiehacker yeah it doesn't sounds like that's included. I'll put my thinking hat on how i can do this then, thanks for the reponses
[2012-06-27 14:39:38 -0400] cakehero: Do you guys know if I should be using a tag as my revision with the application cookbook?
[2012-06-27 14:39:48 -0400] cakehero: I'm using a commit, but, idk if it's happy about that
[2012-06-27 14:47:09 -0400] kesor: I can't understand how attributes work, can someone please help? Question is: I got cookbooks/ruby/attributes/default.rb that has default[:ruby][:patch_version] = 'p125' and then in the role file I have "override_attributes": { "ruby": { "patch_version": "p194" }}  but the url still uses 125 because its defined in the same attributes/default.rb file.
[2012-06-27 14:47:20 -0400] hippiehacker: specialsauce: you could do it for your own custom providers, saving details to node.run_state.updated_resources_with_changes_included, but there isn't a clean path to do it for all providers because it's not tracked and different folks have different logic
[2012-06-27 14:48:13 -0400] hippiehacker: then process that in your handler, I it's still available at that time
[2012-06-27 14:48:30 -0400] hippiehacker: but it doesn't get saved back to the chef-server node entry
[2012-06-27 14:49:19 -0400] kesor: here is an example of my problem:  http://pastie.org/4160407
[2012-06-27 14:50:35 -0400] specialsauce: hippehacker: yep, that was my first thought, just not sure I need the information badly enough to build a house of cards on the underlying providers :-)
[2012-06-27 14:53:08 -0400] vdvluc: kesor: it seems quite weird to me that you have an attributes cookbook, with just a default.rb file. I think you want to put the default.rb file in cookbooks/ruby/attributes/
[2012-06-27 14:53:33 -0400] kesor: oh, thats a typo. sorry.
[2012-06-27 14:53:42 -0400] kesor: fixed
[2012-06-27 14:56:34 -0400] j-v-e: Hi All
[2012-06-27 14:57:02 -0400] j-v-e: So, we hit the point where we really need ACL on encrypted data bags... I'm looking for a way to solve that, and we use the open source version of Chef
[2012-06-27 14:57:52 -0400] j-v-e: Should we look into private chef ?
[2012-06-27 14:58:20 -0400] j-v-e: I would really like to avoid coming up with a hack to solve that, but I'm not sure if private chef would be the solution either
[2012-06-27 14:59:00 -0400] paulmooring: j-v-e: Any reason hosted Chef is out?
[2012-06-27 14:59:02 -0400] dstanek: when using the subversion deploy resource with the vagrant user set I'm getting an error, but if i remove that line it works and is owned by root - is that a known issue or am i doing something wrong?
[2012-06-27 14:59:54 -0400] j-v-e: paulmooring: we don't want to rely on 3rd party for provisioning, it needs to be in house
[2012-06-27 15:01:12 -0400] j-v-e: reason 1 would be that we use searches extensively, and thus the chef server transfers terabyte of data over the network every week. (that's another thing we'll be looking into optimizing)
[2012-06-27 15:01:44 -0400] paulmooring: Well there is a trial of Private Chef you can get by contacting sales, setting up Private Chef is more of a headache though
[2012-06-27 15:02:19 -0400] paulmooring: but both Private and Hosted have the same features/interface and client acts (including on data bags) is one of the features
[2012-06-27 15:02:21 -0400] j-v-e: does private chef support ACLs for encrypted data bags ?
[2012-06-27 15:02:32 -0400] j-v-e: oki
[2012-06-27 15:03:16 -0400] thedeeno: j-v-e: I'm no expert, but just theorizing here, couldn't you manage the ACL via permissions on the secret-file's? The trick would then be having the chef-client run in different user contexts.
[2012-06-27 15:03:17 -0400] paulmooring: j-v-e: the interface is mostly the same, so you could also set up a 5 free nodes account on hosted Chef if you want to see what it looks like without much effort
[2012-06-27 15:04:35 -0400] j-v-e: chef-client needs to run as root, doesn't it ?
[2012-06-27 15:04:53 -0400] thedeeno: so only 'user a' can read the secret file for decryption, but otherwise user a is a member of the root group?
[2012-06-27 15:04:59 -0400] kesor: how to manage dependent attributes with chef? say a default['ruby']['version'] that is used as part of default['ruby']['source']['url'] but I want to only define the version in a role file, so that url will change on its own  ?
[2012-06-27 15:05:00 -0400] paulmooring: j-v-e: it doesn't have to, but it's generally not very useful if it doesn't
[2012-06-27 15:05:26 -0400] j-v-e: yeah, in our case, chef-client changes the password for the root account, so it must run as root
[2012-06-27 15:05:42 -0400] paulmooring: that is to say chef-client doesn't need root but 99% of cookbooks do
[2012-06-27 15:06:15 -0400] jerem`: How to use bash ressource with user attribute loading user's environment variables ?
[2012-06-27 15:06:17 -0400] thedeeno: isn't it possible to have a user with root privleges?
[2012-06-27 15:07:12 -0400] specialsauce: does the directory resource support setting owner by UID rather than by account name does anyone know?
[2012-06-27 15:07:41 -0400] thedeeno: that is, running as this user in theory is the same as root, except you can lockdown some files to only be read by this user alone with the FS ACL.
[2012-06-27 15:08:11 -0400] thedeeno: haven't done it, but I'm not sure why it wouldn't work. You can make any user a sudoer.
[2012-06-27 15:08:41 -0400] paulmooring: thedeeno: a lot of software will speficially check for root's UID so that could be problematic
[2012-06-27 15:08:49 -0400] frank_: /2/2
[2012-06-27 15:09:18 -0400] paulmooring: and sudo would default the purpose (run `sudo whoami` to see what I mean)
[2012-06-27 15:10:28 -0400] jerem`: How to use bash ressource with a specified user loading user's environment variables in my recipe please ?
[2012-06-27 15:10:32 -0400] thedeeno: wall damn, that sucks. I'm don't know why people would write that rigidity in. If I say this user is a sudoer that should be good enough.
[2012-06-27 15:11:09 -0400] paulmooring: well sudo runs as root so if you put a hard check for root in sudo is ok
[2012-06-27 15:12:04 -0400] paulmooring: sudo isn't for escalating privileges it's for running a command as another user
[2012-06-27 15:16:19 -0400] jerem`: is it possible to run a command with a non-priviligied user with his environment variables ?
[2012-06-27 15:16:56 -0400] thedeeno: ok, but then still, why treat the user 'root' as special if other users can be set up to have equivalent permissions? I'd still say that's a mistake for software to hard check. Makes me sad.
[2012-06-27 15:19:38 -0400] kamabe_: has anyone gotten this error during a chef-client run before? https://gist.github.com/3004743  i have other machines running the same version of chef and i haven't gotten this error before
[2012-06-27 15:25:09 -0400] barefoot: kamabe_: unicode char sommewhere?
[2012-06-27 15:25:10 -0400] ddosia: hello guys, Q: could i use template resource but as a source to pick an local node file, e.g. /tmp/somefile.erb, not from mycookbook/templates/default/simefile.erb ?
[2012-06-27 15:27:35 -0400] kamabe_: barefoot: but do you think it's a chef problem or possibly something wrong with one of my cookbooks and it just looks like it's a chef problem? i've never seen the error happen in a chef run before, so i'm not sure. i also have 4 other machines with the exact same run list but with another version of chef and they don't have this problem
[2012-06-27 15:29:25 -0400] pwf: anyone successfully used application_python before? i'm getting this when it processes the gunicorn resource: NameError: undefined local variable or method `node'
[2012-06-27 15:29:47 -0400] pwf: this line: https://github.com/opscode-cookbooks/application_python/blob/master/resources/gunicorn.rb#L29
[2012-06-27 15:31:17 -0400] atomic-penguin: pwf, maybe your Ruby doesn't have a min method on that node
[2012-06-27 15:31:57 -0400] pwf: it can't find node though right, not min?
[2012-06-27 15:32:43 -0400] atomic-penguin: pwf, could be, not sure that LWRPs and node attributes can/should be mixed
[2012-06-27 15:32:54 -0400] hoover_damm: [node['cpu'] is how you reference node in resources?
[2012-06-27 15:33:04 -0400] hoover_damm: weird
[2012-06-27 15:33:31 -0400] pwf: one of my coworkers got it to work...
[2012-06-27 15:33:42 -0400] pwf: coderanger: this is your code no? any ideas what i'm fucking up?
[2012-06-27 15:33:48 -0400] barefoot: kamabe_: kamabe_ probably a gem, but I wouldnt know off the top of my head. Have you tried to google the error?
[2012-06-27 15:33:52 -0400] atomic-penguin: pwf, curious, what did he change?
[2012-06-27 15:34:13 -0400] pwf: my coworker's using the same code i am :/
[2012-06-27 15:34:16 -0400] pwf: afaik...
[2012-06-27 15:34:33 -0400] pwf: maybe he didn't check it in, or is lying about it working heh
[2012-06-27 15:34:37 -0400] atomic-penguin: pwf, well what is different?
[2012-06-27 15:35:12 -0400] pwf: mine is on a VM, his is on ec2
[2012-06-27 15:35:14 -0400] kamabe_: barefoot: yeah, i keep running across people who have this issue with bundler, but not with a chef-run. that's why i asked here, to see if anyone had seen it before. i might just try making another machine and see if it's a fluke or something.
[2012-06-27 15:37:53 -0400] cakehero: Does anyone have a working github + deploy key example using the application cookbook?
[2012-06-27 15:41:48 -0400] kamabe_: barefoot: well this was weird. i stopped the chef-client and restarted it, and now i don't get that error anymore. so odd.
[2012-06-27 15:45:07 -0400] cjs226: I'm experiencing slow LOCAL knife/chef-client runs after moving my server to another network.  for example, <knife cookbook list> on the server itself takes 15 to 25 seconds but ~2 seconds from remote servers.  knife.rb is identical other than i use localhost on the server for the url.  any ideas?
[2012-06-27 15:46:09 -0400] pwf: ah, apparently chef 0.10.4 is required to use node in the resource
[2012-06-27 15:46:19 -0400] pwf: i have 0.10.2 for some reason...
[2012-06-27 15:46:30 -0400] hoover_damm: oof
[2012-06-27 15:46:39 -0400] hoover_damm: how do people stay so out of date?
[2012-06-27 15:49:00 -0400] pwf: i think it's because i'm using the vagrant box from their site
[2012-06-27 15:49:03 -0400] pwf: which is pretty damn old
[2012-06-27 15:49:58 -0400] pwf: i think we have a 12.04 vagrant box somewhere...
[2012-06-27 15:51:17 -0400] pwf: 10.12 is out?
[2012-06-27 15:51:28 -0400] pwf: it's not on the release notes wiki page :<
[2012-06-27 15:51:29 -0400] BryanWB_: pwf: y
[2012-06-27 15:52:15 -0400] pwf: also wtf is with the image on this page... http://wiki.opscode.com/display/chef/Release+Notes
[2012-06-27 15:52:58 -0400] specialsauce: pwf: someone releasing a child, in a strong AG field. duh. :-P
[2012-06-27 15:53:56 -0400] pwf: lol... well thanks for that addition Tom Thomas, whoever you are
[2012-06-27 16:00:28 -0400] leifmadsen: I'm writing some minitest spec tests, and want to verify the contents of a file. Anyone happen to know the best way to do that? I want to make sure the contents of a file matches something I'd provide in the test
[2012-06-27 16:01:50 -0400] leifmadsen: ah looks like I can just use a regexp with must_match
[2012-06-27 16:03:47 -0400] randomautomator: hey guys is there anyway to auto increment the "version" value in metadata.rb? like say when i run knife cookbook upload?
[2012-06-27 16:05:18 -0400] juliancdunn: randomautomator: use "spork"
[2012-06-27 16:05:21 -0400] juliancdunn: (the spork plugin)
[2012-06-27 16:05:23 -0400] cakehero: The chef application cookbook lets you set an ssh_wrapper but I don't really see where that's used in the git provider: http://rubydoc.info/gems/chef/Chef/Provider/Git:clone
[2012-06-27 16:05:32 -0400] juliancdunn: it has a "bump" function
[2012-06-27 16:05:38 -0400] cakehero: and I'm getting a 401 authorized (presumably because the key isn't being used because the wrapper isn't being used) any ideas?
[2012-06-27 16:05:46 -0400] randomautomator: thx
[2012-06-27 16:12:14 -0400] barefoot: kamabe_: odd, glad its sorted :)
[2012-06-27 16:12:44 -0400] hoover_damm: pwf, someone found a picture of my father tossing me up in the air teaching me how to fly.
[2012-06-27 16:12:58 -0400] hoover_damm: pwf, great first step into understanding release notes.
[2012-06-27 16:13:18 -0400] pwf: haha
[2012-06-27 16:13:30 -0400] pwf: version 10.13: removed dependency on gravity
[2012-06-27 16:14:18 -0400] pwf: what are common reasons i could get a 401 when trying to register a new node using chef-client
[2012-06-27 16:14:43 -0400] pwf: it creates a client.pem and the client fine, but when it does a GET on the node (which doesn't exit) it gets a 401
[2012-06-27 16:14:45 -0400] hoover_damm: read it
[2012-06-27 16:15:00 -0400] pwf: it doesn't show me the response
[2012-06-27 16:15:00 -0400] hoover_damm: the http error messages provided by chef-server are generally a self-solving question
[2012-06-27 16:15:15 -0400] hoover_damm: run it in debug mode to see the response better perhaps
[2012-06-27 16:15:53 -0400] hoover_damm: also if your registering a client make sure the validation.pem is right and the clock/time on the bootstrapeee is accurate to the chef-server
[2012-06-27 16:16:17 -0400] hoover_damm: as that is one of the conditions for a positive registration is the drift within 5minutes (as far as i recall)
[2012-06-27 16:17:42 -0400] pwf: client registered fine... no node though :/
[2012-06-27 16:17:48 -0400] pwf: and no extra response info in debug mode
[2012-06-27 16:20:53 -0400] Jay_Levitt: I'm thinking of using chef to configure maybe a dozen EC2 application servers. I looked at it a few months ago, but it seemed to have an awful lot of first-class concepts that seemed overkill for <100 servers. Disagree with me!
[2012-06-27 16:21:36 -0400] cheeseplus: Jay_Levitt: I use it for less that 4
[2012-06-27 16:21:55 -0400] Jay_Levitt: cheese, what made you choose it vs. something simpler?
[2012-06-27 16:22:17 -0400] cheeseplus: do you have an example of something simpler?
[2012-06-27 16:22:42 -0400] Jay_Levitt: Well, it's horribly incomplete since I wrote it for a specific app, but: http://github.com/jaylevitt/makeitso
[2012-06-27 16:22:56 -0400] cheeseplus: I like saving time, I like having consistent server builds, and more importantly I like being able to switch my server platform with great ease
[2012-06-27 16:23:34 -0400] cheeseplus: another big factor is the community behind Chef
[2012-06-27 16:23:49 -0400] Jay_Levitt: i.e. the ability to use recipes that Just Work?
[2012-06-27 16:24:17 -0400] cheeseplus: Jay_Levitt: yep and if they don't then I can come ask people
[2012-06-27 16:24:21 -0400] cheeseplus: or fix it myself :)
[2012-06-27 16:24:44 -0400] Jay_Levitt: that's a reasonable argument.. is there a decent population using chef on Rackspace Cloud?
[2012-06-27 16:25:05 -0400] cheeseplus: from what I gather, yes
[2012-06-27 16:25:08 -0400] barefoot: yes
[2012-06-27 16:25:27 -0400] cheeseplus: Jay_Levitt: http://wiki.opscode.com/display/chef/Launch+Cloud+Instances+with+Knife
[2012-06-27 16:25:55 -0400] cheeseplus: with fog you can create EC2, Rackspace, (insert cloud provider here) with ease
[2012-06-27 16:25:57 -0400] Jay_Levitt: oh! and knife uses fog.
[2012-06-27 16:25:59 -0400] cheeseplus: servers
[2012-06-27 16:26:47 -0400] Jay_Levitt: that makes me happy since I'm thinking of moving to EC2 at some point
[2012-06-27 16:27:41 -0400] cheeseplus: you can not only change cloud providers but also distros (assuming all the cookbooks support the desired distro of course)
[2012-06-27 16:29:30 -0400] Jay_Levitt: well, that sounds promising
[2012-06-27 16:30:06 -0400] cheeseplus: the only real overhead is running the actual chef-server
[2012-06-27 16:30:17 -0400] Jay_Levitt: I'm happy w/hosted.. I think?
[2012-06-27 16:30:39 -0400] cheeseplus: oh definitely, was just going to plug the hosted chef ;)
[2012-06-27 16:45:13 -0400] jperry2: so anyone know of any tools to easily get a local chef repo running locally on a vagrant box?
[2012-06-27 16:45:35 -0400] jperry2: I found chef-hatch but it seems to fail at the end of the convergence stage and it also seems to be using an older version of chef
[2012-06-27 16:45:54 -0400] jperry2: I  may fork it and update it if I can't find anything newer or better
[2012-06-27 16:49:19 -0400] dstanek: still having trouble checking out code with subversion as a user
[2012-06-27 16:49:44 -0400] dstanek: it seems that maybe the call to popen4 is failing, but I'm not sure what's happening
[2012-06-27 16:52:43 -0400] cheeseplus: jperry2: I haven't tried going there yet, are you using a prebuilt box/
[2012-06-27 16:52:44 -0400] cheeseplus: ?
[2012-06-27 16:53:24 -0400] dstanek: almost seems as though it is running as my user, but trying to use root's .subversion settings
[2012-06-27 16:53:52 -0400] cheeseplus: I've actually had some problems with prebuilt vagrant boxes and chef (superclass mismatches)
[2012-06-27 16:54:59 -0400] specialsauce: obai chefs, thanks for the assistance today
[2012-06-27 16:55:56 -0400] cheeseplus: dstanek: the chef client is probably running as root
[2012-06-27 16:56:21 -0400] coderanger: pwf: You need newer Chef
[2012-06-27 16:56:51 -0400] kallistec: dstanek: setting the user changes the UID, but not any environment settings
[2012-06-27 16:57:00 -0400] dstanek: cheeseplus: yes, but i'm specifying the user in my recipe
[2012-06-27 16:57:24 -0400] kallistec: similar to the difference between su and su -
[2012-06-27 16:57:31 -0400] cheeseplus: ^
[2012-06-27 16:57:59 -0400] cheeseplus: I'd have the svn call source the user's environment file manually
[2012-06-27 16:58:12 -0400] dstanek: kallistec: that's interesting -
[2012-06-27 16:58:36 -0400] jperry2: @cheeseplus - I am using a lucid64box
[2012-06-27 16:58:48 -0400] dstanek: wouldn't this be a common problem with the subversion deploy resource then?
[2012-06-27 16:58:56 -0400] jperry2: comes from here
[2012-06-27 16:58:57 -0400] jperry2: http://files.vagrantup.com/lucid64.box
[2012-06-27 16:59:08 -0400] jperry2: the vagrantfile is here
[2012-06-27 16:59:09 -0400] jperry2: https://github.com/xdissent/chef-hatch-repo/blob/master/Vagrantfile
[2012-06-27 16:59:48 -0400] cheeseplus: jperry2: do you have a gist of log in which it fails?
[2012-06-27 17:00:06 -0400] jperry2: https://github.com/xdissent/chef-hatch-repo/issues/6
[2012-06-27 17:01:42 -0400] cheeseplus: jperry2: have you checked the permissions on that file inside the vagrant box?
[2012-06-27 17:02:23 -0400] cheeseplus: in case the logged error is unintentionally misleading
[2012-06-27 17:02:58 -0400] jperry2: that file isn't there
[2012-06-27 17:03:11 -0400] jperry2: on the box
[2012-06-27 17:03:17 -0400] jperry2: there are other files in there
[2012-06-27 17:03:24 -0400] jperry2: but not the one its looking for
[2012-06-27 17:05:47 -0400] cheeseplus: jperry2: is the validation pem in a .chef directory relative to your vagrantfile? (just being thorough)
[2012-06-27 17:07:09 -0400] jperry2: I don't see a validation.pem file anywhere in the repo you get from chef-hatch
[2012-06-27 17:07:30 -0400] jperry2: it says all you have to do is run the steps listed on the page then run "vagrant up chef" and the chef server should be converged
[2012-06-27 17:07:44 -0400] jperry2: see the read me page
[2012-06-27 17:07:45 -0400] jperry2: https://github.com/xdissent/chef-hatch-repo
[2012-06-27 17:08:55 -0400] cheeseplus: yea, looking at it
[2012-06-27 17:09:09 -0400] cheeseplus: would repro if I wasn't supposed to be doing other things ;)
[2012-06-27 17:12:53 -0400] cheeseplus: hrm, I'm thinking there should be a rake task or something that creates a validation pem
[2012-06-27 17:14:39 -0400] jperry2: the weird thing is it worked last week when I ran this then I revisited and it's not working
[2012-06-27 17:24:36 -0400] cheeseplus: jperry2: somehow it's not grabbing that key but I can't figure out where from
[2012-06-27 17:27:03 -0400] jperry2: It must generate a client.rb file
[2012-06-27 17:27:13 -0400] jperry2: which is dropped into /etc/chef/
[2012-06-27 17:27:25 -0400] jperry2: and probably inside that file is where validation.pem is defined?
[2012-06-27 17:27:26 -0400] cheeseplus: jperry2: I'm testing out now even though I should be doing something else ;)
[2012-06-27 17:27:36 -0400] jperry2: thank you
[2012-06-27 17:28:21 -0400] cheeseplus: at some point a validation.pem needs to get dropped in .chef/ (relative to Vagrantfile), just hope there is enough logging to help out
[2012-06-27 17:28:41 -0400] miah: hai
[2012-06-27 17:28:49 -0400] cheeseplus: jperry2: an alternative approach would be to build a new box from scratch with veewee and then go from there
[2012-06-27 17:29:07 -0400] cheeseplus: I've had more than a few problems with the pre-built boxes and chef as of late
[2012-06-27 17:29:11 -0400] jperry2: you mean build a box that has chef server already on it
[2012-06-27 17:29:12 -0400] cheeseplus: allo miah
[2012-06-27 17:29:15 -0400] jperry2: this way you just have to start it up?
[2012-06-27 17:29:29 -0400] cheeseplus: jperry2: yea, long way around but at least I can trust it
[2012-06-27 17:29:38 -0400] miah: just modify fnichol's knife-server to work with vagrant =)
[2012-06-27 17:29:49 -0400] cheeseplus: jperry2: shortcuts cease to be shortcuts when they take more time to debug :)
[2012-06-27 17:30:17 -0400] jperry2: is there a veewee template for chef server
[2012-06-27 17:30:51 -0400] ashb: jperry2: doesn't look like it. (What's veewee?)
[2012-06-27 17:31:31 -0400] cheeseplus: veewee extends vagrant by giving you a whole host of templates to build boxes from
[2012-06-27 17:31:36 -0400] ashb: ah
[2012-06-27 17:31:41 -0400] ashb: there's this https://github.com/jedi4ever/veewee/issues/18
[2012-06-27 17:31:57 -0400] jperry2: http://blog.frameos.org/2011/05/12/three-easy-steps-to-testinstall-a-chef-server-0-10/
[2012-06-27 17:32:54 -0400] miah: opscode is working on a omnibus installer for server.
[2012-06-27 17:33:18 -0400] miah: when i inquired on twitter adam said i should email him if i wanted to beta it
[2012-06-27 17:41:06 -0400] grantr: jtimberman, not sure if you're working on the openstack cookbooks, but i'll ask you anyway since mattray isnt around: when are those expected to be ready for use?
[2012-06-27 17:41:27 -0400] grantr: dont need them to be production ready, just test ready
[2012-06-27 17:46:53 -0400] cheeseplus: jperry2: it fails for me too
[2012-06-27 17:47:00 -0400] jperry2: same failure?
[2012-06-27 17:48:32 -0400] cheeseplus: exactly
[2012-06-27 17:49:08 -0400] jperry2: well I guess that is good to some degree :)
[2012-06-27 17:49:14 -0400] jperry2: meaning its not my machine/setup
[2012-06-27 17:49:28 -0400] jperry2: I'm going to try looking through the code to figure out what is going on
[2012-06-27 17:49:45 -0400] hoover_damm: grantr, might be better to ask mattray? :)
[2012-06-27 17:50:19 -0400] jperry2: who is mattray?
[2012-06-27 17:50:48 -0400] hoover_damm: just a employee at opscode
[2012-06-27 17:50:54 -0400] jperry2: oh
[2012-06-27 17:50:56 -0400] hoover_damm: he is awesome
[2012-06-27 17:51:04 -0400] jperry2: is he in this room?
[2012-06-27 17:51:27 -0400] hoover_damm: no
[2012-06-27 17:56:32 -0400] cheeseplus: he's at velocity
[2012-06-27 17:57:00 -0400] cheeseplus: jperry2: let me know if you find anything cause now I'm invested
[2012-06-27 17:57:10 -0400] jperry2: @cheeseplus - will do
[2012-06-27 17:57:25 -0400] jperry2: I forked the code so if I find something and make changes I'll let you know the fork so you can test locally as well
[2012-06-27 17:57:33 -0400] cheeseplus: always happy to repro
[2012-06-27 17:57:45 -0400] jperry2: and I can request a pull request to master
[2012-06-27 17:57:53 -0400] jperry2: I'll keep you posted
[2012-06-27 17:57:54 -0400] jperry2: t
[2012-06-27 17:57:59 -0400] jperry2: thx for the help
[2012-06-27 17:58:52 -0400] cheeseplus: np, I keep picking off random problems to increase my chef/ruby knowledge
[2012-06-27 18:06:25 -0400] pwf: ah ha, figured out my 401 error
[2012-06-27 18:06:38 -0400] pwf: old chef used fqdn for node name
[2012-06-27 18:06:43 -0400] pwf: new chef just uses the first part
[2012-06-27 18:06:51 -0400] pwf: which happens to match the name of a user on opscode
[2012-06-27 18:07:10 -0400] pwf: they're not in my organization though...
[2012-06-27 18:21:48 -0400] LinuxHorn: i have a silly question (ruby newb still)  adding an apt repo via a recipe using apt LWRP  The url is   uri "http://hwraid.le-vert.net/ubuntu", but i want to replace /ubuntu with /node[:platform] as i want this to work with their debian repo also
[2012-06-27 18:22:02 -0400] LinuxHorn: can't figure out how to call that variable in the uri line as part of the url
[2012-06-27 18:22:36 -0400] LinuxHorn: i know i can set a variable in the recipe with os_type = node[:platform]
[2012-06-27 18:22:49 -0400] swolf: can i access a definition from across cookbooks, if the referencing cookbook 'depends' on the one with the definition in it
[2012-06-27 18:23:21 -0400] LinuxHorn: but this doesn't seem to work
[2012-06-27 18:23:23 -0400] LinuxHorn:   uri "http://hwraid.le-vert.net/<%= @os_type %>"
[2012-06-27 18:25:01 -0400] hakunin: hey hoover_damm, saw my pull requests? i also was wondering when you weren't here why you didn't put config files into /etc/postgresql, instead used data dir?
[2012-06-27 18:25:30 -0400] leifmadsen: before I go ahead and write my own jenkins cookbook, anyone know if either of the existing cookbooks to deploy a jenkins server that google finds are good?
[2012-06-27 18:30:36 -0400] hakunin: LinuxHorn: ruby's interpolation syntax is like this: "foo#{some_variable}bar" so if you had some_variable="_" then "foo#{some_variable}bar" becomes "foo_bar". you can just insert it like "/path/to/#{node[:platform]}/..."
[2012-06-27 18:30:57 -0400] hakunin: LinuxHorn: don't mix it with the erb syntax, (<%= something %>) which is only used in erb templates
[2012-06-27 18:33:07 -0400] hakunin: LinuxHorn: make sure you have double quotes (") not single quotes (') around your string. interpolation only works with double quotes.
[2012-06-27 18:34:39 -0400] hakunin: being a pro rubyist makes me feel smart in this channel even though I'm only learning chef : )
[2012-06-27 18:34:54 -0400] j-v-e: when a recipe performs a search(:node,"whatever"), the chef-server returns *all* of the attributes for *all* the nodes matched by the search. Is there a way to reduce that ?
[2012-06-27 18:35:29 -0400] j-v-e: it's starting to hit our chef server pretty hard.... and most of that data is useless, we pretty much only use the ip address or one or two attributes every time
[2012-06-27 18:37:41 -0400] kevmo: I am setting an attribute in the default.rb under attributes, the value = "domain\\group"  I need the double backslash, however it is written to the template file as domain\group.  How do I get it to recognize the double backslash?
[2012-06-27 18:38:37 -0400] j-v-e: domain\\\\group ?
[2012-06-27 18:39:12 -0400] kevmo: j-v-e: thanks, I'll give it a try.  I tried \\\ but not \\\\
[2012-06-27 18:39:23 -0400] j-v-e: %q{ domain\\group }
[2012-06-27 18:39:48 -0400] j-v-e: or maybe just 'domain\\group'
[2012-06-27 18:40:19 -0400] LinuxHorn: thank hakunin
[2012-06-27 18:40:21 -0400] LinuxHorn: trying that
[2012-06-27 18:43:41 -0400] kevmo: j-v-e: \\\\ worked,  thanks
[2012-06-27 18:44:22 -0400] jjulsonmarketron: wow, just 4 eh?
[2012-06-27 18:44:25 -0400] jjulsonmarketron: :)
[2012-06-27 18:44:34 -0400] kevmo: yeah...  arhhh
[2012-06-27 18:46:03 -0400] hakunin: how about 'domain//group'.gsub('/','\\')
[2012-06-27 18:46:16 -0400] hakunin: : )
[2012-06-27 18:48:18 -0400] jelder: somebody was looking for a good elastic search cookbook yesterday. did they find one?
[2012-06-27 18:56:01 -0400] cwj: jelder: i was looking for one, i wound up forking https://github.com/dennybaa/cookbooks/tree/master/elasticsearch
[2012-06-27 18:56:22 -0400] cwj: working ok for now. were you the fellow working on the elasticsearch cookbook with plugin lwrp?
[2012-06-27 18:56:42 -0400] cwj: this is what i came up with https://github.com/needle-cookbooks/chef-elasticsearch
[2012-06-27 18:56:48 -0400] jelder: not me, i just need to get es up next week :)
[2012-06-27 18:56:56 -0400] jelder: why did you decide to fork this?
[2012-06-27 18:56:57 -0400] cwj: er, this is a better link https://github.com/needle-cookbooks/chef-elasticsearch/tree/needle
[2012-06-27 18:58:26 -0400] cwj: dennybaa's cookbook looked like the least amount of mess for me to refactor
[2012-06-27 18:58:35 -0400] cwj: compared to the ones on the community site
[2012-06-27 18:59:22 -0400] cjs226: I'm experiencing slow knife/chef-client runs on the server after moving it to another network.  for example, <knife cookbook list> on the server itself takes 15 to 25 seconds but ~2 seconds from remote servers.  knife.rb is identical other than i use localhost on the server for the url.  any ideas?
[2012-06-27 18:59:30 -0400] cwj: i flattened out the fork to remove other cookbooks, refactored to use BryanWB's ark lwrp
[2012-06-27 19:00:53 -0400] chip-: BryanWB_: I love your Ark lwrp like whoa.
[2012-06-27 19:01:34 -0400] cwj: it is definitely much easier to deal with than a chain of resource notifications
[2012-06-27 19:05:01 -0400] jelder: holy shit: i just met ark and i love it
[2012-06-27 19:18:22 -0400] j-v-e: any taker for my search() question ?
[2012-06-27 19:18:42 -0400] j-v-e: (14:34:54) j-v-e: when a recipe performs a search(:node,"whatever"), the chef-server returns *all* of the attributes for *all* the nodes matched by the search. Is there a way to reduce that ?
[2012-06-27 19:19:26 -0400] spox: j-v-e: no but i've heard that feature is in the pipeline and "coming soon"
[2012-06-27 19:21:38 -0400] j-v-e: spox: any idea if there's a ticket # for it ?
[2012-06-27 19:22:07 -0400] jameson: I think that's a common issue for chef-server right now... be less spammy
[2012-06-27 19:23:28 -0400] cwj: this looks like an interesting stop-gap for that https://github.com/opscode/whitelist-node-attrs/
[2012-06-27 19:23:45 -0400] j-v-e: that's good to hear. I want thinking on writing a custom module to performs on search per chef run that gets everything into a big hash, and then just do smart selects against that hash. Just so that my chef-runs don't need to execute 50 searches against the server, but just against a local hash.
[2012-06-27 19:23:55 -0400] spox: http://tickets.opscode.com/browse/CHEF-1068 mentions the whitelist and the internal ticket around partial search
[2012-06-27 19:23:55 -0400] j-v-e: But, if the feature is in the pipe, that's even better
[2012-06-27 19:26:36 -0400] j-v-e: I'm not sure I like the whitelist idea. I'd still want to store everything on the chef server, and just returned selected attributes on a search.
[2012-06-27 19:28:52 -0400] Majost: Hello, I am trying to install postgres via chef and I get the following error:
[2012-06-27 19:28:52 -0400] Majost: FATAL: Mixlib::ShellOut::ShellCommandFailed: gem_package[pg] (postgresql::client line 42) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2012-06-27 19:28:56 -0400] Majost: any ideas?
[2012-06-27 19:29:14 -0400] Majost: Professor Google didn't have much to say about it
[2012-06-27 19:30:50 -0400] Majost: also this: Can't find the PostgreSQL client library (libpq)
[2012-06-27 19:30:56 -0400] hakunin: Majost: first of all there must be more info in the error message
[2012-06-27 19:31:29 -0400] spox: Majost: you need to install the package dependencies on the node for pg
[2012-06-27 19:32:04 -0400] hakunin: Majost: second, hoover_damm here has been working his ass off for 3 days to make a new, well tuned postgres cookbook, so check it out at https://github.com/damm/postgresql
[2012-06-27 19:32:33 -0400] Majost: those are the key elements of the error... full output here: http://pastie.org/4161685
[2012-06-27 19:32:49 -0400] hakunin: Majost: yeah i meant the "libpq" part
[2012-06-27 19:33:24 -0400] Majost: do you know if the new one handles dependency resolution?
[2012-06-27 19:33:56 -0400] hakunin: Majost: i'm about to try integrate it into my setup and launch a ubuntu 12.04 ec2 instance with it, we'll see
[2012-06-27 19:34:05 -0400] Majost: ah cool
[2012-06-27 19:34:07 -0400] hakunin: working on setting it up
[2012-06-27 19:37:54 -0400] jameson: mm
[2012-06-27 19:40:08 -0400] jameson: anyone have opinions on embedding s3 keys into their recipes/roles?
[2012-06-27 19:40:59 -0400] jelder: jamesolson: use a databag
[2012-06-27 19:46:55 -0400] jelder: jamesolson: ideally, you should be able to share your cookbooks with any external party and they won't wind up with root on your servers
[2012-06-27 19:48:14 -0400] jelder: (aka http://en.wikipedia.org/wiki/Kerckhoffs's_principle)
[2012-06-27 19:48:49 -0400] jelder: many of my cookbooks include this line: aws = data_bag_item("aws", "credentials")[node.chef_environment]
[2012-06-27 19:49:58 -0400] cwj: encrypt dat bag
[2012-06-27 19:53:22 -0400] jelder: cwj: i don't see what encrypted data bags get you. the secret is just floating around all over the place
[2012-06-27 19:55:24 -0400] cwj: i store a lot of secrets in data bags and it helps me feel better to know that a compromise of my chef server (or in my case, hosted chef) wont yield all my secrets to an attacker
[2012-06-27 19:56:03 -0400] JasonBoxLaptop: Indeed
[2012-06-27 19:56:49 -0400] jelder: seems to me like more of a feeling about security than actual security
[2012-06-27 19:56:59 -0400] jameson: er
[2012-06-27 19:57:13 -0400] jameson: cwj: wouldn't i still need to have decrypt key on the cookbook end or something?
[2012-06-27 19:57:34 -0400] jelder: if you don't trust opscode, the game is over. what's to stop them from changing your cookbooks or something
[2012-06-27 19:57:36 -0400] cwj: yes, you have to distribute a decryption key somehow
[2012-06-27 19:57:58 -0400] cwj: i trust opscode, but i dont expect them to be perfect
[2012-06-27 19:58:04 -0400] jameson: mmm
[2012-06-27 19:58:13 -0400] jameson: I will do data_bags instead of le'roles
[2012-06-27 20:01:10 -0400] chip-: Most people keep data bags in a repo
[2012-06-27 20:01:15 -0400] jameson: data_bags is accessible by everyone role, so I guess that makes the most sense.
[2012-06-27 20:01:21 -0400] chip-: so it's really about not putting unencrypted auth data into a code repo
[2012-06-27 20:01:41 -0400] Maniacal: Can someone look at this gist and tell me what's happening?  https://gist.github.com/3006472
[2012-06-27 20:01:52 -0400] Maniacal: I'm guessing I need to escape something but can't tell what
[2012-06-27 20:02:44 -0400] Maniacal: and debug output doesn't show the command being run unfortuately.  would be nice if there were a way to tell chef-client to leave behind all those /tmp/chef-script#### files
[2012-06-27 20:02:58 -0400] chip-: that is a gnarly-ass awk statement.
[2012-06-27 20:03:07 -0400] Maniacal: ha.  yeah it is
[2012-06-27 20:03:09 -0400] jelder: Maniacal: damn. can't you use a template instead?
[2012-06-27 20:03:36 -0400] cakehero: I'm using RVM and application_ruby, but it seems that bundle is executing the wrong ruby (1.8 instead of 1.9.3) - can anyone help me figure out how I should configure this properly?
[2012-06-27 20:03:43 -0400] Maniacal: unfortuately no.  I don't have any control over it.  It get's layed down by another process
[2012-06-27 20:03:47 -0400] cakehero: or any recommendations on managing ruby versions w/a chef solo setup
[2012-06-27 20:03:58 -0400] cakehero: oh, and, rvm is the cookbook
[2012-06-27 20:04:29 -0400] jameson: Maniacal:  " -> \"
[2012-06-27 20:04:38 -0400] jameson: oh god
[2012-06-27 20:04:40 -0400] jameson: there was more
[2012-06-27 20:04:59 -0400] Maniacal: yeah.  there's a bunch in there.  so you think it's the double quotes?
[2012-06-27 20:05:17 -0400] Maniacal: I was going to just go in an excape everything but there's so much in there I wouldn't know what fixed it and what didn't
[2012-06-27 20:05:32 -0400] Maniacal: ha.  I typed "excape"
[2012-06-27 20:05:39 -0400] Maniacal: that's how my kids say it
[2012-06-27 20:06:35 -0400] jameson: I think it might be the ones in the ''
[2012-06-27 20:07:08 -0400] jameson: if you want to try to make it saner you can use \
[2012-06-27 20:07:11 -0400] jameson: and split on the lines
[2012-06-27 20:07:46 -0400] hakunin: cakehero: are you using capistrano for deploy?
[2012-06-27 20:07:49 -0400] Maniacal: well, it wordwraps in vi so I never saw it sprawled out like that until I put it in the gist.  I think I'll do that
[2012-06-27 20:07:55 -0400] cakehero: hakunin I am not
[2012-06-27 20:08:10 -0400] jameson: :3
[2012-06-27 20:08:10 -0400] cakehero: hakunin I have a Gemfile that I want to execute, but I'm using the application_ruby cookbook to deploy
[2012-06-27 20:08:52 -0400] jameson: cakehero: you don't have access to bundle in your recipe?
[2012-06-27 20:09:01 -0400] Maniacal: jamesolson: I'll play around with the quotes.  thanks for the reply.  frustrating that chef doesn't pass bash 100% correctly.  or that they haven't identified what the catches are and how to work around them
[2012-06-27 20:09:06 -0400] hakunin: cakehero: i would recommend entirely avoiding rvm or rbenv and instead going with ruby-build (a tool used in rbenv) to instsall just one ruby that you use, and have everything run on it
[2012-06-27 20:09:23 -0400] jperry2: @cheeseplus - I'm getting memory issues when the chef server starts up
[2012-06-27 20:09:30 -0400] jperry2: which I think is the problem
[2012-06-27 20:09:32 -0400] jperry2: [2012-06-27T22:08:48+02:00] INFO: Sending client(0fc4b3b8-bbd1-4c22-b8aa-2df45c916c93) to the index queue for deletion..
[2012-06-27 20:09:35 -0400] jameson: Maniacal: you can also ssh in and check logs locally
[2012-06-27 20:09:38 -0400] hakunin: cakehero: "everything" includes chef
[2012-06-27 20:10:09 -0400] cheeseplus: jperry2: o rly?
[2012-06-27 20:10:34 -0400] cheeseplus: can you just kick up the memory limits for the vagrant vm?
[2012-06-27 20:10:35 -0400] Maniacal: jameson: didn't think to check the log.  figured it mirrored what I'm seeing in stdout.  I'll check.
[2012-06-27 20:10:41 -0400] hakunin: cakehero: if you were using capistrano, roundsman does exactly that, and integrates with capistrano. you can either find a ruby-build cookbook or pick apart roundsman to make your own
[2012-06-27 20:11:08 -0400] cakehero: okay
[2012-06-27 20:11:12 -0400] cakehero: are you using it with chef?
[2012-06-27 20:11:13 -0400] hakunin: cakehero: err, not cookbook, a script that runs before chef can run
[2012-06-27 20:11:38 -0400] hakunin: cakehero: i'm using capistrano/roundsman + chef solo
[2012-06-27 20:11:56 -0400] cakehero: So you use capistrano to run chef-solo across a few machines?
[2012-06-27 20:12:03 -0400] chip-: what's roundsman?
[2012-06-27 20:12:05 -0400] cakehero: Unfortunately we are going to ditch capistrano
[2012-06-27 20:12:12 -0400] hakunin: cakehero: why?
[2012-06-27 20:12:14 -0400] chip-: I think of Cap & Chef as complementary tools
[2012-06-27 20:12:16 -0400] cakehero: and chef solo in favor of chef hosted
[2012-06-27 20:12:19 -0400] hakunin: chip-: https://github.com/iain/roundsman
[2012-06-27 20:12:23 -0400] cakehero: it's mandated by our client who uses chef hosted for a bunch of stuff already
[2012-06-27 20:12:31 -0400] chip-: Chef hosted is awesome
[2012-06-27 20:12:37 -0400] chip-: and ditching solo for it is a very good move
[2012-06-27 20:12:59 -0400] chip-: Interesting
[2012-06-27 20:13:05 -0400] chip-: but I wouldn't ditch Cap entirely for Chef
[2012-06-27 20:13:16 -0400] cakehero: well I'd like to get the recipes working with solo atm
[2012-06-27 20:13:18 -0400] hakunin: chip-: exactly, complementary. roundsman just allows me to define roles and set attributes in capistrano, all that chef does is runs runlists that capistrano dictates
[2012-06-27 20:13:18 -0400] cakehero: and then ditch
[2012-06-27 20:13:36 -0400] chip-: Rather, using a trick I picked up at #chefconf, I'm now using Chef to populate the target node for Cap jobs via a search
[2012-06-27 20:13:50 -0400] chip-: and then my cap scripts all run chef-client in the after:deploy section
[2012-06-27 20:14:09 -0400] chip-: Then code deploys are managed by cap, and config scripts and machine provisioning are managed by Chef
[2012-06-27 20:14:13 -0400] chip-: it all works together really well
[2012-06-27 20:14:17 -0400] thehar: chip-: O.o. example?
[2012-06-27 20:14:36 -0400] hakunin: cakehero: all i'm suggesting is that instead of having different rubies for chef and your app, find a way to bootstrap a server with just one ruby on which everything runs, and avoid headaches
[2012-06-27 20:14:45 -0400] cakehero: ok
[2012-06-27 20:14:46 -0400] hakunin: cakehero: and roundsman does exactly that
[2012-06-27 20:14:49 -0400] cakehero: that sounds good
[2012-06-27 20:15:07 -0400] cakehero: rvm cookbook supposedly makes everything run on 1.9.3 but I don't think it's working properly
[2012-06-27 20:15:29 -0400] chip-: oh hey
[2012-06-27 20:15:34 -0400] chip-: someone just wrote a cap extension that does this
[2012-06-27 20:15:35 -0400] chip-: https://github.com/cramerdev/capistrano-chef
[2012-06-27 20:15:35 -0400] chip-: neat
[2012-06-27 20:15:40 -0400] cakehero: oh but hakunin , I don't use capistrano
[2012-06-27 20:15:49 -0400] cakehero: so before "deploy:update_code" isn't going to affect me
[2012-06-27 20:15:57 -0400] hakunin: cakehero: this is ruby-build https://github.com/sstephenson/ruby-build  it makes simply installing a ruby easier, without any ruby-switching stuff
[2012-06-27 20:15:59 -0400] cakehero: just use the main recipe from roundsman by itself?
[2012-06-27 20:16:16 -0400] thehar: oh neat
[2012-06-27 20:16:25 -0400] hakunin: cakehero: yeah might have to cook your own
[2012-06-27 20:16:40 -0400] cakehero: I think chef-solo uses it's own ruby
[2012-06-27 20:16:44 -0400] hakunin: cakehero: you just need a bash script to execute on an emtpy server
[2012-06-27 20:16:48 -0400] cakehero: I'm not sure if ruby-build would enable me to override that
[2012-06-27 20:17:02 -0400] hakunin: cakehero: i used knife-solo before  it installs isolated ruby just for chef, i didn't like it
[2012-06-27 20:17:24 -0400] chip-: thehar: but you could get that functionality by just including the ruby gem directly from your cap deploy.rb and then using a search string to populate the role: array
[2012-06-27 20:17:33 -0400] chip-: if this works it's much better, though
[2012-06-27 20:17:49 -0400] thehar: it's a good idea
[2012-06-27 20:18:12 -0400] thehar: and databags
[2012-06-27 20:18:20 -0400] chip-: I know, right?
[2012-06-27 20:18:27 -0400] chip-: I'm so annoyed I can't hack on this for 2 weeks
[2012-06-27 20:18:29 -0400] chip-: I want to start RIGHT NOW
[2012-06-27 20:18:55 -0400] thehar: nice
[2012-06-27 20:19:11 -0400] chip-: Also emailing him to ask if he'll extend it to search on chef tags
[2012-06-27 20:19:15 -0400] chip-: instead of just roles
[2012-06-27 20:19:21 -0400] chip-: and set boundaries on environment
[2012-06-27 20:19:34 -0400] chip-:  oh nm. Proc objects. Got it.
[2012-06-27 20:23:11 -0400] thedeeno: before I waste time, templates can be put in sub directories right? that is ./templates/default/my_directory/template ?
[2012-06-27 20:25:03 -0400] hakunin: thedeeno: yes
[2012-06-27 20:25:15 -0400] hakunin: thedeeno: nginx cookbook is a good example
[2012-06-27 20:25:48 -0400] thedeeno: ty, just checkin'
[2012-06-27 20:29:41 -0400] grantr: i should publish my rbenv production setup
[2012-06-27 20:30:05 -0400] grantr: it uses ruby-build and fpm to package ubuntu ruby packages that install rbenv in system dirs
[2012-06-27 20:30:23 -0400] grantr: no need to install system ruby and it doesnt require chef
[2012-06-27 20:30:35 -0400] grantr: rbenv shims are installed in /usr/bin with alternatives
[2012-06-27 20:32:10 -0400] bradgignac: grantr: that sounds awesome
[2012-06-27 20:32:19 -0400] Maniacal: ok.  I escaped every doublequote and the single quotes.  no luck.  anyone else have a second to look at this gist:  https://gist.github.com/3006472
[2012-06-27 20:32:50 -0400] grantr: bradgignac, yeah it has been surprisingly headache free so far
[2012-06-27 20:33:14 -0400] grantr: i should clean it all up for release, i think it'd be very useful to the chef/ubuntu users out there
[2012-06-27 20:34:19 -0400] chip-: Would be to me
[2012-06-27 20:34:33 -0400] thehar: chip-: ty ... this might have been a great addition to our cap magic
[2012-06-27 20:35:14 -0400] chip-: I just found it myself!
[2012-06-27 20:35:35 -0400] chip-: I was trying to find the slide deck from the conf where I learned the trick for you, and stumbled on this instead.
[2012-06-27 20:35:39 -0400] chip-: never did find the deck.
[2012-06-27 20:40:19 -0400] grantr: chip-, the best part about it is that its totally transparent - sudo works perfectly and root as well. it works exactly the same as system ruby, but rbenv managed
[2012-06-27 20:40:47 -0400] grantr: bad part is that you have to build your own ruby packages, but we have a lwrp and build machines that handle that automatically
[2012-06-27 20:42:23 -0400] bradgignac: grantr: we're already building our own packages for other thing, so it's not big deal
[2012-06-27 20:42:37 -0400] chip-: grantr: sounds good.
[2012-06-27 20:43:01 -0400] chip-: (I am really annoyed to the point of I WOULD NEVER USE THE ENTIRE LANGUAGE AGAIN IF I COULD HELP IT by the hell of 1,000 Rubies.)
[2012-06-27 20:43:13 -0400] chip-: (and rvm. and bundler. and this. Which are all great, clever solutions that SHOULD NOT NEED TO EXIST.)
[2012-06-27 20:43:25 -0400] grantr: chip-, yeah its really annoying
[2012-06-27 20:43:51 -0400] grantr: its partly ruby's fault, partly the distro package maintainers' fault
[2012-06-27 20:44:07 -0400] chip-: Balkanization of Ruby point releases is entirely Ruby's fault.
[2012-06-27 20:44:24 -0400] cwj: rbenv <3
[2012-06-27 20:44:54 -0400] chip-: There's a resignation letter post out there somewhere from a year or so ago by one of the the Debian distro package maintainers when he quit, and his arguments are all rather sane.
[2012-06-27 20:45:38 -0400] ivey: bundler is very nice, especially when deploying multiple apps to the same server
[2012-06-27 20:47:15 -0400] grantr: yeah bundler is a lifesaver
[2012-06-27 20:50:44 -0400] ashb: Maniacal: escape $ too
[2012-06-27 20:50:57 -0400] sabooky: Could you guys point me to a good writeup of when to use chef-client/server vs using chef-solo
[2012-06-27 20:50:58 -0400] ashb: and probably the \
[2012-06-27 20:52:07 -0400] Maniacal: ashb: I'll try that too.   it was next on my list
[2012-06-27 20:52:32 -0400] ashb: $0 has special meaning in ruby
[2012-06-27 20:53:02 -0400] ashb: oh though sohuldn't get escaped in strings as its not in #{}
[2012-06-27 20:53:11 -0400] ashb: its probably the \n
[2012-06-27 20:53:20 -0400] ashb: infact yeah it looks like it is that
[2012-06-27 20:53:56 -0400] Maniacal: you're saying it's the \n?
[2012-06-27 20:54:08 -0400] ashb: i think so, yes
[2012-06-27 20:54:11 -0400] Maniacal: like I should put \\n instead?
[2012-06-27 20:54:58 -0400] ashb: give it a go
[2012-06-27 20:55:43 -0400] Maniacal: currently running with \$0 .  if that doesn't work I'll try that next
[2012-06-27 20:56:23 -0400] ashb: oh infact you'll need both
[2012-06-27 20:56:36 -0400] ashb: i think.
[2012-06-27 20:56:52 -0400] ashb: its hard to work through all the layers of escaping in my head
[2012-06-27 20:57:01 -0400] Maniacal: well, I'm trying anything and everything so I imagine I'll find it eventually
[2012-06-27 20:57:11 -0400] hakunin: hoover_damm: hey, you there? i have a couple of questions for you:)
[2012-06-27 20:57:31 -0400] ashb: I think its just the \n you need to escape (possibly all of them)
[2012-06-27 20:57:36 -0400] ashb: cos ruby is picking those up
[2012-06-27 20:57:44 -0400] hoover_damm: hakunin, was just gonna grab some more tea but yeah i am
[2012-06-27 20:57:49 -0400] ashb: $0 is fine as it's not special to ruby and is inside '' when bash gets hold of it
[2012-06-27 20:57:50 -0400] hoover_damm: hakunin, just saw your pull request, thanks for that.
[2012-06-27 20:58:19 -0400] Maniacal: ok.  it wasnt $0
[2012-06-27 20:58:22 -0400] hakunin: hoover_damm: np, so the ident and hba files  why did you put them in data and not /etc/postgresql?
[2012-06-27 20:58:35 -0400] hakunin: hoover_damm: just curious
[2012-06-27 20:58:52 -0400] miah: why are paths hardcoded at all?
[2012-06-27 20:58:52 -0400] ashb: that's the default location for them
[2012-06-27 20:59:44 -0400] hakunin: miah: you responding to me?
[2012-06-27 20:59:45 -0400] hoover_damm: hakunin, they actually have to be in both really
[2012-06-27 20:59:55 -0400] hoover_damm: hakunin, the postgresql perl goo tools kinda fuck with this
[2012-06-27 21:00:22 -0400] hoover_damm: hakunin, I have a tendancy to use pgctl from time to time and it wasn't immediately clear to me how to make it work with the way that debian did it.
[2012-06-27 21:00:39 -0400] hakunin: hoover_damm: i see, well, doesn't matter much to me
[2012-06-27 21:00:42 -0400] hoover_damm: and when debugging psql -D /etc/postgresql/... didn't work too well
[2012-06-27 21:00:59 -0400] hakunin: hoover_damm: main question, i just ran the recipe and got this: FATAL: NameError: Cannot find a resource for sysctl on ubuntu version 12.04
[2012-06-27 21:01:02 -0400] hoover_damm: ideally they should be symlinked
[2012-06-27 21:01:12 -0400] hoover_damm: hakunin, yeah grab my sysctl cookbook or replace that code for a better one
[2012-06-27 21:01:27 -0400] hakunin: hoover_damm: does your cookbook work fine?
[2012-06-27 21:01:32 -0400] hakunin: hoover_damm: for sysctl
[2012-06-27 21:01:34 -0400] hakunin: cool
[2012-06-27 21:01:35 -0400] hoover_damm: https://github.com/damm/sysctl
[2012-06-27 21:01:38 -0400] hakunin: then no need to replace code
[2012-06-27 21:01:41 -0400] hoover_damm: it's a crusty
[2012-06-27 21:01:44 -0400] hoover_damm: but it works
[2012-06-27 21:02:12 -0400] hoover_damm: hakunin, btw if you use a different volume for the WAL logs you'll gain about 80x performance
[2012-06-27 21:02:19 -0400] hoover_damm: hakunin, which is part of what that whole cookbook is about
[2012-06-27 21:02:40 -0400] hoover_damm: hakunin, m1.xlarge on ec2 i pull 2.5k TPS using pgbench
[2012-06-27 21:02:59 -0400] hoover_damm: benchmarking ec2 bores me though
[2012-06-27 21:03:00 -0400] hakunin: hoover_damm: intersting. you mean, attach a separate ebs for them?
[2012-06-27 21:03:00 -0400] hoover_damm: hehe
[2012-06-27 21:03:04 -0400] hoover_damm: yep
[2012-06-27 21:03:24 -0400] hoover_damm: hakunin, we actually do ebs raid here *twitch* so we did a raid for the data, single volume for wal
[2012-06-27 21:03:31 -0400] hoover_damm: the usage is hilarious
[2012-06-27 21:03:48 -0400] hakunin: hoover_damm: ebs raid10 i hear being suggested a lot
[2012-06-27 21:04:42 -0400] hakunin: hoover_damm: i just need shit to start working now and be backed up regularly, we have thousands customers, but nothing life-threatening about their data yet
[2012-06-27 21:04:46 -0400] Maniacal: ashb: yep, it was the \n's. what a PITA.  I know chef needs to look into the heredoc to see if there are variables to populate but that should be the extent of it's "interpretation".  It should pass it as is.
[2012-06-27 21:05:25 -0400] ashb: Maniacal: Ruby's snytax, not chef
[2012-06-27 21:05:46 -0400] ashb: Maniacal: using an inline template might be clearer? (I didn't read the scrollback to see why you couldn't use a templatE)
[2012-06-27 21:06:09 -0400] hoover_damm: hakunin, http://likens.us/Graphite_Browser-20120627-140559.jpg
[2012-06-27 21:06:21 -0400] Maniacal: the conf file is layed down by a process I don't control unfortunately.  i don't get to touch it till after.
[2012-06-27 21:06:27 -0400] hoover_damm: hakunin, md0 is our data volume, md1 is the wal
[2012-06-27 21:06:46 -0400] hoover_damm: hakunin, basically the wal logs are a significant trickle effect
[2012-06-27 21:06:55 -0400] hoover_damm: hakunin, 80x faster is likely a lowball
[2012-06-27 21:07:08 -0400] ashb: Maniacal: i mean a template for the script to execute
[2012-06-27 21:07:21 -0400] hoover_damm: hakunin, btw for some ebs raid cookbooks it can cost 500$ to run them... on just the ebs creation
[2012-06-27 21:07:24 -0400] hoover_damm: :|
[2012-06-27 21:08:09 -0400] Maniacal: well, that was an option if I couldn't get this fixed.  I assume you mean put that on-liner in as a cookbook file, lay it down and then run it
[2012-06-27 21:08:59 -0400] Maniacal: but I was annoyed this didn't work.  and if I go down that route I'll never trust the script resource and I don't want that.  I'd rather understand what the "gotcha's" are
[2012-06-27 21:09:48 -0400] erikh: /w/w 4
[2012-06-27 21:10:02 -0400] ashb: Maniacal: thats fair
[2012-06-27 21:10:57 -0400] hakunin: hoover_damm: damn, i see
[2012-06-27 21:12:06 -0400] hoover_damm: hakunin, i'll tell you what I tell most people in here who want to use Mongodb or scale... use Voxel or some metal provider
[2012-06-27 21:12:27 -0400] hoover_damm: hakunin, Amazon does provide SSD backed Ephemeral images on their HVM instances.  So you can go pretty far
[2012-06-27 21:12:34 -0400] hoover_damm: hakunin, but it can also cost you a small fortune
[2012-06-27 21:12:43 -0400] hoover_damm: you should weigh the costs properly yourself
[2012-06-27 21:12:56 -0400] hoover_damm: you'll find even managed hosting to be cheaper then Amazon for the most part
[2012-06-27 21:14:23 -0400] hakunin: hoover_damm: i completely agree, amazon's performance is abysmal for the price
[2012-06-27 21:15:37 -0400] hakunin: hoover_damm: the only reason i'm using ec2 to host is becasue im' the only sysadmin in our startup, and i'm not a sysadmin, i'm a sole ruby developer who's created our store. I have absolutely no freaking time even for what i'm doing right now, but no choice.
[2012-06-27 21:16:02 -0400] hoover_damm: hakunin, if I had more time available i'd offer help
[2012-06-27 21:16:22 -0400] hoover_damm: hakunin, unfortunately i've got my hands wrapped up with a client full time at the moment
[2012-06-27 21:17:01 -0400] hakunin: hoover_damm: it'd be great if we could talk about you setting up a few things for us (via chef recipes)
[2012-06-27 21:17:12 -0400] hoover_damm: I grew up in a engineering household so dropping emotion was easy
[2012-06-27 21:18:18 -0400] hoover_damm: hakunin, feel free to /query me your questions ... I might be slow at responding
[2012-06-27 21:19:42 -0400] Majost: hoover_damm: I am running your cookbook too -- but hitting this issue:
[2012-06-27 21:19:43 -0400] Majost: FATAL: Chef::Exceptions::CookbookNotFound: Cookbook postgresql not found. If you're loading postgresql from another cookbook, make sure you configure the dependency in your metadata
[2012-06-27 21:20:07 -0400] Majost: I do have the opscode postgresql cookbook on my chef server already
[2012-06-27 21:20:19 -0400] hakunin: Majost: they would conflict i'd think
[2012-06-27 21:20:24 -0400] hoover_damm: Majost, there's a syctl cookbook that you need.
[2012-06-27 21:20:28 -0400] hoover_damm: Majost, that you can find in my repo
[2012-06-27 21:20:35 -0400] hakunin: hoover_damm: i don't think that's his issue
[2012-06-27 21:20:43 -0400] hakunin: (at the moment)
[2012-06-27 21:20:44 -0400] Majost: I have a sysctl cookbook, but do I need yours instead?
[2012-06-27 21:20:45 -0400] hoover_damm: Majost, but shouldn't need to add postgresql to metadata.rb to depend on itself
[2012-06-27 21:21:03 -0400] hoover_damm: I wrote mine for mine... I haven't used anyone elses
[2012-06-27 21:21:08 -0400] Majost: ah
[2012-06-27 21:21:29 -0400] hoover_damm: I know it sucks and it's ugly but I haven't found the energy (or hate) to rewrite it..
[2012-06-27 21:22:08 -0400] Majost: I am not sure how sysctl would cause this error so early on though
[2012-06-27 21:23:16 -0400] Majost: this is happening when ohai is doing its thing
[2012-06-27 21:24:20 -0400] hakunin: hoover_damm: so speaking of helping my shop  all we need is a couple of recipes for redis/resque, node, and a little script we wrote on top of node. Plus some common monitoring tools setup. If you'll have any extra time we could discuss a gig.
[2012-06-27 21:28:57 -0400] hoover_damm: odd
[2012-06-27 21:29:09 -0400] hoover_damm: Majost, redis i'd suggest my cookbook
[2012-06-27 21:29:22 -0400] hoover_damm: hakunin, do you do nodejs because of statsd?
[2012-06-27 21:30:07 -0400] hoover_damm: hakunin, and resque? i'd suggest https://github.com/nevans/resque-pool
[2012-06-27 21:30:13 -0400] hoover_damm: hakunin, he's got chef cookbooks for it
[2012-06-27 21:30:27 -0400] hoover_damm: hakunin, monitoring check out sensu.
[2012-06-27 21:31:18 -0400] hakunin: hoover_damm: we use node because we're the creators of this http://github.com/kangax/fabric.js <- and it's the center of our business
[2012-06-27 21:31:31 -0400] hakunin: hoover_damm: we use server-side canvas tech to rasterize vector images
[2012-06-27 21:31:52 -0400] hoover_damm: hakunin, ahh i'd suggest honestly packaging that up
[2012-06-27 21:32:00 -0400] hoover_damm: with fpm
[2012-06-27 21:32:09 -0400] hoover_damm: hakunin, basically nodejs is a pain in the butt there's cookbooks out there
[2012-06-27 21:32:26 -0400] hakunin: hoover_damm: i had a simple script installing it via their standard shell script
[2012-06-27 21:32:30 -0400] hakunin: hoover_damm: before
[2012-06-27 21:32:59 -0400] hakunin: hoover_damm: but yeah, that's the kind of thing i'd love to have your help for
[2012-06-27 21:33:04 -0400] hoover_damm: hakunin, https://github.com/mdxp/nodejs-cookbook
[2012-06-27 21:33:16 -0400] hoover_damm: that's what we use currently
[2012-06-27 21:36:19 -0400] hakunin: it's as if everyone been writing every important cookbook in the past few weeks... how did chef exist before?
[2012-06-27 21:36:47 -0400] j-v-e: "It appears Opscode has written partial search and it should be in Chef 11 (OC-643)."  <== what does the 'OC-643' stand for ?
[2012-06-27 21:37:02 -0400] cheeseplus: ticket number
[2012-06-27 21:37:16 -0400] hakunin: j-v-e: "OpsCode-643"
[2012-06-27 21:37:43 -0400] hakunin: (i bet that was immensely helpful)
[2012-06-27 21:37:57 -0400] j-v-e: is that publicly accessible ?
[2012-06-27 21:38:46 -0400] cheeseplus: http://tickets.opscode.com/browse/COOK-643
[2012-06-27 21:38:58 -0400] cheeseplus: oops, not that one
[2012-06-27 21:39:08 -0400] j-v-e: nope :p
[2012-06-27 21:39:14 -0400] j-v-e: I'm looking for it, can't find anything
[2012-06-27 21:39:28 -0400] j-v-e: is there an ETA for chef 11 ?
[2012-06-27 21:40:04 -0400] swolf: am i doing something wrong here?  trying to use the powershell resource on a windows node:
[2012-06-27 21:40:05 -0400] swolf: [2012-06-27T15:27:26-06:00] FATAL: NameError: Cannot find a resource for powershell on windows version 6.1.7601
[2012-06-27 21:41:58 -0400] cwj: swolf: gist your recipe?
[2012-06-27 21:41:59 -0400] jessicab: swolf - do you have the powershell cookbook on the server?
[2012-06-27 21:42:30 -0400] cwj: guessing you did not include_recipe 'powershell'
[2012-06-27 21:43:12 -0400] swolf: jessicab and cwj, alas i do not.  didnt realize i needed it
[2012-06-27 21:43:16 -0400] swolf: but now, i shall get it
[2012-06-27 21:44:14 -0400] ypz: Hi, there, I am running a java app in tomcat, my java app needs a few env variables set, how do I pass these env from my app's recipe to tomcat process which is controlled by tomcat recipe ?
[2012-06-27 21:45:17 -0400] swolf: do these docs reflect it being merged into the core? http://wiki.opscode.com/display/chef/Resources#Resources-PowerShellScript
[2012-06-27 21:45:24 -0400] swolf: the powershell resource type, that is
[2012-06-27 21:45:29 -0400] moted: quick question from a noob.  I've got a definition that does lots of things, however I'm concerned that one might fail and want to ensure that other actions get run even if there is a failure.  Is there a logical way to ensure something is done in a definition?
[2012-06-27 21:48:26 -0400] hoover_damm: hakunin, irc tends to have newbies come in and as they learn more they leave as the noise level can be high
[2012-06-27 21:48:31 -0400] hoover_damm: hakunin, that's at least what I think
[2012-06-27 21:48:42 -0400] cwj: swolf: i can see why one would think so, but i dont see a powershell provider nor resource in the chef source code on github
[2012-06-27 21:48:57 -0400] cheeseplus: moted: what kind of action is it that you are expecting to fail
[2012-06-27 21:49:39 -0400] moted: cheeseplus, it's doing api calls to a service that may or may not be up, regardless I need it to finish
[2012-06-27 21:49:42 -0400] jessicab: swolf - we probably need to doc that better.. when i used it earlier this week i was on 10.12 and still needed the cookbook
[2012-06-27 21:49:57 -0400] cheeseplus: moted: there is an "ignore_failure true"
[2012-06-27 21:50:26 -0400] jelder: i'm trying to use Chef::Provider::Package::Dpkg to install a deb that i'm getting via remote_file
[2012-06-27 21:50:42 -0400] jelder: how do i pass the deb filename to it?
[2012-06-27 21:51:39 -0400] moted: cheeseplus, that's interesting.  It seems that it'll finish the entire recipe.  I don't actually want it to finish, i just want to ensure some things get run in the event of the failure and fail.
[2012-06-27 21:51:42 -0400] Majost: hoover_damm: After removing the opscode sysctl cookbook and installing yours, I seem to get the same error. Full runlog: http://pastie.org/4162353
[2012-06-27 21:52:33 -0400] cheeseplus: jelder: I'd define the filename as a variable so it can be easily passed around
[2012-06-27 21:52:37 -0400] swolf: jessicab:  ya maybe just a note about needing to get the cookbook.  i was confused.  on that note, you might specify that people can get an msi provider through the windows cookbook as well.  but i do believe based on the comments in that source that the intention is to merge that into the chef core
[2012-06-27 21:52:51 -0400] swolf: msi package provider*
[2012-06-27 21:53:06 -0400] jelder: cheeseplus: no i mean, i don't see in the docs which of those arguments gets passed to "dpkg -i #{file}"
[2012-06-27 21:53:09 -0400] moted: cheeseplus, i suppose maybe just a regular "rescue" in the block might work
[2012-06-27 21:53:25 -0400] cheeseplus: ahh, ok was a little confused there
[2012-06-27 21:54:49 -0400] jessicab: swolf - yea, im not really sure how powershell got onto this page, usually those type of resources are here btw - http://wiki.opscode.com/display/chef/Opscode+LWRP+Resources
[2012-06-27 21:54:54 -0400] j-v-e: looks like somebody forgot to update the changelog :p https://github.com/opscode/chef/blob/master/CHANGELOG
[2012-06-27 21:55:09 -0400] j-v-e: what's the current version of chef on the master branch ?
[2012-06-27 21:55:40 -0400] j-v-e: please don't reply 1 parent fafa4063f0
[2012-06-27 21:55:47 -0400] swolf: jessicab:  ahh yeah i forgot about that page.  good stuff
[2012-06-27 21:55:48 -0400] j-v-e: oops
[2012-06-27 21:56:05 -0400] j-v-e: I meant to say "please don't reply 9c0b8cf05505143b14369e32271fcb09023beed4"
[2012-06-27 21:56:29 -0400] cheeseplus: jelder: here is an example of how I install the deb package in our cookbook: https://github.com/basho/riak-chef-cookbook/blob/master/recipes/default.rb
[2012-06-27 21:57:11 -0400] jelder: oh you're at risk? densone is an old colleague of mine
[2012-06-27 21:57:18 -0400] jelder: ^basho
[2012-06-27 21:57:30 -0400] cheeseplus: yup, he's kinda sorta my boss
[2012-06-27 21:57:38 -0400] jelder: haha how's that going?
[2012-06-27 21:57:57 -0400] cheeseplus: org is technically flat but he's the closest I have to one
[2012-06-27 21:57:59 -0400] cheeseplus: so far so good
[2012-06-27 21:58:11 -0400] cheeseplus: s/good/awesome/
[2012-06-27 21:58:19 -0400] jelder: cool
[2012-06-27 22:00:38 -0400] cheeseplus: jelder: around line 80 in the cookbook you see how we grab remote file an then use the filename later for dpkg
[2012-06-27 22:01:42 -0400] jelder: cheeseplus: thanks!
[2012-06-27 22:02:01 -0400] lawrenceseattle: can you set ordering between recipes that may be optional  (i.e. not just use include?)
[2012-06-27 22:02:08 -0400] chip-: jelder: check out the ark lwrp.
[2012-06-27 22:02:12 -0400] chip-: jelder: instead of remote_file
[2012-06-27 22:02:24 -0400] chip-: It's more about tgz's than .deb's I guess
[2012-06-27 22:02:26 -0400] chip-: but man it's useful.
[2012-06-27 22:02:27 -0400] lawrenceseattle: I want to always run one install before the other of they're there
[2012-06-27 22:02:44 -0400] jelder: chip-: yeah i was about to use ark for this project but discovered that there are debs available
[2012-06-27 22:02:45 -0400] cwj: cheeseplus: would you happen to be the guy i talked to at chefconf who was (at the time) just about to start at basho? i think i asked you if you knew bryce kerely.
[2012-06-27 22:06:02 -0400] JasonF: I'm attempting (for the first time) to write my own definition for chef, and after reading the docs, I've got one built and put into the definitions/ directory, but when I try to call it from within my recipe, I get "cannot find a resource [] on ubuntu 12.04"
[2012-06-27 22:06:18 -0400] JasonF: and, when I run with debug output, I even see it load the definition
[2012-06-27 22:08:44 -0400] cheeseplus: cwj: very likely
[2012-06-27 22:08:58 -0400] cheeseplus: cwj: that was the week before I started :)
[2012-06-27 22:10:28 -0400] chip-: JasonF: Definitions are largely supplanted by LWRP's.
[2012-06-27 22:10:50 -0400] JasonF: chip-: I've been trying to find some good documention on definitions vs lwrp's
[2012-06-27 22:11:30 -0400] hoover_damm: Majost, sounds like libpq-dev wasn't installed?
[2012-06-27 22:11:49 -0400] JasonF: because I don't understand exactly how they relate -- they seem like different things, but someone implied to me you have to have a lwrp for a definition, which seems wrong from reading stuff like: http://www.devopsnotes.com/2012/02/how-to-write-good-chef-cookbook.html
[2012-06-27 22:14:01 -0400] gchristensen: hi, where can I find releasenotes for chef 12.10.0?
[2012-06-27 22:14:12 -0400] gchristensen: err... 10.12.0. my mistake
[2012-06-27 22:14:32 -0400] hoover_damm: Majost, I am using python so I know that the python egg works for postgresql
[2012-06-27 22:14:37 -0400] qhartman: If I'm working on a template for a service config, is there a clean way to have different "notify service reload" lines in the template block based on the platform aside from having a separate complete block for each one? I'm thinking some clever use of the ternary operator or something on the "notifies" line. Everything I've tried has thrown a syntax error.
[2012-06-27 22:14:40 -0400] hoover_damm: if the pg gem is having issues, it maybe related to the library or the pg gem
[2012-06-27 22:14:41 -0400] chip-: JasonF: Check out the iptables cookbook for a definition: http://community.opscode.com/cookbooks/iptables/source
[2012-06-27 22:15:02 -0400] ashb: qhartman: the name of the service shouldn't change from platform to platform
[2012-06-27 22:15:03 -0400] JasonF: chip-: that's actually exactly what I've been basing my stuff off of.
[2012-06-27 22:15:09 -0400] cheeseplus: gchristensen: http://www.opscode.com/blog/2012/06/19/chef-10-12-0-released/
[2012-06-27 22:15:19 -0400] JasonF: chip-: hence my confusion as to why I'm getting the error
[2012-06-27 22:15:25 -0400] chip-: JasonF: but the same thing could be done with an LWRP and have more flexibility
[2012-06-27 22:15:42 -0400] qhartman: ashb, oh, but it does. For example, on debian-likes ssh server is "ssh", and on redhat-likes it's "sshd".
[2012-06-27 22:16:26 -0400] qhartman: I'd even go so far as to say they are different at least as often as they are the same.
[2012-06-27 22:16:37 -0400] JasonF: chip-: this is what I've got: https://gist.github.com/e9a9be470c24ab6a56db
[2012-06-27 22:16:59 -0400] chip-: this hasn't been updated in a while, but here's firewall, which works with Ubuntu's ufw instead of rebuild-iptables: http://community.opscode.com/cookbooks/firewall/source
[2012-06-27 22:17:05 -0400] ashb: qhartman: see https://github.com/opscode-cookbooks/openssh/blob/master/recipes/default.rb
[2012-06-27 22:17:12 -0400] JasonF: apologies if the ruby is ugly, I'm learning.
[2012-06-27 22:17:17 -0400] ashb: the name chef knows it by remains the same
[2012-06-27 22:17:53 -0400] gchristensen: thank you cheeseplus
[2012-06-27 22:18:07 -0400] JasonF: chip-: looks very much like my definition could very easily be converted into LWRP?
[2012-06-27 22:18:13 -0400] chip-: JasonF: yup
[2012-06-27 22:18:34 -0400] qhartman: ashb, ah, nice, thanks for the pointer.
[2012-06-27 22:19:02 -0400] ashb: JasonF: from an error point of view I'd log what the non-numeric port was
[2012-06-27 22:19:28 -0400] ashb: raise "Non numeric port #{port.inspect} found", ArgumentError
[2012-06-27 22:19:45 -0400] JasonF: ashb: thanks for the feedback. I'd just appreciate if my code even got that far :P
[2012-06-27 22:19:53 -0400] ashb: oh its not working?
[2012-06-27 22:20:36 -0400] JasonF: ashb: my initial question was why I was getting an error when trying to use this definition
[2012-06-27 22:20:42 -0400] ashb: ah
[2012-06-27 22:21:00 -0400] JasonF: see scrollback or I can retype
[2012-06-27 22:21:37 -0400] JasonF: the recipe portion of that cookbook: https://gist.github.com/4b7ef4f2457a296caf84
[2012-06-27 22:22:21 -0400] JasonF: and I get: FATAL: NameError: Cannot find a resource for ip6tables on ubuntu version 12.04
[2012-06-27 22:23:45 -0400] j-v-e: hum, just found a recipe that uses a function called 'tagged?()'
[2012-06-27 22:23:53 -0400] j-v-e: is that something provided by chef ?
[2012-06-27 22:24:13 -0400] j-v-e: if I try it in shef, it returns undefined method `tagged?' for #<Object:0x7f12570c02b8>
[2012-06-27 22:25:33 -0400] ashb: j-v-e: no. what cookbook was it in?
[2012-06-27 22:26:03 -0400] {aaron}: hi guys, i'm trying to determine a good way to define a helper that defines a resource which can then be notified (or conversely subscribes itself)
[2012-06-27 22:26:24 -0400] {aaron}: in specific, I want an easy way to restorecon on replaced files
[2012-06-27 22:26:35 -0400] j-v-e: ashb: something wrote internally, but I can't seem to find the definition of that function
[2012-06-27 22:26:50 -0400] {aaron}: i can install a library method like: def restorecon(path) .. execute command "restorecon #{path}"
[2012-06-27 22:27:00 -0400] {aaron}: but i need to subscribe to the "calling" resource
[2012-06-27 22:27:20 -0400] {aaron}: can i simply accept the return value from a method call like: resource(:cookbook_file => "whatever") ?
[2012-06-27 22:27:25 -0400] {aaron}: it's hard to find docs on this method
[2012-06-27 22:28:27 -0400] ashb: j-v-e grep -r 'tagged'
[2012-06-27 22:29:20 -0400] j-v-e: ashb: I use ack, it's prettier. but yeah, I've done that and couldn't find it in our repos, so I figured it could be a chef function. I guess not...
[2012-06-27 22:30:44 -0400] {aaron}: e.g. https://gist.github.com/3007309 any thoughts?
[2012-06-27 22:31:23 -0400] j-v-e: If you want to test if a machine is tagged
[2012-06-27 22:31:24 -0400] j-v-e: tagged?('mytag')
[2012-06-27 22:31:30 -0400] j-v-e: http://wiki.opscode.com/display/chef/Recipes#Recipes-Tags
[2012-06-27 22:38:51 -0400] jameson: question on encrypted dat abags
[2012-06-27 22:38:57 -0400] jameson: when do you drop fo key file?
[2012-06-27 22:40:04 -0400] jameson: because, if you do it after you've run bootstrap
[2012-06-27 22:40:11 -0400] jameson: it's too late (the isntall has already begun)
[2012-06-27 22:40:28 -0400] jameson: and if you do it after, (you have to bootstrap manually)
[2012-06-27 22:40:38 -0400] hakunin: hoover_damm: sorry to poke at you again) "initdb: could not create directory "/mnt/postgresql/9.1/data": Permission denied"  should i have done something there?
[2012-06-27 22:41:12 -0400] jameson: hakunin: check perms? and you are root?
[2012-06-27 22:41:26 -0400] chip-: <3 tags
[2012-06-27 22:41:48 -0400] hakunin: jameson: i'm running his cookbook on an empty ec2 machine from scratch
[2012-06-27 22:43:26 -0400] hakunin: jameson: as ubuntu user that has sudo priv
[2012-06-27 22:45:52 -0400] {aaron}: https://gist.github.com/3007309 still not completely DRY but dynamically creating the resource looks ugly: http://comments.gmane.org/gmane.comp.sysutils.chef.user/1982
[2012-06-27 22:47:30 -0400] jameson: check the directory
[2012-06-27 22:47:41 -0400] jameson: the command is run as postgres
[2012-06-27 22:47:44 -0400] jameson: not as ubuntu
[2012-06-27 22:48:23 -0400] jameson: server_debian.rb is throwing the error at you in line 161
[2012-06-27 22:49:22 -0400] hakunin: jameson: yeah dir is created by root and then inside dir is trying to get created by postgres apparently
[2012-06-27 22:51:16 -0400] hakunin: jameson: not sure how to resolve it, especially pg_xlog seems to have created fine, any idea what should i do here?
[2012-06-27 22:51:39 -0400] hoover_damm: hakunin, weird regression
[2012-06-27 22:51:46 -0400] hoover_damm: hakunin, i'm guessing /mnt/postgresql/ needs to be created?
[2012-06-27 22:51:52 -0400] hoover_damm: hakunin, with the proper owner?
[2012-06-27 22:52:07 -0400] hakunin: hoover_damm: should the whole thing be owned by postgres
[2012-06-27 22:52:08 -0400] hakunin: ?
[2012-06-27 22:54:15 -0400] jameson: hakuin: check /etc/passwd is there a postgres user?
[2012-06-27 22:55:01 -0400] hakunin: jameson: yes
[2012-06-27 22:55:11 -0400] jameson: so any opinions on when to drop encrypted_data_bag_keys on server :|? is it really provision empty server -> drop keys -> bootstrap?
[2012-06-27 22:55:39 -0400] hoover_damm: hakunin, yes
[2012-06-27 22:55:44 -0400] hoover_damm: it should be owned by postgres
[2012-06-27 22:56:13 -0400] hakunin: hoover_damm: so... 1. create dir, 2. include_recipe 'postgres', 3. other my stuff
[2012-06-27 22:57:12 -0400] jameson: uh
[2012-06-27 22:57:16 -0400] jameson: you created the dirs?
[2012-06-27 22:57:26 -0400] hoover_damm: hakunin, https://github.com/damm/postgresql/blob/master/recipes/server_debian.rb#L153
[2012-06-27 22:57:37 -0400] hoover_damm: hakunin, drop a new statement above that to ensure the data path is created with the postgres user
[2012-06-27 22:57:45 -0400] hoover_damm: hakunin, and it's recursive
[2012-06-27 22:58:10 -0400] hoover_damm: hakunin, might break initdb and if it does you might have to omit /data
[2012-06-27 22:58:14 -0400] hoover_damm: so it's just /mnt/postgresql/9.1
[2012-06-27 22:59:21 -0400] hakunin: jameson: no the recipe did, but i guess i'm gonna have to before recipe runs to ensure it's the right user :/
[2012-06-27 22:59:36 -0400] hakunin: hoover_damm: i see so not sure why it would be owned by root then :/
[2012-06-27 22:59:59 -0400] hoover_damm: hakunin, initdb is dirty?
[2012-06-27 23:00:00 -0400] hakunin: hoover_damm: recursive broken?
[2012-06-27 23:00:23 -0400] hoover_damm: nah recusive works
[2012-06-27 23:00:29 -0400] hoover_damm: or should
[2012-06-27 23:01:14 -0400] jameson: recursive definetly works :3
[2012-06-27 23:01:23 -0400] j-v-e: how do I iterate over the keys of an encrypted data bag ?
[2012-06-27 23:01:24 -0400] hakunin: hoover_damm: ohh, you mean initdb probably created it as root...
[2012-06-27 23:01:41 -0400] j-v-e: I have this
[2012-06-27 23:01:43 -0400] j-v-e:  items = Chef::EncryptedDataBagItem.load("credentials", "#{bag}", key)
[2012-06-27 23:01:50 -0400] j-v-e: but items.each doesn't work :/
[2012-06-27 23:02:02 -0400] hakunin: hoover_damm: i forgot that initdb is responsible for creating those
[2012-06-27 23:02:09 -0400] hakunin: hoover_damm: ok will tackle it when come back, gotta run
[2012-06-27 23:02:13 -0400] j-v-e: I can print item["user"] and it works fine
[2012-06-27 23:02:15 -0400] hakunin: THANK!
[2012-06-27 23:02:17 -0400] hakunin: S
[2012-06-27 23:02:32 -0400] jameson: j-v-e: item.keys.each
[2012-06-27 23:04:14 -0400] j-v-e: undefined method `keys'
[2012-06-27 23:04:25 -0400] jameson: did you put item or items?
[2012-06-27 23:04:40 -0400] j-v-e: items
[2012-06-27 23:04:40 -0400] j-v-e:   items = Chef::EncryptedDataBagItem.load("credentials", "#{bag}", key)
[2012-06-27 23:04:40 -0400] j-v-e:   items.keys.each do |k|
[2012-06-27 23:04:41 -0400] j-v-e:     print "#{k}=#{items[k]}\n"
[2012-06-27 23:04:41 -0400] j-v-e:   end
[2012-06-27 23:04:45 -0400] miah: please no pastey
[2012-06-27 23:04:59 -0400] miah: gist / nopast / pastebin = happiness
[2012-06-27 23:04:59 -0400] j-v-e: sorry :(
[2012-06-27 23:05:27 -0400] j-v-e: btw, any good gist plugin for vim ?
[2012-06-27 23:05:36 -0400] jameson: uh
[2012-06-27 23:06:11 -0400] j-v-e: jameson: if I look at the class of items, it returns Chef::EncryptedDataBagItem
[2012-06-27 23:06:47 -0400] spox: i'm pretty sure you can .to_hash it to get a regular old hash
[2012-06-27 23:07:21 -0400] j-v-e: spox: that worked !
[2012-06-27 23:07:22 -0400] j-v-e: thanks
[2012-06-27 23:07:34 -0400] spox: j-v-e: sure
[2012-06-27 23:07:47 -0400] jameson: interesting
[2012-06-27 23:08:05 -0400] jameson: they should really all be impementing iteratable interface :(
[2012-06-27 23:08:13 -0400] jameson: or hash
[2012-06-27 23:09:23 -0400] j-v-e: that'd great if the doc could mention that
[2012-06-27 23:09:28 -0400] jameson: to_hash is just injecting everything into a native hash object ~_~
[2012-06-27 23:09:46 -0400] j-v-e: I could still access the keys one by one, but that requires knowing the key beforehand
[2012-06-27 23:11:17 -0400] jameson: chef docs, need work :(
[2012-06-27 23:14:23 -0400] j-v-e: honestly, since you guys are pretty active on IRC, it's not really a big deal that the doc is incomplete
[2012-06-27 23:14:40 -0400] j-v-e: but without irc... that'd be tough
[2012-06-27 23:14:47 -0400] jameson: yeah, but not everyone likes to come into irc... (but then you wouldn't be a dev-ops...)
[2012-06-27 23:15:02 -0400] jameson: maybe opscode did it on purpose to increase irc traffic :P
[2012-06-27 23:17:41 -0400] j-v-e: credentials = {}
[2012-06-27 23:17:41 -0400] j-v-e: node.tags.each do |tag|
[2012-06-27 23:17:41 -0400] j-v-e:   credentials[tag] = {}
[2012-06-27 23:17:41 -0400] j-v-e:   bag = "#{tag}-#{node.chef_environment}"
[2012-06-27 23:17:41 -0400] j-v-e:   key = Chef::EncryptedDataBagItem.load_secret("/etc/chef/keys/#{bag}.key")
[2012-06-27 23:17:42 -0400] j-v-e:   items = Chef::EncryptedDataBagItem.load("credentials", "#{bag}", key).to_hash
[2012-06-27 23:17:42 -0400] j-v-e:   items.keys.each do |k|
[2012-06-27 23:17:42 -0400] j-v-e:     unless k == 'id'
[2012-06-27 23:17:43 -0400] j-v-e:       credentials[tag][k] = items[k]
[2012-06-27 23:17:43 -0400] j-v-e:     end
[2012-06-27 23:17:44 -0400] j-v-e:   end
[2012-06-27 23:17:44 -0400] j-v-e: end
[2012-06-27 23:17:45 -0400] j-v-e: credentials.keys.each do |tag|
[2012-06-27 23:17:45 -0400] j-v-e:   print "[#{tag}]\n"
[2012-06-27 23:17:46 -0400] j-v-e:   credentials[tag].keys.each do |k|
[2012-06-27 23:17:46 -0400] j-v-e:     print "\t#{k} = #{credentials[tag][k]}\n"
[2012-06-27 23:18:15 -0400] j-v-e: I've been copying and pasting between vim and shef.... that's an end of the day copy paste fail :(
[2012-06-27 23:18:52 -0400] ClemSF: I'm using the nagios cookbook from opscode and changed the name of the cookbook and it's references within it to nagios-corp.   In doing this during a chef-client run, I get an exception saying it can't find the LWRP nagios_nrpecheck on ubuntu version 10.04.
[2012-06-27 23:19:07 -0400] ClemSF: Looking at the recipes, there's not specific case to anything but case platform for debian, ubuntu.
[2012-06-27 23:19:29 -0400] ClemSF: When I change the cookbook name back to nagios and the references within the cookbook, it works just fine.
[2012-06-27 23:19:29 -0400] ashb: ClemSF: LWRP are named #{cookbookname}_#{resource_name}
[2012-06-27 23:19:43 -0400] ashb: i.e. nagios_nrpecheck is cookbooks/nagios/resources/nrpecheck.rb
[2012-06-27 23:19:55 -0400] jameson: j-v-e: paasstteeebiinnn
[2012-06-27 23:19:56 -0400] j-v-e: alright, that day is meant to end so I stop doing stupid copy/paste....
[2012-06-27 23:20:07 -0400] jameson: oh
[2012-06-27 23:20:12 -0400] jameson: oh u
[2012-06-27 23:20:13 -0400] j-v-e: jameson: sorry, I've been copying and pasting between vim and shef.... that's an end of the day copy paste fail :(
[2012-06-27 23:20:15 -0400] ClemSF: oh snap
[2012-06-27 23:20:34 -0400] jameson: ClemSF: I lost about an hour to that yesterday
[2012-06-27 23:20:38 -0400] jameson: it's like a line in the LWRP docs
[2012-06-27 23:20:42 -0400] ClemSF: lulz
[2012-06-27 23:21:00 -0400] ashb: its a wiki - edit it :)
[2012-06-27 23:21:04 -0400] j-v-e: EOD. thanks all.
[2012-06-27 23:21:56 -0400] thehar: sweet. i'm doing that right now
[2012-06-27 23:22:04 -0400] thehar: i was just trying to help ClemSF and headbanging
[2012-06-27 23:22:09 -0400] ClemSF: thanks ashb !
[2012-06-27 23:22:38 -0400] jameson: ashb: but.. but... I have to make an account
[2012-06-27 23:22:45 -0400] ashb: heh
[2012-06-27 23:23:13 -0400] thehar: oh LWRP
[2012-06-27 23:24:33 -0400] jameson: oh u
[2012-06-27 23:28:33 -0400] tony_: hello everyone
[2012-06-27 23:28:43 -0400] tony_: I'm getting the following error: ERROR: Excon::Errors::BadRequest: Expected([200, 203]) <=> Actual(400 Bad Request)
[2012-06-27 23:28:55 -0400] tony_: when i request to see a list of my rackspace servers
[2012-06-27 23:29:02 -0400] tony_: as follow: knife rackspace server list
[2012-06-27 23:29:17 -0400] tony_: anyone know what might be going on here?
[2012-06-27 23:29:28 -0400] tony_: i can view client list and node list fine
[2012-06-27 23:29:34 -0400] thehar: i blew rackspace's cloud away
[2012-06-27 23:30:38 -0400] jameson: O_o
[2012-06-27 23:30:46 -0400] thehar: kidding. i don't know.
[2012-06-27 23:30:52 -0400] thehar: it's wednesday.
[2012-06-27 23:30:54 -0400] jameson: tony_: node and client list lives on the chef server...
[2012-06-27 23:31:11 -0400] ashb: client/node list and rackspace list are independent fetures
[2012-06-27 23:31:21 -0400] tony_: so it's a problem on rackspace' end?
[2012-06-27 23:31:27 -0400] ashb: or with your knife config
[2012-06-27 23:31:34 -0400] jameson: so you are not giving the rackspace keys, or there is something wrong with the gem
[2012-06-27 23:31:49 -0400] jameson: more likely what ashb said
[2012-06-27 23:31:56 -0400] tony_: hmm, I didn't change the permision key or anything
[2012-06-27 23:32:06 -0400] tony_: but i'll look into that
[2012-06-27 23:32:06 -0400] ashb: did you specify it? has it ever worked?
[2012-06-27 23:33:39 -0400] williamherry: which is the better way to install chef-server on centos6.2, rubygem-chef-server or from source
[2012-06-27 23:33:40 -0400] tony_: yeah, it's been working fine
[2012-06-27 23:33:41 -0400] williamherry: ?
[2012-06-27 23:33:43 -0400] tony_: for the past few weeks
[2012-06-27 23:34:02 -0400] ashb: no idea. likely is something their end then
[2012-06-27 23:34:07 -0400] ashb: but not using RS cloud I couldn't say
[2012-06-27 23:34:14 -0400] tony_: i'm going to reinstall the gem
[2012-06-27 23:34:16 -0400] tony_: thanks guys
[2012-06-27 23:35:31 -0400] monvillalon: Is there a way to delay to when chef finishes is thing?
[2012-06-27 23:35:41 -0400] ashb: to what end?
[2012-06-27 23:35:58 -0400] thehar: add sleep?
[2012-06-27 23:37:10 -0400] Twirrim: williamherry: I've been pulling it from gems rather than trusting the packages.
[2012-06-27 23:37:23 -0400] ashb: monvillalon: step back: what are you trying to achieve?
[2012-06-27 23:38:49 -0400] williamherry: Twirrim, thanks,
[2012-06-27 23:39:13 -0400] monvillalon: ashb: :) I'm testing with vagrant and figured out a way to use a cache using polipo ( like squid ) to accelerate my testing. I already added some code that automatically sets the proxy server, however it would be nice if after chef runs it can clear it out
[2012-06-27 23:39:23 -0400] monvillalon: ashb: not necessary just nice
[2012-06-27 23:39:40 -0400] ashb: and what do you need a delay for?
[2012-06-27 23:40:14 -0400] ashb: can you not just have the clear as the last recipe in the run list?
[2012-06-27 23:40:31 -0400] cakehero: how would i chef to run apt-get upgrade?
[2012-06-27 23:40:33 -0400] monvillalon: ashb: to stop the service on the machine, as to not to interfere
[2012-06-27 23:40:34 -0400] ashb: or you can do it as a success notification handler
[2012-06-27 23:40:45 -0400] ashb: cakehero: apt cookbook
[2012-06-27 23:40:53 -0400] cakehero: but that doesn't have upgrade, just update
[2012-06-27 23:41:02 -0400] monvillalon: ashb: that makes sense i can make a start_cache and an end_cache recipe :)
[2012-06-27 23:41:05 -0400] ashb: oh upgrade - what does that even do?
[2012-06-27 23:41:11 -0400] cakehero: upgrade packages on the system
[2012-06-27 23:41:12 -0400] monvillalon: ashb: some times my mind goes wild :)
[2012-06-27 23:41:25 -0400] ashb: monvillalon: my cardboard cutout services are cheap luckily ;)
[2012-06-27 23:41:26 -0400] williamherry: I alway meet this error with centos 5.x : Cipher is not a module
[2012-06-27 23:41:32 -0400] cakehero: I think I only need to run it for initial provisioning
[2012-06-27 23:41:34 -0400] monvillalon: ashb: :)
[2012-06-27 23:41:54 -0400] jameson: monvillalon: that's wild
[2012-06-27 23:41:59 -0400] cakehero: I doing all this to get the system to use ruby 1.9.3 when 1.8 is installed by default
[2012-06-27 23:42:03 -0400] cakehero: so I'm also open to other methods
[2012-06-27 23:42:09 -0400] cakehero: the ruby RVM cookbook wasn't working for me
[2012-06-27 23:42:11 -0400] ashb: cakehero: i'd leave system ruby alone
[2012-06-27 23:42:22 -0400] ashb: and install another ruby for your apps (rvm, rbenv etc)
[2012-06-27 23:42:34 -0400] cakehero: ashb maybe i'll try the rbenv
[2012-06-27 23:42:34 -0400] monvillalon: jameson: Im loosing a lot of time waiting to download packages over and over again, its driving me mad
[2012-06-27 23:42:36 -0400] jameson: monvillalon: you could just do bash "" do code "apt-get upgrade -y" end
[2012-06-27 23:42:36 -0400] cakehero: rvm wasn't working well
[2012-06-27 23:42:46 -0400] cakehero: ashb have you don't this on your chef deployment?
[2012-06-27 23:42:46 -0400] jameson: monvillalon: then you have an AMI problem
[2012-06-27 23:42:57 -0400] ashb: cakehero: upgrade? no
[2012-06-27 23:43:01 -0400] cakehero: ashb the ruby stuff
[2012-06-27 23:43:07 -0400] jameson: you should be using a more updated image if that is an issue
[2012-06-27 23:43:20 -0400] ashb: oh ruby. yeah my apps are on 1.9.2 via RVM and chef is still on system 1.8
[2012-06-27 23:43:23 -0400] jameson: update -> download lists, upgrade -> packages
[2012-06-27 23:43:27 -0400] ashb: I'd recomend against RVM now though
[2012-06-27 23:43:28 -0400] cakehero: ashb can you tell me your setup?
[2012-06-27 23:43:33 -0400] cakehero: aiyah
[2012-06-27 23:43:39 -0400] cakehero: I've been having trouble getting it to work with RVM
[2012-06-27 23:43:40 -0400] jameson: cakehero: i was told that chef runs fine on 1.9.3
[2012-06-27 23:43:51 -0400] ashb: yeah RVM for production is notreally ideal
[2012-06-27 23:43:53 -0400] jameson: for the daring
[2012-06-27 23:43:54 -0400] monvillalon: jameson: :) I'm just debugging using vagrant, and I have to install solr, php , nginx from source, to make sure everything works I delete the machine constantly, I just want to accelerate it a little via a web proxy, just for testing
[2012-06-27 23:44:01 -0400] cakehero: ashb what alternative do you suggest
[2012-06-27 23:44:03 -0400] ashb: rbenv or even just ruby-build (by the rbenv guy) is much easier
[2012-06-27 23:44:21 -0400] cakehero: ashb is there a cookbook or just do it manually in my own recipe
[2012-06-27 23:44:22 -0400] cakehero: ?
[2012-06-27 23:44:28 -0400] ashb: cakehero: i haven't looked
[2012-06-27 23:44:30 -0400] cakehero: k
[2012-06-27 23:44:33 -0400] ashb: might well be one out there somewhere
[2012-06-27 23:44:36 -0400] cakehero: https://github.com/RiotGames/rbenv-cookbook
[2012-06-27 23:44:48 -0400] monvillalon: jameson: of course solr is 70MB so I stare at my screen a lot
[2012-06-27 23:44:56 -0400] jameson: monvillalon: if you want to make the base system, you can get to the install point
[2012-06-27 23:44:59 -0400] jameson: and the repackage the image
[2012-06-27 23:45:02 -0400] jameson: *then
[2012-06-27 23:45:33 -0400] cakehero: So the problem I had ashb  is that everything worked except the application_ruby bundle install - do you use that?
[2012-06-27 23:45:38 -0400] monvillalon: jameson: I understand that, this is for an automated testing setup
[2012-06-27 23:45:39 -0400] cakehero: or do you use bundle install w/chef?
[2012-06-27 23:45:54 -0400] monvillalon: jameson: Im not misguided :) but thanks
[2012-06-27 23:46:05 -0400] jameson: you could upload the ami to aws :3
[2012-06-27 23:46:06 -0400] ashb: cakehero: i modified the applicaiton cookbook from about 2 years ago to work with RVM and bundle
[2012-06-27 23:46:15 -0400] jameson: and then you can have your updated image there..
[2012-06-27 23:46:29 -0400] jameson: or you can put it into a cookbook, and let it dpkg for you
[2012-06-27 23:46:40 -0400] mbiven: monvillalon: apt-cache might be what you're lookign for
[2012-06-27 23:46:40 -0400] cakehero: ashb k, it might be just as easy for me to do something similar
[2012-06-27 23:47:00 -0400] ashb: g/l. its 0046 am so i'm off
[2012-06-27 23:47:24 -0400] mbiven: monvillalon: you could run the apt-cache on the host and have the vm in vagrant use that
[2012-06-27 23:48:03 -0400] monvillalon: mbiven: thanks ill look into it, but I'm using redhat :(
[2012-06-27 23:48:13 -0400] Twirrim: Is there any way offical way to make chef set the hostname on an ec2 instance rather than just put the chosen name in the client.rb, or do I just need to do some shell foo?
[2012-06-27 23:49:42 -0400] monvillalon: Twirrim: I don't think there is an official way, however I use a shell script that uses curl to get the public hostname for the ec2 instance
[2012-06-27 23:50:28 -0400] monvillalon: Twirrim: something like curl -s http://169.254.169.254/latest/meta-data/public-hostname > /etc/hostname
[2012-06-27 23:58:01 -0400] erratic: cron "noop" do
[2012-06-27 23:58:03 -0400] erratic: whats noop
[2012-06-27 23:58:09 -0400] erratic: I dont think I ever checked
[2012-06-27 23:58:23 -0400] erratic: wait
[2012-06-27 23:58:25 -0400] erratic: nevermind
[2012-06-27 23:58:26 -0400] erratic: # Chef Name: noop
[2012-06-27 23:58:30 -0400] erratic: I see what it did there

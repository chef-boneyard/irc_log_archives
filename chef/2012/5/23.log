[2012-05-23 00:01:56 -0400] timsmith: hey is matt ray around?
[2012-05-23 00:04:55 -0400] hoover_damm: miah, reason you defaulted to ext3?
[2012-05-23 00:05:54 -0400] miah: i generally default to xfs, but ext3 seems to be the real default
[2012-05-23 00:06:05 -0400] miah: ext4 isn't in as many os's yet
[2012-05-23 00:06:57 -0400] hoover_damm: os's or distros?
[2012-05-23 00:07:13 -0400] hoover_damm: ext4 should be in any modern distro
[2012-05-23 00:07:44 -0400] hoover_damm: people are willing to run ext3 with an old kernel that doesn't give you filesystem stability
[2012-05-23 00:07:50 -0400] hoover_damm: see no evil, hear no evil
[2012-05-23 00:07:58 -0400] hoover_damm: very simple
[2012-05-23 00:08:38 -0400] miah: iirc, there are many distros' that still don't include ext4 support. the distros i generally use do have it, but i want to ensure maximum interest and get people to commit back =)
[2012-05-23 00:08:43 -0400] miah: ext3 is lowere barrier to entry
[2012-05-23 00:09:09 -0400] hoover_damm: if your distro doesn't support ext4, you should slap yourself and call yourself nancy
[2012-05-23 00:09:35 -0400] hoover_damm: ext3 was stabalized october 21st of 2008
[2012-05-23 00:09:44 -0400] hoover_damm: s/ext3/ext4
[2012-05-23 00:10:25 -0400] erikh: some distros take the stance that stable is more important than new
[2012-05-23 00:10:27 -0400] miah: you have the option to change it in this provider so.. what does it matter what the default is?
[2012-05-23 00:10:29 -0400] hoover_damm: there was a whole large debacle on filesystem inconsistency before 2.6.30
[2012-05-23 00:10:38 -0400] hoover_damm: that lots of people tried to downplay as bs
[2012-05-23 00:10:41 -0400] hoover_damm: I call bs on their bs
[2012-05-23 00:10:49 -0400] erikh: it's not my style but it's not a big deal if it works for others
[2012-05-23 00:10:54 -0400] erikh: also what miah said
[2012-05-23 00:11:08 -0400] hoover_damm: my point is that ext4 is a fine default
[2012-05-23 00:11:12 -0400] hoover_damm: redhat6 should support it
[2012-05-23 00:11:17 -0400] hoover_damm: later versions of el5 support ext4
[2012-05-23 00:11:22 -0400] miah: yes, but still lots of RHEL4/5 shops out there
[2012-05-23 00:11:35 -0400] hoover_damm: and rhel5 supports it :)
[2012-05-23 00:11:50 -0400] hoover_damm: sure there's people who run rhel3, but there's also people who run slackware 3.0
[2012-05-23 00:12:04 -0400] miah: .. im not sure what the point of this discussion is?
[2012-05-23 00:12:22 -0400] miah: sure, i could make it ext4 by default, i could just as easily make it xfs.
[2012-05-23 00:12:24 -0400] hoover_damm: miah, my point was you should have done ext4, that's all... the fact it turned into a conversation
[2012-05-23 00:12:27 -0400] hoover_damm: is intersting
[2012-05-23 00:12:38 -0400] hoover_damm: it could be xfs, or jfs, or poo
[2012-05-23 00:12:42 -0400] erikh: you're nerd raging over a default
[2012-05-23 00:12:44 -0400] erikh: kind of silly.
[2012-05-23 00:12:47 -0400] hoover_damm: I just thought ext3 was a bad default
[2012-05-23 00:12:54 -0400] hoover_damm: very bad
[2012-05-23 00:13:04 -0400] miah: well. this is rough draft. nothing functional in here yet =)
[2012-05-23 00:13:30 -0400] hoover_damm: i'm caring over data consistency
[2012-05-23 00:13:50 -0400] hoover_damm: and yeah I rage over that totally.  I'm tired of people saying 'filesystem inconsistency is not my problem'
[2012-05-23 00:14:14 -0400] hoover_damm: it shows a total lack of a clue
[2012-05-23 00:14:20 -0400] hoover_damm: and a lack of wanting a clue
[2012-05-23 00:14:38 -0400] hoover_damm: learning is what makes me wake up every day
[2012-05-23 00:14:56 -0400] doomviking: reiserfs - for when you want to commit murder
[2012-05-23 00:15:03 -0400] doomviking: (too soon)
[2012-05-23 00:15:51 -0400] hoover_damm: doomviking, be sure to configure your gpg key in git so you can sign that git commit and enure that the police know that you commited the crime.
[2012-05-23 00:16:02 -0400] doomviking: :)
[2012-05-23 00:16:21 -0400] hoover_damm: it works
[2012-05-23 00:16:47 -0400] doomviking: yes, damn fine fs. shame about Hans though.
[2012-05-23 00:16:52 -0400] hoover_damm: totally
[2012-05-23 00:17:15 -0400] hoover_damm: It's a shame that a filesystem was brought down in the end because of a man's own selfish behavior and desire to control another persons life
[2012-05-23 00:18:27 -0400] doomviking: man. the wiki on him and his time in prison.
[2012-05-23 00:18:32 -0400] doomviking: http://en.wikipedia.org/wiki/Hans_Reiser
[2012-05-23 00:19:11 -0400] hoover_damm: sounds like he wants a new trial
[2012-05-23 00:19:17 -0400] hoover_damm: gotten beaten up a few times
[2012-05-23 00:19:18 -0400] erikh: what criminal doesn't
[2012-05-23 00:19:19 -0400] hoover_damm: :(
[2012-05-23 00:19:27 -0400] doomviking: yeah san quentin
[2012-05-23 00:19:34 -0400] doomviking: f u c k e d
[2012-05-23 00:19:48 -0400] hoover_damm: he looks hardcore to me
[2012-05-23 00:19:50 -0400] hoover_damm: lol
[2012-05-23 00:19:55 -0400] doomviking: haha
[2012-05-23 00:20:13 -0400] miah: *cough* http://en.wikipedia.org/w/index.php?title=Comparison_of_file_systems&oldid=209260528#Features
[2012-05-23 00:20:26 -0400] hoover_damm: lol
[2012-05-23 00:20:29 -0400] doomviking: oh my god
[2012-05-23 00:20:31 -0400] hoover_damm: i remember that
[2012-05-23 00:20:39 -0400] doomviking: awful
[2012-05-23 00:20:44 -0400] hoover_damm: how long did that edit stay up?
[2012-05-23 00:21:28 -0400] miah: it was added/removed a bunch throughout that year
[2012-05-23 00:21:37 -0400] hoover_damm: a day or two
[2012-05-23 00:21:38 -0400] hoover_damm: not bad
[2012-05-23 00:24:55 -0400] hoover_damm: miah, fwiw mkfs defaults to ext2
[2012-05-23 00:24:56 -0400] hoover_damm: cry
[2012-05-23 00:25:43 -0400] miah: ya
[2012-05-23 00:25:49 -0400] yfeldblum: dhh nerd raged over defaults ... and rails was born
[2012-05-23 00:25:56 -0400] miah: lols
[2012-05-23 00:26:18 -0400] yfeldblum: nerd raging over defaults can lead to lots of people just using good modern defaults
[2012-05-23 00:27:28 -0400] hoover_damm: basically things don't change until someone changes it
[2012-05-23 00:27:48 -0400] hoover_damm: see a problem? file a ticket? have it happen again and you din't file the ticket? only you have yourself to blame
[2012-05-23 00:28:00 -0400] yfeldblum: php doesn't change until dhh makes rails and suddenly there are 5 "rails clones in php"
[2012-05-23 00:28:30 -0400] hoover_damm: yfeldblum, when I worked for Engine Yard I had peers that had written 2 rails clones in php :D
[2012-05-23 00:28:50 -0400] hoover_damm: and they have the cakephp people on their payroll now
[2012-05-23 00:29:04 -0400] hoover_damm: the day they picked up the cakephp guys ..
[2012-05-23 00:29:08 -0400] yfeldblum: really?
[2012-05-23 00:29:12 -0400] hoover_damm: really
[2012-05-23 00:29:16 -0400] yfeldblum: orchestra or something else
[2012-05-23 00:29:21 -0400] hoover_damm: yep Orchestra
[2012-05-23 00:29:29 -0400] hoover_damm: they wrote Cakephp and then Lithium
[2012-05-23 00:42:00 -0400] mehlah: Is it true, that a node registered as a client, has access to all the cookbooks in the chef server ?
[2012-05-23 00:42:28 -0400] mehlah: or, only cookbooks applied to this node through roles or wathever ?
[2012-05-23 00:44:17 -0400] simonjj: if I see this "domain.length" in an attribute file, where does this come from (Ohai) ?
[2012-05-23 00:49:44 -0400] yfeldblum: yes, every client can fetch all info about all items in the chef-server (unless you're using hosted-chef or private-chef, where you can define ACLs)
[2012-05-23 00:56:09 -0400] mehlah: thanks yfeldblum
[2012-05-23 01:23:16 -0400] mehlah: Something wrong with launching 4 knife server create at the same time ?
[2012-05-23 01:23:29 -0400] mehlah: My chef server returns 500
[2012-05-23 01:23:46 -0400] mehlah: for 3 nodes
[2012-05-23 05:28:02 -0400] BryanWB_: ohai chefs!
[2012-05-23 05:33:48 -0400] jaimeg5002: hey fellas, does anybody has a combo Spacewalk + Chef up and running?
[2012-05-23 05:34:04 -0400] jaimeg5002: (have)
[2012-05-23 05:34:10 -0400] BryanWB_: nope
[2012-05-23 05:34:29 -0400] BryanWB_: do u just want to push updates w/ spacewalk?
[2012-05-23 05:34:38 -0400] BryanWB_: or do u want to template files?
[2012-05-23 05:35:03 -0400] martinisoft: for sharing cookbooks, is it better to have a single repo per cookbook or a collection repo?
[2012-05-23 05:35:27 -0400] BryanWB_: martinisoft: single repo
[2012-05-23 05:35:39 -0400] martinisoft: cool, checking :)
[2012-05-23 05:35:46 -0400] BryanWB_: martinisoft: bit more complicated but makes it easier to pull in changes from others
[2012-05-23 05:35:58 -0400] martinisoft: good point
[2012-05-23 05:36:12 -0400] martinisoft: going to be sharing a few cookbooks so thats why I am asking
[2012-05-23 05:36:32 -0400] jaimeg5002: BryanWB_ I'm just getting started with Chef and I'm thinking to deploy Spacewalk until I'm operational with Chef and then maybe they can both coexist nicely
[2012-05-23 05:36:34 -0400] BryanWB_: or from yourself if work on multiple machines, also then u don't have to worry about keeping them all in sync
[2012-05-23 05:37:01 -0400] BryanWB_: jaimeg5002: what do u want to use spacewalk for? just pushing updates or for managing configs?
[2012-05-23 05:37:08 -0400] jaimeg5002: configs mainly
[2012-05-23 05:37:14 -0400] jaimeg5002: (for now)
[2012-05-23 05:37:27 -0400] BryanWB_: jaimeg5002: chef dude, chef, it's not that hard, spacewalk will be more painful
[2012-05-23 05:37:33 -0400] BryanWB_: and just slow u down
[2012-05-23 05:38:20 -0400] BryanWB_: the atomic-penguin has solved most rhel related problems
[2012-05-23 05:38:29 -0400] BryanWB_: so u and i don't have to
[2012-05-23 05:38:40 -0400] jaimeg5002: point taken, I might be trying over estimating the time it's going to take me to get Chef up and running
[2012-05-23 05:39:03 -0400] BryanWB_: u can get simple stuff running quickly
[2012-05-23 05:39:14 -0400] BryanWB_: managing _everything_ can take some time
[2012-05-23 05:40:40 -0400] jaimeg5002: right now I just want to end the crazyness of documenting configs in static pages "excel" style
[2012-05-23 05:40:51 -0400] BryanWB_: y, fuck that
[2012-05-23 05:41:04 -0400] BryanWB_: jaimeg5002: chef is your buddy
[2012-05-23 05:41:53 -0400] BryanWB_: i been there
[2012-05-23 05:42:46 -0400] jaimeg5002: yeah I'm convinced it will but I'm still looking at the beast from the distance i.e. the documentation =)
[2012-05-23 05:43:02 -0400] BryanWB_: it's not that hard, and we're here to help ;)
[2012-05-23 05:45:17 -0400] jaimeg5002: so the atomic-penguin cookbooks are the ones I should be looking into for rhel/centos/SL ?
[2012-05-23 05:49:07 -0400] BryanWB_: yup, and he is the one to pester
[2012-05-23 05:49:14 -0400] BryanWB_: he is one smart birt
[2012-05-23 05:49:19 -0400] BryanWB_: s/birt/bird/
[2012-05-23 05:56:26 -0400] miah: hi
[2012-05-23 05:57:14 -0400] BryanWB_: miah: hey, how r booboo and smokey?
[2012-05-23 05:57:24 -0400] miah: they are good
[2012-05-23 05:57:49 -0400] BryanWB_: such sweet kitties
[2012-05-23 05:58:08 -0400] miah: just got back from my friends companies office launch party
[2012-05-23 05:58:12 -0400] miah: it was all hbase nerds
[2012-05-23 05:58:56 -0400] miah: but im safe at home again
[2012-05-23 05:59:00 -0400] miah: time to hax on stuff
[2012-05-23 06:07:11 -0400] BryanWB_: miah: do u encounter autogen.sh often? am thinking to add code to ark for it
[2012-05-23 06:07:52 -0400] BryanWB_: for :configure action, if no configure script exists but autogen.sh does, run autogen.sh, then ./configure
[2012-05-23 06:09:04 -0400] erikh: autogen usually requires autoconf and automake doesn't it?
[2012-05-23 06:09:18 -0400] BryanWB_: erikh: not sure
[2012-05-23 06:09:20 -0400] erikh: I mean, usually it's a script that executes those
[2012-05-23 06:09:37 -0400] erikh: why can't everyone just use cmake :( so much simpler
[2012-05-23 06:09:43 -0400] BryanWB_: hehe, if only
[2012-05-23 06:13:53 -0400] miah: i havent run across too many projects that just have autogen.sh
[2012-05-23 07:59:26 -0400] nacer: morning
[2012-05-23 10:19:44 -0400] nacer: Weird knife cookbook download don't see the 0.15.0 version of runit
[2012-05-23 10:23:19 -0400] Nopik: hello all.. i have small problem with recipe dependencies. Lets say I have some recipe for a software (nginx in my case). I have also few modules for that software, in separate recipes/cookbooks. I need to build them before nginx, so nginx can use them in ./configure step. So, I need to specify their order somehow. I do not want to add 'depend' clause in nginx recipe, as I'd like to keep it generic. What other options do I have?
[2012-05-23 10:24:22 -0400] Nopik: i'm thinking about the module recipes do export some attribute, so nginx during compilation read the attribute and whatever module added to that, it would be used. it works, i just have a problem with recipe order, chef tends to reverse order of my recipes, unfortunately
[2012-05-23 10:24:27 -0400] Nopik: any ideas?
[2012-05-23 10:24:37 -0400] Nopik: not even sure where to look
[2012-05-23 10:25:03 -0400] ashb: Nopik: there are not options. deps are static only
[2012-05-23 10:25:05 -0400] nacer: Nopik: i think order of recipe in role matter
[2012-05-23 10:25:19 -0400] ashb: you might in theory manage to be able to use the Chef api toe fetch a cookbook from the server
[2012-05-23 10:25:22 -0400] ashb: but that would be a lot of work
[2012-05-23 10:27:09 -0400] nacer: Nopik: if you use one cookbook for nginx and the other module , i think you can control that
[2012-05-23 10:28:25 -0400] Nopik: yeah, scratch that. chef keeps order correctly, my problem is somewhere else apparently, sorry
[2012-05-23 10:37:02 -0400] BryanWB_: Nopik: what u using to compile nginx? u may want to look at https://github.com/bryanwb/chef-ark
[2012-05-23 10:37:53 -0400] Nopik: BryanWB_: just manual bash scripts for unpack/configure/make
[2012-05-23 10:38:17 -0400] Nopik: indeed, ark could be replacement for that
[2012-05-23 10:40:40 -0400] BryanWB_: ark 'nginx' do  url 'http://..... '    ;  path '/usr/local/'  ; version '0.0.1' ; action [ :configure, :build_with_make ] ; end
[2012-05-23 11:14:22 -0400] zeroXten: what would be the correct way of managing something like sysctl.conf? a "router" cookbook might want to enable .ip_foward and a "iptables::conntrack" recipe might want to define .nf_conntrack_max etc. So should I create a "sysctl" cookbook with a template and expose variables through the other recipes?
[2012-05-23 11:14:48 -0400] BryanWB_: there is a cookbook for it iirc that handles it nicely zeroXten
[2012-05-23 11:15:32 -0400] zeroXten: oh ok.. but of course, I could just generate the file after settings stuff via proc using sysctl -a > ..
[2012-05-23 11:15:55 -0400] zeroXten: but thanks BryanWB_, i'll take a look
[2012-05-23 11:28:55 -0400] alex88: hello guys, i've just installed chef-server following this guide, http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages i'm at the point where you should create a client for the local machine, so i do knife client create username -n -a -f /tmp/my-username.pem
[2012-05-23 11:29:01 -0400] alex88: but i get "ERROR: RuntimeError: Please set EDITOR environment variable"
[2012-05-23 11:29:29 -0400] alex88: someone else had this problem?
[2012-05-23 11:29:55 -0400] ashb: alex88: knife client create is trying to open up a json file for you to edit
[2012-05-23 11:30:12 -0400] alex88: ashb, oh, so i'll just export to nano path
[2012-05-23 11:30:28 -0400] ashb: EDITOR=nano knife client create ... etc.
[2012-05-23 11:30:42 -0400] alex88: kk got it, thank you!
[2012-05-23 11:52:04 -0400] alex88: someone tried the openstack knife module? how can i change the project were to create a server?
[2012-05-23 12:02:10 -0400] alex88: how do i change the default cookbook path in knife.rb?
[2012-05-23 12:04:53 -0400] jwitrick: add this line in your knife.rb file: cookbook_path            ["#{current_dir}/../cookbooks"]
[2012-05-23 12:09:25 -0400] alex88: thank you jwitrick, that worked.. actually i have ~/.chef/ with configs and ~/git-repo/ as a repo..is that correct?
[2012-05-23 12:11:05 -0400] jwitrick: it should be the path to where your cookbooks are located. so if you have a cookbook 'foo' in this directory '/tmp/bar/foo' then the value would be 'cookbook_path     "/tmp/bar"
[2012-05-23 12:12:22 -0400] alex88: i've set to ~/chef-repo/cookbooks
[2012-05-23 12:23:35 -0400] veszig: do you know about any "static code analysis" tools for chef? for example i'd like to see roles that have many overlapping stuff and cookbook_files/templates files that are never used
[2012-05-23 12:26:47 -0400] Tensibai: Hi there
[2012-05-23 12:28:51 -0400] Tensibai: Just wondering: does chef-solo update its databags with -r http://whatever/cookbooks.tgz ?
[2012-05-23 12:33:34 -0400] alex88: i'm trying to deploy to openstack, this is the output: http://pastebin.com/d7NBakkb is it trying to connect to chef server or what?
[2012-05-23 12:36:06 -0400] alex88: because it has actually created a server called Server 10, but it should connect to server-10
[2012-05-23 12:53:12 -0400] geekbri: Is the process for doing a pull request on knife-ec2 the same as a cookbook?  Do I resolve the ticket myself then wait for a pull?
[2012-05-23 12:53:26 -0400] geekbri: rather make a pull request and see what happens after i resolve the ticket and its reviewed?
[2012-05-23 12:59:30 -0400] yfeldblum: geekbri, my understanding is: you can make a pull request immediately, but you have to give a link to it in the JIRA ticket because Opscode's ancient internal workflow is centered around JIRA not github, and you still have to mark the ticket as resolved and and mark the resolution as "fixed" because that's what they filter on
[2012-05-23 13:00:40 -0400] geekbri: ok, that is what i shall do then
[2012-05-23 13:08:45 -0400] yfeldblum: geekbri, i believe that's true for anything maintained by opscode, so, chef proper, knife plugins, & cookbooks they maintain
[2012-05-23 13:09:23 -0400] geekbri: Ok, I just wanted to make sure that I was following the correct procedure... as I really want this patch to make it into the next release.  I dont want to have to maintain my own fork forever :)
[2012-05-23 13:16:08 -0400] alex88: the knife-openstack plugin is still mantained?
[2012-05-23 13:16:23 -0400] BryanWB_: alex88: y, mattray maintains it iirc
[2012-05-23 13:16:48 -0400] alex88: is he online here sometimes?
[2012-05-23 13:17:58 -0400] alex88: because there are some improvements that can be done
[2012-05-23 13:18:00 -0400] Mydalon: Hi, I want to install a version of HAProxy that is not the default for debian. I do have the .deb file - is there a way to install this package directly from the cookbook or would I first copy the file to disk and use package afterwards?
[2012-05-23 13:20:04 -0400] yfeldblum: morning, BryanWB_
[2012-05-23 13:20:45 -0400] alex88: and there are pull requests from months
[2012-05-23 13:22:01 -0400] yfeldblum: alex88, opscode's workflow is JIRA-centered, not github centered; they look at pull requests when the authors have added tickets to JIRA and marked them as resolved & fixed & linked to the pull requests
[2012-05-23 13:22:40 -0400] BryanWB_: yfeldblum: morning homez
[2012-05-23 13:22:47 -0400] yfeldblum: that's mostly historical; opscode's workflow was JIRA-centered before github decided the world needed pull requests
[2012-05-23 13:27:52 -0400] alex88: yfeldblum, thank you for explaining
[2012-05-23 13:30:58 -0400] yfeldblum: alex88, also contributors have to sign a very short agreement (can do it online too) which essentially acknowledges with a signature that their contributions to opscode projects are apache2 licensed, before opscode can merge their changes
[2012-05-23 13:31:56 -0400] alex88: i've created a new client on my local machine, should i copy also the validation.pem key?
[2012-05-23 13:32:19 -0400] BryanWB_: alex88: y
[2012-05-23 13:32:32 -0400] alex88: BryanWB_, thank you
[2012-05-23 13:33:23 -0400] yfeldblum: alex88, you will need the validation.pem privkey in order to bootstrap other servers
[2012-05-23 13:33:49 -0400] yfeldblum: alex88, via either `knife bootstrap` or `knife CLOUD server create`
[2012-05-23 13:33:53 -0400] alex88: yfeldblum, that's what i was trying to do ;)
[2012-05-23 13:34:06 -0400] DRiKE: anyone using the daemontools_service cookbook? I dont get why it wants to symlink at r104 (and my recipe breaks on that)
[2012-05-23 13:34:48 -0400] yfeldblum: alex88, since both of those simply wrap SSH from your local box to the remote server being bootstrapped, you need to have the validation.pem privkey so it can be transferred to the server so the server can register itself a new client
[2012-05-23 13:36:34 -0400] alex88: yfeldblum, thank you again for explaining.. seems it's having some problems bootstrapping ubuntu 12.04..
[2012-05-23 13:37:18 -0400] alex88: http://pastebin.com/KEenAkPi maybe i should check for bootstrap script for ubuntu 12.04
[2012-05-23 13:39:57 -0400] ira_: afternoon, community! I have managed to screw up my chef server config, rabbitMQ refuses access.
[2012-05-23 13:41:21 -0400] ira_: I tried to set a new password for user chef in rabbit and have the server use that by setting amqp_pass in server.rb, restarted the chef-server, but nada... still "invalid credentials"
[2012-05-23 13:41:40 -0400] ira_: ideas?
[2012-05-23 13:47:36 -0400] alex88: yfeldblum, https://github.com/opscode/chef/commit/30589e7044f08762b067043b4df2275b4d9003bf#commitcomment-1299643 this issue isn't resolved right? as in this file http://s3.amazonaws.com/opscode-full-stack/install.sh the error it's still there?
[2012-05-23 13:49:58 -0400] yfeldblum: alex88, no idea
[2012-05-23 13:50:10 -0400] gadolin: hey, we have a 20 people working on chef cookbook, and again again we are hitting with issue that someone changed cookbook which affects others, we have few chef srvs but that happens reguraraly, can someone point me some tool/resource for that?
[2012-05-23 13:50:17 -0400] alex88: because the ticket they're referring to is closed before that comment
[2012-05-23 13:50:25 -0400] alex88: let me try with custom bootstrap script
[2012-05-23 13:50:32 -0400] yfeldblum: alex88, don't work for opscode, don't currently use full-stack installer, etc
[2012-05-23 13:50:40 -0400] Urocyon: alex88 I had similar problems getting chef to bootstrap on 12.04.   I got around it by using chef-full (omnibus)  Supposedly that's the new default, but it wasn't working for me until I included -d "chef-full"
[2012-05-23 13:51:10 -0400] alex88: Urocyon, so you're bootstrapping to ubuntu 12.04 using -d chef-full ?
[2012-05-23 13:51:21 -0400] Urocyon: well, a 12.04 ami.
[2012-05-23 13:51:43 -0400] DRiKE: Why does the Link resource throw a EISDIR-error when trying to symlink a dir? default link_type is :symbolic, so that should work right?
[2012-05-23 13:51:50 -0400] Urocyon: Haven't tried it on a physical server, but I assume the same would work.
[2012-05-23 13:51:58 -0400] ira_: trying again: I have RabbitMQ installed, manually re-defined the vhost, chef user and permissions, but still it says "invalid credentials", any idea what else I can check?
[2012-05-23 13:52:56 -0400] alex88: Urocyon, yeh, you mean image on uec-images.ubuntu.com right?
[2012-05-23 13:53:22 -0400] Urocyon: ah, And I do have a chef-full.erb in my chef/.chef/bootstrap directory.
[2012-05-23 13:53:49 -0400] Urocyon: alex88, yep, those images.
[2012-05-23 13:54:05 -0400] alex88: Urocyon, i'm now trying with this https://raw.github.com/opscode/chef/master/chef/lib/chef/knife/bootstrap/ubuntu12.04-gems.erb
[2012-05-23 13:55:31 -0400] Urocyon: alex88: I'm using this https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-05-23 13:57:29 -0400] Urocyon: alex88: and chef 10.10
[2012-05-23 13:57:44 -0400] Urocyon: alex88: I guess it helps to be specific.
[2012-05-23 13:58:06 -0400] alex88: me too about 10.10, still going on with ubuntu12.04-gems.erb
[2012-05-23 13:58:16 -0400] alex88: now it seems apt is working fine
[2012-05-23 13:58:26 -0400] Urocyon: ah, good.
[2012-05-23 14:02:27 -0400] jwitrick: anyone have any good (full) examples on using chefspec? The documentation is a little lacking int proper examples.
[2012-05-23 14:07:04 -0400] knuckolls_: DRiKE: I've had problems with the link resource when i either add a slash at the end, or forget to. I can't remember which throws the error
[2012-05-23 14:07:21 -0400] BryanWB_: jwitrick: i think chefspec is in flux
[2012-05-23 14:07:30 -0400] yfeldblum: testing strategies for chef ... i can imagine functional tests for providers that stress a provider in isolation (including lightweight providers in cookbooks) and functional tests for recipes that assert the recipe declares a resource X with attributes A B and C when given such-n-such node attributes and when such-n-such data would be returned from `search`, `data_bag`, and `data_bag_item`
[2012-05-23 14:07:43 -0400] BryanWB_: but not sure
[2012-05-23 14:08:04 -0400] BryanWB_: i would check w/ andrew crump before investing time in chefspec
[2012-05-23 14:08:08 -0400] jwitrick: BryanWB_: thanks. ill keep looking
[2012-05-23 14:08:40 -0400] BryanWB_: there isn't anything out-of-the-box that u can rspec like testing afaik besides chefspec
[2012-05-23 14:11:47 -0400] DRiKE: knuckolls_: thanks, I will try to play with that
[2012-05-23 14:18:39 -0400] behemphi: Now what?
[2012-05-23 14:19:03 -0400] behemphi: oops  that was a bit embarrassing  wrong window!
[2012-05-23 14:21:21 -0400] ssd7: could've been worse :)
[2012-05-23 14:22:03 -0400] bencaron: no password pasted, it's a boring error ;)
[2012-05-23 14:22:27 -0400] gp5st: hello, so there is the widnows_registry resource, is there any way to get the contents of a registry key (so that I can do stuff based on it's value?)
[2012-05-23 14:22:42 -0400] behemphi: exit
[2012-05-23 14:24:08 -0400] BryanWB_: behemphi: hey buddy!
[2012-05-23 14:24:17 -0400] behemphi: Yo Brian
[2012-05-23 14:30:56 -0400] alex88: if i have multiple server with role "webserver" how can i get the ip list of them to add them in the a loadbalancer config?
[2012-05-23 14:31:23 -0400] gp5st: do a search on the chef server
[2012-05-23 14:32:16 -0400] alex88: can be done with recipes?
[2012-05-23 14:33:27 -0400] gp5st: i'm pretty sure, at least i'm hoping
[2012-05-23 14:33:33 -0400] gp5st: that's next week for me o.O
[2012-05-23 14:33:52 -0400] gp5st: i mean, it should be able to
[2012-05-23 14:33:56 -0400] gp5st: it's part of the chef api
[2012-05-23 14:34:00 -0400] gp5st: rest api*
[2012-05-23 14:34:33 -0400] spox: alex88: http://wiki.opscode.com/display/chef/Search
[2012-05-23 14:34:55 -0400] spox: and more to the point: http://wiki.opscode.com/display/chef/Search#Search-UsingSearchinRecipes
[2012-05-23 14:36:16 -0400] alex88: thank you spox and gp5st
[2012-05-23 14:36:25 -0400] alex88: i'm going to check the code of this http://wiki.opscode.com/display/chef/Build+a+LAMP+Stack
[2012-05-23 14:37:48 -0400] Litex: 'morning, chefs!
[2012-05-23 14:38:27 -0400] BryanWB_: Litex: morning homez!
[2012-05-23 14:39:05 -0400] kryptek: Hey guys, in my users data bag I have a bunch of keys and I don't want to separate them by \n -- isn't there a way I can create an array of keys instead ?
[2012-05-23 14:41:35 -0400] BryanWB_: kryptek: c atomic-penguin's cookbook-certificate, the readme will explain exactly what u want
[2012-05-23 14:42:01 -0400] Litex: BryanWB_: h0wdy!
[2012-05-23 14:42:53 -0400] kryptek: thanks a lot bryan
[2012-05-23 14:45:29 -0400] kryptek: Looks like he's doing the same thing though in that readme
[2012-05-23 14:45:36 -0400] kryptek: key1\nkey2\key3
[2012-05-23 14:54:58 -0400] atomic-penguin: kryptek, http://ckbk.it/certificate
[2012-05-23 14:57:43 -0400] hoover_damm: atomic-penguin, it's fuunny that cookbook has become a great link in all my documents
[2012-05-23 14:57:59 -0400] atomic-penguin: hoover_damm, a great link?
[2012-05-23 14:58:03 -0400] hoover_damm: indeed
[2012-05-23 14:58:21 -0400] kryptek: atomic-penguin, I'm not sure if I'm misunderstanding or not.. but the thing is, I thought I could use an array object some how instead of using single line blobs with the \n character
[2012-05-23 14:58:53 -0400] kryptek: From what I see, those json keys all use a single line blob to separate the block of text
[2012-05-23 15:00:32 -0400] atomic-penguin: kryptek, wait are you trying to deploy ssh public keys, or server private keys?
[2012-05-23 15:01:17 -0400] hoover_damm: the chain can be an array of an ssl cert
[2012-05-23 15:01:39 -0400] hoover_damm: it's not in the cookbook atomic-penguin mentioned
[2012-05-23 15:02:30 -0400] gp5st: so there is -j for chef-client, is there anyway to give the json as a string on the cmd line rather than in a file?
[2012-05-23 15:05:03 -0400] atomic-penguin: hoover_damm, so when you say link, are you talking internal company documentation.  Like here is how you safely deploy server certificates...
[2012-05-23 15:06:00 -0400] atomic-penguin: hoover_damm, or as a link in community cookbook docs
[2012-05-23 15:10:57 -0400] matschaffer: is calling Chef::Knife.new.configure_chef from a utility script a sin? If so, mortal of venial? ;)
[2012-05-23 15:12:09 -0400] atomic-penguin: kryptek, with the opscode users cookbook, you can most certainly do an array of ssh public keys
[2012-05-23 15:13:50 -0400] gp5st: is there a way to give chef-client a json string of attributes w/o having to put it in a file?
[2012-05-23 15:14:26 -0400] kryptek: atomic-penguin , how do I format the array though? I did "ssh-keys" : [ 'key1', 'key2', 'key3' ] and it dumped the actual []'s in the authorized_keys file =/
[2012-05-23 15:16:08 -0400] hoover_damm: atomic-penguin, client documentation actually
[2012-05-23 15:16:23 -0400] hoover_damm: atomic-penguin, I'm a freelance contractor so my peers are not exactly coworkers
[2012-05-23 15:16:42 -0400] atomic-penguin: hoover_damm, oh I thought you were at EY
[2012-05-23 15:16:47 -0400] hoover_damm: atomic-penguin, nope
[2012-05-23 15:16:55 -0400] hoover_damm: that ended January 31st
[2012-05-23 15:17:38 -0400] geekbri: thats ok im still adjusting to working period... and i've been doing it for 14 years :)
[2012-05-23 15:17:46 -0400] geekbri: ;)
[2012-05-23 15:17:47 -0400] hoover_damm: atomic-penguin, my woman was so happy when the job was done.  I stopped getting so angry, and the past 60days i've been unlearning all the angry habbits I leanred
[2012-05-23 15:17:53 -0400] atomic-penguin: kryptek, https://gist.github.com/2775842
[2012-05-23 15:18:21 -0400] kryptek: atomic-penguin , thanks for your patience with me.. :)
[2012-05-23 15:18:42 -0400] hoover_damm: companies are nutty, that's how the cookie crumbles
[2012-05-23 15:19:53 -0400] atomic-penguin: hoover_damm, one of the reasons I like where I work, it doesn't have much of that corporate culture
[2012-05-23 15:20:25 -0400] hoover_damm: atomic-penguin, I like my current setup as I get to own my own hours and help people who actually need it
[2012-05-23 15:21:43 -0400] simonjj: "domain" as an attribute comes from Ohai, can that be overridden via a role?
[2012-05-23 15:21:47 -0400] bencaron: I'm looking into supporting RHEL in my setup. Is the Omnibus installer the way to go?
[2012-05-23 15:22:06 -0400] atomic-penguin: bencaron, definitely omnibus
[2012-05-23 15:22:32 -0400] simonjj: I am thinking something like override_attributes => {"domain" => "mydomain.com"}
[2012-05-23 15:22:33 -0400] hoover_damm: simonjj, domain is determined by running hostname -f
[2012-05-23 15:22:34 -0400] bencaron: and knife bootstrap offer a -d distro for this kind of setup I guess?
[2012-05-23 15:22:43 -0400] hoover_damm: simonjj, it strips the dot off the hostname
[2012-05-23 15:22:58 -0400] simonjj: hoover_damm: that's a no then I assume ?
[2012-05-23 15:23:13 -0400] hoover_damm: simonjj, if you want to override your domain you should actually change it on the server
[2012-05-23 15:23:30 -0400] hoover_damm: then when chef-client is re-run it will pickup the new domain.  You may need to update your client registration if you change the FQDN
[2012-05-23 15:23:43 -0400] simonjj: thanks for the input
[2012-05-23 15:23:52 -0400] hoover_damm: as the node and client registrations are needing to be in sync with the new name
[2012-05-23 15:23:56 -0400] hoover_damm: or you'll end up creating a new client
[2012-05-23 15:24:10 -0400] hoover_damm: not a huge deal to create a new client and delete the old, just better to rename :)
[2012-05-23 15:24:12 -0400] atomic-penguin: You could try overriding it, your override will get clobbered at the start of the chef run (probably)
[2012-05-23 15:24:33 -0400] hoover_damm: right, then only the index has it that way
[2012-05-23 15:24:37 -0400] hoover_damm: and then what's the point?
[2012-05-23 15:24:50 -0400] bencaron: to answer my own question: knife bootstrap with omnibus, ticket CHEF-2815
[2012-05-23 15:25:26 -0400] atomic-penguin: bencaron, redhat/centos, just use omnibus
[2012-05-23 15:26:29 -0400] hoover_damm: ubuntu, debian too
[2012-05-23 15:26:47 -0400] hoover_damm: the whole pattern of having to supply your ruby, install chef, install the rdocs is boring
[2012-05-23 15:26:52 -0400] BryanWB_: atomic-penguin: curious, what if u want to install additional gems and u r using omnibus?
[2012-05-23 15:26:57 -0400] bencaron: atomic-penguin, I was just looking forward on what would happen with the flow i'm used with ubuntu
[2012-05-23 15:27:05 -0400] hoover_damm: install them BryanWB_?
[2012-05-23 15:27:15 -0400] BryanWB_: atomic-penguin: for instance, on dev machines i often install pry so i can use breakpoints to debug cookbooks
[2012-05-23 15:27:17 -0400] hoover_damm: you can package additional gems into the omnibus and re-archive it for your own purposes
[2012-05-23 15:27:34 -0400] hoover_damm: but you can intsall pry in your cookbooks as the easiest escape
[2012-05-23 15:27:39 -0400] atomic-penguin: BryanWB_, depends, gems for your application, or for the chef run?
[2012-05-23 15:27:41 -0400] BryanWB_: hoover_damm: tks
[2012-05-23 15:27:50 -0400] hoover_damm: btw I followed your pry gist BryanWB_ and I felt a little confused
[2012-05-23 15:27:52 -0400] BryanWB_: atomic-penguin: for chef-run
[2012-05-23 15:27:57 -0400] hoover_damm: it felt like half in irb / half in pry
[2012-05-23 15:28:04 -0400] hoover_damm: I wonder if there's a better way to load up shef in pry
[2012-05-23 15:28:26 -0400] atomic-penguin: BryanWB_, http://ckbk.it/chef_gem
[2012-05-23 15:28:37 -0400] BryanWB_: hoover_damm: i have tried to substitute pry for irb but it is baked deep into shef
[2012-05-23 15:28:46 -0400] BryanWB_: hoover_damm: thus my half-ass solution
[2012-05-23 15:28:54 -0400] gondoi: if the merging of cookbooks and site-cookbooks is deprecated, what is the best method going forward to have community cookbooks pulled from upstream with small tweaks maintained for local runs?
[2012-05-23 15:29:46 -0400] miah: moin
[2012-05-23 15:29:47 -0400] BryanWB_: and i tried to tweak .irbrc  and shef equivalent w/out success
[2012-05-23 15:30:06 -0400] hoover_damm: BryanWB_, hehe then your going to end up on the path that I did originally when I made shef work for chef 0.6.0.0.2
[2012-05-23 15:30:25 -0400] atomic-penguin: gondoi, you can still use site-cookbooks for something like internal private cookbooks.  You just can't have the same cookbook in both directories.
[2012-05-23 15:30:30 -0400] bencaron: gondoi, i'm using Librarian for this
[2012-05-23 15:30:42 -0400] hoover_damm: BryanWB_, basically pry -e code-to-start-shef
[2012-05-23 15:30:48 -0400] bencaron: with my fork in my own repos
[2012-05-23 15:30:54 -0400] hoover_damm: BryanWB_, feels like a better direction
[2012-05-23 15:31:17 -0400] atomic-penguin: gondoi, so you couldn't have the opscode postfix cookbook in "cookbooks", and a customized version in "site-cookbooks"
[2012-05-23 15:31:27 -0400] gondoi: atomic-penguin: yeah, but there are some community cookbooks that just don't work the way we need/expect them to depending on the scenario
[2012-05-23 15:31:35 -0400] gondoi: right
[2012-05-23 15:31:43 -0400] gondoi: bencaron: link?
[2012-05-23 15:31:46 -0400] BryanWB_: hoover_damm: great idea, didn't even know pry had ' -e '
[2012-05-23 15:32:17 -0400] bencaron: gondoi: https://github.com/applicationsonline/librarian
[2012-05-23 15:32:25 -0400] gondoi: thank you
[2012-05-23 15:32:30 -0400] hoover_damm: BryanWB_, yep you'll want pry to start up shef and then if you have to, you can create a pryshef.rb and then just share that as the way to load it
[2012-05-23 15:32:36 -0400] bencaron: I'm still not sure of the best way to handle the development part tho
[2012-05-23 15:33:35 -0400] BryanWB_: hmm, pry-chef would be a simple gem to make, and i keep meaning to write a gem
[2012-05-23 15:34:09 -0400] miah: do it!
[2012-05-23 15:35:18 -0400] hoover_damm: BryanWB_, pry -e "require 'chef/shef'
[2012-05-23 15:35:21 -0400] hoover_damm: Shef.start"
[2012-05-23 15:35:33 -0400] hoover_damm: BryanWB_, hack out the irb requirements out of chef/shef and you'll win
[2012-05-23 15:35:54 -0400] hoover_damm: otherwise you just need to require irb before you require chef
[2012-05-23 15:35:56 -0400] hoover_damm: and that works
[2012-05-23 15:36:05 -0400] alex88: when i go to chef dashboard -> status it takes a lot to respond and it says "Could not list status" someone had this problem?
[2012-05-23 15:36:57 -0400] hoover_damm: BryanWB_, seems to interpert -e as a parameter to shef... but basically it's an easy path, chef-pry sounds good
[2012-05-23 15:46:19 -0400] jtimberman: using site-cookbooks in itself is not deprecated. "cookbook shadowing" is.
[2012-05-23 15:46:33 -0400] jtimberman: where you customize a single file from a cookbook in site-cookbooks, like a recipe or a template.
[2012-05-23 15:49:30 -0400] hoover_damm: did cookbook shadowing ever work right?
[2012-05-23 15:49:36 -0400] hoover_damm: I always got burned by it honestly
[2012-05-23 15:49:53 -0400] yfeldblum: hoover_damm, works right so far as i can tell
[2012-05-23 15:50:21 -0400] hoover_damm: yfeldblum, hrm i imagine the term working right is the whole point
[2012-05-23 15:50:35 -0400] yfeldblum: hoover_damm, however, it's a trap
[2012-05-23 15:50:48 -0400] hoover_damm: yfeldblum, my experience was create a cookbook called apache2 in site-cookbooks, override one recipe, and I found it only shipped that one recipe
[2012-05-23 15:51:07 -0400] hoover_damm: this was roughly 0.7.x or 0.8.x so it could be working right now
[2012-05-23 15:51:32 -0400] hoover_damm: yfeldblum, my resolution after finding this was that cookbook shadowing was a bad idea
[2012-05-23 15:51:37 -0400] hoover_damm: and to never go down that path again
[2012-05-23 15:51:42 -0400] yfeldblum: hoover_damm, works right in 0.9 and 0.10
[2012-05-23 15:51:57 -0400] hoover_damm: you are only asking for hurt imo
[2012-05-23 15:52:02 -0400] hoover_damm: but that's an opinion
[2012-05-23 15:52:12 -0400] hoover_damm: it likely works 'right' the same way in 0.9 and 0.10
[2012-05-23 15:52:21 -0400] hoover_damm: what's right to you, maybe 'wrong' to me
[2012-05-23 15:52:25 -0400] hoover_damm: ;)
[2012-05-23 15:53:03 -0400] yfeldblum: hoover_damm, the experience you recounted doesn't seem to be happening to me; you encountered it in 0.7 and 0.8 and did not check 0.9 and 0.10, and i did not encounter it in 0.9 and 0.10 but did not check 0.7 and 0.8
[2012-05-23 15:54:06 -0400] yfeldblum: hoover_damm, however, it's a trap; i'm OK with monkey-patching if you know how to make it maintainable, but the problem is that with most recipes, file-level shadowing is by far not granular enough to make it maintainable
[2012-05-23 15:54:21 -0400] hoover_damm: yep
[2012-05-23 15:54:59 -0400] yfeldblum: hoover_damm, i've found other techniques for reaching in and surgically patching e.g. one resource
[2012-05-23 15:55:04 -0400] hoover_damm: yfeldblum, there's lots of 'meta-like' things you can do in chef that seem absolutely beautiful.  However that beauty is also dangerous
[2012-05-23 15:55:32 -0400] hoover_damm: Experience is what educates us to take our time and beware of such false beauty
[2012-05-23 15:56:06 -0400] yfeldblum: hoover_damm, that sounds like the preample to divorce papers ...
[2012-05-23 15:57:07 -0400] geekbri: is that anything like that song "never make a pretty woman your wife" ?
[2012-05-23 15:57:44 -0400] hoover_damm: yfeldblum, divorce is such an ugly term.  We should start calling it 'Refactoring your siginificant other'
[2012-05-23 15:57:45 -0400] yfeldblum: hoover_damm, i don't even consider file-level patching to be beautiful at all; but it's trivial to accomplish, especially for newcomers to chef, and that's why i think it's a trap
[2012-05-23 15:58:11 -0400] hoover_damm: and if you end up with a 10 year younger model, I guess that was refactoring to a new scripting language
[2012-05-23 15:58:18 -0400] yfeldblum: hoover_damm, patterns & practices: this particular use case no longer calls for the singleton pattern
[2012-05-23 15:58:19 -0400] hoover_damm: o.O...
[2012-05-23 15:58:50 -0400] geekbri: Are we talking about relationships or code, i cant' tell anymore.
[2012-05-23 15:59:06 -0400] hoover_damm: yfeldblum, the only kind of monkeypatching I consider valid is to fix a bug or to bring out a feature that chef lacks
[2012-05-23 15:59:17 -0400] hoover_damm: yfeldblum, such as monkeypatching the package providers for a distro that Chef doesn't support
[2012-05-23 15:59:26 -0400] hoover_damm: so your chef run works as you want
[2012-05-23 15:59:49 -0400] hoover_damm: yfeldblum, otherwise one day you'll slip and the soap will trip you good
[2012-05-23 16:00:04 -0400] hoover_damm: sounds like both of us know this monkey-patch pain well
[2012-05-23 16:00:23 -0400] hoover_damm: geekbri, sorry about that
[2012-05-23 16:00:43 -0400] Mithrandir: I tend to just get my fixes upstream and then upgrade to a new version, but that might just be me. :-P
[2012-05-23 16:01:21 -0400] hoover_damm: Mithrandir, beautiful!
[2012-05-23 16:01:59 -0400] yfeldblum: hoover_damm, heh yes, i sometimes monkey-patch bit of rails & other gems, but it's ok since the testing situation there is stellar
[2012-05-23 16:02:36 -0400] yfeldblum: hoover_damm, however with chef i've slowly been moving away from file-level shadowing towards other techniques
[2012-05-23 16:02:44 -0400] hoover_damm: that's why i've moved away from rvm/rbenv
[2012-05-23 16:02:53 -0400] hoover_damm: darn shiny easy traps
[2012-05-23 16:04:44 -0400] yfeldblum: hoover_damm, the nagios cookbook is giving me a little grief, though: node["ipaddress"] would be fine as an overridable default, but is wrong as an assumption if there's no escape hatch
[2012-05-23 16:04:49 -0400] EgeBamya1i: Hiya!
[2012-05-23 16:05:03 -0400] yfeldblum: hoover_damm, file-level patching was easy
[2012-05-23 16:05:07 -0400] hoover_damm: hehe nagios
[2012-05-23 16:05:11 -0400] hoover_damm: that's an ugly cookbook
[2012-05-23 16:05:43 -0400] Mithrandir: don't you keep your cookbooks in git?
[2012-05-23 16:05:48 -0400] Mithrandir: why not just fork it and fix it properly?
[2012-05-23 16:06:02 -0400] Mithrandir: (well, locally if you can't fix it properly)
[2012-05-23 16:06:04 -0400] gp5st: is there a way to build a resource that contains other resources?
[2012-05-23 16:06:50 -0400] JasonBox: Mithrandir: I actually do that via seperate cookbook repos now
[2012-05-23 16:07:12 -0400] yfeldblum: Mithrandir, that's an option, yes, and i'll probably have to do that before chef-0.11 ships
[2012-05-23 16:07:22 -0400] EgeBamya1i: Just started out with chef-server today. And with the knife-command I have added some recepies to a node, and then I ssh into the server and do a "sudo chef-client" and it gets the recepies from the chef-server and installs the packages, sweet! But I cant find a command in knife that does the "sudo chef-client"-part for you. I dont want to ssh into my server every time i want to deploy something, I woudl rather do knife deploy NODE or wathever. Am I missin
[2012-05-23 16:09:29 -0400] miah: run chef as a daemon on your nodes
[2012-05-23 16:09:52 -0400] hoover_damm: missing a pattern to follow EgeBamya1i
[2012-05-23 16:10:18 -0400] hoover_damm: EgeBamya1i, most people who run knife ec2 server create launch a server without having he chef-client recipe in their runlist.  They want to 'control' their chef run
[2012-05-23 16:10:50 -0400] hoover_damm: EgeBamya1i, Chef is something that should run every 30minutes or so to ensure that your cookbooks are applying whatever you need applied.  This does require you to make sure your cookbooks don't break things
[2012-05-23 16:11:30 -0400] hoover_damm: EgeBamya1i, it's also possible to use rundeck to control running chef on your servers.  https://github.com/opscode/chef-rundeck
[2012-05-23 16:11:59 -0400] hoover_damm: EgeBamya1i, you can also use knife ssh if you use Hosted or a server.  to ssh and run chef-client
[2012-05-23 16:12:16 -0400] hoover_damm: knife ssh node *:* -x ubuntu "sudo chef-client"
[2012-05-23 16:12:18 -0400] jperry2: Does chef support specifying a platform in the metadata.rb and having that cookbook only run on that platform?
[2012-05-23 16:12:58 -0400] jperry2: I see you can use "supports" but the platform matching is not implemented yet according to the documentation
[2012-05-23 16:15:05 -0400] yfeldblum: jperry2, you can do `raise StandardError, "wrong os" unless platform?("ubuntu")` at the top of a recipe if you like
[2012-05-23 16:16:05 -0400] jperry2: yeah right now we just have the recipe wrapped with an if statement checking the os
[2012-05-23 16:16:11 -0400] jperry2: it doesn't have to raise an exception
[2012-05-23 16:16:21 -0400] jperry2: it's a small recipe
[2012-05-23 16:17:29 -0400] yfeldblum: sure, whatever floats your boat; wrapping with an `if` simply sounded too intrusive to me, since it indents the entirety of the recipe
[2012-05-23 16:17:45 -0400] jperry2: yeah it's only a few lines but I know what you mean
[2012-05-23 16:18:00 -0400] jperry2: raising an exception will kill the chef run right?
[2012-05-23 16:19:05 -0400] magoo: there's a bug where env_run_list doesn't work correctly in roles. Is there a ticket associated with this?
[2012-05-23 16:19:50 -0400] yfeldblum: jperry2, yes
[2012-05-23 16:19:58 -0400] yfeldblum: jperry2, which is probably what you want
[2012-05-23 16:20:08 -0400] EgeBamya1i: hoover_damm: thanks for taking the time to explain that to me!
[2012-05-23 16:20:09 -0400] yfeldblum: jperry2, because that sort of thing tends to get noticed easily and fixed
[2012-05-23 16:23:04 -0400] jperry2: I see
[2012-05-23 16:23:06 -0400] jperry2: thanks
[2012-05-23 16:23:52 -0400] hoover_damm: EgeBamya1i, No problem.  There's likely a few other ways to do it, but having chef-server around and using knife ssh is the quick and easy way out of this.  I also have a client who uses fabric to run chef-client
[2012-05-23 16:24:09 -0400] hoover_damm: total jackpot of possible ways to do it.
[2012-05-23 16:26:14 -0400] EgeBamya1i: hoover_damm: yeah. I guess Ill go with fabric for application deployment of new changes once the whole application infra is set up with chef.
[2012-05-23 16:28:40 -0400] hoover_damm: EgeBamya1i, sounds sexy
[2012-05-23 16:29:29 -0400] zeroXten: anyone happen to know about any providers/cookbooks that can manage non-trivial routes on centos? So things like multiple next hops and non-default tables etc
[2012-05-23 16:30:52 -0400] geekbri: zeroXten: no but if you find one let me know :)
[2012-05-23 16:30:57 -0400] geekbri: or if you write one.
[2012-05-23 16:31:01 -0400] hoover_damm: EgeBamya1i, I /queried you a gist with a example fabfile if you want it.
[2012-05-23 16:31:07 -0400] hoover_damm: good luck.
[2012-05-23 16:31:20 -0400] zeroXten: geekbri: ok :)
[2012-05-23 16:38:29 -0400] miah: zeroXten: write one?
[2012-05-23 16:39:20 -0400] geekbri: I would write it, sounds fun, just no time currently.
[2012-05-23 16:43:31 -0400] alex88: suppose that i've set default_attributes(:nginx => {:vhosts => ["site1.com","site2.com"] } ) in the recipe, what should i wrap outside the virtual host file creation? a each loop?
[2012-05-23 16:44:13 -0400] monvillalon: how do I log to the console from a recipe?
[2012-05-23 16:45:14 -0400] alex88: monvillalon, http://wiki.opscode.com/display/chef/Resources#Resources-Log this?
[2012-05-23 16:45:30 -0400] cap10morgan: What's the best way to install system packages that are pre-reqs of chef gems?
[2012-05-23 16:45:36 -0400] monvillalon: alex88: wow thanks did it think of it a resource
[2012-05-23 16:45:45 -0400] cap10morgan: chef tries to install the chef_gem before the package normally
[2012-05-23 16:46:30 -0400] oddover: hey everyone. If I want to add some values to an attributes array, for a specific node, is this the right syntax to do it?: "default_attributes": {     "rules" : ["asdfasdfi12341234"]   }
[2012-05-23 16:46:52 -0400] oddover: assuming rules is the name of the array
[2012-05-23 16:52:44 -0400] shuvo: ohai chefs!
[2012-05-23 16:55:33 -0400] c_t: ohai
[2012-05-23 16:58:37 -0400] UForgotten: ohayou gozaimasu
[2012-05-23 17:00:26 -0400] tmichael: having validation problems so trying to "recreate" new validation key to start over...
[2012-05-23 17:00:31 -0400] tmichael: following instructions here: http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-Nosuchfileordirectory%2Fetc%2Fchef%2Fvalidation.pem
[2012-05-23 17:00:47 -0400] tmichael: but see no reference - even on known good server - of validation.pem on servers
[2012-05-23 17:00:55 -0400] tmichael: only see server-validation.pem.  this change?
[2012-05-23 17:01:48 -0400] tmichael: cuz looking at known good server environment, checksum of server-validation.pem is same as what i know to be working validation key.
[2012-05-23 17:02:41 -0400] tmichael: still, tried using that in my new environment (server-validation -> validation.pem) and it does not work.  any tips?
[2012-05-23 17:04:33 -0400] jessicab: tmichael - /etc/chef/validaton.pem is just a copy of the org-validator.pem
[2012-05-23 17:05:02 -0400] jessicab: org-validator is used for knife, chef-client uses /etc/chef/validation.pem by default
[2012-05-23 17:06:28 -0400] tmichael: jessicab: appreciate the tip.  possible it's called server-validation.pem in local server envs?
[2012-05-23 17:06:38 -0400] tmichael: cuz that's all i have atm
[2012-05-23 17:06:52 -0400] jessicab: if your orgs named server, thatd make sense
[2012-05-23 17:07:10 -0400] tmichael: oh, i see.
[2012-05-23 17:07:27 -0400] jessicab: are you on open source? i gave the hosted chef version of the answer btw
[2012-05-23 17:07:51 -0400] tmichael: open source in this location
[2012-05-23 17:08:44 -0400] jessicab: ah weird, on oss it should just be named validation.pem instead of org-validator.. but if youve renamed it in your knife.rb too id think any name would work really
[2012-05-23 17:16:13 -0400] tmichael: jessicab: named validation.pem on client side.  on server side (server.rb) it's called sever-validation.pem.  coworker just told me that all works fine with it if new node.  auth issue we're having is when moving node from one server/env to another so not key related after all
[2012-05-23 17:16:49 -0400] jessicab: oh sorry, i didnt know that about the server side, good to know heh
[2012-05-23 17:24:03 -0400] monvillalon: i added a log to my recipe but is not showing on a console. where does chef store the logs by default
[2012-05-23 17:39:02 -0400] alex88: monvillalon, maybe depends the log level you used
[2012-05-23 17:39:13 -0400] alex88: i just started with chef can't help alot
[2012-05-23 17:39:42 -0400] monvillalon: alex88: Just figured that out, I'm using vagrant and had to set vagrant to use the appropriate log level
[2012-05-23 17:39:54 -0400] monvillalon: alex88: thx very much
[2012-05-23 17:39:58 -0400] alex88: monvillalon, vagrant is awesome for testing ;)
[2012-05-23 17:40:07 -0400] monvillalon: alex88: Indeed :)
[2012-05-23 17:40:52 -0400] alex88: if i setup some web servers, and later i want to add a virtual host, how you think i should manage that? i've created a template file for virtual host.. should i add a recipe for each virtual host and add to that host?
[2012-05-23 17:42:18 -0400] cassarani: hi all, so at the moment I'm using Chef to manage a bunch of application servers running different Rails apps, so what my cookbooks do is to set up an environment where the apps can be deployed to, and then someone (e.g. a developer) can deploy to it using capistrano
[2012-05-23 17:42:35 -0400] cassarani: however now I have a larger app that I'd like to deploy to EC2, and I'd like to be able to scale it as necessary
[2012-05-23 17:42:54 -0400] cassarani: my main question is, should I ditch Capistrano and include deployment into my Chef run?
[2012-05-23 17:43:13 -0400] eherot: cassarani: I wouldn't
[2012-05-23 17:43:25 -0400] cassarani: so you would continue using Capistrano to deploy the code?
[2012-05-23 17:43:40 -0400] cassarani: I'm quite new to EC2 so I'm just wondering if that will impact how easily I can spin up new instances as needed
[2012-05-23 17:43:43 -0400] eherot: yeah, that's a pretty common setup that you've got there
[2012-05-23 17:44:02 -0400] cassarani: it seems like it will lead to a two-step process, where first I bootstrap a new instance, then I manually cap deploy
[2012-05-23 17:44:11 -0400] eherot: unless what you want to do is always only ever roll out new versions on new machines, that changes things a bit.
[2012-05-23 17:44:26 -0400] cassarani: well naturally I'd like all machines to have the same version
[2012-05-23 17:44:31 -0400] eherot: most shops seem to want the prod deploys to always be at least minimally "manual
[2012-05-23 17:44:32 -0400] eherot: "
[2012-05-23 17:45:38 -0400] cassarani: yeah that's true, but spinning up a new instance seems to me like a separate concern from production deployments
[2012-05-23 17:45:38 -0400] eherot: What you can do is query the chef server from cap so as to get the current list of servers
[2012-05-23 17:46:12 -0400] cassarani: yeah, that's something else I was wondering - I don't want to have the information about my infrastructure needlessly replicated in my cap deploy configuration
[2012-05-23 17:46:51 -0400] eherot: cap is also preferable because it has pretty a pretty well designed concept of deploy hooks
[2012-05-23 17:46:57 -0400] cassarani: so presumably as long as capistrano has access to a properly-configured installation of knife at deploy time, I can simply use that to search for the appropriate nodes?
[2012-05-23 17:47:10 -0400] eherot: yep, exactly
[2012-05-23 17:47:21 -0400] cassarani: that sounds pretty cool actually
[2012-05-23 17:47:37 -0400] eherot: I think there's even a doc on the chef site about how to use knife libraries in other ruby scripts
[2012-05-23 17:47:51 -0400] eherot: let me see if I still have that tab open, heh
[2012-05-23 17:47:54 -0400] cassarani: it's silly how long I'd been wrestling with these issues and I never really thought of IRC to answer them ;)
[2012-05-23 17:48:05 -0400] eherot: I know what you mean :-)
[2012-05-23 17:48:07 -0400] cassarani: that would be excellent, thanks
[2012-05-23 17:48:08 -0400] eherot: http://wiki.opscode.com/display/chef/Knife+Plugins#KnifePlugins-UsingPluginswithinOtherPlugins
[2012-05-23 17:48:22 -0400] cassarani: that's brilliant
[2012-05-23 17:48:38 -0400] eherot: it's not *exactly* the same thing but if you're somewhat familiar with ruby it should be all you need to get started
[2012-05-23 17:48:55 -0400] cassarani: oh yeah, that looks like plenty of information
[2012-05-23 17:49:22 -0400] eherot: to your point a second ago, someone sent me this page AFTER I'd done the exact same thing by *reading the knife source code* argh.
[2012-05-23 17:49:32 -0400] cassarani: hehe
[2012-05-23 17:50:20 -0400] eherot: but yeah someone at ChefConf mentioned using cap+knife implementation to get server lists.  Clever idea that I can't take credit for.
[2012-05-23 17:50:25 -0400] cassarani: my main difficulty with all this is that someone else at my company started our chef repository, and I've been learning on the job based on the way our own infrastructure is managed, which means my understanding of certain choices is limited by not knowing whether that's how things are done generally, or whether it's just the way he chose to do things
[2012-05-23 17:50:26 -0400] eherot: haven't implemented it myself yet
[2012-05-23 17:50:40 -0400] eherot: isn't that always the way
[2012-05-23 17:50:53 -0400] cassarani: yeah well I'm lucky in a way that I have access to a working chef repo
[2012-05-23 17:50:59 -0400] eherot: but that's good because probably the most complicated part about chef is getting it up and running in the first place.  The rest is pretty fungible and easy to manage.
[2012-05-23 17:51:08 -0400] eherot: yep
[2012-05-23 17:51:35 -0400] cassarani: yeah, and I've got to a point now I think where I can actually criticise some of the choices that were made, which is a great sign that I'm starting to grasp these things beyond a simple level of comprehension
[2012-05-23 17:52:56 -0400] cassarani: as an aside - would you recommend I set up the equivalent of running cap deploy:setup through Chef?
[2012-05-23 17:53:19 -0400] cassarani: so as to skip that extra step when deploying to a new instance?
[2012-05-23 17:54:29 -0400] monvillalon: Im using the nginx recipe and I'm overwriting the version to 1.2 on my role, but the recipe does't work because other attributes that their defaults are based on version still have the old value, what am I missing?
[2012-05-23 17:56:33 -0400] kallistec: monvillalon: the nginx cookbook was written before the current attributes system existed, so it may have (now incorrectly) written attributes to the node's persistent attributes
[2012-05-23 17:56:40 -0400] kallistec: (aka normal attributes)
[2012-05-23 17:57:28 -0400] kallistec: you can remove them with knife node edit, or with a recipe that does something like node.delete(:nginx)
[2012-05-23 17:57:52 -0400] monvillalon: kallistec: I think the problem is that nginx::source calls include_attribute "nginx" and to him version hasn't been updated yet from the role so it uses the old one
[2012-05-23 18:00:37 -0400] kallistec: monvillalon: `include_attribute` is in the recipe? or an attributes file?
[2012-05-23 18:01:24 -0400] monvillalon: kallistec: in an attribute file
[2012-05-23 18:02:10 -0400] monvillalon: kallistec: this is opscode nginx recipe https://github.com/opscode-cookbooks/nginx/blob/master/attributes/source.rb
[2012-05-23 18:02:49 -0400] kallistec: monvillalon: that should be okay. if you do knife node edit on that node, do you see a bunch of nginx attributes?
[2012-05-23 18:02:55 -0400] eherot: cassarani: I can't vouch for that since we do the deploy:setup phase manually in our configuration
[2012-05-23 18:02:56 -0400] monvillalon: kallistec: wait.. hmmm its not the same one could knife give me an old version?
[2012-05-23 18:03:14 -0400] eherot: it just sets up a bunch of directories and symlinks I believe, so it should work
[2012-05-23 18:03:15 -0400] kallistec: there's only one version
[2012-05-23 18:05:45 -0400] cassarani: eherot: yes, by the looks of things Opscode's application cookbook will do that for you already
[2012-05-23 18:05:58 -0400] cassarani: eherot: but either way, thank you so much for clearing all that up for me
[2012-05-23 18:06:10 -0400] eherot: no problem at all
[2012-05-23 18:06:41 -0400] monvillalon: kallistec: I think i know what is happening, i just have a old nginx recipe
[2012-05-23 18:09:32 -0400] rocket: I am new to chef .. is there any penalty to uploading the same cookbook to a chef server over and over while in development of that zenpack?
[2012-05-23 18:09:43 -0400] rocket: err cookbook
[2012-05-23 18:10:34 -0400] UForgotten: rocket: depending on the type of cookbook it may be easier to test with shef or chef-solo until you think you have it doing what you want.
[2012-05-23 18:10:58 -0400] UForgotten: but I dont think it matters how many times you upload it hehe
[2012-05-23 18:11:33 -0400] rocket: UForgotten: most likely I will be doing searches etc so I will want to upload it etc..
[2012-05-23 18:12:03 -0400] UForgotten: ok. good luck :)
[2012-05-23 18:12:10 -0400] jtimberman: rocket: is your question really "Do I need to increment the version"?
[2012-05-23 18:12:23 -0400] rocket: maybe ..
[2012-05-23 18:12:31 -0400] jtimberman: to which the answer is no, but if you experience strangeness, you can delete w/ purge on the version and reupload.
[2012-05-23 18:12:45 -0400] rocket: jtimberman: thanks :)
[2012-05-23 18:13:23 -0400] rocket: jtimberman: I am going to take a whack at adding enterprise zenoss support to the zenoss zenpack .. assuming I can get Zenoss to allow me to release the changes back to the community
[2012-05-23 18:14:03 -0400] rocket: does anyone know of any cookbooks doing things with pacemaker yet?
[2012-05-23 18:14:13 -0400] rocket: or managing lvm volumes?
[2012-05-23 18:15:00 -0400] tubbo: hi guys
[2012-05-23 18:15:11 -0400] tubbo: just getting started with chef over here
[2012-05-23 18:16:07 -0400] eherot: tubbo: welcome!
[2012-05-23 18:19:08 -0400] geekbri: how frequent are the reviews of resolved tickets in jira?
[2012-05-23 18:19:14 -0400] geekbri: weekly?
[2012-05-23 18:19:50 -0400] paulmooring: geekbri: generally twice a week, is there something important in there?
[2012-05-23 18:19:55 -0400] hoover_damm: weekly
[2012-05-23 18:19:59 -0400] geekbri: paulmooring: well important to me ;)
[2012-05-23 18:20:02 -0400] hoover_damm: is the triage?
[2012-05-23 18:20:18 -0400] paulmooring: geekbri: which one?
[2012-05-23 18:20:23 -0400] hoover_damm: paulmooring, during the summit btm mentioned it was once a week
[2012-05-23 18:20:39 -0400] geekbri: paulmooring: its not all that important, i just submitted a patch to knife-ec2 that makes it a bit easier for others who are trying to call it from their plugins (me :-P )
[2012-05-23 18:20:40 -0400] hoover_damm: cool if that's changed as I really don't have a issue with that
[2012-05-23 18:20:47 -0400] geekbri: i think its knife_ec2-57
[2012-05-23 18:20:59 -0400] paulmooring: hoover_damm: we've been adding an extra on lately
[2012-05-23 18:21:00 -0400] geekbri: Yeah I'm more than fine with it, i was simply curious
[2012-05-23 18:21:02 -0400] hoover_damm: geekbri, knife-ec2 with proper name / tagging / vpc support would be swank
[2012-05-23 18:21:14 -0400] hoover_damm: paulmooring, been a bit busy lately
[2012-05-23 18:21:22 -0400] paulmooring: geekbri: do you have a link to the jira ticket?
[2012-05-23 18:21:24 -0400] geekbri: hoover_damm: well i can't say i put all that in:-P
[2012-05-23 18:21:51 -0400] geekbri: paulmooring: http://tickets.opscode.com/browse/KNIFE_EC2-57
[2012-05-23 18:26:32 -0400] jperry2: hey guys, is there a way to check if anything has changed on the chef server compared to another check?  Does it have any version number that is incremented whenever something has changed?
[2012-05-23 18:26:53 -0400] jperry2: Maybe the best thing to do is get the last version numbers of something and compare
[2012-05-23 18:27:10 -0400] jperry2: I'm thinking in terms of a CI environment
[2012-05-23 18:27:33 -0400] jperry2: since what is in your repo might not necessarily be on your chef server
[2012-05-23 18:30:50 -0400] yfeldblum: jperry2, you can walk the repo and walk chef-server-api and compare
[2012-05-23 18:31:59 -0400] yfeldblum: look at boundary/knife-plugins or jkeiser/knife-essentials for tips
[2012-05-23 18:32:24 -0400] jtimberman: chef, ohai, knife plugins and mixlib code reviews are currently twice a week.
[2012-05-23 18:32:38 -0400] jtimberman: cookbook code reviews haven't happend in a couple weeks due to chefconf, but will pick up again today
[2012-05-23 18:32:39 -0400] geekbri: hard working dudes and dudettes
[2012-05-23 18:32:44 -0400] jperry2: @yfeldblum - thanks
[2012-05-23 18:35:39 -0400] atomic-penguin: jtimberman, so someone maybe Chris said something about foodcritic test integration on the community site...
[2012-05-23 18:36:18 -0400] atomic-penguin: jtimberman, is there going to be an effort to clean up the opscode cookbooks to pass foodcritic?
[2012-05-23 18:37:00 -0400] martinisoft: foodcritic has been driving me to write better cookbooks, its nice to have a lint tester
[2012-05-23 18:37:16 -0400] hoover_damm: totally
[2012-05-23 18:37:28 -0400] hoover_damm: I started using jsonlint recently to avoid json fails
[2012-05-23 18:37:32 -0400] jtimberman: atomic-penguin: there's currently an effort on that.
[2012-05-23 18:37:54 -0400] jtimberman: atomic-penguin: andrew worked on that, we just haven't synced up all the branches yet.
[2012-05-23 18:38:07 -0400] martinisoft: there is a trick to get foodcritic running with Travis-CI, so im using that with my cookbooks
[2012-05-23 18:38:20 -0400] atomic-penguin: jtimberman, so is there an existing ticket on that, or if we want to help with that effort should we just open a per-cookbook ticket?
[2012-05-23 18:38:24 -0400] jtimberman: atomic-penguin: a test framework is being built as well, but i can't speak to the details of it yet.
[2012-05-23 18:38:35 -0400] jtimberman: i think we have an internal ticket
[2012-05-23 18:38:39 -0400] jtimberman: and i *think* the work is done
[2012-05-23 18:38:41 -0400] jtimberman: just not merged
[2012-05-23 18:38:45 -0400] geekbri: that is pretty awesome.
[2012-05-23 18:38:52 -0400] geekbri: I'd like to buy the owners of that project a case of beer
[2012-05-23 18:38:53 -0400] martinisoft: thats awesome! :)
[2012-05-23 18:39:41 -0400] martinisoft: overall I've been pretty impressed with the quality of the community cookbooks, but some of them definitely feel stale, some of them don't work on the newer chef without major complaints
[2012-05-23 18:41:08 -0400] geekbri: send those owners a pull request!
[2012-05-23 18:41:25 -0400] geekbri: ill have to test mine on the 0.10.10 although i suspect no issues.
[2012-05-23 18:41:49 -0400] atomic-penguin: martinisoft, seriously pull requests are more than welcome for most cookbooks
[2012-05-23 18:42:59 -0400] martinisoft: atomic-penguin, yeah, except one of them I can't find to do a pull request
[2012-05-23 18:43:02 -0400] jtimberman: opscode welcomes pull requests for our cookbooks
[2012-05-23 18:43:04 -0400] martinisoft: networking_basic
[2012-05-23 18:43:34 -0400] geekbri: They are pretty quick to accept a decent pull request once you sign the CLA
[2012-05-23 18:43:41 -0400] atomic-penguin: martinisoft, i sent the networking_basic guy a pull request, he merged it.  Then never uploaded it to the community site
[2012-05-23 18:43:43 -0400] jtimberman: http://wiki.opscode.com/display/chef/How+to+Contribute+to+Opscode+Cookbooks
[2012-05-23 18:43:52 -0400] jtimberman: atomic-penguin: seems to be common
[2012-05-23 18:44:00 -0400] jtimberman: cookbooks aren't just git repos
[2012-05-23 18:44:02 -0400] jtimberman: they're packages.
[2012-05-23 18:44:11 -0400] jtimberman: "packages"
[2012-05-23 18:44:20 -0400] jtimberman: yet people stick to just git
[2012-05-23 18:44:20 -0400] atomic-penguin: I even said in the pull request.  Pretty please, refresh your cookbook on the community site
[2012-05-23 18:44:27 -0400] geekbri: just be warned, you no longer get the care package :-P
[2012-05-23 18:44:45 -0400] martinisoft: I'm re-doing it from scratch with credit to the original author, linting it against foodcritic and submitting it via ticket to the community
[2012-05-23 18:44:49 -0400] geekbri: I made submitting my cookbook to the community site as part of my routine when i tag a release
[2012-05-23 18:45:01 -0400] geekbri: tag release in git, update Cheffile, upload cookbook to community site
[2012-05-23 18:45:21 -0400] geekbri: is it in your github?
[2012-05-23 18:45:24 -0400] jtimberman: no
[2012-05-23 18:45:26 -0400] jtimberman: its half started
[2012-05-23 18:45:39 -0400] geekbri: put it in your github account and maybe it'll end up full finished :-P
[2012-05-23 18:45:51 -0400] martinisoft: ship it! :)
[2012-05-23 18:45:56 -0400] geekbri: hehe
[2012-05-23 18:46:01 -0400] Blackavar: Similar to or interoperating with spork?
[2012-05-23 18:46:05 -0400] geekbri: I dont usually test my code, but when I do... its in production
[2012-05-23 18:46:25 -0400] jtimberman: Blackavar: not at all even remotely related :)
[2012-05-23 18:47:28 -0400] martinisoft: next on my list is a fork and pull for openssh
[2012-05-23 18:47:33 -0400] martinisoft: to add configuration options
[2012-05-23 18:48:05 -0400] jtimberman: by half started, i mean this: https://gist.github.com/c92c82e5b5322066eed3
[2012-05-23 18:48:07 -0400] jtimberman: :)
[2012-05-23 18:48:14 -0400] geekbri: hehehe
[2012-05-23 18:48:20 -0400] geekbri: I'm not sure that even qualifies as half started
[2012-05-23 18:48:53 -0400] atomic-penguin: geekbri, *read* its just an empty file with a license stub
[2012-05-23 18:49:24 -0400] rocket: geekbri: its only in his brain... but its glorious ...
[2012-05-23 18:50:06 -0400] geekbri: jtimberman: what was your view of the workflow, would this plugin actually tag the release in github? or would it just pull down and upload an already tagged commit
[2012-05-23 18:50:27 -0400] geekbri: i might go ahead and write it if i have time
[2012-05-23 18:50:54 -0400] jtimberman: geekbri: it's my own workflow when managing the opscode cookbook releases.
[2012-05-23 18:51:27 -0400] yfeldblum: for independent cookbooks (cookbooks in their own independent single-cookbook repository, not tied to someone's particular infrastructure repository), perhaps librarian-chef could provide some helpers for releasing cookbooks
[2012-05-23 18:51:30 -0400] geekbri: its a good idea, anything to get people to update their cookbooks on the community site as well as github
[2012-05-23 18:51:38 -0400] otterley: quick question: can roles be organized into subdirectories and referred to in the run_list ?  e.g. role['feature/nifty']
[2012-05-23 18:51:40 -0400] geekbri: yfeldblum: that would be wonderful
[2012-05-23 18:51:49 -0400] yfeldblum: at least in the form of rake tasks, much like bundler does
[2012-05-23 18:52:26 -0400] geekbri: my workflow is pretty crummy for uploading my cookbook.  I basically tag it in git, add it to my cheffile, update with librarian, then i use knife to upload it to the community site
[2012-05-23 18:52:39 -0400] geekbri: which is probably a pretty poor way to do it.
[2012-05-23 18:53:34 -0400] yfeldblum: however, i'm certainly not going to build such a thing that can be used from within an infrastructure repository; half the point of librarian-chef is to impel everyone to build good test harnesses and stick cookbooks in their own repos and test them independently and version them independently and release them independently :P
[2012-05-23 18:53:54 -0400] yfeldblum: by providing the carrot
[2012-05-23 18:54:46 -0400] jtimberman: the steps are https://gist.github.com/42c13e9419d974141f38
[2012-05-23 18:54:49 -0400] jtimberman: that i do
[2012-05-23 18:56:32 -0400] BryanWB: yo chefs!
[2012-05-23 18:56:41 -0400] yfeldblum: sup BryanWB
[2012-05-23 18:57:10 -0400] geekbri: hey HEY hey
[2012-05-23 18:58:46 -0400] Blackavar: Hmm?Opscode sorts, could a new version of install.msi have maybe been recently pushed? I'm now getting the "Cannot find a version for node[foo]" error that is supposed to have been fixed circa Ohai 0.6.8.
[2012-05-23 19:00:09 -0400] Blackavar: I've been bootstrapping nodes successfully for the last 3 days, and sometime this morning, all bootstraps have started failing with that.
[2012-05-23 19:00:56 -0400] Blackavar: ohai -version on the node reports 0.6.12 .
[2012-05-23 19:01:38 -0400] yfeldblum: geekbri, https://github.com/applicationsonline/librarian/issues/73 ?
[2012-05-23 19:03:14 -0400] yfeldblum: geekbri, with edits as of now?
[2012-05-23 19:03:44 -0400] iroller: Anybody had an issue with searching databag by id and getting two revisions of the same data bag as a result?
[2012-05-23 19:03:45 -0400] geekbri: ah yes, i was about to ask what cookbook_metadata would do :)
[2012-05-23 19:05:36 -0400] geekbri: yfeldblum: mmm yes that seems pretty darn good to me.  I'd love to know if others would use this as well
[2012-05-23 19:06:32 -0400] yfeldblum: geekbri, it would make for a slightly bigger carrot ...
[2012-05-23 19:08:05 -0400] yfeldblum: geekbri, it would make single-cookbook repos ever so slightly easier to do
[2012-05-23 19:08:46 -0400] Blackavar: Ahh, yup, looks like a new install.msi broke something. ohai -version on a node installed 2 hours ago gives 0.6.10 .
[2012-05-23 19:08:48 -0400] geekbri: yfeldblum: yes certainly.  I would use this I can tell you that.
[2012-05-23 19:12:29 -0400] yfeldblum: BryanWB, i hear that nodejs makes the web faster
[2012-05-23 19:13:00 -0400] geekbri: yfeldblum: its webscale!
[2012-05-23 19:13:12 -0400] yfeldblum: geekbri, and mongodb, that's webscale too
[2012-05-23 19:13:21 -0400] geekbri: shards
[2012-05-23 19:13:26 -0400] behemphi: LMAO just watched that again this morning
[2012-05-23 19:13:38 -0400] behemphi: my pig poo infection is healing nicely
[2012-05-23 19:14:37 -0400] yfeldblum: sounds nasty
[2012-05-23 19:14:58 -0400] behemphi: Y, it was pretty bad, I sharded in my pants a few times
[2012-05-23 19:44:27 -0400] UForgotten: is there an easy way to tell chef-solo to not load a recipe even if it appears in the runlist (for debugging with lots of inherited/included recipes) ?
[2012-05-23 19:46:20 -0400] jordan_c: can anyone point me to a good tomcat cookbook for centos5 that doesn't rely on jpackage?
[2012-05-23 19:59:32 -0400] organicveggie: Somehow I ended up with a node whose run_list includes an entry like: "recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[role[]]]]]]]]]]]]]]]]]"
[2012-05-23 19:59:37 -0400] organicveggie: How on earth can I remove it?
[2012-05-23 20:01:29 -0400] geekbri: organicveggie: impressive.  seems like the easiest way will be knife node edit <node name> and just delete that entry
[2012-05-23 20:02:05 -0400] erikh: it happens when you edit the run list from the commandline
[2012-05-23 20:02:11 -0400] erikh: at least that's how I've done it
[2012-05-23 20:02:12 -0400] geekbri: or you could do some copy and pasting and use node run_list remove <node name> <that crazy entry>
[2012-05-23 20:02:12 -0400] organicveggie: geekbri: my ignorance knows no bounds! i didn't even know about "knife edit".
[2012-05-23 20:02:23 -0400] organicveggie: run_list remove made it worse ... each time. :)
[2012-05-23 20:02:30 -0400] geekbri: well then dont do that :)
[2012-05-23 20:02:43 -0400] organicveggie: "recipe[recipe[recipe[recipe[role[]]]]]" => "recipe[recipe[recipe[recipe[recipe[recipe[recipe[role[]]]]]]]]" => etc.
[2012-05-23 20:02:51 -0400] organicveggie: knife node edit worked like a champ. thanks!
[2012-05-23 20:03:13 -0400] organicveggie: Note to self: don't make typos in bash scripts that are automatically adding roles to a node.
[2012-05-23 20:03:52 -0400] kisoku: is it possible to use node attributes in LWRP resource definitions ?
[2012-05-23 20:05:28 -0400] atomic-penguin: kisoku, its possible, but you should pass them as parameters to your LWRP
[2012-05-23 20:05:45 -0400] atomic-penguin: either in the resources file, or in recipe code
[2012-05-23 20:05:47 -0400] royh: organicveggie: that can happen even when you write it right (AND are using knife node edit. fix is to do it again...)
[2012-05-23 20:06:03 -0400] kisoku: well, I wanted a configurable default value for something
[2012-05-23 20:06:21 -0400] royh: we're (vg.no) using chef for most of our servers and I've seen that from time to time too
[2012-05-23 20:06:33 -0400] atomic-penguin: kisoku, right, so the best thing to do would be the default equal to the node attribute in your resources file
[2012-05-23 20:06:39 -0400] geekbri: kisoku the pattern i usually use is to set a sane default in the attributes file and then pass that to the LWRP
[2012-05-23 20:06:55 -0400] geekbri: you can also set defaults in the LWRP resource definition
[2012-05-23 20:07:02 -0400] atomic-penguin: *set the default equal to the node attribute
[2012-05-23 20:07:46 -0400] kisoku: attribute :foo, :kind_of => String, :default => node['foo']['path']
[2012-05-23 20:07:49 -0400] kisoku: like that ?
[2012-05-23 20:07:52 -0400] atomic-penguin: yep
[2012-05-23 20:08:15 -0400] kisoku: yeah ok, I just wanted an opinion on whether people found that heinous or not
[2012-05-23 20:08:20 -0400] geekbri: no not at all
[2012-05-23 20:08:22 -0400] atomic-penguin: nope
[2012-05-23 20:08:33 -0400] kisoku: sweet
[2012-05-23 20:08:34 -0400] atomic-penguin: its the reasonable thing to do
[2012-05-23 20:09:16 -0400] tubbo: hi guys, i'm having an issue with the unicorn cookbook. it's really an issue with the way i'm passing params into a definition
[2012-05-23 20:09:17 -0400] atomic-penguin: just document that behavior
[2012-05-23 20:09:52 -0400] tubbo: here's how i'm notating what port unicorn should be listening on: `listen "/tmp/unicorn.socket", {backlog: 64}`
[2012-05-23 20:10:03 -0400] atomic-penguin: so when someone overrides your node attribute, they aren't surprised why the LWRP isn't working correctly
[2012-05-23 20:10:17 -0400] tubbo: when i run `sudo chef-client` on my box, i get TypeError: can't convert String into Integer"
[2012-05-23 20:10:44 -0400] tubbo: what am i doing wrong? :) here's the cookbook i'm using https://github.com/opscode/cookbooks/tree/master/unicorn
[2012-05-23 20:10:59 -0400] atomic-penguin: tubbo, can you gist your error on gist.github.com
[2012-05-23 20:10:59 -0400] tubbo: the errors are being thrown in https://github.com/opscode/cookbooks/blob/master/unicorn/definitions/unicorn_config.rb
[2012-05-23 20:11:44 -0400] tubbo: atomic-penguin: https://gist.github.com/62c74a0b8fd802ad55d7
[2012-05-23 20:11:49 -0400] tubbo: do you need the stacktrace?
[2012-05-23 20:12:02 -0400] atomic-penguin: tubbo, yes please
[2012-05-23 20:12:28 -0400] tubbo: atomic-penguin: updated https://gist.github.com/62c74a0b8fd802ad55d7
[2012-05-23 20:12:48 -0400] geekbri: atomic-penguin: Sometimes I feel like its better to not set the defaults for the resource via node attributes in that manner, and I pass them in just to be explicit so people can't make that mistake
[2012-05-23 20:12:59 -0400] geekbri: atomic-penguin: I however see no issue using node attributes directly as the deafults
[2012-05-23 20:13:01 -0400] geekbri: defaults
[2012-05-23 20:13:28 -0400] atomic-penguin: geekbri, yeah that is why I said just document it in the README, so end users will expect that behavior
[2012-05-23 20:13:32 -0400] geekbri: yeah
[2012-05-23 20:16:07 -0400] atomic-penguin: tubbo, could I get you to post the Resource block that calls the definition?
[2012-05-23 20:16:44 -0400] atomic-penguin: tubbo, I don't see the problem right off, but I bet its something like passing a string when an int, or array, is expected.
[2012-05-23 20:18:59 -0400] atomic-penguin: tubbo, probably the problem is around elocal_web/recipes/default.rb Line 112
[2012-05-23 20:19:39 -0400] atomic-penguin: tubbo, or even Line 86
[2012-05-23 20:20:00 -0400] tubbo: atomic-penguin: https://gist.github.com/62c74a0b8fd802ad55d7
[2012-05-23 20:20:50 -0400] tubbo: atomic-penguin: line 112 is the start of the unicorn_config block
[2012-05-23 20:20:54 -0400] atomic-penguin: I had no idea this cookbook existed, I should've used it
[2012-05-23 20:20:58 -0400] tubbo: in the recipes/default.rb
[2012-05-23 20:21:00 -0400] tubbo: no you shouldn't
[2012-05-23 20:21:07 -0400] tubbo: because it doesn't work ;)
[2012-05-23 20:21:24 -0400] tubbo: but that might be a PEBKAC for all i know :D
[2012-05-23 20:21:46 -0400] atomic-penguin: tubbo, well maybe I could've *fixed* it.  Maybe it does work but the input is wrong too.
[2012-05-23 20:21:52 -0400] tubbo: haha
[2012-05-23 20:22:17 -0400] tubbo: i mean it probably is...i've been familiar with kinda how chef works but never did anything with it until yesterday
[2012-05-23 20:27:09 -0400] atomic-penguin: tubbo, okay so I think I know the problem
[2012-05-23 20:29:06 -0400] oddover: hey everyone. If I want to add some values to an attributes array, for a specific node, is this the right syntax to do it?: "default_attributes": {     "rules" : ["asdfasdfi12341234"]   } (assuming "rules" is the name of the array)
[2012-05-23 20:30:58 -0400] atomic-penguin: tubbo, try changing your listen line, https://gist.github.com/98482023cdf6eb28a6f4
[2012-05-23 20:32:39 -0400] kisoku: atomic-penguin: are you sure you can use node in LWRP resource ?
[2012-05-23 20:32:50 -0400] kisoku: I'm getting stack traces here
[2012-05-23 20:33:15 -0400] kisoku: do I have to use @node ?
[2012-05-23 20:33:28 -0400] atomic-penguin: kisoku, in your provider file you shouldn't
[2012-05-23 20:33:44 -0400] atomic-penguin: kisoku, you use the new_resource.whatever parameter name
[2012-05-23 20:33:49 -0400] kisoku: no
[2012-05-23 20:33:53 -0400] kisoku: not in the provider
[2012-05-23 20:34:03 -0400] kisoku: in the resource file
[2012-05-23 20:34:09 -0400] kisoku: hold on
[2012-05-23 20:34:16 -0400] atomic-penguin: kisoku, I would think that would be possible
[2012-05-23 20:35:50 -0400] kisoku: atomic-penguin: see gist in pm
[2012-05-23 20:38:03 -0400] UForgotten: oddover: that "looks" correct
[2012-05-23 20:38:42 -0400] tubbo: atomic-penguin: ahh that might make sense
[2012-05-23 20:40:36 -0400] oddover: ok. I can't seem to get it to work...
[2012-05-23 20:41:03 -0400] oddover: I'm almost convinced it's a bug in chef. I've tried just about everything
[2012-05-23 20:41:13 -0400] UForgotten: oddover: are you using chef-solo? and how are you trying to use it later?
[2012-05-23 20:42:03 -0400] UForgotten: oddover: I guess to help, people will need more context, such as pastebin of the json files, etc
[2012-05-23 20:42:14 -0400] oddover: UForgotten: yes, chef-solo. I'm using it like this: node["rules"]
[2012-05-23 20:42:31 -0400] oddover: yeah. I guess lemme look into pastebin
[2012-05-23 20:43:15 -0400] maek: should I be able to add https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb to my .chef/bootstrap dir and be able to knife bootstrap -d chef-full ? Im getting n undefined local var or method for first_boot
[2012-05-23 20:45:42 -0400] UForgotten: oddover: if you're using it as node["rules"] that would return the array
[2012-05-23 20:46:49 -0400] UForgotten: you would need to do something that compresses it like node["rules"].inspect or that iterates like node["rules"].each do something end
[2012-05-23 20:47:03 -0400] Urocyon: maek that's what I've done.   I haven't got that error though.
[2012-05-23 20:47:34 -0400] oddover: UForgotten: ok, that's where I'm reassigning it, so I can use it for a template
[2012-05-23 20:47:40 -0400] oddover: almost got the pastebin up.
[2012-05-23 20:49:42 -0400] oddover: UForgotten: http://pastebin.com/QJAsi75v
[2012-05-23 20:50:02 -0400] UForgotten: ok, first thing's first
[2012-05-23 20:50:14 -0400] UForgotten: you will want to use an iptables cookbook
[2012-05-23 20:50:27 -0400] UForgotten: reinventing the wheel will cause you endless frustration
[2012-05-23 20:50:39 -0400] oddover: eh...I haven't found any out there that do what I want
[2012-05-23 20:50:59 -0400] atomic-penguin: haven't found an iptables cookbook that I like
[2012-05-23 20:51:40 -0400] oddover: there's simple_iptables, which is what I modeled this after, but it still doesn't quite get it how I want it
[2012-05-23 20:52:20 -0400] oddover: if we were using ufw, I'd use that cookbook. it does basically what I want
[2012-05-23 20:52:24 -0400] UForgotten: I didnt see your .erb so I can't say but you're still passing an array so it has to iterate them
[2012-05-23 20:52:34 -0400] UForgotten: I found one that works reasonably well.
[2012-05-23 20:52:34 -0400] oddover: oh. urg.
[2012-05-23 20:53:29 -0400] Urocyon: maek, which version of chef are you using?
[2012-05-23 20:53:44 -0400] oddover: http://pastebin.com/3bSrQaiQ
[2012-05-23 20:53:45 -0400] oddover: there
[2012-05-23 20:54:07 -0400] oddover: UForgotten: What's the name of the one you use?
[2012-05-23 20:54:14 -0400] UForgotten: its actually the opscode one.
[2012-05-23 20:54:19 -0400] miah: hi
[2012-05-23 20:54:53 -0400] oddover: UForgotten: link?
[2012-05-23 20:55:26 -0400] UForgotten: oddover: https://github.com/opscode-cookbooks/iptables
[2012-05-23 20:56:10 -0400] UForgotten: oddover: is it passing the default asfdadsf instead of the rules?  Try node.set instead of default
[2012-05-23 20:56:36 -0400] UForgotten: the opscode cookbook works pretty well, you can create whatever custom chains you want inside of templates
[2012-05-23 20:56:41 -0400] oddover: UForgotten: atm, it's only getting the defaults
[2012-05-23 20:56:43 -0400] UForgotten: and use flags to add things to the templates
[2012-05-23 20:57:20 -0400] oddover: UForgotten: when you say node.set, where are you talking about?
[2012-05-23 20:57:25 -0400] UForgotten: default.rb
[2012-05-23 20:57:46 -0400] UForgotten: default["iptables"]["rules"] make it be node.set["iptables"]["rules"]
[2012-05-23 20:58:09 -0400] UForgotten: now keep in mind I'm a total noob myself
[2012-05-23 20:58:16 -0400] |shad0w|: I wouldn't use node.set
[2012-05-23 20:58:48 -0400] oddover: I tried it. didn't work
[2012-05-23 20:59:06 -0400] UForgotten: ok. I got nothing then. I'm still learning the ropes myself. but I've managed to take other code and make it work
[2012-05-23 20:59:10 -0400] jtgiri_: I just learn the hard way , if you do knife role create $role on existing role, it actually overrides the role , there should be a warning saying this role already exists
[2012-05-23 20:59:14 -0400] maek: Urocyon: knife is .10.8 as is the server
[2012-05-23 20:59:15 -0400] UForgotten: writing code from scratch doesn't work as well :)
[2012-05-23 21:00:12 -0400] oddover: UForgotten: you got that exact code to work?
[2012-05-23 21:00:14 -0400] Urocyon: hmmm.... there's a recently added line to that chef-full.erb, line 55, which is making a call out to chef_first.  so my guess is your error comes from that.
[2012-05-23 21:00:32 -0400] UForgotten: oddover: I don't know about your code.  I'm saying I've used the iptables cookbook
[2012-05-23 21:00:51 -0400] UForgotten: and I use node.set when needing to change attributes at node level
[2012-05-23 21:01:08 -0400] UForgotten: if that's bad form then its bad form, as I said, still learning. but chef-solo plays differently than chef-server
[2012-05-23 21:01:21 -0400] oddover: UForgotten: I've noticed
[2012-05-23 21:01:51 -0400] oddover: UForgotten: thanks for pointing me to the iptables cookbook though. I'll have to take a look and see if that meets my needs.
[2012-05-23 21:02:08 -0400] Urocyon: It may not work with 10.8.  I've only tried that update with 10.10.
[2012-05-23 21:03:07 -0400] UForgotten: I found it to be acceptable, you can create templates and attributes to do pretty much whatever.  The only thing that is hardcoded out of the box is a chain called FWR that it sends INPUT to, then a drop tcp and drop udp on FWR. The rest is up to you.
[2012-05-23 21:03:12 -0400] Urocyon: maek, you might try this version of cheff-full instead: https://raw.github.com/opscode/chef/85f3b203882d68ef77da3933c3c4790c2e6d3555/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-05-23 21:03:42 -0400] Blackavar: Anyone that was getting the 0.6.12 ohai and 'Cannot find a version for node[foo]' errors on Win nodes, looks like the current install.msi is correct now, and installing ohai 0.6.10 .
[2012-05-23 21:03:49 -0400] Urocyon: I used that successfully on 10.8.
[2012-05-23 21:08:34 -0400] maek: Urocyon: thanks!
[2012-05-23 21:09:59 -0400] UForgotten: oddover: my only suggestion is that it loads templates in alpha order, so you will want to numerically precede them.  for example 00_first 01_something 02_somethingelse 99_last
[2012-05-23 21:10:42 -0400] UForgotten: oddover: since the order does matter when loading iptables, chains have to be created first, can't accept after a drop, etc :)
[2012-05-23 21:27:00 -0400] josh_k: any tips on having chef drop binary files?
[2012-05-23 21:27:05 -0400] josh_k: or should we just not go there
[2012-05-23 21:30:58 -0400] JasonBox: hrm, I have been managing ifcfg-ethN with Chef, but starting to think I should be doing this with my bootstrapping process instead...
[2012-05-23 21:34:17 -0400] UForgotten: JasonBox: hey boxy, long time no see.
[2012-05-23 21:35:06 -0400] UForgotten: JasonBox: use cobbler and kickstart :)
[2012-05-23 21:41:28 -0400] aslan: what is the correct syntax to get language version info from node or ohai?
[2012-05-23 21:41:59 -0400] yfeldblum: josh_k, sure, stick the blobs on S3 or stick them on some apache server, and then in your chef recipe use remote_file
[2012-05-23 21:42:14 -0400] aslan: i want to know what version of ruby is installed on the node
[2012-05-23 21:43:46 -0400] kisoku: node[:languages][:ruby] ?
[2012-05-23 21:45:11 -0400] miah: hi
[2012-05-23 21:45:56 -0400] aslan: kisoku: thanks that worked
[2012-05-23 21:46:45 -0400] jkyle: I'm getting this error, but I'm on 0.10.10 => http://tickets.opscode.com/browse/COOK-781
[2012-05-23 21:47:22 -0400] josh_k: yfeldblum: yeah looking at cookbook_file too
[2012-05-23 21:47:22 -0400] josh_k: thx
[2012-05-23 21:48:13 -0400] yfeldblum: josh_k, sticking blobs in cookbooks is doable but, depending on your infrastructure & development practices& deployment practices, may not be ideal
[2012-05-23 21:48:27 -0400] jkyle: looks like it may have been removed. it's present in .10.8, but not in .10.10
[2012-05-23 21:48:30 -0400] josh_k: yfeldblum: yeah it's a small thing I'd like to distribute via git
[2012-05-23 21:49:13 -0400] Kepioo: Hi IRC #chef users - I am seeking help on chef installation
[2012-05-23 21:49:30 -0400] Kepioo: I went through the wiki on installing a node
[2012-05-23 21:50:04 -0400] Kepioo: this page : http://wiki.opscode.com/display/chef/Installing+Chef+Client+on+CentOS
[2012-05-23 21:50:35 -0400] Kepioo: the page ends with : upload your validation.pem and client.rb in /etc/chef
[2012-05-23 21:50:46 -0400] Kepioo: I don't understand where to take it from there
[2012-05-23 21:50:56 -0400] Kepioo: and how to have my chef server see that node
[2012-05-23 21:52:42 -0400] Blackavar: I think you might be confusing client and node and/or workstation.
[2012-05-23 21:53:01 -0400] Kepioo: that wouldn't be surprising
[2012-05-23 21:53:11 -0400] Kepioo: so I guess I want to setup a new node
[2012-05-23 21:53:16 -0400] Kepioo: let me read again the terminology
[2012-05-23 21:53:20 -0400] Kepioo: and confirm what I'm saying
[2012-05-23 21:54:05 -0400] Kepioo: I want to create a new node
[2012-05-23 21:54:14 -0400] Kepioo: I already have a chef server
[2012-05-23 21:54:22 -0400] Kepioo: and a workstation with knife working and configured
[2012-05-23 21:55:48 -0400] Kepioo: looking at the quick start guide, it seems like I need to install the chef client on my node : sudo gem install chef
[2012-05-23 21:56:05 -0400] Blackavar: Easiest way to create a new node is probably to bootstrap it if that's an option.
[2012-05-23 21:56:05 -0400] Kepioo: which I did (sudo gem install chef --no-ri --no-rdoc)
[2012-05-23 21:56:21 -0400] Kepioo: well,
[2012-05-23 21:56:33 -0400] Kepioo: I want to install ruby and other dependencies in /usr/local
[2012-05-23 21:56:42 -0400] Kepioo: all the deps are actually already installed
[2012-05-23 21:56:50 -0400] JasonBox: UForgotten: Oh, you?
[2012-05-23 21:57:04 -0400] Kepioo: I'm guessing bootstraping would ignore that
[2012-05-23 21:57:14 -0400] JasonBox: UForgotten: Actually using Kickstart for that, but found Cobbler to be menacing
[2012-05-23 21:58:01 -0400] UForgotten: No more menacing than chef :)
[2012-05-23 21:58:27 -0400] Blackavar: Bootstrapping should be using the omnibus client installer on CentOS, hm? If so, yes, it installs its own copies of the deps.
[2012-05-23 21:58:32 -0400] JasonBox: UForgotten: More menacing, since the Web UI blows consistently on F16 and other than encouragement to fix it form the mailing list, no help
[2012-05-23 21:58:39 -0400] JasonBox: Not knowing Python, I opted not to
[2012-05-23 21:59:09 -0400] JasonBox: Probably going to do something up in Ruby that satisfies my more limited requirements
[2012-05-23 22:06:10 -0400] Blackavar: If you have to do a non-bootstrap install and have the cert/config right, running chef-client should get the node registered.
[2012-05-23 22:07:28 -0400] oddover: I have a question on how to use attribute merging. So, according to the deep merge doc page, !merge: is going to be removed soon. Can anyone please tell me an how you suggest I remove things from an attribute array if I can't do that?
[2012-05-23 22:08:35 -0400] mattray: kallistec: ^^
[2012-05-23 22:12:01 -0400] Kepioo: nvmd - the install of chef was giving me warning about yaml, requiring to re-install ruby. I ended up using bootstrap and it worked like a charm
[2012-05-23 22:17:17 -0400] oddover: anyone? Bueller?
[2012-05-23 22:18:27 -0400] atomic-penguin: oddover, I believe mattray was passing the buck to kallistec to answer
[2012-05-23 22:18:42 -0400] oddover: ah, gotcha
[2012-05-23 22:18:49 -0400] oddover: kallistec: ?
[2012-05-23 22:18:49 -0400] bawt: kallistec: is it in a repo somewhere? I'll give it a shot tomorrow am
[2012-05-23 22:21:26 -0400] atomic-penguin: oddover, might want to ping the mailing list on that issue.  I'm not entirely sure what the plans for the deep merge code are.  Last I heard, we were keeping parts of that, and deprecating other parts which nobody ever uses.
[2012-05-23 22:22:19 -0400] yfeldblum: oddover, it's an array; in a recipe, you can delete the thing you don't want
[2012-05-23 22:22:46 -0400] yfeldblum: node.default["my-cookbook"]["array-key"].delete("some-unwanted-value")
[2012-05-23 22:23:00 -0400] oddover: yfeldblum: That seems like a hacky way to do it
[2012-05-23 22:23:11 -0400] yfeldblum: oddover, why does it seem so?
[2012-05-23 22:24:51 -0400] oddover: yfeldblum: well, I want to make a recipe that I can use across multiple groups of systems. So, I want a default set of attributes, but then be able to add/subtract (per role) which of those attributes I want. I'm dealing with iptables rules, btw.
[2012-05-23 22:25:02 -0400] atomic-penguin: oddover, you can operate on it any way you would in ruby
[2012-05-23 22:25:35 -0400] oddover: yfeldblum: what you suggest makes the recipe more specific to whatever I'm trying to do, which I don't want
[2012-05-23 22:25:47 -0400] oddover: yfeldblum: if I understand correctly
[2012-05-23 22:25:47 -0400] russss: utter noob question which I shouldn't be asking: if I'm writing a resource which has to add a line to a file, what's the best way to do that?
[2012-05-23 22:26:02 -0400] atomic-penguin: oddover, so you could subtract one set from another  `%w[ a b c ] - %w[ c d e ]`
[2012-05-23 22:26:03 -0400] russss: I want to say search for all the resources and add them, but that doesn't seem to be possible
[2012-05-23 22:26:21 -0400] oddover: atomic-penguin: is that a ruby thing?
[2012-05-23 22:26:28 -0400] atomic-penguin: oddover, yeah
[2012-05-23 22:26:32 -0400] jayjaygoes: hello world
[2012-05-23 22:26:33 -0400] yfeldblum: oddover, i'm guessing that if your cookbook exposed an interface (the attributes it listens to) in terms of the domain rather than in terms of the implementation, you wouldn't be having this issue
[2012-05-23 22:26:35 -0400] oddover: atomic-penguin: oh, ok. I kinda suck at ruby
[2012-05-23 22:27:03 -0400] oddover: yfeldblum: not sure what you mean
[2012-05-23 22:27:04 -0400] atomic-penguin: oddover, http://www.ruby-doc.org/core-1.9.3/Array.html
[2012-05-23 22:27:43 -0400] jayjaygoes: question for y'all... is it possible in a recipe to pull information about another node that's managed by chef?
[2012-05-23 22:27:53 -0400] yfeldblum: oddover, or you could have a second attribute for rule exclusions
[2012-05-23 22:28:11 -0400] jayjaygoes: i need the IP address for an AWS node prior to writing the config via the recipe
[2012-05-23 22:28:51 -0400] yfeldblum: oddover, the rule exclusions array would by default be empty, and your recipe would apply the rules from the rules attribute minus (set-theory difference) the rules from the rules-exclusions attribute
[2012-05-23 22:29:09 -0400] jayjaygoes: this machine will have its own role...
[2012-05-23 22:29:23 -0400] oddover: yfeldblum: that's also a good idea. I think I'll try that. Thank you.
[2012-05-23 22:29:25 -0400] jayjaygoes: so I can do a knife lookup to determine its IP (or their IPs)
[2012-05-23 22:29:32 -0400] yfeldblum: rules = node["my-cookbook"]["rules"] - node["my-cookbook"]["rules-exclusions"] ; rules.each do |rule| ... end
[2012-05-23 22:29:35 -0400] jayjaygoes: but not sure how to pull that info intoa recipe
[2012-05-23 22:30:36 -0400] yfeldblum: oddover, np, & that was actually suggested to me by atomic-penguin's comment, so thank him too :P
[2012-05-23 22:30:50 -0400] oddover: atomic-penguin: thank you
[2012-05-23 22:30:59 -0400] atomic-penguin: jayjaygoes, what the IP? its just node['ipaddress']
[2012-05-23 22:36:35 -0400] oddover: atomic-penguin: would this be the right syntax?
[2012-05-23 22:36:42 -0400] oddover: atomic-penguin: "rules" => (node["iptables"]["rules"] - node["iptables"]["default-rules-exclude"])
[2012-05-23 22:36:57 -0400] oddover: and then I use rules as an array, and do an each on it
[2012-05-23 22:38:34 -0400] oddover: it doesn't seem to be working
[2012-05-23 22:39:15 -0400] atomic-penguin: https://gist.github.com/2778273
[2012-05-23 22:39:19 -0400] atomic-penguin: shortcut ^^
[2012-05-23 22:39:52 -0400] oddover: ah. and I think I got it to work. I had something wrong in my attributes file
[2012-05-23 22:40:41 -0400] yfeldblum: oddover, calculate `rules` in your recipe, not in the attributes
[2012-05-23 22:41:08 -0400] yfeldblum: oddover, first line of your recipe is: iptables_rules = node["iptables"]["rules"] - node["iptables"]["default-rules-exclude"]
[2012-05-23 22:41:19 -0400] oddover: yea
[2012-05-23 22:41:20 -0400] yfeldblum: oddover, then from then on, you do e.g. `iptables_rules.each { |rule| ... }
[2012-05-23 22:41:32 -0400] oddover: yep, that's how I'm doing it
[2012-05-23 22:41:34 -0400] oddover: sorta
[2012-05-23 22:43:12 -0400] oddover: :) yup, it's working as expected now
[2012-05-23 22:43:18 -0400] oddover: Thank you mucho
[2012-05-23 22:44:54 -0400] atomic-penguin: okay off for a walk, later
[2012-05-23 22:45:36 -0400] atomic-penguin: oddover, i want to see this badass iptables cookbook when you're done.  i have a love/hate relationship with mine
[2012-05-23 22:46:00 -0400] mattray: atomic-penguin: always looking for extensions to the firewall cookbook, then we can do it up like the ufw cookbook
[2012-05-23 22:46:16 -0400] mattray: firewall has "fat" Resource Providers
[2012-05-23 22:46:33 -0400] mattray: so you can plug in different backends, right now it just supports ufw, but iptables would be pretty simple
[2012-05-23 22:46:39 -0400] atomic-penguin: mattray, I'll put it on my list of things to do
[2012-05-23 22:46:42 -0400] mattray: :)
[2012-05-23 22:46:47 -0400] mattray: undoubtedly a long list
[2012-05-23 22:47:16 -0400] c_t: Somewhere there's a list kept by self flagellating monks of all the chef tasks that people have put on their list of things to do
[2012-05-23 22:48:16 -0400] jtimberman: c_t: my to do list is pretty epic
[2012-05-23 22:48:18 -0400] kostyasha: are all videos on youtube from chefconf?
[2012-05-23 22:48:45 -0400] jtimberman: kostyasha: as in, are all the videos from chefconf posted on the opscode youtube account?
[2012-05-23 22:49:09 -0400] jtimberman: i believe the answer is "most, but perhaps not quite all, yet, as i have not compared the list."
[2012-05-23 22:49:17 -0400] mattray: getting there
[2012-05-23 22:49:35 -0400] kostyasha: jtimberman: sorry for my english
[2012-05-23 22:49:51 -0400] jayjaygoes: atomic-penguin: not the ip address of itself, the ip address of another node
[2012-05-23 22:58:47 -0400] oddover: atomic-penguin: I'd definitely be willing to share. :)
[2012-05-23 22:59:06 -0400] jayjaygoes: If I know the name of the chef role, can I access the details for servers in that role... from a recipe?
[2012-05-23 22:59:46 -0400] jayjaygoes: I want to make everything dynamic and not use VPC, so I can't be certain of the IP of my NFS server
[2012-05-23 23:00:04 -0400] jayjaygoes: I would like clients to boot and automatically know what IP to use for mounting the needed share
[2012-05-23 23:02:04 -0400] jtimberman: kostyasha: no need to apologize, i just wanted to make sure i understood the question.
[2012-05-23 23:09:47 -0400] jayjaygoes: Ok... looks like the wiki has something about what I want to do
[2012-05-23 23:09:55 -0400] jayjaygoes: app_servers = search(:node, 'role:appserver')
[2012-05-23 23:10:39 -0400] jayjaygoes: question is now what's the data type for app_servers and pulling the ip address from it
[2012-05-23 23:13:47 -0400] jayjaygoes: Is this correct?
[2012-05-23 23:14:03 -0400] jayjaygoes: search(:node, 'roles:company_x_php_nfs_server')
[2012-05-23 23:14:28 -0400] jayjaygoes: wait
[2012-05-23 23:14:43 -0400] jayjaygoes: nfs_server = search(:node, 'roles:company_x_php_nfs_server')
[2012-05-23 23:15:04 -0400] jayjaygoes: nfs_ip = "#{nfs_server[0][:ec2][:private_ip]}"
[2012-05-23 23:15:07 -0400] hoover_damm: the wiki should work
[2012-05-23 23:15:18 -0400] hoover_damm: feel free to test it out in shef -z
[2012-05-23 23:15:18 -0400] jayjaygoes: puts nfs_ip
[2012-05-23 23:15:25 -0400] jayjaygoes: ah
[2012-05-23 23:16:11 -0400] jayjaygoes: I'll test it out
[2012-05-23 23:16:13 -0400] jayjaygoes: thanks
[2012-05-23 23:21:08 -0400] jtimberman: jayjaygoes: the search will return an array of the objects in the index you specified.
[2012-05-23 23:21:20 -0400] jtimberman: jayjaygoes: so in a node search, its an array of matching Chef::Node objects.
[2012-05-23 23:52:02 -0400] jayjaygoes: thanks josh
[2012-05-23 23:52:28 -0400] jayjaygoes: another question about chef-client runs via knife...
[2012-05-23 23:52:36 -0400] jayjaygoes: do they run in parallel or in series?
[2012-05-23 23:53:05 -0400] jayjaygoes: so when I do "knife ssh ... 'chef-client'"
[2012-05-23 23:53:31 -0400] yfeldblum: `knife ssh` runs SSH in parallel across all the nodes present in the search results
[2012-05-23 23:54:05 -0400] jayjaygoes: I'm trying to figure out how to best manage a software deployment w chef/knife
[2012-05-23 23:54:09 -0400] jayjaygoes: if it does it in parallel
[2012-05-23 23:54:22 -0400] jayjaygoes: all servers would go down at the same time if I needed to do a restart
[2012-05-23 23:54:33 -0400] jayjaygoes: (not good)
[2012-05-23 23:56:05 -0400] jayjaygoes: no way to make it sequential?

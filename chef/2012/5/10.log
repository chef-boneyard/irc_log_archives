[2012-05-10 00:01:14 -0400] shuvo_: hoover_damn, I was thinking along those lines: specifically of that (I could have a daemon that checks if a certain file changed on a github repo and if so, schedule a chef-client run immediately)
[2012-05-10 00:01:36 -0400] shuvo_: but hmm, I have jenkins pull from the github repo and push it to the chef server
[2012-05-10 00:02:22 -0400] shuvo_: Couldn't I have jenkins do a chef-client run on specific nodes *after* it has pushed the commits to the chef server?
[2012-05-10 00:02:47 -0400] msf: I've been mulling over using jenkins
[2012-05-10 00:03:00 -0400] yfeldblum: shuvo_, use tags
[2012-05-10 00:03:26 -0400] cnf: whu? the apparmor cookbook on opscode _disables_ apparmor? o,O
[2012-05-10 00:03:30 -0400] yfeldblum: shuvo_, or watch branch heads with branch names =~ /^deploy-.*$/
[2012-05-10 00:04:20 -0400] shuvo_: apparmor is not something you want with chef
[2012-05-10 00:04:52 -0400] shuvo_: yfeldblum, could you give me a search term to google up tags?
[2012-05-10 00:04:59 -0400] cnf: shuvo_: what? why not?
[2012-05-10 00:06:02 -0400] yfeldblum: shuvo_, `git tag`?
[2012-05-10 00:07:13 -0400] shuvo_: yfeldblum, or branches and tags in git. doable. and then I tell jenkins to run chef-client on specific nodes when those tags are updated?
[2012-05-10 00:07:39 -0400] shuvo_: .
[2012-05-10 00:07:50 -0400] shuvo_: s/or/oh!/
[2012-05-10 00:08:18 -0400] yfeldblum: shuvo_, branch heads move while tags don't, but otherwise yes, you can do something like that
[2012-05-10 00:08:42 -0400] shuvo_: ah yes, tags mark a state
[2012-05-10 00:08:43 -0400] yfeldblum: shuvo_, it's preferable to watching changes to a specific file in git
[2012-05-10 00:08:52 -0400] shuvo_: I agree
[2012-05-10 00:09:23 -0400] shuvo_: lemme look into it
[2012-05-10 00:10:56 -0400] shuvo_: cnf, becasue we are lazy. hardworking people fix apparmor profiles
[2012-05-10 00:14:13 -0400] yfeldblum: since this is apparently confusing: automating a task is an order of magnitude harder than simply performing that task
[2012-05-10 00:14:52 -0400] yfeldblum: (but an order of magnitude easier than performing that task hundreds of times)
[2012-05-10 00:15:17 -0400] yfeldblum: rule of thumb; not gospel
[2012-05-10 00:33:07 -0400] cnf: is it me, or is chef-hosted being really really slow?
[2012-05-10 00:36:17 -0400] ssd7__: cnf: The top of the hour and half hours can occasionally get slow
[2012-05-10 00:36:30 -0400] cnf: hey ssd7__ :P
[2012-05-10 00:36:37 -0400] cnf: ssd7__: that problem seems gone, now
[2012-05-10 00:36:41 -0400] cnf: thanks for the help
[2012-05-10 00:36:59 -0400] ssd7__: cnf: no problem, sorry for the inconvience
[2012-05-10 00:37:10 -0400] cnf: it happens
[2012-05-10 00:38:01 -0400] cnf: oh, what now
[2012-05-10 00:39:20 -0400] cnf: i'm just gonna cry a bit now
[2012-05-10 00:39:35 -0400] ssd7__: :(
[2012-05-10 00:40:11 -0400] cnf: i just don't know where to turn anymore
[2012-05-10 00:40:19 -0400] cnf: gonna watch some tv, give my brain a rest
[2012-05-10 00:49:06 -0400] shuvo_: cnf, how about I share a chef-server ovf with you hmm?
[2012-05-10 00:49:29 -0400] cnf: shuvo_: dude, i don't need any more added confusion
[2012-05-10 00:50:36 -0400] shuvo_: sure. it's just I find running my own chef server easier and faster ;-) good luck
[2012-05-10 00:50:57 -0400] cnf: shuvo_: yeah, because you know that shit
[2012-05-10 00:51:03 -0400] cnf: i'm still trying to grasp the basics
[2012-05-10 00:51:13 -0400] ssd7: cnf: Sometimes it is good to step away for a bit.  Anything specific your struggling with at the moment?
[2012-05-10 00:51:47 -0400] cnf: ssd7: right now, it just feel every step i take adds more problems and confusin
[2012-05-10 00:52:02 -0400] cnf: i just wanna go to a basic place where i understand stuff, and know what i'm doing
[2012-05-10 00:52:29 -0400] cnf: now my chef-client is throwing errors again
[2012-05-10 00:52:41 -0400] cnf: idno why, it was working before
[2012-05-10 00:53:10 -0400] shuvo_: cnf, are you trying to run specific recipes that are now failing?
[2012-05-10 00:53:58 -0400] cnf: no, i haven't even gotten back to that yet
[2012-05-10 00:54:08 -0400] cnf: i'm getting 404's somewhere on -hosted
[2012-05-10 00:54:10 -0400] cnf: i think
[2012-05-10 00:54:22 -0400] ssd7: cnf: If yoiu pastebin the error I can take a look.  I would say it is sometimes a good idea to start with writing very simple recipes that you've written yourself.  Such as a recipe that simply installs a package (http://wiki.opscode.com/display/chef/Resources#Resources-Package)
[2012-05-10 00:55:07 -0400] cnf: ssd7: atm, i'm using simple cookiecutter recipies for apt, vim and git
[2012-05-10 00:55:16 -0400] cnf: ssd7: and a cookbook called "learning'
[2012-05-10 00:55:19 -0400] cnf: with my own stuff
[2012-05-10 00:55:30 -0400] shuvo_: chef-client -l debug has helped me before
[2012-05-10 00:55:44 -0400] shuvo_: you need to sort out the hosted chef stuff out before you can continue learning
[2012-05-10 00:55:46 -0400] cnf: https://gist.github.com/2650181 is what i'm getting now
[2012-05-10 00:56:13 -0400] shuvo_: do the run, but now with chef-client -l debug
[2012-05-10 00:56:15 -0400] ssd7: can you run that again with -l debug as shuvo_ recommended and then post it?
[2012-05-10 00:57:22 -0400] cnf: https://gist.github.com/2650181
[2012-05-10 00:57:30 -0400] cnf: updated
[2012-05-10 01:00:36 -0400] shuvo_: are your orag names correct with what you registered at hosted chef?
[2012-05-10 01:00:39 -0400] shuvo_: org
[2012-05-10 01:01:15 -0400] cnf: well yeah, it registers the client/node correctly
[2012-05-10 01:01:21 -0400] cnf: even downloads the cookbooks
[2012-05-10 01:01:44 -0400] cnf: and then i get a 404 in something
[2012-05-10 01:01:53 -0400] cnf: but i can't figure out on what
[2012-05-10 01:02:09 -0400] shuvo_: follow that s3 link
[2012-05-10 01:02:15 -0400] shuvo_: that what's 404s
[2012-05-10 01:02:33 -0400] ssd7: cnf: Can you gist the output of `knife cookbook download learning` and `knife cookbook show learning VERSION` where you replace version with the version number of your learning cookbook
[2012-05-10 01:03:29 -0400] cnf: wt?
[2012-05-10 01:04:18 -0400] cnf: https://gist.github.com/2650181 updated
[2012-05-10 01:05:26 -0400] cnf: it exists, but it's empty
[2012-05-10 01:05:27 -0400] cnf: wt?
[2012-05-10 01:05:42 -0400] ssd7: For some reason the s3 link that it is generating for your recipe is bad
[2012-05-10 01:05:48 -0400] ssd7: can you try to upload the cookbook again?
[2012-05-10 01:06:01 -0400] cnf: doing that right now
[2012-05-10 01:06:10 -0400] cnf: ssd7: how did you see it was the learning one?
[2012-05-10 01:07:28 -0400] ssd7: From the debug log.  In the log you can see it attempt to syncronize the learning cookbook and fail on the first HTTP get request it makes to S3
[2012-05-10 01:07:45 -0400] cnf: oh?
[2012-05-10 01:07:48 -0400] cnf: i missed that
[2012-05-10 01:07:58 -0400] cnf: what line is that?
[2012-05-10 01:08:00 -0400] ssd7: I read these all day :)
[2012-05-10 01:08:24 -0400] shuvo_: 463
[2012-05-10 01:08:26 -0400] ssd7: starts around 454
[2012-05-10 01:08:28 -0400] cnf: hehe, true
[2012-05-10 01:08:50 -0400] ssd7: 463 is where you can see it start the get that fails
[2012-05-10 01:09:08 -0400] cnf: damn, i missed that one line
[2012-05-10 01:09:12 -0400] cnf: yeah, i saw it fail
[2012-05-10 01:09:21 -0400] cnf: i just couldn't figure out what it was failing on
[2012-05-10 01:09:41 -0400] cnf: weird
[2012-05-10 01:09:49 -0400] cnf: dno how that happened
[2012-05-10 01:10:39 -0400] ssd7: cnf: Yeah, I'm a little concerned you might still be feeling some lingering effects of the problem we had this morning.  Also, while we used it when debugging, I would generally avoid using --purge when deleting cookbook with hosted chef
[2012-05-10 01:10:58 -0400] cnf: ok
[2012-05-10 01:11:10 -0400] cnf: i didn't use it when i deleted the learning one just now
[2012-05-10 01:11:36 -0400] cnf: ssd7: truth be told, it might have been me who messed it up
[2012-05-10 01:11:41 -0400] cnf: i have no clue how, or when
[2012-05-10 01:12:53 -0400] yfeldblum: ssd7, might want to try out some more interesting reading: http://www.amazon.com/Game-Thrones-Song-Fire-Book/dp/0553386794
[2012-05-10 01:13:19 -0400] ssd7: yfeldblum: Working through those now
[2012-05-10 01:13:35 -0400] cnf: i should have my dad buy the kindle version
[2012-05-10 01:13:37 -0400] shuvo_: people bought HBO just to watch that
[2012-05-10 01:13:45 -0400] cnf: i'll ask him next week ^^;
[2012-05-10 01:16:37 -0400] ssd7: cnf: Did uploading that cookbook again resolve the issue?
[2012-05-10 01:16:46 -0400] cnf: ssd7: sorry, yes
[2012-05-10 01:16:51 -0400] cnf: it did
[2012-05-10 01:17:15 -0400] cnf: thanks
[2012-05-10 01:17:51 -0400] ssd7: no problem.  glad to hear that is sorted.
[2012-05-10 01:18:03 -0400] bemu: I was so dubious of that show, but it's -really- good. Makes me want to read the books.
[2012-05-10 01:18:21 -0400] ssd7: I'm headed out but you should feel free to file another ticket if you keep running into these issues with cookbooks.
[2012-05-10 01:18:47 -0400] cnf: ssd7: ok, will do
[2012-05-10 01:18:54 -0400] cnf: ssd7: thanks for the help
[2012-05-10 01:18:55 -0400] ssd7: bemu: yeah, I started the books after watching the first season earlier this month.  The books are very good and from what I can see the show stays pretty close to them.
[2012-05-10 01:19:28 -0400] bemu: I heard the same. I haven't read fiction in  ages.
[2012-05-10 01:20:15 -0400] bemu: The last three books I read were Atlas Shrugged, The Republic, and The Master and the Margarita. :B
[2012-05-10 01:20:43 -0400] yfeldblum: i've read the first few books, but haven't seen the show yet
[2012-05-10 01:22:14 -0400] ssd7: Alrighty, have a nice night all :)
[2012-05-10 01:22:17 -0400] bemu: Night!
[2012-05-10 01:22:22 -0400] cnf: \o
[2012-05-10 01:31:13 -0400] hoover_damn: it's been awhile
[2012-05-10 01:42:50 -0400] valdezjoelt: hi
[2012-05-10 01:44:33 -0400] yfeldblum: valdezjoelt, hi
[2012-05-10 01:56:17 -0400] cwj: been trying to improve the copperegg revealcloud cookbook but their shell script installer isn't doing me any favors
[2012-05-10 01:57:20 -0400] dangerdave: I deploy my app via a git resource (amongst other things.) Right now the git revision is an attribute specified in the environment. Do other people use data bags instead? Is there an advantage one way or the other? (Or an entirely better approach?)
[2012-05-10 01:58:06 -0400] bemu: dangerdave: We use data bags keyed by environment.
[2012-05-10 01:58:16 -0400] bemu: a la the application cookbook
[2012-05-10 01:58:35 -0400] cwj: i use environment attributes
[2012-05-10 01:58:46 -0400] dangerdave: Any reason one might be preferable?
[2012-05-10 01:59:09 -0400] bemu: It just really depends on your use case. Any will work.
[2012-05-10 01:59:18 -0400] bemu: We have many applications, and many environments.
[2012-05-10 01:59:43 -0400] bemu: but all applications are deployed using the same application cookbook, modeled after the opscode one.
[2012-05-10 02:00:12 -0400] cwj: i cant speak to the reasoning behind using data bags in the application cookbook, but for one of my proprietary apps it is useful to be able to have every node in production running version Z, but leave select nodes at version X because the customer isnt ready for the new code yet
[2012-05-10 02:00:20 -0400] bemu: and we actually use the exact opposite method for another place (scribe servers)
[2012-05-10 02:00:29 -0400] dangerdave: cwj: yeah, that's kind of interesting.
[2012-05-10 02:00:30 -0400] bemu: So we use environment variables which are keyed by databag items.
[2012-05-10 02:01:11 -0400] dangerdave: cool, thanks guys. Seems like TMTOWTDI is the word of the day.
[2012-05-10 02:01:33 -0400] bemu: cwj: That is the limitation, yes. Theoretically, though, you have two different environments there.
[2012-05-10 02:02:00 -0400] cwj: bemu: in my case i dont want to build an environment for one (maybe two) server(s)
[2012-05-10 02:02:02 -0400] bemu: production-z and production-x
[2012-05-10 02:02:19 -0400] bemu: Yah, I understand, for sure.
[2012-05-10 02:03:39 -0400] cnf: damn, all the opscode guys left?
[2012-05-10 02:03:58 -0400] bemu: Highly doubt that.
[2012-05-10 02:04:00 -0400] cnf: what do you do with typos etc on the wiki?
[2012-05-10 02:04:05 -0400] bemu: Fix them! :D
[2012-05-10 02:04:35 -0400] cnf: and dead links?
[2012-05-10 02:05:02 -0400] bemu: Can you fix the dead links?
[2012-05-10 02:05:07 -0400] bemu: If so, do so. If not, leave a note.
[2012-05-10 02:05:54 -0400] cnf: no, i don't know where it is supposed to link
[2012-05-10 02:10:31 -0400] jessicab: cnf - whats the dead link?
[2012-05-10 02:10:46 -0400] cnf: jessicab: in http://wiki.opscode.com/display/chef/Templates
[2012-05-10 02:11:01 -0400] cnf: Hey, Cfengine people!, and a link to http://cfwiki.org/cfwiki/index.php/Singlecopy_Nirvana
[2012-05-10 02:11:25 -0400] cnf: and above that it says "If your host was foo.example.com than your folder needs to be named host-foo.example.com."
[2012-05-10 02:11:32 -0400] cnf: should be then
[2012-05-10 02:14:06 -0400] cnf: oh balls, the wiki needs a different login from your general login?
[2012-05-10 02:15:26 -0400] jessicab: cnf - hm.. seems like the cfengine wiki might be down? ill make a note though to check it out tomorrow
[2012-05-10 02:16:00 -0400] cnf: ok
[2012-05-10 02:27:13 -0400] dangerdave: It looks like the rake in the opscode cookbooks repo doesn't know about environments?
[2012-05-10 02:28:28 -0400] cwj: maybe so, i never use the opscode rake tasks though
[2012-05-10 02:30:04 -0400] cgriego: will a 0.10.10 version of omnibus/chef-full be released alongside the final version of chef 0.10.10?
[2012-05-10 02:30:34 -0400] dangerdave: ah, looks like there is an "environments" branch of opscode/chef-repo although it doesn't seem to fix the lack of environment support
[2012-05-10 02:33:30 -0400] cwj: dangerdave: are you wanting to upload all your environments at once
[2012-05-10 02:33:35 -0400] cwj: i just use knife as needed
[2012-05-10 02:33:56 -0400] dangerdave: cwj: yeah, it looks like this Rakefile stuff in opscode/chef-repo is pretty much out of date.
[2012-05-10 02:35:37 -0400] yfeldblum: dangerdave, you typically want to use knife, which is the generic CLI for chef-server-api, instead of rake
[2012-05-10 02:36:04 -0400] dangerdave: yfeldblum: why does the official opscode/chef-repo have a bunch of rake tasks, then?
[2012-05-10 02:36:47 -0400] yfeldblum: dangerdave, yeah, that's not what it is
[2012-05-10 02:36:56 -0400] dangerdave: yfeldblum: ?
[2012-05-10 02:37:08 -0400] yfeldblum: dangerdave, it's a starter kit, which you are expected to customize & in time outgrow
[2012-05-10 02:37:34 -0400] dangerdave: yfeldblum: sure. but i would assume the starter kit would, y'know, support chef's basic features?
[2012-05-10 02:37:53 -0400] miah: cnf: jessicab http://www.archivum.info/help-cfengine@gnu.org/2004-12/00059/singlecopy-nirvana.html
[2012-05-10 02:37:56 -0400] miah: =)
[2012-05-10 02:38:55 -0400] jessicab: miah - oh interesting, thanks
[2012-05-10 02:39:02 -0400] yfeldblum: dangerdave, the rake tasks are a remnant of the starter kit of a previous era; the real starter kit today is the directory structure
[2012-05-10 02:39:28 -0400] cwj: didnt the rake tasks predate knife?
[2012-05-10 02:39:41 -0400] cwj: i forget
[2012-05-10 02:39:57 -0400] dangerdave: yfeldblum: makes sense. i assumed this predated knife. so should i fork opscode/chef-repo and remove the Rakefile (and config directory) and send a pull request? this is the kind of stuff new users like me encounter and have _no idea_ where things stand.
[2012-05-10 02:40:20 -0400] miah: i think there is already a ticket that covers rm'ing the rakefile
[2012-05-10 02:40:37 -0400] dangerdave: miah: cool
[2012-05-10 02:40:50 -0400] yfeldblum: dangerdave, no; you should not fork that repo; you should instead make a blank repo with a similar directory strucure
[2012-05-10 02:41:19 -0400] dangerdave: yfeldblum: my point is: would opscode accept a pull request that removes the rake file? so there's no confusion?
[2012-05-10 02:41:25 -0400] yfeldblum: dangerdave, knife needs to ship with `knife new` or something, which generates a blank directory structure
[2012-05-10 02:42:43 -0400] yfeldblum: dangerdave, you can if you want, but i personally wouldn't spend much time on it
[2012-05-10 02:43:25 -0400] miah: i think.. http://tickets.opscode.com/browse/CHEF-2353
[2012-05-10 02:44:02 -0400] dangerdave: yfeldblum: It won't take much time, and the good news is that new users to chef won't get confused and spend time wondering about it. (I suppose the downside to TMTOWTDI in the chef world is: to new users, it's never clear which way most people do it, and ten of the twenty ways you might try to do it are busted right now anyway.)
[2012-05-10 02:44:28 -0400] mehlah: Does anyone have any experience with the :rollback action of the deploy resource ?
[2012-05-10 02:44:54 -0400] yfeldblum: dangerdave, new users to chef need to understand that they need to create a new repository of their own, rather than fork opscode's
[2012-05-10 02:44:54 -0400] mehlah: after a rollback, won't the next chef-client run just redeploy the code I just rolled back from ?
[2012-05-10 02:45:50 -0400] mehlah: any tip for rolling back quickly without editing roles and recipes ?
[2012-05-10 02:46:01 -0400] mehlah: no equivalent to a good old cap deploy:rollback ?
[2012-05-10 02:46:21 -0400] dangerdave: yfeldblum: Two things. (1) the only reason i mentioned forking was to provide a pull request to fix this rakefile-is-outdated bug, and (2) if opscode doesn't want people to use (git repo, technique, whatever) X, they probably shouldn't make X available in the first place?
[2012-05-10 02:47:18 -0400] dangerdave: anyway, thanks all -- understood now.
[2012-05-10 02:47:37 -0400] cwj: dangerdave: i think you make a good point, i encourage you to add that comment to the ticket miah linked
[2012-05-10 02:47:42 -0400] yfeldblum: dangerdave, (1) is repairing the cupboards in a house which is to be knocked down in a week; (2) dunno what opscode says - i don't speak for 'em - that's what i say
[2012-05-10 02:48:43 -0400] yfeldblum: dangerdave, opscode's chef-repo is an historical artifact, preserved because it remains somewhat useful even if not completely current
[2012-05-10 02:49:56 -0400] yfeldblum: dangerdave, i sometimes state my views without the prefix "my personal view is that" :P
[2012-05-10 02:50:16 -0400] dangerdave: yfeldblum: haha, understood. me too ;-)
[2012-05-10 02:52:28 -0400] yfeldblum: mehlah, not really much experience with the rollback action, sorry
[2012-05-10 02:53:04 -0400] dangerdave: yfeldblum:  for what it's worth, I think your perspective is probably a result of your huge and long-running experience with chef. it's worthing stepping back and considering how new developers will approach _today's_ opscode world. the empathetic perspective, i guess. there's a massive amount of new stuff to learn. commands, bits of architecture, repositories up on github, a big and not-always-accurate wiki, etc. right now, it's
[2012-05-10 02:53:05 -0400] dangerdave: basically up to developers to take the time with each piece and answer: is this piece current? does it work? is it compatible with these other pieces? (this last point is especially a concern with the public opscode cookbooks -- they don't always play nicely with one another.) everything opscode can do to set up sign posts for new developers -- and to prevent them from going down blind alleys -- is something that would probably increa
[2012-05-10 02:53:05 -0400] dangerdave: adoption _and_ make users happy. it's win win. opscode has the cash to do it! ;-)
[2012-05-10 02:53:39 -0400] yfeldblum: dangerdave, that's all true
[2012-05-10 02:54:04 -0400] dangerdave: yfeldblum: and, it's probably the most text i've ever typed in one go on IRC. But I digress. thanks again for your help. ;-)
[2012-05-10 02:55:06 -0400] yfeldblum: dangerdave, not a problem
[2012-05-10 03:05:27 -0400] valdezjoelt: hi miah :)
[2012-05-10 03:06:36 -0400] miah: hi
[2012-05-10 03:07:01 -0400] valdezjoelt: hi miah, is it possible in chef when installing packages, just want to point to specified repo like my own custom repo
[2012-05-10 03:07:12 -0400] bemu: Of course.
[2012-05-10 03:07:45 -0400] valdezjoelt: thanks +bemu how do i do that?
[2012-05-10 03:08:38 -0400] miah: yes. just use the apt or yum lwrp's to set that up
[2012-05-10 03:08:52 -0400] miah: look at chef-apt and chef-yum depending on your distribution
[2012-05-10 03:09:01 -0400] bemu: You could use the apt cookbook to manage your repos, or you could use the source attribute of the package resource.
[2012-05-10 03:09:57 -0400] valdezjoelt: thanks +bemu and miah :)
[2012-05-10 03:27:52 -0400] valdezjoelt: hi miah, does the Package->Source attribute can be a folder path ? on my case i have this repo http://rpmrepo.local:777/monitor_install/linux/x86_64/
[2012-05-10 03:45:55 -0400] miah: valdezjoelt: why not make that a yum repository and just add that via the yum cookbook? https://github.com/opscode-cookbooks/yum
[2012-05-10 05:35:06 -0400] sparc_: Hmm, it looks like the reprepro cookbook depends on apache2
[2012-05-10 05:36:05 -0400] sparc_: If we want to make it depend on our own pared down apache2 cookbook, are we encouraged to clone the cookbook and modify?
[2012-05-10 05:37:29 -0400] sparc_: it looks like we just modify default.rb ... don't know about the metadata files though
[2012-05-10 05:40:21 -0400] yfeldblum: sparc_, if you want to go that route, it's on you to ensure that your pared-down cookbook remains sufficiently compatible with the original/upstream cookbook, to the extent that anything else you're using (such as the reprepro cookbook) requires
[2012-05-10 05:41:20 -0400] yfeldblum: sparc_, i wouldn't suggest it, except as a second choice behind making the original/upstream apache2 cookbook work in your scenario
[2012-05-10 05:44:57 -0400] sparc_: hmm, ok.  we might be okay with maintaining that, reprepro is pretty small.
[2012-05-10 05:45:15 -0400] sparc_: i wasn't sure about how to think about the upstream cookbooks though.
[2012-05-10 05:45:20 -0400] sparc_: thanks for the info
[2012-05-10 07:28:43 -0400] railsraider: I have a chef server and a vagrant VM with knife-solo to test my cookbooks, I am trying to use the opscode users cookbook and have created the data bag on the chef server- however when i run the chef solo on vagrant it looks for the chef server localhost:4000 how can I test it locally?
[2012-05-10 07:52:05 -0400] nyaray: Hello all! We're wondering if chef-server will resolve symlinks when cookbook_file is being called, we've got both licensed and homebrewed binaries that we want to distribute and have been semi-stuck on a distribution scheme..
[2012-05-10 08:23:38 -0400] gale: railsraider: you can't use the opscode users cookbook with chef solo - it relies on searching which is only available with a server
[2012-05-10 08:23:51 -0400] railsraider: ok
[2012-05-10 08:24:33 -0400] railsraider: i want to clone the repository of the cookbooks instead of uploading one by one
[2012-05-10 08:24:46 -0400] railsraider: where does chef server stores the cookbooks?
[2012-05-10 08:25:50 -0400] gale: you can use -all to knife and it will upload them all
[2012-05-10 08:27:04 -0400] gale: I'm not sure where the server keeps them - i just clone then upload my cookbook repro again with knife
[2012-05-10 08:29:56 -0400] railsraider: knife cookbook upload -all ?
[2012-05-10 08:30:03 -0400] railsraider: gale: its not working
[2012-05-10 08:30:18 -0400] railsraider: doh
[2012-05-10 08:30:20 -0400] railsraider: sorry
[2012-05-10 08:32:03 -0400] gale: yeah --all
[2012-05-10 08:54:44 -0400] theozaurus: Anyone else experiencing difficulties with clients talking to the Opscode hosted service?
[2012-05-10 08:57:24 -0400] theozaurus: Looks very similar to this: DEBUG: EOFError: end of file reached
[2012-05-10 08:57:24 -0400] theozaurus: /usr/lib/ruby/1.9.1/openssl/buffering.rb:174:in `sysread_nonblock'
[2012-05-10 08:57:24 -0400] theozaurus: /usr/lib/ruby/1.9.1/openssl/buffering.rb:174:in `read_nonblock'
[2012-05-10 08:57:25 -0400] theozaurus: /usr/lib/ruby/1.9.1/net/protocol.rb:141:in `rbuf_fill'
[2012-05-10 08:57:25 -0400] theozaurus: /usr/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
[2012-05-10 08:57:25 -0400] theozaurus: /usr/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
[2012-05-10 08:57:25 -0400] theozaurus: /usr/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
[2012-05-10 08:57:25 -0400] theozaurus: /usr/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
[2012-05-10 08:57:53 -0400] theozaurus: https://gist.github.com/1145017
[2012-05-10 08:59:47 -0400] ashb: theozaurus: given that i had a node check in 1 minute ago it looks fine from EC2 for me
[2012-05-10 09:01:02 -0400] theozaurus: ashb: It seems intermittent, it fails randomly on GET's to different roles
[2012-05-10 09:01:05 -0400] theozaurus: or nodes
[2012-05-10 09:01:12 -0400] ashb: huh
[2012-05-10 09:02:59 -0400] theozaurus: Maybe it's a flaky connection here, but I wouldn't have thought it would be enough to make it unusable
[2012-05-10 09:06:01 -0400] theozaurus: We've had an issue before: http://help.opscode.com/discussions/problems/1140-seeing-high-number-of-500-errors where whenever we hit a bad node it would 500. This is similar, but we don't get the 500, just an EOF
[2012-05-10 09:25:00 -0400] jannel: does anyone have experience with proxying connections to chef server through apache and https?
[2012-05-10 09:25:07 -0400] Mithrandir: I do
[2012-05-10 09:25:10 -0400] Mithrandir: it works just fine
[2012-05-10 09:25:56 -0400] jannel: I'm having problems with it. I'm getting access denied responses through the proxy for requests that work just fine directly
[2012-05-10 09:26:19 -0400] jannel: do I have to change Chef's configuration somehow?
[2012-05-10 09:27:16 -0400] jannel: It seems that Chef-server responses contain urls that are not accessible through the proxy
[2012-05-10 09:30:22 -0400] Mithrandir: I use:
[2012-05-10 09:30:22 -0400] Mithrandir:         ProxyPass / http://localhost:4000/
[2012-05-10 09:30:22 -0400] Mithrandir:         ProxyPassReverse / http://localhost:4000/
[2012-05-10 09:46:40 -0400] jannel: Mithrandir: yup. for example knife client list works just fine, but knife role from file my_role.rb fails..
[2012-05-10 09:46:51 -0400] jannel: I wonder whether the host name used matters..
[2012-05-10 09:47:13 -0400] Mithrandir: with ssl, probably
[2012-05-10 09:53:33 -0400] jannel: I guess I have to do some debugging with Wireshark :p
[2012-05-10 09:56:53 -0400] jannel: Mithrandir: do you somehow provide chef with the ssl certificate or does your https connection go only to apache?
[2012-05-10 10:28:58 -0400] Mithrandir: jannel: I give chef (but not chef-server) the cert
[2012-05-10 10:59:41 -0400] railsraider: i have a deb package that i need to download how do i do that with chef?
[2012-05-10 11:01:16 -0400] railsraider: where are the chef server cookbooks?
[2012-05-10 11:03:28 -0400] railsraider: can i use wget with chef?
[2012-05-10 11:09:41 -0400] vdvluc: railsraider: you could use the script resource and use wget from there
[2012-05-10 11:10:54 -0400] railsraider: vdvluc: you mean the execute resource?
[2012-05-10 11:11:14 -0400] vdvluc: railsraider: that is also possible
[2012-05-10 11:11:26 -0400] railsraider: k thank you!
[2012-05-10 11:12:12 -0400] vdvluc: railsraider: but with the script resource you can set a current working directory, which can be handy when downloading stuff
[2012-05-10 11:12:45 -0400] railsraider: how do i re-run the run list on a node?
[2012-05-10 11:12:54 -0400] railsraider: do i use knife cook?
[2012-05-10 11:13:27 -0400] vdvluc: i just restart chef-client on the node
[2012-05-10 11:23:01 -0400] laurent\: a hosted chef account is needed to upload/comments on community/cookbooks ?
[2012-05-10 12:27:12 -0400] jannel: Mithrandir: how?
[2012-05-10 12:28:13 -0400] Mithrandir: ssl_verify_mode    :verify_peer
[2012-05-10 12:28:13 -0400] Mithrandir: ssl_ca_file "/etc/ssl/certs/Varnish-Software-CA.pem"
[2012-05-10 12:28:22 -0400] Mithrandir: in client.rb
[2012-05-10 13:01:38 -0400] nyaray: Hello fellow cooks! Is there a way of making chef _not_ fail on broken symlinks?
[2012-05-10 13:02:18 -0400] nyaray: there's a file that _will_ be on the server, but not the computer pushing the chef-setup to the chef-server and I'm currently unable to run rake install
[2012-05-10 13:05:54 -0400] atomic-penguin: nyaray, chef-setup?
[2012-05-10 13:06:20 -0400] nyaray: as in repository for chef, containing the information about the setup
[2012-05-10 13:07:27 -0400] nyaray: I could probably have phrased my question in a better way :)
[2012-05-10 13:07:35 -0400] nyaray: but hopefully that explains it
[2012-05-10 13:10:12 -0400] atomic-penguin: nyaray, so you're unable to run rake install on your management workstation, or the managed chef node?
[2012-05-10 13:10:20 -0400] nyaray: the former
[2012-05-10 13:10:37 -0400] nyaray: because of a broken symlink, that in this particular case is expected to be broken
[2012-05-10 13:10:43 -0400] nyaray: thing is, the file is in place on the server
[2012-05-10 13:10:46 -0400] nyaray: so the recipe wont fail
[2012-05-10 13:10:56 -0400] nyaray: unless there's some chef magic going on that I am not aware of
[2012-05-10 13:11:09 -0400] atomic-penguin: so the mgmt workstation then?
[2012-05-10 13:11:46 -0400] nyaray: why I don't have the file on my WS at the specified location?
[2012-05-10 13:12:02 -0400] nyaray: sorry, not really sure what you meant by that question
[2012-05-10 13:12:36 -0400] nyaray: (I'm not a native speaker, so some idiomatic things might get lost in transmission)
[2012-05-10 13:13:36 -0400] atomic-penguin: So if rake isn't working on your management workstation, I would check the PATH
[2012-05-10 13:14:12 -0400] atomic-penguin: i.e. if you're using omnibus packages, ensure /opt/opscode/embedded/bin is in the search $PATH
[2012-05-10 13:14:37 -0400] nyaray: sorry, it is working, but it fails when it attempts to do something with a file that I've symlinked in our private cookbooks files directory
[2012-05-10 13:15:04 -0400] riccardotacconi: Hi I am getting FATAL: Chef::Exceptions::FileNotFound
[2012-05-10 13:15:14 -0400] nyaray: it feels as if there's something I'm not explaining properly here.. :P
[2012-05-10 13:15:21 -0400] atomic-penguin: Can you gist a 'ls -l' of the symlink and the link target
[2012-05-10 13:15:59 -0400] nyaray: it is not an omnibus issue
[2012-05-10 13:16:04 -0400] atomic-penguin: https://gist.github.com/
[2012-05-10 13:16:20 -0400] atomic-penguin: Just paste the 'ls -l' output of the symlink and its target
[2012-05-10 13:16:39 -0400] nyaray: why? like I said, it's not an omnibus-related issue :s
[2012-05-10 13:16:53 -0400] atomic-penguin: Not sure I follow, why you have something symlinked in your chef-repo
[2012-05-10 13:17:39 -0400] nyaray: because I do not wish to put a big .deb-file in the chef-repo, so it's been symlinked so that the server will have it when pushing out the configuration in the repo
[2012-05-10 13:17:44 -0400] zts: nyaray: I also don't understand exactly what it is you are doing, or what failure you are seeing - could you please pastebin some things?
[2012-05-10 13:17:47 -0400] zts: ah
[2012-05-10 13:18:38 -0400] nyaray: we don't want to track a licensed .deb-file (that will be upgraded from time to time) in our chef-repo, so we thought we would be able to symlink it in the files directory under our private cookbook
[2012-05-10 13:18:40 -0400] atomic-penguin: nyaray, so in other words, when you rake or knife cookbook upload.  knife doesn't follow symlinks
[2012-05-10 13:18:54 -0400] nyaray: problem is that it _is_ following symlinks :P
[2012-05-10 13:18:56 -0400] nyaray: at least that one
[2012-05-10 13:19:21 -0400] riccardotacconi: could someone explain me how 'template' works?
[2012-05-10 13:19:30 -0400] riccardotacconi: I get FATAL: Chef::Exceptions::FileNotFound
[2012-05-10 13:19:32 -0400] zts: nyaray: where is the actual file, though?
[2012-05-10 13:19:39 -0400] riccardotacconi: what the base path?
[2012-05-10 13:19:43 -0400] zts: nyaray: you have the .deb installed (or accessible) on each of your nodes already?
[2012-05-10 13:19:48 -0400] atomic-penguin: templates?
[2012-05-10 13:19:48 -0400] bawt: templates is http://wiki.opscode.com/display/chef/Templates
[2012-05-10 13:20:01 -0400] nyaray: zts: the actual file is on the box running chef-server
[2012-05-10 13:20:13 -0400] zts: nyaray: okay, that won't actually help here
[2012-05-10 13:20:26 -0400] zts: nyaray: if you want the file to be part of the cookbook, you need to be able to upload it from your client
[2012-05-10 13:20:47 -0400] nyaray: ok. so I'm assuming that there's more magic going on than we thought at first
[2012-05-10 13:20:50 -0400] nyaray: from here on
[2012-05-10 13:20:57 -0400] atomic-penguin: nyaray, otherwise, you could remote_file it in from like a webserver or something
[2012-05-10 13:21:06 -0400] zts: nyaray: possibly, it doesn't work to hack chef this way, generally :)
[2012-05-10 13:21:23 -0400] zts: nyaray: so yes, we also do what atomic-penguin says - have a webserver with the file, and download it from there
[2012-05-10 13:21:41 -0400] nyaray: how do I make it non internet-accessible
[2012-05-10 13:21:43 -0400] nyaray: ?
[2012-05-10 13:21:56 -0400] nyaray: (thanks a million for taking your time to discuss this with me, btw :P)
[2012-05-10 13:22:54 -0400] zts: we use open source chef, and so just run Apache on the same host to serve some files
[2012-05-10 13:23:01 -0400] zts: are you using Hosted Chef?
[2012-05-10 13:23:27 -0400] zts: (ie, our chef server is not internet-accessible anyway)
[2012-05-10 13:23:30 -0400] atomic-penguin: For example, I have a private webserver (firewall it off, change the Directory access to lock it down) and I use to kickstart things.  I'll sometimes make a site specific cookbook that uses remote_file to pull down proprietary components from the private webserver
[2012-05-10 13:25:00 -0400] nyaray: we've got an open source chef setup
[2012-05-10 13:25:57 -0400] nyaray: thing is, the computer hosting it is a vps that's internet accessible, precluding the use of a simple http server
[2012-05-10 13:26:01 -0400] atomic-penguin: I've totally put rpm files in git though too
[2012-05-10 13:26:02 -0400] nyaray: -based setup
[2012-05-10 13:26:23 -0400] nyaray: but it not our .deb-file
[2012-05-10 13:26:32 -0400] nyaray: we're paying a license to use it
[2012-05-10 13:27:06 -0400] nyaray: also, from the repository point of view, the .deb-file is just a big old binary blob
[2012-05-10 13:27:28 -0400] nyaray: which, from our point of view, should be managed separately
[2012-05-10 13:27:33 -0400] LinuxHorn: morning all
[2012-05-10 13:27:49 -0400] atomic-penguin: nyaray, yeah but that doesn't become a problem unless you distribute that cookbook.  If its for internal use only, it doesn't really matter where the licensed file lives.
[2012-05-10 13:29:23 -0400] atomic-penguin: nyaray, your best option given your requirements seems to be remote_file the .deb from a private webserver.
[2012-05-10 13:29:42 -0400] nyaray: private as in "not internet accessible"?
[2012-05-10 13:30:40 -0400] nyaray: I can see your point regarding our distributing of the cookbook itself.. but wouldn't it be unnecessary bloating of the repo?
[2012-05-10 13:30:45 -0400] atomic-penguin: nyaray, correct
[2012-05-10 13:31:31 -0400] atomic-penguin: nyaray, for sure, revision management of binary files is certainly inefficient
[2012-05-10 13:33:28 -0400] nyaray: another thing is that we'll be distributing our own software in a similar manner
[2012-05-10 13:33:41 -0400] nyaray: and we want to be able to roll out upgrades rather liberally
[2012-05-10 13:33:49 -0400] nyaray: that is to say, multiple times a day
[2012-05-10 13:34:33 -0400] nyaray: is there a way to fetch files over HTTP in a private manner with chef?
[2012-05-10 13:34:46 -0400] atomic-penguin: nyaray, so is the primary distribution method for your own software, revision control, or packages?
[2012-05-10 13:35:37 -0400] nyaray: the problem I'm currently trying to solve is that of distributing our private software and a licensed .deb-file, to be specific
[2012-05-10 13:36:20 -0400] nyaray: our own software and the package need not travel through the exact same flows
[2012-05-10 13:36:45 -0400] nyaray: but it feels as if though the might be the same up to a certain point, where we have our way of handling software vs dpkg
[2012-05-10 13:36:59 -0400] nyaray: am I still making sense? :P
[2012-05-10 13:37:06 -0400] atomic-penguin: remote_file is http://wiki.opscode.com/display/chef/Resources#Resources-RemoteFile
[2012-05-10 13:37:57 -0400] atomic-penguin: if your own software is hosted in something like git or svn, you can use a deploy resource
[2012-05-10 13:37:59 -0400] atomic-penguin: deploy?
[2012-05-10 13:37:59 -0400] bawt: deploy is http://wiki.opscode.com/display/chef/Deploy+Resource
[2012-05-10 13:38:10 -0400] nyaray: yeah, I've read about remote_file and a bit about deploy
[2012-05-10 13:38:50 -0400] nyaray: our issues so far: 1) remote file doesn't seem to be able to transmit it privately over the wire and 2) deploy is run on each node
[2012-05-10 13:39:05 -0400] nyaray: at least as we've understood things
[2012-05-10 13:39:15 -0400] nyaray: s/as/according to how/
[2012-05-10 13:39:30 -0400] ashb: deploy is a resource just like remote_file
[2012-05-10 13:39:44 -0400] ashb: so is only run on the nodes that have the cookbook in their runlist
[2012-05-10 13:40:12 -0400] nyaray: right, so in practice it would mean that every node would compile the whole package from source
[2012-05-10 13:41:09 -0400] nyaray: oops, not package.. I meant our proprietary stuff
[2012-05-10 13:41:14 -0400] nyaray: just to be clear about that
[2012-05-10 13:41:35 -0400] atomic-penguin: nyaray, you put in some idempotent check so that it only does that when there is something new to compile
[2012-05-10 13:42:21 -0400] atomic-penguin: nyaray, like only_if { File.exists("/tmp/upgrade") } or deploy revision "master"
[2012-05-10 13:43:18 -0400] nyaray: we're building things in erlang and are using the provided releasemanagement tools, which don't really work that way
[2012-05-10 13:45:08 -0400] nyaray: when we've got a new commit on master (totally runable, production ready, copy) we want to compile and bundle it up
[2012-05-10 13:45:17 -0400] nyaray: then distribute it to all the nodes with roles that entail running it
[2012-05-10 13:45:44 -0400] nyaray: and finally tell them to upgrade
[2012-05-10 13:45:47 -0400] atomic-penguin: Okay, specify the the revision as the commit-ish you want to deploy then
[2012-05-10 13:46:48 -0400] ddk: can anyone point me to a cookbook that installs Ruby 1.9.3 and Rails 3.1?
[2012-05-10 13:46:56 -0400] nyaray: it's ok if we always work with the latest commit from master (it's meant to be used that way)
[2012-05-10 13:47:21 -0400] nyaray: the issue is that we don't want to have the production machines compiling and bundling our software for the upgrade
[2012-05-10 13:47:38 -0400] mpasternacki: Hey, do you know whether chef-client loads role attributes before or after cookbook attributes?
[2012-05-10 13:47:49 -0400] mpasternacki: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run does not mention loading roles at all.
[2012-05-10 13:47:53 -0400] atomic-penguin: nyaray, then codify the deploy strategy that works for you and your company
[2012-05-10 13:48:41 -0400] atomic-penguin: nyaray, the existing deploy resource is quite flexible, and I think you may find there is a way to use it or one of the other SCM resources to do what you need
[2012-05-10 13:49:28 -0400] mpasternacki: (also: is there any particular order in which recipes' attributes/*.rb files are loaded?)
[2012-05-10 13:50:31 -0400] atomic-penguin: mpasternacki, I believe all attribute files are loaded from a given cookbook, and in alphabetical order
[2012-05-10 13:51:22 -0400] nyaray: atomic-penguin: I'm guessing that that entails setting up a builder role and adding the necessary recipes for building and bundling our stuff
[2012-05-10 13:51:40 -0400] nyaray: as well as distributing it
[2012-05-10 13:52:05 -0400] mpasternacki: atomic-penguin: I'm more curious about order in which cookbooks are considered
[2012-05-10 13:52:29 -0400] mpasternacki: I'd guess also alphabetical?
[2012-05-10 13:53:02 -0400] nyaray: which means that we've basically got some fancy plumbing provided from chef, but not much more. crassly put
[2012-05-10 13:53:17 -0400] atomic-penguin: mpasternacki, run_list order, last one specified wins.  attributes are always loaded alphabetically by cookbook, unless you use the include_attribute
[2012-05-10 13:53:57 -0400] nyaray: atomic-penguin: _thanks_ for your time and feedback :)
[2012-05-10 13:54:16 -0400] riccardotacconi: do you know where I can set up node[:passenger][:module_path]
[2012-05-10 13:54:18 -0400] zts: atomic-penguin: are you sure?  The docs disagree
[2012-05-10 13:54:30 -0400] zts: http://wiki.opscode.com/display/chef/Cookbook+Attributes#CookbookAttributes-CookbookAttributeFileOrdering
[2012-05-10 13:54:33 -0400] atomic-penguin: zts, link?
[2012-05-10 13:54:38 -0400] zts: (this surprised me too)
[2012-05-10 13:54:41 -0400] zts: but I haven't tested it
[2012-05-10 13:55:06 -0400] zts: oh wait, is that also what you meant and I misparsed?
[2012-05-10 13:55:08 -0400] atomic-penguin: zts, seems to confirm what I just said
[2012-05-10 13:55:17 -0400] zts: sorry, I was confused by your mention of run_list order
[2012-05-10 13:56:26 -0400] atomic-penguin: zts, okay, for example I can set a default in sysctl, and override it in oracle.  I would need to add a dependency to sysctl, and include_recipe "sysctl" in my oracle cookbook
[2012-05-10 13:57:10 -0400] atomic-penguin: I would also need to include_attribute in oracle to load the sysctl attributes
[2012-05-10 13:57:14 -0400] zts: yeah
[2012-05-10 13:58:10 -0400] atomic-penguin: So when I call the template resource for "sysctl" by way of include in "oracle", the attribute in "oracle" wins
[2012-05-10 14:01:29 -0400] railsraider: how do i do DEBIAN_FRONTEND=noninteractive with chef apt-get installs
[2012-05-10 14:04:14 -0400] riccardotacconi: I am using chef-solo, I changed a recipe, how can I apply the changes?
[2012-05-10 14:06:42 -0400] siezer: "we move all our web services off of port 80 for 'security'". *twitch*
[2012-05-10 14:08:41 -0400] jonlives: hanks :)t
[2012-05-10 14:08:47 -0400] jonlives: whoops
[2012-05-10 14:14:26 -0400] yfeldblum: nyaray, so ... host your own package repository ... every time you update the source, rebuild it & repackage it with a bumped version & push a new package .. http://wiki.debian.org/SettingUpSignedAptRepositoryWithReprepro
[2012-05-10 14:15:14 -0400] yfeldblum: nyaray, you can obviously configure your package repository machine with chef, and you can use chef-client's search to configure the /etc/apt/sources.list.d/private.list on each machine that needs to install the package
[2012-05-10 14:16:06 -0400] nyaray: yfeldblum: that's an interesting idea..
[2012-05-10 14:16:17 -0400] riccardotacconi: I am using chef-solo, I changed a recipe, how can I apply the changes?
[2012-05-10 14:16:47 -0400] nyaray: but I'm not familiar enough with apt to be sure of that it is familiar with erlangs release handling
[2012-05-10 14:17:04 -0400] nyaray: we'll be doing hot code upgrades :)
[2012-05-10 14:17:24 -0400] nyaray: wouldn't want to have apt stopping stuff just to start the new things
[2012-05-10 14:18:21 -0400] yfeldblum: nyaray, you get to write your own hooks and include them in the debian package
[2012-05-10 14:18:45 -0400] yfeldblum: nyaray, google reveals: http://engineering.yakaz.com/erlang-packaging-on-debian-and-live-upgrade.html
[2012-05-10 14:19:21 -0400] nyaray: yfeldblum: hadn't looked into it since it hadn't been up for discussion, but thanks for that :)
[2012-05-10 14:20:37 -0400] backwacking: quick dumb question. I am successfully kicking off ec2 instances with a few recipes I have tweaked and all is well. I can't seem to kick off the users cookbook. I have created and can list my data bags....."FATAL: ArgumentError: Cannot find a recipe matching default in cookbook users." Sure I am overlooking something stupid. BTW this is a chef/client scenario.
[2012-05-10 14:21:15 -0400] yfeldblum: backwacking, did you `knife cookbook upload users`?
[2012-05-10 14:21:19 -0400] backwacking: yes
[2012-05-10 14:21:26 -0400] backwacking: and if i do a list it is in there
[2012-05-10 14:21:36 -0400] yfeldblum: backwacking, does the cookbook users have a file "recipes/default.rb" ?
[2012-05-10 14:21:41 -0400] cron0: hi! chef noob here. I'm having a problem uploading a cookbook from my workstation: http://pastebin.com/HasW7JPP chef-server was installed from the package at rbel.frameos.org. any ideas?
[2012-05-10 14:22:04 -0400] backwacking: no and thats what i assumed it needed. I just grabbed the one from opscode for testing and there is no default in that cookbook either
[2012-05-10 14:22:29 -0400] yfeldblum: backwacking, so in your run-list, you get to specify which *recipe* is in the run-list, *not* which cookbook
[2012-05-10 14:22:39 -0400] nyaray: yfeldblum: how good as your idea may be it is a bit, to quote my boss, like "shooting a rat with a bazooka", for our current scale :/
[2012-05-10 14:22:58 -0400] eherot: cron0: can you paste the contents of your knife config file too (minus any keys, obviously)
[2012-05-10 14:23:15 -0400] yfeldblum: backwacking, change your run-list to select the recipe you want, which must match a file in the cookbook's "recipes/" directory
[2012-05-10 14:23:31 -0400] backwacking: hmmmm. ok. let me try that now.
[2012-05-10 14:23:39 -0400] yfeldblum: nyaray, jfyi, the rat has a howitzer ... you might want to get on that :P
[2012-05-10 14:23:42 -0400] backwacking: thanks!
[2012-05-10 14:23:53 -0400] cron0: eherot: didn't think of knife.rb. I think I found the problem: cache_options( :path => '/root/.chef/checksums' )
[2012-05-10 14:24:06 -0400] eherot: cron0: thought it might be something like that ;-)
[2012-05-10 14:24:17 -0400] cron0: eherot: thanks!
[2012-05-10 14:24:22 -0400] eherot: np!
[2012-05-10 14:24:53 -0400] nyaray: yfeldblum: we will be hiring a devops person (or more..) when there's more money and things for her to do, but as of now...
[2012-05-10 14:25:14 -0400] yfeldblum: nyaray, :P
[2012-05-10 14:25:42 -0400] nyaray: be sure, that person will be packing heat.
[2012-05-10 14:28:58 -0400] yfeldblum: nyaray, so what i suggested is a rather rigorous approach, aka a lofty goal ... such things do not always give immediate results, unfortunately
[2012-05-10 14:31:12 -0400] nyaray: indeed. we want to do things properly, nicely and all... but you know.. resources in startups. :P
[2012-05-10 14:31:17 -0400] nyaray: nuff said
[2012-05-10 14:32:09 -0400] riccardotacconi: I am using chef-solo, I changed a recipe, how can I apply the changes?
[2012-05-10 14:32:10 -0400] riccardotacconi: I am using chef-solo, I changed a recipe, how can I apply the changes?
[2012-05-10 14:43:10 -0400] kailosBryan: Using Chef 10.8, I suddenly started getting this when executing a knife bootstrap with a custom bootstrap template: ERROR: OpenSSL::Cipher::CipherError: data not multiple of block length
[2012-05-10 14:43:43 -0400] kailosBryan: It seems to be hitting this problem before it even loads the template
[2012-05-10 14:46:42 -0400] mpasternacki: atomic-penguin, zts: thanks!
[2012-05-10 14:51:19 -0400] kailosBryan: Anyone there?
[2012-05-10 14:53:07 -0400] SplasPood: doh, chefconf promo code expired
[2012-05-10 14:58:43 -0400] gp5st: hello
[2012-05-10 14:59:22 -0400] gp5st: so, i have a windows box and I'm trying to bootstrap it with knife.  I'm constantly getting 409 Conflicts, even though my node name is unique
[2012-05-10 15:02:37 -0400] gp5st: they are ec2 boxes, so their host names should also be uniqe
[2012-05-10 15:12:35 -0400] sam__: hey yall
[2012-05-10 15:12:41 -0400] detaer: hi
[2012-05-10 15:12:49 -0400] sampikesley: oop
[2012-05-10 15:12:53 -0400] sampikesley: that was me
[2012-05-10 15:12:54 -0400] sampikesley: anyway
[2012-05-10 15:13:18 -0400] sampikesley: I want to give my ec2 nodes their chef names into /etc/hostname
[2012-05-10 15:13:34 -0400] sampikesley: what's the attribute path to get this?
[2012-05-10 15:13:56 -0400] sampikesley: chef[:hostname] gives me the crappy ec2 internal name
[2012-05-10 15:15:56 -0400] flashmanbahadur: sampikesley: I use knife ec2 to launch mine
[2012-05-10 15:16:01 -0400] flashmanbahadur: new_hostname = Chef::Config[:node_name].gsub(/_/, '-')
[2012-05-10 15:16:14 -0400] flashmanbahadur: that gives me the hostname as a legal name
[2012-05-10 15:19:44 -0400] sampikesley: that works
[2012-05-10 15:19:46 -0400] sampikesley: ta :)
[2012-05-10 15:27:33 -0400] yfeldblum: `node.name`
[2012-05-10 15:33:11 -0400] geekbri: any chance somebody has called the knife-ec2 plugin from their own knife plugin and wants to share that example with me :)
[2012-05-10 15:36:06 -0400] yfeldblum: geekbri, in your own knife plugins, prefer to use the Fog API & the Chef API directly (rather than trying to c&c other knife plugins)
[2012-05-10 15:36:08 -0400] gmcinnes: Howdy chefs.
[2012-05-10 15:36:43 -0400] geekbri: yfeldblum: hrm yes i see.... I was hoping to not have to replicate the functionality of knife-ec2 though.  That doesn't seem like something i'd want.
[2012-05-10 15:36:53 -0400] geekbri: Perhaps mine shouldn't be a knife plugin at all then.
[2012-05-10 15:37:15 -0400] gmcinnes: chef-solo doesn't work with environments, but I have some recipes that rely on environments, so I'd like to globally declare a node.chef_environment if one's not set. How / where should I do that?
[2012-05-10 15:38:06 -0400] yfeldblum: gmcinnes, that sounds like the path of most resistance
[2012-05-10 15:38:20 -0400] gmcinnes: huh. that's unlike me :)
[2012-05-10 15:38:27 -0400] gmcinnes: yfeldblum: what do you suggest instead?
[2012-05-10 15:39:21 -0400] gmcinnes: yfeldblum: basically the use case is that I have staging and prod machines that differ by use of environments. But I build out dev machines using chef-solo b/c they are very transient
[2012-05-10 15:39:57 -0400] yfeldblum: gmcinnes, wherever you check environments in the cookbooks, first check whether you're in solo or client/server mode
[2012-05-10 15:42:24 -0400] yfeldblum: is_in_solo = Chef::Config.solo ; is_in_client = !Chef::Config.solo
[2012-05-10 15:42:53 -0400] gmcinnes: right. was just looking at the code on github.
[2012-05-10 15:45:59 -0400] geekbri: yfeldblum: you really think it would make more sense to recreate the entire functionality of knife-ec2, rather than just require it and call it directly ?
[2012-05-10 15:48:15 -0400] yfeldblum: geekbri, depends on what you're trying to do
[2012-05-10 15:49:09 -0400] yfeldblum: geekbri, that's not an ironclad rule; that's a preference, which could easily be outweighed by the particulars of the situation
[2012-05-10 15:49:15 -0400] geekbri: yfeldblum: trying to make it easier for people here to launch test hadoop clusters.  Basically I have a YML file that models the cluster.  Of course since we use EC2, it needs to generate a series of knife ec2 create calls.
[2012-05-10 15:49:44 -0400] yfeldblum: geekbri, gotcha
[2012-05-10 15:49:45 -0400] geekbri: yfeldblum: so the idea is anybody can just do knife hadoop_cluster <assorted options> and it will make all the proper knife server ec2 create calls.
[2012-05-10 15:50:21 -0400] geekbri: this of course could be a totally seperate gem that shells out for these calls.... but I was trying to keep with the knife command since a lot of them are used to it already
[2012-05-10 15:50:24 -0400] yfeldblum: geekbri, you can take a look at the code for `knife bootstrap` (chef/lib/chef/knife/bootstrap.rb) and see how it reuses the code for `knife ssh`
[2012-05-10 15:50:45 -0400] yfeldblum: geekbri, do it in ruby; don't shell out
[2012-05-10 15:51:42 -0400] geekbri: yfeldblum: ok, thats what im already on the path of, so i'll just keep going.  Ill checkout the bootstrap.rb knife plugin, Ive got the wiki page open which details how to do it as well.  Seems pretty straight forward, I just populate the name_args and options
[2012-05-10 15:51:45 -0400] geekbri: thanks.
[2012-05-10 15:51:54 -0400] yfeldblum: geekbri, if you use chef, prefer ruby to shelling out (unless there's a real need)
[2012-05-10 15:52:31 -0400] yfeldblum: geekbri, https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap.rb
[2012-05-10 15:52:32 -0400] geekbri: yfeldblum: well thats what i was I was preferring, but then you got me all concerned when you mentioned maybe i shoudln't be calling the plugin directly :-P
[2012-05-10 15:52:56 -0400] yfeldblum: geekbri, heh
[2012-05-10 15:53:18 -0400] geekbri: yfeldblum: but i understand exactly why you said it.  I just think my case might be edge case where it makes sense to do it that way
[2012-05-10 15:53:32 -0400] yfeldblum: geekbri, i assumed you wanted to do something like `knife CLOUD server create`, but actually you're trying to do `knife CLOUD server create` in a loop
[2012-05-10 15:53:41 -0400] geekbri: yeah, more or less.
[2012-05-10 15:55:43 -0400] yfeldblum: geekbri, so in that case ... `6.times { provider = Chef::Knife::Ec2ServerCreate.new ; do_something_with(provider) }`
[2012-05-10 15:57:21 -0400] geekbri: yfeldblum: yeah thats basically were I've arrived at.  I was being lazy and didnt look in the gem itself so I was trying to use Chef::Knife::Ec2.  After looking and seeing it was multiple different classes, I figured it out.
[2012-05-10 15:57:24 -0400] geekbri: yfeldblum: thank you though.
[2012-05-10 15:58:21 -0400] cron0: My platform is unknown to chef and I want chef to think it's centos. how can I form it to believe my node is cents?
[2012-05-10 16:02:10 -0400] geekbri: well I believe chef-client uses ohai to populate that information everytime chef-client runs.  You'd probably have to either fork ohai and add a way for it to determine your platform, or find some way to run after ohai and over write that attribute... although I would assume that is most likely frowned upon :)
[2012-05-10 16:02:10 -0400] yfeldblum: cron0, write an ohai plugin that says so
[2012-05-10 16:02:18 -0400] geekbri: oh there you go! a plugin, silly me.
[2012-05-10 16:09:14 -0400] gp5st: https://gist.github.com/90304a6df2b97e4a64ee it registers a client, and then it retries? i'm guessing that's where the 409 is coming from
[2012-05-10 16:11:55 -0400] gp5st: the error on the server seems to be merb : chef-server (api) : worker (port 4000) ~ Connection failed - user: chef - (Bunny::ProtocolError)
[2012-05-10 16:12:57 -0400] gp5st: si rabbitmq just not set up right?
[2012-05-10 16:14:51 -0400] ddk: anyone use vagrant to test cookbooks?
[2012-05-10 16:24:00 -0400] miah: lots of people
[2012-05-10 16:37:56 -0400] cooper: hello all
[2012-05-10 16:38:15 -0400] gchristensen: is there anything like a quickstart for chef solo?
[2012-05-10 16:39:24 -0400] cooper: if i'm using ' knife search node "chef_environment:_default" ' to get nodes in the _default environmenthow do i get nodes *not* in the _default environmentlike a ' knife search node NOT IN "chef_environment:_default"
[2012-05-10 16:43:26 -0400] miah: 'knife search node "NOT chef_environment:_default" '
[2012-05-10 16:43:27 -0400] cwj: try knife search node 'NOT chef_environment:_default'
[2012-05-10 16:46:01 -0400] organicveggie: I'm having a weird problem setting up a knife client on one particular machine. No matter which user I run "knife configure" as, it tries to read knife.rb from root e.g. /.chef/knife.rb.
[2012-05-10 16:46:17 -0400] cooper: miah:  cwj: wow. straight forward. i should have tried that to start with. :) thx!
[2012-05-10 16:46:24 -0400] organicveggie: Any suggestions on what I might be overlooking?
[2012-05-10 16:46:48 -0400] miah: organicveggie: what is your users home directory set to?
[2012-05-10 16:46:49 -0400] cobragoat: organicveggie: chef-solo?
[2012-05-10 16:47:07 -0400] organicveggie: chef-server running on a remote machine.
[2012-05-10 16:47:18 -0400] organicveggie: HOME=/opt/Bamboo
[2012-05-10 16:49:35 -0400] organicveggie: Chef 0.9.14 btw
[2012-05-10 16:50:23 -0400] hoover_damm: organicveggie, such an old version
[2012-05-10 16:50:30 -0400] organicveggie: :)
[2012-05-10 16:50:39 -0400] hoover_damm: I do hope your running the right version of chef gems with that
[2012-05-10 16:50:49 -0400] organicveggie: Chef runs fine on the machine.
[2012-05-10 16:50:54 -0400] organicveggie: It's just knife that's the problem.
[2012-05-10 16:50:57 -0400] hoover_damm: knife's behavior was updated a little in .10 so you might be hitting the diffence between 0.9
[2012-05-10 16:51:00 -0400] hoover_damm: and 0.10
[2012-05-10 16:51:25 -0400] organicveggie: not sure i understand. server and all clients are running the same version of chef.
[2012-05-10 16:52:57 -0400] hoover_damm: you run knife configure
[2012-05-10 16:53:03 -0400] hoover_damm: and you just hit enter and it'll drop a knife.rb
[2012-05-10 16:53:14 -0400] flashmanbahadur: email
[2012-05-10 16:53:18 -0400] flashmanbahadur: err, whoops
[2012-05-10 16:53:28 -0400] hoover_damm: organicveggie, euid isn't in effect
[2012-05-10 16:53:34 -0400] hoover_damm: organicveggie, to make it try and hit root in error?
[2012-05-10 16:54:13 -0400] hoover_damm: organicveggie, it should be trying to read .chef/knife.rb via home, or if your in the chef-repo directory it tries to find .chef/knife.rb there as well
[2012-05-10 16:54:37 -0400] organicveggie: hoover_damn: right. that's the problem. "knife configure" fails because it's trying to access /.chef/knife.rb instead of via home.
[2012-05-10 16:54:52 -0400] organicveggie: "/usr/lib/ruby/gems/1.8/gems/mixlib-config-1.1.2/lib/mixlib/config.rb:37:in `read': Permission denied - /.chef/knife.rb (Errno::EACCES)"
[2012-05-10 16:55:13 -0400] hoover_damm: hrm is HOME not set?
[2012-05-10 16:55:32 -0400] hoover_damm: that seems more like it's driving into / in error
[2012-05-10 16:55:34 -0400] organicveggie: Definitely set.
[2012-05-10 16:55:51 -0400] hoover_damm: HOME=/home/bob knife
[2012-05-10 16:55:51 -0400] hoover_damm: ?
[2012-05-10 16:55:52 -0400] organicveggie: Seems to affect every non-root user on this machine. :(
[2012-05-10 16:56:03 -0400] hoover_damm: right, sounds like HOME is messed up
[2012-05-10 16:56:04 -0400] organicveggie: Good suggestion. I'll try that.
[2012-05-10 16:56:27 -0400] organicveggie: Hrmph. Same problem.
[2012-05-10 16:56:52 -0400] hoover_damm: export HOME=?
[2012-05-10 16:57:49 -0400] organicveggie: Same problem.
[2012-05-10 16:57:56 -0400] hoover_damm: can I have more traceback in a gist please?
[2012-05-10 16:58:52 -0400] organicveggie: hoover_damn: https://gist.github.com/2654459
[2012-05-10 17:12:19 -0400] hoover_damm: organicveggie, strange... knife configure --config /tmp/config.cfg?
[2012-05-10 17:13:03 -0400] organicveggie: "/usr/lib/ruby/gems/1.8/gems/mixlib-config-1.1.2/lib/mixlib/config.rb:37:in `read': No such file or directory - /tmp/config.cfg (Errno::ENOENT)"
[2012-05-10 17:13:35 -0400] hoover_damm: organicveggie, why didn't it try and create the file?
[2012-05-10 17:13:50 -0400] hoover_damm: that seems bizzare
[2012-05-10 17:14:15 -0400] organicveggie: weird. that user has permission to create stuff in /tmp.
[2012-05-10 17:14:25 -0400] organicveggie: I even tried "touch /tmp/config.cfg" and that worked fine.
[2012-05-10 17:15:31 -0400] hoover_damm: yep
[2012-05-10 17:15:40 -0400] hoover_damm: something is clearly weird
[2012-05-10 17:16:48 -0400] zts: ITYM "knife configure -i"
[2012-05-10 17:17:46 -0400] organicveggie: zts: same problem. /usr/lib/ruby/gems/1.8/gems/mixlib-config-1.1.2/lib/mixlib/config.rb:37:in `read': Permission denied - /.chef/knife.rb (Errno::EACCES)
[2012-05-10 17:19:13 -0400] organicveggie: Well, I finally tried just manually creating knife.rb in the correct location. That seems to work fine.
[2012-05-10 17:19:25 -0400] organicveggie: Not sure why I didn't try that right away.
[2012-05-10 17:19:34 -0400] organicveggie: Strange, but it gets me what I wanted. :)
[2012-05-10 17:26:09 -0400] hoover_damm: :) yup
[2012-05-10 17:26:12 -0400] hoover_damm: very strange
[2012-05-10 17:30:18 -0400] maddoc: How do you get the content of a node attribute using search with knife and in a recipe?
[2012-05-10 17:34:22 -0400] maddoc: If I just run knife search node 'some_attribute:*' I just get some general info about the node back. Do you have to use knife exec, or did I just miss something?
[2012-05-10 17:35:03 -0400] eherot: the -a flag
[2012-05-10 17:36:53 -0400] gp5st: i know this is really stupid, but i'm having issues getting chef to talk to rabbit
[2012-05-10 17:38:46 -0400] gp5st: the user seems to be set up correctly, and i've tried every port beam is listening on in a netstat
[2012-05-10 17:38:56 -0400] gp5st: i've tried hosts of localhost, 127.0.0.1, and ::1
[2012-05-10 17:39:09 -0400] maddoc: eherot: Of course. Thanks. :-)
[2012-05-10 17:39:25 -0400] eherot: maddoc: welcome :-)
[2012-05-10 17:39:55 -0400] gp5st: i think i might now, sorry, i'll talk to the rubber ducks from now on
[2012-05-10 17:40:43 -0400] gchristensen: so if I only have about 4 nodes, is it naughty to be using the free one for a company?
[2012-05-10 17:46:19 -0400] __chrisf__: anyone here use environments that have a env_run_lists property AND a run_list default?
[2012-05-10 18:28:12 -0400] damienj: morning morning :)
[2012-05-10 18:29:16 -0400] damienj: Hey is there a plugin or plans ever to have attribute value changes tracked in some kind of audible fashion? Ideally I am envisiong something like a wiki version history where you could see before and after changes to the node/environment/databag json
[2012-05-10 18:29:43 -0400] damienj: er *auditable not audible (although having a yelling voice would be cool too ;))
[2012-05-10 18:30:34 -0400] damienj: i.e. is there a way to track like a build version number change? like when and who rolled the next build?
[2012-05-10 18:31:09 -0400] eherot: damienj: in our shop we achieve this by managing all data bag changes in git
[2012-05-10 18:33:29 -0400] geekbri: damienj: eherot: we do the same
[2012-05-10 18:47:09 -0400] cgriego: will a 0.10.10 version of omnibus/chef-full be released alongside the final version of chef 0.10.10 or will it come later?
[2012-05-10 18:48:31 -0400] ddk: has anyone had an issue where a recipe causes the node to lose its run_list and chef_environment?
[2012-05-10 18:52:50 -0400] atomic-penguin: cgriego, omnibus releases may lag a few days behind gem releases
[2012-05-10 19:13:21 -0400] __chrisf__: Are omnibus releases for the entire chef stack, including all the moving parts of Chef server (Solr, expander, etc.), or is it just for install Chef-client on nodes?
[2012-05-10 19:14:26 -0400] __chrisf__: I've got v0.10.4 chef server installed and a bunch of EC2 nodes that were configured via Knife and Chef-client 0.10.4 so I'm wondering how to upgrade the entire stack to 0.10.10 when it's release
[2012-05-10 19:20:57 -0400] yfeldblum: chef-full is an isolating fat installer for chef-solo/chef-client only
[2012-05-10 19:21:09 -0400] yfeldblum: omnibus is a tool for making isolating fat installers
[2012-05-10 19:22:29 -0400] __chrisf__: I see
[2012-05-10 19:22:53 -0400] ynniv: I'm getting an error trying to install postgresql::server : "NameError: uninitialized constant Chef::Recipe::Opscode" in Processing gem_package[pg] action install (postgresql::client line 42)
[2012-05-10 19:22:55 -0400] ynniv: any takers?
[2012-05-10 19:23:18 -0400] ynniv: also, I am using chef-solo, 0.10.8
[2012-05-10 19:24:57 -0400] ssd7_: ynniv: Could you paste the full stacktrace somewhere?
[2012-05-10 19:25:40 -0400] ynniv: https://gist.github.com/2655281
[2012-05-10 19:25:40 -0400] __chrisf__: @yfeldblum: so when knife-ec2 is used to provision a new server and the bootstrap process is executed prior to a run-list getting executed how do you indicate chef-full to be used to install Chef-Client rather than the existing Ubuntu template. I know the --distro / -d can be used, but where would I get the template to put on my machine where I'm running the knife command?
[2012-05-10 19:26:21 -0400] ynniv: this is chef-solo with local cookbooks, copied from opscode/cookbooks a half hour ago
[2012-05-10 19:27:21 -0400] yfeldblum: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-05-10 19:28:07 -0400] geekbri: is github suffering issues or is it just me?
[2012-05-10 19:28:16 -0400] ynniv: I too saw an angry unicorn
[2012-05-10 19:28:18 -0400] jmazzi: github is suffering
[2012-05-10 19:28:25 -0400] geekbri: ok, as long as its not just me.
[2012-05-10 19:31:00 -0400] qhartman: I'm working with a heavily modified version of the v 1.0 Nagios recipe from the opscode site and I need it to include roles on the hosts that are implicitly pulled in by other roles OR discard roles from the role list which are not explicitly set on hosts in the environment. Any suggestions on how to build a search that will return one of those groups?
[2012-05-10 19:32:41 -0400] qhartman: I pulled a chunk from the current version of the cookbook that Ithought would do that, but I must be reading it wrong: https://github.com/opscode-cookbooks/nagios/blob/master/recipes/server.rb
[2012-05-10 19:32:49 -0400] qhartman: (lines 55-62)
[2012-05-10 19:35:28 -0400] ssd7_: ynniv: try editing ::Chef::Recipe.send(:include, Opscode::OpenSSL::Password) -> ::Chef::Recipe.send(:include, ::Opscode::OpenSSL::Password)
[2012-05-10 19:36:02 -0400] nyaray: Is it possible to use remote_file over https? Would it work with self-signed SSL?
[2012-05-10 19:37:13 -0400] ynniv: ssd7_: that changed the exception to "NameError: uninitialized constant Opscode"
[2012-05-10 19:37:32 -0400] ynniv: perhaps there is an implicit dependency on another recipe
[2012-05-10 19:37:57 -0400] ssd7_: ynniv: That module is defined in the openssl recipe which should be in the metadata for that cookbook I believe as a dependency
[2012-05-10 19:38:31 -0400] ynniv: ah, well local cookbooks means that I need to copy the cookbook :)
[2012-05-10 19:38:36 -0400] ynniv: hold on
[2012-05-10 19:40:42 -0400] __chrisf__: @yfledblum: thanks I assume I just create a folder called bootstrap under my ~/.chef folder and place it there? The ubuntu templates are under /Library/Ruby/Gems/1.8/gems/chef-0.10.4/lib/chef/knife/bootstrap/
[2012-05-10 19:43:17 -0400] ssd7_: ynniv: Ahh, chef-solo missed that bit.  Yeah, you'll probably want to change the cookbook back to its original state too :)
[2012-05-10 19:43:49 -0400] ynniv: yep, that was it
[2012-05-10 19:43:53 -0400] ynniv: thanks ssd7_
[2012-05-10 19:44:12 -0400] ynniv: it seems odd that chef-solo doesn't error out on unmet dependencies?
[2012-05-10 19:47:18 -0400] qhartman: Ok, I found the specific spot that the NAgios config template doesn't pull in the implicit roles. for each node it builds the group list with: n.run_list.roles.to_a.join(",")
[2012-05-10 19:47:54 -0400] qhartman: that only grabs the explicit roles. What would get the fully expanded implicit roles as well?
[2012-05-10 19:56:30 -0400] gchristensen: Hi, I installed the opscode java cookbook, and when I run chef-client I get: FATAL: NoMethodError: ruby_block[update-java-alternatives] (java::openjdk line 43) had an error: NoMethodError: undefined method `to_str' for nil:NilClass
[2012-05-10 19:57:34 -0400] gchristensen: https://gist.github.com/c2cb60316cb3c132e1b0 here's the output of the stack trace. ANy ideas on getting java installed? I haven't strayed from the defaults.
[2012-05-10 20:01:33 -0400] qhartman: gchristensen, what distro are you running this on? Is it the latest java cookbook?
[2012-05-10 20:01:33 -0400] flashmanbahadur: gchristensen: what OS are you running
[2012-05-10 20:01:56 -0400] gchristensen: qhartman: yes latest, flashmanbahadur - Ubuntu 12.04
[2012-05-10 20:02:03 -0400] flashmanbahadur: i think I know whats going on
[2012-05-10 20:02:09 -0400] flashmanbahadur: in 12.04
[2012-05-10 20:02:15 -0400] gchristensen: okay
[2012-05-10 20:02:16 -0400] flashmanbahadur: JVM location got slightly renamed
[2012-05-10 20:02:21 -0400] flashmanbahadur: may be your issue
[2012-05-10 20:02:23 -0400] flashmanbahadur: are you on AWS?
[2012-05-10 20:02:31 -0400] gchristensen: no, I'm running it on a local box
[2012-05-10 20:02:48 -0400] flashmanbahadur: open jdk or regular
[2012-05-10 20:02:52 -0400] gchristensen: there's nothing important on it though; started fresh this morning. openjdk
[2012-05-10 20:03:28 -0400] flashmanbahadur: JDK_DIRS="/usr/lib/jvm/java-6-openjdk/ /usr/lib/jvm/java-6-openjdk-amd64/"
[2012-05-10 20:03:39 -0400] flashmanbahadur: check to see if it moved from the first one to the second
[2012-05-10 20:03:42 -0400] gchristensen: huh... so I might have been lying about using the latest.
[2012-05-10 20:05:09 -0400] gchristensen: please bear with me a moment. I noticed a PR in the repository (github.com/opscode/cookbooks) that marked it as deprecated.
[2012-05-10 20:05:29 -0400] gchristensen: I hadn't seen the note in the description.
[2012-05-10 20:06:04 -0400] gchristensen: flashmanbahadur: I'm going to try with this other cookbook, and then the JDK_DIRS fix.
[2012-05-10 20:08:26 -0400] gchristensen: oy ok, it is up to date.
[2012-05-10 20:15:32 -0400] gchristensen: flashmanbahadur: I won't need to set that permanently, just within a role, right?
[2012-05-10 20:27:45 -0400] valdezjoelt: hi
[2012-05-10 20:28:01 -0400] valdezjoelt: good day everyone
[2012-05-10 20:29:08 -0400] lallier: is there an easy way of checking whether an attribute exists for a node?
[2012-05-10 20:29:39 -0400] lallier: a la chef databags, if stuff.has_key?('foo') do ... end
[2012-05-10 20:30:51 -0400] mattray: lallier: node.attribute?() is a method I think
[2012-05-10 20:30:52 -0400] eherot: node.has_key?('foo")
[2012-05-10 20:31:03 -0400] eherot: ?
[2012-05-10 20:31:35 -0400] lallier: ah, merci I'll try both!
[2012-05-10 20:37:37 -0400] valdezjoelt: hi, can i do not_if for checking service
[2012-05-10 20:38:19 -0400] valdezjoelt: hi miah
[2012-05-10 20:38:28 -0400] cwj: miah: i am looking at the collectd cookbook (both the community version and your fork of damm's fork) i am trying to figure out why the collectd_plugin definition doesn't work for me out-of-the-box
[2012-05-10 20:38:52 -0400] cwj: i had to change if params[:template].blank? to if params[:template].nil? or params[:template].blank?
[2012-05-10 20:40:09 -0400] cwj: the default value is nil, which makes the default collectd::server recipe break
[2012-05-10 20:43:24 -0400] lallier: mattray: thanks, everything behaves as expected!
[2012-05-10 20:45:00 -0400] Ash_: cwj, it's because i am crushing you as hard as i can
[2012-05-10 20:45:07 -0400] cwj: Ash_: crap
[2012-05-10 20:46:48 -0400] valdezjoelt: help .... how do i check if the service is already been installed in linux node ?
[2012-05-10 20:51:14 -0400] valdezjoelt: hi is there any equivalent for this not_if {Win32::Service.exists?("MyService")} condition in linux ?
[2012-05-10 20:52:17 -0400] cwj: valdezjoelt: the means for determining whether or not a service is installed will depend on the linux distribution.
[2012-05-10 20:52:32 -0400] cwj: there's a mess of distribution-specific service provider code https://github.com/opscode/chef/tree/master/chef/lib/chef/provider/service
[2012-05-10 20:53:38 -0400] cwj: you can probably use one of those providers' load_current_resource method to determine the current state
[2012-05-10 20:54:06 -0400] valdezjoelt: thanks cwj :)
[2012-05-10 20:56:07 -0400] cwj: sure
[2012-05-10 21:01:43 -0400] gchristensen: I need to manage /etc/security/limits.conf, specificallly I need to increase my nofile limit for a recipe. Is there any recommended way to do that?
[2012-05-10 21:09:15 -0400] miah: make /etc/security/limits.conf a template and manage it.
[2012-05-10 21:09:47 -0400] gchristensen: alrighty
[2012-05-10 21:35:32 -0400] kevmo: New Chef.  Created a recipe, dragged it to the node run list, ran chef-client on the node and it installs the package. The recipe continues to show in the node run list, and if I run chef-client again, it installs the same recipe again.  Whey does the recipe stay in the run list after it has been deployed?
[2012-05-10 21:36:35 -0400] laurent\: yep
[2012-05-10 21:37:24 -0400] laurent\: it's supposed to be idempotent, so it won't reinstall the package if it's already installed
[2012-05-10 21:38:34 -0400] sparc_: Hmm, anyone know how big ChefConf is going to be?
[2012-05-10 21:39:14 -0400] cobragoat: they added an extra workshop day because of high demand
[2012-05-10 21:39:22 -0400] sparc_: I was thinking about the Tues workshop too.  My coworker and I are just past the "Ok, this is different from puppet" stage
[2012-05-10 21:40:00 -0400] sparc_: we can write basic recipes, and understand the toolchain, but don't know how they work
[2012-05-10 21:40:14 -0400] sparc_: hopefully that's enough knowlege to make use of it
[2012-05-10 21:44:57 -0400] kevmo: Thanks laurent\ although it says that it is installing the packege, you are correct, it doesn't make any changes unless I had made a change to the installed package files.
[2012-05-10 21:45:18 -0400] kevmo: on the node
[2012-05-10 21:45:36 -0400] sparc_: cobragoat: dang, tues sold out
[2012-05-10 21:45:43 -0400] sparc_: cobragoat: thanks
[2012-05-10 21:46:08 -0400] cobragoat: sparc_ friday is good tho
[2012-05-10 21:49:55 -0400] mattray: sparc_: we just opened up another batch of 1-day training workshops on Friday
[2012-05-10 21:50:21 -0400] mattray: ChefConf is close to selling out
[2012-05-10 21:50:41 -0400] mattray: at least, as far as fire codes goe
[2012-05-10 21:50:45 -0400] mattray: s/goe/go/
[2012-05-10 21:51:01 -0400] cobragoat: haha.. I am still on the fence. work will pay half tho!
[2012-05-10 21:51:16 -0400] mattray: it's gonna be awesome :)
[2012-05-10 21:51:26 -0400] mattray: but I'm biased of course.
[2012-05-10 21:51:32 -0400] hoover_damm: remember if you modify limits.conf you need to restart any and all services that depend on it.  As it is a PAM Service, you may need to restart cron, sshd, and other services.
[2012-05-10 21:51:46 -0400] hoover_damm: and limits are not applied to root
[2012-05-10 21:52:24 -0400] hoover_damm: which pisses me off because the postgres user has 16megs stack naturally on one AMI i made... but as it goes through root su'ing to postgres it only see's 8megs
[2012-05-10 21:52:32 -0400] hoover_damm: but login as postgres and you see 16megs
[2012-05-10 21:52:41 -0400] hoover_damm: #@!#@!#!@#!@
[2012-05-10 21:53:11 -0400] cnf: can anyone suggest a good hosted monitoring service?
[2012-05-10 21:53:31 -0400] cobragoat: alert site is ok.. but I'm not super familiar with it yet
[2012-05-10 21:53:35 -0400] mattray: cnf: where are you running? Rackspace is about to roll out some stuff
[2012-05-10 21:53:39 -0400] eherot: cnf: what do you need to monitor?
[2012-05-10 21:53:45 -0400] mattray: yeah, better question
[2012-05-10 21:54:05 -0400] cnf: eherot: VPS status, and site up state / response
[2012-05-10 21:54:17 -0400] cnf: you know, cpu, free disk, net traffic, free mem etc
[2012-05-10 21:54:25 -0400] cnf: sql state, apache req/s
[2012-05-10 21:54:45 -0400] cnf: things i'd normally do with nagios ^^; but i need a hosted sollution
[2012-05-10 21:54:48 -0400] eherot: I don't have a good rec for VPS status but for site up we're using Pingdom
[2012-05-10 21:55:09 -0400] cnf: yeah, i looked at pingdom
[2012-05-10 21:55:15 -0400] cnf: too limited for what i need
[2012-05-10 21:55:17 -0400] eherot: kind of simplistic but reliable at least
[2012-05-10 21:55:19 -0400] eherot: yeah
[2012-05-10 21:55:35 -0400] cnf: not bad, just with a different focus
[2012-05-10 21:56:00 -0400] eherot: there's also http://watchmouse.com/ which we checked out briefly but I don't have much recent direct experience with
[2012-05-10 21:56:14 -0400] eherot: heh, and which has apparently changed its name
[2012-05-10 21:57:01 -0400] nect: is there a way with knife to see a list of all the attributes on a node?
[2012-05-10 21:57:01 -0400] cnf: yeah, i looked at those as well ^^;
[2012-05-10 21:57:23 -0400] eherot: that exhausts my list of suggestions :-)
[2012-05-10 21:57:39 -0400] cnf: :P
[2012-05-10 21:57:46 -0400] cnf: it's not an easy one, it seems
[2012-05-10 21:57:52 -0400] alop: Question: in puppet, there is a selector statement when I can do variable assignment based on the value of a variable. How do I duplicate this in chef?
[2012-05-10 21:57:57 -0400] cwj: nect: knife node show foo -l
[2012-05-10 21:58:02 -0400] eherot: no, in my experience most monitoring services are generally inadequate for everything.
[2012-05-10 21:58:05 -0400] cwj: should show the entire node
[2012-05-10 21:58:06 -0400] cnf: scoutapp looks nice, but limited to only resource monitoring
[2012-05-10 21:58:07 -0400] nect: thx cwj
[2012-05-10 21:58:09 -0400] eherot: or something
[2012-05-10 21:58:36 -0400] cnf: and and server density has a really confusing UI
[2012-05-10 21:58:45 -0400] cwj: if you want to generate resource utilization graphs, copperegg cloudreveal seemed better than scoutapp
[2012-05-10 21:59:26 -0400] cwj: but imo cloudkick does a better job of being a nagios replacement
[2012-05-10 21:59:45 -0400] cwj: although it seems like cloudkick is being left to rot as rackspace prepares to launch its api driven replacement
[2012-05-10 22:00:01 -0400] eherot: oh yeah, and new relic
[2012-05-10 22:00:08 -0400] eherot: though kind of 'spensive
[2012-05-10 22:00:11 -0400] cwj: new relic is not useful for service monitoring
[2012-05-10 22:00:13 -0400] cnf: cwj: ok, lemme get url,s for that stuff ^^;
[2012-05-10 22:00:16 -0400] thom: alop: link to the puppet docs for the selector so we can begin to guess? :)
[2012-05-10 22:00:23 -0400] cwj: its awesome for application performance monitoring though
[2012-05-10 22:00:26 -0400] eherot: cwj: it does some system stats monitoring now
[2012-05-10 22:00:37 -0400] thom: eherot: they're pretty light
[2012-05-10 22:00:39 -0400] cwj: eherot: yes but its just resource utilization
[2012-05-10 22:00:44 -0400] alop: Sorry, I found it, case statement is the same in both
[2012-05-10 22:00:49 -0400] cwj: thats not the same as service monitoring
[2012-05-10 22:01:02 -0400] thom: and the notifications for system stuff is "we'll send you an email"
[2012-05-10 22:01:15 -0400] eherot: cwj: yeah, true.  Just wanted to put it out there 'cause I love it otherwise
[2012-05-10 22:01:30 -0400] cnf: cwj: http://copperegg.com/products/ right?
[2012-05-10 22:01:33 -0400] cwj: yeah
[2012-05-10 22:01:42 -0400] cnf: that's new to me, lets have a look :P
[2012-05-10 22:01:48 -0400] cwj: their cookbook kinda sucks
[2012-05-10 22:02:04 -0400] cwj: i took a shot at improving it but i was dissatisfied
[2012-05-10 22:02:17 -0400] cwj: it does generate helpful graphs though
[2012-05-10 22:02:31 -0400] cwj: but i think i am probably going to wind up building a nagios stack
[2012-05-10 22:02:39 -0400] cwj: cloudkick for now
[2012-05-10 22:02:51 -0400] cwj: and pingdom for external service availability monitoring
[2012-05-10 22:03:06 -0400] cwj: i wrote a pingdom cookbook but it still needs some work
[2012-05-10 22:03:49 -0400] cnf: yeah
[2012-05-10 22:03:56 -0400] cnf: i'm comfortable with nagios / cacti
[2012-05-10 22:04:06 -0400] cnf: but for this project, that's just not an option
[2012-05-10 22:05:04 -0400] cnf: hmm, trying to figure out their pricing ^^;
[2012-05-10 22:06:30 -0400] cwj: with copperegg its metered similar to the way that ec2 instance time is
[2012-05-10 22:07:04 -0400] josephholsten: cwj: I'd go with server density over pingdom for all but the simplest of monitoring
[2012-05-10 22:07:39 -0400] cnf: josephholsten: i didn't like server density at first look
[2012-05-10 22:07:41 -0400] cwj: josephholsten: from where i sit they are two very different things
[2012-05-10 22:07:42 -0400] cnf: josephholsten: do you use it?
[2012-05-10 22:07:58 -0400] josephholsten: less at my current company than my last one.
[2012-05-10 22:08:06 -0400] cwj: pingdom is more like keynote
[2012-05-10 22:08:19 -0400] cnf: the UI confused me, tbh
[2012-05-10 22:08:26 -0400] cwj: external service availability monitoring != service monitoring
[2012-05-10 22:09:09 -0400] cnf: cwj: indeed, though server density  does both
[2012-05-10 22:10:04 -0400] josephholsten: you'd probably be entertained that pingdom missed a perceived outage we only caught because of new relic (and isup.me)
[2012-05-10 22:11:15 -0400] cwj: does serverdensity only do external monitoring for http/https? kind of looks that way from their site
[2012-05-10 22:11:22 -0400] cwj: (pingdom supports many different protocols)
[2012-05-10 22:12:35 -0400] cnf: cwj: yeah, it does, i think
[2012-05-10 22:13:11 -0400] cwj: serverdensity does advertise some attractive features, but based on my experience at my last job i think it pays to have a separate external availability monitor
[2012-05-10 22:13:33 -0400] cwj: and pingdom is infinitely more affordable than keynote
[2012-05-10 22:14:04 -0400] cnf: keynote?
[2012-05-10 22:14:04 -0400] bawt: keynote is a close second.
[2012-05-10 22:15:18 -0400] cnf: http://www.keynote.com/ ?
[2012-05-10 22:17:36 -0400] cnf: i think pingdom will server well for accessibility monitoring, but i can't find sonmething i like for recourse monitoring ^^;
[2012-05-10 22:17:41 -0400] lflux: I use Pingdom and Apica for my external monitoring
[2012-05-10 22:18:08 -0400] lflux: wasn't terribly impressed with keynote
[2012-05-10 22:22:21 -0400] bemu: cnf, cwj, one of you needs to change your name :)
[2012-05-10 22:22:36 -0400] bemu: I may have missed the part of the discussion, but why not nagios?
[2012-05-10 22:22:38 -0400] cwj: keynote has been around for a long time, and the only thing they do that i think is particularly interesting is letting you drive their windows agents to click through apps or sites
[2012-05-10 22:22:49 -0400] cwj: bemu: not it :)
[2012-05-10 22:22:58 -0400] cnf: bemu: because i need a hosted sollution
[2012-05-10 22:23:05 -0400] bemu: Why?
[2012-05-10 22:23:33 -0400] cnf: because i have no place to run the nagios on this project
[2012-05-10 22:26:42 -0400] lflux: cwj: apica does something like that, it lets you run Selenium
[2012-05-10 22:26:48 -0400] cwj: thats cool
[2012-05-10 22:27:00 -0400] lflux: it is.
[2012-05-10 22:27:11 -0400] lflux: need to play around with it more though.
[2012-05-10 22:28:10 -0400] bemu: cnf: a cloud provider?
[2012-05-10 22:28:23 -0400] cnf: bemu: ?
[2012-05-10 22:28:23 -0400] bawt: bemu: is it dep_selector, or your ruby build that is trying this? typically, ruby code just calls `require` and lets the ruby VM sort out where the file is and whether it's ruby or compiled C
[2012-05-10 22:28:34 -0400] bemu: lol.
[2012-05-10 22:28:51 -0400] bemu: cnf: You can create a server on AWS and put nagios on it?
[2012-05-10 22:29:47 -0400] cnf: bemu: yes, i know i can...
[2012-05-10 22:29:57 -0400] cnf: just because you can do something, doesn't always mean you should
[2012-05-10 22:30:30 -0400] bemu: My question was, why not?
[2012-05-10 22:30:33 -0400] bemu: I'm actually curious.
[2012-05-10 22:32:40 -0400] cnf: bemu: are you gonna pay for it, the setup time, the maintenance time etc?
[2012-05-10 22:32:56 -0400] bemu: I do, because we do more than any of the hosted options allow.
[2012-05-10 22:33:01 -0400] eherot: bemu: there a lot of potential advantages to hosted solutions: someone else manages upgrades, redundancy, etc.  Also if you don't want to maintain two separate infrastructures, it's nice to have something that is not in the datacenter you're trying to monitor.
[2012-05-10 22:33:16 -0400] cnf: bemu: because in this case, the client isn't
[2012-05-10 22:33:20 -0400] cnf: so i'm not doing it
[2012-05-10 22:33:20 -0400] bemu: Yeah, we use a different cloud provider for those.
[2012-05-10 22:33:26 -0400] bemu: Gotcha.
[2012-05-10 22:33:37 -0400] bemu: Fair enough, I just assumed it was a technical question.
[2012-05-10 22:33:45 -0400] cobragoat: cnf: it takes years to learn that lol
[2012-05-10 22:33:53 -0400] cnf: no, i like nagios
[2012-05-10 22:33:58 -0400] cnf: i get along with it just fine
[2012-05-10 22:34:07 -0400] lflux: I don't.
[2012-05-10 22:34:08 -0400] cnf: but i ain't doing it for free
[2012-05-10 22:34:13 -0400] lflux: Considering looking at Icinga.
[2012-05-10 22:34:20 -0400] cnf: cobragoat: :P
[2012-05-10 22:34:24 -0400] lflux: nagios feels so old when you muck around in it
[2012-05-10 22:34:32 -0400] cnf: lflux: i agree
[2012-05-10 22:34:32 -0400] cobragoat: cnf: i should say it took *me* years to learn that
[2012-05-10 22:34:32 -0400] bdha: Sensu.
[2012-05-10 22:34:39 -0400] lflux: granted i'm not running the latest
[2012-05-10 22:34:40 -0400] cnf: lflux: but there isn't much else that gets close
[2012-05-10 22:34:50 -0400] cnf: cobragoat: hey, i'm 35
[2012-05-10 22:34:59 -0400] cnf: so yeah :P
[2012-05-10 22:35:03 -0400] cnf: anyway, brb
[2012-05-10 22:35:09 -0400] lflux: cnf: yeah, I know. Icinga looks promising, but havent mucked around with it
[2012-05-10 22:36:12 -0400] lflux: bdha: any better overview than "check out our code! check out our blog!" on sensu?
[2012-05-10 22:38:14 -0400] bdha: lflux: https://github.com/sensu/sensu/wiki
[2012-05-10 22:38:29 -0400] bdha: Chef integration up there too.
[2012-05-10 22:40:16 -0400] lflux: points for being able to re-use nagios plugins
[2012-05-10 22:40:40 -0400] cnf: bemu: so yeah, hosted it is, i set up, they pay the bills
[2012-05-10 22:40:52 -0400] bemu: We're looking at moving to Sensu :D
[2012-05-10 22:41:15 -0400] lflux: they haven't documented how I can ACK alarms via API
[2012-05-10 22:41:27 -0400] lflux: because I really, REALLY want to be able to text back 'STFU' to nagios.
[2012-05-10 22:41:40 -0400] bdha: /event/resolve ?
[2012-05-10 22:41:57 -0400] cnf: josephholsten: do you use server density?
[2012-05-10 22:41:58 -0400] lflux: oh there
[2012-05-10 22:42:44 -0400] cnf: lflux: oh, i see you have actually used nagios:P
[2012-05-10 22:42:46 -0400] bdha: http://portertech.ca/2011/11/01/sensu-a-monitoring-framework/
[2012-05-10 22:43:31 -0400] lflux: cnf: :) I was in an on-call rotation for one of sweden's largest websites for like 3 years
[2012-05-10 22:43:39 -0400] cnf: hehe
[2012-05-10 22:43:50 -0400] cnf: i know the stfu feel when it comes to notifications :P
[2012-05-10 22:44:15 -0400] lflux: the "yes I know things are screwed, stop telling me i'm logging in now" feeling.
[2012-05-10 22:44:27 -0400] cnf: uhu :P
[2012-05-10 22:44:28 -0400] bdha: Pager Traumatic Stress Disorder.
[2012-05-10 22:45:06 -0400] lflux: operations got us one of those rugged phones for lumberjacks after someone threw one on-call phone too many into the wall.
[2012-05-10 22:45:16 -0400] cnf: haha
[2012-05-10 22:45:23 -0400] lflux: sensu looks pretty neat.
[2012-05-10 22:45:29 -0400] cnf: mmmaybe
[2012-05-10 22:45:41 -0400] lflux: putting that down on my list of "stuff to look at once I get my environment cheferized"
[2012-05-10 22:46:05 -0400] cnf: hmm, so i still got to find a nice hosted sollution
[2012-05-10 22:52:19 -0400] cap10morgan: Is there a way to check if a resource is defined or not before using it?
[2012-05-10 22:52:31 -0400] cap10morgan: if defined?(:resource) doesn't seem to work
[2012-05-10 22:53:52 -0400] cap10morgan: ah, if respond_to?(:resource) seems to work
[2012-05-10 22:55:54 -0400] ssd7_: 15:52 < cap10morgan> Is there a way to check if a resource is defined or not before using it?
[2012-05-10 22:56:01 -0400] ssd7_: bleh
[2012-05-10 22:56:29 -0400] cap10morgan: hmm, maybe I spoke too soon. respond_to? didn't work, I don't think.
[2012-05-10 22:57:28 -0400] josephholsten: if respond_to? doesn't work, and it's a bug
[2012-05-10 22:57:52 -0400] cap10morgan: maybe it did, this thing isn't outputting to the log like I would expect it to
[2012-05-10 22:58:06 -0400] josephholsten: though a particularly annoying one if it's done via method_missing
[2012-05-10 22:58:29 -0400] cap10morgan: josephholsten: Oh, I see. it doesn't work. is there a workaround?
[2012-05-10 22:59:10 -0400] cap10morgan: a rescue block, maybe?
[2012-05-10 22:59:44 -0400] ssd7_: Yeah, I'm pretty sure that the last time I checked we don't properly define respond_to?
[2012-05-10 23:00:16 -0400] ssd7_: A rescue block would probably work
[2012-05-10 23:00:36 -0400] josephholsten: sad pandas. a rescue block should work, I don't remember the error. it might not be caught by the default exception type.
[2012-05-10 23:00:50 -0400] ddk: anyone using chef-client with rbenv?
[2012-05-10 23:00:56 -0400] ddk: having issues with the init.d script
[2012-05-10 23:01:03 -0400] cap10morgan: Looks like it's a NoMethodError
[2012-05-10 23:06:14 -0400] josephholsten: ddk: kinda, but I have the chef-client installed with the omnibus installer
[2012-05-10 23:06:23 -0400] josephholsten: only rbenv for apps
[2012-05-10 23:06:56 -0400] ddk: trying to get ruby 1.9.3 running with chef in prod
[2012-05-10 23:07:41 -0400] ddk: rbenv works with this bootstrap template https://gist.github.com/2251684
[2012-05-10 23:07:51 -0400] ddk: but can't get /etc/init.d/chef-client to work correctly
[2012-05-10 23:08:10 -0400] yfeldblum: ddk, why are you trying to get chef-client running on an rbenv-built ruby?
[2012-05-10 23:08:39 -0400] ddk: trying to get ruby 1.9.3 and chef working on ubuntu
[2012-05-10 23:08:44 -0400] cgriego: cap10morgan: I've used defined?(Chef::Resources::ResourceName) successfully
[2012-05-10 23:08:54 -0400] josephholsten: omnibus installer uses 1.9.3 by default
[2012-05-10 23:09:01 -0400] ddk: decided to use rbenv to help update rubies
[2012-05-10 23:09:17 -0400] cap10morgan: cgriego: oh cool, thanks
[2012-05-10 23:09:58 -0400] yfeldblum: ddk, i get why you might want both 1.9.3 and chef on the same machine ... but why are you trying to get chef running on a 1.9.3 managed by rbenv?
[2012-05-10 23:10:41 -0400] ddk: can you recommend a chef bootstrap template for 1.9.3?
[2012-05-10 23:12:35 -0400] josephholsten: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-05-10 23:14:07 -0400] josephholsten: basically just runs http://opscode.com/chef/install.sh
[2012-05-10 23:17:07 -0400] bemu: I know this is simply, but never done it -- how do I check if a package is installed? I want to wrap a package install in this. Basically, mongodb removes old versions, and I'd like to install the newest version only if there isn't one already installed.
[2012-05-10 23:18:09 -0400] josephholsten: bemu: that should be the install action. only the update action should do that. if your package manager is doing that it's a bug
[2012-05-10 23:18:28 -0400] bemu: ah, derp. Thanks. :)
[2012-05-10 23:18:40 -0400] bemu: oh wait, I think the problem is that I'm specifying a version.
[2012-05-10 23:18:50 -0400] bemu: I can back that off.
[2012-05-10 23:22:16 -0400] yfeldblum: https://jira.codehaus.org/browse/JRUBY-6559 ... is that why librarian is failing on jruby-1.6.7?
[2012-05-10 23:23:56 -0400] valdezjoelt: help .. can someone past a code in here to get the status of the service ?
[2012-05-10 23:24:31 -0400] valdezjoelt: service "mysrervice" do provider Chef::Provider::Service::Redhat end
[2012-05-10 23:29:03 -0400] yfeldblum: valdezjoelt, why do you need the current status of the service?
[2012-05-10 23:35:17 -0400] cnf: cwj: copperegg.com looks ok, but it isn't extendible, is it?
[2012-05-10 23:35:34 -0400] cwj: didnt seem very extendible to me
[2012-05-10 23:35:55 -0400] cwj: my trial with them ended today and i doubt if i will be subscribing or pursuing it further
[2012-05-10 23:37:48 -0400] valdezjoelt: help im having an error getting the status of the service in linux :
[2012-05-10 23:37:50 -0400] valdezjoelt: # going back to checking the service if exist service "munin-node" do    provider Chef::Provider::Service::Redhat supports :status => true, :reload => true, :restart => true service_status = ::Service[:status] end
[2012-05-10 23:38:07 -0400] valdezjoelt: service "munin-node" do    provider Chef::Provider::Service::Redhat supports :status => true, :reload => true, :restart => true service_status = ::Service[:status] end
[2012-05-10 23:38:47 -0400] cnf: uhu
[2012-05-10 23:38:57 -0400] cnf: cwj: so what are you using? or looking at now?
[2012-05-10 23:39:09 -0400] cwj: right now i use cloudkick
[2012-05-10 23:40:07 -0400] cnf: ah, the one you can't get anymore ^6;
[2012-05-10 23:40:22 -0400] valdezjoelt: yfeldblum: i need to get the status if it is running and perform some scripts
[2012-05-10 23:40:43 -0400] cnf: bah, this shouldn't be this hard to find ^^;
[2012-05-10 23:41:13 -0400] yfeldblum: valardohaeris2, your scripts should each check if the service is running, and you should always run the scripts
[2012-05-10 23:41:16 -0400] cwj: cnf: did you rule out server density for some reason?
[2012-05-10 23:41:34 -0400] cnf: cwj: yeah, their panel is unclear as all hell
[2012-05-10 23:42:03 -0400] cnf: and turning stuff on / off didn't stick half the time
[2012-05-10 23:42:49 -0400] cnf: cwj: and their promised trail ended after a few hours for me ^^;
[2012-05-10 23:43:02 -0400] cwj: sounds annoying
[2012-05-10 23:43:06 -0400] valdezjoelt: its getting painful
[2012-05-10 23:43:26 -0400] cnf: yah
[2012-05-10 23:43:35 -0400] cnf: cwj: have you tried them?
[2012-05-10 23:43:42 -0400] cwj: nope
[2012-05-10 23:45:41 -0400] valdezjoelt: okey im tired, just need to used pure ruby scripts to check if the service exist
[2012-05-10 23:45:52 -0400] cwj: http://www.logicmonitor.com/ looks interesting
[2012-05-10 23:46:03 -0400] valdezjoelt: intMuninInstalled = `chkconfig --list | grep myservice | wc | awk '{print $1}'`
[2012-05-10 23:46:26 -0400] cwj: looks like they want you to run a server for data collection though
[2012-05-10 23:46:39 -0400] valdezjoelt: if intMuninInstalled.to_i <= 0  execute "install mypackage service" do    command "yum --disablerepo=* --enablerepo=myrepo --nogpgcheck --quiet -y install munin-node"  end end
[2012-05-10 23:46:40 -0400] cnf: uhu
[2012-05-10 23:47:10 -0400] cwj: $20/host/month is pretty pricy too
[2012-05-10 23:47:30 -0400] cwj: this is more or less why it makes sense to run one's own nagios
[2012-05-10 23:48:12 -0400] cnf: is it?
[2012-05-10 23:48:23 -0400] cnf: cwj: that's 15 minutes of my time payed
[2012-05-10 23:48:50 -0400] cnf: maybe half hour
[2012-05-10 23:49:01 -0400] cnf: i'm not managing a nagios for that :P
[2012-05-10 23:50:22 -0400] cwj: we all have different needs
[2012-05-10 23:52:44 -0400] cnf: uhu

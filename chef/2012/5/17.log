[2012-05-17 00:00:12 -0400] miah: where is your bpi_conf.rb?
[2012-05-17 00:00:20 -0400] miah: i assume this lives in your cookbooks recipes directory?
[2012-05-17 00:01:00 -0400] hoover_damm: mhalligan, what's not getting passed? fragments_directory?
[2012-05-17 00:01:35 -0400] hoover_damm:    variables params[:variables]
[2012-05-17 00:01:38 -0400] hoover_damm: really won't do what you want
[2012-05-17 00:02:12 -0400] hoover_damm: variables ( :p => params[:variables] ) and then you can access @p[:whatever]
[2012-05-17 00:04:32 -0400] mhalligan: miah: yeah it's under cookbooks/nagios/
[2012-05-17 00:04:37 -0400] idetik_: does there exist a chef repo with roles and recipes for centOS nodes?
[2012-05-17 00:07:13 -0400] miah: mhalligan: im not sure you need to 'define' anything in that case then
[2012-05-17 00:07:21 -0400] miah: unless its a library or lwrp
[2012-05-17 00:08:43 -0400] Cope: ohai chums
[2012-05-17 00:17:11 -0400] mhalligan: hoover_damm: I stole the variables thing from nagios_conf.rb from the nagios cookbook
[2012-05-17 00:20:46 -0400] mhalligan: I'm lost, how should I be passing variables into bpi_conf?
[2012-05-17 00:25:19 -0400] mhalligan: replacing variables params[:variables] with variables (:p => params[:variables]) causes a syntax error
[2012-05-17 00:37:07 -0400] mhalligan: getting rid of the definition gets me a bit further but the variables still never get interpolated
[2012-05-17 00:50:14 -0400] hoover_damm: mhalligan, params is the full hash of all the parameters passed to your definition
[2012-05-17 00:50:43 -0400] hoover_damm: you should be mindful of using the variable name variables btw :)
[2012-05-17 01:00:01 -0400] apsoto: hey folks.  Anyone able to point to a doc on the current best practices for hacking on a cookbook in a repo while also that cookbook being public/shared?  is git submodule the best we've got?  I've looked at knife-github-cookbooks but that seems only useful for pulling in cookbooks, not actively hacking on it inside your repo.
[2012-05-17 01:18:24 -0400] mhalligan: oh man
[2012-05-17 01:18:37 -0400] mhalligan: all of that and it's becaues I was using <% instead of <%= when I wanted a variable interpolated in my template
[2012-05-17 01:22:13 -0400] hoover_damm: :`(
[2012-05-17 01:32:07 -0400] gchristensen: Hi, is there any way to use a Boolean in a resource provider?https://github.com/opscode-cookbooks/database/blob/master/libraries/resource_database_user.rb#L64 I basically duplicated this concept, but set :kind_of => Boolean . I also tried Bool, but I get: NameError: uninitialized constant Chef::Resource::DatabaseUser::Bool
[2012-05-17 01:33:26 -0400] Randm: http://stackoverflow.com/questions/3028243/check-if-ruby-object-is-a-boolean
[2012-05-17 01:33:28 -0400] Randm: ?
[2012-05-17 01:34:14 -0400] mhalligan: noah looks useful
[2012-05-17 01:34:20 -0400] gchristensen: hrm.. by perusing the source I have to manually specify the value: [TrueClass, FalseClass]
[2012-05-17 01:37:52 -0400] hoover_damm: that's the ruby value
[2012-05-17 01:38:24 -0400] hoover_damm: http://stackoverflow.com/questions/3192978/ruby-why-trueclass-and-falseclass-instead-of-boolean
[2012-05-17 01:46:31 -0400] elijah-mbp: grumblegrumble wifi at the mariott notsohot right now ;)
[2012-05-17 01:46:44 -0400] elijah-mbp: Mifi to the rescue!
[2012-05-17 01:47:06 -0400] hoover_damm: most wifi in sf sucks
[2012-05-17 01:47:15 -0400] hoover_damm: too much overlap
[2012-05-17 01:52:28 -0400] Blackavar: I switched from the conf wifi to the hotel one - seems to be a little more stable at the moment.
[2012-05-17 01:56:08 -0400] hoover_damm: lucky
[2012-05-17 02:09:46 -0400] yfeldblum: apsoto, the hard way is to build a test harness for the cookbook you're hacking on, in the cookbook's own repository, and build the cookbook with TDD completely separate from your main infra
[2012-05-17 02:14:35 -0400] yfeldblum: ruby focuses on types by message-passing rather than on types by inheritance ... so compared to languages like java, there's not much need for true and false to be instances of the same base class; there's only the need for them to behave consistently in terms of conditionality and how they respond to messages
[2012-05-17 02:34:55 -0400] jmahowald: Within the same cookbook, is there any way to create multiple providers using the easy LWRP DSL or do I need to create libraries and resources the "old" fashion way.
[2012-05-17 04:01:36 -0400] apsoto: yfeldblum: thx.  Being a dev at heart, I'd love to TDD things, but I haven't seen anything emerge as THE way to do cookbook dev.  However since I no longer do heavy ops work anymore since I've got things 'setup' I only pop in to do chef work here and there.  Therefore I no longer keep up to date on THE way to do things in chef anymore, hence my question.
[2012-05-17 07:44:04 -0400] codebeaker: morning all, I'm looking for help getting started writing a cookbook for insatlling virtual hsots
[2012-05-17 12:01:38 -0400] codebeaker: Is anyone familiar enough with the deploy resource to know what's going wrong when it's asking me for my SSH key, got my ssh_wrapper script, and an un-passphrased key?
[2012-05-17 13:04:21 -0400] rocket: ls
[2012-05-17 13:04:24 -0400] rocket: oops sorry
[2012-05-17 13:20:40 -0400] rh1n0: jtimberman: any recommendations for testing cookbooks with jenkins? ive seen various articles on the subject but wonder which solutions work the best. tx
[2012-05-17 13:21:05 -0400] rh1n0: (sorry that was meant for the group, not just jtimberman)
[2012-05-17 13:21:24 -0400] geekbri: rh1n0: At chefconf yesterday some guy gave a speech about how they do CI testing and deployment of their cookbooks
[2012-05-17 13:21:49 -0400] geekbri: rh1n0: https://github.com/acrmp/chefspec ?
[2012-05-17 13:21:54 -0400] rh1n0: geekbri: cool, thanks
[2012-05-17 13:22:05 -0400] rocket: are they recording videos to post later? :p
[2012-05-17 13:22:19 -0400] geekbri: rocket: they are! im not actually at the conference i was watching the live stream
[2012-05-17 13:22:26 -0400] rh1n0: that looks awesome.
[2012-05-17 13:23:22 -0400] geekbri: just becareful because it is still in heavy active development
[2012-05-17 13:24:32 -0400] rh1n0: heh what isnt these days? ;) thanks
[2012-05-17 13:25:36 -0400] codebeaker: I don't undersatnd this whole RSpec culture, I genuinely don't see what's wrong with Test::Unit
[2012-05-17 13:25:37 -0400] codebeaker: :(
[2012-05-17 13:25:41 -0400] codebeaker: (or rather MiniTest)
[2012-05-17 13:26:03 -0400] geekbri: Yeah in the talk he mentioned they used minitest as well
[2012-05-17 13:26:13 -0400] rh1n0: codebeaker: i love test::unit for rails dev work but seems like a ton of people are using rspec so i am forced to use it most of the time.
[2012-05-17 13:26:14 -0400] codebeaker: that's something at least
[2012-05-17 13:26:36 -0400] codebeaker: yeah, I just don't get it rh1n0 - it's slower, there's more magic, it breaks *all the time* - and it messes with the debugger
[2012-05-17 13:26:51 -0400] codebeaker: maybe it's my C background, but i'd rather just write assertions, not essays
[2012-05-17 13:27:22 -0400] geekbri: I think that chefspec is a little bit more tailored to chef than minitest though
[2012-05-17 13:29:25 -0400] rh1n0: codebeaker: and there is a steeper learning curve as well
[2012-05-17 13:32:35 -0400] yfeldblum: codebeaker, https://github.com/mongoid/mongoid/blob/v2.4.10/spec/unit/mongoid/dirty_spec.rb
[2012-05-17 13:34:35 -0400] yfeldblum: codebeaker, rspec provides nested contexts, includable example groups, overridable let's, & a lot more
[2012-05-17 13:36:23 -0400] rocket: bah now to figure out where the init scripts for chef server are stored .. they reference /usr/bin/chef-server instead of /usr/sbin/chef-server
[2012-05-17 13:39:36 -0400] yfeldblum: codebeaker, rspec also provides "matchers", which are like assertions but a lot more flexible and which can provide a lot more output for figuring out what went wrong
[2012-05-17 13:43:22 -0400] alex88: hello guys, http://pastebin.com/z5YYzMst i've this problem, when i run recipe it works, when i use my own role file it says "TypeError: can't convert nil into String"
[2012-05-17 13:44:35 -0400] codebeaker: yfeldblum: never seen the benefit - I have a project with well written specs (Rspec) and the quite takes *forever* to run
[2012-05-17 13:44:46 -0400] codebeaker: it's just slower, and more obtuse
[2012-05-17 13:44:50 -0400] codebeaker: I just prefer minitest
[2012-05-17 13:45:07 -0400] codebeaker: got mature projects built with both, and I have fewer problems with minitest
[2012-05-17 13:46:36 -0400] yfeldblum: codebeaker, to each his own; but those are some of the advantages to rspec that many people like and take advantage of effectively
[2012-05-17 13:46:38 -0400] yfeldblum: codebeaker, https://github.com/applicationsonline/librarian/blob/v0.0.23/spec/unit/lockfile/parser_spec.rb
[2012-05-17 13:48:29 -0400] codebeaker: yfeldblum each to their own, I like subclassing, and using modules for tests
[2012-05-17 13:48:43 -0400] codebeaker: I don't find that the nested context and writing a human explanation give me that much
[2012-05-17 13:49:07 -0400] codebeaker: and, admittedly testing a badly written web app (Rails) against testing a pure-ruby project (Capistrano) -- of course I hate RSpec: )
[2012-05-17 13:49:12 -0400] codebeaker: because testing Rails is hopeless
[2012-05-17 13:51:36 -0400] yfeldblum: codebeaker, i also prefer one assertion per example, so i personally wouldn't prefer: https://github.com/halorgium/capistrano/blob/master/test/server_definition_test.rb#L7-9
[2012-05-17 13:52:02 -0400] codebeaker: sometimes methods have multiple side effects
[2012-05-17 13:52:04 -0400] codebeaker: but I also agree
[2012-05-17 13:52:23 -0400] codebeaker: (that file is largely unmodified since it was originally authored in 2007, by someone else) ;)
[2012-05-17 13:52:51 -0400] yfeldblum: codebeaker, absolutely, but would prefer each side effect being asserted for in its own example
[2012-05-17 13:53:18 -0400] codebeaker: very true, there's actually a good reason we're re-writing cap, and it's largely because the API isn't that clean, and very often things have many subtle side effects
[2012-05-17 13:53:32 -0400] codebeaker: we're designing for testability this time, and it's working out pretty well
[2012-05-17 13:53:47 -0400] yfeldblum: awesome
[2012-05-17 13:54:22 -0400] codebeaker: (Interesting that as Cap's maintainer I've only just this last week made the time to look at Chef
[2012-05-17 13:54:31 -0400] codebeaker: the deploy resource is quite good, and I've learned a few neat tricks
[2012-05-17 13:55:45 -0400] yfeldblum: i haven't personally found rspec to be slow; the slowness i've seen in specs comes from other stuff (filesystem access, db access, etc)
[2012-05-17 13:55:53 -0400] codebeaker: difficult proposition though, as Chef sortof assumes complete control, and without deploying with Chef, one risks leaving daemons spinning, and Cap doesn't have the luxury of using something like "  notifies :restart, "service[nginx]""
[2012-05-17 13:56:29 -0400] codebeaker: (I'd also absolutely agree, I think that as RSpec allows someone to start running before many can walk it leads to a lot of shitty code, and badly written tests, as again test::unit requiring that one actually thinks about what one writes)
[2012-05-17 13:56:54 -0400] yfeldblum: codebeaker, it should be possible to use chef & cap together; the use model of chef & the use model of cap are very different
[2012-05-17 13:58:34 -0400] yfeldblum: codebeaker, chef for preparing servers with the needed background stuff, cap for pushing app deploys
[2012-05-17 14:00:30 -0400] codebeaker: yfeldblum: indeed - but I find that chef would leave you with hanging configs, unicorn spinning waiting for the project to show up, nginx with nothing to serve
[2012-05-17 14:01:03 -0400] codebeaker: and there's a bit of a challenge in restarting services, typically I use monit watching the REVISION file, but monit isn't smart enough to differentiate between reload and restart
[2012-05-17 14:01:07 -0400] codebeaker: which hurts running webapps
[2012-05-17 14:01:41 -0400] codebeaker: I agree in principle that chef for infrastructure, and apps deployed with cap, I'm just labouring this way to get some experience with the deploy resource
[2012-05-17 14:01:55 -0400] codebeaker: so I can see if there's a way it can be improved for tighter cap integration
[2012-05-17 14:02:07 -0400] codebeaker: (cap to export a basic application cookbook?)
[2012-05-17 14:02:08 -0400] yfeldblum: so chef can drop a reload.sh that reloads nginx etc
[2012-05-17 14:02:19 -0400] yfeldblum: and cap can run it
[2012-05-17 14:02:37 -0400] codebeaker: yeah, naturally, just a bit challenging to get permissions right without sudo/setuid
[2012-05-17 14:02:45 -0400] codebeaker: I don't like having a dedicated deploy user, or deploy keys
[2012-05-17 14:02:51 -0400] codebeaker: I prefer forward agent and correct groups
[2012-05-17 14:02:56 -0400] codebeaker: (but then restarting without sudo is impossible)
[2012-05-17 14:03:02 -0400] codebeaker: since you can't restart group owned processes
[2012-05-17 14:03:02 -0400] codebeaker: :(
[2012-05-17 14:03:06 -0400] codebeaker: (unless I missed something)
[2012-05-17 14:03:16 -0400] codebeaker: and setuid scritps are evil
[2012-05-17 14:03:27 -0400] codebeaker: dude, I've gotta step into a meeting for 20 mins
[2012-05-17 14:03:35 -0400] codebeaker: pick you up later if youare interested inchatting ?
[2012-05-17 14:03:38 -0400] codebeaker: appreciate your input
[2012-05-17 14:05:18 -0400] yfeldblum: latez
[2012-05-17 14:55:47 -0400] codebeaker: hi yfeldblum - back
[2012-05-17 14:55:57 -0400] yfeldblum: codebeaker, hi
[2012-05-17 15:01:16 -0400] yfeldblum: codebeaker, so, cap & sudo & setuid ... can you elaborate?
[2012-05-17 15:02:20 -0400] codebeaker: well, I like to put my users in a group, say `myapp` then have all files owned by <whoeverdeployed:myapp> -- that way everyone can work, and the files can be g=rwx
[2012-05-17 15:02:23 -0400] codebeaker: and a team can work
[2012-05-17 15:02:31 -0400] codebeaker: but then I like to run the daemons as  well, any user, really
[2012-05-17 15:02:41 -0400] codebeaker: but I don't want to have to give sudo access to the user to restart processes
[2012-05-17 15:02:57 -0400] codebeaker: (and they cna't be restarted by monit/bluepill/etc, as they aren't "reload" aware)
[2012-05-17 15:03:12 -0400] codebeaker: so you have an unprivilged user, a careful user/group setup, and peopel who can deploy, but can't restart
[2012-05-17 15:03:50 -0400] codebeaker: there's two solutions as I see it, setgid (root) script that anyone can run without sudo, or tweaking sudo to allow conditional command execution (but that's also insecure, since one can simply rename other commands)
[2012-05-17 15:04:24 -0400] codebeaker: what would be ideal, is if there was some utility that users who's primary group was "myapp" could signal processes where the effective gid was the same
[2012-05-17 15:05:01 -0400] codebeaker: otherwise the group setting for unicorn, passenger, apache etc is meaningless (or at least only meainful for touching the disk, which isn't that often in the days of S3 and distributed logging)
[2012-05-17 15:06:35 -0400] LinuxHorn: can someone help me with a bootstrap issue?
[2012-05-17 15:07:06 -0400] LinuxHorn: bootstrap works fine, but when i add a template file with -d 'ubuntu10.04-evan'
[2012-05-17 15:07:13 -0400] LinuxHorn: i get Can not find bootstrap definition for ubuntu10.04-evan.erb
[2012-05-17 15:07:32 -0400] paulmooring: where did you add it?
[2012-05-17 15:07:32 -0400] LinuxHorn: and yes, the ubuntu10.04-evan.erb file is in .chef/bootstrap
[2012-05-17 15:08:05 -0400] yfeldblum: codebeaker, how about chef dropping a daemon whose job is to reload apps & surrounding services like nginx on command, and which listens on a port on localhost or on a unix domain socket for commands?
[2012-05-17 15:08:43 -0400] codebeaker: yfeldblum: thought about that, does something exist ?
[2012-05-17 15:09:04 -0400] yfeldblum: codebeaker, don't know
[2012-05-17 15:09:07 -0400] codebeaker: I mean, i'm talking about something that runs as root (probably) and allows you to signal processes who's gid matches your own
[2012-05-17 15:09:12 -0400] codebeaker: I think that would make for a clean tool
[2012-05-17 15:09:24 -0400] codebeaker: might try writing it, can't be more than a couple of hundred loc
[2012-05-17 15:09:33 -0400] yfeldblum: codebeaker, sounds about right
[2012-05-17 15:10:00 -0400] codebeaker: weekend project
[2012-05-17 15:10:05 -0400] codebeaker: (adds to the ever-expanding list)
[2012-05-17 15:10:06 -0400] yfeldblum: codebeaker, the particular commands to be run & signals to be sent can possibly be set up via chef or can be sent via cap
[2012-05-17 15:10:13 -0400] paulmooring: LinuxHorn: I've heard of similar reported bugs, looking for them now
[2012-05-17 15:10:22 -0400] LinuxHorn: thanks paulmooring
[2012-05-17 15:10:43 -0400] LinuxHorn: i'm using hosted chef, but have the 0.10.8 client on my macbook
[2012-05-17 15:11:09 -0400] codebeaker: yfeldblum - I'll think on it some more, but I've had it in mind for some time
[2012-05-17 15:11:13 -0400] LinuxHorn: my company has an open source 0.10.8 chef server running internally, so i'm thinking it's best to leave that client version at 0.10.8
[2012-05-17 15:11:29 -0400] codebeaker: no reason I couldn't add that to chef, too - as a lwrp :) (now that I know what one is :))
[2012-05-17 15:12:16 -0400] yfeldblum: codebeaker, that's right, and i consider that to be background setup do be done with chef, in preparation for an app to be deployed with cap (out-of-band with chef-client runs)
[2012-05-17 15:12:57 -0400] yfeldblum: codebeaker, it seems clean: chef does what chef does, cap does what cap does, & the cap-agent does what the cap-agent does
[2012-05-17 15:16:54 -0400] LinuxHorn: paulmooring: i have a second image in the bootstrap directory that does work, this new one i added this morning is not found
[2012-05-17 15:17:14 -0400] LinuxHorn: do i need to upload these to the chef server or something to make a bootstrap template work?
[2012-05-17 15:17:14 -0400] paulmooring: do the permissions match?
[2012-05-17 15:17:32 -0400] LinuxHorn: yep, 644 on both
[2012-05-17 15:17:38 -0400] paulmooring: LinuxHorn: No the server doesn't need to know about bootstrap templates
[2012-05-17 15:17:40 -0400] LinuxHorn: and same owner/group
[2012-05-17 15:18:41 -0400] paulmooring: LinuxHorn: Does is work if you use --template-file .chef/boostrap/ubuntu10.04-evan.erb
[2012-05-17 15:18:55 -0400] paulmooring: rather than just -d ubuntu10.04-evan.erb
[2012-05-17 15:21:16 -0400] LinuxHorn: weird, if i change the name of the file and then call the new name with -d it works
[2012-05-17 15:21:23 -0400] LinuxHorn: that's just  odd?
[2012-05-17 15:22:00 -0400] paulmooring: what did you change it to?
[2012-05-17 15:22:39 -0400] hoover_damm: -d ubuntu11.04-evan
[2012-05-17 15:22:40 -0400] hoover_damm: should be valid
[2012-05-17 15:22:55 -0400] hoover_damm: provided the bootstrap is in .chef/bootstrap or in chef-repo/.chef/bootstrap
[2012-05-17 15:24:07 -0400] LinuxHorn: it should be, but it's not
[2012-05-17 15:24:17 -0400] LinuxHorn: if i use a different name it works fine
[2012-05-17 15:25:15 -0400] paulmooring:   LinuxHorn mind telling me what name worked? I'm going to file a bug as this is not the first time I've seen this
[2012-05-17 15:26:00 -0400] LinuxHorn: ubuntu10.04-test
[2012-05-17 15:26:18 -0400] LinuxHorn: maybe because my username is in the ubuntu10.04-evan?
[2012-05-17 15:32:15 -0400] cwj: thats weird
[2012-05-17 15:45:03 -0400] LinuxHorn: cwj: the fix you gave last night for the ruby-shadow works
[2012-05-17 15:45:07 -0400] LinuxHorn: first time
[2012-05-17 15:53:09 -0400] hoover_damm: fwiw you should be using ssh keys generally instead of passwords
[2012-05-17 15:53:24 -0400] hoover_damm: at least imo
[2012-05-17 15:53:49 -0400] hoover_damm: you don't have someone call up on the phone asking for your ssh key generally
[2012-05-17 15:53:52 -0400] hoover_damm: and the passphrase for it
[2012-05-17 15:54:12 -0400] hoover_damm: the social engineering still exists to get those
[2012-05-17 15:54:30 -0400] flashmanbahadur: can you imaging trying to recite an SSH key over the phone
[2012-05-17 15:55:14 -0400] hoover_damm: no not really.  I once imagined that we'd have IP based telephones 10 years ago and telephone numbers would be worthless
[2012-05-17 15:55:59 -0400] hoover_damm: just requires an ip and basic connectivity to make a phone call that you can transfer files/etc over
[2012-05-17 15:56:24 -0400] hoover_damm: it's unfortunate that skype and other software packages have gotten closer then the companies that likely could/should be driving that kind of thing (CenturyLink/etc)
[2012-05-17 15:58:28 -0400] LinuxHorn: hoover_damm: i do use ssh keys 99% of the time
[2012-05-17 15:59:07 -0400] LinuxHorn: however, if I am out somewhere and need to hop on to my server from somewhere that doesn't have my ssh key i would be screwed without a password
[2012-05-17 15:59:39 -0400] LinuxHorn: generally i guess i could ssh into a client box i have using a password, and then ssh from there using my key
[2012-05-17 15:59:54 -0400] LinuxHorn: but i want this as a seldom used backup
[2012-05-17 16:03:19 -0400] hoover_damm: I use ssh agent forwarding ever
[2012-05-17 16:03:23 -0400] hoover_damm: everywhere*
[2012-05-17 16:03:27 -0400] hoover_damm: alias ssh="ssh -A"
[2012-05-17 16:03:42 -0400] hoover_damm: unfortunately that gets easier then dropping it in .ssh/config for some reason *sigh*
[2012-05-17 16:03:58 -0400] hoover_damm: but if your in a situation where your mitm isn't your first fear
[2012-05-17 16:04:08 -0400] hoover_damm: ssh agent forwarding ftw
[2012-05-17 16:06:54 -0400] LinuxHorn: hmmmm, never tried that
[2012-05-17 16:07:01 -0400] LinuxHorn: will take a look, thanks for the suggestion
[2012-05-17 16:30:45 -0400] karmi: Hi, I'm getting an `can't convert nil into String` error from unix.rb:106:in `stat' on chef 10.10, from a previously working link block [https://github.com/karmi/cookbook-elasticsearch/blob/master/recipes/default.rb#L107-112]. Anybody has any clue why it would not work?
[2012-05-17 16:31:58 -0400] hoover_damm: %w| |
[2012-05-17 16:32:01 -0400] hoover_damm: huh?
[2012-05-17 16:32:09 -0400] hoover_damm: %w| elasticsearch plugin |.each do |f|
[2012-05-17 16:32:17 -0400] hoover_damm: should be %w{elasticsearch plugin}.each do |f|
[2012-05-17 16:32:23 -0400] hoover_damm: ^^ karmi
[2012-05-17 16:32:51 -0400] hoover_damm: oh heck that works
[2012-05-17 16:32:57 -0400] hoover_damm: i've never done %w| | to create an array
[2012-05-17 16:33:03 -0400] karmi: hoover_damm: no, that's not the problem.
[2012-05-17 16:33:14 -0400] karmi: hoover_damm: try `p %w| elasticsearch plugin |` in irb/ruby etc
[2012-05-17 16:33:23 -0400] hoover_damm: karmi, I did after I said that
[2012-05-17 16:34:05 -0400] hoover_damm: karmi, anywho I'd need to see more of a stacktrace to determine the issue
[2012-05-17 16:34:16 -0400] hoover_damm: karmi, if you wouldn't mind posting more to gist.github.com?
[2012-05-17 16:36:21 -0400] karmi: hoover_damm: sure
[2012-05-17 16:37:28 -0400] karmi: hoover_damm: this is the full stacktrace, http://pastie.org/private/6zyoaoxsbsgig5tlqdcgkg
[2012-05-17 16:49:33 -0400] karmi: OK, installed `gem install chef -v 0.10.8` and confirmed it's working on that version...
[2012-05-17 16:50:03 -0400] karmi: btm: Any idea, please, why would `link` fail like that on 0.10.10?
[2012-05-17 16:54:32 -0400] cwj: LinuxHorn: any chance you've tested the user_manage changes i pushed yesterday?
[2012-05-17 16:55:52 -0400] LinuxHorn: cwj: yeah, posted an hour ago that i  did :)
[2012-05-17 16:56:07 -0400] cwj: oh cool, i will scroll up
[2012-05-17 16:56:16 -0400] LinuxHorn: the changes you sent me last night worked, first time success now
[2012-05-17 16:56:23 -0400] LinuxHorn: nice work!
[2012-05-17 16:56:26 -0400] cwj: very good
[2012-05-17 16:56:32 -0400] cwj: thanks for helping me test it!
[2012-05-17 16:57:46 -0400] dunniganp: jessicab: if you are there, returning to the quick starts from yesterday I had to apply the following get them to work on ubuntu: https://github.com/opscode-cookbooks/mysql/pull/1
[2012-05-17 17:03:35 -0400] hoover_damm: karmi, strange.  I almost feel like it's expecting an owner bit on the link resource
[2012-05-17 17:03:51 -0400] hoover_damm: but you should file a bug
[2012-05-17 17:04:27 -0400] upgrayedd: is there a way to set a ruby variable from a script block?
[2012-05-17 17:04:58 -0400] karmi: hoover_damm: yes, seems like a regression to me
[2012-05-17 17:05:08 -0400] upgrayedd: or, alternately, a way to set it from ruby code that doesn't execute during initialize
[2012-05-17 17:05:13 -0400] karmi: hoover_damm: was playing a lot with the syntax to use the most rigid ruby to no good end
[2012-05-17 17:08:13 -0400] upgrayedd: i coullllddd write another LWRP
[2012-05-17 17:08:24 -0400] cwj: is it possible to get the current running version of chef from Chef::Config or similar?
[2012-05-17 17:14:54 -0400] hoover_damm: cwj, is that a question or a statement?
[2012-05-17 17:15:23 -0400] cwj: its a question
[2012-05-17 17:15:28 -0400] upgrayedd: hoover_damm is that a question or a statement?
[2012-05-17 17:15:48 -0400] btm: karmi: there was a regression in link in 0.10.10 that lead to a slew of improvements as John Keiser wrote a test suite out for it: CHEF-3102, CHEF-3110, CHEF-3111, CHEF-3112
[2012-05-17 17:15:50 -0400] hoover_damm: cwj, fire up shef and check out Chef::Config and then look for the constants defined that set the version
[2012-05-17 17:16:20 -0400] doomviking: upgrayedd: nice nick :)
[2012-05-17 17:16:24 -0400] karmi: hoover_damm: issue submitted, will check the issues you posted
[2012-05-17 17:16:29 -0400] upgrayedd: ty
[2012-05-17 17:16:37 -0400] hoover_damm: ^^ btm
[2012-05-17 17:16:37 -0400] cwj: yes i am looking at Chef::Config in shef and i dont see the version exposed
[2012-05-17 17:16:59 -0400] cwj: so my question is, where can i get the version
[2012-05-17 17:17:17 -0400] karmi: hoover_damm: https://tickets.opscode.com/browse/CHEF-3102 looks like my issue
[2012-05-17 17:17:34 -0400] karmi: hoover_damm: however, when I commented out owner/group, I still got the error
[2012-05-17 17:17:54 -0400] upgrayedd: so, my plain old ruby code inside or outside a resource block in my recipe gets executed at initialization time
[2012-05-17 17:18:02 -0400] hoover_damm: karmi, right
[2012-05-17 17:18:13 -0400] hoover_damm: karmi, best suggestion is to downgrade until the issue is fixed
[2012-05-17 17:18:54 -0400] karmi: hoover_damm: yes, I think so. already updated some public tutorial which was affected
[2012-05-17 17:19:00 -0400] upgrayedd: is there a way around this besides writing an LWRP?
[2012-05-17 17:19:02 -0400] karmi: hoover_damm: thanks for your support!
[2012-05-17 17:21:11 -0400] paulmooring: upgrayedd: I think you might be looking for ruby blocks
[2012-05-17 17:21:18 -0400] upgrayedd: probably.....
[2012-05-17 17:21:28 -0400] paulmooring: http://wiki.opscode.com/display/chef/Resources#Resources-RubyBlock
[2012-05-17 17:21:29 -0400] upgrayedd: i sure was =P
[2012-05-17 17:21:44 -0400] upgrayedd: ty
[2012-05-17 17:21:49 -0400] paulmooring: np
[2012-05-17 17:22:20 -0400] upgrayedd: and i can notifies ..., "ruby_block[soandso]" ?
[2012-05-17 17:22:23 -0400] paulmooring: upgrayedd: I would recommend bookmarking that resources page, I use it many times a day :)
[2012-05-17 17:22:37 -0400] paulmooring: yes you can
[2012-05-17 17:22:41 -0400] upgrayedd: perfect
[2012-05-17 17:22:45 -0400] btm: karmi: it'd be great if you can test the topic branch and see if it fixes your bug and report back on the ticket.
[2012-05-17 17:23:44 -0400] karmi: btm: please, link to branch? JIRA is kinda hard to use...
[2012-05-17 17:26:43 -0400] hoover_damm: karmi, https://github.com/opscode/chef/pull/299
[2012-05-17 17:26:58 -0400] hoover_damm: karmi, in this case you want to check out jkeiser:CHEF-3102
[2012-05-17 17:27:14 -0400] ukio: ohai!
[2012-05-17 17:28:04 -0400] karmi: hoover_damm: thanks
[2012-05-17 17:28:18 -0400] karmi: grr, should have left the EC2 instance around :)
[2012-05-17 17:33:30 -0400] ukio: had anyone of you ever problems with chef-server not starting automatically?
[2012-05-17 17:33:50 -0400] ukio: i have installed chef-server via the rubygems-install method
[2012-05-17 17:34:23 -0400] ukio: the init script in /etc/init.d/chef-server looks fine, but it fails to start at boot time
[2012-05-17 17:34:42 -0400] ukio: ..as I can read from /var/log/boot.log
[2012-05-17 17:36:13 -0400] ukio: but there's nothing in /var/log/chef/server.log indicating why it might have failed
[2012-05-17 17:36:31 -0400] karmi: btm: Kinda in hell, `sudo rake install` needs gecode, `sudo rake gem` needs RSpec
[2012-05-17 17:36:49 -0400] karmi: btm: Bundler has a nice selection of rake tasks to install gems...
[2012-05-17 17:38:47 -0400] karmi: btm: Any reason why chef does not use Bundler?
[2012-05-17 17:39:13 -0400] linTest: Question about the web interface - is it possible to initiate a run on a node via the web interface?
[2012-05-17 17:39:28 -0400] timsmith: linTest: No
[2012-05-17 17:39:43 -0400] paulmooring: linTest: No, you can only initiate a run from the node itself
[2012-05-17 17:39:57 -0400] paulmooring: we usually use knife ssh to batch run chef-client
[2012-05-17 17:40:43 -0400] linTest: ah, we wanted to use the list of nodes in the web interface to allow developers to setup servers directly through that interface.
[2012-05-17 17:41:11 -0400] hoover_damm: karmi, gem build next time
[2012-05-17 17:41:32 -0400] hoover_damm: karmi, as the dependency handling in rake install usually is horrible
[2012-05-17 17:42:38 -0400] karmi: hoover_damm: True. Shame for no Bundler still :)
[2012-05-17 17:43:07 -0400] karmi: hoover_damm: btm: The issue is indeed resolved by https://github.com/jkeiser/chef/tree/CHEF-3102
[2012-05-17 17:43:18 -0400] karmi: Issue at JIRA updated, comment to pull request added.
[2012-05-17 17:43:20 -0400] jkeiser: karmi: yay!
[2012-05-17 17:43:26 -0400] jkeiser: Was this on 1.8.7?
[2012-05-17 17:43:53 -0400] karmi: jkeiser: yeah, default 1.8.7
[2012-05-17 17:44:33 -0400] karmi: lesson to /me, always use `version` in public tutorials and such :)
[2012-05-17 17:45:04 -0400] jkeiser: Awesome.  Would you mind doing me a solid and running rake spec?  I added a bunch of tests and haven't managed to get that to run at all, and I want to make sure I didn't break tests
[2012-05-17 17:45:55 -0400] karmi: jkeiser: Argh, machine already terminated again :)
[2012-05-17 17:45:57 -0400] jkeiser: (i.e. haven't got 1.8.7 Chef past the build phase yet)
[2012-05-17 17:46:35 -0400] karmi: jkeiser: I can run that locally on 1.8.7, but I probably never run Chef suite, it depends on XYZ components, no?
[2012-05-17 17:47:05 -0400] jkeiser: Well, the chef subdir is the one to do, it won't run the server components
[2012-05-17 17:47:24 -0400] jkeiser: But yeah, it still requires gecode :(
[2012-05-17 17:47:42 -0400] jkeiser: I'll keep pushing that through, thanks for verifying the fix!
[2012-05-17 17:48:03 -0400] karmi: will try to run it locally on a mac
[2012-05-17 17:49:39 -0400] karmi: Also, I *hope*you guys plan on splitting the gem in the client, server, etc parts. Pulling all that MBs just for the client is crazy :)
[2012-05-17 17:59:00 -0400] LinuxHorn: need a new project to work on while not wanting to do actual work
[2012-05-17 17:59:35 -0400] LinuxHorn: was thinking i'd write a chef recipe that if you deploy a rackspace cloud server with chef and this recipe that it will automagically create a DNS record for the public IP using nodename.[dns suffix you have an attribute for] using the Rackspace cloud dns api
[2012-05-17 17:59:49 -0400] LinuxHorn: would that be helpful for anyone?  can't seem to come up with any other ideas today
[2012-05-17 18:00:40 -0400] eherot: LinuxHorn: One tricky thing is that you kind of want the name registered before chef creates its node entry
[2012-05-17 18:01:17 -0400] eherot: I guess that isn't really necessary as long as you make sure to pass the chef-client the node's permanent fqdn the first time you run it
[2012-05-17 18:01:47 -0400] LinuxHorn: interesting point
[2012-05-17 18:02:40 -0400] karmi: jkeiser: the specs fail for me on 1.8.7
[2012-05-17 18:03:13 -0400] jkeiser: karmi: oh, thanks!  Can you paste to me in a private message?
[2012-05-17 18:03:56 -0400] karmi: yeah, lemme get some sane rspec output
[2012-05-17 18:04:14 -0400] gp5st: hello. using the iis cookbook, how does one attach an app to a site? "app_name: name attribute. The name of the site to add this app to
[2012-05-17 18:04:20 -0400] gp5st: " is a bit confusing"
[2012-05-17 18:05:16 -0400] jkeiser: karmi: (fyi, some specs fail for me on 1.9, too, but those specs failed for me before my changes, too)
[2012-05-17 18:07:25 -0400] eherot: LinuxHorn: We implemented something very similar except that I ended up making it a dhcp hook instead of a chef recipe so that the machines would have their names as soon as they came online.  This is in EC2 where machines can have tags (the name goes in a tag called "Name"), Rackspace has a similar feature that you should be able to access from on the machine.
[2012-05-17 18:07:53 -0400] LinuxHorn: eherot: you have a link to the code you used?
[2012-05-17 18:08:16 -0400] hoover_damm: eherot, it's too bad the knife can't use tags or set the alias's directly like it can for rackspace
[2012-05-17 18:09:04 -0400] eherot: LinuxHorn: you mean the hook?
[2012-05-17 18:09:17 -0400] LinuxHorn: yeah, just re-read what you wrote
[2012-05-17 18:09:32 -0400] LinuxHorn: nm
[2012-05-17 18:10:13 -0400] eherot: LinuxHorn: We don't use RS's internal DNS since they didn't have an API at the time we did that
[2012-05-17 18:10:26 -0400] eherot: for dns that is
[2012-05-17 18:10:53 -0400] LinuxHorn: i work on the team at rackspace that support cloud dns, cloud monitoring, and cloud databases
[2012-05-17 18:11:10 -0400] LinuxHorn: can do a lot of stuff with those api's
[2012-05-17 18:11:36 -0400] eherot: LinuxHorn: ohhhhhh
[2012-05-17 18:12:58 -0400] LinuxHorn: :)
[2012-05-17 18:13:04 -0400] eherot: yeah we have about 90 servers deployed in your ORD cloud, making use of that API could potentially be very useful for us
[2012-05-17 18:13:13 -0400] LinuxHorn: hence me wanting to write rackspace cookbooks
[2012-05-17 18:13:40 -0400] LinuxHorn: should be fairly simple, and really doesn't have to be done at the beginning of a deploy
[2012-05-17 18:13:42 -0400] eherot: good for you guys :-)
[2012-05-17 18:14:00 -0400] eherot: does the API do rdns too?
[2012-05-17 18:14:15 -0400] gp5st: is app_name really site_name?
[2012-05-17 18:14:16 -0400] LinuxHorn: Support for multiple record types (A, CNAME, NS, TXT, AAAA, DKIM, MX,
[2012-05-17 18:14:17 -0400] LinuxHorn: SRV, and SPF)
[2012-05-17 18:14:23 -0400] LinuxHorn: http://www.rackspace.com/cloud/cloud_hosting_products/dns/
[2012-05-17 18:17:12 -0400] eherot: well then to answer the original question, yes, it would be useful to us.  It might just motivate us to scrap the internal DNS we have running there now.
[2012-05-17 18:17:16 -0400] eherot: actually there is one thing though
[2012-05-17 18:17:34 -0400] eherot: can we also add DNS overrides for IP addresses not inside rackspace?
[2012-05-17 18:18:10 -0400] LinuxHorn: hmmmm, never tried that
[2012-05-17 18:18:18 -0400] LinuxHorn: here is a page with a link to the api docs
[2012-05-17 18:18:21 -0400] LinuxHorn: http://docs.rackspace.com/api/
[2012-05-17 18:18:40 -0400] LinuxHorn: not saying it can't be done, i just personally haven't tried it
[2012-05-17 18:19:18 -0400] eherot: yeah, though it's hacky it's often unavoidable
[2012-05-17 18:19:24 -0400] LinuxHorn: i specialize more in cloud monitoring, but my team does handle admin work for databases and dns as well
[2012-05-17 18:19:51 -0400] eherot: devs like to be able to use the same dns names on their dev boxes and prod and sometimes that means making the same name do different things in different places.
[2012-05-17 18:20:05 -0400] eherot: thanks for the link I'll definitely have to look at this
[2012-05-17 18:22:48 -0400] LinuxHorn: np, feel free to bug me with questions  i'm always on via a znc bouncer, so if i am not at the console when you ask it'll remind me next time i open my irc client
[2012-05-17 18:23:44 -0400] eherot: hoover_damm: yeah the thing is it's all available through the API so I'd be surprised if no one's written a plugin for that
[2012-05-17 18:24:07 -0400] eherot: hoover_damm: we have one but it does a lot more than just that (and is probably a liiiiiiitle proprietary to be open sourced in any useful way
[2012-05-17 18:25:08 -0400] nenemo: ppl, anybody tried to use chef-solo with ruby inside rvm? when I try to use "user" chef can't find a system shadow-ruby library.
[2012-05-17 18:32:00 -0400] eherot: nenemo: heh, I think some variation of the shadow-ruby gets asked here about 5 times a day at least
[2012-05-17 18:32:11 -0400] eherot: (which is not to imply that I know the answer!)
[2012-05-17 18:32:12 -0400] nenemo: :-)
[2012-05-17 18:32:29 -0400] eherot: is this on a debian machine?
[2012-05-17 18:32:33 -0400] eherot: deb/ubuntu that is
[2012-05-17 18:32:39 -0400] nenemo: no, thats a centos 5
[2012-05-17 18:32:40 -0400] hoover_damm: eherot, well remember that Chef and everything Opscode is a excellent starting point.  You are free to enhance and submit patches back to Opscode if you can
[2012-05-17 18:33:01 -0400] hoover_damm: the actual hard defined hosting patterns usually require more then a simple cookbook
[2012-05-17 18:33:40 -0400] eherot: hoover_damm: my favorite part about chef is its extensibility.  I think we have about 50 homemade cookbooks in our shop
[2012-05-17 18:33:59 -0400] eherot: probably some of them should be posted back to the community site actually
[2012-05-17 18:34:02 -0400] gp5st: when i do a knife search command nothing is ever returned:(
[2012-05-17 18:34:07 -0400] hoover_damm: eherot, start to use the chef gem in other things?
[2012-05-17 18:34:08 -0400] nenemo: I just failed back to system ruby for a chef, it's working.
[2012-05-17 18:34:25 -0400] gp5st: how can i check if things are being index
[2012-05-17 18:34:32 -0400] gp5st: or if something else is wrong
[2012-05-17 18:35:20 -0400] eherot: nenemo: the pkg that solves this problem on ubuntu basically installs /usr/lib/ruby/1.8/x86_64-linux/shadow.so
[2012-05-17 18:35:27 -0400] eherot: not exactly sure what the rvm equivalent of that would be
[2012-05-17 18:36:06 -0400] dschultz: gp5st: Try running knife index rebuild
[2012-05-17 18:36:11 -0400] hoover_damm: using rvm is the first problem lol
[2012-05-17 18:36:34 -0400] nenemo: eherot: on centos pkg ruby-shadow installs /usr/lib64/ruby/site_ruby/1.8/x86_64-linux/shadow.so
[2012-05-17 18:36:39 -0400] eherot: hoover_damm: yeah I implemented the knife bootstrap function into another ruby script I wrote.  I realized about halfway through that I was probably not doing this in the easiest possible way
[2012-05-17 18:36:39 -0400] geekbri: yes i've had some bad experiences with rvm
[2012-05-17 18:36:58 -0400] nenemo: using centos5 is the first problem.
[2012-05-17 18:37:02 -0400] eherot: Any framework that needs to crack open "cd" to work is, by definiton, broken.
[2012-05-17 18:37:04 -0400] hoover_damm: eherot, I'm still rather fond of booting the bootstrap in the user-data on EC2.
[2012-05-17 18:37:05 -0400] doomviking: heh
[2012-05-17 18:37:27 -0400] eherot: hoover_damm: Yeah I've been looking for ways to make use of that
[2012-05-17 18:37:36 -0400] hoover_damm: most AMI's execute user-data on bootup
[2012-05-17 18:37:50 -0400] hoover_damm: user data is just a shell script that is executed
[2012-05-17 18:38:07 -0400] hoover_damm: so it can be a base64 file that is uudecoded and then run even
[2012-05-17 18:38:24 -0400] nenemo: ...in rvm I using 1.9.3, so I think that's why they dont want to use this lib.
[2012-05-17 18:38:35 -0400] hoover_damm: take the bootstrap file, imagine that as user data...
[2012-05-17 18:38:46 -0400] hoover_damm: in a nutshell :)
[2012-05-17 18:39:03 -0400] eherot: does this let you bootstrap a machine without having to actually use the knife bootstrap command?
[2012-05-17 18:39:14 -0400] hoover_damm: wrap it around notification and you can be notified when it fails, starts
[2012-05-17 18:39:19 -0400] hoover_damm: you bet
[2012-05-17 18:39:52 -0400] hoover_damm: ec2-run-instances ami-fdsfdsfsd -t c1.xlarge -N bob --tags 1 2 3 -S chef -z us-east-1a --user-data=..
[2012-05-17 18:40:45 -0400] hoover_damm: eherot, here's an example of how I setup the ssh keys... https://github.com/damm/ec2-init/blob/master/01-ec2-openssh-keys.start
[2012-05-17 18:40:57 -0400] hoover_damm: eherot, cloudinit runs user-data as well and lets you do more with it if you run ubuntu
[2012-05-17 18:41:39 -0400] hoover_damm: you can automate installing chef with cloudinit in user-data fairly easily and have it auto bootstrap
[2012-05-17 18:42:05 -0400] hoover_damm: automate how it grabs the name, and you likely could wrap it around autoscaling
[2012-05-17 18:42:32 -0400] eherot: it would get around the problem of having to maintain a custom ami
[2012-05-17 18:42:47 -0400] hoover_damm: yupyup
[2012-05-17 18:42:59 -0400] hoover_damm: custom ami's are fun but they are a chore to maintain
[2012-05-17 18:43:15 -0400] eherot: yeah especially as some of the community ones get better and better
[2012-05-17 18:43:20 -0400] hoover_damm: it's a good pattern to follow still really.  You should never depend on upstream being up to give you files
[2012-05-17 18:43:20 -0400] eherot: (and not just because the packages get upgraded)
[2012-05-17 18:43:25 -0400] eherot: (which obivously I can do myself)
[2012-05-17 18:43:41 -0400] hoover_damm: rubygems could go down... (S3)
[2012-05-17 18:43:46 -0400] hoover_damm: it's not likely
[2012-05-17 18:43:49 -0400] yfeldblum: custom ami's or netflix's bakery?
[2012-05-17 18:43:51 -0400] eherot: (except for that one time)
[2012-05-17 18:44:09 -0400] hoover_damm: but I mirrored Ubuntu's apt repos
[2012-05-17 18:44:12 -0400] hoover_damm: at old jobs
[2012-05-17 18:44:29 -0400] eherot: yeah, did that for centos at my previous job
[2012-05-17 18:44:32 -0400] hoover_damm: and redhat mirrors locally
[2012-05-17 18:44:34 -0400] eherot: pita
[2012-05-17 18:44:37 -0400] hoover_damm: pxe, etc
[2012-05-17 18:44:43 -0400] hoover_damm: sure, but the end result was beauty
[2012-05-17 18:44:52 -0400] eherot: yeah, and extremely consistent
[2012-05-17 18:44:59 -0400] hoover_damm: hook it around serial console and you can sit at home and re-do half of production in a few minutes
[2012-05-17 18:45:14 -0400] eherot: not to mention very easy to add new packages to when the core repos didn't feel compelled to host them
[2012-05-17 18:45:24 -0400] hoover_damm: I reintalled physical boxes in less then 15minutes and had them ready for production in chef
[2012-05-17 18:45:27 -0400] hoover_damm: in 2010
[2012-05-17 18:45:32 -0400] hoover_damm: and that was on baremetal
[2012-05-17 18:45:38 -0400] eherot: we used DRAC cards, but same idea
[2012-05-17 18:45:50 -0400] hoover_damm: I prefer Advocent Cyclades
[2012-05-17 18:45:53 -0400] eherot: definitely rebuilt a few machines from home
[2012-05-17 18:45:59 -0400] hoover_damm: removes the whole chore of having to spend 500$ per box
[2012-05-17 18:46:01 -0400] hoover_damm: for access
[2012-05-17 18:46:09 -0400] hoover_damm: drac usually gave me more pains then joys
[2012-05-17 18:46:15 -0400] eherot: aren't the cyclades boxes also incredibly expensive?
[2012-05-17 18:46:17 -0400] hoover_damm: but other people may feel differently
[2012-05-17 18:46:28 -0400] hoover_damm: return of investment
[2012-05-17 18:46:39 -0400] eherot: i had really no love for the dracs or the hp ilo's really.
[2012-05-17 18:46:42 -0400] hoover_damm: you buy a 48port cyclade advocent and hook it up to the pdu, and have both work together
[2012-05-17 18:46:50 -0400] eherot: both barely worked on anything but the exact browser on which they'd been designed.
[2012-05-17 18:46:51 -0400] hoover_damm: you don't buy ipmi cards, or drac cards
[2012-05-17 18:46:52 -0400] heph: eherot: ?
[2012-05-17 18:47:05 -0400] hoover_damm: it's a linux server, so you can telnet into it to access your servers
[2012-05-17 18:47:06 -0400] hoover_damm: or ssh
[2012-05-17 18:47:17 -0400] hoover_damm: or powercycle the server
[2012-05-17 18:47:22 -0400] heph: eherot: dracs is a little convoluted, but you can use ilo over ssh with a pretty decent interface
[2012-05-17 18:47:28 -0400] heph: i think there's a perl api for ilo
[2012-05-17 18:47:38 -0400] hoover_damm: I've honestly setup several Advocent Cyclades setups
[2012-05-17 18:47:40 -0400] hoover_damm: I suggest it
[2012-05-17 18:47:52 -0400] eherot: heph: When was that introduced?  This was a few years ago now...
[2012-05-17 18:47:54 -0400] hoover_damm: get the Console and the IPDU's that work with it, daisy chain it up
[2012-05-17 18:48:18 -0400] hoover_damm: and let your ops have console and power control at one point.  Now monitor it and you can have power analysis of your datacenter
[2012-05-17 18:48:19 -0400] eherot: hoover_damm: I'll have to keep that in mind next time i'm on bare metal.  Our current shop is all hosted+cloud stuffs
[2012-05-17 18:48:59 -0400] hoover_damm: eherot, yeah the pattern of running in metal is being forgotten.  New people don't know it so they don't know how to advocate for or against
[2012-05-17 18:49:07 -0400] heph: eherot: http://search.cpan.org/~nlewis/Net-ILO-0.54/lib/Net/ILO.pm <=- it's *usable*... not *great* =]
[2012-05-17 18:49:41 -0400] hoover_damm: and the longer you stay on the cloud, the harder it is to get off.
[2012-05-17 18:49:52 -0400] eherot: yeah it was the cap ex that got in the way of the avocent boxes.  In the end we spent more money on the ilo and drac cards but a few hundred at a time went over a lot better than an extra few thousand.
[2012-05-17 18:50:03 -0400] eherot: I definitely had my eye on them
[2012-05-17 18:50:20 -0400] hoover_damm: I nickled and dimed it last time with my boss in 2009 when we bought it
[2012-05-17 18:50:24 -0400] eherot: especially for the older, crappier equipment that didn't have any kind of built-in remote console.
[2012-05-17 18:50:32 -0400] hoover_damm: and he realized that I was saving him money and giving him better results
[2012-05-17 18:50:48 -0400] hoover_damm: it's amazing when you can make a harvard man drool over an Advocent
[2012-05-17 18:50:53 -0400] hoover_damm: for both price and features
[2012-05-17 18:51:11 -0400] eherot: hahaha, funny, I had one of those too, but after 6 months he still kept being like "lets find a less expensive solution"
[2012-05-17 18:51:38 -0400] heph: ilo/ipmi is cheaper than ip kvm + cabling + managed power + accidentally powercycling the wrong machine because your rack diagrams are wrong
[2012-05-17 18:51:45 -0400] eherot: he wouldn't spent a four figure amount on a piece of hardware unless I could somehow twist it around to say that it was allowing us to add additional customers.  Thank god I left that job.
[2012-05-17 18:52:10 -0400] hoover_damm: people really don't get the analogy 'you get what you pay for'.
[2012-05-17 18:52:17 -0400] JasonBox: heh
[2012-05-17 18:52:37 -0400] hoover_damm: I've never had anyone go back on Advocent after buying one honestly.  It's like let's buy more
[2012-05-17 18:52:38 -0400] eherot: hoover_damm: Right you are.
[2012-05-17 18:52:50 -0400] hoover_damm: if you do windows, you can hook it up to the vga
[2012-05-17 18:52:52 -0400] doomviking: fast, good, cheap. pick two.
[2012-05-17 18:52:54 -0400] hoover_damm: if you do unix, you can do serial
[2012-05-17 18:53:10 -0400] cobragoat: illa
[2012-05-17 18:53:25 -0400] hoover_damm: connect it up to your pdu's and you can have your power reading right there
[2012-05-17 18:53:36 -0400] eherot: of course the problem with unix+serial is that not all of these machines' bios config screens and raid management consoles support it perfectly
[2012-05-17 18:53:37 -0400] hoover_damm: now snmp monitor it and graph it and :) another feature born
[2012-05-17 18:53:48 -0400] eherot: but vga would've been sufficient for basically anything.
[2012-05-17 18:53:58 -0400] hoover_damm: you can do vga too
[2012-05-17 18:54:02 -0400] hoover_damm: it's just a different adapter
[2012-05-17 18:54:03 -0400] eherot: yeah the managed pdus were a must.
[2012-05-17 18:54:04 -0400] hoover_damm: same cable
[2012-05-17 18:54:07 -0400] eherot: (and a good labeler).
[2012-05-17 18:54:34 -0400] hoover_damm: yeah my s.o. was annoyed that I gave away a label gun to one job
[2012-05-17 18:55:19 -0400] hoover_damm: but once you start labeling good it's wrong to take it away and let them fail
[2012-05-17 18:55:29 -0400] eherot: haha.  One of the finer moments of trying to convince said boss that "you get what you pay for" is when I convinced him that we needed to "splurge" on a $75 vinyl-wrap label printer.
[2012-05-17 18:55:29 -0400] cobragoat: so the opscode site is a little troubled right now?
[2012-05-17 18:55:30 -0400] hoover_damm: or at least that's my morality kicking in... perhaps too nice of me
[2012-05-17 18:55:53 -0400] paulmooring: cobragoat: how so?
[2012-05-17 18:55:56 -0400] eherot: haha, the only thing worse than no labels is obsolete ones
[2012-05-17 18:55:59 -0400] hoover_damm: mine was 100$ vinal-wrap
[2012-05-17 18:56:01 -0400] hoover_damm: but yep
[2012-05-17 18:56:20 -0400] cobragoat: the tickets site crashed on me and https://manage.opscode.com/ won't load
[2012-05-17 18:56:20 -0400] hoover_damm: was beautiful on the cables
[2012-05-17 18:56:33 -0400] eherot: it really was.
[2012-05-17 18:56:38 -0400] paulmooring: as in tickets.opscode.com ?
[2012-05-17 18:57:07 -0400] eherot: ok, lunch time at chefconf
[2012-05-17 18:57:18 -0400] cobragoat: ya.. seems ok tho now
[2012-05-17 18:58:04 -0400] paulmooring: cobragoat: mind pinging me in here if you have any more trouble?
[2012-05-17 18:58:18 -0400] cobragoat: paulmooring: yes sir
[2012-05-17 18:58:22 -0400] paulmooring: thanks
[2012-05-17 18:59:21 -0400] ukio: seems that i got kicked out because virtualbox reset my network adapter...
[2012-05-17 18:59:51 -0400] ukio: fyi: the reason for the chef-server service not running at bootup was this one:
[2012-05-17 18:59:54 -0400] ukio: http://tickets.opscode.com/browse/CHEF-2318
[2012-05-17 19:00:29 -0400] ukio: after changing the priorities using `update-rc.d` it now works as expected
[2012-05-17 19:05:02 -0400] gp5st: how can i figure out why my one node doesn't appear in search results
[2012-05-17 19:05:31 -0400] gp5st: i see it in webui /nodes but if i do knife search node "name:*" it doesn't show up
[2012-05-17 19:05:44 -0400] gp5st: i've done a knife index rebuild and it's still not there
[2012-05-17 19:19:34 -0400] SteeleNivenson: hello. I heard about a installation package for chef-client at a meetup. I think it was called "omnibus". Is that released publicly?
[2012-05-17 19:21:28 -0400] paulmooring: SteeleNivenson:  http://www.opscode.com/chef/install
[2012-05-17 19:22:45 -0400] SteeleNivenson: oh my. that's pretty cool.
[2012-05-17 19:25:51 -0400] SteeleNivenson: portable Bash scripting FTW! that's no easy task.
[2012-05-17 19:28:07 -0400] paulmooring: If we could just get that bash script to work on Windows...
[2012-05-17 19:28:14 -0400] geekbri: cygwin ?
[2012-05-17 19:28:58 -0400] avishai: hi
[2012-05-17 19:29:03 -0400] paulmooring: hi
[2012-05-17 19:29:29 -0400] avishai: anyone encountered a problem where on ubuntu server tomcat installation hangs on [dpkg] <defunct>?
[2012-05-17 19:29:58 -0400] avishai: this only happens on auto install using chef bootstrapped and running with no pty
[2012-05-17 19:33:27 -0400] btm: paulmooring: http://www.opscode.com/chef/install.msi works well enough though. :)
[2012-05-17 19:34:08 -0400] SteeleNivenson: ha ha. the Debian squeeze minimal OS doesn't have sudo nor curl installed
[2012-05-17 19:34:42 -0400] SteeleNivenson: oh my, that's a fast installer.
[2012-05-17 19:35:25 -0400] SteeleNivenson: Where does it put Ruby?
[2012-05-17 19:36:06 -0400] paulmooring: SteeleNivenson:  everything should be under /opt/opscode I believe
[2012-05-17 19:36:26 -0400] paulmooring: It's designed to not interfere with your system Ruby
[2012-05-17 19:36:54 -0400] dschultz: gp5st: You need to increase the value of MaxFieldLength in the solrconfig.xml files. Take a look at the following: http://tickets.opscode.com/browse/CHEF-2346
[2012-05-17 19:37:23 -0400] bpo: Anyone who's familiar with the 'apt' cookbook and/or the EnforceOwnershipAndPermissions mixin have a moment to chat about a possible bug?
[2012-05-17 19:38:45 -0400] miketheman: I know everyone is at #ChefConf na dI'm very jealous of them.,
[2012-05-17 19:39:10 -0400] miketheman: but: has oanyone seens something akin to the mysql/database cookbooks that works with aws rds?
[2012-05-17 19:40:11 -0400] paulmooring: bpo: many of the opscode folks who would normally help you out are at ChefConf today, and I am unfortunately not familiar with the apt cookbook.
[2012-05-17 19:40:29 -0400] paulmooring: You can just put a bug in at tickets.opscode.com and someone will look at before long
[2012-05-17 19:40:49 -0400] paulmooring: if it turns out to not be a bug, we can just close it with minimal public humiliation :)
[2012-05-17 19:41:57 -0400] bpo: paulmooring: Yeah. Was hoping to avoid a writeup since I'm lazy and it's rather involved. Thanks!
[2012-05-17 19:42:22 -0400] paulmooring: I would be happy to discuss it and write it up if you would like
[2012-05-17 19:46:11 -0400] bpo: Ok - quick run-through: COOK-1264 is resolved with a pull request in GitHub that's not working for me. If you have a look at the apt/providers/repository.rb create action, you see it writes a file and then tries to trigger an 'apt-get update'. The bug reported in COOK-1264 says that update never actually gets triggered (happens to me too). The problem is actually in chef: chef/lib/chef/provider/file.rb's `action_create` writes the file and sets th
[2012-05-17 19:46:12 -0400] bpo: 'updated_by_last_action' bit, and then afterward calls the 'enforce_ownership_and_permissions' mixin, which *unsets* the 'updated_by_last_action' bit since the permissions are already in order.
[2012-05-17 19:47:37 -0400] bpo: paulmooring: so a correct implementation for such a mixing would only set the updated_by_last_action bit if it learned something new about the resource (i.e. only set it to true, never set it to false)
[2012-05-17 19:47:45 -0400] bpo: s/mixing/mixin/
[2012-05-17 19:48:19 -0400] bpo: Let me know if you have any thoughts. I'll open up a ticket & link it to 1264 in the meantime
[2012-05-17 19:49:34 -0400] paulmooring: bpo: I think I understand what you're saying, I'll need to take a look at the cookbook/code and see what I can find, I'll add anything I come up with to the ticket you create
[2012-05-17 19:49:44 -0400] gp5st: dschultz: ok, i'll give that a shot.  i wouldn't think there would be that many attributes for a basic node, though
[2012-05-17 19:49:56 -0400] yfeldblum: bpo, that's right, pieces of providers should mark the resource as updated_by_last_action when they change something on the system, but should typically never unmark resources
[2012-05-17 19:52:12 -0400] bpo: yfeldblum: cool. thanks for the feedback. I'll throw together a quick patch for chef & attach it.
[2012-05-17 19:52:52 -0400] dschultz: gp5st: I know, I ran into the same issue before and was stumped. I edited the xml files, increasing maxFieldLength from 10000 to 100000. I then issues a restart of chef-solr and chef-expander, then re-ran knife index rebuild and lo and behold all my nodes were showing!
[2012-05-17 19:53:20 -0400] paulmooring: bpo: People who send patches along with their tickets are the best people on earth :)
[2012-05-17 19:53:43 -0400] bpo: paulmooring: people who include tests are the best people on earth. unfortunately I have a lot of servers to build today.
[2012-05-17 19:53:53 -0400] geekbri: once i remembered to sign the CLA getting my pull request done was pretty simple
[2012-05-17 19:54:36 -0400] paulmooring: bpo: people who include tests aren't people, they're something better
[2012-05-17 19:54:53 -0400] jtimberman: patcoll: there will be some effort related to the 'ruby' cookbook now that we're bundling our own ruby in the omnibus built package
[2012-05-17 19:55:13 -0400] jtimberman: paulmooring: :)
[2012-05-17 19:55:25 -0400] gp5st: dschultz: now nothing is showing:-p i'll give it a second to do whatever it's doing
[2012-05-17 19:55:51 -0400] c_t: paulmooring: so... the Superman will write his own tests?
[2012-05-17 19:56:04 -0400] patcoll: jtimberman: will that consist of a opscode-maintained cookbook? need help?
[2012-05-17 19:56:16 -0400] jtimberman: patcoll: yes, and probably :)
[2012-05-17 19:56:18 -0400] paulmooring: the Superman will write *my* tests3
[2012-05-17 19:56:33 -0400] gp5st: dschultz: well whatdayknow. thank you so much!
[2012-05-17 19:56:57 -0400] patcoll: jtimberman: cheers. I was in here yesterday wondering why it was purged :) I still use it myself.
[2012-05-17 19:57:30 -0400] dschultz: gp5st: You're welcome! Glad I could help.
[2012-05-17 19:58:43 -0400] patcoll: gp5st: hey jim -- long time no see
[2012-05-17 19:59:01 -0400] AdamAFlynn: I've got what I think is a pretty simple chef/Ruby problem
[2012-05-17 19:59:08 -0400] AdamAFlynn: http://pastebin.com/uuBB4Ei4 is the relevant bit of code
[2012-05-17 19:59:13 -0400] hoover_damm: #1 beauty thing to add to sshd config ... AcceptEnv LANG LC_*
[2012-05-17 19:59:21 -0400] hoover_damm: wow
[2012-05-17 19:59:35 -0400] AdamAFlynn: seems like :monit_server_data is coming back as nil in the template
[2012-05-17 20:00:12 -0400] miketheman:  AdamAFlynn: not using pre-packaged init scripts?
[2012-05-17 20:00:45 -0400] AdamAFlynn: no
[2012-05-17 20:01:10 -0400] AdamAFlynn: running multiple copies of the same daemon for that particular service
[2012-05-17 20:02:31 -0400] AdamAFlynn: not positive how to debug (can't figure out how to run this recipe in shef), but as far as I can tell, monit_server_data either isn't what I think it is
[2012-05-17 20:02:45 -0400] AdamAFlynn: (the port & server_name are correct inside that loop from its impact on the other bits)
[2012-05-17 20:04:09 -0400] AdamAFlynn: so I'm not sure if my syntax to populate that array is wrong or my syntax to get it into the template is wrong
[2012-05-17 20:04:42 -0400] yfeldblum: AdamAFlynn, make extensive use of `Chef::Log.info(some_data)` and `Chef::Log.info(some_data.to_hash)`
[2012-05-17 20:05:34 -0400] AdamAFlynn: ahh, ok
[2012-05-17 20:05:49 -0400] AdamAFlynn: any other tips for how to debug recipes?
[2012-05-17 20:09:14 -0400] ukio: hey guys
[2012-05-17 20:09:38 -0400] bpo: paulmooring: thanks for your time. ticket: http://tickets.opscode.com/browse/CHEF-3128?focusedCommentId=24113#comment-24113
[2012-05-17 20:10:06 -0400] ukio: i have finally succeeded setting up a chef server with chef 0.10.10 on ubuntu 12.04
[2012-05-17 20:10:16 -0400] ukio: its running in a virtualbox vm
[2012-05-17 20:10:31 -0400] ukio: the only problem is that it is not accessible from the outside
[2012-05-17 20:10:54 -0400] AdamAFlynn: yfeldblum: verified that the variable has the correct values in the recipe context... so seems to be an issue getting it into the template
[2012-05-17 20:10:54 -0400] ukio: on the server i can access localhost:4040 just fine
[2012-05-17 20:10:56 -0400] hoover_damm: that is the problem with virtualbox
[2012-05-17 20:11:12 -0400] hoover_damm: you need to forward the port from your router
[2012-05-17 20:11:32 -0400] ukio: usually the host_only network works just fine in virtualbox
[2012-05-17 20:11:49 -0400] hoover_damm: host only means it can only be accessed via the local host
[2012-05-17 20:11:52 -0400] yfeldblum: bpo, "And critically, in order for any fixes to be found by the Opscode triage team, any tickets that include fixes should have the ticket status changed to resolved, with the resolution stating "fixed"."
[2012-05-17 20:12:17 -0400] ukio: hoover_damm: yes, i want to access it from the host machine
[2012-05-17 20:12:54 -0400] ukio: it worked previously, but now i restarted the vm and i don't get a connection anymoew
[2012-05-17 20:12:59 -0400] ukio: anymore
[2012-05-17 20:13:43 -0400] ukio: any idea where i could look at?
[2012-05-17 20:16:30 -0400] bpo: yfeldblum: interesting workflow. Unfortunately I don't have access to resolve issues, so that duty will have to go to someone else.
[2012-05-17 20:17:30 -0400] AdamAFlynn: ok, I think I know what's wrong... just not clear on fix
[2012-05-17 20:17:46 -0400] hoover_damm: ukio, then you just need to give it the right ip address.
[2012-05-17 20:17:49 -0400] AdamAFlynn: monitrc is a recipe (inside a Recipe class) that's def(name, variables={}, ...)
[2012-05-17 20:17:58 -0400] hoover_damm: usually the ip of the vm
[2012-05-17 20:18:05 -0400] hoover_damm: it may have changed if you rebooted
[2012-05-17 20:18:15 -0400] AdamAFlynn: and my monitrc block (with variables(:servers => monit_server_data)) isn't setting "variables" inside monitrc()
[2012-05-17 20:22:22 -0400] setient: where is that there james
[2012-05-17 20:22:32 -0400] setient: who was at the devops meetup in sf like monday night
[2012-05-17 20:22:34 -0400] setient: cuz he is awesome
[2012-05-17 20:25:52 -0400] LinuxHorn: ChetBartels: anyone know what software opscode is using to log their irc channels to http://community.opscode.com/chat/chef?
[2012-05-17 20:26:05 -0400] LinuxHorn: looking to do the same, and really like how yours works
[2012-05-17 20:26:29 -0400] hoover_damm: he's at chefconf senthilr
[2012-05-17 20:26:35 -0400] paulmooring: LinuxHorn:  something custom in bawt I believe
[2012-05-17 20:26:50 -0400] hoover_damm: nm he's offline
[2012-05-17 20:28:36 -0400] LinuxHorn: thx paulmooring
[2012-05-17 20:31:31 -0400] Guest4671: I have a quick override_attributes question I was hoping somebody could help me with
[2012-05-17 20:32:01 -0400] paulmooring: Guest4671: go ahead
[2012-05-17 20:32:11 -0400] Guest4671: I'm trying to change the mysql listen address
[2012-05-17 20:32:16 -0400] Guest4671: so I'm using override_attributes(
[2012-05-17 20:32:24 -0400] Guest4671: which fails since node isn't available there
[2012-05-17 20:32:35 -0400] Guest4671: and using a lambda gives this in the config file:
[2012-05-17 20:32:39 -0400] Guest4671: bind-address            = #<Proc:0x007fddd90334a0@/Users/mmangino/code/chef/chef-cookbooks/roles/analytics_db.rb:14 (lambda)>
[2012-05-17 20:35:10 -0400] paulmooring: So, I'm not entirely sure what you're trying to do apologies if this is non-sensical.  Usually override attributes are to override the attributes already placed elsewhere
[2012-05-17 20:35:31 -0400] paulmooring: you would likely want to assign the bind-address attribute in the node or a role
[2012-05-17 20:35:41 -0400] mmangino: I'm trying to set the bind address for apache to the rackspace id
[2012-05-17 20:35:47 -0400] mmangino: it's already defined in the role
[2012-05-17 20:36:11 -0400] mmangino: err, that value is defined on the node
[2012-05-17 20:36:34 -0400] mmangino: so I could set it on the node, but that seems redundant, since right now I can easily bring up a server with one line
[2012-05-17 20:36:36 -0400] paulmooring: and you want to over-ride it for a single node?
[2012-05-17 20:37:06 -0400] mmangino: I want all nodes who use this recipe to listen on their private ip
[2012-05-17 20:37:27 -0400] paulmooring: is it something you could pull out of node data in ohai, and just change the default?
[2012-05-17 20:37:49 -0400] miketheman: #chefconf hotel power went offline.
[2012-05-17 20:38:17 -0400] mmangino: where would I change the default?
[2012-05-17 20:38:47 -0400] eherot1: miketheman: it was very exciting!
[2012-05-17 20:39:13 -0400] mmangino: the data is already stored in node after bootstrap
[2012-05-17 20:39:16 -0400] miketheman: eherot: I'm sure it was. Any root cause analysis going on?
[2012-05-17 20:39:25 -0400] eherot: miketheman: ask the hotel
[2012-05-17 20:39:31 -0400] eherot: miketheman: or the power company
[2012-05-17 20:39:53 -0400] eherot: good recovery though.
[2012-05-17 20:40:25 -0400] mmangino: the docs say "At runtime, the Node is available within Recipes, Definitions, and Resources as they are being evaluated."
[2012-05-17 20:40:26 -0400] miketheman: eherot: what kind of ops would let that be the answer? ;)
[2012-05-17 20:40:32 -0400] rocket: does anyone have a recipe to set the validation.pem or webui.pem on a chef-server install?
[2012-05-17 20:40:33 -0400] paulmooring: mmangino: so you can remove it from the role and in the cookbooks attributes/default.rb do something like " node['bind-address'] = function_that_pulls_out_ip_you_want(node) "
[2012-05-17 20:40:33 -0400] mmangino: why not roles?
[2012-05-17 20:41:02 -0400] mmangino: but I don't necessarily want that for all mysql databases, just some
[2012-05-17 20:41:16 -0400] paulmooring: roles don't really get evaluated client side like that stuff does
[2012-05-17 20:41:56 -0400] yfeldblum: bpo, have you signed opscode's CLA (a short form essentially acknowledging that your contributions are under the Apache 2 license)? i think they give jira perms when they receive the CLA
[2012-05-17 20:42:19 -0400] mmangino: hmm. what a mess
[2012-05-17 20:42:37 -0400] mmangino: so the only place to do that is the recipe?
[2012-05-17 20:42:38 -0400] paulmooring: mmangino: that's when you would want to manually over ride
[2012-05-17 20:42:56 -0400] mmangino: it's going to be ugly to change the recipe
[2012-05-17 20:43:02 -0400] geekbri: After you sign the CLA they will eventually get back to you and provide your jira account with privileges (this takes a little while)
[2012-05-17 20:43:08 -0400] mmangino: or to set up the node first
[2012-05-17 20:43:10 -0400] paulmooring: set the default to the most common scenario, then you'll need to manually over ride it in the node/role when the default isn't what you want
[2012-05-17 20:43:39 -0400] mmangino: yuck
[2012-05-17 20:43:49 -0400] mmangino: so I manually override in the node
[2012-05-17 20:44:12 -0400] mmangino: I hate manual steps in my automation
[2012-05-17 20:44:51 -0400] paulmooring: Well, you can get as fancy as you would like in the attributes in the cookbook
[2012-05-17 20:45:18 -0400] geekbri: I missed the first part of this, what exactly are you trying to automate that you think you have to do manually?
[2012-05-17 20:45:20 -0400] paulmooring: if you can come up with a way to always know the right IP, write it and use it in the attributes/default.rb file
[2012-05-17 20:48:20 -0400] mmangino: geekbri, I want to set the bind address for mysql in a role
[2012-05-17 20:48:24 -0400] mmangino: to the private ip of a node
[2012-05-17 20:48:56 -0400] bpo: yfeldblum: no. I just signed up for a JIRA account. Not really worth my time to jump through bureaucratic hoops right now.
[2012-05-17 20:49:00 -0400] withnale: silly q, but how do I version an environment?
[2012-05-17 20:49:06 -0400] geekbri: ok so you have some role and you want it to be populated with information about another server?
[2012-05-17 20:49:47 -0400] mmangino: When I create a server with a certain role, I want to bind to the private ip instead of the public ip
[2012-05-17 20:50:00 -0400] geekbri: mmangino: what I have done in these situations is write a helper library that gets included with my cookbooks that does some chef searching and i get information that way.  For example in my hadoop setup i have a library called hadoopcluster and if i do "hadoopcluster.namenode" it returns the node object of that name node, then i can just do namenode['fqdn'] in my recipe
[2012-05-17 20:50:27 -0400] mmangino: that makes sense
[2012-05-17 20:50:39 -0400] geekbri: thats what i've been doing
[2012-05-17 20:50:42 -0400] mmangino: so to try to find the ip address of the eth1 attribute, you would just search the hashes?
[2012-05-17 20:50:54 -0400] geekbri: well i think your use case is slightly different
[2012-05-17 20:51:15 -0400] geekbri: if youre just looking to do it on the node itself, why dont you just set that at run time, why even have it be a role attribute?
[2012-05-17 20:51:28 -0400] geekbri: unless im misunderstanding or missing some important piece of information here
[2012-05-17 20:52:56 -0400] yfeldblum: bpo, just one bureaucratic hoop before the first contribution, then you're good to go
[2012-05-17 20:52:59 -0400] mmangino: How would I set it at run time?
[2012-05-17 20:53:05 -0400] mmangino: in the recipe?
[2012-05-17 20:53:16 -0400] mmangino: because I don't always want that used for the recipe
[2012-05-17 20:53:41 -0400] geekbri: when do you want it used, when the server is of a certain type?
[2012-05-17 20:54:12 -0400] geekbri: why not just have logic in the recipe that says, if your run_list contains the role "db_slave" use eth1
[2012-05-17 20:55:30 -0400] mmangino: that seems horribly hackish
[2012-05-17 20:55:52 -0400] yfeldblum: that is horribly hackish :P
[2012-05-17 20:56:01 -0400] geekbri: maybe im misunderstanding than
[2012-05-17 20:56:15 -0400] geekbri: if you have a situation where you only want your db_slaves to do that, why wouldn't it make sense to have it do it based upon the role it has
[2012-05-17 20:56:15 -0400] mmangino: A lot of this seems to be turning into a big ball of mud
[2012-05-17 20:56:18 -0400] yfeldblum: iron law of chef #1: recipes shall not hardcode the names of roles, environments, or data bags or data bag items
[2012-05-17 20:56:37 -0400] mmangino: I find that I have to modify a huge number of recipes
[2012-05-17 20:56:42 -0400] geekbri: ok well then you let that role name be set in an attribute
[2012-05-17 20:56:47 -0400] geekbri: thats easy enough to solve.
[2012-05-17 20:56:55 -0400] miah: yfeldblum: here here
[2012-05-17 20:57:27 -0400] geekbri: if you aren't basing it on roles, how else would you determine what a server is???  Via its host name? I dont see how thats any safer
[2012-05-17 20:57:34 -0400] yfeldblum: role "app" can set a default attribute of `default_attributes("app" => {"db_slave_role_name" => "some_magic_role_name"})`
[2012-05-17 20:58:14 -0400] mmangino: Well, I don't like the fix, but I at least have one
[2012-05-17 20:58:17 -0400] yfeldblum: for a cookbook named "app", that knows already to look in node["app"]["db_slave_role_name"] to find the slave db role name
[2012-05-17 20:58:37 -0400] geekbri: ok right, i apologize for assuming that somebody would think to allow for that flexibility.  My point was just that you can do some automated searching instead of hardcoding in a role file the actual IP for it to use
[2012-05-17 20:58:53 -0400] geekbri: Yes I wouldn't HARDCORE what that role is, i would certainly let that be set via attributes
[2012-05-17 20:58:56 -0400] geekbri: and have a sane default
[2012-05-17 20:59:18 -0400] geekbri: What im saying is, you can then, once you have established that, check to see what roles are in a run list to determine certain information based off of it.
[2012-05-17 20:59:20 -0400] mmangino: yfeldblum, that makes sense
[2012-05-17 20:59:38 -0400] mmangino: now I need to kill and re-build the server to see if that change works
[2012-05-17 20:59:42 -0400] mmangino: Thanks for the help!
[2012-05-17 21:24:44 -0400] auxome: So quiet...everyone being good children and paying attention @chefconf :)
[2012-05-17 21:25:24 -0400] eherot: auxome: Nah, they're just all on Twitter ;-)
[2012-05-17 21:27:33 -0400] erratic: ohai chefs
[2012-05-17 21:27:40 -0400] erratic: just wanted to drop by and say hello
[2012-05-17 21:27:44 -0400] auxome: eherot: Maybe... or panicking from the uncontrollable fear of power outages forcing face-to-face discussions with other humans
[2012-05-17 21:27:47 -0400] erratic: Im having a really good experience with chef
[2012-05-17 21:27:55 -0400] erratic: its awesome in every way
[2012-05-17 21:28:06 -0400] erratic: I'm getting better at ruby too, thanks!
[2012-05-17 21:28:13 -0400] cheeseplus: yay!
[2012-05-17 21:28:22 -0400] eherot: erratic: it's a great way to learn it!
[2012-05-17 21:28:39 -0400] erratic: wish i could show you my cookbooks
[2012-05-17 21:28:41 -0400] yfeldblum: "welcome to chef; congratulations, you're now a software developer, and ruby is your new shell"
[2012-05-17 21:29:01 -0400] yfeldblum: erratic, good to hear
[2012-05-17 21:29:25 -0400] yfeldblum: erratic, going whole hog all at once with chef? or doing it one small step at a time?
[2012-05-17 21:30:59 -0400] auxome: Opscode guys -- is there a reason .10.10 is not available without me pulling it straight from the s3 bucket? Looks like the dropdown installer won't give back anything but .10.8-2 ("  # CHEFCONF HACK   version="0.10.8-2" ")
[2012-05-17 21:33:50 -0400] miah: auxome: blame #chefconf =)
[2012-05-17 21:37:11 -0400] bytheway: Besides the fact that is a very young project, someone talk me out of ansible
[2012-05-17 21:37:29 -0400] auxome: miah: I would but I'm here too, and if I'm not too lazy to find my way to .10.10...
[2012-05-17 21:37:56 -0400] flashmanbahadur: bytheway: because the buggers didnt deserve to die
[2012-05-17 21:38:32 -0400] bytheway: I'll buy that
[2012-05-17 21:39:27 -0400] bytheway: I like the push architecture.  Avoiding server setup.  Support for other languages
[2012-05-17 21:40:11 -0400] bytheway: But then you don t have the server architecture, inventory stuff,  more difficult to pull files across (sftp only)
[2012-05-17 21:42:29 -0400] yfeldblum: bytheway, try it out and let us know how it goes
[2012-05-17 21:47:04 -0400] JasonBox: bytheway: sounds neat, by a cobbler dude
[2012-05-17 21:47:10 -0400] bytheway: Probably need to spin up chef and ansible and do a side by side.  Sounds like a lot of work
[2012-05-17 21:47:19 -0400] JasonBox: Although my cobbler experience to date has been underwhelming
[2012-05-17 21:47:31 -0400] bytheway: I'm the only ruby guy on my team, so chef is a bit of a harder sell
[2012-05-17 21:47:56 -0400] JasonBox: The nice thing about Chef is you can forget it's Ruby, mostly, if need be
[2012-05-17 21:48:59 -0400] yfeldblum: bytheway, i hear a combination of perl, bash, awk, sed, and c is better
[2012-05-17 21:49:05 -0400] bytheway: It's true, everything has a format of some kind. Even the yaml for ansible has to be formed a specific way
[2012-05-17 21:49:56 -0400] yfeldblum: bytheway, chef focuses on providing rock-solid building blocks & abstractions, and letting you build your own building blocks & abstractions
[2012-05-17 21:50:15 -0400] bytheway: And that's what draws me most to chef
[2012-05-17 21:51:34 -0400] bytheway: Setting up a server behind a restrictive firewall on RH5 is the sucky part
[2012-05-17 21:53:08 -0400] Urocyon: hoover_damm: what sysctl resource are you using in damn-postgresql?
[2012-05-17 21:53:51 -0400] erratic: I am watching trailer park boys on netflix and I had dwarf fortress running in the background, I thought the music from df was part of the show
[2012-05-17 21:54:00 -0400] erratic: I never would have noticed if my coworker wasnt like wtf
[2012-05-17 21:55:12 -0400] gchristensen: is there an ideal way to setup nameservers on an ubuntu machine? I'm using resolver, but when the networking hiccups my nameservers get kicked out due to dhcp, but setting static IPs seems counter-intuitive since that's part of what Chef is about as far as I'm aware
[2012-05-17 21:56:38 -0400] scairbus: always use static IP's for "core" services like DNS
[2012-05-17 21:57:13 -0400] gchristensen: yeah I'm already doing that, but I mean for the machien I'm setting nameservers for
[2012-05-17 21:57:55 -0400] scairbus: are you using DDNS?
[2012-05-17 21:58:50 -0400] gchristensen: no, I use reserved IPs on my DHCP server for my machines. I need to set a single machine to use a different DNS server than the rest of the network
[2012-05-17 21:58:53 -0400] Urocyon: hoover_damm: think I found it, if it's https://github.com/damm/sysctl
[2012-05-17 21:58:59 -0400] gchristensen: so I can't put it in to the DHCP server
[2012-05-17 21:59:58 -0400] scairbus: use chef to set your resolver, override it for that one node that needs to use a different nameserver
[2012-05-17 22:00:04 -0400] gchristensen: gosh today isn't my day, I'm not asking good questions or giving good answers. we might need to try again tomorrow :)
[2012-05-17 22:00:43 -0400] scairbus: I think most people aren't fully paying attention to the channel as they are at #chefconf
[2012-05-17 22:00:57 -0400] gchristensen: ahh, cool
[2012-05-17 22:01:05 -0400] gchristensen: I was hoping to go, but couldn't afford it this year.
[2012-05-17 22:01:10 -0400] xdissent_: I need to detect changes to a data bag item from chef run to chef run and force a deploy if the data bag changes...
[2012-05-17 22:01:36 -0400] xdissent_: i'm thinking- store the data bag item as a node attribute after each run and then compare it with the data bag item next run
[2012-05-17 22:01:40 -0400] xdissent_: sound reasonable?
[2012-05-17 22:02:41 -0400] scairbus: gchristensen - depending on your roles, that one that points elsewhere should have an attribute that sets the nameserver different in the resolver cookbook
[2012-05-17 22:03:08 -0400] gchristensen: scairbus: I've done that, when I run chef-client it sets the nameserver properly
[2012-05-17 22:03:23 -0400] gchristensen: but if the network has a hiccup, the resolv.conf gets overwritten with the DHCP's defaults
[2012-05-17 22:03:35 -0400] scairbus: oh, right
[2012-05-17 22:04:01 -0400] scairbus: can you get away with not setting the nameservers on the dhcpd server?
[2012-05-17 22:04:30 -0400] gchristensen: unfortunately not, its the same dhcpd for our workstations
[2012-05-17 22:04:41 -0400] scairbus: heh I figured you'd say that
[2012-05-17 22:04:45 -0400] JasonBox: gchristensen: chattr +i afterward
[2012-05-17 22:05:28 -0400] JasonBox: Another possibility is to ship your own dhclient.conf for example, where you can prepend a nameserver
[2012-05-17 22:05:35 -0400] JasonBox: I've done both with success
[2012-05-17 22:05:40 -0400] gchristensen: JasonBox: put that in the resolver recipe?
[2012-05-17 22:05:43 -0400] scairbus: there ya go
[2012-05-17 22:05:53 -0400] gchristensen: cool! I appreciate your help
[2012-05-17 22:06:12 -0400] JasonBox: Sure, it may take some rearraching, as you need to chattr -i /etc/resolv.conf for updates, then +i afterward
[2012-05-17 22:06:16 -0400] gchristensen: chattr +i feels like more magic than dhclient.conf, so I think I'll use that.
[2012-05-17 22:06:18 -0400] gchristensen: right
[2012-05-17 22:06:20 -0400] hoover_damm: Urocyon, ahh yes sorry
[2012-05-17 22:06:27 -0400] gchristensen: (dhclient.conf is what I'll go with, I mean)
[2012-05-17 22:06:27 -0400] JasonBox: Whatever the situation calls for ;)
[2012-05-17 22:06:32 -0400] hoover_damm: Urocyon, just a very hokey sysctl cookbook I made eons ago
[2012-05-17 22:06:47 -0400] JasonBox: hrm, sysctl cookbook sounds tasty
[2012-05-17 22:07:36 -0400] Urocyon: hoover_damm: I have been using this one: http://community.opscode.com/cookbooks/sysctl
[2012-05-17 22:07:45 -0400] Urocyon: hoover_damm: not very exciting though.
[2012-05-17 22:08:05 -0400] hoover_damm: strange
[2012-05-17 22:08:18 -0400] JasonBox: gchristensen: Which target platform?
[2012-05-17 22:08:21 -0400] hoover_damm: basically the cookbook I have is old, I should rewrite it into a proper pattern where you can store the sysctl on the node
[2012-05-17 22:08:31 -0400] hoover_damm: and then have it set it once, run sysctl -p to ensure it's set
[2012-05-17 22:08:36 -0400] gchristensen: JasonBox: we're using ubuntu consistently
[2012-05-17 22:08:43 -0400] hoover_damm: I just haven't
[2012-05-17 22:09:10 -0400] hoover_damm: gchristensen, ec2?
[2012-05-17 22:09:30 -0400] gchristensen: hoover_damm: production and staging yes, we use bare metal for dev and test
[2012-05-17 22:09:37 -0400] JasonBox: gchristensen: Ah, okay, because at least on Fedora NM hijacks dhclient, generating its own config
[2012-05-17 22:09:43 -0400] hoover_damm: gchristensen, then you can customize your ami..
[2012-05-17 22:09:59 -0400] hoover_damm: gchristensen, and basically configure your dhcp client to not own resolv.conf or whatever you are trying to do
[2012-05-17 22:10:01 -0400] JasonBox: gchristensen: So I had to create a /etc/dhclient-IFACE.conf instead
[2012-05-17 22:10:03 -0400] gchristensen: hoover_damm: these can't depend on using AMIs
[2012-05-17 22:10:17 -0400] Urocyon: maybe an lwrp....   I've only tried doing one lwrp - to define postgres roles.
[2012-05-17 22:10:26 -0400] hoover_damm: depending on upstream is always an error
[2012-05-17 22:10:32 -0400] gchristensen: JasonBox: good to know! I'll keep that in mind, but if we switch over to using an RPM based distro we'll have a LOT of surprises.
[2012-05-17 22:10:35 -0400] JasonBox: Indeed
[2012-05-17 22:10:54 -0400] JasonBox: gchristensen: Ah, not so bad; I used to be a Debian guy, but lately EL derivatives
[2012-05-17 22:10:54 -0400] hoover_damm: I could never in good concience depend on Ubuntu's AMI's every day.
[2012-05-17 22:10:58 -0400] JasonBox: heh
[2012-05-17 22:11:11 -0400] hoover_damm: I would have to create-image my own copy.
[2012-05-17 22:11:18 -0400] hoover_damm: Murphy was right, anything can and change at a moment
[2012-05-17 22:11:35 -0400] hoover_damm: if you don't want to live in Chaos, you have to take steps to not be in it.
[2012-05-17 22:11:36 -0400] gchristensen: hoover_damm: I never said we did that either :) this just needs to work on EC2 as well as our local hardware, so we can't depend on doing it w/ the AMI
[2012-05-17 22:11:59 -0400] hoover_damm: gchristensen, same behavior should work in both spots ideally though
[2012-05-17 22:12:12 -0400] hoover_damm: gchristensen, custom ami to modify the config file on the instance, run the same file locally
[2012-05-17 22:12:30 -0400] hoover_damm: gchristensen, reboot baremetal and it should be able to have dhcp the same way
[2012-05-17 22:12:43 -0400] gchristensen: I guess I don't know about that feature of AMIs. Anyway. I'm going to do it via the dhclient.conf
[2012-05-17 22:13:53 -0400] hoover_damm: well dhclient.conf should be on the ami and local if your running the same dhcp client
[2012-05-17 22:14:15 -0400] gchristensen: yes
[2012-05-17 22:24:20 -0400] id1: hey guys. so when attributes are accessible in the LWRP, they are not immediately visible to the rest of the recipe unless node.save is called inside LWRP. why is it so and is there anoth (less-radical than node.save) way of achieving attrs visibility ?
[2012-05-17 22:25:00 -0400] id1: the only problem with node.save is if the chef-client run fails after node was saved, what you get on server in a node is bunch of garbage with the state of a node in the middle of chef-client run
[2012-05-17 23:24:02 -0400] ggolin: hey guys, does the option bit in knife plugins have any kind of validation options?

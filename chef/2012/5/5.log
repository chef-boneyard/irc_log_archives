[2012-05-05 00:00:16 -0400] ypaq: cool cool cool
[2012-05-05 00:00:22 -0400] ypaq: give it a shot
[2012-05-05 00:02:12 -0400] ypaq: thanks z!
[2012-05-05 00:02:22 -0400] z: yw
[2012-05-05 00:19:47 -0400] echiu: while creating servers on rackspace, hangs on "waiting server."
[2012-05-05 00:21:15 -0400] ypaq: z: btw: only added recipe[rvm::user_install] and it runs gem_package[rvm] according to my logs
[2012-05-05 00:31:43 -0400] hoover_damn: using rvm... mistake #1 :)
[2012-05-05 00:32:03 -0400] miah: =)
[2012-05-05 00:35:04 -0400] miah: rvm vs rbenv == vi vs emacs
[2012-05-05 00:41:34 -0400] ypaq: using ruby: mistake #0 (starting the flames :)
[2012-05-05 00:42:17 -0400] erikh: rvm is fine for user installations but I'm not sure it's a good idea on a server.
[2012-05-05 00:42:36 -0400] erikh: I did it in the past, and it was.... not pretty
[2012-05-05 00:43:13 -0400] ypaq: seriously.. your programming "environment" is broken if you need something like rvm or rbenv.
[2012-05-05 00:43:55 -0400] shuvo_: ypaq, 'using ruby: mistake #0' might not be good for your health on the chef channel but I agree :-D
[2012-05-05 00:44:03 -0400] ypaq: don't get me wrong here.. i have a legacy to carry which is why i need rvm
[2012-05-05 00:44:19 -0400] shuvo_: Frankly though, being a long time python user, ruby feels more lisp like
[2012-05-05 00:44:26 -0400] ypaq: i really like chef.. great dsl, great functionality
[2012-05-05 00:44:43 -0400] shuvo_: dem guys are moving to erlang and mysql I hear
[2012-05-05 00:44:48 -0400] ypaq: shuvo_: wat?
[2012-05-05 00:44:56 -0400] erikh: yeah, because virtualenv and perlbrew are poor tools too
[2012-05-05 00:45:25 -0400] miah: chef-server is moving to erlang and mysql..
[2012-05-05 00:46:00 -0400] erikh: yep
[2012-05-05 00:46:09 -0400] erikh: it makes sense for them to do that
[2012-05-05 00:46:17 -0400] shuvo_: thanks miah. I meant to convey that. would you know if the dsl will stay the same though?
[2012-05-05 00:48:08 -0400] shuvo_: hosted chef uses erlang and mysql I guess, so the current dsl works great, but I am not sure how the translation is done.
[2012-05-05 00:48:26 -0400] miah: i don't think anything on the user side of things is changing. but don't quote me on that.
[2012-05-05 00:48:30 -0400] shuvo_: he he
[2012-05-05 00:49:24 -0400] erikh: it's just an API
[2012-05-05 00:49:39 -0400] erikh: you can get the vast majority of it echoed to you by running chef-client -l debug
[2012-05-05 00:50:02 -0400] erikh: as far as resource evaluation, that's done on the host (by chef-client or chef-solo) so that's a non-issue
[2012-05-05 00:50:25 -0400] erikh: but getting things like search results, databags, cookbooks, etc are done through the HTTP API
[2012-05-05 00:50:44 -0400] erikh: what's done on the other end is largely decoupled
[2012-05-05 00:52:43 -0400] shuvo_: anyone tried out http://ansible.github.com/ ?
[2012-05-05 00:53:21 -0400] miah: anything that uses parallel ssh is just meh
[2012-05-05 00:54:22 -0400] miah: ansible seems great for those people who are paranoid and insist on only running chef-solo =)
[2012-05-05 00:55:29 -0400] shuvo_: there's also a class of people who run chef-solo: those who cant/find it difficult to install chef server and don't wanna use hosted :-)
[2012-05-05 00:56:05 -0400] shuvo_: I intend to change that soon, but I depend on my own fork of an older version of veewee
[2012-05-05 00:56:37 -0400] shuvo_: although you can make things easy by using a provided .box and skipping the veewee part altogether
[2012-05-05 00:58:01 -0400] shuvo_: but. atleast on ubuntu 10 LTS, installing chef server is not too hard if you do a bit of patching here and there
[2012-05-05 00:58:43 -0400] shuvo_: the issue is it's a real memory hog: I hope erlang + mysql changes that :-O
[2012-05-05 01:03:17 -0400] hoover_damn: it won't
[2012-05-05 01:03:26 -0400] hoover_damn: because chef's footprint isn't that big
[2012-05-05 01:03:39 -0400] hoover_damn: I run a chef server on 1gig of ram and 2 cpu's and it hosts 50+nodes
[2012-05-05 01:04:58 -0400] shuvo_: ah yes, 1GB+ seems to be sweet spot. I would have been happier if I could have used Micro Instances
[2012-05-05 01:05:19 -0400] hoover_damn: it could fit if you added EBS swap
[2012-05-05 01:05:21 -0400] hoover_damn: but :/
[2012-05-05 01:08:18 -0400] shuvo_: hoover_damn, thanks for that datapoint. I have had heartburns trying to run chef and flume on <1GB
[2012-05-05 01:08:33 -0400] miah: you could probably use micro's if you split up your services
[2012-05-05 01:08:34 -0400] hoover_damn: sure add flume and you bet
[2012-05-05 01:08:41 -0400] miah: don't run everything on the same host..
[2012-05-05 01:08:44 -0400] shuvo_: individually on tw separate machines
[2012-05-05 01:08:59 -0400] shuvo_: flume was spread across 3 machines
[2012-05-05 01:09:00 -0400] miah: split out couch, rabbit, solr, and chef-server
[2012-05-05 01:09:44 -0400] shuvo_: funny thing: I was thinking of running solr on a separate machine and using it for other applications
[2012-05-05 01:10:10 -0400] shuvo_: I guess without solr, chef would be able to run on a micro?
[2012-05-05 01:10:21 -0400] shuvo_: solr on another machine/
[2012-05-05 01:11:54 -0400] miah: probably
[2012-05-05 01:14:03 -0400] shuvo_: scaling vertically is cheaper for this case ;-)
[2012-05-05 01:14:27 -0400] shuvo_: hey, when can we expect erlang + mysql based chef to show up in the open?
[2012-05-05 01:15:01 -0400] miah: no idea
[2012-05-05 01:15:07 -0400] miah: maybe check chef-dev mailing list
[2012-05-05 01:15:19 -0400] miah: i haven't been following it lately. too busy.
[2012-05-05 01:19:43 -0400] hoover_damn: solr replication I heard is a bust no?
[2012-05-05 01:19:45 -0400] hoover_damn: due to the schema
[2012-05-05 02:22:57 -0400] jtimberman: shuvo_: word on the street is more will be said at chefconf in a week and a half, but general idea is sometime mid-late summer probably.
[2012-05-05 02:23:25 -0400] shuvo_: appreciate that @jtimberman. will chefconf be streamed/recorded?
[2012-05-05 03:53:34 -0400] shuvo_: .
[2012-05-05 04:27:34 -0400] _numbers: whats the easiest way i could override the Package resource so that it uses a different binary /usr/sbin/apt-fast ?
[2012-05-05 04:27:43 -0400] _numbers: its a change i would want to affect all my cookbooks
[2012-05-05 05:15:14 -0400] poutine: http://wiki.opscode.com/display/chef/Quick+Start <- Just wanted to say that this pic looks like the human centipede
[2012-05-05 05:20:25 -0400] miah: poutine: lol
[2012-05-05 15:48:26 -0400] miah: moin
[2012-05-05 15:49:33 -0400] yongtin: morning. just first join the channel.
[2012-05-05 16:01:49 -0400] specialsauce: any chefs around that are using chef to build any virtual appliances?
[2012-05-05 16:06:13 -0400] oponder_: like ovens or dishwashers?
[2012-05-05 16:07:07 -0400] oponder_: ;)
[2012-05-05 16:07:13 -0400] specialsauce: heh, not so much :-P
[2012-05-05 16:08:11 -0400] specialsauce: i have in mind to use chef to make some virtual appliances like load balancers and layer 4-7 switches etc, so that i can build an entire env via chef rather than just building the traditional app stack stuff
[2012-05-05 16:08:38 -0400] miah: i suspect lots of people want to do that. but the code needs to be written.
[2012-05-05 16:08:53 -0400] miah: its possible others have written cookbooks that handle it
[2012-05-05 16:09:00 -0400] oponder_: isnt it already possible?
[2012-05-05 16:09:04 -0400] miah: yes totally
[2012-05-05 16:09:05 -0400] specialsauce: yeah i dont mind doing the code, we've written 100% of our cookbooks in house pretty much anyway. it was more to hear ideas of approaches etc
[2012-05-05 16:09:18 -0400] specialsauce: share gotchas etc
[2012-05-05 16:09:25 -0400] oponder_: i dont know really what a virtual appliance is.. but for example the nagios cookbook does some auto discovery and configuration
[2012-05-05 16:09:36 -0400] miah: oponder_: he wants to configure routers, etc.
[2012-05-05 16:09:53 -0400] oponder_: ah
[2012-05-05 16:10:00 -0400] specialsauce: yeah just virtual copies/replicas of network gear
[2012-05-05 16:10:02 -0400] specialsauce: sorry
[2012-05-05 16:10:16 -0400] miah: there are cookbooks for the pieces.. but they vary in complexity.
[2012-05-05 16:10:30 -0400] miah: i have a haproxy cookbook. bryanwb, bemu and i have been hacking on it.
[2012-05-05 16:10:39 -0400] miah: still much to do.. we've all been busy.
[2012-05-05 16:10:47 -0400] specialsauce: ah ok cheers, which cookbook repo? the opscode one? 37sig?
[2012-05-05 16:10:55 -0400] miah: github.com/miah
[2012-05-05 16:11:01 -0400] specialsauce: ok, chers, i'll take a look
[2012-05-05 16:11:14 -0400] specialsauce: i need to strt contributing some of the stuff i've written back i think :-/
[2012-05-05 16:11:19 -0400] miah: take a look at bryans fork. he's got some interesting bits in progress
[2012-05-05 16:11:28 -0400] miah: yes. definitely. contributing is awesome.
[2012-05-05 16:11:41 -0400] miah: https://github.com/miah/chef-collectd is what i've been working on for the past 24 hours
[2012-05-05 16:13:02 -0400] miah: bunches to add to it still
[2012-05-05 16:31:55 -0400] arp: miah
[2012-05-05 16:43:58 -0400] miah: arp
[2012-05-05 16:44:14 -0400] miah: how goes/
[2012-05-05 17:21:06 -0400] hoover_damn: miah, and fix the plugin stuff and all the other joys of that collectd cookbook
[2012-05-05 17:21:19 -0400] hoover_damn: miah, implementing a fully featured collectd cookbook should be a good job
[2012-05-05 17:45:25 -0400] miah: hoover_damn: i'm working on it =)
[2012-05-05 17:45:36 -0400] specialsauce: is there something cooky with "knife cookbook test" in chef 0.10.6? All my knife commands work apart from the above, which returns -> http://pastebin.com/Q4PCWFEx
[2012-05-05 17:46:07 -0400] miah: you have no cookbooks in your cookbook_path
[2012-05-05 17:46:38 -0400] miah: your cookbooks should be in their own directory under their cookbook path
[2012-05-05 17:46:40 -0400] specialsauce: but I do, at the path that it echoes out
[2012-05-05 17:46:54 -0400] miah: eg ~miah/cookbooks/collectd
[2012-05-05 17:47:05 -0400] specialsauce: i have chef/cookbooks/[cookbookname]
[2012-05-05 17:47:14 -0400] specialsauce: and cookbook_path in knife set to chef/cookbooks/
[2012-05-05 17:47:55 -0400] miah: do those cookbooks have metadata.rb files?
[2012-05-05 17:48:08 -0400] specialsauce: yes, all my cookbooks do
[2012-05-05 17:48:19 -0400] miah: what about knife cookbook test <cookbook>
[2012-05-05 17:48:46 -0400] miah: it seems like it should work as you're trying..
[2012-05-05 17:49:09 -0400] specialsauce: yeah that doesn't work either, but the path or name i pass is not echoed out, only the one from my knife config file
[2012-05-05 17:49:10 -0400] miah: ah. i see. it doesn't recurse over the directories. so you have to test the cookbooks individually
[2012-05-05 17:49:50 -0400] miah: https://gist.github.com/2604302
[2012-05-05 17:50:48 -0400] specialsauce: gah, ok, ta
[2012-05-05 17:51:17 -0400] specialsauce: that's a bit of a pain
[2012-05-05 17:51:31 -0400] specialsauce: guess I'll just have to for loop it or something
[2012-05-05 17:51:33 -0400] miah: well. you could patch knife =)
[2012-05-05 17:51:38 -0400] specialsauce: thanks
[2012-05-05 17:51:40 -0400] specialsauce: hehe
[2012-05-05 17:53:02 -0400] miah: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/cookbook_test.rb
[2012-05-05 17:53:19 -0400] hoover_damn: and submit them upstream
[2012-05-05 17:53:26 -0400] specialsauce: aha, found it, there's a seemingly undocumented -a switch for all cookbooks in your default path. Weird that that's not the default action if you don't provide a single cookbook as an argument
[2012-05-05 17:53:27 -0400] hoover_damn: but ideally I should really remove the dependency of credis
[2012-05-05 17:53:30 -0400] specialsauce: that's got to be a bug
[2012-05-05 17:53:31 -0400] hoover_damn: I haven't yet
[2012-05-05 17:53:51 -0400] hoover_damn: hit/miss and eviction ratios
[2012-05-05 17:54:52 -0400] miah: please do sir =0
[2012-05-05 17:54:56 -0400] miah: specialsauce: awesome
[2012-05-05 17:55:02 -0400] hoover_damn: I haven't yet, been busy
[2012-05-05 17:55:10 -0400] hoover_damn: i need to rebase my branches and do that
[2012-05-05 17:55:15 -0400] laurent\: including templates in templates, the question has been asked several times i guess, do you know of any trick ?
[2012-05-05 17:55:17 -0400] miah: specialsauce: when in doubt.. read the source =)
[2012-05-05 17:55:33 -0400] specialsauce: heh, yeah
[2012-05-05 18:12:22 -0400] BryanWB_: ohai chefs!
[2012-05-05 18:12:53 -0400] miah: hey BryanWB_
[2012-05-05 18:13:03 -0400] BryanWB_: miah, yo, back in SF?
[2012-05-05 18:13:22 -0400] miah: i will be in ~5 hours
[2012-05-05 18:13:31 -0400] miah: are you in town already?
[2012-05-05 18:13:45 -0400] BryanWB_: nope, next saturday evening ;) am totally excited
[2012-05-05 18:13:50 -0400] miah: ok
[2012-05-05 18:13:51 -0400] miah: awesome =)
[2012-05-05 18:14:04 -0400] miah: lets plan on meeting up sunday. we'll hax and have dinner.
[2012-05-05 18:14:08 -0400] BryanWB_: awesome!
[2012-05-05 18:14:24 -0400] miah: my gf and i will execute our awesome cookbook's
[2012-05-05 18:14:41 -0400] BryanWB_: awesome! can't wait
[2012-05-05 18:14:44 -0400] miah: so... chef-ark.. can i pass multiple actions?
[2012-05-05 18:14:49 -0400] miah: i need to configure, then make install
[2012-05-05 18:14:50 -0400] BryanWB_: no
[2012-05-05 18:15:05 -0400] miah: https://github.com/miah/chef-collectd/blob/master/recipes/_install_from_source.rb
[2012-05-05 18:15:55 -0400] BryanWB_: there is not configure action yet, i could add it, probably wouldn't be much work
[2012-05-05 18:15:56 -0400] hoover_damn: mmmm remote debugging with lein on heroku
[2012-05-05 18:15:58 -0400] hoover_damn: now that's sexy
[2012-05-05 18:16:09 -0400] BryanWB_: actually i think u can pass multiple actions, tho i never tried
[2012-05-05 18:16:13 -0400] hoover_damn: heh
[2012-05-05 18:16:17 -0400] hoover_damn: you should have done the deb
[2012-05-05 18:16:22 -0400] hoover_damn: and don't --enable-all-plugins
[2012-05-05 18:16:30 -0400] hoover_damn: most plugins don't build succesfully on most distros
[2012-05-05 18:16:35 -0400] miah: thats fine
[2012-05-05 18:16:49 -0400] miah: i just need to get it configuring/compiling
[2012-05-05 18:16:54 -0400] hoover_damn: well the point of the deb was it has all the f00king plugins
[2012-05-05 18:16:58 -0400] miah: i'm going to include a rakefile that executes fpm
[2012-05-05 18:17:00 -0400] hoover_damn: pardon my french
[2012-05-05 18:17:00 -0400] BryanWB_: ah there is a configure action
[2012-05-05 18:17:06 -0400] miah: BryanWB_: ya
[2012-05-05 18:17:11 -0400] BryanWB_: don't even know my own code
[2012-05-05 18:17:24 -0400] hoover_damn: using fpm is a shame since the debian/ control archive is all you needed
[2012-05-05 18:17:33 -0400] miah: ya?
[2012-05-05 18:17:46 -0400] hoover_damn: I said yesterday, github.com/damm/pkg-collectd
[2012-05-05 18:17:47 -0400] miah: i haven't tried to build a deb yet. but i want to target more than deb
[2012-05-05 18:17:55 -0400] miah: and fpm makes that much easier for me
[2012-05-05 18:17:58 -0400] hoover_damn: it's actually really easy, and putting that in fpm
[2012-05-05 18:17:59 -0400] hoover_damn: is stupid
[2012-05-05 18:18:13 -0400] hoover_damn: you loose the patches, you end up short cutting yourself on plugins
[2012-05-05 18:18:21 -0400] hoover_damn: and that's part of the hassle is the hundreds of plugins
[2012-05-05 18:18:24 -0400] BryanWB_: miah, ooh collectd, very cool
[2012-05-05 18:18:27 -0400] hoover_damn: that the debian control/ archive takes care of
[2012-05-05 18:18:41 -0400] hoover_damn: grab the debian build tools, grab 5.1.0 source, grab my debian/ archive
[2012-05-05 18:18:44 -0400] hoover_damn: clone it in the 5.1.0 source
[2012-05-05 18:18:49 -0400] hoover_damn: copy the tarball to the right filename
[2012-05-05 18:18:52 -0400] hoover_damn: debuild -us -uc
[2012-05-05 18:18:56 -0400] hoover_damn: your done
[2012-05-05 18:19:25 -0400] hoover_damn: using the upstream packaging mechanics should be our first attempt at packaging everything
[2012-05-05 18:19:30 -0400] hoover_damn: using fpm should be your last resort
[2012-05-05 18:19:53 -0400] hoover_damn: because fpm is failure to package properly, but still have a package that won't burn you
[2012-05-05 18:19:59 -0400] hoover_damn: typically
[2012-05-05 18:20:09 -0400] miah: hoover_damn: i agree
[2012-05-05 18:20:30 -0400] miah: i dont want to get into the business of maintaining _packages_ for end users though
[2012-05-05 18:20:36 -0400] hoover_damn: you don't
[2012-05-05 18:20:38 -0400] hoover_damn: you do it for your client
[2012-05-05 18:20:41 -0400] hoover_damn: which is your boss
[2012-05-05 18:20:43 -0400] miah: right =)
[2012-05-05 18:20:56 -0400] hoover_damn: that's why I posted that recipe as I did, I have no desire to make collectd debs
[2012-05-05 18:20:58 -0400] miah: so. i have that internally. but i want my cookbook to be awesome still.
[2012-05-05 18:21:07 -0400] hoover_damn: there are warnings in the compile that pisses off launchpad
[2012-05-05 18:21:13 -0400] hoover_damn: and I had no desire to fix them
[2012-05-05 18:21:23 -0400] hoover_damn: i'm letting tokkee handle that as he's the debian maintainer
[2012-05-05 18:21:31 -0400] hoover_damn: he gladly took my changes :)
[2012-05-05 18:21:35 -0400] miah: great
[2012-05-05 18:21:38 -0400] hoover_damn: that's the best part of my life lately
[2012-05-05 18:21:43 -0400] hoover_damn: I feel like i'm actually contributing back
[2012-05-05 18:21:59 -0400] hoover_damn: I used to do great hacks... to only be able to share them with myself
[2012-05-05 18:22:02 -0400] hoover_damn: was sad
[2012-05-05 18:22:29 -0400] miah: BryanWB_: so you think i can do action [ :configure, :install_with_make ]
[2012-05-05 18:22:37 -0400] BryanWB_: miah, i think so
[2012-05-05 18:22:42 -0400] miah: ok. will try =)
[2012-05-05 18:22:46 -0400] miah: i'll let you know if it blows up
[2012-05-05 18:23:15 -0400] BryanWB_: alright, i gotta get back to reading that monster haproxy configuration.txt :)
[2012-05-05 19:06:21 -0400] josephholsten: has anyone got the djbdns cookbook set up to respond to reverse dns by just using data bags &/ attributes?
[2012-05-05 19:10:03 -0400] flashmanbahadur: lolwat?
[2012-05-05 19:10:19 -0400] specialsauce: laters Chefs!
[2012-05-05 19:21:21 -0400] josephholsten: flashmanbahadur: today I'm fixing my internal dnscache's reverse lookups so tomorrow I can set up krb5 so someday I can have ldap
[2012-05-05 19:21:59 -0400] josephholsten: I have more yaks to shave than a Tibetan barber's apprentice
[2012-05-05 19:22:56 -0400] flashmanbahadur: hah
[2012-05-05 19:23:01 -0400] flashmanbahadur: havent heard that expression before
[2012-05-05 19:24:51 -0400] josephholsten: turns out that badly configured dns caches (like how the djbdns cb comes out of the box) literally slow down lan performance for everyone: http://www.ietf.org/proceedings/64/slides/dnsop-0.pdf
[2012-05-05 19:25:12 -0400] flashmanbahadur: thats unfortunate
[2012-05-05 19:26:08 -0400] flashmanbahadur: i am dealing with much less techincal out of the box mongodb config issues
[2012-05-05 19:28:11 -0400] josephholsten: my boss says I'm not allowed to say things about mongo in public any more
[2012-05-05 19:29:14 -0400] josephholsten: I hope your data model doesn't require saves to succeed
[2012-05-05 19:31:53 -0400] UForgotten: josephholsten: what do you mean? are you seeing data loss?
[2012-05-05 19:34:38 -0400] josephholsten: not anymore. but when we were using it, we were in constant fear of cursor count spiking, it wedging itself, &c.
[2012-05-05 19:35:05 -0400] flashmanbahadur: josephholsten: haha i ehar ya
[2012-05-05 19:35:17 -0400] flashmanbahadur: fortunately we use it as a store of generated recommendations
[2012-05-05 19:35:38 -0400] flashmanbahadur: catastrophic failure is not a business ender
[2012-05-05 19:36:05 -0400] josephholsten: so it's more like a structured cache? I wouldn't mind it in that capacity.
[2012-05-05 19:36:33 -0400] flashmanbahadur: kinda
[2012-05-05 19:36:43 -0400] flashmanbahadur: we liked having the semistructed data format
[2012-05-05 19:36:51 -0400] flashmanbahadur: and the map reduce was nice at the time
[2012-05-05 19:36:55 -0400] josephholsten: are your config issues with the cb?
[2012-05-05 19:37:02 -0400] flashmanbahadur: cb?
[2012-05-05 19:37:14 -0400] josephholsten: cookbook. I type it so many times a day.
[2012-05-05 19:37:18 -0400] flashmanbahadur: yeah
[2012-05-05 19:37:25 -0400] flashmanbahadur: the cookbook we are using isnt super great
[2012-05-05 19:37:35 -0400] flashmanbahadur: doesnt behave well for daemonized chef runs
[2012-05-05 19:37:37 -0400] flashmanbahadur: loves to restart mongos
[2012-05-05 19:37:39 -0400] flashmanbahadur: for no reason
[2012-05-05 19:37:56 -0400] flashmanbahadur: also doesnt think any person should ever run mongos + mongod for MR
[2012-05-05 19:38:16 -0400] flashmanbahadur: issues where it installs mongodb by default, then stops it to install the correct setup
[2012-05-05 19:38:24 -0400] flashmanbahadur: but you have to wait for the prealloc to finish
[2012-05-05 19:38:32 -0400] flashmanbahadur: makes spinning up new machines really slow
[2012-05-05 19:39:04 -0400] UForgotten: MR?
[2012-05-05 19:39:23 -0400] flashmanbahadur: map reduce
[2012-05-05 19:39:31 -0400] flashmanbahadur: we are moving away from mongo map reduce soonish
[2012-05-05 19:39:33 -0400] flashmanbahadur: but not yet
[2012-05-05 19:39:36 -0400] UForgotten: ah. I didn't use chef to build my mongo cluster
[2012-05-05 19:39:51 -0400] UForgotten: because now they recommend multiple mongod's per physical server
[2012-05-05 19:40:00 -0400] flashmanbahadur: huh?
[2012-05-05 19:40:13 -0400] UForgotten: since it only uses 1 cpu and gets cpu bound... you can run like 6 mongod's on a multicore server with multiple disks and not max it out
[2012-05-05 19:40:20 -0400] flashmanbahadur: oic
[2012-05-05 19:40:30 -0400] flashmanbahadur: havent had cpu boudning issues
[2012-05-05 19:40:35 -0400] josephholsten: right. because threads are hard.
[2012-05-05 19:40:36 -0400] flashmanbahadur: we keep everything in RAM since we are on EC2
[2012-05-05 19:41:06 -0400] flashmanbahadur: page faults are the main issue for us
[2012-05-05 19:41:33 -0400] UForgotten: ec2 is slow & shitty for db
[2012-05-05 19:41:44 -0400] flashmanbahadur: not disputing that
[2012-05-05 19:41:45 -0400] UForgotten: we built some ssd machines, can do 30k trans/second
[2012-05-05 19:42:32 -0400] josephholsten: I don't know how bad it is for in-mem db, but the idea of disk-io up there...
[2012-05-05 19:42:32 -0400] flashmanbahadur: i bet
[2012-05-05 19:45:27 -0400] flashmanbahadur: we use rds
[2012-05-05 19:45:36 -0400] flashmanbahadur: then a variety of in mem dbs that persist to disk
[2012-05-05 19:45:40 -0400] flashmanbahadur: for less critical stuff
[2012-05-05 20:02:19 -0400] krankzinnig: Hello, does anyone have a moment to provide some quick consultation?
[2012-05-05 20:02:42 -0400] krankzinnig: I have a few questions after reading the wiki pages
[2012-05-05 20:02:59 -0400] flashmanbahadur: whats up
[2012-05-05 20:03:20 -0400] krankzinnig: Is it possible to host 1 chef server
[2012-05-05 20:03:28 -0400] krankzinnig: with many clients using it in different ways?
[2012-05-05 20:03:37 -0400] krankzinnig: Or would each team require a dedicated chef server
[2012-05-05 20:03:39 -0400] flashmanbahadur: not sure, havent used chef server
[2012-05-05 20:04:55 -0400] krankzinnig: Anyone have chef server experience here and a moment to spare?
[2012-05-05 20:10:25 -0400] josephholsten: sure
[2012-05-05 20:10:31 -0400] josephholsten: what different ways?
[2012-05-05 20:10:55 -0400] josephholsten: environments?
[2012-05-05 20:10:56 -0400] bawt_: environments is a feature of the Chef Server allowing you to constrain cookbooks to specific versions, set environment specific run lists for roles and set up environment specific attributes for nodes. Documentation: http://wiki.opscode.com/display/chef/Environments
[2012-05-05 20:11:45 -0400] josephholsten: krankzinnig: ^^ you'll definitely want those set up with version constraints
[2012-05-05 20:12:39 -0400] krankzinnig: Cool
[2012-05-05 20:13:11 -0400] krankzinnig: I'm not trying to step on opscodes toes, but on a much smaller scale I want to provide something like hosted chef
[2012-05-05 20:13:43 -0400] krankzinnig: I work with many clients and want to automate all the projects from one server
[2012-05-05 20:13:46 -0400] atomic-penguin: krankzinnig, open source chef server is not multi-tenant
[2012-05-05 20:14:00 -0400] krankzinnig: Ah, I figured
[2012-05-05 20:14:39 -0400] atomic-penguin: krankzinnig, why not bill back the clients for use of the platform then?
[2012-05-05 20:15:46 -0400] krankzinnig: Would it be feasible to host all of this on a rackspace cloud?
[2012-05-05 20:16:09 -0400] krankzinnig: I already pay quite a bit to host that, so I would hate to host chef individually for each person for so much
[2012-05-05 20:16:14 -0400] atomic-penguin: krankzinnig, all of what, multiple chef servers?
[2012-05-05 20:16:17 -0400] krankzinnig: Yes
[2012-05-05 20:16:44 -0400] atomic-penguin: We run ours in vmware, I don't see why rackspace VMs would be an issue
[2012-05-05 20:17:08 -0400] josephholsten: krankzinnig: I bet you'd like some of the presentations opscode folks have had about their switching to erlang and mysql. You'll get a feel for some of the current scaling challenges.
[2012-05-05 20:19:24 -0400] josephholsten: tl;dr: ruby procs use a lot of mem, couchdb doesn't have a lot of info about scaling
[2012-05-05 20:22:42 -0400] miah: http://guide.couchdb.org/editions/1/en/scaling.html
[2012-05-05 20:23:13 -0400] josephholsten: miah: :)
[2012-05-05 20:23:22 -0400] miah: <3 free online books
[2012-05-05 20:23:52 -0400] josephholsten: for those who want their dns caches to stop polluting the internet: http://tickets.opscode.com/browse/COOK-1259
[2012-05-05 20:24:07 -0400] josephholsten: pls review my patch to the djbdns cookbook
[2012-05-05 20:24:14 -0400] josephholsten: now I'm off to derby
[2012-05-05 21:55:49 -0400] _numbers: whats the easiest way i could override the Package resource so that it uses a different binary /usr/sbin/apt-fast ?
[2012-05-05 21:55:53 -0400] _numbers: its a change i would want to affect all my cookbooks
[2012-05-05 21:57:47 -0400] andreacampi: create a file in libraries/ and stick your monkeypatch in there
[2012-05-05 21:58:04 -0400] andreacampi: i.e. just reopen the Package class and overwrite the method(s) you need
[2012-05-05 21:58:32 -0400] andreacampi: you can put that in any cookbook...
[2012-05-05 22:08:37 -0400] _numbers: thank you andreacampi
[2012-05-05 22:20:01 -0400] _numbers: is there a place in the cookbooks directory where i could put it so it would load before anything else?
[2012-05-05 22:20:21 -0400] _numbers: or maybe i just know the order of recipes and place it in a custom recipe first
[2012-05-05 22:22:39 -0400] andreacampi: you need to put it in a cookbook that comes at the beginning of the run list, yes
[2012-05-05 22:23:07 -0400] andreacampi: that's up to you to do that the order in the cookbooks directory has nothing to do, what matters is the node run list
[2012-05-05 22:50:07 -0400] _numbers: ok thx got it working now

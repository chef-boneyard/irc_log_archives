[2012-05-14 00:11:20 -0400] yfeldblum: librarian-0.0.23 released
[2012-05-14 00:13:04 -0400] LinuxHorn: Yayz!  Added my first cookbook to community today!  Super simple one, but still!
[2012-05-14 00:13:55 -0400] LinuxHorn: Installs the rackspace cloud monitoring client (currently in public beta)
[2012-05-14 00:14:07 -0400] Cope: LinuxHorn: sweet :)
[2012-05-14 00:14:41 -0400] LinuxHorn: Had chef training with mattray last week, so I'm still new to this
[2012-05-14 00:16:18 -0400] LinuxHorn: Wife does not look happy that I am still at computer
[2012-05-14 00:21:22 -0400] atomic-penguin: LinuxHorn, link?
[2012-05-14 00:21:22 -0400] laurent\: sounds like a familiar story
[2012-05-14 00:21:57 -0400] atomic-penguin: I've been bugbusting all day on cookbooks
[2012-05-14 00:24:40 -0400] miah: awesome!
[2012-05-14 00:25:58 -0400] atomic-penguin: In the last week it seems like every cookbook I put a depend on, had some issue needing fixed
[2012-05-14 00:27:51 -0400] miah: i feel like that is always the way
[2012-05-14 00:29:17 -0400] atomic-penguin: Oh, I'll just fix this little bug in this one cookbook I need, end up fixing four cookbooks.  Well there went the whole day!
[2012-05-14 00:30:03 -0400] atomic-penguin: Enjoyed it though
[2012-05-14 00:30:36 -0400] miah: haha yup
[2012-05-14 00:31:19 -0400] atomic-penguin: I was going to start on a fifth one, but decided against it.  Need to go sleep soon, to get up for the flight
[2012-05-14 00:31:49 -0400] lusis: heh. I'm not getting in till like 11PM Tuesday night =/
[2012-05-14 00:32:21 -0400] atomic-penguin: We booked an alcatraz tour for monday afternoon
[2012-05-14 00:32:36 -0400] lusis: oh that's a hella fun tour
[2012-05-14 00:32:46 -0400] lusis: I haven't been in a long time but it was awesome
[2012-05-14 00:32:47 -0400] atomic-penguin: 3:20 if anyone else wants to meet us and go :)
[2012-05-14 00:32:55 -0400] lusis: if anyone hasn't been, they should go
[2012-05-14 00:32:57 -0400] lusis: for serious
[2012-05-14 00:33:08 -0400] lusis: take a coat too. the boat ride out is windy
[2012-05-14 00:33:20 -0400] atomic-penguin: So I heard
[2012-05-14 00:33:29 -0400] lusis: it's actually pretty windy on the island too
[2012-05-14 00:33:36 -0400] lusis: the bay gets pretty chilly oddly enough ;)
[2012-05-14 00:37:17 -0400] miah: its definitely a fun tour. but i've done it once.
[2012-05-14 00:38:40 -0400] miah: its _always_ chilly here too fwiw.
[2012-05-14 00:38:55 -0400] miah: current temp is ~65f. but its generally windy.
[2012-05-14 00:42:50 -0400] btm: atomic-penguin: how long is it?
[2012-05-14 00:43:10 -0400] atomic-penguin: btm, how long is the tour, no idea?
[2012-05-14 00:45:33 -0400] ssd7: I really enjoyed visiting Alcatraz.  Really nice views of the city.
[2012-05-14 00:45:39 -0400] atomic-penguin: btm, according to the website, at least 2.5 hours
[2012-05-14 00:46:03 -0400] atomic-penguin: http://www.alcatrazcruises.com
[2012-05-14 00:56:34 -0400] Cope: wow
[2012-05-14 00:56:38 -0400] Cope: that sounds cool
[2012-05-14 00:56:51 -0400] lusis: it's a fun tour seriously
[2012-05-14 01:00:00 -0400] atomic-penguin: alright, well I'm off to bed to catch some zzzs.
[2012-05-14 01:00:02 -0400] atomic-penguin: laters
[2012-05-14 01:11:31 -0400] BryanWB_: msf, https://github.com/bryanwb/chef-ark/blob/master/files/default/tests/minitest/test_test.rb#L8
[2012-05-14 01:41:57 -0400] hoover_damm: not even ark or anything that silly
[2012-05-14 01:55:08 -0400] btm: sounds like a pretty wheel you're building there. ;)
[2012-05-14 01:56:01 -0400] hoover_damm: unfortunately yes
[2012-05-14 01:56:16 -0400] hoover_damm: but having metachef blow up and not let you run chef-client makes clients nervous
[2012-05-14 01:57:14 -0400] hoover_damm: it'd be easier if redis had their own ppa and updated it on each release
[2012-05-14 01:57:25 -0400] hoover_damm: so people who run debian/ubuntu would have a one-stop-shop
[2012-05-14 02:07:24 -0400] raz: metachef is now ironfan, right?
[2012-05-14 02:08:40 -0400] raz: except.. everything would go down in a nuclear meltdown at the slightest inconvenience
[2012-05-14 02:09:26 -0400] hoover_damm: yeah it's an ironfan thing
[2012-05-14 02:09:40 -0400] hoover_damm: re-uploaded metachef frozen the other day and it blew up our runs
[2012-05-14 02:09:42 -0400] raz: that stuff is so bad, chef should come with a warning sticker against it
[2012-05-14 02:09:50 -0400] hoover_damm: after looking at the code I was horrified
[2012-05-14 02:09:56 -0400] raz: then again.. chef should have all sorts of warning stickers
[2012-05-14 02:10:21 -0400] raz: it stopped being funny when i noticed that their 'kick' command happily performs a xfs resize on live volumes
[2012-05-14 02:10:53 -0400] raz: (without a resize being ever requested, obviously)
[2012-05-14 02:12:01 -0400] hoover_damm: require File.expand_path('component.rb',   File.dirname(__FILE__))
[2012-05-14 02:12:03 -0400] hoover_damm: that blew up
[2012-05-14 02:12:05 -0400] hoover_damm: and I was like wtf?
[2012-05-14 02:12:14 -0400] raz: ah in the _lol thing?
[2012-05-14 02:12:29 -0400] raz: i quite literally had to fix a module written in lolcode
[2012-05-14 02:12:32 -0400] hoover_damm: honestly i'm still going wtf? that's pretty nasty
[2012-05-14 02:12:57 -0400] raz: discovery_lol.rb or such
[2012-05-14 02:12:57 -0400] hoover_damm: cookbooks that modify your load_path
[2012-05-14 02:12:59 -0400] hoover_damm: should be shot
[2012-05-14 02:14:02 -0400] hoover_damm: you can do lots of awesome stuff with ruby to make your cookbooks appear to be super dry
[2012-05-14 02:14:33 -0400] hoover_damm: my most hated drying that helped me loose a job
[2012-05-14 02:18:47 -0400] yfeldblum: jfyi `require Pathname(__FILE__).dirname.join("component")`
[2012-05-14 02:24:41 -0400] hoover_damm: yfeldblum, is that the fix?
[2012-05-14 02:25:35 -0400] yfeldblum: hoover_damm, haha no it's not related to ironfan etc
[2012-05-14 02:25:52 -0400] hoover_damm: ahh
[2012-05-14 02:26:24 -0400] hoover_damm: that's perfectly fine ruby... just in chef I would expect require_recipe
[2012-05-14 02:26:27 -0400] hoover_damm: or include_recipe
[2012-05-14 02:26:37 -0400] hoover_damm: and totally explains why metachef bombs out at compile time
[2012-05-14 02:29:39 -0400] yfeldblum: hoover_damm, what recipe is this?
[2012-05-14 02:31:23 -0400] hoover_damm: $LOAD_PATH.unshift(File.dirname(__FILE__))
[2012-05-14 02:31:29 -0400] hoover_damm: require File.expand_path('attr_struct.rb', File.dirname(__FILE__))
[2012-05-14 02:31:29 -0400] hoover_damm: require File.expand_path('node_utils.rb',  File.dirname(__FILE__))
[2012-05-14 02:31:29 -0400] hoover_damm: require File.expand_path('component.rb',   File.dirname(__FILE__))
[2012-05-14 02:31:29 -0400] hoover_damm: require File.expand_path('aspect.rb',      File.dirname(__FILE__))
[2012-05-14 02:31:29 -0400] hoover_damm: require File.expand_path('discovery.rb',   File.dirname(__FILE__))
[2012-05-14 02:31:40 -0400] hoover_damm: http://community.opscode.com/cookbooks/metachef/source
[2012-05-14 02:31:43 -0400] miah: sup
[2012-05-14 02:31:54 -0400] hoover_damm: that's in libraries/metachef.rb
[2012-05-14 02:35:16 -0400] yfeldblum: yeah that should never happen in a cookbook, or in any framework-hosted code where the framework practices class reloading (like rails & chef)
[2012-05-14 02:36:58 -0400] hoover_damm: 22right
[2012-05-14 02:37:32 -0400] raz: hoover_damm: you are not up to date. metachef was renamed to ironfan and screwed up even more.
[2012-05-14 02:38:18 -0400] hoover_damm: raz, yeah i am not going to bother with more infochimps crud
[2012-05-14 03:12:10 -0400] silk1: So, i seem to be goign quietly insane here: is "knife cookbook upload sdblah -c ~/.chef/knife-config.rb" not correct?
[2012-05-14 03:29:09 -0400] erikh: if you dont' have it specified in your config, you'll need to specify the cookbooks path on your commandline
[2012-05-14 03:29:15 -0400] erikh: e.g., knife cookbook upload -o cookbooks foo
[2012-05-14 03:31:26 -0400] silk: my problem is that this has been working fine for well, ever
[2012-05-14 03:31:40 -0400] silk: I thought it may have been an OSX update, but I havent actually applied it yet
[2012-05-14 03:31:59 -0400] silk: the cookbook path is in the config
[2012-05-14 03:32:19 -0400] silk: downloading cookbooks is fine
[2012-05-14 03:33:44 -0400] silk: and unfortunately it doesnt seem to want to tell me more about the argument error
[2012-05-14 03:35:15 -0400] btm: silk: add '-V -V' to knife for extra output
[2012-05-14 03:36:31 -0400] silk: btm, thx looks to be an issue with a coworkers cookbook, that i am in fact not referencing
[2012-05-14 03:37:06 -0400] silk: knife reads other cookbooks metadata files prior to uploading the named one?
[2012-05-14 03:39:39 -0400] silk: ok, thats fixed it now to find a hammer
[2012-05-14 03:40:28 -0400] silk: I guess it reads them to ensure dependancies are met?
[2012-05-14 03:43:54 -0400] btm: silk: knife does a lot of work to try to help out and make sure you've got everything you need, lest you try to run chef-client and find you're missing something.
[2012-05-14 03:43:58 -0400] btm: dependency resolution is hard.
[2012-05-14 03:44:22 -0400] silk: yeah, its was a problem in the metadata.rb file of another cookbook
[2012-05-14 03:44:33 -0400] silk: it may be nicer if it mentioned that :)
[2012-05-14 03:44:40 -0400] silk: rather than just ArgumentError
[2012-05-14 04:06:44 -0400] hoover_damm: woops, nginx didn't come up on reboot, so logs.likens.us is back up
[2012-05-14 04:06:46 -0400] hoover_damm: sorry bout that hehe
[2012-05-14 04:27:23 -0400] valdezjoelt: hi
[2012-05-14 04:28:36 -0400] valdezjoelt: need help from gurus here, im having error on my windows file template
[2012-05-14 04:29:58 -0400] valdezjoelt: is there any sample cookbook in github that i can refer basically im having a nsc.ini.erb template
[2012-05-14 04:30:25 -0400] valdezjoelt: this will be located in c:\program files\nsclient++\nsc.ini
[2012-05-14 04:31:39 -0400] valdezjoelt: error is  Error loading cached checksum for key "chef-file-c:-Program Files-NSClient++-NSC-ini"  dump format error for symbol(0x75) (ArgumentError)
[2012-05-14 10:02:20 -0400] tnnuk: Is there a way to create a client and specify the key to use? I want to be able to switch my chef-managed nodes between two different chef servers
[2012-05-14 10:02:43 -0400] tnnuk: And it looks like I will need to create separate keys for each chef-server
[2012-05-14 10:06:28 -0400] tnnuk: Hi; Is there a way to create a client and specify the key to use? I want to be able to switch my chef-managed nodes between two different chef servers and it looks like I will need to create separate keys for each chef-server
[2012-05-14 10:07:16 -0400] specialsauce: tnnuk: i need to find the answer to this today too, coincidence!
[2012-05-14 10:08:50 -0400] specialsauce: i haven't had a play yet but I think it might be possible - when you create/register a client it spawns an editor with a hash of data in and one of the fields is key which is set to null, i'm guessing if you paste the key in there it might be able to register the client with that (existing) key? but i don't know
[2012-05-14 10:10:27 -0400] specialsauce: "knife client reregister --key [KEYFILE] [CLIENT]" may work looking at the manpage, but i haven't tested it yet
[2012-05-14 10:21:38 -0400] tnnuk: specialsauce: I thought that key was the one to use while connecting to the chef-server to perform the task
[2012-05-14 10:38:07 -0400] tnnuk: specialsauce: I just created a client and specified the public key in the JSON
[2012-05-14 10:38:25 -0400] tnnuk: It still gave me a private key back
[2012-05-14 10:39:41 -0400] tnnuk: And I get a 401 unauthorized when trying to connect
[2012-05-14 10:39:49 -0400] tnnuk: specialsauce: so I'm not sure that method works
[2012-05-14 10:40:00 -0400] specialsauce: tnnuk,  might need to look at the source to see if it is possible, seems odd to add a field for it if it isn't supported
[2012-05-14 10:40:15 -0400] tnnuk: indeed
[2012-05-14 10:43:37 -0400] specialsauce: if i run "knife client edit" i can see the public key cleartext as a field, only difference being there are explicit "\n" linebreak chars
[2012-05-14 10:43:58 -0400] specialsauce: so i bet it does work passing the public key via vim, but only if you know to include "\n" chars :-)
[2012-05-14 10:44:01 -0400] specialsauce: worth a go anyway
[2012-05-14 10:44:08 -0400] specialsauce: tnnuk, ^
[2012-05-14 10:46:42 -0400] yfeldblum: tnnuk, just create two chef-client config files and switch between them (chef-client -c /etc/chef/client1.rb, etc)
[2012-05-14 10:48:13 -0400] specialsauce: thats not as clean a solution really as getting the same key working on both, which i think might be possible with the above
[2012-05-14 10:52:11 -0400] tnnuk: yfeldblum: yes; that was my backup plan :)
[2012-05-14 10:56:33 -0400] tnnuk: specialsauce: I did include the "\n" characters
[2012-05-14 10:57:03 -0400] tnnuk: I still get a 401
[2012-05-14 10:57:31 -0400] tnnuk: Even though when I do a knife client edit <client> it displays the correct public key
[2012-05-14 10:58:39 -0400] tnnuk: Oh wait; nope - the public_key is different
[2012-05-14 10:58:47 -0400] tnnuk: It just starts and ends the same
[2012-05-14 11:00:15 -0400] tnnuk: specialsauce: and editing the public_key with knife client edit doesn't actually change it :/
[2012-05-14 11:00:21 -0400] specialsauce:  ...
[2012-05-14 11:00:38 -0400] tnnuk: It stays the same
[2012-05-14 11:01:08 -0400] specialsauce: well that definitely sounds like a bug then. i'll check the source after a spot of lunch :-)
[2012-05-14 11:01:14 -0400] tnnuk: Ok
[2012-05-14 11:02:43 -0400] laurent\: don't know what i did but my rabbitmq is stuck since i've upgraded my chef server to 0.10.10
[2012-05-14 11:05:02 -0400] laurent\: rabbitmqctl list_queues -p /chef doesn't return
[2012-05-14 11:11:36 -0400] laurent\: rm -rf /var/lib/rabbitmq/* did the trick
[2012-05-14 11:21:23 -0400] Leth`: If I have multiple web app nodes and the database on another node, how do I stop the web app while the DB gets upgraded?
[2012-05-14 11:21:55 -0400] Leth`: I haven't had much luck finding the right terms to search for
[2012-05-14 11:35:16 -0400] zts: Leth`: "orchestration" is the term you want, and it's not something that Chef offers much for.  Things to look at include MCollective, RunDeck, and perhaps Noah
[2012-05-14 11:36:45 -0400] zts: Leth`: or perhaps https://github.com/websterclay/chef-dominodes - although I personally wouldn't want to use that in production
[2012-05-14 11:40:16 -0400] mehlah: When bootsraping nodes with knife, chef-run doesn't run each 1800 seconds
[2012-05-14 11:40:25 -0400] mehlah: docs says the default "interval" value is 1800
[2012-05-14 11:40:43 -0400] mehlah: should I do something special to make it run automatically ?
[2012-05-14 12:04:24 -0400] Leth`: zts: thanks!
[2012-05-14 12:04:28 -0400] yfeldblum: Leth`, `knife ssh $QUERY 'sudo service $WEBAPP stop` ?
[2012-05-14 12:05:36 -0400] Leth`: yfeldblum: thanks. I was looking for something more automated though
[2012-05-14 12:20:35 -0400] yfeldblum: Leth`, stick it in a script?
[2012-05-14 12:20:53 -0400] yfeldblum: Leth`, or of course look into more general automation toolkits/frameworks
[2012-05-14 12:22:06 -0400] Leth`: yfeldblum: yeah ofc. at this stage it's just something I'm looking into in advance
[2012-05-14 14:08:32 -0400] gp5st: hello.  I keep getting "merb : chef-server (api) : worker (port 4000) ~ Connection failed - user: chef - (Bunny::ProtocolError)
[2012-05-14 14:08:42 -0400] gp5st: " i set up rabbitmq like the docs say
[2012-05-14 14:09:09 -0400] gp5st: anyone have any adivce on where i should be looking
[2012-05-14 14:13:49 -0400] specialsauce: "rabbitmqctl list_users"... list_vhosts etc etc would be a good place to start
[2012-05-14 14:14:07 -0400] gp5st: that's all as the docs say it should be
[2012-05-14 14:14:18 -0400] gp5st: and it amkes sense given the config
[2012-05-14 14:14:38 -0400] gp5st: i wish it was a more detailed error message, like host not found or bad user
[2012-05-14 14:19:48 -0400] specialsauce: yeah that's not super helpful
[2012-05-14 14:20:36 -0400] gp5st: i've configutred it as per http://wiki.opscode.com/display/chef/Chef+Indexer#ChefIndexer-ConfiguringChef%27sRabbitMQSpecificSettings
[2012-05-14 14:20:42 -0400] gp5st: i've created the vhost and user
[2012-05-14 14:20:50 -0400] gp5st: the only weird thig is netstat's output
[2012-05-14 14:21:07 -0400] gp5st: tcp        0      0 0.0.0.0:56724           0.0.0.0:*               LISTEN      1262/beam
[2012-05-14 14:21:08 -0400] gp5st: tcp6       0      0 :::5672                 :::*                    LISTEN      1262/beam
[2012-05-14 14:21:33 -0400] gp5st: i've tried using both those ports with all of 127.0.0.1, localhost, and ::1 and none seem to work
[2012-05-14 14:21:51 -0400] gp5st: i can paste the rabbitmqctl output if you'd like
[2012-05-14 14:22:40 -0400] gp5st: http://pastebin.com/qpfuMuZL
[2012-05-14 14:27:34 -0400] gp5st: http://pastebin.com/bBtUGTNf this little script doesn't error, however
[2012-05-14 14:27:47 -0400] gp5st: that's the config i pulled from the chef config
[2012-05-14 14:29:17 -0400] specialsauce: hold on, from your netstat output, 5672 is only open on tcp6?
[2012-05-14 14:29:22 -0400] specialsauce: or am I reading that wrong?
[2012-05-14 14:29:37 -0400] gp5st: that's what it says
[2012-05-14 14:29:50 -0400] gp5st: but that little script i have works, well, doesn't error
[2012-05-14 14:32:28 -0400] gp5st: if i change the port or host it gives an init_connection error, not a bunny protocol error
[2012-05-14 14:36:02 -0400] gp5st: it's a standard ubuntu-package install of rabbit mq fwiw
[2012-05-14 14:43:07 -0400] gp5st: is the chef user for rabbitmq suppose to bin a group or anything (like guest is in administrator)
[2012-05-14 14:50:56 -0400] gp5st: can using amqp be disabled? i guess it seems fairly integral
[2012-05-14 14:52:07 -0400] specialsauce: yeah its pretty integral to use AMQP for the solr indexing
[2012-05-14 14:52:51 -0400] gp5st: does solr indexing really need to be there;)
[2012-05-14 14:52:53 -0400] gp5st: i kid i kid
[2012-05-14 14:56:02 -0400] specialsauce: hehe
[2012-05-14 15:05:19 -0400] specialsauce: is it possible this is as simple as the chef user can't connect because the password is wrong or something?
[2012-05-14 15:05:25 -0400] specialsauce: have you tried resetting that?
[2012-05-14 15:05:35 -0400] gp5st: yes
[2012-05-14 15:05:42 -0400] gp5st: and i've restarted chef and rabbitmq
[2012-05-14 15:06:19 -0400] gp5st: hmm, so http://pastebin.com/0EFQTGLd works
[2012-05-14 15:06:26 -0400] gp5st: and those are the credentials i'm using for chef
[2012-05-14 15:06:42 -0400] gp5st: so i don't think it's a credentials issue
[2012-05-14 15:08:38 -0400] eherot: gp5st: also make sure the permissions are right
[2012-05-14 15:08:58 -0400] specialsauce: (rabbitmqctl set_permissions)
[2012-05-14 15:09:13 -0400] eherot: (and rabbitmqctl list_permissions)
[2012-05-14 15:09:19 -0400] gp5st: yeah, they're all .*
[2012-05-14 15:09:26 -0400] gp5st: i pasted them in a pastebin earlier
[2012-05-14 15:10:28 -0400] eherot: is that script you pasted there running on the chef server?
[2012-05-14 15:10:41 -0400] gp5st: yes
[2012-05-14 15:14:04 -0400] specialsauce: don't suppose there's anyone on #chef yet who can explain to me how I go about "importing" a client from an existing PEM file?
[2012-05-14 15:14:23 -0400] specialsauce: I'd be happy with a solution using knife or even throwing JSON at couch or whatever
[2012-05-14 15:18:01 -0400] gp5st: so, is there anyway to print out the final chef config
[2012-05-14 15:21:25 -0400] xeon22: hello
[2012-05-14 15:21:54 -0400] xeon22: trying to get items from databag tied to an environment
[2012-05-14 15:22:28 -0400] xeon22: how do you load databag with a key that matches and environment name?
[2012-05-14 15:23:50 -0400] alex88: hello guys, i'm new to chef, just seen some pages, if my need is to be able some vm of different type like reverse caching proxy, php application server and db server and later scale them, chef is what i need?
[2012-05-14 15:26:16 -0400] gp5st: chef would let you configure and build those machines, yes
[2012-05-14 15:27:05 -0400] alex88: gp5st, ok, are there some supported api for creating vm, like do i need amazon ec2 api or what?
[2012-05-14 15:27:21 -0400] gp5st: there are various knife plugins
[2012-05-14 15:27:31 -0400] gp5st: for vagrant, ec2, linode, rackspace, etc
[2012-05-14 15:27:39 -0400] gp5st: also for windows and obviously linux
[2012-05-14 15:28:25 -0400] alex88: gp5st, thank you very much! just wanted to know if i can do what i need with chef.. going to the docs ;)
[2012-05-14 15:35:27 -0400] xeon22: I was looking for some assistance with parsing databag that matched an environment name
[2012-05-14 15:38:15 -0400] gp5st: is there any way to dump the configuration?
[2012-05-14 15:38:56 -0400] hoover_damm: alex88, what you need with chef only a server to configure
[2012-05-14 15:39:33 -0400] alex88: hoover_damm, you mean if i need to configure only one server?
[2012-05-14 15:39:35 -0400] hoover_damm: alex88, you can go with the Hosted Chef Platform which gives you the service of Chef in the Cloud.  Or you can go with chef-solo if you don't want the additional server
[2012-05-14 15:39:43 -0400] hoover_damm: alex88, meaning you can start with just 1
[2012-05-14 15:40:41 -0400] alex88: hoover_damm, actually we're running openstack on our servers.. don't know how i should proceed
[2012-05-14 15:41:19 -0400] hoover_damm: alex88, there's a plugin for openstack as well
[2012-05-14 15:41:39 -0400] hoover_damm: https://github.com/opscode/knife-openstack
[2012-05-14 15:41:45 -0400] alex88: hoover_damm, i'm not sure i've understood the architecture of chef
[2012-05-14 15:42:32 -0400] hoover_damm: alex88, you can start by reading the Opscode training material and wiki
[2012-05-14 15:42:48 -0400] hoover_damm: http://www.opscode.com/training/
[2012-05-14 15:42:50 -0400] alex88: hoover_damm, thanks, going to that
[2012-05-14 15:43:04 -0400] hoover_damm: https://github.com/opscode/chef-fundamentals
[2012-05-14 15:43:13 -0400] hoover_damm: alex88, ^^ that's the actual guide right there
[2012-05-14 15:43:41 -0400] alex88: thanks hoover_damm
[2012-05-14 15:44:08 -0400] hoover_damm: alex88, I'd suggest reading over some cookbooks and the fundamentals and when you have questions.  Just make sure you try and explain the best you can, and don't be afraid to ask a dumb question.  It's only dumb because you don't know the answer.
[2012-05-14 15:45:13 -0400] hoover_damm: alex88, and be aware the actual learning curve for some is pretty steep.  Good experience with Ruby will make Chef easier but it won't make it painless
[2012-05-14 15:45:37 -0400] hoover_damm: so if you spend 90days putting together the whole taco... the next time you put it together it'll take 60days
[2012-05-14 15:45:40 -0400] hoover_damm: and so forth
[2012-05-14 15:46:00 -0400] alex88: kk let me try ;)
[2012-05-14 15:46:24 -0400] geekbri: man i could go for a taco
[2012-05-14 15:46:26 -0400] hoover_damm: but Chef is absolutely a worth while skill that will give you a career if you do it good enough
[2012-05-14 15:46:52 -0400] sampikesley: also tacos
[2012-05-14 15:46:54 -0400] sampikesley: apparently
[2012-05-14 15:47:25 -0400] geekbri: Not to sound like some sort of homer, but using chef has made my life a butt ton easier.
[2012-05-14 15:47:54 -0400] sampikesley: I have Chef on my CV now
[2012-05-14 15:48:02 -0400] hoover_damm: it worked into my 'work smarter not harder' motto
[2012-05-14 15:48:05 -0400] sampikesley: it's like catnip to recruitment agents
[2012-05-14 15:48:19 -0400] StormSilver: hoover_damm: Career, eh... tacos, ABSOLUTELY
[2012-05-14 15:48:25 -0400] StormSilver: ;)
[2012-05-14 15:48:33 -0400] geekbri: If you aren't using chef, chances are you'll have to write a whole slew of your own automation stuff... which will take more time than just learning chef so....
[2012-05-14 15:48:37 -0400] geekbri: thats what i have to say about that.
[2012-05-14 15:51:07 -0400] alex88: btw, a question i had to make before, chef is open source and/or free?
[2012-05-14 15:59:10 -0400] miah: moin
[2012-05-14 15:59:19 -0400] miah: alex88: yes
[2012-05-14 15:59:49 -0400] alex88: miah, so only commercial support costs?
[2012-05-14 15:59:57 -0400] yfeldblum: xeon22, data bag items are just JSON documents which you can get/put/delete via the chef-server-api
[2012-05-14 16:00:07 -0400] miah: well. support, private or hosted chef.
[2012-05-14 16:00:08 -0400] miah: http://wiki.opscode.com/display/chef/Home
[2012-05-14 16:01:38 -0400] alex88: well, if i install on my servers isn't "private"?
[2012-05-14 16:02:07 -0400] gale: yes it is
[2012-05-14 16:02:31 -0400] zts: alex88: there's a product called "Private Chef" which is different from installing the open-source version yourself
[2012-05-14 16:03:13 -0400] yfeldblum: xeon22, you can enumerate the daga bags with /data and you can enumerate the data bag items in a data bag with /data/:name
[2012-05-14 16:03:37 -0400] alex88: sts ok thank you
[2012-05-14 16:06:25 -0400] yfeldblum: specialsauce, https://github.com/opscode/chef/blob/master/chef/lib/chef/api_client.rb#L247
[2012-05-14 16:07:19 -0400] specialsauce: yfeldblu: ooooh, thanks!
[2012-05-14 16:07:20 -0400] yfeldblum: specialsauce, you can perform an HTTP PUT against /clients/:name and, in the request body JSON, include your own private key
[2012-05-14 16:08:20 -0400] yfeldblum: specialsauce, you can also use Chef::ApiClient from some knife plugin of your own, and call #save(new_key) with your own new_key
[2012-05-14 16:08:35 -0400] yfeldblum: where new_key is your private key
[2012-05-14 16:09:03 -0400] xeon22: i have the json databag with a top level key of id: "env"
[2012-05-14 16:09:28 -0400] yfeldblum: specialsauce, keep in mind that in order to do HTTP operations, you need to sign your requests the way that knife does
[2012-05-14 16:09:36 -0400] xeon22: but when I try to access the "env" : {} key from a recipe it get errors with not found
[2012-05-14 16:10:03 -0400] yfeldblum: xeon22, data bag or data bag item?
[2012-05-14 16:10:22 -0400] xeon22: i have tried both
[2012-05-14 16:10:40 -0400] xeon22: data_bag("<databag_name>")
[2012-05-14 16:10:59 -0400] xeon22: and data_bag("name", "envkey")
[2012-05-14 16:11:28 -0400] xeon22: sorry ... that last one was data_bag_item...
[2012-05-14 16:13:28 -0400] specialsauce: yfeldblum: and will this work across Chef servers? I think the issue I have is that I have two servers, both with the same validation.pem, but one has a different client pem for "chef-validator". That's the one I need to change I think (to get client keys working across both server hosts)
[2012-05-14 16:14:49 -0400] yfeldblum: specialsauce, it might
[2012-05-14 16:15:23 -0400] yfeldblum: specialsauce, all i can say is that the Chef::ApiClient class seems to suggest these two ways of uploading a new key
[2012-05-14 16:16:00 -0400] specialsauce: ok. i might give this a go i think, because the only other option I see is to brute force it by exporting and importing the couchDB in its entirety between hosts
[2012-05-14 16:16:15 -0400] specialsauce: which I'm more certain would work, but is more of a ballache
[2012-05-14 16:16:54 -0400] zts: yfeldblum: http://wiki.opscode.com/display/chef/Server+API#ServerAPI-%2Fclients%2FCLIENTNAME says that private_key is a boolean, to request that a new key be generated?
[2012-05-14 16:17:02 -0400] xeon22: @yfeldblum -- I get a 404 when i try to load data_bag_item(databag_name, env_key)
[2012-05-14 16:17:08 -0400] zts: yfeldblum: which makes sense, as you'd otherwise want to store a public key, not a private key...
[2012-05-14 16:17:32 -0400] yfeldblum: zts, you're right
[2012-05-14 16:17:49 -0400] yfeldblum: specialsauce, guess not :P
[2012-05-14 16:18:51 -0400] yfeldblum: zts, specialsauce, https://github.com/opscode/chef/blob/master/chef-server-api/app/controllers/clients.rb#L96-97
[2012-05-14 16:19:23 -0400] yfeldblum: specialsauce, you could directly update the client in couchdb :P
[2012-05-14 16:19:45 -0400] specialsauce: yfeldblum, I think that would actually work wouldn't it?
[2012-05-14 16:19:56 -0400] yfeldblum: specialsauce, dunno, take a backup ...
[2012-05-14 16:20:03 -0400] specialsauce: yeah
[2012-05-14 16:27:37 -0400] tzn: hi
[2012-05-14 16:27:52 -0400] tzn: i'm having troubles using opscode nginx recipe http://pastie.org/3910654
[2012-05-14 16:28:05 -0400] tzn: i have ohai cookbook applied on that host
[2012-05-14 16:30:19 -0400] raygunsix: tzn: had the same issue the ohai cookbook from the git repo has a fix for this - https://github.com/opscode-cookbooks/ohai
[2012-05-14 16:38:45 -0400] tzn: thanks for that, will check
[2012-05-14 16:43:04 -0400] motiejus: Hi all. I am using chef-solo and knife solo. I would like to use "knife cookbook download" to my repository, however, this fails, because I am not authenticated with server. But I neither want nor need to be authenticated with server in order to download a cookbook. How do I properly download a cookbook without having a chef server somewhere running?
[2012-05-14 16:43:42 -0400] zts: motiejus: you probably want "knife cookbook site download"
[2012-05-14 16:44:19 -0400] motiejus: zts: yes, I do. Thanks! :)
[2012-05-14 16:44:39 -0400] zts: motiejus: no problem :)
[2012-05-14 16:47:20 -0400] motiejus: hm. And what about data bags in chef-solo? For instance, I have "users" cookbook, which requires a data bag. How do I deal with it?
[2012-05-14 16:47:33 -0400] hoover_damm: data bags work for chef solo
[2012-05-14 16:47:40 -0400] motiejus: should I just manually create appropriate files, and it will work?
[2012-05-14 16:47:48 -0400] hoover_damm: http://wiki.opscode.com/display/chef/Data+Bags#DataBags-UsingDataBagswithChefSolo
[2012-05-14 16:47:53 -0400] hoover_damm: ^^ motiejus
[2012-05-14 16:47:59 -0400] motiejus: oh thanks. :)
[2012-05-14 16:48:26 -0400] hoover_damm: motiejus, search won't work.  data_bag and data_bag_item will
[2012-05-14 16:48:43 -0400] motiejus: hoover_damm: search is unnecessary, all I need is iteration
[2012-05-14 16:48:44 -0400] motiejus: thanks
[2012-05-14 16:49:25 -0400] specialsauce: yfeldblum, just for the record, the couchdb insert via curl seems to have worked (i think)
[2012-05-14 16:49:27 -0400] hoover_damm: my preference for attributes and using those as verbose as i want has pretty much made me evil
[2012-05-14 16:49:53 -0400] yfeldblum: specialsauce, nice
[2012-05-14 16:50:42 -0400] hoover_damm: I hope Opscode kisses the validation key system away soon
[2012-05-14 16:50:44 -0400] specialsauce: thanks for your assistance :-)
[2012-05-14 16:50:47 -0400] hoover_damm: it always bothered me
[2012-05-14 16:50:57 -0400] specialsauce: what aspect of it?
[2012-05-14 16:51:12 -0400] specialsauce: you mean because its not as good as the hsoted security model?
[2012-05-14 16:51:14 -0400] yfeldblum: motiejus, so you're golden; you can absolutely use data_bag and data_bag_item to enumerate and fetch data bag items in a data bag; beware that this technique is SELECT N+1 however
[2012-05-14 16:51:15 -0400] hoover_damm: I prefer to authorize my hosts
[2012-05-14 16:51:30 -0400] hoover_damm: not have a public key that gives the ability to have admin privs in certain areas
[2012-05-14 16:51:38 -0400] specialsauce: yeah
[2012-05-14 16:51:49 -0400] hoover_damm: the validation key used to be a admin client.  Which irked me more, but it's like it can create clients and nodes which is still bad
[2012-05-14 16:51:49 -0400] yfeldblum: hoover_damm, how?
[2012-05-14 16:51:59 -0400] hoover_damm: and if we're using knife to boot a rackspace instance or bootstrap it
[2012-05-14 16:52:15 -0400] hoover_damm: my first thought is, wtf? why can't we just create a client for the bootstrapee and then have knife write the client.pem for me?
[2012-05-14 16:52:25 -0400] hoover_damm: and skip this whole validation system
[2012-05-14 16:52:50 -0400] zts: hoover_damm: doesn't that describe 'knife client create'?
[2012-05-14 16:53:04 -0400] hoover_damm: zts, thanks for stating the obvious
[2012-05-14 16:53:51 -0400] zts: hoover_damm: it is indeed obvious, which is why I'm having trouble figuring out what you're on about
[2012-05-14 16:54:19 -0400] zts: hoover_damm: is your complaint that that exists in addition to the validation.pem system, or something else?
[2012-05-14 16:54:57 -0400] hoover_damm: zts, Honestly i'd love to respond to this but i feel like this is more probing to get the general understanding
[2012-05-14 16:55:51 -0400] hoover_damm: but I think the comment about Opscode going away with the validation comment should lean in the direction you need
[2012-05-14 16:56:08 -0400] hoover_damm: I wish I had more time to talk about this but i'm actually working
[2012-05-14 16:56:51 -0400] zts: hoover_damm: no problem, thankyou for deigning to hand those morsels down to me in spite of your hectic schedule
[2012-05-14 16:56:52 -0400] hoover_damm: Validation key is an extra step that isn't required imho.
[2012-05-14 16:57:11 -0400] hoover_damm: there are ways we can automate shipping the client.pem to the client instead
[2012-05-14 16:57:31 -0400] hoover_damm: like the code that 'knife client create' runs... :)
[2012-05-14 16:57:55 -0400] yfeldblum: hoover_damm, that sounds right
[2012-05-14 16:58:12 -0400] hoover_damm: zts, I only wanted to comment about it.  Not have a big conversation
[2012-05-14 16:58:24 -0400] yfeldblum: hoover_damm, for re-bootstrapping, though, how to maintain idempotency w.r.t. the api-client?
[2012-05-14 16:58:51 -0400] hoover_damm: yfeldblum, if you re-bootstrap and you change the node name you should unregister the client, delete the pem, register a new, and ship it
[2012-05-14 16:59:00 -0400] hoover_damm: yfeldblum, these are steps you have to take if you rename a client anyway
[2012-05-14 16:59:25 -0400] hoover_damm: but basically re-bootstrapping if the node name or the client needs to change, yeah it should unregister/ship/register
[2012-05-14 16:59:36 -0400] motiejus: hm, I am trying to make "users" cookbook run using chef-solo, and it tries to read the privatey key, which obviously does not exist. Failed to read the private key /etc/chef/client.pem: #<Errno::ENOENT: No such file or directory - /etc/chef/client.pem>. What am I doing wrong?
[2012-05-14 16:59:48 -0400] hoover_damm: it uses search
[2012-05-14 16:59:51 -0400] motiejus: and what is the difference between cookbooks/ and site-cookbooks/?
[2012-05-14 16:59:53 -0400] hoover_damm: search will bring out that error motiejus
[2012-05-14 16:59:59 -0400] motiejus: ah, that's what you mentioned already :)
[2012-05-14 17:00:04 -0400] motiejus: ok, I will patch the cookbook
[2012-05-14 17:00:05 -0400] motiejus: thanks
[2012-05-14 17:00:06 -0400] yfeldblum: hoover_damm, no, re-bootstrapping when the node name & client do not change
[2012-05-14 17:00:15 -0400] hoover_damm: yfeldblum, why does client.pem have to change in this case?
[2012-05-14 17:00:18 -0400] hoover_damm: that should be a noop
[2012-05-14 17:01:29 -0400] yfeldblum: hoover_damm, you described the procedure for bootstrapping ... can you describe the procedure for re-bootstrapping idempotently, with an unchanged node name & client? and how do we tell whether we're in a bootstrap or re-bootstrap situation?
[2012-05-14 17:02:14 -0400] yfeldblum: motiejus, cookbooks/ is the conventional place to put cookbooks you downloaded or otherwise obtained from external sources, such as the opscode community site or github
[2012-05-14 17:02:33 -0400] yfeldblum: motiejus, site-cookbooks is the conventional place to put cookbooks you built yourself and which are special & specific to your infrastructure
[2012-05-14 17:02:39 -0400] motiejus: ok, thanks
[2012-05-14 17:07:49 -0400] motiejus: hm, I am trying to work-around "users" cookbook for chef-solo without patching it. Here is what I found: https://github.com/edelight/chef-solo-search however, the installation instructions are quite unclear
[2012-05-14 17:08:15 -0400] motiejus: in other words, they don't make much sense for me. create a dummy cookbook with a single folder libraries/ and add search.rb to it.. doesn't make sense.
[2012-05-14 17:08:32 -0400] hoover_damm: yfeldblum, the client.pem should just be a step
[2012-05-14 17:08:52 -0400] motiejus: it doesn't mention how chef should hook the cookbook (it doesn't have default.rb, so it's not a cookbook...)
[2012-05-14 17:09:03 -0400] hoover_damm: yfeldblum, basically the bootstrap or client create would check if client.pem exists, and if it works.  If it doesn't, it would register a new one and unregister the old.  Then proceed on
[2012-05-14 17:09:43 -0400] motiejus: ah, I`ll just read the libraries documentation first.. hold on...
[2012-05-14 17:36:31 -0400] BryanWB_: scottsbaldwin, hey buddy
[2012-05-14 17:36:39 -0400] scottsbaldwin: hey!
[2012-05-14 17:36:49 -0400] scottsbaldwin: first, i have to say i wish i was at chefconf this week :(
[2012-05-14 17:37:18 -0400] BryanWB_: scottsbaldwin,well next year ;)
[2012-05-14 17:37:44 -0400] scottsbaldwin: my old boss is doing a keynote...if i would have just stuck around a couple more months...
[2012-05-14 17:38:13 -0400] scottsbaldwin: anyway...haproxy and jboss
[2012-05-14 17:39:17 -0400] BryanWB_: scottsbaldwin, here is a super basic haproxy config https://gist.github.com/2695253
[2012-05-14 17:39:41 -0400] BryanWB_: i <3 haproxy, a billion times better than using apache to proxy jboss
[2012-05-14 17:40:19 -0400] scottsbaldwin: BryanWB_, cool, i'm willing to try it. the only thing i'm currently using apache for is the proxy
[2012-05-14 17:40:23 -0400] BryanWB_: scottsbaldwin, that cookie insertion adds  a cookie    "SRV=1" depending on the backend
[2012-05-14 17:40:42 -0400] BryanWB_: apache is kind of a dog when it comes to proxying, at least in my experience
[2012-05-14 17:40:47 -0400] hoover_damm: apache proxy to jboss/jsp/etc
[2012-05-14 17:40:52 -0400] hoover_damm: always seemed stupid
[2012-05-14 17:41:00 -0400] hoover_damm: regular proxy_pass worked better
[2012-05-14 17:41:02 -0400] hoover_damm: with less failures
[2012-05-14 17:41:24 -0400] BryanWB_: i don't know how good nginx is for proxying as I haven't used it, haproxy is really simple imho
[2012-05-14 17:41:25 -0400] scottsbaldwin: been using proxy_ajp...failiures in the logs all over the place
[2012-05-14 17:41:31 -0400] scottsbaldwin: but that could be my incompetence i'm sure
[2012-05-14 17:41:34 -0400] hoover_damm: BryanWB_, pretty bad
[2012-05-14 17:41:43 -0400] hoover_damm: BryanWB_, I mean it works, but it doesn't do a real round robin
[2012-05-14 17:41:56 -0400] scottsbaldwin: so, if i'm serving up static content in my .wars haproxy will be just fine?
[2012-05-14 17:42:22 -0400] hoover_damm: BryanWB_, upstream of a balance with 4 ports ... you hit 5000 twice, 5001 once, 5002 3x, 5004 4x, then 5000 2x..
[2012-05-14 17:42:28 -0400] hoover_damm: BryanWB_, kind of bizzare
[2012-05-14 17:43:04 -0400] hoover_damm: kinda sad that people think so highly of haproxy as it's such a bad thing
[2012-05-14 17:43:08 -0400] BryanWB_: scottsbaldwin, i presume so, haproxy will pass everything to jboss
[2012-05-14 17:43:19 -0400] BryanWB_: hoover_damm, why u hate haproxy?
[2012-05-14 17:43:22 -0400] hoover_damm: as it has a history of memory issues
[2012-05-14 17:43:47 -0400] BryanWB_: hoover_damm, hmm i haven't seen those yet
[2012-05-14 17:43:50 -0400] hoover_damm: BryanWB_, I hate haproxy because you like it.
[2012-05-14 17:43:55 -0400] scottsbaldwin: haha
[2012-05-14 17:44:09 -0400] BryanWB_: hoover_damm, it all makes sense now ;)
[2012-05-14 17:44:17 -0400] hoover_damm: BryanWB_, there are lots of things that work badly that people accept as good
[2012-05-14 17:44:31 -0400] hoover_damm: BryanWB_, stunnel/stud/pound are the worst SSL Terminators in the business.
[2012-05-14 17:44:44 -0400] hoover_damm: but there is someone in here who will say that it works for them.  Take that as a grain of salt
[2012-05-14 17:45:04 -0400] hoover_damm: what works for them likely won't work for you, because you are not them.  Unless you know their exact situation ... it's hard to judge
[2012-05-14 17:45:11 -0400] scottsbaldwin: with haproxy do you have to install certs on the backend nodes? or on the lb?
[2012-05-14 17:45:21 -0400] hoover_damm: but haproxy doesn't support ssl terminaton
[2012-05-14 17:45:45 -0400] geekbri: hoover_damm: what do you use in place of haproxy
[2012-05-14 17:45:49 -0400] hoover_damm: and for a software based load balancer, it's one of the better out there.
[2012-05-14 17:45:51 -0400] BryanWB_: hoover_damm, yup it deosn't
[2012-05-14 17:45:58 -0400] Randm: mmm, doing ssl in your application server.
[2012-05-14 17:46:14 -0400] scottsbaldwin: been doing ssl in apache not the app servers
[2012-05-14 17:46:14 -0400] hoover_damm: but you should be mindful of the versions of haproxy you run and the bloat
[2012-05-14 17:46:24 -0400] hoover_damm: 1.4.2 for example is hella bloaty
[2012-05-14 17:46:26 -0400] Randm: and what version of proxy_ajp you run
[2012-05-14 17:46:28 -0400] hoover_damm: so is 1.4.5
[2012-05-14 17:46:29 -0400] BryanWB_: i do very little ssl but am looking at stud
[2012-05-14 17:46:44 -0400] hoover_damm: yeah and your going to burn yourself with stud because people whine at the apache suggestion
[2012-05-14 17:46:46 -0400] BryanWB_: haproxy 1.5 has been great so far
[2012-05-14 17:46:53 -0400] hoover_damm: Apache is better for SSL Terminaton then most
[2012-05-14 17:47:25 -0400] hoover_damm: Apache 2.4 will continue to push it :) which is awesome and to see over 300k session limit in apache
[2012-05-14 17:47:29 -0400] hoover_damm: will be nice
[2012-05-14 17:48:10 -0400] BryanWB_: hoover_damm, what's wrong w/ stud?
[2012-05-14 17:48:14 -0400] hoover_damm: BryanWB_, basically you use things that frighten me.  You seem to ignore good advise to avoid things, and you like to reinvent the wheel.  You should do great with Ruby and have a 'fun career'
[2012-05-14 17:48:35 -0400] hoover_damm: we've mentioned why stud sucks in here many times, you can visit my irc logs for a refresher course
[2012-05-14 17:48:38 -0400] geekbri: ouch that sounded a little personal
[2012-05-14 17:48:43 -0400] hoover_damm: and I've mentioned it to you several times BryanWB_
[2012-05-14 17:48:48 -0400] erikh: yeah that was a little unnecessary.
[2012-05-14 17:48:49 -0400] hoover_damm: and each time you ask the same question
[2012-05-14 17:48:51 -0400] hoover_damm: *sigh*
[2012-05-14 17:49:29 -0400] hoover_damm: eh, I'm just saying he takes the fun path.  I'm not trying to burn him, I'm just saying he takes the fun path... fun is hard and painful sometimes
[2012-05-14 17:49:43 -0400] hoover_damm: we all do it from time to time
[2012-05-14 17:50:02 -0400] shuvo: ohai chefs!
[2012-05-14 17:50:03 -0400] hoover_damm: perhaps it was personal because I hate having to repeat the same answer
[2012-05-14 17:50:19 -0400] hoover_damm: for that i'm sorry, I should learn to just shutup instead of repeating.
[2012-05-14 17:50:39 -0400] BryanWB_: hoover_damm, don't recall that i have asked you about stud before, i apologize if I have
[2012-05-14 17:50:40 -0400] shuvo: Good Morning BryanWB_! First time I caught you here awake :-D
[2012-05-14 17:50:53 -0400] BryanWB_: shuvo, haha :) y am on PST for this week
[2012-05-14 17:51:04 -0400] hoover_damm: BryanWB_, yep i've mentioned it to you once or twice... mentioned it in this roomo to others
[2012-05-14 17:51:14 -0400] hoover_damm: BryanWB_, likely it went in one ear and out the other
[2012-05-14 17:51:24 -0400] geekbri: hoover_damm: you never did mentioned what you use in place of haproxy :)
[2012-05-14 17:51:44 -0400] hoover_damm: geekbri, I prefer to deal with hardware load balancers if I can
[2012-05-14 17:51:58 -0400] geekbri: hoover_damm: ahh, yes dont we all.
[2012-05-14 17:52:01 -0400] hoover_damm: geekbri, other then that I admit to light usage of properly tested haproxy.  I've been burned enough with it bloating
[2012-05-14 17:52:05 -0400] scottsbaldwin: and if you can't use hw balancers?
[2012-05-14 17:52:06 -0400] BryanWB_: haproxy has been very stable for me, so i have no regrets. I will try out stud but if not will go to nginx for ssl
[2012-05-14 17:52:31 -0400] hoover_damm: if you use Ubuntu you likely should use Mojocode's haproxy PPA
[2012-05-14 17:52:50 -0400] BryanWB_: no budget on my project for load balancer and I like that I can easily control the queues and maxconn
[2012-05-14 17:52:53 -0400] hoover_damm: so you can have all those fancy features that the 1.5 series gives you... but it's also unstable
[2012-05-14 17:52:56 -0400] hoover_damm: sooo
[2012-05-14 17:53:04 -0400] doomviking: mmm unstable
[2012-05-14 17:53:09 -0400] hoover_damm: BryanWB_, well it's not like Rackspace's load balancer is totally worth a dime
[2012-05-14 17:53:12 -0400] hoover_damm: maybe a nickle
[2012-05-14 17:53:21 -0400] BryanWB_: i know a # of people using it in production who are using it and quite happy w/ it
[2012-05-14 17:53:30 -0400] BryanWB_: s/it/haproxy 1.5/
[2012-05-14 17:53:32 -0400] hoover_damm: but basically stud will burn you
[2012-05-14 17:53:33 -0400] hoover_damm: hard
[2012-05-14 17:53:48 -0400] BryanWB_: then maybe i will us nginx for the one app that needs it
[2012-05-14 17:53:48 -0400] hoover_damm: not being careful with haproxy and monitoring it will burn you
[2012-05-14 17:53:53 -0400] shuvo: BryanWB_, I had an issue with nginx LB spiking on small instances (EC2) and btm suggested haproxy and that issue went away. I guess it was the default LB scheduling algo that does not take into account the load on the machines
[2012-05-14 17:53:59 -0400] hoover_damm: you can monitor haproxy with collectd easily
[2012-05-14 17:54:25 -0400] StormSilver: I've been using nginx in prod for years as an LB with SSL termination and it's worked wonderfully
[2012-05-14 17:54:48 -0400] scottsbaldwin: sounds like i should try nginx instead of haproxy
[2012-05-14 17:54:53 -0400] hoover_damm: and the biggest problem with irc is if you stay here long enough someone will tell you they've done x with y...
[2012-05-14 17:54:56 -0400] hoover_damm: and you shouldn't listen to them
[2012-05-14 17:55:11 -0400] BryanWB_: scottsbaldwin, if u use lots of ssl, then y
[2012-05-14 17:55:12 -0400] hoover_damm: you have to remember that you make the decision, not someone on irc you don't know.
[2012-05-14 17:55:26 -0400] StormSilver: hoover_damm: Yes, but friend, you always tell people not to listen to anyone except yourself. :)
[2012-05-14 17:55:37 -0400] hoover_damm: honestly people are free to question me
[2012-05-14 17:55:44 -0400] hoover_damm: if you don't question what I say... then I don't want you to listen to me
[2012-05-14 17:55:56 -0400] hoover_damm: you cannot learn until you question
[2012-05-14 17:56:37 -0400] scottsbaldwin: BryanWB_, i just need some app server redundancy with ssl on one app, looking for the easiest to manage and config
[2012-05-14 17:56:56 -0400] shuvo: hoover_damm, that's an attitude I like. I dislike people who get all angry and rude because you asked them for suggestions but did not end up following that because it did not work for your situation and they take that personally
[2012-05-14 17:57:31 -0400] josephholsten: scottsbaldwin: are you running nginx or apache already?
[2012-05-14 17:57:38 -0400] Randm: of if you're on ec2, why aren't you using ELB?
[2012-05-14 17:57:43 -0400] scottsbaldwin: josephholsten, apache
[2012-05-14 17:57:49 -0400] hoover_damm: shuvo, sadly that personality you mention right there is coming out more and more online.
[2012-05-14 17:57:50 -0400] scottsbaldwin: Randm - on rackspace
[2012-05-14 17:57:54 -0400] Randm: same question
[2012-05-14 17:58:06 -0400] Randm: rackspace cloud has LB front ends
[2012-05-14 17:58:18 -0400] hoover_damm: scottsbaldwin, do you need X-Forwarded-For? if you do you shouldn't use Rackspace's LB
[2012-05-14 17:58:25 -0400] Randm: that're cheaper than 1GB instances
[2012-05-14 17:58:27 -0400] hoover_damm: you should stick to nginx or apache
[2012-05-14 17:58:36 -0400] hoover_damm: for your SSL termination
[2012-05-14 17:58:47 -0400] scottsbaldwin: hoover, don't need X-Forwarded-For
[2012-05-14 17:58:52 -0400] hoover_damm: most people prefer haproxy over rackspace's LB
[2012-05-14 17:59:01 -0400] josephholsten: scottsbaldwin: could you just use the ssl session caching that is built into your web server?
[2012-05-14 17:59:11 -0400] hoover_damm: rackspace's load balancer does ssl in tcp mode
[2012-05-14 17:59:16 -0400] hoover_damm: meaning each instance is a ssl terminator
[2012-05-14 17:59:21 -0400] hoover_damm: you don't upload the cert to rs
[2012-05-14 17:59:52 -0400] hoover_damm: also if you use rackspace, be mindful and use iptables to block all 10.x network except your own
[2012-05-14 18:00:05 -0400] hoover_damm: remember the 10.x network on rackspace's mosso product is shared
[2012-05-14 18:00:18 -0400] hoover_damm: so if you run redis, other clients can port scan and connect to redis and flush
[2012-05-14 18:00:41 -0400] hoover_damm: or memcached or mysql, etc
[2012-05-14 18:00:47 -0400] Randm: ah
[2012-05-14 18:00:53 -0400] hoover_damm: more of a true form of a public cloud
[2012-05-14 18:00:58 -0400] hoover_damm: can't sniff
[2012-05-14 18:01:01 -0400] doomviking: yeah thats an awesome feature of rs. no security.
[2012-05-14 18:01:07 -0400] hoover_damm: yep
[2012-05-14 18:01:15 -0400] scottsbaldwin: josephholsten, not sure about the ssl session caching
[2012-05-14 18:01:19 -0400] UForgotten: ok so I'm observing something interesting, tell me if I'm doing something wrongh
[2012-05-14 18:01:36 -0400] josephholsten: scottsbaldwin: skim this: http://hezmatt.org/~mpalmer/blog/2011/06/28/ssl-session-caching-in-nginx.html
[2012-05-14 18:01:51 -0400] scottsbaldwin: josephholsten, cheers
[2012-05-14 18:01:53 -0400] UForgotten: I am using chef-solo to run some templates, and most of them are in cookbook/templates/default but I created one cookbook/templates/host-hostname and its not overriding the template of the same name from default.
[2012-05-14 18:02:22 -0400] UForgotten: ie cookbook/templates/default/01.erb is run instead of cookbook/templates/default/host-hostname/01.erb
[2012-05-14 18:02:46 -0400] UForgotten: er
[2012-05-14 18:02:58 -0400] UForgotten: cookbook/templates/host-name/01.erb should be run
[2012-05-14 18:03:12 -0400] josephholsten: scottsbaldwin: I'm not saying don't handle the ssl in a separate layer than your app servers, but I'd encourage you not to do in in your load balancer.
[2012-05-14 18:03:51 -0400] josephholsten: and if you're doing that, the easiest thing is dns round-robin and shared ssl session cache.
[2012-05-14 18:04:06 -0400] hoover_damm: memcached + ssl
[2012-05-14 18:04:07 -0400] hoover_damm: figures
[2012-05-14 18:04:24 -0400] josephholsten: ?
[2012-05-14 18:04:26 -0400] UForgotten: hoover_damm: ever see chef-solo refuse to pick a host-specific template over default?
[2012-05-14 18:04:30 -0400] hoover_damm: that's the problem with SSL Sessions... you need to cache
[2012-05-14 18:04:44 -0400] hoover_damm: UForgotten, yep, your hostname isn't right
[2012-05-14 18:04:55 -0400] hoover_damm: UForgotten, did you do host-host.foo.bar.com?
[2012-05-14 18:04:58 -0400] gp5st: hmm, so i'm boot strapping a windows box (knife bootstrap windows winrm) and it seems to want me to create the node ahead of time. is that what should happen or am i dong something wronf
[2012-05-14 18:05:01 -0400] gp5st: worng
[2012-05-14 18:05:03 -0400] gp5st: wrong
[2012-05-14 18:05:05 -0400] hoover_damm: UForgotten, you can run chef-solo -l debug and actually see the pattern matching it does
[2012-05-14 18:05:22 -0400] hoover_damm: UForgotten, but it should be host-hostname/filename
[2012-05-14 18:05:22 -0400] hoover_damm: yes
[2012-05-14 18:05:23 -0400] UForgotten: the 'hostname' variable is in ohai and its 'match' so the template dir is templates/host-match/
[2012-05-14 18:05:36 -0400] josephholsten: gp5st: are you passing it a run list when you bootstrap?
[2012-05-14 18:05:46 -0400] UForgotten: I'll add the debug and see what its doing, thanks
[2012-05-14 18:07:53 -0400] gale: Hi, in my chef recipe - how do I find out if the recipe is running as client with admin privs?
[2012-05-14 18:07:57 -0400] UForgotten: interesting. ohai's hostname is match but `hostname` is match.local.  derp
[2012-05-14 18:08:05 -0400] shuvo: gale, what do you mean?
[2012-05-14 18:08:17 -0400] shuvo: gale, rcps run with the privs of the chef-client
[2012-05-14 18:08:19 -0400] UForgotten: so a more interesting question is why the frack is ohai getting the hostname wrong
[2012-05-14 18:08:34 -0400] gale: shuvo: yes - how do I find out if that chef-client is an admin?
[2012-05-14 18:08:35 -0400] shuvo: UForgotten, what does hostnaem -a yeild?
[2012-05-14 18:08:56 -0400] UForgotten: shuvo: an empty line...
[2012-05-14 18:08:58 -0400] shuvo: gale, how does your chef-client get run? as a daemon?
[2012-05-14 18:09:15 -0400] UForgotten: hostname -s shows 'match' tho
[2012-05-14 18:09:20 -0400] hoover_damm: anyone else have a problem with using googlecode.com with remote_file?
[2012-05-14 18:09:29 -0400] UForgotten: so ohai is going for the short hostname while template is going for fqdn
[2012-05-14 18:09:30 -0400] hoover_damm: I constantly get 404's with google code in chef
[2012-05-14 18:09:32 -0400] hoover_damm: but wget works
[2012-05-14 18:09:55 -0400] gale: shuvo: yes - I'm after the client that the chef-client is running as in recipe
[2012-05-14 18:09:58 -0400] josephholsten: UForgotten: do you have a line in your /etc/hosts with the hostname?
[2012-05-14 18:10:12 -0400] UForgotten: josephholsten: yes
[2012-05-14 18:10:23 -0400] UForgotten: the pseudo 'fqdn'
[2012-05-14 18:12:16 -0400] josephholsten: also /etc/hostname?
[2012-05-14 18:12:42 -0400] UForgotten: dont see why that matters
[2012-05-14 18:12:59 -0400] UForgotten: chef-solo should be using the ohai output I would think
[2012-05-14 18:13:15 -0400] UForgotten: hoover_damm: either way it's not overriding the template
[2012-05-14 18:13:19 -0400] josephholsten: to set the hostname: it should be in /etc/hostname, /etc/hosts, then run `sudo hostname the.right.fq.dn`
[2012-05-14 18:13:51 -0400] hoover_damm: UForgotten, ohai hostname
[2012-05-14 18:15:17 -0400] UForgotten: hostname -f hostname -s and hostname -a are working
[2012-05-14 18:15:33 -0400] UForgotten: hostname -f = match.local hostname -s and hostname -a and ohai hostname are match
[2012-05-14 18:15:45 -0400] UForgotten: templates/host-match and templates/host-match.local do not override templates/default
[2012-05-14 18:16:44 -0400] chson: gale: do a knife client show <node name> and it will tell you whether or not it's an admin
[2012-05-14 18:18:33 -0400] josephholsten: UForgotten: chef pulls that from the fqdn: https://github.com/opscode/chef/blob/master/chef/lib/chef/cookbook_version.rb#L766
[2012-05-14 18:18:48 -0400] josephholsten: what's `ohai fqdn` say
[2012-05-14 18:19:06 -0400] UForgotten: match.local
[2012-05-14 18:19:19 -0400] UForgotten: that is what I would expect it to be
[2012-05-14 18:20:46 -0400] UForgotten: so, based on that. I would expect templates/host-match.local/01.erb to load instead of templates/default/01.erb, correct?  That is not what I am seeing.  The -l debug output does not show what templates it is trying, in fact I have only seen that if it is looking for a template that does not exist.
[2012-05-14 18:22:37 -0400] josephholsten: try making it look for one that doesn't exist? (I'm out of good ideas)
[2012-05-14 18:23:00 -0400] UForgotten: that doesn't solve my problem :(
[2012-05-14 18:23:37 -0400] UForgotten: It does make sense that I should be able to have two templates called from a cookbook/default.rb that are the same name but different on a node-only basis in chef-solo tho right?  This isn't something that the chef-server does instead?
[2012-05-14 18:23:48 -0400] kevmo:     PATH="$PATH:/usr/java/jdk1.6.0_13/bin:" export PATH
[2012-05-14 18:23:48 -0400] kevmo:     export JAVA_HOME=/usr/java/jdk1.6.0_13/
[2012-05-14 18:23:49 -0400] kevmo:     export JAVA_PATH="$JAVA_HOME"
[2012-05-14 18:23:54 -0400] kevmo: After installing Java on CentOS server using Chef, I typically login and set these environment variables
[2012-05-14 18:24:11 -0400] kevmo: Any idea how to do that in a recipe?
[2012-05-14 18:24:51 -0400] UForgotten: kevmo: you would likely want those added to some sort of shell profile somewhere
[2012-05-14 18:24:57 -0400] josephholsten: kevmo: append them to /etc/environment? or ~/.profile
[2012-05-14 18:26:17 -0400] kevmo: thanks
[2012-05-14 18:26:28 -0400] josephholsten: UForgotten: two templates called from 'cookbook/recipes/default.rb', right?
[2012-05-14 18:27:15 -0400] UForgotten: I may have just realized what is going on. it's using a definition to load the templates
[2012-05-14 18:27:24 -0400] UForgotten: the definition may be too dumb to select a template directory
[2012-05-14 18:28:03 -0400] hoover_damm: UForgotten, correct templates/host-match.local/01.erb
[2012-05-14 18:28:20 -0400] hoover_damm: right
[2012-05-14 18:28:29 -0400] UForgotten: bam thats the problem
[2012-05-14 18:28:33 -0400] UForgotten:  template_source = params[:source] ? params[:source] : "#{params[:name]}.erb"
[2012-05-14 18:28:34 -0400] hoover_damm: that's a normal pattern to define cookbook params[:book]
[2012-05-14 18:28:52 -0400] UForgotten: hmm
[2012-05-14 18:29:02 -0400] UForgotten: then its something else
[2012-05-14 18:29:31 -0400] hoover_damm: because you have to tell it what the source cookbook is to find teh templates you want
[2012-05-14 18:29:43 -0400] UForgotten: its all the same cookbook
[2012-05-14 18:30:21 -0400] UForgotten: so that still doesn't make sense
[2012-05-14 18:30:31 -0400] UForgotten: if it's just passing the template name to the template source
[2012-05-14 18:30:47 -0400] UForgotten: chef should still abstract out the template source based on hostname as to which directory it pulls from correct?
[2012-05-14 18:34:20 -0400] josephholsten: hmm, looks suspiciously lacking in host awareness: https://github.com/opscode/chef/blob/master/chef/lib/chef/cookbook_version.rb#L635
[2012-05-14 18:35:16 -0400] josephholsten: but not used elsewhere :(
[2012-05-14 18:35:29 -0400] UForgotten: josephholsten: line 765 is the only place I see it
[2012-05-14 18:36:12 -0400] UForgotten: thats the error message I have seen when you reference a non-existant template
[2012-05-14 18:36:25 -0400] UForgotten: but when the template exists it doesn't pick the host-based one apparently
[2012-05-14 18:36:58 -0400] josephholsten: is it working for platform &/ version
[2012-05-14 18:37:14 -0400] UForgotten: haven't tried, will try that next.
[2012-05-14 18:39:22 -0400] bencaron: is it me that is confused about the use of symbols vs strings in the apache2 cookbooks?
[2012-05-14 18:39:36 -0400] josephholsten: bencaron: nope
[2012-05-14 18:39:39 -0400] josephholsten: :)
[2012-05-14 18:39:51 -0400] bencaron: if I look at github, I see that FC001 says "uses stings in preference of symbols"
[2012-05-14 18:39:56 -0400] josephholsten: we're switching to strings
[2012-05-14 18:40:02 -0400] josephholsten: +1
[2012-05-14 18:40:16 -0400] bencaron: ok, well that's why I'm confuse :)
[2012-05-14 18:40:25 -0400] bencaron: the web_app.conf.erb template
[2012-05-14 18:40:27 -0400] bencaron: uses strings
[2012-05-14 18:40:45 -0400] bencaron: and nothing works, except if I switch to symbols
[2012-05-14 18:40:52 -0400] UForgotten: interesting
[2012-05-14 18:40:56 -0400] UForgotten: platform-version worked
[2012-05-14 18:41:02 -0400] UForgotten: host does not.
[2012-05-14 18:41:22 -0400] bencaron: honestly I've not extensively tested
[2012-05-14 18:41:31 -0400] bencaron: I just notice that while using the template
[2012-05-14 18:41:51 -0400] bencaron: server_aliases didn't like .each
[2012-05-14 18:43:01 -0400] josephholsten: bencaron: a node obj shouldn't care if we write node.apache.log_dir or node[:apache][:log_dir]
[2012-05-14 18:43:29 -0400] josephholsten: but you'll notice that server_aliases is on @params, which is not a mash but a boring old hash
[2012-05-14 18:43:30 -0400] bencaron: it's more the web_app definition that looks mixed up
[2012-05-14 18:43:39 -0400] bencaron: exact
[2012-05-14 18:43:42 -0400] josephholsten: no magic conversion
[2012-05-14 18:44:00 -0400] yfeldblum: hoover_damm, rackspace cloud vnext is introducing their cloud network service, which will apparently compete in the same space as amazon vpc
[2012-05-14 18:44:02 -0400] bencaron: the web_app definition parameter, no conversion?
[2012-05-14 18:44:10 -0400] josephholsten: bencaron: congrats, you found a bug!
[2012-05-14 18:44:44 -0400] bencaron: hehe. :)
[2012-05-14 18:44:53 -0400] UForgotten: josephholsten: what about me? did I find a bug? :(
[2012-05-14 18:45:02 -0400] yfeldblum: hoover_damm, based on the OpenStack Quantum project
[2012-05-14 18:45:18 -0400] bencaron: Looks I now need to phrase it correctly :)
[2012-05-14 18:45:19 -0400] josephholsten: UForgotten: it's definitely disturbing, but I'm not quite sure.
[2012-05-14 18:46:25 -0400] josephholsten: UForgotten: could you toss a `raise node['fqdn']` inside the cookbook? just to quadruple check that we're using the right host- suffix?
[2012-05-14 18:46:57 -0400] UForgotten: josephholsten: in the recipe or the definition ?
[2012-05-14 18:47:21 -0400] josephholsten: either? I hope it doesn't matter
[2012-05-14 18:47:41 -0400] UForgotten: josephholsten: I think its more like the stuff around line 765  in the file you github'd earlier
[2012-05-14 18:47:48 -0400] UForgotten: I'll put the raise in
[2012-05-14 18:48:06 -0400] UForgotten: interesting that platform worked
[2012-05-14 18:48:22 -0400] josephholsten: bencaron: do you know your way around entering bugs in tickets.opscode.com?
[2012-05-14 18:48:36 -0400] bencaron: I guess I can figure out
[2012-05-14 18:48:51 -0400] bencaron: I more anxious  about writing an intelligible ticket ;)
[2012-05-14 18:49:54 -0400] UForgotten: ah geez
[2012-05-14 18:50:00 -0400] UForgotten: so it literally causes an exception
[2012-05-14 18:50:14 -0400] UForgotten: gotta take those out hehe
[2012-05-14 18:50:35 -0400] josephholsten: something along the lines of 'apache2's web_app definition shouldn't use symbol keys in @params' should get the point across
[2012-05-14 18:50:55 -0400] hoover_damm: yfeldblum, honestly comparing rackspace to amazon makes me lul
[2012-05-14 18:51:35 -0400] hoover_damm: the two products are so different, and they are seeking different end-users even
[2012-05-14 18:51:45 -0400] bencaron: josephholsten: k, thx for the phrasing, sounds like it
[2012-05-14 18:53:11 -0400] UForgotten: we're using the correct syntax
[2012-05-14 18:53:25 -0400] UForgotten: its just not loading the host-match.local template.
[2012-05-14 18:56:48 -0400] josephholsten: just to confirm, it's in the equivalent of: `apache2/templates/host-match.local/site.conf.erb` ?
[2012-05-14 18:57:18 -0400] UForgotten: josephholsten: https://github.com/opscode/chef/commit/ddb8ced9aa32d96b62f53b11e626c374dd5edf13 anything look wrong with that to you?
[2012-05-14 18:57:57 -0400] UForgotten: josephholsten: yes, it loads templates/centos-5.4/1.erb but not host-match.local/1.erb over templates/default/1.erb
[2012-05-14 18:58:16 -0400] UForgotten: to be more precise its 01_ssh.erb
[2012-05-14 18:58:40 -0400] UForgotten: the _'s hopefully aren't throwing it, could never understand how the _ abstraction was working in chef
[2012-05-14 19:00:05 -0400] josephholsten: if you're feeling ambitious, you could always debug at that point in chef-client
[2012-05-14 19:00:36 -0400] UForgotten: keep in mind, using chef-solo here
[2012-05-14 19:00:40 -0400] josephholsten: (I'd just edit that file in the gem and raise search_path)
[2012-05-14 19:01:04 -0400] josephholsten: s/client/solo/
[2012-05-14 19:01:17 -0400] UForgotten: hmm. I could do that but will raise properly dump the array in a human readable format?
[2012-05-14 19:01:34 -0400] josephholsten: search_path.inspect
[2012-05-14 19:02:40 -0400] josephholsten: oh, at this point: don't be on production machines, i am not a lawyer, listening to me _will_ cause your machine to explode
[2012-05-14 19:02:53 -0400] josephholsten: ; )
[2012-05-14 19:03:21 -0400] UForgotten: don't worry this is a vagrant box I'm mucking with hence the match.local fqdn
[2012-05-14 19:03:33 -0400] UForgotten: I can't do shit in production until I can get these host-specific templates working :)
[2012-05-14 19:04:50 -0400] lusis: does the node name match the template directory?
[2012-05-14 19:05:11 -0400] UForgotten: lusis: yes, verified that
[2012-05-14 19:05:23 -0400] josephholsten: lusis: yep, it's the same as node['fqdn'] verified at runtime
[2012-05-14 19:05:27 -0400] lusis: k
[2012-05-14 19:05:43 -0400] UForgotten: aha
[2012-05-14 19:05:50 -0400] UForgotten: this is chef 0.10.4
[2012-05-14 19:05:57 -0400] UForgotten: that code isn't even in there yet
[2012-05-14 19:06:01 -0400] josephholsten: lol!
[2012-05-14 19:06:02 -0400] lusis: that would be why
[2012-05-14 19:06:11 -0400] lusis: possibly
[2012-05-14 19:06:15 -0400] lusis: that patch is 8 months old
[2012-05-14 19:06:18 -0400] UForgotten: so it was just broke ass cabbage before?
[2012-05-14 19:06:35 -0400] lusis: possibly
[2012-05-14 19:06:49 -0400] lusis: you're the first person I've talked to using hostname specificity
[2012-05-14 19:07:02 -0400] lusis: Myself, I avoid snowflakes
[2012-05-14 19:07:16 -0400] lusis: so it might have been a fairly unexercised code path
[2012-05-14 19:07:53 -0400] ashb: i've used hostname specific templates before
[2012-05-14 19:07:59 -0400] UForgotten: Seems odd that the functionality would be offered and not used
[2012-05-14 19:08:10 -0400] UForgotten: I would think it a common application
[2012-05-14 19:08:22 -0400] ashb: i was only using it for testing changes, but it did work
[2012-05-14 19:08:23 -0400] UForgotten: instead of doing a crapton of conditionals in your templates
[2012-05-14 19:08:27 -0400] lusis: Maybe. Like I said, I don't do snowflakes if I can help it
[2012-05-14 19:08:41 -0400] lusis: again this might have only affected hostname specificity
[2012-05-14 19:08:41 -0400] UForgotten: so how do you do host-specific template changes? conditionals?
[2012-05-14 19:08:59 -0400] ashb: define things on the node with sane defaults
[2012-05-14 19:09:01 -0400] lusis: why would you have host specific template changes? I leverage databases and attributes
[2012-05-14 19:09:06 -0400] lusis: and that
[2012-05-14 19:09:06 -0400] josephholsten: snowflake == one-off host configuration
[2012-05-14 19:09:10 -0400] lusis: sane default attributes
[2012-05-14 19:09:24 -0400] lusis: er databags
[2012-05-14 19:09:28 -0400] lusis: s/databases/databags
[2012-05-14 19:09:42 -0400] lusis: I know folks have used PLATFORM specificity before
[2012-05-14 19:09:51 -0400] lusis: but fqdn, I've never done it
[2012-05-14 19:10:31 -0400] ashb: we're talking about templates/host-foo/a.erb here, yes?
[2012-05-14 19:10:35 -0400] lusis: yeah
[2012-05-14 19:10:43 -0400] lusis: at least as I read the problem
[2012-05-14 19:10:48 -0400] ashb: yeah that def worked for me 4 or so months ago
[2012-05-14 19:11:36 -0400] UForgotten: it may work with the new chef code
[2012-05-14 19:11:44 -0400] UForgotten: I'm trying to debug now
[2012-05-14 19:11:56 -0400] ashb: UForgotten: what does `ohai fqdn` show btw?
[2012-05-14 19:12:20 -0400] UForgotten: ashb: the correct thing.  we already went through it but thanks for playing ;)
[2012-05-14 19:12:26 -0400] ashb: ah cool
[2012-05-14 19:15:30 -0400] UForgotten: ok so its a bug in 0.10.4
[2012-05-14 19:16:10 -0400] UForgotten: er
[2012-05-14 19:16:21 -0400] UForgotten: hmm.  curiouser and curiouser
[2012-05-14 19:17:08 -0400] UForgotten: is there a way to log instead of raise from inside that cookbook_version code?
[2012-05-14 19:19:14 -0400] UForgotten: nevermind, I think I got it
[2012-05-14 19:22:24 -0400] UForgotten: managed to get the core code to log this: Path List is ["templates/host-match.local/01_ssh.erb", "templates/centos-5.4/01_ssh.erb", "templates/centos/01_ssh.erb", "templates/default/01_ssh.erb"]
[2012-05-14 19:23:07 -0400] UForgotten: that is what I would expect.  but templates/host-match.local/01_ssh.erb does NOT override the centos-5.4 or the templates/default.  centos-5.4 DOES override default.
[2012-05-14 19:23:31 -0400] UForgotten: but, given that this is old chef code, its a moot point. may have to upgrade and try again
[2012-05-14 19:25:20 -0400] UForgotten: oh. derp.
[2012-05-14 19:25:40 -0400] UForgotten: id10t error
[2012-05-14 19:25:56 -0400] UForgotten: but at least I learned some useful debugging!
[2012-05-14 19:29:58 -0400] jespada: Guys, the omnibus installer which is used with knife  bootstrap, came with chef 0.10.8, why not with 0.10.10 ?
[2012-05-14 19:36:35 -0400] ssd7_: jespada: Thanks.  Looks like the install.sh script that the omnibus installer uses wasn't updated for the newest version.  I'm not sure if that was by design or not, I'll look into it.
[2012-05-14 19:37:26 -0400] jespada: ssd7_, np, lemme know if you want me to file a bug, thanks
[2012-05-14 19:50:50 -0400] dkingofpa: What's the best way to set a variable in php.ini via the php cookbook?  Without actually forking the opscode php cookbook and implementing the proposed solution in http://tickets.opscode.com/browse/COOK-543
[2012-05-14 19:55:34 -0400] mhalligan: my chef server just reooted now when I run rake install, I get ERROR: Server returned error for http://ipaddr:4000/roles/myrole
[2012-05-14 19:55:34 -0400] mhalligan: I
[2012-05-14 19:55:34 -0400] mhalligan: 'v
[2012-05-14 19:55:35 -0400] mhalligan: e
[2012-05-14 19:55:35 -0400] mhalligan: chec
[2012-05-14 19:55:35 -0400] mhalligan: ke
[2012-05-14 19:55:35 -0400] mhalligan: d
[2012-05-14 19:55:41 -0400] mhalligan: (wow that was weird)
[2012-05-14 19:55:50 -0400] mhalligan: I've checked t hat the server, solr, and the expander are running. any other thoughts?
[2012-05-14 19:56:49 -0400] id1: how can chef-client skip resource due not_if/only_if if there's no not_if/only_if defined for resource in recipe?
[2012-05-14 19:57:34 -0400] ssd7_: id1: I'm not sure I understand what you are asking.
[2012-05-14 19:58:24 -0400] id1: [Mon, 14 May 2012 19:50:47 +0000] DEBUG: Processing ganglia_cluster[monitoring] on ops
[2012-05-14 19:58:24 -0400] id1: [Mon, 14 May 2012 19:50:47 +0000] INFO: Processing ganglia_cluster[monitoring] action define (ganglia::gmetad line 18)
[2012-05-14 19:58:24 -0400] id1: [Mon, 14 May 2012 19:50:47 +0000] DEBUG: Skipping ganglia_cluster[monitoring] due to only_if ruby block
[2012-05-14 19:58:43 -0400] id1: ganglia_cluster 'monitoring' do
[2012-05-14 19:58:43 -0400] id1:   action :define
[2012-05-14 19:58:44 -0400] id1:   gmond_port_udp 1234
[2012-05-14 19:58:44 -0400] id1:   gmond_port_tcp  1235
[2012-05-14 19:58:44 -0400] id1:   calculate_plugins true
[2012-05-14 19:58:44 -0400] id1: end
[2012-05-14 19:58:56 -0400] id1: that's the resource in the recipe and that's the log for the recipe being applied
[2012-05-14 19:59:10 -0400] id1: there's no only_if specified for ganglia_cluster 'monitoring'
[2012-05-14 19:59:28 -0400] id1: why chef-client skips the resource?
[2012-05-14 19:59:41 -0400] id1: (ganglia_cluster is LWRP)
[2012-05-14 20:00:09 -0400] id1: @ssd7_ ^
[2012-05-14 20:01:56 -0400] ssd7_: id1: Is there somewhere that the code for the LWRP is posted (please don't past it here)?
[2012-05-14 20:02:10 -0400] id1: nope
[2012-05-14 20:02:17 -0400] id1: it doesn't do anything special
[2012-05-14 20:02:23 -0400] id1: defines some attributes
[2012-05-14 20:02:58 -0400] gswallow1: http://pastebin.com/nkVQcgG5
[2012-05-14 20:03:08 -0400] gswallow1: that can't be.  is there a better way?
[2012-05-14 20:05:06 -0400] jperry2: so we are using chef-minitest-handler but the recipes we are testing use aws api to mount an ebs block, any suggestions on how to test that locally
[2012-05-14 20:05:12 -0400] jperry2: without involving aws
[2012-05-14 20:05:31 -0400] jperry2: is it okay add a block to not perform that piece when testing locally?
[2012-05-14 20:05:41 -0400] jperry2: anyone else run into this type of issue?
[2012-05-14 20:05:56 -0400] mhalligan: ah. dns issue.
[2012-05-14 20:07:02 -0400] ssd7_: id1: What version of Chef are you using?
[2012-05-14 20:07:45 -0400] id1: @ssd7_: one of the latest, 0.10.8 or 0.10.9 i think
[2012-05-14 20:09:07 -0400] id1: @ssd7_: i'm trying 0.10.10 now
[2012-05-14 20:10:36 -0400] ssd7_: I think the earliest you could have been using is 0.10.4, unless I was overlooking something.
[2012-05-14 20:11:10 -0400] id1: nope, it was 0.10.8, i just checked before updating the gem
[2012-05-14 20:12:17 -0400] ssd7_: hrm
[2012-05-14 20:13:33 -0400] ssd7_: ahh, I see now
[2012-05-14 20:17:37 -0400] id1: what's that you see?
[2012-05-14 20:19:01 -0400] ssd7_: id1: Oh, just how I was wrong about the version you were using.  Does your LWRP have an only_if block in a resource it uses perhaps?
[2012-05-14 20:19:49 -0400] id1: @ssd7_: nope. funny though - i installed 0.10.10 and it seems to work
[2012-05-14 20:26:53 -0400] motiejus: I get an error while executing a recipe (trying to strip a nil variable), and trying to print that variable in the recipe like this: Chef::Log.info "Trying to install this thing: #{pip}". Right after this line comes the error message. However, I cannot see this line printed when I invoke chef, however, lines around it with info log level are visible. What am I doing wrong?
[2012-05-14 20:28:49 -0400] motiejus: here is the relevant code (11 lines of code) and the full error message: http://paste.ubuntu.com/987842/
[2012-05-14 20:29:30 -0400] motiejus: any help appreciated :)
[2012-05-14 20:32:54 -0400] ssd7_: motiejus: That log message happens at "compile" time so it is likely to occur further up in the log
[2012-05-14 20:33:00 -0400] motiejus: ah, now I see it's above
[2012-05-14 20:33:03 -0400] motiejus: ssd7_: you are right
[2012-05-14 20:33:11 -0400] motiejus: so I have no idea why that variable is empty at that time
[2012-05-14 20:33:37 -0400] motiejus: and the info message shows the names properly (they are not null)
[2012-05-14 20:33:42 -0400] id1:  /home/ubuntu/confrepo/cookbooks/python/providers/pip.rb:128:in `current_installed_version'
[2012-05-14 20:33:44 -0400] motiejus: nil, sorry ;)
[2012-05-14 20:33:48 -0400] id1: your stip is most likely there
[2012-05-14 20:34:25 -0400] motiejus: yes, thanks. I don't imagine how I missed it.
[2012-05-14 20:39:56 -0400] miah: sup
[2012-05-14 20:48:28 -0400] ellisera: hey guys, we're using chef solo on AWS, so every time we spin up a new test instance, we have a script that apt-gets chef solo. 0.10.10 came out on friday, and since then none of our tests are working, even on branches that haven't been touched and are working fine since april. Now I know you're supposed to apt-get a 'version-0.10 main', but I was wondering if there was a way of specifying 0.10.08 instead of 0.10.10  (sorry if this sounds
[2012-05-14 20:48:29 -0400] ellisera: like a basic question, I'm new to chef)
[2012-05-14 20:51:15 -0400] mlei: ellisera: looks like 10.8 is still in the repo,
[2012-05-14 20:51:31 -0400] mlei: so you can do apt-get chef=0.10.8
[2012-05-14 20:51:53 -0400] geekbri: might want to download that package incase it vanishes if you are hard dependent on it though
[2012-05-14 20:52:13 -0400] ssd7_: ellisera: If you tests failing constitute regressions, you might also want to file some bugs at tickets.opscode.com
[2012-05-14 20:52:19 -0400] valdezjoelt: help
[2012-05-14 20:52:58 -0400] ssd7_: valdezjoelt: ?
[2012-05-14 20:53:04 -0400] ellisera: mlei: here's what I have in my script (and it's still not working)  echo "deb http://apt.opscode.com/ `lsb_release -cs`-0.10.08 main" | sudo tee /etc/apt/sources.list.d/opscode.list
[2012-05-14 20:53:14 -0400] valdezjoelt: i'm trying to bootstrap knife bootstrap -x root -P mypassword  --bootstrap-version 0.10.8  -r 'recipe[chef-client::config],recipe[chef-client::service]' -d linux-omnibus 192.168.128.112
[2012-05-14 20:53:42 -0400] valdezjoelt: i get this error : [Mon, 14 May 2012 20:50:06 +0000] INFO: Client key /etc/chef/client.pem is not present - registering
[2012-05-14 20:54:23 -0400] ellisera: mlei: I get a 404 not found on that package
[2012-05-14 20:54:36 -0400] mlei: ellisera: 0.10.08 isn't in the dists directory (browse to apt.opscode.com to see what i mean), so you'll have to use -0.10
[2012-05-14 20:54:40 -0400] ssd7_: valdezjoelt: That isn't an error.  That is expected the first time you bootstrap a node.  If there are further error after that can you paste it to a pastebin or gist?
[2012-05-14 20:54:54 -0400] mlei: and then change your actual apt-get command to: apt-get install chef=0.10.8
[2012-05-14 20:55:33 -0400] ellisera: mlei: thanks! I'll try that now
[2012-05-14 20:55:37 -0400] mlei: that will tell it you want 0.10.8 (no leading zero, btw) instead of latest.
[2012-05-14 20:55:55 -0400] shuvo: mlei, if I was using gems to install chef, can I do "gem install chef=0.10.8" to enforce installing that specific version? is that the correct syntax as well?
[2012-05-14 20:56:31 -0400] mlei: shuvo: i think it's gem install -v VERSION packagename
[2012-05-14 20:56:40 -0400] mlei: but don't quote me on that
[2012-05-14 20:56:51 -0400] shuvo: "gem install -v 0.10.8 chef" then
[2012-05-14 20:57:22 -0400] mlei: yeah, worth a try, but not sure if the old version of the gem is still on server or not.
[2012-05-14 20:57:29 -0400] shuvo: thanks mlei :-)
[2012-05-14 20:58:04 -0400] shuvo: mlei, could I have gem install froma  local file like I can using 'dpkg -i' for local .deb?
[2012-05-14 20:58:31 -0400] shuvo: (in case old version of the gem is not on server)
[2012-05-14 20:58:37 -0400] mlei: yes, gem install local-file-name.gem
[2012-05-14 20:58:45 -0400] shuvo: that simple. hmm
[2012-05-14 20:59:18 -0400] valdezjoelt: hi mlei where is that pastebin ? sorry i'm new to chef but this is the succeeding error : 192.168.128.112 [Mon, 14 May 2012 20:50:06 +0000] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out 192.168.128.112 [Mon, 14 May 2012 20:50:06 +0000] FATAL: SocketError: Error connecting to http://chefserver.local:4000/clients - getaddrinfo: Name or service not known
[2012-05-14 20:59:59 -0400] mlei: valdezjoelt: i think it was ssd7_ you were talking to (: but that error looks like chefserver.local isn't resolvable
[2012-05-14 21:00:11 -0400] shuvo: valdezjoelt, can you ping chefserver.local from 192.168.128.112?
[2012-05-14 21:00:17 -0400] mlei: pastebin.org, pastebin.com or gist.github.com
[2012-05-14 21:02:09 -0400] valdezjoelt: @mlei : yeah you're right : i can't ping
[2012-05-14 21:03:10 -0400] valdezjoelt: thanks mlei :)
[2012-05-14 21:07:26 -0400] ellisera: mlei: I did what you suggested and I got this error E: Version '0.10.8' for 'chef' was not found
[2012-05-14 21:08:41 -0400] mlei: ellisera: what release is it?
[2012-05-14 21:09:56 -0400] ellisera: mlei: we use ubuntu lucid on our test and production servers for now
[2012-05-14 21:11:18 -0400] mlei: hmm. it looks like the package is in the repo, but it's not listed anymore in Packages
[2012-05-14 21:12:00 -0400] mlei: you might have to download them and put them into a local repo
[2012-05-14 21:12:11 -0400] Aaton: trying to get an encrypted data bag to work based on the node name but failing. I want to match on the node name as what to use on a machine
[2012-05-14 21:12:13 -0400] mlei: they might already be on a box somewhere
[2012-05-14 21:12:26 -0400] mlei: in the apt cache
[2012-05-14 21:14:10 -0400] ellisera: mlei: thanks, I'll check and see what I can do in that direction
[2012-05-14 21:38:17 -0400] BryanWB: miah, is there a good stationery store anywhere near the bar tonight's event?
[2012-05-14 21:38:31 -0400] BryanWB: miah, i need to buy big sticky post-it notes for hackday
[2012-05-14 21:38:52 -0400] miah: lets see
[2012-05-14 21:40:18 -0400] miah: https://maps.google.com/maps?q=501+Folsom+St,+San+Francisco,+CA isn't far.
[2012-05-14 21:44:04 -0400] miah: BryanWB: could totally use your assitance debugging this cookbook. :/
[2012-05-14 21:44:13 -0400] BryanWB: miah, ark?
[2012-05-14 21:44:18 -0400] miah: 2012-05-14_21:43:21.87604 [Mon, 14 May 2012 21:43:21 +0000] ERROR: NoMethodError: ark[collectd] (collectd::_install_from_source line 42) had an error: NoMethodError: undefined method `new_resource' for Chef::Resource::Bash
[2012-05-14 21:44:18 -0400] BryanWB: miah, still fucked?
[2012-05-14 21:44:36 -0400] BryanWB: ok, miah i look, where da code?
[2012-05-14 21:44:55 -0400] miah: https://github.com/miah/chef-collectd/tree/refactor
[2012-05-14 21:46:05 -0400] miah: specifically: https://github.com/miah/chef-collectd/blob/refactor/recipes/_install_from_source.rb
[2012-05-14 21:46:09 -0400] miah: it hates me :(
[2012-05-14 21:46:55 -0400] BryanWB: miah, i'm on it
[2012-05-14 21:47:22 -0400] miah: awesomsauce
[2012-05-14 21:56:08 -0400] hoover_damm: feels nice to have a good idempotent recipe that just freaking works
[2012-05-14 22:01:56 -0400] mhalligan: hrm, is there a way to get a list of all the different values for an attribute? like server1 has cus_var="bob", and server2 has cus_var="george". I'd like to be able to have some code like all_vars = search(attributes, 'name:*')
[2012-05-14 22:22:28 -0400] BryanWB: miah, think i fixed it https://github.com/bryanwb/chef-ark/commit/f73d64ad1a6da68a209124fb40ba2eacf81d14b8
[2012-05-14 22:22:37 -0400] BryanWB: miah, had typo conifgure resource
[2012-05-14 22:23:53 -0400] miah: oh?
[2012-05-14 22:24:04 -0400] BryanWB: miah, yup stupid typo on my part
[2012-05-14 22:24:19 -0400] BryanWB: miah, i ran it w/ this Vagrant config w/ oneiric and seems to work https://github.com/bryanwb/chef-collectd/blob/refactor/Vagrantfile
[2012-05-14 22:24:26 -0400] miah: cool =)
[2012-05-14 22:24:31 -0400] BryanWB: miah, sorrh about that
[2012-05-14 22:25:10 -0400] miah: its ok!
[2012-05-14 22:35:04 -0400] BryanWB: miah,  does a successful ./configure always/usually create a config.status file?
[2012-05-14 22:35:31 -0400] miah: iirc
[2012-05-14 22:36:08 -0400] BryanWB: hmm, but make does not do the same, create an artifact to determine whether make has already been run successfully
[2012-05-14 22:36:26 -0400] miah: sure it does
[2012-05-14 22:36:50 -0400] miah: well. not in a 'standard' way. but your program will generally be compiled when its done =)
[2012-05-14 22:36:53 -0400] BryanWB: miah, but it is unique for every Makefile
[2012-05-14 22:36:56 -0400] miah: yes.
[2012-05-14 22:37:27 -0400] BryanWB: miah,  so i need to add   a make_creates   attribute, that avoids running make if that file already exists
[2012-05-14 22:37:32 -0400] miah: yup
[2012-05-14 22:40:00 -0400] AntonZ: Has anyone used this solution before ? http://ajmfulcher.blogspot.com/2011/04/ebs2s3-automated-backup-for-amazon-ebs.html
[2012-05-14 22:43:07 -0400] hoover_damm: neat
[2012-05-14 22:43:33 -0400] hoover_damm: AntonZ, I've seen worse solutions so at least it's a halfway decent idea
[2012-05-14 22:44:39 -0400] AntonZ: well, i havent installed it yet, but sounds like a lot better than some random scripts...
[2012-05-14 22:45:08 -0400] AntonZ: im surpised there was not invested more time in automated ebs snapshoting
[2012-05-14 22:47:16 -0400] oddityoverseer13: Hi all
[2012-05-14 22:47:58 -0400] oddityoverseer13: How would you guys recommend managing /etc/sysconfig/iptables via chef? I was thinking about templates, but I'm not sure that would be the best approach
[2012-05-14 22:49:03 -0400] AntonZ: http://community.opscode.com/search?query=iptables&scope=cookbook
[2012-05-14 22:49:10 -0400] AntonZ: check it out, see what you like
[2012-05-14 22:49:10 -0400] hoover_damm: AntonZ, people really love snapshots actually.  It's just creating a volume from the snapshot and attaching it is more of a chore then some management preer
[2012-05-14 22:49:26 -0400] hoover_damm: prefer*
[2012-05-14 22:49:51 -0400] hoover_damm: snapshot your ebs root's and then boot up with a custom root volume on ec2 to clone environments
[2012-05-14 22:50:01 -0400] Cope: ohai
[2012-05-14 22:54:01 -0400] miah: hullo
[2012-05-14 22:55:32 -0400] raz: does chef have a mechanism baked in to group nodes into clusters?  i'm pondering to abuse environment for that
[2012-05-14 22:55:54 -0400] miah: elaborate?
[2012-05-14 22:56:10 -0400] raz: well, setting (default) attributes for groups of hosts
[2012-05-14 22:56:16 -0400] miah: roles
[2012-05-14 22:56:17 -0400] hoover_damm: raz, I abuse tags for that
[2012-05-14 22:56:48 -0400] miah: roles?
[2012-05-14 22:56:49 -0400] bawt: roles is http://wiki.opscode.com/display/chef/Roles or nestable. For example, every server type I manage has a few common reqs, so I have role[company-server], role[server-type-one], role[server-type-two], etc.
[2012-05-14 22:57:39 -0400] raz: hmm
[2012-05-14 22:58:12 -0400] hoover_damm: raz, well define clusters? production? staging?
[2012-05-14 22:58:38 -0400] raz: hoover_damm: hbase cluster, zookeeper cluster, rails app cluster, postgres cluster..
[2012-05-14 22:58:55 -0400] miah: those are roles
[2012-05-14 22:58:55 -0400] raz: they all share quite a few cookbooks
[2012-05-14 22:59:01 -0400] hoover_damm: they could be roles, or environments
[2012-05-14 22:59:09 -0400] hoover_damm: easily
[2012-05-14 22:59:17 -0400] miah: you can't define run_lists inside an environment. you can pin cookbook versions and set attributes though
[2012-05-14 22:59:20 -0400] hoover_damm: environments may feel more fitting due to the nature of the hadoop beast
[2012-05-14 22:59:26 -0400] raz: yea, thinking about it, environment is not really any more than a implicit role that always fires first?
[2012-05-14 22:59:42 -0400] raz: ah.. now i remember where i was stumped
[2012-05-14 23:00:19 -0400] raz: knife bootstrap takes a convenient -E argument
[2012-05-14 23:00:29 -0400] miah: yes, to specify an environment.
[2012-05-14 23:00:44 -0400] miah: you can also pass roles in the --run-list
[2012-05-14 23:00:46 -0400] raz: hrm. my mind is screwed from messing with ironfan.
[2012-05-14 23:00:53 -0400] excalq: So I'm looking for a 64-bit ubuntu-12.04 AMI. 1) Do AMIs have to be chef specific? Others I reference give an "invalid image error"
[2012-05-14 23:00:54 -0400] hoover_damm: you poor thing
[2012-05-14 23:01:04 -0400] raz: yes.. it seems you're right. i should just use roles for that.
[2012-05-14 23:01:05 -0400] hoover_damm: i fixed up the ironfan redis cookbook this morning
[2012-05-14 23:01:18 -0400] hoover_damm: to not have that metachef and intall_from_poo
[2012-05-14 23:01:54 -0400] raz: yea which reminds me, is there service discovery frameworks other than the ironfan trainwreck?
[2012-05-14 23:01:57 -0400] miah: https://github.com/cxinc/chef-redis
[2012-05-14 23:01:58 -0400] miah: :P
[2012-05-14 23:02:19 -0400] josephholsten: hoover_damm: you created a sane install resource and a discovery helper in mainline chef?
[2012-05-14 23:02:35 -0400] miah: josephholsten: chef-ark does that
[2012-05-14 23:02:45 -0400] miah: chef-ark is based on install_from
[2012-05-14 23:03:01 -0400] miah: https://github.com/bryanwb/chef-ark
[2012-05-14 23:03:19 -0400] miah: i'm using it to build/compile/install things
[2012-05-14 23:03:46 -0400] miah: eg https://github.com/miah/chef-collectd/blob/refactor/recipes/_install_from_source.rb
[2012-05-14 23:04:53 -0400] josephholsten: someone should update the homepage link here: http://community.opscode.com/cookbooks/ark
[2012-05-14 23:05:18 -0400] miah: update why? bryan _just_ released the updated version minutes ago =)
[2012-05-14 23:05:24 -0400] miah: i'm still testing/breaking
[2012-05-14 23:05:41 -0400] raz: oh thanks for that
[2012-05-14 23:05:44 -0400] josephholsten: oh, I mean so people know where the repo is
[2012-05-14 23:05:48 -0400] miah: ah
[2012-05-14 23:06:02 -0400] miah: i mostly ignore community.opscode.com and just search for cookbooks on github
[2012-05-14 23:06:08 -0400] raz: miah++
[2012-05-14 23:06:16 -0400] raz: the opscode cookbook page is terrible
[2012-05-14 23:06:32 -0400] miah: not to say that community.. is awful or something. its just i'm already in/on github.
[2012-05-14 23:06:59 -0400] valdezjoelt: hi miah, how to check if the node is a member of a role?
[2012-05-14 23:07:02 -0400] josephholsten: it's terrible, but it's kinda funny to expect newbies to dig through github for that stuff
[2012-05-14 23:07:14 -0400] Cope: raz: what is terrible about the opscode cookbook page? what could be improved?
[2012-05-14 23:07:15 -0400] miah: valdezjoelt: view the nodes role details.
[2012-05-14 23:07:33 -0400] raz: josephholsten: exposing newbies to the opscode crap is just cruel. just point them directly to google and github, where they end up anyway.
[2012-05-14 23:07:54 -0400] miah: i think that was misdirected
[2012-05-14 23:09:18 -0400] miah: compiling on t1.micro.. i should take a nap.
[2012-05-14 23:09:49 -0400] hoover_damm: that's like trying to skinny dip in the antartic with a 2 piece bikini
[2012-05-14 23:09:51 -0400] josephholsten: raz: it's kinda true. but I'd like to try and make the place better instead of tossing newbies in the deep end
[2012-05-14 23:09:57 -0400] hoover_damm: ^^ miah
[2012-05-14 23:10:05 -0400] shuvo: ironfan trainwreck?
[2012-05-14 23:10:30 -0400] raz: Cope: it's actually getting better, just looked at it again
[2012-05-14 23:10:33 -0400] miah: i wouldnt say ironfan is a trainwreck. but it is quite its own beast that rides ontop of chef.
[2012-05-14 23:10:39 -0400] josephholsten: shuvo: metachef, install_from, &c
[2012-05-14 23:10:54 -0400] josephholsten: miah: +!
[2012-05-14 23:10:58 -0400] josephholsten: +1
[2012-05-14 23:11:04 -0400] raz: having worked with it for the past week, i'll say with passion it is a trainwreck
[2012-05-14 23:11:30 -0400] raz: there are good ideas in it, but the impl is sketchy at best
[2012-05-14 23:11:36 -0400] josephholsten: but it is attempting to solve real problems
[2012-05-14 23:11:42 -0400] josephholsten: which I appreciate
[2012-05-14 23:11:46 -0400] shuvo: metachef helps me a lot and I would not call it a trainwreck. It has been a PIA  (lately you would have got messages from me how to add ohai plugins to conform to metachef assumptions) but I dind;t find something >= ironfan
[2012-05-14 23:12:14 -0400] raz: josephholsten: you hardly ever solve real problems by creating a huge, fragile, intertwingled monolith. you solve them by creating tiny building blocks that snap together.
[2012-05-14 23:12:22 -0400] raz: with the former approach you create only new problems
[2012-05-14 23:12:44 -0400] gsymons-di: Has anyone tried bootstrapping with the installer for windows? I'm not sure if I'm doing something wrong or if the 10.10 installer hasn't been released yet, but I keep getting 0.10.8.
[2012-05-14 23:12:52 -0400] raz: i have ironchef running here and *none* of their cookbooks work properly. not even the simplest ones (e.g. zookeeper).
[2012-05-14 23:12:53 -0400] josephholsten: I know, we'll solve it with regular expressions
[2012-05-14 23:13:27 -0400] raz: josephholsten: regex are great to slice your problem - then you have two :)
[2012-05-14 23:13:48 -0400] shuvo: raz, did you file issues on GH for the ironchef repo?
[2012-05-14 23:14:28 -0400] raz: shuvo: i frankly wouldn't know where to start. what works (sometimes) is the booting of ec2 instances. everything else has been randomly breaking.
[2012-05-14 23:14:58 -0400] raz: i spent like 5 days fixing it to the point where it would actually start a cluster (which it does now) and bootstrap it properly.
[2012-05-14 23:15:06 -0400] shuvo: raz, that is disconcerting. I am managing my flume and hadoop clusters using an older version and it "just works"
[2012-05-14 23:15:37 -0400] raz: shuvo: do you add/remove nodes from these clusters?
[2012-05-14 23:15:40 -0400] hoover_damm: shuvo, I was just using their redis cookbook with metachef and had it blow up for no reason recently
[2012-05-14 23:15:53 -0400] hoover_damm: gotta love metachef blowing up for no reason
[2012-05-14 23:16:17 -0400] shuvo: raz, I have indeed added/removed nodes from flume clusters without issue but not hadoop yet
[2012-05-14 23:16:51 -0400] shuvo: I am not happy with their code and will issue pull requests but what else do we have out there?
[2012-05-14 23:17:07 -0400] raz: shuvo: dunno, then i must be doing something wrong. for me it will do friggin' xfs resized on each chef-run.
[2012-05-14 23:17:11 -0400] raz: resizes
[2012-05-14 23:17:37 -0400] shuvo: the dashpot reports are useful
[2012-05-14 23:17:51 -0400] shuvo: .. for debuggin besides chef handlers
[2012-05-14 23:18:33 -0400] shuvo: I would love to contribute to something that had ironfan like functionality but "better" modular code
[2012-05-14 23:18:55 -0400] raz: yes, a discovery module might be a start
[2012-05-14 23:19:19 -0400] shuvo: hmm, I think I saw such a module on GH now that you mention
[2012-05-14 23:20:05 -0400] miah: https://github.com/fujin/chef-discovery
[2012-05-14 23:20:06 -0400] shuvo: but a discovery module is just a part; till then ironfan it is you see
[2012-05-14 23:20:22 -0400] shuvo: aha! miah, that one
[2012-05-14 23:20:45 -0400] miah: the silverware cookbook from ironfan is pretty neat though.
[2012-05-14 23:20:50 -0400] shuvo: ironfan also has an 'announces' attribute
[2012-05-14 23:20:54 -0400] miah: ya
[2012-05-14 23:20:57 -0400] raz: miah: hm yea. i'm not sure what the one you linked to is supposed to solve.
[2012-05-14 23:21:09 -0400] miah: raz: just simplify searching for node discovery.
[2012-05-14 23:21:38 -0400] raz: miah: yea, that's not very useful. it must be abstracted down to provides/requires, pretty much like silverware does it.
[2012-05-14 23:21:52 -0400] raz: except that i shiver thinking about trying to rip out silverware and use it standalone
[2012-05-14 23:22:01 -0400] shuvo: using metachef I can do "discover <realm->rsyslog-master". Now how would that discovery module help me
[2012-05-14 23:22:08 -0400] Cope: raz: I'm glad it's getting better... but it would be really helpful to understand what you think is missing, and what needs to be improved
[2012-05-14 23:22:20 -0400] shuvo: Cope, +1
[2012-05-14 23:23:32 -0400] miah: shuvo: its not as easy for sure. but you can search on roles. like i said. it just simplifies searching.
[2012-05-14 23:23:38 -0400] raz: Cope: it would help to see metadata. what it depends on, what files it touches.
[2012-05-14 23:23:41 -0400] miah: if you know how to write search's then you probably don't need it =)
[2012-05-14 23:24:43 -0400] raz: but admittedly that's nowhere near the most pressing problems
[2012-05-14 23:24:51 -0400] hoover_damm: silverware is ironfan
[2012-05-14 23:24:55 -0400] hoover_damm: and is nasty
[2012-05-14 23:24:55 -0400] raz: the average cookbook quality would be the real problem..
[2012-05-14 23:25:00 -0400] hoover_damm: s/ironfan/metachef
[2012-05-14 23:25:05 -0400] shuvo: miah, here's my take on it: if there's a community supported module for something, I would rather not duplicate their efforts, *even* if I could do it myself
[2012-05-14 23:25:15 -0400] hoover_damm: I realize the average chef user wouldn't be disgusted that a chef cookbook modified their $LOAD_PATH
[2012-05-14 23:25:18 -0400] hoover_damm: but they should
[2012-05-14 23:25:45 -0400] shuvo: this of course adds some version control complexity to it, but vendor cookbooks should help me around that
[2012-05-14 23:25:58 -0400] raz: the average chef user is disgusted when the tool that's supposed to make his life easier actually makes it harder..
[2012-05-14 23:26:35 -0400] hoover_damm: raz, the first step in making your life easier is to define your life.
[2012-05-14 23:26:43 -0400] hoover_damm: raz, do you know how hard that is on an average day?
[2012-05-14 23:26:48 -0400] Cope: raz: I'm not sure I'm seeing that the problems you describe are altered by using github instead of the community site; or am I misunderstanding?
[2012-05-14 23:26:52 -0400] raz: yes, about 0.5
[2012-05-14 23:27:08 -0400] raz: Cope: sorry, was replying to hoover ;)
[2012-05-14 23:27:11 -0400] Cope: ah!
[2012-05-14 23:27:38 -0400] hoover_damm: raz, I've done chef since it first came out and I totally understand why it's so hard.
[2012-05-14 23:27:44 -0400] josephholsten: github is great for distributing code, collaborating. finding a stable cookbook, not so much.
[2012-05-14 23:27:44 -0400] Cope: irc threading fail
[2012-05-14 23:27:45 -0400] raz: one thing that would really help was if opscode would empty their cookbook repository
[2012-05-14 23:27:52 -0400] hoover_damm: seriously
[2012-05-14 23:27:54 -0400] raz: and only take things back in that definitely work and meet a minimum quality standard
[2012-05-14 23:27:58 -0400] shuvo: whoa
[2012-05-14 23:28:10 -0400] hoover_damm: no I just meant to empty github.com/opscode/cookbooks
[2012-05-14 23:28:16 -0400] hoover_damm: as it's deprecated for github.com/opscode-cookbooks/
[2012-05-14 23:28:16 -0400] raz: stuff like chef-client being shipped broken is just not funny
[2012-05-14 23:28:39 -0400] shuvo: it's github people :-D not production version control
[2012-05-14 23:28:47 -0400] hoover_damm: there's been the long discussions about how opscode cookbooks are a constant work in progress and some vary from a excellent cookbook to a shiny turd
[2012-05-14 23:28:58 -0400] Cope: raz, so the opscode big repo is deprecated
[2012-05-14 23:29:11 -0400] hoover_damm: and the resolution is, you are free to write your own cookbooks that are better.  You are also free to contribute back your awesome changes
[2012-05-14 23:29:16 -0400] raz: Cope: their repo should be a source for cookbooks that definitely work and are rock solid
[2012-05-14 23:29:23 -0400] shuvo: hoover_damm, +1
[2012-05-14 23:29:29 -0400] raz: i have zero confidence in them by now
[2012-05-14 23:29:36 -0400] shuvo: raz, blog about it, send in issues
[2012-05-14 23:29:37 -0400] hoover_damm: bitching and expecting Opscode to make the cookbooks better really won't change anything
[2012-05-14 23:29:47 -0400] Cope: http://github.com/opscode-cookbooks is the place to use
[2012-05-14 23:29:55 -0400] raz: that's why i do it on irc ;)
[2012-05-14 23:29:56 -0400] hoover_damm: you need to properly express the problems in a ticket, in a way that can be solved
[2012-05-14 23:29:57 -0400] josephholsten: raz: did you ever use the early linux distros? they were a nightmare
[2012-05-14 23:29:58 -0400] hoover_damm: instead of raging
[2012-05-14 23:30:12 -0400] raz: hoover_damm: i tried it a few times. the responses ranged from "not interested" to "not a priority".
[2012-05-14 23:30:21 -0400] Cope: raz: so a big effort is underway - we're introducing testing for all cookbooks
[2012-05-14 23:30:25 -0400] hoover_damm: have you offered your services as a employee?
[2012-05-14 23:30:30 -0400] raz: i guess the issues i reported were too fundamental to be relevant
[2012-05-14 23:30:30 -0400] BryanWB: josephholsten, i just updated ark on the community site
[2012-05-14 23:30:38 -0400] hoover_damm: I know I have offered my services as an Opscode employee to fix their cookbooks
[2012-05-14 23:30:45 -0400] hoover_damm: they likely are not interested and that's cool
[2012-05-14 23:30:46 -0400] josephholsten: so you got lots of forks, and two big groups (debian and rh) who added a lot of process and were always behind
[2012-05-14 23:31:04 -0400] hoover_damm: but outside of working for Opscode, you can submit pull requests to help address the problems you have
[2012-05-14 23:31:38 -0400] Cope: raz: would you be able to show me a conversation in which you were told that fixing cookbooks was low priority, or 'not interested'?
[2012-05-14 23:31:56 -0400] Cope: raz: I'm not doubting you - but there's no way we should be saying that
[2012-05-14 23:32:22 -0400] raz: Cope: the ticket was about chef-client not using a lockfile
[2012-05-14 23:32:26 -0400] Cope: so if that was said to you, we should clear that up
[2012-05-14 23:32:49 -0400] raz: i can dig it up, but that sums it up. others reported it being broken, i followed up with why it is broken, some opscoder responded "not a priority"
[2012-05-14 23:32:52 -0400] raz: about cookbooks
[2012-05-14 23:32:53 -0400] raz: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/cron.rb#L42
[2012-05-14 23:32:58 -0400] raz: start by deleting line 42-49 from that
[2012-05-14 23:33:11 -0400] gsymons-di: Has anyone tried bootstrapping with the installer for windows? I'm not sure if I'm doing something wrong or if the 10.10 installer hasn't been released yet, but I keep getting 0.10.8.
[2012-05-14 23:33:49 -0400] miah: ya. that def causes some issues.
[2012-05-14 23:34:00 -0400] miah: i've corrected a similar issue in chef-server already
[2012-05-14 23:34:05 -0400] miah: but didnt get it done in chef-client
[2012-05-14 23:34:06 -0400] miah: =)
[2012-05-14 23:34:07 -0400] raz: it, for example, breaks the chef server...
[2012-05-14 23:34:19 -0400] miah: no. it breaks solr
[2012-05-14 23:34:28 -0400] raz: that too
[2012-05-14 23:34:33 -0400] josephholsten: yep, and there's an outstanding ticket
[2012-05-14 23:34:37 -0400] raz: but everything else can't write to those directories anymore either
[2012-05-14 23:34:40 -0400] miah: fwiw. the way you are discussing these issues is very confrontational
[2012-05-14 23:34:45 -0400] josephholsten: and miah and I have submitted patches for fixing it
[2012-05-14 23:34:47 -0400] miah: and that generally isn't going to lead to much productive discussion
[2012-05-14 23:34:58 -0400] raz: miah: yup that's how i roll.
[2012-05-14 23:35:27 -0400] miah: great. me too in general. but realize i don't work for opscode and i still would rather just submit patches to fix issues rather than bitching at people
[2012-05-14 23:35:32 -0400] raz: you can see me much less confrontative when it isn't about ridiculously fundamental issues going unfixed for years
[2012-05-14 23:35:40 -0400] miah: so fix them or stfu
[2012-05-14 23:35:42 -0400] miah: =)
[2012-05-14 23:35:45 -0400] raz: well i did
[2012-05-14 23:35:47 -0400] miah: small team is small
[2012-05-14 23:35:51 -0400] raz: i sent them patches :)
[2012-05-14 23:35:59 -0400] raz: but they have "no priority"
[2012-05-14 23:36:06 -0400] josephholsten: raz: have you signed the cla?
[2012-05-14 23:36:11 -0400] miah: so you're using this _one_ example?
[2012-05-14 23:36:14 -0400] raz: josephholsten: NO
[2012-05-14 23:36:25 -0400] josephholsten: then we don't want your patent bait
[2012-05-14 23:36:49 -0400] raz: yea. these one-liners, i'm gonna pull the oracle on you.
[2012-05-14 23:36:55 -0400] Cope: wow guys, chill
[2012-05-14 23:37:04 -0400] miah: =)
[2012-05-14 23:37:10 -0400] raz: i'm liking it :)
[2012-05-14 23:37:15 -0400] Cope: raz - if you can find the ticket, I will look it up
[2012-05-14 23:37:34 -0400] miah: raz: legal always makes businesses do stpuid bullshit. but opscode has made contributing code pretty damn simple.
[2012-05-14 23:37:40 -0400] raz: Cope: http://tickets.opscode.com/browse/CHEF-867
[2012-05-14 23:37:46 -0400] Cope: raz: thanks
[2012-05-14 23:38:03 -0400] miah: it seriously took me less than 2 minutes to sign up for my cla and i think less than 1 hour to recieve the email
[2012-05-14 23:38:16 -0400] raz: miah: not sure. i better not start on that, it'd end up very confrontative. ;)
[2012-05-14 23:38:30 -0400] miah: hah
[2012-05-14 23:38:36 -0400] Cope: raz: who are you on that ticket?
[2012-05-14 23:38:38 -0400] miah: are you in town for chefconf?
[2012-05-14 23:38:39 -0400] raz: i don't sign that stuff by principle, we can discuss that elsewhere if you really want
[2012-05-14 23:38:51 -0400] raz: Cope: the confrontative one
[2012-05-14 23:38:59 -0400] josephholsten: do you not include licenses in your code?
[2012-05-14 23:39:12 -0400] tmichael: hey guys, absent a cookbook version constrain in env, does node take the highest version cookbook or the latest update?
[2012-05-14 23:39:26 -0400] raz: josephholsten: for some reason almost all other projects make do without the cla-nonsense.
[2012-05-14 23:39:30 -0400] miah: tmichael: latest version
[2012-05-14 23:39:58 -0400] miah: 'all the other kids in the playground were doing it so it must be ok.'
[2012-05-14 23:40:03 -0400] tmichael: hrm.  thx miah. how can i confirm the version number running on  a node?  don't see in node data
[2012-05-14 23:40:15 -0400] miah: tmichael: knife cookbook show <cookbook>
[2012-05-14 23:40:20 -0400] miah: its going to be the latest version
[2012-05-14 23:40:26 -0400] miah: unless you're pinning in environment
[2012-05-14 23:40:51 -0400] josephholsten: right, and the rails core team stripped license notices from their code.
[2012-05-14 23:40:52 -0400] miah: so, if you have version 1.0.0 and version 1.0.1 and you update 1.0.0, you'll still get 1.0.1
[2012-05-14 23:40:54 -0400] tmichael: okay.  must be something else explaining why my updates disappeared.  will try to track it down.
[2012-05-14 23:40:57 -0400] hoover_damm: Cope, btw fixing the 'Cookbooks' is a very personal problem to an organization that doesn't have the same interests as the person complaining always
[2012-05-14 23:41:30 -0400] hoover_damm: Cope, that's how I feel at least.  I use Opscode as a example, and make what I want when they don't have enough to do what I want.
[2012-05-14 23:41:42 -0400] tmichael: my hypothesis has been disproved.  thx again miah
[2012-05-14 23:41:45 -0400] Cope: hoover_damm: i think that's the right approach
[2012-05-14 23:41:47 -0400] miah: noproblemo
[2012-05-14 23:42:19 -0400] miah: i use opscode cookbooks as examples. i submit pull requests for things.
[2012-05-14 23:42:22 -0400] hoover_damm: it's the only approach
[2012-05-14 23:42:32 -0400] miah: i also fork and rewrite =)
[2012-05-14 23:42:53 -0400] miah: which is more common now because i really hate 400 line long default.rb
[2012-05-14 23:43:11 -0400] hoover_damm: the problems that we create and we solve are often our own problem.  You cannot always expect someone elses cookbook to work for you as is
[2012-05-14 23:43:14 -0400] hoover_damm: and you shouldn't
[2012-05-14 23:43:20 -0400] miah: yup
[2012-05-14 23:43:24 -0400] raz: perhaps cookbooks could be externalized
[2012-05-14 23:43:28 -0400] miah: i try to make mine as flexible as possible
[2012-05-14 23:43:30 -0400] gsymons-di: raz: If you're unwilling to play by the rules set down by the community, you waive your right to bitch about the community.
[2012-05-14 23:43:34 -0400] terryjfundak: Can someone point me to the "Full Stack Chef installer" ---- i.e for workshop tommorrow....
[2012-05-14 23:43:41 -0400] hoover_damm: last time I was mentoring someone I actually suggested the pattern of reviewing cookbooks before using
[2012-05-14 23:43:44 -0400] miah: because making assumptions.. you know how that works
[2012-05-14 23:43:50 -0400] hoover_damm: lead to a lot of new cookbooks being made
[2012-05-14 23:43:51 -0400] Cope: terryjfundak: http://www.opscode.com/chef/install.sh
[2012-05-14 23:43:56 -0400] raz: gsymons-di: good luck trying to waive my bitching :)
[2012-05-14 23:44:06 -0400] gsymons-di: Or at least for anyone to pay any attention to it:)
[2012-05-14 23:44:21 -0400] raz: now that will work
[2012-05-14 23:45:11 -0400] terryjfundak: Cope: Thanx
[2012-05-14 23:45:39 -0400] miah: i think bitching is fine, so long as you do more than bitch
[2012-05-14 23:45:45 -0400] kallistec: raz: re: your comment about one-line patches. the thing is, that I'm not a code copyright lawyer, nor a patent attorney. If we say that some insubstantial patches can be merged without a CLA, then I'd need to be both of those things, in order to know where to draw the line
[2012-05-14 23:46:24 -0400] miah: oracle is suing google over 'hello world'
[2012-05-14 23:46:24 -0400] miah: =)
[2012-05-14 23:46:40 -0400] raz: kallistec: yea it's not against you, but whoever came up with that policy. but hey, if it's just me then ignore me. i have no idea how often you reject patches due to missing cla.
[2012-05-14 23:46:45 -0400] kallistec: further, just because the people involved in a certain patch are not hostile right now, doesn't mean that they won't get bought by patent trolls or the like
[2012-05-14 23:46:50 -0400] raz: if i'm the only one then you're not losing out on much
[2012-05-14 23:46:55 -0400] raz: my bitching is free, even without the cla :P
[2012-05-14 23:47:48 -0400] kallistec: we want people to be able to use Chef and build products on top of it long term without having to worry about shakedowns, so it feels like a reasonable compromise
[2012-05-14 23:47:58 -0400] hoover_damm: I've never understood what's so hard about signing the CLA
[2012-05-14 23:48:11 -0400] hoover_damm: people spend more time bitching about the CLA then it takes to sign it
[2012-05-14 23:48:21 -0400] hoover_damm: and then they complain to Opscode like they are the problem
[2012-05-14 23:48:30 -0400] hoover_damm: teeth hurt much?
[2012-05-14 23:50:08 -0400] raz: hoover_damm: i can contribute to the linux kernel by adding a single line "yes, i want, kthxbai"
[2012-05-14 23:51:05 -0400] gsymons-di: raz: And when you do, you have to gpg sign it with a verifiable email address to certify that you're not adding anything patent-encumbered.
[2012-05-14 23:51:08 -0400] raz: i don't even want to think about what i may or may not make myself liable to by signing half-baked legalise just to get a friggin' patch merged
[2012-05-14 23:51:24 -0400] gsymons-di: Or something like that... I forget the exact policy these days.
[2012-05-14 23:51:41 -0400] kallistec: raz: and how would a license being viral or non-viral affect the implied license on contributed patches, and what are some relevant cases for precedent?
[2012-05-14 23:51:46 -0400] raz: gsymons-di: nope
[2012-05-14 23:52:06 -0400] kallistec: the thing is, the law doesn't work the way engineers want it to work, it works the way it works
[2012-05-14 23:52:47 -0400] raz: i'll skip this discussion. you're not changing the policy either way and it'll only end in a flamewar.
[2012-05-14 23:53:24 -0400] raz: i'll just sneak any future patches in through a mole
[2012-05-14 23:54:11 -0400] shuvo: BryanWB_, on the topic of ironfan, if you pull in request, we can also add local JDK sources to https://github.com/infochimps-labs/ironfan/issues/119 ;-)
[2012-05-14 23:55:50 -0400] gsymons-di: raz: https://github.com/torvalds/linux/blob/master/Documentation/SubmittingPatches -- read item 12
[2012-05-14 23:56:42 -0400] bdha: People bitching about the Linux commit requirements seem to have forgotten about SCO.
[2012-05-14 23:56:48 -0400] bdha: Or just need to grow the fuck up when it comes to business.
[2012-05-14 23:56:54 -0400] raz: gsymons-di: read line 304
[2012-05-14 23:57:39 -0400] raz: also..  really. i put this pull request up on github, that patches your $bug in the most obvious trivial way. since i haven't signed your cla you are now forever blocked from patching the bug with code that looks remotely similar to mine.
[2012-05-14 23:57:49 -0400] raz: makes sense?  not to me

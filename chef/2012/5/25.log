[2012-05-25 00:00:03 -0400] josephholsten: omnibus is still in beta.
[2012-05-25 00:00:31 -0400] bemu: dyer: Sometimes I feel like the CentOS community hates CentOS. And Chef.
[2012-05-25 00:00:51 -0400] dyer: bemu can't argue w/ that ;)
[2012-05-25 00:00:55 -0400] hoover_damm: I don't really think Opscode or CentOS hate each other
[2012-05-25 00:01:00 -0400] hoover_damm: or anyway you put it
[2012-05-25 00:01:03 -0400] dyer: the first part at least
[2012-05-25 00:01:15 -0400] hoover_damm: Ubuntu is just the popular kid on the block
[2012-05-25 00:01:24 -0400] hoover_damm: every new devops kid is taught that Ubuntu is good food
[2012-05-25 00:01:42 -0400] hoover_damm: supporting the mass is not a bad idea
[2012-05-25 00:03:11 -0400] jessicab: dyer - once its installed, i believe you can just upgrade it with 'gem install chef' btw
[2012-05-25 00:03:44 -0400] miah: bemu: http://rubydoc.info/gems/fog/Fog/Storage/AWS/Real#get_bucket-instance_method
[2012-05-25 00:03:45 -0400] miah: ?
[2012-05-25 00:03:51 -0400] erikh: yo ucould even write a chef recipe to do it
[2012-05-25 00:03:51 -0400] jessicab: its just the omnibus part thats not released yet, the gem for centos is updated
[2012-05-25 00:03:56 -0400] erikh: gem_package "chef"
[2012-05-25 00:03:56 -0400] erikh: :P
[2012-05-25 00:05:32 -0400] hoover_damm: the gem for centos is updated
[2012-05-25 00:05:33 -0400] hoover_damm: LOL
[2012-05-25 00:08:44 -0400] hoover_damm: qhartman, I've done rpm, deb, freebsd, netbsd, gentoo, slackware, sls
[2012-05-25 00:08:50 -0400] hoover_damm: package management is a heartburn in general
[2012-05-25 00:09:13 -0400] jessicab: i know nothing about the build process, perhaps i missphrased that.. i just know the gem install works on centos to install 10.10 :P
[2012-05-25 00:09:49 -0400] josephholsten: wha no ips? no sVr4? racism!
[2012-05-25 00:09:50 -0400] holoway: dyer: we like CentOS
[2012-05-25 00:09:54 -0400] josephholsten: ; )
[2012-05-25 00:09:56 -0400] hoover_damm: jessicab, you got the basic meaning right :)
[2012-05-25 00:09:56 -0400] holoway: by we I mean me
[2012-05-25 00:10:05 -0400] hoover_damm: sorry for the nitpick
[2012-05-25 00:10:07 -0400] holoway: we are working on getting the 10.10 omnibus packages out the door
[2012-05-25 00:10:11 -0400] dyer: holoway, I don't believe u  :P
[2012-05-25 00:10:16 -0400] dyer: ok, maybe I believe you now :P
[2012-05-25 00:10:29 -0400] holoway: we switched build systems, and have been working on getting the CI system stamping out the builds
[2012-05-25 00:10:35 -0400] dyer: ah, I C
[2012-05-25 00:10:42 -0400] holoway: and we just don't want to ship artifacts that aren't generated by the long term process
[2012-05-25 00:10:45 -0400] holoway: so that this is never a thing again
[2012-05-25 00:11:22 -0400] holoway: but the matrix is large: ubuntu, debian, centos, solaris, mac at least at first, followed by freebsd and others
[2012-05-25 00:11:34 -0400] josephholsten: automating away drama ftw
[2012-05-25 00:11:47 -0400] holoway: I really wanted it to get done before chefconf (which would have gotten it out ~10.10) but got hit by the plague
[2012-05-25 00:11:56 -0400] holoway: we now have a bunch of folks parallelized on it
[2012-05-25 00:11:59 -0400] holoway: so it'll get done
[2012-05-25 00:12:03 -0400] bemu: miah: That's  just the size of the bucket. I need to know the size of various 'folders' beneath the bucket.
[2012-05-25 00:12:09 -0400] holoway: my biggest motivator for omnibus was *not* hating centos
[2012-05-25 00:12:22 -0400] holoway: okay
[2012-05-25 00:12:27 -0400] holoway: gotta go pick up my daughter from daycare
[2012-05-25 00:15:03 -0400] hoover_damm: el5/el6 has always been bad about ruby.  But there's a rpm spec for ruby 1.9.1 on el
[2012-05-25 00:23:18 -0400] miah: bemu, can't you also perform that same queiry on subpaths inside the bucket?
[2012-05-25 00:24:13 -0400] bemu: ah, you might be right :)
[2012-05-25 00:58:08 -0400] lledet: is there a way to have remote_directory rename all files with a preceding dot?
[2012-05-25 00:58:21 -0400] lledet: knife-solo won't sync dot files and i'm trying to manage /etc/skel with chef
[2012-05-25 01:28:57 -0400] dyer: Are libraries handled differently in Chef 10.10 ? For some reason Chef 10.10 is now complaining about some dependencies, but this worked fine in 10.8
[2012-05-25 01:31:31 -0400] iroller: Ohai Chefs. Anybody has an idea why Chef::Node.dup/clone doesn't work? I'm creating a node from a json file with 'n = JSON.parse("{name:... "json_class": "Chef::Node"}")', then 'new_node = n.dup'; and 'new_node.delete(key)' deletes key from new_node AND n
[2012-05-25 01:44:29 -0400] dyer: ah, nm, I figured it out
[2012-05-25 01:54:31 -0400] hoover_damm: iroller, Chef::Node.new and then load your data into that?
[2012-05-25 01:56:04 -0400] hoover_damm: bob=Chef::Node.new("bob")
[2012-05-25 01:56:13 -0400] hoover_damm: json_data=JSON.parse(File.read("something.json"))
[2012-05-25 01:56:20 -0400] hoover_damm: json_data << bob
[2012-05-25 02:00:50 -0400] iroller: hoover_damn: yeah, already figured this out, thanks
[2012-05-25 02:09:37 -0400] hoover_damm: cool
[2012-05-25 04:21:28 -0400] miah: herp
[2012-05-25 05:46:34 -0400] jayjaygoes: Hi gents
[2012-05-25 05:47:06 -0400] jayjaygoes: I'm using the mount resource to mount a NFS volume... and it works great.
[2012-05-25 05:47:20 -0400] jayjaygoes: however, there could be a case where the NFS server dies
[2012-05-25 05:47:47 -0400] jayjaygoes: so I've added a step that tries to do an un-mount before the mount
[2012-05-25 05:48:03 -0400] jayjaygoes: that way, it will lazily unmount the previous server
[2012-05-25 05:48:15 -0400] jayjaygoes: and by doing a search, will find the new, correct server to mount
[2012-05-25 05:48:34 -0400] jayjaygoes: the problem, is that the first un-mount fails
[2012-05-25 05:48:41 -0400] jayjaygoes: because it's never been mounted
[2012-05-25 05:48:46 -0400] jayjaygoes: so my chef-client run fails
[2012-05-25 05:49:02 -0400] jayjaygoes: i need a 'only_if'
[2012-05-25 05:49:17 -0400] jayjaygoes: that will qualify whether the umount should run at all
[2012-05-25 05:49:26 -0400] jayjaygoes: so my question is, can i do the following:
[2012-05-25 05:49:46 -0400] jayjaygoes: only if "mount | grep /mounted_file_system"
[2012-05-25 05:49:48 -0400] bdha: Use ohai (node[filesystem][...]) to look at the filesystem table to see if your filesystem is mounted.
[2012-05-25 05:49:56 -0400] bdha: But exec'ing out works too.
[2012-05-25 05:58:27 -0400] jayjaygoes: so I can't really check node[filesystem][...]
[2012-05-25 05:58:45 -0400] jayjaygoes: because i don't know the hostname/IP of the device exporting the volume
[2012-05-25 05:58:47 -0400] jayjaygoes: and it will change
[2012-05-25 06:14:18 -0400] mohits: Hello folks
[2012-05-25 07:02:31 -0400] BryanWB_: ohai chefs!
[2012-05-25 07:05:09 -0400] alex88: does package provider run an apt-get update before installing?
[2012-05-25 07:05:13 -0400] alex88: hi BryanWB_
[2012-05-25 07:06:09 -0400] _frank: alex88: no
[2012-05-25 07:07:15 -0400] sfritz: Hi folks
[2012-05-25 07:07:40 -0400] alex88: ty _frank
[2012-05-25 07:07:56 -0400] sfritz: Is it possible to use the package provider on a debian system an pin the package to a specific installation tree?
[2012-05-25 07:08:23 -0400] sfritz: My system is running stable but some packages should be installed from testing
[2012-05-25 07:09:20 -0400] sfritz: I already tried to pass it with options as "-t testing" but this does not work since chef determines the installable version first
[2012-05-25 07:09:39 -0400] sfritz: and then calls apt-get install already with a fixed version number
[2012-05-25 11:38:37 -0400] mgalkiewicz_: Hi. I have a problem with index rebuild. Knife shows that everything was successful but nothing appears in expander log (log_level debug).
[2012-05-25 11:40:41 -0400] mgalkiewicz_: search does not return any nodes
[2012-05-25 13:08:39 -0400] behemphi: Hey all, I am using Hosted Chef.  I have my env set to use cookbooks of the version 2.3.10, I have the version in the chef_environment set to 2.3.10 and I run the chef client.
[2012-05-25 13:09:09 -0400] behemphi: But when I look on the machine in /var/chef/cache/cookbooks/base/metadata.rb
[2012-05-25 13:09:14 -0400] behemphi: the version is still 2.3.7
[2012-05-25 13:09:34 -0400] behemphi: and changes have _not_ been applied (i.e. the 2.3.10 cookbook did not run)
[2012-05-25 13:10:04 -0400] behemphi: I have seen this a couple of times before, but it has cleared up over time.
[2012-05-25 13:10:10 -0400] BryanWB_: behemphi: did u upload 2.3.10?
[2012-05-25 13:10:18 -0400] BryanWB_: behemphi: i oftent forget that step
[2012-05-25 13:10:26 -0400] behemphi: LOL, thx Bry but yes I did ...
[2012-05-25 13:10:29 -0400] behemphi: this time :-)
[2012-05-25 13:10:39 -0400] behemphi: (I feel your pain bro)
[2012-05-25 13:11:22 -0400] BryanWB_: when u do   $ knife cookbook show <your_cookbook>    does 2.3.10 show up?
[2012-05-25 13:11:43 -0400] behemphi: boyd ~/projects/easy-button 08:07:11 > knife cookbook show base
[2012-05-25 13:11:43 -0400] behemphi: base   2.3.10
[2012-05-25 13:12:50 -0400] BryanWB_: up upload 2.3.10 recently?
[2012-05-25 13:13:04 -0400] behemphi: about 20 min ago
[2012-05-25 13:13:44 -0400] BryanWB_: couchdb is slow...
[2012-05-25 13:13:51 -0400] behemphi: Uploading console-server             [2.3.10]
[2012-05-25 13:13:52 -0400] behemphi: ERROR: Server returned error for https://api.opscode.com/organizations/feedmagnet/sandboxes/dfc8c3d287e04cc39cf482810a4968b4, retrying 1/5 in 3s
[2012-05-25 13:13:52 -0400] behemphi: ERROR: Server returned error for https://api.opscode.com/organizations/feedmagnet/cookbooks/console-server/2.3.10, retrying 1/5 in 4s
[2012-05-25 13:13:57 -0400] behemphi: I am using Hosted Chef
[2012-05-25 13:14:06 -0400] behemphi: so it is all erlangy and mysqly
[2012-05-25 13:14:06 -0400] BryanWB_: takes time to converge, u c coulw wait oanother 10 mins
[2012-05-25 13:14:25 -0400] BryanWB_: maybe they haven't completed transition to mysql ?
[2012-05-25 13:14:54 -0400] behemphi: That sounds like the right answer on that Bryan and your right, they are not totally on mysql yet so it now makes even more sense!
[2012-05-25 13:15:09 -0400] behemphi: thx, I will stop banging my head on the Couch
[2012-05-25 13:15:46 -0400] zts: behemphi: for Hosted Chef, the Opscode folks usually also suggest creating a ticket: http://help.opscode.com/
[2012-05-25 13:16:10 -0400] resno: im ready to tryout hosted chef!
[2012-05-25 13:16:38 -0400] zts: I wouldn't expect it to take 20 mins for an uploaded cookbook to be visible to your nodes, so it sounds like something worth noting
[2012-05-25 13:20:00 -0400] mattray: Anyone use a Ruby IDEs with Chef? Ruby Mine?
[2012-05-25 13:20:21 -0400] mattray: I'm quite happy with Emacs, but someone was asking about IDEs for Ruby
[2012-05-25 13:21:11 -0400] geekbri: I use vim :)
[2012-05-25 13:21:20 -0400] geekbri: I think one of my coworkers uses ruby mine
[2012-05-25 13:21:21 -0400] UForgotten: yeah. vi or textmate on mac
[2012-05-25 13:21:25 -0400] geekbri: but hes not in yet
[2012-05-25 13:21:26 -0400] behemphi: Matt I just started learning Ruby and I am using RubyMine as I like Pycharm
[2012-05-25 13:21:31 -0400] behemphi: I am very impressed
[2012-05-25 13:21:35 -0400] yfeldblum: using redcar
[2012-05-25 13:21:38 -0400] behemphi: running tests right in the IDE
[2012-05-25 13:21:49 -0400] behemphi: the experience is extremely smooth
[2012-05-25 13:21:52 -0400] yfeldblum: editor, not ide
[2012-05-25 13:22:44 -0400] mattray: are there any Chef-plugins for either?
[2012-05-25 13:22:49 -0400] Guest45670: hi, can i run chef-client as non-root user on centos?
[2012-05-25 13:22:52 -0400] behemphi: I am _not_ using it yet with my recipes, I am working on something for my orchestration problem and BryanWB bullied me into using Ruby :-)
[2012-05-25 13:22:55 -0400] mattray: or at the very least, syntax highlighting
[2012-05-25 13:23:21 -0400] BryanWB_: Guest45670: no
[2012-05-25 13:23:32 -0400] BryanWB_: Guest45670: u need full sudo access
[2012-05-25 13:23:33 -0400] mattray: Guest45670: you can, but the things you can manage will be limited to that user
[2012-05-25 13:23:34 -0400] behemphi: RubyMine has keyword controls similar to eclipse so if you don't see what you want you could create one
[2012-05-25 13:23:54 -0400] BryanWB_: *horror* u aren't using emacs???!
[2012-05-25 13:24:06 -0400] Guest45670: but is tehre a way to create a user with root right but is names e.g. "chef"
[2012-05-25 13:24:20 -0400] behemphi: @resno, hosted chef is really sweet for us b/c we have no internal network (other than an Apple router)
[2012-05-25 13:24:27 -0400] mattray: Guest45670: you'll want to use 'sudo' for that
[2012-05-25 13:24:38 -0400] mattray: and add your 'chef' user to 'sudoers'
[2012-05-25 13:24:41 -0400] mattray: man sudo
[2012-05-25 13:24:46 -0400] behemphi: I am managing up to 150 nodes as a newb and it has been a life saver
[2012-05-25 13:25:19 -0400] Guest45670: ok thx
[2012-05-25 13:25:34 -0400] behemphi: @Guest45670 a trick with sudo too if you have path issues that I have used in the past
[2012-05-25 13:25:34 -0400] mattray: BryanWB_: a customer asked about IDEs and I don't want to be "that guy" who says "emacs"
[2012-05-25 13:25:42 -0400] behemphi: sudo su -l root -c "chef-client"
[2012-05-25 13:26:00 -0400] geekbri: hosted chef is clutch because you dont have to worry about backing up or scaling chef (although I still backup our chef info)
[2012-05-25 13:26:17 -0400] BryanWB_: mattray: of course, i guess rubymine is good enough
[2012-05-25 13:27:00 -0400] behemphi: Eclipse as a VI plugin  all that IDE goodness with all the escapism of VI
[2012-05-25 13:27:06 -0400] behemphi: lol
[2012-05-25 13:27:54 -0400] mattray: behemphi: I maintained a large set of emacs bindings when I used eclipse
[2012-05-25 13:28:03 -0400] zeroXten: is it possible/valid to write to a node's attributes from within a recipe? I think I tried it the other day but it didn't work, not sure if I was doing something wrong
[2012-05-25 13:28:04 -0400] mattray: but that's the "right way" to do it
[2012-05-25 13:28:15 -0400] mattray: zeroXten: yes
[2012-05-25 13:28:27 -0400] zeroXten: hmm, thanks mattray, I'll give it another go
[2012-05-25 13:28:34 -0400] mattray: zeroXten: http://wiki.opscode.com/display/chef/Attributes
[2012-05-25 13:31:05 -0400] behemphi: zeroXten:  here is an example from one of my cookbooks:https://gist.github.com/2788180
[2012-05-25 13:41:29 -0400] bencaron: any experiences of using chef-full installer on a mac to get a workstation environment?
[2012-05-25 13:41:44 -0400] bencaron: trying to simplify barrier to entry for contribution on my chef setup...
[2012-05-25 13:42:27 -0400] dyer: Hey guys, anyone actually using the new bootstrap --json-attributes parameter ?  I can't see to get it to actually use the attribute I pass in .
[2012-05-25 13:42:28 -0400] resno: mattray: ill be trying to chef out today... :-) wish meluck
[2012-05-25 13:43:01 -0400] mattray: bencaron: that can work, you'll need to add the /opt/chef/embedded/ruby to your path
[2012-05-25 13:43:27 -0400] mattray: resno: be sure to ask this channel if you have any questions, lots of helpful folks
[2012-05-25 13:43:48 -0400] mattray: or help.opscode.com since you're using Hosted Chef
[2012-05-25 13:44:20 -0400] mattray: bencaron: I guess for OSX Ruby 1.8.7 is probably in your path already, so you might not even need that
[2012-05-25 13:44:25 -0400] resno: heh, ill ask youdirectly and await your answer mattray lol
[2012-05-25 13:44:32 -0400] resno: ill wait day and night
[2012-05-25 13:44:47 -0400] mattray: resno: sure, but I'll be out of contact in about 3 hours
[2012-05-25 13:44:57 -0400] resno: NO!
[2012-05-25 13:45:11 -0400] resno: i better hurry
[2012-05-25 13:45:20 -0400] mattray: recruiting lunch, checking out a new office, onsite customer visit and refinancing my house. Busy day
[2012-05-25 13:45:40 -0400] bencaron: mattray: I'm just afraid that me using ruby 1.9.2 may introduce problems in others installation
[2012-05-25 13:45:56 -0400] mattray: bencaron: how so?
[2012-05-25 13:45:57 -0400] bencaron: and isn't chef-full isntall running 1.9 anyway?
[2012-05-25 13:46:02 -0400] mattray: bencaron: yes
[2012-05-25 13:46:11 -0400] bencaron: well, little things where behavior is not the same
[2012-05-25 13:46:20 -0400] mattray: oh sure, 1.8.7 is still lots of places
[2012-05-25 13:46:25 -0400] bencaron: i got a bug with .to_a vs Arrau() for example
[2012-05-25 13:46:26 -0400] mattray: like OSX and Ubuntu
[2012-05-25 13:46:38 -0400] bencaron: yep, and it's what we use anyway
[2012-05-25 13:46:45 -0400] mattray: yeah, I recently cleaned up a passel of 1.8 bugs
[2012-05-25 13:46:50 -0400] bencaron: and some RHEL ; ruby 1.8.5 there!
[2012-05-25 13:47:00 -0400] mattray: chef-full everywhwer
[2012-05-25 13:47:01 -0400] mattray: e
[2012-05-25 13:47:16 -0400] bencaron: since my setup is brand new, i though that going with chef-full and 1.9 everywhere now would be good
[2012-05-25 13:49:52 -0400] yfeldblum: mattray, chef-full needs 1.9.3 for all those people who have a burning need to use the constant `IO::NULL`
[2012-05-25 13:52:57 -0400] bencaron: yfeldblum: you mean, in a recipe?
[2012-05-25 13:53:06 -0400] mattray: AFAIK we're slowly turning the cranks on automating the entire build process for installers to cover all platforms. Once that's fully fleshed out I expect moving Ruby versions in lockstep should be a little easier
[2012-05-25 13:53:13 -0400] bencaron: code in chef-full uses IO::NULL?
[2012-05-25 13:53:33 -0400] mattray: bencaron: no, but if your recipes want to use them
[2012-05-25 13:53:41 -0400] bencaron: oh, ok
[2012-05-25 13:53:44 -0400] mattray: Chef is 1.8.7 compatible
[2012-05-25 13:53:48 -0400] mattray: (and up)
[2012-05-25 13:53:58 -0400] bencaron: i'm still new to the ruby-version thing
[2012-05-25 13:54:00 -0400] mattray: the plugins and stuff you right on top of it are of course, another story
[2012-05-25 13:54:10 -0400] mattray: s/write/right/
[2012-05-25 13:54:27 -0400] bencaron: anyway, it's my second chef setup
[2012-05-25 13:54:35 -0400] mattray: bencaron: good luck! :)
[2012-05-25 13:54:39 -0400] bencaron: and chef-full looks really better
[2012-05-25 13:54:52 -0400] bencaron: especially since my current env is way more varied
[2012-05-25 13:54:54 -0400] mattray: yeah, it's definitely intended to get you rolling faster and easier
[2012-05-25 13:55:08 -0400] bencaron: seems like it works :)
[2012-05-25 13:55:24 -0400] bencaron: the only part I've not touch yet is the few windows box
[2012-05-25 13:56:10 -0400] oddover: ohai, chefs! I have a ruby question. Is there a way to create an "alias" for a long array name (hashes of hashes of arrays)?
[2012-05-25 13:57:38 -0400] mattray: bencaron: Chef will be ready for those boxes when you're ready
[2012-05-25 13:57:56 -0400] StormSilver: oddover: Not sure exactly what you mean
[2012-05-25 13:57:59 -0400] remil: a = { :a => { :b => [ 1,2,3,4] }}; foo = a[:a][:b]; foo << 42; a[:a][:b]
[2012-05-25 13:58:21 -0400] remil: but it may become quite hard to read/follow
[2012-05-25 13:59:00 -0400] yfeldblum: oddover, example?
[2012-05-25 14:02:28 -0400] oddover: remil's example is good. so by editing foo, is that editing a?
[2012-05-25 14:04:01 -0400] oddover: nvm. just ran it in irb, and it looks like my answer is yes
[2012-05-25 14:06:10 -0400] remil: oddover: yep, using array's reference
[2012-05-25 14:06:42 -0400] remil: that's the point when value and reference are becoming quite shady and I usually try to avoid such construct ;)
[2012-05-25 14:09:24 -0400] oddover: heh
[2012-05-25 14:31:55 -0400] lledet: in the mysql cookbook, for an ec2 instance, should i include both mysql::server and mysql::server_ec2 or only server_ec2?
[2012-05-25 14:32:15 -0400] geekbri: lledet: both
[2012-05-25 14:32:29 -0400] lledet: thanks
[2012-05-25 14:32:33 -0400] geekbri: np
[2012-05-25 14:59:25 -0400] qhartman: I have a Centos 6.2 box that has started failing chef-runs during a SVN-based deploy_revision call with the following stacktrace: http://pastebin.com/7m54bZpu
[2012-05-25 14:59:31 -0400] qhartman: Any thoughts? I'm stumped.
[2012-05-25 15:03:11 -0400] eherot: qhartman: It sounds like the process fork may have failed for some reason
[2012-05-25 15:03:42 -0400] hoover_damm: qhartman, it looks like jdeamattson was having the same problem the other day.
[2012-05-25 15:03:49 -0400] hoover_damm: qhartman, http://likens.us/logs/2012/%23chef.03-27.12.log
[2012-05-25 15:04:43 -0400] behrendsj: Can anyone tell me how I can check within a recipe if a node has another recipe applied to it? IE, Do this action IF this other recipe is applied.
[2012-05-25 15:05:01 -0400] eherot: qhartman: have you tried running it with debug to see if you can pinpoint the exact command that's generating this error?
[2012-05-25 15:05:06 -0400] hoover_damm: behrendsj, other node has ran it?
[2012-05-25 15:05:15 -0400] hoover_damm: behrendsj, that's more zookeeper/noah type semantics
[2012-05-25 15:05:49 -0400] behrendsj: No, I need to take an action only if the same node running this recipe has another applied to it's run_list
[2012-05-25 15:06:00 -0400] eherot: behemphi: Search
[2012-05-25 15:06:05 -0400] qhartman: eherot, that stack trace is from the debug output, not the normal chef-stacktrace. It's the svn checkout command that's failing, but if I run that command by hand it works fine
[2012-05-25 15:06:46 -0400] eherot: behemphi: search("node", "recipes:RECIPE") should get you an array of node objects with that recipe in their run lists
[2012-05-25 15:07:35 -0400] behrendsj: Ok, I'll give that a try, thanks.
[2012-05-25 15:07:39 -0400] eherot: from that you can map it or loop through it or all manner of other things to see if it includes the one you're looking for.  Or you can search for the node by name and see if it's recipes attribute includes the one you're looking for.
[2012-05-25 15:07:42 -0400] hoover_damm: qhartman, qhartman was the user parameter supplied?
[2012-05-25 15:07:46 -0400] eherot: *its, rather.
[2012-05-25 15:07:46 -0400] hoover_damm: or group?
[2012-05-25 15:08:07 -0400] hoover_damm: looking at the code in question, it seems more like a user or group was applied
[2012-05-25 15:08:10 -0400] eherot: does it fail on every run?
[2012-05-25 15:08:24 -0400] hoover_damm: it tries to set the process egid and gid and euid / uid
[2012-05-25 15:08:25 -0400] hoover_damm: to that
[2012-05-25 15:08:35 -0400] hoover_damm: and that code is actually what your having the issue on qhartman
[2012-05-25 15:08:47 -0400] qhartman: hoover_damm, as far as I can tell. This recipe has been working unchanged for some time, and it works on all the other boxes I'm running it on.
[2012-05-25 15:09:08 -0400] eherot: qhartman: what I mean is: does it fail consistently on this box?
[2012-05-25 15:09:22 -0400] hoover_damm: qhartman, https://github.com/opscode/chef/blob/master/chef/lib/chef/mixin/command/unix.rb#L86
[2012-05-25 15:09:30 -0400] hoover_damm: right, it was the upgrade to 0.10.10 that bit you?
[2012-05-25 15:10:09 -0400] qhartman: eherot, It does now, when this started it was failing only a ocassionally, which made it even more frustrating
[2012-05-25 15:10:30 -0400] qhartman: hoover_damm, I should actually be running 10.0 on this machine unless something upgraded me without telling me.
[2012-05-25 15:10:44 -0400] hoover_damm: qhartman, gem --version?
[2012-05-25 15:10:48 -0400] qhartman: hoover_damm, yeah, 10.0
[2012-05-25 15:11:00 -0400] hoover_damm: qhartman, your right 0.10
[2012-05-25 15:11:18 -0400] qhartman: 0.10.0 rather
[2012-05-25 15:11:36 -0400] ellisera: hey guys, I need to figure out a way around a recipe request for a data bag that doesn't need to exist for a particular environment setting (but the same type of data bag needs to exist if the environment setting is different). doing ' if node[:genericname] [:environment] != "environtment_that_should_be_excluded" exit  end ' doesn't seem to be working unfortunately.   Do I need to create some sort of dummy data bag (if so, how?) or is the
[2012-05-25 15:11:36 -0400] ellisera: another way to do a workaround?
[2012-05-25 15:11:53 -0400] hoover_damm: in this case
[2012-05-25 15:12:00 -0400] hoover_damm: https://github.com/opscode/chef/blob/0.10.0/chef/lib/chef/mixin/command/unix.rb#L86
[2012-05-25 15:12:03 -0400] hoover_damm: it can't set the uid to that user
[2012-05-25 15:12:19 -0400] hoover_damm: so i'm assuming chef is running as root, are you using the username or userid? and can you do id userid?
[2012-05-25 15:12:38 -0400] ellisera: and yes, I'm new to both chef and ruby
[2012-05-25 15:12:40 -0400] hoover_damm: pasting the deploy resource (redact what you need to) would be good
[2012-05-25 15:12:41 -0400] eherot: is this machine using an external authentication source of any kind?  LDAP, etc?
[2012-05-25 15:12:53 -0400] StormSilver: ellisera: Try node.chef_environment for your comparison
[2012-05-25 15:12:55 -0400] hoover_damm: yeah that's what my next question was going to be, any kind of flaky auth
[2012-05-25 15:13:25 -0400] qhartman: hoover_damm, that's kinda what I was getting to, I've done all the UID-related tests I can think of (including id userid) and it all comes back fine
[2012-05-25 15:13:42 -0400] qhartman: eherot, no LDAP or anything, standard passwd/group files
[2012-05-25 15:13:46 -0400] hoover_damm: qhartman, and /etc/nsswitch.conf shows files?
[2012-05-25 15:14:02 -0400] hoover_damm: or compat?
[2012-05-25 15:14:06 -0400] qhartman: files
[2012-05-25 15:14:10 -0400] StormSilver: ellisera: Oh wait, you said environment setting, not environment
[2012-05-25 15:14:38 -0400] ellisera: StormSilver: I did mean the environment
[2012-05-25 15:14:39 -0400] hoover_damm: hrm, so yeah auth shouldn't be flaking out then.... /me is stumped
[2012-05-25 15:14:43 -0400] eherot: qhartman: does this machine have anything configured in /etc/security/limits.conf to limit the number of UIDs for the SVN user?
[2012-05-25 15:14:45 -0400] StormSilver: ellisera: Okay, yeah, it's stored in node.chef_environment
[2012-05-25 15:14:46 -0400] eherot: err
[2012-05-25 15:14:46 -0400] qhartman: chef-client is running as root or via sudo, either way it fails the same way
[2012-05-25 15:14:48 -0400] eherot: PIDs rather
[2012-05-25 15:15:02 -0400] qhartman: eherot, shouldn't, but checking....
[2012-05-25 15:15:06 -0400] StormSilver: ellisera: So you should be able to do if node.chef_environment != "excluded_environment"
[2012-05-25 15:15:32 -0400] eherot: qhartman: 'cause this was one of the first things that came up when I googled Process.uid and "resource temporarily unavailable" http://www.novell.com/support/kb/doc.php?id=3007194
[2012-05-25 15:15:32 -0400] qhartman: eherot, nope, limits.conf is empty
[2012-05-25 15:15:55 -0400] qhartman: eherot, interesting, I hadn't hit on that yet
[2012-05-25 15:16:12 -0400] ellisera: StormSilver: thanks, I'll give that a try.
[2012-05-25 15:16:59 -0400] eherot: When you tried running this by hand did you run it as root or did you become root and then su to the username that svn is actually trying to run as?  (or is the binary set-UID to something other than root?)
[2012-05-25 15:19:13 -0400] qhartman: eherot, afaik svn is running as root
[2012-05-25 15:19:42 -0400] qhartman: here's the deploy_revision call that is failing: http://pastebin.com/tY8gsthB
[2012-05-25 15:19:42 -0400] eherot: qhartman: something in this process is trying to change the process owner.  That's what the line of code that failed does.
[2012-05-25 15:20:02 -0400] hoover_damm: eherot, the really annoying part about limits.conf? it doesn't count to root
[2012-05-25 15:20:08 -0400] qhartman: the userName variable is getting set further up in the recipe
[2012-05-25 15:20:30 -0400] eherot: hoover_damm: heh, yeah.  The other reason I suspect a suid is going on.
[2012-05-25 15:20:32 -0400] hoover_damm: eherot, when you login or su to root... whatever set in limits, is lost... :( 32meg stack? luser gets it... su to root... lost
[2012-05-25 15:21:10 -0400] eherot: hoover_damm: Doesn't that pretty much exclude you from the entire Linux auth model? :-)
[2012-05-25 15:21:26 -0400] hoover_damm: no
[2012-05-25 15:21:43 -0400] hoover_damm: the shadow package and glibc provide the authentication model actually
[2012-05-25 15:21:44 -0400] hoover_damm: and crypt()
[2012-05-25 15:21:53 -0400] hoover_damm: pam provides a more modular layer to that same thing
[2012-05-25 15:22:05 -0400] eherot: hoover_damm: I should have said "modern Linux auth model"
[2012-05-25 15:22:07 -0400] hoover_damm: you can set UsePAM no in sshd
[2012-05-25 15:22:25 -0400] eherot: it definitely adds a lot to the confusion layer.
[2012-05-25 15:22:29 -0400] hoover_damm: getting stuff to not link to it, and remove it from other angles is hard
[2012-05-25 15:22:37 -0400] hoover_damm: so I really don't know if it's even sane
[2012-05-25 15:23:01 -0400] hoover_damm: yeah i haven't mastered pam
[2012-05-25 15:23:20 -0400] hoover_damm: I would love to stop having to remove start-stop-daemon and stop doing weird hacks to get a ulimit > 1024
[2012-05-25 15:23:32 -0400] hoover_damm: and it's the most common 'scaling' pain that end-users hit
[2012-05-25 15:23:38 -0400] hoover_damm: 'oh i'm out of fds... '
[2012-05-25 15:23:52 -0400] eherot: yeah that's a huge pain in the butt
[2012-05-25 15:24:11 -0400] hoover_damm:  + 500
[2012-05-25 15:24:40 -0400] hoover_damm: I need to start forking more of my cookbooks that I modify to do that into my github so other people might shortcut on the pain
[2012-05-25 15:25:04 -0400] eherot: heh
[2012-05-25 15:25:09 -0400] hoover_damm: and I really wish I didn't have to do weird ulimit -n 65535 hacks in init scripts
[2012-05-25 15:25:23 -0400] knuckolls: hear hear, i had to write one of those yesterday
[2012-05-25 15:25:31 -0400] eherot: hoover_damm: It's amazing to me how many well established pieces of software actually do that
[2012-05-25 15:25:33 -0400] eherot: (Jetty)
[2012-05-25 15:25:36 -0400] hoover_damm: i'm really tired of having to one off hack every freaking service
[2012-05-25 15:25:37 -0400] ellisera: StormSilver: now I'm getting these errors (which I wasn't getting beforehand in other environments): [Fri, 25 May 2012 15:20:12 +0000] ERROR: Running exception handlers
[2012-05-25 15:25:37 -0400] ellisera: [Fri, 25 May 2012 15:20:12 +0000] ERROR: Exception handlers complete  (again, sorry if my puzzlement here is odd, I just need to know where to look to fix it)
[2012-05-25 15:25:39 -0400] hoover_damm: or init script
[2012-05-25 15:26:05 -0400] knuckolls: the piece i don't fully understand is when a process reads the limits and from where
[2012-05-25 15:26:14 -0400] hoover_damm: eherot, almost everything does
[2012-05-25 15:26:24 -0400] eherot: knuckolls: the kernel enforces it I believe
[2012-05-25 15:26:25 -0400] knuckolls: the chef client process still has the ulimits that were set when it logged in and started up during bootstrap
[2012-05-25 15:26:26 -0400] hoover_damm: and it's really not anything but pam
[2012-05-25 15:26:32 -0400] StormSilver: ellisera: There should be a line near those errors saying where it dumped the stacktrace
[2012-05-25 15:26:32 -0400] hoover_damm: nah the kernel has it's own limits in sysctl
[2012-05-25 15:26:39 -0400] hoover_damm: pam != kernel limits
[2012-05-25 15:26:39 -0400] StormSilver: ellisera: Have a look at that and see what's up
[2012-05-25 15:26:49 -0400] eherot: hmm, true.
[2012-05-25 15:26:50 -0400] hoover_damm: it's just another layer
[2012-05-25 15:27:04 -0400] hoover_damm: a valid layer as it's linked into half your binaries
[2012-05-25 15:27:11 -0400] hoover_damm: or more
[2012-05-25 15:27:36 -0400] ellisera: StormSilver: no such line unfortunately, this was after chef-solo started running on an was instance
[2012-05-25 15:27:36 -0400] knuckolls: could wrapper code be added to shellout?
[2012-05-25 15:27:51 -0400] knuckolls: get all your limits right => then fork process
[2012-05-25 15:28:11 -0400] knuckolls: or something along those lines
[2012-05-25 15:29:10 -0400] StormSilver: ellisera: Interesting. I suppose it should have dumped the errors directly to the log or similar, in that case. Not as familiar with solo.
[2012-05-25 15:29:15 -0400] hoover_damm: shellout has more problems then pam
[2012-05-25 15:29:40 -0400] hoover_damm: perhaps modifying shellout so it can help set the limits for you.  But honestly knuckolls the problem is deeper and insideous then chef can help
[2012-05-25 15:30:05 -0400] ellisera: StormSilver: *nods* yeah, I normally see a stack trace dump, but not here. Unfortunately these are the only errors listed in the log
[2012-05-25 15:30:09 -0400] qhartman: argh, centos has another files that setting nproc limits
[2012-05-25 15:30:12 -0400] knuckolls: yeah, it seems to annoy me endlessly
[2012-05-25 15:30:13 -0400] qhartman: stupid centos.....
[2012-05-25 15:30:21 -0400] knuckolls: oh i didn't get the limits right on that box
[2012-05-25 15:30:28 -0400] knuckolls: oh the limits again
[2012-05-25 15:30:32 -0400] hoover_damm: yep
[2012-05-25 15:30:35 -0400] qhartman: so, changing that and seeing if it helps...
[2012-05-25 15:30:37 -0400] hoover_damm: it's a constant pain
[2012-05-25 15:30:44 -0400] hoover_damm: between sysctl and ulimit
[2012-05-25 15:30:47 -0400] StormSilver: ellisera: That is so weird! Try bumping up the log level maybe?
[2012-05-25 15:30:59 -0400] knuckolls: sysctl seems to never give me troubles being managed from chef
[2012-05-25 15:31:05 -0400] qhartman: /etc/security/limits.d/90-nproc.conf
[2012-05-25 15:31:17 -0400] hoover_damm: ouch
[2012-05-25 15:31:20 -0400] ellisera: StormSilver: how?
[2012-05-25 15:31:38 -0400] StormSilver: ellisera: I think you can set -l debug when you start chef-solo
[2012-05-25 15:35:11 -0400] knuckolls: hoover_damm: i think i'd be happy enough if i could set limits per service resource
[2012-05-25 15:35:14 -0400] knuckolls: and have it actually work
[2012-05-25 15:35:52 -0400] hoover_damm: knuckolls, actually I'd rather live limit-less
[2012-05-25 15:36:07 -0400] knuckolls: oh so you want to rip out pam?
[2012-05-25 15:36:20 -0400] hoover_damm: knuckolls, It's impossible for me to tell exactly what kind of traffic i'll get somedays and what I have to support.  As I look towards Sandybridge and 32 core boxes
[2012-05-25 15:36:38 -0400] hoover_damm: this kind of issue becomes a serious stumbling block in using the hardware
[2012-05-25 15:36:46 -0400] knuckolls: well it's meant to protect against forkbombs and the like
[2012-05-25 15:36:49 -0400] knuckolls: but i think it's a valid point
[2012-05-25 15:37:08 -0400] knuckolls: how can we rip it out?
[2012-05-25 15:37:18 -0400] hoover_damm: I think it should be optional to turn off, it's something i'll dig into
[2012-05-25 15:37:50 -0400] knuckolls: haha that's exactly how i feel
[2012-05-25 15:38:07 -0400] knuckolls: i'll have to pay sacrifice to the unix gods and give up a weekend to solve it now and forever
[2012-05-25 15:40:31 -0400] qhartman: well that weirdly  seems to have fixed it
[2012-05-25 15:40:50 -0400] hoover_damm: qhartman, :) excellent
[2012-05-25 15:41:25 -0400] ellisera: SilverStorm: I assume these are the lines I should be looking at? [Fri, 25 May 2012 15:38:18 +0000] DEBUG: Building node object for [IP listed]
[2012-05-25 15:41:53 -0400] ellisera: StormSilver:
[2012-05-25 15:42:06 -0400] StormSilver: ellisera: Yeah, debug has a ton of output.
[2012-05-25 15:42:38 -0400] qhartman: checking the number of running procs for the relevant users and no one is running more than 100, and limit was set to 1024
[2012-05-25 15:42:56 -0400] StormSilver: ellisera: Actually, can you gist the relevant portion of the code that you're working with?
[2012-05-25 15:42:59 -0400] qhartman: so I guess it's creating some spike or processes that I'm not catching
[2012-05-25 15:42:59 -0400] StormSilver: gist?
[2012-05-25 15:43:00 -0400] bawt: gist is https://gist.github.com
[2012-05-25 15:43:04 -0400] StormSilver: ellisera: ^
[2012-05-25 15:43:34 -0400] ellisera: StormSilver: that's part of the problem. It's hard for me to see where there are problems from that line
[2012-05-25 15:43:59 -0400] StormSilver: ellisera: You've got a conundrum over there :)
[2012-05-25 15:44:40 -0400] ellisera: StormSilver: lol, yup, I wasn't the one that built these recipes to start with, and the guy that did isn't working with us anymore, so it's a bit harder to figure out what he did, where and why
[2012-05-25 15:44:51 -0400] StormSilver: ellisera: Classic
[2012-05-25 15:46:02 -0400] ellisera: StormSilver: I assume I should be worried about this one too? [Fri, 25 May 2012 15:38:18 +0000] DEBUG: No chefignore file found at [path name] no files will be ignored
[2012-05-25 15:46:16 -0400] StormSilver: ellisera: Nah, that's probably okay
[2012-05-25 15:46:42 -0400] StormSilver: ellisera: Well, here's a question for you: is it working the way you intend?
[2012-05-25 15:46:47 -0400] qzio: is there some trick to get opscode-mysql to work on ubuntu/debian?
[2012-05-25 15:47:18 -0400] qzio: it exits with 1 during ERROR: service[mysql] (mysql::server line 71) has had an error
[2012-05-25 15:48:08 -0400] ellisera: StormSilver: I've been on these recipes for the past couple of weeks. Every time I fix one and it's working fine, I need to merge with other branches for other features and I need to go through it again. This one was working fine in a non-standalone environment, but now I'm dealing with getting it to work for a standalone as well without breaking it for the other env
[2012-05-25 15:53:37 -0400] qzio: have anyone been able to actually use the mysql::server on a fresh ubuntu installation?
[2012-05-25 15:54:12 -0400] qzio: my system is totally screwed up now (again)
[2012-05-25 15:54:51 -0400] ellisera: StormSilver: anyway, I assume these first few debug lines are what are causing issues with the rest of the debugs: Fri, 25 May 2012 15:38:18 +0000] DEBUG: Building node object for [IP]
[2012-05-25 15:54:51 -0400] ellisera: [Fri, 25 May 2012 15:38:18 +0000] DEBUG: Extracting run list from JSON attributes provided on command line
[2012-05-25 15:54:52 -0400] ellisera: [Fri, 25 May 2012 15:38:18 +0000] DEBUG: Applying attributes from json file
[2012-05-25 15:54:53 -0400] ellisera: [Fri, 25 May 2012 15:38:18 +0000] DEBUG: Platform is ubuntu version 10.04
[2012-05-25 15:55:24 -0400] StormSilver: ellisera: No, that's all just regular debug info
[2012-05-25 15:55:59 -0400] StormSilver: ellisera: What I was asking was if the recipes are performing the way you expect them to now.
[2012-05-25 15:56:12 -0400] StormSilver: ellisera: Your original question was about how to exclude a certain thing from happening
[2012-05-25 15:56:18 -0400] StormSilver: ellisera: So is that thing being excluded?
[2012-05-25 15:56:34 -0400] ellisera: StormSilver: for the most part with that exception: although I haven't had a chance to check ALL the recipes
[2012-05-25 15:57:08 -0400] ellisera: StormSilver: yes, that exclusion seems to happen, the error was happening before this point before
[2012-05-25 15:57:21 -0400] doubtingben: hiya, i'm getting a 404 for the Ubuntu OmniBus installer
[2012-05-25 15:57:37 -0400] doubtingben: http://s3.amazonaws.com/opscode-full-stack/ubuntu-12.10-i686/chef-full_0.10.8-3_i386.deb
[2012-05-25 15:57:59 -0400] mattray: btm: ^^?
[2012-05-25 15:58:42 -0400] ellisera: StormSilver: I suppose the question now is: did I frame the exclusion right, or is THAT what's causing the current problem?
[2012-05-25 15:59:00 -0400] StormSilver: ellisera: Are you actually calling `exit` within your if block, or was that just example/test code?
[2012-05-25 15:59:08 -0400] btm: doubtingben: yeah, we put off building 0.10.10 omnibus packages for everything because we expected the newer build system to be online already. our bad.
[2012-05-25 15:59:17 -0400] ellisera: StormSilver: I actually am calling exit
[2012-05-25 15:59:54 -0400] doubtingben: so, i'm just starting out, bootstrapping my first noe.
[2012-05-25 16:00:05 -0400] doubtingben: ^noe^node
[2012-05-25 16:00:13 -0400] doubtingben: where else could I get the client?
[2012-05-25 16:00:42 -0400] doubtingben: or byo?
[2012-05-25 16:01:04 -0400] StormSilver: Does anyone know if calling exit during a chef-solo run will cause the exception handlers to execute? I don't have a test env handy.
[2012-05-25 16:01:28 -0400] btm: doubtingben: the omnibus clients are in beta still. there are a few ways to install depending on preference. Rubygems, Debs, RPMS. http://wiki.opscode.com/display/chef/Installation
[2012-05-25 16:01:29 -0400] mattray: doubtingben: why are you getting Ubuntu 12.10?
[2012-05-25 16:01:50 -0400] btm: doubtingben: I'll build the rest of the ubuntu omnibus packages now though.
[2012-05-25 16:02:13 -0400] btm: doubtingben: as mattray is about to indicate, you want to use the 'install.sh' script to grab a particular package though, don't hand craft the URL.
[2012-05-25 16:02:19 -0400] doubtingben: mattray: test environment, just grabbed the newest isos
[2012-05-25 16:03:30 -0400] doubtingben: oh, you mean in the URL, I didn't create that, that's what "knife bootstrap" tried fetch
[2012-05-25 16:03:39 -0400] mattray: interesting
[2012-05-25 16:03:57 -0400] alex88: hello guys, how can i upload a role to the chef servr?
[2012-05-25 16:04:16 -0400] btm: doubtingben: what version of ubuntu are you on?
[2012-05-25 16:04:21 -0400] doubtingben: i spent almost 3 days getting the chef server to run on SLES11...
[2012-05-25 16:04:24 -0400] geekbri: alex88: you could do knife role from file <role you want to upload>
[2012-05-25 16:04:31 -0400] geekbri: alex88: assuming you have knife setup of course :)
[2012-05-25 16:04:43 -0400] alex88: geekbri, oh great, yeh i've that already setup, thank you :)
[2012-05-25 16:04:56 -0400] mattray: doubtingben: sorry to hear that
[2012-05-25 16:05:00 -0400] alex88: that worked, thank you geekbri
[2012-05-25 16:05:09 -0400] geekbri: alex88: don't mention it
[2012-05-25 16:05:12 -0400] mattray: doubtingben: it's kinda why we point new users to a free Hosted Chef account
[2012-05-25 16:05:33 -0400] doubtingben: btm: 12.04 LTS
[2012-05-25 16:05:57 -0400] doubtingben: mattray: yeah, they weren't interested in that. I tried.
[2012-05-25 16:06:23 -0400] hoover_damm: mattray, sometimes I think the 'virtual instance' method to give people to try a running Chef server is required
[2012-05-25 16:06:26 -0400] mattray: doubtingben: hopefully we'll have an omnibus-server out before too long
[2012-05-25 16:06:42 -0400] mattray: hoover_damm: yeah, the omnibus server fills that niche
[2012-05-25 16:06:49 -0400] hoover_damm: mattray, as it helps people evaluate chef in a way that lets them eval it safely and sanely.  Then they can make intelligent decisions going forward
[2012-05-25 16:06:49 -0400] doubtingben: i was so excited to get the server running, i tried bootstrapping the first node: fail
[2012-05-25 16:06:57 -0400] hoover_damm: truthfully I doubt they'd do that
[2012-05-25 16:07:00 -0400] hoover_damm: it's just what could be
[2012-05-25 16:07:52 -0400] hoover_damm: omnibus-server ... that's a lot of compiling
[2012-05-25 16:08:01 -0400] btm: doubtingben: what happens if you download http://www.opscode.com/chef/install.sh and run that on the 12.04 LTS client? what file does it try to download?
[2012-05-25 16:08:25 -0400] doubtingben: btm: give me a few minutes
[2012-05-25 16:10:51 -0400] doubtingben: btm: Downloading Chef 0.10.8-3 for ubuntu...
[2012-05-25 16:10:54 -0400] doubtingben: --2012-05-25 12:10:20--  http://s3.amazonaws.com/opscode-full-stack/ubuntu-12.10-i686/chef-full_0.10.8-3_i386.deb
[2012-05-25 16:11:01 -0400] doubtingben: btm: 404
[2012-05-25 16:11:35 -0400] doubtingben: btm: i can fill out the bug report and try another os
[2012-05-25 16:11:53 -0400] doubtingben: btm: i just want to get a node added :)
[2012-05-25 16:18:14 -0400] btm: doubtingben: yeah, file a bug and assign it to 'Bryan McLellan'. please include the contents of /etc/lsb-release.
[2012-05-25 16:18:36 -0400] doubtingben: btm: np, thanks!
[2012-05-25 16:20:04 -0400] btm: doubtingben: s3.amazonaws.com/opscode-full-stack/ubuntu-11.04-i686/chef-full_0.10.8-3_i386.deb
[2012-05-25 16:20:26 -0400] alex88: in the chef dashboard, i see the nodes in the node list, but when i go to status it takes long time to return the page and it says cannot get status.. is there another port i should open that's used to communicate to clients?
[2012-05-25 16:20:30 -0400] btm: doubtingben: http://s3.amazonaws.com/opscode-full-stack/ubuntu-11.04-x86_64/chef-full_0.10.8-3_amd64.deb
[2012-05-25 16:20:45 -0400] btm: doubtingben: those debs should work on 12.04 in the interim.
[2012-05-25 16:20:52 -0400] btm: doubtingben: there's one for x86 and one for x64.
[2012-05-25 16:21:07 -0400] btm: doubtingben: the Chef 0.10.10 versions are building right now.
[2012-05-25 16:21:15 -0400] doubtingben: btm: thanks, i'll try it out!
[2012-05-25 16:23:19 -0400] Litex: /3/3
[2012-05-25 16:23:22 -0400] Litex: Fail.
[2012-05-25 16:25:10 -0400] matschaffer: is there anything on manage.opscode.com that shows nodes by environment?
[2012-05-25 16:26:20 -0400] ellisera: StormSilver: was afk for a bit. Did anybody reply to you yet?
[2012-05-25 16:26:41 -0400] StormSilver: ellisera: nope
[2012-05-25 16:34:51 -0400] ellisera: StormSilver: is there an alternative to exit I can use to test this out?
[2012-05-25 16:35:34 -0400] StormSilver: ellisera: Not that I know of. Restructure your code so that nothing else runs :(
[2012-05-25 16:36:26 -0400] ellisera: StormSilver: maybe if I do it as an if not standalone, run everything else and then just encapsulate the rest of the code in the if statement?
[2012-05-25 16:36:42 -0400] StormSilver: ellisera: yeah
[2012-05-25 16:37:50 -0400] jtimberman: to an earlier query about mysql::server on latest ubuntu, here's output of (working) mysql::server on Ubuntu 12.04 w/ 0.10.8 via chef-full. https://gist.github.com/6460a27c85624f122693
[2012-05-25 16:42:07 -0400] jtimberman: also works with ubuntu12.04-gems bootstrap script (which uses chef 0.10.10)
[2012-05-25 16:48:45 -0400] jtimberman: matschaffer: no
[2012-05-25 16:49:01 -0400] jtimberman: matschaffer: (re nodes by environment)
[2012-05-25 16:49:10 -0400] qzio: jtimberman: see http://tickets.opscode.com/browse/COOK-1321
[2012-05-25 16:49:27 -0400] jtimberman: oh
[2012-05-25 16:49:39 -0400] jtimberman: matschaffer: not a full list by environment
[2012-05-25 16:49:57 -0400] jtimberman: matschaffer: but on the nodes tab, you can select the environment with the drop down at the top and see the nodes in a specific environment.
[2012-05-25 16:50:13 -0400] qzio: jtimberman: my server is completely broken I'm desperatly trygin to get apt to work, it crashes since the mysql installation failed in some weird way that renders my system unusable.
[2012-05-25 16:53:02 -0400] qzio: jtimberman: if you have any tips, let me know :)
[2012-05-25 16:53:35 -0400] Mithrandir: qzio: try dpkg --configure -a by hand?
[2012-05-25 16:53:56 -0400] qzio: jtimberman: how does your dna.json file look like? are you using chef-solo? I really curious how come I have never ever gotten mysql::server to work
[2012-05-25 16:54:07 -0400] jtimberman: qzio: I don't use chef-solo.
[2012-05-25 16:54:12 -0400] qzio: tried it on several different system and setups, it totally breaks every time.
[2012-05-25 16:54:24 -0400] jtimberman: qzio: my test node's run list is simply ["recipe[mysql::server]"]
[2012-05-25 16:55:15 -0400] ellisera: StormSIlver: ok, so now it's saying there are syntax errors near lines of code I haven't touched *headdesk*
[2012-05-25 16:55:48 -0400] StormSilver: ellisera: Probably got some nesting incorrect
[2012-05-25 16:55:53 -0400] qzio: Mithrandir: post-installation script returned 1
[2012-05-25 16:55:55 -0400] juliancdunn: this might be heresy but I don't like the opscode/apache2 cookbook
[2012-05-25 16:56:02 -0400] juliancdunn: can someone recommend one that's more RHEL-friendly?
[2012-05-25 16:56:23 -0400] jtimberman: juliancdunn: why don't you like that cookbook?
[2012-05-25 16:56:32 -0400] ellisera: StormSilver: I just wrapped it in an if clause and added the end for that if clause at the end
[2012-05-25 16:56:34 -0400] jtimberman: it works fine on rhel
[2012-05-25 16:56:43 -0400] juliancdunn: jtimberman: it's just a personal preference, I don't like the debian way of doing things
[2012-05-25 16:56:44 -0400] StormSilver: ellisera: Hmmmm
[2012-05-25 16:56:52 -0400] jtimberman: ok
[2012-05-25 17:00:05 -0400] jtimberman: qzio: i suspect you need to set the password attributes in your JSON file passed to chef-solo.
[2012-05-25 17:00:30 -0400] jtimberman: qzio: since chef-solo doesn't store the node attributes, and the passwords are randomly generated and set as attributes the first time chef runs.
[2012-05-25 17:01:40 -0400] qzio: jtimberman: yes i also think it's something like that.
[2012-05-25 17:02:13 -0400] qzio: jtimberman: i just need to work a couple of hours on this completely broken system until i can test again... *bitterness*
[2012-05-25 17:05:56 -0400] lledet: anyone have trouble with knife solo timing out when cooking a server?
[2012-05-25 17:07:20 -0400] lledet: it only happens when compiling ruby which takes a while
[2012-05-25 17:09:21 -0400] jtimberman: qzio: I'm sorry that this caused you trouble.
[2012-05-25 17:09:32 -0400] matschaffer: jtimberman: ah, thatnks. that's not bad. Does opscode need a designer? I know a good one ;)
[2012-05-25 17:09:32 -0400] jtimberman: qzio: I'll update the mysql cookbook README to clarify about the passwords.
[2012-05-25 17:09:49 -0400] jtimberman: matschaffer: hehehe. We have one :), and work is in progress on the management console.
[2012-05-25 17:09:58 -0400] jtimberman: Thats about all the status I know about it though.
[2012-05-25 17:10:06 -0400] matschaffer: jtimberman: ah, good to hear
[2012-05-25 17:10:29 -0400] matschaffer: I've done a few client demos so far where they feel a little underwhelmed about the webui
[2012-05-25 17:10:36 -0400] matschaffer: looking forward to seeing what's up
[2012-05-25 17:10:49 -0400] jtimberman: i think that was discussed in one of the talks we had at chefconf
[2012-05-25 17:11:56 -0400] matschaffer: lovely
[2012-05-25 17:12:14 -0400] matschaffer: wish I could have made it. Life happened this year. Hoping for a quieter next year
[2012-05-25 17:12:17 -0400] qzio: jtimberman: ok cool. i was forced to do a "cd /; find -name "*mysql*" |xargs rm -rf" to get my apt get working
[2012-05-25 17:13:02 -0400] qzio: successfully installed mysql-server using old-school ssh. will try to fiddle with the mysql recipe another time eheh..
[2012-05-25 17:14:19 -0400] jtimberman: matschaffer: youtube.com/user/opscode
[2012-05-25 17:14:25 -0400] jtimberman: all the talks were recorded and posted.
[2012-05-25 17:15:07 -0400] qzio: jtimberman: as-is the mysql::server recipe should be considered super-harmful. I can't belive I'm the only one using chef-solo trying to install mysql
[2012-05-25 17:15:37 -0400] lledet: qzio: i'm having problems with that too, but more specifically mysql::server_ec2
[2012-05-25 17:15:37 -0400] jtimberman: the foodfightshow guys have captured a list of slides and talks: https://github.com/foodfight/showz/blob/master/chefconf_slides.md
[2012-05-25 17:15:52 -0400] alex88: hi guys, when trying to go to the status page i get this in logs: http://pastebin.com/Hth5ytBG but chef server is listening to port 4000..any idea?
[2012-05-25 17:16:14 -0400] jtimberman: qzio: have you tried it on a fresh system after setting the password attributes in the json?
[2012-05-25 17:16:36 -0400] hoover_damm: alex88, solr isn't running?
[2012-05-25 17:17:05 -0400] alex88: hoover_damm, oh, nope let me try to start it
[2012-05-25 17:17:37 -0400] alex88: hoover_damm, oh, vm doesn't have enough memory :)
[2012-05-25 17:18:00 -0400] lledet: the git cookbook has a syntax error in it
[2012-05-25 17:22:39 -0400] miah: fix it
[2012-05-25 17:26:53 -0400] jtimberman: lledet: are you using 0.10.0 from the community site, or the latest master in the github repo?
[2012-05-25 17:27:07 -0400] matschaffer: damn, how did I miss spiceweasel
[2012-05-25 17:29:46 -0400] jtimberman: anyway, i fixed the missing end in master and pushed, but we recommend you consume cookbooks from the community site instead of using the git repo directly
[2012-05-25 17:31:59 -0400] resno: where do i findthe user key with host chef?
[2012-05-25 17:34:44 -0400] jtimberman: resno: manage.opscode.com, upper right click on your username.
[2012-05-25 17:35:35 -0400] jtimberman: hmm, appears that has changed and the private key download link is not on that page.
[2012-05-25 17:35:44 -0400] resno: jtimberman: :-)
[2012-05-25 17:36:06 -0400] jtimberman: resno: "public profile"
[2012-05-25 17:36:10 -0400] jtimberman: there's a "get private key" link there
[2012-05-25 17:36:44 -0400] alex88: hoover_damm, after giving more ram it worked, thank you :)
[2012-05-25 17:36:48 -0400] resno: jtimberman: thanks!
[2012-05-25 17:36:56 -0400] jtimberman: you can also use the "hosted-chef" rubygem
[2012-05-25 17:37:19 -0400] jtimberman: https://github.com/opscode/hosted-chef-gem/blob/master/README.md
[2012-05-25 17:37:47 -0400] resno: jtimberman: im following the fast start guide
[2012-05-25 17:39:14 -0400] Urocyon: Anyone played with juju-chef integration here?  Got chef charms to share?
[2012-05-25 17:40:21 -0400] UForgotten: damn
[2012-05-25 17:40:31 -0400] UForgotten: canonical has to put their fingers into everything dont they
[2012-05-25 17:41:47 -0400] geekbri: if somebody at opscode reopens my ticket with a comment, and i response in a comment, what are the odds they will actually check the ticket and respond back :)
[2012-05-25 17:44:12 -0400] geekbri: that was a silly question, i'll just assume the answer is, likely
[2012-05-25 17:51:09 -0400] resno: is this rightto add a cook tothe run_list? knife node run_list add NODENAME "recipe[getting-started]"
[2012-05-25 17:54:54 -0400] alex88: hoover_damm, now it works, on status i see the nodes, but last checkin of a brand new node is 13 mins ago, how often does it updates stats?
[2012-05-25 17:58:45 -0400] geekbri: any chance steven danna hangs out in here?
[2012-05-25 17:59:52 -0400] resno: ah, i figured it out
[2012-05-25 18:17:34 -0400] magoo: any way to tell librarion NOT to install a cookbook?
[2012-05-25 18:18:53 -0400] magoo: i've got a customized nginx that i'm serving out of site-cookbooks but nginx is a prereq to one of the cookbooks managed by librarian... so I've got two nginx cookbooks that knife is seeing and building a composite from
[2012-05-25 18:19:08 -0400] alex88: my question is open to everyone :)
[2012-05-25 18:21:17 -0400] hoover_damm: alex88, status is only updated when chef runs
[2012-05-25 18:21:35 -0400] hoover_damm: alex88, do run chef-client daemonized? using the chef-client cookbook makes this portion easy
[2012-05-25 18:21:42 -0400] geekbri: magoo: Could you host your own nginx cookbook on github and explicity require that in librarian-chef?  This way the preq is fulfilled with yours instead of the other?
[2012-05-25 18:22:24 -0400] alex88: hoover_damm, oh, thank you :)
[2012-05-25 18:23:05 -0400] monvillalon: Im trying to use chef's mangement workstation rakefile, but its failing when including chef
[2012-05-25 18:24:30 -0400] bencaron: magoo: librarian also offer a way to point to a specific local path
[2012-05-25 18:24:55 -0400] geekbri: forgot about that, thats probably easier to use than the github solution depending on your workflow
[2012-05-25 18:24:55 -0400] magoo: geekbri: my entire chef folder is in a private repo so it would be a bit redundant
[2012-05-25 18:24:56 -0400] bencaron: search :path in the docs
[2012-05-25 18:25:08 -0400] geekbri: magoo: see what bencaron said :)
[2012-05-25 18:25:08 -0400] magoo: bencaron: ah, nice
[2012-05-25 18:25:13 -0400] magoo: that'll work nicely
[2012-05-25 18:27:15 -0400] magoo: well, that's going to end up making a copy of it
[2012-05-25 18:27:30 -0400] geekbri: into cookbooks yeah
[2012-05-25 18:28:01 -0400] magoo: which is fine for now but I'm concerned for when chef eliminates the ability to have cookbooks in multiple places
[2012-05-25 18:28:11 -0400] magoo: "IMPORTANT: In a future version of Chef, this behavior will be removed and you will no longer
[2012-05-25 18:28:14 -0400] magoo: be able to have the same version of a cookbook in multiple places in your cookbook_path."
[2012-05-25 18:29:50 -0400] geekbri: maybe you should file an issue with librarian-chef
[2012-05-25 18:31:20 -0400] magoo: yeah, probably my best bet for now
[2012-05-25 18:31:36 -0400] matschaffer: magoo: I let librarian own the cookbooks dir, and it pretty much works out
[2012-05-25 18:31:42 -0400] matschaffer: just gotta make sure not to edit anything in there
[2012-05-25 18:32:07 -0400] magoo: matschaffer: librarian does own the cookbooks dir but i've customized nginx and it lives in site-cookbooks
[2012-05-25 18:32:26 -0400] magoo: so knife sees two cookbooks with the same name and complains
[2012-05-25 18:32:41 -0400] geekbri: pointing to your nginx in the cheffile doesn't solve it though?
[2012-05-25 18:32:43 -0400] matschaffer: I only keep the cookbooks dir in my knife config
[2012-05-25 18:32:55 -0400] geekbri: oh right i see why nevermind
[2012-05-25 18:33:05 -0400] matschaffer: then customized stuff goes in cookbooks-sources and there's a :path in the Cheffile
[2012-05-25 18:33:34 -0400] geekbri: ^ proper workflow for using librarian and site-cookbooks
[2012-05-25 18:33:41 -0400] matschaffer: so you need to re-run librarian before uploading cookbooks which is a little lame, but only took a couple lines of bash to get a decent workflow back
[2012-05-25 18:33:50 -0400] geekbri: yeah that is annoying.
[2012-05-25 18:34:02 -0400] matschaffer: I kinda wanna try spiceweasel now cause of that :)
[2012-05-25 18:34:04 -0400] geekbri: but instead of doing !knife cookbook upload from vim i just do !knife myuploadbashscript
[2012-05-25 18:34:04 -0400] magoo: i'm moving away from librarian
[2012-05-25 18:34:09 -0400] magoo: i don't like the added steps
[2012-05-25 18:34:18 -0400] matschaffer: I tried the librarian's knife integration but couldn't get that to work eitehr
[2012-05-25 18:34:19 -0400] magoo: i'll just version control cookbooks again
[2012-05-25 18:34:21 -0400] hoover_damm: last time i used that was 0.8, I just decided to learn a little new
[2012-05-25 18:34:30 -0400] hoover_damm: and avoid site-cookbooks and just put what i want in chef-repo
[2012-05-25 18:34:52 -0400] miketheman: anyone have an example/cookbook resource for AWS/EC2/EBS 4-disk, raid10 mdadm array somewhere?
[2012-05-25 18:34:55 -0400] hoover_damm: unfortunately it leaves that whole upstream issue dangling
[2012-05-25 18:35:13 -0400] hoover_damm: miketheman, I can share a 16disk one but uhm the idea is crazy
[2012-05-25 18:35:26 -0400] miketheman: hoover_damm: how crazy is it?
[2012-05-25 18:35:28 -0400] hoover_damm: you should likely host baremetal or something or iscsi as ebs raiding is just crazy
[2012-05-25 18:35:39 -0400] geekbri: i use the lvm / volumes cookbooks by kohder but the documentation stinks
[2012-05-25 18:35:42 -0400] hoover_damm: 16 volumes and I can get 6k ops/second read (225MB/s)
[2012-05-25 18:35:58 -0400] hoover_damm: costs about 500$ whenever i use the cookbook
[2012-05-25 18:36:05 -0400] miketheman: ouch
[2012-05-25 18:36:07 -0400] hoover_damm: and 200$ per month for the server each month
[2012-05-25 18:36:20 -0400] hoover_damm: so 300$ setup for ebs raiding, 200$ recurring
[2012-05-25 18:36:32 -0400] miketheman: well, I need it for a protoype, so I guess I'll deal
[2012-05-25 18:36:39 -0400] hoover_damm: understood
[2012-05-25 18:36:42 -0400] hoover_damm: sec lemme post
[2012-05-25 18:36:59 -0400] hoover_damm: you can modify the volume count easily
[2012-05-25 18:37:07 -0400] miketheman: great
[2012-05-25 18:38:13 -0400] hoover_damm: miketheman, btw I do get a bug with 16 volumes where the volume isn't created right... so dropping to 8 gets around that
[2012-05-25 18:38:52 -0400] miketheman: hoover_damm: I'm using amazon linux, it's usually pretty 'ok' for that kind of internal ec2/ebs stuff
[2012-05-25 18:39:34 -0400] hoover_damm: hehe I actually do lvm striping of ephemeral
[2012-05-25 18:39:55 -0400] knuckolls: why lvm? i just straight raid them with mdadm
[2012-05-25 18:39:58 -0400] hoover_damm: miketheman, c1.xlarge ephemeral 4 disk raid array... http://likens.us/c1xlarge/c1xlarge6/
[2012-05-25 18:40:15 -0400] hoover_damm: knuckolls, both use device-mapper in the end, the argument of lvm vs mdadm is stupid
[2012-05-25 18:40:24 -0400] hoover_damm: both have their points
[2012-05-25 18:40:46 -0400] knuckolls: i guess i was just curious, i'd never even considered using it
[2012-05-25 18:41:43 -0400] hoover_damm: miketheman, the aws keys are using encryption
[2012-05-25 18:41:45 -0400] hoover_damm: miketheman, https://github.com/damm/ebs
[2012-05-25 18:41:57 -0400] hoover_damm: feel free to fork and modify, check out the attributes to change the size
[2012-05-25 18:42:24 -0400] hoover_damm: knuckolls, :) both use device-mapper in the end actually.  There is very little of value between the two except on how you operate the spindles perhaps
[2012-05-25 18:42:31 -0400] miketheman: hoover_damm: thanks
[2012-05-25 18:42:37 -0400] kisoku: someone at the conference had a knife plugin for improving encrypted data bag stuff
[2012-05-25 18:42:46 -0400] kisoku: does anyone know where that lives ?
[2012-05-25 18:43:07 -0400] kisoku: knife edg or something
[2012-05-25 18:43:11 -0400] kisoku: edb that is
[2012-05-25 18:43:30 -0400] hoover_damm: miketheman, y/w.  if you need latency, colocating and getting a amazon direct link from a colo is better for hosting mongodb
[2012-05-25 18:43:46 -0400] hoover_damm: without raid your performance is pretty much the best on amazon linux
[2012-05-25 18:43:51 -0400] hoover_damm: if you were curious
[2012-05-25 18:43:58 -0400] miketheman: possibly. this isn't for mongo though.
[2012-05-25 18:44:13 -0400] hoover_damm: :) well Voxel is dropping 16gb for 200$/month
[2012-05-25 18:44:19 -0400] hoover_damm: baremetal
[2012-05-25 18:56:11 -0400] miketheman: hm. worth considering
[2012-05-25 18:56:29 -0400] miketheman: does `knife voxel server create` exist and work yet?
[2012-05-25 18:56:50 -0400] monvillalon: how do i know if the system is 64 bits?
[2012-05-25 18:57:47 -0400] miketheman: you count them, one by one. :)
[2012-05-25 18:58:21 -0400] miketheman: or you execute `uname -p`
[2012-05-25 18:59:12 -0400] Wohali: qq on chef-client. Is there any built-in way that prevents multiple invocations of chef-client from running at the same time on a given node?
[2012-05-25 18:59:39 -0400] miketheman: Wohali: I don't think so
[2012-05-25 18:59:49 -0400] Wohali: miketheman: That's what I was afraid of. Thanks.
[2012-05-25 19:00:13 -0400] miketheman: "be careful" ;)
[2012-05-25 19:00:30 -0400] Wohali: i might file a ticket on it, it seems like a desirable option to have
[2012-05-25 19:01:18 -0400] Wohali: for now I may just wrap running it with some sort of shell script and lockfile.
[2012-05-25 19:01:25 -0400] kisoku: Wohali, you'll find your package manager usually winds up accidentally acting as a nice lock service when these things happen
[2012-05-25 19:01:56 -0400] Wohali: kisoku: Not really. I have on a couple of nodes some very long-running cookbooks that I've had deal with stepping on.
[2012-05-25 19:01:58 -0400] kisoku: ie. one chef-client will be installing packages and block the other client from progressing
[2012-05-25 19:02:15 -0400] Wohali: The package installation stuff goes rather quickly on stable nodes...
[2012-05-25 19:02:34 -0400] kisoku: in those cases you can always make your cookbooks do simple a simple file style lock
[2012-05-25 19:02:50 -0400] kisoku: if you are really worried about it
[2012-05-25 19:02:56 -0400] Wohali: Yup, that's what I've done...
[2012-05-25 19:03:12 -0400] Wohali: I may just have the crontab entry be a shell script with a file lock, that'd get me the behaviour I really want.
[2012-05-25 19:03:46 -0400] Wohali: using flock
[2012-05-25 19:03:55 -0400] hoover_damm: miketheman, hapi for voxel is on their page
[2012-05-25 19:04:02 -0400] hoover_damm: shoukd be easy
[2012-05-25 19:04:32 -0400] Wohali: thanks again folks, back in a bit...hopefully have an ohai plugin or two to publish out.
[2012-05-25 19:04:35 -0400] dfried: I'm having an issue with creating a user with chef solo on centos6 via vagrant. It's saying permission denied for the useradd command. Any idea why that would be?
[2012-05-25 19:05:09 -0400] miketheman: vagrant user executing the cookbook/chef-run?
[2012-05-25 19:05:31 -0400] dfried: I believe so. What user does chef normally run as on the client?
[2012-05-25 19:05:55 -0400] hoover_damm: with vagrant it's vagrant
[2012-05-25 19:06:01 -0400] hoover_damm: it doesn't run as root
[2012-05-25 19:06:29 -0400] hoover_damm: miketheman, also the dedicated instances is what I mentioned.  Not the cloud, but it would be neat to have access to the VoxCloud servers via knife.
[2012-05-25 19:06:50 -0400] miketheman: hoover_damm: ah, that's what I was after. I want elasticity
[2012-05-25 19:06:51 -0400] dfried: on a normal client/server setup it runs as root, though?
[2012-05-25 19:07:40 -0400] hoover_damm: miketheman, I'm after solid hosting that has an api provision option for custom hardware
[2012-05-25 19:08:16 -0400] hoover_damm: it's that or encrypt all traffic between the two
[2012-05-25 19:08:46 -0400] hoover_damm: for me it's i/o latency, it's cpu performance
[2012-05-25 19:08:53 -0400] hoover_damm: the whole bag of wax
[2012-05-25 19:09:22 -0400] Cope_: +1
[2012-05-25 19:09:59 -0400] Cope_: If you can't do $some_solaris_flavour + crossbow, LXC is the bollocks.
[2012-05-25 19:10:02 -0400] hoover_damm: if i order standard servers I can get them provisioned fast, if I customize
[2012-05-25 19:10:06 -0400] bdha: +1
[2012-05-25 19:10:07 -0400] hoover_damm: i do OCZ Denali
[2012-05-25 19:10:16 -0400] hoover_damm: yeah I really wish I could do solaris
[2012-05-25 19:10:22 -0400] geekbri: i bollocks a good thing or a bad thing
[2012-05-25 19:10:23 -0400] miketheman: Cope_: bollocks, or dogs' bollocks?
[2012-05-25 19:10:25 -0400] hoover_damm: this is one of those spots I really do want it.
[2012-05-25 19:10:35 -0400] Cope_: miketheman: good bollocks :)
[2012-05-25 19:10:39 -0400] hoover_damm: thyey do offer a custom image as well
[2012-05-25 19:10:47 -0400] hoover_damm: maybe i should see if i can get some solaris
[2012-05-25 19:10:50 -0400] miketheman: Cope_: then dogs' bollocks
[2012-05-25 19:10:54 -0400] Cope_: quite
[2012-05-25 19:11:16 -0400] Cope_: hoover_damm: ServerBeach told me today they were totally ok with me network installing OmniOS
[2012-05-25 19:11:33 -0400] miketheman: http://www.phrases.org.uk/meanings/dog's%20bollocks.html
[2012-05-25 19:11:54 -0400] Cope_: where did _ come from.. grr
[2012-05-25 19:12:35 -0400] Cope: dinner smells amazing - I must away; back soon chums.
[2012-05-25 19:12:42 -0400] hoover_damm: i don't know if i'd do omni now or just illumos
[2012-05-25 19:12:56 -0400] Cope: well.. you need a userland, right?
[2012-05-25 19:13:00 -0400] hoover_damm: truthfully it doesn't matter at this shop is ubuntu and it'd be fun to get the OK
[2012-05-25 19:13:12 -0400] Cope: I hear that
[2012-05-25 19:13:20 -0400] hoover_damm: and it complicates us immediately
[2012-05-25 19:13:32 -0400] hoover_damm: as part of this will be mongodb / postgresql / dunno
[2012-05-25 19:13:52 -0400] hoover_damm: puts is head into the package management situation with a source solution / pkgsrc
[2012-05-25 19:14:07 -0400] Cope: IPS ftw dude, IPS is easy to get running on Solaris 10
[2012-05-25 19:14:11 -0400] hoover_damm: works for me, not sure if the other
[2012-05-25 19:14:13 -0400] Cope: I also like pkgsrc though
[2012-05-25 19:14:22 -0400] hoover_damm: it's not always about me
[2012-05-25 19:14:33 -0400] Cope: yeah... it's always about me... herein lies the difference
[2012-05-25 19:14:36 -0400] Cope:  /troll
[2012-05-25 19:14:38 -0400] Cope: dinner &
[2012-05-25 19:14:43 -0400] cap10morgan: So subscribes cannot use the resource[name] syntax?
[2012-05-25 19:15:03 -0400] cap10morgan: it needs resources() wrapped around it?
[2012-05-25 19:15:16 -0400] cap10morgan: http://wiki.opscode.com/pages/diffpages.action?originalId=24772642&pageId=24772643
[2012-05-25 19:53:43 -0400] KarlHungus: I'm experiencing a problem with the unix command mixin. I've put the debug output, stacktrace and relevant files on https://gist.github.com/3a9ed198d704f7fc3a8e
[2012-05-25 19:54:34 -0400] KarlHungus: i have overloaded the freebsd service provider (included in the gist as well), but the only change is to make the status command use "onestatus" instead of "status"
[2012-05-25 19:56:18 -0400] KarlHungus: i'm a bit stumped... any ideas?
[2012-05-25 20:00:08 -0400] hoover_damm: KarlHungus, could you just use status_command?
[2012-05-25 20:00:50 -0400] hoover_damm: service "syslog-ng" do
[2012-05-25 20:00:56 -0400] hoover_damm: action [:enable, :start]
[2012-05-25 20:01:03 -0400] hoover_damm: start_command = "foobar"
[2012-05-25 20:01:08 -0400] hoover_damm: .. end
[2012-05-25 20:12:10 -0400] KarlHungus: hoover_damm: i could, but that status command works
[2012-05-25 20:13:11 -0400] KarlHungus: i think using onestatus over status is a red herring. thats a minor tweak to allow the service resource to get its status on freebsd before the service is enabled in rc.conf
[2012-05-25 20:24:10 -0400] KarlHungus: oh, also... do pull requests to a cookbook w/ JIRA id get added to the issue as a comment?
[2012-05-25 20:27:29 -0400] miketheman: KarlHungus: I think you have to manually do that.
[2012-05-25 20:28:17 -0400] KarlHungus: ok. thanks. will do
[2012-05-25 20:34:16 -0400] dunniganp: hi, what are some options for securely getting the validation.pem file to an instance when bootstrapping? I see a) passing it in as part of the boot script, b) downloading from a file store such as s3.
[2012-05-25 20:36:03 -0400] knuckolls: dunniganp: look at how knife-ec2 does it, it creates the server then bootstraps it
[2012-05-25 20:37:27 -0400] knuckolls: the actual code for that might be in 'knife bootstrap' now that i think about it
[2012-05-25 20:37:41 -0400] dunniganp: I messed with it a couple weeks ago. I believe knife ssh's it to the server doesn't it?
[2012-05-25 20:38:07 -0400] knuckolls: 99% sure that it does, yes
[2012-05-25 20:38:34 -0400] Cope: it gets sent over the channel
[2012-05-25 20:38:37 -0400] knuckolls: no i'd say 100% sure.
[2012-05-25 20:38:57 -0400] Cope: so - it's pretty safe - in that your ssh channel is encrypted
[2012-05-25 20:39:04 -0400] resno: any chef workers about? ive found a broken/questionaable link on the guide
[2012-05-25 20:39:10 -0400] Cope: speak!
[2012-05-25 20:39:26 -0400] resno: Cope: are you said person?
[2012-05-25 20:39:37 -0400] Cope: i'm an Opscode person, if that's what you mean
[2012-05-25 20:39:53 -0400] c_t: grown in a vat, like all Opscode people
[2012-05-25 20:40:02 -0400] dunniganp: ok, so we have pass it as part of a boot script, pull down from s3, push it after ssh comes up. Any other clever options?
[2012-05-25 20:40:17 -0400] resno: Cope: bottom of this page, "chef tutorial session" is no good http://wiki.opscode.com/display/chef/Fast+Start+Guide
[2012-05-25 20:40:30 -0400] resno: Cope: the ssl cert is gone and it doesnt resolve after accepting it
[2012-05-25 20:40:58 -0400] knuckolls: dunninganp: if it's ec2 you can put it in the user-data, although i wouldn't suggest moving private keys around that way
[2012-05-25 20:41:27 -0400] Cope: resno: ack - that's broken - thank you
[2012-05-25 20:41:47 -0400] knuckolls: i've found that the python cookbook from the community website flat out won't work on ubuntu 10.04.
[2012-05-25 20:41:49 -0400] knuckolls: python_pip[virtualenv] (python::virtualenv line 23) has had an error
[2012-05-25 20:41:51 -0400] dunniganp: user-data doesn't seem secure.
[2012-05-25 20:41:52 -0400] resno: i was hoping to watch it... it it around somewhere Cope
[2012-05-25 20:41:59 -0400] knuckolls: are there other python cookbooks out there that i can just pick up off the shelf?
[2012-05-25 20:43:07 -0400] knuckolls: dunninganp: yeah i basically never think about the validator becuase it's handled by knife ec2 which calls bootstrap internally i believe.
[2012-05-25 20:43:41 -0400] Cope: resno: not sure; I'd check blip.tv - but I don't recognise the title; Our open training material is worth a look though: https://github.com/opscode/chef-fundamentals
[2012-05-25 20:44:18 -0400] geekbri: knife ec2 does call bootstrap internally.
[2012-05-25 20:45:01 -0400] Cope: dunniganp: what worries you about user-data?
[2012-05-25 20:45:33 -0400] Cope: knuckolls: full stack trace would be handy; i'd expect the pip LWRP to work on lucid
[2012-05-25 20:45:48 -0400] knuckolls: yeah i'll gist it up
[2012-05-25 20:45:54 -0400] knuckolls: was about to try to downgrade to a previous version
[2012-05-25 20:45:56 -0400] Cope: thanks
[2012-05-25 20:48:10 -0400] knuckolls: Cope: https://gist.github.com/2e32b578dd85a5807d76
[2012-05-25 20:49:38 -0400] Cope: knuckolls: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2012-05-25 20:49:49 -0400] Cope: can i see teh stacktrace>
[2012-05-25 20:49:50 -0400] Cope: ?
[2012-05-25 20:50:22 -0400] knuckolls: haha yeah long day ;)
[2012-05-25 20:50:52 -0400] resno: Cope: i just set it up using that guide and at the moment im thhinking puppet is easier to configure, why bother with chef
[2012-05-25 20:51:41 -0400] knuckolls: Cope: https://gist.github.com/75dd82e986dcbd3a5db4
[2012-05-25 20:51:45 -0400] Cope: resno: I'm sorry you feel that way. Your feedback is very useful - I'd be curious to know what you found harder, so we can improve.
[2012-05-25 20:52:05 -0400] dunniganp: Cope: with the user-data, that's open for read for anyone on the box. Not that big a deal, just looking for all alternatives
[2012-05-25 20:52:36 -0400] Cope: dunniganp: right; frankly if dude's on your box, you got bigger problems... but point taken ;)
[2012-05-25 20:52:52 -0400] dunniganp: yup
[2012-05-25 20:53:03 -0400] resno: Cope: maybe its just a misunderstanding and maybe i just glossed over it on the guide. but what does the ops page actually do for me?
[2012-05-25 20:53:32 -0400] Cope: resno: what do you mean by ops page? Sorry if I'm being dumb - but I don't recognize the term
[2012-05-25 20:53:48 -0400] hoover_damm: miketheman, knife-voxel exists btw
[2012-05-25 20:53:49 -0400] knuckolls: dunninganp: really just boils down to how you initialize pulling it on the box. you either push it there with ssh initially, or pull it from somewhere else ideally over a secure channel. scp from elsewhere, https, etc
[2012-05-25 20:53:54 -0400] resno: Cope: i made the term up... let me find more offically what its called
[2012-05-25 20:54:00 -0400] hoover_damm: miketheman, https://github.com/voxeldotnet/knife-voxel
[2012-05-25 20:54:12 -0400] knuckolls: dunninganp: or it's there on the machine to begin with if you bake it into the AMI
[2012-05-25 20:54:22 -0400] resno: Cope: oh mange.opscode.com
[2012-05-25 20:54:41 -0400] dunniganp: k, thx
[2012-05-25 20:55:27 -0400] Cope: resno: right, so if you're a hosted chef customer (or free user) then manage.opscode.com is just a handy web interface
[2012-05-25 20:55:30 -0400] resno: Cope: feel free to point me to a guide. as i am just stepping into comparing the 2
[2012-05-25 20:55:40 -0400] Cope: you can view and alter nodes and run lists, and look at recipes and stuff
[2012-05-25 20:56:05 -0400] Cope: realistically it's not a huge value add... but some folk like it
[2012-05-25 20:56:11 -0400] resno: ah ok
[2012-05-25 20:56:36 -0400] resno: does installing it on my local server give me that frontend or no?
[2012-05-25 20:56:37 -0400] Cope: what kind of system are you modeling?
[2012-05-25 20:57:06 -0400] Cope: resno: so... if you install the open source chef server, you get *a* web interface; it's not identical to the OHC web interface
[2012-05-25 20:57:10 -0400] Cope: but it's broadly similar
[2012-05-25 20:57:53 -0400] resno: Cope: a friend highly recommended chef over puppet so, im trying to give it a fair shake :)
[2012-05-25 20:58:17 -0400] Cope: excellent - well we'll do whatever we can to make it easy to learn :)
[2012-05-25 20:58:40 -0400] resno: i can see chef is more ruby heavy then the others..
[2012-05-25 20:59:07 -0400] Cope: well.... you don't need to know much Ruby - I reckon a 1 hr crash course is enough
[2012-05-25 20:59:16 -0400] Cope: and we have a wiki page about it
[2012-05-25 20:59:26 -0400] resno: oh, where?
[2012-05-25 20:59:27 -0400] Cope: AND! A talk from last week's chefconf!
[2012-05-25 20:59:52 -0400] knuckolls: resno: it's nice being able to fall back to a full programming language since it's all just a nice DSL written in ruby, instead of a parsed format like puppet's manifests are
[2012-05-25 21:00:04 -0400] Cope: resno: http://wiki.opscode.com/display/chef/Just+Enough+Ruby+for+Chef
[2012-05-25 21:00:12 -0400] resno: knuckolls: ya, i can see that has an advantage over others
[2012-05-25 21:00:27 -0400] knuckolls: when i was deciding what to learn I found that comment to come up over and over with people that had "gone all the way" with puppet
[2012-05-25 21:00:27 -0400] dunniganp: Ok, another validation.pem question, different angle I have one organization on Chef Server. Can I  create a validation public key temporarily and have more than one at a time?
[2012-05-25 21:00:30 -0400] Cope: resno: http://www.youtube.com/watch?v=Q0B-H3Qo_s4&feature=plcp
[2012-05-25 21:01:18 -0400] Cope: dunniganp: no you can only have one key at once
[2012-05-25 21:02:00 -0400] dunniganp: ok, but I assume you can rotate them? Sorry I haven't looked that up but while I'm here ...
[2012-05-25 21:02:07 -0400] unrotund: hey chefs, I'm sure this has been asked far too recently, as of late, but installing chef on ubunut 12.04...
[2012-05-25 21:02:21 -0400] unrotund: best method, getting errors when I try the apt method
[2012-05-25 21:03:03 -0400] resno: knuckolls: did you start with puppet or chef?
[2012-05-25 21:03:05 -0400] miketheman: unrotund: use omnibus installer from here: http://www.opscode.com/chef/install/
[2012-05-25 21:03:32 -0400] Cope: unrotund: you could use the omnibus installer, by going to http://opscode.com/chef/install
[2012-05-25 21:03:44 -0400] knuckolls: resno: chef. after reading and reading and reading a lot about both. i'm really pleased with my decision. the docs are better than they used to be. it was a bit of a rough ride learning the concepts to begin with
[2012-05-25 21:03:45 -0400] unrotund: thanks mike, I guess I should have clarified...chef server? sorry :-/
[2012-05-25 21:03:48 -0400] Cope: unrotund: alternatively, get a modern ruby (1.9.2+) and use gems
[2012-05-25 21:03:50 -0400] knuckolls: but now i think it's pretty straightforward.
[2012-05-25 21:04:46 -0400] miketheman: unrotund: they have one for server, too
[2012-05-25 21:04:58 -0400] resno: knuckolls: ah, ok.
[2012-05-25 21:05:10 -0400] unrotund: really? same script?
[2012-05-25 21:05:31 -0400] c_t: It's not an out of date ruby, it's heirloom ruby
[2012-05-25 21:05:42 -0400] miketheman: unrotund: no, there's another one somewhere
[2012-05-25 21:05:58 -0400] knuckolls: Cope: see anything in that stacktrace?
[2012-05-25 21:06:09 -0400] unrotund: miketheman: yeah I was hoping that would be the case, but googling to no avail over here
[2012-05-25 21:06:52 -0400] Cope: knuckolls: sorry - been distracted!
[2012-05-25 21:07:01 -0400] knuckolls: haha np :)
[2012-05-25 21:07:15 -0400] Cope: i need to get some rest... /me checks time
[2012-05-25 21:07:32 -0400] resno: knuckolls: i jumped in and distracted him :)
[2012-05-25 21:07:41 -0400] Cope: kallistec: ping... or some other person for whom it's early afternoon?
[2012-05-25 21:07:53 -0400] Cope: schisamo: or ping... you wrote the LWRP :)
[2012-05-25 21:08:03 -0400] knuckolls: thanks Cope
[2012-05-25 21:08:12 -0400] Cope: night chums... back tomorrow
[2012-05-25 21:08:27 -0400] unrotund: thanks cope for the suggestions 'night
[2012-05-25 21:08:52 -0400] Cope: resno: stick with it - you'll find we're a friendly lot, and Chef is hugely powerful and fun when you get used to it.
[2012-05-25 21:09:10 -0400] resno: Cope: ill give it a try :).. community seems good
[2012-05-25 21:09:22 -0400] knuckolls: resno: i was cheffing up stuff for fun last night. maybe that's just me ;)
[2012-05-25 21:10:01 -0400] knuckolls: well if any opscoders are around, downgrading to a previous version of the python cookbook didn't work either
[2012-05-25 21:10:27 -0400] knuckolls: chef 0.10.10 and python 1.04 and 1.06
[2012-05-25 21:15:43 -0400] knuckolls: well they just sent us all home at the office and i'm taking them up on the offer. python will have to wait :)
[2012-05-25 21:15:50 -0400] knuckolls: seeya
[2012-05-25 21:23:01 -0400] dfried: Has anyone successfully written a recipe to install mongodb on centos6?
[2012-05-25 21:34:58 -0400] hoover_damm: dfried, that's a loaded question and a half
[2012-05-25 21:35:13 -0400] dfried: uh oh
[2012-05-25 21:35:40 -0400] dfried: how so?
[2012-05-25 21:35:50 -0400] hoover_damm: dfried, dfried well i've been using the edelights cookbook ubuntu and oi
[2012-05-25 21:35:52 -0400] hoover_damm: it's fun :)
[2012-05-25 21:36:05 -0400] hoover_damm: damn don't you hate when you say the nick twice ... ultratab?
[2012-05-25 21:36:08 -0400] hoover_damm: lol
[2012-05-25 21:36:44 -0400] dfried: right, but that's for apt, not yum
[2012-05-25 21:37:06 -0400] hoover_damm: yep
[2012-05-25 21:37:27 -0400] hoover_damm: google "github mongodb chef"
[2012-05-25 21:37:42 -0400] hoover_damm: if you haven't installed the google gem already :) it makes this chore a delight
[2012-05-25 21:38:28 -0400] hoover_damm: dfried, basically I think this is a spot where you get to fork and setup the yum part because i'm clearly not seeing it.
[2012-05-25 21:38:41 -0400] dfried: yeah, I've been trying to get that to work all day
[2012-05-25 21:38:45 -0400] hoover_damm: dfried, don't fret replacing the installation part shouldn't be that hard.
[2012-05-25 21:39:15 -0400] hoover_damm: oh they're not signed
[2012-05-25 21:39:20 -0400] dfried: it thinks it's installing it just fine, but when I check the server the repo isn't added and the program isn't installed
[2012-05-25 21:39:20 -0400] dfried: OH
[2012-05-25 21:39:22 -0400] dfried: is that it?
[2012-05-25 21:39:23 -0400] hoover_damm: http://www.mongodb.org/display/DOCS/CentOS+and+Fedora+Packages
[2012-05-25 21:39:26 -0400] hoover_damm: still?
[2012-05-25 21:39:26 -0400] bawt: still is giggling over that.
[2012-05-25 21:39:32 -0400] hoover_damm: bawt, forget still
[2012-05-25 21:39:33 -0400] bawt: okies!
[2012-05-25 21:39:38 -0400] hoover_damm: bawt, still?
[2012-05-25 21:39:52 -0400] dfried: hah
[2012-05-25 21:40:06 -0400] hoover_damm: if that's the case then :O you should just grab the tarballs
[2012-05-25 21:40:15 -0400] dfried: how do I get it to install unsigned repos
[2012-05-25 21:40:17 -0400] dfried: ah, ok
[2012-05-25 21:41:32 -0400] hoover_damm: you don't have to add the key
[2012-05-25 21:41:47 -0400] hoover_damm: https://github.com/opscode-cookbooks/yum
[2012-05-25 21:42:16 -0400] hoover_damm: but I haven't really used CentOS in eons so I could be wrong :)
[2012-05-25 21:42:29 -0400] hoover_damm: and I never signed my packages on el5
[2012-05-25 21:42:36 -0400] hoover_damm: so I hope they haven't made it harder
[2012-05-25 21:44:59 -0400] dfried: Ok, thanks, I'll do it from the tarball
[2012-05-25 22:12:25 -0400] miketheman: dfried: I published a "Work in progress" yesterday here: https://github.com/miketheman/fullstack/tree/master/cookbooks/mongodb
[2012-05-25 22:12:48 -0400] miketheman: It's by no means complete, but you can use some of the elements from the default.rb recipe to get it installed
[2012-05-25 22:16:59 -0400] xiaotian: hey folks, when use chef-solo,  in which step is  <root>/cache/ directory supposed to be created?
[2012-05-25 22:37:35 -0400] xiaotian: I am hitting EnclosingDirectory not found error http://pastebin.com/rVzP00Kg when
[2012-05-25 22:37:57 -0400] xiaotian: install nginx from source,
[2012-05-25 22:38:28 -0400] miketheman: you running as root?
[2012-05-25 22:38:33 -0400] xiaotian: yes
[2012-05-25 22:38:35 -0400] xiaotian: sudo
[2012-05-25 22:39:05 -0400] xiaotian: the directory was there after the run failed.
[2012-05-25 22:39:18 -0400] miketheman: and running a second time works?
[2012-05-25 22:39:41 -0400] xiaotian: went further but failed in a different place.
[2012-05-25 22:43:57 -0400] miketheman: interesting.
[2012-05-25 22:44:08 -0400] miketheman: can you show the file_cache_path in the client.rb?
[2012-05-25 22:44:09 -0400] xiaotian: let me run it again.
[2012-05-25 22:44:22 -0400] xiaotian: I am running chef-solo
[2012-05-25 22:44:46 -0400] miketheman: so solo.rb ?
[2012-05-25 22:45:36 -0400] xiaotian: I actually don't have file_cache_path in my solo.rb
[2012-05-25 22:45:47 -0400] miketheman: "By default Chef Solo will look in /etc/chef/solo.rb for its configuration. This configuration file has two required variables: file_cache_path and cookbook_path."
[2012-05-25 22:46:28 -0400] xiaotian: does that need to be a existing dir?
[2012-05-25 22:46:35 -0400] miketheman: probably not
[2012-05-25 22:46:40 -0400] xiaotian: or chef will create that?
[2012-05-25 22:46:46 -0400] miketheman: the default should be /var/chef-solo
[2012-05-25 22:47:04 -0400] xiaotian: let me add this to my solo.rb
[2012-05-25 22:47:12 -0400] xiaotian: and give it another shot.
[2012-05-25 22:47:35 -0400] miketheman: hm. it looks like the chef-client recipe actually does try to create the cache directory
[2012-05-25 22:47:37 -0400] andrewle: Is there a best practice with regards to managing /etc/chef/client.rb files across nodes? I'm tempted to turn mine into a template so I can make infrastructure wide chef configuration changes
[2012-05-25 22:47:47 -0400] miketheman: but try without the creation
[2012-05-25 22:47:57 -0400] xiaotian: yeah
[2012-05-25 22:48:08 -0400] xiaotian: file_cache_path File.expand_path("../cache", __FILE__)
[2012-05-25 22:48:20 -0400] miketheman: andrewle: the chef-client cookbook does that got me. http://community.opscode.com/cookbooks/chef-client
[2012-05-25 22:49:16 -0400] miketheman: gotta go. enjoy!
[2012-05-25 22:49:36 -0400] andrewle: miketheman: perfect thanks!
[2012-05-25 23:22:48 -0400] xiaotian: hey miketheman: got the same error, I opened any ssh session and did a watch ls -l chef_root
[2012-05-25 23:23:29 -0400] xiaotian: foudn the cache dir didn't get created until nginx recipe try to download the file to there.
[2012-05-25 23:24:14 -0400] xiaotian: I think chef is trying to create that directory on demand, but probably not synchronously.
[2012-05-25 23:26:34 -0400] atomic-penguin: xiaotian, were you one of the guys asking about using chef-solo, just on its own?
[2012-05-25 23:30:35 -0400] xiaotian: yeah
[2012-05-25 23:31:24 -0400] atomic-penguin: ben rockwood's talk from Chefconf, http://www.youtube.com/watch?v=he7vxhm6v64
[2012-05-25 23:31:59 -0400] atomic-penguin: he is managing multiple data centers with nothing but chef-solo
[2012-05-25 23:32:30 -0400] xiaotian: cool
[2012-05-25 23:35:00 -0400] xiaotian: thanks!
[2012-05-25 23:35:04 -0400] atomic-penguin: xiaotian, it is a truly interesting approach he has taken, probably nobody else is using chef-solo that way
[2012-05-25 23:56:21 -0400] hoover_damm: other then EY
[2012-05-25 23:56:22 -0400] hoover_damm: lol
[2012-05-25 23:57:43 -0400] hoover_damm: you can go insanely far with just chef-solo
[2012-05-25 23:59:08 -0400] atomic-penguin: hoover_damm, did not know that
[2012-05-25 23:59:28 -0400] hoover_damm: atomic-penguin, Engine Yard is the reason that chef-solo exists
[2012-05-25 23:59:31 -0400] hoover_damm: and fujin
[2012-05-25 23:59:43 -0400] atomic-penguin: I thought EY had their own chef platform built on top of chef-server
[2012-05-25 23:59:49 -0400] hoover_damm: nope

[2012-05-18 02:29:29 -0400] josanabr: hi,
[2012-05-18 02:29:50 -0400] josanabr: I have used chef with Vagrant
[2012-05-18 02:29:57 -0400] josanabr: Chef*
[2012-05-18 02:30:01 -0400] josanabr: and it works pretty well
[2012-05-18 02:30:28 -0400] josanabr: but now, I want to run my Chef recipes on virtual machines running on a private cloud, OpenStack
[2012-05-18 02:30:47 -0400] josanabr: someone can give some hints about how to do that
[2012-05-18 02:30:52 -0400] josanabr: pointers, links
[2012-05-18 02:32:23 -0400] jessicab: josanabr - the fast start guide in the wiki might be a good place to start - http://wiki.opscode.com/display/chef/OpenStack+Bootstrap+Fast+Start+Guide
[2012-05-18 02:33:34 -0400] josanabr: Thanks, I'm reading the section ;)
[2012-05-18 03:33:19 -0400] sparc_: Is it possible to update a databag with the Chef API?  I havn't done enough reading yet ....
[2012-05-18 03:47:41 -0400] pcn: sparc_ yes, but a node normally doesn't have sufficient permissions by default
[2012-05-18 03:59:13 -0400] Venkat_: Help with the apache2 recipe in opscode github. It doesn't' create the apache user which it configures in the User directive. Is it expected to be done manually? OS is redhat
[2012-05-18 04:00:59 -0400] pcn: Probably by OS - I think the package install does it in ubuntu
[2012-05-18 04:02:30 -0400] Venkat_: ok. Red Hat doesn't create the user perhaps that is the confusion. Should this then be done as a os specific addition in the the cookbook?
[2012-05-18 04:02:46 -0400] juliancdunn: it's not working for me, i.e. Chef never downloads the RPM because of this:
[2012-05-18 04:02:54 -0400] juliancdunn: not_if "rpm -qa | egrep -qx 'epel-release-#{epel}(|.noarch)'"
[2012-05-18 04:04:19 -0400] juliancdunn: but doesn't egrep -q return "1" if there's no match?
[2012-05-18 04:04:45 -0400] juliancdunn: (which would indicate the package needs to be installed?)
[2012-05-18 05:04:44 -0400] xiaotian: hi, I am trying to use chef-sol to do a simple nginx install, but I am getting http://pastebin.com/FsW8BaZW
[2012-05-18 05:05:14 -0400] xiaotian: has anyone seen this?
[2012-05-18 05:05:22 -0400] xiaotian: I am pretty new to chef
[2012-05-18 05:06:34 -0400] xiaotian: in my default recipe I have "include_recipe 'nginx::source'"
[2012-05-18 05:07:05 -0400] xiaotian: seems to be related to ohai plugins.
[2012-05-18 05:10:58 -0400] cwj: well it seems more like it cant find the solo.rb you told it to use for config
[2012-05-18 05:11:39 -0400] xiaotian: cwj: solo.rb is in current directory.
[2012-05-18 05:12:13 -0400] xiaotian: cwj: if I remove include_recipe "nginx::source"
[2012-05-18 05:12:18 -0400] xiaotian: then everything works.
[2012-05-18 05:12:30 -0400] cwj: ok, add -l debug to your chef-solo command line
[2012-05-18 05:12:37 -0400] cwj: you will get really verbose output
[2012-05-18 05:12:53 -0400] cwj: and see what is happening when the error occurs
[2012-05-18 05:13:36 -0400] cwj: are you using the nginx cookbook from the community site?
[2012-05-18 05:15:16 -0400] xiaotian: http://pastebin.com/gSc1cYPM
[2012-05-18 05:17:24 -0400] xiaotian: cwj: yes , https://github.com/opscode-cookbooks/nginx
[2012-05-18 05:20:19 -0400] xiaotian: ok
[2012-05-18 05:20:26 -0400] cwj: humour me and try a run with the full path to your solo.rb specified in the command?
[2012-05-18 05:20:39 -0400] cwj: this is where your run is blowing up: https://github.com/opscode-cookbooks/ohai/blob/master/recipes/default.rb#L41
[2012-05-18 05:20:42 -0400] xiaotian: cwj: I was just gonna tell you that works
[2012-05-18 05:20:44 -0400] cwj: hehe
[2012-05-18 05:21:02 -0400] cwj: i do not use the ohai cookbook myself, but that kind of seems like a bug
[2012-05-18 05:22:01 -0400] xiaotian: hmm..
[2012-05-18 05:30:18 -0400] xiaotian: cwj: I can live with the absolute path for now, thank you for your help!
[2012-05-18 05:30:35 -0400] cwj: you bet
[2012-05-18 05:44:18 -0400] cwj: anyone using the collectd cookbook? i don't see how this works for anyone out of the box
[2012-05-18 05:45:17 -0400] cwj: it tries to use .blank? method which causes my runs to blow up, i thought that method was a rails thing
[2012-05-18 05:51:46 -0400] evalencia: Hi, anyone install chef-server 0.10.10 via chef-solo, seems none of the standard ports (4040,4000) are listening. No errors listed in the logs(/var/log/chef), only the client log is being written to and no other logs show being written. Any ideas?
[2012-05-18 05:55:06 -0400] cwj: evalencia: try the omnibus installer?
[2012-05-18 05:55:18 -0400] cwj: seems like the way of the future
[2012-05-18 05:56:51 -0400] evalencia: Havent, let me try that
[2012-05-18 05:58:17 -0400] evalencia: thanks  cwj
[2012-05-18 05:58:20 -0400] cwj: sure
[2012-05-18 08:32:30 -0400] codebeaker: where does one specify when using postgresql the "postgres" user password? Without being able to set that (I've tried examining the cookbooks) - I can't create users, because "root" can't log into psql
[2012-05-18 08:39:59 -0400] nenemo: recipes running from root, they don't need password to system users
[2012-05-18 09:17:49 -0400] drrk: the postgres user probably doesn't have a password, the normal method woudl be to su - postgres
[2012-05-18 09:40:54 -0400] BottleWasher: Hi, I'm a Vagrant and Chef Newbie - I am trying to run Vagrant with Chef Solo and am getting the following error
[2012-05-18 09:41:14 -0400] BottleWasher: FATAL: Errno::ENOENT: template[/home/deployer/.zshrc] (main::default line 16) had an error: No such file or directory - /tmp/chef-rendered-template20120518-1025-1jn7esq-0 or /home/deployer/.zshrc
[2012-05-18 09:41:23 -0400] BottleWasher: when trying to create a template
[2012-05-18 09:41:32 -0400] BottleWasher: am i missing something really obvious
[2012-05-18 09:53:08 -0400] mosez: when i'm defining a resource, how can i include the same recipe automaticly?
[2012-05-18 10:38:17 -0400] mosez: how can i include recipes into providers?
[2012-05-18 11:39:29 -0400] yfeldblum: mosez, that doesn't sound like a good idea, especially because it makes it harder to track whether your resource was updated, and recipes introspect on the node in ways that providers really should not, but you can try `recipe_eval { include_recipe "some-cookbook::some-recipe" } `
[2012-05-18 12:06:49 -0400] mlinde: is there a way to get the role that a cookbook in currently executing in?
[2012-05-18 12:41:36 -0400] iafonov: mlinde: node['roles']
[2012-05-18 12:59:35 -0400] yfeldblum: mlinde, no, because such a thing does not exist
[2012-05-18 13:00:06 -0400] yfeldblum: mlinde, if two roles add the same recipe to their separate run-lists, and a node has both roles in its run-list, the recipe will be executed *once*
[2012-05-18 13:07:12 -0400] magoo: is this a bug: knife client create workstation -a --no-editor --defaults -f /root/.chef/workstation.pem   (this does not respect the no-editor and opens an editor)
[2012-05-18 13:07:50 -0400] magoo: I also tried it with the alternate -n flag without success
[2012-05-18 13:09:28 -0400] Urocyon: http://tickets.opscode.com/browse/CHEF-2702
[2012-05-18 13:09:38 -0400] Urocyon: magoo ^^
[2012-05-18 13:10:12 -0400] Urocyon: or http://tickets.opscode.com/browse/CHEF-2641
[2012-05-18 13:10:30 -0400] magoo: Urocyon: thanks!
[2012-05-18 13:10:54 -0400] Urocyon: the editor echo trick in 2702 might help though.
[2012-05-18 13:11:20 -0400] Urocyon: or updating to 10.10
[2012-05-18 13:11:47 -0400] magoo: Urocyon: -e echo did the trick
[2012-05-18 13:13:48 -0400] mlinde: member:yfeldblum, thank you
[2012-05-18 14:05:46 -0400] makerbreaker: ERROR: Server returned error for http://chef-server.:4000//search/reindex, retrying 3/5 in 15s
[2012-05-18 14:06:06 -0400] makerbreaker: my chef server installation is completely borked after upgrading to ubuntu 12, where should I start looking to fix this?
[2012-05-18 14:06:16 -0400] makerbreaker: there is nothing in my chef-server logs that are pointing me anywhere
[2012-05-18 14:07:34 -0400] makerbreaker: i take that back, there is something:  https://gist.github.com/2725453
[2012-05-18 14:11:02 -0400] ryker: makerbreaker: looks like maybe your search domain list in /etc/resolv.conf got changed?  chef-server. is obviously not valid.   Usually I would expect to see localhost:4000 there though.  Do a netstat -tlpn | grep :4000 and make sure you have a process running for chef-server
[2012-05-18 14:11:28 -0400] makerbreaker: ryker, sorry, I edited the full URL
[2012-05-18 14:11:47 -0400] makerbreaker: its http://chef-server.example.com:4000/search/reindex
[2012-05-18 14:12:11 -0400] ryker: makerbreaker: ah, so that is an error your getting on the client trying to connect to the server?
[2012-05-18 14:12:28 -0400] makerbreaker: yes, that is my knife
[2012-05-18 14:12:42 -0400] ryker: anyway, check on the server with netstat and make sure you have a chef-server process running on port 4000
[2012-05-18 14:12:49 -0400] makerbreaker: it does
[2012-05-18 14:13:37 -0400] ryker: ah, ok.  i see your gist says it can't connect to solr
[2012-05-18 14:13:40 -0400] ryker: are you sure solr is running?
[2012-05-18 14:14:07 -0400] ryker: and also chef-expander
[2012-05-18 14:14:31 -0400] ryker: just do a 'ps aux | grep solr' on the server. you should see a couple processes running
[2012-05-18 14:15:29 -0400] makerbreaker: everything si running
[2012-05-18 14:15:31 -0400] makerbreaker: thats whats odd
[2012-05-18 14:15:39 -0400] makerbreaker: i can telnet to all the ports etc
[2012-05-18 14:16:09 -0400] miketheman: any word on omnibus installer inclusion of chef 0.10.10?
[2012-05-18 14:16:28 -0400] ryker: makerbreaker: what about the solr port?  try netstat -tlpn | grep :8983
[2012-05-18 14:17:06 -0400] makerbreaker: its up
[2012-05-18 14:18:05 -0400] ryker: makerbreaker: and telnet localhost 8983 connects?
[2012-05-18 14:18:10 -0400] makerbreaker: correct
[2012-05-18 14:18:56 -0400] Urocyon: any iptables changes?
[2012-05-18 14:19:24 -0400] ryker: Urocyon: good point.  i dont' use iptables and i always forget about that. :)
[2012-05-18 14:19:41 -0400] Urocyon: could be nothing.
[2012-05-18 14:20:48 -0400] Urocyon: just trying to think if what might change in an update.
[2012-05-18 14:23:47 -0400] Urocyon: You'd think the first thing to do when using chef server is to make sure you can recreate a chef server and register all clients/users as required.
[2012-05-18 14:23:52 -0400] Urocyon: I didn't do that though.
[2012-05-18 14:23:55 -0400] Urocyon: :-(
[2012-05-18 14:23:55 -0400] ryker: makerbreaker: i honestly am not sure what role chef-expander plays between the server and solr, but it couldn't hurt to make sure it's working ok.  make sure 'chef-expanderctl node-status' and 'chef-expanderctl queue-status' look ok.
[2012-05-18 14:24:09 -0400] Urocyon: Was thinking of digging into spiceweasel for that.
[2012-05-18 14:26:20 -0400] ryker: makerbreaker: it's a bit early for the west cost.  maybe one of the opscode guys might have a better idea once they get online.
[2012-05-18 14:28:04 -0400] yfeldblum: Urocyon, or ... backup & restore the chef-server db?
[2012-05-18 14:29:11 -0400] yfeldblum: chef-expander catches new & updated objects being saved to the database and indexes those objects so they can be searched using `knife search` on the CLI or `search` (`Chef::Search::Query`) in recipes
[2012-05-18 14:30:05 -0400] yfeldblum: the indexing is done in the background and is not guaranteed to be immediate; newly-saved or newly-updated objects may not be found, or may be stale, if a recipe searches for them too soon
[2012-05-18 14:34:12 -0400] Urocyon: makerbreaker: so how about permissions?  check /var/run/chef ad /var/log/chef and see what isn't chef:chef
[2012-05-18 14:37:05 -0400] yUnwEb: I think /var/cache/chef/failed-run-data.json should not be readable by anyone
[2012-05-18 14:37:13 -0400] yUnwEb: by default I mean :-S
[2012-05-18 14:40:12 -0400] Urocyon: makerbreaker: used to be chef-solr would 404 when you had bad permissions in /var/log/chef
[2012-05-18 14:41:06 -0400] Urocyon: just found this showing someone running into this last month: http://comments.gmane.org/gmane.comp.sysutils.chef.user/3999
[2012-05-18 14:42:42 -0400] Urocyon: where chef-client cookbook was changing the perms when run on the server.
[2012-05-18 14:55:18 -0400] yfeldblum: chef vs telnet: debate!
[2012-05-18 14:55:52 -0400] makerbreaker: NICE
[2012-05-18 14:55:57 -0400] makerbreaker: thanks that worked urocyon
[2012-05-18 14:56:08 -0400] Urocyon: yay!
[2012-05-18 14:56:17 -0400] miketheman: yfeldblum: apples vs mechanoids?
[2012-05-18 14:57:43 -0400] geekbri: i love telnet!
[2012-05-18 14:57:56 -0400] geekbri: but why even go that far... why not chef vs netcat
[2012-05-18 14:58:16 -0400] makerbreaker: now i just have to figure out why my SSL nginx proxy broke
[2012-05-18 14:58:17 -0400] makerbreaker: heh
[2012-05-18 14:59:33 -0400] yfeldblum: i find that if i type out the raw ethernet frames i have more control than if i simply invoke `knife ssh`
[2012-05-18 15:00:45 -0400] geekbri: haha
[2012-05-18 15:00:55 -0400] yfeldblum: the shell is so limiting
[2012-05-18 15:01:14 -0400] lflux: true story I used to work with a guy who could decode ethernet frames from hex
[2012-05-18 15:01:20 -0400] geekbri: yfeldblum: yeah, I'm thinking of skipping the computer altogether and trying to write directly to the ethernet port with a series of copper write and electric sources.
[2012-05-18 15:01:23 -0400] lflux: he was the best plugin to tcpdump
[2012-05-18 15:01:39 -0400] geekbri: Yeah I had a guy like that too, I called him wireshark
[2012-05-18 15:02:11 -0400] lflux: nobody had written wireshark for 802.3ah OAM frames so we used him
[2012-05-18 15:02:24 -0400] geekbri: hehe, you should have treated him like a piece of software
[2012-05-18 15:02:38 -0400] geekbri: lock him in an old cabinet or something.
[2012-05-18 15:02:42 -0400] yfeldblum: lflux, hehe nice
[2012-05-18 15:03:03 -0400] yfeldblum: geekbri, you'll need to have fast hands
[2012-05-18 15:03:25 -0400] geekbri: yfeldblum: i'll practice by taping nickles to my fingers! it'll work i swear it!
[2012-05-18 15:03:34 -0400] geekbri: TCP/IP over lonely nerd RFC in the works
[2012-05-18 15:03:44 -0400] geekbri: and I guess all the way down the stack as well.
[2012-05-18 15:05:59 -0400] yfeldblum: i keep time well: i've got a wire connected to a pedal under my desk, so my foot has replaced my cpu's oscillator ... boom! 6x overclock
[2012-05-18 15:06:28 -0400] yfeldblum: unfortunately, io is still the bottleneck
[2012-05-18 15:06:50 -0400] geekbri: And apparently there is usually a 6-8 hour window where the CPU is unresponsive
[2012-05-18 15:09:07 -0400] yfeldblum: heh
[2012-05-18 15:15:13 -0400] hoover_damm: yfeldblum, time for some multi-cast action so you can send actions into multicast space and have all your chef servers obey?
[2012-05-18 15:22:51 -0400] yfeldblum: hoover_damm, too busy writing a new kernel scheduler, temporarily called the "keystroke-based scheduler"
[2012-05-18 15:32:46 -0400] jeffg: anybody aware of a java port of mixlib-authentication?
[2012-05-18 15:34:36 -0400] hoover_damm: yfeldblum, what's it for?
[2012-05-18 15:38:47 -0400] yfeldblum: hoover_damm, so i can starve those greedy kernel processes and give all that time over to my favored processes
[2012-05-18 15:39:18 -0400] jeffg: or, alternatively for the short term, is it possible to disable the authn requirement for the rest api?  i would never do this outside a development setup, of course!
[2012-05-18 15:39:52 -0400] hoover_damm: yfeldblum, lol
[2012-05-18 15:39:55 -0400] hoover_damm: there's better ways to do that
[2012-05-18 15:40:28 -0400] yfeldblum: hoover_damm, but those better ways are too easy
[2012-05-18 15:40:46 -0400] yfeldblum: hoover_damm, gotta rewrite the kernel instead
[2012-05-18 15:40:57 -0400] hoover_damm: yfeldblum, I hope you truly don't feel that way.
[2012-05-18 15:41:05 -0400] hoover_damm: i know there are some developers that are truly that broken
[2012-05-18 15:41:44 -0400] hoover_damm: there is no valor is obscufiating your fix
[2012-05-18 15:42:01 -0400] yfeldblum: hoover_damm, ha of course not
[2012-05-18 15:42:46 -0400] hoover_damm: I got tired of the most arcane fix back in 2006
[2012-05-18 15:43:16 -0400] hoover_damm: worst fix I saw was when a client was getting ddos'd a sysadmin wrote a perl script to run tcpdump and capture the output in perl, analyze the output and block the ip if a pattern matched
[2012-05-18 15:43:28 -0400] hoover_damm: had to reboot the box every day or two
[2012-05-18 15:43:47 -0400] hoover_damm: and they were not getting ddos'd (if they were up)
[2012-05-18 15:44:17 -0400] yfeldblum: heh
[2012-05-18 15:46:39 -0400] erratic: a shit leopard that cant change its spots
[2012-05-18 15:47:09 -0400] hoover_damm: i'm not sure what that is referring to erratic
[2012-05-18 15:47:11 -0400] hoover_damm: could be so much
[2012-05-18 15:53:14 -0400] dunniganp: hi all, is there a knife plugin for s3? minimum requirements would be to allow for downloading of files
[2012-05-18 15:54:10 -0400] geekbri: you want to just download files from s3? why not use s3cmd ?
[2012-05-18 15:54:22 -0400] geekbri: im not sure how knife fits into the equation there unless im missing something
[2012-05-18 15:56:29 -0400] hoover_damm: geekbri, sometimes you can see the indicator of how the decision process works for people
[2012-05-18 15:56:43 -0400] hoover_damm: by watching irc
[2012-05-18 15:57:00 -0400] geekbri: ?
[2012-05-18 15:57:06 -0400] hoover_damm: dunniganp, are you trying to download protected files? or just regular read-only?
[2012-05-18 15:57:22 -0400] hoover_damm: geekbri, well it's a curious question on how knife and S3 and downloading files all tie together
[2012-05-18 15:57:39 -0400] geekbri: hoover_damm: yeah im not sure what you meant but your statement to me :)
[2012-05-18 15:58:11 -0400] hoover_damm: geekbri, I guess I look at how people work on irc
[2012-05-18 15:58:16 -0400] hoover_damm: and try to see how they think
[2012-05-18 15:58:38 -0400] drrk: What is the current prefered method for instalation of chef server on Ubuntu LTS (12.04)
[2012-05-18 15:58:59 -0400] geekbri: hoover_damm: are you busy observing me or him as your hamster in a cage :-P
[2012-05-18 15:59:25 -0400] erikh: there are a few methods; knife bootstrap with the chef-server recipes; omnibus and another one if my memory servers correct
[2012-05-18 15:59:29 -0400] erikh: drrk: ^
[2012-05-18 15:59:33 -0400] erikh: pick the one that suits you best
[2012-05-18 15:59:53 -0400] erikh: there's also chef packages.
[2012-05-18 16:00:16 -0400] hoover_damm: i don't own hamsters
[2012-05-18 16:00:17 -0400] dunniganp: well, there is the knife extension for ec2, etc. etc. I was curious if someone had built that too. I figured if it was already available, why bother with s3cmd / s3curl, etc.
[2012-05-18 16:00:22 -0400] hoover_damm: I am owned by cats however
[2012-05-18 16:00:28 -0400] drrk: packages were removed from 12.04 at opscode request, so i'm not sure any more about packages
[2012-05-18 16:00:36 -0400] geekbri: dunniganp: oh absolutely there is a knife-ec2 plugin! :)
[2012-05-18 16:00:48 -0400] erikh: drrk: you can get packages from opscode IIRC
[2012-05-18 16:00:52 -0400] dunniganp: yes, I know, what about s3?
[2012-05-18 16:00:59 -0400] geekbri: oh maybe its just not my day you weren't asking you were stating.  I should have just stayed home.
[2012-05-18 16:01:01 -0400] hoover_damm: dunniganp, net/http?
[2012-05-18 16:01:01 -0400] erikh: (e.g., via PPA)
[2012-05-18 16:01:07 -0400] hoover_damm: dunniganp, S3 is just http semantics
[2012-05-18 16:01:08 -0400] drrk: gem would suit me, or supported packages but the docs don't mention 12.04, onlt up to 11.04
[2012-05-18 16:01:14 -0400] hoover_damm: you don't need anything special to download a read-only file
[2012-05-18 16:01:21 -0400] hoover_damm: if you want to read files that are protected and not world readable
[2012-05-18 16:01:24 -0400] hoover_damm: then you need some help
[2012-05-18 16:01:26 -0400] dunniganp: authenticated, like pem files
[2012-05-18 16:01:29 -0400] erikh: I'm using chef-client on 12.04 if that's any consolation. haven't tried the server yet.
[2012-05-18 16:01:33 -0400] dunniganp: secret stuff
[2012-05-18 16:01:36 -0400] erikh: but I build a custom ruby.
[2012-05-18 16:01:41 -0400] hoover_damm: that's a signature generator
[2012-05-18 16:01:43 -0400] drrk: oh, 11.10 aswell is listed as supported
[2012-05-18 16:01:46 -0400] yfeldblum: there is no chef-server full-stack installer that i'm aware of; the chef full-stack installer is for -solo and -client
[2012-05-18 16:01:47 -0400] hoover_damm: to get the signature from the AWS key
[2012-05-18 16:01:51 -0400] hoover_damm: for what you want dunniganp
[2012-05-18 16:02:16 -0400] hoover_damm: dunniganp, but you should be able to use the amazon ruby sdk with knife in this
[2012-05-18 16:02:22 -0400] drrk: any opscode staff want to comment?
[2012-05-18 16:02:48 -0400] hoover_damm: dunniganp, https://github.com/amazonwebservices/aws-sdk-for-ruby
[2012-05-18 16:03:17 -0400] jessicab: erikh - my guess is we just havent had a chance to test it on 12.04 yet and update the docs, i havent heard anything about it not working with chef server
[2012-05-18 16:03:17 -0400] geekbri: you can certainly write a knife plugin to interact with s3, although that seems strange to me.  Usually knife is used for actions that need to interact with the chef server somehow.
[2012-05-18 16:03:32 -0400] ssd7: Ohai Chefs!
[2012-05-18 16:03:52 -0400] geekbri: hai there.
[2012-05-18 16:03:56 -0400] drrk: well there seems to be a precise-0.10 directory on the package server, so i'll go for that method
[2012-05-18 16:03:58 -0400] dunniganp: k, thx. I'll take the quick route and stick to s3cmd
[2012-05-18 16:05:47 -0400] hoover_damm: drrk, remember 12.04 is a new release and chef hasn't had a release since it's release
[2012-05-18 16:06:01 -0400] hoover_damm: drrk, it's likely they are working on it
[2012-05-18 16:06:48 -0400] hoover_damm: instead of trying to point out the debian specific
[2012-05-18 16:07:04 -0400] drrk: yeah gems would have been my prefered method, but again lacking docs
[2012-05-18 16:08:19 -0400] drrk: hmm, is it Installing Chef Server Manually ?
[2012-05-18 16:09:48 -0400] drrk: or should I use Installing Chef Server using Chef Solo ?
[2012-05-18 16:17:02 -0400] hoover_damm: using chef-solo
[2012-05-18 16:17:24 -0400] hoover_damm: drrk, chef bootstraps chef.  You install chef, then write the solo.rb ad chef.json and then run chef-solo to configure chef-server
[2012-05-18 16:17:59 -0400] hoover_damm: drrk, once that is done you can knife bootstrap and have your clients register on the chef server.  (I know I made it sound too easy)
[2012-05-18 16:19:45 -0400] drrk: no that's cool
[2012-05-18 16:19:49 -0400] drrk: i'll do it that way
[2012-05-18 16:19:57 -0400] drrk: on Monday now I think, I want to go home!
[2012-05-18 16:24:53 -0400] Javin: Good day everyone
[2012-05-18 16:25:29 -0400] chson: Anybody use "knife bootstrap --bootstrap-version <old version>"?  It appears bootstrap ignores the argument and upgrades to the latest (0.10.10).
[2012-05-18 16:25:32 -0400] makerbreaker: is there an easy way to remove/reinstall chef-server on ubuntu 12
[2012-05-18 16:25:55 -0400] chson: makerbreaker: I imagine doing gem uninstall chef would do it
[2012-05-18 16:25:59 -0400] Javin: I have a quick question regarding strings and symbols that I am hoping someone can give me some help with.
[2012-05-18 16:26:44 -0400] chson: javin what is it
[2012-05-18 16:27:21 -0400] Javin: I'm trying to use symbols everywhere, but I'm not sure how to make this code work, since it uses a variable:    node.set_unless[:dbnode]["mysql_#{site[:id]}_adminpass"]   = secure_password
[2012-05-18 16:27:35 -0400] yfeldblum: the answer to that question is: use strings, unless you have a specific reason to use symbols
[2012-05-18 16:27:54 -0400] Javin: I thought symbols were much better for memory usage
[2012-05-18 16:28:05 -0400] jessicab: chson - i just tested that on tuesday and knife bootstrapping worked for me, are you using 0.10.8 as the version? thats what i tested it with
[2012-05-18 16:28:21 -0400] Javin: and consider better practice in general
[2012-05-18 16:28:33 -0400] spox: Javin: they are, however in the case where you are building a dynamic key, there is no reason not to just use the string
[2012-05-18 16:28:42 -0400] spox: you can use #to_sym, but you won't really gain anything
[2012-05-18 16:28:47 -0400] chson: jessicab: yes I'm using knife 0.10.8.  what I'm seeing is that it'll initially install 0.10.8, then at the very end it upgrades to 0.10.10
[2012-05-18 16:29:00 -0400] yfeldblum: Javin, if ruby ships with a GC, and if you're that worried about memory usage, ruby isn't for you anyway ...
[2012-05-18 16:29:14 -0400] jessicab: chson - ah, id check to see if a recipe is doing that then, chef-client shouldnt update itself
[2012-05-18 16:29:47 -0400] chson: jessicab: this is a new node so there's no recipes in the run list
[2012-05-18 16:29:49 -0400] Javin: It's simply more that I know just enough to be dangerous and I don't want to get into bad habits that will eventual bite me down the road
[2012-05-18 16:30:11 -0400] jessicab: chson - using a custom bootstrap file perhaps?
[2012-05-18 16:30:19 -0400] Javin: If it isn't something to worry about in most cases, then I'll take your word for it
[2012-05-18 16:31:28 -0400] Javin: thanks
[2012-05-18 16:31:33 -0400] yfeldblum: Javin, it's usually not something you need to worry about *in chef*
[2012-05-18 16:31:59 -0400] chson: jessicab: no.. just whatever knife bootstrap defaults to.  here's how I enter it: knife bootstrap --bootstrap-version 0.10.8 <host>
[2012-05-18 16:32:01 -0400] Javin: ok, that makes sense. I'll keep that in mind.
[2012-05-18 16:32:42 -0400] yfeldblum: Javin, if you're trying to write a high-performance low-memory network daemon or http server, then yes, you may take a harder look at how many strings you construct
[2012-05-18 16:33:15 -0400] jessicab: chson - yea, looks right, i was actually testing with the ec2 plugin when i tried it, but it should be the same
[2012-05-18 16:34:14 -0400] chson: jessicab: the only thing unique about these nodes is that the gem for chef 0.8.16 had been previously installed
[2012-05-18 16:38:34 -0400] hoover_damm: chson, custom templates do come into the --bootstrap-version
[2012-05-18 16:38:35 -0400] hoover_damm: argument
[2012-05-18 16:39:18 -0400] hoover_damm: chson, if your not using the default templates ensure your custom template isn't the problem
[2012-05-18 16:40:19 -0400] chson: hoover_damn: custom templates as in recipe templates?
[2012-05-18 16:40:33 -0400] chson: hoover_damn: there's no run list on these nodes
[2012-05-18 16:43:44 -0400] ssd7: chson: It would probably be easiest if you ran the exact same command but with -VV attached and then pasted the command and the output somewhere.
[2012-05-18 16:43:59 -0400] yUnwEb: how do you see setting /var/cache/chef/failed-run-data.json perms to 0640?
[2012-05-18 16:44:11 -0400] yUnwEb: I have done a simple chef patch for this
[2012-05-18 16:46:20 -0400] ssd7: yUnwEb: Check out: http://wiki.opscode.com/display/chef/How+to+Contribute  If you write up a bug report with your reasoning, attach a patch, and mark it as resolved it will get looked at during the weekly code review and Chef devs will weigh in :)
[2012-05-18 16:46:25 -0400] chson: ssd7: ok next time.  unfortunately I already did the workaround of gem uninstall chef -v 0.10.10 and started filling the run list
[2012-05-18 16:47:15 -0400] yUnwEb: ok, thank you ssd7 :-)
[2012-05-18 17:01:29 -0400] hoover_damm: chson, no as in .chef/bootstrap
[2012-05-18 17:01:51 -0400] hoover_damm: chson, they can be in chef-repo or in your home directory
[2012-05-18 17:01:56 -0400] hoover_damm: but they actually control the installation of chef
[2012-05-18 17:02:08 -0400] hoover_damm: with that you can break it easily
[2012-05-18 17:03:32 -0400] chson: hoover_damn: there's nothing in my .chef other than the .pem and knife.rb..  in any event it appears this has something to do with the node having 0.8.x previously installed.
[2012-05-18 17:03:50 -0400] hoover_damm: sometimes i'm amazed at the old chef code I write...
[2012-05-18 17:04:10 -0400] hoover_damm: chson, not sure how 0.8.x has anything to do with it.
[2012-05-18 17:04:29 -0400] hoover_damm: chson, knife bootstrap ssh's into the server and takes an erb template and then runs that on the instance
[2012-05-18 17:04:54 -0400] hoover_damm: chson, https://github.com/opscode/chef/tree/master/chef/lib/chef/knife/bootstrap
[2012-05-18 17:05:09 -0400] chson: hoover_damn: ok let me see if that bootstrap subdir is on the chefserver
[2012-05-18 17:05:09 -0400] hoover_damm: chson, https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/ubuntu10.04-gems.erb#L16
[2012-05-18 17:05:37 -0400] hoover_damm: it should do what it's told unless someone has broken it
[2012-05-18 17:07:47 -0400] chson: hoover_damn: I think line 19 is the culprit (gem update) https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/centos5-gems.erb
[2012-05-18 17:08:07 -0400] chson: hoover_damn: since there is that existing 0.8.x gem
[2012-05-18 17:09:21 -0400] chson: hoover_damn: actually I'm not specifying the centos gem as an arg so forget it
[2012-05-18 17:09:58 -0400] jcw9: I'm running chef-solo from inside a bash script invoked from ssh and am seeing a lot of unkillable processes that look like "[chef-solo] <defunct>". Any ideas?
[2012-05-18 17:15:29 -0400] hoover_damm: gem update --system should only update rubygems
[2012-05-18 17:15:51 -0400] hoover_damm: chson, sometimes rubygems gets stuck in a blind spot where it's doing the wrong thing
[2012-05-18 17:15:55 -0400] hoover_damm: perhaps this is one of those
[2012-05-18 17:18:48 -0400] magoo: i'm trying to use env_run_lists and getting this: _default key is required in env_run_lists
[2012-05-18 17:18:55 -0400] magoo: no mention of this in the docs
[2012-05-18 17:23:23 -0400] ssd7: magoo: Yeah, there is an old bug about that I believe that I haven't gotten too (I should have, apologies): http://tickets.opscode.com/browse/CHEF-2636
[2012-05-18 17:23:43 -0400] ssd7: I think when I first looked at it I couldn't reproduce it but clearly others have run into it.
[2012-05-18 17:29:01 -0400] magoo: ssd7: ok, i'll find a workaround for now, thanks
[2012-05-18 17:39:45 -0400] jeffg: is there an alternative to the chef server api for getting out info on nodes, roles, and so on?
[2012-05-18 17:40:24 -0400] paulmooring: jeffg: what are you trying to get, I think using knife is the common way to do it
[2012-05-18 17:40:35 -0400] paulmooring: as in `knife node show $node_name`
[2012-05-18 17:43:17 -0400] yfeldblum: jeffg, you can look in couchdb directly, but why?
[2012-05-18 17:47:04 -0400] jeffg: paulmooring, yfeldblum, i'm trying to build an integration with opennms in which we say "hey chef, tell me about all your nodes" and then start managing them automagically.
[2012-05-18 17:47:52 -0400] jeffg: we've done a POC-quality integration with (other ruby config-mgmt platform) and would like to give chef equal time
[2012-05-18 17:47:59 -0400] yfeldblum: jeffg, prefer to use the chef-server-api; you can either enumerate the nodes and then fetch them one-by-one, or you can use the search to fetch all nodes at once
[2012-05-18 17:48:23 -0400] jeffg: yfeldblum, kinda thought so.  mixlib-authentication is breaking my balls since i'm working in java here.
[2012-05-18 17:48:38 -0400] jeffg: rather not reimplement it in java.
[2012-05-18 17:48:40 -0400] paulmooring: what yfeldblum you probably don't want to shell out for knife, and assuming you have access to the db also sounds ill advised imo
[2012-05-18 17:48:51 -0400] yfeldblum: jeffg, can you not use ruby?
[2012-05-18 17:49:09 -0400] jeffg: we don't shell out for anything if we can avoid it.  and yeah, rather avoid scraping the db since that's bad layering.
[2012-05-18 17:49:15 -0400] jeffg: yfeldblum, as in jruby?
[2012-05-18 17:49:20 -0400] yfeldblum: paulmooring, i'm not advising shelling out; i'm advising using the chef-server-api with your favorite HTTP client or, if you're using ruby, with the chef gem or some other prebuilt chef-server-api client
[2012-05-18 17:49:40 -0400] yfeldblum: jeffg, sure, jruby, or any compatible ruby implementation
[2012-05-18 17:49:45 -0400] paulmooring: yfeldblum: I was referring to my suggestion on using knife
[2012-05-18 17:50:01 -0400] paulmooring: I think you're absolutely right, the api is the way to go
[2012-05-18 17:50:22 -0400] jeffg: we've got http client libraries in spades in the java world, but no pure-java mixlib-authentication.
[2012-05-18 17:50:28 -0400] yfeldblum: paulmooring, gotcha
[2012-05-18 17:50:58 -0400] cwj: https://github.com/danryan/spice
[2012-05-18 17:51:35 -0400] cwj: hadn't seen this chef api gem before but it was mentioned in thom may's talk at chef conf
[2012-05-18 17:53:08 -0400] jeffg: cwj, is that meant for me?  i read the readme but there's nothing about how it works :)
[2012-05-18 17:54:53 -0400] cwj: jeffg: the documentation is included in the repo in yardoc format, you can read it online here http://rubydoc.info/gems/spice/frames
[2012-05-18 17:55:33 -0400] cwj: it was presented as alternative to importing most of chef into your project if all you need is to interact with the api
[2012-05-18 17:55:50 -0400] jeffg: cwj, thanks; sorry, i'm pretty ruby-ignorant and don't really have time to change that any time soon.
[2012-05-18 17:56:05 -0400] cwj: no worries
[2012-05-18 17:56:06 -0400] yfeldblum: jeffg, https://github.com/opscode/chef/blob/master/chef/lib/chef/rest.rb https://github.com/danryan/spice/blob/master/lib/spice/authentication.rb
[2012-05-18 17:57:54 -0400] yfeldblum: jeffg, yeah, it is a PITA to reimplement the signing in another language ...
[2012-05-18 17:58:22 -0400] jeffg: yfeldblum, i found one guy who's re-implemented it in erlang.  in which i'm even less literate :)
[2012-05-18 17:58:30 -0400] yfeldblum: jeffg, :P
[2012-05-18 17:58:36 -0400] monvillalon: I need help with knife-ec2 + mac + ssh, no matter what I do I get listamax-ec2 does not exist
[2012-05-18 17:58:55 -0400] monvillalon: listamax-ec2 its my ke name
[2012-05-18 17:58:56 -0400] jeffg: i guess it's always gotta be some damned thing.  with the other POC, we had to figure out how to eat yaml.
[2012-05-18 17:58:56 -0400] yfeldblum: jeffg, maybe implement it in java and make it open-source? :P
[2012-05-18 17:58:57 -0400] monvillalon: *key*
[2012-05-18 17:59:20 -0400] jeffg: yfeldblum, of course it'll be free software if we do implement.
[2012-05-18 17:59:44 -0400] jeffg: so props for using json :)
[2012-05-18 17:59:55 -0400] yfeldblum: jeffg, agreed with the json sentiment ...
[2012-05-18 18:00:39 -0400] monvillalon: its ssh-agent a required thing to use with knife-ec2,  I don't really get what Im doing
[2012-05-18 18:01:39 -0400] yfeldblum: jeffg, very cross-platform
[2012-05-18 18:01:57 -0400] yfeldblum: jeffg, very simple too
[2012-05-18 18:03:26 -0400] jeffg: xml would have been a more natural fit, but i'll take json!
[2012-05-18 18:03:37 -0400] jessicab: monvillalon - have you seen this guide? it talks about how to setup your keys and ssh-agent for ec2  http://wiki.opscode.com/display/chef/EC2+Bootstrap+Fast+Start+Guide
[2012-05-18 18:03:41 -0400] cwj: monvillalon: knife-ec2 and the ssh features of knife in general assume that either you have ssh-agent running with the relevant keys added, or that you will specify the required ssh key file and/or username in your command line
[2012-05-18 18:05:39 -0400] monvillalon: jessicab , cwj: Thanks, Ive read the wiki, but i prefer to specify the files from the command line, the thing is that its not working
[2012-05-18 18:06:16 -0400] monvillalon: cwj: Like you said then if I pass -S and I it should work without ssh-agent
[2012-05-18 18:06:27 -0400] jessicab: monvillalon - youre using both -S and -i to specify the name and location of the file?
[2012-05-18 18:06:56 -0400] monvillalon: jessicab: yes
[2012-05-18 18:07:26 -0400] monvillalon: jessicab: Im going to check if the file needs to be absolute, permissions and stuff like that
[2012-05-18 18:08:17 -0400] ssd7: monvillalon: Is the error message that the keyfile doesn't exist or that the key doesn't exist on EC2.  You are sure that the key you have is uploaded to the same region you are mkaing the rest in?
[2012-05-18 18:08:21 -0400] jessicab: monvillalon - it might be helpful to take the command and all of the output youre getting and post it into a gist for us.. normally if it doesnt like the key it just gets stuck at waiting for sshd
[2012-05-18 18:08:23 -0400] ssd7: s/rest/request/
[2012-05-18 18:08:44 -0400] monvillalon: jessicab: Thanks, let me check
[2012-05-18 18:10:01 -0400] monvillalon: jessicab: Yes its on the same region
[2012-05-18 18:10:52 -0400] monvillalon: jessicab: this is the command
[2012-05-18 18:10:54 -0400] monvillalon: knife ec2 server create --flavor=m1.micro --region=us-east -i ~/chef/listamax-chef/.chef/listamax-ec2.pem -S listamax-ec2
[2012-05-18 18:11:08 -0400] monvillalon: jessicab: ERROR: Fog::Compute::AWS::NotFound: The key pair 'listamax-ec2' does not exist
[2012-05-18 18:11:51 -0400] monvillalon: jessicab: The permissions are 600, the file exists, its readable, its on the us-east region, and its called listamax-ec2 on the management console.
[2012-05-18 18:11:59 -0400] monvillalon: jessicab: Im going mad :)
[2012-05-18 18:13:51 -0400] jeffg: yfeldblum, cwj, thanks for the tips.
[2012-05-18 18:14:38 -0400] jessicab: monvillalon - that all looks correct.. youre sure nothings in the knife.rb that could be effecting this? like a region set there or anything?
[2012-05-18 18:15:31 -0400] monvillalon: jessicab: without the credentials this is my config
[2012-05-18 18:15:32 -0400] jessicab: monvillalon - also, i could be wrong.. but arent regions normally "us-east-1" or have some sort of number at the end?
[2012-05-18 18:15:32 -0400] monvillalon: knife[:image]                  = "ami-eece1d87"
[2012-05-18 18:15:32 -0400] monvillalon: knife[:distro]                 = "centos5-gems"
[2012-05-18 18:15:34 -0400] monvillalon: knife[:flavor]                 = "m1.large"
[2012-05-18 18:15:35 -0400] monvillalon: knife[:region]                 = "us-east-1"
[2012-05-18 18:15:35 -0400] monvillalon: knife[:availability_zone]      = "us-east-1a"
[2012-05-18 18:16:02 -0400] hoover_damm: jeffg, xml has such a bad name lately
[2012-05-18 18:16:07 -0400] hoover_damm: jeffg, i feel sorry for it.
[2012-05-18 18:16:37 -0400] jessicab: monvillalon - if your region is set in the knife.rb you dont need to set it on the command line.. might want to try removing the region switch since it looked odd anyways
[2012-05-18 18:17:20 -0400] hoover_damm: and numerous other xml exploits that have existed
[2012-05-18 18:17:28 -0400] jeffg: hoover_damm, haven't seen those yet.
[2012-05-18 18:17:32 -0400] hoover_damm: sadly all that leads back to DTD
[2012-05-18 18:17:40 -0400] hoover_damm: jeffg, they sent out about 5 or 6 emails yesterday
[2012-05-18 18:17:42 -0400] jeffg: presumably they're implementation-specific
[2012-05-18 18:17:43 -0400] monvillalon: jessicab: Yes I know, I know it seems silly but I'm going to restart the computer, I seem to recall something about permissions + ssh + mac, thanks for your help.
[2012-05-18 18:17:47 -0400] hoover_damm: likely
[2012-05-18 18:18:37 -0400] jeffg: hysteria and hype come and go.  i'm pretty sure xml isn't going away this year.
[2012-05-18 18:18:42 -0400] hoover_damm: clearly didn't understand XML
[2012-05-18 18:18:52 -0400] hoover_damm: nah XML isn't going away period
[2012-05-18 18:18:54 -0400] jeffg: damn kids
[2012-05-18 18:19:20 -0400] hoover_damm: I have seen too many abuses of xml to understand why it still exists
[2012-05-18 18:20:28 -0400] jeffg: i used to be disgusted, but now i
[2012-05-18 18:20:35 -0400] jeffg: i used to be disgusted, but now i'm just amused
[2012-05-18 18:20:53 -0400] jeffg: -elvis costello
[2012-05-18 18:21:58 -0400] jeffg: off home to meet the cable tech, since i'm clearly unqualified to install a cablecard in my tivo...
[2012-05-18 18:22:10 -0400] hoover_damm: rofl
[2012-05-18 18:22:12 -0400] hoover_damm: i've done that
[2012-05-18 18:22:30 -0400] hoover_damm: bet you 5$ he doesn't know where to put the cablecard
[2012-05-18 18:22:41 -0400] jeffg: $10 says i show him
[2012-05-18 18:22:41 -0400] hoover_damm: and will ask for your tivo manual
[2012-05-18 18:22:53 -0400] jeffg: and it won't be near the tivo chassis
[2012-05-18 18:22:53 -0400] hoover_damm: seriously
[2012-05-18 18:23:25 -0400] jeffg: 2000.  off my lawn.
[2012-05-18 18:23:26 -0400] hoover_damm: as much as they haven't updated the thing, there really isn't better
[2012-05-18 18:25:01 -0400] hoover_damm: cripes nginx is up to 1.3.0 already?
[2012-05-18 18:28:10 -0400] geekbri: development move fast :)
[2012-05-18 18:32:39 -0400] hoover_damm: nah this is a weird bump
[2012-05-18 18:32:47 -0400] hoover_damm: 1.1.19 came out recently, then 1.2.0 and then 1.3.0
[2012-05-18 18:33:01 -0400] erikh: odd numbers are development release
[2012-05-18 18:33:02 -0400] hoover_damm: makes sense
[2012-05-18 18:33:04 -0400] hoover_damm: yep
[2012-05-18 18:33:20 -0400] hoover_damm: but when I first saw it I was like wtf? damn nginx get your .. together
[2012-05-18 18:33:30 -0400] hoover_damm: okay making 1.1.19 to 1.2.0 and stable, then make a new 1.3.0
[2012-05-18 18:33:31 -0400] hoover_damm: that's fine
[2012-05-18 18:33:54 -0400] hoover_damm: I was just trying to figure out why it warranted such a bump at first
[2012-05-18 18:33:56 -0400] hoover_damm: until I realized it didn't
[2012-05-18 18:38:23 -0400] icoffey: cobragoat? wow that has to be the best nick ever
[2012-05-18 18:55:10 -0400] bemu: Anyone still in SF want to get dinner tonight in the Mission?
[2012-05-18 19:06:36 -0400] zim415: I would love to; but promised the wife I wouldn't try to be out late tonight
[2012-05-18 19:10:46 -0400] wamcvey: So, I've been using chef with the open-source server for a few months; and now have a situation where I will have a dozen or so machines of near identical configuration off site with no realistic network connectivity to the chef server; so I'm exploring chef-solo. Am I correct that solo is a push model, where all cookbooks are pushed to remote nodes? Is there a bootstrap process that needs to occur (similar to 'knife bootstrap')? Are there any 
[2012-05-18 19:12:57 -0400] cwj: wamcvey: you can write your own templates for use with knife bootstrap, so you could have it set up chef-solo and clone your cookbooks
[2012-05-18 19:17:49 -0400] wamcvey: Ahh... I see... chef-solo runs locally. Needs to be installed in some manner (either via a custom bootstrap, or manually using something like the omnibus installer), and runs against a cookbook hierarchy that is either already exploded out in a directory on the remote hosts (via some out of band method) or retreived from some URL.
[2012-05-18 19:18:00 -0400] wamcvey: right?
[2012-05-18 19:18:35 -0400] cwj: yeah that sounds right
[2012-05-18 19:18:48 -0400] cwj: i am not a solo user myself, but i think it can retrieve a remote tarball
[2012-05-18 19:19:00 -0400] wamcvey: it can indeed.
[2012-05-18 19:20:24 -0400] wamcvey: but the key misunderstanding I had was that chef-solo is not something I run centrally which reaches out and pushes cookbooks and executes them  (over some transport like ssh)... but that it's a local tool...
[2012-05-18 19:21:03 -0400] cwj: yeah its local just like chef-client is, but without the dependency on chef-server
[2012-05-18 19:39:20 -0400] izo: guys, have a stupid question, trying modify java_sun recepie
[2012-05-18 19:40:13 -0400] izo: want to execute a small bash script before #command "update-java-alternatives --jre-headless -s java-6-sund"
[2012-05-18 19:40:52 -0400] izo: but if i put my bash as: command "blah blah" before the above command I am getting FATAL: NoMethodError: undefined method `command' for Chef::Resource::Package
[2012-05-18 19:41:02 -0400] izo: if i define a method for this
[2012-05-18 19:41:05 -0400] izo: and put the command inside
[2012-05-18 19:41:26 -0400] izo: i am getting a similar error
[2012-05-18 19:41:27 -0400] izo: any feedback
[2012-05-18 19:41:31 -0400] izo: basically i am trying to do
[2012-05-18 19:43:15 -0400] izo: "/usr/bin/gpg --keyserver http://www.somerandomserver.com/repo/pubkey.asc --recv-keys AAAA55AA55  | /usr/bin/gpg --export --armor AAAA55AA55  | apt-key add -"
[2012-05-18 19:43:26 -0400] izo: before java install (which is using changed repository
[2012-05-18 19:43:38 -0400] izo: any ideas?
[2012-05-18 19:43:48 -0400] erikh: I don't think you need the gpg sauce
[2012-05-18 19:43:54 -0400] erikh: just apt-key should work
[2012-05-18 19:44:16 -0400] erikh: e.g., curl http.... | apt-key add -
[2012-05-18 19:44:47 -0400] izo: well, i don't think the issue is with the command in general
[2012-05-18 19:44:50 -0400] izo: if i execute it it works
[2012-05-18 19:44:52 -0400] izo: adds the key
[2012-05-18 19:45:04 -0400] izo: but when chef-client tries to run it fails on
[2012-05-18 19:45:07 -0400] erikh: package doesn't have a command dsl
[2012-05-18 19:45:11 -0400] ssd7: izo: Also, if you use the apt_repository LWRP from the apt cookbook, I believe it can handle keys for you too
[2012-05-18 19:45:52 -0400] izo: ok, the issue is not with the key
[2012-05-18 19:45:54 -0400] izo: the question is
[2012-05-18 19:46:01 -0400] izo: why i can not put command "some command"
[2012-05-18 19:46:07 -0400] izo: before
[2012-05-18 19:46:11 -0400] izo: execute "update-java-alternatives" do   command "apt-get update"   command "update-java-alternatives --jre-headless -s java-6-sund"   only_if do platform?("ubuntu", "debian") end   ignore_failure true   returns 0   action :nothing end
[2012-05-18 19:46:20 -0400] izo: this is part of the java recepie
[2012-05-18 19:46:28 -0400] izo: sorry for the paste
[2012-05-18 19:46:39 -0400] izo: command "apt-get update" is the first command
[2012-05-18 19:47:06 -0400] izo: i want to do command "gpg ..... blah blah" but it gives me FATAL: NoMethodError: undefined method `command' for Chef::Resource::Package
[2012-05-18 19:47:25 -0400] izo: so does it mean that the command's need to defined in a method/listed somewhere
[2012-05-18 19:52:44 -0400] Scrivener: Would this happen to be a support channel for chef, or am I in the wrong place?
[2012-05-18 19:54:45 -0400] cobragoat: wtf showed up late to the workshop and apparently everyone left?
[2012-05-18 20:04:11 -0400] ssd7: cobragoat: Maybe it is a lunch break or something?  I can poke some people
[2012-05-18 20:04:34 -0400] cobragoat: Plz do!
[2012-05-18 20:04:54 -0400] cobragoat: I'm sitting in the lobby wondering what's up..
[2012-05-18 20:04:58 -0400] ssd7: Well, virtualy poke
[2012-05-18 20:05:01 -0400] cobragoat: Scheduled 9-5
[2012-05-18 20:05:06 -0400] cobragoat: Lol
[2012-05-18 20:06:34 -0400] paulmooring: jtimberman: you around?
[2012-05-18 20:11:12 -0400] ssd7: cobragoat: Looks like the hotel network couldn't handle the load from the class.
[2012-05-18 20:12:21 -0400] cobragoat: ssd7: bummer!!! So everybody just went home..
[2012-05-18 20:12:50 -0400] ssd7: I believe so, trying to confirm
[2012-05-18 20:17:58 -0400] ssd7: cobragoat: Confirmed that the class was cancelled because of the network issues. :(
[2012-05-18 20:20:30 -0400] cobragoat: Ssd7: damn.. Ya the hotel is a little janky
[2012-05-18 20:21:02 -0400] cobragoat: Ssd7: thanks a lot tho!
[2012-05-18 20:21:56 -0400] ssd7: No problem
[2012-05-18 20:45:14 -0400] LinuxHorn: anyone have a sec?
[2012-05-18 20:45:38 -0400] LinuxHorn: in a recipe, i want to only proceed with a certain section if a certain data bag exists
[2012-05-18 20:46:28 -0400] LinuxHorn: basically, don't proceed with "raxcloud = Chef::EncryptedDataBagItem.load("rackspace","cloud")"
[2012-05-18 20:46:42 -0400] LinuxHorn: unless the data bag rackspace with item cloud exists
[2012-05-18 20:47:19 -0400] LinuxHorn: someone have a quick if statement that can help me?
[2012-05-18 20:50:26 -0400] cwj: LinuxHorn: if you know what kind of exception is thrown you can wrap it in a rescue
[2012-05-18 20:50:47 -0400] yfeldblum: data_bag("rackspace").include?("cloud")
[2012-05-18 20:53:17 -0400] yfeldblum: http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F and http://wiki.opscode.com/display/chef/Data+Bags#DataBags-LoadingaDataBagDirectly
[2012-05-18 20:53:44 -0400] LinuxHorn: yfeldblum: that fails because i don't have a rackspace data bag
[2012-05-18 20:53:56 -0400] LinuxHorn: [Fri, 18 May 2012 20:51:03 +0000] INFO: HTTP Request Returned 404 Not Found: Cannot load data bag rackspace
[2012-05-18 20:53:56 -0400] LinuxHorn: [Fri, 18 May 2012 20:51:03 +0000] ERROR: Failed to list data bag items in data bag: "rackspace"
[2012-05-18 20:53:59 -0400] mattray: LinuxHorn: https://github.com/mattray/squid-cookbook/blob/master/recipes/default.rb#L62
[2012-05-18 20:55:13 -0400] ssd7: Although, you might want to rescue the actual exception you care about, and not every exception ;)
[2012-05-18 20:55:31 -0400] yfeldblum: LinuxHorn, https://github.com/opscode/chef/blob/master/chef/lib/chef/data_bag.rb#L138-148
[2012-05-18 20:55:35 -0400] LinuxHorn: i see what you did there mattray, but is there no way to just say "if this data bag exists at all"?
[2012-05-18 20:56:28 -0400] yfeldblum: LinuxHorn, https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/data_bag_list.rb#L37-39
[2012-05-18 20:56:58 -0400] yfeldblum: LinuxHorn, to get started, Chef::Log.info(Chef::DataBag.list)
[2012-05-18 20:57:09 -0400] LinuxHorn: thanks all
[2012-05-18 20:57:47 -0400] yfeldblum: LinuxHorn, once you see exactly what that returns, you will be able to make use of it with Ruby code
[2012-05-18 20:57:55 -0400] yfeldblum: LinuxHorn, or try it with shef
[2012-05-18 20:58:03 -0400] LinuxHorn: trying with chef now :)
[2012-05-18 20:58:06 -0400] LinuxHorn: shef i mean
[2012-05-18 20:58:12 -0400] LinuxHorn: i heart shef
[2012-05-18 20:59:27 -0400] mattray: yfeldblum: if there's a better way please tell me, I just threw that into that cookbook for someone's patches
[2012-05-18 21:01:56 -0400] yfeldblum: mattray, depends on the recipe
[2012-05-18 21:02:39 -0400] yfeldblum: sometimes you want to be cautious and you'll want to check at every step, so you'll want to do: Chef::DataBag.list.keys.include?("rackspace") && data_bag("rackspace").include?("cloud")
[2012-05-18 21:03:01 -0400] yfeldblum: other times you want to just assume they're there, and if they're not, there's nothing you can do about it, so just let the exception happen
[2012-05-18 21:03:08 -0400] yfeldblum: and still other times, something in the middle
[2012-05-18 21:03:17 -0400] LinuxHorn: i follow
[2012-05-18 21:03:20 -0400] LinuxHorn: thanks for the help
[2012-05-18 21:03:53 -0400] yfeldblum: mattray, i'm just helping out & looking for the APIs which provide the functions people are requesting ... i don't know which situation is best in which case, because they're not my cases
[2012-05-18 21:04:35 -0400] mattray: yfeldblum: yeah, I agree with the recommendation for explicitness
[2012-05-18 21:04:36 -0400] yfeldblum: LinuxHorn, i checked in shef as well, so as you probably discovered, you can get the list of data bag names with `Chef::DataBag.list.keys`
[2012-05-18 21:05:32 -0400] yfeldblum: mattray, i dunno, depends ... that's two extra HTTP requests that don't have to be done unless you actually have nice code to handle nicely the cases where the db or dbi are missing
[2012-05-18 21:05:57 -0400] yfeldblum: mattray, completely depends on the particular situation's requirements
[2012-05-18 21:07:00 -0400] mattray: indeed
[2012-05-18 21:07:20 -0400] hoover_damm: is miah sitting on the shelf?
[2012-05-18 21:11:47 -0400] josh_k: Hey chef masters: is there a recommended way to get chef-solo to use a specific version?
[2012-05-18 21:13:55 -0400] erikh: gem install chef -v <version>
[2012-05-18 21:14:18 -0400] erikh: I think that's what you wanted, not entirely sure now :)
[2012-05-18 21:15:33 -0400] josh_k: erikh: yeah I have the right version installed, but it's not the most recent -- I want to go back to 0.10.9 to avoid a bug with symlinks in .10
[2012-05-18 21:15:48 -0400] josh_k: I suppose install .9 and uninstall .10
[2012-05-18 21:17:12 -0400] josh_k: yea that seems better than munging the /usr/bin/chef-solo wrapper ;)
[2012-05-18 21:17:13 -0400] erikh: correct
[2012-05-18 21:17:21 -0400] erikh: yeah, you don't want to mess with those gem wrappers.
[2012-05-18 21:17:41 -0400] hoover_damm: why not? it's exciting!
[2012-05-18 21:18:48 -0400] josh_k: cowboy up! :)
[2012-05-18 21:18:51 -0400] ssd7: josh_k: You probably want 0.10.8 :)  We use odd numbers for develoment versions not released versions.
[2012-05-18 21:19:08 -0400] josh_k: ssd7: thanks;
[2012-05-18 21:19:18 -0400] josh_k: that explains why the older systems all have 0.10.8
[2012-05-18 21:26:37 -0400] SteeleNivenson: is there a Debian source package for the opscode-full-stack S3 bucket? I have to make the decision if I should use the compiled version of Ruby included there or write a script to pivot to a different version after chef is bootstrapped.
[2012-05-18 21:26:57 -0400] SteeleNivenson: so I'd like to see how the Ruby in /opt/opscode was compiled.
[2012-05-18 21:28:39 -0400] yfeldblum: SteeleNivenson, possibly https://github.com/opscode/omnibus-software/blob/master/config/software/ruby.rb
[2012-05-18 21:28:49 -0400] yfeldblum: SteeleNivenson, but i'm not terribly certain about that
[2012-05-18 21:31:57 -0400] josephholsten: anyone got a nexus (maven repo) cookbook they like?
[2012-05-18 21:34:32 -0400] SteeleNivenson: yfeldblum: thanks.
[2012-05-18 21:35:22 -0400] SteeleNivenson: using ruby to build ruby. ahhhhh!
[2012-05-18 21:35:25 -0400] josephholsten: licenses people. include licenses in your cookbooks.
[2012-05-18 21:37:57 -0400] mikeg: anyone notice any issues with notifications when using the 0.10.10 client?
[2012-05-18 21:39:03 -0400] ssd7: mikeg: What kind of issues?
[2012-05-18 21:39:38 -0400] mikeg: just got back from chefconf and was thrown in the middle of an issue.  initial issue seems to be 2 resources not being notified after a remote_file resource completes.  First thing that caught my eye is they're using the new 10.10 client and I haven't tested that yet
[2012-05-18 21:39:53 -0400] mikeg: so thought I'd see if there's a known issue before I jump down the troubleshooting hole
[2012-05-18 21:43:58 -0400] mikeg: https://gist.github.com/2727761
[2012-05-18 21:44:03 -0400] mikeg: that's what I'm seeing
[2012-05-18 21:45:41 -0400] ssd7: hmm
[2012-05-18 21:45:51 -0400] mikeg: weird, huh?
[2012-05-18 21:45:53 -0400] ssd7: Well, none that I have heard of immediately fyi
[2012-05-18 21:45:59 -0400] mikeg: ok
[2012-05-18 21:45:59 -0400] ssd7: known issues, that is
[2012-05-18 21:46:07 -0400] josephholsten: where's that gist to split up a combined cookbooks repo?
[2012-05-18 21:46:19 -0400] mikeg: I'll share any findings
[2012-05-18 21:50:41 -0400] josephholsten: something about git filter-branch
[2012-05-18 21:53:04 -0400] mikeg: verified it works fine with 0.10.8
[2012-05-18 21:53:11 -0400] mikeg: guess I need to file a bug
[2012-05-18 21:53:54 -0400] mikeg: I'm assuming I can expect backwards compatibility.  though haven't fully read the release notes
[2012-05-18 21:54:56 -0400] ssd7: mikeg: Haven't looked deeply but it sounds like a bug.  We strive for backwards compat in these releases.
[2012-05-18 21:55:35 -0400] mikeg: yeah.  I figured as much.  Ok.  sending a note to my team to watch out and stop installing untested versions.  I'll write it up after that
[2012-05-18 21:59:58 -0400] erikh: anyone seen this yet in chef 10.10? https://gist.github.com/7137c69fba87079151ad
[2012-05-18 22:00:06 -0400] erikh: and if so, does anyone know of a workaround?
[2012-05-18 22:01:30 -0400] ssd7: erikh: http://tickets.opscode.com/browse/CHEF-3102
[2012-05-18 22:04:34 -0400] erikh: ok, I'll work around it with bash
[2012-05-18 22:04:38 -0400] erikh: ssd7: thanks!
[2012-05-18 22:10:31 -0400] mikeg: ssd7: created http://tickets.opscode.com/browse/CHEF-3135
[2012-05-18 22:21:14 -0400] pwf: so i'm getting a MissingRole exception, and I think it's because my role is a .rb file instead of .json
[2012-05-18 22:21:34 -0400] pwf: does that seem right? is there any way i can get it to recognize the ruby role files?
[2012-05-18 22:21:49 -0400] pwf: i'm using vagrant with chef-solo as the provisioning
[2012-05-18 23:33:50 -0400] littonj: hello. I'm having a problem where locally the node.fqdn is set properly, but solr appears to have and out of date version ("localhost"). has anyone seen this or know how I might force solr to update
[2012-05-18 23:34:39 -0400] flaccid: littonj: in the run? if its set in the run need to reload the ohai plugin
[2012-05-18 23:35:31 -0400] littonj: ohai returns the right information.
[2012-05-18 23:36:12 -0400] flaccid: how did you test that?
[2012-05-18 23:36:19 -0400] littonj: the only place it appears to be wrong is in a search.
[2012-05-18 23:36:36 -0400] littonj: I tried with shef > node.fqdn as well as ohai | grep fqdn
[2012-05-18 23:37:35 -0400] flaccid: well in a chef run, you need to do this https://github.com/flaccid/cookbooks_public/blob/master/cookbooks/rs_utils/providers/hostname.rb#L124
[2012-05-18 23:39:46 -0400] littonj: all of my recipes are using the correct fqdn I don't think that's where the issue is
[2012-05-18 23:40:55 -0400] flaccid: np
[2012-05-18 23:42:35 -0400] hoover_damm: littonj, running chef-client after updating a hostname would change it
[2012-05-18 23:42:37 -0400] hoover_damm: in the index
[2012-05-18 23:46:35 -0400] littonj: I've run chef-client several times(i run it in daemon mode) and the server seems to have data out of sync with the host
[2012-05-18 23:49:05 -0400] littonj: thanks for your help. I bounced chef-solr and ran it again and it worked
[2012-05-18 23:49:10 -0400] littonj: it being chef-client
[2012-05-18 23:53:23 -0400] dstufft: any way to specify ssh user (-x) in knife.rb?

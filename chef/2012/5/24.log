[2012-05-24 00:01:02 -0400] timsmith: jayjaygoes:  You'll need to add coordination on top of chef
[2012-05-24 00:01:40 -0400] timsmith: jayjaygoes:  We added it on top of our chef runs by having a check in our recipes for an environmental variable called deploy.  If deploy is true the actual software deploy of our product runs.
[2012-05-24 00:01:50 -0400] timsmith: jayjaygoes: Clients can run over and over again without a deploy
[2012-05-24 00:02:07 -0400] timsmith: jayjaygoes: Until we run deploy=true chef-client
[2012-05-24 00:02:35 -0400] timsmith: jayjaygoes: you can do that with with knife ssh, rundeck, capistrano or any other command / control layer
[2012-05-24 00:21:57 -0400] miketheman: jtimberman, or anyone else: if I uploaded the wrong version of a cookbook to the community site, how do I remove that version selectively?
[2012-05-24 00:22:04 -0400] miketheman: and it was out of order, too.
[2012-05-24 00:22:25 -0400] miketheman: i.e. 0.0.6, 0.0.7, 0.1.0, 0.0.8 => I want to get rid of 0.1.0
[2012-05-24 00:24:40 -0400] jessicab: miketheman - when you do a knife cookbook delete, itll prompt for the version you want to delete if  you have multiple
[2012-05-24 00:28:33 -0400] miketheman: jessicab: yes, that's what I expect if I upload the cookbook top my server (or hosted chef). I'm talkjing about when it is published on the community site.
[2012-05-24 00:28:53 -0400] jessicab: oh i missed that, sorry
[2012-05-24 00:32:10 -0400] yfeldblum: jtimberman, opscode community site needs write-once + yank-once functionality
[2012-05-24 00:33:01 -0400] yfeldblum: jtimberman, like gemcutter / rubygems.org
[2012-05-24 00:36:35 -0400] miketheman: yfeldblum: I think that'd be awesome, but doesn't help in botched version numbers
[2012-05-24 00:36:54 -0400] yfeldblum: miketheman, yank the botched number; but can't reuse it
[2012-05-24 00:37:25 -0400] yfeldblum: miketheman, that's how it needs to be so that we can have failure-tolerant, reliable systems
[2012-05-24 00:38:33 -0400] miketheman: yfeldblum: so in my case, I'd be "forced" top move from 0.0.8 to 0.1.1?
[2012-05-24 00:38:59 -0400] yfeldblum: miketheman, right
[2012-05-24 02:00:23 -0400] qhartman: Running chef 10.0 on Centos 6.2 boxes I am intermittently getting a failure doing an SVN deployment. When running chef-client with debugging turned on, I stack traces in unix.rb on line 86 with "`uid=': Resource temporarily unavailable"
[2012-05-24 02:00:37 -0400] qhartman: Any ideas? It's not failing every time, which is driving me nuts
[2012-05-24 02:13:26 -0400] hoover_damm: -l debug?
[2012-05-24 02:19:04 -0400] qhartman: yeah, that is the info I get from that
[2012-05-24 02:19:14 -0400] qhartman: I'll put the full stack in a bin, hang on...
[2012-05-24 03:40:58 -0400] Wohali: hiho, i'm having some chef trouble. searches in the node index of the form 'recipes:<something>' aren't reliable, many nodes aren't appearing. I've rebuilt my index and it didn't help. Could this be CHEF-2346 or am I running into something else?
[2012-05-24 03:43:15 -0400] miketheman: Wohali: are these recepies directly inherited from a role, or are you looking for things that are included?
[2012-05-24 03:43:57 -0400] Wohali: Both.
[2012-05-24 03:44:15 -0400] Wohali: I was starting to suspect that top-level recipes don't end up in recipes, only recipe...is that the case?
[2012-05-24 03:45:33 -0400] Wohali: by "top level recipe" I mean ones in the run_list that aren't inside a role, but are directly listed in the node.
[2012-05-24 03:46:30 -0400] miketheman: I think that any recipe that shows up in the "INFO: Run List expands to []" will appear in the node attributes
[2012-05-24 03:47:09 -0400] Wohali: That was my initial understand, and the way it's documented, too. I'm fully willing to blame SOLR for this.
[2012-05-24 03:47:12 -0400] miketheman: so anything you add to the node and anything specified in a role for the node. but anything inherited from a recipe's inclusion may not
[2012-05-24 03:47:18 -0400] miketheman: hahahaha
[2012-05-24 03:47:22 -0400] Wohali: :)
[2012-05-24 03:47:29 -0400] Wohali: Ah, no, it's not inherited from the recipe
[2012-05-24 03:48:00 -0400] Wohali: either run_list recipe or role -> recipe or role -> role -> recipe, etc.
[2012-05-24 03:48:07 -0400] Wohali: no tricksy stuff.
[2012-05-24 03:48:27 -0400] miketheman: it might be the role -> role -> recipe. can you isolate behavior?
[2012-05-24 03:49:03 -0400] Wohali: Actually, in the case that's have problems, it's a "top-level recipe" that appears in recipe: but not in recipes:
[2012-05-24 03:49:11 -0400] macros: Wohali: recipes: only works after a node has finish a successful run
[2012-05-24 03:49:15 -0400] Wohali: (ever type a word so many times it loses meaning? That just happened with recipes.)
[2012-05-24 03:49:27 -0400] Wohali: macros: successful runs for at least 3 months now every 15 minutes ;)
[2012-05-24 03:49:35 -0400] macros: :)
[2012-05-24 03:49:36 -0400] Wohali: and knife node show does indeed show the recipe there.
[2012-05-24 03:49:55 -0400] Wohali: but the search fails, and that makes a cookbook fail, which fails everybody.
[2012-05-24 03:50:03 -0400] yfeldblum: Wohali, what does your query look like?
[2012-05-24 03:50:20 -0400] Wohali: knife search node 'recipes:zenoss\:\:server'
[2012-05-24 03:51:03 -0400] Wohali: (0 items found)
[2012-05-24 03:51:12 -0400] Wohali: whereas knife search node 'recipe:zenoss\:\:server' returns 1 item.
[2012-05-24 03:53:20 -0400] |shad0w|: expanded run list vs configure run list
[2012-05-24 03:53:20 -0400] Wohali: it's pretty confusing.
[2012-05-24 03:53:47 -0400] Wohali: Well, knife node show <my zenoss server> shows zenoss:server in the Recipes: line.
[2012-05-24 03:53:53 -0400] Wohali: Doesn't that imply that it's in the expanded run list?
[2012-05-24 03:54:06 -0400] Wohali: And that recipe runs every 15 minutes on that machine, I have logs of it in chef-client.
[2012-05-24 03:54:09 -0400] |shad0w|: plurals are expanded, recipes/roles. Singular is only what is configured
[2012-05-24 03:54:15 -0400] |shad0w|: recipe/role
[2012-05-24 03:54:19 -0400] Wohali: yes, I know that.
[2012-05-24 03:54:32 -0400] |shad0w|: hmm
[2012-05-24 03:54:39 -0400] |shad0w|: just noticed what you posted
[2012-05-24 03:54:42 -0400] Wohali: This is one example of problems I'm having; it just happens to be a machine where the recipt is in the top-level
[2012-05-24 03:54:54 -0400] Wohali: recipe*
[2012-05-24 03:55:41 -0400] Wohali: other nodes aren't showing up where they should be in searches of recipes:, even though i'm quite sure that those nodes have those things in their expanded run lists
[2012-05-24 03:55:56 -0400] Wohali: basically i can't trust the output of knife search node anymore :(
[2012-05-24 03:56:19 -0400] Wohali: have bumped maxfieldlength to 1mil in both places, restarted chef-solr, knife index rebuild...no dice
[2012-05-24 03:56:31 -0400] |shad0w|: hosted/open source/private hosted?
[2012-05-24 03:56:41 -0400] |shad0w|: nm
[2012-05-24 03:56:53 -0400] Wohali: private
[2012-05-24 03:57:14 -0400] |shad0w|: did you rebuild the index after you adjusted solr?
[2012-05-24 03:57:22 -0400] retr0h: Wohali: i had the same problem.  node would check in.  I could find it in search, then it would be gone shortly after.
[2012-05-24 03:57:32 -0400] Wohali: yup, as I said
[2012-05-24 03:57:38 -0400] Wohali: knife index rebuild
[2012-05-24 03:57:51 -0400] retr0h: I have quite a fewcustom ohai plugins so i had to increase maxfieldlength and that acutally worked for me
[2012-05-24 03:58:02 -0400] Wohali: couple of "Server returned error" messages but I get the Chef::Node: success message eventually
[2012-05-24 03:58:03 -0400] retr0h: yah
[2012-05-24 03:58:18 -0400] Wohali: retr0h: Yeah, so do I (ohai plugins)...
[2012-05-24 03:58:43 -0400] retr0h: Wohali: did you restart all chef services.. i restarted everything then rebuilt index after restart and that seemed to clear it up for me
[2012-05-24 03:58:54 -0400] Wohali: hm, I could try that.
[2012-05-24 03:59:21 -0400] retr0h: I basically do this
[2012-05-24 03:59:22 -0400] retr0h: sed -i 's/\(<maxFieldLength>\).*/\1100000<\/maxFieldLength>/g' ${SOLR_CONFIG}
[2012-05-24 03:59:49 -0400] retr0h: chef-solr chef-expander chef-server restarts
[2012-05-24 03:59:55 -0400] retr0h: then rebuild index
[2012-05-24 04:00:07 -0400] retr0h: i have 3 private chef servers in our 3 openstack datacenters and that fixes it for me
[2012-05-24 04:02:38 -0400] retr0h: Wohali: what type of ohai plugins are you using... more curious b/c I have a fascination with ohai plugins ;)
[2012-05-24 04:04:31 -0400] Wohali: just a moment.
[2012-05-24 04:11:57 -0400] Wohali: retr0h: a sysctl one
[2012-05-24 04:42:58 -0400] dangerdave: When using deploy_revision, what is the reasoning for having a cached-copy directory? Why not just have one copy, in releases? (I know this is a capistranoism, but having never toyed with it, I guess I don't understand why it is necessary or desirable?)
[2012-05-24 04:45:32 -0400] retr0h: dangerdave: I believe that is used so it can perform a git pull and only get deltas vs checking out the entire repo again
[2012-05-24 04:45:56 -0400] dangerdave: retr0h: i was thinking that, but when coupled with shallow_clone is it so useful?
[2012-05-24 04:47:15 -0400] dangerdave: oh, it might also be necessary to figure out the revision has?
[2012-05-24 04:47:21 -0400] dangerdave: irk, to figure out the revision _hash_?
[2012-05-24 04:55:11 -0400] retr0h: dangerdave: I'm not entirely sure - I haven't used it but a few times.  I suppose it can't hurt to use it tho.
[2012-05-24 04:56:03 -0400] dangerdave: retr0h: sort of what I'm thinking. Taking a poke through the implementation of the Deploy resources & providers just to understand. There are a lot of assumptions that make sense for rails and that aren't really interesting for other platforms, but it seems serviceable.
[2012-05-24 04:56:37 -0400] retr0h: https://github.com/opscode/cookbooks/blob/master/application/recipes/rails.rb
[2012-05-24 04:56:47 -0400] retr0h: that doesn't seem to make use of cached-copy
[2012-05-24 04:57:53 -0400] retr0h: dangerdave: yah I'm not much of a fan of capistrano - it's pretty janky but served a purpose at one time ;p (i always used fabric or vlad, but have done my fair share of cap)
[2012-05-24 04:58:30 -0400] dangerdave: retr0h: heh. never really used cap much. using fabric less as we use chef server more.
[2012-05-24 04:59:44 -0400] retr0h: yah - only makes sense to use it less
[2012-05-24 05:00:42 -0400] retr0h: I am starting to favor the deployment scheme of deploy to new VMs and point your LB to the new systems
[2012-05-24 05:01:41 -0400] retr0h: vs the cap reversion model
[2012-05-24 05:01:47 -0400] retr0h: revision*
[2012-05-24 05:05:41 -0400] dangerdave: retr0h: that might make the best sense. or, taking it one level further: deploy to a VM, snapshot it, and then point your LB to the new AMIs or similar.
[2012-05-24 05:07:36 -0400] retr0h: dangerdave: totally
[2012-05-24 05:09:10 -0400] yfeldblum: a la netflix's bakery
[2012-05-24 05:09:31 -0400] retr0h: yfeldblum: yum
[2012-05-24 05:27:04 -0400] dangerdave: retr0h: from what I can tell, the cached-copy _is_ necessary to get a revision hash (via git rev-parse HEAD). So that's one point in its favor ;-)
[2012-05-24 05:28:04 -0400] miah: hi
[2012-05-24 05:28:12 -0400] BryanWB_: hello!
[2012-05-24 05:32:07 -0400] yfeldblum: hi
[2012-05-24 05:33:19 -0400] Wohali: well, restarting my solr busted it. blah.
[2012-05-24 05:58:56 -0400] miah: guh
[2012-05-24 05:58:57 -0400] miah: tired
[2012-05-24 05:59:04 -0400] miah: but trying to figure out why a template hates me
[2012-05-24 06:18:48 -0400] Nils_: Gentlemen, I have a bit of a bizzare problem with a node fqdn, would anyone mind helping me out?
[2012-05-24 06:24:52 -0400] Nils_: guess it's too late for the americans and too early for the europeans, I'll be back ;p
[2012-05-24 06:28:00 -0400] rohrer: what is the current best practice for cookbook repos? individual (chef-nginx) or shared (cookbooks/nginx)?
[2012-05-24 06:40:34 -0400] miah: chef-nginx
[2012-05-24 06:41:04 -0400] miah: if you share your cookbooks directory it becomes a hassel to look at changes for specific cookbooks, as well as make/accept changes
[2012-05-24 06:42:44 -0400] rohrer: miah: thanks. I prefer that as well, though many/(most?) examples show the other way
[2012-05-24 06:43:15 -0400] miah: ya. most people are moving away from that method though and using split repo's
[2012-05-24 07:20:18 -0400] Wohali: anyone have a simple startup script for chef-api-server w/ rainbows/unicorn?
[2012-05-24 07:25:54 -0400] alex88: morning guys, if i have 1 loadbalancer, 2 web servers, 1 db and i want to add a web server, how could i update the loadbalancer config? (suppose that loadbalancer setup has been done with search api)
[2012-05-24 07:27:34 -0400] BryanWB_: alex88: y, use search
[2012-05-24 07:28:01 -0400] BryanWB_: or u have a data_bag     proxy/lb.json,  in there hard code the webservers u want to proxy
[2012-05-24 07:28:13 -0400] BryanWB_: using haproxy?
[2012-05-24 07:28:46 -0400] alex88: BryanWB_, i'm still in coding stage.. imaging that i've already deployed everything and i want to add a web server..
[2012-05-24 07:29:06 -0400] alex88: i create a new instance with role web server, but in the code, how could i go to update the code on the load balancer?
[2012-05-24 07:29:21 -0400] alex88: that has already been deployed
[2012-05-24 07:29:37 -0400] BryanWB_: knife ssh "name:load_balancer" chef-client  -x foo
[2012-05-24 07:30:05 -0400] alex88: it'll run again the rule or?
[2012-05-24 07:30:37 -0400] BryanWB_: y
[2012-05-24 07:30:51 -0400] BryanWB_: if u use search, it will find the new webserver
[2012-05-24 07:31:18 -0400] alex88: ok, so i should make a recipe/run that only search for web servers and reload loadbalancer
[2012-05-24 07:31:34 -0400] alex88: what's -x foo?
[2012-05-24 07:31:39 -0400] alex88: nm, i'll do a --help
[2012-05-24 07:32:13 -0400] BryanWB_: user name
[2012-05-24 07:32:33 -0400] alex88: can i include that in the web server recipe? so on every deploy it automatically updates load balancer?
[2012-05-24 07:32:51 -0400] BryanWB_: no, would be in load balancer's recipe
[2012-05-24 07:32:54 -0400] BryanWB_: what lb u using?
[2012-05-24 07:33:07 -0400] alex88: BryanWB_, i'm still coding, btw i'll use varnish..
[2012-05-24 07:33:55 -0400] alex88: btw, i was asking if i can add "knife ssh "name:load_balancer" chef-client  -x foo" into the web server recipe.. or if i should deploy and then run that manually
[2012-05-24 07:34:35 -0400] BryanWB_: the webserver recipe can't invoke chef-client on the load balancer
[2012-05-24 07:34:39 -0400] BryanWB_: gotta do it manually
[2012-05-24 07:35:41 -0400] alex88: kk ty, so "name:load_balancer" will search for such nodes right? running chef-client what does? re-run all roles?
[2012-05-24 07:36:36 -0400] BryanWB_: in ur recipe for load_balancer ,   search(:node, "roles:webserver") would find the webservers that want to proxied, if u r using "webserver" as a role name
[2012-05-24 07:37:08 -0400] BryanWB_: "name:load_balancer") "load_lbanalcer" just generic hostname for a load balancer
[2012-05-24 07:38:01 -0400] alex88: ok, btw, if i have 2 recipes, varnish and varnish:search, varnish recipe installs varnish, varnish:search searches for web servers.. chef-client will run both?
[2012-05-24 07:48:14 -0400] BryanWB_: alex88: y, if they are both on the run_list
[2012-05-24 07:48:53 -0400] alex88: in the run_list of the role.. mmh.. what if it should just run varnish:search.. as i don't need it to run again the install part
[2012-05-24 07:49:17 -0400] BryanWB_: the install part should be idempotent
[2012-05-24 07:49:32 -0400] BryanWB_: no effect running 2x, in fact all ur recipes should be idempotent
[2012-05-24 07:49:59 -0400] alex88: so running again won't run because it's already installed
[2012-05-24 07:50:04 -0400] alex88: ok got it
[2012-05-24 07:50:16 -0400] alex88: so i should add some if :)
[2012-05-24 07:57:00 -0400] alex88: BryanWB_, so if the web servers have a recipe to do a git clone to deploy code, i should do the same when i want to update that code right?
[2012-05-24 07:58:36 -0400] BryanWB_: y
[2012-05-24 08:23:49 -0400] alex88: thank you BryanWB_
[2012-05-24 08:26:04 -0400] zeroXten: is there a chef specific search engine sort of like what R has?
[2012-05-24 08:26:20 -0400] alex88: zeroXten, what you want to search?
[2012-05-24 08:26:48 -0400] zeroXten: to be honest, I'm just trying to find the commiunity recipes site :/ but in my denfence I've only had one coffee so far today
[2012-05-24 08:27:51 -0400] zeroXten: hmm, found community plugins for knife
[2012-05-24 08:28:09 -0400] alex88: zeroXten, http://community.opscode.com/cookbooks ?
[2012-05-24 08:28:21 -0400] zeroXten: ahh yes
[2012-05-24 08:28:27 -0400] zeroXten: where is that linked from?
[2012-05-24 08:29:09 -0400] alex88: zeroXten, http://community.opscode.com/ homepage? :)
[2012-05-24 08:30:50 -0400] zeroXten: ah, like i said, one coffee. I should have seen the *huge* orange button on www.opscode.com I guess
[2012-05-24 08:45:34 -0400] zeroXten: right, looks like I am going to have to write a better route resource/provider :(
[2012-05-24 08:54:40 -0400] alex88: zeroXten, route?
[2012-05-24 08:57:26 -0400] rnewson: is there a faq on performance issues? my chef server is glacially slow.
[2012-05-24 08:57:48 -0400] alex88: rnewson, UI or what?
[2012-05-24 08:58:19 -0400] rnewson: we don't run the webui. this is chef-client making GET and POST requests to the server during a run
[2012-05-24 08:58:36 -0400] rnewson: each takes about 30 seconds, and the server isn't really that burdened.
[2012-05-24 08:58:54 -0400] rnewson: iirc we switched from the debian package to the rubygems bundle at around this time
[2012-05-24 08:59:02 -0400] rnewson: regretting that now :)
[2012-05-24 08:59:53 -0400] ashb: DNS resolution?
[2012-05-24 09:00:49 -0400] rnewson: hm, if it were that the run wouldn't succeed, no?
[2012-05-24 09:01:07 -0400] ashb: as in the server is trying to resolve the client IP and cant so times out
[2012-05-24 09:01:11 -0400] ashb: (wild guess here)
[2012-05-24 09:01:18 -0400] rnewson: Oh, interesting thought.
[2012-05-24 09:02:15 -0400] rnewson: so time curl http://host:4000 takes about 30 seconds each time, and I get an html response.
[2012-05-24 09:02:33 -0400] rnewson: so I don't think the remote end is doing dns lookup in that case.
[2012-05-24 09:03:05 -0400] rnewson: and fwd/rev dns lookup from the server to that client works fine, and quickly.
[2012-05-24 09:03:18 -0400] ashb: not sure then :/
[2012-05-24 09:04:22 -0400] nacer: hello
[2012-05-24 09:04:30 -0400] BryanWB_: hey nacer !
[2012-05-24 09:04:40 -0400] nacer: hey BryanWB_ :)
[2012-05-24 09:04:48 -0400] nacer: did you have fun at chefconf ?
[2012-05-24 09:05:11 -0400] BryanWB_: nacer: tons
[2012-05-24 09:05:30 -0400] nacer: BryanWB_: i wanted to come but the trip cost some money :)
[2012-05-24 09:05:48 -0400] zeroXten: alex88: yeah, something that can work with non-standard routing tables and multiple DGs etc
[2012-05-24 09:06:15 -0400] nacer: BryanWB_: did you have test the new install method with chef-full package ?
[2012-05-24 09:06:47 -0400] nacer: i have weird stuff , first he install the 0.10.8 pacakge instead of the 0.10.10
[2012-05-24 09:06:59 -0400] BryanWB_: nacer: not yet
[2012-05-24 09:08:32 -0400] nacer: second : gem_package seem to behave like chef_gem
[2012-05-24 09:08:53 -0400] nacer: he don't install gem on my system but in /opt/opscode/...
[2012-05-24 09:09:24 -0400] nacer: i'am looking on jira if bugreport exist for that
[2012-05-24 09:10:26 -0400] alex88: rnewson, don't know sorry.. i know that status page on chef ui is sloooow
[2012-05-24 09:10:30 -0400] alex88: maybe some timeouts
[2012-05-24 09:10:48 -0400] rnewson: np
[2012-05-24 09:29:55 -0400] Zozo: Good day. I'm just started with chef-solo to prepare my ubuntu vps for rails-appication deployment. My application need ruby-1.9.3 and I thought to install rvm under deploy-user, install ruby193 under rvm and use it for running application. But I can't find the way to install rvm under specified user.  I use this recipe https://gist.github.com/2780426 it install rvm and ruby and make ruby193 default. Install of rvm and ruby works, but set
[2012-05-24 09:30:11 -0400] Zozo: not working. Please, give some advices - what's wrong?
[2012-05-24 09:31:21 -0400] Zozo: when I login as deploy-user and run rvm list I see ruby-1.9.3 but it's not default
[2012-05-24 10:04:52 -0400] alex88: http://pastebin.com/3fGWSJzk i'm using this role, recipe and template, but the @alias.each doesn't print anything in the file, any idea?
[2012-05-24 10:06:18 -0400] PeterDonald: Change the template to read server_name <%= @hostname %> <%= @alias.collect { |aliasname| aliasname }.join(' ') %>;
[2012-05-24 10:10:56 -0400] alex88: PeterDonald, oh, great, thank you :) what's the difference between collect and each?
[2012-05-24 10:12:19 -0400] PeterDonald: each just iterates over everything in the loop but does not return any value, collect iterates over each item in the list and adds the result of the block to a list and returns the list
[2012-05-24 10:12:55 -0400] alex88: so in this case { |aliasname| aliasname } will represent the list?
[2012-05-24 10:14:28 -0400] PeterDonald: thats the block of code that is executed each time to produce a result  actually looking at it again I would actually do "server_name <%= @hostname %> <%= @alias.join(' ') %>;"
[2012-05-24 10:14:47 -0400] alex88: much easier, thank you man!
[2012-05-24 10:25:20 -0400] zeroXten: dumb question: is it possible to pass arrays to resource attributes?
[2012-05-24 10:27:05 -0400] PeterDonald: yep you can pass arrays as attributes to resources
[2012-05-24 10:27:26 -0400] zeroXten: ah ok
[2012-05-24 10:27:26 -0400] BryanWB_: PeterDonald: g'day mate!
[2012-05-24 10:27:29 -0400] zeroXten: thanks
[2012-05-24 10:27:52 -0400] nacer: PeterDonald: is on fire ! :)
[2012-05-24 10:27:54 -0400] zeroXten: so, :kind_of => String would also accept an array of Strings?
[2012-05-24 10:27:58 -0400] PeterDonald: hey Bryan, I finally got net at home ;)
[2012-05-24 10:28:12 -0400] BryanWB_: PeterDonald: congrats ;)
[2012-05-24 10:28:23 -0400] PeterDonald: zeroXten: no you would need to do :kind_of => Array
[2012-05-24 10:28:27 -0400] zeroXten: hmm
[2012-05-24 10:28:28 -0400] zeroXten: ok
[2012-05-24 10:33:33 -0400] BryanWB_: PeterDonald: since u have 7+ environments, how do u avoid typing  all the cookbook version constraints 7 times?
[2012-05-24 10:33:52 -0400] BryanWB_: PeterDonald: do u  keep them in a separate file and eval them?
[2012-05-24 10:34:47 -0400] PeterDonald: right now we don't have ay easy way other than editing them in multiple environments
[2012-05-24 10:34:55 -0400] BryanWB_: what a PITA
[2012-05-24 10:35:06 -0400] BryanWB_: i am sure i would make lots of mistakes if i did that
[2012-05-24 10:35:11 -0400] PeterDonald: we have started thinking about making a knife plugin that does easy promotion between environments
[2012-05-24 10:35:27 -0400] BryanWB_: PeterDonald: u seen knife-spork? it handles promotion
[2012-05-24 10:35:40 -0400] PeterDonald: The same plugin would do things like ensure they are frozen and pass food critic tests etc
[2012-05-24 10:36:01 -0400] BryanWB_: PeterDonald: i think spork does that
[2012-05-24 10:36:02 -0400] BryanWB_: https://github.com/jonlives/knife-spork
[2012-05-24 10:36:18 -0400] PeterDonald: interesting .. I'll take a look
[2012-05-24 10:36:20 -0400] BryanWB_: was one of the most popular talks at chefconf
[2012-05-24 10:39:00 -0400] zeroXten: on http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+%28LWRP%29, in the example /cookbooks/opscode/providers/mysql.rb provider, it makes reference to 'execute "create database"'.. where would I find docs that describe exactly what the "execute" is for/doing?
[2012-05-24 10:39:37 -0400] zeroXten: i have yet to come across reference documentation
[2012-05-24 10:40:10 -0400] PeterDonald: Execute is an opscode provided resource. Check out the dock at http://wiki.opscode.com/display/chef/Resources#Resources-Execute
[2012-05-24 10:40:24 -0400] BryanWB_: jonlives: u guys have a lot more fans now ;)
[2012-05-24 10:40:35 -0400] jonlives: w00t!
[2012-05-24 10:41:07 -0400] zeroXten: ah, that makes sense. So they're setting a random name, but then using command to specify the actualy command to readability
[2012-05-24 10:41:10 -0400] zeroXten: cool thanks
[2012-05-24 10:42:02 -0400] BryanWB_: jonlives: had another idea for a show, it may sound a little dry but I think it would be valuable, what if u and andrew discussed on the show what u think the most important FC0*s are and why?
[2012-05-24 10:42:43 -0400] jonlives: sure, would be an interesting comparison cos we lean more on style rules vs correctness ones
[2012-05-24 11:16:09 -0400] lowg: Hi all, I'm new to chef and liking it a lot.  What's the 'official' way to interrupt the execution of a recipe; say you have an app server that's waiting for the DB server to be up
[2012-05-24 11:21:23 -0400] Mithrandir: lowg: you could use zookeeper or noah to have synchronisation points, or you could just return and do more later.
[2012-05-24 11:22:57 -0400] BryanWB_: lowg: interrupt or pause?
[2012-05-24 11:38:40 -0400] Mydalon1: Hi, is there a way to tell chef to NOT fail if some ressource fails? I just had a node fail because the hatop package could not be found. For me hatop is nice to have, but a running haproxy is much more important. So I would like to tell chef that even if "package 'hatop'" fails to just go on with the recipe.
[2012-05-24 11:39:14 -0400] BryanWB_: Mydalon1:  ignore_failure   false
[2012-05-24 11:39:23 -0400] Mydalon1: Cool
[2012-05-24 11:39:27 -0400] Mydalon1: thx
[2012-05-24 11:39:29 -0400] BryanWB_: what is hatop?
[2012-05-24 11:40:02 -0400] Mydalon1: A command line tool to see haproxy stats - nice to have, but since we also use the web frontend it is not essential
[2012-05-24 11:40:14 -0400] Mydalon1: (And not included in debian, as I now found out ;-) )
[2012-05-24 11:40:17 -0400] BryanWB_: nice! i had no idea it existed
[2012-05-24 11:40:27 -0400] BryanWB_: and not in rhel either :(
[2012-05-24 11:40:35 -0400] Mydalon1: http://code.google.com/p/hatop/
[2012-05-24 11:44:19 -0400] lowg: BryanWB_: I want it to continue again when the db env is up; so I've put it all in a ruby block (the search and make sure config is completed) that sets a db_ready flag
[2012-05-24 11:44:57 -0400] lowg: Mithrandir>Not seen those; will go and look them up
[2012-05-24 11:48:04 -0400] BryanWB_: lowg: nice, zookeeper is supposed to be complex but i haven never tried
[2012-05-24 12:11:15 -0400] zeroXten: if I have a resource that manages a file, and multiple cookbooks using that resource, how to I ensure that the end file contains the correct values from both cookbooks? Can i create the file at the end of the chef execution process to ensure that all recipes have created their resources? Or should I use a grep/append method on-the-fly?
[2012-05-24 12:11:22 -0400] zeroXten: sorry, still very new to chef
[2012-05-24 12:12:33 -0400] atomic-penguin: zeroXten, the last resource to manage the file should win
[2012-05-24 12:13:11 -0400] zeroXten: so that will override previous uses of the resource?
[2012-05-24 12:13:23 -0400] atomic-penguin: zeroXten, it should
[2012-05-24 12:13:40 -0400] silk1: zeroXten, you are having a single resource, managed by multipe recipes and cookbooks?
[2012-05-24 12:13:49 -0400] zeroXten: silk: yeah
[2012-05-24 12:14:02 -0400] silk: id really try to find another way to do it if possible
[2012-05-24 12:14:07 -0400] atomic-penguin: Although you should probably use a template resource to cover multiple cases
[2012-05-24 12:14:08 -0400] zeroXten: oh ok
[2012-05-24 12:14:41 -0400] atomic-penguin: Then add attributes for all the configurable bits on that template file
[2012-05-24 12:14:48 -0400] zeroXten: yeah ok
[2012-05-24 12:15:24 -0400] zeroXten: should my resource/provider handle the attributes and then use a template?
[2012-05-24 12:15:35 -0400] zeroXten: perhaps I should look at the existing "route" resource
[2012-05-24 12:16:13 -0400] atomic-penguin: If you are using an LWRP, then the provider should pass in attributes or variables to the template
[2012-05-24 12:16:56 -0400] zeroXten: hmm
[2012-05-24 12:17:18 -0400] atomic-penguin: maybe I'm misunderstanding when you say resource/provider though
[2012-05-24 12:18:19 -0400] zeroXten: let me start again. recipeA needs to add routes to route-eth1 and recipeB also needs to add routes to route-eth1 because route-eth1 is a general system file and has nothing to do with particular applications etc installed on the box
[2012-05-24 12:18:38 -0400] zeroXten: so, I could use a template and iterate over an array of rules to add to route-eth1
[2012-05-24 12:19:20 -0400] zeroXten: then recipeA and recipeB just need to add into that array of rules
[2012-05-24 12:19:51 -0400] zeroXten: I'm guessing that resource/provider is the best way to do that
[2012-05-24 12:20:17 -0400] atomic-penguin: Have one recipe manage routes on an interfaces, with routes as a configurable attribute
[2012-05-24 12:21:04 -0400] atomic-penguin: Instead of RecipeA and RecipeB, use RoleA and RoleB
[2012-05-24 12:21:26 -0400] zeroXten: where do i do my validation of hte attributes then?
[2012-05-24 12:21:39 -0400] zeroXten: hmm
[2012-05-24 12:21:44 -0400] zeroXten: in the recipe i gues
[2012-05-24 12:21:46 -0400] zeroXten: +s
[2012-05-24 12:21:53 -0400] atomic-penguin: So RoleA may be a baseline role, and RoleB might be your edge case VLAN
[2012-05-24 12:22:45 -0400] zeroXten: ok, but why is a resource/provider not the right approach? As i am effectively trying to manage a resource
[2012-05-24 12:23:33 -0400] atomic-penguin: I never said it wasn't the right approach
[2012-05-24 12:23:38 -0400] zeroXten: oh ok
[2012-05-24 12:23:44 -0400] atomic-penguin: Only you know what your infrastructure looks like
[2012-05-24 12:23:51 -0400] zeroXten: a mess ;)
[2012-05-24 12:24:02 -0400] atomic-penguin: automate the mess, I say
[2012-05-24 12:24:23 -0400] zeroXten: thats exactly what we're doing, hence me here
[2012-05-24 12:24:24 -0400] atomic-penguin: de-kludge what you can
[2012-05-24 12:24:45 -0400] zeroXten: yup
[2012-05-24 12:25:43 -0400] gadolin: do you happen to know solution for  caching proxy for yum, so I could pull public packages pointing to my server, which would on deemand cache packages?
[2012-05-24 12:26:03 -0400] gadolin: same as nexus
[2012-05-24 12:38:48 -0400] alex88: is not possible to do a git clone using password protected ssh using scm resource?
[2012-05-24 12:41:05 -0400] BryanWB_: it is, there is a cookbook on it from chris roberts
[2012-05-24 12:41:35 -0400] BryanWB_: http://community.opscode.com/cookbooks/deploy_wrapper
[2012-05-24 12:42:26 -0400] alex88: that's for key based auth isn't it?
[2012-05-24 12:42:32 -0400] zeroXten: one final silly question for this hour :) what is the correct way of checking whether an optional 'attribute' was set for a resource in a provider? defined? seems to have returned true for something not used
[2012-05-24 12:44:54 -0400] fish_: re
[2012-05-24 12:47:26 -0400] nacer: haha Adam is funny on stage
[2012-05-24 12:49:16 -0400] atomic-penguin: zeroXten, probably want to try .exists? or .has_key?
[2012-05-24 12:49:38 -0400] laurent\: nacer: yeah, and he's able to speak at a very high wpm rate :)
[2012-05-24 12:49:42 -0400] fish_: I'm trying to write a custom ohai plugin on chef 0.9.18. I'm using the opscode ohai cookbook and applied it to a host. it deploys the plugin to /etc/chef/ohai_plugins but neither a chef run nor ohai -d /etc/chef/ohai_plugins runs that plugin
[2012-05-24 12:50:01 -0400] nacer: laurent\: yeah but his not eating words so thaht goods
[2012-05-24 12:50:07 -0400] fish_: (when I run ohai -l debug the plugin doesn't show up)
[2012-05-24 12:50:11 -0400] nacer: laurent\: i'am french and i understand him
[2012-05-24 12:50:16 -0400] atomic-penguin: zeroXten, on the other hand if its just unitialized, you might use .empty? or .nil?
[2012-05-24 12:50:26 -0400] laurent\: nacer: so am/do i :)
[2012-05-24 12:50:31 -0400] fish_: but I can move it to /var/lib/gems/1.8/gems/ohai-0.5.8/lib/ohai/plugins/ and it works just fine
[2012-05-24 12:50:34 -0400] fish_: any ideas?
[2012-05-24 13:52:01 -0400] raveli: Hi all, I'm starting with Chef and I have a possibly stupid question: assume I have a node that I'm managing with Chef. I have a few Resources that I've specified for the node (e.g. nginx package and service). What are the best practices for managing everything else? Let's say a critical update to libxml2 is available, how should I apply the update on my node?
[2012-05-24 13:52:18 -0400] raveli: If I start running yum updates manually on my nodes, there's a risk I accidentally update something that conflicts with the Resources that I'm managing with Chef. On the other hand, having every single installed package as a separate managed Resource in Chef doesn't sound too good, either. :)
[2012-05-24 13:54:42 -0400] yfeldblum: raveli, `knife ssh "*:* "yum update libxml2"`
[2012-05-24 14:01:10 -0400] specialsauce: ohai chefs! Is anyone aware of a bug in which "knife search" returns nodes but "Knife ssh" on the same query says no nodes are found?
[2012-05-24 14:01:15 -0400] specialsauce: 0.10.8
[2012-05-24 14:01:57 -0400] raveli: yfeldblum: AFAIK that command updates libxml2 on all managed nodes. So it's essentially up to me to take care that I don't update any packages that might already be managed by Chef (I could easily see myself having different version restrictions for qa/staging/prod environments for selected packages)?
[2012-05-24 14:03:27 -0400] lowg: Ok, next silly question; say you've searched for and got a node as a result (for example).  Can you copy a subtree of the result into the current node?
[2012-05-24 14:03:31 -0400] yfeldblum: in the absence of a bundler for system packages, and faced with persistent machines, the choices aren't necessarily ideal
[2012-05-24 14:03:37 -0400] dcrosta: Is it possible to control the order in which ohai plugins are run?
[2012-05-24 14:04:55 -0400] zeroXten: thanks again atomic-penguin :D
[2012-05-24 14:05:26 -0400] lowg: i.e. db = search(:node, "name:db").first ; node.override.config.db = db.database.config
[2012-05-24 14:05:50 -0400] atomic-penguin: zeroXten, no problem, good luck!
[2012-05-24 14:06:39 -0400] raveli: yfeldblum: fair enough. I had hoped for a silver bullet here but I guess there fairly seldom is one. Thanks for help! :)
[2012-05-24 14:36:43 -0400] gp5st: can anyone think of a reason it would take 5 or so minutes for chef-client to run on a windows box.  it prits the chef 0.10.8 line, then sits for 5 min, then runs all the recipies
[2012-05-24 14:36:54 -0400] gp5st: the cpu doesn't seeam to be doing anything during this time
[2012-05-24 14:38:14 -0400] laurent\: gp5st: try to run it with -l debug
[2012-05-24 14:38:48 -0400] gp5st: will do
[2012-05-24 14:38:51 -0400] laurent\: it might as well be ohai that takes time to do the inventory
[2012-05-24 14:39:02 -0400] gp5st: yeah, i just found an article about that
[2012-05-24 14:39:12 -0400] gp5st: i disabled some of the ohai plugins
[2012-05-24 14:39:31 -0400] gp5st: i didn't know about the debug flag, that'll be useful int he future
[2012-05-24 14:39:36 -0400] gp5st: in the*
[2012-05-24 14:40:08 -0400] laurent\: that's for sure ! :)
[2012-05-24 14:44:22 -0400] Tensibai: Hello
[2012-05-24 14:44:31 -0400] gp5st: ohai!
[2012-05-24 14:44:40 -0400] Tensibai: Is there a way (easy way I mean) to get a local file checksum
[2012-05-24 14:45:04 -0400] gp5st: do it in ruby?
[2012-05-24 14:45:15 -0400] Tensibai: I would like to test a file checksum toward a databag content, but not a chef_file or remote_file, a real local file
[2012-05-24 14:45:31 -0400] Tensibai: ok the easiest is to used Digest::SHA256 right ?
[2012-05-24 14:45:58 -0400] gp5st: if you're doing sha256, otherwise it'd be kind of hard to use that;)
[2012-05-24 14:46:08 -0400] Tensibai: indeed ;p
[2012-05-24 14:47:30 -0400] yfeldblum: Tensibai, make sure to use streaming IO#read and streaming computation of the digest unless you're sure the files involved will be really small
[2012-05-24 14:47:32 -0400] gp5st: it's fairly easy to do in ruby. http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/90784 and a bunch more when you seatrch
[2012-05-24 14:47:46 -0400] gp5st: good call yfeldblum
[2012-05-24 14:47:58 -0400] yfeldblum: Digest::SHA256.digest(File.read("/path/to/file")) #=> Errno::ENOMEM pretty fast
[2012-05-24 14:49:21 -0400] Tensibai: awww
[2012-05-24 14:49:24 -0400] gp5st: last output line is: DEBUG: looks_like_ec2? == true when running chef-client. anyone know which plugin is run next? also, is it possible to tell ohai not to run and just use the last know config
[2012-05-24 14:50:13 -0400] Tensibai: files will be around 300MB
[2012-05-24 14:50:16 -0400] Tensibai: so not small
[2012-05-24 14:50:58 -0400] Tensibai: Is there a way to re-use what's done in chef for remote_files for exemple ?
[2012-05-24 14:51:52 -0400] Tensibai: I should read the code first ..
[2012-05-24 14:52:13 -0400] yfeldblum: Tensibai, you can do it in ruby for local files pretty easily using IO#read and Digest::SHA256, but you just need to be careful to use streaming, that's all
[2012-05-24 14:52:33 -0400] Tensibai: As I'm farily new to ruby : how ?
[2012-05-24 14:52:45 -0400] Tensibai: I quite see what you mean, but don't how to do :p
[2012-05-24 14:54:22 -0400] Tensibai: K found how to inside checksum_strage.rb
[2012-05-24 14:55:47 -0400] yfeldblum: Tensibai, yeah, chef does it right
[2012-05-24 14:56:35 -0400] yfeldblum: hmm it would be better if IO#read supported reading into a preexisting buffer, but oh well
[2012-05-24 14:57:16 -0400] Tensibai: So is it something wrong to use Chef::CheckSumCache.checksum_for_file(file) ?
[2012-05-24 14:58:06 -0400] matschaffer: anyone know of a cookbook that'll help set up a mysql master/slave pair? or even just a blog post on it?
[2012-05-24 14:58:24 -0400] Tensibai: better use cheksum_file function in fact
[2012-05-24 14:58:31 -0400] matschaffer: a post on doing it with chef, that is. I know mysql has docs on it :)
[2012-05-24 15:01:03 -0400] yfeldblum: Tensibai, it is wrong, because that implementation is not guaranteed to be stable, and your cookbook can easily break unexpectedly because opscode changed the internals of chef
[2012-05-24 15:02:01 -0400] yfeldblum: Tensibai, it is also wrong because you're trying to rely on the Chef::ChecksumCache *implementation*, and not the Chef::ChecksumCache *abstraction*
[2012-05-24 15:02:01 -0400] matschaffer: hoover_damm: btw, that override attribute thing we talked about a little while back didn't quite work out. I ended up just writing my deploy script in ruby so I could twiddle the environment definitions before/after the deploy.
[2012-05-24 15:02:23 -0400] yfeldblum: Tensibai, best bet is to copy the implementation into your own recipe
[2012-05-24 15:03:01 -0400] Tensibai: yfeldblum: true, but usually I try to avoid duplicating things :p
[2012-05-24 15:03:17 -0400] yfeldblum: Tensibai, gotcha, but, that's the wrong approach
[2012-05-24 15:03:29 -0400] hoover_damm: matschaffer, really? strange it worked out for me
[2012-05-24 15:03:38 -0400] hoover_damm: matschaffer, I was using that behavior in 0.8 and recently in 0.10
[2012-05-24 15:03:46 -0400] yfeldblum: Tensibai, perfectly fine to avoid duplicating abstractions; bad idea to avoid duplicating implementations
[2012-05-24 15:03:51 -0400] matschaffer: we're 0.6 here actually so maybe that's why
[2012-05-24 15:03:53 -0400] hoover_damm: matschaffer, oh wait
[2012-05-24 15:03:56 -0400] hoover_damm: 0.6?
[2012-05-24 15:03:56 -0400] matschaffer: gotta get upgraded
[2012-05-24 15:03:58 -0400] Tensibai: yfeldblum: true
[2012-05-24 15:04:01 -0400] matschaffer: 0.10.6
[2012-05-24 15:04:04 -0400] matschaffer: I think anyway
[2012-05-24 15:04:05 -0400] hoover_damm: oh
[2012-05-24 15:04:15 -0400] hoover_damm: lol only place I know that still runs 0.6 is EY
[2012-05-24 15:04:20 -0400] hoover_damm: 0.10.6 shouldn't matter
[2012-05-24 15:04:28 -0400] hoover_damm: matschaffer, the alternative option is you can set it to false in your recipe
[2012-05-24 15:04:52 -0400] hoover_damm: matschaffer, case node[:deploy] when "true" somecode node[:deploy]=false
[2012-05-24 15:04:56 -0400] hoover_damm: and then the node.save will catch it
[2012-05-24 15:05:02 -0400] hoover_damm: more lame then overrides
[2012-05-24 15:05:18 -0400] hoover_damm: but the original node.save shouldn't turn it to true unless the node completes, which this should set to false if it completes
[2012-05-24 15:05:33 -0400] atomic-penguin: yfeldblum, is there a way to make librarian use a different cookbook path, say the "librarian" folder
[2012-05-24 15:05:41 -0400] matschaffer: hoover_damm: it wasn't too bad just wrapping the deploy so I'll probably just leave it for now
[2012-05-24 15:06:38 -0400] yfeldblum: atomic-penguin, not yet - that's another thing waiting on remembered configuration (storing that config in .librarian/chef/config)
[2012-05-24 15:07:07 -0400] hoover_damm: @temp1=IO.popen("svn info --username foobar  --password foobar http://root@dev.adappsolutions.com/repos/affiliates/trunk | grep Revision | awk '{print $2}'")
[2012-05-24 15:07:15 -0400] hoover_damm: @temp2=@temp1.readline svn_revision_id=@temp2.chomp
[2012-05-24 15:07:17 -0400] hoover_damm: oh how not to do it
[2012-05-24 15:07:19 -0400] hoover_damm: LOL
[2012-05-24 15:07:40 -0400] hoover_damm: sorry that's just such a bad way to get a svn revision
[2012-05-24 15:08:30 -0400] yfeldblum: atomic-penguin, what's your use case?
[2012-05-24 15:09:16 -0400] atomic-penguin: yfeldblum, i've trained people to use the cookbooks case, and want to just manage cookbooks off of github in a separate directory
[2012-05-24 15:09:45 -0400] atomic-penguin: Like the workflow of using the cookbooks directory for community cookbooks
[2012-05-24 15:10:49 -0400] atomic-penguin: Cause really, I don't expect many folks at work to be pulling in cookbooks from github.
[2012-05-24 15:11:25 -0400] atomic-penguin: So I guess my concern is not to trample on the conditioning I've already instilled in others
[2012-05-24 15:12:52 -0400] yfeldblum: atomic-penguin, i don't think i'd make a way to install some cookbooks to one dir and others to another dir; librarian-chef considers your cookbooks/ dir (or configurable) to be a build artifact rather than a source tree
[2012-05-24 15:13:56 -0400] atomic-penguin: yfeldblum, if its configurable, then not really a problem.  That is what I was asking
[2012-05-24 15:14:05 -0400] yfeldblum: atomic-penguin, gotcha
[2012-05-24 15:14:11 -0400] yfeldblum: atomic-penguin, make an issue?
[2012-05-24 15:19:43 -0400] patcon: yfeldblum: hellow good sir, i don't suppose there's a config to use a dir like "vendor" instead of "tmp" in librarian?
[2012-05-24 15:20:34 -0400] yfeldblum: patcon, tmp/librarian is a work/cache/scratch directory, not a vendor directory by any means (so don't vendor it)
[2012-05-24 15:21:01 -0400] yfeldblum: patcon, what's your use case?
[2012-05-24 15:21:39 -0400] atomic-penguin: yfeldblum, so you are not tracking librarian managed cookbooks in git, whatsoever?
[2012-05-24 15:21:56 -0400] atomic-penguin: yfeldblum, within the context of the chef-repo?
[2012-05-24 15:22:06 -0400] patcon: sorry, I'm just trying to keep a project as uncluttered as possible. Right now, I'm putting all the "disposable" files (that a re gitignored) into tmp, but only because that's the only thing I have no control over
[2012-05-24 15:22:19 -0400] yfeldblum: atomic-penguin, if you want to track in git the cookbooks managed by librarian-chef, then add cookbooks/ to git
[2012-05-24 15:22:35 -0400] patcon: i suppose "tmp" isn't bad, but just wasn't sure if I had the option to rename :)
[2012-05-24 15:23:06 -0400] fish_: any idea why my ohai plugin only works when deployed to the 'offical plugin path'? (/var/lib/gems/1.8/gems/...)
[2012-05-24 15:23:31 -0400] yfeldblum: atomic-penguin, i mean, do what you like :P ... but that's librarian-chef's output directory (for the moment)
[2012-05-24 15:23:56 -0400] fish_: I'm using the ohai recipe, left the path untouched, added my plugin and it got deployed just fine. but chef-client and 'ohai -d /etc/chef/ohai_plugins' isn't executing it
[2012-05-24 15:24:52 -0400] yfeldblum: patcon, the issue is i need a cache/scratch/temp directory that's on the same fs/volume as the output directory
[2012-05-24 15:25:36 -0400] magoo: so I'm having librarian manage all of our unmodified cookbooks in ./cookbooks and then all of our custom or modified cookbooks are in site-cookbooks.
[2012-05-24 15:26:02 -0400] yfeldblum: patcon, it may be useful to make that configurable too, but that seems more vanity than pressing :P
[2012-05-24 15:26:08 -0400] magoo: seems like a good flow for us since ./cookbooks is in gitignore but the entire chef project is in git
[2012-05-24 15:26:30 -0400] magoo: you guys see any issues with this?
[2012-05-24 15:28:19 -0400] yfeldblum: magoo, fine by me; some people also like to add cookbooks/ to git just for their own sanity
[2012-05-24 15:28:25 -0400] yfeldblum: magoo, but it's important to note that if you use the knife integration, then `knife cookbook upload` will *not* look in cookbooks/ but will look where librarian-chef tells it to look, which is somewhere else, in order to help you enforce policy & isolation
[2012-05-24 15:29:19 -0400] yfeldblum: magoo, so long as you keep Cheffile.lock in git, though, you've got a record of the exact version of every cookbook from the community site so you can just go re-download that version later, and you've got an exact SHA of every cookbook from git, so you can just go re-clone those later too
[2012-05-24 15:29:23 -0400] magoo: ah, i never ran into this because we have a wrapper script that uploads everything and specifies the knife config to use
[2012-05-24 15:29:29 -0400] magoo: useful to know though
[2012-05-24 15:29:32 -0400] alex88: when i use the deploy resource multiple times using a git repo, it updates the code the second time it run?
[2012-05-24 15:29:50 -0400] yfeldblum: magoo, yeah, that's only if you use librarian-chef's optional knife integration
[2012-05-24 15:30:41 -0400] yfeldblum: magoo, but if you're automating cookbook-upload anyway, you're probably writing your own policy enforcement already
[2012-05-24 15:30:45 -0400] magoo: i see, the .lock file is just for speeding up the lookup, right? so i really should put the versions in Cheffile if I want to ensure that collaboration with others doesn't inadvertently upgrade recipes
[2012-05-24 15:30:50 -0400] magoo: ?
[2012-05-24 15:31:36 -0400] magoo: before I discovered librarian, every upstream cookbook we used was going in our git... this controlled versions but I didn't find it ideal
[2012-05-24 15:31:43 -0400] yfeldblum: magoo, the Cheffile.lock records the exact versions/SHAs of every cookbook found in the resolution process, so it's an important part of your git repo (so others don't inadvertently update cookbooks)
[2012-05-24 15:31:46 -0400] magoo: i'm in the midst of migration atm
[2012-05-24 15:32:12 -0400] magoo: how come the .lock file gets updated with subsequent runs
[2012-05-24 15:32:32 -0400] magoo: I was thinking it was more of a cache... I've been comitting it regardless but I wasn't sure of its purpose
[2012-05-24 15:33:14 -0400] yfeldblum: magoo, if you change the Cheffile and then run `librarian-chef install`, librarian-chef will detect the changes and do a minimal re-resolution and write a new Cheffile.lock
[2012-05-24 15:33:43 -0400] magoo: cool, this is better than I thought
[2012-05-24 15:33:44 -0400] magoo: :)
[2012-05-24 15:34:29 -0400] yfeldblum: magoo, if you do `librarian-chef update $NAME1 $NAME2 $NAME3`, librarian-chef will update those cookbooks (and possibly some necessary others) and write a new Cheffile.lock as well
[2012-05-24 15:34:36 -0400] specialsauce: ohai chefs! Is anyone aware of a bug in which "knife search" returns nodes but "Knife ssh" on the same query says no nodes are found?
[2012-05-24 15:34:37 -0400] specialsauce: 0.10.8
[2012-05-24 15:34:54 -0400] magoo: are you on ec2?
[2012-05-24 15:35:02 -0400] atomic-penguin: yfeldblum, won't knife look in whatever directory you tell it to, that has nothing to do with librarian-chef does it?
[2012-05-24 15:35:15 -0400] atomic-penguin: yfeldblum, re: comment to magoo above
[2012-05-24 15:35:35 -0400] yfeldblum: atomic-penguin, https://github.com/applicationsonline/librarian#knife-integration
[2012-05-24 15:36:34 -0400] yfeldblum: atomic-penguin, in this case, if you do that, you're telling knife to ask librarian-chef where to look for cookbooks
[2012-05-24 15:37:27 -0400] yfeldblum: atomic-penguin, the point is to help you enforce the policy that what exists in your Cheffile.lock = what exists in your chef-server-api
[2012-05-24 15:37:48 -0400] yfeldblum: atomic-penguin, if you opt in
[2012-05-24 15:45:05 -0400] magoo: yfeldblum: thanks!
[2012-05-24 15:49:56 -0400] Tensibai: hum to create a method inside a recipe, I should use ruby_block right ?
[2012-05-24 15:51:26 -0400] zeroXten: is it possible to access an attribute in new_resource using a variable? e.g. attribute_name = myattribute then new_resource[attribute_name] instead of new_resource.myattribute
[2012-05-24 15:51:41 -0400] alex88: i'm trying to use deploy to get code from a private repository, but i get this error "Chef::Exceptions::FileNotFound: Cannot symlink /var/www/site//shared/config/database.yml to /var/www/site//releases/20120524154153/config/database.yml before migrate" cannot i use a normal git clone on that folder?
[2012-05-24 15:52:42 -0400] Mydalon1: Hi, I would like to put all files that are in a certain place in the cookbook to a certain place on the node. Something like cookbook_file "/foobar/*" \n source "/foobar/*"
[2012-05-24 15:52:47 -0400] Mydalon1: Is that possible and how?
[2012-05-24 15:54:20 -0400] specialsauce: heh, i'm after that too Mydalon1, was about to post the same question
[2012-05-24 15:54:36 -0400] specialsauce: I think there is a resource type for this
[2012-05-24 15:55:00 -0400] magoo: how many files are we talking? you could probably enumerate them [ file1, file2, file3 ].each do |file| cookbook_file ... etc
[2012-05-24 15:55:12 -0400] specialsauce: in my case dozens or hundreds
[2012-05-24 15:55:18 -0400] magoo: oh god
[2012-05-24 15:55:30 -0400] magoo: good question then
[2012-05-24 15:55:34 -0400] specialsauce: yeah
[2012-05-24 15:56:10 -0400] matschaffer: is omnibus still supposed to be 0.10.8?
[2012-05-24 15:56:19 -0400] magoo: you could just write straight ruby to do that
[2012-05-24 15:56:20 -0400] zeroXten: iirc with puppet, it isn't very efficient to push lots/large files over using puppet.. perhaps worth finding a better way?
[2012-05-24 15:56:32 -0400] zeroXten: although, I hate those "try something else" answers myself :(
[2012-05-24 15:56:54 -0400] Mydalon1: Mhmm.. enumerating them is not so good - we have for example list of IP adresses for every country
[2012-05-24 15:57:15 -0400] specialsauce: i think this might work actually - http://wiki.opscode.com/display/chef/Resources#Resources-CookbookFile
[2012-05-24 15:57:17 -0400] Mydalon1: They should land in something like US.dat
[2012-05-24 15:57:24 -0400] specialsauce: "Cookbook File transfers files from the files/ directory of a cookbook to a specified path on the host running chef-client or solo."
[2012-05-24 15:57:26 -0400] jtimberman: Mydalon1: you can use remote_directory, and that will transfer all the files out of the cookbook's files/default/sourcedirname
[2012-05-24 15:57:37 -0400] Mydalon1: Ah, cool
[2012-05-24 15:57:41 -0400] Mydalon1: I missed that
[2012-05-24 15:57:44 -0400] Mydalon1: thank you!
[2012-05-24 15:57:46 -0400] specialsauce: jtimberman, that's deprecated
[2012-05-24 15:57:59 -0400] specialsauce: i think cookbookfile is now the correct way to go
[2012-05-24 15:58:01 -0400] jtimberman: no
[2012-05-24 15:58:05 -0400] specialsauce: really?
[2012-05-24 15:58:05 -0400] jtimberman: :)
[2012-05-24 15:58:08 -0400] jtimberman: really
[2012-05-24 15:58:23 -0400] hoover_damm: I think jtimberman's right
[2012-05-24 15:58:31 -0400] hoover_damm: ;)
[2012-05-24 15:58:38 -0400] Mydalon1: Given who he is, he probably is right ;-)
[2012-05-24 15:58:47 -0400] specialsauce: what is this trying to tell me then? "In Chef 0.8.x and earlier, Remote File is also used to fetch files from the files/ directory in a cookbook. This behavior is now provided by Cookbook File, and use of Remote File for this purpose is deprecated (though still valid) in Chef 0.9.0 and later."
[2012-05-24 15:58:50 -0400] jtimberman: specialsauce: you're thinking "remote_file" for files ina cookbook
[2012-05-24 15:58:59 -0400] jtimberman: that is not the same thing as remote_directory
[2012-05-24 15:59:05 -0400] specialsauce: ah ok cool
[2012-05-24 15:59:09 -0400] jtimberman: we just never made a "cookbook_directory" resource
[2012-05-24 15:59:17 -0400] Mydalon1: But I guess you could invent that ressource
[2012-05-24 15:59:19 -0400] jtimberman: which is semantically better.
[2012-05-24 15:59:25 -0400] jtimberman: you totally could :D
[2012-05-24 15:59:30 -0400] specialsauce: hehe
[2012-05-24 15:59:33 -0400] Mydalon1: ;-)
[2012-05-24 16:00:05 -0400] yfeldblum: jtimberman, high time for doing that ...
[2012-05-24 16:00:10 -0400] yfeldblum: jtimberman, before 1.0 ...
[2012-05-24 16:00:48 -0400] gp5st: is there anyway to tell chef not to run ohai and use the previous values?
[2012-05-24 16:01:02 -0400] jtimberman: gp5st: not for the automatic attributes from ohai
[2012-05-24 16:01:18 -0400] gp5st: :-\ it takes forever to run on windows
[2012-05-24 16:01:24 -0400] jtimberman: Ah.
[2012-05-24 16:01:27 -0400] magoo: so I was speaking with someone in here the other day regarding env_run_lists not working in roles and whomever I was speaking to said it was a bug and would be addressed soon. Anyone have a link for the bug so I can watch it?
[2012-05-24 16:01:30 -0400] jtimberman: Yeah. WMI all the things!
[2012-05-24 16:01:47 -0400] gp5st: i don't know what wmi is:-p
[2012-05-24 16:01:56 -0400] hoover_damm: gp5st, the whole point of ohai is to have to to date information of the instance
[2012-05-24 16:01:59 -0400] hoover_damm: so chef can configure it
[2012-05-24 16:02:07 -0400] jtimberman: zeroXten: when working with the new_resource object, the parameter "attributes" passed in via a recipe are methods on the new_resource, not accessed like a hash
[2012-05-24 16:02:09 -0400] hoover_damm: sadly a good thing to have, and yeah it can be slow
[2012-05-24 16:02:11 -0400] gp5st: it's a vm though, it won't change:-\
[2012-05-24 16:02:14 -0400] Mydalon1: We sometimes run in a problem where node search omits some nodes (that it previously found) - how would I start to debug such things (we have our own chef server)
[2012-05-24 16:02:24 -0400] jtimberman: are accessed like methods, they're accessor attributes.
[2012-05-24 16:02:31 -0400] zeroXten: jtimberman: that makes sense
[2012-05-24 16:02:50 -0400] gp5st: Mydalon1: someone once told me on here to bump up the index size i think it was in solr
[2012-05-24 16:02:58 -0400] zeroXten: does that mean I can work out how to dynamically call a method in ruby? ;)
[2012-05-24 16:03:39 -0400] Mydalon1: gp5st, Yes, I found that bug description, too - but bumping key size and rebuilding the index did not help
[2012-05-24 16:04:12 -0400] patcon: yfeldblum: by the way, thanks for the response! haha maybe not vanity, but folder clutter is definitely aesthetic :)
[2012-05-24 16:04:34 -0400] yfeldblum: patcon, no problem
[2012-05-24 16:06:04 -0400] yfeldblum: zeroXten, `method_name = :inspect ; my_object.public_send method_name`
[2012-05-24 16:06:17 -0400] sascha_d: gp5st I am the laziest person on earth and I have some work I'm doing to break down the ohai plugins in windows so you can disable the ones taking forever
[2012-05-24 16:06:27 -0400] sascha_d: I have it written but haven't tested it yet
[2012-05-24 16:07:52 -0400] zeroXten: yfeldblum: yeah,  new_resource.send(attribute.to_sym) seems to work
[2012-05-24 16:08:37 -0400] sascha_d: gp5st: http://tickets.opscode.com/browse/OHAI-357
[2012-05-24 16:09:42 -0400] yfeldblum: zeroXten, prefer public_send to send and no need to use to_sym if it's a string
[2012-05-24 16:09:47 -0400] alex88: is there a resource to change permissions?
[2012-05-24 16:12:51 -0400] yfeldblum: alex88, the file and directory resources
[2012-05-24 16:13:05 -0400] yfeldblum: or a ruby block with FileUtils.chmod[_R]
[2012-05-24 16:13:31 -0400] alex88: yfeldblum, also if folder already exist?
[2012-05-24 16:14:55 -0400] yfeldblum: alex88, yes; resources specify desired end states, and chef checks the system and looks at what is already at the desired end state and what needs to be updated, so if the directory already exists but the mode is wrong, chef will skip creating the directory and move right to changing the mode
[2012-05-24 16:15:07 -0400] yfeldblum: likewise for owner/group
[2012-05-24 16:15:31 -0400] gp5st: thanks sascha_d
[2012-05-24 16:15:41 -0400] alex88: yfeldblum, but i want to do it recursively, directory resource will change only the leaf owner/group
[2012-05-24 16:15:56 -0400] sascha_d: I'm in between projects so I'll try and wrap that up this/next week
[2012-05-24 16:17:21 -0400] yfeldblum: alex88, so in a ruby-block, do a recursive check for modes and if any modes need fixing, FileUtils.chmod_R
[2012-05-24 16:17:44 -0400] alex88: yfeldblum, thank you, i'll do that way ;)
[2012-05-24 16:18:18 -0400] yfeldblum: alex88, put the recursive check for any modes being wrong into the ruby-block resource's only_if
[2012-05-24 16:18:34 -0400] alex88: kk, ty!
[2012-05-24 16:24:12 -0400] monvillalon: Anyone now of an easy way to generate self signed ssl certificates with chef? Google seems no help
[2012-05-24 16:26:14 -0400] hoover_damm: monvillalon, https://github.com/opscode-cookbooks/chef-server/blob/master/recipes/nginx-proxy.rb#L38-L39 is the actual bruntwork
[2012-05-24 16:26:40 -0400] juliancdunn: got a weird problem with chef-client 0.10.10
[2012-05-24 16:26:46 -0400] monvillalon: hoover_damm: Thanks! :)
[2012-05-24 16:26:47 -0400] yfeldblum: monvillalon, `openssl` does it with a single command
[2012-05-24 16:26:50 -0400] juliancdunn: if I include "log_location "/var/log/chef/client.log"" I get:
[2012-05-24 16:26:57 -0400] juliancdunn: FATAL: Unknown error processing config file  with error undefined method `ConfigurationError' for Chef::Exceptions:Class
[2012-05-24 16:27:01 -0400] juliancdunn: any ideas? should I file a bug?
[2012-05-24 16:27:11 -0400] hoover_damm: monvillalon, if you just want to manage them... https://github.com/atomic-penguin/cookbook-certificate
[2012-05-24 16:27:24 -0400] hoover_damm: monvillalon, basically just upload a bunch of certs, and then use this cookbook to upload them and use them
[2012-05-24 16:27:57 -0400] monvillalon: hoover_damm: Thanks a lot :) it really helps, take care
[2012-05-24 16:28:20 -0400] gp5st: it's seriously taking ohai minutes to run:( i've disabled a ton of plugins, but it still takes forever
[2012-05-24 16:29:09 -0400] sascha_d: gp5st it's the plugins/windows/kernel plugin that contains the long running crud
[2012-05-24 16:29:37 -0400] sascha_d: it appears to pull in every last little bit of info ever discovered in device manager
[2012-05-24 16:29:47 -0400] gp5st: sascha_d: i read that bug submission, but the guy said it didn't change his run time
[2012-05-24 16:30:07 -0400] sascha_d: that was me - I think it depends on what kind of system you're running on
[2012-05-24 16:30:29 -0400] sascha_d: I've run it on my desktop windows and it's fairly zippy, but I've run it on a vmware vm and it dogged
[2012-05-24 16:30:37 -0400] gp5st: ahhh
[2012-05-24 16:30:39 -0400] gp5st: i see
[2012-05-24 16:30:49 -0400] sascha_d: just a guess though as I haven't compared the data it produced
[2012-05-24 16:30:56 -0400] hoover_damm: sascha_d, i bet you also have less drivers in your laptop
[2012-05-24 16:31:19 -0400] sascha_d: the reason I started working on it was the VMWare vm was on a client project and they were complaining at the enormous time it took to run
[2012-05-24 16:31:23 -0400] gp5st: i don't see a plugin that looks like what i'm looking for:-\
[2012-05-24 16:31:38 -0400] hoover_damm: unfortunately isn't the kernel plugin for windows
[2012-05-24 16:31:40 -0400] hoover_damm: the one that people hate?
[2012-05-24 16:31:43 -0400] gp5st: oh
[2012-05-24 16:31:52 -0400] sascha_d: so you can't just disable the entire windows/kernel plugin because it makes some useful info too
[2012-05-24 16:31:56 -0400] sivy: heyo
[2012-05-24 16:32:07 -0400] hoover_damm: that's unfortunate
[2012-05-24 16:32:17 -0400] sivy: if node_name is set in knife.rb, is there a way to get that from a recipe?
[2012-05-24 16:32:32 -0400] sascha_d: So what I did was bust out the pnp_drivers and the modules into another plugin that can be disabled in the configs
[2012-05-24 16:32:44 -0400] gp5st: is there anything i can comment out in the lkernel plugin
[2012-05-24 16:32:51 -0400] sascha_d: yes
[2012-05-24 16:33:05 -0400] sascha_d: let me look for the relevant lines and you can see if that helps
[2012-05-24 16:33:26 -0400] gp5st: thanks
[2012-05-24 16:33:34 -0400] gp5st: i'll try ot peek at the code as well
[2012-05-24 16:33:40 -0400] sascha_d: here's the file: https://github.com/opscode/ohai/blob/440b9e52da527773b68771c51756093619a0a101/lib/ohai/plugins/windows/kernel.rb
[2012-05-24 16:33:53 -0400] sascha_d: try commenting lines 60-77
[2012-05-24 16:34:14 -0400] jtimberman: sivy: the node_name in knife.rb is the API client or "user" that is authenticating wit hthe chef server to perform tasks like cookbook upload
[2012-05-24 16:34:36 -0400] sascha_d: and you can use the Measure-Command {ohai} to compare the time
[2012-05-24 16:34:37 -0400] jtimberman: sivy: node_name on a chef-client is the API client used by the node being configured by chef.
[2012-05-24 16:34:40 -0400] sivy: jtimberman: yes, I've got a recipe that needs the user's name and email and was hoping not to have to write another config
[2012-05-24 16:34:44 -0400] jtimberman: and it is available in a recipe as 'node.name'
[2012-05-24 16:34:52 -0400] jtimberman: oh
[2012-05-24 16:35:02 -0400] jtimberman: thats not available.
[2012-05-24 16:35:11 -0400] jtimberman: you could add users in a data bag item.
[2012-05-24 16:35:39 -0400] sivy: yeah, may have to. this is a basic vagrant vm setup recipe
[2012-05-24 16:35:48 -0400] jtimberman: if you're using open source chef server, the "node_name" used by knife is another API client, but the node's API client may not have permission to view other clients w/o admin
[2012-05-24 16:35:51 -0400] sivy: so, trying to get the current user's info
[2012-05-24 16:36:03 -0400] sivy: using hosted
[2012-05-24 16:37:33 -0400] sivy: jtimberman: is the 'cookbook_email' property in knife.rb available somewhere?
[2012-05-24 16:38:03 -0400] sivy: (janky usage, but it's for a dev vm so i'm cutting corners :) )
[2012-05-24 16:39:32 -0400] gp5st: here goes nothing :-p
[2012-05-24 16:46:46 -0400] gp5st: hmm, unless it didn't pick up my changes, i don't think that fixed it:( is it possible it's in the network plugin? it hangs there before showing a bunch of skipped/disabled plugins and then hitting the ohai plugin
[2012-05-24 16:49:03 -0400] gp5st: maybe it's not the network plugin
[2012-05-24 16:49:14 -0400] jodell: has anyone extended knife to support the solus vm api?
[2012-05-24 16:55:11 -0400] sascha_d: gp5st try running it with debug and see if it tells you any more.  See if the kernel/pnp_drivers section or kernel/modules is in the output.  That will tell you if it picked up your changes.
[2012-05-24 16:55:36 -0400] gp5st: i am running in debug
[2012-05-24 16:55:39 -0400] gp5st: i don't see either of this
[2012-05-24 16:55:40 -0400] gp5st: those
[2012-05-24 16:55:42 -0400] gp5st: http://pastebin.com/2M8EPLpz
[2012-05-24 16:55:48 -0400] gp5st: is the output up to where it pauses
[2012-05-24 16:56:18 -0400] gp5st: http://pastebin.com/Z7e0CtHM is the list of disabled plugins
[2012-05-24 16:58:05 -0400] alex88: using vagrant+chef solo it's not possible to search for other nodes right?
[2012-05-24 16:59:07 -0400] sascha_d: gp5st try running ohai at the command line and see what it does.  Pipe it through less or into a file and then grep for pnp_drivers
[2012-05-24 16:59:40 -0400] gp5st: http://pastebin.com/ZaAVCHfP is the output after the big pause
[2012-05-24 16:59:48 -0400] gp5st: sascha_d: will do
[2012-05-24 17:00:13 -0400] gp5st:  commented out those 11 lines
[2012-05-24 17:03:40 -0400] sascha_d: Ok, I've seen that looks_like_ec2 long pause before.  I'm not sure that's actually related to my ohai stuff.  I actually can't remember.  It's been a few months.
[2012-05-24 17:10:24 -0400] sascha_d: gp5st: I'm firing up a windows ec2 instanc
[2012-05-24 17:12:42 -0400] mikeg: I'm looking for a features matrix for chef comparing opensource, private, and hosted.  Can't find one on the website.  Does anyone know if one exists?
[2012-05-24 17:15:45 -0400] sascha_d: gp5st what's your ohai version?
[2012-05-24 17:16:14 -0400] sascha_d: I'm just going to bootstrap the default
[2012-05-24 17:18:51 -0400] chef_newb: I've got an error message I'm having trouble understanding
[2012-05-24 17:19:10 -0400] chef_newb: FATAL: Chef::Exceptions::Package: package[php53] (php::package line 35) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for php53
[2012-05-24 17:19:37 -0400] chef_newb: the offending line in php::package has
[2012-05-24 17:19:44 -0400] chef_newb: action :install
[2012-05-24 17:19:54 -0400] sascha_d: chef_newb it can't find your package in the repository.  yum info php53 or apt-get equivalent
[2012-05-24 17:20:12 -0400] chef_newb: aha
[2012-05-24 17:20:14 -0400] chef_newb: ok
[2012-05-24 17:20:26 -0400] chef_newb: thanks
[2012-05-24 17:20:42 -0400] chef_newb: I thought it was missing info in the recipe's metadata or something
[2012-05-24 17:21:58 -0400] chef_newb: here's what I get...
[2012-05-24 17:22:44 -0400] chef_newb: [vagrant@localhost ~]$ yum info php53
[2012-05-24 17:22:45 -0400] chef_newb: Loaded plugins: fastestmirror, presto
[2012-05-24 17:22:46 -0400] chef_newb: Determining fastest mirrors
[2012-05-24 17:22:48 -0400] chef_newb: epel/metalink                                                                    | 6.3 kB     00:00
[2012-05-24 17:22:49 -0400] chef_newb:  * base: mirror.ubiquityservers.com
[2012-05-24 17:22:51 -0400] chef_newb:  * epel: mirrors.servercentral.net
[2012-05-24 17:22:52 -0400] chef_newb:  * extras: mirror.sanctuaryhost.com
[2012-05-24 17:22:54 -0400] chef_newb:  * updates: mirror.sanctuaryhost.com
[2012-05-24 17:22:55 -0400] chef_newb: base                                                                             | 3.7 kB     00:00
[2012-05-24 17:22:57 -0400] chef_newb: base/primary_db                                                                  | 4.5 MB     00:02
[2012-05-24 17:22:58 -0400] chef_newb: epel                                                                             | 4.0 kB     00:00
[2012-05-24 17:23:00 -0400] chef_newb: http://mirrors.servercentral.net/fedora/epel/6/x86_64/repodata/repomd.xml: [Errno -1] repomd.xml does not match metalink for epel
[2012-05-24 17:23:01 -0400] chef_newb: Trying other mirror.
[2012-05-24 17:23:03 -0400] chef_newb: epel                                                                             | 4.0 kB     00:00
[2012-05-24 17:23:04 -0400] chef_newb: http://mirror.cogentco.com/pub/linux/epel/6/x86_64/repodata/repomd.xml: [Errno -1] repomd.xml does not match metalink for epel
[2012-05-24 17:23:06 -0400] chef_newb: Trying other mirror.
[2012-05-24 17:23:07 -0400] chef_newb: epel                                                                             | 4.0 kB     00:00
[2012-05-24 17:23:09 -0400] chef_newb: http://mirrors.rit.edu/epel/6/x86_64/repodata/repomd.xml: [Errno -1] repomd.xml does not match metalink for epel
[2012-05-24 17:23:10 -0400] chef_newb: Trying other mirror.
[2012-05-24 17:23:12 -0400] chef_newb: epel                                                                             | 4.0 kB     00:00
[2012-05-24 17:23:13 -0400] chef_newb: http://mirrors.dmacc.net/pub/epel/6/x86_64/repodata/repomd.xml: [Errno -1] repomd.xml does not match metalink for epel
[2012-05-24 17:23:15 -0400] chef_newb: Trying other mirror.
[2012-05-24 17:23:16 -0400] chef_newb: epel                                                                             | 4.0 kB     00:00
[2012-05-24 17:23:18 -0400] chef_newb: http://mirror.umd.edu/fedora/epel/6/x86_64/repodata/repomd.xml: [Errno -1] repomd.xml does not match metalink for epel
[2012-05-24 17:23:19 -0400] chef_newb: Trying other mirror.
[2012-05-24 17:23:21 -0400] chef_newb: epel                                                                             | 4.0 kB     00:00
[2012-05-24 17:23:22 -0400] chef_newb: epel/primary_db                                                                  | 4.4 MB     00:02
[2012-05-24 17:23:24 -0400] chef_newb: extras                                                                           | 3.5 kB     00:00
[2012-05-24 17:23:25 -0400] chef_newb: extras/primary_db                                                                | 6.3 kB     00:00
[2012-05-24 17:23:27 -0400] chef_newb: updates                                                                          | 3.5 kB     00:00
[2012-05-24 17:23:28 -0400] chef_newb: updates/primary_db                                                               | 3.5 MB     00:01
[2012-05-24 17:23:30 -0400] chef_newb: Error: No matching Packages to list
[2012-05-24 17:23:31 -0400] chef_newb: [vagrant@localhost ~]$
[2012-05-24 17:23:31 -0400] chef_newb: (SORRY: didn't realize that would come through as separate posts)
[2012-05-24 17:23:59 -0400] sascha_d: chef_newb gist.github.com is useful for that sort of thing
[2012-05-24 17:24:04 -0400] sascha_d: or pastebin
[2012-05-24 17:24:21 -0400] chef_newb: yes I see why people use gists for this now :/
[2012-05-24 17:24:45 -0400] simonjj: anyone know if there is a way to generate the first chef-user on a chef-server non-interactively.... I am trying "knife configure -i -s "http://localhost:4000" -k ~/.chef/webui.pem -c ~/.chef/knife.rb  -u chef-server-admin -r ~/chef-repo -y" but I keep getting an error about how there isn't a knife.rb
[2012-05-24 17:24:59 -0400] gp5st: sascha_d: 0.6.10
[2012-05-24 17:25:03 -0400] gp5st: chef version 0.10.8
[2012-05-24 17:25:43 -0400] sascha_d: gp5st my ohai raw time is 11.96 seconds
[2012-05-24 17:25:50 -0400] gp5st: o.O
[2012-05-24 17:25:58 -0400] gp5st: mine's easily in the 5 min range
[2012-05-24 17:26:10 -0400] sascha_d: what's your windows version?
[2012-05-24 17:26:10 -0400] chef_newb: sascha_d  am I to understand that I need to add another repo that contains php53?
[2012-05-24 17:26:36 -0400] sascha_d: chef_newb you need a repository that contains it if you don't have one already - whether that's a local repo or an internet repo
[2012-05-24 17:26:46 -0400] chef_newb: sascha_d or does it appear that this recipe was really only written for Debian/Ubuntu, even though it claims to support CentOS/RH/Fedora?
[2012-05-24 17:26:47 -0400] sascha_d: the package command only knows how to install, not where to find it
[2012-05-24 17:26:48 -0400] gp5st: simonjj: can you touch the knife.rb file? just so it exists?
[2012-05-24 17:27:03 -0400] sascha_d: chef_newb I'd have to look at it
[2012-05-24 17:27:04 -0400] gp5st: sascha_d: 2008 server
[2012-05-24 17:27:29 -0400] miah: moin
[2012-05-24 17:27:55 -0400] mattray: simonjj: does it work with an empty knife.rb?
[2012-05-24 17:27:59 -0400] sascha_d: gp5st can you run an ohai -l debug and paste bin it?
[2012-05-24 17:28:04 -0400] mattray: simonjj: if so, sounds like a bug
[2012-05-24 17:28:35 -0400] gp5st: sascha_d: i can, but it's the same as the earlier ones i posted
[2012-05-24 17:28:50 -0400] sascha_d: oh, hang on.
[2012-05-24 17:29:20 -0400] gp5st: sascha_d: those were from chef-client, but that was the section from ohai
[2012-05-24 17:29:37 -0400] miah: sup nerds?
[2012-05-24 17:29:46 -0400] simonjj: touching the file makes the message go away, but should it still come up with questions about the existing admin client if I use -y
[2012-05-24 17:29:49 -0400] simonjj: I assume no
[2012-05-24 17:30:18 -0400] gp5st: simonjj: can you care the config file non interactivly?
[2012-05-24 17:30:29 -0400] gp5st: i thought all those options told knife where to find the server &c not configure
[2012-05-24 17:30:40 -0400] gp5st: can you not just copy a pre-built file to the server?
[2012-05-24 17:31:00 -0400] simonjj: I can but how do I get the pem file
[2012-05-24 17:31:11 -0400] simonjj: I was going down the route of a template
[2012-05-24 17:31:18 -0400] simonjj: but I need a pem file for my new user
[2012-05-24 17:31:20 -0400] gp5st: doesn't chef automatically create it on the first run?
[2012-05-24 17:31:25 -0400] sascha_d: hi miah!
[2012-05-24 17:31:41 -0400] sascha_d: you just get up?
[2012-05-24 17:31:46 -0400] simonjj: yes, but not one you can actually use... the is the validator and webui
[2012-05-24 17:32:23 -0400] miah: yes
[2012-05-24 17:32:30 -0400] miah: well. i got up a while ago and washed dishes =0
[2012-05-24 17:32:30 -0400] simonjj: as I said I am using this: knife configure -s "http://localhost:4000" -k ~/.chef/webui.pem -c ~/.chef/knife.rb -i -u chef-server-admin -r ~/chef-repo -y
[2012-05-24 17:32:50 -0400] simonjj: which according to help should non-interactively create be a user
[2012-05-24 17:32:59 -0400] simonjj: *me
[2012-05-24 17:33:15 -0400] miah: webui.pem?
[2012-05-24 17:33:46 -0400] simonjj: it's the first admin user after creating a chef server
[2012-05-24 17:34:03 -0400] miah: oh right. for the webui... (i never use it)
[2012-05-24 17:34:19 -0400] gp5st: show off
[2012-05-24 17:34:23 -0400] miah: lol
[2012-05-24 17:34:25 -0400] miah: you don't need it
[2012-05-24 17:35:19 -0400] gp5st: you tell that to the people that are forcing me to admin windows boxes
[2012-05-24 17:35:43 -0400] gp5st: windows servers* (imho it isn't a "server" if it has a gui on it)
[2012-05-24 17:36:11 -0400] simonjj: even if I don't use the webui (which yes is of limited use), I still need to create a user for me to use somehow
[2012-05-24 17:36:44 -0400] simonjj: and while I can template a knife.rb I can't think of a way to get myself a pem file without executing knife
[2012-05-24 17:37:01 -0400] simonjj: I'd be happy to be taught otherwise
[2012-05-24 17:37:02 -0400] sascha_d: gp5st you will get more info via ohai -l debug on the command line
[2012-05-24 17:37:07 -0400] sascha_d: can you gist that?
[2012-05-24 17:37:09 -0400] mattray: simonjj: why are you trying to create an admin programatically?
[2012-05-24 17:37:31 -0400] gp5st: sascha_d: it doesn't seem like it. i'll paste it all though
[2012-05-24 17:37:45 -0400] simonjj: mattray: because I want to capture my chef-server creation end-to-end via a recipe
[2012-05-24 17:38:18 -0400] mattray: simonjj: this not work? https://github.com/opscode-cookbooks/chef-server
[2012-05-24 17:38:36 -0400] simonjj: I am using the std procedure descibed here: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2012-05-24 17:38:44 -0400] simonjj: yup got that
[2012-05-24 17:39:06 -0400] simonjj: mattray: but you notice how there is a series of steps that a manual towards the end
[2012-05-24 17:39:34 -0400] simonjj: I've further automated this to essentially have zero manual steps
[2012-05-24 17:40:37 -0400] simonjj: I am about to escalate and bust out expect
[2012-05-24 17:40:41 -0400] simonjj: which I'd hate to do
[2012-05-24 17:41:16 -0400] jtimberman: initial setup is mainly one time
[2012-05-24 17:41:34 -0400] gp5st: sascha_d: i'm having a hard time copying it for stupid reasons. it's very similar to the sections i pasted earlier. is there anything in particular you're looking for ?
[2012-05-24 17:41:37 -0400] jtimberman: like, its not often you'd have to do that again
[2012-05-24 17:41:53 -0400] jtimberman: even if you have to recover a broken system, you should have data backups w/ all that.
[2012-05-24 17:41:53 -0400] simonjj: jtimberman: come on now, that sounds so un-Chef like
[2012-05-24 17:41:56 -0400] sascha_d: gp5st my ohai -l debug commands measure 11.83 with the kernel drivers and then 9.98 with the kernel drivers commented
[2012-05-24 17:42:39 -0400] gp5st: i commented out those lines you showed me.i'm timing mine now. let me see, but it's def no where near 10sec
[2012-05-24 17:42:48 -0400] sascha_d: gp5st when you run chef-client, it mostly lists the plugins it's running, but when you run ohai at the cmd line, it lists all the ohai data as well
[2012-05-24 17:44:04 -0400] gp5st: you mean the final output?
[2012-05-24 17:44:11 -0400] gp5st: otherwise they look pretty similar
[2012-05-24 17:44:38 -0400] sascha_d: yeah, so that's how you can tell if the pnp_drivers are excluded when you comment them - by running ohai at the command line
[2012-05-24 17:45:41 -0400] gp5st: ok, it's running and i'm dumping it to a file
[2012-05-24 17:45:44 -0400] gp5st: give me a sec
[2012-05-24 17:45:52 -0400] gp5st: or a min:-\
[2012-05-24 17:47:37 -0400] sascha_d: gp5st what size is your instance?
[2012-05-24 17:48:39 -0400] gp5st: medium
[2012-05-24 17:48:41 -0400] gp5st: err
[2012-05-24 17:48:43 -0400] gp5st: small, sorry
[2012-05-24 17:48:54 -0400] gp5st: the cpu isn't showing any usage
[2012-05-24 17:49:11 -0400] gp5st: 6:27.98 total
[2012-05-24 17:51:09 -0400] sascha_d: ok
[2012-05-24 17:51:18 -0400] gp5st: output from ohai -l debug
[2012-05-24 17:51:18 -0400] sascha_d: I'm going to refire an inst with small
[2012-05-24 17:51:20 -0400] sascha_d: I use large
[2012-05-24 17:51:24 -0400] gp5st: http://pastebin.com/zKbyxTCX
[2012-05-24 17:54:59 -0400] leifmadsen: afternoon all!  This is likely a somewhat common question by my googling is not turning up what I'm looking for. I'm wondering if there is a good method for managing the databases and tables within that database with chef? For example, I have a simple table in a database hosted by mysql, and I want chef to make sure the table exists and contains the correct schema.
[2012-05-24 18:00:42 -0400] geekbri: leifmadsen: i think most people probably manage that with something simliar to rails active record or python sqlalcehmy
[2012-05-24 18:02:30 -0400] geekbri: that would be interesting to manage schema migrations with chef.
[2012-05-24 18:02:30 -0400] geekbri: hrm
[2012-05-24 18:02:44 -0400] leifmadsen: ya... I'm trying to think how I might do that...
[2012-05-24 18:03:08 -0400] leifmadsen: or even simple, like, "does this table exist yet?"
[2012-05-24 18:03:23 -0400] sascha_d: gp5st I get a more dramatic hang at your same spot when I switch to a small instance
[2012-05-24 18:03:30 -0400] leifmadsen: when I do the install I want the table to be put int (mysql < my.schema) but only do it if the table doesn't exist
[2012-05-24 18:03:39 -0400] leifmadsen: but I might be able to do that with the schema file itself
[2012-05-24 18:03:40 -0400] gp5st: sascha_d: i'm not crazy!
[2012-05-24 18:03:47 -0400] geekbri: leifmadsen: well couldn't you just have a bash block that runs the mysql client and does a describe on the database, then greps the output
[2012-05-24 18:04:20 -0400] leifmadsen: geekbri: yah that's kind of what I was thinking -- was hoping someone has something more elegant, but that might be the easiest thing at this point
[2012-05-24 18:04:26 -0400] sascha_d: and just like that I have the Suicidal Tendencies in my head
[2012-05-24 18:04:45 -0400] geekbri: leifmadsen: i probably wouldn't do things like that but...
[2012-05-24 18:04:48 -0400] geekbri: theres nothing to say you cant :)
[2012-05-24 18:04:52 -0400] leifmadsen: heh
[2012-05-24 18:05:13 -0400] leifmadsen: it's a simple 2 column table at this point, so level of effort needs to be justified :)
[2012-05-24 18:05:22 -0400] geekbri: I havent ever thought about handling schema migrations via a chef cookbook.  Thats something Id need to think about before I had an opinion on it :)
[2012-05-24 18:05:41 -0400] geekbri: leifmadsen: well if its just a quick fix for something thats not going to be big scale.....
[2012-05-24 18:06:07 -0400] leifmadsen: geekbri: it's just for vsftpd auth via mysql
[2012-05-24 18:07:18 -0400] leifmadsen: at some point I will ask for points in our scrum to find something elegant :)
[2012-05-24 18:12:11 -0400] sascha_d: gp5st so basically ohai run time doubles or more when moving to a smaller instance
[2012-05-24 18:12:15 -0400] sascha_d: but cpu is not the bottleneck
[2012-05-24 18:12:21 -0400] sascha_d: what else is smaller in a small instance?
[2012-05-24 18:12:57 -0400] Mithrandir: memory, I think?
[2012-05-24 18:13:06 -0400] Mithrandir: also,  instances are 64 bit too now, right?
[2012-05-24 18:13:24 -0400] gp5st: sascha_d: memory, but it's not maxed either.
[2012-05-24 18:13:34 -0400] sascha_d: yeah I watched resources when I ran it
[2012-05-24 18:13:39 -0400] gp5st: Mithrandir: yes, but this is a small (but also a 64 bit machine)
[2012-05-24 18:13:48 -0400] sascha_d: is it hanging on the call to AWS metadata?
[2012-05-24 18:14:07 -0400] gp5st: not sure. let me disable the ec2 plugin?
[2012-05-24 18:15:18 -0400] gp5st: how long did it take to run for you?
[2012-05-24 18:15:26 -0400] sascha_d: 25 seconds
[2012-05-24 18:15:30 -0400] gp5st: o.O
[2012-05-24 18:15:43 -0400] sascha_d: are you using a public ami?
[2012-05-24 18:16:00 -0400] gp5st: yes, the 2008 datacenter with iis already installed
[2012-05-24 18:16:05 -0400] gp5st: one of the amazon ones
[2012-05-24 18:16:09 -0400] sascha_d: I am using one I got from Seth that I've modified to have a password and all the winrm stuff set up
[2012-05-24 18:16:10 -0400] gp5st: huh
[2012-05-24 18:16:14 -0400] sascha_d: but it's not doing much
[2012-05-24 18:16:25 -0400] gp5st: yes, disabling the ec2 plugin makes this very snappy
[2012-05-24 18:16:50 -0400] sascha_d: OH
[2012-05-24 18:16:51 -0400] sascha_d: OH
[2012-05-24 18:16:55 -0400] sascha_d: I REMEMBER
[2012-05-24 18:16:59 -0400] gp5st: YOU DO?
[2012-05-24 18:17:01 -0400] gp5st: :)
[2012-05-24 18:17:14 -0400] sascha_d: I bet it can't connect to the metadata url
[2012-05-24 18:17:18 -0400] sascha_d: and it's timing out
[2012-05-24 18:17:25 -0400] Mithrandir: I'm sure she does because she's awesome
[2012-05-24 18:17:29 -0400] gp5st: a 6 min timeout?:-p
[2012-05-24 18:17:30 -0400] sascha_d: oh please
[2012-05-24 18:17:37 -0400] sascha_d: maybe it has 12 retries
[2012-05-24 18:17:44 -0400] gp5st: yeah, i'm just joking
[2012-05-24 18:17:47 -0400] Mithrandir: why is the timeout different for different instance sizes?
[2012-05-24 18:17:57 -0400] sascha_d: it's not
[2012-05-24 18:17:59 -0400] sascha_d: mine works fine
[2012-05-24 18:18:01 -0400] gp5st: thing is, it gets the ec2 data
[2012-05-24 18:18:12 -0400] sascha_d: my large runs ohai in 11 seconds and the small runs in 25 secs
[2012-05-24 18:18:25 -0400] gp5st: and my small in 6 min:(
[2012-05-24 18:18:29 -0400] Wohali: hey, thanks to anyone to helped me last night. turned out it WAS 2346 and increasing the index field length was exatcly the right fix.
[2012-05-24 18:18:34 -0400] sascha_d: but I actually saw that hang on the ec2 stuff and never had time to go back and troubleshoot it, but I don't have that problem any more
[2012-05-24 18:18:43 -0400] Wohali: :)
[2012-05-24 18:18:46 -0400] sascha_d: and I think it's possibly a connection issue
[2012-05-24 18:18:59 -0400] gp5st: hmm, interesting
[2012-05-24 18:19:27 -0400] gp5st: also, i need to figure out how to set the hostname and fqdn that ohai reports, but that's neither here nor there right now
[2012-05-24 18:19:56 -0400] sascha_d: http://169.254.169.254/latest/meta-data/
[2012-05-24 18:20:01 -0400] sascha_d: can you get there?
[2012-05-24 18:20:46 -0400] hoover_damm: gp5st, if your trying to force a node to have a specific name you should set node_name
[2012-05-24 18:21:05 -0400] hoover_damm: gp5st, this is in config.rb and the knife tool generally applies this if you use --node-name when you bootstrap
[2012-05-24 18:21:09 -0400] gp5st: i do, but the fqdn and hostname are AMZblhablahblah
[2012-05-24 18:21:15 -0400] gp5st: and knife doesnt like that
[2012-05-24 18:21:19 -0400] hoover_damm: set it
[2012-05-24 18:21:22 -0400] hoover_damm: node_name "somethingelse"
[2012-05-24 18:21:29 -0400] hoover_damm: and ohai will stop caring
[2012-05-24 18:21:35 -0400] gp5st: it is set
[2012-05-24 18:21:50 -0400] hoover_damm: can you paste the stacktrace of your error?
[2012-05-24 18:21:54 -0400] hoover_damm: because node_name should work
[2012-05-24 18:21:55 -0400] gp5st: yes, when i go to that url sascha_d it comes back quickly
[2012-05-24 18:21:56 -0400] jtimberman: leifmadsen: there's a "database" cookbook written by opscode that includes resources/providers for interacting with database systems: mysql, postgresql and sql server are currently supported
[2012-05-24 18:22:12 -0400] jtimberman: http://community.opscode.com/cookbooks/database
[2012-05-24 18:22:15 -0400] gp5st: hoover_damm: there is no error, knife will use the fqdn property to connect to a machine
[2012-05-24 18:22:28 -0400] hoover_damm: gp5st, that's because that is what is indexed
[2012-05-24 18:22:41 -0400] hoover_damm: gp5st, you can use the -a and then point it to an attribute that holds the proper value
[2012-05-24 18:22:55 -0400] leifmadsen: jtimberman: thanks I'll see if that gets me a bit closer
[2012-05-24 18:23:00 -0400] gp5st: ic
[2012-05-24 18:23:28 -0400] gp5st: sascha_d: yeah, i can get there. ie takes a few seconds to grab url, so i could see that adding up
[2012-05-24 18:25:18 -0400] Mithrandir: jtimberman: it feels like databases should be resources and providers rather than cookbooks, but it's not really a 100% fit.
[2012-05-24 18:25:24 -0400] Mithrandir: maybe LWRP is what that's for.
[2012-05-24 18:27:37 -0400] gp5st: oh wait, this test box is a micro...would they throttle metadata calls based on instance size?
[2012-05-24 18:27:45 -0400] jtimberman: Mithrandir: Yeah, LWRP for that. Though the resources/providers in the database cookbook aren't "lightweight"
[2012-05-24 18:28:13 -0400] Mithrandir: it's a bit like the deploy resource, it's not really a resource in the same way that, say, user is.
[2012-05-24 18:28:19 -0400] jtimberman: Mithrandir: the cookbooks for managing the database systems themselves need some updates too.
[2012-05-24 18:29:02 -0400] jtimberman: Mithrandir: Certainly. And the new "application" LWRPs we have coming are even more abstract.
[2012-05-24 18:29:37 -0400] Mithrandir: hmm
[2012-05-24 18:36:20 -0400] behemphi: I have a data bag that is make up of many json files that I keep in source control.  I want to upload them from file all at once (rather than individually)  is there some knife goodness or do I need to write a quick shell script?
[2012-05-24 18:36:40 -0400] KarlHungus: i get so many segfaults from mixin/command/unix.rb :(
[2012-05-24 18:36:54 -0400] erikh: knife data bag from file <data bag> <directory>
[2012-05-24 18:50:39 -0400] behemphi: thank you erikh.  when I do this, however, I get this error:  "FATAL: File must end in .js, .json, or .rb"
[2012-05-24 18:51:16 -0400] KarlHungus: rake databag:upload_all
[2012-05-24 18:52:06 -0400] behemphi: Thanks KarlHungus.  However if what erikh says works and I am being foolish, I have the wiki open to add it to the doc.  So I would like to get that square if possible.
[2012-05-24 18:52:27 -0400] KarlHungus: well, you didnt say what command you ran ;)
[2012-05-24 18:52:45 -0400] behemphi: ah well speaking of foolish
[2012-05-24 18:52:55 -0400] KarlHungus: but to answer your initial question, there is a rake task for that. the knife tool can also upload them individually
[2012-05-24 18:52:57 -0400] behemphi: knife databag from file <data bag> <direcgtory>
[2012-05-24 18:54:40 -0400] KarlHungus: http://wiki.opscode.com/display/chef/Managing+Data+Bags+With+Knife see specifically the "create or update data bag items from JSON" section
[2012-05-24 18:58:39 -0400] behemphi: Hmm, that is a bit less detailed than what can be found here:  http://wiki.opscode.com/display/chef/Data+Bags in the "Data Bag From File" section which is what I was adding too
[2012-05-24 18:58:42 -0400] behemphi: s/too/to
[2012-05-24 18:59:20 -0400] yfeldblum: the chef-server-api does not have a batch PUT operation for data bag items, so far as i'm aware
[2012-05-24 18:59:39 -0400] behemphi: Y, that seems to be the case
[2012-05-24 19:00:07 -0400] behemphi: so I can use the rake task.  I was just keen on the above suggestion b/c it would have been good to include inthe wiki
[2012-05-24 19:00:12 -0400] behemphi: thanks guys
[2012-05-24 19:00:16 -0400] jkeiser: behemphi: actually, I do have a knife command that can help :)
[2012-05-24 19:00:56 -0400] jkeiser: gem install knife-essentials, then knife upload data_bags, will troll through all your data bag files and upload any that aren't on the server
[2012-05-24 19:01:42 -0400] jkeiser: You can use knife upload --dry-run data_bags to find out what it will do without actually doing it
[2012-05-24 19:02:26 -0400] jkeiser: Or knife diff will tell you exactly what you would upload
[2012-05-24 19:02:45 -0400] behemphi: Of course!
[2012-05-24 19:03:18 -0400] behemphi: So would it be a good addition to the wiki to talk about installing that gem and then docing the functionality?
[2012-05-24 19:03:26 -0400] behemphi: Or is that outside the scope of the wiki?
[2012-05-24 19:04:06 -0400] jkeiser: behemphi: I'm hoping it will eventually be a part of knife.  It's a new gem though.
[2012-05-24 19:04:20 -0400] erikh: behemphi: you need to have the files named properly, e.g. item.json
[2012-05-24 19:05:16 -0400] behemphi: that I do erikh
[2012-05-24 19:05:32 -0400] behemphi: I have the dir data_bags/ssh_users
[2012-05-24 19:05:46 -0400] behemphi: with files frank.json, bill.json, etc
[2012-05-24 19:06:06 -0400] behemphi: from the data_bags directroy I tried:
[2012-05-24 19:06:19 -0400] behemphi: knife data bag from file ssh_user ssh_user
[2012-05-24 19:06:29 -0400] erikh: what directory are you in/
[2012-05-24 19:06:37 -0400] erikh: the data_bags directory?
[2012-05-24 19:06:39 -0400] behemphi: data_bags
[2012-05-24 19:06:50 -0400] erikh: hrm. not sure why that's not working for you; used it earlier today :)
[2012-05-24 19:07:02 -0400] erikh: (for a users cookbook no lesS)
[2012-05-24 19:10:25 -0400] jkeiser: behemphi: though if you want docs, https://github.com/jkeiser/knife-essentials/blob/master/README.rdoc is a good start.  knife upload and download work exactly the same (except in different directions)
[2012-05-24 19:10:47 -0400] behemphi: OK so it gets worse  installing knife-essentials give me a syntax error each time I try to run knife commands now
[2012-05-24 19:11:59 -0400] behemphi: git://gist.github.com/2783608.git
[2012-05-24 19:13:46 -0400] jkeiser: oh, looks like I may have a Ruby 1.8 bug.  gem uninstall knife-essentials and I'll get that up and running
[2012-05-24 19:14:18 -0400] jkeiser: Like I said, new gem :)  We've been using it for a month or so internally, but haven't had wide distribution yet
[2012-05-24 19:15:17 -0400] behemphi: jkeiser, do you need a bug report somewhere?
[2012-05-24 19:15:41 -0400] jkeiser: behemphi: sure,  https://github.com/jkeiser/knife-essentials/issues is where I've been tracking features and bugs
[2012-05-24 19:16:35 -0400] jkeiser: Thanks :)
[2012-05-24 19:17:23 -0400] behemphi: Sure, I will keep an eye out for the update!  https://github.com/jkeiser/knife-essentials/issues/57
[2012-05-24 19:17:36 -0400] behemphi: I am on a mac and not a rubyist (yet) thus the older version
[2012-05-24 19:18:18 -0400] jkeiser: I want it to work on 1.8 too :)
[2012-05-24 19:19:24 -0400] cap10morgan: If I want a service to restart when a template is created, is this the right subscribes line in the service block: subscribes :restart, "template[foo]" ?
[2012-05-24 19:22:08 -0400] mattray: cap10morgan: looks good
[2012-05-24 19:22:13 -0400] mattray: cap10morgan: http://wiki.opscode.com/display/chef/Resources#Resources-Notifications for more examples
[2012-05-24 19:22:48 -0400] cap10morgan: mattray: yeah, was looking at that, but there are subscribes examples in there
[2012-05-24 19:22:55 -0400] cap10morgan: thanks, though
[2012-05-24 19:23:00 -0400] cap10morgan: *are no
[2012-05-24 19:23:31 -0400] mattray: cap10morgan: there's 1 example for apache
[2012-05-24 19:23:45 -0400] mattray: just search on "subscribes"
[2012-05-24 19:23:58 -0400] mattray: and even better, it's a wiki so you can add more :0
[2012-05-24 19:24:20 -0400] cap10morgan: oh, for the old syntax. yeah, i wasn't even looking down there.
[2012-05-24 19:24:47 -0400] cap10morgan: probably time to edit that since 0.9 is nearly deprecated
[2012-05-24 19:31:39 -0400] hoover_damm: jkeiser, knife-essentials diff roles too?
[2012-05-24 19:31:50 -0400] hoover_damm: looks like it based off your README
[2012-05-24 19:32:42 -0400] cap10morgan: ok, cleaned that up and updated the examples: http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2012-05-24 19:33:20 -0400] jkeiser: hoover_damm: yeah
[2012-05-24 19:33:21 -0400] hoover_damm: jkeiser, do remember ruby 1.8 is end of life soon
[2012-05-24 19:33:24 -0400] jkeiser: It works with everything
[2012-05-24 19:33:47 -0400] hoover_damm: june 2013 but
[2012-05-24 19:33:49 -0400] jkeiser: In fact, if you type "knife diff" at the root of your repository, it will give you a full diff
[2012-05-24 19:33:50 -0400] hoover_damm: still
[2012-05-24 19:33:59 -0400] hoover_damm: jkeiser, neat...
[2012-05-24 19:34:12 -0400] hoover_damm: jkeiser, i've been needing that as a coworker doesn't review environments always before he uploads
[2012-05-24 19:34:16 -0400] jkeiser: knife upload and knife download at the root will do what you would expect, as well
[2012-05-24 19:34:21 -0400] hoover_damm: this will give us a easy pattern to adopt on uploading
[2012-05-24 19:34:28 -0400] hoover_damm: to ensure what is expected, works
[2012-05-24 19:34:47 -0400] jkeiser: You can also say knife upload --dry-run at the root, and it will tell you what actions it would take (it only uploads things that change)
[2012-05-24 19:35:07 -0400] jkeiser: hoover_damm: re 1.8, sure.  I just want as many people as possible to be able to use it in the interim :)
[2012-05-24 19:35:52 -0400] hoover_damm: jkeiser, oh i know.  There will be people on 1.8 for eons
[2012-05-24 19:39:26 -0400] monvillalon: Im getting an Invalid Timing Error when running chef, I think I somehow did something the del doesn't like, what would be the correct way of iterating over an array and doing something
[2012-05-24 19:40:37 -0400] monvillalon: Here is basically what I'm doing, somehow using each, trips up chef. http://pastebin.com/L3jstZq2
[2012-05-24 19:46:12 -0400] knuckolls: jtimberman: I created a ticket for that rabbitmq cookbook problem i had the other day. It's marked as resolved and the pull request was sent. http://tickets.opscode.com/browse/COOK-1317
[2012-05-24 19:46:46 -0400] knuckolls: I think i followed the process correctly, but let me know if you'd like me to do it any differently in the future.
[2012-05-24 19:48:02 -0400] ptrb: In my recipe, I want to defined some resources only if a specific node attribute is both set and != "". What's the correct way to define that check?
[2012-05-24 19:48:32 -0400] jkeiser: One thing about 1.8, the json diff will likely be ugly (it will be accurate, but the text output will be ugly) because hashes don't retain sorted order
[2012-05-24 19:48:45 -0400] ptrb: if node.attribute?("foo.bar.baz") and node[:foo][:bar][:baz] != "" # seems to pass when it should fail
[2012-05-24 19:49:02 -0400] mattray: ptrb: http://wiki.opscode.com/display/chef/Resources#Resources-ConditionalExecution
[2012-05-24 19:50:18 -0400] ptrb: mattray: Thanks. So those are the directives -- but what is the conditional expression?
[2012-05-24 19:50:42 -0400] mattray: ptrb: gotcha
[2012-05-24 19:51:21 -0400] ptrb: Cool! Awesome. Thanks.
[2012-05-24 19:51:29 -0400] mattray: ptrb: have you tested them individually to see which is wrong?
[2012-05-24 19:51:32 -0400] ptrb: And pre-follow-up: can I wrap an include_recipe in the same conditional?
[2012-05-24 19:51:46 -0400] mattray: ptrb: yes
[2012-05-24 19:52:17 -0400] mattray: ptrb: example of that: https://github.com/mattray/annoyances-cookbook/blob/master/recipes/default.rb#L20
[2012-05-24 19:53:24 -0400] ptrb: mattray: OK, but that's just flat Ruby conditionals. I want to marry the include_recipe with a new resource definition under the same conditional. So I guess I'm back to not using the only_if directive?
[2012-05-24 19:53:26 -0400] mattray: ptrb: my gut tells me node[:foo][:bar][:baz] != "" is incorrect
[2012-05-24 19:53:56 -0400] mattray: ptrb: you just want to pick a different resource depending on a conditional right?
[2012-05-24 19:54:26 -0400] ptrb: mattray: I want to include_recipe X and define resources Y and Z depending on if two (nested) attributes are set and non-empty-string on the node.
[2012-05-24 19:55:12 -0400] mattray: right. Put the test at the top with "if A and B" and put the include and resources Y and Z in there
[2012-05-24 19:55:24 -0400] mattray: load it up in shef
[2012-05-24 19:55:30 -0400] ptrb: that's exactly what I have, and it's passing incorrectly.
[2012-05-24 19:55:47 -0400] ptrb: Aha. Shef. Neat.
[2012-05-24 19:56:05 -0400] mattray: test the 2 conditionals, one of them is wrong
[2012-05-24 19:56:22 -0400] mattray: as in, it's letting nils in
[2012-05-24 19:56:32 -0400] mattray: which is what != "" will probably do
[2012-05-24 19:57:25 -0400] mattray: since nil != ""
[2012-05-24 19:58:45 -0400] ptrb: mattray: groovy. thanks for the tips.
[2012-05-24 19:58:57 -0400] mattray: node[:foo][:bar][:baz].nil?
[2012-05-24 19:59:12 -0400] mattray: as opposed to .empty?
[2012-05-24 19:59:16 -0400] ptrb: well, that will fail in chef-client if node[:foo] is undefined
[2012-05-24 19:59:27 -0400] mattray: right, the first check should gate that
[2012-05-24 19:59:29 -0400] mattray: and fail fast
[2012-05-24 19:59:37 -0400] jtimberman: node.attribute?("foo")
[2012-05-24 19:59:46 -0400] jtimberman: if thats nil, then it will fail
[2012-05-24 20:00:01 -0400] mattray: jtimberman: does node.attribute?("foo.bar.blah") work?
[2012-05-24 20:00:02 -0400] ptrb: so I think: node.attribute?("foo.bar.baz") and node[:foo][:bar][:baz] != "" # *ought* to be OK; I'll try it once more
[2012-05-24 20:00:35 -0400] mattray: ptrb: node[:foo][:bar][:baz] != "" will let in nil values
[2012-05-24 20:00:51 -0400] ptrb: yes but the attribute? before it should stop them from getting there
[2012-05-24 20:01:01 -0400] mattray: yeah, you're right
[2012-05-24 20:01:09 -0400] ptrb: god I hate ruby :)
[2012-05-24 20:01:11 -0400] mattray: assuming attribute? is smart enough to handle dots
[2012-05-24 20:01:20 -0400] mattray: I'm curious to know
[2012-05-24 20:01:27 -0400] mattray: and too lazy to go test myself
[2012-05-24 20:01:42 -0400] ptrb: ;)
[2012-05-24 20:01:48 -0400] yfeldblum: zomg its a Hash (kinda), just deal with it like a Hash ...
[2012-05-24 20:02:46 -0400] yfeldblum: node.has_key?("foo") && node["foo"].has_key?("bar") && node["foo"]["bar"].has_key?("baz")
[2012-05-24 20:04:37 -0400] ptrb: attribute? appears to handle dots. at least, it's failing the conditional. now I gotta test if it will pass :)
[2012-05-24 20:04:52 -0400] mattray: https://gist.github.com/2783896
[2012-05-24 20:04:59 -0400] mattray: attribute? doesn't handle dots
[2012-05-24 20:06:06 -0400] mattray: yfeldblum: we were trying to be lazy and not chain a bunch of conditionals
[2012-05-24 20:06:44 -0400] yfeldblum: mattray, i definitely understand the motivation, but this needs to be done in a ruby way because chef is ruby ...
[2012-05-24 20:06:54 -0400] mattray: oh sure
[2012-05-24 20:08:08 -0400] yfeldblum: mattray, `["foo", "bar", "baz"].inject(node){|n, k| n && n[k]}` would work if Chef::Node::Attribute were sane
[2012-05-24 20:08:30 -0400] yfeldblum: mattray, but `["foo", "bar", "baz"].inject(node.to_hash){|n, k| n && n[k]}` should work
[2012-05-24 20:12:26 -0400] yfeldblum: the only problem with the latter is that every time you need to do it, the node instance needs to build a new giant nested hash for you, but it's what works
[2012-05-24 20:31:49 -0400] jeffg: scary
[2012-05-24 20:32:03 -0400] therawr: haha
[2012-05-24 20:32:56 -0400] jeffg: is there a way, using the server api, to learn the last time a node checked in?
[2012-05-24 20:33:08 -0400] therawr: like knife status?
[2012-05-24 20:33:28 -0400] jeffg: that sounds promisingish
[2012-05-24 20:37:12 -0400] jeffg: ah, guess that's referring to node.ohai_time
[2012-05-24 20:38:14 -0400] jtimberman: jeffg: that is exactly what its refering to
[2012-05-24 20:38:44 -0400] jtimberman: jeffg: ohai_time is the unix epoch when the node loaded ohai during the chef-client run
[2012-05-24 20:38:48 -0400] jtimberman: and successfully saved
[2012-05-24 20:40:04 -0400] jeffg: jtimberman, nod.  i'm totally feeling my way here, trying to make good on my threat to mattray of making a chef integration for opennms :)
[2012-05-24 20:40:48 -0400] mattray: jeffg: 'bout time ;)
[2012-05-24 20:41:19 -0400] mattray: jeffg: lots of other monitoring cookbooks as examples.
[2012-05-24 20:41:22 -0400] simonjj: what do you guys usually do when it comes to automatically setting up Amazon networking
[2012-05-24 20:41:25 -0400] jeffg: mattray, it'd be done already if you hadn't picked a week when i was in england to come hang out with schisamo ;)
[2012-05-24 20:41:28 -0400] simonjj: I know there is API's and stuff
[2012-05-24 20:41:46 -0400] mattray: simonjj: Amazon networking?
[2012-05-24 20:41:58 -0400] simonjj: but is there another method other than going to write a whole lot of API scripts
[2012-05-24 20:42:09 -0400] simonjj: setting up security zones, etc.
[2012-05-24 20:42:49 -0400] simonjj: basically Amazon specific SDN
[2012-05-24 20:43:08 -0400] mattray: simonjj: there's https://github.com/opscode-cookbooks/aws
[2012-05-24 20:43:20 -0400] mattray: jeffg: feel free to ping me with any questions
[2012-05-24 20:44:20 -0400] simonjj: mattray: cool that looks good, I'll have a look
[2012-05-24 20:44:24 -0400] simonjj: thanks
[2012-05-24 20:44:27 -0400] jeffg: mattray, you may regret that statement!
[2012-05-24 20:44:35 -0400] jeffg: and thanks :)
[2012-05-24 20:46:09 -0400] mattray: my pleasure.
[2012-05-24 20:46:55 -0400] makerbreaker: how would you guys manage code deployment to the servers running chef-client, with the caveat that you only have 443 to work with?
[2012-05-24 20:47:05 -0400] makerbreaker: and cant interact with the machine through SSH
[2012-05-24 20:47:52 -0400] makerbreaker: I was thinking of doing having of triggering a git clone, when new code has been found w/ chef?
[2012-05-24 20:48:03 -0400] mattray: makerbreaker: run the chef-client daemonized
[2012-05-24 20:48:08 -0400] makerbreaker: that is done
[2012-05-24 20:48:12 -0400] mattray: so it pulls frequently
[2012-05-24 20:48:25 -0400] makerbreaker: i have it checking in every hour or so; but now whats the best way?
[2012-05-24 20:48:40 -0400] mattray: for deploying code?
[2012-05-24 20:49:16 -0400] makerbreaker: well, the best way for chef to interact with what I use to deploy the code (capistrano or whatever)
[2012-05-24 20:49:41 -0400] makerbreaker: im guessing the capistrano cookbook is where I should start loking?
[2012-05-24 20:50:02 -0400] mattray: http://wiki.opscode.com/display/chef/Deploy+Resource perhaps?
[2012-05-24 20:50:22 -0400] makerbreaker: ah nice thanks
[2012-05-24 20:50:22 -0400] yfeldblum: is something already listening on 443? if not, you can have sshd listen on 443
[2012-05-24 20:50:38 -0400] makerbreaker: yfeldblub, yes, I have nginx routing a bunch of stuff
[2012-05-24 20:50:47 -0400] KarlHungus: i would have chef set up a vpn ;)
[2012-05-24 20:50:49 -0400] makerbreaker: chef-webui, chef-api, an xml feed etc
[2012-05-24 20:51:15 -0400] makerbreaker: I cant do a VPN there are like 800 servers in varied enviroments that I have no control over ;(
[2012-05-24 20:51:55 -0400] KarlHungus: so give them a cert and run openvpn in a point to multipoint config with a /22 pool?
[2012-05-24 20:52:24 -0400] makerbreaker: im locked in to what I have
[2012-05-24 20:52:31 -0400] KarlHungus: seems easier than hacking around the existing limitations
[2012-05-24 20:52:44 -0400] makerbreaker: i dont have a choice around existing limitations
[2012-05-24 20:52:58 -0400] makerbreaker: the server can only talk to one domain, over port 443
[2012-05-24 20:52:58 -0400] resno: where are the best docs to learn chef? ive been jumping into puppet and i want to try out chef before i go to far
[2012-05-24 20:53:02 -0400] KarlHungus: i have hundreds of unix appliances distributed in industrial environments all over the country in networks i have no control over as well
[2012-05-24 20:54:14 -0400] KarlHungus: they immediately punch out to my head end and establish a VPN (on ports 53, 80, 443 or 1194). its been a good strategy for us, but i understand your needs could be very different
[2012-05-24 20:54:28 -0400] mikeg: I'm looking for a features matrix for chef comparing opensource, private, and hosted.  Can't find one on the website.  Does anyone know if one exists?
[2012-05-24 20:57:50 -0400] resno: anybody around?
[2012-05-24 20:58:11 -0400] mattray: resno: http://wiki.opscode.com/display/chef/Home
[2012-05-24 20:58:48 -0400] resno: mattray: the docs are good?
[2012-05-24 20:59:34 -0400] mattray: I'm a fan.
[2012-05-24 20:59:56 -0400] mattray: and I found out today we have a new technical writer
[2012-05-24 21:01:11 -0400] resno: mattray: looking at the docs, seem i get direct to the hosted solution...
[2012-05-24 21:01:47 -0400] mattray: resno: that's because it's free for 5 nodes to encourage you to spend time learning how to use Chef rather than how to install a Chef Server (which is a beast)
[2012-05-24 21:01:47 -0400] resno: mattray: and support only to ubuntu 9.10?
[2012-05-24 21:01:59 -0400] mattray: resno: where's that? that's really wrong
[2012-05-24 21:02:19 -0400] resno: mattray: oh, sorry. i blocked it with my terminal window :(
[2012-05-24 21:02:55 -0400] mattray: resno: most operating systems are supported
[2012-05-24 21:03:10 -0400] resno: mattray: is it easy tostart withthe hosted and move off it?
[2012-05-24 21:03:11 -0400] paulmooring: resno: keep in mind that chef-client isn't crippled on the OSS so work you do writing cookbooks for Hosted Chef can be transferred later if you want
[2012-05-24 21:03:20 -0400] resno: :-)
[2012-05-24 21:03:55 -0400] mattray: resno: absolutely. APIs are the same and there are docs for moving back and forth
[2012-05-24 21:04:07 -0400] resno: ok, cool.
[2012-05-24 21:04:24 -0400] resno: thats enough for me to stop puppet roll out and try chef
[2012-05-24 21:06:12 -0400] lledet: Hi, I would like to manage the files in /etc/skel with chef, is there a cookbook specifically for this?
[2012-05-24 21:06:24 -0400] lledet: or is there another way to manage random files in /etc?
[2012-05-24 21:10:35 -0400] miah: pretty much all cookbooks do this
[2012-05-24 21:10:41 -0400] miah: use the cookbook_file or template resources
[2012-05-24 21:10:47 -0400] paulmooring: lledet: I don't see anything out there for that already, but you can manage files with template and cookbook_file resources
[2012-05-24 21:11:40 -0400] lledet: thanks
[2012-05-24 21:16:45 -0400] dyer: Hey guys, question about using knife ec2 w/ Chef 10.10..  If I want to try using the omnibus installer do I need to pass in a --distro or --template flag still ?
[2012-05-24 21:17:55 -0400] dyer: We use centOS so I had been using both before ( --distro centos5-gems --template-file ~/.chef/bootstrap/chef-full.erb  )
[2012-05-24 21:18:08 -0400] jtimberman: by beast, mattray means that the Open Source Chef Server is a scalable distributed application, with several moving parts that you may not be familiar with and will spend more time dealing with than actually just using the tool :)
[2012-05-24 21:18:23 -0400] hoover_damm: dyer, I do --distro ubuntu11.10-omnibus
[2012-05-24 21:18:26 -0400] yfeldblum: dyer, the chef-full template is the default template in 0.10.10
[2012-05-24 21:18:31 -0400] jtimberman: dyer: chef 0.10.10 default bootstrap template is chef-full
[2012-05-24 21:18:38 -0400] jtimberman: yfeldblum: jinx!
[2012-05-24 21:18:43 -0400] yfeldblum: heh
[2012-05-24 21:18:45 -0400] hoover_damm: dyer, the --distro and --template file are overwriting each other too
[2012-05-24 21:18:45 -0400] hoover_damm: no?
[2012-05-24 21:18:54 -0400] jtimberman: --template-file wins
[2012-05-24 21:18:58 -0400] josephholsten: is the chef-full actually fixed to install 0.10.10 now?
[2012-05-24 21:18:58 -0400] jtimberman: iirc
[2012-05-24 21:19:01 -0400] dyer: ok, so then I should not need to pass in anything if I want to use chef-full
[2012-05-24 21:19:07 -0400] hoover_damm: right
[2012-05-24 21:19:11 -0400] yfeldblum: also omnibus is a build-n-bundle system, not an installer; chef-full is the installer
[2012-05-24 21:19:16 -0400] hoover_damm: is chef-full 1.9.3-p194?
[2012-05-24 21:19:20 -0400] dyer: k, just making sure :)
[2012-05-24 21:19:24 -0400] hoover_damm: or is it that old pukey 1.9.2 crap still?
[2012-05-24 21:19:33 -0400] dyer: ok here we go  ( testing )
[2012-05-24 21:19:34 -0400] jtimberman: josephholsten: the install.sh script is pointing at 0.10.8 still
[2012-05-24 21:19:45 -0400] jtimberman: hoover_damm: better 1.9.2 than 1.8.7 (distro defaults)
[2012-05-24 21:19:48 -0400] jtimberman: :P
[2012-05-24 21:19:56 -0400] dyer: I am also testing a fix to implement --json-attributes in knife-ec2
[2012-05-24 21:19:57 -0400] yfeldblum: hoover_damm, i hear that chef-full is already at ruby-2.1
[2012-05-24 21:20:05 -0400] dyer: I'll send a pull request if this actually works
[2012-05-24 21:20:07 -0400] josephholsten: jtimberman: just saw. it's strange that 0.10.10 defaults to installing 0.10.8-3
[2012-05-24 21:20:07 -0400] jtimberman: yfeldblum: we don't use archlinux
[2012-05-24 21:20:07 -0400] hoover_damm: then i really have nothing to say to Opscode
[2012-05-24 21:20:14 -0400] jtimberman: josephholsten: understand
[2012-05-24 21:20:18 -0400] Aaton: so I see remote_file is being depreciated is cookbook_file going to have attributes for checksums or overwrite ?
[2012-05-24 21:20:19 -0400] hoover_damm: you closed my 1.9.3 pull request because you were changing omnibus to a ruby build system
[2012-05-24 21:20:25 -0400] hoover_damm: you release 0.10.10 without 1.9.3
[2012-05-24 21:20:31 -0400] jtimberman: josephholsten: but, we also are in the middle of switching the omnibus build system over to a new framework
[2012-05-24 21:20:44 -0400] jtimberman: i didn't close anything sir
[2012-05-24 21:20:48 -0400] hoover_damm: btm did
[2012-05-24 21:20:53 -0400] hoover_damm: thus opscode did
[2012-05-24 21:21:01 -0400] hoover_damm: and as you work for opscode
[2012-05-24 21:21:03 -0400] hoover_damm: yes you did
[2012-05-24 21:21:06 -0400] jtimberman: ok
[2012-05-24 21:21:12 -0400] jtimberman: i'm not going to argue about that.
[2012-05-24 21:21:15 -0400] jtimberman: as its moot.
[2012-05-24 21:21:15 -0400] hoover_damm: shame on opscode
[2012-05-24 21:21:44 -0400] jtimberman: can we move on?
[2012-05-24 21:21:52 -0400] jtimberman: we'll ship 1.9.3 when we've adequately tested it.
[2012-05-24 21:21:59 -0400] jtimberman: topic doneburger
[2012-05-24 21:22:05 -0400] yfeldblum: does it really matter? i mean aside from any cookbooks you've got using IO::NULL and therefore depending on running in ruby-1.9.3?
[2012-05-24 21:22:18 -0400] hoover_damm: jtimberman, then you shouldn't have closed the pull request
[2012-05-24 21:22:27 -0400] holoway: hoover_damm: same on us?
[2012-05-24 21:22:28 -0400] hoover_damm: you should have then asked for testing and then tested it
[2012-05-24 21:22:29 -0400] holoway: er shame?
[2012-05-24 21:22:31 -0400] hoover_damm: I know I tested it
[2012-05-24 21:22:32 -0400] hoover_damm: fully
[2012-05-24 21:22:38 -0400] hoover_damm: with rubyspec
[2012-05-24 21:22:41 -0400] hoover_damm: so yes shame on you holoway
[2012-05-24 21:22:58 -0400] holoway: seriously?
[2012-05-24 21:23:03 -0400] holoway: how long have you been in this room?
[2012-05-24 21:23:09 -0400] holoway: do you honestly believe that it's some kind of vendetta?
[2012-05-24 21:23:19 -0400] holoway: or that anyone did anything other than what they thought was the right thing?
[2012-05-24 21:23:25 -0400] josephholsten: hoover_damm: you're coming across a little more passionately than I think you actually are
[2012-05-24 21:23:27 -0400] hoover_damm: http://tickets.opscode.com/browse/CHEF-2871
[2012-05-24 21:23:28 -0400] holoway: it's not some kind of crazy ass conspiracy to kep you from a nice ruby
[2012-05-24 21:23:38 -0400] holoway: so re-open the fucking ticket
[2012-05-24 21:23:57 -0400] holoway: but I'll be god-damned if anyone who spends their days working on chef, including you, feels shame about it
[2012-05-24 21:24:02 -0400] hoover_damm: don't close requests and be shitty about it
[2012-05-24 21:24:06 -0400] hoover_damm: and then try and defend your behavior
[2012-05-24 21:24:43 -0400] hoover_damm: someone wanted 1.9.3, a client wanted 1.9.3  I spent my time to update omnibus and update it, test it, then I pushed it upstream.
[2012-05-24 21:25:00 -0400] hoover_damm: http://tickets.opscode.com/browse/CHEF-2871
[2012-05-24 21:25:10 -0400] hoover_damm: 3 months ago you said you were changing build systems
[2012-05-24 21:25:27 -0400] hoover_damm: https://github.com/opscode/omnibus/pull/5
[2012-05-24 21:25:31 -0400] holoway: right - and as of weeks ago, we are
[2012-05-24 21:25:46 -0400] hoover_damm: as of that pull it was 3 months ago
[2012-05-24 21:25:46 -0400] holoway: nobody is saying you can't have 1.9.3
[2012-05-24 21:25:48 -0400] hoover_damm: so someone is lying
[2012-05-24 21:25:53 -0400] holoway: fuck you, nobody is lying
[2012-05-24 21:25:58 -0400] jtimberman: no one is lying
[2012-05-24 21:26:02 -0400] holoway: honestly
[2012-05-24 21:26:04 -0400] Mithrandir: calm down.
[2012-05-24 21:26:06 -0400] yfeldblum: the ticket is still open; opscode runs on JIRA, not github
[2012-05-24 21:26:06 -0400] hoover_damm: then stop being shitty with pull requests
[2012-05-24 21:26:11 -0400] hoover_damm: it's hard taking requests upstream
[2012-05-24 21:26:22 -0400] holoway: a pull request to a project that we know won't generate the artifact you want?
[2012-05-24 21:26:23 -0400] hoover_damm: and for us to spend our time to send upstream and have you ding it
[2012-05-24 21:26:27 -0400] holoway: that's crazy
[2012-05-24 21:26:29 -0400] hoover_damm: and then have users ask for it over and over
[2012-05-24 21:26:43 -0400] holoway: we could merge it all day, and it wouldn't get you what you want
[2012-05-24 21:26:49 -0400] hoover_damm: nope it wouldn't
[2012-05-24 21:26:52 -0400] holoway: which is shipped 1.9.3 clients
[2012-05-24 21:27:09 -0400] holoway: so other than saying: hey, I tested the crap out of the client with 1.9.3
[2012-05-24 21:27:11 -0400] hoover_damm: I thought 0.10.10 having 1.9.3 was a very basic expectation
[2012-05-24 21:27:13 -0400] holoway: let's just do it
[2012-05-24 21:27:38 -0400] hoover_damm: and you had 3 months to test it
[2012-05-24 21:27:39 -0400] holoway: you decided to start talking about shame and lying
[2012-05-24 21:27:42 -0400] hoover_damm: so really shame
[2012-05-24 21:28:10 -0400] holoway: awesome - I can't control how you feel about it
[2012-05-24 21:28:15 -0400] holoway: so if you need to feel that way, feel it
[2012-05-24 21:28:31 -0400] holoway: but I'm telling you, not one person in the chain was doing anything than an earnest attempt to get things right
[2012-05-24 21:28:44 -0400] holoway: if you would prefer to feel differently about it, live in your dark ass hole
[2012-05-24 21:28:57 -0400] holoway: and also, thank you for testing chef on 1.9.3
[2012-05-24 21:28:58 -0400] hoover_damm: I just thought Opscode would have used the 3 months to update
[2012-05-24 21:29:00 -0400] holoway: and we should ship with it
[2012-05-24 21:29:10 -0400] yfeldblum: i will always prefer "it will be released when it's ready" to "it will be released, ready or not, on some date"
[2012-05-24 21:29:25 -0400] hoover_damm: and the attitude that jtimberman has had lately was grating on me
[2012-05-24 21:29:32 -0400] siezer: hoover_damm did you test it on solaris 8, 9, 10, 11, smartos, omnios, rhel5, 6, debian xyz, and windows?
[2012-05-24 21:29:35 -0400] jtimberman: I'm sorry.
[2012-05-24 21:29:37 -0400] siezer: or are you just being an ass
[2012-05-24 21:29:56 -0400] holoway: hoover_damm: honeslty, the attitude you've been having has been wearing on me
[2012-05-24 21:29:58 -0400] hoover_damm: siezer, sorry I didn't test it on xyz... can you point me to the link?
[2012-05-24 21:30:02 -0400] josephholsten: siezer: don't feed the trolls
[2012-05-24 21:30:15 -0400] holoway: every time I come in here, you're either telling someone they are doing it wrong, or picking a fight
[2012-05-24 21:30:17 -0400] josephholsten: and don't troll
[2012-05-24 21:30:21 -0400] hoover_damm: holoway, I just want to be able to contribute to opscode and have them actually stick
[2012-05-24 21:30:30 -0400] hoover_damm: and to have the shitty close
[2012-05-24 21:30:34 -0400] hoover_damm: and the nothing new since
[2012-05-24 21:30:36 -0400] holoway: it wasn't a shitty close, man
[2012-05-24 21:30:41 -0400] hoover_damm: really makes me sad
[2012-05-24 21:30:46 -0400] holoway: we could have closed it, and we still wouldn't have shipped it from there
[2012-05-24 21:30:59 -0400] holoway: I'm sorry it bothers you, and I'm sorry you feel offended
[2012-05-24 21:31:01 -0400] hoover_damm: proper close should have pointed me to where I can fork the new omnibus
[2012-05-24 21:31:07 -0400] hoover_damm: and do the pull in the new build format
[2012-05-24 21:31:08 -0400] holoway: we hadn't released it
[2012-05-24 21:31:16 -0400] hoover_damm: then it was premature
[2012-05-24 21:31:24 -0400] holoway: ok - want me to merge it?
[2012-05-24 21:31:32 -0400] holoway: you'll be just as screwed :)
[2012-05-24 21:31:46 -0400] hoover_damm: you'd need to update it to p194 actually
[2012-05-24 21:31:58 -0400] hoover_damm: i'm going to do that soon
[2012-05-24 21:32:08 -0400] hoover_damm: if you are willing to accept a p194 pull request, I may re-open one
[2012-05-24 21:34:01 -0400] holoway: hoover_damm: you need to patch https://github.com/opscode/omnibus-software/blob/master/config/software/ruby.rb
[2012-05-24 21:34:09 -0400] holoway: and add a cross-platform build of libsyck
[2012-05-24 21:34:17 -0400] holoway: that's installing into the embedded lib directory
[2012-05-24 21:34:48 -0400] holoway: which would need to be added to the 'dependencies' line
[2012-05-24 21:35:09 -0400] holoway: and, for the record: check out how much easier that was than trying to shame me, or anyone else
[2012-05-24 21:35:37 -0400] hoover_damm: holoway, I actually got a response and a resolution to the problem that I can be happy with
[2012-05-24 21:35:43 -0400] hoover_damm: holoway, so the shame on opscode appears to have worked.
[2012-05-24 21:35:52 -0400] hoover_damm: holoway, much better then what jtimbermans crap
[2012-05-24 21:35:55 -0400] holoway: which you could have gotten without being an asshole
[2012-05-24 21:36:00 -0400] hoover_damm: I tried
[2012-05-24 21:36:03 -0400] hoover_damm: many times
[2012-05-24 21:36:06 -0400] hoover_damm: and not in #chef
[2012-05-24 21:36:08 -0400] jtimberman: I apologized sir, and I've tried to be respectful.
[2012-05-24 21:36:18 -0400] holoway: but instead, here we are
[2012-05-24 21:36:39 -0400] hoover_damm: I tried, we had issues, I raged... you stepped in and gave me what I wanted
[2012-05-24 21:36:40 -0400] hoover_damm: thank you
[2012-05-24 21:36:53 -0400] hoover_damm: if you close a pull request in the future like that, you should include where to do it
[2012-05-24 21:37:09 -0400] holoway: yeah, but I'm 90% to done with you now
[2012-05-24 21:37:12 -0400] hoover_damm: we are trying to help you
[2012-05-24 21:37:32 -0400] holoway: honestly? if your help includes accusations of lying and shame
[2012-05-24 21:37:38 -0400] holoway: I would rather do the work myself
[2012-05-24 21:37:45 -0400] hoover_damm: then do it
[2012-05-24 21:38:04 -0400] hoover_damm: I was just trying to fix an open ticket
[2012-05-24 21:38:11 -0400] hoover_damm: and getting the push around
[2012-05-24 21:38:23 -0400] holoway: I've never been anything but kind to you
[2012-05-24 21:39:20 -0400] holoway: I'm done with this conversation, I've got work to do
[2012-05-24 21:40:42 -0400] oddover: hey all, can anyone point me to a cookbook that handles /etc/sysconfig/network-scripts/ifcfg-eth*
[2012-05-24 21:41:54 -0400] simonjj: is there a way to simply change the permissions/ownership of an existing files
[2012-05-24 21:42:47 -0400] simonjj: I know there cookbook_file and file, neither of which will really only change the permissions/owner of a file
[2012-05-24 21:43:09 -0400] hoover_damm: instead of being told i'm a gentoo idiot
[2012-05-24 21:43:24 -0400] hoover_damm: sorry /me is done
[2012-05-24 21:43:28 -0400] oddover: simonjj: try file with the create_if_missing action
[2012-05-24 21:43:59 -0400] simonjj: I quote from the docs: "create_if_missing: Create this file only if it does not exist. If it exists, do nothing."
[2012-05-24 21:44:07 -0400] simonjj: Iam happy to try
[2012-05-24 21:44:41 -0400] mattray: simonjj: file used with :create and parameters for permission & owner will enforce those for you
[2012-05-24 21:44:44 -0400] josephholsten: simonjj: I think `only_if { ::File.exists? '.../file' } might be the constraint you're after
[2012-05-24 21:45:02 -0400] chef_newb: sascha_d I added IUS and EPEL repos through Chef, and fixed recipes for both (one used a wrong URL, the other an unreliable one, which sometimes forwarded to a good mirror but usually to a broken mirror)
[2012-05-24 21:45:09 -0400] simonjj: cool thanks
[2012-05-24 21:45:23 -0400] chef_newb: but I'm still getting an error when it tries to install php53
[2012-05-24 21:45:35 -0400] sascha_d: can you see it when checking via the command line?
[2012-05-24 21:46:04 -0400] chef_newb: do you mean can I just do yum install php53?
[2012-05-24 21:46:12 -0400] sascha_d: or yum info php53
[2012-05-24 21:46:25 -0400] sascha_d: usually this means for me that my package name is a little off
[2012-05-24 21:46:36 -0400] chef_newb: crap: I guess the repos didn't get added
[2012-05-24 21:46:49 -0400] chef_newb: when I added them manually from the shell that fixed it
[2012-05-24 21:46:56 -0400] chef_newb: but adding them via chef is not working
[2012-05-24 21:47:12 -0400] chef_newb: (although it's not giving me errors anymore so I thought I got it working)
[2012-05-24 21:47:19 -0400] chef_newb: $#@!*^&$*)(!
[2012-05-24 21:47:33 -0400] josephholsten: chef_newb: are you using the resource in the yum cookbook?
[2012-05-24 21:47:56 -0400] chef_newb: I'm using the yum cookbook from opscode
[2012-05-24 21:48:02 -0400] chef_newb: if that's what you're asking
[2012-05-24 21:48:08 -0400] chef_newb: if not can you please rephrase?
[2012-05-24 21:48:25 -0400] chef_newb: by "resource" do you mean "recipe"?
[2012-05-24 21:49:31 -0400] sascha_d: I think he's asking if you are using the yum_repository resourcef
[2012-05-24 21:50:03 -0400] chef_newb: sorry I still don't understand
[2012-05-24 21:50:09 -0400] josephholsten: ah, you're using the yum::epel and yum::ius recipes
[2012-05-24 21:50:14 -0400] chef_newb: yes
[2012-05-24 21:50:16 -0400] chef_newb: exactly
[2012-05-24 21:50:21 -0400] kepioo: Problem bootstrapping ubuntu host - my command is : knife bootstrap -u myuser -P mypwd -d ubuntu10.04-gems -r 'recipe[mysql::server]' my.ip.adress --> I'm running knife from my workstation, the output I get is : Bootstrapping Chef on my.ip.adress and nothing else. Where can I see the logs?
[2012-05-24 21:50:25 -0400] chef_newb: but they were both broken so I had to fix them
[2012-05-24 21:51:17 -0400] chef_newb: sed -i '' -e 's|download.fedoraproject.org/pub/epel|mirror.symnds.com/distributions/fedora-epel|' cookbooks/yum/recipes/*.rb
[2012-05-24 21:51:27 -0400] chef_newb: sed -i '' -e 's|i386|x86_64|' cookbooks/yum/recipes/*.rb
[2012-05-24 21:51:27 -0400] chef_newb: sed -i '' -e 's|1.0-8|1.0-10|' cookbooks/yum/attributes/*.rb
[2012-05-24 21:51:28 -0400] sascha_d: can you gist your modified recipes?
[2012-05-24 21:51:41 -0400] chef_newb: I can if you prefer
[2012-05-24 21:52:01 -0400] chef_newb: I also just posted my modifications: that is, if you run those commands it'll modify them the way I did
[2012-05-24 21:52:13 -0400] chef_newb: but if you prefer a gist/pastie I can do that
[2012-05-24 21:52:15 -0400] sascha_d: Also, you can try running chef-client with -l debug
[2012-05-24 21:52:24 -0400] sascha_d: and see if it tells you anything useful
[2012-05-24 21:52:26 -0400] josephholsten: if you're rewriting them, you probably want to use this form: https://github.com/opscode-cookbooks/yum/blob/master/README.md#repository
[2012-05-24 21:52:59 -0400] chef_newb: okay, I'm running Chef by way of Vagrant.  is it still possible to use -l debug?
[2012-05-24 21:53:22 -0400] josephholsten: it's a setting in the Vagrant file, let me check
[2012-05-24 21:53:27 -0400] jessicab: kepioo - you can add debug output with -VV that might give you what you need.. you can also set a log location in your knife.rb
[2012-05-24 21:53:48 -0400] kepioo: the current log output is to STDOUT
[2012-05-24 21:53:53 -0400] kepioo: i'll and debug level
[2012-05-24 21:53:58 -0400] kepioo: i'll try the -VV
[2012-05-24 21:54:13 -0400] josephholsten: chef_newb: put `chef.log_level = :debug` inside the config.vm.provision block
[2012-05-24 21:54:23 -0400] jessicab: kepioo - debug and -VV are the same thing btw.. you might also want to make sure you can ssh to that ip
[2012-05-24 21:54:27 -0400] chef_newb: ok: thanks
[2012-05-24 21:55:01 -0400] kepioo: <jessicab> --> it's an authorization method : ERROR: all authorization methods failed (tried publickey, password)
[2012-05-24 21:55:07 -0400] kepioo: let me fix that
[2012-05-24 21:56:33 -0400] chef_newb: sascha_d and josephholsten: whoa, I just did 'yum repolist` on the VM and is says it DOES have IUS and EPEL, but yet `yum info php53` doesn't show any packages
[2012-05-24 21:57:01 -0400] sascha_d: at this point I start browsing the repositories or doing regexs to see if I have a bad name or if the package isn't where I think it is
[2012-05-24 21:57:08 -0400] chef_newb: * epel: mirrors.servercentral.net and * ius: archive.linux.duke.edu
[2012-05-24 21:57:24 -0400] chef_newb: a bad name for php53?  or something else?
[2012-05-24 21:57:58 -0400] sascha_d: it might need a version or something
[2012-05-24 21:58:03 -0400] chef_newb: but when I manually added IUS to the VM I could then do `yum install php53`
[2012-05-24 21:58:15 -0400] sascha_d: so instead of install, use info
[2012-05-24 21:58:21 -0400] sascha_d: it will tell you if it's available to install
[2012-05-24 21:58:25 -0400] chef_newb: where would I specify the version?  (there was something in the old error message about a version number missing)
[2012-05-24 21:59:01 -0400] kepioo: <jessicab> although my command is : knife bootstrap --user=chef ...., the debug shows : "Failed to authenticate root - trying password auth"
[2012-05-24 21:59:23 -0400] kepioo: it's totally ignoring the username I'm passing
[2012-05-24 21:59:45 -0400] kepioo: the devops cast on you tube shows using -x for the username
[2012-05-24 21:59:57 -0400] kepioo: but knife bootstrap -h show -u --user for username
[2012-05-24 22:00:36 -0400] sascha_d: chef_newb look at this page: http://rpm.pbone.net/index.php3/stat/4/idpl/17018455/dir/redhat_el_5/com/php53-common-5.3.8-4.el5.remi.x86_64.rpm.html
[2012-05-24 22:00:37 -0400] kepioo: there it is --> I had to use -x
[2012-05-24 22:00:45 -0400] sascha_d: it refers to a php53-common
[2012-05-24 22:01:01 -0400] kepioo: I still don't understand why the knife help was showing -u --user
[2012-05-24 22:01:09 -0400] Urocyon: kepioo that's client username.
[2012-05-24 22:01:15 -0400] Urocyon: -u is
[2012-05-24 22:01:32 -0400] Urocyon: the client used to connect to the chef server.
[2012-05-24 22:01:36 -0400] kepioo: oh
[2012-05-24 22:01:38 -0400] kepioo: that makes sense
[2012-05-24 22:01:45 -0400] lledet: does remote_directory copy over files that start with a dot?
[2012-05-24 22:02:00 -0400] kepioo: :( me moron --> -x --ssh-user
[2012-05-24 22:02:13 -0400] kepioo: I'm sorry guys - thanks !
[2012-05-24 22:03:18 -0400] petemcw: does anyone have a best practice for setting a server's FQDN when using the "knife rackspace" or "knife ec2" plugins?
[2012-05-24 22:04:47 -0400] oddover: hey all, can anyone point me to a cookbook that handles /etc/sysconfig/network-scripts/ifcfg-eth*
[2012-05-24 22:06:41 -0400] simonjj: does seem like a bug? https://gist.github.com/2784481
[2012-05-24 22:07:20 -0400] chef_newb: sascha_d and josephholsten `yum install php-common` still gives me Error: No matching Packages to list
[2012-05-24 22:07:33 -0400] simonjj: why not just create the file cache
[2012-05-24 22:07:38 -0400] chef_newb: and `yum install php` worked before when I added IUS by hand
[2012-05-24 22:07:40 -0400] simonjj: instead of aborting ?
[2012-05-24 22:07:48 -0400] sascha_d: try php53-common
[2012-05-24 22:08:02 -0400] sascha_d: or try yum whatprovides php53
[2012-05-24 22:08:33 -0400] mattray: simonjj: is that directory there?
[2012-05-24 22:08:58 -0400] sascha_d: chef_newb yum install php probably worked  because php is a group
[2012-05-24 22:09:12 -0400] sascha_d: php is different from php53
[2012-05-24 22:09:38 -0400] simonjj: no
[2012-05-24 22:09:42 -0400] chef_newb: sorry: I meant `yum install php53` worked
[2012-05-24 22:09:57 -0400] simonjj: matray: but I shouldn't care when I am using a remote_file whether or not it is
[2012-05-24 22:09:58 -0400] mattray: simonjj: then use the directory resource
[2012-05-24 22:10:27 -0400] simonjj: mattray: or run it another time.... because the stacktrace file ends up in there and creates the directory
[2012-05-24 22:11:03 -0400] simonjj: just in case this isn't clear... this is my file_cache_path
[2012-05-24 22:11:38 -0400] mattray: yeah, but assigning a variable doesn't get it created automatically
[2012-05-24 22:11:49 -0400] chef_newb: sascha_d and josephholsten what provides gave me some info: http://pastie.org/3963317
[2012-05-24 22:12:12 -0400] simonjj: but when I use a remote file it should get created transparently
[2012-05-24 22:12:24 -0400] simonjj: and you know it
[2012-05-24 22:12:34 -0400] sascha_d: chef_newb so try and see if yum info php53u gives you any love
[2012-05-24 22:12:34 -0400] chef_newb: and oddly php *did* get installed, despite the error messages. and it's 5.3.13
[2012-05-24 22:12:34 -0400] simonjj: :-)
[2012-05-24 22:12:54 -0400] mattray: simonjj: nah, I prefer explicitly creating things
[2012-05-24 22:13:02 -0400] chef_newb: yes, that's WEIRD
[2012-05-24 22:13:08 -0400] mattray: magically creating directories is bad
[2012-05-24 22:13:26 -0400] mattray: simonjj: you want a directory created, create it ;)
[2012-05-24 22:13:31 -0400] mattray: gotta run
[2012-05-24 22:13:41 -0400] chef_newb: http://pastie.org/3963326
[2012-05-24 22:14:47 -0400] sascha_d: there you go
[2012-05-24 22:18:15 -0400] chef_newb: sascha_d so I should just change the recipe to use php53u instead of php53?   like this: http://pastie.org/3963357
[2012-05-24 22:18:45 -0400] sascha_d: that looks good to me
[2012-05-24 22:19:12 -0400] sascha_d: might want to verify your other php packages while you're at it
[2012-05-24 22:19:32 -0400] chef_newb: verify by manually installing?  or is there a better way?
[2012-05-24 22:19:55 -0400] sascha_d: :) no I just yum info packages before fininshing my recipes
[2012-05-24 22:20:03 -0400] sascha_d: was the php cookbook too much php?
[2012-05-24 22:20:07 -0400] sascha_d: because there is one you know
[2012-05-24 22:20:50 -0400] chef_newb: ?
[2012-05-24 22:20:52 -0400] lledet: anyone use knife-solo? i'm having a problem with it syncing files
[2012-05-24 22:20:59 -0400] sascha_d: https://github.com/opscode-cookbooks/php/blob/master/recipes/package.rb
[2012-05-24 22:21:22 -0400] sascha_d: interestingly it uses php53 in its package list
[2012-05-24 22:21:24 -0400] lledet: it won't sync dot files and i'm not sure how to make it do that
[2012-05-24 22:22:41 -0400] chef_newb: sascha_d my "main.rb" has a line `include_recipe "drush"` which is causing all these problems do you mean that if I did `include_recipe "php"` before that it might fix these problems?
[2012-05-24 22:23:17 -0400] sascha_d: mmm, maybe.  If you have that cookbook in your repo
[2012-05-24 22:23:27 -0400] chef_newb: yeah I do
[2012-05-24 22:23:45 -0400] chef_newb: that's what I'm editing
[2012-05-24 22:24:09 -0400] chef_newb: (yeah I know editing it is quick & dirty, but it's a faster way to try potential fixes)
[2012-05-24 22:24:28 -0400] sascha_d: phone call
[2012-05-24 22:24:34 -0400] sascha_d: I'll be out for a while
[2012-05-24 22:24:39 -0400] chef_newb: okay
[2012-05-24 22:24:43 -0400] chef_newb: thanks for your help!
[2012-05-24 22:37:25 -0400] jtimberman: sascha_d: yeah
[2012-05-24 22:37:33 -0400] jtimberman: sascha_d: php53 from epel for rhel 5
[2012-05-24 22:37:45 -0400] jtimberman: but its just php in rhel 6 from rhn
[2012-05-24 22:38:22 -0400] sascha_d: yeah I don't know nothin about no phps I was just trying to help with repo trubbles
[2012-05-24 22:38:37 -0400] jtimberman: that is about the extent of my knowledge on the subject :)
[2012-05-24 22:55:45 -0400] dyer: Hey Guys, so w/ the new omnibus ( chef-full )  installer for 10.10 shouldn't I get 10.10 on the instance because I am not not got 10.8 ?
[2012-05-24 23:04:38 -0400] josephholsten: dyer: yes. known bug.
[2012-05-24 23:04:45 -0400] dyer: k, work around?
[2012-05-24 23:11:07 -0400] oddover: any ruby experts: is there a way to insert an element into an array after a certain known value? I know there's array.insert(), but that does it by index.
[2012-05-24 23:11:40 -0400] miah: myarray << othershit
[2012-05-24 23:11:50 -0400] miah: prior to 1.9, arrays are unordered
[2012-05-24 23:11:54 -0400] miah: iirc
[2012-05-24 23:12:05 -0400] erikh: you're thinking of hashes
[2012-05-24 23:12:10 -0400] miah: ok, probably =)
[2012-05-24 23:12:12 -0400] holoway: miah: arrays are always ordered - it's hashes who are unordered
[2012-05-24 23:12:13 -0400] holoway: :)
[2012-05-24 23:12:16 -0400] miah: thanks
[2012-05-24 23:12:22 -0400] erikh: array[array.index(obj), 1] = obj
[2012-05-24 23:12:26 -0400] erikh: I think that'll do what you want.
[2012-05-24 23:12:53 -0400] oddover: is obj the array then?
[2012-05-24 23:12:57 -0400] oddover: no
[2012-05-24 23:13:00 -0400] erikh: obj is what you're looking for
[2012-05-24 23:13:12 -0400] oddover: what I'm trying to add into the array?
[2012-05-24 23:13:14 -0400] erikh: array is just a variable containing the array
[2012-05-24 23:13:17 -0400] erikh: correct
[2012-05-24 23:13:46 -0400] oddover: so array.index(obj) will give me the index of the "obj" element?
[2012-05-24 23:13:50 -0400] erikh: correct
[2012-05-24 23:13:54 -0400] erikh: the first occurrence of obj
[2012-05-24 23:14:27 -0400] oddover: ok, so just to clarify: array[array.index(existing_obj), 1] = additional_obj
[2012-05-24 23:14:55 -0400] erikh: correct
[2012-05-24 23:15:02 -0400] erikh: let me check in irb to be sure
[2012-05-24 23:15:07 -0400] oddover: ok
[2012-05-24 23:15:17 -0400] oddover: (what's irb?)
[2012-05-24 23:15:30 -0400] erikh: interactive ruby
[2012-05-24 23:15:35 -0400] oddover: ok
[2012-05-24 23:15:41 -0400] erikh: it's just a console (aka a REPL) that you can use to try ruby stuff
[2012-05-24 23:15:49 -0400] oddover: ah
[2012-05-24 23:15:57 -0400] oddover: oh, and what's the 1?
[2012-05-24 23:16:18 -0400] erikh: find the index, return one element
[2012-05-24 23:16:27 -0400] erikh: let me check that, I'm not 100% sure that's what you want.
[2012-05-24 23:16:30 -0400] oddover: ok
[2012-05-24 23:16:55 -0400] erikh: nah, that'll replace it
[2012-05-24 23:16:56 -0400] erikh: shiiiii
[2012-05-24 23:17:10 -0400] oddover: oh, yea
[2012-05-24 23:17:19 -0400] oddover: h.o that helps though
[2012-05-24 23:17:54 -0400] oddover: array.insert(array.index(existing_obj), additional_obj)
[2012-05-24 23:17:57 -0400] oddover: does that work?
[2012-05-24 23:19:48 -0400] erikh: ok
[2012-05-24 23:19:53 -0400] erikh: this is a little convoluted but here
[2012-05-24 23:20:05 -0400] erikh: array = [1,2,3]; array[array.index(2), 1] = [2, 4]
[2012-05-24 23:20:16 -0400] erikh: that should make array == [1,2,4,3]
[2012-05-24 23:20:51 -0400] oddover: mine worked too, btw
[2012-05-24 23:21:02 -0400] erikh: that should insert before though, no?
[2012-05-24 23:21:11 -0400] oddover: err, yes
[2012-05-24 23:21:18 -0400] erikh: this appends at the point of the index
[2012-05-24 23:21:23 -0400] erikh: so now you have a solution for both cases!
[2012-05-24 23:21:32 -0400] oddover: oh, then this should work: array.insert(array.index(existing_obj)+1, additional_obj)
[2012-05-24 23:21:33 -0400] oddover: lol
[2012-05-24 23:21:40 -0400] erikh: yeah, probably
[2012-05-24 23:21:51 -0400] erikh: might get weird at the end of the array though
[2012-05-24 23:22:29 -0400] oddover: yea.
[2012-05-24 23:22:44 -0400] oddover: I'll work out the details for my use case
[2012-05-24 23:22:49 -0400] oddover: thanks!
[2012-05-24 23:22:49 -0400] erikh: anyhow, hth!
[2012-05-24 23:22:52 -0400] erikh: enjoy
[2012-05-24 23:26:34 -0400] oddover: hmmm. looks kinda messy, since I'm dealing with long strings
[2012-05-24 23:28:33 -0400] miah: i've started using pry rather than irb and i <3 it
[2012-05-24 23:29:15 -0400] oddover: If I do this, and I change rules_array, does it change long_array_name?: rules_array = long_array_name
[2012-05-24 23:29:56 -0400] oddover: what I want is a shortened version of an array name
[2012-05-24 23:48:48 -0400] dyer: josephholsten, is there a work around for that known bug?
[2012-05-24 23:49:04 -0400] josephholsten: hmm
[2012-05-24 23:51:03 -0400] josephholsten: it's pulling install.sh from this dir: http://s3.amazonaws.com/opscode-full-stack/
[2012-05-24 23:51:23 -0400] josephholsten: and there are 0.10.10 installers available for ubuntu-10.04
[2012-05-24 23:52:08 -0400] josephholsten: but if you aren't running ubuntu-10.04, there isn't even an installer for you
[2012-05-24 23:54:55 -0400] dyer: So once again I am penalized for not using ubuntu. :(
[2012-05-24 23:55:58 -0400] hoover_damm: build your own omnibus?
[2012-05-24 23:56:14 -0400] hoover_damm: image that is
[2012-05-24 23:56:33 -0400] dyer: not sure I follow
[2012-05-24 23:57:02 -0400] hoover_damm: the installer is only installing 0.10.8 right? you need to 0.10.10 version of chef-full
[2012-05-24 23:57:05 -0400] hoover_damm: ?
[2012-05-24 23:57:28 -0400] hoover_damm: [14:19] <jtimberman> josephholsten: the install.sh script is pointing at 0.10.8 still
[2012-05-24 23:57:34 -0400] hoover_damm: the reason from my irclogs is here ^^ dyer
[2012-05-24 23:58:10 -0400] josephholsten: dyer: you'd be generating a new install package, either rpm, deb, shar or tgz
[2012-05-24 23:59:22 -0400] dyer: ok, but don't you think its opscode job to provide this for the more popular production platforms ?
[2012-05-24 23:59:36 -0400] dyer: I mean I understand if something is in beta, but wasn't chef 10.10 "released" ?
[2012-05-24 23:59:50 -0400] bemu: Does anyone know of a good way to get a du of an S3 bucket? s3cmd breaks; the bucket has hundreds of Tb.

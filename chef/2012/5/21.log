[2012-05-21 00:11:21 -0400] atomic-penguin: xiaotian, for what purpose the recipe?
[2012-05-21 00:16:16 -0400] xiaotian: atomic-penguin: I want to install per user rvm for current user that runs chef-solo through sudo
[2012-05-21 00:16:48 -0400] yfeldblum: xiaotian, root should run chef-solo, not a user via sudo ...
[2012-05-21 00:17:26 -0400] atomic-penguin: xiaotian, use the "user" attribute on your rvm "execute" or deploy resource
[2012-05-21 00:17:32 -0400] yfeldblum: xiaotian, as in, chef assumes it's running as root because it's the diety on your system
[2012-05-21 00:18:33 -0400] yfeldblum: xiaotian, if you want to set up a per-user RVM, then stick something in your node.json with that info, and write your recipe to look for that info in the node attributes
[2012-05-21 00:19:12 -0400] xiaotian: atomic-penguin: I am not using execute.  I am using rvm::user recipe from github, which reads node[]
[2012-05-21 00:20:47 -0400] xiaotian: yfeldblum: I want to ssh to a blankslate box as a sudoer and run chef-solo in one shot from remote.
[2012-05-21 00:21:09 -0400] xiaotian: the host might not allow root ssh from remote.
[2012-05-21 00:21:28 -0400] atomic-penguin: this one? https://github.com/fnichol/chef-rvm/blob/master/recipes/user.rb
[2012-05-21 00:21:43 -0400] xiaotian: yes, that one
[2012-05-21 00:24:10 -0400] atomic-penguin: does passing the user not work for you then?
[2012-05-21 00:25:18 -0400] atomic-penguin: Like this: https://github.com/fnichol/chef-rvm#-rvm-installed-for-a-specific-user-with-rubies
[2012-05-21 00:27:12 -0400] yfeldblum: xiaotian, sorry, i wasn't being clear: just stick the user name in the node.json that you want to set up a per-user RVM for, rather than trying to pass the data in the backdoor via env vars or some such ... in chef-solo, you have two things: code, and data; code is your cookbooks, and data is your node.json; that's it, so just use those
[2012-05-21 00:28:59 -0400] atomic-penguin: yfeldblum, missed you at the conf
[2012-05-21 00:30:30 -0400] yfeldblum: atomic-penguin, sorry!
[2012-05-21 00:30:44 -0400] yfeldblum: atomic-penguin, however, i did manage to get in some skyrim, so there's that
[2012-05-21 00:31:20 -0400] atomic-penguin: yfeldblum, so you missed the conf to play skyrim?
[2012-05-21 00:32:08 -0400] yfeldblum: atomic-penguin, heh, no ...
[2012-05-21 00:35:44 -0400] yfeldblum: atomic-penguin, just real busy
[2012-05-21 00:36:06 -0400] yfeldblum: atomic-penguin, i did watch the keynotes live stream though from the first day
[2012-05-21 00:36:39 -0400] atomic-penguin: Those are up on youtube now, http://www.youtube.com/user/opscode
[2012-05-21 00:37:17 -0400] yfeldblum: ah nice
[2012-05-21 00:37:53 -0400] xiaotian: atomic-penguin: you meant use node[][] = to set the attribute in my recipe?
[2012-05-21 00:43:32 -0400] atomic-penguin: xiaotian, for chef-solo, something like this ought to do it, https://gist.github.com/2760068
[2012-05-21 00:47:42 -0400] xiaotian: thanks atomic-penguin,  is it common/good practice to create a 'more customized' recipe like this? http://pastebin.com/byixZrx9
[2012-05-21 00:48:36 -0400] xiaotian: or use a node.json to specify attributes? which kind of going back to my original question, use dynamic value in .json file.
[2012-05-21 00:49:40 -0400] atomic-penguin: xiaotian, I would say if you have several users to deploy rvms for, create an array containing the user names, and loop over them
[2012-05-21 00:50:55 -0400] yfeldblum: xiaotian, your cookbooks/recipes should be generic enough to be used across your infrastructure without changes per-node; any per-node stuff you need, goes in the node.json file (which you can feel free to generate with a script, where the node.json generating script can certainly use env vars to figure out how to drop the node.json fine)
[2012-05-21 00:51:01 -0400] atomic-penguin: xiaotian, unless his recipe supports that out of the box
[2012-05-21 00:51:58 -0400] c_t: so
[2012-05-21 00:52:08 -0400] c_t: I finally addressed a massive oversight in chef
[2012-05-21 00:52:11 -0400] c_t: https://github.com/ctdk/chef_lang
[2012-05-21 00:52:29 -0400] xiaotian: does chef-solo provider any support for an erb based node.json generation?
[2012-05-21 00:55:44 -0400] yfeldblum: xiaotian, no, you do that separately with just any ruby script, also, erb isn't terribly good for generating json (just use IO#write and just use some JSON gem)
[2012-05-21 00:56:00 -0400] xiaotian: ok
[2012-05-21 00:56:06 -0400] atomic-penguin: chef-solo can do everything that chef-client can, although sometimes you may have to shim in some support code, for example for things like databags
[2012-05-21 00:56:26 -0400] xiaotian: thanks yfeldblum and atomic-penguin
[2012-05-21 00:59:02 -0400] yfeldblum: xiaotian, node.json is one of the inputs to chef-solo, rather than an output
[2012-05-21 01:01:45 -0400] atomic-penguin: xiaotian, okay I see that struct is actually an array
[2012-05-21 01:04:25 -0400] atomic-penguin: xiaotian, so you may be able to just structure your json to do multiple users, https://gist.github.com/2760068
[2012-05-21 01:06:44 -0400] hoover_damm: well databags work, just not in the same way that they work for chef
[2012-05-21 01:06:54 -0400] hoover_damm: can't do search, have to do data_bag_load and data_bag_item
[2012-05-21 01:17:42 -0400] savant: hi all
[2012-05-21 01:18:03 -0400] savant: ive been using chef-solo for about a year or so now
[2012-05-21 01:18:21 -0400] savant: i have quite a few boxes, around 30-50, in chef
[2012-05-21 01:18:38 -0400] savant: and was wondering if you guys had any insight as to when it would be super smart to start using something like chef-server
[2012-05-21 01:18:50 -0400] savant: this solr/amqp stuff seems scary
[2012-05-21 01:20:31 -0400] hoover_damm: do you have to run it? can you go hosted?
[2012-05-21 01:20:43 -0400] savant: i dont want hosted
[2012-05-21 01:20:53 -0400] savant: because then i will eventually have to pay
[2012-05-21 01:21:01 -0400] savant: or if the host goes down I cant do anything
[2012-05-21 01:21:05 -0400] hoover_damm: you pay for a server as well
[2012-05-21 01:21:11 -0400] hoover_damm: to host it on a server
[2012-05-21 01:21:16 -0400] savant: i already have a general purpose admin server
[2012-05-21 01:21:19 -0400] savant: i can put it on there
[2012-05-21 01:21:19 -0400] hoover_damm: if you run the server on ec2 it'll cost money
[2012-05-21 01:21:28 -0400] savant: i just dont want a service
[2012-05-21 01:21:30 -0400] hoover_damm: likely should put it in a container
[2012-05-21 01:21:35 -0400] yfeldblum: savant, http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo#InstallingChefServerusingChefSolo-BootstrapChefServer
[2012-05-21 01:21:56 -0400] hoover_damm: for the most part rabbitmq/solr shouldn't be an issue for you as you'll just bootstrap
[2012-05-21 01:22:04 -0400] hoover_damm: and chef will install rabbitmq and solr and configure them for you
[2012-05-21 01:22:12 -0400] savant: does chef-server come with a web ui
[2012-05-21 01:22:18 -0400] hoover_damm: yep
[2012-05-21 01:22:29 -0400] hoover_damm: the bootstrap will install everything for you
[2012-05-21 01:22:40 -0400] hoover_damm: read the link that yfeldblum linked
[2012-05-21 01:22:50 -0400] savant: does it integrate with amazon or whatever using fog to create new instances/add the roles to them, or do I have to manually add that stuff
[2012-05-21 01:23:06 -0400] savant: i dont like this knife stuff
[2012-05-21 01:23:31 -0400] hoover_damm: how you provision and register instances is up to you
[2012-05-21 01:23:33 -0400] atomic-penguin: savant, knife is awesome though
[2012-05-21 01:23:49 -0400] hoover_damm: you can use amazon user-data and just ec2-run-instance and have it autoprovision
[2012-05-21 01:23:50 -0400] savant: okay so then whats the purpose of chef-server vs just using chef-solo
[2012-05-21 01:23:52 -0400] hoover_damm: on your chef-server
[2012-05-21 01:24:07 -0400] hoover_damm: but generally you knife bootstrap or knife ec2 server create ...
[2012-05-21 01:24:14 -0400] atomic-penguin: savant, the point is a central CMDB with search
[2012-05-21 01:24:17 -0400] hoover_damm: to check it into the chef-server
[2012-05-21 01:24:23 -0400] savant: whats a cmdb
[2012-05-21 01:24:33 -0400] atomic-penguin: Config Management DB
[2012-05-21 01:24:41 -0400] savant: with search?
[2012-05-21 01:25:36 -0400] savant: I'm not trying to be an ass
[2012-05-21 01:25:57 -0400] atomic-penguin: savant, yes so the chef-server keeps an index of all your nodes' ohai data, roles, environments, etc.
[2012-05-21 01:25:59 -0400] yfeldblum: search, as well as direct fetches (GET /nodes/node993)
[2012-05-21 01:26:16 -0400] savant: I already have a small wrapper around chef-solo to provision boxes - in parallel using Net::SSH multi - so I just want to know what the benefit of using chef-server would be
[2012-05-21 01:26:19 -0400] atomic-penguin: you can search all that
[2012-05-21 01:26:34 -0400] xiaotian: can someone please recommend a github repo that uses chef-solo , as an example? I have been playing with chef for a couple of days, and a good example would be really helpful.
[2012-05-21 01:26:40 -0400] yfeldblum: chef in client/server mode turns your infrastructure code into a client/server application
[2012-05-21 01:26:45 -0400] savant: so I guess current running status of an instance?
[2012-05-21 01:27:12 -0400] atomic-penguin: savant, status is saved to the server on completion of a run
[2012-05-21 01:27:18 -0400] savant: xiaotian: here is something that got me up to speed initially with chef http://ericholscher.com/blog/2010/nov/8/building-django-app-server-chef/
[2012-05-21 01:27:25 -0400] atomic-penguin: savant, if the run fails, nothing gets saved
[2012-05-21 01:27:39 -0400] savant: xiaotian: and here is a series of maybe bad info concerning my thoughts of how to use chef http://josediazgonzalez.com/2011/10/03/full-stack-cakephp-deployment-with-chef-and-capistrano/
[2012-05-21 01:28:01 -0400] savant: atomic-penguin: status of what?
[2012-05-21 01:28:18 -0400] atomic-penguin: savant, successful run status of the node
[2012-05-21 01:29:03 -0400] savant: i guess it captures output from each box
[2012-05-21 01:29:14 -0400] atomic-penguin: Ben Rockwood is the only person I've seen doing large-scale management with chef-solo
[2012-05-21 01:29:37 -0400] yfeldblum: chef-client asks the chef-server, "what is my run list? what are my node-specific attributes? what are the cookbooks i should run?" - and you can upload that data to the chef-server, and the next time the chef-client running on a server asks the chef-server for that info, the chef-server will have it and will provide it
[2012-05-21 01:29:41 -0400] atomic-penguin: He asked everyone else at his talk who was doing that, nobody raised their hand
[2012-05-21 01:29:43 -0400] xiaotian: savant: thanks, bookmarked, I will take a look.
[2012-05-21 01:30:34 -0400] savant: I dont know what "large-scale" means to be honest
[2012-05-21 01:30:59 -0400] savant: although I can think of a few ways to manage significantly larger deploys than 50 using S3 plus some magic wrappers.
[2012-05-21 01:31:01 -0400] atomic-penguin: savant, he's managing a large infrastructure 1,000-10,000 nodes with chef-solo
[2012-05-21 01:31:10 -0400] savant: oh neat
[2012-05-21 01:31:13 -0400] savant: googles
[2012-05-21 01:32:42 -0400] savant: where would I find his presentation?
[2012-05-21 01:33:01 -0400] savant: im not so sold on the whole chef-server thing. seems like it has too many moving parts, but thats just me.
[2012-05-21 01:33:05 -0400] atomic-penguin: Like his reason for that is to save on bandwidth costs, not because it has any technical advantage over chef-server
[2012-05-21 01:33:24 -0400] savant: is it this? http://java.dzone.com/videos/ben-rockwood-joyent-devops
[2012-05-21 01:34:08 -0400] atomic-penguin: savant, probably not the same talk, this was last week at chefconf
[2012-05-21 01:34:41 -0400] savant: guessing the talks/slides are not online yet
[2012-05-21 01:34:50 -0400] atomic-penguin: not yet
[2012-05-21 01:35:05 -0400] atomic-penguin: everything so far was on http://youtube.com/user/opscode
[2012-05-21 01:36:02 -0400] atomic-penguin: savant, what platform would you be running chef-server on then?
[2012-05-21 01:36:18 -0400] savant: platform as in?
[2012-05-21 01:36:33 -0400] yfeldblum: chef-solo is just fine ... i assume you just need a way of pushing built repos (i'm assuming your repo would have a build step to turn it into something usable to be run on a node) and a way of pushing per-node json files and a way of triggering chef-solo runs
[2012-05-21 01:36:45 -0400] savant: oh heh
[2012-05-21 01:36:51 -0400] savant: so I build cookbooks and recipes
[2012-05-21 01:36:56 -0400] savant: and then my roles are in json
[2012-05-21 01:36:59 -0400] savant: and my dna are in json
[2012-05-21 01:37:39 -0400] savant: test the recipes against a test instance in some cases, and then just run against the prod instances of whatever role they are
[2012-05-21 01:38:28 -0400] atomic-penguin: platform as in what distribution of linux
[2012-05-21 01:38:39 -0400] savant: ubuntu I suppose
[2012-05-21 01:39:26 -0400] atomic-penguin: to be honest, the chef-server bootstrap code is well tested on ubuntu, you shouldn't have much of a problem
[2012-05-21 01:39:44 -0400] savant: I'm not so worried about the installation, that shouldn't be a big deal
[2012-05-21 01:39:58 -0400] savant: I just want to know how, technically, it would be better at managing servers than chef-solo
[2012-05-21 01:41:05 -0400] yfeldblum: savant, it's not
[2012-05-21 01:41:27 -0400] yfeldblum: savant, it's better *for you* at managing servers, *if* you like working that way
[2012-05-21 01:42:10 -0400] savant: I thought that chef-server would somehow be able to bring up new instances on aws/rackspace with whatever extra volumes necessary
[2012-05-21 01:42:31 -0400] savant: and then chef-client would run on the boxes to get them going
[2012-05-21 01:42:32 -0400] atomic-penguin: savant, that is a knife plugin that bootstraps cloud instances
[2012-05-21 01:42:51 -0400] savant: and then there could be a callback at the end which does any post-processing
[2012-05-21 01:42:56 -0400] savant: atomic-penguin: ?
[2012-05-21 01:42:56 -0400] bawt: atomic-penguin: are you sure about that, it's the way puppet works I know, and I can handle it, but I want to be sure
[2012-05-21 01:43:48 -0400] savant: I tried playing with knife once and then I realized I didnt need it for using chef-solo
[2012-05-21 01:43:58 -0400] yfeldblum: savant, chef-server does not bring up instances; there are some knife plugins that can do that, but remember that you run knife CLI commands on your work machine
[2012-05-21 01:44:10 -0400] atomic-penguin: savant, nothing happens on the chef-server, except for storage of information about your infrastructure
[2012-05-21 01:44:20 -0400] savant: Got it
[2012-05-21 01:45:01 -0400] savant: what sorts of things are stored on chef-server?
[2012-05-21 01:45:32 -0400] savant: I would have access to what other nodes are available, from what I can tell, but exactly what data is that which is available?
[2012-05-21 01:46:17 -0400] yfeldblum: savant, all node data - all data that you could access from the `node` object in any recipe that you run from chef-solo
[2012-05-21 01:46:36 -0400] savant: and that is reported back from the chef client?
[2012-05-21 01:46:45 -0400] yfeldblum: savant, yes, after every successful chef-client run
[2012-05-21 01:48:38 -0400] yfeldblum: savant, so your load-balancer recipe can ask the chef-server for all nodes that are backends for the load-balancer ... you have to decide how that data will be represented on the node attributes, of course, but once you decide that, backend nodes will save that data to the chef-server and load-balancer nodes can query it
[2012-05-21 01:49:15 -0400] savant1: err
[2012-05-21 01:49:15 -0400] savant1: is the consensus to just go with chef-server at a certain point, and if so, what is that point?
[2012-05-21 01:54:30 -0400] yfeldblum: savant, that's not my consensus :P ... my consensus is that you should go with chef-server if you, after looking into it and upon your best judgment, believe that chef-server meets your objectives better than the alternatives
[2012-05-21 01:55:12 -0400] yfeldblum: savant, i have no idea what your objectives are, what your constraints are, what your preferences are, what your company's like, what your infrastructure's like, what your risk tolerance is, what your testing is like, etc. etc. etc.
[2012-05-21 01:55:31 -0400] savant: true
[2012-05-21 01:57:37 -0400] yfeldblum: savant, however, i can offer my consensus on: try it on a throwaway infrastructure, and see whether or not it works for you
[2012-05-21 01:59:54 -0400] savant: yeah
[2012-05-21 02:00:18 -0400] atomic-penguin: savant, there is an omnibus chef-server package coming out soon, to ease the effort of installing chef-server
[2012-05-21 02:03:57 -0400] xiaotian: folks, is file(generated by recipes) permission completely controlled by recipes, or chef provides some way to control that?  I am using chef-rvm to install per user rvm, everything works except the .rvm file's group is 'root',  looks like there is no attributes provided by that recipe to change that. I could run chgrp -R but it's kind of a hack.
[2012-05-21 02:06:18 -0400] coderanger: Run the install process as the correct user
[2012-05-21 02:07:14 -0400] xiaotian: coderanger: install process involves both root-only task and per user tasks.
[2012-05-21 02:08:08 -0400] coderanger: I don't know the rvm recipes, but the answer is either change the GID of the process making the files, or change the perms afterwards
[2012-05-21 02:17:08 -0400] xiaotian: coderanger: I assume this is a very common, is there any example that does this?
[2012-05-21 02:17:19 -0400] coderanger: Of which?
[2012-05-21 02:17:40 -0400] coderanger: And no, installing per-user stuff with Chef is far from common
[2012-05-21 02:17:59 -0400] coderanger: If you need a newer Ruby system-wide, just install it :-)
[2012-05-21 02:18:39 -0400] savant: per user seems weird
[2012-05-21 02:18:42 -0400] coderanger: It makes my "dangerous infra dependencies" gland throb to be touching users beyond initial creating on production system
[2012-05-21 02:19:00 -0400] yfeldblum: which rvm cookbook?
[2012-05-21 02:19:19 -0400] atomic-penguin: xiaotian, fnichol's ruby-build cookbook works pretty well.  Haven't tried his chef-rvm cookbook
[2012-05-21 02:19:33 -0400] xiaotian: https://github.com/fnichol/chef-rvm
[2012-05-21 02:21:52 -0400] xiaotian: my question isn't specifically to rvm. Say I want to have a single deployment to do following:  1. install nginx (system), 2. install postgresql (system), 3. create user 'webapp', 4. run some recipe for 'webapp'
[2012-05-21 02:22:33 -0400] coderanger: xiaotian: execute (and script, bash, etc) takes a user and group to run as
[2012-05-21 02:22:46 -0400] coderanger: That is the "correct" way to run something as a specific user
[2012-05-21 02:23:20 -0400] atomic-penguin: xiaotian, you can use file or directory resources after it runs to recursively correct permissions/ownership, or run your execute blocks with "user" and "group" parameters specified
[2012-05-21 02:23:21 -0400] xiaotian: yes, but if you are using a recipe, and that recipe just assumes current user,
[2012-05-21 02:24:19 -0400] atomic-penguin: xiaotian, right, so you could correct it with a recursive directory resource after the recipe runs
[2012-05-21 02:24:30 -0400] atomic-penguin: http://wiki.opscode.com/display/chef/Resources#Resources-Directory
[2012-05-21 02:24:58 -0400] yfeldblum: ruby_block("asdf") { block { FileUtils.chown_R("some-user", "some-group", "/path/to/dir") } }
[2012-05-21 02:25:09 -0400] xiaotian: atomic-penguin: yeah, I am trying to figure out if chef provide something changes permission, yeild a block, in which I call that per user recipe.
[2012-05-21 02:25:59 -0400] yfeldblum: xiaotian, it does not
[2012-05-21 02:26:11 -0400] xiaotian: the problem with fixing afterwards is that you need to know what directory/file you need to fix
[2012-05-21 02:26:35 -0400] xiaotian: if a recipe changes, added a new file/dir, then it breaks
[2012-05-21 02:26:46 -0400] atomic-penguin: Yeah, the most ideal option is figure out why his recipe isn't setting permissions and sending him a pull request
[2012-05-21 02:27:01 -0400] coderanger: Yes, so as I said, the correct way is to run subproc that are creating these unknown files as teh correct user
[2012-05-21 02:34:50 -0400] xiaotian: atomic-penguin: yeah, I took a look at the recipe, there are a few places 'USER' is passed as key of environment hash, but not 'GROUP'
[2012-05-21 02:35:16 -0400] xiaotian: so it's a bug.
[2012-05-21 02:35:26 -0400] atomic-penguin: xiaotian, yeah, probably is
[2012-05-21 02:37:49 -0400] xiaotian: one more question, which one is the prefered way to define roles? ruby or json? provide author/maintainer is familiar with both.
[2012-05-21 02:38:50 -0400] atomic-penguin: its my own personal opinion that rb is easier to edit than json, ymmv
[2012-05-21 02:39:24 -0400] xiaotian: so it makes no difference say, when I move to chef server from chef-solo?
[2012-05-21 02:39:41 -0400] xiaotian: I agree rb dsl is easier to work with.
[2012-05-21 02:40:35 -0400] atomic-penguin: unless you like playing hunt down the mismatched }
[2012-05-21 02:41:17 -0400] atomic-penguin: you can input either into knife as far as I know
[2012-05-21 02:44:53 -0400] xiaotian: ok, thanks!
[2012-05-21 02:47:13 -0400] yfeldblum: my rule of thumb: if you treat role X as part of the CODEbase, and not as data, then ruby; if you treat role Y as DATA, and not as part of the codebase, then json
[2012-05-21 02:50:52 -0400] yfeldblum: or yaml or xml - you just need to write a knife plugin to handle that
[2012-05-21 04:28:52 -0400] valdezjoelt: help im having an error Net::HTTPServerException: 401 "Unauthorized"  http://pastebin.com/DaSyTTvC on my windows node i tried deleting the node and the client from the chef server and deleting the client.pem and register again. but i get the same error message.
[2012-05-21 05:17:24 -0400] stensonb: @valdezjoelt - did you get it figured out?
[2012-05-21 05:27:22 -0400] martinisoft: I'm having issues bootstrapping a fresh Linode instance, anyone about to help?
[2012-05-21 05:27:52 -0400] martinisoft: it seems to be a common error, but none of the methods on the wiki seem to be working so I don't know what I am missing
[2012-05-21 05:28:10 -0400] martinisoft: http://wiki.opscode.com/display/chef/Common+Errors <- getting the 401 unauthorized error
[2012-05-21 05:29:35 -0400] martinisoft: already re-generated the organization validation key and swapped out the one in my chef-repo
[2012-05-21 05:29:50 -0400] martinisoft: went on the server and deleted the client.pem file and removed the node via knife
[2012-05-21 05:31:42 -0400] martinisoft: the client registers the node, but can't connect at all
[2012-05-21 05:31:58 -0400] BryanWB_: ohai chefs!
[2012-05-21 05:32:23 -0400] martinisoft: I'm wondering if its an issue with the fact Linode by default has localhost as the hostname, so the node gets registered as "localhost"
[2012-05-21 05:52:00 -0400] c_t: ohai BryanWB_
[2012-05-21 05:53:03 -0400] BryanWB_: c_t: ohai
[2012-05-21 05:53:40 -0400] BryanWB_: c_t: ? really, i never had any problems
[2012-05-21 05:54:14 -0400] c_t: neither had I, but it's complaining about something being nil
[2012-05-21 05:57:32 -0400] bunyipoz: hey all - is there a nice way for chef to set values in a configutation file (e.g. key = value)?
[2012-05-21 05:57:53 -0400] c_t: what do you mean?
[2012-05-21 05:58:07 -0400] c_t: like attributes in a cookbook, or a configuration file for something chef's installing?
[2012-05-21 05:58:16 -0400] bunyipoz: trying to change a config file on a chef_client
[2012-05-21 05:58:23 -0400] bunyipoz: manged by a chef-client
[2012-05-21 05:59:31 -0400] bunyipoz: on the server running the chef_client there is a "ini" file where I want to change bind = 127.0.0.1 to bind = 0.0.0.0
[2012-05-21 06:01:08 -0400] c_t: I'd make a template for it
[2012-05-21 06:01:45 -0400] bunyipoz: do you have to template the whole file or can you get it to change just the one line?
[2012-05-21 06:02:15 -0400] c_t: you'd need to template the whole file
[2012-05-21 06:02:32 -0400] c_t: I suppose the alternative would be a recipe that does a substitution on that line
[2012-05-21 06:02:39 -0400] c_t: I guess it's up to you as to which is more work
[2012-05-21 06:07:18 -0400] bunyipoz: thanks for your help @c_t - I wasn't sure if templating allowed me to replace parts of a file
[2012-05-21 06:07:57 -0400] c_t: that said, if it's something you're managing with chef, I'd add a template to the cookbook and just change the one line
[2012-05-21 06:09:35 -0400] bunyipoz: I was thinking about that - but (and this may be due to my ignorance) - that config file is for a package deployed via apt-get. It is possible that there will be more items in the ini file added over time (which i'm not intereseted in) but that line should always be set
[2012-05-21 06:10:15 -0400] c_t: I would move it over to being installed by chef entirely then
[2012-05-21 06:10:26 -0400] c_t: which, I'm happy to say, deals with apt-get just fine
[2012-05-21 06:10:52 -0400] c_t: so you'd have something like
[2012-05-21 06:10:57 -0400] c_t: package "foobar" do
[2012-05-21 06:11:02 -0400] c_t:   action :upgrade
[2012-05-21 06:11:03 -0400] c_t: end
[2012-05-21 06:11:09 -0400] c_t: in your cookbook's recipe
[2012-05-21 06:11:09 -0400] bunyipoz: that bit I'm fine with
[2012-05-21 06:11:27 -0400] c_t: then you'd add the config file to the templates and craft that as you like
[2012-05-21 06:11:47 -0400] c_t: then, when you install it it installs that config file
[2012-05-21 06:11:48 -0400] bip: How can I pass variable in to and out from a ruby_block?
[2012-05-21 06:11:48 -0400] bunyipoz: but everytime the config file changes (more options added) I have to retemplate the file?
[2012-05-21 06:12:03 -0400] c_t: and if you need to make changes to the template file you can do so there
[2012-05-21 06:12:31 -0400] bunyipoz: so i have to keep the template file in sync with what newer versions of the package deploys?
[2012-05-21 06:12:36 -0400] c_t: heck, I suppose you could even just make it a file file, if it doesn't need per-machine customizations
[2012-05-21 06:13:10 -0400] c_t: yeah, you'd need to do that
[2012-05-21 06:13:21 -0400] bunyipoz: i guess that's what i was trying to avoid
[2012-05-21 06:14:03 -0400] c_t: on the other hand, apt would be either overwriting or complaining about differences in the config file
[2012-05-21 06:14:14 -0400] c_t: so you'd have to deal with it somehow anyway
[2012-05-21 06:15:18 -0400] bunyipoz: the new options i prob don't care about as the defaults are most likely fine - i might write myself up a recipe tailoered to modify values in "ini"-esque files
[2012-05-21 06:15:27 -0400] c_t: however, fwiw, I think keeping the config file in the cookbook is less work than trying to do a subsitution on the installed file
[2012-05-21 06:16:04 -0400] bunyipoz: i see - thanks again @c_t - appreciate your assistance
[2012-05-21 06:16:44 -0400] c_t: no prob
[2012-05-21 06:17:33 -0400] c_t: BryanWB_: fyi, it didn't seem to like the "owner" attribute
[2012-05-21 06:17:39 -0400] c_t: might be a Mac problem
[2012-05-21 06:17:57 -0400] c_t: since it was cool with the variable elsewhere
[2012-05-21 06:18:04 -0400] BryanWB_: c_t: hmm, i thought links don't have owners, at least not in linux
[2012-05-21 06:18:20 -0400] c_t: I thought so too
[2012-05-21 06:18:21 -0400] c_t: but:
[2012-05-21 06:18:22 -0400] BryanWB_: all links are 777 i thought
[2012-05-21 06:18:33 -0400] c_t: http://wiki.opscode.com/display/chef/Resources#Resources-Link
[2012-05-21 06:19:18 -0400] c_t: but with that, the first pass at the second most silly cookbook I've written this weekend is done
[2012-05-21 06:20:12 -0400] c_t: yesterday I made a chef cookbook for the Chef programming language
[2012-05-21 06:20:20 -0400] c_t: tonight, a cookbook to install Dwarf Fortress
[2012-05-21 06:21:04 -0400] c_t: only does Mac at the moment though; need to bring a Linux VM up tomorrow and make it work there
[2012-05-21 06:21:58 -0400] bip: anyone? return a variable from a ruby_block. Thanks!
[2012-05-21 06:22:47 -0400] BryanWB_: bip: declare that var outside the ruby_block
[2012-05-21 06:22:57 -0400] BryanWB_: bip:       foo = nil
[2012-05-21 06:23:45 -0400] BryanWB_: changes made by ruby_block will only be visible to resources that follow the ruby_block, cuz all ruby code outside of resources will be evaluated b4 all the resources
[2012-05-21 06:25:54 -0400] bip: BryanWB_: Hmm, so what you're saying is that I can't use foo = nil \n ruby_block \n foo = "bar" \n end \n puts ${foo}?
[2012-05-21 06:26:15 -0400] bip: with the block tag also
[2012-05-21 06:26:36 -0400] BryanWB_: bip: yup
[2012-05-21 06:27:24 -0400] bip: BryanWB_: I can use? I get a nil parameter as of now
[2012-05-21 06:28:10 -0400] bip: http://pastebin.com/7dwRujvx
[2012-05-21 06:33:15 -0400] BryanWB_: bip: u want to use node.run_state
[2012-05-21 06:34:11 -0400] BryanWB_: bip: hmm but that still won't work for u, hmm
[2012-05-21 06:34:35 -0400] BryanWB_: bip: u should us arek
[2012-05-21 06:34:36 -0400] BryanWB_: ark
[2012-05-21 06:34:58 -0400] BryanWB_: bip: i have shaved that yak already http://community.opscode.com/cookbooks/ark
[2012-05-21 06:35:40 -0400] BryanWB_: and tutorial here http://devopsanywhere.blogspot.it/2012/03/managing-archives-with-ark-resource.html
[2012-05-21 06:38:45 -0400] bip: thanks, I'll look into that. The whole thing I want to accomplish is: download a latest-file which contains the version of the latest file to run. Then download the file with that version and run the usul unpack/install-dance
[2012-05-21 06:39:33 -0400] BryanWB_: ark does that
[2012-05-21 06:39:56 -0400] BryanWB_: u can reinvent it if u care to, but if ur lazy like me u can use ark
[2012-05-21 06:40:16 -0400] bip: I'm a lazy pig so that should suit me :)
[2012-05-21 06:53:32 -0400] Mithrandir: hm, can defines call other defines?
[2012-05-21 06:53:40 -0400] Mithrandir: iirc there's some limitation there?
[2012-05-21 06:54:10 -0400] bip: BryanWB_: I can't seem to find a way for ark to download a "latest"-file and use the output of that file as an input to where the acctual file is
[2012-05-21 06:55:53 -0400] BryanWB_: bip: yeah, u would need a url  like 'http://example.com/latest.tar.gz'
[2012-05-21 07:10:58 -0400] PapaSierra: morning
[2012-05-21 07:11:30 -0400] PapaSierra: I'm really trying to understand what has gone wrong in this supposedly straight forward process. It's very hard for me to understand where it's going wrong. I followed these instructions https://github.com/ymainier/vagrant-lamp and when I do "vagrant init" I just get errors http://pastebin.com/rzSsfsVN
[2012-05-21 07:29:37 -0400] PapaSierra: can someone point out to me whether this is a chef problem or a vagrant problem?
[2012-05-21 07:33:23 -0400] BryanWB_: PapaSierra: that's a vagrant problem, u r running insiide cygwin?
[2012-05-21 07:35:44 -0400] PapaSierra: BryanWB_: actually not, I figured I'd try run from inside Git's bash (Ming32) for windows, is that the issue?
[2012-05-21 07:36:19 -0400] BryanWB_: PapaSierra: most likely
[2012-05-21 07:36:33 -0400] BryanWB_: PapaSierra: i would read thru the vagrant docs on windows support
[2012-05-21 07:36:38 -0400] PapaSierra: so it should be run from window's cmd?
[2012-05-21 07:36:55 -0400] BryanWB_: no idea, sorry
[2012-05-21 07:37:17 -0400] PapaSierra: great, will do. honestly i just didn't know where to start, i'll read on now... thanks
[2012-05-21 07:45:27 -0400] PapaSierra: BryanWB_: through the Windows CMD I no longer get the error regarding uname, but I still get the ruby error: http://pastebin.com/W8rki12T
[2012-05-21 08:00:20 -0400] BryanWB_: PapaSierra: sorry, no experience w/ ruby on windows, wish i could help u
[2012-05-21 08:00:26 -0400] BryanWB_: u might want to try #vagrant
[2012-05-21 08:28:25 -0400] jeekl: I want to print a data structure in a template, is there any way to do that? I'm writing a configuration file and want to specify ['foo', 'bar'] in that file, so just printing a ruby list would be perfect.
[2012-05-21 08:46:38 -0400] jeekl: ah, got it myself. passing "#{node[:foo][:bar].inspect}" as a variable to the template worked fine.
[2012-05-21 11:14:05 -0400] nathenharvey_: timsmith: knife cookbook site share COOKBOOK CATEGORY (options)
[2012-05-21 11:18:00 -0400] BryanWB_: nathenharvey_: good morning!
[2012-05-21 11:19:38 -0400] nathenharvey_: @BryanWB_ hello!
[2012-05-21 11:36:33 -0400] helllen: helllo
[2012-05-21 11:36:44 -0400] helllen: I have chef (server) installed and working ok
[2012-05-21 11:36:58 -0400] helllen: how does it read the platform of my clients ?
[2012-05-21 11:37:10 -0400] helllen: I mean for example redhat or other
[2012-05-21 11:37:16 -0400] helllen: which file does it read?
[2012-05-21 11:38:30 -0400] gadolin: investigate ohai
[2012-05-21 11:40:43 -0400] helllen: I have
[2012-05-21 11:40:48 -0400] helllen: but not found :-D
[2012-05-21 11:41:19 -0400] BryanWB_:  helllen   /etc/release
[2012-05-21 11:41:46 -0400] BryanWB_:   sorry, /etc/redhat-release
[2012-05-21 11:41:52 -0400] nathenharvey_: helllen: ohai | grep platform
[2012-05-21 11:41:55 -0400] helllen: /etc/redhat-release
[2012-05-21 11:42:29 -0400] cnf: https://gist.github.com/179592 lots of googleing
[2012-05-21 11:43:25 -0400] helllen: ./lib/ohai/plugins/linux/platform.rb
[2012-05-21 11:54:29 -0400] yfeldblum: morning all
[2012-05-21 11:58:21 -0400] BryanWB_: yfeldblum: morning dude, missed u at chefconf
[2012-05-21 12:24:05 -0400] kvanderw: a bit of a noob here - ok - 2 days old - there - it's all my fault :) :: so, I am runnig into an error and questioning the idempotency of the system. Heres what happens
[2012-05-21 12:24:08 -0400] kvanderw: I execute:
[2012-05-21 12:24:09 -0400] kvanderw: knife xenserver vm create --vm-template Deb6-64 --vm-name test8 --vm-memory 1024 --vm-cpus 2 --node-name test8 -s http://chef.meridian-ds.com:4000 --vm-networks "Pool-wide network associated with eth0" -r getting-started,drupal
[2012-05-21 12:25:08 -0400] kvanderw: and the system builds the box and installs mysql and stuff - but fails with soming about Running exception handlers
[2012-05-21 12:25:39 -0400] kvanderw: the last FATAL indicates NameError: execute[create drupal database] (drupal::default line 45) had an error: NameError: uninitialized constant Chef::Recipe::Mysql
[2012-05-21 12:26:00 -0400] kvanderw: well, the very next thing I do, is log into the new box and run chef-client.
[2012-05-21 12:26:21 -0400] kvanderw: It installs and begins running my Drupal no problem.
[2012-05-21 12:26:45 -0400] kvanderw: The difficulty for me then, is where do I start looking for the problem?
[2012-05-21 12:26:53 -0400] kvanderw: thanks
[2012-05-21 12:33:11 -0400] yfeldblum: kvanderw, the problem seems to be that chef loads the rubygems library which immediately caches the known gems, then the mysql::client recipe installs the mysql gem, and then the drupal::default recipe uses the mysql gem, but in between the rubygems library has cached the gem paths and doesn't know that the mysql gem has been installed on the system
[2012-05-21 12:34:09 -0400] yfeldblum: kvanderw, thus the `chef_gem` resource in chef-0.10.10, which clears & refreshes the rubygems library cache after installing the listed gem
[2012-05-21 12:34:33 -0400] yfeldblum: kvanderw, however, it's new, so most cookbooks don't use it
[2012-05-21 12:35:52 -0400] kvanderw: yfeldblum: I noticed after the series of 'storing updated cookbooks'  that the next message says "Missing gem 'mysql'"
[2012-05-21 12:36:35 -0400] yfeldblum: kvanderw, however, chef is *built* for retryability and for progress towards ultimate convergence across multiple runs - and in this example, that's exactly how it played out
[2012-05-21 12:36:35 -0400] kvanderw: yfeldblum: then: Could not find previously defined grants.sql resource
[2012-05-21 12:37:01 -0400] kvanderw: yfeldblum: right - and it's not a terrible problem to run it twice
[2012-05-21 12:37:21 -0400] kvanderw: yfeldblum: at least for now, while I am still testing.
[2012-05-21 12:38:09 -0400] kvanderw: yfeldblum: but, If I can learn enough to correct the problem and contrib back, that would be so much better :)
[2012-05-21 12:39:00 -0400] yfeldblum: kvanderw, i can show you some of the files involved
[2012-05-21 12:39:29 -0400] yfeldblum: kvanderw, https://github.com/opscode-cookbooks/mysql/blob/master/libraries/database.rb#L1-5 (logs the message "Missing gem 'mysql'" immediately at the beginning of the run)
[2012-05-21 12:40:28 -0400] yfeldblum: kvanderw, https://github.com/opscode-cookbooks/mysql/blob/master/recipes/client.rb#L62-70 (installing the mysql gem but not clearing the rubygems cache or, modernly, not using `chef_gem`)
[2012-05-21 12:40:41 -0400] kvanderw: yfeldblum: on one of my tests builds, after the build, I manually ran 'gem install mysql' and had no error.
[2012-05-21 12:41:18 -0400] yfeldblum: kvanderw, https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L153-164 (logs the message "Could not find previously defined grants.sql resource")
[2012-05-21 12:42:36 -0400] yfeldblum: kvanderw, https://github.com/mdxp/drupal-cookbook/blob/master/recipes/default.rb#L45-51 (attempts to use the constant Mysql, which is defined in the gem mysql, but can fail if rubygems hasn't cleared its cache and can't find & load the mysql gem)
[2012-05-21 12:43:06 -0400] yfeldblum: kvanderw, hope that helps
[2012-05-21 12:43:21 -0400] kvanderw: yfeldblum: I'm sure this is way too simplistic, but could I just retry the gem load - or is that where the cache is preventing me? and then the question would be can I do something to the cache if the first attempt fails, and then retry?
[2012-05-21 12:44:13 -0400] kvanderw: yfeldblum: I'll play with it a bit and see what happens - the beauty of this seems to be the ability to retry as often as I would like :)
[2012-05-21 12:44:33 -0400] yfeldblum: kvanderw, no, retrying the gem load will fail unless you `Gem.clear_paths` first
[2012-05-21 12:45:32 -0400] yfeldblum: kvanderw, what i might recommend is to insert your own recipe *before* the mysql & drupal recipes in the run-list, and your recipe simply does `chef_gem "mysql"`
[2012-05-21 12:45:55 -0400] yfeldblum: kvanderw, that may work, and it's worth a try
[2012-05-21 12:48:07 -0400] kvanderw: yfeldblum: thanks, I'll give that a shot - it sounds the easiest for now. Till I get a better handle on the Ruby
[2012-05-21 12:52:03 -0400] yfeldblum: kvanderw, ultimately if you could help the mysql & drupal cookbooks fix their code, that would be really helpful
[2012-05-21 12:52:39 -0400] yfeldblum: kvanderw, at the least, open tickets describing what you encountered so that the cookbook maintainers can address it
[2012-05-21 12:52:51 -0400] kvanderw: yfeldblum: exactly - Like I said, I need to get a bit of a handle on the cookbook writing
[2012-05-21 12:53:20 -0400] yfeldblum: kvanderw, for opscode-maintained cookbooks, you can open tickets at jira.opscode.com (opscode doesn't look at github issues); for other cookbooks such as the drupal cookbook, better bets are github issues
[2012-05-21 12:53:21 -0400] kvanderw: yfeldblum: where would I go to open the tickets? The opscode side where I got the cookbooks?
[2012-05-21 12:53:39 -0400] kvanderw: yfeldblum: thanks - I'll do that
[2012-05-21 12:59:09 -0400] yfeldblum: kvanderw, hope that helps
[2012-05-21 13:10:06 -0400] cjs226: I'm trying to move config data out of my recipes and into data bags.  How can I search for the address of the sqs queue with object_type=d, process=backup, trigger=scheduled in this databag: https://gist.github.com/2762221?
[2012-05-21 13:12:10 -0400] yfeldblum: cjs226, a data bag is like a table in mysql; a data bag item is like a single record within a table in mysql
[2012-05-21 13:12:18 -0400] yfeldblum: cjs226, what you have there is a data bag item
[2012-05-21 13:12:33 -0400] yfeldblum: cjs226, just because there is a lot of confusion in that regard
[2012-05-21 13:14:08 -0400] yfeldblum: cjs226, now, in your recipe, have you already fetched the data bag item using the `search` method or using the `data_bag_item` method? and do you now just need to pull out a bit of data from inside it?
[2012-05-21 13:14:52 -0400] cjs226: yfeldblum: gotcha, sorry for the confusion.  yes, i can search and find the databag item, but I'm failing at trying to retrieve the specific data from the item
[2012-05-21 13:17:15 -0400] yfeldblum: dbi = data_bag_item("my-data-bag", "my-data-bag-item") ; sqs = dbi["sqs"].find{|hash| hash["object_type"] == "d" && hash["process"] == "backup" && hash["trigger"] == "scheduled"} ; sqs && sqs["address"]
[2012-05-21 13:19:08 -0400] cjs226: yfeldblum: wow, thanks!
[2012-05-21 13:19:20 -0400] yfeldblum: cjs226, dbi["sqs"] is a straight-up array, so you can use Array#find (from Enumerable#find): http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find
[2012-05-21 13:20:33 -0400] cjs226: yfeldblum: thx!  a follow up question, am i being too complex?  rather than having this complex/compound data bag item, should i break each piece into their own data bag item?
[2012-05-21 13:21:19 -0400] yfeldblum: cjs226, completely up to you; i find that i prefer treating data bags as though they were mysql tables and data bag items as though they were individual records in a mysql table
[2012-05-21 13:22:36 -0400] yfeldblum: cjs226, so if you're familiar with building database-backed apps, or if you've got someone familiar with building database-backed apps, that's the way i'd look at it
[2012-05-21 13:22:48 -0400] cjs226: yfeldblum, yes, I'm starting to feel that way as well.  i like the idea of keeping all pieces for an app in a file, but suppose i could achieve the same using subdirectories
[2012-05-21 13:24:23 -0400] yfeldblum: cjs226, you can have as many data bags (tables) as you want, and as many data bag items (records in a table) as you want ... keeping in mind that a data bag item can have arbitrarily-nested hashes and arrays so it has more flexibility than a record in mysql
[2012-05-21 13:24:53 -0400] cjs226: yfeldblum, thx for your help and info, greatly appreciated!
[2012-05-21 13:25:01 -0400] yfeldblum: cjs226, not a problem
[2012-05-21 13:26:13 -0400] masterkorp: Hello, any resource to deal with mysql queries on the recipes?
[2012-05-21 13:29:38 -0400] yfeldblum: masterkorp, a little more detail please?
[2012-05-21 13:30:49 -0400] ukio: ohai chefs!
[2012-05-21 13:32:30 -0400] magoo: how do I reference the current node environment in a recipe? is it node.environment?
[2012-05-21 13:33:43 -0400] BryanWB_: node.chef_environment
[2012-05-21 13:33:48 -0400] magoo: thanks
[2012-05-21 13:34:12 -0400] masterkorp: yfeldblum: i am running SQL queries on the recipes, i wonder is there is any resource that would be handling the connections and stuff
[2012-05-21 13:35:53 -0400] ukio: how can i access array elements with ohai?
[2012-05-21 13:36:09 -0400] ukio: e.g. `ohai network/interfaces/eth1/addresses[0]` does not work
[2012-05-21 13:37:10 -0400] yfeldblum: masterkorp, how are you running the queries?
[2012-05-21 13:37:29 -0400] yfeldblum: ukio, why not do it from ruby?
[2012-05-21 13:37:41 -0400] masterkorp: yfeldblum: not yeat running them, so i am looking for ideas/resources
[2012-05-21 13:38:22 -0400] yfeldblum: masterkorp, i'm not aware of any per se, but there's no reason you couldn't do it
[2012-05-21 13:38:45 -0400] yfeldblum: masterkorp, for ideas, you can look at https://github.com/opscode-cookbooks/database/blob/master/libraries/provider_database_mysql.rb
[2012-05-21 13:39:13 -0400] masterkorp: thanks
[2012-05-21 13:39:27 -0400] ukio: yfeldblum: that would be an idea :-)
[2012-05-21 13:39:31 -0400] ukio: i
[2012-05-21 13:40:25 -0400] ukio: so node['network']['interfaces']['eth1']['addresses'][0] should work?
[2012-05-21 13:41:07 -0400] ukio: i was basically playing around with ohai in order to find out the path that i have to use in the node object in my recipe...
[2012-05-21 13:41:14 -0400] BryanWB_: ukio: y
[2012-05-21 13:41:24 -0400] BryanWB_: ukio: use pry ftw
[2012-05-21 13:41:29 -0400] BryanWB_: inside shef
[2012-05-21 13:43:04 -0400] laurent\: node['network']['interfaces']['eth1']['addresses'].first maybe
[2012-05-21 13:43:17 -0400] laurent\: but i doubt [0] will work :)
[2012-05-21 13:45:35 -0400] yfeldblum: ukio, i don't think that the queryability support in the ohai CLI is the top priority for ohai ...
[2012-05-21 13:46:02 -0400] yfeldblum: ukio, but yes that should work when done from a chef recipe
[2012-05-21 13:48:39 -0400] yfeldblum: ohai = Ohai::System.new ; ohai.all_plugins ; ohai.data
[2012-05-21 13:54:24 -0400] ukio: yfeldblum, BryanBW: thanks!
[2012-05-21 14:07:44 -0400] geekbri: If I am calling another knife plugin which is rescuing an exception, is there anyway to determine if it has failed or not?
[2012-05-21 14:08:05 -0400] geekbri: Or I'm pretty much boned if it catches an exception and exits because of it.
[2012-05-21 14:09:32 -0400] yfeldblum: geekbri, can you give some more details?
[2012-05-21 14:10:13 -0400] geekbri: yfeldblum: well basically I am writing this plugin of my own, and it launches a bunch of threads which are calling the knife ec2 plugin.  If one of those threads gets a timeout error, I have no way of knowing that the particular one did not come up.
[2012-05-21 14:10:35 -0400] yfeldblum: geekbri, why not?
[2012-05-21 14:10:58 -0400] geekbri: it seems like an exception is thrown and then it is rescued and the knife ec2 plugin just causes it to exit.
[2012-05-21 14:11:09 -0400] geekbri: Maybe I'm just skipping over some obvious solution.
[2012-05-21 14:11:29 -0400] geekbri: I'm not ruby as a first language yet ;)
[2012-05-21 14:11:33 -0400] geekbri: IM RSL
[2012-05-21 14:11:43 -0400] geekbri: (well much more than second but still)
[2012-05-21 14:12:37 -0400] geekbri: The issue being, i launched lets say 4 threads to launch 4 servers.. if One of them suffers some sort of error (say an IOError) it causes my entire knife plugin to exit
[2012-05-21 14:13:08 -0400] geekbri: a good example being, I called knife ec2 create 4 times, if i go to the AWS console and terminate one of the instances mid bootstrap, my plugin exits.... leaving me to wonder whats going on the remaining instances.
[2012-05-21 14:13:19 -0400] yfeldblum: geekbri, how are you running the knife-ec2 plugin?
[2012-05-21 14:13:31 -0400] geekbri: calling it from my own plugin with the run method
[2012-05-21 14:14:34 -0400] yfeldblum: geekbri, can you gist example code?
[2012-05-21 14:14:42 -0400] geekbri: yfeldblum: I sure can, just give me a moment
[2012-05-21 14:16:00 -0400] geekbri: yfeldblum: https://gist.github.com/2762537
[2012-05-21 14:16:21 -0400] Fiquett: Anyone had trouble with the ufw recipe? Every time my clients run the firewall gets shut down because the comparison between old_state and new_state is different (sorted, and the way the rules's info is sorted.. Sometimes action,port,source, then port,source,action) and it thinks it needs to update every time.
[2012-05-21 14:16:53 -0400] geekbri: yfeldblum: an important note is that I have patched knife server ec2 to make the "servers" field an accessor so I can snag information about the servers that are reated.
[2012-05-21 14:16:55 -0400] geekbri: created.
[2012-05-21 14:17:03 -0400] geekbri: I will eventually submit that as a patch as well.
[2012-05-21 14:17:10 -0400] geekbri: sorry reader, not accessor
[2012-05-21 14:19:45 -0400] yfeldblum: geekbri, well it looks like you're not rescuing any exceptions, and fog raises if it can't create the server
[2012-05-21 14:19:47 -0400] yfeldblum: geekbri, https://github.com/fog/fog/blob/master/lib/fog/core/model.rb#L52-66
[2012-05-21 14:20:15 -0400] geekbri: yfeldblum: I had been, I removed it.
[2012-05-21 14:20:32 -0400] geekbri: yfeldblum: as it seemed like it was not executing on my rescues, but perhaps I had them in the wrong place
[2012-05-21 14:20:36 -0400] yfeldblum: geekbri, ah ok what does it look like with exception handling?
[2012-05-21 14:21:16 -0400] geekbri: yfeldblum: yeah sorry im doing a lot of tinkering at the moment :-P  I just started trying to handle errors today.... So i've been adding and removing things like made to attempt to make it work
[2012-05-21 14:22:26 -0400] yfeldblum: geekbri, on an unrelated note, this line is wrong: servers << ec2_create.server
[2012-05-21 14:22:40 -0400] geekbri: yfeldblum: seemed to be working for me
[2012-05-21 14:22:52 -0400] yfeldblum: geekbri, since you're using threads, you need to syncronize access to, and especially mutation of, all shared objects
[2012-05-21 14:23:01 -0400] geekbri: yeah, ill throw a mutex on there.
[2012-05-21 14:23:36 -0400] geekbri: that right now... is the least of my problems :)
[2012-05-21 14:25:50 -0400] ssd7: Ohai Chefs!
[2012-05-21 14:27:29 -0400] yfeldblum: geekbri, you can also use Thread#value: `threads.each(&:join) ; servers = threads.map(&:value)` or some such
[2012-05-21 14:29:02 -0400] yfeldblum: geekbri, also yeah you will want to wrap `ec2_create.run` specifically with exception handling
[2012-05-21 14:29:47 -0400] geekbri: yfeldblum: Yes that would work, most of this is currently just for debugging as I'm trying to see what kind of information I can pull out so I can handle a couple different potential error conditions
[2012-05-21 14:31:19 -0400] geekbri: yfeldblum: i think it makes sense to use the map(&:value), I'll just have to patch the knife ec2 plugin to return server instead of using it as a reader
[2012-05-21 14:31:20 -0400] yfeldblum: geekbri, you could also probably pull out the construction & configuration of the Chef::Knife::Ec2ServerCreate instances from inside the thread to outside the thread
[2012-05-21 14:31:35 -0400] geekbri: yfeldblum: I had it that way originally
[2012-05-21 14:31:56 -0400] yfeldblum: geekbri, i'd keep the patch you already have exposing #server and return #server from the thread
[2012-05-21 14:32:01 -0400] geekbri: yfeldblum: I was simply modifying parts of it then calling run on it, but then you are accessing 1 object in multiple threads.
[2012-05-21 14:32:16 -0400] yfeldblum: geekbri, nah make 4 separate instances
[2012-05-21 14:32:28 -0400] yfeldblum: geekbri, or however many servers you're creating at once
[2012-05-21 14:32:36 -0400] geekbri: yfeldblum: so pulling it out would purely be to create less complexity in the thread?
[2012-05-21 14:32:42 -0400] yfeldblum: geekbri, exactly
[2012-05-21 14:32:57 -0400] yfeldblum: geekbri, so you're only sticking into the thread that which strictly needs to be in the thread
[2012-05-21 14:33:15 -0400] geekbri: yfeldblum: Let me see if i can wrap the ec2_create.run in a rescue
[2012-05-21 14:33:34 -0400] geekbri: or rather, if it will bother doing anything :)
[2012-05-21 14:33:36 -0400] yfeldblum: geekbri, avoiding any potential issues like a thread failing because your code setting up the ec2_create instance & creating it was wrong
[2012-05-21 14:34:35 -0400] geekbri: yfeldblum: yeah, I will do that and I will pull the mutex out so that the thread simply returns the "server" value so that I dont have to worry about the mutex slowing things down
[2012-05-21 14:34:49 -0400] geekbri: yfeldblum: I can simply wrap the .run call in "begin rescue end" right?
[2012-05-21 14:35:10 -0400] yfeldblum: geekbri, yes
[2012-05-21 14:35:47 -0400] yfeldblum: geekbri, you can even write `ec2_create.run rescue nil`
[2012-05-21 14:36:11 -0400] yfeldblum: geekbri, that's small, although it throws away the exception, which you probably want to hang onto so you can inspect it later
[2012-05-21 14:37:56 -0400] geekbri: yfeldblum: I will make the other edits later, but does this look correct for rescuing from errors? https://gist.github.com/2762537
[2012-05-21 14:39:39 -0400] yfeldblum: geekbri, yeah (although you may want to synchronize the calls to `puts` too)
[2012-05-21 14:40:50 -0400] yfeldblum: geekbri, typically i would `synchronize { servers << e }` in the rescue block, and then after joining all the threads, check which items in `servers` is an exception and which is a `Fog::Ec2::Compute` instance
[2012-05-21 14:41:08 -0400] yfeldblum: geekbri, but that may be more than necessary
[2012-05-21 14:42:13 -0400] geekbri: now lets see if it actually catches the exception, because im pretty sure I tried this and it didnt work
[2012-05-21 14:43:10 -0400] yfeldblum: geekbri, actually here's how to print exceptions: https://gist.github.com/90817a0115014cc946e7
[2012-05-21 14:43:26 -0400] geekbri: i suppose the backtrace would be useful
[2012-05-21 14:45:12 -0400] yfeldblum: geekbri, heh yes always get the backtrace
[2012-05-21 14:45:22 -0400] geekbri: :)
[2012-05-21 14:45:53 -0400] martinisoft: what's a good practice to use for role data when using the opscode platform? pure ruby or JSON?
[2012-05-21 14:47:19 -0400] yfeldblum: martinisoft, for me, it depends: is this particular role X considered part of the codebase? then ruby; is that particular role Y considered to be data and not code? then JSON
[2012-05-21 14:49:14 -0400] martinisoft: think mine falls more into the data category for this role
[2012-05-21 14:49:38 -0400] martinisoft: so the advantage of going the ruby route is purely for the fact its ruby?
[2012-05-21 14:49:44 -0400] yfeldblum: martinisoft, i also prefer to put code into git and not to put data into git
[2012-05-21 14:49:58 -0400] geekbri: yfeldblum: thanks, I was able to catch the exception this time.  I am still learning Ruby so I must have just made some strange error when trying to catch the exception
[2012-05-21 14:50:19 -0400] martinisoft: yeah, I am making this stuff in my chef-repo so I don't mind checking it in
[2012-05-21 14:50:21 -0400] yfeldblum: martinisoft, so my preference would be everything in git is code and ruby, and if it's data, then it's json and not in git (although it might be backed up)
[2012-05-21 14:50:49 -0400] martinisoft: gotcha
[2012-05-21 14:51:07 -0400] martinisoft: I think I wont mind storing JSON there since I'd like to have my own backup outside the opscode platform
[2012-05-21 14:52:37 -0400] yfeldblum: martinisoft, anyway that's my heretical preference; if you ask others, they might say to stick code & data in git, and to do all roles in ruby or to do all roles in json or who knows :P
[2012-05-21 14:59:17 -0400] martinisoft: cool, thanks :)
[2012-05-21 14:59:35 -0400] martinisoft: just wondering if there is any advantage to one over the other since I am using the opscode platform
[2012-05-21 15:00:07 -0400] erikh: rescuing exception is a really bad practice
[2012-05-21 15:00:24 -0400] erikh: it rescues OutOfMemoryError, SystemExitError, a number of others.
[2012-05-21 15:01:00 -0400] martinisoft: why that?
[2012-05-21 15:01:07 -0400] erikh: I just explained.
[2012-05-21 15:01:27 -0400] martinisoft: well you can pass it on, just re-raise within the exception :)
[2012-05-21 15:01:53 -0400] martinisoft: but then again, don't know why one would want data-driven stuff to capture an exception anyway
[2012-05-21 15:05:02 -0400] yfeldblum: erikh, patched https://gist.github.com/90817a0115014cc946e7
[2012-05-21 15:05:19 -0400] yfeldblum: martinisoft, that was probably directed to me
[2012-05-21 15:07:34 -0400] erikh: aye
[2012-05-21 15:07:59 -0400] martinisoft: ah :)
[2012-05-21 15:08:23 -0400] erikh: https://gist.github.com/9358cc2e12c7acc3e071
[2012-05-21 15:08:24 -0400] erikh: like this.
[2012-05-21 15:08:44 -0400] erikh: Exception is the base class for a lot of things you really don't want to catch
[2012-05-21 15:08:59 -0400] erikh: SyntaxError is another one :)
[2012-05-21 15:10:00 -0400] martinisoft: would recommend Avdi Grimm's book Exceptional Ruby about that :)
[2012-05-21 15:17:17 -0400] hoover_damm: I wonder if it would make my memory suck less
[2012-05-21 15:17:25 -0400] hoover_damm: about ruby
[2012-05-21 15:17:46 -0400] erikh: well, I hear there are exercises you can do to improve your memory
[2012-05-21 15:22:19 -0400] icoffey: whats the best way to shell escape arguments to be used in an execute resource?
[2012-05-21 15:22:52 -0400] erikh: ruby comes with a library called 'Shellwords'
[2012-05-21 15:22:59 -0400] erikh: it's pretty straightforward, but you should read the documentation for it.
[2012-05-21 15:25:45 -0400] icoffey: erikh: ty
[2012-05-21 15:27:48 -0400] kevmo: I have a UBUNTU 12.04 node that I am running "sudo chef-client" on and receive a [BUG] Segmentation fault error about 1/4 of the time that I run it.  Any ideas?  Full error message located here: https://gist.github.com/79b4b5521b20c49ba59b
[2012-05-21 15:31:55 -0400] cap10morgan: So is chef-full bootstrap not compatible with Ubuntu 12.04? I was under the impression it was for some reason...
[2012-05-21 15:32:23 -0400] yfeldblum: icoffey, the best way, really, is simply to spawn the process with an array of ARGV, rather than with a command line
[2012-05-21 15:32:40 -0400] cap10morgan: there doesn't appear to be a package for it on http://s3.amazonaws.com/opscode-full-stack/, for example.
[2012-05-21 15:32:50 -0400] yfeldblum: icoffey, however, you can shelljoin the array too and form an escaped string
[2012-05-21 15:35:49 -0400] icoffey: i see shelljoin double escaping chars
[2012-05-21 15:35:54 -0400] icoffey: => "argument var\\?able"
[2012-05-21 15:36:09 -0400] icoffey: anyone stumble across that before? expected?
[2012-05-21 15:37:38 -0400] yfeldblum: yes, that is how shelljoin works
[2012-05-21 15:38:01 -0400] yfeldblum: what was the input?
[2012-05-21 15:38:19 -0400] icoffey: irb(main):009:0> foo = Array['argument', 'var?able']
[2012-05-21 15:39:00 -0400] yfeldblum: yeah that's not double escaping, that's single escaping
[2012-05-21 15:39:31 -0400] yfeldblum: do `puts %w(argument var?able).shelljoin`
[2012-05-21 15:40:22 -0400] icoffey: argument var\?able
[2012-05-21 15:40:51 -0400] icoffey: which is what i would expect
[2012-05-21 15:41:08 -0400] yfeldblum: exactly
[2012-05-21 15:41:24 -0400] yfeldblum: and now do `%w(argument var?able).shelljoin`, which is the same thing without the `puts`
[2012-05-21 15:41:55 -0400] icoffey: => "argument var\\?able"
[2012-05-21 15:43:53 -0400] yfeldblum: exactly
[2012-05-21 15:44:13 -0400] yfeldblum: and try `puts "argument var\\?able"`
[2012-05-21 15:45:59 -0400] juliancdunn: does chef server require ruby 1.9?
[2012-05-21 15:46:31 -0400] martinisoft: I'd recommend 1.9 over 1.8
[2012-05-21 15:47:29 -0400] yfeldblum: juliancdunn, doesn't seem to
[2012-05-21 15:48:44 -0400] juliancdunn: yeah, I'm getting a weird error "INFO: HTTP Request Returned 500 Internal Server Error: undefined method `couchdb_rev=' for nil:NilClass"
[2012-05-21 15:49:14 -0400] martinisoft: 1.8 is EOL as of June 2013, no new patches starting next month
[2012-05-21 15:52:18 -0400] afallows: Is there an easy way to bootstrap a chef node as an admin client?
[2012-05-21 15:56:10 -0400] hoover_damm: afallows, likely you'll have to modify the client afterwards... why would you want that?
[2012-05-21 15:58:47 -0400] afallows: I'm interested in having a node which is able to programmatically update data bag values. It makes sense to make that node an AWS instance so that it's not relying on a local workstation, and I'm writing a recipe to create a node of that kind.
[2012-05-21 16:02:41 -0400] martinisoft: with respect to role attributes, should I use default or override ?
[2012-05-21 16:03:26 -0400] martinisoft: actually more specific, what is a good way to tell which to use?
[2012-05-21 16:09:33 -0400] jessicab: martinisoft - override attributes are used when you already have default attributes, such as in a cookbook, that you want to override
[2012-05-21 16:10:03 -0400] martinisoft: ah
[2012-05-21 16:10:26 -0400] martinisoft: so, I am configuring the chef_client cookbook, in my role I want to override then?
[2012-05-21 16:10:41 -0400] mattray: martinisoft: wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2012-05-21 16:10:46 -0400] hoover_damm: afallows, then you want to knife client edit that node to give it admin
[2012-05-21 16:10:58 -0400] hoover_damm: afallows, that's an action that generally won't be taken
[2012-05-21 16:12:39 -0400] martinisoft: yeah checking that wiki article out now, but its not exactly clear when its a good idea to jump to override
[2012-05-21 16:12:54 -0400] martinisoft: feels like I want normal attributes in a role
[2012-05-21 16:12:58 -0400] martinisoft: then override per node
[2012-05-21 16:13:10 -0400] yfeldblum: martinisoft, no, you do not want normal attributes in a role
[2012-05-21 16:13:24 -0400] yfeldblum: per-node attributes are set at normal level
[2012-05-21 16:14:04 -0400] martinisoft: so a role overrides any node attributes, would a node be allowed to override a role attribute?
[2012-05-21 16:14:36 -0400] martinisoft: according to precedence, role trumps node
[2012-05-21 16:14:58 -0400] martinisoft: wait nevermind, read the order wrong
[2012-05-21 16:15:01 -0400] martinisoft: :)
[2012-05-21 16:16:14 -0400] martinisoft: thank you yfeldblum
[2012-05-21 16:16:31 -0400] yfeldblum: no, override-level attributes override default-level and normal-level attributes, wherever they're defined
[2012-05-21 16:17:19 -0400] yfeldblum: as a general rule of thumb, you should always just use default-level attributes unless you know specifically how attributes & their precedences work *and* have a specific *need* for non-default attributes
[2012-05-21 16:17:43 -0400] martinisoft: yeah, I am configuring chef_client right now at the role level
[2012-05-21 16:18:00 -0400] martinisoft: setting the server_url to the opscode platform, etc
[2012-05-21 16:18:23 -0400] martinisoft: so does that make sense to override at the role level or should it go up to environment?
[2012-05-21 16:18:45 -0400] yfeldblum: martinisoft, environments are not "up" from roles
[2012-05-21 16:19:24 -0400] yfeldblum: martinisoft, role is fine
[2012-05-21 16:20:21 -0400] martinisoft: according to the precedence (reading it low to high) environment override goes over role, thats why I think "up"
[2012-05-21 16:21:16 -0400] yfeldblum: martinisoft, environment doesn't make any sense for this
[2012-05-21 16:21:43 -0400] yfeldblum: martinisoft, it cannot possibly change per-environment, so why put it there?
[2012-05-21 16:21:56 -0400] martinisoft: gotcha, feels right to use a role instead of an environment
[2012-05-21 16:27:33 -0400] martinisoft: thanks for the help yfeldblum, still working out all the terminology in my head for chef :)
[2012-05-21 16:28:06 -0400] yfeldblum: martinisoft, no prob
[2012-05-21 16:28:29 -0400] shuvo: ohai chefs
[2012-05-21 16:28:40 -0400] cheeseplus: hai
[2012-05-21 16:31:23 -0400] yfeldblum: howdy
[2012-05-21 16:32:42 -0400] BryanWB: ohai chefs!
[2012-05-21 16:33:06 -0400] c_t: ohai
[2012-05-21 16:34:45 -0400] shuvo: Hai BryanWB :-D
[2012-05-21 16:34:54 -0400] geekbri: ohaithere
[2012-05-21 16:35:25 -0400] BryanWB: shuvo, hey dude, meaning to work on your pull request tonigth, need to add tests to java cookbook first
[2012-05-21 16:36:23 -0400] shuvo: np, BryanWB. Looking forward to comsuming some chefconf contents from foodfightshow myself ;-)
[2012-05-21 16:36:31 -0400] BryanWB: shuvo, kewl ;)
[2012-05-21 16:37:23 -0400] shuvo: BryanWB, are you in CA this week? "Beer on me" offer still stands :-D
[2012-05-21 16:37:53 -0400] BryanWB: shuvo, unfortunately no, tks for the offer, i love CA tho, can't believe i left
[2012-05-21 16:52:31 -0400] atomic-penguin: how does one chefignore a dot file like .gitignore
[2012-05-21 16:53:19 -0400] yfeldblum: atomic-penguin, not sure what you mean by that?
[2012-05-21 16:53:50 -0400] atomic-penguin: yfeldblum, chefignore doesn't seem to respect dot files like .gitignore
[2012-05-21 16:54:26 -0400] atomic-penguin: Tried .gitignore \.gitignore and */.gitignore*
[2012-05-21 16:55:15 -0400] atomic-penguin: yfeldblum, it keeps knife from uploading non-cookbook files, if you're unfamiliar with it
[2012-05-21 16:57:43 -0400] martinisoft: w00t got my first successful chef-client run completed :D
[2012-05-21 16:58:20 -0400] yfeldblum: atomic-penguin, yeah, maybe that's because they screwed up the flags? http://ruby-doc.org/core-1.8.7/File.html#method-c-fnmatch-3F and https://github.com/opscode/chef/blob/master/chef/lib/chef/cookbook/chefignore.rb#L38-40
[2012-05-21 17:01:46 -0400] atomic-penguin: yfeldblum, so *.gitignore should work by the ruby docs
[2012-05-21 17:03:32 -0400] yfeldblum: atomic-penguin, in irb/pry, try File.fnmatch? on the chefignore pattern and the filename and see what works
[2012-05-21 17:04:58 -0400] cnf: i wish chef had an anonymous mode...
[2012-05-21 17:05:08 -0400] atomic-penguin: cnf, anonymous mode?
[2012-05-21 17:05:27 -0400] cnf: atomic-penguin: yeah, so connecting doesn't insist in having a unique client entry
[2012-05-21 17:05:52 -0400] atomic-penguin: cnf, chef-solo does that, does it not?
[2012-05-21 17:06:04 -0400] cnf: atomic-penguin: think "this is testing, this machine will be destroyed in an hour, and rebuild in 2"
[2012-05-21 17:06:09 -0400] yfeldblum: cnf, you don't need a unique client
[2012-05-21 17:06:31 -0400] cnf: yfeldblum: ...
[2012-05-21 17:06:33 -0400] yfeldblum: cnf, i think you can make a shared client and drop the client privkey instead of the validation key
[2012-05-21 17:06:48 -0400] yfeldblum: and set up the /etc/chef/client.rb to use that client
[2012-05-21 17:06:58 -0400] cnf: yfeldblum: yeah, i though so, but everyone seem to tell me this is a Bad Idea ^^;
[2012-05-21 17:07:01 -0400] yfeldblum: i'm guessing here, but you can try it
[2012-05-21 17:07:05 -0400] yfeldblum: why is it a bad idea?
[2012-05-21 17:07:08 -0400] cnf: idno
[2012-05-21 17:07:13 -0400] ssd7: yfeldblum: Unfortunately, I think there are a handful of lines in Chef::Rest and a few other places that enforce client_name=node_name
[2012-05-21 17:07:16 -0400] cnf: still have to test it
[2012-05-21 17:07:36 -0400] yfeldblum: ssd7, should delete those lines :P
[2012-05-21 17:07:46 -0400] yfeldblum: cnf, can monkey-patch away those lines :P
[2012-05-21 17:08:29 -0400] ssd7: Things like this: https://github.com/opscode/chef/blob/master/chef/lib/chef/rest.rb#L57
[2012-05-21 17:08:31 -0400] cnf: yeah, a "this is a test machine" mode would be nice
[2012-05-21 17:08:49 -0400] cnf: a "i'm that node, i don't need a client" kind of setting
[2012-05-21 17:09:11 -0400] cnf: i'm thinking things like vagrant etc here
[2012-05-21 17:09:42 -0400] ssd7: cnf: Ah, so you want to be able to turn off authentication altogether
[2012-05-21 17:10:07 -0400] cnf: ssd7: while that would suit me, maybe a simple "i'm ok to read here" mode, yes
[2012-05-21 17:11:13 -0400] cnf: ssd7: when i add a client, i auth anyway, so why add a new client for a temporary resource?
[2012-05-21 17:11:26 -0400] yfeldblum: or gen random hostnames and clean up old clients
[2012-05-21 17:11:38 -0400] cnf: yfeldblum: but that just isn't practical
[2012-05-21 17:11:53 -0400] cnf: yfeldblum: not every dev has knife installed etc, nor should they even have access
[2012-05-21 17:12:09 -0400] cnf: they just need to up their vm, and have it resemble a live machine
[2012-05-21 17:13:57 -0400] yfeldblum: ahhh  ... yeah distribute built boxes
[2012-05-21 17:14:04 -0400] cnf: ssd7: does this make any sense to you? ^^;
[2012-05-21 17:14:16 -0400] cnf: yfeldblum: sorry?
[2012-05-21 17:14:22 -0400] yfeldblum: vagrant right?
[2012-05-21 17:14:32 -0400] cnf: yes, in my example
[2012-05-21 17:15:50 -0400] yfeldblum: well in that example, create a "golden image" vagrant box, starting with some base box and then running chef on it, stick the golden image somewhere, and have devs download that and use that as their vagrant box
[2012-05-21 17:16:03 -0400] cnf: yfeldblum: and what does that solve?
[2012-05-21 17:16:49 -0400] yfeldblum: only run chef to create the golden image, then remove it (rm -rf /opt/opscode); chef doesn't run on dev boxes that were created from the golden image
[2012-05-21 17:16:50 -0400] shuvo: yfeldblum, your answer to cnf is interesting. I have a vagrant teardown function that removes the client from the chef server. are you saying  can, instead, share a key across VMs? that would be awesome!
[2012-05-21 17:17:10 -0400] cnf: yfeldblum: and then 3 days later, the setup changes a bit
[2012-05-21 17:17:29 -0400] cnf: yfeldblum: you want me to rebuild the "master", and have all the devs download new bug binary boxes?
[2012-05-21 17:17:44 -0400] cnf: this is what CM is intended for...
[2012-05-21 17:18:05 -0400] yfeldblum: cnf, there are many strategies
[2012-05-21 17:18:21 -0400] yfeldblum: cnf, i don't think CM is intended for throwaway dev boxes
[2012-05-21 17:18:31 -0400] cnf: yfeldblum: says who?
[2012-05-21 17:18:36 -0400] evalencia: quick bootstrap question, where does the bootstrap process put the service file? I dont see anything in /etc/sv, /srv, and there is no init script, this is the first time using the bootstrap process.
[2012-05-21 17:18:38 -0400] yfeldblum: cnf, me :P
[2012-05-21 17:18:45 -0400] cnf: ah well, i do not agree
[2012-05-21 17:19:02 -0400] cnf: i say it is a perfect fit for it
[2012-05-21 17:19:11 -0400] yfeldblum: cnf, i think CM is good for persistent things, even if they're temporarily persistent
[2012-05-21 17:19:19 -0400] yfeldblum: cnf, it's all in how you view it
[2012-05-21 17:19:31 -0400] cheeseplus: I feel it can be applied to both but generally* it's seen as a benefit to larger, production systems
[2012-05-21 17:19:39 -0400] ranjibd: hola...
[2012-05-21 17:20:11 -0400] cheeseplus: I'm of the "AUTOMATE ALL THE THINGS" camp so both make sense
[2012-05-21 17:20:37 -0400] yfeldblum: cnf, e.g., cycle apparently builds multi-k node clusters that run for less than a day, and uses chef ... and it's a good fit (they also have a bit more automation around chef)
[2012-05-21 17:20:40 -0400] cnf: when things are done manually, faults are imminent
[2012-05-21 17:21:10 -0400] ranjibd: do it,,,
[2012-05-21 17:21:13 -0400] shuvo: cnf, +1
[2012-05-21 17:21:23 -0400] cnf: ssd7: is this a feature that could make its way into chef(-hosted)?
[2012-05-21 17:21:29 -0400] shuvo: yfeldblum, your answer to cnf is interesting. I have a vagrant teardown function that removes the client from the chef server when I 'destroy' it. are you saying I can, instead, share a key across VMs? that would be awesome! How do I go about it?
[2012-05-21 17:21:31 -0400] cheeseplus: cnf: for sure but you prioritize features for the largest userbase ;)
[2012-05-21 17:21:53 -0400] cnf: cheeseplus: i'm not asking for things that work now to be taken away...
[2012-05-21 17:22:16 -0400] yfeldblum: shuvo, i was suggesting it, bu ssd7 says that isn't going to work because, while it would be nice, it's not currently supported and the code makes assumptions that would be broken
[2012-05-21 17:22:36 -0400] shuvo: yfeldblum, :-( I WAS happy for a moment
[2012-05-21 17:22:38 -0400] yfeldblum: cnf, you can build automation around fetching the latest boxes
[2012-05-21 17:22:48 -0400] cheeseplus: cnf: oh certainly not
[2012-05-21 17:22:59 -0400] cnf: yfeldblum: i know I _can_
[2012-05-21 17:23:05 -0400] cnf: yfeldblum: i'm saying i should not have to
[2012-05-21 17:23:51 -0400] shuvo: yfeldblum, cnf: let's think what the "issue" is. cnf does not want to go through the hassle of deleting clients and nodes from the chef server once he destroys it from vagrant. My solution is to have a vagrant teardown function that removes the client from the chef server when I 'destroy' it.
[2012-05-21 17:24:30 -0400] ssd7: cnf: Regarding having this feature on Hosted Chef.  If the right changes were made on the chef-client side to allow a client_name != node_name, then I think you could get most of the way there with the existing ACL system of Hosted Chef and a single shared "read-only" key
[2012-05-21 17:24:36 -0400] cnf: shuvo: which gives your devs too much access (and requires them to have knife etc installed)
[2012-05-21 17:24:40 -0400] yfeldblum: shuvo, also, cnf is facing the issue where there may be many boxes with the same node-name & client-name
[2012-05-21 17:24:52 -0400] cnf: yfeldblum: indeed
[2012-05-21 17:25:14 -0400] shuvo: yfeldblum, that is no problem. the hostname can be changed depending on which machine is using it
[2012-05-21 17:25:48 -0400] cnf: ssd7: so it would create multiple clients, but with the same node, on the -server?
[2012-05-21 17:25:56 -0400] cnf: ssd7: or am i misunderstanding you?
[2012-05-21 17:26:46 -0400] yfeldblum: can also distribute a Vagrantfile with a shell provisioner which fetches the latest repo & runs chef-solo
[2012-05-21 17:27:23 -0400] ssd7: cnf: Well, I think you would have 1 read-only client that you would distribute to all developer machines.  Whether you have 1 or many nodes would be up to your setup.
[2012-05-21 17:27:36 -0400] shuvo: cnf, I want to understand why you are worried about giving your devs access to temporal boxes? is the chef server you are going to use the same server that works with your nodes in production too?
[2012-05-21 17:27:44 -0400] cnf: yfeldblum: which, again assumes a lot of extra stuff installed client side (which will often be windows machines), and gives me extra work
[2012-05-21 17:28:26 -0400] yfeldblum: cnf, no, the shell provisioner in vagrant runs in the context of the guest
[2012-05-21 17:28:27 -0400] cnf: ssd7: ah, so make it work of having x machines identify as the same client, basically?
[2012-05-21 17:28:41 -0400] yfeldblum: cnf, the only assumption it makes is that the dev runs `vagrant up`
[2012-05-21 17:29:27 -0400] ssd7: cnf: Yeah.
[2012-05-21 17:29:58 -0400] cnf: ssd7: that would be great, if i could get that to work
[2012-05-21 17:30:17 -0400] ssd7: Like I said, I think it will still require patches to Chef at this point
[2012-05-21 17:30:23 -0400] cnf: hmm
[2012-05-21 17:30:37 -0400] cnf: if you think so, then i'm not sure how it works :P
[2012-05-21 17:31:43 -0400] cnf: shuvo: and of course, i'm trying to avoid duplication of effort, not create it
[2012-05-21 17:31:44 -0400] shuvo: cnf, I want to understand why you are worried about giving your devs access to temporal boxes? is the chef server you are going to use the same server that works with your nodes in production too?
[2012-05-21 17:31:57 -0400] cnf: and stop repeating lines, please
[2012-05-21 17:32:08 -0400] cnf: irc gets a bit async, sometimes :P
[2012-05-21 17:32:56 -0400] nob: Greetings!
[2012-05-21 17:33:52 -0400] cnf: i'm looking at both chef and puppet atm, and chef-hosted is a _huge_ incentive to go with chef.
[2012-05-21 17:35:04 -0400] nob: Has anyone ever used Expect for provisioning machines?
[2012-05-21 17:35:27 -0400] nob: We use Chef, but recently I came across some old Expect docs
[2012-05-21 17:35:53 -0400] itwasntandy: nob: run away
[2012-05-21 17:35:59 -0400] nob: haha
[2012-05-21 17:36:01 -0400] shuvo: ha ha
[2012-05-21 17:36:13 -0400] shuvo: nob, if you are happy with Expect, use fabric instead. people here meh any ssh tool :-D
[2012-05-21 17:36:21 -0400] itwasntandy: you're giving me nightmares just reminding me of hell in a previous life
[2012-05-21 17:36:42 -0400] nob: Yeah I was just curious
[2012-05-21 17:37:12 -0400] nob: Was it the Chef of its day?
[2012-05-21 17:38:48 -0400] shuvo: not at all. think capistrano/fabric
[2012-05-21 17:39:19 -0400] shuvo: chef gurus, I need to have my own in house DNS service for chef provisioned nodes. What lightweight, low maintenance DNS server can I run on my chef server so all provisioned nodes can do DNS lookups from it? max 72 nodes need be served
[2012-05-21 17:39:31 -0400] cnf: shuvo: dnsmasq
[2012-05-21 17:39:32 -0400] holoway: expect was the goods
[2012-05-21 17:39:37 -0400] holoway: once upon a time :)
[2012-05-21 17:39:39 -0400] yfeldblum: /etc/hosts
[2012-05-21 17:40:07 -0400] shuvo: yfeldblum, no no. /etc/hosts updating would either require a chef run OR capistrano/fabric
[2012-05-21 17:40:28 -0400] cnf: shuvo: dnsmasq, really :P
[2012-05-21 17:40:36 -0400] yfeldblum: shuvo, one way of using chef is to run it periodically, e.g. every 30 minutes
[2012-05-21 17:41:28 -0400] kindsol: ohai!  Still on a high from ChefConf!!
[2012-05-21 17:41:43 -0400] shuvo: cnf, I like it. thanks!
[2012-05-21 17:41:48 -0400] cnf: np
[2012-05-21 17:41:54 -0400] geekbri: theres actually a cookbook out there called etc hosts awareness
[2012-05-21 17:42:15 -0400] geekbri: http://community.opscode.com/cookbooks/hosts-awareness
[2012-05-21 17:42:21 -0400] kindsol: are any of the ChefConf slide decks available online?
[2012-05-21 17:42:35 -0400] shuvo: yfeldblum, I like running chef as daemon, but I am essing around and some recepies error out and chef runs as a daemon no more :-D
[2012-05-21 17:42:57 -0400] nathenharvey_: kindsol:  here's a list in process https://github.com/foodfight/showz/blob/master/chefconf_slides.md
[2012-05-21 17:43:01 -0400] holoway: kindsol: some are - you can see some of the talks here http://www.youtube.com/user/Opscode
[2012-05-21 17:43:14 -0400] holoway: and nathenharvey_ has the total list :)
[2012-05-21 17:43:14 -0400] holoway: jinx
[2012-05-21 17:43:21 -0400] shuvo: isn't hosts-awareness author hoover_damm?
[2012-05-21 17:43:30 -0400] kindsol: awesome!!
[2012-05-21 17:43:34 -0400] kindsol: thanks, guys
[2012-05-21 17:43:46 -0400] holoway: kindsol: more videos coming - the whole show as recorded
[2012-05-21 17:43:51 -0400] holoway: they'll trickle in as they are edited
[2012-05-21 17:43:54 -0400] kindsol: sweet
[2012-05-21 17:43:58 -0400] nathenharvey_: pull requests are welcome if anyone knows of other slides / videos :)
[2012-05-21 17:44:20 -0400] kindsol: how about the conf intro?  "The revolution will not be televised..."
[2012-05-21 17:44:29 -0400] shuvo: oh man, I would wait for the video feed of http://www.slideshare.net/temujin9/chefconf-2012
[2012-05-21 17:44:42 -0400] kindsol: That was super cool
[2012-05-21 17:44:45 -0400] cheeseplus: kindsol: there is a github repo with links, trying to find it now
[2012-05-21 17:45:12 -0400] kindsol: https://github.com/foodfight/showz/blob/master/chefconf_slides.md
[2012-05-21 17:45:19 -0400] kindsol: cheeseplus: thx
[2012-05-21 17:46:32 -0400] shuvo: thanks geekbri for that cookbook link
[2012-05-21 17:46:46 -0400] geekbri: shuvo: np.  I use it so if you have any issues feel free to poke me.
[2012-05-21 17:46:52 -0400] geekbri: the documentation is.... lacking :)
[2012-05-21 17:47:11 -0400] shuvo: geekbri, are you the author? do you have a fork of it?
[2012-05-21 17:47:26 -0400] geekbri: shuvo: I am not the author and I haven't needed to fork it.
[2012-05-21 17:47:51 -0400] geekbri: it's been working well for me so far, although I wouldn't mind setting up my own bind server for dynamic updates.. there are forces that have fought against it :)
[2012-05-21 17:48:03 -0400] cheeseplus: kindsol: can't find it but if I do I'll ping you in channel
[2012-05-21 17:48:12 -0400] cheeseplus: I know it exists though
[2012-05-21 17:48:31 -0400] cheeseplus: oh wait, https://github.com/foodfight/showz/blob/master/chefconf_slides.md
[2012-05-21 17:48:32 -0400] cheeseplus: boom
[2012-05-21 17:48:56 -0400] shuvo: geekbri, the good thing about bind is it's usually there on all distros. the bad thing about it is that there are things like dnsmasq :-D
[2012-05-21 17:49:43 -0400] geekbri: Yeah, I'm used to setting up bind and all its crapiness.
[2012-05-21 17:49:49 -0400] miah: dnsmasq is pretty meh. bind is pretty a++ =)
[2012-05-21 17:50:03 -0400] cnf: nonsense
[2012-05-21 17:50:06 -0400] geekbri: I've heard djbdns is good, but i've never tried it myself.
[2012-05-21 17:50:08 -0400] miah: i was doing dynamic dns with bind in 2000
[2012-05-21 17:50:09 -0400] cnf: dnsmasq is awesome
[2012-05-21 17:50:16 -0400] miah: is easy
[2012-05-21 17:50:47 -0400] miah: so, how well does dnsmasq work on a network with 500+ servers?
[2012-05-21 17:50:54 -0400] geekbri: poorly.
[2012-05-21 17:50:56 -0400] kindsol: cheeseplus: thx.  but i don't see the intro video on there -- too bad.  I definitely want to show that off.  That dude sounded just like Samuel L. Jackson!
[2012-05-21 17:51:03 -0400] geekbri: or maybe a better phrase is "it doesn't"
[2012-05-21 17:51:08 -0400] miah: geekbri: exactly.
[2012-05-21 17:51:53 -0400] geekbri: All I know is, the oreilly bind book.... is big.
[2012-05-21 17:51:56 -0400] geekbri: :)
[2012-05-21 17:52:03 -0400] cnf: have you even tried that?
[2012-05-21 17:53:22 -0400] cnf: and even if it isn't as well suited as bind to server umptheen servers, the question was for 72 nodes max
[2012-05-21 17:55:47 -0400] cnf: and tbh, i'm reasonably confident it will deal with 500 clients
[2012-05-21 17:55:48 -0400] shuvo: cnf, thanks for the  pointer to dnsmasq! I use DD-WRT and by using it I actually can save some RAM on my routers! http://www.dd-wrt.com/wiki/index.php/DNSMasq_as_DHCP_server
[2012-05-21 17:56:04 -0400] miah: cnf, we tried it a few years back at salesforce and watched it fall over
[2012-05-21 17:56:14 -0400] cnf: shuvo: oh yeah, dnsmasq runs like a champ on those things
[2012-05-21 17:56:17 -0400] miah: its great for small home networks
[2012-05-21 17:56:23 -0400] miah: but then again, so is bind =)
[2012-05-21 17:56:30 -0400] cnf: miah: i have been using it all over, and never had problems with it
[2012-05-21 17:56:36 -0400] miah: interesting
[2012-05-21 17:56:39 -0400] cnf: i also use bind all over
[2012-05-21 17:56:39 -0400] geekbri: dnsmasq is a champ, just make sure you use the right tool for the right purpose.
[2012-05-21 17:57:07 -0400] cnf: i don't try screwing in a screw with a hammer, and i don't try hammering a nail with a screwdriver :P
[2012-05-21 17:57:12 -0400] cnf: geekbri: exactly
[2012-05-21 17:57:20 -0400] miah: bind book is big? http://www.zytrax.com/books/dns/
[2012-05-21 17:57:48 -0400] cnf: miah: and don't get me wrong, i think bind is awesome. just way overkill at times.
[2012-05-21 17:57:55 -0400] geekbri: Yeah I meant the oreilly one.
[2012-05-21 17:58:01 -0400] miah: cnf, for most people, yes definitely
[2012-05-21 17:58:09 -0400] miah: i still use it for simple things
[2012-05-21 17:58:21 -0400] geekbri: I guess maybe what i meant to say was, it was big but i wasnt necessarily good.
[2012-05-21 17:58:31 -0400] miah: geekbri: ya. i've read that too. but all technical books have lots of information that may not be relevent to your current task
[2012-05-21 17:58:51 -0400] geekbri: miah: a very fair statement.  I just found the book to be.... disappointing.
[2012-05-21 17:58:55 -0400] shuvo: miah, do you remember how many nodes were doing a lookup to the dnsmasq server at salesforce?
[2012-05-21 17:59:03 -0400] cnf: shuvo: also, if you wanna save ram/space on your router, check openwrt instead of dd- :P
[2012-05-21 17:59:09 -0400] miah: shuvo, it was a single pod, so less than 100
[2012-05-21 17:59:14 -0400] shuvo: hmm
[2012-05-21 17:59:17 -0400] cnf: heh
[2012-05-21 17:59:30 -0400] cnf: miah: i have done 100+ on cheap soho machines with dnsmasq
[2012-05-21 17:59:50 -0400] miah: geekbri: i've read several editions of the book in the past 10 years. it is big. but i definitely learned a lot from it
[2012-05-21 18:00:27 -0400] shuvo: I know bind works. I have used it before. how resource intensive is it compared to dnsmasq?
[2012-05-21 18:00:37 -0400] cnf: ha!
[2012-05-21 18:00:42 -0400] shuvo: dnsmasq reads pretty light from the docs
[2012-05-21 18:00:46 -0400] cnf: it is
[2012-05-21 18:00:53 -0400] geekbri: miah: I certainly picked up a lot from it, I couldn't help but feel disappointed though.  I read it twice in a row, and i certainly did get better at configuring bind.  I wish i could better articulate what I didnt really like about it... but it was long enough ago now that I don't recall my specific complaints.
[2012-05-21 18:01:00 -0400] miah: if you want to use a minimal dns server, i recommend maradns
[2012-05-21 18:02:26 -0400] miah: but if dnsmasq floats your boat, then use that
[2012-05-21 18:03:39 -0400] cnf: yes, it makes me horny
[2012-05-21 18:03:45 -0400] shuvo: I have no idea how light dnsmasq is compared to bind :-(
[2012-05-21 18:03:50 -0400] cnf: shuvo: very
[2012-05-21 18:03:55 -0400] cnf: shuvo: and when in doubt, try
[2012-05-21 18:04:04 -0400] cnf: <3 vagrantup.com
[2012-05-21 18:04:17 -0400] shuvo: ha ha, time is so precious. cannot be bought
[2012-05-21 18:06:36 -0400] miah: totally
[2012-05-21 18:07:21 -0400] shuvo: :-)
[2012-05-21 18:07:31 -0400] shuvo: I agree with what this guys said. totally: http://www.plug.org/pipermail/plug/2010-December/024490.html
[2012-05-21 18:07:56 -0400] shuvo: dnsmasq, here I come :-D http://www.enterprisenetworkingplanet.com/netsysm/article.php/3377351/In-a-DNS-bind-Get-Out-With-dnsmasq.htm for others as well
[2012-05-21 18:09:48 -0400] cnf: shuvo: also, if you use dnsmasq as dhcp server on your lan, the dns part knows about the hostnames of all the clients that have a lease
[2012-05-21 18:09:52 -0400] cnf: which is very nice on a lan
[2012-05-21 18:10:43 -0400] geekbri: yes
[2012-05-21 18:10:45 -0400] geekbri: fact.
[2012-05-21 18:11:04 -0400] shuvo: cnf, useful. bind can do that too, but I can see dnsmasq has that as a built in feature which I nice
[2012-05-21 18:15:17 -0400] shuvo: https://github.com/fstph/chef-dnsmasq. To make my chef server, the DNS server as well, I need to run this rcp on the chef server, and that requires me to run chef-client on my chef server. what can go wrong?
[2012-05-21 18:17:26 -0400] miah: i run chef-client on my chef server
[2012-05-21 18:18:22 -0400] shuvo: miah, it is as simple as running 'sudo chef-client' on my chef server?
[2012-05-21 18:18:55 -0400] miah: why wouldn't it be
[2012-05-21 18:19:02 -0400] shuvo: ot, listening to BryanWB interview ssd7 :-)
[2012-05-21 18:19:10 -0400] shuvo: cool!
[2012-05-21 18:19:22 -0400] BryanWB: shuvo,  kewl, he is a smart guy
[2012-05-21 18:19:36 -0400] miah: yes. BryanWB and ssd7 are cool guys
[2012-05-21 18:19:44 -0400] shuvo: of course. he gets statistics
[2012-05-21 18:19:49 -0400] BryanWB: lol, i am just around for free beer
[2012-05-21 18:19:52 -0400] cnf: shuvo: url?
[2012-05-21 18:20:17 -0400] jtimberman: ohai chefs.
[2012-05-21 18:20:18 -0400] shuvo: ffs12_4.mp3
[2012-05-21 18:20:24 -0400] jtimberman: everyone recovered from post chefconf? :)
[2012-05-21 18:20:25 -0400] cnf: shuvo: huh?
[2012-05-21 18:20:33 -0400] crucially: barely
[2012-05-21 18:20:33 -0400] miah: recovered? lol
[2012-05-21 18:20:50 -0400] miah: my legs _hurt_
[2012-05-21 18:20:56 -0400] cnf: shuvo: that's not a url...
[2012-05-21 18:21:10 -0400] shuvo: http://traffic.libsyn.com/foodfight/ffs12_4.mp3 I guess
[2012-05-21 18:21:17 -0400] shuvo: http://www.foodfightshow.org/
[2012-05-21 18:21:22 -0400] cnf: you guess? ^^;
[2012-05-21 18:21:34 -0400] shuvo: downloaded the whole site to my andriod
[2012-05-21 18:21:59 -0400] eherot: jtimberman: flew back on the red eye on US Air with a seat that wouldn't recline.  I don't think I'll ever recover.
[2012-05-21 18:22:07 -0400] shuvo: frys had this huge anniversary sale and they sold me a 32GB microsd card for $15
[2012-05-21 18:22:43 -0400] lusis: heh. wearing my ffs t-shirt today
[2012-05-21 18:22:47 -0400] lusis: my son loved it
[2012-05-21 18:22:48 -0400] cnf: where was this chefconf?
[2012-05-21 18:22:50 -0400] cnf: and when?
[2012-05-21 18:22:54 -0400] shuvo: last week
[2012-05-21 18:22:59 -0400] eherot: cnf: last week in Burlingame, CA
[2012-05-21 18:22:59 -0400] lusis: "It's got cooking guys throwing gears at each other!"
[2012-05-21 18:23:02 -0400] shuvo: all the cool guys were there
[2012-05-21 18:23:08 -0400] lusis: and some uncool ones
[2012-05-21 18:23:10 -0400] lusis: <----
[2012-05-21 18:23:22 -0400] shuvo: I was venting at socal the whole time x-(
[2012-05-21 18:23:22 -0400] lusis: but I made up for it by hanging around the cool kids
[2012-05-21 18:23:23 -0400] miah: also, some cool girls
[2012-05-21 18:23:28 -0400] eherot: definitely several D&D references made from the stage.
[2012-05-21 18:23:28 -0400] lusis: woops
[2012-05-21 18:23:30 -0400] lusis: that too ;)
[2012-05-21 18:23:34 -0400] lusis: sorry miah =P
[2012-05-21 18:23:34 -0400] shuvo: ha ha, you too miah
[2012-05-21 18:23:40 -0400] cnf: hey, i'm from europe
[2012-05-21 18:23:42 -0400] miah: hey, i wasnt the only girl there
[2012-05-21 18:23:45 -0400] cnf: and brand brand new to chef
[2012-05-21 18:23:46 -0400] lusis: I use 'guys' in the collective sense
[2012-05-21 18:23:47 -0400] miah: though it certainly felt like it at times
[2012-05-21 18:23:50 -0400] lusis: like "ya'll"
[2012-05-21 18:23:55 -0400] lusis: it's a redneck thing
[2012-05-21 18:23:57 -0400] cnf: (so new, i don't have it working yet)
[2012-05-21 18:24:04 -0400] miah: lusis: yes. its actually y'all fwiw. but i wouldnt expect rednecks to know how to spell ;)
[2012-05-21 18:24:16 -0400] lusis: BURN
[2012-05-21 18:24:24 -0400] shuvo: ;-)
[2012-05-21 18:24:42 -0400] lusis: I could pull a Tennessee hills thing and say "y'ins" instead
[2012-05-21 18:25:02 -0400] eherot: "all y'all"
[2012-05-21 18:25:07 -0400] lusis: hahaha
[2012-05-21 18:25:12 -0400] miah: i say 'all y'all'
[2012-05-21 18:25:24 -0400] miah: my most favorite thing to do is mix slang from all the places i live
[2012-05-21 18:25:24 -0400] eherot: that's pleural.
[2012-05-21 18:25:26 -0400] miah: +d
[2012-05-21 18:25:37 -0400] cnf: I say "gulle"
[2012-05-21 18:26:10 -0400] miah: anyways. chefconf = hella cool. i met lots of awesome people. talked lots of awesome shit. slept like.. maybe.. 8 hours?
[2012-05-21 18:26:28 -0400] cnf: miah: pft, you girls and your beauty sleepses!
[2012-05-21 18:26:35 -0400] lusis: miah: sounds about right
[2012-05-21 18:26:40 -0400] miah: lol. i mean 8 hours over the course of the 4 days
[2012-05-21 18:26:43 -0400] lusis: I think I managed 8 hours myself
[2012-05-21 18:26:45 -0400] lusis: the whole time
[2012-05-21 18:26:48 -0400] miah: ya
[2012-05-21 18:27:08 -0400] lusis: I was up at like 4:30AM every day
[2012-05-21 18:27:09 -0400] lusis: sigh
[2012-05-21 18:27:11 -0400] miah: i also had to drive back to the city, find parking, and then get comfy in bed before driving back to the conf
[2012-05-21 18:27:21 -0400] miah: several nights the sun was waking me up as i was trying to fall asleep
[2012-05-21 18:27:26 -0400] cnf: miah: yeah, men would have slept 7 and 1/2
[2012-05-21 18:27:27 -0400] lusis: hahaha
[2012-05-21 18:27:28 -0400] cnf: miah: tops!
[2012-05-21 18:27:30 -0400] eherot: lusis: this is why we stay in the conf hotel
[2012-05-21 18:27:40 -0400] eherot: got up at 7:30 to get to breakfast at 7:45.
[2012-05-21 18:27:52 -0400] miah: cnf: well. considering most of the _men_ went to bed before i _left_ the conf...
[2012-05-21 18:28:08 -0400] cnf: miah: i am teasing, if you had not noticed :P
[2012-05-21 18:28:12 -0400] miah: i know
[2012-05-21 18:28:25 -0400] miah: deadpan doesnt work well over irc
[2012-05-21 18:28:37 -0400] cnf: 10 years ago, i would have done that. now i just want my sleep, darnit!
[2012-05-21 18:28:42 -0400] knuckolls: hmm i sent a big message and it said it was too large to be sent
[2012-05-21 18:28:46 -0400] knuckolls: anyone see it?
[2012-05-21 18:29:02 -0400] cnf: i don't care when i go to bed, or when i get up, but 6 hours a night is a bit of a minimum
[2012-05-21 18:29:10 -0400] cnf: knuckolls: no
[2012-05-21 18:29:20 -0400] knuckolls: well i'll just try again. i've got a really perplexing problem with the rabbitmq cookbook that i believe i've isolated down to a problem with chef
[2012-05-21 18:29:39 -0400] knuckolls: if i want to change the erlang key, which i do, i have to restart rabbitmq. if i restart rabbitmq with /etc/init.d/rabbitmq-server restart or stop and start, it boots up fine and i've got all sorts of logs showing that it's alive up until the chef run ends
[2012-05-21 18:29:45 -0400] knuckolls: then you log in and the beam/rabbit processes are just gone. off. nothing in the logs. no notifications running at the end of the chef run.
[2012-05-21 18:30:08 -0400] cnf: i'm gonna try and actually get this stuff working some more
[2012-05-21 18:30:58 -0400] knuckolls: anyone willing to look at my cookbook to see if we can isolate it down to a bug in chef? i can log into the server and start it back up just fine.
[2012-05-21 18:31:11 -0400] lusis: sounds like a race condition
[2012-05-21 18:31:23 -0400] miah: uts more likely a bug in your cookbook / init script than chef itself.
[2012-05-21 18:31:27 -0400] knuckolls: i put a lot of sleeps in at the very end
[2012-05-21 18:31:29 -0400] lusis: also eff an erlang cookie
[2012-05-21 18:31:32 -0400] lusis: =P
[2012-05-21 18:31:42 -0400] miah: using 'sleep' is rarely a good thing
[2012-05-21 18:31:46 -0400] knuckolls: sleep 30
[2012-05-21 18:31:47 -0400] knuckolls:     /etc/init.d/rabbitmq-server status
[2012-05-21 18:31:49 -0400] knuckolls: just for testing
[2012-05-21 18:31:56 -0400] knuckolls: to make sure it's alive for a long time
[2012-05-21 18:32:02 -0400] knuckolls: it was up for minutes
[2012-05-21 18:32:09 -0400] knuckolls: chef run ends, bootstrap over, log in, processes gone
[2012-05-21 18:32:39 -0400] imeyer: lusis: racist
[2012-05-21 18:32:49 -0400] lusis: dixie fixie dawg
[2012-05-21 18:32:52 -0400] imeyer: LOL
[2012-05-21 18:32:58 -0400] lusis: ;)
[2012-05-21 18:33:22 -0400] imeyer: <3 lusis
[2012-05-21 18:33:55 -0400] lusis: <3 you too, princess
[2012-05-21 18:33:59 -0400] knuckolls: this problem isn't my cookbook, it's this one https://github.com/opscode-cookbooks/rabbitmq
[2012-05-21 18:34:03 -0400] knuckolls: on ubuntu 10.04
[2012-05-21 18:34:13 -0400] knuckolls: same problem. i've just been adding debugging to see what's up with it
[2012-05-21 18:34:56 -0400] cnf: shuvo: insane amounts of NOISE in that podcast ...
[2012-05-21 18:35:19 -0400] cnf: BryanWB: is that your show?
[2012-05-21 18:35:50 -0400] imeyer: [14:27] < miah> several nights the sun was waking me up as i was trying to fall asleep
[2012-05-21 18:35:51 -0400] jtimberman: imeyer: <3
[2012-05-21 18:35:55 -0400] imeyer: that's like, every night for me
[2012-05-21 18:36:02 -0400] imeyer: jtimberlake: get on im
[2012-05-21 18:36:03 -0400] imeyer: NOW
[2012-05-21 18:36:04 -0400] jtimberman: knuckolls: can you file a ticket at tickets.opscode.com?
[2012-05-21 18:36:13 -0400] knuckolls: jtimberman: i sure can.
[2012-05-21 18:36:21 -0400] jtimberman: pretty sure my name has no lake
[2012-05-21 18:36:24 -0400] jtimberman: knuckolls: thanks
[2012-05-21 18:36:28 -0400] imeyer: pond?
[2012-05-21 18:36:32 -0400] imeyer: jtimberpond ?
[2012-05-21 18:36:34 -0400] frjcook: I have a quick question for anyone on the list?  We are looking to add in a bunch of networking equipment to our chef infrastructure so Nagios can quickly monitor it, but we have a debate as to how to represent these types of client-less nodes.
[2012-05-21 18:36:40 -0400] jtimberman: knuckolls: there might be a ticket for that too, but i haven't looked.
[2012-05-21 18:36:48 -0400] cnf: BryanWB: LOTS of hiss :/
[2012-05-21 18:37:26 -0400] frjcook: Should they be created as nodes or should we shove the data into a databages and add in an additional search into the nagios::server recipe?
[2012-05-21 18:37:43 -0400] knuckolls: jtimberman: i looked a bit, but i'll dig further to see if something exists. i've kind of hit a wall. it's like for some reason the child beam process that's fired up is being killed upon the end of the chef run.
[2012-05-21 18:37:47 -0400] frjcook: Has anyone come across this issue?
[2012-05-21 18:37:52 -0400] knuckolls: but i'll just lay it all out in the ticket
[2012-05-21 18:42:50 -0400] miketheman: afallows: I recall you did something to move a long-running process out of an execute - did you ever figure that out?
[2012-05-21 18:44:52 -0400] jtimberman: frjcook: nodes
[2012-05-21 18:45:12 -0400] jtimberman: frjcook: In Chef, a "node" is a thing that represents a thing that is managed.
[2012-05-21 18:46:00 -0400] jtimberman: while operating systems running on servers of some kind are the most obvious example, that is not the only thing that can be a thing you care about managing.
[2012-05-21 18:57:27 -0400] frjcook: jtimberman: Unsually, I would agree.  But these "nodes" will never be managed by chef.  Ideally, we just need a way to represent the info to nagios.  I was wondering if there was a consensus on how to handle client-less nodes.  Creating nodes in chef seems to be the natural route, but the fact that they will never check in with the chef server or update their status seems to make them a different beastie to me.
[2012-05-21 18:57:50 -0400] frjcook: We can handle it either way, I was just wondering how the community felt about it.
[2012-05-21 19:12:56 -0400] mattray: frjcook: I've heard of folks using data bags to hold devices not managed by chef that they wanted to push into monitoring tools
[2012-05-21 19:26:20 -0400] cnf: m00
[2012-05-21 19:28:23 -0400] gchristensen: Hi, is there documentation on exactly what search() will return? also, what are tehse extra parameters here (from the application cookbook): search(:node, "role:#{app["database_master_role"][0]} AND chef_environment:#{node.chef_environment}", nil, 0, 1)
[2012-05-21 19:29:47 -0400] geekbri: gchristensen: http://wiki.opscode.com/display/chef/Search
[2012-05-21 19:30:02 -0400] geekbri: is pretty good.
[2012-05-21 19:30:24 -0400] miah: sort, start, rows?
[2012-05-21 19:30:27 -0400] miah: https://github.com/opscode/chef/blob/master/chef/lib/chef/search/query.rb
[2012-05-21 19:31:00 -0400] gchristensen: miah: those are the details I was looking for. thank you a lot
[2012-05-21 19:31:07 -0400] miah: ah ya. thats the fuzzy search stuff
[2012-05-21 19:33:01 -0400] geekbri: I dont know if its still true, but it says on the wiki that the fuzzy search is affected by a bug and does not work
[2012-05-21 19:33:11 -0400] geekbri: might want to update that if its not the case...
[2012-05-21 19:34:09 -0400] miah: ya. i've never used that.
[2012-05-21 19:34:14 -0400] geekbri: same.
[2012-05-21 19:43:19 -0400] gchristensen: okay, so is it possible to dump arbitrary data types within a recipe for testingZ?
[2012-05-21 19:52:21 -0400] miah: anything is possible when you have waffles
[2012-05-21 19:53:26 -0400] gchristensen: I do like waffles...
[2012-05-21 19:54:10 -0400] coderanger: miah: Since you tend to have good opinions on such things, any thoughts on my random, 2AM idea for a heartbeat LWRP? http://hastebin.com/buyehelera.ruby
[2012-05-21 19:55:38 -0400] cnf: wait, why does chef need java?
[2012-05-21 19:55:55 -0400] coderanger: cnf: chef-server or chef-client?
[2012-05-21 19:55:59 -0400] cnf: http://wiki.opscode.com/display/chef/Installing+Chef+Server < ?
[2012-05-21 19:56:09 -0400] coderanger: Yes, chef-server needs Java for Solr
[2012-05-21 19:56:35 -0400] cnf: o,O
[2012-05-21 19:56:45 -0400] cnf: wha?
[2012-05-21 19:56:56 -0400] cnf: why?
[2012-05-21 19:57:05 -0400] coderanger: The search indexes
[2012-05-21 19:57:31 -0400] cnf: O,o
[2012-05-21 19:57:35 -0400] cnf: and that doesn't work in ruby?
[2012-05-21 19:57:42 -0400] coderanger: both of the major players in the full-text index game are in Java, solr and elasticsearch
[2012-05-21 19:58:02 -0400] coderanger: What doesn't work in Ruby?
[2012-05-21 19:58:32 -0400] cnf: the bit that requires me to install yet another interpreter...
[2012-05-21 19:58:37 -0400] geekbri: sphinx ?
[2012-05-21 19:58:37 -0400] bawt: sphinx is out because of the potential index size
[2012-05-21 19:58:43 -0400] coderanger: :-)
[2012-05-21 19:59:00 -0400] coderanger: Sphinx also doesn't handle non-human-text as well
[2012-05-21 19:59:18 -0400] coderanger: Granted we have to jump through a lot of hoops to make it work with Solr, so thats probably not much of an argument anymore
[2012-05-21 19:59:21 -0400] geekbri: humans, who needs em!
[2012-05-21 19:59:23 -0400] miah: coderanger: linux-ha heartbeat?
[2012-05-21 19:59:23 -0400] geekbri: kill em all
[2012-05-21 19:59:25 -0400] cnf: what does sphinx have to do with java?
[2012-05-21 19:59:29 -0400] coderanger: miah: Yeah
[2012-05-21 19:59:48 -0400] coderanger: cnf: geekbri was asking about another FTS indexer tool called Sphinx
[2012-05-21 19:59:56 -0400] coderanger: which, I think is in C++ if I'm not mistaken
[2012-05-21 20:00:25 -0400] coderanger: Anyways, java is packaged nicely these days, I think solr runs on openjdk
[2012-05-21 20:00:43 -0400] cnf: i don't have java installed anywhere
[2012-05-21 20:00:49 -0400] coderanger: You will also need erlang for couch and rabbit while we are grousing about runtimes :D
[2012-05-21 20:00:51 -0400] cnf: and i like to keep it that way
[2012-05-21 20:01:06 -0400] geekbri: i tolerate java due to hadoop
[2012-05-21 20:01:34 -0400] shuvo: +1, geekbri
[2012-05-21 20:01:54 -0400] bdha: Wow. People still care what runtimes shit uses that makes your life better?
[2012-05-21 20:02:08 -0400] geekbri: the JVM doesn't bother me.
[2012-05-21 20:02:19 -0400] coderanger: cnf: Sorry, there are things written in Java that are solid tools, no reason for us to spend a year+ rewriting things just to save 30 seconds of installing an openjdk package
[2012-05-21 20:02:22 -0400] shuvo: it's not the runtime. often you have to read the code and patch it to suit your needs
[2012-05-21 20:02:51 -0400] coderanger: shuvo: Try reading text searcher code in any language, it is ... impenetrable :D
[2012-05-21 20:02:52 -0400] cnf: i care about a piece of software requiring not one, but multiple runtimes to be installed, damned right i do
[2012-05-21 20:03:02 -0400] miah: coderanger: it looks like a good start, and a pretty simple dsl. i'd want to make sure that you could pass all the other option types in too for more advanced usage.
[2012-05-21 20:03:20 -0400] coderanger: cnf: Sure, chef-server is a pretty non-trivial bit of infra, this is why we are happy to offer both Hosted Chef and Private Chef :D
[2012-05-21 20:03:31 -0400] shuvo: How do I use vi to view a 8GB+ file? I can use less to navigate, but is there a way I can use vi (I tried the -R option already and it loads the file after 30 mins)
[2012-05-21 20:03:37 -0400] coderanger: cnf: If you want something simpler, check out commis
[2012-05-21 20:03:40 -0400] miah: cnf: if you dont want to install a bunch of runtimes, see "hosted chef" and "private chef".
[2012-05-21 20:03:47 -0400] coderanger: cnf: It runs in pure Python :-)
[2012-05-21 20:03:49 -0400] geekbri: i wouldn't use vi to view an 8gb file personally :)
[2012-05-21 20:04:35 -0400] coderanger: Of course, commis will probably never scale nearly as well as the Ruby or Erlang servers, but it is much easier to setup
[2012-05-21 20:04:36 -0400] miah: cnf: chef server is currently being rewritten to run on erlang and a backend db, like mysql
[2012-05-21 20:05:09 -0400] geekbri: man i wish so hard that Chef::Search::Query's search method returned an enumerable
[2012-05-21 20:05:28 -0400] shuvo: geekbri, what other tool on stock ubuntu can I use, less less (I wanna scroll around feature)
[2012-05-21 20:05:46 -0400] miah: shuvo: you can use vi, just hit control-c to stop it from doing line counts
[2012-05-21 20:06:07 -0400] miah: and make sure you have enough ram available unless you want to wait for vi to swap that file
[2012-05-21 20:06:11 -0400] cnf: miah: so the ruby code is being ported to erlang?
[2012-05-21 20:06:23 -0400] miah: cnf: the complete chef backend is. yes.
[2012-05-21 20:06:27 -0400] geekbri: yeah i was about to say
[2012-05-21 20:06:28 -0400] bdha: Everything is being rewritten in Erlang.
[2012-05-21 20:06:31 -0400] geekbri: vi is gonna stuff that whole file in memory
[2012-05-21 20:06:34 -0400] coderanger: bdha: No
[2012-05-21 20:06:37 -0400] coderanger: just chef-server-api
[2012-05-21 20:06:39 -0400] cnf: miah: 1) why? and 2) even the java stuff?
[2012-05-21 20:06:49 -0400] miah: the java stuff will go away
[2012-05-21 20:06:50 -0400] coderanger: expander and webui are still in Ruby (and webui is moving to Rails3!)
[2012-05-21 20:06:54 -0400] bdha: coderanger: No, I mean in general. Everything.
[2012-05-21 20:06:54 -0400] coderanger: Wait, what?
[2012-05-21 20:07:02 -0400] shuvo: miah, the node is a teeny small instance. it's swapping :-(
[2012-05-21 20:07:02 -0400] geekbri: hotswappable code!!!!
[2012-05-21 20:07:03 -0400] shuvo: oh man
[2012-05-21 20:07:04 -0400] miah: coderanger: wont it?
[2012-05-21 20:07:04 -0400] coderanger: miah: Solr isn't going anywhere
[2012-05-21 20:07:08 -0400] miah: ah
[2012-05-21 20:07:14 -0400] shuvo: what do I do
[2012-05-21 20:07:16 -0400] miah: maybed i mis-understood that talk
[2012-05-21 20:07:17 -0400] bdha: I woke up this morning, opened a Terminal, and bash threw up some unreadable Erlang error.
[2012-05-21 20:07:17 -0400] shuvo: :'(
[2012-05-21 20:07:24 -0400] coderanger: The _only_ things being replaced are couchdb and the API service
[2012-05-21 20:07:30 -0400] miah: ok
[2012-05-21 20:07:37 -0400] cnf: also, i thought erlang was compiled
[2012-05-21 20:07:41 -0400] miah: i def misundestood that talk (i blame lack of sleep)
[2012-05-21 20:07:42 -0400] coderanger: cnf: No
[2012-05-21 20:07:46 -0400] cnf: but i don't know much about erlang
[2012-05-21 20:07:53 -0400] coderanger: Well, it is compiled into erlang bytecode
[2012-05-21 20:08:27 -0400] cnf: and why, doesn't ruby do what it needs to do?
[2012-05-21 20:08:49 -0400] coderanger: You mean why are we rewriting the API backend?
[2012-05-21 20:09:21 -0400] coderanger: Ruby can't handle the same level of concurrency and it uses a lot more RAM relative to the number of active requests, and Erlang is generally faster
[2012-05-21 20:09:21 -0400] cnf: i'm not quite sure what bit you are rewriting
[2012-05-21 20:09:23 -0400] cnf: nor why
[2012-05-21 20:09:48 -0400] cnf: coderanger: so installing chef-server will need both ruby, and erlang installed?
[2012-05-21 20:09:55 -0400] coderanger: Sure, it already does
[2012-05-21 20:10:07 -0400] coderanger: couchdb and rabbitmq are both written in Erlang
[2012-05-21 20:10:10 -0400] bdha: cnf: Grow up.
[2012-05-21 20:10:18 -0400] cnf: bdha: same to you
[2012-05-21 20:10:18 -0400] coderanger: cnf: Embrace the polyglot
[2012-05-21 20:10:27 -0400] cnf: bdha: now stop talking to me
[2012-05-21 20:10:33 -0400] bdha: cnf: /ignore bro
[2012-05-21 20:10:34 -0400] coderanger: We make sure things are packaged nicely to make them easy to install
[2012-05-21 20:10:41 -0400] coderanger: Guys, stop
[2012-05-21 20:10:48 -0400] bdha: The omnibus demo was very slick.
[2012-05-21 20:11:03 -0400] coderanger: Yeah, are the omnibus-server debs public yet?
[2012-05-21 20:11:05 -0400] coderanger: I've lost track
[2012-05-21 20:11:26 -0400] miah: no idea
[2012-05-21 20:11:30 -0400] cnf: i'm real hesitant to depend on things that require multiple interpreters...
[2012-05-21 20:11:39 -0400] coderanger: But anyways, if you don't want to run your own chef-server, Hosted Chef is always an option, or look at chef-solo (though that does have some steep downsides)
[2012-05-21 20:11:41 -0400] KarlHungus: cnf: don't try booting linux then!
[2012-05-21 20:11:42 -0400] bdha: cnf: Maybe you should use this node.js config mgmt tool, then.
[2012-05-21 20:11:55 -0400] cnf: KarlHungus: i can boot linux without enterpreters
[2012-05-21 20:12:03 -0400] coderanger: bdha: Please consider this your final warning
[2012-05-21 20:12:05 -0400] laurent\: that's not really funny, ruby, erlang, i would have chosen ocaml ! :-)
[2012-05-21 20:12:15 -0400] bdha: coderanger: Wilco.
[2012-05-21 20:12:42 -0400] cnf: KarlHungus: you know, most of it being compiled C or similar...
[2012-05-21 20:12:58 -0400] KarlHungus: cnf: i fell into the troll, sorry. continue...
[2012-05-21 20:13:05 -0400] laurent\: :-)
[2012-05-21 20:13:11 -0400] coderanger: cnf: Most ubuntu system services are actually in Python or Ruby these days
[2012-05-21 20:13:15 -0400] coderanger: or Perl
[2012-05-21 20:13:52 -0400] cnf: coderanger: system services?
[2012-05-21 20:14:09 -0400] cheeseplus: daemons
[2012-05-21 20:14:14 -0400] cheeseplus: is what I take that to mean
[2012-05-21 20:14:36 -0400] cnf: cheeseplus: you think apache and bind and mysql etc is what he means?
[2012-05-21 20:15:12 -0400] cheeseplus: well those all happen to be C but yes
[2012-05-21 20:15:17 -0400] coderanger: cnf: The glue scripts that hold all the bits together, setup networking, checking file systems, etc
[2012-05-21 20:15:30 -0400] cheeseplus: yea, most redhat glue is python
[2012-05-21 20:15:34 -0400] coderanger: Anyways, neither here nor there
[2012-05-21 20:16:06 -0400] coderanger: Chef-server does, indeed, use Ruby, Erlang, and Java code, and that isn't going to change any time soon (though the ratios of those are changing thankfully)
[2012-05-21 20:16:32 -0400] bdha: Complicated infrastructure is often built of disparate technologies, welded together to do something useful.
[2012-05-21 20:16:40 -0400] bdha: It's not something to get hung up on. It's a fact of modern life.
[2012-05-21 20:16:40 -0400] cnf: i don't mind python so much, as i am a python guy mostly
[2012-05-21 20:16:41 -0400] laurent\: any news about the webui ?
[2012-05-21 20:16:47 -0400] bdha: It's the UNIX philosophy writ large.
[2012-05-21 20:17:00 -0400] coderanger: laurent\: Other than the Rails port is Coming Soon, I don't think so
[2012-05-21 20:17:04 -0400] coderanger: cnf: Then check out commis
[2012-05-21 20:17:12 -0400] coderanger: github.com/coderanger/commis
[2012-05-21 20:17:16 -0400] cnf: but i'm generally not fond of having to install (and manage...) interpreters left and right for stuff
[2012-05-21 20:17:24 -0400] bdha: Use the omnibus installer.
[2012-05-21 20:17:26 -0400] cheeseplus: Erlang is pretty great for distributed systems
[2012-05-21 20:17:44 -0400] bdha: cnf: Watch the ending keynote from ChefConf, starting about 40m in.
[2012-05-21 20:17:46 -0400] cheeseplus: If opscode is committed to the omnibus way then it won't be an issue cnf
[2012-05-21 20:17:52 -0400] miah: the great thing about chef is you dont have to install interpreters.. it does it for you ;)
[2012-05-21 20:18:02 -0400] cnf: cheeseplus: what?
[2012-05-21 20:18:25 -0400] cheeseplus: if you use the omnibus installers you aren't having to maintain interpreters
[2012-05-21 20:18:35 -0400] coderanger: cheeseplus: I promise you, the omnibus system is as much for our sanity as yours ;-)
[2012-05-21 20:18:47 -0400] cheeseplus: oh I know, I was at the conf :)
[2012-05-21 20:18:48 -0400] KarlHungus: cnf: the beauty of what you just said is that once you run chef, then chef will manage those hard parts you are currently avoiding
[2012-05-21 20:18:53 -0400] cheeseplus: I fully support it
[2012-05-21 20:18:59 -0400] miah: i'd wager more for your sanity, as you wont have to listen to users whine about things as much
[2012-05-21 20:19:04 -0400] laurent\: coderanger: ok, sounds like old news
[2012-05-21 20:19:43 -0400] miah: the reality of operations these days is you _will_ be running lots of different interpreters if you want to do really cool things
[2012-05-21 20:19:50 -0400] shuvo: coderanger, oh man. god bless you. Is commis going to be 100% compatible with the "original" chef-server?
[2012-05-21 20:20:05 -0400] miah: i am using graphite, and i'm not much of a python or django person.. but guess what. i have to deal with it. and learn. and adapt.
[2012-05-21 20:20:11 -0400] miah: its operations evolution
[2012-05-21 20:20:12 -0400] coderanger: shuvo: Not quite, but close
[2012-05-21 20:20:18 -0400] miah: you either adapt or die off
[2012-05-21 20:20:32 -0400] coderanger: shuvo: Right now the biggest omission is Environments
[2012-05-21 20:20:51 -0400] coderanger: shuvo: I suspect I'll add them but with greatly reduced support for complex cookbook dependency locking
[2012-05-21 20:20:58 -0400] coderanger: probably just == for starters
[2012-05-21 20:21:13 -0400] jtimberman: cheeseplus: we're definitely commited to that.
[2012-05-21 20:21:15 -0400] cnf: miah: i am a python person (though not a django person :( )
[2012-05-21 20:21:15 -0400] shuvo: coderanger, anything is good. it would be awesome
[2012-05-21 20:21:19 -0400] cheeseplus: as for Erlang, it is rather nice for setting up distributed systems
[2012-05-21 20:21:29 -0400] coderanger: shuvo: It works today if you want to try it ;-)
[2012-05-21 20:21:32 -0400] shuvo: yup, ask any telecom provider
[2012-05-21 20:21:42 -0400] cheeseplus: full disclosure, I just started at Basho who writes Riak in Erlang
[2012-05-21 20:21:45 -0400] cheeseplus: :P
[2012-05-21 20:21:52 -0400] coderanger: shuvo: The UI could use some love too
[2012-05-21 20:21:53 -0400] shuvo: coderanger, indeed. I just lost 10 hours to your hack x-(
[2012-05-21 20:22:05 -0400] jtimberman: http://www.youtube.com/watch?v=Lv89JG81-9M&feature=plcp has some info about it
[2012-05-21 20:22:13 -0400] miah: cnf: ya. we're all different. tools are written by different people to solve different problems. and different tools are more suited to solving certain problems. so you _will_ encounter java, erlang, python, ruby, c, perl, c++, etc in your sysadmin life.
[2012-05-21 20:22:15 -0400] coderanger: shuvo: Hmm?
[2012-05-21 20:22:29 -0400] shuvo: I meant I will be messing around with it for 10 hours I guess :-D
[2012-05-21 20:22:37 -0400] bdha: Specialization is for insects.
[2012-05-21 20:22:42 -0400] miah: yup
[2012-05-21 20:22:43 -0400] coderanger: shuvo: Ahh, just ping me if you have any questions :D
[2012-05-21 20:22:45 -0400] cnf: miah: in my sys admin life, i have been good at avoiding certain languages
[2012-05-21 20:22:50 -0400] cnf: java being one of them
[2012-05-21 20:22:55 -0400] shuvo: ha ha
[2012-05-21 20:22:57 -0400] shuvo: true
[2012-05-21 20:22:58 -0400] miah: cnf: like i said, operations evolution
[2012-05-21 20:22:58 -0400] shuvo: +1
[2012-05-21 20:23:06 -0400] jtimberman: the amount of java you do and deal with wrt the chef server is really small.
[2012-05-21 20:23:07 -0400] cnf: miah: and i don't mind compiled languages, at all
[2012-05-21 20:23:15 -0400] cnf: so C++, obj-C, C, whatever
[2012-05-21 20:23:20 -0400] cnf: that's all dev side
[2012-05-21 20:24:09 -0400] cnf: jtimberman: mainly, i don't trust java
[2012-05-21 20:24:11 -0400] cnf: no, that's wrong
[2012-05-21 20:24:15 -0400] cheeseplus: cnf: part of operations evolution is the erosion of the barrier between sides
[2012-05-21 20:24:16 -0400] cnf: i don't trust java devs
[2012-05-21 20:24:29 -0400] miah: everybody i ever worked with that refused to learn about new technologies is still back working jobs that i would consider 'shit'
[2012-05-21 20:24:47 -0400] bdha: michael_jackson_eating_popcorn.gif
[2012-05-21 20:24:51 -0400] cnf: miah: did you just call java a "new technologie" ?
[2012-05-21 20:24:53 -0400] cheeseplus: not trusting a particular group of devs doesn't make the language go away
[2012-05-21 20:24:54 -0400] KarlHungus: heh, if you don't trust java devs, then ruby devs ought to scare the daylights out of you
[2012-05-21 20:24:58 -0400] miah: cnf: certainly not
[2012-05-21 20:25:06 -0400] cnf: KarlHungus: word...
[2012-05-21 20:25:06 -0400] miah: which is slightly ironic in that you don't trust it.
[2012-05-21 20:25:11 -0400] miah: how does Scala make you feel?
[2012-05-21 20:25:16 -0400] cheeseplus: cnf: not sure if you follow javas evolution but jvm changes as of late are actually pretty great
[2012-05-21 20:25:16 -0400] miah: bdha: also. yes. =)
[2012-05-21 20:25:21 -0400] cnf: miah: AWESOME music!
[2012-05-21 20:25:46 -0400] miah: cnf: http://en.wikipedia.org/wiki/Scala_(programming_language)
[2012-05-21 20:26:00 -0400] cnf: miah: http://www.youtube.com/watch?v=Ui2a2KTx60s
[2012-05-21 20:26:14 -0400] shuvo: lol
[2012-05-21 20:26:21 -0400] cheeseplus: I'm no java fanboy but the JVM really awesome
[2012-05-21 20:26:27 -0400] cheeseplus: JVM is*
[2012-05-21 20:26:27 -0400] shuvo: yup
[2012-05-21 20:26:38 -0400] shuvo: it runs ruby and python too. and lisp ;-)
[2012-05-21 20:26:44 -0400] Mithrandir: yeah, I just love manually adjusting stack sizes for my VMs
[2012-05-21 20:26:49 -0400] shuvo: ha ha
[2012-05-21 20:26:52 -0400] shuvo: +1
[2012-05-21 20:26:52 -0400] cheeseplus: and I've been in plenty of situations where nothing else on the market could do what Java could
[2012-05-21 20:26:53 -0400] cnf: Mithrandir: :P
[2012-05-21 20:27:01 -0400] Mithrandir: and having to restart huge stacks to do so, rather than being able to do so without restarts.
[2012-05-21 20:27:27 -0400] miah: i feel like #chef has devolved into trolololo
[2012-05-21 20:27:28 -0400] cnf: java is one of those things where people say how awesome it is, and in theory i agree
[2012-05-21 20:27:44 -0400] cheeseplus: cnf: I'm saying that in actuality it is
[2012-05-21 20:27:45 -0400] cnf: i just have seen so much pain and suffering from it, and very little (if any) decent stuff
[2012-05-21 20:28:09 -0400] cheeseplus: cnf: your experience is subjective, others do genuinely love it
[2012-05-21 20:28:18 -0400] Mithrandir: stockholm syndrome.
[2012-05-21 20:28:21 -0400] Mithrandir: ;-)
[2012-05-21 20:28:21 -0400] cheeseplus: lol
[2012-05-21 20:28:28 -0400] cnf: cheeseplus: people love php, and self mutulation too
[2012-05-21 20:28:42 -0400] jtimberman: So here's the thing. The Chef Server uses SOLR. SOLR is a large open source project under the Apache Foundation, well reviewed and quite solid. In the particular case of Chef, it best fits the use case, and we looked at a lot of search tech.
[2012-05-21 20:28:49 -0400] cheeseplus: sure do, but just trashing a language adhoc is just as unproductive cnf
[2012-05-21 20:29:00 -0400] miah: ^^
[2012-05-21 20:29:06 -0400] jtimberman: Let's move on.
[2012-05-21 20:29:09 -0400] cheeseplus: exactly
[2012-05-21 20:29:09 -0400] bdha: +1
[2012-05-21 20:29:27 -0400] bdha: jtimberman: Time for some D3?
[2012-05-21 20:29:27 -0400] shuvo: +1
[2012-05-21 20:29:32 -0400] cnf: yeah, bashing people for having another opinion, now that is mature and productive
[2012-05-21 20:29:33 -0400] Mithrandir: jtimberman: still makes me sad that I need to have this java thing that dies once a week running on my chef server.
[2012-05-21 20:29:38 -0400] cnf: i'm gonna find some food
[2012-05-21 20:29:46 -0400] KarlHungus: i love bashing peoples opinions
[2012-05-21 20:29:52 -0400] jtimberman: Mithrandir: Know you a runit. ;)
[2012-05-21 20:29:59 -0400] jtimberman: Mithrandir: but we've had that conversation before.
[2012-05-21 20:30:02 -0400] Mithrandir: especially given that search would, in my case, have been just as fast, or faster by using /bin/grep.
[2012-05-21 20:30:09 -0400] Mithrandir: jtimberman: we have, we have.
[2012-05-21 20:30:57 -0400] cnf: also as a side note, a few people here aside it's not really a welcoming community for new people.
[2012-05-21 20:31:04 -0400] Mithrandir: jtimberman: what makes me most sad is actually that the solr language is embedded in chef, rather than going through a translation layer, since it means replacing solr with something better is much harder than it could be.
[2012-05-21 20:31:18 -0400] Mithrandir: cnf: what isn't?  The java world?
[2012-05-21 20:31:18 -0400] jtimberman: cnf: I'm sorry.
[2012-05-21 20:31:19 -0400] cheeseplus: pointing out the other side of an argument isn't bashing, that is not what I was trying to do at all
[2012-05-21 20:31:30 -0400] bdha: cnf: Sorry, the problem is basically anytime you say something is it negative about the product everyone here uses.
[2012-05-21 20:31:31 -0400] cheeseplus: I apologize
[2012-05-21 20:31:45 -0400] bdha: cnf: If you had actual problems or questions, I would be happy to answer them without the snark.
[2012-05-21 20:32:15 -0400] cnf: Mithrandir++
[2012-05-21 20:32:39 -0400] cnf: cheeseplus: pointing the other side is fine, though not always constructive
[2012-05-21 20:33:00 -0400] cnf: jumping on a defensive bandwagon is just anoying
[2012-05-21 20:33:03 -0400] cheeseplus: and vice versa was my point earlier
[2012-05-21 20:33:13 -0400] cheeseplus: cnf: I'm all about right tools for the job
[2012-05-21 20:33:24 -0400] cheeseplus: I mean I've used Windows as a server *rimshot*
[2012-05-21 20:33:25 -0400] Mithrandir: I like hammers.
[2012-05-21 20:33:31 -0400] Mithrandir: and with that, I'm off to bed.
[2012-05-21 20:34:16 -0400] mattray: Mithrandir: there was someone replacing Solr and keeping the syntax in place
[2012-05-21 20:34:26 -0400] mattray: of course, that was with ElasticSearch (java for java)
[2012-05-21 20:34:30 -0400] cnf: jtimberman: you are not that bad :P
[2012-05-21 20:34:51 -0400] cnf: jtimberman: but meh, chef is hard enough to learn as it stands...
[2012-05-21 20:35:09 -0400] Mithrandir: mattray: yeah, I liked that.  It's a good move, I just wish we'd have painted ourselves into a different corner.
[2012-05-21 20:35:15 -0400] mattray: cnf: that's why we give Hosted Chef accounts away for free
[2012-05-21 20:35:17 -0400] cheeseplus: cnf: rest assure opscode is working very hard to make everything easier
[2012-05-21 20:35:38 -0400] mattray: learning how to run the server != using Chef
[2012-05-21 20:35:38 -0400] cheeseplus: for reference, I'm just starting with Chef but I did attend the conference
[2012-05-21 20:35:43 -0400] cheeseplus: so no stockholm syndrome
[2012-05-21 20:35:48 -0400] cnf: mattray: which helps :P
[2012-05-21 20:35:48 -0400] cheeseplus: yet
[2012-05-21 20:36:30 -0400] cnf: mattray: honestly, it is the biggest reason why i am here instead of at #puppet (or whatever their channel is)
[2012-05-21 20:37:29 -0400] cheeseplus: it's why a lot of folks are here
[2012-05-21 20:37:58 -0400] bdha: mattray: Yay!
[2012-05-21 20:38:15 -0400] lnxchk: we are here for the hugging and learning
[2012-05-21 20:38:16 -0400] mattray: bdha: you looking for a feature? extractlocal is about to drop
[2012-05-21 20:38:38 -0400] doomviking: hugging!
[2012-05-21 20:38:41 -0400] bdha: mattray: Nope, I'm pretty happy as is.
[2012-05-21 20:39:08 -0400] mattray: me too, but people keep asking for more features ;)
[2012-05-21 20:39:48 -0400] flashmanbahadur: has anyone had issues with using the 'link' LWRP with chef 0.10.10?
[2012-05-21 20:39:58 -0400] flashmanbahadur: getting TypeError: can't convert nil into String
[2012-05-21 20:40:14 -0400] hoover_damm: flashmanbahadur, reported bug
[2012-05-21 20:40:31 -0400] jessicab: flashmanbahadur - http://tickets.opscode.com/browse/CHEF-3102
[2012-05-21 20:40:33 -0400] hoover_damm: flashmanbahadur, not sure if it's fixed in master yet.
[2012-05-21 20:40:40 -0400] flashmanbahadur: good to know
[2012-05-21 20:40:48 -0400] flashmanbahadur: execute block it is then
[2012-05-21 20:41:33 -0400] miah: cnf: its interesting that after spending the week at chefconf and hearing _everybody_ talk about how nice and welcoming the community is, to hear you say that.
[2012-05-21 20:42:00 -0400] miah: i basically agree with bdha here, everytime you speak its to be negative about that product we have all spent some time using, and coding
[2012-05-21 20:42:09 -0400] shuvo: is there a tool to make viewing log files easier. I am looking into hadoop logs and there's this exception that repeats over and over again for line million times
[2012-05-21 20:42:14 -0400] shuvo: ?
[2012-05-21 20:42:19 -0400] cheeseplus: shuvo: Splunk ;)
[2012-05-21 20:42:27 -0400] bdha: shuvo: Splunk, graylog2.
[2012-05-21 20:42:28 -0400] flashmanbahadur: shuvo: personally Id just use grep to filter things
[2012-05-21 20:42:37 -0400] flashmanbahadur: might not work so hot for a 1M line file tho
[2012-05-21 20:42:37 -0400] miah: anyways. i <3 everybody. i tend to be sarcastic, but i think you'll have a hard time finding anybody here who would say i'm a bitch.
[2012-05-21 20:42:41 -0400] cnf: miah: sure, whatever you say
[2012-05-21 20:42:43 -0400] cheeseplus: flashmanbahadur: splunk is for when grep falls over
[2012-05-21 20:42:49 -0400] flashmanbahadur: haha true
[2012-05-21 20:42:55 -0400] flashmanbahadur: or when you have lots of money to blow
[2012-05-21 20:42:58 -0400] shuvo: I should have seen that coming. Is there a commandlien version of splunk?
[2012-05-21 20:42:59 -0400] cheeseplus: yes!
[2012-05-21 20:43:10 -0400] cheeseplus: shuvo: it does have a cli interface
[2012-05-21 20:43:20 -0400] flashmanbahadur: more fun to write you own python generator
[2012-05-21 20:43:22 -0400] cheeseplus: the webui is really great though
[2012-05-21 20:43:23 -0400] cnf: miah: all is fine, as long as you agree
[2012-05-21 20:43:26 -0400] mattray: shuvo: what exactly do you need?
[2012-05-21 20:43:35 -0400] shuvo: I just want the stack trace to "fold", and even better, tell me "this message repeated a million times"
[2012-05-21 20:43:40 -0400] hoover_damm: cnf, did you have a case of the raging mondays?
[2012-05-21 20:43:46 -0400] cnf: miah: my first day here, i ran into a cookbook that did weird stuff, and was told by a lot of people it was just me
[2012-05-21 20:43:58 -0400] cnf: hoover_damm: yep, too much head wind does that to me
[2012-05-21 20:44:34 -0400] miah: as long as i agree? that we're a welcoming community that has a hard time dealing with somebody being somewhat of a twat?
[2012-05-21 20:44:36 -0400] cnf: and stuff like "everytime you speak its to be negative about that product we have all spent some time using, and coding"
[2012-05-21 20:44:39 -0400] cnf: like when?
[2012-05-21 20:44:58 -0400] cnf: i disagree with the java bits, where else do i speak negative about "that product"?
[2012-05-21 20:44:58 -0400] cheeseplus: this isn't a productive exercise
[2012-05-21 20:45:04 -0400] mattray: yes, please stop.
[2012-05-21 20:45:15 -0400] shuvo: cnf, mate calm down. let it go. you should check out the common lisp channel to see what a hairy copmmunity is really like. even #git
[2012-05-21 20:45:15 -0400] doomviking: oh dear.
[2012-05-21 20:45:16 -0400] miah: <- stopped
[2012-05-21 20:45:27 -0400] miah: i'm going to lunch anyways. just find it frustrating to say we're not nice.
[2012-05-21 20:45:28 -0400] hoover_damm: as I said a case of the raging mondays
[2012-05-21 20:45:30 -0400] hoover_damm: ignore him
[2012-05-21 20:45:38 -0400] doomviking: or #qmail
[2012-05-21 20:45:44 -0400] cnf: yeah, i'm gonna go recharge somewhere nice
[2012-05-21 20:45:45 -0400] miah: <3
[2012-05-21 20:46:38 -0400] mattray: so changing the subject completely has anyone got a link for replacing irb with pry for shef?
[2012-05-21 20:46:53 -0400] eherot: oh yeah definitely #qmail
[2012-05-21 20:46:54 -0400] shuvo: require pry?
[2012-05-21 20:46:56 -0400] eherot: long live djb ;-)
[2012-05-21 20:47:05 -0400] bdha: Speaking of djb.
[2012-05-21 20:47:16 -0400] bdha: How happy are systems running two instances of svscanboot/supervise?
[2012-05-21 20:47:24 -0400] sdelano: mattray: a link? pry is awesome by the way
[2012-05-21 20:47:25 -0400] eherot: bdha:
[2012-05-21 20:47:26 -0400] jtimberman: mattray: ask kallistec :)
[2012-05-21 20:47:31 -0400] bdha: ie, if you use omnibus-ctl and have your own services under daemontools as well.
[2012-05-21 20:47:35 -0400] eherot: my last job we used to run about a dozen
[2012-05-21 20:47:39 -0400] eherot: they don't really care about one another
[2012-05-21 20:47:45 -0400] bdha: eherot: Cool.
[2012-05-21 20:47:45 -0400] jtimberman: bdha: its a different binary
[2012-05-21 20:47:50 -0400] bdha: eherot: Why did you do that?
[2012-05-21 20:47:54 -0400] kallistec: mattray: I had to write shef as a bunch of ugly hacks into irb
[2012-05-21 20:47:58 -0400] jtimberman: bdha: started in a different services dir.
[2012-05-21 20:48:02 -0400] kallistec: they should be pretty well contained
[2012-05-21 20:48:28 -0400] eherot: bdha: Don't ask.  Actually it's because it was a mail product originally built on qmail and because the dev who later expanded the product had never really used Linux before, he didn't realize that wasn't the "normal" way to run a service.
[2012-05-21 20:48:57 -0400] bdha: ah. That's a far less fun answer than I'd hoped for. ;-)
[2012-05-21 20:49:05 -0400] eherot: bdha: also the product was bad and crashed all the time.  But this made it possible to start and stop them using unix service commands independently.
[2012-05-21 20:49:11 -0400] eherot: bdha: it was hell, heh.
[2012-05-21 20:49:21 -0400] eherot: also you haven't met dogmatic programmers until you've met djb.
[2012-05-21 20:49:25 -0400] kallistec: mattray: take a look at https://github.com/opscode/chef/blob/master/chef/lib/chef/shef/ext.rb and hit me up if you have questions
[2012-05-21 20:49:50 -0400] bdha: True enough. But daemontools is solid. I forgive a lot for code that doesn't eat my face once in 12 years.
[2012-05-21 20:50:16 -0400] bdha: Also: Been using a single piece of software without break for 12 years.
[2012-05-21 20:51:20 -0400] eherot: bdha: It's solid code.  It's just I find that model for keeping services running to be dangerous at times.  I've ended up with it confused about what state it thinks my service is in a handful of times
[2012-05-21 20:51:33 -0400] eherot: not because of bugs in the code but because of operator error, but it makes operator error easier, heh.
[2012-05-21 20:52:12 -0400] bdha: eherot: I've only run into that when -- not joking -- I've run out of inodes and the system has rebooted.
[2012-05-21 20:52:17 -0400] bdha: Things get all sorts of confused then.
[2012-05-21 20:52:32 -0400] eherot: bdha: yeah the problems crop up when the service dies without actually dying.
[2012-05-21 20:52:48 -0400] bdha: I prefer SMF, but daemontools is a close second.
[2012-05-21 20:52:57 -0400] yfeldblum: in 2 years polyglot will be the default, and people will look back in amazement at java-only shops or .net-only shops or python-only shops
[2012-05-21 20:52:58 -0400] eherot: it never caused any customer outages, just occasional moments of head-scratching and frustration.
[2012-05-21 20:53:00 -0400] bdha: Totally different ends of the complexity scale, though.
[2012-05-21 20:53:35 -0400] bdha: yfeldblum: I know a guy who specialized in SCO 3.0, primarily on a single financial application. He makes good money in the tri-state area.
[2012-05-21 20:53:46 -0400] bdha: yfeldblum: There are lots of folks and businesses like that.
[2012-05-21 20:53:57 -0400] bdha: yfeldblum: Web ops is the tip of a very large, old, smelly iceberg.
[2012-05-21 20:54:10 -0400] mattray: bdha: hah
[2012-05-21 20:54:15 -0400] hoover_damm: bdha, I almost got to make a borne again joke today
[2012-05-21 20:54:17 -0400] bdha: s/lized/lizes/ # He still does it.
[2012-05-21 20:54:31 -0400] hoover_damm: actually Bourne
[2012-05-21 20:54:43 -0400] hoover_damm: spelling counts in this case
[2012-05-21 20:54:55 -0400] bdha: Jason Bourne or is this a shell derp?
[2012-05-21 20:55:02 -0400] hoover_damm: shell derp
[2012-05-21 20:55:16 -0400] hoover_damm: it was an interesting way of winning a you shouldn't use zsh argument
[2012-05-21 20:55:30 -0400] cheeseplus: bdha: I worked at a university that still uses a mainframe O_o
[2012-05-21 20:55:40 -0400] bdha: I don't want to know why you were arguing about why someone should use zsh or not.
[2012-05-21 20:55:50 -0400] hoover_damm: I told him that if we followed the pattern of we should use what is installed; we would all still be running bsh, sh or batfoo
[2012-05-21 20:55:52 -0400] cheeseplus: plenty of niche guys making bank on those systems
[2012-05-21 20:56:06 -0400] hoover_damm: Users indicate their preference and stress their preferance on their distribution
[2012-05-21 20:56:10 -0400] hoover_damm: and the distribution decides
[2012-05-21 20:56:35 -0400] hoover_damm: perhaps I should say developers of said distribution
[2012-05-21 20:56:49 -0400] hoover_damm: but I wasn't trying to be 110% accurate
[2012-05-21 20:59:13 -0400] hoover_damm: I wouldn't argue that you should use zsh, just stressed a preference for zsh and the reason I was told by peers that I shouldn't use it is because it's not preinstalled
[2012-05-21 21:00:00 -0400] matschaffer: so I'm driving my chef-client via knife ssh (from jenkins). What's a good way to set a node attribute for a single run (a debugging flag for the app)? Should I just use ruby? I tried chef-client -j debug.json but it persists the value of that attribute for the next run which isn't ideal.
[2012-05-21 21:00:38 -0400] hoover_damm: matschaffer, make the debug flag override set to false
[2012-05-21 21:00:45 -0400] hoover_damm: matschaffer, then your debug.json should enable it
[2012-05-21 21:01:00 -0400] hoover_damm: matschaffer, if the override is set on the role/environment to false, that will persist over you setting it to true
[2012-05-21 21:01:13 -0400] matschaffer: ooo, that's cute
[2012-05-21 21:01:14 -0400] bdha: hoover_damm: Whoever was arguing against zsh in that context probably managed a lot of Solaris machines, given how often people tell me the Solaris userland sucks.
[2012-05-21 21:01:24 -0400] bdha: And then boggle when I tell them about pkgsrc.
[2012-05-21 21:01:41 -0400] hoover_damm: I've never thought that Solaris userland sucked
[2012-05-21 21:01:53 -0400] hoover_damm: but then again I've never accepted Solaris without pkgsrc or something similar
[2012-05-21 21:01:53 -0400] matschaffer: hoover_damm: wouldn't that override still take precidence for the run?
[2012-05-21 21:01:55 -0400] bdha: It doesn't take a lot to make developers (or users) happy, and pkgsrc has pretty much all of it.
[2012-05-21 21:02:02 -0400] hoover_damm: matschaffer, nope
[2012-05-21 21:02:04 -0400] matschaffer: interesting
[2012-05-21 21:02:26 -0400] bdha: hoover_damm: I like it fine, mostly. But having a modern vim/emacs is still pretty ideal. :)
[2012-05-21 21:02:30 -0400] matschaffer: so the json file is a special precedence then? It seemed like it was just updating the node then running
[2012-05-21 21:02:33 -0400] bdha: Its termcaps, on the other hand...
[2012-05-21 21:02:34 -0400] hoover_damm: matschaffer, overrides can be set and set as anything in the run / in -j .. and when node.save runs
[2012-05-21 21:02:44 -0400] hoover_damm: matschaffer, that extra garbage is thrown out and the override is slid back in
[2012-05-21 21:02:50 -0400] hoover_damm: basically is what happens
[2012-05-21 21:02:55 -0400] matschaffer: iiinnnteresting
[2012-05-21 21:03:36 -0400] shuvo: anyone used Chainsaw v2 or friends?
[2012-05-21 21:03:46 -0400] hoover_damm: bdha, insanely ideal
[2012-05-21 21:04:39 -0400] hoover_damm: I won't pass up a ghetto old vi because I can cope
[2012-05-21 21:05:42 -0400] matschaffer: hoover_damm: is there a way to set attributes on the command line rather than a file?
[2012-05-21 21:06:15 -0400] matschaffer: :)
[2012-05-21 21:06:58 -0400] julienphalip: Hi, I think the most recent of chef may have broken the python recipe. Can somebody else reproduce this problem? There's an error while installing virtualenv. Using the older chef-solo 0.10.8 removes the error.
[2012-05-21 21:07:36 -0400] hoover_damm: matschaffer, echo "{ \"name\": \"foo\"}" | chef-client -j - -c -l debug
[2012-05-21 21:07:49 -0400] kallistec: matschaffer: you could have a recipe that always unsets (or sets to false) your attribute, or you could touch a file, turn on debug if it exists, then delete it
[2012-05-21 21:07:57 -0400] hoover_damm: matschaffer, remember a file is just an interpertation of a file when running in a shell
[2012-05-21 21:08:10 -0400] hoover_damm: you can easily pass data and pipe it and then use - as the reference to the filename
[2012-05-21 21:08:12 -0400] knuckolls: kallistec: how would you "turn on debug" in that context
[2012-05-21 21:08:18 -0400] flashmanbahadur: julienphalip:  whats the error?
[2012-05-21 21:08:19 -0400] knuckolls: sounds useful to know
[2012-05-21 21:10:10 -0400] kallistec: knuckolls: AFICT, matschaffer is saying it's a setting for his app, so you'd do `if ::File.exists?('path/to/file'); # app specific stuff; ::File.unlink('path'); end`
[2012-05-21 21:10:36 -0400] kallistec: for the Chef logger, it's Chef::Log.level = :debug
[2012-05-21 21:10:46 -0400] kallistec: or = :info, whatever
[2012-05-21 21:10:55 -0400] knuckolls: ah cool that's useful
[2012-05-21 21:10:56 -0400] knuckolls: thanks
[2012-05-21 21:10:57 -0400] matschaffer: kallistec: yeah, I guess then use knife ssh touch path and knife ssh rm path
[2012-05-21 21:11:28 -0400] matschaffer: I kinda like having the debug flag as a node attr though incase we need to turn it on for a long period of time
[2012-05-21 21:11:37 -0400] julienphalip: flashmanbahadur: [Mon, 21 May 2012 21:19:54 +0200] DEBUG: Processing python_pip[virtualenv] on iwc-vm
[2012-05-21 21:11:38 -0400] julienphalip: [Mon, 21 May 2012 21:19:54 +0200] INFO: Processing python_pip[virtualenv] action install (python::virtualenv line 23)
[2012-05-21 21:11:38 -0400] julienphalip: [Mon, 21 May 2012 21:19:54 +0200] ERROR: python_pip[virtualenv] (python::virtualenv line 23) has had an error
[2012-05-21 21:11:38 -0400] julienphalip: [Mon, 21 May 2012 21:19:54 +0200] ERROR: python_pip[virtualenv] (/tmp/vagrant-chef-1/chef-solo-1/cookbooks/python/recipes/virtualenv.rb:23:in `from_file') had an error:
[2012-05-21 21:11:38 -0400] julienphalip: python_pip[virtualenv] (python::virtualenv line 23) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2012-05-21 21:11:39 -0400] julienphalip: ---- Begin output of pip freeze | grep -i '^virtualenv==' ----
[2012-05-21 21:11:39 -0400] julienphalip: STDOUT:
[2012-05-21 21:11:39 -0400] julienphalip: STDERR:
[2012-05-21 21:11:40 -0400] julienphalip: ---- End output of pip freeze | grep -i '^virtualenv==' ----
[2012-05-21 21:11:40 -0400] julienphalip: Ran pip freeze | grep -i '^virtualenv==' returned 1
[2012-05-21 21:11:45 -0400] matschaffer: kallistec: but that's a good idea too
[2012-05-21 21:11:48 -0400] julienphalip: Sorry for the noise :(
[2012-05-21 21:14:32 -0400] flashmanbahadur: not sure, I wonder if the new version of chef-solo uses the new version of virtualenv and 0.10.8 uses the older version
[2012-05-21 21:15:08 -0400] flashmanbahadur: for some reason it is not finding virtual env in its own pip files
[2012-05-21 21:16:21 -0400] hoover_damm: julienphalip, there's a pull request with a patch for that
[2012-05-21 21:16:47 -0400] hoover_damm: julienphalip, https://github.com/opscode-cookbooks/python/pull/7
[2012-05-21 21:17:05 -0400] hoover_damm: julienphalip, hopefully someone at Opscode can get some of those pull requests merged in this week
[2012-05-21 21:17:24 -0400] julienphalip: Awesome! Thanks for the pointers :)
[2012-05-21 22:11:09 -0400] ab1: ? about lwrp, when running a recipe a second time the lwrp doesn't seem to be executed
[2012-05-21 22:15:11 -0400] atomic-penguin: ab1, which lwrp?
[2012-05-21 22:16:10 -0400] ab1: one I created, it works fine on the first chef-client run but nothing happens on the second run
[2012-05-21 22:17:05 -0400] ab1: the attributes passed to the provider are different on the second run
[2012-05-21 22:18:03 -0400] ab1: does the name attribute have to change for chef to execute the provider a second time?
[2012-05-21 22:26:35 -0400] frjcook: Does anyone know if it is possible to set an IP via the knife node create command?
[2012-05-21 22:30:18 -0400] rayrod2030: anybody find a good mysql 5.5 recipe yet?
[2012-05-21 22:30:37 -0400] rayrod2030: current one on opscode isn't working well for mysql 5.5 on ubuntu 12.04
[2012-05-21 22:36:14 -0400] ab1: ok changing the name attribute fixes the prob
[2012-05-21 22:36:27 -0400] ab1: can someone explain why?
[2012-05-21 22:42:12 -0400] kallistec: ab1: you should treat resources as if they're unique by name
[2012-05-21 22:42:57 -0400] kallistec: when you have a second resource with an identical name, chef tries to copy the first one so that you can execute a different action on the same resource
[2012-05-21 22:43:19 -0400] ab1: I'm not talking about a second resource, I'm mean a second run of the chef client
[2012-05-21 22:43:32 -0400] ab1: where the attribute assigned to the resource change
[2012-05-21 22:43:37 -0400] yfeldblum: resources are unique per run_context by the combination of type and name
[2012-05-21 22:44:00 -0400] ab1: event if their attributes (besides the name attribute) change?
[2012-05-21 22:44:13 -0400] ab1: the other non lwrp resource doesn't seem to have this problem
[2012-05-21 22:44:20 -0400] chip-: Anybody want to help me with some newbie ruby string manipulation?
[2012-05-21 22:44:20 -0400] yfeldblum: if you use the same type/name combination twice, chef will intentionally think you mean to talk about only one resource with that type/name, only that you declared it and set up initial attributes up top, and want to add on additional attributes down below
[2012-05-21 22:44:37 -0400] yfeldblum: chip-, sup
[2012-05-21 22:44:47 -0400] ab1: the resource in question is declared once int he receipe
[2012-05-21 22:45:01 -0400] yfeldblum: run-context, not recipe
[2012-05-21 22:45:10 -0400] yfeldblum: all the recipes in your run-list share one run-context
[2012-05-21 22:45:15 -0400] ab1: ah
[2012-05-21 22:46:34 -0400] ab1: so lets say I have a resource attributes are assigned like so { foo => "bar" }
[2012-05-21 22:46:59 -0400] ab1: and the second time I run the chef-client I change the attribute to {foo => "baz" }
[2012-05-21 22:47:05 -0400] ab1: and the resource still isn't run
[2012-05-21 22:47:25 -0400] ab1: this doesn't appear to happen with the built in resources but it's a problem with the lwrp I create
[2012-05-21 22:48:36 -0400] ab1: just doesn't seem to be consistent with the behavior I get with resources like the template or service
[2012-05-21 22:48:51 -0400] yfeldblum: ab1, a little more detail would help
[2012-05-21 22:51:04 -0400] yfeldblum: ab1, every provider is responsible for analyzing the resource's existing state on the server in question and taking actions against the system to bring the resource's state on the system into conformance with the resource's state as declared in the recipe
[2012-05-21 22:51:28 -0400] ab1: what's the mechanism for that????
[2012-05-21 22:52:02 -0400] ab1: it doesn't seem to execute any of the code in the action so I can event check
[2012-05-21 22:52:08 -0400] ab1: even check
[2012-05-21 22:52:37 -0400] yfeldblum: ab1, you write ruby code in the provider
[2012-05-21 22:52:47 -0400] ab1: yup
[2012-05-21 22:53:01 -0400] ab1: faction :create do
[2012-05-21 22:53:01 -0400] ab1: sourcePath = new_resource.sourcePath
[2012-05-21 22:53:01 -0400] ab1: user = new_resource.user
[2012-05-21 22:53:14 -0400] ab1: it doesn't even enter the action block
[2012-05-21 22:53:19 -0400] ab1: that's the problem
[2012-05-21 22:53:21 -0400] yfeldblum: faction?
[2012-05-21 22:53:29 -0400] ab1: action, typo
[2012-05-21 22:53:31 -0400] yfeldblum: resources do not have default actions
[2012-05-21 22:53:43 -0400] ab1: action [:create, :stage, :config]
[2012-05-21 22:54:05 -0400] ab1: those are the action called
[2012-05-21 22:54:19 -0400] ab1: like I said it work perfectly the first time the chef-client runs
[2012-05-21 22:54:36 -0400] ab1: the second time the chef-client runs not of the code in any of the action blocks is executed
[2012-05-21 22:55:18 -0400] ab1: to get around this I had to make the name a concatenation of the attribute values which sucks
[2012-05-21 22:55:38 -0400] ab1: to get it to run on the second chef-client run
[2012-05-21 22:56:34 -0400] yfeldblum: ab1, how do you know it didn't run?
[2012-05-21 22:57:00 -0400] ab1: because it checkout the source, ran the minification scripts, and uploaded it to s3
[2012-05-21 22:57:06 -0400] ab1: which is what the provider does
[2012-05-21 22:57:12 -0400] ab1: pretty clear
[2012-05-21 22:58:26 -0400] ab1: a couple of the cookbook attributes contain the source version, I changed the version which gets assigned to the lwrp attribute and it didn't run the provider
[2012-05-21 22:58:54 -0400] ab1: no errors, not actions, just the log output
[2012-05-21 22:59:24 -0400] webframp: anybody have an opscode email for @bmbaisch ?
[2012-05-21 22:59:33 -0400] yfeldblum: try sticking `Chef::Log.info("entered the action_create block")` right at the top of the action?
[2012-05-21 22:59:41 -0400] ab1: [Mon, 21 May 2012 22:41:36 +0000] INFO: Processing redacted[/redacted] action create (redacted' line 37)
[2012-05-21 23:00:10 -0400] yfeldblum: action :create do ; Chef::Log.info("entered the action_create block") ; ... end
[2012-05-21 23:00:17 -0400] ab1: that's all I get, I added a puts statement in the action block and it didn't get executed
[2012-05-21 23:00:44 -0400] yfeldblum: try with Chef::Log.info(text) rather than puts?
[2012-05-21 23:00:49 -0400] ab1: trying now
[2012-05-21 23:02:31 -0400] ab1: nope nothing
[2012-05-21 23:02:56 -0400] kevmo_: Hey guys, I've asked this question a few times and never heard anything back " I have a UBUNTU 12.04 node that I am running "sudo chef-client" on and receive a [BUG] Segmentation fault error about 1/4 of the time that I run it. Any ideas? Full error message located here: https://gist.github.com/79b4b5521b20c49ba59b".  If anyone else gets that particular segmentation fault, I believe that I fixed it by upgrading the ohai gem to 0.6.14.rc.1.  I've bee
[2012-05-21 23:02:56 -0400] kevmo_: n running it all day in my dev environment and have not received the error once since the upgrade.
[2012-05-21 23:03:53 -0400] miah: kevmo_: can you run it with -debug?
[2012-05-21 23:04:24 -0400] kevmo_: miah: now that it is fixed?  or before?
[2012-05-21 23:04:42 -0400] miah: before
[2012-05-21 23:05:33 -0400] kevmo_: miah: I didn't.  I can roll it back tomorrow sometime and paste the results.
[2012-05-21 23:05:54 -0400] miah: ok
[2012-05-21 23:06:08 -0400] miah: if you're able, that might be good to narrow down and prove its been fixed or hasnt
[2012-05-21 23:07:14 -0400] kevmo_: miah:  sounds good.  I was receiving the error 3/4 of the time before.  I have run it over and over again today and have not gotten it again.  I'll see what I can do tomorrow.  Thanks
[2012-05-21 23:13:49 -0400] miah: thats good to hear
[2012-05-21 23:14:21 -0400] miah: http://tickets.opscode.com/browse/OHAI
[2012-05-21 23:14:38 -0400] miah: would be the place to file that, or if a bug already exists that matches it.. lets see
[2012-05-21 23:25:59 -0400] shuvo: I want to understand if we need to rethink the dev-sysadmin partitioning of machines/systems that used to exist when devs had their own "development boxes" and then used to "deliver a release" for production from which point the sysadmins use to take over and devs were shut off from accessing the production machines unless the boss said so.
[2012-05-21 23:26:04 -0400] shuvo: I can see a similar line of thinking in devops as well: the sysadmin is not happy to provide knife access to 'production' machines. Is this OK or a shadow of old habits?
[2012-05-21 23:27:21 -0400] miah: chef -> continuous integration
[2012-05-21 23:27:31 -0400] miah: make jenkins do your deploys
[2012-05-21 23:27:43 -0400] elijah-mbp: shuvo:  hopefully a crossfunctional team does deployment?
[2012-05-21 23:29:34 -0400] shuvo: miah, yup, that's what I seen be usually done, but what if the devs want to debug a live system? replicate production in dev and made duplicate flows of data/streams to both production ans dev?
[2012-05-21 23:29:51 -0400] shuvo: s/ans/and/
[2012-05-21 23:29:58 -0400] miah: devs should have access to prod
[2012-05-21 23:30:12 -0400] elijah-mbp: at some point you trust your devs, or you don't.
[2012-05-21 23:30:17 -0400] elijah-mbp: i've lived with both.
[2012-05-21 23:30:21 -0400] miah: elyup
[2012-05-21 23:30:28 -0400] shuvo: miah, I would love that, but is that the norm or exception?
[2012-05-21 23:30:29 -0400] miah: er, elijah-mbp
[2012-05-21 23:31:02 -0400] miah: depends on if you work in companies that are managed by fear or talent
[2012-05-21 23:31:06 -0400] shuvo: ha ha
[2012-05-21 23:31:08 -0400] elijah-mbp: shuvo:  sometimes management says 'thou shalt not' in order to keep a dev team responsible.  it's normal for it to be a point of tension, if that's what you're asking?
[2012-05-21 23:31:17 -0400] shuvo: indeed
[2012-05-21 23:32:00 -0400] elijah-mbp: shuvo: if you're doing things 'right' for production, you should not need devs in there much.  hopefully they can deploy a bit at a time, test, and evaluate whether things are good or not, before cutting an entire infrastructure over.
[2012-05-21 23:34:26 -0400] jwbnyc: Before I write another seemingly redundant recipe: Is there a cookbook that downloads, unzips and adds a java tool to the path?
[2012-05-21 23:34:59 -0400] chip-: The latest java cookbook has a java_ark function that might be 80% of what you need
[2012-05-21 23:35:37 -0400] jwbnyc: chip: I'll update and take a look. Thanks!
[2012-05-21 23:36:22 -0400] miah: use chef-ark, rather than java_ark
[2012-05-21 23:36:28 -0400] miah: github.com/bryanwb/chef-ark
[2012-05-21 23:36:40 -0400] chip-: That thing really needs to get included as a regular resource
[2012-05-21 23:36:44 -0400] miah: iirc, thats what java is using
[2012-05-21 23:39:11 -0400] shuvo: chip-, +1, bryanwb did a great job with that
[2012-05-21 23:50:49 -0400] oddityoverseer13: Hi everyone
[2012-05-21 23:50:57 -0400] oddityoverseer13: I am having some trouble with attributes
[2012-05-21 23:51:58 -0400] oddityoverseer13: I have a recipe that is using `node["simple_iptables"]["rules"], which I define in the defaults.rb attributes file
[2012-05-21 23:52:36 -0400] oddityoverseer13: then I want to merge those contents with the attribute definitions in /etc/chef/node.json. But I can't get them to merge
[2012-05-21 23:52:55 -0400] sparc_: Hmm, I was at the Friday training class, at ChefConf, and was looking for other opportunities for more class-oriented Chef.
[2012-05-21 23:53:24 -0400] sparc_: Does anyone know of other training oportunities coming up?  The training page at Opscode doesn't have anything listed :(
[2012-05-21 23:53:55 -0400] miah: sparc_: what do you need trained on? i can give you some assignments ;)
[2012-05-21 23:56:09 -0400] oddityoverseer13: Can anyone here help me with attributes?
[2012-05-21 23:58:01 -0400] sparc_: miah: oh cool.  mostly i want to get a set of tools set up, so i can pass a development environment around my department
[2012-05-21 23:58:26 -0400] sparc_: and say, ok, this is how we develop (with testing, with librarian, and with version control)
[2012-05-21 23:58:39 -0400] sparc_: to make it easy for them to start
[2012-05-21 23:58:45 -0400] miah: http://blog.base2.io/2012/05/01/vagrants-and-chefs-and-librarians-oh-my/
[2012-05-21 23:58:50 -0400] sparc_: cool
[2012-05-21 23:59:27 -0400] sparc_: hmm google has a cached copy of that

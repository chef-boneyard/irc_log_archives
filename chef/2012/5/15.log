[2012-05-15 00:00:12 -0400] shuvo: raz, things like that can make some money coupled with an attorney you know. it makes sense with an attorney who will work on your case for free because your tiny bit of code is now used by many big corps
[2012-05-15 00:01:59 -0400] raz: shuvo: the point is that the cla doesn't change one bit about it, except it makes it harder for drive-by contributors.
[2012-05-15 00:02:04 -0400] hoover_damm: raz, no you really cannot just contribute to the kernel by saying 'yes I want to kthnx'
[2012-05-15 00:02:26 -0400] hoover_damm: raz, do you understand the multiple layers that it takes to get a contribution into the linux kernel?
[2012-05-15 00:02:36 -0400] hoover_damm: it's a lot easier to contribute to Chef actually and sign the CLA
[2012-05-15 00:02:59 -0400] raz: hoover_damm: seen the link above?
[2012-05-15 00:03:15 -0400] hoover_damm: there was actually a good video the other week about the multiple layers before Linus gets a patch
[2012-05-15 00:03:16 -0400] UForgotten: raz I supported you the first time you had this argument but in the time you have spent bitching about it you could have signed it already
[2012-05-15 00:03:50 -0400] hoover_damm: UForgotten, he's actually been doing this now for weeks
[2012-05-15 00:03:58 -0400] raz: UForgotten: it's just arguing about the principle, i have no interest signing it
[2012-05-15 00:04:02 -0400] raz: hoover_damm: days ;)
[2012-05-15 00:04:11 -0400] hoover_damm: he could build a statue to his bitching
[2012-05-15 00:04:15 -0400] hoover_damm: and it would have gone to the moon
[2012-05-15 00:04:49 -0400] UForgotten: this is akin to saying it takes more paperwork to register to vote so fuck it I'm not voting
[2012-05-15 00:04:49 -0400] raz: i'll limit my bitching to the actual bugs from now on
[2012-05-15 00:04:57 -0400] UForgotten: which is why we have crappy voter turnout.
[2012-05-15 00:05:08 -0400] hoover_damm: UForgotten, pretty much
[2012-05-15 00:05:09 -0400] raz: UForgotten: i would actually agree on that ;)
[2012-05-15 00:05:17 -0400] raz: i know quite a few people who are simply too lazy to vote
[2012-05-15 00:05:18 -0400] hoover_damm: LOL that's irony
[2012-05-15 00:05:33 -0400] hoover_damm: lazy to secure their freedom
[2012-05-15 00:05:34 -0400] raz: and btw, i actually do vote
[2012-05-15 00:05:36 -0400] UForgotten: glad we could agree on that :)
[2012-05-15 00:05:40 -0400] raz: now you didn't expect that, did you ;)
[2012-05-15 00:06:12 -0400] raz: online gvt will eventually fix that i guess
[2012-05-15 00:06:20 -0400] UForgotten: this is murika, we don needa vowte
[2012-05-15 00:07:43 -0400] hoover_damm: putting the government online doesn't help
[2012-05-15 00:07:49 -0400] hoover_damm: when less then 25% of the population is online
[2012-05-15 00:07:59 -0400] hoover_damm: and certain states have less then 1% of the users who know how to use a computer
[2012-05-15 00:08:12 -0400] hoover_damm: there are always easy ways out
[2012-05-15 00:08:15 -0400] raz: hoover_damm: by the time the government is online 100% are online (and in western countries the figure already is pretty close to 80% i think)
[2012-05-15 00:08:22 -0400] raz: hoover_damm: smartphones
[2012-05-15 00:08:25 -0400] hoover_damm: the wise man spends his time to determine the best way to solve a problem
[2012-05-15 00:08:25 -0400] raz: hoover_damm: iVote.app
[2012-05-15 00:08:38 -0400] hoover_damm: instead of complaining about the problem and waiting for someone to solve it for him
[2012-05-15 00:08:41 -0400] UForgotten: plenty of people dont have smartphones
[2012-05-15 00:08:50 -0400] UForgotten: and refuse to get them in fact
[2012-05-15 00:09:05 -0400] raz: buy a senator! 20% off only this week, instant in-app purchase
[2012-05-15 00:09:29 -0400] shuvo: when are we going to get CHEF-867 though?
[2012-05-15 00:09:36 -0400] hoover_damm: and on that note... i'm going to ignore him
[2012-05-15 00:09:42 -0400] hoover_damm: say goodbye to raz in my irclogs forever.
[2012-05-15 00:10:09 -0400] raz: huh?
[2012-05-15 00:10:24 -0400] raz: because i suggested smartphone voting? ;)
[2012-05-15 00:12:08 -0400] UForgotten: shuvo: seems like chef-867 could be solved by implemeting your own pidfile check with a wrapper script, that I think is the argument in the ticket
[2012-05-15 00:12:40 -0400] UForgotten: honestly surprised nobody has fixed it tho given the simplicity of the problem - makes me sad how much I see low hanging fruit get ignored because its too simple to tackle
[2012-05-15 00:13:28 -0400] raz: by that logic postgres shouldn't have a lock either. user's own fault if he starts multiple instances up and corrupts his data.
[2012-05-15 00:13:35 -0400] raz: why didn't he write a wrapper..
[2012-05-15 00:13:51 -0400] josephholsten: if it's going to support demonizing it should handle its own pidfile lock. I'd rather it didn't do either, but either/or.
[2012-05-15 00:14:15 -0400] UForgotten: plenty of daemons dont do shit with pidfiles, they expect the init script to do it
[2012-05-15 00:14:25 -0400] shuvo: indeed
[2012-05-15 00:14:37 -0400] UForgotten: its an age old 'not my problem' problem
[2012-05-15 00:14:51 -0400] UForgotten: had that a lot in closed source with stupid things as simple as log rotation
[2012-05-15 00:15:07 -0400] UForgotten: one place didnt trust logrotated so they wrote their own internal log rotation thing instad of just accepting a damn signal
[2012-05-15 00:15:10 -0400] UForgotten: what a pain in the ass that was
[2012-05-15 00:15:49 -0400] raz: well, in practice all log should go to syslog anyway
[2012-05-15 00:16:00 -0400] UForgotten: not http logs
[2012-05-15 00:16:09 -0400] raz: all logs
[2012-05-15 00:16:11 -0400] UForgotten: way too much i/o for syslog
[2012-05-15 00:16:41 -0400] raz: non-issue
[2012-05-15 00:17:00 -0400] thom: CHEF-867 - it'd be reasonably easy to add an option to chef-client for a lock file, and then do the right stuff. but note the suggestion at the bottom of the ticket isn't quite right, because you want to time out that lock file eventually, otherwise if chef dies and doesn't unlock correctly you're hosed
[2012-05-15 00:17:18 -0400] thom: (i'm not going to write it because i don't especially care)
[2012-05-15 00:17:20 -0400] raz: modern syslogd's consume your logs faster than the filesystem
[2012-05-15 00:18:01 -0400] raz: thom: flock disappears when the process dies
[2012-05-15 00:18:11 -0400] shuvo: I use rsyslog with TCP forwarding gzipped data to consume all logs
[2012-05-15 00:18:22 -0400] raz: shuvo++
[2012-05-15 00:18:46 -0400] shuvo: Nah, it's not my intellect. I just founf  it easy to do it that way using flume :-D
[2012-05-15 00:19:13 -0400] raz: thom: to elaborate: no timeout needed unless chef locks up hard (in which case you likely don't want to start a second process, i.e. the lock is still valid)
[2012-05-15 00:19:32 -0400] UForgotten: thats why you use a pidfile
[2012-05-15 00:19:45 -0400] UForgotten: if the pid is gone, its cleared and all is good
[2012-05-15 00:20:17 -0400] raz: UForgotten: you don't need a pidfile for that - although it's the natural choice when you have it (which you should for other reasons) :)
[2012-05-15 00:20:23 -0400] shuvo: UForgotten, why not address chef-867? really
[2012-05-15 00:20:34 -0400] hoover_damm: the solution is a semaphore lock
[2012-05-15 00:20:51 -0400] UForgotten: heh TMTOWTDI sucks
[2012-05-15 00:21:11 -0400] raz: there isn't really..
[2012-05-15 00:21:26 -0400] raz: i mean, you could also use a socket or such
[2012-05-15 00:21:32 -0400] raz: but flock is exactly what you want
[2012-05-15 00:21:37 -0400] thom: raz: oh, even better
[2012-05-15 00:21:51 -0400] raz: it's reliable. it magically disappears when the process dies. what more could you want?
[2012-05-15 00:22:08 -0400] shuvo: hoover_damm, I hear chef runs on windows and there you need to use that CreateMutex thingy
[2012-05-15 00:22:17 -0400] shuvo: lock files should be xplatform
[2012-05-15 00:22:18 -0400] raz: pidfile (without a flock) is actually the anti-pattern for process locking
[2012-05-15 00:22:46 -0400] josephholsten: +1
[2012-05-15 00:22:52 -0400] raz: yes, no idea how to do it on win32 (but shuvo sounds like he know what he's talking bout)
[2012-05-15 00:22:58 -0400] josephholsten: pidfile + flock is the way
[2012-05-15 00:23:45 -0400] shuvo: raz, flock is mandatory in windows
[2012-05-15 00:23:49 -0400] shuvo: I like the flock idea
[2012-05-15 00:24:22 -0400] josephholsten: jeg2's guide to this stuff: http://www.slideshare.net/JamesEdwardGrayII/counting-on-god
[2012-05-15 00:25:03 -0400] shuvo: wth, I will try implementing it
[2012-05-15 00:25:05 -0400] shuvo: http://ruby-doc.org/core-1.9.3/File.html#method-i-flock
[2012-05-15 00:25:12 -0400] shuvo: works on pidfile
[2012-05-15 00:25:19 -0400] shuvo: show me some sample ruby code
[2012-05-15 00:25:28 -0400] raz: josephholsten: sadly we can't use it. he didn't sign the cla. :P
[2012-05-15 00:25:37 -0400] shuvo: leant ruby two weeks ago
[2012-05-15 00:26:09 -0400] raz: sorry, i'm shutting up already. just fix that bug :)
[2012-05-15 00:26:28 -0400] shuvo: hey, I gave you an ooportunity to implement locking. if you ain't on it, I will :-p
[2012-05-15 00:26:29 -0400] josephholsten: shucks, guess that means we can't have a proper process lock. guess we should just let a real process monitor do the job?
[2012-05-15 00:27:59 -0400] cheeseplus: it's pretty easy to sign the CLA
[2012-05-15 00:28:14 -0400] raz: it's not about any kind of monitoring, it's about basic housekeeping and preventing catastrophic run-modes
[2012-05-15 00:29:19 -0400] josephholsten: monitoring?
[2012-05-15 00:29:19 -0400] bawt: monitoring is vital, not bloat.
[2012-05-15 00:29:53 -0400] UForgotten: fish are friends, not food.
[2012-05-15 00:30:21 -0400] Cope: raz: updated ticket with my comments; thanks for your help.
[2012-05-15 00:30:24 -0400] raz: then why are they so tasty :P
[2012-05-15 00:30:39 -0400] shuvo: @bawt, monitoring is critical, not vital
[2012-05-15 00:30:41 -0400] raz: Cope: thank me some other time when i'm less offensive. ;)
[2012-05-15 00:30:55 -0400] Cope: raz: is that going to happen? ;)
[2012-05-15 00:31:32 -0400] raz: Cope: depends on your code-quality. you should see me on the redis mailing lists, i'm a lamb.
[2012-05-15 00:32:04 -0400] miah: i have a hunger
[2012-05-15 00:32:09 -0400] raz: miah: i recommend fish
[2012-05-15 00:32:20 -0400] josephholsten: raz: while you're contemplating nearly pedantic, any ideas on how to run chef for full system config without having to run it as root?
[2012-05-15 00:32:31 -0400] Cope: miah: me too
[2012-05-15 00:32:42 -0400] Cope: miah: let's eat!
[2012-05-15 00:32:48 -0400] raz: josephholsten: i don't think that's possible in most real world scenarios.
[2012-05-15 00:32:50 -0400] josephholsten: lamb and fish. mmmm
[2012-05-15 00:33:26 -0400] raz: josephholsten: i would strongly argue for making the default run-mode to be cron, though (but that's an entire different thread). long running ruby processes are just a bad idea.
[2012-05-15 00:34:03 -0400] raz: but i don't expect that to happen anytime soon and see it as a lesser issue (since it's already possible, just not the default)
[2012-05-15 00:34:19 -0400] josephholsten: another munin-like thundering herd, exciting
[2012-05-15 00:34:36 -0400] raz: josephholsten: sorry, chef-client i meant, not chef-server
[2012-05-15 00:34:47 -0400] raz: and don't get me started on munin :P
[2012-05-15 00:35:09 -0400] josephholsten: that's a different chat room...
[2012-05-15 00:35:18 -0400] raz: versus the munin codebase chef is a beauty
[2012-05-15 00:35:56 -0400] idetik: I have a most-likely quick, trivial question. Anyone available to help?
[2012-05-15 00:36:18 -0400] josephholsten: idetik: don't ask to ask : )
[2012-05-15 00:36:23 -0400] raz: idetik: rule 1 of irc... what josephholsten says
[2012-05-15 00:37:11 -0400] idetik: well then, here goes.  I don't see how Hosted Chef would be interfacing with my Eucalyptus cluster controller.  I'm looking at my organization profile page and only see an option to change my private key, which I don't want to do.
[2012-05-15 00:37:21 -0400] josephholsten: raz: well if you need another project to be annoying about: using 755 and 644 file modes is not sane. Groups are just useless in that case
[2012-05-15 00:37:51 -0400] raz: josephholsten: hm, which project are you talking about now?
[2012-05-15 00:37:58 -0400] idetik: Do I have to install the ruby interpreter on my Eucalyptus cluster controller?
[2012-05-15 00:38:05 -0400] idetik: and maybe the knife gem?
[2012-05-15 00:38:13 -0400] shuvo: idetik, ruby, chef client, ohai
[2012-05-15 00:38:28 -0400] idetik: so the eucalyptus cluster controller is a "chef client"?
[2012-05-15 00:38:40 -0400] josephholsten: yes, exactly
[2012-05-15 00:38:48 -0400] shuvo: idetik, you need knife on your laptop/workstations and not the node perse
[2012-05-15 00:39:11 -0400] idetik: so how about the images that are instantiated?  do those need ruby and chef client?
[2012-05-15 00:39:37 -0400] shuvo: images indeed need to have those two + ohai, yes
[2012-05-15 00:39:49 -0400] shuvo: you could also have them in a bootstrap script
[2012-05-15 00:40:19 -0400] idetik: I was looking at that, and thought it would be easier to troubleshoot if I just put ruby and chef client on them before I bundled them
[2012-05-15 00:40:34 -0400] shuvo: watch github/subhobroto for more details in a month (or so)
[2012-05-15 00:40:49 -0400] terryjfundak: Cope: I need to file a bug report on the "Full Shack Installer" Do I file that under Projects:Chef Fundamentals or Chef?
[2012-05-15 00:41:03 -0400] idetik: thanks for the tip
[2012-05-15 00:43:28 -0400] idetik: I suppose I should rebundle with Ohai now, since it seems required for sane functionality
[2012-05-15 00:43:45 -0400] idetik: thanks, shuvo
[2012-05-15 00:43:57 -0400] yfeldblum: raz, chef & its community are barely two years old ... give it a bit of time ...
[2012-05-15 00:43:59 -0400] shuvo: np
[2012-05-15 00:44:07 -0400] BryanWB: yfeldblum, missing you here man!
[2012-05-15 00:44:25 -0400] terryjfundak: Anyone else get the "Opscode's Full Stack Chef Installer" ( Workshop tommorow ) to download with this link: http://s3.amazonaws.com/opscode-full-stack/install.sh
[2012-05-15 00:44:37 -0400] shuvo: yfeldblum, give it a bit of time *or* add some more code ;-)
[2012-05-15 00:45:21 -0400] terryjfundak: I got a bug with Mac OS 10.7.4 ..... I'm assuming it is the "dot four" that is the problem
[2012-05-15 00:45:22 -0400] josephholsten: terryjfundak: what are you trying to do? that's mostly there for the knife bootstrap
[2012-05-15 00:45:23 -0400] yfeldblum: BryanWB, how's it going (up|down) there?
[2012-05-15 00:45:34 -0400] BryanWB: yfeldblum, awesome
[2012-05-15 00:45:50 -0400] yfeldblum: shuvo, time builds code ...
[2012-05-15 00:45:54 -0400] BryanWB: great to meet atomic-penguin in person
[2012-05-15 00:45:58 -0400] BryanWB: among others
[2012-05-15 00:45:58 -0400] raz: yfeldblum: nah, i'm the bully who speaks out the truths (and half-truths) in the annoying way that gets noticed and eventually either ignored or fixed.
[2012-05-15 00:46:29 -0400] terryjfundak: josephholsten: Instructions for tommorrow workshop say: "If Chef is not installed, use Opscodes's Full Stack Chef installer."
[2012-05-15 00:46:43 -0400] josephholsten: ah
[2012-05-15 00:46:53 -0400] raz: yfeldblum: when fundamentals are broken (for 2 years) then intensive care is needed :)
[2012-05-15 00:46:57 -0400] shuvo: I hope the workshop's going to be recorded or something
[2012-05-15 00:47:00 -0400] yfeldblum: BryanWB, awesome!
[2012-05-15 00:47:16 -0400] yfeldblum: raz, ironfan =/= fundamentals
[2012-05-15 00:47:29 -0400] terryjfundak: josephholsten: I was trying to get setup in advanced.
[2012-05-15 00:47:50 -0400] josephholsten: terryjfundak: yep, I'm having trouble too.
[2012-05-15 00:48:00 -0400] yfeldblum: raz, the fundamentals of chef are very solid (resources etc), with the assumption that you build cookbooks for your infrastructure
[2012-05-15 00:48:17 -0400] raz: yfeldblum: well that was kind of a side-discussion. i'm not blaming you for ironfan - but a bit for the culture that made ironfan happen. ;)
[2012-05-15 00:48:18 -0400] yfeldblum: raz, the cookbooks & their communities are in their toddler years
[2012-05-15 00:48:48 -0400] raz: yfeldblum: well, that puts me at the verge of ranting about architecture things. but you already know these.
[2012-05-15 00:48:49 -0400] yfeldblum: BryanWB, gotten any drinking in?
[2012-05-15 00:49:20 -0400] josephholsten: terryjfundak: looks like the most recent one for mac is mac_os_x-10.7.2-x86_64/chef-full-0.10.8-2-mac_os_x-10.7.2-x86_64.tar.gz
[2012-05-15 00:49:28 -0400] yfeldblum: Jim: Bernard how could you allow this to happen.
[2012-05-15 00:49:28 -0400] yfeldblum: Bernard: CBE Minister.
[2012-05-15 00:49:28 -0400] yfeldblum: Jim: CBE?
[2012-05-15 00:49:29 -0400] yfeldblum: Bernard: Can't be everywhere.
[2012-05-15 00:49:55 -0400] raz: you were there when dependencies to solr and couchbase were introduced. ;)
[2012-05-15 00:51:38 -0400] shuvo: chef gurus, about http://tickets.opscode.com/browse/CHEF-867: I won't lock on a file but DATA. Is that cool?
[2012-05-15 00:52:00 -0400] raz: DATA?
[2012-05-15 00:52:00 -0400] bawt: DATA is what the rest of the wiki states, i think
[2012-05-15 00:52:09 -0400] terryjfundak: josephholsten: seems to be saying that....  shall I go ahead? or wait till tommorrow..... that's the question....bug or no....
[2012-05-15 00:52:35 -0400] josephholsten: just a sec
[2012-05-15 00:53:30 -0400] josephholsten: k, OS X 10.7.x is unified to 10.7.2 for some reason
[2012-05-15 00:54:37 -0400] hoover_damm: solr replacing ferret was badass
[2012-05-15 00:55:34 -0400] raz: chef would run fine on an old fashioned rdbms. and that would remove most of the deployment issues and a large portion of unneeded complexity.
[2012-05-15 00:55:58 -0400] shuvo: raz, in case you don't remember, chef -> erlang + mysql
[2012-05-15 00:56:15 -0400] UForgotten: raz is this you? http://25.media.tumblr.com/tumblr_m1wczu8nIo1qetnkvo1_400.gif
[2012-05-15 00:56:26 -0400] raz: UForgotten: lol
[2012-05-15 00:56:34 -0400] raz: did you crawl my facebook!
[2012-05-15 00:56:53 -0400] raz: shuvo: not sure, you mean it was originally written in erlang running on mysql? ;)
[2012-05-15 00:57:08 -0400] yfeldblum: shuvo, but is mysql replacing the solr+rabbit+expander? or is mysql just replacing couch?
[2012-05-15 00:58:02 -0400] shuvo: yfeldblum, good question. I didnot find details about the new architecture, but my guess woould be that it could replace solr and rabbit, no?
[2012-05-15 00:58:20 -0400] raz: chef = ruby daemon + rdbms
[2012-05-15 00:58:24 -0400] raz: nothing else needed
[2012-05-15 00:58:40 -0400] josephholsten: terryjfundak: `wget http://s3.amazonaws.com/opscode-full-stack/mac_os_x-10.7.2-x86_64/chef-full-0.10.8-2-mac_os_x-10.7.2-x86_64.sh`
[2012-05-15 00:58:50 -0400] josephholsten: then run that with bash
[2012-05-15 00:58:57 -0400] raz: glad to hear you seem to actually work on getting there :)
[2012-05-15 00:59:13 -0400] terryjfundak: Josephholsten....got it thanx
[2012-05-15 00:59:49 -0400] sparc_: Is there something like a Puppet Dash for chef?  Was looking for an easy way to tell mgmt which nodes are out of compliance
[2012-05-15 01:00:34 -0400] shuvo: sparc_, chef status
[2012-05-15 01:00:44 -0400] sparc_: oh ok, thanks
[2012-05-15 01:01:42 -0400] cheeseplus: raz: (honest question) is there any reason to use rdbms over something lighter like berkleyDB/nosql?
[2012-05-15 01:01:48 -0400] cheeseplus: totally a leading question ;)
[2012-05-15 01:03:11 -0400] raz: cheeseplus: yes, rdbms is old, boring, proven tech that makes it easy to swap out mysql/postgres and use their replication facilities where adequate. binding to a nosql store could be fine also, but it's easy to end up with weirdness like the current conglomerate of "uh, let's use this, we might need the scalability".
[2012-05-15 01:03:52 -0400] cheeseplus: cool, just curious as I'm certainly not attached to either camp
[2012-05-15 01:03:53 -0400] raz: cheeseplus: having it in a boring sql store also makes it much easier to interface the backing store with $whatever-else
[2012-05-15 01:04:01 -0400] cheeseplus: for sure
[2012-05-15 01:05:14 -0400] raz: and in the pretty much everything more than performance. the amounts of data chef deals with could be dealt by sqlite in most deployments.
[2012-05-15 01:05:16 -0400] shuvo: chef gurus, should I add teh flock code to https://github.com/opscode/chef/blob/master/chef/lib/chef/client.rb#L147 to address http://tickets.opscode.com/browse/CHEF-867 ?
[2012-05-15 01:05:16 -0400] cheeseplus: almost all the applications or services I've supported have required rdbms for a variety of reasons
[2012-05-15 01:05:21 -0400] raz: matters*
[2012-05-15 01:05:38 -0400] shuvo: or should I ask at chef-hackers?
[2012-05-15 01:06:16 -0400] cheeseplus: raz: yea that is my curiosity, if you could just do sqlite or berkleydb (I was formerly an OpenLDAP guy) or if you _really_ need full on mysql/postgres
[2012-05-15 01:06:59 -0400] raz: cheeseplus: i have zero say in all this. as said, i'd vote for going the boring route, simply because i see no benefit in doing otherwise (and everyone who has installed a chef-server sees the risks attached to the latter..)
[2012-05-15 01:07:40 -0400] raz: shuvo: i'm not a chef-hacker and see that file for the first time. but it looks right to me ;)
[2012-05-15 01:07:42 -0400] cheeseplus: Still relatively new to Chef so I'm trying to poke at the edges to understand ;)
[2012-05-15 01:07:56 -0400] cheeseplus: will be using it daily very soon though
[2012-05-15 01:13:23 -0400] timsmith: has anyone out there modified the chef-client recipe to support running chef-client with runit on centos?
[2012-05-15 01:13:35 -0400] yfeldblum: cheeseplus, chef-server has to be designed to support large-scale deployments
[2012-05-15 01:13:39 -0400] timsmith: our chef-clients crash left and right and init isn't cutting it
[2012-05-15 01:14:00 -0400] cheeseplus: yfeldblum: oh I totally get that and it's relation to rdbms
[2012-05-15 01:14:42 -0400] cheeseplus: yfeldblum: that said I'll be under the employ of a nosql provider very soon so I wanted to see where the bottlenecks are ;)
[2012-05-15 01:14:46 -0400] yfeldblum: cheeseplus, chef-server also currently needs to support chef-extended-lucene queries
[2012-05-15 01:14:54 -0400] cheeseplus: gotha
[2012-05-15 01:14:58 -0400] cheeseplus: gotcha*
[2012-05-15 01:15:12 -0400] yfeldblum: cheeseplus, since so many cookbooks out there are querying the chef-server in the chef-extended-lucene language
[2012-05-15 01:16:53 -0400] BryanWB__: timsmith, do u have runit working on centos6?
[2012-05-15 01:18:14 -0400] timsmith: BryanWB__, I found a script on github to create the RPM for 2.1.1
[2012-05-15 01:18:29 -0400] BryanWB__: timsmith, oooh cool
[2012-05-15 01:20:35 -0400] cheeseplus: yfeldblum: good to know
[2012-05-15 01:47:02 -0400] miah: nommy noodles
[2012-05-15 02:54:22 -0400] elijah-mbp: sfdev
[2012-05-15 02:54:47 -0400] elijah-mbp: crap.  sorry.  i was trying to figure out what the irc chat was, mentioned earlier, that was to go with the hack night tonight.  am i just nuts that that was in here?
[2012-05-15 03:06:21 -0400] hoover_damm: you were right
[2012-05-15 03:06:32 -0400] hoover_damm: it's at 8pm in soma afaik
[2012-05-15 03:09:07 -0400] hoover_damm: elijah-mbp, http://www.meetup.com/San-Francisco-DevOps/events/62187472/
[2012-05-15 03:12:35 -0400] elijah-mbp: hoover_damm: yes, i found it, i feel like mud so i'm staying at my hotel rather than walking ~2 miles to get there.  ;)
[2012-05-15 03:13:59 -0400] hoover_damm: elijah-mbp, take a cab
[2012-05-15 03:14:13 -0400] hoover_damm: If you want that is
[2012-05-15 03:14:32 -0400] elijah-mbp: also, lazy.  ;)  going to be around for tomorrow afternoon, and thurs/fri on booth duty @ the conf.
[2012-05-15 03:15:10 -0400] elijah-mbp: i'm trying to fix up something here, or at least debug it (part of a knife plugin...) so that it works better.
[2012-05-15 03:16:48 -0400] elijah-mbp: :-)
[2012-05-15 03:21:11 -0400] miah: elijah-mbp: take a cab or just walk. there is pizza and tons of space
[2012-05-15 03:21:15 -0400] miah: come hang with us =)
[2012-05-15 03:21:21 -0400] vluther: howdy chefconf people
[2012-05-15 03:21:23 -0400] miah: also beer!
[2012-05-15 03:22:12 -0400] vluther: beer?
[2012-05-15 03:22:39 -0400] bawt: beer is http://en.wikipedia.org/wiki/Beer or delicious. and good for you.
[2012-05-15 03:27:22 -0400] elijah-mbp: miah:  how long are people planning to hack tonight?  and how many people on site now?
[2012-05-15 03:39:23 -0400] Cope: elijah-mbp: maybe 20 people?
[2012-05-15 03:40:13 -0400] Cope: elijah-mbp: not sure how long we have... but we can decamp to noisebridge
[2012-05-15 03:42:19 -0400] miah: ~30 people
[2012-05-15 03:42:27 -0400] miah: i think we're here for a few hours and then probably going back to noisebridge
[2012-05-15 03:42:36 -0400] miah: definitely join us =)
[2012-05-15 03:44:50 -0400] sparc_: people are already piling in for the conf :p
[2012-05-15 03:45:14 -0400] miah: im sure
[2012-05-15 03:45:37 -0400] elijah-mbp: i might take a cab over in a bit.  i've managed to locate one of the guys who can help with this plugin, we're debugging :-)
[2012-05-15 03:45:37 -0400] miah: ah
[2012-05-15 03:45:37 -0400] sparc_: funfun
[2012-05-15 03:45:46 -0400] miah: which plugin?
[2012-05-15 03:45:51 -0400] miah: we can debug here too!
[2012-05-15 03:46:04 -0400] elijah-mbp: ;)  knife-joyent.
[2012-05-15 03:46:05 -0400] Cope: come here! we have *ALL THE PEOPLE*
[2012-05-15 03:46:13 -0400] miah: yup =)
[2012-05-15 03:46:15 -0400] elijah-mbp: FIX ALL THE THINGS!
[2012-05-15 04:19:35 -0400] hippiehacker: I'm givig away my ticket to Chef 101 if anyone is interested: http://git.io/freechef101pass
[2012-05-15 04:19:39 -0400] hippiehacker: just solve for o 8)
[2012-05-15 04:20:16 -0400] atomic-penguin: I'm sunburned bad, it was worth it though :)
[2012-05-15 04:23:10 -0400] miah: lol
[2012-05-15 04:24:16 -0400] iroller: atomic-penguin: +1 sunburned yesterday because of driving cabriolet :)
[2012-05-15 04:24:37 -0400] atomic-penguin: iroller, so left-side sunburn then?
[2012-05-15 04:25:36 -0400] atomic-penguin: I packed some gold bond, so hopefully that will take some of the red out before the workshop tomorrow
[2012-05-15 04:25:47 -0400] iroller: atomic-penguin, almost all the face :) I was a passenger and there was a strong wind+sun into the face...
[2012-05-15 04:36:43 -0400] therawr: werddddd
[2012-05-15 05:54:19 -0400] cwj: thehar: hey
[2012-05-15 05:54:36 -0400] cwj: prepare for shiving
[2012-05-15 06:16:19 -0400] loadx: hi all, quick question. I asked this a long time ago http://help.opscode.com/discussions/questions/539-chef-output-stdout-while-process-is-running. basicly i want to pipe the output of a bash command to the chef logger
[2012-05-15 06:16:38 -0400] loadx: i would re-open the ticket but my login doesn't seem to be working and i cant reset the password :(
[2012-05-15 06:18:40 -0400] loadx: i ended up putting a hack together as a provider to use pty.spawn() but i was just seeing if there'd been any change since and noticed that even if i use the examples that Steven provided in the 4th post the output still fails to show in the chef logger
[2012-05-15 06:51:53 -0400] miah: yay home!
[2012-05-15 07:33:26 -0400] monoab: Hi all.  I have a problem since upgrading to 0.10.10.  Is there someone here that can help me please?
[2012-05-15 07:35:36 -0400] monoab: I am trying to create a symlink with the owner set and chef crokes with: "FATAL: TypeError: link[/tmp/home] (mycookbook::default line 1) had an error: TypeError: can't convert nil into String"
[2012-05-15 07:36:00 -0400] monoab: My cookbook worked perfectly on 0.10.2.
[2012-05-15 07:36:27 -0400] laurent\: monoab: CHEF-3102
[2012-05-15 07:38:08 -0400] monoab: Sorry laurent I'm new here.  Is CHEF-3102 a ticket number or something?
[2012-05-15 07:40:34 -0400] Cope: monoab: it's a known bug; we're working on it.
[2012-05-15 07:41:46 -0400] monoab: Thank you guys for your help!  I presume I can follow the status of this bug in the ticket tracker?
[2012-05-15 07:44:50 -0400] monoab: I reg. on tickets.opscode.com and can see the bug!  Thanks all, nice first IRC experience and friendly community!
[2012-05-15 08:06:30 -0400] venkat_: I would like some help with RetHat EL6 and the phusion passenger cookbook. The cookbook doesn't generate those conf settings like LoadModule on RHEL 6.
[2012-05-15 09:12:58 -0400] r2b2_nz: hi - i'm just wondering how one goes about obtaining the validator client private key from hosted chef?
[2012-05-15 09:40:27 -0400] masterkorp: Hello, is there any cookbook that would define some resources for amazon S3 service?
[2012-05-15 09:42:06 -0400] Cope: masterkorp: there's an aws cookbook
[2012-05-15 09:42:36 -0400] masterkorp: sweet
[2012-05-15 09:42:53 -0400] masterkorp: I hope to do some automatic S3 backups
[2012-05-15 09:43:12 -0400] masterkorp: Cope: can you give a link ?
[2012-05-15 09:47:35 -0400] linuxboy_: masterkorp: https://github.com/opscode/cookbooks/tree/master/aws ?
[2012-05-15 09:48:25 -0400] Cope: masterkorp: http://community.opscode.com/cookbooks/aws
[2012-05-15 09:49:26 -0400] Cope: linuxboy_: opscode/cookbooks is deprecated; development of cookbooks takes place in github.com/opscode-coookbooks
[2012-05-15 09:50:00 -0400] Cope: masterkorp: you should use the stable community cookbook; the git version is 'in development'
[2012-05-15 09:50:03 -0400] linuxboy_: Cope: Aaaah
[2012-05-15 09:51:12 -0400] masterkorp: sorry i am in derp mode today
[2012-05-15 10:00:04 -0400] masterkorp: This is for the EC2 not the S3
[2012-05-15 10:05:39 -0400] Cope: masterkorp: ah sorry - yes, there's not an S3 provider in that cookbook.
[2012-05-15 10:05:57 -0400] Cope: I misread you
[2012-05-15 10:06:27 -0400] masterkorp: no problem :=
[2012-05-15 10:06:32 -0400] masterkorp: *:)
[2012-05-15 10:24:56 -0400] mosez: can soebody tell me how i can "reset" rubygems paths after gem update --system with chef?
[2012-05-15 10:25:27 -0400] mosez: gem update works fine, but the gems get installed into the old destination before updating to latest version
[2012-05-15 10:28:07 -0400] mosez: have i got to install chef with gems instead of apt?
[2012-05-15 10:29:53 -0400] gale: you really want to install chef with gems
[2012-05-15 10:30:26 -0400] mosez: currently chef runs with apt packages from chef apt server
[2012-05-15 10:31:08 -0400] gale: from opscode's apt server I presume you mean?
[2012-05-15 10:31:19 -0400] mosez: gale: yes
[2012-05-15 10:32:01 -0400] mosez: i think i will give it a try with directly installed gems... i hope that works :)
[2012-05-15 10:32:13 -0400] gale: yes - I'm not that au fait with ruby gems but my understanding is that if you use apt you encounter problems with paths to gems - hence you should really use gems
[2012-05-15 10:33:54 -0400] mosez: and i hope that way i can update rubygems to a current version and install with the gem_package provider new systemwide gems
[2012-05-15 10:34:54 -0400] gale: i had a similar problem in the past and using the ruby gems version worked for me
[2012-05-15 10:44:41 -0400] Cope: mosez: what is your platform? I'd recommend using the chef-full packages from http://www.opscode.com/chef/insall
[2012-05-15 10:44:47 -0400] Cope: *install
[2012-05-15 10:44:48 -0400] KarlFreeman: has anybody had any success in being able to specify the distro bootstrap file when using Vagrant?
[2012-05-15 10:49:49 -0400] hmarr: Hey all - we're intermittently getting an issue where rackspace servers check in without the 'rackspace' and 'cloud' attributes
[2012-05-15 10:50:30 -0400] hmarr: has anyone else experienced this? any thoughts on how to resolve it would be greatly appreciated!
[2012-05-15 10:51:51 -0400] eugenmayer: Hello. Is it possible to "prepair" the settings of a node in the UI? Means, <client1> (and <node1>) is yet not part of chef. Can i configure the <node1> in nodes, without it getting overridden on the first knife bootstrap?
[2012-05-15 10:52:16 -0400] mosez: cope: debian
[2012-05-15 10:52:57 -0400] mosez: gale: thx, with chef installed thrue gems it seems to work well.
[2012-05-15 10:54:49 -0400] mosez: is there any way that i can fore a server reboot after installing a specific recipe?
[2012-05-15 10:54:57 -0400] mosez: s/fore/force/
[2012-05-15 10:55:50 -0400] mosez: because i need to reboot the root server into the newly installed kernel...
[2012-05-15 10:56:43 -0400] gale: mosez: I'd look at this
[2012-05-15 10:56:44 -0400] gale: http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2012-05-15 10:57:17 -0400] gale: check the run has completed okay and then just run a reboot command with a delay to allow the chef run to complete and save
[2012-05-15 11:08:01 -0400] codebeaker: hi all, I'm looking for tips on managing my chef-solo configuration, I'm a freelancer, and have some home-brewed cookbooks, also a lot cribbed from opscode 37signals, naturally, I'm using knife-solo, and that works for me, but I'm having a hard time to think about how to manage that config between home/the office personal and professional
[2012-05-15 11:10:10 -0400] gale: I'd recommend you use http://github.com/applicationsonline/librarian to manage your external dependancies
[2012-05-15 11:10:54 -0400] gale: works well
[2012-05-15 11:11:01 -0400] KarlFreeman: +1 on librarian
[2012-05-15 11:11:51 -0400] mosez: yeah... https://github.com/dreamcat4/site-cookbooks/tree/COOK-245/restart/ looks good on the first
[2012-05-15 11:12:02 -0400] gale: there should be no reason that your cookbooks should work fine for personal/work stuff either if you make them generic enough
[2012-05-15 11:13:44 -0400] codebeaker: gale, sure - I'm just new to this, and want to do it right from the get-go
[2012-05-15 11:13:55 -0400] codebeaker: using chef-solo got a lot more appraochable in the last 12 months or so
[2012-05-15 11:14:16 -0400] codebeaker: and the trend of sub-moduling the 3rd party cookbooks also got better :)
[2012-05-15 11:15:06 -0400] codebeaker: (read: it stopped)
[2012-05-15 11:15:09 -0400] gale: I use chef-server and client and override certain attributes by environment - dunno if you can do that with solo
[2012-05-15 11:15:51 -0400] gale: yeah I generally use the third party cookbooks in my own stuff which I find helps keep thing seperate
[2012-05-15 11:26:04 -0400] codebeaker: sure, slightly confusing thing is that the knife-solo tool advocates a split between "cookbooks" and "site cookbooks", but it's meaningless
[2012-05-15 11:26:20 -0400] codebeaker: but - it does offer per-hostname configuration files, which is handy
[2012-05-15 11:27:26 -0400] codebeaker: thanks for the librarian tip, I saw that before but stopped reading at "general purpose bundler toolkit" - wanted something focused at solving chef problems, but it is actually looking quite pomising
[2012-05-15 11:27:33 -0400] gale: I'm not a fan of tying things to hostname for my stuff as I want to be able to jump ship to a different server and just set it to be a certain role
[2012-05-15 11:28:42 -0400] codebeaker: yeah, absolutely - knife-solo doesn't force that though, it looks at the address you gave it to configure, and generates a skeleton file for that machine, but you can tell it "use that node manifest" - and it overrides it
[2012-05-15 11:46:42 -0400] mosez: is there a way to get the list of installed or updated packages within a only_if block?
[2012-05-15 11:58:01 -0400] mosez: hum... for the restart cookbook i need a check within the only_if to look if a new kernel have been installed. else i dont need the restart :(
[2012-05-15 11:58:53 -0400] gale: how would you find out if the new kernal has been installed normally?
[2012-05-15 11:59:08 -0400] gale: or do you want chef to tell you somehow
[2012-05-15 11:59:27 -0400] gale: can't believe i just mis-spelled kernel
[2012-05-15 12:01:31 -0400] mosez: gale: i want to get this info out of chef. i'm building an openvz cookbook. i need to reboot the server after installing (and eventually after updating) linux-image-openvz-amd64 package. https://github.com/dreamcat4/site-cookbooks/tree/COOK-245/restart looks good, but i can not see the notification to execute it only on install or update...
[2012-05-15 12:04:31 -0400] gale: can you not use dpkg to tell you if the package is installed
[2012-05-15 12:06:35 -0400] gale: only_if { `dpkg -l` =~ /ii linux-image-2.6.27.4/ }
[2012-05-15 12:06:39 -0400] gale: or similar
[2012-05-15 12:07:19 -0400] mosez: but it will be always installed... i need to execute the command only once... got to think about it
[2012-05-15 12:07:54 -0400] codebeaker: anyone else had the problem with librarian that "US-ASCII (Encoding::InvalidByteSequenceError)" when installing (from opscode)
[2012-05-15 12:08:07 -0400] codebeaker: I'm on 1.9.3-p194, not sure why this isn't working - I hven't done anything wrong
[2012-05-15 12:17:32 -0400] codebeaker: urgh, it was LC_* being set to "C"
[2012-05-15 12:20:18 -0400] gale: mosez: good point :)
[2012-05-15 12:22:50 -0400] mosez: gale: i think it got to be a combination of uname -r and dpkg -l...
[2012-05-15 12:27:43 -0400] gale: mosez: if it fails to install you could end up in a never ending reboot loop though
[2012-05-15 12:28:18 -0400] gale: or you installing with the package provider?
[2012-05-15 12:28:24 -0400] gale: -or +are
[2012-05-15 12:29:02 -0400] jmara: mosez: maybe something like this?  dpkg -l|grep "ii  linux-image-$(uname -r)" || reboot
[2012-05-15 12:29:55 -0400] jmara: mosez: only applies if you remove the old kernel after install/update
[2012-05-15 12:30:01 -0400] yfeldblum: codebeaker, https://github.com/applicationsonline/librarian/issues
[2012-05-15 12:30:27 -0400] yfeldblum: codebeaker, be sure to include the Cheffile, Cheffile.lock, and the output of any failing commands using --verbose
[2012-05-15 12:30:36 -0400] yfeldblum: as gists, preferably :P
[2012-05-15 12:30:51 -0400] codebeaker: yfeldblum: It's because my `locale` was set to "C", not en_GB.UTF-8
[2012-05-15 12:31:42 -0400] codebeaker: are you a maintainer/contributor ?
[2012-05-15 12:32:34 -0400] yfeldblum: codebeaker, author
[2012-05-15 12:32:43 -0400] till__: yfeldblum: do lots of cookbooks do some sort of 'magic' in metadata.rb?
[2012-05-15 12:32:50 -0400] till__: [re: the gh issue i commented on]
[2012-05-15 12:33:29 -0400] till__: maybe librarian could execute the code and dump it into the file to make it less dependant on the .git folder
[2012-05-15 12:33:30 -0400] jmara: mosez: or check /var/run/reboot-required this should only be available after the kernel packages is installed/updated
[2012-05-15 12:33:35 -0400] yfeldblum: till__, lots of cookbooks do File.read to get the content of the readme into the metadata - check out virtually any opscode cookbook
[2012-05-15 12:33:55 -0400] till__: ok, do you mean, File.read('../README') ?
[2012-05-15 12:34:01 -0400] yfeldblum: till__, right
[2012-05-15 12:34:15 -0400] mosez: jmara: really?
[2012-05-15 12:34:19 -0400] till__: hum, yeah - so do you think there is a way to capture the output when you include them with librarian?
[2012-05-15 12:34:23 -0400] till__: to make it stand-alone
[2012-05-15 12:34:42 -0400] jmara: mosez: this should be created in the postinst script of the debian package
[2012-05-15 12:35:26 -0400] yfeldblum: till__, there is a way, but i think the right thing to do is to leave the cookbooks untouched by default, but certainly open to compiling them if you specify an option
[2012-05-15 12:35:45 -0400] yfeldblum: till__, compiling metadata.rb to metadata.json
[2012-05-15 12:35:58 -0400] till__: yeah, something like that
[2012-05-15 12:36:06 -0400] till__: i prefer not to managle with git folders
[2012-05-15 12:36:12 -0400] yfeldblum: till__, and removing git folders
[2012-05-15 12:36:15 -0400] till__: yeah
[2012-05-15 12:36:19 -0400] till__: sweet
[2012-05-15 12:36:29 -0400] yfeldblum: till__, non-default, but optional extra
[2012-05-15 12:37:03 -0400] yfeldblum: latez; catch me in an hour
[2012-05-15 12:40:40 -0400] mosez: jmara: thx for the hint. that will be the solution :)
[2012-05-15 12:41:00 -0400] jmara: mosez: ur welcome ;)
[2012-05-15 12:41:01 -0400] mosez: jmara: there is also a file that shows which action requires the reboot
[2012-05-15 12:43:34 -0400] mosez: and for the ascii error stuff on ruby 1.9 it should help to add "# -*- encoding : utf-8 -*-" to the first line of all ruby files
[2012-05-15 12:44:03 -0400] mosez: # cat /var/run/reboot-required.pkgs
[2012-05-15 12:44:04 -0400] mosez: linux-base
[2012-05-15 12:44:11 -0400] mosez: yeah....
[2012-05-15 12:50:56 -0400] mosez: hum... i think i have really got to write a custom report... the restart cookbook is developed for solo, but i've got chef server running...
[2012-05-15 13:06:28 -0400] yfeldblum: till__, think "--built" would be useful instead of "--strip-git" & friends, where "--built" would apply a per-source build step to each cookbook? for the site source, it would compile a metadata.json if one is missing, and for the git source, it would compile a metadata.json if one is missing and also strip out the .git directory?
[2012-05-15 13:08:00 -0400] maddoc: Hrmm. Is it possible to modify variables inside a ruby_block and access them in other resources later? I tried just defining the variable before the block, but it doesn't seem to work (if I didn't make some other mistake).
[2012-05-15 13:09:33 -0400] yfeldblum: maddoc, not in the way that some people seem to want ... the point of chef is that you declare what the system shall look like and you do that declaration completely up-front, with all the details of what resources shall be brought into existence & conformance; and then, once you're completely done declaring what the system shall look like, does chef go off and make it so
[2012-05-15 13:11:22 -0400] maddoc: yfeldblum: Hm, ok. Gives me a bit of grief when I want to create a file in one recipe and read from it in another, in the same run.
[2012-05-15 13:12:00 -0400] yfeldblum: maddoc, why do you need to do that? perhaps there's another way
[2012-05-15 13:12:37 -0400] maddoc: yfeldblum: I have some secrets that I don't want as attributes, if I can avoid it.
[2012-05-15 13:12:54 -0400] yfeldblum: maddoc, ok
[2012-05-15 13:14:09 -0400] maddoc: yfeldblum: You don't happen to know any other way to do it?
[2012-05-15 13:15:38 -0400] yfeldblum: maddoc, read the file containing the secret during the "compile" phase & if the file doesn't exist, write it during the "compile" phase using a simple File.open("/path/to/file", "wb") { |f| f.write(secret) }
[2012-05-15 13:16:12 -0400] yfeldblum: maddoc, that way, you're treating it as a chef helper cache file, rather than as a resource being modeled in your recipe
[2012-05-15 13:19:01 -0400] binbasti: hi
[2012-05-15 13:19:46 -0400] binbasti: can someone point me to documentation for setting up/bootstrapping chef client on freebsd?
[2012-05-15 13:19:55 -0400] binbasti: can
[2012-05-15 13:19:56 -0400] binbasti: '
[2012-05-15 13:20:17 -0400] binbasti: can't find good info so far
[2012-05-15 13:20:19 -0400] Cope: binbasti: I've done quitr a bit of freebsd stuff
[2012-05-15 13:20:28 -0400] maddoc: yfeldblum: Ahh! Thanks.
[2012-05-15 13:20:35 -0400] binbasti: Cope: do you use a custom bootstrap template?
[2012-05-15 13:21:21 -0400] Cope: binbasti: yes; i have a few - depending on whether you are happy to use packages from freebsd, want to build from src using ports, or have already built your packages.
[2012-05-15 13:22:07 -0400] Cope: actually this week msf and I might well hack on full-stack installers for netbsd, freebsd and openbsd
[2012-05-15 13:23:54 -0400] Cope: so that would be the way to go ideally.
[2012-05-15 13:24:45 -0400] yfeldblum: maddoc, https://gist.github.com/8c00897605b5d772117a
[2012-05-15 13:26:06 -0400] Cope: binbasti: this is my ports bootstrap; it's not been used for some time, but it'll get you started.  I suspect you'll need to build rubygems manulaly now, as the freebsd ruby19 port doesn't include gem, iirc
[2012-05-15 13:26:14 -0400] binbasti: Cope: cool
[2012-05-15 13:26:28 -0400] binbasti: could you share one for using ports?
[2012-05-15 13:26:43 -0400] Cope: https://gist.github.com/2701761
[2012-05-15 13:26:55 -0400] binbasti: nice, thanks!
[2012-05-15 13:26:57 -0400] Cope: so you'll need to have a bourne shell
[2012-05-15 13:27:00 -0400] Cope: not csh
[2012-05-15 13:27:00 -0400] yfeldblum: maddoc, https://gist.github.com/8c00897605b5d772117a fixed now
[2012-05-15 13:27:13 -0400] Cope: but that should get you staretd anyway
[2012-05-15 13:27:19 -0400] binbasti: ok
[2012-05-15 13:27:44 -0400] Cope: it's pretty likely that msf and I will have something to play with soon for all bsd systems
[2012-05-15 13:28:08 -0400] maddoc: yfeldblum: Sweet. :-) Hate when I get stuck on some stupid problem with an easy solution. Probably just need to bang my head against my desk some more.
[2012-05-15 13:28:18 -0400] vdvluc: Cope: that is good to hear
[2012-05-15 13:28:21 -0400] yfeldblum: maddoc, :P
[2012-05-15 13:28:28 -0400] binbasti: good news :)
[2012-05-15 13:28:33 -0400] vdvluc: Cope: am willing to test for NetBSD
[2012-05-15 13:28:39 -0400] Cope: vdvluc: superb
[2012-05-15 13:28:50 -0400] yfeldblum: maddoc, in this case it's figuring out how exactly it is that chef works and how exactly it is that chef expects you & your recipes to work :P
[2012-05-15 13:30:07 -0400] maddoc: yfeldblum: Yeah. Works better than trying to forcing it into doing something weird. ;-/
[2012-05-15 13:30:09 -0400] yfeldblum: maddoc, chef expects you to write recipes very differently from the usual step-by-step scripts ... chef does not give you step-by-step
[2012-05-15 13:30:16 -0400] binbasti: Cope: do i understand it right that ruby needs to be pre-installed?
[2012-05-15 13:31:04 -0400] yfeldblum: maddoc, that's one of the big issues with it that people tend to run into
[2012-05-15 13:31:26 -0400] Cope: binbasti: no
[2012-05-15 13:31:40 -0400] Cope: binbasti: building iconv will pull in all the dependencies
[2012-05-15 13:31:45 -0400] binbasti: ah ok
[2012-05-15 13:31:48 -0400] binbasti: thx
[2012-05-15 13:32:04 -0400] Cope: but I'm pretty sure you'll need rubygems as an etra step now
[2012-05-15 13:32:10 -0400] Cope: *extra
[2012-05-15 13:32:47 -0400] binbasti: ok
[2012-05-15 13:32:54 -0400] Cope: binbasti: btw, this will be very slow; if you build packages and stick them on a server somewhere, or share them over nfs, it's VERY fast
[2012-05-15 13:33:24 -0400] Cope: I've bootstrapped machines with prebuilt packages in -seconds- literally - 10 secs or so
[2012-05-15 13:33:29 -0400] binbasti: speed is not an issue
[2012-05-15 13:33:40 -0400] Cope: ok cool
[2012-05-15 13:34:03 -0400] jperry2: morning
[2012-05-15 13:34:36 -0400] jperry2: If I add a depends to a cookbook will that recipe be executed or it needs to be part of the runlist to actually execute?
[2012-05-15 13:34:37 -0400] maddoc: yfeldblum: Yeah, it's a bit counterintuitive at first. This time I actually realized that, but didn't get further than remembering that you could stuff things into a ruby_block to execute them later.
[2012-05-15 13:34:52 -0400] jperry2: meaning is depends on used if you are actually reusing code in another recipe?
[2012-05-15 13:35:01 -0400] till__: can anyone explain why this is important: http://acrmp.github.com/foodcritic/#FC001
[2012-05-15 13:36:11 -0400] Cope: till__: yes :) It's important to encourage and share and enforce standards and catch possible syntax errors
[2012-05-15 13:36:15 -0400] jperry2: for example if I have a recipe that uses "unzip"
[2012-05-15 13:36:31 -0400] till__: Cope: i mean, symbols vs. strings specifically
[2012-05-15 13:36:36 -0400] jperry2: is the only way to ensure unzip is installed is to add it to the run List?
[2012-05-15 13:37:04 -0400] jperry2: is there a way to set something in the cookbook that uses unzip to tell chef run this recipe before myself?
[2012-05-15 13:37:19 -0400] Cope: till__: symbols is a very 'rubyish' way to write stuff; we want to encourage people to not be intimidated by chef, so using string keys is preferred
[2012-05-15 13:38:06 -0400] till__: so there is no actual advantage asdie from 'less ruby'?
[2012-05-15 13:38:08 -0400] till__: =)
[2012-05-15 13:38:13 -0400] laurent\: i like the color of :symbols in my emacs !
[2012-05-15 13:38:19 -0400] till__: upside*
[2012-05-15 13:38:36 -0400] Cope: till__: i'm not sure you can do string interpolation on a symbol
[2012-05-15 13:38:43 -0400] Cope: till__: that's another advantage to using strings
[2012-05-15 13:38:50 -0400] till__: what's that for?
[2012-05-15 13:39:13 -0400] Cope: well you might want to dynamically set an attribute key in a recipe
[2012-05-15 13:39:29 -0400] Cope: node[foo][bar][baz_live]
[2012-05-15 13:39:37 -0400] yfeldblum: Cope, symbols isn't really ruby-ish per se: plenty of languages have them (lisp, erlang)
[2012-05-15 13:39:42 -0400] laurent\: i guess Mash is also too complicated for users, let's use the plain Hash ! ;-)
[2012-05-15 13:39:44 -0400] Cope: or node [foo][bar][baz_qs]
[2012-05-15 13:39:48 -0400] binbasti: strings vs symbols https://gist.github.com/2701857
[2012-05-15 13:40:00 -0400] yfeldblum: Cope, my issue with symbols is that the point of them is to represent names of things in your program, such as method names or keyword argument names
[2012-05-15 13:40:32 -0400] Cope: yfeldblum: sure; there are arguments both sides, but the recommendation that has been set is to use strings.
[2012-05-15 13:40:54 -0400] Cope: yfeldblum: right, yeah i see that
[2012-05-15 13:40:55 -0400] yfeldblum: Cope, and using symbols in place of strings in other types of contexts, such as normal hash lookups, is sort of abusing them
[2012-05-15 13:41:39 -0400] laurent\: i write things like that : if node[:server] and node.server[:fs] and node.server.fs[:something]... is that wrong as well ? -:)
[2012-05-15 13:42:14 -0400] yfeldblum: laurent\, it'll work, but if it were in my cookbook i'd be likely to patch it
[2012-05-15 13:42:29 -0400] laurent\: :)
[2012-05-15 13:42:31 -0400] jespada: ssd7_, any news regarding knife bootstrap and the chef version installed after that on the target node?, hi btw
[2012-05-15 13:42:41 -0400] laurent\: i like it like that :)
[2012-05-15 13:43:34 -0400] laurent\: again, i don't see the point of using Mash if access by String indexes is recommended
[2012-05-15 13:43:44 -0400] laurent\: of/in/i never know
[2012-05-15 13:43:53 -0400] yfeldblum: laurent\, the problem with it is that you're trying to treat your node as an object with methods rather than as a hash with key-value lookups, when it in fact is really a hash with key-value lookups
[2012-05-15 13:44:28 -0400] yfeldblum: laurent\, it was cool 2 years ago, and people started using it, so it kind of has to stay supported now
[2012-05-15 13:46:20 -0400] jperry2: can anyone explain the "depends" option in cookbook metadata file?
[2012-05-15 13:47:04 -0400] jperry2: from the documentation it doesn't seem that if you add a depends that it actually executes the recipe in that cookbook
[2012-05-15 13:47:17 -0400] jperry2: is there any way to accomplish this without adding it to the run list?
[2012-05-15 13:47:50 -0400] yfeldblum: jperry2, it says that chef-client must download that cookbook too, so that if one recipe in the depending cookbook said `include_recipe "depended-on-cookbook::some-recipe"`, then the depended-on cookbook is there
[2012-05-15 13:48:13 -0400] yfeldblum: jperry2, i also use it in librarian-chef to figure out a consistent resolution of all the cookbooks your infrastructure repository will need
[2012-05-15 13:48:47 -0400] jperry2: will it actually execute that recipe though?
[2012-05-15 13:49:00 -0400] jperry2: if you use "include_recipe ..."
[2012-05-15 13:49:04 -0400] yfeldblum: jperry2, yes
[2012-05-15 13:49:15 -0400] jperry2: okay but "depends" doesn't do that right?
[2012-05-15 13:49:44 -0400] yfeldblum: jperry2, correct, depends only establishes a dependency relation, not a run-this-recipe relation
[2012-05-15 13:50:36 -0400] yfeldblum: jperry2, but keep in mind that if one recipe says `include_recipe "depended-on-cookbook::some-recipe"`, then you have to have `depends "depended-on-cookbook"` in your metadata.rb too
[2012-05-15 13:50:38 -0400] jperry2: I see, so the combination should be add the "depends" to the metadata file and add an "include_recipe" to the recipe that needs it run before hand
[2012-05-15 13:50:49 -0400] yfeldblum: jperry2, right
[2012-05-15 13:50:53 -0400] jperry2: got it
[2012-05-15 13:50:54 -0400] jperry2: thanks
[2012-05-15 13:52:06 -0400] laurent\: yfeldblum: yep, good point (method vs key/value)
[2012-05-15 14:16:01 -0400] UForgotten: FATAL: NoMethodError: undefined method `delete' for role
[2012-05-15 14:16:08 -0400] UForgotten: anyone seen that before in chef-solo?
[2012-05-15 14:16:17 -0400] UForgotten: there is no 'delete' anywhere in my code that I see
[2012-05-15 14:43:48 -0400] jperry2: curious, how well does chef work on a windows machine?
[2012-05-15 14:45:18 -0400] gondoi: what is the best way to deal with using chef-full and needing to install ruby gems?
[2012-05-15 14:45:33 -0400] gondoi: lots of recipes do a package install (i.e. mysql)
[2012-05-15 14:46:00 -0400] gondoi: but that doesn't work since it's not loaded in the path of the embedded ruby of /opt
[2012-05-15 14:52:53 -0400] UForgotten: gondoi: not sure what you mean by chef-full, it runs as root, your package manager should be in the path
[2012-05-15 14:53:29 -0400] mosez: i think i will build my own reboot cookbook based on handlers and the chef_handler cookbook...
[2012-05-15 14:54:33 -0400] mosez: jperry2: it should work... there is a pure windows cookbook too: https://github.com/opscode/cookbooks/tree/master/windows
[2012-05-15 14:55:12 -0400] yfeldblum: jperry2, support is very new for windows
[2012-05-15 14:56:48 -0400] gondoi: UForgotten: sorry chef-full as in the bootstrap script
[2012-05-15 14:56:57 -0400] gondoi: so ruby is running in /opt/opscode/embedded
[2012-05-15 14:57:03 -0400] zts: gondoi: gem_package should do the right thing as of 0.10.10 - see http://tickets.opscode.com/browse/CHEF-2879
[2012-05-15 14:57:10 -0400] gondoi: but a package install of ruby-mysql will install it systemwide, and embedded won't use that path
[2012-05-15 14:57:16 -0400] zts: gondoi: sorry, I mean chef_gem
[2012-05-15 14:57:24 -0400] UForgotten: gondoi: ah, yeah if thats the thing they are doing for chefcon I thnk its broken
[2012-05-15 14:57:46 -0400] UForgotten: easier to install ruby yourself and then gem install chef
[2012-05-15 14:57:57 -0400] Cope: gondoi: you should not use ruby in /opt/chef/embedded for general use
[2012-05-15 14:58:18 -0400] Cope: UForgotten: you should use the chef-full packahge, that is the supported and recommended approach
[2012-05-15 14:58:40 -0400] Cope: gondoi: you should use chef to install ruby; and use your OS ruby to provide gems
[2012-05-15 14:58:59 -0400] Cope: the ruby we ship in /opt/chef/embedded is *only* to run chef
[2012-05-15 14:59:20 -0400] gondoi: Cope: but i'm running chef with it
[2012-05-15 14:59:24 -0400] Cope: it's built and optimized for exactly that purpose
[2012-05-15 14:59:43 -0400] gondoi: in mysql and the wordpress cookbooks there is a require 'mysql'
[2012-05-15 14:59:52 -0400] Cope: yes
[2012-05-15 14:59:57 -0400] gondoi: but that bombs because the mysql cookbook installs the system package of ruby-mysql
[2012-05-15 15:00:01 -0400] Cope: so you need to install ruby and the mysql gem
[2012-05-15 15:00:22 -0400] gondoi: i'm confused cause you just said to use embedded ruby to run chef
[2012-05-15 15:01:20 -0400] Cope: gondoi: dude, i'm running late for an appointment - I'll show youlater ok?
[2012-05-15 15:01:26 -0400] gondoi: k
[2012-05-15 15:02:39 -0400] kevmo: I'm trying to create a user using a chef recipe and it won't let me set an attribute for the password.  can anyone give me a use case of how something like this might work?  Thank you. Code that is not working here: https://gist.github.com/806fd6bfd254f128a9ed
[2012-05-15 15:04:22 -0400] zts: kevmo: have you looked at the examples in the docs?  http://wiki.opscode.com/display/chef/Resources#Resources-User
[2012-05-15 15:05:10 -0400] zts: kevmo: what you have should be okay, if that attribute is a hash (not a plaintext password) - in what way didn't it work?
[2012-05-15 15:05:11 -0400] kevmo: zts: I have, and I have not figured it out
[2012-05-15 15:06:23 -0400] kevmo: zts: I must not be creating the hash correctly.  I tried using "echo "theplaintextpassword" | makepasswd --clearfrom=- --crypt-md5 |awk '{ print $2 }'" from the example but I must not be using that code correctly because it error's out no matter what I try
[2012-05-15 15:06:52 -0400] zts: kevmo: if the Chef run is erroring, could you please gist/pastebin the output from the run?
[2012-05-15 15:07:27 -0400] jespada: gondoi, what Cope means, is that the chef-full came with a "little" version of ruby and some gems just to run chef-client on the node
[2012-05-15 15:07:37 -0400] UForgotten: I've been in this channel for a while and had never heard of chef-full until now
[2012-05-15 15:07:57 -0400] jespada: UForgotten, chef-full is the omnibus installer
[2012-05-15 15:08:01 -0400] zts: kevmo: and just to check the other prerequisite, can you confirm that you have ruby-shadow installed on your node?
[2012-05-15 15:08:05 -0400] UForgotten: kevmo: you also need ruby-passwd module
[2012-05-15 15:08:07 -0400] UForgotten: yeah
[2012-05-15 15:08:11 -0400] UForgotten: ruby-shadow
[2012-05-15 15:08:35 -0400] UForgotten: jespada: I know that now, but had never heard of it. its obviously new/beta, it says so on the website :)
[2012-05-15 15:08:57 -0400] kevmo: zts: have ruby-shadow
[2012-05-15 15:09:08 -0400] zts: Yeah, I'm not sure about Cope's comment that it's supported and recommended - perhaps that's going to be an announcement at chefconf :)
[2012-05-15 15:09:23 -0400] jespada: oh.. I think is a good approach
[2012-05-15 15:09:30 -0400] jespada: I like it
[2012-05-15 15:09:33 -0400] kevmo: UForgotten: will install ruby-password now
[2012-05-15 15:09:44 -0400] UForgotten: kevmo: no it was ruby-shadow I was thinking of
[2012-05-15 15:10:15 -0400] kevmo: UForgotten: yep, got that
[2012-05-15 15:10:55 -0400] UForgotten: kevmo: then it should work. what is it not doing?
[2012-05-15 15:13:21 -0400] UForgotten: kevmo: if it is depositing the hash properly in /etc/shadow as you passed it to the user method, then it's not chef's fault
[2012-05-15 15:13:56 -0400] kevmo: Results pasted to Here, I am only trying to run echo "theplaintextpassword" | makepasswd --clearfrom=- --crypt-md5 |awk '{ print $2 }' in this, https://gist.github.com/d9522edbb1636b07bceb
[2012-05-15 15:16:24 -0400] UForgotten: kevmo: first of all, why are you calling that from chef?
[2012-05-15 15:16:30 -0400] UForgotten: just generate the password and stash it in an attribute
[2012-05-15 15:16:47 -0400] UForgotten: crazy to regenerate it every time
[2012-05-15 15:17:08 -0400] zts: kevmo: ah.  Yeah, I guess that documentation is assuming something
[2012-05-15 15:17:32 -0400] zts: kevmo: see the "Random User" example in the Resources doc that I linked, that's what your resource should end up looking like
[2012-05-15 15:17:41 -0400] webframp: kevmo: why not just try it like the mysql recipe does it? https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb
[2012-05-15 15:17:49 -0400] kevmo: ok. thanks
[2012-05-15 15:17:57 -0400] zts: kevmo: For the examples of creating a hash, it's expected that you'd run that in the shell, and then save the results as an attribute (or in your recipe)
[2012-05-15 15:19:07 -0400] LinuxHorn: ummmmmm, what?
[2012-05-15 15:19:08 -0400] LinuxHorn: [Tue, 15 May 2012 15:17:57 +0000] FATAL: Mixlib::ShellOut::ShellCommandFailed: python_pip[virtualenv] (python::virtualenv line 23) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2012-05-15 15:19:53 -0400] kevmo: ok.  That makes more sense
[2012-05-15 15:20:39 -0400] kevmo: You are correct, I was reading the documentation incorrectly.
[2012-05-15 15:21:16 -0400] LinuxHorn: i get that error when installing any pip
[2012-05-15 15:21:21 -0400] zts: kevmo: I'm trying to update the wiki now to make it clear where you should use those commands.  First time I've made an edit, so we'll see how that goes :)
[2012-05-15 15:21:38 -0400] hoover_damm: LinuxHorn, if you are having problems you should run chef-client -l debug and output as much of the output to gist.github.com or another pastie site
[2012-05-15 15:21:54 -0400] hoover_damm: LinuxHorn, and then share that link with people in here so they can see more context of your problem
[2012-05-15 15:22:04 -0400] LinuxHorn: will do
[2012-05-15 15:22:05 -0400] LinuxHorn: thx
[2012-05-15 15:22:17 -0400] hoover_damm: LinuxHorn, pip failing to install any egg could be anything :) so the more detail we have the better of an answer we can give.
[2012-05-15 15:24:03 -0400] LinuxHorn: here is a gist of the pip failure
[2012-05-15 15:24:04 -0400] LinuxHorn: https://gist.github.com/2702618
[2012-05-15 15:24:17 -0400] kevmo: zts: Thanks
[2012-05-15 15:27:58 -0400] hoover_damm: LinuxHorn, rackspace-monitoring-cli has no version?
[2012-05-15 15:28:05 -0400] hoover_damm: that seems to be the issue
[2012-05-15 15:28:14 -0400] hoover_damm: the actual egg
[2012-05-15 15:28:43 -0400] hoover_damm: LinuxHorn, you can run pip freeze locally, but the grep command is what failed
[2012-05-15 15:28:43 -0400] sampikesley: Is there a sensible method of pulling different bits of template into a single conf file?
[2012-05-15 15:28:53 -0400] hoover_damm: the egg installed
[2012-05-15 15:28:57 -0400] zts: kevmo: no problem - if you run across any other docs that are confusing/misleading, do please point them out (even if you figure out the answer for yourself).
[2012-05-15 15:29:07 -0400] hoover_damm: well maybe it did
[2012-05-15 15:39:20 -0400] LinuxHorn: hoover_damm: i've installed this recipe before without stating a version
[2012-05-15 15:39:31 -0400] LinuxHorn: do i need to state a version somehwere to get it to work?
[2012-05-15 15:41:46 -0400] hoover_damm: LinuxHorn, to freeze you have to have the version I believe
[2012-05-15 15:42:09 -0400] hoover_damm: LinuxHorn, I don't generally try to install the latest version of anything anymore.  So I really can't say 100%
[2012-05-15 15:43:09 -0400] LinuxHorn: hmmmm
[2012-05-15 15:44:08 -0400] gp5st: hello, when i do a knife winrm i get an authorization error.  i just recreated the client to key ensure it's there and the right one. still doesn't work. i'm able to do knife client/node list, create, delete, &c with the key
[2012-05-15 15:44:55 -0400] gp5st: ok, well maybe not anymore now that i changed the key
[2012-05-15 15:46:27 -0400] gp5st: i'm sure i'm just doing something stupid. i regenerated the client key, stuck it in my .chef folder to where.chef/chef.rb is poiting to and i get an authenticationi problem.  any help and a second set of eyes would be appriciated
[2012-05-15 15:47:29 -0400] gp5st: sorry, .chef/knife.rb
[2012-05-15 15:48:09 -0400] LinuxHorn: hoover_damm: this python cookbook was working fine yesterday
[2012-05-15 15:48:25 -0400] LinuxHorn: no changes, just started failing on the pip freeze step
[2012-05-15 15:48:38 -0400] LinuxHorn: will fail on the first pip it gets to
[2012-05-15 15:49:10 -0400] KarlHungus: cookbook versioning question: i have a vendor supplied cookbook with local modifications. the changes are sent to the upstream, but not yet merged. how do i version my local copy of the cookbook? I can't do x.y.z+1, because that will likely collide with fucture upstream versions, and x.y.z.p isn't valid cookbook versioning
[2012-05-15 15:49:41 -0400] AntonZ: use git ?
[2012-05-15 15:50:06 -0400] AntonZ: github.com
[2012-05-15 15:50:21 -0400] KarlHungus: AntonZ: yes. i version control things. what are you actually suggesting?
[2012-05-15 15:51:11 -0400] gp5st: http://pastebin.com/XEyFML6j is my knife.rb X.pem is the output of the webui regerate key for a client command
[2012-05-15 15:51:20 -0400] till__: the "environment" attribute to the execute resource - it's "nil" by default. does "nil" imply inheriting the environment from the parent, or is nil == empty
[2012-05-15 15:52:07 -0400] yfeldblum: KarlHungus, what are you trying to accomplish overall?
[2012-05-15 15:52:09 -0400] gp5st: regenerate*
[2012-05-15 15:52:15 -0400] KarlHungus: AntonZ: i believe my question is more releae engineering, and not version control =)
[2012-05-15 15:52:16 -0400] AntonZ: Karl, keep your cookbooks over at github, which will keep versionining in tact for you
[2012-05-15 15:52:22 -0400] AntonZ: ah okay :)
[2012-05-15 15:52:53 -0400] yfeldblum: KarlHungus, versions are upstream's versions only; upstream releases & versions are upstream's versions
[2012-05-15 15:53:24 -0400] KarlHungus: yfeldblum: i have a vendored cookbook. its at version x.y.z. i patch it locally, send patches upstream (as a pull request). i need to use the locally patched cookbook immediately. how do i version it?
[2012-05-15 15:53:25 -0400] yfeldblum: KarlHungus, you can certainly track upstream and maintain a copy with patches, but you would want to keep upstream's version
[2012-05-15 15:53:40 -0400] yfeldblum: KarlHungus, as x.y.z
[2012-05-15 15:54:20 -0400] KarlHungus: so my x.y.z is not their x.y.z, and i can't determine which is newer
[2012-05-15 15:54:51 -0400] KarlHungus: thats not a viable solution, imho
[2012-05-15 15:54:55 -0400] yfeldblum: KarlHungus, why?
[2012-05-15 15:55:26 -0400] KarlHungus: because which of my hosts have the x.y.z (upstream) cookbook, and which have x.y.z (my local version) cookbook?
[2012-05-15 15:55:41 -0400] KarlHungus: i can't tell, because they collide.
[2012-05-15 15:56:03 -0400] yfeldblum: KarlHungus, don't do it by version, then; do it by checksums
[2012-05-15 15:56:16 -0400] hoover_damm: LinuxHorn, pip freeze | grep -i '^rackspace-monitoring-cli=='
[2012-05-15 15:56:17 -0400] hoover_damm: echo $?
[2012-05-15 15:56:23 -0400] hoover_damm: LinuxHorn, what does that output?
[2012-05-15 15:56:35 -0400] KarlHungus: knife cookbook list -a   <-- versions, not checksums.
[2012-05-15 15:56:36 -0400] LinuxHorn: well, before i installed it by hand, nothing
[2012-05-15 15:57:01 -0400] yfeldblum: KarlHungus, so don't use that command
[2012-05-15 15:57:08 -0400] LinuxHorn: root@hosted-client:~# pip freeze | grep -i '^rackspace-monitoring-cli=='
[2012-05-15 15:57:09 -0400] LinuxHorn: root@hosted-client:~#
[2012-05-15 15:57:09 -0400] ssd7_: Hrmm. So this tab was red meaning someone mentioned me.  But I can't see it in the backscroll.  If you still need me feel free to ping again.
[2012-05-15 15:57:19 -0400] LinuxHorn: (did an uninstall of it before running that command
[2012-05-15 15:57:23 -0400] yfeldblum: KarlHungus, use ruby to ask the chef-server-api for the cookbook version metadata, which includes the checksums
[2012-05-15 15:57:45 -0400] hoover_damm: LinuxHorn, right.  what version of the python cookbook do you have?
[2012-05-15 15:57:52 -0400] KarlHungus: yfeldblum: thats... gross.
[2012-05-15 15:57:56 -0400] yfeldblum: KarlHungus, https://github.com/boundary/knife-plugins/blob/master/lib/boundary_knife_plugins.rb
[2012-05-15 15:57:58 -0400] LinuxHorn: 1.0.6
[2012-05-15 15:58:25 -0400] yfeldblum: KarlHungus, no, chef-server-api is a REST API, and comes with a Ruby client API as well which you can use
[2012-05-15 15:58:27 -0400] KarlHungus: i mean, i do see what you're suggesting. it just feels very hackish
[2012-05-15 15:58:29 -0400] LinuxHorn: brb
[2012-05-15 15:58:34 -0400] yfeldblum: KarlHungus, it's the opposite of hackish
[2012-05-15 15:58:45 -0400] KarlHungus: its circumventing good release engineering practices
[2012-05-15 15:58:46 -0400] yfeldblum: KarlHungus, trying to warp `knife cookbook list -a` to do that is hackish
[2012-05-15 15:59:08 -0400] LinuxHorn: right, pip freeze will only show you the installed versions  i have 1.0.6 of python cookbook hoover_damm
[2012-05-15 15:59:12 -0400] KarlHungus: oh, i don't want to warp anything =) i just want to use versions as versions, not arbitrary labels
[2012-05-15 15:59:17 -0400] yfeldblum: KarlHungus, because knife has a limited CLI over the full REST API, exposing only a small part of the REST API
[2012-05-15 15:59:59 -0400] hoover_damm: LinuxHorn, recently from git?
[2012-05-15 16:00:04 -0400] KarlHungus: yfeldblum: ok. i see your point. counter-point, how would i spec this in librarian? (or a similar system)
[2012-05-15 16:00:08 -0400] LinuxHorn: last week from git hoover_damm
[2012-05-15 16:00:08 -0400] hoover_damm: LinuxHorn, it appears that someone hasn't been bumping the metadata properly
[2012-05-15 16:00:24 -0400] hoover_damm: LinuxHorn, cool yeah 19 days ago got something that looked like it might either fix or cause this issue
[2012-05-15 16:00:31 -0400] LinuxHorn: shit, 1x1 with manager, back in a bit
[2012-05-15 16:00:33 -0400] LinuxHorn: thx for help
[2012-05-15 16:01:01 -0400] yfeldblum: KarlHungus, using an alternative source
[2012-05-15 16:01:05 -0400] hoover_damm: LinuxHorn, I'd suggest git bisect on the python cookbook until it works as it's likely just one or two off commits
[2012-05-15 16:01:36 -0400] yfeldblum: KarlHungus, if it's in your repo, use the `:path =>` source; if it's in a separate repo, use the `:git =>` source
[2012-05-15 16:02:26 -0400] KarlHungus: bah. that still gives me no indication that the version i specifiy is actually ahead of the canonical source
[2012-05-15 16:02:45 -0400] yfeldblum: KarlHungus, no, but your git history does
[2012-05-15 16:02:57 -0400] yfeldblum: KarlHungus, and you can always ask the chef-server-api what the checksums are
[2012-05-15 16:03:25 -0400] ribo: in the deploy resource, can I tune how many revisions are kept?
[2012-05-15 16:03:43 -0400] yfeldblum: KarlHungus, the default assumption is that every time you use a git or path source, it's either because the cookbook is non-public or because it is public but you forked & patched it
[2012-05-15 16:04:05 -0400] yfeldblum: KarlHungus, then it just remains to comparing SHAs or checksums
[2012-05-15 16:04:14 -0400] KarlHungus: yfeldblum: i don't agree with that assumption. its a ugly mix of version control and release engineering, imho
[2012-05-15 16:05:05 -0400] KarlHungus: however, i definitely see your perspective. it will work, i just think its less than ideal
[2012-05-15 16:06:11 -0400] yfeldblum: KarlHungus, yeah, it's kind of an escape hatch from release engineering
[2012-05-15 16:07:06 -0400] hoover_damm: KarlHungus, it's not that ugly
[2012-05-15 16:07:32 -0400] hoover_damm: KarlHungus, I have worked with ugly release engineering systems.  librarian was pleasant compared to others
[2012-05-15 16:08:07 -0400] hoover_damm: and sighs
[2012-05-15 16:09:14 -0400] yfeldblum: hoover_damm, thanks :P ... because librarian isn't a release engineering system; it's a bundling system (comparable to omnibus vs packages)
[2012-05-15 16:09:22 -0400] KarlHungus: hoover_damm: it is ugly because i can't tell what version i'm actually using without a bunch of manual legwork =)
[2012-05-15 16:09:42 -0400] yfeldblum: KarlHungus, write a knife plugin and stick it in .chef/plugins/knife/
[2012-05-15 16:10:02 -0400] yfeldblum: KarlHungus, then from then on you can do `knife cookbook local checksums $NAME`
[2012-05-15 16:10:11 -0400] till__: anyone have thoughts on my 'environment' question?
[2012-05-15 16:10:12 -0400] yfeldblum: KarlHungus, and `knife cookbook remote checksums $NAME`
[2012-05-15 16:10:19 -0400] KarlHungus: yfeldblum: frankly, its not that big of a problem (yet). i can live with a few inconsistencies before investing the time to change things
[2012-05-15 16:10:21 -0400] yfeldblum: KarlHungus, or however you write the plugin
[2012-05-15 16:10:21 -0400] gp5st: where else would knife look for configuration besides .chef?
[2012-05-15 16:10:42 -0400] KarlHungus: checksums == version control, version numbers/names = releng
[2012-05-15 16:11:40 -0400] KarlHungus: mixing them gets us to the point where everyone just does crap like "oh, grab from foo's github page, master branch, ref xxyyzz" which KILLS compatibility efforts
[2012-05-15 16:12:16 -0400] KarlHungus: see rubygems for reference ;) and confer with distro package maintainers for extended rants. haha
[2012-05-15 16:12:19 -0400] yfeldblum: KarlHungus, that's true, which is why everyone should tag their releases in git and push their releases to opscode community site
[2012-05-15 16:12:46 -0400] yfeldblum: KarlHungus, doesn't solve everything
[2012-05-15 16:14:28 -0400] KarlHungus: yfeldblum: yeah. agreed. i suppose i'm losing track of my original problem anyhow.
[2012-05-15 16:21:10 -0400] bytheway: Wonder if anyone can give me some pointers.  My team manages ~300 servers, java type stuff, weblogic, apache, etc
[2012-05-15 16:22:05 -0400] bytheway: We have some automation, but I want to start looking into chef.  My big mental hang up is how to bring along all this legacy stuff into chef without disturbing what is currently running
[2012-05-15 16:22:27 -0400] bytheway: Lots of helps out there for spinning up brand new, not a lot of helps for legacy
[2012-05-15 16:24:13 -0400] Randm: testing
[2012-05-15 16:24:14 -0400] Randm: lots of testing.
[2012-05-15 16:24:29 -0400] Randm: produce cookbooks that make identical outputs
[2012-05-15 16:25:13 -0400] bytheway: So on first run you'd expect the cookbook to overwrite what is currently there, but ensure its identical?
[2012-05-15 16:25:24 -0400] Randm: if you don't have functional staging environments you can do this on, you'll never be able to prove your stakeholders that it's ok to do
[2012-05-15 16:25:44 -0400] Randm: on any run you should get the expected output
[2012-05-15 16:26:13 -0400] Randm: you'll see the word idempotence all over the place.
[2012-05-15 16:26:33 -0400] bytheway: But chef is setup to generally leave unchanged confit untouched, right?
[2012-05-15 16:26:36 -0400] Randm: basically if you don't have a cookbook describing what to do on the system, it won't get changed.
[2012-05-15 16:27:10 -0400] bytheway: Won't get changed assuming chef already knows about it
[2012-05-15 16:28:30 -0400] gale: although if you start using the opscode/community stuff, they will probably blat all over your configs
[2012-05-15 16:28:39 -0400] Randm: yeah
[2012-05-15 16:29:18 -0400] elijah-mbp: it's really probably best to be a jealous mistress and manage your stuff yourself - if you don't understand what it does, don't use it.
[2012-05-15 16:29:35 -0400] bytheway: That's my concern.  Though the way we do things, my guess is most of our cookbooks will need to be home grown.  I guess the up to me to write them to do the right thing
[2012-05-15 16:29:50 -0400] elijah-mbp: hey, we run solaris - ALL of our cookbooks are homegrown.  ;)
[2012-05-15 16:30:11 -0400] Randm: there's basic stuff like managing the jvm, packages, might be some weblogic stuff out there, apache's probably good
[2012-05-15 16:30:26 -0400] Randm: snmp, ntp, random stuff in your system config
[2012-05-15 16:30:31 -0400] kallen: yay chefconf
[2012-05-15 16:30:53 -0400] litex: Yay.
[2012-05-15 16:30:53 -0400] elijah-mbp: copypasta where appropriate, of course, but.... usually you wanna make sure you have a tight rein on stuff.  i wouldn't want to have chef apply kernel updates that i didn't plan for, for instance.
[2012-05-15 16:31:01 -0400] Randm: it won't
[2012-05-15 16:31:16 -0400] Randm: unless you have something declaring you always want that package to be up to date
[2012-05-15 16:31:27 -0400] Randm: so if you don't know ruby already, I'd learn
[2012-05-15 16:31:32 -0400] elijah-mbp: (I mean if you adopt someone else's cookbooks and don't understand them - that's a nasty rabbithole you could fall down.)
[2012-05-15 16:31:48 -0400] Randm: but yeah, that falls back to testing
[2012-05-15 16:31:52 -0400] Randm: and staging
[2012-05-15 16:31:59 -0400] bytheway: I'm fine with ruby, luckily
[2012-05-15 16:32:51 -0400] litex: 3/quit
[2012-05-15 16:32:56 -0400] litex: ... fail.
[2012-05-15 16:34:10 -0400] bytheway: I think the only way I'm really going to figure out how to go forward is just build some stuff out in a proof of concept sort of deal.
[2012-05-15 16:34:25 -0400] Randm: yeah
[2012-05-15 16:34:58 -0400] bytheway: Sad I was of late to arrange chefconf, maybe next year
[2012-05-15 16:34:58 -0400] Randm: this depends wildly on your application, but if you don't have a functional test you're going to have some nervous people
[2012-05-15 16:35:16 -0400] bytheway: Dang iPad keyboard
[2012-05-15 16:36:33 -0400] bytheway: Actually have 400+ individual java apps.  So we can start with some that are not quite as critical.
[2012-05-15 16:38:25 -0400] c_t: bytheway: I'm glad I'm not the only one who didn't get his shit together in time
[2012-05-15 16:43:56 -0400] yfeldblum: bytheway, clearly if they were written in java, they're all not critical
[2012-05-15 16:45:32 -0400] bytheway: Better java than .net.  At least
[2012-05-15 16:45:45 -0400] bytheway: We can still run on Linux
[2012-05-15 16:47:06 -0400] yfeldblum: bytheway, mono
[2012-05-15 16:47:08 -0400] bytheway: Our enterprisey stuff is mostly java.  I'm sneaking ruby in the back door for devops stuff
[2012-05-15 16:49:01 -0400] jodell: is there a way to pass custom data to the knife config on the target bootstrapping node?
[2012-05-15 17:02:26 -0400] gondoi: UForgotten: my client scrolled off your response to me :(
[2012-05-15 17:02:52 -0400] gondoi: UForgotten: not even sure it was you that responded to me
[2012-05-15 17:03:50 -0400] UForgotten: I've been afk for an hour so I doubt it was me
[2012-05-15 17:04:11 -0400] gondoi: darn
[2012-05-15 17:04:52 -0400] gondoi: i saw a bit of it on my growl notice something about chef embedded being used for specific cookbooks but not all or something
[2012-05-15 17:08:13 -0400] hoover_damm: gondoi, opscode does have this channel logged as well as myself
[2012-05-15 17:08:41 -0400] hoover_damm: gondoi, so if you want to review what was said in #chef or #chef-hacking you can find it either on http://logs.likens.us or http://community.opscode.com/chat/chef
[2012-05-15 17:09:45 -0400] alex88: when i git clone the chef-repo.git i actually create a repository of cookbooks that i'll push to chef server? and chef-server will use that for configuring nodes?
[2012-05-15 17:14:15 -0400] cwj: alex88: yes, you customize your chef-repo with cookbooks, documentation, roles, etc and use the knife command to upload cookbooks, roles, environments, data bag items, etc to the chef-server
[2012-05-15 17:15:55 -0400] alex88: cwj, thank you for explaining
[2012-05-15 17:16:06 -0400] cwj: sure
[2012-05-15 17:16:37 -0400] cwj: you might want to consider using Librarian to manage the cookbooks in your chef-repo
[2012-05-15 17:17:00 -0400] cwj: its something akin to using bundler to manage the ruby gems required for a project
[2012-05-15 17:17:17 -0400] alex88: one thing i miss, you can have multiple nodes, roles etc.. but is there an abstract for a "full application" composed for example by load balancer, web servers and db servers, which enables you to easly add/remove web servers and db servers?
[2012-05-15 17:17:32 -0400] cwj: that would be roles
[2012-05-15 17:18:13 -0400] cwj: e.g. role[webserver] would specify a run_list that might look like recipe[apache2], reclpe[myawesomewebapp]
[2012-05-15 17:18:21 -0400] cwj: you can also nest roles inside roles
[2012-05-15 17:18:51 -0400] BryanWB: yo chefs, good morning :)
[2012-05-15 17:18:53 -0400] alex88: cwj, great, so a webapp can be a set of roles but, is there a parent for roles?
[2012-05-15 17:19:06 -0400] cwj: so you could have a role[base] that includes recipes for installing software you want on every system, then include that role inside the run_list of another role
[2012-05-15 17:19:11 -0400] BryanWB: cwj, u at chefconf?
[2012-05-15 17:19:19 -0400] cwj: BryanWB: catching a flight this afternoon
[2012-05-15 17:19:24 -0400] BryanWB: cwj, kewl
[2012-05-15 17:19:33 -0400] BryanWB: be great to meet u
[2012-05-15 17:19:40 -0400] cwj: yeah likewise!
[2012-05-15 17:19:56 -0400] cwj: alex88: did my comment about nesting roles answer your question?
[2012-05-15 17:20:33 -0400] alex88: cwj, i think so :) actually i've just started with chef so trying to get the basics.. we'll see :)
[2012-05-15 17:20:47 -0400] miah: hi
[2012-05-15 17:20:48 -0400] cwj: cool, i think you've come to the right place for help
[2012-05-15 17:20:54 -0400] cwj: hi miah
[2012-05-15 17:20:54 -0400] miah: heading to the conf shortly
[2012-05-15 17:21:07 -0400] alex88: eheh, yeh, i've seen a better support compared to other channels here on freenode :)
[2012-05-15 17:21:35 -0400] miah: because sharing is caring!
[2012-05-15 17:21:37 -0400] hoover_damm: alex88, have you taken a look at the training material?
[2012-05-15 17:22:02 -0400] alex88: hoover_damm, yup, i'm trying some tutorials with vagrant for testing on local machine
[2012-05-15 17:22:41 -0400] alex88: just learnt the basics of attributes, templates, recipes.. going with roles :)
[2012-05-15 17:22:44 -0400] hoover_damm: alex88, sounds good :) you'll have lots of questions so if you can summarize your questions at once it may make it a little easier
[2012-05-15 17:23:00 -0400] miah: i started converting the collectd_plugin definitions into lwrp last night. but i was so exhausted...
[2012-05-15 17:23:03 -0400] hoover_damm: and remember to take your time and don't be afraid to ask questions.  Mailing list is also good for questions
[2012-05-15 17:23:34 -0400] hoover_damm: miah, heh that's why I do what's required more often then finishing :(
[2012-05-15 17:23:38 -0400] alex88: hoover_damm, i'll be here for sure :) first i need to finish my openstack setup @ work servers, later i'll have some fun with chef ;)
[2012-05-15 17:24:36 -0400] miah: hoover_damm: ya. i've been doing whats required as well. the cookbook is fairly usable right now, but the definition (or my usage of it) is broken. i'm attempting to understand it better =)
[2012-05-15 17:24:58 -0400] cwj: dunno if anyone else is using/interested in newrelic, but i added a lwrp to the 'newrelic' cookbook which sends deploy notifications to their API
[2012-05-15 17:25:02 -0400] cwj: https://github.com/needle/chef-newrelic/tree/deploy-notification-lwrp
[2012-05-15 17:25:03 -0400] hoover_damm: miah, it didn't work for me.
[2012-05-15 17:25:15 -0400] hoover_damm: and it was crazy enough that I just didn't care
[2012-05-15 17:25:38 -0400] hoover_damm: it's partially that and i'm still deciding what plugins I want standard
[2012-05-15 17:25:44 -0400] miah: ah i see
[2012-05-15 17:25:49 -0400] hoover_damm: the move to graphite has made me re-adjust my thinking on plugins
[2012-05-15 17:26:01 -0400] miah: i don't package any plugins standard in my build script. but you can tweak that via attribute =)
[2012-05-15 17:26:17 -0400] hoover_damm: I compile all plugins
[2012-05-15 17:26:36 -0400] miah: https://github.com/miah/chef-collectd/blob/refactor/recipes/_install_from_source.rb
[2012-05-15 17:26:58 -0400] hoover_damm: that's the advantage of the deb
[2012-05-15 17:27:06 -0400] hoover_damm: to do all those plugiins in source is scary
[2012-05-15 17:27:11 -0400] hoover_damm: plugins*
[2012-05-15 17:27:15 -0400] miah: ya =)
[2012-05-15 17:27:33 -0400] miah: i made it really flexible though. so i just add a few attributes to my role and its magic
[2012-05-15 17:28:35 -0400] hoover_damm: after my redis cookbook yesterday i'm done with the install_from_source / ark /
[2012-05-15 17:28:37 -0400] hoover_damm: ..
[2012-05-15 17:28:40 -0400] miah: i need to go back and rewrite my rundeck cookbook too. i've learned quite a bit =)
[2012-05-15 17:28:46 -0400] miah: hoover_damm: lol
[2012-05-15 17:28:48 -0400] hoover_damm: time to stop depending on silly people who don't know better
[2012-05-15 17:28:56 -0400] miah: my redis cookbook not good enough?
[2012-05-15 17:29:18 -0400] hoover_damm: you don't have one
[2012-05-15 17:29:20 -0400] miah: LIES
[2012-05-15 17:29:26 -0400] miah: https://github.com/cxinc/chef-redis
[2012-05-15 17:29:26 -0400] hoover_damm: github.com/miah
[2012-05-15 17:29:32 -0400] hoover_damm: well that doesn't count
[2012-05-15 17:29:41 -0400] miah: its mine
[2012-05-15 17:29:47 -0400] miah: i'll fork it :P
[2012-05-15 17:29:56 -0400] miah: there. easier to find.
[2012-05-15 17:30:21 -0400] hoover_damm: yep i didn't use yours... now looking at it
[2012-05-15 17:30:22 -0400] miah: i wrote it. its just hosted on my companies org
[2012-05-15 17:30:24 -0400] hoover_damm: i likely wouldn't
[2012-05-15 17:30:33 -0400] miah: HMPH
[2012-05-15 17:30:33 -0400] hoover_damm: complexity is the first factor i look for
[2012-05-15 17:30:46 -0400] hoover_damm: when the cookbook has more recipes then 2 or 3, that's my first warning sign
[2012-05-15 17:31:25 -0400] hoover_damm: mine operates on 2 recipes technically
[2012-05-15 17:31:31 -0400] miah: limiting your cookbook to a singular recipe, without lwrp is just making yourself an ass by assumption
[2012-05-15 17:31:33 -0400] hoover_damm: so I am starting to creep on too many features
[2012-05-15 17:31:52 -0400] hoover_damm: 2 or 3 should be fine, but it's the warning point
[2012-05-15 17:31:58 -0400] hoover_damm: note the word /warning/
[2012-05-15 17:32:01 -0400] miah: ya
[2012-05-15 17:32:19 -0400] miah: so, i break my cookbooks up into recipe 'ingredients' (if you will)
[2012-05-15 17:32:27 -0400] miah: easier to move things over to lwrp
[2012-05-15 17:32:30 -0400] hoover_damm: https://github.com/damm/redis/blob/master/recipes/install_from_upstream.rb
[2012-05-15 17:32:32 -0400] hoover_damm: self cleaning
[2012-05-15 17:32:35 -0400] miah: and build meta cookbooks ontop of it
[2012-05-15 17:32:48 -0400] miah: so you're not stuck with a great cookbook with a single feature that you hate
[2012-05-15 17:32:58 -0400] hoover_damm: we're all working around problems that sadly are related to redis
[2012-05-15 17:33:00 -0400] hoover_damm: and our distro
[2012-05-15 17:33:08 -0400] hoover_damm: so i'm not proud to compile via source
[2012-05-15 17:33:18 -0400] miah: true. i have a bit of a problem with it myself.
[2012-05-15 17:33:25 -0400] hoover_damm: but as the ppa on launchpad is 2.4.9 and ubuntu is even older
[2012-05-15 17:33:31 -0400] miah: but i need to get around to setting up pennyworth..
[2012-05-15 17:33:43 -0400] hoover_damm: I just package up regularly
[2012-05-15 17:33:49 -0400] hoover_damm: I was a package manager at previous gigs
[2012-05-15 17:34:04 -0400] hoover_damm: and pennyworth doesn't let me do my OCD tendancies of checking packages really
[2012-05-15 17:34:08 -0400] hoover_damm: that are sadly my OCD
[2012-05-15 17:34:49 -0400] miah: uninstall is important
[2012-05-15 17:35:07 -0400] hoover_damm: nah
[2012-05-15 17:35:10 -0400] hoover_damm: cruft is more important
[2012-05-15 17:35:23 -0400] hoover_damm: not installing everything, or leaving parts behind when you uninstall
[2012-05-15 17:35:38 -0400] miah: lots of things contribute to cruft though
[2012-05-15 17:35:42 -0400] hoover_damm: package management is very difficult in general and to automate it feels premature
[2012-05-15 17:35:49 -0400] hoover_damm: right
[2012-05-15 17:35:51 -0400] miah: you could just as easily start to rail cookbooks for not including functional log rotation
[2012-05-15 17:36:43 -0400] miah: or chef itself for making /tmp icky (template rendering!!)
[2012-05-15 17:37:18 -0400] cwj: what, you dont reboot fortnightly????
[2012-05-15 17:37:23 -0400] miah: reboot?
[2012-05-15 17:37:51 -0400] cwj: yeah ive never tried it either
[2012-05-15 17:40:25 -0400] Mithrandir: kernel security holes show up often enough that you end up rebooting that often. :-P
[2012-05-15 17:40:55 -0400] miah: true true
[2012-05-15 17:41:38 -0400] miah: ok. i need to get ready. bbl.
[2012-05-15 17:47:02 -0400] alex88: during some reading i've found #{Chef::Config[:file_cache_path]} that's a path inside the node which stores temp file for deploying?
[2012-05-15 17:51:02 -0400] cwj: yep
[2012-05-15 17:51:27 -0400] cwj: its where the node caches cookbooks downloaded from the chef server
[2012-05-15 17:51:56 -0400] alex88: cwj, last one, i'm reading this: http://reiddraper.com/first-chef-recipe/
[2012-05-15 17:52:12 -0400] alex88: i've understood pretty everything, in line "bash "compile_redis_source""
[2012-05-15 17:52:23 -0400] alex88: the "creates" what does?
[2012-05-15 17:53:15 -0400] cwj: it helps chef know that the bash script executed correctly
[2012-05-15 17:53:30 -0400] cwj: sometimes you script might fail in a way chef cannot easily detect
[2012-05-15 17:53:46 -0400] cwj: at least thats my understanding
[2012-05-15 17:55:10 -0400] cwj: ah looks like i am mistaken
[2012-05-15 17:55:18 -0400] cwj: http://wiki.opscode.com/display/chef/Resources#Resources-Execute
[2012-05-15 17:55:27 -0400] cwj: "A file this command creates - if the file exists, the command will not be run."
[2012-05-15 17:56:27 -0400] cwj: so that 'creates' line would be equivalent to not_if { File.exists("/usr/local/bin/redis-server") }
[2012-05-15 17:57:26 -0400] alex88: so in that case it creates the redis-server binary or it says it has failed if the file is not there?
[2012-05-15 17:58:01 -0400] yfeldblum: alex88, it creates the redis-server binary, or does nothing if it is there (because there's nothing left to do)
[2012-05-15 17:58:20 -0400] cwj: it skips the execution of the bash['compile_redis_source'] resource if the file already exists
[2012-05-15 17:58:20 -0400] alex88: yfeldblum, cwj ok got it..thank you ;)
[2012-05-15 17:59:25 -0400] cwj: time for me to get ready for my flight, see some of you in person soon :)
[2012-05-15 17:59:39 -0400] alex88: cwj, oh true that.. thank you again, have fun
[2012-05-15 18:07:24 -0400] miah: for some reason.. i read that as.. 'see some of you in prison soon'
[2012-05-15 18:11:32 -0400] alex88: gtg, thank you again
[2012-05-15 18:19:37 -0400] hoover_damm: typing out loud?
[2012-05-15 18:22:45 -0400] miah: i only type out loud on a model-m
[2012-05-15 18:23:16 -0400] iroller: does anybody have a d3 client? :)
[2012-05-15 18:23:41 -0400] iroller: on chefconf
[2012-05-15 18:24:13 -0400] miah: probably.
[2012-05-15 18:29:10 -0400] BryanWB: ssd7_ u at chefconf?
[2012-05-15 18:33:47 -0400] miah: BryanWB: yall eat lunch yet? im omw.
[2012-05-15 18:35:37 -0400] imeyer: Dear people at Chef Conf downloading Diablo 3.
[2012-05-15 18:35:39 -0400] imeyer: STOP IT
[2012-05-15 18:35:52 -0400] cnf: :P
[2012-05-15 18:35:54 -0400] cnf: yeah!
[2012-05-15 18:35:57 -0400] cnf: D3 sucks anyway!
[2012-05-15 18:36:32 -0400] imeyer: haha
[2012-05-15 18:36:52 -0400] yfeldblum: shouldn't have scheduled chefconf for d3 release week
[2012-05-15 18:39:08 -0400] miah: should have installed it before you got to chefconf :P
[2012-05-15 18:39:13 -0400] miah: preloading is possible..
[2012-05-15 18:41:02 -0400] imeyer: seriously, someone should just null route any traffic containing the word diablo
[2012-05-15 18:41:37 -0400] Randm: that's ok, the servers are mostly down
[2012-05-15 18:41:43 -0400] imeyer: oh, haha
[2012-05-15 18:42:25 -0400] Randm: the authentication servers are taking a beating
[2012-05-15 18:42:36 -0400] miah: ok. see some of you in prison soon!
[2012-05-15 18:44:52 -0400] Litex: It's -that- kind of party!
[2012-05-15 18:45:16 -0400] Randm: I would never want to participate in any kind of orgy that would have me as a member.
[2012-05-15 18:45:21 -0400] cgibbons: hey folks - what's the magic for bootstrapping ubuntu 12.04 lts? i see a new bootstrap script has been patched, but is that usable from chef 0.10.4, or?
[2012-05-15 18:55:03 -0400] gondoi: so i'm back with some questions in regards to the chef-full bootstrap and the preferred method of using chef/ruby
[2012-05-15 18:55:58 -0400] gondoi: so is the preferred way of execution to just use the embedded ruby just to run chef on bootstrap an use a ruby/rvm cookbook to set everything up system-wide instead?
[2012-05-15 18:56:11 -0400] gondoi: so subsequent runs will happen with system ruby instead of embedded ruby?
[2012-05-15 19:05:50 -0400] yfeldblum: gondoi, the chef-full way is for chef-solo/chef-client to run via the embedded ruby every time, and for the chef-solo/chef-client run to be able to set up a system ruby for all other applications that may even be incompatible with chef-solo/chef-client
[2012-05-15 19:10:48 -0400] geekbri: I demand an east cost chef conference
[2012-05-15 19:11:08 -0400] hoover_damm: geekbri, I just want our seattle back :)
[2012-05-15 19:11:09 -0400] hoover_damm: lol
[2012-05-15 19:11:17 -0400] hoover_damm: with Opscode's HQ here it's an easy excuse
[2012-05-15 19:11:35 -0400] geekbri: :-P
[2012-05-15 19:11:42 -0400] nekoneok: Within chef-client, is there a way to suppress logging entirely?
[2012-05-15 19:11:50 -0400] hoover_damm: geekbri, the problem I have with conferences is usually cost
[2012-05-15 19:11:54 -0400] nekoneok: er, the chef-client cookbook, that is.
[2012-05-15 19:12:04 -0400] geekbri: my currently problem is that my company cant flit the bill :-P
[2012-05-15 19:12:04 -0400] hoover_damm: I don't wanna spend 1200$ for a 2-day event really
[2012-05-15 19:12:08 -0400] geekbri: I dont mind coasts when im not payig
[2012-05-15 19:12:18 -0400] hoover_damm: heh yep
[2012-05-15 19:12:20 -0400] Randm: really?  chefcon is cheap.
[2012-05-15 19:12:26 -0400] geekbri: its not the ticket thats expensive
[2012-05-15 19:12:31 -0400] hoover_damm: i'm not referring to chefcon
[2012-05-15 19:12:31 -0400] geekbri: I have to fly there and find somewhere to stay
[2012-05-15 19:12:43 -0400] hoover_damm: there's other conferences that are topping out around 2k for 3days
[2012-05-15 19:12:47 -0400] hoover_damm: coming up
[2012-05-15 19:13:01 -0400] geekbri: I'm in boston so all conferences should be in boston... clearly.
[2012-05-15 19:13:03 -0400] Randm: some of the other things I was looking at were $2500, $3200, etc.
[2012-05-15 19:13:05 -0400] gondoi: yfeldblum: okay, yeah I think i've found more in blog posts and such
[2012-05-15 19:13:22 -0400] Randm: and for relatively minor players
[2012-05-15 19:13:23 -0400] gondoi: what I'm needing is to use mysql gem within the chef run
[2012-05-15 19:13:23 -0400] hoover_damm: 5 day super pass for $1840
[2012-05-15 19:13:24 -0400] hoover_damm: woohoo
[2012-05-15 19:13:29 -0400] gondoi: so it's not for a system application
[2012-05-15 19:13:54 -0400] yfeldblum: geekbri: "mansions are expensive"; hoover_damn: "really? i mean there are a bunch of palaces on the market"
[2012-05-15 19:14:03 -0400] gondoi: looks like I need to use the chef_gem as mentioned before, so it also looks like the community mysql cookbook needs to be updated too :D
[2012-05-15 19:14:16 -0400] yfeldblum: gondoi, that's right
[2012-05-15 19:14:22 -0400] geekbri: I'm not asking for a mansion... just a shed.
[2012-05-15 19:18:19 -0400] hoover_damm: yfeldblum, I went to Mongo Seattle back in 2010 for 50$ for a 1 day event
[2012-05-15 19:19:22 -0400] hoover_damm: sadly I don't have those notes any longer... Mongo's really scary
[2012-05-15 19:19:31 -0400] hoover_damm: but then if you overcare, everything is scary
[2012-05-15 19:19:47 -0400] yfeldblum: mongo is scary? or mongo in 2010 is scary?
[2012-05-15 19:20:13 -0400] Randm: mongo scares the daylights out of me
[2012-05-15 19:20:20 -0400] Randm: other people's installs that is
[2012-05-15 19:20:29 -0400] Randm: since they probably haven't turned on any of the integrity
[2012-05-15 19:20:41 -0400] hoover_damm: yfeldblum, the nature of the fright has not changed.
[2012-05-15 19:21:01 -0400] doomviking: that fear is healthy :)
[2012-05-15 19:21:09 -0400] hoover_damm: yfeldblum, my issue is with the objectid field and I figured that was a good stopping point.
[2012-05-15 19:21:11 -0400] geekbri: Mongos great if you dont care about durability or consistancy
[2012-05-15 19:21:12 -0400] Randm: but I've spending the last year explaining to software devs why what they want to do to the database is a bad idea
[2012-05-15 19:21:17 -0400] geekbri: I happen to care about those things.
[2012-05-15 19:21:24 -0400] hoover_damm: if you look at the wiki on how they calculate it, then go look at the B Tree wiki page
[2012-05-15 19:21:42 -0400] hoover_damm: a little thinking out loud and maybe you'll see it :) index's are fun
[2012-05-15 19:21:55 -0400] Randm: is it still single threaded
[2012-05-15 19:21:56 -0400] Randm: ?
[2012-05-15 19:22:15 -0400] hoover_damm: I think more people yack over the boost
[2012-05-15 19:22:16 -0400] Randm: their map/reduce implementation that is
[2012-05-15 19:22:22 -0400] hoover_damm: then the single threaded map/reduce
[2012-05-15 19:22:37 -0400] geekbri: They were talking about fixing their global write lock so it was only a table write lock.  Don't know if they ever got around to that.
[2012-05-15 19:23:26 -0400] hoover_damm: heh, just use postgresql
[2012-05-15 19:23:30 -0400] hoover_damm: 9.2 has json format now
[2012-05-15 19:23:37 -0400] geekbri: Yeah I saw that... pretty awesome.
[2012-05-15 19:23:52 -0400] hoover_damm: I do over 2.5k TPS on a m1.xlarge with postgresql
[2012-05-15 19:24:06 -0400] Randm: it's had json for a while
[2012-05-15 19:24:07 -0400] Randm: IIRC
[2012-05-15 19:24:29 -0400] hoover_damm: different wal volume then data volume, and different temp dir then the rest
[2012-05-15 19:24:32 -0400] hoover_damm: all are different spindles
[2012-05-15 19:24:40 -0400] hoover_damm: fun to do when your on ec2 :)
[2012-05-15 19:25:56 -0400] yfeldblum: hoover_damm, what about the _id field?
[2012-05-15 19:26:46 -0400] hoover_damm: yfeldblum, check the wiki, now look at the b tree in wikipedia
[2012-05-15 19:26:50 -0400] hoover_damm: or B+ if they use b+ now
[2012-05-15 19:27:02 -0400] hoover_damm: B+ it's a little less fragmented at least
[2012-05-15 19:27:34 -0400] hoover_damm: but it can get heavily fragmented with lots of clients writing (it requires lots, but for amazon that's not hard to achieve for sme)
[2012-05-15 19:28:36 -0400] yfeldblum: hoover_damm, your worry is _id index fragmentation due to document _id generation?
[2012-05-15 19:28:42 -0400] bip: I can't seem to get the node's current environment from within a recipe.This #{node[:app_environment]} just returns blank even though there clearly is a environment other than _default set on the node. Any ideas?
[2012-05-15 19:28:48 -0400] hoover_damm: _id index fragmentation
[2012-05-15 19:29:21 -0400] hoover_damm: yfeldblum, other then the general 'mysql to mongo' tutorials I don't really have a huge concern other then _id
[2012-05-15 19:29:56 -0400] hoover_damm: yfeldblum, the fsync behavior is not a big deal to me as I've grown used to programmers and their quirks about how they feel about fsync safety, and how they care or don't.
[2012-05-15 19:30:17 -0400] hoover_damm: postfix fsync() read() fsync()
[2012-05-15 19:30:48 -0400] hoover_damm: pushing it on the kernel is kinda scary but it shouldn't be
[2012-05-15 19:31:23 -0400] cwj: bip: its node.chef_environment if you are trying to access the 'official' environment attribute
[2012-05-15 19:34:16 -0400] bip: cwj: Thanks. Much better. This is poorly documented, all I found was this 'ol gist: https://gist.github.com/979854
[2012-05-15 19:36:48 -0400] geekbri: hoover_damm: If you trust the kernel to be able to write it from its buffer or not I guess depends on how critical the data is.
[2012-05-15 19:38:02 -0400] hoover_damm: geekbri, right
[2012-05-15 19:38:30 -0400] geekbri: Of course, theres always that trade off of..... do I care about losing X time worth of data for Y speed decrease
[2012-05-15 19:42:32 -0400] alanphil: Question about Chef Server. Advantages to using Linux vs. Windows for Chef Server? My nodes will be Windows Server, but I'm more comfortable with Linux and wonder if Linux Chef Server provides other advantages?
[2012-05-15 19:43:29 -0400] geekbri: Is there a way to batch Node.load requests with knife, so that I can get load them all with one API request instead of a seperate request for each node?
[2012-05-15 19:45:26 -0400] yfeldblum: geekbri, i'm not aware of a batch PUT operation supported by chef-server-api
[2012-05-15 19:46:09 -0400] geekbri: yfeldblum: mmm yes I see, unfortunate because it will make my plugin slow but whatever.
[2012-05-15 19:49:55 -0400] alanphil: Any advantages to using Linux vs. Windows for the Chef Server?
[2012-05-15 19:54:13 -0400] lusis: I don't know that server runs on Windows
[2012-05-15 19:54:16 -0400] lusis: client, yes
[2012-05-15 19:54:22 -0400] lusis: server.HIGHLY unlikely
[2012-05-15 19:56:19 -0400] geekbri: I've never run chef server on windows nor do I know if you can but... assuming you don't have to... I can't imagine why you'd want to run it on windows instead of linux
[2012-05-15 19:59:08 -0400] alanphil: Thanks lusis and geekbri. I was leaning toward Linux anyway, just wanted to ask before going down that path.
[2012-05-15 19:59:24 -0400] lusis: just treat the chef server as an appliance
[2012-05-15 19:59:33 -0400] lusis: turnkey system
[2012-05-15 20:00:41 -0400] avishai: hi
[2012-05-15 20:00:44 -0400] hoover_damm: lol for a second I was thinking turkey system
[2012-05-15 20:01:09 -0400] avishai: there seem to be a problem with gem installing 0.10.10
[2012-05-15 20:01:18 -0400] avishai: on ubuntu oneiric i get " no such file to load -- mixlib/shellout/exceptions (LoadError)"
[2012-05-15 20:01:21 -0400] alanphil: I always see "turkey system" when I see "turnkey system" too
[2012-05-15 20:01:26 -0400] avishai: after the installation
[2012-05-15 20:01:38 -0400] yfeldblum: jfyi http://www.joystiq.com/2012/05/15/somebody-finished-diablo-3-in-12-hours/
[2012-05-15 20:01:43 -0400] avishai: anyone else experienced this?
[2012-05-15 20:07:27 -0400] asshat: hello, i'm trying to get solr up, but starting /etc/init.d/chef-solr and /etc/init.d/chef-expander don't start anything on port 8983
[2012-05-15 20:08:07 -0400] notsolvulgarname: sorry i was a bit upset at myself earlier
[2012-05-15 20:09:29 -0400] geekbri: within the context of a knife plugin given a Chef::Node object.. you should be able to list one of is attributes like so right?   my_node['attribute_name']  ???
[2012-05-15 20:13:43 -0400] gondoi: ah man. so chef-full was released with the 10.10 release, but there aren't any 10.10 package installs avail for the chef-full script to install?
[2012-05-15 20:19:46 -0400] Geryon: Okay, so I am trying to install the latest chef-server on a centos 6.0 box and I'm running in to some problems.
[2012-05-15 20:20:21 -0400] Geryon: I first tried using packages from the recommended repo with no success.  They install, but I was getting errors when trying to run it.  So I rebuilt the server and tried it manually following the instructions on the opscode.com website for a manual instal.
[2012-05-15 20:20:37 -0400] Geryon: I've been able to follow it pretty closely and have gotten to this point:
[2012-05-15 20:20:48 -0400] Geryon: # chef-server -N -e production
[2012-05-15 20:20:48 -0400] Geryon: Merb root at: /usr/lib/ruby/gems/1.8/gems/chef-server-api-0.10.10
[2012-05-15 20:20:48 -0400] Geryon: Loading init file from ./config/init.rb
[2012-05-15 20:20:48 -0400] Geryon: /usr/lib/ruby/gems/1.8/gems/chef-server-api-0.10.10/config/init.rb:20:in `require': no such file to load -- merb-assets (LoadError)
[2012-05-15 20:21:09 -0400] Geryon: Running merb by itself produces this error:
[2012-05-15 20:21:16 -0400] Geryon: # merb
[2012-05-15 20:21:17 -0400] Geryon: /usr/lib/ruby/gems/1.8/gems/merb-core-1.1.3/bin/merb:13:in `require': no such file to load -- merb-core (LoadError)
[2012-05-15 20:21:54 -0400] Geryon: I know very little about ruby and have tried searching for a solution but I haven't been able to find anything aside from changing the BUNDLE_GEM path.
[2012-05-15 20:24:03 -0400] Geryon: I'm also running gem version 1.3.7 and ruby 1.8.7.
[2012-05-15 20:29:29 -0400] erikh: .
[2012-05-15 20:33:50 -0400] upgrayedd: if i'm trying to emit an error in a recipe and fail am i not doing things very chef-like?
[2012-05-15 20:34:49 -0400] upgrayedd: a guy wrote a question at the bottom of the recipes wiki page in the docs and never got an answer about it
[2012-05-15 20:36:48 -0400] notsolvulgarname: hello, i'm trying to get solr up, but starting /etc/init.d/chef-solr and /etc/init.d/chef-expander don't start anything on port 8983
[2012-05-15 20:37:10 -0400] erikh: check the permissions on /var/run/chef
[2012-05-15 20:37:24 -0400] erikh: happens with certain versions of the chef-server recipe
[2012-05-15 20:37:31 -0400] erikh: err, init scripts
[2012-05-15 20:42:50 -0400] hippiehacker: joining #hackday
[2012-05-15 20:47:28 -0400] miah: YAY
[2012-05-15 20:47:32 -0400] miah: HACKDAY
[2012-05-15 20:52:01 -0400] upgrayedd: does the service resource, or resources in general, have some sort of pre or post hook?
[2012-05-15 20:54:46 -0400] thehar: miah: heh
[2012-05-15 21:00:31 -0400] miah: no heh!
[2012-05-15 21:01:55 -0400] thehar: i'm in dis room
[2012-05-15 21:01:57 -0400] thehar: minitest!
[2012-05-15 21:13:56 -0400] knuckolls: hey afallows_, few weeks back you asked me to let you know if i found a system that let you wrap callbacks around knife to send off arbitrary notifications. I didn't find one so I wrote one. We're using it in production and we now have a room where we can see what everyone using chef is doing with knife. It's been really helpful thus far. It needs a little work but it's good enough to share. https://github.com/knuckolls/knife-santoku
[2012-05-15 21:25:46 -0400] gsymons-di: Is there a good way to compare Chef versions in a recipe?
[2012-05-15 21:26:06 -0400] mlei: hey guys. what happens if you have a daemonized chef-client running, but also run one at the command line?
[2012-05-15 21:26:30 -0400] gsymons-di: mlei: bad things, if they try to converge at the same time.
[2012-05-15 21:26:58 -0400] mlei: so there's not any inherent locking to prevent two chef-client runs from happening at once?
[2012-05-15 21:27:10 -0400] bdha: No.
[2012-05-15 21:27:27 -0400] bdha: gsymons-di: Nothing particuarly bad happens, ime.
[2012-05-15 21:27:37 -0400] Urocyon: rats, just ran into errors bootstrapping chef on a precise pangolin ami.  Is there some faq on that?
[2012-05-15 21:27:42 -0400] bdha: Duplicated work. Package manager bailing out due to locks, killing one of the clients.
[2012-05-15 21:27:49 -0400] Urocyon: I'm even using omnibus.  :-(
[2012-05-15 21:28:21 -0400] mlei: okay, so i want to offer the ability for people to ask for a chef-client run, and what i'm thinking is to kill daemonized chef-client before it happens, then start it back up
[2012-05-15 21:28:31 -0400] mlei: does that seem reasonable?
[2012-05-15 21:28:39 -0400] mlei: start it back up after the manual run has finished
[2012-05-15 21:28:54 -0400] mlei: the only thing that might happen is that i might kill it in the middle of a run, so you'd get an incomplete run
[2012-05-15 21:29:36 -0400] gsymons-di: There's actually a bug open about the lack of locking: http://tickets.opscode.com/browse/CHEF-867
[2012-05-15 21:29:37 -0400] bdha: I run chef-client under daemontools. A restart is just svc -t /service/chef-client.
[2012-05-15 21:30:30 -0400] erikh: gsymons-di: Chef::VERSION exists I believe, and you can use Gem::Version for pretty reliable comparisons.
[2012-05-15 21:30:34 -0400] bdha: (I have yet to run into any problems with restarting)
[2012-05-15 21:30:55 -0400] erikh: you'll need to require 'rubygems' on 1.8
[2012-05-15 21:31:23 -0400] gsymons-di: erikh: Thanks... I saw Chef::VERSION, but didn't want to write my own comparison.
[2012-05-15 21:31:33 -0400] mlei: gsymons-di: good pointer. thanks.
[2012-05-15 21:31:59 -0400] erikh: gsymons-di: yeah Gem::Version is what rubygems uses to compare versions. it's pretty battle-tested.
[2012-05-15 21:33:53 -0400] Urocyon: Ah! found this: https://github.com/opscode/chef/commit/30589e7044f08762b067043b4df2275b4d9003bf
[2012-05-15 21:49:20 -0400] Blackavar: Hmm. Who else is at the ChefConf hackday, if anyone?
[2012-05-15 21:53:19 -0400] alex88: hello guys, in a role, i should add some recipes in the add list.. can i also use cookbooks? or is something not correct to do?
[2012-05-15 22:06:07 -0400] idetik: when launching a eucalyptus instance with three roles and a recipe (as per the tutorial on opscode.com/webcasts/eucalyptus), i get a 403 forbidden response warning me of a replay attack.  is this normal?
[2012-05-15 22:25:22 -0400] Urocyon: bootstrap pangolin, why u no work?
[2012-05-15 22:33:04 -0400] mhalligan: if I'm trying to test within shef -z, how would I include a method I've defined?
[2012-05-15 22:33:38 -0400] mhalligan: when I try to paste teh define into shef I get undefined method `define'
[2012-05-15 22:33:40 -0400] Urocyon: ah, got it to work, but I had to specify -d "chef-full".   Thought that was the default.
[2012-05-15 22:55:51 -0400] heph: does anyone know if there's a shuttle between BART/Caltrain and the chefconf hotel?
[2012-05-15 22:58:15 -0400] thehar: from millbrae?
[2012-05-15 22:58:27 -0400] thehar: not that i know of
[2012-05-15 22:58:58 -0400] thehar: even google says walk
[2012-05-15 22:59:04 -0400] thehar: heph: are you staying at a hotel near here?
[2012-05-15 22:59:05 -0400] erikh: ouch.
[2012-05-15 22:59:07 -0400] thehar: call their shuttle.
[2012-05-15 22:59:20 -0400] thehar: or there are cabs outside BART
[2012-05-15 23:00:43 -0400] Blackavar: The hotel might send someone if you were to call them.
[2012-05-15 23:00:46 -0400] thehar: yep
[2012-05-15 23:01:49 -0400] idetik: I'm getting a 403 forbidden when using knife to start an instance within my eucalyptus private cloud
[2012-05-15 23:02:18 -0400] iroller: I think they have only shuttle to the airport. There is a BART station at the aiport anyway
[2012-05-15 23:04:39 -0400] heph: thehar: no, i live here =]
[2012-05-15 23:04:40 -0400] miah: herp
[2012-05-15 23:04:40 -0400] Blackavar: Dragging locals in to give input.
[2012-05-15 23:04:47 -0400] thehar: heph: hehe me tew
[2012-05-15 23:04:47 -0400] heph: miah: how are you getting there tomorrow?
[2012-05-15 23:04:51 -0400] miah: driving
[2012-05-15 23:04:57 -0400] thehar: i know there is no bus
[2012-05-15 23:04:57 -0400] miah: i could pick you up
[2012-05-15 23:05:05 -0400] heph: that'd be spiffy
[2012-05-15 23:05:09 -0400] miah: also, i could pick you up at bart
[2012-05-15 23:05:12 -0400] miah: i have a car here
[2012-05-15 23:05:31 -0400] nstielau: Heya, to get to #chefconf, you can walk down Millbrae Ave. over Highway 101, and then turn right.  It's about 1mile.
[2012-05-15 23:05:41 -0400] nstielau: (from the Millbrae BART stop)
[2012-05-15 23:06:13 -0400] thehar: yeah it's not a bad walk
[2012-05-15 23:06:22 -0400] heph: miah: cool. bex can drop me off in the morning, but a ride back to millbrae bart at the end of all things would be nice =]
[2012-05-15 23:06:30 -0400] miah: sure
[2012-05-15 23:06:35 -0400] heph: and i won't forget my motorcycle for thursday's sessions
[2012-05-15 23:06:38 -0400] thehar: after drinking?
[2012-05-15 23:06:43 -0400] miah: i dont drink
[2012-05-15 23:06:44 -0400] heph: thehar: miah doesn't drink
[2012-05-15 23:06:47 -0400] heph: =P
[2012-05-15 23:06:49 -0400] thehar: herp derp
[2012-05-15 23:06:59 -0400] miah: i do herp the derp though
[2012-05-15 23:07:00 -0400] thehar: ;]
[2012-05-15 23:07:08 -0400] heph: she *totally* derps the herp
[2012-05-15 23:08:23 -0400] thehar: where is cwj's damn plane
[2012-05-15 23:30:53 -0400] cwj: airport shuttle, I am in you
[2012-05-15 23:30:56 -0400] thehar: yay
[2012-05-15 23:32:02 -0400] cwj: :D
[2012-05-15 23:32:24 -0400] thehar: are you coming directly here?
[2012-05-15 23:33:57 -0400] cwj: will probably check in across the street first
[2012-05-15 23:34:19 -0400] thehar: put on ur drinkin dress
[2012-05-15 23:34:26 -0400] cwj: k
[2012-05-15 23:35:10 -0400] cwj: slack said he could do drinks tonight if that interests you
[2012-05-15 23:35:17 -0400] thehar: yes, yes it does.
[2012-05-15 23:35:25 -0400] fujin: DRINKING?
[2012-05-15 23:35:32 -0400] cwj: wat???
[2012-05-15 23:35:44 -0400] fujin: Hello
[2012-05-15 23:35:46 -0400] thehar: tell him i refuse to drink on the peninsula tho
[2012-05-15 23:37:03 -0400] nstielau: thoughts? https://github.com/nstielau/chef_testable
[2012-05-15 23:37:17 -0400] cwj: oh geography
[2012-05-15 23:37:35 -0400] nstielau: https://github.com/nstielau/chef_testable
[2012-05-15 23:38:05 -0400] fujin: nstielau: chefspec, minitest etc unsatisfactory?
[2012-05-15 23:46:23 -0400] nstielau1: fujin just hackin, thinking about inline tests vs. tests in handlers
[2012-05-15 23:46:44 -0400] nstielau1: liking the idea that a) chef can run tests, or b) you can export to shell, sensu, nagios checks etc
[2012-05-15 23:47:06 -0400] nstielau1: on tests that can easily be shipped with standalone cookbooks
[2012-05-15 23:49:25 -0400] yfeldblum: nstielau1, don't use the execute resource in-line passing the command as the execute resource's name
[2012-05-15 23:49:59 -0400] yfeldblum: nstielau1, that pollutes the global resource collection with resource names outside the recipe's control, opening the remote possibility of weird collisions
[2012-05-15 23:50:25 -0400] yfeldblum: nstielau1, also, no need to use the execute resource; you can just use ShellOut
[2012-05-15 23:50:43 -0400] miah: (assuming you are running chef 0.10.10 ?
[2012-05-15 23:50:45 -0400] miah: =)
[2012-05-15 23:51:38 -0400] yfeldblum: or run_command or something
[2012-05-15 23:52:38 -0400] nstielau1: yfeldblum, thanks
[2012-05-15 23:52:49 -0400] yfeldblum: i've got a pet peeve against declaring resources from within providers
[2012-05-15 23:52:51 -0400] nstielau1: 0.10.10  good to know ;)
[2012-05-15 23:53:14 -0400] yfeldblum: providers are where you can write ruby code safely
[2012-05-15 23:53:24 -0400] miah: fwiw. ShellOut isn't on http://wiki.opscode.com/display/chef/Resources
[2012-05-15 23:53:25 -0400] miah: =)
[2012-05-15 23:53:56 -0400] nstielau1: What about in-line tests this vs. minitest handler? (this kills the run on failure, which shouldn't happen, and would be nice if a handler could determine failed/passed tests.
[2012-05-15 23:54:27 -0400] yfeldblum: https://github.com/opscode/chef/blob/master/chef/lib/chef/shell_out.rb
[2012-05-15 23:56:37 -0400] yfeldblum: nstielau1, point is, in your provider, you're declaring a file resource in one action and an execute resource in another action, which is kind of fine, but you don't need to use resources in your provider actions, and in fact if you try to mix-n-match resources & normal code, it gets weird
[2012-05-15 23:58:30 -0400] yfeldblum: nstielau1, something to think about when it comes to providers

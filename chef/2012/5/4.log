[2012-05-04 00:00:12 -0400] paulmooring: julienphalip: any reason you don't want to just run a Chef server and specify the cookbooks in vagrant?
[2012-05-04 00:00:36 -0400] yfeldblum: julienphalip, you don't need a /etc/chef/solo.rb with vagrant; you're supposed to use the vagrant chef-solo provisioner for that
[2012-05-04 00:02:03 -0400] atomic-penguin: miah, yeah we still need support on many of the systems.
[2012-05-04 00:02:54 -0400] julienphalip: yfeldblum: Yes. It's just that to test the provisions, you have to halt and restart the VM each time you make a change, which takes a lot of time. By using a solo.rb file and manually running chef-solo from inside the VM, I can test changes more quickly. But yes, the end goal, once all the config is complete, is to run the provisions with vagrant at boot time.
[2012-05-04 00:03:29 -0400] julienphalip: paulmooring: No reason in particular. I haven't played with chef server yet. I'm a chef noob :)
[2012-05-04 00:05:29 -0400] yfeldblum: julienphalip, no, you just use the `vagrant provision [$VMNAME]` command
[2012-05-04 00:05:57 -0400] yfeldblum: julienphalip, that re-runs the provisioners in order
[2012-05-04 00:06:10 -0400] julienphalip: yfeldblum: doh! Thanks for that
[2012-05-04 00:07:18 -0400] yfeldblum: 5 whys strikes again
[2012-05-04 00:43:57 -0400] fujin: sorry about the rejoins
[2012-05-04 00:44:55 -0400] cg1: btm: thx for the quick response on the mailing list about rc3
[2012-05-04 01:02:34 -0400] cobragoat: getting a kind of strange error using application_ruby. resources/unicorn.rb is seeing the node object as nil
[2012-05-04 01:41:53 -0400] jperry2: anyone know why I get "TypeError: can't convert nil into String" when doing "data_bag("bag")
[2012-05-04 01:44:34 -0400] svanzoest: jperry2: do you have any data_bag_items defined?
[2012-05-04 01:45:01 -0400] raz: hmm
[2012-05-04 01:45:11 -0400] jperry2: yes
[2012-05-04 01:45:26 -0400] jperry2: I am doing this in shef
[2012-05-04 01:45:29 -0400] raz: my knife pulls an ancient fog version (0.8.2), any idea how to fix that?
[2012-05-04 01:45:36 -0400] raz: i'm having trouble figuring out where exactly that dependency is declared
[2012-05-04 01:45:45 -0400] hoover_damn: knife-ec2
[2012-05-04 01:45:55 -0400] hoover_damn: github.com/opscode/knife-ec2
[2012-05-04 01:46:00 -0400] hoover_damn: it's updated in master, but not released afaik
[2012-05-04 01:46:27 -0400] raz: hoover_damn: hrmm. yes i see that knife-ec2 and knife-rackspace pull fog.
[2012-05-04 01:46:41 -0400] svanzoest: it would be nice if knife-eucalyptus got an update.. I put in some pull requests.
[2012-05-04 01:46:51 -0400] raz: now what happens when i install ec2 with 1.3.1 fog dep?
[2012-05-04 01:47:17 -0400] jperry2: without going through shef I get this in my chef-client run
[2012-05-04 01:47:19 -0400] jperry2: NoMethodError: undefined method `unpack' for #<Hash:0x00000004e357c0>
[2012-05-04 01:47:20 -0400] jperry2: /usr/local/lib/ruby/1.9.1/base64.rb:58:in `decode64'
[2012-05-04 01:48:09 -0400] raz: hoover_damn: and shouldn't knife-ec2/knife-rackspace only include fog when they are actually called?  i'm writing a knife plugin here and apparently the ancient fog is pulled even for that :(
[2012-05-04 01:48:26 -0400] hoover_damn: :D
[2012-05-04 01:48:40 -0400] hoover_damn: raz, the amazing powers of pulling in old dependencies sucks sometimes
[2012-05-04 01:48:52 -0400] hoover_damn: raz, you basicaly need to update knife-rackspace and knife-ec2 to match newer, then remove the old
[2012-05-04 01:49:09 -0400] raz: hoover_damn: yea. except there isn't a knife-rackspace with a newer fog dep.
[2012-05-04 01:49:39 -0400] hoover_damn: nope, i've been forking it and bumping it manually for awhile
[2012-05-04 01:49:45 -0400] hoover_damn: really doesn't change rackspace when it fails
[2012-05-04 01:49:47 -0400] hoover_damn: but it makes me feel good
[2012-05-04 01:50:16 -0400] raz: well, it seems like if i update only one of them then knife will probably bork out with "already activated other version" crap
[2012-05-04 01:50:22 -0400] raz: so seems i'll have to for kboth
[2012-05-04 01:50:34 -0400] hoover_damn: you do
[2012-05-04 01:51:03 -0400] raz: the thing i don't understand
[2012-05-04 01:51:10 -0400] raz: i can't possibly be the first to bump into this?
[2012-05-04 01:51:18 -0400] raz: how hard can it be to bump that friggin' version and release a new gem?
[2012-05-04 01:51:24 -0400] raz: opscode, mcfly, knock knock?
[2012-05-04 01:52:56 -0400] hoover_damn: i do it all the time, so your not...
[2012-05-04 01:53:34 -0400] raz: hrmm
[2012-05-04 01:53:40 -0400] raz: how do i even install a github gem in the chef client repo
[2012-05-04 01:53:44 -0400] raz: do you use bundler for that?
[2012-05-04 01:53:57 -0400] cobragoat: I'm getting a lot of "undefined variable or method `node'" while running the application cookbook
[2012-05-04 01:55:28 -0400] jperry2: @raz: just pull down the source and add it as a cookbook
[2012-05-04 01:55:37 -0400] jperry2: is it a cookbook or a gem?
[2012-05-04 01:55:51 -0400] raz: jperry2: huh?  we're talking about knife-rackspace/knife-ec2 gems
[2012-05-04 01:56:00 -0400] jperry2: if its okay so if its a gem
[2012-05-04 01:56:04 -0400] jperry2: you need it on the client/
[2012-05-04 01:56:13 -0400] raz: ehm sorry
[2012-05-04 01:56:15 -0400] raz: on the knife host
[2012-05-04 01:56:23 -0400] raz: i'm just forking them now and doing a manual 'gem build/gem install'
[2012-05-04 01:56:48 -0400] jperry2: so you can use bundler
[2012-05-04 01:56:53 -0400] jperry2: with a Gemfile
[2012-05-04 01:57:09 -0400] jperry2: and point it at a repo
[2012-05-04 01:57:19 -0400] jperry2: or pull it down build/install it like you state
[2012-05-04 01:57:29 -0400] jperry2: but that doesn't help other individuals
[2012-05-04 01:57:40 -0400] jperry2: if your the only one then your approach is fine
[2012-05-04 01:58:55 -0400] jperry2: should I be able to run "Chef::EncryptedDataBagItem.load" in shef
[2012-05-04 01:59:25 -0400] jperry2: if pointing my shef to a client.rb and a dna.json file
[2012-05-04 02:05:47 -0400] hoover_damn: raz, yep gem build / gem install
[2012-05-04 02:11:31 -0400] yfeldblum: raz, yes, i use bundler for such things
[2012-05-04 02:11:48 -0400] yfeldblum: raz, using bundler to pull in gems from git
[2012-05-04 02:12:08 -0400] raz: hoover_damn: ninja dual sword pull request in progress
[2012-05-04 02:12:39 -0400] yfeldblum: raz, e.g., my infra repo would have a Gemfile, and every command i run in there i either prefix with `bundle exec` or run in the context of having set RUBYOPT=-rbundler/setup
[2012-05-04 02:12:52 -0400] yfeldblum: (last one is ruby 1.9 only)
[2012-05-04 02:17:38 -0400] jperry2: anyone have any ideas around the issue I'm seeing with "Chef::EncryptedDataBagItem.load"
[2012-05-04 02:19:50 -0400] raz: hoover_damn: https://github.com/opscode/knife-ec2/pull/43
[2012-05-04 02:19:54 -0400] raz: hoover_damn: https://github.com/opscode/knife-rackspace/pull/21
[2012-05-04 02:20:16 -0400] hoover_damn: raz, hope you have tickets as well and i'm pretty sure those pulls prolly exist already no?
[2012-05-04 02:20:56 -0400] raz: i didn't see a pull request to fix that, otherwise i wouldn't have duplicated it
[2012-05-04 02:21:25 -0400] hoover_damn: strange
[2012-05-04 02:28:14 -0400] raz: perhaps there is a cleaner fix, too. but this gets the job done and could at least mitigate the whole brown paper bag thing.
[2012-05-04 02:29:07 -0400] raz: i imagine fog is a gem that many users really want to use in their knife scripts. being pinned to an ancient version is a bad idea there.
[2012-05-04 02:49:19 -0400] yfeldblum: raz, ALL contributions to opscode projects must go through: http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-05-04 02:49:50 -0400] raz: yfeldblum: yea, right. that explains the code-quality.
[2012-05-04 02:50:04 -0400] raz: just merge that one-liner and be done.
[2012-05-04 02:50:10 -0400] yfeldblum: raz, proper use of version constraints is better, in the long run
[2012-05-04 02:50:58 -0400] raz: yfeldblum: whatever works. just don't have bugs like that.
[2012-05-04 02:51:11 -0400] yfeldblum: raz, read it: it explains the legal paperwork, as well as the process for opening tickets and linking them to pull requests
[2012-05-04 02:51:54 -0400] raz: yfeldblum: i'm not jumping hoops like that.
[2012-05-04 02:52:49 -0400] raz: fix your process then, other projects don't put up bullshit like that.
[2012-05-04 02:57:40 -0400] yfeldblum: raz, sorry, but that sounds like short-term thinking; also, your changes will not get merged without a ticket in JIRA linking to the changes and a signed CLA, which combined take 10 minutes
[2012-05-04 02:58:29 -0400] raz: yfeldblum: that's ok, no more patches from me then.
[2012-05-04 03:02:51 -0400] UForgotten: no fucking wonder all the opscode shit is so broken.  too much bureaucracy
[2012-05-04 03:03:16 -0400] UForgotten: raz: I feel ya.
[2012-05-04 03:05:17 -0400] yfeldblum: signing a 1-page agreement that says your contributions are open-source, and using the same ticket system that everyone at opscode uses (and which predates github pull requests) ... bureaucracy?
[2012-05-04 03:06:40 -0400] raz: yfeldblum: at the risk of getting drawn into a pointless discussion; yes.
[2012-05-04 03:07:17 -0400] UForgotten: yfeldblum: I was only half kidding.  It is a barrier to entry that will dissuade the casual shade-tree chef cook.
[2012-05-04 03:08:49 -0400] UForgotten: if you want to make the argument that it is not the "sort of code" you want committed, sobeit. But it's not serving the community when some of the cookbooks are broken and haven't been updated in 2 years, perhaps its because of a percieved difficulty in fixing them upstream.
[2012-05-04 03:09:08 -0400] miketheman: jumping in a little late to this convo, but:
[2012-05-04 03:09:30 -0400] miketheman: Once I signed the agreement, read the process, it got realy easy to contribute back
[2012-05-04 03:10:24 -0400] yfeldblum: the issue is that everyone who has 10,000 machines to manage also has lawyers who may forbid using a product whose copyright and licensing is unclear
[2012-05-04 03:10:33 -0400] miketheman: the flow makes sense from an organization's perspective, too. Especially since Github's Issues aren't up to par with [jira,whatever] yet
[2012-05-04 03:10:57 -0400] raz: works for puppet, last time i checked
[2012-05-04 03:11:49 -0400] UForgotten: don't get me wrong, I'm not against process.  It's always good to have something to tie a commit to, bug report, etc. But it makes things easier if people can contribute one line fixes without going through hoops.  That's the point raz and I are trying to make.
[2012-05-04 03:11:58 -0400] yfeldblum: the CLA clarifies the copyright and licensing, so that the people who have 10,000 machines to manage can actually use your contributions
[2012-05-04 03:12:24 -0400] raz: yfeldblum: bullshit.
[2012-05-04 03:12:41 -0400] miketheman: raz: great comeback
[2012-05-04 03:12:56 -0400] raz: bleh it's 5am and i'm not really caring ;)
[2012-05-04 03:13:11 -0400] raz: those cla's are usually setup to support some half-baked business model
[2012-05-04 03:13:37 -0400] raz: which is fine, make your money, but i'm not jumping hoops for that
[2012-05-04 03:13:52 -0400] miketheman: raz: nobody's asking you to.
[2012-05-04 03:14:15 -0400] miketheman: seems like the people that want to contribute, will figure out how to contribute
[2012-05-04 03:14:48 -0400] raz: yap, hope so
[2012-05-04 03:15:36 -0400] raz: anyway, off to bed. perhaps someone with proper credentials can merge whatever fix for that gem-conflict sometime.
[2012-05-04 05:23:40 -0400] BryanWB: ohai chefs!
[2012-05-04 05:42:54 -0400] fafa34: hi, I get this error when trying to install chef server [Fri, 04 May 2012 05:38:36 +0000] FATAL: NoMethodError: gem_package[chef-server-api] (chef-server::rubygems-install line 89) had an error: NoMethodError: undefined method `full_name' for nil:NilClass
[2012-05-04 05:42:56 -0400] fafa34: any ideas?
[2012-05-04 05:50:41 -0400] miah: hey BryanWB
[2012-05-04 05:58:41 -0400] BryanWB: miah: yo, how u doing?
[2012-05-04 05:59:02 -0400] BryanWB: miah: have u done much w/ url rewriting w/ haproxy?  i will be exploring that this afternoon
[2012-05-04 06:00:26 -0400] yfeldblum: morning, BryanWB
[2012-05-04 06:00:50 -0400] BryanWB: yfeldblum: good evening ;) late 4 u
[2012-05-04 06:02:47 -0400] rberger_: Any examples of using the newly refactored application and application_php cookbook?
[2012-05-04 06:05:23 -0400] andreacampi: rberger_ in python https://github.com/opscode-cookbooks/application_python/tree/master/examples
[2012-05-04 06:06:13 -0400] andreacampi: or for the complete, working cookbook: https://github.com/coderanger/djangocon2011/tree/master/cookbooks/packaginator
[2012-05-04 06:06:42 -0400] rberger_: andreacampi: thanks, I was looking for a php example (I had found the one you mentioned) I'm specifically wondering how to connect to a mysql server not managed by chef (i.e. AWS RDS)
[2012-05-04 06:07:08 -0400] rberger_: Im not exactly looking for how to use it with RDS but how to work with mysql
[2012-05-04 06:07:31 -0400] rberger_: and php
[2012-05-04 06:07:32 -0400] andreacampi: I will probably push my roundcube cookbook soon-ish
[2012-05-04 06:08:03 -0400] andreacampi: so for PHP minus RDS, the recipe would look pretty much the same
[2012-05-04 06:08:13 -0400] rberger_: Cool
[2012-05-04 06:08:34 -0400] andreacampi: you do need to specify the name of the settings file that should be generated
[2012-05-04 06:08:36 -0400] rberger_: Though I am foolishly hoping to accomplish something tonite :-)
[2012-05-04 06:09:16 -0400] andreacampi: oh it doesn't need to be very hard :)
[2012-05-04 06:09:37 -0400] andreacampi: wait, you mean accomplish this, or something else? ;)
[2012-05-04 06:09:42 -0400] rberger_: I mainly need to know how to specify the mysql connection / user / pw stuff
[2012-05-04 06:09:48 -0400] andreacampi: right
[2012-05-04 06:09:56 -0400] andreacampi: you do need to provide your template
[2012-05-04 06:10:02 -0400] andreacampi: since there's no standard in PHP
[2012-05-04 06:10:07 -0400] rberger_: I'm trying to build a mediawiki using the new application cookbook style
[2012-05-04 06:10:28 -0400] rberger_: (and I don't know anything about mediawiki and very little about php)
[2012-05-04 06:10:50 -0400] andreacampi: got you
[2012-05-04 06:11:30 -0400] rberger_: Anyway, thought I would ask. I learn best by looking at related examples..
[2012-05-04 06:12:06 -0400] rberger_: By the way, really like the new application cookbook architecture, that's why I wanted to try it out.
[2012-05-04 06:12:58 -0400] rberger_: andreacampi: Is the refactored application cookbook stuff in good enough shape to try it out for a non-production application (this is an internal project)
[2012-05-04 06:14:04 -0400] fafa34: hi, I get this error when trying to install chef server via bootstrap [Fri, 04 May 2012 05:38:36 +0000] FATAL: NoMethodError: gem_package[chef-server-api] (chef-server::rubygems-install line 89) had an error: NoMethodError: undefined method `full_name' for nil:NilClass , how to fix this?
[2012-05-04 06:18:59 -0400] andreacampi: rberger_ if you give me one sec, I'm writing down a couple of ideas into a gist
[2012-05-04 06:19:13 -0400] rberger_: Cool, I appreciate it!
[2012-05-04 06:24:21 -0400] andreacampi: rberger_ https://gist.github.com/2592578
[2012-05-04 06:24:54 -0400] andreacampi: look at the template...
[2012-05-04 06:25:08 -0400] rberger_: andreacampi: thanks
[2012-05-04 06:25:20 -0400] andreacampi: @database comes from anything that you specify in the application > php > database block
[2012-05-04 06:25:48 -0400] andreacampi: it's a Hash masquerading as a DSL, so anything goes
[2012-05-04 06:25:54 -0400] rberger_: What is the database_master_role "database_master" line do in this case. I was under the impression that is to drive the database cookbook
[2012-05-04 06:25:57 -0400] andreacampi: @host is populated by search
[2012-05-04 06:26:27 -0400] andreacampi: it's used to search for a node with role "database_master" in the same environment as the node you are deploying to
[2012-05-04 06:27:10 -0400] rberger_: But there won't be such a node in my case, the mysql server is the Amazon RDS which is not managable by Chef.
[2012-05-04 06:27:19 -0400] andreacampi: right
[2012-05-04 06:27:25 -0400] andreacampi: in that case, skip it
[2012-05-04 06:27:41 -0400] rberger_: Is it doing any magic other than getting the hostname?
[2012-05-04 06:27:53 -0400] andreacampi: nope
[2012-05-04 06:28:11 -0400] rberger_: I can build the parameters for the erb myself if that is all it takes..
[2012-05-04 06:28:23 -0400] andreacampi: exactly, that's what I expect
[2012-05-04 06:28:56 -0400] rberger_: I guess I'll have to read the code a bit.. Is the DSL defined anywhere yet? Or should I just look at the LWRP files?
[2012-05-04 06:29:00 -0400] andreacampi: this looks like a DSL, but it's just ruby after all anything you need to compute the right parameters to pass, you can do
[2012-05-04 06:29:10 -0400] andreacampi: LWRPs
[2012-05-04 06:29:44 -0400] rberger_: Ok, Jedi development, Use the Source....
[2012-05-04 06:29:45 -0400] andreacampi: also, libraries/default.rb in the application cookbook
[2012-05-04 06:29:58 -0400] andreacampi: well I mean, there's the READMEs :)
[2012-05-04 06:30:17 -0400] andreacampi: actually--if any part of the DSL is not in the READMEs, I'd like to know
[2012-05-04 06:30:46 -0400] andreacampi: I spent several hours straight writing just the READMEs, so I damn well want them to be good!
[2012-05-04 06:32:07 -0400] rberger_: They have a lot of good stuff in them, but I am still getting oriented. Devil is in the details and its hard to see the Forest for the Trees...
[2012-05-04 06:32:16 -0400] andreacampi: I know
[2012-05-04 06:32:44 -0400] andreacampi: more examples will be good
[2012-05-04 06:32:53 -0400] andreacampi: they will come I'm sure
[2012-05-04 06:32:55 -0400] andreacampi: c_t :D
[2012-05-04 06:33:13 -0400] rberger_: Thanks for the help, If I get somewhere I'll publish it...
[2012-05-04 06:33:46 -0400] andreacampi: cool. and if you spot problems, just file them in the Opscode Jira please I would appreciate it
[2012-05-04 06:36:02 -0400] c_t: I'm torn
[2012-05-04 06:36:19 -0400] rberger_: c_t: I was on a metaphorical role, and couldn't help myself..
[2012-05-04 06:36:38 -0400] c_t: on one hand, I could take this opportunity to work some more on finishing up this encrypted file stuff while I'm waiting for our hosting providers to move some shit
[2012-05-04 06:36:47 -0400] c_t: but on the other hand, I'm kinda tired and don't feel like it
[2012-05-04 06:37:58 -0400] c_t: I have encrypted_cookbook_file working happily, but I should probably get encrypted_remote_file finish
[2012-05-04 06:38:01 -0400] c_t: ed
[2012-05-04 07:08:17 -0400] Kwanasolis: o/
[2012-05-04 07:14:29 -0400] BryanWB: \o !
[2012-05-04 07:28:33 -0400] Kwanasolis: BryanWB: how goes?
[2012-05-04 07:31:04 -0400] BryanWB: bz
[2012-05-04 07:34:28 -0400] Kwanasolis: yeah, you say that, I can relate, but I don't think I'm as busy as you
[2012-05-04 07:34:36 -0400] Kwanasolis: my job is still pretty low key, no real responsiblities
[2012-05-04 07:42:21 -0400] ranjibd: BryanWB, any idea is ark will be a part of opscode cookbooks?
[2012-05-04 07:42:49 -0400] ranjibd: lot of other cookbooks(like gecode, passenger ) can be written more neatly with ark.
[2012-05-04 07:42:56 -0400] BryanWB: ranjibd: is now
[2012-05-04 07:43:25 -0400] ranjibd: ar?
[2012-05-04 07:43:26 -0400] bawt_: ar is going to be the tough part. but the new router, controllers, and rack stuff are pretty hit
[2012-05-04 07:43:35 -0400] ranjibd: ark?
[2012-05-04 07:43:35 -0400] bawt_: ark is http://wiki.opscode.com/display/chef/Ark
[2012-05-04 07:43:42 -0400] ranjibd: nice
[2012-05-04 07:43:58 -0400] ranjibd: we should refactor  the community cookbooks ..
[2012-05-04 07:50:53 -0400] BryanWB: ranjibd: that page is out of date, can u make bawt forget?
[2012-05-04 07:50:58 -0400] BryanWB: forget ark
[2012-05-04 07:51:03 -0400] BryanWB: argh
[2012-05-04 07:51:10 -0400] BryanWB: bawt_: forget ark
[2012-05-04 07:51:10 -0400] bawt_: aight
[2012-05-04 07:51:13 -0400] BryanWB: ark?
[2012-05-04 07:51:53 -0400] BryanWB: bawt_: ark is http://community.opscode.com/cookbooks/ark
[2012-05-04 07:52:10 -0400] ranjibd: ark?
[2012-05-04 07:52:11 -0400] bawt_: ark is http://community.opscode.com/cookbooks/ark
[2012-05-04 07:52:54 -0400] BryanWB: nice ;)
[2012-05-04 07:53:10 -0400] ranjibd: we should  update the wiki page also
[2012-05-04 08:00:08 -0400] BryanWB: i should delete it
[2012-05-04 08:00:34 -0400] BryanWB: done
[2012-05-04 08:24:15 -0400] linuxboy: Hi guys
[2012-05-04 08:24:25 -0400] linuxboy: I emailed the mailing list with a problem, but haven't got an answer: http://lists.opscode.com/sympa/arc/chef/2012-05/msg00012.html
[2012-05-04 08:24:28 -0400] linuxboy: can anyone help?
[2012-05-04 10:03:08 -0400] linuxboy: anyone?
[2012-05-04 10:32:14 -0400] iroller: Hey chefs. How to get all item's jsons for data bag with one command? Chef::DataBag.load('bag').each {|item| Chef::DataBagItem.load('bag', 'item')} is super slow
[2012-05-04 10:32:46 -0400] iroller: (especially when you have a lot of items)
[2012-05-04 10:57:09 -0400] Jean: Is there a way to define global methods? I define my override_attributes in a base role, but it seems methods defined there can't be used elsewhere?
[2012-05-04 11:58:47 -0400] BryanWB: yfeldblum: when u wake up, would love to know what u think of git-subtree
[2012-05-04 12:01:37 -0400] freerobby: hi all, i'm building a very generic LWRP to host a rails app on torquebox. I want to open source it without including proprietary (app-related) code in the cookbook. Is there any way to call the LWPR multiple times directly from the role definition instead of requiring it inside the cookbook?
[2012-05-04 12:01:37 -0400] iroller: Is it possible to make Chef return only part of json when performing node search? It downloads all the nodes content even if I perform 'knife search node "*:*" -a name'
[2012-05-04 12:03:00 -0400] laurent\: yep, i think it's a known issue, but i don't know what's its status
[2012-05-04 12:18:59 -0400] andreacampi: freerobby: interesting, but I'm not sure I understand your question
[2012-05-04 12:20:11 -0400] freerobby: andreacampi: basically i want to know if i can call a provider directly from my role.rb or if i need to put a separate cookbook recipe in the middle
[2012-05-04 12:21:02 -0400] andreacampi: LWRPs are like the "stock" resources you can use them from your recipes, but the run list can only contain roles and recipes
[2012-05-04 12:21:10 -0400] andreacampi: so no, you can't call it directly
[2012-05-04 12:23:40 -0400] geekbri: freerobby: a typical pattern you see sometimes is having the default recipe call some LWRPs and having that LWRPs call driven by attributes.  this allow you to just include the CB itself and some attributes
[2012-05-04 12:23:50 -0400] geekbri: freerobby: but you cannot escape calling the cookbook itself :)
[2012-05-04 12:23:57 -0400] geekbri: which will run the default recipe
[2012-05-04 12:25:50 -0400] andreacampi: freerobby: ideally, if you do publish LWRPs for that, it would be nice to tie them in into the application cookbook
[2012-05-04 12:26:27 -0400] andreacampi: that would allow a user to create a recipe for running a Rails app and move it from Passenger to Unicorn to Torquebox with minimal changes :)
[2012-05-04 12:26:37 -0400] andreacampi: I will be doing the CloudFoundry part :)
[2012-05-04 12:28:15 -0400] yfeldblum: BryanWB, i agree
[2012-05-04 12:28:50 -0400] BryanWB: yfeldblum: u think it worthy of investigation?
[2012-05-04 12:28:50 -0400] yfeldblum: BryanWB, at least, if i grokked git-subtree based on 1 minute of reading the intro
[2012-05-04 12:28:58 -0400] BryanWB: same here ;)
[2012-05-04 12:30:59 -0400] Jean: Sorry for re-asking, but I got dc'd
[2012-05-04 12:31:02 -0400] Jean: Is there a way to define global methods? I define my override_attributes in a base role, but it seems methods defined there can't be used elsewhere?
[2012-05-04 12:31:02 -0400] andreacampi: BryanWB, yfeldblum it does look useful
[2012-05-04 12:31:05 -0400] yfeldblum: BryanWB, one clarification, librarian-chef isn't for cookbooks you're working on - from within the same project; cookbooks you're working on that you treat as separate individuated projects, with their own git repos & their own tests & their own release policies &c, work well with librarian-chef (only, such things are hard to find in the toddler days of chef)
[2012-05-04 12:31:57 -0400] BryanWB: yfeldblum: guess i misunderstood u
[2012-05-04 12:33:19 -0400] yfeldblum: BryanWB, but everything in your site-cookbooks, or everything you're actively developing against your usual infrastructure (rather than against its own separate infrastructure, say in vagrant or toft), git-subtree could be better
[2012-05-04 12:34:57 -0400] freerobby: geekbri: andreacampi thank you both
[2012-05-04 12:35:30 -0400] BryanWB: yfeldblum: ah, which i am trying to keep all my ckbks independent of each other so I could probably just use librarian for everything and even get rid of my site-cookbooks folder
[2012-05-04 12:35:41 -0400] andreacampi: freerobby: let me know how far you get post to the mailing list
[2012-05-04 12:35:42 -0400] yfeldblum: BryanWB, i like stricter ways of doing software, which include strict separations between your project and your project's dependencies (even if you're writing your project's dependencies too), but many people are not so concerned
[2012-05-04 12:36:31 -0400] juanje: andreacampi, yfeldblum, BryanWB what I found more useful from git-subtree was to split directories or branches into a new repo (https://github.com/apenwarr/git-subtree/blob/master/git-subtree.txt#L339). It's very handy.
[2012-05-04 12:36:55 -0400] juanje: I've used a few times and save me a lot of time and troubles
[2012-05-04 12:37:03 -0400] yfeldblum: BryanWB, i think you'll still need your site-cookbooks dir for infrastructure code that is truly there for your infrastructure, and which is not generalizable or which there is not much imperative to generalize
[2012-05-04 12:37:11 -0400] BryanWB: juanje: y, that's pretty sweet, i also like that commits from sub-tree are recorded in the meta-projects git log
[2012-05-04 12:37:16 -0400] andreacampi: juanje well, I've done that with filter-branch before
[2012-05-04 12:37:58 -0400] andreacampi: from a quick glance, it looks like mostly porcelain on existing functionality
[2012-05-04 12:38:02 -0400] juanje: andreacampi: yep, me too, but it's far easier IMHO
[2012-05-04 12:38:03 -0400] andreacampi: BryanWB I just love it :)
[2012-05-04 12:38:13 -0400] andreacampi: juanje oh yes, absolutely
[2012-05-04 12:39:13 -0400] juanje: filter-branch is very powerful and useful command, but with great power comes great responsability... :-P
[2012-05-04 12:42:21 -0400] BryanWB: doesn't filter-branch rewrite your entire history?
[2012-05-04 12:42:23 -0400] juanje: andreacampi: btw, I didn't tell you yet, but I do love the work you have done witht he application* cookbooks :-) Kudos++
[2012-05-04 12:42:33 -0400] BryanWB: ++++1!
[2012-05-04 12:43:10 -0400] andreacampi: juanje, BryanWB: thanks! :) although to be fair, most of the good stuff is coderanger's
[2012-05-04 12:43:42 -0400] andreacampi: but yeah, pretty cool
[2012-05-04 12:43:48 -0400] juanje: BryanWB: you can rewrite just one part and a lot of things
[2012-05-04 12:51:13 -0400] yfeldblum: BryanWB, e.g., with the LWRP-based application set of cookbooks, people might start having per-app cookbooks of their own in site-cookbooks with recipes that just declare an application resource and set the attributes for the app that cookbook/recipe is supposed to deploy
[2012-05-04 14:03:09 -0400] hoover_damn: weird
[2012-05-04 14:03:26 -0400] hoover_damn: node.roles.include? seems to not work the way I expected
[2012-05-04 14:03:36 -0400] hoover_damn: I guess that's not a bad thing as partial maps is not the right way
[2012-05-04 14:18:48 -0400] yfeldblum: BryanWB, heh, what did you think the `:path =>` option was?
[2012-05-04 14:24:06 -0400] gp5st1: hello, i think i might be a little confused on where to find things in the docs or just abot the system in general.  That said, I think I understand the basic block diagram of things.  if i change a value in a role's attributes, the chef-client will re-run the entire runlist, correct?
[2012-05-04 14:24:43 -0400] flashmanbahadur: gp5st1: every time you run chef-client it will always run everything in the run list
[2012-05-04 14:25:14 -0400] flashmanbahadur: gp5st1: changes only matter on a config block basis
[2012-05-04 14:25:23 -0400] gp5st1: but if nothing changes, chef knows not to run certain recipies, correct?
[2012-05-04 14:25:31 -0400] flashmanbahadur: gp5st1: it will "run" them
[2012-05-04 14:25:34 -0400] flashmanbahadur: but it will do nothing
[2012-05-04 14:25:35 -0400] flashmanbahadur: for example
[2012-05-04 14:25:38 -0400] flashmanbahadur: for a package
[2012-05-04 14:25:41 -0400] flashmanbahadur: if it is already installed
[2012-05-04 14:25:43 -0400] flashmanbahadur: it will notice that
[2012-05-04 14:25:48 -0400] flashmanbahadur: and not try to reinstall it
[2012-05-04 14:25:58 -0400] yfeldblum: gp5st1, the design of chef is that it MUST be safe to re-run every recipe in the run-list any number of times
[2012-05-04 14:26:50 -0400] yfeldblum: gp5st1, the design of chef assumes that the whole run is tolerant of failures, idempotent, repeatable, and retryable at will
[2012-05-04 14:26:56 -0400] gp5st1: ok. that's what i thought. the chef-client just runs on a cron and pings the server every so often for updates, right? updates aren't pushed out?
[2012-05-04 14:27:09 -0400] gp5st1: yfeldblum: all very nice properties:)
[2012-05-04 14:27:11 -0400] yfeldblum: gp5st1, correct, the chef-client pulls updates
[2012-05-04 14:27:23 -0400] yfeldblum: gp5st1, rather, the chef-client pulls the current state
[2012-05-04 14:27:50 -0400] BryanWB: yfeldblum: i dont' know what i thought path was :p
[2012-05-04 14:29:23 -0400] gp5st1: ok, that all fits into how i thought things worked:)
[2012-05-04 14:29:27 -0400] gp5st1: thank you for your time
[2012-05-04 14:40:03 -0400] UForgotten: so, I have a noobish question that I couldn't figure out after reading the wiki a bit
[2012-05-04 14:40:38 -0400] UForgotten: what is the advantage to using json vs ruby for attributes files, and do you need json at all after the node definition?
[2012-05-04 14:40:40 -0400] gp5st1: how often does chef-client get updates? i'm trying to find a cron job and not having much luck
[2012-05-04 14:41:04 -0400] flashmanbahadur: gp5st1: by default it does not run automatically after the first run
[2012-05-04 14:41:04 -0400] ashb: gp5st1: 'get updates' meaning new releases or how often does it run to update your system
[2012-05-04 14:41:05 -0400] flashmanbahadur: but
[2012-05-04 14:41:11 -0400] flashmanbahadur: you can set it to run automatically
[2012-05-04 14:41:23 -0400] gp5st1: i see, ok:)
[2012-05-04 14:41:25 -0400] flashmanbahadur: https://github.com/opscode/cookbooks/tree/master/chef-client/recipes
[2012-05-04 14:41:35 -0400] flashmanbahadur: some options in here for how to run it as a cron job or a service
[2012-05-04 14:41:53 -0400] gp5st1: i'll check it out:)
[2012-05-04 14:41:54 -0400] gp5st1: thank you
[2012-05-04 14:43:44 -0400] yfeldblum: UForgotten, use JSON for data and Ruby for code
[2012-05-04 14:43:58 -0400] paulmooring: UForgotten: it's really just a matter of preference, the ruby files are easier to read imo, but knife can pass back json, which means using json keeps your files in line with the knife backup script
[2012-05-04 14:44:47 -0400] UForgotten: I'm using chef-solo so knife doesn't do much.  I'm having a hell of a time working with json since it's not human readable for me :)
[2012-05-04 14:45:07 -0400] gp5st1: it's better than XML
[2012-05-04 14:45:11 -0400] gp5st1: :)
[2012-05-04 14:45:18 -0400] paulmooring: UForgotten: fwiw I think we use .rb more than json around here (at opscode)
[2012-05-04 14:45:21 -0400] UForgotten: was more curious if there was a reason for one or the other really
[2012-05-04 14:45:44 -0400] paulmooring: the .rb is converted to json client side, it's purely for human readability
[2012-05-04 14:45:56 -0400] BryanWB: i always use the .rb when it's an option
[2012-05-04 14:46:32 -0400] UForgotten: so I guess that is the question, where is it an option and where is it not
[2012-05-04 14:46:53 -0400] UForgotten: this duality is making my tmtowtdi headache worse
[2012-05-04 14:47:42 -0400] ashb: I use the .rb too. Only json files I have are for databags
[2012-05-04 14:49:53 -0400] paulmooring: UForgotten: I think data bags and nodes require json, other than that nothing else comes to mind
[2012-05-04 14:53:30 -0400] UForgotten: since I'm in chef-solo I'm having a bit of a struggle with how to use attributes and scope. just trying to code solutions that make sense long-run instead of for one machine without breaking other stuff.  Virtual machines have been a huge help for testing :)
[2012-05-04 14:55:03 -0400] UForgotten: been doing linux sysadmin for 11+ years, never had a config management platform before (kickstart and scripting was always enough before "the cloud" came along).  toyed with puppet last year but my new employer uses chef, so I'm getting my hands dirty with it hehe
[2012-05-04 14:55:08 -0400] paulmooring: UForgotten: my recommendation is put defaults in the cookbook, put more specific stuff in roles, and only if needed (i.e. can't be pulled out of ohai dynamically) put the final say in the node
[2012-05-04 14:58:21 -0400] paulmooring: also chef-solo can use data bags now, so put data specific to your set up in there
[2012-05-04 14:59:48 -0400] gp5st1: it's probably possible to set up a cron job to only run the run-list from a specific role?
[2012-05-04 15:00:12 -0400] flashmanbahadur: gp5st1: can you elaborate
[2012-05-04 15:00:23 -0400] UForgotten: the biggest ones I have to get right are sysctl and firewall. sysctl is annoying because the keys change when the kernel does, and iptables trying to multi-layer the rules has been fun.
[2012-05-04 15:00:58 -0400] gp5st1: i would like to have chef-client run and update a role about our application (config, updates, &c) but not run through the more lengthy base role
[2012-05-04 15:01:16 -0400] flashmanbahadur: gp5st1: not that I know of
[2012-05-04 15:01:25 -0400] flashmanbahadur: what is in the base role that takes so long?
[2012-05-04 15:01:33 -0400] gp5st1: running chef client with a specific run list won't mess up it's knowlege of everything else?
[2012-05-04 15:01:44 -0400] flashmanbahadur: its not a great way of doing things
[2012-05-04 15:01:57 -0400] gp5st1: what isn't a great way?
[2012-05-04 15:02:12 -0400] flashmanbahadur: making chef-client only run a subset of the total run list
[2012-05-04 15:02:16 -0400] flashmanbahadur: leads to confusion
[2012-05-04 15:02:20 -0400] flashmanbahadur: inconsistencies
[2012-05-04 15:02:23 -0400] gp5st1: hmm
[2012-05-04 15:02:28 -0400] flashmanbahadur: better to fix the recipes in the base role
[2012-05-04 15:02:47 -0400] flashmanbahadur: you can run a couple hundred checks in seconds if they are already completed
[2012-05-04 15:02:57 -0400] gp5st1: true
[2012-05-04 15:03:03 -0400] gp5st1: ok
[2012-05-04 15:03:05 -0400] gp5st1: thanks:)
[2012-05-04 15:03:38 -0400] gp5st1: sorry, no one here is familar with any of this so sometimes i need a sounding board. as i get more experince with it i'll try to pay it forward or back:)
[2012-05-04 15:04:33 -0400] flashmanbahadur: np
[2012-05-04 15:05:07 -0400] paulmooring: gp5st1: from a more conceptual level the idea is Chef lets you define the state a machine should be in then it brings it to that state based on what the cookbooks tell it to do
[2012-05-04 15:05:52 -0400] paulmooring: if the machine is already set up correctly good idempotent cookbooks, even large ones, should be very fast because no action is taken unless needed
[2012-05-04 15:06:37 -0400] paulmooring: hence every chef-client run always runs the whole run list and there's no way around it (by design)
[2012-05-04 15:07:48 -0400] gp5st1: makes sense; i guess i was trying to over optimise
[2012-05-04 15:09:24 -0400] paulmooring: yeah it's sort of a brain shift for people with a sys-admin background (or at least it was for me) because it's less focused on writing code to "do this" and is more about writing code to "be this"
[2012-05-04 15:10:35 -0400] gp5st1: interesting way of thinking about it
[2012-05-04 15:11:43 -0400] UForgotten: paulmooring: definitely agreed.  I have done programming before but not in ruby or for this type of procedural conformance to be run over and over again. It can be challenging to learn coming from a non-programming background.
[2012-05-04 15:13:13 -0400] flashmanbahadur: most of it can be taken care of by using only_if/not_if and creates "blah"   for your custom execute blocks
[2012-05-04 15:13:20 -0400] flashmanbahadur: and avoiding hitting remote services for checks
[2012-05-04 15:13:36 -0400] flashmanbahadur: the built in resources are usually very good about running quickly of no changes are needed
[2012-05-04 15:14:09 -0400] paulmooring: UForgotten: definitely, but it more than pays off if you stick with the power you gain once it "clicks" is astounding
[2012-05-04 15:14:27 -0400] bhunter: is chef on windows 32 bit or 64?   I'm doing a "cmd /c blah" from a execute resource, and apparently a 32-bit cmd is running vs. the 64-bit I had hoped.   Any suggestions?
[2012-05-04 15:16:22 -0400] UForgotten: paulmooring: I very much look forward to that day.  Not quite there yet.  I feel like I'm stuck in tmtowtdi sludge atm
[2012-05-04 15:17:56 -0400] paulmooring: UForgotten: if you have the time and resources to do so, I recommend playing with the 5 free nodes on Hosted Chef to learn the basics before dealing with chef-solo/chef-server
[2012-05-04 15:18:58 -0400] paulmooring: chef-solo adds a lot more administrative overhead that adds confusion when you're learning the basics
[2012-05-04 15:25:34 -0400] jschneiderhan: i'm getting "`connect': Operation timed out - SSL_connect" errors when trying to upload cookbooks, anyone else?
[2012-05-04 15:25:59 -0400] jschneiderhan: can run other knife commands without a problem though
[2012-05-04 15:31:03 -0400] paulmooring: jschneiderhan: it works for me send me, this is hosted chef right?
[2012-05-04 15:31:28 -0400] doki_pen: is there a way to install chef-server noninteractively?
[2012-05-04 15:31:31 -0400] jschneiderhan: correct, hosted chef - haven't been able to upload a cookbook all morning
[2012-05-04 15:31:52 -0400] doki_pen: I tried setting DEBIAN_FRONTEND=noninteractive, but it doesn't seem to care
[2012-05-04 15:32:02 -0400] paulmooring: jschneiderhan: send me a private message with your org name or put in a ticket on help.opscode.com, and I'll check the logs
[2012-05-04 15:52:31 -0400] bhunter: bhunter:  I think this answers my question...  ruby is 32-bit, so thus chef-client is 32-bit too:
[2012-05-04 15:52:37 -0400] bhunter: C:\opscode\chef\embedded\bin>ruby.exe --version
[2012-05-04 15:52:37 -0400] bhunter: ruby 1.9.2p290 (2011-07-09) [i386-mingw32]
[2012-05-04 15:53:36 -0400] hoover_damn: hrm, how badly does that mess up windows bhunter?
[2012-05-04 15:54:02 -0400] hoover_damn: because sometimes you need it running the 64-bit stuff and not 32
[2012-05-04 15:54:38 -0400] bhunter: I'm not sure yet.   I'm going to try to explicitly execute the 64-bit version of cmd.exe.
[2012-05-04 15:55:40 -0400] bhunter: I haven't had any trouble outside of execute.. opscode windows cookbook works fine otherwise.
[2012-05-04 15:55:41 -0400] doki_pen: is there a way to update a client's public key so they can use an existing pem?
[2012-05-04 15:59:13 -0400] hoover_damn: bhunter, yeah my concern is more installing 64-bit programs but my windows exp is so rusty i could be thinking of non-issues
[2012-05-04 15:59:22 -0400] hoover_damn: and installation of drivers
[2012-05-04 16:34:36 -0400] werdnativ: I'm trying to use this https://github.com/fnichol/chef-rvm in my vagrant machine. It provisions fine on the first run, but then after RVM is installed, it loses the gem environment and stops working.
[2012-05-04 16:36:25 -0400] werdnativ: chef-rvm has a setting for pointing to the original chef-solo installed by system ruby (mine is in /var/lib/gems, default system install for a ruby package).
[2012-05-04 16:37:04 -0400] werdnativ: it seems to find the original chef-solo, but is missing the gems to run it. Any ideas?
[2012-05-04 16:40:53 -0400] yfeldblum: werdnativ, wouldn't recommend setting a default ruby for the root user (the default should remain the system ruby)
[2012-05-04 16:41:17 -0400] werdnativ: hm, ok
[2012-05-04 16:43:13 -0400] werdnativ: pretty sure this was working before with system-wide rvm though, but maybe on another image (I built a new basebox for ubuntu 12.04)
[2012-05-04 16:49:55 -0400] AmishGeek: i see that ubuntu 12.04 bootstrap support was merged into master for chef https://github.com/opscode/chef/tree/master/chef/lib/chef/knife/bootstrap
[2012-05-04 16:50:06 -0400] AmishGeek: how can i update my chef-repo to get that updat?
[2012-05-04 16:50:15 -0400] AmishGeek: i'm a little rusty
[2012-05-04 16:51:36 -0400] jtimberman: AmishGeek: download the raw file from github into chef-repo/.chef/bootstrap/
[2012-05-04 16:52:41 -0400] AmishGeek: shouldn't i save it as a .rb not a .erb?
[2012-05-04 16:54:07 -0400] paulmooring: AmishGeek: Bootstrap files are actually templates that get turned into shell scripts so they're saved as .erb and ruby parses the bits in the <% %> tags.
[2012-05-04 16:54:24 -0400] AmishGeek: nevermind, i just looked at my other chef-repo with my own bootstrap files and they're .erb
[2012-05-04 16:54:41 -0400] AmishGeek: fun fun
[2012-05-04 16:55:04 -0400] AmishGeek: it's been a few months since i've actually touched any of this, kinda re-learning everything
[2012-05-04 16:55:07 -0400] paulmooring: if you're not familiar with erg files be aware <%= %> will include the output in the file and <% %> will just be parsed as ruby code
[2012-05-04 16:55:27 -0400] AmishGeek: thats the problem when something just works so well
[2012-05-04 17:12:52 -0400] miah: moin
[2012-05-04 17:22:11 -0400] AntonZ: has nayone here used  ec2-import-instance  command ?
[2012-05-04 17:22:15 -0400] AntonZ: http://aws.amazon.com/ec2/vmimport/
[2012-05-04 17:25:25 -0400] flashmanbahadur: when using knife ec2 I am trying to use a custom bootstrap template located in ~/.chef/bootstrap
[2012-05-04 17:25:35 -0400] flashmanbahadur: doesnt seem to be finding it despite the documentation listing it as a valid location
[2012-05-04 17:25:54 -0400] flashmanbahadur: should I specify the path to the file for the -d argument?
[2012-05-04 17:28:48 -0400] miah: it doesnt hurt to try
[2012-05-04 17:29:09 -0400] AntonZ: miah help
[2012-05-04 17:29:34 -0400] AntonZ: :)
[2012-05-04 17:29:48 -0400] AntonZ: trying to upload VHD image to amazon follwoing this article http://aws.amazon.com/ec2/vmimport/
[2012-05-04 17:30:13 -0400] AntonZ: running command ec2-import-instance --private-key SFO-PrivateKey.pem --cert SFO-Cert.pem BIGIP-10.2.4.577.0.vhd
[2012-05-04 17:30:29 -0400] AntonZ: bloody thin comlains about Required option '-f, --format FORMAT' missing
[2012-05-04 17:30:35 -0400] AntonZ: dont get what it wants
[2012-05-04 17:32:56 -0400] miah: http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-ImportInstance.html
[2012-05-04 17:33:06 -0400] miah: -f VHD
[2012-05-04 17:33:07 -0400] miah: =)
[2012-05-04 17:33:45 -0400] flashmanbahadur: nvm
[2012-05-04 17:33:59 -0400] flashmanbahadur: dumb mistake on my part with the bootstrap file, forgot to add the .erb extension
[2012-05-04 17:36:05 -0400] AntonZ: yea, looks like i have old toolshttps://forums.aws.amazon.com/thread.jspa?threadID=78436
[2012-05-04 17:36:06 -0400] AntonZ: https://forums.aws.amazon.com/thread.jspa?threadID=78436
[2012-05-04 17:36:13 -0400] AntonZ: the guy had same issue as im
[2012-05-04 17:37:31 -0400] flashmanbahadur: AntonZ: check in ##aws, maybe someone there will know, #chef prob is the best place
[2012-05-04 17:37:44 -0400] flashmanbahadur: prob *isnt
[2012-05-04 17:38:38 -0400] AntonZ: i know, i agree, i just know miah is an excellent resource :)
[2012-05-04 17:38:55 -0400] flashmanbahadur: fair enough
[2012-05-04 17:39:14 -0400] miah: it helps that i remember everything
[2012-05-04 17:39:26 -0400] miah: and am a level 18 google user
[2012-05-04 17:51:53 -0400] AmishGeek: using the new ubuntu12.04 bootstrap script fails
[2012-05-04 17:51:54 -0400] AmishGeek: bash: line 66: /usr/bin/chef-client: No such file or directory
[2012-05-04 17:52:07 -0400] AmishGeek: chef-client is being installed in /usr/local/bin/chef-client
[2012-05-04 17:52:31 -0400] gp5st1: i edited my template to just symlink it
[2012-05-04 17:52:44 -0400] AmishGeek: whats the best way to update the patching? or just add a "ln -s /usr/local/bin/chef-client /usr/bin/chef-client" ?
[2012-05-04 17:52:48 -0400] gp5st1: i would like to just fix the path it thinks it'll be at though
[2012-05-04 17:53:22 -0400] gp5st1: i wouldn't say the symlink is the best way, but i don't think it's a bad way either. i'd rather know the cause
[2012-05-04 17:53:50 -0400] AmishGeek: me too or rely on chef-client to be in $PATH and just call chef-client
[2012-05-04 17:56:09 -0400] flashmanbahadur: AmishGeek: that happened to me as well
[2012-05-04 17:56:13 -0400] flashmanbahadur: you have a few options
[2012-05-04 17:56:20 -0400] flashmanbahadur: simplest is to make a custom bootstrap script
[2012-05-04 17:56:25 -0400] flashmanbahadur: that symlinks
[2012-05-04 17:56:32 -0400] flashmanbahadur: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/ubuntu12.04-gems.erb
[2012-05-04 17:56:42 -0400] AmishGeek: yeah, i just added the symlink after the gem install chef
[2012-05-04 17:57:07 -0400] flashmanbahadur: looks like several parts of the chef don't play quite nice now that ruby 1.9 moves chef-client
[2012-05-04 17:57:24 -0400] flashmanbahadur: if you have a  chef-client init.d service it will fail silently unless you symlink
[2012-05-04 17:59:21 -0400] shuvo: Chef gurus, I have been meaning to write a guide (with supporting software/scripts/recipies) that allows you to create your own private chef server from scratch using veewee.
[2012-05-04 17:59:26 -0400] shuvo: I have already written a complete set of scripts + recipes that can set up a private chef server in a virtual box VM from scratch (you need to provide only the OS iso, but veewee even fetches that for you if you don't have it).
[2012-05-04 17:59:32 -0400] shuvo: Does this sound useful? I want to have an idea before I put in many hours to come up with guide.
[2012-05-04 17:59:37 -0400] shuvo: I am also interested in knowing if others/you have something like this on your hard drive as well but never shared it(eg: pikesley created something similar using shell scripts and without veewee and shared it a month ago (https://github.com/pikesley/learn-yourself-some-chef), but I was done with my own set of scripts much before that)
[2012-05-04 17:59:42 -0400] shuvo: I would rather not duplicate efforts like this anymore if that can be helped :-)
[2012-05-04 17:59:44 -0400] shuvo: EOM :-D
[2012-05-04 18:00:45 -0400] shuvo: You can also email gmail at subhobroto
[2012-05-04 18:04:23 -0400] miah: shuvo: sounds awesome
[2012-05-04 18:04:53 -0400] miah: forked. i'll take a look shortly =)
[2012-05-04 18:06:29 -0400] shuvo: Thanks miah, pikesley's project is completely separate though but I will get in touch with him. They way I have it now: it taxes me ~10 mins from ubuntu .iso to fully working chef server :-D
[2012-05-04 18:06:39 -0400] miah: oh
[2012-05-04 18:06:43 -0400] miah: do you have your stuff up on github too?
[2012-05-04 18:07:37 -0400] shuvo: miah, hmm, not yet. Maybe I should. Would you be interested if I emailed them to you directly (me not know git yet but maybe in next  2 weeks)
[2012-05-04 18:07:53 -0400] UForgotten: can someone pastebin me some working examples of default attributes that contain hashes? I'm getting parse errors
[2012-05-04 18:08:07 -0400] miah: git is pretty easy
[2012-05-04 18:08:14 -0400] UForgotten: in json
[2012-05-04 18:08:15 -0400] miah: i'm miah@chia-pet.org / miah on github
[2012-05-04 18:08:23 -0400] cwj: UForgotten: how about you pastebin whats giving you errors
[2012-05-04 18:08:30 -0400] shuvo: UForgotten, could you post your code bits?
[2012-05-04 18:08:32 -0400] UForgotten: cwj: nop
[2012-05-04 18:08:41 -0400] UForgotten: I need someone else's examples pls.
[2012-05-04 18:09:16 -0400] shuvo: UForgotten, how about this: http://wiki.opscode.com/display/chef/Setting+Attributes+(Examples)
[2012-05-04 18:09:16 -0400] UForgotten: I can pseudocode my broken one but I just need to compare it to some working default attribute json
[2012-05-04 18:09:23 -0400] UForgotten: shuvo: those are ruby not json
[2012-05-04 18:09:24 -0400] cwj: your choice but i have more time to look at what you are trying to do than i do to dig through my code for something to sanitize and show you
[2012-05-04 18:10:01 -0400] UForgotten: sanitization is the problem on both ends hehe
[2012-05-04 18:10:07 -0400] UForgotten: I'll cook something up
[2012-05-04 18:10:43 -0400] shuvo: UForgotten, well, default["apache"]["dir"] = "/etc/apache2" would become: {"default" : { "apache" : {"dir" :  "/etc/apache2"} }}
[2012-05-04 18:11:53 -0400] miah: shuvo: http://help.github.com/mac-set-up-git/
[2012-05-04 18:12:10 -0400] miah: doh. that went to mac specifically. not sure what you have but read the docs. git isn't too brutal to learn.
[2012-05-04 18:12:13 -0400] shuvo: miah, I see what you did there :-D
[2012-05-04 18:12:21 -0400] qhartman: Is there a de facto best practice regarding file sizes for cookbook files? I have a jar file that a recipe depends on that it seems like it would make sense to just stick it in the cookbook rather than to have to fetch it from some other remote source when it's called for.
[2012-05-04 18:12:30 -0400] shuvo: ah well. git init, git add and so on
[2012-05-04 18:12:42 -0400] UForgotten: http://pastebin.com/HctNMb7n
[2012-05-04 18:12:53 -0400] miah: qhartman: use remote_file, realize that chef isn't optimized for serving large files.
[2012-05-04 18:13:03 -0400] UForgotten: the awsips array works fine, but the trustedips hash won't parse, complains about unexpected { at the beginning
[2012-05-04 18:13:05 -0400] miah: basically. i keep my files in cookbooks under a few kilobytes
[2012-05-04 18:13:40 -0400] shuvo: UForgotten, I found this site helpful when doing .rb to .json translation manually L http://jsonviewer.stack.hu/
[2012-05-04 18:17:28 -0400] qhartman: miah, this file is only 1MB. does that qualify as "large" for chef?
[2012-05-04 18:19:08 -0400] AntonZ: does nayone know web service url for amaonz in west region ?
[2012-05-04 18:19:22 -0400] AntonZ: Defaults to the value of
[2012-05-04 18:19:22 -0400] AntonZ:           'https://ec2.amazonaws.com' (us-east-1)
[2012-05-04 18:19:32 -0400] AntonZ: i need the same only for west
[2012-05-04 18:20:53 -0400] miah: qhartman: depends on if you dont mind tieing up your chef server to handle file serving
[2012-05-04 18:20:54 -0400] paulmooring: qhartman: it depends on your usage, if it's one file and you can provide a checksum than remote_file is probably a great solution
[2012-05-04 18:21:08 -0400] miah: its not too big. its just going to use resources that aren't really designed for file distribution
[2012-05-04 18:21:14 -0400] kallen: AntonZ: iirc, it's easily look-up-able .. sec..
[2012-05-04 18:21:23 -0400] AntonZ: im googling :)
[2012-05-04 18:21:25 -0400] AntonZ: nothing thuse far
[2012-05-04 18:21:29 -0400] kallen: aws docs
[2012-05-04 18:21:30 -0400] UForgotten: hmm, I reformatted it an it might be working now.
[2012-05-04 18:21:41 -0400] kallen: "ec2 api endpoints"
[2012-05-04 18:21:47 -0400] UForgotten: thoguht it was supposed to be space agnostic. meh. I've learned that a few times, its picky about spacing and non-space chars hehe
[2012-05-04 18:22:55 -0400] AntonZ: thank you much, found!
[2012-05-04 18:23:01 -0400] kallen: cool
[2012-05-04 18:23:04 -0400] shuvo: json should be space agnostic, unless it's a quoted element
[2012-05-04 18:23:12 -0400] kallen: what's url? i didn't find it yet. i only found http://www.elastician.com/2009/12/comprehensive-list-of-aws-endpoints.html
[2012-05-04 18:23:13 -0400] shuvo: hmm
[2012-05-04 18:23:29 -0400] kallen: was hoping for AWS canonical list
[2012-05-04 18:23:34 -0400] qhartman: thanks miah and paulmooring
[2012-05-04 18:26:20 -0400] cwj: kallen: http://aws.amazon.com/articles/3912?_encoding=UTF8&jiveRedirect=1 is linked at the top of the post you just linked
[2012-05-04 18:26:24 -0400] cwj: looks canonical to me
[2012-05-04 18:27:05 -0400] cwj: nm i misunderstood
[2012-05-04 18:39:34 -0400] miketheman: how might I use roles/environments in shef for debugging?
[2012-05-04 18:40:09 -0400] miketheman: I am setting a default_attribute in an environment, and it's not being seen by the node
[2012-05-04 18:42:50 -0400] shuvo_: miketheman, setting roles/environments in shef seems buggy ATM. There's a JIRAfiled for it already
[2012-05-04 18:43:27 -0400] miketheman: shuvo_:  thanks
[2012-05-04 18:43:49 -0400] miketheman: so I'm back to dumping log entries into the recipe. :)
[2012-05-04 18:44:29 -0400] shuvo_: miketheman, I have read that using prywith shef helps,but I don't have personal experience with it
[2012-05-04 18:48:15 -0400] spyvsspy: i am trying to use nginx, to have all requests go over port 443 to my chef-api server, but I keep getting a 406 error
[2012-05-04 18:48:16 -0400] spyvsspy: https://gist.github.com/2596913
[2012-05-04 18:50:12 -0400] spyvsspy: anyone have an idea on why this is happening?  I have SSL installed on the server, and if i browse to https:// it works fine (I get the chef api webpage)
[2012-05-04 19:07:40 -0400] miah: you have your cert installed?
[2012-05-04 19:08:44 -0400] spyvsspy: yes
[2012-05-04 19:09:01 -0400] spyvsspy: im not getting any errors in a browser when navigating to https://chef-server.com
[2012-05-04 19:09:19 -0400] yfeldblum: the webui and the api listen on different ports, even if both use SSL
[2012-05-04 19:09:23 -0400] spyvsspy: its displaying the webpage "THE REST API"
[2012-05-04 19:09:39 -0400] yfeldblum: sorry didn't see that
[2012-05-04 19:10:26 -0400] spyvsspy: the webui is at http://chef-server.com:4040 (working fine)  I have the api on http://chef-server:4000 and https://chef-server.com is proxying to http://chef-server.com:4040
[2012-05-04 19:12:27 -0400] spyvsspy: i dont get it, everything should be functioning correctly
[2012-05-04 19:18:25 -0400] Rob: I'm attempting to use knife ssh and I keep getting FATAL: no nodes returned from search!.  The command I'm using is: knife ssh name:NODE -x useracct -P password "chef-client" -a IPADDRESS
[2012-05-04 19:18:57 -0400] Rob: when I use knife client list I get the output of all nodes I have added, any ideas on causes of this?
[2012-05-04 19:19:08 -0400] Rob: and I am able to ping the other system
[2012-05-04 19:21:19 -0400] cobragoat: I don't think it cleans up after itself if you manually delete instances/nodes
[2012-05-04 19:21:46 -0400] spyvsspy: man wtf, something is checking incorreclty though
[2012-05-04 19:22:08 -0400] spyvsspy: as the node just checked in some how;  manually running sudo chef-client gives me 406 though
[2012-05-04 19:22:52 -0400] spyvsspy: where does ohai get the url from?
[2012-05-04 19:24:46 -0400] miah: /etc/chef/client.rb
[2012-05-04 19:25:13 -0400] spyvsspy: so, if I set that to chef_server_url  "https://chef-server.newground.com"
[2012-05-04 19:25:24 -0400] spyvsspy: it will check into port 443 on my chef server correct?
[2012-05-04 19:26:04 -0400] spyvsspy: when I manually run chef-client, I get a 406, something is running though automatically, as it is sitll checking in okay
[2012-05-04 19:26:19 -0400] spyvsspy: which makes no sense
[2012-05-04 19:27:32 -0400] yfeldblum: spyvspy, what's listening on port 443?
[2012-05-04 19:27:40 -0400] spyvsspy: nginx
[2012-05-04 19:27:49 -0400] spyvsspy: w/ SSL enabled, adn the cert installed
[2012-05-04 19:28:09 -0400] yfeldblum: spyvspy, and nginx is proxying 443 to ... ?
[2012-05-04 19:28:25 -0400] spyvsspy: http://server:4000
[2012-05-04 19:29:46 -0400] spyvsspy: https://gist.github.com/2597186
[2012-05-04 19:29:56 -0400] spyvsspy: thats the apropos nginx stuff
[2012-05-04 19:31:32 -0400] spyvsspy: [Fri, 04 May 2012 14:30:51 -0500] FATAL: Net::HTTPServerException: 406 "Not Acceptable" thats what i get when i run
[2012-05-04 19:31:47 -0400] spyvsspy: sudo chef-client, but someone when I go to the webui the node is updated
[2012-05-04 19:31:52 -0400] spyvsspy: somehow*
[2012-05-04 19:32:43 -0400] spyvsspy: update time: Fri May 4 14:30:44 CDT 2012
[2012-05-04 19:36:12 -0400] yfeldblum: spyvspy, http://wiki.nginx.org/IfIsEvil
[2012-05-04 19:38:58 -0400] yfeldblum: spyvspy, "Directive if has problems when used in location context, in some cases it doesn't do what you expect but something completely different instead."
[2012-05-04 19:40:09 -0400] miah: dont use 'if' in nginx.conf unless you _know_ what you are doing =)
[2012-05-04 19:41:12 -0400] spyvsspy: ah, nice
[2012-05-04 19:41:14 -0400] spyvsspy: cool thanks
[2012-05-04 19:41:40 -0400] spyvsspy: fwiw: https://gist.github.com/2597248  :)
[2012-05-04 19:44:43 -0400] yfeldblum: nginx debugging FTW
[2012-05-04 19:52:11 -0400] phantasm66: hey all.. running chef-0.10.8
[2012-05-04 19:52:29 -0400] phantasm66: using apache 2.2 (https) for ssl proxying
[2012-05-04 19:52:58 -0400] phantasm66: all remote chef-client runs are AOK.. (many different cookbooks).. no errors retrieving their recipes, etc
[2012-05-04 19:53:23 -0400] phantasm66: however, when the chef-server itself runs it's own chef-client... we are getting this (since building it):
[2012-05-04 19:54:04 -0400] phantasm66: [Fri, 04 May 2012 15:49:39 -0400] ERROR: Server returned error for https://chef1.colo.<our_domain>.com/cookbooks/_shared/0.1.0/files/44c9cdcae90370a4ae7fb8a72e8156b6, retrying 1/5 in 4s
[2012-05-04 19:54:04 -0400] phantasm66: [Fri, 04 May 2012 15:49:43 -0400] ERROR: Server returned error for https://chef1.colo.<our_domain>.com/cookbooks/_shared/0.1.0/files/44c9cdcae90370a4ae7fb8a72e8156b6, retrying 2/5 in 7s
[2012-05-04 19:54:24 -0400] phantasm66: replace <our_domain> with our actual domain name
[2012-05-04 19:54:38 -0400] phantasm66: is anybody familiar w/ that error?
[2012-05-04 20:15:44 -0400] miketheman: anyone have an update on knife-ec2 0.5.12 release date?
[2012-05-04 20:22:34 -0400] erratic: ohai chefs
[2012-05-04 20:23:44 -0400] erratic: Im about to use chef-client::cron but first I want to disable the stupid init scripts that are already setup on my vms that seem to start everytime my vms start
[2012-05-04 20:23:59 -0400] erratic: is there a way to disable them with the cookbook?
[2012-05-04 20:24:11 -0400] erratic: or something? or am I just going to have to do update-rc.d with knife ssh
[2012-05-04 20:25:38 -0400] shuvo_: erratic, unless I am missing something, you will indeed need to update-rc.d -f remove
[2012-05-04 20:26:10 -0400] erratic: oh alright
[2012-05-04 20:28:16 -0400] erratic: shuvo_ hmmm
[2012-05-04 20:28:19 -0400] erratic: cron
[2012-05-04 20:28:20 -0400] erratic: Use this recipe to run chef-client as a cron job rather than as a service. The cron job runs after random delay that is between 0 and 90 seconds to ensure that the chef-clients don't attempt to connect to the chef-server at the exact same time. You should set node["chef_client"]["init_style"] = "none" when you use this mode but it is not required.
[2012-05-04 20:30:26 -0400] shuvo_: Yes, the jitter's intentional so that you don't end up ddosing your own chef server if that's what you are asking
[2012-05-04 20:30:42 -0400] erratic: thats not whats interesting
[2012-05-04 20:30:54 -0400] erratic: node["chef_client"]["init_style"] = "none"
[2012-05-04 20:31:04 -0400] erratic: you should use it but isn't required
[2012-05-04 20:31:26 -0400] eherot: shuvo_: We overcame that safety measure by having every server run a wildcard node search ;-)
[2012-05-04 20:32:56 -0400] hoover_damn: erratic, do you use the debian packages?
[2012-05-04 20:33:00 -0400] shuvo_: yes, so that chef_client does not start running the "init_style" setups. For example, were it 'runit', you would have those specific scripts setup
[2012-05-04 20:33:05 -0400] erratic: hoover_damn yeppers
[2012-05-04 20:33:10 -0400] hoover_damn: erratic, you'll need to stop it from runit or init... and update-rc.d remove it
[2012-05-04 20:33:21 -0400] erratic: damn thats annoying
[2012-05-04 20:33:22 -0400] erratic: ok
[2012-05-04 20:33:23 -0400] hoover_damn: and then moving to cron should be straight forward
[2012-05-04 20:33:28 -0400] hoover_damn: don't use the debs
[2012-05-04 20:33:36 -0400] hoover_damn: gems don't install init scripts if you don't tell them to
[2012-05-04 20:33:40 -0400] erratic: but the the debs are so debian like
[2012-05-04 20:33:48 -0400] hoover_damn: stupid?
[2012-05-04 20:33:49 -0400] hoover_damn: sorry
[2012-05-04 20:34:36 -0400] erratic: fair enough
[2012-05-04 20:34:58 -0400] shuvo_: eherot, he he. Why not donate the CPU cycled to SETI@home instead? ;-D
[2012-05-04 20:35:15 -0400] shuvo_: s/cycled/cycles
[2012-05-04 20:35:24 -0400] eherot: shuvo_: We've since fixed that bit of bad coding ;-)
[2012-05-04 20:35:30 -0400] erratic: I wish someone would donate a parrot to me
[2012-05-04 20:35:38 -0400] erratic: Ive been asking for a long time
[2012-05-04 20:38:08 -0400] yfeldblum: erratic, `echo` is a parrot
[2012-05-04 20:38:26 -0400] miah: its not a pretty as a real parrot though
[2012-05-04 20:38:49 -0400] miah: http://www.youtube.com/watch?v=8yYkHNPhHOw
[2012-05-04 20:39:10 -0400] eherot: yeah, I've got a parrot.  He's not very good at writing ruby code though.
[2012-05-04 20:39:19 -0400] eherot: Though he's an expert at preventing me from doing it.
[2012-05-04 20:40:06 -0400] miah: lol
[2012-05-04 20:48:58 -0400] erratic: miah I started to watch that on netflix
[2012-05-04 20:49:50 -0400] erratic: I think thats something else though
[2012-05-04 20:49:53 -0400] erratic: it looked boring
[2012-05-04 20:50:08 -0400] erratic: I think parrots are tropical birds arent they
[2012-05-04 20:50:09 -0400] miah: documentaries are awesome
[2012-05-04 20:50:22 -0400] miah: yes, and we have wild parrots in SF
[2012-05-04 20:50:42 -0400] erratic: poor things
[2012-05-04 20:50:59 -0400] erratic: y7eah I was about to say
[2012-05-04 20:51:06 -0400] c_t: depends on the parrot
[2012-05-04 20:51:07 -0400] erratic: I thought I had looked up telegraph hill too
[2012-05-04 20:51:12 -0400] c_t: some are subtropical
[2012-05-04 20:51:12 -0400] erratic: and realized it was in SF
[2012-05-04 20:51:28 -0400] c_t: Carolina parakeets used to live surprisingly far north
[2012-05-04 20:52:29 -0400] erratic: these cronlets should be running now
[2012-05-04 20:52:31 -0400] andrewle: I keep having this issue where specific nodes out of our deployment of 30 nodes keep not appearing in chef/knife search results...
[2012-05-04 20:52:37 -0400] erratic: we'll see I checked the crontab and saw it there
[2012-05-04 20:52:47 -0400] andrewle: I'm even searching directly for the name of the node
[2012-05-04 20:52:49 -0400] andrewle: Any ideas?
[2012-05-04 20:53:29 -0400] erratic: can you see them in the clients tab on the web ui
[2012-05-04 20:54:07 -0400] andrewle: erratic: I don't actually use the web ui, but runnign `knife node show <NODENAME>` works fine for them
[2012-05-04 20:54:31 -0400] erratic: well what Im trying to say is theres roles, nodes, cookbooks databags and client objects
[2012-05-04 20:54:36 -0400] erratic: I would try searching for client objects
[2012-05-04 20:54:43 -0400] erratic: and see if there even registered as clients
[2012-05-04 20:55:00 -0400] erratic: I mean I'd assume they are but who knows
[2012-05-04 20:55:46 -0400] andrewle: OK, I just search for it via `knife search client "name:db-trans02"`
[2012-05-04 20:55:53 -0400] andrewle: Came up fine
[2012-05-04 20:57:09 -0400] erratic: this is interesting to me, I read earlier that there's some sort of problem with chef-clients running at the same time? does that mean if they run at the same time it could cause a race condition in teh server and possibly result in the problem andrewle is having?
[2012-05-04 20:57:44 -0400] erratic: I still dont understand why the chef-client run times need to be staggered other than maybe for performance
[2012-05-04 20:58:18 -0400] andrewle: As I understood it, chef-client run times are staggered to prevent the chef server from be overloaded with too many concurrent requests
[2012-05-04 20:59:04 -0400] erratic: I would ssh into db-trans02 and run chef-client and see if it appears in the node list
[2012-05-04 20:59:10 -0400] andrewle: But I don't think that's the issue here as we only run chef client 2 or 3 times per week on our systems.
[2012-05-04 20:59:18 -0400] erratic: you might check the log for it first
[2012-05-04 20:59:41 -0400] josephholsten: anyone seen a kerberos cb around?
[2012-05-04 20:59:44 -0400] erratic: ah thats probably why
[2012-05-04 21:00:03 -0400] erratic: I notice mine will disappear from node searches if they don't check in within a certain amount of time
[2012-05-04 21:00:05 -0400] andrewle: erratic: Beat you to that already. chef-client runs fine, `knife node show db-trans02` still works but `knife search node` does not
[2012-05-04 21:00:39 -0400] miah: josephholsten: https://github.com/atomic-penguin/cookbook-krb5
[2012-05-04 21:01:42 -0400] erratic: andrewle what if you do a knife search node * or whatever the syntax is that would give you the list of every single node..
[2012-05-04 21:02:06 -0400] crucially: omg
[2012-05-04 21:02:10 -0400] crucially: i am so angry
[2012-05-04 21:02:21 -0400] andrewle: erratic: Weird, it populates when I do that: knife search node *:*
[2012-05-04 21:02:45 -0400] erratic: maybe your search params then
[2012-05-04 21:02:52 -0400] erratic: Ive had trouble with them before
[2012-05-04 21:03:11 -0400] andrewle: `knife search node "name:db-trans02"`? It doesn't get any simpler than that
[2012-05-04 21:03:22 -0400] erratic: chaneg name to node
[2012-05-04 21:03:34 -0400] erratic: er wait lemme look at my cookbooks really quick
[2012-05-04 21:04:30 -0400] josephholsten: miah: of course, thanks!
[2012-05-04 21:04:30 -0400] erratic: slave_ips = search(:node, "role:Lamp_Slave").map {|
[2012-05-04 21:04:45 -0400] erratic: yeah Im not sure
[2012-05-04 21:04:52 -0400] erratic: knife search node "name:app*"
[2012-05-04 21:04:55 -0400] erratic: it does say name on the doc
[2012-05-04 21:05:15 -0400] erratic: hmm
[2012-05-04 21:05:16 -0400] andrewle: erratic: Yeah, thanks for trying to jump in though
[2012-05-04 21:05:22 -0400] eherot: name is definitely in the standard server object
[2012-05-04 21:05:24 -0400] eherot: but
[2012-05-04 21:05:28 -0400] eherot: yours might not be set right
[2012-05-04 21:05:33 -0400] erratic: what if you put * on the end of trans02
[2012-05-04 21:05:51 -0400] erratic: brb
[2012-05-04 21:06:19 -0400] andrewle: knife search node "name:db-trans02*" => 0 items found
[2012-05-04 21:06:38 -0400] andrewle: knife search node "name:db*" => 5 items found, but not db-trans02
[2012-05-04 21:06:56 -0400] erratic: o_O
[2012-05-04 21:07:05 -0400] erratic: let me know when you figure that out k?
[2012-05-04 21:07:06 -0400] erratic: lol
[2012-05-04 21:07:40 -0400] andrewle: erratic: Hahah yeah. Total "chef lulz" here
[2012-05-04 21:08:46 -0400] andrewle: erratic: I bet this has something to do with Solr's index just barfing.
[2012-05-04 21:09:22 -0400] andrewle: But it's just wacky since it's always these two servers and never any other ones
[2012-05-04 21:10:04 -0400] eherot: erratic: Did you run knife node show -a name NODE to verify that the name is actually set correctly in the node object?
[2012-05-04 21:10:26 -0400] erratic: andrewle I think so too
[2012-05-04 21:10:42 -0400] erratic: you know if you really want to be sure,
[2012-05-04 21:10:43 -0400] erratic: one sec
[2012-05-04 21:10:49 -0400] andrewle: eherot: Yup, no problem
[2012-05-04 21:11:00 -0400] andrewle: eherot: Things look kosher to me
[2012-05-04 21:11:21 -0400] shuvo_: hey, miah, guess what: got git installed, working and put in my first pull request with our BryanWB as the victim. My stuff coming soon I guess. Thanks for the "push" :-D
[2012-05-04 21:11:44 -0400] erratic: curl -X POST -d @test.xml -H "Content-Type:
[2012-05-04 21:11:45 -0400] erratic: text/xml\r\n" http://localhost:8983/solr/update
[2012-05-04 21:11:46 -0400] shuvo_: https://github.com/subhobroto/java
[2012-05-04 21:11:53 -0400] erratic: figure out whatever xml it sends to do a search..
[2012-05-04 21:12:00 -0400] eherot: andrewle: and it comes back in the result if you just do a search for name:*?
[2012-05-04 21:12:09 -0400] erratic: er wait I think you just have to change the URI
[2012-05-04 21:12:11 -0400] erratic: but yeah
[2012-05-04 21:12:18 -0400] eherot: erratic: yeah it's just a GET
[2012-05-04 21:12:50 -0400] erratic: I gotta get back to work
[2012-05-04 21:12:52 -0400] erratic: lol
[2012-05-04 21:15:32 -0400] igor_: hey
[2012-05-04 21:15:38 -0400] igor_: can someone help with Chef config?
[2012-05-04 21:16:04 -0400] andrewle: eherot: Sure does
[2012-05-04 21:16:04 -0400] eherot: I can try!
[2012-05-04 21:16:23 -0400] igor_: trying to use environments
[2012-05-04 21:16:26 -0400] igor_: dev and prod
[2012-05-04 21:16:39 -0400] eherot: igor_: uh oh.  I'm still learning that one ;-)
[2012-05-04 21:16:46 -0400] igor_: trying to setup variable to overwrite resolv.conf
[2012-05-04 21:17:41 -0400] igor_: it works fine if the resolv.conf.erb is a simple file
[2012-05-04 21:17:58 -0400] igor_: Generated by Chef for <%= node[:fqdn] %>
[2012-05-04 21:18:03 -0400] igor_: that works too
[2012-05-04 21:19:13 -0400] igor_: domain <%= node[domain] %> that does not work
[2012-05-04 21:19:34 -0400] igor_: how do I specify domain?
[2012-05-04 21:20:21 -0400] eherot: are you looking for basically everything but the first part of the fqdn?
[2012-05-04 21:20:55 -0400] igor_: I want to be able to specify parameters
[2012-05-04 21:21:05 -0400] igor_: dns servers IPs, domain name, etc.
[2012-05-04 21:21:34 -0400] cwj: hipchat users might be interested in the cookbook i just published: http://community.opscode.com/cookbooks/hipchat
[2012-05-04 21:21:38 -0400] igor_: I was trying to follow this guy:
[2012-05-04 21:21:42 -0400] igor_: http://refcardz.dzone.com/refcardz/chef-open-source-tool-scalable
[2012-05-04 21:22:32 -0400] igor_: domain <%= node[domain] %>
[2012-05-04 21:22:36 -0400] igor_: is not working for me
[2012-05-04 21:22:52 -0400] eherot: that should be a working object in the node
[2012-05-04 21:22:55 -0400] eherot: what sort of error is it giving you?
[2012-05-04 21:23:24 -0400] eherot: oh, wait
[2012-05-04 21:23:29 -0400] eherot: you have curly quotes in there
[2012-05-04 21:23:39 -0400] eherot: that's probably why it's not working
[2012-05-04 21:24:08 -0400] eherot: causes errors like this:
[2012-05-04 21:24:08 -0400] eherot: syntax error, unexpected $end, expecting ']'
[2012-05-04 21:24:08 -0400] eherot: node[
[2012-05-04 21:24:09 -0400] eherot:      ^
[2012-05-04 21:24:20 -0400] josephholsten: ugh, why aren't install_from and metachef just in upstream
[2012-05-04 21:25:31 -0400] igor_: are those supposed be single?
[2012-05-04 21:25:34 -0400] igor_: ' '  ?
[2012-05-04 21:25:38 -0400] eherot: yep
[2012-05-04 21:25:45 -0400] igor_: let me try
[2012-05-04 21:26:30 -0400] eherot: I think the CMS got ahead of this document :-)
[2012-05-04 21:27:47 -0400] igor_: no error but it did not put any value
[2012-05-04 21:27:55 -0400] igor_: domain
[2012-05-04 21:27:57 -0400] igor_: blank
[2012-05-04 21:28:03 -0400] eherot: hmm
[2012-05-04 21:28:18 -0400] eherot: have you tried running it in shef on the machine itself?
[2012-05-04 21:28:18 -0400] andrewle: igor_: Have you set the value on the node yet?
[2012-05-04 21:28:29 -0400] eherot: shef -z -c /etc/chef/client.rb
[2012-05-04 21:28:58 -0400] igor_: how do I do that?
[2012-05-04 21:29:13 -0400] eherot: Shouldn't ohai pick that value up automatically?
[2012-05-04 21:29:38 -0400] andrewle: I don't know that it's a value that is on a node by default, such as 'hostname'
[2012-05-04 21:29:42 -0400] igor_: So I've got those two lines:
[2012-05-04 21:29:48 -0400] igor_: Node <%= node[:fqdn] %>
[2012-05-04 21:29:51 -0400] eherot: andrewle: seems to be on mine
[2012-05-04 21:29:57 -0400] igor_: Domain <%= node['domain'] %>
[2012-05-04 21:30:08 -0400] igor_: Node is working fine, Domain doesn't
[2012-05-04 21:30:28 -0400] andrewle: eherot: Not for me
[2012-05-04 21:30:35 -0400] erratic: I made a recipe for phpmyadmin recently, it makes a config.inc.php that has a list of all of my mysql servers to connect to
[2012-05-04 21:30:38 -0400] erratic: its pretty sick
[2012-05-04 21:31:14 -0400] igor_: I'm sure it works great but can you help?
[2012-05-04 21:31:19 -0400] andrewle: igor_: Try `knife node edit <YOURNODE>`
[2012-05-04 21:31:30 -0400] eherot: actually
[2012-05-04 21:31:33 -0400] andrewle: And add the key + value for domain
[2012-05-04 21:31:36 -0400] eherot: knife node show -a domain YOURNODE should show it
[2012-05-04 21:31:49 -0400] andrewle: ... in the 'normal' section
[2012-05-04 21:33:21 -0400] igor_: Environment: prod
[2012-05-04 21:33:31 -0400] igor_: FQDN:        web01
[2012-05-04 21:33:42 -0400] igor_: Ah, so that's where it comes from?
[2012-05-04 21:34:07 -0400] eherot: anything in the output here you can refer to with node[key]
[2012-05-04 21:34:24 -0400] igor_: knife node show -a domain web01
[2012-05-04 21:34:26 -0400] igor_: shows
[2012-05-04 21:34:31 -0400] igor_: domain:
[2012-05-04 21:34:33 -0400] eherot: for a more complete list:
[2012-05-04 21:34:33 -0400] eherot: knife node edit -a <YOURNODE>
[2012-05-04 21:34:34 -0400] igor_: blank
[2012-05-04 21:34:52 -0400] eherot: so my guess would be that ohai just isn't able to figure out what it's supposed to be
[2012-05-04 21:35:13 -0400] eherot: that's probably because your fqdn has no dots in it
[2012-05-04 21:35:20 -0400] andrewle: eherot: Probably it
[2012-05-04 21:35:31 -0400] andrewle: eherot: We don't use any dots in ours either
[2012-05-04 21:35:37 -0400] andrewle: Makes sense
[2012-05-04 21:35:42 -0400] igor_:   "name": "web01",
[2012-05-04 21:35:53 -0400] eherot: It's nut technically a "fully qualified" domain name then I don't think
[2012-05-04 21:35:58 -0400] eherot: *not
[2012-05-04 21:36:13 -0400] igor_:  "override": {   },   "default": {     "basecook": {       "dnsdomain": ["prod.com"],
[2012-05-04 21:36:26 -0400] andrewle: eherot: You're right
[2012-05-04 21:36:32 -0400] igor_: it shows correctly there
[2012-05-04 21:37:11 -0400] igor_: it should be a common task to overwrite resolv.conf, no?
[2012-05-04 21:37:30 -0400] igor_: I could not find a good manual how to use variables
[2012-05-04 21:37:56 -0400] igor_: http://refcardz.dzone.com/refcardz/chef-open-source-tool-scalable
[2012-05-04 21:38:14 -0400] igor_: that one looked good, but his examples are not working for me.
[2012-05-04 21:40:54 -0400] igor_: anyway - thanks for the help guys!
[2012-05-04 21:46:14 -0400] dangerdave: Newbie question here: I pulled a cookbook off of github that has a bunch of definitions, but no recipes. How do I reference them in my own cookbook? Guess I wondering about when things other than recipe rb files get loaded. Thanks.
[2012-05-04 21:47:15 -0400] andrewle: dangerdave: Do you want to reference them in your own cookbook or from within the same cookbook?
[2012-05-04 21:47:24 -0400] dangerdave: andrewle: from my own cookbook
[2012-05-04 21:48:07 -0400] andrewle: You need to add a `depends "COOKBOOK_NAME"` to the metadata file in your own cookbook
[2012-05-04 21:48:34 -0400] andrewle: And then you can reference the definitions from that cookbook from your recipe like any other resource
[2012-05-04 21:49:04 -0400] dangerdave: andrewle: ah, i did that already -- although i didn't understand that the metadata references were the tie that bound. (i just figured the metadata was for things like the cookbook site.) thanks!
[2012-05-04 21:50:14 -0400] andrewle: dangerdave: Yeah, subtle, huh?
[2012-05-04 21:50:35 -0400] andrewle: dangerdave: Are you @dangerdave on the twitters?
[2012-05-04 21:52:53 -0400] dangerdave: andrewle: yes indeed. have been a chef solo user for a while, with a single cookbook, but am slowly learning as i bring chef client/server sanity to my ops.
[2012-05-04 21:53:37 -0400] dangerdave: maybe "sanity" isn't the right word. maybe "justice" is.
[2012-05-04 21:53:54 -0400] andrewle: dangerdave: Cool. Been following you there for a while. Found you through garybernhardt
[2012-05-04 21:54:18 -0400] dangerdave: andrewle: oh, interesting. yeah, gary's a friend and also a fellow Seattleite. you in sea-town too?
[2012-05-04 21:54:31 -0400] andrewle: Yeah, there are definitely days when chef will drive you a little nuts
[2012-05-04 21:55:07 -0400] eherot: dangerdave: not sanity, "rules" ;-)
[2012-05-04 21:55:24 -0400] dangerdave: eherot: "chef's iron fist"?
[2012-05-04 21:55:40 -0400] andrewle: dangerdave: Nah, I'm in Santa Barbara. CA. I read his blog (when he used to blog) and am a subscriber on DAS
[2012-05-04 21:56:06 -0400] dangerdave: andrewle: cool. Yeah, DAS is great. Have been a subscriber since day one. I think Gary pays for Cloak, so we're roughly even. ;-)
[2012-05-04 21:56:18 -0400] eherot: danderson: The opscode guys should make a poster of that concept so I can put it up over my desk
[2012-05-04 21:57:26 -0400] andrewle: dangerdave: Oh yeah, I forgot you work on Cloak. Beautifully simple install, if I recall correctly
[2012-05-04 21:57:41 -0400] dangerdave: andrewle: trying to make it even simpler, but thanks appreciated.
[2012-05-04 21:59:32 -0400] dangerdave: andrewle: nice. I gather you're @andrewle pretty much everywhere. Good to make the connection.
[2012-05-04 22:00:11 -0400] andrewle: dangerdave: Yup, that's me. Same here
[2012-05-04 22:27:06 -0400] dangerdave: What's the status of the refactoring work on the application and application_python cookbooks? A lot of them seem to reference Chef::Resource::ApplicationBase, although this doesn't seem to be present in Chef 0.10.8? A little confused about how all this stuff is intended to come together...
[2012-05-04 22:38:21 -0400] ukio: ohai!
[2012-05-04 22:38:38 -0400] ukio: have an ohai question:
[2012-05-04 22:38:58 -0400] ukio: i'm using vagrant and ohai reports the wrong ip address
[2012-05-04 22:39:41 -0400] ukio: i.e. 10.0.2.15 (eth0) instead of 33.33.33.33 (eth1)
[2012-05-04 22:39:57 -0400] ukio: actually i think it should return the ip adresses for both adapters, shouldn't it?
[2012-05-04 22:40:42 -0400] shuvo_: hey,I ended up writing a ohai plugin for this
[2012-05-04 22:42:44 -0400] ukio: @shuvo: is it this one: https://gist.github.com/2050259?
[2012-05-04 22:43:34 -0400] shuvo_: ukio, yes, but do your recepies (that needs the ip) use a ':cloud' param?
[2012-05-04 22:45:42 -0400] ukio: @shuvo_: actually i'm not that far (i.e. not needing it in a recipe) yet. I just noticed that it's the wrong ip when looking at the ohai output
[2012-05-04 22:46:19 -0400] shuvo_: ok, I have a recipe that will populate the ip under ':cloud correctly
[2012-05-04 22:46:30 -0400] ukio: @shuvo_: does it only affect recipes that use search or might it produce other strange effects as well?
[2012-05-04 22:47:32 -0400] jtgiri_: what is the best way to set node's hostname name to the name for the node in chef ?
[2012-05-04 22:47:53 -0400] shuvo_: to set things right you need to set the default route correctly, but I needed to set flume up and it seems to work with my recipe
[2012-05-04 22:51:04 -0400] shuvo_: jtgiri_: first hand experience, you *do not* wanna change the chef server's hostname *after* you have installed chef. However, if you are changing node names of clients, http://community.opscode.com/cookbooks/hostname should be good
[2012-05-04 22:51:33 -0400] jtgiri_: Cool thanks
[2012-05-04 22:53:08 -0400] dangerdave: If I wanted to use the application and application_python recipes today with Chef 0.10.8, which are the right repos on GitHub to use? There are many forks, with many overlapping changes. Several of them (including the latest master branch for opscode-cookbooks/application) seem to reference parts of chef not present in 0.10.8 (for example Chef::Resource::ApplicationBase or Chef::Provider::ApplicationBase)
[2012-05-04 23:11:27 -0400] ukio: @shuvo_: just found this one: https://github.com/agoddard/street-chef/commit/4c510cb49409b40594a530b16a9af61ca70a49c4
[2012-05-04 23:22:27 -0400] andrewle: dangerdave: Link?
[2012-05-04 23:27:12 -0400] shuvo_: ukio, Thanks! THat was a nice find :-)
[2012-05-04 23:44:43 -0400] shuvo_: in case we have veewee + vagrant users too, I would appreciate your thoughts for https://github.com/jedi4ever/veewee/issues/304
[2012-05-04 23:44:44 -0400] shuvo_: :-)
[2012-05-04 23:45:02 -0400] ypaq: hi everybody
[2012-05-04 23:47:47 -0400] ypaq: i'm trying to install rvm with chef. i don't want system wide rvm install only for this one user. what i'm doing is the following: i run bash resource under user with code <<-EOH   curl -L get.rvm.io | bash -s stable   EOH   as it says in the rvm doc. what happens though is that i get permission denied errors on /root/.rvm/... which is weird because i explicitly set the user on the bash resource. anyone an idea why this fails?
[2012-05-04 23:48:01 -0400] z: just use the rvm cookbook?
[2012-05-04 23:48:18 -0400] ypaq: as i said.. the cookbook installs rvm as root
[2012-05-04 23:48:37 -0400] z: er not the one I use
[2012-05-04 23:48:53 -0400] ypaq: z: ot: nice nick!
[2012-05-04 23:49:05 -0400] ypaq: which one do you use?
[2012-05-04 23:49:18 -0400] z: https://github.com/fnichol/chef-rvm
[2012-05-04 23:49:44 -0400] z: it can do either system-wide or user-specific
[2012-05-04 23:50:44 -0400] ypaq: it install via gem_package though
[2012-05-04 23:50:48 -0400] ypaq: not?
[2012-05-04 23:51:30 -0400] z: huh? it allows you to say "I want to have these Rubies installed, and these gems into these gemsets"
[2012-05-04 23:51:45 -0400] z: but the installer_Url is teh same as you linked above, pretty much
[2012-05-04 23:51:53 -0400] z: https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer
[2012-05-04 23:52:10 -0400] ypaq: https://github.com/fnichol/chef-rvm/blob/master/recipes/default.rb#L21
[2012-05-04 23:53:08 -0400] z: thats for the RVM LWRP, AFAIK
[2012-05-04 23:53:35 -0400] z: just use rvm::user_install if you dont want all the extras
[2012-05-04 23:53:42 -0400] ypaq: ok.. what is it that you do?
[2012-05-04 23:53:44 -0400] ypaq: ok
[2012-05-04 23:54:18 -0400] z: I suggest the README :)
[2012-05-04 23:54:23 -0400] ypaq: ;)
[2012-05-04 23:54:29 -0400] z: it covers user_install in detail, including the attrs you need
[2012-05-04 23:54:37 -0400] z: that cookbook is *very* comprehensive
[2012-05-04 23:55:19 -0400] ypaq: oh.. i see this thing is pretty fresh.. the rvm recipe on the opscode page seems pretty outdated
[2012-05-04 23:56:00 -0400] z: yeah the Community site being a flat namespace bites
[2012-05-04 23:56:38 -0400] z: the one I linked has been around for >12 months actually
[2012-05-04 23:56:50 -0400] z: it was first committed on Oct 12 2010

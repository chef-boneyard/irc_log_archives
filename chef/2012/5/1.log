[2012-05-01 00:06:56 -0400] Brad_K: okay, gotta go.  ttfn!
[2012-05-01 00:19:01 -0400] sivy: coderanger: FYI -i updated to the python cokbook 1.0.6 but no change in behavior
[2012-05-01 00:19:13 -0400] sivy: :(
[2012-05-01 00:19:53 -0400] pas256: Hi
[2012-05-01 00:21:00 -0400] pas256: I have set up my Mac as a Chef Workstation, and installed the knife ec2 plugin
[2012-05-01 00:21:18 -0400] pas256: things were going well until I tried to use the us-west-2 region
[2012-05-01 00:21:42 -0400] pas256: It seems fog has been updated to support this, so I ran gem install fog to get the latest
[2012-05-01 00:21:46 -0400] pas256: but it is still not working
[2012-05-01 00:22:10 -0400] pas256: anyone have any ideas how I might get knife and the ec2 plugin to use the latest version of fog?
[2012-05-01 00:22:51 -0400] flaccid: not working is not a great reference. best to show your code and the error etc.
[2012-05-01 00:23:20 -0400] pas256: do you mean this?
[2012-05-01 00:23:20 -0400] pas256: $ knife ec2 server list --region us-west-2
[2012-05-01 00:23:21 -0400] pas256: ERROR: ArgumentError: Unknown region: "us-west-2"
[2012-05-01 00:23:47 -0400] hoover_damn: it means that fog is outdated and hasn't been updated in knife-ec2 yet
[2012-05-01 00:24:09 -0400] hippiehacker: https://gist.github.com/2563926 # is there a way to monkey patch similar to this (this isn't working) CHEF-3068
[2012-05-01 00:24:10 -0400] pas256: Github tells me it has
[2012-05-01 00:24:18 -0400] hoover_damn: pas256, that's not the latest release
[2012-05-01 00:24:25 -0400] hoover_damn: pas256, you'll wanna clone it build that into a gem and then install it
[2012-05-01 00:24:27 -0400] hoover_damn: to get that
[2012-05-01 00:24:40 -0400] hoover_damn: pas256, there's another way to do it but I forget
[2012-05-01 00:24:47 -0400] hoover_damn: some evil arcane way I was shown
[2012-05-01 00:26:32 -0400] pas256: wow ok thanks
[2012-05-01 00:26:43 -0400] pas256: never built a gem before
[2012-05-01 00:31:01 -0400] hoover_damn: pas256, pretty much git clone, gem build file.gemspec
[2012-05-01 00:31:08 -0400] hoover_damn: pas256, gem install file.gem
[2012-05-01 00:33:27 -0400] pas256: thanks
[2012-05-01 01:00:22 -0400] werdnativ: How well does the edelight/chef-solo-search work? Anyone used it? I want to use the application cookbook which relies on data bags, but I don't necessarily need chef-server for my needs.
[2012-05-01 01:02:37 -0400] werdnativ: trying to use it, when the application recipe calls search(:apps), it yields a 3-part array ["apps", "my_app", { "server_roles": ["my_app"] }]
[2012-05-01 01:03:26 -0400] werdnativ: but then it tries to access app["server_roles"] directly (which is wrong for a 3-part array)
[2012-05-01 01:19:45 -0400] bluepojo_: I'd like to use knife to retrieve versions on the community site in Ruby but want the data in a hash or json instead of cli output... how can I do that?
[2012-05-01 01:19:52 -0400] bluepojo_: eg. Chef::Knife::CookbookSiteShow.new(['ntp']).run
[2012-05-01 01:20:29 -0400] bluepojo_: I tried poking around the UI and GenericPresenter but there wasn't an obvious way to say "don't format the return data"
[2012-05-01 01:21:02 -0400] bluepojo_: I'd rather not parse the output as it's already json at some point along the way
[2012-05-01 01:30:35 -0400] bluepojo_: This would work nicely: https://github.com/opscode/chef/pull/282
[2012-05-01 01:30:50 -0400] bluepojo_: thoughts?
[2012-05-01 02:18:56 -0400] rayrod2030: any issues running chef 0.10 and greater bootstrapping from ruby 1.9.3?
[2012-05-01 02:19:39 -0400] hoover_damn: shouldn't be
[2012-05-01 02:19:52 -0400] rayrod2030: sweet
[2012-05-01 02:20:09 -0400] hoover_damn: 1.9.3 has been out for a bit, and I myself have been using 1.9.3 with Chef now for a little over a month easy
[2012-05-01 02:20:28 -0400] rayrod2030: I think I'm just going to bootstrap 1.9.3 for rails stacks so that I don't have to deal with the rbenv/rvm bullshit
[2012-05-01 02:20:35 -0400] hoover_damn: if your using DateTime.new and or a few other things like that in your code
[2012-05-01 02:20:39 -0400] hoover_damn: you might get stuck
[2012-05-01 02:20:59 -0400] hoover_damn: heh, if you run ububuntu and run oneric I have a 1.9.3 ppa
[2012-05-01 02:21:08 -0400] hoover_damn: s/ububuntu/ubuntu
[2012-05-01 02:21:17 -0400] hoover_damn: otherwise the latest release of ubuntu's 1.9.3 should work
[2012-05-01 02:21:17 -0400] rayrod2030: the bright box ones?
[2012-05-01 02:21:32 -0400] hoover_damn: nah, I actually backported Debian's and removed the ugly debian patches
[2012-05-01 02:21:42 -0400] hoover_damn: and then pushed em up to launchpad.net/~scott-likens
[2012-05-01 02:21:49 -0400] hoover_damn: e.g. being unable to gem update --system
[2012-05-01 02:21:52 -0400] flaccid: there is ruby 1.9.3 pkgs for debian squeeze?
[2012-05-01 02:21:56 -0400] hoover_damn: and having gems land in /var/ruby/gems/bin
[2012-05-01 02:21:57 -0400] rayrod2030: how can I trust your packages?
[2012-05-01 02:21:59 -0400] rayrod2030: ;)
[2012-05-01 02:22:13 -0400] hoover_damn: You cannot, but you can check out qa.packages.debian.org against my source
[2012-05-01 02:22:17 -0400] hoover_damn: and verify their integrity
[2012-05-01 02:22:25 -0400] hoover_damn: just like you cannot trust brightbox
[2012-05-01 02:22:28 -0400] rayrod2030: just messing with you.
[2012-05-01 02:22:32 -0400] rayrod2030: I'll check those out.
[2012-05-01 02:22:34 -0400] hoover_damn: if you want to go with that argument, we have to go by the code
[2012-05-01 02:22:41 -0400] hoover_damn: because there is no other way to know
[2012-05-01 02:23:08 -0400] rayrod2030: nothing like compiling ruby from source on a t1.micro.
[2012-05-01 02:23:08 -0400] hoover_damn: flaccid, should be
[2012-05-01 02:23:17 -0400] hoover_damn: flaccid, because that is where I grabbed my ruby from
[2012-05-01 02:23:28 -0400] hoover_damn: http://packages.qa.debian.org/r/ruby1.9.1.html
[2012-05-01 02:23:34 -0400] hoover_damn: shows 1.9.3-p0-2
[2012-05-01 02:23:42 -0400] hoover_damn: hrm, 1.9.3.194
[2012-05-01 02:23:49 -0400] hoover_damn: guess it's time to update my ppa
[2012-05-01 02:24:09 -0400] flaccid: ah yeah. not a fan of the 1.9.1 = 1.9.3 but cool..
[2012-05-01 02:24:24 -0400] hoover_damn: flaccid, who is
[2012-05-01 02:24:37 -0400] flaccid: whoever decided to do it?
[2012-05-01 02:25:00 -0400] hoover_damn: isn't it the same old 'ruby 1.9.1' directory pattern excuse?
[2012-05-01 02:25:12 -0400] hoover_damn: or is 1.9.3 still claiming 1.9.1?
[2012-05-01 02:25:26 -0400] flaccid: that whole thing a binary compat thing is a cluster fsck
[2012-05-01 02:25:55 -0400] hoover_damn: that we will all agree with
[2012-05-01 02:26:07 -0400] hoover_damn: binary distributions are hating having to deal with this
[2012-05-01 02:26:49 -0400] flaccid: its all part of growing up and support ruby :o
[2012-05-01 02:27:05 -0400] flaccid: right, thats my bad english comedy joke for the day
[2012-05-01 02:27:40 -0400] hoover_damn: you don't support ruby, ruby supports you
[2012-05-01 02:28:08 -0400] flaccid: ruby is a bad babysitter at times then
[2012-05-01 02:28:48 -0400] hoover_damn: totally
[2012-05-01 02:29:08 -0400] flaccid: i prefer the superiority of python but i guess i shouldn't open that can of worms
[2012-05-01 02:32:43 -0400] hoover_damn: I don't mind python, I admit i've been kinda drawn in on the clojure side
[2012-05-01 02:33:14 -0400] hoover_damn: once you have a firm grasp of programming ruby... going to python isn't going to break your brain
[2012-05-01 02:36:44 -0400] flaccid: i learnt ruby after python and was like, wha this is just a rip off of python
[2012-05-01 02:36:45 -0400] flaccid: cept not as good
[2012-05-01 02:36:50 -0400] flaccid: but i do enjoy ruby, its not php or something like that so is respectable
[2012-05-01 02:40:15 -0400] hoover_damn: Ruby was the first programming language out of Shell Programming that truly clicked
[2012-05-01 02:40:41 -0400] hoover_damn: I've seen some gorey php, and some bad python which made me not learn it right...
[2012-05-01 02:40:50 -0400] hoover_damn: I spent a lot of time reading the black perl books of doom
[2012-05-01 02:43:42 -0400] flaccid: python tutorial is how to learn python right, imho python is closer to the system than ruby, particularly becuase whats in core as opposed to needing gems or eggs
[2012-05-01 02:58:34 -0400] hoover_damn: flaccid, i've been slowly reading this python 3 book
[2012-05-01 02:58:45 -0400] hoover_damn: and one thing that blew my mind was the simple suggestion of uml
[2012-05-01 02:58:56 -0400] hoover_damn: it's actually stirred up me using uml and more whiteboard operations
[2012-05-01 02:59:03 -0400] flaccid: cool
[2012-05-01 02:59:13 -0400] flaccid: yeah i don't know much in that new area coz of work doing ruby
[2012-05-01 02:59:21 -0400] flaccid: i'm so out of touch
[2012-05-01 03:00:15 -0400] hoover_damn: nothing I ever read in any of my ruby books
[2012-05-01 03:00:25 -0400] hoover_damn: not something touched on in the clojure book i've been reading either
[2012-05-01 03:01:29 -0400] flaccid: i'm pretty happy on a personal level because i know everything i need to do can be done in the langs i know and python and ruby are the major ones i guess
[2012-05-01 03:01:50 -0400] hoover_damn: :) stir a change and learn something new
[2012-05-01 03:01:59 -0400] hoover_damn: throw away something you use everyday
[2012-05-01 03:02:10 -0400] flaccid: way too much on the todo list for that! i already stir the pot enough at work already hehe
[2012-05-01 03:02:11 -0400] bluepojo_: Is there a way to see what cookbooks a given cookbook depends on via knife?
[2012-05-01 03:02:12 -0400] hoover_damn: those kind of actions can stir enough change to create something good
[2012-05-01 03:02:26 -0400] hoover_damn: true that
[2012-05-01 03:02:32 -0400] bluepojo_: Looking for an alternative to parsing the metadata.rb file
[2012-05-01 03:02:36 -0400] bluepojo_: for dependencies
[2012-05-01 03:03:00 -0400] flaccid: not sure on knife. but you can just use metdata.json to a hash and gets (something like that)
[2012-05-01 03:05:31 -0400] bluepojo__: think I lost connection from webchat
[2012-05-01 03:05:35 -0400] bluepojo__: or something
[2012-05-01 03:05:49 -0400] bluepojo__: anyway, you said I could get metadata.json, but I'm not familiar with how I'd get it
[2012-05-01 03:06:08 -0400] bluepojo__: knife cookbook site show cookbook_name?
[2012-05-01 03:06:17 -0400] bluepojo__: is there a way to flip that to json output?
[2012-05-01 03:06:58 -0400] bluepojo__: oh, answered my own question
[2012-05-01 03:07:05 -0400] bluepojo__: however that output doesn't contain dependency infos
[2012-05-01 03:07:07 -0400] bluepojo__: knife cookbook site show mysql -F json
[2012-05-01 03:07:16 -0400] bluepojo__: should have a few dependencies listed, but it doesn't
[2012-05-01 03:07:20 -0400] sascha_d: anyone in here implemented a complete Ironfan?
[2012-05-01 03:07:48 -0400] sascha_d: or most of one? or some?
[2012-05-01 03:08:54 -0400] flaccid: i mean from the cookbok source
[2012-05-01 03:10:25 -0400] flaccid: i can make that example in a sec, just got a call brb
[2012-05-01 03:11:17 -0400] bluepojo1: damn webchat keeps dropping me
[2012-05-01 03:11:33 -0400] bluepojo1: I see, so I can't get at the dependency list until I've downloaded the cookbook
[2012-05-01 03:11:52 -0400] bluepojo1: I was hoping to resolve the dependency graph before I downloaded any cookbooks
[2012-05-01 03:12:04 -0400] bluepojo1: I can do that though
[2012-05-01 03:12:23 -0400] bluepojo1: thanks for your input
[2012-05-01 03:59:32 -0400] patcon: anyone know the quickest way to include helper functions in attributes files?
[2012-05-01 04:00:06 -0400] patcon: i see how it works for recipes, but not sure about attr... http://lists.opscode.com/sympa/arc/chef/2011-05/msg00285.html
[2012-05-01 04:20:26 -0400] Kwanasolis: o/
[2012-05-01 04:23:43 -0400] patcon: any insight on helpers iin attribute files would be greatly appreciated for this issue :)
[2012-05-01 04:23:44 -0400] patcon: http://tickets.opscode.com/browse/COOK-1236
[2012-05-01 04:24:13 -0400] patcon: but in the meantime -- snoozey-time. nite all
[2012-05-01 04:25:11 -0400] hoover_damn: patcon, ahem
[2012-05-01 04:25:25 -0400] hoover_damn: patcon, i think you need the bits of the library to do that
[2012-05-01 04:25:44 -0400] hoover_damn: patcon, https://github.com/opscode-cookbooks/mysql/blob/master/libraries/helpers.rb
[2012-05-01 04:25:50 -0400] hoover_damn: you'd have to depend on that cookbook in order to use it
[2012-05-01 04:25:54 -0400] hoover_damn: which is bad
[2012-05-01 04:26:13 -0400] hoover_damn: or copy it, which is whatever
[2012-05-01 04:26:23 -0400] patcon: thanks hoover_damn, but i'm actually trying to submit a change for that cookbook itself
[2012-05-01 04:26:54 -0400] hoover_damn: ugly cookbook it is
[2012-05-01 04:26:54 -0400] hoover_damn: heh
[2012-05-01 04:27:03 -0400] hoover_damn: it's okay :) base cookbooks are base
[2012-05-01 04:27:15 -0400] patcon: not grasping a simple way to include the helper in an attribute file :)
[2012-05-01 04:27:38 -0400] hoover_damn: btw, I always find the best replies should be on the mailing list
[2012-05-01 04:27:54 -0400] hoover_damn: it allows people time to read your question and respond... and so many people catch the mailing list that don't do irc
[2012-05-01 04:28:39 -0400] patcon: y'know what... yeah, i should get in the habit if this. just thought it was a me-not-understanding-ruby-well-enough question
[2012-05-01 04:29:07 -0400] patcon: naw man, i'm fresh blood.
[2012-05-01 04:29:42 -0400] patcon: thanks for the direction!
[2012-05-01 04:37:43 -0400] hoover_damn: patcon, fwiw i think what you can do is basically in attribute (old chef at least) default['something'](ubuntu_before_lucid?)
[2012-05-01 04:38:32 -0400] hoover_damn: provided the library is loaded of course
[2012-05-01 04:38:56 -0400] hoover_damn: don't use Struct.new btw
[2012-05-01 04:38:58 -0400] hoover_damn: it's evil
[2012-05-01 04:39:18 -0400] hoover_damn: don't ask, i can't explain
[2012-05-01 04:39:23 -0400] hoover_damn: well i can, but i won't
[2012-05-01 07:18:10 -0400] miah: sup
[2012-05-01 07:22:38 -0400] BryanWB: ohai chefs!
[2012-05-01 07:23:22 -0400] miah: hihi BryanWB
[2012-05-01 07:24:49 -0400] BryanWB: miah: hey ;)
[2012-05-01 07:26:59 -0400] miah: my vacation is almost at an end :(
[2012-05-01 07:27:09 -0400] BryanWB: miah: ah sad :(
[2012-05-01 07:27:13 -0400] miah: i didn't learn enough
[2012-05-01 07:27:23 -0400] BryanWB: miah: it was a learning vacation or fun vacation?
[2012-05-01 07:27:47 -0400] BryanWB: what did u study?
[2012-05-01 07:28:32 -0400] miah: i never take fun vacations
[2012-05-01 07:28:46 -0400] miah: i read a bit, mostly ruby stuff
[2012-05-01 07:29:07 -0400] miah: and also john allspaws scaling book
[2012-05-01 07:29:16 -0400] BryanWB: srsly? never take fun vacations? that's crazy
[2012-05-01 07:29:40 -0400] miah: i guess
[2012-05-01 07:31:58 -0400] miah: i dont like going to many places and i dont have much money. so i stayed at home and studied.
[2012-05-01 07:50:15 -0400] BryanWB: miah: totally psyched, we will have Etsy engineers on next week
[2012-05-01 07:54:50 -0400] miah: awesome =)
[2012-05-01 07:55:27 -0400] miah: i'm looking forward to it
[2012-05-01 07:58:13 -0400] miah: guh. i am way past bed time. g'nites.
[2012-05-01 08:00:04 -0400] BryanWB: miah: laterz
[2012-05-01 08:04:24 -0400] Kwanasolis: o/
[2012-05-01 08:05:00 -0400] BryanWB: \o
[2012-05-01 08:15:28 -0400] masterkorp:  |
[2012-05-01 08:15:34 -0400] masterkorp: ,/\
[2012-05-01 08:42:19 -0400] Kwanasolis: masterkorp: o/
[2012-05-01 08:42:43 -0400] Kwanasolis: I'm confused, you are in the wrong channel ;)
[2012-05-01 08:51:34 -0400] masterkorp: Kwanasolis: no i am not :)
[2012-05-01 08:51:58 -0400] Kwanasolis: fair enough, nice to see you here just the same
[2012-05-01 08:52:18 -0400] masterkorp: no one uses this ugly nick besides me
[2012-05-01 08:52:51 -0400] Kwanasolis: ha!
[2012-05-01 08:59:18 -0400] BryanWB: is there any way to put a cookbook on ur run_list w/out running any of it recipes?
[2012-05-01 08:59:26 -0400] BryanWB: say, just to access its lwrps
[2012-05-01 09:41:02 -0400] Kwanasolis: load an emtpy recipe
[2012-05-01 09:43:54 -0400] BryanWB: Kwanasolis: yeah, but there should be a more elegant way
[2012-05-01 09:44:05 -0400] Kwanasolis: load it in a library?
[2012-05-01 09:44:16 -0400] Kwanasolis: or add it to depend?
[2012-05-01 09:47:58 -0400] BryanWB: w/out having to recipe on runlist that doesn't actually do anything
[2012-05-01 10:01:49 -0400] zts: BryanWB: if a cookbook should be usable in that way, its default recipe should be empty
[2012-05-01 10:02:18 -0400] BryanWB: zts: yeah, but i am the father of this cookbook, guess i will have to ask him
[2012-05-01 10:02:43 -0400] BryanWB: zts: this is for the haproxy cookbook and the default recipe, well, install haproxy ;)
[2012-05-01 10:07:02 -0400] masterkorp: So, i have a problem [Tue, 01 May 2012 03:06:00 -0700] FATAL: Chef::Exceptions::Exec: dpkg_package[feedfetcher] (feedfetcher::default line 39) had an error: dpkg -i /var/cache/feedfetcher_20110210-1.deb returned 1, expected 0
[2012-05-01 10:07:23 -0400] BryanWB: masterkorp: sound like its a package related issue and not chef
[2012-05-01 10:07:25 -0400] masterkorp: This is because the package needs packages from the repository
[2012-05-01 10:07:50 -0400] masterkorp: Ratler: with non chef i would run dpkg -i package $$ apt-get -f install
[2012-05-01 10:07:59 -0400] BryanWB: hmm, can u make sure that u use apt rather than dpkg as the provider ?
[2012-05-01 10:08:02 -0400] masterkorp: and apt will get the deeps
[2012-05-01 10:08:07 -0400] BryanWB: ah i c,
[2012-05-01 10:08:23 -0400] BryanWB: i don't know how to do that w/ chef, likely others have
[2012-05-01 10:09:57 -0400] Kwanasolis: masterkorp: you have to wrap it with package in a recipe, I don't know of any other way
[2012-05-01 10:10:34 -0400] masterkorp: here is the block
[2012-05-01 10:10:36 -0400] masterkorp: http://pastie.org/3842994
[2012-05-01 10:10:59 -0400] BryanWB: masterkorp:   u could add the attribute   ignore_failure  true    the resource that runs dpkg
[2012-05-01 10:11:08 -0400] masterkorp: hmm
[2012-05-01 10:11:10 -0400] masterkorp: gona try
[2012-05-01 10:11:16 -0400] masterkorp: but i would like that
[2012-05-01 10:11:29 -0400] BryanWB: and then have ruby_block after it that does   'apt-get -f install'
[2012-05-01 10:11:31 -0400] masterkorp: also this resource its not documented
[2012-05-01 10:12:25 -0400] masterkorp: Chef could improve this, isntalling an deb with dependencies on the repository but not on the machine its a common acr
[2012-05-01 10:12:35 -0400] Kwanasolis: http://pastie.org/3843003
[2012-05-01 10:12:55 -0400] Kwanasolis: package_list is just an array of words
[2012-05-01 10:12:59 -0400] Kwanasolis: %w{here is a list}
[2012-05-01 10:13:14 -0400] Kwanasolis: I have to add to package list as I go, otherwise you can do %w{}.each . . .
[2012-05-01 10:16:23 -0400] masterkorp: BryanWB: and if its an deb?
[2012-05-01 10:17:00 -0400] BryanWB: masterkorp: umm, i would just use list of packages like Kwanasolis suugests
[2012-05-01 10:17:48 -0400] masterkorp: hell no, i will not list all the deps by hand
[2012-05-01 10:18:00 -0400] masterkorp: that's i made the package in first place
[2012-05-01 10:19:26 -0400] masterkorp: +why i made
[2012-05-01 10:25:30 -0400] masterkorp: OK where do i open a feature request?
[2012-05-01 10:26:27 -0400] BryanWB: masterkorp: tickets.opscode.com
[2012-05-01 10:27:18 -0400] masterkorp: thank you
[2012-05-01 10:29:18 -0400] zts: BryanWB: hm!  What functionality would haproxy provide without installing haproxy?
[2012-05-01 10:29:59 -0400] BryanWB: zts: i am creating a definition  w/ one method, 'proxy_me'
[2012-05-01 10:30:42 -0400] BryanWB: that application server uses to add attributes to node['haproxy'] so they will be discovered with search
[2012-05-01 10:30:55 -0400] zts: aha
[2012-05-01 10:30:56 -0400] zts: gotcha
[2012-05-01 10:31:29 -0400] masterkorp: what issue manager is this ? its cool
[2012-05-01 10:31:45 -0400] BryanWB: so   inside your recipe foo_tomcat_app  u have    proxy_me  do   ; port 8080 ; protocol  'http' ; end
[2012-05-01 10:36:14 -0400] ashb: masterkorp: Jira, and its reviled when used in all companies I know that use it
[2012-05-01 10:37:10 -0400] masterkorp: reviled ?
[2012-05-01 10:37:15 -0400] ashb: hated
[2012-05-01 10:37:31 -0400] Kwanasolis: not liked
[2012-05-01 10:37:46 -0400] Kwanasolis: very much hated, with much hatred, topped on with piles of hatred wrapped in hatred
[2012-05-01 10:37:51 -0400] Kwanasolis: but that's in the shops taht support it
[2012-05-01 10:58:01 -0400] zts: is there any issue manager that people don't constantly bitch about?
[2012-05-01 10:58:21 -0400] zts: I've found Jira to be one of the least complained about.  Which is faint praise, but still
[2012-05-01 11:02:01 -0400] zts: on a completely different note, I haven't seen this linked up in here: http://news.perlfoundation.org/2012/03/cooking-perl-with-chef---grant.html
[2012-05-01 12:21:38 -0400] `brendan: morning
[2012-05-01 12:47:14 -0400] yfeldblum: BryanWB, you thought about using two chef-servers, one for QA and one for PROD?
[2012-05-01 12:47:33 -0400] BryanWB: i do have 2 servers actually
[2012-05-01 12:47:51 -0400] BryanWB: but I just use the PROD one
[2012-05-01 12:48:23 -0400] BryanWB: it might make sense to push unstable cookbook to QA, test there
[2012-05-01 12:48:59 -0400] BryanWB: there are other issues that I struggle w/ , I support _a_lot_ of applications, about 20, spread across 120 VMs
[2012-05-01 12:49:59 -0400] BryanWB: so when I push even a tested cookbook, I want to use it only a few servers for a few days, to make sure nothing unexpected happens, before pushing it to all the servers that it applies to
[2012-05-01 12:52:09 -0400] yfeldblum: BryanWB, that last thing sounds quite tricky
[2012-05-01 12:52:28 -0400] BryanWB: it's a problem of me not scaling very well, as a human being
[2012-05-01 12:52:40 -0400] BryanWB: part of the reason i am so obsessed w/ testing
[2012-05-01 12:55:12 -0400] yfeldblum: BryanWB, how complex are these cookbooks?
[2012-05-01 12:55:51 -0400] BryanWB: yfeldblum: somewhat complex, and entirely written by me as not much prior art in the java space
[2012-05-01 12:56:11 -0400] BryanWB: so every refactoring of the java cookbook or tomcat cookbook terrifies me ;)
[2012-05-01 12:57:29 -0400] yfeldblum: BryanWB, my preference for that is to radically simplify the cookbooks, enforce a very simple interface that is expected of any and every application, and move more responsibilities to the application
[2012-05-01 12:58:12 -0400] yfeldblum: BryanWB, radically simplify the cookbooks *by means of* enforcing that simple interface and shifting responsibilities
[2012-05-01 12:58:13 -0400] BryanWB: yfeldblum: well my preference is too build extremely well-tested LWRPs for tomcat and jboss, so i don't have so much fear about them breaking
[2012-05-01 12:58:20 -0400] BryanWB: thus the most recent foodfight
[2012-05-01 12:59:03 -0400] BryanWB: and simple interfaces are great, but i have to flexible enough to handle all the XML my devs throw at me
[2012-05-01 12:59:25 -0400] yfeldblum: BryanWB, do you have a separate cookbook per application?
[2012-05-01 12:59:58 -0400] BryanWB: right now some are separate cookbook because i have an lwrp for tomcat
[2012-05-01 13:00:24 -0400] BryanWB: but the jboss ones are separate recipes w/ same cookbook, and they look a lot like nistude's works
[2012-05-01 13:01:34 -0400] BryanWB: hopefully in weeks ahead i will get around to writing the jboss lwrp and then to rewriting the tomcat lwrp
[2012-05-01 13:07:00 -0400] yfeldblum: BryanWB, not terribly familiar here with the java side of things ... what's this XML that they're throwing at you?
[2012-05-01 13:07:38 -0400] BryanWB: it's an obscure markup language, i don't know why it's still around
[2012-05-01 13:08:07 -0400] BryanWB: I wouldn't expect a young person like yourself to have encountered it ;)
[2012-05-01 13:09:46 -0400] yfeldblum: BryanWB, heh, but i mean, what do these XML docs contain? why are they long & complex? what are they for?
[2012-05-01 13:10:50 -0400] BryanWB: yfeldblum: they are very long and very complex, for J2EE containers, check it out https://github.com/bryanwb/chef-jboss/blob/master/templates/default/standalone-full-esb.xml.erb
[2012-05-01 13:10:54 -0400] BryanWB: 481 lines long
[2012-05-01 13:50:06 -0400] yfeldblum: BryanWB, why are these xml files your responsibility, rather than the responsibility of the application?
[2012-05-01 13:51:44 -0400] BryanWB: yfeldblum: they are global to the app, and don't get bundled with the deployed artifact, unlike tomcat .war files
[2012-05-01 13:51:59 -0400] BryanWB: sorry, they are global to the app _container_
[2012-05-01 13:52:52 -0400] BryanWB: yfeldblum: they are global to the app, and don't get bundled with the deployed artifact, unlike tomcat .war files
[2012-05-01 13:55:54 -0400] yfeldblum: BryanWB, what about having the container be part of the app's responsibility too? per-app container?
[2012-05-01 13:56:52 -0400] yfeldblum: BryanWB, i'm asking this because it's one of the normal deployment models for ruby apps - the container is part of the app, rather than part of the global server infrastructure
[2012-05-01 13:57:44 -0400] BryanWB: but ruby app servers have only 1/10 the power and complexity of a J2EE container for worse and bettr
[2012-05-01 13:58:32 -0400] hoover_damn: for the most part yep
[2012-05-01 13:58:39 -0400] hoover_damn: the java containers offer a lot more
[2012-05-01 13:58:39 -0400] yfeldblum: BryanWB, no doubt; i'm not very familiar with the java space; what does a global j2ee container give you that you need and also that is not possible with per-app containers?
[2012-05-01 13:58:45 -0400] BryanWB: J2EE container has queuing, messaging, connectors for every bloody protocol evar, connection pools for connections to db, caching up the wazoo
[2012-05-01 13:58:47 -0400] hoover_damn: however the rails web app containers
[2012-05-01 13:58:51 -0400] hoover_damn: hasn't really moved a lot
[2012-05-01 13:58:55 -0400] hoover_damn: look at trinidad
[2012-05-01 13:59:02 -0400] hoover_damn: why would you use trinidad over jboss?
[2012-05-01 13:59:26 -0400] BryanWB: hoover_damn: we're a java shop not rails, and it wasn't my choice
[2012-05-01 14:00:03 -0400] BryanWB: i m still trying to get my head around all this j2ee stuff
[2012-05-01 14:00:12 -0400] hoover_damn: most rails shops should look at using jboss and jruby eventually
[2012-05-01 14:00:17 -0400] hoover_damn: it's just not always in the rails makeup yet to do that
[2012-05-01 14:00:51 -0400] BryanWB: jboss as 7 starts up very quickly and i wouldn't be surprised if it is very performant for rails w/ torquebox
[2012-05-01 14:00:53 -0400] hoover_damn: that's why I picked up clojure myself is I really didn't want to learn jruby and taint my ruby
[2012-05-01 14:00:56 -0400] hoover_damn: I wanted something different
[2012-05-01 14:00:59 -0400] hoover_damn: actually is
[2012-05-01 14:01:20 -0400] geekbri: I would be completely fine with java ceasing to exist.
[2012-05-01 14:01:22 -0400] hoover_damn: BryanWB, http://immutant.org/
[2012-05-01 14:03:07 -0400] hoover_damn: geekbri, won't happen don't ask for it
[2012-05-01 14:04:24 -0400] hoover_damn: Java isn't going away there is no valid reason to wish it away
[2012-05-01 14:04:27 -0400] geekbri: a boy can dream.
[2012-05-01 14:04:38 -0400] hoover_damn: sure we all have our personal hatred of it
[2012-05-01 14:04:39 -0400] geekbri: well the JVM can stay behind :)
[2012-05-01 14:04:45 -0400] hoover_damn: but personal hatred is personal
[2012-05-01 14:06:50 -0400] yfeldblum: BryanWB, what i'm still curious about is what you would be missing if each application you were deploying embedded its own container (e.g., tomcat, jboss, jetty, w/e the application wants) and were responsible for generating its own XML config?
[2012-05-01 14:08:12 -0400] BryanWB: yfeldblum: if those resources are defined in the app and not the container, then they don't can't define the services that the container offers
[2012-05-01 14:08:24 -0400] BryanWB: yfeldblum: essentially i am configuring the services that the container offers
[2012-05-01 14:09:34 -0400] BryanWB: yfeldblum: look at the first 20 lines of that config file and u should get an idea of the services that j2ee offers which a rails app doesn't
[2012-05-01 14:10:32 -0400] hoover_damn: BryanWB, when Evan released Puma... that's pretty much when I lost my love for ruby and the web
[2012-05-01 14:11:15 -0400] yfeldblum: BryanWB, they would be defined in the container, specifically, in the container that is deployed as part of the app ... surely the app's build step could generate an XML file with those first 20 lines too?
[2012-05-01 14:12:24 -0400] BryanWB: yfeldblum: then it would be up to the devs to manage the main config file, and i am pretty sure they would screw it up
[2012-05-01 14:14:11 -0400] patcon: haha just saw your msg from last night... thanks hoover_damn :) got it working
[2012-05-01 14:14:24 -0400] BryanWB: miah: have a bunch of questions for u about haproxy when u wake up :) sweet dreams
[2012-05-01 14:14:44 -0400] yfeldblum: BryanWB, i dunno, if they can survive writing in java, surely an XML config file describing a container's properties isn't the worst challenge they've encountered ... plus you could code-review the apps' config files and either point out or fix any weaknesses before deploying
[2012-05-01 14:15:36 -0400] yfeldblum: BryanWB, but that would allow you to put all that deployment stuff into the app and into the app's integration testing & CI to prove it works before going to production
[2012-05-01 14:16:29 -0400] BryanWB: yfeldblum:  they don't really do CI nor integration testing
[2012-05-01 14:16:36 -0400] BryanWB: barely use version control
[2012-05-01 14:17:34 -0400] yfeldblum: BryanWB, ... and that is a huge huge problem ... IMO ops' policy has to be "give me a SHA or go home"
[2012-05-01 14:17:47 -0400] BryanWB: if the op has a choice :)
[2012-05-01 14:17:58 -0400] BryanWB: some of us need our salaries and don't have a lot of options
[2012-05-01 14:19:19 -0400] yfeldblum: BryanWB, so you're just in a world of hurt out there, huh ...
[2012-05-01 14:19:32 -0400] BryanWB: i'll survive ;)
[2012-05-01 14:19:55 -0400] yfeldblum: BryanWB, http://www.12factor.net/
[2012-05-01 14:22:06 -0400] yfeldblum: BryanWB, well then, carry on with *removing* from the dev groups the deployment/production responsibilities until they get git and get testing ...
[2012-05-01 14:22:35 -0400] BryanWB: yfeldblum: dude, ur 24 yrs and u have only worked for startups
[2012-05-01 14:22:58 -0400] BryanWB: yfeldblum: what u don't get is that a lot of big corps are full of people that don't want to learn
[2012-05-01 14:23:17 -0400] BryanWB: cuz the ones who want to learn, move on to better stuff quickly
[2012-05-01 14:23:44 -0400] BryanWB: anyways, sorry to lecture u, gotta get back to work
[2012-05-01 14:24:02 -0400] yfeldblum: BryanWB, oh i get that ... latez, carry on
[2012-05-01 14:48:25 -0400] LinuxHorn: hey all  i know in puppet i could do a "ensure => absent" to make sure a file is removed if it exists, is there a similar statement in chef?
[2012-05-01 14:48:41 -0400] eherot: file "filename" do
[2012-05-01 14:48:42 -0400] eherot: action :delete
[2012-05-01 14:48:42 -0400] eherot: end
[2012-05-01 14:48:59 -0400] LinuxHorn: will that fail if the file already doesn't exist?
[2012-05-01 14:49:03 -0400] eherot: nope
[2012-05-01 14:49:27 -0400] LinuxHorn: cool
[2012-05-01 14:49:28 -0400] LinuxHorn: thx
[2012-05-01 14:49:29 -0400] flashmanbahadur: check out
[2012-05-01 14:49:30 -0400] flashmanbahadur: include_recipe "chef-client::delete_validation"
[2012-05-01 14:49:36 -0400] flashmanbahadur: well
[2012-05-01 14:49:39 -0400] flashmanbahadur: chef-client::delete_validation
[2012-05-01 14:49:50 -0400] flashmanbahadur: that has an example of a recipe that makes sure a file is not present
[2012-05-01 14:55:05 -0400] Brad_K: LinuxHorn: the example gave by eherot will delete the file if it currently exists (and the process has permission to do so, considering ownership, permissions, ACLs, etc), but if the file is not there then chef will simply skip that stanza and go on to the next task to be performed.
[2012-05-01 14:55:22 -0400] LinuxHorn: thx
[2012-05-01 14:55:43 -0400] Brad_K: np
[2012-05-01 15:28:24 -0400] hoover_damn: meh
[2012-05-01 15:28:30 -0400] hoover_damn: another day of ohai not knowing what my cloud is
[2012-05-01 15:29:06 -0400] mattray: hoover_damn: I found the guy who manages Xen at Rackspace and talked to him about it
[2012-05-01 15:29:26 -0400] mattray: he proposed exposing metadata through xenstore-ls
[2012-05-01 15:29:41 -0400] mattray: and said he'd try it in their beta cloud first
[2012-05-01 15:29:54 -0400] hoover_damn: mattray, I hope so as you guys pay a ton
[2012-05-01 15:30:07 -0400] mattray: I've got emails into him to see what the status of that is
[2012-05-01 15:30:17 -0400] hoover_damn: I'm actually half tempted to create a rackspace image with a hacked ohai
[2012-05-01 15:30:19 -0400] hoover_damn: so cloud is always there
[2012-05-01 15:30:47 -0400] mattray: yeah, I talked with a bunch of Rackers about the problem, he seemed like the best solution
[2012-05-01 15:31:22 -0400] mattray: until they get something built into OpenStack that isn't a metadata server
[2012-05-01 15:31:26 -0400] hoover_damn: I'm still rather fond of dmidecode and I'm not fond of Rackspace I find their lack of fanatical support lately
[2012-05-01 15:31:29 -0400] hoover_damn: to be sad
[2012-05-01 15:31:45 -0400] mattray: yeah, he said the xenstore was easier
[2012-05-01 15:32:12 -0400] mattray: which may work for AWS if he does it and I can find someone over there to listen
[2012-05-01 15:32:14 -0400] hoover_damn: right like anyone who would prefer to take shorcuts then provide a standard way of identifying that mimic'd hardware
[2012-05-01 15:32:21 -0400] hoover_damn: shortcuts*
[2012-05-01 15:32:36 -0400] mattray: of course, it's just for Xen, not for KVM
[2012-05-01 15:32:37 -0400] hoover_damn: basically I consider dmidecode the proper pattern and anything less to be a hack
[2012-05-01 15:33:07 -0400] hoover_damn: I am not shocked at Rackspace taking the easy way out, that's just Rackspace
[2012-05-01 15:33:22 -0400] hoover_damn: just like I spent an hour yesterday having to prove to Rackspace that I couldn't boot an instance on their current cloud
[2012-05-01 15:33:39 -0400] hoover_damn: on Amazon I would have been expected to be scheduled around the issue
[2012-05-01 15:33:46 -0400] hoover_damn: at Rackspace it blocks my workflow
[2012-05-01 15:34:27 -0400] hoover_damn: and their lack of proper attention on this issue only shows how they are not ready to support the cloud
[2012-05-01 15:34:39 -0400] mattray: there is an effort for a standardized approach in the Folsom release of OpenStack
[2012-05-01 15:34:56 -0400] mattray: Rackspace and HP would pick it up early I expect
[2012-05-01 15:34:58 -0400] hoover_damn: this is a pretty big issue to a lot of folks
[2012-05-01 15:34:58 -0400] mattray: http://etherpad.openstack.org/FolsomNovaConfigDriveImprovements
[2012-05-01 15:35:13 -0400] hoover_damn: if you run your own private cloud you have to provide identification
[2012-05-01 15:35:49 -0400] mattray: yep
[2012-05-01 15:36:06 -0400] hoover_damn: so I don't know what rackspace is thinking
[2012-05-01 15:36:22 -0400] mattray: I'm heading over there tomorrow, I'll see about finding heads to bust ;)
[2012-05-01 15:36:25 -0400] hoover_damn: and that's a good stopping point :)
[2012-05-01 15:36:49 -0400] hoover_damn: I hope for the best of Rackspace but I really think they need to start listening to their customers and take their time to deliver the new cloud properly
[2012-05-01 15:36:52 -0400] mattray:  </rackspacerant>
[2012-05-01 15:37:06 -0400] hoover_damn: because man, current rackspace cloud is like 0.1alpha of AWS in someways
[2012-05-01 15:37:15 -0400] hoover_damn: </rackspacerant>
[2012-05-01 15:38:23 -0400] yfeldblum: hoover_damn, perhaps that's *why* they're transitioning to openstack?
[2012-05-01 15:38:56 -0400] yfeldblum: have they completed that transition with compute?
[2012-05-01 15:40:19 -0400] magoo_: trying to figure out why this http://pastebin.com/8g7JA2BE throws (erubis):504: syntax error, unexpected kEND, expecting '}'
[2012-05-01 15:40:22 -0400] magoo_: '; end
[2012-05-01 15:40:42 -0400] mattray: yfeldblum: it's currently in beta
[2012-05-01 15:40:47 -0400] hoover_damn: magoo_, eh? why?
[2012-05-01 15:40:59 -0400] mattray: yfeldblum: moving to limited availability this month
[2012-05-01 15:41:02 -0400] hoover_damn: magoo_, if you need a postgresql 9.1 cookbook that supports replication you should look over github.com/damm/postgresql
[2012-05-01 15:41:13 -0400] yfeldblum: mattray, thx
[2012-05-01 15:41:25 -0400] hoover_damn: magoo_, I even seperate the wal log from the data volume... so if you have multiple spindles
[2012-05-01 15:41:28 -0400] hoover_damn: total win
[2012-05-01 15:41:37 -0400] hoover_damn: spindles on the cloud or otherwise
[2012-05-01 15:41:52 -0400] yfeldblum: on the whole, i'd prefer them to spend the time on their openstack-based compute cloud than to spend the time on their current compute cloud
[2012-05-01 15:41:56 -0400] magoo_: i'll check it out but I need to get this up and running
[2012-05-01 15:42:43 -0400] hoover_damn: magoo_, erb -x filename.erb will print it out in a ruby way
[2012-05-01 15:42:49 -0400] hoover_damn: which might be able to help you see where the macro went wrong
[2012-05-01 15:43:47 -0400] magoo_: thanks
[2012-05-01 15:43:54 -0400] atomic-penguin: BryanWB, Listening to foodfight #9.  Texas is known for camping, lolwut?
[2012-05-01 15:44:04 -0400] hoover_damn: when in doubt, erb -x | ruby -c
[2012-05-01 15:45:01 -0400] BryanWB: atomic-penguin: dumb attempt at a segue ;p
[2012-05-01 15:46:08 -0400] atomic-penguin: I know, I thought it was funny, though.  Even mattray was like "wut", okay I'll play along.
[2012-05-01 15:46:20 -0400] hoover_damn: I really want to be able to someday do knife node show bob -a cloud.instance_id
[2012-05-01 15:46:24 -0400] hoover_damn: and actually get something out of rackspace
[2012-05-01 15:46:50 -0400] mattray: atomic-penguin: exactly
[2012-05-01 15:50:46 -0400] BryanWB: mattray is a very good sport for putting up w/ my horrible jokes
[2012-05-01 15:51:32 -0400] mattray: horrible jokes are a hallmark of our "style"
[2012-05-01 15:59:52 -0400] magoo_: hoover_damn: i ran it through erb -x and ruby -c
[2012-05-01 15:59:56 -0400] magoo_: http://pastebin.com/sz7jSxVu
[2012-05-01 16:00:02 -0400] magoo_: I'm still not sure what's up
[2012-05-01 16:03:28 -0400] hoover_damn: magoo_, you shouldn't be seeing <%
[2012-05-01 16:03:54 -0400] hoover_damn: ; _erbout.concat "# IPv6 local connections:\n"
[2012-05-01 16:03:55 -0400] hoover_damn: ; _erbout.concat "host    all             all             ::1/128                 "; _erbout.conca
[2012-05-01 16:03:58 -0400] hoover_damn: for example
[2012-05-01 16:04:09 -0400] hoover_damn: err i suck at pasting today
[2012-05-01 16:04:10 -0400] hoover_damn: ; _erbout.concat "host    all             all             ::1/128                 "; _erbout.concat(( @method ).to_s); _erbout.concat "\n"
[2012-05-01 16:06:21 -0400] hoover_damn: magoo_, ideally you shouldn't be able to see the if in erb -x
[2012-05-01 16:06:38 -0400] magoo_: ok, something must be screwed up higher in the file
[2012-05-01 16:06:40 -0400] hoover_damn: magoo_, erb preprocesses it and then outputs it to what ruby can run naturally
[2012-05-01 16:06:54 -0400] hoover_damn: so you have a lot of <% -%>
[2012-05-01 16:07:04 -0400] hoover_damn: you prolly can omit the -
[2012-05-01 16:07:11 -0400] magoo_: ok
[2012-05-01 16:07:34 -0400] hoover_damn: but you should just set archive_mode on
[2012-05-01 16:07:35 -0400] hoover_damn: and be done
[2012-05-01 16:07:52 -0400] hoover_damn: don't be afraid to leave hot_standby on
[2012-05-01 16:07:54 -0400] hoover_damn: it won't harm the master
[2012-05-01 16:07:59 -0400] magoo_: well hell
[2012-05-01 16:08:00 -0400] magoo_: ok
[2012-05-01 16:08:04 -0400] magoo_: that simplifies things
[2012-05-01 16:08:06 -0400] hoover_damn: that's why i was pointing you to my cookbook
[2012-05-01 16:08:20 -0400] hoover_damn: I had spent a lot of work optimizing it and producing a hostable postgresql cookbook that scaled
[2012-05-01 16:08:35 -0400] magoo_: i'll probably switch to it soon
[2012-05-01 16:08:45 -0400] hoover_damn: it's 9.1 vs 8.4, I use a PPA as I want 9.1
[2012-05-01 16:08:47 -0400] magoo_: I'm just trying to get this in place and I'm already using these cookbooks
[2012-05-01 16:08:51 -0400] hoover_damn: tand it was based off of jtimberman's
[2012-05-01 16:09:23 -0400] hoover_damn: as I have wal logs in a seperate location then regular... it would be easiest to dump/restore to switch to it :(
[2012-05-01 16:09:40 -0400] hoover_damn: otherwise set the attributes to tell it where to find the data and go
[2012-05-01 17:08:21 -0400] jonathan___: I just upgraded to Ubuntu 12.04, and installed chef-solo, but before_migrate no longer works. It doesn't even run the block at all.
[2012-05-01 17:08:55 -0400] jonathan___: I used to be using 0.8.16, now I'm using 0.10.8. Anybody have any idea what the issue is. I'm blank because the logs aren't showing anything.
[2012-05-01 17:10:10 -0400] brett_h: how do I go about debugging chef-client runs suddenly hanging (all servers) [Tue, 01 May 2012 17:09:43 +0000] DEBUG: Sending HTTP Request via GET to chef.i.foo.com:4000/nodes/web-1d
[2012-05-01 17:13:25 -0400] makuk66: brett_h: can you connect to the port with telnet? (perhaps someone screwed up a security group or firewall). Can you log into the chef server and check the logs?
[2012-05-01 17:15:04 -0400] brett_h: sorry, it looks like it was rabbit 2.8.2 upgrade
[2012-05-01 17:15:09 -0400] brett_h: I downgraded and it's working now
[2012-05-01 17:35:33 -0400] cg1: has anyone had any luck fixing http://tickets.opscode.com/browse/CHEF-2346
[2012-05-01 17:53:06 -0400] jonathan___: Has ANYBODY used chef on Ubuntu 12.04 yet?
[2012-05-01 17:53:21 -0400] flashmanbahadur: jonathan___: yes
[2012-05-01 17:53:41 -0400] flashmanbahadur: i used a monkeypatch to force ruby 1.9 install since the default bootstrap now fails
[2012-05-01 17:54:54 -0400] Urocyon: maybe use omnibus install?
[2012-05-01 17:55:08 -0400] flashmanbahadur: Urocyon: moving in that direction in the future
[2012-05-01 17:56:54 -0400] Urocyon: I moved to it after trying to use some cookbooks that required 1.9+
[2012-05-01 17:57:26 -0400] jonathan___: Urocyon: Do you use deploy hooks and do they still work?
[2012-05-01 17:58:22 -0400] Urocyon: jonathan___I'm not using any deploy hooks at this time.
[2012-05-01 17:59:08 -0400] jonathan___: Urocyon: ok. Thanks.
[2012-05-01 18:00:58 -0400] AntonZ: guys, does anyknow if there is a faster way to take snapshots of an EBS volume in amazon? something like netapp snapshot - boom and it's done? Right now if i have a volume of 1TB it takes like 2 hours to create snapshot through amazon interface
[2012-05-01 18:01:38 -0400] Urocyon: jonathan___Only problem I ran into was the users cookbook which required ruby-shadow, but installs it by package, thus not ending up in chef's ruby, where it's needed.
[2012-05-01 18:03:17 -0400] Urocyon: I just added a recipe to gem_package "ruby-shadow"
[2012-05-01 18:03:31 -0400] jonathan___: Urocyon: I'm not using that cookbook. So hopefully I will only have the one problem. This is almost driving me to just use plain old Cap for deploy.
[2012-05-01 18:04:18 -0400] Urocyon: What deploy hook error did you run into?
[2012-05-01 18:04:53 -0400] jonathan___: Urocyon: It's just not running the deploy hooks. Even if I put unparseable code into them. Just ignores them.
[2012-05-01 18:05:14 -0400] jonathan___: I'm not getting any errors in the logs, but it's clearly not doing normal things like deploy hooks, or even migrating
[2012-05-01 18:07:57 -0400] Urocyon: we are currently using fabric to handle deploys... was using it before I started using chef.
[2012-05-01 18:09:48 -0400] Urocyon: I consider deploy to be something separate from configuration.  While chef works great for configuration, I haven't been sold on using it for deploy.
[2012-05-01 18:09:54 -0400] jonathan___: Urocyon: My original intent was to use some other system like Capistrano to deploy, but when I found the deploy resource, it seemed to work well enough. Maybe I'll cook something else up.
[2012-05-01 18:10:41 -0400] Urocyon: I have experimented some with the application cookbook, and do use it currently for a simple django app deploy, but I haven't tried it yet on an omnibus chef.
[2012-05-01 18:11:58 -0400] Urocyon: Deploy at my company is a little more closely tied to development, and our developers are primarily python programmers, so it makes sense for us to use a python tool for deploy.
[2012-05-01 18:12:43 -0400] jonathan___: Our deploys will be very tight with development as well. That's why I wanted it to be out of band of chef.
[2012-05-01 18:12:45 -0400] Urocyon: Actually keeping an eye on salt-stack as a challenger to chef for the same reason, developer buy in.
[2012-05-01 18:14:36 -0400] geekbri: We wrote an CB just for our deploy process... has been working well so far.  The only caveat being currently the way the devs can schedule a deploy is by editing a role file and uploading it
[2012-05-01 18:14:48 -0400] geekbri: not perfect, but its been working for us.  We have a pretty complex deploy situation though.
[2012-05-01 18:16:01 -0400] jonathan___: I was toying with using a separate cookbook just for deploys as well. But that won't help me now that the deploy resource isn't working at all
[2012-05-01 18:17:17 -0400] Urocyon: jonathan___ did it break when you added omnibus, or does it just break when deploying to 12.04?
[2012-05-01 18:17:24 -0400] geekbri: Yeah we actually dont use the deploy resource at all :X
[2012-05-01 18:19:12 -0400] jonathan___: I upgraded to the new version of chef and Ubuntu at the same time. I'm using the deb package, and it just pulled the newer version. I didn't realise that until I started having problems
[2012-05-01 18:20:20 -0400] Urocyon: I avoid the deb package myself.  Ran into weird problems with it when I first started.
[2012-05-01 18:21:18 -0400] Urocyon: I bootstrap all my systems.
[2012-05-01 18:23:24 -0400] jonathan___: Maybe I'll try that. I usually don't trust package myself.
[2012-05-01 18:28:25 -0400] Urocyon: jonathan___ the only problem with bootstrap I've hit is that by itself it will bootstrap with ruby 1.8.  So I use a bootstrap template to make sure it installs its own ruby.
[2012-05-01 18:29:12 -0400] jonathan___: I just read that it installs it's own ruby, and so I dismissed that option.
[2012-05-01 18:30:48 -0400] Urocyon: I addded this boostrap/chef-full.erb to my .chef  directory.  https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-05-01 18:31:14 -0400] Urocyon: maybe not necessary with newer versions of knife.
[2012-05-01 20:00:00 -0400] cobragoat: i am a little unclear on how to use the deploy resource
[2012-05-01 20:00:51 -0400] cobragoat: where should I place the deploy block?
[2012-05-01 20:17:01 -0400] josephholsten: anyone tried using the java::openjdk recipe on ubuntu 12.04? I'm getting a weird RegexpError: Stack overflow in regexp matcher: /\A\s*(?:\[.*\]|\{.*\})\s*\Z/m
[2012-05-01 20:19:02 -0400] cwj: cobragoat: in a recipe, after any resources you need in order for the deploy to run successfully
[2012-05-01 20:20:14 -0400] cwj: e.g. you probably need to create a directory structure and maybe install some packages before you can deploy
[2012-05-01 20:21:37 -0400] cobragoat: cwj: ok so if I have for example a default.rb mysql.rb I would create my app.rb and in that recipe the setup commands such as directory creation etc would happen then the deploy block to pull the code from github etc?
[2012-05-01 20:21:42 -0400] flashmanbahadur: josephholsten: thats pretty bad, but
[2012-05-01 20:22:06 -0400] flashmanbahadur: josephholsten: I had a different issue where the jvm location is in a slightly different directory name
[2012-05-01 20:22:13 -0400] flashmanbahadur: josephholsten: may be related to that
[2012-05-01 20:22:19 -0400] cwj: cobragoat: yeah
[2012-05-01 20:22:31 -0400] cwj: cobragoat: check out the 'application' cookbook for some examples
[2012-05-01 20:22:32 -0400] cobragoat: got it.. makes sense
[2012-05-01 20:22:40 -0400] echiu: anyone working with windows cookbook?
[2012-05-01 20:22:48 -0400] flashmanbahadur: josephholsten /usr/lib/jvm/java-6-openjdk/ -> /usr/lib/jvm/java-6-openjdk-amd64/
[2012-05-01 20:23:00 -0400] cobragoat: ya.. so application cookbook uses deploy and/or deploy_resource ?
[2012-05-01 20:23:21 -0400] cobragoat: cwj: cool thanks a lot
[2012-05-01 20:23:51 -0400] echiu: having issue with bootstrap for windows cookbook on ec2
[2012-05-01 20:23:53 -0400] josephholsten: flashmanbahadur: sounds about right. shouldn't blow up with such a vague error, but I'll start there.
[2012-05-01 20:24:17 -0400] flashmanbahadur: josephholsten: sounds like the regex became super recursive and ran out of memory trying to match
[2012-05-01 20:33:34 -0400] josephholsten: hmm, looks like ubuntu 12.04 doesn't use arch x86_64, but amd64
[2012-05-01 20:33:36 -0400] cosman2001: I am using the knife openstack server create command which is failing to detect the public IP of the new instance and using the private IP instead
[2012-05-01 20:34:23 -0400] cosman2001: any ideas on why the knife command is unable to retrieve the public ip from the new openstack instance
[2012-05-01 20:45:10 -0400] CAustin: hi, just wondering if anyone could help out with a chef server installation issue on windows 7
[2012-05-01 20:45:52 -0400] CAustin: for some reason when i type gem install chef-server, i get an error telling me that gecode 3.5+ needs to be installed
[2012-05-01 20:46:22 -0400] CAustin: but i've installed gecode 3.7 and pointed my environment path to its lib directory
[2012-05-01 20:50:59 -0400] patcon: hmmm... came across augeas recently, and wondering whether we might consider it for manipulating conf files through LWRPs...
[2012-05-01 20:51:11 -0400] patcon: seems like it could help with TONS of cookbooks.
[2012-05-01 20:51:13 -0400] patcon: http://augeas.net/news.html
[2012-05-01 20:51:17 -0400] patcon: https://github.com/lutter/ruby-augeas
[2012-05-01 20:54:28 -0400] yfeldblum: patcon, try integrating it into one of your cookbooks & see what it's like?
[2012-05-01 20:55:34 -0400] patcon: yfeldblum: sounds good. suppose i was kinda putting out feelers for how common the tool was -- been in dev since 2007, but wasn't sure if it was just new to me :)
[2012-05-01 20:55:40 -0400] patcon: but good call, thanks!
[2012-05-01 20:56:57 -0400] yfeldblum: patcon, i think you'll find that, comparatively, dealing with APIs is quite nice whereas dealing with ASTs is quite hairy
[2012-05-01 20:58:44 -0400] patcon: AST, huh? and now i'm lost in wikipedia narnia...
[2012-05-01 20:58:46 -0400] patcon: :)
[2012-05-01 21:01:18 -0400] hoover_damn: patcon, puppet uses augeas
[2012-05-01 21:01:43 -0400] hoover_damn: patcon, I found very little value of augeas over gsub and or other barbaric patterns you can use in ruby to manipulate data
[2012-05-01 21:01:56 -0400] doki_pen: is it possible to use knife search to find nodes with a particular attribute?
[2012-05-01 21:02:02 -0400] hoover_damn: it seemed to only complicate the core dillema
[2012-05-01 21:03:04 -0400] doki_pen: ah, i think I got it
[2012-05-01 21:06:31 -0400] josephholsten: CAustin: I'm hitting something similar in ubuntu 12.04.
[2012-05-01 21:07:14 -0400] CAustin: josephholsten: interesting...
[2012-05-01 21:07:19 -0400] hoover_damn: josephholsten, you can always use omnibus
[2012-05-01 21:07:23 -0400] hoover_damn: ^^ CAustin
[2012-05-01 21:07:33 -0400] josephholsten: there's an omnibus chef-server install?
[2012-05-01 21:07:39 -0400] hoover_damn: if the default ruby is giving you grief, omnibus it.
[2012-05-01 21:07:46 -0400] hoover_damn: well it does install a lot of the components for server
[2012-05-01 21:07:55 -0400] CAustin: i assumed this was a windows-specific issue, most likely related to not having the default linux directory structure
[2012-05-01 21:08:38 -0400] hoover_damn: http://www.opscode.com/chef/install/
[2012-05-01 21:08:44 -0400] CAustin: i got the feeling it just wasn't looking in my system path, and instead just shooting for something in /etc/ or /usr/
[2012-05-01 21:08:45 -0400] patcon: hoover_damn: hm. i'm looking through the docs, and i can imagine developing an augeus-sense after awhile, but i'm thinking it might be a good chunk of the reason why puppet never seemed intuitive to me...
[2012-05-01 21:08:54 -0400] hoover_damn: CAustin, I understand using the MSI is the best thing on windows
[2012-05-01 21:09:04 -0400] CAustin: oh, yeah that's what i used for Gecode
[2012-05-01 21:09:20 -0400] hoover_damn: http://www.opscode.com/chef/install.msi
[2012-05-01 21:09:22 -0400] hoover_damn: should have et al
[2012-05-01 21:09:22 -0400] patcon: hoover_damn: thx for the insight
[2012-05-01 21:09:40 -0400] CAustin: oh, the client wasn't a problem to install, it's the server
[2012-05-01 21:10:30 -0400] hoover_damn: patcon, perhas one reason puppet could be misunderstood is how people are not used to a 'configuration management framework' where you have to define your universe
[2012-05-01 21:11:28 -0400] hoover_damn: that can be a lot to define as i've done it.
[2012-05-01 21:11:34 -0400] patcon: ah true. and you're referring to augeas' lenses in this context, right?
[2012-05-01 21:11:42 -0400] hoover_damn: I ended up ignoring everyones suggestions in puppet because they conflicted
[2012-05-01 21:11:50 -0400] hoover_damn: so I wrote my own manifest for a lot of things from scratch
[2012-05-01 21:12:06 -0400] hoover_damn: then fujin told me about chef
[2012-05-01 21:12:30 -0400] hoover_damn: and after looking at a sample cookbook I realized how much simpler my life could be.
[2012-05-01 21:13:20 -0400] hoover_damn: file {
[2012-05-01 21:13:21 -0400] hoover_damn:         "/var/local":
[2012-05-01 21:13:21 -0400] hoover_damn:                 ensure => directory, mode => 0755, owner => root, group => root, checksum => mtime;
[2012-05-01 21:13:23 -0400] hoover_damn: }
[2012-05-01 21:13:29 -0400] hoover_damn: isn't that strange in comparison to something Chef like.
[2012-05-01 21:14:22 -0400] patcon: haha amen
[2012-05-01 21:14:40 -0400] mattray: CAustin: there is not an omnibus server yet
[2012-05-01 21:16:02 -0400] patcon: and half the buzz i get from this whole chef hoohah is pushing stuff out for other people to use...
[2012-05-01 21:16:06 -0400] patcon: i don't think i'd enjoy it nearly as much if i was coerced into maintaining things I couldn't easily find a way to share
[2012-05-01 21:16:26 -0400] patcon: if that makes sense
[2012-05-01 21:18:06 -0400] hoover_damn: you may notice I tend to fork cookbooks that start out good ..
[2012-05-01 21:19:10 -0400] hoover_damn: it's fun to deviate and add things that you feel are required, and you can patch back but eventually you hit a point where your interests and upstreams do not match
[2012-05-01 21:19:13 -0400] hoover_damn: so don't sweat it
[2012-05-01 21:19:49 -0400] kreedy: I'm trying to have chef update our authoritative dns records (which are hosted on aws route53). I took a look at https://github.com/heavywater/chef-route53 which is nice, but has a bunch of requirements, including gcc that I don't want to throw on every box. My current idea is to have a "management" box that has the route53 recipe, that searches for nodes with the recipe "common::update-dns" (which does nothing) and updates the associated dns records. Anyone have
[2012-05-01 21:23:47 -0400] josephholsten: mattray: omnibus server := private chef
[2012-05-01 21:24:07 -0400] josephholsten: ; )
[2012-05-01 21:24:28 -0400] mattray: josephholsten: open source version coming soon
[2012-05-01 21:24:39 -0400] josephholsten: WHA!? awesome
[2012-05-01 21:25:28 -0400] mattray: josephholsten: Opscode wants everyone to have Chef
[2012-05-01 21:25:59 -0400] mattray: and making open source Chef easier is a win for everyone
[2012-05-01 21:28:02 -0400] josephholsten: mattray: have you got easy backup/restore/replication scripts for chef server up your sleeve too?
[2012-05-01 21:28:37 -0400] yfeldblum: kreedy, wouldn't recommend it
[2012-05-01 21:28:55 -0400] mattray: josephholsten: I don't have anything that isn't on the wiki or existing somewhere public
[2012-05-01 21:30:02 -0400] kreedy: yfeldblum: have another suggestion on how to accomplish this goal?
[2012-05-01 21:31:15 -0400] yfeldblum: kreedy, i'd recommend one of two scenarios: either the node itself updates route53 with up-to-date data about the node during the chef-client run on that node, or a separate script that you run yourself or that you drop on a box do it (but not a chef recipe, this should not run during chef-client runs but should be out-of-band)
[2012-05-01 21:31:47 -0400] hoover_damn: kreedy, fog?
[2012-05-01 21:31:51 -0400] hoover_damn: kreedy, all it uses is fog
[2012-05-01 21:32:19 -0400] kreedy: yea. and fog requires rubygems, which requires tons of build tools :-/
[2012-05-01 21:32:41 -0400] yfeldblum: kreedy, my principle is: chef-client running on node X will configure node X, and is permitted to configure service Y with information about node X only (but not with information about any other node)
[2012-05-01 21:33:30 -0400] hoover_damn: kreedy, you run chef on these nodes no?
[2012-05-01 21:33:49 -0400] kreedy: yes. installed via the .deb
[2012-05-01 21:33:51 -0400] yfeldblum: kreedy, any other administration stuff (e.g. node X updating service Y about nodes A B and C) runs out-of-band
[2012-05-01 21:34:33 -0400] hoover_damn: kreedy, then gem install fog should work no?
[2012-05-01 21:34:47 -0400] hoover_damn: all you need is the rubygems from debian
[2012-05-01 21:34:52 -0400] kreedy: yfeldblum: if i was running our own auth dns instead of route 53, would you have each client update the auth dns server via chef-client somehow, or have the auth dns server generate the entries via the chef config?
[2012-05-01 21:35:09 -0400] hoover_damn: I guess it seems like a silly issue as you already have chef-client on these servers
[2012-05-01 21:35:12 -0400] hoover_damn: which provides ruby and rubygems
[2012-05-01 21:35:59 -0400] yfeldblum: kreedy, ordinarily, i'd have the auth dns server refresh its entries from search during a chef-client run, but if the auth dns server exposes an API, then i would be open instead to having each node on which chef-client runs tell the auth dns server about that node
[2012-05-01 21:36:29 -0400] flashmanbahadur: looks like some of the opscode api endpoitns are having some issues
[2012-05-01 21:36:39 -0400] flashmanbahadur: seeing 3  4 retries on requests the past few minutes
[2012-05-01 21:37:49 -0400] josephholsten: grrr. opscode's libgecode-dev.deb is installed, but chef-server-api.gem can't seem to find main() in -lgecodesearch
[2012-05-01 21:38:20 -0400] yfeldblum: kreedy, but that applies only to single-node services, or cluster services where the cluster members merely have the same dataset but don't coordinate; once you start talking about services rather than nodes (such as a dns service, however implemented) you have to expose the API and configure it via the API
[2012-05-01 21:39:55 -0400] kreedy: gotcha
[2012-05-01 21:44:53 -0400] yfeldblum: kreedy, so if you don't want to install stuff on all the nodes, i'd say build a node for managing dns, and drop a script to update dns onto that node using chef, and then invoke that script out-of-band ... the script is *allowed* to query the chef-server for the up-to-date list of nodes every time it is executed, so you don't have to compile the script during the chef-client run with the results of a search done during the chef-client run
[2012-05-01 21:45:54 -0400] yfeldblum: kreedy, or write a knife plugin and add it to your repo (but it doesn't get deposited on servers; you run it from the command line yourself on your machine)
[2012-05-01 21:46:27 -0400] kreedy: why have it out-of-band as opposed to having the chef run on that management-node trigger it?
[2012-05-01 21:46:33 -0400] kreedy: hmm knife plugin could be interesting as well
[2012-05-01 21:47:02 -0400] yfeldblum: kreedy, so you could end up with a plugin in your repo like `knife amazon route53 sync --all`
[2012-05-01 21:47:46 -0400] yfeldblum: kreedy, because chef-client is great for converging the node that it's running on; i like to use hammers when i have nails, and other tools when i have screws
[2012-05-01 21:48:05 -0400] kreedy: that makes sense
[2012-05-01 21:56:59 -0400] josephholsten: anyone know how to explicitly spec which libgecodesearch.so I can link with chef-server-api.gem?
[2012-05-01 21:57:45 -0400] josephholsten: I've tried `gem install chef-server-api -- --with-gecodesearchlib=/usr/lib/libgecodesearch.so`
[2012-05-01 21:57:52 -0400] josephholsten: no dice
[2012-05-01 22:02:58 -0400] Lucky|Lap: .
[2012-05-01 22:06:10 -0400] Brad_K: kreedy: for me, one of the most important things is that each node should be the final arbiter of information about itself.  sure, i can tell it what the domain name is that it should be in, but it should be able to register itself in the appropriate DNS.  and that basic concept doesn't change regardless of what ever DNS service i might use.
[2012-05-01 22:07:09 -0400] Brad_K: kreedy: and we have cookbooks that we run on each node to do things like making sure the hostname is set properly, /etc/hosts is set properly, and that the node can properly auto-register itself in our DNS.
[2012-05-01 22:08:03 -0400] Brad_K: each of those cookbooks knows how to check to see what the current settings are, and knows how to correct them if they are wrong.
[2012-05-01 22:09:08 -0400] dangerdave: I'm new to chef-server and to knife. I'd like to delete all nodes that have a certain role. I know I can delete a individual node by name, and I can search for node role:role_name to get a list of the nodes. Any way to do this all in one?
[2012-05-01 22:13:06 -0400] coderanger: dangerdave: Other than writing a little script, not really
[2012-05-01 22:13:39 -0400] dangerdave: got it. it seems tantalizingly close.
[2012-05-01 22:13:49 -0400] coderanger: python -c 'from chef import *; api = autoconfigure(); for row in Search('nodes', 'roles:foo'): row.object.delete()'
[2012-05-01 22:14:00 -0400] dangerdave: coderanger: I did the moral equivalent of that
[2012-05-01 22:14:13 -0400] dangerdave: thanks
[2012-05-01 22:14:32 -0400] Brad_K: maybe: knife node delete bulk `knife search node "roles:example" -i`
[2012-05-01 22:14:49 -0400] dangerdave: Brad_K: ah, that's fair
[2012-05-01 22:15:05 -0400] Brad_K: but that doesn't do anything about the client, nor does that do anything about the actual machine/VM.
[2012-05-01 22:15:22 -0400] dangerdave: Brad_K: yep
[2012-05-01 22:15:28 -0400] josephholsten: SONOFA
[2012-05-01 22:15:33 -0400] Brad_K: that command execution would simply delete the information that chef has regarding the node in question.
[2012-05-01 22:15:58 -0400] josephholsten: precise provides http://packages.ubuntu.com/precise/admin/libgecode-dev, which is a different version than apt.opscode.com
[2012-05-01 22:16:04 -0400] Brad_K: and you might have to throw an " | xargs" onto the end of the "knife search "
[2012-05-01 22:17:22 -0400] Brad_K: josephholsten: i'm confused. precise?  is that a package that is being used by a chef cookbook of yours?  and you're having library mismatch problems?
[2012-05-01 22:17:35 -0400] fujin: you can use knife exec to do this trivially on the cli
[2012-05-01 22:17:58 -0400] cwj: brad_k: precise is the code name for ubuntu 12.04
[2012-05-01 22:18:01 -0400] cwj: just released
[2012-05-01 22:18:33 -0400] jtgiri_: I had a question about deploy module in chef, I want to control the migrate attribute , it sounds like if I set migrate to true it will try to run the migration every time chef runs, I wanted to see if there is a way to change that. Because I want to do a db dump when there is a  migration, and I don't' want db dump to happen every time chef-client runs. Any advice on how to do this ?
[2012-05-01 22:18:49 -0400] Brad_K: cwj: ahh.  they abandoned the two-word names, and went to having just one word  maybe to just screw with everyone who doesn't actually use Ubuntu on a day-to-day basis?!?
[2012-05-01 22:18:59 -0400] cwj: no its still two words
[2012-05-01 22:19:09 -0400] cwj: and i still dont care what the animal word is :)
[2012-05-01 22:19:21 -0400] fujin: dangerdave: knife exec -E "nodes.search('role:foo') { |node| node.destroy }"
[2012-05-01 22:19:23 -0400] cwj: precise pangolin or something
[2012-05-01 22:19:24 -0400] josephholsten: oh, it's precise pangolin
[2012-05-01 22:19:42 -0400] fujin: I would strongly recommend avoiding Precise Pangolin for a few weeks
[2012-05-01 22:19:50 -0400] cwj: like anyone is going to type that all the way out in a typical irc convo
[2012-05-01 22:19:59 -0400] fujin: :(
[2012-05-01 22:20:08 -0400] fujin: atypical, perhaps
[2012-05-01 22:20:09 -0400] dangerdave: fujin: yeah, that's basically where i landed. thanks!
[2012-05-01 22:20:18 -0400] josephholsten: fujin: so would I. until us daring few get bugs worked out.
[2012-05-01 22:20:44 -0400] cwj: i already found enough gotchas in prerelease
[2012-05-01 22:21:06 -0400] fujin: We've hit enough gotchas in some preliminary testing that I've advised all of our clients we're holding off the upgrade until I can proove our baseline automation in segregated environments
[2012-05-01 22:21:13 -0400] fujin: and even then, it won't be an upgrade -- i twill be a reroll
[2012-05-01 22:21:23 -0400] fujin: too many ooooos
[2012-05-01 22:21:27 -0400] Brad_K: i know that 99.9999% of the chef community uses Ubuntu exclusively, and everyone else has major Ubuntu-on-the-brain, but since the word "precise" is pretty common in the English language, it would be really helpful if people would be just a bit more specific when using that word in this context.
[2012-05-01 22:21:31 -0400] josephholsten: I've got one patch for the java cb, that's good enough for today
[2012-05-01 22:21:53 -0400] yfeldblum: "ubuntu precise"?
[2012-05-01 22:21:56 -0400] cheeseplus: version numbers > codenames ;)
[2012-05-01 22:22:11 -0400] yfeldblum: cheeseplus, might want to let apple know that :P
[2012-05-01 22:22:16 -0400] fujin: =P
[2012-05-01 22:22:29 -0400] Brad_K: i would prefer version numbers, but calling it either "ubuntu precise" or "precise pangolin" would be sufficient.
[2012-05-01 22:22:38 -0400] cheeseplus: oh codenames are all fine and good but for specificity's sake I like codenames
[2012-05-01 22:22:41 -0400] cheeseplus: er numbers
[2012-05-01 22:22:43 -0400] cheeseplus: arg
[2012-05-01 22:22:51 -0400] Brad_K: and yes, my preference to version numbers extends to Mac OS X.  I don't run Snow Leopard, I run Mac OS X 10.6.
[2012-05-01 22:23:14 -0400] cwj: i like kittens
[2012-05-01 22:23:15 -0400] fujin: meh, the shortened LSB codename is precise
[2012-05-01 22:23:16 -0400] mattray: Brad_K: 99.9999% is a bit much
[2012-05-01 22:23:17 -0400] cheeseplus: yep, of course I still know all the codenames because, well nerds
[2012-05-01 22:23:18 -0400] fujin: build a bridge and get over it
[2012-05-01 22:23:44 -0400] yfeldblum: mattray, what would your number be?
[2012-05-01 22:23:50 -0400] josephholsten: Brad_K: sorry, I've been intermittently mentioning my trouble with chef-server for a few hours
[2012-05-01 22:23:52 -0400] mattray: yfeldblum: 60%
[2012-05-01 22:23:59 -0400] cheeseplus: interesting
[2012-05-01 22:24:17 -0400] mattray: yfeldblum: there are some really huge deployments that could make that even smaller
[2012-05-01 22:24:30 -0400] josephholsten: Brad_K: but ubuntu 12.04 is especially clear, I'll stick with that
[2012-05-01 22:24:31 -0400] cheeseplus: I did get the Ubuntu impression but I figured I was already in the 1% installing it on Windows
[2012-05-01 22:24:33 -0400] Brad_K: at least, when i'm speaking to anyone who might potentially not be a MacFanatic, i will use version numbers.
[2012-05-01 22:24:49 -0400] mattray: numbers > words ;)
[2012-05-01 22:25:00 -0400] yfeldblum: Brad_K, iFanatic ?
[2012-05-01 22:25:01 -0400] heph: i just added chef to a node, and the node shows up in 'knife node list', but not in 'knife search node "*:*"'
[2012-05-01 22:25:08 -0400] josephholsten: CAustin: still around?
[2012-05-01 22:25:08 -0400] heph: any thoughts as to why?
[2012-05-01 22:25:22 -0400] mattray: heph: are you running your own server?
[2012-05-01 22:25:26 -0400] heph: yeah
[2012-05-01 22:25:33 -0400] josephholsten: heph: I've got the same issue with some of my windows machines
[2012-05-01 22:25:46 -0400] mattray: heph: solr is probably slow to keep up with indexing
[2012-05-01 22:25:51 -0400] heph: ah
[2012-05-01 22:26:14 -0400] heph: well, we're moving to hosted chef this afternoon (as soon as my boss gets back with the PO) so maybe that will fix it =]
[2012-05-01 22:26:23 -0400] fujin: windows machines load all of the device drivers into the node data
[2012-05-01 22:26:25 -0400] fujin: takes a while to index
[2012-05-01 22:26:30 -0400] cheeseplus: yes it does
[2012-05-01 22:26:30 -0400] fujin: you can disable that plugin for ohai though
[2012-05-01 22:26:32 -0400] Brad_K: yfeldblum: the i-name would have to be shorter.  maybe iFan.  long names are too much of a pain to type on a simulated keyboard.
[2012-05-01 22:26:42 -0400] mattray: heph: http://tickets.opscode.com/browse/CHEF-2346
[2012-05-01 22:26:48 -0400] cheeseplus: Brad_K: but autocomplete ;)
[2012-05-01 22:27:03 -0400] Brad_K: heph: you could probably go ahead and get started on migrating to Hosted Chef now.
[2012-05-01 22:27:22 -0400] fujin: I don't think you have to pay for it immediately :)
[2012-05-01 22:27:28 -0400] Brad_K: cheeseplus: DYAC
[2012-05-01 22:28:19 -0400] mattray: heph: fujin is right, nobody will bug you for awhile
[2012-05-01 22:29:01 -0400] mattray: and there aren't restrictions on your node count, we don't want to impede people scaling up
[2012-05-01 22:29:53 -0400] cheeseplus: Brad_K: I've carefully trained my autocomplete over the years, definitely been worth the effort
[2012-05-01 22:30:04 -0400] cheeseplus: especially for technical-ish terms
[2012-05-01 22:35:08 -0400] cheeseplus: oh yay, got my official contributor agreement approved
[2012-05-01 22:35:13 -0400] fujin: congratulations
[2012-05-01 22:35:21 -0400] fujin: I believe I was the #2 official contributor
[2012-05-01 22:35:28 -0400] fujin: right after btm =)
[2012-05-01 22:35:35 -0400] mattray: fujin: showoff
[2012-05-01 22:35:38 -0400] fujin: going strong now, must be like 200 names on that list
[2012-05-01 22:38:48 -0400] jhowarth: Is there a way to determine all of the current overrides while inside of a recipe?
[2012-05-01 22:38:54 -0400] jhowarth: node.overrides or something like that?
[2012-05-01 22:50:43 -0400] echiu: anyone on windows?
[2012-05-01 22:58:28 -0400] julienphalip: Hi, is it the right place for asking for help with Chef? :)
[2012-05-01 22:58:28 -0400] julienphalip: I'm having trouble with user permissions executing a command in a recipe
[2012-05-01 22:59:13 -0400] hoover_damn: good place to ask :)
[2012-05-01 22:59:25 -0400] hoover_damn: we just had a pretty good netsplit so our users are low
[2012-05-01 22:59:36 -0400] julienphalip: Cool :)
[2012-05-01 23:00:27 -0400] julienphalip: So I'm using the java and jetty cookbooks from https://github.com/opscode-cookbooks/ and that works ok. Then I'm also using this cookbook for setting up Solr: https://github.com/theozaurus/chef-solr
[2012-05-01 23:00:46 -0400] julienphalip: That all seems to work fine, except when it comes to restart jetty.
[2012-05-01 23:01:27 -0400] julienphalip: This is what I get: [Tue, 01 May 2012 15:24:13 -0700] FATAL: Chef::Exceptions::Exec: service[jetty] (jetty::default line 41) had an error: /etc/init.d/jetty restart returned 1, expected 0
[2012-05-01 23:01:39 -0400] julienphalip: Oh, BTW, I should mention that I'm using Vagrant
[2012-05-01 23:02:31 -0400] julienphalip: If I ssh into the VM, and run '/etc/init.d/jetty restart', then I get 'You need root privileges to run this script'
[2012-05-01 23:03:01 -0400] hippiehacker: whats the url to hosted chef?
[2012-05-01 23:03:02 -0400] hippiehacker: webui
[2012-05-01 23:03:11 -0400] gswallow: hippiehacker: happy may day!
[2012-05-01 23:03:30 -0400] julienphalip: If I do 'sudo /etc/init.d/jetty restart' then it works. So basically I'm wondering how I can get the recipe to start jetty properly.
[2012-05-01 23:03:46 -0400] hoover_damn: julienphalip, hrm sounds like chef isn't running under sudo
[2012-05-01 23:03:48 -0400] julienphalip: If you think that's a vagrant-specific issue, please let me know :)
[2012-05-01 23:03:59 -0400] hoover_damn: execute "/etc/init.d/jetty restart" do
[2012-05-01 23:04:01 -0400] hoover_damn: action :run
[2012-05-01 23:04:01 -0400] hoover_damn: end
[2012-05-01 23:04:04 -0400] hoover_damn: should run as the superuser
[2012-05-01 23:06:06 -0400] julienphalip: hoover_damn: I think this is what gets called and fails: https://github.com/opscode-cookbooks/jetty/blob/master/recipes/default.rb#L41
[2012-05-01 23:08:05 -0400] gswallow: OK, yeah.  Quick question.
[2012-05-01 23:08:19 -0400] gswallow: Is there a way to reload a node's attributes *right now* in a recipe?
[2012-05-01 23:08:48 -0400] gswallow: I thought that node.load_attributes would do it.
[2012-05-01 23:09:17 -0400] julienphalip: hoover_damn: Vagrant gives password-less root privileges to the default 'vagrant' user. However it seems 'sudo' is necessary. I'm not sure how to enforce the recipe to use 'sudo' for running that command.
[2012-05-01 23:19:07 -0400] hoover_damn: julienphalip, hrm i thought you could run it with sudo
[2012-05-01 23:19:33 -0400] hoover_damn: julienphalip, basically sounds like a silly rock
[2012-05-01 23:19:42 -0400] julienphalip: hoover_damn: Yes I can, if I do it manually after ssh-ing into the VM
[2012-05-01 23:19:57 -0400] hoover_damn: right
[2012-05-01 23:20:06 -0400] julienphalip: But the recipe apparently doesn't use 'sudo'. Not sure how to make it do it.
[2012-05-01 23:20:18 -0400] julienphalip: I think it happens here:  https://github.com/opscode-cookbooks/jetty/blob/master/recipes/default.rb#L41
[2012-05-01 23:20:47 -0400] hoover_damn: well wrap it in sudo
[2012-05-01 23:20:53 -0400] hoover_damn: execute "sudo /etc/init.d/jetty restart" do
[2012-05-01 23:20:54 -0400] hoover_damn: action :run
[2012-05-01 23:20:55 -0400] hoover_damn: end
[2012-05-01 23:22:53 -0400] julienphalip: I was hoping to do it without having to modify the recipe, since it's opscode's official 'jetty' recipe. Is there any way to change that with some configuration or custom code from a custom recipe?
[2012-05-01 23:23:59 -0400] miah: moin
[2012-05-01 23:33:31 -0400] jtimberman: julienphalip: normally you run chef-client as root
[2012-05-01 23:41:55 -0400] msf: btm: around ?
[2012-05-01 23:52:21 -0400] julienphalip: jtimberman: do you know how that would work in combination with vagrant? i.e. how can I be sure that the 'jetty' service would be started with the equivalent of 'sudo'?
[2012-05-01 23:56:48 -0400] major_majors: julienphalip: i think what you want is for chef-client (or chef-solo) to be run with sudo, then every recipe will be run with root permissions
[2012-05-01 23:57:09 -0400] major_majors: rather than making sure each individual recipe runs commands with sudo
[2012-05-01 23:57:54 -0400] julienphalip: major_majors: In principle, vagrant already does that: http://vagrantup.com/docs/provisioners.html  (see in the the "Which Provisioner Should I Use?")
[2012-05-01 23:57:58 -0400] btm: msf: what's up?
[2012-05-01 23:58:55 -0400] julienphalip: major_majors: and it does seem to work since in general, since the various recipes install everything (e.g. java and jetty) properly. It's when it comes to start the service that it fails, I think here: https://github.com/opscode-cookbooks/jetty/blob/master/recipes/default.rb#L41
[2012-05-01 23:59:13 -0400] julienphalip: The actual error I get is: FATAL: Chef::Exceptions::Exec: service[jetty] (jetty::default line 41) had an error: /etc/init.d/jetty restart returned 1, expected 0
[2012-05-01 23:59:51 -0400] julienphalip: By the way, I'm using vagrant with chef-solo

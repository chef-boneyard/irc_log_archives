[2012-05-08 00:01:40 -0400] cnf: well, removing those lines did help
[2012-05-08 00:04:17 -0400] josephholsten: anyone who likes fixing shell interpolation bugs, I got a nice one for postgresql server passwords: http://tickets.opscode.com/browse/COOK-1266
[2012-05-08 00:04:24 -0400] josephholsten: care of jschoolcraft
[2012-05-08 00:04:29 -0400] cnf: now
[2012-05-08 00:04:33 -0400] cnf: i got postgres installed
[2012-05-08 00:04:37 -0400] cnf: but i still can't use it!
[2012-05-08 00:04:46 -0400] cnf: because i don't know how to set the password ^^;
[2012-05-08 00:06:10 -0400] jschoolcraft: cnf: you're using vagrant right?
[2012-05-08 00:06:16 -0400] cnf: jschoolcraft: yeah
[2012-05-08 00:06:48 -0400] jschoolcraft: cnf: https://gist.github.com/950816daf4790ee55b43
[2012-05-08 00:06:55 -0400] jschoolcraft: sets the postgres user password
[2012-05-08 00:07:18 -0400] cnf: jschoolcraft: hey, i actualy got that right!
[2012-05-08 00:07:27 -0400] cnf: https://gist.github.com/2630610
[2012-05-08 00:08:18 -0400] cnf: hmm
[2012-05-08 00:08:37 -0400] cnf: jschoolcraft: so i should be able to psql -Upostgres on the guest, right?
[2012-05-08 00:08:54 -0400] jschoolcraft: I would say that's a reasonable assumption
[2012-05-08 00:09:08 -0400] cnf: well, that's not working ^^;
[2012-05-08 00:10:10 -0400] cnf: lets try a destroy/up
[2012-05-08 00:10:14 -0400] jschoolcraft: cnf: sudo su -l postgres
[2012-05-08 00:10:17 -0400] jschoolcraft: cnf: psql
[2012-05-08 00:14:46 -0400] cnf: hmz
[2012-05-08 00:14:49 -0400] cnf: jschoolcraft: $ psql -U postgres
[2012-05-08 00:14:49 -0400] cnf: psql: FATAL:  Ident authentication failed for user "postgres"
[2012-05-08 00:15:07 -0400] jschoolcraft: don't use the -U flag
[2012-05-08 00:15:11 -0400] jschoolcraft: just psql
[2012-05-08 00:15:24 -0400] cnf: there is no user postgres
[2012-05-08 00:15:39 -0400] cnf: wait, yes there is
[2012-05-08 00:15:40 -0400] cnf: hmm
[2012-05-08 00:16:41 -0400] akraut: miah: I'm still working on this chef-expander problem. Looking at the logs, the transit time doubles with every message it pulls from rabbit.
[2012-05-08 00:17:41 -0400] akraut: https://gist.github.com/d7ef8ec70844c15cd1d4
[2012-05-08 00:19:47 -0400] cnf: hmz
[2012-05-08 00:20:15 -0400] cnf: why isn't psql login working
[2012-05-08 00:21:02 -0400] jschoolcraft: you did what I suggested? sudo su -l postgres; psql ?
[2012-05-08 00:21:50 -0400] cnf: yes, but that doesn't prompt for a password
[2012-05-08 00:21:55 -0400] cnf: and i won't be connecting like that
[2012-05-08 00:25:28 -0400] cnf: hmm, weird
[2012-05-08 00:29:05 -0400] linuxboytoo: Wow 346 people - so I am working for a company using Rightscale currently. I like how they deal with revisions and versioning at multiple levels. How are people dealing with version control with their chef cookbooks and recipes
[2012-05-08 00:30:49 -0400] jschoolcraft: cnf: not weird, it's using ident for authentication.  if you want to change that you'll need to modify pg_hba.conf or whatever
[2012-05-08 00:31:27 -0400] cnf: jschoolcraft: hmm, ok, and is that included in the recipe? or how do i add that?
[2012-05-08 00:32:03 -0400] jschoolcraft: should be a template, i'm guessing.
[2012-05-08 00:32:37 -0400] miah: linuxboytoo: git
[2012-05-08 00:33:40 -0400] miah: cnf: most cookbooks were written by people trying to solve a singular problem. they may or may not have the features you want. some modification may be necessary.
[2012-05-08 00:35:09 -0400] linuxboytoo: @miah - sure, but what I have done so far I can maybe understand committing the cookbooks and recipes, but then I also have to send them off to the chef server. Then how are roles dealt with as those seem to be created via command line tools rather then hard config files
[2012-05-08 00:35:40 -0400] linuxboytoo: In puppet we stored everything in SVN (or git) and then the puppet server grabbed a checkout of all the files so the entire infrastructure of roles, templates, cookbooks, etc was in a single repo
[2012-05-08 00:36:14 -0400] miah: linuxboytoo: you can store all roles and such as json
[2012-05-08 00:36:42 -0400] miah: a single repo for everyting = a giant fucking mess
[2012-05-08 00:36:51 -0400] miah: keep your cookbooks in their own repo.
[2012-05-08 00:37:02 -0400] miah: use librarian to pull it all together
[2012-05-08 00:37:05 -0400] linuxboytoo: and then roles in their own repo?
[2012-05-08 00:37:09 -0400] miah: no
[2012-05-08 00:37:25 -0400] miah: roles / environments, data bags are all likely stored in your primary chef-repo clone
[2012-05-08 00:37:45 -0400] linuxboytoo: what do you mean by "primary chef repo clone"
[2012-05-08 00:38:28 -0400] miah: most people start out by cloning https://github.com/opscode/chef-repo
[2012-05-08 00:38:43 -0400] linuxboytoo: yeah I have done that
[2012-05-08 00:38:51 -0400] linuxboytoo: but then I just push pieces to the server
[2012-05-08 00:38:55 -0400] miah: right
[2012-05-08 00:39:06 -0400] linuxboytoo: is there a way to plug my whole "repo" to the server
[2012-05-08 00:39:10 -0400] linuxboytoo: to ensure sync?
[2012-05-08 00:39:27 -0400] linuxboytoo: I feel like my concept of how to deal with this is very skewed
[2012-05-08 00:39:35 -0400] linuxboytoo: so excuse my ignorance :)
[2012-05-08 00:40:11 -0400] miah: generally. you should only be modifying files in your git repo when you have a issue/case/task assigned to it
[2012-05-08 00:40:35 -0400] miah: and then when you are done making that change you upload it to your chef server
[2012-05-08 00:40:46 -0400] miah: everybody has a slightly different workflow though
[2012-05-08 00:41:20 -0400] linuxboytoo: it reminds me of mysql replication though in that we hope that everything committed to the repo also gets committed to the server
[2012-05-08 00:41:32 -0400] linuxboytoo: and if someone forgets to push to the server you may never know that
[2012-05-08 00:41:38 -0400] linuxboytoo: besides a server that isn't functioning
[2012-05-08 00:41:50 -0400] miah: then you need to document and refine your deployment procedure
[2012-05-08 00:42:42 -0400] linuxboytoo: yeah but just have procedures doesn't fix human error. Even with the absolute strictest policies surrounding deployment there is still a chance for chef server to not match the repo and not realizing it
[2012-05-08 00:42:49 -0400] linuxboytoo: seems like there is something more
[2012-05-08 00:43:06 -0400] miah: generally, people use deployment tools to manage deployment
[2012-05-08 00:43:16 -0400] miah: if you can't handle doing that then i am afraid of the code you write
[2012-05-08 00:43:39 -0400] miah: its like.. i can manage to put on my shoe but tieing the laces is optional
[2012-05-08 00:43:47 -0400] miah: but not really. =)
[2012-05-08 00:44:23 -0400] linuxboytoo: but there is always the chance that I forget to tie my shoes, thats my point - the way I had puppet deployed you COULDN'T put on your shoe without tieing it
[2012-05-08 00:44:44 -0400] linuxboytoo: While procedures are great to enforce things unfortunately they do not guarantee compliance
[2012-05-08 00:44:52 -0400] miah: a writen procedure maybe
[2012-05-08 00:45:12 -0400] miah: but if you have your stuff tied into a continous integration system then its kind of a no brainer to have a deployment tool as well
[2012-05-08 00:46:43 -0400] linuxboytoo: CI is fine for deploying code, but not for building servers
[2012-05-08 00:46:49 -0400] miah: not true
[2012-05-08 00:47:22 -0400] miah: with chef/puppet. infrastructure *is* code
[2012-05-08 00:47:26 -0400] linuxboytoo: and at least the way I have always used CI (not saying its right :) )  CI generates a package that then gets deployed t production
[2012-05-08 00:47:28 -0400] miah: you should be testing it just as you would anything else
[2012-05-08 00:47:45 -0400] miah: ci should be running integration tests, and possibly creating deployable artifacts
[2012-05-08 00:48:13 -0400] miah: then you tie that to capistrano, rundeck, or another tool to actually deploy your code
[2012-05-08 00:48:33 -0400] linuxboytoo: yeah I guess what I want is that group of artifacts that I can push to the chef server
[2012-05-08 00:48:46 -0400] linuxboytoo: so that I can ensure everything matches the repo
[2012-05-08 00:48:50 -0400] miah: the artifacts are just files in your git repository
[2012-05-08 00:49:04 -0400] linuxboytoo: I suppose I could re-deploy the chef server each time
[2012-05-08 00:49:06 -0400] miah: you can use git tagging
[2012-05-08 00:49:14 -0400] miah: that would be silly
[2012-05-08 00:49:39 -0400] miah: if you dont know what changes the other people in your group are making thats your first problem
[2012-05-08 00:49:40 -0400] linuxboytoo: or is it possible to deploy the entire chef configs with just flat files - my understanding is some of the stuff goes into a reddis type DB
[2012-05-08 00:50:32 -0400] miah: the chef configs are _all just flat files_
[2012-05-08 00:50:47 -0400] linuxboytoo: don't they require ingestion?
[2012-05-08 00:51:10 -0400] linuxboytoo: I can't just replace the flat file on the chef server and the change be realized correct?
[2012-05-08 00:51:13 -0400] linuxboytoo: maybe with a cookbook
[2012-05-08 00:51:13 -0400] miah: no
[2012-05-08 00:51:16 -0400] linuxboytoo: but not with roles and such
[2012-05-08 00:51:29 -0400] miah: roles are just json files
[2012-05-08 00:51:34 -0400] miah: or, they can be.
[2012-05-08 00:51:43 -0400] miah: there is a dsl, and json way to manage them
[2012-05-08 00:51:50 -0400] linuxboytoo: well I thought the json files were ingested to create the role, then the role was stored in the DB until you reingested
[2012-05-08 00:51:56 -0400] miah: right
[2012-05-08 00:52:14 -0400] linuxboytoo: so then replacing the JSON file on the server would not update the role, I would have to force reingestion
[2012-05-08 00:52:18 -0400] miah: yes
[2012-05-08 00:52:30 -0400] miah: i think you should study up on deployment techniques
[2012-05-08 00:52:37 -0400] miah: and quit trying to do things 'the hard way'
[2012-05-08 00:52:54 -0400] linuxboytoo: Yeah Im starting to think about how jenkins might fit into this
[2012-05-08 00:53:09 -0400] linuxboytoo: Were using jenkins for the application itself - maybe thats the part I'm not thinking about
[2012-05-08 00:53:17 -0400] miah: i need to go for a walk while we still have a sun today
[2012-05-08 00:53:19 -0400] cnf: chef-solo is included in chef-client?
[2012-05-08 00:53:26 -0400] linuxboytoo: @miah - thanks for the discussion
[2012-05-08 00:53:30 -0400] cnf: miah: good idea, walking is good!
[2012-05-08 00:53:33 -0400] linuxboytoo: enjoy the weather :D
[2012-05-08 00:53:36 -0400] josephholsten: linuxboytoo: you might take a look at an IDS like OSSEC, which can monitor a server for all the compliance stuff
[2012-05-08 00:54:12 -0400] cnf: hmz
[2012-05-08 00:54:22 -0400] cnf: how the heck do i use chef to update chef ^^;
[2012-05-08 00:54:25 -0400] linuxboytoo: ounds like what I need is to have Jenkins push the changes to the chef server on commit
[2012-05-08 00:57:32 -0400] miah: (and after testing)
[2012-05-08 00:58:25 -0400] hoover_damn: josephholsten, i'm shocked how many people still forget samhain
[2012-05-08 00:58:43 -0400] hoover_damn: I actually haven't had anyone ask me for samhain in almost 4years
[2012-05-08 00:58:52 -0400] miah: ya. nobody uses samhain
[2012-05-08 00:59:02 -0400] miah: anyways. walk
[2012-05-08 00:59:03 -0400] hoover_damn: prolly too nub
[2012-05-08 00:59:23 -0400] hoover_damn: having setup samhain it's one of the best file monitoring systems out there
[2012-05-08 00:59:30 -0400] hoover_damn: ignoring it is megastupid
[2012-05-08 00:59:36 -0400] josephholsten: I'll take a look
[2012-05-08 00:59:47 -0400] hoover_damn: hiring someone who can configure it out of the box
[2012-05-08 00:59:48 -0400] hoover_damn: ain't cheap
[2012-05-08 01:00:15 -0400] hoover_damn: basically you ship compiled samhain binaries with your ip hardcoded in the binary
[2012-05-08 01:00:19 -0400] hoover_damn: with a key
[2012-05-08 01:00:19 -0400] josephholsten: today I'm improving the glue between my monitoring
[2012-05-08 01:00:26 -0400] hoover_damn: it's not light
[2012-05-08 01:00:34 -0400] hoover_damn: makes packaging it a bit more fun
[2012-05-08 01:01:05 -0400] josephholsten: I'm guessing you don't have a cookbook lying around then
[2012-05-08 01:01:11 -0400] cnf: anyone know a recipe to upgrade chef-solo?
[2012-05-08 01:03:55 -0400] hoover_damn: josephholsten, nope
[2012-05-08 01:04:24 -0400] ArbiterOfCool: sup chef guys
[2012-05-08 01:13:08 -0400] upgrayedd: hmm- what reason could there be for that?
[2012-05-08 01:14:34 -0400] josephholsten: wow
[2012-05-08 01:43:50 -0400] jschoolcraft: why would chef-solo nginx default recipe want a pem?
[2012-05-08 01:46:31 -0400] bemu: No idea, check the recipe?
[2012-05-08 02:10:28 -0400] nutron: If I don't really get how puppet works and applies or knows how to apply changes to workstations, what are the chances that I'll understand chef?  =)
[2012-05-08 02:13:05 -0400] bemu: Yes, Chef will actually impart global wisdom upon you. Be one with the Force.
[2012-05-08 02:15:31 -0400] nutron: I'm simply looking for a solution to manage 80+ workstations and about 10 servers, so nothing major, but simple things like modifying a text conf file on each machine, installing software or removing it.  Is chef what I need?
[2012-05-08 02:16:04 -0400] miah: it could be
[2012-05-08 02:17:11 -0400] bemu: nutron: Sounds like it would do the trick! :)
[2012-05-08 02:17:20 -0400] bemu: Sorry to give you a snide response, but it was a funny question. Too hard to resist.
[2012-05-08 02:18:46 -0400] nutron: No worries, I know.  I've been rolling my own script for ages which does things through ssh for me, but it's limited.  Tried puppet, but the docs lost me quickly as I couldn't make the mental leap on how one would apply said changes to machines.
[2012-05-08 02:19:46 -0400] nutron: And the "it just knows" answer worried me .. because when it effed up, I wouldn't know how to fix it =)
[2012-05-08 02:20:01 -0400] bemu: Yeah, some parts of Chef can seem pretty confusing, but it all makes a lot of sense, and you can get a lot of help here.
[2012-05-08 02:22:05 -0400] nutron: Ok, I'll start playing with it, see what I can come up with.
[2012-05-08 02:22:10 -0400] nutron: Thanks for the pointers.
[2012-05-08 02:24:26 -0400] lallier: it it possible to return an array when doing a node search ?
[2012-05-08 02:25:17 -0400] |shad0w|: the return from search should be an array of searched objects
[2012-05-08 02:25:52 -0400] lallier: its a string or at least thats what myresult.class says
[2012-05-08 02:25:57 -0400] cwj: nutron: if you are specifically looking to understand how Chef decides whether or not to take an action, and what action to take, the bits of code known as "providers" are what you want to focus on
[2012-05-08 02:26:09 -0400] cwj: http://wiki.opscode.com/display/chef/Providers
[2012-05-08 02:26:53 -0400] lallier: im searching for nodes with a specific role and everything works as expected
[2012-05-08 02:27:39 -0400] hoover_damn: lallier, knife search node roles:bob -a ec2_instance_type
[2012-05-08 02:27:42 -0400] hoover_damn: for example
[2012-05-08 02:27:43 -0400] lallier: what i get is node[node01]node[node02]
[2012-05-08 02:27:58 -0400] hoover_damn: so you want knife search node roles:bob -a node01
[2012-05-08 02:27:59 -0400] hoover_damn: ?
[2012-05-08 02:28:24 -0400] lallier: im doing this inside a recipe
[2012-05-08 02:28:44 -0400] lallier: not via knife
[2012-05-08 02:30:17 -0400] mhalligan: Is there an easy way to figure out what a node's chef_environment variable is? I thought I'd be able to get it via knife node show nodename -a chef_environment but no dice
[2012-05-08 02:32:14 -0400] cwj: mhalligan: environment is listed in the output of 'knife node show foo'
[2012-05-08 02:32:43 -0400] cwj: on any recent version anyway
[2012-05-08 02:33:22 -0400] mhalligan: ah, duh, and it's empty. thanks :)
[2012-05-08 02:38:29 -0400] cwj: np
[2012-05-08 02:40:19 -0400] nutron: cwj: thanks.
[2012-05-08 02:40:33 -0400] cwj: no prob
[2012-05-08 02:40:56 -0400] hoover_damn: should be _default
[2012-05-08 02:40:57 -0400] hoover_damn: not empty
[2012-05-08 02:41:07 -0400] cwj: yeah thats what i would expect as well
[2012-05-08 02:41:19 -0400] nutron: So getting from zero to "change all /etc/resolv.conf to read nameserver 10.2.13.54" is... that a relativlely complicated procedure?
[2012-05-08 02:42:20 -0400] nutron: Feel free to tell me to RTFM at any point =)
[2012-05-08 02:42:20 -0400] cwj: nutron: there's a cookbook just for that, if you want to see
[2012-05-08 02:42:21 -0400] hoover_damn: running a 0.9 client on a 0.10 server will reset the chef env
[2012-05-08 02:42:22 -0400] cwj: http://community.opscode.com/cookbooks/resolver
[2012-05-08 02:42:31 -0400] nutron: cwj: ahh, cool
[2012-05-08 02:42:40 -0400] cwj: if you click on the source code tab
[2012-05-08 02:42:52 -0400] cwj: there are three relevant parts
[2012-05-08 02:43:46 -0400] nutron: Neat!
[2012-05-08 02:54:27 -0400] cwj: nutron: fwiw, (and i hope this doesn't discourage you,) chef has a steep learning curve, possibly steeper than puppet's. as someone who knew nothing about ruby (and still knows very little) it took me quite a while to get to the point where I could manage the things that were important to me (proprietary apps at my last job)
[2012-05-08 02:54:39 -0400] cwj: but its been very worthwhile for me
[2012-05-08 02:55:57 -0400] cwj: and personally, i've come to believe that sysadmins who aren't learning an infrastructure-as-code system like puppet or chef are going to have a pretty hard time proving their value
[2012-05-08 02:56:09 -0400] nutron: Understood, I'm not afraid of learning, though the goal was muddy in puppet b/c I could not understand "how" things were being applied/controlled and that just drove me nuts, couldn't tell you why.
[2012-05-08 02:56:37 -0400] cwj: i think you will find that chef is much more deterministic
[2012-05-08 02:56:49 -0400] cwj: e.g. recipes run in order
[2012-05-08 02:56:57 -0400] bemu: nutron: It would drive me crazy as well.
[2012-05-08 02:57:07 -0400] cwj: although there are two phases to a run, so there are still places where things can happen differently than you expect
[2012-05-08 02:57:11 -0400] cwj: its complicated stuff
[2012-05-08 02:58:44 -0400] nutron: ok, well i'm not afraid of taking on something new =) as long as the goal at the end makes me a sexier beast that can whip up a souffle in no time.
[2012-05-08 02:58:55 -0400] cwj: hells yeh
[2012-05-08 02:59:02 -0400] bemu: For sure. :D
[2012-05-08 02:59:06 -0400] bemu: Chef is awesome.
[2012-05-08 02:59:20 -0400] jtimberman: most commonly it'll just do what you expect though :)
[2012-05-08 02:59:38 -0400] nutron: So, in a nutshell, I code ... and I must code in ruby?
[2012-05-08 02:59:58 -0400] jtimberman: nutron: you "code" primarily in the recipe DSL
[2012-05-08 03:00:02 -0400] jtimberman: which you define resources
[2012-05-08 03:00:14 -0400] jtimberman: which is technically ruby code
[2012-05-08 03:01:47 -0400] jtimberman: https://gist.github.com/2632231
[2012-05-08 03:01:54 -0400] jtimberman: there's a couple ruby syntax things in that
[2012-05-08 03:01:55 -0400] nutron: fair enough, ruby is new to me, but coding's not.  php/perl/lua/c/c++ is what I've had experience in, so ruby shouldn't be an issue I assume?
[2012-05-08 03:02:03 -0400] nutron: oh ok, thanks
[2012-05-08 03:02:04 -0400] jtimberman: not at all
[2012-05-08 03:02:10 -0400] jtimberman: you can get nuts with it.
[2012-05-08 03:02:11 -0400] bemu: Nah, and Ruby is pretty good too.
[2012-05-08 03:02:14 -0400] jtimberman: but start small.
[2012-05-08 03:02:19 -0400] yfeldblum: however, since it is a recipe DSL embedded in Ruby, the full power of Ruby is open to you ... most basically, if/then/else, loops, string/array/hash operations, etc
[2012-05-08 03:02:25 -0400] jtimberman: a lot of cookbooks already exist that you don't have to write.
[2012-05-08 03:02:34 -0400] jtimberman: but tackle something simple.
[2012-05-08 03:03:08 -0400] nutron: ok, like changing the dns settings on all of the workstations per se?  :)
[2012-05-08 03:03:31 -0400] jtimberman: right
[2012-05-08 03:04:03 -0400] bemu: I tested dnsmasq recently as a dns cache..
[2012-05-08 03:04:09 -0400] jtimberman: nutron: the "resolver" cookbook does have some ruby code in it
[2012-05-08 03:04:25 -0400] bemu: total failure. It works, but performance is not great by default.
[2012-05-08 03:06:40 -0400] nutron: great!
[2012-05-08 05:39:03 -0400] BryanWB: ohai chefs!
[2012-05-08 05:41:47 -0400] miah: hihi BryanWB
[2012-05-08 05:41:59 -0400] BryanWB: miah hey ;)
[2012-05-08 05:42:17 -0400] miah: how goes
[2012-05-08 05:42:28 -0400] BryanWB: pretty crazy, work is a mess ahead of chefconf
[2012-05-08 05:42:34 -0400] BryanWB: miah:  u?
[2012-05-08 05:42:53 -0400] miah: doh. work is alright. i'm juggling cookbooks.
[2012-05-08 05:43:14 -0400] BryanWB: m so proud of most recent ffs, those etsy guys r awesome
[2012-05-08 05:43:20 -0400] miah: implementing graphite, collectd, and logstash this week..
[2012-05-08 05:43:25 -0400] BryanWB: wow!
[2012-05-08 05:43:34 -0400] miah: i still haven't listened. was on calls all day and then had a friend over for dinner
[2012-05-08 05:46:12 -0400] miah: we made macaroni/squash/cheese for dinner. it was noms.
[2012-05-08 05:46:34 -0400] valdezjoelt: Need from Chef gurus here I have a file from Cheff::File->Default->configs->settings.conf copied to my /etc/monoapp1/settings.conf using remote_file, after that I need to append some line like "host_name myhostname", i tried inserting a pure ruby script on the recipe using File.Open with option "a" but it seems its not appending the string
[2012-05-08 05:46:35 -0400] BryanWB: nice!
[2012-05-08 05:46:48 -0400] valdezjoelt: Need help from Chef gurus here I have a file from Cheff::File->Default->configs->settings.conf copied to my /etc/monoapp1/settings.conf using remote_file, after that I need to append some line like "host_name myhostname", i tried inserting a pure ruby script on the recipe using File.Open with option "a" but it seems its not appending the string
[2012-05-08 05:47:36 -0400] miah: valdezjoelt: template
[2012-05-08 05:47:37 -0400] miah: templates?
[2012-05-08 05:47:38 -0400] cwj: valdezjoelt: is there a reason you are not using a template?
[2012-05-08 05:47:38 -0400] bawt_: templates is http://wiki.opscode.com/display/chef/Templates
[2012-05-08 05:50:12 -0400] valdezjoelt: thanks miah and cwj. the reason i didnt use the template because I have three version of the file, can this be done by templates ? sorry im a newbie in Chef
[2012-05-08 05:50:36 -0400] cwj: whats your criteria for selecting the version to use?
[2012-05-08 05:51:05 -0400] miah: you should use templates and then build your file dymanically
[2012-05-08 05:51:26 -0400] miah: or even have three different templates that you rewrite portions of for simplicity
[2012-05-08 05:51:40 -0400] valdezjoelt: @ cwj my criteria is depends of the value of the env OPSCODE_ENV values are qa,dev and prod
[2012-05-08 05:52:24 -0400] miah: i do similar in my haproxy cookbook. i have a rewrite for primary domain url and it grabs the value from a attribute set in the environment its running on
[2012-05-08 05:52:27 -0400] cwj: definitely use a template
[2012-05-08 05:52:30 -0400] miah: i use a template to do it..
[2012-05-08 05:52:56 -0400] valdezjoelt: thanks miah and cwj, that helps a lot, need to do some reading on templates
[2012-05-08 07:33:18 -0400] eugenmayer: Does "service enable" actually restart the service each time?
[2012-05-08 07:33:29 -0400] specialsauce: no
[2012-05-08 07:33:51 -0400] specialsauce: not in my version of chef on redhat anyway
[2012-05-08 07:34:07 -0400] specialsauce: you can do "enable, restart" or whatever if you want both
[2012-05-08 07:35:31 -0400] eugenmayer: in my case, it seems like maybe the regexp pattern for OPENVPN does not work out matching the process
[2012-05-08 07:35:37 -0400] eugenmayer: as it seems to restart it every time
[2012-05-08 07:36:14 -0400] flaccid: the service should use a pid or similar, not an arbitrary regex kill though
[2012-05-08 07:36:56 -0400] specialsauce: you can specify the action that service uses if the default isn't working
[2012-05-08 07:37:27 -0400] specialsauce: start_command, restart_command etc
[2012-05-08 07:37:41 -0400] specialsauce: so if its not working, try using a different one explicitly in your recipe
[2012-05-08 07:39:06 -0400] eugenmayer: specialsauce: well, iam just suprised if enable does any "start" / restart at all. Looking at the docs, it should only enable the service
[2012-05-08 07:39:44 -0400] eugenmayer: actually, AFAICS, it never works on debian anyway, as /etc/default/shorewall never gets touched (and e.g. monit ) and stays off
[2012-05-08 07:39:53 -0400] specialsauce: it should do yes, i'm not sure why would you be seeing anything different - it could be calling an init script and the error lies there
[2012-05-08 07:40:13 -0400] specialsauce: its unlikely the probel lies in Chef since chef just calls out to existing methods such as "service" and "/etc/init.d"
[2012-05-08 07:40:17 -0400] specialsauce: on your system
[2012-05-08 07:40:44 -0400] eugenmayer: yes. I simply dont want to let chef restart anything in the openvpn reciepes
[2012-05-08 07:40:55 -0400] eugenmayer: well, i will investigate, thanks for the inputs
[2012-05-08 07:41:23 -0400] eugenmayer: e.g package "openvpn" do
[2012-05-08 07:41:23 -0400] eugenmayer:   action :install
[2012-05-08 07:41:23 -0400] eugenmayer: end
[2012-05-08 07:41:37 -0400] eugenmayer: that will only install the package, if its not yet installed i guess, right
[2012-05-08 07:41:53 -0400] specialsauce: yes, everythign should be idempotent
[2012-05-08 07:43:00 -0400] specialsauce: just checked the wiki - default provider for debian is "Chef::Provider::Service::Init::Debian" so the bug probably lies in the init script you have or, if not that, then that provider
[2012-05-08 07:44:45 -0400] eugenmayer: hm. Maybe you have a concept for this: i auto-generate user/passwort for a VPN connection, but iam not placing them using a template, but rather preseeding our VPN deb package
[2012-05-08 07:45:18 -0400] eugenmayer: now the issue is, i have to "preseed" / reconfigure on each chef run, as i cant detect "potential changes". Is there any way to do something like this
[2012-05-08 07:45:35 -0400] eugenmayer: "if the current deployed value differs from the value to be deployed right now, do this" ?
[2012-05-08 07:46:05 -0400] eugenmayer: i know, using templates would help here, as they only get written if they change, but as i use preseed, thats different
[2012-05-08 07:47:30 -0400] specialsauce: do you have to stick with the preseed pattern? Seems a lot of effort to go to to build a whole new deb package just because a password has changed?
[2012-05-08 07:48:13 -0400] specialsauce: Could you not have a basic deb packge for the install and then just a tempolate file separately in the same recipe for the config that gets overwritten on change?
[2012-05-08 07:49:22 -0400] eugenmayer: specialsauce: well, i dont "rebuild" the package i just preconfigure it
[2012-05-08 07:49:43 -0400] specialsauce: is that a pattern you jave to stick with now tho? or just a legacy thing?
[2012-05-08 07:49:57 -0400] eugenmayer: and i use the preseed way to be able to install the package the debian way on the console, which is important for stuff like VPN which are ( not yet ) chef-maintained
[2012-05-08 07:50:25 -0400] eugenmayer: specialsauce: something i actually "want to stick with" rather then legacy
[2012-05-08 07:52:42 -0400] specialsauce: ok, so there's a number of ways you could approach this, most simply probably just setting and checking for an attribute
[2012-05-08 07:52:52 -0400] eugenmayer: well, could there be something like "current_deployed_node['value1]==node['value'] ?
[2012-05-08 07:56:49 -0400] specialsauce: I'm getting lost on what you're trying to achieve I think
[2012-05-08 07:57:02 -0400] eugenmayer: specialsauce: let me rephras
[2012-05-08 07:57:09 -0400] eugenmayer: *rephrase
[2012-05-08 07:57:49 -0400] eugenmayer: Is there a way, to check, whether the _current_ deployed node attribiute ( like password ) is different from the one _about_ to et deployed
[2012-05-08 08:00:20 -0400] eugenmayer: i could use this as a condition for the "preseed / reconfigure" event
[2012-05-08 08:08:29 -0400] eugenmayer: http://wiki.opscode.com/display/chef/Attributes
[2012-05-08 08:08:29 -0400] eugenmayer: looking at this, but yet did not spot anything
[2012-05-08 08:10:12 -0400] flaccid: not sure what you are trying to achieve
[2012-05-08 08:10:29 -0400] specialsauce: yeah, i'm still confused I'm afraid with what you want
[2012-05-08 08:11:00 -0400] specialsauce: you can only have the attribute have one value, if you needed to decide whether that attribute needed to be updated, that logic would have to check something else
[2012-05-08 08:14:39 -0400] eugenmayer1: specialsauce: your gone? :)
[2012-05-08 08:15:00 -0400] eugenmayer1: ah, sorry, got diconnnected
[2012-05-08 08:15:21 -0400] eugenmayer1: hmm, strange, let me pseudocode it
[2012-05-08 08:16:48 -0400] eugenmayer1: http://pastie.org/3877624 specialsauce / flaccid
[2012-05-08 08:16:52 -0400] eugenmayer1: thats pretty much it
[2012-05-08 08:17:24 -0400] eugenmayer1: deployed_node holds the attributes which are deployed on the server right now ( so just before the chef run ), while "node" holds the values to be deployed in the current run
[2012-05-08 08:22:24 -0400] flaccid: eugenmayer1: thats the wrong way of doing it you should use a notification on the config file resource so when the config changes it does whatevs
[2012-05-08 08:22:41 -0400] flaccid: http://community.opscode.com/cookbooks/openvpn
[2012-05-08 08:22:50 -0400] eugenmayer1: flaccid: you def. did not read all my posts.
[2012-05-08 08:23:04 -0400] eugenmayer1: iam not using teplates, but preseeds.
[2012-05-08 08:23:23 -0400] flaccid: sure, good luck with that then
[2012-05-08 08:23:39 -0400] specialsauce: I see what you are trying to do, where are you sourcing the new password from?
[2012-05-08 08:23:41 -0400] eugenmayer1: (9:49)
[2012-05-08 08:24:07 -0400] eugenmayer1: specialsauce: well, it can be set as a normal attirbute on the node-level, otherwise, on new nodes, its:
[2012-05-08 08:24:15 -0400] eugenmayer1: set_unless['kw-openvpn']['maintain']['pw'] = secure_password
[2012-05-08 08:24:43 -0400] specialsauce: but i mean before that, where's it coming from?
[2012-05-08 08:24:45 -0400] eugenmayer1: basically generated. Its usually unlikely to ever change, but its important it is changed if needed, as it gets synced back to the VPN server
[2012-05-08 08:25:02 -0400] eugenmayer1: before? Sorry, maybe iam still unclear
[2012-05-08 08:25:16 -0400] eugenmayer1: 1. case1: New nodes ( fresh )
[2012-05-08 08:25:24 -0400] specialsauce: OK, so can it be in a data bag or whatever within your chef config and you manually update it in the repo? or does it change too often for that
[2012-05-08 08:25:33 -0400] eugenmayer1: - Password is set manually in the node OR generated automatically in set_unless['kw-openvpn']['maintain']['pw'] = secure_password
[2012-05-08 08:26:11 -0400] eugenmayer1: 2. current existing nodes: Password is saved in the node as normal attribute and can be changed by json / ui
[2012-05-08 08:26:44 -0400] eugenmayer1: specialsauce: the passwords are not part of the reciepe at all. They are generated for each client
[2012-05-08 08:27:46 -0400] specialsauce: this is what i'm trying to drive at. generated how? manually? scripted?
[2012-05-08 08:28:02 -0400] eugenmayer1: flaccid: basically https://github.com/opscode-cookbooks/openvpn does just scratch the surface, if even.
[2012-05-08 08:28:22 -0400] eugenmayer1: specialsauce: sorry, iam confusing you, let me state this even clearer:
[2012-05-08 08:28:58 -0400] flaccid: eugenmayer1: yes someone needs to upgrade it
[2012-05-08 08:29:37 -0400] eugenmayer1: flaccid: what i do is, covering the client side ( also the user/pasword auth, not only cert) and the server side
[2012-05-08 08:29:52 -0400] eugenmayer1: specialsauce: can i pm you the link?
[2012-05-08 08:30:42 -0400] flaccid: pull it back
[2012-05-08 08:31:26 -0400] eugenmayer1: its not at all based on it
[2012-05-08 08:32:41 -0400] flaccid: so?
[2012-05-08 08:32:41 -0400] bawt_: so is this appstore everyone's talking about
[2012-05-08 08:32:45 -0400] eugenmayer1: jtimberman: are you aware of this mash-bug in chef? https://github.com/EugenMayer/shorewall/blob/master/recipes/default.rb#L31 ( and the need of this? )
[2012-05-08 08:33:28 -0400] flaccid: i'm out
[2012-05-08 08:57:06 -0400] linuxboy: Hi
[2012-05-08 08:57:31 -0400] linuxboy: I emailed this to the list a while ago: http://lists.opscode.com/sympa/arc/chef/2012-05/msg00012.html
[2012-05-08 08:57:40 -0400] linuxboy: still got no response, can anybody help?
[2012-05-08 09:04:58 -0400] eugenmayer1: linuxboy: be sure to include your chef-version
[2012-05-08 09:05:21 -0400] eugenmayer1: and be sure to know that there is deep-merge
[2012-05-08 09:05:32 -0400] eugenmayer1: therefore, all 3 apps going to be deployed.
[2012-05-08 09:05:44 -0400] linuxboy: how does a deep-merge work?
[2012-05-08 09:05:56 -0400] eugenmayer1: http://wiki.opscode.com/display/chef/Deep+Merge
[2012-05-08 09:06:00 -0400] eugenmayer1: http://wiki.opscode.com/display/chef/Attributes
[2012-05-08 09:06:11 -0400] eugenmayer1: read this, that is pretty good documented
[2012-05-08 09:06:29 -0400] linuxboy: so, am I doing it wrong?
[2012-05-08 09:07:14 -0400] eugenmayer1: did you read that in 20 seconds?
[2012-05-08 09:07:25 -0400] linuxboy: also, why is it changing ?
[2012-05-08 09:07:38 -0400] linuxboy: No, I've been over both of those docs before
[2012-05-08 09:08:31 -0400] eugenmayer1: read deep-merge again .)
[2012-05-08 09:10:01 -0400] linuxboy: I still dono't get it
[2012-05-08 09:11:41 -0400] linuxboy: also, I'm using default and normal, I expect normal to take preferance according to the Attributes wiki page you pasted
[2012-05-08 09:14:07 -0400] linuxboy: "when items can't be merged the original data is overwritten" - may be I'm getting that, but why on some runs and not on others?
[2012-05-08 09:14:40 -0400] linuxboy: "Hash - Add a string" showed strings being added to a hash, also may be I'm getting this, but why on some runs and not on others?
[2012-05-08 09:15:13 -0400] specialsauce: linuxboy: if you set an attribute, you need to do a node.save to make it available *immediately*
[2012-05-08 09:15:17 -0400] specialsauce: ( i believe)
[2012-05-08 09:15:53 -0400] linuxboy: specialsauce: where? in the recipe?
[2012-05-08 09:15:57 -0400] railsraider: hi i have a few values i need to add to sysctl and systl.conf - how do i do that?
[2012-05-08 09:16:20 -0400] linuxboy: specialsauce: my attributes are getting set in the attributes files and in the json node file
[2012-05-08 09:16:46 -0400] eugenmayer1: linuxboy: merging {"foo":{"bar"}} and {"foo":{"large"}} will end up being {"foo":{"bar","large"}}
[2012-05-08 09:16:53 -0400] eugenmayer1: be sure to undestand that - that is deep merge
[2012-05-08 09:17:21 -0400] eugenmayer1: maybe iam blind, but looking for possible values for the notification "timing" in http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2012-05-08 09:17:43 -0400] linuxboy: eugenmayer1: that is fine, but why does it change after every run?
[2012-05-08 09:17:46 -0400] eugenmayer1: immediately is one, i guess not setting it is something like "to the end of the queue
[2012-05-08 09:18:25 -0400] linuxboy: also, the merging is happening on "default" and settings I want are in "normal"
[2012-05-08 09:18:31 -0400] eugenmayer1: linuxboy: be aware that actual node['someval']='foo' gets _persisted_ after a chef client run, so this value resides in the node after that. This can lead to things like that
[2012-05-08 09:18:41 -0400] eugenmayer1: (in a reciepe
[2012-05-08 09:19:17 -0400] linuxboy: I don't set things like that in a recipe
[2012-05-08 09:19:59 -0400] linuxboy: all the attributes are in the attributes files of the cookbooks and in the json file for the node
[2012-05-08 09:21:44 -0400] eugenmayer1: maybe try to use shef
[2012-05-08 09:21:51 -0400] eugenmayer1: and debug to see how the values are computed
[2012-05-08 09:22:06 -0400] linuxboy: I think so
[2012-05-08 09:22:20 -0400] linuxboy: I've made it debug print the values, and they change every time
[2012-05-08 09:30:44 -0400] eugenmayer1: well, iam then out of ideas. Maybe someone else can help
[2012-05-08 09:31:32 -0400] eugenmayer1: the only thing i was stumbling upon with deep merges was recursion which actually modifies the mash suddenly, leading to totally weired results. There is also an issue for that
[2012-05-08 09:36:22 -0400] linuxboy: got the URL for the issue?
[2012-05-08 09:39:47 -0400] linuxboy: how do I use shef?
[2012-05-08 09:40:27 -0400] BryanWB: linuxboy: shef -z
[2012-05-08 09:40:48 -0400] linuxboy: I've done that, run the recipe, but I get this massive output
[2012-05-08 09:41:09 -0400] linuxboy: I want to see how the attributes are merged together
[2012-05-08 09:44:48 -0400] linuxboy: chef:recipe > node['tomcat']
[2012-05-08 09:44:48 -0400] linuxboy:  => #<Chef::Node::Attribute @current_normal={"vhosts"=>{"sitebuilder.qa.yola.net"=>{"app"=>"sitebuilder", "base"=>"SiteBuilder.war", "path"=>"/"}, "siteservice.qa.yola.net"=>{"app"=>"siteservice", "base"=>"SiteService-1.0.war", "path"=>"/siteservice"}}, "default_host"=>"sitebuilder.qa.yola.net"}, @set_type=nil, @current_automatic=nil, @default={...}, @set_unless_value_present=false, @current_override=nil, @auto_vivifiy_on_read=false, @automatic={...}, @ov
[2012-05-08 09:45:03 -0400] linuxboy: looks right
[2012-05-08 09:58:25 -0400] eugenmayer1: can someone explaint me, if http://pastie.org/3877984 going to work AND/OR if http://pastie.org/3877988 actually executes the "defined" package installation, so with the response_file file, or rather like in the first example, without
[2012-05-08 10:06:25 -0400] linuxboy: I've done some digging into my problem
[2012-05-08 10:06:38 -0400] linuxboy: when things are working I get this:
[2012-05-08 10:06:39 -0400] linuxboy: [Tue, 08 May 2012 10:03:11 +0000] INFO: #<Chef::Node::Attribute @set_unless_value_present=false, @current_override=nil, @auto_vivifiy_on_read=false, @automatic={...}, @override={...}, @current_default={"vhosts"=>{}, "timeout"=>5000, "listeners"=>[], "standalone"=>false, "java_opts"=>[], "default_host"=>"localhost", "port"=>8009}, @has_been_read=false, @current_nesting_level=["tomcat"], @normal={...}, @current_normal={"vhosts"=>{"sitebuilder.qa.yola.net"=>
[2012-05-08 10:06:49 -0400] linuxboy: broken I get this:
[2012-05-08 10:06:50 -0400] linuxboy: [Tue, 08 May 2012 10:04:15 +0000] INFO: #<Chef::Node::Attribute @set_unless_value_present=false, @current_override=nil, @auto_vivifiy_on_read=false, @automatic={...}, @override={...}, @current_default={"port"=>8009, "standalone"=>false, "vhosts"=>{"sitebuilder.livetest.usa-east.yola.net"=>{"app"=>"sitebuilder", "path"=>"/", "base"=>"SiteBuilder.war"}}, "timeout"=>5000, "default_host"=>"localhost", "listeners"=>[], "java_opts"=>[]}, @has_been_read=false, @
[2012-05-08 10:07:08 -0400] linuxboy: see how current_default is empty in the 'fixed' one?
[2012-05-08 10:53:49 -0400] yfeldblum: linuxboy, why do you have a node json file when you're using chef-client?
[2012-05-08 10:54:21 -0400] BryanWB: linuxboy: u need pry
[2012-05-08 10:54:32 -0400] BryanWB: linuxboy:    gem install pry pry-nav  pry-doc
[2012-05-08 10:54:55 -0400] BryanWB: linuxboy:     shef -z ;  chef>require 'pry'    chef> binding.pry
[2012-05-08 10:55:54 -0400] linuxboy: yfeldblum: thats where we set the attributes
[2012-05-08 10:56:09 -0400] linuxboy: BryanWB: I'll give it a go, thanks
[2012-05-08 10:56:42 -0400] BryanWB: that's the best way to explore the node object
[2012-05-08 10:56:49 -0400] BryanWB: pry> ls node
[2012-05-08 10:57:08 -0400] yfeldblum: linuxboy, per-node json files is for chef-solo
[2012-05-08 10:57:38 -0400] yfeldblum: linuxboy, what's the code that is *reading* these attributes?
[2012-05-08 10:58:31 -0400] yfeldblum: linuxboy, there are a couple gotchas to be aware of when reading attributes out of a node, so how are you doing it right now?
[2012-05-08 10:58:52 -0400] yfeldblum: BryanWB, good morning
[2012-05-08 10:59:28 -0400] yfeldblum: BryanWB, while i admit pry is right for some people, i prefer to do remote debugging via intuition and dumb luck
[2012-05-08 10:59:29 -0400] BryanWB: yfeldblum: sup homez
[2012-05-08 10:59:49 -0400] BryanWB: yfeldblum: haha, dumb luck ftw ;)
[2012-05-08 11:04:01 -0400] linuxboy: yfeldblum: http://pastebin.com/mX4KWXnR
[2012-05-08 11:04:10 -0400] linuxboy: yfeldblum: how should I be setting attributes then?
[2012-05-08 11:05:38 -0400] linuxboy: yfeldblum: here is the actual template: http://pastebin.com/sDKz0a2R
[2012-05-08 11:15:10 -0400] yfeldblum: linuxboy, try reconstructing a *real* Hash from the node data *without* using local variables multiple times that hold references to interior parts of the node data
[2012-05-08 11:21:25 -0400] yfeldblum: linuxboy, https://github.com/opscode/chef/blob/master/chef/lib/chef/node/attribute.rb#L89-90
[2012-05-08 11:46:26 -0400] laurent\: outch updating libgecode (debian/wheezy) preventing my chef server to restart this morning
[2012-05-08 11:46:40 -0400] laurent\: rebuilding dep_selector did the trick
[2012-05-08 11:47:07 -0400] laurent\: s/preventing/prevented/
[2012-05-08 12:38:34 -0400] linuxboy: yfeldblum: what does that mean?
[2012-05-08 12:41:22 -0400] cnf: man, that postgres cookbook is giving me nothing but trouble
[2012-05-08 12:54:39 -0400] cnf: damnit, it installs a useless postgres server!
[2012-05-08 12:54:41 -0400] cnf: >,<
[2012-05-08 13:00:08 -0400] cnf: really not a good showcase, an often used package that is just utterly broken
[2012-05-08 13:12:07 -0400] linuxboy: yfeldblum: I'm not sure I understand what you mean
[2012-05-08 13:12:41 -0400] linuxboy: yfeldblum: is it the way I'm constructing the attributes and looping over them?
[2012-05-08 13:16:26 -0400] yfeldblum: linuxboy, construction of the attributes seems fine (except for the rather odd thing of having a node json file when using chef-client)
[2012-05-08 13:17:44 -0400] yfeldblum: linuxboy, but you should note that the Chef::Node instance is *not* a Hash or a Mash ... in most cases, it tries hard to pretend to be a Mash, but sometimes it doesn't quite work out and you'll need to try some workarounds
[2012-05-08 13:18:10 -0400] linuxboy: I'm not sure what a Mash is
[2012-05-08 13:18:13 -0400] linuxboy: (not a ruby dev)
[2012-05-08 13:21:25 -0400] yfeldblum: linuxboy, a Mash (https://github.com/opscode/chef/blob/master/chef/lib/chef/mash.rb) is like a Hash, except it allows you to equivocate between string keys & symbol keys (data["key1"] and data[:key1] are equivalent) and even lets you use messages (data.key1 is equivalent)
[2012-05-08 13:22:47 -0400] linuxboy: thanks
[2012-05-08 13:22:53 -0400] linuxboy: I'm still not sure how to work around it :/
[2012-05-08 13:22:55 -0400] yfeldblum: linuxboy, Chef::Node and Chef::Node::Attribute try hard to look like Mash, and it works most of the time, but there are gotchas sometimes ... it would be interesting to discover whether what you're dealing with is one of those gotchas, or if it's something else entirely
[2012-05-08 13:23:01 -0400] eherot: yfeldblum: wow, that sheds some light...
[2012-05-08 13:24:14 -0400] linuxboy: I'm not sure where to begin to find that out
[2012-05-08 13:27:22 -0400] railsraider: how do i create the webui.pem  on chef server?
[2012-05-08 13:27:29 -0400] cnf: does anyone know of a good postgres cookbook?
[2012-05-08 13:28:18 -0400] railsraider: i tried restarting the webui-server but it didn't recreate it
[2012-05-08 13:28:39 -0400] railsraider: should i just copy the validation.pem to a new file name webui.pem?
[2012-05-08 13:28:45 -0400] yfeldblum: linuxboy, hmm, on second thought, you are actually passing `node["..."].to_hash`, which should actually get you a real Hash instance, so that shouldn't be a problem
[2012-05-08 13:30:03 -0400] railsraider: anyone knows how to recreate the webui.pem?
[2012-05-08 13:30:22 -0400] yfeldblum: railsraider, why do you need to recreate it?
[2012-05-08 13:30:36 -0400] railsraider: its not there to begin with yfeldblum
[2012-05-08 13:30:46 -0400] railsraider: i can't complete the setup
[2012-05-08 13:31:07 -0400] railsraider: knife configure -i complains that the pem file is missing
[2012-05-08 13:32:58 -0400] railsraider: yfeldblum: i've installed using bootstrap on ubuntu 10.04
[2012-05-08 13:33:59 -0400] railsraider: i've just re-ran the bootstrap it didn't create the webui.pem
[2012-05-08 13:34:09 -0400] eherot: railsraider: it's just an rsa, you could always make another one
[2012-05-08 13:34:13 -0400] eherot: *rsa key that is
[2012-05-08 13:34:41 -0400] eherot: but obviously anything it was used to sign would have to be replaced, although if yours was never created in the first place that's probably nothing
[2012-05-08 13:34:43 -0400] zts: railsraider: it should be created when chef-server-webui starts for the first time, assuming that the validation.pem is accessible and correct
[2012-05-08 13:34:51 -0400] zts: railsraider: is webui definitely running?
[2012-05-08 13:34:59 -0400] railsraider: yes
[2012-05-08 13:35:23 -0400] railsraider: i mean i can't access it via chef:4040 if thats what you're asking ?
[2012-05-08 13:35:36 -0400] zts: if you can't access it via chef:4040, that sounds like it's not running?
[2012-05-08 13:35:43 -0400] railsraider: k
[2012-05-08 13:36:46 -0400] zts: if you set a too-short default password in /etc/chef/webui.rb , that can cause webui to not start without any useful error messages
[2012-05-08 13:36:57 -0400] zts: but I only know that because that's how I went wrong the first time I installed on ubuntu
[2012-05-08 13:37:08 -0400] railsraider: says fail when i try sudo /etc/init.d/chef-server-webui start
[2012-05-08 13:37:24 -0400] sampikesley: that should log something somewhere
[2012-05-08 13:38:06 -0400] railsraider: zts: i don't see a password on webui.rb
[2012-05-08 13:38:52 -0400] zts: railsraider: The setting is "web_ui_admin_default_password"
[2012-05-08 13:39:34 -0400] railsraider: its not in there at all
[2012-05-08 13:39:39 -0400] railsraider: maybe thats why?
[2012-05-08 13:39:46 -0400] zts: hm, which version of Chef have you installed?
[2012-05-08 13:40:15 -0400] railsraider: latest 10.8
[2012-05-08 13:40:43 -0400] railsraider: firewall?
[2012-05-08 13:40:44 -0400] bawt_: firewall is a 'heavyweight' provider.
[2012-05-08 13:41:17 -0400] linuxboy: yfeldblum: any other ideas then? or something I can do to dig deeper?
[2012-05-08 13:43:36 -0400] yfeldblum: linuxboy, Chef::Log.info(node["tomcat"].to_hash)
[2012-05-08 13:44:40 -0400] linuxboy: [Tue, 08 May 2012 13:30:01 +0000] INFO: {"standalone"=>false, "default_host"=>"sitebuilder.qa.yola.net", "port"=>8009, "java_opts"=>[], "vhosts"=>{"siteservice.qa.yola.net"=>{"path"=>"/siteservice", "app"=>"siteservice", "base"=>"SiteService-1.0.war"}, "sitebuilder.qa.yola.net"=>{"path"=>"/", "app"=>"sitebuilder", "base"=>"SiteBuilder.war"}}, "timeout"=>5000, "listeners"=>[]}
[2012-05-08 13:44:51 -0400] railsraider: i disabled the firewall but still get chef-server-webui start [FAIL}
[2012-05-08 13:45:08 -0400] linuxboy: [Tue, 08 May 2012 13:44:53 +0000] INFO: {"listeners"=>[], "timeout"=>5000, "port"=>8009, "vhosts"=>{"sitebuilder.qa.yola.net"=>{"app"=>"sitebuilder", "base"=>"SiteBuilder.war", "path"=>"/"}, "siteservice.qa.yola.net"=>{"app"=>"siteservice", "base"=>"SiteService-1.0.war", "path"=>"/siteservice"}, "sitebuilder.livetest.usa-east.yola.net"=>{"base"=>"SiteBuilder.war", "app"=>"sitebuilder", "path"=>"/"}}, "default_host"=>"sitebuilder.qa.yola.net", "java_opts"=
[2012-05-08 13:45:18 -0400] linuxboy: ^^^ yfeldblum two different runs
[2012-05-08 13:46:47 -0400] linuxboy: [Tue, 08 May 2012 13:46:35 +0000] INFO: {"port"=>8009, "vhosts"=>{"sitebuilder.livetest.usa-east.yola.net"=>{"path"=>"/", "base"=>"SiteBuilder.war", "app"=>"sitebuilder"}, "sitebuilder.qa.yola.net"=>{"path"=>"/", "app"=>"sitebuilder", "base"=>"SiteBuilder.war"}, "siteservice.qa.yola.net"=>{"path"=>"/siteservice", "app"=>"siteservice", "base"=>"SiteService-1.0.war"}}, "timeout"=>5000, "java_opts"=>[], "standalone"=>false, "listeners"=>[], "default_host"=>"
[2012-05-08 13:46:50 -0400] sampikesley: railsraider: 'chef-server-webui -e production -p 4040 -L /var/log/chef/server-webui.log' or similar
[2012-05-08 13:46:54 -0400] linuxboy: and again
[2012-05-08 13:49:15 -0400] yfeldblum: linuxboy, what happens if you don't use a node json file, and instead `knife node edit $NODE` and set the node normal-level attributes there?
[2012-05-08 13:50:15 -0400] linuxboy: yfeldblum: that is all currently correct
[2012-05-08 13:50:28 -0400] yfeldblum: linuxboy, hm?
[2012-05-08 13:50:53 -0400] linuxboy: yfeldblum: the attributes are there at the moment, the way I want thm
[2012-05-08 13:50:54 -0400] yfeldblum: linuxboy, i mean, when you run chef-client, don't use a node json file at all, what happens then?
[2012-05-08 13:51:05 -0400] linuxboy: Oh
[2012-05-08 13:51:12 -0400] linuxboy: this json file
[2012-05-08 13:51:20 -0400] linuxboy: I use it when I create the node
[2012-05-08 13:51:27 -0400] linuxboy: knife node from file <json>
[2012-05-08 13:51:34 -0400] linuxboy: I don't use it on the command line
[2012-05-08 13:54:10 -0400] cnf: can i include definitions from other cookbooks in my own cookbook?
[2012-05-08 13:57:04 -0400] cnf: so i can put the creation of users and databases in another cookbook, but use the definitons from the postgres one to do it?
[2012-05-08 13:57:10 -0400] yfeldblum: linuxboy, hmmm ... what version of chef-client?
[2012-05-08 13:57:51 -0400] linuxboy: 0.10.8-2 (ubuntu)
[2012-05-08 13:59:05 -0400] BryanWB: cnf: y
[2012-05-08 13:59:11 -0400] BryanWB: include_recipe "foo"
[2012-05-08 13:59:33 -0400] cnf: hmm, cool
[2012-05-08 13:59:58 -0400] cnf: because it seems to me you'd want to keep your recipe's as generic as possible
[2012-05-08 14:05:48 -0400] hoover_damn: as generic and as most customizeable
[2012-05-08 14:05:49 -0400] hoover_damn: as possible
[2012-05-08 14:06:17 -0400] cnf: yeah, but not put user creation etc in your postgresql cookbook, right
[2012-05-08 14:06:45 -0400] cnf: hoover_damn: btw, i have ditched the official postgresql cookbook. it is broken beyond my understanding
[2012-05-08 14:18:54 -0400] railsraider: yfeldblum: i was missing the 127.0.0.1 localhost in my hosts file chef server webui is working now
[2012-05-08 14:30:00 -0400] railsraider: i get ERROR: RuntimeError: Please set EDITOR environment variable where do i set that?
[2012-05-08 14:30:36 -0400] railsraider: nevermind
[2012-05-08 14:35:05 -0400] cnf: hmz, i really can't find a decent postgresql cookbook :(
[2012-05-08 14:38:29 -0400] hoover_damn: cnf, yep that's why I forked mine
[2012-05-08 14:38:38 -0400] hoover_damn: cnf, It didn't give me 9.1, and it didn't really work
[2012-05-08 14:38:46 -0400] cnf: hoover_damn: oh, is it public?
[2012-05-08 14:38:48 -0400] hoover_damn: cnf, vagrant/chef-solo may complicate your problems
[2012-05-08 14:39:04 -0400] hoover_damn: I've mentioned my fork many times, it's also on cookbooks.opscode.com
[2012-05-08 14:39:43 -0400] hoover_damn: i'll give you a hint, you can find it on github.com/damm
[2012-05-08 14:39:44 -0400] cnf: hoover_damn: probably, but yesterday i was overloaded on information
[2012-05-08 14:40:14 -0400] cnf: i'm sure quite a bit slipped away from me
[2012-05-08 14:40:21 -0400] hoover_damn: cnf, I spent way too long fixing that cookbook
[2012-05-08 14:40:26 -0400] hoover_damn: longer then it should have taken
[2012-05-08 14:40:30 -0400] cnf: ^^;
[2012-05-08 14:40:35 -0400] hoover_damn: but I took the long route, cared about things that others didn't
[2012-05-08 14:40:50 -0400] Brad_K: cnf: too many cooks trying to help out?  i apologize for any confusion that i added to that conversation.  ;-(
[2012-05-08 14:40:51 -0400] hoover_damn: that's why my cookbook pulls off 2.5k TPS on a m1.xlarge
[2012-05-08 14:41:02 -0400] cnf: yeah, everything else so far has been reasonably pain free, except postgres
[2012-05-08 14:41:08 -0400] hoover_damn: cnf, and actually the too many cooks thing is the reason I ditched puppet for chef
[2012-05-08 14:41:22 -0400] cnf: Brad_K: no worries, it was a lot of problems stacked on top of each other
[2012-05-08 14:41:23 -0400] hoover_damn: cnf, I couldn't for the life of me get 1 single straight answer that worked reliabily
[2012-05-08 14:41:29 -0400] cnf: hehe
[2012-05-08 14:42:02 -0400] hoover_damn: I could not take the propritary learning I had at Engine Yard for a postgresql cookbook
[2012-05-08 14:42:19 -0400] hoover_damn: but I could take the opscode cookbook and try and fix it up to the point where it exceeds my old postgresql cookbooks
[2012-05-08 14:42:38 -0400] cnf: uhu
[2012-05-08 14:42:52 -0400] cnf: crap, yours has a lot of options ^^;
[2012-05-08 14:43:04 -0400] hoover_damn: Opscode cookbooks are a great starter cookbook
[2012-05-08 14:43:14 -0400] Brad_K: cnf: be careful what you wish for!  ;-)
[2012-05-08 14:43:26 -0400] hoover_damn: but they have various different patterns and actual working
[2012-05-08 14:43:30 -0400] hoover_damn: is always a variance
[2012-05-08 14:43:55 -0400] hoover_damn: it's best to say that the Opscode cookbooks are a work in progress, and are always being improved.
[2012-05-08 14:44:03 -0400] cnf: can i change the ips it will acceps connections from with yours?
[2012-05-08 14:44:18 -0400] hoover_damn: sure does have a lot of options
[2012-05-08 14:44:22 -0400] hoover_damn: and by default you don't need to set any
[2012-05-08 14:44:40 -0400] hoover_damn: if you want to be completely lazy you can just drop postgresql::server and client on the server role
[2012-05-08 14:44:48 -0400] Brad_K: i would say that most of the cookbooks on the community site are the same way  a good starting point, but not intended for use as-is.
[2012-05-08 14:44:50 -0400] hoover_damn: then find the password in /etc/postgresql/9.1/.org_grok
[2012-05-08 14:44:53 -0400] hoover_damn: for psql
[2012-05-08 14:45:01 -0400] hoover_damn: I default everything to md5 auth, you can override that to trust
[2012-05-08 14:45:06 -0400] hoover_damn: that's why everything is an option
[2012-05-08 14:45:09 -0400] hoover_damn: good defaults
[2012-05-08 14:45:18 -0400] hoover_damn: and when you want to step aside, it won't be in the way
[2012-05-08 14:45:22 -0400] hoover_damn: it helps you achieve it
[2012-05-08 14:45:33 -0400] hoover_damn: that's the whole point of chef to me
[2012-05-08 14:46:10 -0400] Brad_K: so few people understand the value of setting good defaults, so i'm glad to see that there are people in this community who care about that sort of thing.
[2012-05-08 14:46:30 -0400] cnf: hoover_damn: it only allows tcp from localhost, though?
[2012-05-08 14:46:43 -0400] Brad_K: anyway, i'll stop chatting now.  i have a final interview to prepare for.
[2012-05-08 14:46:50 -0400] cnf: Brad_K: good luck
[2012-05-08 14:46:54 -0400] hoover_damn: cnf, yep
[2012-05-08 14:47:00 -0400] cnf: hmm, bummer
[2012-05-08 14:47:08 -0400] hoover_damn: cnf, and 10.x by default
[2012-05-08 14:47:18 -0400] cnf: ah yes!
[2012-05-08 14:47:20 -0400] cnf: i missed that
[2012-05-08 14:47:25 -0400] hoover_damn: cnf, you'll need to modify the bg_hba if you want beyond that
[2012-05-08 14:47:27 -0400] geekbri: Brad_K: good defaults are probably the most important thing!
[2012-05-08 14:47:33 -0400] hoover_damn: but the template is not reaally scoped to change that
[2012-05-08 14:47:38 -0400] cnf: nono, 10.x is fine!
[2012-05-08 14:47:41 -0400] hoover_damn: cnf, so it should be an easy one off change
[2012-05-08 14:47:42 -0400] hoover_damn: lol
[2012-05-08 14:47:48 -0400] cnf: i just overlooked it
[2012-05-08 14:47:50 -0400] hoover_damn: ahh
[2012-05-08 14:48:00 -0400] geekbri: Brad_K: thats why when I wrote my redis cookbook, i made it so that if you just use the default settings, you get what you would expect... an installed instance of redis running on the default port, in the default locations with the default configuration settings!
[2012-05-08 14:48:00 -0400] cnf: vagrant uses 10.x
[2012-05-08 14:48:07 -0400] hoover_damn: there you go
[2012-05-08 14:49:01 -0400] cnf: hmm, so you need another cookbook to make your users and databases, right?
[2012-05-08 14:54:41 -0400] hoover_damn: cnf, database cookbook
[2012-05-08 14:54:54 -0400] hoover_damn: cnf, opscode's database cookbook should work fine in this case
[2012-05-08 14:55:04 -0400] cnf: k
[2012-05-08 14:55:17 -0400] hoover_damn: cnf, for mysql I have a cookbook that does mysql_database... for postgres the same
[2012-05-08 14:55:30 -0400] hoover_damn: cnf, but also sometimes I just end up restoring... which is why that cookbook just does the bare essentials
[2012-05-08 14:55:31 -0400] cnf: so do you use that cookbook from your own cookbook?
[2012-05-08 14:55:46 -0400] cnf: hmm, interesting
[2012-05-08 14:55:50 -0400] hoover_damn: technically that cookbook was made for a client
[2012-05-08 14:55:53 -0400] cnf: lets see if i can figure this out
[2012-05-08 14:56:02 -0400] hoover_damn: they paid very well for the work your using
[2012-05-08 14:56:09 -0400] hoover_damn: so I hope it works as good for you as it does for them
[2012-05-08 14:57:02 -0400] cnf: indeed :P
[2012-05-08 14:57:25 -0400] cnf: hmm, does it change your system swappiness if you don't change that value?
[2012-05-08 14:57:47 -0400] hoover_damn: yes it does
[2012-05-08 14:57:58 -0400] hoover_damn: you'll need my sysctl cookbook to do that
[2012-05-08 14:58:07 -0400] hoover_damn: as my cookbook defaults to that pattern, you can find it in github.com/damm/sysctl
[2012-05-08 14:58:14 -0400] cnf: hmm, not too fond of that, personally ^^;
[2012-05-08 14:58:44 -0400] rabidpraxis7: Does anyone know if there are any resources with how to deal with consolidated billing AWS accounts and chef.
[2012-05-08 14:58:58 -0400] hoover_damn: there's too many variations to the sysctl cookbooks out there
[2012-05-08 14:59:11 -0400] hoover_damn: I kind of take the stance of not caring totally and having an old standby for the moment
[2012-05-08 15:00:01 -0400] cnf: hoover_damn: wait, did you mean it can only change the swapiness if i have the sysctl cookbook present?
[2012-05-08 15:00:32 -0400] hoover_damn: cnf, tbh that cookbook depends on it... you'd have to remove the sysctl command in the cookbook to remove that dependency
[2012-05-08 15:00:48 -0400] cnf: hmm
[2012-05-08 15:01:09 -0400] cnf: balls
[2012-05-08 15:01:32 -0400] hoover_damn: and you really do need that sysctl cookbook
[2012-05-08 15:01:37 -0400] hoover_damn: to use my postgresql cookbook
[2012-05-08 15:01:45 -0400] hoover_damn: I modify kernel.sem, kernel.shmmax kernel.shmall
[2012-05-08 15:05:16 -0400] cnf: huh
[2012-05-08 15:05:21 -0400] cnf: that fails
[2012-05-08 15:05:36 -0400] cnf: hoover_damn: on your cookbook, i think
[2012-05-08 15:06:20 -0400] cnf: Errno::ENOENT: service[postgresql] (postgresql::server_debian line 60) had an error: No such file or directory - /etc/init.d/postgresql-9.1 status
[2012-05-08 15:07:23 -0400] cnf: it's just /etc/init.d/postgresql
[2012-05-08 15:07:25 -0400] cnf: no -91
[2012-05-08 15:07:28 -0400] hoover_damn: it's 9.1
[2012-05-08 15:07:30 -0400] cnf: -9.1
[2012-05-08 15:07:43 -0400] hoover_damn: something didn't work right then
[2012-05-08 15:07:46 -0400] hoover_damn: because it's 9.1
[2012-05-08 15:07:53 -0400] hoover_damn: is this a fresh image?
[2012-05-08 15:07:54 -0400] cnf: it's just called /etc/init.d/postgresql
[2012-05-08 15:07:57 -0400] cnf: yep
[2012-05-08 15:08:15 -0400] hoover_damn: and do you run ubuntu or debian?
[2012-05-08 15:08:16 -0400] hoover_damn: what version?
[2012-05-08 15:08:17 -0400] bawt_: what version are you on
[2012-05-08 15:08:26 -0400] cnf: and running /etc/init.d/postgresql status works
[2012-05-08 15:08:29 -0400] hoover_damn: bawt_, forget version?
[2012-05-08 15:08:30 -0400] bawt_: couldn't find keyword version?
[2012-05-08 15:08:33 -0400] hoover_damn: bawt_, forget version
[2012-05-08 15:08:33 -0400] bawt_: lemme take care of that for you
[2012-05-08 15:08:40 -0400] cnf: Ubuntu 10.04.3 LTS
[2012-05-08 15:08:49 -0400] hoover_damn: cnf, same
[2012-05-08 15:09:04 -0400] hoover_damn: with 9.1.3-1-natty it's 9.1
[2012-05-08 15:09:12 -0400] cnf: hoover_damn: i'll do a vagrant destroy, and up again
[2012-05-08 15:09:16 -0400] hoover_damn: cnf, now i'm using a launchpad ppa for postgresql so it's possible that could change
[2012-05-08 15:09:19 -0400] cnf: fresh image
[2012-05-08 15:09:42 -0400] hoover_damn: cnf, anywho this was tested on 10.04 natty on ec2
[2012-05-08 15:09:49 -0400] hoover_damn: it works on rackspace as well
[2012-05-08 15:09:51 -0400] hoover_damn: on ubuntu oneric
[2012-05-08 15:09:57 -0400] cnf: weird
[2012-05-08 15:09:59 -0400] hoover_damn: those are my testing parameters
[2012-05-08 15:10:06 -0400] hoover_damn: vagrant confuses things
[2012-05-08 15:10:19 -0400] hoover_damn: so it's possible part of your problems are related to vagrant's setup
[2012-05-08 15:10:46 -0400] cnf: vagrant just calls chef-solo
[2012-05-08 15:11:14 -0400] hoover_damn: yep, as root or as vagrant?
[2012-05-08 15:11:38 -0400] cnf: as root, normally
[2012-05-08 15:11:50 -0400] hoover_damn: interesting, seeing comments in here I believed the opposite
[2012-05-08 15:12:07 -0400] hoover_damn: I'm not a vagrant user... i'd rather use lxc or api or whatever
[2012-05-08 15:12:28 -0400] hoover_damn: I just know that it seems to make things more complicated as I see more vagrant users asking questions then others
[2012-05-08 15:12:29 -0400] erikh: vagrant uses sudo
[2012-05-08 15:12:34 -0400] hoover_damn: observation
[2012-05-08 15:12:36 -0400] hoover_damn: such a fun thing
[2012-05-08 15:12:44 -0400] hoover_damn: so does knife
[2012-05-08 15:12:44 -0400] erikh: sudo has its own issues of course
[2012-05-08 15:12:49 -0400] erikh: good point.
[2012-05-08 15:12:50 -0400] cnf: can't use lxc
[2012-05-08 15:12:56 -0400] hoover_damn: right, but in this case sudo was used in both cases
[2012-05-08 15:13:04 -0400] hoover_damn: my ubuntu bootstrap uses sudo
[2012-05-08 15:13:20 -0400] hoover_damn: sudo su -c /bin/bash --login -c '
[2012-05-08 15:13:23 -0400] hoover_damn: '
[2012-05-08 15:13:30 -0400] hoover_damn: yes I'm seriously that obsessive compulsive
[2012-05-08 15:13:45 -0400] hoover_damn: at least my environment is sane on bootstraps
[2012-05-08 15:14:01 -0400] cnf: hoover_damn: fresh setup, same problem
[2012-05-08 15:14:24 -0400] hoover_damn: that makes things more annoying then
[2012-05-08 15:14:25 -0400] cnf: it's created as /etc/init.d/postgresql, and called as /etc/init.d/postgresql-9.1
[2012-05-08 15:14:28 -0400] hoover_damn: but should be easy to fix
[2012-05-08 15:15:18 -0400] hoover_damn: cnf, anywho it's in a loop that is old
[2012-05-08 15:15:30 -0400] hoover_damn: cnf, so it's clear the case statement that I copied from opscode is failing for you
[2012-05-08 15:15:59 -0400] hoover_damn: cnf, https://github.com/damm/postgresql/blob/master/recipes/server_debian.rb#L65
[2012-05-08 15:16:36 -0400] cnf: hoover_damn: yes that is true for postgres 8.3 and 8.4
[2012-05-08 15:16:40 -0400] cnf: not for postgres 9
[2012-05-08 15:16:43 -0400] hoover_damn: cnf, that has always worked for me... not sure why it changed
[2012-05-08 15:16:57 -0400] hoover_damn: cnf, I booted an instance the other day with this and it worked out of the box w/out issue
[2012-05-08 15:17:07 -0400] hoover_damn: cnf, I'm thinking I must not be hitting that case statement right
[2012-05-08 15:17:08 -0400] cnf: hoover_damn: postgres 9? or 8?
[2012-05-08 15:17:10 -0400] hoover_damn: 9.1.3
[2012-05-08 15:17:42 -0400] hoover_damn: ahh
[2012-05-08 15:17:43 -0400] hoover_damn: yep
[2012-05-08 15:17:44 -0400] hoover_damn: chef > node['platform_version'].to_f <= 10.04 => false
[2012-05-08 15:18:10 -0400] pangzi: is there any meterials about "infrastructure lifecycle management"
[2012-05-08 15:18:10 -0400] hoover_damn: hrm, weird, wth I booted natty and yet it says 11.04
[2012-05-08 15:18:26 -0400] hoover_damn: oh right natty is 11.04
[2012-05-08 15:18:28 -0400] hoover_damn: not 10.04
[2012-05-08 15:19:05 -0400] hoover_damn: cnf, so are you on 11.04 or 10.04?
[2012-05-08 15:19:21 -0400] cnf: 10.04
[2012-05-08 15:19:25 -0400] cnf: lucid
[2012-05-08 15:19:30 -0400] hoover_damn: okay, yeah I didn't test lucid
[2012-05-08 15:19:38 -0400] hoover_damn: so you are likely needing to fix that
[2012-05-08 15:20:44 -0400] cnf: hmz
[2012-05-08 15:21:33 -0400] cnf: i need a walk
[2012-05-08 15:22:07 -0400] hoover_damn: yep
[2012-05-08 15:22:10 -0400] hoover_damn: breaks are good
[2012-05-08 15:22:27 -0400] hoover_damn: cnf, might be worth trying a natty basebox just to verify it works and then find a good place to work from
[2012-05-08 15:22:49 -0400] cnf: i have a uhm
[2012-05-08 15:22:53 -0400] cnf: precise? box
[2012-05-08 15:22:57 -0400] cnf: 12.something
[2012-05-08 15:23:00 -0400] cnf: (all LTS)
[2012-05-08 15:23:31 -0400] erikh: I have a precise I built just last night
[2012-05-08 15:23:43 -0400] erikh: base box that is
[2012-05-08 15:23:53 -0400] hoover_damn: as I said I tested oneric and natty.  Anything else in that cookbook may or may not work.
[2012-05-08 15:24:05 -0400] hoover_damn: your free to submit pull requests to fix issues with other distros
[2012-05-08 15:24:23 -0400] cnf: anyway, walk. and contemplate if maybe i should check out puppet. we'll see
[2012-05-08 15:24:27 -0400] hoover_damn: but I honestly wrote it for a client and I don't have a intention of fixing it for every os out there
[2012-05-08 15:24:31 -0400] hoover_damn: there's a lot of os's ;)
[2012-05-08 15:24:50 -0400] hoover_damn: you can spend the rest of your life just making chef recipes work on most distros
[2012-05-08 15:24:56 -0400] hoover_damn: and still not get things the way people want
[2012-05-08 15:25:26 -0400] cnf: heh, i just don't get along with ruby
[2012-05-08 15:25:53 -0400] cnf: anyway, walk!
[2012-05-08 15:25:55 -0400] cnf: bbl
[2012-05-08 15:31:00 -0400] hippiehacker: is it possible to use a not_if written in powershell when on windows?
[2012-05-08 15:57:57 -0400] cnf: bah! rain!
[2012-05-08 16:02:15 -0400] cnf: right
[2012-05-08 16:02:19 -0400] cnf: what shall i do
[2012-05-08 16:07:34 -0400] fafa34: any ideas why my knife search is not working right? when i use, for example, knife search node '*:*' it works and lists all nodes, but when I try to find specific node it wont list anything
[2012-05-08 16:08:19 -0400] specialsauce: fafa34, can you post an example search?
[2012-05-08 16:08:32 -0400] specialsauce: probably syntax error or something
[2012-05-08 16:18:20 -0400] fafa34: specialsauce: knife search node 'name:<nodename>'
[2012-05-08 16:19:24 -0400] ssd7_: fafa34: Is this your own chef server or hosted chef?
[2012-05-08 16:19:28 -0400] fafa34: own
[2012-05-08 16:20:29 -0400] ssd7_: fafa34: Could be the maxFieldLenght bug, one second and I'll find the link
[2012-05-08 16:20:58 -0400] specialsauce: yeah came across that myself
[2012-05-08 16:21:23 -0400] ssd7_: http://tickets.opscode.com/browse/CHEF-2346
[2012-05-08 16:25:31 -0400] fafa34: weird,  ls -la /var/log/chef/expander.log seems to be zero bytes
[2012-05-08 16:27:11 -0400] cnf: damnit, every where i turn, i run into chef errors >,<
[2012-05-08 16:27:15 -0400] oddityoverseer13: hi
[2012-05-08 16:28:24 -0400] oddityoverseer13: I'm working on setting up chef for my organization's infrastructure. My question is: Do people tend to run chef as root, or a separate user?
[2012-05-08 16:28:34 -0400] cnf: hoover_damn: your cookbook seems to fail on Ubuntu 12.04 LTS as well
[2012-05-08 16:28:37 -0400] eherot: oddityoverseer13: it pretty much has to run as root
[2012-05-08 16:28:43 -0400] eherot: at least on the client side
[2012-05-08 16:28:43 -0400] specialsauce: It needs to be able to install packages etc
[2012-05-08 16:28:51 -0400] oddityoverseer13: eherot: that's what I thought
[2012-05-08 16:29:09 -0400] specialsauce: lot of work to make it work as non-root
[2012-05-08 16:29:51 -0400] hoover_damn: cnf, you don't listen well do you?
[2012-05-08 16:30:17 -0400] hoover_damn: cnf, step 1.  Listen and read where I tested, if you are outside of where I ran, your results may vary.
[2012-05-08 16:30:24 -0400] hoover_damn: feel free to submit a pull request with the patch
[2012-05-08 16:30:47 -0400] cnf: yeah, and I did say my ruby knowledge is negligible
[2012-05-08 16:31:04 -0400] hoover_damn: cnf, also in the future if you have a problem posting the actual stacktrace of the failure is helpful.  https://gist.github.com
[2012-05-08 16:31:13 -0400] hoover_damn: cnf, so we can understand better what problem your having
[2012-05-08 16:31:55 -0400] cnf: i'm getting tired of this
[2012-05-08 16:32:44 -0400] hoover_damn: cnf, i can tell your tired and your confused
[2012-05-08 16:33:08 -0400] hoover_damn: cnf, I would suggest trying natty and seeing if that works, or posting more details about your failure.
[2012-05-08 16:33:17 -0400] hoover_damn: as I have no clue what's wrong, nor how to help you
[2012-05-08 16:35:14 -0400] cnf: https://gist.github.com/d982c722070e5cb62535
[2012-05-08 16:36:28 -0400] eherot: cnf: it looks like your cookbook is missing a file
[2012-05-08 16:38:01 -0400] hoover_damn: cnf, lol that recipe went so far left
[2012-05-08 16:38:08 -0400] hoover_damn: cnf, it thinks your on 8.4? LOL is that mine?
[2012-05-08 16:38:18 -0400] cnf: yes, that's yours
[2012-05-08 16:38:34 -0400] hoover_damn: cnf, then how did you get 8.4?
[2012-05-08 16:38:36 -0400] hoover_damn: can't be mine
[2012-05-08 16:38:41 -0400] hoover_damn: mine is 8.3 or 9.1
[2012-05-08 16:38:50 -0400] cnf: idno
[2012-05-08 16:38:54 -0400] hoover_damn: right
[2012-05-08 16:39:06 -0400] cnf: i just changed my ubuntu from 10 to 12
[2012-05-08 16:39:10 -0400] cnf: and that's what it did
[2012-05-08 16:39:23 -0400] hoover_damn: https://github.com/damm/postgresql/blob/master/attributes/default.rb#L31
[2012-05-08 16:39:39 -0400] hoover_damn: if you run 9.0 of ubuntu you get 8.3
[2012-05-08 16:39:41 -0400] hoover_damn: otherwise you get 9.1
[2012-05-08 16:40:13 -0400] hoover_damn: and if you run debian... well I didn't make this cookbook work on debian nor test it, so it is still at 8.4
[2012-05-08 16:41:14 -0400] cnf: I'm just gonna go cry a bit now
[2012-05-08 16:44:14 -0400] akraut: Hey folks, anyone have some insight into the chef-expander and rabbit? I'm terribly inexperienced with rabbit and between the two something is going wrong.
[2012-05-08 16:56:00 -0400] akraut: I'm seeing the "transit" time go through the roof. I just don't know what part of the process is causing it. https://gist.github.com/bd877c5097dc0a2044ca
[2012-05-08 17:02:46 -0400] specialsauce: any Chefs out there using foodcritic?
[2012-05-08 17:03:09 -0400] specialsauce: (http://acrmp.github.com/foodcritic/)
[2012-05-08 17:03:11 -0400] specialsauce: or similar?
[2012-05-08 17:03:34 -0400] miah: tons of us use foodcritic
[2012-05-08 17:04:40 -0400] hoover_damn: foodcritic is the standard
[2012-05-08 17:04:54 -0400] specialsauce: excellent. just about to set up foodcritic. Install a doddle on redhat/centos? Read the install guide
[2012-05-08 17:05:10 -0400] specialsauce: not used rvm before (or even aware what it is)
[2012-05-08 17:06:52 -0400] specialsauce: anyone already put foodcritic in an RPM i guess is my ultimate question?
[2012-05-08 17:08:00 -0400] yfeldblum: why package it in an rpm?  when it's already packaged as a gem
[2012-05-08 17:08:50 -0400] specialsauce: well everything else chef related i have is installed via RPM, even the gems. Without getting into a religious war, i would rather avoid gems if possible
[2012-05-08 17:08:51 -0400] cnf: right, what to do now
[2012-05-08 17:09:16 -0400] specialsauce: i'm loathe to install a different package manage on my system for each language of code
[2012-05-08 17:09:27 -0400] specialsauce: that way lieth hell
[2012-05-08 17:10:25 -0400] yfeldblum: specialsauce, `gem install foodcritic ; foodcritic /path/to/chef-repo/site-cookbooks/my-pride-and-glory-cookbook`
[2012-05-08 17:10:59 -0400] specialsauce: yeah unfortunately the hosts in question do not have internet access
[2012-05-08 17:11:07 -0400] cnf: o,O
[2012-05-08 17:11:23 -0400] specialsauce: is it possible to download a gem like you can with an rpm?
[2012-05-08 17:11:26 -0400] itwasntandy: specialsauce: os just us fpm to turn gems into rpms
[2012-05-08 17:11:27 -0400] specialsauce: thisis a brave new world for me
[2012-05-08 17:11:34 -0400] yfeldblum: specialsauce, your development desktop/laptop doesn't have internet access?
[2012-05-08 17:11:44 -0400] zts: specialsauce: yup, "gem fetch <name>"
[2012-05-08 17:11:46 -0400] specialsauce: yes, that does, but i'm not going to be running foodcritic locally
[2012-05-08 17:11:49 -0400] specialsauce: ok, cheers
[2012-05-08 17:11:50 -0400] itwasntandy: shttps://github.com/jordansissel/fpm
[2012-05-08 17:11:51 -0400] itwasntandy: er
[2012-05-08 17:11:51 -0400] itwasntandy: https://github.com/jordansissel/fpm
[2012-05-08 17:11:53 -0400] yfeldblum: specialsauce, why?
[2012-05-08 17:12:03 -0400] specialsauce: jenkins pipeline on build host
[2012-05-08 17:12:07 -0400] specialsauce: thanks guys
[2012-05-08 17:12:16 -0400] specialsauce: i can work witht he above, land of ruby is very new to me
[2012-05-08 17:13:39 -0400] itwasntandy: specialsauce: fpm is designed for your needs it sounds
[2012-05-08 17:14:25 -0400] itwasntandy: fpm -s gem -t rpm ....
[2012-05-08 17:14:36 -0400] specialsauce: excellent thanks!
[2012-05-08 17:15:57 -0400] cnf: machines without internet access are weird ^^;
[2012-05-08 17:16:13 -0400] itwasntandy: cnf: quite normal
[2012-05-08 17:16:22 -0400] specialsauce: it happens in the corporate qorld quite a lot
[2012-05-08 17:16:29 -0400] specialsauce: network separation etc
[2012-05-08 17:17:10 -0400] miah: indeed. good security practices =)
[2012-05-08 17:17:15 -0400] specialsauce: yep
[2012-05-08 17:17:17 -0400] cnf: hey, i'm an admin there
[2012-05-08 17:17:36 -0400] cnf: any machine that needs to install stuff can get that stuff, directly or through proxies
[2012-05-08 17:17:39 -0400] geekbri: if it doesn't need access to the internet then why give it that access :)
[2012-05-08 17:18:05 -0400] cnf: if it needs chef, it needs some access, generally
[2012-05-08 17:18:21 -0400] specialsauce: this is internal chef-server, not hosted
[2012-05-08 17:18:28 -0400] specialsauce: different courses, different horses
[2012-05-08 17:18:40 -0400] cnf: whatever, i'm not gonna design your network
[2012-05-08 17:18:56 -0400] miah: you really learn this lesson when you are dealing with a remote office on a low bandwidth connection.. let a virus spread because of open firewalls and you can't fix it..
[2012-05-08 17:19:11 -0400] specialsauce: hehe
[2012-05-08 17:19:14 -0400] geekbri: sounds miserable.
[2012-05-08 17:19:22 -0400] cnf: networking isn't black or white
[2012-05-08 17:19:30 -0400] jschoolcraft: is there a way to specify multiple roles with the pg cookbook?  I know it uses alter role for postgresql::server, but I'd like to set up the db role and database I expect to use.
[2012-05-08 17:20:00 -0400] cnf: jschoolcraft: what postgres cookbook are you using?
[2012-05-08 17:20:07 -0400] jschoolcraft: fnichols
[2012-05-08 17:20:09 -0400] cnf: i can't find any that work
[2012-05-08 17:21:50 -0400] jschoolcraft: cnf: fnichols works for me. in a vagrant setup and chef-solo rsync'd to a VPS and run locally.
[2012-05-08 17:22:10 -0400] cnf: jschoolcraft: yeah, that's what i'm trying to do
[2012-05-08 17:24:47 -0400] cnf: right, 11 hours into it, lets try another cookbook
[2012-05-08 17:26:08 -0400] geekbri: ive used fnichols rvm cookbook, he generally writes pretty good cookbooks
[2012-05-08 17:27:36 -0400] cnf: oh, ffs!
[2012-05-08 17:27:40 -0400] cnf: why are they ALL broken!
[2012-05-08 17:28:10 -0400] cnf: >,<
[2012-05-08 17:28:37 -0400] geekbri: 11 hours, sounds like you could have written your own :)
[2012-05-08 17:28:38 -0400] cnf: so fnichol postgresql cookbook is broken as well
[2012-05-08 17:28:40 -0400] cnf: bah
[2012-05-08 17:28:52 -0400] cnf: geekbri: except i don't get along with ruby well
[2012-05-08 17:29:00 -0400] geekbri: well learn to :-P
[2012-05-08 17:29:18 -0400] cnf: i'd rather not
[2012-05-08 17:29:59 -0400] geekbri: well i think its a bad idea to now know how to write your own cookbooks or modify existing ones, if you are unwilling to do that... that yes things like this will happen
[2012-05-08 17:30:15 -0400] hoover_damn: cnf, sounds like the problem is with you
[2012-05-08 17:30:17 -0400] hoover_damn: and not the cookbooks
[2012-05-08 17:30:44 -0400] cnf: hoover_damn: yes, they all do batshit things because i run them
[2012-05-08 17:31:33 -0400] geekbri: I've had to heavily modify or fork tons of cookbooks for them to suite my needs.
[2012-05-08 17:31:34 -0400] cnf: they insist on running before everything else, even apt-get update, just because i'm the one using them
[2012-05-08 17:31:45 -0400] geekbri: I think learning how to write or at least modify cookbooks is fairly essential to using chef.
[2012-05-08 17:32:03 -0400] eherot: geekbri: seconded.  I don't think we have a single cookbook that's completely "stock"
[2012-05-08 17:32:11 -0400] geekbri: I have maybe a handeful.
[2012-05-08 17:32:40 -0400] jschoolcraft: Okay, I found postgresql_user and _database, what am I doing wrong here: https://gist.github.com/7d81e6f3bbe81c78bb9d  It finds the recipe, but doesn't look like it's trying to execute them.  I'm sure it's stupidity on my part.
[2012-05-08 17:34:40 -0400] cnf: bah to learning yet another language :/
[2012-05-08 17:34:51 -0400] eherot: cnf: there are worse ones to have to learn :-)
[2012-05-08 17:35:19 -0400] geekbri: just pick up the oreilly book that was written by flannigan and matz, read like... the first 5 chapters.  You should have no problems after that.
[2012-05-08 17:35:39 -0400] cnf: eherot: yes, but i'm not touching php
[2012-05-08 17:35:41 -0400] paulmooring: cnf: You can get by modifying cookbooks without needing much more than just the basics of Ruby
[2012-05-08 17:36:15 -0400] hoover_damn: cnf, well if it's running before apt-get your apt cookbook it out of date
[2012-05-08 17:36:28 -0400] zts: http://wiki.opscode.com/display/chef/Just+Enough+Ruby+for+Chef # and what paulmooring said
[2012-05-08 17:36:29 -0400] hoover_damn: cnf, make sure you have apt 1.4.0
[2012-05-08 17:36:38 -0400] cnf: hoover_damn: latest, latest official ops-code cookbooks
[2012-05-08 17:36:41 -0400] hoover_damn: cnf, I noticed a similar problem with the apt cookbook around 1.2.1
[2012-05-08 17:36:52 -0400] cnf: hoover_damn: and fnichol's ones as well
[2012-05-08 17:37:01 -0400] hoover_damn: https://github.com/opscode-cookbooks/apt
[2012-05-08 17:37:11 -0400] hoover_damn: so it should be 1.4.2
[2012-05-08 17:37:19 -0400] cnf: yes, i have that
[2012-05-08 17:37:33 -0400] hoover_damn: do note... that is 1.4.2, this is 1.4.0 https://github.com/opscode/cookbooks/tree/master/apt
[2012-05-08 17:37:40 -0400] hoover_damn: so please be aware of where your pulling from
[2012-05-08 17:37:46 -0400] cnf: hoover_damn: a lot of the postgres cookbooks ignore everything, and have a bit that forces them to run before everything else
[2012-05-08 17:38:04 -0400] hoover_damn: it just /works/
[2012-05-08 17:38:12 -0400] cnf: hoover_damn: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/client.rb#L37
[2012-05-08 17:38:30 -0400] hoover_damn: cnf, yeah that trick shouldn't be required
[2012-05-08 17:38:43 -0400] hoover_damn: imo
[2012-05-08 17:38:49 -0400] cnf: but both the opscode one as many many others do that
[2012-05-08 17:39:01 -0400] hoover_damn: remember people copy and paste from opscode
[2012-05-08 17:39:20 -0400] paulmooring: cnf: I think some of those cookbooks do that for special considerations in production environments
[2012-05-08 17:39:42 -0400] cnf: paulmooring: i still say it is a bad, bad idea
[2012-05-08 17:39:58 -0400] cnf: if you can't get your repository set up right before hand, you have issues
[2012-05-08 17:41:42 -0400] zts: if you read the readme for that cookbook, it explains why it does those installs during the compile phase
[2012-05-08 17:42:17 -0400] zts: namely, so that the database cookbook's LWRPs can work in the same run as the install happens
[2012-05-08 17:43:09 -0400] cnf: meh, this is way too much for me to take in all at once
[2012-05-08 17:43:42 -0400] yfeldblum: cnf, trying to use chef without learning ruby as you go is like trying to pilot an F-16 while painting over the windshield and taping down all the controls
[2012-05-08 17:44:00 -0400] yfeldblum: cnf, if you want to use chef, then ruby will be your new shell
[2012-05-08 17:44:29 -0400] cnf: yfeldblum: great, then i should probably try puppet
[2012-05-08 17:45:19 -0400] cnf: i'm trying to learn python semi decent, i'm not going to go try and learn ruby at the same bloody time
[2012-05-08 17:45:24 -0400] cnf: it's confusing enough as it is
[2012-05-08 17:45:40 -0400] Urocyon: cnf: consider saltstack
[2012-05-08 17:45:50 -0400] Urocyon: http://saltstack.org/
[2012-05-08 17:46:18 -0400] Urocyon: not quite as well along as chef and lacks the broader community but maybe suitable to your needs.
[2012-05-08 17:46:29 -0400] Urocyon: You can find chat about it in #salt
[2012-05-08 17:46:38 -0400] Urocyon: That way you can stick to python.
[2012-05-08 17:46:48 -0400] gsat: http://tickets.opscode.com/browse/CHEF-1736, Windows client crashes in Daemonizing mode, This is blocking my chef usage on windows, Is there a way i can get 0.10.10 Beta packages?
[2012-05-08 17:47:13 -0400] cnf: Urocyon: i'll have a look at that, thanks
[2012-05-08 17:47:35 -0400] cnf: Urocyon: i'm not good with a brain on information overload
[2012-05-08 17:47:48 -0400] Urocyon: A couple of guys I work with really like it.   We might have gone that way, if it had been further along when I needed configuration management.
[2012-05-08 17:50:30 -0400] yfeldblum: cnf, if you want to use apache, you will of course need to learn the apache configuration language; if you want to use puppet, you will need to learn its language (and the ruby dsl too); if you want to use any tool, you will have to learn the tool
[2012-05-08 17:51:08 -0400] geekbri: to try to learn to use chef, or any CM without learning the DSL it uses seems....... misguided
[2012-05-08 17:56:25 -0400] zts: the recipe DSL, sure
[2012-05-08 17:57:31 -0400] jschoolcraft: how do you use postgresql_user or postgresql_database?  I added them to my main/recipes/default.rb and runlist includes recipe[main], it looks like it's loading the recipe, but not creating the user/db.
[2012-05-08 17:57:45 -0400] zts: I'm surprised that it makes me contrarian, but "If you're not prepared to learn ruby, you shouldn't be using Chef" sounds like a new attitude to me
[2012-05-08 17:58:01 -0400] zts: I could have sworn it used to be "Hey we have this DSL.  By the way, it's just Ruby so if you know that, go nuts."
[2012-05-08 17:58:18 -0400] miah: yup
[2012-05-08 17:58:23 -0400] paulmooring: zts: I think for many that's still the attitude
[2012-05-08 17:58:51 -0400] cnf: jschoolcraft: i just made my own cookbook, and put them in the default.rb, and loaded the cookbook in my Vagrant file
[2012-05-08 18:00:03 -0400] Urocyon: I found learning chef a bit like trying to eat a jawbreaker that was bigger than my mouth.   It can be a lot to take in.
[2012-05-08 18:00:06 -0400] yfeldblum: zts, you can certainly get basic stuff done with basic knowledge of the chef recipe EDSL and without broader knowledge of ruby
[2012-05-08 18:00:21 -0400] hoover_damn: years*
[2012-05-08 18:00:34 -0400] cnf: zts: i got no problem learning a bit of DSL, but in my first day of chef, (and tbf all related to postgresql recipies) i have been confronted with way more than just simple ruby as a DSL
[2012-05-08 18:00:46 -0400] zts: Urocyon: yeah, the learning curve was painful.  But I found that a consequence of the architecture and the model, not the implementation language
[2012-05-08 18:00:55 -0400] cnf: everything else has been rather smooth
[2012-05-08 18:01:01 -0400] cnf: except postgresql stuff
[2012-05-08 18:01:14 -0400] zts: cnf: yeah, I don't think your frustration is misplaced or unreasonable
[2012-05-08 18:01:18 -0400] yfeldblum: zts, but if you're running into problems with other people's cookbooks, or you're trying to do advanced things, then knowing ruby will be very helpful here and not knowing ruby will make finding solutions much harder than it needs to be
[2012-05-08 18:01:39 -0400] cnf: yfeldblum: since when is wanting to install a db "advanced things!?
[2012-05-08 18:01:42 -0400] Urocyon: zts: mostly the same, but I didn't know ruby very well either, which was an additional hurdle.
[2012-05-08 18:01:43 -0400] cnf: >,<
[2012-05-08 18:02:16 -0400] yfeldblum: cnf, "if you're running into problems with other people's cookbooks"
[2012-05-08 18:02:38 -0400] Urocyon: cnf: since the authors of the postgresql cookbook decided to break it, so it didn't work by itself.
[2012-05-08 18:02:50 -0400] cnf: Urocyon: hehe
[2012-05-08 18:03:39 -0400] zts: yfeldblum: yep, I don't disagree - I'm just saying that the status quo is unnecessarily (and often inadvertently) hostile to new users
[2012-05-08 18:03:51 -0400] hippiehacker: any thoughts on trying to only_if/not_if using powershell?
[2012-05-08 18:03:53 -0400] yfeldblum: cnf, it's not expected that *all* your needs can be solved by third-party cookbooks, only that *many* can be solved that way ... you're still expected to write your own cookbooks & recipes, and to be able to fork & fix third-party cookbooks that are mostly there but not all the way
[2012-05-08 18:04:10 -0400] zts: and the more we fob it off with "Well, if you knew more Ruby you could sort it out" and "Well, you shouldn't expect anything to work out of the box", the less inclined we - as a community - are towards making the new user experience nicer
[2012-05-08 18:04:32 -0400] zts: I'm over that hump, so it's not really a practical problem for me any more, but I still think the status quo sucks
[2012-05-08 18:04:43 -0400] cnf: yfeldblum: this is still in my first 24 hours of chef, my very FIRST hour ran me into a problem using a opscode example cookbook that baffled everyone here at the time for many hours
[2012-05-08 18:05:03 -0400] Urocyon: alas, hippiehacker, I haven't tried chef on windows.
[2012-05-08 18:05:18 -0400] yfeldblum: cnf, i'm including opscode cookbooks in "third-party cookbooks"
[2012-05-08 18:05:50 -0400] cnf: yfeldblum: oh, then you are saying ALL cookbooks
[2012-05-08 18:06:05 -0400] cnf: zts: and yes, i agree
[2012-05-08 18:06:37 -0400] cnf: zts: i must say, some people here have been WAY patient and trying to help, which honestly is why i am still here.
[2012-05-08 18:06:41 -0400] zts: cnf: the right attitude today is that Chef is a great component to build into your infrastructure, and there's loads of cookbooks that provide a good starting point for you to customise.  But there's not a lot that you can just assemble like building blocks, and have everything work
[2012-05-08 18:06:53 -0400] yfeldblum: cnf, just the cookbooks you didn't write yourself
[2012-05-08 18:07:14 -0400] zts: cnf: in practice, I found that the amount of ruby I needed to pick up was pretty minimal compared to understanding the model Chef implements, and how the pieces fit together
[2012-05-08 18:07:30 -0400] hoover_damn: cnf, the postgresql on debian/ubuntu is a very tough target
[2012-05-08 18:07:35 -0400] zts: cnf: but it's definitely something that is better treated as a component that you build around, than a product that you configure
[2012-05-08 18:07:41 -0400] cnf: hoover_damn: so it seems, yes
[2012-05-08 18:07:50 -0400] hoover_damn: cnf, I spent roughly 12hours building my cookbook and it's not bug proof to me
[2012-05-08 18:07:51 -0400] zts: (in my opinion)
[2012-05-08 18:07:54 -0400] yfeldblum: cnf, the cookbooks you write yourself will probably be written with your infrastructure in mind as the target, with all its quirks and intricacies ... the cookbooks others write (including opscode) are written with generic infrastructures in mind, or their own infrastructures, and may in some cases not mesh well with your infrastructure
[2012-05-08 18:08:15 -0400] hoover_damn: cnf, part of the bugs I experience are with the debian package not being able to be configured before hand.
[2012-05-08 18:08:26 -0400] hoover_damn: cnf, but it is a very complicated and confusing setup
[2012-05-08 18:08:45 -0400] hoover_damn: cnf, I'm no postgresql newb... had a boss send me to bootstrap a few years ago so I don't think i'm stupid
[2012-05-08 18:08:47 -0400] cnf: hoover_damn: it sure as hell is confusing the shit out of me :P
[2012-05-08 18:08:49 -0400] hoover_damn: cnf, it was /rough/
[2012-05-08 18:08:57 -0400] zts: I dream of the day where we have pervasive testing of cookbooks
[2012-05-08 18:09:07 -0400] cnf: and i am a postgres newb ^^;
[2012-05-08 18:09:08 -0400] hoover_damn: cnf, I've been doing chef for 2 years now and that postgresql cookbook had me pegged for 3 days straight
[2012-05-08 18:09:10 -0400] zts: and things like CPAN Testers reporting whether cookbooks work (or don't) on each platform and chef version
[2012-05-08 18:09:20 -0400] zts: (a la http://www.cpantesters.org/distro/C/Catalyst-Runtime.html#Catalyst-Runtime-5.90011 )
[2012-05-08 18:09:28 -0400] cnf: hoover_damn: heh, that offers me some comfort ^^;
[2012-05-08 18:09:33 -0400] hoover_damn: cnf, I told my client next time I build a postgresql cookbook it better not be on #@!#!@ ubuntu
[2012-05-08 18:10:06 -0400] hoover_damn: cnf, part #1, postgresql starts on package install.  Which means if you reconfigure it you absolutely step outside the bus
[2012-05-08 18:10:36 -0400] hoover_damn: cnf, so if you seriously just want postgresql you should just package "postgresql-server" and contrib and client
[2012-05-08 18:10:43 -0400] hoover_damn: cnf, and that'll give you a basic server that's running
[2012-05-08 18:11:03 -0400] hoover_damn: cnf, and from there you can learn (or break more brain cells)
[2012-05-08 18:11:30 -0400] cnf: what do you mean by "just package postgresql-server" ?
[2012-05-08 18:11:49 -0400] cnf: (and yes, atm i just want a basic postgres on a vm to play with)
[2012-05-08 18:11:52 -0400] hoover_damn: if you just want postgresql with nothing setup, no configuration changes, nothing major
[2012-05-08 18:12:12 -0400] cnf: right
[2012-05-08 18:12:24 -0400] cnf: just postgres, started, addressable from 10.x
[2012-05-08 18:12:30 -0400] cnf: with a known password :P
[2012-05-08 18:12:55 -0400] hoover_damn: cnf, package "postgresql" will install postgresql and start it without any passwords
[2012-05-08 18:13:33 -0400] hoover_damn: as far as the rest, I don't know of anything off the top of my head that simple that I haven't suggested already
[2012-05-08 18:13:36 -0400] hoover_damn: and had fail
[2012-05-08 18:14:22 -0400] cnf: so (as happens so often for me ^^;) i chose one of the most difficult places to jump in with ^^;
[2012-05-08 18:15:01 -0400] hoover_damn: so basically what you need is the package, to template pg_hba, and alter the password
[2012-05-08 18:15:07 -0400] hoover_damn: and restart postgresql so far
[2012-05-08 18:15:11 -0400] hoover_damn: small order
[2012-05-08 18:15:14 -0400] cnf: uhu
[2012-05-08 18:15:26 -0400] cnf: i'm guessing sqlalchemy will do the rest, once i get connected
[2012-05-08 18:16:12 -0400] cnf: (sqlalchemy is a pyton database abstraction thing)
[2012-05-08 18:16:58 -0400] cnf: right, little brake, let my brain cool down ^^;
[2012-05-08 18:17:09 -0400] cnf: hoover_damn: thanks for your patience so far.
[2012-05-08 18:17:48 -0400] cnf: it's nice to have something/one stable when confusion reigns your brain
[2012-05-08 18:23:04 -0400] hippiehacker: http://tickets.opscode.com/browse/COOK-1267
[2012-05-08 18:25:41 -0400] jschoolcraft: bah, can't figure out why postgresql_user and postgresql_database aren't being called from my recipe.  any tips to debug?
[2012-05-08 18:26:42 -0400] geekbri: zts: I wasn't necessarily saying you HAD to learn ruby to use chef. It just seems like a bad idea to me not to at least learn the DSL for cookbooks fairly well... simply because there is a need to modify cookbooks frequently in real use cases I think
[2012-05-08 18:27:10 -0400] eherot: jschoolcraft: is the recipe itself in the run list for that server or is it only being called via "include?"
[2012-05-08 18:27:29 -0400] geekbri: zts: or even sometimes you just need to know HOW a cookbook is doing something and maybe the documentation isn't giving you enough information
[2012-05-08 18:27:30 -0400] yfeldblum: hippiehacker, not_if "powershell Get-Service '#{service_name}'" ?
[2012-05-08 18:27:59 -0400] jschoolcraft: eherot: it's in my main/recipes/default.rb and recipe[main] is in the runlist.
[2012-05-08 18:28:27 -0400] hippiehacker: yfeldblum: that would be awesome
[2012-05-08 18:28:28 -0400] eherot: do you have one recipe that has many includes?
[2012-05-08 18:29:10 -0400] hippiehacker: probably work for now, but I can imagine more complex examples
[2012-05-08 18:29:51 -0400] geekbri: just like the docs say, that learning the DSL is like learning a little ruby, at that point you can just peak the tiniest bit further into ruby and things become a lot more clear
[2012-05-08 18:29:55 -0400] yfeldblum: hippiehacker, if you need a more complex example, then `not_if` isn't the right tool for the job anyway
[2012-05-08 18:33:33 -0400] hippiehacker: yfeldblum: maybe
[2012-05-08 18:33:51 -0400] mjreed: Does Hosted Chef have any audit capability?  Who changed this node's run list when, etc?
[2012-05-08 18:34:47 -0400] yfeldblum: hippiehacker, if you need a more complex example, you can always drop a script off on the filesystem beforehand and have not_if delegate to the script ... or, and this is phenomenally the best approach ever, anyway, write not_if with a Ruby block and Ruby code inside (don't know if it's possible on Windows though)
[2012-05-08 18:35:16 -0400] jschoolcraft: eherot: no, https://gist.github.com/7d81e6f3bbe81c78bb9d
[2012-05-08 18:36:34 -0400] cwj: mjreed: not to my knowledge
[2012-05-08 18:38:15 -0400] eherot: jschoolcraft: btw if you're ever skeptical that your recipe is not being picked up you can always add something like this to it:
[2012-05-08 18:38:16 -0400] eherot: Chef::Log.debug "Starting this recipe"
[2012-05-08 18:38:24 -0400] eherot: and it will get printed with the output
[2012-05-08 18:40:41 -0400] eherot: you might want to try that here
[2012-05-08 18:46:47 -0400] mjreed: @cwj: thanks..
[2012-05-08 18:49:08 -0400] jschoolcraft: eherot: yeah, that recipe isn't getting called.
[2012-05-08 18:49:49 -0400] eherot: jschoolcraft: the recipe as you described it is definitely in the run list.  Are you sure it's being stored in chef?
[2012-05-08 18:50:57 -0400] jschoolcraft: yeah, and I see it processing package "vim-nox" which is in that recipe.
[2012-05-08 18:51:06 -0400] BryanWB_: ohai chefs!
[2012-05-08 18:53:35 -0400] eherot: jschoolcraft: I saw that too but perhaps an older copy of it?
[2012-05-08 18:54:08 -0400] jschoolcraft: well, i cat'd the recipe and it's showing the changes.  I'm rsyncing cookbooks to the server and running with chef-solo
[2012-05-08 18:55:59 -0400] rayrod2030: Anybody using the rsyslog cookbook or something similar for rhel?
[2012-05-08 18:57:04 -0400] BryanWB_: rayrod2030 i have modified it to support rhel
[2012-05-08 18:58:03 -0400] eherot: jschoolcraft: you'll notice it's not handling the python-software-properties package either
[2012-05-08 18:58:25 -0400] rayrod2030: BryanWB_ did you run into any issues with rsyslog not being able to parse rsyslog.conf?
[2012-05-08 18:58:48 -0400] BryanWB_: rayrod2030, no, here is what i have https://github.com/bryanwb/rsyslog
[2012-05-08 18:58:53 -0400] geekbri: rsyslog is a curse word to me right now.
[2012-05-08 18:59:01 -0400] eherot: is it possible that some other recipe is installing most of these packages?
[2012-05-08 18:59:10 -0400] geekbri: heres a cute tidbit of information, if you define a rule twice it runs both rules, one does not overwrite the other.
[2012-05-08 18:59:17 -0400] geekbri: so keep that in mind when using rsyslog
[2012-05-08 18:59:18 -0400] BryanWB_: geekbri, whoah
[2012-05-08 18:59:26 -0400] BryanWB_: geebri, do u use syslog-ng?
[2012-05-08 18:59:50 -0400] geekbri: i use rsyslog, i just have a rage towards it currently
[2012-05-08 19:00:12 -0400] BryanWB_: geekbri have u ever tried mathcing on regexes?
[2012-05-08 19:00:47 -0400] geekbri: BryanWB_: haven't had to yet, we are sending logs to local facilities that we just ship off wholesale
[2012-05-08 19:00:50 -0400] BryanWB_: rather than local#? I need to split my logs from haproxy by virtual host
[2012-05-08 19:01:09 -0400] geekbri: but yes, if you were to define two entries for say /var/log/messages... it would send the information there twice
[2012-05-08 19:01:21 -0400] geekbri: so that is an important behavior that you won't find in its crap documentation
[2012-05-08 19:01:57 -0400] rayrod2030: BryanWB_ Thank you kind sir.
[2012-05-08 19:02:26 -0400] atomic-penguin: so is the application_ruby cookbook in beta, or just not on the community site yet?
[2012-05-08 19:05:20 -0400] BryanWB_: atomic-penguin it was very recently rewritten
[2012-05-08 19:05:23 -0400] eherot: jschoolcraft: and you've verified that the copy of the cookbook in /var/chef/cookbooks/main/recipes/default.rb is the same as the one pasted in this gist?
[2012-05-08 19:05:44 -0400] jschoolcraft: yeah, renamed the cookbook and am tracking down errors
[2012-05-08 19:08:58 -0400] qhartman: I added some raw ruby to a recipe to handle a situation that was not well handled by any existing resources. One of the tests it does is check for the existence of certain files. When running chef, if those files do not exist, I see the warnings about them missing right at the top of the chef run, which is totally out of order in terms of how the recipe is structured. If the files do exist, they get processed in the appropr
[2012-05-08 19:08:58 -0400] qhartman: iate place in terms of order of operations. Any idea why that would be?
[2012-05-08 19:09:38 -0400] Brad_K: qhartman: read http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-05-08 19:09:48 -0400] jschoolcraft: eherot: much better, need ruby-shadow installed :)
[2012-05-08 19:10:03 -0400] qhartman: Brad_K, Thanks for hte pointer
[2012-05-08 19:10:11 -0400] Brad_K: np
[2012-05-08 19:10:28 -0400] eherot: jschoolcraft: you'd think it would complain about that...
[2012-05-08 19:15:04 -0400] yfeldblum: anatomy?
[2012-05-08 19:15:05 -0400] bawt_: anatomy is http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-05-08 19:15:28 -0400] jschoolcraft: eherot: oh, it's complaining quite loudly now, looks like I had an old version of main around and rsync was deleting on the destination
[2012-05-08 19:15:48 -0400] eherot: jschoolcraft: ok so I wasn't completely off base ;-)
[2012-05-08 19:16:06 -0400] jschoolcraft: eherot: nope, thanks.
[2012-05-08 19:16:14 -0400] jschoolcraft: any recommendations for ruby-shadow?
[2012-05-08 19:17:45 -0400] eherot: sudo apt-get install libshadow-ruby1.8 if you're running ruby1.8
[2012-05-08 19:20:42 -0400] jschoolcraft: running 1.9.2 in rvm
[2012-05-08 19:21:27 -0400] eherot: in that case gem install shadow I do believe
[2012-05-08 19:21:55 -0400] eherot: although there you're venturing outside the realm of my experience because I've never done the chef+rvm thing
[2012-05-08 19:23:26 -0400] yfeldblum: `gem install ruby-shadow; ruby -e 'require "shadow"'`
[2012-05-08 19:34:03 -0400] rayrod2030: what version of rsyslog are you guys running?
[2012-05-08 19:34:06 -0400] rayrod2030: 4.6.2?
[2012-05-08 19:34:20 -0400] yfeldblum: atomic-penguin, still unreleased
[2012-05-08 19:34:30 -0400] atomic-penguin: :(
[2012-05-08 19:36:25 -0400] yfeldblum: atomic-penguin, https://gist.github.com/1063e22ba2e6c349bd48 :P
[2012-05-08 19:36:46 -0400] atomic-penguin: yfeldblum, right-o
[2012-05-08 19:36:51 -0400] cwj: anyone have some example code for raid striping ec2 ephemeral storage with chef?
[2012-05-08 19:37:11 -0400] rayrod2030: I'm still having issues starting rsyslog even using BryanWB's fork of it.
[2012-05-08 19:37:13 -0400] atomic-penguin: yfeldblum, doing a gitlab cookbook, and assuming consumers aren't using librarian
[2012-05-08 19:40:45 -0400] hoover_damn: cwj, i do that in local.start not chef
[2012-05-08 19:42:09 -0400] cwj: local.start being a script you bake into your AMI?
[2012-05-08 19:42:54 -0400] hoover_damn: yup
[2012-05-08 19:43:15 -0400] hoover_damn: it feels more amish then chef for ephemeral
[2012-05-08 19:43:24 -0400] cwj: yeah i can dig that
[2012-05-08 19:43:47 -0400] jschoolcraft: can you have an array of hashes in JSON? trying: https://gist.github.com/3d7ea6f16b8ecebb5826
[2012-05-08 19:43:48 -0400] cwj: i am not building my own AMIs right now, so just trying to figure out what my next move is
[2012-05-08 19:44:32 -0400] geekbri: cwj: I raid stripe ephemerals using LVM with the lvm and volumes cookbooks from here https://github.com/kohder
[2012-05-08 19:45:01 -0400] cwj: cool, thanks geekbri
[2012-05-08 19:45:06 -0400] geekbri: np
[2012-05-08 19:45:45 -0400] geekbri: cwj: i can show you examples of how I use it if you need it as well
[2012-05-08 19:45:57 -0400] qhartman: Brad_K, So I've gotten my ruby code wrapped in a ruby_block, but resources I refer to in that block fail. I assume this means that those resources have to be outside the block to work, or is there another way around this?
[2012-05-08 19:46:09 -0400] cwj: geekbri: im sure that would be helpful if you dont mind
[2012-05-08 19:46:23 -0400] geekbri: cwj: what size instance are you using?
[2012-05-08 19:46:41 -0400] cwj: m1.large
[2012-05-08 19:46:53 -0400] hoover_damn: cwj, ubuntu
[2012-05-08 19:46:56 -0400] hoover_damn:  ?
[2012-05-08 19:46:59 -0400] cwj: yeah
[2012-05-08 19:47:04 -0400] cwj: lucid for now
[2012-05-08 19:47:14 -0400] hoover_damn: so you have all 4 disks?
[2012-05-08 19:47:31 -0400] hoover_damn: natty and newer only attach 1 ephemeral
[2012-05-08 19:47:44 -0400] cwj: i think i just have sdb and sdc
[2012-05-08 19:47:46 -0400] hoover_damn: so you have to modify the block mapping
[2012-05-08 19:48:01 -0400] hoover_damn: you shouldnhave sdb, sdc, sdd, sde
[2012-05-08 19:48:02 -0400] geekbri: m1.large is only 2 ephemeral drives
[2012-05-08 19:48:08 -0400] geekbri: m1.xlarge is 4 ?
[2012-05-08 19:48:10 -0400] cwj: i think you need xlarge for 4
[2012-05-08 19:48:14 -0400] hoover_damn: on c1.xlarge
[2012-05-08 19:48:45 -0400] hoover_damn: block mapping is weird here
[2012-05-08 19:48:54 -0400] geekbri: i use m1.xlarges and m1.large a ton, m1.large is 2, m1.xlarge is 4
[2012-05-08 19:48:59 -0400] hoover_damn: most instances have 4 but some have 2
[2012-05-08 19:49:33 -0400] hoover_damn: different sizes and speed too!
[2012-05-08 19:49:45 -0400] cwj: a world of possibilities
[2012-05-08 19:49:53 -0400] geekbri: cwj: https://gist.github.com/2638827
[2012-05-08 19:50:00 -0400] geekbri: cwj: thats the data bag entry, let me fine a role file i use so you can see that as well
[2012-05-08 19:50:01 -0400] cwj: thanks!
[2012-05-08 19:50:03 -0400] hippiehacker: https://gist.github.com/77208d31bf9335fa2e56
[2012-05-08 19:50:07 -0400] geekbri: that shoudl work well for a m1.large
[2012-05-08 19:50:17 -0400] hippiehacker: still having trouble using powershell in not_if
[2012-05-08 19:50:38 -0400] Brad_K: qhartman: sorry, i wasn't watching this window.  what was the question again?
[2012-05-08 19:51:15 -0400] qhartman: Brad_K, Inside the ruby_block, any resources I try to use fail. Do I need to move those outside the block, or is there another way around that?
[2012-05-08 19:51:37 -0400] geekbri: cwj: https://gist.github.com/2638827  updated the gist with the exact data bag entry and role file I use
[2012-05-08 19:51:49 -0400] cwj: very cool, thanks again
[2012-05-08 19:52:06 -0400] geekbri: cwj: the only flaw i've found with it so far, is if you start / stop your instance, you will have to purge the LVM entries and information it makes for the ephemeral
[2012-05-08 19:52:23 -0400] Brad_K: qhartman: hmm.  i'm not sure that i have ever run into that problem before.  maybe one of the other folks in this channel will have a better answer for you?
[2012-05-08 19:52:31 -0400] cwj: geekbri: ok that makes sense
[2012-05-08 19:52:38 -0400] qhartman: Brad_K, okie, thanks
[2012-05-08 19:52:43 -0400] geekbri: cwj: since they are ephemeral the LVM UUID's for the devices will be changed and your striped LVM volume will be gone.  That is to probably be expected.  It does a node.set though so those attributes persist.  You will need to delete them :)
[2012-05-08 19:52:45 -0400] hoover_damn: geekbri, you should use -i in lvm
[2012-05-08 19:52:47 -0400] cwj: since you'll come up on a different physical box and the uuids will have changed
[2012-05-08 19:52:56 -0400] cwj: kk
[2012-05-08 19:53:08 -0400] hoover_damn: or at least I do
[2012-05-08 19:53:24 -0400] geekbri: -i? for the physical volumes, or during which part?
[2012-05-08 19:53:36 -0400] hoover_damn: lvm create
[2012-05-08 19:53:59 -0400] geekbri: well i didn't write these cookbooks i just use them :)
[2012-05-08 19:54:06 -0400] hoover_damn: ahh
[2012-05-08 19:54:27 -0400] hoover_damn: you should
[2012-05-08 19:54:51 -0400] geekbri: I haven't looke dtoo much into the guts of them.
[2012-05-08 19:55:48 -0400] geekbri: hoover_damn: this cookbook allows you to specify stripes and stripe size so i assume it uses -i and -I
[2012-05-08 19:56:28 -0400] yfeldblum: jschoolcraft, yes: http://json.org/
[2012-05-08 19:56:51 -0400] hoover_damn: i do not assume
[2012-05-08 19:57:37 -0400] yfeldblum: qhartman, move them outside the ruby_block, or inside the ruby_block, create a sub-recipe using recipe_eval
[2012-05-08 19:58:21 -0400] hoover_damn: but it does
[2012-05-08 19:58:26 -0400] hoover_damn: in his fork
[2012-05-08 19:59:09 -0400] geekbri: Well i can't imagine how else he was honoring my stripe size and block size arguments, which he was.
[2012-05-08 19:59:21 -0400] geekbri: so it wasn't so much of an assumption as it was, hes doing it, how hes doing it is not my worry
[2012-05-08 20:00:36 -0400] geekbri: cwj: i forgot to mention that the role include another role of mine which is using the recipe[lvm] and recipe[volumes] which you'll probably want to put in place of the role[ec2_common_rev0]
[2012-05-08 20:02:36 -0400] qhartman: yfeldblum, thanks for the suggestion, I'll look into it.
[2012-05-08 20:03:02 -0400] cwj: geekbri: i figured the lvm recipe was in that role, where does the volumes recipe come from?
[2012-05-08 20:03:22 -0400] geekbri: cwj: same guy. its in the github as well.
[2012-05-08 20:03:27 -0400] geekbri: his not the
[2012-05-08 20:03:29 -0400] cwj: ok, i'll check it out
[2012-05-08 20:03:34 -0400] geekbri: they work with each other.
[2012-05-08 20:04:22 -0400] qhartman: yfeldblum, Do you have any links to docs on recipe_eval? I'm not seeing any immediately.
[2012-05-08 20:07:07 -0400] yfeldblum: qhartman, hmm, this seems to be a protected method on Chef::Provider ... https://github.com/opscode/chef/blob/master/chef/lib/chef/provider.rb#L63-79
[2012-05-08 20:08:05 -0400] yfeldblum: qhartman, but you can possibly do something like that implementation inside your ruby_block's block attribute
[2012-05-08 20:08:20 -0400] yfeldblum: qhartman, or turn your ruby_block into a LW resource/provider
[2012-05-08 20:15:39 -0400] rayrod2030: all kinds of issues with rsyslog on centos.  Switching to syslog-ng
[2012-05-08 20:16:06 -0400] eherot: rayrod2030: much better logger imho
[2012-05-08 20:16:38 -0400] rayrod2030: just having all sorts of problems with rsyslog 4.6.2 to properly parse rsyslog.conf.
[2012-05-08 20:16:56 -0400] rayrod2030: anything generated from a chef  template was throwing errors.
[2012-05-08 20:33:40 -0400] cnf: holy crap! .rvm is 260MB
[2012-05-08 20:33:41 -0400] cnf: o,O
[2012-05-08 20:36:23 -0400] bdha: ...ok?
[2012-05-08 20:36:59 -0400] cnf: that's a lot, for something i hardly use
[2012-05-08 20:37:06 -0400] eherot: $ du -sh ~/.rvm
[2012-05-08 20:37:07 -0400] eherot: 478M/Users/eric/.rvm
[2012-05-08 20:37:33 -0400] cnf: O,o
[2012-05-08 20:37:40 -0400] cnf: bloody huge
[2012-05-08 20:38:05 -0400] miah: i have a 500gb hdd in my laptop. ~500 to rvm is 'whatever'
[2012-05-08 20:38:11 -0400] miah: er, ~500mb..
[2012-05-08 20:38:24 -0400] StormSilver: 3.1G/Users/ssilver/.rvm
[2012-05-08 20:38:29 -0400] StormSilver: :D
[2012-05-08 20:38:30 -0400] bdha: Bloody huge by the standards of what year?
[2012-05-08 20:38:53 -0400] eherot: cnf: keep in mind it's like an entire gem repository
[2012-05-08 20:39:15 -0400] StormSilver: Plus all the source code, binaries, compilation objects, etc for however many rubies you have
[2012-05-08 20:39:16 -0400] cnf: miah: 120G
[2012-05-08 20:39:23 -0400] cnf: eherot: oh bah!
[2012-05-08 20:41:06 -0400] yfeldblum: multiple versions of however many gems ...
[2012-05-08 20:42:47 -0400] cnf: ok, and now it's writing to my .bashrc!
[2012-05-08 20:42:49 -0400] cnf: don't do that!
[2012-05-08 20:42:50 -0400] qhartman: yfeldblum, Thanks for the ideas
[2012-05-08 20:43:18 -0400] yfeldblum: qhartman, let me know if they work for you
[2012-05-08 20:44:42 -0400] cwj: cnf: rvm mucks with your environment quite a bit. i prefer rbenv for that reason.
[2012-05-08 20:44:59 -0400] cnf: cwj: i'll have a look at that
[2012-05-08 20:45:12 -0400] cnf: most of my .files are versionned, and shared across machines
[2012-05-08 20:45:25 -0400] qhartman: yfeldblum, will do, right now I'm living with the initial run failing due to the code not getting executed at the right time with it outside the ruby_block. Once this cluster is up I'll revisit doing this more cleanly
[2012-05-08 20:45:29 -0400] cnf: as such, things that mess with those files are not so usefull ^^;
[2012-05-08 20:45:55 -0400] miah: its a good thing there are other options =)
[2012-05-08 20:46:35 -0400] cnf: cwj: i'm mostly ignorant on ruby, rbenv is mostly a drop-in replacement for rvm?
[2012-05-08 20:46:45 -0400] cnf: cwj: most docs mention rvm, hence why it is installed ^6;
[2012-05-08 20:46:58 -0400] yfeldblum: cnf, no; it serves a similar overarching goal, but it is not a drop-in replacement
[2012-05-08 20:47:15 -0400] cwj: it is conceptually the same as rvm, but is not a drop-in replacement
[2012-05-08 20:47:42 -0400] cnf: yeah, but it serves most of the same purpose?
[2012-05-08 20:47:45 -0400] cwj: yes
[2012-05-08 20:47:49 -0400] cnf: ok
[2012-05-08 20:48:05 -0400] cwj: https://github.com/sstephenson/rbenv
[2012-05-08 20:48:38 -0400] cnf: yeah, i'm looking there
[2012-05-08 20:48:50 -0400] cnf: it says it doesn't install ruby
[2012-05-08 20:48:55 -0400] cnf: so how do you install ruby?
[2012-05-08 20:49:07 -0400] cwj: there is a companion tool called ruby-build
[2012-05-08 20:49:13 -0400] cnf: guess i'll look at https://github.com/sstephenson/ruby-build
[2012-05-08 20:49:16 -0400] cnf: yeah
[2012-05-08 20:49:52 -0400] yfeldblum: cnf, are you looking into rbenv because you don't wnat to version your .rvm dir?
[2012-05-08 20:50:08 -0400] cnf: yfeldblum: huh?
[2012-05-08 20:50:37 -0400] yfeldblum: cnf, a, sorry, you were talking about writing to your .bashrc
[2012-05-08 20:50:42 -0400] cnf: yeah
[2012-05-08 20:51:12 -0400] cnf: i only have rvm installed because some howto told me my system ruby wasn't  good enough
[2012-05-08 20:51:29 -0400] cnf: and said to use rvm
[2012-05-08 20:52:04 -0400] setient: it really isn't.  rvm ftw
[2012-05-08 20:52:53 -0400] cnf: setient: tbh, i dislike the entire concept
[2012-05-08 20:53:03 -0400] setient: of what?
[2012-05-08 20:53:32 -0400] setient: rvm allows you to separate out the ruby/gems that your system uses vs whatever your apps use
[2012-05-08 20:53:36 -0400] cnf: installing multiple versions of a language in your homedir
[2012-05-08 20:54:08 -0400] cwj: its not really any different from python virtualenv
[2012-05-08 20:54:13 -0400] yfeldblum: cnf, ruby & rubygems move too fast for the usual distro package maintainers; we need ruby & rubygems installed without having to be root; we need different versions of ruby isntalled at the same time, switched purely by environment variables in the current shell (rather than being switched system-wide)
[2012-05-08 20:54:18 -0400] cnf: it is, though cwj
[2012-05-08 20:54:34 -0400] setient: people have been doing the same with java for years
[2012-05-08 20:54:37 -0400] cnf: yfeldblum: THAT is my problem with it.
[2012-05-08 20:54:38 -0400] setient: multiple jvm's installed
[2012-05-08 20:54:50 -0400] cnf: setient: ah well, i don't really hold java that high :P
[2012-05-08 20:54:55 -0400] cnf: so lets not compare that :P
[2012-05-08 20:55:08 -0400] yfeldblum: cnf, sorry, which?
[2012-05-08 20:56:28 -0400] cnf: yfeldblum: that ruby "moves so fast" that you need different versions installed just to keep up
[2012-05-08 20:57:21 -0400] setient: cnf: most languages are the same way, the ruby community just did something about it.  i mean look at the php package that comes with rhel or debian
[2012-05-08 20:57:26 -0400] miah: i think java is fine, but most shops are filled with java programmers that used to be php programmers
[2012-05-08 20:57:57 -0400] yfeldblum: cnf, not what i said; ruby moves too fast for the usual distro package maintainers, who like to keep systems stable .. fantastic! thanks for keeping systems stable! but ... i need to test my ruby library on 3 versions of ruby to ensure compatibility ...
[2012-05-08 20:57:59 -0400] miah: all languages have pros / cons. i try to hold fault at the people writing the code.
[2012-05-08 20:58:05 -0400] cnf: setient: packages, maybe, but even with php i can just run any semi-recent version, and be ok
[2012-05-08 20:58:25 -0400] setient: you can sorta do the same with ruby sometimes, see what yfeldblum said.
[2012-05-08 20:58:41 -0400] setient: and what miah said
[2012-05-08 20:58:59 -0400] miah: yfeldblum: indeed. rhel, ubuntu lts, all great things. it means if i write a app for that system i know its going to work for a while. obviously this is great for some companies, and not so great for people who want the newest glowing hot releases
[2012-05-08 20:59:29 -0400] miah: rhel packaging old ruby sure did cause me some pain. but there are ways to work around that =)
[2012-05-08 20:59:58 -0400] setient: also cnf there is the fact that when implementing something new, why would you implement it using a version of a language 3 versions old.
[2012-05-08 21:00:15 -0400] setient: like using php 5.1.6 right now when php 5.3 is out
[2012-05-08 21:00:17 -0400] yfeldblum: miah, it's also not going to work for anyone who wants to write & release a library while ensuring its compatibility across multiple popular versions of ruby ... such as librarian, which is tested on 1.8.7, 1.9.2, and 1.9.3
[2012-05-08 21:00:23 -0400] miah: yup
[2012-05-08 21:00:56 -0400] miah: i dont personally <3 rvm. but i do <3 that it and rbenv exists.
[2012-05-08 21:01:02 -0400] cnf: setient: sure, but most languages have enough backwards compatibility that most stuff will run within minor releases, at least, often even within major release
[2012-05-08 21:01:04 -0400] miah: rvm is what i use, and it works well enough
[2012-05-08 21:01:18 -0400] cnf: and i'm not a ruby developer
[2012-05-08 21:01:20 -0400] cnf: i'm a user
[2012-05-08 21:01:27 -0400] cnf: i hate having to need it as a bloody user
[2012-05-08 21:01:55 -0400] miah: well, go complain to your upstream vendor
[2012-05-08 21:02:55 -0400] cnf: right
[2012-05-08 21:04:06 -0400] cnf: cwj: how do gems work?
[2012-05-08 21:05:32 -0400] yfeldblum: cnf, if you're using chef, you're a ruby developer; welcome to the fold
[2012-05-08 21:05:43 -0400] miah: =)
[2012-05-08 21:05:52 -0400] cnf: yfeldblum: you know, your general attitude is very newbie unfriendly
[2012-05-08 21:05:58 -0400] miah: or if you're not.. you will be.
[2012-05-08 21:06:12 -0400] miah: i've been using chef since last june. i've learned quite a bit of ruby
[2012-05-08 21:06:26 -0400] setient: i haven't started using chef, i just know a bit o ruby from making some rake files previously
[2012-05-08 21:06:30 -0400] setient: fun stuff
[2012-05-08 21:06:32 -0400] setient: and puppet of course
[2012-05-08 21:06:42 -0400] cnf: miah: not to start a war, to each there own, but the more i use ruby, the less i like it
[2012-05-08 21:07:17 -0400] miah: indeed. opinions are like assholes and what not..
[2012-05-08 21:07:36 -0400] miah: 'eloquent ruby' has taught me to <3 ruby though.
[2012-05-08 21:07:46 -0400] setient: ruby is REALLY nice for scripting
[2012-05-08 21:07:56 -0400] cnf: i'd just as soon stay away from it, but i must admit a lot of the cool tools/toys are written in ruby
[2012-05-08 21:08:03 -0400] cnf: setient: not to me
[2012-05-08 21:08:04 -0400] yfeldblum: cnf, sorry if it comes off that way; my attitude is, in fact, friendly towards anybody who wants to learn the system
[2012-05-08 21:08:32 -0400] paulmooring: miah: I just read eloquent ruby last week, great book
[2012-05-08 21:08:36 -0400] yfeldblum: cnf, but, towards anyone who wants to use the system without learning it, i'm going to tell them: you're doing it wrong
[2012-05-08 21:08:36 -0400] miah: i always figure people would point at me for most hostile in this channel.. yfeldblum has always been super chill =)
[2012-05-08 21:08:41 -0400] cnf: yfeldblum: your attitude comes across as "agree with me, or fuck off"
[2012-05-08 21:09:18 -0400] cnf: miah: uhm, not felt any hostility from you, tbh
[2012-05-08 21:09:34 -0400] setient: cnf: that is wierd.  so you don't have to follow that specific howto you were following
[2012-05-08 21:09:52 -0400] setient: infact, due to the nature of open source software, you can do it your own way that you think is best.  as a matter of fact, i encourage that.
[2012-05-08 21:09:56 -0400] hippiehacker: https://gist.github.com/77208d31bf9335fa2e56
[2012-05-08 21:09:59 -0400] cnf: setient: indeed i don't, but it's a fuckton of information all at once
[2012-05-08 21:10:16 -0400] setient: cnf: that is how it gets when you start using a project of chef's magnitude
[2012-05-08 21:10:26 -0400] cnf: setient: and just all of a sudden becoming proficient in it all is not gonna happen :P
[2012-05-08 21:10:37 -0400] setient: it is like starting at a new company and attempting to understand everything in the first day
[2012-05-08 21:10:52 -0400] cnf: setient: sure, and i'm still here
[2012-05-08 21:10:55 -0400] setient: nad that is literally the case as it is used for deploying whole infrastructures :)
[2012-05-08 21:10:58 -0400] setient: it is fun!
[2012-05-08 21:11:33 -0400] paulmooring: cnf: I strongly suggest if time permits starting by making simple cookbooks on the 5 free nodes Hosted Chef account, because you're right it's a lot to take in all at once
[2012-05-08 21:11:56 -0400] cnf: paulmooring: i'm running chef-solo, atm
[2012-05-08 21:12:51 -0400] paulmooring: cnf: Not necessarily to use for production, just to get a feel for how cookbooks work without worry about servers, solo configs, ect.
[2012-05-08 21:14:00 -0400] cnf: paulmooring: which, again adds new complexity and new information
[2012-05-08 21:14:29 -0400] paulmooring: cnf: That's true, but in practice Hosted Chef seems to be the least complex
[2012-05-08 21:15:26 -0400] yfeldblum: hippiehacker, not sure what you mean
[2012-05-08 21:15:39 -0400] yfeldblum: knife?
[2012-05-08 21:15:39 -0400] bawt_: knife is a command-line interface between a human and the Chef Server API, and is documented at http://help.opscode.com/faqs/chefbasics/knife or on the Chef Wiki with examples at http://wiki.opscode.com/display/chef/Knife or that kind of client, it talks directly to the api server
[2012-05-08 21:16:14 -0400] cnf: i find ruby to be a confusing environment :/
[2012-05-08 21:16:42 -0400] yfeldblum: cnf, knife is the tool you use on your laptop when the thing you're using on the servers being configured is chef-client; if you're using chef-solo on the servers being configured, using knife on your laptop won't be of much use
[2012-05-08 21:17:05 -0400] cnf: yfeldblum: yes, that is what i figured
[2012-05-08 21:17:07 -0400] cnf: yfeldblum: and?
[2012-05-08 21:17:31 -0400] yfeldblum: cnf, to answer your question: " -solo doesn't need anything locally installed, but i need knife or something? if wanna mess with servers"
[2012-05-08 21:17:50 -0400] hippiehacker: yfeldblum: in the only_if condition I'm trying to run 'powershell Get-Some Fooo', but it just hangs. Running the same command via a cmd.exe shell works fine.
[2012-05-08 21:18:06 -0400] cnf: yfeldblum: yes, to paulmooring because he suggested using hosted-chef to get started...
[2012-05-08 21:18:11 -0400] miah: what really helps with chef-solo dev is vagrant, or hosted_chef
[2012-05-08 21:18:13 -0400] paulmooring: yfeldblum: He was responding to my suggestion of using Hosted Chef to learn how Chef/cookbooks work before using solo
[2012-05-08 21:18:23 -0400] cnf: miah: i'm using vagrant
[2012-05-08 21:18:57 -0400] miah: cool. there are a bunch of blog entries out there that talk about using vagrant to do cookbook development
[2012-05-08 21:19:46 -0400] cnf: miah: thanks, but i'm not looking to add yet another step inbetween
[2012-05-08 21:19:52 -0400] cnf: i'm already getting burried
[2012-05-08 21:20:55 -0400] miah: try to take it one step at a time
[2012-05-08 21:21:17 -0400] valdezjoelt: hi miah :-)
[2012-05-08 21:21:27 -0400] cnf: yes, yes one step at a time
[2012-05-08 21:21:43 -0400] miah: get a cookbook running in solo mode in vagrant. that should be your first step =)
[2012-05-08 21:21:47 -0400] miah: hello valdezjoelt
[2012-05-08 21:22:21 -0400] valdezjoelt: I working now on Templates and databags :-) Thanks for the hint yesterday
[2012-05-08 21:22:33 -0400] yfeldblum: hippiehacker, http://technet.microsoft.com/en-us/library/dd315276.aspx
[2012-05-08 21:22:40 -0400] cnf: miah: really, long long long history...
[2012-05-08 21:22:40 -0400] miah: yay. awesome.
[2012-05-08 21:22:52 -0400] yfeldblum: hippiehacker, might want to look at the powershell.exe docs for any switches that can help
[2012-05-08 21:23:04 -0400] miah: cnf: history?
[2012-05-08 21:23:36 -0400] cnf: miah: been trying for ages now to get postgresql working in my vagrant setup
[2012-05-08 21:23:42 -0400] cnf: with chef
[2012-05-08 21:23:45 -0400] miah: ya
[2012-05-08 21:24:07 -0400] miah: you might need to hack that cookbook a bit ot make it work. but if you post more about how its failing we can probably assist you in debugging / learning.
[2012-05-08 21:24:27 -0400] miah: or, try a easier cookbook just to understand things better
[2012-05-08 21:24:43 -0400] cnf: yes
[2012-05-08 21:24:57 -0400] cnf: pft, my brain is going in circles again
[2012-05-08 21:25:30 -0400] yfeldblum: cnf, what i would suggest: perform each step of the configuration manually, and, as you do so, document that step of the configuration in your chef recipe (a recipe that you write)
[2012-05-08 21:26:30 -0400] yfeldblum: cnf, IOW, actuall perform `apt-get install postgresql-server`; then document that in your recipe with `package "postgresql-server"`; and then continue with the config files, etc.,
[2012-05-08 21:26:36 -0400] cnf: yes, which gets me back round to not having anything predictable of ruby env installed
[2012-05-08 21:26:52 -0400] cnf: because all the docs so far on writing recipes seem to be requireing knife
[2012-05-08 21:26:55 -0400] cnf: which i do not have
[2012-05-08 21:27:19 -0400] cnf: which gets me to why i was looking at rvm, which i seem to have installed
[2012-05-08 21:27:21 -0400] yfeldblum: cnf, i would suggest looking at an existing cookbook to give you ideas, but to write your own
[2012-05-08 21:27:22 -0400] cnf: and is a mess
[2012-05-08 21:27:33 -0400] cnf: and, tbh, bloody complex
[2012-05-08 21:27:35 -0400] yfeldblum: cnf, are you using vagrant's chef-solo provisioner?
[2012-05-08 21:27:50 -0400] miah: you dont need knife for chef-solo, or to write cookbooks
[2012-05-08 21:28:01 -0400] cnf: yfeldblum: euhm, yes...
[2012-05-08 21:28:02 -0400] miah: 'knife cookbook create' simply creates a directory structure for you
[2012-05-08 21:28:08 -0400] miah: you can do that on your own..
[2012-05-08 21:28:25 -0400] cnf: miah: you know, i _know_ i don't _have_ to follow the docs
[2012-05-08 21:28:39 -0400] cnf: miah: but it's hard enough figuring out how everything works as it is
[2012-05-08 21:29:17 -0400] miah: indeed. i'm always happy to answer questions and so are the others here. so post what problem you're having exactly and we'll offer you a solution =)
[2012-05-08 21:29:17 -0400] cnf: i'd like to get myself to some stable, predictable point atm
[2012-05-08 21:29:22 -0400] cnf: and out of the bloody chaos
[2012-05-08 21:29:33 -0400] cnf: which i am in, atm
[2012-05-08 21:29:36 -0400] miah: ok. so download or build a vagrant basebox and ensure it passes the tests
[2012-05-08 21:29:44 -0400] cnf: tests?
[2012-05-08 21:29:44 -0400] bawt_: tests are for coders, that's just how it is in my world
[2012-05-08 21:29:45 -0400] miah: if it passes the tests then it has puppet and chef installed
[2012-05-08 21:30:07 -0400] miah: cnf: https://github.com/jedi4ever/veewee
[2012-05-08 21:30:25 -0400] cnf: nonono
[2012-05-08 21:30:30 -0400] miah: =)
[2012-05-08 21:30:33 -0400] cnf: i'm not building my own boxes
[2012-05-08 21:30:35 -0400] cnf: not now
[2012-05-08 21:30:51 -0400] miah: ok. so download a prebuilt basebox, the sensu team has several. they have working chef/puppet configurations.
[2012-05-08 21:30:53 -0400] cwj: cnf: did you figure out gems with rbenv? the gem command is a shim just like the ruby command
[2012-05-08 21:30:57 -0400] miah: you can use those to do chef-solo tests
[2012-05-08 21:31:10 -0400] cnf: cwj: no, i didn't
[2012-05-08 21:31:41 -0400] cnf: cwj: so if i "activate"? a ruby env with rbenv, i can just install gems with gem install?
[2012-05-08 21:31:43 -0400] cnf: and it will work?
[2012-05-08 21:31:45 -0400] miah: iirc, you can download a simple ubuntu 12.04LTS basebox from the vagrant site too
[2012-05-08 21:31:53 -0400] miah: it has been tested and includes chef/puppet as well
[2012-05-08 21:31:54 -0400] cwj: yes
[2012-05-08 21:32:10 -0400] miah: install that basebox into vagrant, and then configure the provisioner to be chef-solo
[2012-05-08 21:32:13 -0400] cnf: ok, so i don't need anything specific to manage gems etc?
[2012-05-08 21:32:21 -0400] miah: http://vagrantup.com/docs/provisioners/chef_solo.html
[2012-05-08 21:32:29 -0400] miah: nope
[2012-05-08 21:32:33 -0400] cnf: miah: yes, i have been doing that for hours now
[2012-05-08 21:32:48 -0400] miah: so, you have a basebox downloaded and added to your vagrant config?
[2012-05-08 21:32:49 -0400] cwj: right
[2012-05-08 21:33:00 -0400] cwj: you can still use bundler if needed, theres a plugin for rbenv
[2012-05-08 21:33:07 -0400] cnf: cwj: because the docs said it doesn't manage gemsets
[2012-05-08 21:33:15 -0400] cnf: which got me wondering how they work
[2012-05-08 21:33:37 -0400] cnf: yeah, i saw that, but i can't really figure out what bundler does
[2012-05-08 21:33:41 -0400] cwj: out of the box it does not, but there is a plugin
[2012-05-08 21:33:47 -0400] cwj: re: gemsets
[2012-05-08 21:33:53 -0400] miah: bundler just installs gems required for a project. it will make sure they are a specific version.
[2012-05-08 21:34:00 -0400] yfeldblum: cnf, within the vagrant box, you can just use the system ruby (1.8.7 or 1.9.3, whichever it ships with) ... within the vagrant box, you should not need to use either rbenv or rvm
[2012-05-08 21:34:09 -0400] miah: it helps you replicate your development environment in production to an extent.
[2012-05-08 21:34:20 -0400] miah: yup. i run ruby 1.8.7/chef on lots of hosts
[2012-05-08 21:34:24 -0400] miah: just because its easy
[2012-05-08 21:34:51 -0400] yfeldblum: cnf, you don't need to use bundler either just to run chef-solo
[2012-05-08 21:35:01 -0400] cnf: cwj: ok, uhm, how are gemsets not the same as gems?
[2012-05-08 21:35:08 -0400] cnf: cwj: did i miss some jargon?
[2012-05-08 21:35:44 -0400] cwj: gemsets are akin to using bundler
[2012-05-08 21:35:58 -0400] cnf: yeah, which i don't quite get what it does yet :P
[2012-05-08 21:36:00 -0400] miah: https://github.com/opscode/basebox
[2012-05-08 21:36:03 -0400] miah: ^- also =)
[2012-05-08 21:36:30 -0400] yfeldblum: cnf, gemsets are a feature of rvm specifically, not part of ruby or rubygems ... since you don't need rvm just to use chef-solo, you also won't need to deal with rvm's gemsets
[2012-05-08 21:37:52 -0400] cnf: cwj: i'm sure i am missing something simple, but if gem will just install gems in the right place for the current env with rbenv, how would rbenv need to manage "gemsets"?
[2012-05-08 21:38:11 -0400] cnf: cwj: or rather, i'm confused they mention it doesn't do something, that needs not doing?
[2012-05-08 21:38:49 -0400] cnf: am I making any sense? ^^;
[2012-05-08 21:38:50 -0400] cwj: cnf: i believe it is mentioned because many people coming from rvm are already using gemsets and will want to know upfront that rbenv doesn't deal with them natively
[2012-05-08 21:39:05 -0400] yfeldblum: cnf, i'm not all to familiar with rbenv, but those docs are probably there for people who are already familiar with rvm, in order to contrast how rbenv works with how rvm works
[2012-05-08 21:39:16 -0400] cnf: wait, are gemsets something like pythons virtualenv?
[2012-05-08 21:39:33 -0400] yfeldblum: cnf, that section of the docs may not be not introductory material
[2012-05-08 21:39:36 -0400] cnf: where you install your modules in your projects directory, instead of in the envs dir?
[2012-05-08 21:40:09 -0400] miah: gemsets are similar to pip installing python modules into a virtualenv
[2012-05-08 21:40:27 -0400] miah: rvm is essentually virtualenv
[2012-05-08 21:40:42 -0400] cnf: miah: ok, so you can have gems specific to your app, separated from your ruby env?
[2012-05-08 21:41:03 -0400] miah: yup
[2012-05-08 21:41:17 -0400] cnf: ok, i didn't get rvm could even do that
[2012-05-08 21:41:40 -0400] miah: yup. you can install multiple versions of ruby, and/or create gemsets that are tied to specific versions of ruby
[2012-05-08 21:42:07 -0400] cnf: miah: how do you make rvm do that?
[2012-05-08 21:42:29 -0400] miah: https://rvm.io/gemsets/basics/
[2012-05-08 21:43:04 -0400] cnf: aha, ok...
[2012-05-08 21:43:10 -0400] cnf: so i never used that part
[2012-05-08 21:43:11 -0400] cnf: good
[2012-05-08 21:43:33 -0400] cnf: (trying to figure out what i'll be fucking up before going to rbenv ^^;)
[2012-05-08 21:43:37 -0400] setient: it is a really neato feature for testing things :)
[2012-05-08 21:43:50 -0400] cnf: setient: hey, i love virtualenv on python :P
[2012-05-08 21:43:54 -0400] miah: yup. i used it to test alpha/rc's of chef before upgrading to it
[2012-05-08 21:43:57 -0400] setient: same thing really
[2012-05-08 21:44:24 -0400] cnf: hmm
[2012-05-08 21:44:31 -0400] miah: guh. my problem right now is i want to rewrite every cookbook i touch
[2012-05-08 21:44:33 -0400] cnf: but rvm installs gemsets in ~/.rvm?
[2012-05-08 21:44:47 -0400] miah: cnf: yes. you can switch them on the fly.
[2012-05-08 21:45:01 -0400] miah: eg; rvm use 1.9.2@chef-10.8
[2012-05-08 21:45:37 -0400] cnf: right
[2012-05-08 21:46:11 -0400] mhalligan: I've seen a few mentions that rake install has been obsoleted as a deploy process?
[2012-05-08 21:46:20 -0400] mhalligan: what should one do instead?
[2012-05-08 21:47:00 -0400] miah: is it? its still there
[2012-05-08 21:47:23 -0400] yfeldblum: mhalligan, deploy process for what?
[2012-05-08 21:47:33 -0400] miah: ah. maybe it is missing the install task now.
[2012-05-08 21:48:18 -0400] mhalligan: comments on http://tickets.opscode.com/browse/CHEF-1647 for example
[2012-05-08 21:49:18 -0400] miah: mhalligan: you can just upload things using knife. some people write spiceweasel specs
[2012-05-08 21:50:15 -0400] mhalligan: cool I'll check it out. is there a good "best practices" guide?
[2012-05-08 21:50:16 -0400] mhalligan: \
[2012-05-08 21:50:26 -0400] miah: uhm. i dont think i've written that yet
[2012-05-08 21:50:41 -0400] cnf: hmm...
[2012-05-08 21:51:01 -0400] mhalligan: at the very least it'd be rad if the various getting started howtos were updated to reflect new standards
[2012-05-08 21:51:36 -0400] miah: ya
[2012-05-08 21:53:58 -0400] cnf: oohhh
[2012-05-08 21:54:10 -0400] cnf: your app needs to support the use of bundler?
[2012-05-08 21:56:37 -0400] cnf: cwj: do you use anything like gemsets with rbenv?
[2012-05-08 21:57:25 -0400] cwj: i use bundler for a couple of projects. i have messed with gemsets in passing
[2012-05-08 21:57:34 -0400] shuvo_: ohai chefs, how are we all today? :-)
[2012-05-08 21:57:41 -0400] cwj: there are rbenv plugins for both
[2012-05-08 21:58:17 -0400] cnf: uhu
[2012-05-08 21:58:40 -0400] cnf: cwj: i am reading bundler, and it seems you have to tell your app about it?
[2012-05-08 21:59:25 -0400] miah: no
[2012-05-08 21:59:35 -0400] cwj: i dunno about that. i am not deploying rails apps, i usually just prepend bundle exec on commands
[2012-05-08 21:59:43 -0400] cwj: bundle exec vagrant up
[2012-05-08 21:59:48 -0400] cwj: derp de derrrp
[2012-05-08 22:00:04 -0400] cnf: ah
[2012-05-08 22:00:32 -0400] cnf: well, vagrant was bundled nicely on osx, does it's own thing ^^;
[2012-05-08 22:01:21 -0400] cwj: sure, but i cant install latest vagrant, veewee and knife-ec2 in the same ruby environment, as they depend on conflicting versions of fog, etc
[2012-05-08 22:01:35 -0400] cnf: uhu
[2012-05-08 22:02:46 -0400] miah: you dont need knife-ec2
[2012-05-08 22:02:52 -0400] miah: unless you're dealing with ec2 hosts
[2012-05-08 22:06:19 -0400] cwj: fancy that
[2012-05-08 22:06:29 -0400] cwj: :)
[2012-05-08 22:07:14 -0400] cnf: :P
[2012-05-08 22:17:55 -0400] shuvo_: what could be a good standalone SMTP so that I could use it to send me emails to my gmail from my chef Exception and Report handlers?
[2012-05-08 22:18:21 -0400] shuvo_: email is useful but if there's an easier way of getting notified, I am up for that too!
[2012-05-08 22:18:32 -0400] Babar: ssmtp
[2012-05-08 22:20:01 -0400] hoover_damn: shuvo_, use net/smtp
[2012-05-08 22:20:07 -0400] hoover_damn: and send the emails in ruby
[2012-05-08 22:20:25 -0400] shuvo_: ssmtp sounds nice, but I was expecting someone to say "sms using Twilio" :-D j/k
[2012-05-08 22:21:01 -0400] cnf: i love when things are in homebrew ^^;
[2012-05-08 22:21:16 -0400] shuvo_: net/smtp, hmm, does it handle gmail transparently or do I have to handle the authentication myself :-O
[2012-05-08 22:21:33 -0400] cnf: shuvo_: notifo ^^;
[2012-05-08 22:21:44 -0400] shuvo_: he he
[2012-05-08 22:21:47 -0400] shuvo_: there you go
[2012-05-08 22:22:04 -0400] shuvo_: hoover_damn, thanks. net/smtp, hmm, does it handle gmail transparently or do I have to handle the authentication myself :-O
[2012-05-08 22:22:12 -0400] hoover_damn: you need to authenticate
[2012-05-08 22:22:40 -0400] cnf: shuvo_: ah, sorry, only iphone atm, i thought they had android and winphone out by now. if you have an iphone, notifo is great :P
[2012-05-08 22:23:03 -0400] hoover_damn: shuvo_, http://codelikezell.com/how-to-send-email-with-ruby-and-gmail/
[2012-05-08 22:23:20 -0400] shuvo_: cnf, notifo is great, but they are shutting down :-)
[2012-05-08 22:23:35 -0400] cnf: shuvo_: wha?
[2012-05-08 22:24:00 -0400] cnf: shuvo_: where did you hear that?
[2012-05-08 22:24:44 -0400] shuvo_: hoover_damn, ahh it handled the tls. good. but it looks too easy. hmm. later. Thanks a bunch!
[2012-05-08 22:25:22 -0400] shuvo_: cnf, Chad told me
[2012-05-08 22:25:31 -0400] cnf: shuvo_: chad?
[2012-05-08 22:27:12 -0400] cnf: right, now which version of ruby should i install?
[2012-05-08 22:27:20 -0400] shuvo_: 1.9.3
[2012-05-08 22:27:47 -0400] otterley: I searched the bug database but couldn't find this - why isn't this an identity?  node.roles.each { |r| node.role? r }
[2012-05-08 22:28:00 -0400] otterley: this fails with nested roles
[2012-05-08 22:28:16 -0400] cnf: shuvo_: any revision of that?
[2012-05-08 22:28:59 -0400] cnf: i have -p0 -p125 -p194 -preview1 and -rc1
[2012-05-08 22:29:32 -0400] shuvo_: cnf, that's a tough question, depends. For chef I bulid the system ruby from source. Don't use ruby outside chef so my options are not limited
[2012-05-08 22:29:56 -0400] cnf: atm, i use chef and octopress
[2012-05-08 22:30:07 -0400] cnf: and vagrant, but vagrant comes with it's own ruby bundled
[2012-05-08 22:30:49 -0400] shuvo_: well, using bundler you can change that, but yes, octopress does not seem to have too many issues with 194
[2012-05-08 22:31:12 -0400] cnf: ruby-lang says -p194
[2012-05-08 22:31:48 -0400] cnf: (i'm used to python, anything semi recent is fine ^^;)
[2012-05-08 22:32:38 -0400] shuvo_: python here as well :-)
[2012-05-08 22:32:54 -0400] shuvo_: but I learnt ruby thanks to chef and I like it
[2012-05-08 22:33:39 -0400] cnf: ^^;
[2012-05-08 22:33:42 -0400] cnf: oh balls!
[2012-05-08 22:33:44 -0400] shuvo_: most of the scripts I intend to release that allows anyone to build their own chef server is written in python
[2012-05-08 22:33:51 -0400] cnf: rbenv install faildd...
[2012-05-08 22:34:00 -0400] cnf: it really is not my week...
[2012-05-08 22:34:11 -0400] shuvo_: do you stuff in a vagrant vm
[2012-05-08 22:34:15 -0400] shuvo_: makes it easier
[2012-05-08 22:34:40 -0400] cnf: hmz, wtf, i don't even get what went wrong...
[2012-05-08 22:35:35 -0400] shuvo_: okies, I'm out to work on some CNC machine firmware (in C) and drivers (in python). fun! bye :-D
[2012-05-08 22:35:43 -0400] cnf: \o
[2012-05-08 22:35:57 -0400] yfeldblum: cnf, what are you doing that you need a locally-built ruby for?
[2012-05-08 22:36:36 -0400] cnf: i wanna do what paulmooring said, and try following the tutorials with chef-hosted
[2012-05-08 22:37:04 -0400] yfeldblum: cnf, ok
[2012-05-08 22:38:09 -0400] Urocyon: cnf: rvm might be of use.  You could have a separate rvm install for chef.
[2012-05-08 22:38:24 -0400] cnf: Urocyon: i just deleted rvm to install rbenv
[2012-05-08 22:38:27 -0400] Urocyon: If you are familar with virtualenv/pip in the python world, rvm is a bit like that.
[2012-05-08 22:38:51 -0400] Urocyon: that could work too.
[2012-05-08 22:38:52 -0400] otterley: rvm is evil
[2012-05-08 22:38:54 -0400] cnf: rvm was too intrusive and complex for me
[2012-05-08 22:39:02 -0400] otterley: rbenv works pretty well
[2012-05-08 22:39:36 -0400] cnf: yeah, i didn't like rvm writing to my .bashrc, and injecting itself into my shell
[2012-05-08 22:39:53 -0400] cnf: also, hot lap, hot lap!!
[2012-05-08 22:39:57 -0400] otterley: rvm is an overly complex solution to a simple problem
[2012-05-08 22:40:06 -0400] cnf: note to self: put laptop down when compiling...
[2012-05-08 22:40:43 -0400] cnf: that, or wear pants, but meh
[2012-05-08 22:41:19 -0400] cnf: Urocyon: and i love virtualenv ^^;
[2012-05-08 22:44:24 -0400] hoover_damn: rvm is wrong, rbenv is wrong
[2012-05-08 22:44:25 -0400] hoover_damn: just install ruby
[2012-05-08 22:44:43 -0400] hoover_damn: they complicate the problem and detract from delivering a working product
[2012-05-08 22:44:51 -0400] hoover_damn: imo
[2012-05-08 22:45:04 -0400] cnf: my os has ruby installed
[2012-05-08 22:45:11 -0400] cnf: 1.8.7 something
[2012-05-08 22:45:14 -0400] hoover_damn: and you cannot compile over it?
[2012-05-08 22:45:21 -0400] cnf: everything tells me that is too old :P
[2012-05-08 22:45:38 -0400] hoover_damn: brew install ruby
[2012-05-08 22:45:38 -0400] hoover_damn: ?
[2012-05-08 22:45:40 -0400] otterley: hoover_damn, you can't always use the version of Ruby shipped with your distro.  that's just life.
[2012-05-08 22:45:45 -0400] hoover_damn: align your path differently?
[2012-05-08 22:45:49 -0400] hoover_damn: otterley, right
[2012-05-08 22:46:01 -0400] otterley: yet you have to keep it because other tools shipped with it might need it
[2012-05-08 22:46:13 -0400] hoover_damn: otterley, but setting up a framework to switch rubies in and out easily only lead's to human error
[2012-05-08 22:46:29 -0400] yfeldblum: hoover_damn, which is why you automate it :P
[2012-05-08 22:46:32 -0400] hoover_damn: otterley, I admit I do package up ruby 1.9.3 for my client
[2012-05-08 22:46:32 -0400] cnf: hoover_damn: yeah, i agree, but rbenv seems to stay out of my way
[2012-05-08 22:46:34 -0400] otterley: I wouldn't call rbenv a "framework".  At its core it's just a wrapper.
[2012-05-08 22:46:50 -0400] cnf: hoover_damn: and unless i have really NO choice, i'm only gonna have it have 1 ruby version
[2012-05-08 22:46:51 -0400] hoover_damn: otterley, so their system ruby is what they want
[2012-05-08 22:47:03 -0400] otterley: install the wrappers in /usr/local/bin and wipe your hands clean
[2012-05-08 22:47:04 -0400] hoover_damn: otterley, no fuss no muss
[2012-05-08 22:47:15 -0400] hoover_damn: no room for error
[2012-05-08 22:47:24 -0400] cnf: hoover_damn: actually, vagrant did that, installed to /Applications/vagrant ruby and gems included
[2012-05-08 22:47:25 -0400] hoover_damn: otherwise they'll install ruby 1.8.7
[2012-05-08 22:47:27 -0400] hoover_damn: and do something stupid
[2012-05-08 22:47:28 -0400] cnf: hoover_damn: love that :P
[2012-05-08 22:47:55 -0400] Brad_K: rvm and rbenv are reasons why i love omnibus.
[2012-05-08 22:47:56 -0400] hoover_damn: cnf, you seem to have a lot of problems
[2012-05-08 22:48:18 -0400] Brad_K: vagrant+chef-solo is a hard mix to start with.
[2012-05-08 22:48:24 -0400] hoover_damn: Brad_K, actually I love omnibus because it's a deb with everything built in
[2012-05-08 22:48:33 -0400] hoover_damn: otherwise i'd be building a deb, and slapping everything in
[2012-05-08 22:48:54 -0400] hoover_damn: Brad_K, it just makes the chore slightly easier for me.  But then again I'm not your average user
[2012-05-08 22:48:56 -0400] Brad_K: on ubuntu/debian, it's a deb.  on rhel/centos, it's an rpm.  ;-)
[2012-05-08 22:49:01 -0400] otterley: I try not to rely on any specific distro's functionality
[2012-05-08 22:49:12 -0400] hoover_damn: I build it
[2012-05-08 22:49:43 -0400] hoover_damn: ruby is exceptionally easy to package which is why I don't understand why people keep getting so complicated
[2012-05-08 22:49:47 -0400] hoover_damn: with their solutions on how to deliver ruby
[2012-05-08 22:49:55 -0400] Brad_K: it's both a floor wax and a dessert topping!  ;-)
[2012-05-08 22:50:32 -0400] yfeldblum: hoover_damn, multiple rubies & switching just in one shell? non-root installs?
[2012-05-08 22:50:51 -0400] hoover_damn: yfeldblum, stop being stupid?
[2012-05-08 22:50:52 -0400] cnf: yfeldblum: vagrant does that just fine, just bundles ruby with itself
[2012-05-08 22:51:07 -0400] cnf: and uses its own ruby and gems
[2012-05-08 22:51:12 -0400] cnf: quite nice, imo
[2012-05-08 22:51:14 -0400] hoover_damn: yfeldblum, I quit that workflow.  I don't need multiple rubies anymore, I never needed root to install ruby
[2012-05-08 22:51:28 -0400] otterley: that is OK for vagrant but taken to its logical extreme I'm not sure I'd want every app installed to ship with its own Ruby interpreter
[2012-05-08 22:52:00 -0400] otterley: there is some benefit to shared libraries and so forth
[2012-05-08 22:52:21 -0400] cnf: otterley:  vagrant lets you do it through gems, but also has a bundled package
[2012-05-08 22:52:37 -0400] yfeldblum: otterley, netflix does it (with java)
[2012-05-08 22:53:01 -0400] cnf: ^^;
[2012-05-08 22:54:13 -0400] hoover_damn: otterley, basically I find the rbenv/rvm solution to be a pebcak problem that you can remove by either quitting your job or by trying a different thing.
[2012-05-08 22:54:29 -0400] hoover_damn: I truly admit quitting my job made rvm implode priceless
[2012-05-08 22:54:43 -0400] hoover_damn: it allowed me to remove a ton of gems and rubies and crap that I didn't need /EVER/ again
[2012-05-08 22:56:12 -0400] otterley: I may have a different perspective here because I've worked at enormous companies with several different standard OSes and multiple versions of interpreters that needed to coexist on a host at once.
[2012-05-08 22:56:41 -0400] otterley: and you weren't allowed to touch the OS's package manifest, which in hindsight makes a lot of sense.
[2012-05-08 22:57:02 -0400] otterley: we had a strict separation between the OS and the application stack.
[2012-05-08 22:58:17 -0400] yfeldblum: OS' package manifest?
[2012-05-08 22:58:25 -0400] otterley: yes, the RPMs that were installed
[2012-05-08 22:58:57 -0400] cnf: man, i must be thick >,<
[2012-05-08 22:58:58 -0400] otterley: there was a frozen OS image and it was consistent across hosts (that had that particular OS installed)
[2012-05-08 22:59:07 -0400] yfeldblum: otterley, gotcha
[2012-05-08 23:01:50 -0400] hoover_damn: otterley, you do
[2012-05-08 23:02:08 -0400] hoover_damn: otterley, and your views work for some orgs :) I just prefer to package it up because I feel nasty otherwise
[2012-05-08 23:02:28 -0400] Brad_K: okay, so i'm obviously an old fart, but what the heck is "^^;"?  i figure it's an emoticon of some sort, but what?
[2012-05-08 23:02:55 -0400] cnf: Brad_K: i spend too much time with anime nerds...
[2012-05-08 23:03:00 -0400] Brad_K: and ">,<"?
[2012-05-08 23:03:05 -0400] Brad_K: oh.
[2012-05-08 23:03:07 -0400] cnf: same thing :P
[2012-05-08 23:03:37 -0400] Brad_K: well, i always thought i was an anime nerd, among other things.  obviously, i'm not nerdy enough.
[2012-05-08 23:03:54 -0400] cnf: haha
[2012-05-08 23:04:42 -0400] cnf: Brad_K: http://en.wikipedia.org/wiki/List_of_emoticons has a lot of them
[2012-05-08 23:06:58 -0400] Brad_K: anyway, gotta run.  ttfn!
[2012-05-08 23:07:48 -0400] Brad_K: gack.  i've been using emoticons since the 80s.  i didn't think that i needed to go to remedial WikiSchool.  ;-(
[2012-05-08 23:11:25 -0400] cnf: hehe
[2012-05-08 23:13:38 -0400] cnf: hmm
[2012-05-08 23:13:48 -0400] cnf: maybe it's me, but rbenv seems buggy
[2012-05-08 23:16:36 -0400] cnf: no, that was me :P
[2012-05-08 23:46:56 -0400] cnf: ok, so that works...
[2012-05-08 23:50:44 -0400] cnf: oh, that is stupid...
[2012-05-08 23:51:12 -0400] cnf: chef-hosted reg form is just made of silly

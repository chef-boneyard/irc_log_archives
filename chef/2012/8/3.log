[2012-08-03 00:02:02 -0400] hoover_damm: dyer, can you reproduce net/http failing in irb/pry?
[2012-08-03 00:02:10 -0400] dyer: good idea
[2012-08-03 00:02:13 -0400] dyer: let me try
[2012-08-03 00:04:30 -0400] dyer: I got a response https://gist.github.com/284061b07f174ff38041
[2012-08-03 00:05:34 -0400] dyer: hem, wait, no, that was w/ http
[2012-08-03 00:05:43 -0400] dyer: s/hem/hrm
[2012-08-03 00:07:50 -0400] hoover_damm: dyer, should still work then
[2012-08-03 00:07:51 -0400] dyer: https://gist.github.com/c5b24e35bf3d6085640b
[2012-08-03 00:08:20 -0400] hoover_damm: dyer, wat
[2012-08-03 00:08:31 -0400] dyer: wat?
[2012-08-03 00:09:02 -0400] hoover_damm: dyer, trippy... would you mind pm'ing the real server name? I wanted to reproduce
[2012-08-03 00:09:58 -0400] dyer: sent
[2012-08-03 00:11:29 -0400] hoover_damm: dyer, ruby version?
[2012-08-03 00:11:39 -0400] hoover_damm: obiouvly 1.9.x'ish
[2012-08-03 00:11:43 -0400] smw_work: anyone see this error before? It is saying the cookbook is not found: http://fpaste.org/n46G/
[2012-08-03 00:12:04 -0400] dyer: Ruby on the chef server?
[2012-08-03 00:12:18 -0400] hoover_damm: dyer, whatever is failing
[2012-08-03 00:12:26 -0400] hoover_damm: dyer, wherever the client is that's amiss
[2012-08-03 00:12:42 -0400] dyer: [root@tropo101 lib]# /opt/opscode/embedded/bin/ruby -v
[2012-08-03 00:12:42 -0400] dyer: ruby 1.9.2p180 (2011-02-18) [x86_64-linux]
[2012-08-03 00:12:44 -0400] dyer: [root@tropo101 lib]#
[2012-08-03 00:12:58 -0400] hoover_damm: embedded huh
[2012-08-03 00:13:06 -0400] dyer: but I have another node which was created at the same time which is working
[2012-08-03 00:13:32 -0400] Randm: ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.3.0]
[2012-08-03 00:13:33 -0400] Randm: yay
[2012-08-03 00:13:36 -0400] hoover_damm: i do
[2012-08-03 00:13:41 -0400] dyer: both were provisioning w/ knife ec2 server create at the same time
[2012-08-03 00:13:45 -0400] dyer: ones working, one is not
[2012-08-03 00:13:49 -0400] dyer: which is really odd
[2012-08-03 00:14:51 -0400] hoover_damm: oh ec2
[2012-08-03 00:15:00 -0400] hoover_damm: we spent this much time on an ec2 instance?
[2012-08-03 00:15:09 -0400] hoover_damm: lol
[2012-08-03 00:15:24 -0400] hoover_damm: dyer, sorry i've always had messed up dns issues with amazon from time to time
[2012-08-03 00:15:42 -0400] dyer: really?
[2012-08-03 00:15:44 -0400] dyer: first for me
[2012-08-03 00:16:10 -0400] dyer: I even set /etc/resolv.conf to use 8.8.8.8
[2012-08-03 00:16:12 -0400] dyer: same thing
[2012-08-03 00:16:29 -0400] hoover_damm: dyer, i'd blame it on ec2
[2012-08-03 00:16:32 -0400] hoover_damm: i'm getting a 404
[2012-08-03 00:16:37 -0400] hoover_damm: not getaddrinfo not found
[2012-08-03 00:18:24 -0400] dyer: should that URL work w/o auth ?
[2012-08-03 00:18:52 -0400] dyer: and why would it matter fi another node in the same environment is working
[2012-08-03 00:19:00 -0400] dyer: they are both in qa_ec2
[2012-08-03 00:21:30 -0400] hoover_damm: it's not exactly working
[2012-08-03 00:24:46 -0400] dyer: hoover_damm, shef -l debug shows its actually a post w/ the auth headers to that URL
[2012-08-03 00:24:47 -0400] dyer: not a get
[2012-08-03 00:24:58 -0400] hoover_damm: dyer, heh yep
[2012-08-03 00:25:02 -0400] hoover_damm: dyer, what kernel?
[2012-08-03 00:25:06 -0400] hoover_damm: dyer, some old 2.6.3x?
[2012-08-03 00:25:25 -0400] dyer:  3.2.12-3.2.4.amzn1.x86_64 #1 SMP Thu Mar 22 08:00:08 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
[2012-08-03 00:25:27 -0400] hoover_damm: dyer, almost sounds like the routing garbage collection bug
[2012-08-03 00:25:44 -0400] dyer: routing garbage collection bug ?
[2012-08-03 00:25:46 -0400] hoover_damm: dyer, where you get incomplete routes to the dns server and it clears up later on
[2012-08-03 00:25:48 -0400] dyer: thats a new one
[2012-08-03 00:26:00 -0400] hoover_damm: dyer, kernel cache routing statements
[2012-08-03 00:26:13 -0400] hoover_damm: dyer, the kernel caches routing statements for all connections
[2012-08-03 00:26:36 -0400] hoover_damm: dyer, generally there's 2 statements in the cache, what happens is only 1 statement is created... so the connection appears to work to push, but not pull
[2012-08-03 00:26:49 -0400] hoover_damm: dyer, I wish I actually knew what bug that was and how to describe it properly
[2012-08-03 00:26:50 -0400] erratic__: im tired
[2012-08-03 00:26:54 -0400] hoover_damm: dyer, it's a nasty one
[2012-08-03 00:27:06 -0400] dyer: is it common ?
[2012-08-03 00:27:12 -0400] dyer: I have seen it two times today
[2012-08-03 00:27:20 -0400] dyer: never before
[2012-08-03 00:27:26 -0400] dyer: and I have been using AWS for a year now
[2012-08-03 00:27:29 -0400] dyer: and regularly
[2012-08-03 00:27:32 -0400] hoover_damm: i've been using AWS for 3 years now
[2012-08-03 00:27:35 -0400] hoover_damm: seen it about once a week
[2012-08-03 00:27:53 -0400] hoover_damm: I also see ephemeral disks fail all the time
[2012-08-03 00:27:58 -0400] hoover_damm: no one else claims to see them either
[2012-08-03 00:29:07 -0400] dyer: Is there a fix for this issue
[2012-08-03 00:29:14 -0400] hoover_damm: reboot usually
[2012-08-03 00:29:19 -0400] dyer: nice
[2012-08-03 00:29:24 -0400] dyer: well this was just a test instance
[2012-08-03 00:29:29 -0400] dyer: testing some new cookbooks
[2012-08-03 00:29:30 -0400] erratic__: so
[2012-08-03 00:30:18 -0400] erratic__: does anyone ever come in here and start swearing at people because their stuff is broke
[2012-08-03 00:30:30 -0400] erratic__: i havent seen it yet
[2012-08-03 00:31:09 -0400] erratic__: wouldnt put it past someone to go bat shit like that tho
[2012-08-03 00:38:12 -0400] hoover_damm: there's always someone eho looses their cool
[2012-08-03 00:38:16 -0400] hoover_damm: who*
[2012-08-03 00:49:45 -0400] flaccid: how do you guys usually deploy a phpmyadmin? is there a de facto method?
[2012-08-03 00:55:22 -0400] erratic__: meow meow meow
[2012-08-03 00:55:22 -0400] erratic__: wait wrong channel
[2012-08-03 00:55:22 -0400] erratic__: lol
[2012-08-03 01:21:34 -0400] skidz: hey guys.. I am trying to learn chef.. set up a vm ubuntu for the server.. got that up and running no issues.. got the windows client set up for my desktop... but when I try to issue the command.. 'knife cookbook site install getting-started' getting a error.. http://pastebin.com/FSu33Dg4 - what might I be doing wrong? Is this something that needs set up on the server before it can be downloaded?
[2012-08-03 01:22:23 -0400] philwo: skidz: did you create the directory that it says is missing?
[2012-08-03 01:22:37 -0400] skidz: yeah.. I tried that.. then it says.. thats not a git repository
[2012-08-03 01:22:51 -0400] philwo: ah, i see
[2012-08-03 01:23:01 -0400] kyank: skidz: The directory it says is missing should have been created when you cloned the standard Git repo from Opscode.
[2012-08-03 01:23:18 -0400] philwo: skidz: you probably didn't clone the standard Git repo but just created an empty folder
[2012-08-03 01:23:21 -0400] skidz: oh.. I had not done that.. might have missed a step
[2012-08-03 01:23:35 -0400] skidz: kk... thanks guys
[2012-08-03 01:24:04 -0400] kyank: Skidz: See Step 3 in this guide: http://wiki.opscode.com/display/chef/Fast+Start+Guide
[2012-08-03 01:24:13 -0400] skidz: thank kyank :)
[2012-08-03 02:08:00 -0400] bdha: http://news.perlfoundation.org/2012/08/cooking-perl-with-chef---grant-3.html # huh!
[2012-08-03 02:17:59 -0400] hoover_damm: i never knew perl was so hard
[2012-08-03 02:30:23 -0400] dyer: hoover_damm, wow, deployed a new instance and I am getting the same issue
[2012-08-03 02:30:45 -0400] biffhero: hoover_damm: git://gist.github.com/3243687.git is my error system with "-l debug" turned on.
[2012-08-03 02:31:12 -0400] dyer: two chef runs work, 3rd and everyone since have started getting the same SocketError
[2012-08-03 02:32:56 -0400] hoover_damm: dyer, haha
[2012-08-03 02:33:01 -0400] hoover_damm: dyer, dynect messing up?
[2012-08-03 02:33:06 -0400] hoover_damm: dyer, wait you put it in /etc/hosts
[2012-08-03 02:33:11 -0400] hoover_damm: dyer, hell if i know then
[2012-08-03 02:33:23 -0400] dyer: Yea, this is just fuxored
[2012-08-03 02:33:31 -0400] hoover_damm: short of dynect doing something weird a lot
[2012-08-03 02:33:35 -0400] hoover_damm: .. w t f
[2012-08-03 02:33:46 -0400] hoover_damm: and it being isnanely intermitent
[2012-08-03 02:33:58 -0400] dyer: Why would dynect be involved?
[2012-08-03 02:34:23 -0400] dyer: oh, yea
[2012-08-03 02:34:24 -0400] dyer: sorry
[2012-08-03 02:34:25 -0400] hoover_damm: dyer, that's who hosts your domain
[2012-08-03 02:34:32 -0400] dyer: yea, this one is hosted by them
[2012-08-03 02:34:37 -0400] hoover_damm: dyer, personally i'm hitting them via ipv6
[2012-08-03 02:34:40 -0400] hoover_damm: and it's sluggish as crap
[2012-08-03 02:35:23 -0400] hoover_damm: hrm
[2012-08-03 02:35:28 -0400] hoover_damm: root servers seem a bit latent tonight
[2012-08-03 02:35:41 -0400] hoover_damm: 2kms from k. and 5k ms from g.
[2012-08-03 02:36:23 -0400] hoover_damm: dyer, good luck
[2012-08-03 02:39:07 -0400] biffhero: hoover_damm:  I updated http://tickets.opscode.com/browse/CHEF-2508 with the last couple of updates.  I am Rob Walker.
[2012-08-03 02:47:07 -0400] biffhero: Is there a way to do the install of chef-solr by hand?
[2012-08-03 02:47:34 -0400] biffhero: I did some research, and I think that this is the command line.          ./chef-solr-installer -c /etc/chef/solr.rb -u chef -g root
[2012-08-03 02:47:45 -0400] biffhero: But I get an error:  /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-solr-10.12.0/bin
[2012-08-03 02:47:45 -0400] biffhero: ./chef-solr-installer:20:in `require': no such file to load -- rubygems (LoadError)
[2012-08-03 02:47:45 -0400] biffhero:         from ./chef-solr-installer:20
[2012-08-03 02:50:36 -0400] biffhero: Obviously, I don't know much about ruby.
[2012-08-03 02:55:48 -0400] biffhero: I suspect my ruby doesn't have the right library search path going on.
[2012-08-03 03:00:48 -0400] biffhero: Line 725 on https://gist.github.com/3243687 shows that the omnibus installer is trying to start chef-solr, so it must think that it was installed properly?
[2012-08-03 03:10:36 -0400] silk: ok, so my understanding was that an Array in ruby (1.8.7) is ordered, so that looping through the array should return the same order each time
[2012-08-03 03:10:57 -0400] silk: but when I put an array into an environment variable, its being reordered
[2012-08-03 03:11:39 -0400] silk: I understand that that is the nature of a hash under 1.8.7, I guess im wondering why chef is playing the with array element order
[2012-08-03 03:16:01 -0400] Gurpartap: Would 'notifies' ever perform itself, if the 'only_if' directive returns false?
[2012-08-03 03:17:18 -0400] Gurpartap: (if someone answered my question, i missed to see it due to disconnection)
[2012-08-03 03:18:41 -0400] Gurpartap: i guess it shouldn't
[2012-08-03 03:20:14 -0400] silk: It would defeat the purpose, id have thought
[2012-08-03 03:20:50 -0400] Gurpartap: yeah, though, in my use case:
[2012-08-03 03:20:54 -0400] Gurpartap: only_if  { not File.exists?(tarball_path) }; notifies :run, resources execute: 'unpack'
[2012-08-03 03:21:19 -0400] Gurpartap: i wouldn't want to redownload, but definitely would want to proceed with unpacking (since i delete the unpacked dir at end)
[2012-08-03 03:21:38 -0400] Gurpartap: so i wondered is notifies/subscribes could support this
[2012-08-03 03:21:43 -0400] Gurpartap: s/is/if/
[2012-08-03 03:21:49 -0400] Gurpartap: apparently, it wont
[2012-08-03 03:26:54 -0400] silk: so, are you using a remote_file resource to pull down the tarball?
[2012-08-03 03:28:08 -0400] silk: If so, let it worry about checking if the remote file exists or not. and then have an execute resource to unpack it with a not_if
[2012-08-03 03:39:13 -0400] flaccid: hmm can application cookbook deploy a remote tarball URL ?
[2012-08-03 03:42:01 -0400] flaccid: i'm thinkin not
[2012-08-03 03:42:20 -0400] jtimberman: flaccid: no
[2012-08-03 03:42:37 -0400] jtimberman: flaccid: well, the ruby and python ones do
[2012-08-03 03:42:46 -0400] jtimberman: the java and php are different tho
[2012-08-03 03:42:52 -0400] flaccid: i see thanks
[2012-08-03 03:42:55 -0400] jtimberman: application itself is a wrapper around deploy_revision for the most part
[2012-08-03 03:43:01 -0400] flaccid: this one is php unfortunately
[2012-08-03 03:43:29 -0400] flaccid: should i be trying to not deploy through the application resource and do it with deploy resource after?
[2012-08-03 03:49:19 -0400] flaccid: hmm, maybe i need to see how ruby cookbook does it because deploy resource can't
[2012-08-03 03:51:27 -0400] flaccid: *application_ruby
[2012-08-03 03:58:36 -0400] Gurpartap: silk: right.
[2012-08-03 04:05:15 -0400] Gurpartap: silk: i figured that there's action :create_if_missing for remote_file. just saying
[2012-08-03 04:37:20 -0400] silk: i would be more tempted to us hte checksum
[2012-08-03 05:13:51 -0400] burris: I'm trying to bootstrap an ubuntu 12.04 box running armv7l, knife tries to dl chef but it gets a 404, the url curiously refers to ubuntu-11.04 too...  is ubuntu/armv7l no longer supported?     http://s3.amazonaws.com/opscode-full-stack/ubuntu-11.04-armv7l/chef-full_10.12.0_i386.deb
[2012-08-03 05:18:43 -0400] BryanWB_: ohai chefs!
[2012-08-03 05:19:14 -0400] BryanWB_: the coming foodfightshow w/ reset and ivey is awesome, a must listen
[2012-08-03 05:55:22 -0400] tolland: whats the syntax to get back the value of a child attriute with "knife search node " -a some_child_attribut
[2012-08-03 05:55:56 -0400] tolland: o i see
[2012-08-03 05:56:14 -0400] tolland: i can get the parent and parse it
[2012-08-03 06:09:12 -0400] burris: to bootstrap my armv7l box i had to use a modified ubuntu12.04-gems template with apt because 12.04 server doesn't seem to have aptitude, and the deb install template defaults to i386 on arm
[2012-08-03 06:51:33 -0400] kyank: Im working on bootstrapping Chef Server and the Chef Clients that connect to it using AWS CloudFormation to assemble a full application stack with auto scaling and an RDS database in production.
[2012-08-03 06:51:50 -0400] kyank: Does anyone have experience with such a setup? Id love to ask a few basic questions to help me get my head around it all.
[2012-08-03 07:41:02 -0400] rguptaqubole: I need some help with installing knife-ec2 gem
[2012-08-03 07:41:34 -0400] rguptaqubole: I am on centos...
[2012-08-03 07:42:27 -0400] rguptaqubole: knife is installed at : /var/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.12.0/
[2012-08-03 07:43:18 -0400] rguptaqubole: and I installed sudo gem install knife-ec2 -i /opt/chef/embedded/lib/ruby/gems/1.9.1
[2012-08-03 07:43:41 -0400] rguptaqubole: then on runnning knife node list , it gives following error:
[2012-08-03 07:44:12 -0400] rguptaqubole: from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/knife-ec2-0.5.14/lib/chef/knife/ec2_server_list.rb:20:in `<top (required)>'
[2012-08-03 07:44:22 -0400] rguptaqubole: and so on....
[2012-08-03 07:44:27 -0400] rguptaqubole: nyone thr?
[2012-08-03 08:03:26 -0400] plu: I'm getting this error from one of my templates: NoMethodError: undefined method `-' for nil:NilClass
[2012-08-03 08:03:50 -0400] plu: any idea how to track this further down? I've been looking at all occurences of '-', but there's nothing obvious
[2012-08-03 09:47:24 -0400] skidz: does anyone know where I could find a mono recipe?
[2012-08-03 10:02:16 -0400] alex88: skidz, https://github.com/i-e-b/mono?
[2012-08-03 10:02:42 -0400] skidz: thanks :)
[2012-08-03 10:03:10 -0400] alex88: was like first google result :P
[2012-08-03 10:04:35 -0400] skidz: yeah? I search google.. chef mono, but got a lot of results with some dude last name mono :)
[2012-08-03 10:09:22 -0400] alex88: skidz, chef mono recipe :)
[2012-08-03 10:09:28 -0400] alex88: btw, np, i did that too :)
[2012-08-03 10:10:37 -0400] benner: are anyone using knife openstack plugin? i got problem using .chef/knife.rb settings. for me it only works when i specify user/pass etc in command line. any help here?
[2012-08-03 10:12:50 -0400] alex88: benner, i have it working fine with access and secret keys
[2012-08-03 10:18:20 -0400] benner: oh, i found the mistake. it works for me now to
[2012-08-03 10:20:51 -0400] alex88: good ;)
[2012-08-03 10:24:27 -0400] alexbst: jonlives - thanks.
[2012-08-03 10:33:23 -0400] jonlives: alexbst: np :)
[2012-08-03 10:44:04 -0400] eugenmayer: Good morning :) Finally after havin Chef in production for some months iam hitting the "Environment" topic, so how to deploy testing reciepes on specific nodes to see, how it works out
[2012-08-03 10:44:22 -0400] eugenmayer: Does anybody have a link to a good documentation / strategy how to work with enviroments?
[2012-08-03 11:25:37 -0400] eugenmayer1: anybody has a topi how to use chef to install PHP PECL modules?
[2012-08-03 11:27:14 -0400] eugenmayer1: ah..got it.
[2012-08-03 11:28:26 -0400] Gurpartap: Why do we 'def load_current_resource' in a provider?
[2012-08-03 11:28:53 -0400] Gurpartap: And what's the difference between current_resource and new_resource?
[2012-08-03 11:36:42 -0400] Liku: Hi, can someone please help me with following error. I'm getting after I run chef-client at node:
[2012-08-03 11:36:43 -0400] Liku: [Fri, 03 Aug 2012 12:33:06 +0100] ERROR: Running exception handlers
[2012-08-03 11:42:31 -0400] sampikesley: need to show us MOAR
[2012-08-03 11:44:11 -0400] Liku: sampikesley: what do I need to post additionally?
[2012-08-03 11:44:35 -0400] Nacef: Hey, has someone tried querying the server API from Java ?
[2012-08-03 11:46:16 -0400] sampikesley: ERROR: Running exception handlers doesn't tell us anything useful
[2012-08-03 11:50:17 -0400] Liku: sampikesley: [Fri, 03 Aug 2012 12:51:59 +0100] INFO: Loading cookbooks [apache2, aws, build-essential, chef_handler, database, firewall, hosts, iptables, mysql, openssl, php, phx-cms-qa, postfix, postgresql, rundeck, solr-tomcat, tmux, ufw, windows, xfs, xml, yum, yumrepo, zabbix]
[2012-08-03 11:50:57 -0400] Liku: sam there are nothing more
[2012-08-03 11:57:49 -0400] kyank: What is best practice for where to host the chef-repo for an application whose code is hosted on GitHub? Obviously if I have github.com/my/project, I could have github.com/my/project-chef-repo, but Im thinking I could just put my chef repo in github.com/my/project as a separate branch called chef-repo (with chef-vendor-* vendor branches). Any thoughts?
[2012-08-03 12:05:42 -0400] sampikesley: Liku: run it with -l debug
[2012-08-03 12:07:07 -0400] Liku: sampikesley:  FATAL: Chef::Exceptions::ValidationFailed: Option owner's value #<Chef::Node::Attribute:0x000000039cf420> does not match regular expression [/^([-a-zA-Z0-9_.]+)$/, /^\d+$/]
[2012-08-03 12:07:34 -0400] Liku: sampikesley, how can I find out what arrtibute is it?
[2012-08-03 12:11:52 -0400] sampikesley: it tells you it left a stacktrace, right?
[2012-08-03 12:15:39 -0400] Liku: sampikesley: yes
[2012-08-03 12:16:36 -0400] Liku: sampikesley: http://d.pr/i/TxwK
[2012-08-03 12:27:37 -0400] eugenmayer1: when trying to edit the __default  Eviroment, i get a WSOD. Is this known?
[2012-08-03 12:33:11 -0400] eugenmayer1: When you first create an organization, only one environment will be setup and it will be named the "_default" environment. You can use this environment for viewing, but editing is restricted so you can't modify it. If you try to, you will get an error similar to this:
[2012-08-03 12:33:13 -0400] eugenmayer1: arg...
[2012-08-03 12:33:50 -0400] eugenmayer1: manfirst line..
[2012-08-03 12:33:51 -0400] Liku: sampikesley: and the strangest thing is that each Attribute number is different
[2012-08-03 12:34:39 -0400] eugenmayer1: is there any way to move all clients from env X to Y without editing them manually in the UI?
[2012-08-03 12:49:32 -0400] sampikesley: So that appears to be a png
[2012-08-03 12:49:37 -0400] sampikesley: Unconventional approach
[2012-08-03 12:49:39 -0400] sampikesley: Anyway
[2012-08-03 12:49:53 -0400] sampikesley: phx-cms-qa
[2012-08-03 12:49:56 -0400] sampikesley: WTF is that?
[2012-08-03 12:57:02 -0400] Liku: sampikesley, its cookbokk name
[2012-08-03 13:01:50 -0400] sampikesley: And there's something broken in it
[2012-08-03 13:06:08 -0400] Liku: sampikesley, ok, will check, thank you
[2012-08-03 13:25:48 -0400] eugenmayer1: strange, pretty confusing
[2012-08-03 13:26:39 -0400] eugenmayer1: Having a __default, live and testing enviroment, iam trying to have a different override value in a role between live(default) and testingbut anytime i change it, it changes for both
[2012-08-03 13:28:33 -0400] eugenmayer1: oh..thats really confusing
[2012-08-03 13:28:52 -0400] BartJol: is it possible (for newby testing purposes) to use your chef server als as chef-node
[2012-08-03 13:28:56 -0400] eugenmayer1: while you can change the run-list per role per env, you cant do that vor vars / overrides of roles, only for envirments
[2012-08-03 13:29:11 -0400] eugenmayer1: BartJol: of course
[2012-08-03 13:29:18 -0400] eugenmayer1: its even common rather then nuby
[2012-08-03 13:29:33 -0400] BartJol: thought so, but just checking, thanks
[2012-08-03 13:49:19 -0400] eugenmayer1: how would i check, during reciepe runtime, in a reciepe, whether a specific reciepe is installed / going to be installed? Background, i have a php dev reciepe, which install xhprof / xdebug .. i want the php reciepe to check, wheather that reciepe is installed, otherwise trying to remove those module, so the dont stay on the server when php dev has been removed
[2012-08-03 14:48:38 -0400] geekbri: eugenmayer1: the node['recipes'] attributes holds an expanded list of recipes for that node.  you could just do a .includes? on it
[2012-08-03 14:48:46 -0400] geekbri: sorry I believe that is include? not includes?
[2012-08-03 14:51:12 -0400] eugenmayer1: geekbri: i think, there is one special case, AFAIR
[2012-08-03 14:51:50 -0400] eugenmayer1: that list holds the "last installed" recipies. So if you deploy dev and php at the same time, the first time, php will think, dev is not installed
[2012-08-03 14:52:13 -0400] eugenmayer1: that is just something i remember in my forehead, but maybe iam wrong?
[2012-08-03 14:53:55 -0400] eugenmayer1: you are going for a node['recipes'].includes('cookbook::php-dev")? 'do not cleanup' else cleanup
[2012-08-03 14:55:00 -0400] geekbri: eugenmayer1: Yes, that is what I was suggesting.  Using include?
[2012-08-03 14:57:19 -0400] eugenmayer1: will try geekbri, thank you!
[2012-08-03 14:57:24 -0400] geekbri: :)
[2012-08-03 15:00:07 -0400] eugenmayer1: karma geekbri?
[2012-08-03 15:00:13 -0400] eugenmayer1: karma geekbri?
[2012-08-03 15:00:21 -0400] geekbri: huh?
[2012-08-03 15:00:31 -0400] eugenmayer1: just curious if there is a bot
[2012-08-03 15:00:37 -0400] eugenmayer1: (e.g. for karma)
[2012-08-03 15:01:28 -0400] geekbri: Ah, I'll settle for real world karma
[2012-08-03 15:02:11 -0400] eugenmayer1: then you just added something to your karama :)
[2012-08-03 15:04:12 -0400] jtimberman: bawt: !karma geekbri
[2012-08-03 15:04:16 -0400] jtimberman: !karma
[2012-08-03 15:04:16 -0400] bawt: karma for jtimberman: 11
[2012-08-03 15:04:21 -0400] jtimberman: !karma geekbri
[2012-08-03 15:04:21 -0400] bawt: geekbri has neutral karma
[2012-08-03 15:04:23 -0400] jtimberman: :)
[2012-08-03 15:04:35 -0400] jtimberman: eugenmayer1: the bot is bawt :)
[2012-08-03 15:09:59 -0400] eugenmayer1: bawt: karma geekyogi
[2012-08-03 15:10:00 -0400] bawt: geekyogi has neutral karma
[2012-08-03 15:10:06 -0400] eugenmayer1: geekyogi++
[2012-08-03 15:10:13 -0400] eugenmayer1: bawt: karma geekyogi
[2012-08-03 15:10:13 -0400] bawt: karma for geekyogi: 1
[2012-08-03 15:10:18 -0400] eugenmayer1: Perfect
[2012-08-03 15:10:28 -0400] eugenmayer1: jtimberman: thank you :)
[2012-08-03 15:11:42 -0400] cnf: hmm
[2012-08-03 15:11:51 -0400] cnf: running chef-server on a PIII is a tad slow
[2012-08-03 15:12:04 -0400] jtimberman: cnf: I wouldn't recommend it.
[2012-08-03 15:12:25 -0400] cnf: jtimberman: i know
[2012-08-03 15:12:32 -0400] cnf: jtimberman: it's a temporary setup
[2012-08-03 15:12:39 -0400] cnf: until i can get more resources
[2012-08-03 15:12:47 -0400] cnf: at least it is a quad core :P
[2012-08-03 15:12:53 -0400] eugenmayer1: PIII is a resource?
[2012-08-03 15:13:05 -0400] cnf: quad PIII xeon with 6 gig ram
[2012-08-03 15:13:14 -0400] cnf: eugenmayer1: no, it's a liability
[2012-08-03 15:13:17 -0400] eugenmayer1: well, thats something different
[2012-08-03 15:13:23 -0400] itwasntandy: its an antique
[2012-08-03 15:14:23 -0400] eugenmayer1: anybody famaliar with FPM in here? i had the setup running, tried to replicate it using chef, but know i cant. Seems like the apache process can connect to the socket, which actuall has the right permissions and all that. Just cant find the issue and the logs are close to useless
[2012-08-03 15:15:22 -0400] jtimberman: oh, I read Pentium 3, like, from the 90's or whatever. :)
[2012-08-03 15:15:52 -0400] cnf: jtimberman: yes
[2012-08-03 15:15:55 -0400] cnf: jtimberman: pentium 3
[2012-08-03 15:16:01 -0400] cnf: that;s what i said
[2012-08-03 15:16:18 -0400] cnf: there are 4 of them in one machine, though
[2012-08-03 15:16:33 -0400] geekbri: Oh no, neutral karma!
[2012-08-03 15:16:40 -0400] jtimberman: multicore Pentium 3?
[2012-08-03 15:16:44 -0400] jtimberman: ooohhh
[2012-08-03 15:16:59 -0400] jtimberman: multiple physical CPUs, rather than multiple cores in a single one.
[2012-08-03 15:17:06 -0400] cnf: jtimberman: exactly :P
[2012-08-03 15:17:07 -0400] jtimberman: how 90's ;)
[2012-08-03 15:17:11 -0400] cnf: yeah :P
[2012-08-03 15:17:14 -0400] jtimberman: hehehhehee
[2012-08-03 15:17:25 -0400] cnf: it sucks
[2012-08-03 15:17:47 -0400] geekbri: Oh man the 90s?  Check out my overclocked dual celerons!!!
[2012-08-03 15:18:03 -0400] geekbri: maybe blue blockers were the 80s
[2012-08-03 15:18:46 -0400] cnf: :P
[2012-08-03 15:18:51 -0400] eugenmayer1: back then, those setup, still only had one 32bit bus or?
[2012-08-03 15:19:21 -0400] eugenmayer1: and the usual CPU cache for the registers, or? So basically, completly useless
[2012-08-03 15:19:29 -0400] cnf: yeah, well
[2012-08-03 15:19:37 -0400] cnf: it's that, or nothing atm
[2012-08-03 15:20:10 -0400] geekbri: the 90's were a rad time man.  Running window maker, with my dual overclocked celerons, reading slashdot and installing my student licensed version of vmware
[2012-08-03 15:20:15 -0400] geekbri: Gnarly
[2012-08-03 15:20:41 -0400] cwj: heheh
[2012-08-03 15:20:59 -0400] cwj: flashbacks triggered
[2012-08-03 15:21:40 -0400] jforest: ou had vmware?
[2012-08-03 15:21:42 -0400] jforest: man.
[2012-08-03 15:22:00 -0400] geekbri: It its very early stages :)
[2012-08-03 15:22:02 -0400] jforest: I only had one celeron 300a overclocked to 450
[2012-08-03 15:22:04 -0400] geekbri: Thats how I wrote my college essays!
[2012-08-03 15:22:05 -0400] jforest: it was glorious
[2012-08-03 15:22:21 -0400] geekbri: Wine was too much of a pain!
[2012-08-03 15:22:29 -0400] jforest: I never got into wine
[2012-08-03 15:22:33 -0400] jforest: I just did things without windows
[2012-08-03 15:22:44 -0400] geekbri: I didn't like abiword or whatever I was using at the time
[2012-08-03 15:22:57 -0400] jforest: pre-staroffice
[2012-08-03 15:23:37 -0400] jforest: so geekbri: I have my chef stuff going well with aws
[2012-08-03 15:23:40 -0400] jforest: I am very pleased so far
[2012-08-03 15:23:45 -0400] geekbri: jforest: most excellent
[2012-08-03 15:23:59 -0400] jforest: just a couple things right now
[2012-08-03 15:24:04 -0400] jforest: but environments will be my friend
[2012-08-03 15:26:06 -0400] eugenmayer1: ARG, they have stolen 45mins of my life you are not allowed to name your pool "default" .. well, GREAT. why ever document reserved wordsand even that is so..damn obvious to use..
[2012-08-03 15:35:39 -0400] ianmatthew: hi all, omnibus question
[2012-08-03 15:35:59 -0400] ianmatthew: is there a way to have omnibus install to a path other than /opt
[2012-08-03 15:36:19 -0400] ianmatthew: reason being, some of our cookbooks mount over /opt
[2012-08-03 15:36:31 -0400] ianmatthew: and then there is sadness
[2012-08-03 15:39:25 -0400] jtimberman: ianmatthew: no, its hardcoded in the build of the package, iirc.
[2012-08-03 15:39:54 -0400] ianmatthew: thats what i figured
[2012-08-03 15:40:36 -0400] yfeldblum: ianmatthew, why mount over /opt?
[2012-08-03 15:41:05 -0400] ianmatthew: they are existing cookbooks that i am not able to change
[2012-08-03 15:42:57 -0400] yfeldblum: ianmatthew, sure, just curious what the motivation is for them to mount over /opt
[2012-08-03 15:45:35 -0400] ianmatthew: eh, thats the nfs mountpoint the client chose
[2012-08-03 15:46:10 -0400] ianmatthew: youd have to ask them for the reasoning for /opt specifically :P
[2012-08-03 15:49:00 -0400] sampikesley: they mount NFS at /opt/ ?
[2012-08-03 15:49:45 -0400] ianmatthew: yes, but we're veering off topic now, thanks all.
[2012-08-03 15:55:54 -0400] geekyogi: @eugenmayer1 Karma!
[2012-08-03 15:58:59 -0400] mathieue__1: hi all ! my knife search command return empty ips field for node. any idea ?
[2012-08-03 16:00:10 -0400] sampikesley: knife search?
[2012-08-03 16:00:10 -0400] bawt: knife search is working fine at the same time
[2012-08-03 16:00:18 -0400] sampikesley: not knife show?
[2012-08-03 16:00:33 -0400] sampikesley: oh sorry, ignore me
[2012-08-03 16:00:36 -0400] sampikesley: I'm being a bellend
[2012-08-03 16:00:37 -0400] mathieue__1: knife search node 'munin*'
[2012-08-03 16:01:36 -0400] mathieue__1: knife  node show  munin02.xxx.com
[2012-08-03 16:01:42 -0400] mathieue__1: its the same
[2012-08-03 16:01:51 -0400] mathieue__1: empty ip
[2012-08-03 16:02:10 -0400] mathieue__1: knife --version
[2012-08-03 16:02:10 -0400] mathieue__1: Chef: 0.10.8
[2012-08-03 16:02:52 -0400] mathieue__1: i have no dns setup. its a lan. maybe the issue is related
[2012-08-03 16:04:24 -0400] sampikesley: the node must have an ip, though
[2012-08-03 16:08:30 -0400] jimcrofty: Hi folks, we're using Chef to manage linux hosts. I've just started trying out chef on windows. Bootstrapping works fine. But the nodes never show up in any knife search results. I couldn't find an open ticket for this. Anyone seen this before?
[2012-08-03 16:09:23 -0400] jimcrofty: 'knife status' and 'knife node list' show them, but 'knife search node 'name:*' (or any other search term) never return the windows nodes.
[2012-08-03 16:10:31 -0400] jimcrofty: btw, using Chef 10.12
[2012-08-03 16:25:25 -0400] Gurpartap: jimcrofty: does windows support ohai? and hence, does windows support chef search?
[2012-08-03 16:25:29 -0400] Gurpartap: check out the compatibility
[2012-08-03 16:25:43 -0400] Gurpartap: i dont think windows supports ohai (which chef uses for search parameters knowledge)
[2012-08-03 16:26:10 -0400] sascha_d: ohai runs on windows
[2012-08-03 16:26:16 -0400] sascha_d: and reports back to chef-server
[2012-08-03 16:26:31 -0400] sascha_d: you can check this by running ohai at the command line by itself
[2012-08-03 16:26:45 -0400] jimcrofty: yup, if I run 'knife node show AMAZONA-Q1LP10E -l' I get all the expected info about the node
[2012-08-03 16:27:15 -0400] sascha_d: but your search doesn't work
[2012-08-03 16:27:33 -0400] jimcrofty: correct
[2012-08-03 16:28:34 -0400] jimcrofty: info is returned when i use the specific node name, chef-client runs fine, I just can't find the node using any search terms.
[2012-08-03 16:28:43 -0400] sascha_d: but a linux node search works?
[2012-08-03 16:28:51 -0400] jessicab: jimcrofty: weird, i havent seen that on windows nodes with hosted chef at all.. are you running xp or something perhaps?
[2012-08-03 16:28:52 -0400] jimcrofty: yes
[2012-08-03 16:29:14 -0400] sascha_d: do you get an error or an empty set?
[2012-08-03 16:29:23 -0400] jimcrofty: I'm running a local 10.12 server. the win OS is 2008R2
[2012-08-03 16:29:28 -0400] jimcrofty: empty set, 0 results
[2012-08-03 16:31:11 -0400] jessicab: hm weird, yea, 2008r2 should work fine
[2012-08-03 16:31:48 -0400] sascha_d: so, can you do a knife node list, showing us the names of the nodes - you don't have to paste the whole thing if it's huge, I just want to look at what's being output; a knife node search for a linux node and show us the output and then the same for a windows node from the list? and  then stick the whole thing in a gist or pastie?
[2012-08-03 16:31:59 -0400] jimcrofty: yeah, I only noticed there was a problem when I tried to run 'knife winrm' commands on the 'role[wintest]'
[2012-08-03 16:32:12 -0400] jimcrofty: sure, just a sec
[2012-08-03 16:33:06 -0400] jimcrofty:   chef-repo git:(master) knife node list
[2012-08-03 16:33:07 -0400] jimcrofty:   AMAZONA-Q1LP10E
[2012-08-03 16:33:08 -0400] jimcrofty:   AMAZONA-TSQ3B7Q
[2012-08-03 16:33:08 -0400] jimcrofty:   i-012b4149
[2012-08-03 16:33:08 -0400] jimcrofty:   nimbus
[2012-08-03 16:33:08 -0400] jimcrofty:   chef-repo git:(master) knife search node 'name:i*'
[2012-08-03 16:33:08 -0400] jimcrofty: 1 items found
[2012-08-03 16:33:08 -0400] jimcrofty: Node Name:   i-012b4149
[2012-08-03 16:33:09 -0400] jimcrofty: Environment: Development
[2012-08-03 16:33:09 -0400] jimcrofty: FQDN:        ip-10-20-0-223.localdomain
[2012-08-03 16:33:10 -0400] jimcrofty: IP:          10.20.0.223
[2012-08-03 16:33:13 -0400] sascha_d: gah
[2012-08-03 16:33:15 -0400] sascha_d: don't do that
[2012-08-03 16:33:17 -0400] jimcrofty: Run List:    role[base], role[zenoss_hub]
[2012-08-03 16:33:18 -0400] jimcrofty: Roles:       zenoss_hub, base
[2012-08-03 16:33:19 -0400] jimcrofty: Recipes:     snmp, zenoss::server
[2012-08-03 16:33:20 -0400] jimcrofty: Platform:    ubuntu 12.04
[2012-08-03 16:33:20 -0400] jimcrofty:   chef-repo git:(master) knife search node 'name:A*'
[2012-08-03 16:33:22 -0400] jimcrofty: 0 items found
[2012-08-03 16:33:22 -0400] jimcrofty:   chef-repo git:(master)
[2012-08-03 16:33:23 -0400] jimcrofty: sorry
[2012-08-03 16:33:24 -0400] sascha_d: gist.github.com
[2012-08-03 16:33:25 -0400] sascha_d: :)
[2012-08-03 16:33:29 -0400] jimcrofty: good call
[2012-08-03 16:34:24 -0400] jimcrofty: https://gist.github.com/3249299
[2012-08-03 16:34:54 -0400] sascha_d: ok, I will study
[2012-08-03 16:35:11 -0400] sascha_d: all of my chef windows action has been solo-based, but we should be able to figure out if this a syntax/character output issue or an actual bug. Would be nice if someone else running windows and chef-server could test against their stuff
[2012-08-03 16:35:24 -0400] paulmooring: jimcrofty: on the OSS server?
[2012-08-03 16:35:52 -0400] jimcrofty: yup, 10.12 running on Ubuntu 12.04 LTS
[2012-08-03 16:36:06 -0400] sascha_d: what if you search full name? Did you tell us that already?
[2012-08-03 16:36:13 -0400] paulmooring: have you brought up any new Linux nodes since this started?
[2012-08-03 16:36:27 -0400] jimcrofty: no results for full name search either
[2012-08-03 16:36:30 -0400] sascha_d: knife search node 'name:AMAZONA-Q1LP10E'
[2012-08-03 16:36:33 -0400] sascha_d: ok
[2012-08-03 16:36:42 -0400] sascha_d: what about *ZON* ?
[2012-08-03 16:37:00 -0400] jimcrofty: nothing on *ZON*
[2012-08-03 16:37:06 -0400] paulmooring: jimcrofty: My guess would be it's a problem with the expander/solr service on the server
[2012-08-03 16:37:21 -0400] sascha_d: fascinating
[2012-08-03 16:37:23 -0400] paulmooring: knife node list doesn't need indexing to function properly to work
[2012-08-03 16:37:24 -0400] sascha_d: yeah
[2012-08-03 16:37:25 -0400] paulmooring: search does
[2012-08-03 16:37:31 -0400] jimcrofty: haven't tried adding a new linux instance since this started. i'll check that out.
[2012-08-03 16:38:29 -0400] paulmooring: jimcrofty: you might also check the solr logs on the server
[2012-08-03 16:38:36 -0400] sascha_d: def something to be said for hosted chef in terms of eliminating weirdness issues like this
[2012-08-03 16:40:16 -0400] jimcrofty: i if could convince the folk holding the purse strings we'd be using it :)
[2012-08-03 16:40:28 -0400] jimcrofty: i'm just firing up a new linux instance now.
[2012-08-03 16:42:21 -0400] paulmooring: also +1 to Hosted Chef being great :)
[2012-08-03 16:43:32 -0400] siezer: it feels faster lately... did we sprinkle some more erlang on it?
[2012-08-03 16:44:18 -0400] paulmooring: siezer: There's always a steady stream of erlang sprinklage
[2012-08-03 16:47:29 -0400] yatesy: ampledata: awesome nick considering you're from splunk :)
[2012-08-03 16:48:44 -0400] ampledata: yeah bitrancher just seemed to kitschy
[2012-08-03 16:49:09 -0400] yatesy: "logmuncher" :)
[2012-08-03 16:50:05 -0400] jimcrofty: ok, fired up a brand new ubuntu instance and it's found in searches
[2012-08-03 16:50:21 -0400] jimcrofty: seems windows specific
[2012-08-03 16:51:07 -0400] paulmooring: jimcrofty: What version of chef-client?
[2012-08-03 16:52:05 -0400] jimcrofty: 10.12.0 on all nodes
[2012-08-03 16:54:40 -0400] sascha_d: fascinating
[2012-08-03 16:54:47 -0400] sascha_d: did the solr log tell you anything interesting?
[2012-08-03 16:55:53 -0400] jimcrofty: nothing obvious but to be honest I'm not sure what I'm looking for with solr
[2012-08-03 16:56:16 -0400] paulmooring: jimcrofty: is there also an expander log?
[2012-08-03 16:56:35 -0400] jimcrofty: expander.log is empty
[2012-08-03 16:56:55 -0400] paulmooring: generally for search it goes client -> opscode-chef -> rabbitmq -> opscode-expander -> solr
[2012-08-03 16:57:22 -0400] paulmooring: so checking server side logs in that order should hopefully give you an error message at some point
[2012-08-03 16:57:48 -0400] jimcrofty: ok, will look into it.
[2012-08-03 16:57:48 -0400] paulmooring: but if it's busted in rabbit, the solr logs are likely just empty
[2012-08-03 16:58:42 -0400] paulmooring: If it's Windows only, it also wouldn't hurt to check out the client debug too: `chef-client -l debug`
[2012-08-03 16:59:01 -0400] jimcrofty: i did blindly try a 'knife index rebuild' at some point, but no joy there
[2012-08-03 16:59:17 -0400] jimcrofty: ok, will try debug modes on client and server components
[2012-08-03 16:59:45 -0400] paulmooring: does that work? 'knife index rebuild' I mean
[2012-08-03 17:00:08 -0400] jimcrofty: well in runs without spitting out any errors but didn't fix the search issue
[2012-08-03 17:00:13 -0400] sascha_d: I know it sounds dorky but you could try restarting the search/indexing serverices. I have done that in the past.
[2012-08-03 17:00:38 -0400] jimcrofty: I've tried a full chef-server reboot (it's just a testing/dev instance)
[2012-08-03 17:01:15 -0400] jimcrofty: going to have to run now though, thanks for all the help and pointers. i might be back :)
[2012-08-03 17:01:31 -0400] cakehero: Should I cron chef-solo on a few servers?
[2012-08-03 17:01:41 -0400] cakehero: to simulate chef-client + chef-server?
[2012-08-03 17:01:46 -0400] cakehero: (periodic checks for updates)
[2012-08-03 17:04:26 -0400] sascha_d: so, check it out: http://tickets.opscode.com/browse/CHEF-2397
[2012-08-03 17:05:21 -0400] sascha_d: not sure if this is the same problem or if it's still an issue, but similar behavior has been reported
[2012-08-03 17:06:09 -0400] dwhsix: is there (ever) a reason to leave nodes defined in chef server when there is no corresponding physical server?
[2012-08-03 17:06:31 -0400] dwhsix: (in our case I'm pretty sure these orphan nodes are just from errors in deployments, but wondering)
[2012-08-03 17:11:06 -0400] xerxas: hi all , anyone managing block devices, filesystems, mount points with chef ?
[2012-08-03 17:11:53 -0400] xerxas: I work on ec2 , I want /dev/xvda2 to be btrfs and mounted somewhere else than /mnt , any hints, advices ? any recommanded cookbooks ?
[2012-08-03 17:15:04 -0400] Randm: that'd be more of your provisioning stage, since it's not idempotent to have chef manage that
[2012-08-03 17:15:33 -0400] xerxas: Randm: knife does some minimal provisionning, can I put that here ?
[2012-08-03 17:15:45 -0400] xerxas: anyway, it's still doable as idempotent, right ?
[2012-08-03 17:15:50 -0400] Randm: possibly
[2012-08-03 17:16:06 -0400] Strav-: I'm getting a strange error with the opscode python cookbook.  It looks like I'm not the only one who has had this issue, but none of the fixes recommended worked.  I'm using version 1.0.8 of the cookbook.
[2012-08-03 17:16:20 -0400] Strav-: Error info is at http://pastie.org/4384898
[2012-08-03 17:16:37 -0400] Strav-: [2012-08-03T17:14:07+00:00] FATAL: Mixlib::ShellOut::ShellCommandFailed: python_pip[virtualenv] (python::virtualenv line 23) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2012-08-03 17:17:14 -0400] Strav-: Ubuntu Precise running under Vagrant
[2012-08-03 17:21:04 -0400] xerxas: Randm: I just managed do it pretty easily , maybe I'll have some bugs, but works for now !
[2012-08-03 17:23:31 -0400] evilantnie: @Strav-: I had some issues with the java cookbook and precise.... one sec, checking what I changed
[2012-08-03 17:26:10 -0400] cakehero: There is a way to keep chef-solo inside itself, can someone point me to the docs on that?
[2012-08-03 17:27:07 -0400] evilantnie: @Strav: it looks like they switched from 'x86_64' to 'amd64' in precise for the platform arch
[2012-08-03 17:27:23 -0400] evilantnie: don't know if the python cook book is referencing that, but it may be part of the problem
[2012-08-03 17:32:00 -0400] jameson: what is a..
[2012-08-03 17:32:17 -0400] jameson: good & simple cookbook example
[2012-08-03 17:32:24 -0400] jameson: that I can show to someone who has no idea what cookbooks are.
[2012-08-03 17:33:11 -0400] jameson: cookbook?
[2012-08-03 17:33:11 -0400] bawt: cookbook is in the Web UI in the cookbook list correctly
[2012-08-03 17:33:52 -0400] jessicab: this is more of a description than an example, but explains cookbooks pretty well - http://wiki.opscode.com/display/chef/Introduction+to+Cookbooks+and+More
[2012-08-03 17:34:31 -0400] jessicab: in guides we usually use the getting-started cookbook as an example.. but it doesnt have attributes or files or anything too fancy, just an example of a template getting made
[2012-08-03 17:35:09 -0400] jameson: mm'
[2012-08-03 17:37:03 -0400] jameson: i'll have'em start with the wiki
[2012-08-03 17:42:58 -0400] Strav-: ahh interesting
[2012-08-03 17:43:19 -0400] Strav-: I've uploaded 1.0.8 to the server, but the client is still downloading 1.0.6
[2012-08-03 17:43:23 -0400] Strav-: why would it do that?
[2012-08-03 17:46:52 -0400] jessicab: Strav-: environment version constraints perhaps?
[2012-08-03 17:48:31 -0400] filler: any best practices for dealing with debian_frontend readline in apt provider?
[2012-08-03 17:48:50 -0400] filler: debs that want to prompt via readline for config options, etc.
[2012-08-03 17:49:49 -0400] geekbri: can't you preseed?
[2012-08-03 17:50:37 -0400] filler: an approach which uses debconf-set-selections ?
[2012-08-03 17:51:04 -0400] eugenmayer1: filler: yes preseeding, see the java cookbook
[2012-08-03 17:51:06 -0400] filler: pointing to a seed, etc?  i suppose.
[2012-08-03 17:51:07 -0400] eugenmayer1: or the mysql cookbook
[2012-08-03 17:51:09 -0400] filler: eugenmayer1: danke.
[2012-08-03 17:51:22 -0400] eugenmayer1: yes, its implemented into apt
[2012-08-03 17:53:16 -0400] eugenmayer1: filler: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L38
[2012-08-03 17:53:37 -0400] eugenmayer1: that is a small trick for reinstallations, as preseeding initally was only for inital installs, not reconfigurations
[2012-08-03 17:56:31 -0400] eugenmayer1: filler: http://wiki.opscode.com/display/chef/Resources#Resources-Package
[2012-08-03 17:57:27 -0400] eugenmayer1: normally its meant to use response_file to directly trigger the seed, but that only works for initial installations, so i guess, at least thats what i do and i seen in the mystl package, peolpe also setup for the template / cmd way.
[2012-08-03 17:58:51 -0400] beandip: Oy vey
[2012-08-03 17:59:00 -0400] beandip: I'm having a hell of a time with the logstash recipe
[2012-08-03 17:59:22 -0400] beandip: anyone using the community logstash cookbook
[2012-08-03 17:59:24 -0400] beandip: ?
[2012-08-03 17:59:38 -0400] beandip: I'm getting this during the build of jruby:
[2012-08-03 18:00:01 -0400] beandip: # Build jruby from source targeted at 1.9 - patch that, yo.
[2012-08-03 18:00:04 -0400] beandip: Error: JAVA_HOME is not defined correctly.
[2012-08-03 18:00:05 -0400] beandip:   We cannot execute /usr/lib/jvm/java-6-openjdk//bin/java
[2012-08-03 18:00:23 -0400] beandip: Not sure why JAVA_HOME is not being set properly
[2012-08-03 18:03:01 -0400] beandip: doh!
[2012-08-03 18:03:04 -0400] beandip: nevermind
[2012-08-03 18:03:07 -0400] beandip: found my answer
[2012-08-03 18:11:51 -0400] behemphi: OK, I am attempting to use the very new uwsgi cookbook.
[2012-08-03 18:12:09 -0400] behemphi: THere are a couple of additions I would like to make to it
[2012-08-03 18:12:20 -0400] behemphi: so how do I contribute in this fashion?
[2012-08-03 18:13:54 -0400] Strav-: Hrmm, I'm getting 412 Precondition Failed due to a non existant cookbook version
[2012-08-03 18:14:01 -0400] Strav-: how can I tell where that constraint is coming from?
[2012-08-03 18:14:21 -0400] vluther: the role
[2012-08-03 18:15:06 -0400] Strav-: It doesn't give me any versions
[2012-08-03 18:15:22 -0400] Strav-: I have 1.0.8 of the python cookbook installed, but it really really wants 1.0.6
[2012-08-03 18:15:44 -0400] Strav-: I've deleted and reuploaded the roles, done a forced update of all the cookbooks, still no idea at all where this constraint is coming from
[2012-08-03 18:21:04 -0400] jameson: ?search
[2012-08-03 18:43:55 -0400] miah: hi
[2012-08-03 18:43:59 -0400] geekbri: moin
[2012-08-03 18:44:46 -0400] miah: behemphi: hi
[2012-08-03 18:44:50 -0400] miah: contributing?
[2012-08-03 18:44:50 -0400] bawt: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-08-03 18:44:56 -0400] miah: behemphi: read that =)
[2012-08-03 18:46:03 -0400] behemphi: thx miah, I am looking here: http://community.opscode.com/cookbooks/uwsgi
[2012-08-03 18:46:09 -0400] behemphi: this is where i downloaded it from
[2012-08-03 18:46:21 -0400] behemphi: there is no github link
[2012-08-03 18:46:31 -0400] behemphi: that is what confused me
[2012-08-03 18:47:57 -0400] miah: you could message him. i found his github but that cookbook isn't on it.
[2012-08-03 18:48:02 -0400] jameson: behemphi: https://github.com/mattupstate/wsgi-cookbooks
[2012-08-03 18:48:33 -0400] jameson: that one an application stack
[2012-08-03 18:49:17 -0400] behemphi: OK so, forgive I am new to this aspect of things.
[2012-08-03 18:49:26 -0400] behemphi: which is the "official" cookbook?
[2012-08-03 18:49:40 -0400] miah: 'official' is up to you =)
[2012-08-03 18:49:47 -0400] jameson: ^ truth
[2012-08-03 18:49:48 -0400] miah: official is the one you use and trust the most
[2012-08-03 18:49:57 -0400] jameson: ^ double true
[2012-08-03 18:50:54 -0400] miah: there are cookbooks that opscode has written, and there are tons of people in the community who have forked, written from scratch, etc.. there is tons of duplicated code and no real "this is the best one, you should only use this one".
[2012-08-03 18:51:22 -0400] behemphi: OK, so how does a cookbook git to be part of the opscode-cookbooks project?
[2012-08-03 18:51:27 -0400] behemphi: https://github.com/opscode-cookbooks
[2012-08-03 18:51:38 -0400] miah: those are cookbooks that opscode maintains
[2012-08-03 18:51:41 -0400] behemphi: I have been thinking of that as the gold standard
[2012-08-03 18:51:43 -0400] behemphi: ah ha
[2012-08-03 18:51:47 -0400] miah: its not really.
[2012-08-03 18:51:56 -0400] miah: those cookbooks are mostly community supported
[2012-08-03 18:51:59 -0400] jameson: ^ mostly truth
[2012-08-03 18:52:06 -0400] miah: i dont think anybody at opscode is really doing cookbook development
[2012-08-03 18:52:13 -0400] hoover_damm: jtimberman tries
[2012-08-03 18:52:14 -0400] behemphi: man I got me a preacher and a choir !  :-0
[2012-08-03 18:52:16 -0400] hoover_damm: but time is his devil
[2012-08-03 18:52:18 -0400] miah: i mean, they might be doing some. but i doubt its anybodies priority
[2012-08-03 18:52:24 -0400] hoover_damm: it is
[2012-08-03 18:52:28 -0400] Jay_Levitt: speaking of... jtimberman: would you accept a pull request for a postfix::sasl_auth_encrypted recipe that's pretty much what's in your blog post?
[2012-08-03 18:52:45 -0400] jameson: http://jtimberman.posterous.com/guide-to-writing-chef-cookbooks
[2012-08-03 18:52:47 -0400] hoover_damm: cookbooks are a constant evolution
[2012-08-03 18:52:51 -0400] miah: yup
[2012-08-03 18:52:52 -0400] jameson: i follow that for writing mine
[2012-08-03 18:52:55 -0400] hoover_damm: one day what sucks
[2012-08-03 18:52:58 -0400] hoover_damm: will work the next
[2012-08-03 18:52:59 -0400] miah: just like any software project
[2012-08-03 18:53:00 -0400] hoover_damm: and vise versa
[2012-08-03 18:54:18 -0400] behemphi: hmmm, OK, I need to think really hard about workflow and such then.  Thanks very much, I will get that reading done!
[2012-08-03 18:56:03 -0400] geekbri: What we need to do is create a jtimberman factory.
[2012-08-03 18:59:00 -0400] hoover_damm: it was nice when i had one that allowed me to do that
[2012-08-03 19:16:17 -0400] miah: im in that mode currently
[2012-08-03 19:17:20 -0400] miah: and i just realized somebody already wrote a template pattern nagios_config gem.. soooooooooooooo.. i will hopefully finish this nagios provider stuff today
[2012-08-03 19:17:34 -0400] cheeseplus: I'm trying to get there, just having to polish up infrastructure in the new colo
[2012-08-03 19:17:43 -0400] miah: nice
[2012-08-03 19:17:54 -0400] cheeseplus: chef decided to ruin my morning though because of one bad hosts entry
[2012-08-03 19:18:02 -0400] miah: doh
[2012-08-03 19:18:19 -0400] miah: i think lunch arrived.. yay zerocater
[2012-08-03 19:18:29 -0400] cheeseplus: locked us out of all our machines because nslcd (pam/nss) pointed to a bad ldap server because the hosts file that chef pushed had a bad entry
[2012-08-03 19:18:45 -0400] cheeseplus: it was crazy times (tm)
[2012-08-03 19:19:48 -0400] cheeseplus: chef was also doing key provisioning based on the results of "getent" which was failing on boxes looking at the bad slave
[2012-08-03 19:20:07 -0400] cheeseplus: hooray for cascading failutes
[2012-08-03 19:20:12 -0400] cheeseplus: failures*
[2012-08-03 20:32:45 -0400] jameson: so I get the 400 page.. when I launch 4 chef-clients at once it seems
[2012-08-03 20:39:43 -0400] jtimberman: hoover_damm: Me too!
[2012-08-03 20:39:58 -0400] jtimberman: (re: job working on cookbooks all day)
[2012-08-03 20:42:06 -0400] yfeldblum: jtimberman, might think about working on some code one of these days ... everybody with a kitchen and some spare time can write a cookbook
[2012-08-03 20:44:24 -0400] jameson: -_-
[2012-08-03 20:44:36 -0400] jameson: jtimberman: hey you have any idea why I would keep getting
[2012-08-03 20:44:36 -0400] jameson: ec2-50-17-116-132.compute-1.amazonaws.com [Fri, 03 Aug 2012 20:42:57 +0000] FATAL: Net::HTTPServerException: 400 "Bad Request"
[2012-08-03 20:44:43 -0400] addisonj: quick question, so say I want to change the template file in a recipe from a vendor, is the preferred way to do that just to make my changes and call it a day? or is there someone to override templates files from outside a recipe, so in another recipe or roll
[2012-08-03 20:45:54 -0400] jameson: i just deployed 4 things..
[2012-08-03 20:45:57 -0400] jameson: 3 of them suceeds
[2012-08-03 20:46:03 -0400] jameson: and the last one craps out with 400 "Bad Request" :(
[2012-08-03 20:49:40 -0400] hoover_damm: jtimberman, if you ever find one? hook a brother up
[2012-08-03 20:49:43 -0400] hoover_damm: :)
[2012-08-03 20:50:49 -0400] coredump|br: guys
[2012-08-03 20:50:56 -0400] coredump|br: something really weird is happening here
[2012-08-03 20:51:13 -0400] coredump|br: everytime I restart the server it reverts roles to a previous version.
[2012-08-03 20:51:21 -0400] jameson: http://pastebin.com/BYkbQ5VF
[2012-08-03 20:51:28 -0400] jameson: can anyone figure anything from that chef-stacktrace :?
[2012-08-03 20:52:23 -0400] coredump|br: Like I did some changes 2 days ago on a role, and every day since them I have to knife upload the role, because it keeps going back everyday when the chef-server gets restarted by log-rotate
[2012-08-03 20:54:20 -0400] yfeldblum: jameson, malformatted query
[2012-08-03 20:54:42 -0400] yfeldblum: jameson, malformatted search query
[2012-08-03 20:55:05 -0400] jameson:   db_server = search(:node, "role:mongodb AND chef_environment:#{node['chef_environment']}")
[2012-08-03 20:55:42 -0400] jameson: oh..
[2012-08-03 20:55:43 -0400] jameson: god.
[2012-08-03 20:55:49 -0400] jameson: are data-bags bound to environments?
[2012-08-03 20:55:56 -0400] Cinder: nope
[2012-08-03 20:56:53 -0400] bporterfield: Hey Ya'll - I'm creating a node using a JSON file, upload it to hosted chef with "knife node from file {my_node}.json", and then trying to "knife ec2 server create -N my_node". Every time, the ec2 instance says "Run List is []" and "WARN: Node my_node has an empty run list." and fails. Starting the ec2 instance first with -N my_node before I've created the node hosted chef and then adding a run list to that node works. What am I 
[2012-08-03 21:00:06 -0400] yfeldblum: there is no such node attribute as `node["chef_environment"]` ... `chef_environment` is a method on the node, so you've got to do `node.chef_environment` in the query as a method call
[2012-08-03 21:00:11 -0400] yfeldblum: jameson, ^
[2012-08-03 21:00:44 -0400] jameson: @_@!
[2012-08-03 21:00:45 -0400] jameson: ty
[2012-08-03 21:01:11 -0400] jameson: i thought it was a value.
[2012-08-03 21:01:44 -0400] hoover_damm: node values are populated by ohai
[2012-08-03 21:01:48 -0400] hoover_damm: methods are provided by chef?
[2012-08-03 21:02:06 -0400] hoover_damm: ohai should be unaware of your chef environment
[2012-08-03 21:02:58 -0400] yfeldblum: jameson, it's certainly stored on the node object as data in the chef-server, like the run-list, but not as a "node attribute" ... node attributes are special pieces of data that participate in the multiple levels (default, normal, override, automatic) and where the levels get deep-merged
[2012-08-03 21:03:44 -0400] yfeldblum: jameson, the node's name, run-list, and chef-environment are stored *directly* on the node, not within any of the four levels of attributes, and so that's why you can't access them with the [] syntax
[2012-08-03 21:04:32 -0400] jameson: oh
[2012-08-03 21:06:24 -0400] jameson: so to be safe
[2012-08-03 21:06:33 -0400] jameson: if I want to keep using node[''] stuff
[2012-08-03 21:06:41 -0400] jameson: i should just define them in the environments
[2012-08-03 21:06:43 -0400] jameson: as default
[2012-08-03 21:07:05 -0400] yfeldblum: jameson, huh?
[2012-08-03 21:07:05 -0400] jameson: like with the example that says "app_environment" => "test"
[2012-08-03 21:07:10 -0400] jameson: environment?
[2012-08-03 21:07:10 -0400] bawt: environment is http://wiki.opscode.com/display/chef/Environments
[2012-08-03 21:07:15 -0400] yfeldblum: jameson, no, that's not the right conclusion
[2012-08-03 21:07:49 -0400] yfeldblum: jameson, attributes defined in an environment are merged into the node attributes, alongside attributes defined in a role and attributes defined in a cookbook attributes file
[2012-08-03 21:08:07 -0400] jameson: yes, I get that.
[2012-08-03 21:08:19 -0400] jameson: but run-list, name, chef-environment aren't an attribute
[2012-08-03 21:08:35 -0400] jameson: so I can't get them like I get attributes.
[2012-08-03 21:08:41 -0400] yfeldblum: jameson, right
[2012-08-03 21:09:17 -0400] yfeldblum: jameson, because they matter to chef, and aren't just a giant clump of data that matters to you and your recipes
[2012-08-03 21:10:28 -0400] jameson: so those fields that are chef's matters and not defined by recipes, attributes, roles
[2012-08-03 21:10:42 -0400] jameson: i would have to access it by calling on node
[2012-08-03 21:11:12 -0400] yfeldblum: jameson, right: node.name, node.run_list, node.chef_environment
[2012-08-03 21:11:30 -0400] jameson: are there any others?
[2012-08-03 21:11:59 -0400] yfeldblum: jameson, https://github.com/opscode/chef/blob/master/chef/lib/chef/node.rb
[2012-08-03 21:12:06 -0400] jameson: ah thank you
[2012-08-03 21:14:21 -0400] yfeldblum: jameson, unfortunately there's a mixture of methods there: most you can use inside recipes, but a few are only for use by the chef-server-api process directly, not by anything outside that process
[2012-08-03 21:19:23 -0400] jameson: mm
[2012-08-03 21:19:30 -0400] jameson: i think the most important for me is node.name and node.chef_environment
[2012-08-03 21:35:01 -0400] bporterfield: Hi yfeldblum, any thoughts on my question?
[2012-08-03 21:37:45 -0400] yfeldblum: bporterfield, sure, when chef-client starts for the first time, it creates the node object on the chef-server (deleting any data that you created)
[2012-08-03 21:38:23 -0400] bporterfield: i guess maybe i'm misunderstanding the point of storing nodes in json thenwhat is the use case for nodes in JSON?
[2012-08-03 21:39:19 -0400] yfeldblum: bporterfield, as `knife ec2 server create --help` indicates, you might want to try the --json-attributes (-j) argument
[2012-08-03 21:40:01 -0400] yfeldblum: bporterfield, you can certainly keep a list of nodes' json files if you're using chef-solo on a bunch of nodes
[2012-08-03 21:41:02 -0400] bporterfield: great thank you!
[2012-08-03 21:42:42 -0400] bporterfield: yfieldblum btw, my knife ec2 server create help does not contain json-attributes as an argument (v 10.12.0)
[2012-08-03 21:44:08 -0400] yfeldblum: bporterfield, hmm, i was hazarding a guess there (`knife rackspace server create --help` does)
[2012-08-03 21:44:24 -0400] yfeldblum: bporterfield, `knife ec2` is its own gem; what's the version of that gem?
[2012-08-03 21:44:47 -0400] bporterfield: 0.5.12
[2012-08-03 21:46:10 -0400] Cinder: bporterfield: it's in there after 0.5.13 so you might want to upgrade that gem if possible
[2012-08-03 21:46:39 -0400] beandip: I cannot get the java cookbook to properly install java and set the JAVA_HOME.  Has anyone been able to do this successfully?
[2012-08-03 21:46:53 -0400] beandip: On ubuntu 12.04
[2012-08-03 21:48:54 -0400] bporterfield: Cinder: thanks! upgraded
[2012-08-03 22:07:41 -0400] addisonj: are underscores valid names in a provider file? so: cookbook/foo/provider/my_prov.rb -> foo_my_prov does that work?
[2012-08-03 22:21:16 -0400] yfeldblum: addisonj, it should
[2012-08-03 22:21:59 -0400] addisonj: hrm... okay, I get an error "no provider found to match 'foo'" when I do it
[2012-08-03 22:22:17 -0400] addisonj: I should note, I am trying to use this provider in another recipe
[2012-08-03 22:22:57 -0400] addisonj: I have the cookbook upload and a "depends" statement in my metadata, do I need to include/require my cookbook into my recipe in the other cookbook?
[2012-08-03 22:23:48 -0400] miah: your provider would be foo_my_prov
[2012-08-03 22:24:03 -0400] miah: not just 'foo'
[2012-08-03 22:24:51 -0400] addisonj: right, so I have foo_my_prov in my recipe...
[2012-08-03 22:27:58 -0400] yfeldblum: addisonj, you declare resources, not providers
[2012-08-03 22:28:30 -0400] yfeldblum: addisonj, you can assign a provider to a resource
[2012-08-03 22:28:56 -0400] addisonj: right, so I have both foo/providers/my_prov.rb and foo/resources/my_prov.rb and in bar/recipes/default.rb I do "foo_my_prov" and I get the above error
[2012-08-03 22:29:00 -0400] magoo: what's the correct way to reference another variable in the attributes file so that overriding the first variable will also override the the 2nd?
[2012-08-03 22:29:09 -0400] addisonj: (my naming is bad, sorry)
[2012-08-03 22:30:19 -0400] addisonj: is there some magic in including a cookbook?
[2012-08-03 22:30:27 -0400] addisonj: or does it do it purely based upon naming?
[2012-08-03 22:32:00 -0400] magoo: ie. right now i have default[:path_prefix] = "opt" ... default[:bin_path] = "#{default[:path_prefix]/bin}"
[2012-08-03 22:32:37 -0400] magoo: but if i override :path_prefix, will :bin_path reflect this?
[2012-08-03 22:34:20 -0400] magoo: yfeldblum: i know you know this ;)
[2012-08-03 22:36:02 -0400] yfeldblum: magoo, don't know what specifically will happen, but you can do computations which depend on other default/override attributes in the recipe, not in the attributes file
[2012-08-03 22:41:37 -0400] stormerider: is there a way to tell knife-ec2 not to bootstrap chef, just to spin up an instance and do a chef-client run on a given runlist?
[2012-08-03 23:32:15 -0400] leopd: howdy chefs!  How can I reference an ohai value in my recipe?  would this work... node['cpu']['total']
[2012-08-03 23:33:40 -0400] yfeldblum: leopd, yes
[2012-08-03 23:33:55 -0400] leopd: yfeldblum: great -- thanks!
[2012-08-03 23:36:36 -0400] theRAWR: hrm
[2012-08-03 23:36:48 -0400] theRAWR: any eta on Atlassian stopping the suck on ospcode wiki?
[2012-08-03 23:40:34 -0400] biffhero: what is supposed to listen on port 4000?  my knife-configure doesn't working.
[2012-08-03 23:43:08 -0400] biffhero: ERROR: Connection refused connecting to chariotsoffire:4000 for /clients, retry 1/5
[2012-08-03 23:46:34 -0400] biffhero: oh, that's the chef server.  Too bad it's not running.
[2012-08-03 23:49:37 -0400] biffhero: apparently, I am an elite competitive swimmer
[2012-08-03 23:49:45 -0400] biffhero: oops

[2012-08-20 00:16:37 -0400] Jay_Levitt: Perhaps an easier question.. I have a big fat 'raise "got here!"' in my plm cookbook at the top of my plm/attributes/role-base.rb file. I am succesfully running the plm::role-base recipe elsewhere in my repo.  Why is that attributes file never being run?
[2012-08-20 00:16:46 -0400] Jay_Levitt: (I tried renaming it to default.rb, never gets hit either)
[2012-08-20 00:40:22 -0400] stormerider: question: is the rsyslog cookbook up to date enough for use with 12.04? the readme lists up to 10.04 which is pretty old at this point.
[2012-08-20 00:43:17 -0400] hoover_damm: stormerider, rsyslog really hasn't changed that much has it? I know 10.04 to 12.04 is drastic but let's remember versions don't always change that fast on small items
[2012-08-20 00:44:28 -0400] hoover_damm: 4.2.0 vs 5.8.6
[2012-08-20 00:44:30 -0400] hoover_damm: hrm could be significant
[2012-08-20 00:44:34 -0400] stormerider: *nod* just wanted to check if anyone knew if it was out of date, i know some of the cookbooks need some modernization so i figured id check if this is one of them.
[2012-08-20 00:44:46 -0400] hoover_damm: but as I don't use rsyslog (syslog-ng myself) I can't say for sure
[2012-08-20 00:44:57 -0400] hoover_damm: better to test, verify and then patch
[2012-08-20 00:45:08 -0400] hoover_damm: questions always take more time to answer then the problem takes to solve :(
[2012-08-20 00:45:10 -0400] stormerider: and actually, it looks like it uses search on the clients to find the master log host, i think it's probably not suited for my needs anyways.
[2012-08-20 00:45:11 -0400] hoover_damm: more or less
[2012-08-20 00:45:48 -0400] stormerider: since i need to route the traffic through relays anyways.
[2012-08-20 00:45:51 -0400] hoover_damm: central rsyslog?
[2012-08-20 00:55:36 -0400] jtimberman: hoover_damm: rsyslog changes quite a lot, and rapidly.
[2012-08-20 01:02:08 -0400] stormerider: also, silly question, is there a quick lint tool for cookbooks?
[2012-08-20 01:09:24 -0400] justin-_: Anyone here familiar with how to handle scripts that are evaluated at runtime?
[2012-08-20 01:10:24 -0400] justin-_: I have a script resource whose code uses a variable that is only set during runtime.
[2012-08-20 01:22:14 -0400] williamherry: does change ip address cause authenticate fail?
[2012-08-20 01:24:19 -0400] williamherry: Failed to authenticate, how can i finger it out what cause this unauthenticate?
[2012-08-20 01:35:15 -0400] williamherry: finger it out, some service not start :-)
[2012-08-20 01:41:47 -0400] erk: i created a new recipe that depends on database
[2012-08-20 01:41:55 -0400] erk: and when i updated my client i get this
[2012-08-20 01:42:01 -0400] erk: Missing gem 'right_aws'  http://pastebin.com/SQHi14H2
[2012-08-20 01:42:52 -0400] erk: i was tyring to create a new postgresql db
[2012-08-20 01:51:11 -0400] erk: is that some kind of bug? or i even use -d to download all the depends needed... and upload them all
[2012-08-20 02:45:56 -0400] jtimberman: stormerider: foodcritic
[2012-08-20 02:46:07 -0400] ssd7: erk: I would have to take a look at the recipe, but my guess is that there is a libary in that cookbook that tries to load the aws gem but rescues the failure in case it is the first run
[2012-08-20 02:46:20 -0400] jtimberman: stormerider: a lot of folks are using it in CI for testing cookbooks. it is part of the tests automatically performed when using test-kitchen
[2012-08-20 02:46:41 -0400] jtimberman: erk: the "missing gem" message is merely informational
[2012-08-20 02:46:52 -0400] jtimberman: it should probably be debug leve lthough
[2012-08-20 02:58:58 -0400] hoover_damm: jtimberman, people support that as a syslog? meh
[2012-08-20 02:59:04 -0400] hoover_damm: i wouldthink a stable syslog would be preferred
[2012-08-20 03:16:34 -0400] schuckles: Hi
[2012-08-20 03:16:45 -0400] schuckles: can anyone recommend a good php-fpm cookbook?
[2012-08-20 03:24:23 -0400] erk: jtimberman: thanks sorry i was afk. here is te debug level. http://pastebin.com/ZK5WzbaA
[2012-08-20 03:25:13 -0400] erk: jtimberman: all i did was add depends "database" to the metadata.rb and then for recipes/default.rb i did this:  http://pastebin.com/pkaCfjSp
[2012-08-20 03:55:12 -0400] williamherry: which recipe will be used if just include cookbook name, all recipe or default?
[2012-08-20 04:18:01 -0400] ssd7: williamherry: Just the default.
[2012-08-20 04:18:13 -0400] williamherry: ssd7, thanks
[2012-08-20 04:19:38 -0400] meisen: hello #chef... I have a strange behavior, maybe related to the code execution order of LWRP's and Ruby code.  It seems like when a LWRP is wrapped in an "each" block, the not_if does not function as expected?  Pseudo-code would be ["file1","file2"].each do |pkg|
[2012-08-20 04:19:38 -0400] meisen:   log "Downloading #{pkg} to #{download_dir}#{pkg}"
[2012-08-20 04:19:38 -0400] meisen:   windows_batch "Get #{pkg}" do
[2012-08-20 04:19:38 -0400] meisen:     code <<-EOH
[2012-08-20 04:19:38 -0400] meisen:       get.bat #{pkg} #{download_dir}#{pkg}
[2012-08-20 04:19:39 -0400] meisen:       EOH
[2012-08-20 04:19:39 -0400] meisen:     not_if {::File.exists?(download_dir + pkg) }
[2012-08-20 04:19:39 -0400] meisen:   end
[2012-08-20 04:19:39 -0400] meisen: end
[2012-08-20 04:20:10 -0400] meisen: When the file "file2" exists, when this is executed, it seems like both file1 and file2 are skipped by the "not_if" block
[2012-08-20 04:25:27 -0400] ssd7: Hrm.  Is it always the case that all of the not_if's seems to use the last item in the list you are iterating over?
[2012-08-20 04:26:01 -0400] ssd7: Also, just a heads up, if you want to paste more than a line or two, it is typically best to use gist or pastebin or something similar.
[2012-08-20 05:01:06 -0400] schuckles: Hi
[2012-08-20 05:01:10 -0400] schuckles: anyone still awake?
[2012-08-20 05:02:19 -0400] schuckles: I am having an issue with nginx + php
[2012-08-20 05:02:21 -0400] schuckles: https://gist.github.com/3401099
[2012-08-20 05:02:29 -0400] schuckles: wondering if I could get some advise
[2012-08-20 05:20:52 -0400] schuckles: ???
[2012-08-20 06:18:48 -0400] BryanWB_: ohai chefs!
[2012-08-20 06:55:36 -0400] ssd7: Ohai!
[2012-08-20 06:55:53 -0400] BryanWB_: hey ssd7 !
[2012-08-20 06:56:57 -0400] ssd7: heya BryanWB_, I was justa reading one of your old blog posts.  I'm about to dive into the logstash cookbooks and Berkshelf
[2012-08-20 07:01:44 -0400] BryanWB_: gr8, i m super happy w/ berkshelf,   also super useful for creating a new cookbook,  `berks cookbook create foo --foodcritic --license apachev2 --vagrant`
[2012-08-20 07:06:03 -0400] ssd7: Yeah,  for my personal cookbooks I have just been managing them manually (seperate repos for each cookbook, then use git's subtree merges to combine into a cookbook repo) but that is growing tiresome.
[2012-08-20 07:14:45 -0400] BryanWB_: i recommend dumping cookbook repo altogether
[2012-08-20 07:38:09 -0400] prutser11: can anybody give me a pointer on how to proceed? -- chef newbie here -- I signed up for (free) managed chef at opscode; I did a quick start of "Java web application"; removed the node again; how can I add/remove cookbooks? add from http://community.opscode.com/cookbooks or my own?
[2012-08-20 07:39:50 -0400] prutser11: I seem to have a list of cookbooks for java web apps, because of the quick start obviously.
[2012-08-20 07:40:13 -0400] prutser11: But I see nothing in the interface to change that list...
[2012-08-20 07:41:28 -0400] prutser11: oh, and yes I checked the permission tab and I have permission to 'create'
[2012-08-20 07:48:24 -0400] trentster1: Anyone here used omnibus for SmartOS ?
[2012-08-20 07:59:24 -0400] koolhead17: why is chef doc interface so confusing/unfriendly
[2012-08-20 08:00:47 -0400] koolhead17: seems like a n00b will always prefer going to Puppet then Chef
[2012-08-20 08:01:12 -0400] koolhead17: because of the scary/ugly/bombed informed chef doc page
[2012-08-20 08:06:31 -0400] prutser11: haha, I feel a bit like koolhead17...
[2012-08-20 08:07:10 -0400] koolhead17: prutser11, and there is no youtube or other source even compared to others
[2012-08-20 08:07:29 -0400] koolhead17: i promise to write a n00b doc once am done with my lovemaking to chef
[2012-08-20 08:07:40 -0400] pratyksp: Hi, what is the best way to get the total system memory from system and compute a value in template.
[2012-08-20 08:07:44 -0400] koolhead17: so no one has has to get frustrated and angry as i am
[2012-08-20 08:07:52 -0400] prutser11: I feel like I am having this cool tool but I just do not know what plug to put where.....
[2012-08-20 08:08:02 -0400] koolhead17: prutser11, :P
[2012-08-20 08:09:33 -0400] prutser11: My latest insight: when I have hosted chef @opscode, I still need a workstation and knife my way through. Is that right?
[2012-08-20 08:09:55 -0400] prutser11: I was expecting to be able to do everything @opscode
[2012-08-20 08:10:36 -0400] prutser11: but that is not right, right?
[2012-08-20 08:23:20 -0400] nacer: hey BryanWB_ it's really a good idea , the badge stuff on cookbooks
[2012-08-20 08:25:13 -0400] BryanWB_: nacer: not my idea actually
[2012-08-20 08:25:21 -0400] BryanWB_: many others b4 me had it ;)
[2012-08-20 08:25:36 -0400] nacer: :)
[2012-08-20 08:25:36 -0400] BryanWB_: actually, i think it was acrump's, he is the Titan of Testing
[2012-08-20 08:52:07 -0400] williamherry: still can't finger out supports in 'service' resource, why should I write that
[2012-08-20 08:59:41 -0400] ashb: williamherry: supports [:restart,:reload] etc
[2012-08-20 08:59:48 -0400] ashb: controls what actions you can perform on the service
[2012-08-20 09:00:32 -0400] ashb: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/service/init.rb
[2012-08-20 09:00:38 -0400] ashb: look at restart_service in there for instance
[2012-08-20 09:02:18 -0400] williamherry: ashb, I think one service have some action or not is up to it self, why should I indicate it in recipe?
[2012-08-20 09:02:51 -0400] ashb: if you don't tell chef that your service control method supports restart, then chef falls back to stop; sleep 1; start
[2012-08-20 09:03:03 -0400] jacobat: If I set default attributes in the environment or a role they will be deep merged with attributes from the cookbook, right?
[2012-08-20 09:03:13 -0400] ashb: jacobat: should be
[2012-08-20 09:03:35 -0400] jacobat: Weirdness somehow nginx/version is getting lost
[2012-08-20 09:04:09 -0400] ashb: 'lost'?
[2012-08-20 09:04:16 -0400] ashb: where are you looking for it?
[2012-08-20 09:04:19 -0400] jacobat: It's not set on the node
[2012-08-20 09:04:25 -0400] jacobat: Looking in the web ui
[2012-08-20 09:04:33 -0400] jacobat: And the client.log
[2012-08-20 09:04:46 -0400] jacobat: Nginx::Source doesn't install if version is blank
[2012-08-20 09:05:25 -0400] williamherry: ashb, just this?
[2012-08-20 09:05:44 -0400] ashb: yes, afaik
[2012-08-20 09:06:28 -0400] williamherry: ashb, ok, thanks, stop; sleep 1; start fine to me, so I prefer not write it
[2012-08-20 09:07:16 -0400] veszig: i'm playing with test-kitchen. at the beginning of the run it installs some cookbook dependencies like apt, build-essential, git, java, etc. does this mean i can't test my own cookbook named java?
[2012-08-20 09:07:52 -0400] veszig: to be more specific, it installes dependencies listed here https://github.com/opscode/test-kitchen/blob/master/config/Cheffile
[2012-08-20 09:10:57 -0400] cnf: man, i hope 750mb will be enough ram to run chef-server ^^;
[2012-08-20 09:13:07 -0400] BryanWB_: cnf: just check the heap size allocated for chef-solr
[2012-08-20 09:13:16 -0400] BryanWB_: otherwise should be fine
[2012-08-20 09:13:31 -0400] ashb: git question:
[2012-08-20 09:13:42 -0400] ashb: if I had a topic branch that got merged into master and then reverted (in master)
[2012-08-20 09:13:49 -0400] jacobat: Any ideas how to figure out why the nginx/version attribute is not being set?
[2012-08-20 09:13:58 -0400] cnf: BryanWB_: ah, good idea
[2012-08-20 09:13:58 -0400] ashb: how do I rebase the topic branch back onto master and actually have it have comments?
[2012-08-20 09:14:10 -0400] cnf: BryanWB_: i do plan on getting a better machine, in time
[2012-08-20 09:14:17 -0400] cnf: just need to convince the CTO
[2012-08-20 09:14:32 -0400] BryanWB_: jacobat: use the pry, and u should find out fast
[2012-08-20 09:14:40 -0400] jacobat: the pry?
[2012-08-20 09:15:08 -0400] BryanWB_: google pryrepl
[2012-08-20 09:15:20 -0400] BryanWB_: u can put breakpoints in ur coobkoobs
[2012-08-20 09:15:34 -0400] BryanWB_: and then explore all the values
[2012-08-20 09:15:39 -0400] jacobat: BryanWB_: I'm not sure it's a cookbook issue
[2012-08-20 09:15:42 -0400] BryanWB_: best debugging t00l evar
[2012-08-20 09:15:51 -0400] jacobat: BryanWB_: I can't see the configuration on the node in the web ui
[2012-08-20 09:16:30 -0400] BryanWB_: u can step thru code and see when it the attribute is set
[2012-08-20 09:16:43 -0400] BryanWB_: or set back
[2012-08-20 09:18:13 -0400] jacobat: Humm.. how does attributes get loaded from cookbooks? If I have a default.rb will it be loaded for all recipes?
[2012-08-20 09:20:59 -0400] jacobat: Argh, the nginx cookbook is just broken
[2012-08-20 09:21:01 -0400] jacobat: *sigh*
[2012-08-20 09:22:25 -0400] BryanWB_: jacobat: y, loaded for all recipes
[2012-08-20 09:23:06 -0400] jacobat: BryanWB_: It doesn't seem so - after adding 'include_attribute "nginx"' to attributes/source the nginx/source recipe starts working again
[2012-08-20 09:23:12 -0400] jacobat: Maybe I'm missing something
[2012-08-20 09:23:38 -0400] BryanWB_: wish i cud help, not familiar w/ that cookbook
[2012-08-20 09:23:42 -0400] BryanWB_: or nginx
[2012-08-20 09:23:50 -0400] jacobat: No worries :)
[2012-08-20 09:23:54 -0400] jacobat: Thanks anyways :)
[2012-08-20 09:44:44 -0400] maruq: hi guys
[2012-08-20 09:45:18 -0400] maruq: anyone managed to solve the sysctl ubuntu 12.04 issue with postgresql cookbooks?
[2012-08-20 09:45:29 -0400] maruq: I'm seeing "FATAL: NameError: Cannot find a resource for sysctl on ubuntu version 12.04" :(
[2012-08-20 09:55:49 -0400] maruq: hoover_damm: I saw you mentioned previously that you'd created a cookbook to get around it (https://github.com/damm/sysctl) >
[2012-08-20 09:56:23 -0400] maruq: hoover_damm: librarian-chef doesn't want to pull it (no metadata). just checking how to use it.
[2012-08-20 09:56:29 -0400] RobbieAB: Is there a way to tell what cookbook and recipe are using a template?
[2012-08-20 09:56:59 -0400] maruq: hoover_damm: it looks more like an augmentation (ie. override some methods with a half cookbook in site-cookbooks) to me>
[2012-08-20 09:57:00 -0400] maruq: '
[2012-08-20 10:46:12 -0400] nacer: mmmm there is no dhcpd cookbooks from opscode
[2012-08-20 10:46:14 -0400] nacer: weird ...
[2012-08-20 10:46:16 -0400] nacer: ?
[2012-08-20 12:29:01 -0400] williamherry: #join #mysql
[2012-08-20 12:42:00 -0400] Jay_Levitt: Anyone wanna hold my hand on a tricky attribute-overriding problem? Starting with: What is it, exactly, that causes a cookbook/attributes/default.rb attribute file to be loaded at all?
[2012-08-20 12:51:28 -0400] benlangfeld: Gents, I'm at my wits end. I really help someone can help me untangle the mess I've got myself in with adding an apt repo. I add a repo and update the cache here: https://github.com/mojolingo/asterisk-cookbook/blob/master/recipes/default.rb#L22
[2012-08-20 12:52:13 -0400] benlangfeld: Unfortunately, including this in the run list causes that to break: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/ruby.rb#L23
[2012-08-20 12:53:04 -0400] benlangfeld: All I want to do is add a repo and follow that by apt-get update. Chef seems to want to do everything it can to prevent that happening. Google also unveils a whole load of FUD.
[2012-08-20 12:53:11 -0400] benlangfeld: Surely someone knows how to make this happen.
[2012-08-20 12:57:17 -0400] benlangfeld: the apt cookbook does not appear to do that
[2012-08-20 12:57:46 -0400] benlangfeld: I run the apt cookbook first, but my asterisk cookbook fails to find the package if I don't run apt-get update explicitly somehow
[2012-08-20 12:58:15 -0400] Jay_Levitt: benlangfeld: hmm.. coulda sworn it did, and that that's in fact the reason I added it to my repo.. sorry ::shrug::
[2012-08-20 12:58:40 -0400] benlangfeld: It should. I mean, adding a repo is pointless unless you then update the cache.
[2012-08-20 13:08:03 -0400] Jay_Levitt: I think we hit commute time for all the opscode smart folk :)
[2012-08-20 13:45:46 -0400] geekbri: Jay_Levitt, benlangfeld: https://github.com/opscode-cookbooks/apt/blob/master/recipes/default.rb#L26-21
[2012-08-20 13:46:02 -0400] geekbri: Unless I'm reading it wrong, it looks lke it runs an update the first time that recipe is run, but once its got a success stamp it doesn't run it again.
[2012-08-20 13:46:25 -0400] benlangfeld: Yes, but then the provider to add repos is supposed to update
[2012-08-20 13:46:31 -0400] geekbri: Oh I lied, it has a time stamp check further down
[2012-08-20 13:46:36 -0400] benlangfeld: but I still get exceptions saying the package doesn't exist
[2012-08-20 13:46:40 -0400] geekbri: https://github.com/opscode-cookbooks/apt/blob/master/recipes/default.rb#L40-47
[2012-08-20 13:47:08 -0400] benlangfeld: I'm utterly shocked that this isn't solved. I can't be the first person to encounter it.
[2012-08-20 13:47:15 -0400] geekbri: Maybe you should explicitly call update in the recipe installing the package?  It looks like it only runs the update daily
[2012-08-20 13:47:24 -0400] benlangfeld: I did that, no dice
[2012-08-20 13:47:35 -0400] benlangfeld: collides with the "database" cookbook
[2012-08-20 13:47:48 -0400] benlangfeld: because cookbooks have 0 namespacing
[2012-08-20 13:47:55 -0400] benlangfeld: I think I need a beer
[2012-08-20 13:48:08 -0400] benlangfeld: I've got to the stage of wanting to throw my laptop in the river
[2012-08-20 13:48:33 -0400] BryanWB_: benlangfeld: i'll happily take it off your hands if u don't want it anymore ;)
[2012-08-20 13:51:32 -0400] geekbri: I am glad to give you my laptop if you can stage a mugging so that my company will get me a newer one ;)
[2012-08-20 13:54:29 -0400] Jay_Levitt: I'm working on making the postgresql recipe use attributes for pg_hba.conf, which has config lines like "host/database/access-method".  fnichols took a pass at this and made each line an array element, but it seems to me there's no easy way to refer to a specific array element so it'll be deep-merged correctly in attributes.  Has anyone dealt with this problem in other cookbooks?
[2012-08-20 13:54:32 -0400] jannel: my chef server's rabbit mq has started crashing
[2012-08-20 13:54:43 -0400] jannel: any ideas where to look for a reason for this?
[2012-08-20 13:54:47 -0400] jannel: nothing appears in the logs
[2012-08-20 13:55:06 -0400] jannel: once I start rabbitmq again, chef starts working perfectly
[2012-08-20 13:55:20 -0400] Jay_Levitt: I think this goes back to comp sci and "value objects", and that makes my head hurt
[2012-08-20 14:29:14 -0400] atomic-penguin: BryanWB_, ping
[2012-08-20 14:31:04 -0400] BryanWB_: atomic-penguin: hey dude
[2012-08-20 14:33:46 -0400] atomic-penguin: BryanWB_, I'm a bit busy what with Freshman coming back this week.  If you want to "fix" the rest of the attributes to use domain || example.org, go for it.  I think it can be easily overridden with a role though.
[2012-08-20 14:34:06 -0400] atomic-penguin: I think base_url is the only other attribute affected
[2012-08-20 14:34:16 -0400] BryanWB_: i don't really care, just want it to work out of the box for vagrant users
[2012-08-20 14:35:07 -0400] atomic-penguin: Because vagrant boxes can't have roles?
[2012-08-20 14:35:21 -0400] benlangfeld: they can
[2012-08-20 14:35:54 -0400] BryanWB_: atomic-penguin: they can, but it is an unnecessary step and confusing to track down why u got that error
[2012-08-20 14:36:00 -0400] BryanWB_: for Nil value
[2012-08-20 14:36:07 -0400] BryanWB_: cuz u forgot to add a role
[2012-08-20 14:36:12 -0400] meisen: Hello #chef, sorry to abandon a question I posted last night, apologies to ssd7 who responded.  My question was about "not_if" execution when I have an LWRP inside a loop.  Code follows (thanks for tip re PasteBin)
[2012-08-20 14:36:16 -0400] meisen: ["file1","file2"].each do |pkg|
[2012-08-20 14:36:16 -0400] meisen:   log "Downloading #{pkg} to #{download_dir}#{pkg}"
[2012-08-20 14:36:16 -0400] meisen:   windows_batch "Get #{pkg}" do
[2012-08-20 14:36:16 -0400] meisen:     code <<-EOH
[2012-08-20 14:36:16 -0400] meisen:       get.bat #{pkg} #{download_dir}#{pkg}
[2012-08-20 14:36:17 -0400] meisen:       EOH
[2012-08-20 14:36:17 -0400] meisen:     not_if {::File.exists?(download_dir + pkg) }
[2012-08-20 14:36:17 -0400] meisen:   end
[2012-08-20 14:36:17 -0400] meisen: end
[2012-08-20 14:36:34 -0400] meisen: Lol... sorry, apparently paste bin did not work as expected.  Oops.
[2012-08-20 14:36:34 -0400] BryanWB_: and it affects ppl who may never use or need to be aware of the corporate recipe
[2012-08-20 14:37:21 -0400] atomic-penguin: Its not included by default, so I don't see how
[2012-08-20 14:37:53 -0400] BryanWB_: u get an error when using the cookbook w/ chef-solo, even if u don't include the recipe
[2012-08-20 14:38:05 -0400] BryanWB_: i am not including the recipe and i get the error
[2012-08-20 14:38:29 -0400] atomic-penguin: So fix base_url, then pull request it, please
[2012-08-20 14:38:34 -0400] benlangfeld: Maybe if the cookbook doesn't work without a particular role, it should raise a sensible error rather than a confusing one.
[2012-08-20 14:38:37 -0400] BryanWB_: ok
[2012-08-20 14:38:59 -0400] atomic-penguin: I'm gonna need it
[2012-08-20 14:42:06 -0400] CharlieSu: Hi all.  I'm  using the rabbitmq cookbook, but when I try to use the plugin provider included in it I'm getting an error tryign to enable a plugin. This only happens when running as a runit script (chef-client), but when I run chef-client as root it works fine.  Looks like it has to do with the HOME variable.  Any ideas? https://gist.github.com/75063470bd2f92daa301
[2012-08-20 14:53:47 -0400] CharlieSu: Anyone know how I can fix 'erlexec: HOME must be set' ?
[2012-08-20 15:06:22 -0400] jdutton: Is there any reason why a role definition shouldn't set an attribute based on a data bag item?  Want to plug passwords from data bags into attributes of community cookbooks.
[2012-08-20 15:07:33 -0400] wickett: anyone know of a way to get server name (AWS) or chef node name to show up in 'knife ec2 server list'?
[2012-08-20 15:10:47 -0400] yfeldblum: jdutton, yes, there's every reason: a role is a bit of data, just like a data-bag item
[2012-08-20 15:11:03 -0400] jameson_: anyone know if it's possible to restrict use of chef by user account?
[2012-08-20 15:11:14 -0400] wickett: I am wanting to be able to manage instances with knife ec2 server list but I have specified node names and instance names
[2012-08-20 15:12:19 -0400] wickett: I find myself having to do knife node list, then do knife node show, then run knife ec2 commands after that
[2012-08-20 15:12:30 -0400] yfeldblum: jameson_, yes in private-chef and hosted-chef, no in the current open-source chef-server (except for a single "admin" flag on accounts)
[2012-08-20 15:12:34 -0400] wickett: mostly for termination of instances
[2012-08-20 15:13:21 -0400] yfeldblum: wickett, easy: write a knife plugin that shows you exactly the data you need, and you can even look at the source code for the existing commands (each knife command is structured exactly like any knife plugin you might want to write)
[2012-08-20 15:13:24 -0400] jameson_: yfeldblum: how do I do it in hosted chef :|?
[2012-08-20 15:13:42 -0400] yfeldblum: jameson_, you can set ACLs via the web UI
[2012-08-20 15:14:34 -0400] wickett: yfeldblum: interesting
[2012-08-20 15:15:14 -0400] jameson_: so I see that restriction for an environment, does the acls carry over into different environments (I do not want it to)
[2012-08-20 15:15:59 -0400] wickett: yfeldblum: is there a plugin that already does anything like this?  is it normal for people to just use the instance id's from the cloud provider?
[2012-08-20 15:16:24 -0400] yfeldblum: wickett, https://github.com/opscode/chef/blob/10.12.0/chef/lib/chef/knife/node_list.rb https://github.com/opscode/chef/blob/10.12.0/chef/lib/chef/knife/node_show.rb https://github.com/opscode/knife-ec2/blob/0.5.14/lib/chef/knife/ec2_server_delete.rb
[2012-08-20 15:17:48 -0400] yfeldblum: wickett, if you make a similar class and stick it in ./.chef/plugins/knife/ relative to the root of your chef-repo, then knife will make your plugin available on the command line the exact same way it makes the opscode plugins available on the command line
[2012-08-20 15:18:04 -0400] wickett: ok
[2012-08-20 15:18:23 -0400] yfeldblum: wickett, it's a little bit of boilerplate and then it's just ruby code to do the common set of queries and actions you want to do
[2012-08-20 15:19:25 -0400] wickett: I guess my question is that surely I am not the first person to want to manage nodes using their name rather than the instance ID from the cloud provider... I figured that I am just missing something.
[2012-08-20 15:19:56 -0400] wickett: Is it normal for people to just use i-XXXXXXX naming schemes
[2012-08-20 15:20:16 -0400] yfeldblum: wickett, don't know
[2012-08-20 15:20:23 -0400] geekbri: Internally I use a knife plugin I wrote that destroys the chef node, chef client, and ec2 server
[2012-08-20 15:20:32 -0400] geekbri: it just uses the chef search
[2012-08-20 15:20:34 -0400] jameson_: i just use --purge --node-name
[2012-08-20 15:20:53 -0400] jameson_: knife ec2 server delete [i-XXXXXXXX] --purge --node-name [some-node-name]
[2012-08-20 15:21:30 -0400] jameson_: unless you make the tags unique, it's difficult to manage ec2 instances because the only guaranteed unique identifier is the instance id
[2012-08-20 15:22:11 -0400] wickett: jameson_: yeah, I do unique tagging thus far
[2012-08-20 15:22:15 -0400] jameson_: yfeldblum: so I see that the ACLs carry between environments
[2012-08-20 15:22:29 -0400] wickett: geekbri: that is cool
[2012-08-20 15:22:41 -0400] geekbri: wickett: its really surprisingly easy.  You could do it yourself pretty easily
[2012-08-20 15:22:52 -0400] wickett: ok
[2012-08-20 15:22:58 -0400] jameson_: what geekbri does seems like the right way to do it, but that method will take two calls through chef
[2012-08-20 15:23:11 -0400] wickett: is there a downside to that?
[2012-08-20 15:23:19 -0400] yfeldblum: jameson_, of course
[2012-08-20 15:23:26 -0400] yfeldblum: jameson_, ACLs do NOT provide isolation
[2012-08-20 15:23:46 -0400] jameson_: not really, I think we all have a way around it (I use knife ec2 server list) and cut + grep for my instances
[2012-08-20 15:24:11 -0400] yfeldblum: jameson_, only tenancy provides isolation: on hosted-chef and private-chef, that means separate organizations give isolation, and on open-source chef-server, that means only setting up multiple instances of chef-server gives isolation
[2012-08-20 15:24:36 -0400] jameson_: mm since we are using hosted chef, our only route is to create additional host-chef accounts?
[2012-08-20 15:24:48 -0400] wickett: jameson_: that is what I have been doing so far (cut, grep, ...)
[2012-08-20 15:25:03 -0400] yfeldblum: jameson_, no, you have many routes; but that is one option
[2012-08-20 15:25:16 -0400] wickett: jameson_: but it feels like bad practice
[2012-08-20 15:25:27 -0400] jameson_: wickett: If you have the desire to improve the tool, I think it would be great to see someone extend the knife-ec2 recipe
[2012-08-20 15:25:54 -0400] wickett: geekbri: you putting the plugin into the community
[2012-08-20 15:25:58 -0400] jameson_: I don't think it's bad practice to do that.
[2012-08-20 15:26:04 -0400] wickett: sounds like you already have the answer
[2012-08-20 15:26:26 -0400] wickett: that was for geekbri
[2012-08-20 15:26:31 -0400] jameson_: yfeldblum: what are my other options? we are trying to restrict EC2 access (can't delete/terminate nodes in production by developers)
[2012-08-20 15:26:33 -0400] yfeldblum: jameson_, sorry, environments do NOT provide isolation (using "ACLs" above was a mistake)
[2012-08-20 15:27:17 -0400] jameson_: we want developers to be able to deploy to EC2, but not be able to terminate/stop production-level instances
[2012-08-20 15:27:22 -0400] geekbri: wickett: currently its part of another internal tool i've been working on.  It is very rough around the edges as that task has been shoved aside for other "more important" things.
[2012-08-20 15:27:23 -0400] yfeldblum: jameson_, use an open-source chef-server for your development infrastructure where developers can develop?
[2012-08-20 15:27:37 -0400] wickett: jameson_: well, maybe not 'bad' but it feels like it should be better
[2012-08-20 15:27:41 -0400] yfeldblum: jameson_, and then use a single hosted-chef organization for your production infrastructure?
[2012-08-20 15:28:31 -0400] jameson_: wickett: yeah, it could be better, but I think many of us are in geekbri situation of 'this works, will make it better later'
[2012-08-20 15:28:55 -0400] jameson_: because we have other fires to put out ~_~ mainly improving deployment
[2012-08-20 15:28:56 -0400] geekbri: If I had all the time in the world I'd do all sorts of wonderful things.
[2012-08-20 15:28:58 -0400] geekbri: I do not though :)
[2012-08-20 15:29:28 -0400] jameson_: yfeldblum: that would still have the problem of ec2 access right?
[2012-08-20 15:29:48 -0400] jameson_: users can find the instances via knife ec2 server list, get and do knife ec2 server delete on ec2 nodes.
[2012-08-20 15:30:02 -0400] jameson_: regardless who/what brought the ec2 instances up..
[2012-08-20 15:30:19 -0400] jameson_: mmm maybe I need to solve this on the ec2 resources side ~_~
[2012-08-20 15:30:27 -0400] yfeldblum: jameson_, yes, but only on the development infrastructure, which can be on a separate account or which can be a group of instances to which they have IAM access
[2012-08-20 15:30:56 -0400] wickett: geekbri: i hear you
[2012-08-20 15:32:17 -0400] jameson_: a separate ec2 account.
[2012-08-20 15:33:49 -0400] jameson_: yfeldblum: it feels like the best way to have development and production environment with isolation on deployment is to have 2 different chef-servers and 2 different aws accounts
[2012-08-20 15:34:26 -0400] jameson_: under the premise the development will bring servers up & down all the time...
[2012-08-20 15:34:43 -0400] yfeldblum: jameson_, don't know what the best way it (it certainly varies based on the details of each case), but that's certainly a viable option
[2012-08-20 15:35:29 -0400] jameson_: there really isn't a viable way to have 1 aws account and 1 hosted chef account is there? due to the limitation of ec2 & IAM.
[2012-08-20 15:36:50 -0400] jameson_: yfeldblum: ^ to isolate environments that is
[2012-08-20 15:37:59 -0400] jameson_: I guess it would be possible to have a 2nd ec2 account + 1 hosted chef would work as well
[2012-08-20 15:38:20 -0400] jameson_: and prevent developers from deleteing nodes/clients.
[2012-08-20 15:39:03 -0400] yfeldblum: jameson_, environments in chef do not provide isolation, but i don't know what's available with IAM
[2012-08-20 15:39:22 -0400] jameson_: AWS IAM doesn't allow resource management for EC2 :(
[2012-08-20 15:39:52 -0400] jameson_: which is currently creating this headache that I was hoping I could solve on chef.. but now I realize it would still have the same problem on the EC2 side
[2012-08-20 15:40:08 -0400] jameson_: yfeldblum: thanks for helping me go through this.
[2012-08-20 15:40:26 -0400] yfeldblum: jameson_, i prefer to isolate the configuration database too, between multiple chef-servers for development vs production
[2012-08-20 15:41:22 -0400] yfeldblum: jameson_, so a separate chef-server (or hosted-chef org) plus a separate  infrastructure account for development, and likewise for production
[2012-08-20 15:42:04 -0400] jameson_: right.
[2012-08-20 15:46:09 -0400] yfeldblum: environments might be great for, e.g., putting nodes into groups based on which datacenter or region they're in, so that you can say "find all postgresql servers in the same region as the server i'm running this query on (which migh be us-west)"
[2012-08-20 15:46:37 -0400] yfeldblum: where the concept of "being in us-west" doesn't really fit a role
[2012-08-20 15:46:55 -0400] yfeldblum: "being a postgresql server" fits the concept of "role", but not "being in us-west"
[2012-08-20 15:48:43 -0400] jameson_: right, but restricting access to ec2 doesn't work if ec2 doesn't let you restrict it
[2012-08-20 15:50:25 -0400] yfeldblum: jameson_, the comments on the right fit for environments were in general, not to your case specifically
[2012-08-20 16:23:35 -0400] cassianoleal: hi
[2012-08-20 16:23:45 -0400] cassianoleal: I'm creating a chef configuration on an existing git repository
[2012-08-20 16:23:55 -0400] cassianoleal: but I'm doing it in a git branch
[2012-08-20 16:24:22 -0400] cassianoleal: it happens that when I call cookbook site install  something
[2012-08-20 16:24:27 -0400] cassianoleal: knife checks out branch master
[2012-08-20 16:24:37 -0400] cassianoleal: and then breaks, since the chef-repo doesn't exist on master
[2012-08-20 16:24:52 -0400] cassianoleal: how do I make knife work on a non-master branch?
[2012-08-20 16:26:04 -0400] jameson_: does knife-github-cookbook get around that?
[2012-08-20 16:26:18 -0400] jameson_: (I am running off of master so I do not know if it will)
[2012-08-20 16:27:10 -0400] cassianoleal: I don't think it's the case, I'm not even touching github for anything
[2012-08-20 16:27:30 -0400] cassianoleal: my project's repo resides on bitbucket, and the cookbook I'm downloading is on community.opscode
[2012-08-20 16:28:32 -0400] jameson_: ah, you can use
[2012-08-20 16:28:34 -0400] jameson_: --branch
[2012-08-20 16:28:47 -0400] jameson_: or -B to tell it which branch to work off of
[2012-08-20 16:29:00 -0400] jameson_: knife cookbook site install -B somebranch somecookbook
[2012-08-20 16:29:29 -0400] cassianoleal: hmm, let me try that
[2012-08-20 16:31:27 -0400] leandronunes: hi guys
[2012-08-20 16:31:36 -0400] leandronunes: ERROR: bash[assign-postgres-password]
[2012-08-20 16:31:47 -0400] leandronunes: I am getting this error on postgresql chef
[2012-08-20 16:32:05 -0400] cassianoleal: jameson_: seems like that's the solution!
[2012-08-20 16:32:09 -0400] cassianoleal: thanks a lot!
[2012-08-20 16:32:18 -0400] leandronunes:  ERROR: bash[assign-postgres-password] (/cookbooks/postgresql/recipes/server.rb:62:in `from_file') had an error: "bash"  "/tmp/chef-script20120820-22797-1nzxkrk-0" returned 2, expected 0
[2012-08-20 16:32:25 -0400] leandronunes: someone could helpme?
[2012-08-20 16:32:42 -0400] jameson_: leandronunes: the guy who wrote that cookbook hangs around here somehwhere
[2012-08-20 16:33:45 -0400] jameson_: it looks like you never set the default password
[2012-08-20 16:34:38 -0400] jameson_: node['postgresql']['password']['postgres']
[2012-08-20 16:36:09 -0400] leandronunes: jameson_: you gave me a clue
[2012-08-20 16:36:15 -0400] leandronunes: I have set the password
[2012-08-20 16:36:31 -0400] leandronunes: but I comment the rescue clause from the code and I got
[2012-08-20 16:36:38 -0400] leandronunes: could not connect to server: Connection refused Is the server running on host "localhost" and accepting TCP/IP connections on port 543
[2012-08-20 16:37:22 -0400] leandronunes: It looks like "notifies :reload" directive from "template" doesn't works
[2012-08-20 16:40:42 -0400] jameson_: leandronunes: :| that's odd
[2012-08-20 16:41:57 -0400] Jay_Levitt: My knife.rb has 'knife[:availability_zone]     = "us-east-1d"'. If I create a server, I get told the requested AZ is constrained, but try 1c, 1d or 1e!  If I specify --availability-zone 'us-east-1d' on the command line, it works.  Am I not specifying the default properly?
[2012-08-20 16:42:28 -0400] cassianoleal: anyone ever used cucumber-chef?
[2012-08-20 16:42:32 -0400] cassianoleal: I'm having this problem: https://github.com/Atalanta/cucumber-chef/issues/69
[2012-08-20 16:42:40 -0400] cassianoleal: wondering if it's just me
[2012-08-20 16:51:29 -0400] jameson_: Jay_Levitt: do you define the region as well?
[2012-08-20 16:51:57 -0400] jameson_: we ask that you do so in writing and indicate your reason
[2012-08-20 16:52:31 -0400] Jay_Levitt: jameson_: region, no.. second line:  huh?
[2012-08-20 16:52:47 -0400] jameson_: sorry
[2012-08-20 16:52:48 -0400] jameson_: bad paste
[2012-08-20 16:55:33 -0400] jameson_: Jay_Levitt: try defining the knife[:region]
[2012-08-20 16:55:42 -0400] jameson_: see if it still comp[lains about request az is contrained
[2012-08-20 16:57:57 -0400] Jay_Levitt: jameson_: nope, not happy
[2012-08-20 16:58:51 -0400] Jay_Levitt: This *looks* right: https://github.com/opscode/knife-ec2/blob/master/lib/chef/knife/ec2_server_create.rb#L77
[2012-08-20 17:10:13 -0400] jameson_: Jay_Levitt: can hyou paste the exact output?
[2012-08-20 17:10:25 -0400] jameson_: (into pastebin)
[2012-08-20 17:14:10 -0400] Jay_Levitt: jameson_: https://gist.github.com/c79c3b0e39e62cf364ae
[2012-08-20 17:15:07 -0400] jameson_: that's an AWS error
[2012-08-20 17:15:11 -0400] jameson_: heh.. not a chef error
[2012-08-20 17:15:27 -0400] jameson_: by default chef asks for us-east-1b
[2012-08-20 17:15:47 -0400] jameson_: if you add us-east-1d does it still complain?
[2012-08-20 17:16:11 -0400] Jay_Levitt: That's the thing.. if I add us-east-1d on the *command line* it's fine, but if I add it in the knife config, it gets ignored
[2012-08-20 17:17:48 -0400] jameson_: trying putting in us-east-1e ?
[2012-08-20 17:17:53 -0400] jameson_: see if it goes to 1e
[2012-08-20 17:18:06 -0400] jameson_: i do not see how knife could ignore that..
[2012-08-20 17:18:17 -0400] Jay_Levitt: jameson_: ah hah... Chef::Config[:knife][:availability_zone] = 'us-east-1d', but locate_config_value(:availability_zone) = 'us-east-1b'
[2012-08-20 17:18:26 -0400] Jay_Levitt: Where is this "config" that locate_config_value pulls from?
[2012-08-20 17:18:36 -0400] jameson_: where your close .chef/knife.rb is
[2012-08-20 17:18:57 -0400] Jay_Levitt: the only one I have is in ~/.chef/knife.rb
[2012-08-20 17:20:51 -0400] adam__: if I put log("foo") in my recipe, why does it appear twice in chef-client output?
[2012-08-20 17:21:19 -0400] adam__: the first one is INFO: Processing log[foo] action write (...)
[2012-08-20 17:21:28 -0400] adam__: and the second is just: INFO: foo
[2012-08-20 17:22:09 -0400] leandronunes: jameson_: I still have the problem.  I got /cookbooks/postgresql/recipes/server.rb:86:in `initialize': FATAL:  password authentication failed for user "postgres"
[2012-08-20 17:22:27 -0400] leandronunes: my json file I have "postgresql": { "version": "8.4" , "password": { "postgres" : "postgres"}}
[2012-08-20 17:22:48 -0400] leandronunes: Could you help me?
[2012-08-20 17:25:17 -0400] adam__: ok I needed Chef::Log.info()
[2012-08-20 17:33:35 -0400] Jay_Levitt: jameson_: curiouser and curiouser: config[:config_file] is /Users/jay/.chef/knife.rb, which *is* the right knife file.. but the other values in config are all defaults (us-east-1b, m1.large, etc), not my own settings
[2012-08-20 17:34:03 -0400] Jay_Levitt: jameson_: it seems like the only reason my chef stuff has worked at all is because some things call Chef::Config directly instead of locate_config_value()
[2012-08-20 17:35:08 -0400] jameson_: uh
[2012-08-20 17:35:14 -0400] jameson_: what version of knife-ec2 are you using?
[2012-08-20 17:35:22 -0400] Jay_Levitt: 0.5.14
[2012-08-20 17:37:18 -0400] jameson_: locate_config_value should be working proerpy
[2012-08-20 17:37:24 -0400] jameson_: it's in ec2_base.rb line 68
[2012-08-20 17:37:44 -0400] jameson_: heh, i'm a version behind on knife
[2012-08-20 17:38:27 -0400] jameson_: leandronunes: uh you are using the default recipe right?
[2012-08-20 17:38:28 -0400] Jay_Levitt: jameson_: yeah, it's "working" in that it checks config before Chef::Config
[2012-08-20 17:38:36 -0400] Jay_Levitt: jameson_: but config itself holds the wrong values!
[2012-08-20 17:38:51 -0400] jameson_: Chef::Config[:knife][key] || config[key]
[2012-08-20 17:39:01 -0400] jameson_: grabs from the config file, then config.
[2012-08-20 17:39:07 -0400] leandronunes: jameson_: yes. I am using the default.
[2012-08-20 17:39:53 -0400] Jay_Levitt: jameson_: Oh, wait, that's the opposite of what I have.. hmm
[2012-08-20 17:40:27 -0400] jameson_: hrm, so....
[2012-08-20 17:40:39 -0400] Jay_Levitt: jameson_: did you, uh, not push that into 0.5.14? Check out: https://github.com/opscode/knife-ec2/blob/master/lib/chef/knife/ec2_base.rb#L70
[2012-08-20 17:40:40 -0400] jameson_: this might be because they have been working on making it such that
[2012-08-20 17:41:13 -0400] jameson_: the order of precendence was commandline (config) > knife.rb (Chef::Config) > default (ec2_base.rb)
[2012-08-20 17:41:35 -0400] jameson_: but because it sets the default when you initally run the script in (config), it overrules the knife file
[2012-08-20 17:42:02 -0400] jameson_: so this is a bug, because it is setting defaults when it shouldn't be yet...
[2012-08-20 17:42:05 -0400] Jay_Levitt: heh
[2012-08-20 17:42:08 -0400] Jay_Levitt: ok, I will open a bug
[2012-08-20 17:42:08 -0400] jameson_: or there should be config_default or something
[2012-08-20 17:42:34 -0400] jameson_: sort of glad I chose us-east-1b as my default launch environment
[2012-08-20 17:42:36 -0400] Jay_Levitt: Yeah, looks like this changed w KNIFE_EC2-71
[2012-08-20 17:42:50 -0400] jameson_: which was command line takes precedence over config file right?
[2012-08-20 17:42:56 -0400] Jay_Levitt: yep
[2012-08-20 17:43:23 -0400] jameson_: you should re-open that ticket, add defaults being defined prevent knife.rb from being loaded
[2012-08-20 17:43:58 -0400] Jay_Levitt: cool, will do
[2012-08-20 17:44:00 -0400] Jay_Levitt: thanks for the help :)
[2012-08-20 17:44:13 -0400] jameson_: leandronunes: you are using the community's postgresql cookbook right?
[2012-08-20 17:45:53 -0400] jameson_: leandronunes: looks like the password field was suppose to be generated by the openssl cookbook
[2012-08-20 17:46:04 -0400] jameson_: my guess is that you are missing dependencies.
[2012-08-20 17:50:07 -0400] noodles: hi, first time setting windows as chef client but having some problem.
[2012-08-20 17:51:22 -0400] noodles: [2012-08-20T10:41:29-07:00] ERROR: windows_batch[echo some env vars] (c:/chef/cache/cookbooks/windows_base/recipes/default.rb:27:in `from_file') had an error:windows_batch[echo some env vars] (windows_base::default line /chef/cache/cookbooks/windows_base/recipes/default.rb) had an error: NameError: uninitialized constant Chef::Provider::Package::Macports
[2012-08-20 17:51:38 -0400] noodles: why did it load Macports..  any idea?
[2012-08-20 17:55:21 -0400] leandronunes: jameson_: thanks.
[2012-08-20 17:55:23 -0400] jameson_: noodles: :| funny that echoing vars made it error like that
[2012-08-20 17:55:48 -0400] jameson_: leandronunes: trying installing openssl, and build-essentials, that might get you through the problems.
[2012-08-20 17:56:34 -0400] noodles: this is Windows client, how do I install build-essentials?
[2012-08-20 18:10:11 -0400] julienphalip: Hello there. I'm having some trouble setting up postgresl on a Vagrant VM with Chef. I've set a password in the json specs for the 'postgres' user, but once the VM has been provisioned, the 'psql' command denies access to the 'postgres' user. Do you have ideas to help me troubleshoot this? Thanks!
[2012-08-20 18:16:45 -0400] jasond: is there an SRPM for chef-full?
[2012-08-20 18:17:53 -0400] atomic-penguin: jasond, doubt it, I think they use FPM to generate it in the omnibus build
[2012-08-20 18:20:13 -0400] jasond: atomic-penguin: looks like it.  thanks
[2012-08-20 18:25:03 -0400] hoover_damm: jasond, omnibus is built via https://github.com/opscode/omnibus-software
[2012-08-20 18:25:11 -0400] hoover_damm: jasond, fork it and build it yourself
[2012-08-20 18:41:03 -0400] Jay_Levitt: What is the policy on drive-by pull requests, where a CLA was requested but the submitter never followed up?
[2012-08-20 18:42:29 -0400] hoover_damm: Jay_Levitt, generally you end up taking the changes, submitting a new pull yourself
[2012-08-20 18:42:42 -0400] Jay_Levitt: hoover_damm: yeah, that's what I was thinking of doing, unless it was frowned upon
[2012-08-20 18:43:12 -0400] hoover_damm: Jay_Levitt, basically you end up taking ownership of the changes so you should make sure there isn't any issues
[2012-08-20 18:43:33 -0400] Jay_Levitt: yep, I will assume that risk :)
[2012-08-20 18:43:38 -0400] hoover_damm: Jay_Levitt, as far as frowned upon, I can't see why as long as you don't submit code that has someone elses copyright on it
[2012-08-20 18:44:58 -0400] fromonesrc: any tips on getting collectd working with graphite?
[2012-08-20 18:47:29 -0400] hoover_damm: likely not the best channel for that fromonesrc ... but all you need is 5.1 to have write_graphite
[2012-08-20 18:49:52 -0400] fromonesrc: thanks hoover_damm
[2012-08-20 18:50:38 -0400] hoover_damm: fromonesrc, there's several good cookbooks on setting up graphite... mine is dated and needs to be fixed
[2012-08-20 18:51:10 -0400] fromonesrc: I have graphite up and running with statsd feeding into it
[2012-08-20 18:51:23 -0400] fromonesrc: looks like you got me on the right track with regard to write_graphite on collectd
[2012-08-20 18:53:50 -0400] hoover_damm: fromonesrc, yep enable store_rates and :) and you'll be happy
[2012-08-20 19:12:17 -0400] dwhsix: is there a way to specify node-specific attributes at node creation time?
[2012-08-20 19:16:17 -0400] Jay_Levitt: I've built and installed my own knife-ec2 gem, and I'm using 'knife' from gems, not omnibus.. but 'knife' finds the standard knife-ec2 gem, not my own.  eh?
[2012-08-20 19:17:59 -0400] jameson_: @_@?
[2012-08-20 19:18:05 -0400] jtgiri_: @dwhsix chef-client -j JSON_ATTRIBS     Load attributes from a JSON file or URL
[2012-08-20 19:18:41 -0400] Jay_Levitt: jameson_: yeah, turns out that config vs CLI bug was already fixed in a pull request: https://github.com/opscode/knife-ec2/pull/63
[2012-08-20 19:18:59 -0400] hoover_damm: jtgiri_, disadvantage of that is it uses that -j to override the whole node array
[2012-08-20 19:19:04 -0400] hoover_damm: jtgiri_, so you can delete stuff
[2012-08-20 19:19:06 -0400] Jay_Levitt: jameson_: so I forked, merged the pull request, did "gem build" and "gem install".. but "knife ec2 blah" is running the standard knife-ec2 gem
[2012-08-20 19:19:51 -0400] jameson_: gem install probably wrote in the normal knife-ec2 gem?
[2012-08-20 19:20:10 -0400] jameson_: i use rvm, and patch stuff directly.
[2012-08-20 19:20:41 -0400] Jay_Levitt: nope, it put it in the right .rvm/gems/ruby-1.9.3-p194/etc place
[2012-08-20 19:24:35 -0400] Jay_Levitt: trying to figure out how 'knife' gets to a plugin
[2012-08-20 19:33:50 -0400] Jay_Levitt: HAHAHA HOOHOOHOO HEHEHEHEHE... subcommand_loader.rb loads every version of a knife plugin it finds.  Last one in the Dirglob wins.
[2012-08-20 19:34:06 -0400] jforest: So, does anyone here manage route53 and ELB and such with chef?
[2012-08-20 19:34:31 -0400] cassianoleal: knife-ec2 doesn't use region, availability_zone and aws_image_id from knife.rb
[2012-08-20 19:34:46 -0400] cassianoleal: if I set those as cli arguments, it works
[2012-08-20 19:35:05 -0400] Jay_Levitt: cassianoleal: there is a current bug with knife-ec2 ignoring many things in knife.rb :(
[2012-08-20 19:35:10 -0400] cassianoleal: ouch
[2012-08-20 19:35:33 -0400] cassianoleal: Jay_Levitt: do you have the bug id/url?
[2012-08-20 19:35:38 -0400] cassianoleal: that's too bad, really
[2012-08-20 19:35:57 -0400] Jay_Levitt: cassianoleal: latest incarnation is http://tickets.opscode.com/browse/KNIFE_EC2-80
[2012-08-20 19:36:04 -0400] Jay_Levitt: but many other open KNIFE_EC2 bugs seem related
[2012-08-20 19:36:09 -0400] cassianoleal: "latest incarnation" lol
[2012-08-20 19:36:53 -0400] cassianoleal: that issue's got a patch, any idea if it's already merged on a branch or something?
[2012-08-20 19:37:07 -0400] Jay_Levitt: cassianoleal: no, I am currently trying to build my own but running into another bug in knife :)
[2012-08-20 19:37:56 -0400] cassianoleal: Jay_Levitt: nice! :)
[2012-08-20 19:40:14 -0400] ranjibd_: jforest, ELB ..yes.. not route53. we hardly change those
[2012-08-20 19:40:32 -0400] jforest: how about security groups, same answer?
[2012-08-20 19:40:39 -0400] jforest: I'm just trying to automate my life away :)
[2012-08-20 19:40:51 -0400] jforest: https://github.com/websterclay/chef-elb
[2012-08-20 19:40:57 -0400] jforest: this what you use for ELB?
[2012-08-20 19:45:58 -0400] Gurpartap: Which cookbook/recipe do we use to install Ruby? (other than chef's omnibus ruby)
[2012-08-20 19:47:30 -0400] mattray: Gurpartap: I've heard good things about fnichol's http://community.opscode.com/cookbooks/ruby_build
[2012-08-20 19:49:19 -0400] Gurpartap: mattray: i see. thanks!
[2012-08-20 19:49:22 -0400] Gurpartap: :)
[2012-08-20 19:54:41 -0400] Jay_Levitt: jameson_: http://tickets.opscode.com/browse/CHEF-3373 :)
[2012-08-20 20:16:36 -0400] schuckles: is it possible to install chef server on mongo?
[2012-08-20 20:17:04 -0400] Urocyon: arch! got a berks problem.  Trying to pull in a cookbook from a private repo specified in by berksfile, but i'm getting "not a valid Git URI.  https://gist.github.com/b929d3045337edd03611
[2012-08-20 20:17:22 -0400] Urocyon: not sure what I'm doing wrong there.
[2012-08-20 20:20:02 -0400] jtimberman: schuckles: you mean use mongodb as the backend database? no.
[2012-08-20 20:20:10 -0400] schuckles: yea
[2012-08-20 20:20:53 -0400] c_t: ]\
[2012-08-20 20:27:46 -0400] Jay_Levitt: Are there any interesting cookbooks for automatically setting Route53 hostnames from roles, or otherwise self-organizing inside a VPC?
[2012-08-20 20:28:17 -0400] jtimberman: there's a route53 cookbook that manages records with an LWRP
[2012-08-20 20:28:21 -0400] jtimberman: http://ckbk.it/route53
[2012-08-20 20:28:36 -0400] Urocyon: ah, dug in the code.  the regex is looking for that repo to be under some sub directory.
[2012-08-20 20:28:45 -0400] Urocyon: :-(
[2012-08-20 20:32:51 -0400] gilbert1: hi all. I want to make a cookbook version match the changelist number in git. Right now, we are checking in with git, and then using a post-commit hook to knife the files over to chef.
[2012-08-20 20:33:38 -0400] gilbert1: i've looked into using post-commit to make the change in metadata.rb, but without looking specifically for just a metadata.rb change, i'll wind up looping
[2012-08-20 20:34:04 -0400] gilbert1: i've looked at a clean filter, but to put a keyword into metadata.rb, i've pretty much nixed my ability to dynamically change it
[2012-08-20 20:34:24 -0400] gilbert1: anyone done this before? how did you solve this problem?
[2012-08-20 20:34:31 -0400] miah: Urocyon: create issue in github repo? =)
[2012-08-20 20:36:20 -0400] Urocyon: will do. was just trying to figure out a better regex than /(.+)@(.+):(.+)\/(.+)\.git/
[2012-08-20 20:36:44 -0400] jameson_: jforest: i also recommend looking at right_aws
[2012-08-20 20:36:53 -0400] jameson_: i use that for ELB, and elastic-ip
[2012-08-20 20:38:51 -0400] cassianoleal: trying to bootstrap a node on amazon with knife-ec2
[2012-08-20 20:39:04 -0400] cassianoleal: it hangs right after "Thank you for installing Chef!"
[2012-08-20 20:39:19 -0400] cassianoleal: how do I debug that, or how do I get more information on what's going on?
[2012-08-20 20:39:45 -0400] cassianoleal: it uses Amazon Linux, by the way
[2012-08-20 20:43:44 -0400] jameson_: Jay_Levitt: that's a loader bug (good catch), did you file one for the default command line options overruling the knife.rb options?
[2012-08-20 20:48:08 -0400] jforest: jameson_: Thanks, i will check it out
[2012-08-20 20:51:02 -0400] Urocyon: miah: issue created.
[2012-08-20 21:02:46 -0400] PapaSierra: morning. i'm pretty desperate to learn and understand how to overcome these chef exceptions. my cookbook works fine for lamp with php 5.3. now i'm trying to change it to 5.4. i've commented out the relevant bits because they're causing an error. clearly something is wrong with the ordering or the fact that apt-get update needs to be run manually or something. please take a look and help http://www.hastebin.com/manetohoye.md
[2012-08-20 21:04:06 -0400] jameson_: anyone know the list of ec2 permission needed by Fog::Compute::AWS.new ?
[2012-08-20 21:06:25 -0400] grantr: does anyone else have issues with nodes on ec2 occasionally dropping out of search results?
[2012-08-20 21:07:26 -0400] PapaSierra: my issue above ^^^ revolves around how to add a ppa to a cookbook, anyone?
[2012-08-20 21:07:44 -0400] cnf: PapaSierra: i don't even know what a ppa is ^^;
[2012-08-20 21:08:17 -0400] PapaSierra: nor do i ;)
[2012-08-20 21:08:23 -0400] cnf: o,O
[2012-08-20 21:08:23 -0400] PapaSierra: http://stackoverflow.com/a/9584765 looks reasonable
[2012-08-20 21:08:56 -0400] PapaSierra: basically ubuntu 12 decided to stick with php 5.3. i need 5.4 so i have to add a ppa to apt
[2012-08-20 21:09:41 -0400] cnf: so where are you putting http://www.hastebin.com/manetohoye.md ?
[2012-08-20 21:10:40 -0400] Twirrim: for what it's worth, I'm finding php 5.4 has some really annoying segfaulting bugs in it (specifically affects php-fpm), not entirely convinced about the wisdom of using it in production at the moment.
[2012-08-20 21:11:52 -0400] PapaSierra: cnf i don't want to tell you because you'll tell me i'm doing it wrong ;) i'm using chef solo and on my run list i just put one recipe called project and that's what you're looking at
[2012-08-20 21:12:02 -0400] Twirrim: it's also cropped up with a few other bits of code.  Even though they do end up actually working something in 5.4 is segfaulting. The php-fpm thing was causing me all sorts of headaches with chef (the init script exits with status 1) :)
[2012-08-20 21:12:13 -0400] jordane: PapaSierra: http://stackoverflow.com/questions/9576124/what-is-the-right-way-to-do-add-apt-repository-via-chef <- to add a ppa
[2012-08-20 21:12:16 -0400] cnf: PapaSierra: -solo isn't "wrong", it's imo just harder to learn
[2012-08-20 21:12:18 -0400] PapaSierra: Twirrim thanks for that advice. noted. i'll review the decision tomorrow
[2012-08-20 21:12:48 -0400] jordane: PapaSierra: specifically the answer on there about the apt cookbook
[2012-08-20 21:13:27 -0400] PapaSierra: jordane right, i found that too (after i asked the question), will look into it now
[2012-08-20 21:19:42 -0400] PapaSierra: hmm, still got issues, please let me know if i've got something wrong with the apt ppa thing http://www.hastebin.com/raw/vajafijucu
[2012-08-20 21:22:39 -0400] MattV: I'm just getting started with a chef-solo-based Vagrant instance (https://drupal.org/project/vagrant). How do I add a self-signed ssl cert for Apache, to my vm?
[2012-08-20 21:22:43 -0400] PapaSierra: jordane did you see my paste? i've copied key so that should be correct
[2012-08-20 21:22:57 -0400] MattV: Are there chef cookbooks for creating the self-signed cert? Or is that something I'd add to the existing Apache cookbooks? Or elsewhere?
[2012-08-20 21:24:30 -0400] erratic: how is knife data bag from file -a supposed to work
[2012-08-20 21:24:33 -0400] erratic: doesnt do anything.
[2012-08-20 21:24:36 -0400] miah: MattV: if you're going to add it to a cookbook, add it to the openssl cookbook.
[2012-08-20 21:25:39 -0400] MattV: miah: thanks.
[2012-08-20 21:25:47 -0400] MattV: Do you know of any existing cookbooks that already handle creating a self-signed cert?
[2012-08-20 21:26:01 -0400] miah: none that im aware of
[2012-08-20 21:26:24 -0400] MattV: ok, thanks again
[2012-08-20 21:26:40 -0400] erratic: I keep running this command but its not doing anything
[2012-08-20 21:29:04 -0400] erratic: $ knife data bag from file -a -V shouldn't this mean to say no data bags to upload instead of nothing ...
[2012-08-20 21:29:13 -0400] erratic: Im confused
[2012-08-20 21:29:24 -0400] erratic: it didn't just delete all of my databags I hope
[2012-08-20 21:30:17 -0400] miah: knife data bag list
[2012-08-20 21:30:20 -0400] miah: find out
[2012-08-20 21:31:15 -0400] PapaSierra: so it turns out i have to run apt-get udpate first on my cookbook
[2012-08-20 21:32:58 -0400] erratic: damn it didn't upload them, phew, my .json files are still in their databag/item.json format untouched
[2012-08-20 21:33:25 -0400] erratic: so...
[2012-08-20 21:33:30 -0400] erratic: this doesn't work apparently
[2012-08-20 21:34:17 -0400] erratic: why is there a -a --all upload all data bags though
[2012-08-20 21:34:48 -0400] erratic: databagname/databagitem1.json &| databagitem2.json
[2012-08-20 21:35:20 -0400] erratic: why it no workie
[2012-08-20 21:36:15 -0400] erratic: https://github.com/opscode/chef/pull/181 ....
[2012-08-20 21:36:40 -0400] erratic: o
[2012-08-20 21:37:24 -0400] jtimberman: hmm, ticket: http://tickets.opscode.com/browse/CHEF-1912
[2012-08-20 21:39:03 -0400] erratic: yeah so I sort of came to that conclusion from the first link and... .
[2012-08-20 21:39:27 -0400] erratic: https://gist.github.com/82cc57d3d7306a2bedc9
[2012-08-20 21:39:58 -0400] erratic: but apparently thats not what you wanted me to see is it? what part of this tangent did you want me to read
[2012-08-20 21:39:58 -0400] erratic: lol
[2012-08-20 21:41:02 -0400] PapaSierra: jtimberman as a rule of thumb is "apt-get update" required as the very first item in the run list or should the apt cookbook do that for you? i see lots of people trying to fix the "bug"
[2012-08-20 21:41:42 -0400] miah: erratic: uh. one of your database isn't formatted correctly
[2012-08-20 21:42:09 -0400] erratic: ... I know
[2012-08-20 21:42:46 -0400] miah: fix your data bag then upload will work?
[2012-08-20 21:42:56 -0400] erratic: working on it
[2012-08-20 21:43:03 -0400] erratic: ty
[2012-08-20 21:46:08 -0400] erratic: hmmm
[2012-08-20 21:48:11 -0400] jameson_: I thought postgres uses the openssl package to sign a cert or something
[2012-08-20 21:48:42 -0400] jameson_: jtimberman: ^ am I wrong on what postgres cookbook does with the openssl cookbook?
[2012-08-20 21:49:31 -0400] miah: it uses the openssl cookbook to create passwords only
[2012-08-20 21:50:09 -0400] miah: https://github.com/opscode-cookbooks/openssl/blob/master/libraries/secure_password.rb
[2012-08-20 21:50:33 -0400] erratic: you know what
[2012-08-20 21:50:48 -0400] Jay_Levitt: jameson_: the config vs defaults. was already reopened as KNIFE_EC2-80 (with a pull request - yay)
[2012-08-20 21:50:48 -0400] miah: no. but i know who personally.
[2012-08-20 21:51:08 -0400] erratic: check thsi out
[2012-08-20 21:51:14 -0400] Jay_Levitt: miah: Naturally.
[2012-08-20 21:51:17 -0400] erratic: https://gist.github.com/55c29d76bcd16a5b8630
[2012-08-20 21:51:34 -0400] erratic: this backup script Ive been using serializes using the default format
[2012-08-20 21:51:44 -0400] erratic: because somebody didn't test it
[2012-08-20 21:53:28 -0400] miah: that somebody would also be you
[2012-08-20 21:53:53 -0400] erratic: wot
[2012-08-20 21:53:54 -0400] erratic: no u
[2012-08-20 21:53:55 -0400] miah: understanding how a tool works and how it applies to your situation is essential in proper usage
[2012-08-20 21:54:39 -0400] alexkarp: I'm having the exact same stack trace as http://tickets.opscode.com/browse/CHEF-2827?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab but I'm running ubuntu 11.04 and the ticket is really unhelpful for me
[2012-08-20 21:54:51 -0400] alexkarp: I could use a pointer or two if anyone has the time
[2012-08-20 21:55:11 -0400] Jay_Levitt: 0x00000001
[2012-08-20 21:55:14 -0400] Jay_Levitt: thankyougoodnight
[2012-08-20 21:55:24 -0400] alexkarp: hahahah
[2012-08-20 21:55:41 -0400] erratic: miah but seriously though this is right up there with portage/gentoo
[2012-08-20 21:55:49 -0400] erratic: and django
[2012-08-20 21:57:42 -0400] erratic: portage/eapi
[2012-08-20 21:58:44 -0400] erratic: except opscode probably cares enough about their wiki to pay the colo bill
[2012-08-20 22:00:35 -0400] hoover_damm: erratic, that was random
[2012-08-20 22:00:39 -0400] hoover_damm: but I guess it's to be expected
[2012-08-20 22:01:50 -0400] ssd7: erratic: The backup script here worked well for me in the past, but I haven't tested it in a while yet https://github.com/stevendanna/knife-hacks/blob/master/plugins/backup_export.rb
[2012-08-20 22:02:53 -0400] erratic: hoover_damm it wasn't random
[2012-08-20 22:03:10 -0400] erratic: I was bitching about features that are just barely documented and miah was telling me about myself
[2012-08-20 22:03:39 -0400] hoover_damm: and yet people tell me i'm stupid for using source based distributions
[2012-08-20 22:03:46 -0400] hoover_damm: at least I don't rage over silly stuff
[2012-08-20 22:03:53 -0400] erratic: ^_^
[2012-08-20 22:04:07 -0400] erratic: I'm not as bad as I used to be ok
[2012-08-20 22:04:21 -0400] erratic: and Im not really raging
[2012-08-20 22:04:26 -0400] hoover_damm: erratic, it has nothing to do with you
[2012-08-20 22:05:21 -0400] erratic: ok
[2012-08-20 22:05:24 -0400] erratic: dude
[2012-08-20 22:05:26 -0400] erratic: this script
[2012-08-20 22:05:32 -0400] erratic: I have made most of these changes to my own copy!
[2012-08-20 22:05:43 -0400] erratic: ssd7 thanks!
[2012-08-20 22:05:44 -0400] erratic: lol
[2012-08-20 22:06:15 -0400] erratic: I'm git module adding this into my project
[2012-08-20 22:06:45 -0400] erratic: the whole knife hacks I mean.
[2012-08-20 22:07:06 -0400] erratic: https://github.com/stevendanna/knife-hacks/blob/master/plugins/backup_restore.rb
[2012-08-20 22:17:30 -0400] erratic: damn
[2012-08-20 22:17:35 -0400] erratic: thats so much nicer
[2012-08-20 22:17:37 -0400] erratic: thanks again ssd7
[2012-08-20 22:18:36 -0400] ssd7: np :)
[2012-08-20 22:18:53 -0400] erratic: I donno why I cant keep up with stuff like that
[2012-08-20 22:19:48 -0400] hoover_damm: if you try to 'keep up' ... you'll find your pants falling down more often
[2012-08-20 22:20:15 -0400] erratic: what source dist do you use
[2012-08-20 22:20:40 -0400] hoover_damm: erratic, been toying with exherbo
[2012-08-20 22:20:45 -0400] hoover_damm: to move to
[2012-08-20 22:20:53 -0400] hoover_damm: but i've been a Gentoo User since .. 2004?
[2012-08-20 22:21:11 -0400] hoover_damm: I've watched many people fail to install Gentoo where I can install it on the same system perfectly fine...
[2012-08-20 22:21:26 -0400] hoover_damm: I say it's lack of paying attention
[2012-08-20 22:21:32 -0400] hoover_damm: and reading the manual
[2012-08-20 22:21:41 -0400] erratic: I have a friend who is obsessed with grsec now ever since I set it up like 4 years ago
[2012-08-20 22:22:01 -0400] erratic: and gave him a shell on my box, and restricted socket connections with grsec and iptables by gid/uid
[2012-08-20 22:22:33 -0400] hoover_damm: wasn't grsec new like 2001?
[2012-08-20 22:22:55 -0400] erratic: I first tried it back in 2003 but I didn't know much about it
[2012-08-20 22:24:15 -0400] erratic: I need to at least get a start on ossec databags
[2012-08-20 22:24:18 -0400] erratic: I'll bbl
[2012-08-20 22:24:36 -0400] hoover_damm: I got into grsec from a guy who ran blue-labs
[2012-08-20 22:24:43 -0400] hoover_damm: neat dude
[2012-08-20 22:25:26 -0400] erratic: this guy who used to be into vax and openbsd turned me onto it i think
[2012-08-20 22:25:29 -0400] erratic: soemthing like that
[2012-08-20 22:26:46 -0400] erratic: that or I was perusing sys-kernel
[2012-08-20 22:27:23 -0400] erratic: and I think I put two and two together and decided to ask if it was more advantageous to run obsd or that
[2012-08-20 22:27:28 -0400] miah: i used to hang out in #security and chat with spender.. which is why i used grsec back in 'the day.
[2012-08-20 22:27:44 -0400] miah: too lazy to compile kernels now though =)
[2012-08-20 22:35:16 -0400] erratic: miah I compiled the rt-sources yesterday on my laptop so that I can run jack audio connection kit in real time
[2012-08-20 22:35:34 -0400] erratic: virtualbox modules built with it
[2012-08-20 22:35:47 -0400] erratic: also I used all the debian kernel build utils
[2012-08-20 22:35:53 -0400] erratic: so it was pretty easy
[2012-08-20 22:36:08 -0400] erratic: I also compiled 3.6
[2012-08-20 22:40:50 -0400] erratic: thats easy for me to say though I have no personal life
[2012-08-20 22:41:11 -0400] erratic: I spent my entire weekend playing with digital poly synths and reading about adsrs
[2012-08-20 22:41:31 -0400] erratic: it was awesome
[2012-08-20 22:47:49 -0400] evilantnie: I just updated a cookbook, I modified a single line in an erb template with the cookbook.  Now the chef-client run on the node that's executing that cookbook is throwing Net::HTTPServerException: 404 "Not Found" for that template file.... any ideas?
[2012-08-20 22:49:26 -0400] miah: did you upload the template file?
[2012-08-20 22:49:49 -0400] evilantnie: I modified an existing one, it wasn't new... and it's been working fine
[2012-08-20 22:50:22 -0400] dennis_: Hi. Stupid question -  When I'm launching a cloud server with knife ec2 server create -j '{"server":{"role":"hummusfactory"}}', how would I access those data through a template? I tried default["server"]["role"], but was told that was undefined. TIA.
[2012-08-20 22:50:49 -0400] evilantnie: should I re-upload the cookbook?  maybe something got hosed there?
[2012-08-20 22:51:54 -0400] dennis_: do those attributes get merged into the node struct?
[2012-08-20 22:52:06 -0400] evilantnie: it looks fine on my chef server
[2012-08-20 23:00:22 -0400] gswallow: Howdy y'all.  Have  quick question about this: http://pastebin.com/DvheewjN
[2012-08-20 23:00:24 -0400] gswallow: What's a run context?
[2012-08-20 23:06:53 -0400] evilantnie: this is weird... why does one node get a 404 and another node that runs the same cookbook work fine?  is there an easy way to reset a node's cache?  is it as simple as rm -rf /var/cache/chef/cookbooks/* ?
[2012-08-20 23:07:05 -0400] evilantnie: or is there probably something else hosed with this node
[2012-08-20 23:20:03 -0400] erratic: siiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiigh.
[2012-08-20 23:20:30 -0400] kcb_: how are the sandbox directories on chef server supposed to get cleaned up?
[2012-08-20 23:21:01 -0400] kcb_: "too many links" error on upload -> i can delete them and reupload all cookbooks but that doesn't explain why it happened
[2012-08-20 23:29:37 -0400] erratic:  knife search node "roles:Base" -a name | sed -rn '/name:/s/^name:  [^a-z A-Z 0-9]*|[^a-z A-Z 0-9]*$//gp' | xargs -L1 knife node delete -y
[2012-08-20 23:29:57 -0400] erratic: now vagrant provision.
[2012-08-20 23:31:11 -0400] qhartman: I'm fighting an only_if on a ruby_block
[2012-08-20 23:32:50 -0400] qhartman: https://gist.github.com/3409252
[2012-08-20 23:32:59 -0400] qhartman: seems like it should work
[2012-08-20 23:33:42 -0400] gswallow: == "true" tests a string that is true?
[2012-08-20 23:37:58 -0400] wdpro_kevin: Anyone know of a handler that writes back to the node object? I thought I saw something like that at one point but can't locate it now.
[2012-08-20 23:38:57 -0400] erratic: anyone know how to make the behavior of search not do 3 different things when it should probably only be doing two?
[2012-08-20 23:39:03 -0400] erratic: in terms of what its returning
[2012-08-20 23:39:04 -0400] erratic: cos
[2012-08-20 23:40:00 -0400] erratic: it seems like the default return value varies between an empty array and no array and an array of elements for me
[2012-08-20 23:40:54 -0400] erratic: between it returning nil and an empty array... I'm not sure what .. why
[2012-08-20 23:40:55 -0400] gswallow: to answer my own question....
[2012-08-20 23:40:56 -0400] gswallow: https://gist.github.com/3409231
[2012-08-20 23:41:38 -0400] erratic: actually maybe its not search
[2012-08-20 23:41:47 -0400] erratic: but I've seen this problem happen in other peoples cookbooks too
[2012-08-20 23:43:00 -0400] erratic: and Im tired of seeing it, tired enough that I am willing to sit here until 12 oclock tonight to fix it
[2012-08-20 23:43:18 -0400] erratic: so I can get some fucking work done without having to worry about it anymore.
[2012-08-20 23:44:29 -0400] evilantnie: ok so strangely, my cookbook just randomly started working again.  Wonder if hosted chef was having problems
[2012-08-20 23:44:46 -0400] erratic: heh
[2012-08-20 23:45:31 -0400] erratic: [Mon, 20 Aug 2012 23:36:18 +0000] DEBUG: NoMethodError: undefined method `[]' fo
[2012-08-20 23:45:31 -0400] erratic: r nil:NilClass
[2012-08-20 23:45:45 -0400] erratic: yeah theres plenty of times that didn't get anything back and it didn't complain
[2012-08-20 23:45:52 -0400] erratic: because it got an empty array or some such thing
[2012-08-20 23:46:00 -0400] erratic: whyz it getting nil lolol
[2012-08-20 23:46:41 -0400] erratic: seems like it should just return that always if its an empty array, or just always return an empty array
[2012-08-20 23:46:47 -0400] erratic: but one or the other not both
[2012-08-20 23:46:50 -0400] erratic: jesus
[2012-08-20 23:52:31 -0400] erratic: http://wiki.opscode.com/display/chef/Search#highlighter_784175
[2012-08-20 23:52:49 -0400] erratic: I like how the same pattern that I"m using is encouraged here too
[2012-08-20 23:55:30 -0400] erratic: lol
[2012-08-20 23:55:44 -0400] erratic: I hate programming
[2012-08-20 23:56:14 -0400] erratic: Im just not any good at it
[2012-08-20 23:56:39 -0400] erratic: and stuff like this frustrates me because its not what I'm used to and I don't really want to be messing with it at all like
[2012-08-20 23:56:46 -0400] erratic: I have better things to do
[2012-08-20 23:57:28 -0400] erratic: Im just gonna stay here at work for a bit
[2012-08-20 23:57:37 -0400] erratic: maybe when everyone gets outta here and I have some quite I can focus
[2012-08-20 23:58:17 -0400] hoover_damm: erratic, take a queue from my mother... if you have nothing good to say, don't say anything at all
[2012-08-20 23:58:29 -0400] hoover_damm: erratic, and it'll help with that random issue where people think your stupid
[2012-08-20 23:58:39 -0400] hoover_damm: erratic, because it's more likely a matter of context switching and time management
[2012-08-20 23:58:44 -0400] hoover_damm: more then anything else

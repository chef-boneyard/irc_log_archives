[2012-08-21 00:02:32 -0400] _josh: I keep getting random errors in chef where it says "Cannot symlink ../config/database.yml"; I've set deploy_revision's symlink_before_migrate to nil (I don't have a config directory); anybody know why this is happening? This also doesn't happen every time, which is curious to me...
[2012-08-21 00:12:52 -0400] timsmith: question on the cookbook upload functionality on the community site.  If you upload a new cookbook via the browser is it a tarball or a .tgz
[2012-08-21 00:21:38 -0400] wdpro_kevin: anyone have a solution for appending the output from an "execute" command to the node object? or to chef::log?
[2012-08-21 00:39:06 -0400] erratic: hoover_damm sorry, irc is not always a good outlet for me :)
[2012-08-21 00:52:53 -0400] hoover_damm: erratic, that's why you need offtopic channels or some better place for that :)
[2012-08-21 00:53:00 -0400] hoover_damm: erratic, venting is acceptable and required
[2012-08-21 00:54:29 -0400] qhartman: I think I've either run into a bug in chef, or I was previously using a bug that has been fixed and I need to approximate the old behavior. I'm trying to do a "File.exists?" test in an only_if statement on a ruby_block
[2012-08-21 00:54:51 -0400] qhartman: I'm using some variables set outside the ruby block in a loop to buidl the path to the file
[2012-08-21 00:55:56 -0400] qhartman: under .10.0 this works fine. Under 10.12 it fails
[2012-08-21 00:56:05 -0400] hoover_damm: more context on how it fails?
[2012-08-21 00:56:09 -0400] hoover_damm: and does ::File.exists? work?
[2012-08-21 00:56:25 -0400] qhartman: the File.exists? always evaluates to false
[2012-08-21 00:56:56 -0400] qhartman: so it seems like some of the variables I'm using to build the path must not be in the state I expect them to be when that test is run
[2012-08-21 00:57:34 -0400] qhartman: IF I do a "puts File.exists?(var)" just before the ruby block, I get the correct truth output at the beginning of the chef run
[2012-08-21 00:57:41 -0400] qhartman: as expected
[2012-08-21 00:57:52 -0400] qhartman: but again, the ruby block always gets skipped
[2012-08-21 00:57:53 -0400] meisen: qhartman - is this in a loop of some sort?  I was JUST debugging this
[2012-08-21 00:58:00 -0400] meisen: Let me see if I can find the link that I found
[2012-08-21 00:58:04 -0400] qhartman: yes, it is in a loop
[2012-08-21 00:58:10 -0400] meisen: Do your resources inside the loop have unique names
[2012-08-21 00:58:21 -0400] meisen: ... brb, checking to see if I can find the specific link
[2012-08-21 00:58:51 -0400] qhartman: each resource I'm using has a unique name, but the same ones get re-used in eahc iteration of the loop
[2012-08-21 00:59:30 -0400] meisen: I am dealing with the exact issue as we speak, so ymmv.  See http://tickets.opscode.com/browse/CHEF-2892 and another discussion at http://tickets.opscode.com/browse/CHEF-2812
[2012-08-21 00:59:43 -0400] qhartman: It's looping like this: node[:container][:list_services].each do |service|"
[2012-08-21 01:00:05 -0400] qhartman: This is killing my deploys
[2012-08-21 01:00:34 -0400] meisen: Basically if the resource name does not change somehow in the loop, the state is preserved because Chef sees this as a bunch of iterations of the same resource
[2012-08-21 01:00:40 -0400] qhartman: and I'm using "service" as part of the path, as well as another variable that is build from the service variable.
[2012-08-21 01:01:09 -0400] qhartman: So If I change the name of the resource with one of those variables it will work?
[2012-08-21 01:01:26 -0400] meisen: That's the theory, any way... that's exactly what I am trying right now
[2012-08-21 01:01:34 -0400] meisen: According to the first link I sent, "This is actually expected behavior that started occurring more strictly after 0.10.8"
[2012-08-21 01:02:29 -0400] meisen: So the workaround, as you say, is to embed the iterator variable into your resource name
[2012-08-21 01:02:31 -0400] qhartman: hot damn , that fixed it
[2012-08-21 01:02:36 -0400] meisen: Sweet!
[2012-08-21 01:02:46 -0400] qhartman: Thanks so much for hte pointers
[2012-08-21 01:02:51 -0400] qhartman: I would never have tried that
[2012-08-21 01:02:55 -0400] qhartman: what a PITA
[2012-08-21 01:03:08 -0400] qhartman: expected behavior my ass....
[2012-08-21 01:03:32 -0400] meisen: No problem... if only someone had fixed this for me a day ago, would have saved me some hair pulling!
[2012-08-21 01:03:46 -0400] qhartman: Yeah, I'm been smashing my face on my keyboard for the last 3 hours
[2012-08-21 01:03:47 -0400] meisen: I understand the comment about expected behavior but it is counter-intuitive
[2012-08-21 01:04:05 -0400] qhartman: yeah, that behaior is only expected if you are the person who built it
[2012-08-21 01:04:09 -0400] meisen: ... now i just have to go see if it's fixed mine yet
[2012-08-21 01:04:10 -0400] meisen: lol
[2012-08-21 01:04:49 -0400] meisen: My scripts are still pretty new, so of course, I refactored mine and broke them completely!  But you give me hope that I'm on the right track!
[2012-08-21 01:04:52 -0400] meisen: Cheers!
[2012-08-21 01:05:11 -0400] qhartman: good luck
[2012-08-21 01:43:20 -0400] AdamAFlynn: I'm trying to work out how to "stage" my cookbooks and I'm having trouble finding resources online with patterns for this
[2012-08-21 01:44:00 -0400] AdamAFlynn: When I write cookbooks, I upload them to Chef server and test them on 1 or 2 production-like boxes
[2012-08-21 01:44:29 -0400] AdamAFlynn: Then run chef-client on all my infrastructure when I know they work
[2012-08-21 01:45:10 -0400] AdamAFlynn: That workflow's been ok so far, but I'd like to daemonize chef-client on at least some servers (to pick up when new nodes are added)
[2012-08-21 01:46:04 -0400] AdamAFlynn: But if I do that and my chef server doesn't always have production-ready code on it, I risk problems
[2012-08-21 01:47:37 -0400] AdamAFlynn: I can think of a few hacky workarounds (run 2 chef servers and figure out how to get knife to upload to the one I want at the time; have 2 copies of my cookbooks and merge changes over as they become stable; etc)
[2012-08-21 01:48:12 -0400] AdamAFlynn: But I'm not sure if there's a cleaner solution that's considered "best practice" (or if I should be changing my workflow)
[2012-08-21 01:48:49 -0400] siezer: use environments to pin cookbook versions
[2012-08-21 01:49:54 -0400] AdamAFlynn: so a prod-ready branch and a testing branch each with different versions
[2012-08-21 01:50:02 -0400] AdamAFlynn: then knife cookbook upload both branches as needed
[2012-08-21 01:50:46 -0400] AdamAFlynn: that about right?
[2012-08-21 01:51:22 -0400] siezer: set version numbers in cookbook metadata.rb, then tie a cookbook and version in an environment definition
[2012-08-21 01:51:36 -0400] siezer: http://wiki.opscode.com/display/chef/Environments
[2012-08-21 01:51:39 -0400] siezer: brb
[2012-08-21 01:53:04 -0400] AdamAFlynn: would you suggest incrementing version number for every change and updating the environment accordingly... or maintaining 2 versions, say, 0.0.1 for testing and 1.0.0 for production then just keep uploading to either of those 2 versions
[2012-08-21 01:54:10 -0400] AdamAFlynn: (the cookbook I change most often is a mixed bag of things specific to our infrastructure, so a lot of changes are pretty minor)
[2012-08-21 01:56:35 -0400] AdamAFlynn: Ah, just reading through http://wiki.opscode.com/display/chef/Version+Constraints... looks like that has what I'm after
[2012-08-21 01:56:47 -0400] AdamAFlynn: Thanks siezer, appreciate your help
[2012-08-21 02:21:21 -0400] dwhsix: dunno if anyone's around, but I need to bring up a node with same role, etc as existing one but override a few attributes for that node...
[2012-08-21 02:21:26 -0400] dwhsix: unclear best way to do this
[2012-08-21 02:36:16 -0400] dbalatero: dwhsix: in the past i've just updated attributes with "knife node edit <node name>"
[2012-08-21 02:36:30 -0400] dbalatero: however, i'm not sure how to pre-seed a node with said attributes, before first-boot
[2012-08-21 02:36:38 -0400] dbalatero: so usually i run chef-client once, it fails
[2012-08-21 02:36:41 -0400] dbalatero: i edit the node
[2012-08-21 02:36:45 -0400] dbalatero: and then i re-run chef-client
[2012-08-21 02:36:46 -0400] dbalatero: which i Hate
[2012-08-21 02:36:55 -0400] meisen: Can you use the -j option and provide them in JSON?
[2012-08-21 02:37:02 -0400] dwhsix: dbalatero: thx yeah, I know I can edit it after the fact would really like to be able to do it when the node is created
[2012-08-21 02:37:11 -0400] dwhsix: -j only works for chef-client
[2012-08-21 02:37:15 -0400] dbalatero: meisen: that's probably the one. does -j work with "knife ec2 server create" ?
[2012-08-21 02:37:21 -0400] meisen: duh.  Sorry. :(
[2012-08-21 02:37:53 -0400] meisen: Let me see, I believe this is a problem i was planning to handle but is currently a TODO.
[2012-08-21 02:38:02 -0400] dwhsix: dbalatero: no :-(
[2012-08-21 02:38:23 -0400] dbalatero: dwhsix: yeah i've had this problem today, actually
[2012-08-21 02:38:33 -0400] dbalatero: i have to set zookeeper's myid file per-node
[2012-08-21 02:38:56 -0400] meisen: -j does work, according to the knife ec2 server create help
[2012-08-21 02:39:12 -0400] dbalatero: not according to my -h output, huh!
[2012-08-21 02:39:17 -0400] meisen: What version?
[2012-08-21 02:39:17 -0400] dbalatero: i wonder if i'm behind
[2012-08-21 02:39:20 -0400] dbalatero: yeah , sec
[2012-08-21 02:39:23 -0400] meisen: I just downloaded about 2 wks ago
[2012-08-21 02:39:32 -0400] dbalatero: knife-ec2 (0.5.12, 0.5.6)
[2012-08-21 02:40:07 -0400] meisen: ... is there an easy way to check current versions? (noob)
[2012-08-21 02:40:26 -0400] dbalatero: gem list knife-ec2
[2012-08-21 02:40:31 -0400] dbalatero: that's how i do it
[2012-08-21 02:40:37 -0400] dbalatero: or if you're using bundler somehow you can check the lock file
[2012-08-21 02:40:39 -0400] meisen: 0.5.14
[2012-08-21 02:40:40 -0400] meisen: thx
[2012-08-21 02:40:46 -0400] dbalatero: i'm now on 0.5.14
[2012-08-21 02:40:56 -0400] dbalatero: i still see no -j option when i run "knife ec2 server create -h"
[2012-08-21 02:41:22 -0400] meisen: let me try again, I was looking at a txt file I captured to refer to
[2012-08-21 02:41:47 -0400] dbalatero: np
[2012-08-21 02:42:05 -0400] dbalatero: could it be
[2012-08-21 02:42:06 -0400] dbalatero:     -c, --config CONFIG              The configuration file to use
[2012-08-21 02:42:10 -0400] dbalatero: and then you put something in there?
[2012-08-21 02:42:49 -0400] meisen: dbalatero - somehow we have different 0.5.14's.  -j is in knife ec2 server create -h for me
[2012-08-21 02:42:58 -0400] dbalatero: hmm
[2012-08-21 02:43:01 -0400] dbalatero: i'm going to upgrade chef
[2012-08-21 02:43:25 -0400] meisen: I am on 10.12.0
[2012-08-21 02:43:56 -0400] dbalatero: me too
[2012-08-21 02:44:16 -0400] meisen: Is there anyone here using Chef on windows?  I find teasing references to Chef now installing chef-client as a scheduled service.
[2012-08-21 02:44:26 -0400] dbalatero: meisen: still no -j switch
[2012-08-21 02:44:38 -0400] dbalatero: wtf
[2012-08-21 02:44:50 -0400] dbalatero: do you have a "knife-ec2-j-switch" plugin installed? ;)
[2012-08-21 02:44:50 -0400] meisen: That is bizarre.  I wonder if I am using some other supporting library that this comes from??
[2012-08-21 02:44:55 -0400] meisen: lol
[2012-08-21 02:44:59 -0400] meisen: It is possible. :)
[2012-08-21 02:45:15 -0400] dbalatero: can you gem list and grep for knife|chef
[2012-08-21 02:45:34 -0400] meisen: FWIW, I am running on windows so I have knife-windows-0.5.8 installed too
[2012-08-21 02:46:42 -0400] meisen: looking directly at ...knife-ec2-0.5.14\lib\chef\knife\ec2_server_create.rb, the -j option is definately there
[2012-08-21 02:46:45 -0400] dbalatero: since when do you get more options on windows? ;)
[2012-08-21 02:47:06 -0400] dbalatero: what ruby versioN?
[2012-08-21 02:47:43 -0400] meisen: ... might need an easy command line to check that for ya. <blush>
[2012-08-21 02:47:56 -0400] meisen: hah, ruby -v
[2012-08-21 02:48:14 -0400] meisen: ruby 1.9.2p290 (2011-07-09) [i386-mingw32]
[2012-08-21 02:48:48 -0400] meisen: gem list for "knife" = knife-ec2 (0.5.14)
[2012-08-21 02:48:48 -0400] meisen: knife-windows (0.5.8)
[2012-08-21 02:49:02 -0400] meisen: For chef, just 10.12.0
[2012-08-21 02:49:30 -0400] dbalatero: wtf, ok
[2012-08-21 02:50:02 -0400] dbalatero: i switched to ruby 1.9.3 in rvm, made a new directory with a blank Gemfile -> chef, knife-ec2, and now when i bundle exec knife ec2 server create -h it's all there
[2012-08-21 02:50:14 -0400] dbalatero: but if i'm on my 1.8.7-p330 rvm, and i just run knife w/out bundle exec, no dice
[2012-08-21 02:50:15 -0400] meisen: easy!
[2012-08-21 02:50:20 -0400] dbalatero: "easy"
[2012-08-21 02:50:37 -0400] dbalatero: also no bundle exec works
[2012-08-21 02:50:39 -0400] meisen: Well, on windows it just works.  ;)
[2012-08-21 02:50:39 -0400] dbalatero: so clearly
[2012-08-21 02:50:44 -0400] meisen: windows rules?
[2012-08-21 02:50:51 -0400] dbalatero: i think that's the takeaway here
[2012-08-21 02:51:11 -0400] meisen: First time something has worked better for me in the world of Chef than the linux folks
[2012-08-21 02:51:19 -0400] dbalatero: savor the flavor
[2012-08-21 02:51:24 -0400] meisen: beginners luck!
[2012-08-21 02:51:50 -0400] meisen: Of course, I invested a whole crapload of time trying to get sshd running just so I could bootstrap
[2012-08-21 02:51:54 -0400] meisen: So we'll call it a draw.
[2012-08-21 02:55:09 -0400] dbalatero: heh
[2012-08-21 02:55:44 -0400] meisen: After all that, hopefully -j option will work for ya
[2012-08-21 03:14:36 -0400] meisen: Anyone here installing chef on windows? I see some references that chef-client can be installed as a service (with interval/splay), but it doesn't seem to happen (as far as I can tell) through the MSI.
[2012-08-21 04:02:56 -0400] miah: rm
[2012-08-21 04:04:11 -0400] miah: hrm even
[2012-08-21 04:08:24 -0400] countdigi: hello
[2012-08-21 04:09:16 -0400] miah: hows it going
[2012-08-21 04:18:45 -0400] countdigi: pretty good - just hackin some chef - actually was responding to someone in another window - always do that w/ irssi ;-) but hey anyways! :-)
[2012-08-21 04:33:28 -0400] countdigi: what about require_relative 'libfoo'? wouldnt that do it?
[2012-08-21 04:33:44 -0400] countdigi: man damin srry lol
[2012-08-21 05:20:51 -0400] ranjibd: countdigi, we should write a irssi plugin for knife
[2012-08-21 05:21:24 -0400] countdigi: not bad idea :-)
[2012-08-21 05:32:37 -0400] hoover_damm: knife irssi logs ?
[2012-08-21 05:32:39 -0400] hoover_damm: :)
[2012-08-21 05:32:50 -0400] hoover_damm: wait I should write that :)
[2012-08-21 05:32:56 -0400] hoover_damm: lol
[2012-08-21 05:44:00 -0400] BryanWB_: ohai chefs!
[2012-08-21 05:47:11 -0400] ranjibd: BryanWB_, ohai
[2012-08-21 05:47:20 -0400] countdigi: ohai
[2012-08-21 05:47:34 -0400] BryanWB_: ranjibd: hey buddy!
[2012-08-21 06:22:45 -0400] leehambley: morning all, how does one begin to debug a chef recipe gone bad? My `bundle install` recipe is failing to install libv8, but that works when I'm logged in (insert 400 differences between path, env, permissions, etc) - it appears to be failing to compile libv8, and a libv8.a is missing
[2012-08-21 07:38:05 -0400] BryanWB_: leehamble: pry!
[2012-08-21 07:38:30 -0400] BryanWB_: drop  into your recipe code    `require 'pry'; binding.pry `
[2012-08-21 07:38:34 -0400] leehamble: I'm using knife-solo, which isn't ideal, because it stops me running chef-solo on the server (through magical data-bag hacks)
[2012-08-21 07:38:42 -0400] leehamble: but Pry is a good idea
[2012-08-21 07:38:48 -0400] leehamble: it won't work via knife-solo, though
[2012-08-21 07:38:50 -0400] leehamble: hhrrmm
[2012-08-21 07:38:53 -0400] BryanWB_: leehamble: it does
[2012-08-21 07:38:57 -0400] leehamble: yeah ?
[2012-08-21 07:39:00 -0400] BryanWB_: i use it w/ chef-solo
[2012-08-21 07:39:08 -0400] BryanWB_: i m not familiar w/ knife solo
[2012-08-21 07:39:22 -0400] leehamble: sure, but knife-solo runs on my workstation, rsyncs stuff to the server, then shells out to call chef-solo (and stream the logs back to my workstation)
[2012-08-21 07:39:38 -0400] leehamble: (and when I figure out where it puts everything, I can then use hef-solo)
[2012-08-21 07:39:39 -0400] BryanWB_: leehamble: then log in locally to the server and run chef-solo
[2012-08-21 07:39:45 -0400] BryanWB_: to debug
[2012-08-21 07:40:04 -0400] BryanWB_: leehamble: ur the capistrano guy right? tks for the gr8 work there
[2012-08-21 07:40:24 -0400] leehamble: sure BryanWB_ (bow)
[2012-08-21 07:40:25 -0400] leehamble: :-)
[2012-08-21 07:40:41 -0400] leehamble: (how lame that here I am unable to get Chef to play nice!)
[2012-08-21 07:42:34 -0400] BryanWB_: if u want to debug what is is happening w/ resource run time rather than compilation time, make sure to wrap the pry invocation w/ ruby_block
[2012-08-21 07:44:35 -0400] leehamble: yeah, I will do :-)
[2012-08-21 07:45:08 -0400] leehamble: I've manged to find where knife-solo was dumping all that stuff, for some reason `locate` wasn't showing it, weird
[2012-08-21 07:46:37 -0400] leehamble: the weird thing is the v8 gem refusing to cooperate, or when I skip the v8 gem, and use the system package, therubyracer gem can't find libv8 (in chef, works perfectly without)
[2012-08-21 07:50:35 -0400] jannel: does chef communicate with clients using encryption by default or is proxying over a https connection needed?
[2012-08-21 07:58:37 -0400] BryanWB_: jannel: iirc open-source chef doesn't use ssl by default but u can quickly configure it to use ssl
[2012-08-21 07:59:37 -0400] jannel: BryanWB_: with Apache?
[2012-08-21 08:00:16 -0400] jannel: I didn't get that to work, the API requests started failing with a self signed certificate.. didn't figure out why
[2012-08-21 08:00:17 -0400] BryanWB_: y
[2012-08-21 08:30:11 -0400] gyre007: is there any way guys how I can get a node automatically registered with Chef server after the provisioning ? Sorry for stupid q...i'm a rookie...
[2012-08-21 08:40:40 -0400] veszig: copy the validation key to the server
[2012-08-21 08:41:11 -0400] veszig: http://wiki.opscode.com/display/chef/Nodes#Nodes-Authentication
[2012-08-21 08:55:26 -0400] gyre007: but that would require my manual intervention...
[2012-08-21 08:55:40 -0400] gyre007: Id like to have something done automatically...
[2012-08-21 09:05:43 -0400] cnf: so how do most people run chef-client? daemon or cron?
[2012-08-21 09:10:00 -0400] BryanWB_: cnf:  cron
[2012-08-21 09:12:42 -0400] cnf: ok
[2012-08-21 09:12:44 -0400] gyre007: we run it as daemon
[2012-08-21 09:12:47 -0400] cjblomqvist: after bootstrapping chef on a windows server, I get empty values except for Environment (and node name) if I do 'knife node show NODE' - any pointers to why? I do get 'ERROR: Running exception handlers' but I haven't found any help on that
[2012-08-21 09:13:41 -0400] cnf: BryanWB_: and gyre007 at what interval?
[2012-08-21 09:14:04 -0400] williamherry: how to delete all cookbook?
[2012-08-21 09:14:26 -0400] BryanWB_: i run it every 4 hours
[2012-08-21 09:15:26 -0400] cnf: hmm, that's not a lot
[2012-08-21 09:16:57 -0400] BryanWB_: how the frack does   require File.expand_path('./lib/foobar', __FILE__)   work?
[2012-08-21 09:17:30 -0400] BryanWB_: when __FILE__ is   /tmp/foo.rb     the expanded path is      /tmp/foo.rb/lib/foobar
[2012-08-21 09:17:45 -0400] BryanWB_: yet i c this method invocation in lots of places
[2012-08-21 09:20:38 -0400] cjblomqvist: BryanWB_: http://www.ruby-doc.org/core-1.9.3/File.html#method-c-expand_path
[2012-08-21 09:21:31 -0400] nacer: BryanWB_: hi
[2012-08-21 09:21:37 -0400] nacer: BryanWB_: you use some vmware with chef ?
[2012-08-21 09:21:52 -0400] nacer: BryanWB_: do you use a ohai attriebute to detect if vmware tools are installed ?
[2012-08-21 09:21:56 -0400] gyre007: cnf, every hour
[2012-08-21 09:22:12 -0400] BryanWB_: nacer: i use vmware w/ chef
[2012-08-21 09:22:27 -0400] gyre007: cnf, but we do frequent deployments via chef...so it's better for us to run it more frequently
[2012-08-21 09:22:34 -0400] cnf: uhu
[2012-08-21 09:22:44 -0400] BryanWB_: i think i parse dmidecode for a particular hex value
[2012-08-21 09:22:52 -0400] BryanWB_: it is in my vmware-tools cookbook
[2012-08-21 09:23:08 -0400] nacer: BryanWB_: ok i go check that
[2012-08-21 09:24:42 -0400] nacer: BryanWB_: yeah you check virtualization.system for vmware string
[2012-08-21 09:25:08 -0400] nacer: BryanWB_: but this attribute is here no matter if you have the guest tools or not
[2012-08-21 09:25:16 -0400] BryanWB_: ah shit yeah
[2012-08-21 09:25:28 -0400] BryanWB_: i use that to determine which version to install
[2012-08-21 09:26:23 -0400] BryanWB_: i test if  the  "/usr/lib/vmware-tools"   directory exists
[2012-08-21 09:26:42 -0400] nacer: BryanWB_: it could be cool if ohai know if Guest-tools is installed or not
[2012-08-21 09:27:00 -0400] BryanWB_: it would be
[2012-08-21 09:27:12 -0400] BryanWB_: nacer: um can i ask u a favor?
[2012-08-21 09:27:40 -0400] nacer: BryanWB_: i don't lend money :)
[2012-08-21 09:27:43 -0400] nacer: BryanWB_: ok shoot
[2012-08-21 09:27:56 -0400] BryanWB_: nacer:  r u familiar w/   the cpu steal time in linux?
[2012-08-21 09:28:15 -0400] nacer: BryanWB_: never heard this stuff
[2012-08-21 09:28:28 -0400] BryanWB_: nacer: i want to know if linux accurately reports it when running on vmware
[2012-08-21 09:28:41 -0400] cnf: :q!
[2012-08-21 09:28:44 -0400] BryanWB_: the %  of cpu time stolen from vm by hypervisor
[2012-08-21 09:28:50 -0400] nacer: BryanWB_: you want me to run a test on a vmware linux ?
[2012-08-21 09:29:02 -0400] nacer: BryanWB_: ok
[2012-08-21 09:29:07 -0400] BryanWB_: no, don't worry
[2012-08-21 09:29:19 -0400] nacer: BryanWB_: o don't think the gest linux can see that
[2012-08-21 09:29:33 -0400] cnf: oops
[2012-08-21 09:29:35 -0400] BryanWB_: nacer: it should be able to, that is the purpose of the value
[2012-08-21 09:30:28 -0400] nacer:             0 stolen cpu ticks
[2012-08-21 09:30:36 -0400] nacer: vmstat -s
[2012-08-21 09:31:07 -0400] nacer: BryanWB_: so what was the favor ?
[2012-08-21 09:31:20 -0400] nacer: BryanWB_: you only wanted to know if i know ? :)
[2012-08-21 09:40:37 -0400] BryanWB_: nacer: y
[2012-08-21 10:52:12 -0400] masterkorp:  node[:feedfetcher][:dirs]
[2012-08-21 10:52:26 -0400] masterkorp: Can we treat node vars as symbols ?
[2012-08-21 10:52:30 -0400] masterkorp: if so, why ?
[2012-08-21 10:52:44 -0400] masterkorp: (old code from old employer)
[2012-08-21 10:57:46 -0400] _rc: masterkorp: you can, because the Mash does magic to allow multiple access patterns
[2012-08-21 10:58:06 -0400] _rc: you probably should pick one way though
[2012-08-21 10:58:45 -0400] masterkorp: I see no reason why should i use :symbols
[2012-08-21 10:58:53 -0400] masterkorp: is there any reason ?
[2012-08-21 11:03:00 -0400] situ: Redis cookbook depends on a cookbook named "cloud", Can anyone telll me where can I find it ?
[2012-08-21 11:05:45 -0400] masterkorp: https://github.com/opscode-cookbooks
[2012-08-21 11:05:54 -0400] masterkorp: situ: ^
[2012-08-21 11:06:31 -0400] masterkorp: situ: http://community.opscode.com/search?query=cloud&scope=home
[2012-08-21 11:07:14 -0400] situ: There are a few cookbooks with name cloud, not sure which one to use with redis.
[2012-08-21 12:03:18 -0400] lynxman: hey everyone o/ I'm trying to install an apt package and a config file for it that overwrites the default, if that's done in the incorrect order apt crashes because it waits for an answer to know if it should overwrite the file or not,what would be the optimal way to go around this behaviour?
[2012-08-21 12:27:17 -0400] masterkorp: lynxman: can you show the code ?
[2012-08-21 12:29:21 -0400] lynxman: masterkorp: sure! http://pastebin.com/62t7ipEM
[2012-08-21 12:31:55 -0400] masterkorp: lynxman: you probaly need to use bash block with apt-get -yf install
[2012-08-21 12:32:11 -0400] BryanWB_: u can pass flags to the apt resource
[2012-08-21 12:32:31 -0400] masterkorp: BryanWB_: or that
[2012-08-21 12:33:49 -0400] masterkorp: lynxman: oh yeah options "-y"
[2012-08-21 12:35:05 -0400] lynxman: masterkorp: ooh cool, any example I can look at?
[2012-08-21 12:35:24 -0400] masterkorp: let me rewrite your example
[2012-08-21 12:35:44 -0400] lynxman: masterkorp: many thanks
[2012-08-21 12:36:50 -0400] masterkorp: lynxman: http://pastebin.com/0zbDk1Fn
[2012-08-21 12:37:00 -0400] masterkorp: wait
[2012-08-21 12:37:48 -0400] masterkorp: lynxman: http://pastebin.com/4smPzwJP
[2012-08-21 12:37:51 -0400] masterkorp: this one
[2012-08-21 12:39:10 -0400] lynxman: masterkorp: thanks!
[2012-08-21 12:52:03 -0400] CurrentlyCooking: When I run the Chef Client on Chef Server, Chef Server crashes with "dep_selector solve FAILED:" error
[2012-08-21 12:52:28 -0400] CurrentlyCooking: Can anybody help me resolve
[2012-08-21 13:10:38 -0400] cjblomqvist: How do you download a cookbook straight from a github account?  'knife cookbook download <link to tar straight from git repo>'  ???
[2012-08-21 13:11:55 -0400] siezer: git clone git@github.com:username/cookbookrepo chef_project_root/cookbooks
[2012-08-21 13:12:43 -0400] siezer: er... + /cookbookname
[2012-08-21 13:14:52 -0400] cjblomqvist: siezer: Thanks! Will that make it possible to still handle them (updating, etcetera)
[2012-08-21 13:15:06 -0400] cjblomqvist: like normally downloaded/installed cookbooks
[2012-08-21 13:27:08 -0400] masterkorp: cjblomqvist: i use them as git submodules
[2012-08-21 13:27:31 -0400] benjaminws: woah, test kitchen looks bitchin'
[2012-08-21 13:28:04 -0400] cjblomqvist: How does that work? I'm sorry for being noobish to all of this, but how does the git submodules work and how does it work along with chef?
[2012-08-21 13:29:19 -0400] masterkorp: How do you manage your chef repository ?
[2012-08-21 13:29:25 -0400] masterkorp: in a git repo ?
[2012-08-21 13:29:34 -0400] cjblomqvist: yepp
[2012-08-21 13:30:18 -0400] masterkorp: cjblomqvist: http://git-scm.com/book/en/Git-Tools-Submodules
[2012-08-21 13:30:21 -0400] masterkorp: here
[2012-08-21 13:31:32 -0400] cjblomqvist: will check it out, thanks!
[2012-08-21 13:32:00 -0400] masterkorp: np
[2012-08-21 14:13:00 -0400] cnf: anyone have a good cookbook for nagios on centos?
[2012-08-21 14:17:37 -0400] mhoran: Hello. We have a template which notifies an install task, which notifies some other tasks, and generally works. However, one of those notified tasks should run regardless of whether or not the template was actually installed. But it should only run after the template is installed if it doesn't exist.
[2012-08-21 14:17:54 -0400] mhoran: s/actually installed/changed
[2012-08-21 14:21:10 -0400] mhoran: One option would be to have the template always write to a different temp file, so that the notify always fires. But that doesn't seem too great.
[2012-08-21 14:48:28 -0400] askatz: hey guys ... ive been trying to track down a bug with the nginx recipes
[2012-08-21 14:48:41 -0400] askatz: does anyone have an idea why the download url is not getting generated correctly?
[2012-08-21 14:48:41 -0400] askatz: [2012-08-21T14:45:38+00:00] ERROR: remote_file[http://nginx.org/download/nginx-.tar.gz] (/var/chef/cache/cookbooks/nginx/recipes/source.rb:56:in `from_file') had an error:
[2012-08-21 14:48:52 -0400] askatz: you can see its trying to download without the version
[2012-08-21 14:49:31 -0400] askatz: stock nginx recipe from the community site
[2012-08-21 14:52:46 -0400] spox: askatz: take a look at the nginx cookbook on github
[2012-08-21 14:52:53 -0400] spox: that source recipe should build the url correctly
[2012-08-21 14:55:25 -0400] askatz: spox: is there a fix on master for a known issue, or did you just mean I should look through the code?
[2012-08-21 14:55:39 -0400] askatz: the attribute that builds the url looks the same to me?
[2012-08-21 14:55:49 -0400] spox: askatz: there should be a fix on master for that issue
[2012-08-21 14:55:55 -0400] askatz: awesome
[2012-08-21 14:55:57 -0400] askatz: spox: thanks
[2012-08-21 14:56:07 -0400] spox: askatz: sure
[2012-08-21 15:07:02 -0400] krisk_: is there a decent way to delete a unix group if it's empty upon user deletion?
[2012-08-21 15:19:00 -0400] Urocyon: I have a recipe I would like to add to all nodes that currently have another recipe in their run list.   Is there a good way to combine a search with a node run_list add?
[2012-08-21 15:27:15 -0400] siezer: Urocyon use roles
[2012-08-21 16:05:31 -0400] nacer__: my base role is big : Chef Run complete in 1782.805717386 seconds
[2012-08-21 16:05:42 -0400] nacer__: \o/
[2012-08-21 16:24:27 -0400] Guest59068: https://github.com/opscode/chef/blob/master/chef/lib/chef/search/query.rb
[2012-08-21 16:24:37 -0400] Guest59068: is that the DSL search I'm using
[2012-08-21 16:24:43 -0400] Guest59068: or is there another one somewhere
[2012-08-21 16:29:43 -0400] anentropic: can someone give advice about how to extend an existing provider
[2012-08-21 16:29:54 -0400] anentropic: the docs are very confusing
[2012-08-21 16:30:06 -0400] yfeldblum: Guest59068, yes, that is the class that the recipe DSL method `search` delegates to
[2012-08-21 16:30:37 -0400] anentropic: can I just create mycookbook/providers/myprovider.rb and in there import the one I want to extend?
[2012-08-21 16:30:53 -0400] anentropic: or I have to do something with libraries?
[2012-08-21 16:33:20 -0400] yfeldblum: anentropic, the "providers" directory is for providers that use the Lightweight Provider DSL
[2012-08-21 16:33:31 -0400] Guest59068: yfeldblum looking for get_rest now
[2012-08-21 16:34:01 -0400] yfeldblum: anentropic, but what you want to do is write a normal class, because the DSL doesn't have any facility for inheriting (subclassing) an existing provider class
[2012-08-21 16:34:17 -0400] yfeldblum: anentropic, and you can write any normal class you like in a library file
[2012-08-21 16:34:50 -0400] anentropic: yfeldbum: thanks... so in the library I would include the existing provider?
[2012-08-21 16:35:38 -0400] yfeldblum: Guest59068, https://github.com/opscode/chef/blob/master/chef/lib/chef/rest.rb#L121-135
[2012-08-21 16:36:07 -0400] yfeldblum: anentropic, in the library, you would write a normal class using normal ruby (no DSL), and you would inherit the existing provider (not extend)
[2012-08-21 16:36:36 -0400] anentropic: to use the new provider I have to create a subclassed resource too?
[2012-08-21 16:37:08 -0400] yfeldblum: anentropic, no, you could use the resource's `provider` attribute
[2012-08-21 16:37:30 -0400] yfeldblum: anentropic, some_resource "asdf" do ; provider MyProviderClass ; end
[2012-08-21 16:38:43 -0400] anentropic: yfeldman: great, thanks for your help. they should just ditch the docs and put a link to you. I'll be glad if I never see another 'DSL' in my life...
[2012-08-21 16:39:08 -0400] yfeldblum: anentropic, heh thanks
[2012-08-21 16:40:45 -0400] yfeldblum: anentropic, i'm OK with the DSLs, but you have to know when to use them and when not to use them
[2012-08-21 16:41:42 -0400] yfeldblum: anentropic, and what the limitations are
[2012-08-21 16:43:06 -0400] anentropic: yfeldbum: for me the DSL approach is the cause of all the pain in Chef. it hides all the provenance of the code you're working with and leaves you totally at the mercy of the docs. it's easier to just write code than have to learn a DSL
[2012-08-21 16:44:34 -0400] yfeldblum: anentropic, that's definitely a key limitation
[2012-08-21 16:45:26 -0400] jasond: why is there no el-5.8 version of the omnibus installer?  http://s3.amazonaws.com/opscode-full-stack/
[2012-08-21 16:45:35 -0400] yfeldblum: anentropic, by writing providers using normal classes, you can use as examples all of the providers that ship with chef (https://github.com/opscode/chef/tree/master/chef/lib/chef/provider)
[2012-08-21 16:46:17 -0400] anentropic: thanks, I was trying to extend the django provider from application_python cookbook, which I see now is a LWRP
[2012-08-21 16:55:36 -0400] cheeseplus: hey chefs
[2012-08-21 16:56:15 -0400] cheeseplus: I'm seeing an odd behaviour where a subscribe to a file resource fires on CentOS but not Ubuntu
[2012-08-21 16:56:17 -0400] cheeseplus: https://gist.github.com/3416974
[2012-08-21 16:57:07 -0400] cheeseplus: any insight would be appreciated as it seems like it _should_ work
[2012-08-21 17:12:27 -0400] shillinm: good afternoon (morning?  evening?)
[2012-08-21 17:12:54 -0400] shillinm: I have a strange issue.  I am trying to teach a user the bootstrap process
[2012-08-21 17:13:09 -0400] shillinm: when I try to bootstrap a new node, the first thing that shows up is "centos 5.x" detected
[2012-08-21 17:13:22 -0400] shillinm: when he does it, it says Centos 5.5 detected
[2012-08-21 17:13:22 -0400] shillinm: and it fails
[2012-08-21 17:23:01 -0400] cheeseplus: shillinm: different knife versions?
[2012-08-21 17:23:06 -0400] cheeseplus: or templates installed
[2012-08-21 17:25:34 -0400] shillinm: I figured it out.  we have a custom bootstrapper, and someone made a change to it but didnt copy it everywhere
[2012-08-21 17:25:42 -0400] hoover_damm: :)
[2012-08-21 17:26:58 -0400] cheeseplus: shillinm: nice, that is what I expected - something is always different
[2012-08-21 17:27:11 -0400] cheeseplus: I think I figured out my file resource notification issue: http://tickets.opscode.com/browse/CHEF-3125
[2012-08-21 17:27:24 -0400] bakins: newb question. fresh ec2 instances bootstrapped, but domain isn't set by ohai. ideas?
[2012-08-21 17:27:33 -0400] hoover_damm: last time i updated our bootstrap was to use our own custom omnibus
[2012-08-21 17:27:47 -0400] hoover_damm: :)
[2012-08-21 17:28:11 -0400] juliancdunn: is there any way to stop Chef from removing backslashes in cron commands
[2012-08-21 17:28:17 -0400] juliancdunn: I have this: command "/bin/tar -czf /backups/chef_server_backup.`date +\%F`.tar.gz /var/lib/chef /etc/chef /etc/couchdb"
[2012-08-21 17:28:27 -0400] juliancdunn: but when chef creates the cron, it removes the "\"
[2012-08-21 17:32:09 -0400] jforest: \\?
[2012-08-21 17:33:14 -0400] cheeseplus: jforest: my thoughts exactly
[2012-08-21 17:33:16 -0400] juliancdunn: good call... I discovered it was a rubyism and not a chefism
[2012-08-21 17:46:59 -0400] anentropic: yfeldblum: I need to require the provider class I'm inheriting, does Chef provide a way to get the cookbooks path from in your code?
[2012-08-21 17:48:50 -0400] jhowarth: Where exactly does chef store the cookbooks on the box?
[2012-08-21 17:49:08 -0400] jhowarth: I see some in /var/chef/cache/cookbooks/ but when I run chef-client it doesn't seem to be using those.
[2012-08-21 17:50:26 -0400] anentropic: I thought I could just Chef::Provider::ApplicationPythonDjango but I get NameError: uninitialized constant Chef::Provider::ApplicationPythonDjango
[2012-08-21 17:52:11 -0400] yfeldblum: anentropic, yeah chef has a gigantic bug in that it doesn't load cookbooks in dependency order
[2012-08-21 17:52:19 -0400] yfeldblum: anentropic, you might want to open a ticket with that
[2012-08-21 17:52:38 -0400] anentropic: um...
[2012-08-21 17:53:14 -0400] jordane: jhowarth: chef looks for cookbooks in the cookbook_path variable in /etc/chef/client.rb or /etc/chef/solo.rb, depending on what you're using
[2012-08-21 17:53:23 -0400] yfeldblum: anentropic, but this block here may help you: https://github.com/opscode/chef/blob/10.12.0/chef/lib/chef/run_context.rb#L86-91
[2012-08-21 17:53:37 -0400] yfeldblum: anentropic, don't worry, chef runs recipes in run-list order
[2012-08-21 17:53:55 -0400] yfeldblum: anentropic, and makes sure that if cookbook A depends on cookbook B, then cookbook B will be downloaded
[2012-08-21 17:54:09 -0400] billy__: http://memegenerator.net/instance/25299431
[2012-08-21 17:54:28 -0400] billy__: I figure you chefers will like that.  :)
[2012-08-21 17:55:56 -0400] jhowarth: jordane: thanks
[2012-08-21 17:56:13 -0400] billy__: I'm using it in a presentation I'm giving on the use of Vagrant with VirtualBox and Chef.
[2012-08-21 17:56:16 -0400] billy__: :)
[2012-08-21 17:56:20 -0400] billy__: It's in the questions slide.
[2012-08-21 17:56:24 -0400] anentropic: yfeldblum: so problem is libraries are loaded before lwrp... I'm going to have trouble extending the lwrp...
[2012-08-21 18:02:20 -0400] jasond: where can i get an el-5.8 version of the omnibus installer?  http://s3.amazonaws.com/opscode-full-stack/
[2012-08-21 18:02:33 -0400] jasond: it's not in the amazonaws directory
[2012-08-21 18:05:51 -0400] shillinm: anyone have any words of wisdom beyond google for "You must have ruby-shadow installed for password support!" during chef-client run?
[2012-08-21 18:06:44 -0400] shillinm: I dont know a ton about ruby...I cant figure out what I need to install to get this to work.  This worked on my old chef server but I upgraded to a new chef server (10.12) and now its failing.
[2012-08-21 18:09:13 -0400] jessicab: jasond - the 5.7 version should work for you, have you tried it on 5.8 and gotten an error?
[2012-08-21 18:13:10 -0400] jasond: jessicab: no.  i'll try that though.  i'm adding all of the appropriate point release versions to an RHN channel.  are the Omnibus installer point release builds usually pretty soon after the RHEL point releases?
[2012-08-21 18:13:47 -0400] yfeldblum: anentropic, http://tickets.opscode.com/browse/CHEF-3376
[2012-08-21 18:14:43 -0400] anentropic: yfeldblum: oh cool, I was just writing a worse version of that ticket
[2012-08-21 18:15:08 -0400] anentropic: do you see any workaround possible for me in the meantime?
[2012-08-21 18:17:06 -0400] anentropic: yfeldblum: well, one possibility is fork the opscode cookbook and hack the changes I need
[2012-08-21 18:17:50 -0400] jessicab: jasond - it really depends, normally when a new build of ubuntu/rhel/etc comes out its pretty likely the existing installer for the previous build will work unless its a major version release. if it works we support it immediately, otherwise we sort out the bugs first.. usually seems to happen fairly quickly after a release though
[2012-08-21 18:20:05 -0400] jasond: jessicab: thanks for the info
[2012-08-21 18:25:03 -0400] pwf: has anyone had problems with chef-client memory leaks?
[2012-08-21 18:25:37 -0400] pwf: after running for 5+ days it sucks up all the memory on several machines
[2012-08-21 18:29:34 -0400] jessicab: pwf - there is this memory issue that searches can create - http://tickets.opscode.com/browse/CHEF-1068
[2012-08-21 18:29:56 -0400] pwf: thank you jessicab
[2012-08-21 18:30:00 -0400] pwf: i guess we'll switch to cron
[2012-08-21 18:31:04 -0400] pwf: i'm not sure that's my problem though... chef-client is taking up 1.5GB memory and it's not currently doing anything
[2012-08-21 18:31:45 -0400] aspiers: can anyone point me at *good* API docs for chef?
[2012-08-21 18:31:51 -0400] hoover_damm: hrm the ssh_known_hosts cookbook can take up some good memory
[2012-08-21 18:31:53 -0400] hoover_damm: if you have a lot of nodes
[2012-08-21 18:32:00 -0400] aspiers: in particular attribute reading
[2012-08-21 18:32:10 -0400] aspiers: the gem docs and http://wiki.opscode.com/display/chef/Attributes are missing tons of information
[2012-08-21 18:32:14 -0400] hoover_damm: basically search can consume memory... I always did the cron method myself
[2012-08-21 18:32:29 -0400] pwf: all of that is during the run though, right? it should release it all as soon as it's done and goes back to sleep
[2012-08-21 18:32:45 -0400] hoover_damm: pwf, well if it's consuming that much something is leaking
[2012-08-21 18:33:01 -0400] hoover_damm: pwf, without basically running something like memperf on your chef-client it's really impossible to know why
[2012-08-21 18:33:35 -0400] hoover_damm: https://github.com/tmm1/perftools.rb
[2012-08-21 18:33:38 -0400] hoover_damm: is also very good
[2012-08-21 18:34:04 -0400] jessicab: aspiers: this page has a lot of info on the api - http://wiki.opscode.com/display/chef/Server+API
[2012-08-21 18:34:36 -0400] aspiers: jessicab: ah thanks, but that's the server REST API
[2012-08-21 18:34:43 -0400] jessicab: pwf - when i was testing that bug, i think i remember seeing it getting released very, very slowly.. easy to test though really, just reboot it and run chef-client and see if the problem occurs during the run
[2012-08-21 18:34:46 -0400] aspiers: I meant the recipe / attributes API
[2012-08-21 18:35:12 -0400] aspiers: e.g. how do I read the default attribute foo.bar from a node?
[2012-08-21 18:35:50 -0400] jessicab: aspiers - hm.. im not sure what you mean? you can get attributes on the /node object there, and recipes are in /cookbooks
[2012-08-21 18:37:22 -0400] pwf: http://i.imgur.com/BG6XF.png can you tell when chef-client does a run on this graph? heh
[2012-08-21 18:40:05 -0400] aspiers: jessicab: I specifically want to read some default attributes for a node
[2012-08-21 18:40:15 -0400] aspiers: jessicab: not the result of overlaying all attributes
[2012-08-21 18:40:18 -0400] anentropic: does anyone know a common cause of this error?
[2012-08-21 18:40:18 -0400] anentropic: NotImplementedError: super from singleton method that is defined to multiple classes is not supported; this will be fixed in 1.9.3 or later
[2012-08-21 18:40:21 -0400] anentropic: ?
[2012-08-21 18:40:51 -0400] aspiers: jessicab: it seems something like node.network.current_normal works, but it's hopelessly undocumented
[2012-08-21 18:41:14 -0400] anentropic: the stacktrace is not helpful, none of my own code is mentioned]
[2012-08-21 18:52:49 -0400] behemphi: I just upgraded to 0.10.12 and now I am seeing this:  Ran pip freeze | grep -i PosixTimeZone== returned 1
[2012-08-21 18:52:57 -0400] behemphi: I use the python cookbook 1.0.0
[2012-08-21 18:53:20 -0400] behemphi: I am thinking I need to upgrade to 1.0.8 but would like to get confirmation b/f I do that
[2012-08-21 18:55:56 -0400] PapaSierra: for ubuntu 12 i've added a ppa for php 5.4, but the opscode cookbook for php appears to specify 5.3, does anyone with experience with the php cookbook know what needs to be changed to make it use 5.4 instead of 5.3?
[2012-08-21 18:57:40 -0400] meisen: Anyone online that has - in Windows - either scheduled chef-client or installed as a service (which I understand now to be supported but haven't figured out) ?
[2012-08-21 18:58:02 -0400] yfeldblum: anentropic, you can (and maybe even contribute the fix back to the upstream?)
[2012-08-21 19:00:33 -0400] PapaSierra: simply changing this won't work because the ppa is required, but then what should those settings become when using a ppa? https://github.com/opscode-cookbooks/php/blob/master/attributes/default.rb#L45
[2012-08-21 19:09:58 -0400] PapaSierra: does anyone here use php?
[2012-08-21 19:10:24 -0400] behemphi: or python? :-)
[2012-08-21 19:11:40 -0400] PapaSierra: i'm stuck on something that some with a bit of chef experience would be able to answer. it's so hard to find answers online about this kind of stuff
[2012-08-21 19:12:18 -0400] behemphi: OK, I did confirm that upgrading to the python cookbook does, infact fix the issue.  (apparently it is checking for the pip package before installing).  @jessicab I am going to update the wiki with some version information on this.
[2012-08-21 19:12:55 -0400] behemphi: @PapaSierra I was not poking fun at you, rather at the situation where you ahve a specific PHP question and I have a very similar python question.  Just liked the irony is all
[2012-08-21 19:14:34 -0400] PapaSierra: i know, i get the humour, i'm just frustrated that this channel is so l33t that no one ever breaks the silence. i know it must be annoying getting questions from noobs but i really have tried to phrase my question in a direct way so i don't waste peoples' time, but still no answers, frustrating
[2012-08-21 19:15:02 -0400] PapaSierra: congrats on fixing your issue by the way ;)
[2012-08-21 19:15:40 -0400] behemphi: sorry, I don't use PHP any longer, so I cannot help you.  I do find a great deal of help here as a general rule though.  That said Opscode is on the West Coast and it is lunch time
[2012-08-21 19:15:49 -0400] behemphi: maybe that is all that is going on
[2012-08-21 19:16:27 -0400] PapaSierra: they're all in the kitchen ;)
[2012-08-21 19:16:36 -0400] behemphi: nice!
[2012-08-21 19:16:54 -0400] behemphi: hope their not spoiling the soup!  (couldn't help myself!)
[2012-08-21 19:17:07 -0400] PapaSierra: too many cooks
[2012-08-21 19:18:13 -0400] cwj: PapaSierra: so you have already configured your boxes with the ppa? I dont see anything in https://github.com/opscode-cookbooks/php/blob/master/recipes/package.rb that indicates to me the version attribute is being used when installing php from packages
[2012-08-21 19:19:14 -0400] cwj: so if your ppa has newer versions than are present in your other repos, it seems to me that the ppa packages should be installed
[2012-08-21 19:19:24 -0400] PapaSierra: cwj right, if i don't include the ppa and don't tinker with the php cookbook attributes it basically installs php 5.3. now i've added the ppa (i think i've done it right) before php is installed, but still it just installs 5.3
[2012-08-21 19:19:47 -0400] PapaSierra: if i do it manually (without chef) it works just fine
[2012-08-21 19:20:22 -0400] cwj: and your php.install_method attribute is set to package?
[2012-08-21 19:20:49 -0400] cwj: looks like that is the default
[2012-08-21 19:21:30 -0400] PapaSierra: cwj yes, package (just default). how does this look to you? http://www.hastebin.com/juqotobuti.ruby
[2012-08-21 19:22:47 -0400] cwj: i just dont see the version attribute is being used outside of a source install
[2012-08-21 19:23:00 -0400] cwj: do you see an apt-get update trigger after your ppa is installed?
[2012-08-21 19:23:45 -0400] PapaSierra: i've just destroyed the vm now so i can provision it from scratch again and i'll let you know
[2012-08-21 19:23:51 -0400] cwj: ok
[2012-08-21 19:25:59 -0400] PapaSierra: where is node['lsb']['codename'] set? that ought to have been done elsewhere right?
[2012-08-21 19:26:23 -0400] cwj: ohai handles that
[2012-08-21 19:26:27 -0400] cheeseplus: PapaSierra: ohai
[2012-08-21 19:26:38 -0400] cwj: so it will have been set by the time your recipe runs
[2012-08-21 19:27:15 -0400] PapaSierra: sweet. ok i'm seeing something else: components ["main"] in my paste, i just copied that from the apt cookbook example, perhaps that should be something else?
[2012-08-21 19:28:05 -0400] cwj: that setting is probably ok, "main" is pretty standard
[2012-08-21 19:28:11 -0400] PapaSierra: cwj this is the start of my provisioning: http://www.hastebin.com/raw/yawipuxade
[2012-08-21 19:29:46 -0400] cwj: try setting 'action :add' in your apt_repository resource
[2012-08-21 19:30:15 -0400] jessicab: behemphi: hm.. not sure which comment of mine you were referencing.. i think its been awhile since i touched the python cookbook :P but thanks for updating the wiki heh
[2012-08-21 19:30:39 -0400] behemphi: I was just letting you know I was gonna do it
[2012-08-21 19:30:44 -0400] cwj: not sure what version of the apt cookbook you are using but it looks like in the github version :add is supposed to be the default
[2012-08-21 19:31:58 -0400] PapaSierra: cwj it's proceeding to install 5.3 so i nuked the vm and added action :add
[2012-08-21 19:32:08 -0400] PapaSierra: really? so that probably won't make a difference
[2012-08-21 19:32:42 -0400] cwj: you should figure out what version of the apt cookbook you are using
[2012-08-21 19:32:53 -0400] jessicab: behemphi: ah, you can feel free to just do it.. the wiki actually emails me too with the updates people do, and most of the doc stuff now is done by our new tech writer actually, i havent been doing as much of it lately
[2012-08-21 19:33:16 -0400] behemphi1: well alrighty then!
[2012-08-21 19:35:19 -0400] PapaSierra: cwj i'm using this: https://github.com/opscode-cookbooks/apt but i'm digging around to see if i can identify if my slightly older version is somehow different
[2012-08-21 19:41:22 -0400] PapaSierra: cwj i've look through all the files in the apt cookbook that i have and i'm not seeing what you're seeing when you said "action :add is supposed to be the default"
[2012-08-21 19:42:36 -0400] cwj: PapaSierra: here's the relevant bit https://github.com/opscode-cookbooks/apt/blob/master/resources/repository.rb#L24
[2012-08-21 19:43:13 -0400] PapaSierra: oooh that you so much cwj! look what you did: http://www.hastebin.com/raw/baqusenupu sources are now being added :)
[2012-08-21 19:45:32 -0400] PapaSierra: right, that's a very different version of apt cookbook than from what i'm seeing here. i've got to specify action :add
[2012-08-21 19:49:54 -0400] cwj: cool, glad that helped
[2012-08-21 19:50:48 -0400] meisen: Ohai is described as gathering data about the "operating system"...  would it be an abuse of Ohai to extend it to store information about installed applications (like SQL Server versions and applied service packs)?  Or is there a better/more approved pattern for tracking that type of stuff?
[2012-08-21 19:51:15 -0400] PapaSierra: it makes sense when you dig around *and you know what you're looking for*, thanks cwj, i think i learned something today :)
[2012-08-21 19:52:26 -0400] cwj: meisen: not sure if that qualifies as abuse, seems ok to me. i think ohai has a plugin interface for stuff like that
[2012-08-21 19:52:37 -0400] cwj: PapaSierra: learning is the best :D
[2012-08-21 19:53:13 -0400] meisen: cwj-Thanks for the input!
[2012-08-21 19:55:04 -0400] cwj: sure thing
[2012-08-21 20:02:20 -0400] cwj: i dunno what the package providers are like on windows, but you might want to think about how much functionality you can get out of those without having to write an ohai plugin
[2012-08-21 20:02:27 -0400] cwj: depends on your use case i guess
[2012-08-21 20:02:46 -0400] schuckles: Hi
[2012-08-21 20:02:53 -0400] schuckles: is chef-client single threaded?
[2012-08-21 20:04:40 -0400] cwj: schuckles: afaik it is
[2012-08-21 20:07:50 -0400] ctracey: folks - any interest in an augeas lwrp?  would this be useful or are users working around this other ways?
[2012-08-21 20:09:51 -0400] __chrisf__: Anyone here who could shed some light on why a Chef-Client 10.4 install via ubuntu12.04-gems bootstrap (laradji's) would copy the binaries to /usr/local/bin instead of /usr/bin?
[2012-08-21 20:18:16 -0400] dyer: Anything going on w/ the opscode CDN?
[2012-08-21 20:18:35 -0400] dyer: getting a 404 when when I try this ( http://www.opscode.com/chef/download?v=0.10.8-3&p=el&pv=6&m=x86_64 )
[2012-08-21 20:21:35 -0400] behemphi1: OK, this is about strange:
[2012-08-21 20:21:38 -0400] behemphi1: "server = aolutil"
[2012-08-21 20:21:38 -0400] behemphi1: "server = benandjerrys-util"
[2012-08-21 20:21:39 -0400] behemphi1: "server = "
[2012-08-21 20:21:39 -0400] behemphi1: "server = tdutil"
[2012-08-21 20:21:39 -0400] behemphi1: "server = stjudeutil"
[2012-08-21 20:22:19 -0400] behemphi1: that is during a run, I put a simple p "server = #{server[:hostname]" statement in my recipe.  Note the one that is empty
[2012-08-21 20:22:43 -0400] behemphi1: If I do knife search, knife node list, etc on the command line I cannot "see" it
[2012-08-21 20:22:56 -0400] behemphi1: I am looking in the hosted chef GUI and cannot "see" it either
[2012-08-21 20:23:09 -0400] behemphi1: So, any idea how I could delete it?
[2012-08-21 20:23:23 -0400] behemphi1: knife node delete ""
[2012-08-21 20:23:37 -0400] behemphi1: knife node delete " " both do not work
[2012-08-21 20:25:53 -0400] cheeseplus: behemphi1: could you do a knife search some attribute that is unique to it and then delete?
[2012-08-21 20:26:24 -0400] dyer: Anyone have any idea whats going on w/ the download proxy?
[2012-08-21 20:27:22 -0400] behemphi1: @cheeseplus, I cannot b/c I don't know anything about it.  It turned up when running a recipe that runs though some nodes and does stuff.
[2012-08-21 20:27:37 -0400] cheeseplus: behemphi1: knife node bulk delete REGEX(options)
[2012-08-21 20:28:11 -0400] cheeseplus: I mean you'd only be deleting one but you could have the node with the empty name that way it seems
[2012-08-21 20:28:32 -0400] hoover_damm: meisen, you can collect and display that same data with attributes, or gather it with ohai plugins
[2012-08-21 20:28:38 -0400] hoover_damm: meisen, totally what it is for
[2012-08-21 20:29:04 -0400] hoover_damm: the more you describe, the more you can query
[2012-08-21 20:29:38 -0400] behemphi1: I can try that @cheeseplus, thx
[2012-08-21 20:30:25 -0400] cheeseplus: just be careful ;)
[2012-08-21 20:30:58 -0400] dyer: that URL working for anyone else ?
[2012-08-21 20:31:29 -0400] hoover_damm: ooh I love gateway timeouts
[2012-08-21 20:33:58 -0400] dyer: FML, thats annoying
[2012-08-21 20:34:38 -0400] hoover_damm: that's why I laugh at people for using nginx for load balancing
[2012-08-21 20:34:50 -0400] hoover_damm: your clients get gateway errors instead of being redirected
[2012-08-21 20:35:09 -0400] hoover_damm: sorry server? :) nice pretty error messages
[2012-08-21 20:35:14 -0400] hoover_damm: it counts
[2012-08-21 20:35:15 -0400] thehar: varnish mmm
[2012-08-21 20:35:21 -0400] hoover_damm: sorry :( I love you Opscode :) No hate here.
[2012-08-21 20:37:24 -0400] sntxrr: dyer: your URL does not work for me either, multiple locations
[2012-08-21 20:37:42 -0400] dyer: sntxrr, thanks
[2012-08-21 20:37:47 -0400] dyer: Looks like its on their end
[2012-08-21 20:38:00 -0400] cheeseplus: down for me too
[2012-08-21 20:38:03 -0400] dyer: Just hacked my bootstrap on my CI server to pull the RPM from s3
[2012-08-21 20:42:01 -0400] sntxrr: np dyer
[2012-08-21 20:47:56 -0400] behemphi1: so @cheeseplus, I either cannot construct a regex to match this node's name or it simply is not working and I have not non-destructive way to go looking with the regex, so I am stuck
[2012-08-21 20:48:05 -0400] behemphi1: I suspect I need to file a support tix with Opscode
[2012-08-21 20:48:24 -0400] behemphi1: anyone else with an idea on how to delete a node with no name?
[2012-08-21 20:50:36 -0400] dwhsix: sorry, couldn't resist
[2012-08-21 20:54:59 -0400] stormerider: ok, so im a little confused about something. how do i go about creating an EC2 node inside a VPC with knife? i know "knife ec2 server create -s subnet-blahblah" will do so, but the traffic to the instance doesn't seem to work... it hangs waiting for sshd. im just using the default rules for the VPC. i thought i might have to assign an EIP during the process but that isn't part of the knife-ec2 plugin (and the
[2012-08-21 20:55:01 -0400] stormerider: patch i found seems to be out of date and doesn't work)
[2012-08-21 20:55:33 -0400] cjblomqvist_: According to the users cookbook, windows is not supported, but according to statements from devs from opscode the users resource is supported in windows - are both true? I'm a little lost on how to handle users on windows
[2012-08-21 20:56:51 -0400] meineerde: cjblomqvist_: the builtin user resource and the opscode users cookbook are two different things (though the latter uses the former).
[2012-08-21 20:57:55 -0400] meineerde: cjblomqvist_: essentially, the users cookbook provides some additional helpers to configure users on unix systems. but as windows users are rather different from unix users, these extensions don't map well
[2012-08-21 20:58:14 -0400] cjblomqvist_: Ah, I see
[2012-08-21 20:58:41 -0400] cjblomqvist_: I guessed that was the case, so basically, writing a custom recipe for my tasks would be better at this point
[2012-08-21 21:00:12 -0400] cjblomqvist_: Do you have any idea where I can find info about how to use the user resource for windows? I've tried google but haven't found anything
[2012-08-21 21:01:09 -0400] behemphi1: @dwhsix I had it all typed out and turned back at the last minute.  Thanks for doing it.  I don't feel so old now ;-)
[2012-08-21 21:01:56 -0400] dwhsix: behemphi1: lol I almost didn't post it myself. punchy, quitting time here
[2012-08-21 21:04:41 -0400] Jon: m
[2012-08-21 21:07:02 -0400] meineerde: cjblomqvist_: well, mostly as you do for for unix. you can set attributes as documented here: http://wiki.opscode.com/display/chef/Resources#Resources-User
[2012-08-21 21:07:29 -0400] meineerde: the attrubutes are mapped to the fields on the actual user using this mapping: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/user/windows.rb#L99-104
[2012-08-21 21:09:49 -0400] pit: hey guys
[2012-08-21 21:10:06 -0400] pit: simple shell cmdline question
[2012-08-21 21:10:28 -0400] pit: i'm using this to install chef via omnibus installer:
[2012-08-21 21:10:30 -0400] pit: curl -L http://www.opscode.com/chef/install.sh | sudo bash
[2012-08-21 21:10:50 -0400] pit: how can I pass the chef version here?
[2012-08-21 21:11:49 -0400] pit: if i download the file first it would be `./install.sh -v 10.12.0-1`, but how would I do that with the syntax above?
[2012-08-21 21:12:02 -0400] cjblomqvist_: meineerde: Thanks a lot for all the pointers! Appreciate it!
[2012-08-21 21:12:53 -0400] meineerde: pit: curl -L http://www.opscode.com/chef/install.sh | sudo bash -v 10.12.0-1
[2012-08-21 21:13:49 -0400] pit: meineerde: gives me `bash: 10.12.0-1: No such file or directory`
[2012-08-21 21:16:11 -0400] pit: any ideas?
[2012-08-21 21:16:56 -0400] meineerde: pit: hmmm, if in doubt do curl http://www.opscode.com/chef/install.sh > /tmp/chef-install.sh && chmod a+x /tmp/chef-install && /tmp/chef-install -v 10.12.0
[2012-08-21 21:17:23 -0400] meineerde: (the missing .sh on the files can be added at your convenience)
[2012-08-21 21:20:17 -0400] pit: meineerde: yeah, that would probably work. I was wondering whether it was actually possible to pass the version using the `curl -L http://www.opscode.com/chef/install.sh | sudo bash` idiom. It's like a riddle... (and I'm still not sure whwther there is a solution actually)
[2012-08-21 21:24:12 -0400] meineerde: pit: curl -L http://www.opscode.com/chef/install.sh | sudo bash -s -- -v 10.2.0
[2012-08-21 21:24:18 -0400] meineerde: this should actually work
[2012-08-21 22:03:36 -0400] thedeeno1: how do I deal with name collisions between dependent cookbooks? I'm trying to use 2 cookbooks, each depending on a different 'python' cookbook. Is my only option to fork and manually change the 'depends' line?
[2012-08-21 22:05:09 -0400] miah: stop depeneding on two different python cookbooks
[2012-08-21 22:06:21 -0400] bluepojo: miah: chances are these are community cookbooks.
[2012-08-21 22:07:03 -0400] bluepojo: thedeeno1: you should fork the cookbook, update the depends line and submit a pull request, provided it still works.
[2012-08-21 22:07:26 -0400] bluepojo: if they're slow about accepting the pull request, rename the cookbook and use that one for now till they accept your pull
[2012-08-21 22:08:02 -0400] bluepojo: the reason you rename the cookbook is so you don't get collisions in your chef server when they eventually release a new version of the original cookbook
[2012-08-21 22:08:08 -0400] bluepojo: so like
[2012-08-21 22:08:14 -0400] bluepojo: thedeeno_cookbookname
[2012-08-21 22:11:05 -0400] cjblomqvist_: If I have a role with a default attribute and a recipe which uses this attribute, but I get the recipes default attribute as value instead, what have I done wrong? Is it possible to output INFO: <something> lines back to chef-client from recipes so I can check variables when running my recipe?
[2012-08-21 22:12:08 -0400] behemphi1: @cjblomqvist_ I am not sure about the first part but the second is the log resource
[2012-08-21 22:12:32 -0400] jordane: cjblomqvist_: the first part is to set a normal or override variable in the role, instead of default
[2012-08-21 22:12:33 -0400] behemphi1: http://wiki.opscode.com/display/chef/Resources#Resources-Log
[2012-08-21 22:12:44 -0400] jordane: cjblomqvist_: see http://wiki.opscode.com/display/chef/Cookbook+Attributes
[2012-08-21 22:13:49 -0400] cjblomqvist_: But according to http://wiki.opscode.com/display/chef/Cookbook+Attributes shouldn't default attributes in roles override default attributes in recipes? (applied in an attributes file)
[2012-08-21 22:14:28 -0400] cjblomqvist_: Or am I reading the precedence list completely wrong?
[2012-08-21 22:14:38 -0400] jordane: cjblomqvist_: Ah, if it is from the attributes file, then are you sure you're applying the attribute correctly in the role?
[2012-08-21 22:15:30 -0400] jordane: cjblomqvist_: can you pastebin the role?
[2012-08-21 22:17:40 -0400] cjblomqvist_: Oh shit, I think I might have made a spelling mistake
[2012-08-21 22:17:46 -0400] cjblomqvist_: Let me test
[2012-08-21 22:22:06 -0400] beandip: I am doing a search and returning an array of nodes.  I want to fill an attribute array with the ip addresses of those nodes.  What would the correct syntax be given foo=search(:node, "chef_environment:#{node.chef_environment} AND role:foo")
[2012-08-21 22:22:13 -0400] beandip: ?
[2012-08-21 22:22:14 -0400] cjblomqvist_: Nope, that wasn't the issue I think, anyway, check: http://pastie.org/4564661
[2012-08-21 22:22:53 -0400] beandip: node.set['attribute'] = ?
[2012-08-21 22:23:30 -0400] beandip: I want attribute to contain an array of the ip addresses for the nodes caintained in foo
[2012-08-21 22:23:57 -0400] cjblomqvist_: jordane: http://pastie.org/4564661
[2012-08-21 22:26:53 -0400] jordane: cjblomqvist_: and the recipe is being called from the role, I presume?
[2012-08-21 22:27:03 -0400] cjblomqvist_: Yepp
[2012-08-21 22:28:19 -0400] cjblomqvist_: updated the pastie to better reflect all of the role
[2012-08-21 22:28:53 -0400] jordane: cjblomqvist_: Interesting. I'm not really sure what it could be. My only other suspect is the fact that in one case you use symbols and in another strings.
[2012-08-21 22:29:01 -0400] jordane: cjblomqvist_: try chaging the usage in the recipe to symbols instead of strings.
[2012-08-21 22:30:08 -0400] cjblomqvist_: In my case, what would that result in? :xxx:sovren:Administrator:password ? My ruby syntaxing skills are not really what they should be
[2012-08-21 22:30:33 -0400] jordane: cjblomqvist_: Yep, it would look like node[:xxx][:sovren][:Administrator][:password]
[2012-08-21 22:31:18 -0400] jordane: cjblomqvist_: http://pastie.org/4564693
[2012-08-21 22:32:02 -0400] cjblomqvist_: Cool, thanks, and I assume the same syntax would be the better one in the attributes file as well (for consistency): default[:xxx][:sovren][:Administrator][:password] = "abc"
[2012-08-21 22:33:00 -0400] jordane: cjblomqvist_: yep, that should be changed as well. Symbols vs strings is a little weird, as they can sometimes be the same thing, and sometimes not
[2012-08-21 22:35:33 -0400] cjblomqvist_: Oh, quite embarrasing, but actually the issue was I only uploaded the cookbook/recipe but not the role...
[2012-08-21 22:35:39 -0400] cjblomqvist_: Well, I really appreciate your help anywya!
[2012-08-21 22:37:03 -0400] bluepojo: cjblomqvist_: I've occasionally seen odd interaction when overriding default attributes with default attributes. Try using override attributes instead.
[2012-08-21 22:37:15 -0400] bluepojo: oh
[2012-08-21 22:37:16 -0400] bluepojo: nvm
[2012-08-21 22:37:17 -0400] bluepojo: hah
[2012-08-21 22:38:28 -0400] cjblomqvist_: Shame on me for not thinking of that, as always, the easy simple parts are the ones you miss (like plugging in the electricity cable when your computer doesn't start)
[2012-08-21 22:41:17 -0400] jordane: cjblomqvist_: It happens to everyone
[2012-08-21 22:42:57 -0400] cjblomqvist_: I guess I should have banged my head a few extra times and thought of all aspects of what I was about to do before asking here :) People here are really friendly with replying to questions and issues, kudos to everyone
[2012-08-21 22:43:33 -0400] cjblomqvist_: I guess it makes it easy to ask too fast though :) Better save my questions for when I really need them
[2012-08-21 22:46:25 -0400] jan0232: i have a chef recipe that adds a directory to the PATH by adding a script to /etc/profile.d/  how do i make chef aware of that new PATH during the chef-run?? ...
[2012-08-21 22:47:50 -0400] jan0232: i actually added a directory /opt/ruby/ to the PATH where my ruby and gem binaries etc. arebut gem_package still uses the gem binary in "/opt/chef/embedded/bin" ...
[2012-08-21 22:48:34 -0400] beandip: ?
[2012-08-21 22:49:50 -0400] jan0232: chef omnibus installations should pick the first gem binary in the PATH found
[2012-08-21 23:53:22 -0400] thedeeno: bluepojo: hmm, what about name collisions within the cookbooks. For instance, each of these python cookbooks defines a pip_package resource. Changing the dependency name stops chef from complaining, but the wrong cookbook definition is being used.
[2012-08-21 23:54:44 -0400] bluepojo: What I mean is: lets say you fork the cookbook named some_cookbook and upload it to your server
[2012-08-21 23:54:57 -0400] bluepojo: if you don't rename it, you'll be overwriting the cookbook that's already there
[2012-08-21 23:55:19 -0400] bluepojo: this is a bad practice because you never want to artifacts with the same name and version that have different contents
[2012-08-21 23:55:47 -0400] bluepojo: because cookbooks might unexpectedly break due to oddities you've introduced as a result of a change, however minor.
[2012-08-21 23:55:55 -0400] bluepojo: this is not an example that this is likely to occur
[2012-08-21 23:56:02 -0400] bluepojo: but it's not a practice you want to get into the habit of doing
[2012-08-21 23:56:19 -0400] bluepojo: whenever you make a change to a cookbook, you should always push it back up stream to the original cookbook
[2012-08-21 23:56:34 -0400] bluepojo: and if the original cookbook doesn't accept it, fork the cookbook and rename it to avoid the above situation
[2012-08-21 23:56:57 -0400] bluepojo: you can treat cookbooks like they're independent software projects
[2012-08-21 23:57:15 -0400] bluepojo: you'd never release a gem with the same name and version as an existing gem
[2012-08-21 23:57:25 -0400] bluepojo: cause other software that depend on said gem may break as a result
[2012-08-21 23:57:32 -0400] bluepojo: cookbooks are the same way
[2012-08-21 23:58:09 -0400] bluepojo: further, you can't just increment the version of the cookbook as when the upstream cookbook eventually increments it's version, you're back to the same problem, just delayed a bit.
[2012-08-21 23:58:20 -0400] bluepojo: renaming the cookbook is the only real solution
[2012-08-21 23:58:59 -0400] bluepojo: some day I'd like namespaces to be implemented in cookbooks, but until that feature exists, we're stuck with ghetto "namespacing," that is renaming.
[2012-08-21 23:59:06 -0400] bluepojo: it'd be cool to say:
[2012-08-21 23:59:11 -0400] bluepojo: name "mycookbook"
[2012-08-21 23:59:13 -0400] bluepojo: namespace "bluepojo"
[2012-08-21 23:59:21 -0400] bluepojo: in metadata.rb
[2012-08-21 23:59:38 -0400] bluepojo: and then depends could say "depends 'bluepojo/mycookbook'" or something similar
[2012-08-21 23:59:49 -0400] bluepojo: that would solve this issue as well

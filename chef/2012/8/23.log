[2012-08-23 00:00:25 -0400] Guest94181: exit
[2012-08-23 00:17:08 -0400] ssd7: Ohai Chefs
[2012-08-23 00:26:04 -0400] thedeeno: in lwrp can I set the default of an attribute to be based on the value of another attribute?
[2012-08-23 00:26:10 -0400] thedeeno: in a*
[2012-08-23 01:38:42 -0400] makerbreaker: hi
[2012-08-23 01:39:03 -0400] makerbreaker: is chef a good solution for a webapp, that can deploy postgres databases?
[2012-08-23 01:39:17 -0400] makerbreaker: ie, user pays, -> runs chef recipe to setup a postgres databse
[2012-08-23 01:39:43 -0400] makerbreaker: or is it better to use a job/queue/runner system
[2012-08-23 01:48:38 -0400] bluepojo: makerbreaker: you could use a runner system to kick off chef runs
[2012-08-23 01:48:57 -0400] bluepojo: I work on an internal application that provisions virtual machines via chef
[2012-08-23 01:49:04 -0400] bluepojo: that uses a runner system
[2012-08-23 01:49:09 -0400] makerbreaker: rails?
[2012-08-23 01:49:12 -0400] bluepojo: sinatra
[2012-08-23 01:49:15 -0400] bluepojo: but close enough
[2012-08-23 01:49:17 -0400] makerbreaker: ya
[2012-08-23 01:49:27 -0400] makerbreaker: so its nothing too crazy
[2012-08-23 01:49:43 -0400] makerbreaker: basically, its going to be a cloud postgres providor
[2012-08-23 01:49:54 -0400] bluepojo: yeah, our tool is built on euca
[2012-08-23 01:50:05 -0400] bluepojo: totally possible
[2012-08-23 01:51:07 -0400] hoover_damm: hrm, walking cpu flags..
[2012-08-23 01:51:09 -0400] makerbreaker: euca = eucalyptus?
[2012-08-23 01:51:12 -0400] hoover_damm: what's the easy way?
[2012-08-23 01:51:38 -0400] erikh: cpu flags?
[2012-08-23 01:51:53 -0400] hoover_damm: erikh, yer
[2012-08-23 01:52:08 -0400] hoover_damm: erikh, basically want to load the aesni module if the aes flag is present
[2012-08-23 01:52:19 -0400] erikh: oh, I see.
[2012-08-23 01:52:28 -0400] hoover_damm: erikh, but node['cpu']['0'].flags is an array
[2012-08-23 01:52:35 -0400] hoover_damm: btw, node['cpu']['0']
[2012-08-23 01:52:35 -0400] hoover_damm: sucks
[2012-08-23 01:52:59 -0400] erikh: err, Enumerable#include?
[2012-08-23 01:53:09 -0400] hoover_damm: erikh, tried
[2012-08-23 01:53:17 -0400] erikh: ok... what's the hangup?
[2012-08-23 01:53:29 -0400] hoover_damm: was giving false earlier
[2012-08-23 01:53:30 -0400] hoover_damm: when it was true
[2012-08-23 01:53:34 -0400] hoover_damm: couldn't figure out why
[2012-08-23 01:53:50 -0400] erikh: hrm. what's the inspect value of the array?
[2012-08-23 01:53:55 -0400] erikh: and the class name
[2012-08-23 01:54:05 -0400] hoover_damm: chef > node['cpu']['0'].flags.class           => Array
[2012-08-23 01:54:15 -0400] erikh: ok. and the innards?
[2012-08-23 01:54:28 -0400] hoover_damm: Chef::Node::Attribute
[2012-08-23 01:54:31 -0400] erikh: aha
[2012-08-23 01:54:37 -0400] erikh: I wonder if it defines eql properly
[2012-08-23 01:54:42 -0400] erikh: er, eql?
[2012-08-23 01:54:46 -0400] hoover_damm: fwiw this is 0.10.8
[2012-08-23 01:54:54 -0400] hoover_damm: not sure why we never updated
[2012-08-23 01:54:54 -0400] erikh: ok, that shouldn't be an issue
[2012-08-23 01:54:59 -0400] hoover_damm: yeah
[2012-08-23 01:55:14 -0400] erikh: sec.
[2012-08-23 01:55:59 -0400] erikh: wow, didn't even have chef installed
[2012-08-23 01:56:05 -0400] erikh: guess that shows you how much I use this machien
[2012-08-23 01:56:16 -0400] hoover_damm: :) lol
[2012-08-23 01:56:30 -0400] hoover_damm: i'll end up doing flags.each and then just inspecting the block
[2012-08-23 01:56:41 -0400] erikh: there might be a less cumbersome way
[2012-08-23 01:56:50 -0400] hoover_damm: feels kinda gay but .include? should work
[2012-08-23 01:56:50 -0400] erikh: just waiting on dox
[2012-08-23 01:56:51 -0400] hoover_damm: so should eql
[2012-08-23 01:57:23 -0400] hoover_damm: and i've been having to pull out weird hacks lately
[2012-08-23 01:57:33 -0400] hoover_damm: so not trying to put in more easy to break stuff
[2012-08-23 01:57:42 -0400] hoover_damm: we're migrating off of ec2 and if node.ec2
[2012-08-23 01:57:47 -0400] hoover_damm: doesn't work too well ;)
[2012-08-23 01:57:53 -0400] hoover_damm: cleaning up old crust
[2012-08-23 01:58:13 -0400] erikh: oh.... hrm
[2012-08-23 01:58:22 -0400] erikh: so Chef::Node::Attribute is actually a data structure
[2012-08-23 01:58:45 -0400] hoover_damm: yep
[2012-08-23 01:58:49 -0400] erikh: makes enough sense
[2012-08-23 01:59:13 -0400] erikh: so you have an array of attributes which are hash-like
[2012-08-23 01:59:23 -0400] erikh: do you know what the internal structure looks like?
[2012-08-23 02:01:17 -0400] hoover_damm: in ruby? yeah
[2012-08-23 02:01:18 -0400] erikh: hoover_damm: anyhow, my gut tells me you aren't at the point of the data structure where include? is really relevant
[2012-08-23 02:01:28 -0400] hoover_damm: me either
[2012-08-23 02:01:31 -0400] erikh: so, use p
[2012-08-23 02:01:38 -0400] erikh: I wrote a blog about it!
[2012-08-23 02:01:46 -0400] erikh: http://erik.hollensbe.org/blog/2012/06/17/the-best-ruby-debugger-kernel-dot-p/
[2012-08-23 02:02:41 -0400] erikh: hoover_damm: gotta bail, sorry. best of luck.
[2012-08-23 02:03:06 -0400] hoover_damm: erikh, neat
[2012-08-23 02:42:42 -0400] williamherry: do 'only_if' and 'not_if' support 'or' or 'and'?
[2012-08-23 02:43:28 -0400] williamherry: for instance, only_if { platform?(%w{ ubuntu} ) and ... }
[2012-08-23 03:10:37 -0400] yfeldblum: williamherry, of course they do, but you should typically prefer to use `&&` and `||` instead of `and` and `or`, since they have subtle differences and the symbolic operators have the behavior most people would expect
[2012-08-23 03:11:02 -0400] williamherry: yfeldblum, thanks
[2012-08-23 04:06:07 -0400] dougireton: Has anyone integrated Foodcritic with Vim? Perhaps running Foodcritic on bufwrite?
[2012-08-23 04:06:24 -0400] dougireton: or are people using Watcher instead?
[2012-08-23 04:06:55 -0400] dougireton: sorry, Watchr
[2012-08-23 06:39:44 -0400] William_: not_if "sudo -u glance glance-manage db_version" and only_if { platform?(%w{centos})} how to write within one line?
[2012-08-23 06:41:00 -0400] jatan: wrap it inside the if statement?
[2012-08-23 06:41:14 -0400] jatan: you've the whole ruby available.. no need to worry about oneliners
[2012-08-23 06:42:32 -0400] erikh: William_: no need for the 'and', that should work with each of those stanzas on separate lines
[2012-08-23 06:43:45 -0400] William_: how about not_if "sudo -u ...." || { platform?(%w{centos}) }
[2012-08-23 06:47:18 -0400] William_: not_if "sudo -u glance glance-manage db_version" || { platform?(%w{centos}) } not work
[2012-08-23 06:47:34 -0400] William_: cookbooks/glance/recipes/registry.rb:104: odd number list for Hash
[2012-08-23 06:54:41 -0400] zts: William_: why do you need to put both conditions on one line?
[2012-08-23 06:55:24 -0400] William_: zts, it's more like program
[2012-08-23 06:55:41 -0400] erikh: William_: that's not going to work
[2012-08-23 06:55:53 -0400] erikh: perhaps you need a little more ruby under your belt.
[2012-08-23 06:56:10 -0400] William_: I remove { and } and it now seems work
[2012-08-23 06:56:19 -0400] erikh: it's... not actually working.
[2012-08-23 06:56:22 -0400] erikh: take my word for it.
[2012-08-23 06:56:34 -0400] erikh: use the two lines like I suggested and you'll be fine.
[2012-08-23 06:58:21 -0400] William_: OK, thanks, I should learn more ruby
[2012-08-23 06:59:45 -0400] madmike: I'm getting this strange error for the application_ruby unicorn resource: "NameError: undefined local variable or method `node'"  =/
[2012-08-23 07:00:04 -0400] madmike: line: "attribute :worker_processes, :kind_of => Integer, :default => [node['cpu']['total'].to_i * 4, 8].min "
[2012-08-23 07:12:48 -0400] BryanWB_: ohai chefs!
[2012-08-23 07:35:11 -0400] erikh: hey bryan
[2012-08-23 07:35:18 -0400] erikh: that's actually how I spell my middle name too
[2012-08-23 08:14:55 -0400] gyre007: does anyone know how to list all nodes associated with particular environment using knife ??
[2012-08-23 08:15:36 -0400] senilegenius: gyre007: knife search node "chef_environment:env_name"
[2012-08-23 08:15:48 -0400] senilegenius: gyre007: is that what you're looking for?
[2012-08-23 08:16:01 -0400] gyre007: senilegenius, might be...let me see
[2012-08-23 08:16:28 -0400] gyre007: YUP!!!!
[2012-08-23 08:16:34 -0400] gyre007: senilegenius, AWESOME!
[2012-08-23 08:16:36 -0400] senilegenius: gyre007: cool :)
[2012-08-23 08:16:36 -0400] gyre007: cheers
[2012-08-23 08:16:50 -0400] flaccid_: +1
[2012-08-23 08:26:35 -0400] BryanWB_: erikh: willson?
[2012-08-23 09:36:41 -0400] fish_: is couchdb 1.2.0 supported by chef?
[2012-08-23 09:39:41 -0400] flaccid_: fish_: check the cookbook(s)
[2012-08-23 09:40:53 -0400] fish_: flaccid_: I mean for backing chef
[2012-08-23 09:41:03 -0400] flaccid_: backing chef?
[2012-08-23 09:41:10 -0400] flaccid_: oh server
[2012-08-23 09:41:19 -0400] fish_: as the database the chef server is running on :)
[2012-08-23 09:41:31 -0400] flaccid_: not sure, see on the wiki i guess, i use hosted
[2012-08-23 09:48:41 -0400] PatrickWalker: Hey guys, Just looking for a bit of insight into how people would normally support tiered product versions within an environment. I guess as an example it could be installing multiple versions of Visual Studio, IE or .NET Framework? Would you use a different cookbook name for each installable tier? Or attempt to manage it via recipe names?
[2012-08-23 09:53:26 -0400] hellsings: hi
[2012-08-23 09:55:09 -0400] PatrickWalker: hello
[2012-08-23 09:56:14 -0400] hellsings: i would like to know if someone have been able to run chef-server from gem on debian squeeze
[2012-08-23 09:58:39 -0400] hellsings: i don't have any error, the server try to generate validation.pem and webui.pem and get stuck
[2012-08-23 09:59:50 -0400] fish_: flaccid_: the only reference I find is in the wiki http://wiki.opscode.com/display/chef/Installing+Chef+Server
[2012-08-23 09:59:57 -0400] fish_: where it says: CouchDB (0.9.1-0.10+)
[2012-08-23 10:00:07 -0400] fish_: which is imo quite confusing ;)
[2012-08-23 10:01:59 -0400] cnf: hmm, how do i get the key of an array in ruby?
[2012-08-23 10:19:22 -0400] flaccid_: fish_: five it a try
[2012-08-23 10:19:34 -0400] flaccid_: *give
[2012-08-23 10:20:40 -0400] fish_: flaccid_: I really hope it works
[2012-08-23 10:21:02 -0400] fish_: because upgrading is not that easy ;)
[2012-08-23 10:21:14 -0400] _JamieD_: hi all
[2012-08-23 10:27:12 -0400] PatrickWalker: cnf - key of an array? Arrays in ruby dont have keys I believe just a collection of values. A hash or mash would have keys though and can be accessed by object.each_key do |key| to cycle through each key item in the hash
[2012-08-23 10:27:47 -0400] cnf: hmm
[2012-08-23 10:29:21 -0400] PatrickWalker: maybe im misunderstanding though, not a ruby expert or anything. My understanding is a ruby array is simply ['A','B','C'] where a,b,c are seen as values. A nested array is still seen as a value. A hash follows like Hash["key" => "Value"] something like that. Does that make any sense?
[2012-08-23 10:31:01 -0400] cnf: yes, i should have said hash
[2012-08-23 10:31:14 -0400] cnf: but i did a different thing to get where i wanted to be
[2012-08-23 10:32:31 -0400] PatrickWalker: cool. I have normally been cycling through each key in the mash or hash when dealing with the node attribute in chef etc especially in the case of nested hashes.
[2012-08-23 10:35:12 -0400] PatrickWalker: hellsings - I think I managed to get chef-server installed on debian but it was a virtuabox
[2012-08-23 10:36:17 -0400] PatrickWalker: I think I just followed this http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages but I'm checking my notes now
[2012-08-23 10:39:47 -0400] cnf: hmm, i wonder how i can remove dynamically created files in a dir...
[2012-08-23 10:40:04 -0400] BryanWB_: a glob
[2012-08-23 10:40:27 -0400] cnf: BryanWB_: ?
[2012-08-23 10:40:29 -0400] BryanWB_: FileUtils.rm_r  Dir['d-*']
[2012-08-23 10:40:41 -0400] BryanWB_: FileUtils.rm_rf  Dir['d-*']
[2012-08-23 10:41:22 -0400] cnf: BryanWB_: and recreate every single file on every run?
[2012-08-23 10:41:46 -0400] BryanWB_: cnf: check if they exist first
[2012-08-23 10:41:48 -0400] cnf: hmm, i don't think i put that question forth clear enough
[2012-08-23 10:42:47 -0400] cnf: i'm writing a nagios cookbook, and i want all nodes in chef to be monitored. I also want them to disapear from nagios as soon as they are gone from chef
[2012-08-23 10:52:37 -0400] BryanWB_: ok, create an array of node names from the file_names in ur nagios config
[2012-08-23 10:52:47 -0400] BryanWB_: make it a set
[2012-08-23 10:53:11 -0400] BryanWB_: find the difference b/w it and a set (object) of the nodes node to chef
[2012-08-23 10:53:31 -0400] BryanWB_: remove the files that match the difference
[2012-08-23 10:55:04 -0400] _JamieD_: If I have a database role setup and in my nodes run list I have the database role where would be the best place to store the information to setup a database with a username and password?
[2012-08-23 10:56:22 -0400] drrk: can anyone shed light - i'm getting this error:
[2012-08-23 10:56:23 -0400] drrk: $ knife role from file cleo.json
[2012-08-23 10:56:24 -0400] drrk: ERROR: Server returned error for http://172.16.6.18:4000//roles/cleo, retrying 1/5 in 3s
[2012-08-23 10:56:32 -0400] drrk: but the role is created fine
[2012-08-23 10:56:37 -0400] _JamieD_: that didn't make much sense, let me re phrase...
[2012-08-23 10:59:06 -0400] _JamieD_: I have a node that includes a database role in it's run list, the database role then sets up a mysql database. I also have a cookbook thats specific to the application being deployed. Where would be the best place to store the database, username, password information if using the "database" cookbook to create a database for me?
[2012-08-23 11:01:10 -0400] BryanWB_: _JamieD_: databags
[2012-08-23 11:01:20 -0400] BryanWB_: i prefer the name saddlebags tho
[2012-08-23 11:04:43 -0400] _JamieD_: BryanWB_: I thought it would be the place. just have to work out how to use them. But more importantly what have data bags got to do with cooking?
[2012-08-23 11:05:03 -0400] BryanWB_: ha, nothing afaict
[2012-08-23 11:09:19 -0400] cnf: BryanWB_: is there an easy way to remove all entries from one set form another?
[2012-08-23 11:10:38 -0400] drrk: is chef likely to get confused if it is behind a NAT?
[2012-08-23 11:11:30 -0400] drrk: such that the ip that knife connects to is not the same as the IP chef listens on
[2012-08-23 11:12:05 -0400] BryanWB_: set1.difference(set2).each {|node_name| FileUtils.rm_f "#{nagios_path}/#{node_name}" }
[2012-08-23 11:12:08 -0400] BryanWB_: just an idea
[2012-08-23 11:23:07 -0400] tknerr: ohai!
[2012-08-23 11:24:40 -0400] BryanWB_: ohai tknerr !
[2012-08-23 11:26:55 -0400] _JamieD_: am I missing something, I can't see any knife command for running chef-client. Do I have to login to the server to run chef?
[2012-08-23 11:28:21 -0400] _JamieD_: ah, can I just run bootstrap several times?
[2012-08-23 11:34:06 -0400] bagheera_: hi, is there a chef recipe that lets me assert that a local git repo is up to date or pulls otherwise? or shd I simply exec?
[2012-08-23 11:34:18 -0400] PatrickWalker: knife doesn't allow you to run chef-client unless you did it using knife winrm which I think would work http://wiki.opscode.com/display/chef/Knife+Windows+Bootstrap
[2012-08-23 11:36:16 -0400] _JamieD_: I keep getting "Node applocation01 has an empty run list" when running knife bootstrap
[2012-08-23 11:36:53 -0400] _JamieD_: humm, the run list is being wiped when I run bootstrap
[2012-08-23 11:38:03 -0400] cnf: hmm
[2012-08-23 11:38:14 -0400] _JamieD_: knife node show applocation01 = empty runlist
[2012-08-23 11:38:31 -0400] _JamieD_: knife node edit applocation01, add to run list
[2012-08-23 11:38:45 -0400] _JamieD_: knife node show applocation01 = correct run list
[2012-08-23 11:38:57 -0400] _JamieD_: knife bootstrap xxx
[2012-08-23 11:39:04 -0400] _JamieD_: knife node show applocation01 = empty run list
[2012-08-23 11:39:07 -0400] tknerr: is anybody already using test-kitchen?
[2012-08-23 11:39:26 -0400] PatrickWalker: think bootstrap will delete the client and node information from server and then recreate? Can anyone confirm that? The only way you could do that would be by having the node information saved as a json file and using the -j flag shown here http://wiki.opscode.com/display/chef/Knife+Bootstrap
[2012-08-23 11:40:05 -0400] PatrickWalker: but if you just want to invoke the client I dont think bootstrapping is really what you want then
[2012-08-23 11:40:11 -0400] tknerr: I'm currently using it on a Windows machine and there are some quirks which I don't know whether they are Windows-specific or just general quirks
[2012-08-23 11:40:44 -0400] _JamieD_: PatrickWalker: do I need to login to the server an run chef-client then?
[2012-08-23 11:41:15 -0400] PatrickWalker: yeah or find a command dispatcher that could do it for you over ssh etc
[2012-08-23 11:41:25 -0400] PatrickWalker: at least thats my knowledge of it
[2012-08-23 11:41:49 -0400] PatrickWalker: chef seems to be a pull model rather than push. Its up to the client to pull its latest config rather than the server pushing the config out
[2012-08-23 11:42:16 -0400] PatrickWalker: someone will correct me on that if im wrong im sure
[2012-08-23 11:42:41 -0400] _JamieD_: so if I edit config and push it up to opscode the server should pull it down and run automatically?
[2012-08-23 11:43:07 -0400] _JamieD_: running chef-client on the server worked
[2012-08-23 11:58:10 -0400] hellsings: hi
[2012-08-23 12:17:22 -0400] tknerr: BryanWB_: ohai btw :-)
[2012-08-23 12:17:54 -0400] tknerr: BryanWB_: are you actually using test-kitchen already?
[2012-08-23 12:20:12 -0400] BryanWB_: no
[2012-08-23 12:20:27 -0400] BryanWB_: tknerr: am pretty happy w/ my berkshelf workflow
[2012-08-23 12:20:52 -0400] BryanWB_: tknerr: and berks conflicts w/ using test-kitchen afaict
[2012-08-23 12:21:05 -0400] BryanWB_: but i bet jamie winsor will fix that up quickly
[2012-08-23 12:21:16 -0400] tknerr: BryanWB_: yeah, Berkshelf is not supported by test-kitchen yet
[2012-08-23 12:21:43 -0400] tknerr: BryanWB_: http://tickets.opscode.com/browse/KITCHEN-9
[2012-08-23 12:21:46 -0400] BryanWB_: but i bet it will be there shortly, the riot games devs move fast
[2012-08-23 12:22:25 -0400] tknerr: BryanWB_: Berkshelf is on my list as well, but I have to wait for the 0.4.0 release to get it working on a windoze client
[2012-08-23 12:23:20 -0400] tknerr: BryanWB_: 0.4.0.rc4 is the most recent one, but haven't tried it yet...
[2012-08-23 12:26:26 -0400] BryanWB_: tknerr: it saves me a lot of time, i quite enjoy it
[2012-08-23 12:26:40 -0400] BryanWB_: and the berkshelf team are super-responsive
[2012-08-23 12:27:51 -0400] tknerr: that's good to know. Librarian works well for me so far, the only annoyance is that :path references are always copied and need to be `librarian-chef install`ed
[2012-08-23 12:28:22 -0400] tknerr: I guess berkshelf just references the :path entries, right?
[2012-08-23 12:29:27 -0400] tknerr: and Berkshelf has some nice other features like reading dependencies from metadata.rb etc..
[2012-08-23 12:29:30 -0400] BryanWB_: tknerr: y
[2012-08-23 12:29:45 -0400] BryanWB_: tknerr: also it has a bunch of nice cookbook mgtmt features
[2012-08-23 12:30:32 -0400] tknerr: oh, which are they? aren't aware of them
[2012-08-23 12:31:54 -0400] BryanWB_: tknerr: berks cookbook foobar --vagrant --git --foodcritic -L apachev2
[2012-08-23 12:35:01 -0400] auduny: Hi guys. I have a reoccuring issue where chef/ohai seem to be missing it's fqdn.
[2012-08-23 12:35:06 -0400] auduny: Anything that is known?
[2012-08-23 12:35:56 -0400] auduny: In my apache template i have
[2012-08-23 12:35:57 -0400] auduny: Header always append X-VG-WebServer <%= node[:hostname] %>
[2012-08-23 12:36:24 -0400] auduny: On some runs with chef-client running as a demon this produces  a emptey hostname
[2012-08-23 12:36:31 -0400] tknerr: BryanWB_: nice! good to know
[2012-08-23 12:37:16 -0400] auduny: If I run chef-client manualy, it's ok. But once chef runs from the deamon again it's gone. Restarting chef-client fixes the problem.
[2012-08-23 12:37:28 -0400] BryanWB_: tknerr: the riot games keep buidling their workflow into berkshelf
[2012-08-23 12:37:34 -0400] auduny: But it keeps popping up here and there among the 140 machines.
[2012-08-23 12:37:45 -0400] BryanWB_: so if u like their workflow, it's gr8 and always getting better,
[2012-08-23 12:37:54 -0400] BryanWB_: if u don't, well not a good tool for u then
[2012-08-23 12:38:48 -0400] auduny: http://tickets.opscode.com/browse/OHAI-353 maybe this is relevant
[2012-08-23 12:42:23 -0400] tknerr: ok, thanks BryanWB_!
[2012-08-23 12:50:02 -0400] dpetzel: Funniest page on the opscode wiki today: http://wiki.opscode.com/display/chef/Search+Tips+For+Dentist+Tampa
[2012-08-23 12:51:16 -0400] BryanWB_: dpetzel: just what I was looking for!
[2012-08-23 12:51:28 -0400] dpetzel: BryanWB_, I thought it might be! :)
[2012-08-23 12:53:07 -0400] geekbri: oh yes wonderful wik spam
[2012-08-23 12:53:34 -0400] dpetzel: My favorite part is it actually mae its way to the bottom of the nav list on the left :)
[2012-08-23 12:57:53 -0400] jwitrick: Im trying to use knife-rackspace to spin up cloud servers. and I keep getting this error message: ERROR: Fog::Compute::Rackspace::NotFound: Fog::Compute::Rackspace::NotFound
[2012-08-23 12:57:57 -0400] jwitrick: any ideas?
[2012-08-23 12:58:22 -0400] jwitrick: version of fog is: 1.5.0, version of knife-rackspace is: 0.5.14
[2012-08-23 13:06:25 -0400] bradgignac: jwitrick: let me take a look
[2012-08-23 13:06:40 -0400] PatrickWalker: so does anyone have any experience with tiering products and how they balanced that versus cookbook constraints?
[2012-08-23 13:08:51 -0400] jwitrick: bradgignac: thanks.
[2012-08-23 13:09:09 -0400] bradgignac: jwitrick: any reason you're on 1.5.0? the gem locks it to 1.3.
[2012-08-23 13:15:39 -0400] jwitrick: honestly because i just did a gem install and that was what was installed.
[2012-08-23 13:15:43 -0400] jwitrick: let me downgrade.
[2012-08-23 13:17:28 -0400] cdracars: bring to do a not if a file is newer than another how would I do that
[2012-08-23 13:20:31 -0400] jwitrick: bradgignac: that was it. thanks
[2012-08-23 13:21:07 -0400] bradgignac: jwitrick: i'll take a look at knife-rackspace. we're about to add support for next-gen cloud servers and that requires 1.5
[2012-08-23 13:21:13 -0400] bradgignac: so i'll need to fix it anyway
[2012-08-23 13:21:17 -0400] jwitrick: although looking at the gemspec. it looks like it can be '>' then 1.3
[2012-08-23 13:21:24 -0400] bradgignac: oh
[2012-08-23 13:21:26 -0400] bradgignac: interesting
[2012-08-23 13:21:45 -0400] jwitrick: thats why it was installing and working (except for the create part)
[2012-08-23 13:22:15 -0400] bradgignac: jwitrick: also, you work for Rackspace?
[2012-08-23 13:22:21 -0400] jwitrick: yes.
[2012-08-23 13:22:51 -0400] bradgignac: i might run by your desk if i can't reproduce the problem
[2012-08-23 13:23:05 -0400] jwitrick: :)
[2012-08-23 13:48:32 -0400] thedeeno: Is it possible for the default value of an lwr's attribute to be a combination of other attributes? In other words, :default => "#{new_resource.other_attribute}/test"?
[2012-08-23 14:12:57 -0400] drrk:  haev a weird issue, chef-server won't start during the boot process, but seems to start fien if I start it afterwards
[2012-08-23 14:14:28 -0400] drrk: I dot get a bunch of messages when is does start about not being able to find various Resource Modules
[2012-08-23 14:30:59 -0400] PierreO1: Hi all :)
[2012-08-23 14:31:05 -0400] JoshuaMiller: Hey hey
[2012-08-23 14:31:42 -0400] PierreO1: I have an issue with Gentoo that should be corrected, but it seems the bug appeared again.. (or I made a mistake..)
[2012-08-23 14:31:50 -0400] PierreO1: Here is the issue : http://tickets.opscode.com/browse/CHEF-2833
[2012-08-23 14:32:18 -0400] PierreO1: In GitHub too : https://github.com/opscode/chef/commits/master/chef/lib/chef/provider/package/portage.rb
[2012-08-23 14:34:07 -0400] PierreO1: And my log : "package[app-misc/sphinx] (my_recipe::default line 14) had an error: Chef::Exceptions::Package: Multiple emerge results found for app-misc/sphinx: *  app-misc/sphinx *  dev-python/sphinx. Specify a category."
[2012-08-23 14:34:39 -0400] PierreO1: I would like to help to correct the bug...
[2012-08-23 14:36:03 -0400] PierreO1: Does anyone use gentoo here?
[2012-08-23 14:50:30 -0400] drrk: I installed chef server with http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo How should I upgrade it to the latest version?
[2012-08-23 15:00:19 -0400] _JamieD_: anyone have experience with the user cookbook? http://community.opscode.com/cookbooks/user I've added recipe[user::data_bag] to a role and created a users data bag as described but it's not creating the user and I'm getting no errors
[2012-08-23 15:09:49 -0400] bencaron: anyone got the git cookbook running on Windows 2008?
[2012-08-23 15:10:30 -0400] bencaron: cookbook crash with erros : You must override load_current_resource in #<Chef::Provider::Package:0x3f542b8>
[2012-08-23 15:10:51 -0400] bencaron: I'm not sure to understand what the problem is
[2012-08-23 15:11:14 -0400] geekbri: the package provider doesn't have a load_Current_resource method
[2012-08-23 15:11:18 -0400] bencaron: I've added a log trace just before the call to windows_package, and it does not even show up
[2012-08-23 15:11:22 -0400] geekbri: which means the provider has no way to know the current state of the system
[2012-08-23 15:11:38 -0400] bencaron: the windows cookbook is not loaded explicitly
[2012-08-23 15:11:40 -0400] geekbri: All providers require load_current_resource to be implemented.
[2012-08-23 15:11:45 -0400] bencaron: could this be the problem?
[2012-08-23 15:11:53 -0400] gyre007: how do I move a node from one environment to another using knife ?
[2012-08-23 15:11:54 -0400] geekbri: (although with LWRP's you can not implement the method, but you should)
[2012-08-23 15:12:15 -0400] bencaron: gyre007: look at the knife plugin knife flip
[2012-08-23 15:12:32 -0400] bencaron: but as a caller of the git cookbook...
[2012-08-23 15:12:37 -0400] bencaron: _I_ need to this?
[2012-08-23 15:12:41 -0400] geekbri: Well now
[2012-08-23 15:12:42 -0400] geekbri: no
[2012-08-23 15:12:55 -0400] geekbri: However to install git from package, windows needs a package provider
[2012-08-23 15:13:01 -0400] geekbri: and it needs to implement the load_current_resource method
[2012-08-23 15:13:10 -0400] bencaron: I'll try adding include_recipe "windows" explitly for fun
[2012-08-23 15:13:13 -0400] geekbri: I am not much of a windows guy so I've never looked into the windows package management
[2012-08-23 15:13:14 -0400] JoshuaMiller: gyre007, check out the -E option on chef-client -h
[2012-08-23 15:13:15 -0400] bencaron: it's there from other cookbook
[2012-08-23 15:13:22 -0400] geekbri: I can't tell you too much about it honestly :)_
[2012-08-23 15:13:27 -0400] bencaron: I'm so green on windows.. :|
[2012-08-23 15:13:48 -0400] gyre007: JoshuaMiller, I know I can do this manually by editing the json via knife node edit...but will have a look at -E
[2012-08-23 15:13:51 -0400] bencaron: my experience with chef on windows is that it takes 2x more time to go on
[2012-08-23 15:14:17 -0400] bencaron: a lot of cookbook have no idea how to run on windows...
[2012-08-23 15:15:05 -0400] geekbri: bencaron: It looks to me like windows doesn't have a default pakage provider https://github.com/opscode/chef/blob/master/chef/lib/chef/platform.rb#L201-209
[2012-08-23 15:15:43 -0400] benjaminws_: Mornin'
[2012-08-23 15:15:47 -0400] bencaron: but it's not calling the package resource
[2012-08-23 15:15:53 -0400] bencaron: it's using windows_package
[2012-08-23 15:16:01 -0400] geekbri: bencaron: https://github.com/opscode/cookbooks/blob/master/git/recipes/default.rb#L28-29
[2012-08-23 15:16:21 -0400] geekbri: it looks to me like windows falls under the else, which still gets package called.
[2012-08-23 15:16:21 -0400] benjaminws_: Is there a way to determine if a windows service is installed before attempting to stop it? Currently it blows up if the service doesn't exist.
[2012-08-23 15:16:25 -0400] bencaron: thats the hold version
[2012-08-23 15:16:32 -0400] bencaron: v>= 1.0.0 support windows
[2012-08-23 15:16:32 -0400] JoshuaMiller: gyre007, you might try using knife node edit also.  But I don't know from experience...just assuming.
[2012-08-23 15:16:33 -0400] bencaron: https://github.com/opscode-cookbooks/git/blob/master/recipes/default.rb
[2012-08-23 15:17:27 -0400] geekbri: Are you sure you are using that version of the cookbook?
[2012-08-23 15:17:53 -0400] benjaminws_: hrm, loos like it's trying to do that for me. https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/service/windows.rb#L72
[2012-08-23 15:17:58 -0400] bencaron: well, my Cheffile say so...
[2012-08-23 15:18:12 -0400] bencaron: but you make me doubt..
[2012-08-23 15:18:17 -0400] geekbri: What does your Cheffile point to exactly?  Can you show me
[2012-08-23 15:18:35 -0400] geekbri: Because I was looking at HEAD of master in the opscode-cookbook repo, but the one you linked to is from their bigger repository without each cookbook split out
[2012-08-23 15:18:37 -0400] bencaron: cookbook 'git', '>= 1.0.0'
[2012-08-23 15:18:43 -0400] bencaron: with community as a source
[2012-08-23 15:18:59 -0400] geekbri: can you go look at the actual cookbook itself in your cookbooks dir
[2012-08-23 15:19:08 -0400] geekbri: and make sure it actually contains those lines with windows_package?
[2012-08-23 15:19:18 -0400] geekbri: (also can you make sure you remembered to knife cookbook upload git)
[2012-08-23 15:20:11 -0400] bencaron: yep, it does
[2012-08-23 15:20:46 -0400] geekbri: bencaron: does the windows_package provider come from a cookbook?
[2012-08-23 15:21:00 -0400] bencaron: yes, the "windows" cookbook
[2012-08-23 15:21:10 -0400] bencaron: I'm using it for other things
[2012-08-23 15:21:53 -0400] geekbri: bencaron: https://github.com/opscode/cookbooks/blob/master/windows/providers/package.rb#L93-103
[2012-08-23 15:21:57 -0400] geekbri: what version of the windows cookbook are you using?
[2012-08-23 15:22:25 -0400] bencaron: 1.3.2
[2012-08-23 15:22:31 -0400] bencaron: same line in my cheffile
[2012-08-23 15:22:36 -0400] geekbri: Hrm.
[2012-08-23 15:22:44 -0400] bencaron: ie. just calling "windows" from community
[2012-08-23 15:23:06 -0400] geekbri: Is it just a case of the git cookbook not calling include_recipe on the windows cookbook ?
[2012-08-23 15:23:20 -0400] bencaron: I'm using this w/o problem to install Java, Subversion, etc.
[2012-08-23 15:23:25 -0400] geekbri: Very strange.
[2012-08-23 15:23:43 -0400] geekbri: bencaron: can you check to see what node.platform returns?
[2012-08-23 15:23:55 -0400] bencaron: I'm adding the include for fun
[2012-08-23 15:24:04 -0400] bencaron: it's "windows"
[2012-08-23 15:24:22 -0400] geekbri: I mean everything to me says for some reason that block isn't executing
[2012-08-23 15:24:27 -0400] geekbri: and its not using windows_package.
[2012-08-23 15:25:03 -0400] bencaron: node[:platform] should return the same thing as node.platform, right?
[2012-08-23 15:25:29 -0400] geekbri: Yes
[2012-08-23 15:25:35 -0400] geekbri: They access the same thing.
[2012-08-23 15:26:13 -0400] bencaron: ok : node.platform is a method reading the same hash i guess
[2012-08-23 15:26:14 -0400] jan0232: ohai :)
[2012-08-23 15:26:22 -0400] bencaron: I'm adding a log line to print the value
[2012-08-23 15:27:09 -0400] drrk: anyone any idea why couchdb is startign after chef-server tries to start on ubuntu 12.04?
[2012-08-23 15:27:09 -0400] geekbri: bencaron: its just caught by method_missing which does the same thing that []  does :)
[2012-08-23 15:28:09 -0400] geekbri: (more or less)
[2012-08-23 15:28:35 -0400] jan0232: quick question: directory "/oh/my/dir" { owner "user" recursive true }  only /oh/my/dir will have the owner set to "user" i want /oh/ and /oh/my/ to also be owned by "user"  how would i do that? without a directory call for each....
[2012-08-23 15:28:39 -0400] bencaron: is'nt the "compile" phase for chef run done for all cookbooks, THEN it runs?
[2012-08-23 15:28:50 -0400] bencaron: or is the compile done cookbook per cookbook?
[2012-08-23 15:29:09 -0400] bencaron: because I can't see the log line I've add first thing running in git recipe default.rb
[2012-08-23 15:29:31 -0400] bencaron: ooohhhh
[2012-08-23 15:29:41 -0400] bencaron: my node does not update it's git cookbook version
[2012-08-23 15:29:49 -0400] bencaron: so, no v 1.0.0 on it
[2012-08-23 15:30:43 -0400] bencaron: ah, damn. Found the problem.
[2012-08-23 15:30:58 -0400] bencaron: version of git cookbook is specified in my environment
[2012-08-23 15:31:12 -0400] bencaron: so, _defautl get 1.0.0, but "dev" get 0.10.0
[2012-08-23 15:31:14 -0400] gyre007: how does the chef omni install work...after I've set up my VMs all works fine but i can seem to see any rvm or even ruby - at least not in my path
[2012-08-23 15:31:33 -0400] bencaron: geekbri: thx a lot for your help
[2012-08-23 15:31:44 -0400] gyre007: interesting...
[2012-08-23 15:32:34 -0400] _JamieD_: Would I be right in thinking that this https://github.com/fnichol/chef-user/blob/master/recipes/data_bag.rb which I couldn't get working as the user_array is empty would be better written like this https://gist.github.com/3437765 I'm no chef expert though so it might have been doing something I don't understand
[2012-08-23 15:33:09 -0400] geekbri: bencaron: Oh no problem.  I apologize that you have to deal with windows ;)
[2012-08-23 15:33:43 -0400] bencaron: lol :)
[2012-08-23 15:33:51 -0400] bencaron: appreciated :)
[2012-08-23 15:34:21 -0400] geekbri: I've been bit by the "I locked an environment into a cookbook and forgot about it" bug before too :-PP
[2012-08-23 15:34:37 -0400] bencaron: I'm learning a lot of things, on both Windows and chef
[2012-08-23 15:36:56 -0400] jan0232: how can i tell chef to create deeply nested directories recursively AND with permissions also applied to the entire structure?
[2012-08-23 15:37:22 -0400] jan0232: it only applies the permissions to the leaf directory :(
[2012-08-23 15:37:24 -0400] geekbri: ['dir1','dir2',dir3'].each do directory ;)
[2012-08-23 15:38:11 -0400] jan0232: geekbri: hmm, lol, yea now that i think about it, it is really trivial :D  i thought there might be a way to tell the directory block to do that directly
[2012-08-23 15:39:05 -0400] jan0232: i thought this would be kinda lame: ["/my", "/my/new", "/my/new/path", "/my/new/path/dir"].each do ...
[2012-08-23 15:39:05 -0400] geekbri: jan0232: Yeah I recently noticed that the recursive option doesn't apply the permissions recursively as well.  That might make sense though, because lets say /etc existing but /etc/my/thing/ didnt
[2012-08-23 15:39:12 -0400] geekbri: you wouldn't want it to modify the perms and ownership of /etc :)
[2012-08-23 15:39:33 -0400] geekbri: jan0232: I do things like that all the time.  FLEX YOUR RUBY POWWWEEEAAAHHHH!!!
[2012-08-23 15:39:36 -0400] jan0232: geekbri: yep, very true. it's a feature :)
[2012-08-23 15:40:36 -0400] jan0232: geekbri: would be a nice enhancement to have a flag though on the directory provider. something like "recursive_permissions true"
[2012-08-23 15:40:41 -0400] jan0232: :)
[2012-08-23 15:41:36 -0400] spox: '/some/relative/dir'.split('/').inject('/etc/'){|memo,obj| memo << "/obj"; directory(memo){ mode 0755; owner 'me'} }
[2012-08-23 15:41:50 -0400] spox: don't muck with /etc/ but muck with the rest
[2012-08-23 15:42:07 -0400] jan0232: :)
[2012-08-23 15:42:20 -0400] jan0232: yea, ruby to the rescue !
[2012-08-23 15:43:12 -0400] geekbri: spox: yup that works, I was just commenting on the potential reason that it might not make sense to have the recursive resource parameter modify all permissions recursively :)
[2012-08-23 15:45:19 -0400] spox: geekbri: yeah, i was just pointing out that you can feed inject a base directory that's unaffected, and only the "relative" directories in the base string are
[2012-08-23 15:45:48 -0400] geekbri: Yeah, of course if the dir you don't want to muck with appears in the middle you are going to have to write something really gross
[2012-08-23 15:46:17 -0400] geekbri: sometimes its just better to explicitly list the Dirs in an array, and just call the directory resource on each.  This way when you go to read it 5 months later you don't have to think too hard!
[2012-08-23 15:46:43 -0400] spox: but, magic!
[2012-08-23 15:46:45 -0400] geekbri: hehe
[2012-08-23 15:47:02 -0400] geekbri: Isn't the allure of magic that you don't understand how it works ;0
[2012-08-23 15:47:03 -0400] geekbri: ;)
[2012-08-23 15:47:14 -0400] jan0232: geekbri: that's what i'm doing now go for your simple solution :)
[2012-08-23 15:47:23 -0400] jan0232: no need to think
[2012-08-23 15:47:24 -0400] jan0232: :)
[2012-08-23 15:53:14 -0400] geekbri: Thinking is the enemy
[2012-08-23 15:54:38 -0400] drrk: *sigh* now the init script says it is failing to startup when actually working fine
[2012-08-23 15:58:16 -0400] meisen: Hello all, this is probably a dumb Ruby question... is there an easy way to 'require' a library, and have Ruby auto-discover any other require's that are... well, required?  It seems wierd to me that if I require library A, and library A requires B and C, that I have to require B & C explicitly in my code.    Again, sorry if this is a dumb question!
[2012-08-23 16:04:30 -0400] qhartman: Scoping question. I have some variables getting set inside a ruby_block which I need to pass into a template resource later in the recipe. It seems they are not making it there. How do I make that happen?
[2012-08-23 16:17:37 -0400] gyre007: what ruby does Chef omni install use ?
[2012-08-23 16:17:59 -0400] gyre007: I cant seem to find any ruby on my VMs which have Chef bootstrapped from omni install
[2012-08-23 16:19:15 -0400] bencaron: meisen: that's because the require does 2 things: load the code, and also import it's symbols into your code namespace
[2012-08-23 16:19:29 -0400] bencaron: so, the code is there, but not "visible" into your namespace
[2012-08-23 16:19:58 -0400] fish_: still wondering which couchdb versions are supported for running chef on
[2012-08-23 16:19:58 -0400] bencaron: that make sure you don't "overwrite" say a "login" function in your code with another one in a library
[2012-08-23 16:20:14 -0400] gyre007: I mean omnibus
[2012-08-23 16:20:40 -0400] fish_: and if there is another upgrade path beside migrating the couchdb itself. like dumping everything and importing it on a new/empty couchdb
[2012-08-23 16:21:13 -0400] gyre007: the reason I;m asking is because all recipes which have gem_package resource in it are failing because bootstrap doesn't install rubygems package mmm
[2012-08-23 16:23:29 -0400] btm: gyre007: Omnibus comes with an embedded version of Ruby (/opt/chef/embedded/bin/ruby)
[2012-08-23 16:24:04 -0400] btm: gyre007: When you're installing gems that you want Chef to use, you should use the 'chef_gem' resource. If you're installing a gem you want to use on the system, use the 'gem_package' resource.
[2012-08-23 16:25:13 -0400] btm: gyre007: the ruby that ships embedded in omnibus should not be used for anything but Chef (we make no garuntees about what it includes, or its version, and those may change to benefit Chef stability)
[2012-08-23 16:25:56 -0400] gyre007: btm, yeah Im using gem_package
[2012-08-23 16:26:09 -0400] gyre007: but that requires rubygem package to be installed
[2012-08-23 16:28:04 -0400] meisen: bencaron: thanks for the explanation.
[2012-08-23 16:28:14 -0400] gyre007: however if I install it, it will install gems for an old version of ruby
[2012-08-23 16:28:20 -0400] gyre007: but thanks for the explanation
[2012-08-23 16:28:23 -0400] meisen: it's still kind of a PITA but it probably is saving me from myself!
[2012-08-23 16:30:40 -0400] btm: gyre007: right, if you want a different version of Ruby on the system, you should install that however you prefer. There are lots of opinions there (packages, source, rvm, rbenv, ...) so we don't choose one.
[2012-08-23 16:36:19 -0400] gyre007: btm, yeah, ill have to set up rvm...which is a pain...
[2012-08-23 16:36:22 -0400] gyre007: arrgh :)
[2012-08-23 16:38:37 -0400] btm: gyre007: http://ckbk.it/rvm ?
[2012-08-23 16:38:51 -0400] shillinm: can someone tell me how to use 2 if statements.  basically I want 2 conditions to be true, not just one
[2012-08-23 16:39:09 -0400] btm: shillinm: on an only_if/not_if?
[2012-08-23 16:39:37 -0400] shillinm: no, just "if node xxxxxx" then also "if node xxxxx"
[2012-08-23 16:39:53 -0400] shillinm: let me paste something, might be easier to look at
[2012-08-23 16:40:41 -0400] shillinm: http://pastebin.com/bp9uaEt1
[2012-08-23 16:43:10 -0400] btm: shillinm: https://gist.github.com/5eda163e3c5eb4f97888 ?
[2012-08-23 16:44:28 -0400] cheeseplus: shillinm: if node['attr'] && node['otherattr'] ?
[2012-08-23 16:44:48 -0400] cheeseplus: not sure if you want nested ifs or two conditions satisfied for the single if block
[2012-08-23 16:45:03 -0400] shillinm: no that works great.  thanks.
[2012-08-23 16:45:12 -0400] shillinm: two conditions satisfy
[2012-08-23 16:45:24 -0400] cheeseplus: I think that should work at least
[2012-08-23 16:48:03 -0400] gyre007: btm, nice...will have a look at that! :)
[2012-08-23 16:51:35 -0400] btm: gyre007: there's also https://github.com/fnichol/chef-rvm
[2012-08-23 16:54:56 -0400] gyre007: btm, mm interesting...nice
[2012-08-23 16:55:13 -0400] gyre007: will have a look at both of them...the first one looks suspiciously simple :)
[2012-08-23 16:57:51 -0400] leifmadsen: curious if there is an estimated timeline to release of chef 10.14.0?
[2012-08-23 17:01:00 -0400] jtimberman: leifmadsen: very soon.
[2012-08-23 17:01:21 -0400] jtimberman: leifmadsen: I believe btm does a release if an RC goes 3 days without regression reports.
[2012-08-23 17:01:23 -0400] leifmadsen: ya, just looking at the currently assigned tickets, and only 3 still open
[2012-08-23 17:01:37 -0400] jtimberman: which I found and fixed one yesterday :)
[2012-08-23 17:01:38 -0400] leifmadsen: oh are there RCs out there I can test?
[2012-08-23 17:01:43 -0400] jtimberman: gem install --pre chef
[2012-08-23 17:01:46 -0400] leifmadsen: ahhh nice
[2012-08-23 17:01:56 -0400] leifmadsen: I will do that now then since we're in retooling!
[2012-08-23 17:02:00 -0400] jtimberman: if you're using the full stack package, you can install the gem with the embedded gem command.
[2012-08-23 17:02:03 -0400] leifmadsen: I have minitest spec stuff to test
[2012-08-23 17:02:07 -0400] jtimberman: but i'd recommend doing that on a test system.
[2012-08-23 17:02:13 -0400] jtimberman: like a vagrant box
[2012-08-23 17:02:18 -0400] leifmadsen: ya I'll be testing on an AWS instance
[2012-08-23 17:02:28 -0400] leifmadsen: thaks
[2012-08-23 17:02:29 -0400] leifmadsen: thanks too
[2012-08-23 17:02:31 -0400] jtimberman: http://jtimberman.housepub.org/blog/2012/08/10/vagrant-multiple-provisioners/
[2012-08-23 17:03:04 -0400] leifmadsen: jtimberman: I'll check it out! we're adding some vagrant stuff to our development environment, so huzzuh for that :)
[2012-08-23 17:03:47 -0400] jtimberman: :D
[2012-08-23 17:17:15 -0400] senthilr: we are on ec2 and using chef
[2012-08-23 17:17:27 -0400] senthilr: currently we use public-dns name as the id
[2012-08-23 17:17:42 -0400] senthilr: but that leads to duplicates as hosts
[2012-08-23 17:17:46 -0400] senthilr: get recycled
[2012-08-23 17:17:52 -0400] senthilr: we could use instance-id
[2012-08-23 17:18:01 -0400] senthilr: but that shows up as very cryptic in the UI
[2012-08-23 17:18:12 -0400] senthilr: what's the best practice
[2012-08-23 17:19:09 -0400] jessicab: senthilr: whats wrong with it showing up a bit cryptic in the UI? you could just place certain nodes you want to keep track of together in a role so its easy to tell which are for what
[2012-08-23 17:19:22 -0400] leehambley: is there a problem with the opscode cookbook repository ?
[2012-08-23 17:19:23 -0400] bdha: I use actual hostnames, but once you get into things like autoscaling that becomes pointless.
[2012-08-23 17:19:30 -0400] bdha: You care about recipes/roles, not hostnames.
[2012-08-23 17:19:38 -0400] leehambley: I'm seeing:  librarian-chef install\n\nCould not get http://community.opscode.com/api/v1/cookbooks/silverware because 404 Not Found!
[2012-08-23 17:19:40 -0400] bdha: (or you end up doing so after a certain size is reached)
[2012-08-23 17:19:58 -0400] shillinm: anyone want to double check my nested if/else mess?
[2012-08-23 17:20:00 -0400] shillinm: http://pastebin.com/fSjfJ7xc
[2012-08-23 17:20:22 -0400] shillinm: I want to make sure that the directories that get created have the appropriate ownership given the "environ" variable
[2012-08-23 17:20:34 -0400] jessicab: senthilr: thats what we recommend here too btw - http://wiki.opscode.com/display/chef/Troubleshooting+and+Technical+FAQ#TroubleshootingandTechnicalFAQ-Ihaveoneoffnodesinmyenvironmentandneedtomanagethemuniquely.HowdoIdothiswithChef%3F
[2012-08-23 17:20:51 -0400] lmarlow: fg
[2012-08-23 17:21:00 -0400] senthilr: jessicab: cryptic is fine
[2012-08-23 17:21:09 -0400] senthilr: just checking if there are any other alternatives that I missed
[2012-08-23 17:21:10 -0400] senthilr: that's all
[2012-08-23 17:22:01 -0400] jtimberman: leehambley: that cookbook doesn't exist on the community site, apparently. http://community.opscode.com/cookbooks/silverware
[2012-08-23 17:22:16 -0400] leehambley: hrm, wonder which thing in my bundle is trying to drag it in, thanks!
[2012-08-23 17:22:52 -0400] leehambley: thanks jtimberman
[2012-08-23 17:28:07 -0400] _JamieD_: is there a cookbook for installing ruby gems from source?
[2012-08-23 17:32:43 -0400] Urocyon: hoover_damm: i'm about to need a postgresql cookbook again, but this time for EL6 (red hat).  Since I need 9.1 support I'm trying to decide which cookbook I might want to base it on my old butchered one, the opscode, yours, finichols?
[2012-08-23 17:33:05 -0400] Urocyon: hoover_damm: I know you added a lot of tweaks to yours, has there been any interest in moving that upstream to the opscode cookbook?
[2012-08-23 17:33:27 -0400] hoover_damm: Urocyon, honestly no.  those are opinionated changes
[2012-08-23 17:33:41 -0400] hoover_damm: Urocyon, they are there for scaling and everyone's scale pattern difers
[2012-08-23 17:33:47 -0400] macros: Having an I hate ohai kinda day
[2012-08-23 17:33:49 -0400] hoover_damm: Urocyon, that cookbook provides an 80% 20% share
[2012-08-23 17:34:04 -0400] macros: It does not like openvpn very much
[2012-08-23 17:34:07 -0400] hoover_damm: Urocyon, for the memory which in my personal findings and old dba's lead me there.
[2012-08-23 17:34:22 -0400] hoover_damm: Urocyon, the split spindles for wal and data can provide an 80x boost in performance
[2012-08-23 17:34:27 -0400] hoover_damm: even on ec2 :/
[2012-08-23 17:34:53 -0400] Urocyon: I'm in a vmware environment now, but was planning on testing out a similar drive split.
[2012-08-23 17:35:41 -0400] hoover_damm: multi-path?
[2012-08-23 17:35:58 -0400] hoover_damm: should provide some no matter what
[2012-08-23 17:38:58 -0400] hoover_damm: Urocyon, basically if i was to upstream it to Opscode I should convert it to a LWRP
[2012-08-23 17:39:19 -0400] macros: ohai in general does not do well on bgp connected hosts
[2012-08-23 17:39:21 -0400] hoover_damm: Urocyon, and make some of the knobs a less less harsh.  Like it requires 4gb of ram to startup due to the 65535 max_client settings
[2012-08-23 17:39:32 -0400] hoover_damm: macros, too much network?
[2012-08-23 17:39:35 -0400] macros: ip -f inet route show returns 414,000 resules
[2012-08-23 17:39:37 -0400] macros: results
[2012-08-23 17:39:47 -0400] hoover_damm: macros, you should have ohai dig into other bgp stuff :)
[2012-08-23 17:39:50 -0400] hoover_damm: should be meaty to search on
[2012-08-23 17:40:10 -0400] macros: Right now I'd settle for it not blowing up in the face of openvpn tun devices
[2012-08-23 17:40:22 -0400] Mithrandir: it blows up?
[2012-08-23 17:40:32 -0400] hoover_damm: stacktrace please?
[2012-08-23 17:40:33 -0400] macros: Throws an exception
[2012-08-23 17:40:36 -0400] hoover_damm: we're not god
[2012-08-23 17:40:44 -0400] Urocyon: hoover_damm if you decide you want some help doing something like that, let me know.  Even if they didn't want it in opscode postgresql, it might make a nice high-performance-postgresql cookbook or something.
[2012-08-23 17:40:45 -0400] macros:           next if route_entry[:src] and not iface[route_int][:addresses].has_key? route_entry[:src]
[2012-08-23 17:41:02 -0400] macros: iface[route_int][:addresses] doesn't exist for openvpn links
[2012-08-23 17:41:08 -0400] macros: But we do have routes assigned
[2012-08-23 17:41:25 -0400] hoover_damm: Urocyon, exactly :)
[2012-08-23 17:41:38 -0400] shillinm: how do I check if a directory exists as a conditional for an if
[2012-08-23 17:41:51 -0400] macros: The simple fix is just to add iface[route_int][:addresses]
[2012-08-23 17:41:56 -0400] shillinm: or rather, if it does NOT exist
[2012-08-23 17:41:59 -0400] macros: Which bloats the node object
[2012-08-23 17:42:44 -0400] cwj: shillinm: if Dir.exists?('/tmp/foo')
[2012-08-23 17:42:47 -0400] macros: The tunnel has an explicit source route
[2012-08-23 17:42:48 -0400] macros: ip route add 10.180.171.159 dev control-rs1 src 10.101.0.31
[2012-08-23 17:45:24 -0400] shillinm: cwj is that for "exists" or "not exists"
[2012-08-23 17:45:33 -0400] shillinm: im looking for not.  so if the dir is not there, do some stuff
[2012-08-23 17:45:33 -0400] shillinm: lol
[2012-08-23 17:45:46 -0400] cwj: unless Dir.exists?('/tmp')
[2012-08-23 17:45:59 -0400] cwj: just invert the logic
[2012-08-23 17:46:07 -0400] cwj: if !Dir.exists?('/tmp')
[2012-08-23 17:46:14 -0400] shillinm: thank you much.  will my else/elseif/ still work below
[2012-08-23 17:46:16 -0400] cwj: all the same thing
[2012-08-23 17:46:24 -0400] shillinm: ahh yeah, I'll use the !Dir.exists
[2012-08-23 17:50:25 -0400] unixguy: any idea why a client using this configuration and HAS the env defined would completely ignore the env_run_list for it and fall back on the run_list??? : http://pastebin.com/yVWFrnA7
[2012-08-23 18:07:32 -0400] JoshuaMiller: unixguy: I vaguely recall hearing that env_run_lists needed to have a _default entry present to work properly, but I don't recall the exact circumstances
[2012-08-23 18:10:28 -0400] benjaminws_: lol http://wiki.opscode.com/display/chef/Search+Tips+For+Dentist+Tampa
[2012-08-23 18:12:58 -0400] c_t: heh
[2012-08-23 18:13:34 -0400] bradgignac: lol
[2012-08-23 18:13:40 -0400] jessicab: benjaminws: heh i removed it btw.. kinda odd that user had perms to create that :P
[2012-08-23 18:14:56 -0400] benjaminws_: damn, I just tweeted it :P
[2012-08-23 18:19:28 -0400] benjaminws_: I think we need to check if the service exists before checking the status of the service here. https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/service/windows.rb#L140
[2012-08-23 18:20:11 -0400] benjaminws_: That method blows up if the service doesn't exist.
[2012-08-23 18:20:29 -0400] jessicab: benjaminws_: haha aw sorry! just figured id clean it up before someone opens a ticket or something
[2012-08-23 18:20:37 -0400] benjaminws_: Working on a ticket/patch, but wanted to make sure I'm not crazy first.
[2012-08-23 18:20:41 -0400] benjaminws_: jessicab: it's cool ;)
[2012-08-23 18:22:18 -0400] leifmadsen: ok, so I want to make sure I understand this right:  chef_gem allows you to use a gem immediately in the recipe, but tries to install prior to convergence, so on a new machine that you're using build-essential to get the dev tools, you can't use it since it tries to 'gem install' prior to tools installed, but gem_package doesn't allow you to use the newly installed gem in the recipe you're installing the gem from
[2012-08-23 18:26:52 -0400] nico: hi guys
[2012-08-23 18:27:00 -0400] nico: does anyone run chef on freebsd ?
[2012-08-23 18:27:21 -0400] jtimberman: nico: andrea campi does :)
[2012-08-23 18:27:27 -0400] nico: I'm fighting with chef server
[2012-08-23 18:27:28 -0400] nico: Loading init file from ./config/init.rb
[2012-08-23 18:27:29 -0400] nico: /usr/local/lib/ruby/1.9/net/http.rb:762:in `initialize': Protocol not supported - socket(2) (Errno::EPROTONOSUPPORT) from /usr/local/lib/ruby/1.9/net/http.rb:762:in `open' from /usr/local/lib/ruby/1.9/net/http.rb:762:in `block in connect'
[2012-08-23 18:27:45 -0400] nico: I'm banging my head on the wall
[2012-08-23 18:28:20 -0400] dwhsix: where can include_attribute be used?
[2012-08-23 18:28:29 -0400] dwhsix: any file inside a cookbook?
[2012-08-23 18:28:33 -0400] dwhsix: how about in an environment?
[2012-08-23 18:31:10 -0400] dwhsix: ok, well not in an environment :-(
[2012-08-23 18:31:45 -0400] dwhsix: aaaaand not in a role
[2012-08-23 18:35:08 -0400] geekbri: include_attribute is for the attribute files isnt it?
[2012-08-23 18:35:20 -0400] geekbri: so that if one attribute file requires one set in a nother file you can order then
[2012-08-23 18:35:21 -0400] geekbri: them
[2012-08-23 18:36:41 -0400] dwhsix: geekbri: ahhhhh
[2012-08-23 18:37:03 -0400] dwhsix: so doesn't really help what I'm trying to do
[2012-08-23 18:37:05 -0400] dwhsix: thx
[2012-08-23 18:37:10 -0400] geekbri: I didnt read what you were trying to do :)
[2012-08-23 18:37:14 -0400] geekbri: :-P
[2012-08-23 18:37:19 -0400] dwhsix: I didn't say ;-)
[2012-08-23 18:38:01 -0400] dwhsix: having trouble getting tomcat java_options to get set correctly it's using the default
[2012-08-23 18:39:04 -0400] dwhsix: don't have time at the moment to puzzle this out, so I'm going to hardcode some stuff shh...
[2012-08-23 18:41:09 -0400] nico: jtimberman: what is nickname please ?
[2012-08-23 18:44:40 -0400] jtimberman: nico: I don't know his nick that he uses, and I don't know if he uses Chef Server on FreeBSD or jsut clients.
[2012-08-23 18:45:19 -0400] nico: jtimberman: ok, thx
[2012-08-23 18:54:06 -0400] ericm__: Hello. Has anyone seen any examples of a LWRP that integrates with the new why run functionality?
[2012-08-23 19:03:18 -0400] timsmith: does anyone ever get an issue where they reference a node attribute in a template and they end up with something like this getting written out: irc://niven.freenode.net:8000/#%3CChef::Node::Attribute:0x7f7ed6f2d2d8%3E
[2012-08-23 19:03:43 -0400] timsmith: "#<Chef::Node::Attribute:0x7f7ed6f2d2d8>"
[2012-08-23 19:04:08 -0400] hoover_damm: timsmith, have seen that.. would love to see the code in question
[2012-08-23 19:04:22 -0400] timsmith: let me see if I can throw everything up somewhere
[2012-08-23 19:04:53 -0400] leifmadsen: huh, so CHEF-2848 seems to have a work around for the conundrum/catch 22 I ran into today with chef_gem vs gem_package, and curious why maybe gem_package doesn't just work like the workaround in the first place?
[2012-08-23 19:04:58 -0400] leifmadsen: jtimberman: ^^
[2012-08-23 19:05:20 -0400] leifmadsen: I could perhaps file an improvement request to make it work like that all the time... ?
[2012-08-23 19:05:42 -0400] leifmadsen: or for backwards compat perhaps a third option...
[2012-08-23 19:09:00 -0400] geekbri: timsmith: i've been bitten by that before as well.  There were times I needed to delete the attribute from the node before I was able to fix it
[2012-08-23 19:18:30 -0400] timsmith: geekbri: That fixed it.  Somehow a previous Chef run added some totally invalid json on the node and busted the runs
[2012-08-23 19:39:12 -0400] yfeldblum: ericm__, a LWRP is exactly identical to any resources and providers that ship with chef, and you can use them to learn how to integrate with why-run: https://github.com/opscode/chef/tree/master/chef/lib/chef/provider
[2012-08-23 19:41:53 -0400] ericm__: yfeldblum: Thanks. So, what you are saying is that I can throw a whyrun_supported? and a requirements expectation and it should work well with whyrun behavior?
[2012-08-23 19:43:01 -0400] yfeldblum: ericm__, i don't know the details, but i do know that whatever the providers can do that ship with chef, you can do in your custom providers too
[2012-08-23 19:43:55 -0400] ericm__: yfeldblum: Thanks. I'll give it a show and see what happens.
[2012-08-23 19:52:16 -0400] averyj: after moving to 10.12 we are getting an error with the loggly cookbook around python-setuptools not being installed
[2012-08-23 19:52:40 -0400] averyj: it looks like the definition is running before the recipe?
[2012-08-23 19:53:12 -0400] averyj: anyone using the loggly cookbook with 10.12?
[2012-08-23 19:58:58 -0400] gregburek: Any one have a good bind9 cookbook?
[2012-08-23 20:04:24 -0400] drrk: I altered the one on community.opscode.com to allow it to be given files to serve directly
[2012-08-23 20:07:57 -0400] yfeldblum: gregburek, feel free to set up bind9 by hand and record the resources you set up on the machine into recipe :D
[2012-08-23 20:28:38 -0400] jassinpainAgain: Hello all
[2012-08-23 20:29:03 -0400] jassinpainAgain: having a problem with a templete and wondering if anyone has any ideas
[2012-08-23 20:29:03 -0400] jassinpainAgain:  27:      <td> <%= host[:block_device][:sda][:model] %> </td>
[2012-08-23 20:29:04 -0400] jassinpainAgain:  28:      <td> <%= host[:platform] %> <%= host[:platform_version] %> </td>
[2012-08-23 20:29:07 -0400] jassinpainAgain: doh
[2012-08-23 20:29:22 -0400] jassinpainAgain: line 28 works but 27 errors
[2012-08-23 20:29:37 -0400] jassinpainAgain: Chef::Mixin::Template::TemplateError (undefined method `[]' for nil:NilClass) on line #27:
[2012-08-23 20:30:01 -0400] juliancdunn: jassinpainAgain: probably because either host[:block_device] or host[:block_device][:sda] is nil
[2012-08-23 20:30:45 -0400] jassinpainAgain: yea I tried a if not .nil? but that seemed not to work
[2012-08-23 20:31:23 -0400] jassinpainAgain: guess I will keep playing
[2012-08-23 20:32:03 -0400] ssd7: jassinpainAgain: What did you test .nil? against.  My guess is that host[:block_device][:sda] is what is returning nil.
[2012-08-23 20:35:03 -0400] ssd7: jassinpainAgain: That, or host is the name of the variable you are passing in to the template, which means you need @host
[2012-08-23 20:36:35 -0400] jassinpainAgain: yea I tested against host[:block_device][:sda][:model]
[2012-08-23 20:39:50 -0400] jassinpainAgain: https://gist.github.com/3441418
[2012-08-23 20:39:58 -0400] jassinpainAgain: thats what I am trying to do
[2012-08-23 20:40:06 -0400] jassinpainAgain: just something I dont understand in ruby I am guessing
[2012-08-23 20:40:39 -0400] jassinpainAgain: all but block_device return correct values
[2012-08-23 20:40:54 -0400] jassinpainAgain: which means they dont have .nil entries
[2012-08-23 20:41:54 -0400] leifmadsen: hey all -- I'm trying to use the mysql cookbook and database cookbook, but i can't seem to get around this issue, which I think has something to do with mysql gem installation... ?  LoadError: no such file to load -- mysql
[2012-08-23 20:42:27 -0400] matschaffer: jassinpainAgain: are the things in @my_hosts nodes? If so I'd probaly make sure that they all definitely have that block_device.sda.model attribute
[2012-08-23 20:42:32 -0400] matschaffer: maybe some of them do and some don't?
[2012-08-23 20:43:05 -0400] jassinpainAgain: exactly some dont, so I just want to use undef for those systems
[2012-08-23 20:43:16 -0400] jassinpainAgain: yes they are all nodes
[2012-08-23 20:43:54 -0400] matschaffer: do some of them completely lack the block_device attr?
[2012-08-23 20:44:04 -0400] matschaffer: if so do host[:block_device].nil?
[2012-08-23 20:44:19 -0400] matschaffer: basically if you try to index ( [] ) a nil it complains. And if an attribute isn't set you get a nil
[2012-08-23 20:44:31 -0400] matschaffer: you could also do
[2012-08-23 20:44:52 -0400] matschaffer: <td><%= host[:block_device][:sda][:model] rescue "Unknown" %> I think
[2012-08-23 20:45:20 -0400] matschaffer: it's not 100% best practice, but I don't think it's terrible in this case
[2012-08-23 20:45:41 -0400] makerbreakr: is there something i can look at, irt why chef webui consistently crashes in ubuntu?
[2012-08-23 20:45:43 -0400] matschaffer: it'd eliminate teh contiditional too
[2012-08-23 20:45:43 -0400] juliancdunn: leifmadsen: where's the call to install the mysql gem?
[2012-08-23 20:46:13 -0400] matschaffer: makerbreaker: crashes how?
[2012-08-23 20:46:28 -0400] eroc: Quick question. Does anyone know of any documentation that covers converge_by blocks?
[2012-08-23 20:46:30 -0400] matschaffer: if it's the server crashing I'm pretty sure there's a logfile for it
[2012-08-23 20:46:32 -0400] makerbreakr: solr, and the webui
[2012-08-23 20:47:11 -0400] makerbreakr: basically, i have to do this once every couple a days
[2012-08-23 20:47:11 -0400] makerbreakr: http://www.makerbreaker.com/blog/2012/04/10/chef-server-webui/
[2012-08-23 20:48:02 -0400] jassinpainAgain: cool I will try that, thank you
[2012-08-23 20:48:19 -0400] yfeldblum: matschaffer, lulz that's called "cheating"
[2012-08-23 20:48:27 -0400] matschaffer: yfeldblum: sure is :)
[2012-08-23 20:48:37 -0400] makerbreakr: theres nothing in the log files
[2012-08-23 20:48:44 -0400] makerbreakr: unfortunately
[2012-08-23 20:48:57 -0400] makerbreakr: unless, i am looking at the wrong ones, but i dont believe i am
[2012-08-23 20:50:13 -0400] matschaffer: jassinpainAgain: as yfeldblum says, it's probably not the best way to go for all cases. But without knowing more about your cookbook setup and your nodes it's hard to offer anything more graceful
[2012-08-23 20:57:23 -0400] gregburek: yfeldblum: heh, that's my plan :)
[2012-08-23 20:57:54 -0400] leifmadsen: juliancdunn: hmmm ok chef_gem instead of gem_package made it work, even with the mysql cookbook update which is supposed to have resolved this :)
[2012-08-23 21:02:37 -0400] juliancdunn: leifmadsen: because chef_gem automatically does a Gem.clear_paths so you can use the gem right away
[2012-08-23 21:22:04 -0400] syphon: I'm trying to set up an SSL cert for my Private Chef Server install, but it's failing to start up. Anyone know which log file I should be looking at to see why?
[2012-08-23 21:32:24 -0400] thedeeno: using libraraian-chef. Does it break `knife cookbook create` or is something else going wrong? The command says it's  creating the cookbook but no files are actually created...
[2012-08-23 21:34:02 -0400] yfeldblum: thedeeno, kind of; librarian-chef, as a matter of policy, TAKES OVER your cookbooks directory (unless you configure it to take over a different directory) and will mercilessly delete anything from your cookbooks directory that librarian-chef didn't put there
[2012-08-23 21:34:36 -0400] yfeldblum: thedeeno, it's in the readme near the top, and how to change that is in the readme under "Configuration"
[2012-08-23 21:35:19 -0400] yfeldblum: thedeeno, but if you just `mkdir site-cookbooks/my-custom-cookbook` and `touch site-cookbooks/my-custom-cookbook/metadata.rb` you should be good to go
[2012-08-23 21:36:44 -0400] thedeeno: ah, if I only need the metadata.rb file then i'll just make it by hand. Glad to hear I'm not crazy though - figured it was librarian's magic in the way
[2012-08-23 21:37:00 -0400] yfeldblum: thedeeno, librarian-chef by default enforces that your cookbooks directory contains exactly the cookbooks specified in your Cheffile.lock - no extra cookbooks, no missing cookbooks, no wrong versions of cookbooks
[2012-08-23 21:37:14 -0400] yfeldblum: thedeeno, librarian-chef only does this when you run `librarian-chef install` though
[2012-08-23 21:37:54 -0400] thedeeno: yfeldblum: hmm, whell them maybe something else is wrong, cause I expected to be able to move the new cookbook to my site-cookbook directories
[2012-08-23 21:38:00 -0400] thedeeno: but nothing is created at all
[2012-08-23 21:38:01 -0400] jassinpainAgain: rescue worked, thank you
[2012-08-23 21:38:38 -0400] thedeeno: yfeldblum: i'm just using 'knife cookbook create' not 'librarian-chef install'
[2012-08-23 21:39:02 -0400] yfeldblum: thedeeno, but if you use librarian-chef's knife integration, then ALL knife commands will IGNORE your cookbooks directory: librarian-chef injects a temp directory and substitutes that for your cookbooks directory, so `knife cookbook create` will do that in some temp directory somewhere
[2012-08-23 21:39:24 -0400] thedeeno: yfeldblum: then that's what's happening. makes sense.
[2012-08-23 21:39:35 -0400] thedeeno: ty!
[2012-08-23 21:40:04 -0400] yfeldblum: thedeeno, this is a dirt-simple way to enforce the policy that what knife sees is exactly what's in your Cheffile.lock (there are probably better ways, but they're probably trickier to implement correctly)
[2012-08-23 21:41:36 -0400] smw: hi all, I have a cookbook with default[:passenger][:version]     = "3.0.7" in the attributes file. How would I override this in my role file?
[2012-08-23 21:41:38 -0400] thedeeno: yfeldblum: agreed, though I'd expect it wouldn't be to hard make the `knife cookbook create` command create a cookbook in `site-cookbooks`
[2012-08-23 21:41:57 -0400] smw: default[:passenger][:version]     = "3.0.8"?
[2012-08-23 21:42:07 -0400] smw: or would I put a different line there?
[2012-08-23 21:42:18 -0400] yfeldblum: thedeeno, i don't know - i've never thought about it, to be honest, because i typically just make the directory structure and files by hand
[2012-08-23 21:42:35 -0400] yfeldblum: thedeeno, either on the command line or in the editor, whichever i'm working in
[2012-08-23 21:43:18 -0400] thedeeno: yfeldblum: yeah, it was easy enough to do that way. I just thought something was amis when the command completed successfully and said 'creating xxx...'
[2012-08-23 21:43:26 -0400] thedeeno: but then I couldn't find it anywhere
[2012-08-23 21:44:27 -0400] thedeeno: yfeldblum: is it easy enough to print a message saying 'this doesn't work with librarian'?
[2012-08-23 21:44:56 -0400] smw: how do you define an attribute in a role using the ruby dsl?
[2012-08-23 21:44:57 -0400] yfeldblum: thedeeno, to be honest, maybe it's better this way anyway? ... i would rather not have people being confused that all the work they did on the cookbook they just made just got wiped away by the last `librarian-chef install`
[2012-08-23 21:45:54 -0400] yfeldblum: thedeeno, i don't know; librarian-chef's knife integration is extremely simple right now
[2012-08-23 21:46:31 -0400] yfeldblum: thedeeno, and and actually doesn't even change anything by itself - it relies on you to do the changes yourself in your knife.rb
[2012-08-23 21:47:03 -0400] _JamieD_: I'm getting an issue with "sh: 1: make: not found" when running chef. however I have the build-essential recipe in the run list as one of the first recipes. It looks like some kind of load order problem. Should the run list be executed in the order specified in the config file?
[2012-08-23 21:47:29 -0400] thedeeno: yfeldblum: I think this bit is a little broken. It's fine to say that you sholudn't manage cookbook creation with knife, but I think it'd make sense to make that more clear. It was the misleading output that got me confused.
[2012-08-23 21:48:04 -0400] thedeeno: yfeldblum: knife create says 'creating cookbook test' lists all the files it created, but then they're no where to be found.
[2012-08-23 21:48:37 -0400] yfeldblum: thedeeno, you're right of course, and improving the knife integration is on my wish-list for librarian-chef
[2012-08-23 21:48:42 -0400] thedeeno: yfeldblum: I agree cookbooks shouldn't be allowed to be created in the cookbooks directory, so disabling the knife create command (or altering it) makes sense
[2012-08-23 21:48:58 -0400] thedeeno: can you point me to the main integration point in the repo?
[2012-08-23 21:49:47 -0400] _JamieD_: ok so the chef documentation states that the run list order is preserved. How can I figure out why a recipe that should be running last is running too soon?
[2012-08-23 21:49:56 -0400] yfeldblum: thedeeno, https://github.com/applicationsonline/librarian/blob/master/lib/librarian/chef/integration/knife.rb and https://github.com/applicationsonline/librarian#knife-integration
[2012-08-23 21:50:36 -0400] thedeeno: yfeldblum: i'll take a look and see if there's any low hanging fruit :)
[2012-08-23 21:51:26 -0400] yfeldblum: thedeeno, it just makes tmp dir and installs the Cheffile.lock to that tmp dir; the docs say you should stick that tmp dir into your knife.rb in the cookbook_path, so really it's you doing the integration after all
[2012-08-23 21:53:24 -0400] yfeldblum: thedeeno, i'm not opposed to completely rewriting it and making it significantly more advanced, and of course if anyone wants to get started on that, i'm happy to take pull requests and offer tips & pointers
[2012-08-23 21:54:03 -0400] smw: is this the proper way to override an attribute in a role file? http://fpaste.org/RbfU/
[2012-08-23 21:54:49 -0400] smw: I am new and probably missing something stupid
[2012-08-23 21:55:17 -0400] smw: do I need to override default[:passenger][:root_path] because it is based on :version?
[2012-08-23 21:55:41 -0400] yfeldblum: smw, that looks fine
[2012-08-23 21:56:15 -0400] smw: yfeldblum, a template based on default[:passenger][:root_path] is outputting 3.0.7
[2012-08-23 21:56:28 -0400] smw: yfeldblum, how would I fix that?
[2012-08-23 21:58:01 -0400] smw: yfeldblum, is default[:passenger][:root_path]   = "#{languages[:ruby][:gems_dir]}/gems/passenger-#{passenger[:version]}" computed after the version is overriden?
[2012-08-23 21:58:04 -0400] _JamieD_: any ideas why build-essential would fail to run? it looks like it's never being run as there is nothing in the log and no errors to do with build-essential
[2012-08-23 21:58:45 -0400] _JamieD_: the code just before and after the include_recipe "build-essential" line are running
[2012-08-23 21:59:20 -0400] yfeldblum: smw, ah, you're computing a derived default attribute; either put a default for that derived attribute in the role too, or move the computation of the derived attribute to the recipe (node.default["passenger"]["root_path"] = computed_value)
[2012-08-23 21:59:48 -0400] berto-: i added the users cookbook as a submodule in my repo, added a user data bag, and then added recipe[users::sysadmins] to a role.  running chef-client i get: FATAL: Net::HTTPServerException: users_manage[sysadmin] (users::sysadmins line 23) had an error: Net::HTTPServerException: 404 "Not Found".  any ideas?
[2012-08-23 22:00:01 -0400] krawek: hi guys
[2012-08-23 22:00:22 -0400] krawek: I am new to chef and I have a question
[2012-08-23 22:00:28 -0400] juliancdunn: berto-: did you upload the databag to the server?
[2012-08-23 22:00:49 -0400] cwj: krawek: just fire away
[2012-08-23 22:01:10 -0400] krawek: is it possible to change the templates path? it's "default" by default
[2012-08-23 22:01:38 -0400] krawek: I would like to have a templates dir for each recipe
[2012-08-23 22:01:42 -0400] smw: yfeldblum, http://fpaste.org/wbRw/ >
[2012-08-23 22:01:49 -0400] smw: yfeldblum, like that?
[2012-08-23 22:02:55 -0400] smw: yfeldblum, nope, that did not work
[2012-08-23 22:03:22 -0400] smw: yfeldblum, I am hoping to not be forced to modify the passenger cookbook
[2012-08-23 22:04:13 -0400] krawek: cwj: ^^
[2012-08-23 22:04:24 -0400] juliancdunn: krawek: it's a Chef convention that I would leave alone
[2012-08-23 22:04:54 -0400] cwj: krawek: as juliancdunn mentioned, its a chef convention, it has to do with 'file specificity'
[2012-08-23 22:04:55 -0400] cwj: http://wiki.opscode.com/display/chef/Templates
[2012-08-23 22:04:58 -0400] juliancdunn: there's a particular search order for templates that depends on "default" as the drop through
[2012-08-23 22:05:07 -0400] cwj: check the 'Template Location Specificity' section
[2012-08-23 22:05:13 -0400] meisen: What do "most people" use as the interval for chef-client when scheduled?  Maybe I am impatient, 60 minutes seems like a long time to wait for a node to do what I want. :)
[2012-08-23 22:05:19 -0400] berto-: juliancdunn: yes and no.   accidentally created the user on the wrong chef server.  good call, thanks!
[2012-08-23 22:05:30 -0400] krawek: so I have to use default
[2012-08-23 22:05:37 -0400] krawek: thanks cwj, juliancdunn
[2012-08-23 22:05:44 -0400] juliancdunn: np
[2012-08-23 22:06:08 -0400] juliancdunn: meisen: we run chef-client every 1800 seconds (30 mins)
[2012-08-23 22:06:22 -0400] juliancdunn: except on the DNS servers, where we run it every 5 minutes to get new records that might have been registered with Chef
[2012-08-23 22:07:15 -0400] smw: yfeldblum, setting it statically did not work either
[2012-08-23 22:07:23 -0400] gabebug: i just switched from a system ruby and gem-based chef install to the omnibus installer on ubuntu 12.04 -- and now it takes 22+ seconds to run a `chef-client --version` instead of <1 second - is that normal?
[2012-08-23 22:07:37 -0400] yfeldblum: smw, no, i mean either hardcode the new root path in the role, or do the computation of the root path in the recipe rather than in the attributes file
[2012-08-23 22:07:48 -0400] gabebug: i tried it on a brand new ubuntu 12.04 vm install too with the same results
[2012-08-23 22:08:12 -0400] smw: yfeldblum, yeah, I will hardcode
[2012-08-23 22:08:22 -0400] c_t: i told u i would hardcode
[2012-08-23 22:09:17 -0400] smurfy: juliancdunn: are you managing dns on clients via chef?
[2012-08-23 22:11:13 -0400] meisen: juliancdunn: thanks
[2012-08-23 22:11:17 -0400] juliancdunn: smurfy: we're generating DNS zones based on what nodes are registered in Chef.
[2012-08-23 22:11:32 -0400] gabebug: re: omnibus performance, i found http://tickets.opscode.com/browse/CHEF-3295 which indicates it's known, semi-platform specific, and is mostly alleviated by upgrading the omnibus ruby gems and is being worked on
[2012-08-23 22:17:17 -0400] chip-: c_t: HA!
[2012-08-23 22:18:58 -0400] sdelano: gabebug: we'll have a omnibus release of 10.14.0.rc.0 available within the hour that addresses these issues
[2012-08-23 22:21:47 -0400] bahamas10: is it possible to make an empty role i can add a few hosts, just for the purpose of being able to search for them easily?
[2012-08-23 22:21:48 -0400] timsmith: timberman: Any idea when you might have a chance to merge more nagios cookbook changes?  I have more stuff to push, but the merges are going to conflict without some of the current pull requests getting merged
[2012-08-23 22:22:03 -0400] bahamas10: or am i thinking of this problem wrong, and missing some builtin constrtuct to do what i want
[2012-08-23 22:22:05 -0400] timsmith: bahamas10:  Yes. I've used this
[2012-08-23 22:22:46 -0400] bahamas10: timsmith: i mad an empty role, but it autopopulates itself with a recipe that loosk like recipe[recipe[recipe]]]
[2012-08-23 22:24:06 -0400] timsmith:   "run_list": [
[2012-08-23 22:24:07 -0400] timsmith:   ],
[2012-08-23 22:24:26 -0400] timsmith: in the role
[2012-08-23 22:25:01 -0400] bahamas10: $ knife role edit personal-dev
[2012-08-23 22:25:03 -0400] bahamas10: ERROR: ArgumentError: Unable to create Chef::RunList::RunListItem from String:"recipe[recipe[recipe[]]]": must be recipe[] or role[]
[2012-08-23 22:25:15 -0400] bahamas10: i can delete it from the management UI (hosted chef), but it comes back
[2012-08-23 22:28:20 -0400] bahamas10: timsmith: weird, so if i make it from the WebUI it gets the recipe[recipe[recipe]]] thing, but making it with knife everything seems fine
[2012-08-23 22:29:46 -0400] timsmith: bahamas10: I always do it in knife by uploading json files that are in my repo
[2012-08-23 22:30:25 -0400] bahamas10: lesson learned. cli > web
[2012-08-23 22:33:55 -0400] thedeeno: yfeldblum: are you testing knife integration anywhere? I wrote a little knife plugin to override the create command, but I'm not sure how to test. If you've done it already I'll just hook into what you've done.
[2012-08-23 23:20:00 -0400] _JamieD_: does anyone know if there is a cookbook available to install ruby 1.9.3 from source without using rbenv or rvm?
[2012-08-23 23:40:38 -0400] krawek: _JamieD_: if chef requires ruby how would you use chef to install it?
[2012-08-23 23:41:10 -0400] _JamieD_: krawek: when you bootstrap chef it installs its own local version of ruby
[2012-08-23 23:42:43 -0400] krawek: oh i didn't know
[2012-08-23 23:44:08 -0400] _JamieD_: krawek: chef maintains its own gems, so in recipes if you have gem "rake" that will install a gem to the systems ruby but chef_gem "rake" will install the gem into chefs private ruby
[2012-08-23 23:44:39 -0400] jessicab: _JamieD_: depends on the bootstrap file you use actually, by default it uses chef-full but if you specify one with -d like -d ubuntu10.04-gems it would install ruby on the system
[2012-08-23 23:45:25 -0400] _JamieD_: jessicab: indeed
[2012-08-23 23:45:48 -0400] _JamieD_: by the way, I found http://community.opscode.com/cookbooks/ruby_installer that installs ruby 1.9.3 from source
[2012-08-23 23:47:52 -0400] _JamieD_: now I just need to figure out why chef is trying to use make before build-essential is run

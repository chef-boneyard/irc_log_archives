[2012-08-28 22:52:11 -0400] reset: jtimberman: any chance we can get a new version of couchdb released with the changes from COOK-1399? https://github.com/opscode-cookbooks/couchdb
[2012-08-28 22:52:18 -0400] reset: it was merged a month ago
[2012-08-28 23:06:29 -0400] jkyle: I have a role whose run_list is ["role[foo]", "recipe[bar]", ["recipe[bah]"]. But when it's expanded and run on a node, it inverts the order of recipe's 'bar' and 'bah'
[2012-08-28 23:06:33 -0400] jkyle: what might cause that?
[2012-08-28 23:17:24 -0400] _0x783czar: any word when the chef omnibus installer will work with OSX 10.8 (Mountain Lion)?
[2012-08-28 23:30:10 -0400] stuartrexking: I am using the application_ruby recipe to deploy a ruby app to run under unicorn. What is the best / recommended / conventional way to manage the gem dependencies in my application? The Gemfile sits in the root of the source code.
[2012-08-28 23:30:22 -0400] stuartrexking: How has anyone else solved this problem?
[2012-08-28 23:30:40 -0400] thehar: bundle
[2012-08-28 23:30:50 -0400] stuartrexking: Yes, but when and how?
[2012-08-28 23:31:13 -0400] stuartrexking: bundle exec is used to start unicorn. The problem is, it does not install the dependencies.
[2012-08-28 23:31:33 -0400] stuartrexking: The only way I can see of doing it is hacking the application_ruby recipe.
[2012-08-28 23:34:12 -0400] stuartrexking: The application resource has a before_deploy hook. I can execute bundle install in a command resource in that block, but it won't run as the user I tell it to.
[2012-08-28 23:35:36 -0400] stuartrexking: I will take any and all suggestions at this stage. This has me stumped.
[2012-08-28 23:50:24 -0400] hoover_damm: stuartrexking, my unicorn cookbook suggests you use binstubs
[2012-08-28 23:50:28 -0400] Majost: How do I go about re-running a specific recipe on a node without executing the entire runlist?
[2012-08-28 23:50:31 -0400] Majost: This probably is on the wiki somewhere, but I am having troubles finding the matching keywords.
[2012-08-28 23:50:44 -0400] hoover_damm: stuartrexking, so that way bluepill can find either the system unicorn or pull in the proper unicorn binary
[2012-08-28 23:52:27 -0400] hoover_damm: https://github.com/damm/chef-unicorn/ ... there's some bits I know I need to address but my unicorn.rb is a little more rails friendly
[2012-08-28 23:52:40 -0400] hoover_damm: so you might want to just review my unicorn erb template patches and apply them
[2012-08-28 23:53:20 -0400] stuartrexking: hoover_damm: binstubs might be what I am looking for
[2012-08-28 23:53:34 -0400] hoover_damm: stuartrexking, little more
[2012-08-28 23:53:51 -0400] hoover_damm: stuartrexking, take a review of my cookbook.  I used to work for Engine Yard and I maintained their Unicorn stack there
[2012-08-28 23:53:59 -0400] stuartrexking: Ok, thanks.
[2012-08-28 23:54:07 -0400] hoover_damm: stuartrexking, there's a few esoteric bugfixes related to capistrano
[2012-08-28 23:54:17 -0400] hoover_damm: that require you to enable tty login to fix otherwise
[2012-08-28 23:54:23 -0400] hoover_damm: and the usual BUDNLER_GEMFILE hate fix
[2012-08-28 23:54:24 -0400] stuartrexking: I am using the rvm cookbook from fnichol to install system ruby, bundler and unicorn.
[2012-08-28 23:54:31 -0400] hoover_damm: that shouldn't matter
[2012-08-28 23:54:57 -0400] stuartrexking: So if I use binstubs in the runit script, it might install the dependency gems.
[2012-08-28 23:55:16 -0400] hoover_damm: stuartrexking, https://github.com/damm/chef-unicorn/blob/master/templates/default/unicorn.rb.erb#L23-L34
[2012-08-28 23:55:32 -0400] _0x783czar: Majost: try running the chef-client with the '-o' option.  see chef-client --help
[2012-08-28 23:55:55 -0400] hoover_damm: stuartrexking, BUNDLE_GEMFILE can sometimes be statically set to a release with capistrano, and that block there is designed to ensure that GEM_HOME is set to the bundle path, and you have the binstubs path in your path before you fire up unicorn
[2012-08-28 23:55:56 -0400] Majost: _0x783czar: thanks. =)
[2012-08-28 23:56:25 -0400] hoover_damm: stuartrexking, https://github.com/damm/chef-unicorn/blob/master/templates/default/unicorn.rb.erb#L73-L107
[2012-08-28 23:56:49 -0400] hoover_damm: stuartrexking, thats for hot reload action (0-downtime deploys) and to make sure that the master disconnects and the workers connect on spawn
[2012-08-28 23:56:50 -0400] stuartrexking: But if I understand you correctly, if I include binstubs variable in my bundle exec command, it will look for a Gemfile and install those gems?
[2012-08-28 23:56:55 -0400] hoover_damm: the rest is fairly well documented
[2012-08-28 23:57:08 -0400] hoover_damm: yep
[2012-08-28 23:57:24 -0400] stuartrexking: Ok, thanks. Really appreciate the help.
[2012-08-28 23:57:26 -0400] Majost: _0x783czar: do you know if there is a way to do it via knife -- the issue I am actually trying to resolve is that I forgot to set passwordless: true in the role the system is using, so I don't have sudo permissions. heh
[2012-08-28 23:57:26 -0400] hoover_damm: but you should still review those bits if your doing unicorn and anything production related
[2012-08-28 23:57:33 -0400] hoover_damm: and add them to your unicorn setup
[2012-08-28 23:57:43 -0400] stuartrexking: Ok, I am taking a look at your stuff...
[2012-08-28 23:57:58 -0400] hoover_damm: I just haven't had the time to convert the unicorn cookbook to a lwrp
[2012-08-28 23:58:48 -0400] hoover_damm: although likely my cookbook backlog is big enough

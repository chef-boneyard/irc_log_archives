[2012-12-14 00:02:13 -0500] programmerq: we did override_attribute['rvm']['default_ruby'] = 'system'
[2012-12-14 00:02:18 -0500] programmerq: and that seems to do what we want
[2012-12-14 00:05:38 -0500] madteckhead: I'm looking for a opscode tutor for about 10 hours of work over the next month. I'd greatly appreciate any expressions of interest. skype: madteckhead
[2012-12-14 00:15:38 -0500] sc077: so I answered my own question earlier irt testing for the existence of a data_bag_item:
[2012-12-14 00:15:59 -0500] sc077: if (search(:hosts, "id:#{node[:hostname]}")) ...
[2012-12-14 00:25:51 -0500] sc077: wtf!?
[2012-12-14 00:25:56 -0500] sc077: that doesn't work
[2012-12-14 00:26:30 -0500] sc077: the query thinks that it exists when clearly a knife search shows it has been deleted
[2012-12-14 00:26:40 -0500] sc077: caching?
[2012-12-14 00:27:13 -0500] sc077: nope, not on https://manage.opscode.com/databags/hosts either
[2012-12-14 00:28:28 -0500] nstielau1: sc077: Have you tried playing around with the search in shef?
[2012-12-14 00:28:40 -0500] nstielau1: might be a good way to check on return values, etc
[2012-12-14 00:29:24 -0500] sc077: I've never (sucessfully) gotten Shef to work right.
[2012-12-14 00:29:52 -0500] sc077: s/right/at\ all/
[2012-12-14 00:29:57 -0500] nstielau1: ;)
[2012-12-14 00:30:11 -0500] nstielau1: It might take a bit, but it is perfect for this kind of experimentation
[2012-12-14 00:30:14 -0500] ssd7_: sc077: How long has it been since the delete?
[2012-12-14 00:30:26 -0500] sc077: few  minutes
[2012-12-14 00:32:05 -0500] ssd7_: Hrmm. Is this on Hosted Chef or your own Chef server?
[2012-12-14 00:33:32 -0500] sc077: hosted
[2012-12-14 00:33:42 -0500] sc077: I'm checking the return now
[2012-12-14 00:35:31 -0500] sc077: will this work? Chef::Log.info("#{return}")
[2012-12-14 00:36:45 -0500] nstielau1: sc077: Do return.inspect
[2012-12-14 00:39:28 -0500] kallistec: pretty sure that'll give you a LocalJumpError since return is a keyword for returning from a function.
[2012-12-14 00:41:22 -0500] sc077: ugh actuall it gives me a void value expression
[2012-12-14 00:45:10 -0500] sc077: #{return} does however give the LocalJumpError
[2012-12-14 00:55:25 -0500] sc077: anyone care to peek at my code block? https://gist.github.com/4281562
[2012-12-14 00:55:27 -0500] sc077: TIA
[2012-12-14 00:58:12 -0500] ssd7_: sc077: The problem is that search is going to return a truthy value
[2012-12-14 00:58:40 -0500] sc077: that's retarded :p
[2012-12-14 00:58:41 -0500] ssd7_: sc077: In Ruby only false and nil evaluate as false.
[2012-12-14 00:58:49 -0500] sc077: jj
[2012-12-14 00:58:58 -0500] ssd7_: search is going to return an empty array :)
[2012-12-14 00:59:17 -0500] sc077: ok, I can accommodate that
[2012-12-14 00:59:22 -0500] jhulten: So search('thing',
[2012-12-14 00:59:58 -0500] jhulten: So search('thing', 'query').empty?
[2012-12-14 01:00:36 -0500] sc077: jhulten: cool, I totally forgot about the nil/false rule ;)
[2012-12-14 01:09:14 -0500] prki: hi, do you put dependencies for all recipes in your metadata? I see some cookbooks just put the ones in default recipe
[2012-12-14 01:09:25 -0500] prki: is there some convention about this?
[2012-12-14 01:10:38 -0500] nstielau1: prki: Kinda depends what you are going for.  Putting them for all recipes is complete, but requires more cookbooks.  If you have a recipe that is more experimental, and depends on several cookbooks, you could choose to leave them out.
[2012-12-14 01:10:43 -0500] nstielau1: That's my take anyway
[2012-12-14 01:12:34 -0500] prki: I'm new to chef, it's seems like a mess
[2012-12-14 01:12:52 -0500] prki: I mean the whole cookbook management experience
[2012-12-14 01:14:57 -0500] sc077: wohoo if !(search(:hosts, "id:#{node[:hostname]}").empty?) fixed me right up
[2012-12-14 01:15:12 -0500] sc077: jhulten++
[2012-12-14 01:17:15 -0500] flaccid: prki: what issues you have there?
[2012-12-14 01:20:34 -0500] prki: nevermind :) it was a long day sorting out various cookbooks and their issues there are tons of forks, each with their own fixes and no one to pull them together
[2012-12-14 01:21:16 -0500] prki: the most annoying thing is that basic things like postgresql cookbook has bugs all over it
[2012-12-14 01:21:29 -0500] sc077: prki: http://berkshelf.com/ looks promising in that regards
[2012-12-14 01:22:22 -0500] sc077: prki: what bugs did you encounter in the postgresql cookbook?
[2012-12-14 01:22:41 -0500] prki: the last one was ruby recipe
[2012-12-14 01:22:56 -0500] prki: the way it's made messes up the whole run list order
[2012-12-14 01:23:03 -0500] sc077: I just used it to write a Trac cookbook and didn't hit any snags
[2012-12-14 01:23:26 -0500] prki: it works but not on clean install
[2012-12-14 01:23:27 -0500] sc077: I did only use the :server recipe though
[2012-12-14 01:23:38 -0500] prki: also I think it's restarting postgresql on every provision run
[2012-12-14 01:30:13 -0500] flaccid: prki: yes, people have fragmented cookbooks a lot all over the place where they should be submitting pull requests and contribute to the root source
[2012-12-14 01:30:13 -0500] flaccid: prki: there is a bug tracker as well and you can contrib back bug fixes
[2012-12-14 01:33:14 -0500] flaccid: prki: also checkout librarian in addition to berkshelf :)
[2012-12-14 01:33:55 -0500] prki: I
[2012-12-14 01:34:01 -0500] prki: I'm currently on librarian
[2012-12-14 01:34:50 -0500] prki: though berkshelf looks better for me
[2012-12-14 01:34:59 -0500] flaccid: i have not used berkshelf yet, but they seem to share a lot of similar functionality
[2012-12-14 01:35:28 -0500] prki: I see that berkshelf hides all your vendor cookbooks
[2012-12-14 01:35:44 -0500] prki: that's cool, I don't need them to polute my workspace
[2012-12-14 01:36:21 -0500] bluepojo: you can give a path as an option to berkshelf to put the cookbooks in a directory like librarian does
[2012-12-14 01:36:29 -0500] bluepojo: but most people don't need that
[2012-12-14 01:40:15 -0500] flaccid: i found libararian does all i need to 'package' a solution, e.g. https://github.com/rightscale-blueprints/linux_server
[2012-12-14 01:49:42 -0500] prki: btw, you use opscode issue tracker instead of github pull requests?
[2012-12-14 01:49:49 -0500] prki: which is better way to submit fixes?
[2012-12-14 01:56:23 -0500] flaccid: i guess contrib would be faster http://wiki.opscode.com/display/chef/How+to+Contribute+to+Opscode+Cookbooks
[2012-12-14 02:18:13 -0500] and311: Is anyone having trouble connecting to hosted chef right now?
[2012-12-14 02:19:05 -0500] and311: No one?
[2012-12-14 02:19:10 -0500] occupant: nope
[2012-12-14 02:20:02 -0500] jhulten: anyone using chefspec to test single cookbooks?
[2012-12-14 02:22:14 -0500] sc077: up for me
[2012-12-14 02:23:12 -0500] and311: thanks, I'll keep trying
[2012-12-14 02:35:09 -0500] carlp: Greetings all, having some depsolver issues with erchef - anyone around to help?
[2012-12-14 02:59:36 -0500] s01o: Hi
[2012-12-14 03:07:50 -0500] chefalli: Hi I need help with Deploy Revision Resource , Its not created symlinks to shared folder (my revision folder ends up having no sym links at all) here is my defination http://pastie.org/private/xmcagr6lu0gys3dgptgmw
[2012-12-14 03:23:39 -0500] s01o: if I have an lwrp called upload_config, and I want to call the resource from it in another lwrp, how would I do it?
[2012-12-14 04:26:51 -0500] Ravi_Nanjegowda: hi guys some help on the issue..I get "Private Key Missing 500", for http://localhsot:4040
[2012-12-14 04:29:52 -0500] khimera: i am getting the following error: Error executing action `restart` on resource 'service[mysql]'   i sign into the box and i can do a service mysql restart . running ubunut 12.04 precise
[2012-12-14 04:31:51 -0500] jtimberman: and311: if you experience issues with hosted chef, you can email support@opscode.com, too.
[2012-12-14 05:20:50 -0500] shraddha: hi guys!
[2012-12-14 05:21:48 -0500] shraddha: can anybody tell me how "notifies :request" actualy works..?
[2012-12-14 05:22:38 -0500] shraddha: i cudnt find any switch like :request on opscode page..
[2012-12-14 05:23:56 -0500] shraddha: bt m using "notifies :request {recipe to reboot windows}
[2012-12-14 05:24:31 -0500] shraddha: i have tried executing it.. its not workng..
[2012-12-14 07:56:16 -0500] madteckhead: What is the intended way to debug recipes that use databags, search, and other hosted features?
[2012-12-14 07:56:56 -0500] madteckhead: I've added a breakpoint to the cookbook in question, uploaded it and am attempting to run shef but it complains about all sorts of things as
[2012-12-14 07:57:16 -0500] madteckhead: databags aren't being read. (my assumption from something I've read).
[2012-12-14 07:58:02 -0500] madteckhead: It does not seem possible to set a breakpoint in these conditions. correct???
[2012-12-14 08:02:54 -0500] madteckhead: python dev would be super grateful for some tips!
[2012-12-14 08:19:22 -0500] paigethylamine: memcacheserver = search(:node, "role:Couchbase_Server").map {|n| n["network"]["interfaces"][node['network_interfaces']['private']]["addresses"].select { |address, data| data["family"] == "inet" }[0][0]}
[2012-12-14 08:19:26 -0500] paigethylamine: memcacheserver = search(:node, "roles:Couchbase_Server").map {|n| n["network"]["interfaces"][node['network_interfaces']['private']]["addresses"].select { |address, data| data["family"] == "inet" }[0][0]}
[2012-12-14 08:19:51 -0500] paigethylamine: whats the difference between the two of those and why does the second one work and the first one not even though the first one used to
[2012-12-14 08:20:47 -0500] paigethylamine: I really dont feel like changing this shit again unless its to some different software that doesn't require the user to deal with obscure discrepancies
[2012-12-14 08:21:14 -0500] paigethylamine: </arrogance>
[2012-12-14 08:23:31 -0500] paigethylamine: wait I just remembered something
[2012-12-14 08:24:00 -0500] paigethylamine: wtf yo
[2012-12-14 08:24:19 -0500] paigethylamine: I could have SWORE these two different search functionalities did the exact opposite
[2012-12-14 08:24:44 -0500] paigethylamine: I had ALL of this shit written just so that it worked and no its having me change role to roles
[2012-12-14 08:24:47 -0500] paigethylamine: what the fuck
[2012-12-14 08:25:28 -0500] joonas: whoa
[2012-12-14 08:26:21 -0500] paigethylamine: dude sorry but this is really annoying
[2012-12-14 08:26:38 -0500] paigethylamine: im not going to say I shouldnt have to fucking deal with this but seriously
[2012-12-14 08:26:41 -0500] paigethylamine: what the fuck
[2012-12-14 08:28:19 -0500] paigethylamine: at least tell me how you're able to come to terms with that because to me I really find it difficult to explain this kind of shit to people who want me to get this shit done on time which I can't really do if I keep having to deal with shit like this...
[2012-12-14 08:31:47 -0500] paigethylamine: actually
[2012-12-14 08:32:15 -0500] paigethylamine: maybe I fucked this up when I refactored it a week ago or so
[2012-12-14 08:32:42 -0500] paigethylamine: I wonder if it has something to do with what gets searched first in the run list and whether you use role or roles
[2012-12-14 08:33:31 -0500] paigethylamine: or maybe I accidently replaced everywhere I had used "roles" with role when I did a string replace..
[2012-12-14 08:38:11 -0500] paigethylamine: god
[2012-12-14 08:38:12 -0500] paigethylamine: damn
[2012-12-14 08:38:12 -0500] paigethylamine: it
[2012-12-14 08:38:14 -0500] paigethylamine: .
[2012-12-14 08:39:01 -0500] paigethylamine: sigh
[2012-12-14 08:41:44 -0500] paigethylamine: expanded run list..
[2012-12-14 08:49:35 -0500] madteckhead: i feel you pain
[2012-12-14 08:49:40 -0500] madteckhead: *your
[2012-12-14 08:49:46 -0500] paigethylamine: well its not so bad
[2012-12-14 08:49:51 -0500] paigethylamine: now that I understand why
[2012-12-14 08:50:05 -0500] paigethylamine: but I still am trying to figure out the advantage of the expanded vs non expanded
[2012-12-14 08:50:20 -0500] paigethylamine: er the point of expanded vs non expanded or the diff
[2012-12-14 08:51:01 -0500] Mithrandir: think nested roles
[2012-12-14 08:51:17 -0500] paigethylamine: well yeah I mean I remember the difference was specifically having to do with that
[2012-12-14 08:51:22 -0500] paigethylamine: and I used it for such
[2012-12-14 08:51:34 -0500] paigethylamine: like my Base role which isn't directly inherited by any nodes?
[2012-12-14 08:53:05 -0500] paigethylamine: it seems like it has more to do with roles that are applicable to my run list vs the run list of every node in chef
[2012-12-14 08:54:13 -0500] paigethylamine: I dont really understand why anybody would want that except maybe to make it a little more efficient except if you mess up your node attributes it wont ever work again
[2012-12-14 08:54:37 -0500] paigethylamine: mess up or delete them, there isn't a dry / first run state of chef client option or something to fix it?
[2012-12-14 08:55:02 -0500] madteckhead: such a steep learning curve with chef, struggling to figure out why node.run_state['nginx_configure_flags'] doesn't seem to be being in my recipe  and thus ngnix won't compile with stub status or ssl etc.
[2012-12-14 08:55:33 -0500] madteckhead: *being updated
[2012-12-14 08:55:59 -0500] paigethylamine: attribute precedence maybe
[2012-12-14 08:56:16 -0500] madteckhead: night 2 on this problem, can't debug with shef as using databags too
[2012-12-14 08:56:27 -0500] madteckhead: i'm overriding them in the role
[2012-12-14 08:56:42 -0500] madteckhead: which is level 10 in the precedence
[2012-12-14 08:56:54 -0500] paigethylamine: and when you reference node['nginx_configure_flags'] in shef -z is it nil?
[2012-12-14 08:57:10 -0500] paigethylamine: run shef -z on the node you're trying to run it on
[2012-12-14 08:58:06 -0500] madteckhead: well i put a breakpoint in where i want to check, and the ran shef, but because postgres (an earlier recipe) is getting data from databags and search via the hosted platform it breaks before i reach the breakpoint in shef
[2012-12-14 08:58:16 -0500] paigethylamine: btw night two, I would have at least tried doing this with a fresh vm by now ;)
[2012-12-14 08:58:22 -0500] madteckhead: yeah, i did shef -z
[2012-12-14 08:58:54 -0500] madteckhead: yeah, its getting to that stage but i feels like a windows reboot hack and not solving the problem
[2012-12-14 08:59:07 -0500] paigethylamine: lol
[2012-12-14 08:59:10 -0500] madteckhead: which is something to do with the nginx source recipe
[2012-12-14 08:59:31 -0500] madteckhead: so it sounds like ive been doing the right things tho
[2012-12-14 08:59:43 -0500] paigethylamine: whats the error your getting im just curious
[2012-12-14 08:59:55 -0500] madteckhead: is there anyway you know of to just run one recipe in the runlist?
[2012-12-14 09:00:23 -0500] madteckhead: If i could get to my breakpoint then id at least know the state of that node['nginx_configure_flags']
[2012-12-14 09:00:25 -0500] paigethylamine: yeah, make a separate environment, and then create an environment specific runlist for that role, then change the environment of the node to that environment
[2012-12-14 09:00:47 -0500] madteckhead: awesome, a fresh lead.
[2012-12-14 09:01:04 -0500] madteckhead: thanks - ill give it a go while i bring up another node :)
[2012-12-14 09:01:21 -0500] paigethylamine: had to do it a couple of times because I dont like messing around with the order of my runlists some of them are specific for a reason
[2012-12-14 09:01:43 -0500] paigethylamine: yeah paste the error too and I'll have a look I gotta grab a shower
[2012-12-14 09:01:59 -0500] madteckhead: yeah, im not sure it will even work so many things in this project
[2012-12-14 09:03:16 -0500] madteckhead: thanks, not so much an error as just not picking up the http_stub_status_module recipe in the nginx cookbook.
[2012-12-14 09:03:54 -0500] madteckhead: ill gist my current nginx::source recipe if you could have a quick look and see anything out of sorts that would be ace!
[2012-12-14 09:03:57 -0500] paigethylamine: I dont want to be the one to give bad advice but Ive had luck with deleting the cache before
[2012-12-14 09:04:07 -0500] paigethylamine: which might be why I have problems like I have
[2012-12-14 09:04:13 -0500] paigethylamine: /var/cache/chef
[2012-12-14 09:04:17 -0500] paigethylamine: /var/chef/cache
[2012-12-14 09:04:32 -0500] paigethylamine: then also there /var/lib/chef but I haven't looked through that one much.
[2012-12-14 09:05:31 -0500] paigethylamine: I guess to be fair I was unaware of the difference between the runlist and expanded runlist which I still need to figure out after my shower
[2012-12-14 09:06:49 -0500] madteckhead: https://gist.github.com/b7b2c6cfc72454d2cd1f
[2012-12-14 09:07:30 -0500] madteckhead: okay, ill give that a go too. cheers.
[2012-12-14 09:08:09 -0500] madteckhead: there is the gist, the override attributes are down the bottom. I also commented out ohai as a last ditch resort didn't get me far.
[2012-12-14 09:15:11 -0500] madteckhead: yep, no luck on clearing the cache, onto making a new env
[2012-12-14 09:29:02 -0500] paigethylamine: ;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~;2~45555555555555555555555555555
[2012-12-14 09:30:03 -0500] paigethylamine: kitteh iz helping wif mai chef recipeez
[2012-12-14 09:30:19 -0500] paigethylamine: "meow!"
[2012-12-14 09:31:52 -0500] paigethylamine: wtf the cat like went into the hallway then came back twice until I followed her then when i followed her she climbed into the liter pan >_>
[2012-12-14 09:33:19 -0500] paigethylamine: strange critter.
[2012-12-14 09:33:52 -0500] joonas: paigethylamine: I think you're losing it
[2012-12-14 09:34:19 -0500] paigethylamine: you think?
[2012-12-14 09:34:31 -0500] paigethylamine: dude its like 2 am and i have to be at work at 8 :)
[2012-12-14 09:34:56 -0500] joonas: paigethylamine: I know how you feel
[2012-12-14 09:35:05 -0500] joonas: it's 3:30am and I have to be watching the hobbit at 10:30 am
[2012-12-14 09:35:07 -0500] joonas: :/
[2012-12-14 09:35:11 -0500] paigethylamine: lol
[2012-12-14 09:35:12 -0500] joonas: I feel for you bro man
[2012-12-14 09:35:25 -0500] paigethylamine: harsh
[2012-12-14 09:35:37 -0500] joonas: sorry, I just graduated, I figured I'd cut myself some slack ;)
[2012-12-14 09:36:15 -0500] paigethylamine: yeah Im not too stressed really
[2012-12-14 09:36:39 -0500] paigethylamine: Im glad I understand this search thing better now I really wish I had taken the time to read about it first hand but
[2012-12-14 09:36:49 -0500] joonas: who needs manuals
[2012-12-14 09:36:50 -0500] paigethylamine: Im not really the kind of person to read about something first hand in depth for no reason
[2012-12-14 09:37:39 -0500] paigethylamine: well
[2012-12-14 09:37:47 -0500] paigethylamine: Im not exactly working on this project with anybody else
[2012-12-14 09:38:00 -0500] paigethylamine: its my sole responsibility to see to it that its done the way I want it done
[2012-12-14 09:38:34 -0500] paigethylamine: which I had the idea that I was going to do this so well that somebody else could easily pick up my work if I got hit by a bus
[2012-12-14 09:39:45 -0500] paigethylamine: but no this past year of working on chef stuff and learning ruby and trying to figure out the best way to do things has taken the extent of what I've learned in my career which unfortunately aren't all that trivial
[2012-12-14 09:40:34 -0500] paigethylamine: so Ive built a highly scalable server environment with multi master everything just about and sharding and multimaster for shards even
[2012-12-14 09:41:47 -0500] paigethylamine: between my boss and i we've both had a hand in designing it and signing off on whats worth while and not
[2012-12-14 09:42:13 -0500] joonas: man
[2012-12-14 09:42:17 -0500] paigethylamine: but between the two of us he doesn't have much in regards to unix expertise or ruby experience for that matter
[2012-12-14 09:43:01 -0500] paigethylamine: hes probably the only one who can appreciate it as much as I do, not sure who else can let alone be able to pick up where I left off if I got hit by a bus.
[2012-12-14 09:43:54 -0500] paigethylamine: I really dont think there are too many people who are first gonna go read http://wiki.opscode.com/display/chef/Search and go oooo expanded run lists vs node run list
[2012-12-14 09:44:14 -0500] madteckhead: haha i wonder about the bus issue too takes a while to wrap your head around it
[2012-12-14 09:44:44 -0500] paigethylamine: "that makes perfect sense! not to mention the clever verbage (plural vs singular) they use to dictate between the two--jumped right out at me"
[2012-12-14 09:45:21 -0500] madteckhead: so i created a debug environment with role[base] and recipe[nginx] but shef is not picking up my overrides in the debug.rb env file
[2012-12-14 09:45:40 -0500] paigethylamine: and you set the node's environment to the debug environment?
[2012-12-14 09:46:06 -0500] paigethylamine: like if you do knife search :node "nodename" or whatever the syntax is
[2012-12-14 09:46:19 -0500] paigethylamine: does it say the env is set to the debug env or default still ?
[2012-12-14 09:46:35 -0500] madteckhead: 'debug' is the name of the env i created since its just for debugging now
[2012-12-14 09:46:56 -0500] paigethylamine: EDITOR="sed -e 's/_default/Production_Rackspace/' -i " knife node edit $(hostname)
[2012-12-14 09:47:06 -0500] madteckhead: yes, it is as i set it in the manage.opscode.com
[2012-12-14 09:47:11 -0500] madteckhead: console
[2012-12-14 09:47:13 -0500] paigethylamine: thats how I used to automate changing my evironment xD
[2012-12-14 09:47:30 -0500] paigethylamine: oh you're using cloud
[2012-12-14 09:47:39 -0500] madteckhead: yep
[2012-12-14 09:48:17 -0500] madteckhead: so im running shef -z logged into an ec2 instance
[2012-12-14 09:48:47 -0500] madteckhead: does that change something? figure debugging this is still the same process
[2012-12-14 09:49:03 -0500] paigethylamine: nah not really ive heard of minor differences
[2012-12-14 09:49:10 -0500] paigethylamine: i only have experience with private hosted
[2012-12-14 09:49:56 -0500] paigethylamine: well its hard to say, so you're saying the recipe isn't running at all ? when you do chef-client -l debug does it give you any info thats helpful
[2012-12-14 09:51:22 -0500] madteckhead: ohhh progress!
[2012-12-14 09:51:39 -0500] paigethylamine: you know what I would do is tar -cvf backup.tar /var/lib/chef /var/cache/chef /var/chef/cache
[2012-12-14 09:51:51 -0500] paigethylamine: and then rm -r those three then re-run chef-client -l debug
[2012-12-14 09:52:20 -0500] madteckhead: although nginx::default is meant to pickup attribute install_method (or soething) and if set to 'source' run that it doesn't seem to be working
[2012-12-14 09:52:29 -0500] paigethylamine: kind of a reverse engineer approach though im not sure that accounts for all the data you would want to back up
[2012-12-14 09:52:43 -0500] madteckhead: but i set the recipe on the runlist to nginx::source and i get to my breakpoint
[2012-12-14 09:52:48 -0500] paigethylamine: yeah it could just be that recipe sux
[2012-12-14 09:52:53 -0500] paigethylamine: I remember that cookbook
[2012-12-14 09:53:00 -0500] paigethylamine: I use it, I modified it for myself too
[2012-12-14 09:53:10 -0500] paigethylamine: try just applying the source recipe thats in there
[2012-12-14 09:53:50 -0500] madteckhead: it seems full of bugs there is 20 pull requests open. eek.
[2012-12-14 09:54:03 -0500] paigethylamine: oh yeah there's tons of bugs you get used to it :)
[2012-12-14 09:54:15 -0500] madteckhead: im actually using the source recipe from one of those pulls or forks
[2012-12-14 09:54:18 -0500] paigethylamine: none of this stuff will ever be perfect
[2012-12-14 09:54:39 -0500] paigethylamine: unless you make it perfect
[2012-12-14 09:55:11 -0500] paigethylamine: if you like to compile stuff from source...
[2012-12-14 09:55:13 -0500] paigethylamine: 1 sec
[2012-12-14 09:55:18 -0500] madteckhead: yeah, i was first attracted as i was like - o wow, i can focus on development, and just use others recipes to deploy infrastructure but it hasn't worked out that way. I think i would have saved time had i written my own.
[2012-12-14 09:55:40 -0500] paigethylamine: https://github.com/paigeadele/erraticOS/blob/master/usr/chef-repo/cookbooks/IRCd/recipes/inspircd.rb
[2012-12-14 09:55:44 -0500] madteckhead: would cover less cases, but id be better at writing them by now :)
[2012-12-14 09:55:48 -0500] paigethylamine: I highly reccomend writing your own
[2012-12-14 09:55:59 -0500] paigethylamine: I love compiling stuff from scratch
[2012-12-14 09:56:40 -0500] madteckhead: what am i looking at?
[2012-12-14 09:56:47 -0500] paigethylamine: honestly it'll take a little more time to get used to and to deliver but its well worth it
[2012-12-14 09:56:55 -0500] paigethylamine: a recipe I wrote for compiling inspircd
[2012-12-14 09:57:39 -0500] paigethylamine: im trying to make it totally attribute driven so that I can implement inspircd or ircd hybrid or anything else from the same sets of attributes nearly if not entirely
[2012-12-14 09:57:55 -0500] paigethylamine: (alot of work and a waste of time)
[2012-12-14 09:58:13 -0500] paigethylamine: but the point is
[2012-12-14 09:58:31 -0500] paigethylamine: im good enough with writing my own, I've written a dozen or so for work that are really complex
[2012-12-14 09:58:47 -0500] paigethylamine: and I know exactly whats wrong with them and whats broken and how to fix them
[2012-12-14 09:59:09 -0500] paigethylamine: and I know they'll never change unless I want them to because they're not community cookbooks, they're mine.
[2012-12-14 09:59:26 -0500] paigethylamine: although if it wasn't for community cookbooks, I'd never gotten this far
[2012-12-14 09:59:36 -0500] paigethylamine: so just something to keep in mind I guess.
[2012-12-14 10:00:19 -0500] madteckhead: cheers, yes, im learning a lot and i can see the benefit. im the technical director on this project so its my call -
[2012-12-14 10:01:09 -0500] paigethylamine: I work for a small startup, web applications engineer, dba, systems architect
[2012-12-14 10:01:32 -0500] madteckhead: let me know if your interested in some lite tutoring on opscode stuff. I just need to get everything fixed up and need someone to accelerate my learning
[2012-12-14 10:01:34 -0500] paigethylamine: I have a very special and broad set of skills
[2012-12-14 10:01:36 -0500] paigethylamine: lol
[2012-12-14 10:01:48 -0500] paigethylamine: mostly just crazy though
[2012-12-14 10:02:00 -0500] madteckhead: Im heading in that direction too thanks for the pointers always helps to know debugging tricks
[2012-12-14 10:02:08 -0500] madteckhead: i like the custom env for a node one.
[2012-12-14 10:02:27 -0500] paigethylamine: crazy and I have "no life" im happy with the way my "life" is
[2012-12-14 10:04:07 -0500] madteckhead: thats all that matters IMHO
[2012-12-14 10:04:56 -0500] madteckhead: okay, im at my break  i step down a bit then am trying to see the value of node.run_state['nginx_configure_flags']
[2012-12-14 10:05:14 -0500] madteckhead: so i type that in the debug prompt and get back nil
[2012-12-14 10:05:46 -0500] paigethylamine: yeah that means its not getting set
[2012-12-14 10:05:51 -0500] madteckhead: node.run_state give a heap of stuff but nothing called nginx_configure_flags
[2012-12-14 10:05:52 -0500] paigethylamine: node.run_state though
[2012-12-14 10:05:54 -0500] paigethylamine: that doesnt seem right
[2012-12-14 10:06:10 -0500] paigethylamine: I woudl think its supposed to be node['nginx_configure_flags']
[2012-12-14 10:06:24 -0500] paigethylamine: im not sure what that run_state property is
[2012-12-14 10:06:38 -0500] paigethylamine: unless thats another way of saying
[2012-12-14 10:06:50 -0500] paigethylamine: node['run_state']['nginx_configure_flags']
[2012-12-14 10:07:10 -0500] paigethylamine: eg an object with a hash
[2012-12-14 10:07:14 -0500] madteckhead: yeah, i hadnt see it before either
[2012-12-14 10:07:18 -0500] paigethylamine: or a hash with a hash
[2012-12-14 10:08:07 -0500] madteckhead: the source calls all the modules, which append string object (compule flags) to node.run_state['nginx_configure_flags']
[2012-12-14 10:08:45 -0500] madteckhead: so i get the idea but it seem nothing is getting set so its wrong or broken  perhaps ill change it to what you suggested
[2012-12-14 10:08:51 -0500] paigethylamine: a little piece of advice that I learned late btw
[2012-12-14 10:08:52 -0500] paigethylamine: https://github.com/opscode-cookbooks/nagios
[2012-12-14 10:09:02 -0500] paigethylamine: get your community cookbooks from there
[2012-12-14 10:09:16 -0500] paigethylamine: there's another repo that is "deprecated"
[2012-12-14 10:10:13 -0500] paigethylamine: include_recipe "nagios::client_#{node['nagios']['client']['install_method']}"
[2012-12-14 10:10:32 -0500] paigethylamine: wow there starting to integrate nrpe stuff
[2012-12-14 10:10:35 -0500] paigethylamine: thats tight
[2012-12-14 10:11:10 -0500] madteckhead: ohhh yeah, this is rad now i can inspect the values of everything.
[2012-12-14 10:12:58 -0500] madteckhead: interesting
[2012-12-14 10:13:04 -0500] madteckhead: what is nagios
[2012-12-14 10:13:44 -0500] madteckhead:  o yeah, monitoring - looked at that a while back
[2012-12-14 10:14:41 -0500] madteckhead: my plan was to do something similar with logstash
[2012-12-14 10:15:29 -0500] madteckhead: anyway, i have to call it a night. was up till 5am frustrated by this problem. happy to be making traction. thanks pai
[2012-12-14 10:16:42 -0500] paigethylamine: root@chefserver-1:~/chef-repo/cookbooks# find .* -name "*.rb" -exec sed -e "s/role:/roles:/" -i {} \;
[2012-12-14 10:17:36 -0500] paigethylamine: made a commit before I did so I can reset hard if Im not happy
[2012-12-14 10:17:38 -0500] paigethylamine: lol
[2012-12-14 10:17:51 -0500] paigethylamine: looks like everything it changed though is about right
[2012-12-14 10:19:20 -0500] madteckhead: nice
[2012-12-14 10:19:54 -0500] madteckhead: should have seen the regex i was using to fix imports specified incorrectly the other day
[2012-12-14 10:20:04 -0500] madteckhead: did the job.
[2012-12-14 10:20:15 -0500] paigethylamine: oh man Ive made some crazy ones
[2012-12-14 10:20:29 -0500] paigethylamine: you know whats funny is I've used regex to refactor a few bash scripts
[2012-12-14 10:20:50 -0500] madteckhead: lol
[2012-12-14 10:20:54 -0500] paigethylamine: you can do some things with regex that are just plain nuts
[2012-12-14 10:21:14 -0500] madteckhead: i wish i could stay and chat, but i can hardly keep my eyes open.
[2012-12-14 10:21:25 -0500] madteckhead: thanks,  see you soon (im sure)
[2012-12-14 10:21:47 -0500] madteckhead: <:o)
[2012-12-14 10:22:01 -0500] paigethylamine: yeah I need to go too
[2012-12-14 10:22:03 -0500] paigethylamine: catch you later :)
[2012-12-14 10:39:27 -0500] JetForMe: I'm a first-time Chef user going through the installtion steps. I've successfully setup my local OS X machine as a workstation, and am trying to bootstratp an Ubuntu 12.04 node. I get this error:
[2012-12-14 10:39:30 -0500] JetForMe: MyMachine:chef-repo me$ knife bootstrap <IP hidden> -x <user hidden> -P <password hidden> --sudo
[2012-12-14 10:39:31 -0500] JetForMe: Bootstrapping Chef on <IP hidden>
[2012-12-14 10:39:31 -0500] JetForMe: ERROR: ArgumentError: invalid byte sequence in UTF-8
[2012-12-14 10:40:20 -0500] JetForMe: Anyone know how I can fix this? Thanks!
[2012-12-14 10:42:03 -0500] sarguru_: Hi, need an help. Any puppet to chef tutorial available
[2012-12-14 11:09:12 -0500] paigethylamine: please help
[2012-12-14 11:20:48 -0500] jimjimovich: anyone know where I can find instructions for installing Chef Server on Ubuntu 12.04?
[2012-12-14 11:22:16 -0500] Virunga: jimjimovich: on opscode's web site obviously. Use chef-solo.
[2012-12-14 11:23:03 -0500] Virunga: jimjimovich: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2012-12-14 11:26:07 -0500] jimjimovich: according to the docs, it only supports to 11.04, that's why I was looking for instructions for 12.04
[2012-12-14 11:26:20 -0500] paigethylamine: help I just smashed my mouse
[2012-12-14 11:26:28 -0500] paigethylamine: how do I use osx without one
[2012-12-14 11:28:23 -0500] paigethylamine: theres really not any fucking way to fix this shit is there
[2012-12-14 11:36:07 -0500] RoboticCheese: jimjimovich: If you're trying to install via apt, it looks like there is a repo for 12.04 now, though not mentioned in the docs.
[2012-12-14 11:36:11 -0500] Virunga: jimjimovich: i read that chef client is supported in ubuntu 10.04+, and it say nothing about chef server. Thus you can install chef-solo with gem install chef, then install chef server. Tell me if i'm wrong.
[2012-12-14 11:37:40 -0500] jimjimovich: Virunga:  This is why I asked http://wiki.opscode.com/display/chef/Installing+Chef+Server
[2012-12-14 11:38:52 -0500] Virunga: jimjimovich: yes, it says from the repo. Don't use the repo!
[2012-12-14 11:40:13 -0500] jimjimovich: Says the same thing for the bootstrap option that you sent me ... but I'll try anyway.
[2012-12-14 11:40:42 -0500] jimjimovich: thanks for the help!
[2012-12-14 11:41:33 -0500] Virunga: jimjimovich: yes, it says it works with that platforms and possibly other. You try, and good luck.
[2012-12-14 11:43:25 -0500] paigethylamine: you guys dont know what you're talking about that will break everything
[2012-12-14 11:43:49 -0500] Virunga: paigethylamine: trolling today?
[2012-12-14 11:44:01 -0500] paigethylamine: IM just sayin
[2012-12-14 11:44:06 -0500] paigethylamine: do what you wnat
[2012-12-14 11:44:15 -0500] Virunga: Thanks.
[2012-12-14 11:44:51 -0500] paigethylamine: gl
[2012-12-14 11:46:55 -0500] paigethylamine: have fun rebuilding everything from scratch when you realize how wrong you were
[2012-12-14 11:49:16 -0500] sarguru_: Hi I need some help for master chefs here about the work flow to follow in chef-land. I am a chef newbie trying hard to shift my puppet habits so please excuse if my question is lame
[2012-12-14 11:49:55 -0500] sarguru_: Whenever I add a node to my chef server I create it first with knife client create
[2012-12-14 11:50:07 -0500] sarguru_: then knife node create and add it a role
[2012-12-14 11:50:09 -0500] paigethylamine: you should probably not
[2012-12-14 11:50:23 -0500] paigethylamine: I fucked myself over good with it
[2012-12-14 11:50:34 -0500] sarguru_: paigethylamine: Is there any other way I could do it
[2012-12-14 11:50:46 -0500] paigethylamine: you might go ask someone in the puppet channel if they've gotten as fucked in the ass by puppet
[2012-12-14 11:51:52 -0500] sarguru_: paigethylamine: Im asking about adding the node to the chef-server
[2012-12-14 11:52:09 -0500] sarguru_: Is there any defined work flow, guide lines or docs that I could follow
[2012-12-14 11:52:51 -0500] paigethylamine: no actually
[2012-12-14 11:53:18 -0500] paigethylamine: thats part of the problem
[2012-12-14 11:53:45 -0500] sarguru_: mmm
[2012-12-14 11:54:02 -0500] paigethylamine: what you should be thinking about is what do you do when chef server just stops working
[2012-12-14 11:54:09 -0500] paigethylamine: such as various aspects of search cease to work
[2012-12-14 11:54:13 -0500] paigethylamine: that you rely on
[2012-12-14 11:54:18 -0500] paigethylamine: what do you do then
[2012-12-14 11:54:23 -0500] sarguru_: mmm
[2012-12-14 11:54:41 -0500] paigethylamine: 1. you can look like an asshole for it and say I dont fuckin know and go to a fucking channel where nobody else knows
[2012-12-14 11:55:00 -0500] paigethylamine: or 2. you can stay up all night and then go to work the next day then stay up all night again trying to figure it out
[2012-12-14 11:55:35 -0500] paigethylamine: and if you're me, I have a really short temper and very little patience, destroy really expensive computers by throwing them at the wall
[2012-12-14 11:56:04 -0500] paigethylamine: and wonder why you can do that yet somehow don't have the strength to take a razor blade and cut deep enough to loose a lot of blood and die.
[2012-12-14 11:57:21 -0500] paigethylamine: telling you dont fuckin do it you'll just end up making up excuses for "why its not done" and spending countless hours outside of work trying to make it work as well as possible for people who honestly don't fucking care
[2012-12-14 11:58:56 -0500] paigethylamine: seriously, nobody cares you're wasting your time if you think you're going to do yourself or anybody else any favors by using this software versus, just copy and pasting the shit and using a bash script and a cron daemon... and maybe ssh keys.
[2012-12-14 11:59:51 -0500] paigethylamine: at least with those things when they break, its usually bad enough that people /do/ care and the shit gets fixed.
[2012-12-14 12:01:29 -0500] zts: wow.
[2012-12-14 12:01:47 -0500] paigethylamine: wow what you fucking cunt
[2012-12-14 12:01:56 -0500] paigethylamine: you got something to fucking say
[2012-12-14 12:03:12 -0500] paigethylamine: sorry
[2012-12-14 12:03:20 -0500] paigethylamine: Im gonna go walk a mile in the rain and try to get sick
[2012-12-14 12:03:57 -0500] zts: sarguru_: yes, there are other ways you can add new nodes to your Chef server
[2012-12-14 12:04:24 -0500] zts: sarguru_: are you just trying to learn what the options are, or are there particular things you don't like about your current method?
[2012-12-14 12:07:07 -0500] sarguru_: zts:  I just want to know what are the other ways.
[2012-12-14 12:08:16 -0500] sarguru_: zts: Like I authenticate clients from a particular subnet and allow them to be added automatically in puppet.
[2012-12-14 12:08:32 -0500] sarguru_: zts: Instead of creating the clients and copying the pem into the client
[2012-12-14 12:08:54 -0500] sarguru_: zts: Like whats the generalized/optimized automated method
[2012-12-14 12:10:22 -0500] zts: sarguru_: there's nothing based on network ACLs, so the simplest automated method is to drop the validation.pem onto your new server
[2012-12-14 12:10:41 -0500] zts: sarguru_: if chef-client has that, it can register a new client with the chef server, and then use that to create the new node
[2012-12-14 12:11:11 -0500] sarguru_: zts: Ok cool. Thats cool too
[2012-12-14 12:11:31 -0500] zts: sarguru_: that approach seems to be fairly common, the down side is that anyone with your validation.pem can register new clients on your chef server
[2012-12-14 12:11:32 -0500] sarguru_: zts: After that editing node's run list is to be done manually right?
[2012-12-14 12:11:51 -0500] jimjimovich: Virunga: seems to have worked. thanks!
[2012-12-14 12:11:58 -0500] sarguru_: zts: Yeah. But I don't think Im gonna throw away my validation.pem publicly
[2012-12-14 12:12:04 -0500] Virunga: jimjimovich: ;).
[2012-12-14 12:12:06 -0500] zts: sarguru_: the chef-client cookbook has got a recipe to remove it for you after the client has registered, but it is also good practice to rotate your validation.pem from time to time
[2012-12-14 12:12:26 -0500] zts: sarguru_: once the node is registered, you can edit its run list manually - or, the first time you run chef-client you can pass it some json
[2012-12-14 12:12:47 -0500] zts: sarguru_: the json you use can specify the run list, along with any other node attributes you want to set - and those will get saved back to the chef server
[2012-12-14 12:12:52 -0500] sarguru_: zts: Cool. Thanks a lot man.
[2012-12-14 12:13:47 -0500] zts: sarguru_: no problem
[2012-12-14 12:13:56 -0500] zts: sarguru_: the other one to point out, in case you haven't seen it, is "knife bootstrap"
[2012-12-14 12:14:23 -0500] zts: sarguru_: you point it at a machine that has been installed, but doesn't have chef-client on it yet.  It will take care of installing chef-client, configuring it appropriately, and setting a run list you give on the command line
[2012-12-14 12:14:37 -0500] zts: sarguru_: it's still a manual process, but would streamline the steps you're currently doing by hand
[2012-12-14 12:15:26 -0500] sarguru_: zts: Right and probably an bash script with loop might even help I guess
[2012-12-14 12:16:23 -0500] sarguru_: zts: I like the knife-bootstrap method better :)
[2012-12-14 12:19:01 -0500] zts: sarguru_: :) there's certainly a lot of different ways to do it, and reasons to like each of them
[2012-12-14 12:19:48 -0500] sarguru_: zts: Haha true :) so it goes with all these power tools :)
[2012-12-14 12:20:55 -0500] zts: indeed :)
[2012-12-14 12:26:37 -0500] xerxas: Hi, anyone using the chef-server cookbook to deploy a chef-server ? I've used it, and it deployed a chef-server 11 alpha. I sometimes have "Error Syncing Cookbooks" on chef-client, with debug I see Bookshelf answers a 404 , but I don't know what is bookshelf
[2012-12-14 12:26:56 -0500] xerxas: anyone had this ? any workaround ? how do you deploy a 10.16.2 chef-server ?
[2012-12-14 12:27:07 -0500] xerxas: also, is it related to chef-server 11 ?
[2012-12-14 12:30:51 -0500] blitzrage: xerxas: I'm working on building a local chef-server with the cookbook now in vagrant, I'll watch it run and see what version it installs
[2012-12-14 12:31:08 -0500] leifmadsen: i don't immediately see an attribute to set the minor/major version
[2012-12-14 12:31:25 -0500] leifmadsen: oh man, getting up at 5:30am is going to end up being a bad idea today
[2012-12-14 12:32:58 -0500] leifmadsen: xerxas: also, which recipe are you using to install?
[2012-12-14 12:34:36 -0500] leifmadsen: just finished installing, and I get version 10.16.2
[2012-12-14 12:34:44 -0500] leifmadsen: I'm using chef-server::rubygems-install
[2012-12-14 12:39:17 -0500] xerxas: leifmadsen: I used default.rb from https://github.com/opscode-cookbooks/chef-server
[2012-12-14 12:39:21 -0500] xerxas: there is only one recipe
[2012-12-14 12:39:41 -0500] leifmadsen: xerxas: there are multiple recipes
[2012-12-14 12:39:58 -0500] leifmadsen: oh disregard
[2012-12-14 12:40:18 -0500] leifmadsen: that is a different version from opscode-cookbooks than is being distributed with 'knife cookbook site download'
[2012-12-14 12:40:21 -0500] xerxas: I think you used the old cookbook
[2012-12-14 12:40:33 -0500] xerxas: ah , right
[2012-12-14 12:40:36 -0500] leifmadsen: well, I used the released version
[2012-12-14 12:40:47 -0500] xerxas: I'm using the git version, you're using the vendored version ,which I might want to use ;)
[2012-12-14 12:40:47 -0500] leifmadsen: you need you set node['chef-server']['version'] I think
[2012-12-14 12:41:06 -0500] leifmadsen: default must be latest and greatest(?)
[2012-12-14 12:41:09 -0500] xerxas: yes, and also checksum, but I need to find the version I want to use
[2012-12-14 12:41:20 -0500] xerxas: leifmadsen: yes, it's the case
[2012-12-14 12:41:27 -0500] xerxas: leifmadsen: do you install chef-server on ec2 ?
[2012-12-14 12:41:47 -0500] xerxas: I also had a problem with my first installation where public_ipv4 != local_ipv4
[2012-12-14 12:41:48 -0500] leifmadsen: I have
[2012-12-14 12:41:58 -0500] leifmadsen: I'm doing it in vagrant right now
[2012-12-14 12:42:11 -0500] xerxas: I changed node['chef-server']['api_fqdn'] to public ipv4
[2012-12-14 12:42:44 -0500] xerxas: but when I knife cookbook upload, I had some error that I tracked to the server annoucing addresses on it private dns name
[2012-12-14 12:48:50 -0500] moos3: anyone have a slick way of bootstrapping a node from the rhel kickstart file ?
[2012-12-14 13:10:32 -0500] MoreTea: Hello, I've got a question about overriding a template of an upstream cookbook.
[2012-12-14 14:07:09 -0500] xerxas: is it possible to delete an organization on hosted chef ?
[2012-12-14 14:10:27 -0500] jf0lwers: is it possible to reload an attributes file durring compile time?
[2012-12-14 14:22:02 -0500] bubuz: hi guys, am using a chef collectd recipe but i also need to pull in a git repo
[2012-12-14 14:22:13 -0500] bubuz: how can I do that in a recipe?
[2012-12-14 14:27:07 -0500] kvs: bubuz: http://wiki.opscode.com/display/chef/Deploy+Resource maybe?
[2012-12-14 14:35:14 -0500] itchyouch: Is there a cookbook/resource/provider that overrides the service provider to utilize starting and stopping daemons from supervisor rather than the sysV/upstart scripts?
[2012-12-14 14:35:22 -0500] gchristensen: is it possible to tell chef's why-run formatter to not output what is up to date?
[2012-12-14 14:47:49 -0500] BK_man: Hi! A general question: is there a way to group nodes in chef? I need to create and manage a lot of Cassandra multi-node clusters. My starting point is: all VMs are allocated from cloud and bootstrapped with Chef client and have passwordless root access from a host where I run knife. What to do next? I need to assign specific nodes to specific Cassandra clusters. How can I do that?
[2012-12-14 14:48:33 -0500] spox: BK_man: group them in environments?
[2012-12-14 14:49:13 -0500] BK_man: spox: is there a better way to do that?
[2012-12-14 14:50:01 -0500] spox: BK_man: well that seems like the most straight forward approach
[2012-12-14 14:50:07 -0500] spox: what issues do you see with it?
[2012-12-14 14:51:20 -0500] BK_man: spox: I need not only deploy-and-forget my Cassandra clusters but manage them afterwards. Can I update an environment from a recipe? Can I get a list of nodes in given environment?
[2012-12-14 14:52:27 -0500] spox: 1. why would the nodes be updating the environment? 2. yes
[2012-12-14 14:54:50 -0500] BK_man: spox: 1. this was a general question for master-slave topologies of nodes. Not a Cassandra use case, but still a question
[2012-12-14 14:57:40 -0500] zts: BK_man: depending on what you need to accomplish, roles or node attributes could both do the job
[2012-12-14 15:00:52 -0500] zts: BK_man: in both cases, you could search to find nodes that had been assigned a particular role, or had a particular attribute set
[2012-12-14 15:02:53 -0500] BK_man: zts: how a particular workflow for complex deployment creation should look like in that case? should I assign attributes with knife and fire a recipe on master node? who will run chef-client on slave nodes in that case?
[2012-12-14 15:09:25 -0500] zts: BK_man: there are lots of different ways to do it - depends on exactly what changes you need to apply, how they need to be coordinated, etc.  You might need to look at tools to help with 'orchestration', like RunDeck, mcollective, etc
[2012-12-14 15:10:33 -0500] BK_man: zts: yep, that's what I need. Any idea where to get a comprehensive list of orchestration tools for Private Chef server installation?
[2012-12-14 15:13:16 -0500] paulherbosch: hi, newbie question about upgrading chef on nodes: I upgraded my chef server and local chef gem on my workstation from 10.12.0 to 10.16.2 without a problem. is there a need and/or a way to upgrade the chef rpm on my nodes (all are centos 6.3)
[2012-12-14 15:14:40 -0500] paulherbosch: when bootstrapping a new centos node now, the chef 10.16.2 rpm gets installed
[2012-12-14 15:15:12 -0500] paulherbosch: I'm wondering if it is necessary to upgrade the chef rpms on nodes currently running chef version 10.12.0
[2012-12-14 15:15:31 -0500] paulherbosch: and if so, what the easiest way is to do this
[2012-12-14 15:16:12 -0500] spox: paulherbosch: omnibus-updater cookbook should help
[2012-12-14 15:16:25 -0500] paulherbosch: thx! I'll check it out right away
[2012-12-14 15:22:07 -0500] zts: BK_man: not really, sorry!
[2012-12-14 15:22:32 -0500] BK_man: zts: thank anyway! good suggestion
[2012-12-14 15:27:37 -0500] jwitrick: is it possible to call an 'include_recipe' line from with in a chef resource ?
[2012-12-14 15:28:24 -0500] moos3: anyone using chef 10 with ruby 1.9.3 ?
[2012-12-14 15:29:55 -0500] gyre007: hey cheffers....havent been here for ages...
[2012-12-14 15:30:52 -0500] gyre007: moos3: I only using 1.9.3 on my workstation....otherwise I use omnibus install
[2012-12-14 15:31:01 -0500] robbkidd: Sooo... I'm trying to get my brain wrapped around the postgresql and database cookbooks.
[2012-12-14 15:31:07 -0500] gyre007: knife works without any problems on 1.9.3
[2012-12-14 15:31:17 -0500] gyre007: robbkidd: opscode ones ?
[2012-12-14 15:31:28 -0500] robbkidd: gyre007: Yep
[2012-12-14 15:31:39 -0500] gyre007: are you using omnibus chef ?
[2012-12-14 15:31:55 -0500] robbkidd: I don't think so.
[2012-12-14 15:32:24 -0500] gyre007: how did you install chef on the node(s) ?
[2012-12-14 15:32:41 -0500] moos3: gyre007 i'm having issues installing chef-server on rhel 6 with ruby 1.9.3-p327
[2012-12-14 15:33:12 -0500] robbkidd: gyre007: A knife bootstrap command.
[2012-12-14 15:33:50 -0500] gyre007: robbkidd: can you gist the command you run pls ?
[2012-12-14 15:34:03 -0500] robbkidd: It's a one-liner. Needs a gist?
[2012-12-14 15:34:03 -0500] gyre007: moos3: what kind of issues ?
[2012-12-14 15:34:10 -0500] gyre007: nah...doesnt need
[2012-12-14 15:34:14 -0500] gyre007: just copy paste here
[2012-12-14 15:34:38 -0500] robbkidd: knife bootstrap [hostname] -x vagrant -d ubuntu12.04-gems --sudo -N $1 -i ~/.ssh/vagrant -E [environment] -r "role[chef-client]"
[2012-12-14 15:35:18 -0500] robbkidd: Obviously working on getting things operational in Vagrant machines.
[2012-12-14 15:35:27 -0500] gyre007: can you list this please ? ls -ltr ~/.chef/bootstrap/
[2012-12-14 15:35:37 -0500] gyre007: I just want to see what bootstrap script youre using
[2012-12-14 15:36:16 -0500] moos3: gyre007 https://gist.github.com/a3617f462f07a6da8f2a
[2012-12-14 15:36:20 -0500] moos3: thats the error i'm getting
[2012-12-14 15:37:26 -0500] gyre007: moos3: the output suggests to install libgecode-dev library
[2012-12-14 15:37:30 -0500] gyre007: so do it :)
[2012-12-14 15:37:33 -0500] robbkidd: gyre007: I don't have a bootstrap dir in ~/.chef.
[2012-12-14 15:38:32 -0500] gyre007: all right so it installs chef from gems...
[2012-12-14 15:38:37 -0500] robbkidd: gyre007: Is there something about the way the chef-client gets onto client machines that affects how the postgresql/database cookbooks behave?
[2012-12-14 15:39:12 -0500] gyre007: robbkidd: nope...but there is a problem with postgres cookbook if you have omnibus chef installed
[2012-12-14 15:39:22 -0500] robbkidd: byre007: Ah.
[2012-12-14 15:39:37 -0500] robbkidd: Stupid b.
[2012-12-14 15:39:40 -0500] gyre007: :)
[2012-12-14 15:39:41 -0500] robbkidd: OK.
[2012-12-14 15:39:42 -0500] spox: gyre007: not any more
[2012-12-14 15:40:06 -0500] gyre007: spox: heh...if you want to hack around by compiling the libs from postgres src code :)
[2012-12-14 15:40:07 -0500] gyre007: yaaay
[2012-12-14 15:40:17 -0500] gyre007: #thatsjustahack :)
[2012-12-14 15:40:19 -0500] spox: gyre007: it's fixed
[2012-12-14 15:40:23 -0500] gyre007: is it ?
[2012-12-14 15:40:25 -0500] spox: yes
[2012-12-14 15:40:31 -0500] gyre007: from which version ?
[2012-12-14 15:40:40 -0500] spox: 2.0.2 i think
[2012-12-14 15:40:51 -0500] gyre007: cookbook or chef ?
[2012-12-14 15:40:53 -0500] robbkidd: I'm trying to get a multi-node environment working. The postgresql::server cookbook installs happily on my database node. On a different node, I want to run a recipe for one of my service components. This component needs a database.
[2012-12-14 15:40:55 -0500] gyre007: I reckon cookbook
[2012-12-14 15:41:00 -0500] spox: it's fixed in the cookbook
[2012-12-14 15:41:18 -0500] gyre007: mmm will have to check it out...do you know what was the fix ?
[2012-12-14 15:42:08 -0500] spox: yes, it had to do with the order in which shared libraries for linking the compiled bits of the pg gem were searched
[2012-12-14 15:42:33 -0500] robbkidd: Do I define the creation of that component's database in the component's recipe? And if so, I can't seem to get the postgresql root credentials (randomly generated and stored in node[:postgresql][:password][:postgres] ?) to the component's recipe for it to perform the postgresql_user and postgresql_database functions.
[2012-12-14 15:46:04 -0500] robbkidd: Put another way: where do I define the creation of a database user and a database? In the run list for the database server or in the run list for the server running the component that needs a database?
[2012-12-14 15:49:15 -0500] itchyouch: If I include a recipe multiple times does the recipe get run each time?  Seems a bit redundant.  Like I'm installing a bunch of daemons, but having them managed by supervisor, so on each cookbook, I include the supervisor daemon.  Is that a good idea or a waste of time?
[2012-12-14 15:53:13 -0500] Virunga: To run a resource at compile time p = <my_resource_definition>; p.run_action <action> ===
[2012-12-14 15:53:15 -0500] Virunga: ???
[2012-12-14 15:53:29 -0500] Virunga: (without ===)
[2012-12-14 15:53:35 -0500] cwj: itchyouch: you probably want to include supervisor in each cookbook that needs it. the resources in the supervisor cookbook will only get run once.
[2012-12-14 15:53:38 -0500] spox: Virunga: yeah
[2012-12-14 15:53:47 -0500] Virunga: spox: thanks
[2012-12-14 15:54:10 -0500] Virunga: spox: is there documentation about this? Because i had to look the source code..
[2012-12-14 15:54:26 -0500] itchyouch: Thanks cwj.
[2012-12-14 15:54:31 -0500] itchyouch: That's good.
[2012-12-14 15:55:06 -0500] spox: Virunga: http://wiki.opscode.com/display/ChefCN/Evaluate+and+Run+Resources+at+Compile+Time
[2012-12-14 15:55:42 -0500] Virunga: spox: thanks
[2012-12-14 16:17:10 -0500] wamilton: is there any consensus on how to handle things like node[mysql][client][packages] for an application cookbook?
[2012-12-14 16:18:32 -0500] wamilton: for debian squeeze I have to have this: node[mysql][client][packages] = ["build-essential", "mysql-client", "libmysqlclient-dev"] so that mysql::ruby will complete so I can use database cookbook
[2012-12-14 16:20:25 -0500] wamilton: is the solution to just put this in a platform case statement in the attributes/default.rb, or is there something more elegant I can do?
[2012-12-14 16:20:39 -0500] binjured: say i have a recipe that needs to figure out the directory structure for some C code (where its lib, inc, etc. are); could be /usr/local/, /usr, /opt, etc. is there a really handy built-in for that?
[2012-12-14 16:21:31 -0500] wamilton: my concern is that I will be running all of my application cookbooks on Debian and I don't see why this idiosyncracy of mysql and database cookbook should percolate out to each of them...
[2012-12-14 16:23:16 -0500] wamilton: binjured: is your recipe compiling c code?
[2012-12-14 16:23:46 -0500] binjured: wamilton: no, its installing a library via a package, then it needs to figure out where the code went because each platform is a bit different.
[2012-12-14 16:24:01 -0500] binjured: debian likes /usr/local, rh likes /usr, etc.
[2012-12-14 16:25:19 -0500] wamilton: binjured: the simple way to do it is to set default attributes in your cookbook for each platform... there's no chef resource/provider that just gives you a hash of the parts of a package and where they are, if that's what you mean
[2012-12-14 16:25:53 -0500] binjured: okay. i guess what i meant was just "given the choices /usr/local/lib/foo, /usr/lib/foo, etc. tell me which prefix actually exists."
[2012-12-14 16:26:12 -0500] binjured: then just extrapolate as to where the other bits would be
[2012-12-14 16:26:43 -0500] binjured: platform library layout is internally consistent, just not across distributions.
[2012-12-14 16:27:00 -0500] binjured: but no biggy in any case :)
[2012-12-14 16:30:14 -0500] wamilton: binjured: you can configure your resources with not_if and only_if
[2012-12-14 16:31:11 -0500] binjured: hmmm, this is confusing. so i have attributes/default.rb with `node[:foo][:bar] = "baz"' then recipes/default.rb with `user node[:foo][:bar]' and i get an exception "can't convert Symbol into Integer"
[2012-12-14 16:31:50 -0500] wamilton: it's saying that node[:foo] is an array, not a hash
[2012-12-14 16:32:55 -0500] binjured: wamilton: and how's that? do i need to initialize the attribute hash somehow?
[2012-12-14 16:34:31 -0500] wamilton: binjured: not sure... if you're setting the node[:foo] before defaults for the cookbook are applied, eg in your json or whatever, that could be the problem
[2012-12-14 16:35:31 -0500] binjured: wamilton: hmmm, nope. i'm not. no customization at all.
[2012-12-14 16:37:13 -0500] wamilton: binjured: not sure if/why this would matter, but every cookbook I see, the defaults are keyed by string, not token...
[2012-12-14 16:37:48 -0500] binjured: yep, testing that theory now
[2012-12-14 16:38:44 -0500] binjured: wamilton: weird. now it's just complaining the value is nil
[2012-12-14 16:39:15 -0500] freen_: So... there is a Roles value that appears when you run knife node show ....
[2012-12-14 16:39:31 -0500] freen_: Anyone know how to set/read that value?
[2012-12-14 16:40:23 -0500] wamilton: freen_: `knife node edit nodename`
[2012-12-14 16:40:53 -0500] freen_: wamilton: I tried that, didn't seem to work for me...
[2012-12-14 16:40:54 -0500] wamilton: freen_: just make sure $EDITOR is set to something useful, like vi/emacs/pico etc
[2012-12-14 16:41:08 -0500] wamilton: freen_: what error do you get?
[2012-12-14 16:41:37 -0500] freen_: wamilton: failed to save or some such
[2012-12-14 16:41:55 -0500] freen_: I tried several different names for the property
[2012-12-14 16:42:00 -0500] wamilton: freen_: did it give you a JSON formatting error, or a chef server connectivity error, or what?
[2012-12-14 16:42:04 -0500] freen_: it does not appear by default
[2012-12-14 16:42:49 -0500] wamilton: freen_: when I screw up `knife [object] edit [name]`, it's generally a JSON comma error on my part
[2012-12-14 16:43:24 -0500] freen_: wamilton: I tried to be careful about that; I don't believe that was the error
[2012-12-14 16:43:38 -0500] freen_: wamilton: a format error anyway
[2012-12-14 16:43:38 -0500] wassy121: I'm pretty sure 100% of all "knife something edit" errors are comma-based
[2012-12-14 16:43:43 -0500] wamilton: freen_: pastebin your node?
[2012-12-14 16:44:14 -0500] wamilton: ... but hide your mysql passwords ...
[2012-12-14 16:44:33 -0500] freen_: wamilton: the json from vim?
[2012-12-14 16:44:39 -0500] wamilton: freen_: yes
[2012-12-14 16:44:40 -0500] freen_: wamilton: ...err editor
[2012-12-14 16:44:59 -0500] wamilton: freen_: right before you attempt to save, pastebin
[2012-12-14 16:46:59 -0500] freen_: wamilton: http://pastebin.com/0DNpnJC5
[2012-12-14 16:49:00 -0500] freen_: wamilton: the only way I can populate that field is during a bootstrap by passing role:[] as the recipe
[2012-12-14 16:49:15 -0500] freen_: wamilton: I can't do it after the fact
[2012-12-14 16:49:49 -0500] freen_: wamilton: and I can't query it, or I don't know what the attribute value is
[2012-12-14 16:52:14 -0500] wamilton: freen_: to clarify, do you get an error like this: "ERROR: JSON::ParserError:"
[2012-12-14 16:52:16 -0500] wamilton: ?
[2012-12-14 16:52:52 -0500] wamilton: freen_: if not, then it's not a formatting issue....
[2012-12-14 16:53:30 -0500] freen_: wamilton: I do not get that
[2012-12-14 16:53:36 -0500] freen_: onesec
[2012-12-14 16:53:52 -0500] freen_: I will pastbin what I change it to
[2012-12-14 16:56:05 -0500] freen_: wamilton: http://pastebin.com/ynUtLn4S
[2012-12-14 16:56:38 -0500] freen_: wamilton: I get: Node not updated, skipping node save
[2012-12-14 16:57:06 -0500] wamilton: freen_: the line '"Roles": "test"' doesn't mean anything
[2012-12-14 16:57:39 -0500] wamilton: freen_: roles get added to the run list, and you're already doing that properly
[2012-12-14 16:58:12 -0500] freen_: wamilton: ahh... but that does not populate the Roles; attribute
[2012-12-14 16:58:33 -0500] wamilton: freen_: the attributes are in the "normal" hash
[2012-12-14 16:58:53 -0500] freen_: wamilton: the only way I can populate that value is during a chef bootstrap
[2012-12-14 16:59:07 -0500] freen_: wamilton: I could set it there?
[2012-12-14 16:59:34 -0500] wamilton: freen_: do you have a recipe that needs to behave differently based on different roles?
[2012-12-14 16:59:42 -0500] wamilton: freen_: is that the motivation?
[2012-12-14 17:00:10 -0500] freen_: wamilton: yes
[2012-12-14 17:00:29 -0500] freen_: wamilton: maybe that would have been a better question
[2012-12-14 17:00:49 -0500] wamilton: freen_: you should just set default attributes in the cookbook attributes and then have the roles that need to influence those things set overrides
[2012-12-14 17:01:01 -0500] wamilton: then have the recipe look at attributes, not roles
[2012-12-14 17:02:06 -0500] awgross: when using minitests, has anyone found a good way to test custom LWRPs?  I don't want to mock them but rather run tests against wherever the LWRP is run
[2012-12-14 17:03:42 -0500] freen_: wamilton: I will try that idea; you know of any examples where that is done in the community cookbooks?
[2012-12-14 17:18:34 -0500] wamilton: freen_: mysql cookbook
[2012-12-14 17:40:35 -0500] awgross: is it possible to make system() calls when using minitest/spec?
[2012-12-14 17:42:16 -0500] jtimberman: awgross: its possible, but could be generally better to use chef/mixin/shell_out
[2012-12-14 17:42:28 -0500] jtimberman: awgross: which i have examples in my latest blog post! (shameless plug)
[2012-12-14 17:42:34 -0500] awgross: jtimberman: awesome
[2012-12-14 17:42:36 -0500] awgross: link?
[2012-12-14 17:42:37 -0500] jtimberman: mainly to grab stdout
[2012-12-14 17:42:45 -0500] jtimberman: https://bitly.com/QXW6FD
[2012-12-14 17:42:55 -0500] awgross: you have too many blogs
[2012-12-14 17:43:01 -0500] awgross: http://jtimberman.posterous.com/
[2012-12-14 17:43:08 -0500] awgross: http://jtimberman.housepub.org/
[2012-12-14 17:43:41 -0500] awgross: I have run out of examples
[2012-12-14 17:43:43 -0500] c_t: don't forget http://jtimbermanshouseofbukkake.blogspot.com
[2012-12-14 17:43:49 -0500] awgross: not clicking that
[2012-12-14 17:44:08 -0500] jtimberman: housepub is the correct one
[2012-12-14 17:44:14 -0500] awgross: ok thanks
[2012-12-14 17:44:14 -0500] jtimberman: c_t: :(
[2012-12-14 17:44:24 -0500] jtimberman: awgross: the posterous one was a failed experiment :)
[2012-12-14 17:44:35 -0500] awgross: a well seo'd failure
[2012-12-14 17:44:37 -0500] jtimberman: in that i got tired of fighting it for formatting stuff nicely.
[2012-12-14 17:44:46 -0500] awgross: octopress now?
[2012-12-14 17:44:48 -0500] jtimberman: yeah i'm not gonna run ads on my site, so i don't care :)
[2012-12-14 17:44:52 -0500] jtimberman: yeah octopress is awesome.
[2012-12-14 17:44:56 -0500] awgross: indeed
[2012-12-14 17:45:02 -0500] c_t: it really is
[2012-12-14 17:45:16 -0500] jtimberman: the goal is to post stuff people in the various communities i'm in find useful.
[2012-12-14 17:45:16 -0500] awgross: we combine it with github pages for company blog
[2012-12-14 17:45:21 -0500] awgross: many times better than wordpress
[2012-12-14 17:45:44 -0500] c_t: I even ended up doing a couple of plugins for it
[2012-12-14 17:45:55 -0500] c_t: (well, adapting old ones, but still)
[2012-12-14 17:46:07 -0500] c_t: and figured out how to put plugins in multiple directories
[2012-12-14 17:46:19 -0500] jtimberman: awgross: yeah, mine's all on github pages :)
[2012-12-14 17:46:41 -0500] awgross: jtimberman: nice this post talks about testing LWRPs, was just discussing this
[2012-12-14 17:47:00 -0500] awgross: unfortunately we came to the same conclusion of a testing recipe to tease out the LWRP behavior for minitest
[2012-12-14 17:47:03 -0500] c_t: sadly with mine I need a bunch of weird rewrite rules, so I couldn't put it on github or heroku
[2012-12-14 17:48:46 -0500] jtimberman: awgross: yeah, its kind of bad, but unit testing things that make state changes to the underlying OS are really hard to unit test properly in a cross platform way.
[2012-12-14 17:49:06 -0500] awgross: jtimberman: indeed
[2012-12-14 17:49:14 -0500] jtimberman: it'd be super to have unit tests like the actual resources/providers in Chef itself have.
[2012-12-14 17:49:26 -0500] awgross: jtimberman: ive moved to mostly using minitest, and only unit testing libraries
[2012-12-14 17:50:22 -0500] awgross: jtimberman: i found chef-spec to just be rewriting my recipes as tests, so i just try to remove as much logic as possible from the recipes and put everything else in library files that can be properly tested
[2012-12-14 17:52:31 -0500] robbkidd: Still confused about whether I should define the creation of a database in the run list for the database server or in the run list for the component that needs the database.
[2012-12-14 17:52:54 -0500] cwj: robbkidd: i would say it belongs with the app
[2012-12-14 17:54:27 -0500] robbkidd: cwj: I agree. But I don't quite know how to use the opscode database cookbook to make that happen. Currently trying to create the component's database user from the component's recipe, but cannot lookup the postgres root user's password to perform the action.
[2012-12-14 17:54:57 -0500] robbkidd: node[:postgres][:password][:postgres] returns a nil somewhere in that chain.
[2012-12-14 17:56:06 -0500] koblas: when wanting to override a "node" setting (e.g. node['nginx']['default_site_enabled']) what file do I put in the override ?
[2012-12-14 17:56:36 -0500] cwj: robbkidd: ok, you are running postgres on the same node or a separate node?
[2012-12-14 17:56:50 -0500] robbkidd: cwj: Different node.
[2012-12-14 17:57:05 -0500] cwj: are you using search to retrieve that node?
[2012-12-14 17:57:30 -0500] robbkidd: cwj: ... no. Not sure how to do that.
[2012-12-14 17:58:01 -0500] cwj: robbkidd: http://docs.opscode.com/essentials_search.html
[2012-12-14 17:58:03 -0500] cwj: for starters
[2012-12-14 17:58:10 -0500] robbkidd: cwj: Reading. Thanks.
[2012-12-14 17:58:26 -0500] gyre007: robbkidd: id do it on the DB server...imagine you were doing replication - you can only create databases and users on the master...having this done created from the nodes which is using the DB is tying it to the node and not to the Database
[2012-12-14 17:58:33 -0500] cwj: i like using this discovery cookbook's methods for stuff like finding the database http://community.opscode.com/cookbooks/discovery
[2012-12-14 17:59:00 -0500] robbkidd: gyre007: Also good point.
[2012-12-14 17:59:11 -0500] gyre007: you can always run search for the master...but...as I said...once you delete that node...its runlist is deleted too...
[2012-12-14 17:59:35 -0500] gyre007: so having this on the component/node as oppose to DB can get tricky
[2012-12-14 17:59:36 -0500] Virunga: If i have to modify the chef-client cookbook, what's the better way to make it?
[2012-12-14 17:59:40 -0500] robbkidd: grye007: Like "*this* database server is expected to have *this* database and user." ... Then the component only needs to know the credentials.
[2012-12-14 17:59:56 -0500] gyre007: yeah...thats what Id do...
[2012-12-14 18:00:23 -0500] robbkidd: gyre007: Then I suppose I do a search (still reading) to lookup who the database server is.
[2012-12-14 18:00:27 -0500] robbkidd: ?
[2012-12-14 18:01:00 -0500] cwj: koblas: attribute overrides can go in a few different places
[2012-12-14 18:02:53 -0500] cwj: koblas: you can set it per node, per role, per environment, or put it in a cookbook's attributes
[2012-12-14 18:03:01 -0500] cwj: you can even use node.set directly in a recipe
[2012-12-14 18:05:40 -0500] spox: anyone successfully using v2 of knife-rackspace plugin to build nodes?
[2012-12-14 18:07:15 -0500] gyre007: robbkidd: yup
[2012-12-14 18:07:46 -0500] gyre007: spox: hm ? I'm using 0.6.2
[2012-12-14 18:08:17 -0500] spox: gyre007: v2 for rackspace's "new" cloud
[2012-12-14 18:08:26 -0500] spox: hrm, looks like it's a fog issue
[2012-12-14 18:09:13 -0500] gyre007: ah never heard of that ... didnt know they had a 'new' cloud
[2012-12-14 18:10:19 -0500] mattray: spox: works for me :) but I wrote most of it. What are you seeing and are you using the latest code?
[2012-12-14 18:10:32 -0500] mattray: spox: also, remove any previous versions of knife-rackspace
[2012-12-14 18:11:21 -0500] spox:  /usr/local/rvm/gems/ruby-1.9.3-p286/gems/excon-0.16.10/lib/excon/connection.rb:292:in `request_kernel': Fog::Compute::RackspaceV2::BadRequest (Fog::Compute::RackspaceV2::BadRequest)
[2012-12-14 18:11:35 -0500] spox: mattray: was getting that when attempting to create new nodes
[2012-12-14 18:11:47 -0500] spox: linked up against fog HEAD and it works now
[2012-12-14 18:11:52 -0500] mattray: spox: gem list?
[2012-12-14 18:12:05 -0500] mattray: spox: remove any old fog and knife-rackspace gems
[2012-12-14 18:12:31 -0500] spox: hrm, it's bundler contained
[2012-12-14 18:12:35 -0500] mattray: I think I tested it last week
[2012-12-14 18:12:36 -0500] spox: but i'll give it a go and see
[2012-12-14 18:14:02 -0500] spox: oh, mattray, while you're here. will setting the endpoint mean that nodes created will be in that region?
[2012-12-14 18:14:32 -0500] mattray: spox: if memory serves, yes
[2012-12-14 18:14:38 -0500] spox: cool
[2012-12-14 18:14:58 -0500] spox: i'll build another node after this with scrubbed gems and ping you if i hit any errors
[2012-12-14 18:15:01 -0500] spox: thanks! :)
[2012-12-14 18:15:01 -0500] mattray: I know it's being used to do that
[2012-12-14 18:22:08 -0500] specialsauce: ohai chefs
[2012-12-14 18:22:26 -0500] specialsauce: what's the correct way to programmatically set up an initial admin key for a chef server please?
[2012-12-14 18:23:19 -0500] specialsauce: ie "knife configure -i" but non-interactively
[2012-12-14 18:38:29 -0500] btm: specialsauce: see knife configure --help, you can specify everything as an argument
[2012-12-14 19:13:33 -0500] kl4m: (I'm a noob to cfg mgmt.) Hi, I have a backup system where I need to create one file on each client, and one file per client on the backup server. What's the common way to do that in Chef? Is there a way to do some kind of multi-node recipe, or it must be dynamic with an API or some message queue? I'm looking for the "laziest" way, the config files are very simple.
[2012-12-14 19:14:22 -0500] btm: kl4m: the recipe on the server should use search to make a list of all the clients.
[2012-12-14 19:14:39 -0500] btm: kl4m: the clients should probably use a recipe that just recipes a file or template (depending on whats in that file)
[2012-12-14 19:15:53 -0500] btm: kl4m: https://github.com/opscode-cookbooks/nagios/blob/master/recipes/client.rb <-- The block at L28 determines the server and the resource at L56 writes a template config with that information
[2012-12-14 19:17:04 -0500] Virunga: How can i use the lwrp chef_handler to use a installed handler gem ?
[2012-12-14 19:17:56 -0500] Virunga: I have installed the report handler gem and i want to enabling it with chef_handler
[2012-12-14 19:18:20 -0500] btm: Virunga: https://github.com/btm/minitest-handler-cookbook/blob/master/recipes/default.rb
[2012-12-14 19:19:40 -0500] robbkidd: Still wrestling with the database cookbook. Trying to create a postgresql use with "postgresql_user 'slartibartfast' do . end". Stack trace complains about there being no provider for postgresql_user, but https://github.com/opscode-cookbooks/database/blob/1.3.6/libraries/provider_database_postgresql_user.rb
[2012-12-14 19:20:01 -0500] kl4m: btm: OK, L35 tells me how that would work for the server. I would just pull e.g. the "backupname" of each client and build the config files. Thanks
[2012-12-14 19:21:10 -0500] Virunga: btm: thanks, but that doesn't use the chef_handler
[2012-12-14 19:21:17 -0500] Virunga: provider
[2012-12-14 19:23:43 -0500] wamilton: robbkidd: there is no advertised postgres provider for database_user: https://github.com/opscode-cookbooks/database/tree/1.3.6#providers-1
[2012-12-14 19:25:32 -0500] robbkidd: wamilton: Was hoping that was a documentation omission given the presence of what appears to be a provider in the libraries/ directory.
[2012-12-14 19:26:58 -0500] Virunga: btm: will the handler be destroyed at the end of the chef run?
[2012-12-14 19:27:49 -0500] Virunga: in my case chef-client is a daemon, i dunno if that could help to know the answer.
[2012-12-14 19:31:09 -0500] robbkidd: So if the database cookbook does not support creating postgres users, how do chefs normally do so? Shell out to createuser?
[2012-12-14 19:31:53 -0500] wamilton: robbkidd: lol, it's postgresql_database_user, not postgresql_user
[2012-12-14 19:32:03 -0500] robbkidd: Of course!
[2012-12-14 19:32:58 -0500] robbkidd: I might have figured that out eventually.
[2012-12-14 19:33:33 -0500] robbkidd:  if I paid better attention to the README for the other DB providers.
[2012-12-14 19:33:35 -0500] robbkidd: Thanks.
[2012-12-14 19:33:48 -0500] wamilton: rip hair out, start cookbook over with mysql, get the resource name right, everything works, wtf, s/mysql/postgresql ... oh
[2012-12-14 19:33:52 -0500] wamilton: been there, done that
[2012-12-14 19:34:47 -0500] robbkidd: It's a dark art.
[2012-12-14 19:39:58 -0500] jf0lwers: hey, someone in here shared a gist the other week where they deleted a chef client node from chef server from a Vagrantfile on destroy
[2012-12-14 19:40:07 -0500] jf0lwers: I can't seem to find it
[2012-12-14 19:40:26 -0500] jf0lwers: anyone the url for that gist?
[2012-12-14 19:43:35 -0500] cwj: jf0lwers: there were a few examples provided, here's what i use https://gist.github.com/2f54af65c8e207482dd5#file-vagrantfile-L88-L111
[2012-12-14 19:43:46 -0500] cwj: note line 5 also
[2012-12-14 19:47:15 -0500] jumboTron: hello
[2012-12-14 19:47:35 -0500] jumboTron: is it possible to launch multiple nodes at the same time with knife ec2 ?
[2012-12-14 19:47:36 -0500] masterkorp: hello
[2012-12-14 19:49:12 -0500] thehar: cwj: what is this
[2012-12-14 19:49:55 -0500] cwj: thehar: an example of how one can cause vagrant to delete node and client from chef-server when destroying a vagrant instance
[2012-12-14 19:50:09 -0500] thehar: oh freaking cool
[2012-12-14 19:50:19 -0500] cwj: couple of other people had different approaches
[2012-12-14 19:51:43 -0500] redgetan: so after using some chef-rvm, my vagrant (Ubuntu 10.04) doesnt work like it used to. Specifically, ~/.bashrc is no longer being loaded. I want to debug the source/cause of the problem. How do I do this?
[2012-12-14 19:52:08 -0500] jumboTron: also, anyone got a recipe to evaluate eTags, so that it doesn't download a file again that hasn't changed?
[2012-12-14 19:52:12 -0500] redgetan: of course, i could always source ~/.bashrc in ~/.bash_profile, but im curious to see what caused the change
[2012-12-14 19:52:21 -0500] cwj: redgetan: use vagrant ssh to get into the box and look around
[2012-12-14 19:52:42 -0500] redgetan: i did, but im not sure what to look for
[2012-12-14 19:52:43 -0500] cwj: use debug logging with your chef runs to get more insight into what is happening
[2012-12-14 19:52:56 -0500] redgetan: also did that -l debug
[2012-12-14 19:53:18 -0500] cwj: i dont use rvm nor that cookbook, so i dont have any more specific suggestions
[2012-12-14 19:53:33 -0500] cwj: sometimes you just have to shave a herd of yaks
[2012-12-14 19:54:08 -0500] redgetan: if was wondering if there's a tool that tae a snapshot of your vm
[2012-12-14 19:54:18 -0500] redgetan: so that you can compare snapshots every chef run
[2012-12-14 19:54:38 -0500] redgetan: not the entire snapshot, but only things that chef changed
[2012-12-14 19:55:30 -0500] cwj: that seems really cumbersome as opposed to reading the chef-rvm cookbook and understanding how it works
[2012-12-14 19:55:49 -0500] cwj: there are snapshot plugins for vagrant, but i havent tried them
[2012-12-14 19:56:05 -0500] cwj: sounds like you want to snapshot the system state and compare, not sure what you'd use for that
[2012-12-14 19:56:22 -0500] robbkidd: redgetan: I use that cookbook and don't have trouble with RVM in my vagrant machines.
[2012-12-14 19:57:20 -0500] robbkidd: redgetan: Are you using the standard ubuntu10.04 base box or did you roll your own?
[2012-12-14 19:57:38 -0500] redgetan: standard
[2012-12-14 19:58:12 -0500] robbkidd: OK. Lemme look into something ...
[2012-12-14 20:05:42 -0500] gchristensen: why might my node be reporting no FQDN?
[2012-12-14 20:06:08 -0500] robbkidd: redgetan: While I'm looking, are you doing system-wide or per-user RVM installs with the RVM cookbook?
[2012-12-14 20:06:20 -0500] redgetan: per user
[2012-12-14 20:06:27 -0500] redgetan: let me post my config
[2012-12-14 20:07:34 -0500] redgetan: http://pastie.org/pastes/5532232/text
[2012-12-14 20:17:59 -0500] binjured: i am really confused by the docs example and arguments to EncryptedDataBagItem. if i created a databag/item "foo bar", what do i pass to load()?
[2012-12-14 20:18:09 -0500] binjured: the example has this unseen value "prod"
[2012-12-14 20:18:14 -0500] binjured: which is never mentioned in the example
[2012-12-14 20:18:53 -0500] redgetan: robbkidd,cwj: hmm, interesting, i see my problem now. when ~/.bash_profile exist, ~/.bashrc does not get loaded
[2012-12-14 20:19:06 -0500] redgetan: when i removed that file, ~/.bashrc gets loaded normally
[2012-12-14 20:19:52 -0500] cwj: i feel like i read something recently about some crappy ubuntuisms around bashrc/bash_profile
[2012-12-14 20:19:58 -0500] redgetan: i guess i have to source ~/.bashrc in my ~/.bash_profile
[2012-12-14 20:20:01 -0500] cwj: so that makes some sense
[2012-12-14 20:23:46 -0500] freen_: wamilton: thanks for your help
[2012-12-14 20:24:07 -0500] wamilton: freen_: np, everything working?
[2012-12-14 20:24:16 -0500] itchyouch: I was trying to figure out the best place to store ip addresses to assign to various nodes in chef.  These addresses are private IPs for an Internet network.  Think I should go with a data bags or attributes?
[2012-12-14 20:25:12 -0500] wamilton: itchyouch: data bags are for organization-wide metadata, attributes are for node metadata
[2012-12-14 20:25:16 -0500] binjured: hmmm, i put some recipes in the run_list of a role and applied the role to a node, now chef-client says the node has no recipes to install.
[2012-12-14 20:25:49 -0500] wamilton: binjured: pastebin the node and role jsons
[2012-12-14 20:27:11 -0500] jf0lwers: if I queue up an action to run several time does that action run mutilple times or just once?
[2012-12-14 20:27:53 -0500] binjured: wamilton: oh, never mind, i'm dumb.
[2012-12-14 20:28:24 -0500] wamilton: binjured: that's the cause for most problems with chef :)
[2012-12-14 20:28:44 -0500] itchyouch: Thanks wamilton.  I guess these IPs are not quite org wide, but would be needed by several recipes for assigning listening addresses
[2012-12-14 20:29:37 -0500] wamilton: itchyouch: well, do these IP's have explicit purposes organization-wide, e.g. one is a fileserver or something?
[2012-12-14 20:31:24 -0500] itchyouch: wamilton: Each of my hosts is a management server for a cluster, and it manages several hundred pxebooted hosts on a private internal net
[2012-12-14 20:31:58 -0500] itchyouch: But that ip is only relevant to the single host being managed by chef
[2012-12-14 20:36:44 -0500] wamilton: itchyouch: I would go with attributes unless you are trying to record the full list of these IP's in your chef server
[2012-12-14 20:36:55 -0500] itchyouch: K, thanks
[2012-12-14 20:37:46 -0500] wamilton: itchyouch: more accurately, even if you were using data bags to make the full list available in every recipe, I would still use the recipe to set attributes on the node
[2012-12-14 20:42:28 -0500] itchyouch: Ok
[2012-12-14 20:42:30 -0500] itchyouch: Thanks
[2012-12-14 21:01:48 -0500] btm: @opscode Cookbook Review: join: http://bit.ly/UsO30m, watch: http://youtu.be/Iz4Xuxt6AwI (let me know if Google won't let you join)
[2012-12-14 21:07:03 -0500] jumboTron: does remote_file support eTag headers?
[2012-12-14 21:07:56 -0500] nstielau1: jumboTron: Not by default, I don't think, but you can hack it with a not_if ruby block
[2012-12-14 21:11:59 -0500] nstielau1: btm: what pull request are you looking at now?
[2012-12-14 21:17:34 -0500] Twirrim: is it normal for chef-server to periodically reset the validation key?
[2012-12-14 21:18:41 -0500] cwj: Twirrim: no
[2012-12-14 21:18:59 -0500] cwj: Twirrim: that would generally be caused by an administrative user or some kind of configuration problem
[2012-12-14 21:28:00 -0500] w6fu: does anyone have a debian/ubuntu preseed file that installs chef and drops a validation.pem that they wouldn't mind sharing?
[2012-12-14 21:43:57 -0500] mattray: w6fu: here's both: https://github.com/opscode-cookbooks/pxe_dust/blob/master/templates/default/
[2012-12-14 21:44:39 -0500] mattray: w6fu: pxe_dust handles bootstrapping Ubuntu and Debian nodes
[2012-12-14 21:44:53 -0500] w6fu: mattray: awesome, thank you
[2012-12-14 21:45:15 -0500] w6fu: yea, i have most of that together and didn't realize it was in there
[2012-12-14 21:45:52 -0500] mattray: w6fu: pxe_dust + apt::cache-server-ng is good stuff
[2012-12-14 21:46:13 -0500] nstielau1: btm: Google hangout for code review was cool, seems like a good way to learn about writing cookbooks.  I wasn't sure how you were walking through the pull requests, though, next time maybe link to the Jira list or something.
[2012-12-14 21:46:18 -0500] w6fu: mattray: weird part, no dhcpd :p
[2012-12-14 21:46:34 -0500] mattray: w6fu: there are cookbooks if you want dhcpd
[2012-12-14 21:46:44 -0500] w6fu: fair enough
[2012-12-14 21:46:45 -0500] mattray: I made it optional, since I'm using a dd-wrt dhcp
[2012-12-14 21:47:54 -0500] w6fu: :)
[2012-12-14 21:48:37 -0500] mattray: w6fu: there are forks of it that folks are using
[2012-12-14 21:48:41 -0500] mattray: mine's just stale
[2012-12-14 21:48:49 -0500] miah: i started work on it.. but other things took priority
[2012-12-14 21:49:15 -0500] w6fu: I looked at them, then got grand ideas of databags for reservations, then saw something shiney and never got around to it
[2012-12-14 21:56:46 -0500] jtimberman: nstielau1: ah - we use the search filter "cookbook tickets for review": http://tickets.opscode.com/secure/IssueNavigator.jspa?mode=hide&requestId=10874
[2012-12-14 21:56:57 -0500] jtimberman: nstielau1: its really just "COOK project tickets in Fix Provided state"
[2012-12-14 21:57:31 -0500] jtimberman: nstielau1: normally we sort by "oldest update first", but there were a few tickets that are for cookbooks that already had merges that i wanted to get updated and released.
[2012-12-14 21:58:00 -0500] nstielau1: thanks jtimberman.  "No matching issues found." < nice work ;)
[2012-12-14 21:59:59 -0500] jtimberman: nstielau1: :D
[2012-12-14 22:00:14 -0500] jtimberman: yeah this is the epic one: http://tickets.opscode.com/secure/IssueNavigator.jspa?mode=hide&requestId=10977
[2012-12-14 22:00:40 -0500] jtimberman: and with the "Fix Reviewed" tickets we went through today, that is going to go up shortly.
[2012-12-14 22:14:05 -0500] digitalfire: hey can anyone tell me is it possible to use search in an attributes file?
[2012-12-14 22:15:45 -0500] jtimberman: digitalfire: do it in a recipe, not an attributes file.
[2012-12-14 22:16:10 -0500] digitalfire: i'd rather not do it in a recipe but if i have to then okay
[2012-12-14 22:16:23 -0500] digitalfire: thx
[2012-12-14 22:16:38 -0500] jtimberman: doing it in a an attributes file is *possible*, they're Ruby and all, but it is better to do that in a recipe.
[2012-12-14 22:16:50 -0500] digitalfire: oh why?
[2012-12-14 22:17:06 -0500] jtimberman: attributes files are evaluated in the context of the Chef::Node object.
[2012-12-14 22:17:33 -0500] jtimberman: and due to method_missing magic, there's potential bugs that can catch you by surprise.
[2012-12-14 22:17:56 -0500] digitalfire: hmmm
[2012-12-14 22:17:59 -0500] jtimberman: so for any attributes you need to dynamically determine or calculate, do that in a recipe :)
[2012-12-14 22:18:53 -0500] digitalfire: see i've got a slew of recipes in a cookbook and attributes about a server where it would be nice and clean to search for the server ip in there with the other attributes about the server
[2012-12-14 22:20:05 -0500] digitalfire: keep in mind i am still a noob
[2012-12-14 22:34:18 -0500] jhayden: Hey does anyone know if there is a default timeout for connecting to the chef-server?
[2012-12-14 22:34:41 -0500] jhayden: I'm occasionally getting these errors and would like to up the timer if possible
[2012-12-14 23:13:04 -0500] josephholsten: was there an issue in chef 10.16.0 that cookbook_file wouldn't set the mode properly on first run?
[2012-12-14 23:13:45 -0500] josephholsten: it seems to be working fine in 10.16.2, but I want to be sure this isn't a weird heisenbug
[2012-12-14 23:14:41 -0500] nstielau1: digitalfire: Doing search in attributes file is mixing data+logic.  It's like using strored procedures with business logic in mysql ;)
[2012-12-14 23:15:05 -0500] josephholsten: ah, looks like it was CHEF-3547
[2012-12-14 23:26:09 -0500] papertigers_: Can you a = search(:node, 'role:somerole') within a template.erb? Or does that have to happen in a recipe and get passed into a template
[2012-12-14 23:27:04 -0500] btm: papertigers_: you can (inside of <% %>) but it's best practice to keep your logic in a recipe and pass it.
[2012-12-14 23:30:37 -0500] papertigers_: btm: I want to do a search for a role based on an environment, basically somerole vs somerole-dev based upon node.chef_environment
[2012-12-14 23:35:32 -0500] papertigers_: Seems search is not known in templates only a recipe
[2012-12-14 23:38:05 -0500] nstielau1: papertigers_: yeah, do the search in the recipe, and pass that data to a template.  Or even choose which template to use.  Similar to the previous question about doing search in attirbutes files, it really belongs in the recipe
[2012-12-14 23:51:36 -0500] rbarrero_: nick jumboTron
[2012-12-14 23:51:49 -0500] jumboTron: the recipe error is: Cannot find a resource for source on redhat version 5.5
[2012-12-14 23:52:04 -0500] chip-: papertigers_  Search in the recipe, then .each the search results into a hash or an array, depending on how you do it. Then pass that object into the template, and in the template .each back out.
[2012-12-14 23:52:04 -0500] jumboTron: thoughts?

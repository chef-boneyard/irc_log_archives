[2012-12-18 00:00:18 -0500] mirk_: alexw: If you don't want to wait for chef-client to run on it's own then you can run manually on boot.
[2012-12-18 00:00:34 -0500] mirk_: My clients run every 5 minutes so I don't have to wait very long.
[2012-12-18 00:00:38 -0500] alexw: mirk_: Ooh, is it on a cron..
[2012-12-18 00:01:02 -0500] mirk_: The interval can be set in the config and mine runs as a daemon
[2012-12-18 00:01:36 -0500] alexw: so if your working on chef then - how do you stop it syncing dev changes?
[2012-12-18 00:01:43 -0500] alexw: version numbers?
[2012-12-18 00:01:50 -0500] alexw: for cookbooks
[2012-12-18 00:02:13 -0500] alexw: or is it best practice to have a dev chef server and a production chef server
[2012-12-18 00:02:22 -0500] mirk_: We have a dev, stage and prod environments where we develop, test and deploy.
[2012-12-18 00:02:41 -0500] alexw: do you have a chef server for each?
[2012-12-18 00:02:53 -0500] mirk_: We have a second set of chef servers and clients where we develop and test.
[2012-12-18 00:02:59 -0500] alexw: ahh ok
[2012-12-18 00:03:04 -0500] alexw: thats what I was wondeirng
[2012-12-18 00:03:45 -0500] mirk_: We use a stage and prod environment on the same chef-server but develop and break stuff on a seperate set of servers entirely.
[2012-12-18 00:04:37 -0500] alexw: is newrelic best for monitoring
[2012-12-18 00:04:57 -0500] doomviking: oh lordy
[2012-12-18 00:05:39 -0500] mirk_: Never used it, sorry.
[2012-12-18 00:11:25 -0500] ranjib_: alexw, new relic started as a process instrumentation tool, later they provided server monitoring
[2012-12-18 00:11:56 -0500] alexw: just looking for something to monitor services
[2012-12-18 00:12:01 -0500] alexw: maybe monitd is the best solution
[2012-12-18 00:12:01 -0500] ranjib_: theres no such thing as generic best monitoring tool. you might find one that suits your need best
[2012-12-18 00:12:09 -0500] alexw: monit*
[2012-12-18 00:12:14 -0500] ranjib_: what you plan to monitor?
[2012-12-18 00:12:22 -0500] alexw: elastica, redis, monogdb
[2012-12-18 00:12:30 -0500] alexw: make sure they are up, running and responding
[2012-12-18 00:12:37 -0500] ranjib_: running on AWS?
[2012-12-18 00:12:41 -0500] alexw: yeh
[2012-12-18 00:13:02 -0500] ranjib_: you can check server density, cloudkick, sonian etc for hosted stuff
[2012-12-18 00:13:27 -0500] ranjib_: nagios, sensu , zabbix , zenoss for in house solution..
[2012-12-18 00:14:14 -0500] ranjib_: all of them are decent.. hostes ones are easy to start with, but not heavily customizable.
[2012-12-18 00:14:34 -0500] ranjib_: s/hostes/hosted/
[2012-12-18 00:14:39 -0500] alexw: yeah - looks good thanks
[2012-12-18 00:14:49 -0500] alexw: just after something to make sure services are up and responding
[2012-12-18 00:14:50 -0500] hekman_: alexw: we use sensu extensively here... very happy with it
[2012-12-18 00:15:06 -0500] alexw: might stick with in-house due to security access
[2012-12-18 00:15:30 -0500] ranjib_: go with sensu then.. it has decent chef integration also
[2012-12-18 00:15:47 -0500] alexw: and then can search for nodes using chef :)
[2012-12-18 00:22:35 -0500] ranjib_: alexw, yeah.. it has all those things.. it uses amqp to talk and swear, it eats and spits json, can flirt with nagios plugins, has a slim dashboard(with ajax), can push data to graphite.. the chef cookbook for sensu comes with nifty little lwrps to do all the yak shaving in elegant way
[2012-12-18 00:23:33 -0500] ranjib_: name the cool things.. you have it.
[2012-12-18 00:24:52 -0500] alexw: awesome - is it best to install using chef?
[2012-12-18 00:25:00 -0500] alexw: s/best/better
[2012-12-18 00:25:06 -0500] alexw: for a chef intergration
[2012-12-18 00:26:37 -0500] ranjib_: yeah
[2012-12-18 00:26:46 -0500] alexw: https://github.com/sensu/sensu-chef
[2012-12-18 00:26:48 -0500] ranjib_: you can ask more at #sensu
[2012-12-18 00:26:57 -0500] alexw: pop that into an role and upload to ec2 i guess
[2012-12-18 00:27:25 -0500] ranjib_: yeah
[2012-12-18 00:27:57 -0500] ranjib_: and use those lwrps
[2012-12-18 00:27:59 -0500] erratic: what happened to search
[2012-12-18 00:33:36 -0500] hekman_: ranjib_: it sounded like you were trying to set him up with a girl
[2012-12-18 00:37:56 -0500] ranjib_: hekman_, :-) we all share a love-hate relationship with our monitoring systems
[2012-12-18 00:40:46 -0500] alexw: ranjib_: haha
[2012-12-18 00:43:18 -0500] alexw: cloudformation + chef is awesome
[2012-12-18 00:43:43 -0500] alexw: 1...n servers in under 5 minutes :D
[2012-12-18 02:35:13 -0500] jhunter: adding the following into my client.rb
[2012-12-18 02:35:15 -0500] jhunter: report_handlers << ChefReport::ProcessComplete.new
[2012-12-18 02:35:40 -0500] jhunter: and i thought ChefReport::ProcessComplete.new is supposed to fire off once chef-client runs successfully
[2012-12-18 02:35:43 -0500] jhunter: ?
[2012-12-18 02:35:52 -0500] jhunter: i'm seeing it run prior to the client finish it's run
[2012-12-18 03:26:04 -0500] kadishmal: Hi!
[2012-12-18 03:26:17 -0500] kadishmal: does anybody know by any change the answer for "How do I install a PECL package on Vagrant box with chef?"
[2012-12-18 03:26:33 -0500] kadishmal: I've asked on StackOverflow http://stackoverflow.com/questions/13913480/how-do-i-install-a-pecl-package-on-vagrant-box-with-chef
[2012-12-18 03:26:52 -0500] kadishmal: I've installed apache and PHP, but can't figure out how to install a PECL package
[2012-12-18 03:27:17 -0500] kadishmal: PHP recipe seems to have PECL installed, provides some guides but can't figure out how to use them to install a PECL package
[2012-12-18 03:27:30 -0500] kadishmal: I would appreciate if anyone could help
[2012-12-18 03:28:25 -0500] kadishmal: anybody???
[2012-12-18 03:28:45 -0500] iverson0881: @kadishmal for what it's worth i haven't ever used the pecl provider, but rather just use packages instead
[2012-12-18 03:29:11 -0500] iverson0881: so in my case i have a debian platform, i so just build debian packages and then install the package as needed from my private apt repo
[2012-12-18 03:29:37 -0500] iverson0881: using a guide like this to make pecl/pear packages into debian packages: http://www.mabishu.com/blog/2011/03/20/how-to-easily-create-debian-packages-for-php-extensions/
[2012-12-18 03:30:03 -0500] kadishmal: iverson0881: oh, that's a good start!
[2012-12-18 03:30:06 -0500] iverson0881: not sure if that's okay for your requirements
[2012-12-18 03:30:15 -0500] kadishmal: I will check it and get back if have questions
[2012-12-18 03:30:30 -0500] kadishmal: actually, there is a debian package for the PECL package I need
[2012-12-18 03:30:48 -0500] kadishmal: but it's in an unofficial repo
[2012-12-18 03:30:57 -0500] kadishmal: which means I need to add that channel
[2012-12-18 03:31:08 -0500] kadishmal: do you know by any chance how to add channel through chef?
[2012-12-18 03:31:17 -0500] iverson0881: a pecl channel? no
[2012-12-18 03:31:42 -0500] kadishmal: no,
[2012-12-18 03:31:50 -0500] kadishmal: Launchpad channel for apt-get install
[2012-12-18 03:32:03 -0500] iverson0881: http://community.opscode.com/cookbooks/apt
[2012-12-18 03:32:20 -0500] iverson0881: that cookbook can be used for setting up PPAs or other apt repos
[2012-12-18 03:32:41 -0500] kadishmal: iverson0881: like this http://www.cubrid.org/wiki_tutorials/entry/installing-cubrid-on-ubuntu
[2012-12-18 03:33:22 -0500] kadishmal: but how exactly I should say to that "apt" to add a channel and install a specific package
[2012-12-18 03:33:24 -0500] kadishmal: ?
[2012-12-18 03:33:38 -0500] iverson0881: kadishmal: checkout the link i sent, there are examples in there
[2012-12-18 03:33:59 -0500] iverson0881: look at the PPA example
[2012-12-18 03:34:04 -0500] iverson0881: # add the Nginx PPA; grab key from keyserver
[2012-12-18 03:34:17 -0500] kadishmal: iverson0881: thanks
[2012-12-18 03:34:24 -0500] kadishmal: I will try that now!
[2012-12-18 03:34:28 -0500] kadishmal: thank you very much!
[2012-12-18 04:32:01 -0500] dschargel: What's the wisdom on mannually running a broad 'apt-get upgrade' via knife ssh after a new box is live and the apt recipe & apt-get-update are on board?
[2012-12-18 04:56:56 -0500] dschargel: Maybe beforehand as part of a pre-chef bootsrap pehaps?
[2012-12-18 05:29:29 -0500] bilalcochin: "knife search node role:WebServer" got information about all running and terminated instance.   How to search only running instances
[2012-12-18 05:45:10 -0500] kadishmal: Hi!
[2012-12-18 05:45:25 -0500] kadishmal: has anybody tried using Chef with Vagrant box?
[2012-12-18 05:46:04 -0500] kadishmal: I'm having difficulties to use apt recipe
[2012-12-18 05:46:19 -0500] kadishmal: particularly can't add "apt_repository'
[2012-12-18 05:46:59 -0500] kadishmal: I follow "apt" cookbook's description here http://community.opscode.com/cookbooks/apt
[2012-12-18 05:49:12 -0500] kadishmal: anybody?&&
[2012-12-18 05:49:24 -0500] coderanger: bilalcochin: there is nothing in chef that would know if an instance is terminated
[2012-12-18 05:49:50 -0500] coderanger: you could write a ruby/python script to check the checkin time
[2012-12-18 05:50:09 -0500] coderanger: kadishmal: Please be more specific about your error, all public cookbooks are definitely well-used by many people
[2012-12-18 05:51:10 -0500] kadishmal: coderanger: I have this "chef.add_recipe "apt"" which correctly updates apt with apt-get update
[2012-12-18 05:51:12 -0500] kadishmal: this is ok
[2012-12-18 05:51:37 -0500] kadishmal: but how do I use now the "apt_repository" feature of this apt cookbook?
[2012-12-18 05:52:12 -0500] coderanger: kadishmal: In a recipe file in one of your cookbooks, just use it like any other resource
[2012-12-18 05:52:49 -0500] bilalcochin: coderanger:  Any options to automatically delete the terminated instance from node List
[2012-12-18 05:52:59 -0500] kadishmal: coderanger: who exactly is that?
[2012-12-18 05:53:13 -0500] kadishmal: I don't have any recipe of my own
[2012-12-18 05:53:25 -0500] coderanger: bilalcochin: Chef has no interaction with your cloud system, nor have you said which you are using :)
[2012-12-18 05:53:29 -0500] coderanger: kadishmal: Make one :)
[2012-12-18 05:53:58 -0500] kadishmal: coderanger: why should I make if apt already supports it? I just don't understand how to use it.
[2012-12-18 05:54:20 -0500] kadishmal: what's the point of adding something to a cookbook like apt if users have to create their own recipe anyway to use it
[2012-12-18 05:54:34 -0500] coderanger: Because apt is a library-ish cookbook, it provides a resource you can use in your own application recipes
[2012-12-18 05:54:38 -0500] kadishmal: there should be a way to use it straightforward
[2012-12-18 05:55:00 -0500] coderanger: There is a very straightforward way, just add it to your base recipe :)
[2012-12-18 05:55:22 -0500] kadishmal: coderanger: have you used Vagrant?
[2012-12-18 05:55:27 -0500] coderanger: Yes
[2012-12-18 05:55:39 -0500] coderanger: Vagrant just runs chef-client though
[2012-12-18 05:55:44 -0500] coderanger: it isn't related beyond that
[2012-12-18 05:55:53 -0500] kadishmal: I expected something like using that apt command directly inside "config.vm.provision :chef_solo do |chef|"
[2012-12-18 05:56:22 -0500] kadishmal: for instance, I add there "chef.add_recipe "apt"" already
[2012-12-18 05:56:32 -0500] coderanger: That just sets the runlist for the node
[2012-12-18 05:56:42 -0500] coderanger: The actual cookbooks have to be provided normally
[2012-12-18 05:56:48 -0500] coderanger: just like you did with the apt cookbook
[2012-12-18 05:58:24 -0500] kadishmal: damn... can't get my head around that
[2012-12-18 05:58:46 -0500] coderanger: Vagrant doesn't prevent you from writing Chef recipes
[2012-12-18 05:58:49 -0500] coderanger: Nor does it try to
[2012-12-18 05:58:56 -0500] kadishmal: I know that
[2012-12-18 05:59:00 -0500] coderanger: It just makes it easy to get your existing chef configs loaded into a VM
[2012-12-18 05:59:17 -0500] kadishmal: can you suggest any good place I can learn how to create my very own recipe?
[2012-12-18 05:59:53 -0500] kadishmal: the super long instructions at opscode for writing cookbooks don't help much
[2012-12-18 06:00:02 -0500] coderanger: Certainly http://wiki.opscode.com/display/chef/Introduction+to+Cookbooks+and+More
[2012-12-18 06:00:07 -0500] kadishmal: have already tried that before
[2012-12-18 06:01:08 -0500] coderanger: What specifically are you having issues with?
[2012-12-18 06:01:22 -0500] coderanger: Just have to setup the folder structure like with the apt/ cookbook you have
[2012-12-18 06:01:29 -0500] kadishmal: you mean with writing a cookbook?
[2012-12-18 06:01:30 -0500] coderanger: and make recipes/default.rb
[2012-12-18 06:01:59 -0500] kadishmal: with all those files inside like attributes, resources,...?
[2012-12-18 06:02:09 -0500] kadishmal: or recipes/default.rb is enough?
[2012-12-18 06:02:14 -0500] coderanger: Well you only need a single recipe to start with :)
[2012-12-18 06:06:24 -0500] kadishmal: trying that...
[2012-12-18 06:09:17 -0500] kadishmal: coderanger: would you please take a look at this snippet http://pastebin.com/ddJXJrk9
[2012-12-18 06:09:23 -0500] kadishmal: doesn't seem to work
[2012-12-18 06:09:50 -0500] coderanger: Make sure you add cubid/metadata.rb too
[2012-12-18 06:09:52 -0500] kadishmal: says: "E: Malformed line 1 in source list /etc/apt/sources.list.d/cubrid.list (dist parse)"
[2012-12-18 06:13:11 -0500] coderanger: kadishmal: You need this distribution too
[2012-12-18 08:10:25 -0500] mbc: good morning!
[2012-12-18 08:10:38 -0500] mbc: can someone help? I'm stuck trying to create an Amazon EC2 instance with knife-ec2
[2012-12-18 08:11:01 -0500] mbc: I Followed the following instructions: http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3/
[2012-12-18 08:12:00 -0500] mbc: But y get the following error when i use the knife-ec2 command ERROR: Network Error: Connection timed out  recvfrom(2) Check your knife configuration and network settings
[2012-12-18 08:12:21 -0500] mbc: The instance was created and i can access it with ssh and the pair keys
[2012-12-18 08:13:00 -0500] mbc: but chef-client was not installed
[2012-12-18 08:13:37 -0500] mbc: I used the same server-chef that i used with vagrant succesfully.  Any idea what could be wrong?
[2012-12-18 08:22:15 -0500] lineux_007: hey! question. I am adding a role to an instance. after a chef-client deploy, does the role get removed from the run-list?
[2012-12-18 08:38:50 -0500] coderanger: No? Just update the server
[2012-12-18 08:40:55 -0500] coderanger: mbc: You aren't able to ssh to the new instance, are you behind some kind of proxy or funky firewall?
[2012-12-18 08:42:34 -0500] kreedy: mbc: aws is having api problems in us-east1. possibly related?
[2012-12-18 08:43:46 -0500] coderanger: Oh ec2, you so silly
[2012-12-18 09:00:02 -0500] mbc: @coderanger: I can conect via ssh and the pair key to the instance
[2012-12-18 09:00:26 -0500] mbc: the amazon instance have opened de ssh port
[2012-12-18 09:01:27 -0500] mbc: kreedy: my instances are in eu
[2012-12-18 09:16:37 -0500] lineux_007: some help would be great! is there a way to clear the run-list after a successful chef-client run?
[2012-12-18 09:20:39 -0500] aruntomar: lineux_007: node.run_list.remove(<your recipe/role>)
[2012-12-18 09:21:06 -0500] aruntomar: lineux_007: and this works only on workstation and not on nodes
[2012-12-18 09:21:29 -0500] lineux_007: aruntomar: so it is not automatic? meaning everytime chef-client is run the full run list is rerun?
[2012-12-18 09:24:14 -0500] aruntomar: lineux_007: by default, yes, all the recipes/roles will be run. but that's the core concept, it's idempotent, so if there is nothing to change, then chef will simply skip those steps.
[2012-12-18 09:27:35 -0500] lineux_007: aruntomar: got it. thanks! i'm playing with the npm cookbook and it seems to be reinstalling each package during each run. i'll rewrite it to install only if it is already not installed.
[2012-12-18 09:30:01 -0500] mbc: thank for the answers.
[2012-12-18 09:30:27 -0500] mbc: @coderanger: when run knife-ec2 the output: Waiting for sshddone Bootstrapping Chef on ec2-xx-xxx-xx-xx.xx-xxxx-x.compute.amazonaws.com # afert a long wait # ERROR: Network Error: Connection timed out  recvfrom(2) Check your knife configuration and network settings. How could I debugging this part? to see what it does.
[2012-12-18 09:31:27 -0500] mbc: there are any log?
[2012-12-18 09:31:52 -0500] lineux_007: mbc: the security group has port 22 open?
[2012-12-18 09:32:52 -0500] mbc: Yes is open, I can access it with ssh and the pairs keys using ssh ubuntu@....
[2012-12-18 09:34:20 -0500] mbc: should I open ports in my own router too?
[2012-12-18 09:35:40 -0500] lineux_007: mbc: no. as long as you can ssh to that server from your workstation you are fine.
[2012-12-18 09:37:13 -0500] mbc: Ok, thanks Any other idea what could be wrong?
[2012-12-18 09:37:56 -0500] aruntomar: mbc: what i've encountered is inspite of giving the key while creating the ec2 server via knife, it used to ask for password. so the way we now provision the server is ssh-add <path_to_your_key> , ssh-add -l (to check if the key is added to your key ring) and then perform all the operations.
[2012-12-18 09:38:36 -0500] mbc: I Followed the following instructions: http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3/ and I could use my workstation and my chef-server with a vagrant instance
[2012-12-18 09:43:59 -0500] mbc: thanks aruntomar i added my key with ssh-add and seems work (there are the key when i use ssh-add -l).
[2012-12-18 09:46:58 -0500] aruntomar: mbc: told u, i banged my head for a long time around this problem. adding the key, you no longer have to provide it while provisioning the server.
[2012-12-18 09:56:08 -0500] jimjimovich: having lots of stability problems with chef server on ubuntu 12.04. it crashes all the time. where should i start looking for the problem?
[2012-12-18 09:57:08 -0500] mbc: Iaruntomar: I wanted to say is that I'm using it too and also it was giving a knife, now I know that it is not necessary if you use ssh-add
[2012-12-18 09:59:31 -0500] mbc: But my problem is not resolved yet, any other idea? It seems it never start bootstrapping. There are any log or anythink that i cloud do to see what it happens?
[2012-12-18 10:04:07 -0500] aruntomar: mbc: can you paste the output, to gist or pastebin. also run the knife command with -VV flag
[2012-12-18 10:04:33 -0500] aruntomar: mbc: also knife ec2 server list
[2012-12-18 10:09:32 -0500] mbc: aruntomar ok i'll paste
[2012-12-18 10:13:22 -0500] kbringard: morning everyone
[2012-12-18 10:14:17 -0500] kbringard: quick ? is it possible to have one recipe generate passwords (for instance for a database) on the fly and then have that generated password available for another recipe (for instance to inject into the connection string for said DB)
[2012-12-18 10:17:21 -0500] kbringard: in the past I've done this in an encrypted data bag, but I'd really love to just generate a password on the fly and then store it memory or something
[2012-12-18 10:26:15 -0500] aruntomar: kbringard: yes, you can generate a random password and assign it to your server. as all the data is indexed and searchable, on the other node, just search for that nodes attribute that you are looking for and use it dynamically.
[2012-12-18 10:27:13 -0500] kbringard: aruntomar: thanks do you have links to any examples of how to do this?
[2012-12-18 10:29:03 -0500] aruntomar: kbringard: unfortunately i don't have any links or examples. have you used search functionality for databags earlier? if yes, then, it's the same concept.
[2012-12-18 10:29:48 -0500] kbringard: yea, I've done data bags and encrypted data bags, I guess I just don't know how to assign something to a server?
[2012-12-18 10:32:33 -0500] aruntomar: kbringard: i didn't understand your difficulty. plz elaborate so that i can help.
[2012-12-18 10:33:38 -0500] kbringard: aruntomar: thanks, I appreciate it so I know how to search database_server - search(:node, "database_servers:true") or whatever
[2012-12-18 10:34:33 -0500] kbringard: but I don't know how to assign a variable to a server so once the password gets generated in recipe 1, how do I assign it to a server so I can search like database_password = search(:node, "database_password")
[2012-12-18 10:43:36 -0500] aruntomar: kbringard: ok, let me see, if i could put together some example.
[2012-12-18 10:45:32 -0500] kbringard: thanks aruntomar, I'm searching the web too to see if I can find some also
[2012-12-18 10:48:41 -0500] kbringard: aruntomar: does it work to just arbitrarily create new entries? like node[:database][:password] = "somepassword"
[2012-12-18 10:49:22 -0500] kbringard: which I could then search for later with like search node 'database:password'?
[2012-12-18 10:53:00 -0500] mbc: aruntomar: this is the output https://gist.github.com/4327063
[2012-12-18 10:56:51 -0500] kbringard: aruntomar: it looks like the mysql cookbook may have an example of it...
[2012-12-18 10:56:57 -0500] aruntomar: kbringard: https://gist.github.com/4327083
[2012-12-18 10:57:55 -0500] kbringard: aruntomar: awesome so when you node.set something, it persists in solr so it's searchable on subsequent runs as well, correct?
[2012-12-18 11:01:00 -0500] aruntomar: kbringard: yes. check the attribute precedence and overriding attributes.
[2012-12-18 11:01:13 -0500] kbringard: awesome, this is exactly what I was looking for
[2012-12-18 11:01:15 -0500] kbringard: thanks aruntomar
[2012-12-18 11:02:08 -0500] aruntomar: kbringard: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2012-12-18 11:03:06 -0500] aruntomar: kbringard: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_persistence.html.
[2012-12-18 11:03:43 -0500] aruntomar: kbringard: don't remove the cookbook from the run_list of your mysql server, otherwise those attributes will be lost, in the next chef run
[2012-12-18 11:04:09 -0500] kbringard: ah, good to know so if I switch roles or something, the password settings will be lost
[2012-12-18 11:05:38 -0500] aruntomar: kbringard: yes
[2012-12-18 11:06:54 -0500] kbringard: aruntomar: awesome, thanks, this is exactly what I was looking for
[2012-12-18 11:07:30 -0500] aruntomar: kbringard: another strategy, could be to dynamically generate the databag for your password and use it. that way, rather than search for node attributes, you can search for databag item, without worrying about what's in the run_list of mysql server.
[2012-12-18 11:09:01 -0500] aruntomar: kbringard: that's just another idea, b'cas there are always more than 1 way to do things :)
[2012-12-18 11:09:10 -0500] kbringard: absolutely
[2012-12-18 11:09:37 -0500] aruntomar: kbringard: so choose whatever works best for you :D
[2012-12-18 11:11:06 -0500] kbringard: I think this is why I shied away from using databags: Altering data bags from the node when using the Open Source chef-server requires giving the node's API client admin privileges. In most cases, this is not advisable.
[2012-12-18 11:11:57 -0500] aruntomar: kbringard: altering the databag can be done only by the workstation, that's a limitation that we've faced.
[2012-12-18 11:13:51 -0500] kbringard: yea, which makes sense it's a client function
[2012-12-18 11:14:19 -0500] aruntomar: kbringard: ;)
[2012-12-18 11:15:30 -0500] kbringard: ok, this should give me enough info to get going. thanks again, I really appreciate the help!
[2012-12-18 11:17:35 -0500] aruntomar: kbringard: welcome :)
[2012-12-18 11:22:50 -0500] tempoli: hi guys, i'm trying to find all nodes with a certain role (from within a recipe). Using "search(:node, "role:role_name")", I only get a list of node[node_name]'s back, rather than any of the ohai info (i need the IP address). "knife search node role:role_name" works fine though
[2012-12-18 11:32:00 -0500] mbc: Hi everybody, can someone help? I'm stuck trying to create an Amazon EC2 instance with knife-ec2
[2012-12-18 11:32:06 -0500] mbc: I Followed the following instructions: http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3/
[2012-12-18 11:32:14 -0500] mbc: But y get the following error when i use the knife-ec2 command: https://gist.github.com/4327063
[2012-12-18 11:32:22 -0500] mbc: it only create the instances and i can acces it with ssh and the pairs key but chef-client was not installed.
[2012-12-18 11:32:32 -0500] mbc: I used the same server-chef that i used with vagrant succesfully.
[2012-12-18 11:32:39 -0500] mbc: Any idea what could be wrong?
[2012-12-18 12:34:53 -0500] mbc: Hi everybody, can someone help?
[2012-12-18 12:35:02 -0500] mbc: I'm stuck trying to create an Amazon EC2 instance with knife-ec2
[2012-12-18 12:35:54 -0500] mbc: I got a error and my amazon instance don't bootstrap chef
[2012-12-18 12:39:49 -0500] mbc: I got the following error when i use the knife-ec2 command: https://gist.github.com/4327063
[2012-12-18 12:39:59 -0500] mbc: Any idea what could be wrong?
[2012-12-18 13:33:35 -0500] LowWalker: I feel like there is a loop in the wiki.opscode pages of installing chef-server and chef-client anyone else see that?
[2012-12-18 14:15:08 -0500] emanuelez: hello. chef noob here. I would like to use this cookbook (http://phlippers.net/chef-postgresql/) but i don't know how to use those extra resources to add users and databases. i tried using them in a recipe but chef complains about not finding the resource. any hint?
[2012-12-18 14:43:48 -0500] sc077: what is the best construct to use in a recipe to ensure a block does not get executed first (in this case a gem_package)
[2012-12-18 14:51:23 -0500] kaukas: Hello. I have a huge problem trying to grasp chef-solo+knife-solo (talk about steep learning curves). I am creating a config for a yet-to-be-built VM, using vagrant as a replacement. Currently stuck on knife refusing to create roles or environments without /etc/chef/validation.pem. Why in the world do I need it? I don't have any servers yet!
[2012-12-18 14:53:44 -0500] kaukas: What I really want is to write down all the config into roles, nodes and cookbooks before using it on the real VM
[2012-12-18 14:54:14 -0500] kaukas: Can anybody help me with this? Thanks!
[2012-12-18 14:55:26 -0500] cwj: kallek: if you are using chef-solo then you have little use for knife
[2012-12-18 14:55:35 -0500] cwj: er sorry, kaukas ^^
[2012-12-18 14:55:59 -0500] cwj: knife is an API client for chef-server, so without a chef server you just write your environments and roles into json
[2012-12-18 14:56:08 -0500] cwj: or ruby, i guess
[2012-12-18 14:56:37 -0500] kaukas: cwj: So I can't use `knife role create`?
[2012-12-18 14:56:53 -0500] emanuelez: hw do i use definitions defines in a cookbook i'm using?
[2012-12-18 14:57:03 -0500] cwj: sc077: you can set the action on a resource (like a gem_package) to 'nothing' and then have another resource a send it another run action via notifications
[2012-12-18 14:57:24 -0500] cwj: kaukas: no, you just use an editor to create the roles and/or environments localy
[2012-12-18 14:57:26 -0500] sc077: yea, I did something like that, thx!
[2012-12-18 14:58:23 -0500] cwj: emanuelez: hold on i am looking at that cookbook
[2012-12-18 14:58:39 -0500] emanuelez: cwj: thanks
[2012-12-18 14:59:13 -0500] cwj: so you are having problems with pg_user, pg_database and so on?
[2012-12-18 14:59:57 -0500] cwj: and is this when you are trying to run the postgres::server recipe, or when you try to use those definitions in your own cookbook?
[2012-12-18 15:00:15 -0500] jtimberman: kaukas: the knife 'role|environment|etc' create commands are meant to work directly with a chef server through its API
[2012-12-18 15:01:03 -0500] jtimberman: kaukas: if you're using solo, just use your text editor to create the files you want, but do know that environments are a server only feature.
[2012-12-18 15:01:17 -0500] kaukas: jtimberman: Ah, I see
[2012-12-18 15:01:24 -0500] kaukas: So for chef-solo I only have roles, right?
[2012-12-18 15:01:30 -0500] kaukas: Which I need to create manually
[2012-12-18 15:01:45 -0500] kaukas: I suppose, using this: http://docs.opscode.com/essentials_environments_formats.html
[2012-12-18 15:02:51 -0500] jtimberman: roles: http://docs.opscode.com/chef/essentials_roles.html
[2012-12-18 15:03:38 -0500] cwj: emanuelez: see my question above?
[2012-12-18 15:04:25 -0500] emanuelez: cwj: i'm having problems running pg_user and pg_database
[2012-12-18 15:04:55 -0500] emanuelez: cwj: https://github.com/emanuelez/gerrit/blob/master/recipes/postgres.rb
[2012-12-18 15:06:08 -0500] cwj: can you gist the stacktrace? looks like you have it listed as a requirement in the metadata and you've used include_recipe appropriately.
[2012-12-18 15:08:12 -0500] emanuelez: cwj: it's a compile error
[2012-12-18 15:08:15 -0500] emanuelez: cwj: Cannot find a resource for pg_user on ubuntu version 12.04
[2012-12-18 15:08:33 -0500] emanuelez: ohhh... maybe it's only for previous versions of ubuntu?
[2012-12-18 15:09:13 -0500] cwj: no thats probably not germane
[2012-12-18 15:10:32 -0500] cwj: last few versions of chef have started listing the platform version like that, but ive yet to encounter a LWRP or definition which had platform version constrains
[2012-12-18 15:11:20 -0500] emanuelez: cwj: i see
[2012-12-18 15:11:42 -0500] cwj: are you using chef-server?
[2012-12-18 15:13:05 -0500] cwj: wondering if you have some conflicting versions of cookbooks both claiming to be postgresql
[2012-12-18 15:19:44 -0500] jschneiderhan: so i'm using librarian-chef to manage my orgs cookbooks.  Does anyone have any suggestions on how to best work with a clone of a community cookbook for which you are planning to make large modifications to?  Commiting to the cloned repo for every change then doing a librarian-chef install has a pretty big feedback loop
[2012-12-18 15:22:03 -0500] emanuelez: cwj: i do! and i was using another cookbook with the sam name before
[2012-12-18 15:22:53 -0500] cwj: emanuelez: ok so unless your node is in an environment that specifies a particular version of the postgresql cookbook, your node is going to retrieve the highest numbered version of that cookbook
[2012-12-18 15:23:24 -0500] emanuelez: cwj: i see. so i have to uninstall the unused cookbooks
[2012-12-18 15:23:33 -0500] cwj: probably a good idea
[2012-12-18 15:26:59 -0500] tesmar: hi all, I am using vagrant to provision a VM with chef. I just installed the chef gem and want to download the mysql cookbook to my repo (in the cookbooks dir). When I run knife cookbook site install mysql               it tells me that he cookbook repo path /var/chef/cookbooks does not exist or is not a directory.       How can I get knife to download the mysql (and dependencies) cookbook into a specific directory?
[2012-12-18 15:30:13 -0500] emanuelez: a workflow question. i'm using chef server and i'm developing a new recipe. so lots of trial and error is going on. but i also want to version control my changes. so i use librarian chef to manage my cookbook. but now every time i commit and push i also have to update librarian, upload the cookbook to the server and try it out with a vagrant server. i'm sure there is a less cumbersome way to do this, but i can't figure it out. any hi
[2012-12-18 15:31:39 -0500] tesmar: never mind, I found the -o option
[2012-12-18 15:31:40 -0500] tesmar: but
[2012-12-18 15:31:55 -0500] tesmar: I want to download mysql and dependencies
[2012-12-18 15:32:38 -0500] tesmar: if I use git, it tells me that I have working copy changes (my app's git repo). I just want it to download the cookbook and dependencies, not create a git repo
[2012-12-18 15:34:51 -0500] cwj: emanuelez: we use chef server in practice but i use chef-solo to do development work for that reason
[2012-12-18 15:35:17 -0500] emanuelez: cwj: i see
[2012-12-18 15:35:20 -0500] cwj: emanuelez: but depending on how your existing cookbooks are written, you might have a bit of work to do before you can run them on solo
[2012-12-18 15:36:00 -0500] jschneiderhan: cwj: such as if they rely on searching and whatnot?
[2012-12-18 15:36:21 -0500] cwj: jschneiderhan: yeah or environment specific attributes
[2012-12-18 15:37:03 -0500] cwj: although we are using librarian for managing our repo, the berkshelf integration with vagrant makes developing cookbooks a little less painful
[2012-12-18 15:37:13 -0500] jschneiderhan: emanuelez: I've used git submodules before under the site-cookbooks dir.  It also can get unwieldy, but at least you don't end up commiting a bunch of "trying X" and "trying Y" changes during development
[2012-12-18 15:37:18 -0500] cwj: will probably look at migrating the repo management to berkshelf as well
[2012-12-18 15:37:52 -0500] emanuelez: i will look into it
[2012-12-18 15:51:17 -0500] cdt: has anybody here managed to get test-kitchen to install on ubuntu 12.10?
[2012-12-18 15:52:32 -0500] cdt: I have downloaded the foodcritic gem and updated the metadata to depend on nokogiri 1.5.5, and installed fine, but when test-kitchen installs it tries to install nokogiri 1.5.0 again, but i cannot see the dependency listed in the test-kitchen gemspec?
[2012-12-18 16:32:08 -0500] emanuelez: how do i handles locales i a chef recipe? postgres will only allow me to create a utf8 db if the locales are set to a utf8 mode such as en_US.utf8. but right now they are all en_US
[2012-12-18 16:42:11 -0500] cwj: im not aware of a cookbook for manipulating system locale, so you might have to write one, or modify your bootstrap process to ensure you are configured for the right locale at that time
[2012-12-18 16:53:00 -0500] tesmar: I am getting unknown function "yum_repository"
[2012-12-18 16:53:09 -0500] tesmar: but I hav included the recipe yum:yum
[2012-12-18 16:53:13 -0500] tesmar: yum::yum
[2012-12-18 16:54:22 -0500] makerbreakr: where can i read about tags?
[2012-12-18 16:54:34 -0500] makerbreakr: i cant find it on the wiki
[2012-12-18 16:57:34 -0500] makerbreakr: i found a little snippet in the recipes section, but are tags used for arbritrary metadata?
[2012-12-18 16:57:57 -0500] tesmar: makerbreakr: I don't think this channel is very active
[2012-12-18 16:58:08 -0500] makerbreakr: usually it is
[2012-12-18 16:58:10 -0500] mattray: makerbreakr: tags aren't used much
[2012-12-18 16:58:11 -0500] cwj: depends on the day
[2012-12-18 16:58:33 -0500] mattray: makerbreakr: knife tag -h will help you out
[2012-12-18 16:58:43 -0500] tesmar: oh, I may be new :)
[2012-12-18 16:58:46 -0500] makerbreakr: i have a network of machines, that open up two browsers to display on two different outputs, we have single players, and two players
[2012-12-18 16:58:59 -0500] makerbreakr: is tags a good way to determine this, or write two different recipes?
[2012-12-18 16:59:00 -0500] yfeldblum: mattray, tags may be used much by people who didn't tell you they were using them :D
[2012-12-18 16:59:09 -0500] mattray: http://docs.opscode.com/knife_tag.html
[2012-12-18 16:59:46 -0500] mattray: yfeldblum: I use them myself, but my impression is most people think about them, then use other metadata off of nodes
[2012-12-18 17:00:03 -0500] tesmar: cwj: I added some cookbooks to my vagrant setup, but then I used a role to add recipes. In that role I also went to run "yum_repository" to add a new repo. Chef said unknown function. Where do I put the code to make use of the cookbooks, i.e. to add a new repo using yum_repository?
[2012-12-18 17:00:51 -0500] cwj: tesmar: gist your role
[2012-12-18 17:00:55 -0500] tesmar: sure
[2012-12-18 17:01:11 -0500] cwj: you're making it sound like you tried to use yum_repository directly in the role, and that wont work
[2012-12-18 17:03:15 -0500] mbc: Hi everybody, can someone help? I'm stuck trying to create an Amazon EC2 instance with knife-ec2.
[2012-12-18 17:03:31 -0500] mbc: I Followed the following instructions: http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3/
[2012-12-18 17:03:34 -0500] tesmar: cwj: https://gist.github.com/4329778
[2012-12-18 17:03:48 -0500] mbc: But y get the following error when i use the knife-ec2 command: https://gist.github.com/4327063
[2012-12-18 17:03:49 -0500] cwj: tesmar: yeah that wont work
[2012-12-18 17:03:59 -0500] mbc: it only create the instances and i can acces it with ssh and the pairs key but chef-client was not installed.
[2012-12-18 17:04:02 -0500] tesmar: cwj: oh? I am new to chef..
[2012-12-18 17:04:05 -0500] cwj: tesmar: roles set attributes, you cant put recipe code in there
[2012-12-18 17:04:23 -0500] tesmar: cwj: I see, where does recipe code go?
[2012-12-18 17:04:32 -0500] mbc: I used the same server-chef that i used with vagrant succesfully.     Any idea what could be wrong?
[2012-12-18 17:04:33 -0500] cwj: tesmar: recipe code goes in a recipe in a cookbook
[2012-12-18 17:04:56 -0500] tesmar: cwj: I thought cookbooks were static libraries that you download and then "include" and "customize"
[2012-12-18 17:05:08 -0500] tesmar: cwj: maybe I'm wrong
[2012-12-18 17:05:21 -0500] cwj: tesmar: there are different types of cookbooks, some will provide library functions, like yum-repository
[2012-12-18 17:05:38 -0500] cwj: others will include those library cookbooks and use them to install applications
[2012-12-18 17:06:43 -0500] cwj: so what kind of packages are you getting from this repo? e.g. are they packages you install on every node you manage, or just for nodes running a particular application?
[2012-12-18 17:07:32 -0500] cwj: if its for every node, you might write a 'base' cookbook which performs all the tasks necessary to install your common packages, config files, etc
[2012-12-18 17:08:32 -0500] cwj: an application cookbook might require that base cookbook and whatever other cookbooks are needed to configure that applications dependencies
[2012-12-18 17:15:56 -0500] mbc: i use the knife-ec2 command with the following output: https://gist.github.com/4327063 Any idea what could be wrong?
[2012-12-18 17:21:38 -0500] makerbreakr: where do you guys store global variables?
[2012-12-18 17:24:21 -0500] yfeldblum: makerbreakr, we usually try to avoid global variables, but when we can't, it depends on what it's holding and what it's used for and what uses it
[2012-12-18 17:26:52 -0500] tesmar: cwj: this is very helpful
[2012-12-18 17:26:56 -0500] tesmar: thank you for directing me
[2012-12-18 17:27:03 -0500] aruntomar: mbc: don't know, what could be causing your issue, but i've been using this ami ami-3d4ff254 and also don't give it -d <distro>. if you don't specify the distro, it'll use the omnibus package for your platform.
[2012-12-18 17:27:28 -0500] tesmar: in this instance, I want to install php54 from the remi repository, so I'll make a cookbook that includes YUM and runs that repo comman
[2012-12-18 17:27:46 -0500] makerbreakr: yfeldblum, i think i need an ecrypted databag
[2012-12-18 17:28:30 -0500] makerbreakr: its holding an arbitrary  key, that is used to generate an md5 hash, the md5 hash is then used in API calls to a 3rd party service
[2012-12-18 17:29:55 -0500] mbc: aruntomar: Ok thank you i 'll try
[2012-12-18 17:31:22 -0500] aruntomar: mbc: the ami i gave u is provided by ubuntu. the ssh user is ubuntu. so you can use -x ubuntu in knife ec2 parameter
[2012-12-18 17:32:07 -0500] yfeldblum: makerbreakr, $my_global_variable = "some data"
[2012-12-18 17:38:36 -0500] dougireton: Just posted a new blog post on using helper methods from other cookbooks in your own recipes: http://dougireton.com/blog/2012/12/16/how-to-include-the-windows-cookbook-helper-methods-in-your-chef-recipe/
[2012-12-18 17:41:43 -0500] geekbri: dougireton: require just loads a ruby file, include runs the code
[2012-12-18 17:42:13 -0500] geekbri: whoops thats not what I meant to say
[2012-12-18 17:42:16 -0500] oddover: hey chefs. I want to have a definition that gets called multiple times, but I don't want it to do anything until after the last time it's called. How would I accomplish that?
[2012-12-18 17:42:26 -0500] geekbri: 4am ops issues make the brain fuzzy
[2012-12-18 17:42:48 -0500] geekbri: require runs the file, include takes all the methods and what not and shoves them in what you are currently in
[2012-12-18 17:43:48 -0500] oddover: eg: the definition is filling a hash, and when it's done being filled, I'd like it to create a template from that hash
[2012-12-18 17:44:13 -0500] dougireton: thanks geekbri, that's helpful
[2012-12-18 17:44:55 -0500] geekbri: dougireton: Sorry for the lack of context, your blog post said you weren't sure why require didn't work :)
[2012-12-18 17:45:10 -0500] geekbri: I'm a bit fuzzy today with the lack of sleep and waking up early for ops issues :)
[2012-12-18 17:45:18 -0500] dougireton: geekbri: thanks, no worries
[2012-12-18 18:03:58 -0500] qhartman: Looking at building a cookbook to deploy Mysql Cluster 7.2. Not seeing anything in the community cookbooks or Github. Anyone happen to know if anyone else is working on this?
[2012-12-18 18:18:56 -0500] aruntomar: qhartman: i'm working on it
[2012-12-18 18:33:32 -0500] qhartman: aruntomar, have you gotten very far? I'm just diving in, and it seems like making the cookbook sophisticated enough to handle different deployment needs will be pretty complex
[2012-12-18 18:37:33 -0500] aruntomar: qhartman: well i started may be 2 hrs back. i realized that to fulfill all the deployment needs would be pretty complex. so my thought is that i'll first complete the quick start steps as mentioned on the mysql cluster website and then will keep adding more stuff to it.
[2012-12-18 18:39:00 -0500] aruntomar: qhartman: if you want to join me, let me know, i'll push the cookbook on github, so that we can collaborate.
[2012-12-18 18:41:56 -0500] JasonF: If I run chef-client NOT in daemon mode, and specify a small splay, will it do what I expect? (Run once; but delay beginning the run for 0-[] seconds)?
[2012-12-18 18:42:18 -0500] ashb: JasonF: i doubt it;
[2012-12-18 18:44:20 -0500] ashb: perl -e 'sleep (rand()*15)' && chef-client
[2012-12-18 18:44:27 -0500] ashb: or other ways of sleeping
[2012-12-18 19:01:58 -0500] josephholsten_: is there a code review today?
[2012-12-18 19:03:29 -0500] Schuyler: question: I have a line in a cookbook that reads 'package "git"'. When I bootstrap a node using the recipe, it throws an error because it tries to install a particular version of Git that's not in the Ubuntu repo anymore.
[2012-12-18 19:03:39 -0500] Schuyler: question is: where is that version number determined?
[2012-12-18 19:03:48 -0500] Schuyler: I can't find it anywhere in my cookbooks.
[2012-12-18 19:03:57 -0500] whilp: Schuyler: try running apt-get update (or equivalent) before chef on bootstrap
[2012-12-18 19:04:15 -0500] Schuyler: on the chef server?
[2012-12-18 19:04:32 -0500] awgross: Schuyler: try git-core
[2012-12-18 19:04:33 -0500] Schuyler: the target node *does* run apt-get update first
[2012-12-18 19:04:45 -0500] whilp: Schuyler: on the node that's bootstrapping, yeah
[2012-12-18 19:04:49 -0500] Schuyler: the version is specified in the recipe somehow
[2012-12-18 19:05:02 -0500] whilp: not if all you have is `package "git"`
[2012-12-18 19:05:29 -0500] whilp: if you've run apt-get update before chef-{solo,client} and still get that error, then i'm not sure what's up
[2012-12-18 19:07:34 -0500] Schuyler: here's the error log: http://nopaste.info/459ff28e2c.html
[2012-12-18 19:07:35 -0500] awgross: Schuyler: check attributes.rb file
[2012-12-18 19:07:53 -0500] Schuyler: whilp: I have "apt-get update" running first, trust me, I can see it in the log
[2012-12-18 19:08:06 -0500] whilp: i believe you, i'm just saying i don't know what's wrong if that's the case ;)
[2012-12-18 19:08:07 -0500] Schuyler: chef is trying to install a *specific* version of the git package
[2012-12-18 19:08:28 -0500] Schuyler: awgross: the specific version of git is mentioned nowhere in my chef-repo (see the end of the log)
[2012-12-18 19:08:39 -0500] awgross: Schuyler: grep for 1.7
[2012-12-18 19:08:42 -0500] Schuyler: I don't have a weird recipe for git itself or anything
[2012-12-18 19:08:57 -0500] whilp: Schuyler: the version in the compiled resource is discovered from the apt cache
[2012-12-18 19:09:05 -0500] Schuyler: nothing
[2012-12-18 19:09:41 -0500] awgross: then just constrain it yourself
[2012-12-18 19:09:44 -0500] awgross: package "git" do
[2012-12-18 19:09:47 -0500] awgross: action :install
[2012-12-18 19:10:18 -0500] awgross: version "whatever"
[2012-12-18 19:10:24 -0500] awgross: end
[2012-12-18 19:11:22 -0500] awgross: also, what version of ubuntu are you running since 1:1.7.9.5-1 works for me
[2012-12-18 19:11:25 -0500] awgross: on 12.04.1
[2012-12-18 19:11:39 -0500] awgross:  (in us-east1)
[2012-12-18 19:11:42 -0500] Schuyler: I'm on 12.04.1
[2012-12-18 19:11:52 -0500] Schuyler: so... why does that command fail with a 100 error, hmm.
[2012-12-18 19:11:59 -0500] awgross: run it yourself on the box
[2012-12-18 19:12:16 -0500] awgross: or look higher up in the stack trace, it should tell you
[2012-12-18 19:12:24 -0500] Schuyler: didn't see it in the stack trace, I looked
[2012-12-18 19:12:29 -0500] Schuyler: but running it manually is a good idea
[2012-12-18 19:12:35 -0500] Schuyler: I just don't understand where that version is coming from!
[2012-12-18 19:12:38 -0500] awgross: hmm may have to run with "-l debug"
[2012-12-18 19:12:46 -0500] Schuyler: that's the part I was hoping someone could explain to me
[2012-12-18 19:12:55 -0500] Schuyler: why is it that chef is supplying a version in the first place?
[2012-12-18 19:13:04 -0500] awgross: Schuyler: it looks liek chef is picking it automatically by checking the apt cache
[2012-12-18 19:13:14 -0500] awgross: it will always try to install with a version
[2012-12-18 19:13:22 -0500] whilp: 19:09:57 whilp Schuyler: the version in the compiled resource is discovered from the apt cache
[2012-12-18 19:14:28 -0500] Schuyler: from the local apt cache on the target system?
[2012-12-18 19:14:32 -0500] Schuyler: or on the chef server?
[2012-12-18 19:14:37 -0500] Schuyler: btw: awgross, you were right
[2012-12-18 19:14:37 -0500] Schuyler: sudo apt-get -q -y install git=1:1.7.9.5-1
[2012-12-18 19:14:38 -0500] Schuyler: E: dpkg was interrupted, you must manually run 'sudo dpkg --configure -a' to correct the problem.
[2012-12-18 19:14:42 -0500] Schuyler: *sad trumpet*
[2012-12-18 19:14:49 -0500] whilp: Schuyler: target
[2012-12-18 19:14:54 -0500] Schuyler: something in the run list earlier is bunging up dpkg
[2012-12-18 19:15:06 -0500] Schuyler: so, -l debug will give me more debug output?
[2012-12-18 19:15:55 -0500] awgross: correct
[2012-12-18 19:16:06 -0500] awgross: good luck
[2012-12-18 19:16:10 -0500] Schuyler: (on knife bootstrap?)
[2012-12-18 19:16:18 -0500] Schuyler: ok, thanks for the feedback, guys
[2012-12-18 19:16:32 -0500] awgross: if you want to do it in knife bootstrap
[2012-12-18 19:16:35 -0500] Schuyler: I understand what chef is doing a little better, and yes it's clear that the problem is with an earlier recipe
[2012-12-18 19:16:36 -0500] awgross: add this to your knife config
[2012-12-18 19:16:37 -0500] whilp: Schuyler: pass -l debug to chef-client or solo
[2012-12-18 19:16:48 -0500] awgross: log_level                :debug
[2012-12-18 19:16:55 -0500] Schuyler: thanks awgross I'll try that
[2012-12-18 19:17:01 -0500] awgross: replace an existing line if it's there
[2012-12-18 19:17:03 -0500] Schuyler: and thanks to both of you for considering my question
[2012-12-18 19:18:01 -0500] Schuyler: yah my log_level was set to :info
[2012-12-18 19:18:05 -0500] Schuyler: good to know
[2012-12-18 19:19:17 -0500] kindsol: anybody know of a "filesystem" cookbook that will partition and/or format a block device?
[2012-12-18 19:19:18 -0500] pwelch: does everyone get the "Setting attributes without specifying a precedence is deprecated and will be removed in Chef 11.0." warning on chef_runs or just me? I thought all of the issues were caught but Im still getting a warning with a backtrace of: chef-10.16.2/bin/../lib/chef/node/attribute.rb:449:in `method_missing'
[2012-12-18 19:19:40 -0500] doomviking: yeah I see that in my runs, as well
[2012-12-18 19:19:53 -0500] awgross: kindsol: what env for the block device?
[2012-12-18 19:20:02 -0500] awgross: awgross: Vmware style? AWS? Rackspace>
[2012-12-18 19:20:14 -0500] pwelch: doomviking: so probably just a general warning to everyone?
[2012-12-18 19:21:03 -0500] kindsol: i.e. vagrant-persistent-stoage or an EBS volume
[2012-12-18 19:21:07 -0500] doomviking: pwelch: I haven't dug too far into it
[2012-12-18 19:21:12 -0500] doomviking: as in, not at all
[2012-12-18 19:21:23 -0500] awgross: kindsol: nothing unified yet, i have some stuff for EBS, but more for RAID style
[2012-12-18 19:21:51 -0500] kindsol: awgross: I imagine it would just take a device (i.e. '/dev/sdb'), partition and format
[2012-12-18 19:22:34 -0500] awgross: kindsol: unsure if one exists.  Out of curiousity, why are you partitioning block storage anyways, why not just provision a new "drive"
[2012-12-18 19:23:39 -0500] kindsol: awgross: just making one big partition it so I can format.
[2012-12-18 19:23:47 -0500] awgross: oic
[2012-12-18 19:23:53 -0500] awgross: kindsol: atm my "recipe
[2012-12-18 19:24:20 -0500] awgross: kindsol: " is just mount, mkfs, echo to fstab.  Not very sophisticated
[2012-12-18 19:24:39 -0500] awgross: kindsol: let me know if you find something good (also check out the AWS cookbook for provisioning the EBS volume)
[2012-12-18 19:24:40 -0500] kindsol: yeah, pretty simple stuff
[2012-12-18 19:25:01 -0500] kindsol: that why I though someone might have wrapped it in a nice LWRP interface by now
[2012-12-18 19:25:30 -0500] kindsol: s/though/thought
[2012-12-18 19:25:42 -0500] josephholsten_: anyone heard of a knife-libvirt, knife-kvm or similar?
[2012-12-18 19:26:06 -0500] redgetan: How do i configure the upstream module for the nginx cookbook - https://github.com/opscode-cookbooks/nginx ? it looks like it doesnt currently support it
[2012-12-18 19:26:26 -0500] erratic: yes
[2012-12-18 19:26:28 -0500] erratic: knife kvm
[2012-12-18 19:26:31 -0500] kindsol: awgross: maybe I will look at making a 'filesystem' generic cookbook with a simple LWRP that does that
[2012-12-18 19:26:52 -0500] erratic: though personally, I use knife-rackspace the most because I mostly use chef at work
[2012-12-18 19:28:12 -0500] erratic: though I've been thinking about figuring out how to use knife kvm at home, I already have dhcp/tftp/bootp setup for pxe installs, I need to figure out how to do an unattended install of ubuntu from that. Also I know that libvirt/kvm has the ability to pass kernel paramters along to the kernel when booting, it would be nice if I could have knife do that.
[2012-12-18 19:29:18 -0500] erratic: although its possible that what Im thinking would be a good idea to pass parameters along for may be better suited as a bootstrap template.
[2012-12-18 19:30:36 -0500] erratic: which are really handy, I have two bootstrap templates myself, one for creating a chef server, and one for creating chef clients, both install RVM then install chef.
[2012-12-18 19:45:08 -0500] xmltok: is there a good method for simulating search and databag information from chef-solo?
[2012-12-18 19:46:13 -0500] awgross: xmltok: i created a custom library
[2012-12-18 19:46:20 -0500] awgross: with a search function
[2012-12-18 19:46:27 -0500] awgross: xmltok: it mocks the request in chef solo
[2012-12-18 19:48:28 -0500] whilp: solo can do a limited sort of search, too: https://github.com/edelight/chef-solo-search
[2012-12-18 19:54:35 -0500] xmltok: hmm
[2012-12-18 20:09:19 -0500] mirk_: Anyone have any advice on running chef-solr in a non-standard directory (say an EBS volume)?
[2012-12-18 20:09:36 -0500] mirk_: like /mnt/sde1
[2012-12-18 20:11:45 -0500] ctracey: mirk_: not really other than we avoid EBS at all cost
[2012-12-18 20:12:27 -0500] mirk_: ctracey: is that a general statement about ebs or just for solr?
[2012-12-18 20:12:34 -0500] ctracey: ebs
[2012-12-18 20:12:41 -0500] mirk_: hmmmm....
[2012-12-18 20:13:09 -0500] ctracey: is there a particular reason it needs to be EBS?
[2012-12-18 20:13:40 -0500] jbz: EBS = danger Will Robinson
[2012-12-18 20:13:43 -0500] awgross: dun dun dun, the EBS argument begins
[2012-12-18 20:13:50 -0500] mirk_: our default images are small and we put most things on ebs or san (if on vmware).
[2012-12-18 20:13:52 -0500] jbz: (sorry, unsolicited pilo-on there)
[2012-12-18 20:13:57 -0500] jbz: *pile-on
[2012-12-18 20:13:58 -0500] ctracey: no argument
[2012-12-18 20:14:16 -0500] ctracey: we use EBS extensively, but only for specifica workloads
[2012-12-18 20:14:24 -0500] ctracey: specific*
[2012-12-18 20:15:01 -0500] ctracey: mirk - why not ephemeral drives?
[2012-12-18 20:15:49 -0500] mirk_: That's the point, not that it is ebs.  Say I want it on a new mount like /mnt/sda1
[2012-12-18 20:16:36 -0500] mirk_: Then we can avoid the ebs discussion for today :)
[2012-12-18 20:16:42 -0500] cwj: theres a mount resource
[2012-12-18 20:16:54 -0500] ctracey: depending on size of the instance, there are multiple ephemeral stores
[2012-12-18 20:17:37 -0500] cwj: but if you are trying to put your chef-solo data there, the mount resource doesn't help you
[2012-12-18 20:21:51 -0500] mirk_: I'm looking to move the location of the chef-solr data dir (/var/lib/chef/solr)
[2012-12-18 20:22:33 -0500] mirk_: I've updated the /etc/chef/solr.rb files but there is more going on since that isn't doing it.
[2012-12-18 20:23:28 -0500] khimera: hey does chef store a log file on the instance that i can take a look at?
[2012-12-18 20:23:48 -0500] mirk_: I think I'm just going to cheat and mount my disk under /var/lib/chef...
[2012-12-18 20:24:01 -0500] jbz: khimera: The chef-client prefs file contains the log file location and log level
[2012-12-18 20:24:18 -0500] doomviking: /etc/chef/client.rb
[2012-12-18 20:24:20 -0500] cwj: mirk_: im not very handy with solo but you might look at how vagrant sets up solo
[2012-12-18 20:24:27 -0500] jbz: thanks doomviking!
[2012-12-18 20:24:41 -0500] cwj: mirk_: since i think it uses an alternate mount point
[2012-12-18 20:24:45 -0500] mirk_: cwj: I'm not using solo.
[2012-12-18 20:24:56 -0500] cwj: oh solr
[2012-12-18 20:24:59 -0500] mirk_: it's the solr part of chef :)
[2012-12-18 20:25:01 -0500] cwj: need more coffee
[2012-12-18 20:25:02 -0500] mirk_: yeah
[2012-12-18 20:25:24 -0500] khimera: it set to STDOUT, is it possible to change it to a file?
[2012-12-18 20:26:23 -0500] doomviking: khimera: log_location     "/var/log/chef-client.log"
[2012-12-18 20:26:37 -0500] doomviking: (thats in my client.rb)
[2012-12-18 20:26:49 -0500] khimera: ok thanks.
[2012-12-18 20:28:01 -0500] doomviking: could be shipping it to logstash...*evil laugh*
[2012-12-18 20:32:14 -0500] kbringard: hey guys, (hopefully) quick question...
[2012-12-18 20:32:47 -0500] kbringard: I'm getting an SSL error when attempting to run a recipe because the correct certificate bundle isn't being loaded by chef
[2012-12-18 20:33:30 -0500] kbringard: I can make it work by exporting SSL_CERT_FILE=blahblahblah, but I'm having trouble getting that to take effect on automated cron chef runs
[2012-12-18 20:33:33 -0500] kbringard: any thoughts?
[2012-12-18 20:37:34 -0500] makerbreakr: can i create an attribute from a recpie and have it show up in the webui?
[2012-12-18 20:37:43 -0500] makerbreakr: ie,
[2012-12-18 20:37:43 -0500] makerbreakr: node.set['playlist_published_at'] = current_playlist["publish_data"]["date"]
[2012-12-18 20:44:21 -0500] makerbreakr: nm
[2012-12-18 20:44:44 -0500] cmceldowney: hi all-- wondering what would be the best way in a recipe to check if a given server is running. e.g. I want to check that github is running before starting in on a deploy_resource
[2012-12-18 20:45:24 -0500] cmceldowney: sorry.. meant deploy_revision
[2012-12-18 20:46:14 -0500] jbz: cmceldowney: Probably embedding a check script in a conditional?
[2012-12-18 20:50:05 -0500] jpb_: I have a question that I can't think of a good google search for - I want to detect what version of Chef is running from within a cookbook. We have some older nodes that are running a chef version old enough that it doesn't have a chef_gem package type, so I want to use chef_gem on new nodes, and regular gem for the other nodes
[2012-12-18 20:53:42 -0500] cmceldowney: jpb_: you can check the chef_packages ohai value-- e.g. node['chef_packages']['chef']['version']
[2012-12-18 20:54:01 -0500] awgross: cmceldowney: use an HTTP request that notifies
[2012-12-18 20:54:38 -0500] jpb_: ty cmceldowney
[2012-12-18 20:55:00 -0500] cmceldowney: awgross: would you please elaborate a little more? If I'm trying to use git and it's listening on port 22, then I don't understand how I would wire up an http request to health check the git server....
[2012-12-18 20:55:37 -0500] awgross: cmceldowney: true, i was thining more about pinging github to make sure it is alive
[2012-12-18 20:55:44 -0500] daneroo: Can I invoke a helper in one cookbooks libraries, from another cookbook ?
[2012-12-18 20:55:47 -0500] awgross: cmceldowney: are you checking more to make sure a repo exists?
[2012-12-18 20:56:19 -0500] cmceldowney: awgross: no, just using a custom git repo, and we had issues where deploy_revision seemed to hang the entire chef-client run because of a network connectivity issue to the repo. So I want to run a quick health check before I try the deploy_Revision
[2012-12-18 20:56:21 -0500] awgross: daneroo: is the coobook w/ the library in the run_list?
[2012-12-18 20:56:33 -0500] daneroo: yes
[2012-12-18 20:57:01 -0500] daneroo: its the windows cookbook from opscode. The helper seems to be namespaced
[2012-12-18 20:57:02 -0500] awgross: cmceldowney: hmm, maybe just to a quick shell out and telnet or something then have that block notify the deploy_resource on success
[2012-12-18 20:57:10 -0500] daneroo: Windows::Helper
[2012-12-18 20:57:25 -0500] awgross: danderson: you probably just need to load it then, instantiate a copy and you should have no issues
[2012-12-18 20:58:05 -0500] daneroo: :awgross  how do I instantiate a copy ? says the total ruby noob
[2012-12-18 20:58:53 -0500] awgross: daneroo: is the Windows::Helper a class or a module?
[2012-12-18 20:59:00 -0500] daneroo: module
[2012-12-18 20:59:03 -0500] awgross: should be able to tell by looking at the library file
[2012-12-18 20:59:03 -0500] awgross: ok
[2012-12-18 20:59:44 -0500] daneroo: module Windows \n \t module Helper \n
[2012-12-18 21:00:26 -0500] daneroo: :awgross that helper ends with this: Chef::Recipe.send(:include, Windows::Helper)
[2012-12-18 21:00:27 -0500] awgross: class Chef::Recipe
[2012-12-18 21:00:27 -0500] awgross:   include Windows::Helper
[2012-12-18 21:00:27 -0500] awgross: end
[2012-12-18 21:00:28 -0500] awgross: my_local_var = windows_helper_method(my_args)
[2012-12-18 21:00:40 -0500] daneroo: cool, will try
[2012-12-18 21:00:44 -0500] awgross: daneroo: actually, then you should e able to just use the methods w/ namespace
[2012-12-18 21:00:56 -0500] awgross: daneroo: my chunky thing is if you dont do .send
[2012-12-18 21:01:27 -0500] awgross: try Chef::Recipe.windows_method, not 100% sure how it gets put in
[2012-12-18 21:01:33 -0500] daneroo: so I should invoke with Windows::Helper::cached_file(src, cksum)
[2012-12-18 21:01:44 -0500] daneroo: ok, will try things, thanx
[2012-12-18 21:01:53 -0500] jbz: cmceldowney: Nasty idea: use Nmap to scan for port 22 on github and grep for 'Open' in the result? For the deploy_revision conditional?
[2012-12-18 21:01:54 -0500] awgross: unsure, try that, try cached_file(src, cksum) too
[2012-12-18 21:02:12 -0500] jbz: That should avoid issues of having your test need to log in/have key etc
[2012-12-18 21:02:23 -0500] cmceldowney: jbz: hm. yeah, that seems a little nasty, I agree
[2012-12-18 21:02:29 -0500] jbz: yeah :-)
[2012-12-18 21:02:44 -0500] cmceldowney: jbz: tough because some git providers allow you to ssh in with your git credentials and tell you what repos you have access to
[2012-12-18 21:02:51 -0500] jbz: But checking SSH availability without having to worry about keys etc. is sorta unclean
[2012-12-18 21:03:06 -0500] jbz: let me understand: you just care if the ssh server is responding properly, right?
[2012-12-18 21:03:18 -0500] cmceldowney: jbz: yeah, I think that would be sufficient
[2012-12-18 21:03:24 -0500] jbz: yeah, that's what led me to nmap
[2012-12-18 21:03:37 -0500] jbz: if you tightly constrain what you want it to do, it'll be pretty fast and network-light
[2012-12-18 21:03:55 -0500] jbz: generally if github isn't working, the ssh connection should fail
[2012-12-18 21:04:16 -0500] jflowers: what would cause this error while uploading cookbooks with knife?: ERROR: Errno::EACCES: Permission denied - /var/chef/cache/checksums/chef-test-file--var-lib-jenkins-jobs-
[2012-12-18 21:13:11 -0500] oddover: hey chefs. Is anyone here familiar with edelight's chef-solo-search
[2012-12-18 21:15:35 -0500] mirk_: jflowers: can you provide a copy of the server.log output (in pastie).
[2012-12-18 21:15:57 -0500] jflowers: the server?
[2012-12-18 21:16:04 -0500] daneroo: :awgross Would it make a difference that i'm trying to invoke that helper from a ruby_block ?
[2012-12-18 21:16:21 -0500] jflowers: isn't this error on the knife client side?
[2012-12-18 21:16:40 -0500] mirk_: jflowers: Yes.  /var/log/chef-server.log
[2012-12-18 21:17:29 -0500] mirk_: jflowers: Not sure yet.  More often (for me)  the problem is on the server filesystem or couchdb side.
[2012-12-18 21:22:18 -0500] jflowers: here is a gist: https://gist.github.com/4332123
[2012-12-18 21:22:39 -0500] jflowers: I did not see anything that looks like an error though :-(
[2012-12-18 21:23:50 -0500] jflowers: the knife run was at: 2012-12-18T16:01:12-05:00
[2012-12-18 21:31:11 -0500] benj__: hi all, im a chef newb and I'm trying to grok this error "in `require': no such file to load -- chef/mixin/shell_out (LoadError)"
[2012-12-18 21:31:21 -0500] benj__: this is from the python cookbook.
[2012-12-18 21:31:32 -0500] benj__: is that a resourse that chef itself should be providing?
[2012-12-18 21:32:17 -0500] cwj: benj__: yeah it should
[2012-12-18 21:32:21 -0500] cwj: what version of chef?
[2012-12-18 21:32:45 -0500] benj__: Chef: 0.8.16
[2012-12-18 21:33:27 -0500] benj__: not sure if that is way out of date, but it's the most recent one on the ubuntu release I'm stuck on (as of now)
[2012-12-18 21:33:41 -0500] cwj: yeah i'd say thats quite old at this point
[2012-12-18 21:33:56 -0500] cwj: i think opscode provides packages in an apt repo they maintain
[2012-12-18 21:34:05 -0500] cwj: but you might be better off exploring the omnibus installer
[2012-12-18 21:34:29 -0500] cwj: although you'd still want opscode's packages for setting up a chef server
[2012-12-18 21:35:20 -0500] benj__: my simple use of chef right now is just chef-solo, so I'll look into giving the opscode's package a whirl. thanks!
[2012-12-18 21:35:31 -0500] cwj: no problem
[2012-12-18 21:36:13 -0500] smeat: Does anyone know if opscode has any plans to create an interface for provisioning and management of virtual machines that are tied into chef?
[2012-12-18 21:37:03 -0500] miah: how people manage their virtual machines is too varied
[2012-12-18 21:37:04 -0500] smeat: I know that knife has plugins that do those things, I am talking about a full GUI
[2012-12-18 21:37:12 -0500] miah: people use guis?
[2012-12-18 21:37:14 -0500] smeat: ha
[2012-12-18 21:37:22 -0500] miah: provision with a ruby script
[2012-12-18 21:37:48 -0500] smeat: There are some advantages to having a graphical overview of VM lifecycles.
[2012-12-18 21:38:32 -0500] jflowers: I figured out the perms issue
[2012-12-18 21:38:50 -0500] jflowers: I was setting perms on /etc/chef when the error was about /var/chef
[2012-12-18 21:38:55 -0500] cwj: smeat: i dont expect to see something like that from opscode
[2012-12-18 21:39:06 -0500] cwj: but you never know
[2012-12-18 21:40:15 -0500] smeat: I know that puppet has their Puppet Enterprise that does this, so I was just curious if this was something that Opscode had considered
[2012-12-18 21:41:07 -0500] jtnz: I'm trying to use gem_package to install pony gem on 10.16.2, but I'm getting a "buffer overflow detected", any ideas?
[2012-12-18 21:45:05 -0500] jtimberman: smeat: we already support a number of public and private cloud implementations with knife plugins, and folks in the community have created others for managing virtual machines / containers (esxi, kvm, lxc, and more).
[2012-12-18 21:45:27 -0500] jtimberman: smeat: some folks also contributed Chef support to Razor, which has similar goals, though I haven't worked with the project myself.
[2012-12-18 21:46:21 -0500] planetrobbie: Hi all, when using users:sysadm recipe having a databag user with "groups": [ "sysadmin", "www-data" ] should put the user in the www-data group ? it isn't doing it for me ? is there something I misunderstood ? thx
[2012-12-18 21:47:15 -0500] smeat: jtimberman: Correct, I have worked with the knife plugins and they do what they say on the box, I was just interested in a more complete solution that would also be able to give me a more graphical view of my VM environment
[2012-12-18 21:54:17 -0500] khimera: does chef launch a sub-shell when using execute/bash references?
[2012-12-18 21:54:37 -0500] khimera: i am running a script, but it does not stay running
[2012-12-18 21:54:50 -0500] khimera: but executers successfully.
[2012-12-18 21:55:13 -0500] awgross: khimera: is shells out, specifically calls a chef method called shell_out! I believe
[2012-12-18 21:55:16 -0500] awgross: it*
[2012-12-18 21:55:30 -0500] khimera: hmm, is it possible to run a script and keep it alive?
[2012-12-18 21:55:58 -0500] doomviking: I use runit for stuff like that
[2012-12-18 21:55:59 -0500] awgross: what sort of thing are you trying to do?
[2012-12-18 21:56:17 -0500] khimera: i am running a php script that should run in background
[2012-12-18 21:56:31 -0500] khimera: it handles some worker processits a php daemon i guess you can ssay
[2012-12-18 21:56:44 -0500] awgross: sounds like a job for runit or supervisor etc
[2012-12-18 21:57:03 -0500] doomviking: monit, god, etc
[2012-12-18 21:57:17 -0500] awgross: khimera: you'd have to use a nohup or something otherwise, would be messy
[2012-12-18 21:57:34 -0500] khimera: yea i tried nohup but it did not work
[2012-12-18 21:57:48 -0500] khimera: ill try w/ execute instead of bash
[2012-12-18 21:58:36 -0500] dazl: I'm attempting to use the application cookbook and I get      "undefined method `application' for Chef::Resource::Template"     ---------- /var/chef/cache/cookbooks/application/resources/default.rb:125:in `method_missing'
[2012-12-18 21:59:13 -0500] khimera: otherwise you say i should do a runit ?
[2012-12-18 21:59:26 -0500] awgross: runit, god, monit supervisor
[2012-12-18 21:59:39 -0500] awgross: there are a multitude of apps to help you run daemons, pick your poison
[2012-12-18 22:02:31 -0500] khimera: awgross: thanks.
[2012-12-18 22:04:04 -0500] agoddard: looking at the mysql cookbook, are there any obvious disadvantages to having the my.cnf loop through all the tunable keys/values rather than explicitly listing each in the file? on the plus side, it would make adding new variables easy without editing the cookbook..
[2012-12-18 22:14:42 -0500] agoddard: ^ something like this.. https://gist.github.com/4332571
[2012-12-18 22:18:18 -0500] miah: i'm all for that
[2012-12-18 22:18:56 -0500] agoddard: miah: hey hey! :D
[2012-12-18 22:19:03 -0500] miah: hi =)
[2012-12-18 22:19:22 -0500] agoddard: I might have a play around with it tonight and see what I come up against.. we have a ton of variables that I need to add..
[2012-12-18 22:20:23 -0500] agoddard: there's also some funky stuff like: https://github.com/opscode/cookbooks/blob/master/mysql/templates/default/my.cnf.erb#L67 ignoring https://github.com/opscode/cookbooks/blob/master/mysql/attributes/server.rb#L79
[2012-12-18 22:20:44 -0500] miah: ya. there are some defaults in there that are just... ugh.
[2012-12-18 22:21:38 -0500] jtimberman: agoddard: i kind of want to refactor all the config in mysql's my.cnf to follow the pattern done in the postgresql cookbook recently
[2012-12-18 22:21:49 -0500] agoddard: I forked the cookbook 1.0.11 and 'fixed it' a really awful way, but I'd like to get back on the community version..
[2012-12-18 22:22:17 -0500] agoddard: jtimberman: aw nice, I'll check out the postgres stuff and follow the style there
[2012-12-18 22:25:10 -0500] agoddard: ya, that looks nice.. https://github.com/opscode-cookbooks/postgresql/blob/master/templates/default/postgresql.conf.erb
[2012-12-18 22:25:47 -0500] makerbreakr: in what order do recipes within the same cookbook run?
[2012-12-18 22:25:57 -0500] makerbreakr: where they are at in the runlist? top to bottom?
[2012-12-18 22:28:58 -0500] makmanalp: is there a scp file resource?
[2012-12-18 22:34:41 -0500] makerbreakr: https://gist.github.com/4332719
[2012-12-18 22:34:45 -0500] jtimberman: agoddard: yeah. it's tricky for the default settings, and whether to use options-with-dashes or options_with_underscores due to inconsistencies in mysql itself.
[2012-12-18 22:35:07 -0500] jtimberman: makerbreakr: they are loaded in the order that they are encountered in the node's expanded run list, or via include_recipe
[2012-12-18 22:35:45 -0500] makerbreakr: i have this in a recipe, but this is not being created, I have a cookbook with 2 recipes, playlist.rb, and default.rb, the default.rb does nothing but create the file from a template
[2012-12-18 22:36:09 -0500] thamilt9: Hello all.  First time using the forums, so let me know if I'm breaking etiquette, but I'm a new chef user with a question.  I'm trying to create a second recipe within a cookbook, and don't know how to tell Chef it exists.  I make the recipe in the recipes/ directory, but then when I upload the cookbook and ask about the recipe "knife cookbook show <mycookbook> <myversion> metadata" i only see the original one, not my new one.
[2012-12-18 22:36:19 -0500] makerbreakr: if I include just the cookbook one_player it creates the file, but if include both one_player and one_player:playlist it does not create it
[2012-12-18 22:36:35 -0500] makerbreakr: one_player:playlist relies on the file to exist to run properly
[2012-12-18 22:39:23 -0500] thamilt9: is there a knife command that come along with adding a new recipe to a cookbook?  Or some other way to let Chef know that there's more in there?
[2012-12-18 22:40:24 -0500] jtimberman: makerbreakr: https://gist.github.com/4332747 - files in the gist aren't in order, but that run list ends up with that resoruce collection, which will be executed by chef in the order listed
[2012-12-18 22:40:31 -0500] josephholsten_: anyone done ohai stuff on windows? I could use help testing  OHAI-428
[2012-12-18 22:40:46 -0500] josephholsten_: also aix/hpux/sigar
[2012-12-18 22:41:57 -0500] makerbreakr: hrmm..thats weird
[2012-12-18 22:42:04 -0500] makerbreakr: mine is not working that way
[2012-12-18 22:44:27 -0500] josephholsten_: thamilt9: did you update the version in the metadata.rb before uploading?
[2012-12-18 22:45:00 -0500] thamilt9: josephholsten_: nope.  I need to?
[2012-12-18 22:47:38 -0500] thamilt9: josephholsten_: ah hah.  found the issue - your suggestion helped.  I had copied the repo to another location, but my knife.rb file still pointed to the old location
[2012-12-18 22:48:03 -0500] josephholsten_: that'll do it!
[2012-12-18 23:54:18 -0500] jkyle: can environment files be .rb files like roles?

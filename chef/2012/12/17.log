[2012-12-17 03:56:44 -0500] asher^: hi all. ive just installed chef (as per wiki instructions) and installed the knife-rackspace gem. I am getting the error "Cannot find sub command for: 'rackspace image list'". any ideas how to correct this?
[2012-12-17 03:57:50 -0500] chip-: asher^: how did you install the knife-rackspace gem?
[2012-12-17 03:57:54 -0500] chip-: And how did you install chef?
[2012-12-17 03:58:07 -0500] chip-: At a guess, you installed Chef / knife from Omnibus, but you installed knife-rackspace from your system gems
[2012-12-17 03:58:16 -0500] asher^: yes i think so
[2012-12-17 03:58:36 -0500] chip-: So first I'd remove knife-rackspace gem and any dependencies it installed from system ruby, lest you wind up in the hell of a thousand Rubies
[2012-12-17 03:59:35 -0500] asher^: ok
[2012-12-17 04:00:18 -0500] chip-: Then check in your Chef install directory (/opt on linux), there's probably an embedded/ruby/bin in that directory tree. Use THAT gem binary to install gems for use with Chef.
[2012-12-17 04:00:43 -0500] chip-: Might also look at jtimberman's knife-gem plugin from this repo: https://github.com/jtimberman/chef-plugins-knife
[2012-12-17 04:01:08 -0500] asher^: ok, thanks a lot
[2012-12-17 06:07:01 -0500] BryanWB_: ohai chefs!
[2012-12-17 07:23:51 -0500] kisoku: BryanWB_: ohai
[2012-12-17 07:23:59 -0500] kisoku: had a question about ark for you
[2012-12-17 07:24:00 -0500] BryanWB_: kisoku: hey dude!
[2012-12-17 07:24:02 -0500] BryanWB_: uh-oh
[2012-12-17 07:24:08 -0500] kisoku: it's just a question
[2012-12-17 07:24:16 -0500] BryanWB_: ok, hope i have an answer
[2012-12-17 07:24:21 -0500] kisoku: so, I notice here that if I want to change prefix_root
[2012-12-17 07:24:40 -0500] kisoku: I also have to change prefix_home and prefix_bin if I want everything in the same place
[2012-12-17 07:24:53 -0500] BryanWB_: i think so
[2012-12-17 07:24:55 -0500] BryanWB_: kisoku: ^^
[2012-12-17 07:24:58 -0500] kisoku: so
[2012-12-17 07:25:06 -0500] kisoku: why not have it be smart by default
[2012-12-17 07:25:17 -0500] kisoku: and instead of having three defaults
[2012-12-17 07:25:25 -0500] kisoku: just have one and derive the other two from the first ?
[2012-12-17 07:25:37 -0500] kisoku: ie. just have a 'prefix'
[2012-12-17 07:25:39 -0500] BryanWB_: cuz received requests for the extra flexibility
[2012-12-17 07:25:47 -0500] BryanWB_: from some debian dudes
[2012-12-17 07:26:38 -0500] kisoku: and there was no way to provide the extra flexibilty without making a sensible default that requires me to override three things instead of just one ?
[2012-12-17 07:27:03 -0500] BryanWB_: kisoku: probably there would be
[2012-12-17 07:27:08 -0500] BryanWB_: if I thought hard enough
[2012-12-17 07:27:13 -0500] kisoku: ah ok
[2012-12-17 07:27:14 -0500] kisoku: :-)
[2012-12-17 07:27:28 -0500] BryanWB_: sorry, I don't have a better excuse :/
[2012-12-17 07:27:30 -0500] kisoku: are you still maintaining ark ?
[2012-12-17 07:27:32 -0500] BryanWB_: y
[2012-12-17 07:27:42 -0500] BryanWB_: but just maintenance
[2012-12-17 07:27:54 -0500] kisoku: ok. I will play around and see if I can't come up with a pull request
[2012-12-17 07:28:38 -0500] BryanWB_: i intend to deprecate some of the functionality and move it into a separate cookbook "build"
[2012-12-17 07:29:09 -0500] BryanWB_: all the configure, compile should be moved into a separate cookbook
[2012-12-17 07:29:44 -0500] kisoku: I totally agree with that
[2012-12-17 07:33:08 -0500] specialsauce: ohai chefs
[2012-12-17 07:46:43 -0500] koodough: sudo apt-get install libyajl-ruby - Fails on me on debian wheezy :(. I can't find a solutions on the web to fix this. Is there a way to manually compile this program? http://pastebin.com/8PBN87pv
[2012-12-17 07:48:50 -0500] specialsauce: kodough - fails with what error exactly? this isn't a chef issue really is it? A "--verbose" on that might help you see exactly what is going wrong
[2012-12-17 07:52:15 -0500] koodough: http://pastebin.com/mtsRHi6S
[2012-12-17 07:53:20 -0500] koodough: I says there something the exists in its place to install. However I have no Idea why I couldn't continue. Delete the files it wants to replace doesn't help
[2012-12-17 07:58:30 -0500] koodough: Problem was resolved with dpkg --force-overwrite -i libyajl-ruby_0.8.2-2_i386.deb. It had to force overwrite all the files. :| Debian had the weirdest bugs.
[2012-12-17 07:59:13 -0500] specialsauce: that might not have been a bug of the right thing to do though
[2012-12-17 07:59:21 -0500] specialsauce: if another package you already had installed owned those files
[2012-12-17 09:43:08 -0500] MoreTea: Are there recipes that can handle setting up mysql master->slave replication?
[2012-12-17 09:43:35 -0500] MoreTea: I've googled, and found some recipes that handle "fresh" server installations.
[2012-12-17 09:45:24 -0500] MoreTea: Unfortunately, I couldn't find any recipes for servers with data.
[2012-12-17 09:57:59 -0500] kechagia: can i maintain multiple chef-servers (and multiple environments/networks/companies) using one workstation (with knife)? what's the best practise here?
[2012-12-17 09:58:43 -0500] koodough: UG! libyajl-ruby is a horrible. It won't install on debian or ubuntu.
[2012-12-17 09:59:10 -0500] koodough: Is there a way to run chef in a chroot?
[2012-12-17 10:23:17 -0500] MoreTea: @kechagia, you can create directories for each project, and add a .chef/knife.rb in each directory.
[2012-12-17 10:40:15 -0500] specialsauce: anyone know if there's an easy way to just empty your chef server/couch DB to default? I'm looking to flatten a chef server and then reimport everything, I need to reset everything including default admin key
[2012-12-17 11:43:02 -0500] emanuelez: I'm having problems uploading cookbooks to my chef server. chef client list works fine so knife can contact the server, but knife cookbook upload mycookbook incurs in a timeout. any hint?
[2012-12-17 11:59:45 -0500] aruntomar: emanuelez: paste the output of knife cookbook upload <cookbook name>
[2012-12-17 12:00:13 -0500] emanuelez: $ knife cookbook upload gerrit Uploading gerrit         [0.2.0] ERROR: Network Error: Operation timed out - connect(2) Check your knife configuration and network settings
[2012-12-17 12:00:42 -0500] emanuelez: i can paste the version with -VV on pastebin if u like
[2012-12-17 12:01:09 -0500] aruntomar: emanuelez: sure do paste the -VV output to pastebin
[2012-12-17 12:01:39 -0500] emanuelez: http://pastebin.com/VzEpr57h
[2012-12-17 12:04:56 -0500] emanuelez: looks weird, doesn't it?
[2012-12-17 12:06:34 -0500] aruntomar: emanuelez: certainly
[2012-12-17 12:06:52 -0500] aruntomar: emanuelez: is it happening for just this cookbook or for all the cookbooks
[2012-12-17 12:07:44 -0500] emanuelez: yep, but all the other cookbooks are in sync with the server
[2012-12-17 12:08:00 -0500] emanuelez: so there's no file that needs ot be sent
[2012-12-17 12:08:45 -0500] emanuelez: it seems to fail when it tries to send the single file that changed
[2012-12-17 12:08:46 -0500] aruntomar: emanuelez: i mean r u getting this timeout for other cookbooks as well?
[2012-12-17 12:09:06 -0500] emanuelez: no i'm not
[2012-12-17 12:09:27 -0500] emanuelez: no timeout when the cookbook is in sync
[2012-12-17 12:14:56 -0500] aruntomar: emanuelez: r u able to list the cookbooks without problem "knife cookbook list"
[2012-12-17 12:16:56 -0500] emanuelez: aruntomar: no problem at all doing that
[2012-12-17 12:17:47 -0500] aruntomar: emanuelez: that's really really weird, the point is that we don't know what's causing it. once we know the source of the problem, we could focus on that.
[2012-12-17 12:18:17 -0500] aruntomar: emanuelez: try creating a new cookbook and upload it. let's c if that also gives a problem.
[2012-12-17 12:18:58 -0500] emanuelez: ok. hold on
[2012-12-17 12:25:15 -0500] emanuelez: aruntomar:
[2012-12-17 12:25:26 -0500] emanuelez: aruntomar: same problem
[2012-12-17 12:25:31 -0500] emanuelez: aruntomar: http://pastebin.com/mAzPHF1Y
[2012-12-17 12:26:22 -0500] aruntomar: emanuelez: from the logs i could see, that you are using a proxy. i don't know whether it'll cause the issue or not. y not take out the proxy out of the picture and see if it works. i'm just throwing ideas at you. my strategy is divide the problem and then remove them as the cause of the problem, unless you find the cause.
[2012-12-17 12:27:18 -0500] aruntomar: emanuelez: ok, earlier i was thinking may be it's issue with your cookbook gerrit, but now we can narrow it down, that it's not uploading any cookbook
[2012-12-17 12:28:33 -0500] aruntomar: emanuelez: if it's your own chef server, then check if all the needed services are running.
[2012-12-17 13:16:57 -0500] benner: what is the best way to install chef-client on centos 5.x/6.x?
[2012-12-17 13:17:15 -0500] aruntomar: benner: omnibus
[2012-12-17 13:17:45 -0500] benner: curl -L https://www.opscode.com/chef/install.sh | bash
[2012-12-17 13:17:46 -0500] benner: ?
[2012-12-17 13:18:05 -0500] aruntomar: http://www.opscode.com/chef/install/
[2012-12-17 13:18:32 -0500] benner: yes. this is the same. and how about update in the future?
[2012-12-17 13:20:20 -0500] aruntomar: benner: i've not seen inside the install.sh script, but we use rpm directly from the s3 and rpm -Uvh <chef file name> and it updates the chef. i know it's not automated, but will look into it
[2012-12-17 13:21:33 -0500] aruntomar: benner: got to go, i'll be back in sometime :)
[2012-12-17 13:21:36 -0500] benner: yes, i sow the script and it does *.rpm download and installs it
[2012-12-17 14:18:39 -0500] Lrrr: I migrated my Chef server to a new server and now I keep having errors whenever my client try to access the _default environment
[2012-12-17 14:18:53 -0500] Lrrr: [Mon, 17 Dec 2012 18:17:55 +0400] INFO: HTTP Request Returned 500 Internal Server Error: undefined method `cookbook_versions' for nil:NilClass
[2012-12-17 14:18:53 -0500] Lrrr: [Mon, 17 Dec 2012 18:17:55 +0400] ERROR: Server returned error for http://green.lostwebsite.net:4000/environments/_default/cookbook_versions, retrying 1/5 in 3s
[2012-12-17 14:20:03 -0500] cwj: Lrrr: whats the node's environment set to? and does a corresponding environment exist on the new server?
[2012-12-17 14:20:51 -0500] Lrrr: cwj, _default is listed when I list the environments on the server but I can't "environment show" it
[2012-12-17 14:21:01 -0500] Lrrr: and how do I check which environment the node is set to?
[2012-12-17 14:21:14 -0500] cwj: knife node show foo
[2012-12-17 14:21:19 -0500] cwj: should list its environment
[2012-12-17 14:21:51 -0500] cwj: if one isn't listed then i would try using 'knife node edit foo' to add the chef_environment attribute with value _default
[2012-12-17 14:23:21 -0500] Lrrr: chef_environment is set to _default
[2012-12-17 14:23:53 -0500] cwj: what does the chef-server api log show?
[2012-12-17 14:25:18 -0500] Lrrr: server.log:
[2012-12-17 14:25:19 -0500] Lrrr: merb : chef-server (api) : worker (port 4000) ~ undefined method `cookbook_versi
[2012-12-17 14:25:19 -0500] Lrrr: ons' for nil:NilClass - (NoMethodError)
[2012-12-17 14:25:20 -0500] Lrrr: /usr/lib/ruby/vendor_ruby/chef/environment.rb:380:in `cdb_minimal_filtered_versi
[2012-12-17 14:25:20 -0500] Lrrr: ons'
[2012-12-17 14:27:42 -0500] cwj: i dunno, i am having a hard time locating that point in the source on github
[2012-12-17 14:28:17 -0500] Lrrr: It's like _default doesn't really exists, but of course you can't create it
[2012-12-17 14:28:28 -0500] cwj: yeah kind of sounds like that
[2012-12-17 14:28:42 -0500] cwj: not sure what to suggest, have you tried checking the mailing list archives?
[2012-12-17 14:29:04 -0500] Lrrr: I migrated the couch database from an old server to a 10.16 version
[2012-12-17 14:30:40 -0500] Lrrr: That's the only problem that seems to be left
[2012-12-17 14:30:43 -0500] Lrrr: Quite a major one
[2012-12-17 14:35:32 -0500] moos3: can anyone point me in the right direction for this error https://gist.github.com/4318717
[2012-12-17 14:40:24 -0500] WPsites: why would some of my chef recipes not be recreating the config files? the template action is set to :create which is the default anyway but my new config files just aren't being created
[2012-12-17 14:41:28 -0500] WPsites: the log says it's creating the config file but it blatantly isn't because I've changed the recipe and re uploaded it with some dummy code in the template
[2012-12-17 14:44:39 -0500] pwelch: where would I read more about chef run_state?
[2012-12-17 14:48:44 -0500] eka: all execute resources run under root right?
[2012-12-17 14:56:03 -0500] itchyouch: Eka afaik, yes
[2012-12-17 14:56:24 -0500] eka: itchyouch: thinking about it... definitely yes... chef runs as root
[2012-12-17 14:58:54 -0500] cwj: WPsites: is it possible your node is a member of an environment which is locked to an older version of the cookbook in question?
[2012-12-17 15:00:02 -0500] cwj: moos3: sounds like your rabbitmq (amqp) broker is not running or is not configured to allow your chef-server to connect
[2012-12-17 15:00:06 -0500] WPsites: cwj: it's sorted now. I committed the changes to the repo then uploaded the cookbook and that seemed to work. Before that I was just uploading, not committing as well
[2012-12-17 15:01:42 -0500] cwj: WPsites: interesting, sounds like your git remote is using post-commit hooks or something?
[2012-12-17 15:01:59 -0500] moos3: cwj ok
[2012-12-17 15:02:22 -0500] WPsites: Nah don't think so. Maybe it was just something simple like uploading rsync instead of rsyslog
[2012-12-17 15:02:31 -0500] WPsites: It works now so..
[2012-12-17 15:02:34 -0500] cwj: heh
[2012-12-17 15:02:37 -0500] cwj: very good :)
[2012-12-17 15:02:54 -0500] moos3: cwj whats up with this line  ~ No Gemfile found! If you're generating new app with merb-gen this is fine, otherwise run: bundle init to create Gemfile
[2012-12-17 15:03:51 -0500] cwj: moos3: i havent used the open source chef server in a while, but i am inclined to believe that message is just a warning
[2012-12-17 15:04:32 -0500] cwj: if your problem were related to missing gems i would expect a different error message
[2012-12-17 15:04:39 -0500] cwj: e.g. that bunny could not be loaded
[2012-12-17 15:05:35 -0500] cwj: moos3:  if this is your first time setting up a chef server, might i suggest that you consider trying the omnibus installer
[2012-12-17 15:05:59 -0500] cwj: it installs a self-contained environment under /opt/chef and basically just works
[2012-12-17 15:06:44 -0500] cwj: er, maybe i am still too early
[2012-12-17 15:06:54 -0500] cwj: cant remember if chef-server omnibus has been released
[2012-12-17 15:07:55 -0500] Lrrr: There is not much informations about my problem on Google.
[2012-12-17 15:07:58 -0500] Lrrr: I'm puzzled
[2012-12-17 15:08:00 -0500] spox: cwj: omnibus is chef 11 and is RC now
[2012-12-17 15:08:27 -0500] cwj: spox: ok thanks
[2012-12-17 15:09:18 -0500] robbkidd: More fun with the postgresql cookbook!
[2012-12-17 15:10:15 -0500] robbkidd: I'm trying to figure out how to use the node[:postgresql][:pg_hba] attribute and shovel on other nodes that will need DB access. I'm uncertain where and when I should do the appending.
[2012-12-17 15:11:44 -0500] robbkidd: I can create an array of hashes for the nodes statically in an environment, but I feel there's a more dynamic way of doing this by tagging the nodes that need DB access and building the pg_hba array with those nodes IP addresses.
[2012-12-17 15:12:37 -0500] spox: robbkidd: i generally want to append entries when i'm mucking around with it from recipes, but keep the initial defaults
[2012-12-17 15:12:41 -0500] spox: so i do something like this:
[2012-12-17 15:13:25 -0500] spox: node.set[:postgresql][:pg_hba] = node[:postgresql][:pg_hba] + [{new hashes}]
[2012-12-17 15:14:39 -0500] jf0lwers: is there a rake task or some such to set the version of a cookbook?
[2012-12-17 15:15:01 -0500] cwj: robbkidd: sounds like a good use case for search
[2012-12-17 15:15:26 -0500] jf0lwers: for example we would like to set the last number 1.0.x to the revision count during our CI process
[2012-12-17 15:16:31 -0500] robbkidd: spox: Makes sense. Is there any notification under the covers to restart PG with the modified pg_hba in place? I might be dealing with an ordering problem. The recipe for the DB runs with postgresql::server as a dependency. The recipe for my app runs later and adds to pg_hba. For the app's database actions (like migrations) to succeed, PG needs restarting, right?
[2012-12-17 15:20:20 -0500] robbkidd: I see that the template for pg_hba triggers a reload of the postgresql service, but I don't see where adding to node[:postgresql][:pg_hba] triggers the pg_hba template.
[2012-12-17 15:22:21 -0500] robbkidd: Am I way off here?
[2012-12-17 15:26:16 -0500] moos3: cwj nice i'll look at that omnibus installer, just trying to figure out how to make all my nodes rhel6 use the latest
[2012-12-17 15:31:48 -0500] spox: robbkidd: sorry, had to step away for a sec
[2012-12-17 15:31:56 -0500] robbkidd: No worries.
[2012-12-17 15:32:08 -0500] spox: robbkidd: the pg_hba file is generated from the node attributes
[2012-12-17 15:32:20 -0500] spox: so modifications to the node attribute will result in changes to that file
[2012-12-17 15:32:47 -0500] spox: also, i'm assuming that you're using the pg cookbook >= 2.0.0
[2012-12-17 15:33:05 -0500] robbkidd: spox: Yep. 2.1.0
[2012-12-17 15:33:53 -0500] robbkidd: So the template step for pg_hba.conf in the pg cookbook will be re-run whenever node[:postgresql][:pg_hba] changes?
[2012-12-17 15:34:23 -0500] spox: yep
[2012-12-17 15:34:31 -0500] robbkidd: *boggle*
[2012-12-17 15:34:56 -0500] spox: robbkidd: https://github.com/opscode-cookbooks/postgresql/blob/master/templates/default/pg_hba.conf.erb
[2012-12-17 15:36:41 -0500] robbkidd: I see that the template /uses/ the attribute, but I was unaware that templates would re-run if attributes changed. Is this immediate? Or is it that the template uses the updated attribute on the next chef client run?
[2012-12-17 15:37:50 -0500] spox: the template file defined by the resource will be updated if the contents change. changing the attributes will result in a change of file content which will result in the file being updated
[2012-12-17 15:38:04 -0500] spox: so if you modify the attribute, re-run chef, the file will be updated
[2012-12-17 15:39:14 -0500] robbkidd: OK. So I have to live with a failed recipe run when an app adds the node its running on to pg_hba, but the node does not yet have permission to talk to the PG server to run a database migration?
[2012-12-17 15:40:40 -0500] spox: most likely unless you are allowing a subnet access. but if chef is doing searches to generate the "allowed" list, then yeah, it won't be able to connect on the first go
[2012-12-17 15:41:28 -0500] robbkidd: This is that whole convergence thing I need to learn to accept, isn't it? :)
[2012-12-17 15:50:21 -0500] moos3: anyone using chef to setup rhel network interfaces ?
[2012-12-17 15:51:15 -0500] jhayden: anyone have an idea what these errors mean - No routes match the request: /reports/nodes/contentMod-EuWest1-Qa-ip-10-33-160-210/runs
[2012-12-17 15:51:45 -0500] jhayden: I see them in my server log
[2012-12-17 15:55:33 -0500] bubuz: hi guys - how can I add a recipe to a role?
[2012-12-17 15:56:37 -0500] masterkorp: bubuz: did you read the wiki page about roles ?
[2012-12-17 15:57:04 -0500] bubuz: yes
[2012-12-17 15:57:25 -0500] bubuz: dont want to add to a specific node
[2012-12-17 15:57:37 -0500] bubuz: want to add the recipe to a role
[2012-12-17 16:05:59 -0500] bubuz: masterkorp , any help? :/
[2012-12-17 16:06:45 -0500] spox: bubuz: the role docs should go over it
[2012-12-17 16:06:50 -0500] spox: you just add it to the run list in the role
[2012-12-17 16:07:08 -0500] masterkorp: bubuz: tip: adding recipes to a node is confusing and forget it easly
[2012-12-17 16:07:18 -0500] masterkorp: i always create a role for that node
[2012-12-17 16:07:25 -0500] bubuz: i found addidng recipe to a node OK
[2012-12-17 16:07:34 -0500] bubuz: but we have a base role than I need to add a recipe into
[2012-12-17 16:07:44 -0500] masterkorp: yet you can do it with knife node run_list add
[2012-12-17 16:08:02 -0500] masterkorp: bubuz: i did that too, but months later i forget it
[2012-12-17 16:08:06 -0500] awgross: bubuz: knife role show "roll_name" format='json'
[2012-12-17 16:08:19 -0500] awgross: bubuz: if that is the correct node, save it to a file with something like this
[2012-12-17 16:08:30 -0500] awgross: bubuz: knife role show "roll_name" format='json'  > my_role.json
[2012-12-17 16:08:41 -0500] robbkidd: bubuz: Does the "A Very Simple Web Server Role" example at http://wiki.opscode.com/display/chef/Roles#Roles-TheRubyDSL not answer your question?
[2012-12-17 16:08:43 -0500] awgross: edit the json to add your new recipe into the run list
[2012-12-17 16:08:52 -0500] awgross: bubuz: then upload the role again
[2012-12-17 16:08:58 -0500] awgross: bubuz: knife role from file my_role.json
[2012-12-17 16:09:28 -0500] robbkidd: run_list("recipe[your_cookbook]")
[2012-12-17 16:10:28 -0500] bubuz: cant I just do like a
[2012-12-17 16:10:44 -0500] bubuz: knife recipe add recipe_name role_name ?
[2012-12-17 16:11:21 -0500] z: bubuz: absolutely. if you write yourself a Knife plugin.
[2012-12-17 16:11:36 -0500] bubuz: balls, not that skilled
[2012-12-17 16:11:52 -0500] z: bubuz: Anything is *possible* its just a matter of time/effort.
[2012-12-17 16:11:57 -0500] robbkidd: bubuz: Do you have a role defined already?
[2012-12-17 16:12:03 -0500] bubuz: yes
[2012-12-17 16:12:11 -0500] bubuz: i have a base role that I want to add a recipe to
[2012-12-17 16:12:21 -0500] bubuz: i have the role and i have the recipe
[2012-12-17 16:12:34 -0500] robbkidd: bubuz: Is it somewhere on your filesystem like "roles/base.rb"?
[2012-12-17 16:13:54 -0500] bubuz: yes
[2012-12-17 16:14:48 -0500] robbkidd: bubuz: Does that file have a line starting with: run_list( ...?
[2012-12-17 16:15:45 -0500] bubuz: yes
[2012-12-17 16:15:49 -0500] bubuz: so I can just add in there?
[2012-12-17 16:16:49 -0500] robbkidd: Yup
[2012-12-17 16:17:04 -0500] robbkidd: And then push the updated role to the chef server with knife.
[2012-12-17 16:22:37 -0500] ccooper21: Hi all.
[2012-12-17 16:22:39 -0500] ccooper21: I am new to Chef and trying to use it to setup Python, Gunicorn, and Nginx on an AMI instance running Amazon Linux.
[2012-12-17 16:22:40 -0500] ccooper21: I am installing Python v2.7.3 from source as Amazon Linux includes v2.6.x.  If I install Python v2.7.x from a package, it breaks "yum".
[2012-12-17 16:22:42 -0500] ccooper21: The problem I am running into is that on the RHEL platform family, the pip recipe always uses "/usr/bin/easy_install" instead of "/usr/local/bin/easy_install".
[2012-12-17 16:22:43 -0500] ccooper21: The impact of this is that "pip" gets installed for use with Python v2.6.x instead of Python v2.7.x.
[2012-12-17 16:22:45 -0500] ccooper21: Does anyone know why "/usr/bin/easy_install" is used on the RHEL platform family?
[2012-12-17 16:22:46 -0500] ccooper21: It seems like the recipe should look for "easy_install" in the same location where the Python binaries are installed.
[2012-12-17 16:22:48 -0500] ccooper21: Am I doing something wrong?  Should I open an issue in the issue tracker for this?
[2012-12-17 16:23:07 -0500] awgross: ccooper21: try using virtualenv for python
[2012-12-17 16:23:37 -0500] ccooper21: I think the virtualenv recipe depends on pip being installed to install virtualenv
[2012-12-17 16:24:02 -0500] awgross: ccooper21: hmm
[2012-12-17 16:24:40 -0500] ccooper21: that's actually the next step if I just run the whole Python cookbook.  the virtualenv installation was failing because pip got installed to the wrong place
[2012-12-17 16:24:43 -0500] awgross: ccooper21: probably a path issue where it is loading the wrong one first
[2012-12-17 16:25:36 -0500] ccooper21: there is code in the pip recipe that specifically refernces "/usr/bin/easy_install" on RHEL.  no idea why that is though
[2012-12-17 16:26:40 -0500] awgross: ccooper21: unsure, the cookbook should be hosted on github, see if you can find the commit message
[2012-12-17 16:27:01 -0500] awgross: it may work for RHEL, but be failing for amazon linux
[2012-12-17 16:27:12 -0500] awgross: Amazon linux is close to, but not quite RHEL or CentOS
[2012-12-17 16:27:23 -0500] awgross: may need special casing of it's own
[2012-12-17 16:28:24 -0500] ccooper21: hmm..  I guess I could try firing a CentOS AMI instance and see if the outcome is different.
[2012-12-17 16:28:35 -0500] awgross: ccooper21: worth a shot
[2012-12-17 16:28:49 -0500] awgross: ccooper21: dont work with Amazon Linux much anymore so hard to give you a good answer
[2012-12-17 16:31:40 -0500] Lrrr: cwj, I worked around the problem by ditching my couchdb backup and using the knife hack backup/restore scripts.
[2012-12-17 16:31:56 -0500] Lrrr: cwj, I need to re-add all client but luckily I don't have that much clients connecting
[2012-12-17 16:32:59 -0500] moos3: question whats the best way to bootstrap ssh keys with chef-solo
[2012-12-17 16:34:52 -0500] awgross: moos3: start with a generic key for logging in to the machine initially, then update then template authorized keys file with your public keys (the generic key doesnt have to be in the new auth keys file)
[2012-12-17 16:35:07 -0500] moos3: k
[2012-12-17 16:35:08 -0500] awgross: moos3: pretty similar to how bootstrapping client keys works with chef-client
[2012-12-17 16:35:55 -0500] moos3: awgross how to distrubute private keys ?
[2012-12-17 16:36:04 -0500] moos3: becuase I have approx 600 nodes
[2012-12-17 16:36:11 -0500] awgross: moos3: private keys for what?
[2012-12-17 16:36:13 -0500] moos3: that I need to be able to slide around
[2012-12-17 16:36:19 -0500] moos3: ssh private keys
[2012-12-17 16:36:40 -0500] bubuz: robbkidd, thx dude. I have edited the base roles with my recipe and pushed to git
[2012-12-17 16:36:42 -0500] awgross: moos3: each user has their own, they give me the public key
[2012-12-17 16:36:43 -0500] z: moos3: the User resource supports SSH key distribution
[2012-12-17 16:36:57 -0500] bubuz: now to push to the chef server is it: knife role from file base.rb ?
[2012-12-17 16:37:12 -0500] moos3: z k
[2012-12-17 16:37:22 -0500] awgross: moos3: i have a environment file that lists what users should get templated per environment, could also be done in roles (or recipes if thats your thing)
[2012-12-17 16:38:35 -0500] Guest93946: http://sizzo.org/wp/2008/12/mount-bind-on-osx
[2012-12-17 16:38:40 -0500] Guest93946: thats gud
[2012-12-17 16:38:42 -0500] Guest93946: genius
[2012-12-17 16:39:14 -0500] moos3: awgross ok mainly is the root and another user private keys I and kicked around
[2012-12-17 16:39:16 -0500] robbkidd: bubuz: Should be, yep. knife role from file [path/to/role/file]
[2012-12-17 16:39:28 -0500] moos3: as they use those to call other services that use ssh
[2012-12-17 16:40:03 -0500] awgross: moos3: sorry, not quite getting what you are saying, can you explain it a bit more?
[2012-12-17 16:41:22 -0500] moos3: we have a cluster fs that requires that the root user ssh key be the same on all systems to make it so it doesn't get prompted for password, when we have job user that needs to be able to ssh to every box with out passwords to execute jobs
[2012-12-17 16:41:27 -0500] Guest93946: exports:1: kernel export registration failed: NFS exporting not supported by fstype "fuse4x" (fh)
[2012-12-17 16:41:34 -0500] Guest93946: fuck you osx, fuck you, fuck you
[2012-12-17 16:41:47 -0500] moos3: so when I bootstrap the box, i need those two users keys be there
[2012-12-17 16:42:34 -0500] awgross: moos3: ok, gotcha
[2012-12-17 16:44:47 -0500] moos3: awgross so use the user resource ?
[2012-12-17 16:45:11 -0500] awgross: moos3: I dont have a ton of experience with it but z might
[2012-12-17 16:50:09 -0500] moos3: z any thoughts on thise
[2012-12-17 16:51:03 -0500] Pushnell_: hey all.  trying to use opscode mysql cookbook v2.0.2.  I include_recipe mysql::ruby and then mysql::server.  Getting this error: Gem::Installer::ExtensionBuildError: chef_gem[mysql] (mysql::ruby line 36) had an error: Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
[2012-12-17 16:51:41 -0500] robbkidd: moos3: We have keys stowed in a data bag and then use file resources to write out SSH keys where needed.
[2012-12-17 16:51:47 -0500] Pushnell_: I have build-essential earlier in my runlist but the mysql cookbook seems to be preempting that and then failing.
[2012-12-17 16:52:18 -0500] spox: Pushnell_: check the version of build-essential you have installed
[2012-12-17 16:52:19 -0500] moos3: robbkidd data bag ? interesting
[2012-12-17 16:52:28 -0500] spox: i can't remember which version introduced it
[2012-12-17 16:52:39 -0500] spox: but there is a new option to install the build-essential tools during the compile phase
[2012-12-17 16:52:42 -0500] spox: and you need that
[2012-12-17 16:52:58 -0500] robbkidd: moos3: I'm interested in the encrypted data bags, but haven't wrestled with that additional layer of complication yet.
[2012-12-17 16:53:27 -0500] Pushnell_: spox: thanks, I was on 1.1.2.  I'll update to 1.3.0 and try again.
[2012-12-17 16:53:59 -0500] moos3: robbkidd how do you distrute a data_bag for use with chef-solo
[2012-12-17 16:54:06 -0500] robbkidd: moos3: Shoving the keys into a data bag programmatically keeps the keys from getting checked in to your dev repos.
[2012-12-17 16:54:18 -0500] robbkidd: moos3: Er  I don't know. We're using chef-server.
[2012-12-17 16:54:53 -0500] robbkidd: moos3: Worst case, you can use a cookbook_file resource to reference the keys and where they're supposed to go on your hosts.
[2012-12-17 16:55:04 -0500] moos3: we are going to move to a chef server too, but i'm thinking about the inital bootstrap in the %post section of a kickstart
[2012-12-17 16:57:21 -0500] Pushnell_: spox: same error with latest build-essential.  This is chef 10.16.2 on amazon linux.
[2012-12-17 16:57:54 -0500] spox: Pushnell_: pastebin the full error?
[2012-12-17 16:58:23 -0500] Pushnell_: spox: whooboy  you want the full `chef-client -l debug` output or just the last several pages?
[2012-12-17 16:58:31 -0500] moos3: anyone have a cookbook for rhel network interfaces ?
[2012-12-17 16:58:54 -0500] spox: Pushnell_: actually, the stacktrace will probably be sufficient
[2012-12-17 17:01:28 -0500] Pushnell_: spox: probably a bit more than you wanted.  Not sure which parts are important to you.  http://pastebin.com/VLH0JcV4
[2012-12-17 17:03:42 -0500] spox: hum
[2012-12-17 17:03:49 -0500] spox: Pushnell_: is this the latest mysql cookbook?
[2012-12-17 17:04:04 -0500] Pushnell_: spox: pulled on Thursday I think
[2012-12-17 17:04:33 -0500] Pushnell_: spox: I had this problem with the mysql cookbook several versions ago and gave up.  came back hoping the new versions had fixed this.
[2012-12-17 17:05:11 -0500] Lrrr: my Chef server is back online and stable. Awesome
[2012-12-17 17:05:49 -0500] spox: Pushnell_: it might be an issue of the load order
[2012-12-17 17:06:02 -0500] spox: are you including build_essential directly in your run list?
[2012-12-17 17:07:23 -0500] Pushnell_: spox: I have two items directly in the run list. 1) a 'base' role which amongst other things calls build-essential, and 2) my experimental recipe which includes mysql::ruby and then mysql::server
[2012-12-17 17:07:48 -0500] spox: are they defined in that order in your run list?
[2012-12-17 17:07:57 -0500] Pushnell_: spox: yep
[2012-12-17 17:08:04 -0500] spox: okay, so that's the problem
[2012-12-17 17:08:21 -0500] spox: the build essential recipe is being compiled before the mysql recipe sets the compile time install flag
[2012-12-17 17:08:21 -0500] Pushnell_: spox: in my expanded runlist, the first thing in the list is my base recipe
[2012-12-17 17:08:24 -0500] spox: so it doesn't happen
[2012-12-17 17:08:25 -0500] spox: so
[2012-12-17 17:08:37 -0500] spox: you just need to set the attribute in your role to force it
[2012-12-17 17:08:41 -0500] spox: and that should do it
[2012-12-17 17:09:08 -0500] Pushnell_: spox: I'm not familiar with that.  looking for a build-essential attribute?
[2012-12-17 17:09:18 -0500] spox: override_attributes(:build_essential => {:compiletime => true})
[2012-12-17 17:10:30 -0500] zammy: Hi
[2012-12-17 17:11:13 -0500] tubbo: hi all, having some issues getting Knife to play nice with Vagrant
[2012-12-17 17:11:18 -0500] tubbo: here's what happens when i try to create a server:
[2012-12-17 17:11:18 -0500] tubbo: https://gist.github.com/4319942
[2012-12-17 17:11:19 -0500] zammy: i'm new to Chef any trying to install sqlplus on different others client nodes
[2012-12-17 17:12:08 -0500] zammy: i've uploaded the cookbook using knife cookbook upload COOKBOOK NAME
[2012-12-17 17:12:49 -0500] zammy: but how can i deploy this cookbook to client nodes
[2012-12-17 17:13:07 -0500] zammy: suppose my cookbook name is sqlplus
[2012-12-17 17:13:18 -0500] spox: zammy: you add it to the run list of the node
[2012-12-17 17:13:20 -0500] zammy: Can some one please help me out here ?
[2012-12-17 17:13:35 -0500] spox: tubbo: is the vagrant gem installed on your system?
[2012-12-17 17:13:41 -0500] zammy: yes
[2012-12-17 17:14:52 -0500] zammy: spox could you please provide me the command for it
[2012-12-17 17:15:04 -0500] makmanal1: jtimberman: did you ever hit the nginx cookbook issue where mime.types is missing when you install from package?
[2012-12-17 17:15:17 -0500] zammy: where i can deploy it and test these recipies
[2012-12-17 17:17:21 -0500] makmanal1: jtimberman: sure enough, recipes/source.rb seems to have the cookbook_file statement but not recipes/commons.rb
[2012-12-17 17:17:40 -0500] makmanalp: or, anyone else hit the same issue?
[2012-12-17 17:17:58 -0500] itchyouch: If ive got a Boolean value Ina databag, can I just use it?  Basically doing an if is_active_employee... Create home dirt
[2012-12-17 17:20:14 -0500] Pushnell_: spox: thus far, it seems your fix worked.  methinks this should be a part of the mysql cookbook docs, as I lost a lot of time to it several weeks ago.
[2012-12-17 17:20:26 -0500] Pushnell_: also of note, creating a role with only override
[2012-12-17 17:20:30 -0500] Pushnell_: bah
[2012-12-17 17:20:47 -0500] Pushnell_: creating a role in the web interface with only override_attributes results in a runlist of recipe[recipe[recipe[recipe[]]]]
[2012-12-17 17:21:06 -0500] spox: recipes all the way down!
[2012-12-17 17:21:12 -0500] Pushnell_: lol
[2012-12-17 17:21:32 -0500] Pushnell_: spox: thanks for your help.  very glad to get this checked off my list.
[2012-12-17 17:21:47 -0500] spox: Pushnell_: sure :)
[2012-12-17 17:31:50 -0500] jkyle: I haev a client that's not checking in. I ssh'd into the host and ran chef-client. It seems to just hang. No packets ever reach my chef-server's interface. I've verified connectivity to the chef-server is possible, ports are open, and that the the server is accepting connections from the client using openssl s_client
[2012-12-17 17:32:06 -0500] jkyle: there's nothing in the /var/log/chef/client.log
[2012-12-17 17:35:17 -0500] jkyle: I've also verified other clients, on the same subnet, can connect
[2012-12-17 17:38:16 -0500] tubbo: spox: yes..
[2012-12-17 17:38:39 -0500] tubbo: =D
[2012-12-17 17:39:21 -0500] itchyouch: Answered my old previous question.  Yes it does work.  :)
[2012-12-17 17:57:51 -0500] Pushnell_: I have a bunch of boxes running chef-client 10.14  what's the right way to upgrade them to 10.16?  (will another `knife bootstrap` suffice?)
[2012-12-17 17:58:44 -0500] awgross: Pushnell_: adding a block with chef_gem "chef" do; action :install, :upgrade; version "10.16.2"; end should probably do a the trick
[2012-12-17 17:58:59 -0500] awgross: action [:install, :upgrade]
[2012-12-17 17:58:59 -0500] awgross: sorry
[2012-12-17 17:59:27 -0500] Pushnell_: awgross: oh, nice.  I thought bootstrap was doing some sort of omnibus install.  thanks!
[2012-12-17 18:00:13 -0500] martinisoft: Pushnell_: bootstrap does do an omnibus install as the default
[2012-12-17 18:00:27 -0500] martinisoft: Pushnell_: there is a cookbook to update your omnibus install
[2012-12-17 18:00:43 -0500] martinisoft: from heavywater
[2012-12-17 18:00:44 -0500] martinisoft: https://github.com/heavywater/chef-omnibus_updater
[2012-12-17 18:00:55 -0500] martinisoft: err sorry https://github.com/hw-cookbooks/omnibus_updater
[2012-12-17 18:00:58 -0500] awgross: martinisoft: chef_gem wont update it in the omnibus install?
[2012-12-17 18:01:34 -0500] binjured: i'm getting `data bag path /var/chef/data_bags is invalid' when using chef-client ... seems odd.
[2012-12-17 18:01:46 -0500] martinisoft: awgross: dunno actually, never tried it
[2012-12-17 18:01:56 -0500] binjured: do i have to tell Chef::EncryptedDataBagItem.load() not to use the filesystem or something?
[2012-12-17 18:02:13 -0500] martinisoft: at least with that cookbook, you set an attribute and it upgrades
[2012-12-17 18:10:02 -0500] mirk_: ssd7_: So, I've narrowed my problem down to the HTTP PUT over SSL.  I can upload a cookbook when SSL is disabled on the server side but get an error when it is enabled.
[2012-12-17 18:10:13 -0500] mirk_: knife client list and knife node list commands all work fine over ssl.
[2012-12-17 18:10:27 -0500] mirk_: It's just knife cookbook upload (which is the PUT) is failing.
[2012-12-17 18:10:39 -0500] mirk_: DEBUG: Sending HTTP Request via PUT to chef:443/sandboxes/a5d0f1ad8af54b27808533e24a0ab320
[2012-12-17 18:10:42 -0500] mirk_: /usr/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': end of file reached (EOFError)
[2012-12-17 18:10:56 -0500] wassy121: mirk_, is there a load-balancer in front of that machine?
[2012-12-17 18:11:15 -0500] wassy121: I seem to remember something about EOF errors with regards to load-balancers in front of chef servers.
[2012-12-17 18:11:21 -0500] mirk_: wassy121: yes, haproxy is terminating the SSL.
[2012-12-17 18:11:36 -0500] wassy121: hmm, let me scratch my memory for a second
[2012-12-17 18:12:14 -0500] mirk_: Yep.  The GET and POST calls work over SSL.  It just seems to be the PUT that fails...
[2012-12-17 18:12:42 -0500] mirk_: I upgraded ruby to 1.9.1 and gems as well...
[2012-12-17 18:13:16 -0500] wassy121: I think someone in a previous conversation about this fixed it via an haproxy config option
[2012-12-17 18:13:48 -0500] mirk_: ok, I'll run through the haproxy config docs and see if any config options jump out at me.
[2012-12-17 18:15:16 -0500] awgross: mirk_: does the web server accept PUT requests?
[2012-12-17 18:15:18 -0500] wassy121: mirk_, someone mentioned that their metadata long_description pointed to a non-existant file
[2012-12-17 18:16:00 -0500] wassy121: mirk_, +1 awgross, some servers turn off PUT for security reasons?  Thinking get/post/head are only valid verbs
[2012-12-17 18:16:03 -0500] mirk_: awgross: The "web server" in this case is the chef-server
[2012-12-17 18:16:21 -0500] mjolk2: thin-server ?
[2012-12-17 18:16:52 -0500] mirk_: If it failed non-ssl, then I'd be inclined to agree...
[2012-12-17 18:17:07 -0500] mirk_: It only fails under SSL and only for PUT.
[2012-12-17 18:17:08 -0500] awgross: mirk_: hmm good point
[2012-12-17 18:18:11 -0500] roidrage: anyone been using the rabbitmq cookbook for clustering recently?
[2012-12-17 18:18:57 -0500] mjolk2: about to set it up, why do you ask?
[2012-12-17 18:19:21 -0500] roidrage: because, at least in vagrant, it barfs on me when stopping the service before setting the custom erlang cookie
[2012-12-17 18:19:37 -0500] roidrage: it doesn't stop the daemon properly, and as the erlang cookie has now changed, all other commands fail
[2012-12-17 18:19:55 -0500] mjolk2: which rabbitmq cookbook are you using?
[2012-12-17 18:20:16 -0500] roidrage: https://github.com/opscode-cookbooks/rabbitmq
[2012-12-17 18:20:21 -0500] roidrage: just set up with the most recent version
[2012-12-17 18:20:29 -0500] roidrage: but do mind, this is rabbitmq 3.0.1 already
[2012-12-17 18:20:52 -0500] mjolk2: oh dang
[2012-12-17 18:20:53 -0500] roidrage: don't think it should make a big difference, but maybe it does
[2012-12-17 18:20:55 -0500] mjolk2: that came out last week
[2012-12-17 18:21:24 -0500] roidrage: yeah, it's installed when you don't use the distro package
[2012-12-17 18:25:34 -0500] roidrage: for some strange reason stopping the service falls back to using the process list
[2012-12-17 18:29:10 -0500] sc077: can anyone explain the difference between a 'normal' attribute and a 'default' attribute?
[2012-12-17 18:29:46 -0500] awgross: sc077: normal will take precedence over defaults
[2012-12-17 18:30:12 -0500] sc077: ok, so it's just precedence?
[2012-12-17 18:30:15 -0500] awgross: sc077: if the recipe containing the default attribute is removed from the run list the attribute will not be empty
[2012-12-17 18:30:25 -0500] awgross: sc077: if the recipe containing the default attribute is removed from the run list the attribute will now* be empty
[2012-12-17 18:31:12 -0500] awgross: sc077: if you remove an recipe where you set normal attributes, those attributes will still be accessible (and take precedence over default attributes)
[2012-12-17 18:31:24 -0500] awgross: normals dont go away when you remove where they were specified
[2012-12-17 18:32:42 -0500] sc077: @awgross: cool, thanks!!
[2012-12-17 18:36:19 -0500] tubbo: sovagrant is installed yet chef/knife still can't use it
[2012-12-17 18:36:25 -0500] tubbo: using bundler and gemsets
[2012-12-17 18:36:27 -0500] tubbo: err not gemsets
[2012-12-17 18:36:40 -0500] tubbo: using bundler and no ruby abstraction tool, just `brew`-installed ruby p327
[2012-12-17 18:36:44 -0500] awgross: tubbo: can you gist your Vagrant file
[2012-12-17 18:38:08 -0500] tubbo: http://gist.github.com/4320734
[2012-12-17 18:38:11 -0500] tubbo: awgross: ^^
[2012-12-17 18:38:32 -0500] awgross: tubbo: looks like you are never telling Vagrant to use chef in that file
[2012-12-17 18:38:48 -0500] redgetan: im trying to add vagrant to group rvm using http://pastie.org/5543857
[2012-12-17 18:38:52 -0500] redgetan: but it kept skipping it
[2012-12-17 18:39:36 -0500] awgross: tubbo: check the block i uncommented https://gist.github.com/4320745
[2012-12-17 18:39:51 -0500] awgross: see where it says config.vm.provision :chef_solo?
[2012-12-17 18:39:54 -0500] tubbo: oh cool
[2012-12-17 18:40:05 -0500] awgross: thats where Vagrant is getting the idea to use chef
[2012-12-17 18:40:29 -0500] tubbo: awgross: i am actually using chef_client/opscode chef, so i guess i'd need to uncomment the one for :chef_client instead?
[2012-12-17 18:40:57 -0500] awgross: tubbo: correct
[2012-12-17 18:41:30 -0500] tubbo: awgross: okay, so i uncommented that. same error: cannot load such file -- 'vagrant/cli'
[2012-12-17 18:42:22 -0500] awgross: how are you running vagrant
[2012-12-17 18:42:25 -0500] awgross: vagrant up
[2012-12-17 18:42:25 -0500] awgross: or
[2012-12-17 18:42:29 -0500] awgross: bundle exec vagrant up
[2012-12-17 18:43:40 -0500] sc077: @awgross, do you know how I can get a recipe to exit immediately if an attribute is not set?  This is not working for me:  default_unless[:foo][:bar] = nill ; return if foo[:bar].nil?
[2012-12-17 18:44:51 -0500] awgross: sc077: hmm, it should fail if you use it anywhere besides string interpolation
[2012-12-17 18:45:15 -0500] sc077: does that need to be in attributes and the recipe file?
[2012-12-17 18:45:16 -0500] awgross: there may be a better way to check if a hash key exists in ruby
[2012-12-17 18:45:23 -0500] awgross: one or the other
[2012-12-17 18:45:26 -0500] awgross: attributes is better
[2012-12-17 18:47:55 -0500] Pushnell_: sc077: if you Chef::Log.fatal('bad') your run will stop with an exception
[2012-12-17 18:54:20 -0500] itchyouch: Other than greing etc/passwd or executing id, is there a way to check if a user exists one system?
[2012-12-17 18:54:24 -0500] itchyouch: Grep ping
[2012-12-17 18:54:29 -0500] itchyouch: Grepping
[2012-12-17 18:54:44 -0500] mjolk2: getent?
[2012-12-17 18:55:14 -0500] itchyouch: What's getent?
[2012-12-17 18:56:15 -0500] mjolk2: https://www.google.com/search?q=getent&oq=getent&aqs=chrome.0.57j62.1434&sugexp=chrome,mod=12&sourceid=chrome&ie=UTF-8
[2012-12-17 18:56:58 -0500] itchyouch: Heh.. I was thinking of a ruby native way.
[2012-12-17 18:57:11 -0500] itchyouch: I see, it's another utility.
[2012-12-17 18:58:05 -0500] roidrage: all users on the systems should be in the node attribute
[2012-12-17 18:58:36 -0500] itchyouch: Thanks roidrage.
[2012-12-17 18:58:41 -0500] itchyouch: I'll look there
[2012-12-17 18:58:59 -0500] roidrage: node[:passwd]
[2012-12-17 18:59:06 -0500] roidrage: originally written by yours truly ;)
[2012-12-17 18:59:39 -0500] mjolk2: hotttt
[2012-12-17 19:02:45 -0500] itchyouch: Awesome.
[2012-12-17 19:04:25 -0500] btm: @opscode Chef Code Review: join: http://bit.ly/Uv16iK, watch: http://youtu.be/sMNJq1TUck8
[2012-12-17 19:05:54 -0500] woltage: Is it ok to join hangout? Naked.
[2012-12-17 19:06:03 -0500] awgross: is it odd that I cant get Google Hangouts working in Chrome, but I can in Firefox?
[2012-12-17 19:06:51 -0500] eliklein_: hola.. i'm trying to change the organization full name on a newly created hosted chef account and i don't see a way to do it.  according to the wiki, this is possible but it doesn't actually explain how other than going into the management console.  can anyone provide guidance here?
[2012-12-17 19:06:56 -0500] awgross: btm: It says "You are not allowed to join this hangout"
[2012-12-17 19:07:13 -0500] webframp: btm: getting 'you are not allowed' as well
[2012-12-17 19:08:03 -0500] erratic: man nfs works pretty damn good over openvpn for me...
[2012-12-17 19:08:07 -0500] kallistec: trying to work around this new G+ "feature" sit tight
[2012-12-17 19:08:08 -0500] erratic: alot better than netbios did
[2012-12-17 19:08:27 -0500] awgross: kallistec: yes feature, not bug
[2012-12-17 19:08:36 -0500] erratic: then again, I was using netbios over tcp/ip because I don't use bridging much
[2012-12-17 19:08:56 -0500] kev117: can anyone explain why I would see a "yum-dump Locking Error" on a libssh2 package, which is already installed?  I'm a chef newbie, desperately trying to figure out chef-gitorious, which is failing at this point.
[2012-12-17 19:10:11 -0500] erratic: anybody got any "search heavy" chef environments / cookbooks that have deadlocked on nodes when certain nodes don't completely converge?
[2012-12-17 19:10:28 -0500] erratic: I've had to go through and change a bunch of stuff to use begin/rescue which I really didn't want to do
[2012-12-17 19:10:40 -0500] erratic: I was hoping there'd be another way but I couldn't find one
[2012-12-17 19:11:00 -0500] erratic: mainly the reason I didn't want to use begin/rescue is because its a pattern I don't see in any search examples...
[2012-12-17 19:11:00 -0500] kev117: ps aux | grep yum returns nothing before and after, so there is nothing indicating a conflict with another running process
[2012-12-17 19:11:51 -0500] mrchoey: is the rows option to knife search supposed to limit the results returned ie if rows 1 you only get one row back?
[2012-12-17 19:12:10 -0500] mrchoey: knife search node 'chef_environment:dev' -i
[2012-12-17 19:12:10 -0500] mrchoey: 3 items found
[2012-12-17 19:12:11 -0500] mrchoey: worker35
[2012-12-17 19:12:11 -0500] mrchoey: web41
[2012-12-17 19:12:11 -0500] mrchoey: worker40
[2012-12-17 19:12:19 -0500] mrchoey: knife search node 'chef_environment:dev' -i --rows 1
[2012-12-17 19:12:20 -0500] mrchoey: 3 items found
[2012-12-17 19:12:20 -0500] mrchoey: worker35
[2012-12-17 19:12:20 -0500] mrchoey: web41
[2012-12-17 19:12:20 -0500] mrchoey: worker40
[2012-12-17 19:12:30 -0500] mrchoey: doing something wrong?
[2012-12-17 19:14:56 -0500] miah: pasting in the channel is wrong
[2012-12-17 19:15:47 -0500] awgross: kallistec: on the bottom right of my google hangout screen it notes "Opscode, Inc".  Don't remember that being there before
[2012-12-17 19:16:11 -0500] Pushnell_: so, in one of my attribute files, I am setting some attributes based on node['memory']]'total'].to_i .  I just upgraded to chef 10.16 and I'm getting warnings that this type of access will be deprecated in v11.  What is the correct new way to get node (ohai) attributes from within an attribute file?
[2012-12-17 19:17:40 -0500] awgross: kallistec: bottom left*
[2012-12-17 19:18:30 -0500] roidrage: mjolk2: i added a line to the rabbitmq::default cookbook where it stops the service when it sets the erlang cookie: supports :status => true
[2012-12-17 19:18:32 -0500] roidrage: that did the trick
[2012-12-17 19:18:54 -0500] mjolk2: thanks roidrage
[2012-12-17 19:18:58 -0500] mjolk2: that will save me some effort
[2012-12-17 19:19:10 -0500] btm: awgross: webframp woltage, Google changed something again. I /have/ to individually add email addresses for them to be able to join now.
[2012-12-17 19:19:35 -0500] awgross: btm: huzzah a victory for privacy
[2012-12-17 19:19:44 -0500] leifmadsen: btm: oh well that seems convenient...
[2012-12-17 19:20:13 -0500] btm: last week if I invited one external person it would become public.. this week :(
[2012-12-17 19:20:49 -0500] erratic: roidrage: mind if I see that
[2012-12-17 19:20:55 -0500] erratic: I need that to work too
[2012-12-17 19:21:00 -0500] hcastro: anyone successfully using knife-ec2 with an ssh-gateway?
[2012-12-17 19:21:12 -0500] erratic: actually
[2012-12-17 19:21:14 -0500] erratic: taht seems trivial
[2012-12-17 19:21:17 -0500] erratic: nevermind
[2012-12-17 19:21:31 -0500] awgross: hcastro: yes, i have
[2012-12-17 19:22:39 -0500] ranjibd: Pushnell_, node.set[:att1]= 'value'
[2012-12-17 19:22:41 -0500] hcastro: awgross: having some difficulty debugging what's going wrong -- appears to be blowing up right as the bootstrap is about to begin
[2012-12-17 19:23:25 -0500] Pushnell_: ranjibd: I'm getting the error with getting, not setting.  I'm wondering if I can just do node.get
[2012-12-17 19:23:27 -0500] ranjibd: Pushnell_, i think the chef 10.16 log also shows this, how to set the attributes correctly, while logging the deprecation warning
[2012-12-17 19:23:32 -0500] awgross: what environment are you using it in that you need to use the gateway, my experience was with Amazon VPC
[2012-12-17 19:23:45 -0500] ranjibd: Pushnell_, oh.. sorry
[2012-12-17 19:23:48 -0500] hcastro: awgross: same
[2012-12-17 19:24:06 -0500] awgross: can you gist what the error is when it blows up?
[2012-12-17 19:24:21 -0500] Pushnell_: ranjibd: thanks for trying :)
[2012-12-17 19:24:34 -0500] Pushnell_: I guess I could try to jump into shef and see what I get.
[2012-12-17 19:24:59 -0500] xerxas: Hi all, how do I bootstrap an infrastructure on ec2 with chef ?
[2012-12-17 19:25:18 -0500] xerxas: do you use the aws cookbook, or cloud formation ?
[2012-12-17 19:25:30 -0500] xerxas: (I want to deploy 2 hosts with an elb in front )
[2012-12-17 19:25:30 -0500] awgross: xerxas: check out the knife-ec2 plugin
[2012-12-17 19:25:50 -0500] awgross: xerxas: as well as the aws cookbook (havent tried using cloudformation)
[2012-12-17 19:25:51 -0500] xerxas: awgross:  I already bootstrap a single machine on ec2 with knife-ec2, now, I want to bootstrap an infrastructure
[2012-12-17 19:26:11 -0500] hcastro: awgross: https://gist.github.com/4321172
[2012-12-17 19:26:15 -0500] awgross: xerxas: unsure then
[2012-12-17 19:26:38 -0500] xerxas: awgross: aws_elastic_ip is problematic for me because it RST tcp connexions while changing ip address , not letting the chef run finish , then my run_list is empty ...
[2012-12-17 19:26:53 -0500] leifmadsen: I've got the chef-server recipe setup with vagrant, but having issues with trying to make it use an existing validation.pem file so that I don't have to copy the validation.pem file to all the new VMs each time. How can I tell chef-server to use an existing validation.pem file when it is built?
[2012-12-17 19:26:53 -0500] Pushnell_: xerxas: my understanding is that you end up using both.  Use cloudformation to deploy the elb and the instances, and in your cloudformation config you can configure chef clients for those instances.  chef takes it from there to do your software config.
[2012-12-17 19:26:56 -0500] geekbri: xerxas: I know that mattray is working on a new version of spice weasel.  There are products out there that kind of address what you are talking about (I think).  Internally at my company we just built our own knife plugins that do such things.
[2012-12-17 19:27:00 -0500] ranjibd: Pushnell_, yeah.. thats the best way to know
[2012-12-17 19:27:08 -0500] hcastro: xerxas: there is a ticket open to add that as part of knife-ec2
[2012-12-17 19:27:15 -0500] geekbri: At least, if i understand the 'question' properly :)
[2012-12-17 19:27:43 -0500] Pushnell_: xerxas: https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithOpscodeChef.pdf
[2012-12-17 19:27:46 -0500] awgross: hcastro: im assuming you can manually SSH through the other instance to the 10.0.* machine?
[2012-12-17 19:27:55 -0500] ranjibd: mrchoey, same response here.. i see the knife plugin makes appropriate search query though
[2012-12-17 19:28:39 -0500] hcastro: awgross: i can, however i need to first scp the private key to the bastion and then ssh with -i key
[2012-12-17 19:28:58 -0500] xerxas: Pushnell_: thanks
[2012-12-17 19:29:08 -0500] xerxas: actually , I already read this doc, but was asking how do you people do
[2012-12-17 19:29:13 -0500] xerxas: is cloudformation the right way to go
[2012-12-17 19:29:18 -0500] xerxas: seems so yes
[2012-12-17 19:29:49 -0500] hcastro: xerxas: another tool that might be of interest: https://github.com/mattray/spiceweasel
[2012-12-17 19:29:54 -0500] Pushnell_: xerxas: my fu is not that strong yet.  But that pdf seems to be the way lots of people do it.
[2012-12-17 19:30:15 -0500] awgross: hcastro:  hmm, its been a while since I was doing this, let me check my boostrap script
[2012-12-17 19:30:20 -0500] xerxas: hcastro: I'm looking at geekbri comment, and just discovered spiceweasel
[2012-12-17 19:30:24 -0500] xerxas: seems interesting
[2012-12-17 19:30:56 -0500] xerxas: Pushnell_:  I find cloudformation a bit complicated and writing functions in json is so strange to me (functions are supposed to be in javascript , not json ... )
[2012-12-17 19:31:35 -0500] erratic: heh
[2012-12-17 19:31:44 -0500] erratic: Im just gonna keep my mouth shut
[2012-12-17 19:32:19 -0500] xerxas: hcastro: spiceweasel is just batching knife commands right ? so no ebs, no elb, no elastic ip ... right ?
[2012-12-17 19:32:47 -0500] hcastro: yeah, but you can manage ebs, elb, and eip from the aws cookbook
[2012-12-17 19:32:48 -0500] Pushnell_: xerxas: yeah, CF is definitely different  it seems to be largely based on puppet, which is why I'm in #chef ;)
[2012-12-17 19:32:49 -0500] awgross: hcastro: does your default VPC security group allow SSH in from your SSH gateway?  I had some weird issues in the past where knife/fog wouldnt set security groups properly when using knife-ec2 so I had to set them afterwards and force SSH access in my default group
[2012-12-17 19:34:07 -0500] xerxas: hcastro: ebs, ok , elb don't know, but eip breaks the connexion not letting the run finish if I do chef-client over ssh
[2012-12-17 19:34:11 -0500] xerxas: or is it fixed ?
[2012-12-17 19:35:13 -0500] hcastro: awgross: the security group assigned to the node is completely open from anything inbound from the ssh gateway -- you're saying to ensure the default one does too?
[2012-12-17 19:35:26 -0500] Pushnell_: hcastro: to my knowledge, you can't create elb's, etc, with the aws cookbook.  simple attach/detach instances from one already existing.
[2012-12-17 19:35:59 -0500] awgross: hcastro: try it, i was having issues where it wasnt assigning security groups on bootstrap, so I had to bootstrap with the default group, then set the actual groups afterwards (this was many months ago, so it may be fixed)
[2012-12-17 19:36:00 -0500] hcastro: xerxas: there is a open issue for knife-ec2 that allows you to assign an eip at creation time
[2012-12-17 19:36:04 -0500] miah: you can modify the cookbook to create them though
[2012-12-17 19:36:06 -0500] tubbo: ugh, is there a version of Vagrant that plays nice with aws-sdk in my Gemfile?
[2012-12-17 19:36:06 -0500] hcastro: Pushnell_: you are correct
[2012-12-17 19:36:14 -0500] miah: the problem with the aws cookbook is rightaws
[2012-12-17 19:36:19 -0500] tubbo: oh there we go :)
[2012-12-17 19:36:20 -0500] hcastro: miah: +1
[2012-12-17 19:36:40 -0500] miah: the aws-ruby sdk is pretty easy to use.
[2012-12-17 19:36:55 -0500] hcastro: miah: i got them to say on twitter that they'd look into cutting a newer version of right_aws, but they haven't yet
[2012-12-17 19:37:13 -0500] hcastro: they are actively maintaining it for internal use, as far as i can tell from the commit logs
[2012-12-17 19:37:26 -0500] miah: ya
[2012-12-17 19:37:53 -0500] miah: i'm happy with aws-ruby sdk. its full featured.
[2012-12-17 19:38:08 -0500] hcastro: awgross: i believe i encountered that too a while ago -- now i believe it works if you use the IDs instead of the labels
[2012-12-17 19:38:12 -0500] awgross: miah: it looks like it was created by java programmers, it makes me sad, even if it does work
[2012-12-17 19:38:17 -0500] miah: http://docs.amazonwebservices.com/AWSRubySDK/latest/_index.html
[2012-12-17 19:38:20 -0500] awgross: hcastro: gotcha
[2012-12-17 19:39:57 -0500] miah: its apache 2.0, and on github. if there is anything too javay about it you can submit pull requests =) https://github.com/aws/aws-sdk-ruby
[2012-12-17 19:40:31 -0500] awgross: miah: working with the CloudWatch apis made my brain hemorrhage
[2012-12-17 19:40:54 -0500] miah: i havent touched those yet
[2012-12-17 19:41:00 -0500] miah: i've mostly dealt with ebs and iam
[2012-12-17 19:42:18 -0500] miah: i havent gotten to writing elb, security group, etc.. soon though.
[2012-12-17 19:43:53 -0500] awgross: miah: was very confusing as to where certain commands were located, creating/viewing metrics used one pattern, doing the same with alerts was different.  I'd have to review my code, prob pretty crufty as a first pass.  Was trying to make some memcache servers and have them emulate the ElastiCache cloudwatch metrics, which is hard to do when they have weird custom memcache stats that they dont explain
[2012-12-17 19:48:47 -0500] josephholsten: miah: remember how the root_group pattern sucks? could you critique http://tickets.opscode.com/browse/OHAI-428 for me?
[2012-12-17 19:53:02 -0500] miah: awgross: interesting. i'll have to keep an eye out for that.
[2012-12-17 19:53:22 -0500] miah: you should file an issue wit their github
[2012-12-17 19:53:39 -0500] miah: https://github.com/aws/aws-sdk-ruby
[2012-12-17 19:53:53 -0500] awgross: miah: fair enough, ill add it to my list
[2012-12-17 19:55:09 -0500] hcastro: awgross: what type of auth are you using from your bastion to the private vpc node?
[2012-12-17 19:55:20 -0500] awgross: hcastro: all SSH key
[2012-12-17 19:55:45 -0500] hcastro: so you're putting the keys on the bastion before using it as a gateway?
[2012-12-17 19:56:26 -0500] awgross: yes
[2012-12-17 19:57:44 -0500] hcastro: is the path to it consistent on your local machine vs. bastion?  like is --identity-file accurate if used from each machine?
[2012-12-17 19:58:08 -0500] awgross: should be
[2012-12-17 19:58:27 -0500] awgross: though I believe I also have my ~/.ssh/config specifying my bastion server
[2012-12-17 19:58:31 -0500] awgross: so it used ec2-user
[2012-12-17 19:58:36 -0500] awgross: instead of ubuntu
[2012-12-17 19:59:31 -0500] josephholsten: Anyone got ohai knowledge for windows? And does anyone know what the right root_group is for aix & hpux?
[2012-12-17 19:59:41 -0500] hcastro: you have another ssh config on the bastion for the private nodes?
[2012-12-17 20:00:07 -0500] awgross: no, the bastion doesnt have a config for the private nodes
[2012-12-17 20:00:13 -0500] awgross: just my local machine to the bastion
[2012-12-17 20:00:41 -0500] hcastro: lol i have the same
[2012-12-17 20:01:13 -0500] awgross: any way you can enable more SSH debugging to get an idea og which server it's failing at?.
[2012-12-17 20:01:51 -0500] hcastro: gonna look into the net/ssh code for clues
[2012-12-17 20:03:41 -0500] awgross: hcastro: best of luck, i also remember rolling back my local version of knife at one point because the new one didnt work, but the old one did, maybe 0.10.10 vs 10.12?
[2012-12-17 20:04:21 -0500] hcastro: awgross: thanks for answering my questions -- i'll report back when i get it sorted out
[2012-12-17 20:07:50 -0500] awgross: hcastro: np
[2012-12-17 20:15:22 -0500] awellis13: Hello, I'm in the process of creating a Chef recipe to install Percona DB and I am seeing this in my logs. It is causing a 30 second job to take 2 hours to run DEBUG: package[Percona-XtraDB-Cluster-server] couldn't match Percona-XtraDB-Cluster-server in installed Provides, loading available Provides - this may take a moment
[2012-12-17 20:15:53 -0500] awellis13: This is called by simply running 'package "Percona-XtraDB-Cluster-server"'
[2012-12-17 20:39:54 -0500] kaerast: does anybody have tips on how they're automatically syncing roles/nodes/cookbooks in git and the data in the chef server?  Doing a full upload takes far too long with lots of data
[2012-12-17 20:41:44 -0500] btm: kaerast: http://comments.gmane.org/gmane.comp.sysutils.chef.user/3951
[2012-12-17 20:43:01 -0500] kaerast: ooh guard-knife looks quite nice btm
[2012-12-17 20:44:50 -0500] kaerast: I'll have to play with that tomorrow to see how well it integrates with our Jenkins test pipeline we've got running on all git commits
[2012-12-17 20:45:33 -0500] kaerast: the other suggestion of upload -a would surely just upload *everything*, even if it hasn't changed wouldn't it?
[2012-12-17 20:47:50 -0500] kaerast: although, I suspect guard-knife isn't going to delete remote items that have been deleted locally, which would cause us pain
[2012-12-17 20:47:54 -0500] jhayden: any easy way to reset webui's admin password if you have lost it?
[2012-12-17 20:48:48 -0500] btm: kev117: I think knife-essentials (built into knife in Chef 11+) works more like you're looking for https://github.com/jkeiser/knife-essentials
[2012-12-17 20:53:05 -0500] kaerast: we gave knife-essentials a go when trying to sync role runlists (instead of re-uploading and losing data), it ended up being easier to write our own script to handle that
[2012-12-17 20:54:15 -0500] btm: jhayden: https://gist.github.com/1821492
[2012-12-17 20:54:40 -0500] jhayden: awesome, thx
[2012-12-17 20:55:40 -0500] beandip: Need Halp!
[2012-12-17 20:55:42 -0500] beandip: https://gist.github.com/4322152
[2012-12-17 20:56:08 -0500] beandip: I'm working on the graphite cookbook to allow configuring the storage-aggregation and storage-schema confs from attributes
[2012-12-17 20:56:36 -0500] beandip: the gist above is my library for processing the attributes and the spot where I call them in the template
[2012-12-17 20:57:12 -0500] beandip: the problem I'm having is that for each key, value it is reading and populating the file in alphabetic order.
[2012-12-17 20:57:28 -0500] beandip: so I end up with:
[2012-12-17 20:57:31 -0500] beandip: [min]
[2012-12-17 20:57:33 -0500] beandip: aggregationMethod = min
[2012-12-17 20:57:35 -0500] beandip: pattern = \.min$
[2012-12-17 20:57:37 -0500] beandip: xFilesFactor = 0.1
[2012-12-17 20:58:16 -0500] beandip: I want the order to be patter, xFilesFactor, then aggregationMethod
[2012-12-17 20:58:29 -0500] beandip: wnat's a better way to do this so I can get those in a particular order
[2012-12-17 21:01:37 -0500] beandip: my current layout for the attributes would look https://gist.github.com/4322215
[2012-12-17 21:06:03 -0500] xibalba: Hey folks, just came across Chef and had a few questions. Is this something geared towards an Infrastructure as a Service service provider based on vmware's vcloud director?
[2012-12-17 21:06:35 -0500] awgross: when im using Vagrant w/ Chef-Solo, if I want to ssh in to the machine and run chef, how would I do that? I don't want to use vagrant provision etc.
[2012-12-17 21:07:08 -0500] awellis13: Just like running Chef Solo on a normal server. Read the Chef Solo installation instructions:
[2012-12-17 21:07:18 -0500] awellis13: http://wiki.opscode.com/display/chef/Installing+Chef+Client+and+Chef+Solo
[2012-12-17 21:07:25 -0500] kaerast: xibalba, sure - that's what I'll be working on tomorrow actually.  Build a minimal base server using vmware tools and then install and configure applications using Chef
[2012-12-17 21:07:55 -0500] xibalba: i guess i'm not understanding at what level/layer Chef comes into play
[2012-12-17 21:08:11 -0500] xibalba: Is it at the level within the vCloud Director Organization?
[2012-12-17 21:09:30 -0500] kaerast: xibalba, my knowledge of vmware terminology isn't very good yet. You'd use vmware tools to install the minimal system plus Chef tools, then use Chef to install/configure applications
[2012-12-17 21:09:47 -0500] whilp: hrm -- which doc do i need to submit to add a new fella to our company's CLA for opscode?
[2012-12-17 21:10:00 -0500] xibalba: ok, so Chef isn't actually controlling vCloud Director, just guest services(virtual machines) within the vCloud Director Org (Virtual DataCenter)
[2012-12-17 21:10:02 -0500] beandip: nevermind, got my question answered on my end
[2012-12-17 21:10:52 -0500] kaerast: you can use knife plugins to do the provisioning of new machines, but we prefer to provision the new machines with vmware tools
[2012-12-17 21:11:15 -0500] kaerast: although actually, the knife-vmware plugin for provisioning new vmware machines doesn't look very mature from first glance
[2012-12-17 21:11:47 -0500] xibalba: ok, so this is more geared to the individual organization inside of a cloud. not as a management software for the service provider doing the IaaS services
[2012-12-17 21:13:55 -0500] kaerast: ah so no, you'd want to use vmware tools to manage the infrastructure - chef would mostly manage what's running on the individual servers
[2012-12-17 21:14:04 -0500] xibalba: gotcha
[2012-12-17 21:14:08 -0500] xibalba: thanks for clairifying
[2012-12-17 21:15:14 -0500] kaerast: you can use Chef to provision and build servers - which is great when you're running across multiple cloud providers - but the vmware tools are actually really nice for managing the infrastructure
[2012-12-17 21:15:40 -0500] xibalba: yeah i have all the VM stuff currently in place, running vCloud Director suite
[2012-12-17 21:15:57 -0500] cheflevelramen: Hi Everyone. Question about gcc. My understanding is that it is installed by the 'build-essential' cookbook (among others), and that it is needed to compile rubygems. I have some production servers which have a strict security policy of not allowing any compilers on the server. Are there any alternatives cookbooks to install rubygems. Or any suggestions on what to do? Removing the gcc package at the end of the run_list run wou
[2012-12-17 21:16:58 -0500] kaerast: you only need gcc for certain gems, are you using any that require compiling?
[2012-12-17 21:17:40 -0500] kaerast: another option is to package the gems as rpm/deb files pre-compiled
[2012-12-17 21:17:59 -0500] cheflevelramen: kaerast
[2012-12-17 21:18:00 -0500] kaerast: https://github.com/jordansissel/fpm makes building rpm/deb files from gems fairly painless
[2012-12-17 21:18:38 -0500] cheflevelramen: kaerast: sorry, typo before. Anyway, I don't think I am compiling any gems. I'd have to dig through the community cookbooks I'm using.
[2012-12-17 21:20:03 -0500] kaerast: cheflevelramen, hmm presumably you'll have something with build-essential as a dependency, otherwise you wouldn't be using it.
[2012-12-17 21:20:33 -0500] cheflevelramen: kaerast: True. I followed a tutorial originally that had that cookbook. Let me check
[2012-12-17 21:21:22 -0500] kindsol: newbie berkshelf question: I have all of my cookbooks in one repository, to use berkshelf do I need to break them out into their own repos?
[2012-12-17 21:21:48 -0500] kaerast: talking of which, I'd quite like to see a tool for building dependency graphs of chef nodes/roles/cookbooks
[2012-12-17 21:21:59 -0500] kaerast: I may even build it myself if I have to at some point
[2012-12-17 21:22:09 -0500] cheflevelramen: kaerast: I see the mysql cookbook  has a recipe with this line: chef_gem "mysql"
[2012-12-17 21:22:26 -0500] cheflevelramen: kaerast: will that cause chef to compile that gem if it's not installed?
[2012-12-17 21:22:28 -0500] Pushnell_: kaerast: https://github.com/miketheman/knife-role-spaghetti
[2012-12-17 21:22:43 -0500] cheflevelramen: kaerast: it should just run 'gem install', right?
[2012-12-17 21:22:55 -0500] kaerast: Pushnell_, awesome! thanks!
[2012-12-17 21:23:18 -0500] kaerast: I suspect the mysql gem will be compiled against your local mysql libraries
[2012-12-17 21:23:22 -0500] xibalba: with chef do you have to define your own libraries? or do they have ready to go packages? say i want to deploy a webserver, do i have to setup and create a catalog of a service with this type?
[2012-12-17 21:23:56 -0500] cheflevelramen: kaerast: Ah, I see in the mysql metadata.rb that it does depend on the build-essentials cookbook
[2012-12-17 21:24:55 -0500] joonas: what's the alternative to berkshelf, librarian?
[2012-12-17 21:25:05 -0500] Pushnell_: xibalba: "a webserver" is a collection of various pieces of configuration.  (for example, php5.3/apache2.4/mysql5.5).  the pieces are generally available.  (php cookbook, apache cookbook, etc.)  You string them together into something that fits your idea of "a webserver"
[2012-12-17 21:25:22 -0500] kaerast: cheflevelramen, if you're only doing the basics of installing mysql servers/clients then you could write your own cookbook and not use the mysql gem at all
[2012-12-17 21:25:44 -0500] xibalba: Pushnell_, ok so they have at least defined some cookbooks for you to start with? not like other pieces of software that let you do this but you have to build everything from scratch
[2012-12-17 21:25:53 -0500] xibalba: sounds like a good starting point
[2012-12-17 21:25:54 -0500] kaerast: cheflevelramen, if you're doing things which need that gem then you'll have to look at packaging it as an rpm/deb/whatever
[2012-12-17 21:26:15 -0500] josephholsten: joonas: knife-github-cookbooks and git submodules are lower tech alternatives, but I'd stick with berkshelf or librarian
[2012-12-17 21:26:24 -0500] Pushnell_: xibalba: see https://github.com/opscode-cookbooks and http://community.opscode.com/cookbooks
[2012-12-17 21:26:50 -0500] xibalba: ah very cool, i'm starting to see it now
[2012-12-17 21:26:55 -0500] joonas: josephholsten: yeah, I'm looking at same level implementations as Berkshelf :)
[2012-12-17 21:27:00 -0500] Pushnell_: xibalba: you can always write your own too, if you need to do something particularly custom.  but the cookbooks available fit the typical use cases.
[2012-12-17 21:27:00 -0500] joonas: so Librarian is the alternative
[2012-12-17 21:27:06 -0500] joonas: I haven't used either, just feeling out what the options are
[2012-12-17 21:27:38 -0500] siezer: berkshelf ftw
[2012-12-17 21:27:39 -0500] josephholsten: it's pretty much just those two. I just started with librarian and haven't played with berkshelf, but I must say the docs are pretty
[2012-12-17 21:27:42 -0500] xibalba: I imaghine you can copy the cookbooks and modify them as you see fit too ?
[2012-12-17 21:28:02 -0500] joonas: yeah, that's kind of what stood out
[2012-12-17 21:28:10 -0500] cheflevelramen: kaerast: Okay good to know. I know the idea of removing compilers on production machines is a little outdated, and there is some discussion on it's true effectiveness in increasing security. Do you know if other Chef DevOps are running prod machines with gcc?
[2012-12-17 21:28:11 -0500] Pushnell_: xibalba: yep.  I've had to modify a few of the standard cookbooks to fit our infra.
[2012-12-17 21:28:22 -0500] xibalba: very cool ty for the info
[2012-12-17 21:28:23 -0500] josephholsten: rather, I started with librarian before berkshelf existed and haven't ever been motivated enough to play with berks
[2012-12-17 21:28:24 -0500] joonas: I wonder if there have been any recent comparisons of the two
[2012-12-17 21:28:37 -0500] joonas: just to kind of get a feel for what the real differences (if any) are
[2012-12-17 21:29:40 -0500] josephholsten: honestly, I'd recommend berks just because its community seems to have a really solid workflow in place
[2012-12-17 21:29:53 -0500] josephholsten: testing, vagrant, &c
[2012-12-17 21:29:58 -0500] joonas: yeah
[2012-12-17 21:30:08 -0500] joonas: seems like that might be the way to go, thanks!
[2012-12-17 21:30:57 -0500] kaerast: cheflevelramen, I can see why security would complain about compilers on production machines.  And it shouldn't be too hard to deal with their requests
[2012-12-17 21:31:18 -0500] cheflevelramen: kaerast: Cool thanks for the help. Appreciate it.
[2012-12-17 21:31:22 -0500] moos3: anyone have a omnibus script for chef-server ?
[2012-12-17 21:31:42 -0500] kaerast: especially given that level of security would require code reviews of community code anyway, you may as well just write your own minimal recipes
[2012-12-17 21:32:10 -0500] cheflevelramen: kaerast: Agreed. I'll probably go that route.
[2012-12-17 21:32:57 -0500] josephholsten: cheflevelramen: it's kind of a pain to run ruby in prod without gcc. you've got to package your own bin gems for nogokiri, mysql2, &c
[2012-12-17 21:33:45 -0500] josephholsten: admittedly, I'm not proud of that
[2012-12-17 21:34:02 -0500] kaerast: josephholsten, it's only a pain once - then it's all handled by chef :)
[2012-12-17 21:34:34 -0500] cheflevelramen: josephhholsten: Ouch, yea I figure I'll run into issues going forward
[2012-12-17 21:35:05 -0500] beandip: what would be the correct syntax to place the following attributes (JSON) in my attributes/default.rb?  https://gist.github.com/4322488
[2012-12-17 21:35:53 -0500] doomviking: idempotent pain
[2012-12-17 21:40:55 -0500] josephholsten: its sad that the biggest reason I haven't played with berkshelf is that I don't like the name as much as librarian.
[2012-12-17 21:41:32 -0500] josephholsten: how's the ferrari coming, anyway?
[2012-12-17 21:41:38 -0500] Hydroxide: Hi. Feel free to point me to official support channels since this is for the Hosted product, but... I'm trying to automatically 'knife bootstrap' a node and then 'knife node flip' it into the desired environment. it seems to take an indeterminate number of seconds before knife-flip can find the gem via it's fqdn: search. how should I be doing this?
[2012-12-17 21:44:18 -0500] jtimberman: Hydroxide: does "knife flip" use search?
[2012-12-17 21:45:22 -0500] jtimberman: search doesn't happen instantly, unfortunately, it can be a couple seconds to a minute or so before the index catches up. I don't know what the threshold is for hosted chef specifically, but you can email support@opscode.com for info with that.
[2012-12-17 21:45:43 -0500] erratic: I hate
[2012-12-17 21:46:37 -0500] beandip: anyone?
[2012-12-17 21:46:38 -0500] beandip: :/
[2012-12-17 21:47:24 -0500] Hydroxide: jtimberman: yeah, sadly it does use search.
[2012-12-17 21:47:26 -0500] jtimberman: moos3: you mean like: https://github.com/opscode/omnibus-chef/blob/master/config/projects/chef-server.rb ? :)
[2012-12-17 21:47:35 -0500] jtimberman: moos3: builds Chef 11 server though.
[2012-12-17 21:47:39 -0500] Hydroxide: jtimberman: I guess I'll have it loop and try periodically
[2012-12-17 21:47:59 -0500] Hydroxide: for now this is being called from bash for hopefully-nonpermanent technical reasons
[2012-12-17 21:48:18 -0500] Hydroxide: I appreciate the answers
[2012-12-17 21:49:28 -0500] erratic: dude I just keep realizing how much of an idiot I am after investing all of this hatred into something because I think I know what the fuck is going on but the truth is I'm really tired
[2012-12-17 21:49:32 -0500] erratic: what should I do
[2012-12-17 21:50:21 -0500] Hydroxide: erratic: nap? :)
[2012-12-17 21:51:19 -0500] erratic: yeah I mean
[2012-12-17 21:51:42 -0500] moos3: jtimberman is better to run 10 or 11 at this point
[2012-12-17 21:51:57 -0500] jtimberman: beandip: something like this: https://gist.github.com/4322623
[2012-12-17 21:52:02 -0500] jtimberman: moos3: 11 isn't released.
[2012-12-17 21:52:30 -0500] moos3: jtimberman I'm setting up a brand new chef to be used in a existing infra
[2012-12-17 21:53:06 -0500] moos3: trying to get rid of my rats-knot scripts and replace with chef
[2012-12-17 21:54:15 -0500] erratic: boop
[2012-12-17 21:59:54 -0500] beandip: jtimberman: thanks.  I was using = rahter than =>
[2012-12-17 22:00:02 -0500] beandip: now I see what I was doing wrong
[2012-12-17 22:00:06 -0500] beandip: :)
[2012-12-17 22:00:50 -0500] jtimberman: beandip: :-)
[2012-12-17 22:06:24 -0500] miah: i started writing lwrp's for graphite
[2012-12-17 22:06:43 -0500] miah: rather than just using the straight attribute method. with resources you can create them with whatever data.
[2012-12-17 22:07:09 -0500] miah: https://github.com/miah/chef-graphite/tree/lwrp/resources
[2012-12-17 22:07:49 -0500] miah: still more to do. haven't had time.
[2012-12-17 22:08:58 -0500] kaerast: miah, writing an LWRP or two for graphite was on my todo list, I'll have to take a look at what you're working on
[2012-12-17 22:09:40 -0500] miah: please do
[2012-12-17 22:09:48 -0500] miah: feedback welcomed / appreciated
[2012-12-17 22:09:53 -0500] miah: i work in a vacuum too often
[2012-12-17 22:10:03 -0500] erratic: miah: highcharts
[2012-12-17 22:10:08 -0500] awgross: miah: dyson coding
[2012-12-17 22:10:15 -0500] miah: ?
[2012-12-17 22:10:19 -0500] awgross: work in a vacuum
[2012-12-17 22:10:34 -0500] erratic: http://www.highcharts.com/demo/
[2012-12-17 22:11:02 -0500] miah: ok. but how does this help me with graphite?
[2012-12-17 22:11:23 -0500] erratic: not my perogative
[2012-12-17 22:11:32 -0500] erratic: I just wish that graphite used highcharts
[2012-12-17 22:11:54 -0500] awgross: highcharts kinda craps itself when you get too many data points
[2012-12-17 22:11:57 -0500] erratic: pre*
[2012-12-17 22:12:11 -0500] awgross: didnt seem to work well with graphite
[2012-12-17 22:12:12 -0500] awgross: but
[2012-12-17 22:12:21 -0500] awgross: if you want a better interface, check out graphiti from paperless post
[2012-12-17 22:12:22 -0500] erratic: yeaaa
[2012-12-17 22:12:34 -0500] erratic: trying to remember...
[2012-12-17 22:12:42 -0500] erratic: its been like 2 years since I did anything with it
[2012-12-17 22:13:09 -0500] erratic: I had to make a lot of graphs for an old job
[2012-12-17 22:13:36 -0500] miah: im sure we'll look at graphiti and such. i haven't really gotten to 'dashboards' yet =)
[2012-12-17 22:14:02 -0500] awgross: hehe anything is better than the default graphite one
[2012-12-17 22:15:26 -0500] erratic: we're using google charts but I haven't had time to look at that stuff
[2012-12-17 22:15:30 -0500] erratic: apparently its better
[2012-12-17 22:15:55 -0500] awgross: google charts eh?
[2012-12-17 22:15:56 -0500] moos3: anyone seen this https://gist.github.com/15e8ec211f8a86c2ae44
[2012-12-17 22:16:00 -0500] awgross: ill have to chec that out
[2012-12-17 22:16:08 -0500] erratic: this is the last time I'm doing server stuff Im tired of it
[2012-12-17 22:16:32 -0500] awgross: moos3: probably need gcc and/or build-essential (if ubuntu)
[2012-12-17 22:16:35 -0500] miah: moos3: install libgecode
[2012-12-17 22:17:12 -0500] moos3: I have gecode-devel
[2012-12-17 22:17:14 -0500] moos3: installed
[2012-12-17 22:18:37 -0500] erratic: gcc --version autoconf --version .. binutils ... glibc-devel
[2012-12-17 22:18:55 -0500] erratic: You have to install development tools first.
[2012-12-17 22:18:57 -0500] josephholsten: how do I replace this Cheffile line in a Berksfile? cookbook 'bprobe', git: 'https://github.com/boundary/boundary_cookbooks', path: 'bprobe'
[2012-12-17 22:20:04 -0500] awgross: josephholsten: cookbook "boundary_cookbook", github: "boundary/boundary_cookbook", protocol: :ssh
[2012-12-17 22:20:07 -0500] miah: moos3: you might also need gecode itself installed
[2012-12-17 22:20:10 -0500] awgross: unsure what bprobe is
[2012-12-17 22:20:20 -0500] miah: bprobe is boundarys app
[2012-12-17 22:20:33 -0500] josephholsten: it's an old style repo, with multiple cookbooks in it
[2012-12-17 22:20:44 -0500] miah: you can pass path
[2012-12-17 22:20:48 -0500] erratic: miah: that'd be like a linking problem, I dont think he's even getting past ./configure based on that error
[2012-12-17 22:21:13 -0500] josephholsten: miah: An error occurred while reading the Berksfile: Only one location key (chef_api, git, github, path, site) may be specified. You gave 'git', 'path'.
[2012-12-17 22:21:25 -0500] josephholsten: it didn't like both git and path
[2012-12-17 22:21:41 -0500] josephholsten: I guess I'm off to rtfm
[2012-12-17 22:21:48 -0500] awgross: berkshelf.com
[2012-12-17 22:21:53 -0500] erratic: "berkshelf" hahahhahahaahahahah
[2012-12-17 22:21:57 -0500] miah: right. and all of the errors are related to gecode.
[2012-12-17 22:22:03 -0500] erratic: going out for a cigarette
[2012-12-17 22:22:07 -0500] doomviking: borkshelf
[2012-12-17 22:22:14 -0500] moos3: miah i was missing gcc-c++
[2012-12-17 22:22:29 -0500] miah: ah. well there you go.
[2012-12-17 22:22:59 -0500] erratic: just outta curiousity which ver of g++ do you have
[2012-12-17 22:23:11 -0500] erratic: totally not important, I'd like to know though
[2012-12-17 22:25:24 -0500] josephholsten: aww, berks doesn't like http://github.com/josephholsten/nexus-cookbook as a git uri either?
[2012-12-17 22:25:38 -0500] josephholsten: so arbitrarily picky
[2012-12-17 22:25:45 -0500] awgross: josephholsten: are you using the github: method or git:
[2012-12-17 22:26:52 -0500] josephholsten: I just changed it to github and it works now
[2012-12-17 22:27:08 -0500] alexw: When using EC2 - should I be using pre built AMI's with common packages installed?
[2012-12-17 22:27:13 -0500] alexw: To speed up deployment time
[2012-12-17 22:27:34 -0500] alexw: i.e. for a web role - apache2, php5
[2012-12-17 22:27:38 -0500] alexw: then save as an AMI
[2012-12-17 22:29:29 -0500] miah: if you want to speed up deployment: yes
[2012-12-17 22:29:35 -0500] miah: if you dont care: it doesnt matter
[2012-12-17 22:30:50 -0500] alexw: I got Chef setup with Cloudformation
[2012-12-17 22:31:16 -0500] alexw: so it can now Auto Scale - however the only thing I see is that it takes a good 6-10 minutes to bring up instances
[2012-12-17 22:38:32 -0500] makerbreakr: is there a way to specify in chef to run a particular recipe no matter what, everytime chef-client runs?
[2012-12-17 22:38:54 -0500] makerbreakr: Id rather not set it up as a cron job, and have chef-client running as a deamon
[2012-12-17 22:39:20 -0500] awgross: makerbreakr: whats wrong with just adding to the run list
[2012-12-17 22:40:26 -0500] makerbreakr: awgross, from my understanding it wont run by default
[2012-12-17 22:40:30 -0500] makerbreakr: if nothing has changed
[2012-12-17 22:40:47 -0500] alexw: is there a good management portal for Aws + Chef
[2012-12-17 22:41:35 -0500] awgross: makerbreakr: if there is a recipe in a run list it will run through the elements every run
[2012-12-17 22:41:47 -0500] awgross: for example if the recipe were to create a directory
[2012-12-17 22:41:51 -0500] awgross: it will get run every time
[2012-12-17 22:42:08 -0500] awgross: just the directory resource itself may see that the directory is created and not run the kernel command
[2012-12-17 22:42:29 -0500] awgross: but if you have say, an execute block, in your recipe, it will run that every time
[2012-12-17 22:43:10 -0500] makerbreakr: ah, k, thanks
[2012-12-17 23:55:33 -0500] alexw: is it best practice to run chef-client on boot?
[2012-12-17 23:56:57 -0500] JasonF: I wouldn't trust that a given server is at a proper state to be considered "in production" after reboot unless: 1) I had specific knowledge otherwise OR 2) I had forced a chef-client run to ensure configs were sane.
[2012-12-17 23:57:01 -0500] JasonF: YMMV in your own environment.
[2012-12-17 23:58:30 -0500] mirk_: alexw: I don't.  If the system doesn't come up and insert itself properly in the network then I've done something wrong with my config.
[2012-12-17 23:58:51 -0500] alexw: mirk_: my issue is - I might turn off an instance
[2012-12-17 23:58:52 -0500] mirk_: I let the client run when it's ready.
[2012-12-17 23:58:57 -0500] alexw: then bring it back on the next day
[2012-12-17 23:59:07 -0500] alexw: internal ip/public dns has changed

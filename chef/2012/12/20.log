[2012-12-20 00:20:04 -0500] juozas: Howdy, can someone direct me to a pattern for sending a notifications for a set of resources (if all resources in a set are updated, then notify)?
[2012-12-20 00:22:17 -0500] juozas: Is writing a LWRP the right way to do this?
[2012-12-20 02:18:48 -0500] jfl0wers: Any seen this error before: Cannot find a resource for postgresql_database on centos version 6.3
[2012-12-20 02:19:07 -0500] jfl0wers: any one that is...
[2012-12-20 02:20:44 -0500] whilp: jfl0wers: is the postgresql cookbook in your run list?
[2012-12-20 02:21:05 -0500] jfl0wers: it is via an include_recipe
[2012-12-20 02:21:15 -0500] jfl0wers: it is working in chef-solo
[2012-12-20 02:21:25 -0500] jfl0wers: but not on chef-client
[2012-12-20 02:22:28 -0500] jfl0wers: I see that postgresql gets installed
[2012-12-20 02:25:47 -0500] jfl0wers: here is a gist of some of the log: https://gist.github.com/4342465
[2012-12-20 02:27:02 -0500] sc077: does anyone know how one would set/get a cookbooks name as a node attribute?
[2012-12-20 02:27:55 -0500] jfl0wers: maybe I need to do a depends on the cookbook database?
[2012-12-20 02:30:41 -0500] jfl0wers: @sc077 you mean can you query for the currently executing cookbook name?
[2012-12-20 02:34:18 -0500] cwj: jfl0wers: yes you need to specify the 'database' cookbook as a dependency in your cookbook's metadata
[2012-12-20 02:38:15 -0500] sudonim: Hey all, I'm having some trouble setting hostnames through chef on my boxes.
[2012-12-20 02:39:10 -0500] sudonim: I've tried using this cookbook https://github.com/3ofcoins/chef-cookbook-hostname
[2012-12-20 02:40:39 -0500] sudonim: What I'm trying to do is grab a hostname from my servers.yml and set that as the hostname, but either I get no result or an error with the various things I've tried
[2012-12-20 03:10:32 -0500] juliancdunn: jtimberman: are the problems still extant with the json gem? has anyone tried 1.7.x?
[2012-12-20 03:19:26 -0500] sc077: jfl0wers: yes, exactly
[2012-12-20 03:19:59 -0500] jfl0wers: I don't know if there is a prop off of the node object for that
[2012-12-20 03:20:33 -0500] jfl0wers: but you could get it by using the __FILE__ object
[2012-12-20 03:21:12 -0500] jfl0wers: like this: File.basename(File.dirname(File.dirname(__FILE__)))
[2012-12-20 03:21:33 -0500] jfl0wers: that would grab the dir name for the cookbook
[2012-12-20 03:44:36 -0500] ayn: hi there quick question, if my cookbook is called my-cookbook, and i have an LWRP called foo, how do i refer to it in another cookbook that depends on it? my-cookbook_foo and mycookbook_foo didn't work
[2012-12-20 03:45:41 -0500] jtimberman: juliancdunn: dunno. there was some discussion in our internal chat earlier today about bumping the version due to the conflict w/ vagrant
[2012-12-20 03:46:04 -0500] jtimberman: ayn: you can't use a dash in the name.
[2012-12-20 03:46:12 -0500] jtimberman: ayn: you need to rename the cookbook to my_cookbook
[2012-12-20 03:46:17 -0500] jtimberman: ayn: then use my_cookbook_foo
[2012-12-20 03:46:26 -0500] ayn: @jtimberman great, exactly what I'm thinking about trying next, thanks a lot!
[2012-12-20 03:46:39 -0500] jtimberman: chef makes LWRPs into resources you can use in recipes through making a method, and dashes are not allowed in Ruby method names
[2012-12-20 03:49:21 -0500] ayn: interesting that build-essential and getting-started have dashes
[2012-12-20 03:49:57 -0500] jtimberman: they dont have LWRPs
[2012-12-20 03:50:04 -0500] jtimberman: *cookbooks* can have dashes.
[2012-12-20 03:50:50 -0500] ayn: ya
[2012-12-20 03:51:07 -0500] jtimberman: its the magic that makes the resource out of the cookbook and the file name
[2012-12-20 04:12:32 -0500] kisoku: hrm
[2012-12-20 04:12:43 -0500] kisoku: why does node.chef_environment work
[2012-12-20 04:12:54 -0500] kisoku: but node[:chef_environment] does not
[2012-12-20 04:13:15 -0500] kisoku: the first one gives me the desired results
[2012-12-20 04:13:24 -0500] kisoku: the second one gives me nil
[2012-12-20 04:13:35 -0500] kisoku: this in the scopew of a recipe btw
[2012-12-20 04:21:40 -0500] ayn: @jtimberman 1 more thing, in the cookbook with the LWRP, i use a template, which is in that cookbook's templates/default folder, when I use the LWRP in another cookbook, it only looks for the template in that cookbook's templates directory, is there anything i need to do to get it to look at the templates in the cookbook with the LWRP?
[2012-12-20 04:27:20 -0500] ayn: nvm, had to specify "cookbook" in the template block and it works, thanks
[2012-12-20 04:53:36 -0500] mdeering: added "chef_gem 'fog'" to my recipe but it requires 'libxml2-dev' package to run first.  What is the convention to ensure that package install has ran before the chef_gem reference?
[2012-12-20 04:57:32 -0500] ssvss__: Hello, I am trying to use littlechef to configure a machine to run nginx under runit. from what I gathered, I think I should have a node.json file as this -https://gist.github.com/4343022
[2012-12-20 04:57:51 -0500] ssvss__: and when I run "fix node:192.168.1.78", it should work. nginx and runit are getting installed, but runit isn't being used to run nginx.
[2012-12-20 05:05:41 -0500] matti: mdeering: You can have package resource doing "notifies" to gem_package one.
[2012-12-20 05:05:58 -0500] matti: mdeering: Or, run package resource in compile time.
[2012-12-20 05:25:42 -0500] mdeering: matti: k, will break it out further and give action :nothing to a gem_package and have a seperate package that notifies that particular gem_package...
[2012-12-20 05:27:36 -0500] matti: mdeering: I find that this is the only way to ensure that something runs in order.
[2012-12-20 05:27:44 -0500] matti: mdeering: Chaining things like that.
[2012-12-20 05:34:00 -0500] mdeering: another noob question why would you chain the install action on the end here after just telling it action :none? https://github.com/fnichol/postgresql-cookbook/blob/all-fixes/recipes/client.rb#L36
[2012-12-20 05:34:15 -0500] mdeering: action :nothing
[2012-12-20 08:26:03 -0500] jimjimovich: how can I execute a series of commands only if a file on the node does not exist?
[2012-12-20 08:41:14 -0500] jimjimovich: never mind ... found it in the docs :)
[2012-12-20 09:18:11 -0500] loicag: jimjimovich did you solve it with Chef functionality, or plain Ruby ?
[2012-12-20 10:11:17 -0500] jimjimovich: loicag: I managed to do it with not_if ... somehow I didn't see that in the docs before.
[2012-12-20 10:15:53 -0500] loicag: jimjimovich: sweet, that makes for an elegant solution
[2012-12-20 10:16:31 -0500] jimjimovich: yes, in fact, once I found not_if, I made an even more elegant solution than saving a file somewhere.  Gotta love the UNIX way :)
[2012-12-20 10:26:02 -0500] zts: kisoku: node[:chef_environment] doesn't work because chef_environment isn't a normal attribute - there are a few other things like that too
[2012-12-20 10:37:07 -0500] teukka: ayn, jtimberman: my_cookbook_foo works withaut renaming the cookbook. chef replaces dashes with undescores in the lwrp resource name. been there, done that =)
[2012-12-20 10:37:56 -0500] specialsauce: chefs: is there no idempotent way to create both a user and a group?
[2012-12-20 10:38:53 -0500] specialsauce: it seems that if you specify a group with action create (with no explicit set of members) and then later modify it to have members that the create actin actually deletes all members on its execution
[2012-12-20 10:38:58 -0500] specialsauce: and then the modify adds them back in again
[2012-12-20 10:39:12 -0500] specialsauce: so although the end result is idempotent, the steps are not
[2012-12-20 10:40:17 -0500] teukka: ayn, jtimberman: actually the dash is replaced only for the method name. the resource is saved with the dash. a bit complicated
[2012-12-20 10:41:51 -0500] specialsauce: moreover, how do you create a user and a group in an idempotent way? because if you create a group you have to specify members (which you haven't created yet) and if you create a user you have to specify its gid (which you haven't created yet)
[2012-12-20 10:41:55 -0500] specialsauce: chicken and egg
[2012-12-20 10:42:24 -0500] teukka: specialsauce: depends on your usecase but "append" attribute would help where you create the group
[2012-12-20 10:42:32 -0500] teukka: specialsauce: see http://docs.opscode.com/resource_group.html
[2012-12-20 10:43:00 -0500] specialsauce: teukka: but when the original group resource that does the create is run, it wipes all users from the group
[2012-12-20 10:43:06 -0500] specialsauce: because you only add them in the later append
[2012-12-20 10:43:19 -0500] specialsauce: so although the net result is idempotent, each step is not
[2012-12-20 10:44:53 -0500] teukka: specialsauce: are you sure? as far as I understand `append true` should avoid the member list truncation
[2012-12-20 10:45:14 -0500] ChefNewbie: Question: I have server running ( I supose, atleast the web-ui seems to work there ), how do I configure client(knife?) on my localmachine to connect there?
[2012-12-20 10:45:22 -0500] specialsauce: teukka: pretty sure that's what I'm seeing, yes
[2012-12-20 10:45:29 -0500] specialsauce: the resource keeps getting updated on every run
[2012-12-20 10:45:42 -0500] specialsauce: its not the append that truncates
[2012-12-20 10:46:04 -0500] specialsauce: its the original group specification with action create and members not listed, which is read as nil, which means empty
[2012-12-20 10:46:10 -0500] specialsauce: https://github.com/opscode/chef/blob/master/lib/chef/provider/group.rb
[2012-12-20 10:46:58 -0500] teukka: specialsauce: yes but I meant that you put the `append true` on *that* definition
[2012-12-20 10:47:23 -0500] specialsauce: aha!
[2012-12-20 10:47:36 -0500] specialsauce: teukka: that's a hell of a way of thinking about it but that might just work
[2012-12-20 10:47:52 -0500] teukka: specialsauce: but do you just want to have a group that corresponds to the username?
[2012-12-20 10:48:10 -0500] specialsauce: sometimes, sometimes not
[2012-12-20 10:48:34 -0500] teukka: as the user resource can create a group for you automatically
[2012-12-20 10:51:41 -0500] teukka: I guess that depends on the platform
[2012-12-20 10:52:49 -0500] Robert-: Hi - does anyone know what this error means : NoMethodError: undefined method `find' when using the php_pear LWRP in the opcode php cookbook?
[2012-12-20 10:55:55 -0500] specialsauce: thanks teukka, much appreciated
[2012-12-20 10:56:01 -0500] specialsauce: was banging my head against a wall on that one
[2012-12-20 11:03:23 -0500] Virunga: Could you suggest to me a gem to use knife inside a ruby script?
[2012-12-20 11:06:24 -0500] laurent\: Virunga: what about running your ruby script with knife exec ?
[2012-12-20 11:06:54 -0500] laurent\: http://wiki.opscode.com/display/chef/Knife+Exec
[2012-12-20 11:07:10 -0500] Virunga: laurent\: actually i have to use it inside a Rails' controller
[2012-12-20 11:07:53 -0500] laurent\: ok, i'd be interested by the best way to do so then :)
[2012-12-20 11:08:27 -0500] laurent\: i'll also wish to do that, I was thinking i would use the new rails chef-webui
[2012-12-20 11:08:37 -0500] laurent\: but haven't had time to play with it yet
[2012-12-20 11:09:24 -0500] laurent\: s/i'll/I/
[2012-12-20 11:10:19 -0500] laurent\: so that's the only hint i could give: have a look at the new rails chef-server-webui :)
[2012-12-20 11:10:21 -0500] Virunga: laurent\: do you have a link to the rails chef-webui, please?
[2012-12-20 11:10:51 -0500] Virunga: Is it this https://github.com/opscode/chef-server-webui
[2012-12-20 11:11:05 -0500] laurent\: yep
[2012-12-20 11:11:47 -0500] Virunga: Awesome
[2012-12-20 11:11:48 -0500] laurent\: i'm just wondering if it's also able to talk to the chef-server (ruby)
[2012-12-20 11:12:10 -0500] teukka: specialsauce: np =)
[2012-12-20 11:14:05 -0500] Virunga: laurent\: what do you mean? It says The chef-server-webui is a simple Rails 3.2 application which talks to the Chef Server API (aka Erchef) for all back-end data.
[2012-12-20 11:31:47 -0500] laurent\: Virunga: just wondering if it also works out of the box with the ruby chef server (v0.9 and v0.10/v10.0)
[2012-12-20 11:32:39 -0500] Virunga: Oh
[2012-12-20 11:53:16 -0500] dijit: hey fellas; any packages for RHEL6.3?
[2012-12-20 11:58:49 -0500] zts: dijit: client or server?  The 'omnibus'/chef-full installer should be okay for RHEL6
[2012-12-20 11:59:13 -0500] zts: (for the client)
[2012-12-20 11:59:15 -0500] dijit: I've never had a run in with omnibus
[2012-12-20 11:59:34 -0500] dijit: I was looking for a repo or something (and client+server)
[2012-12-20 11:59:42 -0500] dijit: I'm trying to move away from chef-solo.
[2012-12-20 11:59:51 -0500] dijit: also HI! *waves frantically*
[2012-12-20 12:00:07 -0500] zts: brb
[2012-12-20 12:10:37 -0500] zts: dijit: check out http://www.opscode.com/chef/install/
[2012-12-20 12:11:23 -0500] zts: dijit: those packages bundle up pretty much everything above libc, and will give you chef-client along with chef-solo
[2012-12-20 12:11:30 -0500] dijit: ahh
[2012-12-20 12:11:32 -0500] dijit: cool
[2012-12-20 12:11:40 -0500] dijit: and for the master compilation...
[2012-12-20 12:11:45 -0500] dijit: forgot a comma.
[2012-12-20 12:11:50 -0500] dijit: and for the master, compilation...*
[2012-12-20 12:12:10 -0500] zts: dijit: if you want to install a chef server, there's no official opscode packages yet - I think there's still some third-party packages from FrameOS and/or RBEL
[2012-12-20 12:12:56 -0500] zts: dijit: but I'd suggest using Hosted Chef to start with (it's free for 5 nodes), as it's much less hassle
[2012-12-20 12:13:25 -0500] dijit: you're probably right.
[2012-12-20 12:13:36 -0500] dijit: I need to get a really good grasp of it before I deploy it.
[2012-12-20 12:14:10 -0500] dijit: honestly I've only ever read about puppet, and edited some chef configs and recipes.. so I've a long way to go I think.
[2012-12-20 12:14:21 -0500] dijit: tah
[2012-12-20 12:14:50 -0500] dijit: oh zts; may I PM?
[2012-12-20 12:26:50 -0500] zts: dijit: of course, go for it
[2012-12-20 13:27:52 -0500] jwitrick: does anyone have any good examples on how to do authorized_keys ?
[2012-12-20 13:28:09 -0500] jwitrick: especially when you can not just override the existing file.
[2012-12-20 13:31:41 -0500] zts: jwitrick: I used the users cookbook, but I don't think that supports your second criteria.  On the other hand, I considered it a feature that it stopped people randomly adding keys :)
[2012-12-20 13:32:52 -0500] teukka: jwitrick: I have not used it myself, but you could maybe use AuthorizedKeysFile setting in sshd config to add another file location that is managed by Chef
[2012-12-20 13:33:24 -0500] jwitrick: I will check that out. thanks
[2012-12-20 13:33:54 -0500] teukka: openssh from v5.9 supports multiple files
[2012-12-20 13:37:33 -0500] tknerr: ohai chefs!
[2012-12-20 13:38:31 -0500] tknerr: i'm getting some unauthorized errors when running chef-client for one of my clients recently
[2012-12-20 13:38:34 -0500] tknerr: like this:
[2012-12-20 13:38:36 -0500] tknerr: HTTP Request Returned 401 Unauthorized: Failed to authenticate. Ensure that your client key is valid.
[2012-12-20 13:38:58 -0500] tknerr: no clue how that happened
[2012-12-20 13:39:50 -0500] tknerr: the /etc/chef/client.pem has not been changed since months, but after a reboot a few weeks ago I get the unauthorized error
[2012-12-20 13:40:14 -0500] tknerr: so i'm wondering about 2 things now
[2012-12-20 13:40:21 -0500] tknerr: 1) how can i fix this?
[2012-12-20 13:40:53 -0500] tknerr: 2) how has that happened?
[2012-12-20 13:41:30 -0500] tknerr: would it be safe to delete and re-register the client and node?
[2012-12-20 13:41:46 -0500] tknerr: or is it possible to recover the existing client?
[2012-12-20 13:48:05 -0500] gyre007: I would reregister it...
[2012-12-20 13:52:34 -0500] maruq: hi guys
[2012-12-20 13:52:55 -0500] maruq: just wondering before I go & write my own, does anybody know of a cookbook for pgpool-ii?
[2012-12-20 13:54:38 -0500] tknerr: gyre007: thanks - but i actually found the problem
[2012-12-20 13:55:20 -0500] tknerr: gyre007: looking closer it said unauthorized not unauthenticated
[2012-12-20 13:56:08 -0500] tknerr: so it was a bad /etc/hosts file
[2012-12-20 13:56:38 -0500] tknerr: thats why ohai fqdn reported the wrong hostna,e
[2012-12-20 14:08:21 -0500] tknerr: gyre007: oh and this helped as well: http://wiki.opscode.com/display/chef/Authentication+and+Authorization#AuthenticationandAuthorization-DebuggingAuthenticationProblems
[2012-12-20 14:09:22 -0500] moos3: can I do this "template "/etc/sysconfig/network-scripts/ifcfg-#{node[:setup][:iface]}" do"
[2012-12-20 14:09:36 -0500] whilp: moos3: jup
[2012-12-20 14:10:27 -0500] moos3: hrm it seems to be kicking a error on it
[2012-12-20 14:10:36 -0500] moos3: https://gist.github.com/d610f965b15144cf2d2b
[2012-12-20 14:14:53 -0500] whilp: moos3: should that not be "override_attributes" in your JSON?
[2012-12-20 14:16:49 -0500] whilp: anyway, your problem is that `node[:setup]` is not defined -- i don't use JSON_ATTRIBs much and can't remember how they should be structued
[2012-12-20 14:16:54 -0500] whilp: but that's where you should poke
[2012-12-20 14:20:37 -0500] moos3: look at line 3 of that gist
[2012-12-20 14:24:03 -0500] jwcarman: So, if I'm using berkshelf with client_api, I'll need to have a client key, right?
[2012-12-20 14:24:42 -0500] jwcarman: We have a "corporate" chef server that I want to download cookbooks from (ones that we depend upon).  I don't want to upload anything.
[2012-12-20 14:26:05 -0500] jwcarman: Do I need to be an "admin client"?
[2012-12-20 14:46:07 -0500] seif: Hello, any ideas where I can find the documentation or some examples on using  https://rubygems.org/gems/chef ?
[2012-12-20 14:49:12 -0500] lflux: seif: http://wiki.opscode.com/display/chef/Home
[2012-12-20 14:51:07 -0500] seif: lflux: thanks, that is the link the documentation take me to, but I dont see what classes the gem provides, how to set authentication keys ...
[2012-12-20 14:52:22 -0500] jtimberman: seif: Chef is a library and a tool. You can view generated Rdoc from the source comments on e.g., http://rubydoc.info/gems/chef
[2012-12-20 14:52:57 -0500] jtimberman: seif: The wiki (and the new documentation site, docs.opscode.com) document many things about implementing it for configuration management for automating your infrastructure
[2012-12-20 14:53:32 -0500] jtimberman: http://docs.opscode.com/chef_overview.html
[2012-12-20 14:55:36 -0500] jtimberman: information about authentication is still on the wiki though: http://wiki.opscode.com/display/chef/Authentication+and+Authorization
[2012-12-20 14:55:54 -0500] seif: jtimberman: thanks, I'll go through the documentation again, because I am sure I had seen what I am looking for at some point, already got the chef server up, and can use it with knife. Currently using something similar to Capistrano for deployments (dropkick in c#) which has the notion of roles, I was hoping to find a simple ruby tutorial that tells me this is how you create roles from ruby :)
[2012-12-20 14:56:34 -0500] seif: quite sure I had seen such an example in my reading in the past week, can't find it again though :)
[2012-12-20 14:56:51 -0500] jtimberman: seif: ahh.
[2012-12-20 14:57:45 -0500] jtimberman: seif: there's a couple projects out there that tie the server search feature into capistrano to make deployment "roles" use the server "roles"
[2012-12-20 14:58:30 -0500] jtimberman: seif: https://rubygems.org/gems/capistrano-chef for example
[2012-12-20 14:59:02 -0500] jtimberman: seif: chef server API documentation is here: http://docs.opscode.com/chef/api_chef_server.html which may be helpful.
[2012-12-20 14:59:16 -0500] jtimberman: if you're looking to implement a client in C#, that might be handy
[2012-12-20 14:59:27 -0500] seif: jtimberman: yup, I found https://github.com/cramerdev/capistrano-chef which I would need to create something similar for dropkick, read roles from chef
[2012-12-20 15:00:33 -0500] jtimberman: there's a couple of Ruby libraries, spice (by danryan) and ridley (by jamie winsor / riotgames), and the java library for working with cloud services, jclouds, has chef integration too
[2012-12-20 15:00:35 -0500] seif: jtimberman: that is handy. thanks for your help. hoefully I'll get my head around it.
[2012-12-20 15:00:54 -0500] jtimberman: https://github.com/jclouds/jclouds-chef
[2012-12-20 15:01:49 -0500] jtimberman: seif: the chef developer mailing list is a good place for discussion, or if you get stuck, and #chef-hacking channel is available too :)
[2012-12-20 15:03:16 -0500] seif: jtimberman: brilliant, looke like https://github.com/danryan/spice/wiki/Usage is what I needed! for the time being I just want to get the roles into chef, and gets the recipes in later, lovely community and great tool. thanks!
[2012-12-20 15:03:49 -0500] jtimberman: Right on
[2012-12-20 15:12:22 -0500] makerbreakr: NoMethodError: undefined method `value_for_platform_family'
[2012-12-20 15:12:31 -0500] makerbreakr: anyone run into this with chef-client, ubuntu 12.04?
[2012-12-20 15:12:46 -0500] makerbreakr: (the chef-client recipe)
[2012-12-20 15:15:21 -0500] ssd7: makerbreakr: What version of chef-client are you running?
[2012-12-20 15:15:53 -0500] makerbreakr: 0.10.8
[2012-12-20 15:24:36 -0500] jtimberman: makerbreakr: that was introduced in 0.10.10, i believe
[2012-12-20 15:24:51 -0500] jtimberman: you can either downgrade the chef-client cookbook or upgrade chef
[2012-12-20 15:25:24 -0500] makerbreakr: cool thanks
[2012-12-20 15:25:40 -0500] jtimberman: cokobook v2.0.0 introduced platform family, so version 1.2.0 wouldn't have that.
[2012-12-20 15:29:23 -0500] ssd7: Bleh, sorry for disappearing.  Unreliable network at the moment :(.  Thanks for clearing that up jtimberman :)
[2012-12-20 16:02:27 -0500] jwcarman: Is there an example build script somewhere that shows what this blog is talking about: http://permalink.gmane.org/gmane.comp.sysutils.chef.user/4956
[2012-12-20 16:06:29 -0500] jwcarman: I am looking at RiotGames' GitHub site
[2012-12-20 16:08:01 -0500] jwcarman: do they just code in the script in the Jenkins UI?
[2012-12-20 16:08:01 -0500] awgross: jwcarman: I think that post is before they made berkshelf standalone from knife
[2012-12-20 16:08:05 -0500] jwcarman: Or do they use Rake?
[2012-12-20 16:08:20 -0500] jwcarman: awgross: yeah, I figured that much
[2012-12-20 16:08:30 -0500] jwcarman: I'm more concerned with seeing the job itself I guess
[2012-12-20 16:08:35 -0500] awgross: jwcarman: check berkshelf.com, they use Thor
[2012-12-20 16:08:37 -0500] jwcarman: Do they have a public Jenkins server?
[2012-12-20 16:08:40 -0500] awgross: instead of rake
[2012-12-20 16:10:59 -0500] jwcarman: awgross: so, do I just write the thor commands in the Jenkins job as a shell script?
[2012-12-20 16:11:05 -0500] jwcarman: Or, write my own Rakefile that does it?
[2012-12-20 16:11:31 -0500] awgross: i mean its really up to you, they provided some nice Thor commands for working with Berkshelf, but you can do it however you want
[2012-12-20 16:11:53 -0500] awgross: I have tried using a Chef Server and just running knife-ec2 commands.  Worked ok, but kinda buggy.
[2012-12-20 16:12:15 -0500] awgross: Unfortunately this is not a well publicized area, so try what you are comfortable with and report back so we can all benefit
[2012-12-20 16:12:22 -0500] jwcarman: Does anyone have a public Jenkins server that we can see a working example?
[2012-12-20 16:12:48 -0500] jwcarman: awgross: I'm all about helping the community.  I'm just trying to get my bearings.  I'm new to this stuff.
[2012-12-20 16:14:27 -0500] awgross: jwcarman: fair enough, we all kinda are
[2012-12-20 16:14:47 -0500] jwcarman: awgross: okay, that's what it feels like, so I'm glad I'm not alone! :)
[2012-12-20 17:04:39 -0500] barnacles: For those of you that use sublime text 2 to edit your chef stuff, here's a nifty plugin! https://github.com/cabeca/SublimeChef
[2012-12-20 17:34:38 -0500] mshilling: sorry for the noob question, but how do I make an if statement conditional, ie:  if node["OCLC_env"]["environ"]["QA"] but instead of it being QA, I want it to be "like QA" or *QA*
[2012-12-20 17:34:45 -0500] mshilling: does that question even make sense?
[2012-12-20 17:35:36 -0500] jbz: mshilling: Are you trying to determine the contents of that attribute?
[2012-12-20 17:35:58 -0500] jbz: Or are you testing whether the attribute exists/is named as such?
[2012-12-20 17:37:35 -0500] mshilling: yes, instead of it being a fixed value, QA< I want to evaluate it
[2012-12-20 17:37:54 -0500] mshilling: determining the contetnts
[2012-12-20 17:37:59 -0500] mshilling: the example is actually the hostname
[2012-12-20 17:38:17 -0500] mshilling: I need a certain directory created if the hostname is like "xxx"
[2012-12-20 17:39:19 -0500] specialsauce: mshilling, that doesn't seem very cheffy, cheffy way would be to have a recipe that creates the dir and only apply that recipe to the hosts you want i think
[2012-12-20 17:39:38 -0500] qhartman: if hostname_var.include?("xxx") then
[2012-12-20 17:39:40 -0500] qhartman: http://www.ruby-doc.org/core-1.9.3/String.html#method-i-include-3F
[2012-12-20 17:39:40 -0500] mshilling: I was thinking of dividing that out into individual recipes
[2012-12-20 17:40:00 -0500] mshilling: because I could see this recipe getting very bad over time
[2012-12-20 17:40:21 -0500] mshilling: we have over 5000 machines, and all are "unique" enough.
[2012-12-20 17:43:25 -0500] mshilling: FATAL: NameError: undefined local variable or method `hostname_var' for #<Chef::Recipe:0x00000018f4b1c8>
[2012-12-20 17:45:59 -0500] blakfeld: Hey everyone, whenver I try to restart our chef-server service, I get this error "Permission denied - /etc/chef/server.rb" Does anyone have any thoughts on where I should be looking to resolve that?
[2012-12-20 17:49:34 -0500] qhartman: mshilling, that was just a placeholder I stuck in there as an example, you'll need to replace that with whatever variable you are using to hold the hostname.
[2012-12-20 17:50:13 -0500] qhartman: I think the standard var that would have what you want would be node[:fqdn], but I'm not sure
[2012-12-20 17:51:07 -0500] qhartman: I always use node.name in my recipes because we always have that match the hostname.
[2012-12-20 17:51:34 -0500] JasonF: I prefer using node.name because it's less likely to change by mistake across runs.
[2012-12-20 17:51:47 -0500] qhartman: also that
[2012-12-20 17:53:19 -0500] qhartman: blakfeld, sounds like a problem with the user you are using to run the server. Make sure you are starting the server as the appropriate user (usually root) or the sudo command, and that the appropriate user owns that file
[2012-12-20 18:00:11 -0500] isotope: I deployed chef at 5 companies so far and just started using knife ssh
[2012-12-20 18:00:17 -0500] isotope: what took me so long?
[2012-12-20 18:00:43 -0500] qhartman: lol, I think that might be the first command I learned when I was introduced to chef
[2012-12-20 18:01:04 -0500] c_t: I looked briefly at knife ssh, but not long enough to actually get it to work
[2012-12-20 18:01:16 -0500] c_t: ISTR something seeming kind of weird, but fuck if I can remember what it was
[2012-12-20 18:01:24 -0500] isotope: qhartman I am stoopid
[2012-12-20 18:02:08 -0500] qhartman: I dunno about that, but it is amusing that something I consider to be a primary feature of knife could go overlooked for so long
[2012-12-20 18:02:09 -0500] isotope: knife ssh "chef_environment:prod -a fqdn "uptime"
[2012-12-20 18:02:24 -0500] isotope: get the uptime for all servers in the production environment
[2012-12-20 18:02:45 -0500] isotope: Doh bad example missing a double quote
[2012-12-20 18:02:53 -0500] isotope: knife ssh "chef_environment:prod" -a fqdn "uptime"
[2012-12-20 18:03:00 -0500] programmerq: so, looking at encrypted data bags
[2012-12-20 18:03:06 -0500] programmerq: I don't see what this gets us
[2012-12-20 18:03:18 -0500] programmerq: because we now have to copy out the key to the various servers
[2012-12-20 18:03:27 -0500] programmerq: is that really the case?
[2012-12-20 18:04:12 -0500] qhartman: also add --no-host-key-verify to the command to make sure it will just work if it's the first time you've connected to the machine
[2012-12-20 18:04:57 -0500] qhartman: programmerq, part of the idea is that it makes it so that you revoke access by changing the key if you need to
[2012-12-20 18:05:38 -0500] qhartman: programmerq, and also makes it so that the data isn't in the clear when it's at rest on the chef server, which is neccesary in some environment for compliance stuff, and is a good practice anyway if it's sensitive data
[2012-12-20 18:06:15 -0500] qhartman: assuming the key is not on the server itself, it makes it harder for someone who gets in to get to the information.
[2012-12-20 18:06:38 -0500] qhartman: They are a hassle to use though, we don't use them as much as we should.
[2012-12-20 18:07:39 -0500] qhartman: They way we handle key distribution is we have a "keystore" host that holds those, and as part of our baseline cookbook the server connects to that server and downloads the keys it needs via scp
[2012-12-20 18:07:44 -0500] mattray: http://community.opscode.com/cookbooks/pxe_dustnow 1.4.0 and builds local mirrors for installers and provides a custom bootstrap template for using them with knife bootstrap. Not just for pxe booting anymore
[2012-12-20 18:12:43 -0500] programmerq: qhartman: what technology do you use for your "keystore"
[2012-12-20 18:13:40 -0500] qhartman: programmerq, it's just a minimal linux box running an ssh server, and the keystore user is only allowed to copy key files, not do anything else
[2012-12-20 18:14:50 -0500] qhartman: so if we think the keys have been compromised somehow, we can invalid the ssh key the keystore user uses, generate new keys for the databags, and then redistribute all that stuff via che
[2012-12-20 18:15:02 -0500] qhartman: s/che/chef/
[2012-12-20 18:21:26 -0500] dougireton: is there a good way to tell if the chef-client is running for the first time?
[2012-12-20 18:22:02 -0500] dougireton: We are writing a Windows patching recipe and we only want to patch/reboot the first chef run.
[2012-12-20 18:22:23 -0500] jbz: dougireton: You can have a cookbook which removes the 'first run' cookbooks from the runlist before it gets saved to the server.
[2012-12-20 18:22:58 -0500] jbz: dougireton: We do this - our chef-client starts up and reads an attributes.json file with the 'initial' runlist, including a couple of cookbooks which remove the validation.pem and other first-run tasks
[2012-12-20 18:23:17 -0500] jbz: so you could check for the presence of a file/flag which is removed by one of those first-run cookbooks.
[2012-12-20 18:25:41 -0500] dougireton: cool, thanks
[2012-12-20 18:44:08 -0500] deanh: I'm trying to use the "git" provider, and it appears to create a new branch named "deploy" instead of checkout'ing the supplied revision
[2012-12-20 18:44:12 -0500] deanh: https://github.com/opscode/chef/blob/master/lib/chef/provider/git.rb#L160
[2012-12-20 18:44:31 -0500] deanh: shell_out!("git checkout -b deploy #{sha_ref}", run_options(:cwd => @new_resource.destination))
[2012-12-20 19:09:38 -0500] maruq: hi guys, does anyone have an example of how I should be using knife ssh
[2012-12-20 19:10:12 -0500] maruq: I try `knife ssh "role:my-role" -a ec2.public_hostname -i ~/.ec2/mykey.pem -x ubuntu "echo $HOSTNAME"`
[2012-12-20 19:10:20 -0500] maruq: but I get an auth error
[2012-12-20 19:10:34 -0500] maruq: note the role is in EU-West-1
[2012-12-20 19:12:34 -0500] doomviking: maruq: can you ssh straight to it?
[2012-12-20 19:12:46 -0500] maruq: doomviking: yep
[2012-12-20 19:12:58 -0500] doomviking: weird
[2012-12-20 19:13:13 -0500] maruq: actually, maybe I have a few dead nodes in there...
[2012-12-20 19:15:25 -0500] maruq: I either get a failed to connect or a timeout
[2012-12-20 19:20:30 -0500] jflowers: I am having a problem with getting a resource notified
[2012-12-20 19:20:32 -0500] jflowers: https://gist.github.com/4347902
[2012-12-20 19:20:51 -0500] jflowers: the gist has two files in it
[2012-12-20 19:20:56 -0500] jflowers: a recipe and a log
[2012-12-20 19:21:28 -0500] jflowers: I can see from the log that the resource that sends the notification is executed
[2012-12-20 19:21:57 -0500] jflowers: yet I don't see the resource that should have been notified get executed at the end of the chef run
[2012-12-20 19:26:56 -0500] nn0101: hi
[2012-12-20 19:27:27 -0500] nn0101: is there a guide on building django stack for private infrastructure?
[2012-12-20 19:28:19 -0500] nn0101: specifically, i get "INFO: HTTP Request Returned 404 Not Found: Cannot load role dbapp_database_master" when i bootstrap as mentioned @ http://wiki.opscode.com/display/chef/Build+a+Django+Stack
[2012-12-20 19:29:50 -0500] nn0101: knife bootstrap IPADDRESS  -r 'role[base],role[dbapp_database_master],role[dbapp],recipe[dbapp::db_bootstrap],role[dbapp_load_balancer]' <- what i ran.
[2012-12-20 19:30:17 -0500] nn0101: knife bootstrap IPADDRESS  -r 'role[base],role[dbapp_database_master],role[dbapp],recipe[dbapp::db_bootstrap],role[dbapp_load_balancer]' -x username -P password --sudo <- what i ran.
[2012-12-20 19:30:27 -0500] nn0101: anyone?
[2012-12-20 19:31:44 -0500] gondoi: is there a way to provide a json string for attributes in test-kitchen similar to vagrant?
[2012-12-20 19:36:01 -0500] nn0101: hmmm the role isn't even there.
[2012-12-20 19:36:20 -0500] nn0101: i see. the doc is incorrect.
[2012-12-20 19:36:55 -0500] bobafett: anyone know if I can run a command in a recipe as a different user
[2012-12-20 19:37:15 -0500] bobafett: I need to create a directory on an NFS mount, but root is squashed, so I need to do it as a certain user
[2012-12-20 19:38:51 -0500] wassy121: bobafett, the "execute" resource takes a user argument
[2012-12-20 19:39:26 -0500] mshilling: ahh didnt think of that.  I'll check it out
[2012-12-20 19:39:30 -0500] m2matson: does anyone know the fix for this error when bootstrapping a new server via chef-solo? http://tickets.opscode.com/browse/CHEF-2864
[2012-12-20 19:41:45 -0500] m2matson: this is the workaround, but i'd rather not > "init_style": "runit"
[2012-12-20 19:41:47 -0500] mshilling: problem with execute is I need it to only run if the directory doesnt exist
[2012-12-20 19:42:23 -0500] wassy121: only_if
[2012-12-20 19:42:35 -0500] programmerq: we decided to just copy our certs out manually. Our recipe looks at the expected location to see if the cert file exists, and if it doesn't, it generates and uses a self-signed certificate.
[2012-12-20 19:42:47 -0500] wassy121: or not_if
[2012-12-20 19:43:09 -0500] wassy121: depending on how you much you like your ! symbol
[2012-12-20 19:46:26 -0500] BlackMaria: "hay" folks whats cooken?
[2012-12-20 19:46:33 -0500] BlackMaria: Any suggestions, I want to build a 3tier system with chef but have never used it before.
[2012-12-20 19:46:46 -0500] BlackMaria: As test case I want to make an lb,php,mysql anyone have a recipe?
[2012-12-20 19:47:11 -0500] nn0101: damn, now it's failing with "Cannot find a resource for mysql_database on ubuntu version 12.10"
[2012-12-20 19:47:25 -0500] nn0101: Recipe Compile Error in /var/chef/cache/cookbooks/database/recipes/master.rb
[2012-12-20 19:47:36 -0500] programmerq: BlackMaria: opscode has a mysql cookbook that I've used. there is also an nginx cookbook to install nginx, and another cookbook specific to generating an nginx config that makes it behave like a load balancer
[2012-12-20 19:47:51 -0500] programmerq: as for php, I haven't done any of that but I'd be surprised if there isn't a cookbook for that too.
[2012-12-20 19:48:29 -0500] programmerq: it wouldn't be difficult to roll your own recipes for installing php
[2012-12-20 19:50:01 -0500] BlackMaria: programmerq thx,  i am digging ( I have a mark burgess tatoo but my guys at work are new to this stuff so we may move to chef ;)
[2012-12-20 19:50:40 -0500] nn0101: BlackMaria: don't bother. the chefs are strictly geared towards well known public clouds only.
[2012-12-20 19:51:14 -0500] nn0101: s/chefs/chef guides/
[2012-12-20 19:51:33 -0500] BlackMaria: at the moment we are on aws
[2012-12-20 19:51:52 -0500] BlackMaria: but thanks just the same
[2012-12-20 19:52:01 -0500] nn0101: the stupid guides gives you error on something simple as setting up a private/hybrid cloud isstnance of django,mysql and haproxy
[2012-12-20 19:56:47 -0500] danryan: BlackMaria: I just deploy a site that looked exactly like that; nginx -> php(-fpm) -> mysql
[2012-12-20 19:57:25 -0500] programmerq: BlackMaria: yeah, when you say php, you could mean php-fpm, apache+mod_php, or any number of other ways to run php.
[2012-12-20 19:57:45 -0500] danryan: the application_php cookbook assumes mod_php
[2012-12-20 19:59:33 -0500] programmerq: I'm about to start work on doing chef stuff for another project that is apache+mod_php
[2012-12-20 20:00:13 -0500] programmerq: apache/mod_php on every appserver, nginx load balancing, mysql database, and memcached
[2012-12-20 20:00:26 -0500] programmerq: so I'd probably use application_php cookbook, and also find a memcached cookbook
[2012-12-20 20:00:41 -0500] programmerq: I've already done nginx and mysql
[2012-12-20 20:01:49 -0500] wilsondkw: halloo. does anyone know if you can access data_bag_items in a cookbook attributes file? I've tried, but it fails with "TypeError: can't convert String into Integer." The same code referencing the data_bag_items works in a recipe.
[2012-12-20 20:06:15 -0500] cwj: wilsondkw: i think ive seen that done
[2012-12-20 20:06:18 -0500] cwj: https://github.com/karmi/cookbook-elasticsearch/blob/master/attributes/aws.rb
[2012-12-20 20:07:03 -0500] wilsondkw: thx, cwj: I'll check that out
[2012-12-20 20:17:25 -0500] m2matson: i'm curious, do chefs typically manage cookbooks in one git repo or is there a benefit to 1 repo per cookbook?
[2012-12-20 20:18:28 -0500] siezer: the "old way" was one monolothic repo with cookbooks inside, the "new hotness" is one repo per cookbook
[2012-12-20 20:18:43 -0500] siezer: the new way treats cookbooks are software artifacts just like any other library
[2012-12-20 20:18:48 -0500] siezer: which is good.
[2012-12-20 20:19:01 -0500] siezer: s/are/as/
[2012-12-20 20:19:23 -0500] yfeldblum: the new hotness is a global permanent ban on the word "hotness"
[2012-12-20 20:22:27 -0500] doomviking: heh
[2012-12-20 20:22:34 -0500] Twirrim:  / ban yfeldblum for use of the word hotness
[2012-12-20 20:25:27 -0500] xuru: hey everyone  In a recipe, how do I check if an EncryptedDataBag exists, and if it doesn't create it?
[2012-12-20 20:34:49 -0500] awgross: <= "old 'n busted", "new hotness" =>
[2012-12-20 20:40:48 -0500] jwcarman: So, if I have a cookbook "a" that depends on cookbook "c" version 0.0.1 and I have a cookbook "b" that depends on cookbook "c" version 0.0.2 and then I put both "a" and "b" in the same run list for a node, what happens?
[2012-12-20 20:41:20 -0500] jwcarman: Basically, any Java folks would recognize this as a "jar hell" situation.
[2012-12-20 20:41:26 -0500] jwcarman: I guess we could call it "cookbook hell"
[2012-12-20 20:41:47 -0500] jbz: "Doc, it hurts when I do this."
[2012-12-20 20:41:52 -0500] jbz: "Don't *do* that then."
[2012-12-20 20:42:07 -0500] jwcarman: I'm not saying I'm doing it.  What would Chef do?
[2012-12-20 20:42:13 -0500] jbz: yeah I know, sorry :-)
[2012-12-20 20:42:18 -0500] jbz: hm
[2012-12-20 20:42:27 -0500] jwcarman: Agreed, you shouldn't do it if you have control
[2012-12-20 20:42:37 -0500] jwcarman: Suppose a and b are third-party cookbooks (from opscode for instance)
[2012-12-20 20:42:49 -0500] jbz: assuming both cookbook versions were available on the server and not proscribed by environment
[2012-12-20 20:42:59 -0500] jbz: I would presume it would download and cache both
[2012-12-20 20:43:06 -0500] jwcarman: Would it run both?
[2012-12-20 20:43:07 -0500] jbz: but I'm not sure if it would do the right thing when they were called
[2012-12-20 20:43:10 -0500] jbz: yeah, that's the question
[2012-12-20 20:43:19 -0500] jwcarman: What would be the "right thing"?
[2012-12-20 20:43:24 -0500] jbz: heh
[2012-12-20 20:43:34 -0500] jbz: honestly, I don't even know, there
[2012-12-20 20:43:36 -0500] jwcarman: Version 0.0.2 might not necessarily do what 0.0.1 did and thus "a" would be broken
[2012-12-20 20:43:42 -0500] jbz: 'right thing' for me would be 'refuse to do it'
[2012-12-20 20:44:10 -0500] jbz: Are resources versioned during the compilation phase?
[2012-12-20 20:44:27 -0500] jbz: (basically I'm not sure what would happen, TBH)
[2012-12-20 20:45:11 -0500] jbz: If I found myself in that situation, I'd try harmonizing the cookbook with the lower dep up to the higher one and testing to see if it worked.  Which isn't an answer for you, I recognize.
[2012-12-20 20:45:16 -0500] jwcarman: Ok, I just thought of this and was noodling on it, so I thought I'd ask the experts
[2012-12-20 20:45:24 -0500] jwcarman: In Java, we have the same sort of answer that you did "don't do that!"
[2012-12-20 20:45:29 -0500] jwcarman: Until of course OSGi came along
[2012-12-20 20:46:18 -0500] jwcarman: jbz: agreed, that's what I would do.  I just didn't know if Chef would indicate that to us in some way to let us know we're doing something stupid
[2012-12-20 20:46:42 -0500] jwcarman: jbz: that assumes I have control over the cookbooks, too.  Or, I don't mind downloading/bastardizing to my liking
[2012-12-20 20:46:59 -0500] jbz: yeah
[2012-12-20 20:47:43 -0500] jwcarman: jbz: thanks for helping me think that one through :)
[2012-12-20 20:48:09 -0500] jwcarman: and for the record, I just coined "cookbook hell."  Consider it trademarked! ;)
[2012-12-20 20:48:23 -0500] jbz: I will guess (totally guess) that it depends on whether resources are versioned during compilation phase (i.e. whether they are linked to cookbooks solely by name, or via some other ID token which could take into accout the different sources)
[2012-12-20 20:48:45 -0500] jbz: And I have no idea if there's an error condition for that, or if it would just execute whichever one it found first
[2012-12-20 20:49:10 -0500] jwcarman: jbz: hopefully it wouldn't execute both
[2012-12-20 20:49:13 -0500] jwcarman: :O
[2012-12-20 20:51:17 -0500] jbz: well, if each calling cookbook specified a different dependency, and the compilation differentiated the two resource sets, it might, right?
[2012-12-20 20:51:20 -0500] chris613: Looking for help getting chef-client to log to syslog. I've read the various JIRAs that talk about this (CHEF-273 and CHEF-1985 are the most interesting), and I have tested my installation of SyslogLogger and it works fine, but I can't get chef-client to use it. Here is my client.rb:  http://pastebin.com/BSnLFEfC  and I'm runing 10.16.2
[2012-12-20 20:52:04 -0500] chris613: Some forum posts even suggest that syslog is now the default behaviour, but it sure doesnt' seem like it to me
[2012-12-20 20:54:06 -0500] jwcarman: jbz: I believe this may interest me enough to just try it to see what happens!
[2012-12-20 20:54:22 -0500] jbz: My tentacles quiver with curiosity!
[2012-12-20 20:54:46 -0500] jbz: (part of me now has a mental image of a Marvin the Martian level explosion)
[2012-12-20 20:54:47 -0500] sfb: Not going to lie. That sounds kind of gross.
[2012-12-20 20:54:49 -0500] chris613: Whoops, should also mention that I've tried the line "log_location SyslogLogger.new("chef-client")" as mentioned in CHEF-273, but altered it to be Syslog::Logger.new("check-client") instead
[2012-12-20 20:54:51 -0500] jbz: hahaha
[2012-12-20 20:55:01 -0500] jbz: CHIN tentacles.  Cthulhuoid.
[2012-12-20 20:55:06 -0500] sfb: haha
[2012-12-20 20:55:24 -0500] jbz: Or Doctor Zoidberg!
[2012-12-20 20:55:36 -0500] sfb: WHY NOT ZOIDBERG
[2012-12-20 20:55:48 -0500] jbz: WHYYYYY
[2012-12-20 20:56:01 -0500] jbz: <- sandwich-based investor
[2012-12-20 21:03:42 -0500] jblaine: chris613: I thought that's what report handlers were for? Wish I knew the answer. This is something we'll likely end up wanting as well.
[2012-12-20 21:04:16 -0500] chris613: report handlers are nice, but chef-client already produces lots of logging output to STDOUT, and I'd just like it in syslog as well
[2012-12-20 21:05:07 -0500] xuru: How do I check if an encrypted data bag item already exists?
[2012-12-20 21:05:17 -0500] chris613: Apparently this has worked in the past, but I guess it's broken. Still experimenting, I tried this in my client.rb: http://pastebin.com/B39B8gVS   the "SANITY CHECK" message appears, but nothing else :(
[2012-12-20 21:08:34 -0500] jwcarman: Has anyone been able to get hostname stuff working properly with vagrant and SLES VMs?
[2012-12-20 21:09:45 -0500] jwcarman: I get an error when Vagrant is trying to set my hostname.
[2012-12-20 21:12:42 -0500] jblaine: chris613: Pretty sure "syslog as default" forum words are nonsense
[2012-12-20 21:14:23 -0500] chris613: jblaine: Yes, it certainly seems that way. I'm pretty sure the problem is that SyslogLogger has changed since all this stuff was written, for example you can no longer require 'syslog_logger', it's now 'syslog/logger' and it's no longer SyslogLogger.new() it's Syslog::Logger.new(), but all that seems trivial and I'm not strong enough in ruby to know why it no longer works :(
[2012-12-20 21:14:58 -0500] hcastro: kallistec: having issues with node.include? locating recipes in the expanded run list but not in run_state[:seen_recipes] -- noticed changes between 10.16.2 and master
[2012-12-20 21:15:44 -0500] hcastro: kallistec: tests against master were throwing a nil on self[recipes] here: https://github.com/opscode/chef/blob/master/lib/chef/node.rb#L244
[2012-12-20 21:16:38 -0500] hcastro: kallistec: altering it to this works -- does that look like the issue or is there some `recipes` method lookup i haven't seen? https://github.com/hectcastro/chef/commit/3ff1aacce8585f6767d115b983739dd658c0bf51
[2012-12-20 21:16:56 -0500] jblaine: chris613: My first thought, given that STDOUT is a valid setting for log_location in the docs, is to figure out how to get something like a file descriptor from your Syslog::Logger instance or something...
[2012-12-20 21:17:15 -0500] jblaine: chris613: Not a Ruby developer, FWIW
[2012-12-20 21:18:40 -0500] chris613: jblaine: Yeah, it's supposed to accept any IO object, which is what I think it gets via Syslog::Logger.new()... so that's exactly what I'm doing. After reading some source code I'm wondering if this bug has re-emerged: http://tickets.opscode.com/browse/CHEF-1985
[2012-12-20 21:18:47 -0500] chris613: It feels like someone would have noticed, though
[2012-12-20 21:19:31 -0500] chris613: I'm using mixlib-log-1.3.0/, though, which apparently is where it was fixed :(
[2012-12-20 21:25:10 -0500] jblaine: chris613: What about --force-logger? re: https://github.com/opscode/chef/blob/master/lib/chef/application/client.rb
[2012-12-20 21:27:01 -0500] chris613: jblaine: Doesnt' look like what I need, and doesn't exist in 10.16
[2012-12-20 21:28:11 -0500] chris613: thanks for pitching in though, I'm going crazy over here and I'm about to use the cheap hack like this:  log_location open("| logger", "w")    which ends up wtih logs with duplicate timestamps, and then write myself a splunk transform to strip them out. I'm really hoping it doesn't come to that, but tomorrow it will ;)
[2012-12-20 21:29:40 -0500] jblaine: chris613: noooo, add some debugging statements and figure out what is wrong
[2012-12-20 21:29:58 -0500] jblaine: chris613: (please :))
[2012-12-20 21:32:50 -0500] chris613: jblaine: I'm trying, but I'm also cutting my teeth on ruby as I go
[2012-12-20 21:38:53 -0500] chris613: jblaine: Making progress...
[2012-12-20 21:40:24 -0500] littleidea: is there anything resembling pxe_dust that is redhat/centos centric floating around?
[2012-12-20 21:52:09 -0500] JasonF: pxe dust? hah! I get jokes.
[2012-12-20 22:08:58 -0500] ssvss__: Hello, I am using the java cookbook, and I would like to change the oracle version to the latest version. I can get the download link from oracle website, but I can seem to find the checksum for the latest version from oracle site. any idea where I can find it.
[2012-12-20 22:12:18 -0500] ssvss__:  I
[2012-12-20 22:12:33 -0500] ssvss__: *can't seem to find the checksum
[2012-12-20 22:15:07 -0500] hcastro: ssvss__: if you download the file, you can get it on a mac by running "shasum -a 256 FILENAME"
[2012-12-20 22:21:20 -0500] ssvss__: Thanks
[2012-12-20 22:23:22 -0500] BlackMaria: littleidea you can look at xcat.sourceforge.net  was originally design to manage clusters and deals with provisioning and build stateless images ( perl based and uses kickstart )
[2012-12-20 22:25:34 -0500] BlackMaria: littleidea if you have more questions I will be back online next week
[2012-12-20 22:25:58 -0500] BlackMaria: dooh I just missed him
[2012-12-20 22:30:09 -0500] blakfeld: Hey guys, I just inherited a chef environment. and I'm having some trouble with it
[2012-12-20 22:30:41 -0500] blakfeld: Whenever I run the bootstrap node install from the chef server, I get to "INFO: Client key /etc/chef/client.pem is not present - registering" Then the server just starts refusing the connection. any ideas?
[2012-12-20 22:32:11 -0500] yfeldblum: blakfeld, what do you mean by "bootstrap node install"?
[2012-12-20 22:32:42 -0500] yfeldblum: blakfeld, do you mean provisioning a new server using `knife node bootstrap`?
[2012-12-20 22:32:56 -0500] blakfeld: yfeldblum, yeah!
[2012-12-20 22:33:36 -0500] yfeldblum: blakfeld, what do you mean by "from the chef server"?
[2012-12-20 22:33:41 -0500] blakfeld: yfeildblum, it knife bookstrap nodehostname -r 'recipe[chef-client]' -x username sude -d ubuntu12.04 -gems'
[2012-12-20 22:33:54 -0500] blakfeld: yfeildblum, and I am running that command from our chef server
[2012-12-20 22:34:06 -0500] yfeldblum: blakfeld, why are you running that command from the chef-server?
[2012-12-20 22:34:34 -0500] blakfeld: yfeldblum, The honest answer there is because thats where I was told I'm supposed to run it. Where should I be doing that?
[2012-12-20 22:34:57 -0500] blakfeld: yfeldblum, we have a puppet guy on our team, but the guy who implemented chef quit without really filling any of us in
[2012-12-20 22:35:42 -0500] yfeldblum: blakfeld, in many environments, knife commands are usually run from the sysadmin's own workstation rather than from central server
[2012-12-20 22:36:23 -0500] yfeldblum: blakfeld, but i'm just wondering where you were coming from
[2012-12-20 22:36:37 -0500] blakfeld: yfeldblum, sure, sadly, the answer is ignorance :D
[2012-12-20 22:36:44 -0500] yfeldblum: blakfeld, what do you mean by "the server just starts refusing the connection"?
[2012-12-20 22:37:49 -0500] blakfeld: yfeldblum, well, I get: "INFO: Client key /etc/chef/client.pem is not present - registering", and then instantly: "ERROR: Connection refused connecting to chef.server:4000 for /clients, retry 1/5"
[2012-12-20 22:39:29 -0500] blakfeld:  yfeldblum, this seems to happen after install chef client, which I've been able to confirm is on the node machine
[2012-12-20 22:39:33 -0500] yfeldblum: blakfeld, `knife bootstrap` is designed to SSH into the server being provisioned, do a few preparations like install chef, write the /etc/chef/client.rb file on the server being provisioned, and then run chef-client on the server being provisioned; either the /etc/chef/client.rb being written is wrong, or your chef-server is refusing connections because of e.g. a firewall rule
[2012-12-20 22:40:05 -0500] yfeldblum: blakfeld, take a look at the /etc/chef/client.rb being created on the target machine
[2012-12-20 22:42:16 -0500] blakfeld: yfeldblum, okay, I have some log stuff set at default values, a chef_server_url set to our chef server, validation_client_name set to "chef-validator", and a node name
[2012-12-20 22:43:27 -0500] yfeldblum: blakfeld, is your chef-server actually listening at that hostname and at that port?
[2012-12-20 22:44:59 -0500] blakfeld: yfeldblum The chef-server is for sure, other machines can still seem to talk to it. This is a machine we brought up today, its in a spot that should have the same firewall rules as everything else, but now that I think about it we only assumed that
[2012-12-20 22:45:31 -0500] yfeldblum: blakfeld, i would definitely check that
[2012-12-20 22:52:16 -0500] jtnz: I have a question about the attribute method 'attribute?'
[2012-12-20 22:52:46 -0500] jtnz: The examples on http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_methods.html only use like 'attribute?("no-nesting")'
[2012-12-20 22:52:59 -0500] jtnz: How do I use attribute? with nested attributes?
[2012-12-20 22:57:38 -0500] matti: Who uses Erchef already?
[2012-12-20 22:58:37 -0500] matti: jtnz: Define "nested".
[2012-12-20 22:58:54 -0500] matti: jtnz: { 'a' => { 'b' => 1 } }?
[2012-12-20 22:59:16 -0500] jtnz: matti, e.g. default['this']['is']['nested']
[2012-12-20 23:00:10 -0500] matti: Not sure if attribute? is recursive.
[2012-12-20 23:00:14 -0500] matti: Did you try?
[2012-12-20 23:02:07 -0500] matti: Hah
[2012-12-20 23:02:10 -0500] matti: alias :attribute? :has_key?
[2012-12-20 23:02:18 -0500] matti: https://github.com/opscode/chef/blob/master/lib/chef/node/attribute.rb#L329
[2012-12-20 23:02:24 -0500] matti: So, no. Its not.
[2012-12-20 23:07:44 -0500] redgetan: when i add -l debug to chef-solo command, some of the extra messages are not that helpful. For example, "DEBUG: Skipping execute[nxensite default] due to not_if ruby block" doesn't tell me what the block contains. It would be great if it also shows the ruby statements inside the not_if block
[2012-12-20 23:09:14 -0500] matti: redgetan: That might be a hard cookie to crack.
[2012-12-20 23:09:45 -0500] yfeldblum: redgetan, presumably you know what the block contains
[2012-12-20 23:13:55 -0500] redgetan: yfeldblum, unfortunately sometimes the i dont know what it contains because its created by another cookbook. For example, I had trouble trying to add a user to the rvm group (http://pastie.org/pastes/5559324/text). When I try to look at the logs, all i can see is "DEBUG: Skipping group[rvm] due to only_if ruby block", and of course i could read the source code of chef to determine what that ruby_block is, but I think that's a bit of
[2012-12-20 23:17:01 -0500] ickymettle: hey guys
[2012-12-20 23:17:09 -0500] ickymettle: how can I disable checksum checking on remote_file ?
[2012-12-20 23:19:09 -0500] ickymettle: testing change now
[2012-12-20 23:19:37 -0500] ickymettle: knife spork upload -- soooooooooooo sloooooooooooow
[2012-12-20 23:21:20 -0500] yfeldblum: redgetan, yeah i meant you of course have access to the source code ... that's the whole point of choosing ruby ...
[2012-12-20 23:22:30 -0500] matti: ickymettle: It is optional IIRC.
[2012-12-20 23:22:39 -0500] ickymettle: seems to apply by default for me :(
[2012-12-20 23:22:52 -0500] matti: How does the recipe looks like?
[2012-12-20 23:23:12 -0500] ickymettle: remote_file "foo" do
[2012-12-20 23:23:25 -0500] ickymettle:   source "http://...."
[2012-12-20 23:23:28 -0500] ickymettle: action :nothing
[2012-12-20 23:23:29 -0500] ickymettle: end
[2012-12-20 23:23:41 -0500] ickymettle: then ahve an http_request doing an IMS and firing a notifies to update
[2012-12-20 23:24:03 -0500] matti: Try: checksum nil
[2012-12-20 23:24:05 -0500] matti: I wonder.
[2012-12-20 23:24:13 -0500] ickymettle: yeah that didn't work :(
[2012-12-20 23:27:37 -0500] matti: Uhm, bummer.
[2012-12-20 23:27:45 -0500] matti: Maybe a bug.
[2012-12-20 23:27:47 -0500] matti: ;p
[2012-12-20 23:28:01 -0500] matti: I find pattern with service resource not working at the moment ;p
[2012-12-20 23:28:03 -0500] matti: Hehe
[2012-12-20 23:28:29 -0500] matti: (plus I am 30,000 feet above the groung ;p on a flight to London).
[2012-12-20 23:30:01 -0500] timsmith: is there a way to have a not_if that would check to see if an attribute was not nil and also checked the output of a shell out
[2012-12-20 23:30:22 -0500] siezer: you can have multiple not_ifs
[2012-12-20 23:30:26 -0500] timsmith: perfect
[2012-12-20 23:54:19 -0500] programmerq: jtimberman: looks like you released database 1.3.8 today. It appears that it may be broken on rhel6.3. Going back to 1.3.6 seems to fix our issue. The error message is "Cannot find a resource for grant_statement on redhat 6.3" Are there any known backwards incompatible changes with this cookbook?
[2012-12-20 23:55:08 -0500] amccloud: So i just setup chef-server and i'm unable to login to the webgui using the default credentials. I used the package method for installation on debian.
[2012-12-20 23:55:16 -0500] amccloud: chef 10.x
[2012-12-20 23:55:28 -0500] programmerq: maybe I spoke too soon-- 1.3.6 doesn't actually fix the issue. :/
[2012-12-20 23:55:42 -0500] amccloud: username: admin, password: p@ssw0rd1 :|

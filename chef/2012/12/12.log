[2012-12-12 00:30:11 -0500] kallistec: Blah1: if you don't need all the callback magic, then just use the git resource and maybe a service resource after
[2012-12-12 00:30:58 -0500] kallistec: Blah1: also, when you omit parentheses, {} gets interpreted as a code block argument if there's ambiguity
[2012-12-12 00:31:16 -0500] kallistec: use method({})  or method Hash.new
[2012-12-12 00:32:59 -0500] Blah1: kallistec, thanks for that info.  i was thinkng of using deploy provider so that it does all the 'revisioning' or keeping copies of past deployment code
[2012-12-12 00:36:37 -0500] Blah1: 113>>   symlinks "{}"  ;  Chef::Exceptions::ValidationFailed: Option symlinks must be a kind of Hash!  You passed "{}".
[2012-12-12 00:36:49 -0500] Blah1: eh, i'll just use the git provider as u suggested
[2012-12-12 00:37:21 -0500] kallistec: Blah1: That's a string, you want to use parens, like `symlinks({})`
[2012-12-12 00:47:53 -0500] kallen: yep, our newest ops person (my referral) is a WINNER
[2012-12-12 00:48:01 -0500] kallen: dang.. so much mischan on my part
[2012-12-12 00:48:19 -0500] kallen: (coulda been worse)
[2012-12-12 00:59:11 -0500] uncommitted: another git resource question, how can I automatically accept the repos ssh key without duping "yes" manually?
[2012-12-12 01:02:10 -0500] solarce: kallen: winner winner, chicken dinner
[2012-12-12 01:02:17 -0500] uncommitted: issue an ssh beforehand with -o StrictHostKeyChecking=no ?
[2012-12-12 01:09:09 -0500] rafaelmagu: Help!
[2012-12-12 01:09:24 -0500] rafaelmagu: Chef-client is saying that the cookbook cache is up to date when it actually isn't
[2012-12-12 01:09:35 -0500] rafaelmagu: I've even rm -rf the whole /var/chef/cache folder
[2012-12-12 01:09:43 -0500] rafaelmagu: And it's still not updating the cookbooks
[2012-12-12 01:13:24 -0500] rafaelmagu: Ah, figure out
[2012-12-12 01:13:27 -0500] rafaelmagu: figured*
[2012-12-12 01:13:42 -0500] rafaelmagu:  /var/cache/chef, not the other way around
[2012-12-12 01:22:57 -0500] h2flow: I usually update and upload the cookbook for each node I want to install it. But now I have the chef-client running as a daemon checking into the chef server. I have several nodes that use a particular cookbook, I want to adjust the recipe of the cookbook but don't want the nodes to use the attributes from it.
[2012-12-12 01:23:44 -0500] h2flow: I want the daemon to check in the chef-server and automaticlly update locally the changes I have made
[2012-12-12 01:52:10 -0500] yfeldblum: is there any such thing as interoperable URIs for items in cloud object storage
[2012-12-12 02:35:54 -0500] githubble: hello cheftens!! ... I just got my first knife ec2 create server to install 2 recipes, via hosted-chef .... how do I amend a build? through another role?
[2012-12-12 02:37:23 -0500] jfl0wers: can I install vagrant just by installing the gem?
[2012-12-12 02:37:35 -0500] jfl0wers: or are there other things that I need to do?
[2012-12-12 02:54:33 -0500] martinisoft: jf0lwers: should just need to install the gem and VirtualBox
[2012-12-12 02:54:40 -0500] martinisoft: for vagrant
[2012-12-12 02:55:20 -0500] martinisoft: githubble: are you talking about adding another recipe to the run list for a node?
[2012-12-12 02:56:47 -0500] githubble: mrtinisoft ..... how about removing one? use the same role or another?
[2012-12-12 03:01:06 -0500] githubble: oops martinisoft ... how about removing a recipe ... or adding another ... is it through roles? if so, the same one? thanks in advance
[2012-12-12 03:03:59 -0500] martinisoft: depends on how you privisioned the node
[2012-12-12 03:04:05 -0500] martinisoft: you can do knife node edit <node>
[2012-12-12 03:04:19 -0500] martinisoft: save the file and it'll push it right back to the chef server
[2012-12-12 03:04:33 -0500] martinisoft: if you have a role in the run list, just edit the role
[2012-12-12 03:04:45 -0500] martinisoft: otherwise just edit the node and add another recipe/role to the runlist
[2012-12-12 03:06:29 -0500] githubble: so say I want to remove bluepill from my provisioned server ..... what would be the knife ec2 command?
[2012-12-12 03:07:05 -0500] martinisoft: is it in the runlist for the node or a role?
[2012-12-12 03:07:22 -0500] martinisoft: and no on the ec2 part, just knife now
[2012-12-12 03:07:31 -0500] martinisoft: since chef manages that node now, you just let Chef know
[2012-12-12 03:08:11 -0500] martinisoft: so knife node edit nodenamehere
[2012-12-12 03:08:16 -0500] martinisoft: if you dont know the node name
[2012-12-12 03:08:19 -0500] martinisoft: do knife node list
[2012-12-12 03:08:23 -0500] martinisoft: and you'll see it there
[2012-12-12 03:08:53 -0500] githubble: martinisoft .... ahhh so when you have provisioned with knife ec2 ....... its a once off build correct?  then to amend you run knife only on the node?
[2012-12-12 03:09:06 -0500] martinisoft: yup, exactly
[2012-12-12 03:09:42 -0500] martinisoft: knife ec2 just interfaces with ec2 to control the server itself or provision new nodes after its provisioned then you just use knife commands to tell Chef how to manage it
[2012-12-12 03:09:53 -0500] gazoombo: I tried to install berkshelf today, but I ran into a dependency issue - has anyone else encountered this? https://gist.github.com/4262379
[2012-12-12 03:10:13 -0500] githubble: martinisoft .... so what would be the command to add a recipe to my ec2 node and also to remove a recipe please
[2012-12-12 03:10:27 -0500] martinisoft: gazoombo: this will sound silly, but try bundle install
[2012-12-12 03:10:37 -0500] martinisoft: or do bundle update
[2012-12-12 03:11:00 -0500] martinisoft: sometimes the dependency resolver for bundler goes weird
[2012-12-12 03:11:54 -0500] martinisoft: githubble: knife node run_list remove (node) (recipe)
[2012-12-12 03:12:08 -0500] martinisoft: githubble: if you run just the knife command alone, you'll get every command its capable of
[2012-12-12 03:12:09 -0500] githubble: oooh must try it
[2012-12-12 03:12:19 -0500] martinisoft: and every command has a --help associated with it
[2012-12-12 03:12:28 -0500] martinisoft: *tons* of documentation built into knife :)
[2012-12-12 03:14:18 -0500] githubble: martinisoft ... so far so good thanks .... I just ran knife node run_list remove i-02af157c bluepill ... how do I know it has removed it from my ec2 instance?
[2012-12-12 03:16:25 -0500] gazoombo: martinsoft - yeah, bundle install is how I ran into that.
[2012-12-12 03:16:36 -0500] gazoombo: martinsoft: Gemfile: https://gist.github.com/4264576
[2012-12-12 03:17:21 -0500] gazoombo: oh wait! bundle update works...!?
[2012-12-12 03:17:49 -0500] gazoombo: martinsoft, you are some kind of magician.
[2012-12-12 03:18:32 -0500] gazoombo: thanks.
[2012-12-12 03:20:01 -0500] martinisoft: gazoombo: I run into similar issues with the json gem, and welcome :)
[2012-12-12 03:20:28 -0500] githubble: aruntomar hi when I run knife node run_list remove i-02af157c bluepill the recipe is still on my ec2 .. is there another step to update my ec2 instance?
[2012-12-12 03:20:41 -0500] martinisoft: githubble: you can run chef_client and look at the first few lines to see if its in the run_list or look at the OHAI output on hosted chef
[2012-12-12 03:20:59 -0500] githubble: I am using hosted-chef
[2012-12-12 03:21:22 -0500] martinisoft: yup so you want to jump onto that instance and run chef-client manually unless you set it up as a service
[2012-12-12 03:21:38 -0500] martinisoft: well chef_client, but as root
[2012-12-12 03:22:09 -0500] martinisoft: if you see the chef run not include bluepill, you're good to go. you'll also see it delete the cookbooks
[2012-12-12 03:22:36 -0500] martinisoft: well may not, if another cookbook in your runlist depends on bluepill, it'll stick around
[2012-12-12 03:22:53 -0500] martinisoft: but it wont be in your run_list when chef_client goes through
[2012-12-12 03:24:05 -0500] githubble: martinisoft ..... so if you use knife ec2 you pretty much want to make sure it is setup with all the recipies you need.... sounds like a fair bit of work to go and amend it later on ..... probably easier to trash the first one and create a new one with the recipies you need ?
[2012-12-12 03:25:03 -0500] martinisoft: githubble: nah, you can setup the chef-client cookbook and install chef_client as a service to run every 30 minutes if you like, so all you have to do is edit the node on the chef server and it'll handle the rest on the next run
[2012-12-12 03:28:20 -0500] solarce: jfl0wers: you should use the official vagrant installers these days, the gem is deprecated
[2012-12-12 03:29:27 -0500] martinisoft: solarce: oh right, forgot :x
[2012-12-12 03:29:40 -0500] solarce: jfl0wers: http://downloads.vagrantup.com/tags/v1.0.5
[2012-12-12 03:30:05 -0500] githubble: martinisoft ..... I think for my solution, a knife ec2 create server is easier, as I will be building all kinds of instances ... e.g. one with nginx, one with postgresql, another with ruby etc ... so I am thinking of having different roles applied to each ... sound ok?
[2012-12-12 03:31:13 -0500] martinisoft: githubble: yup, its whatever you want to make it :)
[2012-12-12 03:31:26 -0500] martinisoft: you can always destroy or edit the nodes
[2012-12-12 03:31:32 -0500] martinisoft: up to you
[2012-12-12 03:31:56 -0500] githubble: martinisoft ... have destroyed over 20 so far :) the power of chef!
[2012-12-12 03:32:09 -0500] martinisoft: yup :D
[2012-12-12 03:32:29 -0500] githubble: martinisoft .... is it an easy transition from hosted-chef to chef-solo ?
[2012-12-12 03:33:02 -0500] martinisoft: githubble: depends, you need to put a run list json file on each of the nodes if you want to run solo
[2012-12-12 03:33:24 -0500] martinisoft: also some cookbooks aren't 100% compatible with chef solo and depend on features like search, etc
[2012-12-12 03:33:30 -0500] githubble: martinisoft ... how much is the non-free plan and what do you get on hosted-chef?
[2012-12-12 03:34:00 -0500] martinisoft: githubble: think hosted chef is free for the first 5 nodes, then you pay past 5
[2012-12-12 03:34:11 -0500] martinisoft: when you pay you get more nodes and access to opscode support
[2012-12-12 03:34:26 -0500] martinisoft: open source chef, you have to set it up and host it somewhere
[2012-12-12 03:34:44 -0500] martinisoft: and support comes from the community
[2012-12-12 03:35:11 -0500] githubble: martinisoft ok.... I will want my dev team to fire a few up, x 6 developers ... could get expensive with hosted-chef
[2012-12-12 03:35:21 -0500] martinisoft: at work we pay for hosted chef because we run 8 nodes off chef now and its easier to use the hosted chef and get support in case things go boom
[2012-12-12 03:35:47 -0500] martinisoft: for my personal stuff I use hosted chef because I only manage 2 systems and don't feel like setting up my own chef-server
[2012-12-12 03:36:00 -0500] githubble: martinisoft ... nice :)
[2012-12-12 03:36:17 -0500] martinisoft: githubble: yeah it could if you want them to play with one account
[2012-12-12 03:36:37 -0500] githubble: martinisoft ... sounds like one account each then :)
[2012-12-12 03:36:53 -0500] martinisoft: but I had my company support it before we hit 6 nodes, we wanted the support and its nice to help support the company maintaining it :)
[2012-12-12 03:37:30 -0500] martinisoft: the initial setup and configuration can be a bitch with Chef, but its a breeze once you start rolling it out. saves a *ton* of time
[2012-12-12 03:37:52 -0500] martinisoft: if our site grows and we need more web servers, I run one command and its online in 15 minutes
[2012-12-12 03:38:25 -0500] martinisoft: anyone on my dev team can do the same too, which is amazing and awesome :D
[2012-12-12 03:40:16 -0500] githubble: martinisoft I am loving auto devops deployments .... :)
[2012-12-12 03:41:43 -0500] martinisoft: Chef helps a dev like me do the ops stuff :)
[2012-12-12 03:42:19 -0500] martinisoft: which, feels more like the DevOps movement in general coming together to use an awesome system like Chef :D
[2012-12-12 04:16:16 -0500] aruntomar: githubble: hi!
[2012-12-12 04:16:54 -0500] githubble: aruntomar I want to install 31 recipes, but I don't think all of them are available ... what do I do?
[2012-12-12 04:17:32 -0500] aruntomar: githubble: so the syntax to remove is knife node run_list remove [NODE] [ENTRIES]
[2012-12-12 04:18:02 -0500] aruntomar: githubble: do you know the names of the 32 recipes that you need
[2012-12-12 04:18:06 -0500] githubble: aruntomar ... got that one earlier... thanks ... how about the 31 apt-get packages I need to install
[2012-12-12 04:18:46 -0500] aruntomar: githubble: i would create an array and loop over it and install them using the package resource
[2012-12-12 04:19:41 -0500] githubble: aruntomar ... how do I do that .. we currently run an install.sh file that does it ... but I would like to fold it into chef somehow
[2012-12-12 04:20:52 -0500] githubble: aruntomar https://gist.github.com/4264836
[2012-12-12 04:21:25 -0500] aruntomar: https://gist.github.com/4264837
[2012-12-12 04:22:31 -0500] githubble: aruntomar .. did you have a look at my gist?
[2012-12-12 04:23:29 -0500] aruntomar: githubble: yes, use the available cookbooks for packages, if available. for eg: there is a mysql cookbook, use that.
[2012-12-12 04:23:52 -0500] githubble: aruntomar ok.... and the rest .. use your script .txt?
[2012-12-12 04:26:54 -0500] aruntomar: githubble: https://gist.github.com/4264854
[2012-12-12 04:27:38 -0500] aruntomar: but remember to upload all those recipes that have been included to the hosted chef
[2012-12-12 04:28:16 -0500] githubble: aruntomar thanks .... how do I call this txt file initially?
[2012-12-12 04:28:18 -0500] aruntomar: githubble: knife cookbook site list , gives you the list of all the available community cookbooks
[2012-12-12 04:28:48 -0500] aruntomar: githubble: y do you need a text file?
[2012-12-12 04:29:09 -0500] githubble: aruntomar ... your gist is a txt file
[2012-12-12 04:29:21 -0500] githubble: aruntomar .... how do I use this txt file
[2012-12-12 04:29:31 -0500] aruntomar: put that code in the recipe
[2012-12-12 04:30:03 -0500] githubble: aruntomar .... how do I use this txt file
[2012-12-12 04:30:37 -0500] githubble: aruntomar ... ok thanks ... how do I download mysql to my cookbook list from the site ?
[2012-12-12 04:30:47 -0500] aruntomar: knife cookbook site install mysql
[2012-12-12 04:30:59 -0500] aruntomar: this will install the mysql cookbook on ur workstation
[2012-12-12 04:31:14 -0500] aruntomar: then knife cookbook upload mysql, will upload it to your hosted chef
[2012-12-12 04:31:50 -0500] aruntomar: almost all of the cookbooks have a good README, so read them to know more on how to use them.
[2012-12-12 04:32:26 -0500] githubble: aruntomar so far so good .... when you say put the txt file in the recipe ... which one?
[2012-12-12 04:34:33 -0500] aruntomar: githubble: either use existing recipe, if you have for your project or create a new one.
[2012-12-12 04:35:21 -0500] aruntomar: githubble: http://docs.opscode.com/resource.html
[2012-12-12 04:35:29 -0500] aruntomar: githubble: use the resources
[2012-12-12 04:36:15 -0500] githubble: aruntomar ... ok I don't use one yet ... but will ... seems powerful
[2012-12-12 04:36:47 -0500] aruntomar: githubble: "directory" resource for creating directories, "package" for creating packages, there is a database cookbook, download and use it, it gives nice lwrp for creating databases and managing users
[2012-12-12 04:36:54 -0500] aruntomar: and so on....
[2012-12-12 04:37:21 -0500] githubble: yes that is my next thing to learn .... installing a postresql db and setting up users etc
[2012-12-12 04:50:55 -0500] aruntomar: githubble: did u get the gist i sent, i got disconnected in between?
[2012-12-12 04:51:55 -0500] githubble: aruntomar try again
[2012-12-12 04:52:51 -0500] aruntomar:  githubble: https://gist.github.com/4264916
[2012-12-12 04:52:51 -0500] aruntomar: this is a part of code that i've used in one of my projects
[2012-12-12 04:52:51 -0500] aruntomar: may be this will give u some ideas
[2012-12-12 04:54:53 -0500] githubble: aruntomar ... where do I put this file and how will my knife ec2 create server find it ... thanks heaps
[2012-12-12 04:57:08 -0500] aruntomar: githubble: eg: knife cookbook create chef_demo , then , put that code in " chef_demo/recipes/default.rb", upload it to hosted chef "knife cookbook upload chef_demo", and then add it to the run_list of your node.
[2012-12-12 04:57:37 -0500] githubble: aruntomar adding this to my notes for later thanks
[2012-12-12 04:59:56 -0500] aruntomar: githubble: welcome :)
[2012-12-12 05:33:38 -0500] reset: gazoombo: I'm having a hard time posting to twitter cause i'm in China. Can you post the before and after of your Gemfile.lock into that ticket?
[2012-12-12 05:36:56 -0500] haz_: Hi, I just have a quick question that I can't seem to find in the docs.  I need to get the chef server url from within a cookbook.  Is this possible?  Currently I am just getting it from the /etc/chef/client.rb file using awk.  But is there a built in way of getting it?
[2012-12-12 05:39:26 -0500] aruntomar: haz_: Chef::Config[:chef_server_url]
[2012-12-12 05:41:04 -0500] haz_: oh cool
[2012-12-12 05:41:05 -0500] haz_: thanks
[2012-12-12 06:07:13 -0500] ops_fox: Hello, I am trying to setup postgres sql client + pg gem using the postgresql recipie, It complains for "No such file or directory - make" I have included build essentials, make & libpq-dev for packages to be installed (my log : http://pastie.org/private/t5qx10fi3vvemgvtqqm9w)
[2012-12-12 06:13:02 -0500] gazoombo: reset: if I can find a way to reproduce it again, yes. I haven't been able to since I ran `bundle update` though. I didn't think to save Gemfile.lock before. :-(
[2012-12-12 06:13:26 -0500] reset: ok no prob man!
[2012-12-12 06:13:31 -0500] reset: so sorry for the inconvenience
[2012-12-12 06:16:27 -0500] gazoombo: no worries. sounds like it's mostly out of your control. Saw a similar issue discussed on vagrant, too. Mitchell's solution was to stop treating vagrant as a gem. :-(
[2012-12-12 06:17:02 -0500] aruntomar: ops_fox: build-essential is not run, check the sequence, run it first, that provides make. to check it manually login to the system, and run make . 2nd, it's trying to build native gems and failing. you'll need to install the postgres devel packages.
[2012-12-12 06:22:04 -0500] gazoombo: reset: for example: https://github.com/mitchellh/vagrant/issues/880#issuecomment-5524138
[2012-12-12 06:22:50 -0500] reset: yep yep
[2012-12-12 06:22:51 -0500] reset: I'm aware
[2012-12-12 06:23:00 -0500] reset: I still haven't given up hope on potentially solving the problem
[2012-12-12 06:23:06 -0500] ops_fox: aruntomar: My recipie looks like this http://pastie.org/private/ekaesbu1weqnmkl82v8sra so it is already in the right order
[2012-12-12 06:23:28 -0500] ops_fox: aruntomar: am I missing something, what do you think?
[2012-12-12 06:32:46 -0500] aruntomar: ops_fox: use the cookbook "build-essential" rather than the package.
[2012-12-12 06:33:14 -0500] gazoombo: reset: trying to add berkshelf to other projects that have chef (and full bundles already), ran into a different error about needing to install gecode - I thought that was taken out.
[2012-12-12 06:33:26 -0500] reset: it is
[2012-12-12 06:33:36 -0500] reset: you probably have an old version of Berkshelf locked in it's Gemfile
[2012-12-12 06:33:45 -0500] reset: or a dependency of a dependency in your Gemfile
[2012-12-12 06:33:49 -0500] ops_fox: aruntomar: Ok, will try that
[2012-12-12 06:34:25 -0500] reset: if you read your Gemfile.lock you can see who is requiring an old version fo Berkshelf
[2012-12-12 06:35:34 -0500] bluepojo: it's probably a common dependency between berkshelf and another gem that's being required
[2012-12-12 06:35:48 -0500] bluepojo: that is forcing berkshelf to an old version
[2012-12-12 06:35:57 -0500] gazoombo: yeah, I suppose a locked dependency could force an older version of Berkshelf to be installed, eh?
[2012-12-12 06:36:10 -0500] bluepojo: try specifying the berkshelf version to be 1.1.0
[2012-12-12 06:36:20 -0500] bluepojo: then it will error out telling you which other gem is incompatible
[2012-12-12 06:36:42 -0500] bluepojo: it'll say berkshelf needs A version X and other gem needs A version Y
[2012-12-12 06:37:53 -0500] drev1: any suggestions on debugging an "undefined method" error when using a lightweight resource?
[2012-12-12 06:38:18 -0500] drev1: the "undefined method" is defined as an attribute in the resource
[2012-12-12 06:39:11 -0500] gazoombo: bluepojo: yep. chef.
[2012-12-12 06:48:58 -0500] gazoombo: ok, got it. before: https://gist.github.com/4265591 and after: https://gist.github.com/4265600
[2012-12-12 06:51:40 -0500] reset: gazoombo: that's the two I asked for?
[2012-12-12 06:52:34 -0500] ssd7: Ohai Chefs
[2012-12-12 06:54:15 -0500] gazoombo: reset: yeah. obviously the first one doesn't include anything about berkshelf because it wasn't able to be installed so it's identical to the Gemfile.lock before trying to add berkshelf to the Gemfile
[2012-12-12 06:54:26 -0500] reset: ok awesome
[2012-12-12 06:54:28 -0500] gazoombo: error is same as from my tweet earlier: https://gist.github.com/4262379
[2012-12-12 06:54:28 -0500] reset: thanks so much
[2012-12-12 06:55:30 -0500] gazoombo: you're welcome. I hope it helps
[2012-12-12 08:07:00 -0500] BryanWB_: ohai folks!
[2012-12-12 08:12:04 -0500] tmpname: Anyone around?
[2012-12-12 08:13:54 -0500] specialsauce: o/
[2012-12-12 08:14:02 -0500] BryanWB_: \o
[2012-12-12 08:15:41 -0500] tmpname: I am looking for an ec2 management platform that incorporates chef. I have played around with scalarium, rightscale and a few others. But none of them seem to offer exactly what I am looking for. I am looking for either an open source tool that I can modify or looking at the possibility of rolling my own.
[2012-12-12 08:16:21 -0500] tmpname: So I have two questions, either of you know of a decent ec2 management platform or have an idea if it is possible to use chef + knife + rails?
[2012-12-12 08:26:24 -0500] BryanWB_: i think enstratus may do it
[2012-12-12 08:33:45 -0500] tmpname: I have looked at enstratus as well, it still isn't quite there yet either.
[2012-12-12 08:37:10 -0500] beandip: I am trying to do the following in a template:
[2012-12-12 08:37:12 -0500] beandip: network.publish_host: <%= node.network[:ipaddress_<%= node.elasticsearch[:network][:publish_interface] %>] %>
[2012-12-12 08:37:20 -0500] beandip: this doesn't work
[2012-12-12 08:37:44 -0500] beandip: but I think it's pretty obviouss what I am trying to do
[2012-12-12 08:37:56 -0500] beandip: anyone have any ideas how I can acheive something like this?
[2012-12-12 08:38:36 -0500] whilp: inside the ERB <%= ... %>, it's just ruby
[2012-12-12 08:38:46 -0500] beandip: ah
[2012-12-12 08:39:39 -0500] whilp: so <%= node.network["ip_address_#{node.elasticsearch[:network][:publish_interface]}".to_sym] %> (untested)
[2012-12-12 08:40:27 -0500] Mithrandir: I'd recommend pulling that into a variable in the recipe and not doing too much logic in your templates.
[2012-12-12 08:40:31 -0500] Mithrandir: it's a recipe for headaches.
[2012-12-12 08:40:55 -0500] whilp: very much so
[2012-12-12 08:40:57 -0500] Mithrandir: and you don't catch errors properly.
[2012-12-12 08:45:10 -0500] beandip: lol
[2012-12-12 08:45:21 -0500] beandip: I came up with pretty much the same syntax
[2012-12-12 08:45:24 -0500] beandip: validates
[2012-12-12 08:45:28 -0500] Mithrandir: hmm, if I want to make sure a directory tree is owned by a given user, what's a good way to do that?  execute?
[2012-12-12 08:45:29 -0500] beandip: running it shortly to test
[2012-12-12 08:49:15 -0500] whilp: Mithrandir: yeah, execute, though i'm not sure how you'd usefully express the only_if/not_if guard
[2012-12-12 08:52:41 -0500] Mithrandir: I'd do a find -not -owner $user -exec chown $user {} +
[2012-12-12 08:52:53 -0500] Mithrandir: which is probably faster than letting chef do it
[2012-12-12 09:02:37 -0500] whilp: that resource would never converge, though
[2012-12-12 09:10:50 -0500] tmpname: Has anyone used Ridley to bootstrap a server?
[2012-12-12 09:26:14 -0500] Virunga: Hi guys, i added lines at the top of client.rb to specify the use of JsonFile handler to create a report, but after each run the report is created and the lines go away! After there lines are no longer in the client.rb file. I tried on multiple machines and the result is the same. Am i doing something wrong and this behavior is normal, or can be a bug?
[2012-12-12 09:31:36 -0500] aruntomar: Virunga: what's on ur run_list
[2012-12-12 09:33:01 -0500] Virunga: aruntomar: do you want to see it? I'll post it.
[2012-12-12 09:36:00 -0500] Virunga: aruntomar: here it is http://pastie.org/5515049
[2012-12-12 09:37:01 -0500] aruntomar: Virunga: i'm assuming that you are configuring your client.rb via chef, right?
[2012-12-12 09:38:26 -0500] Virunga: aruntomar: i bootstrapped the client and after a added the interesting lines (about the report handler).
[2012-12-12 09:40:17 -0500] Virunga: aruntomar: is it wrong?
[2012-12-12 09:41:05 -0500] aruntomar: Virunga: i believe that ur chef-client is over writing client.rb, but i'll still check on my box.
[2012-12-12 09:41:55 -0500] aruntomar: Virunga: you can check ur logs, and try to find if chef if modifying the file
[2012-12-12 09:42:03 -0500] Virunga: aruntomar: i think that too, but why would it do that?
[2012-12-12 09:42:27 -0500] Virunga: And how can i stop it?'
[2012-12-12 09:42:37 -0500] aruntomar: Virunga: on a node, client.rb and client.pem etc are generated by the chef-client cookbook
[2012-12-12 09:43:19 -0500] aruntomar: so if you are manually modifying them, it's most likely that chef will overwrite, but let me confirm that.
[2012-12-12 09:43:31 -0500] Virunga: aruntomar: yes, i'm using chef-client also to demonize the process. Maybe that's the problem.
[2012-12-12 09:44:07 -0500] Virunga: aruntomar: thank you.
[2012-12-12 09:52:43 -0500] tmpname: I am working with Ridley to handle my api calls and bootstrap servers. How ever every time I attempt to bootstrap a server, I get the following error: #<Ridley::SSH::ResponseSet:0x007fed3dc45e50 @oks=[], @errors=["ubuntu"]>. This is the code that I am using https://gist.github.com/4266480
[2012-12-12 10:12:26 -0500] emanuelez: hello all. i'm trying to tun the gerrit recipe (https://github.com/typo3-cookbooks/gerrit) but i get a load error for mysql. I'm pretty new to chef so I'm looking for some help to investigate the root cause. mysql seems to have been installed correctly and the mysql bin is in PATH. any hint?
[2012-12-12 10:12:39 -0500] emanuelez: s/tun/run
[2012-12-12 10:13:24 -0500] tmpname: what is the error emanuelez
[2012-12-12 10:13:58 -0500] emanuelez: Error executing action `create` on resource 'mysql_database[gerrit]'
[2012-12-12 10:14:13 -0500] emanuelez: LoadError: no such file to load -- mysql
[2012-12-12 10:15:20 -0500] tmpname: what line and can you post the stacktrace
[2012-12-12 10:18:08 -0500] emanuelez: i can post everything since it's running on a test local VM
[2012-12-12 10:18:10 -0500] emanuelez: pastebin?
[2012-12-12 10:18:48 -0500] tmpname: that is fine
[2012-12-12 10:18:56 -0500] emanuelez: http://pastebin.com/YFzvBRp5
[2012-12-12 10:22:01 -0500] tmpname: may be a dumb question, but do you have the mysql cookbook?
[2012-12-12 10:22:35 -0500] emanuelez: yes... it got installed automatically as a dependency
[2012-12-12 10:24:38 -0500] aruntomar: emanuelez: i think it's b'cas the system doesn't have mysql gem, i also faced this issue. i believe u r using omnibus.
[2012-12-12 10:25:03 -0500] aruntomar: emanuelez: install the mysql gem in ombinus, that will solve ur error
[2012-12-12 10:25:33 -0500] emanuelez: aruntomar: ehm... i have no idea what omnibus is :-S
[2012-12-12 10:27:12 -0500] emanuelez: ok... googling it. seems to be a chef client. i installed chef on that VM with knife bootstrap
[2012-12-12 10:27:23 -0500] zts: the mysql::ruby recipe in the mysql cookbook should install the gem in the right place
[2012-12-12 10:27:46 -0500] emanuelez: using -d ubuntu12.04-gems since that's the distro i'm using
[2012-12-12 10:28:39 -0500] zts: but you don't get that automatically with mysql::client or mysql::server, so try putting "recipe[mysql::ruby]" into your run_list
[2012-12-12 10:29:50 -0500] aruntomar: emanuelez: omnibus is a self contained package, that has everything to run chef, if you don't provide any distro while installation using -d , then by default, based on the platform, omnibus package will be installed in /opt/chef
[2012-12-12 10:31:47 -0500] emanuelez: aruntomar: i see. thanks. i will try adding recipe[mysql::ruby] in the run_list
[2012-12-12 10:38:57 -0500] emanuelez: that seems to have done the trick
[2012-12-12 10:39:09 -0500] emanuelez: so, in general, a load error is a missing gem file?
[2012-12-12 11:02:49 -0500] gokr: Argh!
[2012-12-12 11:03:29 -0500] gokr: ...I can't get the chef-server cookbook to use proper DAEMON paths in its init.d scripts... this worked earlier, no idea.
[2012-12-12 11:07:13 -0500] Virunga: aruntomar: from the log i understand (i don't know if it's true) that chef-client override the client.rb each time make a run, that should be the problem.
[2012-12-12 11:07:58 -0500] Virunga: I can execute a recipe only once, right?
[2012-12-12 11:08:27 -0500] Virunga: First run only, find it.
[2012-12-12 11:09:58 -0500] Virunga: s/find/found
[2012-12-12 11:12:55 -0500] aruntomar: Virunga: sorry, was busy with other things, couldn't confirm, but in theory yes, that should be the case.
[2012-12-12 11:13:30 -0500] Virunga: aruntomar: np, you helped me.
[2012-12-12 11:24:04 -0500] Virunga: The first idea to make first run only chef-client is this http://pastie.org/5515423
[2012-12-12 11:24:09 -0500] Virunga: Can i make it better?
[2012-12-12 11:33:52 -0500] aruntomar: Virunga: http://pastie.org/5515453
[2012-12-12 11:36:08 -0500] Virunga: aruntomar: cool, i'll try it.
[2012-12-12 12:08:20 -0500] teukka: is it wise to listen to "master of puppets" while hacking chef?
[2012-12-12 12:33:20 -0500] drumnbuz: Hi guy! I'm not exepert of chef! and I would ask you a question... I have a cookbook with many versions... how can I know wich version is related to a specify node?
[2012-12-12 12:47:51 -0500] masterkorp: hello chefs
[2012-12-12 12:57:51 -0500] Dr_Cain: anyone know what to do about a missing webui.pem ?
[2012-12-12 12:58:05 -0500] Dr_Cain: new clean install on debian wheezy
[2012-12-12 12:58:23 -0500] gokr: Mmm, I have been battling this issue too - my problem is the DAEMON in the init.d scripts end up wrong.
[2012-12-12 12:58:25 -0500] Dr_Cain: pulled from apt.opscode.com
[2012-12-12 12:58:25 -0500] aruntomar: Dr_Cain: chef server restart should create one, i believe
[2012-12-12 12:58:35 -0500] Dr_Cain: aruntomar: that's what they say, but it does not
[2012-12-12 12:58:47 -0500] gokr: Is it running then?
[2012-12-12 12:58:55 -0500] Dr_Cain: the server is, the web-ui is not
[2012-12-12 12:59:04 -0500] gokr: Ok, checked DAEMON in init.d script?
[2012-12-12 12:59:36 -0500] Dr_Cain: DAEMON=/usr/sbin/chef-server
[2012-12-12 12:59:44 -0500] gokr: And is it there? :)
[2012-12-12 12:59:49 -0500] Dr_Cain: yep :)
[2012-12-12 12:59:55 -0500] Dr_Cain: I can start it manually too
[2012-12-12 12:59:56 -0500] gokr: Ok, then that is not your problem then.
[2012-12-12 13:00:35 -0500] Dr_Cain: hmm
[2012-12-12 13:00:48 -0500] Dr_Cain: I'm going to try killing the running processes and trying agian
[2012-12-12 13:01:03 -0500] Dr_Cain: that's weird, it says it failed starting it
[2012-12-12 13:01:06 -0500] Dr_Cain: but it is running it now
[2012-12-12 13:01:58 -0500] Dr_Cain: root@chef:/etc/init.d# /etc/init.d/chef-server start
[2012-12-12 13:01:58 -0500] Dr_Cain: [....] Starting chef-server : ~ In 6162
[2012-12-12 13:01:58 -0500] Dr_Cain:  failed!
[2012-12-12 13:02:39 -0500] Dr_Cain: might be something wrong in the init script
[2012-12-12 13:02:50 -0500] aruntomar: Dr_Cain: chef-server is diff and chef-server-webui is different
[2012-12-12 13:03:29 -0500] Dr_Cain: yeah, I know. but chef-server-webui requires chef-server to be started I take it?
[2012-12-12 13:03:36 -0500] Dr_Cain: which one of them creates the webui.pem file btw?
[2012-12-12 13:05:29 -0500] aruntomar: Dr_Cain: don't know for sure. i think. chef-server-webui. i had a similar problem validation.pem and 1 more file was creating problem. i deleted them, and restarted all the relevant services and it created those files again.
[2012-12-12 13:06:07 -0500] Dr_Cain: 2012-12-12T14:05:34+01:00] ERROR: Error opening validation key: No such file or directory - /etc/chef/webui.pem -- destroying and regenerating
[2012-12-12 13:06:11 -0500] Dr_Cain: hmm
[2012-12-12 13:06:19 -0500] Dr_Cain: let's see if the file is there now
[2012-12-12 13:06:28 -0500] Dr_Cain: nope
[2012-12-12 13:06:29 -0500] Dr_Cain: wtf
[2012-12-12 13:06:44 -0500] Dr_Cain: [2012-12-12T14:05:34+01:00] INFO: Creating validation key...
[2012-12-12 13:06:44 -0500] Dr_Cain: [2012-12-12T14:05:34+01:00] INFO: Creating new key pair for chef-webui
[2012-12-12 13:06:44 -0500] Dr_Cain: [2012-12-12T14:05:35+01:00] INFO: Sending client(815bd768-69de-423d-ac02-3582b07661fe) to the index queue for addition.
[2012-12-12 13:06:51 -0500] Dr_Cain: and after that nothing..
[2012-12-12 13:07:07 -0500] Dr_Cain: does it have to talk to rabbitmq or something for that I wonder?
[2012-12-12 13:07:46 -0500] aruntomar: Dr_Cain: restart all the services needed by chef, chef-server, chef-expander, chef-solr etc etc
[2012-12-12 13:08:27 -0500] Dr_Cain: and another fun thing, rabbitmq seems to be only listning to tcp6
[2012-12-12 13:09:10 -0500] jf0lwers: anyone know of a cookbook for installing vagrant?
[2012-12-12 13:10:31 -0500] Dr_Cain: disregard that, I can telnet to it over ipv4
[2012-12-12 13:11:09 -0500] Dr_Cain: aruntomar: yeah I'm going to try that
[2012-12-12 13:26:15 -0500] Dr_Cain: oh it actually did create a webui.pem now
[2012-12-12 13:26:27 -0500] Dr_Cain: after I tried to start it after shutting down the rabbitmq instance
[2012-12-12 13:28:52 -0500] Dr_Cain: theere we go, finally up and running
[2012-12-12 13:39:43 -0500] masterkorp: I need a EGT gauge with maximum temp record
[2012-12-12 13:41:19 -0500] m4rcu5: where was @chef_config sourced from again? changing the chef url in server.rb does not change the bootstrap behavior
[2012-12-12 13:43:23 -0500] emanuelez: this gerrit recipe is driving me crazy! :P now the startup script will complain that JAVA_HOME is not set, even if the java recipe is running and I even manually set ENV['JAVA_HOME'] = node['java']['java_home']. what could be wrong here?
[2012-12-12 13:45:10 -0500] Dr_Cain: and now rabbitmq is using 100% , fun
[2012-12-12 13:47:05 -0500] Dr_Cain: seems like a bug
[2012-12-12 14:08:13 -0500] Dr_Cain: ok finally up and running
[2012-12-12 14:08:29 -0500] masterkorp: Dr_Cain: relax, have a massage http://i.imgur.com/77bvb.gif
[2012-12-12 14:08:36 -0500] Dr_Cain: fun fact, when rebooting the chef-server fails to start, stopping and starting it again does make it start though
[2012-12-12 14:08:42 -0500] Dr_Cain: masterkorp: lol
[2012-12-12 14:10:32 -0500] Dr_Cain: pressing the status page was apparently a bad idea, it froze the webui
[2012-12-12 14:13:04 -0500] Dr_Cain: http://tickets.opscode.com/browse/CHEF-3233
[2012-12-12 14:13:07 -0500] Dr_Cain: apparently not solved
[2012-12-12 14:15:13 -0500] Dr_Cain: though I end up with a "Could not list status"
[2012-12-12 14:24:15 -0500] uncommitted: question about the git resource it doesn't seem to do a "git clone" as I would expect, I sync with the master branch and then later cannot run a 'git pull' manually
[2012-12-12 14:27:26 -0500] m4rcu5: can anyone hint me to what Chef::Config[:chef_server_url] is referring again, i cant seem to confince the chef-client cookbook that chef is not at localhost
[2012-12-12 14:32:22 -0500] aruntomar: m4rcu5: it outputs the server url configured in client.rb
[2012-12-12 14:33:02 -0500] uncommitted: m4rcu5: should be defined in the attributes file, and as aruntomar says build client.rb
[2012-12-12 14:36:57 -0500] m4rcu5: uncommitted: so without changing the cookbook, i should set the node["chef_client"]["server_url"] in the environment to make it default?
[2012-12-12 14:39:45 -0500] uncommitted: i haven't used environments yet, but yes it should be an override_attributes as I understand it
[2012-12-12 14:42:52 -0500] Dr_Cain: so uh, the chef service returned "failed" when started, but starts anyway
[2012-12-12 14:45:20 -0500] uncommitted: Dr_Cain: echo $? will give the last return value
[2012-12-12 14:45:54 -0500] Dr_Cain: the thing is, it does start correctly if stopped and started again manually though
[2012-12-12 14:45:58 -0500] Dr_Cain: which is rather wierd
[2012-12-12 14:47:09 -0500] uncommitted: Dr_Cain: sh -x /etc/init.d/chef-blah start (may give some further info)
[2012-12-12 14:48:48 -0500] Dr_Cain: everything looks fine there
[2012-12-12 14:48:51 -0500] Dr_Cain: just not on a fresh bootup
[2012-12-12 15:08:10 -0500] pfa: Hi guys,
[2012-12-12 15:08:18 -0500] pfa: trying to do something like "$ knife ssh name:"*" "sudo chef-client""
[2012-12-12 15:08:31 -0500] pfa: Getting this:
[2012-12-12 15:08:32 -0500] pfa: ERROR: Server returned error for http://epuadnist0000v34.kyiv.epam.com:4000/search/node?q=name:*&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retrying 1/5 in 4s
[2012-12-12 15:09:12 -0500] pfa: In server.log:
[2012-12-12 15:09:13 -0500] pfa: merb : chef-server (api) : worker (port 4000) ~ Started request handling: Wed Dec 12 17:08:56 +0200 2012 merb : chef-server (api) : worker (port 4000) ~ Params: {"controller"=>"search", "id"=>"node", "start"=>"0", "action"=>"show", "q"=>"name:*", "rows"=>"1000", "sort"=>"X_CHEF_id_CHEF_X asc"} merb : chef-server (api) : worker (port 4000) ~ Net::HTTPServerException: 404 "Not Found" - (Chef::Exceptions::SolrConnectionError)
[2012-12-12 15:09:34 -0500] pfa: tried to reinstall - results are the same
[2012-12-12 15:10:02 -0500] pfa: Chef 10.6.2-1 on Ubuntu 12.04
[2012-12-12 15:11:46 -0500] pfa: Also getting constant "No routes match the request: /reports/nodes/epuadnist0000v51.kyiv.epam.com/runs - (Merb::ControllerExceptions::NotFound)" in server.log
[2012-12-12 15:15:34 -0500] makerbreakr: pfa
[2012-12-12 15:15:37 -0500] makerbreakr: are you on ubuntu
[2012-12-12 15:15:38 -0500] makerbreakr: nm
[2012-12-12 15:15:40 -0500] makerbreakr: hold
[2012-12-12 15:17:03 -0500] pfa: yes, on 12.04
[2012-12-12 15:17:05 -0500] uncommitted: pfa: knife ssh "name:*" 'uptime'
[2012-12-12 15:17:52 -0500] pfa: Completely the same
[2012-12-12 15:17:59 -0500] pfa: Net::HTTPServerException: 404 "Not Found" - (Chef::Exceptions::SolrConnectionError)
[2012-12-12 15:18:17 -0500] makerbreakr: see the pm i just sent you
[2012-12-12 15:18:23 -0500] makerbreakr: that may fix it
[2012-12-12 15:18:58 -0500] uncommitted: sounds like solr needs to be restarted, that is valid syntax
[2012-12-12 15:23:33 -0500] pfa: Reinstalled solr (thanks to makerbreakr), some changes occured
[2012-12-12 15:23:42 -0500] makerbreakr: work or no?
[2012-12-12 15:23:59 -0500] pfa: now when trying to do knife ssh "name:*" 'uptime' it just stubs
[2012-12-12 15:24:14 -0500] makerbreakr: fwiw, I still havent drilled down why that fixed it on my server lol
[2012-12-12 15:24:14 -0500] pfa: in server.log:
[2012-12-12 15:24:15 -0500] pfa: merb : chef-server (api) : worker (port 4000) ~ Started request handling: Wed Dec 12 17:23:19 +0200 2012 merb : chef-server (api) : worker (port 4000) ~ Params: {"start"=>"0", "sort"=>"X_CHEF_id_CHEF_X asc", "q"=>"name:*", "id"=>"node", "action"=>"show", "controller"=>"search", "rows"=>"1000"} merb : chef-server (api) : worker (port 4000) ~ {:action_time=>0.080919, :after_filters_time=>8.0e-06, :before_filters_time=>0.003877, :dispatch_time
[2012-12-12 15:25:58 -0500] makerbreakr: that looks like a completed request no?
[2012-12-12 15:26:19 -0500] makerbreakr: try knife ssh to a specific node
[2012-12-12 15:26:40 -0500] makerbreakr: knife ssh -a ipaddress IPADDRESS "chef-client"
[2012-12-12 15:27:10 -0500] pfa: From the client side it actually never completes
[2012-12-12 15:27:53 -0500] makerbreakr: pfa, did oyu try my command above?
[2012-12-12 15:28:00 -0500] makerbreakr: or your original one
[2012-12-12 15:28:04 -0500] pfa: Wow, sorry, all works now
[2012-12-12 15:28:10 -0500] pfa: one node was just down
[2012-12-12 15:28:53 -0500] pfa: Thanks, guys!
[2012-12-12 15:55:28 -0500] awgross: timops: thanks for fixing up the Appfirst Cookbook, needs a lot of love from when I published it
[2012-12-12 15:58:56 -0500] awgross: you too jtimberman
[2012-12-12 15:59:02 -0500] timops: @awgross no problem!
[2012-12-12 15:59:18 -0500] timops: anything else i can help with?
[2012-12-12 15:59:48 -0500] awgross: nah but let me know if you need me to work on anything, i have a bunch of unpublished changes that we use internally so I should get those back out there, kinda just fell off the wagon
[2012-12-12 16:01:20 -0500] awgross: tho appfirst should probably switch the license from my Beerware license
[2012-12-12 16:01:59 -0500] BryanWB_: awgross: just fixed the gists in my minitest blog post, tks for the heads up
[2012-12-12 16:02:31 -0500] awgross: BryanWB_: np, was disapointed it wasn't in line and got tired of finding the links in the source
[2012-12-12 16:03:01 -0500] BryanWB_: awgross: i m disappointed too cuz i put so much fucking work into them :(
[2012-12-12 16:11:49 -0500] jgerry: question: is there a node attribute for "node name", as knife/chef server sees it? node['fqdn'] doesn't give me what I want. I'd like to use the node name I set via -N when I run a knife bootstrap.
[2012-12-12 16:12:37 -0500] awgross: jgerry: use node.name
[2012-12-12 16:12:45 -0500] awgross: not node[:name] or node['name']
[2012-12-12 16:12:52 -0500] awgross: http://wiki.opscode.com/display/chef/Attributes
[2012-12-12 16:13:05 -0500] awgross: check out the sidebar "Attributes that Aren't" for more explanation
[2012-12-12 16:13:42 -0500] jgerry: interesting. i keep looking for correlation between what ohai shows and what's actually in the node object.
[2012-12-12 16:14:09 -0500] awgross: jgerry:  hah that that page will help a lot
[2012-12-12 16:14:21 -0500] jgerry: i was looking at that page but didn't notice the sidebar
[2012-12-12 16:14:27 -0500] jgerry: thanks
[2012-12-12 16:14:35 -0500] awgross: jgerry: np
[2012-12-12 16:14:49 -0500] jgerry: any way to introspect the node object and get a definitive list of everything there?
[2012-12-12 16:15:17 -0500] jgerry: but I think this will get me most of the way to where I need to be. Thanks!
[2012-12-12 16:16:33 -0500] awgross: jgerry: well, you could use shef, or throw some pry bindings in to a recipe, or be really crazy and do Chef::Log.debug(node.inspect)
[2012-12-12 16:16:54 -0500] awgross: jgerry: that last one will be a pain to read through, but should have everything
[2012-12-12 16:17:09 -0500] jgerry: I've been going down the shef route -- it's not something I'll likely do a lot, just until I get settled
[2012-12-12 16:18:40 -0500] barnacles: node.to_hash() ?
[2012-12-12 16:18:50 -0500] barnacles: http://rubydoc.info/gems/chef/Chef/Node
[2012-12-12 16:19:27 -0500] jgerry: That's it! Perfect.
[2012-12-12 16:19:36 -0500] barnacles: :)
[2012-12-12 16:19:44 -0500] awgross: thanks barnacles I was thinking of the wrong thing
[2012-12-12 16:19:57 -0500] barnacles: awgross: No problemo, I just used the same thing for new_resource
[2012-12-12 16:20:30 -0500] BryanWB_: use pry
[2012-12-12 16:20:39 -0500] BryanWB_: pry is da bets
[2012-12-12 16:21:13 -0500] jgerry: interestingly -- node.name returns the same as node['fqdn'] which is not what I would expect.
[2012-12-12 16:21:45 -0500] jgerry: in /etc/chef/client.rb node_name is set to "munin-server"
[2012-12-12 16:22:18 -0500] awgross: BryanWB_: watching http://pryrepl.org/screencasts.html per your blog
[2012-12-12 16:22:41 -0500] BryanWB_: awgross: awesome, i shud rewatch it every few weeks
[2012-12-12 16:23:39 -0500] barnacles: ohhh awesome! I've been looking for something to replace irb
[2012-12-12 16:25:07 -0500] awgross: irb made me cry coming from python
[2012-12-12 16:25:16 -0500] barnacles: yea, ipython?
[2012-12-12 16:25:28 -0500] awgross: ipython, shell_plus, pdb
[2012-12-12 16:25:29 -0500] jgerry: i do miss ipython coming from that camp
[2012-12-12 16:25:37 -0500] awgross: pry is nice though
[2012-12-12 16:25:51 -0500] barnacles: if anything I don't have to require 'irb/completion' lol
[2012-12-12 16:26:25 -0500] masterkorp: awgross: pry is very decent
[2012-12-12 16:27:18 -0500] jgerry: i miss ipython's ? operator
[2012-12-12 16:28:25 -0500] BryanWB_: jgerry: i do too
[2012-12-12 16:32:35 -0500] aruntomar: jgerry: in pry you can use ? Class#method or ? Class.method etc
[2012-12-12 16:32:58 -0500] jgerry: cool. pry is new to me, I'm checking out that screencast now
[2012-12-12 16:33:22 -0500] aruntomar: jgerry: in pry you can cd into the class and do all sorts of cool stuff
[2012-12-12 16:35:02 -0500] pcn: ohai chefs
[2012-12-12 16:35:35 -0500] BryanWB_: ohai pcn!
[2012-12-12 16:37:15 -0500] pcn: I come bearing questions about java
[2012-12-12 16:37:24 -0500] pcn: specifically about the tomcat cookbook
[2012-12-12 16:37:47 -0500] pcn: But this is probably mjore general
[2012-12-12 16:38:11 -0500] pcn: Tomcat is an interesting case where starting it up and letting it run as the default user is probably the right thing about 95% of the time.
[2012-12-12 16:38:50 -0500] itchyouch: What's the syntax to utilize a LWRP from another cookbook?  I'm trying to get my daemons to call the supervisor cookbook to run a supervisorctl update
[2012-12-12 16:38:56 -0500] pcn: But when you have an environment such as mine, where I need to run tomcat as another user so it can do things like remove files, the initial startup is annoying
[2012-12-12 16:39:40 -0500] awgross: itchyouch: cookbookname_lwrpname, unless the LWRP is default, then its just cookbookname
[2012-12-12 16:40:04 -0500] awgross: itchyouch: note - in cookbook names will cause lots of problems with this setup, so dont use them
[2012-12-12 16:40:54 -0500] itchyouch: So don't do what I'm trying to do?
[2012-12-12 16:41:32 -0500] awgross: itchyouch: ? you can use LWRPs from different cookbooks, just avoid naming cookbooks with a - in the name as it causes issues in ruby
[2012-12-12 16:41:41 -0500] itchyouch: Ahh, okay.
[2012-12-12 16:42:03 -0500] itchyouch: Damnit.  Syslog-ng recipe
[2012-12-12 16:42:04 -0500] itchyouch: Heh
[2012-12-12 16:42:15 -0500] BryanWB_: pcn: u r installing from a package? i would avoid that
[2012-12-12 16:43:03 -0500] BryanWB_: i use ark to download the appropriate tarball and put it in the right spot, i have a public tomcat cookbook but it is a mess right now
[2012-12-12 16:43:16 -0500] BryanWB_: pcn:  the java-related debs and rpms are bad imho
[2012-12-12 16:44:45 -0500] pcn: Hm.  The opscode cookbook does package download.
[2012-12-12 16:45:26 -0500] pcn: I'm not tied to that though. It seems like everthing is like pulling threads leading to the same amount of work.
[2012-12-12 16:46:55 -0500] pcn: Are you using the cookbook in your repo at chef-tomcat-bin?
[2012-12-12 16:48:13 -0500] ssd7: BryanWB_: Congrats on the site going live!
[2012-12-12 16:48:41 -0500] BryanWB_: ssd7: tks! it has been a lot of work but would have been nearly impossible w/out chef
[2012-12-12 16:48:50 -0500] BryanWB_: for those interested http://data.fao.org
[2012-12-12 16:49:51 -0500] awgross: http://data.fao.org/humans.txt
[2012-12-12 16:52:15 -0500] pcn: Looks very interesting
[2012-12-12 16:54:56 -0500] qhartman: BryanWB_, Very interesting stuff. Good data to have available to the public
[2012-12-12 16:56:24 -0500] pcn: What are the prereqs for getting an API key?
[2012-12-12 16:57:27 -0500] BryanWB_: qhartman: pcn tks
[2012-12-12 16:57:39 -0500] BryanWB_: pcn: actually i don't know :/
[2012-12-12 16:58:04 -0500] pcn: Oh, well
[2012-12-12 17:00:42 -0500] LowWalker: HAIL DUDES. Can chef provision virtual machines at a hypervisor level? ESX, AWS etc?
[2012-12-12 17:01:25 -0500] aruntomar: LowWalker: yes
[2012-12-12 17:02:13 -0500] sfb: LowWalker: http://wiki.opscode.com/display/chef/Launch+Cloud+Instances+with+Knife
[2012-12-12 17:03:34 -0500] LowWalker: Excellent
[2012-12-12 17:03:37 -0500] LowWalker: thx
[2012-12-12 17:03:48 -0500] makerbreakr: anyone know of any place hiring for devops/chef?
[2012-12-12 17:04:01 -0500] jtimberman: LowWalker: There's a community-provided plugin for ESX/vmware stuff, I believe.
[2012-12-12 17:04:11 -0500] qhartman: makerbreakr, what part of the country?
[2012-12-12 17:04:18 -0500] qhartman: or world, even?
[2012-12-12 17:04:21 -0500] makerbreakr: im willing to move, but I live in St. Louis now
[2012-12-12 17:04:22 -0500] jtimberman: https://github.com/rubiojr/knife-esx
[2012-12-12 17:04:34 -0500] jtimberman: makerbreakr: Probably lots :)
[2012-12-12 17:04:34 -0500] makerbreakr: I wouldnt mind the northwest
[2012-12-12 17:04:59 -0500] LowWalker: jtimberman, actually looking for cloudstack provisioning specifically which I think is a KVM base still? So I may be able to handle that with just execs
[2012-12-12 17:05:21 -0500] jtimberman: LowWalker: well then: https://github.com/CloudStack-extras/knife-cloudstack
[2012-12-12 17:05:23 -0500] qhartman: There's lots of tech in Portland and Seattle, but be prepared for a pay cut if you end up in the NW and outside those metros.
[2012-12-12 17:05:39 -0500] LowWalker: jtimberman, mucho gracias
[2012-12-12 17:05:49 -0500] jtimberman: "Not affiliated with the CloudStack Project" but I don't know how relevant that is to your interests.
[2012-12-12 17:07:44 -0500] jblaine: LowWalker: Also: https://github.com/ezrapagel/knife-vsphere
[2012-12-12 17:08:06 -0500] whilp: makerbreakr: hiya https://simple.com/careers/
[2012-12-12 17:08:07 -0500] jblaine: oh
[2012-12-12 17:08:08 -0500] jblaine: nevermind
[2012-12-12 17:08:23 -0500] LowWalker: jblaine, thanks ;)
[2012-12-12 17:09:12 -0500] LowWalker: So attributes, seem to be required under each cookbook. Is there an attributes are per environment also?
[2012-12-12 17:10:19 -0500] makerbreakr: whilp, do you work there?
[2012-12-12 17:10:23 -0500] whilp: i do
[2012-12-12 17:10:46 -0500] makerbreakr: are you the guy that looks like he is having a bad day with his face in his hand
[2012-12-12 17:10:47 -0500] makerbreakr: ?
[2012-12-12 17:10:47 -0500] makerbreakr: lol
[2012-12-12 17:11:07 -0500] sfb: jblaine: But that helps me. (=
[2012-12-12 17:11:09 -0500] whilp: heh, no -- i'm not in that photo, actually
[2012-12-12 17:12:28 -0500] makerbreakr: i dont know clojure/scala/java though
[2012-12-12 17:12:35 -0500] makerbreakr: I assuming thats not a big deal?
[2012-12-12 17:13:08 -0500] whilp: we all work around the stack
[2012-12-12 17:13:58 -0500] whilp: i don't mean to go too far OT for the channel, but i'm happy to answer questions in privmsg/mail (will@simple.com)
[2012-12-12 17:16:34 -0500] jtimberman: LowWalker: attributes can be set at various priority levels (default, set/normal, override) and various places (cookbook attributes, environments, roles, recipes, on the node object in the Chef Server or from JSON passed with -j). The reasons are for flexibility because every infrastructure is different.
[2012-12-12 17:17:16 -0500] LowWalker: jtimberman, awesome that's what I was hoping to hear
[2012-12-12 17:17:22 -0500] jtimberman: I follow this guideline: Put "default" attributes in cookbook attributes files, use default attributes in roles, use set/normal attributes in recipes, and sparingly use override attributes in environments.
[2012-12-12 17:18:03 -0500] jtimberman: full list of precedence rules is here: http://docs.opscode.com/essentials_roles_attributes_precedence.html
[2012-12-12 17:18:26 -0500] makerbreakr: i typically put overrides in databags, and default in recipes
[2012-12-12 17:18:28 -0500] jtimberman: The reason for the above "guideline" is to make it easy to override attributes at the places where it often makes the most sense.
[2012-12-12 17:18:40 -0500] jtimberman: Sure, though data bags aren't attributes :)
[2012-12-12 17:18:49 -0500] jtimberman: that is, its not non-specific data.
[2012-12-12 17:19:30 -0500] makerbreakr: ya, should have said attribute data?
[2012-12-12 17:19:34 -0500] makerbreakr: whats the term there?
[2012-12-12 17:20:50 -0500] cabeloBR: How can I get ipaddress of all nodes with tag X using search?
[2012-12-12 17:21:46 -0500] cabeloBR: search(:node, "chef_environment:#{node.chef_environment} AND tags:*MYTAG*")
[2012-12-12 17:23:08 -0500] cabeloBR: this return all nodes, who i can iterate on all node
[2012-12-12 17:23:09 -0500] cabeloBR: ?
[2012-12-12 17:23:59 -0500] wassy121: search(foo).each , just like ruby from there
[2012-12-12 17:24:37 -0500] wassy121: .collect, .select, etc.  It's a ruby hash.
[2012-12-12 17:25:47 -0500] wassy121: sorry, it's an Array of Hashes
[2012-12-12 17:26:08 -0500] cabeloBR: wassy121: ok
[2012-12-12 17:26:31 -0500] cabeloBR: i'll try
[2012-12-12 17:26:32 -0500] cabeloBR: tks
[2012-12-12 17:42:55 -0500] qhartman: Is there a format other than JSON that can be used to define environments?
[2012-12-12 17:44:06 -0500] chip-: You can do them in Ruby, but when you upload them they'll get converted to JSON internally.
[2012-12-12 17:44:28 -0500] qhartman: that's fine, I'm just looking for something more manageable on my side
[2012-12-12 17:44:51 -0500] qhartman: Our environment files have ballooned into these unwieldly monsters
[2012-12-12 17:45:06 -0500] ryanschwartz: hi all - I have a fresh new chef 10.16.2 server, and trying to knife cookbook upload with knife 10.16.2 client I'm getting an error after it uploads the files to the sandbox: "in `read_status_line': wrong status line: "<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">" (Net::HTTPBadResponse)"
[2012-12-12 17:46:14 -0500] chip-: qhartman: just save them in your repo as environment.rb and write them in Ruby, if that's more comfortable for you.
[2012-12-12 17:46:22 -0500] chip-: qhartman: but if you ever export them from the server again, they'll be in json
[2012-12-12 17:46:25 -0500] ryanschwartz: any suggestions to correct this issue? I've tried with a fresh cookbook (knife cookbook create foo && knife cookbook upload foo) with the same results
[2012-12-12 17:48:05 -0500] qhartman: chip-, makes sense. Can you point out some examples of an environment file in ruby? I'm having a hard time imagining what that would look like. It seems like it would be like the attributes files in a cookbook, with the attribute / value pairs?
[2012-12-12 17:48:36 -0500] qhartman: chip-, all the environment examples I'm finding are JSON, which I already know.
[2012-12-12 17:49:02 -0500] ryanschwartz: I'm seeing a POST /sandboxes HTTP/1.1 with response code 201 and then a "GET /" 400 for each file that was supposedly uploaded to the sandbox
[2012-12-12 17:49:57 -0500] qhartman: chip-, Found a partial example. Thanks!
[2012-12-12 17:53:27 -0500] maciek`: Recipe perl from opscode tries to install package libperl-dev=5.14.2-6ubuntu2.1, which is not there because of the last number, there should be libperl-dev=5.14.2-6ubuntu2.2, I don't know how to fix it. More info: I was trying to install gitlab, using librarian-chef with just a line cookbook 'gitlab'.
[2012-12-12 17:54:14 -0500] ryanschwartz: actually I just tracked it down - package installation issue with /usr/share/chef-server-api not being chowned to the chef user
[2012-12-12 17:56:44 -0500] jtimberman: maciek`: "apt-get update"?
[2012-12-12 17:58:55 -0500] ryanschwartz: jtimberman or any other opscode folk: is /usr/share/chef-server-api the default location for cookbook sandbox uploads, or did I just overlook some setting in server.rb?
[2012-12-12 18:18:34 -0500] matti: ;]
[2012-12-12 18:21:19 -0500] rfuentes: Hi guys
[2012-12-12 18:21:35 -0500] rfuentes: I have an issue with knife on my lapto
[2012-12-12 18:21:37 -0500] rfuentes: p
[2012-12-12 18:21:38 -0500] rfuentes: rfuentes@erdberg:~$ knife
[2012-12-12 18:21:39 -0500] rfuentes: /usr/local/share/ruby/site_ruby/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0) amongst [] (Gem::LoadError)
[2012-12-12 18:21:39 -0500] rfuentes: from /usr/local/share/ruby/site_ruby/rubygems/dependency.rb:256:in `to_spec'
[2012-12-12 18:21:39 -0500] rfuentes: from /usr/local/share/ruby/site_ruby/rubygems.rb:1210:in `gem'
[2012-12-12 18:22:31 -0500] rfuentes: I really don't know much about Ruby, and I think this is a env think of ruby, isn't?
[2012-12-12 18:25:15 -0500] matti: rfuentes: There is a hint there :P
[2012-12-12 18:25:22 -0500] matti: Could not find chef (>= 0) amongst [] (Gem::LoadError)
[2012-12-12 18:25:26 -0500] matti: gem list
[2012-12-12 18:25:30 -0500] matti: See if you have chef there.
[2012-12-12 18:25:44 -0500] matti: Which is rather funny anyway, since you have knife.
[2012-12-12 18:27:30 -0500] rfuentes: rfuentes@erdberg:~$ gem list
[2012-12-12 18:27:30 -0500] rfuentes: *** LOCAL GEMS ***
[2012-12-12 18:27:30 -0500] rfuentes: rfuentes@erdberg:~$ sudo gem list | grep chef
[2012-12-12 18:27:30 -0500] rfuentes: chef (10.16.2, 10.14.4)
[2012-12-12 18:27:31 -0500] rfuentes: rfuentes@erdberg:~$
[2012-12-12 18:27:39 -0500] barnacles: rfuentes: I'm having the same problem!
[2012-12-12 18:27:45 -0500] barnacles: rfuentes: Just started last night
[2012-12-12 18:27:56 -0500] rfuentes: barnacles, welcome to the club
[2012-12-12 18:28:30 -0500] barnacles: rfuentes: show's up in gem list as well
[2012-12-12 18:28:54 -0500] rfuentes: matti, barnacles but is just showing the gems with sudo, not with my user
[2012-12-12 18:29:36 -0500] rfuentes: sudo /usr/local/bin/knife works well
[2012-12-12 18:29:54 -0500] barnacles: rfuentes: oh my problem is a bit different then
[2012-12-12 18:29:54 -0500] rfuentes: I think I need to put /usr/local/bin on the path
[2012-12-12 18:29:57 -0500] rfuentes: :B
[2012-12-12 18:30:14 -0500] barnacles: user knife and sudo knife both work for me, it's when I execute a knife command from a Vagrantfile
[2012-12-12 18:30:38 -0500] barnacles: rfuentes: working?
[2012-12-12 18:30:41 -0500] rfuentes: yup
[2012-12-12 18:31:05 -0500] rfuentes: maybe vagrant requiere some path also barnacles
[2012-12-12 18:31:21 -0500] barnacles: rfuentes: It suddenly stopped working though, so I'm not sure
[2012-12-12 18:31:30 -0500] barnacles: rfuentes: I think it's a problem with rvm
[2012-12-12 18:31:52 -0500] rfuentes: oh, rvm, what a bitchy piece of software
[2012-12-12 18:33:02 -0500] btm: rfuentes: I'd check /usr/bin, /usr/sbin, etc for a knife binary and do an 'ls -l' to see where it goes (omnibus?). it sounds like you might have more than one ruby/rubygems kicking around (where does the #! at the top of your /usr/local/bin/knife point to?)
[2012-12-12 18:33:28 -0500] btm: barnacles: 'rvm do gem install chef' ?
[2012-12-12 18:34:34 -0500] binjured: it doesn't seem like there is a recipe to just install a package via apt. am i nuts?
[2012-12-12 18:34:48 -0500] binjured: the apt cookbook seems concerned more with managing the repos themselves
[2012-12-12 18:34:57 -0500] awgross: binjured: package provider will do it
[2012-12-12 18:35:04 -0500] btm: binjured: you don't need a recipe, just use the package resource, e.g.: package "apache2"
[2012-12-12 18:35:25 -0500] btm: bugoff: you can specify the apt provider specifically using the apt_package resource, but apt is the default package provider on debian/ubuntu
[2012-12-12 18:35:41 -0500] binjured: btm: so anywhere in a recipe just have that line?
[2012-12-12 18:35:50 -0500] btm: binjured: http://wiki.opscode.com/display/chef/Resources#Resources-Package
[2012-12-12 18:35:52 -0500] rfuentes: btm #!/usr/bin/ruby
[2012-12-12 18:36:08 -0500] binjured: thanks!
[2012-12-12 18:36:18 -0500] btm: binjured: yup, the package resources default action is install, you don't need to specify anything else if that is what you want.
[2012-12-12 18:37:05 -0500] btm: rfuentes: so run "which gem" and "which knife" to see what binary is being used from your path, and make sure they're associated with the ruby/rubygems you think they are.
[2012-12-12 18:48:50 -0500] jfl0wers: anyone know what this error is about?
[2012-12-12 18:50:16 -0500] jfl0wers: https://gist.github.com/4270481
[2012-12-12 18:52:50 -0500] jfl0wers: I can't even do a chef-client -h
[2012-12-12 18:53:31 -0500] anaxgorous: anyone seen this oddity: knife environment from file env.rb -> syntax error, unexpected ':', expecting tASSOC
[2012-12-12 19:00:40 -0500] wassy121: That means your json isn't parsing correctly
[2012-12-12 19:04:48 -0500] ssd7: anthroprose: Since the extension is .rb I'm assuming you are using the ruby dsl to define the environment
[2012-12-12 19:04:58 -0500] ssd7: looks like you probably have a : where you mean =>
[2012-12-12 19:12:27 -0500] itchyouch: I'm getting an "error syncing cookbooks" failing with a type error: can't convert nil into string
[2012-12-12 19:12:54 -0500] itchyouch: The run works fine on existing boxes, just not liking a newbox I'm trying to do the very first run on.
[2012-12-12 19:13:36 -0500] itchyouch: I'm running 10.16.2. I'd put something on pastebin, but I'm typing away on an ipad with other sites blocked.
[2012-12-12 19:13:52 -0500] itchyouch: Any potential sanity checks?
[2012-12-12 19:26:17 -0500] j|: is there a special syntax for using nested hash tables in role-base attributes? I looked in the tickets system but I couldn't for certain find one that has trouble using nested hashes, the tickets all seemed to be having issues with nested roles and the merging order or attribute precedences. The attributes I'm setting just don't show up at all it seems.
[2012-12-12 19:26:46 -0500] j|: so I assume I'm doing something wrong, but can't seem to figure it out so far.
[2012-12-12 19:30:31 -0500] btm: jl: nothing special "foo": { "one": "1", "two": "2", "three": { "peanut": "butter", "paper": "scissors" } }
[2012-12-12 19:31:40 -0500] j|: ... that looks like python.
[2012-12-12 19:31:54 -0500] j|: I thought roobee used the perl => things for hashes?
[2012-12-12 19:32:15 -0500] btm: jl: what I posted is JSON.
[2012-12-12 19:32:37 -0500] btm: jl: http://wiki.opscode.com/display/chef/Roles#Roles-AsJSON
[2012-12-12 19:33:03 -0500] j|: yea..
[2012-12-12 19:33:20 -0500] j|: I appreciate that.
[2012-12-12 19:33:34 -0500] j|: thing is I'm writing the roles as .rb files, not json
[2012-12-12 19:33:42 -0500] awgross: j|: you can then use the => syntax
[2012-12-12 19:34:03 -0500] j|: hm.
[2012-12-12 19:34:19 -0500] btm: jl: scroll up the page an inch. http://wiki.opscode.com/display/chef/Roles#Roles-overrideattributes
[2012-12-12 19:34:23 -0500] awgross: default_attributes( "role" => "prod_thumbor",
[2012-12-12 19:34:23 -0500] awgross:                     "chef_client" => {
[2012-12-12 19:34:23 -0500] awgross:                         "init_style" => "init"
[2012-12-12 19:34:23 -0500] awgross:                     },
[2012-12-12 19:34:23 -0500] awgross:                   "nginx" => {
[2012-12-12 19:34:23 -0500] awgross:                                     "version" => "1.2.4-2ubuntu0ppa1~precise"
[2012-12-12 19:34:24 -0500] awgross:                                }
[2012-12-12 19:34:24 -0500] awgross:                     )
[2012-12-12 19:34:36 -0500] awgross: something like that j|
[2012-12-12 19:34:43 -0500] awgross: the formatting got a bit screwy
[2012-12-12 19:35:00 -0500] j|: yea. that's what I'm trying currently..
[2012-12-12 19:35:08 -0500] j|: I must be screwing up something somewhere
[2012-12-12 19:35:15 -0500] j|: when I show the role, its fine
[2012-12-12 19:35:51 -0500] awgross: j|:  https://gist.github.com/4270846
[2012-12-12 19:35:57 -0500] j|: but when I run chef-client, the templates that end up using the attributes have nothing there and I get 'nil' when trying to print the attribs in shef
[2012-12-12 19:36:16 -0500] awgross: j|: are you applying the role to the node
[2012-12-12 19:36:26 -0500] j|: ha.
[2012-12-12 19:36:32 -0500] j|: that would be awesome if that's all I forgot.
[2012-12-12 19:36:55 -0500] j|: unfortunately, no, I did add the role to the nodes run list.
[2012-12-12 19:38:23 -0500] j|: will double check some things again I guess.
[2012-12-12 19:38:32 -0500] j|: thx for trying to help tho.
[2012-12-12 19:52:03 -0500] j|: oh FFS. had a stray = in the resource.
[2012-12-12 19:52:47 -0500] mhalligan: Any recommendations for debugging an erb template? I'm setting a bunch of attributes with the percona cookbook to create my.cnf, and am getting an error I'm having problems tracing down. https://gist.github.com/e2e16bd9d533fd24e86f shows my attribute settings and the errors I get.
[2012-12-12 19:59:08 -0500] makerbreakr: node is a string
[2012-12-12 19:59:21 -0500] xmltok: i have a cookbook which enables the chef-client service, that fails when i use chef solo, is there a way to check if a package is installed and only run if its installed?
[2012-12-12 20:00:01 -0500] makerbreakr: mhalligan, I think you need to make that a symbol, not a string
[2012-12-12 20:00:20 -0500] mhalligan: makerbreaker: probably, but in this caser I'm not quite sure what "that" actually is.
[2012-12-12 20:00:39 -0500] mhalligan: an earlier version of this attributes file parsed perfectly, so I'm not quite sure which ones are offending right now
[2012-12-12 20:00:56 -0500] mhalligan: would be nice for erb to tell me which one it's failing onj
[2012-12-12 20:01:06 -0500] xmltok: i guess i will just trigger off of chef solo rather than the package
[2012-12-12 20:03:28 -0500] btm: @opscode Chef code review live, join: http://bit.ly/VWGghg, watch: http://youtu.be/tTjuca8d4sw #opschef
[2012-12-12 20:05:50 -0500] jtbennett: hi all.  have a problem with chef-solo.  this works: "chef-solo -c solo.rb -j node.json".  this doesn't "chef-solo -c solo.rb -o role[Foo]"  the run list is somehow getting turned into "recipe[roles]"
[2012-12-12 20:07:53 -0500] awgross: jtimberman: sounds like a quoting issue
[2012-12-12 20:08:08 -0500] awgross: *jtbennett
[2012-12-12 20:08:41 -0500] itchyouch: Anyone encounter the 404: no routes match request /reports/nodes/hostname/run?
[2012-12-12 20:08:52 -0500] jtbennett: thx @awgross.  i've tried putting role[Foo] in quotes, but same result
[2012-12-12 20:09:00 -0500] timsmith: has anyone ever gotten the error "Cookbook folder must match cookbook name" when trying to upload a cookbook tarball via the community site in their browser
[2012-12-12 20:09:03 -0500] mhalligan: will increasing the client loglevel to DEBUG show me what data is causing the error in the erb? it's hard to debug this with only half the information needed
[2012-12-12 20:09:10 -0500] awgross: jtimberman: can you show us a version of the solo.rb you are using?
[2012-12-12 20:09:16 -0500] awgross: jtbennett: *
[2012-12-12 20:09:20 -0500] awgross: sorry jtimberman
[2012-12-12 20:09:23 -0500] timsmith: I used the rake command to generate a storm cookbook and uploaded it.  The file is storm.tar.gz and the folder in that tar.gz is called storm
[2012-12-12 20:10:04 -0500] jtbennett: it's dirt-simple:
[2012-12-12 20:10:25 -0500] jtbennett: file_cache_path "c:\\insp\\insp_aws_chef_repo" cookbook_path   "c:\\insp\\insp_aws_chef_repo\\cookbooks" role_path       "c:\\insp\\insp_aws_chef_repo\\roles" data_bag_path   "c:\\insp\\insp_aws_chef_repo\\data_bags"
[2012-12-12 20:10:33 -0500] awgross: jtbennett: link it in a gist if possible
[2012-12-12 20:10:39 -0500] jtbennett: k
[2012-12-12 20:10:54 -0500] awgross: thanks
[2012-12-12 20:12:12 -0500] jtbennett: awgross: https://gist.github.com/4271131.git
[2012-12-12 20:14:00 -0500] awgross: jtbennett: I've seen times where chef will fall back to trying recipe[role] when it can't find the role, can you double check that the name listed in the role is the same as the one specified with the -o flag?
[2012-12-12 20:14:56 -0500] awgross: jtbennett: also, try doing         chef-solo -c solo.rb -o "role[Foo]"
[2012-12-12 20:15:00 -0500] evxd: apt-get -y purge $(dpkg -l | grep -e mysql -e keystone -e glance -e nova -e cinder)
[2012-12-12 20:15:05 -0500] awgross: note the explicit quotes after the -o switch
[2012-12-12 20:15:18 -0500] evxd: ist on that on | cut -f2
[2012-12-12 20:15:26 -0500] evxd: ist on that on | cut -d -f2
[2012-12-12 20:15:30 -0500] evxd: ist on that on | cut -d' ' -f2
[2012-12-12 20:15:43 -0500] mhalligan: A link to documentation on debugging erb inside of chef would be rad, so far my google-fu is appearing to be weak on this matter.
[2012-12-12 20:15:45 -0500] evxd: ist on that on | cut -d' ' -f1
[2012-12-12 20:15:47 -0500] evxd: ist on that on | cut -d' ' -f3
[2012-12-12 20:15:51 -0500] evxd: ist on that on | cut -d' ' -f2
[2012-12-12 20:16:05 -0500] mhalligan: or is it just impossible to figure out which data is being passed to to the template?
[2012-12-12 20:16:48 -0500] jtbennett: awgross: double-checked the role name -- copied it out of the node.json file that works.  with and without quotes.  no joy
[2012-12-12 20:17:07 -0500] evxd: ist on that on | awk '{print $2}'
[2012-12-12 20:17:45 -0500] evxd: apt-get -y purge $(dpkg -l | grep -e mysql -e keystone -e glance -e nova -e cinder | awk '{print $2}')$(ist on that on | awk '{print $2}')
[2012-12-12 20:17:46 -0500] awgross: jtbennett: hmm unsure, i blame windows
[2012-12-12 20:18:15 -0500] jtbennett: awgross: this worked on the same machine, repo, etc. a couple weeks ago. i switched to the node.json file.  now trying to use -o again
[2012-12-12 20:18:35 -0500] jtbennett: awgross: yes, it's frustrating using chef on windows :)
[2012-12-12 20:18:52 -0500] awgross: its frustrating using anything but Visual Studio in windows
[2012-12-12 20:19:13 -0500] jtbennett: awgross: thanks for trying!
[2012-12-12 20:20:02 -0500] evxd: rm -rf rm /root/.my.
[2012-12-12 20:20:09 -0500] evxd: rm -rf /var/lib/mysq
[2012-12-12 20:20:14 -0500] evxd: rm /etc/mygr
[2012-12-12 20:20:22 -0500] evxd: echo purge | debconf-communicate mysql-server-5.0
[2012-12-12 20:20:26 -0500] evxd: echo purge | debconf-communicate mysql-server-5.5
[2012-12-12 20:20:51 -0500] evxd: mysql
[2012-12-12 20:23:42 -0500] itchyouch: Anyone ever experience a node not show up in the status output even after a successful chef-client run?
[2012-12-12 20:24:00 -0500] mhalligan: can I catch the exception and ignore it inside of the erb? Or do I need to do something funky in the recipe calling that template?
[2012-12-12 20:24:11 -0500] evxd: chef-client
[2012-12-12 20:26:51 -0500] mhalligan: nevermind, I'll just put the file in manually
[2012-12-12 20:29:12 -0500] jumboTron: Hallo
[2012-12-12 20:33:53 -0500] masterkorp: HAKI
[2012-12-12 20:36:52 -0500] qhartman: I just got started ona script to convert a JSON environment file into a ruby environment file. Anyone know if such a thing exists already? Hate to re-invent the wheel...
[2012-12-12 20:38:21 -0500] jumboTron: anyone got tips on running a recipe on first boot only?
[2012-12-12 20:39:43 -0500] itchyouch: What are you trying to accomplish jumboTron ?
[2012-12-12 20:40:25 -0500] itchyouch: Sounds more like a job for from
[2012-12-12 20:40:27 -0500] itchyouch: Cron
[2012-12-12 20:40:43 -0500] itchyouch: You can use the @reboot for from
[2012-12-12 20:41:38 -0500] jumboTron: itchyouch: run a registration command to a neighboring system
[2012-12-12 20:45:09 -0500] jumboTron: thinking maybe I should create a file after I execute the command
[2012-12-12 20:45:15 -0500] jumboTron: and check if it's there next time around
[2012-12-12 20:45:28 -0500] jumboTron: state file so to speak
[2012-12-12 20:47:04 -0500] wassy121: So, I have this provider that runs "unless ::File.exists?()", but I need it to notice that the file that comes from a template has changed.  How can I checksum the template for the unless check?
[2012-12-12 20:47:40 -0500] evxd: apt-get -y purge $(dpkg -l | grep -e mysql -e keystone -e glance -e nova -e cinder | awk '{print $2}');
[2012-12-12 20:48:49 -0500] evxd: chef-client
[2012-12-12 20:52:54 -0500] kreedy: How are people using the application_ruby cookbook when you're database server isn't in your chef infrastructure (RDS and such)? Are people setting a custom database_template, altering providers/rails.rb to take a host parameter instead of finding by role, or something else?
[2012-12-12 21:02:39 -0500] btm: @opscode Cookbook code review, join: http://bit.ly/T9Ku0o, watch: http://youtu.be/FEPt02ZazsE #opschef
[2012-12-12 21:05:00 -0500] ryanschwartz: what is the recommended best practices way to install chef server open source version (I need to run my own, would love to use opscode but damn legals, etc)
[2012-12-12 21:14:08 -0500] masterkorp: ryanschwartz: packages
[2012-12-12 21:14:28 -0500] masterkorp: if you use debian/ubuntu is just a simple repo add
[2012-12-12 21:14:42 -0500] masterkorp: ryanschwartz: you will feel like http://i.imgur.com/k1yVI.jpg
[2012-12-12 21:15:06 -0500] ryanschwartz: masterkorp: thanks - is there a definitive location with documentation, because I did that and could NOT get it to work properly (I just dpkg -P 'd it all and am going to start over)
[2012-12-12 21:15:17 -0500] ryanschwartz: nice
[2012-12-12 21:15:23 -0500] ryanschwartz: cooooooooooooooooooool doggie
[2012-12-12 21:15:40 -0500] masterkorp: ryanschwartz: there is the chef wiki, and the newly made docs.opscode.com
[2012-12-12 21:17:03 -0500] nerdcore: How can I use Ohai-generated data within a template file?
[2012-12-12 21:18:08 -0500] ryanschwartz: right, but nada on the new site re: installing open source server version
[2012-12-12 21:18:23 -0500] nerdcore: is it like <%= ohai['ipaddress'] %> or like <%= node['ohai']['ipaddress'] %> or what?
[2012-12-12 21:18:28 -0500] ryanschwartz: I'll see how it goes this time around - much thanks
[2012-12-12 21:30:01 -0500] nerdcore: is attributes/default.rb just a standard Ruby script, where I can do computational logic and the like?
[2012-12-12 21:35:40 -0500] masterkorp: you should really do that on the recipe/libraries
[2012-12-12 21:36:22 -0500] btm: nerdcore: basically, with a method_missing hook for the DSL.
[2012-12-12 21:54:45 -0500] philsturgeon: i've been running a group of recipies consistently for a long time. tried upgrading my vagrant box to ubuntu 12.10 and this time I get http://pastie.org/5517788
[2012-12-12 21:55:00 -0500] philsturgeon: I can manually run sudo server php5-fpm reload but chef cant
[2012-12-12 21:55:02 -0500] philsturgeon: any ideas?
[2012-12-12 21:56:25 -0500] wassy121: philsturgeon, you need to note in the "service php-fpm" supports :reload
[2012-12-12 21:57:03 -0500] wassy121: supports :reload => true
[2012-12-12 21:57:33 -0500] philsturgeon: wassy121: ahh gotcha. no idea why or how this has been working for all this time? maybe because I have a new guest version on this new box?
[2012-12-12 21:57:45 -0500] wassy121: Maybe because you never needed to reload before?
[2012-12-12 21:58:00 -0500] wassy121: It's probably reloading because of a notifies, or something like that
[2012-12-12 21:58:00 -0500] philsturgeon: wassy121: i've been consistently using this same group of recipies for months.
[2012-12-12 21:58:12 -0500] philsturgeon: its reloaded 40 times a day :D
[2012-12-12 21:58:23 -0500] wassy121: you sure it isn't restarted?
[2012-12-12 21:58:50 -0500] philsturgeon: wassy121: positive http://d.pr/i/jtKH
[2012-12-12 21:58:51 -0500] wassy121: I'm just telling you what the error says.
[2012-12-12 21:59:24 -0500] joe____: Do the ohai-provided attributes do any sort of caching? I have a script that has 'gem_package "ruby-shadow"', and then later on creates a user with a password, which fails because ruby-shadow isn't available. A second run will complete successfully.
[2012-12-12 22:10:09 -0500] moos3: whats the best way to bootstrap a rhel kickstarted node ?
[2012-12-12 22:12:20 -0500] barnacles_: can a recipe make changes to a databag?
[2012-12-12 22:14:06 -0500] miah: only if the client has admin privileges
[2012-12-12 22:14:17 -0500] miah: or you've configured acl's in hosted chef
[2012-12-12 22:14:21 -0500] makerbreakr: technically yes, advisable, meh
[2012-12-12 22:14:25 -0500] jtimberman: barnacles_: on Hosted Chef/Private Chef, yes - API clients can make changes to data bag items directly. On open source Chef Server, the API client requires admin privilege
[2012-12-12 22:14:41 -0500] miah: enjoy race conditions =)
[2012-12-12 22:15:16 -0500] barnacles_: jtimberman: mmm, thanks!
[2012-12-12 22:19:57 -0500] miah: barnacles_: http://www.youtube.com/watch?v=qIxpK_VK9fE&playnext=1&list=PL456A975FB3785325&feature=results_video
[2012-12-12 22:21:58 -0500] jtimberman: "Since you had to *fax* your CLA in" - so glad we made that electronic :)
[2012-12-12 22:22:37 -0500] barnacles_: miah: watching it now, thanks
[2012-12-12 22:27:14 -0500] miah: its been electronic for a while now hasnt it? i did mine over a year ago and it was..
[2012-12-12 22:31:23 -0500] ranjibd: is there any good documentation available for writing good, extensible knife plugins?
[2012-12-12 23:10:07 -0500] jwcarman: My understanding is that any node can see all other nodes' data by using knife and talking to the chef server.  Is this true?
[2012-12-12 23:10:20 -0500] jwcarman: If so, how can I turn that off?
[2012-12-12 23:10:33 -0500] jwcarman: I'd like to have the nodes only be able to see their own data.
[2012-12-12 23:14:19 -0500] btm: jwcarman: on Open Source Chef, only 'admin clients' can see any node. Regular clients can only see their own node.
[2012-12-12 23:14:47 -0500] jwcarman: @btm: we're using Open Source Chef.
[2012-12-12 23:15:17 -0500] jwcarman: @btm: is there any wiki that explains this?  We've got a team member who is claiming that every node in the enterprise is going to be able to see any other node's data
[2012-12-12 23:15:48 -0500] jwcarman: Makes sense that "regular" nodes shouldn't be admins.
[2012-12-12 23:18:14 -0500] btm: jwcarman: http://wiki.opscode.com/display/chef/Architecture+Introduction#ArchitectureIntroduction-Clients%2CAuthentication%2CandAuthorization
[2012-12-12 23:19:22 -0500] btm: jwcarman: there isn't a lot because it's so simple of a model.
[2012-12-12 23:21:00 -0500] btm: jwcarman: run 'knife client create auth_test -f auth_test.pem' then 'knife -u auth_test -k auth_test.pem WHATEVER' replacing whatever with 'node list' and 'node show FOO' to see what it can and can't do.
[2012-12-12 23:27:50 -0500] jwcarman: @btm: thank you
[2012-12-12 23:28:00 -0500] jwcarman: @btm: it does seem simple enough, you're right! :)
[2012-12-12 23:28:51 -0500] btm: jwcarman: basically clients can only edit their own nodes and public objects like data bags. the validation client is special and create nodes, but can't do a lot of other things. the admin clients can do anything.
[2012-12-12 23:29:27 -0500] btm: jwcarman: if your use case needs more than that, Opscode Hosted Chef and Private Chef have role based access control for most objects.
[2012-12-12 23:31:56 -0500] jwcarman: @btm: I don't think we "need" more than that at this point.  However, we may find other usecases where the more beefed-up Chef server is what we need
[2012-12-12 23:44:43 -0500] ranjibd: btm, i thought nodes are world readable, clients are not.
[2012-12-12 23:45:42 -0500] ranjibd: as in if i do Chef::Node.load('any node').any_attribute, this will work..from any other node right, even they are using the non-admin clients

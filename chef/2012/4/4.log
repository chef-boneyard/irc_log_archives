[2012-04-04 00:00:38 -0400] hoover_damm: hippiehacker, looking at those tools just make me want to write my own tool
[2012-04-04 00:06:07 -0400] Brad_K: spice != spiceweasel
[2012-04-04 00:07:09 -0400] Brad_K: and spiceweasel doesn't do any searching, editing nodes or roles, etc....
[2012-04-04 00:09:59 -0400] hoover_damm: ah
[2012-04-04 00:14:26 -0400] gmcinnes1: howdy all.  Is there any way to get the output of "knife ec2 server create" programatically? After the bootstrap runs, I need to be able to upload encrypted data bag secrets etc, which means I need to grab the public dns of built machine
[2012-04-04 00:25:16 -0400] mhalligan: could someone help me parse this error? " HTTP Request Returned 400 Bad Request: invalid search query: 'recipes:"collectd::server"' Parse error at offset: 7 Reason: Expected one of \, " at line 1, column 18 (byte 18) after :"collectd" when running chef client
[2012-04-04 00:25:34 -0400] mhalligan: the role calling collectd::server  has no syntax/typo issues
[2012-04-04 01:03:08 -0400] hoover_damm: mhalligan, the search page goes into this
[2012-04-04 01:03:16 -0400] hoover_damm: mhalligan, http://wiki.opscode.com/display/chef/Search
[2012-04-04 01:03:27 -0400] hoover_damm: mhalligan, dive down towards the bottom to search for run_list
[2012-04-04 01:07:09 -0400] mhalligan: thanks I'll read, for now I've just passed over collectd t
[2012-04-04 02:19:52 -0400] sivy: evenin all
[2012-04-04 02:26:17 -0400] sivy: could someone please explain the snippet of code? https://gist.github.com/e1d512539a09d1e6dff4
[2012-04-04 02:26:25 -0400] sivy: i get the node/role search
[2012-04-04 02:26:35 -0400] sivy: but i don't get the chef_environment bits
[2012-04-04 02:48:33 -0400] silk: sivy, still looking for an explanation?
[2012-04-04 02:48:58 -0400] silk: i'd guess not.
[2012-04-04 03:13:25 -0400] jtimberman: sivy: its making sure that the results are constrained only to the same environment of the system that is running the recipe.
[2012-04-04 03:30:12 -0400] sivy: jtimberman: ah, i see
[2012-04-04 03:36:59 -0400] sivy: jtimberman: i'm trying to test this search in shef, but I can't seem to find the right syntax to check/print the name
[2012-04-04 03:37:05 -0400] sivy: i keep getting nil
[2012-04-04 03:38:07 -0400] sivy: https://gist.github.com/6ad9ed1de1210382edbf
[2012-04-04 03:39:47 -0400] sivy: i've tried n[:name], n['name']
[2012-04-04 03:39:53 -0400] sivy: @name, etc
[2012-04-04 04:24:50 -0400] sivy: ggguh
[2012-04-04 05:16:15 -0400] BryanWB: ohai chefs!
[2012-04-04 06:07:57 -0400] danryan: hey BryanWB, I have to say the food fight podcast is freakin' awesome :)
[2012-04-04 06:13:49 -0400] BryanWB: danryan: tks! u r awesome btw, i love spice
[2012-04-04 06:14:04 -0400] BryanWB: haven't used it lately but probably will in the future
[2012-04-04 06:14:55 -0400] reset: BryanWB: I like the podcast btw
[2012-04-04 06:15:13 -0400] BryanWB: reset: tks
[2012-04-04 06:19:50 -0400] miah: hi
[2012-04-04 06:20:09 -0400] miah: i am tireds
[2012-04-04 06:27:30 -0400] danryan: BryanWB: thanks :D I hope to push v1.0 out as soon as I find the time :)
[2012-04-04 06:34:27 -0400] miah: what is spice?
[2012-04-04 06:41:25 -0400] miah: nevermind. behold the power of search
[2012-04-04 06:50:17 -0400] BryanWB: danryan: what r u using spice for?
[2012-04-04 07:48:13 -0400] chris_ing: hi, are there any best practices known to use chef with bamboo i.e. trigger chef runs by bamboo or something like this?
[2012-04-04 09:56:52 -0400] turnip_jl: hi, how do I get chef to update the fqdn? (I messed around with /etc/hostname and broke things. I've now reverted the messing around, but chef still has wrong fqdn.)
[2012-04-04 10:02:52 -0400] ashb: turnip_jl: a chef-client run should updated it on completion
[2012-04-04 10:03:21 -0400] ashb: also check what `ohai fqdn` reports
[2012-04-04 10:03:56 -0400] |shad0w|: client name is based fqdn if you didn't pass one in. if you change it, you'll need to reregister the client
[2012-04-04 10:04:16 -0400] |shad0w|: should say, client/node name
[2012-04-04 10:12:29 -0400] turnip_jl: thanks a lot - running chef-client does indeed update it
[2012-04-04 10:13:41 -0400] proffalken: chris_ing: you could run "knife cookbook upload -a && knife ssh --sudo 'name:*' chef-client" if all your tests pass?
[2012-04-04 10:14:14 -0400] proffalken: BryanWB: did you look at Knife Block in the end?
[2012-04-04 10:38:57 -0400] BryanWB: knife block?
[2012-04-04 10:39:08 -0400] BryanWB: |shad0w|: was latest ffs any better?
[2012-04-04 10:40:36 -0400] proffalken: BryanWB: yeah, I thought you were asking about it yesterday, maybe it was someone else
[2012-04-04 10:41:01 -0400] proffalken: 16:18 < BryanWB> proffalken: did u make or find a plugin for switching b/w  different chef servers?
[2012-04-04 10:41:04 -0400] proffalken: 16:19 < BryanWB> proffalken: i have an assistant now and want to make it easy  for him to switch b/w our dev and prod chef servers
[2012-04-04 10:41:10 -0400] proffalken: :D
[2012-04-04 10:45:17 -0400] BryanWB: proffalken: i looked at the link, but didn't remember thename
[2012-04-04 10:45:31 -0400] BryanWB: proffalken: gotta say that `block` isn't so intutitiv
[2012-04-04 10:45:39 -0400] proffalken: lol
[2012-04-04 10:45:40 -0400] BryanWB: how does it relate to swtiching chef-servers
[2012-04-04 10:45:42 -0400] BryanWB: ?
[2012-04-04 10:45:49 -0400] proffalken: because it's a place to store many "knives"
[2012-04-04 10:45:51 -0400] proffalken: :P
[2012-04-04 10:46:16 -0400] proffalken: s/and/at
[2012-04-04 10:46:19 -0400] BryanWB: ah, i am american, not sure we use that word for where we put knives
[2012-04-04 10:46:36 -0400] BryanWB: we always say 'knife rack' iirc
[2012-04-04 10:46:37 -0400] proffalken: BryanWB: oh, right, so would "knife body" be more appropriate? ;)
[2012-04-04 10:46:42 -0400] BryanWB: lol
[2012-04-04 10:47:12 -0400] BryanWB: how about `knife-drawer` :) a little less scary
[2012-04-04 10:47:27 -0400] proffalken: hmmm, I'll think about it,  not quite so snappy though imho
[2012-04-04 10:47:44 -0400] proffalken: and "knife rack " suggests to me that you can run a webserver on port 3000 from knife itself
[2012-04-04 10:47:50 -0400] BryanWB: lol as u wish ;)
[2012-04-04 10:47:50 -0400] proffalken: might be a bit misleading... ;)
[2012-04-04 10:48:43 -0400] proffalken: :P
[2012-04-04 10:50:41 -0400] BryanWB: |shad0w|: was audio any better on most recent ffs?
[2012-04-04 10:54:07 -0400] |shad0w|: haven't listened yet
[2012-04-04 10:54:32 -0400] proffalken: BryanWB: that's the Distro episode?
[2012-04-04 10:56:03 -0400] proffalken: if so, then yes, much better than previous episodes, still a little bit too much treble/hiss for me but as I couldn't do any better and I know what skype conference calls etc are like
[2012-04-04 10:56:08 -0400] proffalken: it's a big improvemenbt
[2012-04-04 10:59:39 -0400] BryanWB: proffalken: yes, tks. still need to get better headset which will improve things drastically
[2012-04-04 11:00:02 -0400] BryanWB: did u find distro talk interesting or irrelevant
[2012-04-04 12:15:49 -0400] jtgiri_: is there an easy way to rename data bag  ?
[2012-04-04 12:24:15 -0400] yfeldblum: jtgiri_, no - but just reupload it with a new name, and then delete the existing
[2012-04-04 12:24:36 -0400] jtgiri_: okay thanks
[2012-04-04 13:08:36 -0400] JanneL: hi. does someone know how to get knife-ec2 to connect to an instance that has been created inside a vpc subnet? bootstrapping gets stuck in connecting to sshd part
[2012-04-04 13:09:34 -0400] JanneL: is there a way to assign an eip to the instance or can knife connect through another instance or something?
[2012-04-04 13:39:27 -0400] yfeldblum: JanneL, not really, but you don't necessarily need to use `knife bootstrap` or `knife CLOUD server create` to do the bootstrap: you can create the server via other means, login to the console or login via SSH yourself and install ruby, rubygems, and chef, copy the validation key and any encrypted data bag keys, set up /etc/chef/client.rb, stick a run-list into /etc/chef/first-boot.json, and run `chef-client -j /etc/chef/first-boot
[2012-04-04 13:39:27 -0400] yfeldblum: .json`; or you can automate those steps yourself via some other process that knows how to deal with your particular datacenter or VPC subnet etc
[2012-04-04 13:49:05 -0400] JanneL: yfeldblum: I guess making a VPN connection to the VPC and running knife ec2 server create would do. :)
[2012-04-04 13:50:11 -0400] yfeldblum: JanneL, certainly could
[2012-04-04 13:51:35 -0400] JanneL: but it seems that the ec2 plugin itself does not provide the automation needed for example attaching a public elastic ip to the created instance.
[2012-04-04 13:58:30 -0400] jtimberman: JanneL: no, it doesn't. we do that with our aws cookbook's LWRP, elastic_ip.
[2012-04-04 13:58:34 -0400] jtimberman: http://ckbk.it/aws
[2012-04-04 14:08:43 -0400] JanneL: jtimberman: thanks
[2012-04-04 14:08:55 -0400] JanneL: I think I'll find that useful later on
[2012-04-04 14:19:06 -0400] rocket: has anyone gotten the chef server to run on a mac?
[2012-04-04 14:20:04 -0400] BryanWB: rocket: i have heard many on this channel try and fail
[2012-04-04 14:21:18 -0400] rocket: ok .. I was just curious .. of course I can setup a vm and use that ...
[2012-04-04 14:27:41 -0400] |shad0w|: challange accepted
[2012-04-04 14:27:56 -0400] |shad0w|: meh, challenge even
[2012-04-04 14:31:13 -0400] afallows: Yeah, I got chef-server running on a Mac, but that's because I did it in an Ubuntu VM
[2012-04-04 14:31:21 -0400] geekbri: If i've got a resource with an attribute declared like so......  attribute :config, :kind_of => Hash, why is it that I cannot use new_resource.config.each_pair on it ?
[2012-04-04 14:31:41 -0400] rocket: afallows: are you using vagrant etc with that?
[2012-04-04 14:32:19 -0400] afallows: rocket: No, it was a textbook install from the Opscode Wiki.
[2012-04-04 14:37:43 -0400] jtimberman: rocket: Are you intending to run your actual Chef Server for your infrastructure on a Mac, or be able to run the cucumber tests?
[2012-04-04 14:38:10 -0400] jtimberman: either way, yes, it will run on a Mac.
[2012-04-04 14:38:26 -0400] jtimberman: we don't have specific instructions for that other than the developer setup information in the readme.
[2012-04-04 14:38:52 -0400] rocket: jtimberman: I am trying to just build a test lab on my mac .. eg if I travel I want to be able to continue to easily do vagrant ups against a known chef server
[2012-04-04 14:39:14 -0400] rocket: I am trying to limit the vms due to it being an older core2duo...
[2012-04-04 14:46:29 -0400] rocket: jtimberman: do you have a link to that readme handy?  just so I know which one your referring to?
[2012-04-04 14:51:16 -0400] geekbri: jtimberman: if I were to pass in a hash to an LAWP as one of its attributes, is there a way I can extract that hash?  I'm having issues doing that since I want to merge that hash with another I have.  IE something like  results = new_resource.my_attribute.merge(some_other_hash),  For me this isn't working
[2012-04-04 14:51:44 -0400] geekbri: jtimberman: I can however access the keys  directly.  EG  new_resource.my_attribute['some_key'] works
[2012-04-04 14:53:57 -0400] jtimberman: rocket: the one here: https://github.com/opscode/chef/
[2012-04-04 14:54:03 -0400] jtimberman: not very complete i'm afraid.
[2012-04-04 14:59:46 -0400] fearoffish: jtimberman: maybe you should set up a kickstarter project called Chef.app, and ask for a bucket of money to set up something?  ;-)
[2012-04-04 15:03:31 -0400] jtimberman: fearoffish: i think when we have omnibus builds for chef-server, we'll just get that (though not specificall a .app).
[2012-04-04 15:03:43 -0400] fearoffish: jtimberman: that was a joke, sorry.
[2012-04-04 15:04:28 -0400] jtimberman: :)
[2012-04-04 15:04:35 -0400] jtimberman: Yes and I turned it aroudn!
[2012-04-04 15:11:31 -0400] afallows: Have any of you dealt with a recipe that establishes an SSH connection? I want to be able to force the "yes" when asked if I trust the RSA fingerprint of a remote device.
[2012-04-04 15:11:55 -0400] erratic: afallows knife ssh Im working on it right now
[2012-04-04 15:12:08 -0400] geekbri: afallows: you could just set the strict host key checking to no
[2012-04-04 15:12:15 -0400] erratic: right now Im trying to figure out how to deploy ssh keys for non key interactive auth
[2012-04-04 15:12:27 -0400] erratic: so I can just issue a command to all of my machines with knife ssh
[2012-04-04 15:12:38 -0400] erratic: or a group of them
[2012-04-04 15:12:38 -0400] afallows: geekbri: I've not done that before, could you tell me a little more?
[2012-04-04 15:13:11 -0400] erratic: wait you're saying you want to force a user to accept a public key
[2012-04-04 15:13:27 -0400] geekbri: afallows: are you familiar with ~/.ssh/config?  You can basically set per host or global (for your user) SSH settings there.  You could set for those hosts the option StrictHostKeyChecking no
[2012-04-04 15:13:50 -0400] afallows: erratic: My issue is that bootstrapping an EC2 node hangs waiting for manual (yes/no) on whether to trust github's RSA fingerprint
[2012-04-04 15:13:56 -0400] geekbri: afallows: of course, be aware that the purpose of that strict key checking is to help make you aware of potential man in the middle oattacks.
[2012-04-04 15:14:33 -0400] geekbri: afallows: you can also, if you dont want to set it in your config file, pass it as a command line option to SSH with -o
[2012-04-04 15:14:39 -0400] afallows: geekbri: I know. I don't want to make it a global thing, I just want to enfore a yes the first time I connect to a specific host.
[2012-04-04 15:15:07 -0400] erratic: geekbri my thoughts on how you should deal with that are you should use the chef-users cookbook to deploy to the the authorized_hosts file
[2012-04-04 15:15:25 -0400] geekbri: erratic: yes, that is also a good way to do it as well
[2012-04-04 15:15:26 -0400] erratic: Im trying to figure out how to deploy id_rsa/dsa right now
[2012-04-04 15:15:49 -0400] geekbri: get the fingerprint before hand and append it to known_hosts
[2012-04-04 15:15:52 -0400] afallows: Actually - would I be able to just pass the node a known_hosts file?
[2012-04-04 15:16:40 -0400] erratic: should, like as a databag or something ?
[2012-04-04 15:16:47 -0400] erratic: I have no idea how to get it to work.
[2012-04-04 15:16:56 -0400] erratic: someone was like OH yeah just use this
[2012-04-04 15:17:23 -0400] erratic: they said something about dont use the blada blada blah version
[2012-04-04 15:17:27 -0400] erratic: use the vendor version
[2012-04-04 15:17:34 -0400] erratic: but I have no idea about that either
[2012-04-04 15:17:44 -0400] geekbri: Im not sure I follow what you are asking or saying :)
[2012-04-04 15:18:46 -0400] erratic: geekbri the question mark was in regards to I am not sure whether you would put said authorized key or id_rsa/dsa in a databag but it seems like based on what I was told yesterday thats the way to do it
[2012-04-04 15:19:24 -0400] geekbri: erratic: authorized keys is to allow a key pair to SSH to a user, I believe what afallows wants is just for the public identity of a server to be added to known_hosts
[2012-04-04 15:19:38 -0400] erratic: fine
[2012-04-04 15:19:39 -0400] erratic: known hosts
[2012-04-04 15:19:41 -0400] erratic: authorized keys
[2012-04-04 15:19:42 -0400] erratic: whatever
[2012-04-04 15:19:47 -0400] erratic: shits all the same to me
[2012-04-04 15:19:54 -0400] geekbri: ooff, thats a pretty important difference!
[2012-04-04 15:20:01 -0400] erratic: hey
[2012-04-04 15:20:20 -0400] erratic: even if I did remember the difference
[2012-04-04 15:20:40 -0400] erratic: I still wouldn't understand rsa/dsa or aes or any crypto stuff well enough to justify its existence
[2012-04-04 15:20:47 -0400] geekbri: You could add a users public key to a databag and append it to their authorized_keys file though if you wanted to provide them access to their account with keys.  We actually rolled our own user management cookbook here for such a thing, which should hopefully be open sourced very soon.
[2012-04-04 15:21:09 -0400] geekbri: erratic: you dont need to understand the algorithm of how the keys are generated for them to be useful...
[2012-04-04 15:21:37 -0400] erratic: I can't trust it either because I dont understand it
[2012-04-04 15:22:13 -0400] geekbri: ok.
[2012-04-04 15:22:43 -0400] erratic: I mean I pretend to
[2012-04-04 15:22:48 -0400] erratic: I take everyones word for it
[2012-04-04 15:23:03 -0400] erratic: and I use it all over the place
[2012-04-04 15:23:46 -0400] afallows: So, for simplicity's sake I decided to take the known hosts that matter for the nodes I'll be bootstrapping and cookbook_file it over before I establish a connection.
[2012-04-04 15:24:36 -0400] geekbri: afallows: sure that works.
[2012-04-04 15:25:58 -0400] afallows: Time to bootstrap another test node and see what we get.
[2012-04-04 15:59:49 -0400] erratic: afallows I think thats what I'll do too
[2012-04-04 16:01:02 -0400] afallows: It worked pretty cleanly for me. And I think it's pretty safe against unexpected things. IF something changes about the hosts it won't accidentally connect to a stranger, but it can cleanly connect the same way my machine does.
[2012-04-04 16:51:19 -0400] ssd7: Ohai Chefs
[2012-04-04 16:51:53 -0400] c_t: ohai
[2012-04-04 16:57:27 -0400] afallows: Anyone use knife-ec2 regularly? Is there a simple way to have the node come into place with a run-list already set? I know I can use the -r flag to give it an on-bootstrap run-list, but is there a way to save that list to the node?
[2012-04-04 16:59:11 -0400] hoover_damm: knife ec2 server create --node-name doesn't work?
[2012-04-04 17:00:19 -0400] Brad_K: afallows: that initial run-list will have its results saved to the node at the end of the run, and unless you take any particular unusual action to explicitly change the run-list, that run-list should persist from thereon.
[2012-04-04 17:01:37 -0400] miah: afallows: --run-list
[2012-04-04 17:02:27 -0400] afallows: Brad_K: I've had nodes run through the run-list and not retain the run-list. In hindsight, it may only have been nodes whose chef-client runs hit errors that did so.
[2012-04-04 17:02:47 -0400] hoover_damm: afallows, the runlist is not saved until node.save occurs at the end of the chef-client run
[2012-04-04 17:02:52 -0400] hoover_damm: afallows, as your nodes errored out
[2012-04-04 17:02:55 -0400] hoover_damm: they did not save
[2012-04-04 17:02:56 -0400] Brad_K: afallows: correct.  if the initial chef run does not complete, then the node won't be saved.
[2012-04-04 17:03:10 -0400] afallows: That's probably what I've experienced, then.
[2012-04-04 17:03:12 -0400] afallows: Thanks guys.
[2012-04-04 17:03:12 -0400] hoover_damm: afallows, you can re-bootstrap the instance
[2012-04-04 17:03:16 -0400] hoover_damm: or run on the instance
[2012-04-04 17:03:25 -0400] hoover_damm: chef-client -j /etc/chef/first-run.json -E <environment>
[2012-04-04 17:03:33 -0400] hoover_damm: replace <environment> with what you are setting
[2012-04-04 17:03:44 -0400] hoover_damm: or just rebootstrap
[2012-04-04 17:04:26 -0400] Brad_K: if the nodes in question are in the cloud (e.g., ec2), it might be easier to just blow them away and create new ones that work correctly.
[2012-04-04 17:05:20 -0400] afallows: Brad_K: Yeah, I've been doing that as I test, just killing them and re-running knife ec2 server create.
[2012-04-04 17:07:24 -0400] Brad_K: on the other hand, blowing them away and re-creating may not help you understand what failed or why, and it might take you longer to figure out what is going on.  you need to look at the situation you're in and decide whether it's better to try to salvage what got partially done and how much work it will take to get it to 100% versus what it will take to re-create.
[2012-04-04 17:07:47 -0400] Brad_K: and be careful when re-creating nodes with the same name as old nodes.  that one has bitten me a few times.
[2012-04-04 17:08:58 -0400] afallows: Right now I'm making them anonymous (without -N, allowing AWS to give them random names). I'm looking at what fails each time to learn as much as I can from it.
[2012-04-04 17:10:30 -0400] hoover_damm: well cleaning up as you go, kind of lead's to a easy life
[2012-04-04 17:10:46 -0400] hoover_damm: terminate instances when you don't need them.  When you terminate you should delete the node and client entry if you are no longer needing that instance
[2012-04-04 17:10:57 -0400] hoover_damm: so they don't appear in search indexes and haunt you later on
[2012-04-04 17:11:18 -0400] hoover_damm: and it saves money too if you pay for hosted
[2012-04-04 17:11:22 -0400] Brad_K: you'll want to clear your ssh known-hosts file, too.
[2012-04-04 17:11:49 -0400] Brad_K: and update your DNS, if you're having the machines auto-register themselves.
[2012-04-04 17:12:29 -0400] afallows: Brad_K: DNS hasn't been an issue thus far, these nodes are being created in a VPC and everything is done by IP.
[2012-04-04 17:12:37 -0400] jtimberman: eh, i leave em in ~/.ssh/known_hosts  :)
[2012-04-04 17:13:12 -0400] afallows: That said, I'm also a co-op and my company, so I'm doing what I'm instructed re: AWS
[2012-04-04 17:13:13 -0400] Brad_K: the IP addresses that get assigned will get re-used.  then you'll have ssh bitch at you when you try to access a new node with the same IP address as an old node.  that's annoying.
[2012-04-04 17:13:19 -0400] hoover_damm: knife cookbook install ssh_known_hosts
[2012-04-04 17:13:21 -0400] hoover_damm: apply locally
[2012-04-04 17:13:23 -0400] hoover_damm: stop whining
[2012-04-04 17:13:38 -0400] hoover_damm: I realize not everyone thought of that
[2012-04-04 17:13:51 -0400] hoover_damm: but tie that in with a ssh config generator so your node names match
[2012-04-04 17:14:00 -0400] Brad_K: afallows: just keep these tips in mind for the future.  you may not run into these problems now, but you can avoid some pain later.
[2012-04-04 17:14:11 -0400] hoover_damm: then you just need to knife sshgen -w after you bootstrap, run chef-client to ensure ssh_known_hosts is right
[2012-04-04 17:14:14 -0400] hoover_damm: and ssh into the instance
[2012-04-04 17:14:15 -0400] hoover_damm: and win
[2012-04-04 17:14:15 -0400] drrk: hey Brad_K
[2012-04-04 17:14:16 -0400] jtimberman: and then i have
[2012-04-04 17:14:17 -0400] jtimberman: Host ec2*compute-1.amazonaws.com StrictHostKeyChecking no
[2012-04-04 17:14:22 -0400] jtimberman: in my .ssh/config
[2012-04-04 17:14:24 -0400] hoover_damm: yeah that's wrong
[2012-04-04 17:14:27 -0400] hoover_damm: I do it too
[2012-04-04 17:14:30 -0400] hoover_damm: it's horrible
[2012-04-04 17:14:36 -0400] Brad_K: drrk: hey!
[2012-04-04 17:14:53 -0400] drrk: are you back in the US now?
[2012-04-04 17:14:56 -0400] Brad_K: drrk: are all the slides up yet?  ;-)
[2012-04-04 17:15:03 -0400] hoover_damm: jtimberman, well do you use get-console to know that the key is allright? or do you just assume?
[2012-04-04 17:15:10 -0400] Brad_K: drrk: yup.  still recovering from the trip, but i'm back in Austin.
[2012-04-04 17:15:11 -0400] jtimberman: i don't care.
[2012-04-04 17:15:15 -0400] hoover_damm: right, I do
[2012-04-04 17:15:21 -0400] jtimberman: anything i do in ec2 is testing
[2012-04-04 17:15:29 -0400] hoover_damm: right
[2012-04-04 17:15:31 -0400] drrk: Brad_K: no, they are not up yet, i've been totally unoorganised
[2012-04-04 17:15:34 -0400] hoover_damm: for some clients it's production
[2012-04-04 17:16:03 -0400] Brad_K: drrk: i figured you'd be pretty overwhelmed.
[2012-04-04 17:16:24 -0400] hoover_damm: basically ssh on the cloud is meh, you generate a new host rsa key on each new instance
[2012-04-04 17:16:44 -0400] hoover_damm: there's nothing from stopping you from having a user-data script to install your host rsa key
[2012-04-04 17:16:48 -0400] hoover_damm: so you know what your key should be
[2012-04-04 17:17:00 -0400] hoover_damm: because waiting 5 minutes to get-console is silly
[2012-04-04 17:17:21 -0400] Brad_K: jtimberman is welcome to manage his ssh configuration however he chooses, but i personally could never go that direction.  i guess i'm just a little too OCD for that.
[2012-04-04 17:17:30 -0400] hoover_damm: jtimberman, I really don't know a proper solutin as the cloud isn't kind in this regard
[2012-04-04 17:17:37 -0400] hoover_damm: jtimberman, but I find doing it painful
[2012-04-04 17:17:55 -0400] Brad_K: PKI is  non-trivial.
[2012-04-04 17:18:07 -0400] hoover_damm: yup
[2012-04-04 17:18:27 -0400] Brad_K: you trade one set of problems for another set of problems.
[2012-04-04 17:18:35 -0400] drrk: Brad_K: yeah and I had a trip to London over the last weekend too
[2012-04-04 17:19:12 -0400] drrk: still, project is going well, and $BOSS was asking who to contact for training
[2012-04-04 17:21:47 -0400] jtimberman: security and convenience are often orthogonal :)
[2012-04-04 17:26:29 -0400] hoover_damm: jtimberman, indeed
[2012-04-04 17:31:03 -0400] jtimberman: people get grumpily pedantic when i say they're mutually exclusive.
[2012-04-04 17:32:00 -0400] geekbri: I would like to see somebody make the argument that secure things are more convenient than insecure ones.
[2012-04-04 17:32:12 -0400] geekbri: successfully that is.
[2012-04-04 17:33:11 -0400] brandoma: well people who are in love with creating procedure rather than experiencing procedure will make that argument (poorly) every time
[2012-04-04 17:33:19 -0400] brandoma: but they will believe they have successfully made it
[2012-04-04 17:33:24 -0400] brandoma: and thus the cycle continues
[2012-04-04 17:33:29 -0400] geekbri: its a vicious cycle ;)
[2012-04-04 17:34:14 -0400] brandoma: more like a downward spiral
[2012-04-04 17:34:17 -0400] brandoma: hehe
[2012-04-04 17:34:38 -0400] geekbri: Lets not make security better, lets make people nicer ! ;)
[2012-04-04 17:34:56 -0400] brandoma: dont worry its nothing that cant be 'fixed' by heaps of itil
[2012-04-04 17:36:15 -0400] geekbri: Just remove your wireless cards and fill your ethernet and usb ports with cement. security problem solved.
[2012-04-04 17:36:53 -0400] brandoma: youre forgetting about tempest
[2012-04-04 17:37:04 -0400] brandoma: so you might was well just rip that screen outta there
[2012-04-04 17:37:41 -0400] geekbri: Works for me!
[2012-04-04 17:44:03 -0400] chip-: Stupid hosted chef question: One of my users lost his client.pem and needs to regenerate. Where can he do that?
[2012-04-04 17:44:11 -0400] chip-: I can't find the option.
[2012-04-04 17:46:03 -0400] jtimberman: chip-: http://community.opscode.com/users/USERNAME/user_key/new
[2012-04-04 17:46:50 -0400] chip-: jtimberman: thanks
[2012-04-04 17:48:16 -0400] tortoise_: So I am curious, I am currently setting up Nagios to work with our chefized nodes and was interested in having the checks integrated with the cookbooks, so for instance if you have a mail server, the mail server recipe will automatically setup and configure smtp related checks.. I haven't been able to find any documentation that outlines very well the process for this and was wondering if there were additional resources that pe
[2012-04-04 17:48:16 -0400] tortoise_: rhaps I wasn't familiar with?
[2012-04-04 17:48:37 -0400] chip-: Hm. not working when the user's name is substituted for USERNAME
[2012-04-04 17:48:39 -0400] chip-: trailing slash?
[2012-04-04 17:50:19 -0400] chip-: tortoise_: Check out the nagios cookbook, it automates a lot of that with search.
[2012-04-04 17:52:12 -0400] hoover_damm: hrm, stupid issue... and i'm clearly getting this wrong
[2012-04-04 17:52:13 -0400] hoover_damm: default[:collectd][:version] = "5.1.0"
[2012-04-04 17:52:14 -0400] hoover_damm: default[:collectd][:release_uri] = "http://collectd.org/files/collectd-:version:.tar.bz2"
[2012-04-04 17:52:23 -0400] hoover_damm: I could have sworn this was valid syntax
[2012-04-04 17:52:26 -0400] hoover_damm: but i'm wrong
[2012-04-04 17:52:40 -0400] hoover_damm: because it's trying to fetch collectd.org/files/collectd-:version: actually
[2012-04-04 17:53:01 -0400] hoover_damm: my google-fu is off on this, jtimberman or someone help me with my confusion?
[2012-04-04 17:53:51 -0400] chip-: (actually it automates everything with search, including node discovery, and integrates with the user cookbook too for contacts)
[2012-04-04 17:58:09 -0400] jkyle: I'm having issues where knife search and search(:node, 'query') are not returning valid results
[2012-04-04 17:58:44 -0400] jkyle: e.g., knife node show foo.com outputs a run_list that includes roles A and B, but the query knife search node "role:A AND role:B" does not return any results
[2012-04-04 18:00:57 -0400] chip-: jkyle: check chef-solr & chef-expander processes
[2012-04-04 18:05:01 -0400] |shad0w|: jkyle, try roles instead of role
[2012-04-04 18:05:14 -0400] jkyle: just caught that myself
[2012-04-04 18:05:21 -0400] jkyle: s/role/roles/ fixed it
[2012-04-04 18:05:44 -0400] jkyle: git commit /path/to/recipe/default.rb -m "roles foo, roles"
[2012-04-04 18:08:40 -0400] jkyle: was there an api change or anything? found a lot of role: queries in the repo
[2012-04-04 18:09:18 -0400] jkyle: ok, wait, sometimes role matches sometimes it doesn't...what's going on?
[2012-04-04 18:10:47 -0400] jkyle: from what I can tell, 'role' queries only search the unexpanded run_list
[2012-04-04 18:10:59 -0400] jkyle: roles searches the expanded runlist
[2012-04-04 18:11:18 -0400] |shad0w|: role is whats in run_list iirc, roles are any roles that actually ran on the client
[2012-04-04 18:11:25 -0400] |shad0w|: IE a role might include another role, etc etc
[2012-04-04 18:11:33 -0400] |shad0w|: beat me to it
[2012-04-04 18:12:43 -0400] newb__: INFO: Processing gem_package[chef-server-api] action install (chef-server::rubygems-install line 89) NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01. Gem.source_index called from /opt/ruby/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/provider/package/rubygems.rb:203. NOTE: Gem::SourceIndex#search is deprecated with no replacement. It will be removed on or after 2011-11-01. Gem::Source
[2012-04-04 18:12:46 -0400] newb__: should this happen?
[2012-04-04 18:13:16 -0400] erratic: yeah inhertience can be cool until you have two mutual run list items that have different corresponding json overrides
[2012-04-04 18:13:17 -0400] tortoise_: chip- you talking about the fast / quick start nagios cookbook?
[2012-04-04 18:13:30 -0400] dyer: Question, when bootstrapping, or provisioning (e.g. ec2 server create ), an instance is there any flag/parameter one can pass to specify which data bag secret is sent to the instance ?
[2012-04-04 18:29:53 -0400] erratic: PuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTYPuTTY
[2012-04-04 18:35:30 -0400] hoover_damm: dyer, pass them with user-data?
[2012-04-04 18:35:38 -0400] hoover_damm: are you even using user-data?
[2012-04-04 18:35:47 -0400] dyer: I am not
[2012-04-04 18:35:52 -0400] dyer: but I suppose I could be
[2012-04-04 18:36:05 -0400] hoover_damm: although the bootstrap supports it
[2012-04-04 18:36:29 -0400] hoover_damm: <% if @chef_config[:encrypted_data_bag_secret] -%>
[2012-04-04 18:36:34 -0400] hoover_damm: so likely as long as the secret is provided
[2012-04-04 18:36:36 -0400] hoover_damm: it should work
[2012-04-04 18:37:10 -0400] hoover_damm: prolly configure it in .chef/knife.rb
[2012-04-04 18:37:11 -0400] hoover_damm: and win
[2012-04-04 18:37:25 -0400] dyer: well my problem is I have different secrets for different env's
[2012-04-04 18:37:50 -0400] dyer: guess I could have different knife.rb's but that just seems honky
[2012-04-04 18:39:43 -0400] hoover_damm: dyer, dunno why knife doesn't let you set it on the command line
[2012-04-04 18:39:52 -0400] hoover_damm: dyer, short of what I mentioned, user-data
[2012-04-04 18:40:06 -0400] hoover_damm: dyer, most ami's built will wget the user-data and just run it as is
[2012-04-04 18:40:09 -0400] dyer: yea, I have read a ton about user-data just never used it
[2012-04-04 18:40:13 -0400] hoover_damm: dyer, so you can make the user-data do wth ever
[2012-04-04 18:40:25 -0400] dyer: right on, do you know if the amazon aim's support it
[2012-04-04 18:40:30 -0400] hoover_damm: should
[2012-04-04 18:40:31 -0400] dyer: s/aim/ami
[2012-04-04 18:40:49 -0400] hoover_damm: as the whole user-data and ssh-key is all half-ass on amazon
[2012-04-04 18:40:54 -0400] hoover_damm: you have to verify the AMI your using supports it
[2012-04-04 18:41:10 -0400] hoover_damm: generally it's in the local.start or rc.conf.d
[2012-04-04 18:41:12 -0400] dyer: any good "hello world" type user data tutorial ?
[2012-04-04 18:41:13 -0400] dyer: ah ok
[2012-04-04 18:41:29 -0400] hoover_damm: mine is https://github.com/damm/ec2-init
[2012-04-04 18:41:31 -0400] hoover_damm: for example
[2012-04-04 18:41:46 -0400] hoover_damm: I use gentoo, primarily so these are in that set
[2012-04-04 18:42:07 -0400] hoover_damm: https://github.com/damm/ec2-init/blob/master/01-ec2-openssh-keys.start#L11
[2012-04-04 18:42:16 -0400] hoover_damm: most people are using wget for some reason
[2012-04-04 18:42:22 -0400] hoover_damm: so search for similar in /etc with wget
[2012-04-04 18:42:54 -0400] hoover_damm: but the whole ssh key / user-data is all through the meta-data point... it's all 'if you implement it'
[2012-04-04 18:43:02 -0400] hoover_damm: you are not required to
[2012-04-04 18:43:06 -0400] hoover_damm: but amazon should
[2012-04-04 18:43:22 -0400] hoover_damm: and your user-data script can be anything including a bootstrap template
[2012-04-04 18:43:25 -0400] hoover_damm: or a kickstart file
[2012-04-04 18:43:35 -0400] hoover_damm: remember it's just curl $user_data | sh -
[2012-04-04 18:46:38 -0400] statix: Does the chef client have a built-in capability to avoid run multiple times at once? Say you ran the client every 5 minutes, and the first run ran for 10 minutes, would the second run know that?
[2012-04-04 18:49:31 -0400] tortoise_: Does it make sense to have nagios checks associated with other recipes that you install? or is there a more efficent method of handling this, like as stated above, if you have a Postfix Recipe, define in an  attribute somewhere the nagios check for SMTP, and when postfix is installed that nagios check is automatically installed on any magine that runs that recipe
[2012-04-04 18:50:53 -0400] dyer: statix, not sure if there is some built in mechanism for that but I image a lock wouldn't be difficult to implement
[2012-04-04 18:51:10 -0400] dyer: damn, can't spell today.. s/image/imagine
[2012-04-04 18:51:43 -0400] jtimberman: statix: not built in
[2012-04-04 18:52:40 -0400] dyer: jtimberman, thanks for the confirmation :)
[2012-04-04 18:53:10 -0400] statix: Alright, thanks
[2012-04-04 18:53:27 -0400] dyer: hoover_damm, confirmed it works in the "amazon" ami
[2012-04-04 18:54:51 -0400] hoover_damm: dyer, yeah it works, provided the startup script is there
[2012-04-04 18:54:53 -0400] hoover_damm: dyer, it should work
[2012-04-04 18:59:30 -0400] afallows: So, in a recipe I'm writing, I need to make sure a file exists on the node (clone/pull the repo it belongs to), read the content of a file on the node, store the value I read, and later use that value. Since the file might not exist when the recipe starts, I can't just throw extra ruby in. Right now, I'm using a ruby_block, but I can't figure out how to set a variable from within a ruby_block and have the change reflect in a later chef block.
[2012-04-04 19:05:57 -0400] miah: build a ohai rule that sets an attribute based on the contents of that file if it exists
[2012-04-04 19:06:04 -0400] miah: then you can just query that data from inside the recipe
[2012-04-04 19:09:28 -0400] jtgiri_: hey guys, for some reason data bag searching is not returning any results  : knife search users "id:jgiri"
[2012-04-04 19:09:28 -0400] jtgiri_: 0 items found
[2012-04-04 19:10:22 -0400] jtgiri_: knife data bag show users jgiri | grep id id:        jgiri
[2012-04-04 19:25:24 -0400] Kwanasolis: jtimberman: you there?
[2012-04-04 19:26:24 -0400] sascha_d: I have a request/requirement that chef be able to pull erb template files from someplace other than cookbooks.  Is that crazy talk?
[2012-04-04 19:27:01 -0400] Brad_K: sascha_d: where would you pull them from?
[2012-04-04 19:27:38 -0400] sascha_d: They want to have files pre-existing in another subversion repo
[2012-04-04 19:28:18 -0400] sascha_d: I'm not sure that chef could look at files already laid down on a server and process the erb templating
[2012-04-04 19:28:34 -0400] Brad_K: i could see a cookbook that checked them out and put them into the same shared /var/chef/cache subdirectory where they would normally be stored on the local machine and then processing them from there.
[2012-04-04 19:28:59 -0400] Brad_K: you just need to make sure you can give it the right path to the location of the template file.
[2012-04-04 19:29:27 -0400] Brad_K: otherwise, chef will try to follow the search path that is set up and probably won't find the templates you're looking for.
[2012-04-04 19:29:54 -0400] tarrant: I have an attribute that I need to assign to a group of boxes. Is there an easy way to assign it to all of them at once?
[2012-04-04 19:32:20 -0400] Brad_K: tarrant: "knife exec" could be used to set attributes.  you could combine that with a "knife search" to identify the machines that need to have the particular attributes set.
[2012-04-04 19:32:57 -0400] Brad_K: tarrant: see http://wiki.opscode.com/display/chef/Knife+Exec
[2012-04-04 19:32:57 -0400] tarrant: Thanks I'll use that as a starting point for my research.
[2012-04-04 19:33:39 -0400] terryjfundak_: Sorry for this noise on the channelcan anyone point me to directions to getting this irc channel working on an iPhone/iPad using Colloguy or a different recommendation.
[2012-04-04 19:34:00 -0400] Brad_K: any irc client should work.
[2012-04-04 19:34:02 -0400] newb__: INFO: Processing gem_package[chef-server-api] action install (chef-server::rubygems-install line 89) NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01. Gem.source_index called from /opt/ruby/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/provider/package/rubygems.rb:203. NOTE: Gem::SourceIndex#search is deprecated with no replacement. It will be removed on or after 2011-11-01
[2012-04-04 19:34:03 -0400] newb__: should this happen?
[2012-04-04 19:34:51 -0400] newb__: using ruby 1.9.2 and latest gems
[2012-04-04 19:35:03 -0400] erratic: chef reminds me of gentoo portage / emerge in terms of how you can manage distribution and large sets
[2012-04-04 19:35:06 -0400] sascha_d: oil, there's actually a local attribute for templates
[2012-04-04 19:35:10 -0400] erratic: totally awesome
[2012-04-04 19:35:21 -0400] erratic: I'm satisfied my chef environment is complete
[2012-04-04 19:35:24 -0400] sascha_d: I mean, oic, but Textual was 'helping me'
[2012-04-04 19:35:28 -0400] erratic: for now
[2012-04-04 19:35:56 -0400] Brad_K: newb__: i believe that issue is resolved in Master for inclusion in chef 0.10.10, but i'm looking for the specific jira ticket.
[2012-04-04 19:35:57 -0400] erratic: I'll try to write a blog post soon
[2012-04-04 19:37:00 -0400] Brad_K: newb__: check http://tickets.opscode.com/browse/CHEF-2328
[2012-04-04 19:37:18 -0400] newb__: thanks Brad_K, is there a specific git issue or jira ticket I could read up on to follow up?
[2012-04-04 19:37:27 -0400] newb__: awesome
[2012-04-04 19:44:34 -0400] Brad_K: terryjfundak: Click the "+" button to add a new connection.  enter "irc.freenode.net" as the "Address".  Select "Join Rooms", then enter "#chef" as the room to join.  Fill in the rest of the information as appropriate (with your name, your username, etc).  I've never used Colloquy before, but in the last minute I have bought it, downloaded it, and logged into this irc chat room using these methods.
[2012-04-04 19:45:32 -0400] frobert: This is about as simple as it gets.
[2012-04-04 19:52:43 -0400] terryjfundak_: thank Brad_K, I'm off to talk to Sprint tech support. perhaps there are blocking. thanx for testing it for me..What carrier are you using and/or WiFi on?
[2012-04-04 19:53:23 -0400] Brad_K: terryjfundak_: on the local wifi connection here at the office.  let me turn that off and i'll try again.
[2012-04-04 19:54:21 -0400] Brad_K: terryjfundak_: looks like AT&T also blocks irc.
[2012-04-04 19:55:18 -0400] terryjfundak_: Brad_K - OK thanx for the confirmation .. I'm on my own WiFi. checking firewall...
[2012-04-04 19:55:49 -0400] Brad_K_: Yup. AT&T also blocks irc, because wifi is working fine.
[2012-04-04 20:03:59 -0400] terryjfundak_: thank Brad_K and sorry for the channel noise.. My Firewall was blocking. I'm good now via WiFi Thanx for the troubleshooting and sound for the channel noise.back to chef
[2012-04-04 20:40:35 -0400] hoover_damm: with debian and chef, how to you get around the 'apt' issues where it wants a prompt to update /etc/defaults/$package?
[2012-04-04 20:40:52 -0400] hoover_damm: I'm having to convert a recipe away from using debian packages because using the debian package makes the whole cookbook not idempotent
[2012-04-04 20:41:03 -0400] hoover_damm: pretty annoying
[2012-04-04 20:41:10 -0400] hoover_damm: run chef-client the first time, win, run it again... error 100
[2012-04-04 20:41:19 -0400] hoover_damm: all because I modified /etc/default/$package
[2012-04-04 20:41:56 -0400] hoover_damm: so honestly, how can I get around this silliness?
[2012-04-04 20:42:18 -0400] hoover_damm: the idea of having to not use the jenkins cookbook because apt wants to update /etc/default/jenkins
[2012-04-04 20:42:21 -0400] hoover_damm: is really stupid
[2012-04-04 20:42:50 -0400] hoover_damm: https://gist.github.com/7bb7fe3dfe99a5f9c2bd
[2012-04-04 20:42:58 -0400] hoover_damm: gotta love it when apt is wedged that hard
[2012-04-04 20:43:05 -0400] hoover_damm: can't do squat until you tell it yay or nay
[2012-04-04 20:47:22 -0400] |shad0w|: ecf blows
[2012-04-04 20:52:09 -0400] |shad0w|: s/ecf/ucf/
[2012-04-04 20:52:51 -0400] bhunter: hey all... I think I know the answer - but is running chef-client over cygwin sshd (to windows) a supported mode of operation - or must I go with knife-windows ssh to cmd.exe or  use winrm?
[2012-04-04 20:53:45 -0400] |shad0w|: hoover_damm, you could probably just purge it from ucf
[2012-04-04 20:55:56 -0400] hoover_damm: |shad0w|, anything in chef to setup the ucf?
[2012-04-04 20:56:23 -0400] hoover_damm: because truthfully, that's the stupidest reason to have configuration management shoot you in the foot
[2012-04-04 20:56:28 -0400] hoover_damm: or disable ucf completely
[2012-04-04 20:56:55 -0400] |shad0w|: pick an OS that is less opinionated :P
[2012-04-04 20:57:33 -0400] |shad0w|: ucf --purge, not sure if you want to walk the ucf dir and purge everything it has
[2012-04-04 20:57:50 -0400] |shad0w|: and I'm not sure if updating the package will just add it back
[2012-04-04 21:00:17 -0400] hoover_damm: or don't use the deb to install jenkins
[2012-04-04 21:00:26 -0400] hoover_damm: gosh at this point I almost should publish this jenkins fork
[2012-04-04 21:00:27 -0400] hoover_damm: :(
[2012-04-04 21:00:29 -0400] hoover_damm: I don't wanna
[2012-04-04 21:01:34 -0400] hoover_damm: |shad0w|, thank you for the information it's been very valuable :)
[2012-04-04 21:03:24 -0400] |shad0w|: I also don't think you can default ucf interaction with DEBIAN_PRIORITY env settings
[2012-04-04 21:03:27 -0400] |shad0w|: which is super annoying
[2012-04-04 21:03:59 -0400] hoover_damm: yeah it's just easier to convert the jenkins cookbook to not use the deb
[2012-04-04 21:08:26 -0400] hoover_damm: i'll try to get ucf to ignore it but likely won't work the way i want
[2012-04-04 21:09:55 -0400] newb__: How do I make the "chef-solr-installer" look into /opt/myruby/bin as well?
[2012-04-04 21:10:00 -0400] newb__: https://gist.github.com/2305696
[2012-04-04 21:10:23 -0400] newb__: Paths '/usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /sbin /bin' are harcoded
[2012-04-04 21:18:23 -0400] bhunter: bhunter: yeah, chef-client works fine over cygwin ssh :/
[2012-04-04 21:23:25 -0400] jtimberman: bhunter: while i don't personally like cygwin, thats kind of awesome :)
[2012-04-04 21:25:48 -0400] ryan-eme: are you doing that to avoid winrm?
[2012-04-04 21:26:13 -0400] bhunter: sort of, yes.. should I learn to love winrm?
[2012-04-04 21:26:18 -0400] ryan-eme: probably not
[2012-04-04 21:26:52 -0400] ryan-eme: at least cygwin might let you use a pubkey for auth like on your linux boxes
[2012-04-04 21:27:03 -0400] bhunter: I like bash, and like ssh.   cygwin.. /cygdrive/c is kinda confusing
[2012-04-04 21:27:35 -0400] bhunter: yes, and plus I don't have to install knife-windows on "all" my workstations
[2012-04-04 21:29:31 -0400] bhunter: kinda off topic, does knife ssh give me ways to process all the various exit codes from my calls?
[2012-04-04 21:29:55 -0400] bhunter: If any one returns non-zero, it might be significant
[2012-04-04 21:33:12 -0400] dwhsix: is there any way to determine what version of a given cookbook was last applied to a node?
[2012-04-04 21:35:58 -0400] ryan-eme: bhunter: you could use net-multi-ssh for your calls instead and do what you like with the exit codes
[2012-04-04 21:36:16 -0400] hoover_damm: look on the local cache?
[2012-04-04 21:36:21 -0400] hoover_damm: in /var/chef/cache
[2012-04-04 21:37:27 -0400] dwhsix: well, that's what I was doing sounds like that's the right thing
[2012-04-04 21:37:55 -0400] jdeamattson: Anyone know of a good example of using the deploy resource?
[2012-04-04 21:38:00 -0400] hoover_damm: dwhsix, that is the easiest wa i know
[2012-04-04 21:38:10 -0400] hoover_damm: jdeamattson, application cookbook
[2012-04-04 21:38:21 -0400] jdeamattson: Ah. Ok. Thanks hoover_damm
[2012-04-04 21:38:23 -0400] dwhsix: hoover_damm: and maybe the only?
[2012-04-04 21:38:27 -0400] hoover_damm: jdeamattson, or the wiki
[2012-04-04 21:39:11 -0400] jdeamattson: Where on the Wiki is there a good example? There is the page, but it doesn't show a full example that I am aware of...
[2012-04-04 21:39:26 -0400] hoover_damm: dwhsix, you can check knife node -l
[2012-04-04 21:39:48 -0400] hoover_damm: jdeamattson, it does on the deploy page.  also the opscode application cookbook has examples in each cookbook
[2012-04-04 21:39:51 -0400] hoover_damm: that should work
[2012-04-04 21:40:24 -0400] newb__: A recipe I am using to install chef, sets the path explicitly for Chef::Provider::Execute
[2012-04-04 21:40:24 -0400] newb__: That path does not have the binary it needs to execute
[2012-04-04 21:40:30 -0400] newb__: How do I add to the path WITHOUT modifying the recipe?
[2012-04-04 21:40:33 -0400] newb__: https://gist.github.com/2305696
[2012-04-04 21:40:47 -0400] hoover_damm: jdeamattson, it might make your life easier to read over the README of the application cookbook and follow the pattern (and use the cookbook as is).
[2012-04-04 21:41:29 -0400] dwhsix: hoover_damm: thta doesn't seem to tell me cookbook versions, unless I'm missing something...
[2012-04-04 21:42:12 -0400] hoover_damm: dwhsix, I had a thought it might... but i'm not sure where I got that thought from
[2012-04-04 21:42:29 -0400] dwhsix: hoover_damm: np, I appreciate suggestions
[2012-04-04 21:43:18 -0400] hoover_damm: after using a 'modern version' of chef, I kinda actually want to set HEAD to my cookbook or specify a version
[2012-04-04 21:43:22 -0400] hoover_damm: so it's more 'terse'
[2012-04-04 21:44:07 -0400] jdeamattson: hoover_damm: Sounds like excellent suggestions. As always, appreciate it.
[2012-04-04 21:44:09 -0400] hoover_damm: that way I can pin runlists in environments in test to HEAD and production to whatever is stable
[2012-04-04 21:53:16 -0400] tarrant: google is failing me. How can I list cookbooks via knife exec?
[2012-04-04 21:54:24 -0400] tarrant: api.get("cookbooks")
[2012-04-04 21:56:51 -0400] tarrant: https://docs.3crowd.com/index.php/Operations/Chef
[2012-04-04 21:57:09 -0400] tarrant: wrong channel.
[2012-04-04 21:57:55 -0400] Rorgo: does anyone know if it is possible to assign a private IP to a EC2/VPC instance using 'knife ec2 server create ...'?
[2012-04-04 21:59:36 -0400] hoover_damm: Rorgo, you really don't have to use knife as your provisioning method
[2012-04-04 22:00:15 -0400] hoover_damm: Rorgo, you can use the ec2 api tools to boot and assign the ip, and then bootstrap the instance
[2012-04-04 22:01:42 -0400] Rorgo: yeah, that's what I'm leaning towards. Just curious if knife had a way of doing it.
[2012-04-04 22:02:37 -0400] Rorgo: since it already has a way to assign the subnet, thought it may also have a way to assign an IP within it
[2012-04-04 22:04:38 -0400] hoover_damm: should be doable to patch in
[2012-04-04 22:05:41 -0400] hoover_damm: just another step in fog, wait for it to be ready? then assign the ip and then wait for the connectivity to return, then bootstrap
[2012-04-04 22:07:52 -0400] Brad_K: Rorgo: on EC2, you get only the one interface.  so, if you were to set the IP address of that one interface to something other than what Amazon assigned, you would no longer be able to get to that node.
[2012-04-04 22:09:10 -0400] hoover_damm: i think the other reason is that elastic ip's are limited by dfault
[2012-04-04 22:09:19 -0400] hoover_damm: you get 5 elastic ip's, so if you assigned one per server
[2012-04-04 22:09:20 -0400] hoover_damm: you'd be out
[2012-04-04 22:09:43 -0400] stepheneb: I'm getting extra corrupt file in the coolbooks.tgz file I upload to a server -- they start with the chars "._"
[2012-04-04 22:09:58 -0400] stepheneb: for example: ls -als /tmp/cheftime/cookbooks/mysql/providers
[2012-04-04 22:10:08 -0400] stepheneb: 4 -rw-r--r-- 1 503 staff  184 2011-07-29 15:31 ._database.rb
[2012-04-04 22:10:08 -0400] stepheneb: 4 -rw-r--r-- 1 503 staff 1962 2011-07-29 15:31 database.rb
[2012-04-04 22:10:47 -0400] stepheneb: Anybody know why a file like " ._database.rb" gets into cookbooks.tgz
[2012-04-04 22:11:16 -0400] stepheneb: it's not in my local system here: $ ls -als ./rebuild/cookbooks/mysql/providers/
[2012-04-04 22:12:13 -0400] cwj: hey librarian users, is there some way to make it so that knife commands work without my cwd being inside my chef repo directory? it's kind of harshing my mellow
[2012-04-04 22:13:52 -0400] Rorgo: Brad_K: I would be able to get to that node via VPN. And if I could define it before the instance is set up (as you can do manually through the GUI), I wouldn't really be changing anything.
[2012-04-04 22:30:00 -0400] stepheneb: oh ... this is insane ... this fixed the problem (on Mac OSA X 10.6.8) export COPYFILE_DISABLE=true
[2012-04-04 22:30:08 -0400] stepheneb: see: http://norman.walsh.name/2008/02/22/tar
[2012-04-04 22:51:55 -0400] helllen: helllo
[2012-04-04 22:52:35 -0400] helllen: how do I search all nodes in my chef-server from one cookbook ?
[2012-04-04 22:54:17 -0400] fujin: search(:node, "*:*")
[2012-04-04 22:54:34 -0400] fujin: helllen: ^^
[2012-04-04 22:55:29 -0400] helllen: ok
[2012-04-04 23:04:45 -0400] helllen: do you have any example to use it in a template?
[2012-04-04 23:05:07 -0400] jtimberman: helllen: don't use search in a template. perform the search in a recipe, assign the results to a local variable, and pass that to a template.
[2012-04-04 23:05:15 -0400] jtimberman: with the "variables" parameter in the template resource.
[2012-04-04 23:05:29 -0400] helllen: ok
[2012-04-04 23:08:11 -0400] dyer: is there anyway to get knife ec2 server create to log at the debug level
[2012-04-04 23:12:16 -0400] Brad_K: dyer: use the "-V" argument to knife.  if that's not enough detail, then use "-VV".
[2012-04-04 23:14:57 -0400] jtimberman: dyer: for the chef-client command?
[2012-04-04 23:15:07 -0400] jtimberman: dyer: unfortunately (at this time) i think you have to make a custom bootstrap template.
[2012-04-04 23:15:15 -0400] jtimberman: i believe there's an open ticket about that thoguh
[2012-04-04 23:15:20 -0400] jtimberman: i don't know if its been resolved though
[2012-04-04 23:20:01 -0400] ryan-eme: if you're going to build something from source in a recipe
[2012-04-04 23:20:06 -0400] ryan-eme: do you just use a bash provider?
[2012-04-04 23:20:17 -0400] coderanger: ryan-eme: Check out the ark LWRPs
[2012-04-04 23:20:27 -0400] coderanger: https://github.com/bryanwb/chef-ark
[2012-04-04 23:20:33 -0400] coderanger: Makes it Very Very Easy
[2012-04-04 23:21:12 -0400] ryan-eme: rad thanks
[2012-04-04 23:21:16 -0400] jtimberman: yeah
[2012-04-04 23:21:18 -0400] jtimberman: its good sauce.
[2012-04-04 23:21:25 -0400] coderanger: thank BryanWB, not me :)
[2012-04-04 23:22:22 -0400] jkyle: I'm digging around for an api reference for chef, currently I'm looking for what exception classes are available.
[2012-04-04 23:22:42 -0400] jtimberman: Wow, this is awesome. pull requests across opscode-cookbooks: 31. Need to get cracking on some merges! :)
[2012-04-04 23:24:00 -0400] jkyle: does such an api reference exist?
[2012-04-04 23:24:22 -0400] jtimberman: jkyle: http://rubydoc.info/gems/chef/Chef/Exceptions
[2012-04-04 23:24:28 -0400] jtimberman: not a lot in the rdoc though
[2012-04-04 23:24:40 -0400] coderanger: Most are pretty specific, what are you trying to do?
[2012-04-04 23:24:56 -0400] jtimberman: but at least there's a list
[2012-04-04 23:25:25 -0400] jkyle: I want to throw an exception if a cookbook can't find certain data in the data bag its looking for
[2012-04-04 23:25:26 -0400] coderanger: Sure, but recipe code shouldn't, for example, ever raise a SolrConnectionError :)
[2012-04-04 23:25:32 -0400] coderanger: jkyle: Just use a string
[2012-04-04 23:25:43 -0400] coderanger: Ruby is ... loose when it comes to these things
[2012-04-04 23:25:43 -0400] jkyle: use a string?
[2012-04-04 23:25:54 -0400] coderanger: raise "Can't find #{...}"
[2012-04-04 23:25:59 -0400] jkyle: ah
[2012-04-04 23:26:16 -0400] jkyle: k, thought there might be a CriticalFailure exception or some sort hehe
[2012-04-04 23:26:34 -0400] jkyle: raise ChefDoneCutItself
[2012-04-04 23:26:47 -0400] coderanger: Any exception raised in a recipe will fail the run
[2012-04-04 23:27:53 -0400] jtimberman: if you want to make it more elegant when it cuts itself.
[2012-04-04 23:27:57 -0400] jtimberman: you can do begin/rescue
[2012-04-04 23:28:09 -0400] jtimberman: and Chef::Application.fatal!(-42, "Zomg, I cut myself")
[2012-04-04 23:28:18 -0400] jtimberman: i might have those paramters in the wrong order
[2012-04-04 23:29:46 -0400] jkyle: yeah, wrapping in a begin/rescue
[2012-04-04 23:30:05 -0400] jkyle: data bag lookups throw a 404
[2012-04-04 23:30:52 -0400] hcastro: anyone using the python cookbook? i'm seeing some inconsistencies with prefix dirs across python, distribute, pip
[2012-04-04 23:31:05 -0400] coderanger: hcastro: Can you be more specific?
[2012-04-04 23:32:18 -0400] hcastro: python package installs fall into /usr/bin, easy_install falls into /usr/local/bin, and pip falls into /usr/local/bin
[2012-04-04 23:32:35 -0400] helllen: helllo
[2012-04-04 23:32:58 -0400] helllen: fujin: I execute search(:node, "*:*") and I get empty value
[2012-04-04 23:33:07 -0400] helllen: but I have nodes
[2012-04-04 23:33:40 -0400] hcastro: python cookbook tries to use a "prefix_dir" attribute to do existence checks throughout but issues come up when prefix_dir + "pip" != "/usr/local/bin/pip"
[2012-04-04 23:33:48 -0400] fujin: search?
[2012-04-04 23:33:48 -0400] bawt: search is http://wiki.opscode.com/display/chef/Search
[2012-04-04 23:33:54 -0400] fujin: helllen: ^
[2012-04-04 23:34:20 -0400] jkyle: this is something I can't quite figure
[2012-04-04 23:34:27 -0400] jkyle: here's a ohai plugin: http://pastie.org/3730045
[2012-04-04 23:34:47 -0400] jkyle: if I iterate through the code, say break befire the "ip = " section
[2012-04-04 23:35:12 -0400] jkyle: all of those attributes are assigned, they have actual values. however, by the time I get to the recipe scope...they're nil
[2012-04-04 23:35:45 -0400] jkyle: so if I, shef -z, <chef:recipe> node['network']['mgmt_ipv4'] => nil
[2012-04-04 23:36:37 -0400] jkyle: is there something obvious? like is the network resource overwritten later on or something?
[2012-04-04 23:38:25 -0400] Brad_K: jkyle: i don't think that shef executes ohai as part of the startup process.
[2012-04-04 23:38:44 -0400] helllen: I execute:    knife search node "*:*"    and I get 0 items
[2012-04-04 23:38:51 -0400] Brad_K: so, if you've got an ohai plugin you're testing,  you're going to have a rough time testing that with shef.
[2012-04-04 23:38:56 -0400] helllen: but in the web server-ui I see the nodes
[2012-04-04 23:38:59 -0400] helllen: :-(
[2012-04-04 23:39:17 -0400] jkyle: Brad_K: is there a way to not have a tough time testing :)
[2012-04-04 23:40:01 -0400] helllen: for example with:   knife node list      I get the list of nodes
[2012-04-04 23:40:11 -0400] helllen: why doesn't it work with search?
[2012-04-04 23:41:02 -0400] Brad_K: with ohai, your testing cycles using chef-client instead of shef will be longer, but if your cookbooks and recipes are written correctly, it shouldn't be too much worse.
[2012-04-04 23:42:57 -0400] Brad_K: helllen: these commands both work for me:
[2012-04-04 23:42:57 -0400] Brad_K: knife node list
[2012-04-04 23:42:57 -0400] Brad_K: knife search node "*:*"
[2012-04-04 23:43:35 -0400] helllen: for me it works knife node list but not the search
[2012-04-04 23:43:40 -0400] helllen: what can it be?
[2012-04-04 23:44:14 -0400] Brad_K: helllen: are you using Hosted Chef, or your own open source chef server?
[2012-04-04 23:44:28 -0400] helllen: opensource chef-server
[2012-04-04 23:44:49 -0400] Brad_K: helllen: it sounds to me like maybe your solr indexer is broken.
[2012-04-04 23:45:06 -0400] helllen: it is started
[2012-04-04 23:45:19 -0400] fujin: prob the solrMaxFieldLength crap
[2012-04-04 23:45:33 -0400] helllen: I have just two nodes now
[2012-04-04 23:45:34 -0400] helllen: :-D
[2012-04-04 23:46:38 -0400] fujin: http://tickets.opscode.com/browse/CHEF-2346
[2012-04-04 23:46:45 -0400] fujin: helllen: yeah but your nodes can have buttloads of node data, which breaks solr
[2012-04-04 23:46:50 -0400] fujin: unless you tune solr for really long field values
[2012-04-04 23:47:09 -0400] helllen: http://pastebin.com/sPYWTPtE
[2012-04-04 23:47:10 -0400] dyer: jtimberman, thanks, thats exactly what I was looking for
[2012-04-04 23:47:12 -0400] fujin: if you are just testing, i would suggest the free tier of the Hosted Chef platform
[2012-04-04 23:47:17 -0400] helllen: this is my sold configuration file

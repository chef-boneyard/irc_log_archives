[2012-04-10 00:18:46 -0400] juanje: eugenmayer: How exactly did you install the recipe? could you pase the run_list and/or the role you've used?
[2012-04-10 00:19:29 -0400] eugenmayer: juanje: not sure what to pastebin. Installed using a role
[2012-04-10 00:20:17 -0400] juanje: eugenmayer: paste the role
[2012-04-10 00:20:37 -0400] juanje: to see the run_list and attribs you've used
[2012-04-10 00:21:13 -0400] juanje: eugenmayer: btw, any error messages from the chef-client?
[2012-04-10 00:21:15 -0400] eugenmayer: juanje: https://skitch.com/unnamed-beccn/8t3iu/chef-server
[2012-04-10 00:21:27 -0400] eugenmayer: juanje: when running chef-client ? no
[2012-04-10 00:25:07 -0400] juanje: eugenmayer: I'm not sure, but I think you should use just chef-client::service or chef-client::cron
[2012-04-10 00:25:42 -0400] juanje: try to use just chef-client, which will use the default recipe
[2012-04-10 00:26:10 -0400] juanje: the deafult recipe is using chef-client::service
[2012-04-10 00:27:23 -0400] juanje: eugenmayer: and maybe you should add before that recipe, chef-client::delete_validation
[2012-04-10 00:27:33 -0400] eugenmayer: ok
[2012-04-10 00:29:50 -0400] eugenmayer: http://pastie.org/3758979 @juanje
[2012-04-10 00:29:59 -0400] eugenmayer: did what you toldme
[2012-04-10 00:30:33 -0400] eugenmayer: https://skitch.com/unnamed-beccn/8t3s7/chef-server
[2012-04-10 00:31:38 -0400] juanje: eugenmayer: the pastebin seems ok. No errors. Did it work?
[2012-04-10 00:33:18 -0400] eugenmayer: no errors - but the server_url is still wrong
[2012-04-10 00:35:02 -0400] juanje: eugenmayer: wrong how? what should be in there and what are you getting?
[2012-04-10 00:35:36 -0400] juanje: eugenmayer: did you set any attributes at the role?
[2012-04-10 00:35:43 -0400] eugenmayer: sure
[2012-04-10 00:36:22 -0400] juanje: eugenmayer: could you show them?
[2012-04-10 00:37:00 -0400] eugenmayer: sure, wait a second
[2012-04-10 00:38:09 -0400] eugenmayer: juanje: https://skitch.com/unnamed-beccn/8t32r/chef-server
[2012-04-10 00:40:21 -0400] juanje: eugenmayer: hummm... I believe that attribute should be set at 'overrides', not 'defaults'
[2012-04-10 00:40:39 -0400] eugenmayer: tried both - did not work
[2012-04-10 00:41:56 -0400] juanje: eugenmayer: let me check my server to see one thing...
[2012-04-10 00:47:12 -0400] juanje: eugenmayer: nevermind... That's weird, it should works with 'overrides'
[2012-04-10 00:48:36 -0400] juanje: eugenmayer: have you run the chef-client with '-l debug' option to see more verbose output?
[2012-04-10 00:55:41 -0400] eugenmayer: sorry - i had a disconnect
[2012-04-10 01:09:49 -0400] dhawth: I notice that I am confused.  when I do a knife cookbook site list, I get a list of all the cookbooks in the opscode cookbook repo.  when I do a knife cookbook list, I get a list of all of my site-specific cookbooks.
[2012-04-10 01:09:55 -0400] dhawth: am I just thinking about something backwards?
[2012-04-10 01:10:35 -0400] dhawth: clearly this is by design, if I look at the knife ruby source, but I was under the impression it would be the other way around.
[2012-04-10 01:13:11 -0400] juanje: dhawth: 'knfe cookbook list' list the cookbooks you have previously uploaded to your Chef-server and the ones are availables by the nodes
[2012-04-10 01:13:50 -0400] juanje: dhawth: 'knife cookbook site' is for the community cookbooks at the opscode's site
[2012-04-10 01:14:37 -0400] juanje: dhawth: to get a cookbook from there, share your own at the community site, list them and so on
[2012-04-10 01:15:31 -0400] juanje: eugenmayer: did you tried to run the chef-client with '-l debug'?
[2012-04-10 01:15:45 -0400] eugenmayer: juanje: did you write that?
[2012-04-10 01:15:45 -0400] juanje: eugenmayer: maybe you get more useful info
[2012-04-10 01:15:49 -0400] eugenmayer: let me se
[2012-04-10 01:16:29 -0400] juanje: eugenmayer: yep, I did, maybe when you got disconnect... :-/
[2012-04-10 01:17:59 -0400] dhawth: I thought site cookbooks were (my) site-specific cookbooks
[2012-04-10 01:18:10 -0400] dhawth: sounds like those *should* go in /cookbooks instead of /site-cookbooks, then
[2012-04-10 01:18:14 -0400] eugenmayer: juanje: http://pastie.org/3759147
[2012-04-10 01:18:20 -0400] eugenmayer: still look ok to me
[2012-04-10 01:19:00 -0400] dhawth: my next question is:  should I ever upload a cookbook to my chef server using knife cookbook site upload?
[2012-04-10 01:19:13 -0400] dhawth: or should I always be uploading to just knife cookbook upload?
[2012-04-10 01:19:22 -0400] eugenmayer: juanje: though i cannot see were the /etc/chef/client.rb file is placed
[2012-04-10 01:19:25 -0400] dhawth: and if I do both, which takes precedence when it comes to chef-clients doing things
[2012-04-10 01:20:46 -0400] juanje: dhawth: I'm not sure how really use knife the local 'site-cookbooks' directory, but all repo-chef directory is more a convention than something that actually means something to chef, I think
[2012-04-10 01:20:49 -0400] eugenmayer: juanje: one strange thing also is the "checkins" using cron never seem to happen. Only if i run chef-client manually
[2012-04-10 01:21:46 -0400] juanje: dhawth: you have to use 'knife cookbook upload' to upload the cookbooks to your Chef server
[2012-04-10 01:22:29 -0400] dhawth: juanje: ok, let me simplify the question:  if I have 2 cookbooks called "nagios", one from opscode and one that is ours, I upload the opscode one to my chef server using knife cookbook site upload and then I upload mine using knife cookbook upload, and on the client it will run the opscode one first and then mine?
[2012-04-10 01:22:49 -0400] miah: no
[2012-04-10 01:22:49 -0400] juanje: dhawth: actually... I think 'knife cookbook site' doesn't have 'upload' subcommand...
[2012-04-10 01:22:55 -0400] miah: one will be overwritten
[2012-04-10 01:23:12 -0400] miah: there is no namespace guarentee with cookbooks.
[2012-04-10 01:23:16 -0400] dhawth: oh, so the chef server really only has a cookbooks thing to upload to and knife cookbook site exists just to download the opscode ones?
[2012-04-10 01:23:24 -0400] miah: yes
[2012-04-10 01:23:28 -0400] dhawth: ah
[2012-04-10 01:23:38 -0400] juanje: dhawth: no, the cookbook with the latest version will be used
[2012-04-10 01:23:41 -0400] dhawth: so I need to have my cookbooks named something else so there's no name collision
[2012-04-10 01:23:48 -0400] miah: i dont use knife cookbook site, i use librarian-chef.. its just there for ease of use
[2012-04-10 01:23:53 -0400] miah: dhawth: yes
[2012-04-10 01:23:57 -0400] miah: or fork
[2012-04-10 01:24:03 -0400] dhawth: thanks, that's exactly what I need to know
[2012-04-10 01:24:05 -0400] miah: and manage the merges
[2012-04-10 01:24:12 -0400] dhawth: yeah, that sounds like a pita :D
[2012-04-10 01:24:16 -0400] dhawth: I'll rename and depend
[2012-04-10 01:24:20 -0400] miah: coolbeans
[2012-04-10 01:28:34 -0400] miah: is there a ohai attribute that gives me root_group, or do i still have to use a fun case statement in my cookbooks? =)
[2012-04-10 01:28:56 -0400] eugenmayer: juanje: it looks like i need the chef-client:config reciepe.Eventhough iam using it, the server_url seems still to be wrong
[2012-04-10 01:29:21 -0400] eugenmayer: but this time i see in the logs
[2012-04-10 01:29:21 -0400] eugenmayer: [Tue, 10 Apr 2012 03:28:17 +0200] INFO: Processing template[/etc/chef/client.rb] action create (chef-client::config line 39)
[2012-04-10 01:29:21 -0400] eugenmayer: [Tue, 10 Apr 2012 03:28:17 +0200] INFO: Processing ruby_block[reload_client_config] action nothing (chef-client::config line 48)
[2012-04-10 01:29:21 -0400] eugenmayer: [Tue, 10 Apr 2012 03:28:17 +0200] INFO: Processing file[/etc/chef/validation.pem] action delete (chef-client::delete_validation line 21)
[2012-04-10 01:34:32 -0400] juanje: eugenmayer: yes, seems like you need the chef-client::config to change the client.rb
[2012-04-10 01:34:54 -0400] eugenmayer: juanje: if i add #remove me to the end of client.rb and run chef-client
[2012-04-10 01:35:04 -0400] eugenmayer: it gets removed, thoough the file gets touched
[2012-04-10 01:35:26 -0400] eugenmayer: nevertelles changing server_url manuall and rerung chef-client ..it will not change
[2012-04-10 01:35:36 -0400] juanje: weird...
[2012-04-10 01:35:56 -0400] eugenmayer: <% if Chef::Config.has_key?(:chef_server_url) -%>
[2012-04-10 01:35:56 -0400] eugenmayer: chef_server_url  "<%= Chef::Config[:chef_server_url] %>"
[2012-04-10 01:35:56 -0400] eugenmayer: <% else -%>
[2012-04-10 01:35:56 -0400] eugenmayer: chef_server_url  "<%= node["chef_client"]["server_url"] %>"
[2012-04-10 01:35:56 -0400] eugenmayer: <% end -%>
[2012-04-10 01:36:00 -0400] eugenmayer: it must be related to this
[2012-04-10 01:36:39 -0400] juanje: eugenmayer: Hummm... seems so...
[2012-04-10 01:37:03 -0400] eugenmayer: why globals preseed lcoals..
[2012-04-10 01:37:04 -0400] eugenmayer: holy..
[2012-04-10 01:37:14 -0400] eugenmayer: jtimberman: could you comment on this?
[2012-04-10 01:38:58 -0400] yfeldblum: eugenmayer, the first branch (if) is probably for nodes that are running chef-client, and the second branch (else) is probably for nodes that are running chef-solo
[2012-04-10 01:39:45 -0400] eugenmayer: yfeldblum: well why? My issue is, the clients access the chef-server using different networks
[2012-04-10 01:40:14 -0400] eugenmayer: and i want to be able to exactly push this using the config. That setting seems to be somekind of wrong. Anyway i fork this for now
[2012-04-10 01:41:19 -0400] yfeldblum: eugenmayer, change your hosts file, not chef
[2012-04-10 01:44:31 -0400] juanje: yfeldblum: the README file show how to change the 'server_url' attrib if you like to use Opescode Platfrom, so I'm not so sure about the else is for chef-solo
[2012-04-10 01:45:00 -0400] juanje: s/Platfrom/Platform
[2012-04-10 01:45:54 -0400] yfeldblum: juanje, not sure how that's related to this particular code sample
[2012-04-10 01:47:55 -0400] eugenmayer: well yes, changing that fixes it.
[2012-04-10 01:48:10 -0400] eugenmayer: bascially <% if node["chef_client"]["server_url"] != nil -%>
[2012-04-10 01:48:21 -0400] eugenmayer: so if it set localy, us it, else use the global
[2012-04-10 01:50:31 -0400] eugenmayer: now, the last question is, why those cron jobs seem to never get executed or
[2012-04-10 01:50:32 -0400] eugenmayer: debianmirror :: /etc/chef  /etc/init.d/chef-client restart
[2012-04-10 01:50:32 -0400] eugenmayer: Restarting chef-client: chef-client failed!
[2012-04-10 01:50:34 -0400] eugenmayer: this happens
[2012-04-10 01:54:04 -0400] juanje: eugenmayer: but at your last pastebin is running' isn't it?
[2012-04-10 01:54:17 -0400] eugenmayer: it does run using
[2012-04-10 01:54:19 -0400] eugenmayer: chef-client
[2012-04-10 01:54:24 -0400] eugenmayer: but i cant start the service
[2012-04-10 01:54:47 -0400] eugenmayer: eventough it tells me "failed" i actually creates a pid - but there is no process with this pid
[2012-04-10 01:56:59 -0400] juanje: eugenmayer: maybe is because the config doesn't change
[2012-04-10 01:57:22 -0400] eugenmayer: it dos now. and it works
[2012-04-10 01:57:33 -0400] eugenmayer: i mean the config
[2012-04-10 01:59:37 -0400] coderanger: miah: Have you tried Neptunes Pride? Another space 4x, haven't gotten time to look at it yet
[2012-04-10 01:59:51 -0400] miah: nope
[2012-04-10 02:00:04 -0400] juanje: eugenmayer: oh, that's right, if not it wouldn't try to restart, of course
[2012-04-10 02:00:37 -0400] coderanger: miah: http://np.ironhelmet.com/tutorial not what you are looking for, but might be amusing :)
[2012-04-10 02:01:04 -0400] miah: looks cool
[2012-04-10 02:01:12 -0400] miah: i just get so tired of the wargames
[2012-04-10 02:02:58 -0400] coderanger: Race for the Galaxy? (troll)
[2012-04-10 02:04:10 -0400] bemu: I play League of Legends :D
[2012-04-10 02:04:28 -0400] miah: me too. but not lately.
[2012-04-10 02:04:31 -0400] bemu: Going to give Tera a shot as well.
[2012-04-10 02:05:01 -0400] coderanger: They use Chef and Python, can't be all bad :)
[2012-04-10 02:05:46 -0400] miah: =)
[2012-04-10 02:05:50 -0400] bemu: they've definitely gotten better/faster with their deploys
[2012-04-10 02:05:55 -0400] coderanger: Speaking of Chef and gaming, omg hawken needs to come out already
[2012-04-10 02:06:51 -0400] miah: http://steamcommunity.com/id/miah fwiw
[2012-04-10 02:07:28 -0400] coderanger: I don't thin senk hangs out on here anymore, alas
[2012-04-10 02:07:47 -0400] bemu: Hah! Rogue-like game (hack-slash-loot) :P
[2012-04-10 02:07:55 -0400] JasonBoxLaptop: where!?
[2012-04-10 02:08:45 -0400] bemu: http://store.steampowered.com/app/207430
[2012-04-10 02:09:34 -0400] coderanger: I'm no longer allowed to buy games on steam until I've at least started half of them
[2012-04-10 02:09:35 -0400] coderanger: >_<
[2012-04-10 02:13:01 -0400] miah: yes. you need to get HSL. its awesome.
[2012-04-10 02:14:40 -0400] JasonBoxLaptop: heh
[2012-04-10 02:21:36 -0400] hippiehacker: any thoughts on the invalid date format in specification "2012-03-14 00:00:00.00000000Z" errors I get when installing gems via chef?
[2012-04-10 02:24:54 -0400] yfeldblum: hippiehacker, upgrade rubygems?
[2012-04-10 02:26:31 -0400] coderanger: yeah, its an issue with older gems
[2012-04-10 02:28:37 -0400] hippiehacker: trying to find a clean work around
[2012-04-10 02:30:18 -0400] yfeldblum: hippiehacker, if upgrading rubygems works, that's probably the cleanest workaround
[2012-04-10 02:32:03 -0400] agoddard: hippiehacker: once you hit the problem, you might need to fix the gems before other gem commands work
[2012-04-10 02:33:17 -0400] agoddard: which would be editing the gemspec and changing 2012-03-14 00:00:00.00000000Z to 2012-03-14
[2012-04-10 02:35:46 -0400] agoddard: speaking of gems, I want to install a gem_package on all nodes which have rabbitmq on them, I was going to use `if node.attribute? "rabbitmq"`
[2012-04-10 02:35:47 -0400] agoddard: in my cookbook, but realized that nodes without rabbitmq still have this from other cookbooks.. any ideas?
[2012-04-10 02:41:21 -0400] miah: node[:recipes].include?("rabbitmq")
[2012-04-10 02:45:34 -0400] agoddard: miah: hmmm I tried that first in shef and the node didn't think it had recipe, but I think I might have just screwed it up in shef :)
[2012-04-10 02:49:33 -0400] agoddard: miah: yeah, no dice :( The nodes both have roles which include recipes which include the rabbitmq recipe
[2012-04-10 02:50:44 -0400] bemu: hm.
[2012-04-10 02:51:38 -0400] bemu: node.recipes.include('rabbitmq') should look at the entire run_list, no?
[2012-04-10 02:52:23 -0400] agoddard: ya that's what I thought..
[2012-04-10 02:55:05 -0400] bemu: https://github.com/opscode/chef/blob/master/chef/lib/chef/node.rb#L436-446
[2012-04-10 02:55:09 -0400] bemu: That would suggest it does.
[2012-04-10 02:57:01 -0400] bemu: I'm almost 99% sure we tested .recipes in our collectd cookbook, and it does work.
[2012-04-10 02:57:36 -0400] miah: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/delete_validation.rb#L20
[2012-04-10 02:58:30 -0400] bemu: agoddard: Sent you a pm with another suggestion.
[2012-04-10 02:59:06 -0400] agoddard: hmm.. maybe the search is right and my index is just funky..
[2012-04-10 02:59:52 -0400] agoddard: 'cause other searches in shef that should work aren't showing results.. yergh.. wild goose chase
[2012-04-10 03:00:59 -0400] yfeldblum: agoddard, i can think of various other ways to do that
[2012-04-10 03:01:02 -0400] bemu: I don't think it's actually using search.
[2012-04-10 03:01:21 -0400] bemu: Is it?
[2012-04-10 03:01:58 -0400] agoddard: lemme check again outside of shef
[2012-04-10 03:02:00 -0400] coderanger: bemu: node[:recipes] is, indeed, fully expanded
[2012-04-10 03:02:06 -0400] coderanger: as is node[:roles]
[2012-04-10 03:02:11 -0400] yfeldblum: agoddard, 1) have a recipe which includes the rabbitmq recipe and then installs the rabbitmq gem; 2) find the rabbitmq package resource and, if it exists, add a rabbitmq gem resource
[2012-04-10 03:02:22 -0400] jtimberman: but if the recipe is included via 'include_recipe' it won't be in that list.
[2012-04-10 03:02:28 -0400] bemu: We use that syntax in four recipes: collectd, ganglia, mongodb and nagios.
[2012-04-10 03:02:37 -0400] agoddard: jtimberman: that's what this is
[2012-04-10 03:02:43 -0400] bemu: Interesting, didn't know that.
[2012-04-10 03:03:20 -0400] bemu: https://github.com/opscode/chef/blob/master/chef/lib/chef/node.rb#L349-359
[2012-04-10 03:03:47 -0400] yfeldblum: r = resources(:package => "rabbitmq") rescue nil; gem_package "rabbitmq" if r
[2012-04-10 03:03:49 -0400] bemu: If you're using include_recipe, maybe you could try .recipe?
[2012-04-10 03:04:22 -0400] yfeldblum: overall, i would recommend against trying to play tricks with the run-list
[2012-04-10 03:05:12 -0400] hoover_damm: hippiehacker, there is no work around
[2012-04-10 03:05:29 -0400] hoover_damm: hippiehacker, to summarize how rubygems are hosted... everything is yaml
[2012-04-10 03:05:38 -0400] hoover_damm: bring in libyaml and psych vs syck
[2012-04-10 03:05:49 -0400] hoover_damm: and those who run syck have issues with gems built with a ruby that is psych enabled
[2012-04-10 03:06:01 -0400] hoover_damm: later versions o rubygems have patches to display a warning and throw this error away harmlessly
[2012-04-10 03:06:29 -0400] hoover_damm: if you expect your gem to run on 1.8.x you should throttle the gem maintainer for making it with a psych enabled ruby interperter
[2012-04-10 03:06:52 -0400] agoddard: yfeldblum: that looks good
[2012-04-10 03:06:55 -0400] hoover_damm: because there's various regressions in rubygems with bad gemspec's in 1.5.x that come out weird
[2012-04-10 03:07:00 -0400] hoover_damm: I always loved the 1.5.x series
[2012-04-10 03:07:10 -0400] hoover_damm: and it's gotten heaps better lately
[2012-04-10 03:08:29 -0400] hoover_damm: to summarize, one of the worst package managers around imo is rubygems
[2012-04-10 03:08:31 -0400] hoover_damm: there's worse
[2012-04-10 03:08:32 -0400] hoover_damm: by far
[2012-04-10 03:08:44 -0400] hoover_damm: and rubygems has come quite far, but sometimes you just gotta go wut? really? :\
[2012-04-10 03:09:08 -0400] hoover_damm: psych vs syck will get a lot worse as time goes on
[2012-04-10 03:09:56 -0400] hoover_damm: perl users are likely laughing at the ruby users
[2012-04-10 03:17:28 -0400] miah: while everybody laughs at them?
[2012-04-10 03:18:43 -0400] hoover_damm: miah, perl 6 was released
[2012-04-10 03:18:53 -0400] hoover_damm: miah, so you can take your duke nukem jokes to the urinal
[2012-04-10 03:19:01 -0400] miah: lol
[2012-04-10 03:19:45 -0400] hoover_damm: the perl users are shaking their heads going 'why didn't you learn from us' actually
[2012-04-10 03:19:51 -0400] miah: ya. true true
[2012-04-10 03:19:52 -0400] hoover_damm: because they went through this same pain awhile ago no?
[2012-04-10 03:20:08 -0400] hoover_damm: so bolderdoggers
[2012-04-10 03:20:16 -0400] hoover_damm: lol
[2012-04-10 03:21:51 -0400] agoddard: hmm.. grr, so none of: loading the package resource, node[:recipes].include?("rabbitmq") or node.recipe? "rabbitmq" seem to think I have rabbit installed, but it's definitely installed from a recipe which includes a recipe called "rabbitmq".. ah well, maybe I'll sleep on it :(
[2012-04-10 03:35:44 -0400] jtimberman: agoddard: there's node.run_state[:seen_recipes]
[2012-04-10 03:35:47 -0400] jtimberman: that will be the recipes seen by chef up to that point in he run.
[2012-04-10 03:35:59 -0400] jtimberman: (if you use it in a recipe itself)
[2012-04-10 03:36:14 -0400] yfeldblum: agoddard, does your recipe come before or after the recipe that creates the package resource?
[2012-04-10 03:44:48 -0400] erratic: I wanna pull in all the ip addresses managed by a chef-server into a template
[2012-04-10 03:46:31 -0400] jtimberman: erratic: all_ips = search(:node, "*:*").map {|n| n['ipaddress']}
[2012-04-10 03:46:44 -0400] jtimberman: that should be an array o the default IP for all nodes.
[2012-04-10 03:46:45 -0400] erratic: I knew it was gonna be something like that
[2012-04-10 03:46:53 -0400] erratic: thank you
[2012-04-10 03:47:52 -0400] jtimberman: sure thing
[2012-04-10 03:48:10 -0400] erratic: thats another thing
[2012-04-10 03:48:24 -0400] erratic: my machines all have 2 ethernet adapters and two addresses each
[2012-04-10 03:48:32 -0400] erratic: and one thing I noticed is that by default
[2012-04-10 03:49:03 -0400] erratic: by default in the webui status it shows the addr for eth0
[2012-04-10 03:49:35 -0400] erratic: eth1 is what i'm really worried about because it's rackspace and rather than, being cool... they just drop a whole bunch of VM's on a vlan
[2012-04-10 03:49:41 -0400] erratic: and call it the private network
[2012-04-10 03:50:19 -0400] erratic: and what I'm trying to do is basically engineer my iptables template to mke it so that only addresses on eth1 in the all_ips list can talk to each other?
[2012-04-10 03:50:54 -0400] erratic: which is sufficient, just as long as some botnets on the "private" network aren't able to peck at my servers I don't care
[2012-04-10 03:51:41 -0400] erratic: basically what I'm aiming for is so that only servers managed by my chef server can talk to each other
[2012-04-10 03:55:07 -0400] erratic: but you know
[2012-04-10 03:55:24 -0400] erratic: since I can do actual real searching
[2012-04-10 03:55:32 -0400] erratic: I should do one better
[2012-04-10 03:56:32 -0400] jtimberman: erratic: yeah, ohai will detect as the default ip address the one that has the default route
[2012-04-10 04:06:59 -0400] erratic: hmm
[2012-04-10 04:20:37 -0400] erratic: so does it not track the ip of eth1 ?
[2012-04-10 04:22:49 -0400] erratic: or is it one or the other
[2012-04-10 04:22:53 -0400] erratic: or is it eth0 or gtfo
[2012-04-10 04:22:54 -0400] erratic: lol
[2012-04-10 04:34:44 -0400] erratic: grr
[2012-04-10 04:45:53 -0400] erratic: Im guessing nobody writes ohai plugins...
[2012-04-10 04:46:06 -0400] erratic: apparently I can write them for the purpose of saying orly
[2012-04-10 04:46:09 -0400] erratic: and yrly
[2012-04-10 04:46:18 -0400] erratic: and teh versions
[2012-04-10 04:46:22 -0400] erratic: and cheezburger
[2012-04-10 04:46:35 -0400] erratic: but nobody has made one to get the ip address of eth1?
[2012-04-10 04:46:40 -0400] erratic: hm.
[2012-04-10 04:49:15 -0400] erratic: ipaddress_eth1 = host["network"]["interfaces"]["eth1"]["addresses"].select { |address, data| data["family"] == "inet" }[0][0]
[2012-04-10 04:49:19 -0400] erratic: hmms
[2012-04-10 04:51:47 -0400] juanje: erratic: something like this? https://gist.github.com/2050259
[2012-04-10 04:52:38 -0400] erratic: juanje, ideally what I am hoping this does is include more information in the search results when you do knife search node
[2012-04-10 04:52:46 -0400] erratic: or on the status page of the webui
[2012-04-10 04:58:21 -0400] juanje: erratic: doesn't get ohai info of all the network interfaces? or do you need more info?
[2012-04-10 05:00:39 -0400] erratic: all I get when I do a command line knife search is something to this effect:
[2012-04-10 05:01:00 -0400] erratic: Node Name:   memcached-1
[2012-04-10 05:01:00 -0400] erratic: Environment: _default
[2012-04-10 05:01:00 -0400] erratic: FQDN:        memcached-1
[2012-04-10 05:01:00 -0400] erratic: IP:          xxxxxxxxxxxxxxxxd out
[2012-04-10 05:01:00 -0400] erratic: Run List:    role[Memcached_Server], role[Base]
[2012-04-10 05:01:01 -0400] erratic: Roles:       Memcached_Server, Base
[2012-04-10 05:01:01 -0400] erratic: Recipes:     iptables::memcached, memcached, chef-client::delete_validation, ssh-keys
[2012-04-10 05:01:02 -0400] erratic: Platform:    ubuntu 11.10
[2012-04-10 05:01:06 -0400] erratic: where IP is the addr for eth0
[2012-04-10 05:01:14 -0400] erratic: it does not show the addr for eth1
[2012-04-10 05:01:28 -0400] erratic: but
[2012-04-10 05:01:34 -0400] erratic: Im not sure that matters
[2012-04-10 05:01:35 -0400] erratic: because
[2012-04-10 05:02:00 -0400] miah: erratic: try -a
[2012-04-10 05:02:01 -0400] erratic:  erratic: all_ips = search(:node, "*:*").map {|n| n['ipaddress']}
[2012-04-10 05:03:12 -0400] juanje: erratic: but then is not a ohai's you need to pass -l to the knife search
[2012-04-10 05:03:19 -0400] erratic: I need to figure out how to get the addr of eth1 in that
[2012-04-10 05:03:36 -0400] erratic: so like
[2012-04-10 05:04:01 -0400] erratic: n['interfaces']['eth1']['addresses].first() ?
[2012-04-10 05:04:16 -0400] erratic: omething like that
[2012-04-10 05:04:23 -0400] erratic: you know what would be a big help
[2012-04-10 05:04:26 -0400] erratic: and what helped me learn django
[2012-04-10 05:04:39 -0400] erratic: would be if there were some way to start up a fancy pants interactive environment
[2012-04-10 05:04:49 -0400] erratic: like you can start ipython in django
[2012-04-10 05:05:03 -0400] juanje: erratic: did yu try shef?
[2012-04-10 05:05:08 -0400] erratic: no!
[2012-04-10 05:05:10 -0400] erratic: haha
[2012-04-10 05:05:13 -0400] juanje: ;-)
[2012-04-10 05:05:18 -0400] erratic: !
[2012-04-10 05:05:19 -0400] erratic: ty
[2012-04-10 05:06:07 -0400] erratic: chef > search(:node, "*:*").map {|n| n['ipaddress']}
[2012-04-10 05:06:07 -0400] erratic:  => ["108.171.176.42", "108.171.176.58", "108.171.176.52", "108.171.176.28", "108.171.176.219"]
[2012-04-10 05:06:07 -0400] erratic: chef >
[2012-04-10 05:06:09 -0400] erratic: oops
[2012-04-10 05:06:11 -0400] erratic: meh
[2012-04-10 05:06:16 -0400] erratic: but yeah nice!
[2012-04-10 05:07:04 -0400] miah: please be careful with pastes, use gist or pastebin for multiple lines
[2012-04-10 05:07:06 -0400] juanje: erratic: some useful links: http://wiki.opscode.com/display/chef/Getting+Started+with+Shef  http://stevendanna.github.com/blog/2012/01/28/shef-debugging-tips-1/
[2012-04-10 05:08:59 -0400] erratic: dude this shell is going to help me so much
[2012-04-10 05:13:49 -0400] erratic: search(:node, "*:*").map {|n| n['network']['interfaces']['eth1']['addresses'].keys()[2]}
[2012-04-10 05:13:49 -0400] erratic:  => ["10.179.109.198", "10.179.109.203", "10.179.109.190", "10.179.109.178", "10.179.109.201"]
[2012-04-10 05:13:49 -0400] erratic: chef >
[2012-04-10 05:13:50 -0400] erratic: damn
[2012-04-10 05:13:53 -0400] erratic: thats kinda nuts
[2012-04-10 05:14:20 -0400] erratic: but
[2012-04-10 05:14:21 -0400] erratic: it works!
[2012-04-10 05:14:32 -0400] erratic: thanks juanje!
[2012-04-10 05:14:59 -0400] juanje: erratic: u welcome :-) glad it helps you out
[2012-04-10 05:17:23 -0400] erratic: yeah its more my learning style
[2012-04-10 05:17:25 -0400] BryanWB: ohai chefs
[2012-04-10 05:17:55 -0400] erratic: I'm glad that they included a shell
[2012-04-10 05:18:05 -0400] juanje: BryanWB: Ohai! :-)
[2012-04-10 05:18:16 -0400] BryanWB: juanje: hola amigo!
[2012-04-10 05:19:01 -0400] BryanWB: estas despierto muy temprano!
[2012-04-10 05:19:08 -0400] juanje: erratic: BryanWB love Shef as well and has some tricks sure he is happy to sahre ;-)
[2012-04-10 05:19:25 -0400] juanje: BryanWB: jeje an despierto :-P
[2012-04-10 05:19:57 -0400] holoway: juanje: you coming to #chefconf?
[2012-04-10 05:19:59 -0400] BryanWB: erratic: my big tip is to run pry inside of shef
[2012-04-10 05:20:12 -0400] holoway: BryanWB: that's a good idea
[2012-04-10 05:20:42 -0400] juanje: holoway: I'd love to, but I think the fly is too expensive for me right now... :-/
[2012-04-10 05:21:49 -0400] erratic: https://gist.github.com/2225015
[2012-04-10 05:21:52 -0400] erratic: that dealy?
[2012-04-10 05:22:08 -0400] erratic: dude I'm getting fucking rick rolled by a place that I just bought coffee from
[2012-04-10 05:22:10 -0400] erratic: never coming here again
[2012-04-10 05:22:17 -0400] erratic: lol
[2012-04-10 05:22:50 -0400] juanje: holoway: I was looking for a flight, but nothing by now...
[2012-04-10 05:23:34 -0400] holoway: juanje: bummer!
[2012-04-10 05:23:37 -0400] erratic: BryanWB thank you I'll check it out
[2012-04-10 05:23:39 -0400] holoway: night, guys
[2012-04-10 05:23:45 -0400] erratic: are you guys coming up for the hackathon in seattle or is that next month?
[2012-04-10 05:23:51 -0400] erratic: I know there's one this friday / sat
[2012-04-10 05:23:59 -0400] erratic: I got the invite today
[2012-04-10 05:24:04 -0400] BryanWB: long flt from Italy :/
[2012-04-10 05:24:11 -0400] BryanWB: we need more eu shit
[2012-04-10 05:24:14 -0400] erratic: dude sent out an email to like a million people and didn't put their addrs in the bcc field
[2012-04-10 05:24:30 -0400] erratic: so I did a reply all and cut/pasted the excess addrs to the bcc field and said remember to use bcc and thanks
[2012-04-10 05:24:31 -0400] erratic: lol
[2012-04-10 05:25:37 -0400] BryanWB: miah: was on vacation for long easter break, coming back to work on haproxy today
[2012-04-10 05:25:43 -0400] miah: awesome =)
[2012-04-10 05:26:01 -0400] miah: BryanWB: i've been pushing some branches
[2012-04-10 05:26:18 -0400] miah: and
[2012-04-10 05:26:19 -0400] miah: http://travis-ci.org/#!/miah/chef-haproxy
[2012-04-10 05:26:26 -0400] erratic: would you prefer ha to nginx?
[2012-04-10 05:26:34 -0400] miah: nginx doesn't do streaming
[2012-04-10 05:26:42 -0400] miah: only does store+forward
[2012-04-10 05:26:53 -0400] miah: which sucks when you're a file sharing company
[2012-04-10 05:27:03 -0400] BryanWB: my hw/netwk setup is fucked so i can need all the speed i can get
[2012-04-10 05:27:12 -0400] erratic: ahh interesting
[2012-04-10 05:27:35 -0400] BryanWB: happy Easter!  a great pagan fertility holiday
[2012-04-10 05:28:11 -0400] miah: indeed. a great zombie jesus day was had.
[2012-04-10 05:35:48 -0400] miah: BryanWB: is it possible with ark to set some environment variables for the make, so we can change destination path?
[2012-04-10 05:37:52 -0400] miah: it really bothers me to hardcode paths in things and i need to specify path to binary, and config for runit
[2012-04-10 05:43:03 -0400] juanje: miah: at last, is gonna be a hackathon pre #chefconf? I read you some twits about it, I believe
[2012-04-10 05:43:50 -0400] miah: yes
[2012-04-10 05:43:53 -0400] miah: thats the plan
[2012-04-10 05:44:03 -0400] miah: we are likely setting it up through the local devops meetup
[2012-04-10 05:44:18 -0400] BryanWB: miah: hmm, i think so
[2012-04-10 05:44:20 -0400] juanje: do you have day and so?
[2012-04-10 05:44:33 -0400] BryanWB: miah: all the make_opts are just env variables
[2012-04-10 05:44:50 -0400] BryanWB: but on same line as make cmd since haproxy requires it
[2012-04-10 05:44:59 -0400] miah: juanje: we are trying for the day before the conference.
[2012-04-10 05:46:12 -0400] miah: awesome =)
[2012-04-10 05:47:13 -0400] miah: BryanWB: hrm. i always set things like PREFIX= before the command
[2012-04-10 05:50:26 -0400] BryanWB: miah: i could move to before the cmd
[2012-04-10 05:50:47 -0400] BryanWB: miah: haven't seen env vars on cmd line for make before haproxy
[2012-04-10 05:50:54 -0400] BryanWB: always saw them in args to configure
[2012-04-10 05:54:19 -0400] miah: BryanWB: hrm. ya. was just looking at makefile and maybe we can do like make PREFIX=<foo>
[2012-04-10 05:56:38 -0400] miah: BryanWB: we should also make the build_opts an actual array attribute
[2012-04-10 05:57:05 -0400] BryanWB: miah: i want to distinguish b/w configure, make, options if possible
[2012-04-10 05:57:20 -0400] BryanWB: anyone looking for a consulting gig automating wordpress deployments?
[2012-04-10 05:57:50 -0400] BryanWB: i probably should set up a job board for foodfight
[2012-04-10 05:59:32 -0400] miah: you should
[2012-04-10 06:01:30 -0400] coderanger: BryanWB: Hold off on that ...
[2012-04-10 06:01:32 -0400] coderanger: O:-)
[2012-04-10 06:02:11 -0400] BryanWB: coderanger: great, good to know ;) fyi, more important is the per-user cookbooks on communty.opscode.com, my $0.02
[2012-04-10 06:02:27 -0400] coderanger: BryanWB: Thats a much much bigger project, but it is coming
[2012-04-10 06:02:33 -0400] BryanWB: kewl
[2012-04-10 06:07:24 -0400] miah: hah
[2012-04-10 06:12:04 -0400] coderanger: !@$!@$
[2012-04-10 06:12:10 -0400] miah: BryanWB: before i issue pull requests i'd like to get some chefspec in place. take a look at my branches though =)
[2012-04-10 06:12:21 -0400] coderanger: Gemnasium neglected to mention it was going to install a service hook on _every one of my repos_
[2012-04-10 06:12:46 -0400] miah: doh
[2012-04-10 06:15:27 -0400] miah: getting tireds.
[2012-04-10 06:18:12 -0400] miah: what are peoples opinions on setting 'name' in cookbook metadata? seems like its best to set it for things like test suites when your repo is named differently than the cookbook. but most cookbooks don't set it and just use the 'implied' default
[2012-04-10 06:22:47 -0400] juanje: miah: I don't see much cookbooks that use 'name'
[2012-04-10 06:23:52 -0400] juanje: I like to use it, but it doesn't seem very useful
[2012-04-10 06:24:29 -0400] miah: well, for instance. i name my github repos for chef projects chef-<foo>, but the cookbook may actually be named <foo>
[2012-04-10 06:25:39 -0400] BryanWB: miah: it will take me some time b4 i get to look at it :( later today, sorry
[2012-04-10 06:26:02 -0400] ranjibd: BryanWB, morning
[2012-04-10 06:26:44 -0400] BryanWB: ranjibd: yo
[2012-04-10 06:26:53 -0400] juanje: miah:  hummm... I see... Well, I use to rename the repo names to the cookbook's. The knife github plugins does and I use it somethimes
[2012-04-10 06:27:40 -0400] miah: BryanWB: no problems
[2012-04-10 06:27:43 -0400] miah: i know its early there =)
[2012-04-10 06:28:59 -0400] miah: juanje: i use librarian-chef
[2012-04-10 06:30:22 -0400] juanje: I've checked a few times but i haven't moved to librarian-chef... I should try to use it in a project...
[2012-04-10 06:30:34 -0400] miah: i like it so far
[2012-04-10 07:07:16 -0400] juanje: miah: I see on twitter you fight with tdd for the infrastructure. Too new and too fuzzy, IMHO, still
[2012-04-10 07:07:38 -0400] juanje: are you trying for the infrastructure or for write a cookbook?
[2012-04-10 07:10:02 -0400] miah: cookbook
[2012-04-10 07:10:35 -0400] juanje: I liked to do some bdd/tdd for my LWRPs and I created this mini project https://github.com/juanje/mortero It's no high tech, but it helped me with the LWRPs
[2012-04-10 07:11:11 -0400] miah: working on some improvements for the chef-haproxy cookbook. i want to make sure we get tests in there too. looking at chefspec, and minitest stuff
[2012-04-10 07:11:42 -0400] miah: awesome. i'll take a look at this
[2012-04-10 07:12:34 -0400] juanje: I'm looking those too, but I did this before
[2012-04-10 07:13:56 -0400] juanje: I like cucumber and rspec for doing bdd and for just cookbooks (not the whole infrastructure) mortero did the job :-)
[2012-04-10 07:16:19 -0400] miah: cool
[2012-04-10 07:16:27 -0400] miah: i'm still learning the programmers way
[2012-04-10 07:17:40 -0400] miah: ive programmed on/off for years, but never spent much time in it. thats changed much in the past year. still have tons to learn though. i really need to work with more smart people that i can learn from.
[2012-04-10 07:19:44 -0400] juanje: well, the "problem" with learning is that it never stops hehehe The more I learn, the more things I know I must learn!!!
[2012-04-10 07:19:49 -0400] juanje: but it's fun :-P
[2012-04-10 07:20:13 -0400] miah: yup
[2012-04-10 07:20:18 -0400] miah: i agree completely
[2012-04-10 07:22:42 -0400] juanje: miah: have you read this book? http://pragprog.com/book/hwcuc/the-cucumber-book It helps me a lot to grok the bdd/tdd thing.
[2012-04-10 07:23:36 -0400] miah: not yet. i do own it and have read bits and pieces
[2012-04-10 07:24:10 -0400] ranjibd: from my experience rspec based tests has always been easier to maintain than the cucumber based tests
[2012-04-10 07:24:46 -0400] ranjibd: the whole point of adopting cukes was that BA's and other business stake holders will read/validate/write the specs
[2012-04-10 07:24:56 -0400] ranjibd: which has never happened in my career
[2012-04-10 07:25:29 -0400] ranjibd: if im the one who will maintain (or folks like me) , i dont really need another layer of abstraction on top of the asserts
[2012-04-10 07:25:35 -0400] miah: ya
[2012-04-10 07:26:06 -0400] miah: i'm pretty sure the business people in my company wouldn't kwow what i was talking about if i mentioned cucumber
[2012-04-10 07:26:16 -0400] ranjibd: exactly..
[2012-04-10 07:27:32 -0400] ranjibd: Cope, theres no PDF version available for the chef book?
[2012-04-10 07:27:46 -0400] ranjibd: we want to buy it, but shipping is not available in india
[2012-04-10 07:29:38 -0400] juanje: ranjibd: yeah, I know more people that experience the same in their companies and I see why, but I also like cucumber and I think it's useful to force you to really do bdd and think on behaviors
[2012-04-10 07:30:32 -0400] juanje: ranjibd: chef book? which chef book?
[2012-04-10 07:30:45 -0400] ranjibd: juanje, i am not arguing on BDD. BDD is good, and can be practiced with rspec also right?
[2012-04-10 07:30:52 -0400] ranjibd: chef definitive guide
[2012-04-10 07:30:54 -0400] BryanWB: miah: chef hackday monday or tuseday b4 chefconf?
[2012-04-10 07:31:19 -0400] miah: BryanWB: iirc, chefconf starts on tuesday (classes and stuff) so i think we were going to schedule the hackday on monday
[2012-04-10 07:31:30 -0400] BryanWB: miah: kewl
[2012-04-10 07:31:35 -0400] miah: yar
[2012-04-10 07:31:40 -0400] BryanWB: i b dere
[2012-04-10 07:31:48 -0400] ranjibd: juanje, give-when-then is one of the style to explain behaviors
[2012-04-10 07:31:49 -0400] miah: awesomesauce
[2012-04-10 07:32:22 -0400] miah: oh wow that book isnt supposed to be out until august
[2012-04-10 07:32:26 -0400] juanje: ranjibd: I know it can be done. I meant that cucumber makes you think more on behavior than rspec, IMHO. But it's just
[2012-04-10 07:32:30 -0400] miah: but if its oreilly it will have pdf, etc
[2012-04-10 07:32:37 -0400] ranjibd: agreed
[2012-04-10 07:33:13 -0400] juanje: ranjibd: btw, is the chef definitive guide already out?
[2012-04-10 07:33:55 -0400] miah: no
[2012-04-10 07:34:01 -0400] miah: http://shop.oreilly.com/product/0636920025146.do
[2012-04-10 07:34:02 -0400] ranjibd: chef-book?
[2012-04-10 07:34:08 -0400] miah: Released: August 2012 (est.)
[2012-04-10 07:34:22 -0400] juanje: i thought so
[2012-04-10 07:34:28 -0400] ranjibd: oh,, ddin't noticed that
[2012-04-10 07:34:37 -0400] ranjibd: chef-book is http://shop.oreilly.com/product/0636920025146.do
[2012-04-10 07:34:40 -0400] ranjibd: chef-book?
[2012-04-10 07:34:40 -0400] bawt: chef-book is http://shop.oreilly.com/product/0636920025146.do
[2012-04-10 07:39:28 -0400] ranjibd: juanje, miah, im trying to use my tests as monitoring scripts also
[2012-04-10 07:39:55 -0400] ranjibd: we need a testing framework that can give metrics apart from asserts (state as i see it )
[2012-04-10 07:43:35 -0400] juanje: ranjibd: agree. I think we need two kind of testing: testing the resources/LWRP/recipes (more like tdd) and testing behavior of the whole infrastructure
[2012-04-10 07:44:08 -0400] ranjibd: juanje, in appplication development we call them as integration tests
[2012-04-10 07:44:30 -0400] juanje: that's right, that kind of testing
[2012-04-10 07:44:51 -0400] ranjibd: in unit test  we aim to test individual methods, and by pass all the external dependencies, or integration points by mocking/stubbing
[2012-04-10 07:44:52 -0400] juanje: but I think we need both kind
[2012-04-10 07:44:58 -0400] ranjibd: of course
[2012-04-10 07:45:41 -0400] ranjibd: unit testing give you agility, lets you do aggressive refactoring , acts as documentation for you code
[2012-04-10 07:45:57 -0400] juanje: yep
[2012-04-10 07:46:30 -0400] ranjibd: while the integration test suite test the the app as a holistic system, does not uses mocks, can  be used as apart of smoke test suite
[2012-04-10 07:46:43 -0400] ranjibd: and BA's should be able to read it also
[2012-04-10 07:47:09 -0400] miah: there is minitest-handler for doing integration testing
[2012-04-10 07:47:15 -0400] ranjibd: yes
[2012-04-10 07:47:45 -0400] ranjibd: we need some mocking framework for lwrps
[2012-04-10 07:47:51 -0400] juanje: I ddin't tried yet, but ooks promissing
[2012-04-10 07:47:52 -0400] miah: indeed
[2012-04-10 07:48:06 -0400] erikh: I think the opscode team is working on --noop mode
[2012-04-10 07:48:15 -0400] erikh: which would effectively mean mocking.
[2012-04-10 07:48:17 -0400] ranjibd: i think rspec-mock or mocha should do..
[2012-04-10 07:48:47 -0400] juanje: actually there is some mocking at the chef's tests
[2012-04-10 07:48:47 -0400] ranjibd: btm had posted an awesome reply on why --noop is not that effective
[2012-04-10 07:49:07 -0400] erikh: yeah, I get that, but it would still provide some method of mocking for you.
[2012-04-10 07:49:11 -0400] ranjibd: you cant really get the dependency chains (notifies/subscribe) once mocking is in play
[2012-04-10 07:49:12 -0400] erikh: as it wouldn't be processing any resources.
[2012-04-10 07:54:42 -0400] juanje: BryanWB: I pulled-request you ;-) well, to your ark cookbook
[2012-04-10 07:58:11 -0400] BryanWB: juanje: i saw it, tks
[2012-04-10 08:01:33 -0400] juanje: miah: btw, I was testing the chef-haproxy and there are two depends missing (build-essential and ark)
[2012-04-10 08:02:54 -0400] juanje: BryanWB: no problem, I was trying the haproxy and that came out, because the dependency
[2012-04-10 08:34:27 -0400] eugenmayer1: any convinient way to restart a service only if it has been changed?
[2012-04-10 08:35:58 -0400] BryanWB: notifies    restart
[2012-04-10 08:39:54 -0400] miah: http://www.macroresilience.com/2011/12/29/people-make-poor-monitors-for-computers/
[2012-04-10 08:40:25 -0400] Anand: hi, m trying to install rabbitmq using knife
[2012-04-10 08:42:48 -0400] Anand: rabbitmq installed success on instance but server not started on instance
[2012-04-10 08:43:54 -0400] eugenmayer1: suddenly, when trying to initialize a new client
[2012-04-10 08:43:56 -0400] eugenmayer1: i get
[2012-04-10 08:43:56 -0400] eugenmayer1: 100 root@monitoring /opt/kw_chef/cookbooks (git)-[master] # knife bootstrap 10.66.0.101 -x root -p 2201 -N aegir
[2012-04-10 08:43:56 -0400] eugenmayer1: Bootstrapping Chef on 10.66.0.101
[2012-04-10 08:43:57 -0400] eugenmayer1: ERROR: TypeError: can't convert false into String
[2012-04-10 08:44:07 -0400] roidrage: Anand: did you check the rabbit logs? they're usually full of erlang barf that could give you a clue as to why it doesn't start
[2012-04-10 08:45:10 -0400] eugenmayer1: http://help.opscode.com/discussions/problems/1160-knife-bootstrap-error-typeerror-cant-convert-false-into-string#comment_13119692
[2012-04-10 08:45:10 -0400] eugenmayer1: arg
[2012-04-10 08:45:18 -0400] eugenmayer1: jtimberman: hehe, time to upgrade :)
[2012-04-10 08:45:56 -0400] miah: ok. way beyond bedtime.
[2012-04-10 08:48:05 -0400] Anand: http://pastie.org/3760686
[2012-04-10 08:48:16 -0400] Anand: that is my receip/rdefault.rb file of rabbit
[2012-04-10 08:48:32 -0400] roidrage: Anand: what do the logs say?
[2012-04-10 08:50:26 -0400] eugenmayer1: i accidently removed the validation.pem on my chef-server using the reciepe. How can i restore it?
[2012-04-10 08:50:47 -0400] miah: eugenmayer1: restart chef-server and a new one will be created automatically
[2012-04-10 08:51:10 -0400] eugenmayer1: thats to complicated,any easier way?
[2012-04-10 08:51:12 -0400] eugenmayer1: :-)
[2012-04-10 08:51:15 -0400] eugenmayer1: miah: thakn you!
[2012-04-10 08:51:41 -0400] miah: ok. gnite.
[2012-04-10 08:51:45 -0400] eugenmayer1: gn8
[2012-04-10 08:52:39 -0400] eugenmayer1: jtimberman: if you are arround: I installed chef using debian packages but would actually like to help testing 0.10.10. Any good way to switch the server for using customer gems?
[2012-04-10 09:02:36 -0400] eugenmayer1: when preseeding a package and it was already configured before, it seems like the new vars are not enforced. Is this by desing=
[2012-04-10 09:06:22 -0400] sampikesley: What I did on the long weekend: http://pikesley.github.com/learn-yourself-some-chef/
[2012-04-10 09:06:38 -0400] Anand: roidrage: this is my log on my cmd: http://pastie.org/3760753
[2012-04-10 09:08:14 -0400] roidrage: Anand: i was talking about the rabbit logs not the chef output, the chef logs unfortunately don't give any indication as to what might be wrong
[2012-04-10 09:11:36 -0400] BryanWB: sampikesley: nice!
[2012-04-10 09:12:15 -0400] BryanWB: sampikesley: definitely going in ffs show notes
[2012-04-10 09:15:04 -0400] sampikesley: I have some more exercises in the works
[2012-04-10 09:18:55 -0400] BryanWB: sampikesley: tutorials for librarian and minitest would be awesome
[2012-04-10 09:25:16 -0400] eugenmayer1: Babar: just for that presee step. It seems, like if you already had run depconf on the server and set those vars, preseed will be ifgnored when installing / running chef-client. Too enforce the settings you have in chef, you can use debconf-set-selections /var/cache/debconf/aegircl.seed && dpkg-reconfigure -fnoninteractive aegircl
[2012-04-10 09:26:07 -0400] Babar: or you could use the proper method. Why don't you use the one I told you to? You need variables in your template?
[2012-04-10 09:26:10 -0400] eugenmayer1: Babar: otherwise, chef can run out of sync very easily
[2012-04-10 09:26:17 -0400] eugenmayer1: Babar: did so.
[2012-04-10 09:26:31 -0400] eugenmayer1: It works when you initially deploy a package -but not if you redeploy it
[2012-04-10 09:26:44 -0400] eugenmayer1: so basically, i do both.
[2012-04-10 09:26:45 -0400] Babar: how come?
[2012-04-10 09:26:50 -0400] eugenmayer1: package "aegircl" do
[2012-04-10 09:26:50 -0400] eugenmayer1:   action :install
[2012-04-10 09:26:50 -0400] eugenmayer1:   response_file "aegircl.seed.erb"
[2012-04-10 09:26:50 -0400] eugenmayer1: end
[2012-04-10 09:27:22 -0400] Babar: yes, that looks about right
[2012-04-10 09:27:48 -0400] eugenmayer1: Babar: iam not 100% sure, couldnt find the reference for that, but it seem preseed is only applied on vars yet not "default".
[2012-04-10 09:28:04 -0400] Babar: ah, yes, sure
[2012-04-10 09:28:23 -0400] Babar: that's how debconf works too
[2012-04-10 09:28:35 -0400] eugenmayer1: and if you change a password or whatever and then let chef redploy, that preseed wont get applied
[2012-04-10 09:28:37 -0400] Babar: otherwise, you need to dpkg-reconfigure
[2012-04-10 09:28:45 -0400] eugenmayer1: yes, thats what i wrote :)
[2012-04-10 09:28:56 -0400] Babar: yes, but that's debconf's fault
[2012-04-10 09:28:58 -0400] eugenmayer1: and in cases of chef, it makes sense to enforce preseed
[2012-04-10 09:29:00 -0400] Babar: because you're doing it wrong
[2012-04-10 09:29:08 -0400] Babar: preseed is supposed to be for the initial setup
[2012-04-10 09:29:13 -0400] Babar: the configuration should still be handled by chef
[2012-04-10 09:29:22 -0400] Babar: at least that's how I do it :)
[2012-04-10 09:29:41 -0400] eugenmayer1: But there is no better alternative for "configuration" without preseed, right?
[2012-04-10 09:30:13 -0400] eugenmayer1: (so i have to stick with preseed + install   and preseed + reconfigure )
[2012-04-10 09:30:57 -0400] Babar: depends... preseed  is usually only used when installation fails without it
[2012-04-10 09:31:05 -0400] Babar: like for Java, when you need to accept the license
[2012-04-10 09:31:07 -0400] eugenmayer1: i undestand
[2012-04-10 09:31:19 -0400] Babar: otherwise, debconf will enter default values, and you overwrite them with chef
[2012-04-10 09:31:25 -0400] Babar: directly in the configuration file
[2012-04-10 09:31:30 -0400] Babar: or database, or whatever :)
[2012-04-10 09:31:50 -0400] eugenmayer1: hmm kind of like the current preseed template for both
[2012-04-10 09:31:58 -0400] eugenmayer1: shrinkz the code
[2012-04-10 09:33:15 -0400] eugenmayer1: but dont mind me, iam just a noob on that field
[2012-04-10 09:33:59 -0400] Babar: nah, something more like: package "aegircl" ;  template "/etc/aegircl.conf" do source "aegirc.conf.erb" mode "..." owner ".." group "..." end
[2012-04-10 09:34:30 -0400] eugenmayer1: there is no such configuration file
[2012-04-10 09:39:06 -0400] Babar: so where is the configuration stored?
[2012-04-10 09:39:21 -0400] Babar: debconf isn't enough. Debconf is merely a frontend to put values in the right places
[2012-04-10 09:47:05 -0400] null_route: Hi guys -
[2012-04-10 09:48:17 -0400] null_route: When specifying a run-list to chef-client ( e.g. chef-client -l debug -j /tmp/runlist.json ), why does this CHANGE the run list in the node object? Is there a way to run a specific recipe without changing a node's configuration?
[2012-04-10 09:53:25 -0400] roidrage: is there a way i can force ohai to rerun from within a cookbook?
[2012-04-10 09:55:22 -0400] roidrage: ah, there's an ohai resource
[2012-04-10 09:55:23 -0400] roidrage: nevermind ;)
[2012-04-10 09:57:55 -0400] Anand: can any body give me ans?
[2012-04-10 09:58:30 -0400] Anand: why my rabbitmq server is not running while it shows success and running in console log
[2012-04-10 09:58:34 -0400] Anand: ?
[2012-04-10 10:00:31 -0400] roidrage: Anand: please have a look in the rabbitmq logs on the server. you should find them in /var/log/rabbitmq or something similar
[2012-04-10 10:00:47 -0400] roidrage: it's hard to say anything without getting some more details on this
[2012-04-10 10:13:10 -0400] mpasternacki: hi
[2012-04-10 10:13:38 -0400] mpasternacki: I was wondering: would it be a good practice to add custom methods to node class in recipe's library?
[2012-04-10 10:14:29 -0400] mpasternacki: E.g. 'debian?' and 'ubuntu?' convenience methods if I have both distros and need to special-case one of them every now and then.
[2012-04-10 10:14:48 -0400] mpasternacki: This might make the recipes quite cleaner, especially the templates.
[2012-04-10 10:14:59 -0400] eugenmayer1: any easy way to test whether and interface exists?
[2012-04-10 10:16:22 -0400] mpasternacki: eugenmayer1: just run ifconfig foo and check return value?
[2012-04-10 10:16:51 -0400] eugenmayer1: yes, thats one way. Not what i was looking for though :) though ohai would help
[2012-04-10 10:17:23 -0400] mpasternacki: May. knife node show -l is your friend here.
[2012-04-10 10:18:13 -0400] mpasternacki: there's network.interfaces
[2012-04-10 10:47:38 -0400] BryanWB: mpasternacki: checht!, tks for chef-mode! i m  a big fan,
[2012-04-10 10:48:04 -0400] BryanWB: jezcze polska nie gliewa!
[2012-04-10 10:49:31 -0400] BryanWB: mpasternacki: as to ur Q, that's a cool idea, i doubt the opscoders would ever add them to core as they have too many os types to consider
[2012-04-10 10:49:57 -0400] BryanWB: but it sounds useful to me
[2012-04-10 10:59:15 -0400] mpasternacki: BryanWB: I'm rather thinking "custom helpers useful in my particular environment"
[2012-04-10 10:59:28 -0400] mpasternacki: BryanWB: to e.g. be able to use <% if @node.production? %> in a template
[2012-04-10 10:59:51 -0400] mpasternacki: BryanWB: Nice to hear that somebody except myself uses chef-mode, btw :)
[2012-04-10 11:02:30 -0400] BryanWB: mpasternacki: a bunch of people do actually
[2012-04-10 11:02:53 -0400] BryanWB: iirc mattray does too
[2012-04-10 11:08:38 -0400] BryanWB: mpasternacki: i use roles + databags for managing application environments
[2012-04-10 11:08:52 -0400] eugenmayer1: how to find nodes with a specific reciepe? similar to storage_nodes = search(:node,
[2012-04-10 11:08:52 -0400] eugenmayer1:   "roles:bacula-sd")
[2012-04-10 11:09:13 -0400] BryanWB: (:node, "recipe:bacula-s")
[2012-04-10 11:09:29 -0400] eugenmayer1: damn. I feel pretty stupid now.
[2012-04-10 11:09:35 -0400] eugenmayer1: time to facepalm
[2012-04-10 11:09:40 -0400] eugenmayer1:  :)
[2012-04-10 11:09:43 -0400] eugenmayer1: Thank you
[2012-04-10 11:09:44 -0400] BryanWB: if not using default recipe   "bacual_nondefaultrecipe"
[2012-04-10 11:09:52 -0400] BryanWB: substitute "::" w/ _
[2012-04-10 11:10:19 -0400] eugenmayer1: yes, this was my question
[2012-04-10 11:10:23 -0400] eugenmayer1: cookbook:reciepename
[2012-04-10 11:10:24 -0400] eugenmayer1: right?
[2012-04-10 11:10:50 -0400] BryanWB: iirc, make it cookbook_recipename
[2012-04-10 11:12:38 -0400] mpasternacki: eugenmayer1: recipe: or recipes:
[2012-04-10 11:13:02 -0400] eugenmayer1: mparadise: recipe:<cookbook>_<reciepname>
[2012-04-10 11:13:07 -0400] mpasternacki: eugenmayer1: recipes: will match also recipes that are specified in the roles, recipe: will only match those directly on node's run list
[2012-04-10 11:13:09 -0400] eugenmayer1: thats the way to go, right?
[2012-04-10 11:13:32 -0400] mpasternacki: recipe:cookbook\:\:recipename (remember to quote backslashes in your strings)
[2012-04-10 11:13:58 -0400] mpasternacki: eugenmayer1: also, neither will count recipes that are there included include_recipe in other recipes.
[2012-04-10 11:14:03 -0400] mpasternacki: The last part bothers me quite a bit.
[2012-04-10 11:14:14 -0400] eugenmayer1: i see
[2012-04-10 11:14:25 -0400] eugenmayer1: thank you mpasternacki and BryanWB
[2012-04-10 11:17:46 -0400] eugenmayer1: when calling chef-client, anyway to only run a specific recipe? ( for developing purposes =
[2012-04-10 11:18:34 -0400] null_route: eugenmayer1: I'm also trying to figure that out
[2012-04-10 11:18:41 -0400] eugenmayer1:  HTTP Request Returned 400 Bad Request: invalid search query: 'recipe:kw-openvpn::maintain' Parse error at offset: 17 Reason: Expected one of \, AND, &&, OR, ||, (, NOT, ?, !, +, -, " at line 1, column 18 (byte 18) after
[2012-04-10 11:18:51 -0400] eugenmayer1: mpasternacki: thats what i get
[2012-04-10 11:18:54 -0400] null_route: Someone showed me the chef-client -j runlist.json  option
[2012-04-10 11:19:12 -0400] null_route: but that actually CHANGES the node's run list also
[2012-04-10 11:20:23 -0400] eugenmayer1: mpasternacki: ah..single quotesto go
[2012-04-10 11:27:13 -0400] mpasternacki: eugenmayer1, null_route: there was recently a discussion on chef-dev mailing list, with general conclusion being "if you need it, you're doing it wrong".
[2012-04-10 11:27:27 -0400] mpasternacki: There's shef which you may use to explore, but it's a bit of black magic.
[2012-04-10 11:27:28 -0400] eugenmayer1: ok.
[2012-04-10 11:28:16 -0400] mpasternacki: run "shef -z" on the node and it drops you off in an irb with all the cookbooks loaded, node set, and you can either run interactive code, or call out to cookbooks.
[2012-04-10 11:28:23 -0400] mpasternacki: I guess it might be possible to run a single recipe from it.
[2012-04-10 11:28:47 -0400] Anand: why rabbitmq server is start and stopped on insatnce via receipe?
[2012-04-10 11:29:00 -0400] null_route: mpasternacki: That basically means that I can't have, say, a daily chef run which makes sure my system is se3t up right, and a an hourly continuous deployment recipe?
[2012-04-10 11:29:03 -0400] Anand: i have used knife to install raceipe
[2012-04-10 11:29:36 -0400] BryanWB: binding.pry!!!
[2012-04-10 11:29:40 -0400] Anand: i have used rabbitmq cookbook from here: https://github.com/jtimberman/cookbooks/downloads
[2012-04-10 11:30:22 -0400] Anand: when i check on instance log it shows success start stack on start_log and stoped notd in stop_log
[2012-04-10 11:32:23 -0400] mpasternacki: null_route: if you set it up right, you can do a full chef-client run hourly and it won't harm.
[2012-04-10 11:33:04 -0400] mpasternacki: null_route: recipes should restart servers only when their configs change, etc (and this is how templates' and cookbook_files' "notify" works)
[2012-04-10 11:33:44 -0400] mpasternacki: null_route: but I'm not familiar with deploying with Chef, so maybe I'm missing something here.
[2012-04-10 11:33:46 -0400] null_route: mpasternacki: the hourly was generous: -) we want it minutely
[2012-04-10 11:34:03 -0400] null_route: As soon as I update a data bag with a new revision number
[2012-04-10 11:34:11 -0400] null_route: I want the git resource to fetch it
[2012-04-10 11:34:14 -0400] null_route: and restart the service
[2012-04-10 11:34:26 -0400] null_route: I can't have chef go checking my java version each time
[2012-04-10 11:35:07 -0400] null_route: mpasternacki: do you have a link to the chef-dev thread?
[2012-04-10 11:36:52 -0400] mpasternacki: If it runs hourly, I don't see any problem with checking java version (which happens in ohai anyway, which runs always)
[2012-04-10 11:37:31 -0400] null_route: mpasternacki: again - it's minutely, and it's not just java - it's users, wrappers, database clients and servers, mysql,
[2012-04-10 11:37:34 -0400] null_route: and lots of other stuff
[2012-04-10 11:37:40 -0400] null_route: the Chef run takes more tahn 5 minutes
[2012-04-10 11:37:49 -0400] null_route: and I want the Continuous deoployment to run every minute
[2012-04-10 11:38:00 -0400] null_route: and I don't think it's too much to ask that I can have 2 different chef runs
[2012-04-10 11:38:30 -0400] null_route: The continous deployment script is a data bag check and possibly a git resource - .5 seconds max
[2012-04-10 11:38:37 -0400] BryanWB: null_route: can't u just push updates from jenkins when they are ready?
[2012-04-10 11:38:39 -0400] null_route: one recipe
[2012-04-10 11:38:56 -0400] mpasternacki: Thread is here: http://lists.opscode.com/sympa/arc/chef-dev/2012-03/msg00022.html
[2012-04-10 11:38:58 -0400] BryanWB: why does ur chef run take 5 mins??
[2012-04-10 11:39:04 -0400] null_route: thanks mpasternacki !
[2012-04-10 11:39:11 -0400] null_route: BryanWB: It does LOTS of stuff
[2012-04-10 11:39:21 -0400] BryanWB: mine around 1 minuted and have tones of recipes
[2012-04-10 11:39:26 -0400] null_route: installs tomcat, DB, apache, mysql
[2012-04-10 11:39:31 -0400] null_route: java
[2012-04-10 11:39:33 -0400] null_route: and lots of other stuff
[2012-04-10 11:39:34 -0400] BryanWB: mine too
[2012-04-10 11:39:46 -0400] null_route: BryanWB: But that's not the point
[2012-04-10 11:39:48 -0400] mpasternacki: In such case I wouldn't run anything every minute, to avoid overloading server, but used "push" approach with Jenkins/Buildbot or other CI to send out the updates.
[2012-04-10 11:39:51 -0400] BryanWB: first run take 10 mins, 2nd, 3rd, 4th take 1 minute
[2012-04-10 11:40:03 -0400] null_route: when all I want to run is a git pulll
[2012-04-10 11:40:13 -0400] null_route: no - not my point :-)
[2012-04-10 11:40:23 -0400] null_route: my point is that I don't think it's crazy to have 2 different chef runs
[2012-04-10 11:40:25 -0400] BryanWB: null_route: i have same issue but am opting to push from jenkins
[2012-04-10 11:40:40 -0400] mpasternacki: null_route: you can use 2 different node names and client.pem files.
[2012-04-10 11:40:48 -0400] mpasternacki: null_route: with separate run lists.
[2012-04-10 11:40:57 -0400] mpasternacki: this hack might work.
[2012-04-10 11:41:14 -0400] null_route: mpasternacki: that's the conclusion I came to -
[2012-04-10 11:41:29 -0400] null_route: mpasternacki: I mean - The only thing better I found was to have 2 differen runlist.json files
[2012-04-10 11:41:30 -0400] mpasternacki: chef-client -N `hostname`-deployment -k /etc/chef/deployment.pem
[2012-04-10 11:41:46 -0400] null_route: run the daily: chef-client -j daily.json
[2012-04-10 11:42:01 -0400] null_route: and the hourly: chef-client -j continuousDeployment.json
[2012-04-10 11:42:10 -0400] null_route: and make sure they don't step on each other's toes.
[2012-04-10 11:43:10 -0400] mpasternacki: null_route: this will leave the run lists in the node's data on chef server. If you run just chef-client, it will use most recently saved one. But this also may be good enough.
[2012-04-10 11:43:55 -0400] mpasternacki: I'd consider a separate deployment script anyway, just to avoid loading all the chef-client/ohai machinery every minute.
[2012-04-10 11:44:32 -0400] null_route: BryanWB: That means that each jenkins run will need to upload our entire applicatino on each deployment
[2012-04-10 11:44:46 -0400] mpasternacki: null_route: nope, it can ssh and run git pull.
[2012-04-10 11:45:05 -0400] mpasternacki: null_route: just set up ssh keys and Capistrano or other script.
[2012-04-10 11:45:38 -0400] null_route: hmmm
[2012-04-10 11:46:29 -0400] Zoubi: hi guys
[2012-04-10 11:46:41 -0400] Zoubi: what is the correct syntax to include a rb file in knife.rb?
[2012-04-10 11:47:19 -0400] Zoubi: I've created a aws.rb file, and I like to include it, but neither require 'aws.rb' nor load 'aws.rb' work :/
[2012-04-10 11:47:30 -0400] mpasternacki:   Kernel::load(conf) if File.exists? conf
[2012-04-10 11:47:52 -0400] mpasternacki: that's what works for me
[2012-04-10 11:49:16 -0400] Zoubi: mpasternacki: thanks :)
[2012-04-10 11:50:18 -0400] BryanWB: null_route: can't jenkins just trigger a capistrano script?
[2012-04-10 11:50:28 -0400] Zoubi: 'aws.rb' is in the same directory as knife.rb ( ~/.chef), but I have LoadError: no such file to load -- aws.rb
[2012-04-10 11:51:23 -0400] null_route: BryanWB: we'll l;ook into that
[2012-04-10 11:51:37 -0400] null_route: My boss got the Chef bug and had me working weeks on this :-)
[2012-04-10 11:51:47 -0400] BryanWB: null_route: i think u'll find less friction there
[2012-04-10 11:51:48 -0400] null_route: now, I have all the parts, and trying to put it all together
[2012-04-10 11:51:52 -0400] Zoubi: mpasternacki: even when I set the absolute path
[2012-04-10 11:52:32 -0400] mpasternacki: Zoubi: https://gist.github.com/bd3a850e3f9eacfeeec1
[2012-04-10 11:52:36 -0400] mpasternacki: Zoubi: absolute path should work
[2012-04-10 11:53:14 -0400] mpasternacki: Zoubi: this is top of my knife.rb that loads secrets (not checked into git) and user's local config.
[2012-04-10 11:53:38 -0400] Zoubi: mpasternacki: I'm giving it a try
[2012-04-10 11:57:03 -0400] Zoubi: mpasternacki: https://gist.github.com/2350863
[2012-04-10 12:55:29 -0400] Zoubi: anyone would have an idea about why I get this error? https://gist.github.com/2350863
[2012-04-10 12:56:28 -0400] BryanWB: oh shit, http://www.stgraber.org/2012/02/24/dns-in-ubuntu-12-04/  i think i just heard lusis explode in nerdrage
[2012-04-10 12:57:46 -0400] BryanWB: can no longer manually edit /etc/resolv.conf
[2012-04-10 13:00:14 -0400] flaccid: why would you ?
[2012-04-10 13:00:39 -0400] thom: BryanWB: no, you just need to break the symlink
[2012-04-10 13:00:48 -0400] BryanWB: flaccid: edit it w/ chef i mean
[2012-04-10 13:01:04 -0400] flaccid: hmm yeah dang ubuntu, this is pointless
[2012-04-10 13:01:13 -0400] thom: guys, read the whole article
[2012-04-10 13:01:35 -0400] BryanWB: thom: ok, am just used to really aggravating shit from ubuntu
[2012-04-10 13:05:59 -0400] jespada: BryanWB, https://blueprints.launchpad.net/ubuntu/+spec/foundations-p-dns-resolving  some of us may like it or not.. but will make life easyer to "users" lets say
[2012-04-10 13:07:21 -0400] BryanWB: jespada: hey dude, did u send me those Qs? haven't seen them
[2012-04-10 13:08:11 -0400] thom: jespada: it's equally true in debian if you install resolvconf
[2012-04-10 13:08:23 -0400] jespada: BryanWB , on that right now.. few minutes.. ;) sorry for the delay
[2012-04-10 13:08:50 -0400] jespada: thom,  u right
[2012-04-10 13:11:35 -0400] flaccid: thats right. 'if you install resolvconf' which is implemented differently and more like framework as opposed to the core manager of the resolv.conf
[2012-04-10 13:13:53 -0400] flaccid: i created basic support for retaining nameservers already in resolv.conf https://github.com/flaccid/cookbooks/blob/master/cookbooks/resolver/recipes/default.rb
[2012-04-10 13:14:18 -0400] flaccid: no idea if i should update that in my opscode fork then try a pull..
[2012-04-10 13:57:29 -0400] redbug: Is there a good guide for creating simple recipes for chef-solo? Most of the tutorials seem to revolve around chef server. I just want to create a minimal recipe, something akin to "hello world"
[2012-04-10 13:58:31 -0400] motiejus: Hi all! When I am creating a user in the cookbook, I want to execute a command after it. I put a "delayed" command: user u['id'] do ... notifies :run, "execute[delete password]", :delayed end
[2012-04-10 13:58:59 -0400] motiejus: however, the command is started just before user is created. I want vice-versa
[2012-04-10 13:59:08 -0400] motiejus: how do I even more delay the dispatch of the command?
[2012-04-10 14:00:00 -0400] spyvsspy: hi, I am having a touch time with chef-server-webui on ubuntu 11.10
[2012-04-10 14:00:02 -0400] spyvsspy: it randomly hangs
[2012-04-10 14:00:08 -0400] spyvsspy: You appear to have no nodes - try connecting one, or creating or editing a client
[2012-04-10 14:00:35 -0400] spyvsspy: I have read/herad that it might be solr expander but, I cant find anything on how to troubleshoot or where to even begin
[2012-04-10 14:00:42 -0400] UForgotten: redbug: chef-solo works much the same as chef server but the difference is, node is only the node you;re running on
[2012-04-10 14:01:12 -0400] UForgotten: redbug: we use chef-solo here and I do struggle with it, because you lose the api calls to the server
[2012-04-10 14:01:34 -0400] motiejus: almost whole recipe here: http://paste.ubuntu.com/923325/ and the output log of it: http://paste.ubuntu.com/923328/
[2012-04-10 14:01:43 -0400] UForgotten: redbug: A simple hello world would be to create a solo.rb and a node.js file.  Then run chef-solo -c solo.rb -j node.js
[2012-04-10 14:01:44 -0400] motiejus: spyvsspy: check /var/log/chef/
[2012-04-10 14:01:52 -0400] motiejus: solr.log
[2012-04-10 14:02:06 -0400] UForgotten: solo.rb would be the config for the chef itself and the node.js contains the node definitions and runlist
[2012-04-10 14:02:21 -0400] redbug: UForgotten: OK, I'll try that
[2012-04-10 14:02:32 -0400] redbug: UForgotten: I'm learning this in conjunction with vagrant
[2012-04-10 14:02:38 -0400] UForgotten: redbug: http://wiki.opscode.com/display/chef/Chef+Solo
[2012-04-10 14:02:54 -0400] UForgotten: redbug: vagrant creates the node.js for you, and calls it dna.json
[2012-04-10 14:03:20 -0400] UForgotten: redbug: so the way you want to go about setting it up is to create a cookbook and some roles
[2012-04-10 14:03:33 -0400] UForgotten: redbug: then in your Vagrant file you specify the runlist
[2012-04-10 14:03:50 -0400] UForgotten: redbug: and it creates the dna.json file and calls it when you do a vagrant up or a vagrant provision
[2012-04-10 14:04:32 -0400] mpasternacki: Zoubi: I've been away for a moment. This message means that your file is being loaded, but it fails due to variable visibility issues.
[2012-04-10 14:04:43 -0400] UForgotten: redbug: you're in orlando too I see? :)
[2012-04-10 14:04:52 -0400] redbug: UForgotten: I downloaded some community cookbooks and have them running and have various roles setup (web, queue, cache, etc.) Now I want to create an application-specific cookbook to setup an environment for developers. That's why I'm looking to know what the minimum requirements are for a cookbook.
[2012-04-10 14:05:24 -0400] redbug: UForgotten: I am... in Maitland... but live near Baldwin Park
[2012-04-10 14:05:59 -0400] spyvsspy: https://gist.github.com/2351610
[2012-04-10 14:06:05 -0400] UForgotten: redbug: we should do lunch sometime. I just learned vagrant+chef-solo myself last week
[2012-04-10 14:06:14 -0400] spyvsspy: thats what im looking at, but nothing has changed on the system, nad it was working great last week
[2012-04-10 14:06:21 -0400] mpasternacki: Zoubi: What I'm doing is to only define constants (AWS_ACCESS_KEY_ID="AKIyou'd wish...") in the loaded file, and I later use those in main knife.rb
[2012-04-10 14:06:31 -0400] redbug: UForgotten: that would be awesome, what part of town?
[2012-04-10 14:06:33 -0400] mpasternacki: Zoubi: didn't try to add actual knife.rb configuration commands there
[2012-04-10 14:08:12 -0400] UForgotten: redbug: My work is near millenia.
[2012-04-10 14:09:02 -0400] redbug: UForgotten: nothing wrong with the Cheescake Factory ;)
[2012-04-10 14:09:39 -0400] motiejus: spyvsspy: verify if the files are there. Maybe a system upgrade screwed everything up?
[2012-04-10 14:10:55 -0400] spyvsspy: motiejus, odd, there is nothing there
[2012-04-10 14:11:38 -0400] motiejus: spyvsspy: this particular error message just checks if the directories exist
[2012-04-10 14:11:47 -0400] motiejus: spyvsspy: I`ll see what I have there
[2012-04-10 14:12:42 -0400] motiejus: spyvsspy: on my system there are files in every directory
[2012-04-10 14:12:54 -0400] motiejus: spyvsspy: if you want to know which, please write me to private
[2012-04-10 14:13:16 -0400] spyvsspy: Ill try reinstalling first, thanks though for the help
[2012-04-10 14:16:01 -0400] motiejus: as for my issue with :delayed script invocation: I believe creation of the user is delayed as well, and it's just wrong putting to the queue. However, I can't think of a way to work this around
[2012-04-10 14:19:43 -0400] spyvsspy: motiejus, cool figured it out
[2012-04-10 14:20:00 -0400] spyvsspy: sudo dpkg --force-depends -P chef-solr
[2012-04-10 14:20:06 -0400] spyvsspy: sudo apt-get install -f
[2012-04-10 14:20:15 -0400] spyvsspy: knife index rebuild -y
[2012-04-10 14:20:22 -0400] spyvsspy: not sure what the hell happened though, heh
[2012-04-10 14:21:01 -0400] motiejus: spyvsspy: good to know
[2012-04-10 14:46:08 -0400] sampikesley: anybody had any luck with the mdadm resource?
[2012-04-10 14:46:18 -0400] sampikesley: it creates the array, but doesn't write to mdadm.conf
[2012-04-10 14:48:05 -0400] StormSilver: Has anyone done anything with adding first_boot data from a bootstrap template?
[2012-04-10 14:48:30 -0400] StormSilver: Other than just setting the run_list? I'd like to set some per-server attributes.
[2012-04-10 14:48:35 -0400] UForgotten: sampikesley: mdadm.conf is not required, it is only helpful if autodetect does not work
[2012-04-10 14:49:00 -0400] UForgotten: sampikesley: if you read mdadm documents it tells you how to generate mdadm.conf after arrays have been created.
[2012-04-10 14:55:59 -0400] sampikesley: mdadm --detail --scan >> /etc/mdadm.conf
[2012-04-10 14:56:03 -0400] sampikesley: if anyone's wondering
[2012-04-10 14:56:07 -0400] sampikesley: works!
[2012-04-10 14:56:09 -0400] sampikesley: sweet
[2012-04-10 15:03:13 -0400] jperry: got a gem conflict with chef 0.10.8 and vagrant 1.0.2 when using a Gemfile, anyone run into this?
[2012-04-10 15:03:32 -0400] jperry: Bundler could not find compatible versions for gem "net-ssh":
[2012-04-10 15:03:33 -0400] jperry:   In Gemfile:
[2012-04-10 15:03:33 -0400] jperry:     chef (= 0.10.8) ruby depends on
[2012-04-10 15:03:33 -0400] jperry:       net-ssh (~> 2.1.3) ruby
[2012-04-10 15:03:33 -0400] jperry:     vagrant (= 1.0.2) ruby depends on
[2012-04-10 15:03:34 -0400] jperry:       net-ssh (2.2.2)
[2012-04-10 15:05:38 -0400] flaccid: motiejus: i don't think you referred the recipe and cookbook in your mail
[2012-04-10 15:06:18 -0400] flaccid: but yeah the :nothing is what you need as the default action is to execute
[2012-04-10 15:07:09 -0400] geekbri: jperry: I am running vagrant 1.0.2 and chef 0.10.8, but I have them running in different RVM gemsets so I haven't had the issue.
[2012-04-10 15:07:54 -0400] motiejus: flaccid: what do you mean?
[2012-04-10 15:08:23 -0400] motiejus: and.. what would :nothing do there?
[2012-04-10 15:08:27 -0400] flaccid: motiejus: sorry wrong person? wasn't you that posted to the mailing list?
[2012-04-10 15:08:47 -0400] flaccid: someone replied with that answer now so you are good
[2012-04-10 15:09:02 -0400] motiejus: flaccid: ah, thanks
[2012-04-10 15:09:04 -0400] flaccid: nothing means it doesn't get executed. this is covered in the doc in notifications etc.
[2012-04-10 15:09:11 -0400] motiejus: flaccid: yes, that's me
[2012-04-10 15:09:29 -0400] motiejus: ah!
[2012-04-10 15:09:32 -0400] flaccid: you need to obviously use :nothing for the delayed
[2012-04-10 15:09:33 -0400] motiejus: so that's how it works :D
[2012-04-10 15:09:53 -0400] motiejus: thanks!
[2012-04-10 15:10:20 -0400] flaccid: oh i didn't really do anything coz someone else answered but yeah
[2012-04-10 15:10:57 -0400] motiejus: it works now, my cookbook is complete :)
[2012-04-10 15:13:15 -0400] jperry: @geekbri - thanks, I'll see if that solves my problem
[2012-04-10 15:14:25 -0400] geekbri: jperry: basically what I do is have a gemset called chefrepo, and then I have a .rvmrc in my chef-repo directory so when im in that DIR all my chef necessary gems are used.  Vagrant is in my global gems.
[2012-04-10 15:24:16 -0400] jperry: @geekbri, thanks
[2012-04-10 15:24:20 -0400] geekbri: jperry: np
[2012-04-10 15:24:37 -0400] jperry: @geekbri - looks like they fixed the vagrant and chef dependency conflict for net-ssh
[2012-04-10 15:24:38 -0400] jperry: https://github.com/applicationsonline/librarian/issues/35
[2012-04-10 15:39:38 -0400] Zoubi: mpasternacki: my time to be away. I converted my aws.rb file like yours and it works just fine. Thanks
[2012-04-10 15:43:48 -0400] vluther: if i have a data bag in the manage.opscode.com console, how do i get a json representation of it out on the system?
[2012-04-10 15:44:14 -0400] vluther: i can do knife data bag show users username, but it's a string not .json
[2012-04-10 15:45:42 -0400] vluther: ahh -F json
[2012-04-10 15:45:47 -0400] vluther: simple enough.
[2012-04-10 15:46:09 -0400] sampikesley: -F json
[2012-04-10 15:46:11 -0400] sampikesley: that
[2012-04-10 15:46:44 -0400] vluther: :)
[2012-04-10 15:47:05 -0400] sampikesley: ooh
[2012-04-10 15:47:09 -0400] sampikesley: -F yaml works too
[2012-04-10 15:47:13 -0400] sampikesley: nie
[2012-04-10 16:12:15 -0400] Javin: Does anyone know if there is a known bug in 10.6 regarding the Yum provider and the options clause in the package resource?
[2012-04-10 16:12:44 -0400] |shad0w|: Javin, what issue are you having?
[2012-04-10 16:12:47 -0400] Javin: I am seeing behavior where enabling a repo via options is only applied to the actual yum install command and not the yum info command that determines if a good candidate rpm exists, which therefore causes a failure since it doesn't find anything without the --enablerepo= attribute
[2012-04-10 16:13:06 -0400] |shad0w|: yeah, the script that builds the package cache doesn't take options
[2012-04-10 16:14:14 -0400] Javin: Is there a decent work around, or am I simply forced to enable the repo completely, which I'd prefer not to do ideally.
[2012-04-10 16:14:59 -0400] |shad0w|: put the package install in an execute resource is probably your best bet
[2012-04-10 16:16:06 -0400] Javin: |shad0w|: Yeah, that makes sense. Ok. Thank you for the helping hand. Much appreciated.
[2012-04-10 16:18:41 -0400] till_: with a custom resource/provider, if my resource is called 'foo': foo "something" - and I have a bunch of actions. how do i define what is run if none is provided?
[2012-04-10 16:19:17 -0400] jtimberman: till_: in an lwrp, you have to write an initialize method in the resource to set the default action.
[2012-04-10 16:19:32 -0400] till_: ah!
[2012-04-10 16:19:39 -0400] till_: that makes sense
[2012-04-10 16:19:46 -0400] jtimberman: e.g, https://github.com/opscode-cookbooks/apt/blob/master/resources/repository.rb#L22-25
[2012-04-10 16:20:05 -0400] jtimberman: till_: in chef 0.10.10, we'll have a method for setting the default action
[2012-04-10 16:20:20 -0400] till_: jtimberman: any idea what i could look at?
[2012-04-10 16:20:22 -0400] till_: nm
[2012-04-10 16:20:25 -0400] till_: O_o
[2012-04-10 16:20:47 -0400] hoover_damm: is 1.0.10 out?
[2012-04-10 16:20:55 -0400] hoover_damm: err 0.10.10? or are you talking about the rc's?
[2012-04-10 16:21:10 -0400] jtimberman: (which is in beta)
[2012-04-10 16:21:32 -0400] till_: jtimberman: i was aiming for attribute :action, default => :install
[2012-04-10 16:21:37 -0400] till_: but that didn't work
[2012-04-10 16:21:47 -0400] jtimberman: till_: ah no, actions are not attributes.
[2012-04-10 16:28:08 -0400] till_: jtimberman: worked beautifully, thanks very much
[2012-04-10 16:32:51 -0400] mikeg: Can I use a resource to loop over other resources?  I want to use another resource to notify the "loop resource" to fire off.  Something like this: http://paste2.org/p/1974098
[2012-04-10 16:33:10 -0400] mikeg: Is that the way I should be trying to do this or is there a better way?
[2012-04-10 16:36:18 -0400] miah: The Vandals = a great band to wake up to
[2012-04-10 16:37:52 -0400] holoway: mikeg: lemme take a shot at refactoring that for you
[2012-04-10 16:39:16 -0400] mikeg: holoway: thanks
[2012-04-10 16:44:44 -0400] miah: mikeg: fyi. if you post code via gist.github.com it makes it easier for people to comment and provide diffs =)
[2012-04-10 16:45:02 -0400] holoway: mikeg: http://paste2.org/p/1974113
[2012-04-10 16:46:49 -0400] mikeg: miah: cool.  I'll remember that
[2012-04-10 16:48:51 -0400] mikeg: holoway: very cool.  much better.  forgot directory resource will just be skipped if already there so doesn't need to be notified.  and I always forget about the anti-notify, subscribe.  thanks a lot
[2012-04-10 16:53:47 -0400] holoway: mikeg: no problem
[2012-04-10 16:53:55 -0400] holoway: mikeg: I use subscribes so rarely, I actually had forgotten about it too
[2012-04-10 16:53:58 -0400] holoway: :)
[2012-04-10 16:57:43 -0400] agoddard: jtimberman: somehow, .run_state[:seen_recipes] doesn't show the included recipe either. Though I'm starting to think I must be approaching this the wrong way
[2012-04-10 16:58:36 -0400] agoddard: during the chef-client run, I see Processing package[rabbitmq-server] action install (rabbitmq::default line 52)
[2012-04-10 16:59:19 -0400] agoddard: but in another cookbook, node.recipe? "rabbitmq" node.recipe? "rabbitmq::default", node.run_state[:seen_recipes], node.recipes.include?("rabbitmq::default"), node[:recipes].include?("rabbitmq::default") < none of them see the recipe :/
[2012-04-10 17:07:10 -0400] holoway: agoddard: is the recipe you are running before or after the include?
[2012-04-10 17:07:22 -0400] holoway: agoddard: seen_recips gets built up as they are evaluated
[2012-04-10 17:08:01 -0400] z: Chef: Making deployments awesomely fast, regardless of whether your deployment is good *or* bad.
[2012-04-10 17:12:12 -0400] miah: z: this is why people use environments and _test_ their code before deploying
[2012-04-10 17:12:47 -0400] hoover_damm: z, having multiple chef servers helps too
[2012-04-10 17:12:58 -0400] hoover_damm: z, or a hosted test account, and a hosted production
[2012-04-10 17:13:11 -0400] miah: or vagrant + chef-solo
[2012-04-10 17:13:11 -0400] hoover_damm: there's a variety of ways to seperate yourself so you don't douse yourself
[2012-04-10 17:13:18 -0400] hoover_damm: none of them is right nor wrong
[2012-04-10 17:13:20 -0400] hoover_damm: they all work
[2012-04-10 17:13:43 -0400] hoover_damm: also letting your peers know when your hacking on cookbook x... so if you need it to run don't run chef-client
[2012-04-10 17:13:47 -0400] hoover_damm: is nice
[2012-04-10 17:14:00 -0400] agoddard: holoway: that might be it, rabbitmq install is being executed later in the run, didn't notice that before
[2012-04-10 17:14:03 -0400] z: miah: Oh I make comments like that just to prod you sleepy types into life ;) If only "simple" approaches to testing (or even complex ones) caught all problems... :-P
[2012-04-10 17:14:26 -0400] miah: im not sleepy =)
[2012-04-10 17:14:28 -0400] paige: Chef::Mixin::Template::TemplateError (undefined method `search' for #<Erubis::Context:0x7f942de760f8>) on line #1:
[2012-04-10 17:14:46 -0400] paige: where else would I do this
[2012-04-10 17:15:05 -0400] agoddard: holoway: this is a role with a recipe that includes a recipe which looks for the existence of another recipe that's included by another recipe 0_0 :D
[2012-04-10 17:15:13 -0400] miah: paige: you should do your searches in your recipe and pass the result as a variable to your template
[2012-04-10 17:15:45 -0400] paige: ahh
[2012-04-10 17:15:49 -0400] paige: I thought that might be the case
[2012-04-10 17:15:54 -0400] paige: http://mrmiller.nonesensedomains.com/2010/05/26/chef-search-and-templates-be-aware/
[2012-04-10 17:15:57 -0400] paige: I can see that here
[2012-04-10 17:16:23 -0400] miah: templates?
[2012-04-10 17:16:23 -0400] bawt: templates is http://wiki.opscode.com/display/chef/Templates
[2012-04-10 17:16:26 -0400] miah: has more details
[2012-04-10 17:16:55 -0400] |shad0w|: y0 dawg I heard you like recipes
[2012-04-10 17:17:07 -0400] eugenmayer1: how you guys decide in a reciepe whether to restart a service or not?
[2012-04-10 17:17:34 -0400] paige: fanx u~
[2012-04-10 17:18:15 -0400] |shad0w|: eugenmayer1, I usually notify services from within another resource. IE a package was installed or updated, a template for the service changed, etc etc
[2012-04-10 17:19:36 -0400] eugenmayer1: hmm, the question is, how i actually notice when to generate a template, thats one of the issues
[2012-04-10 17:20:03 -0400] eugenmayer1: meaning, currently iam just writing down the template again and again, in most cases, it does not change -> needs no restart
[2012-04-10 17:20:09 -0400] paige: https://github.com/cookbooks/iptables/blob/master/recipes/default.rb
[2012-04-10 17:20:11 -0400] hoover_damm: paige, search is in a recipe, not a template
[2012-04-10 17:20:19 -0400] paige: hoover_damm
[2012-04-10 17:20:20 -0400] paige: yea but
[2012-04-10 17:20:27 -0400] paige: how do I pass variables to iptables_rule
[2012-04-10 17:20:57 -0400] |shad0w|: eugenmayer1, if a template resource compiles into the same file it doesn't do anything and hence doesn't notifiy
[2012-04-10 17:21:08 -0400] eugenmayer1: really?
[2012-04-10 17:21:11 -0400] |shad0w|: yes
[2012-04-10 17:21:18 -0400] hoover_damm: who owns github.com/coookbooks?
[2012-04-10 17:21:21 -0400] eugenmayer1: that sounds perfect. So you go with this :notify notation?
[2012-04-10 17:21:22 -0400] hoover_damm: that's really disturbing?
[2012-04-10 17:21:32 -0400] hoover_damm: they seem to have collected cookbooks I wrote at EY
[2012-04-10 17:21:34 -0400] hoover_damm: and other random crap
[2012-04-10 17:21:39 -0400] |shad0w|: eugenmayer1, mostly yes
[2012-04-10 17:21:40 -0400] patcon: hey guys! can anyone confirm that pear.php.net is down now and failing package downloads?
[2012-04-10 17:21:53 -0400] eugenmayer1: could you give a short example of that usage?
[2012-04-10 17:22:04 -0400] patcon: the twitters are silent, but I'm getting the same thing on remote machines... tis wierd
[2012-04-10 17:22:49 -0400] patcon: aaaaand we're back
[2012-04-10 17:22:52 -0400] paige: nevermind
[2012-04-10 17:22:52 -0400] paige: https://github.com/cookbooks/iptables/blob/master/definitions/iptables_rule.rb
[2012-04-10 17:22:54 -0400] paige: found it
[2012-04-10 17:23:00 -0400] |shad0w|: notify?
[2012-04-10 17:23:00 -0400] bawt: notify is http://wiki.opscode.com/display/chef/Resources#Resources-Meta
[2012-04-10 17:23:27 -0400] |shad0w|: should be some examples there eugenmayer1
[2012-04-10 17:24:34 -0400] eugenmayer1: thank you!
[2012-04-10 17:25:30 -0400] paige: but um
[2012-04-10 17:25:35 -0400] paige: how do I pass arams to it?
[2012-04-10 17:26:10 -0400] hippieha`: paige: node.set ?
[2012-04-10 17:26:45 -0400] hoover_damm: parameters are set by the caller
[2012-04-10 17:26:53 -0400] hoover_damm: iptables_rule "bob" do
[2012-04-10 17:26:59 -0400] hoover_damm: variables(
[2012-04-10 17:27:01 -0400] paige: hippieha` iptables_rule(array("chefadmin","variables" => array())) ?
[2012-04-10 17:27:06 -0400] dodizzle: do I need to make my laptop a client before I can use knife to bootstrap other nodes?
[2012-04-10 17:27:08 -0400] hoover_damm: :this_should_be_this => settingthat,
[2012-04-10 17:27:08 -0400] hoover_damm: )
[2012-04-10 17:27:26 -0400] hoover_damm: just like a regular resource paige
[2012-04-10 17:28:04 -0400] paige: I dont know enough about ruby to determine the usage of this :
[2012-04-10 17:28:04 -0400] paige: define :iptables_rule, :enable => true, :source => nil, :variables => {}, :cookbook => nil do
[2012-04-10 17:28:05 -0400] rshade98: inside of shef, can I just require a file and it word. I am trying to test a module
[2012-04-10 17:28:05 -0400] paige:   template_source = params[:source] ? params[:source] : "#{params[:name]}.erb"
[2012-04-10 17:29:25 -0400] paige: https://github.com/cookbooks/iptables/blob/master/definitions/iptables_rule.rb
[2012-04-10 17:29:35 -0400] paige:     variables params[:variables]
[2012-04-10 17:29:45 -0400] paige: how do I set that from where Im calling the function iptables_rule
[2012-04-10 17:30:14 -0400] agoddard: hoover_damm: that cookbooks repo consolidates a bunch of other cookbooks, I think their scripts for how they harvest them are on there somewhere
[2012-04-10 17:31:58 -0400] paige: iptables_rule name:"chefadmin", variables:client_ips?
[2012-04-10 17:32:04 -0400] hoover_damm: agoddard, yeah some old repos I've long lost deleted that are still hosted... some stuff that attributes me as an owner that i'm not an owner of
[2012-04-10 17:32:19 -0400] hoover_damm: i'll email the author of the repo I guess
[2012-04-10 17:33:52 -0400] agoddard: hoover_damm: ya, all 4 of those dudes are around, should be easy to get in contact with them
[2012-04-10 17:33:58 -0400] paige: oh you have to use do
[2012-04-10 17:35:24 -0400] dodizzle: using hosted chef is confusing
[2012-04-10 17:36:01 -0400] dodizzle: I got knife to work but can't bootstrap nodes
[2012-04-10 17:36:20 -0400] dodizzle: getting an error when attempting to register the new client
[2012-04-10 17:36:25 -0400] paige: coding recipes is confusing
[2012-04-10 17:36:27 -0400] paige: so is ruby
[2012-04-10 17:36:46 -0400] dodizzle: paige let go of syntax
[2012-04-10 17:36:48 -0400] hoover_damm: learning ruby is the a good step in learning chef
[2012-04-10 17:36:48 -0400] paige: I asked some dude in teh ruby channel and he basically said chef is too different from ruby to help you
[2012-04-10 17:36:50 -0400] paige: like wtf
[2012-04-10 17:36:55 -0400] paige: I think he was just being a tool but
[2012-04-10 17:37:00 -0400] agoddard: 0_o
[2012-04-10 17:37:00 -0400] hoover_damm: very tool
[2012-04-10 17:37:12 -0400] dodizzle: paige he was a tool, chef recipies is 99% ruby
[2012-04-10 17:37:26 -0400] paige: well I mean
[2012-04-10 17:37:26 -0400] dodizzle: /is/are/
[2012-04-10 17:37:28 -0400] jkyle: is there something wrong with this query? It has no effect on the matched node => knife exec -E 'nodes.transform("name:*i-00004dfe*") {|n| n.chef_environment="new_enviornment"}'
[2012-04-10 17:37:31 -0400] hoover_damm: a lot of the confusion of chef is how to do things, and most of that is finding a pattern that works for you
[2012-04-10 17:37:32 -0400] jkyle: Hosted chef ^^
[2012-04-10 17:37:39 -0400] paige: I figure I could probably answer my question for somebody if I knew ruby better
[2012-04-10 17:37:42 -0400] paige: this guy was like
[2012-04-10 17:37:52 -0400] paige: I showed him a code snippet for the iptables_rule define
[2012-04-10 17:37:57 -0400] paige: I showed him how its used
[2012-04-10 17:38:06 -0400] paige: and he's like thats TOO hard to learn and Im not gonna just to help you
[2012-04-10 17:38:11 -0400] paige: its like 15 lines of code.
[2012-04-10 17:38:13 -0400] agoddard: maybe it was the ruby (gemstone) not ruby (programming language) channel...
[2012-04-10 17:38:39 -0400] agoddard: the gemstone folk would probably find it very confusing..
[2012-04-10 17:38:57 -0400] paige: #ruby right?
[2012-04-10 17:39:02 -0400] jtimberman: dodizzle: hey, sorry you're having trouble with bootstrapping any nodes. do you have the correct validator certificate, and is knife.rb pointing to the right chef_server_url for your organization?
[2012-04-10 17:39:14 -0400] jkyle: the shorter question is: how do I change the environment of a node after its been registered?
[2012-04-10 17:39:44 -0400] jtimberman: jkyle: you can edit the node with knife (knife node edit NAME) or use the webui. you can also use knife exec or "shef" to modify the node.
[2012-04-10 17:39:53 -0400] dodizzle: jtimberman yes my knife.rb is the one I downloaded from the site
[2012-04-10 17:40:14 -0400] jtimberman: dodizzle: what is the error you're seeing when new client is registering?
[2012-04-10 17:40:26 -0400] jtimberman: dodizzle: if you're trying to reregister a client that already exists, that will fail.
[2012-04-10 17:40:26 -0400] jkyle: ah that might work better
[2012-04-10 17:40:34 -0400] dodizzle: jtimberman FATAL: Net::HTTPServerException: 401 "Unauthorized"
[2012-04-10 17:40:48 -0400] dodizzle: I am able to run knife client list
[2012-04-10 17:41:05 -0400] vluther: are chef and puppet complements of each other, or competitors?
[2012-04-10 17:41:24 -0400] jkyle: hm, this is interesting
[2012-04-10 17:41:51 -0400] jkyle: the json from the knife node edit has _two_ entries for chef_environemnt.
[2012-04-10 17:42:05 -0400] jkyle: one in a "normal" key and one at the top level
[2012-04-10 17:42:50 -0400] jkyle: so "chef_environment": "_default", "normal":{"chef_environment": "my_environment"}
[2012-04-10 17:43:24 -0400] dodizzle: jtimberman is the validator.pem the client pem?
[2012-04-10 17:44:00 -0400] jtimberman: dodizzle: no. the "validator.pem" is the key file for the validation client, which is only used to create a new API client.
[2012-04-10 17:44:03 -0400] agoddard: paige: ha, yeah that's the right one.. right channel, wrong advice ;)
[2012-04-10 17:44:36 -0400] jtimberman: dodizzle: the node's API client will have a "client.pem" after the validator creates one, and it will use that for authentication.
[2012-04-10 17:45:17 -0400] dodizzle: jtimberman thats where the problem lies, does my laptop need to be a client in order to bootstrap nodes?
[2012-04-10 17:45:58 -0400] jtimberman: dodizzle: no. during 'knife bootstrap', your laptop actually does not connect to the chef server at all, knife bootstrap opens an ssh connection to the target system.
[2012-04-10 17:46:15 -0400] jtimberman: dodizzle: knife bootstrap will use your local knife configuration to tell the remote node its config for the right chef server.
[2012-04-10 17:46:24 -0400] jperry: what is the recommended environment setup if I have multiple organizations with hosted chef
[2012-04-10 17:46:30 -0400] dodizzle: so I can connect and it installs chef but its fails when registering the client
[2012-04-10 17:46:31 -0400] jperry: where should my .pem files exist
[2012-04-10 17:46:39 -0400] jperry: and how do I switch between each organization
[2012-04-10 17:46:54 -0400] jtimberman: jperry: Good question!
[2012-04-10 17:47:08 -0400] agoddard: jperry: I just have two directories, each with a .chef directory, and when I'm in each, I'm using its knife.rb
[2012-04-10 17:47:24 -0400] jperry: okay so in each .chef directory what do you have in them?
[2012-04-10 17:47:51 -0400] agoddard: jperry: pems, plugins, knife.rb
[2012-04-10 17:48:19 -0400] jperry: @agoddard - okay, thx.  I'll try that
[2012-04-10 17:48:40 -0400] agoddard: so when I want one setup, I cd ~/cli-chef/, when I want the other, I cd ~/rc-chef. I made sure not to have a ~/.chef 'cause then I might accidentally the wrong chef-server ;)
[2012-04-10 17:48:46 -0400] jtimberman: jperry: What I do: 1 user, 1 user certificate (~/.chef/USERNAME.pem). each organization I have, I put the validation certificate file in ~/.chef/ORGNAME-validator.pem.
[2012-04-10 17:49:13 -0400] jtimberman: jperry: then I have a knife.rb which switches which ORGNAME I'm using based on an environment variable.
[2012-04-10 17:49:50 -0400] jtimberman: the approach by agoddard is equally usable. :)
[2012-04-10 17:50:58 -0400] agoddard: jperry: ah yeah, my setup is because everything is different (cookbooks, data bags, chef-servers). If you want to share that stuff, jtimberman's way will be better
[2012-04-10 17:51:19 -0400] jperry: ah okay cool
[2012-04-10 17:51:26 -0400] agoddard: jperry: I share bootstraps between my orgs with a submodule, and cookbooks with Librarian, but otherwise they're totally separate
[2012-04-10 17:51:27 -0400] jperry: thx
[2012-04-10 17:51:39 -0400] eugenmayer1: how would i search for all nodes, having [:bacula][:dir][:name]:'some-dir' ?
[2012-04-10 17:51:44 -0400] jperry: both your suggesions are great
[2012-04-10 17:51:48 -0400] jperry: suggestions
[2012-04-10 17:51:49 -0400] jperry: thx
[2012-04-10 17:51:52 -0400] agoddard: np
[2012-04-10 17:51:55 -0400] jtimberman: eugenmayer1: bacula_dir_name:some-dir
[2012-04-10 17:52:10 -0400] jtimberman: eugenmayer1: in the search index, the attributes are flattened with underscores.
[2012-04-10 17:52:20 -0400] eugenmayer1: good to know. Thank you!
[2012-04-10 17:52:37 -0400] eugenmayer1: If iam allow to mention: This channel is awesome.
[2012-04-10 17:52:38 -0400] |shad0w|: jkyle, your knife exec was close
[2012-04-10 17:52:46 -0400] dodizzle: jtimberman it works now, this is the 4th org that I'm bringing the glory of chef to
[2012-04-10 17:52:55 -0400] |shad0w|: knife exec -E 'nodes.transform("name:*i-00004dfe*") {|n| n.chef_environment("new_enviornment")}'
[2012-04-10 17:53:34 -0400] jtimberman: dodizzle: cool :D
[2012-04-10 17:53:56 -0400] tarrant: I'm attempting to write a ohai plugin. I stuck orly.rb into a ohai_plugins directory. When I do a ohai -d /path/to/ohai_plugins it doesn't load the plugin. When I do a chef-client I can see the plugin. How do I get ohai -d to pick it up?
[2012-04-10 17:54:19 -0400] dodizzle: stoked
[2012-04-10 17:54:32 -0400] tortoise_: when you run chef-client where does it grab the hostname for the chef node you are attempting to add?
[2012-04-10 17:54:41 -0400] tortoise_: For whatever reason it's just pulling the hostname and not the full hostname
[2012-04-10 17:54:46 -0400] tortoise_: so like, blah, instead of blah.something.cpom
[2012-04-10 17:54:54 -0400] tortoise_: :s/cpom/com/cg
[2012-04-10 17:55:13 -0400] eugenmayer1: dodizzle: jtimberman once you addicted, ending up like me, writing one recipe after the other, for arround 20 hours
[2012-04-10 17:55:18 -0400] rshade98: anyone know how you include a module from shef, I have tried require 'file.rb'
[2012-04-10 17:55:27 -0400] rshade98: but it doesn't see to include the modules
[2012-04-10 17:56:48 -0400] eugenmayer1: Iam not even sure there is such a thing already. Wrote a client / server recipe to create / deploy client configuration ( user/pw auth ) and auto-register them in the server with those user/pw, creating a client file to push the ip
[2012-04-10 17:57:25 -0400] eugenmayer1: same for bacula-fd clients  with bacula dir . It so awesome easy with chef. So effective, iam login it.
[2012-04-10 17:57:28 -0400] eugenmayer1: Ok - enaugh praise!
[2012-04-10 17:57:29 -0400] mhalligan: What's required to create a new user that can use knife?
[2012-04-10 17:57:42 -0400] eugenmayer1: mhalligan: it must be a admin-node
[2012-04-10 17:57:55 -0400] eugenmayer1: mhalligan: or are you talking about a simple node to deploy to?
[2012-04-10 17:58:38 -0400] tarrant: eugenmayer1: A admin client, knife.rb and if you want to bootstrap nodes the validation.pem.
[2012-04-10 17:58:55 -0400] eugenmayer1: mhalligan: ^^
[2012-04-10 17:59:15 -0400] tarrant: err yea mhalligan
[2012-04-10 17:59:33 -0400] mjreed2: /usr/local/lib/site_ruby/1.8/rubygems/specification.rb:1615:in `raise_if_conflicts': Unable to activate chef-0.10.8,because json-1.6.6 conflicts with json (<= 1.6.1,>= 1.4.4) (Gem::LoadError)
[2012-04-10 17:59:41 -0400] mjreed2: so what is it about json > 1.6.1 that chef doesn't like?
[2012-04-10 18:09:30 -0400] miah: knife create user <foo>
[2012-04-10 18:09:40 -0400] miah: if you want that user to have the ability to create users then you have to give them admin
[2012-04-10 18:10:44 -0400] motiejus: How do I trace the output of apt when I get this error? package[curl] (/var/cache/chef/cookbooks/packages/recipes/default.rb:2:in `from_file') had an error:
[2012-04-10 18:10:45 -0400] motiejus: package[curl] (packages::default line 2) had an error: Chef::Exceptions::Exec: apt-get -q -y install curl=7.21.0-2.1+squeeze2 returned 100, expected 0
[2012-04-10 18:10:50 -0400] mjreed2: knife client create -a
[2012-04-10 18:11:07 -0400] tarrant: `ohai -d /etc/chef/ohai_plugins` works. `ohai -d /etc/chef/ohai_plugins/` does not.
[2012-04-10 18:11:10 -0400] motiejus: error is reproducible only when invoked from chef-client service (running chef-client from command line makes installation ok)
[2012-04-10 18:11:17 -0400] mjreed2: 100 usually means some other apt process was running and had a lock on the package stuff.
[2012-04-10 18:11:58 -0400] mjreed2: could be a race condition between a manual chef-client run and the service, or between the service and the initial run (on bootstrap)
[2012-04-10 18:13:42 -0400] miah: erh. herp derp
[2012-04-10 18:13:49 -0400] miah: knife client create <foo>
[2012-04-10 18:13:56 -0400] miah: i am full of derps this morning
[2012-04-10 18:21:16 -0400] eugenmayer1: 42 lines to automate bacula-client jobs for bacula dirs. This is rediculous!
[2012-04-10 18:22:20 -0400] jtimberman: eugenmayer1: in a good or bad way?
[2012-04-10 18:22:31 -0400] eugenmayer1: awesomesouce.
[2012-04-10 18:23:12 -0400] eugenmayer1: ("very good" to be sure you get it right)
[2012-04-10 18:23:27 -0400] jtimberman: ah :)
[2012-04-10 18:23:30 -0400] tortoise_: so any idea where chef is fetching the hostname for a system when i run chef-client on a new node?
[2012-04-10 18:23:34 -0400] motiejus: mjreed2: I get those kind of errors when running chef-client for the first time
[2012-04-10 18:23:38 -0400] tortoise_: its only pulling the first part, and not the fqdn
[2012-04-10 18:23:49 -0400] motiejus: mjreed2: everything is happening on a freshly bootstrapped VM
[2012-04-10 18:24:09 -0400] motiejus: i.e. xen-create-image ... && knife bootstrap, literally
[2012-04-10 18:24:55 -0400] eugenmayer1: jtimberman: did you write the chef-client recipe?
[2012-04-10 18:24:58 -0400] motiejus: for instance, installation fails, after 30 minutes some packages come through, and it stops again with the same error
[2012-04-10 18:25:13 -0400] motiejus: probably I will get more data and write to mailing list instead
[2012-04-10 18:25:14 -0400] tarrant: tortoise_: hostname not hostname -f
[2012-04-10 18:25:33 -0400] tarrant: use node[:fqdn] for the fqdn
[2012-04-10 18:26:40 -0400] wonko_be: hey, is there an easy way to assign a variable a value in a ruby_block, and use that variable in another resource further in the recipe?
[2012-04-10 18:26:53 -0400] jtimberman: eugenmayer1: along with a few other contributors, yes.
[2012-04-10 18:27:12 -0400] wonko_be: I know this somehow goes against the two-phased running of chef, but I see no other option
[2012-04-10 18:27:18 -0400] eugenmayer1: jtimberman: did you saw my comments on source_url? I think the logic is flipped in the template - at least i had to fork it today
[2012-04-10 18:27:34 -0400] jtimberman: eugenmayer1: where?
[2012-04-10 18:28:00 -0400] eugenmayer1: jtimberman: client.rb.erb http://pastie.org/3763518
[2012-04-10 18:28:22 -0400] eugenmayer1: (thats my version). Basically, if you deploye chef-client:config and set source_url - it never gets applied
[2012-04-10 18:28:40 -0400] eugenmayer1: (in the original)
[2012-04-10 18:29:58 -0400] aslan: is there a nagios check for chef server?
[2012-04-10 18:32:21 -0400] aslan: something that checks the health of both server and maybe solr?
[2012-04-10 18:32:33 -0400] wonko_be: this goes with my question: http://pastie.org/3763544
[2012-04-10 18:33:09 -0400] wonko_be: I can only know the content of the magic once it is mounted, and only then I can start the daemon with the correct option
[2012-04-10 18:33:35 -0400] wonko_be: obviously, this doesn't work as I want it to work
[2012-04-10 18:35:24 -0400] holoway: wonko_be: your issue is about when things get processed
[2012-04-10 18:35:37 -0400] eugenmayer1: hrm, failing to install libc6-dev on to install ruby1-8-dev to be able to bootstrap a chef clienton a normal debian squeeze. Very odd
[2012-04-10 18:35:40 -0400] holoway: wonko_be: you need to wrap up the logic that grabs the index the shell script to start the daemon
[2012-04-10 18:36:00 -0400] holoway: wonko_be: I gootta run, but I'll be back in a few hours if nobody else helps out
[2012-04-10 18:38:45 -0400] eugenmayer1: oha, i had to downgrad libc6 and libc6-bin back to  2.11.3-2 and could then install libc6-dev ( just for anybody jumps into that trap ). Running a stable squeeze - nobackports
[2012-04-10 18:40:20 -0400] rshade98: what would you require from a library to access node[]
[2012-04-10 18:47:33 -0400] motiejus: eugenmeyer1: I have no problems bootstrapping chef-client (I do it via apt, no gems)
[2012-04-10 18:47:39 -0400] motiejus: I am doing it just now on squeeze
[2012-04-10 18:47:42 -0400] motiejus: pure squeeze
[2012-04-10 18:50:12 -0400] paige: I wonder what other awesome stuff I should do with chef
[2012-04-10 18:50:20 -0400] paige: I dont think I really need nagios
[2012-04-10 18:50:27 -0400] paige: it'd be kinda cool but meh
[2012-04-10 18:51:49 -0400] ericm__: Hi Everyone. I've got a quick chef question. We are considering using chef to update some kiosks that are out in the wild. I want to schedule runs of chef-client so it doesn't interfere with an active user session. I can run the client in the background in between user sessions, but I'd like to pop up a "the system is currently updating" sort of message. To pop that up though, I'd need to be able to detect if chef-client was
[2012-04-10 18:51:50 -0400] ericm__: about to make some modifications or if the machine is already up to date. Any ideas on how to do this?
[2012-04-10 18:52:17 -0400] tortoise_: tarrant, sorry what do you mean by that?
[2012-04-10 18:52:36 -0400] tortoise_: tarrant, the hostname appears normally, it says blah.something.com
[2012-04-10 18:53:20 -0400] eugenmayer1: jtimberman: did it get solved in 0.10.10 that searching with recipe does not resolve roles? That makes this search practically useless
[2012-04-10 18:53:45 -0400] eugenmayer1: jtimberman: as as far as i undestood, roles are "best practice" for using chef
[2012-04-10 18:55:51 -0400] tarrant: tortoise_: My apologies it pulls it from /etc/hosts
[2012-04-10 18:57:37 -0400] wonko_be: holoway: all: I might have oversimplified the pastie
[2012-04-10 18:58:04 -0400] mattray: ericm__: cron on off-hours?
[2012-04-10 18:58:43 -0400] wonko_be: i've updated the pastie to give a better idea of the problem... (http://pastie.org/3763544)
[2012-04-10 18:59:04 -0400] ericm__: mattray: I'll probably have my UI app kick it off during a period of inactivity. We want to get as close to realtime deployment as possible (plus, the kiosks are in use 24/7)
[2012-04-10 19:00:05 -0400] tortoise_: tarrant, ah
[2012-04-10 19:00:11 -0400] wonko_be: I can't just wrap the logic in the starting-script, as I need to do a lot to A) get the index and B) once I have it, do a couple of things to get everything in place
[2012-04-10 19:00:24 -0400] ericm__: In other words, it might run as often as every 30 to 15 minutes. I want to keep he kiosks up to date, but only present the "system is updating" message when there is actually something that will be updated.
[2012-04-10 19:02:22 -0400] aslan: is there a nagios check for chef server?
[2012-04-10 19:02:56 -0400] tortoise_: tarrant, still doing squat..
[2012-04-10 19:03:05 -0400] mattray: ericm__: if you're using xscreensaver or something similar, you can usually run a command when it kicks in. Perhaps that can be a flag that signals Chef it's OK to run? Then throw up a locked message that gets cleared by an EventHandler?
[2012-04-10 19:04:11 -0400] ericm__: mattray: Yup, that's the direction. The key though is that I only want to lock the machine if something is going to update. That's what I'm struggling with. I don't want to lock the machine every 15 minutes.
[2012-04-10 19:04:49 -0400] asg: ericm__: noop support is coming sometime this year iirc. That's probably what you would want to use to make that determination when it is available.
[2012-04-10 19:04:50 -0400] mattray: ericm__: the chef-client run won't make any changes if nothing's changed
[2012-04-10 19:05:07 -0400] mattray: so running it is harmless
[2012-04-10 19:05:33 -0400] ericm__: asg: That's exactly what we are looking for. Is there a ticket for that that I can track?
[2012-04-10 19:05:38 -0400] tortoise_: i have in my hosts, and its still pulling just the first portion of the fqdn
[2012-04-10 19:06:03 -0400] ericm__: _asg: Nevremind, I got it: http://tickets.opscode.com/browse/CHEF-13
[2012-04-10 19:06:04 -0400] tarrant: tortoise_: node[:hostname] is always going to pull the first portion. I'm confused in what your trying to accomplish.
[2012-04-10 19:06:08 -0400] mattray: ericm__: what's the point of using the noop mode though? Won't these be unattended?
[2012-04-10 19:07:13 -0400] asg: mattray: I think ericm__ only wants to pop the 'system updating message' when a run is going to make a change. If there is some way he can make that determination on a chef-client run, he'd be good to go.
[2012-04-10 19:07:23 -0400] ericm__: mattray: Yes, they will be unattended, but we can do something like run it in noop mode to see if any changes will occur. If some will, then we put up the "system upgrading" message and lock the kiosk. 99% of the time, we won't need to lock the machine.
[2012-04-10 19:07:35 -0400] ericm__: asg: Exactly!
[2012-04-10 19:07:49 -0400] mattray: ok
[2012-04-10 19:08:37 -0400] tortoise_: tarrant, when I run chef-cleint, i wnt the node to be added as "fqdn"
[2012-04-10 19:08:40 -0400] tortoise_: so blah.something.com
[2012-04-10 19:09:54 -0400] tarrant: Oh you want the node name to be the fqdn.
[2012-04-10 19:09:59 -0400] tortoise_: ya :)
[2012-04-10 19:10:18 -0400] tarrant: When I bootstrap I do a -N <FQDN> to accomplish that.
[2012-04-10 19:10:34 -0400] tortoise_: ya, i've tried that to but the FQDN never gets populated and breaks our system
[2012-04-10 19:10:36 -0400] tortoise_: for whatever reason
[2012-04-10 19:10:47 -0400] tarrant: Or I beleive you can set the node_name "blah.foo.com" in /etc/chef/client.rb
[2012-04-10 19:10:57 -0400] tortoise_: ooo
[2012-04-10 19:11:11 -0400] tarrant: But you might have to regenerate client.pem if you change the node_name
[2012-04-10 19:14:09 -0400] tarrant: To get the node[:fqdn] to populate you have to have '127.0.0.1 fqdn hostname localhost' in /etc/hosts
[2012-04-10 19:14:39 -0400] |shad0w|: well, it doesn't have to be localhost
[2012-04-10 19:14:48 -0400] |shad0w|: but your hostname better resolv to something :)
[2012-04-10 19:15:55 -0400] tortoise_: tarrant, cept: FATAL: ArgumentError: Attribute fqdn is not defined!
[2012-04-10 19:16:13 -0400] aaronlevy: Is there a default location chef-solo will look for the json_attribs file (or a way to set this location) so one can run "chef-solo" without any options (e.g. no -j foo.json)?
[2012-04-10 19:20:00 -0400] jchome: hmm, are there newer cookbooks for openstack that support higher versions than cactus? :)
[2012-04-10 19:21:39 -0400] tortoise_: tarrant, it just seems like its not pulling the FQDN from this systema and im not sure why
[2012-04-10 19:27:43 -0400] |shad0w|: tortoise_, did fqdn get set as a node normal attrib on the node?
[2012-04-10 19:30:47 -0400] tortoise_: i figured it out :0
[2012-04-10 19:30:51 -0400] tortoise_: yay
[2012-04-10 19:36:44 -0400] ericm__: On a related note, I want to use my machine's MAC address as the node name. Is there a preferred way to do this?
[2012-04-10 19:37:27 -0400] ericm__: I was thinking about a custom bootstrap script that sets the hostname to be the MAC address, but maybe there's a better way?
[2012-04-10 19:39:13 -0400] miah: mac addresses are easily modifiable
[2012-04-10 19:39:19 -0400] hoover_damm: ericm__, config.rb could run ohai, and then grab the mac address and assign it to node_name
[2012-04-10 19:39:27 -0400] hoover_damm: and then run
[2012-04-10 19:40:03 -0400] hoover_damm: ericm__, old examples of how opscode did bootstrap around 0.8 era where they ran ohai in client.rb should be a good copy and pasta example
[2012-04-10 19:40:22 -0400] ericm__: hoover_damm: Awesome. Thanks.
[2012-04-10 19:42:22 -0400] hoover_damm: i think if you google it you can find old gists, or if you visit logs.likens.us i know you can find it lol
[2012-04-10 19:42:30 -0400] hoover_damm: but you might have to download my whole archive of irclogs to find it
[2012-04-10 19:44:04 -0400] redbug: Anyone know how to fix this error? I got it after adding "mysql::server" (community cookbook) to my run_list and doing 'vagrant provision': "FATAL: NameError: uninitialized constant Opscode::OpenSSL"
[2012-04-10 19:44:34 -0400] ericm__: hoover_damm: You are talking about an older version of this file, correct? https://github.com/opscode/cookbooks/blob/master/chef-client/recipes/config.rb
[2012-04-10 19:46:32 -0400] hippieha`: http://tickets.opscode.com/browse/OHAI-357 (node.kernel.modules + node.kernel.pnp_drivers) =~ 300k.... everything else =~ 30k. Makes solr, couchdb, and infexer grind to a crawl/near halt with tons of unused attributes
[2012-04-10 19:48:10 -0400] hippieha`: using the above logic, 300k of json == a few metric (or is it standard?) tons of attributes 8)
[2012-04-10 19:49:32 -0400] ericm__: hoover_damm: Ah, no, this one: https://github.com/opscode/chef/blob/master/chef/lib/chef/config.rb
[2012-04-10 19:49:58 -0400] asg: hippieha`: you can disable ohai plugins to reduce memory if you don't need them: http://wiki.opscode.com/display/chef/Disabling+Ohai+Plugins
[2012-04-10 19:50:18 -0400] hippieha`: yea, you can't disable windows::kernel
[2012-04-10 19:50:49 -0400] hippieha`: it provides platform and version
[2012-04-10 19:51:10 -0400] asg: ah, my mistake, was in Loonixland
[2012-04-10 19:51:27 -0400] hippieha`: asg: http://tickets.opscode.com/browse/OHAI-357?focusedCommentId=23235&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-23235
[2012-04-10 19:51:40 -0400] hoover_damm: ericm__, yeah but back in history
[2012-04-10 19:51:48 -0400] hoover_damm: ericm__, this was never published in git either
[2012-04-10 19:52:11 -0400] ericm__: Ah, where did Chef live before that?
[2012-04-10 19:52:25 -0400] hoover_damm: nah this was mainly in ami's or in gists if i recall
[2012-04-10 19:54:36 -0400] ericm__: hoover_damm: Looks like this might get me on my way - https://gist.github.com/1039481
[2012-04-10 19:56:19 -0400] atomic-penguin: BryanWB, I threw in my 2 cents per the Java/README.md, https://forums.oracle.com/forums/thread.jspa?messageID=10266843.  Not that I think it will make any difference
[2012-04-10 19:56:42 -0400] hoover_damm: ericm__, yep! that is it
[2012-04-10 19:57:02 -0400] hoover_damm: ericm__, replace [ec2][instance_id] with the wa to get your mac address
[2012-04-10 19:57:04 -0400] hoover_damm: and win
[2012-04-10 19:57:56 -0400] ericm__: Looks like that will work. Thanks.
[2012-04-10 19:58:35 -0400] hoover_damm: you'll need to modify a bootstrap to drop your new client.rb path
[2012-04-10 19:58:45 -0400] hoover_damm: and then just bootstrap new instances with your new custom template
[2012-04-10 20:26:30 -0400] AntonZ: hey guys, im getting this error during oracle cookbook installation can someone give me a hint why do i get it: Apr 10 16:24:21 ip-10-0-11-20 RightLink[2125]: can't convert Fixnum into String
[2012-04-10 20:26:30 -0400] AntonZ: Apr 10 16:24:21 ip-10-0-11-20 RightLink[2125]: SEND b0 [push v15] (440 bytes) <28776866001:c2107c2356e97cf3c95160f3ba911fb7> /auditor/update_entry, persistent
[2012-04-10 20:29:54 -0400] AntonZ: is automic pinguin here :) ?
[2012-04-10 20:32:19 -0400] paige: mavis beacon teaches phpstorm
[2012-04-10 20:39:39 -0400] AntonZ: i guess oracle cookbook isnt popular here
[2012-04-10 20:44:31 -0400] chip-: Whoa, why am I just discovering knife tag?
[2012-04-10 20:44:36 -0400] chip-: When did this come about?
[2012-04-10 20:45:36 -0400] chip-: and how does it work? Are they for doing metadata searches, etc?
[2012-04-10 20:46:12 -0400] chip-: I see some stuff here: http://wiki.opscode.com/display/chef/Knife+Built+In+Subcommands#KnifeBuiltInSubcommands-Tag
[2012-04-10 20:46:28 -0400] chip-: but there's nothing here (except for one instance of the word 'tag'): http://wiki.opscode.com/display/chef/Nodes#Nodes-ManagingNodesviaKnife
[2012-04-10 20:46:38 -0400] chip-: Any good reference on using tags, examples or anything?
[2012-04-10 20:47:45 -0400] asg: chip-: I use them to quickly identify which vm hosts run which vms; helpful during those early morning emergencies
[2012-04-10 20:50:48 -0400] StormSilver: Anyone have any idea why the opscode database cookbook would be generating new passwords even though they are clearly set in the databag?
[2012-04-10 20:50:50 -0400] chip-: asg: I'm more interested in them as search objects. My roles tend to be very generic (php-fpm, apache, mysql) right now, and I've had to mix in a few project-specific roles (projectXApplicationFoo), so I'm really interested in converting the project-specific roles into other kinds of objects.
[2012-04-10 20:51:33 -0400] StormSilver: chip-: You should be able to search for nodes with specific tags
[2012-04-10 20:51:42 -0400] StormSilver: chip-: like tag:application_foo
[2012-04-10 20:51:46 -0400] chip-: COOL.
[2012-04-10 20:51:48 -0400] StormSilver: Or tags
[2012-04-10 20:52:02 -0400] StormSilver: It changed from singular to plural (or vice versa) several releases ago
[2012-04-10 20:52:16 -0400] chip-: So is this one of those "perils of being self-taught" things where the feature's been there all along and I just didn't notice, or did this get quietly added and I didn't notice?
[2012-04-10 20:52:24 -0400] motiejus: When I do "knife cookbook upload users", it uploads 1.0.1, while it is already 1.0.2. What am I doing wrong?
[2012-04-10 20:52:26 -0400] chip-: either way, I think this'll help me a lot.
[2012-04-10 20:52:34 -0400] StormSilver: chip-: It's been there for dang-near-forever :D
[2012-04-10 20:52:39 -0400] motiejus: I rewrote git history recently, but I don't think it should make any difference
[2012-04-10 20:52:44 -0400] chip-: StormSilver: That answers that then. :)
[2012-04-10 20:53:02 -0400] motiejus: knife cookbook upload users && grep version cookbooks/users/metadata.rb                                          ~/src-chef
[2012-04-10 20:53:03 -0400] motiejus: Uploading users             [1.0.1]
[2012-04-10 20:53:03 -0400] motiejus: upload complete
[2012-04-10 20:53:03 -0400] motiejus: version          "1.0.2"
[2012-04-10 20:53:03 -0400] StormSilver: chip-: You should be able to edit them the way you edit anything (knife node edit) and then search for them with `knife search`
[2012-04-10 20:53:13 -0400] StormSilver: chip-: Just to test it out to get you going and figure out what the searches are
[2012-04-10 20:55:52 -0400] AntonZ: has nayone seen this error when ra oracle cookbook? Apr 10 16:48:46 ip-10-0-11-20 RightLink[2078]: *ERROR> An error occurred during the execution of Chef. The error message was:
[2012-04-10 20:55:52 -0400] AntonZ: Apr 10 16:48:46 ip-10-0-11-20 RightLink[2078]:
[2012-04-10 20:55:52 -0400] AntonZ: Apr 10 16:48:46 ip-10-0-11-20 RightLink[2078]: can't convert Fixnum into String
[2012-04-10 20:56:26 -0400] StormSilver: jtimberman: Got a second for a question on the database cookbook?
[2012-04-10 20:56:30 -0400] hippieha`: https://gist.github.com/2354413 # librarian-chef fails if one of your cookbooks has an underscore 8(
[2012-04-10 20:56:38 -0400] therawr: anyone care to lend a /query for a solr question?
[2012-04-10 20:56:53 -0400] chip-: StormSilver: Yeah, I'll experiment with it soon.
[2012-04-10 20:58:06 -0400] |shad0w|: therawr, just ask your question
[2012-04-10 20:58:30 -0400] therawr: i'm doing a 'knife search node role:role-name' and results are 0
[2012-04-10 20:58:38 -0400] therawr: when i know for a fact i have 10 nodes attached to that role
[2012-04-10 20:58:44 -0400] |shad0w|: s/role/roles
[2012-04-10 20:58:59 -0400] therawr: ugh
[2012-04-10 20:59:01 -0400] therawr: today is monday all over
[2012-04-10 20:59:13 -0400] therawr: ty.
[2012-04-10 20:59:15 -0400] |shad0w|: np
[2012-04-10 20:59:21 -0400] |shad0w|: groundhog day ftw
[2012-04-10 21:01:58 -0400] therawr: heh
[2012-04-10 21:06:02 -0400] paige: parrot parrot parrot parrot parrot parrot parrot parrot
[2012-04-10 21:08:56 -0400] paige: wheres the memcache channel
[2012-04-10 21:09:03 -0400] paige: where my memcache gerunds at
[2012-04-10 21:10:25 -0400] AntonZ: can someone pretty please give me a hand and see why oracle cookbook fails with Apr 10 17:09:51 ip-10-0-11-20 RightLink[2078]: can't convert Fixnum into String
[2012-04-10 21:10:28 -0400] hippieha`: https://gist.github.com/2354413 # updated with an example Gemfile/Cheffile and failure
[2012-04-10 21:10:36 -0400] mikeg: Lets say I have a recipe that installs a service.  3 resources - install app, lay down conf, enable and start the service.  Now, if I want to have it restart the service if the conf changes I can use a notification telling the service to "restart" if the resource that lays down the conf runs.  Maybe I also want to trigger a restart if the "install the app" resource runs (for an upgrade maybe).  Is chef smart enough to recognize if a bunch of se
[2012-04-10 21:10:37 -0400] mikeg: rvice calls are stacked up because of notifications and to not perform them all?  Otherwise, for instance, the first time this recipe runs It would 1) start (due to service resource) 2) restart (due to app install resource) and 3) restart (due to conf file resource)
[2012-04-10 21:10:53 -0400] AntonZ: im using this cookbook from opscode http://community.opscode.com/cookbooks/oracle
[2012-04-10 21:11:35 -0400] spyvsspy: what performs the searches in the webui?
[2012-04-10 21:11:40 -0400] hippieha`: AntonZ: run chef-client in debug mode and put up a gist or pastebin of the log
[2012-04-10 21:11:41 -0400] spyvsspy: mine is not working at all
[2012-04-10 21:12:08 -0400] hippieha`: spyvsspy: solr, check that chef-expander is runner as well
[2012-04-10 21:12:49 -0400] AntonZ: im using hosted, rightscale chef environment, i got not chef client....
[2012-04-10 21:13:02 -0400] spyvsspy: hippieha` both seem to be runnign and funtioning
[2012-04-10 21:13:06 -0400] spyvsspy: functioning*
[2012-04-10 21:13:16 -0400] hippieha`: AntonZ: all nodes run chef-client at some point
[2012-04-10 21:13:18 -0400] StormSilver: mikeg: You want to use the :delayed flag on the notification
[2012-04-10 21:13:52 -0400] StormSilver: mikeg: That will wait and run the action at the end of the chef run, but it will only do it once
[2012-04-10 21:14:42 -0400] AntonZ: can i install chefc client with yum ?
[2012-04-10 21:14:50 -0400] hippieha`: AntonZ: look at http://wiki.opscode.com/display/chef/Architecture ... you have chef-clients and knife connecting to the chef-server api. hosted opscode provides the chef-server and the chef-server-webui
[2012-04-10 21:15:10 -0400] |shad0w|: rightscale is all chef-solo iirc
[2012-04-10 21:16:39 -0400] mikeg: StormSilver: ok.  so :immediatly = as advertised, <nothing> = end of cookbook run, :delayed = end of chef run?
[2012-04-10 21:16:41 -0400] kindsol: AntonZ: turn on chef debug logging on RightScale using "rs_log_level -l debug"
[2012-04-10 21:16:55 -0400] mikeg: I'm trying to find it on the chef wiki but none of my searches are working
[2012-04-10 21:17:03 -0400] mikeg: sorry for asking quesitons that could be answered there
[2012-04-10 21:17:21 -0400] AntonZ: kindsol, is it done via gui ?
[2012-04-10 21:17:31 -0400] kindsol: command line
[2012-04-10 21:17:33 -0400] AntonZ: done
[2012-04-10 21:17:36 -0400] AntonZ: turned on
[2012-04-10 21:17:41 -0400] AntonZ: do i re-run the cookbook now ?
[2012-04-10 21:17:57 -0400] jperry: I'm using vagrant and it's failing during the provision part
[2012-04-10 21:18:05 -0400] jperry: it seems to not be creating a client_key             "/etc/chef/client.pem"
[2012-04-10 21:18:21 -0400] StormSilver: mikeg: Default is :delayed, I believe: http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2012-04-10 21:18:26 -0400] kindsol: AntonZ: yeah, whatever you ran that got the fail
[2012-04-10 21:18:37 -0400] jperry: I have this working for another organization with hosted chef but with my other organization I'm having issues
[2012-04-10 21:19:03 -0400] AntonZ: re-running, output will go to gist
[2012-04-10 21:19:07 -0400] AntonZ: whoa, tons of info
[2012-04-10 21:19:11 -0400] jperry: I get this
[2012-04-10 21:19:12 -0400] jperry: [Tue, 10 Apr 2012 23:13:07 +0200] INFO: Client key /etc/chef/client.pem is not present - registering
[2012-04-10 21:19:12 -0400] jperry: [Tue, 10 Apr 2012 23:13:07 +0200] INFO: HTTP Request Returned 401 Unauthorized: Failed to authenticate as test-validator. Ensure that your node_name and client key are correct.
[2012-04-10 21:19:51 -0400] mikeg: StormSilver: ugh.  It was on the resources page.  thx!!
[2012-04-10 21:19:54 -0400] spyvsspy: if  knife search node "*:*" returns all my nodes correctly, search should be working right?
[2012-04-10 21:20:02 -0400] StormSilver: mikeg: NP :D
[2012-04-10 21:20:19 -0400] hippieha`: jperry: hostname + client key have to match what was already registered
[2012-04-10 21:20:52 -0400] spyvsspy: knife search node "IP:75.205.240.151" this returns 0 items found though
[2012-04-10 21:21:31 -0400] jperry: there is no client key being created
[2012-04-10 21:21:54 -0400] StormSilver: spyvsspy: the key should be ipaddress
[2012-04-10 21:22:25 -0400] jperry: @hippieha - nothing was registered
[2012-04-10 21:22:36 -0400] jperry: this is a test node that hasn't connected yet
[2012-04-10 21:23:08 -0400] spyvsspy: stormsilver, cool thanks
[2012-04-10 21:23:39 -0400] AntonZ: so here is the gist https://gist.github.com/2354687
[2012-04-10 21:23:44 -0400] AntonZ: oracle failed
[2012-04-10 21:25:31 -0400] |shad0w|: AntonZ, what does cookbooks/oracle/attributes/default.rb look like?
[2012-04-10 21:25:37 -0400] kindsol: loading cookbook oracle's attribute file .../cookbooks/oracle/attributes/default.rb
[2012-04-10 21:25:37 -0400] kindsol: TypeError - can't convert Fixnum into String
[2012-04-10 21:26:02 -0400] kindsol: yep. looks like the error is coming from the attribute file
[2012-04-10 21:26:03 -0400] AntonZ: https://github.com/atomic-penguin/cookbooks/blob/enterprise-common/oracle/attributes/default.rb
[2012-04-10 21:26:08 -0400] AntonZ: i changed one thing 11 to 10
[2012-04-10 21:26:10 -0400] AntonZ: thats all
[2012-04-10 21:26:29 -0400] AntonZ: thats the verswion
[2012-04-10 21:26:53 -0400] atomic-penguin: AntonZ, you should be able to override that variable as an attribute in a role
[2012-04-10 21:27:19 -0400] AntonZ: rightscale does not support roles, i dont know what needs to be overrideen, if its optional can we remove it ?
[2012-04-10 21:28:09 -0400] |shad0w|: AntonZ, did you change any quoting?
[2012-04-10 21:28:52 -0400] AntonZ: no sir, a single change was the version, i can redownload that file from opscode just to make sure, but i didnt need or knew what else to change
[2012-04-10 21:29:29 -0400] |shad0w|: what did you edit the file in?
[2012-04-10 21:29:40 -0400] atomic-penguin: AntonZ, removing it would break the el-sysctl recipe, fairly certain
[2012-04-10 21:29:44 -0400] AntonZ: notepad++ and then git upload to the repo
[2012-04-10 21:29:57 -0400] |shad0w|: so it probably has control characters in it ...
[2012-04-10 21:30:05 -0400] AntonZ: ah okay, then wont remove it, any hack i can do to by pass ?
[2012-04-10 21:30:49 -0400] atomic-penguin: It just needs to be set to 11 or 10.
[2012-04-10 21:31:01 -0400] |shad0w|: cat -A /var/cache/rightscale/cookbooks/87b0be3400bffcfdd29fda3b615e45de8caf9203/cookbooks/oracle/attributes/default.rb
[2012-04-10 21:31:27 -0400] atomic-penguin: If you can send me the trace output, I'd like to see why you had to change it.  What broke, and so forth.
[2012-04-10 21:32:30 -0400] AntonZ: https://gist.github.com/2354732
[2012-04-10 21:32:48 -0400] AntonZ: i changed it becasue we want to install version 10
[2012-04-10 21:33:56 -0400] AntonZ: Eric, here is trace of the run, well, at least to rightscale version https://gist.github.com/2354687
[2012-04-10 21:34:44 -0400] atomic-penguin: AntonZ, ah so it wasn't necessarily broke.  You just didn't have any other way to override the variable then?
[2012-04-10 21:34:46 -0400] |shad0w|: meh, missed it the first time
[2012-04-10 21:34:48 -0400] |shad0w|: override["kernel"]["semmsl"] = node["oracle"]["processes"] + 10
[2012-04-10 21:35:12 -0400] AntonZ: i missed something ?
[2012-04-10 21:35:17 -0400] |shad0w|: I did
[2012-04-10 21:35:20 -0400] |shad0w|: where the error was coming from
[2012-04-10 21:35:26 -0400] AntonZ: oh
[2012-04-10 21:35:36 -0400] |shad0w|: pr 10 17:19:00 ip-10-0-11-20 /var/cache/rightscale/cookbooks/87b0be3400bffcfdd29fda3b615e45de8caf9203/cookbooks/oracle/attributes/default.rb:85:in `+'
[2012-04-10 21:35:58 -0400] AntonZ: well, i defintiely didnt edit that :)
[2012-04-10 21:36:28 -0400] kindsol: I didn't think that you could access node like that in an attribute file
[2012-04-10 21:37:03 -0400] kindsol: I thought you access node["oracle"]["processes"] as oracle["processes"]
[2012-04-10 21:37:16 -0400] |shad0w|: kindsol, you can do either in attribs files
[2012-04-10 21:37:24 -0400] kindsol: ah, cool
[2012-04-10 21:37:39 -0400] |shad0w|: is node["oracle"]["processes"] a string instead of an interger?
[2012-04-10 21:37:53 -0400] |shad0w|: or change that to node["oracle"]["processes"].to_i
[2012-04-10 21:38:27 -0400] AntonZ: Eric, any chance you can push a fix, or do i just edit this myself ?
[2012-04-10 21:38:34 -0400] eugenmayer1: It has been a wonderful day with chef, thank you for the help. Iam going off, Houston
[2012-04-10 21:38:49 -0400] kindsol: |shad0w|: thats the problem
[2012-04-10 21:38:50 -0400] atomic-penguin: The Line 85 we use
[2012-04-10 21:39:12 -0400] AntonZ: im no developer, so know very little, would be awesome if you could fix it, so i can grab it and test
[2012-04-10 21:39:14 -0400] atomic-penguin: We have a couple of servers 32-bit which require fiddling with hugepages
[2012-04-10 21:39:17 -0400] kindsol: the metadata sets that value to "240"
[2012-04-10 21:39:45 -0400] kindsol: rightscale honors the metadata
[2012-04-10 21:39:51 -0400] AntonZ: yes
[2012-04-10 21:40:01 -0400] |shad0w|: it should probably be 240 not "240"
[2012-04-10 21:40:04 -0400] atomic-penguin: Right, so it defaults to 240, and going off the Oracle/Puschitz recommendation it adds 10 + the processes value
[2012-04-10 21:40:13 -0400] atomic-penguin: Giving 250
[2012-04-10 21:40:29 -0400] |shad0w|: so .to_i would convert in the event it is a string, but you could probably also set it to an int instead of string
[2012-04-10 21:41:37 -0400] atomic-penguin: Where is it getting converted to a string, 'cause I don't see that
[2012-04-10 21:41:50 -0400] |shad0w|: it is probably set as a string on the node
[2012-04-10 21:42:21 -0400] |shad0w|: ruby -e 'x="240"; puts x+10' vs ruby -e 'x=240; puts x+10' vs ruby -e 'x="240"; puts x.to_i+10'
[2012-04-10 21:42:43 -0400] |shad0w|: "250" != 250
[2012-04-10 21:42:53 -0400] |shad0w|: s/250/240/ even
[2012-04-10 21:43:02 -0400] |shad0w|: s/250/240/g even even :P
[2012-04-10 21:44:19 -0400] AntonZ: so what do i need to do to move on with this :) ?
[2012-04-10 21:44:24 -0400] atomic-penguin: https://github.com/atomic-penguin/cookbooks/blob/enterprise-common/oracle/attributes/default.rb#L58
[2012-04-10 21:44:25 -0400] AntonZ: thank you for the help guys btw
[2012-04-10 21:44:33 -0400] atomic-penguin: There are no quotes there, though?
[2012-04-10 21:45:01 -0400] |shad0w|: atomic-penguin, but this attrib can be overidden else where
[2012-04-10 21:45:09 -0400] |shad0w|: probably from something in the rightscale foo
[2012-04-10 21:45:20 -0400] atomic-penguin: I bet its from metadata.rb
[2012-04-10 21:45:25 -0400] atomic-penguin: I can fix that right quick
[2012-04-10 21:45:31 -0400] AntonZ: woot!
[2012-04-10 21:45:38 -0400] AntonZ: and ill test it right away :)
[2012-04-10 21:46:36 -0400] AntonZ:  Number of oracle processes from init.ora files
[2012-04-10 21:46:37 -0400] AntonZ: attribute "oracle/processes",
[2012-04-10 21:46:37 -0400] AntonZ:   :display_name => "oracle/processes",
[2012-04-10 21:46:37 -0400] AntonZ:   :description => "Recommend setting this equal to the number of PROCESSES in init.ora files",
[2012-04-10 21:46:37 -0400] AntonZ:   :required => "recommended",
[2012-04-10 21:46:37 -0400] AntonZ:   :default => "240"
[2012-04-10 21:46:40 -0400] AntonZ: 240 has quotes
[2012-04-10 21:46:46 -0400] AntonZ: not sure what that means though
[2012-04-10 21:48:00 -0400] hoover_damm: doesn't
[2012-04-10 21:48:20 -0400] hoover_damm: https://github.com/atomic-penguin/cookbooks/blob/enterprise-common/oracle/attributes/default.rb#L58 = int
[2012-04-10 21:49:15 -0400] atomic-penguin: Right
[2012-04-10 21:49:43 -0400] atomic-penguin: So is it /possible/ that Rightscale treats Chef metadata differently than Chef-server?
[2012-04-10 21:49:53 -0400] hoover_damm: yes
[2012-04-10 21:50:06 -0400] hoover_damm: ask flagg0204 or someone in #rightscale
[2012-04-10 21:50:40 -0400] atomic-penguin: Since the metadata only serves to document, I should be able to safely remove string definitions of integers there, and let AntonZ test that
[2012-04-10 21:50:42 -0400] AntonZ: but also can this be made sort of universal, to work even in rightscale :)
[2012-04-10 21:51:10 -0400] AntonZ: ill test right away, it's a hot potatoe in my hands
[2012-04-10 21:52:05 -0400] kindsol: the attribute file has it as an integer and metadata.json has is as a string
[2012-04-10 21:52:48 -0400] AntonZ: also if you will be make changes to metadata.rb, pelase generate json as well, RS reads only jason
[2012-04-10 21:53:26 -0400] kindsol: rightscale doesn't have roles, they use their UI for overriding attributes.  To do this they consume the metadata information
[2012-04-10 21:53:49 -0400] kindsol: which in this case overrides the value as a string
[2012-04-10 21:54:43 -0400] hoover_damm: annoying
[2012-04-10 21:58:38 -0400] hippieha`: didn't the cookbooks get put into their own github repos at one point?
[2012-04-10 22:01:33 -0400] juanje: atomic-penguin: it seems that RightScale uses the same metadata format that Chef -> http://support.rightscale.com/12-Guides/Chef_Cookbooks_Developer_Guide/01-Chef_Basics#Can_I_use_my_exisiting_Chef_cookbooks_with_RightScale.3f
[2012-04-10 22:02:16 -0400] juanje: atomic-penguin: but they use Chef v0.9.14.3 and Chef v0.8.16. Maybe the difference is there...
[2012-04-10 22:02:29 -0400] atomic-penguin: AntonZ, I pushed a possible fix to github.  Haven't pushed it to the community site yet.
[2012-04-10 22:03:09 -0400] cwj: hippieha`: https://github.com/opscode-cookbooks/
[2012-04-10 22:04:54 -0400] hippieha`: cwj: beautiful
[2012-04-10 22:05:45 -0400] AntonZ: checking
[2012-04-10 22:05:49 -0400] AntonZ: thank you
[2012-04-10 22:06:24 -0400] dambalah: is anyone here using cucumber-chef? We are thinking about using it but I am worried that the project seems to have staled. Last commit on github repo is from 7 months ago.
[2012-04-10 22:06:49 -0400] AntonZ: Eric, you pushed only metada.rb right ?
[2012-04-10 22:07:18 -0400] atomic-penguin: AntonZ, correct
[2012-04-10 22:07:26 -0400] cwj: i wrote something today which might interest those who use deploy or deploy_revision resources with ssh wrapper scripts, https://github.com/cwjohnston/chef-deploy_wrapper
[2012-04-10 22:07:42 -0400] AntonZ: any chance you can conevert it to json o im asking too much now :) ?
[2012-04-10 22:07:50 -0400] cwj: it provides a definition that sets up an ssh key and ssh wrapper script for use with deploy or deploy_revision resources
[2012-04-10 22:08:41 -0400] juanje: dambalah: I think it was more a proof of concepts than other thing. AFAK it just works in some envirnments and the develpment has been stopped for a while
[2012-04-10 22:09:01 -0400] dambalah: juanje: thanks
[2012-04-10 22:09:37 -0400] juanje: dambalah: I recomend this list to follow the last testing technologies and ideas for Chef: https://groups.google.com/forum/?fromgroups#!forum/chef-testing
[2012-04-10 22:09:54 -0400] juanje: some ideas very interesting ;-)
[2012-04-10 22:10:53 -0400] juanje: dambalah: many people is trying minitest-handler and I like also simple_cuke
[2012-04-10 22:11:30 -0400] therawr: juanje: a coworker of mine is speaking at ChefCon on this subject
[2012-04-10 22:11:38 -0400] atomic-penguin: AntonZ, hmm, can't you run a 'knife cookbook metadata' on it or something similar?
[2012-04-10 22:11:55 -0400] AntonZ: doing it, sorry
[2012-04-10 22:12:02 -0400] juanje: therawr: Nice!
[2012-04-10 22:12:04 -0400] juanje: :-)
[2012-04-10 22:12:07 -0400] therawr: Jim Hopp
[2012-04-10 22:12:12 -0400] therawr: join us :) it should be good
[2012-04-10 22:12:17 -0400] therawr: we are a chefspec/rspec group
[2012-04-10 22:12:45 -0400] dambalah: juanje: that google groups looks like a great resource on the subject. My experience with cucumber-chef today wasn't great. Took lots of time to setup and I didn't get anywhere with it.
[2012-04-10 22:12:48 -0400] atomic-penguin: AntonZ, I don't know 'cause never used rightscale.  You could've told me no, and I would've done it gladly ;)
[2012-04-10 22:13:33 -0400] juanje: therawr: I not sure I will be able to go the the ChefConf :-/ I wish...
[2012-04-10 22:13:46 -0400] therawr: We should suggest they record sessions.
[2012-04-10 22:13:54 -0400] atomic-penguin: I'm going, yay!
[2012-04-10 22:14:14 -0400] z: I did strongly suggest they record sessions :)
[2012-04-10 22:14:17 -0400] juanje: therawr: they says at tw that they will try
[2012-04-10 22:14:17 -0400] AntonZ: :)
[2012-04-10 22:14:42 -0400] therawr: I will also be attending.
[2012-04-10 22:14:43 -0400] AntonZ: for some reason i cant download oracle cookbook
[2012-04-10 22:14:46 -0400] AntonZ: it downlaod yum stuff
[2012-04-10 22:14:47 -0400] z: No idea whether that will be done, but I may pack my camera
[2012-04-10 22:15:40 -0400] juanje: therawr: so you have a group for chefspecs/rspec? Are you doing chef-rspec?
[2012-04-10 22:15:49 -0400] therawr: Lookout Mobile Security == group
[2012-04-10 22:15:52 -0400] atomic-penguin: AntonZ, switch branches 'git checkout enterprise-common'
[2012-04-10 22:15:59 -0400] therawr: our ops group.. my apologies
[2012-04-10 22:16:05 -0400] therawr: chefspec
[2012-04-10 22:16:17 -0400] juanje: nice
[2012-04-10 22:16:35 -0400] thehar: yeah we like it a lot so far
[2012-04-10 22:17:43 -0400] AntonZ: im trying to download from github site, not git pull :)
[2012-04-10 22:17:58 -0400] atomic-penguin: AntonZ, lol.  I switched the default branch for you there ya go
[2012-04-10 22:18:22 -0400] AntonZ: thank you kindly.. i feel needy here
[2012-04-10 22:18:51 -0400] atomic-penguin: its no sweat
[2012-04-10 22:20:04 -0400] AntonZ: can i go in and edit version to 10 ? that shouldnt break anything right
[2012-04-10 22:20:04 -0400] AntonZ: ?
[2012-04-10 22:20:23 -0400] coderanger: lusis: "Cross-node orchestration for Chef with Noah" You had to go there, didn't you ;-)
[2012-04-10 22:21:06 -0400] atomic-penguin: AntonZ, shouldn't break anything, no
[2012-04-10 22:21:11 -0400] AntonZ: grat
[2012-04-10 22:21:13 -0400] AntonZ: great
[2012-04-10 22:27:22 -0400] AntonZ: Eric, im having issues with my knife install, cant generate json file
[2012-04-10 22:27:33 -0400] AntonZ: something cnat load... bla bla
[2012-04-10 22:29:31 -0400] mattray: a
[2012-04-10 22:29:41 -0400] mattray: doh
[2012-04-10 22:30:15 -0400] atomic-penguin: AntonZ, do you need metadata for all the dependencies, or just the Oracle cookbook
[2012-04-10 22:30:43 -0400] AntonZ: other cookbnooks installed okay, i ran them manually and they installed fine
[2012-04-10 22:30:48 -0400] AntonZ: the only cookbook failed was oracle
[2012-04-10 22:30:55 -0400] AntonZ: so ill be testing with oracle only now
[2012-04-10 22:31:07 -0400] AntonZ: wwell, depends installed ok,so just oracle
[2012-04-10 22:31:54 -0400] AntonZ: gnome, xwindows, el-sysctl all fine
[2012-04-10 22:32:00 -0400] atomic-penguin: https://raw.github.com/atomic-penguin/cookbooks/c9372814079672bc04db1f75a49feddc4def44c1/oracle/metadata.json
[2012-04-10 22:32:55 -0400] AntonZ: thank you
[2012-04-10 22:36:37 -0400] AntonZ: how does it matter for your cookbook which version you specify, pre-requisite packages seem to be the same
[2012-04-10 22:36:45 -0400] aslan: is there a nagios check for chef server?
[2012-04-10 22:38:49 -0400] atomic-penguin: AntonZ, not sure I follow the question.  Version of what?
[2012-04-10 22:39:17 -0400] AntonZ: oracle, you have an option to select oracle server version 11 or 10, we will be installing 10, so i changed that in the attributes to 10
[2012-04-10 22:39:25 -0400] AntonZ: but the list of packages is the same, isnt it ?
[2012-04-10 22:40:12 -0400] atomic-penguin: Yes, the packages I believe are the same.  The difference between the 11 or 10 option is to turn on features within sysctl
[2012-04-10 22:40:31 -0400] AntonZ: ah i see
[2012-04-10 22:40:35 -0400] AntonZ: good to know
[2012-04-10 22:42:11 -0400] atomic-penguin: It is like one arbitrary option that I think would be safe to run on Oracle 10g, but not explicitly required.
[2012-04-10 22:42:58 -0400] AntonZ: if i can get away with installing everything with default options but install 10g, i would do that :)
[2012-04-10 22:43:02 -0400] AntonZ: what you think ?
[2012-04-10 22:43:13 -0400] AntonZ: default cookbook options
[2012-04-10 22:43:21 -0400] atomic-penguin: Yeah, I say go for it and try
[2012-04-10 22:43:32 -0400] AntonZ: right on
[2012-04-10 22:44:11 -0400] AntonZ: ok, the firswt try will be though with modified attribute version "10"
[2012-04-10 22:44:17 -0400] AntonZ: i laready pushed it to rightscale so
[2012-04-10 22:51:04 -0400] AntonZ: from the first look it's running a lot happier now on RightScake Eric
[2012-04-10 22:51:07 -0400] AntonZ: Scale*
[2012-04-10 22:51:40 -0400] AntonZ: i have a good feeling so far
[2012-04-10 22:54:09 -0400] atomic-penguin: Yay!
[2012-04-10 22:54:43 -0400] AntonZ: Eric, can i pick your brain a bit more though ?
[2012-04-10 22:55:01 -0400] AntonZ: i wnat to understand the cookbook better, i assume it does something to the OS that increaes oracle DB perforamnce
[2012-04-10 22:55:03 -0400] AntonZ: is that so ?
[2012-04-10 22:57:23 -0400] atomic-penguin: You may
[2012-04-10 22:58:16 -0400] miah: atomic-penguin: could i convince you to filter-branch your repo? =)
[2012-04-10 22:58:17 -0400] AntonZ: for instance NET section, what does it do? in one sentence
[2012-04-10 22:59:11 -0400] atomic-penguin: It kind of takes out the guesswork of tuning sysctl parameters for Oracle DB.  That won't necessarily make it run faster.  It only configures tunables according to Oracle's documented procedures.
[2012-04-10 22:59:29 -0400] AntonZ: i see
[2012-04-10 22:59:44 -0400] atomic-penguin: The only thing you really have to know off the bat, is what the "processes" parameter is from the init file
[2012-04-10 22:59:53 -0400] AntonZ: but thats done during oracle DB isntall right, but oracle itself ?
[2012-04-10 23:00:01 -0400] AntonZ: but-by
[2012-04-10 23:01:25 -0400] miah: no
[2012-04-10 23:01:44 -0400] miah: oracle gives you recommendations, but lets you set them
[2012-04-10 23:01:48 -0400] AntonZ: so you do it manually after or before oracle db isntall
[2012-04-10 23:01:52 -0400] AntonZ: i see
[2012-04-10 23:01:54 -0400] AntonZ: understood
[2012-04-10 23:02:06 -0400] miah: they are so bad at it, that they will frequently require you to set parameters that aren't even valid in the OS
[2012-04-10 23:02:32 -0400] miah: eg, sol9 vs sol10. in order to get support in sol10 you still had to enable system settings that were deprecated
[2012-04-10 23:03:44 -0400] AntonZ: cookbook installed successfully!
[2012-04-10 23:03:56 -0400] AntonZ: thank you Eric :)!
[2012-04-10 23:04:04 -0400] atomic-penguin: Matter of fact, pretty much everybody including Oracle adopted Werner Puschitz' recommendations for documentation.  Because that is the only guy who apparently knows how to do it right
[2012-04-10 23:04:08 -0400] atomic-penguin: http://puschitz.com
[2012-04-10 23:04:13 -0400] miah: ya
[2012-04-10 23:04:16 -0400] miah: he has some nice docs
[2012-04-10 23:04:23 -0400] miah: ive used them many times
[2012-04-10 23:04:37 -0400] AntonZ: Cheers guys, very very helpful!
[2012-04-10 23:04:56 -0400] miah: always glad to help.
[2012-04-10 23:05:08 -0400] atomic-penguin: What is it to filter-branch it, miah?
[2012-04-10 23:05:18 -0400] miah: atomic-penguin: man git-filter-branch =)
[2012-04-10 23:05:38 -0400] miah: it would split your repo into multiple repos, so i wouldn't have to fork your entire cookbooks repo to use something like.. your certificates cookbook
[2012-04-10 23:06:03 -0400] miah: opscode just did the same to their github repo
[2012-04-10 23:06:19 -0400] atomic-penguin: Ah, but consume cookbooks from github, one should not
[2012-04-10 23:06:30 -0400] miah: thats debatable
[2012-04-10 23:06:55 -0400] miah: for many cookbooks, that is the only place to fetch it
[2012-04-10 23:07:41 -0400] miah: i personally prefer grabbing straight from github as it gives me the ability to easily fork/patch if i find problems. its the one thing that deeply bothers me abuot the community site
[2012-04-10 23:07:56 -0400] miah: (most people dont include their github link)
[2012-04-10 23:08:37 -0400] atomic-penguin: All my major cookbooks I believe are in both places community, and github
[2012-04-10 23:09:34 -0400] miah: ya
[2012-04-10 23:09:41 -0400] miah: https://github.com/atomic-penguin/cookbooks/tree/certificate/certificate
[2012-04-10 23:10:01 -0400] miah: ^- is what i've been looking at. it looks incredibly usful. i haven't installed it via community yet
[2012-04-10 23:10:32 -0400] atomic-penguin: So the way it is organized on github is preventing you from using it then?
[2012-04-10 23:10:47 -0400] miah: well. if i want to snag _just_ that cookbook
[2012-04-10 23:11:04 -0400] miah: i can easily clone your repo, and then filter-branch it myself
[2012-04-10 23:11:20 -0400] miah: not sure how i could track upstream changes of just that tree though
[2012-04-10 23:11:39 -0400] kc_edm: is there an example of reloading the gem list after installing a gem? i want to gem install a handler but then call the handler in the same run
[2012-04-10 23:11:46 -0400] atomic-penguin: I haven't even went through and found a new workflow for the change in the Opscode cookbooks tree, yet.
[2012-04-10 23:11:54 -0400] miah: ah
[2012-04-10 23:12:03 -0400] miah: its definitely something we should work out
[2012-04-10 23:12:06 -0400] atomic-penguin: I didn't know there was much of a demand to organize my own git repo, similarly
[2012-04-10 23:12:09 -0400] miah: and by we i mean the community
[2012-04-10 23:12:15 -0400] miah: ya
[2012-04-10 23:12:41 -0400] atomic-penguin: I of course, like the monolithic cookbooks repo, cause it lets me 'git grep' a repo as a code reference
[2012-04-10 23:12:48 -0400] miah: ya
[2012-04-10 23:12:55 -0400] holoway: miah: I keep wondering just how far to push that
[2012-04-10 23:13:04 -0400] miah: holoway: ya
[2012-04-10 23:13:05 -0400] holoway: so much consensus around git in the broader community
[2012-04-10 23:13:18 -0400] holoway: and so much lack of consensus around it in the enterprises we talk to
[2012-04-10 23:13:38 -0400] miah: well, here is the problem i ran into with monolithic
[2012-04-10 23:13:39 -0400] holoway: I've always resisted integrating source control into the workflow like that
[2012-04-10 23:13:52 -0400] miah: it was tricky managing my local forks and upstream changes
[2012-04-10 23:13:53 -0400] holoway: not because it's not convenient, but because the use cases are totally different
[2012-04-10 23:14:01 -0400] miah: merging a updated cookbook into my repo became tricky
[2012-04-10 23:14:07 -0400] holoway: miah: right - as a contributor, it's a pain
[2012-04-10 23:14:10 -0400] atomic-penguin: On the other hand, I've had contributors struggle to track a branch of mine.  There is apparently no github UI way to pull requests with lightweight tracking branches.
[2012-04-10 23:14:14 -0400] holoway: miah: as a consumer, it's kind of nice (in theory)
[2012-04-10 23:14:21 -0400] atomic-penguin: You can totally do it with git, just not the github UI
[2012-04-10 23:14:23 -0400] holoway: miah: to just get vetted releases
[2012-04-10 23:14:28 -0400] miah: right
[2012-04-10 23:14:41 -0400] miah: so, what i tend to do is tag releases
[2012-04-10 23:14:45 -0400] holoway: but it's tempted to make the integration much deeper, and just say git is not a defacto standard
[2012-04-10 23:14:52 -0400] holoway: it's in fact *the* standard
[2012-04-10 23:15:03 -0400] holoway: s/tempted/tempting/g
[2012-04-10 23:15:12 -0400] miah: ya
[2012-04-10 23:15:14 -0400] holoway: be a fun hallway track and show of hands at #chefconf
[2012-04-10 23:15:17 -0400] holoway: miah: you coming?
[2012-04-10 23:15:19 -0400] miah: yes
[2012-04-10 23:15:22 -0400] holoway: awesome
[2012-04-10 23:15:32 -0400] miah: i live in SF, so its hard for me to pass up
[2012-04-10 23:15:36 -0400] miah: plus... i get to hang with yall
[2012-04-10 23:15:44 -0400] jtimberman: miah: :D
[2012-04-10 23:16:18 -0400] holoway: atomic-penguin: that's awesome - your work on early full-stack installers for rhel 5 saved my bacon
[2012-04-10 23:16:35 -0400] holoway: atomic-penguin: so I owe you at least a high five
[2012-04-10 23:16:45 -0400] atomic-penguin: holoway, the summit was awesome
[2012-04-10 23:16:48 -0400] holoway: or the beverage of your choice, assuming you like that stuff :)
[2012-04-10 23:16:50 -0400] kallen: yay for conferences in my back yard
[2012-04-10 23:17:03 -0400] holoway: atomic-penguin: yeah, it was super fun
[2012-04-10 23:17:07 -0400] atomic-penguin: holoway, wouldn't miss the inaugural conf
[2012-04-10 23:17:09 -0400] jtimberman: fyi: http://chefconf.opscode.com/program/
[2012-04-10 23:17:29 -0400] jtimberman: Monday Night. 6pm.
[2012-04-10 23:17:38 -0400] atomic-penguin: holoway, yes you'll have to tell me all about the time it saved your bacon over a beer, or cigar :)
[2012-04-10 23:17:59 -0400] miah: http://chefconf2012.sched.org/rosekolodny is what i'm planning on so far
[2012-04-10 23:18:13 -0400] andreacampi: on the conf, and the beers ;)
[2012-04-10 23:18:20 -0400] jtimberman: andreacampi: we're sad too!
[2012-04-10 23:18:26 -0400] holoway: andreacampi: totally
[2012-04-10 23:19:05 -0400] andreacampi: how many of the folks here were among the last ones to walk out of the hotel bar? :D
[2012-04-10 23:19:22 -0400] z: at the summit?
[2012-04-10 23:19:25 -0400] andreacampi: yup
[2012-04-10 23:19:38 -0400] z: I'm the poor sucker who picked up about $1000 worth of tab :(
[2012-04-10 23:19:44 -0400] jtimberman: s/walk/stumble/ ?
[2012-04-10 23:19:57 -0400] z: and it took me about 36 hours to sober up
[2012-04-10 23:20:03 -0400] andreacampi: z ouch
[2012-04-10 23:20:07 -0400] holoway: z: you are coming, yes?
[2012-04-10 23:20:12 -0400] z: holoway: to ChefConf?
[2012-04-10 23:20:15 -0400] holoway: aye
[2012-04-10 23:20:32 -0400] andreacampi: z totally worth it though, no? :D
[2012-04-10 23:20:52 -0400] holoway: andreacampi: we'll pour one out for our missing european drinking homie
[2012-04-10 23:21:14 -0400] z: holoway: http://bit.ly/IpYpve < one presumes I might be in attendance :-)
[2012-04-10 23:21:16 -0400] atomic-penguin: z, are you the guy from HP?
[2012-04-10 23:21:16 -0400] jtimberman: holoway: we going to do that for all the missing Europeans? Because that'll be quite a lot...
[2012-04-10 23:21:17 -0400] andreacampi: holoway :)
[2012-04-10 23:21:30 -0400] holoway: z: oh, I see how it is - throw things like published speaker lists in my face
[2012-04-10 23:21:55 -0400] z: holoway: please tell Jesse exactly how much I dislike him right now
[2012-04-10 23:21:57 -0400] holoway: jtimberman: no, just andreacampi and a coda for juanje
[2012-04-10 23:22:04 -0400] fujin: hehe
[2012-04-10 23:22:11 -0400] fujin: I had to edit my bio it had swears in it, did not realise
[2012-04-10 23:22:17 -0400] fujin: copie dit from facebook or some shit
[2012-04-10 23:22:22 -0400] holoway: fujin: I told the story of how we met and chef was born yet again today
[2012-04-10 23:22:25 -0400] fujin: motherfuckin ultra hacker booooyyy
[2012-04-10 23:22:38 -0400] fujin: holoway: how big is the fish now ?
[2012-04-10 23:22:49 -0400] fujin: i can never remember. half a metre? 2 metres?
[2012-04-10 23:23:03 -0400] fujin: b00m
[2012-04-10 23:23:06 -0400] andreacampi: BTW the next devopsdays Europe should be in Rome, if any of you is looking for an excuse to come over
[2012-04-10 23:23:08 -0400] holoway: easy 2 metres
[2012-04-10 23:23:20 -0400] holoway: which I think is like 6 feet
[2012-04-10 23:23:24 -0400] holoway: but..
[2012-04-10 23:23:25 -0400] holoway: :)
[2012-04-10 23:23:38 -0400] holoway: fujin: be good to see you again, been a while
[2012-04-10 23:23:47 -0400] z: atomic-penguin: yea, I am "that guy" apparently :)
[2012-04-10 23:24:05 -0400] atomic-penguin: z, thanks for the beer!
[2012-04-10 23:24:26 -0400] juanje: andreacampi: or it could be here, in Canary Island :-P
[2012-04-10 23:24:44 -0400] andreacampi: juanje I wouldn't mind that ;)
[2012-04-10 23:24:50 -0400] juanje: hehe
[2012-04-10 23:25:02 -0400] andreacampi: but I meant to say, it's supposed to be in Rome
[2012-04-10 23:25:12 -0400] holoway: italy would be super fun..
[2012-04-10 23:25:19 -0400] juanje: andreacampi: anyway, if Rome, I'll go. I must see it
[2012-04-10 23:25:21 -0400] fujin: dje is off to france for like 2 months
[2012-04-10 23:25:29 -0400] andreacampi: I didn't say "it's going to be" because, well, the organization is been quite slow so far
[2012-04-10 23:25:34 -0400] fujin: 'yo going to move the business so portland so i figure i would go to france first'
[2012-04-10 23:25:51 -0400] fujin: holoway: are you going to be playing Diablo 3 ??
[2012-04-10 23:26:02 -0400] holoway: fujin: hell yes
[2012-04-10 23:26:07 -0400] holoway: at least at #chefconf
[2012-04-10 23:26:11 -0400] andreacampi: Milan would be more fun, but hey they tell me foreigners would rather visit Rome ;)
[2012-04-10 23:26:12 -0400] fujin: i want to either be a wizard orrrrr monk
[2012-04-10 23:26:16 -0400] fujin: both look super fun
[2012-04-10 23:26:18 -0400] holoway: having a near-two year old has really killed video game time
[2012-04-10 23:26:28 -0400] fujin: d'aw!
[2012-04-10 23:26:32 -0400] miah: <3 video games
[2012-04-10 23:26:35 -0400] holoway: andreacampi: they don't know better, and rome has colisuems and stuff
[2012-04-10 23:26:43 -0400] holoway: fujin: but that lan party was such a good idea
[2012-04-10 23:26:47 -0400] z: atomic-penguin: thats alright ;)
[2012-04-10 23:26:57 -0400] fujin: yeah except I have no machine to play games on HAHA
[2012-04-10 23:26:58 -0400] z: atomic-penguin: coming to ChefConf?  I hear we are sponsoring.
[2012-04-10 23:27:08 -0400] atomic-penguin: z, I am, yes
[2012-04-10 23:27:19 -0400] fujin: chefconf is going to be like the best meatbag party all year
[2012-04-10 23:27:30 -0400] fujin: plenty of robots
[2012-04-10 23:27:33 -0400] fujin: i got some shit
[2012-04-10 23:27:36 -0400] andreacampi: hollowly yeah, sure. but you know, it's kind of trying to get a New Yorker and someone from LA to decide which one is "better"
[2012-04-10 23:27:39 -0400] fujin: secret top secret sauce shit
[2012-04-10 23:29:26 -0400] atomic-penguin: miah, the git-filter-branch man hurts my head to read.  I'll look into it though
[2012-04-10 23:29:35 -0400] miah: atomic-penguin: its pretty easy actually
[2012-04-10 23:30:03 -0400] miah: atomic-penguin: check this: http://help.github.com/split-a-subpath-into-a-new-repo/
[2012-04-10 23:30:11 -0400] andreacampi: atormic-penguin try git-read-tree for fun :p
[2012-04-10 23:31:04 -0400] atomic-penguin: There are so many git options that I just *never* use
[2012-04-10 23:31:31 -0400] miah: yup
[2012-04-10 23:31:37 -0400] atomic-penguin: http://www.youtube.com/watch?v=CDeG4S-mJts
[2012-04-10 23:31:39 -0400] miah: git is a swiss army knife
[2012-04-10 23:32:13 -0400] andreacampi: git filter-branch is so useful though once you learn it, you will eventually find uses
[2012-04-10 23:32:18 -0400] miah: has all sorts of crazy gadgets. but you mostly use the knife, bottle opener, and screw driver.
[2012-04-10 23:32:42 -0400] miah: yup. i've used it a ton
[2012-04-10 23:34:26 -0400] atomic-penguin: So how would one retain a similar structure for the new cookbooks project, submodule everything?
[2012-04-10 23:34:47 -0400] miah: i personally just use librarian-chef to manage my cookbooks directory
[2012-04-10 23:35:11 -0400] cwj: i have just finished refactoring my chef repo to use librarian
[2012-04-10 23:35:19 -0400] josephholsten: atomic-penguin: I'm starting to use librarian too. good stuff.
[2012-04-10 23:35:45 -0400] miah: its great, as i can specify stuff from community site, github, and then my private github repos
[2012-04-10 23:36:02 -0400] andreacampi: just to disagree, I used librarian for a while but then I stopped ~6 months ago I guess...
[2012-04-10 23:36:09 -0400] miah: why?
[2012-04-10 23:36:27 -0400] andreacampi: too painful with git branches etc took just too much effort to make it understand there were changes
[2012-04-10 23:36:41 -0400] miah: ah. i haven't really had that issue
[2012-04-10 23:36:43 -0400] cwj: i was using the knife github plugin to get cookbooks that werent on the community site, but maintaining a single repo with per-cookbook branches etc was pretty much a nightmare
[2012-04-10 23:37:05 -0400] miah: librarian-chef update && librarian-chef install
[2012-04-10 23:37:12 -0400] miah: i run that too often
[2012-04-10 23:37:15 -0400] cwj: yeah
[2012-04-10 23:37:31 -0400] miah: cwj: yup.
[2012-04-10 23:37:46 -0400] cwj: andreacampi: when you say you were pain around branches, is that branches within individual cookbook repositories?
[2012-04-10 23:37:48 -0400] josephholsten: is there a reason install doesn't just update?
[2012-04-10 23:37:51 -0400] miah: tracking external repo's and merging in changes was extreme pain
[2012-04-10 23:38:12 -0400] andreacampi: cwj: I had a mix of both
[2012-04-10 23:38:21 -0400] miah: josephholsten: unsure =)
[2012-04-10 23:38:36 -0400] miah: well
[2012-04-10 23:38:38 -0400] andreacampi: at that time, I had 3 chef-repo folders, one for my org + 2 companies I was consulting for
[2012-04-10 23:38:50 -0400] miah: i think its because update/resolve figure out the sha hashes of your repo
[2012-04-10 23:39:02 -0400] andreacampi: some custom cookbooks in separate git repos, some forks of 3rd party repos a giant mess :)
[2012-04-10 23:39:02 -0400] miah: and then install simply copies the files related to those hashes
[2012-04-10 23:39:22 -0400] cwj: i see
[2012-04-10 23:39:36 -0400] josephholsten: I guess for soloists, you'd want a `librarian-chef install --deployment` as with bundler. no updates.
[2012-04-10 23:40:14 -0400] miah: josephholsten: ya. it would be good to mirror the bundler options
[2012-04-10 23:40:19 -0400] andreacampi: cwj: it was a long time ago though, maybe it's gotten better
[2012-04-10 23:40:21 -0400] miah: im not sure how much it does that
[2012-04-10 23:40:22 -0400] cwj: i dont think there will be a real one-size-fits-all solution for repo management for sometime to come, if ever
[2012-04-10 23:40:27 -0400] miah: (still learning bundler)
[2012-04-10 23:40:37 -0400] miah: cwj: indeed
[2012-04-10 23:40:40 -0400] andreacampi: indeed
[2012-04-10 23:40:48 -0400] cwj: but so far i think using librarian is an improvement over what i was doing before
[2012-04-10 23:41:06 -0400] miah: i think that if you are posting your cookbooks on github though you can make it easier for people to fork and build on your work
[2012-04-10 23:41:55 -0400] cwj: i did, however, experience a bout of extreme confusion when librarian started rather throwing rather uninformative errors after i moved some local cookbook directories it was looking for
[2012-04-10 23:41:59 -0400] josephholsten: miah: the point of the --deployment option is to safely allow running during deploys. if .lock doesn't match, it errors out safely instead of just letting things slide like it does in development mode
[2012-04-10 23:42:16 -0400] miah: josephholsten: oh interesting
[2012-04-10 23:42:17 -0400] josephholsten: not useful for chef-server repos
[2012-04-10 23:42:36 -0400] josephholsten: but I'd be scared of using librarian with soloists without that
[2012-04-10 23:43:01 -0400] hoover_damm: deployment goes further
[2012-04-10 23:43:05 -0400] miah: soloists?
[2012-04-10 23:43:08 -0400] hoover_damm: if you use bundler you should use --path and --binstubs
[2012-04-10 23:43:14 -0400] josephholsten: *chef solo
[2012-04-10 23:43:18 -0400] hoover_damm: as well as --deployment
[2012-04-10 23:43:20 -0400] miah: ok
[2012-04-10 23:43:32 -0400] josephholsten: hoover_damm: +9001
[2012-04-10 23:43:45 -0400] hoover_damm: --path will skip the sudo hell and generally doesn't need some weird config to support it
[2012-04-10 23:44:01 -0400] hoover_damm: Unicorn does need a weird patch to fix that... you can find that in github.com/damm/chef-unicorn :)
[2012-04-10 23:44:18 -0400] miah: brb, time for dindin. interesting discussions though =)
[2012-04-10 23:44:20 -0400] hoover_damm: --binstubs is super beneficial because for Unicorn... I like to believe in the world of hot reload to bundler, or without
[2012-04-10 23:44:20 -0400] josephholsten: f*ing rvm and non-binstubs deploys
[2012-04-10 23:44:36 -0400] hoover_damm: --deployment actually 'disables' shared gems
[2012-04-10 23:44:37 -0400] juanje: atomic-penguin: you can remove the cookbooks from your repo (once they are splitted into own repos) and add then as a submodules
[2012-04-10 23:44:51 -0400] hoover_damm: so you cannot load C Extensions from regular site-ruby or rubygems outside your bundle
[2012-04-10 23:45:06 -0400] hoover_damm: the point of bundler is to have everything in your Gemfile
[2012-04-10 23:45:10 -0400] juanje: atomic-penguin: so you have your repo as this one, and the rest of the people can fork the individual ones
[2012-04-10 23:45:15 -0400] hoover_damm: you specify your app server, you specify your rake
[2012-04-10 23:45:21 -0400] hoover_damm: I wish you could specify your ruby and rubygems version
[2012-04-10 23:45:37 -0400] josephholsten: rbenv
[2012-04-10 23:45:55 -0400] hoover_damm: josephholsten, well I can pull out the old Yehuda speech
[2012-04-10 23:46:16 -0400] hoover_damm: :)
[2012-04-10 23:46:22 -0400] hoover_damm: but it's not required as I did more then enough
[2012-04-10 23:47:02 -0400] hoover_damm: josephholsten, I'm actually back to where I was before I joined engine Yard... prefix'd rubies
[2012-04-10 23:47:10 -0400] andreacampi: BTW I can't believe we still had retro-compat stuff for Bundler 0.8
[2012-04-10 23:47:13 -0400] hoover_damm: 2 years later, back to prefix's
[2012-04-10 23:47:18 -0400] hoover_damm: I really hate rvm/rbenv
[2012-04-10 23:47:24 -0400] andreacampi: that was like 2+ years ago!
[2012-04-10 23:47:30 -0400] hoover_damm: andreacampi, I can
[2012-04-10 23:48:11 -0400] andreacampi: right, but any vaguely good reason we should keep it?
[2012-04-10 23:48:30 -0400] andreacampi: can you even run a modern Rails with 0.8?
[2012-04-10 23:50:14 -0400] hoover_damm: no
[2012-04-10 23:50:17 -0400] hoover_damm: 0.9 is dead
[2012-04-10 23:50:36 -0400] hoover_damm: you should try and stay up to date on bundler, staying on old versions is about as bright as running Ruby 1.8.5
[2012-04-10 23:51:02 -0400] hoover_damm: but that always requires constant testing and being vigilent on not bringing in new regressions
[2012-04-10 23:51:05 -0400] hoover_damm: so a little tif and taf
[2012-04-10 23:51:24 -0400] andreacampi: sure
[2012-04-10 23:52:20 -0400] andreacampi: I'm working on the application cookbook and there, support for bundle08 just gets in the way
[2012-04-10 23:52:39 -0400] josephholsten: hoover_damm: I'm truly impressed you both hate rbenv and like(ish) prefixed versions
[2012-04-10 23:52:49 -0400] hoover_damm: josephholsten, I worked with Wayne
[2012-04-10 23:52:53 -0400] hoover_damm: for 6+months
[2012-04-10 23:53:00 -0400] josephholsten: I love wayne
[2012-04-10 23:53:18 -0400] josephholsten: and rvm is totally nice for a dev box
[2012-04-10 23:53:19 -0400] hoover_damm: yeah but even wayne wanted to rvm implode it and start rvm2
[2012-04-10 23:53:24 -0400] josephholsten: an interactive shell
[2012-04-10 23:53:29 -0400] hoover_damm: he lacked the time, it had gone soo far off the hack even for him
[2012-04-10 23:53:42 -0400] hoover_damm: that sometimes it was just a job in itself for him
[2012-04-10 23:53:51 -0400] hoover_damm: a shell script shouldn't be that hard
[2012-04-10 23:54:07 -0400] hoover_damm: and for wayne his problem is he accepts patches from everything and everyone
[2012-04-10 23:54:07 -0400] jtimberman: bundler 1.1.x is much faster.
[2012-04-10 23:54:09 -0400] hoover_damm: to make rvm better
[2012-04-10 23:54:20 -0400] hoover_damm: that's not bad, but it does lead to creeping featureitis
[2012-04-10 23:54:31 -0400] hoover_damm: that lead's to a large fun codebase to try and manage / refactor
[2012-04-10 23:54:42 -0400] josephholsten: seriously, he implemented exception handling in bash. it's as bourne as rails is ruby
[2012-04-10 23:54:57 -0400] hoover_damm: yes I know, I'm a hardcore shell programmer myself
[2012-04-10 23:55:04 -0400] hoover_damm: but I'm still not as insane about bash as Wayne is
[2012-04-10 23:55:22 -0400] josephholsten: bdsm
[2012-04-10 23:55:26 -0400] hoover_damm: if you don't do math and arrays in bash
[2012-04-10 23:55:34 -0400] hoover_damm: i feel sorry for him on bdsm
[2012-04-10 23:55:47 -0400] hoover_damm: he desperately wants people to get into it and push it forward
[2012-04-10 23:56:17 -0400] andreacampi: so for the ultimate flame war when can we start removing bash-isms from Chef and the cookbooks? not everybody runs on Linux you know, we don't all like our shell to be GPL-licensed
[2012-04-10 23:56:33 -0400] josephholsten: andreacampi: NOW!
[2012-04-10 23:56:52 -0400] josephholsten: I got windows machines to manage, bash can suck a lemon
[2012-04-10 23:57:04 -0400] hoover_damm: josephholsten, sounds like a personal problem
[2012-04-10 23:57:12 -0400] hoover_damm: you get to keep bash
[2012-04-10 23:57:26 -0400] hoover_damm: bash is a part of the Posix Unix Distribution (more or less)
[2012-04-10 23:57:37 -0400] andreacampi: uh, is it?
[2012-04-10 23:57:38 -0400] josephholsten: no, bourne is
[2012-04-10 23:57:39 -0400] hoover_damm: and you should expect bash on most Unix like or Posix like boxes you find
[2012-04-10 23:57:53 -0400] hoover_damm: and do remember, it is Bourne again
[2012-04-10 23:58:00 -0400] hoover_damm: so it has already said it's mercy
[2012-04-10 23:58:04 -0400] hoover_damm: and is now angelic
[2012-04-10 23:58:08 -0400] andreacampi: most of the time the bashisms are there just because someone was lazy
[2012-04-10 23:58:10 -0400] hoover_damm: ;)
[2012-04-10 23:58:16 -0400] hoover_damm: andreacampi, hell no
[2012-04-10 23:58:25 -0400] andreacampi: or well, had something better to do than being anal about it ;)
[2012-04-10 23:58:36 -0400] hoover_damm: andreacampi, using returns in bash and arrays and :) you can make bash just as serious as ruby or perl
[2012-04-10 23:58:46 -0400] hoover_damm: if something_is_running ; then
[2012-04-10 23:58:46 -0400] andreacampi: in the context of chef, hell yeah
[2012-04-10 23:58:51 -0400] josephholsten: andreacampi: you're heading down the path of autoconf's portable shell via m4
[2012-04-10 23:59:09 -0400] andreacampi: look at the bootstrap templates
[2012-04-10 23:59:09 -0400] josephholsten: I will not write portable shell via m4 in my cookbooks
[2012-04-10 23:59:12 -0400] hoover_damm: andreacampi, okay let's actually get back on topic.. (or me)
[2012-04-10 23:59:14 -0400] hoover_damm: what is your issue?
[2012-04-10 23:59:26 -0400] hoover_damm: andreacampi, the bootstrap templates arn't that bad
[2012-04-10 23:59:31 -0400] andreacampi: not at all
[2012-04-10 23:59:32 -0400] hoover_damm: they do need some wayne love
[2012-04-10 23:59:39 -0400] juanje: atomic-penguin: btw, I got a gist from once I needed to split cookbooks https://gist.github.com/1386361
[2012-04-10 23:59:40 -0400] hoover_damm: I think opscode should hire wayne to help clean up their bash code
[2012-04-10 23:59:44 -0400] andreacampi: just 1-2 gratuitous bash-isms is all

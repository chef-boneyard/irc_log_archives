[2012-04-18 00:00:04 -0400] yfeldblum: hoover_damn, ah that's right, i got the order of items in the script reversed! it's probably more like `cd <%= @app_path %> ; sudo -u <%= @app_user %> ; source /etc/profile.d/rvm.sh ; rvm use <%= @app_ruby %> ; exec <%= @app_run_script %>`
[2012-04-18 00:05:22 -0400] Xylo: @yfeldblum: do you really mean "sudo -u"? I guess there is no such option (not with ubuntu), I guess it's "su <%= @app_user %>"
[2012-04-18 00:05:59 -0400] Xylo: but "source /etc/profile.d/rvm.sh" is what I was missing all the time and now makes my scripts working :-)
[2012-04-18 00:09:16 -0400] hoover_damn: using rvmsudo means you don't have to source /etc/profile.d/rvm.sh
[2012-04-18 00:09:21 -0400] hoover_damn: :-P
[2012-04-18 00:09:48 -0400] hoover_damn: I've worked with wayne for months so I bloody know how to host RVM...
[2012-04-18 00:09:50 -0400] hoover_damn: and I won't
[2012-04-18 00:10:07 -0400] hoover_damn: longer then months really... :) but that's regardless nothing to brag about
[2012-04-18 00:10:13 -0400] yfeldblum: hoover_damn, these are not my exact scripts
[2012-04-18 00:10:21 -0400] hoover_damn: I understand
[2012-04-18 00:10:31 -0400] yfeldblum: hoover_damn, these were samples for Xylo, based on my memory
[2012-04-18 00:11:04 -0400] hoover_damn: http://beginrescueend.com/
[2012-04-18 00:11:12 -0400] hoover_damn: or #rvm :)
[2012-04-18 00:11:27 -0400] hoover_damn: yfeldblum, your an awesome dude and I thank you for everything you do.
[2012-04-18 00:11:41 -0400] hoover_damn: yfeldblum, but I've learned that sometimes it's better to pan those questions off to those who want to be RVM experts :)
[2012-04-18 00:13:14 -0400] Xylo: @hoover_damn: what is your approach to run a ruby app with a specified ruby version, e.g. 1.9.3 with chef? without rvm?
[2012-04-18 00:13:25 -0400] yfeldblum: hoover_damn, they're distilled from stuff that's a little more complex, that's got more knobs & bells & whistles &c., but which works anyway ;P
[2012-04-18 00:13:47 -0400] hoover_damn: Xylo, depends what distro you run... if you run Ubuntu Oneric i'd say grab my 1.9.3 PPA's
[2012-04-18 00:14:41 -0400] yfeldblum: hoover_damn, also, i'm not enamored of using RVM on servers, but it happens to be real simple to set up and use for the purpose of running multiple applications with different versions of ruby
[2012-04-18 00:15:26 -0400] Xylo: @hoover_damn: where can I find the PPA?
[2012-04-18 00:16:56 -0400] hoover_damn: Xylo, launchpad.net/~scott-likens
[2012-04-18 00:17:13 -0400] hoover_damn: https://launchpad.net/~scott-likens/+archive/ppa
[2012-04-18 00:17:14 -0400] hoover_damn: to be exact
[2012-04-18 00:17:18 -0400] hoover_damn: 1.9.3 p125 :) with libyaml
[2012-04-18 00:17:40 -0400] hoover_damn: Xylo, you can actually thank Debian... I just backported it
[2012-04-18 00:18:13 -0400] miah: hot
[2012-04-18 00:18:14 -0400] hoover_damn: Xylo, fairly easy to add to a custom bootstrap..
[2012-04-18 00:18:42 -0400] hoover_damn:   apt-get install python-software-properties -y
[2012-04-18 00:18:42 -0400] hoover_damn:   add-apt-repository ppa:scott-likens/ppa -y
[2012-04-18 00:18:43 -0400] hoover_damn:   apt-get update
[2012-04-18 00:18:43 -0400] hoover_damn:   apt-get install build-essential ruby1.9.1-full -y
[2012-04-18 00:19:07 -0400] hoover_damn: https://gist.github.com/7b01b34985c16411f2b2
[2012-04-18 00:19:10 -0400] hoover_damn: that's the full bootstrap template
[2012-04-18 00:25:53 -0400] Xylo: @hoover_damn: thank you, I'll give it a try tommorow. but for now my dirty dirty "command "echo 'source /etc/profile.d/rvm.sh && rvmsudo thin install' | bash"" will do ;-)
[2012-04-18 00:29:22 -0400] miah: ouch
[2012-04-18 00:30:20 -0400] Xylo: @miah: don't like my innovative approach? ;-)
[2012-04-18 00:33:11 -0400] miah: Xylo: https://github.com/fnichol/chef-rvm
[2012-04-18 00:33:45 -0400] hoover_damn: lol
[2012-04-18 00:34:18 -0400] Xylo: @miah: I'm using chef-rvm... couldn't find out how to execute "thin install".
[2012-04-18 00:34:45 -0400] Xylo: but yes, I know it's not the right way
[2012-04-18 00:35:15 -0400] miah: hrm
[2012-04-18 00:35:24 -0400] miah: add support for thin install? =)
[2012-04-18 00:35:57 -0400] Xylo: @miah, ok, I'll add ""command "echo 'source /etc/profile.d/rvm.sh && rvmsudo thin install' | bash""" to chef-rvm :-D
[2012-04-18 00:36:46 -0400] miah: lols
[2012-04-18 00:36:48 -0400] hoover_damn: https://github.com/fnichol/chef-rvm
[2012-04-18 00:36:54 -0400] hoover_damn: search for rvm-shell
[2012-04-18 00:36:56 -0400] hoover_damn: ^^ Xylo
[2012-04-18 00:37:04 -0400] hoover_damn: rvm_shell
[2012-04-18 00:37:05 -0400] hoover_damn: sorry
[2012-04-18 00:37:29 -0400] hoover_damn: chef-rvm is really complete :) you just missed a step
[2012-04-18 00:37:37 -0400] Xylo: lol :-D
[2012-04-18 00:37:41 -0400] Xylo: that's it
[2012-04-18 00:37:57 -0400] Xylo: I learned it the hard way :-D
[2012-04-18 00:37:58 -0400] hoover_damn: and making rvm work on production is a lot of work
[2012-04-18 00:38:00 -0400] hoover_damn: vs development
[2012-04-18 00:38:03 -0400] erikh: yes
[2012-04-18 00:38:08 -0400] erikh: I'd suggest avoiding it.
[2012-04-18 00:38:11 -0400] erikh: there are better approaches.
[2012-04-18 00:38:17 -0400] hoover_damn: erikh, we already pointed him to better approaches
[2012-04-18 00:38:23 -0400] erikh: ah, gotcha.
[2012-04-18 00:38:42 -0400] hoover_damn: but there is no harm in pointing out why you had the problem
[2012-04-18 00:38:48 -0400] Xylo: If you want to learn something it's got to be hard ;-)
[2012-04-18 00:38:54 -0400] hoover_damn: yes rvm is nasty, even wayne would love to rvm implode it off github
[2012-04-18 00:39:05 -0400] hoover_damn: but if rvm was gone what would you guys use? rbenv? really?
[2012-04-18 00:40:16 -0400] erikh: I use rvm for dev
[2012-04-18 00:40:24 -0400] erikh: I just see no need for it with a proper CM system in production
[2012-04-18 00:40:41 -0400] erikh: CM should be linking your ruby to your applications, not using additional middleware to do it
[2012-04-18 00:41:54 -0400] bemu: ^ +132598732495
[2012-04-18 00:42:37 -0400] miah: bemu: 8675309?
[2012-04-18 00:43:11 -0400] bemu: I did not get that reference initially.
[2012-04-18 00:43:32 -0400] miah: lol
[2012-04-18 00:43:32 -0400] erikh: jenny don't you lose my number!
[2012-04-18 00:44:35 -0400] Xylo: guys, thank you for your help. it's 2:44am in my time zone so I think it's time to sleep now :)
[2012-04-18 00:44:52 -0400] erikh: good night!
[2012-04-18 01:10:05 -0400] TheBeast: anyone using the firewall+ufw cookbooks on ubuntu?
[2012-04-18 01:12:50 -0400] TheBeast: they don't make any sense to me lol - it seems there are a couple of ways to apply iptables rules to a host
[2012-04-18 01:13:08 -0400] flaccid: i'm sure there is more than 2
[2012-04-18 01:14:27 -0400] TheBeast: I'm basically trying to associate basic firewall rules with a server role
[2012-04-18 01:14:51 -0400] TheBeast: and then apply these roles to different servers depending on their purpose
[2012-04-18 01:15:23 -0400] TheBeast: the readme is convoluted meh
[2012-04-18 01:25:21 -0400] hcastro: TheBeast: this one? https://github.com/opscode-cookbooks/firewall
[2012-04-18 01:36:59 -0400] TheBeast: hcastro that one is just a dep of the ufw cookbook
[2012-04-18 01:37:27 -0400] TheBeast: I'm trying to provision my rules via ufw so I abide to the 'ubuntu way'
[2012-04-18 01:37:51 -0400] TheBeast: but the one you linked is actually a dependancy of the ufw cookbook
[2012-04-18 01:39:25 -0400] hcastro: i haven't used the ufw cookbook -- only firewall directly
[2012-04-18 01:39:49 -0400] hcastro: it works well and uses ufw commands under the hood
[2012-04-18 01:41:14 -0400] TheBeast: got an example?
[2012-04-18 01:44:03 -0400] hcastro: TheBeast: if you scroll down, the README has an examples section: https://github.com/opscode-cookbooks/firewall
[2012-04-18 02:07:49 -0400] mikeg: does anyone know if I can set a variable with code in my template to be used later.  Like <% if [ true ] var = tree else var = rock -%> and then later in the template:  configitem = <%= @var %>
[2012-04-18 02:08:44 -0400] mikeg: I can't pass the var into the template using the template resource because the template resource in this recipe is used for other templates as well
[2012-04-18 02:09:15 -0400] mikeg: well, I could pass it and then not use it on the other templates but seems cleaner to keep it in the template that needs it
[2012-04-18 02:09:59 -0400] bemu: mikeg: You can do that, yes.
[2012-04-18 02:10:28 -0400] bemu: But you don't need to use !
[2012-04-18 02:10:30 -0400] bemu: er @
[2012-04-18 02:10:40 -0400] mikeg: bemu: ok, cool.  that was goin to be my next question
[2012-04-18 02:11:03 -0400] mikeg: so just call it as:   configitem = <%= var %>
[2012-04-18 02:11:12 -0400] bemu: yep
[2012-04-18 02:11:14 -0400] mikeg: Ill give it a shot.  thanks
[2012-04-18 02:11:18 -0400] bemu: No prob.
[2012-04-18 02:20:28 -0400] hoover_damn: @var not var
[2012-04-18 02:20:30 -0400] hoover_damn: heh
[2012-04-18 02:20:32 -0400] hoover_damn: no?
[2012-04-18 02:22:32 -0400] erikh: var and @var are individual.
[2012-04-18 02:23:29 -0400] hoover_damn: ah
[2012-04-18 02:23:42 -0400] hoover_damn: sounds like they need to date
[2012-04-18 02:24:26 -0400] erikh: well you could def var; @var; end
[2012-04-18 02:24:27 -0400] erikh: :P
[2012-04-18 02:29:08 -0400] hoover_damn: totally
[2012-04-18 03:22:34 -0400] thehar^home: i just encountered #<Chef::Node::Attribute:0x46603b0>
[2012-04-18 03:22:40 -0400] thehar^home: ungooglable
[2012-04-18 03:22:45 -0400] thehar^home: anyone know what it is?
[2012-04-18 03:24:30 -0400] flaccid: looks like an object heh
[2012-04-18 03:24:35 -0400] holoway: thehar^home: it's a chef attribute object
[2012-04-18 03:24:45 -0400] thehar^home: why is that returning and not the attribute :)
[2012-04-18 03:24:45 -0400] holoway: we use them when you do things like
[2012-04-18 03:24:58 -0400] holoway: node['something']['woot']
[2012-04-18 03:25:02 -0400] thehar^home: i'm having a hell of a time with overriding attributes in environments
[2012-04-18 03:25:26 -0400] thehar^home: trying to dumb shit down to see where it's conflicting
[2012-04-18 03:25:27 -0400] holoway: thehar^home: because we support things like autovivification, and attribute merging with precedence rules, etc - so attributes are more complex than just the data, or just a hash
[2012-04-18 03:26:16 -0400] thehar^home: yeah
[2012-04-18 03:26:21 -0400] thehar^home: i'm having some precedence issues lol
[2012-04-18 03:26:24 -0400] holoway: thehar^home: you can call ".to_hash" on it
[2012-04-18 03:26:34 -0400] holoway: thehar^home: lets talk about those, then
[2012-04-18 03:26:44 -0400] holoway: thehar^home: can you make a gist with an example of what you are having trouble with?
[2012-04-18 03:26:47 -0400] holoway: :)
[2012-04-18 03:26:47 -0400] thehar^home: sure
[2012-04-18 03:38:40 -0400] miah: as always, interesting discussions in here =)
[2012-04-18 03:38:58 -0400] thehar^home: heh
[2012-04-18 03:47:37 -0400] z: it has come to my attention that holoway has a laaaaaaarge developer vocabulary to match his XL brain.
[2012-04-18 03:47:52 -0400] z: and also that at least a few words out of every 'holoway IRC paragraph' go over my head.
[2012-04-18 03:48:14 -0400] miah: right, but keep reading and youll learn =)
[2012-04-18 03:48:15 -0400] hoover_damn: z, going to chefconf?
[2012-04-18 03:48:19 -0400] hoover_damn: z, have holoway do a story
[2012-04-18 03:48:31 -0400] hoover_damn: z, you will be happy
[2012-04-18 03:48:43 -0400] bemu: You could also ask questions related to what doesn't make sense to you.
[2012-04-18 03:49:31 -0400] bemu: I'm guessing in the previous one it was autovivication?
[2012-04-18 03:49:35 -0400] z: I actually had to Google 'autovivification'
[2012-04-18 03:49:39 -0400] bemu: :P
[2012-04-18 03:49:44 -0400] z: it makes total sense now
[2012-04-18 03:49:52 -0400] bemu: So now you know, and knowledge is power!
[2012-04-18 03:50:54 -0400] hoover_damn: all good ideas come from perl
[2012-04-18 03:50:58 -0400] hoover_damn: so do all bad ideas
[2012-04-18 03:51:24 -0400] thehar^home: haha
[2012-04-18 03:51:26 -0400] z: hoover_damn: I believe I am going to ChefConf.
[2012-04-18 03:51:45 -0400] thehar^home: shit
[2012-04-18 03:51:47 -0400] thehar^home: i should buy my ticket
[2012-04-18 03:52:19 -0400] thehar^home: before my teammate kills me for not seeing him speak
[2012-04-18 03:52:39 -0400] hoover_damn: i'll do a talk about using omnigraffle with chef soon :)
[2012-04-18 03:52:54 -0400] thehar^home: magic omnigraffle output from some knife magic plugin?
[2012-04-18 03:52:57 -0400] hoover_damn: mattray prolly has one written alread
[2012-04-18 03:52:57 -0400] thehar^home: that'd be amazeballs
[2012-04-18 03:53:18 -0400] z: i am doing an awesome talk
[2012-04-18 03:53:23 -0400] z: to discover how awesome
[2012-04-18 03:53:25 -0400] z: you may have to attend
[2012-04-18 03:53:27 -0400] z: no spoilers.
[2012-04-18 03:53:39 -0400] thehar^home: haha
[2012-04-18 03:54:01 -0400] hoover_damn: z, you should do a talk about how irc makes your life productive
[2012-04-18 03:54:24 -0400] z: sadly though it does not
[2012-04-18 03:54:45 -0400] hoover_damn: or does it
[2012-04-18 03:54:56 -0400] hoover_damn: prove the argument
[2012-04-18 03:55:03 -0400] z: I just come on IRC to heckle jtimberman and holoway
[2012-04-18 03:55:25 -0400] jtimberman: ...
[2012-04-18 03:55:37 -0400] z: :(
[2012-04-18 03:55:39 -0400] thehar^home: lol
[2012-04-18 03:55:54 -0400] jtimberman: literally, i just attached, and this is what i see!
[2012-04-18 03:56:08 -0400] hoover_damn: see i knew he faked it
[2012-04-18 03:56:10 -0400] hoover_damn: what a faker
[2012-04-18 03:56:25 -0400] z: jtimberman: <3 you too dude ;'(
[2012-04-18 03:57:17 -0400] miah: awww
[2012-04-18 03:57:37 -0400] jtimberman: z: :D <3
[2012-04-18 03:58:33 -0400] hoover_damn: he likes it rough
[2012-04-18 03:58:52 -0400] jtimberman: actually am going to detach so i can go watch some dvr :)
[2012-04-18 03:59:51 -0400] miah: enjoy
[2012-04-18 04:01:04 -0400] thehar^home: and i finally got it
[2012-04-18 04:01:09 -0400] thehar^home: fuckin roles
[2012-04-18 04:01:55 -0400] cwj: awwlz
[2012-04-18 04:02:05 -0400] thehar^home: lolz
[2012-04-18 04:02:09 -0400] thehar^home: quiet you
[2012-04-18 04:02:13 -0400] thehar^home: i know you been waitin to mock ;)
[2012-04-18 04:02:16 -0400] cwj: what was it?
[2012-04-18 04:02:33 -0400] thehar^home: i fucked over multiple uploads all over the place
[2012-04-18 04:02:36 -0400] cwj: ive been sitting here getting mad at cachevideos.com
[2012-04-18 04:02:43 -0400] thehar^home: removed everything from all roles and environments
[2012-04-18 04:02:45 -0400] thehar^home: reuploaded
[2012-04-18 04:02:51 -0400] thehar^home: added some logs all over
[2012-04-18 04:03:25 -0400] cwj: mmm, magic
[2012-04-18 04:03:41 -0400] hoover_damn: ans?
[2012-04-18 04:03:46 -0400] hoover_damn: err and?
[2012-04-18 04:04:15 -0400] thehar^home: and now it's overriding
[2012-04-18 04:04:38 -0400] hoover_damn: defaulting?
[2012-04-18 04:05:28 -0400] jtimberman: oh, i'm just going to leave this here, then i'm wandering off for reals :D http://www.funnyordie.com/slideshows/dd458b002f/pictures-that-prove-that-cats-are-just-fucking-with-us-at-this-point
[2012-04-18 04:05:30 -0400] thehar^home: yep it was
[2012-04-18 04:06:12 -0400] thehar^home: pussies are funny
[2012-04-18 04:06:42 -0400] thehar^home: i'm only doing this stupidity to make someone happy
[2012-04-18 04:06:48 -0400] thehar^home: so i can redo it all over again with search :]
[2012-04-18 04:06:52 -0400] thehar^home: and never have to override again
[2012-04-18 04:08:38 -0400] hoover_damn: so encrypted data bags?
[2012-04-18 04:08:54 -0400] thehar^home: wat
[2012-04-18 04:09:39 -0400] cwj: i think thehar just needs search for node discovery
[2012-04-18 04:09:55 -0400] cwj: he is fighting against some overengineering
[2012-04-18 04:10:14 -0400] thehar^home: unfortunately
[2012-04-18 04:10:23 -0400] thehar^home: yay politics!
[2012-04-18 04:10:40 -0400] hoover_damn: nah you don't need search
[2012-04-18 04:10:48 -0400] hoover_damn: you can do it all with solo
[2012-04-18 04:10:56 -0400] thehar^home: heh
[2012-04-18 04:10:56 -0400] hoover_damn: just requires more engineering then people wanna do
[2012-04-18 04:11:13 -0400] hoover_damn: and usually you should ask yourself when your done 'would search have made this easier?'
[2012-04-18 04:11:21 -0400] hoover_damn: ... that is your answer yes it will
[2012-04-18 04:11:24 -0400] thehar^home: lolz
[2012-04-18 04:11:53 -0400] hoover_damn: integrate noah or ZooKeeper
[2012-04-18 04:12:01 -0400] hoover_damn: and win more
[2012-04-18 04:12:21 -0400] thehar^home: if only it were that easy
[2012-04-18 04:12:53 -0400] cwj: i am thinking about doing noah or zk but it seems like a lot of work just to ensure that one node and only one node is running mother effing celerybeat
[2012-04-18 04:12:55 -0400] hoover_damn: sure is with noah
[2012-04-18 04:13:06 -0400] thehar^home: i have ex Y! employees in my team
[2012-04-18 04:13:11 -0400] thehar^home: they are zk weary
[2012-04-18 04:13:25 -0400] hoover_damn: give them a plunger and a flashlight
[2012-04-18 04:13:28 -0400] hoover_damn: and tell them to grow up
[2012-04-18 04:13:31 -0400] thehar^home: hehe
[2012-04-18 04:13:40 -0400] thehar^home: ex Y! people have a lot of opinions
[2012-04-18 04:13:56 -0400] hoover_damn: being emotional about infrastructure lead's to sadness
[2012-04-18 04:14:09 -0400] hoover_damn: that's why you should not allow it
[2012-04-18 04:14:11 -0400] thehar^home: That should be a t-shirt.
[2012-04-18 04:15:21 -0400] hoover_damn: <boss>but I don't wanna buy a new router...<sysadmin>...but the backplane is overloaded and we are loosing customers<boss>...can you monkey patch it with nodejs?<sysadmin>wot?<boss>do it</boss>
[2012-04-18 04:15:44 -0400] thehar^home: hahahahahahhahaha
[2012-04-18 04:17:31 -0400] cwj: loosing customers? just tie them back up
[2012-04-18 04:17:33 -0400] cwj: wakka wakka
[2012-04-18 04:17:43 -0400] thehar^home: fg
[2012-04-18 04:17:45 -0400] hoover_damn: cwj, duck tape
[2012-04-18 05:02:44 -0400] kyleconroy: I have a question about cookbook / recipe layout. I have many different services that use nginx
[2012-04-18 05:03:00 -0400] kyleconroy: should each service have a cookbook that contains that service's ngix conf
[2012-04-18 05:03:20 -0400] kyleconroy: or should I put all those configurations in the nginx cookbook?
[2012-04-18 05:05:32 -0400] josephholsten_: mattray is the guy doing spice weasel, right?
[2012-04-18 05:06:56 -0400] josephholsten_: anyone else interested in yaml support for data bags, &c?
[2012-04-18 05:28:53 -0400] BryanWB: ohai chefs!
[2012-04-18 05:29:05 -0400] BryanWB: juanje: what day u arrive in sf?
[2012-04-18 06:48:15 -0400] Kwanasolis: o/
[2012-04-18 06:53:32 -0400] BryanWB: Kwanasolis: \o
[2012-04-18 06:54:20 -0400] Kwanasolis: hey BryanWB, how goes?
[2012-04-18 06:55:41 -0400] BryanWB: Kwanasolis: busy as fuck but otherwise fine
[2012-04-18 06:55:57 -0400] Kwanasolis: nice
[2012-04-18 07:14:23 -0400] eugenmayer: Morning
[2012-04-18 07:14:54 -0400] eugenmayer: am i right, or is there a huge bug in chef, 0.10.8 iterating over any node attribute which is a has in at least level 2 of deepness?
[2012-04-18 07:15:12 -0400] eugenmayer: That sounds like a real big deal actually, it took ages to debug..
[2012-04-18 07:15:41 -0400] josephholsten_: test case?
[2012-04-18 07:16:45 -0400] eugenmayer: well, its reported..
[2012-04-18 07:16:56 -0400] josephholsten_: ticket #?
[2012-04-18 07:18:10 -0400] eugenmayer: josephholsten_: create a node with attribs node[:foo][:bucket1] and node[:foo][:bucket2], having +1 items in each bucket ( node[:foo][:bucket2][:item1] = 'test' . )
[2012-04-18 07:19:22 -0400] eugenmayer: create a recipe, lets take a template for the ease of use. Iterate over node[:foo][:bucket1] items at put them in there with a newline (.join() )
[2012-04-18 07:19:33 -0400] eugenmayer: for both buckets, and look at the total weired result
[2012-04-18 07:20:41 -0400] eugenmayer: josephholsten_: we ended up merging all those items int a comma seperated listwhich is pain..
[2012-04-18 07:21:23 -0400] eugenmayer: http://tickets.opscode.com/browse/CHEF-1804?focusedCommentId=17172&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17172
[2012-04-18 07:21:29 -0400] eugenmayer: --
[2012-04-18 07:21:40 -0400] eugenmayer: Not sure why this never got fixed, but its a pretty huge deal
[2012-04-18 07:22:29 -0400] josephholsten_: let me grab a node a node and break it
[2012-04-18 07:23:53 -0400] eugenmayer: i would provide you some code, but we already replaced it
[2012-04-18 07:23:58 -0400] eugenmayer: did not check in the old
[2012-04-18 07:28:09 -0400] josephholsten_: that's interesting. knife node from file hates me
[2012-04-18 07:29:20 -0400] eugenmayer: josephholsten_: http://pastie.org/3809078
[2012-04-18 07:29:31 -0400] eugenmayer: i think, you would admit, solving things this way is super ugly.
[2012-04-18 07:31:27 -0400] eugenmayer: beside, being not able to use deepmerge, you cannot extend the rules using other services
[2012-04-18 07:31:51 -0400] josephholsten_: well I know apache2 has attributes 3 deep
[2012-04-18 07:32:11 -0400] josephholsten_: also https://github.com/opscode-cookbooks/apache2/blob/master/attributes/default.rb#L134
[2012-04-18 07:32:30 -0400] eugenmayer: there is no itereation
[2012-04-18 07:33:05 -0400] eugenmayer: https://github.com/opscode-cookbooks/apache2/blob/master/recipes/default.rb#L209
[2012-04-18 07:33:06 -0400] eugenmayer: there is
[2012-04-18 07:33:18 -0400] eugenmayer: but it needs to be repeated with an additional bucket
[2012-04-18 07:33:32 -0400] eugenmayer: in out case, same deepness
[2012-04-18 07:33:42 -0400] josephholsten_: https://github.com/opscode-cookbooks/apache2/blob/master/recipes/default.rb#L209
[2012-04-18 07:33:57 -0400] josephholsten_: hmm
[2012-04-18 07:35:01 -0400] eugenmayer: dont get me wrong, i would love to do
[2012-04-18 07:35:01 -0400] eugenmayer: http://pastie.org/3809098
[2012-04-18 07:35:26 -0400] eugenmayer: but if you iterate over a new hash in same deepness as rule, that thing gonna so badly explode :)
[2012-04-18 07:37:02 -0400] josephholsten_: have you checked if this is true of all mash collections?
[2012-04-18 07:38:16 -0400] eugenmayer: josephholsten_: http://pastie.org/3809107
[2012-04-18 07:38:23 -0400] eugenmayer: that would simply not work, e.g.
[2012-04-18 07:39:11 -0400] eugenmayer: ah, i should use link :)
[2012-04-18 07:40:03 -0400] eugenmayer: Babar: Olivier, did you ever got hit by this?
[2012-04-18 07:43:37 -0400] josephholsten_: I can't reproduce with a manually created Chef::Node::Attribute
[2012-04-18 07:43:41 -0400] Babar: nope, sorry
[2012-04-18 07:48:08 -0400] josephholsten_: eugenmayer: this should blow up with your use, right? http://pastie.org/3809135
[2012-04-18 07:50:06 -0400] eugenmayer: josephholsten_: http://pastie.org/3809143
[2012-04-18 07:50:22 -0400] eugenmayer: b and c need to be in the same level
[2012-04-18 07:51:07 -0400] eugenmayer: josephholsten_: or in real like this http://pastie.org/3809147
[2012-04-18 07:53:30 -0400] josephholsten_: this seems to work fine: http://pastie.org/3809159
[2012-04-18 07:59:05 -0400] josephholsten_: eugenmayer: this is more readable, but effectively the same: http://pastie.org/3809181
[2012-04-18 07:59:16 -0400] josephholsten_: you can run that straight through ruby
[2012-04-18 08:00:21 -0400] eugenmayer: josephholsten_: ok, to have it 100% the same, dont have an array for b and c, but rather several hashes
[2012-04-18 08:00:38 -0400] eugenmayer: f.a.b.item1="string1"
[2012-04-18 08:00:42 -0400] eugenmayer: f.a.b.item2="string2"
[2012-04-18 08:01:02 -0400] eugenmayer: josephholsten_: could you tell me your chef-version also?
[2012-04-18 08:02:27 -0400] eugenmayer: josephholsten_: i can run this in a normal ruby console? Interesting way to test. Iam not sure this is 100% the same testcase if you deploy a recipe, but when this works for the above cases we have a 0.10.8 bug ( or and lower ) or your example there are new circumumstances in a real recipe
[2012-04-18 08:02:47 -0400] josephholsten_: I'm using chef 0.10.8
[2012-04-18 08:03:15 -0400] josephholsten_: I'm just trying to isolate stuff so we have less moving parts
[2012-04-18 08:03:49 -0400] josephholsten_: I guess I could just build a recipe and throw it through vagrant
[2012-04-18 08:04:39 -0400] josephholsten_: actually, I'm too tired for that.
[2012-04-18 08:04:57 -0400] josephholsten_: I'll leave a note on the ticket and try to help more tomorrow
[2012-04-18 08:08:01 -0400] eugenmayer: josephholsten_: thank you a lot
[2012-04-18 08:08:14 -0400] eugenmayer: i will try to get an example recipe up on github to assist
[2012-04-18 08:08:24 -0400] eugenmayer: josephholsten_++
[2012-04-18 08:08:32 -0400] josephholsten_: don't thank me yet, we don't even have a test case. much less a patch!
[2012-04-18 08:08:49 -0400] josephholsten_: *isolated test case
[2012-04-18 09:36:32 -0400] sampikesley: Anybody using any good IDEs for Chef?
[2012-04-18 09:36:59 -0400] sampikesley: I'm reaching the limits of what I can usefully do with vi
[2012-04-18 09:42:06 -0400] specialsauce: heh, no, vim here but i'd be interested in hearing what everyone else is using too actually
[2012-04-18 09:42:34 -0400] BryanWB: sampikesley: its a lousy text editor, but emacs is an excellent ide
[2012-04-18 09:43:12 -0400] BryanWB: i still prefer emacs for text editing but emacs works really well for me w/ ruby, browsing lots of directories, and working w/ git
[2012-04-18 09:43:35 -0400] Mithrandir: I don't think it's a particularly lousy editor.
[2012-04-18 09:43:36 -0400] BryanWB: sampikesley: http://devopsanywhere.blogspot.it/2011/11/emacs-for-sysadmins.html
[2012-04-18 09:43:54 -0400] BryanWB: Mithrandir: well, i do, and i have been using it for 3 yrs, of course ymmv
[2012-04-18 09:47:42 -0400] BryanWB: sampikesley: i felt the same way until i discovered org-mode and learned emacs despite my best intentions not to
[2012-04-18 09:49:17 -0400] sampikesley: but I need something better than the 5 terminal windows I'm currently staring at
[2012-04-18 09:49:47 -0400] BryanWB: sampikesley: not using tmux or screen?
[2012-04-18 09:50:45 -0400] sampikesley: not as much as I perhaps should
[2012-04-18 09:51:18 -0400] eugenmayer: clusterssh? :)
[2012-04-18 09:56:25 -0400] specialsauce: sampikesley: I find nerdtree plugin pretty good for cheffing if you're not already using that or something similar?
[2012-04-18 09:56:49 -0400] specialsauce: that plus use of multiple edit windows in one terminal session, its not horrdenous
[2012-04-18 09:56:50 -0400] sampikesley: I need something
[2012-04-18 09:57:14 -0400] sampikesley: this is the first time I've ever really needed one
[2012-04-18 09:57:30 -0400] sampikesley: Two terminal windows have generally sufficed for me before
[2012-04-18 09:57:52 -0400] sampikesley: But suddenly I'm having to think like a real dev
[2012-04-18 09:58:01 -0400] specialsauce: hehe, i'm in a similar position :-)
[2012-04-18 09:59:06 -0400] specialsauce: ctrl-w is your friend :-P
[2012-04-18 09:59:23 -0400] sampikesley: vim.org needs a *serious* overhaul
[2012-04-18 10:02:33 -0400] sampikesley: TIL that tar can extract zip files
[2012-04-18 10:02:41 -0400] sampikesley: how did I not know this before?
[2012-04-18 10:03:10 -0400] BryanWB: sampikesley: wow! i had no idea either
[2012-04-18 10:11:21 -0400] Kwanasolis: tar can extract zip?
[2012-04-18 10:12:06 -0400] sampikesley: I absent-mindendly did 'tar xzvf ~/Downloads/nerdtree.zip'
[2012-04-18 10:12:08 -0400] sampikesley: and it worked
[2012-04-18 10:12:25 -0400] Kwanasolis: didn't work for me
[2012-04-18 10:12:29 -0400] sampikesley: :(
[2012-04-18 10:12:36 -0400] sampikesley: hmm
[2012-04-18 10:12:39 -0400] sampikesley: this is on a Mac
[2012-04-18 10:12:44 -0400] sampikesley: which would BSD tar, I preusme
[2012-04-18 10:12:51 -0400] sampikesley: mebbe not GNU tar
[2012-04-18 10:13:20 -0400] sampikesley: RMS probably doesn't approve of zips or something
[2012-04-18 10:13:50 -0400] itwasntandy: gnu tar works fine too
[2012-04-18 10:14:01 -0400] itwasntandy: for unzuping gzip or bzip stuff
[2012-04-18 10:14:12 -0400] sampikesley: well yeah, that's expected
[2012-04-18 10:14:18 -0400] itwasntandy: but perhaps not zip
[2012-04-18 10:14:20 -0400] itwasntandy: not sure
[2012-04-18 11:04:31 -0400] BryanWB: hey itwasntandy, have time by chance to look at my tomcat lwrp? https://github.com/bryanwb/tomcat
[2012-04-18 11:04:52 -0400] BryanWB: itwasntandy: would love feed back on the xx_opts, d_opts, and additional_opts attributes
[2012-04-18 11:28:10 -0400] julian3387: Hi everybody
[2012-04-18 11:34:49 -0400] haakon_: I am using the apache2 cookbook to install apache via ubuntu repositories. But what is the best approach to ensure that particular package always is upgraded when a new version is available=
[2012-04-18 11:34:53 -0400] haakon_: ?
[2012-04-18 12:04:45 -0400] kaz___: Hmm... I'd like to do a git checkout, then run an command (using the git repo).  The output of this will be parsed and users, directories, etc will be created.  I'm not certain what the best approach for this would be.
[2012-04-18 12:05:55 -0400] kaz___: Is there some way to run the git dsl and have execute the git commands immediately?
[2012-04-18 12:07:49 -0400] kaz___: My current guess is to use the deploy dsl and the after_restart callback to create my user/group/directory resources.
[2012-04-18 12:07:55 -0400] `brendan: morning folks
[2012-04-18 12:08:33 -0400] moos3: anything special i need to consider when using chef to manage physical (non-cloud) systems
[2012-04-18 12:09:37 -0400] specialsauce: moos3: For one, if they're VMs then you'd maybe want to look at a vagrant-alike type system maybe to build the VMs for you since you can't just make magic calls to a coud API
[2012-04-18 12:10:45 -0400] BryanWB: moos3: look at installing the lower-level monitoring tools from hp, dell using the yumrepo recipe if u r on EL
[2012-04-18 12:10:54 -0400] BryanWB: can be a pain to track down those rpms
[2012-04-18 12:11:24 -0400] moos3: specialsauce no i'm looking to use my chef recipes that i use for aws, on my 600 physical servers that i manage, I'm tried of hand deployments
[2012-04-18 12:11:32 -0400] BryanWB: and using ohai and dmidecode to determine whether a machine is dell or hp or ?
[2012-04-18 12:34:18 -0400] julian3387: is it slow to bootstrap chef-server from chef-solo? on my centos VM it takes a while, it seems to be stuck since more than 10minutes
[2012-04-18 12:35:06 -0400] julian3387: maybe my vm doens't have enough memory allocated
[2012-04-18 12:35:14 -0400] julian3387: 512MB is not a lot
[2012-04-18 12:47:02 -0400] mosez: how should i overwrite globaly the gem bin path for gem_package?
[2012-04-18 12:52:49 -0400] jannel: I'm getting Connection reset by peer - (Errno::ECONNRESET) when trying to update an environment on the chef server, does anyone know what might cause this?
[2012-04-18 12:53:23 -0400] jannel: that appears in the server log, the client says Server returned error
[2012-04-18 13:25:06 -0400] dyer: Anyone here using the chef-rvm cookbook ?
[2012-04-18 13:26:54 -0400] BryanWB: dyer: i think many are, tho i am not myself
[2012-04-18 13:27:32 -0400] dyer: k, I am trying to figure it out, doesn't seem to be actually installing any rubies, but the logs seem to say it did very odd
[2012-04-18 13:27:37 -0400] dyer: wondering if I am using it incorrectly
[2012-04-18 13:33:23 -0400] dyer: sampikesley, yea
[2012-04-18 13:33:57 -0400] dyer: So question, if I use the gem_package resource chef will install that into the system ruby, not the bundled ruby that comes w/ chef-client
[2012-04-18 13:33:59 -0400] dyer: is that correct?
[2012-04-18 13:34:09 -0400] dyer: ( forgetting about RVM right now, just a general question )
[2012-04-18 13:35:52 -0400] jtimberman: haakon_: use the :upgrade action for the package resource
[2012-04-18 13:36:06 -0400] mosez: the rvm cookbooks looks to me strange too... currently iM building my own...
[2012-04-18 13:37:04 -0400] haakon_: jtimberman: Thanks, was looking at that, but does that mean I have to edit each and every recipe? Does upgrade imply install?
[2012-04-18 13:38:08 -0400] jtimberman: haakon_: yeah upgrade implies install
[2012-04-18 13:38:27 -0400] jtimberman: haakon_: and yes you'd have to modify every recipe if the specified action is not :upgrade
[2012-04-18 13:38:31 -0400] jtimberman: for packages
[2012-04-18 13:39:47 -0400] haakon_: jtimberman: Alright, thanks. I'm currently thinking about the pros and cons for whether to use action upgrade with Chef, or whether to utilize unattended-upgrades, as the latter also takes care of packages not installed by Chef. Any thoughts?
[2012-04-18 14:21:08 -0400] doki_pen: i want to make my recipes work on rackspace and ec2. right now I'm using node[:rackspace][:private_ip] all over the place. Is there a way I can add a method that all my coookbooks can use to abstract it?
[2012-04-18 14:21:15 -0400] jordan_c: BryanWB: are you around? I'm having some issue with your tomcat ark cookbook, wondering if I've got the wrong combination
[2012-04-18 14:24:28 -0400] jtimberman: doki_pen: should be able to s/rackspace/cloud/
[2012-04-18 14:24:50 -0400] BryanWB: jordan_c: yo
[2012-04-18 14:24:58 -0400] BryanWB: what's problem?
[2012-04-18 14:26:24 -0400] jordan_c: Well, I'm not sure I'm using the right versions of the cookbooks.. I've got your ark from opscode community and your tomcat from github
[2012-04-18 14:26:49 -0400] BryanWB: have u got the latest ark? i uploaded about an hour ago
[2012-04-18 14:26:59 -0400] jordan_c: I'm getting http://privatepaste.com/87de92d375 trying to run it
[2012-04-18 14:27:06 -0400] BryanWB: the one there previously was pretty ancient
[2012-04-18 14:27:28 -0400] jordan_c: I believe so with the changed API?
[2012-04-18 14:27:31 -0400] BryanWB: using the one c.o.c should fix the problem
[2012-04-18 14:27:56 -0400] BryanWB: not specifically, just I had been pretty bad about updating the ark on c.o.c
[2012-04-18 14:28:03 -0400] jordan_c: the one c.o.c.?
[2012-04-18 14:28:19 -0400] BryanWB: community.opscode.com
[2012-04-18 14:28:21 -0400] jordan_c: hh
[2012-04-18 14:28:35 -0400] BryanWB: i m already up 0.0.7 tks to some great code from dennybaa
[2012-04-18 14:29:30 -0400] jordan_c: readme from apr14 is that the new one? I just downloaded it this morning from c.o.c
[2012-04-18 14:29:45 -0400] BryanWB: readme from apr 14 is the new one
[2012-04-18 14:29:57 -0400] BryanWB: hmm, the version reported by c.o.c this morning was 0.0.1, weird
[2012-04-18 14:31:00 -0400] BryanWB: ark won't create the path  /usr/local/tomcat/ if it doesn't already exist
[2012-04-18 14:31:22 -0400] jordan_c: metadata.rb on the one I have is 0.0.7 so I think it's the right one
[2012-04-18 14:31:38 -0400] BryanWB: so then ln -s /usr/local/tomcat7-7_1/ -> /usr/local/tomcat/default fails
[2012-04-18 14:31:50 -0400] BryanWB: do  $ mkdir /usr/local/tomcat/
[2012-04-18 14:32:08 -0400] BryanWB: and it should solve ur problem
[2012-04-18 14:32:23 -0400] BryanWB: the way i set up the file directories for tomcat is kind of dumb
[2012-04-18 14:33:14 -0400] jordan_c: geting closer http://privatepaste.com/5ebc52840a
[2012-04-18 14:33:16 -0400] BryanWB:    /usr/local/tomcat should just be a symlink to /usr/local/tomcat7-7.1
[2012-04-18 14:34:25 -0400] BryanWB: maybe its a sign that I am growing when code I wrote a month ago looks like shit :(
[2012-04-18 14:34:35 -0400] jordan_c: hehe
[2012-04-18 14:34:53 -0400] jordan_c: also looks like 7.0.25 is hardcoded in the ark recipe
[2012-04-18 14:35:35 -0400] BryanWB: it is node['tomcat']['7']['download_url']
[2012-04-18 14:35:50 -0400] BryanWB: u can override the checksum and download_url w/ a newer version
[2012-04-18 14:36:14 -0400] BryanWB: jordan_c: i c the error
[2012-04-18 14:36:40 -0400] BryanWB: can't do .join on nil
[2012-04-18 14:37:14 -0400] BryanWB: change it to     @tomcat['more_opts'].join(' ') unless @tomcat['more_opts'].nil?
[2012-04-18 14:37:27 -0400] BryanWB: i will change that in my ckbk too
[2012-04-18 14:38:42 -0400] BryanWB: actually that won't work as it part of a long tring concatenations
[2012-04-18 14:39:10 -0400] jordan_c: should I be concerned about line 37 in the tomcat ark recipe?
[2012-04-18 14:39:16 -0400] jordan_c:   version '7.0.25'
[2012-04-18 14:45:08 -0400] BryanWB: jordan_c: ok i c now, u r using tomcat::ark recipe
[2012-04-18 14:45:25 -0400] BryanWB: i assumed u were using the tomcat::base,
[2012-04-18 14:45:30 -0400] jordan_c: aye sorry
[2012-04-18 14:45:31 -0400] BryanWB: ok let me work on that
[2012-04-18 14:45:56 -0400] BryanWB: my bad, i have to get back to regular work now, sorry man, will have to look at that later :((
[2012-04-18 14:46:15 -0400] eugenmayer: anybody seen that when iterating over nodes-attributes : [Wed, 18 Apr 2012 16:44:32 +0200] FATAL: ArgumentError: You tried to set a nested key, where the parent is not a hash-like object: shorewall/new_rules/new_rules
[2012-04-18 14:47:33 -0400] jordan_c: maybe I'll just use the base if it works, thanks BryanWB
[2012-04-18 14:47:52 -0400] BryanWB: sorry it doesn't work properly :p
[2012-04-18 14:48:35 -0400] BryanWB: jordan_c: i always use the lwrp that's why the ark recipe isn't so well tested
[2012-04-18 14:49:19 -0400] geekbri: Oh that error, I've dealt with that before when I was writing LWRPs
[2012-04-18 14:49:49 -0400] jordan_c: I didn't even look, I assumed the base used rpms and extra repos
[2012-04-18 14:50:14 -0400] jordan_c: I think it should meet my needs, I'm just trying to avoid dependancy on jpackage and such
[2012-04-18 14:50:15 -0400] BryanWB: the lwrp is so ez even i can use it properly
[2012-04-18 14:52:20 -0400] eugenmayer: http://tickets.opscode.com/browse/CHEF-1804
[2012-04-18 14:52:25 -0400] eugenmayer: its again this one..
[2012-04-18 15:01:31 -0400] sampikesley: default behaviour is for /etc/init.d/chef-client to be created?
[2012-04-18 15:02:22 -0400] jtimberman: sampikesley: by what
[2012-04-18 15:02:29 -0400] sampikesley: chef-client was ruinning on a node
[2012-04-18 15:02:35 -0400] sampikesley: where I thougt it wasn't
[2012-04-18 15:02:42 -0400] sampikesley: I changed something in a cookbook
[2012-04-18 15:02:46 -0400] jtimberman: sampikesley: apt install?
[2012-04-18 15:02:48 -0400] jtimberman: or gem
[2012-04-18 15:02:52 -0400] sampikesley: um
[2012-04-18 15:02:53 -0400] sampikesley: apt
[2012-04-18 15:02:55 -0400] jtimberman: yeah so
[2012-04-18 15:03:26 -0400] jtimberman: thats a debian/ubuntu thing. while not policy, it is highly recommended that if a package provides a daemon, that daemon gets started when the package is isntalled.
[2012-04-18 15:03:34 -0400] sampikesley: grrrrrrrr
[2012-04-18 15:03:37 -0400] sampikesley: dangerous
[2012-04-18 15:03:40 -0400] LinuxHorn: w00t!  opscode booked to come in to our office for training!  no more fumbling through this
[2012-04-18 15:03:50 -0400] sampikesley: OK, I'm a fix that up
[2012-04-18 15:03:59 -0400] jtimberman: sampikesley: i'm sorry
[2012-04-18 15:04:02 -0400] sampikesley: hah
[2012-04-18 15:04:03 -0400] jtimberman: i wrote that postinst
[2012-04-18 15:04:07 -0400] jtimberman: :-|
[2012-04-18 15:04:31 -0400] sampikesley: just played havoc with a dev cassandra cluster
[2012-04-18 15:04:44 -0400] sampikesley: OK, now I know, I can work around it...
[2012-04-18 15:05:03 -0400] sampikesley: and hope my devs forgive...
[2012-04-18 15:05:04 -0400] sampikesley: ;)
[2012-04-18 15:05:17 -0400] hoover_damn: what no voltdb?
[2012-04-18 15:06:01 -0400] mosiac: can your chef server be configured only by a host name or will ip address work as well?
[2012-04-18 15:06:27 -0400] doki_pen: i'm trying to tune chef-server
[2012-04-18 15:06:40 -0400] mosiac: Sorry can the chef "nodes" see the server if it just has an ip address and not a proper hostname?
[2012-04-18 15:06:43 -0400] doki_pen: i've added more merb nodes and upped the memory on solr
[2012-04-18 15:06:55 -0400] doki_pen: helped a lot, but it seems like file transfers are still very slow
[2012-04-18 15:07:02 -0400] doki_pen: when I file needs to be updated
[2012-04-18 15:07:10 -0400] doki_pen: is couchdb my bottleneck?
[2012-04-18 15:07:18 -0400] doki_pen: if so, how can i get better perf out of it?
[2012-04-18 15:07:34 -0400] doki_pen: i have about 2G of free memory on the box
[2012-04-18 15:07:44 -0400] doki_pen: disk space is fine
[2012-04-18 15:07:51 -0400] doki_pen: load is low
[2012-04-18 15:08:16 -0400] hoover_damn: couchdb can be a bottleneck but that's usually due to low disk speed
[2012-04-18 15:10:05 -0400] doki_pen: hoover_damn: is there a way to get it to cache more?
[2012-04-18 15:10:45 -0400] doki_pen: or is there something else that can cause slow file transfers?
[2012-04-18 15:11:25 -0400] doki_pen: it's not terrible, runs are taking about 40 seconds
[2012-04-18 15:12:21 -0400] hoover_damn: i thought you were talking about upload speed?
[2012-04-18 15:13:07 -0400] doki_pen: no, download speed
[2012-04-18 15:13:21 -0400] doki_pen: the couchdb is only 2G
[2012-04-18 15:13:28 -0400] doki_pen: so it should be able to cache everything
[2012-04-18 15:14:04 -0400] doki_pen: theoretically
[2012-04-18 15:15:01 -0400] doki_pen: oh, I see
[2012-04-18 15:15:09 -0400] doki_pen: it let's the OS worry about caching, makes sense
[2012-04-18 15:15:22 -0400] hoover_damn: most things do
[2012-04-18 15:15:58 -0400] doki_pen: yeah, so i guess I have no idea why it's slow
[2012-04-18 15:16:22 -0400] hoover_damn: doki_pen, can you profile the chef-server to determine why it's slow? take a look at the logs for couchdb and for chef-server
[2012-04-18 15:16:32 -0400] hoover_damn: and perhaps you need more cpu? newer ruby?
[2012-04-18 15:19:03 -0400] doki_pen: hoover_damn: newer ruby, that could be the ticket
[2012-04-18 15:20:02 -0400] doki_pen: unfortunately, I'm on ubuntu
[2012-04-18 15:20:08 -0400] doki_pen: maybe it's too much of a PITA to fix
[2012-04-18 15:20:56 -0400] hoover_damn: you can upgrade ruby on ubuntu
[2012-04-18 15:21:08 -0400] doki_pen: ah, i see now
[2012-04-18 15:22:08 -0400] doki_pen: anyway to switch out the default ruby?
[2012-04-18 15:26:55 -0400] doki_pen: hoover_damn: thanks
[2012-04-18 15:28:27 -0400] dwhsix: anybody know of a cookbook for aws elasticache?
[2012-04-18 15:30:07 -0400] senthilr: why not use memcahced
[2012-04-18 15:30:09 -0400] senthilr: :)
[2012-04-18 15:31:37 -0400] dwhsix: well, unless I'm wrong I'd need at least 2 memcached instances to get similar/same redundancy?
[2012-04-18 15:31:54 -0400] sampikesley: use redis
[2012-04-18 15:31:57 -0400] hoover_damn: redundancy?
[2012-04-18 15:31:58 -0400] hoover_damn: huh?
[2012-04-18 15:32:25 -0400] hoover_damn: I guess i should just pay attention to work then try to explain how memcached work...there is no load balancing or redundancy in memcached itself
[2012-04-18 15:32:28 -0400] hoover_damn: it's all in the client gems
[2012-04-18 15:32:37 -0400] hoover_damn: have a good day
[2012-04-18 15:35:15 -0400] dwhsix: no, that's a good point
[2012-04-18 15:35:34 -0400] dwhsix: I guess I need to read up on elasticache a bit more...
[2012-04-18 15:35:43 -0400] doki_pen: using membase, it's a nice drop in replacement for memcache
[2012-04-18 15:35:58 -0400] doki_pen: and running moxi on all clients
[2012-04-18 15:36:05 -0400] dwhsix: sounded like it would behave like a memcache cluster
[2012-04-18 15:36:38 -0400] dwhsix: well, specific/simple case: want/need to use  http://code.google.com/p/memcached-session-manager/
[2012-04-18 15:36:51 -0400] dwhsix: for tomcat that's all
[2012-04-18 15:37:05 -0400] dwhsix: (cause you can't do clustered tomcat on aws)
[2012-04-18 15:37:56 -0400] sagar_nikam: Hi, I am new to chef and trying http://wiki.opscode.com/display/chef/Fast+Start+Guide using the hosted chef
[2012-04-18 15:38:31 -0400] sagar_nikam: when i execute the command knife client list, i get the following error
[2012-04-18 15:38:39 -0400] mosiac: If I'm using the chef-server to knife bootstrap a node why would I still get a "EHOSTUNREACH" error?
[2012-04-18 15:38:46 -0400] sagar_nikam: WARN: HTTP Request Returned 400 Bad Request: 400 - Bad Request: Valid X-CHEF-VERSION header is required. /usr/lib/ruby/1.8/net/http.rb:2105:in `error!': 400 "Bad Request" (Net::HTTPServerException)         from /usr/lib/ruby/1.8/chef/rest.rb:216:in `api_request'         from /usr/lib/ruby/1.8/chef/rest.rb:267:in `retriable_rest_request'         from /usr/lib/ruby/1.8/chef/rest.rb:197:in `api_request'         from /usr/lib/ruby/1.
[2012-04-18 15:39:17 -0400] sagar_nikam: am i doing something wrong ?
[2012-04-18 15:41:50 -0400] holoway: sagar_nikam: what version of chef are you using?
[2012-04-18 15:43:10 -0400] sagar_nikam: holoway:0.8.16
[2012-04-18 15:43:26 -0400] sagar_nikam: i am on ubuntu 11.10
[2012-04-18 15:43:35 -0400] sagar_nikam: i did a sudo apt-get install chef
[2012-04-18 15:45:56 -0400] sampikesley: get the gems
[2012-04-18 15:46:21 -0400] sampikesley: gem install chef
[2012-04-18 15:48:09 -0400] sagar_nikam: sampikesley: trying that now
[2012-04-18 15:48:29 -0400] holoway: sagar_nikam: that's a very old version of chef
[2012-04-18 15:48:37 -0400] holoway: and that's why you are having that problem
[2012-04-18 15:48:57 -0400] sagar_nikam: holoway: trying gem install chef now
[2012-04-18 15:53:08 -0400] sagar_nikam: holoway: even after installing gem install chef
[2012-04-18 15:53:29 -0400] sagar_nikam: version is still 0.8.16
[2012-04-18 15:53:39 -0400] holoway: sagar_nikam: did you uninstall the package?
[2012-04-18 15:53:48 -0400] holoway: sagar_nikam: are you on debian or ubuntu?
[2012-04-18 15:54:02 -0400] sagar_nikam: i am on ubuntu
[2012-04-18 15:54:13 -0400] holoway: sagar_nikam: http://wiki.opscode.com/display/chef/Installing+Chef+Client+on+Ubuntu+or+Debian
[2012-04-18 15:54:18 -0400] holoway: has the instructions you should follow
[2012-04-18 15:54:38 -0400] holoway: sagar_nikam: you probably just want to follow the package repository instructions
[2012-04-18 15:55:02 -0400] sagar_nikam: ok
[2012-04-18 15:55:03 -0400] jessicab: sagar_nikam: ill fix up the fast start guide today too and remove that apt-get instruction, looks like that was a new edit from a few weeks ago
[2012-04-18 15:55:07 -0400] sagar_nikam: will try that
[2012-04-18 15:55:20 -0400] sagar_nikam: ok
[2012-04-18 15:56:47 -0400] sagar_nikam: i wanted to try a single node hadoop install using chef. all the cookbooks are for cluster
[2012-04-18 15:56:52 -0400] sagar_nikam: i am learning chef
[2012-04-18 15:56:59 -0400] sagar_nikam: hence wanted a single node
[2012-04-18 15:57:04 -0400] sagar_nikam: where can i find it
[2012-04-18 15:57:15 -0400] sampikesley: likely doesn't exist
[2012-04-18 15:57:46 -0400] sagar_nikam: ok
[2012-04-18 16:04:30 -0400] sagar_nikam: holoway:should i uninstall the packages i had installed earlier
[2012-04-18 16:05:28 -0400] sampikesley: sagar_nikam: yes
[2012-04-18 16:05:44 -0400] sagar_nikam: ok
[2012-04-18 16:19:46 -0400] sagar_nikam: sampikesley: while sudo apt-get install chef, i was not prompted for chef server URL
[2012-04-18 16:25:20 -0400] sampikesley: you need to hack your knife.rb yourself
[2012-04-18 16:25:34 -0400] sampikesley: doesn't hosted chef provide a sample one?
[2012-04-18 16:25:58 -0400] sampikesley: or try https://github.com/pikesley/catering-college
[2012-04-18 16:28:33 -0400] sagar_nikam: sampilesley: i have the knife.rb for my hosted chef account
[2012-04-18 16:29:48 -0400] sagar_nikam: just checked that - it has the hosted chef URL
[2012-04-18 16:29:52 -0400] sampikesley: (Y)
[2012-04-18 16:30:04 -0400] sampikesley: so you shoulld be golden, then
[2012-04-18 16:30:38 -0400] sampikesley: knife -v
[2012-04-18 16:30:39 -0400] sampikesley: Chef: 0.10.8
[2012-04-18 16:30:40 -0400] sampikesley: ?
[2012-04-18 16:39:34 -0400] sagar_nikam: yes it is - 0.10.8
[2012-04-18 16:39:48 -0400] sagar_nikam: also getting this error - should i ignore
[2012-04-18 16:40:03 -0400] sagar_nikam: Invalid gemspec in [/var/lib/gems/1.8/specifications/mime-types-1.18.gemspec]: invalid date format in specification: "2012-03-21 00:00:00.000000000Z" Invalid gemspec in [/var/lib/gems/1.8/specifications/json-1.6.1.gemspec]: invalid date format in specification: "2011-09-18 00:00:00.000000000Z"
[2012-04-18 16:41:20 -0400] sampikesley: aare these old gems from you apt install?
[2012-04-18 16:41:32 -0400] afallows: sagar_nikam: You can safely ignore that. IF you want, you can also get rid of it by editing those files manually and removing the "00:00:00.000000000Z" part.
[2012-04-18 16:41:52 -0400] sagar_nikam: ok
[2012-04-18 16:42:29 -0400] sagar_nikam: what is validation.pem.
[2012-04-18 16:42:37 -0400] jtran: using knife ec2 plugin or any other chef related tool, how do i spin up more than 1 instance (vm) ?
[2012-04-18 16:42:41 -0400] sagar_nikam: i have my username.pem and organization.pem
[2012-04-18 16:43:05 -0400] jtran: i seen someone created a 'knife-batch' but i just couldn't believe there's no native way of spinning up more than 1 vm at a time
[2012-04-18 16:43:50 -0400] jessicab: sagar_nikam - validation.pem is open source chefs version of the org.pem, you wont need it if youre on hosted chef
[2012-04-18 16:44:01 -0400] sagar_nikam: ok
[2012-04-18 16:44:25 -0400] sagar_nikam: where do i copy the pem files - user.pem and organization.pem
[2012-04-18 16:44:46 -0400] sagar_nikam: should i create a  .chef folder
[2012-04-18 16:45:02 -0400] sagar_nikam: and copy it there
[2012-04-18 16:47:04 -0400] jessicab: sagar_nikam - are you setting that node up with knife, or just chef-client? the directions holoway posted will work for chef-client but you would need to create a .chef folder if youre using knife on that node too
[2012-04-18 16:47:35 -0400] sagar_nikam: knife on the same node
[2012-04-18 16:48:19 -0400] jessicab: ah yea, then youll want both of those in .chef with your knife.rb
[2012-04-18 16:49:37 -0400] jessicab: after you put them in there, this might be a good place to pick up, since this will explain how to setup /etc/chef - http://wiki.opscode.com/display/chef/Fast+Start+Guide#FastStartGuide-Step5%3AConfiguretheworkstationasaclient
[2012-04-18 16:58:35 -0400] sagar_nikam: chef client install is complete
[2012-04-18 16:58:40 -0400] sagar_nikam: thanks all for the help
[2012-04-18 16:59:42 -0400] sagar_nikam: now i am going to download this cookbook
[2012-04-18 16:59:43 -0400] sagar_nikam: http://github.com/opscode-cookbooks/hadoop
[2012-04-18 17:00:20 -0400] sagar_nikam: and upload to hosted chef
[2012-04-18 17:00:57 -0400] sagar_nikam: this cookbook needs multiple nodes
[2012-04-18 17:01:09 -0400] sagar_nikam: so how do i create it
[2012-04-18 17:01:50 -0400] sagar_nikam: can i provide the IP address of the nodes on which i want to install hadoop somewhere
[2012-04-18 17:05:12 -0400] sagar_nikam: jessicab: how do i specify the nodes for hadoop
[2012-04-18 17:06:20 -0400] jessicab: sagar_nikam - ive never worked with hadoop specifically, but if you want to run the recipe on another node, youd want to install chef-client on that node and then add it to its run list
[2012-04-18 17:06:47 -0400] sagar_nikam: ok
[2012-04-18 17:18:17 -0400] jtran: using knife ec2 plugin or any other chef related tool, how do i spin up more than 1 instance (vm) ?
[2012-04-18 17:18:23 -0400] hoover_damn: sampikesley, too bold?
[2012-04-18 17:18:38 -0400] hoover_damn: sampikesley, although there's some hadoop cookbooks available
[2012-04-18 17:19:07 -0400] hoover_damn: sampikesley, https://github.com/infochimps-cookbooks if you haven't found em yet
[2012-04-18 17:24:53 -0400] paige: I keep having trouble with my chef clients just crappin out on occasion :/
[2012-04-18 17:24:59 -0400] paige: sometimes they dont start with ubuntu starts
[2012-04-18 17:25:08 -0400] paige: (referring to ubuntu client packages)
[2012-04-18 17:25:13 -0400] paige: even though there are init scripts
[2012-04-18 17:25:32 -0400] paige: any thoughts?
[2012-04-18 17:39:14 -0400] rgsteele: Does the json_attribs setting (http://wiki.opscode.com/display/chef/Chef+Configuration+Settings#ChefConfigurationSettings-jsonattribs) override *all* attributes?  Or just attributes that are defined in both json_attribs AND cookbooks/roles/etc?
[2012-04-18 17:51:15 -0400] jtimberman: jtran: the knife ec2 plugin only launches a single instance at a time.
[2012-04-18 17:51:33 -0400] jtimberman: jtran: launching multiples isn't supported by that plugin.
[2012-04-18 17:51:53 -0400] jtimberman: you'd have to write your own to accomplish that, or someone else might have
[2012-04-18 17:53:08 -0400] aslan: this is a new one : HTTP Request Returned 500 Internal Server Error: Net::HTTPServerException: 400 "orgapachelucenequeryParserParseException_Cannot_parse_run_listbackend_app__Encountered_____at_line_1_column_23_Was_expecting_one_of_____TO______RANGEIN_QUOTED______RANGEIN_GOOP______"
[2012-04-18 17:55:43 -0400] jtran: jtimberman, thanks
[2012-04-18 17:58:17 -0400] rgsteele: Actually... are there any examples of what the JSON-formatted file pointed to by json_attribs (in client.rb) should look like?  It's unclear as to whether it behaves like the -j flag to chef-client, which blows away any existing node config and overwrites it with the JSON file provided as the argument, or simply as a place in which you can define arbitrary attributes to be added to the...
[2012-04-18 17:58:19 -0400] rgsteele: ...node's current JSON config.
[2012-04-18 18:00:47 -0400] Artie: hey all, Im quite the noob at chef and librarian but I am having an issue running chef-librarian, when Im running chef-librarian 0.0.16 and Im getting the following error: /Users/apeshimam/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/pathname.rb:776:in `read': No such file or directory - /Users/apeshimam/chef-repo/tmp/librarian/cache/source/chef/site/877777683730772c36b1e6a3fc3aa2c3/application/metadata.json (Errno::ENOENT)
[2012-04-18 18:00:57 -0400] Artie: Not sure how to resolve this
[2012-04-18 18:02:00 -0400] yfeldblum: Artie, sorry! librarian-chef is unfortunately not 1.0 yet, so there are going to be bugs sometimes; please report any issues you find at https://github.com/applicationsonline/librarian/issues
[2012-04-18 18:02:30 -0400] Artie: no problem. thanks
[2012-04-18 18:09:34 -0400] cjs226: Any encountered "NoMethodError: undefined method `require_relative' for Aws:Module" when using the aws cookbook?
[2012-04-18 18:14:07 -0400] jtran: jtimberman, just curious but is it not common for end users to want to launch more than one instance ?
[2012-04-18 18:14:31 -0400] jtran: i'm kinda shocked that nobody else has a use for that type of feature
[2012-04-18 18:18:41 -0400] josephholsten: jtran: are you having trouble launching more than one instance?
[2012-04-18 18:19:54 -0400] pcn: jtran ironfan makes that easier
[2012-04-18 18:20:23 -0400] haakon_: paige: I've experienced the same, let me you know you find anything out, please
[2012-04-18 18:20:53 -0400] Blackavar: jtimberman, or any opscoders, or anyone using chef on windows - is there a build of the 0.10.10 available as an installer like the Full Installer?
[2012-04-18 18:21:51 -0400] Blackavar: Am dealing with devs that are on Win, and looks like they're needing some of the better file permission features from 0.10.10.
[2012-04-18 18:25:16 -0400] Blackavar: However, the installer is giving 0.10.8. Anything short of grabbing 0.10.10 from github?
[2012-04-18 18:27:21 -0400] hoover_damn: specify that on bootstrap
[2012-04-18 18:28:04 -0400] hoover_damn: Blackavar, generally you have to use --prerelease to install the prerelease gems.  If you want from master... you'll need a custom template (bootstrap template)
[2012-04-18 18:29:19 -0400] Blackavar: Excellent, gives a direction to dig.
[2012-04-18 18:30:27 -0400] jtran: josephholsten, it's just a little cumberson to write  a shell loop to launch multiple instances .  i'm used to the ec2ools being able to specify # of instances to create and was hoping knife had something like that
[2012-04-18 18:30:36 -0400] jtran: pcn: i'll check out ironfan.  thanks
[2012-04-18 18:32:12 -0400] pcn: jtran it has some other startup/setup costs, but it allows you to codify a launch in a file, and e.g. launch 5 at once without doing a loop, etc.
[2012-04-18 18:33:50 -0400] Blackavar: That should work, and thank you. Had dropped a bunch of devs into the Chef world for our hack day yesterday, and now I get to run into Win quibbles.
[2012-04-18 18:33:51 -0400] pcn: Also, cloudformation can do that if you're using aws, but it approaches it from a completely different angle
[2012-04-18 18:35:18 -0400] Victor: hello
[2012-04-18 18:38:36 -0400] yfeldblum: Artie, i released librarian-0.0.17 to rubygems.org (and commented on your github issue); is it still a problem?
[2012-04-18 18:39:04 -0400] gale_: Hi! all of a sudden I'm getting the following error while running the first chef run on a cloud server I've been rebuilding and playing with. Debian 6 if that makes a difference. Chef 0.10.8
[2012-04-18 18:39:08 -0400] gale_: INFO: Missing gem 'mysql'
[2012-04-18 18:39:11 -0400] gale_: INFO: Could not find previously defined grants.sql resource
[2012-04-18 18:39:22 -0400] gale_: Can anyone offer any clues
[2012-04-18 18:39:24 -0400] gale_: ?
[2012-04-18 18:39:54 -0400] Artie: I'll give it a go yfeldblum
[2012-04-18 18:41:33 -0400] Artie: sweet looks like it worked
[2012-04-18 18:41:36 -0400] Artie: I'll comment on github
[2012-04-18 18:43:34 -0400] newb: anyone wrote vagrant specific stuff for chef
[2012-04-18 18:44:08 -0400] newb: for example, expose a multi VM vagrant setup as a cloud?
[2012-04-18 18:45:49 -0400] pcn: newb I'm going to say ironfan again has some hooks for dealing with vagrant and a local chef server, but I haven't used it
[2012-04-18 18:46:42 -0400] newb: ironfan yes. I forgot if they had a "provides "cloud"" for vagrant
[2012-04-18 19:03:41 -0400] knuckolls: hey what is the attribute i can call to get the node name? it doesn't appear to be node[:name]
[2012-04-18 19:04:05 -0400] stearns: knuckolls: node.name ?
[2012-04-18 19:04:15 -0400] knuckolls: stearns: i'll try it!
[2012-04-18 19:05:14 -0400] knuckolls: stearns: that was it. thanks :D
[2012-04-18 19:17:50 -0400] jtimberman: Blackavar: Chef 0.10.10 is not released yet, so no full stack builds of it are available.
[2012-04-18 19:22:39 -0400] Artie: Another librarian question sorry probably a very noob question. Im getting the following error when I add my new cookbook. Seems to indicate that a property is missing from my cookbook, but not sure which prop and where it should be set ruby-1.9.3-rc1/gems/librarian-0.0.17/lib/librarian/dependency.rb:90:in `assert_name_valid!': name ("") must be sensible (ArgumentError)
[2012-04-18 19:24:54 -0400] yfeldblum: Artie, you've got a cookbook somewhere that depends on another cookbook but leaves the name blank?
[2012-04-18 19:28:00 -0400] Artie: ah ok I think  I see https://github.com/CXInc/chef-newrelic/blob/master/metadata.rb so on line 17 depends is an empty string. seems like that could be it
[2012-04-18 19:28:47 -0400] yfeldblum: Artie, librarian will absolutely complain about that line in the that cookbook
[2012-04-18 19:35:00 -0400] hoover_damn: hrm i seem to have made my own newrelic monitoring cookbook?
[2012-04-18 19:35:02 -0400] hoover_damn: weird
[2012-04-18 19:49:41 -0400] ashr_raiteri: Chef-RVM question:  I'm trying to get the Rails-Quick-Start tutorial working using Chef-RVM, do I add my RVM data vars into the radiant.json data bag?  Or do I create and include a separate data bag?  At the moment I'm only running role/base.rb in order to test out inclusion of rvm, so I don't think radiant.json is actually getting loaded.
[2012-04-18 19:50:34 -0400] ashr_raiteri: Artie, yfeldblum just pushed 0.17 so there may be some issues.  I got dependencies working fine, maybe gist your Cheffile?
[2012-04-18 19:51:52 -0400] jtimberman: ashr_raiteri: if you're following the quick start to learn chef and how that stuff works, i wouldn't use rvm at all and just run through the guide.
[2012-04-18 19:52:09 -0400] yfeldblum: ashr_raiteri, a cookbook that Artie depended on depends on another cookbook named "" (that's right, the blank string) ... librarian catches that intentionally and warns you about it instead of trying to find a cookbook with a blank name ... so, not a bug
[2012-04-18 19:52:25 -0400] ashr_raiteri: yfeldblum : good error checking.
[2012-04-18 19:52:50 -0400] yfeldblum: ashr_raiteri, requested by another user much like yourself :P
[2012-04-18 19:52:58 -0400] ashr_raiteri: jtimberman, I've done the quick start probably 10 times since last January.  I like to start there when doing something new so I have a 'control'
[2012-04-18 19:53:19 -0400] ashr_raiteri: So, I'm adding in the chef-rvm to see if I can get the tutorial working with ruby-1.9.3p0
[2012-04-18 19:53:41 -0400] ashr_raiteri: I just don't remember exactly how data bag inclusion works.
[2012-04-18 19:54:00 -0400] ashr_raiteri: Do I need to add a New data bag :  maybe base.json and drop my rvm variables in there?
[2012-04-18 19:54:10 -0400] ashr_raiteri: And if so, where should i include the data bag?
[2012-04-18 19:54:39 -0400] ashr_raiteri: I mean, where should I put
[2012-04-18 19:54:40 -0400] ashr_raiteri: data_bag("base")?  In a recipe?
[2012-04-18 19:55:44 -0400] jtimberman: ah ok :)
[2012-04-18 19:55:58 -0400] jtimberman: i don't have additional advice, i ahven't attempted that myself.
[2012-04-18 19:56:08 -0400] ashr_raiteri: Sorry for being dense, but I'm currently firehouse drinking many technologies that are new to me: Devise, Haml, CoffeeScipt, Guard, SpineJS, and yes, a REVISIT to Chef (chosen over Rubber)
[2012-04-18 19:56:25 -0400] ashr_raiteri: too bad fnichols isn't in the IRC
[2012-04-18 19:56:44 -0400] yfeldblum: ashr_raiteri, then, uh, my additional advice would probably be "take it one at a time" :P
[2012-04-18 19:56:47 -0400] ashr_raiteri: jtimberman, what would be the right approach to adding a random data bag to your deployment?
[2012-04-18 19:57:14 -0400] ashr_raiteri: yfeldblum, I'm pretty caught up and current on most of the App technologies, now I just need to get 'refreshed' on Chef.
[2012-04-18 19:57:24 -0400] ashr_raiteri: at least enough to generate a 1 touch deployment environment  :)
[2012-04-18 19:57:46 -0400] ashr_raiteri: oh shit.  Dick Clark died
[2012-04-18 19:58:06 -0400] ashr_raiteri: Ryan Seacrest will be a poor substitute at the TimesSquare New year's eve
[2012-04-18 19:58:29 -0400] Alex_R: hi, my chef server just died suddenly. CouchDB is fine, and if I restart it, the webapp and the chef-server stay up for some seconds before crashing again, without writing anything to the logs :(  I'd been using it for a couple of weeks without a problem, and haven't touched the config since I started it. Is there anything I can check?
[2012-04-18 20:05:37 -0400] newb_: Alex_R, how much ram?
[2012-04-18 20:05:54 -0400] newb_: Alex_R, how many nodes did it serve last?
[2012-04-18 20:09:10 -0400] Alex_R: newb_ thanks I think I just found the problem, ran out of space in the HDD. Definetly a resource issue, so that was super insightful! Thanks
[2012-04-18 20:15:29 -0400] ashr_raiteri: jtimberman ->  So it looks like I can just edit the attributes .  But the question is:  What's the preferred protocol here.?
[2012-04-18 20:16:08 -0400] ashr_raiteri: Do I edit the cookbook/rvm,/attributes/default.rb file?  Do I add attributes via a Role?  or do I add them directly to the Node?
[2012-04-18 20:18:56 -0400] yfeldblum: ashr_raiteri, what are you trying to accomplish?
[2012-04-18 20:19:02 -0400] ashr_raiteri: I went with adding the attributes to the Role, https://gist.github.com/2416268
[2012-04-18 20:19:12 -0400] ashr_raiteri: I'm just trying to baby step my way into using chef-rvm
[2012-04-18 20:19:21 -0400] ashr_raiteri: So I'm mucking with the Rails-Quick-Start
[2012-04-18 20:19:35 -0400] ashr_raiteri: I'm successfully launching base role
[2012-04-18 20:19:38 -0400] ashr_raiteri: on an ec2 instance.
[2012-04-18 20:19:51 -0400] ashr_raiteri: 11.10 Ubuntu
[2012-04-18 20:20:00 -0400] ashr_raiteri: now I want to see if I can get it to set a specific ruby version.
[2012-04-18 20:55:15 -0400] hoover_damn: want to make your life easier? stop using rvm. :-P
[2012-04-18 20:59:21 -0400] dwhsix: +1 (at least on chef-managed nodes)
[2012-04-18 21:09:43 -0400] vluther: w00t, just got my tickets for chefconf
[2012-04-18 21:10:34 -0400] jtimberman: :D
[2012-04-18 21:12:20 -0400] vluther: now to figure out how to get to california
[2012-04-18 21:18:50 -0400] UForgotten: heh
[2012-04-18 21:19:13 -0400] UForgotten: vluther: shouldn't you have gotten travel first?  What if it's too expensive?
[2012-04-18 21:19:35 -0400] UForgotten: I priced it earlier, would be about $2500 for the week for one person
[2012-04-18 21:19:51 -0400] UForgotten: with hotel/car/flight/conference/food/etc
[2012-04-18 21:20:00 -0400] UForgotten: depending on flight.
[2012-04-18 21:21:31 -0400] jtimberman: UForgotten: shouldn't need a car if you're staying at the conference hotel :)
[2012-04-18 21:21:39 -0400] jtimberman: its really close to the SFO airport.
[2012-04-18 21:22:10 -0400] UForgotten: jtimberman: only if you want to be stuck there
[2012-04-18 21:22:20 -0400] jtimberman: UForgotten: why would you want to go anywhere else!
[2012-04-18 21:22:29 -0400] UForgotten: jtimberman: food. sightseeing.
[2012-04-18 21:22:31 -0400] jtimberman: there's no time for tourism, all chef, all the time :D
[2012-04-18 21:33:00 -0400] c_t: at least you can get to BART fairly easily from that hotel
[2012-04-18 21:33:11 -0400] c_t: unlike, say, the convention facilities in Santa Clara
[2012-04-18 21:33:17 -0400] c_t: conveniently located near nothing.
[2012-04-18 21:41:34 -0400] ashr_raiteri: hoover_damn  What's my other option to get a 11.10 Ubuntu with Ruby 1.9.3  ?
[2012-04-18 21:44:02 -0400] jtimberman: ashr_raiteri: you can build the package and stick it on a PPA
[2012-04-18 21:44:11 -0400] ashr_raiteri: THought you'd say that.
[2012-04-18 21:44:14 -0400] ashr_raiteri: Well that's option 2
[2012-04-18 21:44:22 -0400] ashr_raiteri: And I think I'll get to that before Launch
[2012-04-18 21:44:29 -0400] ashr_raiteri: but just trying to see if I can get something working for now
[2012-04-18 21:44:58 -0400] jtimberman: ashr_raiteri: this might be helpful: http://jtimberman.housepub.org/blog/2011/04/02/debian-ubuntu-package-for-ruby-1-9-2-with-fpm/
[2012-04-18 21:46:10 -0400] jtimberman: the next ubuntu release, 12.04 (precise) ships 1.9.3-p0 for the ruby1.9.1 package.
[2012-04-18 21:55:58 -0400] aslan: jtimberman: i am having a strange problem
[2012-04-18 21:56:20 -0400] aslan: about 120 servers (same type) have successfully run chef client
[2012-04-18 21:56:34 -0400] aslan: but somehow i only see about half of them when i run knife status
[2012-04-18 21:56:55 -0400] aslan: node list also shows about 60
[2012-04-18 21:57:20 -0400] aslan: looks like they did run chef-client and did register. but somehow on the server side something didn't work right.
[2012-04-18 21:57:29 -0400] aslan: either solr or something else? any idea?
[2012-04-18 21:58:48 -0400] rshade98: what is the best away to append a file with a template?
[2012-04-18 22:00:22 -0400] vluther_: UForgotten: i got o SF 3-4 times a year anyway, no need for sight seeing, plus if i need to go into SFO proper i'm not driving
[2012-04-18 22:00:50 -0400] bemu_: Driving in SF is not really that bad, except for a few hours per day (rush hours) and sports games.
[2012-04-18 22:01:04 -0400] vluther_: driving is easy, parking is not
[2012-04-18 22:01:05 -0400] vluther_: :)
[2012-04-18 22:01:15 -0400] vluther_: i drove in new delhi and India. SF drivers are nice
[2012-04-18 22:01:22 -0400] vluther_: err nyc
[2012-04-18 22:01:52 -0400] vluther_: plus you have good trains/buses
[2012-04-18 22:02:05 -0400] bemu_: No, parking is easy, just not cheap. ;)
[2012-04-18 22:02:18 -0400] vluther_: i do the bart from SF to mountain view, it's nice and clean and stress free
[2012-04-18 22:02:27 -0400] vluther_: expensive != easy :)
[2012-04-18 22:02:43 -0400] bemu_: I take the BART almost every day, the Caltrain isn't bad either. The muni and buses are super slow though.
[2012-04-18 22:03:11 -0400] vluther_: either way, i figured if people decide to go into the city one day we can all split a cab, or uber or something
[2012-04-18 22:03:12 -0400] bemu_: I'm going to schedule an SF DevOps meetup for hacking on cookbooks just prior to ChefConf, any input on date/time?
[2012-04-18 22:03:39 -0400] hoover_damn: ashr_raiteri, use my ppa?
[2012-04-18 22:04:02 -0400] bemu_: Just left. :P
[2012-04-18 22:04:05 -0400] hoover_damn: yep
[2012-04-18 22:04:10 -0400] hoover_damn: too bad... https://launchpad.net/~scott-likens/+archive/ppa
[2012-04-18 22:04:22 -0400] hoover_damn: it's 1.9.3p125 for ubuntu oneric with gem update --system
[2012-04-18 22:04:24 -0400] hoover_damn: still enabled
[2012-04-18 22:04:28 -0400] hoover_damn: and the other lame debian patches removed
[2012-04-18 22:04:37 -0400] bemu_: I can vouch for ^
[2012-04-18 22:04:38 -0400] newb_: I am facing 'NoMethodError: undefined method `on_off_to_bool' for 1:Fixnum ' when I try 'chef:recipe > tracing 1' in shef
[2012-04-18 22:04:51 -0400] jtimberman: bemu_: a couple folks were interested in a hack day monday night. miah perhaps?
[2012-04-18 22:04:57 -0400] bemu_: We use it on 300+ servers currently, no problems at all.
[2012-04-18 22:05:29 -0400] vluther_: bemu  i get into SF at 5:18pm on monday, so after that ? :)
[2012-04-18 22:05:45 -0400] bemu_: Sounds good!
[2012-04-18 22:06:07 -0400] newb_: woops, 'chef:recipe > tracing on '
[2012-04-18 22:06:44 -0400] jtimberman: I arrive at 2:04pm.
[2012-04-18 22:06:49 -0400] jtimberman: I'd be interested in that :).
[2012-04-18 22:07:38 -0400] bemu_: Okay, we'll probably do it 7 or 8pm, First and Folsom.
[2012-04-18 22:07:54 -0400] bemu_: I'll get specifics and post/tweet/link here.
[2012-04-18 22:08:08 -0400] chip-: I'd do a hack night
[2012-04-18 22:08:21 -0400] bemu_: I intend on working on the haproxy cookbook :D
[2012-04-18 22:09:55 -0400] bemu_: Oh wow, it looks like we my have a functional graphite/statsd setup.
[2012-04-18 22:10:13 -0400] bemu_: That took a lot of time/work.
[2012-04-18 22:10:29 -0400] jtimberman: bemu_: First and Folsom? That's not near the hotel :D
[2012-04-18 22:10:38 -0400] bemu_: Nah, it's in SF.
[2012-04-18 22:11:16 -0400] bemu_: I might be able to help out with some transport though.
[2012-04-18 22:11:49 -0400] jtimberman: :D
[2012-04-18 22:12:14 -0400] jtimberman: will let you know
[2012-04-18 22:12:14 -0400] bemu_: We have an awesome office/venue for this kind of thing, and most of the people who come to these things won't if it's further south.
[2012-04-18 22:12:33 -0400] bemu_: Though we could more easily get more of the ChefConf crowd.
[2012-04-18 22:12:35 -0400] bemu_: Hmmm.
[2012-04-18 22:13:27 -0400] aslan: jtimberman: i am having a strange problem about 120 servers (same type) have successfully run chef client but somehow i only see about half of them when i run knife status node list also shows about 60. looks like they did run chef-client and did register. but somehow on the server side something didn't work right. either solr or something else? any idea?
[2012-04-18 22:13:44 -0400] jtimberman: aslan: running your own server or hosted chef?
[2012-04-18 22:13:59 -0400] aslan: jtimberman: my own server
[2012-04-18 22:14:22 -0400] jtimberman: aslan: anything in the solr/expander logs?
[2012-04-18 22:14:29 -0400] jtimberman: or rabbitmq
[2012-04-18 22:14:32 -0400] jtimberman: are they all running?
[2012-04-18 22:14:49 -0400] aslan: they are all running. i restarted solr and indexer
[2012-04-18 22:14:58 -0400] aslan: and the merb processes
[2012-04-18 22:17:37 -0400] aslan: jtimberman: i am getting a lot of these in solr logs:  fieldValueCache{lookups=0,hits=0,hitratio=0.00,inserts=0,evictions=0,size=0,warmupTime=0,cumulative_lookups=0,cumulative_hits=0,cumulative_hitratio=0.00,cumulative_inserts=0,
[2012-04-18 22:17:37 -0400] aslan: cumulative_evictions=0}
[2012-04-18 22:18:55 -0400] aslan: jtimberman: i see this a lot in solr-indexer 2012-04-18_22:14:13.19804 [Wed, 18 Apr 2012 15:10:16 -0700] FATAL: POST to Solr 'http://localhost:8983' failed.  Chef::Exceptions::SolrConnectionError exception: Timeout::Error: execution expired attempting to contact http://localhost:8983
[2012-04-18 22:20:07 -0400] jtimberman: aslan: sounds like solr isn't up
[2012-04-18 22:20:16 -0400] aslan: but its up
[2012-04-18 22:21:54 -0400] bemu_: You mean it's running.
[2012-04-18 22:22:16 -0400] bemu_: But is it functional?
[2012-04-18 22:23:45 -0400] aslan: bemu_: i have a nagios health check for solr and its showing the process is healthy
[2012-04-18 22:23:56 -0400] aslan: i can see java is taking over 90% of CPU
[2012-04-18 22:24:07 -0400] bemu_: I could write a nagios health check that told you the moon is made of cheese, would you believe it? :)
[2012-04-18 22:24:27 -0400] bemu_: Try googling: troubleshoot solr
[2012-04-18 22:24:54 -0400] bemu_: I personally have no interest in maintaining a solr cluster which is not core to my business, so I use opscode platform.
[2012-04-18 22:24:58 -0400] bemu_: You should too :D
[2012-04-18 22:26:53 -0400] newb_: 'chef > roles.all' get me list of all roles on the chef server, but 'cookbooks.all'  => [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]  ! This is when using shef in cient mode
[2012-04-18 22:27:48 -0400] jtimberman: newb_: yeah.
[2012-04-18 22:27:55 -0400] jtimberman: newb_: its not direct
[2012-04-18 22:28:19 -0400] jtimberman: newb_: there was a mailing list post about that a few months ago, i think you have to use api.get
[2012-04-18 22:38:51 -0400] newb_: thanks @jtimberman, I used 'chef > api.get_rest("/cookbooks")' instead, but although I can see the recipe I am trying to load doing a 'chef:recipe > include_recipe "cloud_utils::virtualbox_metadata"' fails with 'Chef::Exceptions::CookbookNotFound: Cookbook cloud_utils not found. If you're loading cloud_utils from another cookbook, make sure you configure the dependency in your metadata '
[2012-04-18 22:42:59 -0400] bemu_: newb_: Did you do what it asked?
[2012-04-18 22:43:11 -0400] bemu_: You need to set cloud_utils as a dependency in the cookbook.
[2012-04-18 22:43:27 -0400] bemu_: metadata.rb: depends "cloud_utils"
[2012-04-18 22:43:30 -0400] bemu_: I think is the syntax.
[2012-04-18 22:44:28 -0400] aslan: bemu_: i did checkout the nagios alert its basically a request to the solr server which seems to be working fine
[2012-04-18 22:44:58 -0400] bemu_: But you just posted a log showing that it's not working fine.
[2012-04-18 22:45:25 -0400] bemu_: So dig in. Figure out how to troubleshoot solr.
[2012-04-18 22:45:52 -0400] newb_: +bemu_, oh, the Cookbook cloud_utils is not in the runlist of the node I am running shef on, nor loaded by any cookbooks. I wanted to see how running that recipe on that node would be like. an't we load random Cookbooks that are not loaded already?
[2012-04-18 22:45:58 -0400] bemu_: I can't give you the answers, but I can show you a fishing pond: google.com :)
[2012-04-18 22:47:14 -0400] bemu_: newb_: If you're trying to include_recipe, you need it to either be in the depends of metadata, or in the run_list.
[2012-04-18 22:48:02 -0400] newb_: hmm, could I add a cookbook to the run_list of a node *from* within a shef session and do a reset/reload?
[2012-04-18 22:48:47 -0400] bemu_: I don't know.
[2012-04-18 22:49:24 -0400] bemu_: aslan: Are you sure your manual/nagios tests are connecting using the same hostname (localhost)?
[2012-04-18 22:49:53 -0400] bemu_: Here's a mailing list post: http://comments.gmane.org/gmane.comp.sysutils.chef.user/2009
[2012-04-18 22:50:33 -0400] aslan: bemu_: looks like once in a while solr times out. And usually on post. never on get which the nagios check is based on
[2012-04-18 22:51:22 -0400] knuckolls: whenever i set the log_level to :debug in /etc/chef/client.rb it gets reset to info. does anyone know how to make a node spit out debug level information?
[2012-04-18 22:51:33 -0400] knuckolls: this is when running chef-client as a daemon
[2012-04-18 22:51:44 -0400] aslan: bemu_: i am going to add some swap and increase the memory. I hope that fixes it
[2012-04-18 22:54:35 -0400] newb_: A GET to /roles/ROLE returns the JSON representation of the role. I expected 'chef > api.get_rest("/roles/nodeRole")' to return json, but it shows 'role[nodeRole]' shef. How do I see the response body as in http://wiki.opscode.com/pages/viewpage.action?pageId=7274927#ChefServerRESTAPI-%2Froles%2FROLE
[2012-04-18 23:09:14 -0400] timsmith: are there any web ruby lint apps
[2012-04-18 23:09:17 -0400] timsmith: to handle formatting
[2012-04-18 23:09:17 -0400] timsmith: ?
[2012-04-18 23:09:58 -0400] mikeg: remote_file was changed so it pulls files from remote locations instead of from the cookbook.  was remote_directory also changed?  or is there a way to use remote_file to pull down a directory?
[2012-04-18 23:53:15 -0400] newb_: how do I check out the overridden values in a node role from chef?
[2012-04-18 23:53:25 -0400] newb_: s/chef/shef/
[2012-04-18 23:54:14 -0400] TheBeast: how do I assign a recipe to a role via knife?
[2012-04-18 23:56:44 -0400] timsmith: knife role edit XYZ

[2012-04-30 00:14:50 -0400] hoover_damn: sadly no
[2012-04-30 00:14:56 -0400] hoover_damn: when in doubt, mailing list
[2012-04-30 04:35:31 -0400] daaaan: do you guys specify versions for every package to be installed? i'm looking at our cookbooks and no versions are specified which (among other reasons) would speed our runs up if they were specified
[2012-04-30 04:35:52 -0400] daaaan: *among other benefits
[2012-04-30 04:39:06 -0400] flaccid: i don't unless needed
[2012-04-30 05:23:53 -0400] akraut: Anyone have any ideas why the rabbitmq on my chef server would be driving the load average above 22?
[2012-04-30 05:26:00 -0400] BryanWB: ohai chefs!
[2012-04-30 06:00:36 -0400] BryanWB: git rebase makes my head hurt
[2012-04-30 06:49:33 -0400] ssd7: heya
[2012-04-30 07:29:26 -0400] BryanWB: ssd7: looking forward to meeting u at chefconf
[2012-04-30 07:44:48 -0400] yatesy: arg is it me or does knife ec2 create m1.small instances regardless of what flavor i specify with -f ?!!
[2012-04-30 07:46:23 -0400] yatesy: ah, figured out why. If you have knife[:flavor] specified in knife.rb it ignores whatever you pass in with -f
[2012-04-30 07:46:46 -0400] yatesy: i would have assumed that'd be the default value but you could override in command line if specified
[2012-04-30 09:30:22 -0400] zts: BryanWB: 'git rebase' is awesome once you've got your head around it, but I remember it being painful and fearsome until I did
[2012-04-30 10:55:53 -0400] kaz___: Hello everyone, I'm trying to avoid reinventing the wheel, but I've got a problem where I'd like to influence what files remote_directory purge will remove.
[2012-04-30 10:56:03 -0400] masterkorp: Do you and a reference doc of the repices syntax ?
[2012-04-30 10:56:14 -0400] kaz___: I thought about having a custom provider
[2012-04-30 10:56:45 -0400] kaz___: However interms of flexability, it would be nice to be able to pass a lamda or something into a provider instance.
[2012-04-30 10:56:53 -0400] kaz___: Sort of similar to how ruby Struct works.
[2012-04-30 10:57:18 -0400] kaz___: Where the new method on the Struct instances, creates a new instance.
[2012-04-30 10:58:43 -0400] laurent\: "influence what files remote_directory purge will remove" ? how would that work ?
[2012-04-30 10:58:54 -0400] laurent\: you'd pass a list of files to remove ?
[2012-04-30 10:59:19 -0400] kaz___: Well, rather a lambda ie: purge_all.
[2012-04-30 10:59:38 -0400] kaz___: everything that returned true would be a canidate for purging
[2012-04-30 10:59:50 -0400] laurent\: it's already the default, purge all files that don't exist in the cookbook
[2012-04-30 10:59:56 -0400] BryanWB: kaz___: ooh, that would be way kewl
[2012-04-30 11:00:14 -0400] kaz___: the problem I've got is that I'm deploying a series of files, but unfortunately the system using those files clutters the fs with it's own temp files
[2012-04-30 11:00:24 -0400] kaz___: I'd really like to ignore those tmp files.
[2012-04-30 11:02:11 -0400] kaz___: An example: http://pastebin.com/0vyxZ38p
[2012-04-30 11:03:57 -0400] RJ2: knife and chef-client are suddenly all unauthorized, as if my keys are invalid (i have two nodes, one of which is the chef server)
[2012-04-30 11:04:15 -0400] RJ2: i've not changed certs/keys, and i specify node name in the client.rb on both machines
[2012-04-30 11:04:20 -0400] RJ2: what else could cause that?
[2012-04-30 11:04:31 -0400] laurent\: you might as well want to add an ignore attribute you'd use with file patterns
[2012-04-30 11:04:53 -0400] RJ2: ( i specify like: node_name "foo.example.com" )
[2012-04-30 11:05:40 -0400] kaz___: laurent\:  Yeah, I could extend the resource interface.  However, I kind of wanted to keep my changes to a minimal.
[2012-04-30 11:06:08 -0400] kaz___: However, if other think this would be a worthwhile feature to clutter the remote_directory resource with, I'd be happy to add it.
[2012-04-30 11:08:53 -0400] laurent\: hmm so in this example you want the tmp files to be removed ?
[2012-04-30 11:09:20 -0400] laurent\: or the opposite ? (to be ignored because they might be in use)
[2012-04-30 11:14:21 -0400] kaz___: Whoops, your right -- the paste is backwards. http://pastebin.com/FXuLUrhC
[2012-04-30 11:14:37 -0400] kaz___: If the purge_all returns true, then those files would be removed.
[2012-04-30 11:14:50 -0400] kaz___: For my usecase, I'd want it to ignore the tmp files
[2012-04-30 11:20:16 -0400] laurent\: ok :)
[2012-04-30 11:21:21 -0400] kaz___: Actually, I could do something similar by just creating a mixin
[2012-04-30 11:31:43 -0400] zts: RJ2: clock skew is another thing to check
[2012-04-30 11:31:51 -0400] zts: s/skew/drift/
[2012-04-30 11:32:01 -0400] RJ2: zts: could that cause auth to fail?
[2012-04-30 11:32:32 -0400] zts: RJ2: yeah, if server and client are further than <something> apart, auth will fail
[2012-04-30 11:32:38 -0400] RJ2: times are in sync anyway, both running ntp, just checked
[2012-04-30 11:32:41 -0400] RJ2: good to know tho
[2012-04-30 11:33:42 -0400] RJ2: look like the run lists and node configs vanished too, as if perhaps couchdb was wiped or something, no idea what happened :|
[2012-04-30 11:33:55 -0400] RJ2: i'm recreating the validation key etc and will set up the nodes again
[2012-04-30 11:35:52 -0400] zts: I've not been bitten, but I've heard mutterings about couchdb package upgrades setting aside the existing DB
[2012-04-30 12:13:17 -0400] masterkorp: How do i get the platafform architecture
[2012-04-30 12:13:21 -0400] masterkorp: ?
[2012-04-30 12:15:04 -0400] BryanWB: masterkorp:  node['kernel']['machine']
[2012-04-30 12:15:46 -0400] masterkorp: BryanWB: thanks
[2012-04-30 13:46:20 -0400] CharlieSu: Hi.  I've got multiple versions of cookbooks on my chef server but I haven't been properly tagging some changes in my local Git repo, and I'd like to get back to a version of a cookbook that I don't have locally without rummaging through tons of git logs.  Is there an easy way to extract a particular version of a cookbook from my Chef Server?
[2012-04-30 13:46:43 -0400] CharlieSu: And does anyone have a good strategy for version control of cookbooks?
[2012-04-30 13:48:08 -0400] mattray: CharlieSu: knife cookbook download java 1.5.0
[2012-04-30 13:48:17 -0400] mattray: you can download a tarball of the version on the chef server
[2012-04-30 13:49:13 -0400] mattray: CharlieSu: lots of version control strategies. Many people freeze the version in production and tag it as well
[2012-04-30 13:49:32 -0400] mattray: let QA mess around until you move it into PreProd
[2012-04-30 13:49:41 -0400] mattray: then tag it
[2012-04-30 13:50:00 -0400] mattray: (assuming you're using environments)
[2012-04-30 14:00:37 -0400] sivy: mornin
[2012-04-30 14:19:58 -0400] miketheman: hey, @opscode: will there be any serious resources devoted to freebsd any time in the near future? Especially regressions?
[2012-04-30 14:21:02 -0400] afallows: If I start a process with an execute block, what would cause that process to die as soon as my chef-client run finishes? I'm doing the invocation iwth nohup and &.
[2012-04-30 14:21:57 -0400] flashmanbahadur: may need to disown the process somehow
[2012-04-30 14:22:09 -0400] afallows: Disown?
[2012-04-30 14:22:11 -0400] flashmanbahadur: not sure how the execute block works
[2012-04-30 14:22:20 -0400] flashmanbahadur: it may be different from a standard shell connection
[2012-04-30 14:23:17 -0400] erikh: it's a child process of chef
[2012-04-30 14:23:25 -0400] erikh: well, chef-client.
[2012-04-30 14:23:32 -0400] afallows: Probably is, but I would have expected nohup to account for that and spawn it as a process owned by the user but -not- tied to the current process.
[2012-04-30 14:24:05 -0400] flashmanbahadur: what kind of process is it afallows
[2012-04-30 14:24:14 -0400] flashmanbahadur: not something you can use cron for?
[2012-04-30 14:24:28 -0400] flashmanbahadur: for long running procs I use supervisord personally
[2012-04-30 14:25:09 -0400] afallows: It's an intance of rainbows, a ruby gem and HTTP server. I want start/restart it with chef because the recipe also checks for changes to the config and associated rack app.
[2012-04-30 14:25:35 -0400] flashmanbahadur: fair enough, I have some similar setups
[2012-04-30 14:25:40 -0400] flashmanbahadur: I have chef template the configs
[2012-04-30 14:25:51 -0400] flashmanbahadur: and run a notify for a supervisor reread and update
[2012-04-30 14:26:04 -0400] dyer: Hey, anyone know any Chef's in the Atlanta area looking for work ? We are looking to bring on another devops team member  ( https://gist.github.com/2557939 )
[2012-04-30 14:26:28 -0400] afallows: I can probably move it from an execute resource to a ruby_block to see if starting it with %x[] makes it independent of chef-client.
[2012-04-30 14:26:50 -0400] flashmanbahadur: might work, dont have a ton of experience with it
[2012-04-30 14:27:01 -0400] CharlieSu: mattray: thanks bud!
[2012-04-30 14:28:21 -0400] raz: hi
[2012-04-30 14:28:27 -0400] raz: how do i run a recipe on the server instead of the node?
[2012-04-30 14:29:08 -0400] raz: i'd like to fix the route53 recipe which seems to rely on fetching aws credentials from a databag and running the route53 client on the nodes (a no-go on multiple levels)
[2012-04-30 14:31:13 -0400] nacer: raz: you can run chef-client on your server too
[2012-04-30 14:31:55 -0400] nacer: raz: you can have one instance how run the route53 stuff
[2012-04-30 14:32:11 -0400] raz: nacer: yes. the question is how to have part of the recipes/cookbooks run on the server. i.e. dns-names and such should be defined in the nodes, but the actual commands should execute on the server.
[2012-04-30 14:33:08 -0400] raz: i.e. critically the updates should happen in lockstep with the node updates
[2012-04-30 14:33:10 -0400] nacer: raz: modify  the recipe for running on the serveur with some search magic
[2012-04-30 14:33:37 -0400] raz: hm. that seems wrong.
[2012-04-30 14:33:49 -0400] raz: then it would be detached from the actual node updates?
[2012-04-30 14:33:51 -0400] nacer: raz: i am more talking about a instance how manage the route53 stuff
[2012-04-30 14:34:04 -0400] afallows: raz: Are you saying that you'd like to have one recipe which does some things on the node and some things on the server? I don't think chef is built for that.
[2012-04-30 14:34:51 -0400] nacer: raz: your problem is that you don't want your AWS credential on a lot of server right ?
[2012-04-30 14:35:28 -0400] raz: nacer: yep
[2012-04-30 14:35:57 -0400] nacer: raz: so make the recipe to run on one server
[2012-04-30 14:37:52 -0400] afallows: I don't know much about route53, but would it be possible for the recipe that runs on the node to pass a command to the server via ssh or some other tool, and have that tool be invoked by your recipe?
[2012-04-30 14:38:23 -0400] flashmanbahadur: dyer: this line from your job posting is priceless "Git - If you fork and merge your grocery list then you might be our guy :)"
[2012-04-30 14:39:06 -0400] eherot: flashmanbahadur: ooh, that's a good idea.  Too bad I don't have a good git client for my phone ;-)
[2012-04-30 14:39:29 -0400] geekbri: I prefer a rebasing pull, it makes my grocery list history a bit cleaner
[2012-04-30 14:39:59 -0400] afallows: I push my grocery list without a pull.
[2012-04-30 14:40:16 -0400] geekbri: oof.
[2012-04-30 14:40:21 -0400] geekbri: with -f ??
[2012-04-30 14:40:29 -0400] afallows: Always.
[2012-04-30 14:40:46 -0400] geekbri: youre dangerous!
[2012-04-30 14:40:50 -0400] geekbri: but you can be my wingman anytime.
[2012-04-30 14:40:56 -0400] flashmanbahadur: rofl
[2012-04-30 14:41:36 -0400] dyer: flashmanbahadur - :)
[2012-04-30 14:59:10 -0400] afallows: flashmanbahadur: So when I relocated my nohup rainbows & invocation to a ruby_block, it started correctly and is still running on the node, but it hung the chef-client run, and I had to kill it manually, which is obviously not an acceptable scenario.
[2012-04-30 14:59:28 -0400] flashmanbahadur: i see
[2012-04-30 15:00:01 -0400] afallows: I probably need to make an init script or similar for it.
[2012-04-30 15:00:19 -0400] flashmanbahadur: probably
[2012-04-30 15:00:28 -0400] flashmanbahadur: there are several options for managing long running procs
[2012-04-30 15:00:34 -0400] flashmanbahadur: chef isnt really meant to do that
[2012-04-30 15:01:13 -0400] afallows: Yeah, and I don't really want to manage it except to make sure it's running/restart it if there are changes.
[2012-04-30 15:01:57 -0400] flashmanbahadur: chef is great at notifying some service after templating a file
[2012-04-30 15:02:02 -0400] masterkorp: Any doc on  dpkg_package blog ?
[2012-04-30 15:02:04 -0400] flashmanbahadur: just not managing the running/restart itself
[2012-04-30 15:02:10 -0400] masterkorp: *block
[2012-04-30 15:02:34 -0400] flashmanbahadur: check Resources -> Package it should have some sub sections
[2012-04-30 15:02:37 -0400] flashmanbahadur: masterkorp:
[2012-04-30 15:02:53 -0400] raz: hmm, how do i write a ruby script that runs in the 'knife' environment (like shef)?
[2012-04-30 15:02:59 -0400] raz: i.e. to run searches in it etc.
[2012-04-30 15:03:06 -0400] knuckolls: raz: a knife plugin?
[2012-04-30 15:03:15 -0400] mattray: raz: knife exec?
[2012-04-30 15:03:34 -0400] raz: knuckolls: ahh, that might work
[2012-04-30 15:03:45 -0400] mattray: http://wiki.opscode.com/display/chef/Knife+Exec
[2012-04-30 15:03:46 -0400] masterkorp: flashmanbahadur: thank you
[2012-04-30 15:03:47 -0400] raz: mattray: a full fledged scripts, no one-liners
[2012-04-30 15:03:53 -0400] masterkorp: its hard to search this wiki
[2012-04-30 15:04:03 -0400] mattray: from the wiki: "The knife exec subcommand allows you to write Ruby scripts that are executed in the context of a fully configured Chef API Client using the knife configuration file."
[2012-04-30 15:04:14 -0400] raz: ah, now i see it
[2012-04-30 15:04:24 -0400] knuckolls: what i want to know is how to send notification hooks when someone runs a knife command.
[2012-04-30 15:04:42 -0400] knuckolls: so the irc room gets a notification that "suzie uploaded a new cookbook version"
[2012-04-30 15:06:26 -0400] masterkorp: flashmanbahadur: can you give me a link to that ?
[2012-04-30 15:07:19 -0400] afallows: knuckolls: A braindead way would be to write a wrapper script locally that takes the same arguments as knife, passes them through to knife and then handles the notification.
[2012-04-30 15:07:31 -0400] knuckolls: yeah
[2012-04-30 15:07:43 -0400] flashmanbahadur: masterkorp: I was wrong it seems, its mentioned there but not explained
[2012-04-30 15:08:04 -0400] knuckolls: afallows: spork basically does that as a knife plugin for the operations it supports
[2012-04-30 15:08:19 -0400] masterkorp: At least can you give me the link here its meantined
[2012-04-30 15:08:21 -0400] masterkorp: ?
[2012-04-30 15:08:27 -0400] masterkorp: i am seing it by examples
[2012-04-30 15:08:27 -0400] knuckolls: afallows: but a wrapper is a simpler solution most certainly
[2012-04-30 15:08:38 -0400] knuckolls: afallows: i was hoping to just be able to add something to my knife.rb
[2012-04-30 15:08:43 -0400] knuckolls: afallows: like a callback or something...
[2012-04-30 15:08:48 -0400] flashmanbahadur: masterkorp: http://wiki.opscode.com/display/chef/Resources#Resources-Package
[2012-04-30 15:08:54 -0400] flashmanbahadur: i will post a gist with my usage of it
[2012-04-30 15:09:22 -0400] masterkorp: http://wiki.opscode.com/display/chef/Yum+Package+Resource
[2012-04-30 15:09:53 -0400] afallows: knuckolls: I'd love to learn if something like that is possible, so let me know if you find anything.
[2012-04-30 15:10:02 -0400] knuckolls: afallows: deal ;)
[2012-04-30 15:10:22 -0400] flashmanbahadur: masterkorp: https://gist.github.com/2559107
[2012-04-30 15:11:47 -0400] masterkorp: yeah that's all i have, just asking for insight from other users
[2012-04-30 15:11:49 -0400] masterkorp: thanks
[2012-04-30 15:13:13 -0400] flashmanbahadur: masterkorp: the full pattern I use is similar to the one from the docs using http_request to check the "If-Modified-Since" header then triggering a download if necessary which triggers a dpkg install
[2012-04-30 15:13:25 -0400] flashmanbahadur: which then triggers a service restart
[2012-04-30 15:19:44 -0400] masterkorp: thanks, and some docs on how to provide sucess feedback from a script ? I have a runit service that i want to check its on
[2012-04-30 16:13:08 -0400] Brad_K: Noah: No, we have no updated the bootstrap for something release 4 days ago :-)
[2012-04-30 16:13:11 -0400] Brad_K: Funny guy!
[2012-04-30 16:53:21 -0400] timsmith: Is there a way to check to see if a cookbook file exists?
[2012-04-30 16:57:32 -0400] yfeldblum: timsmith, cookbooks should usually be written to know which cookbook files exist ...
[2012-04-30 16:57:33 -0400] hoover_damn: timsmith, as in a not_if?
[2012-04-30 16:57:47 -0400] hoover_damn: timsmith, are you using the 'creates' syntax?
[2012-04-30 16:58:22 -0400] hoover_damn: also :create_if_missing is a great option
[2012-04-30 16:58:23 -0400] hoover_damn: as well
[2012-04-30 16:58:36 -0400] hoover_damn: likely the best method if that's the behavior you want
[2012-04-30 16:59:27 -0400] timsmith: hoover_damn:  I have a bit of code that copies an SSL cert using the environment as part of the name.  Only certain environments have the file and I'd love to stop the noise of errors when it can't find the file and bombs
[2012-04-30 17:00:14 -0400] hoover_damn: timsmith, only_if { File.exists?("path/to/file") }
[2012-04-30 17:00:45 -0400] hoover_damn: timsmith, you likely should ship the file in chef and then use :create_if_missing
[2012-04-30 17:00:50 -0400] timsmith: hoover_damn:  I'm not concerned about the file not existing on the system.  I'm concerned about the file not existing in my cookbook
[2012-04-30 17:00:51 -0400] hoover_damn: so you can avoid the whole bomb
[2012-04-30 17:01:05 -0400] hoover_damn: timsmith, okay so I wasn't having a brainfart
[2012-04-30 17:01:19 -0400] hoover_damn: timsmith, I read that and thought you were copying the ssl certs to the system and then had chef install them... hense the suggestion
[2012-04-30 17:01:35 -0400] hoover_damn: timsmith, where are you storing your ssl certs? data bags? cookbook_file?
[2012-04-30 17:02:42 -0400] timsmith: cookbook file
[2012-04-30 17:02:53 -0400] timsmith: which is bad.  Legacy stuff
[2012-04-30 17:03:28 -0400] hoover_damn: timsmith, shrug
[2012-04-30 17:03:48 -0400] hoover_damn: timsmith, but basically if you ignore adding the file to the cookbook you need to epic_fail true to allow the resource to fail... which you might not like
[2012-04-30 17:04:00 -0400] timsmith: hoover_damn:  It might be time to just fix the real problem which is storing these site ssl certs in a cookbook
[2012-04-30 17:04:05 -0400] hoover_damn: timsmith, you can also use only_if { File.exists? to check of the existance in the cache
[2012-04-30 17:04:24 -0400] hoover_damn: but that will really piss you off when someone forgets to upload a cert
[2012-04-30 17:04:27 -0400] timsmith: hoover_damn: I have the epic fail, but there's still a large exception, which confuses people on my team
[2012-04-30 17:04:30 -0400] hoover_damn: and you find that is the reason why 'x' cert isn't getting there
[2012-04-30 17:05:06 -0400] timsmith: hoover_damn: Are the cache paths consistent so I could check for the existence of the file
[2012-04-30 17:05:08 -0400] hoover_damn: yeah a blind rescue is much less gorey then epic_fail
[2012-04-30 17:05:58 -0400] hoover_damn: timsmith, heh not_if { File.exists?("#{Chef::Config[:file_cache_path]}/cookbooks/bob/files/default/somefile") }
[2012-04-30 17:06:24 -0400] timsmith: hoover_damn: That'll probably do what I need
[2012-04-30 17:06:30 -0400] hoover_damn: timsmith, problem is when someone forgets to upload a certificate and your not getting it because of this not_if... it'll be very hard to figure out
[2012-04-30 17:06:40 -0400] hoover_damn: and it will generate a fit of anger likely
[2012-04-30 17:07:00 -0400] hoover_damn: I say that because I've seen coworkers do it over a simple not_if like that.
[2012-04-30 17:07:29 -0400] hoover_damn: the real question I have is why are you allowing epic_fail true?
[2012-04-30 17:07:44 -0400] hoover_damn: perhaps it'll get lost fast but it's my thought
[2012-04-30 17:08:25 -0400] timsmith: I might try a rescue and have it print an info
[2012-04-30 17:09:35 -0400] timsmith: hoover_damn:  Thanks for the help.  That'll get me on the right track
[2012-04-30 17:11:12 -0400] flashmanbahadur: if I have chef running as a service is there a recommended way to have it email failures back to me?
[2012-04-30 17:13:18 -0400] hoover_damn: timsmith, ruby_block to check if the file exists, and throw a log if it doesn't...
[2012-04-30 17:13:30 -0400] hoover_damn: timsmith, then do a only_if if that file exists in the local cache
[2012-04-30 17:13:34 -0400] hoover_damn: timsmith, then you notify if it's missing
[2012-04-30 17:13:44 -0400] hoover_damn: but continue
[2012-04-30 17:27:59 -0400] echiu: is there a simple recipe for running bash commands?
[2012-04-30 17:28:07 -0400] flashmanbahadur: echiu:
[2012-04-30 17:28:10 -0400] flashmanbahadur: use the command block
[2012-04-30 17:28:12 -0400] flashmanbahadur: err
[2012-04-30 17:28:13 -0400] flashmanbahadur: execute
[2012-04-30 17:28:20 -0400] flashmanbahadur: execute "my bash command" do
[2012-04-30 17:28:29 -0400] flashmanbahadur: command "ls -l /"
[2012-04-30 17:28:35 -0400] flashmanbahadur: end
[2012-04-30 17:30:39 -0400] echiu: what's a good way to unit test a receipt w/o sudo chef-client
[2012-04-30 17:36:58 -0400] miketheman: so nobody uses freebsd w/chef, I guess.
[2012-04-30 17:37:52 -0400] geekbri: you can use a bash block as well.
[2012-04-30 17:38:11 -0400] geekbri: bash "name it something here" do ......   end
[2012-04-30 17:38:36 -0400] nphase: are there any plans on updating https://github.com/opscode/knife-rackspace to use fog 1.3?
[2012-04-30 17:39:00 -0400] afallows: geekbri: Is the bash resource any different from the execute resource in cases where the default shell of the node is bash?
[2012-04-30 17:40:11 -0400] nphase: mattray: ^
[2012-04-30 17:40:33 -0400] Brad_K: miketheman: andrea campi uses chef on freebsd, and has contributed a considerable amount of work back to chef to improve the synergy between them.
[2012-04-30 17:40:49 -0400] Brad_K: but i don't personally know of anyone other than andrea that does use freebsd with chef.
[2012-04-30 17:41:47 -0400] miketheman: Brad_K: I ask, as it looks like a regression creeped back in: http://tickets.opscode.com/browse/CHEF-3056
[2012-04-30 17:41:48 -0400] geekbri: afallows:  Now... you will want to fact check this but I believe the execute resource executes the code inline, where as the bash resource creates a temporary file that it then executes.
[2012-04-30 17:42:40 -0400] afallows: geekbri: Interesting if true.
[2012-04-30 17:42:46 -0400] geekbri: I'm not 100% on that though so I would certainly double check the information.  Other than that I suppose there may not be much of a difference between the two.  It is a bit more clear for anybody reading your code if you use a bash block for things you expect to be run always through bash :)
[2012-04-30 17:42:59 -0400] Brad_K: nphase: i'm sure that integrating an updated version of fog is planned, but i'm sure there's lots of other work planned, too.  the question would be what are the priorities and what is the planned timetable.
[2012-04-30 17:43:45 -0400] Brad_K: miketheman: if andrea isn't already working on that, i'm sure he will be soon.  but this would be a conversation that would be best to have with him directly.
[2012-04-30 17:43:53 -0400] geekbri: afallows: http://wiki.opscode.com/display/chef/Resources#Resources-Script
[2012-04-30 17:44:00 -0400] nphase: Brad_K: it seems that knife actually prefers lower versions where multipl eplugins are involved. I have knife-rackspace, knife-joyent and knife-ec2, and since -rackspace wants 0.8.2, joyent wont run at all because its only in the 1.3 version.
[2012-04-30 17:44:07 -0400] nphase: Brad_K: significantly problematic
[2012-04-30 17:45:06 -0400] nphase: Brad_K: so in the meantime I guess i need to switch back and forth with rbenv..
[2012-04-30 17:45:32 -0400] nphase: Brad_K: one ruby/gem version with just knife-joyent, one ruby version with knife-rackspace
[2012-04-30 17:45:57 -0400] Brad_K: nphase: i've sometimes had problems with different versions of the fog libraries, too.  not with multiple different knife plugins, but i understand that pain.
[2012-04-30 17:46:12 -0400] Brad_K: nphase: i wish there was something i could do to help.  ;-(
[2012-04-30 17:46:26 -0400] nphase: Brad_K: are there significant known regressions to moving up from 0.8 to 1.3?
[2012-04-30 17:47:01 -0400] nphase: (fog)
[2012-04-30 17:47:40 -0400] Brad_K: nphase: i tried moving to more recent versions of the fog library and hacking knife-rackspace to not explicitly require such an old version, but the results were pretty ugly.  the knife-rackspace plugin will actually have to be fixed to bring it up-to-date, and that's beyond my skills.
[2012-04-30 17:47:54 -0400] nphase: gotcha
[2012-04-30 17:47:54 -0400] nphase: ok
[2012-04-30 17:47:56 -0400] nphase: thanks for the info
[2012-04-30 17:48:07 -0400] Brad_K: wish i could be of more help.  ;-(
[2012-04-30 17:48:20 -0400] nphase: that definitely explains why its so behind, i get it
[2012-04-30 17:49:22 -0400] Brad_K: yeah, it's not just a matter of changing the "requires" definition.  ;-(
[2012-04-30 17:50:18 -0400] Brad_K: maybe we can cajole mattray, or jtimberman, or one of those other guys with their hands deep in the code to actually fix it properly.
[2012-04-30 17:51:07 -0400] nphase: beer?
[2012-04-30 17:51:08 -0400] bawt: beer is http://en.wikipedia.org/wiki/Beer or delicious. and good for you.
[2012-04-30 17:51:09 -0400] nphase: i can send beer.
[2012-04-30 17:51:11 -0400] Brad_K: of course, now that rackspace is going to be replacing their current infrastructure with openstack, maybe the view is that the old knife-rackspace plugin doesn't need to get fixed, since it's going to go away anyway.
[2012-04-30 17:51:22 -0400] nphase: oh, right
[2012-04-30 17:51:26 -0400] nphase: eventually
[2012-04-30 17:51:35 -0400] geekbri: bawt: depends on the beer!
[2012-04-30 17:51:45 -0400] geekbri: damnit, did i just talk to a bot
[2012-04-30 17:52:08 -0400] Brad_K: geekbri: i was going to ask if you realized just exactly who you were talking to.  ;-)
[2012-04-30 17:52:33 -0400] geekbri: pobodies nerfect
[2012-04-30 17:53:48 -0400] Brad_K: hmm.  i wonder if pobodies eat noboys?
[2012-04-30 18:15:09 -0400] hoover_damn: so how's rackspace doing today?
[2012-04-30 18:15:15 -0400] hoover_damn: they back up yet?
[2012-04-30 18:15:53 -0400] geekbri: how long have they been down?
[2012-04-30 18:15:57 -0400] hoover_damn: nphase, i use a modified version of fog
[2012-04-30 18:16:04 -0400] hoover_damn: err knife-rackspace with a current fog
[2012-04-30 18:16:11 -0400] hoover_damn: nphase, i've had 0 issues but it doesn't really add anything
[2012-04-30 18:16:26 -0400] hoover_damn: geekbri, just a problem provisioning the ubuntu 11.10 ami
[2012-04-30 18:16:51 -0400] hoover_damn: geekbri, I spent about 45 minutes trying to spinup an instance this morning to only have a 45 minute talk with rackspace support and a ticket open
[2012-04-30 18:17:24 -0400] hoover_damn: geekbri, i've been noticing in the past several days that rackspace server create ... doesn't come up right, sometimes the instances are 'built' but sshd is broken
[2012-04-30 18:17:55 -0400] hoover_damn: well this morning I was greated to 3 server creates failing (tried twice, did it 4x for rackspace support)
[2012-04-30 18:18:16 -0400] hoover_damn: and then opened a ticket with them as I was unable to boot a 11.10 image that worked
[2012-04-30 18:18:46 -0400] hoover_damn: using the stock image and all
[2012-04-30 18:18:49 -0400] hoover_damn: so *shrug*
[2012-04-30 18:18:54 -0400] hoover_damn: just a bad way to wakeup
[2012-04-30 18:31:50 -0400] AntonZ: hello
[2012-04-30 18:45:22 -0400] yfeldblum: http://status.rackspacecloud.com/cloudservers/2012/04/cloud-services-orddfw-control-panel-api-degraded.html ?
[2012-04-30 18:46:02 -0400] hcastro: btm: thanks for being thorough -- it didn't occur to me that 5.4 wouldn't have that flag
[2012-04-30 18:55:05 -0400] patcon: hey all! i don't suppose someone could refresh me on how to modify a pre-defined resource in the resource collection from a later recipe?
[2012-04-30 18:55:53 -0400] geekbri: patcon: depends what you want to do to modify the resource.  If you never need to notify the resource you could create a definition over it.  If it involves more than that you may have to extend it.
[2012-04-30 18:55:53 -0400] jhopp: is anyone using minitest-chef-handler? i'm confused on how to detect a failing test. it seems chef-client returns zero even if the minitest report handler detects a failed test.
[2012-04-30 18:57:42 -0400] miah: you can use other handlers as well, so use another handler to report to nagios, campfire or whatevs
[2012-04-30 18:58:45 -0400] patcon: geekbri: actually, was looking to --say-- modify "php_pear[apc]" to change the directives without overriding the whole module_apc recipe :)
[2012-04-30 18:59:35 -0400] patcon: i was in here awhile ago, and someone told me how to override a resource, but i wasn't keeping logs at the time
[2012-04-30 19:01:15 -0400] Brad_K: patcon: there are logs kept of this irc channel on the opscode website.  ;-)
[2012-04-30 19:01:35 -0400] patcon: nice! thanks Brad_K!
[2012-04-30 19:01:41 -0400] patcon: totally forgot
[2012-04-30 19:02:55 -0400] Brad_K: see https://wiki.opscode.com/display/chef/IRC
[2012-04-30 19:03:53 -0400] geekbri: nitfy.
[2012-04-30 19:03:56 -0400] geekbri: nifty
[2012-04-30 19:04:20 -0400] Brad_K: geekbri: don't remind me of how old i'm getting.
[2012-04-30 19:04:33 -0400] geekbri: by using words like nifty? :)
[2012-04-30 19:05:51 -0400] patcon: if my heuristics are sound, guys named brad are never older than 25 :)
[2012-04-30 19:06:09 -0400] geekbri: so do they either all die early or change their names?
[2012-04-30 19:06:29 -0400] Brad_K: i'm not dead yet!
[2012-04-30 19:06:37 -0400] Brad_K: i'm feeling better!
[2012-04-30 19:07:09 -0400] Brad_K: ow!  did you use a coconut-laden sparrow?
[2012-04-30 19:07:37 -0400] c_t: my dad's name is Brad...
[2012-04-30 19:07:44 -0400] geekbri: Brad_K: african or european?
[2012-04-30 19:07:54 -0400] patcon: haha
[2012-04-30 19:08:15 -0400] Brad_K: i don't know that!
[2012-04-30 19:08:56 -0400] btm: hcastro: we were just worry about that stuff because we have a surprising number of RHEL5 users.
[2012-04-30 19:10:20 -0400] Brad_K: message for you, sir!
[2012-04-30 19:21:28 -0400] Brad_K: so, when is the mcollective cookbook being updated to work with the current version?  i mean, it's been less than five minutes since @ripienaar tweeted the announcement of the release!  ;-)
[2012-04-30 19:22:45 -0400] patcon: woo! ok, so my "how do i hook in and alter resources in the resource collection" question had been answered by yfeldblum earlier this month! just found it. thanks again yfeldblum!
[2012-04-30 19:22:46 -0400] patcon: 15:07 <yfeldblum> patcon, `package("asdf") ; resources(:package => "asdf").instance_exec{version "3.4.5" ; action :nothing}`
[2012-04-30 19:27:11 -0400] geekbri: patcon: mind linking me to your CB after you've actually used it so I can see the pattern ? :)
[2012-04-30 19:27:50 -0400] patcon: sure deals geekbri
[2012-04-30 19:30:34 -0400] geekbri: patcon: t
[2012-04-30 19:30:37 -0400] geekbri: patcon: ty
[2012-04-30 19:36:18 -0400] hoover_damn: yfeldblum, doesn't look the same
[2012-04-30 19:40:44 -0400] hoover_damn: yfeldblum, from my own experience in ord1 sometimes you can get unexpected failures
[2012-04-30 19:41:22 -0400] hoover_damn: it's annoying when you get them
[2012-04-30 19:41:37 -0400] hoover_damn: as an ec2 user I figure that rackspace would schedule around the failures
[2012-04-30 19:41:52 -0400] hoover_damn: so that the end-user is not wasting time dealing with build issues
[2012-04-30 19:42:56 -0400] rh1n0: Anything changed recently in chef that would cause 'NameError: uninitialized constant Chef::Recipe::Opscode' when running the postgresql::server recipe?
[2012-04-30 19:43:15 -0400] rh1n0: just checking for a general chef change or similar
[2012-04-30 19:56:51 -0400] pcn: Hey.  Anyone know where this cloudformation ohai plugin they mention in their docs is?
[2012-04-30 19:56:55 -0400] pcn: That is, in the CF docs?
[2012-04-30 19:57:05 -0400] patcon: geekbri: ok, so it didn't work for my circumstances, but the idea is that if you don't want to fork a community cookbook completely, but just want to change a version of something, you can use this to alter it: `resources( :resourcetype => "resourcename").instance_exec { version "1.2.3"; action :nothing }`
[2012-04-30 19:57:56 -0400] geekbri: patcon: I'm not sure I understand the pattern being used.
[2012-04-30 19:59:15 -0400] patcon: it's the you're adding another recipe into the run_list after the community one, and overriding or changing some value instead of forking the repo or overriding the whole recipe in your site-cookbooks dir. is that what you meant?
[2012-04-30 19:59:36 -0400] geekbri: patcon: ah ok, I think i see now.  Where would you add your change though.  inside of instance_exec ?
[2012-04-30 20:00:19 -0400] patcon: yep :) so if, say... the community version didn't specify a pear package version, and you wanted to nail it to a specific one, you could add the version
[2012-04-30 20:01:10 -0400] patcon: that's my understanding, although I realized it didn't apply for what I was doing. I'll probably try it later, but haven't seen it work yet. i might be misunderstanding
[2012-04-30 20:01:26 -0400] geekbri: patcon: Yeah, I followed what was being done with instance_exec, I just couldn't piece it all together
[2012-04-30 20:01:40 -0400] geekbri: thanks for straightening that out for me.
[2012-04-30 20:55:47 -0400] spyvsspy: how often do you guys run the chef client?
[2012-04-30 20:55:53 -0400] chmac: I'm starting out with configuration management, and considering chef standalone to automate the task of building new servers with a  consistent config. Is it easy to get started with building a single server? Any recommended resources?
[2012-04-30 20:56:07 -0400] spyvsspy: what gets to be "too much" when you have 1000 servers to manage?
[2012-04-30 21:06:24 -0400] jnh: Hi all.
[2012-04-30 21:06:32 -0400] chmac: Can I get started building a single server (apache, php, mysql, user accounts, ssh keys, etc, etc) in an afternoon with chef?
[2012-04-30 21:07:22 -0400] z: chmac: yes and if you follow the Fast Start Guide and use the Community Cookbooks you'll probably be done in an afternoon too
[2012-04-30 21:07:31 -0400] yfeldblum: spyvsspy, it's possible to scale the chef-server-api to any number of chef-clients running at any frequency, via the normal techniques for scaling web apps & backend services (currently: rabbitmq, couchdb, solr, and a clustered filesystem of your choice)
[2012-04-30 21:07:47 -0400] mattray: chmac: http://wiki.opscode.com/display/chef/Fast+Start+Guide
[2012-04-30 21:08:12 -0400] mattray: chmac: at the end of that you'll be ready to jump into the Rails, PHP, Django or Java Quick Starts
[2012-04-30 21:09:03 -0400] mattray: spyvsspy: default is 30 minutes with the chef-client cookbook, that's not much load on the server with 1000 nodes
[2012-04-30 21:09:18 -0400] spyvsspy: ya, I wanted to push it up though to maybe 2-3 minutes
[2012-04-30 21:09:27 -0400] mattray: you may want a beefier box
[2012-04-30 21:09:45 -0400] spyvsspy: I have a decent r710 w/ 32 GB ram
[2012-04-30 21:10:38 -0400] mattray: spyvsspy: try it, that's about 6 or 7 connections/sec
[2012-04-30 21:11:03 -0400] mattray: probably be OK
[2012-04-30 21:11:06 -0400] jnh: I've just upgraded my chef from 0.10.0 to 0.10.8 and now deploy_revision is deploying an empty directory (with the correct hash)
[2012-04-30 21:11:15 -0400] jnh: Is theres something I need to know?
[2012-04-30 21:12:03 -0400] mattray: spyvsspy: I'd say get some good monitoring on the box and start ramping up the load
[2012-04-30 21:12:51 -0400] mattray: I know I've heard of > 10K on a single box, so tuning may play into it
[2012-04-30 21:13:17 -0400] mattray: but I doubt they were going every 2-3 minutes
[2012-04-30 21:22:16 -0400] Brad_K: spyvsspy: imo, chef is not well-suited to work in an environment where you need stuff to be happening in real-time or near real-time.  on a node that isn't doing a whole lot and where everything runs quickly, you might get a complete chef run that doesn't actually need to take any action to happen in something like 30 seconds.  but i've also seen chef runs that take 30-45 minutes to complete, if not more (Zenoss, I'm looking at you).
[2012-04-30 21:23:39 -0400] Brad_K: spyvsspy: if you're just cranking down the intervals just because you can, that's one thing.  but if you really need those tighter timeframes, i'd look at what else might need to change or might need to be done a different way, so that you're not just running the clock 10-100x times faster.  for example, try switching to an event-driven model using orchestration tools like zookeeper or noah.
[2012-04-30 21:24:00 -0400] Brad_K: work smarter, not harder.
[2012-04-30 21:37:19 -0400] werdnativ: how does the application cookbook work for a nginx-unicorn setup? do I need separate configurations for the nginx cookbook and then application[unicorn] ?
[2012-04-30 21:38:24 -0400] werdnativ: also, rails. I see there's a application[rails] recipe too how do these play together?
[2012-04-30 21:42:38 -0400] jnh: Interestingly, there is no /var/chef/cache/revision-deploys on this machine either.
[2012-04-30 21:46:34 -0400] jnh: ahh. found it. for some reason it's configured for /srv/chef
[2012-04-30 21:53:08 -0400] spyvsspy: brad_k, I dont know if instant comms are important
[2012-04-30 21:54:10 -0400] spyvsspy: the main problem, is that the machines sometimes lose net comms, so I dont know if event driven is the way to go
[2012-04-30 22:08:41 -0400] mattray: spyvsspy: you can use both
[2012-04-30 22:09:18 -0400] mattray: set the chef-client up as a daemon to run periodically, but use knife ssh to push changes when you need them immediately
[2012-04-30 22:10:14 -0400] Brad_K: mattray: does noah (or zookeeper) use knife ssh to push their orchestration data?
[2012-04-30 22:10:35 -0400] Brad_K: i never found out how they communicate with their nodes....
[2012-04-30 22:10:55 -0400] mattray: I don't think so
[2012-04-30 22:12:08 -0400] mattray: Brad_K: redis? http://lusislog.blogspot.com/2011/05/on-noah-part-4.html
[2012-04-30 22:18:01 -0400] Brad_K: that's a pretty cool page.  i had assumed it was a simple http-based mechanism, but that's clearly got a lot more thought baked into it.
[2012-04-30 22:18:40 -0400] Brad_K: but building skynet?  i worked there years ago.  it wasn't anything special.  ;-)
[2012-04-30 22:23:11 -0400] Brad_K: besides, Parrot AR drones are so last year.  i want hummingbird drones (see http://www.wired.com/dangerroom/2011/02/video-hummingbird-drone-can-perform-loops/) bearing lasers strong enough to burn through things (see http://www.digitaljournal.com/article/323843 ).  sure, the hummingbird drones have been around for a while, but the ones i know of can't carry much payload.
[2012-04-30 22:23:23 -0400] sivy: anyone ever had the python_virtualenv resource fail silently?
[2012-04-30 22:23:45 -0400] sivy: it acts like it's working, no errors, but the virtualenv is not created
[2012-04-30 22:25:34 -0400] flashmanbahadur:  try -l debug?
[2012-04-30 22:30:38 -0400] sivy: flashmanbahadur: it is! :-) https://gist.github.com/356924774938de1297fe
[2012-04-30 22:33:27 -0400] coderanger: sivy: Make sure you have the latest python cookbook
[2012-04-30 22:34:57 -0400] sivy: coderanger: I'll look
[2012-04-30 22:35:17 -0400] sivy: coderanger: is there a difference in particular I should be looking for?
[2012-04-30 22:35:53 -0400] coderanger: There were a bunch of changes when pip removed the -E option
[2012-04-30 22:37:46 -0400] sivy: ok, i've got 1.0.4
[2012-04-30 22:38:16 -0400] sivy: not sure when that changed (don't want to update needlessly this is a client's chef repo)
[2012-04-30 22:38:55 -0400] sivy: ah, yeah it's changed sonce then
[2012-04-30 22:38:58 -0400] sivy: hm
[2012-04-30 23:01:10 -0400] javajosh: https://github.com/opscode/cookbooks
[2012-04-30 23:01:56 -0400] javajosh: hello everyone. I've installed a gentoo linode instance and would like to configure it for a simple LAMP stack with chef. I'm rather new to gentoo and chef, and was wondering if y'all have any tips for me. Also, Linode has a feature called "StackScripts" and someone wrote one to install chef-solo on gentoo, clone some recipes via git, and then run something based on a json file. I'm just not experienced enough to feed it the right
[2012-04-30 23:01:56 -0400] javajosh: parameters. http://www.linode.com/stackscripts/view/?StackScriptID=4576
[2012-04-30 23:03:34 -0400] javajosh: I was hoping I could just feed it the opscode recipe git url (https://github.com/opscode/cookbooks) and ...something for the json file. Any tips would be helpful!
[2012-04-30 23:25:12 -0400] Brad_K: javajosh: the Chef "Fast Start" guide is at http://wiki.opscode.com/display/chef/Fast+Start+Guide
[2012-04-30 23:25:53 -0400] Brad_K: once you get that working with Hosted Chef, it will be easier for you move on to how you can install your own open-source chef server that you can use.
[2012-04-30 23:26:06 -0400] javajosh: Brad_K: thanks, reading
[2012-04-30 23:29:46 -0400] Brad_K: bbiab
[2012-04-30 23:33:19 -0400] javajosh: what does bbiab mean?
[2012-04-30 23:33:32 -0400] ezmobius: be back in a bit
[2012-04-30 23:33:37 -0400] javajosh: ah
[2012-04-30 23:38:43 -0400] hoover_damn: he speaks
[2012-04-30 23:42:24 -0400] Brad_K: http://www.muller-godschalk.com/acronyms.html
[2012-04-30 23:43:25 -0400] Brad_K: that's the short "500 top acronyms" list.  there are other much larger lists, which even i can't be bothered to slog through.
[2012-04-30 23:45:37 -0400] Brad_K: but the list at http://www.acronymslist.com/cat/sms-chat-and-text-acronyms.html is at least chopped up into smaller, more bite-size pieces.

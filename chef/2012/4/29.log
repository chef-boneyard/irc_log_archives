[2012-04-29 00:02:53 -0400] miah: ow
[2012-04-29 00:03:17 -0400] miah: which quest where you playing?
[2012-04-29 00:25:31 -0400] coderanger: miah: No idea, human knight is awesome though
[2012-04-29 00:38:56 -0400] hoover_damn: i'm lazy so just tossing some onions in em and throwing em on the grill
[2012-04-29 00:45:18 -0400] jtimberman: I'm so lazy I opened a can of soup, poured it in a couple bowls and served it like that :)
[2012-04-29 00:48:41 -0400] coderanger: How can control what version of Chef Vagrant installs?
[2012-04-29 00:48:58 -0400] coderanger: Is that baked in to the image?
[2012-04-29 00:50:28 -0400] coderanger: Yeah, looks like I need a new box
[2012-04-29 00:53:22 -0400] jtimberman: yeah, you do that in the box creation
[2012-04-29 00:53:48 -0400] coderanger: Going to try our http://opscode-vagrant-boxes.s3.amazonaws.com/ubuntu10.04-gems.box
[2012-04-29 00:53:58 -0400] jtimberman: coderanger: schisamo was talking about there's some way you could do that as a pre-provision step in a plugin. i didn't go so far as to find out how to do that.
[2012-04-29 00:54:01 -0400] coderanger: if not I guess I break out veewee
[2012-04-29 00:54:13 -0400] coderanger: Yeah, I was kind of assuming that was how vagrant handled it
[2012-04-29 00:54:18 -0400] coderanger: Seems saner :)
[2012-04-29 00:54:52 -0400] jtimberman: https://github.com/opscode/basebox
[2012-04-29 01:01:01 -0400] yfeldblum: coderanger, you can do that directly in a shell provisioning script
[2012-04-29 01:01:12 -0400] coderanger: yfeldblum: Hmm?
[2012-04-29 01:01:38 -0400] yfeldblum: coderanger, you can have multiple provisioners - for example, you can have a shell provisioner and a chef-client provisioner
[2012-04-29 01:02:14 -0400] coderanger: So you are saying use a shell provisioner to upgrade chef?
[2012-04-29 01:03:11 -0400] yfeldblum: coderanger, exactly, that's one option; you can actually install the specific version you want (not just the latest version) in the shell provisioner
[2012-04-29 01:05:55 -0400] coderanger: Is this shell provisioner documented anywhere?
[2012-04-29 01:06:59 -0400] coderanger: Ahh, docs vs getting starder
[2012-04-29 01:07:01 -0400] coderanger: derp
[2012-04-29 01:38:23 -0400] spheromak:  /win3
[2012-04-29 02:06:43 -0400] coderanger: jtimberman: Yeah, we definitely changed something in >=0.10.4 that makes node available in resource files
[2012-04-29 02:08:06 -0400] jtimberman: coderanger: ohhh... i've seen that too, trying to set resource attribute defaults to something from the node.
[2012-04-29 02:08:19 -0400] coderanger: Yeah
[2012-04-29 02:08:30 -0400] doki_pen: I'm getting very bad performance on "Storing updated .... "
[2012-04-29 02:08:34 -0400] coderanger: We should figure out what version specifically made the change
[2012-04-29 02:08:43 -0400] coderanger: so we can state it as the minimum req on these cookbooks
[2012-04-29 02:09:12 -0400] doki_pen: i thought I fixed this before by adding more merbs and load balancing them
[2012-04-29 02:09:26 -0400] doki_pen: the chef server is fine on memory, but load is high
[2012-04-29 02:09:34 -0400] doki_pen: between the merbs and couchdb
[2012-04-29 02:09:57 -0400] doki_pen: load isn't crazy. 5.39
[2012-04-29 02:10:20 -0400] doki_pen: i tried transfering files between the server and client and it appears there isn't a network issue
[2012-04-29 02:10:51 -0400] doki_pen: I think 8 merbs should be enough, so I'm worried its couch
[2012-04-29 02:10:57 -0400] doki_pen: anyway to tune it?
[2012-04-29 02:11:12 -0400] doki_pen: connections... memory...
[2012-04-29 02:12:20 -0400] doki_pen: another problem is after all the storing updated ... blah to cache is finished, it errors with missing files
[2012-04-29 02:12:53 -0400] doki_pen: df
[2012-04-29 02:14:33 -0400] doki_pen: seems like something is blocking
[2012-04-29 02:14:43 -0400] doki_pen: it will download about 10, then stall for a few seconds
[2012-04-29 02:37:18 -0400] cwj: i am somewhat new to using librarian and bundler, is it considered ok to .gitignore their lock files?
[2012-04-29 02:37:38 -0400] coderanger: No
[2012-04-29 02:37:51 -0400] coderanger: They aren't run time lock files, they are version locks
[2012-04-29 02:38:39 -0400] coderanger: If you put a version spec like >=1.0 in the gemfile, the lock records which actual version it was at the time so the next person to bundle install gets that instead of the latest
[2012-04-29 02:39:04 -0400] cwj: ok so without the lock files its cowboy mode
[2012-04-29 02:39:48 -0400] cwj: the next person to bundle install gets whatever resolves the explicit specs and not necessarily all the same versions the last person had
[2012-04-29 02:40:55 -0400] JFray: I'm trying to figure out what I'm doing wrong trying to wire up a vagrant instance to hosted chef - would this be the right channel to ask?
[2012-04-29 02:42:08 -0400] cwj: JFray: sure
[2012-04-29 02:42:09 -0400] coderanger: cwj: Right, which is generally a bug :)
[2012-04-29 02:42:22 -0400] coderanger: cwj: See also, the results of action :install on package resources :-)
[2012-04-29 02:42:29 -0400] coderanger: JFray: Surely
[2012-04-29 02:42:58 -0400] JFray: Cool :) Specifically, I'm getting a 401 when provisioning. I'm using the same validator and keys as my other deployments, which are working fine.
[2012-04-29 02:43:17 -0400] JFray: I can't seem to figure out, even when stracing or logging debug what is actually failing
[2012-04-29 02:43:32 -0400] jtimberman: JFray: time synchronization issue?
[2012-04-29 02:43:38 -0400] jtimberman: the 401 message should say what the problem is.
[2012-04-29 02:43:54 -0400] JFray: [Sun, 29 Apr 2012 02:33:23 +0000] INFO: HTTP Request Returned 401 Unauthorized: Failed to authenticate as threefold-validator. Ensure that your node_name and client key are correct.
[2012-04-29 02:43:57 -0400] JFray: [Sun, 29 Apr 2012 02:33:23 +0000] FATAL: Stacktrace dumped to /srv/chef/file_store/chef-stacktrace.out
[2012-04-29 02:44:00 -0400] JFray: [Sun, 29 Apr 2012 02:33:23 +0000] FATAL: Net::HTTPServerException: 401 "Unauthorized"
[2012-04-29 02:44:19 -0400] JFray: @jtimberman: ntpd is running and the clocks are synched
[2012-04-29 02:44:34 -0400] JFray: I have the same time on my working instances and the vagrant host/guest
[2012-04-29 02:44:44 -0400] jtimberman: JFray: chef.validation_key_path and chef.validation_client_name  in your vagranfile?
[2012-04-29 02:45:23 -0400] jtimberman: I wrote about the vagrantfile i use for testing things, http://jtimberman.housepub.org/blog/2012/03/18/multivm-vagrantfile-for-chef/ - in there it uses the knife configuration values for those.
[2012-04-29 02:45:38 -0400] JFray: chef.validation_key_path = "#{home_dir}/.secure/opscode/threefold-validator.pem"
[2012-04-29 02:45:48 -0400] JFray: chef.validation_client_name = "threefold-validator"
[2012-04-29 02:46:03 -0400] JFray: where home_dir is Etc.getpwuid.dir
[2012-04-29 02:48:10 -0400] yfeldblum: cwj, my recommended practice is: with ruby libraries & redistributable applications (or chef cookbooks), gitignore the lockfile but be very careful with the specfile; with ruby applications (or chef infrastructure repos), gitcommit the lockfile alongside the specfile
[2012-04-29 02:48:50 -0400] yfeldblum: cwj, so if you're in a chef repo, follow coderanger's advice
[2012-04-29 02:49:24 -0400] cwj: ok, thanks jay
[2012-04-29 02:50:11 -0400] yfeldblum: jtimberman, not a fan of permitting resources & providers to have access to the node directly; any data the resources & providers get should be from two sources: setting attributes on the resource & #load_current_resource in the provider
[2012-04-29 02:50:53 -0400] coderanger: yfeldblum: It is far too useful, for better or worse
[2012-04-29 02:51:06 -0400] coderanger: For example setting the default number of gunicorn workers based on RAM
[2012-04-29 02:51:31 -0400] coderanger: Or the default rails/django env based on node.chef_env
[2012-04-29 02:51:59 -0400] coderanger: The whole point of the app cookbook is sane defaults, for better or worse some of those need node data
[2012-04-29 02:52:17 -0400] JFray: @jtimberman: I've also md5summed the certs to make sure the working instances and my vagrant instance are using the same file
[2012-04-29 02:52:35 -0400] yfeldblum: coderanger, it makes providers hard to test in isolation, i.e., without a node
[2012-04-29 02:52:57 -0400] yfeldblum: coderanger, at the very least, only resources can access it (e.g. for setting defaults), but not providers ...
[2012-04-29 02:53:45 -0400] coderanger: yfeldblum: I agree with the sentiment, but the practical benefits are too great and Chef is a framework for people that want enough rope to hang themselves :)
[2012-04-29 02:55:25 -0400] coderanger: The same reason the node object is available to templates directly too
[2012-04-29 02:55:32 -0400] coderanger: (even though you shouldn't use it)
[2012-04-29 02:57:13 -0400] yfeldblum: coderanger, i agree with the sentiment, but specific types of constraints, those which enforce key separations of concerns, can have much larger (if harder to see) practical benefits
[2012-04-29 02:57:54 -0400] yfeldblum: coderanger, i'm ok with the node being available in the template files; i don't think the outsized benefits of strict separation there come until the project is large (same way with rails apps)
[2012-04-29 02:59:04 -0400] yfeldblum: coderanger, speaking of templates, getting template partials in would have a lot of benefit
[2012-04-29 02:59:51 -0400] coderanger: yfeldblum: Lib functions are available in templates, make a cookbook ;-)
[2012-04-29 03:01:47 -0400] yfeldblum: coderanger, heh ... just saying, it's something i hear people asking about a lot in #chef
[2012-04-29 03:02:07 -0400] coderanger: Sure, no objection to that, just much more likely if someone writes a patch
[2012-04-29 03:02:12 -0400] JFray: @jtimberman: am I doing something totally wrong? I've configured my Vagrantfile to look like the documented examples and verified that the resulting client.rb looks similar to the client.rb on my working instances
[2012-04-29 03:05:40 -0400] jtimberman: JFray: does the node have a client.pem already?
[2012-04-29 03:08:07 -0400] JFray: @jtimberman: It does not. The log states that the file is not found and that it is trying to register.
[2012-04-29 03:08:10 -0400] JFray: [Sun, 29 Apr 2012 03:07:54 +0000] INFO: Client key /etc/chef/client.pem is not present - registering
[2012-04-29 03:08:27 -0400] JFray: [Sun, 29 Apr 2012 03:07:55 +0000] INFO: HTTP Request Returned 401 Unauthorized: Failed to authenticate as threefold-validator. Ensure that your node_name and client key are correct.
[2012-04-29 03:08:30 -0400] JFray: [Sun, 29 Apr 2012 03:07:55 +0000] FATAL: Stacktrace dumped to /srv/chef/file_store/chef-stacktrace.out
[2012-04-29 03:08:33 -0400] JFray: [Sun, 29 Apr 2012 03:07:55 +0000] FATAL: Net::HTTPServerException: 401 "Unauthorized"
[2012-04-29 03:11:09 -0400] JFray: I've verified that the node and client do not already exist (via the web console and knife {node,client} list
[2012-04-29 03:11:15 -0400] JFray: )
[2012-04-29 03:15:17 -0400] monvillalon: Im trying to understand data bags, as I understand it its just a JSON I can user somewhere in my recipe.  And its available to all my recipes.  But it doesn't directly overwrite a recipes attributes.
[2012-04-29 03:16:25 -0400] monvillalon: Im trying  to understand the php-quick-start from the wiki, but its data bag its just a big mess, i don't understand its purpouse
[2012-04-29 03:16:54 -0400] yfeldblum: monvillalon, data bags are like any database tables in a regular database-backed web application; your code can fetch the data that it wants at any time, without having to have the data hardcoded into the code
[2012-04-29 03:17:33 -0400] monvillalon: yfeldblum: Cool, that is what I thought.
[2012-04-29 03:18:03 -0400] monvillalon: yfeldblum: So if i have a databag called apps, all my recipes can use the apps variable
[2012-04-29 03:19:11 -0400] yfeldblum: monvillalon, if you have a data bag called "apps", and in that data bag (table) you have multiple data bag items (records), your recipes are permitted to run a query to fetch the data bag items that it wants from that data bag (but there is no automatic variable)
[2012-04-29 03:19:20 -0400] monvillalon: yfeldblum: Im trying to figure out where the databag is actually used in the recipes
[2012-04-29 03:19:48 -0400] monvillalon: ok, {
[2012-04-29 03:19:48 -0400] monvillalon:    "id":"mediawiki",
[2012-04-29 03:19:49 -0400] monvillalon:    "server_roles":[
[2012-04-29 03:19:50 -0400] monvillalon:       "mediawiki"
[2012-04-29 03:19:51 -0400] monvillalon:    ],
[2012-04-29 03:19:54 -0400] monvillalon: sorry about that.
[2012-04-29 03:19:59 -0400] yfeldblum: `apps = search("apps", "key1:value1 AND key2:value2") ; Chef::Log.info(apps.count)`
[2012-04-29 03:20:08 -0400] monvillalon: Ohhhhhhh
[2012-04-29 03:20:48 -0400] monvillalon: thanks.. no code in data bags section of the wiki
[2012-04-29 03:20:58 -0400] monvillalon: how do you store, a value?
[2012-04-29 03:21:03 -0400] yfeldblum: `search` is the method available in recipes to send a query to the chef-server and wait for the query results from the chef-server; the query language is Lucene with certain chef-specific extensions, so you can find a reference on the Lucene query language if you would like to learn more
[2012-04-29 03:21:06 -0400] monvillalon: or are they read only?
[2012-04-29 03:21:49 -0400] yfeldblum: you can also load data bags directly without search: `apps_names = data_bag("apps") #=> ["mediawiki", "radiant", "redmine", "app4", "app5"]`
[2012-04-29 03:22:32 -0400] yfeldblum: redmine_app = data_bag_item("apps", "redmine") #=> {"id" => "mediawiki", "server_roles" => ["mediawiki"]}
[2012-04-29 03:22:40 -0400] monvillalon: So is a data bag more like a mongodb document, just random data for me to use.
[2012-04-29 03:22:48 -0400] yfeldblum: monvillalon, yes, exactly
[2012-04-29 03:23:07 -0400] yfeldblum: monvillalon, but instead of the mongodb query language, you get the lucene query language with chef's enhancements
[2012-04-29 03:23:31 -0400] JFray: @jtimberman: is there something obviously wrong with the config I've pasted, or does it look reasonable?
[2012-04-29 03:23:39 -0400] yfeldblum: monvillalon, you create data bags (tables/collections) using `knife data bag create NAME`
[2012-04-29 03:23:40 -0400] monvillalon: and how does it translate to search, first level keys of the document are the field name the rest is the value?
[2012-04-29 03:23:50 -0400] jtimberman: JFray: seems reasonable
[2012-04-29 03:23:56 -0400] yfeldblum: monvillalon, you can upload a data bag item (record/document) using `knife data bag from file NAME ID.json`
[2012-04-29 03:24:13 -0400] yfeldblum: monvillalon, yes, nested keys are flattened with underscores
[2012-04-29 03:24:38 -0400] monvillalon: yfeldblum: where is this information are we reading the same wiki, or is there a secret wiki :)
[2012-04-29 03:24:51 -0400] JFray: @jtimberman: kk. I'm going to start stepping through the code, just wanted to make sure it looked right :)
[2012-04-29 03:24:57 -0400] JFray: @jtimberman: thanks
[2012-04-29 03:25:09 -0400] monvillalon: yfeldblum: you rock btw
[2012-04-29 03:26:19 -0400] yfeldblum: monvillalon, http://wiki.opscode.com/display/chef/Data+Bags and http://wiki.opscode.com/display/chef/Search
[2012-04-29 03:26:52 -0400] jtimberman: JFray: you can also open a ticket at help.opscode.com, though you may not get a reply till business hours on Monday
[2012-04-29 03:27:19 -0400] monvillalon: yfeldblum: you are right.=) its just a little overwhelming, i've been reading about chef but there is nothing like actually expreriencing
[2012-04-29 03:27:33 -0400] yfeldblum: monvillalon, jtimberman recommends committing your data bag items to git; i like to view them more as "dynamic" data that doesn't get added to git; either way, you use them from your recipes the same way
[2012-04-29 03:27:36 -0400] monvillalon: actually getting your hands dirty :)
[2012-04-29 03:27:43 -0400] yfeldblum: monvillalon, chef is the deep end ...
[2012-04-29 03:29:45 -0400] yfeldblum: monvillalon, but if you don't add your data bag items to git, you may want to come up with a backup strategy for them as well as a convenient way for editing them without making mistakes (such as a webapp over them, or a CLI) so it's usually easier just to add them to git
[2012-04-29 03:29:57 -0400] monvillalon: yfeldblum: Indeeed but in general i like it, it just need a little bit of friendliness to newbies :)
[2012-04-29 03:30:52 -0400] yfeldblum: monvillalon, i was right where you are not so long ago
[2012-04-29 03:31:00 -0400] monvillalon: yfeldblum: Right now, I'm just trying to figure out, where the hell this mess of code is using the data.. i assumed the apps variable because I saw one in the code.  Im learning chef + ruby :)
[2012-04-29 03:31:33 -0400] yfeldblum: monvillalon, knowing ruby will help im-super-mensely
[2012-04-29 03:32:23 -0400] monvillalon: yfeldblum: Yes it sort of start making sense after a while, but only one big revelation at a time.  Chef is made with the philosophy of there is nothing you can't do, and it shows
[2012-04-29 03:32:30 -0400] yfeldblum: monvillalon, you can do the basics without much ruby learning, but if you're already trying to make sense of using data bags, that's where it comes in handy
[2012-04-29 03:32:58 -0400] monvillalon: yfeldblum: I know code, for now it has worked
[2012-04-29 03:33:52 -0400] yfeldblum: monvillalon, cool
[2012-04-29 03:34:13 -0400] monvillalon: yfeldblum: Im going to go back to ruby though, beautiful language. Im a php guy ( one of the good ones i swear :) )
[2012-04-29 03:35:48 -0400] monvillalon: yfeldblum: So Im still missing one key point, I know how to query, and thanks to god I know lucene :) but how do i store dynamic data, like the names or ips of the servers to load balance.
[2012-04-29 03:36:29 -0400] monvillalon: yfeldblum: Im guessing its on data bags
[2012-04-29 03:37:49 -0400] yfeldblum: monvillalon, you can store them in data bag items; if you're keeping them as JSON files in your repository, you can edit the JSON and then `knife data bag from file BAG ITEM.json` (knife data bag from file apps redmine.json)
[2012-04-29 03:38:10 -0400] yfeldblum: monvillalon, which uploads the new data bag item (record/document) to your che-sver
[2012-04-29 03:39:25 -0400] yfeldblum: monvillalon, if you're not keeping them in your repository, you can edit them with `EDITOR=vim knife data bag edit BAG ITEM` (knife data bag edit apps redmine), which pops up your editor - when you save & quit your editor, knife uploads the new data bag item
[2012-04-29 03:40:13 -0400] monvillalon: yfeldblum: those are more like constants, like passwords, or attributes, what about things that change like a recipe that stores the first server to boot somewhere so a second can query who the other is for master/slave stuff like that
[2012-04-29 03:42:11 -0400] yfeldblum: monvillalon, chef doesn't really work like that; you're supposed to tell chef which is the master and which is the slave, and chef shall obey
[2012-04-29 03:42:41 -0400] monvillalon: yfeldblum: For example how does a haproxy instance get the ips of the servers to load balance to.
[2012-04-29 03:43:46 -0400] monvillalon: yfeldblum: I have to change the databag with the IPS? isn't it smarter for a server to register itself and then haproxy to query for its existence.
[2012-04-29 03:44:11 -0400] yfeldblum: monvillalon, there are various techniques: for example, you can one role to both the haproxy nodes and all the backend nodes, and use search based on roles
[2012-04-29 03:44:49 -0400] miah: the existing haproxy cookbook definitely doesn't make this easy
[2012-04-29 03:44:58 -0400] miah: i'm working on fixing it
[2012-04-29 03:45:01 -0400] monvillalon: yfeldblum: ok, so search works on roles and also data bags what else can I query
[2012-04-29 03:45:17 -0400] miah: monvillalon: all attributes
[2012-04-29 03:45:19 -0400] monvillalon: miah: Lol I'm trying to figure it out right now.
[2012-04-29 03:45:22 -0400] yfeldblum: monvillalon, search works on nodes and data bags
[2012-04-29 03:45:31 -0400] monvillalon: yfeldblum: cool
[2012-04-29 03:45:40 -0400] miah: search?
[2012-04-29 03:45:40 -0400] bawt: search is http://wiki.opscode.com/display/chef/Search
[2012-04-29 03:46:05 -0400] yfeldblum: monvillalon, you can, e.g., find all nodes which have some role, or which have some tag, or which have some other attribute
[2012-04-29 03:46:09 -0400] monvillalon: bawt: Yes i need to read and I will, I'm just getting the feel :)
[2012-04-29 03:47:02 -0400] monvillalon: yfeldblum: ok. so the chef server is basically read only except for the automatically generated data from the recipes.
[2012-04-29 03:47:39 -0400] yfeldblum: monvillalon, yes ... or, more accurately, no, but you should pretty please treat it that way for all of our sanity
[2012-04-29 03:47:40 -0400] monvillalon: bawt: I actually read it, just not when I was ready :)
[2012-04-29 03:47:51 -0400] monvillalon: yfeldblum: LOL, good to know
[2012-04-29 03:47:55 -0400] yfeldblum: monvillalon, bawt is a bot
[2012-04-29 03:48:11 -0400] monvillalon: yfeldblum: LOL I suck
[2012-04-29 03:48:24 -0400] yfeldblum: bawt is a bot
[2012-04-29 03:48:26 -0400] yfeldblum: bawt?
[2012-04-29 03:48:26 -0400] bawt: bawt is me, the channel robot
[2012-04-29 03:49:47 -0400] monvillalon: yfeldblum: Ok if I may abuse a little bit more.  Ive learned more in 5 minutes that in 5 hours of reading code and recipes. Ready for some more questions.  I swear they are of good quality...:)
[2012-04-29 03:51:52 -0400] miah: go read the nagios cookbook for some good examples of search usage
[2012-04-29 03:53:01 -0400] monvillalon: miah: Thanks.. Ive tried reading the database cookbook. and sort of understood about the roles
[2012-04-29 03:55:18 -0400] monvillalon: miah:  yfeldblum: thanks a lot, I'm going to go under again, wish me luck :)
[2012-04-29 04:01:18 -0400] monvillalon: can someone explain this line?
[2012-04-29 04:01:20 -0400] monvillalon: default['mysql']['bind_address']               = attribute?('cloud') ? cloud['local_ipv4'] : ipaddress
[2012-04-29 04:02:31 -0400] monvillalon: its from the mysql cookbook, where does the cloud variable come from?
[2012-04-29 04:04:14 -0400] yfeldblum: monvillalon, ask away
[2012-04-29 04:04:49 -0400] monvillalon: yfeldblum: can you explain the line:
[2012-04-29 04:04:56 -0400] monvillalon: default['mysql']['bind_address']               = attribute?('cloud') ? cloud['local_ipv4'] : ipaddress
[2012-04-29 04:05:13 -0400] yfeldblum: monvillalon, ohai
[2012-04-29 04:05:14 -0400] monvillalon: this from an attribute file
[2012-04-29 04:05:16 -0400] yfeldblum: ohai?
[2012-04-29 04:05:16 -0400] bawt: ohai is the tool used to expose system information as a JSON hash, used for the platform / platform version lookups and available via the node accessor or independent
[2012-04-29 04:05:54 -0400] yfeldblum: every chef-solo and chef-client run starts by running ohai to collect system information, and prepopulating the node data with the ohai data
[2012-04-29 04:06:05 -0400] monvillalon: so attribute? is like a short for search('attribute','cloud: *')
[2012-04-29 04:06:44 -0400] monvillalon: yfeldblum: cloud is an attribute that ohai sets?
[2012-04-29 04:07:51 -0400] yfeldblum: monvillalon, that code is equivalent to: default["mysql"]["bind_address"] = node.has_key?("cloud") ? node["cloud"]["local_ipv4"] : node["ipaddress"]
[2012-04-29 04:08:16 -0400] yfeldblum: monvillalon, but the author of that line appears to enjoy abusing ruby :P
[2012-04-29 04:10:11 -0400] monvillalon: yfeldblum: ok, So ohai sets an attribute called cloud, but only sometimes, if it has it use it, if not use ipaddress, that magically appeared.: )
[2012-04-29 04:11:12 -0400] yfeldblum: monvillalon, `cloud` is not a local variable; that is method-calling syntax because a local variable named cloud is not in scope, and the Ruby rules are if there's no local variable by that name in scope, it's a method call
[2012-04-29 04:13:05 -0400] monvillalon: yfeldblum: I need to read more ruby.
[2012-04-29 04:13:41 -0400] yfeldblum: monvillalon, since it's a method call - or rather, message send, the normal rules of message sending apply: the `self` in question (the node object in the case of attributes files) checks if a method by that name is defined in the `self`'s class, and if it is, calls that method
[2012-04-29 04:14:12 -0400] yfeldblum: monvillalon, if there is no such method defined in the `self`'s class, as is the case here, then `self` calls the method `method_missing` instead
[2012-04-29 04:14:19 -0400] monvillalon: yfeldblum: I got the javascript syndrome, even if you haven't ever written any of it you think you know every thing you need to know about it
[2012-04-29 04:15:21 -0400] yfeldblum: monvillalon, the `Chef::Node` class has overridden `method_missing` to return the data attribute whose key is the message you sent
[2012-04-29 04:16:09 -0400] JFray: When using Vagrant's Chef Provisioning, is it expected that I need to create the client.pem manually (via knife client create)? Or is it *supposed* to register and create it during the initial chef-client run?
[2012-04-29 04:16:24 -0400] yfeldblum: monvillalon, so: you sent an instance of `Chef::Node` the message `cloud`, but `Chef::Node` doesn't have a method by that name, so it calls the method `method_missing` and `method_missing` returns `self[message_name]`
[2012-04-29 04:16:34 -0400] JFray: either way is ok, I just want to make sure I'm not repeating work
[2012-04-29 04:16:43 -0400] yfeldblum: monvillalon, so that's why, in that spot right there, `cloud` is equivalent to `node["cloud"]`
[2012-04-29 04:16:54 -0400] yfeldblum: monvillalon, hope it makes some sense ...
[2012-04-29 04:17:06 -0400] monvillalon: JFray: I think vagrant doesn't do .pem , vagrant boxes are supposed to have the root password vagrant
[2012-04-29 04:18:45 -0400] JFray: monvillalon: in order to auth against hosted chef, you need a client.pem signed by your validation key
[2012-04-29 04:18:49 -0400] miah: vagrant / chef provisioning is likely done with chef-solo
[2012-04-29 04:18:54 -0400] miah: unless you've configured it not to
[2012-04-29 04:19:14 -0400] JFray: miah: I've configured it to use my hosted chef instance
[2012-04-29 04:19:31 -0400] monvillalon: yfeldblum: It kind of does.  but very ephemerally. I know the players I can't follow the logic. Im translating, php's __get and javascripts context, but the translations slips somewhere...
[2012-04-29 04:20:09 -0400] jtimberman: monvillalon: one of the things that we had planned on doing but didn't finish due to shifting product priorities is embellish the "quick start" guides.
[2012-04-29 04:20:30 -0400] JFray: monvillalon: the vagrant box password isn't related to the pem issue I was asking :)
[2012-04-29 04:20:33 -0400] jtimberman: sort of a followup like, "ok, you have a php/rails/nagios/whatever server/cluster up, what did that do?"
[2012-04-29 04:21:12 -0400] monvillalon: JFray: sorry i assumed chef solo, I'm sorry I don't know
[2012-04-29 04:21:13 -0400] JFray: @jtimberman: I was able to get my vagrant instance to get past that 401 error if I created the client.pem manually with knife
[2012-04-29 04:21:18 -0400] jtimberman: the chefconf workshop for sysadmins that we're working on will have part of that, and we're going to turn that into a training offering.
[2012-04-29 04:21:24 -0400] JFray: @monvillalon: it's all good mang :)
[2012-04-29 04:21:25 -0400] jtimberman: JFray: weird.
[2012-04-29 04:21:40 -0400] JFray: @jtimberman: so, that's not the normal way for vagrant?
[2012-04-29 04:21:49 -0400] JFray: if it's not, that gives me a good lead on where I need to look
[2012-04-29 04:21:57 -0400] JFray: if it is, then I can script around it
[2012-04-29 04:22:23 -0400] jtimberman: JFray: nope. i have my nodes automatically registering with the validation certificate in that multi-vm vagrantfile.
[2012-04-29 04:22:32 -0400] JFray: kk
[2012-04-29 04:23:04 -0400] JFray: @jtimberman: cool. good to know :)
[2012-04-29 04:23:12 -0400] monvillalon: jtimberman: I think the problem is that its too much to take in at a glance. your hello world is basically how to configure a lamp stack. maybe it should have been more of a hello world.txt :)
[2012-04-29 04:25:06 -0400] jtimberman: hehehehe
[2012-04-29 04:25:29 -0400] jtimberman: we used to have a shorter guide with a simple recipe that drops off a template.
[2012-04-29 04:25:32 -0400] jtimberman: i think that might still exist.
[2012-04-29 04:26:58 -0400] monvillalon: jtimberman: probably, I'm going to write something someday, maybe help someone, today I need to learn
[2012-04-29 04:28:21 -0400] monvillalon: jtimberman: BTW I'm reading the manual again, and just noticed that Attributes talks about Roles and Nodes stuff that haven't been defined yet...:)
[2012-04-29 04:34:57 -0400] jtimberman: monvillalon: :)
[2012-04-29 04:35:08 -0400] jtimberman: monvillalon: you may find the fundamentals training materials helpful, too.
[2012-04-29 04:36:05 -0400] jtimberman: they're in markdown on github, and there's generated pdfs if you sign up here: http://info.opscode.com/opentraining/
[2012-04-29 04:36:27 -0400] jtimberman: https://github.com/opscode/chef-fundamentals/
[2012-04-29 06:07:56 -0400] JFray: I'm trying to track down a 401 issue on my vagrant instance (vagrant using chef_client against hosted chef) and came across a call to http://localhost:4042
[2012-04-29 06:07:59 -0400] JFray: Chef::REST.new(config[:client_url], config[:validation_client_name], config[:validation_key]).register(client_name, config[:client_key])
[2012-04-29 06:08:06 -0400] JFray: where client_url = localhost:4042
[2012-04-29 06:09:12 -0400] JFray: and I'm thinking this is where it's failing - I ran the register and had a tight loop checking whether port 4042 is open. It never binds, and I'm thinking that it might be related?
[2012-04-29 06:09:27 -0400] JFray: what's *supposed* to be listening there?
[2012-04-29 06:15:38 -0400] JFray: actually - it appears that might be the problem. Vagrant doesn't expose client_url as a config variable, so it defaults to a listener that doesn't exist. No client.pem is created, and then the client sends a blank client.pem to the server and gets a 401 response.
[2012-04-29 06:16:49 -0400] JFray: @jtimberman, @monvillalon, @yfeldblum, @miah: Thank you for your help in tracking this down
[2012-04-29 14:33:37 -0400] BryanWB_: hosted chef is sloooow right now
[2012-04-29 16:04:47 -0400] hoover_damn: is it chef? or S3?
[2012-04-29 16:12:52 -0400] BryanWB_: hoover_damn, not sure, is ok now
[2012-04-29 16:13:23 -0400] BryanWB_: hoover_damn, since ur an EY alum, any insight on the fate of rubinius since Evan Phoenix left EY?
[2012-04-29 16:13:44 -0400] echiu: is this channel mostly active during work hours PST?
[2012-04-29 16:14:04 -0400] echiu: no one here on weekends/evenings
[2012-04-29 16:14:15 -0400] BryanWB_: echiu, very active during those hours
[2012-04-29 16:14:34 -0400] BryanWB_: not so many of us in asia or europe :(, at least not yet
[2012-04-29 16:14:41 -0400] echiu: do people here work for opsware?
[2012-04-29 16:15:05 -0400] echiu: I noticed that
[2012-04-29 16:15:54 -0400] BryanWB_: i don't
[2012-04-29 16:15:58 -0400] BryanWB_: some do
[2012-04-29 16:16:43 -0400] echiu: I'm in PST, but work a lot during evening/weekends  :D
[2012-04-29 16:17:40 -0400] echiu: so people are just other chef users helping each other out?
[2012-04-29 16:19:17 -0400] jtimberman: echiu: you mean opscode? :)
[2012-04-29 16:19:37 -0400] jtimberman: echiu: several folks from opscode are here, but not necessarily active until US business hours.
[2012-04-29 16:19:57 -0400] cwj: what was the name of that company.. something about ops and kittens
[2012-04-29 16:20:00 -0400] echiu: ok, thanks!
[2012-04-29 16:20:06 -0400] jtimberman: jtimberman?
[2012-04-29 16:20:06 -0400] bawt: jtimberman is an Opscode employee, likes cookbooks and Chef training, and long walks on the beach.
[2012-04-29 16:20:23 -0400] echiu: lol
[2012-04-29 16:20:49 -0400] echiu: sounds like a match.com profile
[2012-04-29 16:21:40 -0400] echiu: have to run, will check back during biz hours PST
[2012-04-29 16:21:48 -0400] echiu: bye
[2012-04-29 16:27:33 -0400] hoover_damn: BryanWB_, I don't really consider myself EY Alumni
[2012-04-29 16:27:42 -0400] hoover_damn: BryanWB_, I have no communications with anyone from Engine Yard any longer
[2012-04-29 16:27:52 -0400] hoover_damn: or anyone who worked with them previously
[2012-04-29 16:28:37 -0400] hoover_damn: BryanWB_, I personally think that Rubinius should die and roll over already
[2012-04-29 16:28:58 -0400] hoover_damn: but that's because I don't appreciate the direction they took
[2012-04-29 16:29:16 -0400] hoover_damn: the we'll be x faster then 1.8.x
[2012-04-29 16:29:18 -0400] hoover_damn: and 1.8.x forever
[2012-04-29 16:29:40 -0400] hoover_damn: ruby is an ever evolving project and we should help it's future... not it's people holding onto the past
[2012-04-29 16:31:00 -0400] hoover_damn: BryanWB_, if you want the truth though.  I don't think it'll do a darn thing as when Wesley quit Engine Yard... it didn't stop fog
[2012-04-29 16:31:16 -0400] hoover_damn: BryanWB_, it's very unlikely that Evan will stop working on rubinus
[2012-04-29 16:48:43 -0400] BryanWB_: hoover_damn, tks for enlightening me
[2012-04-29 19:30:08 -0400] hoover_damn: BryanWB_, I woudln't worry about all the people that split from Engine Yard
[2012-04-29 19:30:17 -0400] hoover_damn: BryanWB_, you will see a lot
[2012-04-29 19:30:47 -0400] BryanWB_: hoover_damn, i do worry about the dearth of resources going into the underlying platform, same thing i have seen w/ python
[2012-04-29 19:30:48 -0400] hoover_damn: it's the nature of the business
[2012-04-29 19:31:07 -0400] hoover_damn: BryanWB_, if Engine Yard disappears tomorrow, ruby won't change.
[2012-04-29 19:31:10 -0400] BryanWB_: at least compared to the amount of profit companies earn using ruby and python
[2012-04-29 19:31:31 -0400] BryanWB_: hoover_damn, coming to chefconf? it would be great to meet u i person?
[2012-04-29 19:31:33 -0400] hoover_damn: BryanWB_, they do employ several people who drive Ruby development
[2012-04-29 19:31:40 -0400] BryanWB_: s/?/!/
[2012-04-29 19:31:41 -0400] hoover_damn: and nope
[2012-04-29 19:31:49 -0400] BryanWB_: hoover_damn, too bad
[2012-04-29 19:31:53 -0400] hoover_damn: if you were at the Chef summit
[2012-04-29 19:31:54 -0400] hoover_damn: we could have met
[2012-04-29 19:32:09 -0400] BryanWB_: hoover_damn, we'll have to have u on foodfight some time
[2012-04-29 19:32:09 -0400] hoover_damn: no desire to go to SF right now
[2012-04-29 19:32:44 -0400] hoover_damn: I need to start speaking more, but I think I need to pick my target audience better first.
[2012-04-29 19:34:22 -0400] BryanWB_: hoover_damn, would u be interested in being on foodfight?
[2012-04-29 19:34:41 -0400] BryanWB_: opinionated people like yourself make for great guests
[2012-04-29 19:37:37 -0400] BryanWB_: anyways gnite
[2012-04-29 20:07:12 -0400] miah: moin
[2012-04-29 21:02:06 -0400] dumfries_: Evening.
[2012-04-29 21:50:47 -0400] jgrevich: are there any foreseeable problems if you run chef-solo with sudo? is that preferred?
[2012-04-29 22:34:48 -0400] hoover_damn: jgrevich, sudo resets the environment
[2012-04-29 22:34:54 -0400] hoover_damn: so if you use rvm you'll loose that
[2012-04-29 22:35:04 -0400] hoover_damn: jgrevich, you can turn that off in the sudoers file
[2012-04-29 22:35:16 -0400] hoover_damn: jgrevich, basically though outside of that it should be +1
[2012-04-29 22:35:37 -0400] hoover_damn: jgrevich, as long as you have uid=0 or euid=0 and or can elevate itself to get what it needs done
[2012-04-29 22:35:40 -0400] hoover_damn: then :)
[2012-04-29 22:53:28 -0400] hippiehacker: Is there a ticket around - WARN: Error loading cached checksum for key "chef-file-c:-path-to-file-with-dashes
[2012-04-29 22:53:41 -0400] hippiehacker: followed by - WARN: dump format error for symbol(0x75) (ArgumentError)
[2012-04-29 22:53:43 -0400] hippiehacker: on windows?
[2012-04-29 22:54:23 -0400] hippiehacker: template files also seem to be missing their line numbers in the error messages on windows
[2012-04-29 23:13:32 -0400] hippiehacker: oh yea, sunday in the states, not gonna get much traffic today 8)

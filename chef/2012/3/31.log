[2012-03-31 00:00:20 -0400] hoover_damm: nect, it's likely ruby
[2012-03-31 00:00:24 -0400] hoover_damm: nect, what version of ruby is it?
[2012-03-31 00:01:30 -0400] nect: 1.8.7
[2012-03-31 00:01:40 -0400] nect: ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux]
[2012-03-31 00:06:24 -0400] hoover_damm: hrm shouldn't be
[2012-03-31 00:06:25 -0400] hoover_damm: ouch
[2012-03-31 00:06:30 -0400] hoover_damm: 352 isn't that bad
[2012-03-31 01:30:13 -0400] tolland: im getting a deploy from git job failFETCH_HEAD: Permission denied
[2012-03-31 01:31:04 -0400] miah: do you have access to the repository?
[2012-03-31 01:31:06 -0400] tolland: however the files are owned and u+rw and the dir is u+rwx  and it runs from the command line
[2012-03-31 01:31:13 -0400] tolland: yeah, its mine
[2012-03-31 01:31:37 -0400] miah: which files?
[2012-03-31 01:31:50 -0400] miah: the ones its overwriting?
[2012-03-31 01:31:52 -0400] tolland: it looks to be choking on the group rx permission on the main git parent folder
[2012-03-31 01:32:07 -0400] bemu: That's a git issue.
[2012-03-31 01:32:11 -0400] bemu: Isn't it?
[2012-03-31 01:32:20 -0400] miah: bemu: looks like it
[2012-03-31 01:32:27 -0400] bemu: I'd try it manually
[2012-03-31 01:32:31 -0400] tolland: i dont see it running the same commands manually
[2012-03-31 01:32:35 -0400] miah: tolland: which user is the git deploy executing as?
[2012-03-31 01:32:37 -0400] bemu: SSH_GET=/home/ubuntu/deploy_wrapper
[2012-03-31 01:32:43 -0400] bemu: git pull origin branchname
[2012-03-31 01:32:44 -0400] bemu: or whatever
[2012-03-31 01:32:45 -0400] tolland: ie cutting and pasting from chef-client debug output
[2012-03-31 01:32:50 -0400] hoover_damm: GIT_SSH
[2012-03-31 01:32:54 -0400] bemu: yes, thanks.
[2012-03-31 01:32:55 -0400] hoover_damm: ^^
[2012-03-31 01:32:59 -0400] bemu: Super busy :/
[2012-03-31 01:33:28 -0400] miah: what does deploy_wrapper do?
[2012-03-31 01:33:40 -0400] tolland: this is centos
[2012-03-31 01:33:47 -0400] bemu: You're use the git resource, right?
[2012-03-31 01:35:26 -0400] miah: nope
[2012-03-31 01:37:03 -0400] hoover_damm: http://rubysnips.wordpress.com/2012/03/19/how-to-generate-git-ssh-wrapper-to-be-used-with-chef/
[2012-03-31 01:37:07 -0400] hoover_damm: maybe useful
[2012-03-31 01:38:02 -0400] hoover_damm: git has a really messed up way of specifying a config file
[2012-03-31 01:38:12 -0400] tolland: miah: i dont see any option to set the user which the git scm resource is run as
[2012-03-31 01:38:21 -0400] tolland: presumably then its running as root
[2012-03-31 01:38:24 -0400] tolland: ie the chef-client
[2012-03-31 01:38:26 -0400] miah: ya, i have no idea. i dont use the git resource
[2012-03-31 01:38:30 -0400] hoover_damm: tolland, specify the user resource
[2012-03-31 01:39:16 -0400] bemu: The application cookbook has an example, no?
[2012-03-31 01:40:35 -0400] hoover_damm: https://gist.github.com/7796bf12f0e73959a8e5
[2012-03-31 01:40:36 -0400] hoover_damm: yep it does
[2012-03-31 01:40:46 -0400] hoover_damm: that's a example i made
[2012-03-31 01:41:15 -0400] hoover_damm: https://github.com/opscode-cookbooks/application/blob/master/recipes/rails.rb#L163
[2012-03-31 01:41:17 -0400] hoover_damm: much better example
[2012-03-31 01:42:28 -0400] miah: neat
[2012-03-31 01:42:54 -0400] hoover_damm: bemu, your always busy until you force yourself to slow down and take things peice by peice
[2012-03-31 01:43:46 -0400] bemu: But I need to get nagios coverage before I can go home and feel comfortable with all of these new servers! :D
[2012-03-31 01:43:48 -0400] hoover_damm: just because i wanna hack until 12am
[2012-03-31 01:46:05 -0400] tolland: ah,thanx all. I have reset the local git dirs user/group in some other directory resrouce
[2012-03-31 01:46:26 -0400] tolland: all status green
[2012-03-31 07:56:46 -0400] hakunin: could never quite find an answer: which ec2 instance is reasonable for chef server? Does it matter? does chef server need to somehow scale with the rest of infrastructure and would it choke on micro?
[2012-03-31 08:05:16 -0400] miah: chef server by itself would probably be fine on a micro, but you'd also need to put couchdb, rabbitmq, solr, and the expander somewhere =)
[2012-03-31 08:05:27 -0400] miah: you could probably through multiple pieces on a micro
[2012-03-31 08:05:32 -0400] miah: but unlikely all
[2012-03-31 08:09:02 -0400] hakunin: miah: yeah the only article i found mentioned rabbitmq crashing due to lack of ram on micro
[2012-03-31 08:10:15 -0400] hakunin: miah: i guess i'm looking for a recommendation of where can a full chef server install be comfy, considering that i don't really use rabbitmq and couchdb for anything else in the app
[2012-03-31 08:10:25 -0400] hakunin: which ec2 instance would be perfect
[2012-03-31 08:10:29 -0400] hakunin: (minimal)
[2012-03-31 08:12:10 -0400] hakunin: frankly i thought that chef server is a purely admin thing, it doesn't need much because it doesn't scale with traffic/load, just provides a convenient interface to other machines
[2012-03-31 08:12:29 -0400] hakunin: sad that it can't work on minimal resources
[2012-03-31 08:22:25 -0400] luisico: well, it's not just a admin thing
[2012-03-31 08:22:38 -0400] luisico: it's a complex system
[2012-03-31 08:22:55 -0400] luisico: of course, if you are planning to scale your nodes, you'll have to scale your chef server
[2012-03-31 08:24:08 -0400] luisico: as miah said if talking about chef server you mean the merb api server, for a bunch of nodes with a large interval, a micro instance would be maybe enough
[2012-03-31 08:24:54 -0400] hakunin: luisico: isn't chef server the orchestrating part of chef? am i mixing up terminology?
[2012-03-31 08:25:27 -0400] luisico: hakunin, your to be sure of what you mean as chef server
[2012-03-31 08:25:48 -0400] luisico: is it just the api merb app that communicates with the clients and knife
[2012-03-31 08:25:48 -0400] luisico: or
[2012-03-31 08:25:59 -0400] luisico: are you talking about the whole orchestrating system
[2012-03-31 08:26:14 -0400] luisico: including, storage, indexer, web admin, etc...
[2012-03-31 08:26:31 -0400] hakunin: considering that i'm new to chef, i didn't know there was the app option, i'm probably talking about the full system
[2012-03-31 08:26:43 -0400] luisico: ok
[2012-03-31 08:26:56 -0400] luisico: so
[2012-03-31 08:27:19 -0400] luisico: http://wiki.opscode.com/display/chef/Architecture
[2012-03-31 08:27:23 -0400] luisico: take a look at that picture
[2012-03-31 08:27:44 -0400] luisico: excluding the knife boxes and chef client boxes
[2012-03-31 08:27:54 -0400] luisico: the rest are all part of a chef server platform
[2012-03-31 08:30:08 -0400] hakunin: luisico: makes sense, miah explained that it uses rabbitmq and couchdb. So it probably writes a lot of stuff there. The question is how much, can it be contained within a fixed hdd space? Is there an amount of ram that will be sufficient to support all of that? I presume I will have to run it all on the same instance.
[2012-03-31 08:30:27 -0400] luisico: not necessary
[2012-03-31 08:30:43 -0400] luisico: you can split them up in different instances
[2012-03-31 08:31:06 -0400] luisico: regarding to the ammount of info and hdd space
[2012-03-31 08:31:19 -0400] hakunin: luisico: i realize it's not required, but i really have no use for rabbitmq or couchdb anywhere else, and my goal is to have least expensive chef setup. I want chef for convenience (because I'm not a great sysadmin), but as cheaply as comfortably possible
[2012-03-31 08:31:20 -0400] luisico: it depends on the data you are going to manage in your chef platform
[2012-03-31 08:31:23 -0400] luisico: how many nodes
[2012-03-31 08:31:24 -0400] luisico: cookbooks
[2012-03-31 08:31:25 -0400] luisico: roles
[2012-03-31 08:31:28 -0400] luisico: attributes
[2012-03-31 08:31:29 -0400] luisico: etc...
[2012-03-31 08:32:08 -0400] luisico: and depending also on the way you maintain your couchdb
[2012-03-31 08:32:48 -0400] luisico: what do you mean with no use for rabbit or couch?
[2012-03-31 08:32:50 -0400] luisico: experience?
[2012-03-31 08:33:59 -0400] hakunin: i mean, it will only be for chef, so paying for extra instances might be too much
[2012-03-31 08:34:00 -0400] benner: it is possible to limit what client can search()? i mean some clients only sees a group of other nodes when it does search()?
[2012-03-31 08:34:59 -0400] luisico: well, all I can say is that I think that you will have problems put the entire chef server platform in a micro instance
[2012-03-31 08:35:16 -0400] hakunin: the things you listed don't seem like the kind that change too often and their metadata wouldn't take a lot of space, since it's just some text. There's probably some logging going on? something that has to be periodically truncated? What variables will cause chef server to eat more resources altogether, in continuous running. Will traffic load make kill chef server? Or it's orthogonal? Installed software?
[2012-03-31 08:35:24 -0400] luisico: I never tried, but that's what I feel
[2012-03-31 08:35:43 -0400] luisico: well
[2012-03-31 08:36:06 -0400] luisico: how many nodes are we talking about?
[2012-03-31 08:36:18 -0400] luisico: which run interval in every client?
[2012-03-31 08:37:33 -0400] luisico: if you are going to have up to 5 nodes
[2012-03-31 08:37:37 -0400] luisico: you can start with hosted chef
[2012-03-31 08:37:50 -0400] hakunin: luisico: realizing that i may be missing some important point, I'm just trying to get something like "here, install everything on a small instance, it will last you until you're at 30 instances or so typically"
[2012-03-31 08:37:53 -0400] luisico: and move to your own server when you have more experience
[2012-03-31 08:39:10 -0400] hakunin: because whenever i try to learn about setting up chef on ec2, i seem to get answer that involve disregard for $cost
[2012-03-31 08:39:52 -0400] hakunin: i wanted to avoid hosted chef and dive right in
[2012-03-31 08:40:08 -0400] hakunin: will play with virtual box setup to get familiar first
[2012-03-31 08:40:15 -0400] benner: hosted chef is good for learning
[2012-03-31 08:40:29 -0400] luisico: yeah hosted chef is great for that
[2012-03-31 08:41:53 -0400] hakunin: alright
[2012-03-31 08:42:06 -0400] luisico: hakunin, I would start with hosted chef, keep the backups in day and when you are confortable and when you have a more or less stable number of nodes and your cookbooks you bootstrap a chef server in a ec2 and restore the backup
[2012-03-31 08:42:37 -0400] hakunin: however
[2012-03-31 08:42:46 -0400] hakunin: when i decide to move from hosted chef
[2012-03-31 08:42:47 -0400] hakunin: to ec2
[2012-03-31 08:42:54 -0400] hakunin: i'm still left with the same exact question
[2012-03-31 08:43:05 -0400] benner: when you exeed 5 hosts
[2012-03-31 08:43:14 -0400] benner: i met nodes
[2012-03-31 08:43:42 -0400] hakunin: the question being: "what instance should i use for chef server. what is the best way to setup chef server on ec2"
[2012-03-31 08:43:52 -0400] hakunin: "that is also the cheapest"
[2012-03-31 08:44:10 -0400] luisico: when you have a stable numbter of nodes
[2012-03-31 08:44:15 -0400] luisico: and all your cookbooks set
[2012-03-31 08:44:19 -0400] hakunin: i have 2 nodes at the moment
[2012-03-31 08:44:24 -0400] luisico: bootstrap a ec2 micro
[2012-03-31 08:44:25 -0400] luisico: and test
[2012-03-31 08:44:30 -0400] luisico: if it doesn't work for your
[2012-03-31 08:44:33 -0400] luisico: test the nex one
[2012-03-31 08:44:36 -0400] luisico: next one
[2012-03-31 08:44:48 -0400] luisico: bootstrapping a chef server is pretty easy and fast
[2012-03-31 08:44:55 -0400] erikh: get it working in vagrant first, then move to ec2
[2012-03-31 08:44:58 -0400] luisico: you have some "recipes" for that in the chef wiki
[2012-03-31 08:45:26 -0400] hakunin: erikh: yeah that I definitely wanted to do
[2012-03-31 08:45:30 -0400] luisico: http://wiki.opscode.com/display/chef/Installing+Chef+Server
[2012-03-31 08:45:46 -0400] luisico: there you have son painless ways to install it
[2012-03-31 08:47:02 -0400] hakunin: How would chef server failures present themselves? Just curious.
[2012-03-31 08:47:22 -0400] hakunin: the "if it doesn't work for your test" < what would that look like?
[2012-03-31 08:47:39 -0400] benner: i think you will see OOM meesages
[2012-03-31 08:48:04 -0400] luisico: well you'll see how fast your server process the requests
[2012-03-31 08:48:14 -0400] luisico: you'll see if you need more than one worker
[2012-03-31 08:48:56 -0400] hakunin: luisico: you mean how fast my chef admin panel processes my (admin's) requests?
[2012-03-31 08:48:57 -0400] luisico: and if your instance has enough resources to keep more than one worker running
[2012-03-31 08:49:13 -0400] luisico: your chef-server-api
[2012-03-31 08:49:16 -0400] hakunin: right
[2012-03-31 08:49:19 -0400] luisico: processes hyour requests
[2012-03-31 08:49:34 -0400] luisico: the "admin panel" is the chef-server-webui
[2012-03-31 08:49:44 -0400] hakunin: understood, working through the api too
[2012-03-31 08:49:48 -0400] luisico: and it's just a web app that communicates with the api
[2012-03-31 08:49:54 -0400] luisico: but it's totally secondary
[2012-03-31 08:50:19 -0400] luisico: everything communicates with the chef server api
[2012-03-31 08:50:22 -0400] luisico: clientes
[2012-03-31 08:50:24 -0400] luisico: knife
[2012-03-31 08:50:28 -0400] luisico: *clients
[2012-03-31 08:50:31 -0400] luisico: and webui
[2012-03-31 08:50:36 -0400] luisico: it's the core
[2012-03-31 08:50:40 -0400] hakunin: it's very unusual to me to think in terms of having an infrastructure to run an infrastructure, when i'm used to simply having some provisioning scripts running via ssh
[2012-03-31 08:51:26 -0400] hakunin: but if that means i can have convenience and flexibility to play and rearrange things, it may be worth it
[2012-03-31 08:51:38 -0400] luisico: well, this is more or less the same
[2012-03-31 08:51:47 -0400] luisico: chef server doesn't "run" your infraestructure
[2012-03-31 08:52:03 -0400] luisico: just gives information to your nodes about how they have to do to reach a state
[2012-03-31 08:52:16 -0400] luisico: very more or less
[2012-03-31 08:52:58 -0400] luisico: anyway, I highly recommend you to adopt chef wiki as your bible
[2012-03-31 08:53:12 -0400] luisico: there you have all the information you need to start with chef
[2012-03-31 08:53:20 -0400] hakunin: it communicates with things in real time, and needs to scale together with my other stuff in order to not run out of resources, and it is not unusual to have its components run on multiple machines, all of which makes it an infrastructure in itself, no?
[2012-03-31 08:53:34 -0400] erikh: it doens't communicate in realtime though.
[2012-03-31 08:53:40 -0400] erikh: it runs about every 30 minutes.
[2012-03-31 08:54:12 -0400] hakunin: i went through lots of text in wiki about a year ago, and was left confused on many fronts, will try again now. very much appreciate you guys taking the time to answer my noobage.
[2012-03-31 08:54:20 -0400] erikh: it's infrastructure, but about as much infra as, say, rsyslog is
[2012-03-31 08:55:21 -0400] hakunin: erikh: i see
[2012-03-31 08:55:39 -0400] hakunin: luisico: erikh: one last thing. I have a dream
[2012-03-31 08:55:42 -0400] hakunin: sort of
[2012-03-31 08:55:49 -0400] hakunin: that everything will become flexible
[2012-03-31 08:56:01 -0400] erikh: in what sense?
[2012-03-31 08:56:02 -0400] hakunin: that i will be able to swap roles, to install things differently
[2012-03-31 08:56:12 -0400] erikh: you can do better than that
[2012-03-31 08:56:16 -0400] hakunin: to play with new queues, dbs, tools
[2012-03-31 08:56:23 -0400] hakunin: easily
[2012-03-31 08:56:26 -0400] hakunin: to scale up and down
[2012-03-31 08:56:29 -0400] erikh: you can control whole groups of servers that way
[2012-03-31 08:56:32 -0400] hakunin: without practically any impact
[2012-03-31 08:56:48 -0400] erikh: At work, we have mysql recipes that manage whole clusters of servers
[2012-03-31 08:56:52 -0400] hakunin: like, my production env could be my sandbox and the customers won't even notice
[2012-03-31 08:57:01 -0400] erikh: and for redis and cass and mongo as well.
[2012-03-31 08:57:32 -0400] hakunin: so it's true that with chef i don't have to be deep into sysadmin knowledge to achieve this power?
[2012-03-31 08:57:39 -0400] erikh: yeah. so, we have haproxy recipes that integrate with our applications recipes
[2012-03-31 08:58:00 -0400] erikh: they establish endpoints to each other, so apps automatically get haproxy entries, for example
[2012-03-31 08:58:01 -0400] benner: hakunin: i think you must know sysadmin things
[2012-03-31 08:58:03 -0400] erikh: they live on different servers.
[2012-03-31 08:58:18 -0400] erikh: those are just a few things you can do with chef
[2012-03-31 08:59:33 -0400] erikh: anyhow, point is, chef's just another tool. it's up to the wielder how far they take it
[2012-03-31 08:59:44 -0400] prometheus: can you trigger a run manually via knife?
[2012-03-31 08:59:48 -0400] prometheus: kind of like puppet kick
[2012-03-31 08:59:56 -0400] erikh: I normally shell into the server and type 'sudo chef-client'
[2012-03-31 09:00:00 -0400] hakunin: benner: i am hoping to be able to rely on community recipes. i know quite a bit of sysadmin stuff with the years of dev experience, but i'm mostly still a dev. I've setup many servers from scratch, edited bash scripts, ran the whole infrastructure with rubber+capistrano, provisioned with sprinkle, etc. I am not oblivious how everything works, but I would probably be much better at modifying community recipes to fit my needs than
[2012-03-31 09:00:00 -0400] hakunin:  writing them from scratch.
[2012-03-31 09:00:02 -0400] erikh: sometimes with knife ssh.
[2012-03-31 09:00:07 -0400] erikh: (for groups of servers)
[2012-03-31 09:00:48 -0400] erikh: hakunin: fwiw, I'm in the same boat. I provide more developer stuff to our ops team than ops stuff.
[2012-03-31 09:01:24 -0400] erikh: trust me, once you figure out how to leverage search and roles, you're gonna go "whoa" like keanu reeves in the matrix.
[2012-03-31 09:01:43 -0400] hakunin: erikh: exactly what i'm hoping for : )
[2012-03-31 09:02:38 -0400] luisico: prometheus, trigger a client run via knife?
[2012-03-31 09:02:53 -0400] hakunin: again appreciate you guys taking the time, gonna go screw with it myself now
[2012-03-31 09:02:54 -0400] prometheus: yarr
[2012-03-31 09:03:10 -0400] prometheus: I suppose I can do that
[2012-03-31 09:03:15 -0400] luisico: so
[2012-03-31 09:03:16 -0400] prometheus: I need to just get familiar with knife :)
[2012-03-31 09:03:44 -0400] luisico: trigger a chef client in a node via knife from your work stations
[2012-03-31 09:03:47 -0400] luisico: station
[2012-03-31 09:03:50 -0400] luisico: ?
[2012-03-31 09:03:55 -0400] prometheus: correct
[2012-03-31 09:03:58 -0400] luisico: no, you can't
[2012-03-31 09:04:11 -0400] luisico: knife communicates with the api server
[2012-03-31 09:04:16 -0400] luisico: so the chef clients
[2012-03-31 09:04:41 -0400] luisico: you doesn't communicate with the node clientes directly with knife
[2012-03-31 09:04:51 -0400] prometheus: gotcha
[2012-03-31 09:07:05 -0400] prometheus: but I guess as erikh said, I could just do that w/ knife ssh
[2012-03-31 09:07:54 -0400] benner: the same is to log to node in and run chef-client :-)
[2012-03-31 09:08:05 -0400] prometheus: anyway, off to bed then.. thanks for the answers
[2012-03-31 09:08:16 -0400] luisico: ahhm
[2012-03-31 09:08:17 -0400] luisico: ok
[2012-03-31 09:08:20 -0400] luisico: true
[2012-03-31 09:08:32 -0400] luisico: too late
[2012-03-31 09:25:56 -0400] BryanWB_: ohai chefs
[2012-03-31 10:01:39 -0400] Babar: damn... I wish I remembered how I fixed my search issues when I migrated to 0.10. Migrated another server, and got the same issue, knife status returns error for :4000/search/node... and search from the webui triggers nothing, while status lists all my nodes
[2012-03-31 10:23:32 -0400] Babar: fixed. Upgrade screwed up chef-solr. Instructions which tells you to remove the file and reinstall are totally bogus though
[2012-03-31 10:23:45 -0400] Babar: if you remove the file, you're screwed.
[2012-03-31 11:39:14 -0400] BryanWB_: rubiojr, hey buddy!
[2012-03-31 11:41:47 -0400] rubiojr: hey BryanWB_!
[2012-03-31 11:41:54 -0400] rubiojr: what's up man?
[2012-03-31 11:42:24 -0400] BryanWB_: rubiojr, just learning about librarian atm
[2012-03-31 11:42:37 -0400] BryanWB_: rubiojr, we should have had u on the distro discussion for foodfigth
[2012-03-31 11:42:56 -0400] rubiojr: :)
[2012-03-31 11:43:08 -0400] rubiojr: I've been out of the distro panorama for a while
[2012-03-31 11:43:21 -0400] rubiojr: switched jobs recently and head down
[2012-03-31 11:43:21 -0400] rubiojr: :D
[2012-03-31 11:43:24 -0400] BryanWB_: r u still maintaining rbel6?
[2012-03-31 11:43:42 -0400] rubiojr: I am
[2012-03-31 11:43:56 -0400] BryanWB_: rubiojr, where work now?
[2012-03-31 11:44:11 -0400] rubiojr: bvox.net
[2012-03-31 11:44:16 -0400] rubiojr: openstack foo
[2012-03-31 11:44:56 -0400] BryanWB_: rubiojr, very cool, is it all chef + openstack?
[2012-03-31 11:45:05 -0400] rubiojr: correct
[2012-03-31 11:45:18 -0400] BryanWB_: neat, have u looked at ironfan?
[2012-03-31 11:45:25 -0400] rubiojr: no man
[2012-03-31 11:45:42 -0400] rubiojr: ouch
[2012-03-31 11:45:49 -0400] rubiojr: first google link isn't promising
[2012-03-31 11:46:22 -0400] rubiojr: u in load conf?
[2012-03-31 11:46:43 -0400] BryanWB_: https://github.com/infochimps-labs/ironfan-pantry   and https://github.com/infochimps-labs/ironfan
[2012-03-31 11:46:47 -0400] BryanWB_: load conf?
[2012-03-31 11:47:24 -0400] rubiojr: #loadays
[2012-03-31 11:48:07 -0400] rubiojr: o my
[2012-03-31 11:48:20 -0400] rubiojr: this ironfan looks like a big deal
[2012-03-31 11:48:34 -0400] BryanWB_: ironfan is the shit
[2012-03-31 11:48:50 -0400] rubiojr: been living under a rock lately...
[2012-03-31 11:48:51 -0400] BryanWB_: really smart way to tie together your infrastructure
[2012-03-31 11:48:54 -0400] rubiojr: I see
[2012-03-31 12:05:55 -0400] zts: has anyone written a useful introduction to the ironfan stuff yet, or is it "Use the source, Luke" ?
[2012-03-31 12:09:23 -0400] zts: (I like the intent, but have the distinct impression that it isn't especially usable unless you very closely resemble infochimps)
[2012-03-31 12:14:00 -0400] BryanWB_: zts, nope
[2012-03-31 12:14:16 -0400] BryanWB_: and u r right, it isnt very usable unless u r on aws and use ubuntu
[2012-03-31 12:14:48 -0400] BryanWB_: but i have been  slowly pulling chunks out and making them work for my env, witness the ark resource
[2012-03-31 12:18:28 -0400] zts: *nods*
[2012-03-31 12:18:45 -0400] zts: ah well.  I have next week off, which might give me time to look at it properly
[2012-03-31 12:19:04 -0400] BryanWB_: look at the their silverware ckbk, pure gold there
[2012-03-31 12:21:13 -0400] zts: yeah, the functionality that claims to present is what I'm primarily interested in
[2012-03-31 12:22:33 -0400] zts: https://github.com/infochimps-labs/ironfan/wiki/style_guide is also good
[2012-03-31 12:23:16 -0400] BryanWB_: u mean announce and discover ? those are in silverware/libraries
[2012-03-31 12:26:23 -0400] zts: indeed.  What is missing (or what I haven't found) is a concise example of how they look in action.  The readme directs the reader to ironfan-homebase to see silverware in use, but it's huge
[2012-03-31 12:27:08 -0400] zts: but perhaps given an hour or so to look into it, that will turn out to show me exactly what I'm looking for.  If so, I'll write up what I find for other folks coming at it from my perspective
[2012-03-31 17:10:42 -0400] miah: hi
[2012-03-31 17:21:42 -0400] hoover_damm: silverware interesting
[2012-03-31 17:21:52 -0400] hoover_damm: infochimps seem to produce a lot of different thoughts
[2012-03-31 17:21:53 -0400] hoover_damm: which is good
[2012-03-31 17:50:14 -0400] jarrad: oi, I'm looking for some help adding methods to my recipe that will be accessible to templates
[2012-03-31 18:05:43 -0400] eamelink: I'm trying to use the SCM resource with Git, to pull something from Github. I've setup an ssh-wrapper script in /tmp/ssh-wrapper which references the identity file, and set the ssh_wrapper attribute to the path to the file.
[2012-03-31 18:06:39 -0400] eamelink: Now, it fails, with output: Permission denied (publickey). (and some more)
[2012-03-31 18:07:13 -0400] eamelink: The weird thing is, if I manually set GIT_SSH env variable to the ssh wrapper, and execute the same command as Chef says it executes, it works fine.
[2012-03-31 18:07:59 -0400] eamelink: On the other hand, if I change the path of the ssh_wrapper attribute to something non-existent, the error becomes different and refers to the missing ssh wrapper. So it is picked up.
[2012-03-31 18:08:14 -0400] eamelink: Any hints on how to continue debugging?
[2012-03-31 18:10:25 -0400] jarrad: @eamelink - are you on *nix or windows?
[2012-03-31 18:10:33 -0400] eamelink: Ubuntu 10.04
[2012-03-31 18:10:48 -0400] jarrad: have you followed githubs ssh help page?
[2012-03-31 18:11:31 -0400] jarrad: usually, the easiest way is to add the rsa/dsa key you generated for github to your key ring
[2012-03-31 18:11:46 -0400] jarrad: or to use the ~/.ssh/config file to tell ssh where your key lives
[2012-03-31 18:12:01 -0400] eamelink: Thanks, the github ssh page has some nice hints
[2012-03-31 18:13:08 -0400] eamelink: I've now added -vT to the ssh command, and this is the relevant output:
[2012-03-31 18:13:10 -0400] eamelink: debug1: Trying private key: /tmp/id_rsa
[2012-03-31 18:13:10 -0400] eamelink: debug1: read_passphrase: can't open /dev/tty: No such device or address
[2012-03-31 18:13:10 -0400] eamelink: debug1: No more authentication methods to try.
[2012-03-31 18:13:39 -0400] eamelink: Interestingly enough, this key has no passphrase
[2012-03-31 18:14:06 -0400] jarrad: ssh will default to prompting you for a password to the server if all know keys fail
[2012-03-31 18:14:11 -0400] jarrad: known*
[2012-03-31 18:15:07 -0400] eamelink: Yes, but this is different
[2012-03-31 18:15:20 -0400] eamelink: This is really trying to read the passphrase for a key
[2012-03-31 18:16:01 -0400] jarrad: have you tried to ssh directly to github
[2012-03-31 18:16:35 -0400] eamelink: Yes, that works fine
[2012-03-31 18:16:49 -0400] eamelink: Actually, executing the exact same command as chef works fine.
[2012-03-31 18:16:56 -0400] eamelink: So it's the missing tty
[2012-03-31 18:17:07 -0400] eamelink: But after consulting the SSH man page, it appears -f may solve this.
[2012-03-31 18:18:21 -0400] eamelink: Nope...
[2012-03-31 18:19:07 -0400] jarrad: check the permissions on the key?
[2012-03-31 18:19:21 -0400] jarrad: why are you trying to use a ssh wrapper script?
[2012-03-31 18:22:18 -0400] eamelink: Well, it's the way to pass a specific identity file to git if you don't want to install the identity file in the default location.
[2012-03-31 18:23:58 -0400] jarrad: have you ever used the .ssh/config file?
[2012-03-31 18:25:14 -0400] eamelink: jarrad: Yes, I use one on my workstation :)
[2012-03-31 18:26:20 -0400] jarrad: @eamelink: OK, i've exhausted my ssh knowledge :)
[2012-03-31 18:26:31 -0400] eamelink: Thanks, appreciate your help.
[2012-03-31 18:26:41 -0400] eamelink: At least the cause has been identified.
[2012-03-31 18:26:46 -0400] eamelink: Still looking for the nicest solution though.
[2012-03-31 18:26:55 -0400] jarrad: post back if you find something
[2012-03-31 18:28:23 -0400] eamelink: Sure
[2012-03-31 18:50:47 -0400] lflux: ohai
[2012-03-31 18:51:06 -0400] lflux: where should I start looking if solr is giving me Java stack traces when running knife ssh
[2012-03-31 18:53:47 -0400] lflux: Errors in https://gist.github.com/2267522
[2012-03-31 19:05:41 -0400] jkyle_: when opening an encrypted data bag attribute in my recipe I'm getting the following: OpenSSL::Cipher::CipherError: wrong final block length
[2012-03-31 19:05:45 -0400] jkyle_: what might that indicate?
[2012-03-31 19:07:36 -0400] jkyle: oops, I got it
[2012-03-31 19:39:21 -0400] lflux: also how do I get chef-solr to log to syslog
[2012-03-31 19:59:01 -0400] dikim33: hi, I have tried to install  chef-server via ruby gem but mine seems to keep failing.
[2012-03-31 19:59:04 -0400] dikim33: http://www.pastebin.ca/2134345
[2012-03-31 19:59:25 -0400] dikim33: Is there any way to look into how it fails?
[2012-03-31 19:59:44 -0400] dikim33: There is no log message of the failure. :-(
[2012-03-31 20:06:51 -0400] dikim33: Anyone please help me? any comments about my problem?
[2012-03-31 20:39:57 -0400] erratic: can I say ohai chefs when I join too
[2012-03-31 20:40:07 -0400] erratic: or is that like a token ssd7 thing
[2012-03-31 20:45:14 -0400] dikim33: hello, anyone can help me with my problem?
[2012-03-31 20:45:27 -0400] erratic: ohai dikim33
[2012-03-31 20:45:44 -0400] dikim33: erratic: hi,
[2012-03-31 20:46:37 -0400] dikim33: erratic: any comments about my problem?
[2012-03-31 20:47:37 -0400] erratic: I didnt see it yet
[2012-03-31 20:49:51 -0400] Kwanasolis: dikim33: whats the log file say?
[2012-03-31 20:50:06 -0400] Kwanasolis: likely you don't have all the needed resources running
[2012-03-31 20:50:22 -0400] dikim33: what log file are you talking about Kwanasolis ?
[2012-03-31 20:50:29 -0400] Kwanasolis: the one on the command line?
[2012-03-31 20:50:32 -0400] Kwanasolis: after the -L ?
[2012-03-31 20:51:01 -0400] dikim33: "/var/log/chef/server.log" does not even exist.
[2012-03-31 20:51:40 -0400] Kwanasolis: then its failing really early in the boot, are you running with the right user?
[2012-03-31 20:51:56 -0400] Kwanasolis: I forget if server needs root or if you can uid-isolate it
[2012-03-31 20:51:56 -0400] dikim33: Kwanasolis: I was running it as a root.
[2012-03-31 20:52:20 -0400] Kwanasolis: right,m but switching it to -u chef and -g chef
[2012-03-31 20:52:36 -0400] Kwanasolis: so its actually running as chef:chef, which means the chef user needs perms to /etc/chef/server.rb /var/log/chef and /var/run/chef
[2012-03-31 20:52:38 -0400] Kwanasolis: or it'll fail
[2012-03-31 20:53:15 -0400] dikim33: OK, let me see how their permissions are setup.
[2012-03-31 20:53:42 -0400] Kwanasolis: by default not to let users write to those dirs
[2012-03-31 20:55:03 -0400] dikim33: Kwanasolis: it seems that they have the right permission : http://www.pastebin.ca/2134353
[2012-03-31 20:55:44 -0400] Kwanasolis: wow, didn't expect that tbh
[2012-03-31 20:55:50 -0400] Kwanasolis: :)
[2012-03-31 20:56:19 -0400] Kwanasolis: does 'ps aux |grep 13094' show anything?
[2012-03-31 20:57:11 -0400] dikim33: Kwanasolis: no processes. :-(
[2012-03-31 20:57:29 -0400] Kwanasolis: ok, welll I was checking to see if it was maybe already running how bout grep chef?
[2012-03-31 20:58:13 -0400] Kwanasolis: if yuor sure their is no log file, I'd look at basic execution errors, cause it spins up the logs early
[2012-03-31 20:58:22 -0400] dikim33: Kwanasolis: http://www.pastebin.ca/2134354
[2012-03-31 20:58:25 -0400] Kwanasolis: can't you do -l debug?
[2012-03-31 20:58:30 -0400] Kwanasolis: or is that just the client?
[2012-03-31 20:58:39 -0400] dikim33: Do you think that rabbitmq affected this problem?
[2012-03-31 20:59:10 -0400] Kwanasolis: it needs several things working for sure, have you verified that's all running?
[2012-03-31 20:59:16 -0400] dikim33: Kwanasolis: I was trying to setup a server.
[2012-03-31 20:59:18 -0400] Kwanasolis: I don't have the list in front of me, but its rabbitmq, chef-solr
[2012-03-31 20:59:39 -0400] Kwanasolis: dikim33: do you specifically need the server?
[2012-03-31 21:00:06 -0400] Kwanasolis: you can play with chef via hosted chef or chef solo without needing the server, I use both myself (different issues for each)
[2012-03-31 21:00:08 -0400] dikim33: Right.. wouldn't it invoke them automatically if they are not running yet? Kwanasolis
[2012-03-31 21:00:16 -0400] Kwanasolis: nope.
[2012-03-31 21:00:36 -0400] Kwanasolis: you have to invoke them prior to running chef-server, or at least I did but I built everything from the ground up
[2012-03-31 21:00:57 -0400] Kwanasolis: there are three ways to install server, I intentionally picked the hardest, your milage may vary
[2012-03-31 21:01:22 -0400] dikim33: Kwanasolis: No not really need to have server now but I am not sure why it is so difficult to set it up.
[2012-03-31 21:01:35 -0400] Kwanasolis: cause it takes a lot to run it
[2012-03-31 21:01:51 -0400] dikim33: Kwanasolis: what do you mean?
[2012-03-31 21:01:51 -0400] jkyle: server was pretty easy for me to set up, honestly
[2012-03-31 21:02:00 -0400] Kwanasolis: they didn't re-invent the wheel, so the messaging system is handled by rabbitmq, the search engine is solr
[2012-03-31 21:02:02 -0400] jkyle: pretty much worked out th ebox
[2012-03-31 21:02:09 -0400] dikim33: jkyle: can you share me with your how-to?
[2012-03-31 21:02:09 -0400] Kwanasolis: jkyle: what route did you use?
[2012-03-31 21:02:18 -0400] jkyle: we wrote some scripts
[2012-03-31 21:02:20 -0400] jkyle: sec
[2012-03-31 21:02:32 -0400] Kwanasolis: I didn't really have an issue either, took longer to get solr up then anything
[2012-03-31 21:02:41 -0400] Kwanasolis: had never really messed with some of those packages
[2012-03-31 21:03:30 -0400] dikim33: Kwanasolis: I understand it but  it is just software that we want to play with.
[2012-03-31 21:03:49 -0400] dikim33: I do not want to tweak whole the errors by myself.
[2012-03-31 21:04:23 -0400] dikim33: It should be ready to be used when it is released at least, right?
[2012-03-31 21:05:09 -0400] Kwanasolis: well my honest thought on that is its not 1.0
[2012-03-31 21:05:52 -0400] dikim33: Kwanasolis: I do not understand your last comment
[2012-03-31 21:05:58 -0400] Kwanasolis: and fairly new, so to expect it to work instantly might be asking a bit much.  Beyond, it took me 3 hours to setup the entire architecture (including os) for chef-server
[2012-03-31 21:06:02 -0400] jkyle: sorry, script's been tagged as undistributable. but the gist of it is, installed packages via gems, ran this bootstrap: chef-solo -c /etc/chef/solo.rb -j /etc/chef/server.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz
[2012-03-31 21:06:15 -0400] jkyle: after configuring the /etc/chef/solo.rb
[2012-03-31 21:06:22 -0400] Kwanasolis: ok dikim33, he did the chef-solo bootstrap
[2012-03-31 21:06:22 -0400] dikim33: jkyle:
[2012-03-31 21:06:29 -0400] dikim33: that's exactly what I doing.
[2012-03-31 21:06:38 -0400] Kwanasolis: I did the build everything by hand route, I can't really help, sorry
[2012-03-31 21:06:54 -0400] dikim33: Kwanasolis: thanks for your comment.
[2012-03-31 21:07:04 -0400] jkyle: we also created update-alternatives for default bin paths
[2012-03-31 21:07:35 -0400] dikim33: jkyle: http://wiki.opscode.com/display/ChefCN/Bootstrap+Chef+RubyGems+Installation
[2012-03-31 21:07:37 -0400] jkyle: other than that, no magic
[2012-03-31 21:07:43 -0400] dikim33: I followed this instruction.
[2012-03-31 21:08:13 -0400] dikim33: It said that it would install chef-server after running chef-solo
[2012-03-31 21:08:57 -0400] dikim33: Yes, chef-server is installed but I tried to run it with chef-server init script which is provided ubuntu chef package.
[2012-03-31 21:09:07 -0400] jkyle: what exactly is the symptom...there's always an indication of the failure somewhere
[2012-03-31 21:09:16 -0400] dikim33: jkyle: I got the fail message.
[2012-03-31 21:09:43 -0400] dikim33: http://www.pastebin.ca/2134345
[2012-03-31 21:09:57 -0400] dikim33: I can not see any error message or log. :-(
[2012-03-31 21:12:32 -0400] jkyle: run it in the foreground
[2012-03-31 21:12:36 -0400] jkyle: no -d
[2012-03-31 21:12:48 -0400] dikim33: jkyle: ok.
[2012-03-31 21:12:57 -0400] jkyle: probably get a stacktrace out of it
[2012-03-31 21:14:24 -0400] dikim33: jkyle: OK, I got some error message ..http://www.pastebin.ca/2134358
[2012-03-31 21:15:06 -0400] jkyle: looks like rabbitmq isn't running
[2012-03-31 21:15:25 -0400] jkyle: though, as Kwanasolis mentioned, is there a compelling reason to run chef-server or just a learning experience?
[2012-03-31 21:15:26 -0400] dikim33: jkyle: I think rabbitmq is installed by the ubuntu package.
[2012-03-31 21:15:37 -0400] jkyle: it is, but you should check if it's actually running
[2012-03-31 21:15:51 -0400] dikim33: Actually it is running.
[2012-03-31 21:15:56 -0400] jkyle: lsof -i | grep -i rabbit
[2012-03-31 21:16:04 -0400] Kwanasolis: I didn't build mine till I wanted to compare the speed of a server in my infra to hosted
[2012-03-31 21:16:32 -0400] jkyle: we didn't until we starting moving close to production and knew we'd need to keep material like architecture metadata on our own servers
[2012-03-31 21:16:56 -0400] Kwanasolis: jkyle: that is a piece of it, but I was curious about benchmarking as much as anything
[2012-03-31 21:16:59 -0400] dikim33: http://www.pastebin.ca/2134359
[2012-03-31 21:17:06 -0400] Kwanasolis: jkyle: hsoted huuuuuurts with http requests
[2012-03-31 21:17:18 -0400] jkyle: I'd start with what the stack recommends => Connection to rabbitmq refused. Check your rabbitmq configuration and chef's amqp* settings
[2012-03-31 21:17:33 -0400] jkyle: Kwanasolis: yeah, it's pretty slow
[2012-03-31 21:17:54 -0400] Kwanasolis: jkyle: well it doesn't do it concurrently, and it doesn't keep the socket open (from what it seems)
[2012-03-31 21:18:15 -0400] dikim33: sure jkyle
[2012-03-31 21:18:39 -0400] jkyle: I think you get more out of private chef...course for any non-trivial network, it's quite expensive
[2012-03-31 21:20:02 -0400] jkyle: dikim33: I'd probably pull up some rabbitmq docs and do some trivial queries against the server to test it's config, verify that with the chef config etc
[2012-03-31 21:20:22 -0400] dikim33: ok, jkyle
[2012-03-31 21:22:12 -0400] Kwanasolis: jkyle: oh yeah
[2012-03-31 21:22:35 -0400] jkyle: dikim33: but with hosted, it's free & easy and you can get to the fun part of chef'ing your servers a lot quicker :D
[2012-03-31 21:22:57 -0400] Kwanasolis: dikim33: I'd recommend hosted, if you havent' even run chef-client yet, you really don't need chef-server
[2012-03-31 21:23:34 -0400] dikim33: Kwanasolis: I think i played with chef-solo a little bit.
[2012-03-31 21:23:46 -0400] Kwanasolis: its not the same
[2012-03-31 21:23:59 -0400] dikim33: I was experimenting the chef features.
[2012-03-31 21:24:01 -0400] Kwanasolis: its getting to use knife, and pushing stuff around that will teach you about chef
[2012-03-31 21:24:12 -0400] dikim33: I thought I have to play with chef-sever too
[2012-03-31 21:24:20 -0400] erratic: setting up chef server was a big step for me
[2012-03-31 21:24:24 -0400] Kwanasolis: naw, hosted does more stuff then server in some ways
[2012-03-31 21:24:27 -0400] erratic: then breaking it
[2012-03-31 21:24:28 -0400] erratic: then fixing it
[2012-03-31 21:24:50 -0400] dikim33: Kwanasolis: that's what I have learned from the chef manual wiki page.
[2012-03-31 21:25:05 -0400] dikim33: I see.
[2012-03-31 21:25:08 -0400] dikim33: Kwanasolis: thanks.
[2012-03-31 21:25:11 -0400] Kwanasolis: dikim33: go try hosted, see what happens
[2012-03-31 21:25:39 -0400] Kwanasolis: they give you plenty of space to test/play for free
[2012-03-31 21:26:19 -0400] erratic: nodelings
[2012-03-31 21:26:23 -0400] dikim33: Kwanasolis: ok.
[2012-03-31 21:26:34 -0400] jkyle: dikim33: not saying you won't come back to setting up your server, but hosted will let you learn about the framework and if you evne like it or if it suits your needs
[2012-03-31 21:27:25 -0400] Kwanasolis: pretty much
[2012-03-31 21:28:16 -0400] dikim33: jkyle: Kwanasolis OK. thanks.
[2012-03-31 21:32:13 -0400] erratic: http://www.independent.co.uk/news/world/europe/chef-murdered-internet-date-and-ate-sausages-made-from-the-corpse-2347209.html
[2012-03-31 21:32:48 -0400] Kwanasolis: geezus
[2012-03-31 21:32:55 -0400] erratic: hahaha
[2012-03-31 21:39:08 -0400] erratic: anybody ever depoloyed and rsync server with chef?
[2012-03-31 21:40:38 -0400] erratic: hey check this out! http://www.chefguide101.com/tag/rsync-server/
[2012-03-31 21:45:18 -0400] erratic: but seriously
[2012-03-31 21:47:09 -0400] erratic: anybody ever used this ? https://github.com/bryanwb/chef-xinetd
[2012-03-31 21:47:26 -0400] erratic: nevermind no good to paige
[2012-03-31 21:47:42 -0400] erratic: ... why would those only work with ent linx
[2012-03-31 22:01:18 -0400] shuvo__: My run_list of ["recipe[chef-server::rubygems-install]" fails with "[Sat, 31 Mar 2012 13:53:53 -0700] FATAL: Errno::ENOENT: No such file or directory - /gems/chef-0.10.8/distro/debian/etc/init.d/chef-solr"
[2012-03-31 22:01:38 -0400] shuvo__: How do I go about overriding node['languages']['ruby']['gems_dir']
[2012-03-31 22:23:38 -0400] erratic: any seattle people wanna grab a beer?
[2012-03-31 22:23:45 -0400] jkyle: hm, seems that require "debug" doesn't work that well to debug recipes.
[2012-03-31 22:23:58 -0400] jkyle: erratic: I'll be in seattle for a hack-a-thon in april
[2012-03-31 22:24:02 -0400] jkyle: :P
[2012-03-31 22:24:15 -0400] erratic: ah cool
[2012-03-31 22:24:18 -0400] erratic: when?
[2012-03-31 22:24:23 -0400] erratic: my bday is the 11th
[2012-03-31 22:24:24 -0400] erratic: lol
[2012-03-31 22:24:53 -0400] jkyle: 14th
[2012-03-31 22:25:08 -0400] erratic: is it an at&t hackathon at f5 by any chance/
[2012-03-31 22:25:22 -0400] jkyle: yeah, think that's it
[2012-03-31 22:25:26 -0400] jkyle: I'll be presenting
[2012-03-31 22:25:30 -0400] erratic: I'm familiar with those
[2012-03-31 22:25:32 -0400] jkyle: rather than hacking
[2012-03-31 22:25:38 -0400] erratic: cool is it another android app one?
[2012-03-31 22:25:52 -0400] jkyle: it's on infrastructure as code
[2012-03-31 22:26:07 -0400] erratic: interesting
[2012-03-31 22:26:16 -0400] erratic: yeah I'm pretty new to chef myself
[2012-03-31 22:26:45 -0400] erratic: I'm more a security / PHP / Javascript engineer at my company but I've been tasked with server deployments for our production stuff and I chose chef
[2012-03-31 22:26:47 -0400] jkyle: I'll be giving a demo on how we automate the provisioning of resources and infrastructure
[2012-03-31 22:27:15 -0400] erratic: that sounds like a good one I'll add it to my calendar
[2012-03-31 22:28:15 -0400] jkyle: well, I hope it's interesting hehe
[2012-03-31 22:28:47 -0400] erratic: are you in sf?
[2012-03-31 22:29:09 -0400] jkyle: I'm in palo alto (my office is, anyway)
[2012-03-31 22:30:00 -0400] jkyle: anyone in the channel actual "get" shef? for the life of me I can't figure out how to set a breakpoint and execute a run_list
[2012-03-31 22:31:44 -0400] erratic: how would you set a breakpoint?
[2012-03-31 22:31:59 -0400] erratic: like what are you using to do that I'm curious
[2012-03-31 22:32:57 -0400] Kwanasolis: jkyle: I've never tried to use it like that, have you heard of pry?
[2012-03-31 22:33:21 -0400] Kwanasolis: require 'pry';binding.pry;   works like a champ if you want to debug interactively
[2012-03-31 22:33:24 -0400] jkyle: Kwanasolis: I've heard of it as an irb alternative (that I use). How would it help here?
[2012-03-31 22:33:47 -0400] Kwanasolis: it has to seen to be believed, in the case of chef it lets you look at the class's and locals, it basically assumes the role of self
[2012-03-31 22:33:50 -0400] jkyle: erratic: well, I'm trying to "require 'debug'" which breaks at the require
[2012-03-31 22:34:08 -0400] jkyle: but seems a lot of variables don't get set and typing "c[ontinue]" just throws a stack
[2012-03-31 22:34:27 -0400] jkyle: Kwanasolis: I'll give it a shot
[2012-03-31 22:34:40 -0400] Kwanasolis: jkyle: try pry, just at whatever point you want to break into the code add 'require 'pry';binding.pry'
[2012-03-31 22:34:47 -0400] Kwanasolis: the binding.pry ! pry, is important
[2012-03-31 22:35:28 -0400] shuvo__: My run_list of ["recipe[chef-server::rubygems-install]" fails with "[Sat, 31 Mar 2012 13:53:53 -0700] FATAL: Errno::ENOENT: No such file or directory - /gems/chef-0.10.8/distro/debian/etc/init.d/chef-solr". How do I go about overriding node['languages']['ruby']['gems_dir']. The run_list is in chef.json executed like so: "sudo chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz"
[2012-03-31 22:37:08 -0400] jkyle: Kwanasolis: ah, that's already much nicer
[2012-03-31 22:37:32 -0400] Kwanasolis: :)
[2012-03-31 22:37:48 -0400] Kwanasolis: it actually does a TON more then just that, I'd recommend going over the short intro doc
[2012-03-31 22:38:00 -0400] Kwanasolis: it'll show you how to do show-method, what 'ls' does (try it, type ls, I dare you.)
[2012-03-31 22:38:27 -0400] jkyle: Kwanasolis: how do you step?
[2012-03-31 22:38:39 -0400] Kwanasolis: that I don't know, I'm usually breaking in to see the state
[2012-03-31 22:38:53 -0400] Kwanasolis: not to debug the steps, I just insert it at the exact spot I want to see the state of things, look around, and go back to working
[2012-03-31 22:39:37 -0400] Kwanasolis: ls / cd work, and most of my debugging consists of finding out how object X interacts with block Y more then the traditional stuff
[2012-03-31 22:39:40 -0400] erikh: shuvo__: you need to set your gems dir.
[2012-03-31 22:39:42 -0400] erikh: sec.
[2012-03-31 22:40:08 -0400] shuvo__: erikh, correct. Do I set it from the shell before invoking chef-solo
[2012-03-31 22:40:19 -0400] shuvo__: or could I set it from the json?
[2012-03-31 22:40:34 -0400] shuvo__: I will be more comfortable setting it from the json
[2012-03-31 22:40:53 -0400] erikh: you want to set it in your bootstrap.json
[2012-03-31 22:40:56 -0400] erikh: sec, prepping a gist
[2012-03-31 22:41:09 -0400] erikh: https://gist.github.com/7298a5f9428da39311e9
[2012-03-31 22:41:25 -0400] erikh: well in your case, chef.json
[2012-03-31 22:41:26 -0400] shuvo__: erikh, so nice of you
[2012-03-31 22:41:28 -0400] erikh: enjoy
[2012-03-31 22:41:40 -0400] erikh: be sure to get the gems_dir right. it's a bit tricky.
[2012-03-31 22:41:54 -0400] erikh: basically it's concatenated to the path generating the error above.
[2012-03-31 22:42:02 -0400] shuvo__: correct
[2012-03-31 22:42:16 -0400] erikh: I'm not entirely certain the way they distribute their init scripts (bundled in gems) is really the best approach
[2012-03-31 22:42:17 -0400] shuvo__: I read that at https://github.com/opscode/cookbooks/blob/master/chef-server/recipes/rubygems-install.rb#L202
[2012-03-31 22:42:21 -0400] erikh: yep.
[2012-03-31 22:42:57 -0400] shuvo__: I was wondering: instead of writing al this json in chef.json, could I write some ruby code and have chef-solo use that instead?
[2012-03-31 22:43:08 -0400] shuvo__: i.e, instead of "sudo chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz"
[2012-03-31 22:43:14 -0400] erikh: you could, but json just gets generated from it.
[2012-03-31 22:43:16 -0400] shuvo__: I would ike to do something like
[2012-03-31 22:43:34 -0400] shuvo__: "sudo chef-solo -c /etc/chef/solo.rb MY_AWSOME_RB_SCRIPT -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz"
[2012-03-31 22:43:36 -0400] Kwanasolis: jkyle: if you do look it up, share, I'll need to know at some point
[2012-03-31 22:43:52 -0400] erikh: shuvo__: maybe, I know knife has evaluation commands. I can't say for sure.l
[2012-03-31 22:44:04 -0400] erikh: you could always write some ruby that emits json and then passes that onto the script
[2012-03-31 22:44:12 -0400] erikh: I do that with my bootstrap templates (but with bourne shell)
[2012-03-31 22:44:13 -0400] shuvo__: can do, yes
[2012-03-31 22:44:27 -0400] erikh: check out RbConfig if you want to do it that way
[2012-03-31 22:44:39 -0400] erikh: require 'rbconfig'; RbConfig["some_configuration_var"]
[2012-03-31 22:44:43 -0400] erikh: also the Gem module.
[2012-03-31 22:44:46 -0400] erikh: Gem.ruby, etc.
[2012-03-31 22:45:13 -0400] erikh: Gem.ruby is really just a high-level abstraction on RbConfig.
[2012-03-31 22:45:19 -0400] Kwanasolis: shuvo__: you can set a var before you run something with VARNAME=something command string goes here
[2012-03-31 22:45:24 -0400] erikh: anyhow, I've had a bit too much coffee. :) back in a bit.
[2012-03-31 22:45:27 -0400] Kwanasolis: that will set the var (gem) to whatever and then run the command
[2012-03-31 22:50:40 -0400] shuvo__: Kwanasolis, thanks for mentioning pry. Looks useful to a rb newbie like me! I didn't get  the part about setting the VAR bit. Are you saying to set the path from bash and then running the chef command? like "sudo GEM_PATH=<path> && chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz"
[2012-03-31 22:53:09 -0400] Kwanasolis: ok
[2012-03-31 22:53:11 -0400] Kwanasolis: so do this
[2012-03-31 22:53:21 -0400] Kwanasolis: err, hold on, I'd rather not spam, let me make a pastie
[2012-03-31 22:55:44 -0400] jkyle: Kwanasolis: you have ot install pry_debu, then do require 'pry_debug'; PryDebug.start(false)
[2012-03-31 22:56:18 -0400] jkyle: but it skips right by my breakpoints. must be something odd with the way chef loads up modules or something. It breaks in the ohai module, long before the actual cookbook is loaded
[2012-03-31 22:56:45 -0400] jkyle: then skips an explicitly set breakpoint
[2012-03-31 22:56:47 -0400] Kwanasolis: jkyle: that could be, chef is very dynamic and debuggers tend to try to be dynamic as well.  its one of the reasons I like pry so much, because it tends to insert itself well into a running stack
[2012-03-31 22:57:45 -0400] jkyle: the weirdest thing is, I can manually run the ocmmand it says is throwing an exceptin with the same parameters whil ein the break point and it succeeds
[2012-03-31 22:58:03 -0400] Kwanasolis: are you running into namespace collisions?
[2012-03-31 22:58:15 -0400] Kwanasolis: like @current_resource doesn't work really as intended if you call a resource from inside a provider
[2012-03-31 22:59:17 -0400] Kwanasolis: shuvo__: without the first &&, just GEM_PATH=path chef-solo
[2012-03-31 23:00:33 -0400] shuvo__: Kwanasolis, is that what you intended to say with the pastie/
[2012-03-31 23:00:38 -0400] shuvo__: ?
[2012-03-31 23:00:42 -0400] jkyle: it's a library which provides a method which calls a resource
[2012-03-31 23:00:48 -0400] Kwanasolis: yah
[2012-03-31 23:00:53 -0400] shuvo__: ah
[2012-03-31 23:01:08 -0400] Kwanasolis: saw you basically had it, wasn't finding the faq I wanted
[2012-03-31 23:01:35 -0400] shuvo__: whcih faq?
[2012-03-31 23:02:03 -0400] Kwanasolis: the one I can't find, on shell vars, not chef
[2012-03-31 23:02:33 -0400] jkyle: it also looks like "require 'debug'" is called at evaluation and not at run (or something). as it's triggerd on an include and not when the action :action is called
[2012-03-31 23:03:32 -0400] Kwanasolis: jkyle: ahh that could be, is your code block actually running at compile time vs execute?
[2012-03-31 23:03:40 -0400] shuvo__: Kwanasolis, I guess it's easier to fetch the gem path from within a ruby script and then dump it to a .json. ruby can have multiple gem paths and chef will be only on one of them
[2012-03-31 23:03:53 -0400] shuvo__: what do you think?
[2012-03-31 23:04:00 -0400] Kwanasolis: shuvo__: *shrug* major reason I went with arch is it runs the newest ruby
[2012-03-31 23:04:09 -0400] Kwanasolis: and I don't have to deal with what your working through right now :)
[2012-03-31 23:04:14 -0400] shuvo__: ha ha
[2012-03-31 23:04:18 -0400] Kwanasolis: I was only commenting on how to set a shell var
[2012-03-31 23:04:24 -0400] shuvo__: thank you
[2012-03-31 23:04:35 -0400] Kwanasolis: your welcome, sorry I can't help more
[2012-03-31 23:04:59 -0400] shuvo__: it's good. I got a buch of stuff off you! thanks :-)
[2012-03-31 23:05:09 -0400] Kwanasolis: lol
[2012-03-31 23:05:57 -0400] Kwanasolis: jkyle: if your not sure, put in a line like Chef::Log::info 'I'm some code!' and then run chef-client, you'll figure out what part of the phase its executing at
[2012-03-31 23:11:37 -0400] jkyle: Kwanasolis: yeah, was trying tracers. equally weird behavior
[2012-03-31 23:12:39 -0400] Kwanasolis: tracers?
[2012-03-31 23:13:53 -0400] Kwanasolis: is there a way to exit a provider without causing a failure?
[2012-03-31 23:15:17 -0400] jkyle: yeah, log tracers. "print 'got here....'"
[2012-03-31 23:15:41 -0400] Kwanasolis: ah, well chef throws away stdout
[2012-03-31 23:16:40 -0400] jkyle: referring to the concept not the implementation
[2012-03-31 23:17:01 -0400] jkyle: print, log, puts, echo, cout <<, whatever. tracer just "marks" where you our in the output
[2012-03-31 23:17:32 -0400] Kwanasolis: yup, I do it all the time
[2012-03-31 23:17:36 -0400] Kwanasolis: just never heard it called a tracer
[2012-03-31 23:19:22 -0400] jkyle: one oddity that's blocking me is that the shef -z doesn't have the same node attributes as the run time. I can log "#{node['someattr']}" and it outputs the expected value, same attr in shef -z recipe scope is nil >.<
[2012-03-31 23:20:25 -0400] ssd7: jkyle: don't bave backsroll but is the attr set in a role or environment?
[2012-03-31 23:20:30 -0400] ssd7: s/bave/have/
[2012-03-31 23:26:31 -0400] Kwanasolis: so I wrote a provider that requires a package (s3fs), where is the logical place to put the package 's3fs' stuff?
[2012-03-31 23:26:46 -0400] Kwanasolis: a seperate recipe that the user has to run? or is there somewhere automated I can put it that it'll get installed?
[2012-03-31 23:28:40 -0400] shuvo__: what about a /lib unless it requires to/could also be run by a user
[2012-03-31 23:29:12 -0400] Kwanasolis: hadn't thought about that, could work
[2012-03-31 23:29:27 -0400] Kwanasolis: I just don't want it to try ti install packages every time the provider is called
[2012-03-31 23:31:52 -0400] shuvo__: is the package a executable/script of some kind?  you could use 'cookbook_fiile' I guess?
[2012-03-31 23:32:47 -0400] Kwanasolis: the lib is the best bet, or a stand alone recipe I run befor eI need it, for now that's what I'm doing
[2012-03-31 23:32:52 -0400] Kwanasolis: I'll re-visit the issue when I have more time
[2012-03-31 23:33:16 -0400] shuvo__: are you sharing your work on a open repo like github by chance?
[2012-03-31 23:33:55 -0400] Kwanasolis: eventually I'll push out the s3fs provider stuff, but no, most of this work is closed
[2012-03-31 23:34:10 -0400] Kwanasolis: I commit bakc what I can
[2012-03-31 23:34:23 -0400] shuvo__: cool. do you have a repo I could watch?
[2012-03-31 23:34:32 -0400] Kwanasolis: no?
[2012-03-31 23:34:44 -0400] Kwanasolis: http://github.com/erniebrodeur is where I'm at
[2012-03-31 23:34:48 -0400] Kwanasolis: or how ever you get to a user
[2012-03-31 23:34:53 -0400] shuvo__: thanks!
[2012-03-31 23:35:24 -0400] shuvo__: I intend to put in some at https://github.com/subhobroto
[2012-03-31 23:35:26 -0400] shuvo__: ha ha
[2012-03-31 23:36:55 -0400] Kwanasolis: I should, this is almost ready to share
[2012-03-31 23:48:43 -0400] jkyle: I can't wait till our new revision cookbooks are ready to share
[2012-03-31 23:58:32 -0400] jkyle: when you do a: knife search node 'roles:somestr', does it match _any_ occurance of 'somestr' in the role.json content or is it matching the role's name?

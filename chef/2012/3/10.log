[2012-03-10 08:00:00 -0500] nicholasf: wtf? https://gist.github.com/5773a4d99e72b059405e
[2012-03-10 17:33:00 -0500] gchristensen: I've put several log lines in my recipe, uploaded, and have ensured it updates on the server, but when I run chef-client it doesn't output them: Chef::Log.info("Noted interest in a INFO master DB"); and Chef::Log.warn("Noted interest in a WARN master DB");. they are not in any if statement or anything. am I formatting them weird or anything? the log level is set to debug, and I see messages from before and after tehse statements
[2012-03-10 19:31:00 -0500] JasonBox: ugh, can't get through all my chef list mail; been stuck at about 50 unread forever
[2012-03-10 19:32:00 -0500] JasonBox: stop posting! ;)
[2012-03-10 19:32:00 -0500] hoover_damm: I can't keep up
[2012-03-10 19:32:00 -0500] hoover_damm: so I don't
[2012-03-10 19:32:00 -0500] hoover_damm: I check it out and see if there's anything appealing
[2012-03-10 19:32:00 -0500] JasonBox: Yeah, but it's full of gems
[2012-03-10 19:32:00 -0500] hoover_damm: so can be irc
[2012-03-10 19:34:00 -0500] hoover_damm: and yes there's some good questions
[2012-03-10 19:34:00 -0500] hoover_damm: and some good answers
[2012-03-10 19:35:00 -0500] JasonBox: Indeed
[2012-03-10 19:36:00 -0500] hoover_damm: but I tend to question everything at this moment in my life
[2012-03-10 19:36:00 -0500] hoover_damm: so it's much better for me to evaluate cookbooks and write my own atm
[2012-03-10 19:36:00 -0500] JasonBox: I've borrowed some community cookbooks
[2012-03-10 19:36:00 -0500] hoover_damm: so I can re-enforce and build back up the knowledge that got pushed aside for oldchef
[2012-03-10 19:37:00 -0500] hoover_damm: oh I wrote a graphite cookbook, updated a collectd cookbook
[2012-03-10 19:37:00 -0500] JasonBox: But most of my stuff is domain specific anywya
[2012-03-10 19:37:00 -0500] hoover_damm: this week
[2012-03-10 19:37:00 -0500] JasonBox: hrm, I want to start using collectd
[2012-03-10 19:37:00 -0500] JasonBox: On massive todo list rofl
[2012-03-10 19:37:00 -0500] hoover_damm: yeah I wrote some weird hackish collectd recipe
[2012-03-10 19:38:00 -0500] hoover_damm: https://github.com/damm/chef-collectd/tree/edge
[2012-03-10 19:38:00 -0500] hoover_damm: basically, collectd writes to graphite.  Has Redis (C) plugin and HAProxy (C) plugin
[2012-03-10 19:38:00 -0500] hoover_damm: need to update the C Plugin for Redis unfortunately as one of my clients wants features in it that doesn't exist yet
[2012-03-10 19:38:00 -0500] hoover_damm: so gotta code it
[2012-03-10 19:39:00 -0500] JasonBox: ah
[2012-03-10 19:39:00 -0500] JasonBox: lol at commit message
[2012-03-10 19:39:00 -0500] hoover_damm: toss it in with https://github.com/damm/graphite
[2012-03-10 19:39:00 -0500] hoover_damm: to provide the graphite backend
[2012-03-10 19:39:00 -0500] hoover_damm: one of the hardest parts for me with graphite (and all the statsd usage) was the storage-schema being flexible
[2012-03-10 19:40:00 -0500] hoover_damm: I wanted to define my retention in graphite via chef
[2012-03-10 19:40:00 -0500] hoover_damm: it makes sense for collectd, it makes sense for statsd
[2012-03-10 19:40:00 -0500] hoover_damm: and I wish more recipes were overrideable easily via roles or whatnot
[2012-03-10 19:41:00 -0500] JasonBox: hrm
[2012-03-10 19:41:00 -0500] hoover_damm: when I go hunting for cookbooks to use, I find that I have to modify bits
[2012-03-10 19:41:00 -0500] hoover_damm: when I feel that honestly, it should be easier to override without modifying the cookbooks
[2012-03-10 19:41:00 -0500] hoover_damm: right
[2012-03-10 19:41:00 -0500] hoover_damm: don't you hate that?
[2012-03-10 19:41:00 -0500] JasonBox: heh
[2012-03-10 19:41:00 -0500] JasonBox: Well in my case I really should have filed bugs upstream, but they're on my todo
[2012-03-10 19:41:00 -0500] hoover_damm: if I was going to use Librarian in the proper path
[2012-03-10 19:41:00 -0500] hoover_damm: it wouldn't have worked well for me
[2012-03-10 19:42:00 -0500] hoover_damm: even the redis recipes I had to modify because not a single damned one set vm.overcommit_memory => 1
[2012-03-10 19:42:00 -0500] hoover_damm: which tells me a lot of users fail with redis unneccesarily
[2012-03-10 19:42:00 -0500] JasonBox: heh
[2012-03-10 19:43:00 -0500] JasonBox: Oh, it likes overcommit?
[2012-03-10 19:43:00 -0500] hoover_damm: JasonBox, most of my stuff is too random to be upstream worthy
[2012-03-10 19:43:00 -0500] hoover_damm: yes
[2012-03-10 19:43:00 -0500] hoover_damm: if you don't do overcommit to 1... your bgsave's actually take 2x the resources
[2012-03-10 19:43:00 -0500] hoover_damm: redis tries to copy the pointer in C, with that set to 1... it's an atomic operation that is :)
[2012-03-10 19:43:00 -0500] hoover_damm: win
[2012-03-10 19:43:00 -0500] JasonBox: Yeah, I want to do up a cookbook for ferm iptables
[2012-03-10 19:43:00 -0500] hoover_damm: with that set to 0
[2012-03-10 19:43:00 -0500] hoover_damm: it has to create a whole new 6gig process
[2012-03-10 19:43:00 -0500] hoover_damm: and swap out
[2012-03-10 19:43:00 -0500] JasonBox: Oh nasty
[2012-03-10 19:44:00 -0500] hoover_damm: now you understand the stupidity
[2012-03-10 19:44:00 -0500] hoover_damm: because if you use this for persistance and you care about your data
[2012-03-10 19:44:00 -0500] hoover_damm: your bgsave's start to take hours
[2012-03-10 19:44:00 -0500] JasonBox: I guess the author didn't know how to configure redis properly
[2012-03-10 19:44:00 -0500] hoover_damm: your latency builds up on redis
[2012-03-10 19:44:00 -0500] hoover_damm: and eventually it just slows down and down
[2012-03-10 19:44:00 -0500] JasonBox: cool
[2012-03-10 19:45:00 -0500] hoover_damm: their bgsave's were taking 3 hours
[2012-03-10 19:45:00 -0500] hoover_damm: with overcommit it took only 60s
[2012-03-10 19:45:00 -0500] hoover_damm: on the same box
[2012-03-10 19:45:00 -0500] hoover_damm: it's the reason I wanted to remove redis from the db_master at engine yard
[2012-03-10 19:45:00 -0500] hoover_damm: we couldn't set over_commit to 1 without hurting mysql
[2012-03-10 19:45:00 -0500] hoover_damm: or postgresql
[2012-03-10 19:46:00 -0500] hoover_damm: but having it set to 0, meant if they used redis and mysql... they would only watch their resources clash
[2012-03-10 19:46:00 -0500] hoover_damm: and eventually crush each other
[2012-03-10 19:46:00 -0500] JasonBox: dedicated server ftw
[2012-03-10 19:46:00 -0500] hoover_damm: it's like watching 2 trains come at each other in real slow motion
[2012-03-10 19:46:00 -0500] hoover_damm: and causing a 18 car pileup
[2012-03-10 19:47:00 -0500] hoover_damm: and absolutely
[2012-03-10 19:47:00 -0500] hoover_damm: but when people spend money, they want to use their money to their best potential
[2012-03-10 19:47:00 -0500] hoover_damm: so rarely will they spin up a 8gig or 64gig instance to just host redis
[2012-03-10 19:47:00 -0500] hoover_damm: because all that cpu is lost? so why not just re-use what you have? :)
[2012-03-10 19:48:00 -0500] hoover_damm: it's taking the time and diligence to ensure that your stuff is up
[2012-03-10 19:48:00 -0500] hoover_damm: and it won't break easily
[2012-03-10 19:48:00 -0500] JasonBox: Yeah
[2012-03-10 19:49:00 -0500] hoover_damm: I've never considered it rocket science
[2012-03-10 19:49:00 -0500] hoover_damm: it was just the time and care to finish and polish your product
[2012-03-10 19:49:00 -0500] hoover_damm: unfortunately something Rubyists don't do well
[2012-03-10 19:50:00 -0500] JasonBox: Indeed
[2012-03-10 19:57:00 -0500] JasonBox: Oh sweet it uses ExtJS
[2012-03-10 19:57:00 -0500] JasonBox: +1
[2012-03-10 20:58:00 -0500] sivy: anyone got a "mysql users stored in encrypted data bags" recipe they like?
[2012-03-10 20:59:00 -0500] sivy: i found this one i may adapt: https://gist.github.com/769365 -- I don't need the users to be actual system users

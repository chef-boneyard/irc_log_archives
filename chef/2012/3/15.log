[2012-03-15 07:25:00 -0400] BryanWB: miah: i need to set up a software http load balancer today
[2012-03-15 07:25:00 -0400] BryanWB: miah: how much work is it to set that up w/ haproxy in some kind of high availability configuration?
[2012-03-15 07:50:00 -0400] miah: not too bad
[2012-03-15 07:51:00 -0400] miah: i had a working haproxy configuration in a hour. i've been managing it for a few months now and still learning quite a bit
[2012-03-15 07:54:00 -0400] BryanWB: miah: what about having two haproxy servers in some kind of high-availability setup? have u tried that?
[2012-03-15 07:54:00 -0400] BryanWB: either active-active or active-passive
[2012-03-15 07:54:00 -0400] miah: i have 4 haproxy servers running right now
[2012-03-15 07:54:00 -0400] miah: they are all active
[2012-03-15 07:54:00 -0400] BryanWB: wow!
[2012-03-15 07:55:00 -0400] miah: i havent really had an 'outage' that i didnt cause
[2012-03-15 07:55:00 -0400] BryanWB: active-active? they mirror each other?
[2012-03-15 07:55:00 -0400] miah: yes
[2012-03-15 07:55:00 -0400] miah: they all receive different traffic, but share stick-table data
[2012-03-15 08:03:00 -0400] BryanWB: miah: sorry to pester u w/ q's, do u use the opscode recipe?
[2012-03-15 08:04:00 -0400] miah: a highly modified one yes
[2012-03-15 08:05:00 -0400] miah: im about to start lwrp'ing it
[2012-03-15 08:06:00 -0400] BryanWB: awesome!
[2012-03-15 08:06:00 -0400] BryanWB: miah: have u written lwrps before? if not i have some good tips
[2012-03-15 08:06:00 -0400] miah: i have not
[2012-03-15 08:07:00 -0400] BryanWB: ok, _don't_ do    the    action :nothing,     run_action(:create)    pattern,  it fucks everything u
[2012-03-15 08:07:00 -0400] BryanWB: s/u/up
[2012-03-15 08:08:00 -0400] miah: k
[2012-03-15 08:10:00 -0400] miah: guh
[2012-03-15 08:10:00 -0400] miah: 1:10am. i suppose thats a good enough time for sleep
[2012-03-15 08:10:00 -0400] BryanWB: chain resources the infochimps way https://github.com/infochimps-labs/ironfan-pantry/blob/master/cookbooks/install_from/providers/release.rb
[2012-03-15 08:10:00 -0400] BryanWB: miah: good night!
[2012-03-15 08:10:00 -0400] BryanWB: tks for your help
[2012-03-15 08:12:00 -0400] miah: sure. anytime. =)
[2012-03-15 08:12:00 -0400] miah: i'd like to chat more, our schedules rarely line up though
[2012-03-15 08:17:00 -0400] helllen: helllo
[2012-03-15 08:18:00 -0400] helllen: does it exist a way to force chef-client check with chef-server sending a signal?
[2012-03-15 08:18:00 -0400] helllen: I have chef-client running as daemon
[2012-03-15 08:21:00 -0400] helllen: for example sending a SIGHUP
[2012-03-15 10:12:00 -0400] chollya: Hi! Is it okay, that 'knife status' and 'knife node list' show different number of nodes? knife status |wc -l gives me 67 and knife node list |wc -l gives me 80
[2012-03-15 10:12:00 -0400] chollya: 13 nodes is a way too big difference
[2012-03-15 11:35:00 -0400] zts: chollya: sounds like your search index is missing data
[2012-03-15 11:35:00 -0400] zts: chollya: try "knife index rebuild"
[2012-03-15 12:22:00 -0400] BryanWB: where do people store the values that pertain to their app in a particular environment, say dev,qa, prod (! chef_environment) , say the database to connect to, how much ram to use for heap space (jvm-specific), logging level, etc
[2012-03-15 12:22:00 -0400] BryanWB: i am planning to use a databag
[2012-03-15 12:33:00 -0400] nico: BryanWB: we use attributes (roles overriding) & databags
[2012-03-15 12:36:00 -0400] BryanWB: so u have a role for node in a given application enviroment?
[2012-03-15 12:37:00 -0400] BryanWB: so u have prod_myapp.rb for the production values?
[2012-03-15 12:39:00 -0400] nico: we don't use files, as we edit role directly
[2012-03-15 12:42:00 -0400] BryanWB: nico: u do knife role edit?
[2012-03-15 12:43:00 -0400] BryanWB: interesting, i think i will just use a role like u, i just need to set max jvm heap space for now
[2012-03-15 12:57:00 -0400] BryanWB: tks nico
[2012-03-15 13:01:00 -0400] eamelink: In my cookbook I currently have three recipes that are almost identical, they install three applications, but the applications are very similar.
[2012-03-15 13:01:00 -0400] eamelink: How can I change this to one 'generic' recipe, and calling that one parameterized three times or something?
[2012-03-15 13:03:00 -0400] eamelink: Ah, I guess I should still make a recipe per app, but have that one do not much more than get/set some variables, and then call include_recipe?
[2012-03-15 13:04:00 -0400] zts: eamelink: you'll probably want to look into Definitions http://wiki.opscode.com/display/chef/Definitions
[2012-03-15 13:04:00 -0400] zts: eamelink: include_recipe doesn't actually inline the contents of the recipe you're including, it just puts it into the run_list, so it still only gets "run" once
[2012-03-15 13:05:00 -0400] eamelink: I see
[2012-03-15 13:05:00 -0400] eamelink: Definitions looks promising, thanks :)
[2012-03-15 13:05:00 -0400] zts: np!
[2012-03-15 13:18:00 -0400] chollya: zts: well, i've rebuilt index and knife status shows nothing atm :)
[2012-03-15 13:19:00 -0400] chollya: zts: http://pastebin.com/index/XxRBecwP
[2012-03-15 13:20:00 -0400] zts: chollya: oh dear!  Well that's... new and different
[2012-03-15 13:21:00 -0400] zts: chollya: try running chef-client on one of your nodes, and see if it shows up after that?
[2012-03-15 13:21:00 -0400] chollya: zts: i'm using chef 0.10.8 on debian squeezem jfyi
[2012-03-15 13:22:00 -0400] chollya: zts: http://pastebin.com/BT4HeXmS nope, status still empty
[2012-03-15 13:23:00 -0400] zts: chollya: next thought would be to check that chef-expander is running and healthy on your chef server
[2012-03-15 13:23:00 -0400] zts: also try 'knife search node "*:*"' to see if you're getting anything back from search at all
[2012-03-15 13:26:00 -0400] drrk: hey i'm tryign to use mattray's knife-openstack plugin as described http://wiki.opscode.com/display/chef/OpenStack+Bootstrap+Fast+Start+Guide
[2012-03-15 13:26:00 -0400] drrk: but I get an error back salmissra:chef-repo kimball$ knife openstack image list
[2012-03-15 13:26:00 -0400] drrk: ERROR: Excon::Errors::BadRequest: Expected([200, 204]) <=> Actual(400 Bad Request) request => {:body=>"{\"passwordCredentials\":{\"username\":\"crowbarmoo\",\"password\":\"crowbar\"}}", :path=>"/v2.0/tokens", :expects=>[200, 204], :scheme=>"http", :ssl_verify_peer=>true, :connect_timeout=>60, :write_timeout=>60, :read_timeout=>60, :headers=>{"Content-Type"=>"application/json", "Content-Length"=>70, "Host"=>"172.16.16.81:5000"}, :port=>"5000", :host=>"172.16
[2012-03-15 13:26:00 -0400] drrk:  response > #<Excon::Response:0x1065f4fa18 @status=400, @headers={"Date"=>"Thu, 15 Mar 2012 13:46:14 GMT", "Content-Type"=>"application/json; charset=UTF-8", "Content-Length"=>"60"}, @body="{\"badRequest\": {\"message\": \"Expecting auth\", \"code\": \"400\"}}">
[2012-03-15 13:26:00 -0400] drrk: eeek sorry for the huge paste
[2012-03-15 13:27:00 -0400] drrk: ignore the usernaem of crowbarmoo I was trying to make itbreak differenrly
[2012-03-15 13:28:00 -0400] drrk: hmm, only 6.30am Pacific, maybe i'll come back later
[2012-03-15 13:34:00 -0400] chollya: zts: search returns nothing :(
[2012-03-15 13:38:00 -0400] zts: chollya: okay, take a look at chef-expander (which is the bit that takes updates from chef and pushes them into solr)
[2012-03-15 13:39:00 -0400] zts: chollya: I'm not sure exactly what to look for, but it usually ends up complaining somewhere when it's struggling
[2012-03-15 13:42:00 -0400] lusis: drrk: what version of openstack are you running?
[2012-03-15 13:42:00 -0400] chollya: zts: it looks started :) and the only records for today are "[Thu, 15 Mar 2012 15:20:41 +0200] INFO: Chef Expander 0.10.8 starting cluster with 1 nodes" and "[Thu, 15 Mar 2012 15:20:41 +0200] INFO: Starting cluster worker 1"
[2012-03-15 13:43:00 -0400] drrk: lusis: OpenStack Nova version: 2011.3 (2011.3-LOCALBRANCH:LOCALREVISION)
[2012-03-15 13:44:00 -0400] chollya: zts: Aha! on the early days the expander had more lines in log for startup, like 'INFO: Starting Consumers for vnodes 0-1023'
[2012-03-15 13:44:00 -0400] lusis: drrk:  I wonder what version mray tested against. That error sounds like a Keystone error
[2012-03-15 13:45:00 -0400] drrk: yeah I'm thinking a newer one
[2012-03-15 13:45:00 -0400] chollya: zts: i'm guessing expander have issues with rabbit
[2012-03-15 13:45:00 -0400] lusis: effing keystone
[2012-03-15 13:45:00 -0400] lusis: sigh
[2012-03-15 13:46:00 -0400] zts: chollya: that would be my theory too, although I'm out of suggestions :)
[2012-03-15 13:47:00 -0400] chollya: zts: Aha! i found it :) 'amqp_error,access_refused,"login refused for user 'chef'" is in the rabbtimq.log
[2012-03-15 13:47:00 -0400] chollya: do you know, how chef authenticates to the rabbitmq?
[2012-03-15 13:49:00 -0400] lusis: chollya: with a username and passwd
[2012-03-15 13:49:00 -0400] lusis: chollya: not sure I follow the question
[2012-03-15 13:50:00 -0400] lusis: look in server.rb and solr.rb
[2012-03-15 13:50:00 -0400] lusis: those are the credentials that it's trying to use
[2012-03-15 13:51:00 -0400] chollya: lusis: well, where the chef server and other components are store the login/password?
[2012-03-15 13:51:00 -0400] chollya: lusis: thank you :)
[2012-03-15 13:51:00 -0400] lusis: and the vhost as well
[2012-03-15 13:59:00 -0400] chollya: zts: lusis Everything works much bteer now. Thank you!
[2012-03-15 14:01:00 -0400] rgould: for those using rails and the asset pipeline, how did you handle precompiling? Or did you just do it locally and then commit to the repository?
[2012-03-15 14:10:00 -0400] drrk: lusis: It was sing the wrong version of the fog gem I think
[2012-03-15 14:20:00 -0400] drrk: yeah, that dort of fixed it, jsut showed my openstack is not setup right though
[2012-03-15 14:20:00 -0400] drrk: easy to fix that
[2012-03-15 14:21:00 -0400] lusis: yeah openstack is a cluster
[2012-03-15 14:22:00 -0400] drrk: i'm using crowbar to deploy it, but it's been a bt messy
[2012-03-15 14:28:00 -0400] BryanWB: drrk: u tried the crowbar skype channel?
[2012-03-15 14:28:00 -0400] BryanWB: i know the crowbar guys hang out there
[2012-03-15 14:29:00 -0400] drrk: no, I don't have skype
[2012-03-15 14:29:00 -0400] drrk: i'm in the crowbar irc channel
[2012-03-15 14:29:00 -0400] BryanWB: they use skype cuz irc blocked by dell firewall
[2012-03-15 14:29:00 -0400] drrk: last time I installed skype it became a supernode and crashed my router
[2012-03-15 14:30:00 -0400] j-v-e: Good day gentlemen
[2012-03-15 14:30:00 -0400] j-v-e: I need to merge the content of a data bag with role attributes
[2012-03-15 14:30:00 -0400] j-v-e: and if there's a conflict, the node attributes will take precedence over the data bag
[2012-03-15 14:31:00 -0400] j-v-e: is there a clean/automated way to do that ?
[2012-03-15 14:31:00 -0400] j-v-e: or should I just do a merge in ruby ?
[2012-03-15 14:36:00 -0400] nacer: BryanWB: did you buy a new mic ?
[2012-03-15 14:37:00 -0400] StormSilver: j-v-e: Probably a merge. There's a thing called deep_merge which is probably what you actually want.
[2012-03-15 14:37:00 -0400] StormSilver: j-v-e: May have to do something like node['my_attribute'].to_hash before it will work
[2012-03-15 14:39:00 -0400] rays: quick question can I define ngninx version in the env and have the rest of the nginx config in the role?
[2012-03-15 14:39:00 -0400] jonlives: has anyone else ever experienced a sporadic issue where chef will sometimes lose some or all node attributes (ie fqdn) during a run>
[2012-03-15 14:39:00 -0400] guyrt: rays: someone else feel free to correct me on this, but I'm pretty sure that is fine.
[2012-03-15 14:39:00 -0400] jonlives: it happens very very infrequently
[2012-03-15 14:40:00 -0400] StormSilver: jonlives: Yes, we had that happen at my last job
[2012-03-15 14:40:00 -0400] StormSilver: jonlives: But we never figured it out :(
[2012-03-15 14:40:00 -0400] jonlives: StormSilver: damn, i was hopeful there :p
[2012-03-15 14:40:00 -0400] rays: guyrt: thanks
[2012-03-15 14:41:00 -0400] jonlives: it's maybe like 1 run in thousands
[2012-03-15 14:41:00 -0400] StormSilver: jonlives: We were using 0.9.12 on CentOS 5.6 if that helps
[2012-03-15 14:41:00 -0400] StormSilver: jonlives: Yeah, it would lose things like ipaddress too
[2012-03-15 14:41:00 -0400] jonlives: this is 10.4 on Cent 5.6 and 6.2
[2012-03-15 14:41:00 -0400] jonlives: ok, well at least someone else had the same issue :p
[2012-03-15 14:41:00 -0400] guyrt: rays: thank me after it works :)
[2012-03-15 14:41:00 -0400] StormSilver: jonlives: Haha, yeah, FWIW
[2012-03-15 14:41:00 -0400] jonlives: we've largely fixed it by having default fallbacks for all cases where we to fqdn specific templae vars, but it's annoying :p
[2012-03-15 14:42:00 -0400] StormSilver: jonlives: Yes, for sure. We used to lose load balancers to it :/
[2012-03-15 14:42:00 -0400] jonlives: was hoping someone had figured it out so I  don't have to go code diving.
[2012-03-15 14:42:00 -0400] jonlives: in our case it never causes major problems, and it self-repairs on next run, so it's more of a niggle.
[2012-03-15 14:50:00 -0400] drrk: BryanWB: how do i join a skype channel having now installed skype
[2012-03-15 14:52:00 -0400] flagg0204: drrk - how have you liked crowbar so far? Ive been looking at using it for configuring our KVM hosts, and some other servers as well
[2012-03-15 14:52:00 -0400] drrk: urm, it's nice but possibel not quite ready yet
[2012-03-15 14:53:00 -0400] flagg0204: ive looked at the code, and compiled the iso.  it kinda feels a little 'hackish' atm
[2012-03-15 14:53:00 -0400] drrk: I think when we go into production we are going to drop money in Dell's direction to help us get it right
[2012-03-15 14:53:00 -0400] flagg0204: it uses chef for configuring node correct?
[2012-03-15 14:54:00 -0400] drrk: yeah chef is used heavily
[2012-03-15 14:54:00 -0400] flagg0204: drrk - i couldnt tell by looking at the code. does it embed a chef server on the crowbar server?  or can you use your own chef server
[2012-03-15 14:55:00 -0400] drrk: on the crowbar server
[2012-03-15 14:55:00 -0400] flagg0204: bah
[2012-03-15 14:55:00 -0400] drrk: and you can then use it for your vms aswell
[2012-03-15 14:56:00 -0400] BryanWB: drrk: fuck, can't remember, let me check
[2012-03-15 14:56:00 -0400] BryanWB: nacer: no!
[2012-03-15 14:56:00 -0400] BryanWB: nacer: can't find a good one in Italy
[2012-03-15 14:56:00 -0400] nacer: BryanWB: sound was good
[2012-03-15 14:56:00 -0400] BryanWB: nacer: i used levelator
[2012-03-15 14:57:00 -0400] nacer: BryanWB: logitech headeset don't do it ?
[2012-03-15 14:57:00 -0400] nacer: BryanWB: like logitech h800
[2012-03-15 14:57:00 -0400] rays: guyrt: bumped the version but its not upgrading nginx :( tried 'default' and 'override'
[2012-03-15 14:57:00 -0400] drrk: hmm i've found Rob Hirschfield on skype
[2012-03-15 14:58:00 -0400] rays: guyrt: it installs nginx from source
[2012-03-15 14:58:00 -0400] guyrt: rays: what system are you on?
[2012-03-15 14:58:00 -0400] BryanWB: drrk: `70 people on Skype IM channel (its not too late to join by pinging DellCrowbar with Essex barclamps).`
[2012-03-15 14:58:00 -0400] BryanWB: from http://robhirschfeld.com/tag/crowbar/
[2012-03-15 14:58:00 -0400] rays: guyrt: not sure I know what you mean, so I'll answer all the possibilities. Ubuntu, hosted opscode chef
[2012-03-15 14:59:00 -0400] BryanWB: nacer: i have shit logitech foo
[2012-03-15 14:59:00 -0400] nacer: BryanWB: :)
[2012-03-15 14:59:00 -0400] guyrt: rays: ok, and I'm pretty sure that would use apt-source to download from source, right?
[2012-03-15 14:59:00 -0400] BryanWB: nacer: u can hear my wife typing in the background and eating her salad :(
[2012-03-15 14:59:00 -0400] nacer: BryanWB: the sound problem is more for the other guy
[2012-03-15 14:59:00 -0400] nacer: BryanWB: lol
[2012-03-15 14:59:00 -0400] drrk: BryanWB: is that I send Rob a message and he invites me to the group?
[2012-03-15 15:00:00 -0400] BryanWB: nacer: yeah ranjibd, i told him to get a better headset but he didn't listen
[2012-03-15 15:00:00 -0400] BryanWB: drrk: looks like it
[2012-03-15 15:00:00 -0400] drrk: i'll leave it for now then
[2012-03-15 15:00:00 -0400] drrk: it's still early
[2012-03-15 15:01:00 -0400] rays: guyrt: looks like it downloads the tarball https://github.com/hiidef/chef-repo/blob/master/cookbooks/nginx/recipes/source.rb#L73-76
[2012-03-15 15:02:00 -0400] guyrt: rays: even better. so is the problem that the tarball is never accessed? In other words, it's not realizing it needs to update?
[2012-03-15 15:03:00 -0400] rays: guyrt: looks that way, we'll patch the recipie
[2012-03-15 15:09:00 -0400] hoover_damm: so who in here is starting to have to lace their recipes with LC_ALL=""
[2012-03-15 15:09:00 -0400] hoover_damm: ?
[2012-03-15 15:09:00 -0400] hoover_damm: I must be doing it wrong
[2012-03-15 15:17:00 -0400] nacer: BryanWB: your making the episode on skype group call ?
[2012-03-15 15:21:00 -0400] BryanWB: yeah
[2012-03-15 15:21:00 -0400] BryanWB: nacer: before used g+ hangout, which I prefer, but chrome uses up all the ram on my little macbook air
[2012-03-15 15:21:00 -0400] nacer: BryanWB: haha
[2012-03-15 15:22:00 -0400] lflux_: ohai chefs
[2012-03-15 15:22:00 -0400] nacer: ohai iflux_
[2012-03-15 15:22:00 -0400] lflux_: anyone ever done a recipe for Tivoli TSM backup
[2012-03-15 15:24:00 -0400] j-v-e: is there a way to read node attributes from Shef on the node itself ?
[2012-03-15 15:25:00 -0400] j-v-e: 'chef > print node[:ossec]' returns an empty list (I started the shell using shef -z as root)
[2012-03-15 15:25:00 -0400] j-v-e: the attribute exists
[2012-03-15 15:34:00 -0400] gmcinnes: ahoy chefs.
[2012-03-15 15:34:00 -0400] gmcinnes: chef-solo does not support environments, correct?
[2012-03-15 15:35:00 -0400] gmcinnes: Is there any way to simulate them?
[2012-03-15 15:38:00 -0400] BryanWB: hmm, i thought newest version did, but not sure
[2012-03-15 15:43:00 -0400] trhowe: Not entirely sure where is the best place for this question because it kind of spans both chef and vagrant.  I'm using a vagrant multi-vm environment with host only networking.  When I use node[:ipaddress] in a recipe/template I get the private address, which is not accessible from the other machines in the host only network.  I also want my cookbook to work well in ec2.  Is there a standard pattern for dealing with this situation or do I 
[2012-03-15 15:43:00 -0400] trhowe: need to explicitly check if I'm running in a vagrant environment?
[2012-03-15 15:57:00 -0400] lflux: Is there like any good formal process for creating a community cookbook?
[2012-03-15 15:57:00 -0400] lflux: I'm working on a cookbook for TSM, but it's pretty specific to my needs
[2012-03-15 15:57:00 -0400] lflux: and I don't have a Ubuntu machine to test on
[2012-03-15 16:02:00 -0400] j-v-e: Is there a way to search all data bags in one search statement ?
[2012-03-15 16:02:00 -0400] j-v-e: something like search(":*", "ossec:*")
[2012-03-15 16:20:00 -0400] hippiehacker: https://gist.github.com/2045045 nginx frontloading of chef giving me funny error on chef-client run.... "http://backend" can't be resolved even though I'd never expect that to reach the chef-client
[2012-03-15 16:20:00 -0400] miketheman: is the mysql cookbook officially deprecated in favor of the database cookbook?
[2012-03-15 16:22:00 -0400] hippiehacker: putting nginx in front of chef-server(api) seems like a reasonable thing to do (I've got 4-cores and seem to get better thru-put with four chef-server instances running)
[2012-03-15 16:22:00 -0400] miketheman: hippiehacker: etsy wrote about scaling the api stuff recently: http://blog.mycrot.ch/2012/03/13/scaling-chef-with-more-api-workers/
[2012-03-15 16:26:00 -0400] hippiehacker: miketheman: I started the other processes separately I'll try the -c option
[2012-03-15 16:30:00 -0400] hippiehacker: miketheman: I suspect my issue may have something to do with the nginx config, however it looks so dang simple, I can't imagine what I've done wrong
[2012-03-15 16:30:00 -0400] miketheman: that's a whole other bag of apples
[2012-03-15 16:30:00 -0400] proffalken: miketheman: that's an awesome link, thanks :)
[2012-03-15 16:31:00 -0400] miketheman: proffalken: sure thing. Personally, I use the opscode platform, then I don't have to worry about scaling the chef server. ;)
[2012-03-15 16:31:00 -0400] lflux: Role question:
[2012-03-15 16:31:00 -0400] lflux: Can a role override a file?
[2012-03-15 16:31:00 -0400] lflux: or a template? in a recipe
[2012-03-15 16:32:00 -0400] miketheman: a role can override attributes, and a recipe can test for an attribute and act accordingly
[2012-03-15 16:32:00 -0400] lflux: I might just put the full text of a file in this attribute then
[2012-03-15 16:33:00 -0400] lflux: (it's the TSM backup include/exclude file)
[2012-03-15 16:34:00 -0400] hippiehacker: funny thing is, I'm only getting into issues when trying to pull cookbooks
[2012-03-15 16:37:00 -0400] miketheman: hippiehacker: maybe has to do with something like sticky sessions?
[2012-03-15 16:38:00 -0400] miketheman: hippiehacker: http://opensourcehacker.com/2011/03/21/session-affinity-sticky-with-nginx-load-balancing/
[2012-03-15 16:38:00 -0400] hippiehacker: knife cookbook show chef-client 1.0.4 attributes #=> url: http://apibackend
[2012-03-15 16:38:00 -0400] hippiehacker: https://gist.github.com/2045045#gistcomment-91972
[2012-03-15 16:39:00 -0400] hippiehacker: I'm getting the wrong url back from the recipe contents via knife
[2012-03-15 16:40:00 -0400] hippiehacker: I don't think that's related to sticky sessions
[2012-03-15 16:42:00 -0400] hippiehacker: it seems like the chef-server is returning the urls that way, and nginx is just passing them on
[2012-03-15 16:57:00 -0400] drrk: well progress with knife-openstack
[2012-03-15 16:58:00 -0400] Brad_K: awesome!
[2012-03-15 16:58:00 -0400] drrk: now getting https://gist.github.com/4bf1ca04053bd09c9d3b
[2012-03-15 16:58:00 -0400] Brad_K: is that because of recent changes that were made in the plugin?
[2012-03-15 16:58:00 -0400] drrk: Brad_K: yeah it's not all good
[2012-03-15 16:58:00 -0400] drrk: my issues were it was using the wrong fog gem
[2012-03-15 16:59:00 -0400] drrk: before
[2012-03-15 16:59:00 -0400] drrk: I also have awkward networkign which I think may be related to this issue, but i'm not sure
[2012-03-15 16:59:00 -0400] Brad_K: well, at least it's in the right gem now, right?  okay, so the public_ip_address code appears to be borked, but that's an improvement  isn't it?
[2012-03-15 17:00:00 -0400] Brad_K: is it getting confused by the HP ILOM port?
[2012-03-15 17:01:00 -0400] drrk: not sure, I woudlnt' have thoguht so as that host has a dedicated ilom port
[2012-03-15 17:02:00 -0400] Brad_K: hmm.  regretfully, matt doesn't seem to be logged on right now.  i can't think of anyone else who has chef+openstack experience, although maybe one of the other knowledgeable chef types can help debug the code with you.
[2012-03-15 17:03:00 -0400] drrk: matt wrote the code in question I believe
[2012-03-15 17:03:00 -0400] drrk: I need to go out shortly anyway
[2012-03-15 17:03:00 -0400] Brad_K: right.  that's why i would have hoped he would be around.
[2012-03-15 17:04:00 -0400] drrk: they instances have been created
[2012-03-15 17:04:00 -0400] Brad_K: but opscode does have plenty of bright people who can help debug code in areas that they might not have seen before.  and they don't have the monopoly on bright people with chef experience.
[2012-03-15 17:04:00 -0400] drrk: which is a pretty good start
[2012-03-15 17:04:00 -0400] drrk: heh, true
[2012-03-15 17:04:00 -0400] Brad_K: yeah, if the instances are there, this does seem to be a much more tractable problem.
[2012-03-15 17:05:00 -0400] Brad_K: i did work out my bugs with the showoff gem, fortunately.
[2012-03-15 17:05:00 -0400] drrk: does ruby havethe equivilent of perls Data::Dumper ?
[2012-03-15 17:06:00 -0400] Brad_K: dunno.  lemme see if i can find something.
[2012-03-15 17:07:00 -0400] renchap: drrk: http://www.rubyinside.com/awesome_print-a-new-pretty-printer-for-your-ruby-objects-3208.html
[2012-03-15 17:07:00 -0400] Brad_K: or maybe http://stackoverflow.com/questions/2159426/ruby-equivalent-of-perl-datadumper#2159460 ?
[2012-03-15 17:08:00 -0400] jbz: Does inspect do enough of what you want?
[2012-03-15 17:08:00 -0400] Brad_K: okay, awesome_print wins.
[2012-03-15 17:08:00 -0400] jbz: haha awesome_print is awesome just for the name.
[2012-03-15 17:09:00 -0400] drrk: pp was good enough, and has higlighed the bug nicecly
[2012-03-15 17:09:00 -0400] drrk: the code is looking for public or internet, the object is {"nova_fixed"=>[{"version"=>4, "addr"=>"172.16.36.53"}]}
[2012-03-15 17:11:00 -0400] hippiehacker: http://dragula.org/blogs/645 this appears to be the issue
[2012-03-15 17:12:00 -0400] hippiehacker: I'm guessing it's a merb bug
[2012-03-15 17:17:00 -0400] Brad_K: drrk: that would seem to be something that can/should be fixed in ohai  it should populate the namespace with the correct entities, so that node[:cloud][:private_ips] and node[:cloud][:public_ip] are correctly populated.  fortunately, the latest version of ohai is still in late beta, so we might be able to get this squeezed in quickly.  Ping btm on that.
[2012-03-15 17:17:00 -0400] drrk: hurrah. I get network unreachable not
[2012-03-15 17:18:00 -0400] drrk: is it coming from ohai?
[2012-03-15 17:18:00 -0400] drrk: it's before the node is bootstrapped
[2012-03-15 17:19:00 -0400] drrk: I jst patched knife-openstack-0.6.0/lib/chef/knife/openstack_server_create.rb to understand nova_fixed
[2012-03-15 17:21:00 -0400] drrk: I have to go out, back later
[2012-03-15 17:24:00 -0400] hippiehacker: https://gist.github.com/2045045#gistcomment-91977 # interesting work around needed to get merb+chef to give correct urls to cookbooks in 10.6.... is this worth filing a bug over?
[2012-03-15 17:27:00 -0400] ashb: hippiehacker: isn't that a nginx thing not a merb thing?
[2012-03-15 17:27:00 -0400] hippiehacker: ashb: yea
[2012-03-15 17:27:00 -0400] hippiehacker: err
[2012-03-15 17:27:00 -0400] ashb:     proxy_set_header Host $http_host;
[2012-03-15 17:27:00 -0400] ashb: is what I have in my nginx config for proxying to my rails app
[2012-03-15 17:28:00 -0400] hippiehacker: ashb: let me read up a bit more, you may be right
[2012-03-15 17:34:00 -0400] ssd7_: Ohai Chefs!
[2012-03-15 17:36:00 -0400] lflux: any opscode on?
[2012-03-15 17:36:00 -0400] Brad_K: opscode is a 24x7 company, so yes  i'm sure they're on somewhere.
[2012-03-15 17:36:00 -0400] lflux: i meant like in this channel
[2012-03-15 17:37:00 -0400] Brad_K: if so, i'll let them announce themselves.
[2012-03-15 17:38:00 -0400] Brad_K: lflux: what's the problem?
[2012-03-15 17:38:00 -0400] lflux: just had a couple Qs about contributing a new cookbook
[2012-03-15 17:38:00 -0400] Brad_K: have you signed the CLA, and had your employer sign the CCLA?
[2012-03-15 17:39:00 -0400] lflux: yes
[2012-03-15 17:40:00 -0400] lflux: more like 'what goes in the license field'
[2012-03-15 17:40:00 -0400] Brad_K: to be honest, i think that's the primary thing they care about.  from there, you can publish your version of the cookbook on github (or wherever) and then you should be able to notify them of your interest to submit it to the community site.
[2012-03-15 17:40:00 -0400] Brad_K: ahh, that's easy.
[2012-03-15 17:40:00 -0400] ashb: same as all the other ones :)
[2012-03-15 17:41:00 -0400] Brad_K: everything that is shared through the community site has to use the Apache 2.0 license, just like every other cookbook on the community site.
[2012-03-15 17:41:00 -0400] lflux: Has to be apache? does copyright need to be signed over?
[2012-03-15 17:42:00 -0400] Brad_K: you did that as part of the CLA/CCLA.
[2012-03-15 17:43:00 -0400] Brad_K: when you post your version of the cookbook on github, you can have whatever you want as the "maintainer" and "maintainer_email", but the "license" will have to be "Apache 2.0", otherwise they can't accept it.
[2012-03-15 17:43:00 -0400] lflux: ah
[2012-03-15 17:44:00 -0400] Brad_K: for their version of the cookbook as they distribute it from the community site, they might change the "maintainer" and "maintainer_email", but they should at least reference your cookbook on github as the upstream.
[2012-03-15 17:46:00 -0400] lflux: ugh, have to get employer to sign CCLA. only contributed stuff on my own before.
[2012-03-15 17:47:00 -0400] holoway: Brad_K: that's not true
[2012-03-15 17:47:00 -0400] holoway: Brad_K: you can share anything you want on the community site
[2012-03-15 17:47:00 -0400] ssd7_: lflux: Is this for a new cookbook on the community site or contributing to an Opscode project?
[2012-03-15 17:47:00 -0400] lflux: new cookbook.
[2012-03-15 17:47:00 -0400] holoway: Brad_K: any license that suits you
[2012-03-15 17:47:00 -0400] holoway: Brad_K: now, to contribute to someone elses project, you gotta play by whatever license they use
[2012-03-15 17:47:00 -0400] ssd7_: lflux: What holoway said, if it is your own cookbook, license how you wish.
[2012-03-15 17:48:00 -0400] holoway: Brad_K: opscode just rolls Apache
[2012-03-15 17:48:00 -0400] Brad_K: okay, i'm sorry, i thought that apache 2.0 was required for all contributions on the site.  my apologies.
[2012-03-15 17:49:00 -0400] holoway: Brad_K: it's still the most common choice by far
[2012-03-15 17:50:00 -0400] lflux: community cookbooks are separate from https://github.com/opscode/cookbooks ?
[2012-03-15 17:50:00 -0400] hoover_damm: holoway, what I can't do the Perl license?
[2012-03-15 17:50:00 -0400] hoover_damm: how dare you!
[2012-03-15 17:50:00 -0400] hoover_damm: or Artistic!
[2012-03-15 17:50:00 -0400] lusis: was I wrong in thinking the chefconf emails would be going out yesterday?
[2012-03-15 17:53:00 -0400] cwj: no chefconf for you!
[2012-03-15 17:54:00 -0400] jtimberman: lflux: that github repository is an "in development" repo.
[2012-03-15 17:54:00 -0400] cwj: jk, here, have some
[2012-03-15 17:54:00 -0400] jtimberman: released cookbooks go on the community site.
[2012-03-15 17:54:00 -0400] lflux: jtimberman: so the process for adding a new cookbook is via community, not via ticket + pull req
[2012-03-15 17:54:00 -0400] jtimberman: when we release cookbooks, it means that we have tested them that they do what is indicated in the readme (and on the platforms listed as supported)
[2012-03-15 17:54:00 -0400] jtimberman: lflux: right.
[2012-03-15 17:54:00 -0400] lflux: the community site is borked for some reason, can't sign up.
[2012-03-15 17:55:00 -0400] jtimberman: lflux: our cookbooks repository is not intended to be a collection of everything for everyone like homebrew or macports.
[2012-03-15 17:55:00 -0400] jtimberman: lflux: borked in what way?
[2012-03-15 17:55:00 -0400] lflux: Trying to sign up, but nothing happens. it flashes some message too fast for me to see and keeps returning me to the same form
[2012-03-15 17:56:00 -0400] lflux: UI fail. It requires a state. We don't have states here.
[2012-03-15 17:57:00 -0400] lflux: ok, even with a fake state it hates me.
[2012-03-15 17:57:00 -0400] lusis: cwj: I has a sad =/
[2012-03-15 17:57:00 -0400] lusis: Actually I just need to know so I can expense my ticket if not ;)
[2012-03-15 17:58:00 -0400] lflux: Even tried in firefox instead of chrome.
[2012-03-15 17:58:00 -0400] cwj: i just got approval to expense chefconf yesterday so i am excited to register in the near future
[2012-03-15 18:00:00 -0400] thehar: YAY cwj
[2012-03-15 18:01:00 -0400] cwj: yay! :D
[2012-03-15 18:01:00 -0400] thehar: it's been too long :)
[2012-03-15 18:01:00 -0400] cwj: we shall make with the drinks
[2012-03-15 18:06:00 -0400] ssd7_: lflux: Make sure that you are at community.opscode.com/users/new and not community.opscode.com/users, I think that you might get redirected to the wrong site after an error so if you don't get all the fields correct the first time, subsequent tries won't work unless you head back to the correct page
[2012-03-15 18:06:00 -0400] ssd7_: And by "I think
[2012-03-15 18:06:00 -0400] ssd7_: ", I mean "paulmooring found"
[2012-03-15 18:06:00 -0400] bwong: Do chef clients have logs ?
[2012-03-15 18:07:00 -0400] flashmanbahadur: Is there a general ETA on chef 0.10.10?  The segfault fix inside unix.rb would really help. (I'd prefer not to have to patch it myself and make a custom version)
[2012-03-15 18:07:00 -0400] ssd7_: bwong: Yes.  Typical location is /var/log/chef.log but it can modified via /etc/chef/client.rb.
[2012-03-15 18:10:00 -0400] bwong: what do I have to do to enable it in client.rb?
[2012-03-15 18:11:00 -0400] Brad_K: bwong: it should be enabled by default.  at least, it has on all the instances i've looked at.
[2012-03-15 18:12:00 -0400] bwong: Brad_K: Im not sure why but it has not for me.
[2012-03-15 18:15:00 -0400] bkocik: Is it possible to set up a role that specifically excludes a recipe include in the run_list of another role?
[2012-03-15 18:16:00 -0400] bkocik: Meaning, I have servers A and B, both of which have role "web". That role specifies recipeA, recipeB, and recipeC - but on B I need recipeC to *not* be included.
[2012-03-15 18:17:00 -0400] bkocik: and I can't do this with an environment because each node can be in only one environment and they need to be in the same one (I use it in Passenger's configuration)
[2012-03-15 18:18:00 -0400] bwong: do i need to include
[2012-03-15 18:18:00 -0400] bwong: verbose_logging nil?
[2012-03-15 18:18:00 -0400] bwong: in client.rb
[2012-03-15 18:18:00 -0400] bwong: to enable logs
[2012-03-15 18:18:00 -0400] lusis: cwj: I'll be there either way but I like to get expenses done as early as possible heh
[2012-03-15 18:19:00 -0400] cwj: yeah i hear that
[2012-03-15 18:21:00 -0400] hoover_damm: flashmanbahadur, monkeypatch fix it?
[2012-03-15 18:21:00 -0400] hoover_damm: flashmanbahadur, any reason you cannot apply the fix in a 'library' in an cookbook?
[2012-03-15 18:21:00 -0400] hoover_damm: flashmanbahadur, :) remember it's ruby... libraries are your friend :)
[2012-03-15 18:24:00 -0400] Brad_K: FWIW: @perusio: #nginx 1.1.17 is out. There's a security fix. Please upgrade ASAP: goo.gl/DUaSX. Problem affects all versions up to 1.1.16 or 1.0.13
[2012-03-15 18:25:00 -0400] hoover_damm: yep, get 1.0.14
[2012-03-15 18:25:00 -0400] hoover_damm: and so forth
[2012-03-15 18:25:00 -0400] hoover_damm: Brad_K, i would love more clarity on what it exposes
[2012-03-15 18:25:00 -0400] hoover_damm: but ohwell
[2012-03-15 18:25:00 -0400] flashmanbahadur: hoover_damm: I think I would need to monkey patch since unix.rb is used a ton by chef
[2012-03-15 18:26:00 -0400] Brad_K: hoover_damm: if you can read the source code, the patch is here: http://nginx.org/download/patch.2012.memory.txt
[2012-03-15 18:26:00 -0400] Brad_K: it is but greek to me.
[2012-03-15 18:27:00 -0400] hoover_damm: flashmanbahadur, monkeypatch is fine... just create a unix.rb library with the fixed code
[2012-03-15 18:27:00 -0400] hoover_damm: drop it in your repo
[2012-03-15 18:27:00 -0400] hoover_damm: all styled out class Chef
[2012-03-15 18:27:00 -0400] hoover_damm: module ...
[2012-03-15 18:27:00 -0400] hoover_damm: and :)
[2012-03-15 18:27:00 -0400] hoover_damm: Brad_K, I can read the source, but that doesn't tell me what I wanted.
[2012-03-15 18:27:00 -0400] Brad_K: then you're a better man than i, gunga din.
[2012-03-15 18:29:00 -0400] nlloyds2: Could somebody help me understand something in the opscode mysql cookbook?
[2012-03-15 18:30:00 -0400] nlloyds2: https://github.com/opscode/cookbooks/blob/master/mysql/recipes/server.rb#L123-134
[2012-03-15 18:30:00 -0400] nlloyds2: This seems to run no matter what. Is this different than :create_if_missing ?
[2012-03-15 18:33:00 -0400] bkocik: To answer my own question, I'm defining a new role that sets an attribute to 'true', and in my recipe I check to see if that attribute is present on the node before running. Idunno if that's the best way, but it should work.
[2012-03-15 18:33:00 -0400] rgould: has anyone encountered an instance where "knife search node 'role:foo'" doesn't actually return all of the nodes that exist?
[2012-03-15 18:33:00 -0400] cwj: rgould: try roles:foo instead of role:foo ?
[2012-03-15 18:34:00 -0400] nlloyds2: rgould: 'role:' only gives you the ones in the run_list, 'roles:' gives you the computed list
[2012-03-15 18:34:00 -0400] cwj: i believe the distinction is that 'roles' contains all the roles expanded from the run_list
[2012-03-15 18:34:00 -0400] rgould: huh
[2012-03-15 18:35:00 -0400] nlloyds2: With the caveat that roles only gets populated when the chef-client runs on the node
[2012-03-15 18:35:00 -0400] rgould: the results are inconsistent though. it usually returns all the nodes (3) but very rarely returns some of them (2)
[2012-03-15 18:36:00 -0400] nlloyds2: This has a better explanation: http://wiki.opscode.com/display/chef/Search#Search-FindNodeswithaRoleintheExpandedRunList
[2012-03-15 18:36:00 -0400] cwj: ah
[2012-03-15 18:36:00 -0400] cwj: thats different then isnt it
[2012-03-15 18:36:00 -0400] cwj: is this on hosted chef or your own chef-server ?
[2012-03-15 18:36:00 -0400] rgould: hosted chef
[2012-03-15 18:37:00 -0400] rgould: a bit scary, as we've now ended up where 2/3 app servers are running one version of our code, while the other is running another version :)
[2012-03-15 18:37:00 -0400] cwj: i feel like i've seen similar behavior before but not recently
[2012-03-15 18:38:00 -0400] rgould: i didn't know about the distinction between role/roles though. that's good to know
[2012-03-15 18:38:00 -0400] rgould: in my case though, they should be returning the same results
[2012-03-15 18:42:00 -0400] benner: what's different betweed cookbook_file resource actions create and create_if_missing?
[2012-03-15 18:43:00 -0400] cwj: benner: create_if_missing will not overwrite an existing file
[2012-03-15 18:43:00 -0400] cwj: create will overwrite an existing file if the contents are not the same as the one in the cookbook
[2012-03-15 18:44:00 -0400] benner: cwj: ok, clear
[2012-03-15 18:44:00 -0400] atomic-penguin: Been working on this past couple of days, someone might find it useful for working with encrypted data bags and certs: https://twitter.com/#!/atomic_penguin/status/180360570292277249
[2012-03-15 18:45:00 -0400] ranjibd: lusis, did you get a chance to tryout riemann
[2012-03-15 18:45:00 -0400] lusis: I've been mucking with it. Still getting hung up on the clojure stuff =(
[2012-03-15 18:45:00 -0400] lusis: and scoping
[2012-03-15 18:45:00 -0400] ranjibd: same here
[2012-03-15 18:45:00 -0400] rgould: thanks cwj, nlloyds2. i think i'll file an issue with opscode
[2012-03-15 18:47:00 -0400] cwj: atomic-penguin: cool, thanks
[2012-03-15 18:47:00 -0400] atomic-penguin: cwj, surprised nobody had done something like that already
[2012-03-15 18:48:00 -0400] atomic-penguin: Maybe they have, and I couldn't find it on the community site
[2012-03-15 18:48:00 -0400] cwj: i've just been applying a little vim to it myself, but i like what you've done here
[2012-03-15 18:49:00 -0400] gmcinnes: agreed
[2012-03-15 18:52:00 -0400] hoover_damm: lusis, you get hungup on clojure?
[2012-03-15 18:52:00 -0400] lusis: not really
[2012-03-15 18:52:00 -0400] lusis: well
[2012-03-15 18:52:00 -0400] lusis: yes
[2012-03-15 18:52:00 -0400] lusis: but specifically the riemann configuration
[2012-03-15 18:53:00 -0400] lusis: I think I'm going to have to pick up a little more clojure to have it make sense
[2012-03-15 18:53:00 -0400] lusis: like I'm cool with prefix notation and some other stuff ;)
[2012-03-15 18:53:00 -0400] Brad_K: atomic-penguin: cool!
[2012-03-15 18:57:00 -0400] lflux: ssd7_: that did the trick since if you fill out the captcha wrong or some other field it redirects you to /users
[2012-03-15 18:57:00 -0400] lflux: probably someone should look at that.
[2012-03-15 18:59:00 -0400] bwong: How do I find out the minimum version of ruby-gems chef needs to install its client?
[2012-03-15 19:00:00 -0400] Brad_K: bwong: you read the web page that specifies what the minimum requirements are?
[2012-03-15 19:00:00 -0400] hoover_damm: lusis, yes you'll have to pickup clojure natives for it to click more
[2012-03-15 19:01:00 -0400] bwong: Brad_K: Looking into it
[2012-03-15 19:02:00 -0400] Brad_K: try http://wiki.opscode.com/display/chef/System+Requirements+with+install
[2012-03-15 19:03:00 -0400] lusis: hoover_damm: that was my thinking
[2012-03-15 19:04:00 -0400] hoover_damm: lusis, it's been a on/off thing for me
[2012-03-15 19:04:00 -0400] hoover_damm: lusis, I actually am very pissed off at clojure
[2012-03-15 19:04:00 -0400] hoover_damm: lusis, I find that it actually comes to me naturally
[2012-03-15 19:04:00 -0400] hoover_damm: lusis, if I just stop forcing it ... the syntax just literly leaps out of my fingers onto the screen
[2012-03-15 19:05:00 -0400] ranjibd: i just dont  like so many parenthesis
[2012-03-15 19:05:00 -0400] bkocik: I just added Capistrano tasks to run Chef tasks. Laziness is the mother of invention.
[2012-03-15 19:05:00 -0400] ranjibd: creepy they are
[2012-03-15 19:06:00 -0400] lusis: I'm actually okay with the parens
[2012-03-15 19:07:00 -0400] bwong: Brad_K: Thanks for that. I saw it, but I'm looking for something more specific.... the ruby gem rails version... --This is the main gem that is conflicting with our machines
[2012-03-15 19:07:00 -0400] chip-: bkocik: one of my common Cap tasks kicks a Chef run.
[2012-03-15 19:07:00 -0400] bwong: Brad_K: I want to see if it can run under a lower version
[2012-03-15 19:08:00 -0400] bkocik: chip-: Yeah, that's what I did. I got tired of running for loops to run chef-client on my hosts (and don't feel like waiting for cron)
[2012-03-15 19:08:00 -0400] chip-: bkocik: I'm a big believer in small, specialized tools, though. I don't use Chef for app deploy because it's bad at it (right now). I use Chef for config management and node construction. Just like I don't use cap for config management.
[2012-03-15 19:08:00 -0400] chip-: Hammers for nails, screwguns for screws, all that.
[2012-03-15 19:08:00 -0400] chip-: not that Chef or Cap are that small.
[2012-03-15 19:09:00 -0400] nlloyds2: bkocik: You can also do knife ssh "roles:base AND some:other-search" "sudo chef-client" or knife ssh -m some.node.address "sudo chef-client"
[2012-03-15 19:09:00 -0400] nlloyds2: chip- +1
[2012-03-15 19:10:00 -0400] nlloyds2: I started working on this: https://github.com/cramerdev/capistrano-chef
[2012-03-15 19:10:00 -0400] bkocik: That's way too much typing. :)
[2012-03-15 19:11:00 -0400] bkocik: chip-: I do the same thing. Chef for config management, Capistrano for deployment.
[2012-03-15 19:11:00 -0400] chip-: My preferred stack right now for most of my projects (all are different, I do agency work) is Jenkins + Cap + Git + Chef
[2012-03-15 19:12:00 -0400] chip-: Pipes make the world go 'round. :)
[2012-03-15 19:12:00 -0400] bkocik: Since capistrano already knows how to ssh to all of my servers, by role no less, I can now just type "cap chef" or "cap chef:web" or "cap chef:db" to run chef-client where I want.
[2012-03-15 19:12:00 -0400] gmcinnes: chip-: an enlightened agency :)
[2012-03-15 19:12:00 -0400] chip-: gmcinnes: Depends on the project and the PM.
[2012-03-15 19:13:00 -0400] chip-: bkocik: nice!
[2012-03-15 19:14:00 -0400] chip-: nlloyds2: I solved the same problem cap-chef is addressing by running chef on my cap server, doing my hosts/roles in cap via a file include, and having a chef recipe that runs searches and populates the include file.
[2012-03-15 19:14:00 -0400] chip-: nlloyds2: the whole thing is off-the-shelf and self-configuring.
[2012-03-15 19:14:00 -0400] gmcinnes: chip-: always. The stacks I usually end up with are php + dead chickens.
[2012-03-15 19:14:00 -0400] chip-: gmcinnes: Darkest voodoo
[2012-03-15 19:15:00 -0400] nlloyds2: chip-: Neat idea
[2012-03-15 19:15:00 -0400] bkocik: Just in case anyone else wants it: https://gist.github.com/2046169
[2012-03-15 19:16:00 -0400] chip-: Thanks!
[2012-03-15 19:16:00 -0400] bkocik: There's probably some clever way to DRY that up, but, whatever. I'm not feeling clever today.
[2012-03-15 19:17:00 -0400] nlloyds2: I also want to be able to set cap attributes from a data bag, to do set_from_data_bag(:apps, "id:my_app") and then have the deploy_to, user, repository_url all set from a data bag. maybe
[2012-03-15 19:19:00 -0400] chip-: So now that I've spent 5 minutes pretending to be clever: I am a shitty, shitty ruby programmer, and I have a ruby block that's working on one machine but just bombing on others with namespace errors.
[2012-03-15 19:20:00 -0400] gmcinnes: pastie?
[2012-03-15 19:20:00 -0400] chip-: based on https://github.com/joewilliams/haproxy_join
[2012-03-15 19:20:00 -0400] bawt: pastie is your friend.
[2012-03-15 19:20:00 -0400] chip-: my code is:https://gist.github.com/2046225
[2012-03-15 19:20:00 -0400] chip-: It just def's 3 functions, then calls one
[2012-03-15 19:21:00 -0400] chip-: but fails on Namespace issues on some hosts (but not all)
[2012-03-15 19:21:00 -0400] chip-: Tempted to just rip out the functions and make it fully procedural, b/c it's now in a block
[2012-03-15 19:21:00 -0400] chip-: But I'd rather figure out how to specify the space correctly.
[2012-03-15 19:21:00 -0400] gmcinnes: pastie of the backtrace?
[2012-03-15 19:22:00 -0400] chip-: working on getting one
[2012-03-15 19:23:00 -0400] chip-: weird thing is both hosts were made by bootstrapping via knife ec2 with the same command
[2012-03-15 19:24:00 -0400] chip-: ok refresh gist
[2012-03-15 19:29:00 -0400] nlloyds2: chip-: Does it work if you require 'find' within the block?
[2012-03-15 19:29:00 -0400] chip-: mmmmm.
[2012-03-15 19:34:00 -0400] chip-: nlloyds2: That did it. Awesome!
[2012-03-15 19:34:00 -0400] chip-: Thank you.
[2012-03-15 19:35:00 -0400] nlloyds2: you're welcome
[2012-03-15 19:44:00 -0400] lusis: weird
[2012-03-15 19:44:00 -0400] lusis: the chefconf website has the speakers up already?
[2012-03-15 19:44:00 -0400] lusis: but no email yet?
[2012-03-15 19:47:00 -0400] hippiehacker: Re http://tickets.opscode.com/browse/CHEF-2983 is it even useful to run a merb process per core for the webui?
[2012-03-15 19:56:00 -0400] kallen: i'll bet there's a way to do this. just need a quick pointer to get me on my way: is there a way to mass edit node attr data? i need to delete one default attr across many nodes. i know i could "knife node delete" all of them and rerun. can i nail one attr? is that the best way?
[2012-03-15 19:59:00 -0400] kallen: yeah.. i think i'll get it with this: http://wiki.opscode.com/display/chef/Knife+Exec
[2012-03-15 20:13:00 -0400] savant: is there a "test run" mode for chef-solo?
[2012-03-15 20:13:00 -0400] savant: something that will show the output, but wont actually do anything
[2012-03-15 20:13:00 -0400] savant: "dry run", if you will
[2012-03-15 20:14:00 -0400] cwj: savant: not yet, but opscode has indicated it is in the works
[2012-03-15 20:14:00 -0400] cwj: i dont think they have indicated when to expect that to ship
[2012-03-15 20:15:00 -0400] savant: k
[2012-03-15 20:15:00 -0400] lusis: they've also indicated that it's not going to be accurate
[2012-03-15 20:15:00 -0400] savant: thats fine
[2012-03-15 20:15:00 -0400] lusis: and dangerous to rely on ;)
[2012-03-15 20:16:00 -0400] gmcinnes: lie to me mode
[2012-03-15 20:17:00 -0400] kallen: cool. thanks to wdpro_kevin in irc log archive, this worked, tested first on only one node:
[2012-03-15 20:17:00 -0400] kallen: knife exec -E 'nodes.search("hostname:webapp") { |n| n.default.key?("boundary") ? ( n.default.delete("boundary") ; n.save ) : false  } '
[2012-03-15 20:18:00 -0400] thehar: i hate myself mode
[2012-03-15 20:19:00 -0400] dwhsix: ooh getting a taste of shef awesomeness
[2012-03-15 20:19:00 -0400] dwhsix: and it is awesome
[2012-03-15 20:19:00 -0400] NewToChef: Hello. I am trying to use apt-repository as show in the example here: http://community.opscode.com/cookbooks/apt
[2012-03-15 20:19:00 -0400] NewToChef: This is what I have in my recipe: https://gist.github.com/2046601
[2012-03-15 20:20:00 -0400] NewToChef: But I get this error: https://gist.github.com/2046647
[2012-03-15 20:21:00 -0400] NewToChef: Any ideas anyone? Thanks.
[2012-03-15 20:21:00 -0400] nlloyds2: The key should be a hash
[2012-03-15 20:21:00 -0400] nlloyds2: like...
[2012-03-15 20:22:00 -0400] nlloyds2: B31B29E5548C16BF or something.
[2012-03-15 20:22:00 -0400] nlloyds2: it's usually on the launchpad page
[2012-03-15 20:24:00 -0400] NewToChef: The example on Opscode's site has one without the key necessarily being a hash.
[2012-03-15 20:24:00 -0400] nlloyds2: oh right
[2012-03-15 20:24:00 -0400] NewToChef: Plus, it seems to be complaining about the apt_repository being an undefined method
[2012-03-15 20:25:00 -0400] lusis: NewToChef: make sure you have the latest apt cookbook
[2012-03-15 20:25:00 -0400] lusis: iirc the repository stuff was in a later version
[2012-03-15 20:25:00 -0400] nlloyds2: (I should've read the error message)
[2012-03-15 20:25:00 -0400] kreedy: so i'm building a custom deb of chef to include the patch for http://tickets.opscode.com/browse/CHEF-1827. Think i'll break everything if i rename the version of chef to "0.10.8-customname" in lib/chef/version.rb and metadata.yml?
[2012-03-15 20:26:00 -0400] NewToChef: lusis: I thought I did. Will double check.
[2012-03-15 20:27:00 -0400] hoover_damm: kreedy, monkeypatch first
[2012-03-15 20:27:00 -0400] hoover_damm: then custom deb!
[2012-03-15 20:27:00 -0400] hoover_damm: kreedy, create a library that overrides the git provider with the fixes you need
[2012-03-15 20:28:00 -0400] hoover_damm: a lot easier to do
[2012-03-15 20:28:00 -0400] hoover_damm: then making a deb and all that
[2012-03-15 20:29:00 -0400] hoover_damm: beause you end up making your own bootstrap usually to replace the chef deb
[2012-03-15 20:29:00 -0400] hoover_damm: or modifying one
[2012-03-15 20:29:00 -0400] lusis: ^^^^
[2012-03-15 20:29:00 -0400] hoover_damm: if you can do it all in chef cookbooks
[2012-03-15 20:29:00 -0400] hoover_damm: please do
[2012-03-15 20:29:00 -0400] lusis: I have yet to use a default bootstrap
[2012-03-15 20:29:00 -0400] lusis: bootstrap template that is
[2012-03-15 20:29:00 -0400] hoover_damm: clearly i don't
[2012-03-15 20:29:00 -0400] kreedy: lol, i just got deb working with a custom bootstrap template
[2012-03-15 20:29:00 -0400] kreedy: should have asked here first :P
[2012-03-15 20:29:00 -0400] lusis: omnibus++
[2012-03-15 20:31:00 -0400] NewToChef: I do have the most recent apt cookbook. However, I am not "including" it in the one I have written. Hence the error I suppose.
[2012-03-15 20:31:00 -0400] kreedy: on that note, is there a better way to get knife to bootstrap using apt/deb than "--distro ubuntu10.04-apt" ?
[2012-03-15 20:31:00 -0400] hoover_damm: or metadata.rb doesn't depend on apt
[2012-03-15 20:31:00 -0400] NewToChef: Do I need to include the entire cookbook or just a recipe?
[2012-03-15 20:32:00 -0400] nlloyds2: You should have the depends 'apt' in the metadata.rb for the your cookbook, and include_recipe 'apt' in your recipe
[2012-03-15 20:34:00 -0400] hoover_damm: shouldn't have to include it
[2012-03-15 20:34:00 -0400] hoover_damm: just depend on it
[2012-03-15 20:35:00 -0400] nlloyds2: oh
[2012-03-15 20:35:00 -0400] lusis: errrr are you sure about that?
[2012-03-15 20:36:00 -0400] hoover_damm: lusis, that's what I've always done and it's just worked.
[2012-03-15 20:36:00 -0400] hoover_damm: provided the cookbook is depended upon the cookbook loader should ship it to the client
[2012-03-15 20:36:00 -0400] hoover_damm: and the client will include it in the cache, chef runs, loads up your cookbook as it's in the cache
[2012-03-15 20:36:00 -0400] hoover_damm: win
[2012-03-15 20:36:00 -0400] lusis: right
[2012-03-15 20:37:00 -0400] lusis: misunderstood the issue
[2012-03-15 20:37:00 -0400] hoover_damm: ah
[2012-03-15 20:38:00 -0400] kreedy: revised question: is there a better way to get knife to bootstrap using apt/deb than "--distro ubuntu10.04-apt", say one that works with other versions of ubuntu as well?
[2012-03-15 20:39:00 -0400] lusis: kreedy: write your own template =/
[2012-03-15 20:39:00 -0400] lusis: or use omnibus
[2012-03-15 20:39:00 -0400] kreedy: or should i just make more templates for the later versions
[2012-03-15 20:39:00 -0400] hoover_damm: srsly use omnibus
[2012-03-15 20:39:00 -0400] lusis: yeah
[2012-03-15 20:39:00 -0400] hoover_damm: it's a single package that includes everything preinstalled
[2012-03-15 20:39:00 -0400] hoover_damm: and it's really easy to move your production to
[2012-03-15 20:39:00 -0400] lusis: one template to rule them all
[2012-03-15 20:39:00 -0400] hoover_damm: create a custom template for omnibus
[2012-03-15 20:39:00 -0400] hoover_damm: and then just re-bootstrap your servers
[2012-03-15 20:40:00 -0400] lusis: and you aren't polluting your system ruby
[2012-03-15 20:40:00 -0400] nlloyds2: kreedy: I use this, with a ruby 1.9.2 package https://gist.github.com/2046747
[2012-03-15 20:40:00 -0400] hoover_damm: lusis, i don't know how you guys lived with it in your system ruby so long
[2012-03-15 20:40:00 -0400] kreedy: awesome. i'll look into that
[2012-03-15 20:40:00 -0400] lusis: hoover_damm: not a ruby shop
[2012-03-15 20:40:00 -0400] lusis: so it didn't matter ;)
[2012-03-15 20:40:00 -0400] hoover_damm: yeah
[2012-03-15 20:40:00 -0400] nlloyds2: hoover_damn, lusis: What's omnibus and where do I get it?
[2012-03-15 20:40:00 -0400] hoover_damm: only way that'd happen
[2012-03-15 20:40:00 -0400] hoover_damm: nlloyds2, github.com/opscode/omnibus
[2012-03-15 20:40:00 -0400] lusis: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-03-15 20:40:00 -0400] lusis: that's the template
[2012-03-15 20:41:00 -0400] atomic-penguin:  omnibus?
[2012-03-15 20:41:00 -0400] savant: whats omnibus
[2012-03-15 20:41:00 -0400] hoover_damm: if you want 1.9.3 + libyaml
[2012-03-15 20:41:00 -0400] atomic-penguin: omnibus?
[2012-03-15 20:41:00 -0400] bawt: omnibus is a project for building full-stack packages for a variety of platforms, and is used to build the 'chef-full' packages downloaded from http://opscode.com/chef/install or with http://opscode.com/chef/install.sh
[2012-03-15 20:41:00 -0400] hoover_damm: you can find my branch at github.com/damm/omnibus
[2012-03-15 20:41:00 -0400] hoover_damm: and clone it and build your own
[2012-03-15 20:41:00 -0400] savant: oh that sounds like a ridiculous thing
[2012-03-15 20:41:00 -0400] hoover_damm: lusis, but having to install ruby to use chef sucks if your not a ruby shop
[2012-03-15 20:42:00 -0400] lusis: hoover_damm: meh
[2012-03-15 20:42:00 -0400] lusis: hoover_damm: it was not a problem
[2012-03-15 20:42:00 -0400] lusis: we needed ruby for some small scripts as well
[2012-03-15 20:42:00 -0400] lusis: but omnibus would have been much better
[2012-03-15 20:42:00 -0400] hoover_damm: if you have rubyists sure
[2012-03-15 20:42:00 -0400] hoover_damm: but shouldn't they be javaists?
[2012-03-15 20:42:00 -0400] hoover_damm: j/k
[2012-03-15 20:42:00 -0400] hoover_damm: writing shell scripts in java
[2012-03-15 20:42:00 -0400] c_t: er
[2012-03-15 20:42:00 -0400] hoover_damm: god cut my knee's off now
[2012-03-15 20:42:00 -0400] lusis: actually they're called "people who hate themselves"
[2012-03-15 20:43:00 -0400] c_t: is ruby that hard to install all of the sudden?
[2012-03-15 20:43:00 -0400] lusis: c_t:  one word
[2012-03-15 20:43:00 -0400] lusis: redhat
[2012-03-15 20:43:00 -0400] ssd7_: +1 for omnibus.  kreedy: If you really want to stick with the apt repos, the only 10.04 specific thing in that template is the distro name in the apt config file.  Shouldn't be too hard to modify it to grab system's distro name, using something like lsb_release
[2012-03-15 20:43:00 -0400] lusis: actually
[2012-03-15 20:43:00 -0400] c_t: urk
[2012-03-15 20:43:00 -0400] hoover_damm: c_t, my one word is ubuntu
[2012-03-15 20:43:00 -0400] lusis: add a number
[2012-03-15 20:43:00 -0400] lusis: redhat5
[2012-03-15 20:43:00 -0400] lusis: actually add a bit more
[2012-03-15 20:43:00 -0400] lusis: 7 year LTS
[2012-03-15 20:43:00 -0400] hoover_damm: c_t, ubuntu is actually the #1 reason I have to compile my rubies
[2012-03-15 20:43:00 -0400] lusis: insert bullet, pull trigger
[2012-03-15 20:43:00 -0400] hoover_damm: right
[2012-03-15 20:43:00 -0400] lusis: I fpm'd a 1.9.2 install
[2012-03-15 20:43:00 -0400] hoover_damm: I am caremad
[2012-03-15 20:43:00 -0400] nlloyds2: FPM FTW
[2012-03-15 20:43:00 -0400] hoover_damm: care too much
[2012-03-15 20:43:00 -0400] lusis: and we used a cusomt bootstrap
[2012-03-15 20:44:00 -0400] nlloyds2: here's some rpm rubies: https://github.com/cramerdev/rpms
[2012-03-15 20:44:00 -0400] nlloyds2: need to get a 1.9.3 up there
[2012-03-15 20:44:00 -0400] kreedy: wow omnibus reminds me a lot of blueprint
[2012-03-15 20:44:00 -0400] NewToChef: Thanks for that. apt_repository issue resolved. Now resolving error fetching the package.
[2012-03-15 20:45:00 -0400] lusis: kreedy: that makes no sense
[2012-03-15 20:45:00 -0400] lusis: heh
[2012-03-15 20:45:00 -0400] lusis: or did blueprint ship its own ruby as well
[2012-03-15 20:45:00 -0400] lusis: ?
[2012-03-15 20:45:00 -0400] kreedy: that it did not
[2012-03-15 20:45:00 -0400] kreedy: more the concept of shell script to rule them all
[2012-03-15 20:46:00 -0400] kreedy: putting omnibus on my todo list, and back to looking at money patching for the short term
[2012-03-15 20:47:00 -0400] lusis: ahh omnibus is so much more
[2012-03-15 20:48:00 -0400] lusis: nice vendor-everything chef-client install
[2012-03-15 20:49:00 -0400] kreedy: omni bus looks nice, but would i lose the ability to just bootstrap boxes with knife ec2, knife linode, etc?
[2012-03-15 20:50:00 -0400] kreedy: i know i could write other scripts to spin up the boxes, but why reinvent the wheel?
[2012-03-15 20:51:00 -0400] lusis: no
[2012-03-15 20:51:00 -0400] lusis: omnibus has no impact on that
[2012-03-15 20:51:00 -0400] lusis: you just use a different bootstrap template
[2012-03-15 20:51:00 -0400] kreedy: ahh. that makes sense
[2012-03-15 20:51:00 -0400] lusis: knife blah blah blah -d chef-full
[2012-03-15 20:57:00 -0400] flashmanbahadur: Having an issue with the template resource.  I created a LWRP that templates a file that should exist in the recipe that uses the LWRP.  I specify the source with cookbook new_resource.cookbook_name    .  However, this does not work.  If I put the source file only in the cookbook with the LWRP or only in the cookbook that uses the LWRP it does not work.  If I place it in both, then it works.
[2012-03-15 20:58:00 -0400] flashmanbahadur: When the source file is placed in the cookbook with the LWRP it says it cannot find the file in cookbook which calls the LWRP (which is where it should be).  When the source file is placed in the proper location in the cookbook that uses the LWRP it says it cannot find the file on the local filesystem as if it were not downloading the file properly.
[2012-03-15 21:00:00 -0400] flashmanbahadur: https://gist.github.com/47f9d12757e0876e6b0e is the log from when it fails to find the file that it should have downloaded from the cookbook implementing the LWRP
[2012-03-15 21:04:00 -0400] flashmanbahadur: strangely, if I rerun chef after the first run
[2012-03-15 21:04:00 -0400] flashmanbahadur: it will run fine
[2012-03-15 21:05:00 -0400] flashmanbahadur: properly templating the files
[2012-03-15 21:05:00 -0400] NewToChef: Feels really good. Got the cookbook working as expected.
[2012-03-15 21:06:00 -0400] NewToChef: My first ;-)
[2012-03-15 21:08:00 -0400] chip-: NewToChef: Welcome to a long and rewarding journey.
[2012-03-15 21:09:00 -0400] hippiehacker: how long should mychef-webui:4040/status take to load 41 windows nodes? 9.1 seconds for a quad-core 4GB ram
[2012-03-15 21:09:00 -0400] hippiehacker: xeon 2.7Ghz chef-server (four chef-server-api instances + nginx)
[2012-03-15 21:10:00 -0400] chip-: Status is slow.
[2012-03-15 21:21:00 -0400] bendrix: hi
[2012-03-15 21:28:00 -0400] `brendan: where can i check the user/passwd for the webui on a self-hosted server?
[2012-03-15 21:28:00 -0400] `brendan: i see the default is suppose to be admin/p@ssw0rd1
[2012-03-15 21:28:00 -0400] `brendan: but i get the error, "Could not complete logging in."
[2012-03-15 21:35:00 -0400] hoover_damm: `brendan, try checking the chef server logs
[2012-03-15 21:37:00 -0400] hoover_damm: might be something else
[2012-03-15 21:38:00 -0400] hippiehacker: `brendan: https://gist.github.com/1821492
[2012-03-15 21:38:00 -0400] hippiehacker: `brendan: that'll allow you to set it at least
[2012-03-15 21:38:00 -0400] hoover_damm: awesome
[2012-03-15 21:40:00 -0400] hippiehacker: if my /var/lib/chef/search_index is empty (specified by chef_solr)
[2012-03-15 21:40:00 -0400] hippiehacker: how can I get chef_solr to populate it 8)
[2012-03-15 21:40:00 -0400] chip-: hippiehacker: check that chef-solr is running. If it's failing, check that /var/run/chef is actually owned chef:chef.
[2012-03-15 21:41:00 -0400] chip-: hippiehacker: make sure chef-expander is running, and was started after chef-server and chef-solr were both up
[2012-03-15 21:42:00 -0400] hippiehacker: chip-: chef-expander is always the last one up, or first one down eh? (... or maybe webui)
[2012-03-15 21:43:00 -0400] chip-: hippiehacker: I don't know for sure that it's a requirement, but I generally restart it if I have solr issues.
[2012-03-15 21:43:00 -0400] hippiehacker: knife index rebuild -V -y still results in /var/lib/chef/search_index being empty 8(
[2012-03-15 21:43:00 -0400] chip-: and my chef-open-source server never started right.
[2012-03-15 21:46:00 -0400] `brendan: hippiehacker, the webui log only shows: http://pastie.org/private/jvqbwubkhfgymuar7tc3qa
[2012-03-15 21:47:00 -0400] `brendan: however, i used the ruby snippet and got in
[2012-03-15 21:50:00 -0400] timsmith: any chance someone can help me with checking the value of an attribute in a recipe?
[2012-03-15 21:51:00 -0400] timsmith: I'd like to check to see if a certain attribute isn't empty
[2012-03-15 21:51:00 -0400] timsmith: I know it exists so node.attribute?() isn't very useful
[2012-03-15 21:51:00 -0400] timsmith: how can I check to see if it's not null?
[2012-03-15 21:52:00 -0400] hoover_damm: if key.exists? && if key.empty?
[2012-03-15 21:53:00 -0400] hoover_damm: perhaps && is wrong
[2012-03-15 21:57:00 -0400] nlloyds2: node['attr'].empty?
[2012-03-15 21:57:00 -0400] timsmith: that would be perfect
[2012-03-15 21:57:00 -0400] timsmith: in this case not empty
[2012-03-15 21:57:00 -0400] timsmith: but that'll be perfect
[2012-03-15 22:07:00 -0400] hoover_damm: !
[2012-03-15 22:07:00 -0400] hoover_damm: lol
[2012-03-15 22:10:00 -0400] jdeamattson: jtimberman: The data bag approach for capturing cluster attributes and state worked out real well. I like what I have been able to put together. Databags + Envrionments rock!
[2012-03-15 22:11:00 -0400] timsmith: is there a way to see the complete picture of all attributes
[2012-03-15 22:11:00 -0400] timsmith: on a node
[2012-03-15 22:11:00 -0400] timsmith: what would actually get acted on
[2012-03-15 22:11:00 -0400] nlloyds2: timsmith: not sure what you mean by "actually get acted on"
[2012-03-15 22:12:00 -0400] timsmith: the result set of every level of attributes as it would get applied on a node.  Assuming there are multiple overriding levels I'd like to know what the end result would be
[2012-03-15 22:12:00 -0400] jdeamattson: jtimberman: Thanks for the feedback yesterday and in the past
[2012-03-15 22:15:00 -0400] flashmanbahadur:  Did a bit more digging on my issue with templating a file from a different cookbook.  It downloads the file to a tempfile as expected (/tmp/chef-rest20120315-721-1ymw56s-0) but when it looks for the file to move it in to place it checks the wrong temp name (/tmp/chef-rendered-template20120315-721-1ddsef6-0)
[2012-03-15 22:17:00 -0400] flashmanbahadur: Anyone found a good work around for this?
[2012-03-15 22:34:00 -0400] flashmanbahadur: Well the name difference is expected
[2012-03-15 22:34:00 -0400] flashmanbahadur: the download is the template, then it tries to render the template with Erubis
[2012-03-15 22:36:00 -0400] flashmanbahadur: looks like its rendering correctly, setting teh access controls, but failing when calling FileUtils.mv
[2012-03-15 22:46:00 -0400] bradh__: hiall
[2012-03-15 22:51:00 -0400] flashmanbahadur: may be failing earlier, looks like File.chown should fail if the file does not exist, and it is succeeding when set_all_access_controls(rendered_template.path) is called
[2012-03-15 22:52:00 -0400] flashmanbahadur: somehow it loses the file here
[2012-03-15 22:52:00 -0400] flashmanbahadur: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/template.rb#L47
[2012-03-15 22:54:00 -0400] timsmith: One more bit on checking for empty attributes.  I'm tweaking the resolver cookbook which has [:resolver][:nameservers] == [ "" ] as default attributes.  .empty? and .nil? methods didn't find that, but an outright check of if node[:resolver][:nameservers] == [ "" ] triggered.  What am I missing here?
[2012-03-15 22:55:00 -0400] nlloyds2: That's an array with a single element that has an empty string, so it's not empty
[2012-03-15 22:55:00 -0400] timsmith: so if I check to see if the 0 position is empty it should trigger
[2012-03-15 22:56:00 -0400] nlloyds2: or [""].all?(&:empty?) would call the empty? method on all elements of the array and return true if they were all empty
[2012-03-15 22:58:00 -0400] chip-: Question: Where do I put ssh keys so I can do knife ssh from Windows?
[2012-03-15 22:58:00 -0400] chip-: Very interested in knife-windows for my non-mac comrades.
[2012-03-15 22:59:00 -0400] nlloyds2: chip-: What are use using as an ssh client?
[2012-03-15 23:00:00 -0400] chip-: nlloyds2: does knife ssh require a 3rd-party ssh client to work for knife-windows?
[2012-03-15 23:01:00 -0400] nlloyds2: Don't know. Are you trying to ssh *to* a windows machine or from one?
[2012-03-15 23:01:00 -0400] chip-: My colleague wants to ssh from, via knife-windows
[2012-03-15 23:02:00 -0400] chip-: and knife ec2, and etc.
[2012-03-15 23:03:00 -0400] pcn: I think knife ssh uses ruby's Net::SSH.  It's an old version that knife depends on, but I'm not sure how much it does in terms of handling terminal emulation, etc.
[2012-03-15 23:04:00 -0400] fujin: it does some basic readline handling
[2012-03-15 23:04:00 -0400] fujin: you can use screen/tmux too,
[2012-03-15 23:04:00 -0400] fujin: tell your windows guy to install cygwin =)
[2012-03-15 23:04:00 -0400] chip-: Yes yes, but hearts and minds, sir.
[2012-03-15 23:05:00 -0400] hoover_damm: knife ssh should be pure ruby
[2012-03-15 23:05:00 -0400] hoover_damm: so it should just work
[2012-03-15 23:05:00 -0400] hoover_damm: afaik
[2012-03-15 23:10:00 -0400] chip-: Yes, I expect it to work. I just don't know hwere to put my keys!
[2012-03-15 23:10:00 -0400] chip-: *where
[2012-03-15 23:13:00 -0400] timsmith: anyone know why the desired state of the sudo cookbook would be to upgrade the sudo package on every run?
[2012-03-15 23:16:00 -0400] flaccid: maybe security
[2012-03-15 23:17:00 -0400] ssd7_: timsmith: I imagine the author wanted to make sure the system always had an up to date sudo.  The package provide should only take action if there is an actual upgrade available.
[2012-03-15 23:18:00 -0400] jtimberman: jdeamattson: awesome glad that was helpful
[2012-03-15 23:19:00 -0400] jdeamattson: jtimberman Have to show you what I put together sometime. Think it would be a great example to people. I have permission to extract it and make it generalized. Also, cooked up a "system_limits" cookbook in the process, which I will be releasing.
[2012-03-15 23:21:00 -0400] amccloud: lmao. just googled "chef celery cookbook" not what I was expecting
[2012-03-15 23:23:00 -0400] miah: celery is yum
[2012-03-15 23:26:00 -0400] timsmith: ssd7_:  the yum provider is pretty evil.  Doing upgrade ends up having yum check for the fastest mirror / pull down a package list
[2012-03-15 23:29:00 -0400] drrk: I seem to recall you can download cookbooks from the community with knife, is this true?
[2012-03-15 23:30:00 -0400] chip-: drrk: true!
[2012-03-15 23:30:00 -0400] chip-: drrk: although I recommend you really understand git branching strategies before you get started, and also be aware that knife will happily download and upgrade dependencies for community cookbooks when you didn't ask for them.
[2012-03-15 23:30:00 -0400] drrk: hmm
[2012-03-15 23:31:00 -0400] drrk: by git branching strategies do you mean in general, or chef specific?
[2012-03-15 23:34:00 -0400] fujin: you can use 'knife cookbook site download <foo>' to just grab the tarball and not doing any of the built in pristine vendor branching shit
[2012-03-15 23:34:00 -0400] JasonBox: drrk: the knife method will... yeah do what fujin said
[2012-03-15 23:34:00 -0400] drrk: cheers
[2012-03-15 23:35:00 -0400] fujin: i just prefer to drive git
[2012-03-15 23:35:00 -0400] JasonBox: Indeed
[2012-03-15 23:35:00 -0400] fujin: nod nod
[2012-03-15 23:35:00 -0400] JasonBox: Oddly, I never update the cookbooks after I vendor them, essentially defeating the point...
[2012-03-15 23:36:00 -0400] JasonBox: ... but I could, which is nice
[2012-03-15 23:37:00 -0400] fujin: drrk: also look at the librarian-chef tool
[2012-03-15 23:37:00 -0400] fujin: you can say yo go grab cookbook sfrom all of these places, cookbook site, github, submodules, directory.. while applying version constraiunts
[2012-03-15 23:37:00 -0400] fujin: it's dope
[2012-03-15 23:37:00 -0400] fujin: https://github.com/heavywater/pennyworth/blob/develop/Cheffile
[2012-03-15 23:40:00 -0400] drrk: cheers
[2012-03-15 23:42:00 -0400] drrk: right, time to sleep, thanks for your help

[2012-03-16 07:14:00 -0400] BryanWB: readme
[2012-03-16 07:14:00 -0400] BryanWB: maek: ^^
[2012-03-16 07:14:00 -0400] maek: BryanWB: ty. why that vs a contrib dir?
[2012-03-16 07:15:00 -0400] maek: does it screw up the upload?
[2012-03-16 07:25:00 -0400] BryanWB: umm, i am not familiar w/ contrib/ dir convention
[2012-03-16 07:25:00 -0400] BryanWB: but haven't seen it in cookbooks
[2012-03-16 07:47:00 -0400] miah: https://github.com/opscode/cookbooks/tree/master/application
[2012-03-16 07:47:00 -0400] miah: ^- there is an "examples" directory here. but still, im not sure there is a 'standard' yet
[2012-03-16 08:07:00 -0400] miah: yay. got my silly executes working.
[2012-03-16 08:45:00 -0400] ultimoo: any known methods of transactionally updating data bags? maybe any forks of chef or something similar?
[2012-03-16 08:52:00 -0400] fujin: no
[2012-03-16 09:16:00 -0400] ultimoo: ok, thanks
[2012-03-16 09:39:00 -0400] lflux: ohai
[2012-03-16 09:40:00 -0400] lflux: is there anything more to upgrading chef than just running 'gem upgrade chef-*'
[2012-03-16 10:19:00 -0400] Guest15284: morning. I have a problem with Chef 0.10.4-1 getting environment override_attributes to apply over recipe default_attributes. On the chef client the default_attribute values appear
[2012-03-16 10:19:00 -0400] Guest15284: (this is via template variables)
[2012-03-16 10:25:00 -0400] HasanB: Could I get a little quickee pointer about Chef attributes from one of you, please?
[2012-03-16 10:26:00 -0400] HasanB: The cookbook docs say "set the attribute node['postgresql']['password']['postgres'] in your node's json_attribs file or in a role"
[2012-03-16 10:28:00 -0400] HasanB: The attributes reference gives an example -- { "apache": { "listen_ports": ["81", "8080"] } }
[2012-03-16 10:29:00 -0400] HasanB: Would the correct syntax be { "postgresql": { "password": "2dumb4words" } }   ??
[2012-03-16 10:33:00 -0400] BryanWB: HasanB: in attributes/default.rb  put   default['postg....']['password']['postgres'] = 'secret'
[2012-03-16 10:34:00 -0400] BryanWB: or in roles/postgres_foo.rb     default_attributes( { :postgresql => { :password => { :postgres => 'secret' } } } )
[2012-03-16 10:36:00 -0400] HasanB: I was trying to put it in the section   "default_attributes": {     "postgresql": { "password": "2dumb4words" }   },    of a role defintion  PG_role.json
[2012-03-16 10:40:00 -0400] HasanB: Actually, that seems to have worked! now.  The Hosted Chef Roles page show it coherently anyway.   I think I had too many brace brackets.  Doh!   (2 many new things all at once, sorry)
[2012-03-16 10:42:00 -0400] HasanB: Nope !!     FATAL: NoMethodError: undefined method `has_key?' for "2dumb4words":String
[2012-03-16 10:57:00 -0400] fish_: are there any known issues with chef/ohai failing to detect the hostname on ec2?
[2012-03-16 10:57:00 -0400] fish_: had this the first time now: the hostname node attribute in the automatic section was empty
[2012-03-16 10:57:00 -0400] fish_: a new chef run fixed it again
[2012-03-16 11:01:00 -0400] fish_: oh, known issues on 0.6 :/
[2012-03-16 11:25:00 -0400] AdamD: morning. I have a problem with Chef 0.10.4-1 getting environment override_attributes to apply over recipe default_attributes in a template file. On the chef client the default_attribute values appear in the templated file when chef has set it up
[2012-03-16 11:46:00 -0400] AdamD: i'm mapping template variables to node attributes, setting default attributes at the cookbook level, and then overriding in environment attributes, but the environment attributes aren't appearing in the configured files on the client, the default attributes from the cookbook are
[2012-03-16 11:47:00 -0400] AdamD: weirdly this works on some roles/nodes fine but not on the one I am looking at currently
[2012-03-16 11:53:00 -0400] smith3v: Hi all
[2012-03-16 11:54:00 -0400] BryanWB: ciao! zdracte!
[2012-03-16 11:54:00 -0400] BryanWB: AdamD: sure u uploaded the role? i often forget to
[2012-03-16 11:55:00 -0400] AdamD: hi, the role is definitely uploaded, the file fromt he template gets created
[2012-03-16 11:55:00 -0400] AdamD: but the values in it are the values fromt he default attributes
[2012-03-16 11:56:00 -0400] AdamD: it is not overriding them witht he override_attributes from the environment file for some reason, even through they exist there too and that file should be evaluated as higher precedence according to the manual
[2012-03-16 11:56:00 -0400] BryanWB: argh, don't know then :(
[2012-03-16 11:57:00 -0400] AdamD: its driving me mental tryign to figure it out :-/
[2012-03-16 12:03:00 -0400] gurrie: Hi
[2012-03-16 12:04:00 -0400] gurrie: Can anyone here tell me what the best way is to reference files in the cookbook files directory?
[2012-03-16 12:11:00 -0400] lflux: the cookbook_file resource?
[2012-03-16 12:13:00 -0400] gurrie: Thanks, what I am trying to do is install jdk 5. So what I wanted to do was use execute to do a silent install using the install file in the cookbook files directory (without copying) it. But thinking about it this is wrong and using the cookbook_file resource is the right way to go.
[2012-03-16 12:13:00 -0400] gurrie: Thanks for the answer
[2012-03-16 12:22:00 -0400] `brendan: i will say, the ubuntu apt-get package install has grown leaps & bounds
[2012-03-16 12:22:00 -0400] `brendan: didn't run into any past problems that i did before
[2012-03-16 12:24:00 -0400] `brendan: ty opscode folks :D
[2012-03-16 12:51:00 -0400] `brendan: c:\Users\blah\repos\chef-repo\cookbooks>knife cookbook create working_with_git
[2012-03-16 12:51:00 -0400] `brendan: ** Creating cookbook working_with_git
[2012-03-16 12:51:00 -0400] `brendan: ** Creating README for cookbook: working_with_git
[2012-03-16 12:51:00 -0400] `brendan: ** Creating metadata for cookbook: working_with_git
[2012-03-16 12:51:00 -0400] `brendan: where the hell is the cookbook folder created?!
[2012-03-16 12:53:00 -0400] fearoffish: `brendan: depends what your knife.rb file says, I believe
[2012-03-16 12:53:00 -0400] fearoffish: you define a cookbooks_path variable or something like that
[2012-03-16 12:53:00 -0400] `brendan: ahh
[2012-03-16 12:53:00 -0400] `brendan: i dont have one by default
[2012-03-16 12:53:00 -0400] `brendan: nothing like that specified in knife.rb
[2012-03-16 12:53:00 -0400] fearoffish: cookbook_path, singular
[2012-03-16 12:54:00 -0400] fearoffish: I put this in mine:  cookbook_path            ["#{current_dir}/../cookbooks"]
[2012-03-16 12:54:00 -0400] fearoffish: and my knife.rb is in the /project/.chef/knife.rb location
[2012-03-16 12:56:00 -0400] fearoffish: I just tried out the postgresql cookbook, and it failed creating a config file in /etc/postgresql/8.4/main
[2012-03-16 12:56:00 -0400] `brendan: after saving that to knife.rb, just go ahead and try to recreate or do i need to refresh knife?
[2012-03-16 12:57:00 -0400] fearoffish: try again
[2012-03-16 12:57:00 -0400] fearoffish: oh, I'm on ubuntu 10.04 (for my pg related statement)
[2012-03-16 12:58:00 -0400] fearoffish: going to try a fresh vm and I'll install the package manually to see if it should create that folder
[2012-03-16 12:58:00 -0400] `brendan: could it be because this machine is windows?
[2012-03-16 12:59:00 -0400] fearoffish: probably not
[2012-03-16 12:59:00 -0400] fearoffish: there are a few locations that the variables can come from
[2012-03-16 12:59:00 -0400] `brendan: http://pastie.org/private/bjxcza7tm3ivgv282a3c8a
[2012-03-16 12:59:00 -0400] fearoffish: the project knife.rb, a user one and a global one
[2012-03-16 13:00:00 -0400] `brendan: that's knife.rb
[2012-03-16 13:00:00 -0400] fearoffish: you probably need backslashes come to think of it
[2012-03-16 13:00:00 -0400] nsc1: anyone here that could help with a new server issue?
[2012-03-16 13:01:00 -0400] fearoffish: in unix the file paths are /folder/rar
[2012-03-16 13:01:00 -0400] fearoffish: nsc1: just ask, if someone can help and is awake, they will
[2012-03-16 13:01:00 -0400] `brendan: but client_key has forward slashes as well
[2012-03-16 13:01:00 -0400] fearoffish: yeah, I mean, they're file paths
[2012-03-16 13:01:00 -0400] nsc1: New to chef, have a server that seems to be up and running.  However both knife commands as well as client registration seem to "half work".
[2012-03-16 13:02:00 -0400] fearoffish: on windows they're C:\folder\rar
[2012-03-16 13:02:00 -0400] `brendan: client_key 'c:/Users/brendan/repos/chef-repo/.chef/brendan.pem'
[2012-03-16 13:02:00 -0400] nsc1: for example, knife cookbook upload mysql . does upload the cookbook, but then displays errors
[2012-03-16 13:02:00 -0400] `brendan: wouldn't that error/cause issues?
[2012-03-16 13:02:00 -0400] fearoffish: `brendan: don't make me repeat myself :P
[2012-03-16 13:02:00 -0400] fearoffish: change the slashes, all of them
[2012-03-16 13:02:00 -0400] nsc1: ERROR: Server returned error for http://localhost:4000/cookbooks/wordpress/0.8.8, retrying 1/5 in 4s
[2012-03-16 13:02:00 -0400] `brendan: which part?
[2012-03-16 13:02:00 -0400] bawt: which part is wrong on the wiki
[2012-03-16 13:02:00 -0400] `brendan: huh
[2012-03-16 13:03:00 -0400] fearoffish: a wiki page, yeah, I should have linked to something instead of assuming knowledge.  O_O
[2012-03-16 13:03:00 -0400] `brendan: cookbook_path'c:/Users/brendan/repos/chef-repo/cookbooks'
[2012-03-16 13:03:00 -0400] `brendan: that works
[2012-03-16 13:04:00 -0400] `brendan: so its not the slashes...
[2012-03-16 13:05:00 -0400] fearoffish: haven't used windows, but I guess your issue is not slash related, but instead just that cookbook_path
[2012-03-16 13:05:00 -0400] `brendan: i just wish it
[2012-03-16 13:06:00 -0400] `brendan: worked with your ["#{current_dir}/../cookbooks"]
[2012-03-16 13:06:00 -0400] `brendan: so i wouldn't have to verbosely set it
[2012-03-16 13:06:00 -0400] fearoffish: aha, my postgresql cookbook issue is encoding related
[2012-03-16 13:06:00 -0400] fearoffish: `brendan: probably will, if you set this at the top:  current_dir = File.dirname(__FILE__)
[2012-03-16 13:07:00 -0400] fearoffish: I missed that bit ;-)
[2012-03-16 13:07:00 -0400] fearoffish: using a variable that I didn't tell you to set.  oops :)
[2012-03-16 13:07:00 -0400] `brendan: np
[2012-03-16 13:09:00 -0400] `brendan: perfecto
[2012-03-16 13:09:00 -0400] `brendan: worked that time once we had the var set
[2012-03-16 13:09:00 -0400] `brendan: ty fearoffish
[2012-03-16 13:10:00 -0400] workmad3: fearoffish: regarding slashes - the ruby file APIs always deal with '/' as path separators and convert for you :)
[2012-03-16 13:11:00 -0400] fearoffish: workmad3: interesting, I only though File.join did that.  thanks
[2012-03-16 13:11:00 -0400] nsc1: ever seen this?  on a new server that seems to be running ok: knife cookbook upload foo does upload, but then starts saying: ERROR: Server returned error for http://localhost:4000/cookbooks/wordpress/0.8.8, retrying 1/5 in 3s
[2012-03-16 13:12:00 -0400] workmad3: fearoffish: yeah, it caught me the other day doing something (can't remember what) but I ended up on a bug ticket on ruby saying 'File::SEPARATOR' doesn't give '\' on windows, and it was closed saying ruby only ever uses '/' for portability reasons :)
[2012-03-16 13:12:00 -0400] fearoffish: aha
[2012-03-16 13:13:00 -0400] workmad3: now I just need to train myself to stop doing long File.join statements :)
[2012-03-16 13:13:00 -0400] bkocik: Mildly annoying: The only reliable way I've found to set a node's environment is via the Chef server web UI
[2012-03-16 13:14:00 -0400] bkocik: Neither the set_environment knife plugin, setting the environment in knife.rb before a bootstrap, nor passing the -E flag to knife bootstrap have worked for me.
[2012-03-16 13:14:00 -0400] workmad3: bkocik: what about editing the node json with knife and altering the chef_environment key?
[2012-03-16 13:14:00 -0400] bkocik: Oh, I take that back, the plugin does work.
[2012-03-16 13:15:00 -0400] bkocik: workmad3: That may work as well. I guess what I was really after was a reliable way to set a node's environment at the moment I bootstrapped it.
[2012-03-16 13:15:00 -0400] workmad3: bkocik: ah, I push a skeleton node json into my server before bootstraping to do that :)
[2012-03-16 13:15:00 -0400] bkocik: My web recipe sets the "RailsEnv" setting for passenger based on the node's environment, and so far on every web server I've bootstrapped I've had to go in and change it from "_default" in the conf file.
[2012-03-16 13:16:00 -0400] bkocik: Oh well. Minor annoyance. :)
[2012-03-16 13:16:00 -0400] workmad3: bkocik: surely when you change the environment the file gets regenerated and changed? :)
[2012-03-16 13:17:00 -0400] workmad3: bkocik: rather than editing the file manually
[2012-03-16 13:17:00 -0400] bkocik: It probably would if I re-ran chef-client.
[2012-03-16 13:17:00 -0400] bkocik: s/probably/surely :)
[2012-03-16 13:18:00 -0400] workmad3: you don't run chef-client again after bootstrapping?
[2012-03-16 13:18:00 -0400] bkocik: This is what the world has come to: I'm complaining because instead of having a fully-configured server up and running in one step, it takes me *two* steps.
[2012-03-16 13:18:00 -0400] workmad3: bkocik: lol, yeah :D
[2012-03-16 13:19:00 -0400] bkocik: It'll run by itself eventually. I install the chef-client::cron recipe on all my nodes.
[2012-03-16 13:26:00 -0400] jtimberman: mark
[2012-03-16 13:26:00 -0400] jtimberman: (fyi, trackbar plugin for irssi is nice :)
[2012-03-16 13:29:00 -0400] renchap: trackbar ?
[2012-03-16 13:29:00 -0400] renchap: ho, i have it :o
[2012-03-16 13:29:00 -0400] jtimberman: :)
[2012-03-16 13:29:00 -0400] jtimberman: http://scripts.irssi.org/html/trackbar.pl.html
[2012-03-16 13:29:00 -0400] renchap: what do you use /mark for ?
[2012-03-16 13:30:00 -0400] jtimberman: it draws the line
[2012-03-16 13:30:00 -0400] jtimberman: from trackbar.pl
[2012-03-16 13:30:00 -0400] renchap: i suppose that my way to do it is to /win 1 while i am afk
[2012-03-16 13:30:00 -0400] jtimberman: otherwise its automatic when you switch channels
[2012-03-16 13:33:00 -0400] `brendan: that's nifty
[2012-03-16 13:33:00 -0400] `brendan: good little script
[2012-03-16 13:35:00 -0400] jtimberman: :)
[2012-03-16 13:36:00 -0400] jtimberman: now install it with a recipe!!
[2012-03-16 13:37:00 -0400] BryanWB: lusis: i actually just finished reading the jboss as 7 configuration book. it makes me wonder, is all this java ee 6 shit actually performant?
[2012-03-16 13:37:00 -0400] BryanWB: i am swimming in acronym soup
[2012-03-16 13:39:00 -0400] BryanWB: ejb's make /me's head hurt
[2012-03-16 13:40:00 -0400] jtimberman: https://gist.github.com/2050102
[2012-03-16 13:43:00 -0400] `brendan: any word on the chef book?
[2012-03-16 13:43:00 -0400] `brendan: ie a 'pro chef' like pro puppet
[2012-03-16 13:43:00 -0400] BryanWB: hopefully this summer
[2012-03-16 13:43:00 -0400] BryanWB: most likely late summer
[2012-03-16 13:51:00 -0400] jtimberman: `brendan: it'll be "Chef: The Definitive Guide" by O'Reilly.
[2012-03-16 13:51:00 -0400] jtimberman: And sometime this summer.
[2012-03-16 14:06:00 -0400] miketheman: gem_package provider - installing a version of a gem with "pre" - what should the version parameter be?
[2012-03-16 14:08:00 -0400] nico: jtimberman: good news
[2012-03-16 14:09:00 -0400] matschaffer: anyone know why `knife ssh name:i-fd2e4099` would fail with "FATAL: No nodes returned from search!" even though `knife node list` shows "i-fd2e4099"? Is the hyphen throwing things off maybe?
[2012-03-16 14:11:00 -0400] matschaffer: oh hrm I think this node may just be busted. No fqdn in the node data
[2012-03-16 14:11:00 -0400] hoover_damm: usually that's how it falters
[2012-03-16 14:12:00 -0400] hoover_damm: search works with the exception of things being slightly off
[2012-03-16 14:17:00 -0400] `brendan: jtimberman, sounds good
[2012-03-16 14:17:00 -0400] `brendan: im looking forward to it
[2012-03-16 14:18:00 -0400] rndm: is it possible to use a template from a different cookbook?
[2012-03-16 14:18:00 -0400] flashmanbahadur: rndm: yes
[2012-03-16 14:18:00 -0400] flashmanbahadur: you can source a file from a different cookbook using the cookbook option for a template
[2012-03-16 14:18:00 -0400] flashmanbahadur: on a side note, I have been trying to get it to work properly
[2012-03-16 14:19:00 -0400] flashmanbahadur: and it has been failing in creative ways
[2012-03-16 14:19:00 -0400] flashmanbahadur: mine is being used in a provider, not sure if that has something to do with it
[2012-03-16 14:19:00 -0400] rndm: now that you say that, it sounds like the docs for template is the first place i should have checked =)
[2012-03-16 14:20:00 -0400] rndm: i'll keep an eye out for issues, but i'm using it directly in a recipe
[2012-03-16 14:20:00 -0400] rndm: good luck tracking it down
[2012-03-16 14:20:00 -0400] rndm: flashmanbahadur: and thanks!
[2012-03-16 14:22:00 -0400] nico: flashmanbahadur: I do it, in a lwrp, and it works fine
[2012-03-16 14:22:00 -0400] flashmanbahadur: huh, ill keep hunting
[2012-03-16 14:22:00 -0400] flashmanbahadur: mine fails on new instance bootstrap
[2012-03-16 14:22:00 -0400] flashmanbahadur: but not when running chef client after that
[2012-03-16 14:23:00 -0400] nico: maybe a first synchro
[2012-03-16 14:23:00 -0400] nico: +problem
[2012-03-16 14:23:00 -0400] flashmanbahadur: yeah
[2012-03-16 14:23:00 -0400] flashmanbahadur: its weird
[2012-03-16 14:23:00 -0400] flashmanbahadur: it claims it can see the file to set the perms
[2012-03-16 14:23:00 -0400] flashmanbahadur: then it tries to move it
[2012-03-16 14:24:00 -0400] flashmanbahadur: and fails on not being able tofind the src/dest file
[2012-03-16 14:24:00 -0400] flashmanbahadur: im going to isolate it a bit more
[2012-03-16 14:24:00 -0400] flashmanbahadur: and see if I can figure it out
[2012-03-16 14:25:00 -0400] nico: flashmanbahadur: is parent hierarchy OK (existing, writable, etc) ?
[2012-03-16 14:25:00 -0400] flashmanbahadur: ?  Not getting what you mean
[2012-03-16 14:26:00 -0400] flashmanbahadur: I can see the file get downloaded as a template and the templater runs on it
[2012-03-16 14:26:00 -0400] nico: yes, but if packages & stuff are installed at bootstrap, maybe you try to work in a dir that doesn't exist until something else creates it
[2012-03-16 14:27:00 -0400] flashmanbahadur: ahh I get what you mean
[2012-03-16 14:27:00 -0400] flashmanbahadur: it should have everything it needs
[2012-03-16 14:27:00 -0400] flashmanbahadur: the appropriate dirs are created right before it during an include_recipe call
[2012-03-16 14:27:00 -0400] flashmanbahadur: and after it crashes i can see that the directories are in place
[2012-03-16 14:41:00 -0400] fearoffish: jtimberman: I wub you.
[2012-03-16 14:43:00 -0400] BryanWB: ssd7: around?
[2012-03-16 14:44:00 -0400] jtimberman: fearoffish: :D
[2012-03-16 14:55:00 -0400] fearoffish: jtimberman: and now I realise it's vmware fusion 3 only :(
[2012-03-16 15:00:00 -0400] fearoffish: hmm, looks like the issue might be small, vmware fusion 4 moves the binary locations
[2012-03-16 15:00:00 -0400] fearoffish: might still work if I fork and adjust :)
[2012-03-16 15:13:00 -0400] fearoffish: even better, you just give it a ~/.fissionrc file and point it at the new binary :)
[2012-03-16 15:14:00 -0400] fearoffish: go d damn it, just re-read your article nad it says all of this!
[2012-03-16 15:17:00 -0400] AdamD: is there an easy way to get chef client to show you all the current attributes it has for the node?
[2012-03-16 15:17:00 -0400] AdamD: need this for debugging really
[2012-03-16 15:17:00 -0400] flashmanbahadur: AdamD: you can use shef and ohai to get most of those I believe
[2012-03-16 15:17:00 -0400] AdamD: ok cheers
[2012-03-16 15:18:00 -0400] BryanWB: AdamD: sadly, ohai didn't load role attributes last i checked, but that could have been fixed
[2012-03-16 15:19:00 -0400] AdamD: yeah is only seems to show auto attributes from what i can see
[2012-03-16 15:20:00 -0400] mkent_: AdamD: best I've found is knife node show <foo> -F json -l
[2012-03-16 15:20:00 -0400] mkent_: should show you the fully merged everything
[2012-03-16 15:22:00 -0400] AdamD: thanks mkent_, just digging through that output now
[2012-03-16 15:24:00 -0400] AdamD: excellent, thanks mkent_, this has showed me exactly what I need to know, thank you
[2012-03-16 15:25:00 -0400] mkent_: awesome, np
[2012-03-16 15:53:00 -0400] flashmanbahadur: is there a way to background some block of code?  I am creating a swap file with an execute block.  Takes about 5 minutes but it would be nice if that could run in parallel with the rest of the tasks since it has no dependencies
[2012-03-16 15:53:00 -0400] flashmanbahadur: alternatively if I background a task in an execute block
[2012-03-16 15:54:00 -0400] flashmanbahadur: does chef wait for the child process to finish?
[2012-03-16 15:55:00 -0400] jbz: Is the 5 minutes really worth the potential ordering muddle?
[2012-03-16 15:55:00 -0400] jbz: Oh, no deps
[2012-03-16 15:56:00 -0400] jbz: still :-)
[2012-03-16 15:56:00 -0400] flashmanbahadur: i get why its normally bad
[2012-03-16 15:56:00 -0400] flashmanbahadur: just annoying
[2012-03-16 15:57:00 -0400] BryanWB: flashmanbahadur: u could w/ a ruby_block and popen
[2012-03-16 15:58:00 -0400] BryanWB: popen would fork an external process that would run independently
[2012-03-16 15:58:00 -0400] jesuschrist: hi guys
[2012-03-16 15:58:00 -0400] flashmanbahadur: thanks BryanWB
[2012-03-16 15:58:00 -0400] jesuschrist: im quite new to chef
[2012-03-16 15:58:00 -0400] jesuschrist: does it work with windows ?
[2012-03-16 15:59:00 -0400] leifmadsen: afternoon all!  I'm wondering what a good method would be in my recipe to check if a process has started after I use the service resource to start a service?
[2012-03-16 15:59:00 -0400] jesuschrist: ty jbz
[2012-03-16 15:59:00 -0400] BryanWB: something like require 'popen'   popen.popen(' shell_command ')
[2012-03-16 15:59:00 -0400] jbz: It does run on Windows, yes
[2012-03-16 15:59:00 -0400] jbz: I wouldn't trust me.
[2012-03-16 16:00:00 -0400] BryanWB: jbz: do popen?
[2012-03-16 16:01:00 -0400] jbz: BryanWB: Nono I wouldn't trust me with the reign of heaven.
[2012-03-16 16:01:00 -0400] jesuschrist: jbz : any good resource for a totally newbie ?
[2012-03-16 16:02:00 -0400] jbz: jesuschrist: Sorry, I don't use Windows myselfI wouldn't have any good recommendations besides the main wiki.
[2012-03-16 16:02:00 -0400] jesuschrist: the main wiki has too many infos for one such myself at this stage
[2012-03-16 16:03:00 -0400] jesuschrist: anything also to set the server jbz?
[2012-03-16 16:04:00 -0400] jbz: jesuschrist: If you're just messing around learning Chef, I strongly recommend signing up for a free account with the Opscode platform.  You can run 5 nodes on the free tier, I think - and that way you don't have to get into dealing with the server until and unless you decide you need to.
[2012-03-16 16:04:00 -0400] BryanWB: +1
[2012-03-16 16:05:00 -0400] jesuschrist: actually its not about messing around, we are evaluating
[2012-03-16 16:05:00 -0400] jesuschrist: something to use in production
[2012-03-16 16:06:00 -0400] jbz: Yes
[2012-03-16 16:06:00 -0400] jbz: we use the platform for our production, several hundred nodes
[2012-03-16 16:06:00 -0400] jesuschrist: i lost all the day behind opsi :\
[2012-03-16 16:06:00 -0400] jbz: :-)
[2012-03-16 16:06:00 -0400] jesuschrist: so you use chef hosted ?
[2012-03-16 16:06:00 -0400] jbz: Put it this way: use the platform to discover if the technology works for you at the client level, i.e. does what you want
[2012-03-16 16:06:00 -0400] jbz: if it does, then you can choose how to host it.
[2012-03-16 16:07:00 -0400] jesuschrist: seems reasonable
[2012-03-16 16:07:00 -0400] jbz: Yes
[2012-03-16 16:07:00 -0400] jbz: we have an enterprise account, and all our AWS/EC2 nodes talk to the Opscode platform.
[2012-03-16 16:07:00 -0400] jbz: We didn't want to deal with running our own Chef servers.
[2012-03-16 16:07:00 -0400] jbz: We've stood them up in recovery tests
[2012-03-16 16:08:00 -0400] jesuschrist: :|
[2012-03-16 16:09:00 -0400] BryanWB: i run my chef-servers, on linux and am quite happy
[2012-03-16 16:09:00 -0400] jesuschrist: and arent you using chef with windows ?
[2012-03-16 16:09:00 -0400] BryanWB: nope, i try not to touch windows
[2012-03-16 16:09:00 -0400] flashmanbahadur: anyone seen this sort of bug before when trying to template?
[2012-03-16 16:09:00 -0400] BryanWB: for religious reasons, it's not kosher
[2012-03-16 16:09:00 -0400] flashmanbahadur: Inconsistency detected by ld.so: dl-open.c: 222: dl_open_worker: Assertion `_dl_debug_initialize (0, args->nsid)->r_state == RT_CONSISTENT' failed!
[2012-03-16 16:09:00 -0400] holoway: wow
[2012-03-16 16:10:00 -0400] jbz: BryanWB++
[2012-03-16 16:10:00 -0400] holoway: flashmanbahadur: no
[2012-03-16 16:10:00 -0400] jbz: jesuschrist: We run some windows EC2 nodes using hosted Chef.
[2012-03-16 16:10:00 -0400] flashmanbahadur: a new bug from my templating issues.
[2012-03-16 16:10:00 -0400] jbz: I'm not involved with writing those cookbooks though so I'm not much help there I'm afraid.
[2012-03-16 16:11:00 -0400] jbz: jesuschrist: There is a 'fast start' guide for windows on the Wiki, if you haven't seen it: http://wiki.opscode.com/display/chef/Fast+Start+Guide+for+Windows
[2012-03-16 16:11:00 -0400] jbz: That'll get you set up with your local machine as both the chef workstation and a running client node, I think.
[2012-03-16 16:11:00 -0400] jesuschrist: thanks jbz
[2012-03-16 16:12:00 -0400] jbz: yw!  Welcome to the kitchen.
[2012-03-16 16:12:00 -0400] jbz: Ignore the sudden gouts of flame and bursts of obscenity.  We're chefs, after all.
[2012-03-16 16:13:00 -0400] jesuschrist: :>
[2012-03-16 16:14:00 -0400] jesuschrist: the damn opscose website doesnt let me register
[2012-03-16 16:14:00 -0400] jesuschrist: :|
[2012-03-16 16:14:00 -0400] jbz: ?
[2012-03-16 16:14:00 -0400] jtimberman: jesuschrist: are you on community.opscode.com/users or community.opscode.com/users/new ?
[2012-03-16 16:15:00 -0400] jbz: and jtimberman swoops in to save the day!
[2012-03-16 16:15:00 -0400] jtimberman: dunno about that. :)
[2012-03-16 16:15:00 -0400] bkocik: jesuschrist: (catching up) It sounds like you're in the same spot with Chef I was about 3 weeks ago, though I'm not using it with Windows. For me, I nearly threw in the towel somewhere around the middle of week 2 - but today I'm really glad I stuck it out and will probably never try to manage a production setup without Chef again.
[2012-03-16 16:15:00 -0400] bkocik: I'm no expert, but I've reached the point where I can generally figure out how to make it do what I want fairly quickly.
[2012-03-16 16:16:00 -0400] jesuschrist: jtimberman : https://community.opscode.com/users/new
[2012-03-16 16:16:00 -0400] jesuschrist: bkocik : you sound, inspiring :p
[2012-03-16 16:17:00 -0400] bkocik: There's a learning curve. You'll get frustrated, then you'll get over it, and you'll be happy you did.
[2012-03-16 16:17:00 -0400] jesuschrist: im having problems even registering on the website :D
[2012-03-16 16:19:00 -0400] jesuschrist: ok dont know how but seems like i got in
[2012-03-16 16:20:00 -0400] gyre007: guys, I'm trying to configure knife against our chef server but I can't seem to find any example...is there any ?? opscode wiki is could not be more abstract than it is...
[2012-03-16 16:23:00 -0400] paulmooring: gyre007:  everything you can do is here http://wiki.opscode.com/display/chef/Chef+Configuration+Settings
[2012-03-16 16:24:00 -0400] paulmooring: I'll throw an example in a gist 1 minute
[2012-03-16 16:26:00 -0400] gyre007: paulmooring, cheers
[2012-03-16 16:26:00 -0400] paulmooring: gyre007:  https://gist.github.com/2050873
[2012-03-16 16:27:00 -0400] paulmooring: some values like node_name and chef_server_url should be different, but that's sort of a baseline knife.rb file
[2012-03-16 16:27:00 -0400] gyre007: paulmooring, AWESOME stuff! Thanks...that's exactly what I was looking for :)
[2012-03-16 16:31:00 -0400] BryanWB: anyone have a recipe, lwrp, mechanism, for configuring virtual host where u have a couple front-end apache servers and many different backend http servers?
[2012-03-16 16:31:00 -0400] BryanWB: i have 2 front-end apache's and 20+ back-end tomcat servers
[2012-03-16 16:33:00 -0400] AdamD: BryanWB: why do you need specific recipe? can't you just use apache recipe on the role for the frontends and tomcat recipe on role for the backends? or am i missing something?
[2012-03-16 16:33:00 -0400] BryanWB: AdamD: have to look at the apache recipe, i don't want to hardcode in the back-end servers that i want apache to proxy to, i want something that use search
[2012-03-16 16:36:00 -0400] AdamD: ah ok, no i haven't seen anythign like that
[2012-03-16 16:37:00 -0400] gyre007: paulmooring, u still here ? I have a question about that config file...
[2012-03-16 16:37:00 -0400] gyre007: when I add a new client to the Chef server...it spits out Public and Private key...
[2012-03-16 16:38:00 -0400] paulmooring: gyre007:  I think you might be getting tripped up with a client vs a node in chef
[2012-03-16 16:39:00 -0400] gyre007: paulmooring, mmm might be
[2012-03-16 16:39:00 -0400] gyre007: I thought you need to set up knife as a client on a chef server...is that not correct ?
[2012-03-16 16:39:00 -0400] paulmooring: every node should have a client, but the client in the case of your knife.rb is probably not a node
[2012-03-16 16:39:00 -0400] paulmooring: that is
[2012-03-16 16:40:00 -0400] paulmooring: but in general you'll let the validator create clients for your nodes, not do it by hand
[2012-03-16 16:41:00 -0400] gyre007: paulmooring, the only thing Im trying to do is to set up knife so that I can query chef server...that's all
[2012-03-16 16:41:00 -0400] gyre007: thought it would be much easier than it is :)
[2012-03-16 16:42:00 -0400] paulmooring: ah, so you generated a client key on the server already right?
[2012-03-16 16:43:00 -0400] gyre007: paulmooring, yes
[2012-03-16 16:43:00 -0400] gyre007: it spat out public and private keys
[2012-03-16 16:43:00 -0400] paulmooring: the server should have a knife configure command to give you everything you need
[2012-03-16 16:44:00 -0400] gyre007: i only have access to it via GUI
[2012-03-16 16:44:00 -0400] gyre007: not cmd line
[2012-03-16 16:45:00 -0400] paulmooring: I see the problem now
[2012-03-16 16:46:00 -0400] paulmooring: Then yes you need to create a client for yourself and copy the private key to your workstation
[2012-03-16 16:46:00 -0400] gyre007: i've done that...im struggling with the config...that's why I came to this room to ask :)
[2012-03-16 16:46:00 -0400] paulmooring: that private key will be the 'client_key' in your knife.rb
[2012-03-16 16:47:00 -0400] gyre007: and what about validation_key
[2012-03-16 16:47:00 -0400] gyre007: will that be created on the fly or...
[2012-03-16 16:48:00 -0400] gyre007: is that a public key ?
[2012-03-16 16:48:00 -0400] gyre007: and validation_client_name
[2012-03-16 16:48:00 -0400] gyre007: I guess node_name is the client which I created manually on Chef right ?
[2012-03-16 16:48:00 -0400] paulmooring: no the validation client is a special client used to create clients/nodes
[2012-03-16 16:49:00 -0400] paulmooring: It should be listed as a client in the webui already
[2012-03-16 16:50:00 -0400] gyre007: mm ?
[2012-03-16 16:52:00 -0400] paulmooring: is this a new install, or are you trying to set up knife for an existing server?
[2012-03-16 16:52:00 -0400] gyre007: oh I see
[2012-03-16 16:52:00 -0400] gyre007: so the validator is there...and I should use validator's public key as validation_key right ?
[2012-03-16 16:52:00 -0400] paulmooring: yes that's correct
[2012-03-16 16:53:00 -0400] gyre007: cool
[2012-03-16 16:53:00 -0400] paulmooring: and if the validator is named validator, you would also need to change validator_name to "validator" (not "chef-validator") in the knife.rb I sent you
[2012-03-16 16:53:00 -0400] gyre007: I see
[2012-03-16 16:53:00 -0400] gyre007: ok let me test this :)
[2012-03-16 16:54:00 -0400] paulmooring: and just so you know, if someone has root access to the server you can run "knife configure -i" and skip all of this :)
[2012-03-16 16:56:00 -0400] gyre007: paulmooring, I will have to contact some people about that ...would be less painful :)
[2012-03-16 16:57:00 -0400] gyre007: nope
[2012-03-16 16:57:00 -0400] gyre007: ERROR: Failed to authenticate
[2012-03-16 16:57:00 -0400] paulmooring: Did that work?
[2012-03-16 16:59:00 -0400] gyre007: bizzare
[2012-03-16 17:00:00 -0400] paulmooring: and you have your key in the same folder as the knife.rb file right?
[2012-03-16 17:00:00 -0400] gyre007: yes
[2012-03-16 17:00:00 -0400] gyre007: well I can put it wherever I want as long as I point to it it .chef/knife.rb so... but yes it's there...its referenced in that error output
[2012-03-16 17:02:00 -0400] paulmooring: that error sounds like it doesn't like your client key
[2012-03-16 17:06:00 -0400] gyre007: paulmooring, yeah
[2012-03-16 17:06:00 -0400] gyre007: strange
[2012-03-16 17:06:00 -0400] gyre007: because I copy pasted it
[2012-03-16 17:06:00 -0400] gyre007: not a rocket scinence :)
[2012-03-16 17:06:00 -0400] gyre007: at least I THOUGHT! :D
[2012-03-16 17:10:00 -0400] gyre007: I tried to regenerate it...
[2012-03-16 17:10:00 -0400] gyre007: the private key...
[2012-03-16 17:14:00 -0400] gyre007: did not work :)
[2012-03-16 17:18:00 -0400] gyre007: just checked that this works perfectly fine with the Hosted Chef....bizzare :)
[2012-03-16 17:37:00 -0400] gyre007: #painful :)
[2012-03-16 17:38:00 -0400] miah: moin
[2012-03-16 17:54:00 -0400] ssd7_: Ohai Chefs!
[2012-03-16 17:55:00 -0400] `brendan: knife.rb:2:in `<main>': undefined method `log_level' for main:Object (NoMethodError)
[2012-03-16 17:55:00 -0400] `brendan: any idea why?
[2012-03-16 18:00:00 -0400] `brendan: tying to do knife cookbook site install mysql
[2012-03-16 18:01:00 -0400] flashmanbahadur: `brendan: add a line like this to your knife.rb
[2012-03-16 18:01:00 -0400] flashmanbahadur: log_level                :info
[2012-03-16 18:02:00 -0400] flashmanbahadur: or see if you have any log_level param in your knife.rb
[2012-03-16 18:02:00 -0400] `brendan: it's there
[2012-03-16 18:02:00 -0400] flashmanbahadur: hmm
[2012-03-16 18:02:00 -0400] `brendan: it was working earlier, but not now
[2012-03-16 18:02:00 -0400] `brendan: 1 sec and ill pastie knife.rb
[2012-03-16 18:03:00 -0400] `brendan: im wondering if its the line breaks, but not positive
[2012-03-16 18:03:00 -0400] `brendan: http://pastie.org/private/vkdinvui7e1c5ojk8q02vg
[2012-03-16 18:03:00 -0400] jbz: `brendan: Are you sure it's executing the proper knife.rb?
[2012-03-16 18:03:00 -0400] `brendan: i hope so :/
[2012-03-16 18:03:00 -0400] jbz: Are you in a directory below the level of that .chef dir?
[2012-03-16 18:03:00 -0400] jbz: Or is there one between you and that level?
[2012-03-16 18:04:00 -0400] jbz: Try it specifying that config with -c
[2012-03-16 18:04:00 -0400] jbz: knife cookbook site install mysql -c <path/to/knife.rb>
[2012-03-16 18:04:00 -0400] `brendan: ok
[2012-03-16 18:04:00 -0400] `brendan: im running it from tne .chef dir
[2012-03-16 18:04:00 -0400] jbz: hm
[2012-03-16 18:05:00 -0400] `brendan: ha
[2012-03-16 18:05:00 -0400] `brendan: wtf
[2012-03-16 18:05:00 -0400] `brendan: i go up a level from .chef
[2012-03-16 18:05:00 -0400] `brendan: and it works..
[2012-03-16 18:05:00 -0400] jbz: oh yeah
[2012-03-16 18:05:00 -0400] `brendan: sorta..
[2012-03-16 18:05:00 -0400] jbz: it tries to find a .chef dir
[2012-03-16 18:05:00 -0400] `brendan: got git errors
[2012-03-16 18:05:00 -0400] jbz: it can't if it's *in* the .chef dir :-P
[2012-03-16 18:06:00 -0400] paulmooring: `brendan: it looks in ./.chef/knife.rb first then ~/.chef/knife.rb otherwise you need to specify the path with the -c option
[2012-03-16 18:06:00 -0400] NewToChef: Where can I find the latest bootstrap file to use for bootstrapping EC2 instances using knife?
[2012-03-16 18:08:00 -0400] `brendan: (14:05:40) (jbz) it can't if it's *in* the .chef dir :-P
[2012-03-16 18:08:00 -0400] `brendan: is that a bug...
[2012-03-16 18:08:00 -0400] `brendan: ?
[2012-03-16 18:08:00 -0400] jbz: No.
[2012-03-16 18:08:00 -0400] jbz: See what paulmooring said above
[2012-03-16 18:08:00 -0400] `brendan: i get that
[2012-03-16 18:08:00 -0400] jbz: you shouldn't be doing operations in the .chef directory.
[2012-03-16 18:08:00 -0400] `brendan: i was just in there from editing knife.rb
[2012-03-16 18:08:00 -0400] jbz: All your other dirs should be somewhere *outside* the .chef dir.
[2012-03-16 18:08:00 -0400] jbz: You should be doing your operations from the base of your chef repo, or from inside repo dirs.
[2012-03-16 18:09:00 -0400] `brendan: they are, it just seems like it should look in cwd, then in ./.chef/knife.rb first then ~/.chef/knife.rb
[2012-03-16 18:09:00 -0400] jbz: I think they are trying to discourage you from doing ops from that directory, because then they have to make lots of guesses about where the cookbooks etc. live.
[2012-03-16 18:09:00 -0400] `brendan: but if cookbook_path is set...
[2012-03-16 18:09:00 -0400] jbz: 'if.'
[2012-03-16 18:10:00 -0400] jbz: :-)
[2012-03-16 18:10:00 -0400] `brendan: if it isn't, it should check
[2012-03-16 18:10:00 -0400] `brendan: :D
[2012-03-16 18:10:00 -0400] `brendan: or behave differently
[2012-03-16 18:10:00 -0400] `brendan: STDERR: error: pathspec 'version' did not match any file(s) known to git.
[2012-03-16 18:10:00 -0400] jbz: yes, that's true, but stillI don't have a problem with software enforcing me not doing potentially destructive ops inside its config directory.
[2012-03-16 18:10:00 -0400] `brendan: was the only error i got and that appears to be related to git
[2012-03-16 18:10:00 -0400] paulmooring: `brendan: you can always put the .chef folder inside your home folder than the config should be global, so it doesn't matter what your pwd is
[2012-03-16 18:11:00 -0400] `brendan: i hate this windows laptop then pushing to a linux box
[2012-03-16 18:11:00 -0400] `brendan: blargh
[2012-03-16 18:15:00 -0400] jbz: NewToChef: Sorry, what were you looking for?
[2012-03-16 18:15:00 -0400] `brendan: ty btw jbz & paulmooring
[2012-03-16 18:15:00 -0400] `brendan: appreciate the guidance
[2012-03-16 18:15:00 -0400] jbz: `brendan: most welcome
[2012-03-16 18:16:00 -0400] NewToChef: I am using this command: knife ec2 server create -I ami-064aad6f -x ubuntu -i ~/mykey.pem
[2012-03-16 18:16:00 -0400] jbz: NewToChef: OK
[2012-03-16 18:16:00 -0400] NewToChef: It gets to the Waiting For sshd part and gets stuck
[2012-03-16 18:17:00 -0400] NewToChef: To that end, I was wondering if I am using the right bootstrap file
[2012-03-16 18:19:00 -0400] ank: NewToChef: can you manually ssh? check your security group?
[2012-03-16 18:19:00 -0400] NewToChef: ok, let me do that now
[2012-03-16 18:19:00 -0400] timsmith: btm: Any word on when Chef .10.10 is expected?
[2012-03-16 18:29:00 -0400] thehar: cwj: meet leifmadsen
[2012-03-16 18:29:00 -0400] thehar: he has that jabber issue
[2012-03-16 18:29:00 -0400] leifmadsen: cwj: ohai :)
[2012-03-16 18:30:00 -0400] thehar: his values are not duped
[2012-03-16 18:30:00 -0400] leifmadsen: not sure if this has anything to do with this, but I see this in DEBUG:     DEBUG: Setting execute[register jid] to the state of the prior execute[register jid]
[2012-03-16 18:31:00 -0400] NewToChef: jbz,ann: The instance is up and running as show in the AWS console. However, I can't ssh in manually either. The security group is default.
[2012-03-16 18:32:00 -0400] cwj: ohaiii
[2012-03-16 18:32:00 -0400] leifmadsen: cwj: I'm looking at chef-2892 right now to see if that is related here
[2012-03-16 18:33:00 -0400] cwj: ah sounds like it could be
[2012-03-16 18:33:00 -0400] leifmadsen: it appears to be pretty close, if not identical, to what I"m seeing
[2012-03-16 18:33:00 -0400] leifmadsen: and I'm on chef 0.10.8 too
[2012-03-16 18:34:00 -0400] cwj: i have not worked with the (e)jabber(d) cookbook, maybe its something that could be solved by refactoring from a definition to a lwrp
[2012-03-16 18:34:00 -0400] cwj: probably not trivial though
[2012-03-16 18:34:00 -0400] leifmadsen: cwj: ya, the pastebin I'm working with right now is this:  http://pastebin.ca/2128874
[2012-03-16 18:34:00 -0400] leifmadsen: it appears the new_resource is not moving to the next value in the array... or so it appears ?
[2012-03-16 18:34:00 -0400] jbz: NewToChef:  Does your default security group allow ssh connections from your location?
[2012-03-16 18:35:00 -0400] NewToChef: Yes it does.
[2012-03-16 18:35:00 -0400] |shad0w|: leifmadsen you have to rename the execute resource
[2012-03-16 18:35:00 -0400] leifmadsen: I've verified the admins and users arrays do not overlap (i.e. users array doesn't start with admin)
[2012-03-16 18:35:00 -0400] NewToChef: From all locations actually.
[2012-03-16 18:35:00 -0400] jbz: NewToChef:  If you telnet to port 22 does it connect?  If you ping it, does it respond?
[2012-03-16 18:35:00 -0400] cwj: ah good idea |shad0w|
[2012-03-16 18:35:00 -0400] leifmadsen: |shad0w|: can you elaborate? sorry still new to chef
[2012-03-16 18:35:00 -0400] |shad0w|: execute "register jid #{new_resource.user}" do
[2012-03-16 18:36:00 -0400] |shad0w|: try that
[2012-03-16 18:36:00 -0400] leifmadsen: ah
[2012-03-16 18:36:00 -0400] cwj: patch that into the provider
[2012-03-16 18:36:00 -0400] leifmadsen: gotcha ok
[2012-03-16 18:36:00 -0400] leifmadsen: let me give that a shot
[2012-03-16 18:36:00 -0400] leifmadsen: thanks for the idea
[2012-03-16 18:36:00 -0400] |shad0w|: np, I ran into before too
[2012-03-16 18:36:00 -0400] |shad0w|: doing something similar
[2012-03-16 18:36:00 -0400] |shad0w|: althought there is probably a more "right" way to handle it
[2012-03-16 18:37:00 -0400] leifmadsen: |shad0w|: maybe so, but that worked!
[2012-03-16 18:38:00 -0400] NewToChef: It doesn't
[2012-03-16 18:38:00 -0400] leifmadsen: thanks so much |shad0w|, cwj and thehar
[2012-03-16 18:38:00 -0400] NewToChef: I have 10 other instances which I have launched from AWS using the same security group
[2012-03-16 18:38:00 -0400] |shad0w|: leifmadsen, note that that will only work as long a the resource.user is uniq
[2012-03-16 18:38:00 -0400] |shad0w|: unique
[2012-03-16 18:38:00 -0400] NewToChef: Able to connect to those just fine though
[2012-03-16 18:38:00 -0400] leifmadsen: |shad0w|: makes sense, in this case it is, and I can probably add checks for that if I needed it to not be
[2012-03-16 18:39:00 -0400] leifmadsen: .uniq array or something as thehar pointed out earlier
[2012-03-16 18:40:00 -0400] |shad0w|: if you had to you could do an iteration of user count and pass that in your resource to name your execute command
[2012-03-16 18:40:00 -0400] jbz: NewToChef: If you can't telnet or ping the instance, it sounds like this is an AWS problem not a chef problem.  Were those others created with the same AMI?
[2012-03-16 18:40:00 -0400] NewToChef: No different AMI
[2012-03-16 18:40:00 -0400] jbz: hm what is the AMI you were using here?  Is it a 'known good' AMI?
[2012-03-16 18:41:00 -0400] NewToChef: ami-064aad6f
[2012-03-16 18:41:00 -0400] jbz: Yes but what is that?  Is it one of yours?  Community?
[2012-03-16 18:41:00 -0400] NewToChef: Community
[2012-03-16 18:41:00 -0400] NewToChef: Can you point me to a list of known good AMI's?
[2012-03-16 18:41:00 -0400] jbz: and if you bring up a new instance manually with that ami, does it work?
[2012-03-16 18:41:00 -0400] NewToChef: Let me try that too
[2012-03-16 18:42:00 -0400] jbz: Also note:  some ubuntu AMIs don't put your key into root@, they put it into ubuntu@ (the canonical images, notably) so you have to take that into account
[2012-03-16 18:43:00 -0400] miah: -x ubuntu
[2012-03-16 18:43:00 -0400] miah: :P
[2012-03-16 18:43:00 -0400] leifmadsen: |shad0w|: oh that's a good idea too -- then you know it's unique :)
[2012-03-16 18:43:00 -0400] jbz: ah, indeed, miah, thank you
[2012-03-16 18:43:00 -0400] leifmadsen: |shad0w|: thanks so much, that was the ticket
[2012-03-16 18:43:00 -0400] jbz: Anyway, if it won't respond to telnet or ping, something else is wrong :-)
[2012-03-16 18:44:00 -0400] miah: ec2 instances fail all the time. sometimes they need a reboot / stop -> start
[2012-03-16 18:44:00 -0400] jbz: yep
[2012-03-16 18:45:00 -0400] jbz: NewToChef: If you're using ubuntu 10.04, here's a current list of AMIs: http://uec-images.ubuntu.com/releases/10.04/release/
[2012-03-16 18:45:00 -0400] NewToChef: jbz: Thanks for that.
[2012-03-16 18:46:00 -0400] btm: timsmith: beta should be out in a week or two.
[2012-03-16 18:46:00 -0400] timsmith: nice
[2012-03-16 18:46:00 -0400] timsmith: thanks
[2012-03-16 18:46:00 -0400] btm: timsmith: waiting on ohai 0.6.12 right now.
[2012-03-16 18:47:00 -0400] btm: timsmith: if regressions are found in ohai 0.6.12 after release, obviously that will slip schedules a bit.
[2012-03-16 18:54:00 -0400] |shad0w|: yw leifmadsen
[2012-03-16 18:55:00 -0400] berngp: anyone has been able to use successfully data_bags with chef solo? I am getting a "Data Bag Items must contain a Hash or Mash!" when doing a data_bag_item('groups', 'tomcat'). The data_bag path points to a dir such that :  `cd /tmp/data_bags && cat groups/tomcat.json` outputs {"id": "tomcat-servers",  "gid": 270 }
[2012-03-16 18:56:00 -0400] leifmadsen: berngp: yes, I'm using them, and when I ran into that, it was because my syntax was wrong, or the data_bag I was referencing in the json file was non-existant
[2012-03-16 18:57:00 -0400] berngp: leifmadsen: thanks. I am a bit blind since i don't see the syntax error in the data bag, will keep trying to figure this out. Good to know that you are already using them successfully.
[2012-03-16 18:58:00 -0400] leifmadsen: berngp: yep, I ran into the error yesterday, and in the end it was because my json was pointing at a data_bag that didn't exist :)
[2012-03-16 18:58:00 -0400] leifmadsen: once I put the data_bag in the right location (and made it exist) things worked fine
[2012-03-16 19:00:00 -0400] berngp: leifmadsen: Thanks again, I am using _Vagrant_ but haven't been able to work this out. Will keep on digging.. it might be that i just need more coffee ;)
[2012-03-16 19:01:00 -0400] leifmadsen: berngp: fair enough, I've been using chef for about 2 weeks and vagrant for about 2 days ;)
[2012-03-16 19:03:00 -0400] berngp: leifmadsen: awesome, similar deal hear but times 4!  I love them both but just haven't figure out this data_bag thingy in Vagrant + Chef-Solo
[2012-03-16 19:04:00 -0400] leifmadsen: berngp: try it outside of vagrant, but I suspect the problem doesn't have to do with vagrant itself -- my guess is either the data_bag doesn't exist (the file) or the path chef is looking in isn't where the files are stored
[2012-03-16 19:04:00 -0400] leifmadsen: in my case my files are setup to point to /tmp/chef-solo so if I don't put the chef-repo there, it just fails in a firey fashion
[2012-03-16 19:05:00 -0400] NewToChef: jbz: It must have been a bad AMI. Used a known good one and was able to ssh in. However, EC2 doesn't let me login as root, Please login as the ubuntu user rather than root user. Won't be able to install Chef as Ubuntu.
[2012-03-16 19:05:00 -0400] asg: NewToChef: use --sudo
[2012-03-16 19:06:00 -0400] NewToChef: Ah ok
[2012-03-16 19:07:00 -0400] berngp: liefmadsen: I am sure that the problem is the user (i.e me) I just don't see it. I'll change the mount point and tweak the chef-solo conf. generated by Vagrant.
[2012-03-16 19:19:00 -0400] flashmanbahadur: has anyone else experienced weird C linking issues after using dpkg and then templating a file?
[2012-03-16 19:29:00 -0400] amccloud: I'm running chef-solo and suddenly it's looking for mysql and /etc/chef/client.pem when I try to use data_bag_item. What's going on?
[2012-03-16 19:34:00 -0400] timsmith: anyone have a moment to help me with the format of the cookbook_versions section in an environment
[2012-03-16 19:34:00 -0400] timsmith: the wiki doesn't seem to be correct
[2012-03-16 19:34:00 -0400] timsmith: the formatting it uses doesn't even match what the app creates by default
[2012-03-16 19:34:00 -0400] timsmith: I'm curious what someones section looks like
[2012-03-16 19:35:00 -0400] cwj: here's one timsmith https://gist.github.com/5415199179fe4bb58289
[2012-03-16 19:35:00 -0400] timsmith: thanks
[2012-03-16 19:35:00 -0400] timsmith: that looks right and is very different than the wiki
[2012-03-16 19:36:00 -0400] chip-: timsmith: link to wrong on the wiki?
[2012-03-16 19:37:00 -0400] chip-: cwj: (cwjohnston, I am crjohnson. Clearly we must fight with knives.)
[2012-03-16 19:37:00 -0400] thehar: lol
[2012-03-16 19:38:00 -0400] drrk: chip-: and I am krjohnson, so clearly we should also fight :)
[2012-03-16 19:39:00 -0400] chip-: drrk / cwj: http://www.hark.com/clips/phfyxjldvz-star-trek-fight-music
[2012-03-16 19:40:00 -0400] cwj: if we do not fight they will kill us both
[2012-03-16 19:40:00 -0400] cwj: excellent and topical sound clip, chip-
[2012-03-16 19:41:00 -0400] |shad0w|: make a gun from diamonds, charcoal, salt peter, and some bamboo, quick!
[2012-03-16 19:41:00 -0400] chip-: cwj: It is not uncommon for my friends and I, when dining together, to fill a conversation lull by grabbing the silverware, pointing it at one another, and singing that together. "Dun dun DUN DUN DUN DA DUN DUNDUNDUN" etc
[2012-03-16 19:41:00 -0400] amccloud: Is there any instances where chef-solo should behave like chef-server?
[2012-03-16 19:41:00 -0400] timsmith: chip-: Looks like I missed the part where it shows in both ruby and json
[2012-03-16 19:42:00 -0400] cwj: chip-: yeah unfortunately common here as well
[2012-03-16 19:43:00 -0400] amccloud: Here is a full stacktrace https://gist.github.com/3b3037167b58dc1e3c77
[2012-03-16 20:26:00 -0400] hoover_damm: amccloud, cannot read...
[2012-03-16 20:26:00 -0400] hoover_damm: amccloud, which means the user that's running cannot read /etc/chef/client.pem
[2012-03-16 20:27:00 -0400] hoover_damm: amccloud, make sure you are running chef as root
[2012-03-16 20:27:00 -0400] amccloud: hoover_damm: why is chef-solo even looking for that though?
[2012-03-16 20:27:00 -0400] amccloud: removing my call to data_bag_item fixes that
[2012-03-16 20:27:00 -0400] amccloud: but i'd like to use data bags
[2012-03-16 20:27:00 -0400] densone: are there any examples of what a seed file looks like for response_file resources?
[2012-03-16 20:29:00 -0400] hoover_damm: amccloud, data bags by default are for a chef server
[2012-03-16 20:29:00 -0400] hoover_damm: amccloud, http://wiki.opscode.com/display/chef/Data+Bags#DataBags-UsingDataBagswithChefSolo
[2012-03-16 20:29:00 -0400] hoover_damm: amccloud, so I would say data_bag_path is not set?
[2012-03-16 20:29:00 -0400] amccloud: hoover_damm: Ah yea, i just saw that it required 10.4
[2012-03-16 20:30:00 -0400] hoover_damm: well that too
[2012-03-16 21:24:00 -0400] josephholsten: anyone whipped up a munin::client or nagios::client recipes for windows?
[2012-03-16 21:26:00 -0400] timsmith: are there any restrictions on version numbers for cookbooks
[2012-03-16 21:26:00 -0400] timsmith: ?
[2012-03-16 21:26:00 -0400] josephholsten: yep, you should use semver
[2012-03-16 21:27:00 -0400] timsmith: I pinned my cookbooks in my environment to 10.3 and set the version from odd version numbers like 0.0.1 to all be 10.3
[2012-03-16 21:27:00 -0400] josephholsten: http://semver.org/
[2012-03-16 21:27:00 -0400] timsmith: now I get 404 errors where it can't find the files for the cookbooks
[2012-03-16 21:28:00 -0400] David_Miller: where can i find documentation on all the DSL methods
[2012-03-16 21:29:00 -0400] David_Miller: Things are kind of mixed all over
[2012-03-16 21:29:00 -0400] David_Miller: I just want to read about search()
[2012-03-16 21:30:00 -0400] josephholsten: David_Miller: they're all over because lots of things can add stuff to the DSL
[2012-03-16 21:30:00 -0400] josephholsten: You want http://wiki.opscode.com/display/chef/Data+Bags
[2012-03-16 21:31:00 -0400] David_Miller: do you know if I can narrow down a search in a recipe by environment, just like I can with knife?
[2012-03-16 21:31:00 -0400] fujin: https://github.com/opscode/chef/blob/master/chef/lib/chef/mixin/language.rb#L214
[2012-03-16 21:32:00 -0400] josephholsten: yes, it's in a couple books I've used
[2012-03-16 21:32:00 -0400] miah: search?
[2012-03-16 21:32:00 -0400] bawt: search is http://wiki.opscode.com/display/chef/Search
[2012-03-16 21:32:00 -0400] fujin: search(:node, 'chef_environment:banana')
[2012-03-16 21:32:00 -0400] David_Miller: ahah! thanks
[2012-03-16 21:33:00 -0400] David_Miller: so I can do a search like 'chef_enviornment:prod role:webserver'
[2012-03-16 21:33:00 -0400] fujin: yes
[2012-03-16 21:33:00 -0400] miah: role:webserver AND chef_environment:prod
[2012-03-16 21:33:00 -0400] miah: its lucene syntax
[2012-03-16 21:33:00 -0400] josephholsten: some useful examples: https://github.com/opscode/cookbooks/blob/master/nagios/recipes/server.rb#L31
[2012-03-16 21:33:00 -0400] David_Miller: sweet thanks alot
[2012-03-16 21:34:00 -0400] fujin: discovery?
[2012-03-16 21:34:00 -0400] bawt: discovery is http://ckbk.it/discovery
[2012-03-16 21:34:00 -0400] fujin: may be useful as well
[2012-03-16 21:34:00 -0400] fujin: cookbook I wrote for some search helpers
[2012-03-16 21:34:00 -0400] josephholsten: +1,
[2012-03-16 21:34:00 -0400] David_Miller: cool i will check it out
[2012-03-16 21:36:00 -0400] chip-: search in recipes is the best.
[2012-03-16 21:36:00 -0400] timsmith: so a double digit major version for the cookbook doesn't work
[2012-03-16 21:36:00 -0400] chip-: I just built an app where haproxy auto-builds all these proxies for a very service-oriented arch, and then all the apps talk to localhost via a port. Then Chef automatically builds the proxies.
[2012-03-16 21:36:00 -0400] timsmith: 10.3.0 fails a chef run with a can't find file while 0.0.1 works fine
[2012-03-16 21:37:00 -0400] chip-: All done via search.
[2012-03-16 21:38:00 -0400] David_Miller: so search( :node, query) gives me an array of nodes?
[2012-03-16 21:39:00 -0400] fujin: timsmith: wuuuuh, really?
[2012-03-16 21:39:00 -0400] fujin: David_Miller: yes
[2012-03-16 21:39:00 -0400] miah: fujin: discovery looks quite interesting
[2012-03-16 21:39:00 -0400] fujin: miah: thanks. I really want to rewrite it so it injects into Chef::Recipe like a standard dsl extension
[2012-03-16 21:39:00 -0400] fujin: so you don't have to pass around the node like that
[2012-03-16 21:40:00 -0400] fujin: I have built a similar style cookbook at so many deployments before I just figured it was time to release one open source
[2012-03-16 21:40:00 -0400] fujin: great for basic stuff
[2012-03-16 21:41:00 -0400] miah: cool.
[2012-03-16 21:41:00 -0400] chip-: David_Miller: @foo = search("node", "role:node#{['someattribute']} AND chef_environment:#{node.chef_environment}") for instance, to return all nodes that have a particular role in the executing server's environment.
[2012-03-16 21:42:00 -0400] chip-: server? client.
[2012-03-16 21:42:00 -0400] miah: ok. i need food, and then will review your cookbook more thoroughly
[2012-03-16 21:42:00 -0400] chip-: sorry.
[2012-03-16 21:59:00 -0400] timsmith: fujin: Yes really.  It's a bit sad
[2012-03-16 22:00:00 -0400] fujin: timsmith: file a bug probably pretty minor
[2012-03-16 22:15:00 -0400] Aaton: I'm looking at some application .json data_bags for rails and in the databases section we have a lot of duplication. pre environment.  Is it possible to DRY this?
[2012-03-16 22:16:00 -0400] Aaton:  s/pre/per
[2012-03-16 22:27:00 -0400] hones1: timsmith: Multidigit major numbers like 10.3.0 work for me with omnibus 0.10.8 and HostedChef. Blew away my cache too, to make sure.
[2012-03-16 22:32:00 -0400] fujin: ;)
[2012-03-16 22:32:00 -0400] fujin: user error?
[2012-03-16 22:32:00 -0400] timsmith: as soon as I set it  9.3.0 it worked fine
[2012-03-16 22:33:00 -0400] timsmith: and 0.10.3 works fine
[2012-03-16 22:33:00 -0400] timsmith: but 10.3.0 produces 404 errors on chef runs under Windows and Ubuntu
[2012-03-16 22:50:00 -0400] David_Miller: how do I clear a nodes run_list in knife exec -E
[2012-03-16 22:50:00 -0400] David_Miller: to get rid of a role
[2012-03-16 23:25:00 -0400] josephholsten: woo, I've got git::default on windows
[2012-03-16 23:45:00 -0400] josephholsten: ok, cook-1112 adds git for windows, has pull request
[2012-03-16 23:57:00 -0400] berngp: leifmadsen: bloody hell, I got it running (after a couple of meetings and lunch). I had { "id":"tomcat-servers", "gid":270 }, had to change it to { "id":"tomcat", "gid":270 }
[2012-03-16 23:57:00 -0400] berngp: here is the gist
[2012-03-16 23:57:00 -0400] berngp: https://gist.github.com/2053728
[2012-03-16 23:57:00 -0400] berngp: leifmadsen: thanks Sir

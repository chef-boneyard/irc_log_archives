[2012-03-02 00:09:00 -0500] jtimberman: namespaced cookbooks on the community site are a current work in progress, fwiw.
[2012-03-02 00:12:00 -0500] spicyWith: hoover_damm: the problem is when the documentation promises one thing and doesn't deliver: this has been a problem with mongo and with the cookbook installing it
[2012-03-02 00:16:00 -0500] hoover_damm: spicyWith, that's generally why I like leaving an issues up
[2012-03-02 00:16:00 -0500] hoover_damm: so that way if you review the cookbook you can check out the issues, and pulls
[2012-03-02 00:16:00 -0500] hoover_damm: spicyWith, it's not really bulletproof by any means
[2012-03-02 00:17:00 -0500] hoover_damm: spicyWith, reputation on the cookbooks site would suck though
[2012-03-02 00:18:00 -0500] bemu: Woot, first time using Omnibus, thanks damm!
[2012-03-02 00:27:00 -0500] savant: Hi all
[2012-03-02 00:27:00 -0500] savant: I'm getting this fabulous error upon trying to use roles within my dna.json files
[2012-03-02 00:27:00 -0500] savant:  /usr/local/lib/ruby/gems/1.8/gems/chef-0.9.8/bin/../lib/chef/run_list/run_list_item.rb:46:in `initialize': Unable to create Chef::RunList::RunListItem from NilClass:nil: must be a Hash or String (ArgumentError)
[2012-03-02 00:27:00 -0500] savant: https://gist.github.com/b699fa0a67a551db0657
[2012-03-02 00:28:00 -0500] savant: ^ full shell output
[2012-03-02 00:28:00 -0500] savant: any ideas?
[2012-03-02 00:33:00 -0500] savant: zomg
[2012-03-02 00:33:00 -0500] savant: it worked
[2012-03-02 00:33:00 -0500] savant: ROLES WORKED
[2012-03-02 00:33:00 -0500] savant: okay so it looks like all the keys must be set
[2012-03-02 00:33:00 -0500] savant: even if empty
[2012-03-02 00:33:00 -0500] savant: run_list must be set or chef raises an exception
[2012-03-02 00:34:00 -0500] savant: same for default_attributes or override_attributes
[2012-03-02 00:34:00 -0500] savant: hopefully this channel is logged and someone else sees this
[2012-03-02 00:34:00 -0500] savant: i guess no one uses raw json with chef-solo...
[2012-03-02 01:03:00 -0500] danderson: so, maybe a stupid question... Why are node definitions not in the git repo?
[2012-03-02 01:04:00 -0500] danderson: right now with my chef repo, I can rebuild a chef server's cookbooks, roles, environments, data bags
[2012-03-02 01:04:00 -0500] danderson: ... but not the nodes themselves.
[2012-03-02 01:04:00 -0500] danderson: Is this by design? If so, can someone walk me through the rationale?
[2012-03-02 01:04:00 -0500] danderson: (not knocking it, I'm just slightly confused as to why)
[2012-03-02 01:05:00 -0500] danderson: and along similar lines, what parts of the chef server should I be backing up for a quick restore?
[2012-03-02 01:06:00 -0500] aeris: danderson > node can be save on json
[2012-03-02 01:06:00 -0500] aeris: knife can reload it ( knife node from file node.json )
[2012-03-02 01:07:00 -0500] danderson: ah, so you can do it, the default repo just doesn't set itself up for that.
[2012-03-02 01:07:00 -0500] danderson: okay, that makes sense now. Thanks!
[2012-03-02 01:07:00 -0500] aeris: but i have serious reserves about node json attribute :
[2012-03-02 01:07:00 -0500] danderson: now so?
[2012-03-02 01:07:00 -0500] aeris: behaviour is very strange
[2012-03-02 01:08:00 -0500] danderson: (I'm a veteran of about 24h of playing with puppet, so any wisdom is welcome :P)
[2012-03-02 01:08:00 -0500] aeris: http://lists.opscode.com/sympa/arc/chef/2012-02/msg00426.html
[2012-03-02 01:09:00 -0500] danderson: so where should I set attributes? Cookbooks/roles only?
[2012-03-02 01:09:00 -0500] aeris: yep
[2012-03-02 01:09:00 -0500] aeris: but in my case this is blocking
[2012-03-02 01:09:00 -0500] aeris: some attributes are node only
[2012-03-02 01:09:00 -0500] aeris: for example x509 certificates, or firewall port in my case
[2012-03-02 01:09:00 -0500] danderson: ah, so node attributes don't deep-merge properly? Is that it?
[2012-03-02 01:09:00 -0500] aeris: vpn configuration too
[2012-03-02 01:10:00 -0500] aeris: not merge, but vanish after each run
[2012-03-02 01:10:00 -0500] aeris: but not normal attributes
[2012-03-02 01:10:00 -0500] aeris: only default and override
[2012-03-02 01:11:00 -0500] danderson: ah.
[2012-03-02 01:11:00 -0500] aeris: i'm totally confused with this behaviour
[2012-03-02 01:11:00 -0500] aeris: in your case, this is just node creation/backup and not node attribute
[2012-03-02 01:11:00 -0500] danderson: yeah, I can see how that is confusing. I'll see if it maks any more sense to me...
[2012-03-02 01:11:00 -0500] aeris: so it's not very blocking for you
[2012-03-02 01:11:00 -0500] laurent\: yep it's not related :)
[2012-03-02 01:12:00 -0500] danderson: well, if I set node attributes, I'd like to backup/restore those too :)
[2012-03-02 01:12:00 -0500] laurent\: you're confusing him aeris  :-)
[2012-03-02 01:12:00 -0500] aeris: not completly laurent\
[2012-03-02 01:12:00 -0500] aeris: for backup purpose, attributes node behaviour is seriously blocking :
[2012-03-02 01:13:00 -0500] laurent\: can't you provide a simple example to demonstrate this affirmation ?
[2012-03-02 01:13:00 -0500] aeris: just now no :
[2012-03-02 01:14:00 -0500] fujin: nodes are generally treated as throw away; they are the amalgamation of a run list and the output of ohai
[2012-03-02 01:14:00 -0500] fujin: definitely some cases wher eI have backed up partial attribute structure
[2012-03-02 01:15:00 -0500] fujin: e.g. reallocation of EBS devices to another system
[2012-03-02 01:15:00 -0500] aeris: ok, but why default and override, and not normal ?
[2012-03-02 01:15:00 -0500] fujin: what ?
[2012-03-02 01:15:00 -0500] laurent\: (i don't understand either)
[2012-03-02 01:16:00 -0500] fujin: yeah. does not compute bro
[2012-03-02 01:16:00 -0500] fujin: aeris: what do you mean 'and not normal' ?
[2012-03-02 01:16:00 -0500] burris: I'm having a problem with chef-solo   I have set file_cache_path in solo.rb to a suitable path, but when I use cookbook_file, Chef::Config[:cache_options][:path] still has "/var/chef" so my recipe fails when it trys to create that dir...  I tried setting Chef::Config[:cache_options][:path] in solo.rb but it had no effect.  shouldn't the cache path get set when I use file_cache_path ?
[2012-03-02 01:16:00 -0500] aeris: <fujin> nodes are generally treated as throw away; they are the amalgamation of a run list and the output of ohai
[2012-03-02 01:16:00 -0500] aeris: * amdtech est parti (Excess Flood)
[2012-03-02 01:16:00 -0500] aeris: * amdtech (QStVdlRYZg@irc-3.usealice.org) a rejoint #chef
[2012-03-02 01:16:00 -0500] aeris: in my case, only default and override are throw away
[2012-03-02 01:17:00 -0500] fujin: no. you're doing it wrong
[2012-03-02 01:17:00 -0500] aeris: http://lists.opscode.com/sympa/arc/chef/2012-02/msg00426.html
[2012-03-02 01:17:00 -0500] aeris: see here
[2012-03-02 01:17:00 -0500] flaccid: for adding a yum repository, is this covered in yum cookbook or something?
[2012-03-02 01:17:00 -0500] aeris: http://pastebin.com/ufztpqhp
[2012-03-02 01:17:00 -0500] aeris: and here more specially
[2012-03-02 01:18:00 -0500] fujin: flaccid: yeh
[2012-03-02 01:18:00 -0500] fujin: yum_repo lwrp
[2012-03-02 01:18:00 -0500] flaccid: thank you kindly fujin
[2012-03-02 01:19:00 -0500] aeris: node attributes are set from file, for default, overidde and normal
[2012-03-02 01:19:00 -0500] aeris: only normal persist after chef-client run
[2012-03-02 01:19:00 -0500] danderson: isn't that by design?
[2012-03-02 01:19:00 -0500] aeris: and are not deep-merge with recipe/role
[2012-03-02 01:19:00 -0500] danderson: (from the attributes doc, it says default/override get reset from cookbook/role data on each run)
[2012-03-02 01:20:00 -0500] aeris: danderson > i agree, but this is blocking in this case
[2012-03-02 01:20:00 -0500] fujin: what do you mean "blocking"
[2012-03-02 01:20:00 -0500] fujin: not blocking nothing. you are doing it wrong
[2012-03-02 01:20:00 -0500] aeris: there is no way to specify node attribute
[2012-03-02 01:21:00 -0500] aeris: without duplicate all recipe/role attributes
[2012-03-02 01:21:00 -0500] aeris: doing deep-merge by hand in fact
[2012-03-02 01:21:00 -0500] danderson: so, I think what aeris is saying: his node-normal attributes aren't getting deep-merged with attributes from other sources
[2012-03-02 01:21:00 -0500] aeris: yes
[2012-03-02 01:22:00 -0500] danderson: and he can't use node-default or node-override, because those get wiped on each chef-client run
[2012-03-02 01:22:00 -0500] danderson: which leaves him screwed.
[2012-03-02 01:22:00 -0500] danderson: so I guess the question is: why aren't the node-normal attributes getting deep-merged?
[2012-03-02 01:22:00 -0500] aeris: i have 1 real use case for this problem
[2012-03-02 01:22:00 -0500] fujin: normal attributes do get deep merged
[2012-03-02 01:23:00 -0500] aeris: and 2 others in short term
[2012-03-02 01:23:00 -0500] aeris: fujin > not realy
[2012-03-02 01:23:00 -0500] fujin: what the fuck. yes really
[2012-03-02 01:24:00 -0500] aeris: normal or set attributes applied in an attributes file
[2012-03-02 01:24:00 -0500] aeris: normal or set attributes applied on a node directly in a recipe
[2012-03-02 01:24:00 -0500] fujin: http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2012-03-02 01:24:00 -0500] aeris: not in role scuse-me
[2012-03-02 01:24:00 -0500] laurent\: lol
[2012-03-02 01:24:00 -0500] aeris: so if you declare a role
[2012-03-02 01:24:00 -0500] fujin: i just tested it in shef
[2012-03-02 01:24:00 -0500] aeris: the problem is normal is not allowed on role or recipe
[2012-03-02 01:24:00 -0500] fujin: yes. normal is allowed in recipe.
[2012-03-02 01:24:00 -0500] aeris: only default or override
[2012-03-02 01:24:00 -0500] fujin: from 'precedence' section:
[2012-03-02 01:24:00 -0500] fujin: normal or set attributes applied in an attributes file
[2012-03-02 01:24:00 -0500] fujin: normal or set attributes applied on a node directly in a recipe
[2012-03-02 01:25:00 -0500] aeris: but you want custom one node
[2012-03-02 01:25:00 -0500] fujin: that node is not custom
[2012-03-02 01:25:00 -0500] aeris: you have to do all on override
[2012-03-02 01:25:00 -0500] fujin: this idea you have is incorrect
[2012-03-02 01:25:00 -0500] fujin: that node runs a run list that is composed (probably) of many roles
[2012-03-02 01:25:00 -0500] fujin: your node is not a unique snowflake.
[2012-03-02 01:25:00 -0500] aeris: in my case, i have ONE machine with one more open port in firewall
[2012-03-02 01:26:00 -0500] fujin: no. you have a class of machines with one more port open in firewall
[2012-03-02 01:26:00 -0500] fujin: that class of machines may be applied to one machine with a role
[2012-03-02 01:26:00 -0500] fujin: i hope this helps.
[2012-03-02 01:26:00 -0500] danderson: so what's the use case for node attributes?
[2012-03-02 01:26:00 -0500] aeris: in case of firewall, i can understand
[2012-03-02 01:26:00 -0500] aeris: but in short term, i want to manage vpn server
[2012-03-02 01:26:00 -0500] fujin: danderson: tunable params for cookbooks, usually, even tthen I'd recommend against tuning a node directly and expressing it with a role
[2012-03-02 01:27:00 -0500] aeris: each VPN server have it own client list, certificates
[2012-03-02 01:27:00 -0500] fujin: each class of vpn server has its own client list and certificates
[2012-03-02 01:27:00 -0500] fujin: the vpn servers are not unique
[2012-03-02 01:27:00 -0500] danderson: fujin: gotcha, thanks for clarifying. After 24h playing with chef, attributes are still quite confusing.
[2012-03-02 01:27:00 -0500] aeris: i have not in mind to create X role for each vpn server
[2012-03-02 01:27:00 -0500] fujin: i have not in mind to grind your face into a cheese grater
[2012-03-02 01:28:00 -0500] aeris: seems more clear to config vpn per node
[2012-03-02 01:28:00 -0500] aeris: and not per role
[2012-03-02 01:28:00 -0500] fujin: unfortunately that is an incorrect assesment
[2012-03-02 01:28:00 -0500] fujin: it is more clear to config vpn per role, not per node
[2012-03-02 01:28:00 -0500] fujin: because the node is not unique
[2012-03-02 01:28:00 -0500] fujin: the services that the node is providing is not unique
[2012-03-02 01:28:00 -0500] aeris: i have the correct answer : cookbook is not mine =)
[2012-03-02 01:28:00 -0500] fujin: write a new cookbook.
[2012-03-02 01:28:00 -0500] fujin: I'm done here
[2012-03-02 01:28:00 -0500] aeris: this is not the problem
[2012-03-02 01:29:00 -0500] aeris: i'm not responsible of this cookbook
[2012-03-02 01:29:00 -0500] fujin: so write a new cookbook that you are responsible for ?
[2012-03-02 01:29:00 -0500] fujin: if you dont' like the way it behaves
[2012-03-02 01:29:00 -0500] aeris: no no, this is not what i say
[2012-03-02 01:29:00 -0500] fujin: it sounds like you probably want databags to store your VPN configuration data in, aeris
[2012-03-02 01:29:00 -0500] aeris: cookbook is manage by an other team
[2012-03-02 01:29:00 -0500] fujin: then you can lookup the config for a known vpn configuration based on a name or whatever.
[2012-03-02 01:30:00 -0500] fujin: lol
[2012-03-02 01:30:00 -0500] aeris: what you say is to write some roles for this cookbook
[2012-03-02 01:30:00 -0500] fujin: yes. set the behavior you want in the cookbook with a role. apply the role to a node
[2012-03-02 01:30:00 -0500] aeris: what i say this is not cookbook the problem, config is good and conception too
[2012-03-02 01:31:00 -0500] aeris: conceptually, there is no  vpn-server-one  role
[2012-03-02 01:31:00 -0500] fujin: yes. there is. there really is
[2012-03-02 01:31:00 -0500] aeris: but  server-one node 
[2012-03-02 01:31:00 -0500] fujin: no. server one runs a vpn server
[2012-03-02 01:31:00 -0500] aeris: yes
[2012-03-02 01:31:00 -0500] aeris: so vpn-server is a role
[2012-03-02 01:31:00 -0500] aeris: vpn-server-one not
[2012-03-02 01:32:00 -0500] fujin: if you have a specific set of overides for server-one, then do that with a role. you could call it "crazy-dumb-vpn-server" for all I care.
[2012-03-02 01:32:00 -0500] fujin: apply it to the node; profit
[2012-03-02 01:32:00 -0500] aeris: i agree with you your way feets chef behaviour
[2012-03-02 01:32:00 -0500] aeris: but conceptually, this is not the  real  network concept
[2012-03-02 01:32:00 -0500] fujin: nope. you're wrong! sorry
[2012-03-02 01:32:00 -0500] fujin: not even going to argue with you about that
[2012-03-02 01:32:00 -0500] aeris: no
[2012-03-02 01:33:00 -0500] aeris: if an admin have a problem with the vpn server one, he will look on node, not role
[2012-03-02 01:33:00 -0500] fujin: sure, and the node would reflect the state of the role being applied to it
[2012-03-02 01:33:00 -0500] fujin: you would easily be able to ascertain the tuned parameters used for openvpn, etc
[2012-03-02 01:34:00 -0500] fujin: not only that, but you can locate the server based on the fact that it includes this special, customized version of openvpn with a search
[2012-03-02 01:34:00 -0500] aeris: in your case, he has to look node
[2012-03-02 01:34:00 -0500] aeris: look role
[2012-03-02 01:34:00 -0500] fujin: no
[2012-03-02 01:34:00 -0500] aeris: redeploy role, modify node, redeploy node
[2012-03-02 01:35:00 -0500] fujin: if you want to modify the setting sfor openvpn on that particular node? yes, you would modify the role that is overriding the openvpn settings
[2012-03-02 01:35:00 -0500] fujin: and then update that role on the server
[2012-03-02 01:35:00 -0500] fujin: and then converge the node again
[2012-03-02 01:35:00 -0500] aeris: or worst, look node, create new role just for this node, assign role, deploy role, deploy node
[2012-03-02 01:35:00 -0500] fujin: the server would pull the updated tuned overrides from the tuner-role, then apply those overrides to openvpn
[2012-03-02 01:36:00 -0500] aeris: i agree it works, but it break concept
[2012-03-02 01:36:00 -0500] fujin: no
[2012-03-02 01:36:00 -0500] fujin: that is the concept
[2012-03-02 01:36:00 -0500] fujin: that is how it works
[2012-03-02 01:36:00 -0500] fujin: it breaks *your* concept, which is an incorrect assumption
[2012-03-02 01:37:00 -0500] aeris: this is not my concept, all admins of my team have this problem on first approch
[2012-03-02 01:38:00 -0500] fujin: this is a problem I continouously see with old school style of thinking systems administrators
[2012-03-02 01:38:00 -0500] aeris: yep, after some time, we learn to create role-per-node
[2012-03-02 01:38:00 -0500] fujin: You probably want to apply behavior sto nodes with hostnames
[2012-03-02 01:38:00 -0500] aeris: but it's very complicated for nothing
[2012-03-02 01:38:00 -0500] fujin: when in reality, you are applying cookbooks and tuned parameters to hardware
[2012-03-02 01:38:00 -0500] fujin: try and think like the matrix? there is no spoon
[2012-03-02 01:38:00 -0500] fujin: there is no node
[2012-03-02 01:38:00 -0500] aeris: in most cases, i agree
[2012-03-02 01:39:00 -0500] fujin: the node is transient
[2012-03-02 01:39:00 -0500] aeris: but being too rigid is dangerous :
[2012-03-02 01:39:00 -0500] fujin: the node should not be revered, it should be treated as an instantly failable and replaceable component
[2012-03-02 01:39:00 -0500] fujin: you are telling me that you are trying to express rigidity instead of flexibility
[2012-03-02 01:39:00 -0500] fujin: you want to lock customizations to a node, which you may lose
[2012-03-02 01:39:00 -0500] aeris: i agree, this is why all our machine are behind failover
[2012-03-02 01:39:00 -0500] fujin: when in reality you want to lock those customizations to a concept which can be reapplied to any node
[2012-03-02 01:39:00 -0500] aeris: each  node  have fix ip
[2012-03-02 01:40:00 -0500] fujin: so what provisions the ip addresses on your nodes ? a human ?
[2012-03-02 01:40:00 -0500] aeris: and in case of failure, machine is switch but not ip
[2012-03-02 01:40:00 -0500] aeris: chef :
[2012-03-02 01:40:00 -0500] aeris: in the past, yes a human
[2012-03-02 01:40:00 -0500] fujin: if I wanted to have openvpn listening on a particular adddress in my network
[2012-03-02 01:40:00 -0500] fujin: I would put it in a role
[2012-03-02 01:40:00 -0500] aeris: now it's chef
[2012-03-02 01:41:00 -0500] fujin: ideally, if you wanted to get tricky, you could make openvpn *figure out* which ipaddress to bind to
[2012-03-02 01:41:00 -0500] fujin: and publish what ipaddress it has bound to to a known databag or something similar, Discovery service
[2012-03-02 01:41:00 -0500] aeris: having a role openvpn don't hurt me
[2012-03-02 01:41:00 -0500] aeris: having a role openvpn-yoda in my case, yes
[2012-03-02 01:42:00 -0500] fujin: if that contains customizations specific to machines that may receive a openvpn-yoda designation, then that is conceptually correct
[2012-03-02 01:42:00 -0500] aeris: there is also a node for this =)
[2012-03-02 01:42:00 -0500] fujin: no. the node is transient
[2012-03-02 01:42:00 -0500] fujin: the node receives a run list
[2012-03-02 01:42:00 -0500] aeris: machine is transient, not node
[2012-03-02 01:42:00 -0500] aeris: node is a concept, machine is the reality
[2012-03-02 01:42:00 -0500] fujin: node is transient to
[2012-03-02 01:43:00 -0500] aeris: not in my mind
[2012-03-02 01:43:00 -0500] fujin: unfortunately that is something you are going to have to come to grasps with
[2012-03-02 01:43:00 -0500] fujin: many of your preconceived notions may be incorrect
[2012-03-02 01:43:00 -0500] fujin: the machine and node is transient. behaviors are applied to nodes (on machines) with roles
[2012-03-02 01:43:00 -0500] aeris: in my mind, X.Y.Z servs X services
[2012-03-02 01:43:00 -0500] fujin: if you would like the behavior to be non-transient, put it in role in source control
[2012-03-02 01:43:00 -0500] aeris: machines behind don't care
[2012-03-02 01:43:00 -0500] fujin: alternately, a databag based on a particular topic
[2012-03-02 01:44:00 -0500] aeris: if the machine behind the node X fails, i replace it with new machine
[2012-03-02 01:44:00 -0500] aeris: but this new machine is always node X serving all  old  services
[2012-03-02 01:45:00 -0500] fujin: cool story bro
[2012-03-02 01:46:00 -0500] fujin: move the abstraction up. service is provided by role. role can be applied to any machine. profit
[2012-03-02 01:46:00 -0500] fujin: as I said, the notions you hold regarding machines and non-transient nodes are incorrect
[2012-03-02 01:46:00 -0500] aeris:  role can be applied to any machine 
[2012-03-02 01:46:00 -0500] aeris: i agree
[2012-03-02 01:47:00 -0500] aeris: openvpn can be apply to any machine
[2012-03-02 01:47:00 -0500] aeris: openvpn-X not, just only to node-X
[2012-03-02 01:47:00 -0500] fujin: openvpn-banana could apply to any machine, sure
[2012-03-02 01:47:00 -0500] aeris: it's even dangerous to do this
[2012-03-02 01:48:00 -0500] aeris: 2 openvpn server with same network and netmask
[2012-03-02 01:48:00 -0500] aeris: and same x509 certificates
[2012-03-02 01:48:00 -0500] fujin: yeah? that'll work :)
[2012-03-02 01:48:00 -0500] fujin: x509 authentication is CN based, does hostname verification
[2012-03-02 01:48:00 -0500] aeris: yes, all vpn works
[2012-03-02 01:49:00 -0500] aeris: but routing totally KO if one client connect the 2 VPN in same time :
[2012-03-02 01:49:00 -0500] fujin: yeah.. ok man
[2012-03-02 01:50:00 -0500] fujin: that is an entirely different problem. :)
[2012-03-02 01:50:00 -0500] aeris: not completly :
[2012-03-02 01:50:00 -0500] spheromak: mutex!
[2012-03-02 01:50:00 -0500] fujin: no. completely different problem
[2012-03-02 01:50:00 -0500] fujin: w/ known computer science/engineering solutions
[2012-03-02 01:50:00 -0500] aeris: this  role  can't be deploy on 2 node
[2012-03-02 01:50:00 -0500] fujin: yes. yes it can
[2012-03-02 01:50:00 -0500] fujin: there is nothing in the role that a human from applying that.
[2012-03-02 01:50:00 -0500] fujin: nothign in chef that would even suggest that a human cannot do that
[2012-03-02 01:51:00 -0500] fujin: at that stage, you are talking about a process problem. how do your humans determine which vpn to connect to ?
[2012-03-02 01:51:00 -0500] aeris: if chef is just what the human was, it's not usefull
[2012-03-02 01:51:00 -0500] aeris: chef must be better
[2012-03-02 01:51:00 -0500] fujin: nope. chef doesn't give a fuck
[2012-03-02 01:52:00 -0500] fujin: you described a concept with a role and applied it to a node
[2012-03-02 01:52:00 -0500] fujin: why would it care about that?
[2012-03-02 01:52:00 -0500] aeris: i'm not agree this is a role concept
[2012-03-02 01:52:00 -0500] fujin: you deploy two vpn servers by accident. which do people connect to? how do they get the ipaddress of the vpn sever?
[2012-03-02 01:52:00 -0500] fujin: who gives them the credentials?
[2012-03-02 01:52:00 -0500] fujin: how do you deliver the x509 cert bundle ?
[2012-03-02 01:52:00 -0500] aeris: in your case, role number are exponential
[2012-03-02 01:52:00 -0500] fujin: no. they are not
[2012-03-02 01:53:00 -0500] fujin: role number are not exponential
[2012-03-02 01:53:00 -0500] aeris: one role for mdns
[2012-03-02 01:53:00 -0500] fujin: role number increases the the number of non-unique concepts you need to model in your infrastructure
[2012-03-02 01:53:00 -0500] aeris: in this case of mdns, i agree with you
[2012-03-02 01:53:00 -0500] aeris: one role per machine for vpn-X
[2012-03-02 01:53:00 -0500] aeris: one role for ssl-cert-X
[2012-03-02 01:53:00 -0500] fujin: yes. how many different types of vpn are you going to have?
[2012-03-02 01:54:00 -0500] fujin: no. make the openvpn cookbook get the ssl cert dynamically based on what kind of openvpn server it is.
[2012-03-02 01:54:00 -0500] aeris: one role for different authoring config
[2012-03-02 01:54:00 -0500] fujin: read it out of a databag, or encrypted databag.
[2012-03-02 01:54:00 -0500] aeris: one role per accounting
[2012-03-02 01:54:00 -0500] aeris: one role for all the world in fact
[2012-03-02 01:54:00 -0500] aeris: <fujin> read it out of a databag, or encrypted databag.
[2012-03-02 01:54:00 -0500] fujin: you could easily descrdibe the whole world with a role, yes
[2012-03-02 01:54:00 -0500] fujin: that is exactly what I mean
[2012-03-02 01:54:00 -0500] aeris: databag can't have the same granularity than node
[2012-03-02 01:55:00 -0500] fujin: databag doesn't NEED to have the same granularity as the node
[2012-03-02 01:55:00 -0500] aeris: apply databag 1 and 2 on X but 1 and 3 and Y and 1 and 3 on Z
[2012-03-02 01:55:00 -0500] aeris: just this conf is heresy to write on chef
[2012-03-02 01:55:00 -0500] fujin: yes. eventually you will have databags for every pair of ssl certs that you deploy
[2012-03-02 01:55:00 -0500] fujin: and you would be able to load that keypair from the databag based on a name.
[2012-03-02 01:55:00 -0500] fujin: in your role, you would specify: openvpn, you need THIS KEY HERE
[2012-03-02 01:56:00 -0500] fujin: you could make a role that *just* specifies the name of the ssl key, and include that role in any of your openvpn ones.
[2012-03-02 01:56:00 -0500] fujin: you could make it so the cookbook reads the name of the ssl keypair out of a node attribute
[2012-03-02 01:56:00 -0500] fujin: so it is always dynamic and controllable by a role
[2012-03-02 01:56:00 -0500] aeris: openvpn, it can be possible with your way
[2012-03-02 01:56:00 -0500] fujin: it *is* possible *in reality* my way
[2012-03-02 01:57:00 -0500] fujin: because I have deployed it countless times with no problem, with little regard for the purported conceptual problems you are reporting
[2012-03-02 01:57:00 -0500] aeris: but how to create user 1/2/3 on X, 1/3 on Y, 2/3 on Z ?
[2012-03-02 01:57:00 -0500] fujin: in 'x' specify a list of users, y specify a list of users, z specify a list of users
[2012-03-02 01:57:00 -0500] fujin: those are the non-unique components you are designated with that role
[2012-03-02 01:58:00 -0500] aeris: so one role per node another time
[2012-03-02 01:58:00 -0500] fujin: no. not one role per node
[2012-03-02 01:58:00 -0500] fujin: A:LKFja;wdskjf;lksajdflkajsdflkja
[2012-03-02 01:58:00 -0500] spheromak: heh
[2012-03-02 01:58:00 -0500] fujin: one node PER NON UNIQUE CONCEPT
[2012-03-02 01:58:00 -0500] aeris: with your way
[2012-03-02 01:58:00 -0500] fujin: if you have different lists of users (three different concepts) have three different override roles
[2012-03-02 01:58:00 -0500] aeris: i already have : mdns-role, openvpn-1/2/3, user-1/2/3
[2012-03-02 01:58:00 -0500] aeris: 7 roles
[2012-03-02 01:59:00 -0500] aeris: exponential
[2012-03-02 01:59:00 -0500] aeris: after I have ssh-1/2/3
[2012-03-02 01:59:00 -0500] aeris: etc
[2012-03-02 01:59:00 -0500] fujin: fuck it
[2012-03-02 01:59:00 -0500] fujin: i give up
[2012-03-02 01:59:00 -0500] aeris: i thanks god to not manage 100 nodes :
[2012-03-02 01:59:00 -0500] fujin: i manage 10000s and don't have this problem
[2012-03-02 02:00:00 -0500] aeris: perhaps your node are most homogen than mine
[2012-03-02 02:00:00 -0500] fujin: perhaps. why would you say that is?
[2012-03-02 02:01:00 -0500] spheromak: aeris: the idea is not to let your roles propagate like this
[2012-03-02 02:01:00 -0500] aeris: spheromak > this is not so easy
[2012-03-02 02:01:00 -0500] spheromak: you can attach the openvpn needs to users.  then you can let a high level role  resolve what needs to be done.
[2012-03-02 02:01:00 -0500] spheromak: using a number of aproaches
[2012-03-02 02:02:00 -0500] fujin: for this exact example, my openvpn machines perform a search on databags to get a list of users to deploy
[2012-03-02 02:02:00 -0500] fujin: search(:users, "openvpn_enabled:true")
[2012-03-02 02:02:00 -0500] fujin: map through that. create users for openvpn, etc, deploy .tgz tunnnelblick config
[2012-03-02 02:02:00 -0500] laurent\: can't openvpn work with ldap ?
[2012-03-02 02:03:00 -0500] aeris: yes, some  problem  can be resolved with role or databag
[2012-03-02 02:03:00 -0500] fujin: I can't imagine that would help with understanding the core problem we are discussing, but yes, I imagine it does
[2012-03-02 02:03:00 -0500] aeris: but config will be cleaner with node config
[2012-03-02 02:03:00 -0500] fujin: ROFL WTF BBQ NO
[2012-03-02 02:03:00 -0500] fujin: it will NOT be cleaner with node config
[2012-03-02 02:03:00 -0500] spheromak: fujin: openldap just pushes the issue out of chef into ldap :P
[2012-03-02 02:03:00 -0500] spheromak: bt its the same approach there. attach openvpn creds to users.
[2012-03-02 02:04:00 -0500] spheromak: not to roles
[2012-03-02 02:04:00 -0500] laurent\: fujin: i think i quite understand the core of the prb. just trying to change the subject :)
[2012-03-02 02:04:00 -0500] aeris: spheromak > in my case, we have only a few numbers of servers (5) but a lot of services to hosts
[2012-03-02 02:04:00 -0500] aeris: so there is no 2 nodes identical
[2012-03-02 02:05:00 -0500] spheromak: if you have N VPN profiles  in data bags. you can setup a user in a way that they have VPN 1,2,3  on their data.  Simple search for users. then you look up the vpn ocnfig in vpn bags and boom done.  Verry common pattern in chef stuff
[2012-03-02 02:05:00 -0500] aeris: this is why i have so heterogeneous config
[2012-03-02 02:05:00 -0500] spheromak: maybe you shold lift things out.
[2012-03-02 02:06:00 -0500] spheromak:  use lxc to break things into smaller non heterogenous instances that can be managed more simply
[2012-03-02 02:06:00 -0500] laurent\: sure
[2012-03-02 02:06:00 -0500] aeris: and just for one firewall port or one user different, this is very unproportionate to create role
[2012-03-02 02:07:00 -0500] spheromak: think your missing the point
[2012-03-02 02:07:00 -0500] spheromak: you don't need a role to drive everything
[2012-03-02 02:07:00 -0500] spheromak: you want to be able to discover how things should be based on smaller unique components
[2012-03-02 02:07:00 -0500] spheromak: and then do the right thing (tm) based on collections of said smaller things.
[2012-03-02 02:08:00 -0500] aeris: if i want to keep service relatively maintenable, i have
[2012-03-02 02:08:00 -0500] laurent\: this is also the concept of HA: have simple and homogeneous resources
[2012-03-02 02:08:00 -0500] aeris: with  node  attribute, moving service from one node to an other is just one copy/paste
[2012-03-02 02:08:00 -0500] spheromak: IMO Specificity in Roles is bad.  roles should be  broad.  web_server app_server (maybe more specific like: tomcat_app_server) but not  vpn_foo_for_joe_bob
[2012-03-02 02:08:00 -0500] laurent\: sounds like having raid5 made with 6 partitions of 2 disks
[2012-03-02 02:09:00 -0500] aeris: spheromak > +1
[2012-03-02 02:09:00 -0500] fujin: spheromak: generally I use them as top level combinations of services, right, do dynamic stuff based on search.
[2012-03-02 02:09:00 -0500] spheromak: aeris: and im trying to tell you how you design for that
[2012-03-02 02:09:00 -0500] aeris: using role don't hurt me
[2012-03-02 02:09:00 -0500] spheromak: fujin: yea describe high level functions.
[2012-03-02 02:09:00 -0500] aeris: but not role associated to just one node
[2012-03-02 02:10:00 -0500] CharlieSu: So I use Chef to setup a ton of servers.  Things work extremely well, but there are a few things that Chef hasn't been great at for me as we scale.  Our multi-tenant application is split up into a weblayer, application layer, and database layer.  There are certain operations required to setup and manage tenants that have to happen on all 3 layers and some have dependencies.  I wanted to create a web portal that would control t
[2012-03-02 02:10:00 -0500] spheromak: aeris: well you may only have one role for that node
[2012-03-02 02:10:00 -0500] CharlieSu: How I can create these workloads and serve them up to this client app?  Would the client application have to already have a copy of the classes it is about to use to carry out the work?
[2012-03-02 02:10:00 -0500] fujin: CharlieSu: there are so many ways to do that, please don't go and invent something horrible
[2012-03-02 02:10:00 -0500] CharlieSu: fujin: teach me!
[2012-03-02 02:11:00 -0500] fujin: have you looked at Noah? it will probably "just work" for this
[2012-03-02 02:11:00 -0500] spheromak: CharlieSu: your talking about generally the area that all of us are at right nw. which is orchistrating behavoir across our infrastructure. there are a number of things out ther eto do this for you, but no  standar "chef" way atm
[2012-03-02 02:11:00 -0500] fujin: CharlieSu: opscode are planning on building an internal orchestration/locking/... component for chef - there was some discssion on the ML
[2012-03-02 02:11:00 -0500] CharlieSu: fujin: i haven't..  any other projects i should look at?
[2012-03-02 02:11:00 -0500] fujin: one sec
[2012-03-02 02:12:00 -0500] fujin: CharlieSu:  I would say internalize the structure of zookeeper
[2012-03-02 02:12:00 -0500] fujin: I highly recommend reading the ZK paper describing ZAB and stuff
[2012-03-02 02:12:00 -0500] fujin: you can easily do stuff like master election, directory service, etc.
[2012-03-02 02:12:00 -0500] spheromak: ^^
[2012-03-02 02:12:00 -0500] spheromak: how i've done it here
[2012-03-02 02:12:00 -0500] fujin: noah is written by lusis ; it's kind of like a ruby zookeeper
[2012-03-02 02:12:00 -0500] spheromak: custom sauce for doing election and discovery
[2012-03-02 02:12:00 -0500] CharlieSu: what is the URL for Noah?
[2012-03-02 02:12:00 -0500] spheromak: seing that repeating all over now
[2012-03-02 02:12:00 -0500] fujin: https://github.com/lusis/Noah
[2012-03-02 02:13:00 -0500] fujin: spheromak: yeh, I think chef community hit critical mass
[2012-03-02 02:13:00 -0500] fujin: everyone building this search based orchestration/deploy tools
[2012-03-02 02:13:00 -0500] fujin: etc
[2012-03-02 02:13:00 -0500] CharlieSu: Noah == zookeeper ?
[2012-03-02 02:13:00 -0500] fujin: negative
[2012-03-02 02:13:00 -0500] fujin: Noah is a ruby implementaion of a zookeeper like thing
[2012-03-02 02:13:00 -0500] fujin: Zookeeper is java (kind of heavyweight actually)
[2012-03-02 02:13:00 -0500] fujin: http://zookeeper.apache.org/
[2012-03-02 02:13:00 -0500] CharlieSu: I like java
[2012-03-02 02:13:00 -0500] jtimberman: noah is inspired by zookeeper
[2012-03-02 02:14:00 -0500] fujin: CharlieSu: www.usenix.org/event/atc10/tech/full_papers/Hunt.pdf is the ZK paper
[2012-03-02 02:14:00 -0500] fujin: highly highly recoommend it if you care about distributed systems at all
[2012-03-02 02:14:00 -0500] fujin: the papers: "Paxos made simple" and "Paxos made moderately complex" are also great references papers in this scope
[2012-03-02 02:14:00 -0500] fujin: I have been sliinging some code in this area recently
[2012-03-02 02:14:00 -0500] CharlieSu: thanks so much for all this info.  i feel like i've got much more to grasp at right now
[2012-03-02 02:14:00 -0500] fujin: https://github.com/fujin/pylon/tree/feature/paxos
[2012-03-02 02:15:00 -0500] fujin: CharlieSu: no problem. there is also something simple like, my discovery cookbook
[2012-03-02 02:15:00 -0500] fujin: discovery?
[2012-03-02 02:15:00 -0500] bawt: discovery is http://ckbk.it/discovery
[2012-03-02 02:15:00 -0500] fujin: CharlieSu: that would let you create simple Search-based discovery for attributes between nodes, and kind of do pretend locking
[2012-03-02 02:15:00 -0500] fujin: like, the app server would just bail out if it can't discover the databse server
[2012-03-02 02:15:00 -0500] fujin: [re-run chef or whatever, fatal error]
[2012-03-02 02:15:00 -0500] fujin: can you dig it ?
[2012-03-02 02:15:00 -0500] CharlieSu: yep
[2012-03-02 02:15:00 -0500] CharlieSu: i like the concept
[2012-03-02 02:16:00 -0500] fujin: there are some concerns around using search-based orchestration, which is largely why everyone is investigating alternates like ZK and so-on
[2012-03-02 02:16:00 -0500] fujin: indexing delay, size of indexed attributes may be affected by solr MaxFieldLength, etc
[2012-03-02 02:17:00 -0500] CharlieSu: yeah that was one of my main issues..  and my chef clients hitting the chef server so often was really starting to bog it down
[2012-03-02 02:17:00 -0500] CharlieSu: my web layer was running once a minute for each client..
[2012-03-02 02:18:00 -0500] spheromak: yup
[2012-03-02 02:19:00 -0500] spheromak: theres some talk about implementing lightweight checkins on clients and such for this exact thing. Dun remember if that was in roadmap. opscode folk could elaborate
[2012-03-02 02:19:00 -0500] aeris: i have to go
[2012-03-02 02:19:00 -0500] aeris: thanks for the interresting discussion
[2012-03-02 02:19:00 -0500] aeris: ++
[2012-03-02 02:25:00 -0500] danderson: what would be a good cookbook to consult as an example of using data bags (encrypted and/or not) to provide configuration specifics?
[2012-03-02 02:27:00 -0500] tightwork: danderson: good question..I figured it out just from the wiki. mostly all revolves around the search() method
[2012-03-02 02:28:00 -0500] damien__: Hey all, anybody know of a quick and simple way for me to determine the state of a node (running, stopped) on ec2/rackspace?
[2012-03-02 02:29:00 -0500] tightwork: damien__: in a recipe ?
[2012-03-02 02:29:00 -0500] damien__: No, I'm trying to do this through knife specifically
[2012-03-02 02:29:00 -0500] damien__: I've got a capistrano script with knife inttagration
[2012-03-02 02:29:00 -0500] damien__: And i'm trying to verify that all is well with an environment before running recipes
[2012-03-02 02:30:00 -0500] damien__: ie: i have all the nodes chef expects, said nodes are reachable and running
[2012-03-02 02:32:00 -0500] tightwork: `damien: I believe the dashboard shows last check in status but I dont see a knife command to get that
[2012-03-02 02:33:00 -0500] `damien: tightwork: I was hoping I could query chef to have it try to contact all nodes in an environment to do something like this
[2012-03-02 02:33:00 -0500] tightwork: `damien: maybe write your script to check and fail if node not found? ping? snmp walk?
[2012-03-02 02:33:00 -0500] `damien: Yeah, looks like I'll have to
[2012-03-02 02:34:00 -0500] tightwork: you can at least get the node list from chef
[2012-03-02 02:34:00 -0500] `damien: So far current plan of attack is to grab the list of nodes from chef and use that info to do the rest
[2012-03-02 03:11:00 -0500] svanzoest: q: In the deploy resource before_symlink block, can I force a different Resource to be notified and run? https://gist.github.com/50dba6bd08ed466fd104
[2012-03-02 03:12:00 -0500] fujin: svanzoest: no, they are a confied resource context and thus have no access to resources defined outside of their scope
[2012-03-02 03:12:00 -0500] svanzoest: bummer
[2012-03-02 03:12:00 -0500] fujin: obv. you can include your recipe again, which will add those recipes to the resource collection, and they will run their actions again
[2012-03-02 03:12:00 -0500] fujin: if those actions are idempotent that is usually not a problem
[2012-03-02 03:12:00 -0500] fujin: and that'll allow you to notify it as you requested
[2012-03-02 03:13:00 -0500] svanzoest: I guess I can just define those resources in again in the before_symlink block
[2012-03-02 03:13:00 -0500] fujin: that works too
[2012-03-02 03:14:00 -0500] fujin: svanzoest: you could probably have your resource subscribing to the deploy too, unless it has to happen during the migration phase only
[2012-03-02 03:15:00 -0500] svanzoest: I am hoping to have a compilation step (javascript minification) to happen after deploy but before the current symlink gets made
[2012-03-02 03:16:00 -0500] svanzoest: I guess it can be done after
[2012-03-02 03:17:00 -0500] fujin: an immediate subscription to the deploy resource maybe. I guess you could just do the javascript minification as an execute and plop it into the callback
[2012-03-02 03:18:00 -0500] fujin: or a dedicated recipe and include it in the callback
[2012-03-02 04:06:00 -0500] svanzoest: hmm.. include recipe.. I like it
[2012-03-02 04:16:00 -0500] fujin: that way your regular recipe can just include it as well as your callback :)
[2012-03-02 04:36:00 -0500] svanzoest: I seem to get undefeind method 'include_recipe', I am support do that a different way?
[2012-03-02 04:44:00 -0500] fujin: svanzoest: oh
[2012-03-02 04:44:00 -0500] fujin: umm
[2012-03-02 05:05:00 -0500] sivy: hello all; i'm working on a setup with encrypted databags, i've got the data all setup and the secret copied to the node (a vagrant vm right now) but when i provision the node, i get a "bad decrypt" error
[2012-03-02 05:06:00 -0500] sivy: i've checked that the files in ~/.chef/encrypted_data_bag_secret locally and /etc/chef/encrypted_data_bag_secret are identical
[2012-03-02 05:08:00 -0500] sivy: log: https://gist.github.com/8e4f5e2a2c2909fdbf49
[2012-03-02 05:19:00 -0500] miah: try recreating the data bag item
[2012-03-02 05:47:00 -0500] tolland: is there an init manager cookbook?
[2012-03-02 06:02:00 -0500] tolland: would it not make sense to have some sort of create service action that defers to the implementation, or are services too specific?
[2012-03-02 06:03:00 -0500] tolland: or too general to abstract is probably what i meant
[2012-03-02 06:05:00 -0500] |shad0w|: tolland the service provider handles that
[2012-03-02 06:19:00 -0500] tolland: i mean to add a "service "myservice" do action :create end"
[2012-03-02 07:31:00 -0500] nd____: Aloha
[2012-03-02 07:32:00 -0500] nd____: I wonder what's the best way to auto-register newly created machines with the chef-server? Do you guys roll your own modified distribution that includes chef from the start?
[2012-03-02 07:45:00 -0500] jtimberman: nd____: that is what the validation client is for.
[2012-03-02 07:49:00 -0500] nd____: jtimberman: I'll try to read up on it, thanks
[2012-03-02 07:52:00 -0500] nd____: jtimberman: Ah, I see. Well, I don't think this is the answer to my question. I want to know how you guys handle the case that you spin up a new box and do not have to manually log in and run the chef client (including the validation client) for the first time to register
[2012-03-02 07:53:00 -0500] danderson: nd____: that would be the job of a provisioning system, upstream of chef
[2012-03-02 07:54:00 -0500] danderson: my setup has only Debian servers, so I pxe-boot new machines into an installer with preseeded answers (completely automatic install)
[2012-03-02 07:54:00 -0500] nd____: My approach would have been to modify an image of the distribution I want to use to have it contain chef client in the base installation, include the validation key and actually run the client after installation
[2012-03-02 07:54:00 -0500] danderson: and preseed lets you run an arbitrary script at the end, which I use to pull in the opscode apt repos, install chef-client and drop the right config/validation cert in /etc/chef
[2012-03-02 07:55:00 -0500] nd____: ah, perfect that's what I wanted to know
[2012-03-02 07:55:00 -0500] nd____: thanks
[2012-03-02 07:55:00 -0500] danderson: so yeah, either roll a modified image if you're doing physical installs
[2012-03-02 07:56:00 -0500] danderson: or look into PXE-booting installers, with preseeding for Debian/Ubuntu or kickstart for Redhat/Fedora
[2012-03-02 07:56:00 -0500] danderson: you may also be interested in cobbler or foreman, which let you automatically provision servers
[2012-03-02 07:57:00 -0500] nd____: No, I'm thinking of cloud hosting but there it's often easy to provide my own image but the preseed-method sounds good either way I wanted to assure that I'm not working around a method that already exists
[2012-03-02 07:57:00 -0500] danderson: though iirc they're geared for integration with puppet more than chef, but that's probably tweakable.
[2012-03-02 07:57:00 -0500] freiksenet: hello! Iam trying to bootstrap chef server on amazon linux and it seems to not recognize the distro, and fails while trying to access gems/chef-0.10.8/distro//etc/init.d/chef-solr
[2012-03-02 07:57:00 -0500] danderson: ah, cloud hosting. I don't have much of an opinion there, I'm playing with physical machines :)
[2012-03-02 07:57:00 -0500] nd____: Well, I guess that's what I need when I work with my own vm-server, which atm I do not I'm want to have a way to use it with boxes on aws/rackspace/jiffy
[2012-03-02 07:57:00 -0500] freiksenet: what can I do to make it recognize it? isnt' amazon linux just modified version of centos or fedora?
[2012-03-02 08:14:00 -0500] lflux: ohai chefs
[2012-03-02 08:35:00 -0500] freiksenet: ok, a mroe specialized question - where does chef infer 'platform' and can I ovverride that value manually?
[2012-03-02 08:41:00 -0500] nico: freiksenet: from ohai
[2012-03-02 08:46:00 -0500] jtimberman: freiksenet: and you cannot override the value of platform [easily], it is an automatic attribute.
[2012-03-02 08:46:00 -0500] freiksenet: jtimberman: uh. means i have to go trhough all recipes and add "amazon" everywhere )
[2012-03-02 08:47:00 -0500] nico: IIRC there's an attribute about amazon instances & stuff
[2012-03-02 08:47:00 -0500] nico: (not using that, so can't say more)
[2012-03-02 08:55:00 -0500] nacer: ohai
[2012-03-02 08:55:00 -0500] nacer: jtimberman: your not sleeping ?
[2012-03-02 08:58:00 -0500] lflux: Already heard a shoutout to che
[2012-03-02 08:58:00 -0500] lflux: chef even
[2012-03-02 09:02:00 -0500] pkondzior: any chef-dev around ?
[2012-03-02 09:03:00 -0500] pkondzior: is there any reason why this was still not merged ?  http://tickets.opscode.com/browse/CHEF-1547
[2012-03-02 09:05:00 -0500] Leth``: Morning. I have a patch for a cookbook; what ruby version do I need to conform to?
[2012-03-02 09:13:00 -0500] ashb: 1.8.7 i suspect
[2012-03-02 09:13:00 -0500] ashb: since that is still the most common version shipped by ubuntu/deb/rhel
[2012-03-02 09:59:00 -0500] Leth``: ashb: thanks
[2012-03-02 10:40:00 -0500] proffalken: morning all :)
[2012-03-02 10:41:00 -0500] proffalken: I'm still trying to force my brain to migrate from puppet to chef, but after two weeks I think I'm getting there :)
[2012-03-02 10:45:00 -0500] danderson: what does data_bag_item do when you request an item that doesn't exist? Empty hash or crash?
[2012-03-02 10:48:00 -0500] proffalken: Are there any restrictions on databag names?
[2012-03-02 10:48:00 -0500] proffalken: I'm trying to use one called "bacula_filesets" at the moment and the only result I get back is NoMethodError: undefined method `id' for :bacula_filesets:Symbol
[2012-03-02 10:49:00 -0500] proffalken: I'm wondering if the underscord is causing issues
[2012-03-02 10:52:00 -0500] danderson: nope, underscores should be fine. How are you trying to use it?
[2012-03-02 10:53:00 -0500] proffalken: danderson: https://gist.github.com/1957696
[2012-03-02 10:54:00 -0500] proffalken: (That's in "attributes.rb" btw)
[2012-03-02 10:55:00 -0500] proffalken: (I mean attributes/dir.rb )
[2012-03-02 10:58:00 -0500] proffalken: danderson: the idea is that each team creates a data bag item for the servers under their control
[2012-03-02 10:59:00 -0500] proffalken: and I then loop over the databag and pull out all of the filesets
[2012-03-02 10:59:00 -0500] proffalken: and then interate over them in the template to create a full list of all files requiring backup
[2012-03-02 11:00:00 -0500] proffalken: I've updated the Gist with the databag layout
[2012-03-02 11:48:00 -0500] proffalken: s'ok, I'm "DOING IT WRONG" (tm)
[2012-03-02 11:48:00 -0500] proffalken: :P)
[2012-03-02 12:26:00 -0500] bluenemo: hi guys, i've just installed the mysql::server, where can i find the password now? :)
[2012-03-02 12:31:00 -0500] lflux: it's set as a node attribute
[2012-03-02 12:31:00 -0500] lflux: so knife node show
[2012-03-02 12:32:00 -0500] bluenemo: knife node show? sorry i dont get that lflux
[2012-03-02 12:32:00 -0500] lflux: it should be in node['mysql']['server_root_password']
[2012-03-02 12:32:00 -0500] lflux: knife node show <nodename> -F json
[2012-03-02 12:32:00 -0500] lflux: will show the attributes on the node
[2012-03-02 12:33:00 -0500] bluenemo: ah wow i see
[2012-03-02 12:33:00 -0500] bluenemo: so cool thank you!!
[2012-03-02 12:33:00 -0500] lflux: np
[2012-03-02 12:33:00 -0500] bluenemo: i love those little things that chef has and i can find :)
[2012-03-02 12:38:00 -0500] matschaffer: morning everyone! I seem to recall an effort to make OS packages that isolate chef's copy of ruby. But I'm failing to google it. Can anyone point me in the right direction?
[2012-03-02 13:09:00 -0500] bkocik: Anyone know if I can read an attribute out of a recipe from within a role?
[2012-03-02 13:10:00 -0500] bkocik: In other words, I want to set an override_attribute for one recipe that takes its value from another recipe, both of which are in the role's run_list
[2012-03-02 13:10:00 -0500] ashb: bkocik: no you cannot. roles do not execute anything directly
[2012-03-02 13:11:00 -0500] ashb: you'd have to create a receipe and have the role include that
[2012-03-02 13:11:00 -0500] bkocik: Okay, so I need a new recipe that does the attribute manipulation?
[2012-03-02 13:11:00 -0500] ashb: or do it in one of your existing recipies
[2012-03-02 13:12:00 -0500] bkocik: Got it. Thank you!
[2012-03-02 13:21:00 -0500] frankske: hi chefcooks!
[2012-03-02 13:22:00 -0500] frank_: is there a way to merge attributes?
[2012-03-02 13:22:00 -0500] frank_: eg: define an attribe (that's an array) on role level, and add an element on one particular node?
[2012-03-02 13:23:00 -0500] bkocik: frank_: Does this address what you're after? http://wiki.opscode.com/display/chef/Deep+Merge
[2012-03-02 13:25:00 -0500] frank_: bkocik: no. imagine an attribute "extra_packages" which is an array of extra packages to install
[2012-03-02 13:25:00 -0500] bkocik: And that's defined in the role?
[2012-03-02 13:26:00 -0500] frank_: image it is set to "vim sed" at role level
[2012-03-02 13:26:00 -0500] frank_: but on a particular node in that role, you'd need emacs as well
[2012-03-02 13:26:00 -0500] frank_: so i want to define "emacs" as extra_packages at node level, and "vim sed" at role level
[2012-03-02 13:28:00 -0500] bkocik: As was explained to me a few minutes ago, role files are never executed by an interpreter, they're just read like data - so I don't know that you could do that within a role file. But it seems like a good case for an additional role, or maybe an environment to me.
[2012-03-02 13:28:00 -0500] bkocik: Then again, I have no idea what I'm talking about. :)
[2012-03-02 13:41:00 -0500] Sebastian__: Anyone know... Is there a way to get a list of roles in the current run from within a recipe?  I have two roles, development & production.  Within a recipe, I want to add cron resources if the current node contains the production role.  I'm am just trying to avoid adding an redundant attribute to the role.
[2012-03-02 13:49:00 -0500] nacer: Sebastian__: i think you should use environment
[2012-03-02 13:51:00 -0500] Sebastian__: @nacer We use chef-solo, and as far as I can tell, environments are not available
[2012-03-02 13:55:00 -0500] Sebastian__: I guess I'll just add an "environment" attribute to the role
[2012-03-02 13:57:00 -0500] nacer: Sebastian__: ok
[2012-03-02 13:57:00 -0500] nacer: so you don't have acces to search() too
[2012-03-02 14:00:00 -0500] bluenemo: hey guys, i have a complete standard directory create method but knife cookbook test gives me unexpected keyword_end, expecting $end   and when i actually write $end instead of end it works. why?
[2012-03-02 14:02:00 -0500] nacer: bluenemo: can you pastebin the recipe + the error
[2012-03-02 14:02:00 -0500] nacer: ?
[2012-03-02 14:03:00 -0500] bluenemo: nacer, yes one sec
[2012-03-02 14:04:00 -0500] bluenemo: nacer, http://pastebin.com/tcYXmYiy error is on the bottom so the lines should be correct
[2012-03-02 14:05:00 -0500] bluenemo: ah sorry cut out the second end
[2012-03-02 14:05:00 -0500] nacer: tup :)
[2012-03-02 14:05:00 -0500] nacer: yup :)
[2012-03-02 14:05:00 -0500] bluenemo: i get the error without the second end...
[2012-03-02 14:05:00 -0500] bluenemo: that was just for senceless testing
[2012-03-02 14:06:00 -0500] nacer: did you upload the updated version ?
[2012-03-02 14:07:00 -0500] bluenemo: no, on pastebin the only difference is that there is one more end
[2012-03-02 14:07:00 -0500] bluenemo: but when i cut it out i get the exact same error
[2012-03-02 14:08:00 -0500] bluenemo: i dont get my directory methods... yesterday chef just ignored one alltogether without logging anything about it or so.. very strange
[2012-03-02 14:08:00 -0500] atomic-penguin: Well you have two "end"s in your first paragraph, directory resource
[2012-03-02 14:08:00 -0500] nacer: bluenemo: you are runnin chef-solo ?
[2012-03-02 14:08:00 -0500] bluenemo: no
[2012-03-02 14:08:00 -0500] bluenemo: atomic-penguin, yes the second one is in the pastebin by accident, i get the error for one end
[2012-03-02 14:09:00 -0500] bluenemo: its propably a totally nooby typo but i cant see it :/
[2012-03-02 14:09:00 -0500] nacer: i don't see it too
[2012-03-02 14:10:00 -0500] bluenemo: but logicly basicly if anything the error has to be ABOVE the block right?
[2012-03-02 14:10:00 -0500] bluenemo: (or in it)
[2012-03-02 14:11:00 -0500] atomic-penguin: I had to gist it for the syntax highlighting
[2012-03-02 14:11:00 -0500] bluenemo: what i really dont get is why knife cookbook test works when i change it to $end.. what is $end?
[2012-03-02 14:11:00 -0500] bluenemo: gist?
[2012-03-02 14:11:00 -0500] bawt: gist is https://gist.github.com
[2012-03-02 14:11:00 -0500] bluenemo: ah ok np
[2012-03-02 14:11:00 -0500] atomic-penguin: much easier to read it
[2012-03-02 14:12:00 -0500] bluenemo: yeah my emacs does that too. but it doesnt complain either (or throwing strange colors..)
[2012-03-02 14:12:00 -0500] atomic-penguin: bluenemo, So what line number does it throw the error on?
[2012-03-02 14:12:00 -0500] fearoffish: $end is the ruby parsers way of saying 'end of line or statement' irrc
[2012-03-02 14:12:00 -0500] bluenemo: on the pastebin there is the error on the bottom
[2012-03-02 14:13:00 -0500] bluenemo: ah ok
[2012-03-02 14:13:00 -0500] bluenemo: thx
[2012-03-02 14:13:00 -0500] fearoffish: it usually means you didn't or did end something in the wrong place
[2012-03-02 14:13:00 -0500] atomic-penguin: So line 28
[2012-03-02 14:13:00 -0500] bluenemo: atomic-penguin, yes
[2012-03-02 14:14:00 -0500] atomic-penguin: bluenemo, its totally a noob typo
[2012-03-02 14:14:00 -0500] bluenemo: hm well. if it works out with $end i'm cool with that, maybe some of the ruby geniuses in the office here might have a clue. thank you very much for helping guys!
[2012-03-02 14:14:00 -0500] atomic-penguin: Missing a "do"
[2012-03-02 14:14:00 -0500] bluenemo: fail
[2012-03-02 14:14:00 -0500] bluenemo: m(((((((
[2012-03-02 14:14:00 -0500] bluenemo: .. argh m) thank you atomic-penguin :)
[2012-03-02 14:15:00 -0500] atomic-penguin: np
[2012-03-02 14:15:00 -0500] bluenemo: lol i would have searched hours for that m)
[2012-03-02 14:15:00 -0500] bluenemo: (or basicly i already did for quite some minutes :)
[2012-03-02 14:15:00 -0500] fearoffish: missing a 'do' and an extra 'end', no?
[2012-03-02 14:15:00 -0500] fearoffish: honestly I only skimmed though
[2012-03-02 14:16:00 -0500] bluenemo: the extra end was pastebin'd by accident, we already found the missing do, thank you anyway fearoffish :)
[2012-03-02 14:16:00 -0500] fearoffish: ah
[2012-03-02 14:17:00 -0500] atomic-penguin: Better way to read that error, is one of your resource blocks is not "closed"
[2012-03-02 14:17:00 -0500] atomic-penguin: Something extra, or something missing in a resource block
[2012-03-02 14:18:00 -0500] bluenemo: ? i dont get what you want to tell me sry. what do you mean with read the error?
[2012-03-02 14:19:00 -0500] atomic-penguin: When you see that error, its a sign that a resource block is not closed.  i.e. Something is either missing or, has been typed extra, like a "do" or an "end"
[2012-03-02 14:19:00 -0500] atomic-penguin: resources?
[2012-03-02 14:19:00 -0500] bawt: resources is http://wiki.opscode.com/display/chef/Resources
[2012-03-02 14:19:00 -0500] bluenemo: ah ok i see yep i'll remember that for the next time thanks :)
[2012-03-02 14:24:00 -0500] casper_: Hi - I am getting the CannotDetermineNodeName error when running chef-solo. I'm really struggling to work out how to correctly set my domain name on CentOS 5.7...can anyone help?
[2012-03-02 14:27:00 -0500] ssd7: Ohai Chefs
[2012-03-02 14:34:00 -0500] fearoffish: herro!
[2012-03-02 15:04:00 -0500] hoover_damm: good Morning America
[2012-03-02 15:04:00 -0500] hoover_damm: or Internet
[2012-03-02 15:04:00 -0500] hoover_damm: :) or Chef users
[2012-03-02 15:05:00 -0500] laurent\: it's 4pm here ! :)
[2012-03-02 15:07:00 -0500] laurent\: good morning nonetheless ;-)
[2012-03-02 15:09:00 -0500] Brad_K: laurent\: are you in france?
[2012-03-02 15:09:00 -0500] laurent\: Brad_K: yes I am
[2012-03-02 15:09:00 -0500] Brad_K: cool.
[2012-03-02 15:10:00 -0500] Brad_K: i used to live in Brussels.
[2012-03-02 15:10:00 -0500] Brad_K: lived there almost eight years.  never did manage to learn either French or Flemish, however.  ;-(
[2012-03-02 15:13:00 -0500] laurent\: i live in north of france, about 250km south west of Brussels
[2012-03-02 15:13:00 -0500] laurent\: (never been to brussels tho)
[2012-03-02 15:13:00 -0500] Brad_K: sounds like that would be near Lille?
[2012-03-02 15:14:00 -0500] Brad_K: or maybe Calais?
[2012-03-02 15:15:00 -0500] laurent\: a bit south of Lille, it's Amiens (http://en.wikipedia.org/wiki/Amiens) in between paris and calais
[2012-03-02 15:15:00 -0500] locojay: hi im getting the following when install on debian
[2012-03-02 15:15:00 -0500] Brad_K: Ahh, Amiens.  yes, i've been through there.
[2012-03-02 15:15:00 -0500] locojay: https://gist.github.com/1959116
[2012-03-02 15:16:00 -0500] laurent\: nico also lives here iirc, never met him in real life tho :)
[2012-03-02 15:16:00 -0500] nico: what
[2012-03-02 15:16:00 -0500] nico: you live in Amiens ?
[2012-03-02 15:16:00 -0500] laurent\: what what what ? :)
[2012-03-02 15:16:00 -0500] laurent\: i told you so in the past :)
[2012-03-02 15:17:00 -0500] nico: I'm alzheimer-ized
[2012-03-02 15:17:00 -0500] laurent\: and you said "what ? they use chef at the uni i used to go ?" :-)
[2012-03-02 15:17:00 -0500] Brad_K: locojay  is there a reason why you're installing such an old version of chef-solo?  why not 0.10.8, or at least 0.10.4?
[2012-03-02 15:18:00 -0500] nico: laurent\: :)
[2012-03-02 15:20:00 -0500] Brad_K: hmm.  looking at the pictures of the Cathedral, i'm not sure we saw that.  ;-(
[2012-03-02 15:20:00 -0500] Brad_K: but we have seen so many gothic Cathedrals, they all kind of blend together.
[2012-03-02 15:21:00 -0500] Brad_K: I do remember 555 steps to the top of Kln Cathedral.
[2012-03-02 15:21:00 -0500] Brad_K: or perhaps you would prefer the Cologne spelling?  ;-)
[2012-03-02 15:22:00 -0500] nico: koln is closer of the german name, I prefer this one
[2012-03-02 15:22:00 -0500] nico: (personaly)
[2012-03-02 15:22:00 -0500] Brad_K: from what i recall of our "Normandy Tour", i think the primary thing we saw in Amiens was the cemetery.
[2012-03-02 15:24:00 -0500] locojay: no was just looking at this http://rosenfeld.herokuapp.com/en/articles/2011-03-06-installing-gitorious-has-never-been-so-easy . just need gitorious
[2012-03-02 15:24:00 -0500] nico: Brad_K: which one ? :D
[2012-03-02 15:24:00 -0500] locojay: this is the version i am getting on debian
[2012-03-02 15:24:00 -0500] locojay: apt-get install chef-server chef-solo
[2012-03-02 15:26:00 -0500] Brad_K: locojay: there's a reason why Opscode recommends that you avoid installing any of the package-based versions of Chef.  none of the standard binary packagers keep up with anything remotely current.
[2012-03-02 15:29:00 -0500] fearoffish: and so it begins: https://gist.github.com/3958e4d35d26fa519818
[2012-03-02 15:29:00 -0500] fearoffish: chef integration tests, the easy way
[2012-03-02 15:29:00 -0500] fearoffish: might blog/release something soon
[2012-03-02 15:29:00 -0500] locojay: k thanks
[2012-03-02 15:39:00 -0500] Brad_K: nico: sorry, it took some searching.  the picture at http://photos.travellerspoint.com/281964/P1000338.jpg seems most familiar to me.
[2012-03-02 15:41:00 -0500] Brad_K: fearoffish: cool!
[2012-03-02 15:44:00 -0500] bluenemo: yay i think i wrote my first 'chefy' chef recipe :) installing wordpress on nginx, using 4 different recepies to install php sql nginx aaand wp :) so far thank you guys for your help, you gave me a great start with it :) lets see what my boss wants me to automate next ;)
[2012-03-02 15:45:00 -0500] nico: they all look the same
[2012-03-02 15:45:00 -0500] Brad_K: bluenemo: cool!  you're doing better for your first recipe than i did for mine!
[2012-03-02 15:45:00 -0500] CharlieSu: lusis: you around?
[2012-03-02 15:46:00 -0500] lusis: you caught me this time ;)
[2012-03-02 15:46:00 -0500] lusis: in and out
[2012-03-02 15:46:00 -0500] lusis: what's up?
[2012-03-02 15:46:00 -0500] CharlieSu: lusis: nice:)..  I've got a few question about Noah
[2012-03-02 15:46:00 -0500] lusis: sure thing
[2012-03-02 15:46:00 -0500] bluenemo: well i started from scratch again this morning as my first version was basicly bash only :) but then i realised how important it is to keep things in individual recipes and now it was written and done in half a day. i also used some scripts from cookbook site download
[2012-03-02 15:46:00 -0500] nico: "shit's on fire"
[2012-03-02 15:46:00 -0500] lusis: nico: forgot the 'yo' part ;)
[2012-03-02 15:47:00 -0500] nico: haha
[2012-03-02 15:47:00 -0500] CharlieSu: I'm using chef to manage a ton of servers, but i've got some actions that i do operationally that chef doesn't do well.  orchestrating actions on a bunch of different server types with dependencies, etc...
[2012-03-02 15:47:00 -0500] CharlieSu: Is Noah good at this type of thing?
[2012-03-02 15:47:00 -0500] lusis: CharlieSu: it can be
[2012-03-02 15:47:00 -0500] lusis: heh
[2012-03-02 15:48:00 -0500] lusis: what kind of dependencies are they?
[2012-03-02 15:48:00 -0500] CharlieSu: I'd like to see an example of Noah restarting a linux service based on criteria, etc...
[2012-03-02 15:48:00 -0500] lusis: So Noah won't do that directly
[2012-03-02 15:48:00 -0500] CharlieSu: lusis: Our multi-tenant application is split up into a weblayer, application layer, and database layer.  There are certain operations required to setup and  manage tenants that have to happen on all 3 layers and some have dependencies.
[2012-03-02 15:49:00 -0500] CharlieSu: lusis: adding DB's to the DB layer.  Running ANT targets to provision a new DB, etc...
[2012-03-02 15:49:00 -0500] lusis: do you do the ANT stuff via Chef?
[2012-03-02 15:49:00 -0500] CharlieSu: Restarting the application layer when a tenant is added..  Updating Vhosts on the weblayer when a tenant is added
[2012-03-02 15:49:00 -0500] lusis: right so
[2012-03-02 15:49:00 -0500] CharlieSu: no i dont.  currently i run these targets manually
[2012-03-02 15:50:00 -0500] CharlieSu: but i'd like to enable our sales people to be able to add tenants, lock tenant, etc...
[2012-03-02 15:50:00 -0500] lusis: the way it would work with Noah (at a high level) is that chef-client run on one node would trigger a run on another node
[2012-03-02 15:50:00 -0500] lusis: via Noah callbacks
[2012-03-02 15:50:00 -0500] CharlieSu: humm..  how does it do that?
[2012-03-02 15:51:00 -0500] lusis: the general idea is this:
[2012-03-02 15:51:00 -0500] lusis: chef client runs and updates some record in Noah
[2012-03-02 15:51:00 -0500] lusis: You have a watch regsitered on the record that, when it gets touched, triggers a callback
[2012-03-02 15:51:00 -0500] lusis: that call back can be anything
[2012-03-02 15:51:00 -0500] lusis: the default that ships is an HTTP post
[2012-03-02 15:52:00 -0500] lusis: it just POSTs the json representation of what was touched in Noah
[2012-03-02 15:52:00 -0500] lusis: it's up to you to handle it
[2012-03-02 15:52:00 -0500] lusis: so you could, for instance, have a small sinatra app that accepts the post and runs an ant task
[2012-03-02 15:52:00 -0500] lusis: or a chef-client run
[2012-03-02 15:52:00 -0500] CharlieSu: i like the former....
[2012-03-02 15:52:00 -0500] lusis: you can either get crafty and know about the contents of the json
[2012-03-02 15:52:00 -0500] lusis: or just use it like a trigger
[2012-03-02 15:52:00 -0500] lusis: a signal
[2012-03-02 15:53:00 -0500] lusis: "ping" "go do some shit"
[2012-03-02 15:53:00 -0500] CharlieSu: lusis: are there any examples of this anywhere?  I didn't see anything like that on the wiki
[2012-03-02 15:53:00 -0500] lusis: Let me look. I thought I had some
[2012-03-02 15:54:00 -0500] lusis: https://github.com/lusis/Noah/wiki/Sinatra-Demo
[2012-03-02 15:54:00 -0500] lusis: That may not be entirely up to date
[2012-03-02 15:54:00 -0500] lusis: I've been so swamped
[2012-03-02 15:55:00 -0500] lusis: but the idea in that "demo" is that a record in Noah specifies a redis connection string
[2012-03-02 15:55:00 -0500] lusis: when it changes, it pings a sinatra app
[2012-03-02 15:55:00 -0500] lusis: and that sinatra app changes which redis instance it's talking to
[2012-03-02 15:55:00 -0500] lusis: https://github.com/lusis/Noah/blob/master/examples/reconfiguring-sinatra.rb
[2012-03-02 15:56:00 -0500] lusis: You don't HAVE to do this with Noah mind you
[2012-03-02 15:56:00 -0500] CharlieSu: i see.  so it just wants for something to change?
[2012-03-02 15:56:00 -0500] lusis: If you have something like RabbitMQ in house already
[2012-03-02 15:56:00 -0500] lusis: well the message contains the details
[2012-03-02 15:56:00 -0500] lusis: if it's a delete, you'll see that
[2012-03-02 15:58:00 -0500] lusis: but like I said, you could just use an AMQP write inside your recipes as well
[2012-03-02 15:58:00 -0500] lusis: and have something listening
[2012-03-02 15:58:00 -0500] lusis: or 0mq or whatever
[2012-03-02 15:58:00 -0500] CharlieSu: lusis: yeah..  then just act on it based on the message...
[2012-03-02 15:58:00 -0500] lusis: yep
[2012-03-02 15:59:00 -0500] lusis: the reason I wrote Noah is because of the REST part
[2012-03-02 15:59:00 -0500] lusis: well
[2012-03-02 15:59:00 -0500] lusis: http + json ;)
[2012-03-02 15:59:00 -0500] CharlieSu: i see.
[2012-03-02 15:59:00 -0500] lusis: and so that I could use it easily from applications and shell scripts
[2012-03-02 15:59:00 -0500] lusis: it's not doing anything NEW per se
[2012-03-02 16:10:00 -0500] CharlieSu: any suggestions for HA/distributed message broker?
[2012-03-02 16:10:00 -0500] CharlieSu: 2 nodes is probably good enough for me in different Ec2 Availability zones...
[2012-03-02 16:13:00 -0500] lusis: I've never had luck with HA rabbit on EC2
[2012-03-02 16:14:00 -0500] CharlieSu: lusis: what about it didnt' work?
[2012-03-02 16:14:00 -0500] lusis: The kind of messages you'll be sending though are transient yeah?
[2012-03-02 16:14:00 -0500] lusis: DRBD
[2012-03-02 16:14:00 -0500] lusis: heh
[2012-03-02 16:14:00 -0500] lusis: the rabbit HA setups aren't friendly for EC2
[2012-03-02 16:14:00 -0500] lusis: at least the various options I've seen
[2012-03-02 16:15:00 -0500] lusis: they assume local network
[2012-03-02 16:15:00 -0500] CharlieSu: i see.. well it probalby isn't a big deal for my broker to be HA
[2012-03-02 16:15:00 -0500] lusis: The thing is if you use an EIP
[2012-03-02 16:15:00 -0500] lusis: and have a good recipe
[2012-03-02 16:15:00 -0500] lusis: you can rebuild it in no time flat
[2012-03-02 16:15:00 -0500] lusis: MTTR
[2012-03-02 16:15:00 -0500] lusis: the chef rabbitmq LWRP is REALLY nice
[2012-03-02 16:16:00 -0500] lusis: have the nodes trigger stuff directly on other nodes
[2012-03-02 16:16:00 -0500] lusis: via search
[2012-03-02 16:16:00 -0500] lusis: maybe even a chef-handler
[2012-03-02 16:16:00 -0500] lusis: so you can codify all your permissions and vhosts and such
[2012-03-02 16:16:00 -0500] CharlieSu: ok.. i'll look at it
[2012-03-02 16:16:00 -0500] lusis: but
[2012-03-02 16:16:00 -0500] lusis: you can also look at something "masterless"
[2012-03-02 16:17:00 -0500] lusis: or you can ping Jenkins to kick off a job that's nothing more than a shell step
[2012-03-02 16:17:00 -0500] lusis: so many ways to skin the cat ;)
[2012-03-02 16:17:00 -0500] CharlieSu: hah.. yeah i already use Jenkins for this
[2012-03-02 16:17:00 -0500] lusis: in some cases you just need a signal
[2012-03-02 16:17:00 -0500] lusis: in other cases you need to pass metadata along
[2012-03-02 16:18:00 -0500] lusis: when you look at it from that perspective
[2012-03-02 16:18:00 -0500] lusis: it's an 'easier' problem to solve
[2012-03-02 16:22:00 -0500] hoover_damm: w12
[2012-03-02 16:35:00 -0500] jtimberman: Brad_K: Thats not entirely true, we can recommend people install chef from packages on debian/ubuntu with our APT repository :)
[2012-03-02 16:36:00 -0500] Brad_K: your repository, yes.  but not the standard debian/ubuntu repositories.
[2012-03-02 16:36:00 -0500] jtimberman: Totally.
[2012-03-02 16:36:00 -0500] bluenemo: as far as i know its kind of hard to get sth into the main debian repo :)
[2012-03-02 16:36:00 -0500] jtimberman: do not install 'chef' in the debian/ubuntu repos, its like, 2 year old version.
[2012-03-02 16:36:00 -0500] bluenemo: ah it is available ok
[2012-03-02 16:36:00 -0500] jtimberman: bluenemo: it does require non-trivial effort.
[2012-03-02 16:36:00 -0500] bluenemo: btw is 0.10 development and 0.9 stable?
[2012-03-02 16:36:00 -0500] jtimberman: no
[2012-03-02 16:37:00 -0500] Brad_K: 0.10.8 is stable.
[2012-03-02 16:37:00 -0500] bluenemo: ah ok thx
[2012-03-02 16:37:00 -0500] jtimberman: 0.10.8 is the latest stable release.
[2012-03-02 16:37:00 -0500] bluenemo: thank you
[2012-03-02 16:37:00 -0500] jtimberman: the last part of the version will be odd in dev versions
[2012-03-02 16:37:00 -0500] jtimberman: 0.10.9
[2012-03-02 16:37:00 -0500] jtimberman: for example is the current opscode/master branch
[2012-03-02 16:37:00 -0500] Brad_K: they don't publish a separate "development" branch.  at least, i have never heard of one.
[2012-03-02 16:38:00 -0500] jtimberman: and yeah, we don't publish a development release, if you want a dev veresion, build the gem off master.
[2012-03-02 16:38:00 -0500] Brad_K: right, but that's in github master.  that's not really "published", right?
[2012-03-02 16:38:00 -0500] jtimberman: right
[2012-03-02 16:38:00 -0500] jtimberman: its not a gem released on rubygems.org or in our apt repo or with our full stack build.
[2012-03-02 16:39:00 -0500] Brad_K: people who need to have access to it will be people who can build it for themselves.
[2012-03-02 16:41:00 -0500] jtimberman: and that'll be people doing development on the codebase to fix bugs or add features.
[2012-03-02 16:41:00 -0500] jtimberman: ttfn!
[2012-03-02 16:49:00 -0500] cedrichurst1: entirely noob question i've installed chef and chef-server on ubuntu via the opcode apt but where exactly should i be targeting when i clone chef-repo?
[2012-03-02 16:50:00 -0500] locojay: anyway i can use cookbooks no having a README.rdoc but a README.rdoc
[2012-03-02 16:50:00 -0500] locojay: i m on chef-solo 10.0.8
[2012-03-02 16:50:00 -0500] locojay: 0.10.8
[2012-03-02 17:02:00 -0500] bkocik: Can anyone see what's wrong with this line in a recipe? node.default[:passenger][:module_path] = "#{node[:apache][:libexecdir]}"
[2012-03-02 17:02:00 -0500] bkocik: I keep getting "NoMethodError: undefined method `[]' for nil:NilClass"
[2012-03-02 17:03:00 -0500] ashb: bkocik: probably node[:apache] doesn't exist
[2012-03-02 17:04:00 -0500] bkocik: I think I'm in a catch-22. If I include the passenger_apache2::mod_rails recipe (which includes apache2) before I set that, then the recipe will run before I get a chance to override that default. But if I don't include it first, then those don't exist.
[2012-03-02 17:26:00 -0500] jtimberman: cedrichurst1: when you clone chef-repo, you put that on your "development workstation"
[2012-03-02 17:26:00 -0500] jtimberman: cedrichurst1: usually your laptop
[2012-03-02 17:26:00 -0500] jtimberman: then you write new cookbooks in the "cookbooks" directory (or download from the community site, or from github), and upload the cookbooks to the chef-server with knife.
[2012-03-02 17:27:00 -0500] chip-: any way from knife cookbook to get a list of all the versions of a cookbook that are installed on the server?
[2012-03-02 17:27:00 -0500] chip-: oh. N/m, knife cookbook download does it for me.
[2012-03-02 17:40:00 -0500] hoover_damm: so what cookbooks.opscode.com/damm/bob?
[2012-03-02 17:41:00 -0500] hoover_damm: or what siezer ?
[2012-03-02 17:41:00 -0500] bkocik: Oh good. Now passenger_apache2 isn't installing the module anywhere. *sigh*
[2012-03-02 17:42:00 -0500] jtimberman: chip-: knife cookbook show NAME will give you the versions of a specific cookbook
[2012-03-02 17:45:00 -0500] bkocik: Does anyone know a way around http://tickets.opscode.com/browse/COOK-958 ? Nothing I'm trying is working.
[2012-03-02 17:45:00 -0500] siezer: hoover_damm knife cookbook site search systcl -> 3 cookbooks from 3 different people that cook on the same thing... I want to use spheromak's, so now I have to decide if I a) want to use jn_sysctl as the resource name, or b) rename the cookbook to sysctl. If I could specify 'spheromak/sysctl' in the cookbook metadata instead, my workflow would improve and it would encourage more sysctl cookbooks to boot
[2012-03-02 17:46:00 -0500] siezer: jbz ping
[2012-03-02 17:52:00 -0500] jtimberman: siezer: yeah, so, name it sysctl :)
[2012-03-02 17:52:00 -0500] jtimberman: siezer: i mean, you know that.
[2012-03-02 17:52:00 -0500] jtimberman: but that kind of sucks
[2012-03-02 17:53:00 -0500] bkocik: Can I force a recipe to start over and run again?
[2012-03-02 17:54:00 -0500] jtimberman: "yes". easily: "no". so, "no"
[2012-03-02 17:54:00 -0500] bkocik: Trying to get passenger_apache2 to put the module in a correct location, but it didn't work the first time and now it doesn't think it needs to try again.
[2012-03-02 17:55:00 -0500] jtimberman: yeah. you rerun chef.
[2012-03-02 17:56:00 -0500] jtimberman: there's a retry parameter for resources
[2012-03-02 17:56:00 -0500] jtimberman: but i've not used it
[2012-03-02 17:57:00 -0500] jtimberman: bkocik: i'm looking into the passenger_apache2 recipe on my own system at the moment.
[2012-03-02 17:57:00 -0500] bkocik: Oh, good.
[2012-03-02 17:59:00 -0500] hoover_damm: siezer, true that
[2012-03-02 17:59:00 -0500] hoover_damm: siezer, interesting
[2012-03-02 17:59:00 -0500] hoover_damm: siezer, I was kinda hoping for more namespaced like I mentioned, but that would be awesome too
[2012-03-02 17:59:00 -0500] hoover_damm: either way it'll help
[2012-03-02 17:59:00 -0500] hoover_damm: :) so all we can do is say thank you :)
[2012-03-02 18:00:00 -0500] bkocik: jtimberman: This was my total amateur effort: http://pastie.org/3505697
[2012-03-02 18:00:00 -0500] bkocik: (In case you can't tell, I have almost no clue what I'm doing.)
[2012-03-02 18:11:00 -0500] jbz: siezer: pong
[2012-03-02 18:15:00 -0500] jtimberman: bkocik: E_CANNOTREPRODUCE: https://gist.github.com/1960149
[2012-03-02 18:16:00 -0500] jtimberman: ubuntu 10.04
[2012-03-02 18:19:00 -0500] dyer: Hello, question, in what scenarios would the node attributes in the UI not match up w/ what I get in shef ?
[2012-03-02 18:21:00 -0500] dyer: Example:  webui https://img.skitch.com/20120302-qp9qrj9qtu552p74psjk6aa8ks.jpg
[2012-03-02 18:21:00 -0500] dyer: shef output
[2012-03-02 18:21:00 -0500] dyer: https://gist.github.com/4d48d78f55d95fcb262c
[2012-03-02 18:21:00 -0500] dyer: Notice how the install_flavor of java is openjdk in shef and sun in ui
[2012-03-02 18:21:00 -0500] dyer: I have done several succesful shef runs but this still seems to be out of sync
[2012-03-02 18:28:00 -0500] dyer: dont everyone answer all at once now
[2012-03-02 18:28:00 -0500] dyer: ;)
[2012-03-02 18:32:00 -0500] hoover_damm: dyer, node.default?
[2012-03-02 18:32:00 -0500] hoover_damm: dyer, verify it's not set to openjdk on the node?
[2012-03-02 18:33:00 -0500] dyer: how do I do that
[2012-03-02 18:33:00 -0500] dyer: node.default gave me a giant hash
[2012-03-02 18:33:00 -0500] dyer: I am also overriding this in the fole
[2012-03-02 18:33:00 -0500] dyer: role
[2012-03-02 18:33:00 -0500] jtimberman: dyer: did you start shef in client mode
[2012-03-02 18:33:00 -0500] hoover_damm: then the override is really what you want
[2012-03-02 18:33:00 -0500] hoover_damm: override_attributes(
[2012-03-02 18:33:00 -0500] hoover_damm: "java" => { "install_flavor" => "oracle"
[2012-03-02 18:34:00 -0500] hoover_damm: }
[2012-03-02 18:34:00 -0500] hoover_damm: )
[2012-03-02 18:34:00 -0500] dyer: yes, thats what I have
[2012-03-02 18:34:00 -0500] hoover_damm: and I bet if you dump the node, it's currently set to java?
[2012-03-02 18:35:00 -0500] dyer: https://gist.github.com/435c4cea27d90c0a768b
[2012-03-02 18:35:00 -0500] dyer: dump the node?
[2012-03-02 18:35:00 -0500] dyer: node.override ?
[2012-03-02 18:35:00 -0500] hoover_damm: knife node show node -l
[2012-03-02 18:36:00 -0500] hoover_damm: or -a java as well
[2012-03-02 18:37:00 -0500] hoover_damm: the java cookbook has defaults, but really your overriding
[2012-03-02 18:37:00 -0500] hoover_damm: so you should be working
[2012-03-02 18:40:00 -0500] dyer: hoover_damm, updated the gist https://gist.github.com/56deb3289fc62a819fe4
[2012-03-02 18:40:00 -0500] dyer: knife node show -a java showed sun, which is what I am expecting
[2012-03-02 18:40:00 -0500] hoover_damm: and your running shef -z
[2012-03-02 18:41:00 -0500] hoover_damm: so your getting the attributes back from the server right?
[2012-03-02 18:42:00 -0500] zns: I need some help I'm booting a server using the Reackspace plugin and I can't use knife ssh on it - I get SocketError: getaddrinfo: nodename nor servname provided, or not known. What does chef/knife use to find the node? The fqdn? Because that seems to be set to my node name and that won't resolve correctly...
[2012-03-02 18:43:00 -0500] hoover_damm: because I can totally see openjdk if it's not talking to the server
[2012-03-02 18:43:00 -0500] hoover_damm: to get your overide
[2012-03-02 18:44:00 -0500] dyer: yes, I am running shef -z
[2012-03-02 18:44:00 -0500] hoover_damm: zns, you need to specify the address to connect with on knife ssh
[2012-03-02 18:44:00 -0500] hoover_damm: typically that's an attribute such as cloud.public_ipaddress
[2012-03-02 18:44:00 -0500] hoover_damm: dyer, that's lame.  shef -z -L debug to and see if you can find what's screwing up your day?
[2012-03-02 18:45:00 -0500] dyer: -l right?
[2012-03-02 18:45:00 -0500] hoover_damm: right
[2012-03-02 18:45:00 -0500] dyer: ok, "wall-o-text"
[2012-03-02 18:46:00 -0500] hoover_damm: debug mode is a wall-o-text that you sometimes gotta dump to a file
[2012-03-02 18:46:00 -0500] hoover_damm: to try and read over
[2012-03-02 18:46:00 -0500] hoover_damm: my last job debug mode created 1-3meg text files on each run
[2012-03-02 18:46:00 -0500] dyer: ok, but what am I looking for ?
[2012-03-02 18:47:00 -0500] hoover_damm: dyer, I was going to suggest to start with reviewing what attribute files it's loading and see if you can follow the trail of tears
[2012-03-02 18:47:00 -0500] hoover_damm: I think I gave you the worst path ever, so if you wanna wait for someone else to give a better answer
[2012-03-02 18:47:00 -0500] hoover_damm: I totally am cool with it
[2012-03-02 18:47:00 -0500] zns: hoover_damm: that helps. If I specify -a ipaddress I get the address back. Shouldn't the FQDN be set to the FQDN instead of the node name?
[2012-03-02 18:47:00 -0500] hoover_damm: you can also add ruby-debug and go evil to debug in other ways
[2012-03-02 18:48:00 -0500] zns: hoover_damm: I can submit a patch for that, but I don't know if that would break anything else...
[2012-03-02 18:48:00 -0500] hoover_damm: zns, hrm that should work right
[2012-03-02 18:48:00 -0500] hoover_damm: zns, I forgot RS has 2 nic's
[2012-03-02 18:48:00 -0500] hoover_damm: i'm totally used to ipaddress being the private (like on ec2)
[2012-03-02 18:49:00 -0500] zns: hoover_damm: yes, there are other attributes for the private NIC. ipaddress points to the public one.
[2012-03-02 18:50:00 -0500] dyer: hoover_damm, so I did a grep on the results and 'install_flavor\" => \"sun' was the only one that returned results
[2012-03-02 18:50:00 -0500] zns: Is there a _sanctioned_ way to edit the fqdn for a node?
[2012-03-02 18:50:00 -0500] dyer: so in the giant ass wall of text it would appear that its being set to sun
[2012-03-02 18:50:00 -0500] hoover_damm: zns, so knife ssh node hostname:something uname -a ipaddress
[2012-03-02 18:50:00 -0500] dyer: but node[:java] still shows openjdk
[2012-03-02 18:51:00 -0500] zns: knife ssh "name:Ubuntu1" -a ipaddress does the job.
[2012-03-02 18:52:00 -0500] zns: the default for -a is fqdn. And fqdn is set to my node name (Ubuntu1). So I want to try changing that and then maybe patching knife-rackspace so it sets the FQDN correctly....
[2012-03-02 18:52:00 -0500] hoover_damm: my theory is, if the server knows the right answer, and shef -z is running you differently
[2012-03-02 18:52:00 -0500] hoover_damm: start eliminating attribute files that talk to default['java']
[2012-03-02 18:52:00 -0500] hoover_damm: and make sure you set url/checksum in the node if you need them
[2012-03-02 18:54:00 -0500] dyer: ok, but the problem is I am getting openjdk installed
[2012-03-02 18:55:00 -0500] dyer: I need sun
[2012-03-02 18:55:00 -0500] dyer: so shef -z is showing me reality, webui seems to be wrong
[2012-03-02 18:56:00 -0500] hoover_damm: right server set is right, but your client is setting it to openjdk in error
[2012-03-02 18:56:00 -0500] hoover_damm: so you gotta figure out what is setting it to openjdk
[2012-03-02 18:56:00 -0500] dyer: but isnt the client supposed to honor the server? what the hell is the point if it ignores it ?
[2012-03-02 18:57:00 -0500] bkocik: jtimberman: I think you have to actually use the passenger_apache2::mod_rails recipe to reproduce it. I don't know why that's separate, because just running passenger_apache2 doesn't actually marry Passenger and Apache. It just installs Passenger and leaves it there without setting up the required Apache module.
[2012-03-02 18:57:00 -0500] bkocik: I think.
[2012-03-02 18:58:00 -0500] bkocik: Sorry for the delayed response, I'm in and out today.
[2012-03-02 18:58:00 -0500] hoover_damm: dyer, you can set an override attribute in runtime to be something else
[2012-03-02 18:58:00 -0500] hoover_damm: dyer, when it goes back to save, it'll get set back to your override
[2012-03-02 18:59:00 -0500] hoover_damm: this is one of those situations where I find identifying the different layers to be helpful
[2012-03-02 18:59:00 -0500] hoover_damm: as otherwise you can get confused at the issue
[2012-03-02 19:00:00 -0500] dyer: I just searched for every instance of "openjdk" in my entire chef dir ( locally ) and I see nothign /sigh
[2012-03-02 19:01:00 -0500] hoover_damm: check in /var/chef/cache
[2012-03-02 19:01:00 -0500] hoover_damm: :)
[2012-03-02 19:01:00 -0500] hoover_damm: your looking for an proper answer, so don't look locally, look on the server or your cache
[2012-03-02 19:01:00 -0500] hoover_damm: it might report back the same thing
[2012-03-02 19:01:00 -0500] hoover_damm: but at least then you are double confirmed on your search
[2012-03-02 19:02:00 -0500] hoover_damm: is it possible your loading a different version of the cookbook then stored locally?
[2012-03-02 19:02:00 -0500] jtimberman: bkocik: oh - missed that it was the mod_rails recipe.
[2012-03-02 19:03:00 -0500] jtimberman: sorry about that :)
[2012-03-02 19:03:00 -0500] dyer: so having default['java']['install_flavor'] = "openjdk" is fine, right, providing I am overriding this in my role
[2012-03-02 19:03:00 -0500] jtimberman: dyer: yes
[2012-03-02 19:03:00 -0500] dyer: ok, just taking baby steps here :)
[2012-03-02 19:03:00 -0500] jtimberman: if you're using the latest cookbook though i don't think 'sun' works, it is oracle now.
[2012-03-02 19:04:00 -0500] dyer: I am not using the latest
[2012-03-02 19:04:00 -0500] jtimberman: but if you have an older version, then disregard that :)
[2012-03-02 19:04:00 -0500] jtimberman: there ya go :)
[2012-03-02 19:05:00 -0500] dyer: So I am not calling the java recipe directly in a role, I have an include_recipe in my activeMQ cookbook that pulls it in
[2012-03-02 19:05:00 -0500] dyer: thats kosher right ?
[2012-03-02 19:09:00 -0500] dyer: [root@att1 cache]# find . | xargs grep openjdk
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/recipes/openjdk.rb:# Recipe:: openjdk
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/recipes/openjdk.rb:    "default" => ["java-1.6.0-openjdk","java-1.6.0-openjdk-devel"]
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/recipes/openjdk.rb:  "default" => ["openjdk-6-jdk","default-jdk"]
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/recipes/openjdk.rb:  command "update-java-alternatives -s java-6-openjdk"
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/metadata.rb:recipe "java::openjdk", "Installs the OpenJDK flavor of Java"
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/attributes/default.rb:default['java']['install_flavor'] = "openjdk"
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/README.md:* `node["java"]["install_flavor"]` - Flavor of JVM you would like installed (`sun` or `openjdk`), default `openjdk`.
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/README.md:Include the default recipe in a run list, to get `java`.  By default the `openjdk` flavor of Java is installed, but this can be changed by using the `install_flavor` attribute.
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/README.md:openjdk
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/README.md:This recipe installs the `openjdk` flavor of Java.
[2012-03-02 19:09:00 -0500] dyer: ./cookbooks/java/metadata.json:  "long_description": "Description\n===========\n\nInstalls a Java. Uses OpenJDK by default but supports installation of the Sun's Java.\n\n---\nRequirements\n============\n\nPlatform\n--------\n\n* Debian, Ubuntu\n* CentOS, Red Hat, Fedora\n\nCookbooks\n---------\n\n* apt\n\n---\nAttributes\n==========\n\n* `node[\"java\"][\"install_flavor\"]` - Flavor of JVM you would like
[2012-03-02 19:09:00 -0500] dyer:  installed (`sun` or `openjdk`), default `openjdk`.\n\n---\nRecipes\n=======\n\ndefault\n-------\n\nInclude the default recipe in a run list, to get `java`.  By default the `openjdk` flavor of Java is installed, but this can be changed by using the `install_flavor` attribute.\n\nopenjdk\n-------\n\nThis recipe installs the `openjdk` flavor of Java.\n\nsun\n---\n\nThis recipe installs the `sun` flavor of Java.
[2012-03-02 19:09:00 -0500] dyer:  \n\nOn Debian and Ubuntu systems the recipe will add the correct apt repository (`non-free` on Debian or `partner` on Ubuntu), pre-seed the package and update java alternatives.\n\nOn Red Hat flavored Linux (RHEL, CentOS, Fedora), the installation of the Sun flavor of Java is slightly more complicated as the `rpm` package is not readily available in any public Yum repository.  The Sun JDK `rpm` package can be
[2012-03-02 19:09:00 -0500] dyer: #fail :(
[2012-03-02 19:11:00 -0500] jtimberman: bkocik: okay, i see that error now.
[2012-03-02 19:11:00 -0500] jtimberman: dyer: pastebin or gist for multi-line pastes please
[2012-03-02 19:11:00 -0500] dyer: yes, yes I totally know
[2012-03-02 19:11:00 -0500] dyer: I thought I was pasting the gist
[2012-03-02 19:11:00 -0500] dyer: so sorry
[2012-03-02 19:11:00 -0500] zns: hoover_damm: thanks. Changing the hostname on the server and then running chef-client worked. I can now use knife ssh without the -a option. Looks like the server create operation sets the hostname differently than the FQDN that is assigned to the server by Rackspace.
[2012-03-02 19:13:00 -0500] dyer: ok, I am at a loss, I dont get this
[2012-03-02 19:13:00 -0500] hoover_damm: zns, yeah you need to use --node-name otherwise the node-name gets set to the instance id
[2012-03-02 19:13:00 -0500] hoover_damm: zns, which isn't resolvable
[2012-03-02 19:14:00 -0500] hoover_damm: zns, so knife rackspace server create --node-name bob.fqdn.com --server-name bob.fqdn.com
[2012-03-02 19:15:00 -0500] jtimberman: bkocik: looks like the loadmodule line went missing
[2012-03-02 19:16:00 -0500] zns: hoover_damm: I need my own DNS server then. Without that, It would help if the bootstrap after the server create would set the hostname to the rackspace-provided FQDN (octent1-octet2.static.cloud-ips.com) since that data is returned by Rackspace after the server create.
[2012-03-02 19:17:00 -0500] hoover_damm: zns, good ticket
[2012-03-02 19:20:00 -0500] zns: hoover_damm: where would the fix for that go? bootstrap script and knife?
[2012-03-02 19:25:00 -0500] PizzaPill: Hi, I've got a fundamental question: a execute do .. end block gets executed _after_ the recipe is finished? Am I understanding this right?
[2012-03-02 19:27:00 -0500] zns: hoover_damm: thanks for your help. Filling in CLA...
[2012-03-02 19:27:00 -0500] jtimberman: bkocik: i fixed COOK-958, you can grab 0.99.4 of the passenger_apache2 cookbook from the community site
[2012-03-02 19:30:00 -0500] fujin: zns: welcome to the fold. may your contributions be prosperous
[2012-03-02 19:30:00 -0500] zns: fujin: thanks.
[2012-03-02 19:30:00 -0500] zns: * now if only Adobe E-Sign would work *
[2012-03-02 19:32:00 -0500] fujin: fwiw, i use echosign for all of my contractual agreements and have done ever since signing my CLA =_=
[2012-03-02 19:32:00 -0500] fujin: hell I've used it to sign documents and send it to New Zealand Customs *lol*
[2012-03-02 19:34:00 -0500] dyer: hrm, I have no clue why this is boing such a PITA
[2012-03-02 19:35:00 -0500] dyer: the only attribute referecnes to "openjdk" in my entire cookbook dir are defaults, so I am not doing a set or anything to set it to openjdk at runtime
[2012-03-02 19:35:00 -0500] dyer: I even blew away the client and node entirly and registered it just to be certain
[2012-03-02 19:35:00 -0500] dyer: FML
[2012-03-02 19:35:00 -0500] dyer: Any other suggestions on what I can do ?
[2012-03-02 19:37:00 -0500] locojay: anyone using webapp cookbook?
[2012-03-02 19:38:00 -0500] locojay: i get FATAL: ArgumentError: wrong number of arguments (1 for 2)
[2012-03-02 19:39:00 -0500] locojay: https://github.com/fnichol/chef-webapp/blob/master/metadata.rb line 19
[2012-03-02 19:40:00 -0500] zns: fujiun: Ah! Good things come to those who wait. After letting it spin for minutes I know have a doc to e-sign.
[2012-03-02 19:41:00 -0500] locojay: got it just needed to add some descirption
[2012-03-02 19:41:00 -0500] dyer: jtimberman , hoover_damm , any suggestions?
[2012-03-02 19:42:00 -0500] miah: dyer: where is your gist?
[2012-03-02 19:42:00 -0500] dyer: @miah, I have a few hang on
[2012-03-02 19:42:00 -0500] dyer: https://gist.github.com/56deb3289fc62a819fe4
[2012-03-02 19:43:00 -0500] dyer: UI:  https://img.skitch.com/20120302-qp9qrj9qtu552p74psjk6aa8ks.jpg
[2012-03-02 19:43:00 -0500] dyer: Shef: https://gist.github.com/4d48d78f55d95fcb262c
[2012-03-02 19:43:00 -0500] fujin: that gist doesn't show an error :(
[2012-03-02 19:44:00 -0500] dyer: The error is shef shows node[:java][:install_flavor] as openjdk, when everythign else  ( UI, cookbooks, roles, ect ) show it as sun, which is what I want it to be
[2012-03-02 19:47:00 -0500] fujin: has shef applied the role /
[2012-03-02 19:47:00 -0500] dyer: yes, the node only has two roles ( base and this one )
[2012-03-02 19:47:00 -0500] dyer: and I have run chef-client many times
[2012-03-02 19:49:00 -0500] miah: dyer: * `node["java"]["install_flavor"]` - Flavor of JVM you would like installed (`oracle` or `openjdk`), default `openjdk`.
[2012-03-02 19:49:00 -0500] dyer: I am using an older version of the cookbook
[2012-03-02 19:49:00 -0500] miah: i don't believe "sun" is a supported option anymore
[2012-03-02 19:49:00 -0500] miah: oh
[2012-03-02 19:49:00 -0500] miah: are you sure?
[2012-03-02 19:50:00 -0500] dyer: version           "1.1"
[2012-03-02 19:50:00 -0500] spicyWith: Brad_K: I merged your repo with edelights could you check if this looks ok? https://github.com/andresdouglas/chef-cookbooks
[2012-03-02 19:51:00 -0500] dyer: miah, yes
[2012-03-02 19:52:00 -0500] miah: what does "knife cookbook show java" return?
[2012-03-02 19:52:00 -0500] locojay: is user_account something predefined? getting some errors in a cookbook ? no method found
[2012-03-02 19:52:00 -0500] spicyWith: Q: I did a knife cookbook github install myaccount/chef-cookbooks. The cookbook I wanted was under chef-cookbooks/mongodb. There was an existing cookbook named mongodb in my chef-repo, so knife installed it under s/mongodb. How should I include the latter cookbook in recipes or roles - s::mongodb doesn't seem to make chef happy.
[2012-03-02 19:53:00 -0500] chip-: Thanks for all the drama around distros and Java, oracle! Fuck you too!
[2012-03-02 19:54:00 -0500] dyer: miah: java   1.1.0
[2012-03-02 19:55:00 -0500] miah: chip-: seriously.
[2012-03-02 19:55:00 -0500] hoover_damm: oh yeah, they just told us off a few days ago
[2012-03-02 19:55:00 -0500] hoover_damm: :|
[2012-03-02 19:55:00 -0500] hoover_damm: yeah going to openjdk6 is actually a step back for most users
[2012-03-02 19:56:00 -0500] chip-: Things that are fun: Pinning all my environments to the sun Java until such time as I can schedule downtime, because Tomcat on top of the newest oracle-etc. java cookbook wants a restart.
[2012-03-02 19:57:00 -0500] miah: dyer: happen to have a chef-client debug log?
[2012-03-02 19:57:00 -0500] dyer: sure, one sec
[2012-03-02 20:00:00 -0500] Brad_K: spicyWith: looks plausible to me.  thanks!
[2012-03-02 20:00:00 -0500] spicyWith: Brad_K: no prob :). I tried installing it, but for some reason knife puts it under cookbooks/s/mongodb
[2012-03-02 20:00:00 -0500] spicyWith: how would I use it in a recipe like that?
[2012-03-02 20:01:00 -0500] Brad_K: spicyWith: i think you either have to delete the other mongodb cookbook from your chef repository, or you have to give one of them a different name so that they both exist at the same level within the chef cookbooks directory.
[2012-03-02 20:01:00 -0500] spicyWith: I had already installed the community cookbook and that was under cookbooks/mongodb so I'm not sure if they are conflicting
[2012-03-02 20:01:00 -0500] spicyWith: s::mongodb?
[2012-03-02 20:02:00 -0500] Brad_K: yeah, a directory can't have two files/subdirectories with the same name.
[2012-03-02 20:04:00 -0500] jtimberman: question for the audience: What do you expect should be covered in a training unit on writing lightweight resources and providers in cookbooks, beyond the documentation on the wik page?
[2012-03-02 20:06:00 -0500] chip-: I'd love a real-world example of how to produce one of the existing LWRP's, from "I have an idea" to "working code."
[2012-03-02 20:06:00 -0500] Brad_K: jtimberman: for me, i need lots of hands-on examples, preferably building one on top of the other towards a real (and useful) goal.
[2012-03-02 20:07:00 -0500] Brad_K: start as simple as possible, and build on top of that, block by block.
[2012-03-02 20:08:00 -0500] Brad_K: and not just "working code", but also ideas and discussion on where the LWRP might go in the future, and new and useful features that could be added to it.  maybe someone in the class might get a wild hair, and the community ends up with an LWRP that has been extended as a result of the class.
[2012-03-02 20:09:00 -0500] chip-: What Brad said way better'n I did.
[2012-03-02 20:10:00 -0500] jtimberman: :)
[2012-03-02 20:10:00 -0500] atomic-penguin: What's the platform string for OEL?
[2012-03-02 20:10:00 -0500] jtimberman: oracle-enterprise i think?
[2012-03-02 20:11:00 -0500] atomic-penguin: jtimberman, have you seen the "unfakeable Linux" shirts redhat printed up?
[2012-03-02 20:11:00 -0500] Brad_K: i learn much better by doing, and not by reading or hearing.  that's one of the reasons that i learn so much when i'm doing an invited talk or a tutorial  i have to learn the material backwards and forwards for myself, before i can explain it to anyone else.  and i have to try out all sorts of things as i go through it.  that's why i'm hacking on FND now.
[2012-03-02 20:11:00 -0500] mattray: atomic-penguin: I think it's "enterpriseenterprise" or something broken
[2012-03-02 20:12:00 -0500] atomic-penguin: what version of ohai, will have the platform_family attribute then?
[2012-03-02 20:12:00 -0500] mattray: current?
[2012-03-02 20:12:00 -0500] bawt: current is 1.8 somethig, might want to gem update --system
[2012-03-02 20:12:00 -0500] Brad_K: mattray: that does seem sickeningly familiar.  ;-(
[2012-03-02 20:17:00 -0500] fujin: !forget current
[2012-03-02 20:17:00 -0500] bawt: okay
[2012-03-02 20:25:00 -0500] m_rec: hi all, recently we've been getting the following error: /usr/lib64/ruby/1.9.1/net/http.rb:2303:in `error!': 500 "Internal Server Error" (Net::HTTPFatalError) attempting to start chef-server, has anyone had this happen?
[2012-03-02 20:37:00 -0500] Brad_K: m_rec: no, can't say as i have ever seen that message before.  sorry, i wish i could help.  ;-(
[2012-03-02 20:37:00 -0500] m_rec: Brad_K: no worries, thanks though
[2012-03-02 20:40:00 -0500] fujin: is couchdb up/ solr up? rabbitmq up ?
[2012-03-02 20:41:00 -0500] spicyWith: Brad_K: did you name the mongo cookbook "s"
[2012-03-02 20:41:00 -0500] spicyWith: ?
[2012-03-02 20:41:00 -0500] m_rec: yes, all the services are up, was hoping to avoid rebooting the server, but attempting that now in case something was stuck in an odd state
[2012-03-02 20:41:00 -0500] Brad_K: spicyWith: nope, that must have happened on your end.
[2012-03-02 20:42:00 -0500] spicyWith: hmm
[2012-03-02 20:42:00 -0500] spicyWith: git wirzardri not happening
[2012-03-02 21:04:00 -0500] fujin: http://soundcloud.com/proper-villains/hell-yeah
[2012-03-02 21:22:00 -0500] mdxp: does anyone know how you can debug node attributes?
[2012-03-02 21:22:00 -0500] mdxp: i use shef -z and all is great for basic attributes
[2012-03-02 21:23:00 -0500] mdxp: but for the ones overwritten in roles, or similar, you will still get the ones from the node and the roles don't seem to be applied
[2012-03-02 21:23:00 -0500] mdxp: anyone knows some way to debug that and see the final attribute the node will use?
[2012-03-02 21:50:00 -0500] fujin: mdxp: are you saying the attrs in shef -z don't correctly show overrides/defaults from roles applied to that node?
[2012-03-02 21:51:00 -0500] fujin: i thought it loaded the node up at the start, so that seems like it should work
[2012-03-02 21:51:00 -0500] mdxp: i thought like that also
[2012-03-02 21:51:00 -0500] mdxp: but was trying to debug something with the mysql cookbook and see why the ones sent in the roles are not set
[2012-03-02 21:51:00 -0500] mdxp: and it seems like it gets the ones set by the cookbook
[2012-03-02 21:51:00 -0500] mdxp: but not the ones from the roles, etc.
[2012-03-02 21:52:00 -0500] fujin: attempting to replicate
[2012-03-02 21:52:00 -0500] mdxp: thanks
[2012-03-02 21:58:00 -0500] fujin: mdxp: indeed, testing here, a role with default/override in it doesn't seem to be reflected with shef -z
[2012-03-02 21:58:00 -0500] fujin: i believe those attributes should be initialized at the shef -z run time, so that sounds like a bug
[2012-03-02 21:58:00 -0500] mdxp: i thought the same
[2012-03-02 22:01:00 -0500] mdxp: fujin: thanks for looking into it
[2012-03-02 22:03:00 -0500] mattray: mdxp: fujin: similar to this ticket? http://tickets.opscode.com/browse/CHEF-2780
[2012-03-02 22:05:00 -0500] mdxp: mattray: I'm trying to debug the mysql cookbook and see why the server_root_password is no longer taken from a role
[2012-03-02 22:06:00 -0500] mdxp: and this is a simple attribute, then looking into shef -z i noticed that it is the same for others (showing the value defined by the coookbook)
[2012-03-02 22:07:00 -0500] mattray: mdxp: https://github.com/opscode/cookbooks/blob/master/mysql/recipes/server.rb#L26 ?
[2012-03-02 22:07:00 -0500] mdxp: yep
[2012-03-02 22:07:00 -0500] mdxp: seems to me since it was moved there from the attributes
[2012-03-02 22:07:00 -0500] mattray: mdxp: and http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2012-03-02 22:07:00 -0500] mattray: in your role, what precedence are you using?
[2012-03-02 22:08:00 -0500] mdxp: this is default
[2012-03-02 22:08:00 -0500] mattray: you need to use override
[2012-03-02 22:08:00 -0500] mdxp: right, makes sense
[2012-03-02 22:08:00 -0500] mattray: setting it in the recipe is #6, you need something higher
[2012-03-02 22:08:00 -0500] mdxp: but that brought me to the shef -z trying to see what value the node will use
[2012-03-02 22:08:00 -0500] mattray: mysql used to be #1
[2012-03-02 22:08:00 -0500] mattray: err, the attributes file in the mysql cookbook used to set it
[2012-03-02 22:08:00 -0500] mattray: which was precedence #1
[2012-03-02 22:09:00 -0500] mdxp: ok
[2012-03-02 22:09:00 -0500] mattray: so if you'd used it previously that might have bit you
[2012-03-02 22:09:00 -0500] mdxp: but still i would have expected to be able to inspect that value with shef, right?
[2012-03-02 22:09:00 -0500] mattray: definitely
[2012-03-02 22:09:00 -0500] mattray: hence the bug :(
[2012-03-02 22:09:00 -0500] mdxp: right
[2012-03-02 22:10:00 -0500] |shad0w|: knife node show will do the right thing when you access the attribute directly
[2012-03-02 22:11:00 -0500] |shad0w|: if foo.bar had defaults and overrides it seems to have them merged with node show -a foo but proper when -a foo.bar is passed
[2012-03-02 22:12:00 -0500] mdxp: |shad0w|: thanks for that; it is easier to see it like that but for some reason never used it before; and always went to shef
[2012-03-02 22:14:00 -0500] David_Miller: can someone point me to some docs about versioning cookbooks and using different versions on different environments?
[2012-03-02 22:14:00 -0500] |shad0w|: ?environments
[2012-03-02 22:14:00 -0500] |shad0w|: hmm
[2012-03-02 22:14:00 -0500] |shad0w|: http://wiki.opscode.com/display/chef/Environments
[2012-03-02 22:15:00 -0500] |shad0w|: ?provider
[2012-03-02 22:15:00 -0500] |shad0w|: whats the bot triggers for that?
[2012-03-02 22:15:00 -0500] |shad0w|: provider?
[2012-03-02 22:15:00 -0500] bawt: provider is http://wiki.opscode.com/display/chef/Resources#Resources-Meta
[2012-03-02 22:15:00 -0500] |shad0w|: ahh
[2012-03-02 22:16:00 -0500] |shad0w|: environment?
[2012-03-02 22:16:00 -0500] bawt: environment is set per-node
[2012-03-02 22:16:00 -0500] |shad0w|: bawt forget environment
[2012-03-02 22:16:00 -0500] bawt: okies!
[2012-03-02 22:16:00 -0500] |shad0w|: bawt environment is http://wiki.opscode.com/display/chef/Environments
[2012-03-02 22:16:00 -0500] |shad0w|: environment?
[2012-03-02 22:16:00 -0500] bawt: environment is http://wiki.opscode.com/display/chef/Environments
[2012-03-02 22:17:00 -0500] David_Miller: |shad0w|: thanks that will get me started
[2012-03-02 22:17:00 -0500] fujin: thx |shad0w|
[2012-03-02 22:17:00 -0500] |shad0w|: David_Miller, freeze is also nice when doing things like that
[2012-03-02 22:17:00 -0500] fujin: !botsnack
[2012-03-02 22:17:00 -0500] bawt: fujin: =D
[2012-03-02 22:18:00 -0500] |shad0w|: freeze?
[2012-03-02 22:18:00 -0500] fujin: freeze is *awesome* i highly recommend you implement it
[2012-03-02 22:18:00 -0500] fujin: err lol
[2012-03-02 22:18:00 -0500] fujin: !forget freeze
[2012-03-02 22:18:00 -0500] bawt: okay
[2012-03-02 22:18:00 -0500] |shad0w|: freeze is http://wiki.opscode.com/display/chef/Version+Constraints
[2012-03-02 22:19:00 -0500] mattray: David_Miller: here's a blog post about it: http://www.opscode.com/blog/2011/04/21/chef-0-10-preview-environments/
[2012-03-02 22:19:00 -0500] |shad0w|: fujin, I ended up adding a new rake task to upload cookbooks one by one and looking for .freeze in the cookbook dir to auto freeze from our git repo
[2012-03-02 22:20:00 -0500] fujin: nice
[2012-03-02 22:20:00 -0500] fujin: that's hot
[2012-03-02 22:20:00 -0500] |shad0w|: and added it to chefignore
[2012-03-02 22:20:00 -0500] |shad0w|: which is also nice
[2012-03-02 22:22:00 -0500] David_Miller: so the basic idea is edit cookbook some, upload it
[2012-03-02 22:22:00 -0500] David_Miller: no version contstraints for the test environment
[2012-03-02 22:22:00 -0500] fujin: yahuh
[2012-03-02 22:22:00 -0500] David_Miller: version constraint for the prod environment
[2012-03-02 22:22:00 -0500] fujin: lock down your other environments
[2012-03-02 22:22:00 -0500] |shad0w|: there are multiple patterns you could follow
[2012-03-02 22:22:00 -0500] fujin: i usually have the 'development' environment a complete shit show
[2012-03-02 22:23:00 -0500] David_Miller: when cookbook is tested, freeze the version it and update the version req for production envirnment
[2012-03-02 22:23:00 -0500] mattray: David_Miller: you can also use pessimistic greater thans "~>" to keep a "stable" branch going. Like 1.2.X when there is a 1.3 in QA
[2012-03-02 22:24:00 -0500] fujin: wish the tooling around cookbook version management was better
[2012-03-02 22:24:00 -0500] fujin: like knif ecookbook version bump or whatever
[2012-03-02 22:24:00 -0500] fujin: like the old jeweler release helpers
[2012-03-02 22:24:00 -0500] fujin: knife cookbook version bump --add-to-env production
[2012-03-02 22:24:00 -0500] fujin: lot of human work involved, error-prone
[2012-03-02 22:24:00 -0500] mdxp: i wish there was a tool to show the difference between 2 versions of a cookbook
[2012-03-02 22:26:00 -0500] mdxp: fujin: have you seen knife spork: https://github.com/jonlives/knife-spork
[2012-03-02 22:26:00 -0500] fujin: mdxp: librarian really helps with that stuff a lot
[2012-03-02 22:26:00 -0500] fujin: that's pretty cool
[2012-03-02 22:27:00 -0500] fujin: i had seen it but not investigated
[2012-03-02 22:27:00 -0500] |shad0w|: fujin: https://gist.github.com/1961870
[2012-03-02 22:27:00 -0500] |shad0w|: then just load it in Rakefile after load 'chef/tasks/chef_repo.rake'
[2012-03-02 22:28:00 -0500] fujin: naiiice
[2012-03-02 22:28:00 -0500] |shad0w|: it will still try to upload it every run
[2012-03-02 22:28:00 -0500] |shad0w|: but the upload error due to freeze doesn't seem to break anything else
[2012-03-02 22:29:00 -0500] |shad0w|: if it had been uploaded already frozen
[2012-03-02 22:31:00 -0500] |shad0w|: and of course add .freeze to cookbooks/chefignore
[2012-03-02 22:31:00 -0500] |shad0w|: unless you really want to upload it with your cookbook
[2012-03-02 22:33:00 -0500] spheromak: spork is handy
[2012-03-02 22:35:00 -0500] David_Miller: Uploading node_application             [1.0.0]
[2012-03-02 22:35:00 -0500] David_Miller: ERROR: Version 1.0.0 of cookbook node_application is frozen. Use --force to override.
[2012-03-02 22:35:00 -0500] David_Miller: that's the first time i've tried to freeze something
[2012-03-02 22:36:00 -0500] David_Miller: :/
[2012-03-02 22:36:00 -0500] |shad0w|: it was already frozen
[2012-03-02 22:37:00 -0500] David_Miller: how?
[2012-03-02 22:37:00 -0500] fujin: someone used --freeze when they uploaded it? :)
[2012-03-02 22:37:00 -0500] fujin: (or it's in your knife.rb)
[2012-03-02 22:38:00 -0500] David_Miller: only me here, not in knife
[2012-03-02 22:39:00 -0500] David_Miller: I still only see the old version in knife cookbook show, and frozen is false
[2012-03-02 22:39:00 -0500] David_Miller: i guess i'll use --force :)
[2012-03-02 22:42:00 -0500] |shad0w|: or bump your version
[2012-03-02 22:42:00 -0500] |shad0w|: are you the only one working on that cookbook ?
[2012-03-02 22:43:00 -0500] David_Miller: just me,  i guess you have to upload a version before you freeze it ?
[2012-03-02 22:44:00 -0500] |shad0w|: I don't think so
[2012-03-02 22:44:00 -0500] |shad0w|: I could be wrong
[2012-03-02 22:44:00 -0500] siezer:      -x root                    \
[2012-03-02 22:44:00 -0500] siezer:      -N eucalyptus-1.example.com        \
[2012-03-02 22:44:00 -0500] siezer:      -E _default                \
[2012-03-02 22:44:00 -0500] siezer:      -d affs-omnibus            \
[2012-03-02 22:44:00 -0500] siezer: er farking paste buffer
[2012-03-02 22:44:00 -0500] |shad0w|: haha
[2012-03-02 22:44:00 -0500] David_Miller: yeah, that's how its working for me
[2012-03-02 22:44:00 -0500] |shad0w|: it happens
[2012-03-02 22:45:00 -0500] David_Miller: incremment version in metadata.rb, upload, then upload --freeze
[2012-03-02 22:45:00 -0500] |shad0w|: hmm, for me too
[2012-03-02 22:45:00 -0500] |shad0w|: this is an issue with how I want to do our rev control and push process
[2012-03-02 22:45:00 -0500] |shad0w|: argg
[2012-03-02 22:46:00 -0500] |shad0w|: probaby bad error checking because the cookbook doesn't exist yet
[2012-03-02 22:46:00 -0500] |shad0w|: s/error checking/test
[2012-03-02 22:51:00 -0500] |shad0w|: looks like knife is looking for a 409 to determine that it is frozen
[2012-03-02 23:10:00 -0500] chip-: I asked this a couple of months ago and then totally failed to write down the answer: How do I query clients for the version of chef-client they're running? Don't see it as a node attribute in knife show.
[2012-03-02 23:11:00 -0500] |shad0w|: looks like node['hef_packages'['chef']['version']
[2012-03-02 23:11:00 -0500] |shad0w|: chef_packages even
[2012-03-02 23:11:00 -0500] |shad0w|: at least on .10
[2012-03-02 23:12:00 -0500] bkocik: oof - is there a transcript of this room somewhere? Colloquy is telling me someone addressed me earlier, but I can't scroll back far enough to find it...
[2012-03-02 23:12:00 -0500] chip-: |shad0w|: what's the syntax for plugging that into a knife search?
[2012-03-02 23:13:00 -0500] miah: bkocik: /lastlog bkocik 5
[2012-03-02 23:13:00 -0500] |shad0w|: well, it is key value and other attribs may have version as the key
[2012-03-02 23:13:00 -0500] bkocik: ooh - thank you
[2012-03-02 23:13:00 -0500] miah: not sure if that works in Colloquy, but it does in irssi =)
[2012-03-02 23:13:00 -0500] bkocik: Doesn't look like it did.
[2012-03-02 23:15:00 -0500] bkocik: Woops.
[2012-03-02 23:15:00 -0500] chip-: I just realized I don't know how to turn nested values into solr queries.
[2012-03-02 23:15:00 -0500] |shad0w|: hmm: http://likens.us/logs/2012/ but it appears to be behind a bit
[2012-03-02 23:16:00 -0500] David_Miller: Do environment attribute overrides beat role attribute overrides?
[2012-03-02 23:16:00 -0500] erikh: what's ##monitoringsucks ?
[2012-03-02 23:16:00 -0500] |shad0w|: attributes?
[2012-03-02 23:16:00 -0500] bawt: attributes is http://wiki.opscode.com/display/chef/Attributes
[2012-03-02 23:17:00 -0500] mattray: David_Miller: http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2012-03-02 23:17:00 -0500] chip-: erikh: An ongoing conversation about how shitty monitoring continues to be in 2012, and how we can fix it. Also occasionally people get together and work on it.
[2012-03-02 23:17:00 -0500] mattray: (added numbers earlier)
[2012-03-02 23:17:00 -0500] erikh: ooh
[2012-03-02 23:17:00 -0500] David_Miller: oops saw that wiki but missed the precedence list, thanks
[2012-03-02 23:17:00 -0500] erikh: chip-: open to anyone?
[2012-03-02 23:17:00 -0500] mattray: erikh: yup
[2012-03-02 23:17:00 -0500] erikh: yay
[2012-03-02 23:24:00 -0500] bkocik: Oh, yay - jtimberman closed out the passenger_apache2 bug. Thank you!!!
[2012-03-02 23:25:00 -0500] |shad0w|: chip- if you just want a list just * search and pass -a
[2012-03-02 23:25:00 -0500] |shad0w|: knife search node "chef_packages:*" -a node.chef_packages.chef.version
[2012-03-02 23:31:00 -0500] |shad0w|: ahh, in knife you can search for nested keys by replacing . with _
[2012-03-02 23:33:00 -0500] chip-: |shad0w|: Thanks. I was looking at the docs and losing my mind trying to figure it out.
[2012-03-02 23:35:00 -0500] |shad0w|: knife search node 'chef_packages_chef_version:0.10.8
[2012-03-02 23:35:00 -0500] |shad0w|: for instance
[2012-03-02 23:36:00 -0500] |shad0w|: it looks like if you do nested attrib with _ you have to start from the top of the key
[2012-03-02 23:36:00 -0500] |shad0w|: ie you can do search node 'chef_version:foo'
[2012-03-02 23:36:00 -0500] |shad0w|: s/can/can't
[2012-03-02 23:36:00 -0500] tolland: is there a full link to the opscode talk at velocity 2010, i see loads of 5 minutes chunks on youtube
[2012-03-02 23:56:00 -0500] hoover_damm: so anyone know of any applications that let you define a cluster and boot it? not like cloudformation
[2012-03-02 23:57:00 -0500] hoover_damm: http://techylib.com/en/view/arya/integrating_aws_cloudformation_with_opscode_chef
[2012-03-02 23:57:00 -0500] hoover_damm: although that looks quite nice

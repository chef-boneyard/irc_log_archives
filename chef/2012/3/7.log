[2012-03-07 08:22:00 -0500] hippiehacker: http://tickets.opscode.com/browse/KNIFE_WINDOWS-11 a revisit here would be nice 8), sorry for not including the patch, it was written, I just forgot to attach it
[2012-03-07 09:18:00 -0500] danderson: so close to having a one-recipe PXE-based installer
[2012-03-07 09:18:00 -0500] danderson: way simpler than pxe_dust
[2012-03-07 09:18:00 -0500] danderson: (though right now it only knows how to do debian, because that's all I care about)
[2012-03-07 09:42:00 -0500] ni-ka: hi, is there a cookbook to set an environment variable? (first only for chef and its children processes, maybe for user in the future)
[2012-03-07 09:45:00 -0500] BryanWB: ni-ka: for only chef,  ENV['name_of_envvar'] = "your_env_var"
[2012-03-07 09:45:00 -0500] BryanWB: u can do it w/ ruby
[2012-03-07 09:46:00 -0500] BryanWB: for something that persists, template a file in /etc/profile.d/foo.sh and make it executable
[2012-03-07 10:13:00 -0500] ni-ka: so I need to write an own recipe to set ENV['http_proxy']? there is no existing recipe?
[2012-03-07 10:15:00 -0500] BryanWB: ni-ka: just put it in an existing recipe
[2012-03-07 10:40:00 -0500] ni-ka: BryanWB: well I'd like it to be configurable (I'm using vagrant)
[2012-03-07 10:40:00 -0500] BryanWB: ni-ka: ?? it is configurable w/ ruby
[2012-03-07 10:45:00 -0500] proffalken: Is there a "pleasant" way to roll the keys on enc. databags?
[2012-03-07 10:45:00 -0500] proffalken: i.e. if someone leaves the company?
[2012-03-07 10:54:00 -0500] ehaselwanter: anyone seen this before?
[2012-03-07 10:54:00 -0500] ehaselwanter: $ knife cookbook upload -a
[2012-03-07 10:54:00 -0500] ehaselwanter: ERROR: ArgumentError: wrong number of arguments (1 for 2)
[2012-03-07 11:13:00 -0500] ehaselwanter: same with knife cookbook test
[2012-03-07 11:50:00 -0500] BryanWB: ehaselwanter: i think i have seen it in metadata.rb but not sure
[2012-03-07 11:51:00 -0500] BryanWB: ehaselwanter: greetings to Berlin!
[2012-03-07 12:24:00 -0500] ehaselwanter: BryanWB: yeah. must be something with the cookbooks
[2012-03-07 12:26:00 -0500] BryanWB: ehaselwanter: but it is not a syntax error
[2012-03-07 12:27:00 -0500] BryanWB: ehaselwanter: at least not inside a recipe
[2012-03-07 12:35:00 -0500] ehaselwanter: BryanWB: metadata.rb was wrong
[2012-03-07 12:38:00 -0500] gchristensen: jtimberman: ping
[2012-03-07 13:10:00 -0500] `brendan: good morning
[2012-03-07 13:35:00 -0500] alff: hi, everyone
[2012-03-07 13:37:00 -0500] alff: i have a problem with chef run on windows host
[2012-03-07 13:37:00 -0500] alff: i tried to describe this here http://help.opscode.com/discussions/problems/1329-cookbook-files-doesnt-download-on-windows-host
[2012-03-07 13:37:00 -0500] alff: anyone help?
[2012-03-07 14:08:00 -0500] tolland: is there a standard way to return the server timezone in chef?
[2012-03-07 14:15:00 -0500] tolland: ok well backticks in the erb template works but its a dirty hack
[2012-03-07 14:18:00 -0500] BryanWB: system('date --some-switch')
[2012-03-07 14:21:00 -0500] proffalken: tolland: could you not include tzinfo in the recipe.rb and get the data at that point?
[2012-03-07 14:57:00 -0500] geekbri: what is the proper usage of node.delete?  node.delete(['item1']['subitem2']) ?  Will this delete ALL attributes or only attributes set via the cookbook
[2012-03-07 14:57:00 -0500] tundal45: is there a link to transcripts for this channel?
[2012-03-07 15:00:00 -0500] jtimberman: tundal45: we (opscode) are working on a public logging thing for the community site, and hoover_damm has historical log data at likens.us/logs
[2012-03-07 15:00:00 -0500] tundal45: jtimberman: thanks
[2012-03-07 15:01:00 -0500] dyer: Hey Guys, what this does mean?
[2012-03-07 15:01:00 -0500] dyer: [Wed, 07 Mar 2012 14:58:10 +0000] DEBUG: Not setting provisioning_api/sip_domain to "att2.voxeolabs.net" because it has a normal value already
[2012-03-07 15:01:00 -0500] dyer: "because it has a normal value" ?
[2012-03-07 15:02:00 -0500] jtimberman: dyer: you're trying to set a "default" value?
[2012-03-07 15:02:00 -0500] jtimberman: attributes?
[2012-03-07 15:02:00 -0500] bawt: attributes is http://wiki.opscode.com/display/chef/Attributes
[2012-03-07 15:02:00 -0500] dyer: ah
[2012-03-07 15:02:00 -0500] dyer: yea, I am overriding some in a recipe
[2012-03-07 15:02:00 -0500] dyer: that makes perfect sense
[2012-03-07 15:02:00 -0500] dyer: thanks
[2012-03-07 15:10:00 -0500] dyer: jtimberman, so I understand what that line means now, but I dont see why its thinking its already set.
[2012-03-07 15:11:00 -0500] dyer: node[:provisioning_api] ==> https://gist.github.com/c033787dc54747743629
[2012-03-07 15:13:00 -0500] dyer: I just added the recipe to the gist, you may have to refresh
[2012-03-07 15:13:00 -0500] dyer: the lines in the recipe that are giving me issue are 25 & 31 on premise.rb
[2012-03-07 15:17:00 -0500] dyer: this recipe can be deployed in two types of environments, hosted and premise.  The premise recipe a user may want to override the branding's via a role attribute.  Also the hosted default will be different then the premise defaults, so I figured I would do set_unless in their respecive recipes
[2012-03-07 15:17:00 -0500] dyer: does that make sense?
[2012-03-07 15:28:00 -0500] geekbri: jtimberman: Is it an intended result that if you set an attribute in a cookbooks attribute file based on other attributes, then override that attribute in a role file that the other attributes based off the first are not reevaluated with the new value?
[2012-03-07 15:33:00 -0500] ssd7: geekbri: The override attributes in the role are applied after the attribute files are processed, so when you access attributes in an attribute file, you aren't necessarily getting their "final" values
[2012-03-07 15:38:00 -0500] geekbri: ssd7: right but if you are building something say, a path to an executable and you allow the "bin" directory to be altered in a role file, there is no way to do the rest in the attributes file.  For example if in your attributes/default.rb you have default['bin_path'] = '/bin' then default['my_exec'] = "#{node['bin_path']}/my_exec". there is no simple way to override the "bin_path" attribute in the role file and have my_exec be the new path.
[2012-03-07 15:38:00 -0500] geekbri: ssd7: that kind of murders a lot of the value of override attributes doesnt it?  I've seen that pattern used a lot in opscode cookbooks (ie. couchdb one, apache one)
[2012-03-07 15:39:00 -0500] gmcinnes: mornin' chefs
[2012-03-07 15:41:00 -0500] ssd7: geekbri: Typically we recommend doing the "#{node['bin_path']}/my_exec" in a recipe.  There's a trick you can use to force role attrs to be evaluated while the attribute files are being processed, but that has some consequences for the more fine-grained precendence of attributes
[2012-03-07 15:41:00 -0500] gmcinnes: I have to manage some init scripts that misbehave (ie, they don't exit 0 under what I consider normal conditions  - trying to stop a service that's already stopped, for example)
[2012-03-07 15:42:00 -0500] gmcinnes: What's the best way to handle that? Just wrap the init script and swallow the exit code?
[2012-03-07 15:42:00 -0500] geekbri: ssd7: what is this trick :).  I wrote this giant attributes file building attributes off of other ones thinking I could override just 1 in the role and have all the others based off of it.. but it isn't working properly.
[2012-03-07 15:42:00 -0500] geekbri: I'm willing to deal with the consequences ")
[2012-03-07 15:46:00 -0500] ssd7: geekbri: one sec, I've got it here somewhere
[2012-03-07 15:46:00 -0500] geekbri: ssd7: I owe you a beer or 40
[2012-03-07 15:50:00 -0500] ssd7: geekbri: :)  If you put: apply_expansion_attributes(expand!)  at the top of the attribute file, it will immedately apply the role and environment attributes
[2012-03-07 15:50:00 -0500] geekbri: ssd7: you just saved me so much work :)
[2012-03-07 15:51:00 -0500] geekbri: ssd7: http://alltheragefaces.com/img/faces/large/sweet-jesus-l.png
[2012-03-07 15:51:00 -0500] ssd7: :D
[2012-03-07 15:52:00 -0500] ssd7: Note that one additional consequence is that you are tying your recipe to internal implementation details, so it may not be upgrade friendly in the future.
[2012-03-07 15:53:00 -0500] BryanWB: i recommend using more oregano, but ymmv
[2012-03-07 15:54:00 -0500] geekbri: ssd7: I'm willing to deal with that consequence for the time being.
[2012-03-07 15:55:00 -0500] geekbri: ssd7: I'm supposed to put that at the top of the attributes file?  It didn't seem to have any effect.
[2012-03-07 15:59:00 -0500] sivy: gooood morning chefs
[2012-03-07 15:59:00 -0500] sivy: ssd7: howdy
[2012-03-07 16:00:00 -0500] sivy: hope it wasn't something i said :)
[2012-03-07 16:09:00 -0500] sivy: how do I send a notifcation to a recipe in shef?
[2012-03-07 16:09:00 -0500] sivy: that's not in another recipe?
[2012-03-07 16:09:00 -0500] sivy: or resource?
[2012-03-07 16:09:00 -0500] wilton: Hello All - What is the best way to get LWRP executing from a centralized location like the chef-server, rather then on each node. For example, I am creating an LWRP for route53 which require the 'route53' gems and a few other deps. I would like that any recipes calling on this LWRP get executed from a centralized location, then having to install all the deps on each node just to create a route53 entry.
[2012-03-07 16:10:00 -0500] Brad_K: wilton: that's not the chef model.  chef works on a pull basis, not push.
[2012-03-07 16:12:00 -0500] j-v-e: greatings gentlemen
[2012-03-07 16:13:00 -0500] j-v-e: We are writing an ossec cookbook
[2012-03-07 16:13:00 -0500] j-v-e: and ossec uses XML in its rules format
[2012-03-07 16:13:00 -0500] j-v-e: my question is: is there an automated way to transform JSON attributes into XML in chef ?
[2012-03-07 16:14:00 -0500] j-v-e: I could write a parser in my template, but if there's already a clean way to do that....
[2012-03-07 16:14:00 -0500] Brad_K: j-v-e: there may be some tools within chef (or libraries used by chef) that convert JSON to XML, but you'd have to go digging around.
[2012-03-07 16:15:00 -0500] Brad_K: i'm not aware of that kind of conversion as a standard feature.
[2012-03-07 16:15:00 -0500] j-v-e: ok, nothing out of the box then
[2012-03-07 16:15:00 -0500] j-v-e: I was looking into this, I'll see if it works http://stackoverflow.com/questions/4272410/how-can-i-convert-json-to-xml-in-ruby
[2012-03-07 16:19:00 -0500] BryanWB: j-v-e: i am sure there is a nice ruby gem somewhere to do just them, just got to make sure it is on the client
[2012-03-07 16:20:00 -0500] jtimberman: wilton: What I did for my internal network is to have one system be the "dnsserver". i have a data bag of all the hostnames/ips that i want static (my wifi router, internet gateway, systems that don't run chef basically), and combine that with a search that finds my nodes and then iterates over all those and creates entries. i use dnsimple instead of route53, though.
[2012-03-07 16:20:00 -0500] jtimberman: http://jtimberman.housepub.org/blog/2012/01/02/switching-to-dnsimple/
[2012-03-07 16:20:00 -0500] jtimberman: that post has some information about what i'm doing.
[2012-03-07 16:21:00 -0500] jtimberman: i do have a couple areas where i want to self-register nodes, so i have a recipe for that, too. posted about that here: http://jtimberman.housepub.org/blog/2012/01/29/dnsimple-self-registration-recipe/
[2012-03-07 16:24:00 -0500] keymon: hello
[2012-03-07 16:25:00 -0500] keymon: one fast question: How can I check if a node has a recipe enabled?
[2012-03-07 16:25:00 -0500] wilton: jtimberman, thanks, that makes a lot of sense.
[2012-03-07 16:25:00 -0500] keymon: something like node.has_recipe?('mysql')
[2012-03-07 16:26:00 -0500] jtimberman: keymon: node.recipes.include?("mysql")
[2012-03-07 16:27:00 -0500] jtimberman: wilton: depending on the remote service's API though, that DNS stuff can take a bit to process.. I removed mine because i have fairly static hostnames and it was about 1s per record just to check existence.
[2012-03-07 16:27:00 -0500] jtimberman: (and it is more reliable to check existence with the API than it is to try and resolve)
[2012-03-07 16:27:00 -0500] keymon: jtimberman: thx!
[2012-03-07 16:30:00 -0500] corp: yo yo
[2012-03-07 16:30:00 -0500] gmcinnes: anyone see my earlier question about badly written init scripts?  They don't return 0 when they should (ie when stopping a service that's already stopped).  Where's the right place to fix that?
[2012-03-07 16:31:00 -0500] maek: gmcinnes: weve taken to converting those offenders to bluepill
[2012-03-07 16:32:00 -0500] corp: this syntax doesn't work in LWRP. known bug? notifies :reload, "service[nginx]"
[2012-03-07 16:32:00 -0500] Brad_K: gmcinnes: i've seen some examples of that.  what i've done in the past is to hack the provided init script, pull that into my chef recipe/templates, and then push out my own version of the init script  over-riding whatever else might have been pushed by the package, etc....
[2012-03-07 16:33:00 -0500] corp: ah. i see it's a bug http://tickets.opscode.com/browse/CHEF-2404
[2012-03-07 16:33:00 -0500] gmcinnes: maek: so you fix it at the system process. mgt. level. (ie init script, bluepill) not by swallowing the issue inside a chef service block or similar
[2012-03-07 16:33:00 -0500] sivy: gaaaah
[2012-03-07 16:33:00 -0500] gmcinnes: Brad_K: right. your approach similar to maek.
[2012-03-07 16:34:00 -0500] Brad_K: except we
[2012-03-07 16:34:00 -0500] gmcinnes: seems like the right thing to me too.
[2012-03-07 16:34:00 -0500] Brad_K: except we're not converting to bluepill.  ;-)
[2012-03-07 16:34:00 -0500] gmcinnes: that's enough of a consensus for me.
[2012-03-07 16:34:00 -0500] ssd7: geekbri: sorry, seems I headed for the bus just as you were messaging me.  Yeah that should go at the top of your attribute file.  It's possible I misunderstood your use case though.
[2012-03-07 16:34:00 -0500] gmcinnes: right. similar, not identical.
[2012-03-07 16:34:00 -0500] sivy: use python_viertualenv in shef: virtualenv created, no complaints. use ptyhon_virutalenv in chef on real node: virtualenv NOTCREATED, no complaints
[2012-03-07 16:34:00 -0500] sivy: WTF
[2012-03-07 16:35:00 -0500] gmcinnes: I was just trying to get a handle on whether to kludge over it in the proc management layer, or inside the chef recipe.
[2012-03-07 16:35:00 -0500] geekbri: ssd7: This question on the opscode page is actually my use case http://community.opscode.com/questions/77
[2012-03-07 16:35:00 -0500] geekbri: ssd7: as for the bus, I can relate :-P
[2012-03-07 16:37:00 -0500] Brad_K: gmcinnes: i generally try to keep things as relatively simple as i can.  it's bad enough that i'm having to manage over 50 cookbooks comprising over 53k lines of "infrastructure as code".  i don't need any unnecessary additional complexity in there.
[2012-03-07 16:38:00 -0500] ssd7: geekbri: Hmm.  I think the the apply_expansion_attributes thing should work there.  Or at least, that is what I used this for in the past.
[2012-03-07 16:38:00 -0500] geekbri: ssd7: so far nothing. I'll try to play with it further later.
[2012-03-07 16:39:00 -0500] gmcinnes: Brad_K: !! you poor thing.
[2012-03-07 16:39:00 -0500] gmcinnes: I suppose the alternative is worse.
[2012-03-07 16:40:00 -0500] geekbri: ssd7: its too bad chef-client doesn't wait until after all attributes have been flattened to expand.
[2012-03-07 16:40:00 -0500] Brad_K: !! my baby shot me down
[2012-03-07 16:44:00 -0500] gmcinnes: :)
[2012-03-07 17:02:00 -0500] AntonZ: Good morning folks, question- if i wanted to install something useing unatended install/answer file, how do i translate that into cookbook, do i use template/attribiutes, or? i'm interested in an easiest method for a novice chef user
[2012-03-07 17:06:00 -0500] jtimberman: s/bluepill/runit/ :D
[2012-03-07 17:06:00 -0500] jtimberman: (though bluepill is fine, and its more cross platform since its not C)
[2012-03-07 17:07:00 -0500] chip-: Question re: chef hosted: Any way to run audits of convergence history for a particular date range? I know that many of my hosts stopped converging properly until fixed by hand sometime starting last weekend until this morning, when I fixed the last one.
[2012-03-07 17:07:00 -0500] chip-: Any way I can get a list of machines that took longer than n hours to converge during that time period?
[2012-03-07 17:08:00 -0500] AntonZ: jtimberman was it addressed for me ?
[2012-03-07 17:10:00 -0500] proffalken: can I use .has_variable? in a chef recipe/template like I would in a puppet manifest?
[2012-03-07 17:10:00 -0500] corp: anyone have issues with couchdb not listening on any ports?
[2012-03-07 17:11:00 -0500] jtimberman: AntonZ: general statement :)
[2012-03-07 17:11:00 -0500] proffalken: I'm iterating over the content of a databag and only want to act in the template if a variable has been set
[2012-03-07 17:11:00 -0500] AntonZ: oh, okay
[2012-03-07 17:13:00 -0500] corp: seems i have to start couch by hand (debian squeeze)
[2012-03-07 17:13:00 -0500] AntonZ: ive seen a lot of scenarios where attribiutes and variables get passed along to the install application, but i dont know the other side of the equation
[2012-03-07 17:13:00 -0500] cwj: proffalken: not familiar with puppet manifests, but if you are looking to see if an attribute exists on the node or some other hash-like structure, you can use .has_key?('foo')
[2012-03-07 17:13:00 -0500] AntonZ: so what would be the best/easiest way to translate answer file in chef ?
[2012-03-07 17:14:00 -0500] proffalken: cwj: thanks.  It turns out that I can just do "<% if @variable %>" and that will work for me :)
[2012-03-07 17:14:00 -0500] AntonZ: jira supports unatended install, i have answer file with my config settings, how do i pass along that answer file in my cookbook
[2012-03-07 17:15:00 -0500] proffalken: AntonZ: where does the file need to be for Jira to read it?
[2012-03-07 17:15:00 -0500] AntonZ: atlassian-jira-X.Y.bin -q -varfile response.varfile
[2012-03-07 17:15:00 -0500] AntonZ: thats the command i would run in bash
[2012-03-07 17:16:00 -0500] proffalken: AntonZ: ok, so template the config file and place it somewhere useful (/var/cache/jirainstall.config for example)
[2012-03-07 17:16:00 -0500] proffalken: then run an exec that depends on that file being in place
[2012-03-07 17:16:00 -0500] proffalken: atlassian-jira-X.Y.bin -q -varfile /var/cache/jirainstall.config
[2012-03-07 17:16:00 -0500] proffalken: AntonZ: I've not tested that, but it should work, it's a similar premise to the opscode MySQL cookbook and grants
[2012-03-07 17:17:00 -0500] AntonZ: do i define exec statemtn right in the defaukt recipe
[2012-03-07 17:17:00 -0500] AntonZ: ?
[2012-03-07 17:17:00 -0500] proffalken: AntonZ: that's up to you ;) but I see no reason not to unless you have a recipe for configuring and a recipe for managing (for instance)
[2012-03-07 17:18:00 -0500] AntonZ: also how do i get that file in that location, i guess i will have to have files fodler in my cookbook
[2012-03-07 17:18:00 -0500] Brad_K: AntonZ: either use cookbook_file, or a template, depending on whether any changes need to be made to the answers file based on the hostname or whatever else might change.
[2012-03-07 17:18:00 -0500] AntonZ: well, i dont have anything yet, im trying to understand my cookbook architecture, so i can research and puit together
[2012-03-07 17:20:00 -0500] AntonZ: is there a cookbook similar to what im trying to do ?
[2012-03-07 17:20:00 -0500] AntonZ: so i cna use it as a guide ?
[2012-03-07 17:21:00 -0500] chip-: So my problem: The idiots who run my vmware farm with 250+ chef nodes on it fucked up with their backup software and wound up reverting every host that had a manual snapshot back to that snapshot.
[2012-03-07 17:21:00 -0500] chip-: Some were reverted as much as a YEAR
[2012-03-07 17:21:00 -0500] chip-: I need to run an audit to find out which hosts were reverted, think I just came up with a way to do it via knife.
[2012-03-07 17:21:00 -0500] sivy: chip-: wow.
[2012-03-07 17:21:00 -0500] chip-: It happened over the weekend, which means any host that wasn't reverted is going to have log entries for Feb 29th.
[2012-03-07 17:22:00 -0500] chip-: so I should be able to grep 'Feb\ 29' /var/log/kerne* /var/log/message*' and if it returns a match, know the host wasn't reverted
[2012-03-07 17:22:00 -0500] chip-: wrap that in a bash if statement
[2012-03-07 17:22:00 -0500] chip-: then knife ssh "name:*.esxdomain" "ifstatement"
[2012-03-07 17:22:00 -0500] chip-: and I should be able to get a list of all hosts with no log entries for Feb 29th
[2012-03-07 17:23:00 -0500] chip-: In conclusion, I love Chef very, very much right now.
[2012-03-07 17:23:00 -0500] proffalken: AntonZ: start with a very simple cookbook that copies the JIRA installer to the disk of the system on which you wish to install it
[2012-03-07 17:23:00 -0500] proffalken: AntonZ: (look at the cookbook_file resource to do this)
[2012-03-07 17:23:00 -0500] AntonZ: roger that, thanks proffalken!
[2012-03-07 17:24:00 -0500] proffalken: AntonZ: then if you need to change the configuration based on various things, create a template for the unattend file
[2012-03-07 17:24:00 -0500] proffalken: AntonZ: and then create the execute command to run the file your copied in step one with the file you templated on step 2
[2012-03-07 17:25:00 -0500] proffalken: AntonZ: once you have that working, start to tie the cookbook into some of the other ones out there that setup your webserver/db backend of choice
[2012-03-07 17:26:00 -0500] proffalken: it's taken me about three weeks to start to get the hang of Chef, however I'm now putting the finishing touches to a cookbook that uses databags (normal and encrypted) to configure backups across hundreds of nodes
[2012-03-07 17:26:00 -0500] sivy: ssd7: hello
[2012-03-07 17:26:00 -0500] AntonZ: thats a good start, cheers proffalken!
[2012-03-07 17:26:00 -0500] proffalken: AntonZ: you'll get the hang of it quite quickly based on my experience... :)
[2012-03-07 17:26:00 -0500] proffalken: np
[2012-03-07 17:26:00 -0500] proffalken: jtimberman: do I get a badge as this is the first time I've provided help? ;)
[2012-03-07 17:29:00 -0500] gmcinnes: chefs, is there a way to set environment variables on resources before they execute?
[2012-03-07 17:30:00 -0500] gmcinnes: The only way I see to set them is using not_if and only_if gaurds
[2012-03-07 17:31:00 -0500] miah: http://wiki.opscode.com/display/chef/Resources#Resources-Execute
[2012-03-07 17:31:00 -0500] gmcinnes: oh. n/m. mine eyes decieve me
[2012-03-07 17:31:00 -0500] gmcinnes: thx.
[2012-03-07 17:31:00 -0500] miah: environment A hash of environment variables to set before running this command.
[2012-03-07 17:35:00 -0500] miah: sup bemu
[2012-03-07 17:39:00 -0500] dwhsix: hiya - can I enable ssh agent forwarding when using "knife ssh"?
[2012-03-07 17:44:00 -0500] sivy: anyone from opscode around who knows the python resource wel? I need some help with a total mystery. https://gist.github.com/49ac7aea12fa2bb11119
[2012-03-07 17:47:00 -0500] dwhsix: lemme back up on my question:
[2012-03-07 17:47:00 -0500] dwhsix: what I actually want is to access private repo in github during chef-client session
[2012-03-07 17:47:00 -0500] dwhsix: occurred to me agent forwarding would be an easy way to do that
[2012-03-07 17:47:00 -0500] dwhsix: or is there a better apporach?
[2012-03-07 17:49:00 -0500] cwj: dwhsix: i think most people use chef to install an ssh deploy key and an ssh wrapper script which are then used by a chef deploy or deploy_revision resource
[2012-03-07 17:50:00 -0500] jtimberman: proffalken: :D
[2012-03-07 17:50:00 -0500] cwj: dwhsix: e.g. https://gist.github.com/1042972
[2012-03-07 17:51:00 -0500] dwhsix: cwj: thx I seem to recall reading about this approach somewhere
[2012-03-07 17:54:00 -0500] ssd7: sivy: heya
[2012-03-07 17:54:00 -0500] sivy: ssd7: how's your python? :)
[2012-03-07 17:55:00 -0500] sivy: cause python_virtualenv is tripping me out
[2012-03-07 18:01:00 -0500] ssd7: sivy: Heh, pretty rusty.
[2012-03-07 18:02:00 -0500] sivy: ssd7: actually, i's not a python thing at all, but the resource runs and says it worked (no errors) but doesn't create the virtualenv
[2012-03-07 18:02:00 -0500] sivy: I can run it in shef and it works (constructing the identical resource and run_chef'ing it)
[2012-03-07 18:02:00 -0500] sivy: but not in an actual run
[2012-03-07 18:03:00 -0500] sivy: ssd7: see https://gist.github.com/49ac7aea12fa2bb11119
[2012-03-07 18:10:00 -0500] sivy: ssd7: is there a way to get the output of an execute block?
[2012-03-07 18:11:00 -0500] sivy: i'd like to see what the `execute "virtualenv --python=#{@new_resource.interpreter} #{@new_resource.path}" do` section is getting
[2012-03-07 18:12:00 -0500] ssd7: sivy: I believe if you are at the debug log level it should give you any output if there was any
[2012-03-07 18:13:00 -0500] sivy: well, i'm at debug and i don't get it
[2012-03-07 18:13:00 -0500] williamcotton: does anyone have a guide or instructions for using "knife ec2" to spin up just a generic Amazon Linux instance?
[2012-03-07 18:13:00 -0500] sivy: [Wed, 07 Mar 2012 12:32:15 -0500] INFO: Creating virtualenv python_virtualenv[/var/pushcode/pushcode/virtual] at /var/pushcode/pushcode/virtual
[2012-03-07 18:13:00 -0500] ssd7: (for instance, see some of the the other resources above
[2012-03-07 18:13:00 -0500] williamcotton: mine keep failing or not working, but the only blog posts/instructions I can find are pretty outdated
[2012-03-07 18:14:00 -0500] sivy: ssd7: oh, so I should be seeing a "execute[virtualenv --opts]" line in the output
[2012-03-07 18:16:00 -0500] sivy: which i don't. this is so annoying
[2012-03-07 18:20:00 -0500] ssd7: sivy: Could you try removing the "updated_by_last_action" line for a moment to see if the virtualenv is run?
[2012-03-07 18:20:00 -0500] sivy: sure
[2012-03-07 18:22:00 -0500] sivy: running
[2012-03-07 18:23:00 -0500] qhartman: how do I manipulate a node's runlist from within a recipe?
[2012-03-07 18:26:00 -0500] sivy: ssd7: it worked! why?
[2012-03-07 18:27:00 -0500] sivy: interesting
[2012-03-07 18:27:00 -0500] ssd7: I believe it has to do with how we insert resources into the resource collection when they are used inside LWRPs
[2012-03-07 18:27:00 -0500] ssd7: I think the notification is being send before that execute resource fires
[2012-03-07 18:28:00 -0500] sivy: so, bug in the python cookbook? or something else?
[2012-03-07 18:28:00 -0500] sivy: ok, so it worked in shef because it wasn't notifying another resource
[2012-03-07 18:29:00 -0500] sivy: so it had time to create the virtualenv, before the following resource blew up (becuase it was depending on the virtualenv existing)
[2012-03-07 18:29:00 -0500] ssd7: right
[2012-03-07 18:29:00 -0500] sivy: but now, it doesn't notify the next reosurce
[2012-03-07 18:30:00 -0500] sivy: (without that line apparently)
[2012-03-07 18:31:00 -0500] ssd7: sivy: Yeah, most proximately the python cookbook looks like it probably needs to be fixed.  But notifications with LWRPs can be tricky business and we should make them less tricky
[2012-03-07 18:33:00 -0500] sivy: ssd7: not sure how I'd write up a bug, but i'm already in here adding stuff, I can put in a fix if you tell em what needs fixing
[2012-03-07 18:34:00 -0500] qhartman: aha, think I found it, nevermind
[2012-03-07 18:40:00 -0500] williamcotton: is there a way to bootstrap just a standard EC2 Linux AMI, one that is NOT ubuntu? I'm guessing it has something to do with the -d flag, but I can't find any documentation as to what the available distress are to pass in with this -d flag
[2012-03-07 18:42:00 -0500] paulmooring: williamcotton: http://wiki.opscode.com/display/chef/EC2+Bootstrap+Fast+Start+Guide check out that page step 3 has some examples of non-ubuntu bootstrapping
[2012-03-07 18:43:00 -0500] williamcotton: paulmooring: Yeah, I tried all of those and they don't work
[2012-03-07 18:43:00 -0500] paulmooring: but yes, -d is the bootstrap script to use so if you choose a RHEL AMI you would want -d centos5-gems for instance
[2012-03-07 18:43:00 -0500] jdeamattson: williamcotton: What issues are you hitting? What distro are you using in EC2? I worked a large number of issues here.
[2012-03-07 18:44:00 -0500] williamcotton: I'm just using the basic one, the AMI: amzn-ami-2011.09.2.i386-ebs (ami-31814f58)
[2012-03-07 18:45:00 -0500] williamcotton: aka, Basic Amazon Linux AMI 2011.09
[2012-03-07 18:45:00 -0500] sivy: ssd7: thoughts on fix?
[2012-03-07 18:46:00 -0500] williamcotton: here's a gist: https://gist.github.com/1995066
[2012-03-07 18:46:00 -0500] paulmooring: williamcotton: pretty sure that's a RHEL clone, did you already try '-d centos5-gems'?
[2012-03-07 18:46:00 -0500] williamcotton: paulmooring: yeah
[2012-03-07 18:47:00 -0500] paulmooring: yeah just now checking your gist sorry
[2012-03-07 18:47:00 -0500] williamcotton: I'm on Chef 0.10.8
[2012-03-07 18:48:00 -0500] jdeamattson: Ah, you need a bootstrap file for that one. I have one. I will gist it to you.
[2012-03-07 18:48:00 -0500] paulmooring: looks like it's failing to install gems due to a permissions issue, you're also passing '-x ec2-user' have you leaving the user as root?
[2012-03-07 18:49:00 -0500] williamcotton: yeah, that guy is root
[2012-03-07 18:49:00 -0500] jdeamattson: williamcotton: https://gist.github.com/1995080
[2012-03-07 18:49:00 -0500] ssd7: sivy: Well, since the execute resource is pretty basic, I might look into using the shell_out! function directly
[2012-03-07 18:50:00 -0500] ssd7: I don't remember the synax for getting the user and group set off hand however
[2012-03-07 18:50:00 -0500] williamcotton: jdeamattson: thanks, I'll check this out
[2012-03-07 18:50:00 -0500] jdeamattson: Feel free to message about issue you encounter. I had to work through a number if issues when using an Amazon Linux.
[2012-03-07 18:51:00 -0500] williamcotton: jdeamattson: I'm not familiar with knife bootstrap templates and I can't seem to google for the appropriate documentation, can you point me in the right direction?
[2012-03-07 18:52:00 -0500] jdeamattson: williamcotton: Here is an example of the knife command to launch with that bootstrap: https://gist.github.com/1995090
[2012-03-07 18:52:00 -0500] ssd7: I've actually had more success using the fedora bootstrap shipped with Chef for Amazon linux
[2012-03-07 18:53:00 -0500] jdeamattson: ssd7: If you will remember, I went through a lot of pain getting things to work with Amazon Linux.
[2012-03-07 18:53:00 -0500] jdeamattson: ssd7: You were a big help, but it too a long time to get through it.
[2012-03-07 18:53:00 -0500] jdeamattson: williamcotton: I don't remember solid bootstrap template documentation.
[2012-03-07 18:54:00 -0500] jdeamattson: You put the file I gave you in .chef/bootstrap.
[2012-03-07 18:54:00 -0500] sivy: ssd7: ok, i'll take a look
[2012-03-07 18:55:00 -0500] jdeamattson: williamcotton: Does this make sense? Message me directly if you need more guidance and assistance.
[2012-03-07 18:55:00 -0500] williamcotton: thanks, this does make sense, I'm just having some Internet connection issues with github right now :)
[2012-03-07 18:56:00 -0500] jdeamattson: Ok. Ping me if you need more help - williamcotton
[2012-03-07 18:59:00 -0500] rshade98: is the default pathing for cookbooks/cookbook_name/files distro/version, so like centos/6/ etc
[2012-03-07 19:04:00 -0500] rshade98: I got it
[2012-03-07 19:08:00 -0500] Brad_K: if anyone is interested, CentOS 5.8 was just released.  ;-)
[2012-03-07 19:08:00 -0500] chip-: Kinda good timing for me.
[2012-03-07 19:08:00 -0500] Brad_K: the main seeding torrent servers are already peaked at 100Mbps each.
[2012-03-07 19:08:00 -0500] Twirrim: Brad_K: they actually announced it now?
[2012-03-07 19:09:00 -0500] Twirrim: saw the torrent announcements but was waiting for the official release notification :)  Time to update my internal repos.
[2012-03-07 19:10:00 -0500] Brad_K: we're still on centos 5.6, and considering some of the problems i've recently seen that some people have had with 5.7 and 6.2, we'll probably stay there for a while.
[2012-03-07 19:15:00 -0500] Brad_K: so, is anyone around who has prior experience with showoff & sinatra doing talk slides for chef?
[2012-03-07 19:16:00 -0500] sivy: hey folks - is there a way to tell chef to run a resource if a file on disk (not a template) has been updated since last run?
[2012-03-07 19:24:00 -0500] sivy: ssd7: switching in some shellout bits for the execute block seems to have done the trick
[2012-03-07 19:26:00 -0500] judd7: hey folks - Chef::REST.get_rest("/node/mynode") returns ALL the node data.  How can I get just the attributes I want?  It's really slowing things down.
[2012-03-07 19:28:00 -0500] ssd7: judd7: You can't yet, but that feature has been discussed in the past
[2012-03-07 19:28:00 -0500] judd7: oy.
[2012-03-07 19:28:00 -0500] judd7: SO SLOW.
[2012-03-07 19:29:00 -0500] judd7: I've gotta move 22MB over my network to just get at the fqdn of all my servers.
[2012-03-07 19:29:00 -0500] ssd7: judd7: You could try mitigating it a bit by removing ohai plugins that you don't need
[2012-03-07 19:30:00 -0500] judd7: ssd7 - I can't change my infrastructure.
[2012-03-07 19:30:00 -0500] judd7: Isn't anyone mirroring node data into LDAP? :)
[2012-03-07 19:32:00 -0500] judd7: puts rest.get_rest(/nodes/#{key})[:name]   .. too bad you can't puts rest.get_rest(/nodes/#{key}/#{flattened_attribute_space}/"}
[2012-03-07 19:33:00 -0500] judd7: or do something like LDAP:  ldap://hostname:port@binddn>?<basedn>?<depth>?<query>?<attributes>
[2012-03-07 19:33:00 -0500] bemu: miah: Not too much, load testing fun with jmeter!
[2012-03-07 19:39:00 -0500] sivy: some days I wish that every template resource got `variables node.to_hash` by default
[2012-03-07 19:41:00 -0500] gmcinnes: is there any shortcut for templating a whole directory?
[2012-03-07 19:43:00 -0500] bemu: sivy: Why do you prefer that over the node object?
[2012-03-07 19:44:00 -0500] sivy: bemu: *does* it have access to the node object if you don't pass it in variables?
[2012-03-07 19:44:00 -0500] bemu: Yessir.
[2012-03-07 19:44:00 -0500] sivy: well then, i'm an idiot.
[2012-03-07 19:46:00 -0500] bemu: It is really nice, but can be confusing. A lot of people do far too much processing/logic around the node object in their templates, which isn't obvious by simply looking at the recipe. Sometimes I wonder if templates would be better used acting as the 'view' in traditional MVC approach, whereas the recipes would be controllers, and the attributes/databags/tags are models.
[2012-03-07 19:50:00 -0500] bemu: Anyone know if the collectd cookbook from Coderanger (updated a year ago) has been forked/improved upon?
[2012-03-07 19:50:00 -0500] coderanger: bemu: I split it into its own repo and I think fujin has some patches to submit
[2012-03-07 19:50:00 -0500] bemu: Google turned up one gist: https://gist.github.com/1043452
[2012-03-07 19:51:00 -0500] fujin: we've added a bunch of plugins but i have to go throuhg and sell pull rqs
[2012-03-07 19:51:00 -0500] bemu: Oh, there are also the librato and formspring forks.
[2012-03-07 19:52:00 -0500] coderanger: bemu: Make it awesome and send me pull reqs :D
[2012-03-07 19:53:00 -0500] bemu: Thanks guys! I'll get back to you.
[2012-03-07 19:55:00 -0500] bemu: Would like to move all of our system metrics from ganglia to collectd/graphite. The only plugins I really need, to start, is the redis one.
[2012-03-07 19:56:00 -0500] bemu: Any idea what the reqs are for ~300 nodes, 10s resolution?
[2012-03-07 19:56:00 -0500] bemu: m1.large, maybe?
[2012-03-07 19:57:00 -0500] Brad_K: jtimberman?
[2012-03-07 19:57:00 -0500] bawt: jtimberman is an Opscode employee, likes cookbooks and Chef training, and long walks on the beach.
[2012-03-07 19:58:00 -0500] bemu: and glowering after excessive amounts of liquor. :D
[2012-03-07 19:58:00 -0500] asg: bemu: FWIW, I have a Dell 2950 that collectd's 15k metrics every 10s and isn't too overloaded. rrcached is recommended though
[2012-03-07 19:58:00 -0500] bemu: Thanks.
[2012-03-07 19:59:00 -0500] gmcinnes: a drunk man's glower's are a sober man's barely suppressed rage :)
[2012-03-07 19:59:00 -0500] Brad_K: he's glowering?  i didn't even know he was pregnant!  ;-)
[2012-03-07 20:00:00 -0500] asg: Brad_K: a lot of cheap lager will make you feel a little bloated
[2012-03-07 20:01:00 -0500] corp: anyone had issues with rabbitmq hanging on startup using the standard init script? on debian squeeze
[2012-03-07 20:01:00 -0500] jtimberman: bemu: i've used the mvc analogy in talks
[2012-03-07 20:01:00 -0500] jtimberman: resonates well
[2012-03-07 20:02:00 -0500] jtimberman: but we don't do it strictly in our own cookbooks across the board.
[2012-03-07 20:02:00 -0500] rshade98: bemu, you will need a good size box with a lot of collectd plugins and 10s res
[2012-03-07 20:03:00 -0500] bemu: Thanks!
[2012-03-07 20:03:00 -0500] rshade98: bemu do you have multiple boxes you could split that on, say 100 per m1.large
[2012-03-07 20:04:00 -0500] bemu: Of course.
[2012-03-07 20:04:00 -0500] bemu: I could also use larger instances.
[2012-03-07 20:06:00 -0500] fujin:  or just don't use rrd lol
[2012-03-07 20:06:00 -0500] rshade98: You run into disk performance mainly
[2012-03-07 20:06:00 -0500] rshade98: not cpu, larger instances don't really help
[2012-03-07 20:07:00 -0500] fujin: use collectd carbon and go into whisperdb
[2012-03-07 20:07:00 -0500] rshade98: also rrcached helps
[2012-03-07 20:07:00 -0500] bemu: fujin: That's the plan.
[2012-03-07 20:08:00 -0500] fujin: rrd is miserable hehe
[2012-03-07 20:08:00 -0500] bemu: can also raid some ebs volumes if needed.
[2012-03-07 20:10:00 -0500] Brad_K: jtimberman: i don't suppose you can give me some advice on debugging showoff/sinatra problems when developing slides for a chef talk?
[2012-03-07 20:11:00 -0500] AntonZ: does anyone here use RDS with VPC?
[2012-03-07 20:12:00 -0500] gmcinnes: would the real Bryan McLellan please reveal himself?
[2012-03-07 20:12:00 -0500] bemu: btm ^
[2012-03-07 20:29:00 -0500] btm: gmcinnes: Hi
[2012-03-07 20:29:00 -0500] gmcinnes: hey btm.
[2012-03-07 20:30:00 -0500] Brad_K: okay, gotta dash.  bblt.
[2012-03-07 20:30:00 -0500] gmcinnes: I thought I had a chef-client process wedged for me to investigate, but I'm not sure now.
[2012-03-07 20:31:00 -0500] gmcinnes: btm: yeah. its not wedged. Just has a broken run list.
[2012-03-07 20:32:00 -0500] gmcinnes: btm: I'll try your iptables idea. I doubt I'll be able to re-trigger it tho.
[2012-03-07 20:38:00 -0500] btm: gmcinnes: alright. its okay if you can't, we will leave the ticket open for the next person who its it.
[2012-03-07 20:42:00 -0500] gmcinnes: btm: it smells to me like a rubybug
[2012-03-07 20:51:00 -0500] gmcinnes: so I'm trying to write a recipe for a crappy app that has about 100 config files. I want to deploy them via the template resource. Do I really have to list them all?
[2012-03-07 20:52:00 -0500] bencaron: gmcinnes: you could use Dir and loop through them programmatically
[2012-03-07 20:52:00 -0500] gmcinnes: Is that expected to work? I"m not having success with it.
[2012-03-07 20:53:00 -0500] bencaron: I guess the challenge is to find the right dir to loop though
[2012-03-07 20:53:00 -0500] gmcinnes: If you think it should work, I"m assuming the issue I'm having has to do with pathnames etc on the target node.
[2012-03-07 20:53:00 -0500] bencaron: exact
[2012-03-07 20:53:00 -0500] bencaron: safe way is probably to use __FILE__ as base name and go relative from there
[2012-03-07 20:55:00 -0500] gmcinnes: that's what I'm doing. But the templates file doesn't exist per se on the target node.
[2012-03-07 20:56:00 -0500] gmcinnes: I mean I know it's hiding out in /var/cache somewhere, but it doesn't seem right to be reaching in there at runtime.
[2012-03-07 20:57:00 -0500] asg: gmcinnes: any reason your aren't wrapping the template resource in a %w{ }.each block that contains each path/file you want to manage?
[2012-03-07 20:58:00 -0500] bencaron: asg is right: cleaner that way. Maybe define the list in an attribute?
[2012-03-07 20:58:00 -0500] gmcinnes: asg: just cause there are so many of them.
[2012-03-07 20:59:00 -0500] asg: gmcinnes: well a simple find(1) + tr(1) should allow you to generate the list easily
[2012-03-07 20:59:00 -0500] asg: gmcinnes: unless they are all over the place
[2012-03-07 21:00:00 -0500] gmcinnes: basically it's a java  app that's packaged the whole world with its distribution (/apache /postgres /voldemort /zookeeper blah blah)
[2012-03-07 21:01:00 -0500] asg: gmcinnes: but under a single root directory?
[2012-03-07 21:02:00 -0500] gmcinnes: yeah. its easy enough to stick them in by "hand". Was just looking for a more elegant solution.
[2012-03-07 21:24:00 -0500] corp: anyone using runit on debian squeeze?
[2012-03-07 21:27:00 -0500] wilton: Question regarding data bags and environments. (Read http://wiki.opscode.com/display/chef/Environments#Environments-DataBagsandEnvironments, but still have some questions) Do you recommend using a data bag named "Environments" then have multiple items per environments (dev.json, qa.json, etc..) OR have data bag per environment and keep items pertaining to the environment (such as sites.json, passwords.json, etc) OR as recommended on the wiki have an it
[2012-03-07 21:27:00 -0500] wilton: em with each environment having its own hash within the item.
[2012-03-07 21:27:00 -0500] wilton: I guess there is no wrong way here. Just want to know what is best practice from experiences.
[2012-03-07 21:36:00 -0500] hippiehacker: if chef searches work, but are slow, is there a way to add indexes or something to speed it up?
[2012-03-07 22:01:00 -0500] hasrb: Just wanted to clarify a typical workflow for deploying changes to an app... You have your main repository which you deploy with Capistrano/Vlad, etc. and then you have another repo that just has your configuration in it and chef server takes care of updating as needed, correct?
[2012-03-07 22:02:00 -0500] hasrb: What about sharing configuration from your app and your chef setup repo?
[2012-03-07 22:05:00 -0500] hippiehacker: if I want to save an attribute to the node during a chef-run (say versions of currently deployed software, versus desired versions), how would a set/save those attributes so they part of the node
[2012-03-07 22:05:00 -0500] fujin: hippiehacker: node.default.foo.bar.baz = 'bong'; node.save
[2012-03-07 22:05:00 -0500] fujin: makes node.foo.bar.baz
[2012-03-07 22:06:00 -0500] fujin: default precedence
[2012-03-07 22:06:00 -0500] fujin: you can node.override.foo.bar.baz
[2012-03-07 22:07:00 -0500] hippiehacker: fujin: thanks
[2012-03-07 22:07:00 -0500] fujin:  i think there is node.set.foo.bar.baz too which is normal precedence
[2012-03-07 22:23:00 -0500] maek: is there a character limit for the value of a node attribute?
[2012-03-07 22:40:00 -0500] TheBeast: is there a bootstrap template for omnibus besides this: https://raw.github.com/opscode/chef/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-03-07 22:40:00 -0500] TheBeast: it seems to be working but I thought there might be an updated/more recent version of it
[2012-03-07 22:40:00 -0500] TheBeast: woops nvm
[2012-03-07 22:46:00 -0500] gmcinnes: can anyone help me with this: http://pastie.org/3544560
[2012-03-07 22:46:00 -0500] gmcinnes: I have a service that I've marked as "supports :status => false"
[2012-03-07 22:47:00 -0500] gmcinnes: But at the chef client run I see it telling me that the service "supports status"
[2012-03-07 22:52:00 -0500] gmcinnes: n/m. end of day idiocy strikes again.
[2012-03-07 23:05:00 -0500] williamcotton: I've got an ubuntu machine running 10.04, and I'm trying to bootstrap it, and this is the result: any thoughts
[2012-03-07 23:06:00 -0500] williamcotton: er
[2012-03-07 23:06:00 -0500] williamcotton: haha
[2012-03-07 23:06:00 -0500] williamcotton: https://gist.github.com/1997006
[2012-03-07 23:06:00 -0500] williamcotton: I'm getting these weird permission issues
[2012-03-07 23:06:00 -0500] williamcotton: when I manually ssh in to the machine, the user is indeed a sudoer
[2012-03-07 23:08:00 -0500] gmcinnes: try passing sudo after ubunut
[2012-03-07 23:08:00 -0500] gmcinnes: that's 2 dashes.
[2012-03-07 23:09:00 -0500] williamcotton: ahah!
[2012-03-07 23:09:00 -0500] williamcotton: that's the ticket, thanks!
[2012-03-07 23:11:00 -0500] gmcinnes: arrhg. bashing my head against the punk rock with this supports status thing.  How can I can convince a service resource that the service doesn't support 'status'
[2012-03-07 23:13:00 -0500] gmcinnes: in theory, I'd think it should be just: "supports :status => false" but it doesn't seem to work.
[2012-03-07 23:18:00 -0500] josephholsten: I'd like users::sysadmins to accept a home directory override from the user's databag
[2012-03-07 23:18:00 -0500] josephholsten: anyone got a reason that's a bad idea?
[2012-03-07 23:29:00 -0500] williamcotton: gmcinnes: so 'knife bootstrap' has the sudo flag, but 'knife ec2 server create' doesn't 'knife ec2 server create' has yet to work for me, but since trying out knife bootstrap, it has worked just fine with the addition of the --sudo flag any thoughts?
[2012-03-07 23:30:00 -0500] gmcinnes: not really. I've never used the ec2 stuff.
[2012-03-07 23:30:00 -0500] gmcinnes: Let me take a look.
[2012-03-07 23:31:00 -0500] tpot:         bootstrap.config[:use_sudo] = true unless config[:ssh_user] == 'root'
[2012-03-07 23:31:00 -0500] tpot: from lib/chef/knife/ec2_server_create.rb
[2012-03-07 23:31:00 -0500] tpot: so it should work automagically
[2012-03-07 23:31:00 -0500] williamcotton: it's been stalling for me
[2012-03-07 23:32:00 -0500] tpot: i remember doing knife ec2 server creates and having it work
[2012-03-07 23:32:00 -0500] williamcotton: like, it gets to that "waiting for ssh" and it just sits there
[2012-03-07 23:32:00 -0500] tpot: but couldn't really remember how (-:
[2012-03-07 23:32:00 -0500] williamcotton: I let it sit there for an hour
[2012-03-07 23:32:00 -0500] tpot: at that stage i usually kill it and try another instasnce
[2012-03-07 23:32:00 -0500] tpot: sometimes they hang
[2012-03-07 23:33:00 -0500] williamcotton: I can't have been getting unlucky for 2 days straight :)
[2012-03-07 23:33:00 -0500] tpot: yeah that doesn't sound right
[2012-03-07 23:33:00 -0500] tpot: maybe a problem with your security groups?
[2012-03-07 23:33:00 -0500] tpot: can you ping or ssh into the instance by hand after it's been created?
[2012-03-07 23:33:00 -0500] williamcotton: yeah
[2012-03-07 23:34:00 -0500] williamcotton: I can ssh in fine
[2012-03-07 23:34:00 -0500] cwj: are you specifying the ssh key and username to use as part of your 'knife ec2 server create' command?
[2012-03-07 23:35:00 -0500] williamcotton: yeah
[2012-03-07 23:35:00 -0500] juanje: ohai chefs :-)
[2012-03-07 23:35:00 -0500] williamcotton: I've got my identity file specified in my knife.rb
[2012-03-07 23:35:00 -0500] juanje: does anyone know hot to tell to the application's cookbook to use Subversion instead of Git for the deploy_revision?
[2012-03-07 23:35:00 -0500] juanje: I tried adding this to the data_bag: "provider"  : "Chef::Provider::Subversion"
[2012-03-07 23:36:00 -0500] juanje: but nothing
[2012-03-07 23:37:00 -0500] andreacampi: juanje: nope, can't specify that in the data bag
[2012-03-07 23:37:00 -0500] andreacampi: juanje: you need to patch the recipe
[2012-03-07 23:38:00 -0500] juanje: andreacampi: I tried to do it in the databag, but it didn't work
[2012-03-07 23:38:00 -0500] andreacampi: indeed
[2012-03-07 23:38:00 -0500] juanje: andreacampi: yeah, I thought so... but I wanted to do it more data driven and don't touch the cookbook
[2012-03-07 23:38:00 -0500] andreacampi: yeah
[2012-03-07 23:39:00 -0500] juanje: andreacampi: thanks for the confirmation anyway :-)
[2012-03-07 23:39:00 -0500] andreacampi: the application cookbook sort of specializes in generating extreme amounts of frustration ;)
[2012-03-07 23:39:00 -0500] juanje: hehehe
[2012-03-07 23:39:00 -0500] andreacampi: to be fair--it's a complex topic, and everybody wants it to do something different
[2012-03-07 23:40:00 -0500] juanje: I think I'm gonna fill a ticket and send a pull-request to support that...
[2012-03-07 23:40:00 -0500] juanje: andreacampi: that's true.. it's hard to please to everyone
[2012-03-07 23:40:00 -0500] andreacampi: eh
[2012-03-07 23:41:00 -0500] andreacampi: the application cookbook is due for a complete overhaul
[2012-03-07 23:41:00 -0500] andreacampi: real soon now (tm)
[2012-03-07 23:41:00 -0500] andreacampi: so I doubt the pull request will get very far--but you can try
[2012-03-07 23:42:00 -0500] juanje: andreacampi: what do u mean by complete overhaul? they are gonna rewrite it or something?
[2012-03-07 23:42:00 -0500] josephholsten: andreacampi: jtimberman says really really soon. But if we don't see progress by next wednesday, let's get moving on it
[2012-03-07 23:42:00 -0500] juanje: ummm
[2012-03-07 23:43:00 -0500] josephholsten: juanje: it's got serious issues. and we have a bunch of long standing tickets. and many many branches with spikes at fixing it
[2012-03-07 23:43:00 -0500] andreacampi: juanje: code ranger's cookbook is really nice, and sounds like the best alternative
[2012-03-07 23:43:00 -0500] andreacampi: I had my own fork with an LWRP, which I submitted but just today I tried coderanger's one, and it's *sweet*
[2012-03-07 23:43:00 -0500] juanje: andreacampi: hummm... interesting... Thanks :-)
[2012-03-07 23:43:00 -0500] coderanger: :-)
[2012-03-07 23:43:00 -0500] andreacampi: does away with the data bag at all
[2012-03-07 23:44:00 -0500] andreacampi: coderanger oh, hey :)
[2012-03-07 23:44:00 -0500] josephholsten: I'll look, I've been maintaining a fork for our nginx apps
[2012-03-07 23:44:00 -0500] jtimberman: andreacampi: ohai!
[2012-03-07 23:44:00 -0500] jtimberman: josephholsten: there's a lot of work already done by coderanger.
[2012-03-07 23:44:00 -0500] jtimberman: josephholsten: under cook-634
[2012-03-07 23:44:00 -0500] andreacampi: jtimberman hi there!
[2012-03-07 23:44:00 -0500] jtimberman: andreacampi: also, i put a comment on cook-1084
[2012-03-07 23:45:00 -0500] sebastianedwards: Where does the deploy resource look for the file you specify in ssh_wrapper?
[2012-03-07 23:45:00 -0500] andreacampi: jtimberman: another one? :D
[2012-03-07 23:45:00 -0500] jtimberman: happy to grab that freebsd cookbook, just want ot make sure its going to be the right branch
[2012-03-07 23:45:00 -0500] andreacampi: oh, no, I replied get both, in the right order
[2012-03-07 23:45:00 -0500] andreacampi: meanwhile I'm updating the apache2 README as you suggested
[2012-03-07 23:47:00 -0500] jtimberman: andreacampi: ah, great. thanks!
[2012-03-07 23:47:00 -0500] josephholsten: jtimberman: is data bag backward compatibility a concern for app v.next?
[2012-03-07 23:49:00 -0500] kolektiv: hi all, got a quick newbie question...
[2012-03-07 23:49:00 -0500] gmcinnes: So, support for the 'status' command is hard coded into the Init::Redhat service provider
[2012-03-07 23:49:00 -0500] jtimberman: josephholsten: compatibility with our "fast start" guides
[2012-03-07 23:49:00 -0500] kolektiv: i'm following the guide to install chef server using ubuntu packages
[2012-03-07 23:49:00 -0500] gmcinnes: But I have a broken app that doesn't answer 'status' properly.
[2012-03-07 23:50:00 -0500] gmcinnes: Is it right that it's hardcoded?
[2012-03-07 23:50:00 -0500] kolektiv: if i set up a new user (bob, in the example) what if i want my workstation user to also be "bob"?
[2012-03-07 23:50:00 -0500] josephholsten: jtimberman: so if I work on testing fast start guide compatibility, and improving readmes, is there anything else that'll need to be done to code ranger's branch?
[2012-03-07 23:51:00 -0500] kolektiv: (sorry if i've not explained that well)
[2012-03-07 23:55:00 -0500] jtimberman: there's a few things
[2012-03-07 23:56:00 -0500] josephholsten: gmcinnes: are you saying it doesn't respect service "app" do; supports :status => false; end ?
[2012-03-07 23:56:00 -0500] jtimberman: josephholsten: Create sub-cookbook and LWRPs for PHP, Create sub-cookbook and LWRPs for Tomcat/Java, Update the documentation (README, examples) in all the affected cookbooks, Determine what updates, if any, are required in the database cookbook, Determine whether outstanding application COOK tickets are applicable, Merge and release new cookbooks, ensure dependencies are correct
[2012-03-07 23:57:00 -0500] gmcinnes: josephholsten: correct
[2012-03-07 23:57:00 -0500] gmcinnes: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/service/redhat.rb#L34
[2012-03-07 23:58:00 -0500] josephholsten: jtimberman: well I've got to get wordpress, run deck, and some rack apps up under nginx. I'll give it a try refactoring to that to smoke test it.
[2012-03-07 23:59:00 -0500] josephholsten: gmcinnes: this you? http://tickets.opscode.com/browse/CHEF-2345
[2012-03-07 23:59:00 -0500] gmcinnes: no

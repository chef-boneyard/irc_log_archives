[2012-03-20 07:31:00 -0400] josephholsten: anyone know if there's a 'port mysql to windows' ticket open already?
[2012-03-20 07:58:00 -0400] josephholsten: any windows lovers: please try my port of mysql http://tickets.opscode.com/browse/COOK-1121
[2012-03-20 08:00:00 -0400] HwyMan: is there a way to force unicorn under the application cookbook to run something else than ruby1.8
[2012-03-20 08:01:00 -0400] josephholsten: HwyMan: I assume your system ruby is 1.8Z
[2012-03-20 08:01:00 -0400] josephholsten: s/Z/?/
[2012-03-20 08:01:00 -0400] HwyMan: yeah
[2012-03-20 08:01:00 -0400] HwyMan: and I've force 1.9.1 to be installed, and set new symlinks
[2012-03-20 08:02:00 -0400] josephholsten: the opscode cookbooks don't explicitly support rvm, rbenv, &c
[2012-03-20 08:02:00 -0400] josephholsten: you'll need to do some hacking methinks
[2012-03-20 08:02:00 -0400] HwyMan: hrm
[2012-03-20 08:03:00 -0400] josephholsten: I forget, how does it run the unicorn service?
[2012-03-20 08:03:00 -0400] maus: Hi. I've intalled chef-1.8 on Ubuntu Lucid server from opscode repository. Now chef-client gets started on a regular basis. How best to prevent it from auto starting?
[2012-03-20 08:04:00 -0400] josephholsten: HwyMan: I've just been using passenger, which supports rvm on its own
[2012-03-20 08:04:00 -0400] josephholsten: maus: stop the service: `service chef-client stop`
[2012-03-20 08:05:00 -0400] josephholsten: you'll probably want to take it out of your init run levels as well
[2012-03-20 08:05:00 -0400] HwyMan: it runs it with runit
[2012-03-20 08:06:00 -0400] josephholsten: HwyMan: Looks like you should be able to hack some path info into application/templates/default/sv-unicorn-run.jrb
[2012-03-20 08:06:00 -0400] josephholsten: I'm not that up on runit, I've mostly used upstart+monit
[2012-03-20 08:07:00 -0400] josephholsten: but most init replacements require you to explicitly set your path
[2012-03-20 08:07:00 -0400] HwyMan: yeah, it seems problematic
[2012-03-20 08:08:00 -0400] maus: josephholsten, I killed it in the past it resurrected somehow. Was it upstart's job?
[2012-03-20 08:08:00 -0400] josephholsten: yeah, just `kill`ing will only annoy upstart
[2012-03-20 08:09:00 -0400] maus: good to know :)
[2012-03-20 08:10:00 -0400] josephholsten: HwyMan: looks like runit's chpst has a useful -e option: http://smarden.org/runit/chpst.8.html
[2012-03-20 08:11:00 -0400] josephholsten: looks like that's a clone of djb's daemontools envdir: http://cr.yp.to/daemontools/envdir.html
[2012-03-20 08:12:00 -0400] josephholsten: you should know, I've never ever ran an unmodified application cookbook in production
[2012-03-20 08:12:00 -0400] josephholsten: always had to tweak something
[2012-03-20 08:13:00 -0400] josephholsten: good luck, I've got to go
[2012-03-20 09:47:00 -0400] Focus_: Hi
[2012-03-20 09:50:00 -0400] Focus_: I have 2 roles 1 for a webserver and the other for a cache. The cache must point at the webserver ip. How can i do this automatically ? (i bootstrap with knife ec2)
[2012-03-20 09:50:00 -0400] Focus_: I can't overwrite the attribute in the role as i don't know the ip that the web will take when it will boot
[2012-03-20 09:52:00 -0400] proffalken: Focus_: in the recipe for the cache server, search for the webserver and use the IP address that is returned by the search:
[2012-03-20 09:53:00 -0400] proffalken: webservers = search(:node, "role:webserver")
[2012-03-20 09:53:00 -0400] proffalken: node['default']['webserver_ip'] = webservers['ipaddress']
[2012-03-20 09:53:00 -0400] proffalken: (you'll need to check the syntax and experiment, but the above should get you going)
[2012-03-20 09:54:00 -0400] proffalken: I'm using the same approach for Bacula at the moment, all the clients search() for the director and the director search() for storage daemons
[2012-03-20 09:54:00 -0400] proffalken: configs are automatically created based on the search results
[2012-03-20 09:59:00 -0400] Focus_: Ok thanks
[2012-03-20 10:09:00 -0400] roidrage: going to do my first experiments with search, this should be fun
[2012-03-20 10:31:00 -0400] proffalken: roidrage: it's awesome :)
[2012-03-20 10:38:00 -0400] BryanWB: proffalken: you're a convert!
[2012-03-20 10:39:00 -0400] proffalken: BryanWB: nope, I'm a versatile consultant who can now use both Puppet *and* Chef... ;)
[2012-03-20 10:39:00 -0400] proffalken: (but yeah, I'm loving Chef....)
[2012-03-20 10:39:00 -0400] BryanWB: proffalken: versatile is good ;) we can leave religion to churches
[2012-03-20 10:39:00 -0400] proffalken: BryanWB: Amen to that... :P
[2012-03-20 10:41:00 -0400] proffalken: Does anyone know if there is an MCollective plugin that utilises Chef's search to act on nodes?
[2012-03-20 10:42:00 -0400] proffalken: I love knife for interacting with the API, but I'd far rather use Message Queuing+Restricted clients to execute routine tasks on nodes instead of SSH
[2012-03-20 10:47:00 -0400] BryanWB: proffalken: iirc ranjib dey has been doing that
[2012-03-20 10:47:00 -0400] proffalken: BryanWB: hmmm, ok, cool, I'll see if I can track him down
[2012-03-20 10:47:00 -0400] proffalken: thanks
[2012-03-20 10:48:00 -0400] BryanWB: he is pretty responsive
[2012-03-20 10:48:00 -0400] BryanWB: doesn't sleep much
[2012-03-20 10:48:00 -0400] proffalken: lol
[2012-03-20 10:49:00 -0400] proffalken: thanks
[2012-03-20 10:49:00 -0400] BryanWB: proffalken: i am also interested in that but don't have a serious need for it
[2012-03-20 10:59:00 -0400] zts: proffalken: do you mean getting mcollective to do a Chef search to build a list of nodes (discovery), then act on them over the normal channel?
[2012-03-20 10:59:00 -0400] proffalken: zts: yup
[2012-03-20 11:00:00 -0400] zts: proffalken: I haven't seen one, but that's a neat idea.  We're still on 1.2 at work, or I'd give it a go myself
[2012-03-20 11:02:00 -0400] zts: though to be fair, simply writing out facts from Chef has been good enough for us (using mc's traditional discovery mechanism)
[2012-03-20 11:06:00 -0400] maus: I'm trying to create a template resource inside a ruby block resource. Unfortunately, after calling run_action method I get the following error: http://pastebin.com/Qad1s8mk
[2012-03-20 11:07:00 -0400] maus: looks like I can't properly setup a RunContext instance.
[2012-03-20 11:24:00 -0400] gurrie: Hi, can anyone tell me whether its possible to split providers into separate files based on platform?
[2012-03-20 11:36:00 -0400] BryanWB: gurrie:
[2012-03-20 11:36:00 -0400] BryanWB: yes
[2012-03-20 11:37:00 -0400] BryanWB: gurrie: check this from the firewall cookbook https://github.com/opscode/cookbooks/blob/master/firewall/resources/default.rb#L31  you could easily put a case statement in that method
[2012-03-20 11:44:00 -0400] gurrie: Great thanks for the help. So Chef itself doesn't do anything clever (i.e. lookup the provider by appending the platform name for e.g. to the provider name)
[2012-03-20 11:45:00 -0400] BryanWB: gurrie: afaik
[2012-03-20 11:47:00 -0400] gurrie: Ok thanks
[2012-03-20 12:02:00 -0400] gurrie: Does anyone have any experience deploying environments with Chef across Linux and Windows? I am trying to use the windows LWRP to install applications to windows 7 (I need the zipfile functionality), however when I point chef on linux to my cookbooks folder I get an error stating that there is no such file win32/open3 to load which makes sense. Any ideas how to get around this so that I can use
[2012-03-20 12:02:00 -0400] gurrie: the same cook books directory across platforms (fyi I am using chef-solo)
[2012-03-20 12:04:00 -0400] gurrie: Just to clarify I am trying to install ant for example which comes in a zip file so all I want to be able to do is unzip it on the target system.
[2012-03-20 12:05:00 -0400] BryanWB: gurrie: ahem, u should look at my ark cookbook
[2012-03-20 12:05:00 -0400] BryanWB: but I am doing everything w/ libraries rather than LWRP, because i need the flexibility https://github.com/bryanwb/cookbooks/tree/ark_oo/ark/libraries
[2012-03-20 12:06:00 -0400] BryanWB: i will never add windows support myself cuz i hate windows but i certainly would accept code that adds the necessary bits
[2012-03-20 12:06:00 -0400] BryanWB: gurrie: i built ark for installing java-related stuff
[2012-03-20 12:07:00 -0400] BryanWB: i use it for ivy, maven, tomcat, jboss
[2012-03-20 12:07:00 -0400] zts: gurrie: if you're using chef-solo, you'll probably need to keep the platform-specific cookbooks in separate folders
[2012-03-20 12:09:00 -0400] gurrie: Thanks for the advice, I will take a look at the code mentioned too
[2012-03-20 12:10:00 -0400] zts: gurrie: note that the "cookbook_path" in your solo.rb can be an array of paths, so you could still share everything between platforms (but config chef-solo to look at only the right ones for each)
[2012-03-20 12:12:00 -0400] gurrie: thanks zts, what do you mean by 'config chef-solo' to look at only the right ones...?
[2012-03-20 12:13:00 -0400] meineerde: gurrie: see also http://tickets.opscode.com/browse/COOK-1033
[2012-03-20 12:13:00 -0400] zts: gurrie: say, have two cookbooks folders, "cookbooks" and "cookbooks-win32".  On your Windows nodes, set cookbook_path to ["\Path\To\cookbooks", "\Path\To\cookbooks-win32"], on the Linux nodes, leave off cookbooks-win32
[2012-03-20 12:14:00 -0400] zts: meineerde: ooh, that's a much better answer
[2012-03-20 12:15:00 -0400] zts: gurrie: ignore me, and look at patching the windows cookbook per meineerde's link :)
[2012-03-20 12:15:00 -0400] BryanWB: meineerde: ouch!
[2012-03-20 12:17:00 -0400] gurrie: ok thanks I will take a look the link. Thanks for all the help guys
[2012-03-20 12:17:00 -0400] meineerde: BryanWB: zts: yeah... and it seems to be an issue since some rather long time. some shellout rewrite that wasn't fully finished but deemed "good enough"
[2012-03-20 12:27:00 -0400] j-v-e: 'morning eveyrone
[2012-03-20 12:28:00 -0400] j-v-e: I have a recipe question: in a recipe, I call a service restart. Does the service block need to be at the top of my recipe, instead of at the bottom ?
[2012-03-20 12:28:00 -0400] j-v-e: My guess is that it doesn't matter, but I'd like an expert confirmation :)
[2012-03-20 12:30:00 -0400] zts: j-v-e: if you are "notifying" the service resource to restart, and you're using the "new style" notification syntax, it shouldn't matter where it's defined
[2012-03-20 12:30:00 -0400] j-v-e: yes I'm using 'notifies :restart, "service[ossec-server]"'
[2012-03-20 12:31:00 -0400] j-v-e: and further down I have 'service "ossec-server" do, ...'
[2012-03-20 12:31:00 -0400] proffalken: I'm having issues with MetaChef - anyone know who best to speak to?
[2012-03-20 12:31:00 -0400] zts: j-v-e: cool, then yeah - the order won't matter, it'll still get restarted at the right time
[2012-03-20 12:31:00 -0400] j-v-e: zts: thanks for confirming that :) our "chef expert" here was being very anal about it :p
[2012-03-20 12:31:00 -0400] BryanWB: proffalken: there is a mailing lsit
[2012-03-20 12:32:00 -0400] gurrie: Hi meineerde, sorry for asking a stupid question but what is the best way to apply your change to the windows cookbook?
[2012-03-20 12:32:00 -0400] proffalken: BryanWB: meh, ok, I'll try it, I was hoping there might be a #channel
[2012-03-20 12:32:00 -0400] proffalken: thanks
[2012-03-20 12:32:00 -0400] zts: j-v-e: it used to be a bigger deal, see "0.9.8 and previous" on this page: http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2012-03-20 12:32:00 -0400] BryanWB: proffalken: nope
[2012-03-20 12:32:00 -0400] zts: j-v-e: now Chef doesn't care, so it's really down to what you think is more clear :)
[2012-03-20 12:34:00 -0400] meineerde: gurrie: fork the whole repo on github and apply the patch
[2012-03-20 12:34:00 -0400] meineerde: gurrie: iirc the opscode guys are worting on splitting the large repo into individual ones for each cookbook
[2012-03-20 12:35:00 -0400] j-v-e: zts: yeah it makes sense to make it independent of the position in the recipe. But even thought, if that was broken I would have seen it before.
[2012-03-20 12:35:00 -0400] gurrie:  ok great thats for the advice
[2012-03-20 12:35:00 -0400] gurrie: sorry one more thing, for the opscode repo or your repo?
[2012-03-20 12:36:00 -0400] meineerde: gurrie: I'd use the opscode repo because I merge changes very rarely.
[2012-03-20 12:36:00 -0400] gurrie: ok great thanks again
[2012-03-20 13:02:00 -0400] gurrie: hi, I was wondering what the best practice is for writing cookbooks that install various applications. i.e. if I need to install java, ant and eclipse for e.g. should I have 3 different cookbooks, or one with 3 recipes?
[2012-03-20 13:03:00 -0400] gwaldo: have three separate cookbooks, with require statements for the dependancies
[2012-03-20 13:04:00 -0400] gwaldo: I meant *include* statements
[2012-03-20 13:04:00 -0400] gwaldo: so you have a Java cookbook.  recipe: java::default
[2012-03-20 13:05:00 -0400] gwaldo: in your eclipse::default, you would have a line at the top that reads "include_recipe "java::default"
[2012-03-20 13:05:00 -0400] gwaldo: (actually, you can leave off the "::default"; it's habit of mine)
[2012-03-20 13:06:00 -0400] gurrie: thanks, thats what I was thinking. My next question is, if I have to unzip files across linux and windows I obviously don't want to create 3 providers which do the unzipping. One approach is to create a new cookbook i.e. a file provider with an unzip action which uses a pure ruby implementation?
[2012-03-20 13:06:00 -0400] gurrie: Or is there a better way?
[2012-03-20 13:12:00 -0400] gwaldo: This I do not know off the top of my head.  At worst you will have to do OS detection and base the method off of the detection
[2012-03-20 13:14:00 -0400] gurrie: ok great thanks for the help
[2012-03-20 13:20:00 -0400] NewToChef: If I am using encrypted data bags, how should I get the secret key to the node I am bootstrapping?
[2012-03-20 13:31:00 -0400] proffalken: meh, looks like my metachef issue is because I'm on CentOS and running Ruby 1.8...
[2012-03-20 13:31:00 -0400] proffalken: one more reason to upgrade to Ubuntu server...
[2012-03-20 13:35:00 -0400] nphase: anyone here have a web frontend to knife?
[2012-03-20 13:35:00 -0400] proffalken: nphase: isn't that the chef dashboard?
[2012-03-20 13:35:00 -0400] nphase: proffalken: can you launch ec2 nodes from it?
[2012-03-20 13:36:00 -0400] proffalken: ah, ok, then no :)
[2012-03-20 13:37:00 -0400] nphase: i want to integrate knife with our internal dashboard, but knife generally takes .. well, minutes or more to launch
[2012-03-20 13:38:00 -0400] nphase: when launching on ec2. was just wondering how others have handled that
[2012-03-20 13:38:00 -0400] proffalken: nphase: AFAICT, not even the hosted chef allows you to launch cloud instances
[2012-03-20 13:38:00 -0400] nphase: right, which is why we just use knife with the ec2 plugin
[2012-03-20 13:39:00 -0400] proffalken: nphase: can you not just write something for your dashboard that hands-off to knife and polls a message queu for the result?
[2012-03-20 13:39:00 -0400] proffalken: or better yet just talk to the EC2 API direct from the dash?
[2012-03-20 13:39:00 -0400] nphase: probably
[2012-03-20 13:39:00 -0400] nphase: thats long running as well
[2012-03-20 13:43:00 -0400] proffalken: meh, write a small script that runs under supervisord or similar, listeing to a message queue
[2012-03-20 13:43:00 -0400] proffalken: when someone clicks "launch", just send a message to the queeu and let the script take care of it
[2012-03-20 13:44:00 -0400] proffalken: monitor the queue fro the response and display it on the dash
[2012-03-20 13:45:00 -0400] proffalken: see http://www.devco.net/archives/2011/12/11/common-messaging-patterns-using-stomp.php for a good guide on message queuing etc. if you're not familiar with it
[2012-03-20 13:45:00 -0400] nphase: i'm incredibly familiar with it, we use rabbitmq in production across two datacenters
[2012-03-20 13:46:00 -0400] nphase: i was just hoping that someone already had something built we could take advantage of
[2012-03-20 13:47:00 -0400] proffalken: heh, don't know, sorry
[2012-03-20 13:57:00 -0400] proffalken: ok, so knife bootstrap on one of my nodes wants to use the old download path for EPEL
[2012-03-20 13:57:00 -0400] proffalken: is there any what to override this?
[2012-03-20 13:58:00 -0400] miketheman: is the move from gh/opscode/cookbooks to gh/opscode-cookbooks/ done? sohuld we be making forks/pull requests against the new one?
[2012-03-20 13:59:00 -0400] mattray: miketheman: jtimberman is supposed to be blogging about it soon, but the short answer is "yes"
[2012-03-20 13:59:00 -0400] miketheman: mattray: awesome. what will happen to oipen pull requests to the old repo? will they be closed/merged and merged into the new ones?
[2012-03-20 14:00:00 -0400] gaffneyc: Over the weekend our main chef-server started failing with couchdb errors along the lines of "os_process_error". Been trying to debug in couchdb but it refuses to run any views
[2012-03-20 14:00:00 -0400] gaffneyc: Anyone run into this before? I've been trying to fix it for the last two days
[2012-03-20 14:02:00 -0400] laurent\: gaffneyc: been encountering this http://wiki.opscode.com/display/chef/CouchDB+Administration+for+Chef+Server?focusedCommentId=23429596#comment-23429596
[2012-03-20 14:03:00 -0400] laurent\: so it started with the os_process_error, i had to export, upgrade couchdb (making sure not to use a too recent libmozjs) and import again
[2012-03-20 14:04:00 -0400] gaffneyc: I've tried the upgrade from 0.10.0 to 1.0.1 (couldn't find 10.04 builds of couchdb)
[2012-03-20 14:05:00 -0400] gaffneyc: I'll have to give 1.1.1 a try
[2012-03-20 14:05:00 -0400] mattray: miketheman: jtimberman said he'd address each one before closing them out. In the blog post too I expect
[2012-03-20 14:06:00 -0400] gaffneyc: laurent: Thanks, looks like I'll try building 1.1.1 from source.
[2012-03-20 14:06:00 -0400] miketheman: mattray: thanks!
[2012-03-20 14:08:00 -0400] gaffneyc: After dealing with couchdb I'm looking forward to the migration to mysql.
[2012-03-20 14:17:00 -0400] nico: heya chefs
[2012-03-20 14:17:00 -0400] nico: http://pastie.org/3635010 may interest some people around
[2012-03-20 14:18:00 -0400] nico: to test/upload cookbooks from vim
[2012-03-20 14:19:00 -0400] BryanWB: vim! blasphemy!
[2012-03-20 14:20:00 -0400] proffalken: BryanWB: I think just about the only thing that currently qualifies me to talk on foodfight is that I use VIM not EMACS... :P
[2012-03-20 14:21:00 -0400] BryanWB: proffalken: you can talk about beer!
[2012-03-20 14:21:00 -0400] gurrie: hi, when creating LWRP providers what is the current_resource variable supposed to be initialised to? I understand that it should represent the current state of the resource being configured but is it just a hash or is it an actual resource object?
[2012-03-20 14:21:00 -0400] proffalken: hmmm, vim and beer... sounds like a good combination...
[2012-03-20 14:21:00 -0400] proffalken: :LD
[2012-03-20 14:23:00 -0400] laurent\: i use vim to edit my .emacs config file :)
[2012-03-20 14:23:00 -0400] nico: you all be sinners
[2012-03-20 14:23:00 -0400] proffalken: nico: you use sed right?
[2012-03-20 14:23:00 -0400] proffalken: :P
[2012-03-20 14:24:00 -0400] nico: proffalken: when emacs users use awk ?
[2012-03-20 14:24:00 -0400] proffalken: lol
[2012-03-20 14:24:00 -0400] proffalken: nico: or do you just interface direct to the server? :P
[2012-03-20 14:24:00 -0400] proffalken: and "think" your code onto the screen?
[2012-03-20 14:24:00 -0400] nico: I use ed
[2012-03-20 14:25:00 -0400] nico: (joking, but my ex boss used it)
[2012-03-20 14:26:00 -0400] Anand: hi
[2012-03-20 14:27:00 -0400] bkocik: I agree with whomever said that emacs is a pretty good operating system, but it needs a decent text editor.
[2012-03-20 14:28:00 -0400] Anand: i have created an instance on EC2 using knife but when instance is at bootstraping stage of chef it is asking for ssh password
[2012-03-20 14:28:00 -0400] BryanWB: i concur it is a shitty text editor but damn what a great OS!
[2012-03-20 14:29:00 -0400] proffalken: Anand: use knife bootstrap <ip> -i /path/to/your/aws.pem
[2012-03-20 14:29:00 -0400] Anand: ok
[2012-03-20 14:29:00 -0400] Anand: let me try
[2012-03-20 14:29:00 -0400] proffalken: (you might need to add -x <username> as well)
[2012-03-20 14:33:00 -0400] Anand: greate
[2012-03-20 14:33:00 -0400] Anand: works well
[2012-03-20 14:33:00 -0400] Anand: but there is an error of permission denied..
[2012-03-20 14:33:00 -0400] Anand: the stack is:
[2012-03-20 14:33:00 -0400] Anand: 79.125.59.138 mkdir: cannot create directory `/etc/chef': Permission denied
[2012-03-20 14:33:00 -0400] Anand: 79.125.59.138 bash: line 50: /etc/chef/validation.pem: No such file or directory
[2012-03-20 14:33:00 -0400] Anand: 79.125.59.138 bash: line 63: /etc/chef/client.rb: No such file or directory
[2012-03-20 14:33:00 -0400] Anand: 79.125.59.138 bash: line 69: /etc/chef/first-boot.json: No such file or director
[2012-03-20 14:33:00 -0400] Anand: y
[2012-03-20 14:33:00 -0400] Anand: 79.125.59.138 bash: line 71: /usr/bin/chef-client: No such file or directory
[2012-03-20 14:33:00 -0400] proffalken: bugger
[2012-03-20 14:33:00 -0400] proffalken: sorry, my fault
[2012-03-20 14:34:00 -0400] proffalken: knife bootstrap <ip> -x <user> -i /path/to/aws.pem --sudo
[2012-03-20 14:35:00 -0400] Anand: proffalken: greate its working
[2012-03-20 14:35:00 -0400] Anand: thanks
[2012-03-20 14:35:00 -0400] Anand: :-)
[2012-03-20 14:36:00 -0400] proffalken: Anand: np
[2012-03-20 14:42:00 -0400] David_Miller: can someone point me to the docs that describe resource dependencies, (file change prompts service restart, stuff like that)
[2012-03-20 14:42:00 -0400] David_Miller: I am coming from the puppet world
[2012-03-20 14:44:00 -0400] flashmanbahadur: David_Miller: hey, check out http://wiki.opscode.com/display/chef/Resources#Resources-Template
[2012-03-20 14:44:00 -0400] flashmanbahadur: that is the template resource
[2012-03-20 14:44:00 -0400] flashmanbahadur: which tempaltes a file (obviously)
[2012-03-20 14:44:00 -0400] flashmanbahadur: also, if you start at the top
[2012-03-20 14:44:00 -0400] flashmanbahadur: it goes over some high level attributes
[2012-03-20 14:44:00 -0400] flashmanbahadur: like :notifies
[2012-03-20 14:44:00 -0400] flashmanbahadur: which causes some action if a certain block runs
[2012-03-20 14:45:00 -0400] NewToChef: How does one get the secret key over to a node during bootstrap? My cookbook uses an encrypted data bag and I am bootstrapping an EC2 instance.
[2012-03-20 14:45:00 -0400] David_Miller: flashmanbahadur: thanks alot!
[2012-03-20 14:46:00 -0400] flashmanbahadur: NewToChef: normally the knife-ec2 plugin does this for me, but I believe that it just scp's over the validation file to register itself
[2012-03-20 14:47:00 -0400] NewToChef: flashmanbahadur: Didn't do it for me. Does it have to be in a specific directory on my workstation? Do I need to provide a switch to knife specifying where to get the secret key from?
[2012-03-20 14:47:00 -0400] flashmanbahadur: NewToChef: when I use knife, I psecify my knife.rb file which has info on where to find those files
[2012-03-20 14:47:00 -0400] NewToChef: Ok, checking now.
[2012-03-20 14:48:00 -0400] flashmanbahadur: usually it looks in .chef/ ~/.chef and /etc/chef I believe
[2012-03-20 14:48:00 -0400] flashmanbahadur: although you can override those
[2012-03-20 14:49:00 -0400] NewToChef: I know /etc/chef is where it copies the secret key to on the target machine.
[2012-03-20 14:49:00 -0400] flashmanbahadur: correct
[2012-03-20 14:51:00 -0400] proffalken: NewToChef: check out http://wiki.opscode.com/display/chef/Knife+Bootstrap - it's got a bit on how to configure encrypted db files over during a bootstrap
[2012-03-20 15:01:00 -0400] bencaron: trying to knife cookbook site install elasticsearch_cluster : anyone know what the "tuning" cookbook is?
[2012-03-20 15:02:00 -0400] bencaron: the install borks because it's missing, can't find it on community
[2012-03-20 15:04:00 -0400] pcn: bencaron it's probably the infochimps tuning cookbook.
[2012-03-20 15:05:00 -0400] pcn: Are you installing with ironfan?
[2012-03-20 15:05:00 -0400] BryanWB: fuckin' love those infochimps
[2012-03-20 15:06:00 -0400] bencaron: pcn: ok, so I better check with their github stuff
[2012-03-20 15:06:00 -0400] pcn: https://github.com/infochimps-labs/ironfan-pantry/tree/master/cookbooks/tuning
[2012-03-20 15:06:00 -0400] bencaron: they do have an account?
[2012-03-20 15:07:00 -0400] bencaron: great, thx!
[2012-03-20 15:07:00 -0400] pcn: You will probably have to satisfy a bunch of other dependencies.  I'm only starting to move from cluster_chef to ironfan, you probably want to check out their ironfan-homebase setup and see if it works for you.
[2012-03-20 15:08:00 -0400] bencaron: ok, thx for the tips
[2012-03-20 15:08:00 -0400] bencaron: did I get it right that in the comunity cookbook index, there is 2 version of the same thing
[2012-03-20 15:08:00 -0400] pcn: bencaron one more thing.  In your role or cluster definition's role, you probably want to just use the "sysadmin" set of tuning stuff
[2012-03-20 15:09:00 -0400] bencaron: sysadmin? Like the groups from user ckbook?
[2012-03-20 15:09:00 -0400] pcn: Otherwise the tuning cookbook installs a lot of things, some of which (fully RoR stack of some kind) will break with segfaults while building when the wind is blowing the right way
[2012-03-20 15:09:00 -0400] bencaron: k.
[2012-03-20 15:09:00 -0400] pcn:       facet_role do
[2012-03-20 15:09:00 -0400] pcn:         override_attributes({ :package_set => ["sysadmin"],
[2012-03-20 15:10:00 -0400] bencaron: looks like it's a lot more stuff than I thought !
[2012-03-20 15:10:00 -0400] pcn: I think that hits the tuning cookbook.
[2012-03-20 15:10:00 -0400] pcn: Err... maybe that's package_set, though, when I look at it.  Ignore me if you don't need this.
[2012-03-20 15:10:00 -0400] bencaron: I don't see any reference for now :|
[2012-03-20 15:11:00 -0400] bencaron: must be something else, there is only some VM settings in the cookbook
[2012-03-20 15:11:00 -0400] bencaron: anyway, must be somewhere in the deps chain
[2012-03-20 15:12:00 -0400] bencaron: hum, does all this still make sense if not installed in AWS?
[2012-03-20 15:12:00 -0400] pcn: OK, sorry.  The tuning cookbook doesn't pull in the extra package, it's package-set (as you see in my cut-n-paste)
[2012-03-20 15:12:00 -0400] bencaron: k, make sense
[2012-03-20 15:13:00 -0400] bencaron: infochimps ironfan looks really nice
[2012-03-20 15:13:00 -0400] BryanWB: da chimpz rock da codez
[2012-03-20 15:13:00 -0400] pcn: Yeah, really good stuff.  Mostly very readable code.
[2012-03-20 15:14:00 -0400] bencaron: now, you guys just ruined my day, i'll spend it reading code now instead of going in my todo list :P
[2012-03-20 15:21:00 -0400] BryanWB: hey rubyists, anyone know how to remove a method from a subclass w/out removing it from its parent?
[2012-03-20 15:22:00 -0400] BryanWB: undef removes from the parent class as well
[2012-03-20 15:24:00 -0400] bkocik: Shot in the dark: What if you redefined it to call missing_method?
[2012-03-20 15:24:00 -0400] bkocik: Or method_missing or whatever the hell it is.
[2012-03-20 15:24:00 -0400] BryanWB: i want it to throw error if called
[2012-03-20 15:25:00 -0400] bkocik: Well if the method weren't defined in the class method_missing would be what happened next, wouldn't it? And then it would go to the parent's version?
[2012-03-20 15:26:00 -0400] BryanWB: bkocik: hmm, still haven't gotten my head around method_missing?
[2012-03-20 15:26:00 -0400] tomoj: undef seems to work for me
[2012-03-20 15:27:00 -0400] pcn: bryanwb, why not monkeypatch it to have the method itself raise an error?
[2012-03-20 15:27:00 -0400] pcn: e.g. def foo do raise FooErrrorrrrr
[2012-03-20 15:27:00 -0400] bkocik: BryanWB: Now that I think of it, I'm not sure if it calls method_missing before it goes hunting up the chain or after.
[2012-03-20 15:27:00 -0400] BryanWB: pcn: yeah, guess i will do that
[2012-03-20 15:27:00 -0400] maus: Can one define resources inside a ruby block resource?
[2012-03-20 15:27:00 -0400] BryanWB: bkocik: i think hunts up chain beofre method_missiing
[2012-03-20 15:27:00 -0400] BryanWB: maus: yes
[2012-03-20 15:27:00 -0400] jtimberman: https://twitter.com/opscode/status/182125965764345856
[2012-03-20 15:28:00 -0400] BryanWB: jtimberman: rock!
[2012-03-20 15:29:00 -0400] tomoj: BryanWB: https://gist.github.com/938d7eb9de480b0d4d24 did I misunderstand?
[2012-03-20 15:29:00 -0400] BryanWB: bravo!
[2012-03-20 15:29:00 -0400] maus: BryanWB, I did this for file, but my approach doesn't seem to work for templates, please take a look: http://pastebin.com/Qad1s8mk
[2012-03-20 15:30:00 -0400] BryanWB: tomoj: u understand correctly, i am just screwing something up
[2012-03-20 15:30:00 -0400] BryanWB: tomoj: tks for working on it
[2012-03-20 15:31:00 -0400] miketheman: opschef people: re:jira there's a missing component for the munin cookbook
[2012-03-20 15:31:00 -0400] miketheman: scratch that
[2012-03-20 15:32:00 -0400] miketheman: there is, just because there's no current issues it does'nt display in the list. :)
[2012-03-20 15:32:00 -0400] BryanWB: maus: weird, looks correct ot me
[2012-03-20 15:32:00 -0400] flu-: Excuse me gentlemen, I've got a role that takes for-freakin-ever to complete a chef-client run. Taking a look at the '-l debug' output, I've found that it hits our chef server with a node search over and over (for probably a solid 10 minutes) before moving on
[2012-03-20 15:32:00 -0400] nico: BryanWB: I second the undef method. works here too
[2012-03-20 15:33:00 -0400] flu-: short of brute forcing (test one constituent at a time), how can I determine what recipe is causing this behavior?
[2012-03-20 15:33:00 -0400] nico: flu-: slow search or repetitive search ?
[2012-03-20 15:33:00 -0400] maus: BryanWB, looks like the cookbook variable of provider instance is nil
[2012-03-20 15:34:00 -0400] flu-: nico: Repetitive
[2012-03-20 15:34:00 -0400] flu-: nico: A new one every 5 to 7 seconds
[2012-03-20 15:34:00 -0400] maus: BryanWB, maybe I need to set it somehow?
[2012-03-20 15:34:00 -0400] flu-: nico: I can't tell what the params are from the output though :(
[2012-03-20 15:35:00 -0400] nico: do you know which cookbook makes a search in your run_list ?
[2012-03-20 15:35:00 -0400] nico: jtimberman: thought of you when I made my vim+chef thingie ;)
[2012-03-20 15:35:00 -0400] BryanWB: tomoj: tks tomoj
[2012-03-20 15:36:00 -0400] BryanWB: tomoj: nico, problem was that i called it inside my initialize method
[2012-03-20 15:36:00 -0400] nico: BryanWB: ho
[2012-03-20 15:36:00 -0400] flu-: nico: Example search output, this is repeated with the hashes all changing -> http://pastebin.com/j1Ds0LVS
[2012-03-20 15:37:00 -0400] flu-: nico: That was sort of my question, whether I could determine that from the output or additional debugging flags without testing the recipes used one at a time :)
[2012-03-20 15:37:00 -0400] nico: flu-: this paste is unusable
[2012-03-20 15:37:00 -0400] flu-: nico: That's the search that gets repeated over and over
[2012-03-20 15:38:00 -0400] flu-: and I know it has nothing helpful in it, haha. "-l debug" fail
[2012-03-20 15:38:00 -0400] nico: flu-: show your node + the output info mode first
[2012-03-20 15:39:00 -0400] flu-: nico: Are there any other files I can look into for helpful output? My test-loop is pretty lengthy at the moment
[2012-03-20 15:40:00 -0400] nico: give the output of "knife node show <yournode>" + the log generated by "chef-client" on this node first
[2012-03-20 15:42:00 -0400] flu-: nico: Hrm... yeah I can't. It's secret sauce unfortunately. Thanks for the assist though!
[2012-03-20 15:43:00 -0400] mjreed: Aren't attribute declarations in cookbook metadata.rb files passe?
[2012-03-20 15:50:00 -0400] dyer: Question, with remote_file should the file be downloaded if the checksum matches?
[2012-03-20 15:50:00 -0400] timsmith: isn't the remote file downloaded and then the checksum validated
[2012-03-20 15:51:00 -0400] timsmith: it's all client side
[2012-03-20 16:02:00 -0400] dyer: I would think ( hope ) it checked the sha256 of the local file based on the checksum in the resource and then downloaded
[2012-03-20 16:02:00 -0400] dyer: can anyone confirm that?
[2012-03-20 16:02:00 -0400] BryanWB: dyer: that's how it works for me
[2012-03-20 16:06:00 -0400] dyer: so just to confirm before I get drill down into "logging hell". It should check the local artifact checksum from a previous run against the remote_file resource and then make the determination on whether it needs to download
[2012-03-20 16:06:00 -0400] dyer: correct?
[2012-03-20 16:06:00 -0400] BryanWB: dyer: correct
[2012-03-20 16:07:00 -0400] mjreed: @dyer: if you specify the checksum in the resource, then yes.
[2012-03-20 16:07:00 -0400] dyer: ok
[2012-03-20 16:07:00 -0400] dyer: thats what I thought, just wanted a sanity check
[2012-03-20 16:07:00 -0400] dyer: appreciate it guys !
[2012-03-20 16:13:00 -0400] yatesy: from what i've seen (perhaps it was just me) it downloads the file every time, compares the checksum and if it matches just deletes the file, otherwise it "installs" it into the place you specified
[2012-03-20 16:15:00 -0400] ashb: yatesy: i think the only time i had that happen was when i used an md5sum instead of sha256 as it's meant to be
[2012-03-20 16:15:00 -0400] ashb: but i haven't been paying attention to it
[2012-03-20 16:15:00 -0400] yatesy: maybe that was it, i can't remember what cookbook i saw that behaviour in
[2012-03-20 16:46:00 -0400] cgibbons: i have a search/attribute question. I have a recipe that issues a search to find another node with a role, etc. once it does, it pulls off an attribute from that node to use configuration information from that node (in this case, a port # definition). i'm finding that if the attribute is a default one from a recipe, and not set on that node, that this doesn't work. is that expected?
[2012-03-20 16:47:00 -0400] hoover_damm: dyer, fwiw without a checksum or a not_if remote_file will always download the file
[2012-03-20 16:47:00 -0400] hoover_damm: based on previous experiences
[2012-03-20 16:47:00 -0400] hoover_damm: dyer, so if your getting abused by remote_file spam... try and add not_if's or a checksum ... it really can't check a checksum though without downloading the file
[2012-03-20 16:47:00 -0400] hoover_damm: soo
[2012-03-20 16:47:00 -0400] hoover_damm: :)
[2012-03-20 16:47:00 -0400] hoover_damm: hth
[2012-03-20 16:48:00 -0400] dyer: how can it not check the checksum w/o downloading it ?
[2012-03-20 16:48:00 -0400] dyer: that would only be true the first time
[2012-03-20 16:48:00 -0400] dyer: no?
[2012-03-20 16:48:00 -0400] hoover_damm: you have to download it to get the checksum
[2012-03-20 16:48:00 -0400] hoover_damm: right
[2012-03-20 16:48:00 -0400] hoover_damm: and it can't say x is different then y without fetching it
[2012-03-20 16:48:00 -0400] hoover_damm: to run sha256sum
[2012-03-20 16:48:00 -0400] dyer: yea, but on the second run it should just compute the local artifact checksum
[2012-03-20 16:48:00 -0400] hoover_damm: not sure if that's true
[2012-03-20 16:49:00 -0400] dyer: but doesn't it keep a copy in Chef::Config[:file_cache_path] ?
[2012-03-20 16:49:00 -0400] hoover_damm: here's a nice rabbits hole for you :)
[2012-03-20 16:50:00 -0400] dyer: for all my build artifacts I compute the checksum when I upload them and put that in an http header
[2012-03-20 16:50:00 -0400] dyer: x-amz-meta-sha256-hash: eec3a9f1c872d816900bbe178805d58cda4d6a2b642f3a1fe02c950a11459325
[2012-03-20 16:50:00 -0400] dyer: then I have a library method in a cookbook that looks for this header
[2012-03-20 16:51:00 -0400] dyer:   checksum Artifacts.get_header(artifact_url) || node[:prism][:artifacts][:checksum]
[2012-03-20 16:51:00 -0400] dyer: That way for my artifacts I don't need to specify the header in the recipe or cookbook, its just the file url
[2012-03-20 16:52:00 -0400] dyer: errr s/header/checksum
[2012-03-20 16:52:00 -0400] dyer: I meant "I don't need to specify the checksum, in the recipe "
[2012-03-20 16:55:00 -0400] alclonky: is there a way to install an RPM which is a cookbook file?
[2012-03-20 16:55:00 -0400] dyer: hoover_damm Were you going to post an example of how this is a rabbit hole, or were you just saying I am already in one ?
[2012-03-20 16:55:00 -0400] dyer: alclonky, you want to include the rpm in the cookbook?
[2012-03-20 16:55:00 -0400] alclonky: yes
[2012-03-20 16:55:00 -0400] dyer: and then install it?
[2012-03-20 16:55:00 -0400] dyer: ok
[2012-03-20 16:56:00 -0400] dyer: just use cookbook_file to put it somewhere, like Chef::Config[:file_cache_path]
[2012-03-20 16:56:00 -0400] dyer: and then run package on it
[2012-03-20 16:56:00 -0400] zoubi: hi guys
[2012-03-20 16:56:00 -0400] dyer: alclonky, make sense?
[2012-03-20 16:56:00 -0400] alclonky: dyer: hoped it could be one step
[2012-03-20 16:56:00 -0400] zoubi: I have a problem, creating an EC2 instance, and have it installed using a recipe
[2012-03-20 16:56:00 -0400] alclonky: so i dont have to delete it
[2012-03-20 16:56:00 -0400] dyer: you would write a definition that did all three steps
[2012-03-20 16:57:00 -0400] zoubi: I have uploaded all my cookbooks on the server, and gave the -r "recipe [xxx:yyy]" argument to knife ec2 server create
[2012-03-20 16:57:00 -0400] alclonky: dyer: i see
[2012-03-20 16:58:00 -0400] zoubi: the instance is created, the bootstrap is run, but in the end, I have INFO: HTTP Request Returned 412 Precondition Failed: {"non_existent_cookbooks":["xxx:yyy"],"cookbooks_with_no_versions":[],"message":"Run list contains invalid items: no such cookbook xxx:yyy."}
[2012-03-20 16:58:00 -0400] zoubi: what should I do?
[2012-03-20 16:59:00 -0400] dyer: do you have a space between recipe and the [
[2012-03-20 16:59:00 -0400] dyer: -r "recipe [xxx:yyy]"
[2012-03-20 16:59:00 -0400] dyer: Looks like there is a space there
[2012-03-20 17:00:00 -0400] hoover_damm: dyer, just that you are in one
[2012-03-20 17:01:00 -0400] dyer: ok, I think I see "the hole" you are talking about, and I think it would only be an issue for the first run
[2012-03-20 17:01:00 -0400] dyer: of course you have to download it to run a checksum
[2012-03-20 17:02:00 -0400] dyer: my concern is that every 20 mins its going to download a 500mb fiel
[2012-03-20 17:02:00 -0400] dyer: s/fiel/file
[2012-03-20 17:04:00 -0400] yatesy: in the end i just changed to the other action so it only tries to download it if it didn't exist previously, that worked for me
[2012-03-20 17:04:00 -0400] yatesy: create_ifnot_exists or whatever it's called
[2012-03-20 17:05:00 -0400] yatesy: create_if_missing that's the one
[2012-03-20 17:05:00 -0400] hoover_damm: it would be better to do not_if { md5sum or fileexists }
[2012-03-20 17:05:00 -0400] hoover_damm: well really md5sum + fileexists
[2012-03-20 17:05:00 -0400] HwyMan: is there a way to bootstrap a server node with ruby1.9.* instead of 1.8?
[2012-03-20 17:05:00 -0400] alclonky: dyer: ok now i copy the rpm, install it, and delete it if installed. but the file with action :delecte gives me a Segmentation fault "/usr/lib/ruby/1.8/fileutils.rb:1062: [BUG] Segmentation fault"
[2012-03-20 17:05:00 -0400] HwyMan: im using ec2
[2012-03-20 17:06:00 -0400] dyer: alclonky, can you show me the recipe?
[2012-03-20 17:07:00 -0400] alclonky: dyer: http://pastebin.com/cS4fdP3w
[2012-03-20 17:10:00 -0400] dyer: odd, is the file actually there?
[2012-03-20 17:13:00 -0400] alclonky: dyer: yes it is there
[2012-03-20 17:13:00 -0400] dyer: are you running chef as root?
[2012-03-20 17:13:00 -0400] alclonky: dyer: yes
[2012-03-20 17:17:00 -0400] dyer: not sure why thats happening, but thinking about this from another angle, do you want to delete the file?  Seems like you should leave it in the cache folder so you can make the recipe idempotent ?
[2012-03-20 17:17:00 -0400] dyer: http://pastebin.com/amLdpRMC
[2012-03-20 17:54:00 -0400] timsmith: is there an option in knife in chef .9 to spit out the human readable format that chef .10 uses by default?
[2012-03-20 18:06:00 -0400] holoway: timsmith: nope
[2012-03-20 18:06:00 -0400] holoway: feature was added in 0.10
[2012-03-20 18:13:00 -0400] kallen: a quick google search and searching chef wiki didn't reveal the answer to me ..
[2012-03-20 18:13:00 -0400] kallen: what is the current status of the omnibus installer? and how can i keep up to date with its progress?
[2012-03-20 18:52:00 -0400] murphy_slaw: is it possible to disable stack traces / dumps from chef-client?
[2012-03-20 18:55:00 -0400] bemu: kallen: I don't know the official status, but we're using omnibus in production with no issues.
[2012-03-20 18:55:00 -0400] kallen: cool. good to know
[2012-03-20 18:55:00 -0400] kallen: we're on 0.10.4 using rpms (centos). i don't want to fall behind. and i don't want to roll my own 0.10.8 rpms
[2012-03-20 18:59:00 -0400] atomic-penguin: kallen, omnibus works for me out of the box for chef-clients.  Had some problems using it on my dev workstation, couldn't get foodcritic gem to work.  We switched our chef-server over to omnibus (need to gem install chef-server), really had no problems with it running the server.
[2012-03-20 19:16:00 -0400] NewToChef: Following the pointers here, I looked at passing the secret key for encrypted data bags via the knife.rb during the bootstrap process. I really don't know which parameters to use for that.
[2012-03-20 19:16:00 -0400] NewToChef: Anyone has experience with doing that?
[2012-03-20 19:18:00 -0400] murphy_slaw: I am having a problem where generating an error stacktrace makes the chef-client process blow up to a truly stupid memory footprint
[2012-03-20 19:18:00 -0400] murphy_slaw: a clean run takes ~200MB
[2012-03-20 19:18:00 -0400] murphy_slaw: a run that generates a trace takes nearly 800MB
[2012-03-20 19:19:00 -0400] murphy_slaw: and on small boxes that is sending them into swap :-
[2012-03-20 19:23:00 -0400] tolland: ok, many chef-clients today didn't run through according to knife status. how did i offend the gods to be punished in such a manner
[2012-03-20 19:23:00 -0400] asg: murphy_slaw: You can configure some ohai plugins to not be used and reduce the footprint. Let me see if I can find the link.
[2012-03-20 19:23:00 -0400] murphy_slaw: asg: it seems like the backtrace generation is the culprit here
[2012-03-20 19:24:00 -0400] asg: murphy_slaw: true but I don't believe there is a way to prevent that offhand. FWIW, here's the link: http://wiki.opscode.com/display/chef/Disabling+Ohai+Plugins
[2012-03-20 19:24:00 -0400] murphy_slaw: k
[2012-03-20 19:25:00 -0400] murphy_slaw: might just set a tight ulimit on the process in production
[2012-03-20 19:26:00 -0400] asg: murphy_slaw: or figure out why you're getting a stacktrace and fix it? :)
[2012-03-20 19:26:00 -0400] murphy_slaw: yeah, that's the ideal situation
[2012-03-20 19:26:00 -0400] murphy_slaw: but if one slips out into production on accident i don't want chef-client sending my boxes deep into swap
[2012-03-20 19:27:00 -0400] asg: murphy_slaw: then the ulimit is a good way to prevent that, as you suggested.
[2012-03-20 19:28:00 -0400] murphy_slaw: i was just really surprised to find that generating a trace is so expensive
[2012-03-20 19:29:00 -0400] asg: murphy_slaw: yeah, ruby isn't exactly lean
[2012-03-20 19:34:00 -0400] NewToChef: Anyone from Opscode know the answer to this: "Is there a way to pass the secret key for an encrypted data bag to a node during bootstrap"? Thanks. :-)
[2012-03-20 19:36:00 -0400] asg: NewToChef: if you are running chef 10.6 or later, http://wiki.opscode.com/display/chef/Encrypted+Data+Bags indicates there is a knife.rb config item that bootstrap should use to place the key on the target.
[2012-03-20 19:41:00 -0400] macros: This is an odd one: ArgumentError: comparison of Chef::Node with Chef::Node failed
[2012-03-20 19:41:00 -0400] macros: Calling sort on a search result
[2012-03-20 19:41:00 -0400] macros: I don't see anything obviously wrong looking at dumps of the node objects
[2012-03-20 19:43:00 -0400] ranjibd: macros, how you want to sort the nodes? may be on node.name?
[2012-03-20 19:43:00 -0400] NewToChef: Thanks asg :-)
[2012-03-20 19:43:00 -0400] asg: NewToChef: you're welcome
[2012-03-20 19:44:00 -0400] macros: Actual sort order doesn't matter, just consistency in ordering between runs
[2012-03-20 19:44:00 -0400] macros: Has been working fine for ages, trying to figure out why it is breaking in this instance
[2012-03-20 19:45:00 -0400] macros: I use that pattern all over without issue, breaking on just two nodes
[2012-03-20 19:46:00 -0400] asg: macros: out of curiosity, are you using ubuntu 10.04 and recently updated the ruby packages?
[2012-03-20 19:46:00 -0400] macros: Freshly installed, fully updated machines, so yes
[2012-03-20 19:46:00 -0400] macros: Should be using omnibus
[2012-03-20 19:47:00 -0400] BryanWB__: ohai chefs!
[2012-03-20 19:47:00 -0400] macros: I'm guessing you're about to make me sad
[2012-03-20 19:47:00 -0400] macros: And fuel my rage at ubuntu devs
[2012-03-20 19:47:00 -0400] asg: macros: I had an issue where I was iterating over IPs and after an update (maybe) the IPs suddenly became mac addresses. I haven't had a chance to debug yet but it sounds like something eerily similar.
[2012-03-20 19:47:00 -0400] macros: Nope, it isn't
[2012-03-20 19:47:00 -0400] macros: System ruby
[2012-03-20 19:52:00 -0400] macros: Hmm, the broken nodes are the ones using the omnibus version
[2012-03-20 19:52:00 -0400] macros: Nodes with system ruby are fine
[2012-03-20 19:55:00 -0400] macros: Going through the omnibus bugs
[2012-03-20 20:07:00 -0400] hippiehacker: http://tickets.opscode.com/browse/CHEF-2991
[2012-03-20 20:07:00 -0400] hippiehacker: windows file-line endings in a template... any thoughts?
[2012-03-20 20:09:00 -0400] atomic-penguin: perl -pe 's!\x0d!!g' -i <file>
[2012-03-20 20:10:00 -0400] atomic-penguin: hippiehacker, I think there is a way to force git to convert it to unix line endings also
[2012-03-20 20:11:00 -0400] atomic-penguin: So when you check it into revision control, it gets converted automatically
[2012-03-20 20:12:00 -0400] hippiehacker: but this is happening because the chef template resource converts it
[2012-03-20 20:12:00 -0400] hippiehacker: the file in the cookbook actually has the correct line endings
[2012-03-20 20:12:00 -0400] hippiehacker: if I use a cookbook_file resource, it works
[2012-03-20 20:12:00 -0400] hippiehacker: but I want to use a template resource so I can modify the contents
[2012-03-20 20:13:00 -0400] hippiehacker: I don't want to install perl just to get the lineendings on 400+ windows boxes 8)
[2012-03-20 20:13:00 -0400] hippiehacker: this happens on the chef-client itself
[2012-03-20 20:14:00 -0400] hippiehacker: the template resource needs a :line_ending attribute 8)
[2012-03-20 20:15:00 -0400] atomic-penguin: hippiehacker, you don't really have to use Perl.  Was just giving that as an example to remove ASCII 0x0D
[2012-03-20 20:15:00 -0400] atomic-penguin: aka carriage return
[2012-03-20 20:16:00 -0400] geekbri: Hey look at that, the cookbooks each have their own github repo now.
[2012-03-20 20:16:00 -0400] hippiehacker: could probably create a LWRP based on template that did some magic
[2012-03-20 20:18:00 -0400] atomic-penguin: hippiehacker, so you want the ability for cookbook_file or tempalte resources to convert to/from Unix/Windows line endings?
[2012-03-20 20:19:00 -0400] hippiehacker: cookbook_file currently does what it should, it just copies the file into place, no changes.
[2012-03-20 20:20:00 -0400] hippiehacker: template resource modifies the file that started with Windows line endings and create a file with Unix line endings
[2012-03-20 20:20:00 -0400] flu-: For anyone following my issue earlier with a chef-client run performing a _TON_ of node searches lasting upwards of 10 minutes, the culprit was the Nagios cookbook which has a block that performs a node search for every role it finds on the chef server, which is a very large number in our environment
[2012-03-20 20:21:00 -0400] atomic-penguin: hippiehacker, when what it should do is preserve the windows line endings, gotcha
[2012-03-20 20:22:00 -0400] hoover_damm: ^^ bemu what flu said
[2012-03-20 20:23:00 -0400] BryanWB__: man, magit ftw
[2012-03-20 20:23:00 -0400] miah: magit?
[2012-03-20 20:23:00 -0400] bawt_: magit is the best
[2012-03-20 20:24:00 -0400] miah: bawt_: your statement lacks substance.
[2012-03-20 20:24:00 -0400] atomic-penguin: bawt forget magit
[2012-03-20 20:24:00 -0400] BryanWB__: vi must have something like it
[2012-03-20 20:24:00 -0400] atomic-penguin: bawt forget magit?
[2012-03-20 20:24:00 -0400] BryanWB__: super quick keystrokes for doing basic git actions
[2012-03-20 20:25:00 -0400] miah: i see
[2012-03-20 20:25:00 -0400] miah: there are similar things in vimland
[2012-03-20 20:25:00 -0400] BryanWB__: must be
[2012-03-20 20:25:00 -0400] BryanWB__: good night! it is snuggle time for me and the mrs.
[2012-03-20 20:25:00 -0400] atomic-penguin: ed is the one true editor ;)
[2012-03-20 20:26:00 -0400] miah: bawt_: g'nite
[2012-03-20 20:26:00 -0400] miah: derp
[2012-03-20 20:26:00 -0400] miah: BryanWB: g'nite
[2012-03-20 20:29:00 -0400] hoover_damm: bawt_, forget magit
[2012-03-20 20:29:00 -0400] bawt_: sure
[2012-03-20 20:47:00 -0400] matschaffer: anyone know of any options for hosted package (yum, deb) repos? I know about gemfury for gems, but haven't seen anything out there for OS packages
[2012-03-20 20:49:00 -0400] bemu: matschaffer: There is very little involved with creating a package repo. Shouldn't take more than an hour to set up yourself.
[2012-03-20 20:49:00 -0400] matschaffer: bemu: I know, I'd just rather not manage it myself
[2012-03-20 20:49:00 -0400] matschaffer: cleaning up assets to avoid full disk, backups, etc etc
[2012-03-20 20:49:00 -0400] bemu: It's basically a simple HTTP server (I use nginx), with some packages and metadata.
[2012-03-20 20:49:00 -0400] bemu: ah.
[2012-03-20 20:49:00 -0400] bemu: I'm not aware of one, no.
[2012-03-20 20:50:00 -0400] matschaffer: guess that's my free business idea for the channel :)
[2012-03-20 20:50:00 -0400] asg: atomic-penguin: from a bot in another channel
[2012-03-20 20:50:00 -0400] asg: 16:49 -!- Irssi: Starting query in freenode with dpkg16:49 <asg> be ed16:49 <dpkg> ?
[2012-03-20 20:50:00 -0400] bemu: flu-: Good to know. Thanks!
[2012-03-20 20:50:00 -0400] bemu: matschaffer: I don't think the economics are there, really. How large is the target market? What can you bill them without making them hate you?
[2012-03-20 20:51:00 -0400] bemu: Sometimes even having an entire market to yourself isn't worth the work.
[2012-03-20 20:51:00 -0400] flu-: bemu: Glad it helped someone else. That was killing my testing cycle
[2012-03-20 20:51:00 -0400] matschaffer: bemu: no idea, but this is my 2nd client that could use one
[2012-03-20 20:53:00 -0400] bemu: My first real startup faced the same problem. It was a wifi or POTs oil-tank gauge to communicate with your oil company. Relatively inexpensive to produce, but still, the entire market base was in the millions, with reasonable competition, and a fragmented customer base (oil companies).
[2012-03-20 20:53:00 -0400] bemu: (I was 19 or so)
[2012-03-20 20:54:00 -0400] bemu: matschaffer: But how many of you are there in the world?
[2012-03-20 20:54:00 -0400] bemu: or, more appropriately, how many of your clients are there?
[2012-03-20 20:55:00 -0400] matschaffer: bemu: yeah, probably not a whole lot
[2012-03-20 20:55:00 -0400] matschaffer: the two that needed it are quite large
[2012-03-20 20:55:00 -0400] Mithrandir: matschaffer: how much would you pay for something like it?  (No, I'm not offering to build it)
[2012-03-20 20:56:00 -0400] bemu: So you can calculate your market cap by estimating that number. It's a good way to rule out lots of project ideas, if you hope to profit from them. :)
[2012-03-20 20:56:00 -0400] bemu: Mithrandir: I'm guessing the most you could possibly ask is $300 or so.
[2012-03-20 20:56:00 -0400] bemu: (per month)
[2012-03-20 20:56:00 -0400] Mithrandir: bemu: that's not terrible money, depending on bandwidth consumed.
[2012-03-20 20:56:00 -0400] bemu: Although you could bill it as a utility and possibly eke more.
[2012-03-20 20:56:00 -0400] Mithrandir: but it's hard to price, I think.
[2012-03-20 20:56:00 -0400] matschaffer: yeah, I was thinking something that would start around $100/mo, maybe up to $300/mo based on usage
[2012-03-20 20:56:00 -0400] bemu: Hard to price, hard to sell, hard to get clients.
[2012-03-20 20:57:00 -0400] Mithrandir: (by bandwidth?  by number of packages?  by uploads?  by a mixture?)
[2012-03-20 20:57:00 -0400] bemu: The next step would be evaluating cost of customer acquisition. How much are ads for these kinds of keywords?
[2012-03-20 20:57:00 -0400] matschaffer: yeah, maybe it's more valuable just to work on open source yum and pkg plugins that can talk to s3
[2012-03-20 20:57:00 -0400] bemu: and do these ads perform?
[2012-03-20 20:57:00 -0400] matschaffer: and use that to garner these automation contracts
[2012-03-20 20:57:00 -0400] bemu: matschaffer: They probably nearly could.
[2012-03-20 20:58:00 -0400] bemu: if they can't already.
[2012-03-20 20:58:00 -0400] matschaffer: there's a half-baked yum version
[2012-03-20 20:58:00 -0400] matschaffer: definitely not plugin-and-play though
[2012-03-20 20:58:00 -0400] matschaffer: didn't google for dpkg
[2012-03-20 20:58:00 -0400] bemu: It's the creation of the packages and metadata which is (ever so) slightly more challenging.
[2012-03-20 20:58:00 -0400] matschaffer: yeah, but not bad
[2012-03-20 20:58:00 -0400] matschaffer: it's the server maintenance that gets me
[2012-03-20 20:59:00 -0400] bemu: That all being said, if you're looking for a small project to bootstrap for a bit of side income this kind of thing could fit the bill :D
[2012-03-20 20:59:00 -0400] matschaffer: the naive approach of just setting up a box with apache will eventually become a headache as the usage grows
[2012-03-20 20:59:00 -0400] bemu: it's just important to look at the economics of any idea like this.
[2012-03-20 20:59:00 -0400] bemu: Yeah, it will.
[2012-03-20 20:59:00 -0400] matschaffer: the first client ended up having to do this elaborate mirroring scheme for partner sites
[2012-03-20 20:59:00 -0400] bemu: I would probably pay for such a service, btw.
[2012-03-20 20:59:00 -0400] bemu: Well, some of my clients would.
[2012-03-20 20:59:00 -0400] bemu: Th
[2012-03-20 20:59:00 -0400] bemu: The major objections would be security, probably.
[2012-03-20 21:00:00 -0400] matschaffer: for sure
[2012-03-20 21:00:00 -0400] bemu: Because in some cases you'd be getting source code with IP attached.
[2012-03-20 21:02:00 -0400] Mithrandir: bemu: one VM per client, NDA with any clients that want it, optional HTTPS+client cert/username+password
[2012-03-20 21:02:00 -0400] matschaffer: bemu: yeah, it's a fair point though. I doubt you could ever retire on it. But could make for some side income.
[2012-03-20 21:03:00 -0400] matschaffer: I think it could be a win if you offered ways to avoid resource contention at deploy time too
[2012-03-20 21:03:00 -0400] Mithrandir: it's pretty automatable, I suspect.
[2012-03-20 21:03:00 -0400] matschaffer: that same client spent a lot of engineer time setting up a bittorrent deploy once they passed 300 nodes or so
[2012-03-20 21:04:00 -0400] Mithrandir: well, HTTP is pretty easy to scale horisontally, so just add more frontends an an LB?
[2012-03-20 21:04:00 -0400] matschaffer: ah well, thanks for the sounding board bemu
[2012-03-20 21:04:00 -0400] Mithrandir: and an
[2012-03-20 21:05:00 -0400] bemu: also, you could expand on the services over time.
[2012-03-20 21:05:00 -0400] bemu: You could eventually offer Pennyworth-based-deploys-as-a-service
[2012-03-20 21:05:00 -0400] bemu: hahah
[2012-03-20 21:06:00 -0400] matschaffer: bemu: Pennyworth? not following
[2012-03-20 21:07:00 -0400] bemu: pennyworth?
[2012-03-20 21:07:00 -0400] bawt_: pennyworth is https://github.com/heavywater/pennyworth or junglist.gen.nz/blog/2011/11/16/pennyworth-quick-start/
[2012-03-20 21:08:00 -0400] matschaffer: ooo, that looks potentially useful
[2012-03-20 21:09:00 -0400] matschaffer: actually, following that. Anyone know how a good way to use fpm from os x? Or is linux a foregone conclusion on that project?
[2012-03-20 21:14:00 -0400] jdeamattson: jtimberman: A cool improvement to log() would be if it would report the file and the line of the log statement.
[2012-03-20 21:15:00 -0400] jdeamattson: jtimberman: For example, if I called log 'site['port'] is nil in app_config.rb at line 48, it would log the following:
[2012-03-20 21:15:00 -0400] jdeamattson: jtimberman: 'app_confiq.rb - 48: site['port'] is nil'
[2012-03-20 21:19:00 -0400] miah: file a feature request?
[2012-03-20 21:24:00 -0400] jtimberman: jdeamattson: log "Yo dawg, site['port'] is #{site['port']} in #{cookbook}::#{recipe}"
[2012-03-20 21:24:00 -0400] jtimberman: the cookbook and recipe methods return the cookbook and recipe of the caller.
[2012-03-20 21:25:00 -0400] jdeamattson: Does it return the line?
[2012-03-20 21:25:00 -0400] jdeamattson: Of the recipe?
[2012-03-20 21:25:00 -0400] jdeamattson: Of course, lots more typing than if log did it automatically.
[2012-03-20 21:27:00 -0400] jtimberman: I'm sorry
[2012-03-20 21:27:00 -0400] jtimberman: its cookbook_name and recipe_name
[2012-03-20 21:27:00 -0400] jdeamattson: jtimberman: Thanks dude! Can I get the line of the recipe?
[2012-03-20 21:28:00 -0400] jtimberman: I think defined_at
[2012-03-20 21:28:00 -0400] jtimberman: but i don't know if it's available in that context
[2012-03-20 21:29:00 -0400] jdeamattson: Interesting. I will log a feature request for this to be added to log. Or is that open source code? Can I contribute to it?
[2012-03-20 21:29:00 -0400] jtimberman: its open source code
[2012-03-20 21:29:00 -0400] jtimberman: contributing?
[2012-03-20 21:29:00 -0400] bawt_: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-03-20 21:31:00 -0400] jhowarth_: I just made a change to an opscode cookbook and followed the guide on how to contribue, but I can't seem to resolve my ticket.  http://tickets.opscode.com/browse/COOK-1125
[2012-03-20 21:31:00 -0400] hoover_damm: jhowarth_, have you signed your cla?
[2012-03-20 21:32:00 -0400] jhowarth_: hoover_damm: I thought I did awhile ago.  Do you know how I can check?
[2012-03-20 21:32:00 -0400] hoover_damm: you can't resolve tickets unless you have signed a cla or your org has signed a ccla
[2012-03-20 21:32:00 -0400] hoover_damm: that's best with opscode usually
[2012-03-20 21:32:00 -0400] jdeamattson: hoover_damm: cla?
[2012-03-20 21:32:00 -0400] jhowarth_: ok thanks I'll oook into it.
[2012-03-20 21:32:00 -0400] hoover_damm: check the link that jtimberman linked (how to contribute)
[2012-03-20 21:33:00 -0400] schism: eta chef-server 0.10.10 ?
[2012-03-20 21:33:00 -0400] jhowarth_: hoover_damm:
[2012-03-20 21:34:00 -0400] jhowarth_: hoover_damm: I don't see that link.
[2012-03-20 21:34:00 -0400] jhowarth_: I might not have been in the channel when it was linked.
[2012-03-20 21:34:00 -0400] hoover_damm: contributing?
[2012-03-20 21:34:00 -0400] bawt_: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-03-20 21:34:00 -0400] hoover_damm: ^^
[2012-03-20 21:34:00 -0400] jhowarth_: Thanks.
[2012-03-20 21:35:00 -0400] joshkraemer: I'm a little new to Chef, but I'm wondering where I can find the source code for Chef providers, specifically Chef::Provider::Service::Init::Debian. I've noticed that service action :enable uses update-rc.d rather than insserv on Debian 6.0
[2012-03-20 21:35:00 -0400] jtimberman: jhowarth_: CLAs get submitted to our legal department who then modify users to be in the jira-developers group
[2012-03-20 21:36:00 -0400] jtimberman: once you're in the jira-developers group you will be able to change ticket state.
[2012-03-20 21:36:00 -0400] jtimberman: jhowarth_: thank you for contribution to Chef :)
[2012-03-20 21:36:00 -0400] jtimberman: joshkraemer: github.com/opscode/chef
[2012-03-20 21:37:00 -0400] jtimberman: the code is in chef/lib/chef/providers/service
[2012-03-20 21:47:00 -0400] joshkraemer: Hmmso it appears insserv does exist in the provider source, but Chef doesn't seem to run it on Debian 6 node by default.
[2012-03-20 21:51:00 -0400] GarlicBelch: hello everyone
[2012-03-20 21:51:00 -0400] GarlicBelch: new to bootstrapping systems on vmware...used to doing it on ec2
[2012-03-20 21:52:00 -0400] GarlicBelch: whats a good way to use knife to bootstrap a system on vmware? knife vsphere?
[2012-03-20 21:53:00 -0400] schism: GarlicBelch: whichever one depends on rbvmomi
[2012-03-20 21:55:00 -0400] jhowarth: On http://wiki.opscode.com/display/chef/Approved+Contributors I am listed as an approved contributor for Riot Games, Inc., but my account does not have approved contributor status, afaik.  Who can I speak with about this?
[2012-03-20 21:55:00 -0400] GarlicBelch: schism: thanks, will check it out. in a quick google, looks like knife-vsphere plugin uses that
[2012-03-20 21:56:00 -0400] tolland: dead yum update seems to cause chef-client to fail, and then the service to stop... is that correct, or is it likely that the same things is causing both?
[2012-03-20 21:56:00 -0400] schism: yep, sounds right, I ended up just using rbvmomi directly
[2012-03-20 21:56:00 -0400] schism: not with knife
[2012-03-20 21:59:00 -0400] kallen: how can i run a knife exec search and have it return only nodes for which both search parameters are true? the following returns *all* nodes:
[2012-03-20 21:59:00 -0400] kallen: knife exec -E 'nodes.search("environment:dev && xenomorph_role:db") { |n| puts n[:hostname] }'
[2012-03-20 22:03:00 -0400] hoover_damm: and?
[2012-03-20 22:03:00 -0400] bawt_: and is usually up to date with the latest features from aws such as dynamo
[2012-03-20 22:06:00 -0400] daharon: Hey guys, I'm in the process of upgrading from 0.9.18 to 0.10.8, and I'm getting a ton of the following error: EOFError - end of file reached
[2012-03-20 22:07:00 -0400] daharon: I get the same error when I try to view a cookbook through the web ui.
[2012-03-20 22:10:00 -0400] bemu: kallen: knife exec -E 'nodes.search("environment:dev AND xenomorph_role:db") { |n| puts n[:hostname] }'
[2012-03-20 22:10:00 -0400] bemu: if that wasn't clear from damm.
[2012-03-20 22:11:00 -0400] kallen: ah. cool. i'll try it
[2012-03-20 22:11:00 -0400] bemu: I think environment needs to be chef_environment, actually.
[2012-03-20 22:11:00 -0400] bemu: I've never tried just environment.
[2012-03-20 22:11:00 -0400] kallen: i didn't see damm's response..
[2012-03-20 22:11:00 -0400] bemu: he said "and?"
[2012-03-20 22:11:00 -0400] bemu: :P
[2012-03-20 22:11:00 -0400] kallen: oh. nice. :>
[2012-03-20 22:12:00 -0400] kallen: i thot it was some other context
[2012-03-20 22:12:00 -0400] bemu: jhowarth: For me, it just took a bit of time. You could probably email / create a ticket to get approved more quickly if it's urgent.
[2012-03-20 22:13:00 -0400] bemu: jhowarth: Btw, Riot Games is awesome. Can't wait for no downtime deploys for League of Legends. :D
[2012-03-20 22:17:00 -0400] josephholsten: ohowdy, folks.
[2012-03-20 22:17:00 -0400] josephholsten: which should I port to windows next: munin client or nagios client?
[2012-03-20 22:20:00 -0400] bemu: Neither? :)
[2012-03-20 22:20:00 -0400] hoover_damm: unless you get paid money for it
[2012-03-20 22:20:00 -0400] hoover_damm: +1
[2012-03-20 22:20:00 -0400] hoover_damm: (neither +1)
[2012-03-20 22:21:00 -0400] bemu: Even then, there are probably better tools for either job.
[2012-03-20 22:21:00 -0400] bkocik: I just spun up Windows 7 in VMWare because I really wanna try out IE9 for some reason.
[2012-03-20 22:22:00 -0400] bendrix: any chef-solo users
[2012-03-20 22:29:00 -0400] bendrix415: fuck3v3ry0n3
[2012-03-20 22:30:00 -0400] josephholsten: bemu, hoover_damm: mind convincing opscode to add your favorites to their supported repo?
[2012-03-20 22:31:00 -0400] josephholsten: and I'd be interested to hear what you like more than nagios
[2012-03-20 22:31:00 -0400] bemu: I can't say for sure, we're still on the nagios juice, but we're checking out Sensu soon, hopefully.
[2012-03-20 22:31:00 -0400] josephholsten: oh, that's what fujin mentioned
[2012-03-20 22:32:00 -0400] josephholsten: honestly, I'd rather just learn my way around the nagios code base and improve it
[2012-03-20 22:32:00 -0400] bemu: Better than Munin, I would say Ganglia is marginally better, but still annoying. We're putting graphite + collectd and statsd into production currently.
[2012-03-20 22:32:00 -0400] bemu: I can get back to you on experiences.
[2012-03-20 22:32:00 -0400] josephholsten: I'm liking ganglia, especially the ideology of the tool
[2012-03-20 22:33:00 -0400] bemu: There are fundamental differences between how Nagios works and how Sensu does. You should scope them both before making that decision. The nagios code base is verrry old, and likely does a lot that you don't need, and doesn't do some things you'd like.
[2012-03-20 22:34:00 -0400] bemu: Ganglia is not bad, but automating it on EC2 / anywhere without multicast is not super simple.
[2012-03-20 22:34:00 -0400] bemu: Especially if your nodes are not persistent.
[2012-03-20 22:34:00 -0400] bendrix415: can I include a role in .json to be run over chef-solo
[2012-03-20 22:34:00 -0400] bemu: bendrix415: Yes.
[2012-03-20 22:35:00 -0400] bendrix415: it it will look to it instead of the cookbook.tar.gz
[2012-03-20 22:36:00 -0400] bemu: I don't know, I don't use chef-solo. Sorry.
[2012-03-20 22:37:00 -0400] bendrix415: im trying to use solo for that matter: chef-solo -c http://repo/solo.rb -j http://repo/base.json -r http://repo/cookbooks.tar.gz
[2012-03-20 22:38:00 -0400] bendrix415: but if the role is ont inside the tarball it errors out and says can't find role
[2012-03-20 22:42:00 -0400] josephholsten: bemu: I know it does a lot I don't need, and lacks many things I want, and does things I do want in a way that doesn't map to the cloud way very well. And it's written in C and perl.
[2012-03-20 22:42:00 -0400] josephholsten: But I didn't get into operations because the tooling is so soft and comfy
[2012-03-20 22:44:00 -0400] bemu: Did you get into it because you didn't want to investigate which options for tools are the best? :)
[2012-03-20 22:46:00 -0400] josephholsten: seriously? I don't run plan 9 in production.
[2012-03-20 22:47:00 -0400] bemu: Give snarkiness, get snarkiness. But seriously, scope out your options before committing. You will save yourself a lot of wasted time.
[2012-03-20 22:49:00 -0400] josephholsten: that's why I'm interested in finding out if its possible to fix nagios. then I could save many, many people's time
[2012-03-20 22:49:00 -0400] josephholsten: I am still playing with sensu, of course
[2012-03-20 22:50:00 -0400] miah: fix nagios? unpossible.
[2012-03-20 22:51:00 -0400] miah: you realize nagios was forked because the author won't take contributions?
[2012-03-20 22:51:00 -0400] jtimberman: solo?
[2012-03-20 22:51:00 -0400] bawt_: solo is http://wiki.opscode.com/display/chef/Chef+Solo
[2012-03-20 22:51:00 -0400] miah: icinga exists to fix that, but still.
[2012-03-20 22:51:00 -0400] jtimberman: oh he left.
[2012-03-20 22:52:00 -0400] shadoi: sadly icinga went in the wrong direction, nagios needs a database and an API, nothing else.
[2012-03-20 22:52:00 -0400] josephholsten: jtimberman: if everyone in this room dislikes munin and nagios so much, why are those the monitoring cookbooks you guys support?
[2012-03-20 22:54:00 -0400] bemu: josephholsten: I'm guessing because those are the ones committed, Sensu is quite new, and Munin has a larger community than alternatives.
[2012-03-20 22:54:00 -0400] miah: bemu is right
[2012-03-20 22:54:00 -0400] miah: nagios and munin are commonly used
[2012-03-20 22:54:00 -0400] miah: and most of us in the community have been working with those pieces of software for years (even if reluctantly because there is nothing better)
[2012-03-20 22:54:00 -0400] miah: then along came sensu and graphite..
[2012-03-20 22:55:00 -0400] bkocik: pfft - when I was your age, we had HP OpenView and ITO. And we were damn glad to have 'em!
[2012-03-20 22:56:00 -0400] josephholsten: last year I still had openview
[2012-03-20 22:56:00 -0400] bkocik: Seriously, I used to write plugins for OpenView when I lived in Silicon Valley. I'm still in therapy.
[2012-03-20 22:56:00 -0400] bkocik: This was circa 2000
[2012-03-20 22:57:00 -0400] shadoi: OpenView will exist as long as there is "Enterprise" software.
[2012-03-20 22:58:00 -0400] jtimberman: josephholsten: thats what we use
[2012-03-20 22:58:00 -0400] jtimberman: we have graphite somewhere too
[2012-03-20 22:58:00 -0400] jtimberman: but i haven't done anything with that in our infra or otherwise, so i don't know about what cookbooks we're using for it.
[2012-03-20 23:42:00 -0400] timsmith: speaking of graphite has anyone managed collectd to send data to graphite instead of RRDs using chef?
[2012-03-20 23:44:00 -0400] miah: yes
[2012-03-20 23:44:00 -0400] timsmith: did you  modify the collectd cookbook to get that functionality?
[2012-03-20 23:44:00 -0400] miah: http://joemiller.me/2011/04/14/collectd-graphite-plugin/
[2012-03-20 23:45:00 -0400] timsmith: nie
[2012-03-20 23:45:00 -0400] timsmith: nice*
[2012-03-20 23:45:00 -0400] timsmith: thanks
[2012-03-20 23:46:00 -0400] timsmith: which of the two graphite cookbooks do you use?
[2012-03-20 23:52:00 -0400] HwyMan: is there a good way to back up the server contents? It's seem that the backup script only grabs parts (excludes enviornments and cookbooks)
[2012-03-20 23:55:00 -0400] hoover_damm: graphite cookbook and collectd
[2012-03-20 23:55:00 -0400] hoover_damm: timsmith, I do
[2012-03-20 23:55:00 -0400] hoover_damm: I wrote a cookbook to do it
[2012-03-20 23:56:00 -0400] hoover_damm: but mine is from collectd master
[2012-03-20 23:56:00 -0400] hoover_damm: his is a patch on collectd, mine is full proper collectd (which supports graphite now)
[2012-03-20 23:56:00 -0400] hoover_damm: it'll be available officially in 5.1

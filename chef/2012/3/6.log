[2012-03-06 09:18:00 -0500] dle: hi, I want use post_rest in order to register a user, I'm doing : body = { :name => "dlle", :admin => true}  r.post_rest("users", body)
[2012-03-06 09:18:00 -0500] dle: but I have a error : INFO: HTTP Request Returned 500 Internal Server Error: undefined method `name' for nil:NilClass
[2012-03-06 09:18:00 -0500] dle: do you know why ?
[2012-03-06 13:20:00 -0500] ciastek: can i set up relationship to do "apt-get update" before any package installation, but only if at least one of packages is going to be installed (is going to change it's state)?
[2012-03-06 13:27:00 -0500] BryanWB: ciastek: yes, u could
[2012-03-06 13:28:00 -0500] Guest45606: Hi, i have a template file for bind zones. I need to write the serial into it. This is a timestamp like 201203061427. How can i write this into the template only when it changes?
[2012-03-06 13:32:00 -0500] ciastek: BryanWB: can you suggest some keyword to help me google into this topic?
[2012-03-06 13:35:00 -0500] sivy: i've got a shell_out in a resource that can take quite a while to process... is there any way to capture the output in real time rather than having it wait until it completes to see what's going on?
[2012-03-06 13:35:00 -0500] jinnko: Guest45606: perhaps you could do a notifies trigger in the zone template that increments a value, that you then update into your zone file?  you'd have to avoid a race condition though
[2012-03-06 13:39:00 -0500] Guest45606: jinko: ok and where can i save this value?
[2012-03-06 13:40:00 -0500] Guest45606: junko: if i use a notify, will the vlaue be incremented before or after the temaplet is updated?
[2012-03-06 13:43:00 -0500] jespada: ciastek, take a look  https://github.com/opscode/cookbooks/tree/master/apt and also http://wiki.opscode.com/display/chef/Resources
[2012-03-06 13:44:00 -0500] jespada: I think you could play with ruby blocks and notifies :run, resources(:execute => "apt-get update"), :immediately
[2012-03-06 13:45:00 -0500] ciastek: jespada: looks like apt receipt takes care of fresh apt database by default
[2012-03-06 13:45:00 -0500] ciastek: thank you :)
[2012-03-06 13:47:00 -0500] jespada: yup.. but I wasn't sure what your case was.. maybe you want to deploy an app from a newly uploaded  package from your debian repo.. and since apt runs once a day by default in that cookbook , if i recall correctly
[2012-03-06 13:47:00 -0500] jespada: you will not see it
[2012-03-06 13:48:00 -0500] jespada: hence the suggestion :execute => "apt-get update"), :immediately
[2012-03-06 13:50:00 -0500] ciastek: jespada: thanks again :)
[2012-03-06 13:50:00 -0500] jespada: ciastek, yw
[2012-03-06 13:54:00 -0500] Guest45606: hi, i want to execute this in my template "Time.new.strftime("%Y%m%d%H%M")" only if the template changes. So i dont taht the template changes everytime because this would change it
[2012-03-06 13:55:00 -0500] Guest45606: how can i do that?
[2012-03-06 14:08:00 -0500] BryanWB: nacer so u don't have to stick the mysql.jar in ur cookbook
[2012-03-06 14:09:00 -0500] nacer: BryanWB: it's a question ?
[2012-03-06 14:10:00 -0500] BryanWB: nacer: per twitter
[2012-03-06 14:10:00 -0500] BryanWB: u said on twitter u put mysql.jar inside your cookbook
[2012-03-06 14:10:00 -0500] nacer: BryanWB: yep a i do
[2012-03-06 14:11:00 -0500] nacer: -a
[2012-03-06 14:11:00 -0500] BryanWB: i have an lwrp for pulling such dependencies from the maven repos on the web
[2012-03-06 14:11:00 -0500] nacer: BryanWB: oki doki, i didn't know the mysql.jar was on a maven repo
[2012-03-06 14:12:00 -0500] Guest45606: hi, i want to execute this in my template "Time.new.strftime("%Y%m%d%H%M")" only if the template changes. So i dont taht the template changes everytime because this would change it
[2012-03-06 14:12:00 -0500] Guest45606: how can i do that?
[2012-03-06 14:12:00 -0500] nacer: BryanWB: but yeah why not , for the mvn lwrp
[2012-03-06 14:13:00 -0500] BryanWB: nacer pretty much every jar is out in public maven repo, to get mysql     ivy 'mysql-connector-java' do ; groupId mysql; version '5.1.18' ; end
[2012-03-06 14:13:00 -0500] nacer: BryanWB: but we put all our needed in our apps when it's possible
[2012-03-06 14:13:00 -0500] BryanWB: nacer: that's ideal
[2012-03-06 14:13:00 -0500] nacer: BryanWB: mysql is one of the exeption because app serv is the one who manage the database pool
[2012-03-06 14:14:00 -0500] nacer: BryanWB: so your lwrp will be limited to this kind of exeption
[2012-03-06 14:14:00 -0500] BryanWB: my ivy lwrp works for some jars not all, maven lwrp will be more robust but same syntax
[2012-03-06 14:18:00 -0500] laurent\: guys, what do you create you diagrams with ? dia ?
[2012-03-06 14:19:00 -0500] proffalken: laurent\: yup, dia and http://gnomediaicons.sourceforge.net/
[2012-03-06 14:20:00 -0500] BryanWB: is it possible to alias an lwrp? say alias my tomcat lwrp to `tc`  ?
[2012-03-06 14:20:00 -0500] jtimberman: BryanWB: iirc no, which is why the 'database' cookbook has heavyweight resource/provider
[2012-03-06 14:20:00 -0500] laurent\: proffalken: ok, thx for the icons url
[2012-03-06 14:21:00 -0500] proffalken: laurent\: np
[2012-03-06 14:21:00 -0500] BryanWB: jtimberman: tks
[2012-03-06 14:25:00 -0500] benner: I found, that after some network outage, chef-client stuck in select() syscall. lsof shows that it waiting on https connection to chef-server (actualy hosted). restart client helped.
[2012-03-06 14:31:00 -0500] sivy: Hey guys; ruby question. what do I need to import to use Ruby's File object, not Chef:Provider:File:Class
[2012-03-06 14:34:00 -0500] laurent\: proffalken: i've just came across http://www.asciiflow.com/ and http://ditaa.sourceforge.net/ looks simple and nice
[2012-03-06 14:44:00 -0500] jtimberman: BryanWB: i was just in the internals of chef the other day to find out similar things :)
[2012-03-06 14:44:00 -0500] jtimberman: fyi: https://github.com/opscode/chef-fundamentals/blob/lwrp-section/slides/lwrp-introduction/01_slide.md
[2012-03-06 14:45:00 -0500] proffalken: laurent\: they look cool, thanks
[2012-03-06 14:45:00 -0500] jtimberman: sivy: ::File
[2012-03-06 14:45:00 -0500] jtimberman: like, ::File.exists?
[2012-03-06 14:46:00 -0500] jtimberman: or whatever
[2012-03-06 14:46:00 -0500] jtimberman: you don't need to import/require anything, its just there
[2012-03-06 14:49:00 -0500] sivy: jtimberman: ah, ok. I used File.open and agot a complaint about .open being a private api
[2012-03-06 14:49:00 -0500] sivy: (on Chef::provider::File
[2012-03-06 14:49:00 -0500] sivy: )
[2012-03-06 14:49:00 -0500] sivy: jtimberman: i'm rewriting a chunk of the pip resource
[2012-03-06 14:50:00 -0500] sivy: becuase if you pass in a requirements file that takes a long time to run (as mine does)
[2012-03-06 14:50:00 -0500] sivy: the chef run just pauses while it work, with no output
[2012-03-06 14:50:00 -0500] sivy: and appears to timeout
[2012-03-06 14:50:00 -0500] sivy: and die
[2012-03-06 14:52:00 -0500] sivy: so while it's "cleaner" to simply run pip -r <file>, I think i'm going to have to parse the file and run install_package(package, version) for each
[2012-03-06 15:03:00 -0500] BryanWB: sivy: did u get an answer?
[2012-03-06 15:04:00 -0500] BryanWB: ah i c u did
[2012-03-06 15:07:00 -0500] makuk66: This must be a faq, but I can't find it. I did a "knife search" for "node:foo", and matched chef node "foo", but also other nodes that had name=foo nested keys. I know about "_" to wildcardnested keys, but how can I anchor this query so it only matches top-level attributes?
[2012-03-06 15:07:00 -0500] makuk66: I can do various workarounds, but this irks me; there must be a way
[2012-03-06 15:09:00 -0500] jtimberman: sivy: hmm, is parsing the file and doing install_package faster than just running w/ the requirements file?
[2012-03-06 15:09:00 -0500] jtimberman: doesn't seem efficient or clear code-wise to have chef do the work of pip
[2012-03-06 15:21:00 -0500] geekbri: default attributes in a role file override the default attributes sent in a cookbook right?
[2012-03-06 15:22:00 -0500] mattray: geekbri: http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence now with numbers!
[2012-03-06 15:22:00 -0500] geekbri: heyyy, and who doesn't like numbers.
[2012-03-06 15:24:00 -0500] geekbri: mattray: I have an attribute in an attributes file referencing another attribute in it.... but when i overwrite the attribute its reading from it still pulls the one from the attributes file, not the one that overwrote it in the role file.  If I look at the node in the opscode console... the value is written properly (equals what was in the role file).  Is accessing it as node['mykey'] not correct?
[2012-03-06 15:25:00 -0500] mattray: that's the correct way to reference it
[2012-03-06 15:26:00 -0500] geekbri: hrmm....
[2012-03-06 15:28:00 -0500] geekbri: so if i have say these two attributes.  default['mysoftware']['myversion'] = 1 and default['mysoftware']['mytarball'] = "#{mysoftware['myversion']}.tgz", then in my role file I have default_attributes({ :mysoftware => { :myversion => '2' }})  Should mytarball = 2.tgz ?
[2012-03-06 15:31:00 -0500] jonlives: geekbri: where are the initial attributes defined? attributes file in the cookbook?
[2012-03-06 15:31:00 -0500] jonlives: ie those not in the role
[2012-03-06 15:31:00 -0500] geekbri: jonlives: correct the default's are set in the attributes file. then i try to override them in the role file
[2012-03-06 15:31:00 -0500] jonlives: yeah, mytarball should = 2.tgz then
[2012-03-06 15:32:00 -0500] jtimberman: geekbri: attributes files are loaded in hash order but seem like alphabetical order sometimes. if you need an attribute from another cookbook, you can explicitly load the attributes file from that cookbook with include_attribute "cookbookname" or "cookbookname::filename"
[2012-03-06 15:32:00 -0500] jonlives: oh, I only read the last question :p
[2012-03-06 15:33:00 -0500] ssd7: Ohai Chefs!
[2012-03-06 15:33:00 -0500] geekbri: jtimberman: I'm trying to provide a way to override the default version of something
[2012-03-06 15:34:00 -0500] jonlives: geekbri: node.default['mykey']  is equivalent to default[mykey]
[2012-03-06 15:34:00 -0500] geekbri: jtimberman: so basically when i override the version attribute in my role file, I want the mytarball attribute in the cookbook to be based on that.
[2012-03-06 15:35:00 -0500] jonlives: geekbri: try accessing in the cookbook as node.default['mykey']
[2012-03-06 15:35:00 -0500] geekbri: trying now
[2012-03-06 15:36:00 -0500] geekbri: this is in the attributes.rb file.
[2012-03-06 15:36:00 -0500] jonlives: no, in the cookbook you're referencing the attributes.
[2012-03-06 15:36:00 -0500] jonlives: attribs file stays as default[foo[
[2012-03-06 15:36:00 -0500] jonlives: *[foo]
[2012-03-06 15:37:00 -0500] geekbri: But what I'm trying to do is have the attributes in the attributes file be dynamic if you override one of them in the role file
[2012-03-06 15:37:00 -0500] jonlives: the override should work in this case tho, cos default attribs in a role have a higher precendence than default attribs in a attribs file
[2012-03-06 15:39:00 -0500] ssd7: the problem is, if I've read enough backscroll to understand, is that the role hasn't been loaded when the attribute files have been read
[2012-03-06 15:39:00 -0500] jonlives: so what I'm saying is when you access the attrib in your recipe, use node.default[foo]
[2012-03-06 15:39:00 -0500] ssd7: so you can't really know inside an attr file what the final value will be
[2012-03-06 15:39:00 -0500] jonlives: oooh so the role doesn't include the recipe?
[2012-03-06 15:39:00 -0500] jonlives: that might do it.
[2012-03-06 15:40:00 -0500] jonlives: what you might wanna do then is in the role add it to the override_)attributes section.
[2012-03-06 15:41:00 -0500] geekbri: jonlives: What exactly is the difference ?
[2012-03-06 15:42:00 -0500] jonlives: override has a much higher precendence
[2012-03-06 15:42:00 -0500] jonlives: generally, the recommended way is use default attribs in a cookbook or whatever, then override attribs in a role.
[2012-03-06 15:46:00 -0500] sivy: jtimberman: yeah, i don't much like it, but the Chef run is fialing, seemingly due to a timeout of some kind
[2012-03-06 15:46:00 -0500] sivy: with no feedback on what is going on in the pip run
[2012-03-06 15:48:00 -0500] sivy: jtimberman: gimme 5 and i'll get you a trace
[2012-03-06 15:57:00 -0500] geekbri: sorry I think i've figured it out by reading the documents carefully and poaching information from the opscode apache cookbook
[2012-03-06 16:07:00 -0500] sivy: jtimberman: hey, here's a log of what's happening with a biggish requirements file:
[2012-03-06 16:07:00 -0500] sivy: https://gist.github.com/1987072
[2012-03-06 16:08:00 -0500] retr0h: is it possible to query data_bag_item or search inside an ohai plugin or is that too early?
[2012-03-06 16:08:00 -0500] ashb: fairly sure ohai plugins are meant ot just be info about the current node
[2012-03-06 16:09:00 -0500] ashb: (you can run just ohai. and it doesn't speak to any servers at all)
[2012-03-06 16:09:00 -0500] retr0h: yah.. well was wanting to put a nice named interface inside ohai
[2012-03-06 16:09:00 -0500] retr0h: so i can do node['network']['management_ipv4'] but I have data bags that represent what the management interface is depending on the hw vendor etc..
[2012-03-06 16:10:00 -0500] retr0h: so wanted to take adv of the data bag.. sure i can just set it in the plugin staticly
[2012-03-06 16:10:00 -0500] retr0h: was just trying to avoid that is all
[2012-03-06 16:25:00 -0500] sivy: jtimberman: i'm suspecting it might be a vagrant issue: https://github.com/mitchellh/vagrant/issues/516
[2012-03-06 16:30:00 -0500] sivy: i'm going to try getting my linode boostrapped
[2012-03-06 16:38:00 -0500] ajsrn: Hey all
[2012-03-06 16:38:00 -0500] ajsrn: Was wondering if anyone could help me with a quick question
[2012-03-06 16:39:00 -0500] ajsrn: I'm using chef and vagrant
[2012-03-06 16:39:00 -0500] ajsrn: and trying to use the cookbook_file resource
[2012-03-06 16:39:00 -0500] ajsrn: and I'm running into this error:
[2012-03-06 16:39:00 -0500] ajsrn: Cannot find CookbookFile for cookbook_file
[2012-03-06 16:39:00 -0500] ajsrn: Original exception: NameError: uninitialized constant Chef::Resource::CookbookFile
[2012-03-06 16:40:00 -0500] ajsrn: Has anyone seen that before - looking through the docs, I got the impression it's a core feature, and I didn't need any additional cookbooks to enable it
[2012-03-06 16:40:00 -0500] ajsrn: but I could be wrong
[2012-03-06 16:40:00 -0500] ajsrn: If I'm being super-dense, then let me know and I can re-read them :)
[2012-03-06 16:41:00 -0500] ajsrn: here's my code in the recipse
[2012-03-06 16:41:00 -0500] ajsrn: cookbook_file "/opt/my_app/jboss-5.1.0.GA-jdk6.zip" do   source "jboss-5.1.0.GA-jdk6.zip" end
[2012-03-06 16:41:00 -0500] ajsrn: and there is a jboss-5.1.0.GA-jdk6.zip in files/default for the cookbook
[2012-03-06 16:43:00 -0500] ajsrn: Anyone? :)
[2012-03-06 16:44:00 -0500] makuk66: ajsrn: sounds good to me...
[2012-03-06 16:45:00 -0500] BryanWB: ajsrn: did u put the jboss...zip file in your_cookbook/files/default?
[2012-03-06 16:45:00 -0500] ajsrn: maku66: any ideas on what could be causing the error?
[2012-03-06 16:45:00 -0500] ajsrn: BryanWB: yup, it's there, and I verified it was there on the vagrant instance I spun up
[2012-03-06 16:45:00 -0500] BryanWB: ajsrn: u may find this usefult https://github.com/bryanwb/cookbooks/tree/master/jboss
[2012-03-06 16:46:00 -0500] BryanWB: ajsrn: can pastie or gist all your recipe code?
[2012-03-06 16:48:00 -0500] BryanWB: ajsrn: sorry gtg
[2012-03-06 16:48:00 -0500] makuk66: ajsrn: have you got other cookbook_file entries that work, or fail in the same way?
[2012-03-06 16:48:00 -0500] ajsrn: BryanWB:  Looks awesome - I'll def. give it a try.  Is it possible to configure it to use a local file - JBoss' servers are super-slow so installs are taking a long time (Which is why I'm trying to make the this:))
[2012-03-06 16:48:00 -0500] ajsrn: http://pastie.org/3534729
[2012-03-06 16:49:00 -0500] ajsrn: maku66:  This is the first time I've tried to use it - I cloned a repo for troubleshooting purposes and built the stub recipe above
[2012-03-06 16:49:00 -0500] ajsrn: so that's the only one at the moment
[2012-03-06 16:49:00 -0500] ajsrn: I can try and add a few more files and maybe copy them to a different loc
[2012-03-06 16:49:00 -0500] ajsrn: The interesting thing is that the recipe fails as soon as it's run
[2012-03-06 16:50:00 -0500] ajsrn: It doesn't get down to the cookbook_file section, it just breaks as soon as execution starts
[2012-03-06 16:51:00 -0500] jbz: Is anyone seeing problems connecting to api.opscode.com?
[2012-03-06 16:51:00 -0500] cwj: ive seen occasional 500s this morning
[2012-03-06 16:52:00 -0500] ajsrn: Here's the exact stacktrace from the vagrant VM
[2012-03-06 16:52:00 -0500] ajsrn: http://pastie.org/3534760
[2012-03-06 16:52:00 -0500] |shad0w|: ajsrn cookbook_file("foo") do
[2012-03-06 16:53:00 -0500] |shad0w|: hmm, acutally from the docs that shouldn't matter
[2012-03-06 16:53:00 -0500] ajsrn: |shad0w|: Should I tuch 'foo' in my /files/default too?
[2012-03-06 16:54:00 -0500] jbz: I'm getting 100% errors to the opscode platform :-(
[2012-03-06 16:54:00 -0500] ajsrn: *touch
[2012-03-06 16:54:00 -0500] |shad0w|: foo is just an example ...
[2012-03-06 16:54:00 -0500] |shad0w|: what version of chef are you running?
[2012-03-06 16:54:00 -0500] ajsrn: gotcha :)
[2012-03-06 16:54:00 -0500] ajsrn: ohwow
[2012-03-06 16:55:00 -0500] ajsrn: I'm running 0.10 something
[2012-03-06 16:55:00 -0500] ajsrn: but my client vm is running Chef: 0.8.16
[2012-03-06 16:55:00 -0500] ajsrn: Which seems really, really old
[2012-03-06 17:01:00 -0500] mattray: ajsrn: Ubuntu?
[2012-03-06 17:04:00 -0500] sivy: so, um, trying to setup my first non-VM node. I copied my ORG-validator.pem to /etc/chef/validator.pem but I'm getting a 401 from hosted-chef right after chef is installed (when registering the node I guess)
[2012-03-06 17:09:00 -0500] jbz: sivy:  Is that nodename already in use?
[2012-03-06 17:12:00 -0500] sivy: jbz: nope
[2012-03-06 17:16:00 -0500] sivy: jbz: I've tried using the hostname as well as the ip address
[2012-03-06 17:18:00 -0500] jbz: sivy: hm
[2012-03-06 17:18:00 -0500] jbz: and the node isn't registered?
[2012-03-06 17:18:00 -0500] jbz: sivy: Ohis there a *client* with that name?
[2012-03-06 17:21:00 -0500] sivy: jbz: no
[2012-03-06 17:21:00 -0500] sivy: the node is not registered
[2012-03-06 17:24:00 -0500] jbz: sivy:  No, not the node, the client? You checked the client?
[2012-03-06 17:24:00 -0500] sivy: i also checked the client
[2012-03-06 17:24:00 -0500] jbz: ah ok
[2012-03-06 17:24:00 -0500] jbz: hm.
[2012-03-06 17:24:00 -0500] sivy: no client with that name
[2012-03-06 17:24:00 -0500] jbz: And this pem works for vms?
[2012-03-06 17:25:00 -0500] sivy: jbz: well, actually I think the VM is using a different client
[2012-03-06 17:26:00 -0500] sivy: the VM registered it's own clinet
[2012-03-06 17:26:00 -0500] sivy: client
[2012-03-06 17:26:00 -0500] jbz: each node shoudl create its own client
[2012-03-06 17:26:00 -0500] jbz: all should
[2012-03-06 17:26:00 -0500] sivy: right
[2012-03-06 17:26:00 -0500] jbz: Can you tell from a stacktrace whether it failed trying to register the node or the client?
[2012-03-06 17:26:00 -0500] jbz: (better question: can you gist/pastie the stacktrace)?
[2012-03-06 17:26:00 -0500] sivy: https://gist.github.com/55561f668e3ce4d38639 <-- not sure
[2012-03-06 17:27:00 -0500] jbz: whee! thanks, checking
[2012-03-06 17:27:00 -0500] sivy: Limechat makes gist-ing really easy :-)
[2012-03-06 17:27:00 -0500] jbz: heh
[2012-03-06 17:27:00 -0500] jbz: *looks* like failure to register the node...
[2012-03-06 17:28:00 -0500] jbz: can you dump the failed run log?
[2012-03-06 17:28:00 -0500] sivy: here's the whole enchilada:
[2012-03-06 17:28:00 -0500] sivy: https://gist.github.com/86270a8dcae26c72c566
[2012-03-06 17:30:00 -0500] laurent\: anybody using chef attributes to generate diagrams ? :)
[2012-03-06 17:36:00 -0500] jbz: sivy:  Hm.  It looks like it doesn't like that validator, is all I can come up with...
[2012-03-06 17:37:00 -0500] sivy: yeah, i was thinking that
[2012-03-06 17:37:00 -0500] sivy: what's the diff between a validator and a client
[2012-03-06 17:37:00 -0500] jbz: ah
[2012-03-06 17:37:00 -0500] jbz: a validator cert is a one-time-use cert that will allow clients/nodes to *register*
[2012-03-06 17:37:00 -0500] jbz: then they are issued their *own* cert, which will let them use services but won't let them register new ones.
[2012-03-06 17:38:00 -0500] jbz: You should be able to get the validator cert from the opscode platform for your org, or get a new one
[2012-03-06 17:38:00 -0500] jbz: and there shouldn't be any problems getting a new one, because once a node is registered it doesn't use that cert anymore.
[2012-03-06 17:38:00 -0500] jbz: The only thing you have to do is remember to put it onto any workstation/account you run knife from
[2012-03-06 17:39:00 -0500] jbz: so that it can be copied to nodes bootstrapped from that knife client.
[2012-03-06 17:42:00 -0500] sivy: hm.
[2012-03-06 17:42:00 -0500] |shad0w|: laurent\, not yet but I'm debating putting in attribs to describe deps to pass to something like graphviz
[2012-03-06 17:42:00 -0500] sivy: jbz: would the validator knife is using be in the knife.rb?
[2012-03-06 17:43:00 -0500] sivy: hm, yeah
[2012-03-06 17:44:00 -0500] sivy: ok, my local knife is using the right validator
[2012-03-06 17:44:00 -0500] sivy: perhaps i need to regneerate it
[2012-03-06 17:45:00 -0500] jbz: Yeah, try regeneratng it, won't hurt anything
[2012-03-06 17:45:00 -0500] jbz: (unless other people are using it to create/bootstrap nodes)
[2012-03-06 17:45:00 -0500] sivy: no
[2012-03-06 17:49:00 -0500] sivy: jbz: well, that didn't seem to fix i
[2012-03-06 17:49:00 -0500] sivy: it
[2012-03-06 17:49:00 -0500] sivy: :/
[2012-03-06 17:49:00 -0500] jbz: Huh. ;_(
[2012-03-06 17:49:00 -0500] |shad0w|: time is right on the client node?
[2012-03-06 17:49:00 -0500] sivy: :/oh wait, forgot to copy the new key to the node
[2012-03-06 17:49:00 -0500] jbz: Oh yeah, what |shad0w| said
[2012-03-06 17:50:00 -0500] jbz: what's the window?  5 mins? 30 mins?
[2012-03-06 17:50:00 -0500] |shad0w|: not sure
[2012-03-06 17:50:00 -0500] geekbri: my chef client run is spitting this out hive-#<Chef::Node::Attribute:0x7f87c663e688>.tar.gz, does this mean an attribute is missing?
[2012-03-06 17:50:00 -0500] sivy: Tue Mar  6 12:50:35 EST 2012
[2012-03-06 17:50:00 -0500] sivy: looks right
[2012-03-06 17:50:00 -0500] |shad0w|: geekbri, sounds like you aren't wrapping the var in #{}
[2012-03-06 17:51:00 -0500] geekbri: |shad0w|: I am :-\
[2012-03-06 17:51:00 -0500] geekbri: I
[2012-03-06 17:51:00 -0500] geekbri: I'll double check all to make sure.
[2012-03-06 17:51:00 -0500] |shad0w|: sivy you're sure that there isn't a client or node with the same name already?
[2012-03-06 17:53:00 -0500] sivy: allready checked it
[2012-03-06 18:02:00 -0500] geekbri: Is it possible, within the default.rb attributes file of a cookbook, to set attributes based upon attributes set inside of a role?
[2012-03-06 18:04:00 -0500] geekbri: It seems to me that the cookbook will run, set its attributes, and then they can be overwritten by the role, but you can't have a situation where you can dynamically change the attributes in the cookbooks attribute file based upon attributes coming from a role file.  Even if they are of higher precendence.
[2012-03-06 18:15:00 -0500] sako: hey guys, i asked this last night when noone was here..
[2012-03-06 18:16:00 -0500] sako: but i am coming from using puppet for a while now and my background is in development, a lot of times puppet makes no sense to me. I have been reading that this may be cause puppet is more geared toward people coming from sysadmin backgrounds where chef works better for developers provisioning systems
[2012-03-06 18:16:00 -0500] sako: is that a valid opinion?
[2012-03-06 18:17:00 -0500] sako: i guess kind of an unnecessary question to be asking as I am going to take chef for a spin anyway
[2012-03-06 18:29:00 -0500] paulmooring: sako: I'm not sure I can say if an opinion is valid or not, but chef does allow arbitrary code to be put in it's recipes, which I would think appeals to more to developers than sys-admins
[2012-03-06 18:30:00 -0500] mconigliaro: i don't think it's valid. i haven't been a "developer" per-se for a long time, but i want to do everything in code
[2012-03-06 18:31:00 -0500] mconigliaro: the difference between chef and puppet is declarative vs imperative
[2012-03-06 18:32:00 -0500] toddnine: Hey guys.  When using knife ec2 create is there a way to pass json data for the node in?
[2012-03-06 18:36:00 -0500] laurent\: |shad0w|: i've realised I was already doing some pie charts with flot for my xen host/guests :)
[2012-03-06 18:36:00 -0500] AntonZ: hello is there runit cookbook for redhat/centos ?
[2012-03-06 18:37:00 -0500] AntonZ: the one on opscode seems to be supporting only ubuntu
[2012-03-06 18:45:00 -0500] AntonZ: is runit not supported on rhel/centos or ?
[2012-03-06 18:48:00 -0500] toddnine: anyone?  Json node data on ec2 instance create?
[2012-03-06 18:52:00 -0500] jmazzi: I'm using chef to manage my workstations. is there a way to use my local ssh key when deploying chef via sudo chef-client?
[2012-03-06 18:53:00 -0500] josephholsten: is there anything funky about cookbook_file's create_if_missing action?
[2012-03-06 18:53:00 -0500] hoover_damm: define funky?
[2012-03-06 18:53:00 -0500] hoover_damm: how are you using it?
[2012-03-06 18:54:00 -0500] jmazzi: actually, sudo -E should be enough
[2012-03-06 18:54:00 -0500] josephholsten: I'm trying to use it, but i get a Errno::ENOENT: No such file or directory - /file/to/be/created
[2012-03-06 18:55:00 -0500] hoover_damm: and really josephholsten looking at :create_if_missing... is just a easy if ::File.exists?(path) to verify the file exists
[2012-03-06 18:55:00 -0500] hoover_damm: and if it doesn't, creates it
[2012-03-06 18:55:00 -0500] hoover_damm: so seeing a /path/to/be/created being a nonexistant
[2012-03-06 18:55:00 -0500] gsat: Hi On one of my client i see ,  HTTP Request Returned 401 Unauthorized: Failed to authenticate. Ensure that your client key is valid.,  Key file looks good to me, as same keys work fine on another client.
[2012-03-06 18:55:00 -0500] hoover_damm: seems completely right
[2012-03-06 18:55:00 -0500] hoover_damm: but it should be an if, so it shouldn't mention that
[2012-03-06 18:56:00 -0500] hoover_damm: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/cookbook_file.rb#L53
[2012-03-06 18:56:00 -0500] josephholsten: gsat: your chef-client is probably not sending the same client name, it defaults to host name. if that doesn't match, no dice.
[2012-03-06 19:00:00 -0500] josephholsten: hoover_damm: I got it, was doing ` IO.read("/etc/hosts.local")` directly in the block, so it blew up in the first pass before it started converging
[2012-03-06 19:01:00 -0500] gsat: Josephholsten, "hostname" on my client looks to correct and it is giving correct name, How do we check what "hostname" is being sent?
[2012-03-06 19:01:00 -0500] josephholsten: gsat: is the hostname the same as the name of client whose key you're using?
[2012-03-06 19:02:00 -0500] josephholsten: also, you really don't want to use the same key on multiple machines. That's what a validator key is for
[2012-03-06 19:04:00 -0500] josephholsten: ok, I want my hosts recipe to read from /etc/hosts.local, but not until it's converging / ready to write the /etc/hosts template
[2012-03-06 19:04:00 -0500] josephholsten: what's the best way to read a file at converge time (without sticking IO.read in the template or something horrible)
[2012-03-06 19:09:00 -0500] sako: so which is imperative and which is declaritive in puppet vs chef?
[2012-03-06 19:09:00 -0500] |shad0w|: josephholsten, why not make the template use nothing but attribs?
[2012-03-06 19:10:00 -0500] josephholsten: |shad0w|: I decided I'll just make an /etc/hosts.d, drop multiple files in there and cat together with a bash resource.
[2012-03-06 19:11:00 -0500] josephholsten: added benefit is now I can make a lwrp that isn't insanely complicated like jn_hosts
[2012-03-06 19:11:00 -0500] |shad0w|: why even bother with an lwrp
[2012-03-06 19:12:00 -0500] |shad0w|: attribs get merged during convergence
[2012-03-06 19:12:00 -0500] gsat: Josephholsten, We use local chef server , docs in the wiki link show that "Your validation.pem can be downloaded from your chef-server if you are running your own chef-server. On your Chef Server, validation.pem should be in /etc/chef/. "
[2012-03-06 19:13:00 -0500] gsat: So do we need to generate validation.pem for each client? and copy it over
[2012-03-06 19:14:00 -0500] josephholsten: |shad0w|: because I'm also pulling from data bags, so I've got a bit of a headache with hashes
[2012-03-06 19:14:00 -0500] chip-: Question about the yum recipe and provider: Looks like Fedora went and changed how they're doing keys.
[2012-03-06 19:14:00 -0500] |shad0w|: even then, set your attribs from the dbag
[2012-03-06 19:14:00 -0500] chip-: Whereas before it was http://download.fedora.redhat.com/pub/epel/RPM-GPG-KEY-EPEL
[2012-03-06 19:14:00 -0500] chip-: now it's http://download.fedora.redhat.com/pub/epel/RPM-GPG-KEY-EPEL-5
[2012-03-06 19:15:00 -0500] josephholsten: gsat: I just reuse the same validator, but once you've registered a client you don't need the validator on the box any more
[2012-03-06 19:15:00 -0500] chip-: so I'm looking at providers/keys.rb and trying to figure out how new_resource.key is defined, but I don't get it.
[2012-03-06 19:16:00 -0500] sivy: hey jtimberman, so I'm still fighting this validator thing. i've regenerated the validator, added the new .pwm locally and on the node i'm trying to bootstrap
[2012-03-06 19:16:00 -0500] sivy: .pem, i mean
[2012-03-06 19:16:00 -0500] sivy: in /etc/chef/validator.pem
[2012-03-06 19:16:00 -0500] sivy: i'm running `knife boostrap the.ip.add.ress -x root --sudo`
[2012-03-06 19:17:00 -0500] sivy: i *am* seeing:
[2012-03-06 19:17:00 -0500] sivy: the.ip.add.ress unable to resolve host wwwapp1
[2012-03-06 19:17:00 -0500] sivy: could this be some kind of hostname mismatch?
[2012-03-06 19:18:00 -0500] sivy: (running knfe again with double -VVs )
[2012-03-06 19:18:00 -0500] josephholsten: sivy: is wwwapp1 your chef server?
[2012-03-06 19:19:00 -0500] sivy: josephholsten: no, i think it's the hostname of the node that's being bootstrapped
[2012-03-06 19:19:00 -0500] chip-: atomic-penguin: ping.
[2012-03-06 19:19:00 -0500] |shad0w|: sivy, can the node resolve its own hostname?
[2012-03-06 19:19:00 -0500] atomic-penguin: yo
[2012-03-06 19:19:00 -0500] atomic-penguin: sup
[2012-03-06 19:20:00 -0500] josephholsten: oh, wait I know that error
[2012-03-06 19:20:00 -0500] chip-: atomic-penguin: see above scroll about yumrepo cookbook & fedora changing the name of the epel gpg key, and my wanting to patch it but not quite understanding how the provider works.
[2012-03-06 19:20:00 -0500] josephholsten: sivy: sudo complains when the node can't resolve its hostname, you may want to add it to /etc/hosts
[2012-03-06 19:20:00 -0500] josephholsten: like |shad0w| sad
[2012-03-06 19:21:00 -0500] |shad0w|: sudo shouldn't care, but chef-client will
[2012-03-06 19:21:00 -0500] sivy: as 127.0.0.1 or the actual ip address/
[2012-03-06 19:21:00 -0500] atomic-penguin: chip-, either remote_files it or cookbook_files it
[2012-03-06 19:21:00 -0500] josephholsten: both true. sudo just whines, which is where he probably gets that message
[2012-03-06 19:22:00 -0500] atomic-penguin: chip-, https://github.com/atomic-penguin/cookbooks/blob/yumrepo/yumrepo/attributes/epel.rb
[2012-03-06 19:22:00 -0500] atomic-penguin: chip-, in that case it remote_files it
[2012-03-06 19:22:00 -0500] chip-: atomic-penguin: There's the keys.rb provider and it seems simple enough to append platform_version to new_resource.key
[2012-03-06 19:22:00 -0500] hoover_damm: josephholsten, interesting... likely not the best way to modify a /etc/hosts file
[2012-03-06 19:22:00 -0500] hoover_damm: but then the whole host file management in chef is usually done in weird ways
[2012-03-06 19:22:00 -0500] hoover_damm: for redefining the host of the current machine
[2012-03-06 19:23:00 -0500] chip-: oh wait
[2012-03-06 19:23:00 -0500] chip-: I'm confusing the yumrepo cookbook with the yum cookbook, aren't I
[2012-03-06 19:23:00 -0500] chip-: DAMN.
[2012-03-06 19:23:00 -0500] atomic-penguin: chip-, thats okay, I've worked on both
[2012-03-06 19:23:00 -0500] josephholsten: a config format that doesn't support including other files makes for weird hacks, yep
[2012-03-06 19:23:00 -0500] sivy: |shad0w|, josephholsten: added hostname to /etc/hosts, no more bitching from sudo, but no love from chef
[2012-03-06 19:23:00 -0500] |shad0w|: hoover_damm, I do it fine with attribs and a simple template
[2012-03-06 19:24:00 -0500] chip-: My #1 goal for chefconf is going to be learning how to do providers.
[2012-03-06 19:24:00 -0500] atomic-penguin: chip-, so where did they move/rename it?
[2012-03-06 19:24:00 -0500] chip-: Was: http://download.fedora.redhat.com/pub/epel/RPM-GPG-KEY-EPEL
[2012-03-06 19:24:00 -0500] chip-: Is:  http://download.fedora.redhat.com/pub/epel/RPM-GPG-KEY-EPEL-5
[2012-03-06 19:24:00 -0500] josephholsten: sivy: can you run `chef-client --log_level debug`
[2012-03-06 19:24:00 -0500] chip-: er wait.
[2012-03-06 19:25:00 -0500] sivy: josephholsten: from the workstation or the node?
[2012-03-06 19:25:00 -0500] berngp: Hi there, to download a remote file (lets say the tomcat .gtar file) what is recommended.. 1. a remote_file or an execute with a wget? Any thoughts will be appreciated.
[2012-03-06 19:25:00 -0500] AntonZ: anhyone got runit working on centos ?
[2012-03-06 19:25:00 -0500] atomic-penguin: chip-, weird can't reach it at the moment
[2012-03-06 19:25:00 -0500] chip-: Grah. One second, I'm trapped in mirror rewrites.
[2012-03-06 19:26:00 -0500] AntonZ: trying to finish up jira install, but it gets stumbled on runit portion
[2012-03-06 19:26:00 -0500] sivy: josephholsten: AHA
[2012-03-06 19:26:00 -0500] chip-: Crap. I overanalyzed this
[2012-03-06 19:26:00 -0500] chip-: All that changed is now it's http://download.fedoraproject.org/pub/ instead
[2012-03-06 19:26:00 -0500] sivy: there was an old /etc/chef/client.pem
[2012-03-06 19:27:00 -0500] chip-: That's an easy patch.
[2012-03-06 19:27:00 -0500] sivy: so it wasn't even trying to register
[2012-03-06 19:27:00 -0500] chip-: I see there's a non-versioned and 3 versions.
[2012-03-06 19:27:00 -0500] chip-: So sorry for wasting your time, and so many thanks for the help!
[2012-03-06 19:27:00 -0500] sivy: josephholsten: of course, it registered as "localhost.localdomain" <angryface>
[2012-03-06 19:28:00 -0500] atomic-penguin: So chip- are you using this: https://github.com/opscode/cookbooks/blob/master/yum/recipes/epel.rb
[2012-03-06 19:28:00 -0500] chip-: yeah, which is pointing to download.fedoraproject.org
[2012-03-06 19:28:00 -0500] chip-: so now I'm wondering if my mirror list just needs flushed
[2012-03-06 19:28:00 -0500] atomic-penguin: okay, looks like the 4 and 5 keys are the same
[2012-03-06 19:28:00 -0500] atomic-penguin: the 6 key is different
[2012-03-06 19:29:00 -0500] chip-: Nod
[2012-03-06 19:29:00 -0500] atomic-penguin: chip-, looks to me like the yum::epel doesn't use its own key provider
[2012-03-06 19:29:00 -0500] atomic-penguin: chip-, while the yumrepo::epel does use the key provider
[2012-03-06 19:30:00 -0500] chip-: atomic-penguin: Bizarro
[2012-03-06 19:30:00 -0500] atomic-penguin: chip-, what version of yum cb do you have
[2012-03-06 19:33:00 -0500] chip-: atomic-penguin: Checking that now.
[2012-03-06 19:34:00 -0500] gsat: josephholsten, so i can use the same validation.pem on alternate node too, I did not get the solution of  401 error, can you be more explicit?
[2012-03-06 19:35:00 -0500] chip-: atomic-penguin: just merged in Yum 0.5.2, and yumrepo 0.15.2
[2012-03-06 19:35:00 -0500] atomic-penguin: chip-, looks to me like jtimberman's yum::epel doesn't import the key
[2012-03-06 19:36:00 -0500] chip-: atomic-penguin: yeah, I'm using yumrepo::default.
[2012-03-06 19:37:00 -0500] atomic-penguin: chip-, then change the yumrepo/attributes/epel.rb accordingly
[2012-03-06 19:37:00 -0500] atomic-penguin: chip-, if the key isn't importing correctly
[2012-03-06 19:38:00 -0500] chip-: yeah, just found that.
[2012-03-06 19:38:00 -0500] atomic-penguin: chip-, could just be that download.fedora.redhat.com was down a min ago
[2012-03-06 19:39:00 -0500] chip-: I think swapping it to download.fedoraproject.org will get an automatic mirror anyway
[2012-03-06 19:39:00 -0500] sivy: josephholsten: so, i've got the node re-registered as the correct hostname (wwwapp1) and that's the node name
[2012-03-06 19:39:00 -0500] atomic-penguin: yeah, you're right
[2012-03-06 19:39:00 -0500] hoover_damm: |shad0w|, don't forget to share with josephholsten I guess if he wants
[2012-03-06 19:39:00 -0500] sivy: but: knife ssh name:wwwapp1 -a the.ip.add.ress "sudo chef-client" fails
[2012-03-06 19:39:00 -0500] sivy: FATAL: No nodes returned from search!
[2012-03-06 19:39:00 -0500] hoover_damm: sivy, wrong order
[2012-03-06 19:39:00 -0500] sivy: ?
[2012-03-06 19:40:00 -0500] hoover_damm: sivy, knife ssh node name:wwwapp1 "sudo chef-client" -a ipaddress
[2012-03-06 19:40:00 -0500] hoover_damm: and ipaddress is an attribute
[2012-03-06 19:40:00 -0500] hoover_damm: you can't just say -a 10.1.2.3
[2012-03-06 19:40:00 -0500] hoover_damm: it's -a cloud_ipaddress or ipaddress or ec2.ipaddress
[2012-03-06 19:40:00 -0500] hoover_damm: s/_/.
[2012-03-06 19:40:00 -0500] sivy: ooooo
[2012-03-06 19:40:00 -0500] chip-: atomic-penguin: yep, there it goes. Thanks for helping me hunt that down / letting me bounce things off you.
[2012-03-06 19:41:00 -0500] atomic-penguin: no problem, any time
[2012-03-06 19:41:00 -0500] sivy: hoover_damm: someone needs to edit http://wiki.opscode.com/display/chef/Client+Bootstrap+Fast+Start+Guide then
[2012-03-06 19:41:00 -0500] sivy: :/
[2012-03-06 19:41:00 -0500] hoover_damm: i've always found -a ipaddress think that's the command
[2012-03-06 19:41:00 -0500] sivy: yay, running client now
[2012-03-06 19:41:00 -0500] hoover_damm: so I had to put the command in "'s like that
[2012-03-06 19:41:00 -0500] hoover_damm: sivy, and your free to edit it
[2012-03-06 19:42:00 -0500] hoover_damm: sivy, create an account if you don't have one, and click edit and win!
[2012-03-06 19:42:00 -0500] hoover_damm: :)
[2012-03-06 19:42:00 -0500] hoover_damm: win!
[2012-03-06 19:44:00 -0500] rocket: anyone know what this error is from on centos5 Cipher is not a module (TypeError)
[2012-03-06 19:48:00 -0500] hoover_damm: self compiled ruby?
[2012-03-06 19:49:00 -0500] hoover_damm: sounds like ruby lacks the openssl ext stdlib
[2012-03-06 19:49:00 -0500] |shad0w|: hoover_damm, quick example of how I'm handling /etc/hosts in my base cookbook: https://gist.github.com/1988609
[2012-03-06 19:50:00 -0500] hoover_damm: neat
[2012-03-06 19:50:00 -0500] hoover_damm: |shad0w|, should totlaly work
[2012-03-06 19:50:00 -0500] |shad0w|: works well
[2012-03-06 19:50:00 -0500] hoover_damm: i bet
[2012-03-06 19:51:00 -0500] |shad0w|: ohh, the entries in roles are in default attribs
[2012-03-06 19:51:00 -0500] |shad0w|: so everything gets merged during converge
[2012-03-06 19:51:00 -0500] |shad0w|: could be overridden too but that probably wouldn't happen in our env
[2012-03-06 19:51:00 -0500] df11: Anyone have issues with couchdb file descripters not being released after compaction and eventually filly up 30-40GB of disk space?  I found this bug which seems to fix it in v1.0.2: https://issues.apache.org/jira/browse/COUCHDB-926 but the ubuntu repo only contains 1.0.1 which is what is being run with a typical install of chef on ubuntu.
[2012-03-06 19:52:00 -0500] hoover_damm: right
[2012-03-06 19:53:00 -0500] hoover_damm: df11, better file a bug with ubuntu to get 1.0.2 or it will never happen
[2012-03-06 19:53:00 -0500] hoover_damm: never assume a package will be updated in ubuntu unless you file a ticket and am told otherwise
[2012-03-06 19:53:00 -0500] df11: hoover_damm, thanks
[2012-03-06 19:54:00 -0500] hoover_damm: just how ubuntu grabs packages from upstream (debian)
[2012-03-06 19:54:00 -0500] hoover_damm: that can leave gaping old packages
[2012-03-06 19:54:00 -0500] hoover_damm: as far as a workaround, a ppa with 1.0.2
[2012-03-06 19:54:00 -0500] df11: yeah, looking for a ppa now
[2012-03-06 19:55:00 -0500] warik: hello, why when I "set" an a new attribute, it can't be override by a recipe?
[2012-03-06 19:56:00 -0500] df11: wow, bug has been open for a pull request since 01/2011: https://bugs.launchpad.net/ubuntu/+source/couchdb/+bug/709332
[2012-03-06 19:56:00 -0500] df11: warik: could you provide more details?
[2012-03-06 19:57:00 -0500] hoover_damm: df11, sounds right
[2012-03-06 19:57:00 -0500] hoover_damm: df11, ubuntu finally resolved a bug I filed in 2009
[2012-03-06 19:57:00 -0500] hoover_damm: regarding couchdb crashes
[2012-03-06 19:58:00 -0500] hoover_damm: https://bugs.launchpad.net/ubuntu/+source/erlang/+bug/434870
[2012-03-06 19:58:00 -0500] hoover_damm: you can even view by that ticket how slow it can be
[2012-03-06 19:59:00 -0500] warik: df11: sure thanks! in my default.rb in the attribute folder, I defined an attribute: set['mysql']['database'] = "none". In one of my recipe, I would like to change this attribute after the mysql db is installed, I tried to use:  node.override['mysql']['database'] = "true".  However, my node attribute stays at the "none"
[2012-03-06 20:00:00 -0500] df11: warik: what are you actually trying to do by changing this attribute after installation?
[2012-03-06 20:01:00 -0500] df11: warik: only install it once?  that sort-of stuff is built-in or handled with not_if, only_if declarations
[2012-03-06 20:01:00 -0500] warik: my plan was to test the value of this attribute to avoid the installation again
[2012-03-06 20:01:00 -0500] warik: hmmm ok
[2012-03-06 20:01:00 -0500] df11: so how are you installing it?
[2012-03-06 20:02:00 -0500] warik: df11: actually, creating is the correct term, I just creating a new mysql db
[2012-03-06 20:03:00 -0500] warik: once it's created, if chef runs again it fails, because the db is already there
[2012-03-06 20:03:00 -0500] warik: i just want to avoid this
[2012-03-06 20:03:00 -0500] warik: I though an attribute could help with that
[2012-03-06 20:04:00 -0500] df11: are you using the mysql opscode cookbook?  (which granted has bugs)
[2012-03-06 20:05:00 -0500] warik: no, i am using "execute" with a "command" mysql
[2012-03-06 20:05:00 -0500] warik: in my recipe
[2012-03-06 20:08:00 -0500] df11: ok, well, you could do something like this too instead of changing attributes which i don't think is a good idea: not_if("/usr/bin/mysql -u#{databag_user} -p#{databag_pass} -e'show databases' | grep #{node[:mysql_db][:db_name]}", :user => 'bobsmith')
[2012-03-06 20:09:00 -0500] warik: df11: that looks good to me
[2012-03-06 20:09:00 -0500] warik: let me try that
[2012-03-06 20:10:00 -0500] df11: overriding attributes may have a lot of good uses but i typically like them to remain static either being set by a recipe/role.
[2012-03-06 20:12:00 -0500] warik: df11: yes, that makes sense
[2012-03-06 20:12:00 -0500] warik: df11: should I keep the "action" line in my "execute" command?
[2012-03-06 20:18:00 -0500] df11: not sure how you are using :action in an execute, more detail pls?
[2012-03-06 20:19:00 -0500] warik: I saw that in couple example, at the end I have: "action :run"  i thought it was to run the all thing
[2012-03-06 20:20:00 -0500] fujin: default action for execute is run
[2012-03-06 20:20:00 -0500] fujin: resources?
[2012-03-06 20:20:00 -0500] bawt: resources is http://wiki.opscode.com/display/chef/Resources
[2012-03-06 20:20:00 -0500] warik: thanks guys
[2012-03-06 20:32:00 -0500] warik: df11: one last thing, I tried the not_if, although I am not sure the test is correct  =>  not_if "mysql -h #{node['mysql']['mysql-host']} -u root -p#{node['mysql']['root-password']} -e 'SHOW DATABASES;' |grep db, 'db'"  is that looks good?
[2012-03-06 20:34:00 -0500] josephholsten: is there a platform test for i386 v amd64?
[2012-03-06 20:39:00 -0500] bdha: josephholsten: node[:kernel][:machine]
[2012-03-06 20:39:00 -0500] josephholsten: bdha: thanks!
[2012-03-06 20:39:00 -0500] bdha: josephholsten: ohai | less
[2012-03-06 20:39:00 -0500] bdha: All of that is avail to in the node object.
[2012-03-06 20:40:00 -0500] josephholsten: sure, just didn't see it in a quick scan of ohai
[2012-03-06 20:41:00 -0500] corp: greetings
[2012-03-06 20:43:00 -0500] warik: df11: nervermind, I just had to remove the last part, it works fine now, thanks a lot for your help :)
[2012-03-06 21:06:00 -0500] nect: is there a native means to have a http url as the package source?
[2012-03-06 21:12:00 -0500] hippiehacker: yikes, with 32 windows nodes (their ohai data is large) my chef.couch is 16G in less than 48 hours
[2012-03-06 21:13:00 -0500] fujin: awesome
[2012-03-06 21:13:00 -0500] fujin: hippiehacker: compacting?
[2012-03-06 21:14:00 -0500] jbz: Oh yeah haha doesn't windows ohai dump the registry or something?
[2012-03-06 21:14:00 -0500] hippiehacker: https://gist.github.com/1989007
[2012-03-06 21:14:00 -0500] hippiehacker: jbz: pretty much
[2012-03-06 21:14:00 -0500] bdha: Wow.
[2012-03-06 21:14:00 -0500] hippiehacker: fujin: trying to force compaction
[2012-03-06 21:14:00 -0500] Viral1: @hippiehacker: that's like 0.5G a node, what's it dumping the whole win32 registry?
[2012-03-06 21:15:00 -0500] hippiehacker: Viral1: I was being facetious
[2012-03-06 21:15:00 -0500] hippiehacker: but it does produce a 500kb ohai dump
[2012-03-06 21:16:00 -0500] Viral1: ah
[2012-03-06 21:16:00 -0500] Viral1: that's still rather large imo
[2012-03-06 21:16:00 -0500] hippiehacker: yea, it's caused problems with winrm, clogging up if you run chef-client over it with debug on (the ohai data gets dumped)
[2012-03-06 21:17:00 -0500] fujin: nasty
[2012-03-06 21:17:00 -0500] fujin: what
[2012-03-06 21:17:00 -0500] hippiehacker: need to force a compaction, but I've not been able to as of yet
[2012-03-06 21:17:00 -0500] Viral1: bust a hack hippie :D
[2012-03-06 21:17:00 -0500] sivy: anyone using the python_virtualenv resource? it's telling me it's running :create, with no errors, but the virtualenv is not created
[2012-03-06 21:18:00 -0500] hippiehacker: looks like I'll be digging into couchdb
[2012-03-06 21:19:00 -0500] hoover_damm: hippiehacker, need some help?
[2012-03-06 21:20:00 -0500] hippiehacker: hoover_damm: I'd appreciate some direction for sure
[2012-03-06 21:20:00 -0500] hoover_damm: sivy, using the new virtualenv one?
[2012-03-06 21:20:00 -0500] hoover_damm: hippiehacker, well if your just trying to recover your data, and you have disk space replication is your first path
[2012-03-06 21:21:00 -0500] hoover_damm: hippiehacker, ssh tunnel and fire up the futon ui, create chef_recovery database, and then replicate chef to chef_recovery.  Delete chef, then re-create chef, replicate back
[2012-03-06 21:21:00 -0500] hoover_damm: restart chef-api
[2012-03-06 21:21:00 -0500] hoover_damm: feel free to backup chef.couch before you do anything
[2012-03-06 21:22:00 -0500] hoover_damm: hippiehacker, if you get in dire situations where you want to dump your data and upgrade, or it can't replicate... http://code.google.com/p/couchdb-python/
[2012-03-06 21:22:00 -0500] hippiehacker: hoover_damm: I'll poke around and see what I can come up with, I'm unsure what the current status is
[2012-03-06 21:22:00 -0500] hoover_damm: honestly you can really just pip install that baby
[2012-03-06 21:22:00 -0500] hoover_damm: and it'll pretty much take care of everything
[2012-03-06 21:22:00 -0500] hoover_damm: as you can dump load and has a replication knob (not sure if it'll set it up)
[2012-03-06 21:22:00 -0500] hippiehacker: I'd like to configure couchdb to not maintain so many versions
[2012-03-06 21:22:00 -0500] hoover_damm: seriously
[2012-03-06 21:23:00 -0500] hoover_damm: although modern versions had autocompaction no?
[2012-03-06 21:23:00 -0500] hoover_damm: why did your compaction break down? you figure that out yet?
[2012-03-06 21:23:00 -0500] hippiehacker: I'm not even sure where to start looking
[2012-03-06 21:23:00 -0500] hoover_damm: erl
[2012-03-06 21:23:00 -0500] hoover_damm: and tell me what version of erlang you got
[2012-03-06 21:23:00 -0500] hoover_damm: term_to_binary(lists:foldl(fun(E,A) -> [E, A] end, [], lists:seq(1, 100000))). 
[2012-03-06 21:23:00 -0500] hoover_damm: run that in erl
[2012-03-06 21:23:00 -0500] hoover_damm: if that crashes
[2012-03-06 21:24:00 -0500] hoover_damm: (update erlang see https://issues.apache.org/jira/browse/COUCHDB-275)
[2012-03-06 21:25:00 -0500] hoover_damm: usually when compaction breaks down it's due to erlang... and if you run ubuntu you can now apt-get update and get an update
[2012-03-06 21:25:00 -0500] hoover_damm: as I filed a bug back in 2009 that that got addressed
[2012-03-06 21:25:00 -0500] hoover_damm: https://bugs.launchpad.net/bugs/434870
[2012-03-06 21:25:00 -0500] hoover_damm: timely responses :)
[2012-03-06 21:25:00 -0500] hippiehacker: https://gist.github.com/1989057
[2012-03-06 21:26:00 -0500] hippiehacker: Erlang R14B03 (erts-5.8.4) [source] [64-bit] [smp:2:2] [rq:2] [async-threads:0] [kernel-poll:false]
[2012-03-06 21:27:00 -0500] hippiehacker: the erl doesn't crash with that code
[2012-03-06 21:27:00 -0500] hoover_damm: cool so it's not erlang
[2012-03-06 21:27:00 -0500] hoover_damm: so i'd say try and replicate your data
[2012-03-06 21:27:00 -0500] hoover_damm: that should work
[2012-03-06 21:28:00 -0500] hoover_damm: that or use couchdb-dump and load
[2012-03-06 21:30:00 -0500] jdeamattson: Would someone be willing to take a look at a recipe and tell me if I am on the right track in how I am approaching things? https://gist.github.com/1989079?
[2012-03-06 21:31:00 -0500] jdeamattson: This is more of the "design review" level, but code level comments are appreciated....
[2012-03-06 21:31:00 -0500] jdeamattson: This is more of the "design review" level, but code level comments are appreciated.
[2012-03-06 21:32:00 -0500] jdeamattson: jtimberman: What would you think of a "Chef Cookbook" (that term is overloaded in this context) that would show a range of common tasks and how to approach them?
[2012-03-06 21:32:00 -0500] hoover_damm: wow github's 500'ing for me
[2012-03-06 21:32:00 -0500] hoover_damm: how sweet is that
[2012-03-06 21:33:00 -0500] jdeamattson: jtimberman: Would pull in the examples, expand, and review them and organizing them topically.
[2012-03-06 21:35:00 -0500] AntonZ: does anyone know of an alternative to runit only for centos ?
[2012-03-06 21:37:00 -0500] hoover_damm: github's back up
[2012-03-06 21:37:00 -0500] hoover_damm: AntonZ, you don't like runit?
[2012-03-06 21:38:00 -0500] AntonZ: i love run it, i cant finish installing jira because runit doesnt run/install on centos
[2012-03-06 21:40:00 -0500] hoover_damm: AntonZ, you may need to find it in another repo..
[2012-03-06 21:40:00 -0500] hoover_damm: I thought epel added it already
[2012-03-06 21:40:00 -0500] AntonZ: i cant find it ANYWHERE
[2012-03-06 21:41:00 -0500] hoover_damm: you know i'm a dick, I think I deleted it
[2012-03-06 21:41:00 -0500] hoover_damm: well out of my nginx config
[2012-03-06 21:41:00 -0500] AntonZ: :))))
[2012-03-06 21:41:00 -0500] jtimberman: the only built runit rpm out there is one i found in pbone
[2012-03-06 21:41:00 -0500] jtimberman: and i haven't tested it.
[2012-03-06 21:42:00 -0500] jtimberman: i think imeyer had one, or a specfile for one.
[2012-03-06 21:42:00 -0500] hoover_damm: AntonZ, https://github.com/imeyer/runit-rpm
[2012-03-06 21:42:00 -0500] AntonZ: jtimberman, by the way - im using your jira cookbook :D
[2012-03-06 21:42:00 -0500] hoover_damm: jtimberman, yes I wrote one.. then Ian took it and pushed it further
[2012-03-06 21:42:00 -0500] jtimberman: https://github.com/imeyer/runit-rpm
[2012-03-06 21:42:00 -0500] hoover_damm: hense I was a dick for removing the /runit from likens.us
[2012-03-06 21:42:00 -0500] hoover_damm: yes my runit rpms 100% work with the exception of there is no startup automation
[2012-03-06 21:43:00 -0500] hoover_damm: that runit rpm should work completely
[2012-03-06 21:43:00 -0500] AntonZ: hoover_damn, there is a problem with taht rpm - buildsys-macros - that package avaiable only for redhat
[2012-03-06 21:43:00 -0500] hoover_damm: so consider imeyer's rpm spec authoratative
[2012-03-06 21:43:00 -0500] sivy: jtimberman: "INFO: Creating virtualenv python_virtualenv[/var/pushcode/pushcode/virtual] at /var/pushcode/pushcode/virtual" but no virtualenv is created, and no error. thoughts?
[2012-03-06 21:43:00 -0500] hoover_damm: AntonZ, yeah they're old macros
[2012-03-06 21:43:00 -0500] hoover_damm: AntonZ, redhat 5
[2012-03-06 21:44:00 -0500] hoover_damm: AntonZ, your on centos6 no?
[2012-03-06 21:44:00 -0500] AntonZ: im on centos 5.7
[2012-03-06 21:44:00 -0500] jtimberman: sivy: don't know python/pip/virtualenv well enough to offer an opinion.
[2012-03-06 21:44:00 -0500] hoover_damm: hrm did they upgrade macros between 5.4 and 5.7?
[2012-03-06 21:44:00 -0500] sivy: jtimberman: ok, thanks
[2012-03-06 21:44:00 -0500] sivy: floor, even
[2012-03-06 21:44:00 -0500] hoover_damm: basically I don't have any centos's boxes, I can tell you those are the bomb.
[2012-03-06 21:44:00 -0500] hoover_damm: as I used them for years
[2012-03-06 21:44:00 -0500] sivy: anyone familiar with python_virtualenv ?
[2012-03-06 21:45:00 -0500] AntonZ: well, the simple fact that yum simply doesnt know about that package
[2012-03-06 21:45:00 -0500] hoover_damm: I can't help that
[2012-03-06 21:45:00 -0500] hoover_damm: you are free to build the package yourself or fork the repo and fix the spec
[2012-03-06 21:45:00 -0500] AntonZ: i hear you - thus my question, how could i replace runit in jira cookbook withsomething that works with centos :D
[2012-03-06 21:45:00 -0500] hoover_damm: build the rpm, ship the rpm, install it, then use it.
[2012-03-06 21:46:00 -0500] hoover_damm: honestly runit works via source even with centos
[2012-03-06 21:46:00 -0500] hippiehacker: looks like even after adding more space to /var/lib/couchdb (I ran out of space) the couchdb is still corrupt
[2012-03-06 21:46:00 -0500] hoover_damm: it's just the babystep of runsvdir
[2012-03-06 21:46:00 -0500] hoover_damm: hippiehacker, any chance you can dump your data and recreate it on a new db?
[2012-03-06 21:47:00 -0500] hoover_damm: although not all data is in memory
[2012-03-06 21:47:00 -0500] hoover_damm: (afaik)
[2012-03-06 21:48:00 -0500] hippiehacker: I restarted couchdb, so I suspect the data isn't there
[2012-03-06 21:49:00 -0500] hoover_damm: right, try and use couchdb tools to dump it
[2012-03-06 21:49:00 -0500] hoover_damm: and see if you can get enough of your data
[2012-03-06 21:49:00 -0500] hoover_damm: and then just stop couchdb, nuke the files, start it, re-create, re-load
[2012-03-06 21:49:00 -0500] hoover_damm: and call it done
[2012-03-06 21:49:00 -0500] hoover_damm: if you > to a file it'll dump a mime file
[2012-03-06 21:50:00 -0500] hoover_damm: so it'll be fairly easy to check it out and correct minor issues fairly easily
[2012-03-06 21:51:00 -0500] hoover_damm: 73 packages to go... before I have a new AMI base :)
[2012-03-06 21:51:00 -0500] hoover_damm: feels good to have ruby 1.9.3 from my distro
[2012-03-06 21:53:00 -0500] geekbri: jtimberman: This is the exact issue I was trying to describe earlier today, but written out much better by somebody else   http://community.opscode.com/questions/77
[2012-03-06 21:54:00 -0500] williamcotton: hey, so if I do: knife node show SOMENODE, it shows a bunch of things in the Run List how do I clear that Run List?
[2012-03-06 21:55:00 -0500] corp: williamcotton: knife node run_list remove [NODE] [ENTRY] (options)
[2012-03-06 21:55:00 -0500] williamcotton: I can't just remove everything?
[2012-03-06 21:55:00 -0500] williamcotton: I don't know how this happened
[2012-03-06 21:56:00 -0500] williamcotton: but it looks like this: Run List:    recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe[recipe|getting-started]]]]]]]]]]], recipe[getting-started]
[2012-03-06 21:56:00 -0500] corp: may be able to edit the node and clear the run list
[2012-03-06 21:56:00 -0500] corp: wow. nice
[2012-03-06 21:56:00 -0500] williamcotton: and I can't seem to remove that crazy nested recipe thing
[2012-03-06 21:56:00 -0500] williamcotton: I was following what I think was an older screencast
[2012-03-06 21:57:00 -0500] williamcotton: which told me to: knife node run_list add SOMENODE 'recipe|getting-started]'
[2012-03-06 21:57:00 -0500] williamcotton: which resulted in: Run List is [recipe[recipe[recipe[recipe[recipe|getting-started]]]]]]
[2012-03-06 21:57:00 -0500] corp: you can do knife node edit nodename
[2012-03-06 21:57:00 -0500] williamcotton: ah, ok
[2012-03-06 21:57:00 -0500] corp: and edit the json for the runlist
[2012-03-06 21:58:00 -0500] williamcotton: sweet
[2012-03-06 21:58:00 -0500] corp: the pipe is wrong there (should be [ )
[2012-03-06 21:58:00 -0500] corp: but weird that it did that
[2012-03-06 21:58:00 -0500] williamcotton: hah, yeah
[2012-03-06 21:58:00 -0500] williamcotton: well great, this cleaned things up and it worked fine! thanks!
[2012-03-06 22:00:00 -0500] corp: no problem
[2012-03-06 22:01:00 -0500] AntonZ: hoover_damm - is that source pkg for runit http://smarden.org/runit/install.html ?
[2012-03-06 22:02:00 -0500] hoover_damm: AntonZ, that path has the package that is used to be installed
[2012-03-06 22:02:00 -0500] hoover_damm: correct
[2012-03-06 22:03:00 -0500] AntonZ: im going to download it now, but the first time i looked it didnt even had any configure options
[2012-03-06 22:04:00 -0500] jtimberman: williamcotton: what is your command shell?
[2012-03-06 22:04:00 -0500] hoover_damm: it doesn't
[2012-03-06 22:04:00 -0500] hoover_damm: package/install compiles it and installs it
[2012-03-06 22:04:00 -0500] hoover_damm: heh
[2012-03-06 22:04:00 -0500] miah: moin
[2012-03-06 22:04:00 -0500] AntonZ: oh
[2012-03-06 22:04:00 -0500] AntonZ: morning miah
[2012-03-06 22:06:00 -0500] Brad_K: morning?  where are we?  tokyo?  sydney?  i'm confused.
[2012-03-06 22:06:00 -0500] miah: i didnt say anything about morning
[2012-03-06 22:06:00 -0500] williamcotton: jtimerberman, bash
[2012-03-06 22:06:00 -0500] hoover_damm: AntonZ, fwiw you can either install runit or you can just replace runit with bluepill or god
[2012-03-06 22:06:00 -0500] williamcotton: er, jtimberman
[2012-03-06 22:06:00 -0500] hoover_damm: or whatever
[2012-03-06 22:06:00 -0500] c_t: Brad_K: http://vulcanstev.files.wordpress.com/2010/09/mash-signpost01.jpg
[2012-03-06 22:06:00 -0500] hoover_damm: moin miah
[2012-03-06 22:07:00 -0500] miah: moin == good day
[2012-03-06 22:07:00 -0500] miah: http://en.wikipedia.org/wiki/Moin
[2012-03-06 22:07:00 -0500] c_t: "monk" maybe
[2012-03-06 22:07:00 -0500] williamcotton: $ bash --version
[2012-03-06 22:07:00 -0500] williamcotton: GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)
[2012-03-06 22:07:00 -0500] williamcotton: Copyright (C) 2007 Free Software Foundation, Inc.
[2012-03-06 22:07:00 -0500] hoover_damm: http://www.urbandictionary.com/define.php?term=moin
[2012-03-06 22:07:00 -0500] williamcotton: to be exact ;)
[2012-03-06 22:07:00 -0500] hoover_damm: you'll find that to actually be SFW
[2012-03-06 22:07:00 -0500] hoover_damm: miah, hello 
[2012-03-06 22:07:00 -0500] hoover_damm: but close enough
[2012-03-06 22:08:00 -0500] AntonZ: moin sounds like morning
[2012-03-06 22:08:00 -0500] hoover_damm: that's at least how I view it... irc has broken my english into this global mixup of slangs
[2012-03-06 22:09:00 -0500] hoover_damm: from all over the world
[2012-03-06 22:09:00 -0500] Brad_K: i know of many different connotations and denotations for moin.  there are at least two or three different German interpretations, depending on what part of Germany you're talking about.  then there are the Dutch and Flemish interpretations, and of course the Belgian and the French.  Oh, and all the various dialects, too.  I don't know if Frisian has a version of moin, however.  not that I know Frisian, but I do know that it's the second official langua
[2012-03-06 22:09:00 -0500] miah: hoover_damm: ya ditto.
[2012-03-06 22:09:00 -0500] AntonZ: hoover_damm, ill try that, i will have to modifiyjira cookbook, probably beyond my knowledge
[2012-03-06 22:10:00 -0500] hoover_damm: AntonZ, *nod* that or hire someone to fixup the rpm for you
[2012-03-06 22:10:00 -0500] hoover_damm: so it's obvious my care for rpm based distros is 0 still.
[2012-03-06 22:11:00 -0500] AntonZ: what is it a hint hint to hire you lol ?
[2012-03-06 22:11:00 -0500] miah: i hate dealing with rpm's
[2012-03-06 22:11:00 -0500] miah: its one of those technologies that just needs to be redesigned
[2012-03-06 22:11:00 -0500] Brad_K: with fpm, they're not so bad.
[2012-03-06 22:12:00 -0500] miah: no, its still bad. you're just more likely to not know wtf is breaking
[2012-03-06 22:12:00 -0500] Brad_K: i wouldn't mess with rpms any other way.  for that matter, i don't think i'd mess around with any other binary package format in any other way.
[2012-03-06 22:12:00 -0500] hoover_damm: AntonZ, nope it wasn't
[2012-03-06 22:13:00 -0500] hoover_damm: AntonZ, I don't think you can afford the rate I charge for working on el5
[2012-03-06 22:13:00 -0500] miah: dpkg and pacman are decent
[2012-03-06 22:14:00 -0500] Brad_K: hoover_damm: double it.  ;-)
[2012-03-06 22:14:00 -0500] hoover_damm: Brad_K, Nah i'm an honest man.  It would take me roughly 4hours from beginning to end to have it working tested.
[2012-03-06 22:14:00 -0500] AntonZ: im not trying to mess with rpm, im installing jira cookbook, which doesnt isntall runit package on centos, so the suggeestion was to create my own rpm and run it that way
[2012-03-06 22:14:00 -0500] hoover_damm: as it's been enough time since i've had to touch el5 it's a bootup ... setup .. re-figure it out
[2012-03-06 22:15:00 -0500] hoover_damm: that or just convert all the runit stuff to bluepill
[2012-03-06 22:15:00 -0500] hoover_damm: bluepill has a nice lwrp
[2012-03-06 22:15:00 -0500] hoover_damm: should convert over cleanly
[2012-03-06 22:15:00 -0500] AntonZ: by convert, what do you mean ?
[2012-03-06 22:15:00 -0500] hoover_damm: runit_service "jira" do
[2012-03-06 22:15:00 -0500] AntonZ: just replace everything runit related to bluepill cookbook ?
[2012-03-06 22:15:00 -0500] hoover_damm: to bluepill_service "jira" do
[2012-03-06 22:15:00 -0500] Brad_K: actually, i was thinking about double the rate.  the "rule of three" covers the amount of time in question  take whatever amount of time you honestly think it would take, and then triple that.  the reason is that there are always problems that crop up that you could never anticipate, and you need coverage for those.  so, double the rate and triple the time estimate.  ;-)
[2012-03-06 22:15:00 -0500] hoover_damm: and then match the parameters so it'd work
[2012-03-06 22:15:00 -0500] AntonZ: let me check it out
[2012-03-06 22:16:00 -0500] Brad_K: hoover_damm: and even then, you'd still be a hell of a lot cheaper than most lawyers.  ;-(
[2012-03-06 22:17:00 -0500] hoover_damm: Brad_K, I just want to live comfortably.  No desire to be super rich
[2012-03-06 22:17:00 -0500] hoover_damm: just have enough that I don't have to sweat at night and a nice job with cool folks to work with
[2012-03-06 22:17:00 -0500] Brad_K: my wife doesn't want to be super-rich, either.  that's part of why she charges a lot less than most lawyers.
[2012-03-06 22:17:00 -0500] hoover_damm: not too much to ask for.
[2012-03-06 22:18:00 -0500] hoover_damm: and right now i'm actually around 2.5x charging
[2012-03-06 22:18:00 -0500] hoover_damm: my cost of living is just higher then it should be atm
[2012-03-06 22:18:00 -0500] AntonZ: ha, runit installed just fine from the source
[2012-03-06 22:20:00 -0500] hoover_damm: now all you need to do is runsvcdir /etc/service
[2012-03-06 22:20:00 -0500] hoover_damm: that's how the ubuntu setup does it at least
[2012-03-06 22:21:00 -0500] hoover_damm: that last command tells runit to scan /etc/service (directory) for all the children directories
[2012-03-06 22:21:00 -0500] hoover_damm: and do your job
[2012-03-06 22:21:00 -0500] AntonZ: i need to intergrate this whole thing with cookbook, so ill go mess round with bluepill
[2012-03-06 22:21:00 -0500] hoover_damm: yep
[2012-03-06 22:36:00 -0500] hippiehacker: hoover_damm: I got couch back online, now to turn on compaction
[2012-03-06 22:36:00 -0500] hippiehacker: (auto-compaction, or schedule it regularly)
[2012-03-06 22:39:00 -0500] miah: just run the chef-server cookbook against the chef-server
[2012-03-06 22:39:00 -0500] miah: the default cookbook runs compaction
[2012-03-06 22:40:00 -0500] hippiehacker: miah: is that cookbook safe to run against a chef-server I didn't setup 8)
[2012-03-06 22:41:00 -0500] hippiehacker: I suspect I just need to pull out the autocompaction parts, or put something in cron
[2012-03-06 22:42:00 -0500] miah: read the code, make that decision for yourself
[2012-03-06 22:42:00 -0500] miah: but overall, the chef-server cookbook = super basic and does almost nothing with chef-server
[2012-03-06 22:42:00 -0500] hippiehacker: "The chef-server::default recipe will work on any platform running the Chef Server, as it only compacts the CouchDB / views." cool
[2012-03-06 22:44:00 -0500] maek: if I want to use the ruby dls for environments but I  want one of the mash keys to be a string and not a symbol is that possible?
[2012-03-06 22:55:00 -0500] AntonZ: so this is part of the jira coookbook recipe - runit_service "jira" - what does it do ?
[2012-03-06 23:26:00 -0500] hoover_damm: hippiehacker, it's just a curl.
[2012-03-06 23:26:00 -0500] hoover_damm: hippiehacker, but yeah compaction is good :)
[2012-03-06 23:39:00 -0500] AntonZ: im really curious about that jira cookbook on opscode site... it tries to start jira, but before you can do that, DB has to be created adn all that
[2012-03-06 23:39:00 -0500] AntonZ: ah it installs local db looks like
[2012-03-06 23:48:00 -0500] till_: is there a resource to work with apache mirrors so i don't end up hard-coding them into my recipes?
[2012-03-06 23:48:00 -0500] till_: resource or elegant piece of code
[2012-03-06 23:48:00 -0500] sivy: till_: top of my head, you could store them in databag
[2012-03-06 23:48:00 -0500] sivy: data bags
[2012-03-06 23:50:00 -0500] sivy: and pull them in from there in the recipe
[2012-03-06 23:51:00 -0500] till_: sivy: i'm inclined to put 'something' default in my attributes
[2012-03-06 23:51:00 -0500] till_: but i'm not sure yet what a good default is
[2012-03-06 23:53:00 -0500] hoover_damm: mirror should really be an attribute
[2012-03-06 23:53:00 -0500] hoover_damm: and then you can set.unless it
[2012-03-06 23:53:00 -0500] lflux: ohai
[2012-03-06 23:53:00 -0500] hoover_damm: then it's override on node/role/..
[2012-03-06 23:54:00 -0500] lflux: if I have an execute resource with an only_if, and a ruby_block subscribing to it
[2012-03-06 23:54:00 -0500] lflux: why is the ruby_block run even if the execute isn't run
[2012-03-06 23:54:00 -0500] lflux: due to the only_if
[2012-03-06 23:54:00 -0500] hoover_damm: ruby_block always runs
[2012-03-06 23:54:00 -0500] hoover_damm: afaik
[2012-03-06 23:54:00 -0500] lflux: even with action :nothing ?
[2012-03-06 23:54:00 -0500] thehar: jtimberman: what is your suggestion for getting actual stuff into MySQL. (esp. populating templates)
[2012-03-06 23:55:00 -0500] thehar: i was thinking a .sql schema and use file + execute against that
[2012-03-06 23:55:00 -0500] lflux: thehar: I do that for postgresql. not sure if optimal, but it's what the shell script I'm replacing does
[2012-03-06 23:55:00 -0500] thehar: wondering what is most done, yeah

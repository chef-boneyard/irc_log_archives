[2012-03-18 11:07:00 -0400] BryanWB_: ohai chefs!
[2012-03-18 16:09:00 -0400] tightwork: I'm using knife rackspace, vms are created and bootstrapped although /etc/chef/client.pem is not created so the node never checks in. What can I do?
[2012-03-18 16:24:00 -0400] df11: tightwork: need some log info to assist.
[2012-03-18 16:30:00 -0400] tightwork: df11: http://dpaste.com/718271/
[2012-03-18 16:31:00 -0400] tightwork: df11: I'm using opscode so I dont think I can get anything server side..
[2012-03-18 16:31:00 -0400] df11: ah, sorry, run my own infrastrtucture, not familiar with their infrastrtructure
[2012-03-18 16:31:00 -0400] df11: validation key you use is named, "sgh-validator" ?
[2012-03-18 16:31:00 -0400] df11: "Unauthorized" seems to indicate a bad validation key or name.
[2012-03-18 16:32:00 -0400] tightwork: yeah and in knife.rb on my client I have validation_key           "#{current_dir}/sgh-validator.pem"
[2012-03-18 16:32:00 -0400] df11: and on the instance you have confirmed the key is present and a diff on the key there vs. local is the same?
[2012-03-18 16:33:00 -0400] tightwork: I created the instance with knife rackspace server create ... It should have copied over the correct key :-|
[2012-03-18 16:34:00 -0400] df11: depends on your bootstrap template...
[2012-03-18 16:34:00 -0400] tightwork: only have one specified.. I just commented out my node_name and client_key, leaving just validation_client_name and validation_key, auth with just the validator.. I can knife rackspace server list, so they key should be good.
[2012-03-18 16:37:00 -0400] df11: i would hop on the instance and check.
[2012-03-18 18:27:00 -0400] df11: Is there a method to check if an override attribute is set, not just an attribute?  Something like node.myitem.override_attribute?("myattribute")
[2012-03-18 18:31:00 -0400] |shad0w|: i think it would be node.override.attribute?()
[2012-03-18 18:35:00 -0400] df11: |shad0w|: and to check a sub-key ?
[2012-03-18 18:36:00 -0400] df11: this doesn't seem to work: node.myitem.override.attribute?("myattribute")
[2012-03-18 18:36:00 -0400] |shad0w|: myitem would be under override
[2012-03-18 18:37:00 -0400] |shad0w|: node.override.attribute?('myitem') && node.override['myimtem'].attribute?('myattribute')
[2012-03-18 18:37:00 -0400] |shad0w|: maybe
[2012-03-18 19:38:00 -0400] df11: node.override.attribute?("key") returns true if something is a default attribute and not an override attribute, am i missing something?
[2012-03-18 19:39:00 -0400] hippiehacker: any way to turn on logging = :debug in winrm? https://github.com/zenchild/WinRM/blob/master/lib/winrm.rb#L24 without editing the code?
[2012-03-18 19:42:00 -0400] hippiehacker: trying to debug http://tickets.opscode.com/browse/KNIFE_WINDOWS-23
[2012-03-18 19:44:00 -0400] |shad0w|: df11, give me a few to setup a test
[2012-03-18 19:44:00 -0400] df11: |shad0w|: thanks
[2012-03-18 19:53:00 -0400] pilt: Hi! CloudInit runs "chef-client -d -i 1800 -s 20" and there's no way to configure it. Is it safe to run "chef-client --once" e.g. for continuous deployment besides this process or should you kill it before?
[2012-03-18 19:56:00 -0400] |shad0w|: df11, still digging through the code, but how about using override_attrs instead of override
[2012-03-18 20:11:00 -0400] df11: |shad0w|: how to invoke?  node.override_attrs['myitem'] ?
[2012-03-18 20:11:00 -0400] |shad0w|: didn't try
[2012-03-18 20:11:00 -0400] |shad0w|: but that should work
[2012-03-18 20:11:00 -0400] |shad0w|: btw, what problem are you trying to solve?
[2012-03-18 20:11:00 -0400] df11: getting nil when one exists
[2012-03-18 20:12:00 -0400] |shad0w|: might not be a method, node['override_attrs'] maybe
[2012-03-18 20:12:00 -0400] df11: great question, sorry, should have started out with that: i have a couple default attributes that are null that if that have overrides i want to perform a different task in a recipe.  so, just an if (is this attribute overriden and not default null) then do some stuff.
[2012-03-18 20:13:00 -0400] hoover_damm: df11, typically i'd do node.default["bob"]=String.new
[2012-03-18 20:13:00 -0400] hoover_damm: df11, then in the recipe I would actually check via the methodology of
[2012-03-18 20:14:00 -0400] hoover_damm: df11, if node['bob'].exists? if node['bob'].empty?
[2012-03-18 20:14:00 -0400] hoover_damm: df11, if it's a empty string you can assume it's your default behavior
[2012-03-18 20:14:00 -0400] hoover_damm: then if you want to be so daring you can even make chef eval the override and run it that way (like in the python recipe)
[2012-03-18 20:16:00 -0400] df11: hoover_damm: okay, makes sense.  i was just thinking that it is a bit cleaner to set to null as default and then check the override.  but, i could do it that way too.
[2012-03-18 20:17:00 -0400] hoover_damm: usually for null behavior I do if node['key'].exists? if node['key'].empty? if node['key'].null? 
[2012-03-18 20:18:00 -0400] hoover_damm: doesn't trip me up so much as I use emacs primarily now so unless i'm drunk or just totally not getting it
[2012-03-18 20:18:00 -0400] hoover_damm: which is sadly the #1 reason I don't go to most devops / meetups
[2012-03-18 20:19:00 -0400] hoover_damm: that and so darned late
[2012-03-18 20:21:00 -0400] hoover_damm: df11, basically in my habbits null is an unexpected behavior.  
[2012-03-18 20:21:00 -0400] hoover_damm: you don't have to agree or apply
[2012-03-18 20:22:00 -0400] df11: hoover_damm: understood, makes sense.
[2012-03-18 20:22:00 -0400] df11: (both the example and the logic for devops/meetups)  :-)
[2012-03-18 20:23:00 -0400] hoover_damm: df11, likely a better example of how I prefer to do things is my graphite cookbook.. in how I did the schema
[2012-03-18 20:23:00 -0400] |shad0w|: usually if I'm operating on a node attribute I don't care how it was set, if you want different behavior why not use a different attrib?
[2012-03-18 20:24:00 -0400] hoover_damm: err perhaps not... now on second thought
[2012-03-18 20:25:00 -0400] hoover_damm: df11, what kind of behavior are you trying to trigger/stop?
[2012-03-18 20:26:00 -0400] df11: an encrypted db load, only needed if an attribute is set.
[2012-03-18 20:27:00 -0400] hoover_damm: if node['database']['encrypted'].exists? if node['database']['encrypted'].empty? 
[2012-03-18 20:27:00 -0400] hoover_damm: if you want to be lazy def encrypted?
[2012-03-18 20:27:00 -0400] hoover_damm: and then ou can just eval it that way in your recipes
[2012-03-18 20:28:00 -0400] hoover_damm: if your aiming for clarity for other people sometimes that's a good route
[2012-03-18 20:28:00 -0400] hippiehacker: if I just want to write a script that uses the chef DSL to say, search for a few nodes via knife search, and execute some commands (knife winrm is failing, I need to write some chef/dsl ruby) what's the best way to go about that?
[2012-03-18 20:35:00 -0400] cwj: hippiehacker: this might be relevant to your interests http://arzur.net/2010/10/31/scripting-with-chef/
[2012-03-18 20:35:00 -0400] cwj: although the example is really verbose
[2012-03-18 20:36:00 -0400] hippiehacker: cwj: thanks
[2012-03-18 21:11:00 -0400] fujin: hippiehacker: you can use the Knife classes directly in little app too
[2012-03-18 21:12:00 -0400] fujin: hippiehacker: the mixins that provide the dsl functionality are mostly separate too so you can pretty easily get access to the search that a recipe would use
[2012-03-18 21:37:00 -0400] hippiehacker: knife client list, shows a client, as does the webui, however attempting to delete from the webui or knife results in https://gist.github.com/2081771
[2012-03-18 21:37:00 -0400] hippiehacker: 404 it doesn't exist.. even though it does
[2012-03-18 21:37:00 -0400] hippiehacker: sorty
[2012-03-18 21:39:00 -0400] hippiehacker: fujin: thanks, I ended up using a knife exec script, but I'd kinda like those to stand alone. I'll look at the knife class and mixins.
[2012-03-18 21:47:00 -0400] hippiehacker: may have something to do with me having two clients, with same name, but different case

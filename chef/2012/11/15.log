[2012-11-15 00:14:19 -0500] lyric: i have an override attr in a role that is not getting set in a template, it is using the evn one
[2012-11-15 00:14:41 -0500] lyric: is there a way to explore the data with shef
[2012-11-15 00:14:59 -0500] lyric: or better way to debug
[2012-11-15 00:16:10 -0500] bmcgee: I can't remember who sent me this link http://vialstudios.com/guide-authoring-cookbooks.html, but thank you A LOT. My chef fu is much stronger as a result
[2012-11-15 00:16:22 -0500] bluepojo: yw :)
[2012-11-15 00:18:10 -0500] bmcgee: a ha, it was you!
[2012-11-15 00:18:13 -0500] bmcgee: cheers dude
[2012-11-15 00:18:14 -0500] rava: with the %{}.each syntax, there a way to specify package versions?
[2012-11-15 00:18:57 -0500] bmcgee: for a product with a helluva lot of documentation, I was finding it pretty hard to pick up the basics.
[2012-11-15 00:19:13 -0500] JasonF: rava: you could make a hash of packages and versions you wanted to install, and iterate over that instead of using just an array
[2012-11-15 00:19:21 -0500] r5|ryan: I guess you could use a hash instead of an array with version keys
[2012-11-15 00:19:29 -0500] r5|ryan: what he said
[2012-11-15 00:20:48 -0500] rava: thanks, though im a dunce. just ahd to look in the wiki again for an example of what i wanted
[2012-11-15 00:21:36 -0500] bluepojo: the thing about chef: it's not a piece of software, really it's a collection of primatives that you can use to build your own deployment system.
[2012-11-15 00:21:45 -0500] bluepojo: so if you approach it like "I need to learn chef" you might get lost.
[2012-11-15 00:22:07 -0500] bluepojo: if you approach it like "I need to deploy my software oh look, chef has some nice things to help me out" then it's a bit more understandable
[2012-11-15 00:22:17 -0500] bluepojo: you have to understand deployment first
[2012-11-15 00:22:38 -0500] bmcgee: yeah, all i needed was a good example.
[2012-11-15 00:22:43 -0500] bluepojo: and then you start seeing where the primitives  fit.
[2012-11-15 00:26:45 -0500] lyric: rava: one thing i have found helpful is having a package installer recipe that you can include in roles and hand it the list of packages
[2012-11-15 00:27:47 -0500] rava: lyric: yeah, i was debating doing that, but these are dependencies. i don't expect the list to change much
[2012-11-15 00:28:31 -0500] lyric: ah, yes, sucks to clutter the role if you don't have to
[2012-11-15 00:40:27 -0500] cloud_admin: Hi everyone. Very new to chef. In my learnings I've noticed a few cookbooks don't seem to support Amazon linux, though they say they do (MySQL, PHP). They don't seem to recognize Amazon, so instead of running code snippets for the RHEL family, it runs other default snippets, which are not compatible with amazon linux
[2012-11-15 00:40:51 -0500] cloud_admin: Has anyone else had similar trouble
[2012-11-15 00:41:24 -0500] erikh: fork the projects, find the redhat bits, add 'amazon' to the platform checks
[2012-11-15 00:41:28 -0500] erikh: submit pull requests
[2012-11-15 00:42:20 -0500] cloud_admin: Yea, that's what I was thinking too.  Seems like the Chef world loves Ubuntu, but unfortunately, we only use Amazon linux where I'm at. I think I'm going to have to add support for quite a few cookbooks
[2012-11-15 00:42:58 -0500] bluepojo: just make sure you submit pull requests
[2012-11-15 00:43:05 -0500] bluepojo: so the next guy doesn't have the same problem
[2012-11-15 00:43:06 -0500] bluepojo: :D
[2012-11-15 00:43:22 -0500] cloud_admin: Agreed
[2012-11-15 00:44:24 -0500] miah: or change the platform checks to use platform_family and then make sure it just says 'rhel'
[2012-11-15 00:45:51 -0500] miah: cloud_admin: www.opscode.com/blog/2012/03/22/ohai-0-6-12-released/
[2012-11-15 00:45:52 -0500] rava: how can i force the server to reindex cookbooks that it has stored? i pushed a revision bumped cookbook and the old revision is still showing everywhere
[2012-11-15 00:46:49 -0500] ssd7: rava: reindexing has to do with search.  I'm guessing that isn't want the problem is.  Does the new revision show up if you do `knife cookbook show COOKBOOK_NAME`
[2012-11-15 00:47:14 -0500] miah: is your environment locking you to a older version
[2012-11-15 00:47:30 -0500] rava: no, the local testing env doesn't have version constraints
[2012-11-15 00:47:39 -0500] rava: i've pushed with and without the -E flag
[2012-11-15 00:47:46 -0500] rava: it shows up in a knife cookbook show
[2012-11-15 00:48:01 -0500] rava: but going to the web ui shows the old version
[2012-11-15 00:48:15 -0500] rava: and the node trying to run it's recipes is puking because of a type that was in an old version of the cookbook
[2012-11-15 00:48:16 -0500] erikh: your environment has a specification of what versions of cookbooks it supports
[2012-11-15 00:48:23 -0500] erikh: has nothing to do with pushing with -E
[2012-11-15 00:48:33 -0500] rava: erikh: yeah, that's why i said there are no version constraints
[2012-11-15 00:49:15 -0500] rava: https://gist.github.com/4075916
[2012-11-15 00:49:37 -0500] erikh: what environment is the node you're having trouble with in?
[2012-11-15 00:50:07 -0500] rava: https://gist.github.com/4075920
[2012-11-15 00:50:20 -0500] erikh: also, is tha the file you have on disk or did you `knife environment show local` ?
[2012-11-15 00:50:37 -0500] rava: knife show
[2012-11-15 00:51:04 -0500] jtimberman: cloud_admin: any cookbooks that use platform_family with rhel as listed will support amazon
[2012-11-15 00:51:17 -0500] jtimberman: oh miah got to that :)
[2012-11-15 00:51:29 -0500] rava: i've tried deleting the cookbook cache folder on the node to force a redownload
[2012-11-15 00:51:40 -0500] erikh: rava: knife environment show local doesn't spit out json by default
[2012-11-15 00:51:50 -0500] erikh: not saying you're lying, but it makes me question if you actually ran that
[2012-11-15 00:52:23 -0500] cloud_admin: @jtimberman: great. The php cookbook is currently listing out each platform, so it sounds like using platform_family is definitely the way to go
[2012-11-15 00:52:26 -0500] rava: i was in the wrong buffer when i hit that, i just got the gist
[2012-11-15 00:52:55 -0500] rava: the dangers of editing, shelling, and irc'ing on emacs
[2012-11-15 00:52:56 -0500] rava: https://gist.github.com/4075929
[2012-11-15 00:53:02 -0500] cloud_admin: It doesn't look like there has been a whole lot of activity on the mysql cookbook for some time. I'll submit pull requests
[2012-11-15 00:53:09 -0500] rava: i just forced the constraint with spork to see if it fixed it
[2012-11-15 00:53:18 -0500] jtimberman: cloud_admin: we've been moving cookbooks over to use platform_family, haven't gotten to that one yet
[2012-11-15 00:53:21 -0500] rava: but no dice
[2012-11-15 00:53:24 -0500] ssd7: rava: what is the name of the cookbook in question?
[2012-11-15 00:53:48 -0500] rava: a cookbook i'm creating for a vendor who has something against packaging their product properly
[2012-11-15 00:53:52 -0500] jtimberman: its a nuanced problem, thoguh, because it actually should have a major version bump because it requires newer versions of ohai and chef that not everyone is using yet
[2012-11-15 00:54:28 -0500] erikh: jtimberman: I was wondering about that... do you guys have any metrics on the number of people using it?
[2012-11-15 00:55:11 -0500] rava: ah! found it!
[2012-11-15 00:55:47 -0500] erikh: chef y u index so slow
[2012-11-15 00:55:48 -0500] rava: a recipe i was referencing earlier in the chane still had the old package install listing
[2012-11-15 00:55:57 -0500] rava: ~chain
[2012-11-15 00:58:05 -0500] rava: i keep bouncing back and forth between using include_recipe and just specifying the recipe order in a role's run list specifically due to pebkacs llike this
[2012-11-15 00:58:40 -0500] bluepojo: You should use include_recipe.
[2012-11-15 00:58:50 -0500] bluepojo: The reason being that roles are not environment specific
[2012-11-15 00:59:03 -0500] bluepojo: so, lets say you have a new dependency for v2 of super_cool_app
[2012-11-15 00:59:08 -0500] bluepojo: you'll need to have a new role
[2012-11-15 00:59:11 -0500] rava: bluepojo: but you can specify environment run_lists
[2012-11-15 00:59:29 -0500] bluepojo: oh?
[2012-11-15 00:59:45 -0500] bluepojo: that's something I've not seen before, how does that work?
[2012-11-15 01:00:03 -0500] rava: http://wiki.opscode.com/display/chef/Roles#Roles-runlist
[2012-11-15 01:00:16 -0500] rava: chef 10+ feature
[2012-11-15 01:00:36 -0500] bluepojo: interesting
[2012-11-15 01:00:42 -0500] bluepojo: I suppose that solves that concern to a degree
[2012-11-15 01:01:04 -0500] bluepojo: thinking about it, however, I still advocate include_recipe.
[2012-11-15 01:01:11 -0500] bluepojo: Less chance of human failure
[2012-11-15 01:01:23 -0500] bluepojo: with include_recipe, you have 1 step to upgrade
[2012-11-15 01:01:29 -0500] bluepojo: "bump the version lock"
[2012-11-15 01:01:40 -0500] bluepojo: with run lists, you must bump the version lock and change the run list
[2012-11-15 01:01:41 -0500] rava: bluepojo: depending on the human. this one has found all sorts of amusing ways to break things using include_recipe
[2012-11-15 01:01:54 -0500] bluepojo: right, but that sort of thing can be discovered in testing
[2012-11-15 01:01:55 -0500] bluepojo: and fixed
[2012-11-15 01:02:05 -0500] bluepojo: lets say you miss the runlist step cause it's 2am deployment
[2012-11-15 01:02:09 -0500] bluepojo: boom, production goes down
[2012-11-15 01:02:22 -0500] bluepojo: fewer steps are better
[2012-11-15 01:02:25 -0500] bluepojo: imo
[2012-11-15 01:02:48 -0500] siezer: rava if it needs to be tightly coupled, use include_recipe. for example, nagios and its web frontend
[2012-11-15 01:02:59 -0500] erikh: of course, if you do that, you have to clean up your node meta manually everytime you remove a cookbook
[2012-11-15 01:03:06 -0500] erikh: a problem roles don't have
[2012-11-15 01:03:30 -0500] rava: erikh: precisely. and i control a lot through override attributes in roles, which led me to that line of thought in the first place
[2012-11-15 01:03:44 -0500] bluepojo: I never like roles as dependency lists
[2012-11-15 01:03:45 -0500] siezer: where to "loosely couple" with roles is a dark art... for example: something that depends on the EPEL repo. maybe you want to use your internal yum repo instead
[2012-11-15 01:03:55 -0500] bluepojo: I agree with siezer's line of thinking
[2012-11-15 01:04:06 -0500] bluepojo: however, in my current infrastructure, there are a total of 0 roles.
[2012-11-15 01:04:14 -0500] bluepojo: cause everything a role can do, a cookbook does as well or better.
[2012-11-15 01:04:31 -0500] siezer: you also have other tools ;)
[2012-11-15 01:04:58 -0500] bluepojo: roles were a nice thought, but in practice they're not any different than a cookbook
[2012-11-15 01:05:21 -0500] siezer: sometime you'll need a role to shiv in an attribute... you can implement a dynamic role as a cookbook if you want
[2012-11-15 01:05:29 -0500] siezer: roles == data ; cookbooks == code
[2012-11-15 01:05:40 -0500] rava: bluepojo: i'd disagree. roles do one thing really well imo, which is encapsulate meta data
[2012-11-15 01:05:59 -0500] rava: i'd rather not have all that crap in my cookbooks and recipes. feels like a step back
[2012-11-15 01:06:09 -0500] bluepojo: what data, specifically?
[2012-11-15 01:06:22 -0500] bluepojo: one example: you could use roles to specify db master / slave
[2012-11-15 01:06:34 -0500] bluepojo: or you could write a recipe[db:master] and recipe[db:slave]
[2012-11-15 01:07:05 -0500] bluepojo: even if all it does is node.set['db']['master'] = true
[2012-11-15 01:07:08 -0500] rava: i could, or just have one well defined default recipe in db, and use roles :)
[2012-11-15 01:07:14 -0500] bluepojo: and then include_recipe 'db'
[2012-11-15 01:07:37 -0500] bluepojo: thing is, they're no different except in your head
[2012-11-15 01:07:41 -0500] bluepojo: that's all I'm saying
[2012-11-15 01:07:47 -0500] bluepojo: and recipes can do more than roles
[2012-11-15 01:08:23 -0500] erikh: so when I have a bind slave and I want to convert it to a bind master
[2012-11-15 01:08:29 -0500] siezer: bluepjo: scenario: (typing)
[2012-11-15 01:08:31 -0500] erikh: and I want all the slaves to sync up with the master
[2012-11-15 01:08:40 -0500] erikh: how do I orchestrate that in a "role cookbook"
[2012-11-15 01:09:02 -0500] erikh: I presume what I should probably do is change out the cookbook in the run_list. what would those cookbooks look like?
[2012-11-15 01:09:19 -0500] bluepojo: how would you do it in roles?
[2012-11-15 01:09:30 -0500] bluepojo: the answer is probably the same in a cookbook
[2012-11-15 01:09:35 -0500] erikh: I'd set override_attributes and my bind cookbook in the run_list
[2012-11-15 01:09:38 -0500] erikh: no, it's not
[2012-11-15 01:09:48 -0500] erikh: it involves a buttload of node.set and node.delete
[2012-11-15 01:09:53 -0500] bluepojo: you can set attributes in a recipe
[2012-11-15 01:10:09 -0500] erikh: that's my point. I don't have to set attributes on the node at all in my role.
[2012-11-15 01:10:27 -0500] bluepojo: you just said you'd set override attributes
[2012-11-15 01:10:30 -0500] siezer: you're berk'ing and vagranting your infrastructure. you want to test all components, flattened onto one node. top level app cookbook includes lb.rb, webserver.rb, and database.rb. default ports clash, you fix with a node.set['apache']['listenport'] in default. problem solved.
[2012-11-15 01:10:40 -0500] siezer: but what happens when you want to also test nagios and munin?
[2012-11-15 01:10:51 -0500] siezer: they'd pick up the listen_ports you meant for webserver.rb
[2012-11-15 01:11:01 -0500] erikh: you guys know how override attributes work?
[2012-11-15 01:11:06 -0500] erikh: they're not default attributes.
[2012-11-15 01:11:07 -0500] siezer: so... you have 2 options: roles, or a "role cookbook"
[2012-11-15 01:11:30 -0500] bluepojo: erikh: you can set override attributes in a cookbook
[2012-11-15 01:11:35 -0500] bluepojo: not just default attributes
[2012-11-15 01:11:49 -0500] erikh: eh? node.default[:blah] = "foo"
[2012-11-15 01:11:52 -0500] siezer: so now you have cookbooks in your cookbook server (community site? chef-server?) that contain nothing but a node.set and one include_recipe
[2012-11-15 01:11:57 -0500] bluepojo: node.override[:blah] = 'foo'
[2012-11-15 01:12:26 -0500] erikh: missing the point. I never set anything on the node
[2012-11-15 01:12:39 -0500] erikh: I never have to worry about stale metadata confusing my recipes
[2012-11-15 01:12:45 -0500] erikh: or cleaning it up.
[2012-11-15 01:13:17 -0500] erikh: I mean, if you guys want to do it that way, great, but I'm a big fan of not doing work that the system does for me
[2012-11-15 01:13:17 -0500] bluepojo: cause I know you're a smart dude, I'll assume you have a good point I'm having trouble keeping what you're saying straight
[2012-11-15 01:13:32 -0500] siezer: abuse of roles leaves cookbooks mis-engineered, when they should totally be using include_recipe and metadata.rb, but they're still useful in some places and should not be completely disregarded
[2012-11-15 01:14:08 -0500] bluepojo: yeah, fair point, I also thought roles had a place till I realized I didn't have any real need for them.
[2012-11-15 01:14:13 -0500] bluepojo: and I just wasn't using them
[2012-11-15 01:14:25 -0500] bluepojo: we spin the entirety of PvP.net up on a single VM in vagrant for testing
[2012-11-15 01:14:27 -0500] bluepojo: and it all works fine
[2012-11-15 01:14:39 -0500] erikh: where do override_attribute go when you set them on a recipe?
[2012-11-15 01:14:46 -0500] siezer: yep. and you also have an environment factory and a motherbrain =) we dont
[2012-11-15 01:15:02 -0500] bluepojo: haha, neither of those are done yet.
[2012-11-15 01:15:08 -0500] bluepojo: they work, but they're not being used actively
[2012-11-15 01:15:13 -0500] bluepojo: soon
[2012-11-15 01:15:13 -0500] bluepojo: soon
[2012-11-15 01:15:17 -0500] bluepojo: (tm)
[2012-11-15 01:15:33 -0500] rava: i want a motherbrain..if only to tempt a visit from samus
[2012-11-15 01:15:38 -0500] rava: sure she might shoot me in the face
[2012-11-15 01:15:42 -0500] rava: but worth it
[2012-11-15 01:15:44 -0500] bluepojo: you can die happy
[2012-11-15 01:15:53 -0500] siezer: up up down down left left right right.... wait... wrong game
[2012-11-15 01:16:03 -0500] rava: or right game..if you know what i mean..
[2012-11-15 01:16:16 -0500] bluepojo: true story, one of the libraries motherbrain depends on is called ridley
[2012-11-15 01:16:25 -0500] bluepojo: there's no questioning the inspiration
[2012-11-15 01:16:27 -0500] bluepojo: XD
[2012-11-15 01:16:27 -0500] rava: heh, nice
[2012-11-15 01:16:35 -0500] bluepojo: another is chozo
[2012-11-15 01:16:39 -0500] bluepojo: another metroid reference
[2012-11-15 01:16:51 -0500] bluepojo: and this from a guy who complains about cute names for gems
[2012-11-15 01:17:15 -0500] erikh: half of chozo is already in rubygems
[2012-11-15 01:17:56 -0500] bluepojo: I haven't looked at it
[2012-11-15 01:18:03 -0500] rava: bluepojo: there's a difference between bad ass reference and cutesy
[2012-11-15 01:18:42 -0500] dvanstone: \q
[2012-11-15 01:18:48 -0500] siezer: speaking of... who's responsible for this whole "sparkly code princess" thing that keeps showing up in my twitter?
[2012-11-15 01:18:54 -0500] bluepojo: well, the complaint is usually "I can't google for `chef knife`
[2012-11-15 01:18:56 -0500] bluepojo: "
[2012-11-15 01:19:03 -0500] bluepojo: hah
[2012-11-15 01:19:18 -0500] rava: bluepojo: who ever can't do that has weak google fu
[2012-11-15 01:19:29 -0500] bluepojo: sure, the answer is `chef knife opscode`
[2012-11-15 01:19:30 -0500] bluepojo: or some such
[2012-11-15 01:22:53 -0500] bluepojo: siezer: I think I finally got your scenario straight. I set those values in chef.json {  } in the Vagrantfile
[2012-11-15 01:22:58 -0500] bluepojo: that's essentially an environment
[2012-11-15 01:23:07 -0500] bluepojo: so all the services pick it up
[2012-11-15 01:23:11 -0500] killfill: hi!
[2012-11-15 01:24:14 -0500] killfill: https://github.com/dcrosta/cookbook-simple-iptables/blob/master/recipes/default.rb#L57   <--- im doing include_recipe "simple_iptables" in my cookbook, but the reload command is not getting executed.
[2012-11-15 01:24:24 -0500] killfill: what am i doing wrong?
[2012-11-15 01:25:01 -0500] siezer: bluepojo nope.. you've got 3 components, each include_recipe'ing apache2 and using the same listen ports attribute
[2012-11-15 01:25:11 -0500] siezer: on one node
[2012-11-15 01:25:52 -0500] siezer: wait I guess there's really no way around that, roles or not
[2012-11-15 01:25:53 -0500] siezer: hrm
[2012-11-15 01:25:56 -0500] siezer: *scratches chin*
[2012-11-15 01:26:05 -0500] bluepojo: yeah, that's a puzzle
[2012-11-15 01:26:25 -0500] killfill: i see "Processing execute[reload-iptables] action nothing" and Processing template[/etc/sysconfig/iptables] action create", and nothing more.. :S
[2012-11-15 01:27:35 -0500] killfill: any tips welcome!.. :)
[2012-11-15 01:28:21 -0500] killfill: why is it not notifying the event?
[2012-11-15 01:58:08 -0500] jtimberman: erikh: platform_family metrics? no way of knowing that as far as i know.
[2012-11-15 01:58:26 -0500] jtimberman: oh - you mean versions of ohai/chef sufficient for that
[2012-11-15 01:58:31 -0500] erikh: yes
[2012-11-15 01:58:56 -0500] Glace: any eta on the CPU hog issue with chef-client on Windows?
[2012-11-15 03:03:59 -0500] bmcgee: can anyone help me with rbenv?
[2012-11-15 03:04:48 -0500] bmcgee: specifically using rbenv with application_ruby
[2012-11-15 03:04:56 -0500] bmcgee: having issues with the bundle install and migrations
[2012-11-15 03:22:48 -0500] sunil__: is there a way to use the application cookbook by defining all attributes at the role level and not creating an application_cookbook?
[2012-11-15 03:36:40 -0500] bemu: sunil__: I don't understand why you would want to do that.
[2012-11-15 03:36:47 -0500] mjreed: OK, I uploaded a new cookbook, seemingly successfully, but Chef dies with a "ERROR: The object you are looking for could not be found" when it tries to get any of the actual recipes back.
[2012-11-15 03:36:48 -0500] bemu: bmcgee: Same to you. Why are you using rbenv?
[2012-11-15 03:37:07 -0500] mjreed: any pointers for debugging?  This is private chef
[2012-11-15 03:37:08 -0500] bmcgee: seemed like thing to do?
[2012-11-15 03:37:17 -0500] bmcgee: i need 1.9.3 on there
[2012-11-15 03:37:24 -0500] bemu: I don't use it, and I don't know why someone would.
[2012-11-15 03:37:25 -0500] bemu: Just asking.
[2012-11-15 03:37:30 -0500] bmcgee: what do you use?
[2012-11-15 03:37:39 -0500] bemu: I either use omnibus or system ruby 1.9.3
[2012-11-15 03:37:57 -0500] bemu: I don't need multiple ruby versions per system -- that is counter intuitive to what I do with machines.
[2012-11-15 03:38:15 -0500] sunil__: @member:bemu I was thinking of dynamically launching new apps by creating various roles on the fly..
[2012-11-15 03:38:33 -0500] sunil__: I guess I can create recipes on the fly as well and tie them to a role..
[2012-11-15 03:38:39 -0500] bemu: sunil__: You could do that, but you still need a meta cookbook of some sort.
[2012-11-15 03:39:26 -0500] bemu: Something has to define your logic.
[2012-11-15 03:39:44 -0500] sunil__: now can I generate a recipe/cookbook programmatically?  I guess I probably can.
[2012-11-15 03:39:55 -0500] sunil__: it seems like almost all the attributes can go into a role.
[2012-11-15 03:39:56 -0500] bemu: You could but I don't know if that is what you want to do.
[2012-11-15 03:40:28 -0500] bemu: When I've thought about this problem in the past -- allowing a webui to create 'apps' of some kind, I thought of using data bags
[2012-11-15 03:40:54 -0500] sunil__: I actually do have a use case..to dynamically generate a role/cookbook and launch nodes based on data passed from a template file..
[2012-11-15 03:41:12 -0500] sunil__: yeah I was taking the data bag approach as well, but it seems like its deprecated with the new application cookbook.
[2012-11-15 03:41:29 -0500] bemu: Just because the community cookbook deprecates something doesn't mean it's not a viable solution for you.
[2012-11-15 03:41:42 -0500] bemu: and with jtimberman suggested is a very viable approach.
[2012-11-15 03:42:22 -0500] bemu: so, what he did, using the new lwrp.
[2012-11-15 03:42:33 -0500] bemu: You can use the LWRP and be data-bag driven.
[2012-11-15 03:42:37 -0500] bemu: They are not mutually exclusive.
[2012-11-15 03:42:55 -0500] AntonZ: speaking of cookbooks depricating, why does this happen and how often?
[2012-11-15 03:43:00 -0500] sunil__: so I can have a data bag calling the lwrp ? minus the cookbook etc?
[2012-11-15 03:45:26 -0500] sunil__: wait i think i get what you are saying..build a base apps cookbook, that just parses through data bag items..and data bag items can be all the key/value for the app itself.and base cookbook can call the LWRP?  am I on right track?
[2012-11-15 04:04:39 -0500] bemu: sunil__: Yes, precisely.
[2012-11-15 04:04:54 -0500] sunil__: thanks bemu..think I am on a roll now
[2012-11-15 04:05:06 -0500] bemu: thank jtimberman, it was his idea. :)
[2012-11-15 04:06:26 -0500] yfeldblum: AntonZ, each cookbook is someone's project, and that person decides when and why to deprecate individual features of that cookbook
[2012-11-15 04:10:23 -0500] bemu: AntonZ: That being said, there is nothing stopping you from forking the previous one and continuing to use/maintain it.
[2012-11-15 04:12:27 -0500] sunil__: bemu I will thank him too :) but yeah this totally makes sense
[2012-11-15 04:14:03 -0500] sunil__: is application_rails another cookbook all together?
[2012-11-15 04:15:25 -0500] sunil__: when uploading cookbook for generic app, its asking to upload application_rails (added to metadata)
[2012-11-15 04:19:40 -0500] bemu: sunil__: yes it is
[2012-11-15 04:19:58 -0500] bemu: emu out.
[2012-11-15 04:22:14 -0500] ssd7_: Ohai Chefs
[2012-11-15 04:52:11 -0500] sunil__: anyone know where to find this cookbook application_rails mentioned in this doc?
[2012-11-15 04:52:13 -0500] sunil__: https://github.com/opscode-cookbooks/application
[2012-11-15 04:52:30 -0500] sunil__: depends "application_rails"
[2012-11-15 05:01:26 -0500] juliancdunn: sunil__: it's possible those docs are out of date
[2012-11-15 05:01:38 -0500] juliancdunn: there's an application_ruby cookbook, which might be what's correct
[2012-11-15 05:17:49 -0500] chefologist: hi receiving this error when I run vagrant up: Authentication Error:  ---------------------  Failed to authenticate to the chef server (http 401).  Server Response:  ----------------  Failed to authenticate as 'shef12'. Ensure that your node_name and client key are correct.
[2012-11-15 05:18:05 -0500] chefologist: when connecting to Hosted-Chef
[2012-11-15 05:18:24 -0500] chefologist: any assistance would be great
[2012-11-15 05:39:39 -0500] ssd7: chefologist: Did you previously run chef on this same vm and then do a vagrant destroy?
[2012-11-15 05:48:23 -0500] chefologist: yes I have destroyed some boxes
[2012-11-15 05:50:26 -0500] chefologist: <@ssd7> can you assist further?
[2012-11-15 05:51:46 -0500] ssd7: chefologist: Yes.  Can you paste the full chef log to somewhere like gist or pastebin?
[2012-11-15 05:53:05 -0500] chefologist: how can I find the chef log
[2012-11-15 05:54:33 -0500] ssd7: chefologist: Haven't been using vagrant recently, but when I used it last it would output the chef output to stdout when you issued vagrant up or vagrant provision
[2012-11-15 05:55:26 -0500] chefologist:  FATAL: Stacktrace dumped to /srv/chef/file_store/chef-stacktrace.out
[2012-11-15 05:56:18 -0500] chefologist: <@ssd7> I can't find this path
[2012-11-15 05:56:29 -0500] ssd7: chefologist: I am mostly interested in *which* API call it is making when it failed.  That will help me reason out what the problem might be.  If you give me your org name I can likely find it as well.
[2012-11-15 05:56:53 -0500] chefologist: sbv2
[2012-11-15 05:57:22 -0500] ssd7: chefologist: If you are just interested in getting back up and running again the following sequence: vagrant destroy; knife client destroy shef12; knife node destroy shef12; vagrant up will probably work.
[2012-11-15 05:58:01 -0500] chefologist: <@ssd7> ok I will try that thanks
[2012-11-15 06:00:06 -0500] chefologist: knife client delete shef12 > sclient shef12 not found
[2012-11-15 06:01:14 -0500] chefologist: <@ssd7> knife node delete shef12 > node 'shef12' not found
[2012-11-15 06:01:31 -0500] ssd7: chefologist: Do you have a client.pem embedded in your vagrant image?
[2012-11-15 06:01:57 -0500] chefologist: <@ssd7> I don't think so, how do I check?
[2012-11-15 06:02:32 -0500] ssd7: chefologist: Can you do a vagrant up and show me the full output to gist or pastebin?
[2012-11-15 06:03:09 -0500] chefologist: https://gist.github.com/4076892
[2012-11-15 06:03:57 -0500] ssd7: chefologist: Check if you have a file in /etc/chef/client.pem in your image
[2012-11-15 06:04:27 -0500] ssd7: chefologist: If you do, delete it and run chef-client again.
[2012-11-15 06:04:44 -0500] chefologist: <@ssd7> there is no chef folder
[2012-11-15 06:04:58 -0500] chefologist: <@ssd7> do I need to create it?
[2012-11-15 06:05:07 -0500] ssd7: chefologist: No
[2012-11-15 06:05:11 -0500] ssd7: Hrmm
[2012-11-15 06:05:41 -0500] chefologist: ssd7: I have been using ~/.chef
[2012-11-15 06:06:03 -0500] ssd7: chefologist: can you post the output of /tmp/vagrant-chef-1/client.rb
[2012-11-15 06:06:50 -0500] chefologist: ssd7: no such directory > I am using hosted-chef
[2012-11-15 06:07:34 -0500] ssd7: chefologist: So to be clear, you are looking for these directories on the vagrant vm and not on your host correct?
[2012-11-15 06:08:10 -0500] chefologist: oooh ok thank
[2012-11-15 06:09:48 -0500] chefologist: ssd7: yes there is a client.pem in /etc/chef
[2012-11-15 06:11:24 -0500] chefologist: ssd7: I have removed the client.pem file from the vagrant box
[2012-11-15 06:12:16 -0500] chefologist: ssd7: I am running vagrant reload shef12 > will see how it goes
[2012-11-15 06:13:28 -0500] chefologist: ssd7: removing the client.pem resolved this issue, why is this so?  regards
[2012-11-15 06:18:31 -0500] ssd7: chefologist: When chef-client sees that client.pem already exists, it assumes that it already has a client and thus tries to make API requests using the key and its client name (by default the hostname)
[2012-11-15 06:18:47 -0500] ssd7: in your case, that client didn't actually exist so it was trying to make API requests as a non-existent user
[2012-11-15 06:19:17 -0500] chefologist: ok how can I ensure that the client.pem is not present, when I add a box from a box.box package?
[2012-11-15 06:19:33 -0500] ssd7: when the chef-client doesn't find client.pem, it assumes that it needs to make a new client, so it uses the validator key to make the new API client before making other API requests.
[2012-11-15 06:20:10 -0500] ssd7: chefologist: You should delete it before you package up the box.  If you are getting your box files from elsewhere, you might just have to add something to your provisioning script to delete the client.pem
[2012-11-15 06:20:54 -0500] chefologist: I am getting the from http://files.vagrantup.com/lucid32.box | lucid64.box
[2012-11-15 06:23:33 -0500] ssd7: chefologist: Unsure on where most people are getting their boxes from these days, but you might consder trying: https://opscode-vm.s3.amazonaws.com/vagrant/boxes/opscode-ubuntu-10.04.box
[2012-11-15 06:24:11 -0500] chefologist: ssd7: is there a list of these aws boxes?
[2012-11-15 06:26:01 -0500] ssd7: hrmm. Not sure.
[2012-11-15 06:26:28 -0500] ssd7: chefologist: https://github.com/opscode/bento
[2012-11-15 06:26:33 -0500] ssd7: Check out the readme, should have a list
[2012-11-15 06:26:52 -0500] chefologist: ssd7: how do I know if it is 32-bit, 64bit, 12.04, 12.10, 10.04 LTS etc?
[2012-11-15 06:27:26 -0500] chefologist: ssd7: ok I will have a look
[2012-11-15 06:27:50 -0500] ssd7: The one I linked to above is 10.04 64 bit.  The README has a full list of ones we use.
[2012-11-15 06:28:19 -0500] chefologist: ssd7:  perfect, are they pure vanilla, no bugs?
[2012-11-15 06:31:22 -0500] ssd7: chefologist: Well, we try to keep them pretty minimal.  They have chef-cleint installed, virtualbox guest additions, have sudoers updated with the vagrant user, and have been apt-get updated.
[2012-11-15 06:31:40 -0500] ssd7: Unfortunately, I haven't yet found a piece of software with no bugs
[2012-11-15 06:31:46 -0500] ssd7: s/found/find/
[2012-11-15 06:31:50 -0500] ssd7: err
[2012-11-15 06:32:00 -0500] chefologist: ssd7: now we are talking! thanks heaps for today > heading home
[2012-11-15 06:32:01 -0500] ssd7: nope, was correct the first time :)
[2012-11-15 06:32:08 -0500] ssd7: chefologist: Have a nice night!
[2012-11-15 07:06:11 -0500] BryanWB_: ohai chefs!
[2012-11-15 07:08:56 -0500] erikh: hi
[2012-11-15 07:12:50 -0500] BryanWB_: hey erikh !
[2012-11-15 07:13:06 -0500] BryanWB_: read this book  "john dies in the end" awesome!
[2012-11-15 07:19:58 -0500] erikh: hehe, just responded elsewhere
[2012-11-15 07:20:07 -0500] erikh: my reading backlog is pretty long (for me at least) right now
[2012-11-15 07:20:16 -0500] erikh: but I'll try to remember it when I'm at that point.
[2012-11-15 07:20:53 -0500] erikh: did a tour of huxley and orwell earlier this year, and read all things tolkien, but got through half of the silmarillion and said "fuck this" more or less
[2012-11-15 07:21:33 -0500] erikh: my wife likes it, but she also likes classic russian novels too, so I think there's just something wrong with her
[2012-11-15 07:37:34 -0500] ssd7: Heya BryanWB_ and erikh
[2012-11-15 07:49:18 -0500] erikh: hi hi
[2012-11-15 07:54:17 -0500] BryanWB_: hey ssd7
[2012-11-15 08:30:49 -0500] bwong: hi
[2012-11-15 08:59:43 -0500] Tensibai: Hi there
[2012-11-15 09:01:05 -0500] nacer: Morning htere
[2012-11-15 09:02:47 -0500] Tensibai: Small question about templates: may I use <%= ... %> within an attribute for it to be rendered inside the template ?
[2012-11-15 09:03:42 -0500] Tensibai: More or less: user = x, password= y, uri=ssh://<%= user %>:<%= pass %>@whatever ....
[2012-11-15 09:21:01 -0500] masterkorp: hello
[2012-11-15 09:45:58 -0500] nacer: Tensibai: i think you can
[2012-11-15 09:46:13 -0500] nacer: Tensibai: you can do all ruby stuff you want in templates
[2012-11-15 09:54:25 -0500] Tensibai: nacer: Thanks, I'll give it a try in this case ;)
[2012-11-15 09:54:55 -0500] Tensibai: My question is in fact will the ruby <%= %> part be interpreted withing the noed attribute or within the template
[2012-11-15 09:55:10 -0500] Tensibai: I assume it would be interpreted within template
[2012-11-15 10:04:20 -0500] nacer: Tensibai: i am not sure what you mean, but you can have access to node attribute in the template
[2012-11-15 10:04:51 -0500] nacer: Tensibai: you can <%= node['ssh]['user'] %> in your template
[2012-11-15 10:05:35 -0500] nacer: Tensibai: to take back your example : uri=ssh://<%= node['ssh]['user'] %>:<%= node['ssh]['password'] %>@whatever ....
[2012-11-15 10:06:16 -0500] nacer: Tensibai: but it will be interpreted within the template
[2012-11-15 10:06:53 -0500] nacer: Tensibai: when your recipe run the template ressource
[2012-11-15 10:07:39 -0500] Tensibai: nacer: yep
[2012-11-15 10:08:38 -0500] Tensibai: Where I've a 'doubt' is if uri=<%= node['ssh]['uri'] %> and that node['ssh']['uri']=ssh://<%= node['ssh]['user'] %>:<%= node['ssh]['password'] %>@whatever
[2012-11-15 10:09:27 -0500] Tensibai: in brief: move part of the template into a node attribute
[2012-11-15 10:10:15 -0500] nacer: Tensibai: i don't unterstand :)
[2012-11-15 10:11:15 -0500] Tensibai: nacer: I've to write a property file which include 2 type of databases.
[2012-11-15 10:11:41 -0500] nacer: Tensibai: yes
[2012-11-15 10:12:03 -0500] Tensibai: So solution 1) I do a if /else int he template with the two jdbc://[....] things with attributes where they're needed
[2012-11-15 10:12:33 -0500] Tensibai: or 2) my jdbc:// line is writtent inside an attribute and include other attributes
[2012-11-15 10:13:04 -0500] nacer: both are correct
[2012-11-15 10:13:15 -0500] nacer: but i prefer 2
[2012-11-15 10:15:16 -0500] Tensibai: Well me too as it trick down the template logic
[2012-11-15 10:15:44 -0500] Tensibai: but it adds more complexity inside the attributes for others when filling it
[2012-11-15 10:16:43 -0500] intinig: hi guys
[2012-11-15 10:16:53 -0500] intinig: http://tickets.opscode.com/browse/CHEF-3606 <- if you can add anything to help me I would be very happy :)
[2012-11-15 10:17:02 -0500] intinig: it has become my obsession to understand what goes on there
[2012-11-15 10:25:49 -0500] Tensibai: intinig: did you try adding chef::log:info within your recipe to see where it fails ?
[2012-11-15 10:25:51 -0500] chaos: hello!
[2012-11-15 10:26:25 -0500] masterkorp: http://s.rapimg.com/ipix_new/pkw/24/939/p7393924_13x.jpg
[2012-11-15 10:26:28 -0500] masterkorp: oops
[2012-11-15 10:27:41 -0500] chaos: I've issue with execute resource, executed command returns 254 and chef doesn't throw exception when it happens, code is here http://www.wklej.org/id/871338/
[2012-11-15 10:27:51 -0500] chaos: should i fill bug report?
[2012-11-15 10:28:12 -0500] Tensibai: and 1 more thing intinig: you attributes/recipe sounds strange
[2012-11-15 10:30:19 -0500] Tensibai: nevermind I misread something
[2012-11-15 10:31:44 -0500] intinig: Tensibai: it does not fial
[2012-11-15 10:31:48 -0500] intinig: Tensibai: it just is ignored
[2012-11-15 10:34:42 -0500] intinig: the chef-client run goes like "Run List expands to..." and it skips that recipe.
[2012-11-15 10:34:55 -0500] intinig: Or, as in the update I made to the ticket, it skips the first 4 or 5 recipes
[2012-11-15 10:35:01 -0500] intinig: that come before mysql::client
[2012-11-15 10:37:00 -0500] Tensibai: intinig: sorry I meant where it fails to be loaded/working.... but as you explained I think I got it but I've no idea, sorry
[2012-11-15 10:38:49 -0500] intinig: It's driving me crazy :(
[2012-11-15 10:45:34 -0500] masterkorp: intinig: oh, do you still have that problem ?'
[2012-11-15 10:45:59 -0500] intinig: masterkorp: yes with a little update too :)
[2012-11-15 10:46:17 -0500] masterkorp: Did you tried on a personal chef server ?
[2012-11-15 10:47:00 -0500] intinig: honestly I should trying doing that
[2012-11-15 10:47:27 -0500] masterkorp: setting up a server is easy/fast using the repos
[2012-11-15 11:57:34 -0500] intinig: what is the quickest way of doing some tests with chef? I.E. I want to be able to inspect how RunListExpansion.expand works, but I have no idea how much stuff I have to load and initialize before being able to do it.
[2012-11-15 11:58:49 -0500] laurent\: intinig: have you tried shef ?
[2012-11-15 11:58:54 -0500] intinig: laurent
[2012-11-15 11:58:55 -0500] intinig: yes
[2012-11-15 11:59:07 -0500] intinig: but I can't do a lot with it (my fault probably :))
[2012-11-15 12:03:15 -0500] BryanWB_: intinig: pry
[2012-11-15 12:03:29 -0500] BryanWB_: embed pry in a recipe    require 'pry' ; binding.pry
[2012-11-15 12:04:53 -0500] intinig: BryanWB_: thx
[2012-11-15 12:05:01 -0500] intinig: but I was able to work shef to do what I wanted :)
[2012-11-15 12:05:28 -0500] intinig: it's just not helping me for now, but at least I can start looking into why my recipe is being ignored
[2012-11-15 12:27:11 -0500] railsraider: i am trying to so   hostgroups =  search(:role, "*:*")
[2012-11-15 12:27:12 -0500] railsraider: and then  host groups.each do | role | role.name
[2012-11-15 12:27:43 -0500] railsraider: when i do that in shef i can do role.name and get the string back
[2012-11-15 12:28:01 -0500] gokr: Hmmm, using chef-server recipe I get wrong DAEMONs in my init.d scripts - but this seems to be fixed in "chef" itself. So... how does https://github.com/opscode/chef/blob/master/distro/debian/etc/init.d/chef-server actually relate to https://github.com/opscode/chef/blob/master/distro/debian/etc/init.d/chef-server   ?
[2012-11-15 12:28:23 -0500] railsraider: what i get out of the recipe is role[mysql_server] instead of "mysql-server"
[2012-11-15 12:29:20 -0500] gokr: Ehrm, I meant relate to: https://github.com/opscode-cookbooks/chef-server/blob/master/templates/default/debian/init.d/chef-server.erb
[2012-11-15 12:39:41 -0500] intinig: well guess what
[2012-11-15 12:39:46 -0500] intinig: I am able to trigger and untrigger
[2012-11-15 12:39:50 -0500] intinig: at will the "bug" I was having
[2012-11-15 12:39:55 -0500] intinig: now, after having looked at it
[2012-11-15 12:40:00 -0500] intinig: I am not sure it's a bug
[2012-11-15 12:40:11 -0500] intinig: and more sure that I probably do not understand how role run_lists work
[2012-11-15 12:41:05 -0500] intinig: take a look at this
[2012-11-15 12:41:05 -0500] intinig: https://gist.github.com/a139e066958079ce74fa
[2012-11-15 12:41:08 -0500] intinig: the way I read it
[2012-11-15 12:41:34 -0500] intinig: each environment should run the normal run_list while different environments run a different version of the mysql::server recipe
[2012-11-15 12:41:40 -0500] intinig: while it evals to
[2012-11-15 12:41:54 -0500] _rc: intinig: no, that's not how it works
[2012-11-15 12:41:57 -0500] intinig: "I only read the env_run_lists and ignore what's in run_list"
[2012-11-15 12:42:17 -0500] _rc: if you supply an environment run list, that *is* the run list
[2012-11-15 12:42:29 -0500] intinig: _rc: I see that now, I read the code :) -- but how am I supposed to specify some common parts in a run list and some not?
[2012-11-15 12:42:34 -0500] _rc: there's no merging or overriding or some such
[2012-11-15 12:42:39 -0500] _rc: you're not
[2012-11-15 12:42:53 -0500] _rc: have another role for the common stuff if you want to do that
[2012-11-15 12:43:08 -0500] intinig: well, being ruby I can just declare the hashes outside and reuse them in the run lists
[2012-11-15 12:44:36 -0500] _rc: that'd probably work; we usually author our roles as json though so they roundtrip
[2012-11-15 12:50:51 -0500] intinig: _rc: the doc though is totally misleading
[2012-11-15 12:50:51 -0500] intinig: http://wiki.opscode.com/display/chef/Environments
[2012-11-15 12:50:59 -0500] intinig: look at the sample role json
[2012-11-15 12:51:09 -0500] intinig: it specifies both an env_run_list and a normal run_list
[2012-11-15 12:51:45 -0500] _rc: intinig: right, the normal run_list is used if no environment is matched in env_run_lists
[2012-11-15 12:52:01 -0500] intinig: shouldn't that match _default? (since it's required)
[2012-11-15 12:52:15 -0500] _rc: "If you do not specify a per environment run list for a certain environment, such as "production" and "preprod" in the above example, chef will use the default run list (like before)."
[2012-11-15 12:56:50 -0500] intinig: I still think it made more sense to merge :)
[2012-11-15 12:57:04 -0500] intinig: I mean it merges everything why not run_lists?
[2012-11-15 12:57:08 -0500] intinig: because of the order maybe
[2012-11-15 12:57:14 -0500] intinig: the impossibility of retaining a correct order
[2012-11-15 12:58:05 -0500] tempoli: hi guys. when added a new client to the chef server, I'd like to connect AS that client. do I keep the client name as "chef-validator" or use my own client name? if the first one, what is the newly generated client key for? connecting with my server pem (or the new client pem) returns 401 unauthorized
[2012-11-15 13:02:27 -0500] Tensibai: tempoli: if you do create the new client, you should create the node too
[2012-11-15 13:02:35 -0500] Tensibai: and then use this client pem to connect
[2012-11-15 13:03:18 -0500] Tensibai: and I don't understand this part of your question: "do I keep the client name as "chef-validator" or use my own client name? "
[2012-11-15 13:03:47 -0500] Tensibai: chef-validator is kind of unique (admin rights to create client and node inside server and a client key)
[2012-11-15 13:04:22 -0500] tempoli: so does every client (apart from knife) need a corresponding node?
[2012-11-15 13:05:22 -0500] Tensibai: tempoli: I've understood it in this way yes
[2012-11-15 13:05:36 -0500] Tensibai: apart from knife and admins/users for web-ui
[2012-11-15 13:06:03 -0500] Tensibai: well, a chef-client run should have a client/node relation
[2012-11-15 13:06:35 -0500] tempoli: ahh ok, i see - that makes sense. thanks Tensibai
[2012-11-15 13:06:45 -0500] Tensibai: as a 1 to many (I mean 1 client may configure n nodes in specific configs (switches))
[2012-11-15 13:07:24 -0500] tempoli: so i can have a node called foo, but many machines provisioned using it?
[2012-11-15 13:08:00 -0500] Tensibai: tempoli: depend on what you call machines
[2012-11-15 13:08:02 -0500] Tensibai: ...
[2012-11-15 13:08:30 -0500] tempoli: at the moment, virtual machines
[2012-11-15 13:08:53 -0500] Tensibai: tempoli: in this case each vm should have it's own client and node
[2012-11-15 13:08:59 -0500] tempoli: i'd like to have a chef server, a knife client (desktop) and a lot of VMs.
[2012-11-15 13:09:10 -0500] tempoli: even if there's 100 vm's?
[2012-11-15 13:09:14 -0500] Tensibai: yep
[2012-11-15 13:09:31 -0500] Tensibai: each one won't have the same conf (let's say : ip ?)
[2012-11-15 13:10:40 -0500] tempoli: that's true - but lets say each developer provisions a VM. would each developers VM create a node & client on the server?
[2012-11-15 13:11:00 -0500] tempoli: seems like there'd potentially be a LOT of nodes and clients
[2012-11-15 13:11:03 -0500] Tensibai: tempoli: I would say yes
[2012-11-15 13:11:20 -0500] Tensibai: that's a matter of cleaning when thoose VMs are destroyed
[2012-11-15 13:11:45 -0500] Tensibai: that's something coming quite regularly on the mail list
[2012-11-15 13:12:24 -0500] Tensibai: tempoli: you may try a quick search here: http://lists.opscode.com/sympa/
[2012-11-15 13:13:03 -0500] tempoli: i will do. thanks Tensibai, i think i understand it a bit more now :)
[2012-11-15 13:13:21 -0500] Tensibai: For something more direct on use cases: http://lists.opscode.com/sympa/arc/chef
[2012-11-15 13:13:57 -0500] Tensibai: tempoli: you're welcome, glad I can help ;o)
[2012-11-15 13:29:59 -0500] masterkorp: mailing lists are awesome
[2012-11-15 13:30:06 -0500] masterkorp: i learn a lot as a lurker
[2012-11-15 13:31:19 -0500] Tensibai: masterkorp: I'm trying to read most of it every day ;)
[2012-11-15 13:31:28 -0500] Tensibai: It's really helpfull
[2012-11-15 13:32:15 -0500] Tensibai: but I'm still searching a way to do: put thooses n files here; if change: stop with this command, run this command for each file and then start with this command ...
[2012-11-15 13:32:47 -0500] Tensibai: I'm not sure that using notifications is the good way for it ...
[2012-11-15 13:33:16 -0500] Tensibai: I think I'll have to do a lwrp for that
[2012-11-15 14:12:25 -0500] poolpog: so, I keep seeing "idempotent" popping up on chef docs/wiki, and in a keynote talk I watched on youtube...
[2012-11-15 14:13:01 -0500] poolpog: wrt chef resources, what does idempotent mean? that if you include  a resource in a resource, it is unchanged? something like that?
[2012-11-15 14:13:19 -0500] poolpog: (note: i don't have a formal CS background, so that may be my disconnect)
[2012-11-15 14:14:14 -0500] itchyouch: Idempotence means that rerunning a recipe multiple times will yield the same result
[2012-11-15 14:14:21 -0500] poolpog: also, what TZ are most opscode peeps in?
[2012-11-15 14:14:35 -0500] poolpog: itchyouch, thanks
[2012-11-15 14:15:41 -0500] itchyouch: If you're installing software x, running it once vs 500 times, the software is only installed once vs say having 500 binaries laying around somewhere.  Or you do the same action and different stuff happens
[2012-11-15 14:16:02 -0500] itchyouch: The last was an example of what idem potency is not
[2012-11-15 14:16:14 -0500] poolpog: the first sentence = idempotent operation. the second sentence = not
[2012-11-15 14:16:15 -0500] poolpog: ok
[2012-11-15 14:16:17 -0500] poolpog: thanks that helps
[2012-11-15 14:16:29 -0500] poolpog: what is the opposite of idempotent? concise term, I mean
[2012-11-15 14:16:39 -0500] itchyouch: Not sure.  Inconsistent?
[2012-11-15 14:17:12 -0500] poolpog: ok
[2012-11-15 14:18:25 -0500] itchyouch: On another note: I was curious about anyone in a large organizations and how you managed changes and Rollouts amongst varying groups? Network, firewall, dev, etc.  I'm Trying to figure the right balance between getting micromanaged through change calls and moving quickly as needed.
[2012-11-15 14:20:11 -0500] masterkorp: https://www.youtube.com/watch?v=JyGP0ZyxF5E
[2012-11-15 14:28:23 -0500] geekbri: poolpog: in simple terms idempotent means, no matter how many times something runs, the end result is always the same
[2012-11-15 14:29:27 -0500] geekbri: or in more mathematical terms for all x in S, f(f(x)) = f(x)
[2012-11-15 14:29:50 -0500] geekbri: Basically "If i run this resources 10,000 times in a row, it will always end up with the same configuration by the end of the run"
[2012-11-15 14:31:07 -0500] poolpog: so, I read the math definitition. -- on wikipedia -- and it didn't really jibe with a real-world, contextual use of the term in the chef docs
[2012-11-15 14:31:12 -0500] poolpog: so, #confused
[2012-11-15 14:31:19 -0500] poolpog: but now it makes more sense
[2012-11-15 14:32:15 -0500] specialsauce: itchyouch, i'd be willing to swap war stories about managing change in large envs
[2012-11-15 14:32:47 -0500] specialsauce: poolpog, simple example "set x to 1" is an idempotent operation, "add 1 to x" is not
[2012-11-15 14:33:15 -0500] geekbri: poolpog: The important aspect of it as it relates to chef is the idea that when you create a resource, it checks the state of the system.  If everything is as it should be, it does nothing.  If things are not correct it changes them to the state they are supposed to be.
[2012-11-15 14:33:39 -0500] poolpog: k
[2012-11-15 14:33:46 -0500] poolpog: you guys so nice
[2012-11-15 14:34:02 -0500] poolpog: (and girls, but I'm assuming girls.count()  == 0
[2012-11-15 14:35:21 -0500] masterkorp: ah
[2012-11-15 14:35:35 -0500] itchyouch: specialsauce:  that's be great.  I'm really more curious about what works for you guys,
[2012-11-15 14:35:58 -0500] gchristensen: poolpog: my bet is the count is > 0
[2012-11-15 14:36:00 -0500] itchyouch: We could bish all day about how the dfm made some terrible decison.
[2012-11-15 14:38:44 -0500] masterkorp: gchristensen: there are no women on the interwebs, its the ultimate truth :p
[2012-11-15 14:41:48 -0500] thedeeno: I have a library, which I'm leveraging in my providers, which depends on an external gem.  How do I install this gem, from my library, in a single chef run, so I can safley require it.
[2012-11-15 14:41:58 -0500] thedeeno: ?
[2012-11-15 14:42:35 -0500] thedeeno: example two here seems like the general idea: http://wiki.opscode.com/display/chef/Evaluate+and+Run+Resources+at+Compile+Time
[2012-11-15 14:42:50 -0500] thedeeno: but how do I get access to the dsl from my library?
[2012-11-15 14:52:03 -0500] thedeeno: I figured maybe I could just `require 'chef/dsl/recipe'` but this doesn't appear to be available at the time chef is loading libraries.
[2012-11-15 14:54:14 -0500] kryptek: good morning everyone
[2012-11-15 15:00:05 -0500] masterkorp: hello
[2012-11-15 15:04:22 -0500] kryptek: Almost Friday.. Almost Friday..
[2012-11-15 15:06:56 -0500] drrk: the weekend starts in 24 minutes for me \o/
[2012-11-15 15:07:51 -0500] specialsauce: git
[2012-11-15 15:08:09 -0500] kryptek: hehe, lucky you man
[2012-11-15 15:10:19 -0500] masterkorp: kryptek: its friday friday, everybody gotta get down on friday
[2012-11-15 15:10:50 -0500] kryptek: :)
[2012-11-15 15:10:53 -0500] drrk: Partly becuase I works a 9 hour day yesterday, and tomorrow I have a meeting, but it's not work
[2012-11-15 15:11:27 -0500] masterkorp: i dont have weekends :p
[2012-11-15 15:11:37 -0500] masterkorp: sovietic portugal
[2012-11-15 15:11:45 -0500] kryptek: Yikes.  I never work weekends.. but if I'm on call, pagerduty will likely hit my ass up
[2012-11-15 15:18:26 -0500] masterkorp: kryptek: heh, everybody loves that
[2012-11-15 15:19:00 -0500] masterkorp: specially on a saturday at 4am and you're drunk as shit doing burnouts on the midle of nowhere..
[2012-11-15 15:19:09 -0500] masterkorp: we've all been there :p
[2012-11-15 15:29:57 -0500] tolland: i have a cookbook with an include_recipe, which installs some package, but the master recipe is failing on a missing group
[2012-11-15 15:30:03 -0500] tolland: which is created as part of the include
[2012-11-15 15:30:17 -0500] tolland: but by the time the run has finished, actually exists
[2012-11-15 15:30:30 -0500] tolland: can i force the include to return, before proceeding?
[2012-11-15 15:31:12 -0500] knuckolls: instead of using include_recipe, you can just put that cookbook in the run_list before your cookbook
[2012-11-15 15:31:16 -0500] tolland: (this is using the 0.10.2
[2012-11-15 15:31:21 -0500] knuckolls: that's how i handle explicit dependencies using required ordering
[2012-11-15 15:31:23 -0500] tolland: chef-solo
[2012-11-15 15:31:30 -0500] tolland: ok, will do that
[2012-11-15 15:31:38 -0500] knuckolls: less coupling, more straightforward
[2012-11-15 15:31:45 -0500] tolland: ive seen that idiom in some other cookbooks though
[2012-11-15 15:32:00 -0500] tolland: i think the nagios one does something like that to select between source and package installs
[2012-11-15 15:32:22 -0500] geekbri: thedeeno: if you ever figure it out, let me know
[2012-11-15 15:32:31 -0500] tolland: ie has a case, when, end
[2012-11-15 15:32:39 -0500] leifmadsen: question about docs.opscode.com -- is the text now stored via github or some other repository?
[2012-11-15 15:32:48 -0500] leifmadsen: since it appears to not be a wiki anymore :)
[2012-11-15 15:32:52 -0500] knuckolls: tolland: usually those are driven by attributes, but the chef operator manages both the run lists and the attributes so it's just a preference
[2012-11-15 15:33:02 -0500] tolland: which drops through to a source or package install depending on whether the packages are available for the platform, but continues processing in default.rb
[2012-11-15 15:33:14 -0500] knuckolls: i think dependencies controlled by run lists are more straightforward and less magic
[2012-11-15 15:33:24 -0500] knuckolls: but you're right, it does allow the cookbook more flexibility
[2012-11-15 15:33:33 -0500] knuckolls: just at a complexity cost
[2012-11-15 15:33:44 -0500] tolland: knuckolls: do you have to push up the logic to the run list to select how to install
[2012-11-15 15:34:02 -0500] tolland: if the cookbook depends on a package that is only conditionally available
[2012-11-15 15:34:20 -0500] tolland: ok, just checking.
[2012-11-15 15:34:34 -0500] tolland: I have to support tomcat7 on ubuntu and amazon ami
[2012-11-15 15:34:59 -0500] tolland: but also possibly the case of centos 6 with no package in EPEL or base
[2012-11-15 15:35:09 -0500] thedeeno: geekbri: I don't think it's possible. I've been diving through the source and it looks like libraries don't have access to the current run_context. :( Seems like a rather big flaw in the implementation of libraries. You can run any ruby code, but it can only be standard library code...
[2012-11-15 15:35:36 -0500] yfeldblum: thedeeno, that's actually a giant plus
[2012-11-15 15:35:43 -0500] geekbri: thedeeno: yeah, the only real solution is to have a recipe higher up in the run list that installs the necessary gems.
[2012-11-15 15:35:54 -0500] thedeeno: geekbri: I
[2012-11-15 15:36:09 -0500] geekbri: then your existing cookbook can depend on that one.
[2012-11-15 15:36:21 -0500] thedeeno: I'd actually love being able to do that, but my library depends on this external gem and thus is getting a compile error before any recipes run
[2012-11-15 15:36:25 -0500] thedeeno: OH, true
[2012-11-15 15:36:28 -0500] leifmadsen: disregard my question about docs:  https://github.com/opscode/chef-docs
[2012-11-15 15:36:33 -0500] thedeeno: yfeldblum: why is it a plus?
[2012-11-15 15:37:05 -0500] yfeldblum: thedeeno, because it means the rest of us don't get burned by ridiculous leaky abstractions that work OK in exactly one condition, but not at all in any other condition
[2012-11-15 15:37:52 -0500] geekbri: yfeldblum is a ruby socialist with all his regulations and red tape.  I saw we let people blow their own fingers off if they so choose!  Long live liberty!
[2012-11-15 15:38:08 -0500] yfeldblum: geekbri, die socialism die
[2012-11-15 15:38:10 -0500] geekbri: Now how to get this tongue unlodged from my cheek
[2012-11-15 15:38:55 -0500] yfeldblum: thedeeno, the issue is that libraries are an escape hatch from all the other tangled-up stuff, where you can put normal ruby code
[2012-11-15 15:40:17 -0500] thedeeno: yfeldblum: right, but only standard library ruby code. That's the thing that's surprising. I'm not sure I understand the risk, of say, leveraging the PG gem in a library.
[2012-11-15 15:41:53 -0500] thedeeno: I can use it in a provider, np, but what if I have some complex logic that I want to share across a few providers? Maybe I'm just missing the alternative way to do this
[2012-11-15 15:42:17 -0500] yfeldblum: thedeeno, no reason you can't use the pg gem from a library
[2012-11-15 15:42:59 -0500] thedeeno: how would you go about installing the pg gem into omni bus so you can require it without error?
[2012-11-15 15:43:17 -0500] thedeeno: I don't seem to be able to leverage the chef_gem resource, even if calling it at compile phase
[2012-11-15 15:45:10 -0500] yfeldblum: thedeeno, well of course the question is, what are you doing and how are you doing it?
[2012-11-15 15:45:33 -0500] thedeeno: I'll gist
[2012-11-15 15:51:11 -0500] thedeeno: yfeldblum: this is what I've attempted to do: https://gist.github.com/4079307
[2012-11-15 15:51:45 -0500] thedeeno: however the resources (like package and chef_gem don't appear to be available), so that results in a compile error.
[2012-11-15 15:52:00 -0500] yfeldblum: thedeeno, heh that's the part i already knew; what are you trying to do in a library that you are currently being blocked from doing?
[2012-11-15 15:52:28 -0500] helllen: helllo
[2012-11-15 15:52:43 -0500] yfeldblum: thedeeno, also chef_gem takes action at "compile time" already ... no reason to do half of that gist ...
[2012-11-15 15:52:49 -0500] helllen: I have created a directory successfully
[2012-11-15 15:53:08 -0500] helllen: I would like to delete all files contained in that directory
[2012-11-15 15:53:37 -0500] thedeeno: yfeldblum: sweet, good to know. Basically I'm using the pg gem to connect to postgres and run commands and take action based on results
[2012-11-15 15:53:51 -0500] helllen: how could I do it ?
[2012-11-15 15:53:56 -0500] yfeldblum: thedeeno, yes, but how are you trying to do that? gist would be cool
[2012-11-15 15:54:21 -0500] yfeldblum: helllen, `rm -rf /path/to/dir/*`
[2012-11-15 15:54:45 -0500] helllen: inside the recipie ?
[2012-11-15 15:55:35 -0500] yfeldblum: helllen, you can run any ruby code you like, including ruby code that shells out to any other commands you like
[2012-11-15 15:55:40 -0500] mesozoic: Hi all - is anyone here using the passenger_rails::mod_rails recipe? I'm using Chef Solo on Vagrant, and I've got a weird issue where apache+passenger is configured correctly the first time I run, and the config is mangled the second time I run chef. https://gist.github.com/9ba606e854ef0488b8fc
[2012-11-15 15:55:41 -0500] yfeldblum: helllen, from inside a recipe
[2012-11-15 15:56:59 -0500] helllen: thanks
[2012-11-15 15:59:47 -0500] thedeeno: yfeldblum: Basically, I want my providers in my postgresql cookbook to be able to work with this 'cluster' abstraction https://gist.github.com/4079363
[2012-11-15 16:00:14 -0500] thedeeno: the pg gem is being used on line 213, so the providers can connect, run commands, and work with PG::Results
[2012-11-15 16:02:27 -0500] yfeldblum: thedeeno, so put `chef_gem "pg"` into a recipe and make sure that appears before any calls to any methods that might use the pg gem?
[2012-11-15 16:03:23 -0500] j|: why do people choose to install chef-server via chef-solo versus from opscode repo via package? (or vice versa)
[2012-11-15 16:03:25 -0500] thedeeno: yfeldblum: Yeah, like maybe the default recipe for my cookbook, and make that a requirement to use any lwrps?
[2012-11-15 16:03:34 -0500] yfeldblum: thedeeno, yes
[2012-11-15 16:04:27 -0500] benner: can anyone explain 46'th slide in this presentation: http://www.slideshare.net/jweiss/infrastructure-automation-withchef ?
[2012-11-15 16:04:33 -0500] thedeeno: yfeldblum: I thought I tried that, but maybe I messed something up. Omg, if that works thank you SO much for the attention. Was totally scratching my head on this one
[2012-11-15 16:05:13 -0500] specialsauce: not a rubyer but is File.exists true for a dir?
[2012-11-15 16:05:22 -0500] specialsauce: benner ^
[2012-11-15 16:06:06 -0500] kryptek: specialsauce,  Dir.exists? is what you should use.
[2012-11-15 16:06:38 -0500] _rc: benner: 'never' isn't correct.  won't happen as part of the same run
[2012-11-15 16:06:50 -0500] yfeldblum: benner, execution of the recipes vs convergence of the system against the list of resources
[2012-11-15 16:07:01 -0500] geekbri: specialsauce: http://www.ruby-doc.org/core-1.9.2/File.html#method-c-exists-3F
[2012-11-15 16:07:09 -0500] _rc: benner: becuse File.exists will be evaluated at compile time, and the touch won't happen till converge time
[2012-11-15 16:07:20 -0500] geekbri: specialsauce: total fail on my behalf, not at all what i meant to link but whatever
[2012-11-15 16:07:34 -0500] knuckolls: benner: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-11-15 16:07:45 -0500] geekbri: specialsauce: http://ruby-doc.org/core-1.9.3/Dir.html#method-c-exists-3F
[2012-11-15 16:07:46 -0500] geekbri: thats the one!
[2012-11-15 16:07:53 -0500] kryptek: geekbri,  lol
[2012-11-15 16:07:54 -0500] geekbri: if at first you don't succeed, try try again
[2012-11-15 16:08:09 -0500] _rc: benner: the next slide tries to explain this also
[2012-11-15 16:08:36 -0500] benner: ok, understood
[2012-11-15 16:08:43 -0500] benner: [18:06:38] < _rc> benner: 'never' isn't correct.  won't happen as part of the same run
[2012-11-15 16:08:50 -0500] thedeeno: yfeldblum: if I need to install dependenceis for the pg gems native extensions, would you do it the way I had it? That is, call the package resource directly so it runs at compile time? Or is there a more built in way like chef_gem
[2012-11-15 16:08:51 -0500] _rc: but you have the classic 'I'm reading slides' problem of not hearing the talk that runs along with it
[2012-11-15 16:09:03 -0500] benner: i been fooled by "never" :)
[2012-11-15 16:09:16 -0500] benner: thanks
[2012-11-15 16:09:29 -0500] geekbri: It's rare that slides even come close to being 50% as usual as the talk they went along with.
[2012-11-15 16:09:32 -0500] yfeldblum: thedeeno, you could
[2012-11-15 16:09:34 -0500] geekbri: usual = useful
[2012-11-15 16:11:58 -0500] specialsauce: chef has been out ages now, is there a comprehensive "here's how we use chef" anywhere on the web? I'm more and more feeling that I could benefit from seeing how other people have implemented chef and contrasting and comparing their installation to ours to try and decide what best practices are
[2012-11-15 16:12:45 -0500] yfeldblum: specialsauce, how are you measuring "ages"? in months? :D
[2012-11-15 16:12:58 -0500] benner: i think opscode wiki hase good explanation how to use chef
[2012-11-15 16:14:56 -0500] drewvs: @specialsauce, go through this tutorial: http://wiki.opscode.com/display/chef/Fast+Start+Guide . Then download some cookbooks (MySQL, Apache, etc) and just look through every file in it. Look up any variables or components you don't understand. And then just jump into writing cookbooks. Ultimately that's the only way to pick it up.
[2012-11-15 16:14:58 -0500] specialsauce: yfeldblum, we've been using chef for over a year here, that's long enough for lots of other people out there to be using it at scale and to have had to come across and work around issues etc
[2012-11-15 16:15:09 -0500] specialsauce: drewvs, its not that i'm start out
[2012-11-15 16:15:19 -0500] drewvs: Oh, nm then ;D
[2012-11-15 16:15:21 -0500] specialsauce: we have thousands of files of chef code
[2012-11-15 16:15:39 -0500] specialsauce: this is more to gauge whether the solutions we've put in place and the way we're using it could be improved
[2012-11-15 16:15:44 -0500] specialsauce: the product is so huge and so flexible
[2012-11-15 16:15:48 -0500] kryptek: Refactoring your cookbooks?
[2012-11-15 16:16:17 -0500] knuckolls: specialsauce: i agree. sounds like there is ripe opportunity for someone to curate a blog with guest posts from established chef shops.
[2012-11-15 16:16:41 -0500] specialsauce: kryptek, not a single deliberate initiative to one-off refactor, they're pretty much always in flux. even this is a "is everyone else doing this too?" thing
[2012-11-15 16:16:45 -0500] knuckolls: but a lot of that is spread out across the web in slide decks, and one off blog posts already
[2012-11-15 16:16:54 -0500] specialsauce: knuckolls, this is my experience yes
[2012-11-15 16:17:17 -0500] specialsauce: i still have no idea really if we're doing things the "right" way in so many respects at so many levels of usage
[2012-11-15 16:17:45 -0500] specialsauce: from how cookbooks handle dependencies, cookbook reuse etc, use of roles right up to cookbook management and deploy
[2012-11-15 16:18:00 -0500] knuckolls: it's just a young community
[2012-11-15 16:18:00 -0500] specialsauce: even the slideshows i found don't really go into sufficient detail
[2012-11-15 16:18:13 -0500] knuckolls: everyone's figuring that out, and everyone has their own opinions it seems
[2012-11-15 16:18:15 -0500] specialsauce: i think i need 4 huors in a room with another cheffer to compare code :-)
[2012-11-15 16:18:27 -0500] _rc: sounds like you have a very specific set of demands
[2012-11-15 16:19:15 -0500] drewvs: If you do it, make a webcast for the rest of us :)
[2012-11-15 16:19:45 -0500] ranjibd: BryanWB_,  around?
[2012-11-15 16:19:59 -0500] BryanWB_: ranjibd: what's up yaar
[2012-11-15 16:20:13 -0500] BryanWB_: gotta go in a couple mins tho
[2012-11-15 16:20:32 -0500] ranjibd: we are discussing about how chef is used  in different organizations
[2012-11-15 16:20:42 -0500] specialsauce: _rc: not at all
[2012-11-15 16:20:55 -0500] specialsauce: i have questions about how other people are handling just about everything :-)
[2012-11-15 16:21:06 -0500] ranjibd: specialsauce, yfeldblum knuckolls  .. can foodcritic be a  place for guests posts ?
[2012-11-15 16:21:08 -0500] geekbri: Ask a specific question, receive an answer!
[2012-11-15 16:21:20 -0500] specialsauce: i might go first then and do some kind of anatomy of how we use it in a blog post or something
[2012-11-15 16:21:29 -0500] BryanWB_: gangnam style!
[2012-11-15 16:21:34 -0500] specialsauce: geekbri, as always it is knowing what questions to ask ;-)
[2012-11-15 16:21:34 -0500] ranjibd: :-)
[2012-11-15 16:21:40 -0500] BryanWB_: http://devopsanywhere.blogspot.it/2012/11/how-to-write-reusable-chef-cookbooks.html
[2012-11-15 16:21:57 -0500] geekbri: Writing a resuable cookbook isn't really all that different than writing any reusable code
[2012-11-15 16:22:25 -0500] Litex: BryanWB_: That Chef hangout had some great stuff in it.
[2012-11-15 16:22:29 -0500] BryanWB_: geekbri: but library/application cookbooks is new to me
[2012-11-15 16:22:51 -0500] Litex: chef-rewind looks like it enables a mega handy pattern.
[2012-11-15 16:22:51 -0500] wes_: Good morning Chefs!  I am having a problem running dcpromo.exe in windows (it looks like the powershell resource doesn't exist in the msi download, so I am using the "execute" resource).  According to the chef-solo stdout, dcpromo.exe ran and returned success, but nothing happens on the server and no log files are created.  Any ideas?
[2012-11-15 16:22:54 -0500] geekbri: Fair enough :)
[2012-11-15 16:22:55 -0500] BryanWB_: Litex: tks, a new one next Tuesday evening w/ reset, sascha_d
[2012-11-15 16:22:56 -0500] knuckolls: my philosophy boils down to cookbooks should mirror the unix philosophy. does one thing and one thing well. minimizes coupling.
[2012-11-15 16:23:06 -0500] BryanWB_: Litex: it's a hack but a useful one
[2012-11-15 16:23:11 -0500] Litex: BryanWB_: Awesome.
[2012-11-15 16:23:26 -0500] BryanWB_: better to parameterize ur cookbooks but when u don't have time it works
[2012-11-15 16:23:37 -0500] BryanWB_: ranjibd: i gotta go, any specific q?
[2012-11-15 16:24:08 -0500] Litex: Right, for sure.
[2012-11-15 16:25:05 -0500] BryanWB_: gtg, gnite chefs!
[2012-11-15 16:25:39 -0500] boomboxinator: I'm looking for chef forums
[2012-11-15 16:25:53 -0500] boomboxinator: Any recommendations would be great.
[2012-11-15 16:26:33 -0500] gchristensen: is there a standard or recommended way to manage apparmor rules? I want to add rules to the mysql rules, but it doesn't seem too difficult
[2012-11-15 16:29:08 -0500] ranjibd: boomboxinator, this channel, the comments section in wiki, and the mailing lists are pretty much as of now
[2012-11-15 16:29:19 -0500] geekbri: The thing I don't understand is Adam Jacob's post saying that roles should only include attributes if it is unavoidably necessary.  For us having attributes in roles is an incredibly effective way to have differences between different sets of servers via roles
[2012-11-15 16:29:55 -0500] geekbri: and as to having "thin" roles, I mean thing is all relative.  IF you have a server that is doing a ton of things, its role may be large.  Or at least it will have a role that is a collection of other roles.
[2012-11-15 16:30:48 -0500] ranjibd: geekbri, you can assign recipes directly to the run list as well
[2012-11-15 16:31:11 -0500] ranjibd: geekbri, but yes, i also prefer organizing them in roles ,
[2012-11-15 16:31:12 -0500] geekbri: You can, but that doesn't get represented in git anywhere
[2012-11-15 16:31:19 -0500] boomboxinator: rajibd - thanks for this.
[2012-11-15 16:31:20 -0500] gokr: Stupid question: standard way of *editing* an existing config file? (adding or changing a line or two)
[2012-11-15 16:31:25 -0500] geekbri: if you want to reconstruct a server, or build a new one, how does one do that other than manually?
[2012-11-15 16:31:33 -0500] geekbri: OR by having some OTHER tool that keeps track of what the run_lists should be.
[2012-11-15 16:31:43 -0500] ranjibd: gokr, templatize it.
[2012-11-15 16:32:02 -0500] geekbri: Better to have a role for that purpose and have it be an aggregation of other roles (and recipes)
[2012-11-15 16:32:09 -0500] gokr: ranjibd: But then I am stuck with trying to track upstream of it.
[2012-11-15 16:32:33 -0500] gokr: For example - making a few silly changes in /etc/ssh/sshd_config
[2012-11-15 16:32:41 -0500] gokr: Seems daft to copy the whole thing into a template.
[2012-11-15 16:32:49 -0500] ranjibd: the run list that you pass during boot strap (stored as first run), i tend to put it in node.json as inside the code base
[2012-11-15 16:33:09 -0500] ranjibd: geekbri, like app.json , db.json etc
[2012-11-15 16:33:57 -0500] geekbri: something to consider for sure.
[2012-11-15 16:34:01 -0500] ranjibd: gokr, there are other ways to , like having a execute with echo >> 'ur changes ' and a grep 'ur change ' to make it idempotent
[2012-11-15 16:35:06 -0500] ranjibd: gokr, also theres a fileedit library .. exactly for this purpose.. but i prefer to use that when i dont know the exact content of the entire config file
[2012-11-15 16:35:08 -0500] pdoc1: hey guys, im working on setting up the application cookbook. according to the readme, the use of a data bag is deprecated, but whenever i run default.rb recipe i get the error "HTTP Request Returned 404 Object Not Found: I don't know how to search for apps data objects."
[2012-11-15 16:35:14 -0500] ranjibd: fileedit?
[2012-11-15 16:35:29 -0500] mattp: ranjibd: I'm reminded of (and amused by) the wonderfully verbose directive that cfengine has called 'InsertIfNoSuchLine'
[2012-11-15 16:35:42 -0500] ranjibd: fujin, when will bawt return ? :-)
[2012-11-15 16:36:20 -0500] ranjibd: mattp,  yeah.. i guess you can write a nify lwrp ..
[2012-11-15 16:37:03 -0500] masterkorp: what is the object returned in node.run_list ?
[2012-11-15 16:37:18 -0500] masterkorp: (on the recipe )
[2012-11-15 16:37:31 -0500] masterkorp: and node.run_list.role ?
[2012-11-15 16:39:26 -0500] ranjibd: masterkorp, go inside a node , run shef -z , and check it out :-0)
[2012-11-15 16:39:45 -0500] masterkorp: aww, just tell me :p
[2012-11-15 16:41:04 -0500] geekbri: one of these days I really have to learn to use shef so that I don't always have to get that info by dumping it in recipes
[2012-11-15 16:42:00 -0500] yfeldblum: pdoc1, if you're not using the data-bag approach, then you don't need to run the application::default recipe
[2012-11-15 16:42:14 -0500] barnacles: hm
[2012-11-15 16:43:15 -0500] pdoc1: yfeldblum: ok i am not explicitly running the default recipe. i am using the application_nginx cookbook and the lwrp. it must be inlcuding it in there somewhere i guess
[2012-11-15 16:43:27 -0500] pdoc1: taking another look
[2012-11-15 16:43:40 -0500] masterkorp: it looks to be like an array
[2012-11-15 16:43:54 -0500] yfeldblum: pdoc1, you don't need to run the application_nginx::default recipe either
[2012-11-15 16:44:36 -0500] cheflevelramen: Morning everyone. I'm really new to chef and am working my way through the Opscode documentation. I keep seeing references to Chef's DSL, but can't find any documentation on it. I know recipes are written in it, and I'm sure it fairly simple, but I'd like to gain a deeper understanding of it. Anyone have some pointers on where to look to learn more about this DSL?
[2012-11-15 16:44:43 -0500] pdoc1: ok, im including that in my application specific cookbook, that must be the problem
[2012-11-15 16:44:47 -0500] pdoc1: testing, thank you
[2012-11-15 16:45:05 -0500] Tensibai: cheflevelramen: see the ressources
[2012-11-15 16:45:18 -0500] pdoc1: yep that did it, thans!
[2012-11-15 16:45:20 -0500] pdoc1: thanks even
[2012-11-15 16:45:22 -0500] Tensibai: that's the main chef DSL part, the rest of recipes are plain ruby
[2012-11-15 16:45:36 -0500] yfeldblum: pdoc1, no problem
[2012-11-15 16:46:04 -0500] cheflevelramen: Nice! Thanks. Search google/opscode for DSL did not return the resource page
[2012-11-15 16:47:13 -0500] Tensibai: cheflevelramen: in brief, follow the tutorials you'll have a good idea of what the specificity is I think
[2012-11-15 16:48:14 -0500] cheflevelramen: Thanks Tensibai, currently mid the tutorials
[2012-11-15 16:49:30 -0500] Tensibai: cheflevelramen: you're welcome
[2012-11-15 17:04:09 -0500] thedeeno: yfeldblum: Thank you, I think this worked!
[2012-11-15 17:06:21 -0500] jhayden: A quick recipe question:
[2012-11-15 17:07:44 -0500] jhayden: When I make a change in a recipe's attribute file and upload the cookbook, my chef client makes the change a few minutes later. Does the client automatically restart the service affected and if not how could I code that in the recipe?
[2012-11-15 17:09:26 -0500] Tensibai: jhayden: have a service "my_service" inside your recipe and with the attrib changes I assume you rewrite a template
[2012-11-15 17:09:37 -0500] Tensibai: in this tempalte notifies the service to restart
[2012-11-15 17:09:46 -0500] Tensibai: it will be restarted when the template change
[2012-11-15 17:09:55 -0500] kallistec: jhayden: http://docs.opscode.com/resource_common.html#notifications
[2012-11-15 17:10:57 -0500] jhayden: @Tensibai Sweet! Thanks for the info
[2012-11-15 17:11:56 -0500] Tensibai: you're welcome (but see kallistec note about notifications too, it is more complete than me)
[2012-11-15 17:13:31 -0500] jhayden: Tesibai: BTW, is the a new documentation format? I hadn't seen this before
[2012-11-15 17:14:42 -0500] kallistec: jhayden: yeah, we'd been working on it for a while, and announced/released it at the community summit
[2012-11-15 17:15:06 -0500] jhayden: Nice, well done!
[2012-11-15 17:15:27 -0500] kallistec: there should be pointers from the wiki to docs.opscode.com where the new stuff is completed
[2012-11-15 17:17:01 -0500] kallistec: yeah, we have a technical writer now who is both awesome at technical writing and a Sounders fan
[2012-11-15 17:17:10 -0500] kallistec: A+ on both accounts
[2012-11-15 17:25:51 -0500] geekbri: technical writers live my nightmare.  A+ to then
[2012-11-15 17:25:52 -0500] geekbri: them
[2012-11-15 17:37:11 -0500] Tensibai: deploypath = node[:sterling].attribute?(deploypath) ?  node[:sterling][:deploypath] : "/opt" <= can someone points my error there ? (I'm a little tired right now)
[2012-11-15 17:37:54 -0500] _rc: .attribute?(deploypath) shoudl probably be .attribute?('deploypath')
[2012-11-15 17:38:03 -0500] _rc: or as a symbol
[2012-11-15 17:38:11 -0500] Tensibai: awww, thanks
[2012-11-15 17:38:27 -0500] maek: anyone using the knife-acl plugin know how to add/remove an acl for the create permission on object groups like nodes or clients, vs individual permissions for each node or client?
[2012-11-15 18:15:08 -0500] mhalligan: any thoughts on http://tickets.opscode.com/browse/CHEF-1650 ?
[2012-11-15 18:24:21 -0500] ellisera: ohai chefs
[2012-11-15 18:26:28 -0500] ellisera: does the ec2 plugin require a X.509 certificate to create and bootstrap new nodes with knife, or does it only use the was access key ID and was secret access key ID?
[2012-11-15 18:27:51 -0500] ellisera: I noticed in the configuration information that it only lists the access key ID and secret access key ID, yet I get this error when I try to use knife ec2 server create -I ami-eafa5883 -N testserv -x ubuntu to create a server: ERROR: Fog::Compute::AWS::NotFound: The key pair 'test.pem' does not exist
[2012-11-15 18:38:16 -0500] ellisera: any input on how to debug this would be greatly appreciated
[2012-11-15 18:40:34 -0500] Majost: When writing a cookbook which starts a service; is it best practice to do -- action :nothing
[2012-11-15 18:40:49 -0500] Majost: and then only when config files are changed, to do a restart?
[2012-11-15 18:41:12 -0500] Majost: I ask because I am seeing start failures in the chef-client daemon logs
[2012-11-15 18:41:34 -0500] Majost: and I am not sure what the best was to prevent the issue is
[2012-11-15 18:44:08 -0500] Majost: ah
[2012-11-15 18:44:08 -0500] Majost: nm
[2012-11-15 18:44:13 -0500] Majost: I found a bug in my init script
[2012-11-15 18:44:14 -0500] Majost: hah
[2012-11-15 18:59:39 -0500] awgross: anyone here use minitest-chef cookbook and get it to work with the CI reports?  I used to have it working but not it will never create the file (tests run fine)
[2012-11-15 19:14:05 -0500] itchyouch: Hey. Was wondering how people were implementing environments in chef?  Like test, staging, prod, etc?
[2012-11-15 19:15:12 -0500] coderanger: itchyouch: With environments?
[2012-11-15 19:16:10 -0500] itchyouch: Yea.  Like repository based, having multiple chef servers
[2012-11-15 19:16:18 -0500] itchyouch: Using versioning
[2012-11-15 19:16:29 -0500] itchyouch: I suppose I'm looking for a best practices guide so to speak
[2012-11-15 19:17:24 -0500] coderanger: itchyouch: Not sure what you mean
[2012-11-15 19:17:40 -0500] coderanger: itchyouch: http://docs.opscode.com/essentials_environments.html
[2012-11-15 19:20:25 -0500] itchyouch: coderanger: more specifically, is everyone running the chef client daemonized or manually in production.  How does one take a cookbook that has been changed and get it to production.
[2012-11-15 19:20:56 -0500] coderanger: Yes, most people run chef-client either daemonized or from cron
[2012-11-15 19:21:10 -0500] coderanger: Use env version specs to promote new cookbook versions
[2012-11-15 19:22:13 -0500] itchyouch: So does the env versions have to be set per cookbook?  Or are the recipes all a unified version?
[2012-11-15 19:22:30 -0500] coderanger: versions are per-cookbook
[2012-11-15 19:22:47 -0500] itchyouch: Gotcha.  So I should take advantage of the cookbook freezing
[2012-11-15 19:23:19 -0500] coderanger: Freezing is a separate thing, to prevent people from clobbering versions in use in prod
[2012-11-15 19:23:28 -0500] itchyouch: Right
[2012-11-15 19:26:50 -0500] itchyouch: On another note, I have about 1000 files in svn mostly text and scripts that need to be deployed to various nodes.  There's probably a set of 200-300 common files. That go everywhere, then different files goto different sets of hosts.  Was anyone dealing with something similar?  Ive been debating between running my own repository and building rpms with fpm, or building a custom cookbook that  deploys the files
[2012-11-15 19:27:32 -0500] itchyouch: Basically using package: install vs, update the rom to the latest
[2012-11-15 19:27:34 -0500] itchyouch: Rpm
[2012-11-15 19:27:40 -0500] coderanger: itchyouch: People do both, just a question of how much time you want to spend
[2012-11-15 19:29:42 -0500] itchyouch: coderanger: Yea, I figured.  I see the fpm route as one slick route and the cookbook route as another.
[2012-11-15 19:29:45 -0500] atrius: what determines whether a package on an ubuntu system is installed via dpkg or apt-get?
[2012-11-15 19:30:12 -0500] coderanger: atrius: the #source attr
[2012-11-15 19:30:26 -0500] coderanger: atrius: If you give a raw .deb, it can't use apt-get
[2012-11-15 19:31:08 -0500] atrius: coderanger: ah, okay... so if you want it to use apt-get then just give it a package name?
[2012-11-15 19:31:59 -0500] coderanger: Yes
[2012-11-15 19:32:06 -0500] coderanger: It Does The Right Thing
[2012-11-15 19:32:30 -0500] atrius: lol.. got you
[2012-11-15 19:32:50 -0500] itchyouch: atrius: I suppose in the end copying a file is copying a file.  The benefits I see with rpms is that the admins are not mucking with cookbooks
[2012-11-15 19:33:14 -0500] atrius: i'm trying to use the riak recipe (currently unmodified) and since it is using dpkg, there's no dependency solving :(
[2012-11-15 19:33:22 -0500] itchyouch: On the other hand being on the cookbooks lets the file deployment needs to be architecture independent
[2012-11-15 19:34:10 -0500] itchyouch: Say if we move from centos to Ubuntu
[2012-11-15 19:34:46 -0500] coderanger: If you are using FPM, thats a three-character change in the build script
[2012-11-15 19:34:57 -0500] atrius: i could solve the dependencies myself.. but wouldn't that somewhat defeat the point of using chef for such things in the first place?
[2012-11-15 19:34:59 -0500] coderanger: The problem with fpm is you need to make a fairly complex build infra
[2012-11-15 19:35:26 -0500] itchyouch: You mean to go from checkin to package
[2012-11-15 19:35:31 -0500] coderanger: atrius: Thats up to the cookbook author :)
[2012-11-15 19:35:52 -0500] coderanger: atrius: My understanding was the basho shipped standalone builds though, I would think there would be no deps
[2012-11-15 19:36:00 -0500] coderanger: itchyouch: yes
[2012-11-15 19:36:43 -0500] itchyouch: The cost seems to be similar.  With fpm, you build the package, then put it in the repo amd run createrepo.  Without, you checkin a file, then upload it to the appropriate cookbook then knife upload cookbook
[2012-11-15 19:36:43 -0500] atrius: coderanger: you mean stand alone debs? or standalone cookbooks?
[2012-11-15 19:36:50 -0500] coderanger: atrius: debs
[2012-11-15 19:37:06 -0500] coderanger: http://docs.basho.com/riak/latest/tutorials/installation/Installing-on-Debian-and-Ubuntu/
[2012-11-15 19:37:12 -0500] coderanger: atrius: Looks like the only system dep is ssl
[2012-11-15 19:37:48 -0500] itchyouch: Or you have the files directly in the cookbooks in the repo and manage them that way.
[2012-11-15 19:38:13 -0500] atrius: coderanger: true, and that is what it is failing on.. i could easily install it myself of course... my concern is more general.. how common is it to run into such a problem with dependencies?
[2012-11-15 19:38:18 -0500] coderanger: atrius: which the cookbook handles https://github.com/basho/riak-chef-cookbook/blob/master/recipes/default.rb#L31
[2012-11-15 19:38:42 -0500] coderanger: atrius: What OS are you on?
[2012-11-15 19:38:43 -0500] tolland: ok, so now I have the other problem!  if I move the dependency to install tomcat into another recipe, the thing is still starting up when it gets restarted again by the chef-solo recipe in the next recipe in the run list
[2012-11-15 19:38:53 -0500] atrius: coderanger: ubuntu 12.04
[2012-11-15 19:39:07 -0500] coderanger: atrius: If thats the cookbook you are using, it looks like it is handling everything
[2012-11-15 19:39:34 -0500] atrius: coderanger: hmmm.. i wonder if i've got the run list wrong or something?
[2012-11-15 19:39:44 -0500] coderanger: atrius: Whats the error?
[2012-11-15 19:40:12 -0500] atrius: coderanger: in short, it is trying to install riak without installing libssl
[2012-11-15 19:40:34 -0500] coderanger: Do you see it referencing package[libssl0.9.8] anywhere in the debug output?
[2012-11-15 19:41:06 -0500] coderanger: alternatively, is there something odd in node['platform']?
[2012-11-15 19:42:32 -0500] atrius: coderanger: no, no reference to libssl anything.. and i'm not sure where i'm looking for the other one..
[2012-11-15 19:42:53 -0500] coderanger: atrius: Can you just pastebin the run output with -l debug?
[2012-11-15 19:43:03 -0500] atrius: knife node show says that Platform is ubuntu 12.04
[2012-11-15 19:43:21 -0500] atrius: coderanger: i presume you mean the run of chef-client?
[2012-11-15 19:43:26 -0500] coderanger: yes
[2012-11-15 19:43:36 -0500] atrius: sure, one moment
[2012-11-15 19:45:27 -0500] atrius: coderanger: http://pastebin.com/88cQbVWx
[2012-11-15 19:46:30 -0500] coderanger: ellisera: You weren't in here when I went to respond
[2012-11-15 19:47:22 -0500] coderanger: ellisera: regardless, your issue is that you need to give the name of a keypair in your EC2 acct, that is used for the initial SSH creds
[2012-11-15 19:47:46 -0500] ellisera: coderanger: I never logged out, maybe a glitch on my irc client?
[2012-11-15 19:48:50 -0500] coderanger: Or I didn't tab complete correctly, dunno
[2012-11-15 19:48:51 -0500] ellisera: coderanger: it's the correct name for the key pair, the correct key :)
[2012-11-15 19:49:03 -0500] coderanger: ellisera: This isn't an x509 auth key
[2012-11-15 19:49:11 -0500] coderanger: this is an ec2 security key pair name
[2012-11-15 19:49:58 -0500] ellisera: coderanger: Yup, that's what I'm using and what I've been having problems with. I only asked about x.509 because I know someone that uses those keys with puppet for AWS instance creation
[2012-11-15 19:50:30 -0500] coderanger: ellisera: http://i.coderanger.net/GTDIr.png
[2012-11-15 19:50:50 -0500] coderanger: atrius: hmmm
[2012-11-15 19:50:53 -0500] ellisera: coderanger: once again, yes, that's exactly where that key came from
[2012-11-15 19:51:08 -0500] coderanger: atrius: From your workstation can you run 'knife node show <that node's name> -a platform'
[2012-11-15 19:51:31 -0500] coderanger: ellisera: Whats the full knife command you are running
[2012-11-15 19:51:54 -0500] atrius: coderanger: ubuntu
[2012-11-15 19:52:05 -0500] coderanger: atrius: okay, so thats correct
[2012-11-15 19:52:37 -0500] ellisera: coderanger: knife ec2 server create -I ami-eafa5883 -N testserv -x ubuntu
[2012-11-15 19:53:01 -0500] ellisera: I already have the region and zones set in knife.rb
[2012-11-15 19:53:46 -0500] coderanger: You aren't giving a key ID at all, is that set in knife.rb too?
[2012-11-15 19:54:43 -0500] coderanger: atrius: If you knife cookbook show ..., do you see https://github.com/basho/riak-chef-cookbook/blob/master/recipes/default.rb#L31 in there in the version on your chef server?
[2012-11-15 19:55:13 -0500] ellisera: coderanger: yup, already put it in knife.rb
[2012-11-15 19:55:35 -0500] coderanger: ellisera: And y our key ID is literally 'test.pem', not 'test'?
[2012-11-15 19:55:53 -0500] ellisera: coderanger: yes, it is
[2012-11-15 19:56:07 -0500] bencaron: Is there a way to know the name of the currently-executing cookbook in a recipe?
[2012-11-15 19:56:45 -0500] jtimberman: bencaron: there's a method, cookbook_name
[2012-11-15 19:57:09 -0500] bencaron: on the node object?
[2012-11-15 19:57:17 -0500] jtimberman: bencaron: no, a recipe dsl method
[2012-11-15 19:57:21 -0500] coderanger: Just in the recipe context
[2012-11-15 19:57:34 -0500] coderanger: Also available on all resources if you want to know where they were defined
[2012-11-15 19:57:49 -0500] ellisera: coderanger: I followed the instructions from the opscode guide for bootstrapping ec2 servers, made sure I put in the authentication like they specified
[2012-11-15 19:57:55 -0500] coderanger: ellisera: Thats all I have then, Amazon seems to disagree that that is a valid key ID
[2012-11-15 19:58:08 -0500] coderanger: ellisera: Want to post a screenshot of your key pair list?
[2012-11-15 19:58:27 -0500] bencaron: jtimberman: thx, will try that
[2012-11-15 19:58:57 -0500] ellisera: coderanger: I've used that key pair since to manually spin up servers, and sshing into those servers off the same box I'm using the knife plugin on
[2012-11-15 19:59:13 -0500] coderanger: atrius: Yeah, your line numbers don't match up with the current recipe file in github
[2012-11-15 19:59:27 -0500] coderanger: atrius: Guessing you either have an old recipe or something didn't get uploaded correctly
[2012-11-15 19:59:41 -0500] atrius: coderanger: well nuts... :D
[2012-11-15 20:00:01 -0500] coderanger: atrius: Which cookbook are you using?
[2012-11-15 20:00:18 -0500] coderanger: ellisera: Right, it doesn't want the local filename of the key though, it needs the Amazon name for it
[2012-11-15 20:00:28 -0500] coderanger: You put the local filename in the -i option
[2012-11-15 20:00:59 -0500] ellisera: coderanger: you mean without the .pem ending perhaps?
[2012-11-15 20:01:02 -0500] atrius: coderanger: the one that showed up from a knife install site cookbook riak :D
[2012-11-15 20:01:37 -0500] coderanger: ellisera: Yes, thats why I asked if the ID is actually 'test.pem', it seems more likely the ID is 'test'
[2012-11-15 20:01:58 -0500] coderanger: The file corresponding to that is 'test.pem'
[2012-11-15 20:03:13 -0500] coderanger: atrius: Confirmed, looks like basho hasn't done a release in a bit
[2012-11-15 20:03:32 -0500] coderanger: atrius: Just use librarian or berkshelf (which hopefully you are using anyway) to pull from git directly
[2012-11-15 20:03:46 -0500] ellisera: coderanger: ah *headdesk* thanks! Now I'm getting another lovely error: ERROR: Fog::Compute::AWS::NotFound: The instance ID 'i-3afd5945' does not exist
[2012-11-15 20:04:02 -0500] ellisera: I take that to mean that I'm trying to create in the wrong region?
[2012-11-15 20:04:26 -0500] atrius: coderanger: given i didn't know about them.. i wasn't using them... :D
[2012-11-15 20:04:44 -0500] coderanger: atrius: If you are just starting out, I would probably go with berkshelf
[2012-11-15 20:05:04 -0500] coderanger: atrius: If you are familiar with other tools, kind of like bundler or pip -r
[2012-11-15 20:05:24 -0500] atrius: coderanger: seems like a good idea
[2012-11-15 20:05:24 -0500] ellisera: coderanger: but it seems it created the instance
[2012-11-15 20:05:25 -0500] rgsteele_: Are there any legitimate reasons not to namespace roles?  Trying to add a little organization to a potentially cluttersome setup.
[2012-11-15 20:05:30 -0500] coderanger: Takes a simple requirements file and grabs the needed cookbooks and handles sync stuffs
[2012-11-15 20:05:46 -0500] atrius: i suspect i'll end up redoing my whole chef setup at some point too... purge all the learning steps garbage
[2012-11-15 20:05:47 -0500] rgsteele_: (potentially = not now, but definitely headed there)
[2012-11-15 20:05:49 -0500] coderanger: rgsteele_: If you are that far down the path, just use cookbooks as roles
[2012-11-15 20:06:08 -0500] coderanger: rgsteele_: See also, reset's usual rant :)
[2012-11-15 20:06:20 -0500] ellisera: and in the correct AWS region that I needed too
[2012-11-15 20:06:35 -0500] ellisera: so why would I get instance ID doesn't exist then?
[2012-11-15 20:06:37 -0500] yfeldblum: rgsteele_, why would you namespace roles? what would the role names look like?
[2012-11-15 20:06:38 -0500] coderanger: ellisera: Guessing it failed when it tried to get info to bootstrap it
[2012-11-15 20:06:39 -0500] rgsteele_: coderanger: Well, I think there could be some valid circumstances, but I was kinda looking to see if anyone *had* a rant against it :)
[2012-11-15 20:06:43 -0500] coderanger: ellisera: Maybe API lag?
[2012-11-15 20:07:07 -0500] coderanger: ellisera: The process is boot node, wait a bit, poke the API to get the IP for it, SSH in and install chef
[2012-11-15 20:07:26 -0500] coderanger: ellisera: If the bootstrap is what failed, you can use knife bootstrap to do it directly
[2012-11-15 20:07:37 -0500] coderanger: rgsteele_: Basically that its a losing battle
[2012-11-15 20:07:58 -0500] coderanger: rgsteele_: If you have that many roles, you are going to hit all the other bumps in the roles system like lack of versioning
[2012-11-15 20:08:22 -0500] coderanger: rgsteele_: and if you are doing a big rework, might as well go all in :)
[2012-11-15 20:08:32 -0500] rgsteele_: coderanger: Fair point.
[2012-11-15 20:09:09 -0500] coderanger: So not a bad solution itself, just by virtue of the people that will be asking it is unlikely to be what you want, kind of self-defeating in a way
[2012-11-15 20:09:19 -0500] ellisera: code ranger o.0 oh wow, just did knife ec2 server list, and all the instances using that key just popped up
[2012-11-15 20:09:34 -0500] atrius: do any of you guys know of a good "you know nothing, here's how you get started" guide for chef?
[2012-11-15 20:09:40 -0500] coderanger: But there is always a middle ground and I'm oversimplifying because I'm hungry and want to go get lunch :)
[2012-11-15 20:09:58 -0500] coderanger: ellisera: Yep, just uses fog to poke the EC2 APIs
[2012-11-15 20:10:15 -0500] rgsteele_: Not a big rework, and honestly, this is one exception where the approach kinda fits, but your advice is duly noted (and appreciated).
[2012-11-15 20:10:27 -0500] coderanger: atrius: You're in it :)
[2012-11-15 20:10:44 -0500] coderanger: Okay, meant to go get lunch 45 minutes ago, back in a while
[2012-11-15 20:11:10 -0500] atrius: coderanger: :D
[2012-11-15 20:11:53 -0500] ellisera: coderanger: thanks so much, will probably poke you when you get back with more questions if that's ok
[2012-11-15 20:11:58 -0500] ellisera: :)
[2012-11-15 20:15:13 -0500] julian_: Hey guys, what is the easiest way to add users to groups per usre?
[2012-11-15 20:15:17 -0500] julian_: user that is?
[2012-11-15 20:15:58 -0500] atrius: is it right to say that the webui is more restrictive than it is worth?
[2012-11-15 20:25:59 -0500] rtl: I installed the public 'users' cookbook into ./cookbooks. Do I want a ./data_bags/users/admin.json to create a user now?
[2012-11-15 20:28:09 -0500] julian_: rtl: You need to build the users databag and add users to it.
[2012-11-15 20:31:06 -0500] rtl: julian_: is it possible to have knife write directly to disk at the project root rather than having to run a server?
[2012-11-15 20:31:41 -0500] rtl: I'm hand editing that data_bags/users/admin.json right now, so probably my path is wrong, or I don't understand how to wire data bags to cookbooks.
[2012-11-15 20:33:24 -0500] makerbreakr: rt1 are you using knife?
[2012-11-15 20:36:12 -0500] rtl: makerbreakr: no (at least, not for 'data bag create users')
[2012-11-15 20:36:24 -0500] geekbri: here's a service resource question for ya'll.  I've defined a service resource, I have stated that it does NOT support the status command.  It is using Chef::Provider::Service::Redhat because it is a centos system.  It seems that it still tries to call /sbin/service myservice status.  I have specified a pattern for patching for status.  I don't think this is what it shoudl be doing
[2012-11-15 20:36:26 -0500] geekbri: any ideas?
[2012-11-15 20:37:50 -0500] makerbreakr: rt1, i typically create my databag on my workstation
[2012-11-15 20:38:40 -0500] jtimberman: geekbri: supports status is hardcoded into the redhat service provider. https://github.com/opscode/chef/blob/master/lib/chef/provider/service/redhat.rb#L35
[2012-11-15 20:38:52 -0500] rtl: makerbreakr: I'd rather just make files/dirs myself than run a local server to do that.
[2012-11-15 20:38:57 -0500] jtimberman: geekbri: you can use status_command to tell the service what the status command is though.
[2012-11-15 20:39:17 -0500] geekbri: jtimberman: I saw that its hardcoded, but i figured that setting supports :status => false would override that?
[2012-11-15 20:40:27 -0500] geekbri: jtimberman: I did Chef::Log.info(resources("service[myservice]").supports)
[2012-11-15 20:40:48 -0500] geekbri: jtimberman: and it shows {:status=>false, :restart=>true, :start=>true, :stop=>true}
[2012-11-15 20:43:00 -0500] poolpog: howdy what are good ways to proviude individual packages (.debs) to chef to use? put them in the chef repository? Put them on a generally available mount? something else?
[2012-11-15 20:45:09 -0500] geekbri: jtimberman: So I guess the answer is, on redhat platforms i'll have to specify my own pgrep status command instead of relying on the pattern resource attribute since you cannot override the supports[:status] with the recipe DSL ?
[2012-11-15 20:46:35 -0500] rafaelmagu: Anyone having issues with the latest omnibus_updater cookbook not uploading to the server because it has "Invalid ruby files in cookbook: omnibus_updater-0.0.5" ?
[2012-11-15 20:50:29 -0500] geekbri: jtimberman: Well thanks, I ended up just using pgrep as the status_command, it's just a little less portable this way :)
[2012-11-15 20:52:19 -0500] jhulten: Anyone know if chefspec can match a failed chef run? Like Chef::Log.fatal
[2012-11-15 21:02:01 -0500] heathsnow: Hmmmmm....anyone automating the bootstrap process?  If so, how do you get around the sudo password prompt?  I automatically teardown/build Windows boxes but the Ubuntu servers are prompting for the sudo password when bootstraping :S
[2012-11-15 21:02:53 -0500] phantasm66: cannot seem to find this in the docs, specifically.. but if i include_recipe cookbook::recipe at the top of a recipe can i subscribe a service to a resource in the include_recipe at the top of my recipe?
[2012-11-15 21:07:24 -0500] yfeldblum: phantasm66, yes
[2012-11-15 21:07:49 -0500] phantasm66: yfeldblum: awesome.. thanks
[2012-11-15 21:17:30 -0500] coderanger: heathsnow: What cloud system is this? Most give you a sudo nopasswd account to start with
[2012-11-15 21:17:38 -0500] coderanger: heathsnow: An alternative is to go in as root
[2012-11-15 21:17:49 -0500] coderanger: sudo with passwords just needs to die
[2012-11-15 21:18:02 -0500] coderanger: Or rather, the idea of passwords on servers needs to die
[2012-11-15 21:29:05 -0500] geekbri: chmod 777, problem solved.
[2012-11-15 21:29:10 -0500] geekbri: chmod 777 -R /
[2012-11-15 21:29:15 -0500] kryptek: hehe
[2012-11-15 21:29:28 -0500] mobilemike: Looking for some attribute management advise, anyone game?
[2012-11-15 21:29:53 -0500] gchristensen: mobilemike: best to just ask your question usually
[2012-11-15 21:29:57 -0500] mobilemike: K
[2012-11-15 21:30:04 -0500] kryptek: You have the floor, mike.
[2012-11-15 21:30:32 -0500] mobilemike: I've got too community cookbooks that _almost_ work together. Rather than forking either, I'd like to possibly put some glue between them.
[2012-11-15 21:31:10 -0500] kryptek: Glue in the proverbial sense, I'm assuming
[2012-11-15 21:31:33 -0500] kryptek: What exactly is it that these two cookbooks share so commonly that you wish to converge them?
[2012-11-15 21:31:38 -0500] mobilemike: The rediso cookbook (which manages Redis) put's its attributes into some attributes under 'redisio'
[2012-11-15 21:31:45 -0500] yfeldblum: mobilemike, include_recipe the first one, do some ruby, and include_recipe the second one?
[2012-11-15 21:31:54 -0500] geekbri: mobilemike: Just FYI I'm working on a new release of the redisio cookbook
[2012-11-15 21:31:59 -0500] coderanger: mobilemike: Use miah's redis cookbook
[2012-11-15 21:32:13 -0500] geekbri: or you could just ignore my redis cookbook and use hers!
[2012-11-15 21:32:17 -0500] geekbri: :-P
[2012-11-15 21:32:33 -0500] mobilemike: And the data dog cookbook (which manages the Datadogs metrics service agent) looks for attributes under the 'redis' key
[2012-11-15 21:32:52 -0500] coderanger: Reminds me I need to nuke my redis one from the cookbooks site since no one should ever use it
[2012-11-15 21:33:01 -0500] mobilemike: So, I'd like to (maybe?) use a wrapper that searches one and puts them in the other?
[2012-11-15 21:33:08 -0500] mobilemike: Or
[2012-11-15 21:33:14 -0500] geekbri: I think my redis cookbook is good, I like it :-P .  It isn't perfect but I'm working on improving the weak points in it.
[2012-11-15 21:33:16 -0500] yfeldblum: coderanger, no thanks
[2012-11-15 21:33:35 -0500] yfeldblum: coderanger, if someone's using it with librarian-chef, they might be mighty pissed if you remove it from the community site
[2012-11-15 21:33:45 -0500] geekbri: mobilemike: its' generally bad for for a cookbook to reach into another cookbooks attributes and rely on them.  I personally would probably modify the second cookbook to allow for the modification of wher eit looks for those attributes
[2012-11-15 21:33:57 -0500] coderanger: mobilemike: in an attributes file just add something like node.override[:redis] = node[:redis].to_hash
[2012-11-15 21:34:04 -0500] geekbri: coderanger: perhaps update it with some chef log spam that suggest the use of a different cookbook!
[2012-11-15 21:34:07 -0500] coderanger: yfeldblum: 99% sure mine has never worked
[2012-11-15 21:34:20 -0500] coderanger: The cookbook name doesn't match the folder name
[2012-11-15 21:34:27 -0500] coderanger: So it breaks all the knife commands
[2012-11-15 21:34:28 -0500] yfeldblum: geekbri, but it's good form for one recipe to set attributes and then include_recipe another recipe that reads the attributes
[2012-11-15 21:34:35 -0500] mobilemike: My preference right now is to avoid forking, if possible.
[2012-11-15 21:34:51 -0500] coderanger: mobilemike: You can do that in any cookbook, so just make a new one
[2012-11-15 21:34:56 -0500] coderanger: redis-glue or something
[2012-11-15 21:35:11 -0500] yfeldblum: mobilemike, in your own top-level recipe: include_recipe the first one, do some ruby, and include_recipe the second one
[2012-11-15 21:35:12 -0500] coderanger: You can make the copy work in either direction
[2012-11-15 21:35:24 -0500] coderanger: yfeldblum: Or just use an attribute file :)
[2012-11-15 21:35:32 -0500] coderanger: Saves the trouble
[2012-11-15 21:35:59 -0500] mobilemike: coderanger: But do that in a dedicated cookbook that glues the two?
[2012-11-15 21:36:03 -0500] coderanger: Sure
[2012-11-15 21:36:11 -0500] coderanger: Or just a base utils cookbook
[2012-11-15 21:36:16 -0500] yfeldblum: coderanger, IMO the input data should be intention-related rather than implementation-related; a top-level recipe can read the intentions and do the implementation details in code
[2012-11-15 21:36:23 -0500] coderanger: probably an antipattern, but most people end up with one
[2012-11-15 21:36:49 -0500] yfeldblum: coderanger, propatterns in normal software are likely not antippaterns in chef
[2012-11-15 21:36:50 -0500] coderanger: yfeldblum: Uh, not sure how thats related
[2012-11-15 21:37:12 -0500] geekbri: mobilemike: just FYI if you have any issues with the redisio cookbook, please submit them on the github issues page :).  Also a new release should be forthcoming sometime between tommorow -> monday
[2012-11-15 21:37:26 -0500] cheflevelramen: I have another quick Ruby/Chef question. In the following line:
[2012-11-15 21:37:29 -0500] cheflevelramen: default["my_application"]["config_location"] = "/etc/myapp.conf"
[2012-11-15 21:37:31 -0500] yfeldblum: coderanger, hmm maybe i misread you
[2012-11-15 21:37:42 -0500] cheflevelramen: what is this syntax: default["my_application"]["config_location"]
[2012-11-15 21:37:55 -0500] cheflevelramen: Is that Chef custom DSL, or is that standard Ruby syntax
[2012-11-15 21:38:09 -0500] coderanger: yfeldblum: You are advocating using a recipe file with some include_recipe logic, I am saying that is a simpler way because how ordering works re: loading attr files in cookbooks
[2012-11-15 21:38:14 -0500] mobilemike: gekbri: So, here's a question that I solved myself, but maybe there's a better way.
[2012-11-15 21:38:18 -0500] coderanger: cheflevelramen: Neither really
[2012-11-15 21:38:28 -0500] coderanger: cheflevelramen: attr files are run with the node object as the global scope
[2012-11-15 21:38:38 -0500] coderanger: cheflevelramen: so thats node.default.....
[2012-11-15 21:38:46 -0500] yfeldblum: coderanger, if it gets a little complicated at all, then that becomes doubtful
[2012-11-15 21:39:26 -0500] coderanger: cheflevelramen: there is also a def node self end available too, so if you prefer to write that as node.default['asdfasdfa'] it will work too :)
[2012-11-15 21:39:42 -0500] mobilemike: geekbri: I wrote a cookbook that would setup a backup job. It looks for the redis data dir inside the redisio attribute, so that I don't have to specify it in more than one place.
[2012-11-15 21:39:53 -0500] geekbri: mobilemike: seems to make sense.
[2012-11-15 21:40:18 -0500] geekbri: When I said you shouldn't reach into existing attributes, It's not like a hard set in iron rule.  I do it in places.  You just need to be careful when you do something like that.
[2012-11-15 21:40:18 -0500] mobilemike: geekbri: But, the redisio key separates 'default' vaiues from server specific ones.
[2012-11-15 21:40:41 -0500] geekbri: mobilemike: urgh yeah thats a pain huh.  You could merge them yourself like I do.
[2012-11-15 21:40:59 -0500] cheflevelramen: @coderanger: I see. So it's just setting variables for the global node object?
[2012-11-15 21:41:02 -0500] geekbri: mobilemike: I almost regret allowing for multipel redis configurations on a single server.  I think the merge of that information causes more problems than it solves sometimes.
[2012-11-15 21:41:15 -0500] coderanger: cheflevelramen: Yes
[2012-11-15 21:41:34 -0500] mobilemike: geekbri: So, I ended up doing this, which seemed a bit heavyweight:   redis_attributes = node['redisio']['default_settings'].to_hash.merge(node['redisio']['servers'].first)
[2012-11-15 21:41:46 -0500] geekbri: mobilemike: probably what I would have done too.
[2012-11-15 21:41:58 -0500] geekbri: mobilemike: it's messy, but its accurate :-\
[2012-11-15 21:42:29 -0500] mobilemike: Okay. Plus, it's hardcoding the 'first', so it won't even work right if i ever did have a second instance (which i don't _plan_ on, but...)
[2012-11-15 21:43:09 -0500] geekbri: mobilemike: yeah but that would be easy enough to solve.  You could just do a each loop
[2012-11-15 21:43:22 -0500] mobilemike: Right, seemed premature right now
[2012-11-15 21:43:42 -0500] geekbri: its your code, as long as you are aware of that issue, i wouldn't consider it a big deal.
[2012-11-15 21:43:51 -0500] geekbri: you don't want to prematurely optimize sometimes )
[2012-11-15 21:43:52 -0500] geekbri: :)
[2012-11-15 21:44:06 -0500] mobilemike: Otherwise, so far so good.
[2012-11-15 21:44:12 -0500] mobilemike: Thanks for the cookbook!
[2012-11-15 21:44:20 -0500] geekbri: mobilemike: like i said, new release coming soon :)
[2012-11-15 21:45:06 -0500] mobilemike: I don't see anything on GH. Are you working in a local branch
[2012-11-15 21:45:06 -0500] mobilemike: ?
[2012-11-15 21:45:17 -0500] geekbri: mobilemike: I am.  I have a bunch of issues assigned to a milestone
[2012-11-15 21:45:27 -0500] geekbri: I am just testing it on a bunch of distros before I push it to master
[2012-11-15 21:45:48 -0500] geekbri: I've had users get angry at me before for pushing not perfect code to master since they were apparently living off the HEAD of master.  I do not recommend such things.
[2012-11-15 21:46:28 -0500] geekbri: i've tested it on scientific linux, centos, and ubuntu so far.  the changes seem fine.  Just want to run it through a couple others first
[2012-11-15 21:46:37 -0500] mobilemike: Oh, okay. We're in the habit of pushing our locals to GH as separate branches quite often. Best of both worlds.
[2012-11-15 21:47:14 -0500] geekbri: mobilemike: yeah i've been considering a new branch for each version.
[2012-11-15 21:47:31 -0500] geekbri: I do that with many other projects, I had just initially deemed the codebase small and agile enough that it wasn't necessary :)
[2012-11-15 21:47:40 -0500] geekbri: I typically don't backport fixes as well.
[2012-11-15 21:48:15 -0500] mobilemike: NP. For me, it just gives visibility into the ongoing work. But, not a big deal.
[2012-11-15 21:48:23 -0500] geekbri: I'm probably about to push so
[2012-11-15 21:48:26 -0500] geekbri: theres your visibility ;)
[2012-11-15 21:50:43 -0500] geekbri: mobilemike: pushed :)
[2012-11-15 21:52:17 -0500] mobilemike: Well, now I feel like I've bullied you :)
[2012-11-15 21:52:23 -0500] heathsnow: @coderanger: no cloud but in house VMware Ubuntu servers.  Yeah, root is all I can think of too
[2012-11-15 21:52:41 -0500] coderanger: heathsnow: In-house means you control the base images ;-)
[2012-11-15 21:52:55 -0500] coderanger: heathsnow: Just make a new one with a standard acct that has sudo access
[2012-11-15 21:53:07 -0500] coderanger: heathsnow: (unless you are using preseed/kickstart)
[2012-11-15 21:53:52 -0500] geekbri: mobilemike: Nah I've been working on it today.  You just gave me the push that I needed to make sure I committed and pushed before I left work today :-P.  User interaction motivates me to fix things quicker
[2012-11-15 21:54:38 -0500] mobilemike: Not ready for 2.6 though, i see.
[2012-11-15 21:54:44 -0500] mobilemike: At least, not by default.
[2012-11-15 21:54:47 -0500] geekbri: mobilemike: it should be ready for 2.6, i've been testing with it
[2012-11-15 21:54:56 -0500] mobilemike: Yea, just the default
[2012-11-15 21:54:59 -0500] geekbri: mobilemike: Oh, ergh you mean in the attributes .  I can fix that.
[2012-11-15 21:55:04 -0500] mobilemike: Nah.
[2012-11-15 21:55:10 -0500] mobilemike: Just noticing.
[2012-11-15 21:55:21 -0500] geekbri: Eh its probably a good idea as 2.6 is considered the stable branch
[2012-11-15 21:55:24 -0500] mobilemike: Are you on 2.6 in prod?
[2012-11-15 21:55:26 -0500] geekbri: 2.4 is now listed as legacy.
[2012-11-15 21:55:28 -0500] geekbri: We aren't.
[2012-11-15 21:55:49 -0500] geekbri: But i've been testing on it.  I had to repair my version string grabbing thing as i noticed he changed how the version was reported using redis-server -v :-P
[2012-11-15 21:57:11 -0500] geekbri: Bumping the default version isn't too much of an issue, because by default safe_install is set to true and it won't upgrade your binaries unless you change that to false.
[2012-11-15 21:57:57 -0500] heathsnow: @coderanger: Yeah, I'll use root.  I suppose the daemon that runs chef-client it must be using an account in the root group.  Thanks
[2012-11-15 21:58:18 -0500] coderanger: heathsnow: Indeed, chef needs root access in most cases
[2012-11-15 21:58:28 -0500] coderanger: Unless you don't want to do much :)
[2012-11-15 21:58:28 -0500] geekbri: ok, its time for me to go home for the day
[2012-11-15 21:58:34 -0500] geekbri: mobilemike: I pushed that default version update :-P
[2012-11-15 22:03:48 -0500] j|: wow, so the omnibus install is basically just totally hosed right now
[2012-11-15 22:04:39 -0500] j|: is anyone working on fixing the chef-server::rubygems-install recipe and the rest of the chef-server cookbook to actually work with the "Install Chef Server through Chef Solo"
[2012-11-15 22:05:00 -0500] j|: because I'm fixing it now anyway, but I'm tempted to just hack through it and be done with it
[2012-11-15 22:05:13 -0500] josephholsten: j|: what?
[2012-11-15 22:05:19 -0500] j|: but, I could always take more time and make a solution that could be used by others
[2012-11-15 22:05:27 -0500] j|: josephholsten: what what?
[2012-11-15 22:05:40 -0500] josephholsten: how is omnibus hosed?
[2012-11-15 22:06:30 -0500] gsymons-di: \join #vagrant
[2012-11-15 22:06:34 -0500] gsymons-di: oops.
[2012-11-15 22:06:49 -0500] j|: well, more correctly, following the omnibus install, using chef-solo to bootstrap chef-server doesn't work
[2012-11-15 22:06:54 -0500] btm: josephholsten: the packages are on s3. when you run the install.sh script it collects your platform/version/arch and sends it to a service called Omnitruck which gives you the url to the right package.
[2012-11-15 22:07:22 -0500] j|: but, it looks like more the chef-server cookbook is a bit screwed.
[2012-11-15 22:07:36 -0500] j|: gems_dir is wrong, the init style scripts don't work
[2012-11-15 22:07:39 -0500] j|: they look in the wrong places
[2012-11-15 22:07:45 -0500] josephholsten: btm: is s3 down? is that why it's hosed?
[2012-11-15 22:07:46 -0500] j|: they're not even outputting an error
[2012-11-15 22:08:03 -0500] josephholsten: ah
[2012-11-15 22:08:31 -0500] j|: probably has nothing to do with omnibus
[2012-11-15 22:08:39 -0500] j|: just after using omnibus to install chef-solo
[2012-11-15 22:08:58 -0500] j|: then using the chef-server cookbook in the omnibus install chef-solo
[2012-11-15 22:09:14 -0500] j|: and using init style (default on ubuntu)
[2012-11-15 22:09:20 -0500] j|: nothing works and there's no errors.
[2012-11-15 22:10:02 -0500] j|: had to change the chef-server::rubygems-install recipe
[2012-11-15 22:10:23 -0500] j|: then apt-get install an extra package just to get through the chef-solo run
[2012-11-15 22:10:27 -0500] jtimberman: j|: Right - the chef-server cookbook is intended to be used wit hthe instructions on the wiki page, which use system ruby, and chef from rubygems.
[2012-11-15 22:10:36 -0500] j|: then after all that, the init scripts don't work
[2012-11-15 22:10:57 -0500] jtimberman: Don't use omnibus chef install to do a chef-server install with the cookbook.
[2012-11-15 22:11:20 -0500] j|: jtimberman: perhaps I missed that in the page
[2012-11-15 22:11:22 -0500] josephholsten: what is the best way to install chef-server today?
[2012-11-15 22:12:02 -0500] Litex: .debs are easy.
[2012-11-15 22:12:14 -0500] jtimberman: j|: honestly it might not be on the page.
[2012-11-15 22:13:31 -0500] jtimberman: j|: nope, doesn't look like it. Sorry that it's not clear.
[2012-11-15 22:13:55 -0500] j|: jtimberman: whatever, things happen. I work at a start up as well. C'est la vie something.
[2012-11-15 22:13:57 -0500] j|: sometimes
[2012-11-15 22:15:08 -0500] j|: hrm. I can't even find the flow that I was following on the website now
[2012-11-15 22:15:23 -0500] j|: website == wiki
[2012-11-15 22:16:03 -0500] Urocyon: on el6 systems I keep running into service startup problems, where chef has started a service, and then, do to writing a configuration file, wants to restart it.  While the first start returned without error, the service is actually still in a startup mode, and the restart fails.
[2012-11-15 22:16:30 -0500] j|: hrm. I just like when there are explicit references on what *not* to expect to work.
[2012-11-15 22:16:30 -0500] Urocyon: Technically, I think this is a problem with el6 init.d scripts, but I'm wondering if anyone has found a good workaround for this?
[2012-11-15 22:16:43 -0500] jtimberman: j|: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2012-11-15 22:16:57 -0500] j|: but, whatever. I guess I somehow put the links together in the wrong order
[2012-11-15 22:17:05 -0500] j|: and then read the pages incorrectly
[2012-11-15 22:17:11 -0500] jtimberman: j|: i updated the "install chef solo" bit, it says to use "Per Operating System Directions"
[2012-11-15 22:17:19 -0500] jtimberman: http://wiki.opscode.com/display/chef/Installing+Chef+Client+and+Chef+Solo
[2012-11-15 22:17:50 -0500] j|: yea, I think that's it.
[2012-11-15 22:17:56 -0500] j|: the first one
[2012-11-15 22:17:58 -0500] j|: exactly
[2012-11-15 22:18:24 -0500] heathsnow: Is there any doc on how to downgrade a chef version on a node?  I think a permissions error might be from running 10.16.2.
[2012-11-15 22:19:42 -0500] j|: haha.. yea, but the omnibus instructions still come first
[2012-11-15 22:20:12 -0500] j|: so unless you're really paying attention the flow looks as though you should use the omnibus directins
[2012-11-15 22:20:30 -0500] j|: at least that was my (mis)understanding
[2012-11-15 22:25:40 -0500] mobilemike: Can anyone point to a public cookbook that's an example of a large wrapper cookbook? Of the style that you're use instead of using a role.
[2012-11-15 22:29:56 -0500] jtimberman: mobilemike: i don't think those are necessarily going to be cookbooks made public because the point is customization.
[2012-11-15 22:30:07 -0500] mobilemike: Yes, that's what I figured.
[2012-11-15 22:30:20 -0500] poolpog: ok, I have a more specific question... To use a .deb package and include it directly int he cookbook, do I have to add the package itself as a cookbook_file, and then the package resource is the path to the local copy of the cookbook_file?
[2012-11-15 22:30:21 -0500] jtimberman: j|: yeah, sorry about that. the instructions were definitely written pre-omnibus packages.
[2012-11-15 22:30:32 -0500] mobilemike: It's tough, I can't even find one from a tutorial standpoint.
[2012-11-15 22:30:49 -0500] mobilemike: Just a number of posts and podcast references to it being a potentially good workflow.
[2012-11-15 22:31:13 -0500] poolpog: hm, did tat go thru
[2012-11-15 22:31:18 -0500] mobilemike: I'm very much a "learn by example" kinda guy
[2012-11-15 22:31:22 -0500] jtimberman: j|: and we're trying to get chef 11 ready for release, which will have chef server as an 'omnibus' package.
[2012-11-15 22:32:23 -0500] jtimberman: poolpog: yes, you'll want the cookbook_file resource first, then the dpkg_package resource.
[2012-11-15 22:32:55 -0500] Litex: mobilemike: They discussed that issue in the Google hangout linked from http://devopsanywhere.blogspot.it/2012/11/how-to-write-reusable-chef-cookbooks.html .   Nobody publishes the application/wrapper cookbooks, and there isn't yet a really good example/tutorial up.
[2012-11-15 22:33:32 -0500] poolpog: jtimberman, peffect, thanks
[2012-11-15 22:34:44 -0500] siezer: mobilemike I'm working on an example now
[2012-11-15 22:35:24 -0500] siezer: its super simple actually
[2012-11-15 22:40:46 -0500] gchristensen: anyone by chance know what comment=cloudconfig means in the fstab on an ec2 instance, referring to an EBS volume
[2012-11-15 22:41:15 -0500] erikh: j|: https://github.com/fnichol/knife-server
[2012-11-15 22:41:33 -0500] masterkorp: that link looks amazing
[2012-11-15 22:42:36 -0500] mhalligan: nice
[2012-11-15 22:45:58 -0500] erikh: if you're talking about knife-server, I'm using it a lot
[2012-11-15 22:46:01 -0500] erikh: it works pretty damned well
[2012-11-15 22:46:32 -0500] masterkorp: yes, i want set up a backup chef server someday
[2012-11-15 22:47:45 -0500] ev0ldave: erikh:  just in time, couchdb-dump not spitting out valid json file
[2012-11-15 22:47:57 -0500] occupant: I'm having trouble applying a role because chef says it can't locate a different role that I have deleted. This role is NOT referenced anywhere that I can see - is there some unexpected place I should be looking?
[2012-11-15 22:49:37 -0500] erikh: ev0ldave: ?
[2012-11-15 22:50:00 -0500] erikh: oh, the backup stuff
[2012-11-15 22:50:03 -0500] erikh: I'm not actually using that
[2012-11-15 22:50:11 -0500] erikh: so I can't speak to its quality
[2012-11-15 22:50:11 -0500] miah: sup
[2012-11-15 22:50:28 -0500] erikh: just using the automated creation bits
[2012-11-15 22:50:45 -0500] masterkorp: miah: http://notmuchmail.org/
[2012-11-15 22:51:14 -0500] miah: ok
[2012-11-15 23:01:01 -0500] ev0ldave: erikh:  ah, well, i'm dumping with python-couchdb tools but when creating test db in couch on same installation the load is complaining of invalid json format
[2012-11-15 23:01:13 -0500] erikh: yeah, over my head, sorry
[2012-11-15 23:02:14 -0500] poolpog: ok, so, we have one set of packages that are different from what is in the Ubuntu package repo. call it one package for this example...
[2012-11-15 23:03:01 -0500] poolpog: I want to install ours, but the difference is so minor I'm not sure that chef  will be able to identify that it should be installed over the Ubuntu default package
[2012-11-15 23:03:13 -0500] poolpog: does that concern even matter?
[2012-11-15 23:03:23 -0500] poolpog: i.e. am I fretting over a nonissue
[2012-11-15 23:04:53 -0500] poolpog: the next question is, if I include the package in the chef repo as a cookbook_file, then upgrade the package (which involves rebuilding it from source deb), do I have to do any sort of extra sauce to make sure it upgrades over top of the ubuntu default? I'm concerned about ubuntu package updates replacing this package but I only want to install the pacakge if the ubuntu on is there, not ours
[2012-11-15 23:04:58 -0500] JasonBox: Hrm, so I haven't seen this before, but for some reason my recipe under 10.16.2-1 is skipping entire resources, but I can't see why
[2012-11-15 23:05:11 -0500] ev0ldave: read it too fast, nothing for couchdb
[2012-11-15 23:09:14 -0500] willejs: hi, I'm trying to use the supervisord cookbook...
[2012-11-15 23:09:32 -0500] willejs: how do i include the resource in a recipe in another cookbook?
[2012-11-15 23:13:38 -0500] masterkorp: is it a lwrp ?
[2012-11-15 23:14:37 -0500] willejs: yeah, i think so
[2012-11-15 23:14:54 -0500] JasonBox: Chef executes compiled resources in the order defined, yes?
[2012-11-15 23:15:04 -0500] masterkorp: You just need to include the default recipe, either from the recipe, of in the role/node run list
[2012-11-15 23:15:24 -0500] masterkorp: if i am using a lwrp i use include_recipe
[2012-11-15 23:15:40 -0500] masterkorp: and state it on the role too, just so its eay to remenber
[2012-11-15 23:16:45 -0500] willejs: i have used the include_recipe bit in the start of the recipe
[2012-11-15 23:18:18 -0500] jtimberman: willejs: you need to depend on the supervisor cookbook
[2012-11-15 23:18:35 -0500] willejs: declared that in the metadata.rb file too it seems
[2012-11-15 23:19:01 -0500] willejs: I'm getting this error
[2012-11-15 23:19:01 -0500] willejs: Cannot find a resource for supervisor_service on ubuntu version 12.04
[2012-11-15 23:24:03 -0500] willejs: does anyone know any cookbooks that use the supervisord resource, so i can reference them?
[2012-11-15 23:25:26 -0500] jtimberman: willejs: opscode publishes a 'supervisor' cookbook that has the supervisor_service LWRP
[2012-11-15 23:25:44 -0500] masterkorp: i just use runit for supervising
[2012-11-15 23:25:48 -0500] willejs: yeah thats what I'm including in my run list
[2012-11-15 23:26:11 -0500] willejs: before my cookbook that references to the resource
[2012-11-15 23:28:11 -0500] JasonBox: hrm, requiring rake inside my recipe was apparently a bad idea
[2012-11-15 23:28:47 -0500] JasonBox: Blew up all file and directory resources, they simply didn't happen
[2012-11-15 23:39:50 -0500] rava: hey guys, i'm having a problem with chef server puking with a new setting for it's sandbox directory
[2012-11-15 23:40:27 -0500] rava: https://gist.github.com/4082418
[2012-11-15 23:41:47 -0500] rava: i copied over the sandbox directories just incase, and chef-server's got write access to the directory
[2012-11-15 23:42:11 -0500] rava: trying to move all these cache and temp file directories off the root volume of my server
[2012-11-15 23:44:50 -0500] rava: client runs are working fine, i'm only getting this failure on attempted push
[2012-11-15 23:44:53 -0500] rava: of a cookbook
[2012-11-15 23:47:40 -0500] poolpog: does Chef use shell-style file globbing for things like cookbook_file source?
[2012-11-15 23:51:44 -0500] rava: how painful to the server is it to blow away everything in cache/chef/sanboxes ?
[2012-11-15 23:51:47 -0500] josephholsten: poolpog: I know I've seen something like that
[2012-11-15 23:51:48 -0500] rava: ~sandboxes
[2012-11-15 23:58:56 -0500] poolpog: also, is there a way to tell if one has already "knife upload"ed a cookbook?

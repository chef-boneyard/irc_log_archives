[2012-11-02 00:11:29 -0400] beandip: JasonF: thanks
[2012-11-02 00:11:45 -0400] beandip: I'd been using nova client
[2012-11-02 00:12:03 -0400] beandip: but I wanted to keep the workflow relatively unchanged for my team
[2012-11-02 00:25:13 -0400] hoover_damm: beandip, nova client works with v2?
[2012-11-02 00:25:14 -0400] hoover_damm: nice
[2012-11-02 00:56:01 -0400] beandip: hoover_damm:
[2012-11-02 00:56:02 -0400] beandip: $ sudo pip install rackspace-novaclient
[2012-11-02 00:56:11 -0400] beandip: $ sudo pip install --upgrade rackspace-novaclient
[2012-11-02 00:56:19 -0400] beandip: $ sudo pip install os_networksv2_python_novaclient_ext
[2012-11-02 00:56:21 -0400] hoover_damm: ahh rackspaces
[2012-11-02 00:56:24 -0400] hoover_damm: nm
[2012-11-02 00:56:32 -0400] beandip: $ sudo pip install --upgrade os_networksv2_python_novaclient_ext
[2012-11-02 01:20:32 -0400] abetterlie: is there any way to force chef-client to never use server side cached values in attributes?
[2012-11-02 01:20:51 -0400] abetterlie: or to run chef-server in a way that it never caches the values?
[2012-11-02 01:21:07 -0400] PRK_nz: I'm getting a recipe compile error "No such file or directory - handle .....", but I have a directory resource before the failing line that should ensure that the directory exists.
[2012-11-02 01:21:16 -0400] PRK_nz: Any ideas?
[2012-11-02 01:22:09 -0400] PRK_nz: abetterlife: My understanding is that it doesn't, only the ones you see when editing then node.
[2012-11-02 01:23:08 -0400] abetterlie: it definitely does use cached values, because if you change something or override it in a json file, chef will use the previous value
[2012-11-02 01:23:45 -0400] PRK_nz: Are you making sure you've got your attribute hierarchy right? http://wiki.opscode.com/display/chef/Attributes
[2012-11-02 01:24:58 -0400] PRK_nz: if the attributes show up in "knife node show <insert_fqdn_here> -Fj", then they'll be part of the run.
[2012-11-02 01:25:36 -0400] abetterlie: right, but what I really want is for the default value to be used insetead of the value from the previous run
[2012-11-02 01:25:41 -0400] PRK_nz: That's my understanding any way. If you look at Chef server webui though, under the 'show' tab on a node, you'll see a lot more.
[2012-11-02 01:26:25 -0400] yfeldblum: abetterlie, if you use normal-level attributes, those are saved and like you are seeing; if you use default-level or override-level attributes, those are done fresh on each chef-client run
[2012-11-02 01:26:26 -0400] PRK_nz: Are you setting the attribute on the node? e.g. node.set['some_attribute'] during the run?
[2012-11-02 01:27:58 -0400] PRK_nz: I see what yfeldblum means "This means that any normal attribute set in a recipe or cookbook attribute file will remain even after the cookbook or role has been removed from the node's run list." - From wiki
[2012-11-02 01:29:29 -0400] abetterlie: so how can I remove the previous run's value and ensure that the default is always used?
[2012-11-02 01:29:35 -0400] abetterlie: I'm not using node.set anywhere
[2012-11-02 01:29:41 -0400] yfeldblum: abetterlie, `knife node edit`
[2012-11-02 01:30:51 -0400] PRK_nz: how about your attribute files? are there any normal attributes in them?
[2012-11-02 01:31:20 -0400] PRK_nz: "normal or set attributes applied in an attributes file
[2012-11-02 01:31:22 -0400] PRK_nz: normal or set attributes applied on a node directly in a recipe"
[2012-11-02 01:31:42 -0400] abetterlie: damn. I don't have write access with knife.
[2012-11-02 01:42:43 -0400] evilsushi: rBEL_: yo do you run the rbel repo?
[2012-11-02 01:52:25 -0400] scalability-junk: hey I have some issues setting up the chef server with the bootstrap way.
[2012-11-02 01:52:49 -0400] scalability-junk: I get a gcc error when compiling the event machine. anything to fix that without manually changing server stuff?
[2012-11-02 01:53:00 -0400] scalability-junk: I'm trying that on ubuntu 12.04
[2012-11-02 01:54:02 -0400] bluepojo: scalability-junk: you probably are missing a header package that event machine depends on
[2012-11-02 01:54:32 -0400] scalability-junk: strange thing, after rerunning the script a few times it seems to work...
[2012-11-02 01:54:42 -0400] bluepojo: maybe there was an install hiccup
[2012-11-02 01:54:46 -0400] bluepojo: that worked the second time
[2012-11-02 01:54:48 -0400] bluepojo: =/
[2012-11-02 01:54:59 -0400] scalability-junk: bluepojo, yeah probably. thanks anyway
[2012-11-02 02:00:52 -0400] abetterlie: evilsushi: fag
[2012-11-02 02:01:12 -0400] gchristensen: wow
[2012-11-02 02:01:26 -0400] evilsushi: abetterlie: haha you traitor
[2012-11-02 02:05:29 -0400] josephholsten: really? really? https://gist.github.com/3998211
[2012-11-02 02:05:46 -0400] josephholsten: C:\Program' is not recognized as an internal or external command
[2012-11-02 02:06:15 -0400] josephholsten: I thought we'd learned how to actually quote things on windows.
[2012-11-02 02:07:13 -0400] gchristensen: windows has very difficult "quoting" rules
[2012-11-02 02:15:53 -0400] josephholsten: gchristensen: BS. I've lived through portable shell in M4 in autotools. that has difficult quoting rules, and is in almost every gnu/fsf project.
[2012-11-02 02:17:55 -0400] hoover_damm: C:\\\\Program Files (x86)\\\\Ruby193\\\\bin\\\\gem
[2012-11-02 02:17:56 -0400] hoover_damm: ?
[2012-11-02 02:17:59 -0400] hoover_damm: like that gchristensen ?
[2012-11-02 02:22:21 -0400] gchristensen: hah
[2012-11-02 02:23:12 -0400] hoover_damm: i've been dealing with markdown
[2012-11-02 02:23:20 -0400] hoover_damm: so it's the first thing that i pulled outa my butt
[2012-11-02 02:23:31 -0400] yfeldblum: here's how to quote things on windows: s/windows/linux/g
[2012-11-02 02:51:55 -0400] beandip: JasonF: well, knife-openstack does not seem to work with rackspace cloud
[2012-11-02 02:51:59 -0400] beandip: :(
[2012-11-02 02:53:48 -0400] JasonF: beandip: if you drop me an email with your problem, I'll help you find an answer tomorrow.
[2012-11-02 02:55:39 -0400] beandip: I'll /msg you here
[2012-11-02 02:55:44 -0400] beandip: have a great night
[2012-11-02 02:57:46 -0400] hoover_damm: beandip, no it doesn't
[2012-11-02 02:58:43 -0400] hoover_damm: beandip, https://github.com/mattray/knife-rackspace/tree/KNIFE_RACKSPACE-39
[2012-11-02 02:58:59 -0400] beandip: hoover_damm: yeah
[2012-11-02 02:59:02 -0400] beandip: I tried that
[2012-11-02 02:59:10 -0400] beandip: ERROR: Fog::Compute::RackspaceV2::BadRequest: Fog::Compute::RackspaceV2::BadRequest
[2012-11-02 02:59:17 -0400] hoover_damm: beandip, and basically that's already in master
[2012-11-02 02:59:33 -0400] hoover_damm: so provided your running 0.6.2 it should work
[2012-11-02 02:59:42 -0400] hoover_damm: beandip, toss a couple more -V's in there...
[2012-11-02 02:59:54 -0400] beandip: hoover_damm: I did
[2012-11-02 02:59:57 -0400] hoover_damm: beandip, also what version of fog do you have?
[2012-11-02 03:00:01 -0400] beandip: http://pastebin.com/RYH0rduF
[2012-11-02 03:00:14 -0400] beandip: hoover latest fog gem
[2012-11-02 03:00:37 -0400] beandip: the one installed when I gem install the latest knife-rackspace wich supports v2
[2012-11-02 03:01:32 -0400] hoover_damm: and can you use that fog gem and do v2 stuff fine?
[2012-11-02 03:02:17 -0400] hoover_damm: and you may not need to specify the endpoint
[2012-11-02 03:02:24 -0400] hoover_damm: if you don't specify the endpoint does it work?
[2012-11-02 03:03:06 -0400] hoover_damm: beandip, fwiw you should delete that and generate a new api key (change your password?)
[2012-11-02 03:03:10 -0400] hoover_damm: that paste
[2012-11-02 03:03:20 -0400] hoover_damm: unless the api key was fake in that, you should cycle that
[2012-11-02 03:04:09 -0400] beandip: hoover_damm: That was a random key sequency I put in place of my real key
[2012-11-02 03:04:13 -0400] beandip: I'm not a tool
[2012-11-02 03:04:14 -0400] beandip: :P
[2012-11-02 03:04:29 -0400] beandip: lol
[2012-11-02 03:04:40 -0400] beandip: that's good you don't
[2012-11-02 03:04:44 -0400] beandip: ;)
[2012-11-02 03:06:14 -0400] hoover_damm: beandip, basically based on everything i see provided you have the right spot it should work
[2012-11-02 03:07:23 -0400] hoover_damm: don't see any open tickets in the knife rackspace slot
[2012-11-02 03:07:31 -0400] hoover_damm: and sadly i didn't sign up for v2 so i can't test
[2012-11-02 03:07:38 -0400] beandip: yarp
[2012-11-02 03:07:38 -0400] hoover_damm: doing so would annoy $client
[2012-11-02 03:07:52 -0400] beandip: I'm pretty sure it's an issue with fog
[2012-11-02 03:08:11 -0400] beandip: rather the fog gem
[2012-11-02 03:08:20 -0400] beandip: not being current
[2012-11-02 03:08:23 -0400] beandip: :/
[2012-11-02 03:08:27 -0400] beandip: not a big deal
[2012-11-02 03:08:42 -0400] beandip: just wondering if anyone has it working or rand into the same specific errpr
[2012-11-02 03:08:43 -0400] hoover_damm: https://github.com/fog/fog/issues/1191
[2012-11-02 03:09:20 -0400] hoover_damm: https://github.com/fog/fog/pull/1241
[2012-11-02 03:09:34 -0400] hoover_damm: beandip, err i thought you said you had the latest fog?
[2012-11-02 03:10:24 -0400] hoover_damm: although getting that fog loaded sometimes is more
[2012-11-02 03:15:22 -0400] beandip: i have the latest fog gem
[2012-11-02 03:20:17 -0400] kevmo: Recently started installing some 10.16.2 clients.  Everything seems to work but I am receiving the following error when I run chef-client.  Anyone seen this before? INFO: HTTP Request Returned 404 Not Found: No routes match the request: /reports/nodes/NODENAME/runs
[2012-11-02 03:20:58 -0400] kevmo: Full Run https://gist.github.com/86b7acb52e6bd53d9504
[2012-11-02 03:24:35 -0400] KevMo: Recently started installing some 10.16.2 clients. Everything seems to work but I am receiving the following error when I run chef-client. Anyone seen this before? INFO: HTTP Request Returned 404 Not Found: No routes match the request: /reports/nodes/NODENAME/runs         Full Run output https://gist.github.com/86b7acb52e6bd53d9504
[2012-11-02 03:25:04 -0400] hoover_damm: KevMo, sounds like your chef-server is older?
[2012-11-02 03:25:15 -0400] hoover_damm: than 10.16.2
[2012-11-02 03:25:45 -0400] beandip: aaaaah
[2012-11-02 03:25:49 -0400] beandip: I found the issue
[2012-11-02 03:25:50 -0400] hoover_damm: KevMo, there's a report handler now that sends up stuff to the chef-server and if your chef-server is old enough it might not know how to grok this
[2012-11-02 03:25:54 -0400] beandip: nothing in the docs for this
[2012-11-02 03:26:02 -0400] hoover_damm: should work for hosted
[2012-11-02 03:26:15 -0400] beandip: but knife-rackspace has the following flag: -rackspace-api-auth-url URL
[2012-11-02 03:26:15 -0400] KevMo: It was and I was getting this error than as well.  So I upgraded the server, but am still getting the same error.
[2012-11-02 03:26:23 -0400] beandip: I added the following to my knife.rb
[2012-11-02 03:26:33 -0400] beandip: knife[:rackspace_api_auth_url] = "https://dfw.identity.api.rackspacecloud.com"
[2012-11-02 03:26:54 -0400] hoover_damm: beandip, be a good citizen and create a ticket for documentaiton on that
[2012-11-02 03:26:54 -0400] beandip: now it should call the proper auth url so it can interact with the server api
[2012-11-02 03:27:18 -0400] hoover_damm: beandip, i'm sure others will be just as baffled
[2012-11-02 03:28:02 -0400] KevMo: hoover_damm: is there a specific gem that I need to install to ensure that the report handler is there?  My server and my clients match now but am still getting the error
[2012-11-02 03:28:21 -0400] beandip: oh, wait
[2012-11-02 03:28:23 -0400] beandip: fucksticks
[2012-11-02 03:28:26 -0400] beandip: that didn't fix it
[2012-11-02 03:29:46 -0400] hoover_damm: KevMo, nope that should be it
[2012-11-02 03:30:08 -0400] KevMo: damn...
[2012-11-02 07:24:18 -0400] BryanWB_: ohai chefs!
[2012-11-02 07:25:41 -0400] jensofsweden: Mornings =)
[2012-11-02 07:36:01 -0400] jensofsweden: I have a chef question, bare in mind that this is my fourth day working with chef. I plan to deploy alot of apache + tomcat servers. Apache as frontend and tomcat as backend. Now with every deployment all apaches should have a default.conf and ajp-proxy-ssl.conf file in the apache directory, but i need them to have some dynamic values into the files depending on what app i deploy them with. I plan of doing a cookbook for each app
[2012-11-02 07:36:01 -0400] jensofsweden: i want to deploy but instead of adding the default.conf and ajp-proxy-ssl template in each of these cookbooks can i make a generic cookbook, call on that in my app cookbook and just have a variable in the app recipe that puts the value into the default.conf and ajp-proxy-ssl.conf templates from the other cookbook?
[2012-11-02 07:36:54 -0400] BryanWB_: jensofsweden: y
[2012-11-02 07:38:54 -0400] jensofsweden: Then I have some reseach and testing to do =)
[2012-11-02 07:47:17 -0400] BryanWB_: just use attributes to set those variables
[2012-11-02 07:47:38 -0400] BryanWB_: i also highly recommend this tutotail http://vialstudios.com/guide-authoring-cookbooks.html
[2012-11-02 08:03:48 -0400] flaccid_: hey guys. if i do say log("oh no") { level :fatal } will that exit chef with a non zero? or is there some other method i should do to raise error/exception?
[2012-11-02 08:04:38 -0400] spheromak: you can just raise  im not sure if a fatal log call will  dump
[2012-11-02 08:05:04 -0400] flaccid_: kk thanks spheromak
[2012-11-02 08:05:24 -0400] flaccid_: whats the recommended method to raise ?
[2012-11-02 08:06:38 -0400] spheromak: depends on your issue
[2012-11-02 08:06:39 -0400] spheromak: https://github.com/opscode/chef/blob/master/lib/chef/exceptions.rb
[2012-11-02 08:06:45 -0400] spheromak: for the exceptions that are defined
[2012-11-02 08:08:51 -0400] flaccid_: ty
[2012-11-02 08:08:53 -0400] spheromak: looking at mixlib log, i dont' think it raises on fatal
[2012-11-02 08:09:34 -0400] flaccid_: say in an execute resource can you do something like command { foo_ruby or raise ::Chef::Exceptions::Application, "Error foo." }
[2012-11-02 08:10:43 -0400] spheromak: I don't see why you shouldn't be able too
[2012-11-02 08:10:56 -0400] spheromak: but try it  in shef ;)
[2012-11-02 08:11:17 -0400] flaccid_: kk danke!
[2012-11-02 08:15:06 -0400] spheromak: but thinking about it you prob want  a ruby block if you are trying to eval some ruby
[2012-11-02 08:33:10 -0400] flaccid_: spheromak: thanks its looking that way
[2012-11-02 08:41:08 -0400] jensofsweden: How come when I type default['jenkins']['servername'] = "jenkins.schibsted.se" in the attributes file and ServerName <%= node.set[:httpd][:servername] %> in the template file it works? what does the ['jenkins'] in the attributes file do? and what does the ['httpd '] in the template file do? Still just 4 days of chef experience so real newbe here =)
[2012-11-02 08:46:05 -0400] spheromak: jensofsweden: you got a jist of what your talking about ?
[2012-11-02 08:47:16 -0400] spheromak: or what cooks your using  here ?
[2012-11-02 08:47:32 -0400] spheromak: doing a node.set in a template is fundamentally probably not what you want to do
[2012-11-02 08:47:34 -0400] spheromak: ;)
[2012-11-02 08:47:50 -0400] jensofsweden: Im still in the learning process =)
[2012-11-02 08:47:58 -0400] spheromak: yup you do much programming ?
[2012-11-02 08:48:19 -0400] jensofsweden: Nope
[2012-11-02 08:48:46 -0400] spheromak: yea so got a bit of a curve, but the basic idea is that you have data logic and presentation
[2012-11-02 08:49:12 -0400] spheromak: attributes/bags are data, recipes are logic, and templates are  presentation
[2012-11-02 08:50:04 -0400] spheromak: you read the just enough ruby for chef ?
[2012-11-02 08:50:21 -0400] spheromak: http://wiki.opscode.com/display/chef/Just+Enough+Ruby+for+Chef
[2012-11-02 08:50:51 -0400] spheromak: might help a bit.
[2012-11-02 08:51:03 -0400] jensofsweden: Just once, then i experiment to see what stuff does =)
[2012-11-02 08:51:08 -0400] spheromak: thats great
[2012-11-02 08:51:21 -0400] spheromak: shef/irb/pry are all verry good tools to use when learning
[2012-11-02 08:51:58 -0400] spheromak: so going back to what you first said default['jenkins']['servername']
[2012-11-02 08:52:37 -0400] spheromak: in the attribs file everything is assumed to have the node prepended on it. ex: in recipe code node.default['jenkins']['servername'] is the same as that attrib entry
[2012-11-02 08:53:00 -0400] spheromak: make sense ?
[2012-11-02 08:53:31 -0400] jensofsweden: Yea i think i got that
[2012-11-02 08:54:04 -0400] spheromak: so your default['jenkins'] in attributes is simply setting an attribute at the "default" level.
[2012-11-02 08:54:38 -0400] spheromak: http://wiki.opscode.com/display/chef/Attributes  for info on levels and how they merge
[2012-11-02 08:55:40 -0400] jensofsweden: Yea, tried to understand that, kinda got it.
[2012-11-02 08:55:48 -0400] spheromak: yea its a bit to digest early on
[2012-11-02 08:56:04 -0400] spheromak: so wheres the confusion, and i can try to clarify
[2012-11-02 08:56:56 -0400] jensofsweden: i guess the default['jenkins']['servername'] is a place where i put my data about my servername right?
[2012-11-02 08:57:54 -0400] spheromak: right
[2012-11-02 08:58:03 -0400] spheromak: and in the template you acces this to write it out
[2012-11-02 08:58:14 -0400] spheromak: node['jenkins']['servername']
[2012-11-02 08:58:28 -0400] jensofsweden: yea that i understand
[2012-11-02 08:58:51 -0400] spheromak: k
[2012-11-02 08:59:06 -0400] jensofsweden: but when i forgot to change the node['httpd']['servername'] to jenkins instead of httpd it still got the data from the node
[2012-11-02 08:59:16 -0400] jensofsweden: i was just woundering how thats connected =)
[2012-11-02 09:00:14 -0400] spheromak: would need to see a gist
[2012-11-02 09:00:22 -0400] spheromak: to get a more clear picture
[2012-11-02 09:03:30 -0400] emanuelez: hello all! is it possible for a chef server to connect to a chef client wich is only reachable with after an openvpn connection?
[2012-11-02 09:04:56 -0400] jensofsweden: gist?
[2012-11-02 09:05:55 -0400] specialsauce: emanuelez, the chef client contacts the chef server not vice versa
[2012-11-02 09:05:58 -0400] spheromak: https://gist.github.com/ or pastie or pastebin
[2012-11-02 09:05:59 -0400] spheromak: or w/e
[2012-11-02 09:06:05 -0400] jensofsweden: ahh =)
[2012-11-02 09:10:18 -0400] emanuelez: specialsauce: ah, i see, so as long as the firewall allows it, then it should be fine
[2012-11-02 09:10:37 -0400] specialsauce: emanuelez, in theory yes :-)
[2012-11-02 09:11:06 -0400] jensofsweden: spheromak:  http://pastebin.com/uJ4WLjK5
[2012-11-02 09:11:39 -0400] emanuelez: specialsauce: cool, thank you. I'll try that out. hmmm... does the client continuosly check the server if anything needs to be done? or every few minutes/hours?
[2012-11-02 09:12:12 -0400] specialsauce: emanuelez, the client can run manually (you run it), via cron (scheduled every X interval) or daemonised (where it checks in on interval)
[2012-11-02 09:12:19 -0400] specialsauce: so it depends how you have it set up
[2012-11-02 09:14:10 -0400] spheromak: jensofsweden: so lookin at it yea the default['jenkins'] entry in attribs should have nothing to do with the templates call to node[:httpd][:servername], but there may be someting in recipe that is finding and assigning the node['jenkins']['servername'] to node[:http][:servername]
[2012-11-02 09:14:39 -0400] spheromak: in the recipe or attrib code in whatever is in the run_list
[2012-11-02 09:17:23 -0400] emanuelez: specialsauce: thanks again
[2012-11-02 09:17:34 -0400] specialsauce: np dude
[2012-11-02 09:32:06 -0400] gokr: Hmmm, trying to decide how to best install chef-server into a Ubuntu VM using vagrant... so many options.
[2012-11-02 09:32:46 -0400] gokr: There is the bootstrap route using chef-solo, then there are debs from opscode, then there is a chef-server recipe on the community site. Any advice?
[2012-11-02 10:07:53 -0400] aruntomar: is it possible to automate the mysql master slave replication via chef?
[2012-11-02 10:19:38 -0400] masterkorp: personally i dont advice that
[2012-11-02 10:19:49 -0400] masterkorp: i like to do those by hand
[2012-11-02 10:23:05 -0400] specialsauce: (but it is perfectly possible)
[2012-11-02 10:24:21 -0400] aruntomar: masterkorp: it's a requirement to automate mysql master slave config :(
[2012-11-02 10:26:29 -0400] aruntomar: specialsauce: my confusion is that normally chef-client runs on 1 node, but if i've to do master slave config, my code/recipe will have to simultaneously operate on say mysql master and mysql slave server. how to do that?
[2012-11-02 10:27:05 -0400] specialsauce: aruntomar: why do you need to run them simultaneously?
[2012-11-02 10:29:58 -0400] aruntomar: specialsauce: well, when i configure the replication manually, i have to login to master, freeze rows, dump the db, copy dump to the slave and configure slave, then start slave and unfreeze the master. so i've to work on both master and slave servers.
[2012-11-02 10:41:43 -0400] masterkorp: holy shit my logic sniffer just arrived
[2012-11-02 10:41:56 -0400] specialsauce: aruntomar, i'm with you, yeah not a simple task. dont know if there's a cookbook out there that does this or if you'd be looking at cooking your own
[2012-11-02 10:43:35 -0400] aruntomar: specialsauce: i can cook on my own. i only need direction, how to achieve this :)
[2012-11-02 12:40:27 -0400] soko: I am trying to use postgresql::server and I come across the following: If I set node['postgresql']['password']['postgres'] *before* include_recipe "postgresql::server" then I get an error FATAL: NoMethodError: undefined method `[]=' for nil:NilClass. If I set it after, it all works fine. The same error occurs if I set this in attributes/default.rb. Any ideas why this happens?
[2012-11-02 12:40:49 -0400] soko: This is with chef-solo by the way.
[2012-11-02 12:42:10 -0400] soko: (In contrast mysql::server recipe requires the passwords to be set *before* the recipe.)
[2012-11-02 12:48:57 -0400] masterkorp: soko:can you give the full run log
[2012-11-02 12:51:14 -0400] soko: masterkorp: I am really sorry but I can't, I don't have access to it right now :-/
[2012-11-02 12:51:36 -0400] masterkorp: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/server.rb
[2012-11-02 12:52:05 -0400] masterkorp: well, for starters sub include_recipes are not worked on
[2012-11-02 12:53:09 -0400] soko: masterkorp: please bear in mind I am a newbie :-) I am setting this because the recipe README says: "If you're using chef-solo, you'll need to set the attribute node['postgresql']['password']['postgres'] in your node's json_attribs file or in a role."
[2012-11-02 12:53:30 -0400] soko: masterkorp: so what are we looking at at the server.rb recipe?
[2012-11-02 12:53:58 -0400] masterkorp: postgres::client is not run
[2012-11-02 12:54:47 -0400] soko: masterkorp: why not? It is on line 24...
[2012-11-02 12:55:42 -0400] masterkorp: soko: http://wiki.opscode.com/display/chef/Recipes#Recipes-IncludingRecipes
[2012-11-02 12:56:05 -0400] soko: masterkorp: maybe I have not explained fully. All I have is a simple recipe that has two lines. 1. node['postgresql']['password']['postgres'] = "foo" 2. include_recipe "postgresql::server".
[2012-11-02 12:56:19 -0400] soko: If I run it like that I get the error. If I swap the lines everything works fine.
[2012-11-02 12:56:39 -0400] masterkorp: soko: how are you runing chef-solo ?
[2012-11-02 12:57:04 -0400] soko: masterkorp: Vagrant runs it
[2012-11-02 12:57:30 -0400] masterkorp: soko: ok, you dont need to create a recipe for that
[2012-11-02 12:57:36 -0400] soko: masterkorp: but I do
[2012-11-02 12:57:38 -0400] masterkorp: can you paste your vagrantfile ?
[2012-11-02 12:57:56 -0400] soko: masterkorp: my problem is not how to get this to work because I have already a couple of different ways of getting it to work.
[2012-11-02 12:58:19 -0400] soko: masterkorp: my question is why the order of these two lines matters
[2012-11-02 12:58:59 -0400] masterkorp: soko: isn't that obvious ? because postres set that on server installation
[2012-11-02 12:59:39 -0400] soko: masterkorp: ok, then my next question is, why does it work OK for the mysql::server recipe?
[2012-11-02 13:00:11 -0400] clexmond: chef is working great for me for deploying prod, but I'd like to use it for deploying to staging as well from branches named like release-1.1, hotfix-1.0.1, etc. is there a good way to do this without having to edit cookbook attributes everytime?
[2012-11-02 13:00:17 -0400] masterkorp: soko: that works on a 2nd run
[2012-11-02 13:00:56 -0400] masterkorp: clexmond: have diferent roles for staging and productiion, and set the attributes there
[2012-11-02 13:00:56 -0400] soko: masterkorp: with that I have to set node['mysql']['server_root_password'] = "foo" *before* include_recipe "mysql::server"
[2012-11-02 13:01:10 -0400] masterkorp: then there you go
[2012-11-02 13:01:41 -0400] soko: masterkorp: with the postgresql recipe it is exactly the opposite
[2012-11-02 13:01:53 -0400] soko: masterkorp: do you know why this happens?
[2012-11-02 13:03:00 -0400] masterkorp: node.save unless Chef::Config[:solo]
[2012-11-02 13:04:25 -0400] soko: masterkorp: Sorry but your answers are rather cryptic. I appreciate your time but I can't understand what you are trying to say by pasting the odd line of code or with answers like "there you go" :-)
[2012-11-02 13:04:57 -0400] clexmond: masterkorp: I have roles, but my problem so far, is staging won't always be "release", it will be release-1.1, then release-1.2 the next time and so on
[2012-11-02 13:05:54 -0400] masterkorp: clexmond: and you want that be choosen automatically ?
[2012-11-02 13:06:25 -0400] clexmond: well, passing it in as a command line param would be ideal
[2012-11-02 13:06:34 -0400] clexmond: unless it's possible to be selected automatically, which I doubt
[2012-11-02 13:08:07 -0400] masterkorp: You could have some ruby logic on the recipe iterating by those branches and using the lastest
[2012-11-02 13:08:18 -0400] clexmond: hmm, that's not a bad idea
[2012-11-02 13:08:22 -0400] clexmond: i'll give that a shot
[2012-11-02 13:15:27 -0400] masterkorp: what i wonder is why your team is not using tags instead of branches
[2012-11-02 13:16:10 -0400] clexmond: well, we tag master, but I'd like to throw up staging servers on release branches before they're merged into master
[2012-11-02 13:24:42 -0400] masterkorp: makes some sense
[2012-11-02 13:25:02 -0400] maruq: hi guys, anyone know the syntax for conditional check based on a role being in a run_list ?
[2012-11-02 13:25:12 -0400] maruq: eg. only_if node['run_list'].include?("role[myrole]")
[2012-11-02 13:33:00 -0400] CharlieSu: Can anyone help me figure out why the RVM cookbook is no longer working on my box?  https://gist.github.com/9628e7b2d918ca38415a
[2012-11-02 13:50:54 -0400] CharlieSu: Any RVM users? I'm trying ot find out what the proper RVM cookbooks is..  I was using fnichol's cookbook but it is no longer working..
[2012-11-02 13:51:27 -0400] yfeldblum: maruq, this is ruby, so ... http://pastie.org/private/abxb0obrkyspzyyau6wenq
[2012-11-02 13:54:26 -0400] maruq: yfeldblum: thanks. I was checking run_list, not roles. does the only_if need the braces on line 12. In theory it shouldn't, but everything I'm trying is failing
[2012-11-02 13:55:15 -0400] maruq: CharlieSu: I was using https://github.com/fnichol/chef-rvm
[2012-11-02 13:55:16 -0400] maruq: m
[2012-11-02 13:56:13 -0400] bougyman: CharlieSu: ask in #rvm about that RVM::CommandIncomplete thing
[2012-11-02 13:56:31 -0400] bougyman: i've seen it before can't remember what the solution was though
[2012-11-02 13:56:53 -0400] maruq: yfeldblum: just asked a ruby colleague I was wrong, need to do things in a block
[2012-11-02 13:57:15 -0400] CharlieSu: I'm in #rvm and they're saying that there is an issue.  It crept up about a week ago
[2012-11-02 13:57:31 -0400] CharlieSu: maruq: I'm using the same one.  The system recipe is what is breaking on me.
[2012-11-02 13:57:54 -0400] geekbri: I found rvm systme installs never really worked like they were supposed to so I stopped using them
[2012-11-02 13:58:10 -0400] geekbri: I only use the per user rvm installs now.  Those have never given me an issue
[2012-11-02 13:58:21 -0400] yfeldblum: maruq, why check run-list and not roles?
[2012-11-02 13:58:29 -0400] xdissent: CharlieSu: there's a fix
[2012-11-02 13:59:03 -0400] xdissent: CharlieSu: https://github.com/fnichol/chef-rvm/issues/133#issuecomment-9794260
[2012-11-02 13:59:05 -0400] CharlieSu: xdissent: ?
[2012-11-02 13:59:23 -0400] xdissent: you have to stick with rvm 1.16.16 for now
[2012-11-02 13:59:44 -0400] CharlieSu: xdissent: nice!  thanks so much.. I'll try this
[2012-11-02 14:00:12 -0400] xdissent: there's a few commits in rvm HEAD that deal with the gem path removal. I *think* it should be fixed next rvm release
[2012-11-02 14:01:09 -0400] CharlieSu: xdissent: you're a lifesaver.. thanks !!!
[2012-11-02 14:02:44 -0400] xdissent: np. pretty sure there are a lot of people hitting that wall this week
[2012-11-02 14:04:57 -0400] CharlieSu: xdissent: yeah. I just quit installing RVM the past few days..
[2012-11-02 14:05:26 -0400] maruq: yfeldblum: well, roles work at the moment I guess. was thinking of checking riotgames cookbook approach
[2012-11-02 14:05:28 -0400] xdissent: I wish I could have! It's an integral part of our production deployment system =/
[2012-11-02 14:07:25 -0400] CharlieSu: I can confirm that this fixed my issues.. :)  very happy
[2012-11-02 14:07:34 -0400] vaskas: i ended up rewriting the rvm cookbook in a simplistic manner
[2012-11-02 14:07:50 -0400] maruq: yfeldblum: I found a work around though, check if I set a var that I only set for that node type
[2012-11-02 14:07:58 -0400] vaskas: also had trouble with chef-rvm this week
[2012-11-02 14:11:42 -0400] xdissent: yeah, rvm wrappers are STILL broken for me. using a rvm_shell resource to just `rvm alias create` manually. bummerz
[2012-11-02 14:12:38 -0400] xdissent: chef-rvm is just suuuuper slow too. it tears down and rebuilds the entire shell env like 5 times just to check for what ruby versions are installed
[2012-11-02 14:49:03 -0400] behemphi: I find myself in a place where I need a chef run to wait for another machine to come up first.  Is there a good example of this in a cookbook somewhere?
[2012-11-02 14:50:51 -0400] masterkorp: that queue'ing stuff is interesting i should do something with zookeeper for that
[2012-11-02 14:56:12 -0400] gokr: I am trying to make a recipe that configures knife but... I am not figuring out how to do "knife configure -i blablabla" without going interactive. There doesn't seem to be an option for the validation.pem file.
[2012-11-02 15:01:39 -0400] masterkorp: because -i means interactive
[2012-11-02 15:02:52 -0400] gokr: No, it means "initial"
[2012-11-02 15:02:53 -0400] blitzrage: btm: ping
[2012-11-02 15:03:41 -0400] blitzrage: btm: per the code review stuff you posted on the wiki, you don't *have* to be in the google hangout either. You can also broadcast via youtube for those that don't need to directly talk/speak, especially if you're going to use #chef-hacking for text, etc
[2012-11-02 15:03:54 -0400] masterkorp: gokr: why dont you just place a knife.rb ?
[2012-11-02 15:03:59 -0400] gokr: I think I found a way around it, by temporarily making /etc/chef/*.pem readable.
[2012-11-02 15:04:14 -0400] gokr: Well, the "knife configure" also produces a new pem file in there.
[2012-11-02 15:05:24 -0400] gokr: I don't really understand this stuff yet - the different pem files, and why I am supposed to copy them into ~/.chef etc.
[2012-11-02 15:05:47 -0400] masterkorp: Can i ask why are configuring knife with chef ?
[2012-11-02 15:05:54 -0400] erikh: gokr: this is how knife-server does it: https://github.com/fnichol/knife-server/blob/master/lib/knife/server/credentials.rb
[2012-11-02 15:06:34 -0400] gokr: masterkorp: I am building a tool around chef and want to be able to have that tool use knife.
[2012-11-02 15:06:46 -0400] masterkorp: makes sense
[2012-11-02 15:08:12 -0400] gokr: erikh: Ah, thanks! Darnit, I should use that stuff I guess...
[2012-11-02 15:08:37 -0400] gokr: Chef and all is really col stuff but... so ... much stuff... :)
[2012-11-02 15:08:38 -0400] erikh: fwiw, I'm working on a tool that let's you control knife programmatically..
[2012-11-02 15:08:50 -0400] erikh: it's pretty crude right now though
[2012-11-02 15:08:50 -0400] gokr: erikh: Hehe.
[2012-11-02 15:08:57 -0400] erikh: http://github.com/erikh/knife-dsl
[2012-11-02 15:09:20 -0400] erikh: so you can throw it in rakefiles and so forth, without a ton of shelling out... just to run ruby again
[2012-11-02 15:10:10 -0400] masterkorp: https://github.com/erikh
[2012-11-02 15:10:15 -0400] masterkorp: love you pic
[2012-11-02 15:10:25 -0400] gokr: I am basically building a tool meant to remote control a rather large system in cloud setups. Auto scaling etc. And using Chef + knife seems obvious - but it also means I want to do it all "programmatically".
[2012-11-02 15:10:32 -0400] masterkorp: https://github.com/erikh/fart
[2012-11-02 15:10:36 -0400] masterkorp: also this is LOL
[2012-11-02 15:12:07 -0400] erikh: oh, whipped that up @ seattle.rb while I was at the summit
[2012-11-02 15:12:26 -0400] erikh: I was sitting there with drbrain, explaining what I wanted to do and said "I don't know what to call this thing"
[2012-11-02 15:12:36 -0400] erikh: he said "well maybe once it fleshes out a bit it'll come to you"
[2012-11-02 15:12:51 -0400] erikh: so I used my patent-pending metasyntactic variable naming system
[2012-11-02 15:14:31 -0400] masterkorp: heh
[2012-11-02 15:14:36 -0400] masterkorp: gotta love summits
[2012-11-02 15:14:40 -0400] erikh: gokr: we're doing something similar fwiw (that's actually what that fart tool is for)
[2012-11-02 15:14:47 -0400] masterkorp: sadly i live on the midle of nohere
[2012-11-02 15:14:50 -0400] erikh: it's definitely not done yet.
[2012-11-02 15:15:02 -0400] masterkorp: (well i like it, but it has its bad sides)
[2012-11-02 15:15:08 -0400] mattray: fwiw, spiceweasel takes a simple yaml dsl and spits out knife commands
[2012-11-02 15:15:34 -0400] mattray: someday it'll run the commands for you
[2012-11-02 15:16:07 -0400] erikh: haha, I wouldn't use it at this point. I just committed it to keep it somewhere central
[2012-11-02 15:16:26 -0400] gokr: Yeah, yeah, just sneaking a peek.
[2012-11-02 15:16:50 -0400] erikh: yeah; take a look at the example.rb in lib/ -- it's where I want to be, an orchestration of a proper autoscaling-based deploy
[2012-11-02 15:17:00 -0400] gokr: Yup, saw it.
[2012-11-02 15:17:26 -0400] erikh: the parallelism isn't there yet though; it'll be much more useful at that point.
[2012-11-02 15:17:43 -0400] erikh: but it's just topo-sort + events + parallelism more or less
[2012-11-02 15:20:34 -0400] btm: blitzrage: yeah, we used the broadcast for yesterdays Chef Hangout, but at the moment we're still trying out the software as a solution and waiting to see what kind of uptake there is.
[2012-11-02 15:20:57 -0400] btm: meh
[2012-11-02 15:21:14 -0400] masterkorp: btm: pure voip. freeswitch with sipml5
[2012-11-02 15:21:27 -0400] masterkorp: i will make a freeswitch and sipml5 soon
[2012-11-02 15:21:33 -0400] masterkorp: after finishing icinga
[2012-11-02 15:22:56 -0400] leifmadsen: freeswitch. gross :)
[2012-11-02 15:23:08 -0400] masterkorp: why ?
[2012-11-02 15:23:10 -0400] masterkorp: love it
[2012-11-02 15:23:14 -0400] leifmadsen: because I'm an Asterisk guy :)
[2012-11-02 15:23:19 -0400] masterkorp: pfft
[2012-11-02 15:23:33 -0400] masterkorp: people still use that thing :P
[2012-11-02 15:23:36 -0400] leifmadsen: yes they do
[2012-11-02 15:23:40 -0400] leifmadsen: my book still sells well :)
[2012-11-02 15:24:02 -0400] leifmadsen: btm: btw I was blitzrage too (xchat issue) thanks for the follow up
[2012-11-02 15:24:51 -0400] erikh: gokr: anyhow I hope to return to it in a few weeks, if this seems like something you'd want to work together on to solve similar problems, we should chat
[2012-11-02 15:25:59 -0400] hcentelles: hello I have a question about the execute provider
[2012-11-02 15:26:01 -0400] gokr: Yeah, although I am not building it in ruby.
[2012-11-02 15:26:49 -0400] gokr: erikh: But definitely interested in solving problems. Right now I am setting up a Vagrant box with recipes in order to eventually deliver it all as an appliance.
[2012-11-02 15:29:54 -0400] hcentelles: Exist a way to interact with a program asking for command line input in a recipe?
[2012-11-02 15:31:28 -0400] masterkorp: hcentelles: can you pass the input to him on sheell ?
[2012-11-02 15:31:33 -0400] masterkorp: *shell
[2012-11-02 15:31:50 -0400] hcentelles: masterkorp: yes
[2012-11-02 15:32:44 -0400] hcentelles: masterkorp: is a program asking for several inputs to make a binary config file
[2012-11-02 15:33:21 -0400] hcentelles: masterkorp: something like a wizard
[2012-11-02 15:34:35 -0400] hcentelles: masterkorp: I'm looking the execute resource but it seems like there's no support for that case
[2012-11-02 15:36:37 -0400] masterkorp: Can you scipt it with bash
[2012-11-02 15:36:40 -0400] masterkorp: ?
[2012-11-02 15:37:03 -0400] erikh: gokr: cool
[2012-11-02 15:37:40 -0400] erikh: go would be a good fit here, but bootstrapping go just for this when Celluloid solves the problem acceptably well seems like a waste of effort
[2012-11-02 15:38:39 -0400] hcentelles: masterkorpo: Yes, I'm think so, my bash suck, I'm wondering if there is a way to do it with chef without developing a bash script
[2012-11-02 15:41:23 -0400] btm: masterkorp: screen share is a requirement, and video is optional but nice.
[2012-11-02 15:41:33 -0400] btm: video conferencing is an unsolved problem.
[2012-11-02 15:42:50 -0400] kryptek: sup all
[2012-11-02 15:44:27 -0400] aruntomar: has anybody tried to automate mysql master slave replication using chef?
[2012-11-02 15:45:02 -0400] masterkorp: btm: screen share is also doable too
[2012-11-02 15:45:11 -0400] masterkorp: s/too//
[2012-11-02 15:45:43 -0400] Nopik: hi.. if i'm starting ec2 server, and assigning him name in tags, can i somehow access this name from a recipe? i see that ohai doesn't read instance tags, unfortunately :(
[2012-11-02 15:46:15 -0400] btm: masterkorp: the 'make' in 'i will make a freeswitch and sipml5 soon' also is a problem. it's hard to justify the time for making things. I looked at the apapche thing and thought about it, but didn't want to do any work.
[2012-11-02 15:48:31 -0400] masterkorp: btm: i will do it because i use it personally, i also have some unexpected free time lately
[2012-11-02 15:48:40 -0400] masterkorp: better do something useful with it :)
[2012-11-02 15:49:54 -0400] aruntomar: Nopik: i've not used it by try this one http://cookbooks.opscode.com/api/v1/cookbooks/AmazonEC2Tag
[2012-11-02 15:50:14 -0400] aruntomar: http://community.opscode.com/cookbooks/AmazonEC2Tag
[2012-11-02 15:50:37 -0400] aruntomar: Nopik: its made for setting ec2tags but may be you can modify it for your requirement
[2012-11-02 15:52:15 -0400] Nopik: aruntomar: yeah, accessing aws api directly is some kind of choice, definitely, thanks
[2012-11-02 15:53:17 -0400] masterkorp: Crap Am I the only one in here who prefers rackspace ?
[2012-11-02 16:35:45 -0400] JasonF: masterkorp: no :)
[2012-11-02 16:37:40 -0400] masterkorp: uff
[2012-11-02 16:40:11 -0400] bradgignac: beandip: i hear you're having issues with knife-rackspace. i might be able to help.
[2012-11-02 16:45:12 -0400] rainers: hello
[2012-11-02 16:46:36 -0400] rainers: I'm having an issue bootstrapping chef-server with solo on rhel6 and having an issue with the rabbitmq port
[2012-11-02 16:46:54 -0400] rainers: it's allready in use
[2012-11-02 16:48:07 -0400] mattray: rainers: while this is for Private Chef, I bet it's applicable in your case: http://private-chef-docs.opscode.com/installation/prereqs.html#configuring-the-operating-system
[2012-11-02 16:48:15 -0400] mattray: rainers: Qpid?
[2012-11-02 16:49:12 -0400] beandip: bradgignac: I am
[2012-11-02 16:49:31 -0400] bradgignac: what are you seeing?
[2012-11-02 16:49:37 -0400] beandip: I'm trying to get the current knife-rackspace gem to work with the v2 cloud
[2012-11-02 16:49:48 -0400] bradgignac: okay
[2012-11-02 16:49:58 -0400] rainers: mattray: yeah, that's what I figured out. Is there a way to specify an other port?
[2012-11-02 16:50:08 -0400] bradgignac: beandip: what error do you get?
[2012-11-02 16:50:26 -0400] beandip: ERROR: Fog::Compute::RackspaceV2::BadRequest: Fog::Compute::RackspaceV2::BadRequest
[2012-11-02 16:50:37 -0400] beandip: let me get you my conf settings from knife.rb
[2012-11-02 16:50:39 -0400] mattray: rainers: probably somewhere. I'm not really familiar with setting up the server though.
[2012-11-02 16:50:39 -0400] beandip: one sec
[2012-11-02 16:50:56 -0400] rainers: ok, so I'll give it a try
[2012-11-02 16:50:58 -0400] bradgignac: beandip: switching to PM so we don't spam the channel
[2012-11-02 16:50:59 -0400] davidmz: How can I rerun a node's runlist with knife
[2012-11-02 16:51:04 -0400] rainers: mattray: thx
[2012-11-02 16:51:11 -0400] beandip: knife[:rackspace_api_auth_url] = "https://identity.api.rackspacecloud.com"
[2012-11-02 16:51:13 -0400] beandip: knife[:rackspace_endpoint] = "https://dfw.servers.api.rackspacecloud.com/v2"
[2012-11-02 16:51:15 -0400] beandip: knife[:rackspace_version] = 'v2'
[2012-11-02 16:51:20 -0400] mattray: beandip: run with -VV for more verbose debugging when using knife rackspace
[2012-11-02 16:51:24 -0400] beandip: davidmz: one the node, run chef-client as root
[2012-11-02 16:51:30 -0400] masterkorp: rainers: why just no use the repos ? way simpler
[2012-11-02 16:51:39 -0400] beandip: @mattray  I've done so
[2012-11-02 16:51:52 -0400] beandip: http://pastebin.com/RYH0rduF
[2012-11-02 16:52:04 -0400] rainers: masterkorp: what repos do you mean?
[2012-11-02 16:52:09 -0400] beandip: (it's a dummy key I replaced my key with.  Just FYI)
[2012-11-02 16:52:30 -0400] davidmz: beandip: I know that, but I want to control this from a centralized location, I am developing a system on many servers, I want to redeploy often and on demand, and I want to do this without logging on each node, can this be done?
[2012-11-02 16:52:36 -0400] rainers: i trying to bootstrap the latest chef-server
[2012-11-02 16:53:01 -0400] bradgignac: beandip: wrong auth url
[2012-11-02 16:53:13 -0400] bradgignac: actually
[2012-11-02 16:53:17 -0400] bradgignac: that should work okay
[2012-11-02 16:54:42 -0400] beandip: bradgignac: I've tried a few
[2012-11-02 16:54:45 -0400] bradgignac: beandip: try using https://identity.api.rackspacecloud.com/v2.0/ as the auth url
[2012-11-02 16:55:10 -0400] masterkorp: rainers: oh i forgot opscode does not make rpm packages, sorry
[2012-11-02 16:55:51 -0400] bradgignac: beandip: also, i don't believe that is a valid image
[2012-11-02 16:56:01 -0400] beandip: lol
[2012-11-02 16:56:03 -0400] beandip: nice
[2012-11-02 16:56:04 -0400] bradgignac: beandip: V2 images are UUIDs, not integers
[2012-11-02 16:56:06 -0400] beandip: thanks for that
[2012-11-02 16:56:16 -0400] beandip: It looks like it auths now
[2012-11-02 16:56:53 -0400] beandip: or something
[2012-11-02 16:56:54 -0400] beandip: hmmm
[2012-11-02 16:57:18 -0400] beandip: noe, it doesn't
[2012-11-02 16:57:21 -0400] beandip: /Users/benattar/.rvm/gems/ruby-1.9.3-p194@global/gems/fog-1.6.0/lib/fog/rackspace/compute_v2.rb:117:in `authenticate': undefined method `match' for nil:NilClass (NoMethodError)
[2012-11-02 16:57:26 -0400] bradgignac: i would actually flip back to the other auth URL
[2012-11-02 16:57:31 -0400] bradgignac: and try fixing the image
[2012-11-02 16:58:10 -0400] beandip: yeah, old auth url worksrackspace_flavor_list.rb:40:in `block in run': undefined method `bits' for #<Fog::Compute::RackspaceV2::Flavor:0x007fd7d63661d0> (NoMethodError)
[2012-11-02 16:58:19 -0400] beandip: old auth url works now
[2012-11-02 16:58:28 -0400] beandip: but can't pull a flavor list
[2012-11-02 16:58:40 -0400] erikh: hmm
[2012-11-02 16:58:53 -0400] beandip: rackspace_server_list.rb:43:in `block in run': undefined method `public_ip_address' for #<Fog::Compute::RackspaceV2::Server:0x007fa01acb9c58> (NoMethodError)
[2012-11-02 16:58:55 -0400] erikh: anyone know how to express NOT properly in chef search?
[2012-11-02 16:58:57 -0400] beandip: or a server list
[2012-11-02 16:59:12 -0400] erikh: the lucene docs are so bad
[2012-11-02 16:59:39 -0400] beandip: I can pull an image list though
[2012-11-02 16:59:41 -0400] erikh: I've tried my_field NOT true, my_field:[NOT true], and I'm just failing here.
[2012-11-02 17:00:00 -0400] beandip: shows my saved images as well.  So, definitely authenticating
[2012-11-02 17:00:16 -0400] bradgignac: beandip: okay, i'll do a little digging. if you'll be in the room later in the day, i'll ping you. otherwise, i can should you an email
[2012-11-02 17:00:36 -0400] beandip: I'm always around
[2012-11-02 17:00:38 -0400] beandip: ;)
[2012-11-02 17:00:41 -0400] bradgignac: okay
[2012-11-02 17:00:56 -0400] btm: erikh: knife search node NOT myfield:true
[2012-11-02 17:01:06 -0400] erikh: btm: <3
[2012-11-02 17:01:08 -0400] erikh: thanks.
[2012-11-02 17:02:04 -0400] beandip: bradgignac: Even though server list and flavor list are broken, if I could get valid flavor values, maybe I could kick off a build from knife
[2012-11-02 17:02:34 -0400] erikh: hmm... that doesn't seem to be working either. sec, let me paste the whole query
[2012-11-02 17:03:07 -0400] bradgignac: beandip: try flavor of 2
[2012-11-02 17:03:20 -0400] bradgignac: beandip: 1 was 256mb servers, and they were discontinued
[2012-11-02 17:04:13 -0400] erikh: [2012-11-02T10:03:20-07:00] INFO: HTTP Request Returned 400 Bad Request: invalid search query: 'bind_domain_name:a-domain.com AND NOT bind_domain_master:true AND chef_environment:vagrant' Parse error at offset: 65 Reason: Expected one of \ at line 1, column 69 (byte 69) after AND
[2012-11-02 17:04:32 -0400] bradgignac: beandip: i'll investigate the flavor and server listing. it will probably be a few hours before i can get to it. if there's a bug, i'll throw up a pull request.
[2012-11-02 17:04:45 -0400] erikh: btm: is the AND interfering there?
[2012-11-02 17:05:52 -0400] beandip: with flavor 2 I get ERROR: Fog::Compute::RackspaceV2::BadRequest: Fog::Compute::RackspaceV2::BadRequest
[2012-11-02 17:06:03 -0400] beandip: nothing telling with -VV
[2012-11-02 17:12:19 -0400] yfeldblum: beandip, what about the image?
[2012-11-02 17:12:25 -0400] yfeldblum: beandip, does it happen for flavor 3?
[2012-11-02 17:14:49 -0400] beandip: yup
[2012-11-02 17:15:01 -0400] beandip: probably not the flavor value causing the issue
[2012-11-02 17:15:12 -0400] beandip: does anyone have knife-rackspace working with v2?
[2012-11-02 17:15:47 -0400] mattray: beandip: It was working fine for me, lemme go test
[2012-11-02 17:16:37 -0400] sunil__: question about a apache2 cookbook..can I pass an attributeribute to apache to where to look for virtualhost  file to be used for sites available/enable?
[2012-11-02 17:16:45 -0400] btm: erikh: I think you just drop the first AND
[2012-11-02 17:16:59 -0400] beandip: mattray: can you scrub your conf and share with me?
[2012-11-02 17:18:16 -0400] mattray: 'knife rackspace server list --rackspace-version v2' works for me
[2012-11-02 17:18:30 -0400] mattray: https://gist.github.com/4002873
[2012-11-02 17:19:20 -0400] beandip: what version of fog and what version of knife-racksace are you on?
[2012-11-02 17:20:02 -0400] mattray: 0.6.2
[2012-11-02 17:20:13 -0400] mattray: do you have previous versions of the knife-rackspace gem installed?
[2012-11-02 17:21:16 -0400] bdemers: I've seen a couple people asking a similar question, but no real answer to this.    Say I have a default attribute file that contains: default['foo'][
[2012-11-02 17:21:23 -0400] btm: erikh: this is less than awesome.
[2012-11-02 17:21:27 -0400] bdemers: 'version'] = "123"
[2012-11-02 17:21:32 -0400] mhalligan: I'm rewriting a few cookbooks to make every template and link to an external package source an attribute. does that seem silly? It doesn't seem to me that there's another way to override those bits, but am I missing some class inheritance-fu there?
[2012-11-02 17:21:46 -0400] btm: erikh: use quotes and put the not last, e.g. knife search node 'platform:ubuntu AND name:i-* NOT name:i-09aaec72'
[2012-11-02 17:22:11 -0400] bdemers: default['foo']['other'] = "some-string#{node['foo']['version']}"
[2012-11-02 17:22:42 -0400] erikh: eww.
[2012-11-02 17:22:46 -0400] bdemers: if i override the version in a role, should my node[:foo][:other] reflect this change ?
[2012-11-02 17:23:06 -0400] erikh: good to know, but I actually just spent the last 5 or so restructuring the meta for a few reasons
[2012-11-02 17:23:15 -0400] erikh: btm: thanks man, legend as usual
[2012-11-02 17:25:06 -0400] beandip: oh... goddamn RVM
[2012-11-02 17:26:24 -0400] bdemers: formatted better her: https://gist.github.com/4002942
[2012-11-02 17:26:57 -0400] mattray: beandip: I use rvm gemsets, help a bit
[2012-11-02 17:27:02 -0400] bdemers: should the value of node['foo']['other'] reflect the overridden 'version' attribute ?
[2012-11-02 17:28:51 -0400] bdemers: an actual example is here: https://github.com/opscode-cookbooks/mysql/blob/master/attributes/server.rb#L64
[2012-11-02 17:31:57 -0400] beandip: turned out that I had mutliple versions of fog installed
[2012-11-02 17:32:08 -0400] beandip: rvm sometimes has issues
[2012-11-02 17:32:10 -0400] beandip: le sigh....
[2012-11-02 17:32:25 -0400] beandip: well, that was a time waste
[2012-11-02 17:32:27 -0400] beandip: :)
[2012-11-02 17:32:37 -0400] beandip: thanks for y'alls patience
[2012-11-02 17:33:41 -0400] mattray: beandip: been there, done that :/
[2012-11-02 17:35:48 -0400] bradgignac: beandip: so everything is working as expected? i dropped out of IRC for a bit
[2012-11-02 17:38:17 -0400] beandip: yeah
[2012-11-02 17:38:30 -0400] beandip: turned out i had multiple fog gems
[2012-11-02 17:38:33 -0400] beandip: fucksticks
[2012-11-02 17:38:48 -0400] beandip: I hate when I have a PEBKAC issue
[2012-11-02 17:38:57 -0400] leifmadsen: layer 8 problems suck
[2012-11-02 17:41:03 -0400] qhartman: Even more fun though are layer 9
[2012-11-02 17:41:05 -0400] qhartman: (management)
[2012-11-02 17:41:23 -0400] leifmadsen: I have a firewall at that layer
[2012-11-02 17:41:30 -0400] qhartman: oh man, I wish
[2012-11-02 17:43:12 -0400] beandip: leifmadsen: :D nice
[2012-11-02 17:43:26 -0400] Litex: Me too, but I don't have access to manage the ruleset.
[2012-11-02 17:45:27 -0400] beandip: So now I've got another question
[2012-11-02 17:46:13 -0400] beandip: since rackspace now released cloud networks, is there anyone working on adding that ability to specify a cloud network to attach a node to with knife rackspace?
[2012-11-02 17:47:19 -0400] beandip: I should probably ask in the fog mailing list
[2012-11-02 17:50:50 -0400] gyre008: is there a way how I can chown files recursivey in a directory ? I tried https://gist.github.com/4003117 but it doesn't seem to work...
[2012-11-02 17:51:02 -0400] gyre008: there's gotta be a way Chef way
[2012-11-02 17:53:27 -0400] mattray: beandip: it was discussed at the OpenStack summit
[2012-11-02 17:53:51 -0400] mattray: beandip: my take was that whoever wanted it in Fog would add it
[2012-11-02 17:54:27 -0400] mattray: beandip: once it goes into knife-OpenStack via Fog, knife-HP and knife-Rackspace would pick it up pretty easily
[2012-11-02 17:54:50 -0400] qhartman: gyre007, The only way I know of is to shell out to a command line
[2012-11-02 17:55:31 -0400] btm: gyre008: what's hard with that is knowing when to trigger it. Do we walk the whole tree and look for problems? or just chown when the top level directory is wrong?
[2012-11-02 17:56:16 -0400] gyre008: well btm I want to chown recursivelylike chown -R...simples
[2012-11-02 17:56:30 -0400] gyre008: i can do it in execute resource though...
[2012-11-02 17:56:47 -0400] btm: gyre008: it isn't simple because to make the resource idempotent you have to know when it needs to be done.
[2012-11-02 17:58:12 -0400] gyre008: once its convergedpretty much on every chef-client run
[2012-11-02 17:59:32 -0400] bradgignac: beandip, mattray: i've written most of the rackspace fog code recently, and i'll get around to networks eventually. of course, pull requests are always welcome
[2012-11-02 18:00:13 -0400] mattray: bradgignac: yeah, wherever it shows up first will migrate to the other providers. Too bad they don't extend each other
[2012-11-02 18:00:38 -0400] btm: gyre008: yeah, that's not idempotent. If you want chef to do something every run regardless of state you should just use the execute resource.
[2012-11-02 18:01:23 -0400] bradgignac: mattray: there's been a fair amount of discussion about it, and i hope it will happen eventually. there's some concerns around versioning that need to be addressed.
[2012-11-02 18:01:34 -0400] mattray: cool
[2012-11-02 18:02:03 -0400] mattray: that's the right thing to do, it's just a matter of someone taking the time to do it
[2012-11-02 18:02:08 -0400] bradgignac: yeah
[2012-11-02 18:04:01 -0400] beandip: bradgignac: thanks
[2012-11-02 18:04:20 -0400] beandip: mattray: I might be able to spare some cycles to tackle networks
[2012-11-02 18:04:28 -0400] beandip: not this wek or next
[2012-11-02 18:04:38 -0400] mattray: beandip: for Rackspace or OpenStack?
[2012-11-02 18:04:46 -0400] beandip: rackspace
[2012-11-02 18:04:50 -0400] mattray: :)
[2012-11-02 18:05:05 -0400] beandip: I'll see what I can budget
[2012-11-02 18:05:19 -0400] mattray: knife-openstack is probably the most complicated of the knife plugins, too many configurations to support
[2012-11-02 18:05:38 -0400] beandip: My whole purpose for moving to next-gen servers is to get my backend services off the servicenet
[2012-11-02 18:05:45 -0400] mattray: makes sense
[2012-11-02 18:09:22 -0400] ssd7: Ohai Chefs
[2012-11-02 18:09:23 -0400] KevMo: Using *** Chef 10.16.2 *** and getting "HTTP Request Returned 404 Not Found: No routes match the request: /reports/nodes/NODENAME/runs" when I run chef-client.  Can anyone give me a fix for this.  Seems to be a chef-client bug.  At first I thought that it was because I had an earlier version of chef server.  Upgraded the server, same thing.  Built an entirely new server from scratch, same thing.  Earlier clients (ex; *** Chef 10.12.0 ***) does not have this issue.
[2012-11-02 18:10:21 -0400] ssd7: KevMo, isn't a bug.  Just some ground work for some features that might be upcomming soon.  I think there might be a config option you can set though to avoid that failure.  One sec.
[2012-11-02 18:10:59 -0400] KevMo: ssd7: saweet.  Thanks.  Been driving me nuts.
[2012-11-02 18:11:39 -0400] ssd7: KevMo: Try `enable_reporting false` in your client.rb
[2012-11-02 18:14:25 -0400] KevMo: ssd7: oh man, that's all it was.  "enable_reporting false" in the client.rb worked.  Can this be added to chef server common errors @ http://wiki.opscode.com/display/chef/Common+Errors
[2012-11-02 18:14:56 -0400] KevMo: ssd7:  thank you!
[2012-11-02 18:17:10 -0400] ssd7: KevMo: No problem!  We should definitely get some information up about some of the new output people may encounter somewhere.
[2012-11-02 18:39:07 -0400] mhalligan: is there an equivalent of install.sh for os x?
[2012-11-02 18:39:58 -0400] mhalligan: gem install chef seems to have left me in dependency hell
[2012-11-02 18:43:29 -0400] mhalligan: nevermind, install.sh works
[2012-11-02 19:19:29 -0400] mattray: beandip: did the rackspace stuff start working for you?
[2012-11-02 19:19:35 -0400] mattray: I'm having issues now
[2012-11-02 19:24:53 -0400] wassy121: Hey all.  Are there any good "data bag management" scripts out there?  For instance, to auto-regenerate a whole bunch of passwords for a set of users, or disable a bunch of databags if environment == production
[2012-11-02 19:25:31 -0400] wassy121: Or any other fanciful stuff like that?  We need to separate out our internal databags from live, production implementation.  Stronger password requirements, etc.
[2012-11-02 19:27:31 -0400] JasonF: wassy121: I've taken to namespacing some of my data bags: like somedatabag_#{node.chef_environment} or similar
[2012-11-02 19:29:47 -0400] wassy121: JasonF: that's a reasonable idea
[2012-11-02 19:29:58 -0400] wassy121: Let me think through that a bit
[2012-11-02 19:30:50 -0400] yfeldblum: wassy121, it's just data in a database ...
[2012-11-02 19:31:02 -0400] yfeldblum: JasonF, you don't do that with any of your applications ...
[2012-11-02 19:31:21 -0400] JasonF: yfeldblum: what do you mean?
[2012-11-02 19:31:26 -0400] wassy121: yfeldblum, yes, but it's data in N databases, across N chefmasters, each with M environments
[2012-11-02 19:32:35 -0400] wassy121: So, when the schema of a data bag changes in DEV, and it needs to change passwords before it pushes to LIVE, it needs to be handled appropriately
[2012-11-02 19:33:10 -0400] yfeldblum: JasonF, if you have a rails app and you have 3 instances of that app (one for qa, one for external testers, one for production), you don't deploy a single database but then name each table like "users_qa", "users_exttest", "users_prod" ...
[2012-11-02 19:33:39 -0400] yfeldblum: JasonF, you make 3 databases, and in each database you have a "users" table
[2012-11-02 19:33:44 -0400] JasonF: yfeldblum: In that case; I'd use separate database servers. Which roughly translates into separate data bags.
[2012-11-02 19:33:55 -0400] yfeldblum: JasonF, no, a data-bag is like a table
[2012-11-02 19:34:00 -0400] JasonF: yfeldblum: I didn't say to namespace data bag *items*, I said to namespace the data bag
[2012-11-02 19:34:38 -0400] wassy121: JasonF: ahh, that makes even more sense.  So you have data_bags/admins_live/blah.json and data_bags/admins_dev/blah.json
[2012-11-02 19:34:42 -0400] yfeldblum: JasonF, each data-bag item being like a single record in the table
[2012-11-02 19:35:11 -0400] JasonF: wassy121: not exactly in that example, but yes, that's the general idea. Not even trying to say it's a good solution, but it's just a solution :)
[2012-11-02 19:35:51 -0400] wassy121: Fair enough.  I tried looking for other examples of what to do in cases like mine, but couldn't find anything in particular
[2012-11-02 19:41:59 -0400] MattJ: The attributes that I see under 'default' when I run 'knife node edit' - any idea why they might get overwritten after a chef-client run on the node?
[2012-11-02 19:42:40 -0400] awgross: MattJ: Overrides?
[2012-11-02 19:42:43 -0400] wassy121: MattJ, recipes can set those attributes via "node.set[:foo]=:bar"
[2012-11-02 19:43:16 -0400] MattJ: Hmm, I wrote the only code that should be touching these attributes
[2012-11-02 19:43:27 -0400] MattJ: and I didn't know about node.set, so I doubt I'm calling it...
[2012-11-02 19:43:27 -0400] wassy121: You're saying that after "knife node edit", then run chef-client on the node, now "knife node edit" shows new/different values?
[2012-11-02 19:43:32 -0400] MattJ: Exactly
[2012-11-02 19:43:42 -0400] MattJ: It shows the previous values in fact (before my edit)
[2012-11-02 19:44:36 -0400] wassy121: In current chef, you can also do "node[:foo] = :bar", and set that value, maybe you did that in an if statment?
[2012-11-02 19:44:37 -0400] MattJ: I'm not using overrides anywhere
[2012-11-02 19:44:46 -0400] MattJ: Hmm, let me check
[2012-11-02 19:45:14 -0400] awgross: wassy121: what is your setup, chef solo/client?  using Vagrant etc?
[2012-11-02 19:46:04 -0400] wassy121: awgross, chef server per datacenter, multiple environments per DC.  No Vagrant, but VMs that call chef upon initial bootstrap
[2012-11-02 19:46:34 -0400] awgross: hmm ok
[2012-11-02 19:46:40 -0400] awgross: not the issue I was thinking of
[2012-11-02 19:46:48 -0400] awgross: relates to Chef-Solo
[2012-11-02 19:46:57 -0400] wassy121: no worries.
[2012-11-02 19:55:48 -0400] beandip: mattray: yes
[2012-11-02 19:56:12 -0400] mattray: beandip: I'm getting the same issues you were
[2012-11-02 19:56:13 -0400] beandip: everyting was working for me after I realized I was calling out to the wrong damn fog version
[2012-11-02 19:56:31 -0400] beandip: mattray 'gem list | grep fog'
[2012-11-02 19:56:33 -0400] mattray: you were able to create servers?
[2012-11-02 19:56:42 -0400] beandip: yeah, I was an hour ago
[2012-11-02 19:56:48 -0400] beandip: let me try spinning up another node
[2012-11-02 19:56:49 -0400] mattray: 1.6.0
[2012-11-02 19:56:50 -0400] beandip: one sec
[2012-11-02 19:57:00 -0400] beandip: what error are you getting?
[2012-11-02 19:57:38 -0400] beandip: Yeah, knife just kicked off a v2 server build for me
[2012-11-02 19:57:46 -0400] beandip: looks like it's processing
[2012-11-02 19:57:52 -0400] beandip: I'm at waiting for server.....
[2012-11-02 19:58:31 -0400] mattray: https://gist.github.com/4003966
[2012-11-02 19:59:19 -0400] yfeldblum: beandip, might think about using bundler
[2012-11-02 20:00:13 -0400] beandip: yfeldblum: yeah, I do for my cookbook developement
[2012-11-02 20:01:12 -0400] beandip: mattray: you aren't providing a --server-name or --node-name
[2012-11-02 20:02:17 -0400] mattray: beandip: don't need that anymore
[2012-11-02 20:02:31 -0400] beandip: knife rackspace server create --server-name foo --node-name foo -f2 -I5cebb13a-f783-4f8c-8058-c4182c724ccd -VV --rackspace-version v2
[2012-11-02 20:02:39 -0400] beandip: mattray: try that for shits and giggles
[2012-11-02 20:03:19 -0400] mattray: nope
[2012-11-02 20:03:34 -0400] mattray: with 0.6.0, I added automatic node naming for v2, since it was in v1
[2012-11-02 20:04:30 -0400] beandip: nice
[2012-11-02 20:04:44 -0400] mattray: testing with fog
[2012-11-02 20:04:52 -0400] beandip: well it looks like fog isn't happy with what you're sending it
[2012-11-02 20:05:24 -0400] beandip: try specifying the server-name anyhow
[2012-11-02 20:05:29 -0400] beandip: see if that fixes it for you
[2012-11-02 20:05:59 -0400] ssd7: densone1:
[2012-11-02 20:06:01 -0400] ssd7: gra
[2012-11-02 20:06:08 -0400] ssd7: tab completion ftl
[2012-11-02 20:06:58 -0400] beandip: mattray: I'm looking at your code
[2012-11-02 20:07:50 -0400] mattray: beandip: I'm just running opscode/knife-rackspace trunk with a patch to push something in via the personality
[2012-11-02 20:07:59 -0400] mattray: works directly from fog
[2012-11-02 20:08:07 -0400] mattray: let me roll the patch back
[2012-11-02 20:08:30 -0400] beandip: you create a random node-name but not server name
[2012-11-02 20:08:38 -0400] mattray: it's the patch
[2012-11-02 20:08:53 -0400] beandip: https://github.com/opscode/knife-rackspace/blob/master/lib/chef/knife/rackspace_server_create.rb
[2012-11-02 20:08:56 -0400] mattray: not sure what's broken, but something in knife-rackspace trunk ain't right
[2012-11-02 20:08:58 -0400] beandip: line 252
[2012-11-02 20:08:58 -0400] Majost: is it possible to tell remote_file to use a sha1 checksum opposed to a sha256?
[2012-11-02 20:09:06 -0400] beandip: you create the node_name
[2012-11-02 20:09:34 -0400] beandip: The easy solve would be to set server_name to the same thing as chef_node_name
[2012-11-02 20:09:50 -0400] beandip: because what gets passed to fog is the server_name, not chef-Node_name
[2012-11-02 20:10:38 -0400] mattray: beandip: https://github.com/opscode/knife-rackspace/blob/master/lib/chef/knife/rackspace_server_create.rb#L161
[2012-11-02 20:11:35 -0400] beandip: oh
[2012-11-02 20:11:38 -0400] beandip: hmm....
[2012-11-02 20:11:40 -0400] mattray: it only creates a random name if the chef_node_name or the server_name are empty
[2012-11-02 20:12:32 -0400] beandip: I stand corrected
[2012-11-02 20:12:34 -0400] beandip: hmm
[2012-11-02 20:12:38 -0400] beandip: not sure
[2012-11-02 20:12:44 -0400] beandip: I need to step into a meeting
[2012-11-02 20:12:52 -0400] beandip: after which I'll look closer with you
[2012-11-02 20:12:54 -0400] mattray: I'm pretty sure someone has broken knife-rackspace trunk
[2012-11-02 20:13:02 -0400] mattray: I'll piece through it later
[2012-11-02 20:17:06 -0400] beandip: kk
[2012-11-02 20:21:43 -0400] Majost: let met rephrase -- does the checksum option or remote_file allow anything other than sha256?
[2012-11-02 20:22:51 -0400] Majost: I am trying to pull a sha1 or md5 sum from a nexus server as the source for the checksum to determine if the local copy is correct -- but nexus only generates sha1 and md5 sums
[2012-11-02 20:31:48 -0400] behemphi: @ssd7, any word on the docs repo going public?
[2012-11-02 20:42:11 -0400] drewww: when I need to make changes to a site cookbook, what's the right git strategy? do I make a branch and check my edits in? I don't totally get how chef wants to manage all the vendor branches in chef-repo
[2012-11-02 20:43:33 -0400] yfeldblum: drewww, the only thing that touches or looks at your vendor branches is `knife cookbook site install`; everything else, such as `knife cookbook upload`, looks only at the contents of the directories you specify in your knife.rb
[2012-11-02 20:43:51 -0400] rhodee: I've come across a node.json error due to a NoMethodError 'delete' any ideas on how to address this? http://stackoverflow.com/questions/13181226/chef-solo-run-list-error-with-json
[2012-11-02 20:44:15 -0400] drewww: right, but if I have changes in site-cookbooks, knife cookbook site install freaks out
[2012-11-02 20:44:24 -0400] drewww: so I need to check those changes in so the directories aren't dirty
[2012-11-02 20:44:29 -0400] drewww: so just shove them into my own branches?
[2012-11-02 20:44:43 -0400] drewww: or check them into the vendor branch and resolve merge conflicts later if I need to pull later?
[2012-11-02 20:47:10 -0400] yfeldblum: drewww, that's more a question of how to use git ... it's up to you ...
[2012-11-02 20:47:55 -0400] yfeldblum: drewww, some people use librarian-chef to manage cookbooks (myself included, as i wrote it); some people use berkshelf to manage cookbooks; some people just download them from the browser, etc
[2012-11-02 20:48:11 -0400] masterkorp: http://i.imgur.com/7f5zB.gif
[2012-11-02 20:48:46 -0400] jroberts: newb question:  if create roles/default.rb and call it default will it get assign to all new nodes created?
[2012-11-02 20:49:11 -0400] jroberts: ls
[2012-11-02 20:49:26 -0400] sunil__: I have a very custom virtualhosts file for apache, whats the best way to add it to apache2 cookbook? thought of creating a web_app cookbook for it but its pretty beasty and wonder if I can just tell the cookbook to use a file for vhost configs?
[2012-11-02 20:49:43 -0400] bluepojo: masterkorp: http://www.youtube.com/watch?v=1oHWvFrpocY
[2012-11-02 20:49:45 -0400] bluepojo: the whole fight
[2012-11-02 20:50:25 -0400] awgross: wat...
[2012-11-02 20:53:52 -0400] sunil__: @jroberts no I don't think it will get assigned unless you explicitly tell it to add to those nodes..
[2012-11-02 20:54:46 -0400] jroberts: @sunil_ Yeah, that is what I am finding in my searches, but I just can't help but think there is another way.
[2012-11-02 20:55:07 -0400] yfeldblum: jroberts, why do you think there's another way?
[2012-11-02 20:55:52 -0400] yfeldblum: jroberts, remember that in lower-level tools like knife, it's much better for everything to be simple and explicit; then you can add your own sugar on top
[2012-11-02 20:56:07 -0400] jroberts: because  a  default roll applied to all new nodes makes sense
[2012-11-02 20:56:10 -0400] hoover_damm: jroberts, assign the data in environments?
[2012-11-02 20:56:24 -0400] hoover_damm: jroberts, that environment could have a runlist that includes a specific role or recipe as your base
[2012-11-02 20:56:52 -0400] hoover_damm: jroberts, basically you could have a default role... but no it doesn't work that way
[2012-11-02 20:56:54 -0400] jroberts: hoover_damm:  Ok. I was thinking about that.
[2012-11-02 20:57:09 -0400] hoover_damm: jroberts, so work through the environments angle and see if that fits the model
[2012-11-02 20:59:07 -0400] yfeldblum: jroberts, it seems to make sense, now ... but what happens when it turns out it's not such a great idea to do that all the time?
[2012-11-02 21:00:55 -0400] masterkorp: bluepojo: ahah, yes
[2012-11-02 21:02:09 -0400] jroberts: I here ya.
[2012-11-02 21:02:16 -0400] MattJ: wassy121, JFYI I'm still stuck on this issue... it seems even when I set something in 'overrides' it gets removed after a chef-client run
[2012-11-02 21:02:26 -0400] jroberts: The environment seems like a better place.
[2012-11-02 21:02:55 -0400] jroberts: thanks
[2012-11-02 21:03:11 -0400] MattJ: I'm starting to wonder if I'm completely misunderstanding how attributes are supposed to work
[2012-11-02 21:06:49 -0400] hoover_damm: MattJ, that's possible
[2012-11-02 21:06:55 -0400] hoover_damm: MattJ, people abuse attributes in awkward ways
[2012-11-02 21:13:45 -0400] breck: Hello, is there a way to access the CHEF server API from .NET? Or do I need to do this over raw HTTP?
[2012-11-02 21:17:53 -0400] mattray: breck: not aware of a library for .NET yet, there's Java, Ruby and Python
[2012-11-02 21:18:02 -0400] mattray: (that I'm aware of)
[2012-11-02 21:18:14 -0400] breck: Interesting - if I wanted to right one... where would be the best place to start?
[2012-11-02 21:18:48 -0400] breck: (Bearing in mind I'm new to chef... how much expertise is required to implement a full client?)
[2012-11-02 21:18:56 -0400] mattray: well, if it was me I'd take a look at the other libraries and read up on the API
[2012-11-02 21:19:12 -0400] mattray: 1 sec, lemme look for an API doc
[2012-11-02 21:19:34 -0400] mattray: breck: http://wiki.opscode.com/display/chef/Server+API
[2012-11-02 21:20:04 -0400] breck: yeah - I was reading that. Unfortunately it doesn't discuss the mechanics of e.g. signing the request
[2012-11-02 21:20:05 -0400] mattray: you might want to hit up the mailing list to see if anyone else has worked on something similar.
[2012-11-02 21:20:45 -0400] breck: Ok - will do. Thanks for your help!
[2012-11-02 21:20:56 -0400] mattray: and hit up coderanger for hints on auth, he wrote pychef
[2012-11-02 21:21:29 -0400] coderanger: You raaaaaang
[2012-11-02 21:21:40 -0400] flaccid: ring ring
[2012-11-02 21:21:54 -0400] hoover_damm: breck, and if you make it... please publish it and make it available :)
[2012-11-02 21:22:09 -0400] hoover_damm: breck, because windows users are growing so it would only help the windows lifecycle i imagine :)
[2012-11-02 21:22:14 -0400] mattray: yeah, mention it on the mailing list because people will show up to help
[2012-11-02 21:22:23 -0400] hoover_damm: indeed
[2012-11-02 21:22:31 -0400] coderanger: breck: If you have access to OpenSSL, its pretty easy
[2012-11-02 21:22:52 -0400] breck: cool
[2012-11-02 21:22:59 -0400] coderanger: breck: https://github.com/coderanger/pychef/blob/master/chef/auth.py
[2012-11-02 21:23:33 -0400] breck: Lovely - is that what Mixlib::Authentication uses?
[2012-11-02 21:23:54 -0400] coderanger: Yeah, I just like to think thats a bit easier to read :)
[2012-11-02 21:25:00 -0400] JasonF: I'm trying to test backup/restore of a chef-server, and now any attempt to sync cookbooks ends in EOFError while trying to get the http url for the first cookbook pulled. I've already attempted deleting+reuploading all cookbooks using knife, and that's not successful. Any thoughts as to places to check?
[2012-11-02 21:25:08 -0400] coderanger: breck: Basically that + https://github.com/coderanger/pychef/blob/master/chef/api.py (notably the key loading and request and api_request)
[2012-11-02 21:25:22 -0400] coderanger: breck: That will get you API access, after that making an OO thang is up to you :)
[2012-11-02 21:26:01 -0400] breck: @coderanger: You're a hero. I can take it from there
[2012-11-02 21:26:08 -0400] btm: breck: http://wiki.opscode.com/display/chef/Making+Authenticated+API+Requests
[2012-11-02 21:26:34 -0400] btm: breck: if you make any grand discoveries please document them there.
[2012-11-02 21:26:41 -0400] coderanger: breck: http://pychef.readthedocs.org/en/latest/auth.html exists too
[2012-11-02 21:27:02 -0400] coderanger: Written as precisely as I could
[2012-11-02 21:27:10 -0400] breck: @btm: You mean mention them in this channel?
[2012-11-02 21:30:14 -0400] btm: breck: no, on that wiki page I just linked to. there are secions documented for making API requests in different languages / different tools there.
[2012-11-02 21:31:42 -0400] amerine: Anyone here have enough SO rep to cast a reopen vote for http://stackoverflow.com/questions/13186989/how-do-you-make-a-chef-resource-optional so we can get 'ignore_failre true' some google foo?
[2012-11-02 21:32:07 -0400] amerine: I hate everything about that sentence, but I have a co-worker that needs help.
[2012-11-02 21:32:51 -0400] OlegYch|h: hello
[2012-11-02 21:33:02 -0400] OlegYch|h: i'm following this guide http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2012-11-02 21:33:15 -0400] OlegYch|h: where do i get validation.pem?
[2012-11-02 21:33:52 -0400] OlegYch|h: for workstation
[2012-11-02 21:34:27 -0400] amerine: OlegYch|h: Read the bottom of this: http://wiki.opscode.com/display/chef/Configuring+Chef+Client
[2012-11-02 21:34:40 -0400] OlegYch|h: if i copy it from server and try to bootstrap a node i get  "Chef encountered an error attempting to create the client "test21"  Failed to authenticate. Ensure that your client key is valid."
[2012-11-02 21:36:24 -0400] yfeldblum: amerine, http://stackoverflow.com/a/13203374/12349
[2012-11-02 21:37:43 -0400] OlegYch|h: amerine: ok so I downloaded validation.pem to /etc/chef (after knife configure) but i get an error about failure to authenticate
[2012-11-02 21:43:08 -0400] MattJ: hoover_damm, am I abusing attributes by using them to specify what version of software I want to deploy on a node?
[2012-11-02 21:43:45 -0400] MattJ: and modifying that during the node's lifetime
[2012-11-02 21:45:22 -0400] OlegYch|h: amerine: i'm sure that my-username.pem and validation.pem are the same on workstation and server
[2012-11-02 21:50:59 -0400] JasonF: So I found a weird situation: After restoring my testing chef server, a server that had already been configured to use that chef-server continues to work properly, however, the chef server ITSELF can't sync cookbooks.
[2012-11-02 21:51:08 -0400] JasonF: With the EOFError indicated above
[2012-11-02 21:53:23 -0400] JasonF: I've removed the client.pem + the associated client from the chef-server, and had it re-authenticate using validation.pem to no avail
[2012-11-02 21:58:25 -0400] awgross: i hate it when minitest cant find my files and I can't remember how I fixed the problem last time.
[2012-11-02 22:00:29 -0400] OlegYch|h: amerine: same happens if i try to bootstrap client on workstation from server
[2012-11-02 22:06:48 -0400] JasonF: Hm. The one succeeding server was succeeding only because it had the cookbooks cached.
[2012-11-02 22:06:57 -0400] JasonF: So the only reason it's failing is an inability to sync cookbooks.
[2012-11-02 22:08:01 -0400] zuhaib: Hey anyone runs chef-client with fork support?  We are starting to see chef use up 35% of ram memory on our ec2 boxes and I guess before their is a fix to the issue we want to give fork a try
[2012-11-02 22:08:03 -0400] ale______: anyone know how to decrypt an encrypted data bag with the linux command openssl and the secret key?  I have a data bag with two keys (id, name)  name is "something" .  I want to decrypt  "something" with the openssl command. "openssl enc -in ./test.txt -out ./test-dec.txt  -d -aes-256-cbc -kfile ./data_bag_key.pem   (/test.txt  has the value for key name).  this gives me a bad magic number.
[2012-11-02 22:08:18 -0400] zuhaib: in dev it looks good but wondering if anyone has ran in to any unexpected issues
[2012-11-02 22:08:35 -0400] spheromak: zuhaib: fork is a good option. also running it on an interval instead of as a daemon
[2012-11-02 22:09:32 -0400] JasonF: ale______: I use the knife-file plugin to do  "knife file decrypt" when I need to get an enc db
[2012-11-02 22:11:11 -0400] ale______: @JasonF I have to decrypt the data bag from a server that doesn't have chef.  I use the python client but it doesn't deal with encrypted data bag.  I was hopping to figure out how to open it with openssl and then write it in python.
[2012-11-02 22:17:03 -0400] yfeldblum: ale______, obviously you must know the encryption/decryption algorithms, and you can find them here: https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb
[2012-11-02 22:18:08 -0400] ale______: @yfeldblum, yeah I know it's AES 256 CBC and base64 encoded
[2012-11-02 22:18:51 -0400] yfeldblum: ale______, also YAML, and also only the top-level values apart from the id are individually encrypted
[2012-11-02 22:19:58 -0400] ale______: @yfeldblum, so far I'm following (https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb) I extract the value for a key and try to decode that value with the secret key
[2012-11-02 22:22:19 -0400] yfeldblum: right, so you base64decrypt, then you set up openssl aes-256-cbc with a key-and-iv derived from the key using the algorithm pkcs5_keyivgen, and then you use that cipher instance to decrypt, and then you yaml-parse
[2012-11-02 22:27:09 -0400] yfeldblum: ale______, which you can find here: http://rxr.whitequark.org/mri/source/ext/openssl/ossl_cipher.c?v=1.9.3-p195#303
[2012-11-02 22:29:00 -0400] ale______: @yfeldblum thanks will look at this now.
[2012-11-02 22:46:58 -0400] OlegYch|h: ok i tried this http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-401Unauthorized(usingvalidatorAPIclient)
[2012-11-02 22:47:24 -0400] OlegYch|h: now bootstrap fails with cookbook being not found
[2012-11-02 22:47:40 -0400] OlegYch|h: even after i upload that cookbook
[2012-11-02 22:53:14 -0400] OlegYch|h: ah, that's because i doublequoted recipe name
[2012-11-02 22:53:22 -0400] OlegYch|h: that worked on windows..
[2012-11-02 22:57:17 -0400] OlegYch|h: chef ubuntu package seems to is broken in so many ways..
[2012-11-02 23:01:18 -0400] kindsol: I have a LWP with almost everything I need, I just want to override one action in with my custom LWP.  has anyone came up with a way to "inherit" actions from another LWP?
[2012-11-02 23:03:45 -0400] siezer: hrm.. any ideas? https://gist.github.com/93fd05810591ff9f9680 (test-kitchen)
[2012-11-02 23:19:51 -0400] Axsuul: Is a certain chef only supposed to work with ubuntu 12.04?
[2012-11-02 23:19:54 -0400] Axsuul: certain version*
[2012-11-02 23:21:58 -0400] gchristensen: what do you mean, Axsuul?
[2012-11-02 23:22:39 -0400] Axsuul: gchristensen: i.e. chef 0.10.16 isn't compatible with Ubuntu 10.04
[2012-11-02 23:22:55 -0400] Axsuul: doesn't appear to have the package ruby-mixlib-shellout
[2012-11-02 23:24:29 -0400] gchristensen: so did you mean to ask: Is a certain version of chef only supposed to work with ubuntu 10.04?
[2012-11-02 23:24:39 -0400] gchristensen: otherwise just latest chef
[2012-11-02 23:25:03 -0400] Axsuul: gchristensen: yep, sorry.
[2012-11-02 23:25:45 -0400] gchristensen: gotcha
[2012-11-02 23:26:01 -0400] gchristensen: I don't actually know the answer to that problem, but now that it is clarified, maybe someone else can help
[2012-11-02 23:42:35 -0400] coderanger: Axsuul: We test back to 10.04 and RHEL/CentOS 5 I think
[2012-11-02 23:42:54 -0400] coderanger: Axsuul: As for packages, omnibus is the One True Way
[2012-11-02 23:43:06 -0400] coderanger: We highly highly highly recommend not using system packages
[2012-11-02 23:47:52 -0400] gchristensen: coderanger: will knife bootstrap -d ubuntu12.04-gems use the omnibus installer?
[2012-11-02 23:48:09 -0400] coderanger: No, you told it to install from gems ..
[2012-11-02 23:48:23 -0400] coderanger: Just use the default bootstrap template
[2012-11-02 23:48:25 -0400] gchristensen: and it uses chef-full by default?
[2012-11-02 23:48:53 -0400] coderanger: it is now smart and will figure out what platform you are on and get the correct package type automatically
[2012-11-02 23:49:05 -0400] gchristensen: hrmmm good to know, thank you
[2012-11-02 23:49:28 -0400] coderanger: (windows being an exception currently)
[2012-11-02 23:49:46 -0400] gchristensen: usually is ;)
[2012-11-02 23:50:19 -0400] MattJ: Beat me to it

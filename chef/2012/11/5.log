[2012-11-05 01:15:58 -0500] josanabr: hello
[2012-11-05 01:16:39 -0500] josanabr: I'm trying to use sed with my recipes but it does not work
[2012-11-05 01:16:45 -0500] josanabr: I used the bash resource
[2012-11-05 01:16:51 -0500] josanabr: then the execute resource
[2012-11-05 01:17:01 -0500] josanabr: but both utterly failed :(
[2012-11-05 01:17:36 -0500] josanabr: I hear suggestions about how to replace text in text files
[2012-11-05 01:29:38 -0500] jtimberman: josanabr: we generally recommend that you manage the entire file's contents rather than replacing specific lines
[2012-11-05 01:29:57 -0500] jtimberman: josanabr: however, if you really do need to replace a line, you can use a utility library called Chef::Utils::FileEdit.
[2012-11-05 01:30:29 -0500] jtimberman: library documentation is here: http://rubydoc.info/gems/chef/10.16.2/Chef/Util/FileEdit
[2012-11-05 01:30:41 -0500] josanabr: thank you, I'll give a try
[2012-11-05 01:31:33 -0500] jtimberman: you can use this as an example: https://github.com/opscode-cookbooks/dynect/blob/master/recipes/ec2.rb#L48-55
[2012-11-05 01:33:56 -0500] josanabr: cool, one additional question
[2012-11-05 01:34:11 -0500] josanabr: this library does not come with chef by default, right?
[2012-11-05 01:34:19 -0500] josanabr: Do I need to install it on my system?
[2012-11-05 01:35:26 -0500] jtimberman: josanabr: its built into chef.
[2012-11-05 01:35:33 -0500] jtimberman: has been for like, 3 years ;)
[2012-11-05 01:35:55 -0500] josanabr: excellent
[2012-11-05 01:36:05 -0500] josanabr: thanks a lot... right now, I will let you know
[2012-11-05 01:36:09 -0500] josanabr: if it worked for me ;)
[2012-11-05 01:36:11 -0500] josanabr: thanks again
[2012-11-05 01:41:26 -0500] josanabr: well, syntactically is correct but may be I'm having problem with the regular expression which I need to match ;)
[2012-11-05 01:46:09 -0500] josanabr: cool, it worked
[2012-11-05 03:23:33 -0500] zuhaib: Hey is manage.opscode.com having some issue?  I created a new free org and I am getting Permission denied (Error 22001). just for viewing clients
[2012-11-05 03:36:05 -0500] hoover_damm: zuhaib, if it doesn't go away open a support tiket (opscode.com/support)
[2012-11-05 03:40:30 -0500] zuhaib: hoover_damm: thanks, dropped a ticket since this has been bugging me since Sat
[2012-11-05 03:56:11 -0500] cschneid: if I want to ssh to a specific node, is there a command to get me a shell there?  (as opposed to knife ssh which seems to just run a command there)
[2012-11-05 04:10:55 -0500] ptrstr: cschneid: try: knife ssh *:* screen
[2012-11-05 04:11:26 -0500] cschneid: ptrstr: actually - secondary question: what do I search for in the docs to understand the *:* arg of that? (the node filter)
[2012-11-05 04:14:59 -0500] ptrstr: search for search :)
[2012-11-05 04:15:18 -0500] ptrstr: http://wiki.opscode.com/display/chef/Search
[2012-11-05 07:34:57 -0500] mio-g: Does anyone used password attr in the user resource? I am getting "argument must be a string" error. The error comes from the ruby-shadow (shadow.c) but i cant understand why.
[2012-11-05 08:17:25 -0500] BryanWB_: ohai chefs!
[2012-11-05 08:18:14 -0500] specialsauce: ohai!
[2012-11-05 08:50:57 -0500] benner: it is possible to limit search result i.e. for first 5 nodes?
[2012-11-05 08:58:50 -0500] specialsauce: benner: no idea in terms of search syntyax, but you get an array back, you could sort it and get first 5 elements or whatever
[2012-11-05 09:16:45 -0500] benner: specialsauce: yes, in ruby i know that. now i did workaround: knife search <q> | head -n <<line per host> * <hosts>>
[2012-11-05 09:47:15 -0500] shamaz: I create a hash object in a ruby_block resource and save the reference in a variable e.g. 'env'. But when the ruby_block is finished the content of the 'env' var is empty. How can i keep the hash object alive?
[2012-11-05 09:49:05 -0500] shamaz: I tryed it with node.run_state = myHashObj in the ruby_block, but the result is the same: FATAL: NoMethodError: undefined method `[]' for nil:NilClass when I call like this: node.run_state[:myKey]
[2012-11-05 09:56:24 -0500] railsraider: how do i set node.fqdn value
[2012-11-05 09:58:59 -0500] railsraider: i need to set the fqdn on chef-run
[2012-11-05 10:06:37 -0500] shamaz: railsraider: try 'node["fqdn"] = "newValue". But this is only temporary. Ohai overwrites it at the end of the chef run.
[2012-11-05 10:06:54 -0500] railsraider: yes i know
[2012-11-05 10:26:54 -0500] shamaz: I create a hash object in a ruby_block resource and save the reference in a variable e.g. 'env'. But when the ruby_block is finished the content of the 'env' var is empty. How can i keep the hash object alive?
[2012-11-05 10:27:34 -0500] aruntomar: railsraider: fqdn is a ohai automatic attribute. so if you need to change that permanently then modify the node
[2012-11-05 10:28:58 -0500] aruntomar: railsraider: http://wiki.opscode.com/display/chef/Attributes
[2012-11-05 10:29:47 -0500] railsraider: aruntomar: i am trying to set a new node with knife ec2, this is the closest solution
[2012-11-05 10:29:48 -0500] railsraider: http://www.onepwr.org/2012/04/26/chef-recipe-to-setup-up-a-new-nodes-fqdn-hostname-etc-properly/
[2012-11-05 10:31:08 -0500] aruntomar: railsraider: there is already a cookbook called "hosts" to set the hostname in ubuntu
[2012-11-05 10:31:25 -0500] railsraider: but not the fqdn
[2012-11-05 10:32:00 -0500] railsraider: the problem is that the fqdn on first chef-run is set to whatever ec2 is using
[2012-11-05 10:32:13 -0500] railsraider: i am trying to automate the process of using the user data on ec2
[2012-11-05 10:32:18 -0500] railsraider: via chef
[2012-11-05 10:34:04 -0500] aruntomar: railsraider: is there a particular reason you want to set the hostname in the first chef run
[2012-11-05 10:35:13 -0500] aruntomar: railsraider: if you want to set the hostname so that you can identify it by the name of your choice then use the -N option to set the nodename
[2012-11-05 10:40:59 -0500] shamaz: is it new that I cannot see the output of the 'execute' resource in debug mode?
[2012-11-05 10:42:43 -0500] masterkorp: :debug shows iirc
[2012-11-05 10:46:04 -0500] shamaz: sorry, but what does that mean iirc?
[2012-11-05 10:46:31 -0500] masterkorp: shamaz: http://www.urbandictionary.com/define.php?term=iirc
[2012-11-05 10:46:32 -0500] BryanWB_: if i recall correctly
[2012-11-05 10:54:46 -0500] shamaz: ok, exactly that is my problem. I call on a node 'chef-client -l debug' and get no output from the 'execute' resource. But when I call 'chef-client' I get it. Is this normal?
[2012-11-05 10:56:49 -0500] drrk: The webinar in wednesday , is it actually 10am PDT or is it really 10amPST
[2012-11-05 10:57:07 -0500] drrk: I thought the clocks had changed i the US already
[2012-11-05 10:59:36 -0500] gchristensen: drrk: I nearly guarantee its 10am PDT, I think most Americans don't think about the tz switch.
[2012-11-05 11:01:16 -0500] drrk: the email and the registration for the webex don't match :(
[2012-11-05 11:04:27 -0500] mio-g: Does anyone used password attr in the user resource? I am getting "argument must be a string" error. The error comes from the ruby-shadow (shadow.c) but i cant understand why.
[2012-11-05 11:05:56 -0500] gchristensen: mio-g: http://wiki.opscode.com/display/chef/Resources#Resources-User check "Prerequisites"
[2012-11-05 11:09:33 -0500] mio-g: gchristensen: I got shadow installed. This is where the error comes from. I am not sure but fromt the trace it looks like the "argument must be a string" is for the username.
[2012-11-05 11:11:32 -0500] gchristensen: is the username valid, then?
[2012-11-05 11:12:18 -0500] mio-g: yes. when I remove the password attr - everything works fine.
[2012-11-05 11:13:39 -0500] mio-g: I am new to ruby so i don't really know how to make sure it is a T_STRING. But i cant see why it will not be.
[2012-11-05 11:24:01 -0500] mamu: Hi, we're on chef 10.12 and want to upgrade to 10.16.2. Saw a few links that recommend us to just update the gems. I had a couple of questions: 1. What about the Couchdb version, should we update that ? 2. What exactly needs to be backed up before we try this and in case it doesn't work ,we just downgrade the gems? (I saw one post around backing up solr data but is that it ? )
[2012-11-05 11:55:39 -0500] maxmanders: Can anybody offer any pointers on debugging knife bootstrap; I need to run the bootstrap twice because the first time, not all of the cookbooks are appearing locally... the knife logs aren't verbose enough, even at info level
[2012-11-05 11:57:05 -0500] gchristensen: does the first bootstrap appear to succeed?
[2012-11-05 11:57:39 -0500] masterkorp: maxmanders: can you try debug level?
[2012-11-05 11:59:19 -0500] maxmanders: gchristensen: The first bootstrap appears to create an empty cookbooks hierarchy in C:\chef\cache\cookbooks (winrm); so when recipes get run, e.g. providers are missing.  The second bootstrap seems to copy everything down.
[2012-11-05 11:59:33 -0500] maxmanders: masterkorp: debug level at the moment is info, which I think is the most verbose I can get... correct me if I'm wrong.
[2012-11-05 11:59:58 -0500] agosse: i'm working with a cookbook that defines a resource, and several cookbooks that define providers.  the resource cookbook contains a library that implements a function that is specific to one of the providers.  my question is: is it possible to override that function?  ie. would it get overridden by a different implementation of the same function if a recipe in the runlist picks a provider that exists in a cookbook that contains a library with
[2012-11-05 12:00:02 -0500] masterkorp: i dont know, never debugegd a knife bootstartp
[2012-11-05 12:00:21 -0500] maxmanders: masterkorp: I'll have a look at Shef - had that suggested by a few people out of band.
[2012-11-05 12:00:52 -0500] gchristensen: Shef pisses me off because its impossible to talk about in person
[2012-11-05 12:01:25 -0500] masterkorp: maxmanders: you can enable tracing, but its way to big
[2012-11-05 12:01:32 -0500] masterkorp: *too much
[2012-11-05 12:01:54 -0500] emanuelez: hello. i'm trying out the jenkins cookbook. it works fine, but when i change the http port in the node attributes, i don't see that change taking effect on the client. could it be a problem in the recipe or could i be doing something wrong?
[2012-11-05 12:01:56 -0500] gchristensen: "I did such and such with Shef." "You mean C H Chef? Or S H Shef?"
[2012-11-05 12:02:16 -0500] maxmanders: gchristensen: :-)
[2012-11-05 12:06:21 -0500] niall: Hi all, getting "not all parameters found" during a chef run, however I can't see any way to get detail on what exact parameter is missing, even with debug. Any way of quickly telling what's actually missing?
[2012-11-05 12:08:08 -0500] emanuelez: hmm... it looks like the recipe does not restart jenkins whenever a change in the configuration is found
[2012-11-05 12:14:18 -0500] matti: What is the differnce between "notifies :restart, resources(:service => 'zookeeper'), :delayed" and "notifies :restart, 'service[zookeeper]', :delayed". First one does not work, second does.
[2012-11-05 12:16:21 -0500] gchristensen: matti: the first one is deprecated behavior, I believe
[2012-11-05 12:16:32 -0500] matti: Right.
[2012-11-05 12:18:27 -0500] gyre008: can I use any ruby code in roles files ?
[2012-11-05 12:18:39 -0500] emanuelez: so... now i wonder how to restart a service when a specific attribute changes
[2012-11-05 12:18:59 -0500] gyre008: like any ruby codeI should be able to...
[2012-11-05 12:21:43 -0500] gyre008: emanuelez, check out how notifications are set up in that cookbooklooks like they're not kicking in...
[2012-11-05 12:21:55 -0500] gyre008: just for the record I never used that cookbook
[2012-11-05 12:23:00 -0500] emanuelez: gyre008: thanks
[2012-11-05 12:26:23 -0500] matti: gchristensen: Thanks!
[2012-11-05 12:27:01 -0500] gchristensen: matti: oh sure! I wasn't actually sure if I was helpful there :P
[2012-11-05 12:27:07 -0500] gyre008: basically I'm trying to get rid of this ugly stuff which is in the recipehttps://gist.github.com/4016947 and I thought Id do some magic in roles and environment files...
[2012-11-05 12:34:11 -0500] gchristensen: gyre008: my inclination is to avoid magic where possible
[2012-11-05 12:34:32 -0500] gyre008: why ?
[2012-11-05 12:34:36 -0500] meineerde: gyre008: you can use arbitrary ruby code in roles, but you should note that the ruby is evaluated to json before it is uploaded to the server. the actual nodes only ever see json
[2012-11-05 12:35:12 -0500] gchristensen: gyre008: because its magic, and I don't write unit tests for my role files.
[2012-11-05 12:35:16 -0500] gyre008: yeah I don't really mindI just need to populate he attributes with role specific stuff...
[2012-11-05 12:35:20 -0500] gchristensen: maybe I should...
[2012-11-05 12:35:29 -0500] gyre008: nothing else...
[2012-11-05 13:33:10 -0500] gyre008: how do I access node's attributes inside the role ? is it even possible ?
[2012-11-05 13:34:55 -0500] maruq: gyre008: I don't believe so. I think the role is transcoded to JSON, so you can't really do much there
[2012-11-05 13:35:04 -0500] gyre008: all I need is to read what environment the node is in...
[2012-11-05 13:35:18 -0500] gyre008: node.chef_environment is not accessiblearrgh :)
[2012-11-05 13:36:26 -0500] maruq: gyre008: yep, I was right. point 1 on this page: http://wiki.opscode.com/display/chef/Roles
[2012-11-05 13:37:21 -0500] gyre008:  through the creation of role files in your chef repository (that utilize a ruby DSL, which gets compiled to JSON,) ??
[2012-11-05 13:37:25 -0500] gyre008: thats what I'm trying to do :)
[2012-11-05 13:37:32 -0500] gyre008: use ruby DSL :)
[2012-11-05 13:37:52 -0500] maruq: gyre008: but they get uploaded to the server as JSON, so you can't do anything dynamic in them
[2012-11-05 13:38:31 -0500] maruq: gyre008: if you could, the dynamic stuff would only get run during "knife role from file <blah>" , and then that would get uploaded
[2012-11-05 13:38:51 -0500] gyre008: yeah it looks like itshame
[2012-11-05 13:38:59 -0500] maruq: gyre008: maybe a wrapper cookbook could solve things
[2012-11-05 13:41:49 -0500] masterkorp: Guys, is there a way to add forward port to vagrant with test-kitchen ?
[2012-11-05 13:42:47 -0500] gyre008: maruq, can you send me some link for some guidance where I could read up more on that ?
[2012-11-05 13:45:04 -0500] gchristensen: masterkorp: can you alter the vagrantfile?
[2012-11-05 13:46:11 -0500] maruq: gyre008: I don't have links as such, but it's basically create a new cookbook that just handles the config & then calls the original cookbook
[2012-11-05 13:46:31 -0500] yfeldblum: gyre008, roles are purely static data, not code
[2012-11-05 13:47:13 -0500] masterkorp: gchristensen: i can, by hand, but it makes testing counterproductive
[2012-11-05 13:47:17 -0500] gchristensen: ah
[2012-11-05 13:47:23 -0500] masterkorp: and the file is erases every destroy
[2012-11-05 13:47:38 -0500] yfeldblum: gyre008, all dynamism needs to come in the recipes, not in roles
[2012-11-05 13:47:59 -0500] maruq: gyre008: cookbook would just case the node environment & set attributes accordingly, then call the cookbook you were after.
[2012-11-05 13:52:41 -0500] gyre008: yeah but in our case it would be really awesome if I could do some dynamism in roles :)
[2012-11-05 14:24:30 -0500] tknerr: Ohai Chefs!
[2012-11-05 14:25:11 -0500] specialsauce: ohai!
[2012-11-05 14:25:17 -0500] BryanWB_: ohai tknerr!
[2012-11-05 14:25:32 -0500] tknerr: ohai BryanWB_ :-)
[2012-11-05 14:29:43 -0500] tknerr: I want to set up an nginx reverse proxy on several machines. I want it just for taking care of the SSL handshake and then forwarding to services running in apache on a different port
[2012-11-05 14:30:28 -0500] tknerr: I took a brief look at the nginx cookbook, but couldn't find an option to configure the SSL certs
[2012-11-05 14:30:41 -0500] tknerr: how would i go about it?
[2012-11-05 14:31:12 -0500] gchristensen: well really I think you'll have to put your own site configurations into place
[2012-11-05 14:31:14 -0500] tknerr: installing nginx via the nginx cookbook and then providing the confs in my own cookbook?
[2012-11-05 14:31:16 -0500] gchristensen: and point thos e at the SSL certs
[2012-11-05 14:31:38 -0500] gchristensen: also look at the Certificates cookbook, securely stores the SSL certs
[2012-11-05 14:31:44 -0500] tknerr: is there something for managing the SSL certs?
[2012-11-05 14:31:57 -0500] gchristensen: ^^ :)
[2012-11-05 14:32:02 -0500] tknerr: gchristensen :-)
[2012-11-05 14:33:14 -0500] tknerr: gchristensen: looks like exactly what I need - thanks :-)
[2012-11-05 14:33:23 -0500] gchristensen: yep!
[2012-11-05 14:36:26 -0500] BryanWB_: tknerr: cerfiticates cookbook is awesome
[2012-11-05 14:36:33 -0500] BryanWB_: took me 20 mins to use
[2012-11-05 14:48:27 -0500] rayrod2030: hai
[2012-11-05 14:48:44 -0500] rayrod2030: question about chef-client log level.
[2012-11-05 14:49:05 -0500] rayrod2030: I just started sending my chef-client log's to paper trail by appending to syslog and sending via rsyslog.
[2012-11-05 14:49:54 -0500] rayrod2030: I have changed the log level in /etc/chef/client.rb to :error and when I manually run the client it's working properly but when the client runs from cron it's still sending :info log level.
[2012-11-05 14:51:35 -0500] masterkorp: I really want test kitchen to support chef-server
[2012-11-05 14:53:08 -0500] blitzrage: I really want a Ferrari
[2012-11-05 14:54:10 -0500] jcowie: rayrod2030: if you mean the daemonized version, it doesn't run from cron - you'll need to do /etc/init.d/chef-client restart (or whatever your platform uses) for it to pick up the new setttings
[2012-11-05 14:54:41 -0500] masterkorp: blitzrage: well, i can always let you go for a ride :p
[2012-11-05 14:56:45 -0500] rayrod2030: jcowie: excellent thanks.
[2012-11-05 14:58:13 -0500] blitzrage: heh
[2012-11-05 15:09:54 -0500] masterkorp: http://i50.tinypic.com/2rnbyu0.jpg SOON..
[2012-11-05 15:25:15 -0500] Tensibai: Hi there
[2012-11-05 15:25:41 -0500] masterkorp: hello here
[2012-11-05 15:28:12 -0500] Tensibai: I've a small problem with my mail provider: lists.opscode.com a record is 64.151.72.164 but sender ip is 69.59.164.164 which reverse to lists.opscode.com, and so it ends up with a spam tagged mail. where should I send this informations ?
[2012-11-05 15:28:57 -0500] Tensibai: (I'm quite understand there will be no action on it ... but well, just trying :p )
[2012-11-05 15:34:20 -0500] BryanWB_: Tensibai: i would think btm or ssd
[2012-11-05 15:34:53 -0500] Tensibai: BryanWB_: ? sorry I'm not understanding btm or ssd ...
[2012-11-05 15:35:22 -0500] BryanWB_: Tensibai: those are people, bryan t mcclellan or steven danna
[2012-11-05 15:36:51 -0500] Tensibai: Awww, ok, thanks I'll send them a pm ;)
[2012-11-05 15:39:21 -0500] BryanWB_: jcowie: we gotta get u on foodfight office hours some time :)
[2012-11-05 15:39:27 -0500] BryanWB_: u have so much to teach the rest of us
[2012-11-05 15:40:11 -0500] jcowie: BryanWB_: happy to, if it'd be useful :)
[2012-11-05 15:41:08 -0500] BryanWB_: jcowie: i am certain it would be ;)
[2012-11-05 15:41:59 -0500] jcowie: w00t
[2012-11-05 15:45:52 -0500] Leitz: Noob question. I'm editing my knife.rb file to point to my hosted chef account. While trying to run knife it says I can't write to /var/chef/cookbooks. I'm a user and trying to create the cookbooks in my home directory. What is telling chef to write to /var/chef/cookbooks?
[2012-11-05 15:49:55 -0500] yfeldblum: Leitz, that's the default, if you don't change it using `cookbook_path [path1, path2, path3]` then knife will use the default
[2012-11-05 15:51:15 -0500] Leitz: yfeldblum, thanks! Added that to my knife.rb and it works.
[2012-11-05 15:58:35 -0500] cschneid: given: I want to setup an infrastructure on AWS (including EC2, S3, Load Balances, whatever).  Would I script most that, then use chef for the ec2 pieces, or can chef do the other components too?
[2012-11-05 15:58:48 -0500] cschneid: (ie, what's the boundaries of chef's world)
[2012-11-05 16:01:18 -0500] BryanWB_: cschneid: u can do all of that w/ chef
[2012-11-05 16:01:35 -0500] cschneid: BryanWB_: manage the other components of AWS that aren't servers?
[2012-11-05 16:01:59 -0500] BryanWB_: cschneid: erm, i haven't used AWS much :/
[2012-11-05 16:02:08 -0500] BryanWB_: so i don't know about their load balancers
[2012-11-05 16:02:29 -0500] cschneid: BryanWB_: what I was thinking was that I'd have a script which does aws related work.  Then dump myself out to knife to handle the server side of things.
[2012-11-05 16:02:36 -0500] cschneid: ie, chef as a part of a larger setup script for my env
[2012-11-05 16:02:46 -0500] cschneid: but... hell if I know if that's the best way :)
[2012-11-05 16:02:56 -0500] masterkorp: nah, chef is not the best thing for that
[2012-11-05 16:03:09 -0500] BryanWB_: erm, best to ask others here about the other aws parts, m pretty ignorant about s3 and elastic lbs
[2012-11-05 16:03:12 -0500] masterkorp: use the cli tools for the services that arent servers
[2012-11-05 16:04:09 -0500] cschneid: masterkorp: ok, so a rake script with commands to maintain an environment. And the server related ones would pass through to knife. I sorta like that structure I Think...
[2012-11-05 16:04:53 -0500] cschneid: lets me name things nicer too.   rake server:create:web => `knife [options]`
[2012-11-05 16:05:06 -0500] masterkorp: that could make some sense
[2012-11-05 16:17:09 -0500] yfeldblum: cschneid, in chef repositories, we typically write knife plugins rather than rake tasks
[2012-11-05 16:17:50 -0500] yfeldblum: cschneid, since knife plugins are loaded with knife's configuration pre-loaded and available
[2012-11-05 16:18:02 -0500] cschneid: yfeldblum: cool - docs on how that works?
[2012-11-05 16:18:20 -0500] cschneid: ie, writing a custom plugin for my own environment
[2012-11-05 16:18:32 -0500] yfeldblum: cschneid, http://wiki.opscode.com/display/chef/Knife+Plugins
[2012-11-05 16:18:33 -0500] cschneid: basically I don't want to type the 10 option form of knife ec2 server crate.......
[2012-11-05 16:20:11 -0500] yfeldblum: cschneid, you can look at https://github.com/opscode/chef/tree/master/lib/chef/knife for examples of knife plugins, since all the knife subcommands that ship with chef are knife plugins
[2012-11-05 16:20:40 -0500] yfeldblum: cschneid, you can also set config defaults in your knife.rb
[2012-11-05 16:21:07 -0500] yfeldblum: cschneid, documented here: https://github.com/opscode/knife-ec2#configuration
[2012-11-05 16:43:33 -0500] _0x783czar: Has anyone here every used 'Knife-Solo'?
[2012-11-05 16:44:12 -0500] masterkorp: never heard of it
[2012-11-05 16:45:17 -0500] erikh: _0x783czar: matschaffer who's in here pretty regularly is the maintainer
[2012-11-05 16:46:38 -0500] _0x783czar: erikh: cool, do you know much about it?  I just have a few questions about how it works.  I'm considering giving it a try.
[2012-11-05 16:46:52 -0500] erikh: no, I do not
[2012-11-05 16:46:56 -0500] erikh: but that's the guy you want to talk to
[2012-11-05 16:47:03 -0500] _0x783czar: erikh: alright, thanks
[2012-11-05 16:54:30 -0500] philsturgeon: I have a chef + vagrant + ubuntu setup. Staging & Production runs nginx as www-data, but for some reason vagrant is running as root, which breaks when it tries to chmod (and chown) locally as the folders are shared via NFS
[2012-11-05 16:55:18 -0500] cschneid:  Is there a solid book on chef I should look into? Ideally talking a bit more high level about what a good environment design looks like, and how to then implement that with chef?
[2012-11-05 16:55:39 -0500] cschneid: I'm fairly new to devops directly - so I'm not too familiar with best practices - but I've been developing for a long time, so code doesn't scare me :) (nor reading docs)
[2012-11-05 16:58:28 -0500] Leitz: cshneid, no books.
[2012-11-05 16:58:35 -0500] Leitz: I've asked the same question.
[2012-11-05 16:59:01 -0500] Leitz: The OpsCode site, wonky as it is, is the best they have.
[2012-11-05 17:00:04 -0500] thehar: http://docs.opscode.com/ is being updated heavily and is very in-depth
[2012-11-05 17:00:11 -0500] Litex: There are some presentations worth browsing through at: http://wiki.opscode.com/display/chef/Chef+Presentations
[2012-11-05 17:00:18 -0500] thehar: i suggest reading it through and keeping an eye on it as they are newly updating tons of things on it
[2012-11-05 17:01:39 -0500] kyleb: Is there a good resource on using application and application_ruby, right now it's 2 days of wasted time and failure of documentation.
[2012-11-05 17:04:50 -0500] specialsauce: cschneid: we've had to kind of feel and refactor as we go, my feeling is there is no really good guide out there on best practices, gotchas, patterns and anti-patterns etc. Maybe this stuff is just too dependent on environment, i don't know.
[2012-11-05 17:16:18 -0500] danclien: Anyone know why I would be getting Chef::Exceptions::InsufficientPermissions when creating directories in Windows?  chef-client is being ran as an administrator, and it used to work in one of the older 0.10.x releases.
[2012-11-05 17:19:11 -0500] moserke: on the shell_out Mixin, how does one access the return code?  cmd = shel_out()  I have tried cmd.stderr[:number].  Is there an object definition somewhere?  or does the RC get set to cmd?
[2012-11-05 17:28:47 -0500] kryptek: moserke,  exitstatus
[2012-11-05 17:29:31 -0500] kryptek: x = shell_out('ls') then x.status.exitstatus
[2012-11-05 17:35:29 -0500] moserke: kryptek, sweet thanks, that's what i was looking for!
[2012-11-05 17:36:34 -0500] kryptek: ;) Np.
[2012-11-05 17:36:39 -0500] heathsnow: danclien: I create mine like so - require 'fileutils' FileUtils.mkdir_p('some_path')
[2012-11-05 17:38:21 -0500] spox: has anyone been running into problems with vagrant not detecting test-kitchen boxes completing bootups on ubuntu 12.04 or 12.10?
[2012-11-05 17:42:44 -0500] gkarekinian: spox: I think I had a similar issue when trying to run the logrotate cookbook's test, but I haven't investigated so far
[2012-11-05 17:46:00 -0500] AntonZ: hello, are here any opscode private/hosted chef customers ?
[2012-11-05 17:46:09 -0500] dougireton: yes
[2012-11-05 17:46:21 -0500] dougireton: we use Private Chef
[2012-11-05 17:46:45 -0500] AntonZ: how is there support described under support and maintenance ?
[2012-11-05 17:46:59 -0500] AntonZ: have you tried their phone support ?
[2012-11-05 17:47:29 -0500] dougireton: do you mean does Opscode provide good support?
[2012-11-05 17:47:42 -0500] AntonZ: you can phrase this way :)
[2012-11-05 17:47:46 -0500] dougireton: Support is excellent
[2012-11-05 17:48:03 -0500] dougireton: quick and knowledgable
[2012-11-05 17:48:11 -0500] dougireton: we've been very pleased
[2012-11-05 17:48:44 -0500] jtimberman: :-D
[2012-11-05 17:48:49 -0500] AntonZ: thats great, good to hear. what is the procedure for patching of the chef server? do they do it, or they provide a set of nstructions to pathc it yourself ?
[2012-11-05 17:49:20 -0500] dougireton: Opscode provides fixes with instructions
[2012-11-05 17:49:45 -0500] AntonZ: oh one more questions on support
[2012-11-05 17:49:49 -0500] dougireton: sure
[2012-11-05 17:51:21 -0500] AntonZ: is their support based on break/fix basis or is it suggestive and they actually can help with let's say a cookbook ive been working on and got stuck ?
[2012-11-05 17:52:39 -0500] dougireton: They have provided excellent support for help with writing cookbooks
[2012-11-05 17:53:13 -0500] dougireton: I'm sure there's a line somewhere where they aren't going to write your cookbook for you, but they are there to help
[2012-11-05 17:53:14 -0500] AntonZ: thank you kind Sir for answering my questions
[2012-11-05 17:53:33 -0500] dougireton: np, we are very happy with Opscode
[2012-11-05 17:53:37 -0500] AntonZ: product is one thing, but what makes a company a good cmpany is how they support their customers
[2012-11-05 17:53:54 -0500] damian__: has anyone tried making the knife-ec2 plugin work to start/bootstrap windows instances?  I am really close to getting it working, but keep getting timeouts/connection refused when I try to connect at times
[2012-11-05 18:04:39 -0500] damian__: here is the plugin that I have put together so far
[2012-11-05 18:04:39 -0500] damian__: https://github.com/damiancurry/knife-ec2
[2012-11-05 18:05:16 -0500] damian__: it works most of the time, but sometimes it doesnt seem to wait long enough and times out when trying to run the bootstrap over ssh
[2012-11-05 18:11:05 -0500] beandip: ls
[2012-11-05 18:11:10 -0500] beandip: erp
[2012-11-05 18:47:39 -0500] otterley: yo jtimberman, I've found an issue with the chef-client cookbook - it changes the ownership of /var/log/chef to root:root even on Chef servers, which causes Solr to break
[2012-11-05 18:49:18 -0500] miah: otterley: thats old. pretty sure a fix was just pushed
[2012-11-05 18:50:07 -0500] miah: http://tickets.opscode.com/browse/COOK-599
[2012-11-05 18:50:55 -0500] otterley: that's interesting.  I'm running the 1.2.0 cookbook
[2012-11-05 18:50:59 -0500] otterley: and it's not fixed for me.
[2012-11-05 18:51:34 -0500] otterley: https://github.com/miah/cookbooks/commit/d065cf2182dd09253e4abfbb369fbfd3b29eae3d = 404
[2012-11-05 18:52:31 -0500] miah: otterley: ya. its old =)
[2012-11-05 18:52:42 -0500] miah: file a bug and reference that ticket then
[2012-11-05 18:53:24 -0500] miah: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/config.rb#L37
[2012-11-05 18:53:41 -0500] miah: so, it assumes your using the chef-server cookbook.. if you're not, thats your problem.
[2012-11-05 18:53:54 -0500] otterley: *headdesk*
[2012-11-05 18:54:51 -0500] miah: consider that there are multiple ways people could be installing chef server. not all of them are going to use the chef-server cookbook, and writing a very general cookbook to work with _every possibility_ would be very difficult.
[2012-11-05 18:55:02 -0500] otterley: in general it's not good practice to condition this sort of thing based on a run list
[2012-11-05 18:55:15 -0500] miah: then file a bug and state your case
[2012-11-05 18:55:19 -0500] miah: no reason to rage in here though
[2012-11-05 18:55:35 -0500] otterley: I don't mean to rage, sorry
[2012-11-05 18:55:47 -0500] otterley: the real issue is that the ownership of this directory varies, when it shouldn't
[2012-11-05 18:56:28 -0500] otterley: why not just make it chef:chef and be done with it?
[2012-11-05 18:57:10 -0500] otterley: err, because the chef user isn't created on clients.  answered my own question. :)
[2012-11-05 18:57:27 -0500] miah: i do agree that if we're going to set it to 'root' we should just do that. i think the thought is 'if a node is only running chef-client then we don't want people peaking at the logs'. but why that same logic doesn't apply to the chef-server is unknown. my guess is its because many of the daemons chef-server relies on drop privileges after startup and are going to have a hard time writing into a root owned directory without allowing anybody to write into t
[2012-11-05 18:58:01 -0500] miah: group based security would certainly fix that up. allow writes on group, set group to chef, ensure all daemons and clients that run also belong to the chef group
[2012-11-05 18:58:38 -0500] miah: the directory could be 770 root:chef, and all would be superduper
[2012-11-05 18:58:39 -0500] otterley: yeah, the chef user (or group, at least) would also have to be created on clients, which I don't think is the case now.  plus it assumes package-based installs etc
[2012-11-05 18:59:11 -0500] miah: right. the current cookbooks there are a really good starting point that are trying to cover the common usage
[2012-11-05 19:00:50 -0500] otterley: I think some folks (like me) had our expectations set higher since they're opscode-maintained
[2012-11-05 19:01:29 -0500] otterley: I'll submit a patch that parameterizes these
[2012-11-05 19:03:02 -0500] miah: consider that 'opscode-maintained' means 'jtimberman maintained' and that he's pretty busy =)
[2012-11-05 19:03:15 -0500] otterley: understood =)
[2012-11-05 19:03:28 -0500] miah: honestly though, the opscode maintained stuff is generally higher quality than 90% of the other books out there
[2012-11-05 19:03:34 -0500] otterley: agreed++
[2012-11-05 19:03:46 -0500] miah: but thats mostly because people think a valid cookbook is one that only does 'package <foo>'
[2012-11-05 19:04:13 -0500] miah: should just release a 'installs packages based on databag or attributes' cookbook and end that stupidity
[2012-11-05 19:04:27 -0500] otterley: in general we rarely use community cookbooks as they're rather opinionated, and many servers have Turing-complete configuration languages so the functionality of the community cookbooks seems to be rather limited as a result (e.g. BIND)
[2012-11-05 19:04:53 -0500] spox: miah: http://community.opscode.com/cookbooks/package_installer
[2012-11-05 19:04:56 -0500] miah: =)
[2012-11-05 19:05:06 -0500] miah: spox: ya. im sure it exists its not a difficult cookbook
[2012-11-05 19:05:19 -0500] miah: just tired of hearing about those cookbooks as 'news'
[2012-11-05 19:05:20 -0500] spox: no, but it elimiates a lot of cookbooks
[2012-11-05 19:05:27 -0500] miah: yup
[2012-11-05 19:05:46 -0500] otterley: I did like the chef-client cookbook though as it takes care of most of the post-installation cleanup
[2012-11-05 19:06:11 -0500] miah: otterley: well, you're very able to fork and base your work on it
[2012-11-05 19:06:16 -0500] otterley: yup
[2012-11-05 19:06:24 -0500] miah: and as allways, PR's welcomed
[2012-11-05 19:06:37 -0500] otterley: on it.
[2012-11-05 19:06:39 -0500] btm: if anyone wants to join chef code review we should have a few spaces in the hangout: https://plus.google.com/hangouts/_/d570b973f51dc64a29353ed8e498e432747491fd?authuser=1&hl=en
[2012-11-05 19:06:40 -0500] otterley: thanks miah
[2012-11-05 19:06:50 -0500] jtimberman: miah: ha :)
[2012-11-05 19:07:00 -0500] miah: jtimberman: =)
[2012-11-05 19:07:07 -0500] danclien: Thanks, heathsnow.  I'll give that a shot.
[2012-11-05 19:08:27 -0500] miah: i would join that hangout but i'm jamming and got some code flowing
[2012-11-05 19:09:16 -0500] erikh: miah: I need you to review code :P
[2012-11-05 19:09:20 -0500] otterley: oh, the ssh_known_hosts cookbook is also quite nice.  props to those guys.
[2012-11-05 19:09:37 -0500] otterley: apt is good too but has a case-matching bug, need to send a PR to fix that
[2012-11-05 19:11:22 -0500] miah: erikh: i'll look at yours if you look at mine ;)
[2012-11-05 20:04:18 -0500] yfeldblum: otterley, indeed, chef-client, chef-solo, and knife all have Turing-complete configuration languages
[2012-11-05 20:04:39 -0500] otterley: miah, jtimberman: https://github.com/opscode-cookbooks/chef-client/pull/31
[2012-11-05 20:04:42 -0500] otterley: off to lunch
[2012-11-05 20:06:45 -0500] timsmith: cookbook code review going to happen today?
[2012-11-05 20:07:39 -0500] miah: otterley: i suggest you pushing that to a ticket at tickets.opscode.com. i'm not sure if pull requests directly via github are reviewed without them.
[2012-11-05 20:07:49 -0500] miah: http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-11-05 20:08:29 -0500] nlloyds2: I've got a backup cookbook (uses https://github.com/meskyanichi/backup ) up at https://github.com/cramerdev/backup-cookbook . Any feedback, suggestions, or contributions would be awesome
[2012-11-05 20:10:02 -0500] nlloyds2: I'd like to ditch the heredoc in the definition part to take a block, and the schedule to also take a block to partially pass to cron, but not sure how those would work.
[2012-11-05 20:11:40 -0500] erikh: btm: kallistec: lookie @ http://tickets.opscode.com/browse/CHEF-3586
[2012-11-05 20:11:42 -0500] erikh: plz.
[2012-11-05 20:11:44 -0500] erikh: <3
[2012-11-05 20:15:55 -0500] clofresh: hey guys, my chef client runs are starting to take forever, is there was good way to profile them to see what's slow?
[2012-11-05 20:17:06 -0500] spox: clofresh: maybe give this a look: https://github.com/jamesc/chef-handler-elapsed-time
[2012-11-05 20:17:13 -0500] kcb_: clofresh: the timestamps in the logs should show it if it is during the run. if it's chef startup time, there was a bug with certain rubygems versions that would cause a delay before the run ever started
[2012-11-05 20:18:01 -0500] kcb_: is there a handy way to get a list of the files in the cookbook's files directory from within a recipe?
[2012-11-05 20:18:12 -0500] clofresh: cool, thanks
[2012-11-05 20:19:32 -0500] nlloyds2: kcb_:  not sure, but the remote_directory resource (http://wiki.opscode.com/display/chef/Resources#Resources-RemoteDirectory) will transfer an entire directory if that's what you're looking to do.
[2012-11-05 20:21:25 -0500] kcb_: nlloyds2: yeah. but i want to look at the files in the directory, select a subset and then generate cookbook_files only for those. it's ugly, but modeling an existing process i can't replace yet
[2012-11-05 20:21:42 -0500] nlloyds2: kcb_: The provider for that uses these methods: https://github.com/opscode/chef/blob/master/lib/chef/provider/remote_directory.rb#L96-100
[2012-11-05 20:22:19 -0500] nlloyds2: So you might be able to dig through there to do what you're trying to do.
[2012-11-05 20:23:03 -0500] kcb_: aha, yes that should work
[2012-11-05 20:23:26 -0500] kcb_: should be able to do the same in an LWRP and generate cookbook_file resources
[2012-11-05 20:24:40 -0500] kcb_: thx!
[2012-11-05 20:26:13 -0500] _0x783czar: So I have a cookbook that is refusing to work on a node and giving me the FATAL: Encoding::InvalidByteSequenceError: "\xC3" on US-ASCII
[2012-11-05 20:26:34 -0500] _0x783czar: any idea what could be causing this?
[2012-11-05 20:26:47 -0500] damian__: anyone know how i can call the chef_node_name in cookbook template? using <%= @config[:chef_node_name ] %> throws errors
[2012-11-05 20:27:09 -0500] _0x783czar: Here's the the stacktrace and chef-output: http://pastebin.com/ShABrBKh  http://pastebin.com/dsMdaHjz
[2012-11-05 20:27:26 -0500] ohlol: damian__ try @node[:fqdn]
[2012-11-05 20:28:07 -0500] ohlol: _0x783czar did you try googling that message?
[2012-11-05 20:28:10 -0500] nlloyds2: _0x783czar: Do you have "# encoding: UTF-8" at the top of the file? You might need that if it contains unicode characters.
[2012-11-05 20:28:17 -0500] damian__: i tried that one, it gives me the ec2 instance hostname which doesnt match the -N flag i use to bring up the instance with knifeec2 server create
[2012-11-05 20:28:41 -0500] nlloyds2: damian__? node.name ?
[2012-11-05 20:29:08 -0500] ohlol: damian__ oh uou're in ec2 \_()_/
[2012-11-05 20:29:11 -0500] ohlol: you're*
[2012-11-05 20:29:24 -0500] damian__: yea, ec2 with windows servers
[2012-11-05 20:29:49 -0500] ohlol: lol
[2012-11-05 20:30:21 -0500] _0x783czar: nlloyds2: yes I do
[2012-11-05 20:31:24 -0500] _0x783czar: ohlol: yes I did, but unless I missed something most are saying it's an issue fixed by putting the encoding tag at the top, which it already has.
[2012-11-05 20:32:00 -0500] nlloyds2: _0x783czar: I once had a bug in sass where if it was importing another file that had unicode, but had no unicode, and I fixed it by putting a unicode character in the file: https://gist.github.com/2653062
[2012-11-05 20:32:21 -0500] damian__: or if you guys can point me to how to use the --json-attribute flag properly that would be awesome too.  I was trying to use --json-attributes '{"node":{ "short_name" : "west03" }}, but then calling <%= node[:short_name ] %> didnt give me anything
[2012-11-05 20:32:52 -0500] nlloyds2: _0x783czar: and that was the same exact error message I was getting, so idk, it could be something weird like that.
[2012-11-05 20:33:50 -0500] _0x783czar: nlloyds2: aah, I think there's a unicode character in my databag.  That might be messing it up.
[2012-11-05 20:34:30 -0500] nlloyds2: damian__: I think those get applied directly to the node, so in your example it would be <%= node['node']['short_name'] %>; you don't need the "node" key, just the attributes.
[2012-11-05 20:34:37 -0500] _0x783czar: nlloyds2: do you suppose that might be similar to what you were experincing and fixed with your snowman?
[2012-11-05 20:34:57 -0500] damian__: nlloyds2: awesome, ill give that shot
[2012-11-05 20:35:38 -0500] nlloyds2: _0x783czar: Could be similar, since this was in a sass compile, where it's pulling files together, and you're pulling data out of a data bag.
[2012-11-05 20:35:53 -0500] nlloyds2: if that is the case, it's probably a bug in chef.
[2012-11-05 20:37:12 -0500] _0x783czar: nlloyds2: alright, I'm gonna try adding a unicode character in the comments
[2012-11-05 20:37:34 -0500] nlloyds2: _0x783czar:  Good luck :D
[2012-11-05 20:37:52 -0500] _0x783czar: nlloyds2: *sigh* nope
[2012-11-05 20:38:24 -0500] _0x783czar: nlloyds2: I'll just try removing the unicode char from the databag and see if that fixes it to make sure I'm chasing the right problem.
[2012-11-05 20:39:06 -0500] nlloyds2: _0x783czar: Have you put the JSON into a linter like http://jsonlint.com/ ?
[2012-11-05 20:39:37 -0500] _0x783czar: nlloyds2: no, actually I haven't, but yes removing that unicode char fixed it.
[2012-11-05 20:40:23 -0500] nlloyds2: _0x783czar: Yeah so if it happens to be invalid JSON (1) it would make sense that it fails when you get it out the db (2) chef shouldn't have allowed you to put it in there in the first place
[2012-11-05 20:42:34 -0500] _0x783czar: nlloyds2: yeah, jsonlint was happy with the unicode char but apparently chef wasn't
[2012-11-05 20:51:20 -0500] damian__: nlloyds2: i tried using <%= node['node']['short_name'] %> and <%= ['node']['short_name'] %> with the --json-attributes '{"node":{ "short_name" : "west01" }}', but both returned the error  FATAL: Chef::Mixin::Template::TemplateError: can't convert String into Integer
[2012-11-05 20:51:41 -0500] damian__: any ideas what im screwing up with that json attribute?
[2012-11-05 20:52:00 -0500] Twirrim: does node['short_name'] not work?
[2012-11-05 20:52:07 -0500] Twirrim: I'm not sure why you're referring to node twice.
[2012-11-05 20:52:43 -0500] damian__: i was using <%= node[:short_name ] %> before, but that just ends up leaving the area blank in the template
[2012-11-05 20:53:28 -0500] damian__: i tried <%= ['node']['short_name'] %> as a suggestion in here
[2012-11-05 20:53:39 -0500] erikh: someone gave you bad advice.
[2012-11-05 20:53:56 -0500] damian__: hehe
[2012-11-05 20:54:25 -0500] damian__: so <%= node[:short_name ] %> should work with the --json-attributes '{"node":{ "short_name" : "west02" }}' ?
[2012-11-05 20:56:05 -0500] nlloyds2: Um, I think I was misunderstood, or misunderstanding maybe. Was looking at http://wiki.opscode.com/display/chef/Attributes#Attributes-JSONAttributes
[2012-11-05 20:56:58 -0500] damian__: so as far as I can tell, the json attribute is being pass into the node from the knife ec2 server create script i am running, but I can't figure out how to call it in a cookbook template
[2012-11-05 20:57:14 -0500] nlloyds2: Understanding that if --json-attributes '{"short_name": "west-1" }' would let you do node['short_name']. Is this correct?
[2012-11-05 20:57:58 -0500] damian__: oooo, i dont think I have tried it without the node, let me give that a shot
[2012-11-05 21:00:28 -0500] otterley: miah, I already created a ticket
[2012-11-05 21:03:53 -0500] miah: otterley: awesome, what is the ticket link?
[2012-11-05 21:04:50 -0500] otterley: COOKhttp://tickets.opscode.com/browse/COOK-1855
[2012-11-05 21:04:55 -0500] otterley: http://tickets.opscode.com/browse/COOK-1855
[2012-11-05 21:06:07 -0500] miah: thanks
[2012-11-05 21:06:40 -0500] otterley: there was also a syntax error at HEAD, fixed in c1a8969
[2012-11-05 21:08:01 -0500] miah: ya
[2012-11-05 21:11:06 -0500] miah: hope that helps
[2012-11-05 21:11:16 -0500] Urocyon: When using the tomcat cookbook on a redhat system it always fails when it has to start tomcat ( like the first time it runs.   It fails when it writes the configuration file and restarts, but tomcat is still initializing and so the restart fails.
[2012-11-05 21:11:52 -0500] Urocyon: My initial thought was to not start it when defining the service, and let the restart take care of starting it but I'm told that may result in some edge cases where the service is never started.
[2012-11-05 21:11:52 -0500] otterley: miah, not sure it's worth creating a ticket for a syntax error :)
[2012-11-05 21:12:30 -0500] Urocyon: Any other ideas on how to make sure the configuration template's restart doesn't conflict with the initialization of the service?
[2012-11-05 21:12:41 -0500] miah: otterley: ya. i suspect it will be fine. i just worry about people rejecting PR's because you've included fixes for _other_ issues in them.
[2012-11-05 21:12:53 -0500] damian__: after more testing, using the flag '--json-attributes '{ "short_name" : "west011" }'' and then calling <%= node[:short_name ] %> leaves the field blank in the template
[2012-11-05 21:13:59 -0500] damian__: any ideas what I could be doing wrong, or a better way to pass attributes to the 'knife ec2 server create' ?
[2012-11-05 21:15:59 -0500] Urocyon: The tomcat problem is cook-1599.  http://tickets.opscode.com/browse/COOK-1599
[2012-11-05 21:19:23 -0500] jtimberman: otterley: we need a ticket for all contributions, even spelling/typo/syntax fixes, else we might never get to it. the rate of new resolved COOK tickets to our ability to keep up is staggering.
[2012-11-05 21:19:42 -0500] jtimberman: we're tripling our COOK code review meetings to compensate.
[2012-11-05 21:19:50 -0500] jtimberman: (3x / week vs 1x / week)
[2012-11-05 21:19:54 -0500] otterley: wow
[2012-11-05 21:20:21 -0500] jtimberman: since last wednesday, we had like, 19 COOK tickets resolved (either new or existing)
[2012-11-05 21:20:36 -0500] jtimberman: we're getting through ~6-10 in each review meeting. so, maths.
[2012-11-05 21:20:39 -0500] otterley: bear in mind that any additional burdens you put on others to contribute could dissuade them from doing so
[2012-11-05 21:20:46 -0500] jtimberman: I understand.
[2012-11-05 21:21:02 -0500] otterley: but I realize you have to keep track of things and this helps
[2012-11-05 21:21:12 -0500] jtimberman: :)
[2012-11-05 21:21:26 -0500] jtimberman: each cookbook is its own software project, and we have 135 of them.
[2012-11-05 21:21:30 -0500] otterley: I have too many undocumented issues at my job too ;)
[2012-11-05 21:23:59 -0500] alop: jtimberman: I see there are three spots open on the cookbook hangout, would more participation help out?
[2012-11-05 21:24:38 -0500] nlloyds2: What's the recommended practice if there's a cookbook on cookbooks.opscode.com and there's another one with the same name that hasn't been updated in a while?
[2012-11-05 21:24:47 -0500] nlloyds2: and I want to use that name?
[2012-11-05 21:25:16 -0500] jtimberman: alop: maybe, though the hangout for today ended a bit ago
[2012-11-05 21:25:24 -0500] miah: nlloyds2: a very common discussion.. ping jtimberman and mattray =)
[2012-11-05 21:25:27 -0500] jtimberman: nlloyds2: we had a discussion at the summit about that.
[2012-11-05 21:25:48 -0500] shope: Does anyone have an opinion on whether gathering information on running processes (names, CPU usage, memory usage) is reasonable to do as an Ohai task?
[2012-11-05 21:26:05 -0500] miah: shope: it may make ohai slow
[2012-11-05 21:26:18 -0500] jtimberman: notes were posted here: http://wiki.opscode.com/display/chef/Cookbook+Curation+and+Contribution
[2012-11-05 21:27:21 -0500] nlloyds2: jtimberman: Thanks. I'd be happy to send a pull request but I can't find the cookbook on github
[2012-11-05 21:27:25 -0500] otterley: shope: dynamic state shouldn't go into Ohai; it's fed back to the server so it may be inaccurate when querying
[2012-11-05 21:28:09 -0500] nlloyds2: It's http://community.opscode.com/cookbooks/backup , and mine is https://github.com/cramerdev/backup-cookbook
[2012-11-05 21:28:14 -0500] otterley: shope: what problem are you trying to solve?
[2012-11-05 21:28:18 -0500] nlloyds2: (not helpful that it's sjuch a generic name)
[2012-11-05 21:29:40 -0500] otterley: nlloyds2: old problem, been around since the CPAN and CTAN days :/
[2012-11-05 21:30:22 -0500] otterley: the historical consensus seems to be "choose a different name; may the best implementation win"
[2012-11-05 21:31:07 -0500] miah: otterley: ya, thats fine to an extent. obviously, it would be best to have a single awesome implementation than several poor implementations.
[2012-11-05 21:31:45 -0500] miah: the problem with this one specifically is its a old fujin cookbook that has no git repo so its hard do any work fixing it. you can't even fork it really.
[2012-11-05 21:31:58 -0500] otterley: a backup cookbook seems too site-specific to be useful as a generic cookbook, IME
[2012-11-05 21:32:03 -0500] miah: that sadly is too common on the community site.
[2012-11-05 21:32:09 -0500] miah: it depends on what that cookbook is doing
[2012-11-05 21:32:45 -0500] miah: in this case, its a LWRP wrapper for a ruby gem.. so its not super site specific.
[2012-11-05 21:32:59 -0500] otterley: but then, how useful is it?
[2012-11-05 21:33:02 -0500] spox: forkable version here perhaps: https://github.com/hw-cookbooks/backup
[2012-11-05 21:36:07 -0500] nlloyds2: spox: That's the one, thanks.
[2012-11-05 21:37:19 -0500] nlloyds2: otterley: I'm trying to publish it in the hopes it would be useful as a generic cookbook :D
[2012-11-05 21:37:58 -0500] nlloyds2: HW's version does use the same gem
[2012-11-05 21:38:08 -0500] otterley: interesting
[2012-11-05 21:38:11 -0500] otterley: could be cool
[2012-11-05 21:38:33 -0500] miah: ya, fujin == heavywater so that is probably it =)
[2012-11-05 21:38:48 -0500] nlloyds2: I'll just open an issue on that repo to see what he thinks.
[2012-11-05 21:39:11 -0500] otterley: too bad the gem doesn't support LVM or xtrabackup on mysql :(
[2012-11-05 21:39:12 -0500] miah: hot
[2012-11-05 21:40:43 -0500] nlloyds2: otterley: There's an open issue where percona was mentioned: https://github.com/meskyanichi/backup/issues/173
[2012-11-05 21:41:24 -0500] erikh: but but on sun hardware the number of CPUs in a box is dynamic
[2012-11-05 21:41:31 -0500] erikh: :trollface:
[2012-11-05 21:44:25 -0500] nlloyds2: (opened https://github.com/hw-cookbooks/backup/issues/4 if anybody from that org is here and interested)
[2012-11-05 21:54:55 -0500] shope: thanks for the opinions.  We're trying to mainly monitor a process that grows slowly over time (intentionally)... want to be able at a glance tell how much it is consuming on each server
[2012-11-05 21:55:08 -0500] sunil__: can I attach a new role to an existing server running with a default role?
[2012-11-05 21:59:48 -0500] nlloyds2: sunil__:  Yes you just need to update the run list or roles on the run list
[2012-11-05 21:59:49 -0500] Babar: shope: I'd use some monitoring system for that. Not hack this into chef
[2012-11-05 22:00:12 -0500] otterley: +1
[2012-11-05 22:00:30 -0500] otterley: Graphite, OpenTSDB, Librato, Datadog (my fave), ....
[2012-11-05 22:02:15 -0500] shope: thanks!
[2012-11-05 22:02:31 -0500] sunil__: @ nlloyds2 I launched a node as a base role, so probably can't update the run list of the base role..
[2012-11-05 22:03:00 -0500] nlloyds2: sunil__: You can do `knife node edit node_name` to edit the run list
[2012-11-05 22:03:18 -0500] sunil__: ohhThanks that makes sense..
[2012-11-05 22:03:51 -0500] nlloyds2: You can also add/remove run list entries with knife: knife node run list --help
[2012-11-05 22:04:14 -0500] nlloyds2: er, run_list
[2012-11-05 22:13:16 -0500] Babar: otterley: I was more thinking of monitoring tools. Like... munin, or even real ones like icinga. But yours should do too :)
[2012-11-05 22:14:16 -0500] renchap: munin called real monitoring tool compared to graphite & opentsdb? :D
[2012-11-05 22:14:23 -0500] ohlol: lmfao if you use icinga
[2012-11-05 22:16:54 -0500] gchristensen: cacti too
[2012-11-05 22:17:37 -0500] Babar: renchap: let me troll in peace, will you? :p
[2012-11-05 22:18:45 -0500] gchristensen: shope: setting up proper alerting and monitoring is one of the best improvements you can make to a cluster
[2012-11-05 22:19:21 -0500] gchristensen: and to your peace of mind
[2012-11-05 22:20:24 -0500] bear: my word is this cookbook recipe driving me crazy the Chef::Log.info lines that bracket the bash do piece are in the output, I get no errors for the bash do block, but it sure does not seem like it is running anything - what can I do to debug what is happening *inside* of a bash do end block?
[2012-11-05 22:24:15 -0500] bear: hmm, wait - doesn't a command line run of chef-client always show the output of any bash script execution?
[2012-11-05 22:24:42 -0500] damian__: usually wont show you the output, just that its being executed
[2012-11-05 22:25:16 -0500] bear: k, then i'm back to my original question - it appears that my bash block is not being run but i'm not sure why
[2012-11-05 22:25:46 -0500] damian__: maybe have the bash block write the output to a file
[2012-11-05 22:26:00 -0500] damian__: either way, you should see the bash command being executed in the chef output
[2012-11-05 22:26:10 -0500] bear: I added that just now as a sanity check - "echo foo > foo.bear" and I don't see that file
[2012-11-05 22:26:42 -0500] damian__: odd, you should see something like this in the chef output when its running it
[2012-11-05 22:26:43 -0500] damian__: [2012-10-31T21:15:20+00:00] INFO: Processing execute
[2012-11-05 22:27:17 -0500] damian__: are you sure you uploaded the newest version of the cookbook to your chef server?  I know that has caught me before
[2012-11-05 22:27:18 -0500] otterley: Babar, Datadog now has threshold-based alerting.  Complements nagios well.
[2012-11-05 22:27:53 -0500] bear: yep - double checked that by adding a new Log.info line to make sure the changes are current
[2012-11-05 22:28:52 -0500] bear: ok, i'm not seeing any "INFO: Processing execute" in the output
[2012-11-05 22:29:37 -0500] mhalligan: hrm. "had an error: Chef::Exceptions::MissingLibrary: You must have ruby-shadow installed for password support!" .. I'm not quite sure where else to install ruby-shadow. I've installed it both on the system gem and on the embedded chef gem. any thoughts?
[2012-11-05 22:29:59 -0500] alop: gah, I've bashed my head on that same issue
[2012-11-05 22:30:20 -0500] alop: trying to remember what the fix was
[2012-11-05 22:30:43 -0500] mhalligan: I gave up on it last time and just baked it into my post-install script when provisioning new vms
[2012-11-05 22:30:43 -0500] alop: I think it was related to versions of ruby chef was using versus what I was using
[2012-11-05 22:30:59 -0500] mhalligan: oh
[2012-11-05 22:31:05 -0500] mhalligan: damn. someone installed chef manually.
[2012-11-05 22:31:07 -0500] alop: like, my user ruby was 1.8.7 and chef was running on 1.9.2 or something
[2012-11-05 22:31:10 -0500] mhalligan: so I'm using the wrong chef
[2012-11-05 22:31:20 -0500] alop: or that
[2012-11-05 22:31:44 -0500] mhalligan: when you said the version of ruby that clicked :)
[2012-11-05 22:33:46 -0500] Babar: otterley: so does munin. But I guess I'm more of a perl guy, so. Don't know much about the ruby toys out there
[2012-11-05 22:33:58 -0500] otterley: Datadog is MaaS
[2012-11-05 22:34:25 -0500] alop: mhalligan: glad I could help :)
[2012-11-05 22:34:45 -0500] mhalligan: alop: thanks, I'd have glared at my computer another hour at least
[2012-11-05 22:40:15 -0500] sascha_d_: hi chefs, I've been looking at merging some custom knife-openstack code into canon knife-openstack. The only part I'm having a problem with is where the server object is returning addresses{"nova_fixed"...} instead of addresses{"public_address"} or something similar
[2012-11-05 22:40:30 -0500] sascha_d_: I'm trying to figure out what is returning that value and haven't been smart enough to find it yet
[2012-11-05 22:40:43 -0500] sascha_d_: I really know almost nothing about fog/openstack
[2012-11-05 22:41:03 -0500] sascha_d_: If I can figure that out and fix it, I can merge our internal code and possibly submit a pull request for our unique things
[2012-11-05 22:42:40 -0500] jtimberman: mhalligan: more recent versions of the omnibus package of chef include shadow support, because we build it right in. i want to say, like, 10.12.
[2012-11-05 22:50:46 -0500] mhalligan: jtimberman: aye, I just found out that the guy before me started trying to setup chef on a compile of legacy servers before he quit (but never got further than apt-get install)
[2012-11-05 22:53:25 -0500] Majost: does anyone know if there is a means to tell apt to not install openjdk as a dependency of tomcat via chef?
[2012-11-05 22:53:58 -0500] Majost: its installing a version of the jdk I don't want and its driving me mad
[2012-11-05 22:54:29 -0500] masterkorp: Majost: preinstall the jave you want
[2012-11-05 22:55:37 -0500] Majost: I do -- but the tomcat cookbook installs the tomcat6 package, and doesn't seem to let me override ['java']['java_home']
[2012-11-05 22:56:59 -0500] zuhaib: Majost: is this an Debian/Ubuntu machine?
[2012-11-05 22:57:25 -0500] Majost: zuhaib, yes
[2012-11-05 22:57:28 -0500] zuhaib: i assume so since your using apt that was (derp) on me
[2012-11-05 22:58:43 -0500] zuhaib: if your installing Java from source or something you need to make sure your update-alternatives is setup to see yoru installed Java as the correct one
[2012-11-05 22:59:04 -0500] zuhaib: otherwise apt-get will always try to install its version of openjdk as it assumes you are using jdk
[2012-11-05 23:00:29 -0500] zuhaib: If your uding oracle java check this out: https://github.com/flexiondotorg/oab-java6 it creates a local apt repo for your java, this will solve your problem
[2012-11-05 23:01:01 -0500] zuhaib: I had a lot of issues using the java cookbook a year ago.  I am just happy that today I am out of Java hell
[2012-11-05 23:04:23 -0500] Majost: zuhaib: nice! thanks!
[2012-11-05 23:09:51 -0500] macros: Do all uploads to bookshelf have to happen through the api or can it handle a directory of files too
[2012-11-05 23:10:06 -0500] macros: metarepo + bookshelf + apt-s3 could be useful
[2012-11-05 23:10:39 -0500] macros: Hardlinks don't work through the s3 api, so the space efficiency of metarepo isn't realized
[2012-11-05 23:11:10 -0500] flagg0204: anyone know how to reference a 'partial search' using the hosted chef REST end pount?
[2012-11-05 23:11:24 -0500] flagg0204: the examples show within a recipe, but not via the api
[2012-11-05 23:12:10 -0500] macros: flagg0204: http://community.opscode.com/cookbooks/partial_search
[2012-11-05 23:12:27 -0500] macros: The api is pretty much the same except for a POST insead of a GET for the solr endpoint
[2012-11-05 23:12:53 -0500] macros: It is implemented as a cookbook, not well documented but not unclear how to call
[2012-11-05 23:13:08 -0500] flagg0204: oh interesting
[2012-11-05 23:17:27 -0500] flagg0204: macros: cool.  that helps a lot.  thank
[2012-11-05 23:17:34 -0500] flagg0204: thanks
[2012-11-05 23:23:30 -0500] anthonype: Hello, is it possible to install jenkins server on a windows platform using the chef-jenkins cookbook?
[2012-11-05 23:27:51 -0500] Majost: java + ubuntu + chef == very angry place.
[2012-11-05 23:27:57 -0500] mhalligan: jtimberman: have you seen  NameError: No resource found for unicorn. Tried application_unicorn, application_python_unicorn, unicorn before?
[2012-11-05 23:28:02 -0500] thehar: lolol
[2012-11-05 23:36:17 -0500] jtimberman: mhalligan: i haven't. did you add the cookbook to the depends wherey ou're using it?
[2012-11-05 23:38:28 -0500] mhalligan: jtimberman: ah. I was trying to include application_unicorn instead of _ruby. thanks!
[2012-11-05 23:39:05 -0500] jtimberman: :)
[2012-11-05 23:40:05 -0500] Twirrim: jtimberman: test kitchen = fun.  In other news, runit nearly sorted for redhat platform.
[2012-11-05 23:40:24 -0500] Twirrim: hopefully completed by next week.
[2012-11-05 23:42:11 -0500] jtimberman: Twirrim: :-D
[2012-11-05 23:42:14 -0500] jtimberman: Twirrim: <3
[2012-11-05 23:42:26 -0500] jtimberman: Twirrim: have you looked at my CHEF-154 branch?
[2012-11-05 23:44:11 -0500] miah: Twirrim: orly?
[2012-11-05 23:44:30 -0500] miah: because lack of runit makes me want to rage everytime i use rhel
[2012-11-05 23:44:47 -0500] maccam94: can i just modify the contents of a cron job in a recipe, or do i have to action :delete it?
[2012-11-05 23:52:04 -0500] Twirrim: miah: yup, it's building and installing okay in test kitchen.  Mostly what is left to do some thorough testing and tidying up.
[2012-11-05 23:52:11 -0500] Twirrim: but it seems to be good so far.
[2012-11-05 23:53:32 -0500] miah: hot
[2012-11-05 23:54:56 -0500] addisonj: okay, I have had this issue for a few weeks, I have a few boxes where chef dies with the error here: http://pastebin.com/Yt8VHL2i

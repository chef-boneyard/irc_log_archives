[2012-11-19 00:01:55 -0500] jtimberman: chefologist: the community site is not the same as hosted chef.
[2012-11-19 00:02:44 -0500] jtimberman: chefologist: unfortunately, as the community site for sharing cookbooks is flat namespaced, there can be multiple cookbooks for a particular thing (like redis), and people find their own ways to share their code with the community.
[2012-11-19 00:04:55 -0500] jtimberman: chefologist: there's areas for improvement to the site, which opscode plans to implement, but we're constrained by available people
[2012-11-19 00:09:38 -0500] jtimberman: chefologist: so for now, if you want to use miah's cookbook instead, you can clone it from github or download a tarball through the github UI. otherwise, you'll have to resolve the errors the other cookbook you're trying to use.
[2012-11-19 00:47:09 -0500] chefologist: @jtimberman: thanks, still newbie, how can I get it from github > ubuntu server?
[2012-11-19 00:52:43 -0500] chefologist: Hi, in response to @jtimberman: how do I download and tarball https://github.com/miah/chef-redis.git to ubuntu server.  Thanks
[2012-11-19 00:54:49 -0500] julian: Hey guys, got a question about definitions.
[2012-11-19 01:02:15 -0500] chefologist: Hi, in response to @jtimberman: how do I download and tarball https://github.com/miah/chef-redis.git to ubuntu server.  Thanks
[2012-11-19 01:04:24 -0500] z: chefologist: Its pretty quiet tonight, and most people may be asleep. If you're using Hosted Chef then you might get better assistance by mailing Support ..
[2012-11-19 01:04:42 -0500] chefologist: z: ok thanks
[2012-11-19 01:23:32 -0500] ssd7: chefologist: You can download the tarball here: https://github.com/miah/chef-redis/archive/master.tar.gz
[2012-11-19 01:24:04 -0500] chefologist: ssd7: its ok I cloned the git repository then created my own tar.gz :)
[2012-11-19 01:24:22 -0500] ssd7: chefologist: Cool
[2012-11-19 01:24:53 -0500] chefologist: ssd7: however, I received and error when installing: Cookbook redis not found. If you're loading redis from another cookbook, make sure you configure the dependency in your metadata
[2012-11-19 02:04:34 -0500] solarce: is ""recipe[yum::epel]"" sufficient in a role to have chef enable epel on amazon linux? because it doesn't seem to be happening for me but from reading https://github.com/opscode-cookbooks/yum/blob/master/README.md it seems like it should?
[2012-11-19 03:53:48 -0500] chefologist: hi, getting error when uploading a cookbook: syntax error, unexpected $end, expecting kEND
[2012-11-19 03:53:53 -0500] chefologist: assistance would be great
[2012-11-19 04:52:08 -0500] z: does anyone have a debian package handy for Chef 10.16.2?
[2012-11-19 04:52:22 -0500] z: as it appears Omnibus install.sh is FUBAR right now for me
[2012-11-19 04:59:07 -0500] jtimberman: z: seems working for me on ubuntu 12.04
[2012-11-19 04:59:41 -0500] jtimberman: https://gist.github.com/bb897d01aba1269bcd09
[2012-11-19 05:02:33 -0500] z: RESOLVED PEBKAC
[2012-11-19 05:02:41 -0500] z: my Debian system is not in a pristine state :/
[2012-11-19 05:08:24 -0500] jtimberman: chefologist: do you have more context about the error?
[2012-11-19 05:18:43 -0500] chefologist: jtimberman: I was able to fix miah's chef-redis, by changing a few of her rb files
[2012-11-19 05:18:55 -0500] chefologist: all uploaded now to hosted-chef :)
[2012-11-19 05:19:07 -0500] dougireton: Hey, when I try to run a knife command against hosted chef, I get this error: Chef::Exceptions::RedirectLimitExceeded
[2012-11-19 05:19:10 -0500] dougireton: Any ideas?
[2012-11-19 05:20:24 -0500] jtimberman: dougireton: not seen that myself.
[2012-11-19 05:21:23 -0500] dougireton: is there some super basic knife command I can run to validate connectivity to Hosted Chef?
[2012-11-19 05:21:29 -0500] jtimberman: knife client list
[2012-11-19 05:21:32 -0500] jtimberman: is what i usually do
[2012-11-19 05:21:38 -0500] dougireton: yeah, just tried that
[2012-11-19 05:21:39 -0500] dougireton: thanks
[2012-11-19 05:22:39 -0500] jtimberman: everything seems working for me at the moment :/
[2012-11-19 05:23:35 -0500] dougireton: I had a typo in my chef_server_url in my knife.rb
[2012-11-19 05:23:37 -0500] dougireton: all fixed now
[2012-11-19 05:23:39 -0500] dougireton: thanks
[2012-11-19 05:23:45 -0500] jtimberman: ah
[2012-11-19 05:23:51 -0500] jtimberman: what was the typo?
[2012-11-19 05:24:01 -0500] dougireton: I"m trying out knife ec2
[2012-11-19 05:24:19 -0500] dougireton: thanks for the help
[2012-11-19 05:25:25 -0500] dougireton: I had "api.opscoee.com" instead of api.opscode.com
[2012-11-19 05:25:30 -0500] chefologist: when trying to run psql from my recipe, I get: psql: could not connect to server: No such file or directory Is the server running locally and accepting connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?  assistance would be great
[2012-11-19 05:25:51 -0500] jtimberman: oooh ok.
[2012-11-19 05:26:03 -0500] jtimberman: dougireton: thats a weird exception for the wrong domain :)
[2012-11-19 05:27:06 -0500] jtimberman: chefologist: well, is postgresql running?
[2012-11-19 05:27:13 -0500] dougireton: It's because I'm using OpenDNS, which tries to be helpful
[2012-11-19 05:28:43 -0500] jtimberman: dougireton: ahh.
[2012-11-19 05:29:04 -0500] jtimberman: dougireton: i use my own [internal lan] dns server / cache :)
[2012-11-19 05:41:39 -0500] erikh: I'm doing things to chef
[2012-11-19 05:41:41 -0500] erikh: dirty things
[2012-11-19 05:44:14 -0500] jsh: erikh: sure, but chef made you beg first
[2012-11-19 05:44:28 -0500] erikh: oh, no, that was vagrant
[2012-11-19 05:44:46 -0500] erikh: nothing I've done to chef so far compares to what I did to vagrant
[2012-11-19 05:44:54 -0500] erikh: (and probably won't)
[2012-11-19 05:45:14 -0500] jsh: heh
[2012-11-19 05:48:57 -0500] chefologist: jtimberman: newbie, ubuntu server command to get it running?
[2012-11-19 06:18:58 -0500] chefologist: hi, how come I am unable to connect to psql after applying the postgresql cookbook?  Assistance would be great
[2012-11-19 06:19:47 -0500] dougireton: Anyone seen this error? I get it when I'm trying to run knife ec2 server create:
[2012-11-19 06:19:49 -0500] dougireton: ERROR: Excon::Errors::SocketError: hostname does not match the server certificate (OpenSSL::SSL::SSLError)
[2012-11-19 06:32:01 -0500] iverson0881: hey, what's the best way to change the IP address within knife node $fqdn show ?
[2012-11-19 06:33:45 -0500] iverson0881: is it possible to use the --hint command to change what ipaddress would be shown there?
[2012-11-19 06:33:51 -0500] iverson0881: as part of knife boostrap
[2012-11-19 06:35:14 -0500] BryanWB_: ohai chefs!
[2012-11-19 06:37:53 -0500] iverson0881: i'm sure this topic comes up a lot about the ip listed in knife node $fqdn show, but i'm sure i'm sucking at googling right now, is there any place where this topic is discussed ?
[2012-11-19 06:42:04 -0500] erikh: it's supplied by ohai
[2012-11-19 06:50:19 -0500] iverson0881: so is it possible to send a hint to ohai to use a different ip address ?
[2012-11-19 06:50:28 -0500] iverson0881: using the knife bootstrap --hint ?
[2012-11-19 06:50:36 -0500] iverson0881: would that override that variable ?
[2012-11-19 06:52:06 -0500] erikh: ohai runs on each chef run and replaces all the ohai metadata
[2012-11-19 06:52:17 -0500] erikh: what's the reason you want to overwrite the ip address?
[2012-11-19 06:53:52 -0500] iverson0881: so i'm on soft layer which provides two ip address, a public interface and a private interface
[2012-11-19 06:54:09 -0500] iverson0881: since the default gateway is the public interface, i get the ip of the public interface attached to the ipaddress var in ohai
[2012-11-19 06:54:15 -0500] erikh: sure
[2012-11-19 06:54:31 -0500] erikh: and let me guess, you want to configure something to talk over the private interface?
[2012-11-19 06:54:39 -0500] erikh: I have some code you can adapt if you want
[2012-11-19 06:54:39 -0500] iverson0881: yup
[2012-11-19 06:54:54 -0500] iverson0881: sure that would be helpful
[2012-11-19 06:56:44 -0500] erikh: so this is a library that would go into a cookbook that your other cookbooks would depend on
[2012-11-19 06:56:45 -0500] erikh: https://gist.github.com/b896b5aca601060d67a4
[2012-11-19 06:56:53 -0500] erikh: the second file in that gist is how you use it
[2012-11-19 06:57:04 -0500] erikh: you'd modify it to look at the right metadata for your environment of course
[2012-11-19 06:57:41 -0500] erikh: but the nice thing about this approach is that if you ever need to use another stack (for testing, or partitioning your physical environment), you can adjust the code to pick the right meta and be confident it just works
[2012-11-19 06:57:54 -0500] erikh: that code supports vagrant, ec2, and a "normal" machine
[2012-11-19 06:58:21 -0500] erikh: vagrant uses the same ip for every machine on eth0, and I always have a hostonly additional IP configured
[2012-11-19 06:58:44 -0500] erikh: the alternative is writing an ohai plugin
[2012-11-19 06:58:52 -0500] erikh: up to you how you want to drive it.
[2012-11-19 06:59:25 -0500] iverson0881: thanks, i'll take a look at this, seems fairly straightforward. i've just got a few cookbooks that will need modification
[2012-11-19 07:00:27 -0500] erikh: yeah, it's a net win after it's in there though
[2012-11-19 07:00:48 -0500] erikh: just remember to slap it in its own cookbook, and then depend on that cookbook in your other cookbooks.
[2012-11-19 07:01:09 -0500] erikh: we have a cookbook with a few libraries like this simply called 'utility_libraries' that bring a ton of global functionality in
[2012-11-19 07:01:26 -0500] erikh: it doesn't actually have any recipes in it.
[2012-11-19 07:04:39 -0500] Houdini1: why deploy_revision ignore callbacks (before_migrate and others)?
[2012-11-19 09:23:42 -0500] tolland: on a windows workstation one of my users has a knife command, which is working but each request takes ages (ie DNS timeout length) however they are connected using a local port forward to 4000, and using ip address
[2012-11-19 09:23:54 -0500] tolland: so I presume some reverse DNS lookup is taking place
[2012-11-19 09:24:00 -0500] masterkorp: hello
[2012-11-19 09:24:06 -0500] tolland: any pointers where this is likely to be occuring
[2012-11-19 09:24:11 -0500] tolland: hello
[2012-11-19 09:27:48 -0500] chefologist: hi, when I run psql from the cookbook postgresql, I receive this error: psql: could not connect to server: No such file or directory         Is the server running locally and accepting connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? assistance would be greatley appreciated
[2012-11-19 09:54:52 -0500] lxndrp: Hey folks.
[2012-11-19 09:56:53 -0500] intinig: guys I can't update my billing info OR my contact information on hosted chef and I am now using more nodes than I should. Any clue on why it doesn't allow me to do that or when I will be shut down? :)
[2012-11-19 09:58:00 -0500] trentster: hey all just getting started with chef. when creating template files and wanting to include attributes, and I want to include the value of : default[:zfssnap][:dailysnaps] = "7" in a template file do I specify it as <%= @dailysnaps %>
[2012-11-19 09:59:04 -0500] trentster: how does it recognise if I have two similar entries e.g default[:zfssnap][:dailysnaps]   and for e.g. default[:blah][:dailysnaps]
[2012-11-19 10:04:22 -0500] cassianoleal: hello
[2012-11-19 10:04:28 -0500] lxndrp: Quick q: is it possible to test in a recipe whether I am running in chef-solo?
[2012-11-19 10:04:40 -0500] lxndrp: Checked the PDF, but couldn't find anything...
[2012-11-19 10:04:44 -0500] cassianoleal: has anyone had success running chefspec alongside with berkshelf?
[2012-11-19 10:04:57 -0500] cassianoleal: I'm having dependency resolution issues when trying to run the specs
[2012-11-19 10:05:53 -0500] chefologist: hi receiving error when running creating new server: Authorization Error:  Your validation client is not authorized to create the client for this node (HTTP 403).
[2012-11-19 10:06:24 -0500] cassianoleal: namely, "Cookbook apt not found. If you're loading apt from another cookbook, make sure you configure the dependency in your metadata"
[2012-11-19 10:07:01 -0500] cassianoleal: when I converge my cookbook in vagrant, apt comes along just fine
[2012-11-19 10:07:45 -0500] chefologist: cassianolel: was that response for me?
[2012-11-19 10:08:33 -0500] cassianoleal: chefologist: no, sorry that was still my question :)
[2012-11-19 10:08:53 -0500] chefologist: cassianoleal: ok apologies
[2012-11-19 10:09:12 -0500] jensofsweden: chefologist, have you checked that the validation.pem cert is correct on the client? It authenticates with the validation.pem cert to the server to create a client cert for the instance.
[2012-11-19 10:09:36 -0500] geekyogi: Guys, give me one URL/ documentation that talks just about creating a cookbook and running it
[2012-11-19 10:10:28 -0500] chefologist: jensofsweden: thanks where do I look?  I had a look in /etc/chef, but nothing there
[2012-11-19 10:11:17 -0500] jensofsweden: if your client doesnt have a valid validation.pem certificate (i think) during the registration with the chef server it cant create a client cert for the node
[2012-11-19 10:11:59 -0500] jensofsweden: on the chef server in /etc/chef there should be a validation.pem cert, copy it to the clients /etc/chef and try again
[2012-11-19 10:12:13 -0500] chefologist: jensofsweden: can I copy the client.pem from another vagrant box to this new box?
[2012-11-19 10:12:37 -0500] jensofsweden: No, each node (client) cert is uniquie for the node i think
[2012-11-19 10:16:36 -0500] chefologist: ok, but I haven't created nodes on hosted-chef in the past, they are usually created with vagrant
[2012-11-19 10:18:54 -0500] jensofsweden: Oh, i have never worked with hosted chef. But i guess its the same procedure except you have to isse a validation cert on the hosted site. I dont use vagrant, but when i kickstart my rhel machines it comes with a validation certificate that is pointed out during the node registration then deleted with the client cert is on the node.
[2012-11-19 10:37:03 -0500] corp: anyone have this issue with knife bootstrap? This URL is invalid. http://www.opscode.com/chef/download?v=10.16.2&p=ubuntu&pv=12.10&m=x86_64
[2012-11-19 10:38:46 -0500] corp: this is with chef 10.16.2
[2012-11-19 10:41:46 -0500] sakshi: i am getting eror while installing chef server on my redhat linux machine 5.6
[2012-11-19 10:44:16 -0500] sakshi: i am getting this error......
[2012-11-19 10:44:20 -0500] sakshi: Building native extensions.  This could take a while... ERROR:  Error installing chef-server:         ERROR: Failed to build gem native extension.          /usr/bin/ruby extconf.rb checking for main() in -lgecodesearch... no ========================================================================================= Gecode >3.5 must be installed (http://www.gecode.org/).  OSX:   brew install gecode  For convenience, we have built Gecode f
[2012-11-19 10:44:40 -0500] sakshi: can anybody help me
[2012-11-19 10:44:43 -0500] sakshi: ?
[2012-11-19 10:47:39 -0500] pluesch0r: hi everybody. i'm trying to execute code in a recipe only if some other recipe has been seen in the run list. i'm using node.recipe?('other_recipe') to do that. however, even though that other recipe is definitely in the run list, it's not found. what am i doing wrong?
[2012-11-19 10:49:03 -0500] sakshi: hey can anyone help me in installing the chef server on my redhat machine
[2012-11-19 10:49:45 -0500] sakshi: i have already follow the procedure but still i m not be able to install the chef srver on my machine
[2012-11-19 10:50:44 -0500] lxndrp: Any ideas regarding cheking for chef-solo via the API in a recipe?
[2012-11-19 10:50:57 -0500] lxndrp: s/cheking/checking
[2012-11-19 10:51:24 -0500] aruntomar: plue
[2012-11-19 10:51:39 -0500] pluesch0r: aruntomar: jup?
[2012-11-19 10:51:39 -0500] aruntomar: pluesch0r: start ur node with shef -z
[2012-11-19 10:52:17 -0500] aruntomar: pluesch0r: then run node.recipe?('recipe_name')
[2012-11-19 10:52:57 -0500] pluesch0r: aruntomar: my chef-client doesn't seem to accept a -z argument, based on the output of chef-client -h
[2012-11-19 10:53:36 -0500] aruntomar: pluesch0r: shef -z, shef is an interactive shell like irb for chef
[2012-11-19 10:54:09 -0500] aruntomar: sakshi: what is the problem u r facing
[2012-11-19 10:54:10 -0500] pluesch0r: aruntomar: understood.
[2012-11-19 10:54:15 -0500] pluesch0r: says 'false'
[2012-11-19 10:54:28 -0500] pluesch0r: even though it says that it has loaded cookbooks.
[2012-11-19 10:54:36 -0500] pluesch0r: and the cookbook i'm looking for is present.
[2012-11-19 10:55:16 -0500] sakshi: i m getting this error
[2012-11-19 10:55:19 -0500] sakshi: Building native extensions.  This could take a while... ERROR:  Error installing chef-server:         ERROR: Failed to build gem native extension.          /usr/bin/ruby extconf.rb checking for main() in -lgecodesearch... no ========================================================================================= Gecode >3.5 must be installed (http://www.gecode.org/).  OSX:   brew install gecode  For convenience, we have built Gecode f
[2012-11-19 10:55:23 -0500] aruntomar: can you paste the out starting from the shef -z till node.recipe ....... to some gist
[2012-11-19 10:55:40 -0500] pluesch0r: aruntomar: also, the recipe is contained in the array node.recipes
[2012-11-19 10:56:00 -0500] aruntomar: sakshi: if you've more than 2 lines, you should paste it either to pastebin or gist
[2012-11-19 10:56:16 -0500] pluesch0r: aruntomar: i.e. node.recipes.include?('squid') returns 'true'
[2012-11-19 10:56:19 -0500] sakshi: ok
[2012-11-19 10:56:24 -0500] pluesch0r: hm. i think i'll just use that, then.
[2012-11-19 10:56:54 -0500] pluesch0r: aruntomar: thanks for the tip with shef -z though.
[2012-11-19 10:57:07 -0500] aruntomar: pluesch0r: u r welcome :)
[2012-11-19 10:57:19 -0500] aruntomar: sakshi: which documentation are your referring?
[2012-11-19 10:57:50 -0500] sakshi: aruntomar : i don't know how to paste it to gist,, please tell me
[2012-11-19 10:58:18 -0500] aruntomar: sakshi: https://gist.github.com/
[2012-11-19 10:59:01 -0500] aruntomar: paste the content there and click the create public gist button
[2012-11-19 10:59:29 -0500] aruntomar: then provide the url of that gist for others to review
[2012-11-19 11:00:01 -0500] sakshi: aruntomar: i m refrrring this document : http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually
[2012-11-19 11:01:13 -0500] aruntomar: sakshi: have you installed the geocode library
[2012-11-19 11:01:31 -0500] aruntomar: sakshi: from the error you pasted, it seems it's not there or the system is not able to locate it
[2012-11-19 11:01:31 -0500] sakshi: yes... i have installed gecode 3.5
[2012-11-19 11:02:14 -0500] aruntomar: sakshi: i use another simple method http://blog.frameos.org/2011/05/19/installing-chef-server-0-10-in-rhel-6-scientificlinux-6/
[2012-11-19 11:02:48 -0500] sakshi: git://gist.github.com/4110123.git
[2012-11-19 11:02:58 -0500] sakshi: this is the link for the error
[2012-11-19 11:03:11 -0500] aruntomar: sakshi: it has worked for me pretty well on redhat/centos platform. much easier to setup from the repo than to do everything manually
[2012-11-19 11:03:55 -0500] sakshi: this method is for rhel 6.. it will work for rhel 5
[2012-11-19 11:04:41 -0500] sakshi: https://gist.github.com/4110123
[2012-11-19 11:05:07 -0500] aruntomar: http://rbel.frameos.org/
[2012-11-19 11:05:15 -0500] aruntomar: they have repo for rhel 5 also
[2012-11-19 11:05:16 -0500] jensofsweden: I run it on rhel6, from rbel repo, works like a charm
[2012-11-19 11:06:22 -0500] lxndrp: Trying to find out within a recipe whether I am running on chef-solo. Any Chef API call to do this properly?
[2012-11-19 11:06:29 -0500] jensofsweden: http://blog.frameos.org/2011/04/29/installing-chef-server-0-10-in-centos-5-rhel-5/
[2012-11-19 11:06:59 -0500] mattp: lxndrp: if Chef::Config[:solo] ...
[2012-11-19 11:07:34 -0500] lxndrp: That easy? Thx, mattp. Where did I miss that in the docs?
[2012-11-19 11:07:58 -0500] mattp: lxndrp: Not sure off hand - I found it in http://acrmp.github.com/foodcritic/#FC011 a few days ago (when I had the same question myself)
[2012-11-19 11:08:31 -0500] mattp: i.e. documented in another program.
[2012-11-19 11:09:27 -0500] sakshi: aruntomar:  i used ur method but it is showing some dependencies are missing...
[2012-11-19 11:09:48 -0500] sakshi: i have to install additional dependicies to mek it work
[2012-11-19 11:10:42 -0500] jensofsweden: do a rpm -qa gecode
[2012-11-19 11:11:26 -0500] jensofsweden: and if you dont have it install it
[2012-11-19 11:11:43 -0500] sakshi: i got this result :  gecode-3.5.0-1.el5
[2012-11-19 11:12:20 -0500] sakshi: i have gecode
[2012-11-19 11:13:55 -0500] jensofsweden: if you install it from the rbel repo it should sort out dependencys
[2012-11-19 11:14:28 -0500] sakshi: no i have not install it from repo ... i installed it from rpm file
[2012-11-19 11:15:19 -0500] sakshi: i tried to install it from repo but it was not working so i used a rpm file to install it
[2012-11-19 11:15:48 -0500] jensofsweden: rpm -Uvh http://rbel.frameos.org/rbel5 && yum install rubygem-chef-server
[2012-11-19 11:18:02 -0500] sakshi: https://gist.github.com/4110193
[2012-11-19 11:21:33 -0500] jensofsweden: then you need the java packages and libxml2-devel packages, thay should be in rhel5 repo. Your ran rhel5 or centos5?
[2012-11-19 11:21:47 -0500] sakshi: rhel5
[2012-11-19 11:22:08 -0500] jensofsweden: if you do a yum info java-1.6.0-openjdk what do you get?
[2012-11-19 11:23:03 -0500] sakshi: no package to list
[2012-11-19 11:24:38 -0500] jensofsweden:  Is the rhel box connected to RHN or a satellite?
[2012-11-19 11:30:01 -0500] jensofsweden: What the last error ment was that it tried to install the packages, the packages itself had dependancys that it allso tried to install, but yum coulnt find those files in your repositorys. Im pretty sure that rhel5 has openjdk 1.6 in its repo but for some reson it cant access your repo.
[2012-11-19 11:38:15 -0500] sakshi: what can i do to make it access
[2012-11-19 11:42:17 -0500] jensofsweden: Is the machine registerd with RHN?
[2012-11-19 11:48:24 -0500] bmcgee: Hey
[2012-11-19 11:48:44 -0500] bmcgee: Anyone here using the rackspace plugin for knife?
[2012-11-19 11:48:59 -0500] gyre008: bmcgee: I am
[2012-11-19 11:49:08 -0500] bmcgee: i'm having a problem authenticating
[2012-11-19 11:49:13 -0500] slivabox: Hi all, my question might sound silly, but I've just started using chef.
[2012-11-19 11:49:13 -0500] slivabox: I'd like to create databag for admins and users, obviously admins are supposed to be created on all servers.
[2012-11-19 11:49:14 -0500] slivabox: But how to create user per node basis e.g. node1 needs user1 and user2, node2 needs user2 and user3
[2012-11-19 11:49:28 -0500] gyre008: bmcgee: can you gist your knife config and what region are you in ?
[2012-11-19 11:49:34 -0500] bmcgee: wilco
[2012-11-19 11:49:36 -0500] gyre008: I mean leave out the API keys stuff :)
[2012-11-19 11:49:39 -0500] bmcgee: :)
[2012-11-19 11:49:40 -0500] sakshi: yeh it is rhn
[2012-11-19 11:51:25 -0500] jensofsweden: Then you should have the openjdk packages in your repo
[2012-11-19 11:51:34 -0500] sakshi: jensofsweden : yeh it is rhn
[2012-11-19 11:52:01 -0500] jensofsweden: do a yum repolist and see if you have any channels connected to your system
[2012-11-19 11:52:29 -0500] bmcgee: gyre008 https://gist.github.com/4110272
[2012-11-19 11:54:21 -0500] gyre008: bmcgee: yeah...the end points are incorrect...I was having the same problem with them until I spoke to CRackspace...this is my knife.rb... https://gist.github.com/4110279
[2012-11-19 11:54:39 -0500] gyre008: I assume bmcgee that you have rackspace plugin installed :)
[2012-11-19 11:56:05 -0500] corp: anyone using berkshelf?
[2012-11-19 11:57:11 -0500] sakshi: repo id                                                repo name                                                                                       status aegisco                                                AegisCo rhel5Server repo - x86_64                                                                  62 epel                                                   Extra Packages for Enterprise Linux 5 - x86_64                       
[2012-11-19 11:57:45 -0500] bmcgee: Eureka! Thanks gyre008
[2012-11-19 11:58:08 -0500] bmcgee: corp I use berkshelf
[2012-11-19 11:58:18 -0500] sakshi: https://gist.github.com/4110296
[2012-11-19 11:58:21 -0500] bmcgee: as of a week ago but i might still be helpful
[2012-11-19 12:00:08 -0500] corp: bmcgee: Do you still use knife cookbook upload with it? I find it annoying having all the cookbooks in a separate dir with version names. knife can't use that dir, so I have to create a separate location for that
[2012-11-19 12:00:38 -0500] bmcgee: i'm just dealing with that myself at the moment
[2012-11-19 12:00:47 -0500] jensofsweden: sakshi you need to have the rhel repos aswell
[2012-11-19 12:00:54 -0500] bmcgee: i've got a chef repo, was gonna import my cookbooks from github same as i have others.
[2012-11-19 12:01:05 -0500] bmcgee: then upload with knife from there
[2012-11-19 12:01:10 -0500] bmcgee: dunno if that's right
[2012-11-19 12:01:36 -0500] corp: i see. berks upload doesn't allow specifying one cookbook, which makes it a bit unusable for rapid dev
[2012-11-19 12:02:02 -0500] corp: though, using berks install -p (path) seems to be a temporary solution
[2012-11-19 12:02:03 -0500] bmcgee: tbh i'm still learning. I think the guys who wrote it are on here or will be later
[2012-11-19 12:02:20 -0500] corp: i'm just ignoring the cookbooks dir in my chef repo now
[2012-11-19 12:02:25 -0500] sakshi: i am getting that
[2012-11-19 12:03:16 -0500] bmcgee: I'm just at the point where i need to figure out this problem myself. If i find a happy medium i'll let you know
[2012-11-19 12:06:51 -0500] sakshi: sry i m not getting that repo
[2012-11-19 12:07:08 -0500] jensofsweden: Then you need to fix that first
[2012-11-19 12:07:21 -0500] iverson0881: hello, i'm trying to use the following gist in a cookbook so that I can specify the ip address i need more properly in a cookbook
[2012-11-19 12:07:21 -0500] iverson0881: https://gist.github.com/939b03629c0988215444
[2012-11-19 12:07:42 -0500] iverson0881: however i'm trying to see how i would use private_ip as part of a chef search
[2012-11-19 12:07:55 -0500] iverson0881: any ideas?
[2012-11-19 12:10:24 -0500] sakshi: i have all the repos needed
[2012-11-19 12:10:50 -0500] sakshi: https://gist.github.com/4110296
[2012-11-19 12:25:41 -0500] BryanWB_: corp: i swear by berkshelf
[2012-11-19 12:26:16 -0500] BryanWB_: but for one cookbook i do knife cookbook upload some_cookbook, but yeah it is annoying
[2012-11-19 12:26:26 -0500] corp: BryanWB_: I like it so far. just wondering how people work with it today
[2012-11-19 12:26:58 -0500] BryanWB_: i have all my cookbooks in the same directory but they are separate git repos
[2012-11-19 12:27:09 -0500] BryanWB_: i make that dir my cookbooks_path
[2012-11-19 12:27:12 -0500] BryanWB_: in knife.rb
[2012-11-19 12:27:43 -0500] corp: BryanWB_: yeah, me too. but then i want to be able to browse the external cookbooks
[2012-11-19 12:28:10 -0500] BryanWB_: corp: then u can "vendor" them i think
[2012-11-19 12:28:19 -0500] BryanWB_: and place them in a dedicated dir
[2012-11-19 12:28:51 -0500] corp: yep
[2012-11-19 12:34:22 -0500] maruq: hi guys. I started playing around with hectcastro's fork of aws cookbook (adds provisioned IOPS) & am seeing an error about converge_by
[2012-11-19 12:34:26 -0500] maruq: had an error: NameError: Cannot find a resource for converge_by on ubuntu version 12.04
[2012-11-19 12:34:55 -0500] maruq: weird thing is that the code it's calling there is in the opscode recipe & works fine.
[2012-11-19 12:43:55 -0500] maruq: any ideas as to how I might go about debugging that kind of thing?
[2012-11-19 12:56:49 -0500] BryanWB_: maruq:  probably need to upgrade your chef gem to 10.16
[2012-11-19 12:57:33 -0500] maruq: @BryanWB: weird thing is it worked if I set iops to 100, breaks if I set to 1000.
[2012-11-19 12:58:10 -0500] maruq: seems to be that the converge_by wraps the Right_AWS::ec2.create_volume call, so I guess it's breaking there
[2012-11-19 12:58:25 -0500] maruq: `gem server` & rtfm-ing ;)
[2012-11-19 12:59:51 -0500] maruq: @BryanWB also got around to watching the reusable cookbooks talk on the weekend. nice stuff ;)
[2012-11-19 13:01:17 -0500] BryanWB_: maruq: gr8!
[2012-11-19 13:01:18 -0500] BryanWB_: pls let us know how we  can improve them
[2012-11-19 13:01:21 -0500] BryanWB_: the G+ hangouts
[2012-11-19 13:04:03 -0500] maruq: BryanWB: cheers. I'd actually be keen to hear more from the Riot games guys about artifacts vs. the deploy_revision + github workflow
[2012-11-19 13:04:10 -0500] maruq: otherwise, it's all good by me
[2012-11-19 13:08:54 -0500] BryanWB_: maruq: yeah they have a lot to teach
[2012-11-19 13:09:08 -0500] BryanWB_: maruq: actually jamie will be on the hangout tomorrow night
[2012-11-19 13:09:25 -0500] BryanWB_: aka reset, u can come and ask him
[2012-11-19 13:24:35 -0500] qurve: Hey all, am I correct that sometime between 10.14.4 and 10.16.2 chef-client -e <env> changed to chef-client -E <env>?
[2012-11-19 13:25:14 -0500] qurve: Just woke up to a barrage of instances getting terminated/launched because they were failing to bootstrap bitching about -e not existing. :X
[2012-11-19 13:26:12 -0500] qurve: I manually ran the client on one instance with -E just to stop the termination loop which appears to work, but I just want to confirm that's what happened before I commit that to my cloudformation template.
[2012-11-19 13:29:39 -0500] specialsauce: qurve, pretty sure its always been "-E", or at least it has for as long as we've been using it (since 0.10.4)
[2012-11-19 13:30:13 -0500] qurve: Heh, I've been running a stack on amazon for about 6 months that was bootstrapping all the instances with chef-client -E $environment -j /etc/chef/attributes.json
[2012-11-19 13:30:21 -0500] qurve: er -e
[2012-11-19 13:30:29 -0500] qurve: (I just changed it to -E to fix the problem)
[2012-11-19 13:30:36 -0500] specialsauce: weird
[2012-11-19 13:30:41 -0500] qurve: Perhaps I just got away with it in the past.
[2012-11-19 13:31:29 -0500] qurve: specialsauce: Do you use CLoudFormation by chance? I have a tangentally related question.
[2012-11-19 13:31:37 -0500] specialsauce: qurve: afraid not, no
[2012-11-19 13:31:42 -0500] qurve: Thanks anyway.
[2012-11-19 13:31:50 -0500] specialsauce: np
[2012-11-19 13:32:05 -0500] qurve: I'm glad I actually looked into this, I thought it was just bad instances.
[2012-11-19 13:57:02 -0500] dkingofpa: yfeldblum:  librarian-chef is failing to resolve community cookbooks.  http://community.opscode.com/api/v1 isn't found.  See this before?
[2012-11-19 14:25:22 -0500] m4rcu5: anyone already thought bout using jenkins to upload your cookbooks and environment files to chef? googling i find a lot of the cookbooks to install jenkins with chef.
[2012-11-19 14:26:13 -0500] bflad: m4rcu5: you mean like: https://github.com/adamhjk/chef-jenkins ?
[2012-11-19 14:27:14 -0500] m4rcu5: bflad: hhmm, i swear that i just checked out project with the same name that was bout instaling jenkins :)
[2012-11-19 14:30:28 -0500] BryanWB_: hey bflad !
[2012-11-19 14:31:31 -0500] aspiers: surely I'm not the only one trying Chef master branch with rake-10.0.1? rake -T fails due to long-deprecated require 'rake/rdoctask'
[2012-11-19 14:33:03 -0500] m4rcu5: bflad: seems someone stopped working on it right before the documentation step :P
[2012-11-19 14:33:28 -0500] bflad: BryanWB_: howdy!
[2012-11-19 14:35:12 -0500] zts: aspiers: that bit me yesterday too
[2012-11-19 14:35:28 -0500] aspiers: zts: I'll create an issue for it
[2012-11-19 14:35:51 -0500] bflad: Anyone out there using the chef-client cookbook? I'm thinking it could use some tweaking
[2012-11-19 14:36:25 -0500] m4rcu5: bflad: always, i use it to delete validation and set the interval time
[2012-11-19 14:37:02 -0500] bflad: more specifically with the backup and cache paths on arch/centos/debian/fedora/redhat/ubuntu, since it changes their default location
[2012-11-19 14:37:18 -0500] zts: aspiers: thankyou - I should have done so myself
[2012-11-19 14:37:47 -0500] zts: aspiers: though I also couldn't understand how it wasn't biting the opscode folks, and half imagined I must have messed up something locally
[2012-11-19 14:37:55 -0500] aspiers: zts: exactly, me too
[2012-11-19 14:38:48 -0500] aspiers: zts: rake 10.0.0 was only released recently
[2012-11-19 14:42:20 -0500] bmcgee: hey
[2012-11-19 14:42:34 -0500] bmcgee: qq how do configure knife with the secret file for encrypted data bags?
[2012-11-19 14:44:16 -0500] bflad: bmcgee: did you already create your secret file for encrypting/decrypting things?
[2012-11-19 14:44:28 -0500] aspiers: zts: https://github.com/jimweirich/rake/commit/5bf1abeb284523076e5f952232a1b6b6e3a1b6c8
[2012-11-19 14:44:29 -0500] bmcgee: yup been specifying it on the command line
[2012-11-19 14:44:35 -0500] bmcgee: want to move it into knife.rb
[2012-11-19 14:44:46 -0500] bmcgee: can't find the specifics
[2012-11-19 14:45:29 -0500] bflad: you add an "encrypted_data_bag_secret "path/to/secret/file" entry in your knife.rb
[2012-11-19 14:45:29 -0500] yfeldblum: dkingofpa, can't say that i have
[2012-11-19 14:47:17 -0500] bmcgee: bflad thx, thought it would be something like that
[2012-11-19 15:04:57 -0500] failshell: hello. through chef, we configure lots of crons. it didn't use to be problematic, but now, when we have over 500 VMs running the same crons at midnight, its causing issues with the SANs. Any way to randomize scheduled time for crons?
[2012-11-19 15:05:26 -0500] BryanWB_: y
[2012-11-19 15:05:43 -0500] BryanWB_: failshell: the chef-client::cron has a configurable splay
[2012-11-19 15:05:47 -0500] BryanWB_: that is randomized
[2012-11-19 15:05:57 -0500] Mithrandir: failshell: we just generate a fixed offset when the box is first configured.
[2012-11-19 15:06:20 -0500] Mithrandir: so set_unless[:cron][:offset] = rand(60) or whatever and then add that
[2012-11-19 15:06:21 -0500] failshell: does it?
[2012-11-19 15:06:27 -0500] failshell: i can't find it in the wiki
[2012-11-19 15:09:00 -0500] failshell: Mithrandir: what version do i need for that?
[2012-11-19 15:21:02 -0500] yfeldblum: failshell, >= 0
[2012-11-19 15:21:25 -0500] masterkorp: lol @ the name
[2012-11-19 15:21:53 -0500] Mithrandir: failshell: 0.9 or newer
[2012-11-19 15:22:10 -0500] failshell: that needs to be documented ..
[2012-11-19 15:22:20 -0500] failshell: http://wiki.opscode.com/display/chef/Resources#Resources-Cron
[2012-11-19 15:22:22 -0500] failshell: does not mention it
[2012-11-19 15:23:22 -0500] Mithrandir: huh?  It's not a cron option.
[2012-11-19 15:23:48 -0500] Mithrandir: I add that delay and then have the cron command be sleep <%= node[:cron][:offset] %> && command
[2012-11-19 15:24:21 -0500] failshell: Mithrandir: ah yeah i thought of that
[2012-11-19 15:24:28 -0500] failshell: was hoping of having something system wide
[2012-11-19 15:24:39 -0500] failshell: like the configurable splay time for chef-client
[2012-11-19 15:25:15 -0500] mikeywaites: hey guys, been messing with knife ec2 plugin. seems the instance has been created but the output is still hanging on sshd been running nearly all day i assume it should have terminated by now?
[2012-11-19 15:27:42 -0500] bmcgee: Anyone here using the openvpn recipe?
[2012-11-19 15:28:28 -0500] masterkorp: bmcgee: just ask
[2012-11-19 15:28:58 -0500] bmcgee: getting an error when it starts the openvpn service at the end of the recipe
[2012-11-19 15:29:06 -0500] aspiers: zts: https://github.com/jimweirich/rake/pull/147
[2012-11-19 15:29:24 -0500] bmcgee: I'm using it 'out of the box' so to speak, can't for the life of me figure out why it's borking at the end
[2012-11-19 15:29:27 -0500] bmcgee: i'll post a gist
[2012-11-19 15:30:27 -0500] bmcgee: as promised: https://gist.github.com/4111273
[2012-11-19 15:31:51 -0500] m4rcu5: anyine actually using that chef-jenkins glue?
[2012-11-19 15:36:10 -0500] masterkorp: m4rcu5: just ask
[2012-11-19 15:37:11 -0500] masterkorp: bmcgee: does the chef_stacktrace says anything ?
[2012-11-19 15:37:22 -0500] bmcgee: only what you see in the gist
[2012-11-19 15:38:14 -0500] masterkorp: sorry, cant help ya
[2012-11-19 15:38:33 -0500] bmcgee: no worries, i'll keep digging
[2012-11-19 15:40:41 -0500] jtimberman: If you're interested in Berkshelf, but think it might be a lot of work to convert your Chef Repository, I wrote a bit about that here: http://bit.ly/WfYEfO
[2012-11-19 15:40:47 -0500] m4rcu5: masterkorp: that was really the question, i was just intersted in user experiance :)
[2012-11-19 15:41:10 -0500] masterkorp: m4rcu5: then ask for persoanl Opinions ?
[2012-11-19 15:41:56 -0500] bflad: jtimberman: just read through that, nice post. some good ideas for customization patterns
[2012-11-19 15:42:44 -0500] masterkorp: jtimberman: sweet, i must admit that i am bit ceptical about berkshelf
[2012-11-19 15:43:09 -0500] m4rcu5: masterkorp: normaly people have the tendancy to respond when they have a strong opinion about the subject
[2012-11-19 15:45:01 -0500] jtimberman: bmcgee: check the /var/log/openvpn.log for clues why it couldn't start
[2012-11-19 15:45:15 -0500] bmcgee: funny you mentioned that, just going through it
[2012-11-19 15:45:18 -0500] namidark: Is there a way to specify a recipe version when including another recipe?
[2012-11-19 15:46:40 -0500] bmcgee: jtimberman i added the log to the gist: https://gist.github.com/4111273
[2012-11-19 15:46:51 -0500] bmcgee: it's complaining about a security script level
[2012-11-19 15:47:04 -0500] bmcgee: reading the openvpn docs there was a change in the recent versions
[2012-11-19 15:47:10 -0500] bmcgee: gonna look at the conf the recipe is using
[2012-11-19 15:49:03 -0500] bmcgee: looking at the stack trace it wants a --script-security of 2 or higher. The recipe has an attribute node[:openvpn][:script_security] so I'm trying that to see if it fixes it
[2012-11-19 15:49:03 -0500] jtimberman: bmcgee: its 1 by default
[2012-11-19 15:49:13 -0500] bmcgee: i've set it to 2
[2012-11-19 15:49:18 -0500] bmcgee: provisioning as we speak
[2012-11-19 15:49:20 -0500] jtimberman: :)
[2012-11-19 15:49:22 -0500] jtimberman: i use 3
[2012-11-19 15:49:26 -0500] jtimberman: in my openvpn role
[2012-11-19 15:49:34 -0500] bmcgee: should the recipe not default it to 2
[2012-11-19 15:49:45 -0500] bmcgee: by default you could argue this recipe is 'broken'?
[2012-11-19 15:50:04 -0500] bmcgee: or cookbook even
[2012-11-19 15:50:38 -0500] bmcgee: As expected setting the script security solved the problem
[2012-11-19 15:50:52 -0500] bmcgee: Should I raise a ticket to get the default changed?
[2012-11-19 15:51:05 -0500] jtimberman: The  --script-security  option  was  introduced  in  OpenVPN  2.1_rc9.   For configuration file compatibility with previous OpenVPN versions, use --script-security 3
[2012-11-19 15:51:10 -0500] jtimberman: per hte man page on my local system
[2012-11-19 15:53:00 -0500] bmcgee: jtimberman thoughts on raising a ticket to get the default changed? Or maybe some extra documentation?
[2012-11-19 15:53:28 -0500] jtimberman: I don't think a less secure by default setting is appropriate.
[2012-11-19 15:53:51 -0500] jtimberman: if its because there's another setting in the template configuration that requires that level, the configuration should be changed
[2012-11-19 15:54:18 -0500] bmcgee: fair point. Perhaps a few lines in the docs then?
[2012-11-19 15:54:35 -0500] jtimberman: http://tickets.opscode.com/browse/COOK-1231
[2012-11-19 15:59:24 -0500] corp: so what's heavywater?
[2012-11-19 16:00:00 -0500] jtimberman: corp: a consulting company
[2012-11-19 16:00:27 -0500] jtimberman: corp: they're a partner of opscode: http://www.opscode.com/partnerships/
[2012-11-19 16:00:43 -0500] corp: i see. i take it you guys are working closely with them, given all the cookbooks under their name?
[2012-11-19 16:00:49 -0500] jtimberman: corp: Also, hello! :-D
[2012-11-19 16:01:02 -0500] corp: hi hi :)
[2012-11-19 16:01:08 -0500] corp: i'm back in chef land
[2012-11-19 16:01:08 -0500] jtimberman: What do you mean?
[2012-11-19 16:01:16 -0500] jtimberman: Yes you are, making screencasts and whatnot!
[2012-11-19 16:02:00 -0500] corp: need to do some more of that
[2012-11-19 16:02:14 -0500] corp: didn't even get into chef server
[2012-11-19 16:02:23 -0500] corp: but kinda waiting on chef 11 for that
[2012-11-19 16:03:02 -0500] jtimberman: yeah, no fun doing a screencast on a thing that is going to change dramatically "really soon"
[2012-11-19 16:03:33 -0500] masterkorp: quick someone make a SOON meme with chef server
[2012-11-19 16:04:05 -0500] corp: jtimberman: i managed to get chef 11 running, that's good anyway
[2012-11-19 16:04:11 -0500] jtimberman: :D
[2012-11-19 16:04:35 -0500] jtimberman: i haven't done anything with it myself other than the preview release thing we did a few weeks ago
[2012-11-19 16:05:02 -0500] corp: i assume the rails app web ui may be released soon too?
[2012-11-19 16:05:53 -0500] jtimberman: its already available: https://github.com/opscode/chef-server-webui
[2012-11-19 16:06:05 -0500] corp: oh heh. missed that
[2012-11-19 16:06:32 -0500] corp: still looks like it uses merb though, from the readme
[2012-11-19 16:07:00 -0500] jtimberman: stand back I'm about to try science!
[2012-11-19 16:07:52 -0500] jtimberman: ayup, the 10.16.2 webui is still merb
[2012-11-19 16:09:45 -0500] bmcgee: just got reminded of this there now: http://xkcd.com/705/
[2012-11-19 16:10:10 -0500] corp: well, i dont use it, just wondering
[2012-11-19 16:10:41 -0500] jtimberman: I don't use the webui either
[2012-11-19 16:10:56 -0500] bmcgee: I hear only real men use the command line...
[2012-11-19 16:11:22 -0500] masterkorp: bmcgee: http://ompldr.org/vZ2Rhdg/2012-11-19-161146_1920x1080_scrot.png
[2012-11-19 16:11:32 -0500] masterkorp: bmcgee: do i fit there ?
[2012-11-19 16:11:39 -0500] bmcgee: christ
[2012-11-19 16:11:58 -0500] bmcgee: you remind of a UX dev I recently worked with. He did everything in emacs
[2012-11-19 16:12:05 -0500] bmcgee: his command line fu was EPIC
[2012-11-19 16:12:38 -0500] masterkorp: http://ompldr.org/vZ2Rhdw/2012-11-19-161248_1920x1080_scrot.png
[2012-11-19 16:12:47 -0500] masterkorp: bmcgee: this is vim btw :p
[2012-11-19 16:13:28 -0500] solarce: jtimberman: is ""recipe[yum::epel]"" sufficient in a role to have chef enable epel on amazon linux? because it doesn't seem to be happening for me but from reading https://github.com/opscode-cookbooks/yum/blob/master/README.md it seems like it should?
[2012-11-19 16:14:11 -0500] bmcgee: masterkorp meh :P <insert preferred ageist joke here>
[2012-11-19 16:14:33 -0500] bmcgee: (i have no idea how old masterkorp is)
[2012-11-19 16:14:55 -0500] aspiers: how can I run chef's spec unit tests whilst capturing DEBUG log messages?
[2012-11-19 16:14:56 -0500] masterkorp: 122 years old
[2012-11-19 16:15:29 -0500] bmcgee: did you start out on herman hollerith's counting machine?
[2012-11-19 16:15:29 -0500] railsraider: i am trying to edit a node via knife but it seems like it's not saving my changes
[2012-11-19 16:16:01 -0500] masterkorp: bmcgee: *22 years old
[2012-11-19 16:17:05 -0500] bmcgee: masterkorp: surprising
[2012-11-19 16:17:32 -0500] masterkorp: i lived my youth on very old machines tough
[2012-11-19 16:17:43 -0500] jtimberman: solarce: what isn't working? Have some log output?
[2012-11-19 16:17:49 -0500] masterkorp: totally lived without X until some years ago
[2012-11-19 16:18:16 -0500] bmcgee: explains it then
[2012-11-19 16:18:27 -0500] bmcgee: i have to admit i love my IDE
[2012-11-19 16:18:50 -0500] masterkorp: i have some mods to help me
[2012-11-19 16:19:09 -0500] masterkorp: ctags, snipets, code browing, diff tools
[2012-11-19 16:19:11 -0500] masterkorp: and so on
[2012-11-19 16:19:35 -0500] masterkorp: i use the whole OS as IDE
[2012-11-19 16:19:42 -0500] bmcgee: each to their own, whatever works
[2012-11-19 16:19:51 -0500] masterkorp: could not agree more
[2012-11-19 16:20:09 -0500] solarce: jtimberman: sure, here is the run https://gist.github.com/48ef4ca65c4a388d825b , epel is present, but not enabled
[2012-11-19 16:20:25 -0500] solarce: jtimberman: after the run finished enabled=0 in the epel.repo file
[2012-11-19 16:20:37 -0500] jtimberman: solarce: seems bad
[2012-11-19 16:21:28 -0500] railsraider: nm found my issue bad json
[2012-11-19 16:26:18 -0500] jtimberman: solarce: ah ha. there is a bug!
[2012-11-19 16:26:25 -0500] jtimberman: solarce: arey ou using version 1.0.0 from the community site?
[2012-11-19 16:27:29 -0500] jtimberman: may be this bug - http://tickets.opscode.com/browse/COOK-1772
[2012-11-19 16:27:36 -0500] BryanWB_: solarce: welcome to #chef!
[2012-11-19 16:27:43 -0500] jtimberman: yum cookbook is "on my list" to release
[2012-11-19 16:27:53 -0500] solarce: BryanWB_: yo, thanks!
[2012-11-19 16:28:02 -0500] solarce: jtimberman: i did a git clone from master last night
[2012-11-19 16:28:34 -0500] jtimberman: solarce: oh :/
[2012-11-19 16:29:47 -0500] solarce: jtimberman: at least i think i got master
[2012-11-19 16:29:50 -0500] solarce: i can try again
[2012-11-19 16:30:36 -0500] jeff3p: its my first time working with Chef.  I'm working my way through the "quick start" and I'm stuck.  I created a node, but it's not provisioned and says  "not checked-in".  What am I doing wrong?
[2012-11-19 16:30:39 -0500] masterkorp: new_resource.updated_by_last_action(true) < Does this cause a notify action everytime that provider runs ?
[2012-11-19 16:34:23 -0500] jeff3p: anybody have experience bootstrapping with the hosted chef/
[2012-11-19 16:34:40 -0500] masterkorp: just ask
[2012-11-19 16:35:54 -0500] solarce: jtimberman: the problem seems to be that the lwrp isn't updating the epel.repo that ships with the current amazon linux ami
[2012-11-19 16:36:20 -0500] solarce: jtimberman: if i move it out of /etc/yum.repos.d/ chef happily makes a much smaller epel.repo where enabled=1
[2012-11-19 16:36:57 -0500] jeff3p: how do i get the nodes to provision in Hosted chef?
[2012-11-19 16:38:11 -0500] yfeldblum: masterkorp, yes, of course that's what it does
[2012-11-19 16:38:56 -0500] yfeldblum: masterkorp, (just once though, even if multiple actions each mark the resource as updated-by-last-action)
[2012-11-19 16:39:10 -0500] solarce: jeff3p: you'll need to get the chef-client onto the box using a script or knife
[2012-11-19 16:40:11 -0500] solarce: jeff3p: i took the approach of putting a client.rb and my orgname-validator.pem on s3 and passing a shell script into the ami via user-data, it installs chef-client using omnibus, then pulls down my client.rb and .pem and does the first chef run to register the node with hosted chef
[2012-11-19 16:40:46 -0500] jeff3p: that's what I'm trying to do, but the host isn't up -- I was under the impression that on hosted chef I could try this out with a few nodes... is that not true?   Do i need to use EC2 instead?
[2012-11-19 16:45:34 -0500] solarce: jeff3p: sorry, i misread your initial question
[2012-11-19 16:45:44 -0500] solarce: jeff3p: are you expecting hosted chef to provide you with VMs?
[2012-11-19 16:49:12 -0500] masterkorp: yfeldblum: https://github.com/opscode-cookbooks/nagios/blob/master/providers/nrpecheck.rb
[2012-11-19 16:49:40 -0500] masterkorp: yfeldblum: so in here every time action :add runs the service its updated
[2012-11-19 16:50:08 -0500] yfeldblum: masterkorp, yes of course; that's now how providers should be written ...
[2012-11-19 16:50:15 -0500] masterkorp: yfeldblum: either if the file contents changes or not ?
[2012-11-19 16:50:27 -0500] yfeldblum: masterkorp, yes of course that's what happens
[2012-11-19 16:51:03 -0500] masterkorp: thanks, i was just making sure
[2012-11-19 16:51:12 -0500] masterkorp: i shall add that to my providers
[2012-11-19 16:52:00 -0500] jtimberman: solarce: It seems to be working on my amazon system :/
[2012-11-19 16:52:04 -0500] jtimberman: with the cookbook from master
[2012-11-19 16:52:27 -0500] yfeldblum: masterkorp, that provider isn't written right ... i wouldn't use it as an example
[2012-11-19 16:52:40 -0500] solarce: jeff3p: hosted chef is a hosted chef server which you can use for free with five clients, but those clients are systems you have to setup, be they ec2 instances, vps boxes, or physical servers somewhere
[2012-11-19 16:53:04 -0500] jeff3p: @solaris - yes, that was my understanding.  their free tier says up to 5 nodes -- I'm assume like amazon micro's to get your feet wet.
[2012-11-19 16:53:27 -0500] solarce: jeff3p: no, it's a free hosted chef server, not clients they host for you
[2012-11-19 16:53:35 -0500] jeff3p: @solaris. Thank you for the clarification.. my mistake.
[2012-11-19 16:54:15 -0500] kraM: Hi, how do I verify Boolean in resources like attribute :lol, :kind_of Boolean, ... ?
[2012-11-19 16:54:21 -0500] masterkorp: yfeldblum: can you show me one ? or what are the wrongs of this one ?
[2012-11-19 16:56:07 -0500] solarce: jeff3p: you could use a micro as your test client though, if you have one with amazon's free tier
[2012-11-19 16:56:22 -0500] solarce: jeff3p: or you could just run a linux vm on your laptop/desktop if you have the room
[2012-11-19 16:58:06 -0500] yfeldblum: masterkorp, (1) it repeats the same code instead of making a helper method; (2) it notifies another resource; (3) it declares resources; (4) it always notifies on action :add
[2012-11-19 16:59:34 -0500] masterkorp: yfeldblum: why it does it always notify on :add ?
[2012-11-19 16:59:43 -0500] yfeldblum: masterkorp, https://github.com/opscode-cookbooks/nagios/blob/master/providers/nrpecheck.rb#L38
[2012-11-19 16:59:56 -0500] LinuxHorn: dumb question this morning
[2012-11-19 16:59:59 -0500] corp: anyone using sensu?
[2012-11-19 17:00:05 -0500] masterkorp: yfeldblum: does that afect file notifies ?
[2012-11-19 17:00:15 -0500] yfeldblum: masterkorp, no it's completely unrelated
[2012-11-19 17:00:16 -0500] LinuxHorn: set up a new hosted chef login and org...  i installed chef-client
[2012-11-19 17:00:37 -0500] masterkorp: yfeldblum: hmm, i get it now
[2012-11-19 17:00:53 -0500] yfeldblum: masterkorp, this whole provider would be much better as a definition or as two definitions
[2012-11-19 17:00:55 -0500] LinuxHorn: doing a knife client list ends up in "ERROR: You authenticated successfully to https://api.opscode.com/organizations/nebops as darkwing-n01 but you are not authorized for this action"
[2012-11-19 17:01:02 -0500] LinuxHorn: i can do a knife node list just fine
[2012-11-19 17:01:11 -0500] LinuxHorn: the client looks like it has all the perms
[2012-11-19 17:01:20 -0500] yfeldblum: masterkorp, in terms of if the code were just kept the same
[2012-11-19 17:01:52 -0500] masterkorp: aren't definition deprecated ?
[2012-11-19 17:02:05 -0500] yfeldblum: masterkorp, of course not
[2012-11-19 17:02:17 -0500] j^2: hey
[2012-11-19 17:02:25 -0500] masterkorp: then that foodcritic warning is annoying :)
[2012-11-19 17:02:31 -0500] j^2: so i'm running a chef-client
[2012-11-19 17:02:34 -0500] yfeldblum: masterkorp, it's annoying, and wrong
[2012-11-19 17:02:37 -0500] j^2: and i'm getting this --> https://gist.github.com/0fa3f4991239f7fe61d4
[2012-11-19 17:02:50 -0500] j^2: how can a debug back to tell me what is erroring?
[2012-11-19 17:03:19 -0500] masterkorp: yfeldblum: okay thanks for the info
[2012-11-19 17:03:22 -0500] yfeldblum: j^2, your hr_suite::app recipe, line 21
[2012-11-19 17:03:42 -0500] j^2: yfeldblum: oh
[2012-11-19 17:03:45 -0500] j^2: dang
[2012-11-19 17:03:46 -0500] j^2: ok, thanks
[2012-11-19 17:04:00 -0500] yfeldblum: masterkorp, if you want to use resources inside of a provider action, https://gist.github.com/d85be145f3ff824ccc07 is here to help
[2012-11-19 17:04:44 -0500] yfeldblum: masterkorp, but providers still shouldn't notify other resources on their own, and you still need to use helper methods instead of repeating the same code
[2012-11-19 17:05:30 -0500] yfeldblum: masterkorp, for notifying another resource, a wrapper definition would be good: your recipe calls the definition, and the definition declares a LW resource and also hooks up the notifications
[2012-11-19 17:09:22 -0500] solarce: corp: pop over to #sensu or check out https://www.youtube.com/watch?v=aJGQSXZrxeY
[2012-11-19 17:09:42 -0500] jtimberman: for those following along earlier w/ solarce and i, apparently the yum_repository "epel" resource isn't working because the conditional on the :add action prevents it from being updated, and amazon linux has epel.repo already on the system, so it has to be enabled. it can be enabled by using :update as teh action, which can be handled in a cookbook like this: https://gist.github.com/4f2c5540d78cd4d32a41
[2012-11-19 17:09:46 -0500] corp: solarce: i've been playing with it. just wondering if it's popular among cheffers.
[2012-11-19 17:10:01 -0500] corp: seems like a nice opportunity to remove nagios
[2012-11-19 17:10:15 -0500] solarce: corp: ah
[2012-11-19 17:10:47 -0500] solarce: corp: that youtube link is last week's hangop session, q&a with the main sensu author, @portertech
[2012-11-19 17:11:43 -0500] masterkorp: yfeldblum: thank you
[2012-11-19 17:11:50 -0500] masterkorp: yfeldblum: there is so little docs about this
[2012-11-19 17:11:51 -0500] bmcgee: hey i'm using an encrypted data bag for my users and i'm provisioning a vm on rackspace. It doesn't seem to be creating the users though. I'm wondering is there an extra step i'm missing, like for example how do i get the secret file on the provisioned vm. Does the rackspace knife plugin do that for me?
[2012-11-19 17:13:04 -0500] yfeldblum: masterkorp, it might help to study how the actual providers that actually ship with chef are written: https://github.com/opscode/chef/tree/master/lib/chef/provider
[2012-11-19 17:13:53 -0500] masterkorp: thanks !
[2012-11-19 17:13:58 -0500] masterkorp: that is awesome
[2012-11-19 17:15:18 -0500] yfeldblum: masterkorp, these providers are all normal rubysauce ... no "sub-resources" in them, no mysterious notifications, etc ... just careful code
[2012-11-19 17:15:47 -0500] masterkorp: i see
[2012-11-19 17:15:56 -0500] masterkorp: okay i am on the right way
[2012-11-19 17:16:04 -0500] yfeldblum: masterkorp, it's OK though to use "sub-resources" if you follow the recipe_eval pattern (see my gist) and for one sub-resource to notify another sub-resource (but not to notify a resource in the containing recipe)
[2012-11-19 17:20:40 -0500] LinuxHorn: can someone help?  doing a knife client list ends up in "ERROR: You authenticated successfully to https://api.opscode.com/organizations/nebops as darkwing-n01 but you are not authorized for this action"...  i've got knife.rb, client.rb, and my validator and user pem correct
[2012-11-19 17:20:58 -0500] LinuxHorn: it seems like the darkwing-n01 client has all the correct perms for the org in hosted chef
[2012-11-19 17:33:09 -0500] barnacles: is there a way to access the name of the cookbook within the cookbook itself? Essentially I want to pass the cookbook name to an LWRP
[2012-11-19 17:33:33 -0500] jtimberman: barnacles: cookbook_name
[2012-11-19 17:34:01 -0500] barnacles: jtimberman: You're doing God's work
[2012-11-19 17:34:20 -0500] jtimberman: :)
[2012-11-19 17:46:41 -0500] jflowers: hello
[2012-11-19 17:46:58 -0500] jflowers: I am having a strange issue that I was hoping to get some help with
[2012-11-19 17:47:15 -0500] jflowers: I am trying to install Java through the Java cookbook
[2012-11-19 17:47:27 -0500] jflowers: I want the oracle flavor of java
[2012-11-19 17:48:15 -0500] jflowers: I have set the attribute 'java': { 'install_flavor': 'oracle' }
[2012-11-19 17:48:58 -0500] jflowers: yet when I run chef-client I see it set to openjdk
[2012-11-19 17:50:15 -0500] jflowers: I don't have a clue why this is happening
[2012-11-19 17:50:25 -0500] jflowers: I have don this before without issue
[2012-11-19 17:50:36 -0500] jflowers: not sure what has changed
[2012-11-19 17:52:28 -0500] juliancdunn: jflowers: what recipe are you including? java::oracle ?
[2012-11-19 17:52:36 -0500] jflowers: java
[2012-11-19 17:52:41 -0500] jflowers: the default
[2012-11-19 17:52:43 -0500] juliancdunn: if you include just 'java' you're going to get OpenJDK
[2012-11-19 17:52:56 -0500] jflowers: why is that?
[2012-11-19 17:53:15 -0500] juliancdunn: oh wait, my bad... it includes ['java']['install_flavor']
[2012-11-19 17:53:16 -0500] juliancdunn: hmm
[2012-11-19 17:53:27 -0500] juliancdunn: maybe an attribute of higher precedence overriding what you have set?
[2012-11-19 17:53:33 -0500] jflowers: when I read the code I see that as long as I have install_flavor set to oracle it will load the correct recipe
[2012-11-19 17:53:51 -0500] jflowers: I have tried default and override
[2012-11-19 17:54:12 -0500] JoeGaudet: Anyone had any success with the nexus cookbook on opscode ?
[2012-11-19 17:54:37 -0500] jflowers: does it matter that the run_list is before the attributes in the node config file?
[2012-11-19 17:54:44 -0500] jflowers: @Joe I have
[2012-11-19 17:54:59 -0500] jflowers: ooh
[2012-11-19 17:55:04 -0500] juliancdunn: jflowers: it doesn't matter
[2012-11-19 17:55:11 -0500] jflowers: wait I used the more simple cookbook from github
[2012-11-19 17:56:21 -0500] JoeGaudet: Yeah I saw that one, but it didn't have port configurations in it.
[2012-11-19 17:56:34 -0500] JoeGaudet: I'm using librarian and it just doesn't seem to want to be able to work.
[2012-11-19 17:56:43 -0500] jflowers: I added a bit to it to proxy through apache
[2012-11-19 18:00:28 -0500] jflowers: this node does not seem to be picking up any of the attributes I have configured on it
[2012-11-19 18:00:44 -0500] jflowers: I must be doing it wrong
[2012-11-19 18:02:38 -0500] jflowers: anyone see something wrong with this: https://gist.github.com/4112363
[2012-11-19 18:22:19 -0500] ranjibd: jflowers, default_attributes
[2012-11-19 18:30:57 -0500] jflowers: I moved them to the normal attributes and it seems to be working
[2012-11-19 18:39:29 -0500] fromonesrc: getting "Organization not found. (Error 32033)" with hosted chef trying to regenerate a validation key, is there something up?
[2012-11-19 18:42:44 -0500] fromonesrc: looks like the client was deleted
[2012-11-19 18:48:17 -0500] ssd7: fromonesrc: There are directions on the wiki for how to resolve.  Once sec and I'll get the link
[2012-11-19 18:48:28 -0500] fromonesrc: got it
[2012-11-19 18:48:31 -0500] fromonesrc: thanks ssd7
[2012-11-19 18:48:38 -0500] fromonesrc: had to recreate the client
[2012-11-19 18:49:16 -0500] ssd7: Cool, yeah.  Make sure you also update the permissions on the recreated client (see the red box here: http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-401Unauthorized%28usingvalidatorAPIclient%29)
[2012-11-19 19:00:55 -0500] btm: Opscode Chef Code Review beings soon, join: https://plus.google.com/hangouts/_/c6e430637e3b4c37612f0a1d4630b56a6e29c197?authuser=1&hl=en, watch: http://youtu.be/Mpw9Dy5Bkg0
[2012-11-19 19:11:07 -0500] ekristen: anyone in here use chef deploy resources?
[2012-11-19 19:11:20 -0500] ekristen: deploying git or subversion repors?
[2012-11-19 19:11:21 -0500] ekristen: repos*
[2012-11-19 19:25:51 -0500] atrius: so.. i just rebuilt my chef VM.. am about to start installing cookbooks... is it better to use knife or is it better to use something like Berkshelf?
[2012-11-19 19:29:01 -0500] erratic: is the site down?
[2012-11-19 19:30:47 -0500] djbell: anyone know where I can find documentation for upgrading from chef 0.6 to Chef 10 -- at some point @attributes got dropped or implemented differently, so I keep getting "undefined method `[]' for nil:NilClass" errors in my attributes/recipe.rb files
[2012-11-19 19:31:09 -0500] djbell: google has not been my friend on this one
[2012-11-19 19:31:52 -0500] djbell: er, @attribute, not @attributes, just to be clear
[2012-11-19 19:39:49 -0500] bemu: djbell: I would email the list with that question.
[2012-11-19 19:40:19 -0500] djbell: bemu:  thanks
[2012-11-19 19:40:44 -0500] bemu: There aren't going to be a lot of people who can help with that, and the chances you'll catch one on here is relatively small. You will undoubtedly run into further issues after your current one.
[2012-11-19 19:41:08 -0500] bemu: The good news is that things have gotten a lot better!
[2012-11-19 19:42:58 -0500] corp2: djbell: stuff with @ before it was all changed to direct methods, so things like @attributes should just be 'attributes'
[2012-11-19 19:43:11 -0500] djbell: k, thanks
[2012-11-19 19:43:12 -0500] corp2: err, in that caes, it should be 'node'
[2012-11-19 19:43:15 -0500] corp2: instead of attributes
[2012-11-19 19:43:22 -0500] erratic: lol, /usr/local/rvm/gems/ruby-1.9.2-p320/gems/json-1.6.1/ext/json/ext/json/ext/parser.so: [BUG] Segmentation fault ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]
[2012-11-19 19:43:25 -0500] corp2: if you're inside a template, you will still want to use @node
[2012-11-19 19:44:48 -0500] corp: wonder why i have +v here
[2012-11-19 19:45:05 -0500] wassy121: obviously super-important
[2012-11-19 19:46:01 -0500] wassy121: erratic, looks like that parser.so is compiled against ruby 1.9.2, and running from ruby 1.8.7?
[2012-11-19 19:51:07 -0500] erratic: I keep getting this from teh website Error 354 (net::ERR_CONTENT_LENGTH_MISMATCH): The server unexpectedly closed the connection.
[2012-11-19 19:51:18 -0500] erratic: am I getting hacked
[2012-11-19 19:52:04 -0500] erratic: weird
[2012-11-19 19:56:46 -0500] jstump: Anyone have a solid idea on how to recover from deleting ORGANIZATION-validator.pem from hosted chef?
[2012-11-19 19:57:14 -0500] bemu: Pretty sure you can just generate a new one.
[2012-11-19 19:57:21 -0500] jstump: bemu: One would think.
[2012-11-19 19:57:30 -0500] jstump: bemu: But the "client" is actually gone as well.
[2012-11-19 19:57:42 -0500] erratic: why is it so hard to notify a ruby block whose default action is :nothing to do something useful
[2012-11-19 19:57:53 -0500] jstump: bemu: So you have client ORGANIZATION-validator and then the key (different) from the organization key you regenerate elsewhere.
[2012-11-19 19:58:01 -0500] erratic: cant find anything useful on google
[2012-11-19 19:58:13 -0500] erratic: just people doing mental gymnastics
[2012-11-19 19:58:30 -0500] matschaffer: erratic: usually that works fine. Though I try to avoid ruby_blocks
[2012-11-19 19:58:43 -0500] erratic: I have a special case where I need to use one
[2012-11-19 19:58:54 -0500] matschaffer: Sooo any omnios users? Looks like the user resource's password param doesn't work :(
[2012-11-19 19:58:54 -0500] erratic: or something like to prevent something from getting set
[2012-11-19 19:58:58 -0500] erratic: hang on I'll show you
[2012-11-19 19:59:28 -0500] erratic: https://gist.github.com/854043e85e8e3ac33735
[2012-11-19 20:00:01 -0500] btm: jstump: http://wiki.opscode.com/display/chef/Validator+client+deleted ?
[2012-11-19 20:00:05 -0500] matschaffer: jtimberman: I see some omnios mentions from you. Do you know a way to get a user resource's password param working? Seems to be trying to set the user project instead
[2012-11-19 20:00:19 -0500] erratic: I found that new_resource / updated_by_last_action but the example didn't work and none of the combinations I can think of that might make sense do either
[2012-11-19 20:00:20 -0500] bemu: jstump: manage.opscode.com, click organizations, click regenerate validation key?
[2012-11-19 20:00:29 -0500] erratic: also the documentation is really difficult to decipher
[2012-11-19 20:01:46 -0500] erratic: http://rdoc.info/github/opscode/chef/Chef/Provider/RubyBlock
[2012-11-19 20:02:40 -0500] ssd7: erratic: Try: http://docs.opscode.com/resource_ruby_block.html
[2012-11-19 20:02:53 -0500] matschaffer: erratic: are you sure the bash resource is firing?
[2012-11-19 20:02:56 -0500] jstump: btm: Giving that a shot. I think the permissions is what I was missing.
[2012-11-19 20:03:12 -0500] jstump: bemu: Yeah, I did that, but didn't do the permissions stuff (as btm's docs point out).
[2012-11-19 20:03:20 -0500] erratic: that just has the :create example in which it will run before it even runs glibc
[2012-11-19 20:03:33 -0500] matschaffer: it looks basically right, but it'll only notify if it runs (i.e., if the not_if returns 0)
[2012-11-19 20:03:50 -0500] matschaffer: also, I don't really recommend using chef like this
[2012-11-19 20:03:53 -0500] erratic: matschaffer yes
[2012-11-19 20:03:57 -0500] bemu: got it.
[2012-11-19 20:03:58 -0500] erratic: k
[2012-11-19 20:04:13 -0500] matschaffer: erratic: it's usually a lot safer to just have chef write out and call a build script
[2012-11-19 20:04:30 -0500] erratic: Im doing this.
[2012-11-19 20:04:38 -0500] jstump: bemu, btm: The permissions rejiggering worked. Thanks!
[2012-11-19 20:04:47 -0500] matschaffer: so since your'e only changing ENV, what effect are you trying to cause?
[2012-11-19 20:05:05 -0500] matschaffer: setting ENV for every following bash call or something?
[2012-11-19 20:05:29 -0500] erratic: I'll show you when Im done
[2012-11-19 20:05:29 -0500] btm: Live cookbook review starting, join: https://plus.google.com/hangouts/_/f417b0af477106723497ae5a4a099e528f6a7ac1?authuser=1&hl=en, watch: http://youtu.be/6BdvG36Q_LQ
[2012-11-19 20:06:03 -0500] erratic: matschaffer no the idea is to set it to use the cross compiler thats built earlier after glibc finishes
[2012-11-19 20:06:57 -0500] erratic: give me a sec though I might have had it working and just not realized it
[2012-11-19 20:07:02 -0500] matschaffer: k
[2012-11-19 20:08:29 -0500] erratic: funny I've never had a computer this fast
[2012-11-19 20:08:43 -0500] erratic: it takes like 5 minutes to build up to pass 2 of binutils :D
[2012-11-19 20:09:05 -0500] erratic: its a mac pro dual quad core xeon with 16 gigs of ram running linux I bought it on CL a few months ago
[2012-11-19 20:10:23 -0500] prometheusmobile: is there a way from either knife data bag list  or knife data bag show  that one could tell if a databag in the output list is encrypted without having to actually open the data bag item? I did not see any such flags in the help, anyone have a clever way to determine this?
[2012-11-19 20:11:32 -0500] erratic: matschaffer https://github.com/paigeadele/erraticOS/tree/master/usr/src/chef
[2012-11-19 20:13:41 -0500] matschaffer: erratic: ha, nice. Chef to build an OS.
[2012-11-19 20:14:13 -0500] matschaffer: so did you have it working?
[2012-11-19 20:14:31 -0500] matschaffer: might be worth just having the ruby block write a file or something to make sure it's getting called
[2012-11-19 20:15:19 -0500] matschaffer: cause it could be that ENV stuff is happening too late. Are you familiar with http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run ?
[2012-11-19 20:16:35 -0500] erratic: I gotta fix some pathes and stuff in here
[2012-11-19 20:17:11 -0500] dylguy: We're trying to iterate through an array in Ruby and have directives run, but running into a problem like this:  https://gist.github.com/4113604
[2012-11-19 20:17:49 -0500] dylguy: Any ideas or suggestions on what we could be doing wrong would be very helpful.  Thanks!
[2012-11-19 20:18:16 -0500] Death_Syn: hmm... anyone know how to check to see if a recipe exists from another recipe?  Need a conditional to include a recipe for a node if it exists
[2012-11-19 20:21:07 -0500] matschaffer: dylguy: why is the first part a problem?
[2012-11-19 20:21:18 -0500] matschaffer: usually you want that sort of thing to run at recipe load time
[2012-11-19 20:22:49 -0500] matschaffer: Death_Syn: maybe try begin/rescue around the include_recipe line?
[2012-11-19 20:22:54 -0500] matschaffer: just a guess
[2012-11-19 20:24:34 -0500] Death_Syn: hmm
[2012-11-19 20:25:24 -0500] dylguy: matschaffer:  come to think of it, there are some "bash" blocks within the ruby array.  check out the top block here:  https://gist.github.com/4113604
[2012-11-19 20:26:44 -0500] matschaffer: dylguy: the bash definition itself should run during recipe load. though the code would load during convergence
[2012-11-19 20:26:49 -0500] erratic: I got an rvm question for somebody if somebody has an answer
[2012-11-19 20:26:59 -0500] matschaffer: btm: are the youtube comments live?
[2012-11-19 20:27:34 -0500] yfeldblum: Death_Syn, why don't you know if a recipe exists?
[2012-11-19 20:28:24 -0500] erratic: im running as root, in screen multiple sessions, in one I have chef-server -l debug ect ect, I cant start chef-server-webui though because something about the libeventmachine and I'm just wondering if there is a way from here I can use RVM to temporarily switch to an environment without messing up the environment that the other apps are running in and without having to login as a diff user
[2012-11-19 20:29:59 -0500] Death_Syn: mattray: I supervise my ntpd with runit.  Keeps it alive
[2012-11-19 20:30:14 -0500] mattray: Death_Syn: the fact that you have to do that is troubling right?
[2012-11-19 20:30:54 -0500] Death_Syn: mattray: yes
[2012-11-19 20:31:10 -0500] Death_Syn: but my ntpd doesn't die much
[2012-11-19 20:31:16 -0500] Death_Syn: in fact, i can't remember the last time it happened
[2012-11-19 20:31:21 -0500] Death_Syn: i just supervise everything, generally
[2012-11-19 20:31:38 -0500] Death_Syn: especially when dealing with ISC stuff
[2012-11-19 20:31:45 -0500] yfeldblum: Death_Syn, what do you supervise runit with?
[2012-11-19 20:31:53 -0500] Death_Syn: yfeldblum: runit is PID 1
[2012-11-19 20:32:01 -0500] erratic: nice
[2012-11-19 20:32:10 -0500] mattray: Death_Syn: mine keeps dying every couple of weeks, just to annoy me. Then the clock skews and I can't chef-client
[2012-11-19 20:32:42 -0500] Death_Syn:     1 root      20   0   156    4    0 S   0.0  0.0   0:30.98 runit
[2012-11-19 20:32:43 -0500] mattray: so I could daemonize the chef-client to let it bring ntpd back to life, or use runit
[2012-11-19 20:33:49 -0500] Death_Syn: mattray: does ntpd not kick an error into the log somewhere?
[2012-11-19 20:34:19 -0500] mattray: Death_Syn: nothing's showing up via grep and there doesn't appear to be a verbose flag to add to ntpd
[2012-11-19 20:35:10 -0500] Death_Syn: ntpd would use a debug flag, I'm pretty sure
[2012-11-19 20:36:34 -0500] jflowers: why would the attribute fqdn be empty or not set?
[2012-11-19 20:36:46 -0500] mattray: Death_Syn: man ntpd reveals nothing
[2012-11-19 20:37:20 -0500] matschaffer: btm: apologies for popping in and out. Trying to figure out if the youtube comments are somehow synced with the chat. Looks like no
[2012-11-19 20:38:21 -0500] miah: hi
[2012-11-19 20:39:05 -0500] mattray: howdy
[2012-11-19 20:40:18 -0500] jflowers: is fqdn something that needs to be set or is it progromatically determined?
[2012-11-19 20:40:26 -0500] Death_Syn: mattray: if using ISC, -d specifies debug, with verbosity increasing with each subsequent -d
[2012-11-19 20:40:36 -0500] Death_Syn: i think ohai pulls fqdn
[2012-11-19 20:42:22 -0500] jflowers: from where? /etc/hosts?
[2012-11-19 20:42:39 -0500] Death_Syn: dunno, would have to dig into the source to see
[2012-11-19 20:42:59 -0500] barnacles: I don't think it's from /etc/hosts
[2012-11-19 20:43:16 -0500] barnacles: jflowers: what does the following output from the terminal: ohai | grep fqdn
[2012-11-19 20:45:07 -0500] jflowers: nothing
[2012-11-19 20:45:37 -0500] miah: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/hostname.rb
[2012-11-19 20:45:48 -0500] miah: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/linux/hostname.rb
[2012-11-19 20:47:06 -0500] jflowers: that seems to say that it uses the command hostname
[2012-11-19 20:47:18 -0500] miah: in linux, yes.
[2012-11-19 20:47:19 -0500] jflowers: I do get valid out for the hostname command
[2012-11-19 20:47:20 -0500] matschaffer: any advice on working on a solaris user provider?
[2012-11-19 20:47:39 -0500] jflowers: this is a linux box...
[2012-11-19 20:47:45 -0500] barnacles: how about hostname --fqdn?
[2012-11-19 20:48:50 -0500] jflowers: I get hostname: Unknown host
[2012-11-19 20:48:57 -0500] barnacles: hmm
[2012-11-19 20:51:34 -0500] PRK_nz: Hey, I'm getting some HTTP 500 errors from hosted Chef. Just wondering if there is an issue atm?
[2012-11-19 20:58:55 -0500] jflowers: it was my server's hosts file
[2012-11-19 20:59:00 -0500] jflowers: it was misconfigured
[2012-11-19 21:01:29 -0500] barnacles: Glad you figured it out
[2012-11-19 21:17:37 -0500] btm: matschaffer: No worries. We try not to use the comments, I have a hard time following them. Notably there isn't a good way for people viewing to communicate into the session without joining and speaking up right now.
[2012-11-19 21:22:15 -0500] poseid: hello
[2012-11-19 21:22:34 -0500] poseid: I want to chef-solo a basic dev machine on ubuntu
[2012-11-19 21:22:46 -0500] poseid: it's basically running lot's of apt-get commands
[2012-11-19 21:23:09 -0500] poseid: however, it seems I must pre-install git... or can I let chef do this?
[2012-11-19 21:23:45 -0500] leifmadsen: poseid: you can let chef do that
[2012-11-19 21:23:52 -0500] leifmadsen: package "git" do
[2012-11-19 21:23:54 -0500] leifmadsen:   action : install
[2012-11-19 21:23:55 -0500] leifmadsen: end
[2012-11-19 21:24:23 -0500] poseid: cool, thanks
[2012-11-19 21:24:27 -0500] yfeldblum: or just `package "git"`
[2012-11-19 21:24:36 -0500] miah: also. action :install
[2012-11-19 21:24:42 -0500] miah: no spaces
[2012-11-19 21:24:52 -0500] yfeldblum: miah, one space, not two spaces :D
[2012-11-19 21:25:22 -0500] miah: 'action :install' has one space yes. =)
[2012-11-19 21:25:43 -0500] kryptek: hey all
[2012-11-19 21:25:50 -0500] poseid: hmm.. in the tutorial that i was following... there is a /etc/chef/node.json
[2012-11-19 21:25:59 -0500] poseid: do I need to say   "run_list": [ "recipe[git]" ] }
[2012-11-19 21:26:01 -0500] poseid: ?
[2012-11-19 21:26:54 -0500] zuhaib: Anyone getting weird 403 on manage chef?  Created a new env, node and getting 403 when it tries to do node.save.  Other nodes are fine yet we have not tweaked anything with perms
[2012-11-19 21:31:01 -0500] jkyle: I've created a database resource that other cookbooks can use to create db's. I'd like to cache the names of created db's and other metadata in the db node's attributes
[2012-11-19 21:31:21 -0500] SpaceChannel5: EHLO
[2012-11-19 21:31:31 -0500] newuser: hello all!  would chef be suitable for update management of linux (ubuntu) workstations?  we really would only be using chef to run apt-get upgrade on about 50 workstations every other week.
[2012-11-19 21:31:36 -0500] jkyle: but the resource block is run with the requesting node's permissions, which can't persist data into the db node.
[2012-11-19 21:31:56 -0500] jkyle: newuser: why not just push a cron job?
[2012-11-19 21:32:45 -0500] jkyle: using chef for that would be like using a lamborghini to cross the street
[2012-11-19 21:32:46 -0500] SpaceChannel5: Anyone able to help with a CentOS 6 prob? Got it all installed, but ruby-client is failing on runit: Recipe Compile Error in /var/chef/cache/cookbooks/chef-client/recipes/service.rb
[2012-11-19 21:33:17 -0500] miah: there is no runit for Centos/RHEL
[2012-11-19 21:33:31 -0500] miah: unless you have your own local build..
[2012-11-19 21:33:59 -0500] newuser: we might end up keeping some configuration files up to date, or at least to ensure that the users (all with sudo) don't continually break ldap and winbind.  keeping the workstations upgraded is the first step, though.
[2012-11-19 21:34:57 -0500] SpaceChannel5: so best bet is to either build a runit package or override?
[2012-11-19 21:35:15 -0500] miah: or don't use runit as your init_style on centos/rhel
[2012-11-19 21:36:11 -0500] SpaceChannel5: okay gotcha saw something in the install guide about that recommending runit, will read up on alternatives
[2012-11-19 21:36:17 -0500] newuser: we've recently started using SCCM for our windows workstations (by far the majority of our workstations) and management likes the idea of using something similar to manage our linux workstations
[2012-11-19 21:37:07 -0500] yfeldblum: newuser, it would be useful for the goal-driven configuration management, and maybe for putting `apt-get upgrade` in cron or allowing you a convenient way to do ssh in a for-loop and run it on all servers yourself
[2012-11-19 21:37:38 -0500] yfeldblum: jkyle, some people do use lamborghinis to cross streets
[2012-11-19 21:38:18 -0500] jkyle: yfeldblum: right. I'll leave it as an open question on whether that's a wise use of resources.
[2012-11-19 21:39:18 -0500] yfeldblum: jkyle, depends completely on the value scale of the person crossing the street; there's no way for one person to judge that for another
[2012-11-19 21:39:24 -0500] SpaceChannel5: daemontools a better choice on RHEL?
[2012-11-19 21:39:51 -0500] miah: SpaceChannel5: if its available, then probably
[2012-11-19 21:40:58 -0500] yfeldblum: jkyle, regarding caching ... typically you will want to come up with the name of the db early on in the recipe, and tell the various resources about the name you came up with ... you can query some other source to find out what the name is, inspect node attributes because a role might have set it, etc ...
[2012-11-19 21:41:30 -0500] SpaceChannel5: just regular init available it seems
[2012-11-19 21:42:18 -0500] jkyle: I'd say having enough resources to be able to afford taking a space shuttle across the street by way of the moon doesn't mean it's a relative judgement as to how practical that choice is. but, I always view elegant, simple solutions as one indication of good engineering
[2012-11-19 21:42:47 -0500] jkyle: yfeldblum: k, was looking like that's would be the route. . . have to bake it into the db's recipes.
[2012-11-19 21:43:33 -0500] yfeldblum: jkyle, that's the route chef is geared around: figure everything out up front; declare resources, setting their resource attributes based on the things you figured out up front
[2012-11-19 21:43:38 -0500] miah: SpaceChannel5: pretty sure daemontools is available in epel.
[2012-11-19 21:44:03 -0500] SpaceChannel5: got no results searching on daemon in epel
[2012-11-19 21:44:17 -0500] mattupstate: is the chef_handler LWRP part of chef? is the opscode cookbook not required?
[2012-11-19 21:44:39 -0500] SpaceChannel5: unless it's daemonize
[2012-11-19 21:45:12 -0500] jtimberman: mattupstate: chef_handler LWRP is in the chef_handler cookboko
[2012-11-19 21:46:03 -0500] mattupstate: jtimberman: ah
[2012-11-19 21:46:05 -0500] mattupstate: right
[2012-11-19 21:46:07 -0500] mattupstate: missed the link in the docs
[2012-11-19 21:46:14 -0500] jkyle: I'll probably just hae the db query itself and cache things that way
[2012-11-19 21:47:01 -0500] jkyle: though, I was tempted to auto-generate random passwords for db users and cache those...I'd have to bounce the pass from node to node to do that though
[2012-11-19 21:47:35 -0500] mattupstate: trying to use it and chef is telling me the resource isn't found
[2012-11-19 21:50:39 -0500] poseid: anyone interested in teaching me 1-1 on how to get going with a chef dev machine?
[2012-11-19 21:50:53 -0500] bemu: Too much live action roleplaying. :)
[2012-11-19 21:51:12 -0500] bemu: poseid: You'll get more interest in doing something like that if you make clear the compensation you're offering.
[2012-11-19 21:51:37 -0500] bemu: (I personally have no interest, however)
[2012-11-19 21:51:41 -0500] poseid: I'll see teaching as a job, so, I would pay you
[2012-11-19 21:52:20 -0500] poseid: I think I need 2-3 hours
[2012-11-19 21:52:23 -0500] poseid: by skype
[2012-11-19 21:52:34 -0500] bemu: If you don't get a response here, make sure to email the mailing list. I'm sure someone would take you up on it for a reasonable rate.
[2012-11-19 21:52:38 -0500] poseid: $50/hour ?
[2012-11-19 21:52:47 -0500] bemu: Sounds fair.
[2012-11-19 21:59:11 -0500] till__: hey
[2012-11-19 21:59:23 -0500] till__: anyone know how to set custom mirros through bento?
[2012-11-19 21:59:35 -0500] till__: trying to figure out where to inject
[2012-11-19 21:59:48 -0500] till__: should i just sed in update.sh ?
[2012-11-19 22:03:02 -0500] poseid: ok, thanks +bemu
[2012-11-19 22:03:40 -0500] poseid: I'll check some friends and post in the mailing list later... basically, I want a setup for arangodb: http://www.arangodb.org/
[2012-11-19 22:04:11 -0500] poseid: to build it from scratch, and afterwards some JVM chef recipes for Neo4j comparisons...
[2012-11-19 22:04:48 -0500] bemu: No problem!
[2012-11-19 22:04:51 -0500] bemu: and good luck
[2012-11-19 22:11:44 -0500] iverson0881: hey so what do people normally do here for getting the non default route ip as part of chef searches?
[2012-11-19 22:12:51 -0500] iverson0881: erikh was kindly able to put in some sample code however i'm not sure how one would make it part of the chef search
[2012-11-19 22:12:53 -0500] SpaceChannel5: bit stuck, trying to set default["chef_client"]["init_style"]  = "init" on a centos box, but it's insisting on runit and no idea what file the override is buried in
[2012-11-19 22:12:53 -0500] iverson0881: https://gist.github.com/b896b5aca601060d67a4
[2012-11-19 22:17:21 -0500] SpaceChannel5: fixed thanks for your help earlier miah
[2012-11-19 22:22:51 -0500] uncommitted: could one of you do a sanity check for me? I've got a recipe that seems to never hit http://pastebin.com/38utdYD0
[2012-11-19 22:23:09 -0500] mattupstate: anyone experience a node's free memory drastically decrease after a chef-client run?
[2012-11-19 22:23:17 -0500] uncommitted: the not_if always seems to be true, unless I actually hardcode the path
[2012-11-19 22:23:35 -0500] mattupstate: and eventually after a few runs, chef-client can't run because there isnt' enough free memory?
[2012-11-19 22:24:06 -0500] wassy121: mattupstate, Does "free -m" show buffers/cache increasing as the "free memory" decreases?
[2012-11-19 22:24:37 -0500] wassy121: as-in, it's allocating memory, then just letting it sit dirty in the cache (which is appropriate)?
[2012-11-19 22:24:48 -0500] mattupstate: wassy121: let me check
[2012-11-19 22:28:49 -0500] wassy121: either way, it shouldn't "eventually not run because of not enough memory"
[2012-11-19 22:29:21 -0500] mattupstate: wish i could say that was the case
[2012-11-19 22:31:27 -0500] mattupstate: wassy121: http://pastebin.com/H89fQDxw
[2012-11-19 22:32:23 -0500] wassy121: mattupstate, wow, yeah.  That surely looks bad.
[2012-11-19 22:32:27 -0500] wassy121: It shouldn't do that :)
[2012-11-19 22:32:33 -0500] mattupstate: right?
[2012-11-19 22:32:56 -0500] erikh: sounds like you have a leak in one of your cookbooks
[2012-11-19 22:33:24 -0500] mattupstate: erikh: yeah, and i can't figure out which one
[2012-11-19 22:33:24 -0500] yfeldblum: erikh, ink running all over the page?
[2012-11-19 22:33:27 -0500] wassy121: I bet the memory would free if you killed the chef-client daemon.  And +1 erikh
[2012-11-19 22:34:14 -0500] erikh: mattupstate: well, get ready for "fun" !
[2012-11-19 22:34:35 -0500] erikh: first, i'd try converging each cookbook multiple times independently. that's probably the simplest approach
[2012-11-19 22:34:46 -0500] PRK_nz: With hosted Chef, when bootstrapping a new node, but you already have the node data on the server, it'll create a new client (as expected). But then the new client doesn't have the correct permissions on the existing node, does that sound right? If so, what permissions does it need (or would it set by default if the node didn't exist?)
[2012-11-19 22:35:03 -0500] erikh: if that doesn't yield anything.... how familiar are you with gdb?
[2012-11-19 22:35:38 -0500] mattupstate: erikh: not familiar at all
[2012-11-19 22:35:43 -0500] PRK_nz: I'm guessing at least read/update (but maybe not delete/grant)
[2012-11-19 22:36:05 -0500] PRK_nz: I could add a new node/client, but I don't have time right now :(
[2012-11-19 22:36:59 -0500] mattupstate: "top" doesn't want to show me whats taking up the memory either
[2012-11-19 22:37:06 -0500] mattp: uncommitted: can you verify what interface_path and bridge_path get set to -e.g. with calls to Chef::Log.info (or manually with shef)
[2012-11-19 22:38:20 -0500] uncommitted: so it seems that it only looks at the first array value, weird so if I have an array of [ "98", "99", "100" ] it will do 98, but won't continue the loop
[2012-11-19 22:41:14 -0500] erikh: mattupstate: I strongly recommend taking the divide-and-conquer approach then
[2012-11-19 22:41:17 -0500] kryptek: uncommitted,  Looking at your File.exists?, why are you using that class?
[2012-11-19 22:41:18 -0500] PRK_nz: Could someone please look at a node of theirs and tell me what the permissions the matching client have (hosted)?
[2012-11-19 22:41:45 -0500] ranjibd: kryptek, else it will pick up chef's file class
[2012-11-19 22:41:55 -0500] ranjibd: the file  resource.
[2012-11-19 22:41:57 -0500] kryptek: eh nm
[2012-11-19 22:42:07 -0500] kryptek: I was thinknig your variable (since the name was path), was a directory
[2012-11-19 22:42:09 -0500] uncommitted: kryptek, just checking to see if the file already exists if not, create it
[2012-11-19 22:42:14 -0500] kryptek: In that case I was gonna suggest you use 'Dir.exists?'
[2012-11-19 22:42:26 -0500] mattupstate: erikh: yeah, just start running recipes on their own and try and find a culprit?
[2012-11-19 22:42:50 -0500] erikh: yep
[2012-11-19 22:42:52 -0500] red5|ryan: NoMethodError: undefined method `run_list' for nil:NilClass
[2012-11-19 22:42:58 -0500] erikh: make sure to give each recipe several runs
[2012-11-19 22:43:15 -0500] erikh: ruby's gc (to simplify a bit) frees memory when it feels like it
[2012-11-19 22:43:37 -0500] erikh: not necessarily when the object doesn't exist anymore. so, you could get false positives if you don't run it a few times and give ruby an opportunity to clean up
[2012-11-19 22:44:03 -0500] ranjibd: uncommitted,  why you are checking for the empty array ? If the arry is empty .. it wont iterate any way
[2012-11-19 22:44:32 -0500] mattupstate: erikh: cheers
[2012-11-19 22:44:35 -0500] yfeldblum: erikh, ruby's GC does not release virtual pages back to the OS; the OS can simply page out quiet pages of a ruby process to page in something else
[2012-11-19 22:44:54 -0500] ranjibd: uncommitted, can you use Chef::Log.warn( node["kvm"]["vlans"]) to check whats inside the array?
[2012-11-19 22:44:55 -0500] uncommitted: ranjibd, Oh, I suppose habit. Do you think that's possibly my issue?
[2012-11-19 22:45:28 -0500] erikh: yfeldblum: garbage collectors have absolutely nothing to do with a kernel's VM implementation
[2012-11-19 22:45:32 -0500] ranjibd: uncommitted, no. I dont think so.. use Chef::Log.warn  to print the array
[2012-11-19 22:45:52 -0500] erikh: and yes, ruby's gc calls free(). it does it a little too rarely for my taste, but it does do it.
[2012-11-19 22:46:13 -0500] ranjibd: uncommitted,  i'll not have that empty check.. also i'll make the bridge and logical interfaces as template resource.
[2012-11-19 22:46:33 -0500] ranjibd: uncommitted, with the vlan passed as a variable
[2012-11-19 22:46:36 -0500] mattupstate: erikh: can running chef-client manually on a node that has the daemonized client running cause this to happen?
[2012-11-19 22:46:56 -0500] erikh: mattupstate: unlikely.
[2012-11-19 22:47:00 -0500] mattupstate: ok
[2012-11-19 22:47:18 -0500] erikh: you can set up an interval for chef-client, though.. I can't remember what the argument is but it's there.
[2012-11-19 22:47:28 -0500] erikh: so you could set it really low (like 1 minute) and wait a few
[2012-11-19 22:47:53 -0500] mattupstate: so if all that memory is being used why won't "top" show me whats using it?
[2012-11-19 22:47:56 -0500] ranjibd: erikh, all nodes will talk to chef server at the same time?
[2012-11-19 22:48:37 -0500] uncommitted: ranjibd, the array prints as expected: ["99", "100", "101"], when using Chef::Log.warn( vlan ) inside the loop it iterates just as expected
[2012-11-19 22:48:59 -0500] erikh: ranjibd: he's debugging a memory leak in a chef recipe
[2012-11-19 22:49:00 -0500] yfeldblum: erikh, when?
[2012-11-19 22:49:36 -0500] ranjibd: mattupstate, vmstat -S ?
[2012-11-19 22:49:42 -0500] uncommitted: mattupstate, top then "M" to sort by memory?
[2012-11-19 22:50:02 -0500] erikh: yfeldblum: https://github.com/ruby/ruby/blob/trunk/gc.c#L384
[2012-11-19 22:50:07 -0500] erikh: that's one of about 200 calls in there.
[2012-11-19 22:50:41 -0500] mattupstate: uncommitted: biggest thing was mysql taking up 80-90MB
[2012-11-19 22:50:47 -0500] ranjibd: uncommitted, the network service resource should be outside the  each block
[2012-11-19 22:52:38 -0500] ranjibd: uncommitted, can you add vlan variable name on the resource name itself.. right now its making the resource name same for all vlans, and that can screw things up
[2012-11-19 22:53:30 -0500] uncommitted: ranjibd, okay, i've moved the resource outside
[2012-11-19 22:54:05 -0500] uncommitted: maybe I'll make this a template as you've suggested
[2012-11-19 22:56:30 -0500] yfeldblum: erikh, interesting
[2012-11-19 22:58:50 -0500] mattupstate: after a few chef-client runs "ps aux" includes a whole bunch of lines that look like this
[2012-11-19 22:58:54 -0500] mattupstate: "root      1416  0.0  0.0      0     0 ?        Zsl  22:54   0:00 [chef-client] <defunct>"
[2012-11-19 22:59:03 -0500] mattupstate: there's a bout 20 of them
[2012-11-19 23:01:31 -0500] mattupstate: that doesn't seem normal
[2012-11-19 23:03:26 -0500] chefologist: hi when running vagrant up, with chef I receive: HTTP Request Returned 409 Conflict: Client already exists. assistance would be great
[2012-11-19 23:03:33 -0500] erikh: mattupstate: are you running them manually, or are they running as a daemon run?
[2012-11-19 23:03:45 -0500] mattupstate: manually at the moment
[2012-11-19 23:03:55 -0500] erikh: hmm
[2012-11-19 23:04:14 -0500] erikh: run one (as root) with strace -f
[2012-11-19 23:04:18 -0500] erikh: e.g., strace -f chef-client
[2012-11-19 23:04:28 -0500] erikh: tee the output to a log or something
[2012-11-19 23:04:36 -0500] juliancdunn: chefologist: you probably already have a client by that name on your chef server
[2012-11-19 23:04:42 -0500] juliancdunn: knife client delete it first
[2012-11-19 23:05:12 -0500] erikh: what you're looking for is forks that create a pid but don't actually run anything after the fork
[2012-11-19 23:05:17 -0500] erikh: well, most likely
[2012-11-19 23:05:26 -0500] erikh: the -f tracks forks
[2012-11-19 23:05:40 -0500] mattupstate: ok
[2012-11-19 23:05:52 -0500] chefologist: juliancdunn: yes I just checked, I do, I am reloading now, and I get this error:  Your validation client is not authorized to create the client for this node (HTTP 403)
[2012-11-19 23:06:27 -0500] juliancdunn: chefologist: do you have a validation.pem on the vagrant instance that matches the one on the Chef server?
[2012-11-19 23:07:06 -0500] chefologist: juliancdunn: how do I get this pem file, and how do I automate this process?
[2012-11-19 23:07:19 -0500] juliancdunn: chefologist: it's on your Chef server
[2012-11-19 23:07:32 -0500] juliancdunn: and in your Vagrantfile you can specify the path to the validation key
[2012-11-19 23:08:05 -0500] chefologist: juliancdunn: I am using hosted-chef, and I already have a vagrant box running perfectly, its when I fire up a new one that this issue occurs
[2012-11-19 23:09:07 -0500] juliancdunn: chefologist: it's because your client name is not unique when you fire up new Vagrant boxes
[2012-11-19 23:09:46 -0500] chefologist: juliancdunn: how do I make it unique?
[2012-11-19 23:10:13 -0500] juliancdunn: set config.vm.host_name to something that isn't registered in hosted chef yet
[2012-11-19 23:10:27 -0500] juliancdunn: and make sure to delete the client and node after you "vagrant destroy"
[2012-11-19 23:12:49 -0500] demonccc: Hi
[2012-11-19 23:12:56 -0500] demonccc: I'm having a problem
[2012-11-19 23:13:28 -0500] jtimberman: chefologist: or delete the client and node after you do a vagrant destroy
[2012-11-19 23:13:43 -0500] demonccc: some times when I install chef in a LXC container when I run chef-client the environment changed to "_default"
[2012-11-19 23:14:30 -0500] demonccc: I set the environment manually, bu when I run chef-client again,it changes to "_default" again
[2012-11-19 23:15:05 -0500] demonccc: I searched if there is something in the cache with the "_default" word, but I didn't find anything
[2012-11-19 23:15:11 -0500] juliancdunn: demonccc: is it set in your /etc/chef/client.rb ?
[2012-11-19 23:16:06 -0500] demonccc: I added the environment directive to the /etc/chef/client.rb but it still working weird
[2012-11-19 23:16:14 -0500] gchristensen: is it possible to do a bootstrap combined with a why-run instead of the first run?
[2012-11-19 23:16:22 -0500] demonccc: Also I delete de node and the client
[2012-11-19 23:17:13 -0500] jtimberman: gchristensen: create a custom bootstrap
[2012-11-19 23:17:21 -0500] gchristensen: okay
[2012-11-19 23:17:30 -0500] jtimberman: gchristensen: and change the chef client command at the end with the commandline-options you want
[2012-11-19 23:18:11 -0500] gchristensen: wonderful
[2012-11-19 23:18:13 -0500] gchristensen: thank you for your help
[2012-11-19 23:18:31 -0500] jtimberman: gchristensen: https://gist.github.com/d66edcf46134b4986f39
[2012-11-19 23:18:45 -0500] jtimberman: drop that in like, ~/.chef/bootstrap/chef-full-whyrun.erb
[2012-11-19 23:18:45 -0500] gchristensen: even better!
[2012-11-19 23:19:02 -0500] jtimberman: (if youre using the chef-full template :))
[2012-11-19 23:19:08 -0500] gchristensen: that is the default, yeah?
[2012-11-19 23:19:28 -0500] jtimberman: yeah
[2012-11-19 23:19:34 -0500] gchristensen: I am
[2012-11-19 23:25:04 -0500] chefologist: jtimberman: are you saying delete from hosted-chef?  If so, I don't see it under nodes
[2012-11-19 23:26:19 -0500] jtimberman: chefologist: you should delete the client in addition to the node
[2012-11-19 23:27:21 -0500] chefologist: jtimberman:   AHHHHHHHHHH client tab on hosted-chef!! thanks
[2012-11-19 23:30:27 -0500] demonccc: Fixed
[2012-11-19 23:30:33 -0500] demonccc: Wrong debian repo
[2012-11-19 23:30:57 -0500] demonccc: The lxc had configured squeeze and it should be squeeze-0.10
[2012-11-19 23:32:05 -0500] mattupstate: erikh: i used stracealthough i have no idea how to search this output
[2012-11-19 23:32:17 -0500] erikh: it can be a bit tricky
[2012-11-19 23:33:10 -0500] chefologist: jtimberman: I accidentally deleted all of my clients on hosted-chef ... now getting this error: Failed to authenticate as sbv2-validator. Ensure that your node_name and client key are correct
[2012-11-19 23:41:17 -0500] miah: you'll need to re-register your clients..
[2012-11-19 23:41:49 -0500] jtimberman: chefologist: you should only delete the clients that you're re-using via vagrant up/vagrant destroy
[2012-11-19 23:47:13 -0500] chefologist: jtimberman: the hosted-chef interface was behaving strangely, hence the deletion, how do I get it back to normal?  recreate my keys?
[2012-11-19 23:50:23 -0500] till__: jtimberman: any idea about mirrors in bento?
[2012-11-19 23:50:50 -0500] chefologist: jtimberman: or do I just recreate my organization in hosted-chef? cheers
[2012-11-19 23:58:11 -0500] gchristensen: I have a not_if line like: not_if node['mysql']['extended']['tmpdir'].eql? '/tmp'  but its causing this error: Invalid only_if/not_if command: true (TrueClass) which I understand - its returning True, but it should be callable, how can I alter that line into a way Chef expects?

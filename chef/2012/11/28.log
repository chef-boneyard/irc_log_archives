[2012-11-28 00:00:00 -0500] programmerq: nah
[2012-11-28 00:00:05 -0500] siezer: http://wiki.opscode.com/display/chef/Chef+11+Server+Preview
[2012-11-28 00:00:17 -0500] programmerq: I'll be happy to wait until it's out.
[2012-11-28 00:00:18 -0500] rava: hrm, i've been using knife backup plugin for backups/restores
[2012-11-28 00:00:18 -0500] siezer: https://github.com/opscode/chef-server-demo
[2012-11-28 00:00:22 -0500] rava: i'll have to take al ook at this one
[2012-11-28 00:00:23 -0500] programmerq: sounds cool though
[2012-11-28 00:00:31 -0500] programmerq: well, I think I have been pointed in the right direction
[2012-11-28 00:00:50 -0500] miah: happy to wait.. may mean 2 months
[2012-11-28 00:00:50 -0500] jtimberman: miah: releasing software isn't insane :)
[2012-11-28 00:01:02 -0500] miah: jtimberman: while half of your company is off on holiday? ya.. ok =)
[2012-11-28 00:01:14 -0500] jtimberman: I don't know who's out, or the ETA.
[2012-11-28 00:01:16 -0500] siezer: WAITING IS FOR MORTALS GOD LIVE ON THE BLEEDING EDGE OF SOFTWARE RAWR
[2012-11-28 00:01:16 -0500] programmerq: http://jtimberman.housepub.org/blog/2012/11/17/install-chef-10-server-on-centos/ - this looks like it'll do what we need.
[2012-11-28 00:01:21 -0500] rava: i can't, for the life of me, figure out why the webui isn't showing the cookbook's providers/recipes/attributes/etc.. files
[2012-11-28 00:01:27 -0500] jtimberman: siezer: you know it
[2012-11-28 00:01:29 -0500] programmerq: miah: 2 months is fine.
[2012-11-28 00:01:35 -0500] programmerq: I have holidays coming up too
[2012-11-28 00:01:42 -0500] programmerq: :)
[2012-11-28 00:02:01 -0500] c_t: siezer also runs debian experimental
[2012-11-28 00:02:06 -0500] c_t: because he likes to live on THE EDGE
[2012-11-28 00:02:16 -0500] programmerq: I run arch linux, but I don't enable the testing repos
[2012-11-28 00:02:16 -0500] jtimberman: c_t: naw, he's EL type of cat, so he runs Rawhide ;)
[2012-11-28 00:02:28 -0500] programmerq: at work we run rhel6
[2012-11-28 00:02:42 -0500] c_t: I ran debian experimental as my desktop for a while a long time ago
[2012-11-28 00:02:47 -0500] programmerq: I've been using redhat so long that it's what I'm comfortable with.
[2012-11-28 00:03:00 -0500] c_t: went OK, until one day I updated during the middle of when they were updating X or something
[2012-11-28 00:03:11 -0500] programmerq: I want to like debian more
[2012-11-28 00:03:12 -0500] programmerq: oh well
[2012-11-28 00:03:19 -0500] c_t: I think it was after the pieces finished landing I decided to give ubuntu a shot
[2012-11-28 00:04:29 -0500] c_t: "Hamster Huey and the Oooie Kablooie" probably sums it up best
[2012-11-28 00:22:50 -0500] rava: why would chef webui show less information for higher versions of a cookbook? the recipes are there, when a node runs it can run the recipes without complaining. i've got the right environment in the drop down. i'm pretty baffled
[2012-11-28 00:24:50 -0500] coderanger: miah: Where should I send pull requests for the cxinc redis cookbook?
[2012-11-28 00:25:52 -0500] miah: github.com/miah/chef-redis
[2012-11-28 00:26:18 -0500] coderanger: Derp, makes sense
[2012-11-28 00:26:43 -0500] miah: =)
[2012-11-28 00:26:58 -0500] miah: i dont have access to that repo anymore so i had to move it =)
[2012-11-28 00:29:47 -0500] coderanger: I feel like I'm coming full circle, submitting pull-reqs to someone else for something that started as a fork of me :D
[2012-11-28 00:30:51 -0500] programmerq: jtimberman: the method in your blog post worked like a charm.
[2012-11-28 00:32:51 -0500] gyre007: Chef-ists...Id like your opinion about something...
[2012-11-28 00:32:58 -0500] miah: coderanger: =)
[2012-11-28 00:32:59 -0500] rava: hrm, should the chef-server ubuntu package require the chef package deb aswell? shouldn't it get what it needs from the omnibus?
[2012-11-28 00:33:51 -0500] gyre007: when you are bootstrapping new nginx server or new postgres then restart after the config is done at the end of the chef run is necessary...however when you need to change some config once the node is up and running and dont want to restart - just reload how do you handle notifications to services from templates ?
[2012-11-28 00:34:36 -0500] gyre007: i dont want to be restarting production postgres/nginx when im changing simple configuration...
[2012-11-28 00:35:04 -0500] gyre007: Id really like to know some opinions on this
[2012-11-28 00:39:39 -0500] spox: hrm, is there a defined order attribute files are loaded? and can you use defined default values via node later in the attributes?
[2012-11-28 00:39:59 -0500] rava: argh, installing the chef package fixes chef-server but now none of the chef package binaries are in my path
[2012-11-28 00:40:10 -0500] ssd7: gyre007: If your service supports a reload, simply notify a reload rather than a restart
[2012-11-28 00:40:46 -0500] gyre007: ssd7: dude...if the service is not starting after its installed automatically then reload will fail and your chef-client run too
[2012-11-28 00:41:10 -0500] gyre007: because when the service is in stop state and you call reload on it it will obviously fail
[2012-11-28 00:41:12 -0500] rava: is the omnibus install just not something you should use on an open source server?
[2012-11-28 00:43:01 -0500] gyre007: ssd7: most reloads are based on sending signals to PIDs of particular processs...when that process is not running then your signal will never be handled...simples
[2012-11-28 00:44:08 -0500] ssd7: gyre007: Yes, I undestand how reload works.  I guess, however, that I don't understand what your question is then.
[2012-11-28 00:44:53 -0500] gyre007: imagine you are bootstrapping nginx node...you install packages, set up config files and you notify nginx service so that its restarted at the end of the chef-client run...
[2012-11-28 00:45:02 -0500] ssd7: sure
[2012-11-28 00:45:09 -0500] gyre007: but what if you then need to change simple config and DONT WANT TO RESTART IT...
[2012-11-28 00:45:25 -0500] gyre007: your notifications in templates are set to RESTART....as oppose to reload
[2012-11-28 00:45:40 -0500] gyre007: so you need to change the recipe, re-upload and re-run
[2012-11-28 00:45:47 -0500] gyre007: #annoying
[2012-11-28 00:46:07 -0500] ssd7: No, you don't.  If you are using a delayed notification anyway, you can safely reload
[2012-11-28 00:46:22 -0500] ssd7: since you should have been starting the service by then anyway
[2012-11-28 00:46:37 -0500] ssd7: unless you aren't starting the service for some other reason
[2012-11-28 00:47:12 -0500] gyre007: but your recipe has nitifications set to RESTART not to RELOAD...if it was set to RELOAD on the first run and nginx wouldnt start automatically after its installed on OS your chef-client run will fail
[2012-11-28 00:47:37 -0500] gyre007: arrgh...ill gist this
[2012-11-28 00:48:49 -0500] gyre007: https://gist.github.com/4158263
[2012-11-28 00:50:35 -0500] ssd7: gyre007: So, there you are notifying a service resource. Presumably that service resource is somewhere else in your recipes then correct?
[2012-11-28 00:50:48 -0500] gyre007: yup
[2012-11-28 00:50:57 -0500] gyre007: just lazy to type nginx service bit
[2012-11-28 00:50:57 -0500] ssd7: and what is the action on it?
[2012-11-28 00:51:09 -0500] gyre007: suppoerted actions are restart reload
[2012-11-28 00:51:59 -0500] gyre007: https://gist.github.com/4158263
[2012-11-28 00:52:05 -0500] gyre007: tahts better i think
[2012-11-28 00:52:56 -0500] gyre007: basically you dont want nginx to start running UNTIL its fully configured...thats why service nginx has action :nothing
[2012-11-28 00:53:16 -0500] ssd7: gyre007: Right, I'll find an example for you, one sec
[2012-11-28 00:53:21 -0500] gyre007: ok cool
[2012-11-28 00:53:28 -0500] ssd7: But you can start it after the template resource, and then make reload work
[2012-11-28 00:54:52 -0500] rava: this is wonky, having chef omnibus installed on the chef-server completely borks uploading cookbooks and keeps chef-server from being restarted
[2012-11-28 00:55:26 -0500] gyre007: rava: yeah..we dont have omnibus on chef servers...only on nodes...we have chef-server installed from packages...
[2012-11-28 00:55:51 -0500] rava: when did this change though? before i rebuilt this server i had both omnibus and chef-server on it without a problem
[2012-11-28 00:56:29 -0500] gyre007: having both is nonsense in my opinion...
[2012-11-28 00:56:48 -0500] gyre007: sorry for saying that but it makes no sense...as each install is messing up with your paths...
[2012-11-28 00:58:46 -0500] coderanger: macros: From the redis docs, " there is no way to make fsync faster than it is." ORLY?
[2012-11-28 01:00:43 -0500] rava: gyre007: originally i liked it because then i could keep all the knife plugins and various gems contained in the omnibus directory and only have just enough ruby in the global environment for chef to run
[2012-11-28 01:01:16 -0500] rava: gyre007: and i wouldn't have to worry too much about ruby library versions being whacked by a non careful update, etc
[2012-11-28 01:01:22 -0500] gyre007: in general mixing potatoes with bananas can be tasty but not recommended
[2012-11-28 01:01:40 -0500] gyre007: yeah i see where youre coming from....the reasons are obvious
[2012-11-28 01:02:24 -0500] rava: it hummed along nicely for a while like that until just recently (past 2 days) when i find myself having to rebuild our chef-server instance
[2012-11-28 01:02:54 -0500] gyre007: same with us...until we realized that mixing these 2 approaches is not a good idea...
[2012-11-28 01:02:55 -0500] macros: coderanger: My recent kernel spins no longer no-op fsync, our storage engine got a re-write
[2012-11-28 01:03:00 -0500] gyre007: trust me...i felt the pain
[2012-11-28 01:03:26 -0500] rava: gyre007: thanks for weighing in. glad to know i'm not that crazy :)
[2012-11-28 01:03:33 -0500] gyre007: :)
[2012-11-28 01:08:01 -0500] ssd7: gyre007: So far all the examples I am finding are in much longer, complicated cookbooks; but, the upshot is, that you can have two service resources with the second one having the action :start and the located after your template is put in place
[2012-11-28 01:09:19 -0500] gyre007: so the solution is to have multiple service resources then ?
[2012-11-28 01:10:33 -0500] ssd7: gyre007: That or minorly restructure your recipe.  If you never want to do an immediate notifcation I think you should be able to just have one service resource and put it after the template
[2012-11-28 01:11:47 -0500] gyre007: ssd7: but then I wont be able to set notification if its AFTER the template as the compilation of template resource fails because it would not know of service resource which would be defined AFTER template resource...
[2012-11-28 01:12:19 -0500] gyre007: answer is - ITS A COMPLETE MESS and not easy to be done in Chef :)
[2012-11-28 01:12:28 -0500] ssd7: gyre007: Hrmm, I thought we had fixed that re delayed notifications
[2012-11-28 01:13:01 -0500] jtnz: I've just set up a new Chef server on CentOS using chef-server:rubygems-install. Can someone tell me if I should add this recipe in addition to chef-server::default to the new server's run list (as it's own client)?
[2012-11-28 01:13:34 -0500] ssd7: but, it isn't too ugly with just two resource descriptions: service "foo"; template "bar" { notifies :reload, "service[foo]" }; service "foo" { action :start }
[2012-11-28 01:13:38 -0500] ssd7: gyre007: ^
[2012-11-28 01:14:36 -0500] rava: anyone have any ideas as to why the chef server webui isn't showing all the pieces of my users cookbook at later version?
[2012-11-28 01:15:13 -0500] rava: the nodes can run the recipes, so i know that the server has them.
[2012-11-28 01:17:45 -0500] mhalligan: can we just put "NOT EVEN CLOSE TO BEING READY READY FOR PRODUCTION" in every cookbook that requires ugly hacks like that?
[2012-11-28 01:18:05 -0500] mhalligan: would that be a reasonable documentation request in the bug tracker?
[2012-11-28 01:18:58 -0500] mhalligan: seems like someone doing that once, and making that gem available makes a lot more sense then .. recompiling postgres so that you can compile the gem each time you need to run the postgres recipe
[2012-11-28 03:14:26 -0500] LanyonM_: Hi All, can anyone point me toward the best supported or full-featured Apache/mod_jk/Tomcat cookbook?  I already have a Tomcat cookbook I'm quite happy with, and am looking to build out the stack above.
[2012-11-28 05:18:36 -0500] dpayonk: I've been trying to find out some good "default" info about running chef.  Can someone tell me if it's generally best practice to try and run chef as root or instead as sudo?
[2012-11-28 05:18:53 -0500] dpayonk: this is in regards to chef-solo
[2012-11-28 05:24:47 -0500] vaq: Hello, is it possible to define what recipe within a cookbook that chef-client should run, instead of the default ?
[2012-11-28 05:27:10 -0500] vaq: chef-client -o "role[test]"
[2012-11-28 05:27:30 -0500] vaq: but how to specify that it should run test recipe instead of the default one within the test role?
[2012-11-28 05:28:09 -0500] aruntomar: vaq: recipe[<cookbook_name>::<recipe>]
[2012-11-28 05:28:18 -0500] vaq: aruntomar: thanks!
[2012-11-28 05:28:42 -0500] aruntomar: vaq: :) welcome
[2012-11-28 06:19:06 -0500] BryanWB_: ohai chefs!
[2012-11-28 06:30:19 -0500] jtimberman: BryanWB_: ohai!
[2012-11-28 07:53:15 -0500] lsolesen: I have a recipe, which runs a shell script. The shell script creates some users. Afterwards, I need to change the users passwords and add a key to them. I cannot seem to find any docs on how to do that? https://github.com/lsolesen/boa-vagrant/blob/master/cookbooks/barracuda/recipes/default.rb
[2012-11-28 07:56:47 -0500] jtimberman: lsolesen: you should use 'user' resources, rather than running a script that creates them
[2012-11-28 07:58:02 -0500] jtimberman: it seems that you probably have some kind of setup script you've used before, but with chef you should be thinking in terms of what those are as resources on the system, "users" or "services" or "files with content and permissions"
[2012-11-28 07:58:14 -0500] lsolesen: jtimberman: I need the script to create the users. There is no going around that. Kan I use the user resources to alter the passw afterwards.
[2012-11-28 07:58:40 -0500] lsolesen: jtimberman: The setup script is an open source script to install a complete server. I cannot rewrite it to chef.
[2012-11-28 07:59:12 -0500] lsolesen: But still wanted the power of chef to take care of some of the manual work involved afterwards.
[2012-11-28 07:59:36 -0500] lsolesen: and pulling in some other stuff that I usually do.
[2012-11-28 08:00:38 -0500] lsolesen: jtimberman: So is it possible to edit a user with the user resource?
[2012-11-28 08:01:17 -0500] jtimberman: its possible but running a bunch of commands like this is really not the best approach.
[2012-11-28 08:02:32 -0500] lsolesen: jtimberman: I know. That is why I want to change what I can to proper chef.
[2012-11-28 08:02:55 -0500] lsolesen: eg. generating the ssh key etc.
[2012-11-28 08:14:20 -0500] jtimberman: lsolesen: something like this should get you on the right trackhttps://gist.github.com/4159807
[2012-11-28 08:23:14 -0500] lsolesen: jtimberman: Thanks a lot. Trying it out now.
[2012-11-28 08:48:32 -0500] jtimberman: lsolesen: you may need to modify that recipe, and you should review the documentation on those resources. http://docs.opscode.com/resources.html
[2012-11-28 08:59:12 -0500] lsolesen: jtimberman: Seems that this will not run:     command "ssh-keygen -b 4096 -t rsa -N "" -f /data/disk/o#{boa_user}/.ssh/id_rsa". How do I properly escape "" inside the command?
[2012-11-28 09:02:31 -0500] lsolesen: jtimberman: nevermind, will try with single quotes instead.
[2012-11-28 09:09:17 -0500] chaos: lsolesen, \"
[2012-11-28 09:09:51 -0500] lsolesen: chaos: Thanks.
[2012-11-28 09:14:29 -0500] masterkorp: halo
[2012-11-28 09:16:39 -0500] Virunga: Hi, is this ok node.default.cb_name.att1 = 'something'; node.default.cb_name.att2 = "stuff/#{node.default.cb.name.att2}" ?
[2012-11-28 09:17:07 -0500] Virunga: or better node.default.cb_name.att1 = 'something'; node.default.cb_name.att2 = "stuff/#{node.cb.name.att2}" ?
[2012-11-28 09:17:22 -0500] Virunga: I think the second.
[2012-11-28 09:21:17 -0500] masterkorp: in a recipe you should use node.set
[2012-11-28 09:29:51 -0500] Virunga: masterkorp: and in the attribute file?
[2012-11-28 09:30:38 -0500] masterkorp: its the same as before
[2012-11-28 09:33:26 -0500] Virunga: masterkorp: sorry but, why should i use set inside the attribute file either?
[2012-11-28 09:33:48 -0500] masterkorp: you shouldn't
[2012-11-28 09:34:13 -0500] Virunga: ok
[2012-11-28 09:34:48 -0500] Virunga: But, i still don't get which is the best between the two thing i wrote.
[2012-11-28 09:35:34 -0500] Virunga: Or maybe there's another better. Those instructions belong to the attribute file.
[2012-11-28 10:53:16 -0500] bmcgee: Hi guys, I'm still having issues with mysql recipe. Is there any means for me to get chef to tell me, explicitly, how it has determined the order in which recipes need to run. I don't mean the run list, cos that doesn't seem to matter.
[2012-11-28 10:53:26 -0500] bmcgee: I've tried -l debug, doesn't give me anything useful
[2012-11-28 10:54:19 -0500] bmcgee: mysql-client/gem keeps jumping the queue getting ahead of build-essential and ruining my week
[2012-11-28 10:54:54 -0500] bmcgee: it's getting to the "ah f**k it let's try puppet" stage
[2012-11-28 10:57:37 -0500] lsolesen: jtimberman: For some reason it does not substitute in the ssh-keygen -b 4096 -t rsa -N "" -f /data/disk/o#{boa_user}/.ssh/id_rsa command. Anyways I do not think so, because the output is: http://pastie.org/5447231
[2012-11-28 11:01:49 -0500] drrk: bmcgee: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run I suspect that mysql-client/gem is going into the compile phase, and you need to get build-essential to do the same http://community.opscode.com/cookbooks/build-essential  See node['build_essential']['compiletime']
[2012-11-28 11:08:32 -0500] bmcgee: mutherf**ker drrk: thank you, a lot. I mean seriously, people were about to start getting hurt.. indiscriminantly..
[2012-11-28 11:12:44 -0500] dkannan: a stupid question. how do i share attributes among recipes without using chef-server ?
[2012-11-28 11:14:27 -0500] dkannan: i have a users recipe which has a list of users, password, keys etc
[2012-11-28 11:14:55 -0500] dkannan: it also mentions that a certain user is the "deployer" user
[2012-11-28 11:15:11 -0500] dkannan: need to access this attribute from another recipe
[2012-11-28 11:15:38 -0500] bmcgee: if all the dependent recipes include the same recipe, you can set common attributes through the common recipes attributes if you know what i mean
[2012-11-28 11:16:08 -0500] bmcgee: i.e. foo::db_server, foo::app_server both include foo::default
[2012-11-28 11:16:25 -0500] bmcgee: then in attributes under default.rb you can set attributes which will be picked up by both db_server and app_server
[2012-11-28 11:20:45 -0500] dkannan: bmcgee: thanks. got it
[2012-11-28 11:22:40 -0500] yann2: hello! A small question - does it make sense with chef to gather several site/company-specific recipe in a site cookbook?
[2012-11-28 11:23:02 -0500] yann2: I have quite a few cookbooks here that are so specific that they don't make much sense to redistribute
[2012-11-28 11:23:09 -0500] yann2: am quite used to the "site/" folder from puppet
[2012-11-28 11:23:17 -0500] yann2: is it common practice to do the same with chef?
[2012-11-28 11:53:23 -0500] dkannan: yann2:  i created a folder called "vendor/cookbooks" and put such cookbooks there.
[2012-11-28 11:53:55 -0500] dkannan: yann2: configured chef-solo by cookbook_path ["/cookbooks", "/vendor/cookbooks"]
[2012-11-28 11:55:58 -0500] dkannan: yann2: my folder structure is http://pastie.org/private/zb8bvarqyhe7tryycvcw2g
[2012-11-28 11:56:39 -0500] yann2: make sense.. but I cant change the cookbook path :(
[2012-11-28 12:07:44 -0500] lsolesen: Can anyone tell my why line 29 is not substituted with boa_user when all the other lines are: https://gist.github.com/4159893
[2012-11-28 12:08:12 -0500] lsolesen: Getting this error: http://pastie.org/5447469
[2012-11-28 12:08:20 -0500] lsolesen: jtimberman: ^^
[2012-11-28 12:09:30 -0500] masterkorp: Guys is there any doc about @run_context in the providers ?
[2012-11-28 12:18:13 -0500] gabbagandalf: hello :)
[2012-11-28 12:19:08 -0500] gabbagandalf: has it happened to anyone before, that "rake install" does not synchronise freshly checked out roles? https://gist.github.com/4160838
[2012-11-28 12:19:48 -0500] gabbagandalf: as one can see in my gist, role "testrole" was checked out by rake, but not updated with the chef-server
[2012-11-28 12:45:24 -0500] gabbagandalf: is it possible, that rake has problems when subversion deletes or creates files? the same problem occures when removing a cookbook via subversion. the rake metadata task tries to handle the metadata.rb from the previously removed cookbook which results in an error
[2012-11-28 13:01:51 -0500] BryanWB_: is Mark Pimentel around?
[2012-11-28 13:02:42 -0500] masterkorp: Does new_resource object has a to_hash method 
[2012-11-28 13:05:05 -0500] CR-JDUrsa: Hi chaps, I've just updated my chef server to 10.16 from 10.08 in order to use the chef_gem method. However I'm still encountering  FATAL: NoMethodError: undefined method `chef_gem'.
[2012-11-28 13:05:14 -0500] CR-JDUrsa: Anyone any ideas of further steps I might need to take other than the apt package upgrade and service restart?
[2012-11-28 13:18:21 -0500] masterkorp: i want a thinkpad x230
[2012-11-28 13:19:48 -0500] gkarekinian: Pretty sure chef_gem was in chef 10.08, where are you trying to use it?
[2012-11-28 13:22:50 -0500] CR-JDUrsa: I have two recipes to configure a chef_handler  think I've just solved it
[2012-11-28 13:23:14 -0500] CR-JDUrsa: Forgot this particular environment was setup with a static chef-client on the nodes which was still at 10.08
[2012-11-28 13:23:24 -0500] CR-JDUrsa: so didn't have the method locally
[2012-11-28 13:29:44 -0500] maxmande1s: I'm editing a node's JSON attributes.  How do I refere to node properties, e.g. knife.ipaddress in that JSON file.  E.g. memcached cookbook has the 'listen' key , and I want to set the value to node.ipaddress
[2012-11-28 13:36:45 -0500] newb: Hello.
[2012-11-28 13:36:49 -0500] newb: And good morning.
[2012-11-28 13:38:48 -0500] masterkorp: good moarning newb
[2012-11-28 13:39:20 -0500] newb: Is there a way to encrypt file transfers with Chef?
[2012-11-28 13:44:17 -0500] maxmanders: netsplit?
[2012-11-28 13:58:34 -0500] gchristensen: maxmanders: doesn't seem that way
[2012-11-28 14:00:43 -0500] masterkorp: if i pass an value to a resource that can be nil, will that var be processed on the resource if it is nil ?
[2012-11-28 14:07:20 -0500] newb: Would the 'deploy' resource work with Perforce?
[2012-11-28 14:08:36 -0500] masterkorp: I am passing an array of strings to an LWRP attribute, wich i am used :kind_of => String and like it says http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+%28LWRP%29 ":kind_of Ensure that the value is a kind_of?(Whatever). If passed an array, it will ensure that the value is one of those types."
[2012-11-28 14:08:48 -0500] masterkorp: Cleary that is not happening because it complains
[2012-11-28 14:08:59 -0500] masterkorp: Option host_notification_options must be a kind of String!  You passed ["d", "r"].
[2012-11-28 14:09:23 -0500] masterkorp: wiki should be fixed
[2012-11-28 14:09:34 -0500] masterkorp: please confirm this
[2012-11-28 14:10:25 -0500] BryanWB_: xeon22
[2012-11-28 14:12:11 -0500] masterkorp: ?
[2012-11-28 14:16:31 -0500] yfeldblum: newb, IIRC it currently has support for only git and svn
[2012-11-28 14:16:58 -0500] yfeldblum: newb, what kind of file transfer?
[2012-11-28 14:18:26 -0500] newb: yfeldblum> Thanks. e.g. transfers with remote_file
[2012-11-28 14:18:36 -0500] newb: Just want to make sure source files are encrypted during transfer.
[2012-11-28 14:18:50 -0500] yfeldblum: newb, make sure the remote endpoint is https
[2012-11-28 14:21:10 -0500] bmcgee: hey guys, when using knife ssh is it possible to set the connection ipaddress to the private ip? I've tried -a cloud:local_ipv4
[2012-11-28 14:25:41 -0500] bmcgee: seems this works: -a "node.cloud.local_ipv4"
[2012-11-28 14:48:08 -0500] masterkorp: bmcgee: that would be handy
[2012-11-28 14:48:48 -0500] masterkorp: bmcgee: Does chef talk to the machines by a network that ins't the default route ?
[2012-11-28 14:48:53 -0500] bmcgee: masterkorp: I'm experimenting with a vpn which is why i was interested
[2012-11-28 14:49:43 -0500] bmcgee: masterkorp: i have a vpn server and an app server running in backspaces cloud. I'm experimenting with restricting the app server to only speaking to the vpn server.
[2012-11-28 14:49:59 -0500] bmcgee: essentially i'm trying to carve out a little private cloud
[2012-11-28 14:50:48 -0500] bmcgee: *rackspace fecking autocorrect
[2012-11-28 14:51:42 -0500] masterkorp: bmcgee: i am will try that too
[2012-11-28 14:52:19 -0500] masterkorp: my object will be making a ohai plugin that would set node["ipaddress"] be the address machines talk to chef
[2012-11-28 15:01:16 -0500] yfeldblum: bmcgee, backspaces?
[2012-11-28 15:01:25 -0500] yfeldblum: bmcgee, ah
[2012-11-28 15:01:46 -0500] BryanWB_: does our irc bawt support a way to leave a message for someone when they log onto #chef?
[2012-11-28 15:01:49 -0500] yfeldblum: bmcgee, what about trying their cloud networks?
[2012-11-28 15:02:11 -0500] bmcgee: yfieldblum: cloud networks?
[2012-11-28 15:02:56 -0500] bmcgee: I didn't rackspace could do that
[2012-11-28 15:02:58 -0500] bmcgee: hmm
[2012-11-28 15:03:05 -0500] bmcgee: *didn't know
[2012-11-28 15:04:10 -0500] bmcgee: seems very new, just being phased out
[2012-11-28 15:04:14 -0500] bmcgee: *phased in
[2012-11-28 15:07:15 -0500] bmcgee: yfieldblum: I've requested access. Do you have any experience of it? I've used ec2 virtual private cloud before and was disappointed rackspace didn't have it
[2012-11-28 15:16:00 -0500] intinig: hi guys
[2012-11-28 15:16:11 -0500] intinig: https://gist.github.com/4161892 <- I am using this pattern a lot, but I see lots of repetition in it
[2012-11-28 15:16:14 -0500] intinig: is there a better way to do it?
[2012-11-28 15:16:23 -0500] mikeywaites: is it possible to use a template from another cookbook? cant see it anywhere in the docs
[2012-11-28 15:16:32 -0500] intinig: like have action :none and then depending on the attribute change the type of action?
[2012-11-28 15:19:06 -0500] bmcgee: yfieldblum: cheers for the heads up, getting cloud networks access by COB :) Exactly what I was looking for.
[2012-11-28 15:20:01 -0500] bmcgee: yfieldblum: now I just have to see if the rackspace knife plugin supports it. If not, I feel a fork in my future
[2012-11-28 15:20:19 -0500] masterkorp: BryanWB_: weechat does
[2012-11-28 15:20:28 -0500] spox: you know would would be nice. if the package providers all used a common interface to query about current and cadidate package versions so it was easy to grab that information in a very generic way
[2012-11-28 15:20:32 -0500] masterkorp: there is a plugin for that
[2012-11-28 15:20:56 -0500] BryanWB_: masterkorp: i could really use it right now
[2012-11-28 15:27:40 -0500] vaq: When using the mount function ( http://wiki.opscode.com/display/chef/Resources#Resources-Mount ) how to prevent the recipe from mounting it, if it already exists?
[2012-11-28 15:28:45 -0500] leifmadsen: I haven't used that resource, but I'd think with an only_if
[2012-11-28 15:28:53 -0500] leifmadsen: or not_if
[2012-11-28 15:30:39 -0500] vaq: so a ruby if statement?
[2012-11-28 15:30:56 -0500] vaq: something like if mountpoint exists in /etc/mtab ?
[2012-11-28 15:31:03 -0500] savant: i use an if statement
[2012-11-28 15:31:37 -0500] savant: actually, i simply enable the mount
[2012-11-28 15:32:08 -0500] savant: and call mount -a in a separate one, with that one doing not_if "mount|grep 'device on directory'"
[2012-11-28 15:32:38 -0500] vaq: but then I will get an entry in /etc/fstab each time the recipe is ran
[2012-11-28 15:33:01 -0500] meineerde: vaq: if it attempts to mount although the device is mounted already, it is either a bug or a user error. the resource should definitely be idempotent
[2012-11-28 15:33:39 -0500] vaq: meineerde: [Wed, 28 Nov 2012 19:19:36 +0400] FATAL: Mixlib::ShellOut::ShellCommandFailed: mount[/var/www] (test::test line 43) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2012-11-28 15:33:45 -0500] vaq: because it's already mounted
[2012-11-28 15:34:14 -0500] meineerde: vaq do you have a full stack trace and the full resource block?
[2012-11-28 15:34:28 -0500] savant: vaq: no you wont?
[2012-11-28 15:34:43 -0500] vaq: savant: yes i will if I use the :enable function
[2012-11-28 15:34:53 -0500] savant: i dont
[2012-11-28 15:34:54 -0500] vaq: then I will copy the entry to /etc/fstab on each run of the recipe.
[2012-11-28 15:34:55 -0500] savant: https://gist.github.com/2623408d4c620760a512
[2012-11-28 15:39:19 -0500] vaq: meineerde: http://pastebin.ca/2257528
[2012-11-28 15:42:21 -0500] vaq: meineerde: any ideas?
[2012-11-28 15:43:05 -0500] meineerde: i think this is caused by the way you specify the sshfs source "device".
[2012-11-28 15:43:22 -0500] meineerde: but i'm not 100% sure. it might be the regexes don't match here
[2012-11-28 15:45:41 -0500] vaq: but it works if i umount /var/www and then run the recipe
[2012-11-28 15:45:46 -0500] vaq: but if it already exists, it fails with exit 1
[2012-11-28 15:45:52 -0500] vaq: so how can it be the code?
[2012-11-28 15:50:13 -0500] meineerde: vaq: the provider attempts to check if it is mounted by itself before attemting to mount it. and abviously that check doesn't work here.
[2012-11-28 15:50:57 -0500] vaq: hmm
[2012-11-28 15:51:01 -0500] vaq: any ideas on how to do it then?
[2012-11-28 15:51:04 -0500] meineerde: vaq: here is the check: https://github.com/opscode/chef/blob/master/lib/chef/provider/mount/mount.rb#L76-L89
[2012-11-28 15:52:23 -0500] meineerde: vaq: and I guess the hash character in the "device" throws it off.
[2012-11-28 15:52:58 -0500] vaq: okay, I am not sure I can mount sshfs without it
[2012-11-28 15:57:25 -0500] shillinm: can anyone give me an example of a knife search where I can find out which nodes have a certain cookbook applied to them?
[2012-11-28 15:59:10 -0500] vaq: meineerde: do you know if that's possible?
[2012-11-28 15:59:40 -0500] meineerde: vaq: i don't really know sshfs.
[2012-11-28 16:00:21 -0500] meineerde: vaq: but you definitely should perform a chef run with debug log level and check for some hints about what is happening
[2012-11-28 16:00:49 -0500] meineerde: vaq: as I said, it should be idempotent. if it's not, it should be fixed
[2012-11-28 16:02:19 -0500] masterkorp: http://pastie.org/private/7m28t3s0ymspexubipnv0w
[2012-11-28 16:02:34 -0500] masterkorp: this is a bit... monolitic, dont you guys think ?
[2012-11-28 16:03:04 -0500] masterkorp: err wrong paste even
[2012-11-28 16:03:23 -0500] masterkorp: http://pastie.org/private/6z1do0opm45hkhhc2vxuag
[2012-11-28 16:24:47 -0500] qhartman: I'm using a search via Spice in a Sinatra REST service I wrote to return information on all the nodes in a particular environment. However, the search is slow because it's returning all the node data and I just need a couple attributes. Anyone know how to have it return just the few attributes I need?
[2012-11-28 16:25:06 -0500] mikeywaites: is it possible to specify which cookbook you want to look for a template in?
[2012-11-28 16:25:38 -0500] qhartman: mikeywaites, pretty sure you can only pull templates from the cookbook that is storing the recipe you are running
[2012-11-28 16:27:04 -0500] qhartman: mikeywaites, You could use a remote file to copy an .erb template onto the filesystem and then have an arbitrary recipe render it though
[2012-11-28 16:27:41 -0500] masterkorp: mikeywaites: that looks like overcomplicating
[2012-11-28 16:28:04 -0500] qhartman: mikeywaites, masterkorp, also that
[2012-11-28 16:29:05 -0500] masterkorp: mikeywaites: Asking what you want to do also helps people giving ideas on how to do it properly
[2012-11-28 16:30:10 -0500] meineerde: qhartman: you can specify the cookbook via the "cookbook" atribute on the template resource. You have to make sure that thatcookbook is available on the node though.
[2012-11-28 16:30:43 -0500] qhartman: meineerde, good to know
[2012-11-28 16:30:46 -0500] meineerde: qhartman: e.g. via depends statements in metadata.rb when using chef server or by including it in the cookbooks path when using chef solo
[2012-11-28 16:31:06 -0500] meineerde: mikeywaites: ^^
[2012-11-28 16:31:12 -0500] qhartman: meineerde, right.
[2012-11-28 16:34:29 -0500] meineerde: qhartman: as for your question, I think you can pass the solr query in the q argument to restruct the returned attributes.
[2012-11-28 16:35:27 -0500] qhartman: meineerde, I was just coming to the same conclusion and starting to dig for solr query docs
[2012-11-28 16:36:36 -0500] meineerde: qhartman: http://wiki.opscode.com/display/chef/Search should help
[2012-11-28 16:37:22 -0500] qhartman: meineerde, I didn't see anything there that digs into this stuff at all. There  are links from there that seem promising, but one is broken, and the other is a bit inscrutable.
[2012-11-28 16:37:58 -0500] qhartman: meineerde, lots of stuff on doing matching on field names, but not on paring down what is returned
[2012-11-28 16:40:15 -0500] meineerde: qhartman: hmmm, I haven't digged that much into that yet...
[2012-11-28 16:40:40 -0500] meineerde: I thought you could restrict it. could be I'm wrong...
[2012-11-28 16:41:13 -0500] qhartman: meineerde, Looks like I can via solr, but it's not part of the q command, so I'm not sure if that's been implemented in Spice and whatnot: http://wiki.apache.org/solr/CommonQueryParameters?highlight=%28%28SolrQuerySyntax%29%29#fl
[2012-11-28 16:41:31 -0500] qhartman: meineerde, "fl" is the parameter I think I want
[2012-11-28 16:42:43 -0500] qhartman: meineerde, I know you can choose what is returned when you do knife searches, but I suspect that is still pulling all the attributes and then paring them down on the client side
[2012-11-28 16:42:44 -0500] meineerde: if it's not in spice yet, I fear it will be confused by partial results then (it used to be just hashes, but I think it's more complex now).
[2012-11-28 16:43:09 -0500] meineerde: so that's probably a bit more complex to implement...
[2012-11-28 16:43:09 -0500] qhartman: Yeah, digging into the spice code now....
[2012-11-28 16:44:19 -0500] qhartman: lol, I'm thinking it may be easier to just increase the option URL timeout in rundeck rather than try to make this query faster....
[2012-11-28 16:48:52 -0500] makmanalp: hello, I'm having a hard time understanding notifications by just looking at the documentation
[2012-11-28 16:49:29 -0500] makmanalp: does a template notification, for example, come into effect when the file chanes (i.e. some sort of filesystem watch) or when a variable in the template changes?
[2012-11-28 16:50:07 -0500] makmanalp: or does it only work after the template clause is executed?
[2012-11-28 16:50:32 -0500] spox: makmanalp: when the generated contents of the template change. generally, if a variable used by the template changes, the generated contents of the template would also change
[2012-11-28 16:51:37 -0500] makmanalp: ah, so chef magically knows, okay, thanks
[2012-11-28 16:52:08 -0500] spox: well, it's not magic. it just checks the checksum of the file on disk to the generated content. if they are different, it writes the new file, and sends notifications
[2012-11-28 16:53:22 -0500] makmanalp: spox: well, i understand that, the magical part is the fact that when I change an attribute such as node[:postgresql][:dir], chef knows to go in and re-apply the template
[2012-11-28 16:53:32 -0500] makmanalp: spox: right?
[2012-11-28 16:53:57 -0500] spox: sure, because when it generates the content and that var has changed, the checksums will no longer match
[2012-11-28 16:55:31 -0500] makmanalp: spox: right, I was just confused as to the semantics of *when* the generation happens. I thought I had to manually regenerate the template somehow, as opposed to that happening by itself. So what happens if I change 5 variables? Does the notification get sent 5 times and thus the service gets restarted 5 times?
[2012-11-28 16:55:51 -0500] masterkorp: Guys any recomendations/ideas on how do detect what roles attribute were deleted since last chef client run ?
[2012-11-28 16:57:07 -0500] spox: makmanalp: no. the attributes are used during the generation of the template, which only happens once, when will then generate notifications on change
[2012-11-28 16:59:50 -0500] spox: makmanalp: no. notifications would be the correct term. the original resource notifies other resources that care that it has changed, so they can take required actions
[2012-11-28 17:01:42 -0500] makmanalp: spox: yeah, I see, it's just that it makes it seem like the other way when you call it that
[2012-11-28 17:03:20 -0500] masterkorp: No luck with me ?
[2012-11-28 17:03:58 -0500] spox: masterkorp: determining what attributes were removed from a role?
[2012-11-28 17:04:39 -0500] masterkorp: yes
[2012-11-28 17:04:59 -0500] spox: what is the problem you are trying to solve?
[2012-11-28 17:05:46 -0500] masterkorp: i generate config files based on attributes found on roles
[2012-11-28 17:06:04 -0500] masterkorp: one file per attribute
[2012-11-28 17:06:24 -0500] masterkorp: and when the attribute is removed i want to remove the config file too
[2012-11-28 17:07:43 -0500] masterkorp: i have a action that need to be set to remove attribute
[2012-11-28 17:07:54 -0500] masterkorp: but i want to detect if possible
[2012-11-28 17:08:17 -0500] spox: well, it's messy but you could. if you have the proper attribute structure
[2012-11-28 17:08:53 -0500] spox: node[:cookbook][:config_files]['the_file_name.cnf'] = {:configuration => 'values'}
[2012-11-28 17:09:05 -0500] spox: with that you know what configuration files you should have
[2012-11-28 17:09:30 -0500] spox: so you can just check the directory for files not within the keys in that hash, and create file resources with delete actions
[2012-11-28 17:11:15 -0500] masterkorp: being configuration the role ?
[2012-11-28 17:15:34 -0500] masterkorp: I have another idea
[2012-11-28 17:16:24 -0500] masterkorp: since the services are set with LWRPs, can i get the resource list at the end and remove the files that did not exist
[2012-11-28 17:16:35 -0500] masterkorp: So can i get the resources list ?
[2012-11-28 17:23:28 -0500] wamilton: masterkorp: http://wiki.opscode.com/display/chef/Recipes#Recipes-resources
[2012-11-28 17:24:53 -0500] sveiss: I was trying to get all resources of a particular type the other day and couldn't figure out how... the resources method would only let me look up a resource if I already knew its name
[2012-11-28 17:27:22 -0500] jflowers: is there a way to pass attributes at the commandline for chef solo?
[2012-11-28 17:27:53 -0500] spox: jflowers: -j
[2012-11-28 17:28:01 -0500] jflowers: cool
[2012-11-28 17:28:29 -0500] rava: why would chef server's webui fail to show a cookbooks recipes and providers after doing an upload?
[2012-11-28 17:28:36 -0500] jflowers: ooh that is a file to load
[2012-11-28 17:29:00 -0500] jflowers: no way to specify them directly on the command line?
[2012-11-28 17:29:19 -0500] masterkorp: wamilton: hmm ? what should i do with that ?
[2012-11-28 17:29:42 -0500] masterkorp: i still need to know the resource list
[2012-11-28 17:29:45 -0500] wamilton: jflowers: not unless you count a bash one-liner with file redirection and lots of ;
[2012-11-28 17:30:03 -0500] masterkorp: wamilton: or can i pass regex
[2012-11-28 17:30:14 -0500] jflowers: so if I do use -j and I am also using -c and the config file specifies a json file what happens
[2012-11-28 17:30:24 -0500] masterkorp: wamilton: like resources("icinga_*")?
[2012-11-28 17:30:32 -0500] masterkorp: i doubt it
[2012-11-28 17:30:33 -0500] jflowers: are two json file contents merged?
[2012-11-28 17:31:01 -0500] jflowers: or does is only the one from the command line read?
[2012-11-28 17:31:12 -0500] spox: masterkorp: you know the files you are creating from the attributes. you know the directory they are being put into. with those two bits of information you should be able to look in the destination directory, see any files that shouldn't be there, and generate file resources that will delete them during the compile phase
[2012-11-28 17:33:15 -0500] zeroXten: I have an issue where I read the value of the node attributes, e.g. myvar = node["x"]["y"] which should mean that myvar is now a hash. But myvar["z"] = "abc" doesn't seem to actually do anything. Chef runs happily but I only get contents of y. Any suggestions?
[2012-11-28 17:36:43 -0500] rava: makes no sense that it's not showing the recipes. could it be the metadata.json file?
[2012-11-28 17:37:01 -0500] gkarekinian: zeroXten: Look at http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_methods.html to change attributes in a cookbook/recipe
[2012-11-28 17:37:54 -0500] zeroXten: gkarekinian: i don't want to actually change the attributes, i just want to assign the values to a variable and then use that var
[2012-11-28 17:38:23 -0500] gkarekinian: Sorry, didn't get that
[2012-11-28 17:39:43 -0500] zeroXten: np, i get the impression that it sometimes works, sometimes doesn't
[2012-11-28 17:39:48 -0500] gkarekinian: So in your example you're defining a new key to that hash, and instead of its value you get one from the node attribute?
[2012-11-28 17:40:05 -0500] spox: zeroXten: a gist example would be helpful
[2012-11-28 17:40:13 -0500] zeroXten: gist?
[2012-11-28 17:40:20 -0500] spox: gist/pastebin/etc
[2012-11-28 17:40:25 -0500] spox: http://gist.github.com
[2012-11-28 17:40:35 -0500] zeroXten: ah
[2012-11-28 17:41:38 -0500] gkarekinian: By the way in your example "myvar = node["x"]["y"]", myvar will be whatever type the 'y' key is
[2012-11-28 17:42:16 -0500] gkarekinian: I mean value of that key
[2012-11-28 17:42:22 -0500] zeroXten: which should be a hash with values
[2012-11-28 17:43:06 -0500] gkarekinian: Sorry got to run, later
[2012-11-28 17:43:27 -0500] zeroXten: yeah. likewise, but i'll be back later
[2012-11-28 17:44:05 -0500] rava: having an issue with knife search on a data bag
[2012-11-28 17:44:31 -0500] rava: the data bag has the data i need, i can see it with knife data bag show
[2012-11-28 17:44:39 -0500] rava: but a knife search on that field is returning none
[2012-11-28 17:44:52 -0500] zeroXten: https://gist.github.com/4162801
[2012-11-28 17:46:27 -0500] rava: https://gist.github.com/4162815
[2012-11-28 17:47:21 -0500] rava: any ideas?
[2012-11-28 17:47:25 -0500] behemphi: In knife-rackspace I want to set the default image in knife.rb, but I cannot find the name of the key
[2012-11-28 17:47:40 -0500] behemphi: i.e. knife[:what_is_this] = my_default_image
[2012-11-28 17:48:15 -0500] behemphi: anyone have that handy?
[2012-11-28 17:48:48 -0500] rava: same thing in the webui
[2012-11-28 17:50:06 -0500] rava: this is on chef-server 10.16.2
[2012-11-28 17:51:31 -0500] rava: search doesn't seem to be working at all really. using a different id field i get the same thing
[2012-11-28 17:54:26 -0500] behemphi: to answer my question above, it is knife[:image] which is a bit of a surprise in that it is not namespaced to rackpace
[2012-11-28 17:54:50 -0500] behemphi: however I love me some knife-rackspace!
[2012-11-28 17:59:38 -0500] rava: fied it
[2012-11-28 17:59:44 -0500] rava: yay for reindexing
[2012-11-28 18:26:20 -0500] namidark: I had to stop/start the chef server in EC2 to upgrade the instance, and it the chef-server won't start due to an invalid client key. How can I fix this? I've tried deleteing the validation.pem/webui.pem and neither fixed it after regenerating
[2012-11-28 18:30:14 -0500] gyre007: namidark: check the key in /etc/chef/client.pem
[2012-11-28 18:30:25 -0500] namidark: When booting up the chef-server manually, it says error connecting to rabbitmq
[2012-11-28 18:30:38 -0500] gyre007: ah thats something else then
[2012-11-28 18:30:47 -0500] namidark: Hm okay
[2012-11-28 18:31:24 -0500] namidark: The hostname changed, so I think that may have something to do with it
[2012-11-28 18:39:33 -0500] namidark: Had to set NODENAME= in /etc/rabbitmq config file :)
[2012-11-28 18:40:54 -0500] BigEndianBecause: Howdy all,  I've got a problem with changing the default port chef-server runs on from 4000 to a low port (88).  I have changed all the appropriate config files to reflect the new port but a "sudo service chef-server start" fails.  I am able to start chef server manually as root when I do not specify the "-u chef -G chef" options.  I didn't really want to run chef as root,  but I did set suid on /usr/sbin/chef-server and I'm still
[2012-11-28 18:42:18 -0500] BigEndianBecause: if it's any help,  "sudo chef-server -p 88 -e production  -L /var/log/chef/server.log -C /etc/chef/server.r-u chef -G chef" returns this error [Wed, 28 Nov 2012 18:41:44 +0000] FATAL: Another process is already listening on port 88. Is chef-server already running?
[2012-11-28 18:42:47 -0500] BigEndianBecause: sudo lsof -i:88 returns no processes
[2012-11-28 18:44:07 -0500] jtimberman: BigEndianBecause: why not put an nginx or apache proxy in front of it?
[2012-11-28 18:45:08 -0500] BigEndianBecause: Thats certainly doable,  I just wanted to figure out why it wasn't working this way...
[2012-11-28 18:45:54 -0500] BigEndianBecause: I could forward all requests that hit port 88 to port 4000 using iptables,  but that seemed like a bit of a hack when I should be able to get the process listening on a low port
[2012-11-28 18:46:39 -0500] jtimberman: i honestly don't know, i've not run a chef server itself on a port other than the default, and use nginx to proxy
[2012-11-28 18:50:43 -0500] BigEndianBecause: @jtimberman,  no worries.  I'll probably go the iptables route.
[2012-11-28 18:50:59 -0500] BigEndianBecause: just wondered if anyone had an idea what might be going on
[2012-11-28 19:01:01 -0500] linux: jtimberman,  forwarding from port 88 to 4000 is working like a charm.
[2012-11-28 19:05:08 -0500] xiaotian: hey, is there any way to change organization name of a registered opscode.com account?
[2012-11-28 19:08:04 -0500] jtimberman: xiaotian: no, but you can create a new one and send a request to support to delete the old one
[2012-11-28 19:08:30 -0500] xiaotian: @jtimberman got it, thanks!
[2012-11-28 19:21:13 -0500] qhartman: Where can I find some fairly complete examples of using the server API partial search query POST method? I'm not quite understanding the docs at http://docs.opscode.com/api_chef_server_search_index.html
[2012-11-28 19:24:35 -0500] dougireton: Ohai chefs I'm looking for guidance for when I use shell_out vs shell_out!
[2012-11-28 19:25:39 -0500] dougireton: Looks like shell_out! raises an exception if the cmd's return code isn't one of the expected return codes, but I'm not sure if that's the only difference
[2012-11-28 19:26:10 -0500] maruq: hi guys
[2012-11-28 19:26:25 -0500] maruq: anyone got experience with debugging librarian-chef ?
[2012-11-28 19:26:42 -0500] maruq: I get "Could not resolve the dependencies"
[2012-11-28 19:26:56 -0500] maruq: if I turn on --verbose, I get War & Peace
[2012-11-28 19:27:07 -0500] maruq: is there a helpful middle-ground ?
[2012-11-28 19:27:33 -0500] maruq: it's obvious 2 dependencies are conflicting, it's not obvious where
[2012-11-28 19:33:02 -0500] dougireton: maruq: can you remove all but one dependency, and then add them back one at a time?
[2012-11-28 19:33:51 -0500] yfeldblum: hah don't ask a question and then quit
[2012-11-28 19:51:27 -0500] [007g3m1n1]: Hello all. on mac 10.7 with ruby 1.9 getting "ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: (null)" when running knife node list against an https server. any suggestions on how to resolve?
[2012-11-28 19:51:29 -0500] fleish: hi all, say I want to change a machine's hostname in chef. knife node edit it & it forces me to save a new node name as a copy of the old node config. then I do the same thing with knife client edit. but what I'm seeing is the public_key in the client is changed. even if I knife client edit the new name and try to change the public_key back to the existing one it says it saves my change but then when I look at it it's somehow changed a
[2012-11-28 19:53:51 -0500] yfeldblum: maruq, look for lines that say "Backtracking"?
[2012-11-28 19:54:31 -0500] maruq: yfeldblum: I tried that. managed to chase it down to a mysql conflict. looks like it's opscode database vs. something of mine
[2012-11-28 19:54:40 -0500] yfeldblum: maruq, also i've made some changes to the resolver in librarian master
[2012-11-28 19:55:18 -0500] yfeldblum: maruq, the output may be smaller
[2012-11-28 19:55:51 -0500] maruq: yfeldblum: ah nice. at the moment I'm using the gem, but can try and give a master a go if things don't fix
[2012-11-28 19:56:54 -0500] yfeldblum: maruq, i haven't quite fixed up all the needed logging since i made those changes, so some bits of info may be missing, but take a look
[2012-11-28 19:57:32 -0500] cassianoleal: is there a way I can run the "apt" recipe in a chef-solo provisioned vagrant VM without including a dependency on the apt cookbook on metadata.rb ?
[2012-11-28 19:58:17 -0500] maruq: yfeldblum: I think I had referenced a commit in our repo that was old. removed the reference to pull latest & conflict seems to have gone
[2012-11-28 19:58:26 -0500] maruq: yfeldblum: either that or magic
[2012-11-28 19:58:32 -0500] KarlHungus: http://docs.opscode.com/essentials_roles_formats.html
[2012-11-28 19:58:42 -0500] KarlHungus: "Each environment in the list may only have a single recipe or role assigned to it."
[2012-11-28 19:58:50 -0500] KarlHungus: for env_run_lists. this is a typo, right?
[2012-11-28 19:58:52 -0500] cassianoleal: ugh, nevermind just found out that shoving "cookbook 'apt'" on the Berksfile does the trick! :)
[2012-11-28 20:01:28 -0500] btm: Opscode Chef Code Review starting shortly, join: https://plus.google.com/hangouts/_/86579be01418864a8a30e660ed8b7ecc2059cef7?hl=en, watch: http://youtu.be/neYpsI2IgLU
[2012-11-28 20:09:32 -0500] Death_Syn: hmm, google hangouts for code review
[2012-11-28 20:09:34 -0500] Death_Syn: I LIKE IT
[2012-11-28 20:10:34 -0500] cassianoleal: Death_Syn: I second that. At some point, I might even start participating on those. I'd like to get a bit more experienced with Chef first, though. :)
[2012-11-28 20:11:18 -0500] maruq: nice. I can't join now, trying to build stuff, then heading home, but would be fun to see at some point
[2012-11-28 20:12:03 -0500] jim: I'm getting the follwing error when Im running sudo chef-server -N -e production Merb root at: /usr/lib64/ruby/gems/1.8/gems/chef-server-api-10.16.2  ~ No Gemfile found! If you're generating new app with merb-gen this is fine, otherwise run: bundle init to create Gemfile
[2012-11-28 20:12:38 -0500] c_t: have you run bundle init?
[2012-11-28 20:13:15 -0500] Guest83673: what is the bundle init. I used the chef solo tuts
[2012-11-28 20:13:42 -0500] Guest83673: I installed ruby and gems
[2012-11-28 20:14:21 -0500] cassianoleal: I'm kinda guessing here, but i don't think bundle init will do you any good
[2012-11-28 20:14:33 -0500] rava: anyone use the users resource? i have a user it keeps trying to modify, for no reason i can tell.
[2012-11-28 20:14:33 -0500] cassianoleal: maybe you're trying to run this command from the wrong directory?
[2012-11-28 20:14:49 -0500] cassianoleal: have you tried searching for a Gemfile somewhere above or below your current dir?
[2012-11-28 20:15:03 -0500] rava: on a virtual machine, i run chef-client twice in a row, that user has no access so can't cause a change, and each run it keeps running usermod against that user
[2012-11-28 20:16:16 -0500] cassianoleal: anyone used the zabbix cookbook that's in the community repo?
[2012-11-28 20:16:24 -0500] Guest83673: which dir should I run the command from
[2012-11-28 20:16:32 -0500] cassianoleal: I'm trying to spin up a zabbix server with it, but haven't succeeded so far
[2012-11-28 20:17:32 -0500] cassianoleal: I'm stuck on the database
[2012-11-28 20:17:40 -0500] benblack: are there recommendations on maximum size of data bags? google search is proving fruitless for dumb old me
[2012-11-28 20:26:37 -0500] KarlHungus: benblack: data bags are in couchdb
[2012-11-28 20:27:01 -0500] KarlHungus: benblack: so i'd look at restrictions there
[2012-11-28 20:27:48 -0500] benblack: KarlHungus: in hosted chef?
[2012-11-28 20:28:02 -0500] KarlHungus: ahh. no. i'm not sure about hosted
[2012-11-28 20:30:30 -0500] yfeldblum: benblack, the typical use-case requires only small documents (data-bag items); i take it you have an alternative use-case?
[2012-11-28 20:31:17 -0500] benblack: yfeldblum: i don't think it is alternative, i expect it is the usual decision about putting an array of items in a single data bag vs a data bag per item
[2012-11-28 20:33:55 -0500] UForgotten: oMethodError: undefined method `chef_type' for role[production]:Chef::Role
[2012-11-28 20:34:07 -0500] yfeldblum: benblack, not sure i followed that ... i think of data-bags like tables (sql) or collections (mongo), and data-bag items like records (sql) or documents (mongo) ... people usually have smallish records or documents, but may have many records or documents within a given table or collection
[2012-11-28 20:34:38 -0500] benblack: right, so, how many counts as too many?
[2012-11-28 20:34:46 -0500] UForgotten: hmm wtf
[2012-11-28 20:34:52 -0500] benblack: 1000?  10000? 1M?
[2012-11-28 20:35:46 -0500] jtimberman: benblack: "it depends"?
[2012-11-28 20:35:51 -0500] rava: any ideas on why the users resource would constantly run modifications against a user run after run?
[2012-11-28 20:36:23 -0500] yfeldblum: benblack, i don't think opscode intended data-bags to replace a real database system
[2012-11-28 20:36:31 -0500] jtimberman: benblack: what kind of data? is it being input from another process? does loading that data bag in a chef client run cause an issue (memory consumption, e.g.)?
[2012-11-28 20:37:25 -0500] benblack: jtimberman: search results on a data bag from hosted chef will just return the matching items, right?
[2012-11-28 20:37:54 -0500] fujin: benblack: hosted chef has a new partial search API which is *really* nice, too, means you don't have to crunch 'em on the client side.
[2012-11-28 20:38:00 -0500] yfeldblum: benblack, if you've got 1M+ (or 10k+) data-bag items, it may be more prudent to switch to pg or something
[2012-11-28 20:38:17 -0500] benblack: yfeldblum: that part of hosted chef?
[2012-11-28 20:38:23 -0500] yfeldblum: benblack, course not
[2012-11-28 20:38:26 -0500] benblack: ...
[2012-11-28 20:38:37 -0500] fujin: I'd guess w/ erchef, it'd be pg backends for databags, nodes, etc, anyway (guessing)
[2012-11-28 20:38:57 -0500] fujin: benblack: why not rig up a test case and see how many data-bag items you can hold?
[2012-11-28 20:39:07 -0500] fujin: benblack: if you are using hosted chef, could be worth contacting Opscode instead of asking in here too :)
[2012-11-28 20:39:20 -0500] benblack: if only people from opscode were here.
[2012-11-28 20:39:32 -0500] jtimberman: benblack: If only.
[2012-11-28 20:39:43 -0500] fujin: by which I mean of course, support
[2012-11-28 20:39:53 -0500] fujin: where they'd have some kind of official information gathering/response procedure :)
[2012-11-28 20:39:59 -0500] benblack: i'll go ahead and assume this will work fine for now and if it breaks, whine loudly.
[2012-11-28 20:40:09 -0500] jtimberman: benblack: iirc, the client still does the parsing of the result set returned from search.
[2012-11-28 20:40:16 -0500] benblack: the result set will be small
[2012-11-28 20:40:17 -0500] jtimberman: benblack: best to post to twitter ;)
[2012-11-28 20:40:21 -0500] benblack: the entire data bag will be large
[2012-11-28 20:40:21 -0500] heph: hey guys. upgraded a system from 10.14 to 10.16.2 and notice that within an execute block, if the file specified by 'creates' exists, the execute (properly) doesn't run, BUT it still sends notifies
[2012-11-28 20:40:25 -0500] programmerq: jtimberman: is there a preferred way to get chef client to run as a chkconfig service under centos/rhel?
[2012-11-28 20:40:27 -0500] heph: is this expected behavior?
[2012-11-28 20:40:30 -0500] fujin: benblack: I'm interested in how this goes either way! let me know :)
[2012-11-28 20:40:40 -0500] jtimberman: programmerq: use opscode's chef-client cookbook, service recipe
[2012-11-28 20:40:44 -0500] jtimberman: is what i'd do
[2012-11-28 20:41:03 -0500] fujin: heph: sounds like bug
[2012-11-28 20:41:06 -0500] ypaq: hi, how can you use the http_request resource to download a file? basically use it like wget or curl? where would the downloaded go or how can you define that?
[2012-11-28 20:41:07 -0500] fujin: heph: show debug logs
[2012-11-28 20:41:15 -0500] fujin: ypaq: why not use remote_file resource to download file
[2012-11-28 20:41:37 -0500] fujin: man, bawt was so good at answering these questions
[2012-11-28 20:41:41 -0500] fujin: we need to rebawtulate him
[2012-11-28 20:42:08 -0500] yfeldblum: fujin, unfortunately it succumbed to bawtulism
[2012-11-28 20:42:18 -0500] fujin: do-ho-ho-ho
[2012-11-28 20:42:21 -0500] ypaq: fujin: authorization header?
[2012-11-28 20:42:24 -0500] fujin: so good
[2012-11-28 20:42:40 -0500] ypaq: fujin: or can you work that into remote file?
[2012-11-28 20:42:43 -0500] jtimberman: fujin: yeah i tried
[2012-11-28 20:42:54 -0500] jtimberman: fujin: rbot got to a point where it would just stackerror
[2012-11-28 20:42:56 -0500] fujin: ypaq: like what? have you seen the s3 file remote file ?
[2012-11-28 20:43:02 -0500] fujin: jtimberman: rbot is a POS
[2012-11-28 20:43:48 -0500] jtimberman: fujin: It didn't leave me with warm fuzzy feelings. However, it didn't have trouble on the old box he was on
[2012-11-28 20:44:09 -0500] fujin: need more time. :)
[2012-11-28 20:44:23 -0500] ypaq: fujin: ok.. what i'm doing currently is execute 'curl -H "Authorization: .." https://some.resource'
[2012-11-28 20:44:24 -0500] fujin: https://github.com/spox/mod_spox
[2012-11-28 20:44:26 -0500] programmerq: jtimberman: I'll give that a try. Thanks!
[2012-11-28 20:45:01 -0500] fujin: jtimberman: ^^
[2012-11-28 20:45:21 -0500] fujin: ypaq: I don't know that you'll be able to use the http_request resource for that. But it shouldn't be too hard to make something like the s3_file lwrp..
[2012-11-28 20:45:34 -0500] KarlHungus: cinchrb has been a nice bot framework for me at he last two $dayjob's
[2012-11-28 20:45:44 -0500] KarlHungus: if you are looking to reinvent a help bot
[2012-11-28 20:45:45 -0500] spox: if someone actually cared i might be motivated enough to finish updating that stupid bot
[2012-11-28 20:45:48 -0500] fujin: ypaq: https://github.com/adamsb6/s3_file/blob/master/providers/default.rb#L3
[2012-11-28 20:46:27 -0500] ypaq: hmm.. kk. thanks!
[2012-11-28 20:46:29 -0500] fujin: primarily I'd just be looking for any old bot that runs that can load up bawts old keywordb
[2012-11-28 20:46:48 -0500] fujin: maybe time to start fresh and re-train one anyway
[2012-11-28 20:47:00 -0500] jtimberman: fujin: i don't see a keyword plugin on this list
[2012-11-28 20:47:13 -0500] fujin: for spox? no, I don't think so
[2012-11-28 20:47:17 -0500] fujin: jtimberman: it's chris roberts' bot
[2012-11-28 20:47:17 -0500] spox: would just be a simple plugin. what's needed now is just porting the old plugins to the new api. but i've been preoccupied with other stuff
[2012-11-28 20:47:20 -0500] jtimberman: and yeah, time to start fresh, most of the keywords were wiki links and those are on docs.opscode.com now.
[2012-11-28 20:47:24 -0500] jtimberman: spox: zomg
[2012-11-28 20:47:32 -0500] spox: it has a keyword bit
[2012-11-28 20:47:40 -0500] jtimberman: SPOX IS HERE.
[2012-11-28 20:47:44 -0500] fujin: I think bawt's old one was just a berkdb anywayz
[2012-11-28 20:47:47 -0500] spox: the old bot would work if sequel was cut down to an old version
[2012-11-28 20:47:55 -0500] spox: :)
[2012-11-28 20:48:01 -0500] jtimberman: fujin: yeah i has the home dir
[2012-11-28 20:48:05 -0500] spox: jtimberman: plz to merge pg gem fix
[2012-11-28 20:48:07 -0500] fujin: still have it? sick!
[2012-11-28 20:48:12 -0500] fujin: yeah COOK-1406 PLX
[2012-11-28 20:48:17 -0500] fujin: I missed code review!!
[2012-11-28 20:48:18 -0500] jtimberman: spox: COOK review starts in ~12 minutes :)
[2012-11-28 20:48:24 -0500] jtimberman: CHEF code review happening now
[2012-11-28 20:48:35 -0500] fujin: http://tickets.opscode.com/browse/COOK-1406?focusedCommentId=29360&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-29360
[2012-11-28 20:48:36 -0500] fujin: oic
[2012-11-28 20:48:49 -0500] spox: aye, i've been busy during them lately
[2012-11-28 20:49:02 -0500] spox: though, cook meet will be during lunch. guess that will work :P
[2012-11-28 20:49:05 -0500] jtimberman: fujin: i saw the email from jira
[2012-11-28 20:49:37 -0500] jtimberman: i hate that pg bug tho, like, i wish i knew what the conflict was because mysql seems to work just fine.
[2012-11-28 20:50:31 -0500] spox: the omnibus libs take precedence so the wrong ssl libs are linked and libpq freaks out
[2012-11-28 20:50:41 -0500] fujin: I've been through like 3 iterations of fixes for it
[2012-11-28 20:50:42 -0500] spox: so, disallow omnibus libs, everyone is happy
[2012-11-28 20:50:48 -0500] fujin: patch-style omnibus packages that dump the pg shit into /opt/chef
[2012-11-28 20:51:01 -0500] fujin: fully segregated pg omnibus package w/ execute to build pg against /opt/postgresql pg_config
[2012-11-28 20:51:01 -0500] fujin: lolz
[2012-11-28 20:51:20 -0500] fujin: I like spox current one, but I wish we could detect the failing setup and workaround it instead of waiting for the chef_gem to fail once first ;)
[2012-11-28 20:51:25 -0500] qhartman: is there any way to use the solr "fl" (field limit) option, or something similar, when doing search queries via the server API?
[2012-11-28 20:52:25 -0500] spox: well, the install has to fail so it can be "repaired"
[2012-11-28 20:52:46 -0500] makmanalp: fujin: question if you maintain the pg cookbook, I'm trying to get postgres to not restart after the config files are loaded because the stupid initrc script uses hardcoded paths, not ones from the config files. Do you know of a quick way to do that?
[2012-11-28 20:53:23 -0500] makmanalp: fujin: my current solution is doing service "postgresql" do action :nothing end in another cookbook
[2012-11-28 20:53:26 -0500] spox: would be fun to make it an extra option though. chef_gem('pg'){ action :install; strip_omnibuslibs true; }
[2012-11-28 20:53:40 -0500] fujin: spox: heh
[2012-11-28 20:53:50 -0500] fujin: makmanalp: I don't maintain the postgres cookbook :)
[2012-11-28 20:53:59 -0500] makmanalp: darn!
[2012-11-28 20:54:14 -0500] fujin: you're looking for jtimberman, however the question doesn't really rely on the maintainer to answer it
[2012-11-28 20:54:16 -0500] fujin: let me take a look
[2012-11-28 20:54:50 -0500] makmanalp: fujin: thanks. the initrc script is the system default, it doesn't even come from the recipe I think.
[2012-11-28 20:54:50 -0500] fujin: makmanalp: why don't you fix the initrc instead of trying to prevent it from restarting?
[2012-11-28 20:54:56 -0500] fujin: hmm
[2012-11-28 20:54:56 -0500] jtimberman: makmanalp: you mean the init script from your system package?
[2012-11-28 20:54:59 -0500] makmanalp: fujin: hmm, fair point
[2012-11-28 20:55:02 -0500] makmanalp: jtimberman: indeed
[2012-11-28 20:55:04 -0500] fujin: still, strange..
[2012-11-28 20:55:08 -0500] jtimberman: i hate init scripts :(
[2012-11-28 20:55:09 -0500] fujin: what version/platform?
[2012-11-28 20:55:13 -0500] fujin: Me too.
[2012-11-28 20:55:16 -0500] makmanalp: ubuntu precise
[2012-11-28 20:55:39 -0500] makmanalp: what i'm trying to accomplish is to move my postgres data / config dirs along with all my other data/configs
[2012-11-28 20:56:18 -0500] makmanalp: jtimberman: if you decided on an appropriate solution, I'd maybe write a patch for you if it's not super complicated
[2012-11-28 20:56:27 -0500] jtimberman: makmanalp: i've done this with mysql on ec2 to move the data dir over to ephemeral storage, http://github.com/opscode-cookbooks/mysql/tree/master/recipes/server_ec2.rb
[2012-11-28 20:56:35 -0500] jtimberman: so i didn't have to screw around with init scripts and the like.
[2012-11-28 20:56:51 -0500] silentrob: noob question, I'm getting "Cannot find resource for runit_service" obviously because it is definition. How do I require / use that in my recipe?
[2012-11-28 20:57:13 -0500] fujin: silentrob: depends 'runit'
[2012-11-28 20:57:23 -0500] silentrob: Thanks fujin
[2012-11-28 20:57:29 -0500] fujin: if you are trying to notify/subscribe a runit_service resource, you actually want to be notifying/subscribing to the interior service resource
[2012-11-28 20:57:39 -0500] jtimberman: silentrob: the runit_service definition creates a 'service' resource that you can use to notify
[2012-11-28 20:57:40 -0500] fujin: (same name, just :service => foo instead of :runit_service => foo
[2012-11-28 20:57:45 -0500] fujin: boom too fast jtimberman
[2012-11-28 20:57:46 -0500] jtimberman: oh fujin said that faster
[2012-11-28 20:57:52 -0500] jtimberman: because he's type fast guy
[2012-11-28 20:57:53 -0500] jtimberman: :)
[2012-11-28 20:58:52 -0500] tolland: is there a drop in way to get http_request to support https?
[2012-11-28 20:58:59 -0500] makmanalp: jtimberman: well the problem, rather, is that the recipe is notifying the service restart on its own, without my touching it. If I had my way, I'd disable the damn thing and let it rest :)
[2012-11-28 20:59:01 -0500] tolland: I get an error abot a regex relating to https
[2012-11-28 20:59:55 -0500] makmanalp: jtimberman: I can't replace the init script because the postgres installation is going to overwrite it. and replacing it after doesn't work because the service gets called during installation when generating the configs
[2012-11-28 21:00:31 -0500] makmanalp: jtimberman: ideally, ubuntu should fix this because its their silly assumption >:|
[2012-11-28 21:00:55 -0500] fujin: what's the bug with the init script?
[2012-11-28 21:01:03 -0500] makmanalp: fujin: the paths are hardcoded
[2012-11-28 21:01:05 -0500] fujin: not overridable with an variables in /etc/default/pg ?
[2012-11-28 21:01:15 -0500] makmanalp: fujin: so when I change the configs they fail
[2012-11-28 21:01:24 -0500] makmanalp: fujin: hmm
[2012-11-28 21:01:32 -0500] jtimberman: makmanalp: something like resources("package[postgresql]").notifies :create, "template[/etc/init.d/postgresql]", :immediately
[2012-11-28 21:01:52 -0500] fujin: 0_0
[2012-11-28 21:02:30 -0500] jtimberman: postgresql::ruby totally works just fine with omnibus on CentOS 6 and 5.
[2012-11-28 21:03:13 -0500] makmanalp: fujin: seems like there is no pg / postgres in etc/default
[2012-11-28 21:04:21 -0500] fujin: makmanalp: there may not be. does the init script reference an override script in /etc/default?
[2012-11-28 21:04:24 -0500] fujin: you said ubuntu precise right?
[2012-11-28 21:04:36 -0500] fujin: makmanalp: what path are you changing, from what to what?
[2012-11-28 21:05:55 -0500] makmanalp: fujin: yeah, sorry, i'm back
[2012-11-28 21:06:12 -0500] makmanalp: fujin: basically i'm changing the socket, the pids, the data directory, everything
[2012-11-28 21:06:43 -0500] makmanalp: and then the service is failing by saying: 2012-11-28 20:39:09 UTC FATAL:  could not create lock file "/var/run/postgresql/.s.PGSQL.5432.lock": No such file or directory
[2012-11-28 21:07:00 -0500] makmanalp: which makes sense because the goshdarned thing is not there because it's configured to be elsewhere
[2012-11-28 21:07:37 -0500] btm: 11/28 Opscode Cookbook review join: https://plus.google.com/hangouts/_/81f6fff157a576ce0089ad12897340462f7af4bb?authuser=1&hl=en, watch: http://youtu.be/AYQGDMLwOu4
[2012-11-28 21:08:57 -0500] fujin: makmanalp: the init script I'm looking at on precise is really basic..
[2012-11-28 21:09:11 -0500] fujin: doesn't reference any paths at all :p
[2012-11-28 21:09:15 -0500] makmanalp: fujin: let me take a peek again
[2012-11-28 21:09:42 -0500] fujin: oh, I see now
[2012-11-28 21:09:45 -0500] fujin: the init.d-functions file
[2012-11-28 21:10:01 -0500] makmanalp: yeah at /usr/share/postgresql-common/init.d-functions
[2012-11-28 21:10:19 -0500] makmanalp: all those /usr/lib/ s
[2012-11-28 21:10:21 -0500] jtimberman: spox: ^ from btm
[2012-11-28 21:10:40 -0500] spox: jtimberman: that it works on cent?
[2012-11-28 21:10:42 -0500] jtimberman: clearly, fyi, the answer to the COOK-1406 problem is actually to run CentOS :)
[2012-11-28 21:11:21 -0500] zeroXten: any ideas why my attempt to add to a hash is ineffective? in https://gist.github.com/4162801
[2012-11-28 21:11:27 -0500] tolland: extent http_request resource?
[2012-11-28 21:11:37 -0500] spox: it's probably because the libpq it's linking to is from like 2002 and doesn't have libssl deps
[2012-11-28 21:12:07 -0500] fujin: makmanalp: yeah, I dunno. If i was looking to change the stuff like you are, I'd probably use runit or a supervisor or something instead of these janky ass debian init scripts
[2012-11-28 21:12:13 -0500] jtimberman: postgresql-devel-8.4.13-1.el6_3
[2012-11-28 21:12:21 -0500] fujin: postgresq 8.4!!!!
[2012-11-28 21:12:22 -0500] fujin: ballin'
[2012-11-28 21:12:39 -0500] spox: :D
[2012-11-28 21:12:43 -0500] jtimberman: same versino as on ubuntu su
[2012-11-28 21:12:44 -0500] makmanalp: fujin: I am using supervisor! :D The problem is that the *recipe* uses the debian scripts
[2012-11-28 21:12:44 -0500] zeroXten: uh, s/mycompany/company/
[2012-11-28 21:12:45 -0500] jtimberman: so
[2012-11-28 21:13:17 -0500] fujin: makmanalp: that's what I mean, the recipe is a good starting point. It sounds like you're already butchering the layout the cookbook expects
[2012-11-28 21:13:18 -0500] makmanalp: fujin: so i'm in a bind trying to get it to stop, i'll probably hack a workaround
[2012-11-28 21:13:42 -0500] fujin: obv. few assumptions are made, the init script relies on some behavior probably not explicitly enforced by the cookbook
[2012-11-28 21:13:59 -0500] makmanalp: indeed
[2012-11-28 21:14:14 -0500] fujin: I'd use parts of the postgresql cookbook to install it, then do my tuning / path jiggling, then put a system in place like runit to launch those alternate processes w/ quite distinct cfg differences
[2012-11-28 21:14:19 -0500] fujin: (mostly because I hate writing init scripts)
[2012-11-28 21:15:46 -0500] makmanalp: fujin: yeah, I might just have to clone the cookbook and just cut out the notifies line
[2012-11-28 21:15:47 -0500] cwj: why so many 500s hoasted chef
[2012-11-28 21:15:57 -0500] fujin: yeah, someone else just mentioned it
[2012-11-28 21:16:00 -0500] fujin: lots of 500s on hosted
[2012-11-28 21:16:03 -0500] fujin: jtimberman: ^^
[2012-11-28 21:16:53 -0500] fujin: makmanalp: well, you don't have to clone it to modify a resource like that. use a wrapper and the chef-rewind / compile time resource re-open technique
[2012-11-28 21:17:18 -0500] fujin: makmanalp: e.g. service = resources(:service => "postgresql").notifies nil
[2012-11-28 21:17:22 -0500] fujin: (maybe)
[2012-11-28 21:18:12 -0500] makmanalp: fujin: hmm I don't know how that exactly works but i'll be reading into it
[2012-11-28 21:18:30 -0500] makmanalp: fujin, jtimberman: thanks again guys
[2012-11-28 21:19:22 -0500] fujin: makmanalp: https://github.com/bryanwb/chef-rewind
[2012-11-28 21:19:28 -0500] fujin: makmanalp: has specific examples for rewinding postgresql :p
[2012-11-28 21:19:38 -0500] makmanalp: yeah I was reading that now, genius!
[2012-11-28 21:19:39 -0500] fujin: that's syntactic sugar on the method I suggested just above
[2012-11-28 21:20:09 -0500] makmanalp: er, i mean "was reading that now .... this is genius!", not sarcastically calling you genius :>
[2012-11-28 21:20:25 -0500] makmanalp: this looks neat, thanks.
[2012-11-28 21:23:16 -0500] fujin: fyi http://status.opscode.com/post/36758532308/hosted-chef-service-interruption
[2012-11-28 21:23:35 -0500] silentrob: Ya I just felt that
[2012-11-28 21:26:44 -0500] silk: appears to be back now.
[2012-11-28 21:33:24 -0500] mobilemike: I'm looking at the documentation for the AWS cookbook, regarding Elastic IPs
[2012-11-28 21:33:27 -0500] heph: where can i find the expected release date for chef 11?
[2012-11-28 21:33:54 -0500] mobilemike: I think I'm missing something, since it shows the following in example code:
[2012-11-28 21:33:55 -0500] mobilemike: ip_info = data_bag_item("aws", "eip_load_balancer_production")
[2012-11-28 21:35:07 -0500] mobilemike: That's extremely node specify, so I don't understand where I'd put that. I can't imagine it would go in a recipe, since that should be more generic, right?
[2012-11-28 21:41:39 -0500] miah: heph: probably after the new year
[2012-11-28 21:47:25 -0500] tolland: ah. it was a problem with ark.rb not accepting https, and nothing to do with http_request
[2012-11-28 21:47:32 -0500] tolland: by bad
[2012-11-28 21:47:34 -0500] tolland: my
[2012-11-28 21:47:36 -0500] tolland: gah
[2012-11-28 21:49:47 -0500] programmerq: jtimberman: the chef-client cookbook seems to be working, but it definitely seems like a chicken and egg problem.
[2012-11-28 21:50:00 -0500] programmerq: It seems like we should be able to get knife bootstrap to set up chef client as a service
[2012-11-28 21:50:13 -0500] programmerq: hmm
[2012-11-28 21:50:33 -0500] programmerq: maybe there's a way to configure the bootstrap run list?
[2012-11-28 21:50:42 -0500] programmerq: thinking out loud here. :)
[2012-11-28 21:51:43 -0500] fujin: programmerq: knife bootstrap installs chef. you can specify the run list for the first chef run, including the chef-client::service.
[2012-11-28 21:51:49 -0500] elon: hello. im working with the runit_service definition. the arguments after the name aren't being recognized. Any tips?
[2012-11-28 21:52:36 -0500] programmerq: fujin: it looks like the -r option to knife bootstrap is what I need.
[2012-11-28 21:54:37 -0500] miah: elon: gist your code?
[2012-11-28 21:56:14 -0500] elon: its a really simple call. runit_service "name", :template_name => 'whatever', :options => {} ...
[2012-11-28 21:56:32 -0500] elon: works as if nothing past name was provided
[2012-11-28 21:56:37 -0500] miah: ya
[2012-11-28 21:56:44 -0500] elon: wrapping in explicit hash does nothing
[2012-11-28 21:56:48 -0500] miah: make it a block
[2012-11-28 21:57:02 -0500] miah: runit_service 'foo' do
[2012-11-28 21:57:25 -0500] elon: hmmm
[2012-11-28 21:57:33 -0500] elon: to execute it or define it?
[2012-11-28 21:57:53 -0500] elon: im just trying to execute
[2012-11-28 21:58:00 -0500] miah: to execute it
[2012-11-28 21:58:12 -0500] elon: where do the args fit in then?
[2012-11-28 21:58:15 -0500] fujin: elon: https://gist.github.com/4164940
[2012-11-28 21:58:19 -0500] fujin: elon: same as every other resource
[2012-11-28 21:58:24 -0500] fujin: and the entire chef DSL :p
[2012-11-28 21:58:38 -0500] elon: i feel like an idiot
[2012-11-28 21:58:44 -0500] fujin: Don't worry about it!
[2012-11-28 21:58:45 -0500] elon: been staring at the same thing too long
[2012-11-28 21:58:50 -0500] fujin: haha
[2012-11-28 21:58:51 -0500] miah: i feel like a idiot every day
[2012-11-28 21:58:53 -0500] elon: thank you miah and fujin
[2012-11-28 21:58:56 -0500] fujin: Yeah, me too
[2012-11-28 21:59:04 -0500] fujin: Mostly I run around saying "I'm an idiot!" so it's fine.
[2012-11-28 21:59:22 -0500] elon: thats a really good idea
[2012-11-28 21:59:27 -0500] elon: ;)
[2012-11-28 21:59:35 -0500] cwj: lmao if you think you know one whole thing
[2012-11-28 22:00:03 -0500] fujin: all of the things
[2012-11-28 22:01:30 -0500] miah: All I know is that I don't know nothing.
[2012-11-28 22:02:00 -0500] cwj: fujin: have you seen this jenkins-job-builder?
[2012-11-28 22:02:12 -0500] fujin: no sir
[2012-11-28 22:02:17 -0500] fujin: I don't fux with jenkins
[2012-11-28 22:02:26 -0500] fujin: Attracts developer hand jiggling
[2012-11-28 22:02:50 -0500] cwj: oh i thought you were primarily responsible for the heavywater jenkins stuff but i guess i am mistaken
[2012-11-28 22:02:56 -0500] fujin: I am, we just don't use it
[2012-11-28 22:02:57 -0500] fujin: for anyone
[2012-11-28 22:02:59 -0500] fujin: at all. anymore.
[2012-11-28 22:03:07 -0500] cwj: anyway, https://github.com/openstack-ci/jenkins-job-builder/ is way cool
[2012-11-28 22:03:16 -0500] cwj: and now my jenkins is fully chef'd
[2012-11-28 22:03:24 -0500] fujin: looks slick :)
[2012-11-28 22:03:50 -0500] fujin: Better than my lame-o pennyworth data-bag -> job xml
[2012-11-28 22:04:22 -0500] cwj: i wrote a dinky little definition  for it https://github.com/needle-cookbooks/chef-jenkins-job-builder
[2012-11-28 22:05:01 -0500] fujin: oh yeah -- that's the stuff
[2012-11-28 22:05:01 -0500] fujin: nice work
[2012-11-28 22:05:15 -0500] cwj: thanks :D
[2012-11-28 22:05:37 -0500] fujin: there's so much tech debt accumulated in that jenkins cookbook
[2012-11-28 22:05:43 -0500] fujin: next time I get some time to work on it I want to rebuild it
[2012-11-28 22:09:12 -0500] cwj: the fragility and special-snowflake-level of of our jenkins has been annoying me as long as i've been here, now i can sleep at night
[2012-11-28 22:10:17 -0500] miah: im lwrp'ing my graphite cookbook
[2012-11-28 22:10:22 -0500] jtimberman: My hero today is spox.
[2012-11-28 22:10:25 -0500] jtimberman: He's you're hero too.
[2012-11-28 22:10:33 -0500] miah: ok. spox you are my hero.
[2012-11-28 22:10:40 -0500] spox: \o/
[2012-11-28 22:11:00 -0500] spox: miah: hi. i have new redis updates to send to you too, hopefully soon
[2012-11-28 22:11:22 -0500] miah: awesome =)
[2012-11-28 22:11:35 -0500] miah: i've got a PR i need to deal with thanks to coderanger. probably get to it tonight.
[2012-11-28 22:11:46 -0500] coderanger: miah: :)
[2012-11-28 22:11:55 -0500] coderanger: I found another I need to send you too
[2012-11-28 22:11:58 -0500] miah: awesome
[2012-11-28 22:12:06 -0500] jtimberman: COOK-1406.
[2012-11-28 22:12:12 -0500] miah: i haven't given redis a good 'shake and break' lately
[2012-11-28 22:12:49 -0500] miah: but i've been test-kitchen'ing my books a bit and getting things cleaned up. at least on ubuntu systems. (i mostly have been avoiding writing bash init-scripts so also avoiding rhel)
[2012-11-28 22:13:12 -0500] coderanger: miah: Just finished moving opscode over fully, and upgrading from 2.2 to 2.6 to boot
[2012-11-28 22:14:52 -0500] miah: cool
[2012-11-28 22:15:47 -0500] miah: my attention lately has been on collectd & graphite
[2012-11-28 22:15:53 -0500] miah: so i appreciate the eyes on redis
[2012-11-28 22:16:37 -0500] coderanger: Still could use a lot of move on the config front, I ended up just re-opening the template resource and moving the whole config into our own cookbook
[2012-11-28 22:16:57 -0500] coderanger: Related: dear lord I want to see something like bryan's edit resource in core
[2012-11-28 22:17:10 -0500] coderanger: something like template "foo", :edit=>true do ... end
[2012-11-28 22:17:37 -0500] miah: ya. im getting better at lwrp stuff. and i was discussing the config part of redis with erikh while we were at community summity.
[2012-11-28 22:17:47 -0500] miah: got a good idea of what to do. just need to do it =)
[2012-11-28 22:18:22 -0500] coderanger: The biggest problem with redis configs IMO is that options are not always forwards or backwards compatible
[2012-11-28 22:18:45 -0500] spox: so i have some updates to redis directly related to that
[2012-11-28 22:19:06 -0500] coderanger: So making a cookbook that works with 2.2-2.6 is Hard
[2012-11-28 22:19:17 -0500] spox: attribute driven configuration a la postgres conf files
[2012-11-28 22:19:24 -0500] UForgotten: we just template our redis configs. and rarely update redis :)
[2012-11-28 22:19:29 -0500] spox: with a recipe to set default attributes based on installed version
[2012-11-28 22:20:05 -0500] spox: https://github.com/hw-cookbooks/redis/compare/master...develop
[2012-11-28 22:20:12 -0500] coderanger: If you are doing a package install, you don't know the version
[2012-11-28 22:20:28 -0500] spox: why not?
[2012-11-28 22:20:29 -0500] thehar_: cwj: merb : chef-server (api) : worker (port 4000) ~ no such file to load -- chef/monkey_patches/moneta - (LoadError)
[2012-11-28 22:20:30 -0500] UForgotten: sure you do. you can specify the version.
[2012-11-28 22:20:32 -0500] thehar_: wtf?
[2012-11-28 22:20:52 -0500] spox: coderanger: https://github.com/hw-cookbooks/redis/blob/develop/recipes/_server_store_version.rb
[2012-11-28 22:20:52 -0500] coderanger: spox: Thats just not how it works currently
[2012-11-28 22:21:05 -0500] spox: coderanger: it stores installed version after installation
[2012-11-28 22:21:08 -0500] thehar_: on a cookbook upload .. getting that lovely error in chef-server.. thought was rabbit related bounced it and it's fine
[2012-11-28 22:21:25 -0500] coderanger: spox: How do you deal with the first start up?
[2012-11-28 22:21:25 -0500] fujin: so slick spox :>
[2012-11-28 22:21:36 -0500] coderanger: Just let it boot with default deb/rpm config once?
[2012-11-28 22:21:44 -0500] spox: version set after install, configs defined after install, before start up
[2012-11-28 22:21:59 -0500] coderanger: debs start on install (which is rage)
[2012-11-28 22:22:06 -0500] spox: yeah, debs are dumb
[2012-11-28 22:22:10 -0500] fujin: so many auto problems would go away if we could disable that
[2012-11-28 22:22:13 -0500] spox: that's a "not my problem"
[2012-11-28 22:22:14 -0500] spox: :)
[2012-11-28 22:22:20 -0500] coderanger: Heh, srsly
[2012-11-28 22:22:38 -0500] miah: :/ its easy with rpm --noscript
[2012-11-28 22:22:51 -0500] miah: unfortunate that dpkg doesn't have a similar argument
[2012-11-28 22:23:16 -0500] coderanger: noscript can break other things though
[2012-11-28 22:23:33 -0500] coderanger: there isn't a targeted "if you touch my services I will cut you" argument to either
[2012-11-28 22:23:38 -0500] miah: certainly.
[2012-11-28 22:23:52 -0500] miah: im starting to learn towards 'packages should just package my software'
[2012-11-28 22:24:04 -0500] miah: because i replace initscripts, config, etc anyways.
[2012-11-28 22:24:06 -0500] coderanger: Everyone is, except package maintainers
[2012-11-28 22:24:35 -0500] spox: hey man, they know what you want better than you do
[2012-11-28 22:24:56 -0500] miah: also. i want my CM tool to manage the resources the package sometimes provides, like /etc/foo/conf. i dont want there to be disparity between package resource permissions and my CM tool. it just makes idempotence more unlikely.
[2012-11-28 22:24:58 -0500] coderanger: spox: EVERYONE MUST USE THE SAME COPY OF EVERYTHING. SECURITY!
[2012-11-28 22:29:21 -0500] jtimberman: miah: but... the package management system does half your configuration management for you!
[2012-11-28 22:29:40 -0500] mattray: jtimberman: but is it the right half?
[2012-11-28 22:29:47 -0500] bougyman: that'd be a failed package management system. you must be talking debconf?
[2012-11-28 22:33:31 -0500] miah: jtimberman: exactly =)
[2012-11-28 22:34:31 -0500] jtimberman: COOK-1406  % b kitchen test --teardown --configuration ruby :-D
[2012-11-28 22:45:30 -0500] zeroXten: is it possible to modify cookbooks cached locally on a client machine? ie for debugging?
[2012-11-28 22:50:09 -0500] maplebed: do any of you know of a cookbook that will install the ec2-api-tools?
[2012-11-28 22:52:46 -0500] jwcarman: So, how do folks typically do "development" with chef?  What are the best practices for testing/development?
[2012-11-28 22:53:01 -0500] jwcarman: Is there a wiki page on how to set up your development environment?
[2012-11-28 22:53:18 -0500] bluepojo: jwcarman: http://vialstudios.com/guide-authoring-cookbooks.html
[2012-11-28 22:53:19 -0500] bluepojo: bam
[2012-11-28 22:53:25 -0500] bluepojo: everything you ever wanted to know
[2012-11-28 22:53:51 -0500] jwcarman: bluepojo: thank you.  reading...
[2012-11-28 22:54:00 -0500] jtimberman: jwcarman: cookbook development, or development on *chef* itself?
[2012-11-28 22:54:23 -0500] jwcarman: @jtimberman: cookbook dev
[2012-11-28 22:54:24 -0500] makmanalp: bluepojo: that article *is* very good, but I wish it were complete
[2012-11-28 22:55:26 -0500] bluepojo: makmanalp: me too. If you have some idea of what ot add to finish it, I'll make sure Jamie pulls in the changes.
[2012-11-28 22:55:31 -0500] bluepojo: Jamie = reset
[2012-11-28 22:55:50 -0500] bluepojo: the basics are there
[2012-11-28 22:55:57 -0500] bluepojo: but it's just needs a bit more at the end
[2012-11-28 22:56:01 -0500] maplebed: it doesn't mention librarian or spork, both valuable in some workflows...
[2012-11-28 22:56:17 -0500] miah: of course, because reset works on berkshelf =)
[2012-11-28 22:56:36 -0500] bluepojo: berkshelf was written for the berkshelf workflow (which is what the guide is on)
[2012-11-28 22:56:50 -0500] bluepojo: I hven't looked at spork
[2012-11-28 22:57:01 -0500] miah: spork is a neat little knife plugin
[2012-11-28 22:57:15 -0500] spox: table uses spork. it's got lots of handy stuff in it
[2012-11-28 22:57:15 -0500] miah: its not really a cookbook authoring tol though (unless they've added things)
[2012-11-28 22:58:19 -0500] maplebed: so far as I can tell, everybody's made their own tools and workflows, with librarian and berkshelf as the dominant methods for how to organize a local cookbook repository, and spork for how to manage what lives on the chef server.  Of course, I haven't started using any of them yet, so that may be one big misunderstanding.
[2012-11-28 22:58:31 -0500] jwcarman: bluepojo: what if I want to do cookbook development *in* a virtual machine?  Is it easy enough to do so?
[2012-11-28 22:58:48 -0500] bluepojo: jwcarman: I've heard of people using virtualbox inside a vm
[2012-11-28 22:59:06 -0500] jwcarman: but, I'd need to beef up the vm itself, then, right?
[2012-11-28 22:59:10 -0500] bluepojo: possibly
[2012-11-28 22:59:11 -0500] jwcarman: give it a lot of ram
[2012-11-28 22:59:16 -0500] jwcarman: and CPU
[2012-11-28 22:59:27 -0500] bluepojo: it depends what the vm inside the vm needs to do
[2012-11-28 22:59:31 -0500] jwcarman: no big deal.  I don't plan on using my "host" (OS X) much while I'm developing
[2012-11-28 22:59:56 -0500] jtimberman: jwcarman: why not?
[2012-11-28 23:00:07 -0500] bluepojo: I personally do all my dev work on os x and then use vagrant to test the changes I'm making to the cookbook
[2012-11-28 23:00:08 -0500] jtimberman: i do all my cookbook development on OS X :)
[2012-11-28 23:00:15 -0500] jtimberman: what bluepojo said
[2012-11-28 23:00:28 -0500] jwcarman: I use my mbp for multiple things, so I don't want to "muck up" the host
[2012-11-28 23:00:31 -0500] bluepojo: cause the vagrant box is a mirror of what your production boxes look like
[2012-11-28 23:00:32 -0500] jtimberman: though I use vagrant, openstack, ec2, vmware
[2012-11-28 23:00:54 -0500] bluepojo: jwcarman: maybe you're better off dualbooting linux
[2012-11-28 23:01:05 -0500] bluepojo: then you still have your isolated dev environment
[2012-11-28 23:01:06 -0500] jwcarman: The vm will be set up for a specific client that I'm working for
[2012-11-28 23:01:14 -0500] bluepojo: and you don;'t have the vmception hassle
[2012-11-28 23:01:23 -0500] jtimberman: jwcarman: by muck up, you mean "apply changes from cookbooks being developed"?
[2012-11-28 23:01:42 -0500] jtimberman: or "I don't want all these files, repositories, editor configs, etc littering my hard drive"
[2012-11-28 23:02:03 -0500] jwcarman: I just like to keep my host "clean"
[2012-11-28 23:02:19 -0500] jwcarman: I like to keep client stuff separated
[2012-11-28 23:03:15 -0500] jwcarman: I have multiple clients at any given time.  If they all have different requirements for the development environment, it would become quite a mess
[2012-11-28 23:03:37 -0500] bluepojo: ah, so you have a bunch of vms to keep them from overlapping?
[2012-11-28 23:03:49 -0500] bluepojo: maybe you need BSD jails :D
[2012-11-28 23:03:55 -0500] jwcarman: bluepojo: yes
[2012-11-28 23:03:57 -0500] matti: Right.
[2012-11-28 23:04:23 -0500] matti: Any idea why template with mode '0644' will actually do nothing? File is sitting there with 0664.
[2012-11-28 23:04:26 -0500] matti: WTF?
[2012-11-28 23:04:55 -0500] bluepojo: jwcarman: like this: http://olivier.sessink.nl/jailkit/
[2012-11-28 23:05:21 -0500] bluepojo: not saying your current solution is bad, just thinking how you might solve the vmception problem
[2012-11-28 23:05:29 -0500] bluepojo: vms in vms are problematic
[2012-11-28 23:06:20 -0500] jwcarman: Could my dev vm be a "peer" to the vm that gets provisioned?
[2012-11-28 23:07:03 -0500] bluepojo: not if you want to use vagrant, but if you want to treat the new vm like it's just a box, you can still kick off chef-client runs.
[2012-11-28 23:07:06 -0500] miah: i have a vagrant chef server that talks to my other vagrant vm's for testing..
[2012-11-28 23:07:17 -0500] bluepojo: or you can perhaps share directories with the host
[2012-11-28 23:07:22 -0500] bluepojo: and start vagrant from the shared directory
[2012-11-28 23:07:38 -0500] bluepojo: chef-client or chef-solo, that is
[2012-11-28 23:08:33 -0500] jwcarman: miah: you start up (via vagrant) a vm that has chef-server (open source I assume) running in it
[2012-11-28 23:08:41 -0500] miah: yes
[2012-11-28 23:08:53 -0500] jwcarman: I must admit I am very new to all of this chef stuff.  I'm a Java developer. :)
[2012-11-28 23:09:01 -0500] jwcarman: So, sorry if my questions are silly
[2012-11-28 23:10:02 -0500] jwcarman: so, you connect your dev environment (whether that's your host or a vm) to your vm which runs chef-server to upload your stuff.  Then, in another vm that's a peer of the chef-server vm, you run the client which talks to the chef-server vm to download what it needs and provision itself?
[2012-11-28 23:10:15 -0500] matti: jtimberman: Any idea what is going on? I compares SHA1 / MD5 (or whatnot) and fails to notice permission difference.
[2012-11-28 23:10:20 -0500] miah: so, i have the keys (admin / validation).pem exported into a directory. then my other vagrant boxes just source that for configuration. ala 'chef.validation_key_path = File.join('/Users/miahjohnson/projects/ht/chef-repository/.chef-workflow/chef', 'validation.pem')'
[2012-11-28 23:10:44 -0500] miah: matti: mode 0644 vs mode '0644' ?
[2012-11-28 23:11:01 -0500] matti: miah: No, no difference.
[2012-11-28 23:11:05 -0500] miah: i always specify as Fixnum and it works
[2012-11-28 23:11:21 -0500] matti: miah: The actual minitest-chef-handler blows up on this.
[2012-11-28 23:11:45 -0500] miah: really? i have my recipes littered with Fixnum modes..
[2012-11-28 23:11:48 -0500] matti: miah: Not as the "test fail" but with an exception in Chef::Resource (as the re-use them).
[2012-11-28 23:11:53 -0500] miah: i haven't seen that as a cause of a problem
[2012-11-28 23:12:08 -0500] matti: https://github.com/calavera/minitest-chef-handler/issues/34
[2012-11-28 23:12:43 -0500] matti: miah: I have other cookbooks / recipes that have no issue, and this one is not an exception nor its complex or anything.
[2012-11-28 23:12:45 -0500] jtimberman: 00644
[2012-11-28 23:12:49 -0500] matti: miah: Yet it failes.
[2012-11-28 23:13:49 -0500] miah: weird
[2012-11-28 23:14:02 -0500] jwcarman: bluepojo: you're one of the maintainers of berkshelf?
[2012-11-28 23:14:27 -0500] matti: Yeah, bummer.
[2012-11-28 23:14:30 -0500] matti: ;)
[2012-11-28 23:14:52 -0500] miah: are you specifying it as a Fixnum/String in both cases?
[2012-11-28 23:14:59 -0500] miah: eg, in your cookbook and in the minitest?
[2012-11-28 23:15:50 -0500] matti: Yes.
[2012-11-28 23:15:54 -0500] matti: I am consistent.
[2012-11-28 23:15:55 -0500] masterkorp: matti: http://i.imgur.com/GOVRj.gif
[2012-11-28 23:16:03 -0500] zeroXten: ah sorted. The variable class was still node attribute, with unpredictable results
[2012-11-28 23:16:30 -0500] matti: masterkorp: :P
[2012-11-28 23:17:56 -0500] matti: 00644, '644' and '0644' -- all fail.
[2012-11-28 23:18:04 -0500] miah: crazytown
[2012-11-28 23:18:22 -0500] matti: Chef is not noticing 0664 on the file.
[2012-11-28 23:19:33 -0500] matti: Oh well.
[2012-11-28 23:19:44 -0500] matti: Let me reload Vagrant VM.
[2012-11-28 23:20:10 -0500] psykidellic: I have been using chef-solo for couple of months now and I was suggested to give a look into knife-solo too. While researching for it, I also came across littlechef. Seems both chef-solo and littlechef both solve the same issue. Is there any difference? Also, I suppose both knife-solo and soloist are solving the same problem.
[2012-11-28 23:21:37 -0500] programmerq: so it seems like when I install chef server, all users have equal access to the same stuff (cookbooks, roles, nodes, etc). Is it possible to have partitions inside the chef server? It seems like something like that would have to exist for hosted chef to work the way it does.
[2012-11-28 23:21:52 -0500] matti: Ding ding ding...
[2012-11-28 23:21:56 -0500] matti: Now it work.
[2012-11-28 23:22:01 -0500] miah: programmerq: it exists in hosted chef. but not in open source chef.
[2012-11-28 23:22:06 -0500] matti: I shall name this The WTF of the day.
[2012-11-28 23:22:18 -0500] programmerq: miah: what about private chef?
[2012-11-28 23:22:18 -0500] miah: matti: how is babby formed?
[2012-11-28 23:22:31 -0500] miah: programmerq: private chef is hosted-chef on premise, so its supported there.
[2012-11-28 23:23:15 -0500] matti: miah: What? ;]
[2012-11-28 23:25:21 -0500] matti: I seriously have no idea.
[2012-11-28 23:25:39 -0500] bluepojo: jwcarman: yeah, I am
[2012-11-28 23:26:02 -0500] matti: I have my team mate sitting next to me, who was looking at this with me... and we were both "WAT?!" and then reload fixed it.
[2012-11-28 23:26:25 -0500] bluepojo: I wrote the first version of it, then reset jumped in and added a lot of cool features like the uploader and central store and such
[2012-11-28 23:26:41 -0500] bluepojo: I still contribute here and there, but the tool is pretty complete at this point
[2012-11-28 23:34:30 -0500] paigeat: hi, in terms of ssl unwrapping daemons like stud and stunnel, are their any ssl wrapping daemons? (HaProxy HTTP listener->makes a new https request that closely reflects the http request->https server)
[2012-11-28 23:34:57 -0500] miah: what?
[2012-11-28 23:35:11 -0500] miah: stunnel is a ssl wrapper..
[2012-11-28 23:35:26 -0500] jwcarman: bluepojo: so, you basically just mount your cookbooks directory in your "provisioned" vm and then run chef-solo pointing at it?
[2012-11-28 23:35:36 -0500] miah: but im confused about what youre saying regarding haproxy
[2012-11-28 23:35:36 -0500] paigeat: my http client doesnt support ssl, I need to make a request to an http proxy that gets made into an https request
[2012-11-28 23:36:13 -0500] miah: so you are unwrapping ssl at the gateway, hitting haproxy, then need ssl enabled again?
[2012-11-28 23:36:18 -0500] paigeat: ^ that last line should pretty much explain what I need and as near as I can tell stunnel doesn't do that
[2012-11-28 23:36:22 -0500] paigeat: it just unwraps
[2012-11-28 23:36:33 -0500] miah: stunnel is a ssl tunnel
[2012-11-28 23:36:59 -0500] miah: "The stunnel program is designed to work as an SSL encryption wrapper between remote client and local (inetd-startable) or remote server."
[2012-11-28 23:37:01 -0500] paigeat: can it do that thing I said I need it to do though
[2012-11-28 23:37:14 -0500] miah: yes, it has been able to do that for ~10 years.
[2012-11-28 23:37:19 -0500] paigeat: http request -> some kinda proxy -> https request
[2012-11-28 23:37:23 -0500] paigeat: ok
[2012-11-28 23:37:41 -0500] paigeat: just want to make sure I'm not looking through the doc like an add person for no reason trying to find it and not having any luck
[2012-11-28 23:38:06 -0500] paigeat: I already figured out how to https request -> stud -> http
[2012-11-28 23:38:10 -0500] paigeat: that works great I did that months ago
[2012-11-28 23:39:45 -0500] paigeat: but today I'm trying to make a proxy to cloudfiles on rackspace which will use haproxy to rewrite the headers to contain the key and username before making a request to an http-to-https tunnel so that I'm not putting the key and username on every machine that needs to use cloudfiles (which happens to be the same and only key for managing cloudservers incidentally...)
[2012-11-28 23:39:59 -0500] paigeat: maybe they fixed it now so I an make new keys but I doubt it
[2012-11-28 23:40:23 -0500] paigeat: still dont want them on all the vm's that are going to be using cloudfiles.
[2012-11-28 23:40:36 -0500] paigeat: I'll take my chances with one
[2012-11-28 23:41:52 -0500] paigeat: anyway thanks for the verification, I'll take another look but I thnk Im about to go home and shower and stuff since I haven't really had time between trying to find a new place to live and work and
[2012-11-28 23:45:41 -0500] bluepojo: jwcarman: berkshelf has a vagrant plugin that handles all that for you. It'll automatically mount your cookbooks and tell chef-solo where to find them.

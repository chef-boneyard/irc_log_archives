[2012-11-22 00:00:28 -0500] bluepojo: yeah, even berkshelf did that originally it makes sense in the chef-repo workflow
[2012-11-22 00:00:30 -0500] yfeldblum: bluepojo, equivalently, it's more just the happenstance of how i was using chef at the time :D
[2012-11-22 00:01:16 -0500] bluepojo: the only reason it doesn't now is cause of the workflow evolution toward having Berksfiles in cookbook directories and having cookbooks live as their own pieces of software
[2012-11-22 00:01:34 -0500] bluepojo: but if you don't do that, then it's less important cause you can trust the chef-repo to be your local cache
[2012-11-22 00:01:37 -0500] jtimberman: alexw: i'm using that with 10.16.2
[2012-11-22 00:01:38 -0500] yfeldblum: bluepojo, there's also the problem of tmpdir and moving directories atomically ... homedir vs chefdir ... windows vs linux ...
[2012-11-22 00:01:48 -0500] jtimberman: alexw: are you using vagrant via the full package installer?
[2012-11-22 00:01:56 -0500] jtimberman: you might have to do vagrant gem install chef
[2012-11-22 00:02:02 -0500] yfeldblum: bluepojo, librarian might start doing that too at some point ... best watch out! :D
[2012-11-22 00:02:04 -0500] alexw: jtimberman: yeah I downloaded it from their site
[2012-11-22 00:02:44 -0500] yfeldblum: bluepojo, but two projects is healthier for the user than just one :D
[2012-11-22 00:02:49 -0500] alexw: jtimberman: my use case is a little different though - I want to deploy domains running the same role
[2012-11-22 00:03:08 -0500] sts: yfeldblum: thank you.
[2012-11-22 00:03:32 -0500] alexw: jtimberman: I can't see any other way to run it on the same VM, as I have an environment setup for each region (tld) i.e. dev_au dev_us dev_uk
[2012-11-22 00:03:45 -0500] alexw: bluepojo: installing it now - thanks
[2012-11-22 00:04:14 -0500] yfeldblum: sts, `knife data bag create BAGNAME` is like 'create table BAGNAME` and `knife data bag from file BAGNAME ITEMNAME` is like `insert into BAGNAME json-from ITEMNAME`
[2012-11-22 00:04:37 -0500] bluepojo: yfeldblum: I agree
[2012-11-22 00:05:06 -0500] alexw: Still getting /Applications/Vagrant/embedded/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- chef (LoadError)
[2012-11-22 00:07:49 -0500] alexw: jtimberman: did I have to install vagrant using a differen tmehtod
[2012-11-22 00:08:19 -0500] jtimberman: alexw: vagrant has its own separate ruby installation in the full embedded package, you need to install the chef gem into that.
[2012-11-22 00:14:40 -0500] jtimberman: okay you crazy kids, have a good weekend and for those in the USA, a happy Thanksgiving.
[2012-11-22 00:14:56 -0500] yfeldblum: bluepojo, but the first thing i need to do with librarian is figure out how to write an iterative (non-recursive) resolver ...
[2012-11-22 00:15:15 -0500] yfeldblum: bluepojo, or look at reset/solve magic
[2012-11-22 00:15:56 -0500] bluepojo: oh do you hit stack depth problems?
[2012-11-22 00:15:59 -0500] yfeldblum: bluepojo, but librarian is also a have-fun-with-it-and-go-nuts project for me at the same time as it is a useful project :D
[2012-11-22 00:16:42 -0500] yfeldblum: bluepojo, no, it uses one stack frame for a multiple unresoved dependencies at once
[2012-11-22 00:17:15 -0500] yfeldblum: bluepojo, also the allowed stack depth numbers in the hundreds, apparently, and i don't know if there even are that many cookbooks ;D
[2012-11-22 00:17:29 -0500] bluepojo: ah I see
[2012-11-22 00:17:39 -0500] bluepojo: I wonder how many cookbooks there are
[2012-11-22 00:17:51 -0500] alexw: jtimberman: thanks for the help :)
[2012-11-22 00:18:08 -0500] yfeldblum: bluepojo, it's a modification on the standard breadth-first-search algorithm
[2012-11-22 00:18:27 -0500] bluepojo: $ knife cookbook list | wc -l
[2012-11-22 00:18:27 -0500] bluepojo:      205
[2012-11-22 00:18:38 -0500] bluepojo: that's just what we use, too there's plenty we don't
[2012-11-22 00:19:27 -0500] erikh: well, to be fair, you guys write like 8 cookbooks for every service
[2012-11-22 00:21:29 -0500] bluepojo: 1 cookbook for every service
[2012-11-22 00:21:40 -0500] bluepojo: and 1 cookbook for dependencies
[2012-11-22 00:21:52 -0500] bluepojo: like nginx is a cookbook
[2012-11-22 00:21:56 -0500] bluepojo: but so is leagueoflegends.com
[2012-11-22 00:36:05 -0500] alexw: Is there anyway to speed up the downloading of files from chef-server?
[2012-11-22 00:36:27 -0500] alexw: i.e. Storing updated ...... in the cache
[2012-11-22 01:00:13 -0500] rafaelmagu: Anyone able to use omnibus_updater in ubuntu 12.04?
[2012-11-22 01:00:29 -0500] rafaelmagu: Getting 404s while downloading the package
[2012-11-22 01:01:04 -0500] pedahzur: Is there a place in the docs that lists all values returned by platform ( http://wiki.opscode.com/display/chef/Recipes#Recipes-platform%3F )  I'm making a directory tree for files/ and want to know what to name a Suse system ( http://wiki.opscode.com/display/chef/File+Distribution )
[2012-11-22 01:02:33 -0500] rafaelmagu: Hmm, solved my own issue: https://github.com/hw-cookbooks/omnibus_updater/issues/5
[2012-11-22 01:10:27 -0500] ssd7: Ohai Chefs!
[2012-11-22 01:11:53 -0500] erkules: hi, do I need couchdb for a running installation?
[2012-11-22 01:17:55 -0500] rafaelmagu: Getting a "FATAL: Gem::LoadError: can't activate mime-types-1.19, already activated mime-types-1.18"
[2012-11-22 01:18:01 -0500] rafaelmagu: Anyone else seen this?
[2012-11-22 01:21:01 -0500] pedahzur: erkules: a running installation of what?  Chef doesn't have any dependencies on CouchDB that I know of.
[2012-11-22 01:26:37 -0500] Glace: Hi, any plan for versioning on roles or any good way to avoid role being overidden?
[2012-11-22 01:27:38 -0500] alexw: bluepojo: do you run leagueoflegends.com
[2012-11-22 01:27:38 -0500] erkules: pedahzur: http://wiki.opscode.com/display/chef/Installing+Chef+Server
[2012-11-22 01:27:55 -0500] erkules: pedahzur: Non-Ruby dependencies couchdb ...
[2012-11-22 01:29:59 -0500] alexw: erkules: can't you just use the chef-server cookbook
[2012-11-22 01:32:49 -0500] githubble: hi I have just reloaded a box, that is referencing a cookbook, which I have in github source control, BUT it's erroring on a default.rb, which is different to github.... how can I know where my path /srv/chef/file_store/cookbooks/ is?  it seems to be pointing to an old location
[2012-11-22 01:33:01 -0500] githubble: new location is ~/chef-repo/cookbooks/
[2012-11-22 01:33:39 -0500] pedahzur: erkules: Sorry!  I was just thinking about running, say, chef solo on a box.  Wasn't thinking about the server.
[2012-11-22 01:39:26 -0500] bluepojo: alexw: I'm on the deployment tools team at Riot Games, so I write the tools and teach people how to use chef so that the guys that run leagueoflegends.com can deploy their stuff.
[2012-11-22 01:41:48 -0500] bluepojo: hence Berkshelf is under RiotGames org on github.
[2012-11-22 01:45:33 -0500] erkules: alexw: so this means no? ;)
[2012-11-22 01:45:54 -0500] alexw: erkules: yes
[2012-11-22 01:45:56 -0500] alexw: erkules: you will
[2012-11-22 01:46:00 -0500] erkules: pedahzur: np:)
[2012-11-22 01:46:38 -0500] githubble: can anyone help with changing the correct path to /srv/chef/file_store/cookbooks/ ?
[2012-11-22 01:46:41 -0500] erkules: ok thx
[2012-11-22 01:46:50 -0500] alexw: erkules: I guess its no then
[2012-11-22 01:47:09 -0500] rafaelmagu: githubble: are you using berkshelf or librarian by any chance?
[2012-11-22 01:47:22 -0500] alexw: http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2012-11-22 01:47:27 -0500] githubble: rafaelmagu: no hosted-chef
[2012-11-22 01:47:32 -0500] alexw: erkules: looks to me like you need CouchDB
[2012-11-22 01:48:09 -0500] rafaelmagu: githubble: both tools are mentioned are for managing cookbooks, but they take different approaches to where the cookbooks are stored
[2012-11-22 01:48:24 -0500] rafaelmagu: If you're using any of them, you wouldn't really want to mess about with paths
[2012-11-22 01:48:53 -0500] alexw: bluepojo: ahh berkshelf is what i've been looking for
[2012-11-22 01:48:59 -0500] githubble: rafaelmagu: looks like I need to change my path .... can you assist?
[2012-11-22 01:49:38 -0500] yfeldblum: rafaelmagu, librarian-chef is the name of the tool :D
[2012-11-22 01:50:01 -0500] yfeldblum: rafaelmagu, librarian by itself is an abstract library/framework with absolutely no connection to chef or cookbooks
[2012-11-22 01:50:08 -0500] rafaelmagu: yfeldblum: fair enough ;)
[2012-11-22 01:50:11 -0500] rafaelmagu: I stand corrected
[2012-11-22 01:50:14 -0500] githubble: I have cloned chef-repo and have my code now in my own private git repo
[2012-11-22 01:50:45 -0500] rafaelmagu: githubble: when you say "reloaded a box", is this a Vagrant box?
[2012-11-22 01:51:00 -0500] yfeldblum: rafaelmagu, :D
[2012-11-22 01:51:06 -0500] githubble: yes it is which I have also running out of github private repo
[2012-11-22 01:51:22 -0500] rafaelmagu: Using chef-solo?
[2012-11-22 01:52:14 -0500] githubble: rafaelmagu: hosted-chef
[2012-11-22 01:53:18 -0500] rafaelmagu: githubble: ah, right. So you're using hosted-chef with the Vagrant box, and the Chef run fails on a file that is different from the file you have on your private GitHub repo
[2012-11-22 01:53:50 -0500] githubble: YES YES YES :):)
[2012-11-22 01:53:56 -0500] githubble: spot on
[2012-11-22 01:54:08 -0500] rafaelmagu: githubble: silly question: did you upload the cookbooks on your private repo back to hosted-chef?
[2012-11-22 01:54:32 -0500] githubble: yes I have
[2012-11-22 01:54:39 -0500] rafaelmagu: hmmm
[2012-11-22 01:54:49 -0500] githubble: oops no
[2012-11-22 01:55:10 -0500] githubble: I have uploaded them to github, but not back to host-chef
[2012-11-22 01:55:19 -0500] rafaelmagu: There's the problem
[2012-11-22 01:55:36 -0500] githubble: so when I do a git commit, I should knife cookbook upload 'cookbook' as well correct?
[2012-11-22 01:55:45 -0500] rafaelmagu: Chef will always pull the cookbooks from the Chef server (in your case, hosted Chef)
[2012-11-22 01:55:52 -0500] rafaelmagu: githubble: yup
[2012-11-22 01:55:59 -0500] githubble: ;) thanks 10 million pesos
[2012-11-22 01:56:21 -0500] rafaelmagu: np
[2012-11-22 01:57:59 -0500] githubble: rafaelmagu: I guess I could move from hosted-chef to chef-solo to have it all under github source control?
[2012-11-22 01:58:18 -0500] rafaelmagu: githubble: hosted-chef is fine, but you were missing a step in your workflow
[2012-11-22 01:58:32 -0500] rafaelmagu: githubble: I would suggest using chef-solo in conjunction with hosted-chef
[2012-11-22 01:58:43 -0500] rafaelmagu: Then you can test your changes with Vagrant locally
[2012-11-22 01:58:56 -0500] rafaelmagu: And then when you are happy with the changes, upload them to your Chef server
[2012-11-22 01:59:11 -0500] rafaelmagu: Just keep in mind anything using Chef search in a recipe won't work in chef-solo
[2012-11-22 01:59:21 -0500] githubble: ooh while I am here, how do you use this IRC efficiently, I always type username:
[2012-11-22 01:59:25 -0500] githubble: is there a better way?
[2012-11-22 01:59:34 -0500] rafaelmagu: Nope
[2012-11-22 01:59:43 -0500] rafaelmagu: That's about it, really
[2012-11-22 02:00:55 -0500] githubble: rafaelmagu: so when I type your name, with a colon does it come up in red for you?
[2012-11-22 02:01:08 -0500] rafaelmagu: Even without the colon works
[2012-11-22 02:01:16 -0500] rafaelmagu: It's all on the client side, anyway
[2012-11-22 02:01:21 -0500] githubble: ahhh! ok :)
[2012-11-22 02:01:43 -0500] githubble: now I'm going on a holiday see you on the other side
[2012-11-22 02:01:50 -0500] rafaelmagu: Cya
[2012-11-22 02:11:32 -0500] jkyle: so, there's two functions for recipe lookup on a node. node.recipes() and node.recipe? "recipename"
[2012-11-22 02:11:45 -0500] jkyle: what I'm seeing is that node.recipes() => ["one", "two", "three"]
[2012-11-22 02:12:02 -0500] jkyle: but node.recipe? "one" returns false
[2012-11-22 02:13:19 -0500] dergachev: Hi folks! I have a question about vagrant-snap. Anyone know if it would make sense to make snapshots in the middle of a chef run, say right after installing all dependencies, and before running the deploy recipe I'm currently hacking on. I'm currently doing "vagrant destroy --force && vagrant up" but it takes too long.
[2012-11-22 02:14:34 -0500] rafaelmagu: How does one perform a knife search on "platform:ubuntu 10.04" ?
[2012-11-22 02:14:44 -0500] rafaelmagu: That space seems to break things
[2012-11-22 02:14:58 -0500] rafaelmagu: Escaping the space with \ doesn't work
[2012-11-22 02:15:01 -0500] jkyle: so is node.recipe? doing something different than node.recipes().include?
[2012-11-22 02:15:14 -0500] rafaelmagu: Neither enclosing the whole term in single quotes
[2012-11-22 02:16:40 -0500] whilp: jkyle: the latter expands the run_list, IIRC
[2012-11-22 02:16:43 -0500] whilp: while the former does not
[2012-11-22 02:19:02 -0500] jkyle: so if I hve a role chef_server that includes chef-server recipe plus some otheres, the unexpanded recipe list does not match?
[2012-11-22 02:19:38 -0500] jkyle: hwo might I introspect the expanded vs. unexpanded run list so I can get some visibility into that
[2012-11-22 02:26:44 -0500] rafaelmagu: Again, figured it out: knife search node "platform:ubuntu AND platform_version:10.04"
[2012-11-22 02:32:36 -0500] alexw: https://github.com/opscode-cookbooks/apache2 how do I disable the default vhost
[2012-11-22 03:01:14 -0500] alexw: I'm trying to override a cookbooks default attributes in the env
[2012-11-22 03:01:18 -0500] alexw: but it is not coming through
[2012-11-22 03:10:32 -0500] githubble: rafaelmagu are you around? can you elaborate on your earlier comment: <rafaelmagu> githubble: I would suggest using chef-solo in conjunction with hosted-chef
[2012-11-22 03:10:49 -0500] rafaelmagu: githubble: it's not really in conjunction
[2012-11-22 03:11:11 -0500] rafaelmagu: githubble: but I'd setup the Vagrantfile with the paths to the cookbooks on your local disk
[2012-11-22 03:11:21 -0500] rafaelmagu: Instead of using the chef-server block of code
[2012-11-22 03:12:44 -0500] githubble: rafaelmagu sounds like a plan, as I start rolling this out for my dev team, it will need to be functional
[2012-11-22 03:13:08 -0500] rafaelmagu: :)
[2012-11-22 03:13:27 -0500] rafaelmagu: Is there a Logstash-specific channel around?
[2012-11-22 03:13:41 -0500] rafaelmagu: Why do I bother asking before doing the /join?
[2012-11-22 03:13:43 -0500] rafaelmagu: :P
[2012-11-22 03:13:47 -0500] rafaelmagu: There is, btw
[2012-11-22 03:14:58 -0500] githubble: rafaelmagu so how do I transition from hosted-chef to chef-solo? is it an easy transition?
[2012-11-22 03:16:02 -0500] alexw: gaaaaah why not override!
[2012-11-22 03:16:48 -0500] rafaelmagu: githubble: you don't transition per se
[2012-11-22 03:16:53 -0500] rafaelmagu: Just change your Vagrantfile
[2012-11-22 03:17:01 -0500] rafaelmagu: Comment out the chef-server block
[2012-11-22 03:17:07 -0500] rafaelmagu: Uncomment the chef-solo part
[2012-11-22 03:17:18 -0500] rafaelmagu: Update with the paths to your checked-out git repo
[2012-11-22 03:17:38 -0500] alexw: https://gist.github.com/4129284
[2012-11-22 03:17:44 -0500] githubble: rafaelmagu sure, but don't you need to setup chef-solo locally?
[2012-11-22 03:19:10 -0500] alexw: is giving me undefined method `[]' for nil:NilClass
[2012-11-22 03:20:18 -0500] rafaelmagu: githubble: nope, Vagrant takes care of setting it up in the VM
[2012-11-22 03:20:34 -0500] rafaelmagu: chef-solo is nothing more than chef pulling stuff from local disks, with no centralized tools
[2012-11-22 03:20:44 -0500] rafaelmagu: knife won't work, mind you
[2012-11-22 03:20:50 -0500] rafaelmagu: There is no 'uploading' of stuff in solo
[2012-11-22 03:22:00 -0500] githubble: rafaelmagu ok so its a bit of a difference in mindset to learn?
[2012-11-22 03:22:03 -0500] killfill: hi
[2012-11-22 03:22:17 -0500] rafaelmagu: githubble just slightly
[2012-11-22 03:22:28 -0500] killfill: when running chef, i see deploy_revision asking for "Are you sure you want to continue connecting (yes/no)?"
[2012-11-22 03:22:38 -0500] killfill: (its connecting to my ssh repo...)
[2012-11-22 03:22:52 -0500] killfill: how do i make it not ask for this?, and asumme yes?
[2012-11-22 03:23:52 -0500] alexw: Am I going insane???? https://gist.github.com/4129284
[2012-11-22 03:24:14 -0500] rafaelmagu: Ok, gotta go
[2012-11-22 03:24:19 -0500] rafaelmagu: Boat test to do
[2012-11-22 03:24:33 -0500] rafaelmagu: Catch you guys tomorrow
[2012-11-22 03:35:54 -0500] julian: Hey guys I want to use Chef::ShellOut but it is not working.  In my recipe do I have to declare the recipe?
[2012-11-22 03:36:09 -0500] julian: library I mean?
[2012-11-22 03:38:10 -0500] yfeldblum: julian, it's better if you present as much of the observable symptoms as you can (gist, pastie, etc ... error messages, backtrace, etc); giving a cursory mention of the problem and then asking if some particular solution is ideal is ... not going to work
[2012-11-22 03:39:00 -0500] julian: Thanks yfeldblum. Have you used libraries in a recipe?  If so do you have to declare them?
[2012-11-22 03:40:08 -0500] alexw: Doesn't default environment have precedence over recipe?
[2012-11-22 03:40:31 -0500] julian: so I am running something like "cmd = Chef::ShellOut.new(<cmd here>)
[2012-11-22 03:40:33 -0500] julian: "
[2012-11-22 03:40:44 -0500] yfeldblum: julian, that should be fine
[2012-11-22 03:40:52 -0500] yfeldblum: alexw, i don't know what that means
[2012-11-22 03:40:56 -0500] alexw: yfeldblum: https://gist.github.com/4129284
[2012-11-22 03:41:13 -0500] yfeldblum: julian, what's the issue?
[2012-11-22 03:41:23 -0500] alexw: I get undefined method `[]' for nil:NilClass
[2012-11-22 03:42:50 -0500] yfeldblum: alexw, do: Chef::Log.info("\n#{JSON.pretty_generate(node.to_hash)}")
[2012-11-22 03:43:05 -0500] yfeldblum: alexw, that will show you what chef thinks the node data is in the log
[2012-11-22 03:43:36 -0500] julian: Issue is that that piece of code is not running the first time I run the recipe.  The second time it does.  So weird.
[2012-11-22 03:45:06 -0500] yfeldblum: julian, are you missing this line? - https://github.com/opscode/chef/blob/master/lib/chef/mixin/shell_out.rb#L30
[2012-11-22 03:48:08 -0500] julian: Do I have to include a "require" statement?
[2012-11-22 03:48:19 -0500] alexw: yfeldblum: wow thats alot of detail
[2012-11-22 03:48:40 -0500] julian: I am running: "snapshot = Chef::ShellOut.new(". /etc/profile.d/aws_tools.sh; ec2-describe-snapshots | grep www_db | sort -k5 | tail -1     | cut -f2")"
[2012-11-22 03:48:47 -0500] julian: But that does not seem to run off the bat.
[2012-11-22 03:49:12 -0500] yfeldblum: alexw, :D
[2012-11-22 03:49:16 -0500] julian: I then do the "run_command" method.
[2012-11-22 03:49:31 -0500] alexw: yfeldblum: yeah - I have default attributes in my cookbook (attributes/default) and they are overriding it
[2012-11-22 03:50:02 -0500] alexw: I don't understand why - I thought anything set in environment will take precende over attributes in cookbook
[2012-11-22 03:51:51 -0500] yfeldblum: alexw, don't know ... but at least now you're in a better position to debug it :D
[2012-11-22 03:53:08 -0500] alexw: yfeldblum: yes and no :P
[2012-11-22 03:53:13 -0500] alexw: yfeldblum: but thanks
[2012-11-22 03:54:10 -0500] leifmadsen: I'm trying to figure out how to break things out according to acrmp at this comment, but my ruby knowledge is just not enough to move this forward. If anyone has any ideas for me to try, I'm willing to continue hacking at it... https://github.com/calavera/minitest-chef-handler/issues/34#issuecomment-10480725
[2012-11-22 03:56:13 -0500] alexw: yfeldblum: https://gist.github.com/4129370
[2012-11-22 03:57:08 -0500] alexw: yfeldblum: am I missing something
[2012-11-22 03:57:23 -0500] yfeldblum: alexw, there's a problem in the fact that it's a scalar in one place and an array in the other place
[2012-11-22 03:58:13 -0500] alexw: yfeldblum: haha - still learning ruby
[2012-11-22 04:07:53 -0500] alexw: Still have no idea - can anyone help ? https://gist.github.com/4129370
[2012-11-22 04:09:49 -0500] yfeldblum: alexw, it's an array in line 3 and it's a scalar (single value) in line 7
[2012-11-22 04:10:27 -0500] alexw: yfeldblum: but shouldn't the value still come from dev_au?
[2012-11-22 04:10:46 -0500] yfeldblum: alexw, should it?
[2012-11-22 04:11:02 -0500] yfeldblum: alexw, try making it a scalar (single value) in both, or making it an array in both
[2012-11-22 04:11:35 -0500] alexw: so default['apache2']['listen_ports'] = [ "80" ]
[2012-11-22 04:12:03 -0500] yfeldblum: alexw, yeah try that
[2012-11-22 04:16:06 -0500] alexw: yfeldblum: :( stil ldoing it
[2012-11-22 04:17:19 -0500] yfeldblum: alexw, to be sure, did you upload the environment?
[2012-11-22 04:17:57 -0500] alexw: yup... knife environment from file dev_au.rb
[2012-11-22 04:18:53 -0500] alexw: gui shows these changes
[2012-11-22 04:19:16 -0500] yfeldblum: alexw, the node in question is of that chef-environment?
[2012-11-22 04:20:38 -0500] alexw: oh my god.... there goes 2 hours of my life
[2012-11-22 04:21:09 -0500] alexw: had :env in vagrant, used :environment :( so chef.environment wasn't getting set
[2012-11-22 04:21:22 -0500] yfeldblum: alexw, :D
[2012-11-22 04:21:28 -0500] alexw: wow :(
[2012-11-22 04:21:31 -0500] yfeldblum: alexw, i call that 2 hours of learning
[2012-11-22 04:21:59 -0500] alexw: hahahaha
[2012-11-22 04:22:14 -0500] alexw: there we go
[2012-11-22 04:27:53 -0500] bagheera: hi, I have the following in a solo recipe:
[2012-11-22 04:27:56 -0500] bagheera: package "my-server" do   action :upgrade   source "/tmp/my-server-12.4.0-16050.noarch.rpm"   provider Chef::Provider::Package::Rpm end
[2012-11-22 04:28:25 -0500] bagheera: when i run, it says "no candidate version - nothing to do"
[2012-11-22 04:28:38 -0500] bagheera: it detects currently installed version alright
[2012-11-22 04:28:45 -0500] bagheera: any ideas?
[2012-11-22 04:40:41 -0500] alexw: yfeldblum: thanks mate :)
[2012-11-22 04:40:55 -0500] yfeldblum: alexw, no probs
[2012-11-22 05:29:58 -0500] bmcgee: hey guys, in my recipe I want to do a search for some nodes and then make that node list available to a template. How do i go about doing that?
[2012-11-22 05:37:49 -0500] bmcgee: nvm found the variables option
[2012-11-22 05:58:41 -0500] bmcgee: Has anyone tried using the iptables cookbook with passing variables into the template?
[2012-11-22 06:05:01 -0500] pedahzur: Based on the fact that cookbook_file has a "create" and "create_if_missing" variants, I'm guessing it will overwrite by default? (I.e. won't throw an error if the file exists, and will just replace it with its version from the cookbook?)
[2012-11-22 06:05:09 -0500] pedahzur: Is my assumption correct?
[2012-11-22 06:07:28 -0500] bmcgee: Sounds right, but I'd do a quick spike to check
[2012-11-22 06:12:58 -0500] pedahzur: bmcgee: Yup, that's the way it works. :)
[2012-11-22 06:13:10 -0500] bmcgee: Always good to know :)
[2012-11-22 06:18:26 -0500] julian: Hey guys, got some questions about variable assignment.  I am finding that my variables are assigned not in the order of the recipe run list but at the beginning of a chef run before the recipes actually start running.  If this is the case this is bad because I need certain actions to take place before the variable assignment takes place.   Thoughts?
[2012-11-22 06:20:48 -0500] bmcgee: julian: as I understand it there's a pre-processing stage that happens first which resolves all the attributes and dependencies and then works out in what order things need to happen. This is useful for multiple dependencies on the same recipe and so on
[2012-11-22 06:21:10 -0500] julian: Is there a way to delay setting of a variable?
[2012-11-22 06:21:22 -0500] bmcgee: I have no idea, still quite new to chef
[2012-11-22 06:21:38 -0500] bmcgee: what is it you're trying to do?
[2012-11-22 06:22:00 -0500] bmcgee: Sounds like you have variables dependent on the outcome of some recipes, seems like a natural fit for search
[2012-11-22 06:22:31 -0500] julian: I am using Chef::ShellOut to get some output to use in a recipe.  But it relies on tools that are installed during the chef run process :-(
[2012-11-22 06:23:07 -0500] julian: The preprocessing stage runs utilities that do not exist yet.
[2012-11-22 06:24:29 -0500] bmcgee: perhaps you can have the earlier recipe set some node attributes which can then be picked up later by the dependent recipes?
[2012-11-22 06:25:20 -0500] bmcgee: that said i don't really know what you're trying to do. If you are able to share the use case I might have some ideas
[2012-11-22 06:25:43 -0500] bmcgee: not necessarily good ideas, but at the very least 'different' ideas :)
[2012-11-22 06:28:14 -0500] julian: sure.  basically I need to get the latest snapshot of a volume.
[2012-11-22 06:29:00 -0500] julian: Then restore it.   I have a recipe that does this by using Shellout to run bash and then save the output to a variable.  Then I act on that variable by restoring the snapshot.
[2012-11-22 06:29:22 -0500] julian: Problem is the aws tools are not installed at this point.
[2012-11-22 06:30:06 -0500] julian: Preprocessing runs the bash to set the variable before the tools are in place (this happens later when recipes are run).
[2012-11-22 06:30:21 -0500] julian: Does this make sense?
[2012-11-22 06:30:49 -0500] bmcgee: so you're using ec2 with EBS volumes and using the AWS api to restore the latest snapshot of a volume on a new VM that you've provisioned through chef?
[2012-11-22 06:35:23 -0500] julian: yah.
[2012-11-22 06:35:34 -0500] julian: http://wiki.opscode.com/display/chef/Attributes
[2012-11-22 06:35:41 -0500] julian: This kind of explains it.
[2012-11-22 06:35:48 -0500] julian: And the fix.
[2012-11-22 06:35:59 -0500] julian: Still trying to make sense of it.
[2012-11-22 06:39:43 -0500] bmcgee: I've never tried to do this on ec2 but my guess would be try to get the aws tools installed first and use attributes to pass info to dependent recipes
[2012-11-22 06:43:08 -0500] BryanWB_: ohai chefs
[2012-11-22 06:43:09 -0500] BryanWB_: !
[2012-11-22 06:43:37 -0500] cwj: julian: have you looked at the resources provided by the aws cookbook? its possible you are reinventing the wheel
[2012-11-22 06:43:47 -0500] cwj: ohai bryan :)
[2012-11-22 06:43:59 -0500] BryanWB_: hey cwj ;)
[2012-11-22 06:44:18 -0500] bmcgee: out of curiosity where'd Ohai come from?
[2012-11-22 06:44:47 -0500] cwj: i always assumed it was a lulzification of "oh, hi"
[2012-11-22 06:45:08 -0500] cwj: oh hi there mr computer, tell me all about yourself
[2012-11-22 06:45:30 -0500] cwj: *huge json plops out*
[2012-11-22 06:45:32 -0500] bmcgee: and the 'Ohai speaks for the system" is a torn reference?
[2012-11-22 06:45:34 -0500] BryanWB_: i think ohai comes from icanhazcheezburger website
[2012-11-22 06:45:37 -0500] bmcgee: *tron
[2012-11-22 06:47:24 -0500] cwj: i know i'm a dork because i'm excited about having fresh batteries in my UPS
[2012-11-22 06:49:33 -0500] bmcgee: :)
[2012-11-22 07:21:56 -0500] bmcgee: hey i'm still stuck with this iptables variables issue. Am i doing something stupid here: https://gist.github.com/4129806
[2012-11-22 07:22:05 -0500] bmcgee: can't get the variables to resolve in the template
[2012-11-22 07:39:42 -0500] BryanWB_: kallistec: around?
[2012-11-22 07:40:09 -0500] erikh: w 2
[2012-11-22 07:41:44 -0500] BryanWB_: sup sup erikh
[2012-11-22 07:46:07 -0500] alexw: Whats the best method of migrating schemas etc in PHP
[2012-11-22 08:02:15 -0500] erikh: BryanWB_: hey dude
[2012-11-22 08:39:44 -0500] sakshiagarwal: hey
[2012-11-22 08:40:34 -0500] sakshiagarwal: i m getting the problem in installing chef on my redhat ver 5.7 x86.64 virtual machine
[2012-11-22 08:40:45 -0500] sakshiagarwal: i m following these steps
[2012-11-22 08:40:55 -0500] sakshiagarwal: http://blog.frameos.org/2011/04/29/installing-chef-server-0-10-in-centos-5-rhel-5/comment-page-1/#comment-4621
[2012-11-22 08:41:24 -0500] sakshiagarwal: when i am doing curl http://localhost:4000
[2012-11-22 08:41:31 -0500] sakshiagarwal: it is giving an error
[2012-11-22 08:41:44 -0500] sakshiagarwal: --2012-11-22 03:38:57--  http://localhost:4000/ Resolving localhost... 127.0.0.1 Connecting to localhost|127.0.0.1|:4000... failed: Connection refused.
[2012-11-22 08:41:51 -0500] Tensibai: Hi
[2012-11-22 08:42:22 -0500] Tensibai: I'm still fighting to understand where the problem is with attributes nesting in 'loop'
[2012-11-22 08:42:23 -0500] sakshiagarwal:  please help me in this problem
[2012-11-22 08:43:09 -0500] Tensibai: If someone could have a look over this gist and tell me his/her though about it: https://gist.github.com/4118081
[2012-11-22 08:49:24 -0500] Tensibai: sakshiagarwal: sorry I entered the channel lately and didn't see the description of your problem
[2012-11-22 08:49:33 -0500] bmcgee: sakshiagarwal: that error indicates chef server hasn't started or has had trouble binding to the port.
[2012-11-22 08:49:43 -0500] Tensibai: (I'm not sure I can help but I can try)
[2012-11-22 08:49:47 -0500] bmcgee: what does the log say (can't remember where it is)
[2012-11-22 08:51:51 -0500] bmcgee: probably check /var/log for the chef-server log
[2012-11-22 08:52:26 -0500] sakshiagarwal: i am getting problem in installing chef server on my rehat 5.7 virtual machine
[2012-11-22 08:52:35 -0500] sakshiagarwal: i m using this method
[2012-11-22 08:52:47 -0500] sakshiagarwal: http://blog.frameos.org/2011/04/29/installing-chef-server-0-10-in-centos-5-rhel-5/comment-page-1/#comment-4621
[2012-11-22 08:53:20 -0500] sakshiagarwal: i do curl htp://localhost:4000
[2012-11-22 08:53:23 -0500] bmcgee: I get that. You need to check your chef server log to see why it's failing to start
[2012-11-22 08:53:28 -0500] sakshiagarwal: it shows connection refused
[2012-11-22 08:53:31 -0500] bmcgee: thats why the curl fails
[2012-11-22 08:53:36 -0500] bmcgee: the chef-server runs on port 4000
[2012-11-22 08:53:50 -0500] sakshiagarwal: the log has nothing in it.. it is a empty file
[2012-11-22 08:54:42 -0500] jensofsweden: Have you fixed the dependency issue with the missing repos from redhat so that the rpms install correctly=
[2012-11-22 08:55:01 -0500] sakshiagarwal: yes i have installed all the missing dependencies
[2012-11-22 08:55:22 -0500] sakshiagarwal: it is installing correctly
[2012-11-22 08:55:26 -0500] aruntomar: sakshiagarwal: r u starting the chef-server directly ? are the dependent services running?
[2012-11-22 08:55:37 -0500] sakshiagarwal: yes
[2012-11-22 08:56:05 -0500] sakshiagarwal: when i run this command
[2012-11-22 08:56:07 -0500] sakshiagarwal: setup-chef-server.sh
[2012-11-22 08:56:24 -0500] sakshiagarwal: it starts the couchdb and starts the server
[2012-11-22 08:57:11 -0500] sakshiagarwal: it is showing ok... this means server is already running
[2012-11-22 08:57:22 -0500] aruntomar: paste the output of netstat -ntlp to git
[2012-11-22 08:57:46 -0500] aruntomar: *git/gist
[2012-11-22 08:59:11 -0500] sakshiagarwal: Active Internet connections (only servers) Proto Recv-Q Send-Q Local Address               Foreign Address             Stat                                                                             e       PID/Program name tcp        0      0 0.0.0.0:681                 0.0.0.0:*                   LIST                                                                             EN      3043/rpc.statd tcp        0      0 0.0.0.0
[2012-11-22 08:59:35 -0500] sakshiagarwal: https://gist.github.com/4130084
[2012-11-22 09:00:12 -0500] jensofsweden: You got no listen port on 4000 so it doesnt answer =)
[2012-11-22 09:00:36 -0500] sakshiagarwal: now what should i do
[2012-11-22 09:02:18 -0500] Tensibai: sakshiagarwal: try a /etc/init.d/chef-server start
[2012-11-22 09:03:05 -0500] sakshiagarwal: ya server is started then
[2012-11-22 09:03:13 -0500] sakshiagarwal: what should i do
[2012-11-22 09:03:39 -0500] aruntomar: sakshiagarwal: the output u pasted means, that your rabbitmq server, couchdb, and solr are running
[2012-11-22 09:04:06 -0500] aruntomar: sakshiagarwal: run that netstat command again, and if u see port 4000, then it means that your chef-server is running
[2012-11-22 09:05:29 -0500] aruntomar: sakshiagarwal: then /etc/init.d/chef-server-webui start , it'll start web ui service, which you can then access over port 4040 eg: http://<ip>:4040
[2012-11-22 09:06:01 -0500] sakshiagarwal: ya i already did tht=at
[2012-11-22 09:06:05 -0500] sakshiagarwal: that
[2012-11-22 09:06:12 -0500] aruntomar: sakshiagarwal: then configure a workstation and start using chef
[2012-11-22 09:06:26 -0500] sakshiagarwal: when i am running the netstat command again it s not showing port 4000
[2012-11-22 09:06:41 -0500] aruntomar: then it means chef server is not running
[2012-11-22 09:07:27 -0500] sakshiagarwal: when i run this command /etc/init.d/chef-server start
[2012-11-22 09:07:32 -0500] sakshiagarwal: it is showing
[2012-11-22 09:07:42 -0500] sakshiagarwal: Starting chef-server:                                      [  OK  ]
[2012-11-22 09:08:08 -0500] sakshiagarwal: why chef-server is not running
[2012-11-22 09:08:48 -0500] aruntomar: check the logs
[2012-11-22 09:08:54 -0500] aruntomar: location /var/log/chef/server.log
[2012-11-22 09:10:05 -0500] sakshiagarwal: log file is emplty
[2012-11-22 09:10:12 -0500] sakshiagarwal: nuthing is wriiten n that
[2012-11-22 09:14:50 -0500] aruntomar: sakshiagarwal: try rebooting the server once, and then start the services
[2012-11-22 09:15:21 -0500] aruntomar: sakshiagarwal: if there is nothing in the log files, or some sort of error, it becomes difficult to debug
[2012-11-22 09:26:21 -0500] sakshiagarwal: after rebooting also it is not happening
[2012-11-22 09:32:41 -0500] sakshiagarwal: when i write simple chef-server it dispay the message... https://gist.github.com/4130213
[2012-11-22 09:32:43 -0500] Tensibai: sakshiagarwal: cd /var/log/chef and taile ach log file to see if there's something wrong
[2012-11-22 09:34:57 -0500] Tensibai: sakshiagarwal: you may want to try a hef-server -p 4000 -e production -C /etc/chef/server.rb -V
[2012-11-22 09:35:22 -0500] Tensibai: the error you got is that merb can't find the env file to start -as you didn't specify it)
[2012-11-22 09:36:43 -0500] gabbagandalf: hello :)
[2012-11-22 09:37:16 -0500] Tensibai: hi gabbagandalf
[2012-11-22 09:38:10 -0500] sakshiagarwal: i run your command bt still it s giving same error....https://gist.github.com/4130213
[2012-11-22 09:39:02 -0500] gabbagandalf: does anyone know the best practice when I want to run a recipe twice (with different attributes) in one runlist? for example when I want to install two instances of tomcat. I use two wrapper cookbooks that reference tomcat_base, but obviously the import recipe works only once during the runlist.
[2012-11-22 09:44:51 -0500] Tensibai: sakshiagarwal: sounds strange, as if your package was incomplete
[2012-11-22 09:46:26 -0500] sakshiagarwal: couchdb and aome deendencies were already there n my system.. is this creating a problem..
[2012-11-22 09:48:02 -0500] Tensibai: sakshiagarwal: I think not but merb-assets seems to be missing
[2012-11-22 09:48:14 -0500] Tensibai: I assume a gem install merb-asset would help
[2012-11-22 09:48:20 -0500] sakshiagarwal: okk
[2012-11-22 09:48:30 -0500] Tensibai: merb-assets (forget the s at end)
[2012-11-22 09:48:45 -0500] Tensibai: http://wiki.opscode.com/display/chef/Installing+Chef+Server <= recheck dependencies here to be sure
[2012-11-22 09:50:16 -0500] Tensibai: gabbagandalf: I don't know how the recipe is done (not using tomcat) but you may wich to tweak to install two isntances in one run isntead of running it twice
[2012-11-22 09:54:05 -0500] gabbagandalf: Tensibai: Thinking: I could use a property that controls wheather a second instance gets installed or not. That would be possible, but in my oppinion this is a rather "ugly" solution? :| But thank you for the input, it _is_ definitely a possible way.
[2012-11-22 09:54:30 -0500] Tensibai: gabbagandalf: I was more thinking about an array of instances
[2012-11-22 09:54:49 -0500] Tensibai: and looping through this array for each instance needed by this node
[2012-11-22 09:54:53 -0500] gabbagandalf: ah ok, for xyz do ?
[2012-11-22 09:55:34 -0500] Tensibai: yes or node["tom_instances"].each do [....] end unless node["tom_instances"].nil?
[2012-11-22 09:55:35 -0500] gabbagandalf: hmm thats a pretty good idea :) thank you! :)
[2012-11-22 09:56:35 -0500] Tensibai: and inside each tom_instances you have the usual instance values needed by template/recipe
[2012-11-22 09:56:55 -0500] gabbagandalf: jep, got that :D
[2012-11-22 09:57:14 -0500] sakshiagarwal: https://gist.github.com/4130316
[2012-11-22 09:59:19 -0500] Tensibai: sakshiagarwal: seems you miss ruby-devel packege, I'm not sure about its name
[2012-11-22 09:59:36 -0500] Tensibai: I'm not a fan of RH products
[2012-11-22 10:01:36 -0500] sakshiagarwal: what does this ruby-devel do
[2012-11-22 10:09:47 -0500] PapaSierra_: morning. i've suddenly started getting this error and i'm not sure what's changed. [Thu, 22 Nov 2012 10:07:12 +0000] FATAL: NameError: php_pear[pecl_http] (project::default line 51) had an error: NameError: Cannot find a resource for converge_by on ubuntu version
[2012-11-22 10:09:48 -0500] PapaSierra_:  12.04
[2012-11-22 10:10:31 -0500] PapaSierra_: i'm using the ops-code/php cookbook
[2012-11-22 10:18:03 -0500] Tensibai: sakshiagarwal: oups sorry, it install headers to compile ruby gems
[2012-11-22 10:22:16 -0500] sakshiagarwal: i think there is a version problem
[2012-11-22 10:23:52 -0500] Tensibai: sakshiagarwal: could be yes
[2012-11-22 10:24:08 -0500] Tensibai: I don't think there's an omnibus package for it right now
[2012-11-22 10:25:28 -0500] andreacampi: hi all
[2012-11-22 10:26:12 -0500] Tensibai: sakshiagarwal:  have a look here: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo#InstallingChefServerusingChefSolo-CentOS%2FRHELInstallationNotes
[2012-11-22 10:26:17 -0500] andreacampi: can test-kitchen stand up multiple nodes, e.g. a db and an app server, and run integration tests for that? does anybody do that?
[2012-11-22 10:26:28 -0500] erikh: nope
[2012-11-22 10:26:40 -0500] erikh: I'm working on a system. want to review some docs? :)
[2012-11-22 10:26:48 -0500] erikh: 'cause, like, I"m writing them right now
[2012-11-22 10:26:57 -0500] andreacampi: erikh: is that for me?
[2012-11-22 10:27:09 -0500] erikh: yep
[2012-11-22 10:27:13 -0500] andreacampi: sure
[2012-11-22 10:27:17 -0500] erikh: sec.
[2012-11-22 10:27:26 -0500] erikh: I'll pm you, it's not release ready.
[2012-11-22 10:27:37 -0500] andreacampi: yeah, go ahead
[2012-11-22 10:27:38 -0500] erikh: but I'd love to get opinions from someone who has interest in this subject.
[2012-11-22 10:31:25 -0500] Tensibai: one more try: https://gist.github.com/4118081 <= if someone has an idea on why I get attributes nesting themselves ...
[2012-11-22 10:36:59 -0500] erikh: Tensibai: what's the actual recipe look like?
[2012-11-22 10:42:01 -0500] Tensibai: erikh: a simple template passing node["sterling" as variable
[2012-11-22 10:42:07 -0500] Tensibai: I'll add it to the gist
[2012-11-22 11:24:07 -0500] Guest50623: jkeiser: you about?
[2012-11-22 11:24:15 -0500] Guest50623: or anyone with experience of knife-essentials?
[2012-11-22 11:25:41 -0500] alexbst: I've downloaded a few bags
[2012-11-22 11:26:02 -0500] Guest50623: alexbst: hi, have you ever used upload on a node?
[2012-11-22 11:26:33 -0500] Guest50623: it complains about a null class on run_list on node upload  for me
[2012-11-22 11:27:45 -0500] alexbst: no - I haven't used it for upload.
[2012-11-22 11:27:48 -0500] masterkorp:  Guest50623 use the force http://i.imgur.com/DacbQ.jpg
[2012-11-22 11:28:09 -0500] alexbst: what is wrong with the "knife node from file" ?  command ?
[2012-11-22 11:28:42 -0500] Guest50623: alexbst: we need this to be an update, not a re-create
[2012-11-22 11:28:50 -0500] Guest50623: "knife node from file" destroys and re-creates
[2012-11-22 11:29:03 -0500] Guest50623: which is sub-optimal for us given it wipes attributes and solr index shizzle etc
[2012-11-22 11:29:19 -0500] Guest50623: masterkorp: force is for if it hasn't changed to upload it anyway
[2012-11-22 11:29:39 -0500] Guest50623: without force an unchanged node isn't attempted to be uploaded
[2012-11-22 11:29:55 -0500] Guest50623: so with a changed node or with an unchanged node with force applied we get the error
[2012-11-22 11:30:22 -0500] Guest50623: just seems fundaemtnally broken as far as i can tell
[2012-11-22 11:31:08 -0500] alexbst: meh
[2012-11-22 12:28:12 -0500] till__: anyone awake on this thanksgiving day? :D
[2012-11-22 12:40:09 -0500] masterkorp: till__: ofc
[2012-11-22 12:53:10 -0500] gabbagandalf: hm, could anybody please help me with a ruby type error? https://gist.github.com/4131044
[2012-11-22 12:53:51 -0500] gabbagandalf: it looks like i don't quite understand the way chef compiles the recipes
[2012-11-22 12:56:45 -0500] till__: masterkorp: ofc?
[2012-11-22 12:57:49 -0500] till__: gabbagandalf: script_name is an Array, and not a string
[2012-11-22 12:57:59 -0500] till__: doesn't seem to be releated to the phases
[2012-11-22 12:58:10 -0500] till__: getScriptName doesn't seem to return what you expect
[2012-11-22 12:58:54 -0500] Tensibai: I had write it like that: template "/etc/init.d/#{script_name do}" do
[2012-11-22 12:59:13 -0500] Tensibai: ooops, template "/etc/init.d/#{script_name} do
[2012-11-22 12:59:37 -0500] Tensibai: well.. supress  space and do in first writing ...
[2012-11-22 12:59:41 -0500] gabbagandalf: oh, okee :) (damn, should have really learned ruby, i guess...)
[2012-11-22 13:00:23 -0500] Tensibai: gabbagandalf: I'm not a real source of true in this case, maybe the + var is ok... but I use the #{} notation which works well
[2012-11-22 13:00:49 -0500] Tensibai: If I understood correctly, var + "value" would add to an array instead of concatenation
[2012-11-22 13:01:32 -0500] Tensibai: in brief: few binary operators in ruby, most of them are usually methods of the object (string.concat... etc)
[2012-11-22 13:01:46 -0500] Tensibai: (exemple from my mind with no reality beyond)
[2012-11-22 13:02:19 -0500] gabbagandalf: hm that could be, i'll just have to check out more ruby tutorials and such. thank you, it's really appreciated! :)
[2012-11-22 13:03:10 -0500] yfeldblum: Tensibai, String#+ does concatenation
[2012-11-22 13:03:10 -0500] till__: i use #{} as well
[2012-11-22 13:04:40 -0500] Tensibai: yfeldblum: as I said, it's from a not trustworthly source ;) just said what is working for me
[2012-11-22 13:05:06 -0500] Tensibai: And I'm still fighting with atrtibutes nesting where they should not :(
[2012-11-22 13:06:12 -0500] gabbagandalf: thanks guys! the #{} notations seems to have fixed my problem
[2012-11-22 13:42:02 -0500] m4rcu5: chefs, may i ask one of the more common questions? how are you managing your books, and combine this with books you get from someone else their repo like the cehf-client/chef-server, and what ifnyou want to modify them, how do you track it?
[2012-11-22 13:42:45 -0500] jatan: git repo
[2012-11-22 13:42:57 -0500] jatan: as most useful cookbooks are on github anyways, so it's easier to pull in changes
[2012-11-22 13:43:45 -0500] yatesy: m4rcu5: have you have a look at http://wiki.opscode.com/display/chef/Chef+Repository ? might get ya started
[2012-11-22 13:43:47 -0500] m4rcu5: jatan: yep for my cookboks i also use git, but, do you use submodules for the external cookbooks?
[2012-11-22 13:44:33 -0500] m4rcu5: yatesy: im through the basics, but im a bit struggeling how to keep track of other peoples books
[2012-11-22 13:46:19 -0500] yatesy: ah ok, there's a few options, either import into a single repo (which is the "chef repository" concept) or if you want to keep separate git repos you could consider something like librarian or berkshelf which attempts to handle this for you
[2012-11-22 13:46:34 -0500] till__: i end up copy/pasting stuff
[2012-11-22 13:46:40 -0500] till__: librarian is not workable for me
[2012-11-22 13:47:03 -0500] jatan: m4rcu5, nope, we eyeball the diffs and then just copy over when needed
[2012-11-22 13:47:06 -0500] yatesy: personally i've stuck with the chef-repo i created as a beginner at the start of this year, but i haven't (yet) had a need to have multiple repos
[2012-11-22 13:47:15 -0500] m4rcu5: till__: thats what i started with, but now some changes came up in the chef-client cookbook, and i have no way to keep track of those changes
[2012-11-22 13:47:16 -0500] jatan: we don't depend on lots of 3rd party books so it's ok for us
[2012-11-22 13:48:15 -0500] yfeldblum: till__, sorry to hear that
[2012-11-22 13:49:35 -0500] yatesy: i find the git branch/merge stuff built into knife cookbook site install deals with merging my custom changes to community cookbooks rather well
[2012-11-22 13:49:44 -0500] m4rcu5: yfeldblum: your the one behind librarian right? :)
[2012-11-22 13:49:49 -0500] yatesy: if i ever want to see a "clean" version I can check the branch
[2012-11-22 13:49:58 -0500] yfeldblum: m4rcu5, guilty
[2012-11-22 13:50:35 -0500] m4rcu5: yatesy: site install sounds quite new to me
[2012-11-22 13:51:26 -0500] till__: yfeldblum: e.g. searching opscode by default
[2012-11-22 13:51:44 -0500] yfeldblum: m4rcu5, it's `site vendor` renamed
[2012-11-22 13:52:19 -0500] till__: i think opscode should adopt librarian or sponsor you
[2012-11-22 13:52:21 -0500] till__: to fix this ;)
[2012-11-22 13:52:21 -0500] m4rcu5: ah, thats must have been done after i started playing with chef
[2012-11-22 13:52:55 -0500] yatesy: are you aware of the community cookbook site or have you been manually importing cookbooks direct from git out of interest?
[2012-11-22 13:53:43 -0500] m4rcu5: yatesy: im aware of the site, but i prefer git
[2012-11-22 13:54:49 -0500] yatesy: cool whatever works for you. in which case something like librarian or berkshelf might be the way forward for you as they both have the ability to deal with git as a source for cookbooks
[2012-11-22 13:55:00 -0500] yfeldblum: till__, why is that?
[2012-11-22 14:03:36 -0500] masterkorp: hmm, coffe
[2012-11-22 14:06:33 -0500] mancdaz: when setting or overriding an attribute from within a recipe, is there some way to push that up to the environment, rather than just being an attribute available locally to the node?
[2012-11-22 14:12:20 -0500] m4rcu5: im going to dig into the knife site install
[2012-11-22 14:20:08 -0500] masterkorp: Guys i am for hire
[2012-11-22 14:20:31 -0500] masterkorp: so if ya now of a devops position that would hire remotly, please link me up :)
[2012-11-22 14:28:03 -0500] kechagia: short question: "execute" and "script" don't seem to properly su to a user. when I set "user 'deploy'", and I do a 'id; pwd; echo $HOME' i get the following
[2012-11-22 14:28:06 -0500] kechagia: uid=1000(deploy) gid=0(root) groups=1000(deploy),0(root)
[2012-11-22 14:28:19 -0500] kechagia:  /
[2012-11-22 14:28:21 -0500] kechagia:  /root
[2012-11-22 14:29:25 -0500] masterkorp: kechagia: What is the command runing
[2012-11-22 14:29:43 -0500] masterkorp: kechagia: things like $HOME are only read with su - user
[2012-11-22 14:29:58 -0500] masterkorp: the "-" makes the diference
[2012-11-22 14:30:06 -0500] masterkorp: same as sudo
[2012-11-22 14:30:13 -0500] masterkorp: you need to use -H
[2012-11-22 14:31:09 -0500] kechagia: yeah, but howto tell execute do actually use that? manually use sudo/su in the command?
[2012-11-22 14:31:25 -0500] kechagia: I'm trying to pass on environment 'HOME' => Etc.getpwnam(user)['dir'] as a workaround
[2012-11-22 14:32:16 -0500] masterkorp: I dont know how execute works under the hood
[2012-11-22 14:32:37 -0500] masterkorp: You can always extent Chef::Resource::Execute
[2012-11-22 14:33:01 -0500] masterkorp: but reading env vars is a thing that execute should do by default
[2012-11-22 14:33:23 -0500] masterkorp: i see no reason why one would not get the benefit of it
[2012-11-22 14:35:44 -0500] kechagia: masterkorp: not sure what you are proposing. manually setting HOME using environment, or manually use sudo/su in the execute line and override the user parameter?
[2012-11-22 14:36:19 -0500] masterkorp: kechagia: i am proposing for someone to submit a patch to the Execute Resource :p
[2012-11-22 14:36:41 -0500] masterkorp: kechagia: well i would use sudo -H user in the command
[2012-11-22 14:38:57 -0500] kechagia: masterkorp: yeah I think this should be the default too, to just use a login shell when specifying this. thanks
[2012-11-22 14:39:17 -0500] kechagia: ok, if setting the env doesnt work, I'll indeed use su (sudo might not always be installed..)
[2012-11-22 14:40:07 -0500] igotux: i'm trying to set /etc/hostname using cookbook_file ... and i have created the file "hostname" inside cookbook/recipe/files/$ip/hostname
[2012-11-22 14:40:15 -0500] igotux: but looks like it is not working :- http://pastie.org/private/a9puir7tjloovequku90q
[2012-11-22 14:42:10 -0500] m4rcu5: talking about hostnames, im trying to find one for the box which runs git, jenkins and redmine... tairing my hair out :P
[2012-11-22 14:43:14 -0500] BryanWB_: what's the easiest way to find out the ip for eth1 ?
[2012-11-22 14:43:22 -0500] BryanWB_: w/ the node object
[2012-11-22 14:44:26 -0500] kechagia: BryanWB_: I use something like node['network']['interfaces'][device]['addresses'].select { |k, v| v['family'] == 'inet' }
[2012-11-22 14:44:36 -0500] kechagia: for getting an array of all ipv4 addreses of the device
[2012-11-22 14:44:38 -0500] BryanWB_: kechagia: fuck outch, tks
[2012-11-22 14:44:59 -0500] BryanWB_: kechagia: fuck outch, tks
[2012-11-22 14:45:26 -0500] igotux: basically what i'm trying to do is push node specific changes... even updating /etc/hostname itself is not working for me.. some pointers pls
[2012-11-22 14:48:50 -0500] zts: igotux: I don't think you can use the IP address to select the file to install - it's not mentioned here: http://wiki.opscode.com/display/chef/File+Distribution
[2012-11-22 14:49:24 -0500] zts: (though I didn't check the source to see whether that agrees with the wiki)
[2012-11-22 14:50:09 -0500] igotux: i'm runing out of cloud... so i have to use public IP to do a "knife cook root@$public_ip" .. am deploying from my laptop
[2012-11-22 14:52:33 -0500] igotux: wondering how people are pushing node specific changes on a cloud environment ?
[2012-11-22 14:54:32 -0500] zts: the general advice in a cloud environment (if not elsewhere) is that you should avoid having node-specific changes
[2012-11-22 14:55:15 -0500] zts: as it makes it that much harder to deal with instance failures, and so on
[2012-11-22 14:55:32 -0500] zts: what are the node-specific configurations you currently need to manage?
[2012-11-22 14:55:54 -0500] igotux: say, i want to set /etc/hostname .. which is unique to nodes
[2012-11-22 14:56:26 -0500] igotux: if my approach is incorrect, let me know what is the correct way of doing things
[2012-11-22 14:57:52 -0500] zts: One approach would be to set the hostname as an attribute.  Then, in your cookbook, make /etc/hostname a template which uses that attribute
[2012-11-22 14:58:35 -0500] jensofsweden: use the ohai variables
[2012-11-22 15:40:24 -0500] Grainger: Hi all... does anybody know a good way to distribute *individual* files such as certificates across Chef nodes (i.e. every node gets its own certificate...)?
[2012-11-22 15:41:15 -0500] gabbagandalf: Grainger: how about a parametrized wget call?
[2012-11-22 15:44:21 -0500] Grainger: gabbagandalf: you mean something like "wget <URL>?node=`hostname`" ? I've been reluctant to analyze the security implications, it's kind of the security bootstrap, whatever goes wrong there can not easily be repaired.
[2012-11-22 15:45:03 -0500] Grainger: I'm looking for something that *neither* the chef server can see (like encrypted data bags) *nor* the other nodes (like attributes)
[2012-11-22 15:45:20 -0500] gabbagandalf: that was my idea, although it may definitely not be the best approach. i'm just learning to chef too :)
[2012-11-22 15:46:39 -0500] Grainger: gabbagandalf: Please get me right, I'm sure the approach works in general. It's just that I don't trust it for that purpose.
[2012-11-22 15:50:38 -0500] gabbagandalf: Grainger: joa, no problem :) i understand that completely from what you told me
[2012-11-22 15:51:52 -0500] Virunga: Can i config Chef Server such that each new node will have a certain run list?
[2012-11-22 15:52:40 -0500] Virunga: I usually specify the run list when i bootstrap a new node.
[2012-11-22 16:00:28 -0500] Grainger: Hmmm... FWIW: Got it. I need to generate the keys on the nodes and can then automate certificate signing requests (CSRs). Neither the CSRs nor the certificates are sensitive, so I can distribute the certificates by less secure channels. But how about passwords for other services, such as aws accesskey/secretkey pairs?
[2012-11-22 16:06:19 -0500] Virunga: Encypted data bags?
[2012-11-22 16:15:40 -0500] Grainger: Viruna: Every node can see every item in an encrypted data bag, right? I'd like to hide one node's information from the other nodes, too.
[2012-11-22 16:17:09 -0500] Virunga: Grainger: a node can see the item content only if it has the key.
[2012-11-22 16:18:05 -0500] Virunga: Grainger: and you could make different data bags with different keys maybe.
[2012-11-22 16:18:33 -0500] Virunga: Is my question so stupid?
[2012-11-22 16:19:20 -0500] Virunga: I searched the documentation about it, but i didn't find it. Maybe you could link it to me, if that is possible, please?
[2012-11-22 16:21:17 -0500] xerxas: Hi all
[2012-11-22 16:21:25 -0500] xerxas: I have this message in manage.opscode.com:
[2012-11-22 16:21:25 -0500] xerxas: Organization not found. (Error 32033)
[2012-11-22 16:22:03 -0500] gyre007: Grainger: yeah change the keys and youre fine...i doubt there is any other solution..
[2012-11-22 16:22:39 -0500] xerxas: I cannot create ec2 nodes, so I thought regenerating a validation key  would help, but I get this error message
[2012-11-22 16:22:51 -0500] xerxas: works on another organization I just created
[2012-11-22 16:23:36 -0500] Grainger: Virunga, xerxas: thanks - I guess frequent key changes are as good as it gets for now. Though I would have loved something like "encrypted attributes" ;-)
[2012-11-22 18:08:40 -0500] ssd7: US Chefs: Happy Thanksgiving!
[2012-11-22 18:09:57 -0500] Guest50623: ooh, can this be used as an international excuse for eating lots of food?
[2012-11-22 18:11:02 -0500] ssd7: Yes, of course
[2012-11-22 18:14:32 -0500] Grainger: Oh... Happy Thanksgiving!
[2012-11-22 18:44:39 -0500] PapaSierra_: morning. anyone using opscode-cookbooks/php? i have an ubuntu 12.4 server and trying to install pecl http. http://pecl.php.net/package/pecl_http i'm pretty stumped
[2012-11-22 18:46:04 -0500] PapaSierra_: i'm using php_pear "pecl_http" do version "1.7.4" action :install end and it's giving me "NameError: Cannot find a resource for converge_by on ubuntu version". i've never seen that before
[2012-11-22 18:51:13 -0500] PapaSierra_: http://www.hastebin.com/raw/fikomoheta
[2012-11-22 19:04:52 -0500] ssd7: PapaSierra_: What version of Chef are you using?
[2012-11-22 19:05:05 -0500] PapaSierra_: 10 something, let me check...
[2012-11-22 19:05:23 -0500] PapaSierra_: ssd7 0.10.10
[2012-11-22 19:06:02 -0500] ssd7: PapaSierra_: The newest version of the php cookbook has been upgraded to use why-run support which will only work on 10.16+
[2012-11-22 19:07:18 -0500] ssd7: PapaSierra_: If you update to 10.16.2 you should be good to go
[2012-11-22 19:07:24 -0500] PapaSierra_: ssd7 that explains why this *used to work*. i'm using a "vagrant box" so i'm not sure how feasible it is to upgrade chef
[2012-11-22 19:07:58 -0500] PapaSierra_: thanks for the tip and solution. i'll look into how to upgrade. thanks
[2012-11-22 19:08:36 -0500] ssd7: PapaSierra_: You can also roll the cookbook version back to one that doesn't have whyrun support
[2012-11-22 19:09:14 -0500] ssd7: I believe the version currently on the community site is still pre-whyrun
[2012-11-22 19:09:26 -0500] PapaSierra_: ssd7 i considered that option too, might be a smoother process for the time being. thanks again
[2012-11-22 19:09:42 -0500] PapaSierra_: community site? i'm just cloning from the github opscode repo
[2012-11-22 19:11:29 -0500] ssd7: http://community.opscode.com/cookbooks/php
[2012-11-22 19:12:05 -0500] ssd7: The github version is like the "development" version, the one released on the community site is the latest released version
[2012-11-22 19:13:58 -0500] PapaSierra_: ssd7 understood. is there any way to know which version i will be ok with? i mean how would i know when whyrun was introduced?
[2012-11-22 19:19:45 -0500] PapaSierra_: ssd7 does this look reasonable but with the right version number: https://github.com/karmi/cookbook-elasticsearch/issues/22#issuecomment-7388685
[2012-11-22 19:20:01 -0500] ssd7: PapaSierra_: The current version on the community site will work.  If you are looking at this git log/history you can see the commit that added the converge_by blocks in the provider.
[2012-11-22 19:20:52 -0500] PapaSierra_: ok. so instead of adding it as a submodule i should just copy the community site version files into my project?
[2012-11-22 19:20:56 -0500] ssd7: PapaSierra_: Depends a bit on how you originally installed Chef in your vagrant box
[2012-11-22 19:21:25 -0500] PapaSierra_: i actually didnt' install chef. mitchellh did. i'm just using an "official" box
[2012-11-22 19:23:04 -0500] ssd7: Ahh, I'd have to look at the official boxes, but I think the gem uninstall/install method in that link should work
[2012-11-22 19:23:29 -0500] PapaSierra_: ssd7 or, looking at the history i see this commit: https://github.com/opscode-cookbooks/php/commit/b3c10e8d0f0087ce07ff9069a4be0feee5c68f6d
[2012-11-22 19:29:36 -0500] PapaSierra_: i've rolled back to this commit: 4e76d07dbe82de87c4f5055bd207c27fa15c41db which is actually the 1.1.0 release and it working perfectly now. thanks so much! i wouldn't have had a clue otherwise
[2012-11-22 19:49:54 -0500] ssd7: PapaSierra_: Glad to help!
[2012-11-22 19:50:04 -0500] PapaSierra_: :)
[2012-11-22 19:56:13 -0500] rafaelmagu: Anyone here using knife-spork?
[2012-11-22 19:58:58 -0500] LanyonM_: Hi All, I'm new to Chef and am writing a Tomcat cookbook as a learning experience.  I'm wondering what type of information would go into /providers and /resources?  I've used Berkshelf to scaffold the cookbook, but so far have put all my resource definitions into the default recipe.
[2012-11-22 20:12:15 -0500] gyre007: LanyonM_: providers and resources subdirectories are for LWRPs (LightWeight Reousrces and Providers)  http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+(LWRP) ...LWRPs are custom resources which you can write yourself - if you are using only the standard ones then you can leave this dirs empty
[2012-11-22 20:14:22 -0500] LanyonM_: gyre007 cool, thanks.  It's been a bit confusing trying to navigate between the wiki and docs
[2012-11-22 20:15:23 -0500] gyre007: yeah the wiki is a bit of a mess for a newbie...Opscode are trying to migrate documentation to docs.opscode.com or something like that
[2012-11-22 20:18:38 -0500] LanyonM_: gyre007 I was looking there, but the page describing cookbook directory structure is lacking: http://docs.opscode.com/essentials_cookbook_directory.html
[2012-11-22 20:31:40 -0500] mardek: Hi
[2012-11-22 20:33:08 -0500] mardek: Is someone available on a chef client problem ?
[2012-11-22 20:34:15 -0500] mardek: Does someone knows how to make the chef client stop to crash when we have two (databag) users with the same uid ?
[2012-11-22 20:37:43 -0500] alexw: I'm using mysql cookbook - getting. "no such file to load -- mysql"
[2012-11-22 20:37:59 -0500] alexw: anybody had this experience
[2012-11-22 20:59:37 -0500] ssd7: alexw: Hrmm.  Looks like the mysql gem isn't installed.
[2012-11-22 20:59:52 -0500] alexw: ssd7: yuh just realised I needed to import mysql::ruby
[2012-11-22 21:01:03 -0500] alexw: whats the best method to import sql into the DB? execute?
[2012-11-22 21:01:30 -0500] alexw: i.e. I have an SQL file
[2012-11-22 21:05:20 -0500] ssd7: alexw: Not sure I understand what you mean.
[2012-11-22 21:05:38 -0500] alexw: I.e. In command line I use mysql -p -u root test_project < import.sq
[2012-11-22 21:08:00 -0500] ssd7: alexw: Depends what it is.  For some actions (creating databases and users) you can use Chef resources
[2012-11-22 21:08:25 -0500] ssd7: for more complicated issues you might need to resort to an execute, but you'll want to use not_if/only_if to ensure idempotency
[2012-11-22 21:08:29 -0500] alexw: ssd7: more so , I have an SQL file with the schema and dummy data - just trying to import the after db create
[2012-11-22 21:10:36 -0500] ssd7: alexw: Yeah, I would just use an execute potentially
[2012-11-22 21:11:00 -0500] alexw: It's only for dev envrionment
[2012-11-22 21:11:10 -0500] alexw: so you'd quickly realise if something went wrong
[2012-11-22 21:36:12 -0500] Grainger: n8 all!
[2012-11-22 21:53:53 -0500] alexw: so I've setup Vagrant etc,
[2012-11-22 21:54:03 -0500] alexw: is it now possible just to give my dev a Vagrantfile
[2012-11-22 21:54:12 -0500] alexw: or will they also need .pem files etc?

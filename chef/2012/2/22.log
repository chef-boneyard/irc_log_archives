[2012-02-22 08:02:00 -0500] fujin: lol nah not much time for bugs here man
[2012-02-22 08:02:00 -0500] fujin: i help out here in spare time
[2012-02-22 08:03:00 -0500] fujin: i work full time at Heavy Water operations with @dje
[2012-02-22 08:03:00 -0500] fujin: we have 5 or so clients that we do devops for
[2012-02-22 08:03:00 -0500] fujin: I think darrin still says we do operations for 'em
[2012-02-22 08:03:00 -0500] fujin: but I ship a shit load of code
[2012-02-22 08:11:00 -0500] neurodamage: fujin: nice, good to see other folks in a similar boat, doing the same thing with a consultancy working for some clients :)
[2012-02-22 08:17:00 -0500] plu: is there some best practice how to handle `apt-get update`?
[2012-02-22 08:22:00 -0500] plu: nevermind. This seems exactly what I want: https://github.com/fnichol/chef-apt
[2012-02-22 08:24:00 -0500] fujin: plu: that's a fork of the opscode one
[2012-02-22 08:32:00 -0500] plu: whops
[2012-02-22 08:32:00 -0500] plu: fujin: thanks, didnt notice that :)
[2012-02-22 08:33:00 -0500] plu: so that's what I want, right? https://github.com/opscode/cookbooks/tree/master/apt
[2012-02-22 08:35:00 -0500] fujin: http://ckbk.it/apt
[2012-02-22 08:36:00 -0500] fujin: you can follow it there and it'll email you when a new version is uploaded, etc
[2012-02-22 08:46:00 -0500] plu: ah that's cool! Thanks, didnt know about that. Still new to the whole chef thing :)
[2012-02-22 09:43:00 -0500] nacer: ohai
[2012-02-22 09:49:00 -0500] gadolin: hey, Mother Internet and Father Google, did not help me, are you aware of any hyperic cookbook?
[2012-02-22 09:53:00 -0500] nacer: gadolin: don't seem so
[2012-02-22 10:37:00 -0500] gadolin: nacer: thx, i am getting thrilled, when thinking about hyperic, which we use, it is just overcomplex, I need to migrate to nagios one day
[2012-02-22 10:49:00 -0500] nacer: gadolin: you can make a cookbook to, it's not that difficult
[2012-02-22 10:49:00 -0500] nacer: gadolin: you only want to deploy agent ?
[2012-02-22 10:50:00 -0500] gadolin: nacer: yes, with 5 config files, at the moment we build two rpm one with standard agent and second with configuration, instead i am going to have cookbook installing default rpm, and putting config files in place.
[2012-02-22 10:51:00 -0500] gadolin: nacer: so the cookbook fits for that purpose ideally
[2012-02-22 12:20:00 -0500] c64: Hi guys!
[2012-02-22 12:20:00 -0500] c64: Why would File.open not work in a provider?
[2012-02-22 12:20:00 -0500] c64: File.open(a, 'r') do |fh|
[2012-02-22 12:20:00 -0500] c64:  had an error: NoMethodError: private method `open' called for Chef::Provider::File:Class
[2012-02-22 12:24:00 -0500] laurent\: c64: use ::File.open
[2012-02-22 12:24:00 -0500] ashb: c64: because File is not the File you think - what laurent\ said
[2012-02-22 12:24:00 -0500] c64: :: means global contect?
[2012-02-22 12:24:00 -0500] c64: context?
[2012-02-22 12:24:00 -0500] bawt: context is important
[2012-02-22 12:25:00 -0500] ashb: yes
[2012-02-22 12:26:00 -0500] c64: really cool
[2012-02-22 12:26:00 -0500] c64: thanks!
[2012-02-22 12:28:00 -0500] ranjibd: Chef also has a file class
[2012-02-22 12:29:00 -0500] c64: ranjibd: Yeah - that makes ssense
[2012-02-22 12:29:00 -0500] ranjibd: hence ::File to access the stdlib file class
[2012-02-22 12:29:00 -0500] ranjibd: c64?
[2012-02-22 12:29:00 -0500] ranjibd: ranjibd?
[2012-02-22 12:29:00 -0500] bawt: ranjibd is right. somehow the nodes are now reporting their FQDN incorrectly...
[2012-02-22 12:29:00 -0500] ranjibd: fujin?
[2012-02-22 12:29:00 -0500] bawt: fujin is the resident git ninja and looks cute with a neck beard
[2012-02-22 12:29:00 -0500] ranjibd: kiss?
[2012-02-22 12:29:00 -0500] bawt: kiss is very, very much the operative sense here :)
[2012-02-22 12:30:00 -0500] BryanWB: ranjibd: hey buddy
[2012-02-22 12:30:00 -0500] ranjibd: whats up dude ?
[2012-02-22 12:30:00 -0500] BryanWB: ranjibd: did u read about celluloid ? looks fascinating
[2012-02-22 12:30:00 -0500] ranjibd: yeah
[2012-02-22 12:30:00 -0500] ranjibd: was reading about aws new offering SWF
[2012-02-22 12:31:00 -0500] BryanWB: i still haven't gotten my head around what that is
[2012-02-22 12:32:00 -0500] BryanWB: need to read blgo post
[2012-02-22 12:33:00 -0500] ranjibd: for what purpose you want to use it?
[2012-02-22 12:33:00 -0500] BryanWB: celluloid? concurrency, tho i don't actually need any concurrency right now, just out of curiosity
[2012-02-22 12:34:00 -0500] ranjibd: ok..
[2012-02-22 12:36:00 -0500] ranjibd: BryanWB, have u used akka? in scala?
[2012-02-22 12:36:00 -0500] ranjibd: BryanWB, celluloud will let u do similar stuff on ruby..
[2012-02-22 12:37:00 -0500] ranjibd: but it depends upon ur architecture where you want to push the scaling issue.. a variety of middle ware exists
[2012-02-22 12:37:00 -0500] ranjibd: like chef uses amqp/rabbit ..
[2012-02-22 12:37:00 -0500] ranjibd: while folks from erlang predominantly uses actors bases messaging ..
[2012-02-22 12:38:00 -0500] ranjibd: if you look at Boundary 's architecture they uses zeromq+erlang+scala ,,,
[2012-02-22 12:38:00 -0500] ranjibd: very trippy ,,
[2012-02-22 12:40:00 -0500] c64: Hmmm. I've run into another of these compile-time vs run-time issues....
[2012-02-22 12:40:00 -0500] c64: computing a hash on a file which is created by chef a few lines before
[2012-02-22 12:41:00 -0500] c64: well, is _supposed_ to be created by chef a few lines before....
[2012-02-22 12:42:00 -0500] c64: What's the basic way to solve that? Specifically, I have a chef::user thingy which creates a user and home directory
[2012-02-22 12:42:00 -0500] c64: I need to be sure that it's run before anything else
[2012-02-22 12:43:00 -0500] c64: ...or, equivalently, that everything else is run AFTER
[2012-02-22 12:43:00 -0500] ashb: cna you gist the cookbook?
[2012-02-22 12:43:00 -0500] ashb: genreally if you want a block to run at resolve time vis compile time then you use the ruby resource
[2012-02-22 12:44:00 -0500] c64: "ruby block" ?
[2012-02-22 12:44:00 -0500] c64: "ruby_block" ?
[2012-02-22 12:44:00 -0500] ashb: http://wiki.opscode.com/display/chef/Resources#Resources-RubyBlock
[2012-02-22 12:45:00 -0500] c64: ashb: cool
[2012-02-22 12:45:00 -0500] c64: That clears stuff up a bit
[2012-02-22 12:47:00 -0500] c64: Last time I used a ruby_block, I called it with an action
[2012-02-22 12:47:00 -0500] c64: do I NEED to call it?
[2012-02-22 12:47:00 -0500] c64: or does it just run
[2012-02-22 12:47:00 -0500] c64: ?
[2012-02-22 12:47:00 -0500] BryanWB: it will just run
[2012-02-22 13:32:00 -0500] rgsteele: Is using a hash as an attribute as simple as: http://pastie.org/3431779?
[2012-02-22 13:37:00 -0500] ashb: rgsteele: dunno- does it work?
[2012-02-22 13:38:00 -0500] rgsteele: ashb: Still writing the guts of the cookbook, wanted to verify against the docs but didn't see what I was looking for.  I'll find out when I get the first draft committed :)
[2012-02-22 13:39:00 -0500] ashb: it probably will, but will set the entier thing or not at all
[2012-02-22 13:39:00 -0500] ashb: i.e. you won't get partial defaults
[2012-02-22 13:39:00 -0500] ashb: which might or might not be what you want
[2012-02-22 13:55:00 -0500] gadolin: can someone advice, why its not revolving node['...'], mysqlNodes = search(:node, "chef_environment:#{node['chef_environment']} AND role:mysql")?
[2012-02-22 13:58:00 -0500] gadolin: i issue ohai and it printed a lot information but particurarly this attribute is not set
[2012-02-22 14:03:00 -0500] BryanWB: ranjibd: do u know maven?
[2012-02-22 14:06:00 -0500] zts: gadolin: chef_environment isn't set by ohai, so you won't see it thee
[2012-02-22 14:06:00 -0500] zts: gadolin: as a guess, try changing your search to say "roles:mysql" (roles with an s)
[2012-02-22 14:37:00 -0500] gadolin: zts: thx, the issue is with  #{node['chef_environment']}, i replcated it with node.chef_environment and seems to work
[2012-02-22 14:58:00 -0500] ssd7: Ohai chefs
[2012-02-22 15:02:00 -0500] BryanWB: ssd7: good morning!
[2012-02-22 15:55:00 -0500] sivy: coderanger: do you know anything about the cookbook here: http://community.opscode.com/cookbooks/redis
[2012-02-22 15:56:00 -0500] sivy: it depends on metachef, which is giving me a syntaz error
[2012-02-22 15:56:00 -0500] sivy: https://gist.github.com/003a44e1f2a1b1522333
[2012-02-22 16:03:00 -0500] Andorbal: Hey all...
[2012-02-22 16:04:00 -0500] Andorbal: Does anyone have an examples of executing a powershell script (using the powershell resource) from another provider?
[2012-02-22 16:06:00 -0500] Andorbal: I'd like to use the webadministration powershell module to manage IIS instead of the appcmd command that the current iis cookbook uses because appcmd has some limitations I need to work around
[2012-02-22 16:10:00 -0500] dyer: Is there anyone around that can help me w/ an OHAI issue I am seeing?  I dont understand why a plugin seems to run multiple times
[2012-02-22 16:11:00 -0500] KarlHungus: silverware looks awesome
[2012-02-22 16:11:00 -0500] atomic-penguin: KarlHungus, what is silverware, yet another unsearchable Chef-related term?
[2012-02-22 16:11:00 -0500] KarlHungus: atomic-penguin: metachef is being renamed silverware, from what i can tell
[2012-02-22 16:12:00 -0500] KarlHungus: atomic-penguin: and yes its unsearchable unless youre logged into google ;) if you're like me and are logged in then ALL results are tech related
[2012-02-22 16:12:00 -0500] KarlHungus: https://github.com/infochimps-labs/ironfan-pantry/tree/master/cookbooks/silverware
[2012-02-22 16:14:00 -0500] atomic-penguin: KarlHungus, yeah, I get tech results heavily weighted in my search.  Also interested in actual cooking as a hobby though.
[2012-02-22 16:14:00 -0500] KarlHungus: oh, you're screwed, then :P
[2012-02-22 16:14:00 -0500] miah: guh
[2012-02-22 16:16:00 -0500] JasonBox: heh
[2012-02-22 16:16:00 -0500] JasonBox: forever adding -ruby to searches
[2012-02-22 16:20:00 -0500] BryanWB: KarlHungus: silverware is awesome
[2012-02-22 16:20:00 -0500] KarlHungus: BryanWB: do tell. can you share your experiences?
[2012-02-22 16:20:00 -0500] BryanWB: KarlHungus: starting to work w/ it now
[2012-02-22 16:21:00 -0500] KarlHungus: BryanWB: cool. i'm heading down that path also
[2012-02-22 16:21:00 -0500] BryanWB: but am customizing the related install_from lwrp
[2012-02-22 16:21:00 -0500] KarlHungus: i'm in a freebsd env, so i expect i'll have to do a fair amount of tweaking
[2012-02-22 16:21:00 -0500] BryanWB: KarlHungus: u should really listen to the podcsast then where it is explained in great detail the author himself
[2012-02-22 16:21:00 -0500] KarlHungus: BryanWB: food fight?
[2012-02-22 16:21:00 -0500] BryanWB: yeah
[2012-02-22 16:22:00 -0500] KarlHungus: thats what tipped me off. i red the notes, but the podcast hasnt made it to the top of my queue yet
[2012-02-22 16:22:00 -0500] sivy: BryanWB: interesting, i ran into a metashef bug today
[2012-02-22 16:22:00 -0500] sivy: metachef
[2012-02-22 16:22:00 -0500] KarlHungus: BryanWB: one thing i want to solve is how to test silverware/metachef with vagrant
[2012-02-22 16:23:00 -0500] BryanWB: sivy: until recently, mrflip (author) was only one using those cookbooks, so m not surprised if other run into bugs
[2012-02-22 16:23:00 -0500] rgsteele: So, if a chef template, when populated, ends up being identical in content to the actual file on the filesystem, is there any way to prevent it from replacing the file on the filesystem (or alternatively, preventing the notify action from being executed)?
[2012-02-22 16:23:00 -0500] sivy: BryanWB: i'm trtying to use http://community.opscode.com/cookbooks/redis
[2012-02-22 16:23:00 -0500] sivy: which depends on metachef
[2012-02-22 16:23:00 -0500] BryanWB: KarlHungus: u gotta listen to the podcast ;), he talks about that too w/ ironfan-ci
[2012-02-22 16:23:00 -0500] BryanWB: sivy: there is a fair amount of confusion recently w/ metachef as everything being renamed
[2012-02-22 16:24:00 -0500] KarlHungus: BryanWB: ahh. will do. i'll contain my excitement and questions until after i've listened, then
[2012-02-22 16:24:00 -0500] BryanWB: sorry, don't mean ltfp u
[2012-02-22 16:24:00 -0500] BryanWB: :)
[2012-02-22 16:24:00 -0500] KarlHungus: hah, no worries
[2012-02-22 16:24:00 -0500] sivy: heh
[2012-02-22 16:25:00 -0500] rgsteele: Ah, apparently it won't if the hashes are the same.  Good ol' RTFM.
[2012-02-22 16:26:00 -0500] sivy: is this "old" ruby or something?
[2012-02-22 16:26:00 -0500] sivy: define_method(name) do |val=nil|
[2012-02-22 16:27:00 -0500] sivy: i'm not really a ruby guy  - just enought o write my chef recipes
[2012-02-22 16:27:00 -0500] sivy: I'm getting a syntax err on |val=nil|
[2012-02-22 16:28:00 -0500] miah: im really confused by what you're trying to do
[2012-02-22 16:28:00 -0500] sivy: ah, apaprently it's "new" ruby (>1.9 only)
[2012-02-22 16:28:00 -0500] sivy: miah: found that in another cookbook  -it's not my code
[2012-02-22 16:35:00 -0500] pauldale: hey guys, we're getting these messages on different recipes now - any idea what might cause it?
[2012-02-22 16:35:00 -0500] pauldale: ec2-50-19-183-222.compute-1.amazonaws.com [Wed, 22 Feb 2012 16:32:33 +0000] FATAL: NoMethodError: undefined method `[]' for nil:NilClass
[2012-02-22 16:36:00 -0500] thom: pauldale: you'll need to post the entire backtrace to something like gist.github.com
[2012-02-22 16:37:00 -0500] sivy: pauldale: i was getting those from [].each blocks where one of the entries in the array was not defined
[2012-02-22 16:38:00 -0500] pauldale: https://gist.github.com/1885934
[2012-02-22 16:38:00 -0500] thom: pauldale: and the stacktrace mentioned
[2012-02-22 16:39:00 -0500] pauldale: I added the stack trace to the end of the same gist
[2012-02-22 16:40:00 -0500] sivy: pauldale: yeah, i had the same exact error
[2012-02-22 16:40:00 -0500] sivy: what's at or around line 14 or gateway-config/recipesdefault.rb
[2012-02-22 16:41:00 -0500] pauldale: which recipe was it?
[2012-02-22 16:41:00 -0500] thom: pauldale: ok, so look at line 14 of gateway-config
[2012-02-22 16:41:00 -0500] pauldale: ah
[2012-02-22 16:41:00 -0500] pauldale: ok
[2012-02-22 16:41:00 -0500] pauldale: thanks!
[2012-02-22 16:42:00 -0500] pauldale: failed search
[2012-02-22 16:43:00 -0500] sivy: it could be a lot clearer: "hey we found nothin, boss"
[2012-02-22 16:46:00 -0500] pauldale: our fault, bad design
[2012-02-22 16:46:00 -0500] pauldale: index reference on a search without verifying that something can back
[2012-02-22 16:46:00 -0500] pauldale: ivy_ip = "#{ivy_nodes[0][:ipaddress]}"
[2012-02-22 16:50:00 -0500] Andorbal: Is it even possible to immediately execute a script using a Powershell resource?  Or a Bash resource, if no one here uses Powershell...
[2012-02-22 16:59:00 -0500] JasonBox: Define immediately?
[2012-02-22 17:01:00 -0500] rgsteele: Hm... is referencing a variable from your recipe in a definition as simple as: node[:varname]?  Or is that reserved only for Ohai variables?
[2012-02-22 17:01:00 -0500] rgsteele: (Assuming you didn't pass the variable in as data to the definition)
[2012-02-22 17:01:00 -0500] rgsteele: Ah, nevermind, figured it out.
[2012-02-22 17:02:00 -0500] Andorbal: I mean basically mirroring the behavior of popen or shell_out
[2012-02-22 17:02:00 -0500] mmangino: I have another noob question to follow up on my one from yesterday
[2012-02-22 17:03:00 -0500] mmangino: now that I have the basics working, I'm trying to figure out how to customize the isntallation of tomcat
[2012-02-22 17:03:00 -0500] Andorbal: And I'd just use shell_out, but there are some niceties that the Powershell resource provides
[2012-02-22 17:03:00 -0500] mmangino: what is the recommended way for installing it with a provided tomcat-users.xml
[2012-02-22 17:03:00 -0500] mmangino: Is that something I would do in my own recipe? and just make mine depend on the default tomcat?
[2012-02-22 17:03:00 -0500] mmangino: or do people fork and modify the existing tomcat cookbook?
[2012-02-22 17:05:00 -0500] jbz: mmangino:  There are various philosophies. :-)  I think if you can get away with leaving a community cookbook untouched, you're better off, but that's not always possible.
[2012-02-22 17:08:00 -0500] ssd7: It also very much depends which part of your stack we are talking about.  If it is a service that is core to your application, you should probably scrutinize the recipe and make sure it is configuring the service in a manner that fits your infrastructure.  If it's installing some minor utility that you find useful to have on your servers for debugging, you can probably get away with relying a bit more on the community cookbook.
[2012-02-22 17:15:00 -0500] Andorbal: I guess I can duplicate the pieces of the Powershell resource that provide the conveniences and then just do a shell_out...
[2012-02-22 17:24:00 -0500] dyer: Anyone available to help me w/ a ohai plugin ?
[2012-02-22 17:28:00 -0500] pauldale: ec2-107-22-44-250.compute-1.amazonaws.com /usr/lib/ruby/gems/1.8/gems/chef-0.10.8/bin/../lib/chef/mixin/command/unix.rb:168: [BUG] Segmentation fault
[2012-02-22 17:28:00 -0500] pauldale: weeee
[2012-02-22 17:42:00 -0500] btm: pauldale: http://tickets.opscode.com/browse/CHEF-2916 ?
[2012-02-22 17:49:00 -0500] pauldale: @btm, thanks
[2012-02-22 17:49:00 -0500] pauldale: similar
[2012-02-22 17:53:00 -0500] btm: pauldale: poke around for segfault bugs. if there isn't a ticket with a workaround for yours, we should try to make one.
[2012-02-22 17:53:00 -0500] pauldale: so, we were actually encountering the bug on ubuntu 11.04
[2012-02-22 17:54:00 -0500] pauldale: they just updated this week, and now we're getting the bug
[2012-02-22 17:54:00 -0500] pauldale: updating to 11.10 seems to have fixed the problem
[2012-02-22 17:55:00 -0500] pauldale: Does anyone have a reference describing how you would run the chef/knife from master?
[2012-02-22 17:55:00 -0500] pauldale: http://tickets.opscode.com/browse/CHEF-2916 says there was a fix in master
[2012-02-22 17:55:00 -0500] pauldale: how would we actually use that?
[2012-02-22 17:57:00 -0500] Urocyon: I'm looking at adding a bunch of tunable settings to the postgresql cookbook, similar to what the mysql cookbook has.
[2012-02-22 17:57:00 -0500] Urocyon: Have people here found the mysql tunable settings useful?  Or do you do something different for mysql configuration?
[2012-02-22 17:59:00 -0500] miah: tunable settings = useful
[2012-02-22 18:06:00 -0500] Urocyon: anything about the mysql design you wish were different?
[2012-02-22 18:06:00 -0500] Urocyon: With regards to configuration file settings and such.
[2012-02-22 19:01:00 -0500] marty: fujin: do you have your collectd plugins cookbook public anywhere?
[2012-02-22 19:05:00 -0500] ops: Is there a bind/named recipe out there somewhere?  I can't seem to locate a good chef repo.
[2012-02-22 19:09:00 -0500] indiefan: still trying to grok the typical flow of chef. I installed my own chef server, using a separate machine as a client. I created a simple cookbook, uploaded that to my server, then i bootstrapped a new node (vm), then i added a recipe to that node's run_list (via knife). I have two questions: a) when will that recipe get run, i read somewhere in the docs that it's a pull not a push, so i'm assuming there is some cron or somethign? and b) will 
[2012-02-22 19:09:00 -0500] dyer: ops
[2012-02-22 19:09:00 -0500] dyer: I have one
[2012-02-22 19:09:00 -0500] dyer: Its based on the public one, but does master slave
[2012-02-22 19:11:00 -0500] dyer: http://dl.dropbox.com/u/177285/bind.tgz
[2012-02-22 19:14:00 -0500] indiefan: how to i tell a node to run its run_list? or if i don't have to, where can i find a log of it trying?
[2012-02-22 19:15:00 -0500] hoover_damm: dyer, why not on github? :) hint
[2012-02-22 19:15:00 -0500] dyer: hoover_damm, because its not documented yet
[2012-02-22 19:15:00 -0500] dyer: all my changes
[2012-02-22 19:15:00 -0500] dyer: I plan to do a proper fork of the authors repo and then document my changes
[2012-02-22 19:16:00 -0500] dyer: I guess I could put it on there now w/ a caviot that all my additions are not documneted
[2012-02-22 19:16:00 -0500] dyer: ....
[2012-02-22 19:16:00 -0500] dyer: Been slammed w/ a heavy deployment, writing the cookbooks as we deploy I think they call this "hotdogging" it ;)
[2012-02-22 19:18:00 -0500] hoover_damm: yeah i've been working with a client and fixing up recipes as I go
[2012-02-22 19:19:00 -0500] hoover_damm: a lot different work flow for me, but quite interesting
[2012-02-22 19:20:00 -0500] dyer: +1
[2012-02-22 19:20:00 -0500] dyer: :)
[2012-02-22 19:20:00 -0500] hoover_damm: 22 days without chef 0.6
[2012-02-22 19:20:00 -0500] hoover_damm: and counting
[2012-02-22 19:21:00 -0500] dyer: yea, need to sort out this stupid ohai issue I am having then I will be "rainbows and unicorns" again
[2012-02-22 19:21:00 -0500] asg: indiefan: bootstrapped chef-clients are generally run as a daemon every 30 minutes by default. The logs should be in /var/log/chef
[2012-02-22 19:23:00 -0500] hoover_damm: yeah i've been working on the unicorn recipe, I think my next step is to fork the bluepill one and make that what I want
[2012-02-22 19:23:00 -0500] hoover_damm: then convert unicorn to lwrp
[2012-02-22 19:23:00 -0500] hoover_damm: (the unicorn one)
[2012-02-22 19:25:00 -0500] indiefan: thx asg
[2012-02-22 19:27:00 -0500] renchap: indiefan: run chef-client manually once (to register the node), then use knife or the webui to update the runlist
[2012-02-22 19:28:00 -0500] indiefan: k
[2012-02-22 19:28:00 -0500] indiefan: so there's no way to do it purely remotely then?
[2012-02-22 19:28:00 -0500] indiefan: via knife?
[2012-02-22 19:30:00 -0500] asg: indiefan: knife ssh name:foo 'whatever you need to restart the daemon'.
[2012-02-22 19:31:00 -0500] JasonBox: hrm, does this seem like the way to obtain the hwaddr? node[:network][:interfaces][:eth0][:addresses].each {|v| v.each {|z| puts v.first if z[:family] == 'lladdr'}}
[2012-02-22 19:32:00 -0500] JasonBox: So resisting the urge to run `cat /sys/class/net/eth0/address` in my recipe
[2012-02-22 19:32:00 -0500] JasonBox: Maybe I should just give in!
[2012-02-22 19:33:00 -0500] JasonBox: Is there a more Chef way to run a shell command outside of a resource, where it'll be used in a template's variables?
[2012-02-22 19:34:00 -0500] geekbri: Does anybody know if there is a way with the chef-client recipe to temporarily disable chef-client.  Perhaps some sort of override attribute so that chef-client can be disabled?
[2012-02-22 19:41:00 -0500] bdha: Re: Re: Re: Re: Re: Re: Re: Re
[2012-02-22 19:43:00 -0500] atomic-penguin: New laptop
[2012-02-22 19:43:00 -0500] atomic-penguin: yay
[2012-02-22 19:44:00 -0500] atomic-penguin: Sandy bridge i7, 8Gb RAM, 512 Gb SSD
[2012-02-22 19:44:00 -0500] Gearbox: Nice.
[2012-02-22 19:45:00 -0500] Gearbox: i5/4gb/spinning hdd for me.
[2012-02-22 19:46:00 -0500] atomic-penguin: Last laptops we got from Dell, had some major cooling issues
[2012-02-22 19:48:00 -0500] mattray1: JasonBox: 1 sec
[2012-02-22 19:54:00 -0500] mattray: stupid office wireless
[2012-02-22 19:55:00 -0500] mattray: JasonBox: https://github.com/opscode/cookbooks/blob/master/firewall/providers/ufw.rb Chef::Mixin::ShellOut
[2012-02-22 19:56:00 -0500] rbarrero: Hi all
[2012-02-22 19:56:00 -0500] rbarrero: I've got a question regarding the knife ec2 plugin
[2012-02-22 19:56:00 -0500] rbarrero: wondering if I can specify a number of instances to start up
[2012-02-22 19:57:00 -0500] tolland: im getting loads of deprecated warnings, i presume thats normal
[2012-02-22 19:57:00 -0500] rbarrero: I can bring up a single node with the command, but I need to create many nodes and I would like to initiate that concurrently
[2012-02-22 20:01:00 -0500] liao: HI all, has anyone seen where the cookbook file that is served is not found on the chef-server?
[2012-02-22 20:01:00 -0500] sivy: i don't suppose infochimps is around
[2012-02-22 20:03:00 -0500] liao: Just doing a download of  a cookbook and i get this:
[2012-02-22 20:04:00 -0500] liao: ERROR: Server returned error for https://chef/cookbooks/ldap/0.5.0/files/7bf484760fb07838e02625e097c481a0, retrying 1/5 in 4s
[2012-02-22 20:04:00 -0500] liao: This is the same error I get on the node when I run the chef-client
[2012-02-22 20:09:00 -0500] wilton: Hello All - Quick question about Chef::Knife::Ec2ServerCreate
[2012-02-22 20:09:00 -0500] wilton: Knife users fog to create a server object.
[2012-02-22 20:09:00 -0500] wilton: server = connection.servers.create(create_server_def)
[2012-02-22 20:11:00 -0500] wilton: this object is local to the run method. Is there any way of getting access to this object without changing the knife code? I try to override the method but didn't work as expected. Maybe this is more of a ruby question the chef. :-(
[2012-02-22 20:43:00 -0500] mdxp: have a strange problem
[2012-02-22 20:43:00 -0500] mdxp: at bootstrap time i have an error like this: "NoMethodError: undefined method `-' for nil:NilClass" on a simple erb template
[2012-02-22 20:44:00 -0500] mdxp: if i run it the second time on the node it works fine
[2012-02-22 20:44:00 -0500] mdxp: just the first run fails  like that
[2012-02-22 20:44:00 -0500] mdxp: anyone has any idea how to troubleshoot that?
[2012-02-22 20:47:00 -0500] fujin: one of objects in your template is nil
[2012-02-22 20:47:00 -0500] fujin: use the stack trace to locae the object in question
[2012-02-22 20:48:00 -0500] fujin: fix the bug that caused it to become nil
[2012-02-22 20:48:00 -0500] fujin: check that it is not nil before you call a method on it
[2012-02-22 20:48:00 -0500] fujin: and yeah.. profit
[2012-02-22 20:51:00 -0500] mdxp: thanks fujin
[2012-02-22 20:51:00 -0500] mdxp: the template is actually just a plain file as i removed any variables
[2012-02-22 20:51:00 -0500] mdxp: it is a simple xml file
[2012-02-22 20:51:00 -0500] fujin: show the full debug output including the stack trace above and below the failure and the full contents of the template and the resource invocation in the recipe
[2012-02-22 20:52:00 -0500] fujin: and/or the contents of any attributes bound to the template with the variables parameter
[2012-02-22 20:52:00 -0500] mdxp: sec
[2012-02-22 20:52:00 -0500] fujin: diagnostics?
[2012-02-22 20:53:00 -0500] fujin: diagnostics is please show the full debug output, including the stack trace (triggered with -l debug, log_level :debug) below the failure, the contents of recipe, template, library or other affected code mentioned in the error
[2012-02-22 20:53:00 -0500] fujin: diagnostics?
[2012-02-22 20:53:00 -0500] bawt: diagnostics is please show the full debug output, including the stack trace (triggered with -l debug, log_level :debug) below the failure, the contents of recipe, template, library or other affected code mentioned in the error
[2012-02-22 20:53:00 -0500] fujin: get sick of typing that same thing like 100 times every day <3
[2012-02-22 20:54:00 -0500] mdxp: https://gist.github.com/1887181
[2012-02-22 20:55:00 -0500] fujin: thx
[2012-02-22 20:55:00 -0500] fujin: unfortunately you did not show the recipe invocation in the recipe as requested, where the bug actually is
[2012-02-22 20:56:00 -0500] mdxp: comming
[2012-02-22 20:56:00 -0500] mdxp: added
[2012-02-22 20:56:00 -0500] mdxp: we removed any variables
[2012-02-22 20:56:00 -0500] mdxp: and it still fails
[2012-02-22 20:56:00 -0500] mdxp: what i don't get it is that if you run it the second time
[2012-02-22 20:57:00 -0500] mdxp: it will work
[2012-02-22 20:57:00 -0500] mdxp: only first run (at bootstrap) will fail like that
[2012-02-22 20:58:00 -0500] fujin: k reading sec
[2012-02-22 21:02:00 -0500] fujin: mdxp: can you run chef with -l debug instead of letting it run in info mode?
[2012-02-22 21:02:00 -0500] fujin: i have a hunch that the exceptions are handled slightly differently
[2012-02-22 21:02:00 -0500] fujin: most importantly you should see the stack trace in line, when the resource barks
[2012-02-22 21:02:00 -0500] fujin: bawks
[2012-02-22 21:02:00 -0500] fujin: bawlkrs
[2012-02-22 21:02:00 -0500] fujin: bawrks
[2012-02-22 21:04:00 -0500] mdxp: ok, i try that; thanks
[2012-02-22 21:04:00 -0500] gondoi: i'm trying to do a begin rescue on a deploy.. basically I want to git deploy, but if it fails, to fail back to a remote_file and grab a tarball
[2012-02-22 21:04:00 -0500] gondoi: but the rescue doesn't happen
[2012-02-22 21:05:00 -0500] gondoi: anyone tried something like this?
[2012-02-22 21:11:00 -0500] hoover_damm: pardon this dumb question, a deploy resource is always deploying
[2012-02-22 21:11:00 -0500] hoover_damm: how can I make it only deploy if there's actual changes in master?
[2012-02-22 21:11:00 -0500] hoover_damm: or am I silly?
[2012-02-22 21:11:00 -0500] sivy: hoover_damm: there's a revision argument
[2012-02-22 21:11:00 -0500] jbz: hoover_damm: use deploy_revision
[2012-02-22 21:12:00 -0500] sivy: what he said
[2012-02-22 21:12:00 -0500] hoover_damm: using the revision argument
[2012-02-22 21:12:00 -0500] hoover_damm: it's tied to a revision
[2012-02-22 21:12:00 -0500] hoover_damm: it just deploys the same revision over
[2012-02-22 21:12:00 -0500] fujin: yes. it does
[2012-02-22 21:13:00 -0500] fujin: if that revision points to a symbolic reference on the remote, it is resolved
[2012-02-22 21:13:00 -0500] fujin: e.g. you can use HEAD to point to the default branch of a remote, or a tag, or a tracking branch
[2012-02-22 21:13:00 -0500] hoover_damm: currently that's current_revision || 'HEAD'
[2012-02-22 21:13:00 -0500] hoover_damm: so using HEAD would make it stop?
[2012-02-22 21:13:00 -0500] fujin: deploy_revision, revision "master", should *only* do deploys when master is updated
[2012-02-22 21:13:00 -0500] hoover_damm: doi
[2012-02-22 21:13:00 -0500] hoover_damm: that's what I thought too
[2012-02-22 21:13:00 -0500] fujin: HEAD tracks the default tracking branch of a remote.
[2012-02-22 21:14:00 -0500] c_t: that's a terrible bug, fugin
[2012-02-22 21:14:00 -0500] c_t: er
[2012-02-22 21:14:00 -0500] c_t: fujin
[2012-02-22 21:14:00 -0500] hoover_damm: yeah that's what I thought, I was going bonkers trying to short circuit this because the pattern in this recipe
[2012-02-22 21:14:00 -0500] hoover_damm: sucks
[2012-02-22 21:14:00 -0500] c_t: if I want it to track "banana", it's an error to track "bananna"
[2012-02-22 21:14:00 -0500] hoover_damm: c_t, it should track bulldog?
[2012-02-22 21:14:00 -0500] hoover_damm: okay pattern that was used is silly
[2012-02-22 21:14:00 -0500] fujin: if that is "banana" it will track bananna
[2012-02-22 21:14:00 -0500] hoover_damm: thank you fujin
[2012-02-22 21:14:00 -0500] hoover_damm: :)
[2012-02-22 21:15:00 -0500] c_t: that, I'm sure, is right out
[2012-02-22 21:15:00 -0500] fujin: o lol
[2012-02-22 21:15:00 -0500] fujin: that is a typoz
[2012-02-22 21:28:00 -0500] lusis: bug bounty email sent to the list
[2012-02-22 21:28:00 -0500] lusis: GET TO VOTING
[2012-02-22 21:29:00 -0500] Urocyon: trying to earn your shirt?
[2012-02-22 21:30:00 -0500] mortonpe: Greetings All. I am using the knife WinRm Plugin to assist in deployments. One of the interesting issues I am having is that I would like to be able to collect exit codes of the processes and evaluate them for errors before moving to the next step. Can I do this easily, does the ssh plugin have this capability?
[2012-02-22 21:30:00 -0500] lusis: heck yeah
[2012-02-22 21:36:00 -0500] cwj: lusis: CHEF-2336, go!
[2012-02-22 21:37:00 -0500] lusis: holy hell that's an old one
[2012-02-22 21:37:00 -0500] lusis: and shit, I think I got bit by that one too
[2012-02-22 21:39:00 -0500] gmcinnes: so, it turns out I"m not on the list. Is the bounty published anywhere else?
[2012-02-22 21:39:00 -0500] lusis: I can link to the email
[2012-02-22 21:39:00 -0500] gmcinnes: yes pls.
[2012-02-22 21:40:00 -0500] lusis: http://lists.opscode.com/sympa/arc/chef/2012-02/msg00342.html
[2012-02-22 21:40:00 -0500] cwj: i think its more of a penance than a bounty
[2012-02-22 21:43:00 -0500] lusis: hahaha
[2012-02-22 21:46:00 -0500] c_t: what shirt is this now?
[2012-02-22 21:48:00 -0500] lusis: http://a.yfrog.com/img739/8393/43kdrj.jpg
[2012-02-22 21:49:00 -0500] flagg0204: is there a way to do a conditional run list in a role?  e.g. i have centos and debian servers.  id like to use the yum and apt cookbooks but obviously i dont want to run apt on a centos box
[2012-02-22 21:49:00 -0500] flagg0204: can you do things like if node[platform] recipe[apt]
[2012-02-22 21:49:00 -0500] lusis: yeah, you'll end up like 50 pounds overweight if you do
[2012-02-22 21:49:00 -0500] lusis: ;)
[2012-02-22 21:50:00 -0500] flagg0204: damn
[2012-02-22 21:50:00 -0500] chip_: so this is fun. I accidentally my knife boostrap and now I have a host named "-N"
[2012-02-22 21:50:00 -0500] chip_: any idea how to make knife parse that name? Escaping, quotes, etc. aren't helping.
[2012-02-22 21:50:00 -0500] lusis: flagg0204: case statements =/
[2012-02-22 21:50:00 -0500] lusis: flagg0204: case node.platform
[2012-02-22 21:50:00 -0500] flagg0204: lusis - case statement within a role definitioon?
[2012-02-22 21:50:00 -0500] flagg0204: or within the recipe
[2012-02-22 21:51:00 -0500] lusis: recipe
[2012-02-22 21:51:00 -0500] btm: flagg0204: check out the default recipe in the apache cookbook for a few examples http://community.opscode.com/cookbooks/apache2/source
[2012-02-22 21:51:00 -0500] flagg0204: bah
[2012-02-22 21:51:00 -0500] lusis: though roles can be ruby
[2012-02-22 21:51:00 -0500] c_t: chip: try --
[2012-02-22 21:51:00 -0500] lusis: iirc
[2012-02-22 21:51:00 -0500] lusis: I've always done json
[2012-02-22 21:51:00 -0500] c_t: like knife node edit -- -N or something
[2012-02-22 21:51:00 -0500] chip_: c_t: Nice! That worked.
[2012-02-22 21:51:00 -0500] c_t: huzzah!
[2012-02-22 21:52:00 -0500] chip_: Also I got to use "I accidentally" today in a sentence. It's a good day.
[2012-02-22 21:54:00 -0500] rbarrero: is it possible for a recipe to only run on first boot?
[2012-02-22 21:55:00 -0500] lusis: rbarrero: yes if you remove it from the runlist in a recipe
[2012-02-22 21:55:00 -0500] jbz: rbarrero:  It's possible to have a recipe remove itself from the runlist when it's finished.
[2012-02-22 21:55:00 -0500] jbz: what lusis said :-)
[2012-02-22 21:56:00 -0500] lusis: recipe[myapp::bootstrap]
[2012-02-22 21:56:00 -0500] lusis: plus this
[2012-02-22 21:56:00 -0500] lusis: one sec
[2012-02-22 21:57:00 -0500] lusis: https://gist.github.com/280c0fbc19364a1781e0'
[2012-02-22 21:57:00 -0500] rbarrero: I see, what about an IF clause in an recipe
[2012-02-22 21:57:00 -0500] lusis: er
[2012-02-22 21:57:00 -0500] rbarrero: ?
[2012-02-22 21:57:00 -0500] lusis: https://gist.github.com/280c0fbc19364a1781e0
[2012-02-22 21:57:00 -0500] lusis: grrr my paste was bad too
[2012-02-22 21:57:00 -0500] lusis: that should be a ruby_block obviously
[2012-02-22 21:58:00 -0500] lusis: FYI I can't recall now where I originally saw that trick
[2012-02-22 21:58:00 -0500] lusis: but someone else did it first ;)
[2012-02-22 22:00:00 -0500] rbarrero: makes sense
[2012-02-22 22:00:00 -0500] rbarrero: last question... I need to bring up 10 nodes at once using knife-ec2
[2012-02-22 22:00:00 -0500] rbarrero: the command doesn't appear to have a parameter to do so
[2012-02-22 22:01:00 -0500] rbarrero: it's just a single node each time I run it
[2012-02-22 22:01:00 -0500] AntonZ: hello, is anyone aware of a timezone cookbook for centos/redhat ?
[2012-02-22 22:01:00 -0500] rbarrero: anybody know a work-around? Or if I'm missing something?
[2012-02-22 22:01:00 -0500] lusis: for loop =/
[2012-02-22 22:01:00 -0500] lusis: or 10 terminals ;)
[2012-02-22 22:02:00 -0500] cwj: or call knife plugins from a ruby script? never tried that
[2012-02-22 22:03:00 -0500] lusis: that or you could even do a knife script I suppose
[2012-02-22 22:03:00 -0500] thbishop: rbarrero: gnu parallel? http://www.gnu.org/software/parallel/
[2012-02-22 22:10:00 -0500] lusis: that too
[2012-02-22 22:11:00 -0500] matti: Nah ;p
[2012-02-22 22:11:00 -0500] matti: Thread.new in loop ;p
[2012-02-22 22:11:00 -0500] lusis: hahaha
[2012-02-22 22:11:00 -0500] matti: :>
[2012-02-22 22:11:00 -0500] lusis: overengineering ftw
[2012-02-22 22:12:00 -0500] matti: ;p
[2012-02-22 22:12:00 -0500] matti: No true ;p
[2012-02-22 22:12:00 -0500] matti: I bet that parallel has more switches that you have to read about.
[2012-02-22 22:12:00 -0500] matti: Typic small one-liner with Thread.new is simpler!
[2012-02-22 22:12:00 -0500] matti: ;p
[2012-02-22 22:12:00 -0500] matti: Simples.
[2012-02-22 22:12:00 -0500] matti: ;d
[2012-02-22 22:13:00 -0500] matti: [ me is just silly ]
[2012-02-22 22:14:00 -0500] fujin: just use a bash for loop lol
[2012-02-22 22:14:00 -0500] matti: Its not web scale!
[2012-02-22 22:14:00 -0500] matti: ;p
[2012-02-22 22:14:00 -0500] fujin: use a node for loop then
[2012-02-22 22:14:00 -0500] fujin: 10,000 nodes per second
[2012-02-22 22:16:00 -0500] rbarrero: so 10 terminals won't do because I may need 30 servers created
[2012-02-22 22:16:00 -0500] rbarrero: I'm not opening 30 terminals :)
[2012-02-22 22:16:00 -0500] matti: LOL
[2012-02-22 22:16:00 -0500] matti: rbarrero: Abuse Terminator ;]
[2012-02-22 22:16:00 -0500] fujin: tmux lol
[2012-02-22 22:16:00 -0500] matti: rbarrero: You can abuse its bradcasting abilities ;p
[2012-02-22 22:16:00 -0500] matti: broadcasting*
[2012-02-22 22:17:00 -0500] flagg0204: btm thanks will take a look
[2012-02-22 22:17:00 -0500] rbarrero: another note, is that knife-ec2 only has a single name as an argument
[2012-02-22 22:17:00 -0500] rbarrero: there is no auto-incrementing node names
[2012-02-22 22:17:00 -0500] rbarrero: maybe for-loop it is
[2012-02-22 22:17:00 -0500] fujin: lol
[2012-02-22 22:17:00 -0500] fujin: just don't set the node name
[2012-02-22 22:17:00 -0500] fujin: use instnace ids or some shit
[2012-02-22 22:18:00 -0500] rbarrero: each node takes between 3-7m to come online
[2012-02-22 22:18:00 -0500] rbarrero: for 30 machines, that's a long time to scale up
[2012-02-22 22:18:00 -0500] fujin: if you really need to do this stuff all the time, don't use knife-ec2 to do it
[2012-02-22 22:18:00 -0500] fujin: use metadata based bootstrap
[2012-02-22 22:18:00 -0500] fujin: or cook images with chef prebaked ready to deploy
[2012-02-22 22:18:00 -0500] fujin: [automatically]
[2012-02-22 22:18:00 -0500] rbarrero: fujin: done that
[2012-02-22 22:19:00 -0500] rbarrero: but don't know about metadata based bootstrap
[2012-02-22 22:19:00 -0500] rbarrero: how's that done
[2012-02-22 22:19:00 -0500] fujin: metadata based bootstrap is cool cause you can just go yo give me 1000
[2012-02-22 22:19:00 -0500] fujin: and they'll all run the user-data script
[2012-02-22 22:19:00 -0500] fujin: installing chef, register to the org, blha blha, run chef
[2012-02-22 22:19:00 -0500] rbarrero: yeah, my images already have chef-client pre-baked
[2012-02-22 22:19:00 -0500] fujin: so you just need the smart client.rb
[2012-02-22 22:19:00 -0500] fujin: that reads config out of user data
[2012-02-22 22:20:00 -0500] fujin: definitely the fastest way to bootstrap it hink
[2012-02-22 22:20:00 -0500] fujin: no ssh involved, no workstations
[2012-02-22 22:20:00 -0500] fujin: just machines ready to roll
[2012-02-22 22:20:00 -0500] Brad_K: rbarrero: cluster-chef?
[2012-02-22 22:21:00 -0500] rbarrero: is there some doc on this metadata based bootstrap, I need to understand it more
[2012-02-22 22:21:00 -0500] senthilr: Brad_K: cluster-chef - is that from infochimps
[2012-02-22 22:22:00 -0500] Brad_K: senthilr: indeed.
[2012-02-22 22:22:00 -0500] senthilr: have you used it
[2012-02-22 22:22:00 -0500] senthilr: I saw a demo of it
[2012-02-22 22:22:00 -0500] senthilr: looks pretty cool
[2012-02-22 22:22:00 -0500] Brad_K: it's AWS only, from what i can tell.  i haven't used it myself, because we're a rackspace shop.
[2012-02-22 22:22:00 -0500] senthilr: k
[2012-02-22 22:23:00 -0500] Brad_K: but it does seem like exactly the kind of tool you'd want to use for bringing up a bunch of machines at once.
[2012-02-22 22:26:00 -0500] rbarrero: I'll check it out
[2012-02-22 22:28:00 -0500] rbarrero: FYI: ClusterChef is now Ironfan
[2012-02-22 22:28:00 -0500] senthilr: what
[2012-02-22 22:28:00 -0500] senthilr: really ?
[2012-02-22 22:28:00 -0500] rbarrero: but from the initial reading, it's exactly what I'm looking for...
[2012-02-22 22:28:00 -0500] rbarrero: https://github.com/infochimps/cluster_chef/tree/version_3
[2012-02-22 22:28:00 -0500] rbarrero: https://github.com/infochimps-labs/ironfan
[2012-02-22 22:28:00 -0500] gmcinnes: International Registry of Fetal Anomolies
[2012-02-22 22:28:00 -0500] gmcinnes: I'm scared to look.
[2012-02-22 22:30:00 -0500] fujin: something in my mind was turning that into 'ironpan' when I was thinking about it yesterday
[2012-02-22 22:30:00 -0500] fujin: which made more Chef sense.
[2012-02-22 22:30:00 -0500] fujin: so yeah, go rename k thx
[2012-02-22 22:31:00 -0500] fujin: rbarrero: https://help.ubuntu.com/community/CloudInit
[2012-02-22 22:31:00 -0500] fujin: rbarrero: if you're using ubu, that is, cloudinit supports Chef
[2012-02-22 22:31:00 -0500] fujin: http://allanfeid.com/content/using-amazons-cloudformation-cloud-init-chef-and-fog-automate-infrastructure
[2012-02-22 22:34:00 -0500] jdeamattson: Opscode folks - what is your order of platform support (i.e. what is likely to be best supported through what is the most likely to be poorly supported). Would like to know this as we consider future platform support.
[2012-02-22 22:35:00 -0500] fujin: i dont' work for opscode but ubuntu has always been the primary focus
[2012-02-22 22:36:00 -0500] fujin: i think that is probably closely followed by Windows these days
[2012-02-22 22:39:00 -0500] rbarrero: we use centos
[2012-02-22 22:46:00 -0500] xuru: Could someone help me with a definition?  http://pastebin.com/vrrrtXz4  When ever I invoke it, "t" is always nil
[2012-02-22 22:48:00 -0500] j-v-e: hello gentlemen
[2012-02-22 22:48:00 -0500] j-v-e: I have a nested attributes question
[2012-02-22 22:48:00 -0500] j-v-e: how do I do this in a template ? : <% node[:ossec].each do |ip|-%>
[2012-02-22 22:49:00 -0500] j-v-e: the whole structure goes node[:ossec][:ipaddress][:id] etc...
[2012-02-22 22:49:00 -0500] fujin: what do you mean how do you do it?
[2012-02-22 22:49:00 -0500] j-v-e: I want to iterate throught the many ip addresses, but this returns and empty array
[2012-02-22 22:49:00 -0500] fujin: you posted the exact code to do it.
[2012-02-22 22:50:00 -0500] fujin: j-v-e: what does 'knife node show <foo> -a ossec' show ?
[2012-02-22 22:50:00 -0500] j-v-e: http://pastebin.com/RCL1aq5Q <= that's the chef log
[2012-02-22 22:51:00 -0500] j-v-e: http://pastebin.com/hkfmf7iR <== that's the ossec attributes
[2012-02-22 22:52:00 -0500] j-v-e: ha
[2012-02-22 22:52:00 -0500] j-v-e: I'm iterating throught values that shouldn't be there probably !
[2012-02-22 22:54:00 -0500] fujin: oh
[2012-02-22 22:54:00 -0500] fujin: each yields the object that you specify bro
[2012-02-22 22:54:00 -0500] fujin: node[:ossec].each { |ossec| ossec[:ipaddress][:id] }
[2012-02-22 22:58:00 -0500] Urocyon: I wanted to squash some postgres cookbook bugs, but so far haven't been able to duplicate the ubuntu related ones.  :-(
[2012-02-22 23:03:00 -0500] j-v-e: fujin: that's not going to work
[2012-02-22 23:03:00 -0500] fujin: whatchu talkin bout thats not going to work
[2012-02-22 23:04:00 -0500] j-v-e: ossec[:ipaddress] doesn't exist, it would be ossec[12.13.14.15] that contains my data
[2012-02-22 23:04:00 -0500] j-v-e: and ossec[13.14.15.16] etc...
[2012-02-22 23:04:00 -0500] fujin: oh
[2012-02-22 23:04:00 -0500] fujin: misread your data structure
[2012-02-22 23:04:00 -0500] fujin: you want something like:
[2012-02-22 23:04:00 -0500] j-v-e: so I have node[:ossec] that contains a list of random IP that I want to iterate through
[2012-02-22 23:04:00 -0500] fujin: node[:ossec].each do { |ipaddress,options| .. }
[2012-02-22 23:05:00 -0500] fujin: yield the key and value to the block
[2012-02-22 23:06:00 -0500] fujin: then it will be options["id"] etc.
[2012-02-22 23:06:00 -0500] fujin: j-v-e: that make sense?
[2012-02-22 23:06:00 -0500] j-v-e: fujin: it does, I'm trying that now
[2012-02-22 23:10:00 -0500] j-v-e: no luck :( It's not failing but the file ends up empty, as if the loop didn't return any data
[2012-02-22 23:10:00 -0500] j-v-e: http://pastebin.com/N5H0Gsjj
[2012-02-22 23:17:00 -0500] fujin: you want <%= not <%
[2012-02-22 23:17:00 -0500] fujin: <% foo %> doesn't print anyting, just runs the code
[2012-02-22 23:17:00 -0500] fujin: <%= foo %> prints val of foo
[2012-02-22 23:18:00 -0500] fujin: templates?
[2012-02-22 23:18:00 -0500] bawt: templates is http://wiki.opscode.com/display/chef/Templates
[2012-02-22 23:18:00 -0500] fujin: just_enough_ruby?
[2012-02-22 23:18:00 -0500] fujin: maybe not
[2012-02-22 23:20:00 -0500] j-v-e: oh crap. good catch ! I modified that template so many times that I missed that one ! thanks a lot !
[2012-02-22 23:20:00 -0500] j-v-e: I have the just enough ruby in front of me, but unfortunately iterating through lists and map and each and stuff like that is a bit more of ruby dark magic to me
[2012-02-22 23:21:00 -0500] j-v-e: need to spend more time using ruby I guess :)
[2012-02-22 23:21:00 -0500] j-v-e: It works now, thanks for your help
[2012-02-22 23:22:00 -0500] fujin: just_enough_ruby is http://wiki.opscode.com/display/chef/Just+Enough+Ruby+for+Chef
[2012-02-22 23:22:00 -0500] fujin: j-v-e: maybe give that a read
[2012-02-22 23:22:00 -0500] fujin: http://ruby-doc.org/core-1.9.3/Enumerable.html
[2012-02-22 23:22:00 -0500] fujin: annnd.. Erubis! http://www.kuwata-lab.com/erubis/
[2012-02-22 23:22:00 -0500] fujin: erubis is http://www.kuwata-lab.com/erubis/
[2012-02-22 23:22:00 -0500] fujin: erb is http://www.kuwata-lab.com/erubis/
[2012-02-22 23:22:00 -0500] fujin: erb
[2012-02-22 23:22:00 -0500] fujin: erb?
[2012-02-22 23:22:00 -0500] bawt: erb is http://www.kuwata-lab.com/erubis/
[2012-02-22 23:22:00 -0500] fujin: cool.
[2012-02-22 23:23:00 -0500] fujin: know bawt knows too =_=
[2012-02-22 23:23:00 -0500] fujin: now**
[2012-02-22 23:23:00 -0500] maek: when doing knife node search if I want to get at the number for cores its [:cpu][:cores] is there a way I can ask -a for that ?
[2012-02-22 23:23:00 -0500] AntonZ: what a good way to change time zone during instance boot up ?
[2012-02-22 23:25:00 -0500] j-v-e: fujin: thanks, will read. I was in the ruby doc earlier but it's a bit dry for a beginner :/
[2012-02-22 23:27:00 -0500] rbarrero: quick question
[2012-02-22 23:28:00 -0500] rbarrero: I'm writing a recipe, but I need the IP address of the node
[2012-02-22 23:28:00 -0500] maek: let me re phrase that. If I want to access just a nested attribute from knife node search using -a can I do that?
[2012-02-22 23:28:00 -0500] fujin: makuk66: -a foo.bar.boz
[2012-02-22 23:28:00 -0500] maek: fujin: im getting nothing on cpu.cores
[2012-02-22 23:28:00 -0500] fujin: AntonZ: always use UTC, profit
[2012-02-22 23:28:00 -0500] rbarrero: ip_address = attribute?('cloud') ? cloud['local_ipv4'] : ipaddress
[2012-02-22 23:28:00 -0500] rbarrero: is that valid in a recipe file?
[2012-02-22 23:28:00 -0500] fujin: i have a lib for this rbarrero stand by
[2012-02-22 23:28:00 -0500] rbarrero: I want to use it later like this #{ip_address}
[2012-02-22 23:29:00 -0500] fujin: https://github.com/fujin/chef-discovery/blob/master/libraries/ipaddress.rb#L14
[2012-02-22 23:29:00 -0500] fujin: documented in the readme
[2012-02-22 23:29:00 -0500] rbarrero: k
[2012-02-22 23:29:00 -0500] fujin: but no, that is not a valid recipe file
[2012-02-22 23:29:00 -0500] fujin: you could say:
[2012-02-22 23:29:00 -0500] fujin: ip_address = node.attribute? "cloud" ? node['cloud']['local_ipv4'] : node['ipaddress']
[2012-02-22 23:29:00 -0500] fujin: and that would be valid in a recipe
[2012-02-22 23:29:00 -0500] fujin: but the form you gave, w/ omitting 'node', is only valid for attribute files
[2012-02-22 23:30:00 -0500] fujin: not for recipe files
[2012-02-22 23:30:00 -0500] fujin: HTH
[2012-02-22 23:30:00 -0500] rbarrero: ah
[2012-02-22 23:31:00 -0500] fujin: maek: the attribute is not cpu.cores
[2012-02-22 23:31:00 -0500] maek: fujin: just realzing that. thanks and sorry
[2012-02-22 23:32:00 -0500] fujin: rbarrero: my lib uses a pref system to return the local ipv4 when the node and local node share cloud provider
[2012-02-22 23:32:00 -0500] fujin: e.g. if you have two nodes on rackspace and you want to get the ipaddress out of a target node, it'll auto grab the local ipv4
[2012-02-22 23:32:00 -0500] fujin: you can hardcode it to be public ipv4 of course
[2012-02-22 23:34:00 -0500] rbarrero: cool, let me see if I can mke that work
[2012-02-22 23:35:00 -0500] fujin: https://github.com/fujin/chef-discovery/blob/master/readme.md
[2012-02-22 23:39:00 -0500] j-v-e: is there a fundamental difference between using node.ipaddress and node[:ipaddress] ?
[2012-02-22 23:39:00 -0500] maek: fujin: since its cpu.NUMBER.cores is it possible to do something like cpu.*.cores ?  cpu.*.cores doesnt work fwiw
[2012-02-22 23:39:00 -0500] fujin: why not use cpu.real
[2012-02-22 23:39:00 -0500] fujin: or cpu.total
[2012-02-22 23:39:00 -0500] fujin: cpu.total includes all of the cores
[2012-02-22 23:40:00 -0500] rbarrero: ip_address = Discovery.ipaddress(:remote_node => host, :node => node, :type => :local
[2012-02-22 23:40:00 -0500] maek: fujin: guess im blind. didnt see those options. thank you
[2012-02-22 23:40:00 -0500] rbarrero: your ipaddress.rb library will be included automatically?
[2012-02-22 23:40:00 -0500] maek: last stupid question. can I ask for 2 attributes somehow?
[2012-02-22 23:40:00 -0500] rbarrero: sorry for the stupid question, is there an include function I need in the recipe?
[2012-02-22 23:45:00 -0500] fujin: rbarrero: oh, its automatic
[2012-02-22 23:45:00 -0500] fujin: rbarrero: if you have it as a dependency on a cookbook

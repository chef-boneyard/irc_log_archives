[2012-02-20 08:06:00 -0500] Axsuul: maek: do you know if that rbenv cookbook works on Ubuntu OS?
[2012-02-20 08:15:00 -0500] BryanWB: fwiw, i think the ironfan cookbooks have some pretty awesome practices, and they are even documented
[2012-02-20 08:19:00 -0500] Axsuul: BryanWB: link?
[2012-02-20 08:20:00 -0500] BryanWB: Axsuul: https://github.com/infochimps-labs/ironfan-pantry , this week's foodfight is all about ironfan
[2012-02-20 08:22:00 -0500] Axsuul: BryanWB: thanks
[2012-02-20 08:40:00 -0500] c64: Hi Guys!
[2012-02-20 08:41:00 -0500] c64: If I manage my databags in git
[2012-02-20 08:41:00 -0500] c64: can I still use API calls to edit them?
[2012-02-20 08:41:00 -0500] c64: ..or will they lose sync (that is, I do a load, then make changes with API)
[2012-02-20 08:43:00 -0500] BryanWB: u will lose sync w/ your git repo
[2012-02-20 08:43:00 -0500] BryanWB: by API, do u mean knife?
[2012-02-20 08:43:00 -0500] c64: ummmm
[2012-02-20 08:43:00 -0500] c64: REST API
[2012-02-20 08:43:00 -0500] c64: That's against the server, no?
[2012-02-20 08:44:00 -0500] c64: I want our CI server to pass data to the Chef in order to perform deployments
[2012-02-20 08:44:00 -0500] BryanWB: yes
[2012-02-20 08:44:00 -0500] c64: so, yeah
[2012-02-20 08:45:00 -0500] c64: (which JAR's need to be updated, etc)
[2012-02-20 08:47:00 -0500] chaos: is there any way to parse knife.rb?
[2012-02-20 08:47:00 -0500] chaos: nice way*
[2012-02-20 08:51:00 -0500] BryanWB: c64: r u using maven?
[2012-02-20 08:52:00 -0500] BryanWB: is there anyway for maven to check if there is a more up-to-date .war ?  i was investigating that this weekend
[2012-02-20 08:54:00 -0500] BryanWB: c64:  i have  a similar  need
[2012-02-20 08:54:00 -0500] miah: sup sup
[2012-02-20 08:54:00 -0500] BryanWB:  miah yo, yo :)
[2012-02-20 08:54:00 -0500] miah: late night. fighting fires.
[2012-02-20 08:54:00 -0500] miah: good thing i took a nap this afternoon
[2012-02-20 08:56:00 -0500] miah: still super derpette right now :/
[2012-02-20 08:59:00 -0500] BryanWB: sorry to hear that sounds frustrating :(
[2012-02-20 09:00:00 -0500] miah: its ok
[2012-02-20 09:00:00 -0500] miah: its the life of a sysadmin
[2012-02-20 09:04:00 -0500] c64: BryanWB: hmmm
[2012-02-20 09:04:00 -0500] c64: I'm not a maven guy - I have someone putting together the buld process
[2012-02-20 09:04:00 -0500] c64: but, as I understand it,
[2012-02-20 09:04:00 -0500] c64: Maven knows what artifacts have changes
[2012-02-20 09:04:00 -0500] c64: changed*
[2012-02-20 09:04:00 -0500] miah: time for sleepytime
[2012-02-20 09:04:00 -0500] BryanWB: miah: good night
[2012-02-20 09:05:00 -0500] BryanWB: c64: if u can find out the command to check, i would thank you kindly
[2012-02-20 09:05:00 -0500] c64: I'll ask our build guy
[2012-02-20 09:05:00 -0500] c64: (he'll be back in a few minutes)
[2012-02-20 09:33:00 -0500] truzie: muhhaha
[2012-02-20 09:54:00 -0500] c64: BryanWB: Our build guy says there's no way
[2012-02-20 09:54:00 -0500] c64: not since maven2
[2012-02-20 09:58:00 -0500] eamelink: I'm trying to access a local data-bag with chef-solo, but it insists on trying to fetch it from a chef server (and dies on not finding a client.pem).
[2012-02-20 09:58:00 -0500] eamelink: Any hints in how to debug?
[2012-02-20 09:59:00 -0500] BryanWB: c64: there is no update action/phase?
[2012-02-20 10:00:00 -0500] eamelink: Ah, my chef is too old
[2012-02-20 10:16:00 -0500] c64: Our guy hasn't found anything....
[2012-02-20 10:16:00 -0500] c64: There is something about using "latest" under version...
[2012-02-20 10:16:00 -0500] c64: but he says that may be deprecated in maven3
[2012-02-20 10:29:00 -0500] BryanWB: c64: argh
[2012-02-20 10:29:00 -0500] BryanWB: c64: tks for checking
[2012-02-20 11:00:00 -0500] m4rcu5: that littlechef tool is really nice, its like knife-solo on steroids. however i miss the zsh completion i had with knife-solo :(
[2012-02-20 12:00:00 -0500] liao: Morning, im running into a error where the cookbook checksums are failing in that the files seems not to exist:
[2012-02-20 12:00:00 -0500] liao: http://pastie.org/3419915
[2012-02-20 12:01:00 -0500] liao: Thats this chef-client output
[2012-02-20 12:01:00 -0500] liao: Ive looked at the couchdb documents and that cookbook default.rb is the file that is referenced with that checksum
[2012-02-20 12:06:00 -0500] c64: I have 3 applications I deploy with recipes. They all do the same thing, and the only difference is the name of the application (which is used in paths, usernames, etc)
[2012-02-20 12:06:00 -0500] c64: Is it possible to write a generic recipe and pass the application name to it?
[2012-02-20 12:06:00 -0500] c64: (that is, the _recipes_ are identical, except for the name of the application)
[2012-02-20 12:16:00 -0500] BryanWB: c64: use an lwrp
[2012-02-20 12:16:00 -0500] BryanWB: c64: isn't that hard
[2012-02-20 12:16:00 -0500] c64: I _just_ cam e to that conclusion.
[2012-02-20 12:16:00 -0500] m4rcu5: hhmm, one more thing i miss in little chef is the auto creation of the node.json file after you prepaired a node :)
[2012-02-20 12:16:00 -0500] BryanWB: or a definition
[2012-02-20 12:16:00 -0500] BryanWB: lwrps rock
[2012-02-20 12:17:00 -0500] BryanWB: c64: what is your app?
[2012-02-20 12:17:00 -0500] BryanWB: is it inside tomcat?
[2012-02-20 12:18:00 -0500] c64: we have a bunch of apps - this specific cluster of apps is an array of Java processes
[2012-02-20 12:18:00 -0500] BryanWB: so u don't have a servlet container? interesting
[2012-02-20 12:18:00 -0500] c64: ummm
[2012-02-20 12:18:00 -0500] c64: _other_ apps sit in Tomcat
[2012-02-20 12:18:00 -0500] c64: this is a back-office component
[2012-02-20 12:18:00 -0500] BryanWB: ok, well if ever need it i have tomcat cookbook in bryanwb/cookbooks
[2012-02-20 12:19:00 -0500] BryanWB: w/ an lwrp :)
[2012-02-20 12:19:00 -0500] c64: I had to write one from scratch :-(
[2012-02-20 12:19:00 -0500] c64: I started with the opscode one
[2012-02-20 12:19:00 -0500] c64: but needed it to perform a lot of customization
[2012-02-20 12:19:00 -0500] c64: so I rewrite it :-(
[2012-02-20 12:19:00 -0500] BryanWB: the opscode tomcat cookboook is horrible
[2012-02-20 12:19:00 -0500] c64: rewrote*
[2012-02-20 12:19:00 -0500] BryanWB: and they know it
[2012-02-20 12:19:00 -0500] c64: I'll take a look at yours
[2012-02-20 12:19:00 -0500] BryanWB: umm, would love to collaborate if u ever get a chance
[2012-02-20 12:20:00 -0500] BryanWB: there are so many different use cases, i would like to accommodate
[2012-02-20 12:20:00 -0500] c64: The biggest customization was
[2012-02-20 12:20:00 -0500] c64: that instead of one instance called tomcat6
[2012-02-20 12:20:00 -0500] c64: we have a few
[2012-02-20 12:21:00 -0500] BryanWB: kewl, yeah, mine uses catalina_base so u can have mutliple instances on same machine
[2012-02-20 12:21:00 -0500] c64: yep
[2012-02-20 12:21:00 -0500] c64: and needed to run the template for each on on their own ports
[2012-02-20 12:48:00 -0500] quazimodo: so
[2012-02-20 12:49:00 -0500] quazimodo: i've been asked why chef is better than a bootstraping script that pulls config shell scripts and packages off of an s3 bucket
[2012-02-20 12:49:00 -0500] quazimodo: any articles that explain this question well?
[2012-02-20 12:51:00 -0500] BryanWB: quazimodo: hah, i can explain :)
[2012-02-20 12:52:00 -0500] quazimodo: BryanWB: i'm happy to read an article if it saves you time
[2012-02-20 12:52:00 -0500] BryanWB: i have done that and it is very painful! and yours -- or at least, my shell scripts are brittle, and can't a big uprgrade
[2012-02-20 12:52:00 -0500] BryanWB: like from rhel5 to 6
[2012-02-20 12:52:00 -0500] quazimodo: the scripts we have seem to be pretty good
[2012-02-20 12:52:00 -0500] quazimodo: he's been using his own bootstrap scripts
[2012-02-20 12:53:00 -0500] BryanWB: here is my article   http://devopsanywhere.blogspot.com/2011/10/why-chef.html  , based on coming to chef after writing a 500-line bootstrap script for rhel 5
[2012-02-20 12:56:00 -0500] quazimodo: can chef be configured to pull its configs from an s3 bucket rather than a server?
[2012-02-20 12:58:00 -0500] liao: anyone seen where your cookbooks are no longer on the chef-server, I keep getting these server errors, the couchdb pointers for the file checksums are updated. But when a client of knife cookbook download is ran I get the server error like the cookbook file is no longer htere
[2012-02-20 12:59:00 -0500] quazimodo: [lol BryanWB why does ruby pale to python?
[2012-02-20 13:00:00 -0500] BryanWB: quazimodo: i prefer python, but ruby better suited to our problem domain
[2012-02-20 13:01:00 -0500] quazimodo: hrm
[2012-02-20 13:04:00 -0500] BryanWB: quazimodo: u couldn't write lwrps in python
[2012-02-20 13:04:00 -0500] BryanWB: cuz python can't do all the insane crap that ruby can
[2012-02-20 13:04:00 -0500] quazimodo: it would be easy if chef clients could be configured to pull configs from an s3 bucket without the need for a server
[2012-02-20 13:05:00 -0500] quazimodo: BryanWB: no idea wut that is
[2012-02-20 13:05:00 -0500] yatesy: you can point chef-solo at a http URL i believe so that might work for pulling from an s3 URL quazimodo
[2012-02-20 13:06:00 -0500] quazimodo: hrm, is chef-solo a frowned upon, ginger step child of opscode?
[2012-02-20 13:07:00 -0500] BryanWB: quazimodo: no, chef-solo rocks
[2012-02-20 13:07:00 -0500] quazimodo: cool
[2012-02-20 13:11:00 -0500] Axsuul: Do you guys still use passwords for you users? or only SSH keys now?
[2012-02-20 13:12:00 -0500] nacer: ohai
[2012-02-20 13:13:00 -0500] nacer: Axsuul: ssh key here
[2012-02-20 13:13:00 -0500] Axsuul: nacer: so you disable password authentication in the ssh_config?
[2012-02-20 13:13:00 -0500] nacer: Axsuul: nop
[2012-02-20 13:15:00 -0500] quazimodo: it occurs to me that a non distribute system for cloud stuff isnt the way to go
[2012-02-20 13:15:00 -0500] Axsuul: nacer: what do you do?
[2012-02-20 13:16:00 -0500] nacer: Axsuul: nothing
[2012-02-20 13:16:00 -0500] quazimodo: gives keys, has fun
[2012-02-20 13:17:00 -0500] nacer: Axsuul: i only put the key and create the user with no password
[2012-02-20 13:23:00 -0500] c64: In these LWRPs
[2012-02-20 13:23:00 -0500] c64: what does it mean when I see something like end.run_action(:run)
[2012-02-20 13:23:00 -0500] c64: that seems like _advanced_ ruby :-)
[2012-02-20 13:24:00 -0500] atomic-penguin: c64, which recipe?
[2012-02-20 13:24:00 -0500] c64: ummm
[2012-02-20 13:24:00 -0500] c64: that was some random provider I'm using
[2012-02-20 13:24:00 -0500] c64: (I"m writing my first LWRP
[2012-02-20 13:25:00 -0500] c64: I"m using the apt repository provider as a guide
[2012-02-20 13:25:00 -0500] c64: and a whole bunch of the "end" statements have objects tagged on
[2012-02-20 13:26:00 -0500] c64: ...or whatever end.run_action(:run) means...
[2012-02-20 13:29:00 -0500] atomic-penguin: methods, but yeah, I see what you mean
[2012-02-20 13:31:00 -0500] c64: "end" has methods?
[2012-02-20 13:31:00 -0500] atomic-penguin: It was added in COOK-445
[2012-02-20 13:32:00 -0500] atomic-penguin: http://tickets.opscode.com/browse/COOK-445
[2012-02-20 13:34:00 -0500] atomic-penguin: c64, honestly I don't know, first I've seen it.  Looks like schisamo added it in 586c7c37
[2012-02-20 13:38:00 -0500] atomic-penguin: https://github.com/opscode/cookbooks/commit/586c7c3711b9c3f9ed50620f3333db0badcd758a
[2012-02-20 13:40:00 -0500] c64: I'll take a look
[2012-02-20 13:40:00 -0500] c64: thanks!
[2012-02-20 13:40:00 -0500] atomic-penguin: c64, guessing it has something to do with order and compilation
[2012-02-20 13:41:00 -0500] c64: hmmm
[2012-02-20 13:41:00 -0500] c64: Oh, yeah
[2012-02-20 13:41:00 -0500] c64: I saw something about compilation phase, etc
[2012-02-20 13:41:00 -0500] atomic-penguin: c64, like create the execute block, and delay until after the file creation
[2012-02-20 13:41:00 -0500] c64: (I'm _really_ new to this :-) )
[2012-02-20 13:42:00 -0500] atomic-penguin: c64, they're not really calling a method from end.  calling a method on the execute block itself
[2012-02-20 13:42:00 -0500] c64: I see
[2012-02-20 13:49:00 -0500] paulw_: has anyone had any issues with chef client on ubuntu 9.10?
[2012-02-20 13:52:00 -0500] atomic-penguin: paulw_, what kind of issues?
[2012-02-20 13:54:00 -0500] paulw_: sorry i should have phrased that better, i have a production machine running 9.10 and i was going to manually install chef-client and was wondering if anyone has ever experienced any issues
[2012-02-20 13:54:00 -0500] paulw_: @atomi-penguin also FoodFightShow is an awesome podcast BTW
[2012-02-20 13:54:00 -0500] atomic-penguin: I only did the first episode.  I was nervous as hell
[2012-02-20 13:55:00 -0500] paulw_: it was good
[2012-02-20 13:55:00 -0500] atomic-penguin: BryanWB, runs that
[2012-02-20 13:55:00 -0500] paulw_: i really hope it keeps going
[2012-02-20 13:55:00 -0500] paulw_: are you going to do any more?
[2012-02-20 13:55:00 -0500] atomic-penguin: If BryanWB wants me to, I will
[2012-02-20 13:56:00 -0500] paulw_: hopefully he will, i think it would help the project out a lot
[2012-02-20 14:06:00 -0500] BryanWB: atomic-penguin: i think u did a fine job
[2012-02-20 14:07:00 -0500] BryanWB: atomic-penguin: we will definitely have u back on some time
[2012-02-20 14:07:00 -0500] atomic-penguin: BryanWB, are you using Jenkins to test your chef code?
[2012-02-20 14:07:00 -0500] BryanWB: paulw_: next episode comes out wednesday, all about ironfan and managing hadoop
[2012-02-20 14:07:00 -0500] BryanWB: atomic-penguin: nope
[2012-02-20 14:07:00 -0500] BryanWB: not testing shit, but should be
[2012-02-20 14:08:00 -0500] atomic-penguin: BryanWB, hmm thought I heard you talking about it, was looking for some testing strategy input
[2012-02-20 14:08:00 -0500] BryanWB: wasn't me, probably someone smarter
[2012-02-20 14:08:00 -0500] BryanWB: atomic-penguin: mrflip is the man to talk to
[2012-02-20 14:09:00 -0500] atomic-penguin: I don't know who that is
[2012-02-20 14:09:00 -0500] atomic-penguin: Extent of my testing so far, run 'knife cookbook test --all' on master
[2012-02-20 14:10:00 -0500] BryanWB: atomic-penguin: he is mrflip on irc, phil kromer, see ironfan-ci on github, he is doing stuff w/ cuken
[2012-02-20 14:15:00 -0500] Axsuul: Anyone know of a good samba cookbook?
[2012-02-20 14:53:00 -0500] dyer: Hey guys, I have a question regarding attributes  So if I have two cookbooks, one called "prism", and another called "phono", which depends on Prism.  So given that want to set a default attribute in the Prism cookbook inside the Phono cookbook.  What I have done is added "include_attributes "prism" in side the default.rb file in the phono cookbook ( phono/attributes/default.rb ), I then use
[2012-02-20 14:53:00 -0500] dyer:  default[:prism][:sipmethod][:phono_interceptor][:enabled]  = true at the top of the phono default.rb file, shouldnt this work ?
[2012-02-20 14:53:00 -0500] dyer: the default mode for this attribute in the Prism cookbook is false, I am trying to override it to true in the Phono cookbook
[2012-02-20 14:54:00 -0500] atomic-penguin: dyer, include_attributes "prism" then set an override, or normal attribute
[2012-02-20 14:54:00 -0500] dyer: yea, thats what I did, and I thought this was working before...
[2012-02-20 14:54:00 -0500] atomic-penguin: dyer, did you also make a depends "prism" in the metadata.rb for phono?
[2012-02-20 14:55:00 -0500] dyer: https://gist.github.com/351ba507f46d10bc4d9b
[2012-02-20 14:55:00 -0500] dyer: yep
[2012-02-20 14:58:00 -0500] dyer: should I see the value being overwritten in shef on the node ?
[2012-02-20 14:58:00 -0500] dyer: back, sorry, connection dropped
[2012-02-20 14:59:00 -0500] atomic-penguin: dyer, what is your run_list order on the node?
[2012-02-20 14:59:00 -0500] dyer: Just including the phono recipe
[2012-02-20 14:59:00 -0500] dyer: but wait, I think something changed
[2012-02-20 14:59:00 -0500] dyer: love it when these things seemingly fix themselves
[2012-02-20 14:59:00 -0500] dyer: lol
[2012-02-20 14:59:00 -0500] dyer: one sec, I think its getting the correct value now
[2012-02-20 15:07:00 -0500] sivy: heyo
[2012-02-20 15:08:00 -0500] BryanWB: is their a cookbook for jira?
[2012-02-20 15:09:00 -0500] atomic-penguin: BryanWB, someone just asked that on the mailing list.  Apparently not, but btm has an internal cookbook for Atlassian stuff
[2012-02-20 15:09:00 -0500] BryanWB: interesting
[2012-02-20 15:10:00 -0500] BryanWB: well, guess i will have to test my tomcat ckbk w/ it
[2012-02-20 15:21:00 -0500] rweng: hi, i have three cookbooks with the include_recipe order 3->2-->1. in the first one, i define default['cookbook'] = 1, in the second I override this with override['cookbook'] = 2. How would I override 'cookbook' the third time in the third cookbook?
[2012-02-20 15:24:00 -0500] jtimberman: rweng: why are you overriding via cookbooks in three places?
[2012-02-20 15:25:00 -0500] jtimberman: BryanWB: https://github.com/btm/btm-cookbooks
[2012-02-20 15:25:00 -0500] jtimberman: opscode publishes a 'jira' cookbook
[2012-02-20 15:25:00 -0500] jtimberman: but the one in btm's repo is probably newer.
[2012-02-20 15:26:00 -0500] BryanWB: jtimberman: tks!
[2012-02-20 15:27:00 -0500] rweng: jtimberman: I have an rails_app cookbook that uses https://github.com/fnichol/chef-rbenv. rbenv cookbook comes with defaults. now my rails_app cookbook is supposed to have different defaults, thus, should override them. now two of my three app cookbooks just use the rails_app cookbook with its defaults, but for one I want to set a different ruby version, thus I need to override it again
[2012-02-20 15:42:00 -0500] jtimberman: rweng: put your specific apps into their own roles and use override attributes at the role level
[2012-02-20 15:46:00 -0500] rweng: jtimberman: yeah, guess that works. There is no way to override an attribute within a cookbook, though? can I override it programatically? Then I could use another namespace with default values and in the recipe itself use override with the final values.
[2012-02-20 15:47:00 -0500] jtimberman: sure
[2012-02-20 15:47:00 -0500] jtimberman: there's 12 ways to set attributes.
[2012-02-20 15:47:00 -0500] jtimberman: and like, 6 of them can be used in cookbooks between attributes files and recipes.
[2012-02-20 15:47:00 -0500] jtimberman: attributes?
[2012-02-20 15:47:00 -0500] bawt: attributes is http://wiki.opscode.com/display/chef/Attributes
[2012-02-20 15:48:00 -0500] jtimberman: but doing everything in the attributes files only *will* lead to confusion and "why isn't this working right?"
[2012-02-20 15:51:00 -0500] Brad_K: rweng: over-riding attributes in the manner you suggest is an anti-pattern.  You would be encoding specific information for a particular function (or "role") within the recipe itself, whereas that kind of thing really should be encoded within the role and the cookbooks & recipes should be relatively generic.
[2012-02-20 15:53:00 -0500] Brad_K: rweng: doing what you suggest might seem to make more sense to you now, or be easier.  However, in the long run, you would be setting up traps for yourself that would be likely to make things much more painful in the future.  At that point, if you ever wanted to go back and do things the "right way", you would then have to un-do all the work you're talking about doing now, so that you could go back and re-do it a different way.  why not do it the right/
[2012-02-20 15:56:00 -0500] rweng: Brad_K: having default values doesn't seem to be such an anti-pattern to me. As far as I see, overrides specified at role level should override the ones in the cookbooks, so why would I need to un-do everything? At the end, I dont use roles that much because roles can't have other roles in the run_list (as far as I've seen).
[2012-02-20 15:58:00 -0500] Brad_K: rweng: i have multiple levels of roles nested inside of each other.  that's no problem at all.
[2012-02-20 15:59:00 -0500] Brad_K: in fact, i would argue that is one of their greatest strengths.
[2012-02-20 16:07:00 -0500] gwaldo: Client using Open-Source Chef (.10.4; yes, I know it's old) and a certain cookbook is throwing a HTTP 504 when browsing the web app, and chef-client runs are failing ("exception": "Net::HTTPFatalError: 500 \"Internal Server Error\").  Is this an indication that someone broke the cookbook?
[2012-02-20 16:22:00 -0500] chipp: hello, any tips on a chef-server where the ip has changed? running 0.10.8 on ubunut
[2012-02-20 16:23:00 -0500] chipp: ?
[2012-02-20 16:23:00 -0500] ranjibd: chipp, chef server's ip changed?
[2012-02-20 16:23:00 -0500] ranjibd: or chef client?
[2012-02-20 16:24:00 -0500] chipp: as in, I'm running open-source chef-server, and changed the ip address for the server, and the webui and client is unable to get a status
[2012-02-20 16:25:00 -0500] ranjibd: so all your client now point to old ips?
[2012-02-20 16:25:00 -0500] ranjibd: you can use knife exec to change the /etc/chef/client.rb to point to new ip
[2012-02-20 16:25:00 -0500] chipp: and the webgui does not allow me to get the 'status' on my nodes is this because the /etc/chef/*.pem files are invalidated ?
[2012-02-20 16:27:00 -0500] chipp: ok, looks like I am unable to start up chef-solr on the server
[2012-02-20 16:27:00 -0500] ranjibd: you can re register nodes
[2012-02-20 16:40:00 -0500] TheBeast: is there any way of managing ruby dependencies (libyaml/readline/etc) + ruby + ruby gems + chef via rvm?
[2012-02-20 16:41:00 -0500] TheBeast: I'm in the process of setting up a custom RPM repository for the aforementioned packages and it's a pain in the ass. writing rpm spec files for each and every one of them is equally painful
[2012-02-20 16:41:00 -0500] TheBeast: at the same time I can't rely on external repositories such as rbel or aegisco :/
[2012-02-20 16:42:00 -0500] TheBeast: it would be really nice to deploy all this stuff in one shot
[2012-02-20 16:48:00 -0500] jtimberman: TheBeast: have you seen the chef-full package via our omnibus project? http://opscode.com/chef/install
[2012-02-20 16:48:00 -0500] jtimberman: its in beta
[2012-02-20 16:49:00 -0500] jtimberman: installs all the things needed for chef-client above libc in a single package including its own ruby, rubygems, etc.
[2012-02-20 16:50:00 -0500] jtimberman: http://f.images.memegenerator.net/instances/400x/14916437.jpg
[2012-02-20 16:51:00 -0500] David_Miller: has anyone put chef client on xenserver?  I tried the knife red hat bootstrap and had no luck
[2012-02-20 17:04:00 -0500] gwaldo: Browsing to a cookbook (but not other cookbooks) on Open-Source Chef generates a 504 (and chef-client runs fail returning a 500).  Where should I troubleshoot?
[2012-02-20 18:15:00 -0500] jtimberman: gwaldo: try restarting the chef-server-api with debug logigng
[2012-02-20 18:15:00 -0500] gwaldo: Thank you, Joshua
[2012-02-20 18:15:00 -0500] jtimberman: logigninginginggginggingging
[2012-02-20 18:16:00 -0500] gwaldo: lulz
[2012-02-20 18:35:00 -0500] TheBeast: jtimberman: hi, thanks for the suggestion, I'll definitely check it out.
[2012-02-20 18:50:00 -0500] CharlieSu: For the longest time I've been installing sun-java6-jdk from the Ubuntu Partner repo for my versions (10.04, 10.10) but it looks like they're no longer hosting this package.  Anyone else run into this?
[2012-02-20 18:50:00 -0500] CharlieSu: Or suggest what Java I should move to?
[2012-02-20 18:50:00 -0500] flashmanbahadur: OpenJDK, or download from Oracle and install it yourself
[2012-02-20 18:51:00 -0500] itwasntandy: CharlieSu: download the RPM from http://www.java.com/en/download/linux_manual.jsp and do alien -d or similar
[2012-02-20 18:51:00 -0500] CharlieSu: Looks like I can add the PPA and install sudo add-apt-repository ppa:sun-java-community-team/sun-java6
[2012-02-20 18:51:00 -0500] CharlieSu: is there a chef resource for adding PPAs?
[2012-02-20 18:59:00 -0500] hcastro: CharlieSu: there is a chef cookbook for java itself
[2012-02-20 19:23:00 -0500] TheBeast: ok so what would be the best way of deploying chef on CentOS 5.x? So far I've packed (rpm) ruby deps + ruby + rubygems + chef deps + chef but this is too tedious/complicated/requires a lot of time. Another option out there is RVM but this would require a toolchain to compile the aforementioned packages. omnibus sounds interesting but I'm not exactly sure what's happening behind the scenes
[2012-02-20 19:24:00 -0500] TheBeast: we simply cannot rely on rpm.aegisco or the rbel repository
[2012-02-20 19:27:00 -0500] flashmanbahadur: Can I expect shellout!(command) to be parsable in the same way as `command` ?  Reading the source code for shellout but not getting a good handle on it
[2012-02-20 19:27:00 -0500] hcastro: TheBeast: http://s3.amazonaws.com/opscode-full-stack/install.sh
[2012-02-20 19:33:00 -0500] jbz: TheBeast: We've had bad luck with trying to run chef client under rvm, it causes lots of confusion as to what's running on what ruby.  We specifically install our desired ruby/rubygems onto the box, then install chef with ruby gems, and then start up chef to do the rest (including configuring the chef client daemon).
[2012-02-20 19:35:00 -0500] TheBeast: jbz I packed ruby along with libyaml dep in rpm format and installed it under a different prefix: /opt - however, creating RPMs for each and every gem is a royal PITA. managing them via rubygems is a different story tho...
[2012-02-20 19:35:00 -0500] TheBeast: I can't stand rubygems.
[2012-02-20 19:36:00 -0500] TheBeast: it's the same shit for every other scripting language out there <_<
[2012-02-20 19:37:00 -0500] jbz: TheBeast:  Whatever my feelings about rubygems, Opscode makes chef easy to install (and manage the installation) using it, soyeah.  At least, with Ruby 1.9.x, if you compile the ruby you get rubygems with no add'l packaging worries.
[2012-02-20 19:37:00 -0500] jbz: So we have an apt package for ruby (yeah, ubuntu, so take my info with ration of NaCL for your use case) which installs ruby/rubygems, and then it's fairly straightforward.
[2012-02-20 19:38:00 -0500] jbz: TheBeast:  Have you run across the fpm ruby gem for doing packaging?  Makes life much easier.
[2012-02-20 19:40:00 -0500] TheBeast: jbz nope, I'll take a look
[2012-02-20 19:41:00 -0500] TheBeast: as I said I have no problem packing ruby for centos, I currently have 1.9.3-p125 running smoothly
[2012-02-20 19:41:00 -0500] TheBeast: I'm going to investigate fpm
[2012-02-20 19:42:00 -0500] TheBeast: the only downside of rvm is the fact that I need a fully functional toolchain to get ruby installed
[2012-02-20 19:43:00 -0500] TheBeast: now we don't put such tools in prod
[2012-02-20 19:43:00 -0500] TheBeast: =]
[2012-02-20 19:46:00 -0500] jbz: yeah
[2012-02-20 19:46:00 -0500] jbz: IF you have it packaged, fpm won't help. :-)
[2012-02-20 19:46:00 -0500] miah: moin
[2012-02-20 19:47:00 -0500] TheBeast: as I said my only concern is the way I'm going to manage those 20+ gems sitting on top of ruby
[2012-02-20 19:58:00 -0500] jbz: TheBeast:  Well, you manage those using Chef, right?
[2012-02-20 19:58:00 -0500] jbz: Or are you talking about the Chef gem deps?
[2012-02-20 20:00:00 -0500] jbz: Sorry, confused.  The gems will be only manageable by root, if they're system gems.  Chef can manage them, or you can just 'lock' them to ensure they're only used by chef (disallow anyone from touching them).  If Chef is the only Ruby stack app running, that should work OK.
[2012-02-20 20:13:00 -0500] jtimberman: CharlieSu: the latest version of the java cookbook (1.4.0) published by opscode has oracle recipes contributed by bryanwb.
[2012-02-20 20:14:00 -0500] TheBeast: jbz chef is the only app running on top of the /opt ruby install. lol. We might have clients who choose to run ruby stuff BUT: 1) we don't want them to pollute our ruby stuff and 2) if they choose to run stock ruby we'd rather not fuck around with their stuff
[2012-02-20 20:14:00 -0500] TheBeast: but it's a pita nonetheless
[2012-02-20 20:16:00 -0500] jtimberman: TheBeast: thats part of the point of putting it all in one segregated location.
[2012-02-20 20:16:00 -0500] TheBeast: jtimberman that's why I've opted to pack/install ruby under /opt
[2012-02-20 20:20:00 -0500] jbz: TheBeast:  We enforce the use of Bundler on all Ruby apps we deploy on our nodes, to segregate them from the System/Chef ruby/gems stack.
[2012-02-20 20:20:00 -0500] jbz: Works well, doesn't require RVM and associated pain.
[2012-02-20 20:20:00 -0500] jbz: (We're lucky, we get to be draconian about which Ruby version our devs can use).
[2012-02-20 20:21:00 -0500] jtimberman: jbz: you so mean.
[2012-02-20 20:21:00 -0500] jtimberman: ;)
[2012-02-20 20:22:00 -0500] jbz: jtimberman: I'm an *Op*, man.
[2012-02-20 20:22:00 -0500] jtimberman: and you hve a beard!
[2012-02-20 20:22:00 -0500] jbz: 'DevOps' is a sinister evil conspiracy from the dev side of the house to elicit managerial support for them evading our PERFECTLY REASONABLE GUIDELINES
[2012-02-20 20:22:00 -0500] jbz: (I do!)
[2012-02-20 20:22:00 -0500] jtimberman: hehehe
[2012-02-20 20:22:00 -0500] jbz: (also they need to get offa my lawn)
[2012-02-20 20:23:00 -0500] jbz: I am disappoint in myself.  I tried to think of something to present at ChefCon and failed.
[2012-02-20 20:23:00 -0500] CharlieSu: jtimberman: thanks..   i'll take a look.
[2012-02-20 20:23:00 -0500] jbz: "How to deploy and use chef as a complete idjit" maybe.
[2012-02-20 20:25:00 -0500] jtimberman: jbz: you could have presented on your dashboard thing your devs use
[2012-02-20 20:25:00 -0500] CharlieSu: jtimberman: So I just looked at the source and I'm wondering if using this PPA is smarter.  Thoughts?  (ppa:sun-java-community-team/sun-java6 , ubuntu only)
[2012-02-20 20:29:00 -0500] jtimberman: CharlieSu: i'm not planning to write a recipe for that.
[2012-02-20 20:29:00 -0500] CharlieSu: jtimberman: yeah i understand.  I just wondered if you thought that was a better approach.
[2012-02-20 20:32:00 -0500] jtimberman: CharlieSu: i don't have a horse in this race. openjdk works for chef-solr so thats what we're using for the cookbook default.
[2012-02-20 20:39:00 -0500] TheBeast: jtimberman does the omnibus project have a separate mailing list? where's all the hot action taking place?
[2012-02-20 20:39:00 -0500] jbz: jtimberman:  Yeah, except we're in the process of replacing it.  When the new one is in a more usable state, maybe I will...
[2012-02-20 20:39:00 -0500] fujin: there's no hot action, it's point and go ?
[2012-02-20 20:40:00 -0500] jbz: (and when we have a usable FOSS version)
[2012-02-20 20:40:00 -0500] fujin: believe the guys are working on a chef_gem resource or some-such that allow syou to install gems into the ominbus gem directory or whatever, too, for next version maybe
[2012-02-20 20:40:00 -0500] jtimberman: TheBeast: discussion on the chef-dev list mostly
[2012-02-20 20:40:00 -0500] jtimberman: but sometimes on the regular chef mailing list
[2012-02-20 20:40:00 -0500] jtimberman: fujin: thats in master and will be included for 0.10.10
[2012-02-20 20:40:00 -0500] fujin: cool beans
[2012-02-20 20:40:00 -0500] TheBeast: I'll subscribe
[2012-02-20 20:41:00 -0500] jtimberman: it will use the ruby that chef is running under for installing gems, omnibus-built or otherwise installed.
[2012-02-20 20:41:00 -0500] fujin: ah cool
[2012-02-20 20:41:00 -0500] jtimberman: since the common intention is to install a gem for chef to use.
[2012-02-20 20:41:00 -0500] fujin: does it do the Gem.clear_paths / require trick ?
[2012-02-20 20:41:00 -0500] jtimberman: i don't recall
[2012-02-20 20:41:00 -0500] fujin: [it should]
[2012-02-20 20:41:00 -0500] jtimberman: you can peek at the provider though :)
[2012-02-20 20:41:00 -0500] fujin: hai, will review
[2012-02-20 20:43:00 -0500] hoover_damm: you just have to install the gem in omnibus not in your ruby
[2012-02-20 20:43:00 -0500] hoover_damm: that's the only trick, like EY was... install the gem in resin in order to use it
[2012-02-20 20:43:00 -0500] jtimberman: does not appear to
[2012-02-20 20:44:00 -0500] hoover_damm: if omnibus chef operates like our resin did
[2012-02-20 20:44:00 -0500] jtimberman: okay, gotta run, plane boarding soon
[2012-02-20 20:44:00 -0500] hoover_damm: our gem provider hit the system gem command, not the resin one
[2012-02-20 20:44:00 -0500] hoover_damm: so installing gems using the resource (without modifying it) would fail
[2012-02-20 20:44:00 -0500] hoover_damm: because it'd toss them in the wrong rubygem installation path (basically)
[2012-02-20 20:44:00 -0500] fujin: you can specify gem_binary in the gem_package provider (since like, 0.8) to hint the provider to which gem binary to use
[2012-02-20 20:45:00 -0500] hoover_damm: ahh, it's a hint now? cool :) honestly I hadn't even cared
[2012-02-20 20:45:00 -0500] fujin: as i said since 0.8
[2012-02-20 20:45:00 -0500] hoover_damm: it's  aweird pattern
[2012-02-20 20:45:00 -0500] fujin: gem_package("foo") { gem_binary "/opt/banana/bonkeres/fooo/gem" }
[2012-02-20 20:45:00 -0500] hoover_damm: so you can cut your old oldchef games now
[2012-02-20 20:45:00 -0500] hoover_damm: thanks
[2012-02-20 21:39:00 -0500] densone: Hey Chef dudes. We might be interested in Sponsoring ChefConf. Can I get a price list for Silver and Gold?
[2012-02-20 21:44:00 -0500] atomic-penguin: chefconf?
[2012-02-20 21:44:00 -0500] bawt: chefconf is http://chefconf.opscode.com/
[2012-02-20 21:46:00 -0500] densone: I emailed marketing@opscode yesterday.
[2012-02-20 21:46:00 -0500] densone: Maybe I'm just impatient haha.
[2012-02-20 21:46:00 -0500] atomic-penguin: densone, there are no prices listed on the chefconf site.  Should probably contact jesse@opscode.com
[2012-02-20 21:51:00 -0500] densone: Thanks atomic
[2012-02-20 22:11:00 -0500] sivy: hey folks
[2012-02-20 22:11:00 -0500] sivy: there seems to be an issue around default_attributes and set_unless, any ideas on what I can use in a workaround to get the mysql server recipe working?
[2012-02-20 22:12:00 -0500] flaccid__: sivy: whats the issue
[2012-02-20 22:15:00 -0500] sivy: flaccid__: basically, put a value in role[:default_attributes][mysql][server_root_password] (for example), call node.set_unless[mysql][server_root_password]
[2012-02-20 22:15:00 -0500] sivy: set_unless always sets a new value
[2012-02-20 22:17:00 -0500] flaccid__: hmm i'm not sure
[2012-02-20 22:18:00 -0500] flaccid__: which file are you doing this in? not the cookbook itself?
[2012-02-20 22:22:00 -0500] sivy: in a role
[2012-02-20 22:22:00 -0500] flaccid__: i havnt used those yet sorry. hopefully someone here will help
[2012-02-20 22:23:00 -0500] jbz: sivy:  Wait, the node.set is in a recipe, correct?
[2012-02-20 22:23:00 -0500] jbz: Or is that in an attribs file as well?
[2012-02-20 22:23:00 -0500] sivy: jbz: the node.set_unless is in the mysql server recipe
[2012-02-20 22:24:00 -0500] sivy: https://github.com/opscode/cookbooks/blob/master/mysql/recipes/server.rb#L25
[2012-02-20 22:24:00 -0500] jbz: hm
[2012-02-20 22:26:00 -0500] sivy: jbz: the value is in a role[default_attributes][mysql[etc]
[2012-02-20 22:26:00 -0500] jbz: got it
[2012-02-20 22:26:00 -0500] jbz: looking, but yeah, it seems like it should do what you want
[2012-02-20 22:26:00 -0500] sivy: I've tried it in override_attributes as well
[2012-02-20 22:27:00 -0500] jbz: Are you setting the role attribs in a role.rb file?
[2012-02-20 22:27:00 -0500] sivy: i've seen a few filed bugs around this af various ages
[2012-02-20 22:27:00 -0500] jbz: or JSON?
[2012-02-20 22:27:00 -0500] sivy: role.json
[2012-02-20 22:27:00 -0500] jbz: ah
[2012-02-20 22:29:00 -0500] jdeamattson: What have folks found to be the best way to get a remote file from a secure S3 bucket for use in a Chef Recipe?
[2012-02-20 22:30:00 -0500] flaccid__: remote_file
[2012-02-20 22:31:00 -0500] flaccid__: i also quickly made this for auth needed https://github.com/flaccid/cookbooks/blob/master/cookbooks/boto/recipes/s3_fetch_file.rb
[2012-02-20 22:31:00 -0500] sivy: jbz: but i've not found any comment of a solution
[2012-02-20 22:31:00 -0500] jbz: sivy:  If you apply that role to a node which doesn't have the mysql cookbook in its runlist, does it properly set the default attribute?
[2012-02-20 22:31:00 -0500] sivy: hm. haven't tried it.
[2012-02-20 22:31:00 -0500] sivy: lemme try with a test role
[2012-02-20 22:32:00 -0500] jbz: Trying to see where the error is, whether set_unless is glitching, or if somehow it's acting properly b/c node doesn't get default attr set correctly.
[2012-02-20 22:35:00 -0500] sivy: yeah, waiting on vagrant
[2012-02-20 22:37:00 -0500] sivy: jbz: yes, without the mysql recipe, the default_value is there
[2012-02-20 22:37:00 -0500] sivy: i mena, the mysql value is set
[2012-02-20 22:37:00 -0500] jbz: the server_password is set?
[2012-02-20 22:37:00 -0500] sivy: http://static.monkinetic.com/images/Opscode_Management-20120220-153719.png
[2012-02-20 22:37:00 -0500] jbz: I mean, server_root_password
[2012-02-20 22:37:00 -0500] jbz: ah ok
[2012-02-20 22:37:00 -0500] jbz: so the problem is with set_unless then
[2012-02-20 22:40:00 -0500] jdeamattson: Who has experience with the awsclient cookbook? Have they found it useful nd usable?
[2012-02-20 22:41:00 -0500] jbz: sivy: Sorry, I think I'm at a wall - I'm not sure what it's doing wrong, there.
[2012-02-20 22:43:00 -0500] sivy: jbz: yeah, i do think it's a set_unless issue
[2012-02-20 22:43:00 -0500] sivy: but nt sure how to work around it
[2012-02-20 22:43:00 -0500] sivy: surely people are successfully using the mysql recipe
[2012-02-20 22:43:00 -0500] jbz: sivy:  you could use arbitrary ruby conditionals, right?
[2012-02-20 22:44:00 -0500] sivy: um, in what way
[2012-02-20 22:44:00 -0500] sivy: i can do pretty much whatever
[2012-02-20 22:44:00 -0500] jbz: node.set[:mysql][server_root_password] = "foo" if node[:mysql][:server_root_password] == nil
[2012-02-20 22:45:00 -0500] jbz: (I think that'd work?  But I'm not positive.)
[2012-02-20 22:45:00 -0500] sivy: yeah, though i'f i;m going to hack up the mysql recipe i'll prolly just remove the set_unless
[2012-02-20 22:45:00 -0500] atomic-penguin: Missing a : in your attribute
[2012-02-20 22:45:00 -0500] jbz: (indeed, thanks a-p)
[2012-02-20 22:46:00 -0500] cgibbons: okay peeps, newbish question... say i'm creating an environment that has its own private certificate authority, and I can make a recipe for that. would it be normal to then have additional nodes that come online ask the CA to create a new cert for them (consider new web/API servers)?
[2012-02-20 22:48:00 -0500] RoboTeddy: is it possible to make a LWRP that extends the service provider?
[2012-02-20 22:50:00 -0500] chrisa2: cgibbons: we're doing just that - recipes declare "i need a cert for this thing i'm doing" which generates a key+csr on the node, a human signs that and the cert gets deployed shortly after
[2012-02-20 22:51:00 -0500] chrisa2: we've got a tool that does a search for CSRs waiting to be signed and lets the human say yes or no to each
[2012-02-20 22:52:00 -0500] cgibbons: sweet
[2012-02-20 22:58:00 -0500] cgibbons: chrisa2: do you have any examples of that open source is that private?
[2012-02-20 23:16:00 -0500] zuhaib: quick question, if i remove client.pem from /etc/chef before the chef run is done would it just puke out or finish the run
[2012-02-20 23:24:00 -0500] Axsuul: What do you guys recommend a way to accept identities and add them to known_hosts?
[2012-02-20 23:24:00 -0500] Axsuul: instead of using a template, or is template the best way?
[2012-02-20 23:26:00 -0500] cwj: template populated by data bag items would probably be the best way
[2012-02-20 23:27:00 -0500] cwj: assuming you are not comfortable with configuring ssh not to validate keys
[2012-02-20 23:28:00 -0500] cwj: like in ssh wrapper scripts for deploying from git i do "-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no" as options for ssh
[2012-02-20 23:28:00 -0500] Axsuul: hmm I see, so I don't even have to have a known_hosts
[2012-02-20 23:29:00 -0500] cwj: yeah
[2012-02-20 23:29:00 -0500] cwj: really depends on your level of comfort with that idea
[2012-02-20 23:29:00 -0500] spicyWith: how would I change the <listen> parameter in the gunicorn recipe? https://github.com/opscode/cookbooks/blob/master/gunicorn/templates/default/gunicorn.py.erb#L7
[2012-02-20 23:30:00 -0500] Axsuul: cwj: thanks
[2012-02-20 23:30:00 -0500] cwj: Axsuul: np
[2012-02-20 23:30:00 -0500] cwj: spicyWith: looks like it gets controlled by a 'listen' parameter in the gunicorn_config provider
[2012-02-20 23:30:00 -0500] spicyWith: https://github.com/opscode/cookbooks/blob/master/gunicorn/providers/config.rb#L26
[2012-02-20 23:31:00 -0500] spicyWith: cwj: yeah, I have no idea where that is being set though
[2012-02-20 23:32:00 -0500] spicyWith: cwj: can I use default_attributes to modify it?
[2012-02-20 23:32:00 -0500] cwj: no, i dont think so
[2012-02-20 23:33:00 -0500] cwj: can you gist an example of how you are using the provider currently?
[2012-02-20 23:33:00 -0500] spicyWith: sure
[2012-02-20 23:33:00 -0500] fujin: spicyWith: https://github.com/opscode/cookbooks/blob/master/gunicorn/resources/config.rb#L27
[2012-02-20 23:33:00 -0500] fujin: whatever resource you have gunicorn_config "banana" in, that is where you set the listen param
[2012-02-20 23:33:00 -0500] fujin: resource = recipe rather
[2012-02-20 23:33:00 -0500] cwj: right
[2012-02-20 23:34:00 -0500] spicyWith: fujin cwj interesting. For some reason in vagrant it's being set to the VM's vagrant IP
[2012-02-20 23:34:00 -0500] fujin: not for some reason. for one reason
[2012-02-20 23:34:00 -0500] fujin: for one reason in one cookbook
[2012-02-20 23:34:00 -0500] JasonBox: hrm, the -N argument to chef-client is a fully qualified name, yes?
[2012-02-20 23:34:00 -0500] fujin: clearly defined with gunicorn_config :)
[2012-02-20 23:34:00 -0500] fujin: JasonBox: it is imaginary
[2012-02-20 23:35:00 -0500] fujin: does not have to be a fqdn
[2012-02-20 23:35:00 -0500] JasonBox: Been messing with /etc/hosts to ensure my hostname resolves and perhaps that's a waste of time
[2012-02-20 23:35:00 -0500] JasonBox: Oh
[2012-02-20 23:35:00 -0500] fujin: you could use the node.name to setup /etc/hosts, etc.
[2012-02-20 23:35:00 -0500] JasonBox: Doing it in kickstart right now
[2012-02-20 23:35:00 -0500] JasonBox: But if I don't need to mess with hosts I'd just remove that code entirely
[2012-02-20 23:36:00 -0500] JasonBox: I use it in kickstart so it knows itself for its first run
[2012-02-20 23:36:00 -0500] JasonBox: But if -N provided node[:hostname] & node[:domain] I'd just use that
[2012-02-20 23:36:00 -0500] spicyWith: fujin: you're crushing it today
[2012-02-20 23:36:00 -0500] spicyWith: cwj: thanks for the help
[2012-02-20 23:37:00 -0500] cwj: sure
[2012-02-20 23:38:00 -0500] cwj: i have just started using spheromak's lwrp for managing /etc/hosts
[2012-02-20 23:38:00 -0500] cwj: https://github.com/spheromak/cookbooks/tree/master/hosts
[2012-02-20 23:38:00 -0500] cwj: works a lot better than my previous sed abomination
[2012-02-20 23:39:00 -0500] JasonBox: hrm
[2012-02-20 23:39:00 -0500] JasonBox: very sweet
[2012-02-20 23:40:00 -0500] JasonBox: In my case I am setting it before my first chef run, though ;)
[2012-02-20 23:40:00 -0500] cwj: ah
[2012-02-20 23:40:00 -0500] JasonBox: Fortunately it's a virtually blank hosts file, so I just cat myip fqdn host into it
[2012-02-20 23:40:00 -0500] fujin: "there shalt only be one source of data for thine infrastructure"
[2012-02-20 23:40:00 -0500] fujin: "take care not to cross the streams"
[2012-02-20 23:40:00 -0500] fujin: whatever. dragons
[2012-02-20 23:41:00 -0500] spicyWith: cwj: when do you modify /etc/hosts?
[2012-02-20 23:41:00 -0500] cwj: spicyWith: when i bootstrap aws instances
[2012-02-20 23:42:00 -0500] cwj: i tell them they are now <instance_id>.somesubdomain.example.com
[2012-02-20 23:42:00 -0500] JasonBox: And they better like it, too
[2012-02-20 23:42:00 -0500] cwj: they usually do
[2012-02-20 23:42:00 -0500] cwj: :)
[2012-02-20 23:43:00 -0500] spicyWith: cwj: when is that useful? when interacting with other nodes?
[2012-02-20 23:43:00 -0500] fujin: hostnames are for humans
[2012-02-20 23:44:00 -0500] cwj: what fujin said
[2012-02-20 23:44:00 -0500] cwj: logical consistency for meatbags
[2012-02-20 23:44:00 -0500] cwj: and some handful of apps care
[2012-02-20 23:44:00 -0500] JasonBox: Is there a chef meat_bags?
[2012-02-20 23:45:00 -0500] cwj: yes, and you're in it
[2012-02-20 23:45:00 -0500] cwj: :D
[2012-02-20 23:52:00 -0500] spicyWith: jtimberman: you around? Is there any reason the application cookbook sets gunicorn to listen on the node's ip instead of on localhost? https://github.com/opscode/cookbooks/blob/master/application/recipes/gunicorn.rb#L34 ?
[2012-02-20 23:52:00 -0500] fujin: spicyWith: i would expect so that the loadbalancer tier might be able to connect to it.
[2012-02-20 23:53:00 -0500] fujin: e.g. haproxy cookbook.
[2012-02-20 23:54:00 -0500] miah: not everybody runs unicorn on localhost
[2012-02-20 23:55:00 -0500] spicyWith: fujin: fair enough. Trying to layer haproxy + nginx + gunicorn. Anyone think it's a bad idea?
[2012-02-20 23:55:00 -0500] spicyWith: nginx running on same node as gunicorn, serving static files
[2012-02-20 23:55:00 -0500] fujin: can gunicorn bind a unix socket?
[2012-02-20 23:55:00 -0500] fujin: if it can, use that
[2012-02-20 23:55:00 -0500] spicyWith: fujin: is that faster?
[2012-02-20 23:56:00 -0500] fujin: nginx can epoll/kqueue select() around the unix socket
[2012-02-20 23:56:00 -0500] fujin: so.. it depends?
[2012-02-20 23:56:00 -0500] fujin: if your worker blocks the damn socket then no, it is not faster
[2012-02-20 23:56:00 -0500] fujin: it will be the same (lol)
[2012-02-20 23:56:00 -0500] spicyWith: haha, so maybe stick with http for now?
[2012-02-20 23:57:00 -0500] fujin: i can't think of a case where talking to the unix socket would be slower than a http tcp socket
[2012-02-20 23:57:00 -0500] fujin: especially considering tcp overhead vs. unix socket protocol overhead
[2012-02-20 23:57:00 -0500] JasonBox: Indeed
[2012-02-20 23:57:00 -0500] fujin: not to mention tcp socket buffers
[2012-02-20 23:57:00 -0500] fujin: #files
[2012-02-20 23:58:00 -0500] fujin: that being said, I dont' deploy gunicorn or have any clients who do, does anyone here use it?
[2012-02-20 23:58:00 -0500] fujin: spicyWith: just modify that gunicorn recipe to bind to localhost, doneburger :)

[2012-02-13 08:25:00 -0500] c64: Hi guys -
[2012-02-13 08:26:00 -0500] c64: I'm trying to run a "script" resource only if 2 attributes differ
[2012-02-13 08:27:00 -0500] c64: script "install_angw_wrapper" do   interpreter "bash"   code <<-EOH   tar -zxf /tmp/wrapper-#{node['angw']['to_install']}.tar.gz   EOH   only_if { ( node['angw']['to_install'] != node['angw']['installed'] ) }   node.set['angw']['installed'] = node['angw']['to_install'] end
[2012-02-13 08:27:00 -0500] c64: Is it possible that the node.set is being run BEFORE teh only_if ?
[2012-02-13 08:31:00 -0500] c64: ...or, probably more likely that my only_if syntax is incorrect...
[2012-02-13 08:31:00 -0500] erikh: node.set happens during compile phase
[2012-02-13 08:31:00 -0500] erikh: because it's being evaulated before the converge run
[2012-02-13 08:32:00 -0500] erikh: you probably want to notify a ruby_block
[2012-02-13 08:32:00 -0500] erikh: c64: ^
[2012-02-13 08:32:00 -0500] c64: I tried that -
[2012-02-13 08:32:00 -0500] c64: I ran into probably a simple issue
[2012-02-13 08:32:00 -0500] erikh: can you show the code you used where you tried that?
[2012-02-13 08:33:00 -0500] c64:   notifies :nothing, "ruby_block[Mark_as_Upgraded]", :delayed
[2012-02-13 08:33:00 -0500] c64: (the :nothing isn't what I had originally, not sure what it should be"
[2012-02-13 08:33:00 -0500] c64: and:
[2012-02-13 08:33:00 -0500] c64: ruby_block "Mark_as_Upgraded" do   block do     node.set['angw']['installed'] = node['angw']['to_install']     node.save   end   action :nothing end
[2012-02-13 08:34:00 -0500] erikh: it should be :create
[2012-02-13 08:34:00 -0500] erikh: and you probably want :immediately instead of :delayed
[2012-02-13 08:34:00 -0500] erikh: :delayed notifications will run at the end of the run
[2012-02-13 08:35:00 -0500] erikh: I don't think you need node.save either
[2012-02-13 08:35:00 -0500] c64: hmmm - looks better
[2012-02-13 08:36:00 -0500] c64: now running again to see that it's skipped...
[2012-02-13 08:36:00 -0500] c64: ErikH - you rock!
[2012-02-13 08:37:00 -0500] c64: Thank you!
[2012-02-13 08:37:00 -0500] erikh: enjoy!
[2012-02-13 10:57:00 -0500] lflux: any ideas why I'm getting 'Cannot find recipe matching xxx in cookbook yyy', when there's a matching .rb file in cookbooks/xxx/recipes ?
[2012-02-13 10:58:00 -0500] lflux: I've uploaded the cookbook with the file, rake goes through without any syntax errors
[2012-02-13 11:06:00 -0500] ssushi: Its not possible to merge a regular and an encrypted databag is it? What I want to do is put the passwords from the databag for an application cookbook into an encrypted databag.
[2012-02-13 11:07:00 -0500] ssushi: (without having to edit the recipes!)
[2012-02-13 11:13:00 -0500] ssushi: Or to broaden the question, how can I use an encrypted databag to store passwords required by the application/database cookbooks? This must be a common use case but cant find any search hits.
[2012-02-13 11:23:00 -0500] ssushi: Everyone stores their passwords in plaintext in version control, eh?
[2012-02-13 11:23:00 -0500] MattMaker: ssushi: that's actually the point where I got kind of stuck
[2012-02-13 11:24:00 -0500] ssushi: drumroll ....
[2012-02-13 11:24:00 -0500] MattMaker: it sounds easy enough, but it's kind of a step up in complexity from all that I learned up to that point
[2012-02-13 11:24:00 -0500] ssushi: (whats the proper solution?)
[2012-02-13 11:24:00 -0500] MattMaker: sorry, I am actually still stuck, I didn't learn it yet
[2012-02-13 11:25:00 -0500] MattMaker: although there are some hits when searching github for people's custom ssh- and user-related recipes
[2012-02-13 11:26:00 -0500] ssushi: ugh
[2012-02-13 11:26:00 -0500] MattMaker: and the official wiki *seems* to discuss a solution
[2012-02-13 11:26:00 -0500] ssushi: MattMaker: I see how encrypted databags can be used, but specifically w.r.t the application and database cookbooks (which ppl seem to use) I see no solution.
[2012-02-13 11:27:00 -0500] ssushi: about to lose the rag with this stuff :(
[2012-02-13 11:27:00 -0500] MattMaker: ssushi: via conveying private ssh key
[2012-02-13 11:29:00 -0500] MattMaker: ssushi: if the database cookbooks use unencrypted passwords, I suppose you should fork them and change them to not do that
[2012-02-13 11:30:00 -0500] MattMaker: there's some chef plugin(?) out there that lets you do that seamlessly, if I recall correctly
[2012-02-13 11:50:00 -0500] BryanWB: is there an easy way w/ ruby to check if a user exists on the system?
[2012-02-13 11:54:00 -0500] BryanWB: ah, Etc.getpwnam
[2012-02-13 11:56:00 -0500] drrk: BryanWB: if you are interested I haev a cookbook to ensure only the users you specify (above a configured uid) exist on the system
[2012-02-13 11:56:00 -0500] BryanWB: drrk: tks, but this low-level call for my cookbook
[2012-02-13 11:56:00 -0500] drrk: okay :)
[2012-02-13 11:56:00 -0500] BryanWB: drrk: but ur cookbook may be very useful to me in a different context ;)
[2012-02-13 11:57:00 -0500] drrk: i'll dump it somewhere
[2012-02-13 11:57:00 -0500] BryanWB: let me suggest community.opscode.com
[2012-02-13 11:57:00 -0500] ssushi: MattMaker, what did you mean by "do that seamlessly"?
[2012-02-13 11:58:00 -0500] drrk: BryanWB: too much effort doing all the opscode paperwork
[2012-02-13 11:59:00 -0500] MattMaker: ssushi: I mean in a way that lets you (easily or automatically?) use any changes that are made to the original recipie(s). I am being vague because that's all I remember about it...
[2012-02-13 12:00:00 -0500] BryanWB: drrk: very easy w/ knife cookbook site upload
[2012-02-13 12:00:00 -0500] drrk: yeah, my weird setup fails there - I don't use knife
[2012-02-13 12:01:00 -0500] drrk: no chef server in the current infrastructure
[2012-02-13 12:03:00 -0500] BryanWB: drrk:  that is quite unique
[2012-02-13 12:03:00 -0500] drrk: yeah, I know, it's not idea but it works
[2012-02-13 12:04:00 -0500] drrk: new systems are going to be more sane
[2012-02-13 12:04:00 -0500] zts: drrk: I'd point out that you can share new cookbooks without signing a CLA or using Jira, that's just if you want to contribute changes to one of the cookbooks Opscode owns.  I agre there's a lot more friction if you're not using Knife.
[2012-02-13 12:05:00 -0500] drrk: ah right, well i'll investigate
[2012-02-13 12:06:00 -0500] drrk: i'll be using the same cookbook in the properstuff I use, so I shoudl be able to put it up then anyway
[2012-02-13 12:06:00 -0500] zts: cool :)
[2012-02-13 12:16:00 -0500] ssushi: Is there a method for checking whether or not an arbitrary databag is encrpted?
[2012-02-13 12:18:00 -0500] ssushi: Or can someone point me to the rdocs for chef?
[2012-02-13 12:21:00 -0500] ssushi: found them
[2012-02-13 12:29:00 -0500] ssushi: Looking at the Chef code, nothing strikes me as prohibiting a databag from containing both encrypted and unencrypted databag items. Am I correct? The limitation is just that there doesnt seem to be a way to create a databag containing both types?
[2012-02-13 12:31:00 -0500] lflux: to answer my own question, I had a lower version cookbook in my checked out tree than on the server
[2012-02-13 12:36:00 -0500] ssushi: Are variables defined in .chef/knife.rb available to recipes?
[2012-02-13 13:13:00 -0500] `brendan: morning
[2012-02-13 13:53:00 -0500] nacer: ohai
[2012-02-13 14:02:00 -0500] leifmadsen: morning all!
[2012-02-13 14:05:00 -0500] leifmadsen: I have a problem I'm trying to solve, and that is, I have a chef server deployment I'm working on, and the git checkout I'm installing from needs to reference another git repo during the installation process to checkout the configuration files for particular types of servers. I have the git resources working, and the files are checked out onto the node. My problem, is that the git checkout contains multiple directories, and I
[2012-02-13 14:05:00 -0500] leifmadsen:  want to copy files from the checkout into other locations. How might I approach that?
[2012-02-13 14:05:00 -0500] leifmadsen: The alternative being I guess, figuring out how to checkout a subdir from the repo?
[2012-02-13 14:24:00 -0500] leifmadsen: from what I'm reading, perhaps what I'm looking for is the callbacks stuff in the deploy resource?
[2012-02-13 14:25:00 -0500] yfeldblum: leifmadsen, why are you trying to do all that in chef?
[2012-02-13 14:25:00 -0500] leifmadsen: because the configurations for the software are managed in git and chef is the deployment mechanism?
[2012-02-13 14:25:00 -0500] leifmadsen: maybe you can tell me what I shouldn't instead of asking me why I'm doing it
[2012-02-13 14:26:00 -0500] leifmadsen: s/what I/why I/
[2012-02-13 14:27:00 -0500] yfeldblum: leifmadsen, sorry, i don't mean to come off as being on the offensive
[2012-02-13 14:27:00 -0500] leifmadsen: yfeldblum: sorry, I'm too used to being in #asterisk and assume everyone is an asshole :)
[2012-02-13 14:28:00 -0500] leifmadsen: maybe I can explain what my setup is, and maybe that'll help a bit
[2012-02-13 14:28:00 -0500] yfeldblum: leifmadsen, sure
[2012-02-13 14:30:00 -0500] leifmadsen: basically we have chef doing the deployment with RPM packages from our repository, and those packages are installed via chef. The RPMs do not install the configuration files as each server in the cluster may have (and likely has) some different set of configurations. So what we wanted to do was keep our configurations for the software in git as well, a separate repo, then deploy the latest version of those configurations to t
[2012-02-13 14:30:00 -0500] leifmadsen: he servers. Configuration files may have a separate tag/deployment version than the version of the package being deployed on the server.
[2012-02-13 14:32:00 -0500] yfeldblum: leifmadsen, the `deploy` resource is for use to deploy an application, capistrano-style but using chef, from a git or svn repository (those are the vcs adapters that are currently implemented) ... i don't see how you could use the `deploy` resource in this case
[2012-02-13 14:32:00 -0500] yfeldblum: leifmadsen, why are the configuration files in a separate repo, as opposed to being in chef?
[2012-02-13 14:33:00 -0500] leifmadsen: yfeldblum: because we have several different applications/packages that use common and version specific configuration files, so if we put them into the files/default/ directory in the recipe, then we'd have multiple configuration files throughout our git structure
[2012-02-13 14:33:00 -0500] leifmadsen: although you saying that makes me think that just means I need more recipes
[2012-02-13 14:34:00 -0500] yfeldblum: leifmadsen, what about using templates?
[2012-02-13 14:34:00 -0500] |shad0w|: templates are good too
[2012-02-13 14:34:00 -0500] leifmadsen: although we've really wanted to try and keep our configuration for the applications separate of the chef recipe itself
[2012-02-13 14:34:00 -0500] leifmadsen: ya we're using templates as well, but the abstraction of the configurations from the same repo as chef is what we've wanted to try and do
[2012-02-13 14:35:00 -0500] yfeldblum: leifmadsen, why? i.e., what are the pain points or the problems you've run into when the configurations were in chef?
[2012-02-13 14:35:00 -0500] leifmadsen: yfeldblum: the configurations may not necessary be deployed by chef in all cases
[2012-02-13 14:35:00 -0500] leifmadsen: and having separate development between chef and the configurations/code for the software
[2012-02-13 14:38:00 -0500] yfeldblum: leifmadsen, the configuration files in the external repo - are they complete configuration files, ready to be copied directly into place?
[2012-02-13 14:39:00 -0500] leifmadsen: in most cases yes
[2012-02-13 14:40:00 -0500] yfeldblum: what about the not-most cases?
[2012-02-13 14:40:00 -0500] leifmadsen: then I imagine it would be done via a template or some other mechanism to modify the files, or would be generated outside of chef via web interface, etc
[2012-02-13 14:41:00 -0500] yfeldblum: leifmadsen, are these not-most cases actual cases, or hypothetical?
[2012-02-13 14:42:00 -0500] jtimberman: Chef is a configuration management system.. why wouldn't you have it manage the configuration?
[2012-02-13 14:42:00 -0500] leifmadsen: probably most cases ot be honest. For the purposes of chef deployment, a standard set of configuraiton files would be deployed, then a web application adds custom configurations for that server and the customers it is servicing
[2012-02-13 14:43:00 -0500] yfeldblum: jtimberman, it seems like it's different workflows and release schedules for the overall configuration vs specific per-app configurations - i guess ops does chef, apps manages these app configs
[2012-02-13 14:43:00 -0500] leifmadsen: jtimberman: there are portions of the configuration that are managed by a web console and are very dynamic -- that data is stored separately in a database and other solutions allows those files to be easily recreated, so they don't need to be managed by chef (and would not be practical)
[2012-02-13 14:44:00 -0500] leifmadsen: yfeldblum: yes that sounds correct -- chef does the deployment and base configuration, then other resources manage files that are not cared about by chef
[2012-02-13 14:45:00 -0500] yfeldblum: leifmadsen, you can use the `git` resource to sync the local copy of the configs repo to the remote copy, making sure the local heads are up-to-date with the remote heads
[2012-02-13 14:45:00 -0500] yfeldblum: leifmadsen, then you can use the `execute` resource to copy files from the local copy of the configs repo into place
[2012-02-13 14:46:00 -0500] leifmadsen: yfeldblum: thank you, that appears to be what I was looking for, and seems so simple now... execute resource... of course.
[2012-02-13 14:46:00 -0500] jtimberman: why not use a chef cookbook library to read the system-specific configuration bits out of the database and render a template?
[2012-02-13 14:47:00 -0500] yfeldblum: leifmadsen, the `git` resource already knows how to check if it needs to take any actions; however, in your `execute` resources, be sure to add a `not_if` which first checks whether the existing file is or is not identical to the file to be copied into place
[2012-02-13 14:48:00 -0500] leifmadsen: jtimberman: I might actually consider that as phase 2 instead of using our own scripts to manage the creation/modification of "the other files" and reload the resources when those files change/update
[2012-02-13 14:48:00 -0500] leifmadsen: jtimberman: thanks for the idea
[2012-02-13 14:48:00 -0500] leifmadsen: yfeldblum: thank you much, yes I've got the git resource already checking things out onto the node; for some reason 'execute' didn't trigger into my brain and I was making it more complicated than necessary
[2012-02-13 14:49:00 -0500] leifmadsen: thanks for the ideas and suggestions; I'm going to attempt to implement those now
[2012-02-13 14:49:00 -0500] yfeldblum: leifmadsen, cheers
[2012-02-13 14:49:00 -0500] yfeldblum: jtimberman, i suspect because it's too much friction
[2012-02-13 14:49:00 -0500] BryanWB: i want to pass  node['tomcat']  as a variable to a template  so  i can access node['tomcat']['home'] as  @home  . How can I do this?
[2012-02-13 14:50:00 -0500] yfeldblum: variables :home => node['tomcat']['home']
[2012-02-13 14:50:00 -0500] leifmadsen: yfeldblum: jtimberman: we do have files that get updated by the web app which then cause an application reload, so I may be able to work something that allow that to be done via chef and not in the web app itself
[2012-02-13 14:51:00 -0500] leifmadsen: that will require some thought and testing to see if it makes sense
[2012-02-13 14:51:00 -0500] BryanWB: yfeldblum: but there are many vars under node['tomcat'] , doing that for each one would be very painful
[2012-02-13 14:53:00 -0500] edmellum: Hey guys, I've been looking at using the application and database cookbooks to deploy some apps. However I'm not understanding why I need to enter the root MySQL password in the application data bag. Shouldn't the database cookbook just use node[mysql][mysql_root_password] which is set in the database master role?
[2012-02-13 14:53:00 -0500] yfeldblum: variables node['tomcat'].to_hash
[2012-02-13 15:00:00 -0500] BryanWB: yfeldblum: no joy :(
[2012-02-13 15:00:00 -0500] BryanWB: trying to reference the keys  by @home   returns nil
[2012-02-13 15:03:00 -0500] yfeldblum: likely needs symbols for keys
[2012-02-13 15:03:00 -0500] |shad0w|: BryanWB, why even pass the vars. @node['tomcat']['home'] in your template
[2012-02-13 15:04:00 -0500] yfeldblum: variables Hash[node['tomcat'].to_hash.map{|k, v| [k.to_sym, v]}]
[2012-02-13 15:04:00 -0500] BryanWB: |shad0w|: because in another recipe i build the Hash instead of using node. I want to use the same template for both
[2012-02-13 15:05:00 -0500] |shad0w|: then just pass the node as a var
[2012-02-13 15:06:00 -0500] |shad0w|: and name it the same as you would in your other recipe
[2012-02-13 15:06:00 -0500] BryanWB: |shad0w|: have been trying that w/out success
[2012-02-13 15:06:00 -0500] BryanWB: but want to pass node['tomcat'] not just `node`
[2012-02-13 15:06:00 -0500] BryanWB: it is a gigantic variable
[2012-02-13 15:06:00 -0500] j-v-e: Is there any plan to bring detailled permission in the open source version of chef ? Or at least have a licence for a server that can be installed locally ?
[2012-02-13 15:06:00 -0500] |shad0w|: build up your other var to match what node would look like
[2012-02-13 15:08:00 -0500] |shad0w|: or use a ternary operator in your template
[2012-02-13 15:11:00 -0500] BryanWB: yfeldblum: arg, fail, this shoudl work, don't know why
[2012-02-13 15:15:00 -0500] j-v-e: Any permission expert around ?
[2012-02-13 15:15:00 -0500] j-v-e: I trying to have a node create a databag item, but the node is not admin and I'm using the open source version of chef.
[2012-02-13 15:16:00 -0500] j-v-e: zts: can I have a private chef locally ?
[2012-02-13 15:16:00 -0500] |shad0w|: j-v-e, why do you need a node to update a databag? (just thinking search is probably the better way to go)
[2012-02-13 15:16:00 -0500] zts: j-v-e: you probably want to look at http://www.opscode.com/private-chef/
[2012-02-13 15:16:00 -0500] j-v-e: the wiki says I can't have the node write to a databag without giving it admin perm
[2012-02-13 15:16:00 -0500] zts: j-v-e: that is correct (for open-source chef)
[2012-02-13 15:17:00 -0500] j-v-e: |shad0w|: because my node is generating an access key that I need to propagate into another node
[2012-02-13 15:17:00 -0500] zts: j-v-e: yep, that is what Private Chef is (compared to Hosted Chef)
[2012-02-13 15:17:00 -0500] j-v-e: that's the way ossec works
[2012-02-13 15:17:00 -0500] j-v-e: thanks zts :)
[2012-02-13 15:18:00 -0500] |shad0w|: j-v-e, why not set the access key as a node attrib then search for it in the recipe for the other node(s)
[2012-02-13 15:19:00 -0500] j-v-e: so the access key would be an attribute of the ossec-server and the ossec-agent would retrive it ?
[2012-02-13 15:20:00 -0500] |shad0w|: yes
[2012-02-13 15:20:00 -0500] j-v-e: can a node retrieve the attribute of another node ?
[2012-02-13 15:20:00 -0500] |shad0w|: through search
[2012-02-13 15:20:00 -0500] j-v-e: right
[2012-02-13 15:20:00 -0500] yfeldblum: BryanWB, passing node['tomcat'] is unlikely to work due to how Chef::Node::Attribute works
[2012-02-13 15:20:00 -0500] BryanWB: yfeldblum: stupid me, i was editing the wrong recipe
[2012-02-13 15:21:00 -0500] yfeldblum: BryanWB, is it plugged in?
[2012-02-13 15:21:00 -0500] BryanWB: yfeldblum: the light is green!
[2012-02-13 15:21:00 -0500] BryanWB: the cursor is blinking :p
[2012-02-13 15:50:00 -0500] nerens: hi all, I'm moving my chef server to a new box. I've got all the roles, cookbooks, databags restored to the new server using the knife backup/restore command. My question is how do I go about moving existing users and keys to the new server?
[2012-02-13 15:54:00 -0500] ssushi: Would desperately love to pick jtimberman's brain re application/database cookbooks and encrypted passwords if he's free? ... ^^
[2012-02-13 15:59:00 -0500] neurodamage: has anyone ever done a bundle install --deployment, inside of a bash script inside of the *_restart hook to deploy_*
[2012-02-13 15:59:00 -0500] neurodamage: I believe the issue is that I need a proper sourcing of the target location for the ruby/ruby binaries?
[2012-02-13 16:41:00 -0500] j-v-e: if I pull the attribute of another node using search, using agent_keydata = search(:node, "role:ossec-server")
[2012-02-13 16:42:00 -0500] j-v-e: How do I access values in there afterward ?
[2012-02-13 16:42:00 -0500] j-v-e:  agent_keydata.default["ossec"]
[2012-02-13 16:42:00 -0500] j-v-e: ?
[2012-02-13 16:42:00 -0500] j-v-e: my ossec attribute looks like that http://pastebin.com/jVKsPfiJ
[2012-02-13 16:42:00 -0500] flashmanbahadur1: j-v-e: it will return an array of results
[2012-02-13 16:42:00 -0500] flashmanbahadur1: so if you only have one
[2012-02-13 16:43:00 -0500] flashmanbahadur1: agent_keydata[0]["ossec"]
[2012-02-13 16:43:00 -0500] j-v-e: ha, I need the zero ?
[2012-02-13 16:43:00 -0500] flashmanbahadur1: I did
[2012-02-13 16:43:00 -0500] j-v-e: ok
[2012-02-13 16:47:00 -0500] j-v-e: can any node access the attribute of all the other nodes ?
[2012-02-13 16:47:00 -0500] BryanWB: must......finish.....tomcat cookbook RAWR!
[2012-02-13 16:50:00 -0500] flashmanbahadur1: j-v-e: Anything in the same environment I think
[2012-02-13 17:03:00 -0500] gmcinnes: hi chefs.
[2012-02-13 17:12:00 -0500] gmcinnes: hi chefs
[2012-02-13 17:13:00 -0500] gmcinnes: any idea what would cause sudo to be failing on knife bootstrap?
[2012-02-13 17:26:00 -0500] lusis: gmcinnes: heh I was just debugging that
[2012-02-13 17:27:00 -0500] jtimberman: j-v-e: agent_keydata['ossec']
[2012-02-13 17:27:00 -0500] gmcinnes: lusis: so you have it all solved and I can take the afternoon off?
[2012-02-13 17:27:00 -0500] lusis: nyet
[2012-02-13 17:27:00 -0500] lusis: just hit the issue ;)
[2012-02-13 17:28:00 -0500] gmcinnes: oh well :)
[2012-02-13 17:28:00 -0500] gmcinnes: what platform?
[2012-02-13 17:29:00 -0500] lusis: in this case ubuntu 10.04
[2012-02-13 17:29:00 -0500] lusis: I think
[2012-02-13 17:29:00 -0500] lusis: that or 10.10
[2012-02-13 17:29:00 -0500] lusis: but knife bootstrap should be prefacing the commands automatically with sudo
[2012-02-13 17:30:00 -0500] lusis: so it wouldn't be distro dependent
[2012-02-13 17:30:00 -0500] gmcinnes: moi aussi.
[2012-02-13 17:30:00 -0500] lusis: I'm looking now to see if there are any open issues
[2012-02-13 17:30:00 -0500] gmcinnes: oh. in my case it is, but sudo is failing with a syntax error.
[2012-02-13 17:30:00 -0500] gmcinnes: same way this is: http://pastebin.com/k1udKZBC
[2012-02-13 17:31:00 -0500] lusis: yeah I'm not getting that
[2012-02-13 17:31:00 -0500] lusis: It's not even trying to use sudo in my case
[2012-02-13 17:31:00 -0500] gmcinnes: can you pastie your knife bootstrap cmd somewhere?
[2012-02-13 17:31:00 -0500] lusis: do you have sudo command in your bootstrap template
[2012-02-13 17:31:00 -0500] lusis: ?
[2012-02-13 17:31:00 -0500] ssd7: gmcinnes: Is this for a custom bootstrap script?  Might want to check for newlines at the beginning of your script.
[2012-02-13 17:32:00 -0500] gmcinnes: c
[2012-02-13 17:32:00 -0500] gmcinnes: that was exactly it ssd7
[2012-02-13 17:32:00 -0500] jtimberman: the bootstrap subcommand runs the entire contents of a bootstrap template as a command over ssh. if --sudo is used, it will execute the command with sudo
[2012-02-13 17:32:00 -0500] jtimberman: like
[2012-02-13 17:32:00 -0500] jtimberman: ssh ubuntu@yourhost sudo bash -c 'template contents'
[2012-02-13 17:33:00 -0500] ssd7: gmcinnes: :)  Been bit by that before by a bad copy and paste.
[2012-02-13 17:33:00 -0500] lusis: well shit
[2012-02-13 17:33:00 -0500] lusis: I think that might have been my issue as well
[2012-02-13 17:33:00 -0500] gmcinnes: doh.
[2012-02-13 17:33:00 -0500] lusis: I blame jtimberman
[2012-02-13 17:33:00 -0500] ampledata: always
[2012-02-13 17:34:00 -0500] lusis: it's his effing bootstrap template I'm using
[2012-02-13 17:34:00 -0500] lusis: (omnibus)
[2012-02-13 17:36:00 -0500] jonlives: check for the - being wrong too, sometimes when I've pasted from browsers I get a weird fucked up long - which breaks stuff :p
[2012-02-13 17:39:00 -0500] lusis: well this was a gist that I cloned ;)
[2012-02-13 17:39:00 -0500] lusis: but yeah
[2012-02-13 17:46:00 -0500] jtimberman: lusis: HEH!
[2012-02-13 17:47:00 -0500] jtimberman: lusis: https://github.com/opscode/chef/tree/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-02-13 17:47:00 -0500] lusis: hack
[2012-02-13 17:47:00 -0500] jtimberman: use that one. it will be the default in the next release.
[2012-02-13 17:47:00 -0500] lusis: I already started my 'knife in a for loop' session
[2012-02-13 17:47:00 -0500] lusis: bootstrap ALL the servers
[2012-02-13 17:48:00 -0500] jtimberman: yeah its cool man, do what you need ;)
[2012-02-13 17:50:00 -0500] ssushi: jtimberman sorry presume and direct a question straight at you, but you wrote the application/database cookbooks so you seem the best man. What do you suggest I do if I want to use these but put the passwords in an encrypted databag?
[2012-02-13 17:58:00 -0500] David_Miller: How do I apply a role to a bunch of nodes at once, doing it one at a time in the webui is cumbersome
[2012-02-13 17:58:00 -0500] itwasntandy: knife is your friend
[2012-02-13 17:58:00 -0500] itwasntandy: I can count on 1 hand the number of times I've used the webui this year
[2012-02-13 17:58:00 -0500] caaakeeey: can i use purge/overwrite with the standard directory resource?
[2012-02-13 17:58:00 -0500] itwasntandy: actually maybe on 1 finger
[2012-02-13 17:59:00 -0500] itwasntandy: :)
[2012-02-13 17:59:00 -0500] David_Miller: I figured there is a knife command to apply roles to a bunch of nodes, but how?
[2012-02-13 17:59:00 -0500] David_Miller: webui is nice for newbs like me :)
[2012-02-13 18:01:00 -0500] paulyc: I use a command line script to role over a list using foreach and adding them to the role, but there maybe a way to do it that doesn't require an external script.
[2012-02-13 18:01:00 -0500] ssushi: David_Miller: Something like this maybe? http://gregswallow.blogspot.com/2011/09/change-chef-run-lists-on-multiple-nodes.html. Noob too
[2012-02-13 18:02:00 -0500] lusis: you can use shef or knife exec
[2012-02-13 18:04:00 -0500] caaakeeey: anyone?
[2012-02-13 18:05:00 -0500] David_Miller: I will try knife exec but I am tempted just to use a bash for loop :)
[2012-02-13 18:06:00 -0500] paulyc: David_Miller: I fall back on that from time to time. But the nice thing is that once you have the nodes in the role, you can use the knife node role for just about anything!
[2012-02-13 18:10:00 -0500] ampledata: caaakeeey
[2012-02-13 18:10:00 -0500] ampledata: directory('/dirname'){ action :purge }
[2012-02-13 18:10:00 -0500] ampledata: something like that?
[2012-02-13 18:10:00 -0500] bawt: something like that is what i'll use
[2012-02-13 18:12:00 -0500] lusis: bawt forget something like that
[2012-02-13 18:12:00 -0500] bawt: okay then :)
[2012-02-13 18:19:00 -0500] caaakeeey: so i need to delete it, and then create it for the act of purging?
[2012-02-13 18:33:00 -0500] lusis: crap
[2012-02-13 18:33:00 -0500] lusis: the nrpe init script in the nagios cookbook is all redhat specific
[2012-02-13 18:33:00 -0500] Gearbox: This sounds like a great time to port it.
[2012-02-13 18:33:00 -0500] leifmadsen: :)
[2012-02-13 18:33:00 -0500] leifmadsen: +1
[2012-02-13 18:33:00 -0500] lusis: it's a first imho
[2012-02-13 18:34:00 -0500] lusis: a RHEL-specific official template
[2012-02-13 18:34:00 -0500] lusis: ;)
[2012-02-13 18:34:00 -0500] Gearbox: :D
[2012-02-13 18:34:00 -0500] mlei: heh.
[2012-02-13 18:46:00 -0500] brett_h: does anyone have an example of knife search being used with -a to show a nested attribute? I must not understand the syntax it expects
[2012-02-13 18:46:00 -0500] brett_h: I want to show node[:ec][:instance_id], basically
[2012-02-13 19:20:00 -0500] jtimberman: brett_h: knife search node "query" -a ec2.instance_id
[2012-02-13 19:32:00 -0500] brett_h: jtimberman: thanks
[2012-02-13 19:54:00 -0500] hoover_damm: jtimberman, isn't it cloud now?
[2012-02-13 19:55:00 -0500] geekbri: Anybody here had an issue installing python 2.6.6 from the python cookbook on ubuntu ?
[2012-02-13 19:55:00 -0500] mattray: hoover_damm: cloud works too
[2012-02-13 19:56:00 -0500] jtimberman: hoover_damm: what mattray said, they both work.
[2012-02-13 19:56:00 -0500] hoover_damm: interesting
[2012-02-13 19:57:00 -0500] hoover_damm: did you alias both? or save both?
[2012-02-13 20:16:00 -0500] geekbri: jtimberman: I'm having the python cookbook explode when trying to install python-dev (2.6.6) on ubuntu 10.10.  Have you heard of anybody else having this issue before?
[2012-02-13 20:20:00 -0500] geekbri: jtimberman: https://gist.github.com/1819869 happens to be what its spitting out
[2012-02-13 20:28:00 -0500] geekbri: jtimberman: nm. figured it out.
[2012-02-13 21:00:00 -0500] mlei: yfeldblum: my developer and I figured out what was causing an empty string name databag to be created
[2012-02-13 21:00:00 -0500] mlei: her request had no Content-Type header
[2012-02-13 21:01:00 -0500] mlei: somehow the server still considers it a valid request, but treats the content with a default type of application/octet-stream, which i guess causes it to think there are no valid key/value pairs
[2012-02-13 21:01:00 -0500] mlei: i filed it at: http://tickets.opscode.com/browse/CHEF-2926
[2012-02-13 21:09:00 -0500] yfeldblum: hah!
[2012-02-13 21:10:00 -0500] yfeldblum: i would say that the server should reject any PUT without a `Content-Type: application/json` header
[2012-02-13 21:12:00 -0500] mlei: it does actually also accept things in x-www-form-urlencoded
[2012-02-13 21:13:00 -0500] mlei: if you send it with that Content-Type and with the message "name=mybag" it will create mybag
[2012-02-13 21:13:00 -0500] dpmcnevin: hey, hopefully someone can help me out.. my chef-server installation got all jacked up, i kept getting errors that it couldn't read a checkpoint.. so i moved /var/chef to chef.old and reuploaded all the cookbooks and roles.. but /var/chef/checksums isn't getting repopulated
[2012-02-13 21:13:00 -0500] mlei: handy i suppose if you want to create data bags with an html form
[2012-02-13 21:14:00 -0500] dpmcnevin: i thought it might be a permissions issue, so i just made the dir 777, but that didn't seem to help
[2012-02-13 21:15:00 -0500] mlei: any errors in logs?
[2012-02-13 21:15:00 -0500] dpmcnevin: when i run chef-server from console i see a lot of this:
[2012-02-13 21:15:00 -0500] dpmcnevin: Mon Feb 13 21:06:29 +0000 2012: Read error: #<Errno::ENOENT: No such file or directory - /var/chef/checksums/de/de5eed8d2ed6fdafe2581f75bb53a77f>
[2012-02-13 21:16:00 -0500] dpmcnevin: /var/chef/checksums exists and is 777
[2012-02-13 21:16:00 -0500] mlei: i mean, you moved the database away and it thinks it should still be there
[2012-02-13 21:16:00 -0500] dpmcnevin: knife cookbook upload -a seems to work fine
[2012-02-13 21:16:00 -0500] mlei: you didn't reinstall the server or anything right?
[2012-02-13 21:17:00 -0500] dpmcnevin: i reinstalled chef-server but not couchdb
[2012-02-13 21:17:00 -0500] mlei: huh.
[2012-02-13 21:17:00 -0500] dpmcnevin: i also tried deleting some cookbooks and reuploading them, but that didn't seem to do anything
[2012-02-13 21:19:00 -0500] dpmcnevin: when i run chef-client, it pulls the cookbooks one by one, but the contents are all empty
[2012-02-13 21:24:00 -0500] kfox1111: Question. If your server is offline, will clients continue to fix up the system?
[2012-02-13 21:25:00 -0500] asg: kfox1111: they will use the cached cookbooks iirc
[2012-02-13 21:25:00 -0500] mlei: dpmcnevin: sounds like you got couchdb in a weird state... any chance you could go back to a backup and figure out that checkpoint thing?
[2012-02-13 21:25:00 -0500] kfox1111: ok. thanks.
[2012-02-13 21:28:00 -0500] dpmcnevin: yeah, i could try a backup from a while ago.. it's weird that i hadn't really done anything and all of the sudden things just started freaking out
[2012-02-13 21:29:00 -0500] dpmcnevin: do you think that it might be useful to just blow away the couchdb database and start over? i don't have a lot of nodes that I would need to recreate.. that would probably be easier than restoring from backup anyway
[2012-02-13 21:32:00 -0500] mlei: dpmcnevin: i guess it depends on how badly you want to figure out what happened
[2012-02-13 21:32:00 -0500] mlei: there's always a chance it'll happen again if you don't figure it out
[2012-02-13 21:35:00 -0500] dpmcnevin: hm, yeah, i might just try restoring.. thanks for the help!
[2012-02-13 21:37:00 -0500] mlei: yfeldblum: the bigger question than what should we accept is why are we not validating that the name is valid before we create it
[2012-02-13 21:37:00 -0500] geekbri: can you use ::File.exists? on a directory as well or is there a Directory.exists?
[2012-02-13 21:37:00 -0500] mlei: it seems like it's doing validation after the fact, but not on the request that's being happening
[2012-02-13 21:38:00 -0500] yfeldblum: mlei, true as well
[2012-02-13 21:39:00 -0500] yfeldblum: mlei, ah there i was talking about the whole of the API - the entire API should require the right content-type, with specific exceptions for PUTting cookbooks
[2012-02-13 21:40:00 -0500] mlei: yeah, sure. i agree.
[2012-02-13 21:40:00 -0500] jbz: geekbri: http://ruby-doc.org/core-1.9.3/File.html#method-c-directory-3F
[2012-02-13 21:40:00 -0500] geekbri: jbz: ty
[2012-02-13 21:40:00 -0500] jbz: yw
[2012-02-13 21:41:00 -0500] mlei: i think accepting urlencoded is also okay
[2012-02-13 21:41:00 -0500] mlei: but yeah, it should validate what content type it's receiving, for sure
[2012-02-13 21:42:00 -0500] kfox1111: Does chef support ipv6?
[2012-02-13 21:42:00 -0500] yfeldblum: mlei, not for the API - only for the webui
[2012-02-13 21:42:00 -0500] yfeldblum: mlei, that would keep the API super-simple
[2012-02-13 21:42:00 -0500] yfeldblum: kfox1111, why wouldn't it?
[2012-02-13 21:43:00 -0500] mlei: kfox1111: it depends on if you're talking about chef itself or specific cookbooks. AFAIK chef doesn't do anything itself that specifically would prevent it working on ipv6.
[2012-02-13 21:43:00 -0500] kfox1111: mlei: I mean, the server/client connection.
[2012-02-13 21:44:00 -0500] kfox1111: Ok. So its not storing v4 addresses and things.
[2012-02-13 21:45:00 -0500] mlei: don't know... you could try it. but i doubt it.
[2012-02-13 21:45:00 -0500] kfox1111: k.
[2012-02-13 21:50:00 -0500] kfox1111: can you permission files so that only nodes that have permission to a file can download it?
[2012-02-13 21:53:00 -0500] JasonBox: hrm, can a check for chef-solo running before I cron off a new instance?
[2012-02-13 21:53:00 -0500] JasonBox: Like, besides just grepping `ps`
[2012-02-13 21:54:00 -0500] bdha: cronjob++
[2012-02-13 21:54:00 -0500] bdha: http://search.cpan.org/~rjbs/App-Cronjob-1.102311/bin/cronjob
[2012-02-13 21:54:00 -0500] bdha: JasonBox: pid? run file?
[2012-02-13 21:57:00 -0500] mlei: JasonBox: does the -i option work for chef-solo?
[2012-02-13 21:58:00 -0500] mlei: it doesn't seem so.
[2012-02-13 22:00:00 -0500] yfeldblum: i don
[2012-02-13 22:00:00 -0500] yfeldblum: i don't think chef-solo is a daemon ...
[2012-02-13 22:03:00 -0500] hoover_damm: it can be
[2012-02-13 22:03:00 -0500] hoover_damm: but it's not
[2012-02-13 22:03:00 -0500] hoover_damm: so chef-solo -i 1800 is the same as chef-client -i 1800
[2012-02-13 22:07:00 -0500] cwj: anyone have an idea as to why a node in one environment can retrieve a data bag and a node in a different environment cannot?
[2012-02-13 22:07:00 -0500] cwj: and furthermore, if a data bag exists and i can list the items in it using knife data bag show foo, why would i get something like this in shef?  https://gist.github.com/1820883
[2012-02-13 22:08:00 -0500] cwj: i feel like i am taking crazy pills
[2012-02-13 22:09:00 -0500] mlei: maybe you have a data bag item with a empty name?
[2012-02-13 22:10:00 -0500] mattray: cwj: for sanity checks all the nodes are in the same organization?
[2012-02-13 22:11:00 -0500] mattray: cwj: Hosted Chef? Any RBACs applied?
[2012-02-13 22:15:00 -0500] cwj: mattray: yes hosted chef, yes same org, rbacs have never been touched
[2012-02-13 22:16:00 -0500] mattray: so some nodes work and 1 fails?
[2012-02-13 22:17:00 -0500] mattray: oh, with shef...
[2012-02-13 22:17:00 -0500] cwj: i have chef environments for qa, production and staging
[2012-02-13 22:17:00 -0500] cwj: the recipe works in production and staging, it fails in qa
[2012-02-13 22:17:00 -0500] mattray: odd. Data Bags aren't scoped to environments
[2012-02-13 22:17:00 -0500] cwj: trying to reproduce the problem in shef and it doesn't work in any environment, which baffles me
[2012-02-13 22:18:00 -0500] JasonBox: bdha: neat
[2012-02-13 22:18:00 -0500] mattray: I assume you used your client creds with shef?
[2012-02-13 22:18:00 -0500] mattray: shef -z -c .chef/knife.rb
[2012-02-13 22:18:00 -0500] cwj: oh brother, i forgot -z
[2012-02-13 22:19:00 -0500] cwj: ok, that answers why it wasn't working in shef
[2012-02-13 22:19:00 -0500] hoover_damm: heh
[2012-02-13 22:19:00 -0500] mattray: yay
[2012-02-13 22:19:00 -0500] hoover_damm: yeah I had that fun with shef once upon a time
[2012-02-13 22:19:00 -0500] cwj: lets see if it works in shef in qa
[2012-02-13 22:20:00 -0500] kfox1111: If you commit a badly formatted file, then a chef client runs, you commit a fix, and then the client runs again, will the client run ok?
[2012-02-13 22:21:00 -0500] cwj: kfox1111: it certainly should
[2012-02-13 22:21:00 -0500] cwj: assuming you are talking about the contents of cookbooks
[2012-02-13 22:22:00 -0500] kfox1111: yes. I assume it should too.
[2012-02-13 22:22:00 -0500] kfox1111: just curious if it does.
[2012-02-13 22:33:00 -0500] kfox1111: can you permission files so only certain nodes can download them?
[2012-02-13 22:35:00 -0500] jbz: kfox1111: I think 'cookbook' is as granular as it gets.
[2012-02-13 22:36:00 -0500] kfox1111: ok, so s/file/cookbook/ same question. :)
[2012-02-13 22:36:00 -0500] jbz: kfox1111: Are you asking about the hosted platform or the open source server?
[2012-02-13 22:36:00 -0500] kfox1111: Both I guess.
[2012-02-13 22:37:00 -0500] kfox1111: I'm currently looking at a few configuration management systems and comparing what they can do.
[2012-02-13 22:38:00 -0500] kfox1111: We'd probably end up using the open source server, but if hosted provides enough extra fetures we need, that is still an option.
[2012-02-13 22:38:00 -0500] jbz: hm I'm pretty sure you can't do it on the open source server.  The hosted platform will let you set user/client permissions toread/update/delete/grant perms on a cookbook by cookbook basis.
[2012-02-13 22:38:00 -0500] jbz: The hosted platform has more features.
[2012-02-13 22:38:00 -0500] jbz: Oh, I see, sorry.
[2012-02-13 22:38:00 -0500] kfox1111: Ok. Thanks for the info. :)
[2012-02-13 22:39:00 -0500] jbz: yw.
[2012-02-13 22:43:00 -0500] cientifico: Hi
[2012-02-13 22:43:00 -0500] cientifico: I just installing chef-server through bootstrap with chef-solo
[2012-02-13 22:43:00 -0500] cientifico: But I have problems with chef-solr-installar
[2012-02-13 22:43:00 -0500] cientifico: basically, chef-solr-installer is not found
[2012-02-13 22:44:00 -0500] cientifico: FATAL Errno::ENOENT: execute[chef-solr-installer]  Errno::ENOENT: No such file or directory - chef-solr-installer ..
[2012-02-13 22:44:00 -0500] cientifico: I was looking into google and there is nothing
[2012-02-13 22:44:00 -0500] cientifico: so sorry if I ask something stupid, but i feel that i am missing something obvious
[2012-02-13 22:47:00 -0500] cientifico: ok found!: http://tickets.opscode.com/browse/CHEF-2508
[2012-02-13 22:48:00 -0500] cientifico: :-(
[2012-02-13 22:57:00 -0500] cientifico: curious  chef-solr-installer is part of the chef-solr
[2012-02-13 22:58:00 -0500] silk: so far I havent looked, but is simple auth available with the remote_file resource?
[2012-02-13 22:59:00 -0500] cientifico: seems a path issue
[2012-02-13 22:59:00 -0500] cientifico: root@chef:~# find / -name 'chef-solr-installer'
[2012-02-13 22:59:00 -0500] cientifico: /var/lib/gems/1.8/gems/chef-solr-0.10.8/bin/chef-solr-installer
[2012-02-13 22:59:00 -0500] cientifico: /var/lib/gems/1.8/bin/chef-solr-installer
[2012-02-13 22:59:00 -0500] cientifico: but /var/lib/gems/1.8/bin/ is not in the $PATH
[2012-02-13 22:59:00 -0500] cientifico: why?
[2012-02-13 23:00:00 -0500] cientifico: why ruby/rubygems don't copy that file to the /usr/bin or /usr/loca/bin?
[2012-02-13 23:04:00 -0500] erikh: because ubuntu's rubygems is broken
[2012-02-13 23:05:00 -0500] erikh: they specifically patch it to be that way
[2012-02-13 23:06:00 -0500] cientifico: Just see
[2012-02-13 23:07:00 -0500] cientifico: nice ubuntu, nice...
[2012-02-13 23:07:00 -0500] jtimberman: cientifico: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=448639
[2012-02-13 23:07:00 -0500] jtimberman: Thats the history of the issue.
[2012-02-13 23:08:00 -0500] cientifico: No, the bad thing is that i am used to that bug
[2012-02-13 23:09:00 -0500] cientifico: i was develop rails for the last 4 years
[2012-02-13 23:09:00 -0500] jtimberman: :)
[2012-02-13 23:09:00 -0500] cientifico: who is the policy to accept patch for chef
[2012-02-13 23:10:00 -0500] jtimberman: contributing?
[2012-02-13 23:10:00 -0500] bawt: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-02-13 23:10:00 -0500] cientifico: make sense to do a patch that check for that command, and remember this issue?
[2012-02-13 23:10:00 -0500] cientifico: ok
[2012-02-13 23:10:00 -0500] cientifico: make sense for me
[2012-02-13 23:19:00 -0500] RoboTeddy: can I get chef-client running on an ubuntu 10.04.3 (lucid) box to install a newer version of a package? (trying to install libcairo2-dev; ubuntu 10.10 (maverick) has the version I need)
[2012-02-13 23:21:00 -0500] jtimberman: RoboTeddy: that's rather against the point of a specific binary release distribution, where the distributor has created a static version set of packages that can be supported together.
[2012-02-13 23:22:00 -0500] jtimberman: RoboTeddy: that said, you'll probably want to look into "apt pinning" and using source repositories from other releases.
[2012-02-13 23:22:00 -0500] jtimberman: then write a recipe that will set up what you need to do that on your systems.
[2012-02-13 23:22:00 -0500] ssd7: apt pinning leads to suffering.  Always.
[2012-02-13 23:22:00 -0500] RoboTeddy: jtimberman: thank you
[2012-02-13 23:22:00 -0500] ssd7: But, probably the best route here I suppose.
[2012-02-13 23:23:00 -0500] RoboTeddy: ssd7: I guess this isn't chef-specific anymore, so I'll head over to #ubuntu and bug them about the best option
[2012-02-13 23:23:00 -0500] RoboTeddy: thanks guys
[2012-02-13 23:25:00 -0500] CaptTofu: hi all!
[2012-02-13 23:25:00 -0500] cientifico: hi
[2012-02-13 23:26:00 -0500] CaptTofu: how does one see what all the variables are on a chef client - such as how much memory there is, and other OS variables so I know what values to test for in a recipe?
[2012-02-13 23:26:00 -0500] CaptTofu: for instance - my recipe will set variables in a my.cnf template for innodb_buffer_pool based on 70% of available ram on the client/node
[2012-02-13 23:26:00 -0500] mlei: easy way is to browse for it in the chef web ui
[2012-02-13 23:27:00 -0500] cwj: CaptTofu: information about the local system is gathered by the 'ohai' command which you can run manually
[2012-02-13 23:27:00 -0500] CaptTofu: cwj: on the client itself?
[2012-02-13 23:27:00 -0500] cwj: yes
[2012-02-13 23:28:00 -0500] mlei: or: knife node show `hostname` -l
[2012-02-13 23:28:00 -0500] CaptTofu: yes!
[2012-02-13 23:28:00 -0500] cwj: yes, knife node show will show a superset of that information
[2012-02-13 23:29:00 -0500] CaptTofu: thank you!
[2012-02-13 23:30:00 -0500] CaptTofu: the key for me - I'm a chef newbie, though tons of experience elsewhere
[2012-02-13 23:30:00 -0500] CaptTofu: I know what I want to do, just not sure how to test if a piece of logic in the recipe will work
[2012-02-13 23:31:00 -0500] hippiehacker: I ask, am told it's hard, then forget to check the irc log, but I'll ask again:
[2012-02-13 23:31:00 -0500] hippiehacker: How do you reset the admin webui user password?
[2012-02-13 23:31:00 -0500] mlei: CaptTofu: just running ohai will show all the automatic variables; knife node show will show you all those plus all the attributes that come in from the environments and roles
[2012-02-13 23:32:00 -0500] cwj: CaptTofu: you might find the shef interactive shell to be useful for testing logic before you commit it to a cookbook
[2012-02-13 23:34:00 -0500] jtimberman: ssd7: while apt pinning is =~ suffering, its kind of the best way to do this, other than setting up an internal apt repository
[2012-02-13 23:34:00 -0500] CaptTofu: cwj: yeah, I was looking at shef, but getting a bunch of errors that I didn't know wher eto start
[2012-02-13 23:35:00 -0500] mlei: i would go with the internal repo, over apt pinning
[2012-02-13 23:35:00 -0500] mlei: quite a bit more predictable
[2012-02-13 23:35:00 -0500] RoboTeddy: how do you think apt pinning for one package (albeit one with a lot of dependencies) compares to using a non-LTS release of ubuntu? the answer probably depends on a bunch of other factors, but is one approach generally wiser than the other?
[2012-02-13 23:36:00 -0500] mlei: RoboTeddy: how many packages will it be total? can you rebuild the packages for the older release yourself?
[2012-02-13 23:36:00 -0500] mlei: is it prod?
[2012-02-13 23:37:00 -0500] CaptTofu: cwj: mainly to do with "#<Errno::ENOENT: No such file or directory - /etc/chef/client.pem>"
[2012-02-13 23:37:00 -0500] mlei: CaptTofu: shef -z -c ~/.chef/knife.rb
[2012-02-13 23:38:00 -0500] CaptTofu: ah
[2012-02-13 23:38:00 -0500] ssd7: jtimberman: yeah.  You mean you don't advise just downloading the package and all of its dependencies and then using the package resource in Chef?
[2012-02-13 23:38:00 -0500] hippiehacker: https://gist.github.com/1821492 #<-- reset chef webui admin password
[2012-02-13 23:38:00 -0500] RoboTeddy: mlei: do you mean can I rebuild the packages for the newer release myself?
[2012-02-13 23:38:00 -0500] RoboTeddy: mlei: and yes; it'll be a production machine
[2012-02-13 23:38:00 -0500] hippiehacker: what's the best place for that snippit in the wiki eh?
[2012-02-13 23:38:00 -0500] mlei: you're using the old release, so you're going to be building them for the old release, but with new sources
[2012-02-13 23:39:00 -0500] RoboTeddy: mlei: ah, my mistake, that makes sense
[2012-02-13 23:40:00 -0500] mlei: RoboTeddy: my opinion is go with what you know. if you already tested 10.10, and it works, then go with it. if you tested 10.04, but you just need this one package, then backport the packages
[2012-02-13 23:40:00 -0500] mlei: whether it's LTS or not is not as important as how much you've tested it
[2012-02-13 23:40:00 -0500] RoboTeddy: mlei: cool. I haven't tested at all; I'm still in the building stage, so that's a helpful piece of wisdom. appreciate it
[2012-02-13 23:41:00 -0500] sivy_: hey folks; it's been like 6 months since i last tried to get my server setup with chef, and I'm now using vagrant locally to work it out. I've completely forgotten how to add a standard recipe to my personal git repo. Any reminders would be helpful
[2012-02-13 23:42:00 -0500] cwj: sivy_: i take it that you mean you'd like to install a cookbook from the community.opscode.com site? that would be knife cookbook site install foo
[2012-02-13 23:43:00 -0500] sivy_: cwj: yeah, I think that's it
[2012-02-13 23:44:00 -0500] sivy_: cwj: ok, next stupid question. where do I run that from? I'm in a checkout of my local repo but it's ignoring it
[2012-02-13 23:45:00 -0500] cwj: sivy_: knife will try to perform the operation in which ever chef repo your knife.rb points to
[2012-02-13 23:45:00 -0500] cwj: and it will look for knife.rb in .chef in your cwd or in ~/.chef, in that order (i believe)
[2012-02-13 23:45:00 -0500] cwj: or something like that. i always keep mine in ~/.chef/
[2012-02-13 23:46:00 -0500] sivy_: hm, onlyu checksums in ~/.chef
[2012-02-13 23:47:00 -0500] sivy_: aha
[2012-02-13 23:47:00 -0500] sivy_: ~/.chef-repo
[2012-02-13 23:47:00 -0500] sivy_: oh no
[2012-02-13 23:47:00 -0500] sivy_: nm found it
[2012-02-13 23:49:00 -0500] CaptTofu: anyone: if you are doing a conditional setting for a template (conf file), how do you do comparisons with a value say "2056336kB" which is how chef displays it? I know maybe this is a ruby quetion
[2012-02-13 23:51:00 -0500] sivy_: cwj: thank you
[2012-02-13 23:51:00 -0500] cwj: no problem
[2012-02-13 23:55:00 -0500] mlei: CaptTofu: if you run to_i on it, it will ignore any characters after the number and give you an integer.
[2012-02-13 23:57:00 -0500] CaptTofu: mlei: aha, thanks!

[2012-02-06 09:13:00 -0500] nacer: listening food fight ep.2
[2012-02-06 09:15:00 -0500] nacer: ohai
[2012-02-06 09:55:00 -0500] jondot: i'm wondering - after i get provisioning up and ready, how would i use configuration management typically? (and im guessing the last step is chef's search capabilities)
[2012-02-06 09:55:00 -0500] jondot: by configuration - i'm referring to application configuration (configuration files distributed throughout machines)
[2012-02-06 09:55:00 -0500] BryanWB: ohai chefs!
[2012-02-06 09:56:00 -0500] BryanWB: nico: bonjour!
[2012-02-06 09:58:00 -0500] nacer: BryanWB: ciao
[2012-02-06 09:58:00 -0500] BryanWB: nacer: ciao!
[2012-02-06 10:07:00 -0500] dle: hi, can we log users access and users modification in Chef?
[2012-02-06 10:22:00 -0500] aeris: dle > for the configuration ?
[2012-02-06 10:25:00 -0500] dle: aeris > for cookbook on the chef master (upload, edit node...)
[2012-02-06 10:26:00 -0500] aeris: use scm ? :
[2012-02-06 10:27:00 -0500] labria: aeris that won't log the uploads/edits
[2012-02-06 10:27:00 -0500] aeris: yes, but uploads/edits must be done only from scm =)
[2012-02-06 10:28:00 -0500] aeris: better, must be done automatticaly from scm, with hook for exemple :
[2012-02-06 10:29:00 -0500] dle: yes, but we test before with upload and when it's ready, we push with git
[2012-02-06 10:30:00 -0500] aeris: you don't use test servers ????
[2012-02-06 10:30:00 -0500] aeris: directly on production ?
[2012-02-06 10:30:00 -0500] aeris: ><
[2012-02-06 10:30:00 -0500] dle: we change environnement
[2012-02-06 10:31:00 -0500] aeris: yes, but test are done on production servers ?
[2012-02-06 10:31:00 -0500] aeris: or dedicated test machine ?
[2012-02-06 10:32:00 -0500] dle: with dedicated test machine, we have just one chef master server
[2012-02-06 10:33:00 -0500] aeris: ok
[2012-02-06 10:35:00 -0500] nico: heya BryanWB \o_
[2012-02-06 10:36:00 -0500] dle: if the users access since web interface or knife, can we log acces and modification ? I have nothing in the log files
[2012-02-06 11:19:00 -0500] mrchrisadams: quick qn - which js library does chef use to render json objects as tree structures in the platform and the server?
[2012-02-06 12:16:00 -0500] BryanWB: mrchrisadams: i imagine the part of the ruby standard library that handles json, but not 100% sure
[2012-02-06 12:17:00 -0500] labria: BryanWB: actually it's the json gem
[2012-02-06 12:18:00 -0500] BryanWB: labria: ah, tks for clarifiying
[2012-02-06 13:19:00 -0500] royh: in a perfect world: are you supposed to run chef with ruby v1.9 or 1.8?
[2012-02-06 13:20:00 -0500] BryanWB: royh: works fine for me w/ both, but 1.9.2 is so much faster that 1.8.7
[2012-02-06 13:20:00 -0500] royh: BryanWB: that's what i was thinking
[2012-02-06 13:20:00 -0500] royh: is that supported? to run chef with 1.9
[2012-02-06 13:21:00 -0500] royh: does it work fine with ruby through rvm btw?
[2012-02-06 13:22:00 -0500] BryanWB: erm, don't know about either
[2012-02-06 13:22:00 -0500] royh: i mean, it makes me through up a little bit thinking about the rvm/chef combo, but hey -- i have to do this on a centos box...
[2012-02-06 13:23:00 -0500] BryanWB: what problem installing chef on centos? i do it all the time w/out rvm
[2012-02-06 13:23:00 -0500] labria: I tried both 1.9.3 and 1.8.7 for chef-client, take the exact same time
[2012-02-06 13:23:00 -0500] royh: labria: i would assume it's the server that is the bottleneck?
[2012-02-06 13:24:00 -0500] royh: BryanWB: with custom packages for everything then i assume?
[2012-02-06 13:24:00 -0500] BryanWB: i think it would be server and all the out of process activity, like yum
[2012-02-06 13:24:00 -0500] BryanWB: royh: no, see  rbel http://rbel.frameos.org/
[2012-02-06 13:24:00 -0500] royh: that's what I'm currently using BryanWB. Wanna get away from that.
[2012-02-06 13:26:00 -0500] royh: i just got the go ahead for ubuntu on the chef server
[2012-02-06 13:27:00 -0500] royh: now party like there's no tomorrow! \o/
[2012-02-06 13:28:00 -0500] BryanWB: u not happy w/ rbel?
[2012-02-06 13:28:00 -0500] royh: of course not
[2012-02-06 13:28:00 -0500] BryanWB: why not? The maintainer does a great job
[2012-02-06 13:28:00 -0500] royh: i'm not happy with the whole distro
[2012-02-06 13:29:00 -0500] BryanWB: centos? i guess that's understandable
[2012-02-06 13:53:00 -0500] labria: royh: no, just network IO, for both chef and other requests you make. have you seen the amount of JSON being transferred from client to server and back dunring a chef-run?
[2012-02-06 13:59:00 -0500] royh: labria: with 1gbps piping i doubt it takes that longer than the chef-server does anyways.
[2012-02-06 14:52:00 -0500] iafonov: Hi, does anyone working with gpg wit chef? Is there any way to add gpg public key on remote machine and set it to be trusted without manually doing it?
[2012-02-06 14:55:00 -0500] chrisa2: iafonov: yes, i'm doing that; i do an import and then use --import-ownertrust
[2012-02-06 14:56:00 -0500] chrisa2: goes like this: https://gist.github.com/1752532
[2012-02-06 14:57:00 -0500] iafonov: chrisa2: thanks, that is what I needed
[2012-02-06 14:58:00 -0500] chrisa2: np!
[2012-02-06 15:12:00 -0500] kisamoto: hi all, I'm looking at a configuration management system (puppet or chef) and have heard that chef may allow process duplication.
[2012-02-06 15:13:00 -0500] kisamoto: What I want to do is deploy an updated wsgi application, have a new apache process spawn with that configuration and gracefully stop the old one, is this possible?
[2012-02-06 15:14:00 -0500] jondot: should I go for chef-deploy or capistrano? (or is there a combination?)
[2012-02-06 15:14:00 -0500] jondot: (for deployments)
[2012-02-06 15:14:00 -0500] yfeldblum: kisamoto, yes, anything is possible with chef that you could do from the command line already, for the simple reason that you can have chef execute shell scripts if you like ... chef provides a great many additional tools beyond executing shell scripts of course, indeed, to help you replace shell scripts
[2012-02-06 15:15:00 -0500] yfeldblum: jondot, why do you want to use chef for deploying applications instead of capistrano?
[2012-02-06 15:16:00 -0500] jondot: yfeldblum, reading around, i see that chef is sometimes used for deployments as well. i don't know if thats good or bad, actually.
[2012-02-06 15:16:00 -0500] jondot: i'd like to be able to deploy ruby, node.js, and java apps
[2012-02-06 15:18:00 -0500] kisamoto: yfeldblum, thank you. i was looking if it could replace shell scripts but that's useful
[2012-02-06 15:23:00 -0500] jtimberman: jondot: chef-deploy the rubygem? it's rather old at this point as i understand it, and the functionality exists in the 'deploy' resource in chef itself.
[2012-02-06 15:23:00 -0500] jondot: jtimberman, ah. good to know.
[2012-02-06 15:24:00 -0500] jtimberman: jondot: putting a deployment in a recipe is something you should consider carefully, with the understanding of the reprecussions.
[2012-02-06 15:24:00 -0500] jtimberman: if you think of an application deployment as a specific system state
[2012-02-06 15:24:00 -0500] jtimberman: then a recipe makes sense.
[2012-02-06 15:24:00 -0500] jtimberman: especially if your app can be updated in tandem w/o impacting service
[2012-02-06 15:25:00 -0500] jtimberman: but if you need to do a number of complicated things, something better suited to deployment orchestration like capistrano might make more sense.
[2012-02-06 15:25:00 -0500] jtimberman: simply because the logic to handle multi-node actions in a recipe can be difficult
[2012-02-06 15:25:00 -0500] jtimberman: since chef operates on the node it runs on
[2012-02-06 15:29:00 -0500] jondot: i see
[2012-02-06 15:29:00 -0500] jondot: but it looks to me that chef is good for rolling deployments, no?
[2012-02-06 15:39:00 -0500] jondot: this sums it up pretty nicely, and making me lean towards chef deploy resource http://www.quora.com/Chef-Configuration-Management-Software/Should-I-use-Chef-or-Capistrano-to-deploy-my-source-code
[2012-02-06 15:40:00 -0500] jtimberman: jondot: sure, its good at it :)
[2012-02-06 15:40:00 -0500] jtimberman: but wrapping your brain around chef doing it vs capistrano or fabric is odd for some folks
[2012-02-06 15:41:00 -0500] jondot: i guess so. i think my plan is to set everything up, continue using cap and then migrate to deploy resource one by one
[2012-02-06 15:41:00 -0500] jtimberman: :)
[2012-02-06 15:43:00 -0500] yfeldblum: chef actually has no concept of "deploy this code now" - chef is about the concept of "converge the system to the declared final state", which may include "converge this application to be installed at the latest version" as one element of the declared final state, but this is not a "deploy this code now" action
[2012-02-06 15:44:00 -0500] doki_pen: does anyone use nagios to check that chef is running successfully?
[2012-02-06 15:44:00 -0500] RobbieAB: We use zenoss
[2012-02-06 15:44:00 -0500] jtimberman: yfeldblum: indeed ;)
[2012-02-06 15:44:00 -0500] doki_pen: i'd like to check the time of the last successful run
[2012-02-06 15:44:00 -0500] jondot: yfeldblum, other than different wording, is an application deployed in vX on a server, not saying that the server is in state app-X ?
[2012-02-06 15:44:00 -0500] doki_pen: is there a simple way?
[2012-02-06 15:45:00 -0500] yfeldblum: jondot, "git push heroku master" is a "deploy this code now" action; likewise, a big green button that says "deploy this revision to prod >>" or whatever
[2012-02-06 15:45:00 -0500] ivey: jondot: it's a different way of thinking
[2012-02-06 15:45:00 -0500] RobbieAB: jondot: Can your application handle different versions of the code on different servers?
[2012-02-06 15:46:00 -0500] ivey: if you want "deploy X to prod" button you have to add the infrastructure to tell chef what the appropriate version is
[2012-02-06 15:46:00 -0500] iafonov: I'm using chef to deploy rails application to 6 shards - works very well
[2012-02-06 15:46:00 -0500] RobbieAB: And chef works by having the nodes poll the server (AIUI), so you don't "push to nodes"
[2012-02-06 15:47:00 -0500] jondot: but in any case, i want to control the rate of nodes being updated
[2012-02-06 15:47:00 -0500] jtimberman: amazon.com can handle different code releases being on different servers, for example.
[2012-02-06 15:47:00 -0500] doki_pen: RobbieAB: how does the zenoss mechanism work?
[2012-02-06 15:47:00 -0500] jtimberman: like, i still have the "older" look/feel/interface scheme, my wife has the new one.
[2012-02-06 15:47:00 -0500] RobbieAB: doki_pen: Ours? We ssh in and parse the log tail.
[2012-02-06 15:48:00 -0500] jondot: so you guys are saying that i will have to have different roles for different versions? like myapp_srv_v1, myapp_srv_v2 and such?
[2012-02-06 15:48:00 -0500] doki_pen: RobbieAB: heh
[2012-02-06 15:48:00 -0500] RobbieAB: It's ugly, but it works.
[2012-02-06 15:48:00 -0500] itwasntandy: jondot: you can manage that nicely with the environment stuff in chef 0.10.x.
[2012-02-06 15:48:00 -0500] RobbieAB: jondot: yes.
[2012-02-06 15:48:00 -0500] doki_pen: there *must* be a better way
[2012-02-06 15:48:00 -0500] ivey: jondot: not at all
[2012-02-06 15:48:00 -0500] jtimberman: jondot: not at all.
[2012-02-06 15:48:00 -0500] ivey: you could put the current version in an Env attr
[2012-02-06 15:48:00 -0500] ivey: and even override on the nodes if you want to control your deploy process
[2012-02-06 15:49:00 -0500] ivey: the point is there's not a "knife deploy" ... if you use chef to manage deploying code you need to think about it as a resource like the rest of what chef manages
[2012-02-06 15:49:00 -0500] ivey: it can work quite well, if you approach it in the right way
[2012-02-06 15:50:00 -0500] iafonov: jondot: I use kind of custom built solution for deployments it wraps chef - it looks like this - https://gist.github.com/1752785, so if I need to do a deply I can run from console something like this `knife exec script/deploy "name:shard*"`
[2012-02-06 15:50:00 -0500] judd7: g!!love
[2012-02-06 15:50:00 -0500] judd7: well, I hate my irc client.
[2012-02-06 15:50:00 -0500] iafonov: so I can control the servers which would be updated by supplying query
[2012-02-06 15:51:00 -0500] jondot: ivey, that i understand.
[2012-02-06 15:51:00 -0500] jondot: i guess we'll start with capistrano and move up from there if needed.
[2012-02-06 15:51:00 -0500] iafonov: and controlling releases is simple too, you can set it as an attribute for node - we usually set a git branch which we want to deploy
[2012-02-06 15:53:00 -0500] ivey: don't get me wrong, i love deploying w/ chef
[2012-02-06 15:53:00 -0500] ivey: especially if you have a good artifact server and/or do everything from git
[2012-02-06 16:14:00 -0500] gudmundur: How can I get chef-client to run as a service on Windows?
[2012-02-06 16:17:00 -0500] doki_pen: RobbieAB: I ended up tailing the log :P
[2012-02-06 16:18:00 -0500] RobbieAB: doki_pen: It works. :)
[2012-02-06 16:18:00 -0500] jessicab: gudmundur - this bug might be helpful, seems like the workaround at the bottom would do what youre looking for.. although, the bug itself isnt fixed until version 10.10 comes out  http://tickets.opscode.com/browse/CHEF-1736
[2012-02-06 16:18:00 -0500] lflux: ohai chefs
[2012-02-06 16:18:00 -0500] lflux: anyone have a rake task example that uses search I can look at?
[2012-02-06 16:22:00 -0500] geekbri: When I do a search(:node, "search term") it returns and array of nodes that match that.  If I wanted to access a nodes attributes, could i do this?  results = search(:node, "whatever")  then puts results.first.node_attribute
[2012-02-06 16:25:00 -0500] leifmadsen: ohai! :)
[2012-02-06 16:26:00 -0500] miketheman: ohey
[2012-02-06 16:26:00 -0500] leifmadsen: I'm doing some chef testing, and we're trying to migrate from chef-solo to using chef-server. I've installed the server, and have knife setup on m workstation, but was wondering if there was a decent document/starting place that I should look to migrate our existing chef-repo directory onto the chef-server?
[2012-02-06 16:27:00 -0500] geekbri: leifmadsen: perhaps reverse this? http://wiki.opscode.com/display/chef/Migrating+to+Hosted+Chef+from+an+Open+Source+Chef+Server+implementation
[2012-02-06 16:29:00 -0500] rismoney: how do you run chef-client to report w/o actually performing the activities?
[2012-02-06 16:29:00 -0500] leifmadsen: geekbri: thanks, will check it out and see if that helps me move forward
[2012-02-06 16:33:00 -0500] miketheman: rismoney: you can't, yet. http://tickets.opscode.com/browse/CHEF-13
[2012-02-06 16:33:00 -0500] miketheman: log in and vote for it
[2012-02-06 16:35:00 -0500] rismoney: miketheman - wow, its several years old.
[2012-02-06 16:36:00 -0500] miketheman: yes. it's an early one.
[2012-02-06 16:36:00 -0500] geekbri: Is it possible to have a not_if and an only_if in the same template ?
[2012-02-06 16:37:00 -0500] geekbri: like can I have not_if and then right after it only_if ?
[2012-02-06 16:37:00 -0500] rismoney: miketheman - so is there no way to evaluate my recipe vs the running config, or produce a delta type report?
[2012-02-06 16:38:00 -0500] miketheman: rismoney: there's things called "chef handlers" that can tell you details post run what happened, but not too much to evaluate "what should be done" before it actually does it
[2012-02-06 16:39:00 -0500] miketheman: what you _could_ do is write a new recipe that inspects each piece of your recipe vs the running config and log what action you might take. But that's not a "good solution".
[2012-02-06 16:41:00 -0500] mattray: rismoney: that feature is going to be in the next major release of Chef. ETA sometime first half the year hopefully
[2012-02-06 16:43:00 -0500] yfeldblum: geekbri, it is possible: the resource will not take actions if any of the only_if/not_if conditions prevent it (all the conditions must pass for the resource to take any actions)
[2012-02-06 16:43:00 -0500] geekbri: yfeldblum: yes I can see the problem that arises there.
[2012-02-06 16:44:00 -0500] jondot: is there any sketch that anyone might know of, that depicts chef, CI, deployment workflow all togather. i'm in the process of drawing what i want, but was wondering if anyone knew anything like this
[2012-02-06 16:45:00 -0500] yfeldblum: geekbri, which?
[2012-02-06 16:45:00 -0500] miketheman: I'm interested in what jondot is asking aobut as well
[2012-02-06 16:47:00 -0500] geekbri: yfeldblum: mmm, nothing, your information was very useful :)
[2012-02-06 17:12:00 -0500] hippiehacker: schisamo: is there any way to access the return value of commands executed via em-winrm?
[2012-02-06 17:23:00 -0500] coderanger: IRCLoggerbot_: Test
[2012-02-06 17:27:00 -0500] coderanger: IRCLoggerbot_: Test again
[2012-02-06 17:27:00 -0500] coderanger: Someone else talk
[2012-02-06 17:27:00 -0500] jondot: yo
[2012-02-06 17:27:00 -0500] flashmanbahadur: i can see you
[2012-02-06 17:28:00 -0500] coderanger: http://dl.dropbox.com/u/3962871/Screenshots/f~7u.png :-)
[2012-02-06 17:28:00 -0500] coderanger: Times are all in UTC though, icky
[2012-02-06 17:28:00 -0500] flashmanbahadur: still, pretty nice
[2012-02-06 17:31:00 -0500] jondot: coderanger, looks nice -  2 questions, is that open source?
[2012-02-06 17:31:00 -0500] jondot: and the second one, can it do gravatars?
[2012-02-06 17:31:00 -0500] coderanger: jondot: No, its really heavily tied in to the rest of our infrastructure (the community site)
[2012-02-06 17:32:00 -0500] coderanger: And yes, if you go fill in your IRC nickname on opscode.com/account it will show it when this launches :)
[2012-02-06 17:32:00 -0500] jondot: well then, i'll keep my hobby project in the todolist :)
[2012-02-06 17:32:00 -0500] coderanger: Heh, once I finish kicking the tires a bit more I can probably throw you the IRC log related code, its pretty simple
[2012-02-06 17:33:00 -0500] coderanger: Rails model + acts_as_solr for search, one controller with two views
[2012-02-06 17:33:00 -0500] coderanger: Reminds me, I need to write the index view
[2012-02-06 17:33:00 -0500] jondot: yes, i have this project that consists mostly of doing a very aesthetical looking IRC logs, including avatars. it should be enough effort for an evening or two.
[2012-02-06 17:33:00 -0500] coderanger: Well if you have ideas on how make this look nicer :-)
[2012-02-06 17:33:00 -0500] jondot: if you look around, you'll see that almost all of the irc bots make ugly logs.
[2012-02-06 17:34:00 -0500] coderanger: http://dl.dropbox.com/u/3962871/Screenshots/5gbg.png thats an example with icons
[2012-02-06 17:35:00 -0500] spicyWith: coderanger: hi there, we've been exchanging emails over the last few hours. I checked and the application id IS a string in my code
[2012-02-06 17:36:00 -0500] coderanger: spicyWith: Can you pastebin the recipe?
[2012-02-06 17:36:00 -0500] spicyWith: coderanger: sure
[2012-02-06 17:36:00 -0500] jondot: coderanger, that looks better. i was planning a more facebook/social look (big avatars, high contrast)
[2012-02-06 17:37:00 -0500] jondot: i wouldn't mind jumping in to what you're doing either, when i finish up my current hobby project.
[2012-02-06 17:37:00 -0500] coderanger: Eh, we played with that, it distracts from the conversation flow a lot though
[2012-02-06 17:37:00 -0500] jondot: coderanger, not really, take a look at grove.io
[2012-02-06 17:38:00 -0500] jondot: on that guideline, i'd get rid of the gray lines, and make the nick+image right-aligned
[2012-02-06 17:39:00 -0500] jondot: i'd also take the time column, and remove it. put a time signature right below the nick
[2012-02-06 17:39:00 -0500] coderanger: Our archives actually look very similar to hers
[2012-02-06 17:39:00 -0500] coderanger: just a smaller font
[2012-02-06 17:40:00 -0500] spicyWith: coderanger: emailed
[2012-02-06 17:40:00 -0500] jondot: coderanger, sure, just sayin'
[2012-02-06 17:41:00 -0500] coderanger: jondot: and I like the right-aligned nicks but then the icons don't line up :-(
[2012-02-06 17:42:00 -0500] coderanger: I want to drop the vertical lines though
[2012-02-06 17:42:00 -0500] coderanger: those add nothing useful, just noise
[2012-02-06 17:42:00 -0500] coderanger: and I like groove's bolded names, stealing that :D
[2012-02-06 17:42:00 -0500] jondot: right. keep removing till you can't remove anything - thats perfection :)
[2012-02-06 17:42:00 -0500] erikh: or a blank page
[2012-02-06 17:43:00 -0500] coderanger: I think the right answer with time is to show on line hover
[2012-02-06 17:43:00 -0500] coderanger: otherwise only show one stamp every 5 minutes or something
[2012-02-06 17:43:00 -0500] coderanger: for easy seeking with lower visual noise on the right side
[2012-02-06 17:43:00 -0500] jondot: coderanger, yea, thats smart. the time column isn't very informative. i guess people don't want to know the time unless they really need it.
[2012-02-06 17:44:00 -0500] coderanger: Its needed for seeking through a log file, but that requires fairly low resolution
[2012-02-06 17:44:00 -0500] jondot: yea. machines like it, i guess not humans - i'd be searching for a discussion/information rather than time.
[2012-02-06 17:45:00 -0500] coderanger: jondot: A common use of public logs is linking someone to a discussion you had some time in the past, and usually know you know roughly when it was moreso than specific keywords
[2012-02-06 17:45:00 -0500] coderanger: (though we also have a keyword search if that is your cup of tea)
[2012-02-06 17:47:00 -0500] jondot: well i guess so.
[2012-02-06 17:47:00 -0500] coderanger: Also, damn if I don't hate HTML table sizing. Can haz flexbox?
[2012-02-06 17:48:00 -0500] ssd7_: Hmm.  I think when I search through IRC log the only "time" I search on is the day.  Then I typically just search for some key phrases I remember
[2012-02-06 17:49:00 -0500] jondot: if you REALLY want to be cool, make a facet on the words for a specific log :)
[2012-02-06 17:49:00 -0500] coderanger: jondot: We just feed the every log line into solr
[2012-02-06 17:50:00 -0500] jondot: solr has facets
[2012-02-06 17:50:00 -0500] jondot: and with simple TF-IDF (http://en.wikipedia.org/wiki/Tf%E2%80%93idf) you can take away all of the simple words
[2012-02-06 17:50:00 -0500] coderanger: Sure, but you can also just use their keyword query system to get similar results
[2012-02-06 17:51:00 -0500] jondot: and i'm sorry for that idea :)
[2012-02-06 17:51:00 -0500] coderanger: :-P one step at a time
[2012-02-06 17:54:00 -0500] schisamo: hippiehacker: don't think this so at this time.  not sure the underlying WinRM gem exposes that.
[2012-02-06 17:57:00 -0500] spicyWith: coderanger: didn't pastebin, but sent you an email instead. Let me know if you didn't get it
[2012-02-06 17:57:00 -0500] coderanger: spicyWith: Ack, sorry, haven't checked my email again this morning, looking
[2012-02-06 18:02:00 -0500] coderanger: spicyWith: Does your line 69 match this one? https://github.com/coderanger/djangocon2011/blob/master/cookbooks/application/providers/default.rb#L69
[2012-02-06 18:04:00 -0500] spicyWith: coderanger: checking
[2012-02-06 18:05:00 -0500] spicyWith: coderanger: yes, it does (I did copy over your application cookbook)
[2012-02-06 18:06:00 -0500] slyphon: any idea chef would error out on https://chef.mb.snapfish.com:4001/search/node?q=recipes:apt%5C:%5C:cacher&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000 ?
[2012-02-06 18:07:00 -0500] coderanger: spicyWith: Weird, not sure why the traceback is barfing there then
[2012-02-06 18:08:00 -0500] slyphon: is there some difference between search in 0.9 and 0.10 ?
[2012-02-06 18:08:00 -0500] coderanger: #id shouldn't trigger method_missing
[2012-02-06 18:08:00 -0500] coderanger: slyphon: Yes, we changed the storage format massively
[2012-02-06 18:08:00 -0500] spicyWith: coderanger: should I tar up my chef repo and send it your way?
[2012-02-06 18:08:00 -0500] slyphon: ok, but how about the client API?
[2012-02-06 18:08:00 -0500] coderanger: spicyWith: What chef-client version are you using
[2012-02-06 18:08:00 -0500] slyphon: i'm just confused why that's horking
[2012-02-06 18:09:00 -0500] coderanger: spicyWith: I have a standup meeting shortly, so I can't look for too much longer >_<
[2012-02-06 18:09:00 -0500] coderanger: slyphon: No, that should stay the same, unless its a weird query
[2012-02-06 18:09:00 -0500] coderanger: We did remove sorting though
[2012-02-06 18:09:00 -0500] slyphon: hm
[2012-02-06 18:09:00 -0500] coderanger: or rather, it has to be on id
[2012-02-06 18:09:00 -0500] slyphon: mmkay
[2012-02-06 18:10:00 -0500] spicyWith: coderanger: ok
[2012-02-06 18:10:00 -0500] coderanger: I think I need to run out and find breakfast first too, stomach grumbling
[2012-02-06 18:10:00 -0500] spicyWith: coderanger: Chef: 0.10.8
[2012-02-06 18:14:00 -0500] judd7: I did a knife bootstrap that failed, so my host's iP address was not registered in the Chef Server, and knife node search can't find it based on roles.  I then fixed my recipes and they ran to completion, so I knife deleted the node and client and /etc/chef off the node and I bootstrapped again, but it still didn't show up in knife searches on role.  Any ideas?  The role is there. :(
[2012-02-06 18:18:00 -0500] spicyWith: coderanger: does deploy_key need an end statement?
[2012-02-06 18:19:00 -0500] slyphon:  Net::HTTPServerException: 404 "Not Found" - (Chef::Exceptions::SolrConnectionError)
[2012-02-06 18:19:00 -0500] slyphon: what's this?
[2012-02-06 18:20:00 -0500] slyphon: solr is running
[2012-02-06 18:20:00 -0500] slyphon: on the command line i type 'knife ssh'
[2012-02-06 18:20:00 -0500] slyphon: it then gives me this:
[2012-02-06 18:20:00 -0500] slyphon: ERROR: Server returned error for https://chef.mb.snapfish.com:4001/search/node?q=&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retrying 1/5 in 4s
[2012-02-06 18:20:00 -0500] slyphon: i am confused
[2012-02-06 18:25:00 -0500] dyer: so I have a attribute in my defaults of node[:provisioning_api][:aliases], and in a role I set an override to that attrubute with an array of values ( https://gist.github.com/b7ca99c5c24374623942 ).  I can log into the chef ui and see these values are there but when I run shef -z on the actual node they seem to be returning the default value, which is an empty array
[2012-02-06 18:25:00 -0500] slyphon: teh fuck, it's returning 404 Not Found for /search/reindex
[2012-02-06 18:25:00 -0500] slyphon: what the fuck is going on?!
[2012-02-06 18:26:00 -0500] dyer: I have done a few succesful chef runs since then, but the node still seems to not see the override attributes
[2012-02-06 18:26:00 -0500] dyer: anyone have any idea why this might be happening?
[2012-02-06 18:27:00 -0500] slyphon: oh
[2012-02-06 18:27:00 -0500] slyphon: solr was *down*
[2012-02-06 18:28:00 -0500] cwj: unpossible!
[2012-02-06 18:28:00 -0500] slyphon: for the love of
[2012-02-06 18:28:00 -0500] slyphon: jetty was up
[2012-02-06 18:28:00 -0500] slyphon: but traceback!
[2012-02-06 18:28:00 -0500] labria: solr? down? unseen!
[2012-02-06 18:28:00 -0500] ranjibd: ticket?
[2012-02-06 18:28:00 -0500] slyphon: hah
[2012-02-06 18:28:00 -0500] bawt: ticket is here http://tickets.opscode.com/browse/CHEF-2428 here's my take on it: https://github.com/mdkent/chef/commits/CHEF-2428
[2012-02-06 18:29:00 -0500] slyphon: anyone know if there was a monitor url added in 0.10
[2012-02-06 18:29:00 -0500] slyphon: ?
[2012-02-06 18:29:00 -0500] hippiehacker: schisamo: https://github.com/zenchild/WinRM/blob/master/lib/winrm/winrm_service.rb#L158 Return value is there, now trynig to figure out how to extract it
[2012-02-06 18:29:00 -0500] slyphon: like somethig i can ping w/ haproxy to see if shit's up?
[2012-02-06 18:34:00 -0500] slyphon: oh gooide
[2012-02-06 18:34:00 -0500] slyphon: now search returns zero results
[2012-02-06 18:35:00 -0500] slyphon: instead of just 404ing
[2012-02-06 18:35:00 -0500] slyphon: nice
[2012-02-06 18:36:00 -0500] slyphon: i thought this stuff sucked *before*
[2012-02-06 18:36:00 -0500] labria: come on, they have to somehow lure people to use the platform.
[2012-02-06 18:36:00 -0500] labria: =)
[2012-02-06 18:36:00 -0500] slyphon: it would be nice if it worked
[2012-02-06 18:36:00 -0500] slyphon: or didn't
[2012-02-06 18:37:00 -0500] slyphon: this inbetween shit is really chafing my taint
[2012-02-06 18:37:00 -0500] dyer: wtf, I cnat seem to get any role data to apply any longer
[2012-02-06 18:37:00 -0500] dyer: !@#$@#$@#
[2012-02-06 18:37:00 -0500] dyer: frustrating
[2012-02-06 18:38:00 -0500] hippiehacker: https://gist.github.com/1753961 # winrm exitcode
[2012-02-06 18:39:00 -0500] spicyWith: Ruby question: what would be the syntax for defining a deploy_key (http://wiki.opscode.com/display/chef/Deploy+Resource?) in a recipe/default.rb file? (is that even possible, or do they have to be defined in a data bag)?
[2012-02-06 18:39:00 -0500] slyphon: uh
[2012-02-06 18:40:00 -0500] slyphon: the_key = 'whatever'
[2012-02-06 18:40:00 -0500] dyer: Could I please get someone to give me a hand here, not sure whats going on but I have been spinning my wheels for about two hours on it and I am about to blow and damn gasket :p
[2012-02-06 18:41:00 -0500] ranjibd: slyphon,  chef solr has always frustrated me
[2012-02-06 18:41:00 -0500] dyer: anything obvisouly wrong w/ that role I posted, because I dont see it ( https://gist.github.com/b7ca99c5c24374623942 )
[2012-02-06 18:41:00 -0500] dyer: thank you, sorry for venting, just one of thos days
[2012-02-06 18:41:00 -0500] labria: spicyWith: you can NOT use a deploy_key with deploy_resource, it's only defined in the application cookbook, IIRC
[2012-02-06 18:41:00 -0500] slyphon: dyer: one sec
[2012-02-06 18:41:00 -0500] dyer: slyphon, tyvm
[2012-02-06 18:41:00 -0500] spicyWith: slyphon: would it be deploy_key do "key" end?
[2012-02-06 18:42:00 -0500] spicyWith: labria: I'm using the application resource
[2012-02-06 18:42:00 -0500] slyphon: dyer: i mean, i always do this https://gist.github.com/ceed16d18b7fbca1f8ba
[2012-02-06 18:42:00 -0500] slyphon: add the extra {} inside the override_attributes()
[2012-02-06 18:42:00 -0500] labria: slyphonit would be deploy_key "ssh-dss sdfspdfjapojowijtoiwjet"
[2012-02-06 18:42:00 -0500] spicyWith: labria: sorry, I guess I posted the wrong doc. That was the one I found mentioning a deploy key. How would I define it in my application recipe?
[2012-02-06 18:42:00 -0500] jtimberman: dyer: looks like a role. what error are you getting?
[2012-02-06 18:42:00 -0500] slyphon: but i've had a hell of a time getting overrides to work right
[2012-02-06 18:42:00 -0500] jtimberman: and what are you trying to do when you get that error?
[2012-02-06 18:43:00 -0500] slyphon: labria: eh?
[2012-02-06 18:43:00 -0500] judd7: why would "knife node show <node> -Fj" show interfaces for some nodes and not others?
[2012-02-06 18:43:00 -0500] jtimberman: also, underscores are not RFC compliant for domain names.
[2012-02-06 18:43:00 -0500] dyer: jtimberman, no chef error, I am getting a ruby error ;)
[2012-02-06 18:43:00 -0500] labria: https://gist.github.com/264949cf7e92950fdb98
[2012-02-06 18:43:00 -0500] slyphon: labria: to assign a value to a variable in ruby it's just blah = 'foobar'
[2012-02-06 18:43:00 -0500] dyer: i mean the error really doesnt matter, the problem is shef -z doesnt reflect what I have on the chef server
[2012-02-06 18:44:00 -0500] dyer: https://img.skitch.com/20120206-n15fce8jnye7tiwg2381y84ts.jpg
[2012-02-06 18:44:00 -0500] slyphon: blah
[2012-02-06 18:44:00 -0500] spicyWith: labria: if I do that I get a weird error from the application, id not defined
[2012-02-06 18:44:00 -0500] labria: slyphon it's not a variable, its a DSL method accepting a argument )
[2012-02-06 18:44:00 -0500] slyphon: then what you posted is fine
[2012-02-06 18:44:00 -0500] slyphon: i *think*
[2012-02-06 18:45:00 -0500] slyphon: if that's valid input for that method
[2012-02-06 18:45:00 -0500] slyphon: jtimberman: did the knife ssh search syntax change?
[2012-02-06 18:46:00 -0500] slyphon: knife ssh 'role:*' -a hostname 'uptime' returns zero results for me, where this used to work
[2012-02-06 18:46:00 -0500] slyphon: (even roles:*0
[2012-02-06 18:46:00 -0500] slyphon: )
[2012-02-06 18:46:00 -0500] slyphon: gha
[2012-02-06 18:47:00 -0500] slyphon: great, and now my nagios is hosed
[2012-02-06 18:47:00 -0500] jtimberman: dyer: what uhm.
[2012-02-06 18:47:00 -0500] jtimberman: er
[2012-02-06 18:47:00 -0500] jtimberman: two conversations typed on the same line :)
[2012-02-06 18:47:00 -0500] slyphon: jtimberman: sorry, i'll go next
[2012-02-06 18:47:00 -0500] jtimberman: dyer: that file doesn't have any ruby syntax issues :)
[2012-02-06 18:47:00 -0500] jtimberman: slyphon: uhm, not that i'm aware of.
[2012-02-06 18:48:00 -0500] slyphon: gahhh
[2012-02-06 18:48:00 -0500] labria: slyphon did you reindex?
[2012-02-06 18:48:00 -0500] slyphon: yeah
[2012-02-06 18:48:00 -0500] dyer: jtimberman, https://gist.github.com/d7d357995a6b9532c2cc
[2012-02-06 18:48:00 -0500] slyphon: knife search role 'name:*' returns results
[2012-02-06 18:48:00 -0500] dyer: why is that empty
[2012-02-06 18:48:00 -0500] slyphon: as one would expect
[2012-02-06 18:48:00 -0500] dyer: thats the problem, that should have 5 elements in the array
[2012-02-06 18:49:00 -0500] jtimberman: dyer: well, in shef you might not see the attributes, iirc ssd7_ covers things in his blog post about shef.
[2012-02-06 18:49:00 -0500] dyer: why wouldnt u see them in shef ?
[2012-02-06 18:49:00 -0500] labria: dyer try using strings?
[2012-02-06 18:49:00 -0500] dyer: labria,  I have
[2012-02-06 18:50:00 -0500] spicyWith: I'm using vagrant to provision nodes. When the initial run fails, if I try to run chef-client from the node, it tells me the run list is empty do I necessarily have to reboot in order to do a chef-client run?
[2012-02-06 18:50:00 -0500] jtimberman: http://stevendanna.github.com/blog/2012/01/28/shef-debugging-tips-1/
[2012-02-06 18:51:00 -0500] Brad_K: spicyWith: if the initial chef-client run fails, the node data won't get saved and the run list will be empty.
[2012-02-06 18:51:00 -0500] Brad_K: when i've had this happen to me in the past, i have used a "knife node edit NODENAME" to manually re-add the runlist back, then done a chef-client run.
[2012-02-06 18:53:00 -0500] Brad_K: spicyWith: did you see my previous messages before you got dropped from the channel?
[2012-02-06 18:54:00 -0500] spicyWith: Brad_K: no :(. Vagrant panic'ed my computer.
[2012-02-06 18:54:00 -0500] spicyWith: I think I managed to open jtimberman's link
[2012-02-06 18:54:00 -0500] Brad_K: spicyWith: if the initial chef-client run fails, the node data won't get saved and the run list will be empty.
[2012-02-06 18:54:00 -0500] Brad_K: when i've had this happen to me in the past, i have used a "knife node edit NODENAME" to manually re-add the runlist back, then done a chef-client run.
[2012-02-06 18:55:00 -0500] slyphon: ok
[2012-02-06 18:55:00 -0500] slyphon: what the fuck is going on
[2012-02-06 18:55:00 -0500] spicyWith: Brad_K: would I do that from the node or from my laptop? Also, what would I pass in?
[2012-02-06 18:55:00 -0500] slyphon: search(:node, 'hostname:*') is returning zero results
[2012-02-06 18:56:00 -0500] slyphon: knife search node 'name:*'
[2012-02-06 18:56:00 -0500] slyphon: 0 items found
[2012-02-06 18:56:00 -0500] spicyWith: It looks like jtimberman link didn't open on time
[2012-02-06 18:56:00 -0500] slyphon: i just rebuilt the index
[2012-02-06 18:56:00 -0500] slyphon: twice
[2012-02-06 18:56:00 -0500] Brad_K: spicyWith: that would be something you would do from your chef workstation, and knife should open a file containing what it has for your primary node attributes in whatever your defined standard editor is  vi, emacs, etc.
[2012-02-06 18:57:00 -0500] ssd7_: dyer: I'm behind on backscroll.  Is the problem that you have node attributes that aren't appearing correctly in shef?
[2012-02-06 18:57:00 -0500] dyer: ye
[2012-02-06 18:57:00 -0500] dyer: yes
[2012-02-06 18:58:00 -0500] ssd7_: Are these attributes being set in a role?
[2012-02-06 18:58:00 -0500] slyphon: is it normal for chef-expander to have zero output in the log?
[2012-02-06 18:58:00 -0500] Brad_K: slyphon: knife search node 'name:repo' works for me, when i have a node named "repo".
[2012-02-06 18:58:00 -0500] Brad_K: was this the exact syntax you used?
[2012-02-06 18:58:00 -0500] slyphon: i've tried several things
[2012-02-06 18:58:00 -0500] slyphon: knife search node 'name:*'
[2012-02-06 18:59:00 -0500] slyphon: in a recipe i have search(:node, "hostname:[* TO *]")
[2012-02-06 18:59:00 -0500] dyer: ssd7_, yes
[2012-02-06 18:59:00 -0500] ssd7_: dyer: http://tickets.opscode.com/browse/CHEF-2467 :(
[2012-02-06 18:59:00 -0500] Brad_K: just plain knife search node 'name' and knife search node 'repo' doesn't return anything for me.
[2012-02-06 18:59:00 -0500] ssd7_: I was actually hoping to dig into this bug this week if I get the time.
[2012-02-06 18:59:00 -0500] Brad_K: you have to do it as knife search node 'name:repo' in order for it to work.
[2012-02-06 18:59:00 -0500] slyphon: no, i need a list
[2012-02-06 19:00:00 -0500] slyphon: that's the point
[2012-02-06 19:00:00 -0500] slyphon: that's how the nagios recipe works
[2012-02-06 19:00:00 -0500] slyphon: also
[2012-02-06 19:00:00 -0500] dyer: ssd7_, is that just 10.2?
[2012-02-06 19:00:00 -0500] slyphon: knife search role 'name:*'
[2012-02-06 19:00:00 -0500] dyer: I am using 10.8 ?
[2012-02-06 19:00:00 -0500] slyphon: work
[2012-02-06 19:00:00 -0500] slyphon: s
[2012-02-06 19:01:00 -0500] slyphon: search(:node, '*:*') works
[2012-02-06 19:01:00 -0500] ranjibd: ssd7, Brad_K , knife search sometime fail on even `name` attribute
[2012-02-06 19:01:00 -0500] ssd7_: dyer: I haven't tested it recently, but I don't think that portion of the shef code has changed from 10.2 til now ver much, so I imagine it is still an isue
[2012-02-06 19:01:00 -0500] ranjibd: though the solr document is present,
[2012-02-06 19:02:00 -0500] dyer: ok, well shef not working isnt the real issue, its the fact that the role's attributes just flat out dont seem to exist in the chef run
[2012-02-06 19:02:00 -0500] Brad_K: slyphon: i'm seeing a graphical smiley icon when you type that.  let me fix my client so that it doesn't do graphical smileys and then hopefully i'll be able to read what you're actually doing.
[2012-02-06 19:02:00 -0500] slyphon: Brad_K: asterisk colon asterisk
[2012-02-06 19:03:00 -0500] ssd7_: dyer: Hrmm.  Well that is certainly a bigger issue.  I see you gist now, I'll take a quick look.
[2012-02-06 19:03:00 -0500] ssd7_: ahh, nvm that is from shef
[2012-02-06 19:03:00 -0500] Brad_K: slyphon: if you do "name:*" that should work.  I'm not sure about the extra asterisk before the colon.
[2012-02-06 19:04:00 -0500] slyphon: name:* returns zero results
[2012-02-06 19:04:00 -0500] dyer: ssd,  I am adding some logging to my recipe to make sure those attributes are not there
[2012-02-06 19:04:00 -0500] dyer: one sec, running now
[2012-02-06 19:04:00 -0500] slyphon: '*:*' returns all results
[2012-02-06 19:04:00 -0500] slyphon: which i can work around, but that kind of sucks
[2012-02-06 19:04:00 -0500] dyer: ssd7_, thank you btw for taking a min to assist
[2012-02-06 19:04:00 -0500] dyer: been a frustrating morning
[2012-02-06 19:04:00 -0500] ssd7_: dyer: np :)
[2012-02-06 19:05:00 -0500] judd7: node data I can see via chef-webui is not showing up in "knife node show" nor from a recipe.  Help?
[2012-02-06 19:05:00 -0500] judd7: running chef 0.10.8
[2012-02-06 19:05:00 -0500] Brad_K: slyphon: well, for me, either "name:*" or "name*:*" seems to work.  but i don't understand what the latter syntax is supposed to be doing that would help you over the former syntax.
[2012-02-06 19:06:00 -0500] slyphon: ok, so
[2012-02-06 19:06:00 -0500] slyphon: my issue is
[2012-02-06 19:07:00 -0500] slyphon: 'name:*' returns zero results
[2012-02-06 19:07:00 -0500] slyphon: but '*:*' returns all results
[2012-02-06 19:07:00 -0500] slyphon: so, wtf
[2012-02-06 19:07:00 -0500] Brad_K: judd7: try doing a "knife node show NODENAME -l".  That "-l" is very important  it means to show the long list of all node attributes, and not just the primary ones.
[2012-02-06 19:07:00 -0500] ssd7_: slyphon: Are you on your own chef-server or on Hosted Chef?
[2012-02-06 19:08:00 -0500] slyphon: my own
[2012-02-06 19:08:00 -0500] judd7: Thanks Brad_k - that shows it with knife node show.  But what about in recipes?
[2012-02-06 19:08:00 -0500] Brad_K: judd7: that's a lowercase "ell", in case you can't read it.
[2012-02-06 19:08:00 -0500] ssd7_: slyphon: Sorry, came to this late, but have you tried a reindex?
[2012-02-06 19:08:00 -0500] Brad_K: judd7: the full list is available at all times within recipes.  the only difference is that "knife node show" is not going to give you the long listing by default.
[2012-02-06 19:08:00 -0500] slyphon: ssd7_: yeah, did that twice
[2012-02-06 19:08:00 -0500] slyphon: i was hoping that was it too
[2012-02-06 19:09:00 -0500] judd7: Brad_K - but my recipe is bombing out with attr = nil.
[2012-02-06 19:09:00 -0500] Brad_K: slyphon: sorry, guy.  i'm afraid you have exceeded my knowledge of chef on this one.
[2012-02-06 19:09:00 -0500] judd7: maybe running 10.04 against a 10.08 chef-server?
[2012-02-06 19:10:00 -0500] Brad_K: judd7: can you give us a gist or pastebin of your recipe and an example of the error?
[2012-02-06 19:10:00 -0500] judd7: opscode have a pastebin?
[2012-02-06 19:10:00 -0500] judd7: [Mon, 06 Feb 2012 14:09:29 -0500] FATAL: TypeError: can't convert nil into String
[2012-02-06 19:11:00 -0500] Brad_K: judd7: relatively minor different versions of chef like that shouldn't be a problem.  we have a mix of 0.10.4 and 0.10.8 clients, and we're not seeing any problems on them that could be attributed to version differences.
[2012-02-06 19:11:00 -0500] judd7: :(
[2012-02-06 19:11:00 -0500] Brad_K: judd7: that's just the error.  we need context for the error.
[2012-02-06 19:11:00 -0500] judd7: yup, getting context.  thanks!
[2012-02-06 19:12:00 -0500] ssd7_: slyphon: Is it just the 'name:*' search that fails or is it anything but '*:*'
[2012-02-06 19:12:00 -0500] slyphon: seems like anything but '*:*'
[2012-02-06 19:12:00 -0500] slyphon: i just upgraded from 0.9 to 0.10
[2012-02-06 19:12:00 -0500] slyphon: the server
[2012-02-06 19:13:00 -0500] ssd7_: Hmm.  What it ever working with 0.10?
[2012-02-06 19:13:00 -0500] slyphon: it was working in 0.9, but no, not yet in 0.10
[2012-02-06 19:13:00 -0500] slyphon: should i clobber the solr data and reindex?
[2012-02-06 19:14:00 -0500] ssd7_: slyphon: Did you follow these directions (not, I haven't used these myself): http://wiki.opscode.com/display/chef/Upgrading+Chef+0.9.x+to+Chef+0.10.x#UpgradingChef0.9.xtoChef0.10.x-UpgradeChefSolrandInstallChefExpander
[2012-02-06 19:14:00 -0500] judd7: Brad_K - thanks for the "-l" tip.  I see my error.  Not index related at all.
[2012-02-06 19:15:00 -0500] judd7: library was expecting a node variable that wasn't set.
[2012-02-06 19:15:00 -0500] judd7: And didn't log a warn or err.
[2012-02-06 19:15:00 -0500] slyphon: ssd7_: *sigh*, no, i used the debs but i was rsyncing /usr/lib/chef over like a methed-out squirrel before the cutover
[2012-02-06 19:16:00 -0500] slyphon: so i'm gonna try to do this by hand now, i suppose
[2012-02-06 19:17:00 -0500] dyer: strange, seems like the issue is w/ the hash key "aliases"
[2012-02-06 19:17:00 -0500] dyer: is that reserved or something ?
[2012-02-06 19:18:00 -0500] dyer: switched to vhost and I am good
[2012-02-06 19:20:00 -0500] jbz: Can anyone explain to a Bear of Very Little Brain how arguments get passed to handlers?
[2012-02-06 19:20:00 -0500] jbz: I tried to just  copy the json-file handler, but I couldn't get my handler to accept arguments, it just dropped errors.  I'm confused now.
[2012-02-06 19:21:00 -0500] jtimberman: judd7: use whatever paste site you like.
[2012-02-06 19:21:00 -0500] jtimberman: :)
[2012-02-06 19:22:00 -0500] slyphon: still, fuck zero items found
[2012-02-06 19:22:00 -0500] slyphon: blew away /var/lib/chef/solr/data/*
[2012-02-06 19:22:00 -0500] slyphon: reindexed
[2012-02-06 19:23:00 -0500] miah: is expander running?
[2012-02-06 19:23:00 -0500] slyphon: oh god dammit
[2012-02-06 19:23:00 -0500] labria: lol
[2012-02-06 19:23:00 -0500] slyphon:  /var/cache/chef/solr/data is where the data is stored
[2012-02-06 19:23:00 -0500] slyphon: thanks "ubuntu"
[2012-02-06 19:23:00 -0500] slyphon: for making it "easier" to use "linux" you fucking OCD nightmare
[2012-02-06 19:24:00 -0500] slyphon: i think expander is running, there's zero output to the logs
[2012-02-06 19:24:00 -0500] miah: always easier to blame somebody else
[2012-02-06 19:24:00 -0500] slyphon: dude
[2012-02-06 19:25:00 -0500] miah: expanderctl ?
[2012-02-06 19:25:00 -0500] slyphon: exqueese me?
[2012-02-06 19:25:00 -0500] miah: http://wiki.opscode.com/display/chef/Chef+Indexer#ChefIndexer-ChefExpanderOperationandTroubleshooting
[2012-02-06 19:26:00 -0500] slyphon: mmmkay
[2012-02-06 19:26:00 -0500] slyphon: miah: thanks
[2012-02-06 19:26:00 -0500] miah: als
[2012-02-06 19:27:00 -0500] miah: also
[2012-02-06 19:27:00 -0500] miah: http://tickets.opscode.com/browse/COOK-985
[2012-02-06 19:27:00 -0500] Brad_K: i was wondering what Amyotrophic lateral sclerosis had to do with the subject.  ;-)
[2012-02-06 19:28:00 -0500] slyphon: hmm
[2012-02-06 19:30:00 -0500] stphung: does anyone have a good answer to how to switch out the filesystem of an ebs volume backed instance?  I'm on ext3 but want to run off of xfs.
[2012-02-06 19:31:00 -0500] slyphon: ok so expander gets zero ouptut
[2012-02-06 19:31:00 -0500] slyphon: gives
[2012-02-06 19:31:00 -0500] slyphon: with debug
[2012-02-06 19:31:00 -0500] ssd7_: dyer: Hmm, that is odd.  I don't thinking aliases should be reserved, but I'm not an expert Rubyist so I'd have to dig in a little to figure out what was going on.
[2012-02-06 19:32:00 -0500] ssd7_: s/thinking/think/
[2012-02-06 19:33:00 -0500] slyphon: hrm
[2012-02-06 19:34:00 -0500] slyphon: i'm thinking that what i should do is blow everything away, purge and reinstall
[2012-02-06 19:34:00 -0500] slyphon: then upload recipes fresh
[2012-02-06 19:34:00 -0500] slyphon: ugh
[2012-02-06 19:35:00 -0500] miah: mkfs.xfs
[2012-02-06 19:35:00 -0500] miah: pretty simple =)
[2012-02-06 19:37:00 -0500] slyphon: hrm
[2012-02-06 19:38:00 -0500] slyphon: uhh, my search_index_path is empty
[2012-02-06 19:41:00 -0500] stphung: miah:  assuming an ebs backed instance that is running ext3 mounted as the root filesystem, how would you automatically accomplish that?  I think I need a different setup for this but just wanted to know what other people did.
[2012-02-06 19:42:00 -0500] miah: i dont care enough about the root fs
[2012-02-06 19:42:00 -0500] jbz: Anyone for a handler question?  So confused. :-)
[2012-02-06 19:42:00 -0500] coderanger: jbz: Yo
[2012-02-06 19:43:00 -0500] stphung: miah:  I wish I could also not care. :)  thanks
[2012-02-06 19:43:00 -0500] jbz: coderanger: thanks.  How do arguments get passed to handlers?  I see looking at the sample json_file handler that it gets passed a 'config' argument, but where does that happen?  During the registration of the handler?  Or what?
[2012-02-06 19:43:00 -0500] coderanger: Yeah, the thing that ends up in the handlers list should (usually) be an instance of the class
[2012-02-06 19:44:00 -0500] jbz: ok, so what actually passes the config argument?
[2012-02-06 19:44:00 -0500] spicyWith: coderanger: I think the problem was how I was defining the deploy_key, does that make sense? It looked correct to me
[2012-02-06 19:44:00 -0500] jbz: I'm trying to figure out how to get arguments to my handler runs, and I'm stumped other than by writing attributes to the run_state and having it pull it out.
[2012-02-06 19:44:00 -0500] miah: i just put things that matter on a different ebs backend than /
[2012-02-06 19:45:00 -0500] jbz: that's where that config object is coming from
[2012-02-06 19:45:00 -0500] coderanger: unless you are using my weird code for loading from inside a recipe
[2012-02-06 19:45:00 -0500] jbz: ugh.
[2012-02-06 19:45:00 -0500] slyphon: um, so if my search_index_path is empty (i.e. the filesystem path is empty) that means something's messed up in my config
[2012-02-06 19:45:00 -0500] jbz: OK.
[2012-02-06 19:45:00 -0500] slyphon: ?
[2012-02-06 19:45:00 -0500] coderanger: jbz: Usually you specify them in your chef config file
[2012-02-06 19:45:00 -0500] jbz: ohhhhhh
[2012-02-06 19:45:00 -0500] stphung: miah:  do you manage your ebs volumes by hand?
[2012-02-06 19:46:00 -0500] jbz: coderanger: So if I wanted to have a handler which wrote a report out to S3, and I wanted to specify the S3 bucket on a node-by-node basis, what's my best option?
[2012-02-06 19:46:00 -0500] coderanger: Which of the many ways to deploy/install handlers are you using
[2012-02-06 19:46:00 -0500] coderanger: the handler cookbook?
[2012-02-06 19:46:00 -0500] jbz: I'm using the chef_handler cookbook
[2012-02-06 19:46:00 -0500] jbz: it doesn't seem to work in terms of live-loading
[2012-02-06 19:47:00 -0500] jbz: but it does everything else I need
[2012-02-06 19:47:00 -0500] jbz: (it seems like it *should* live load, it does the same sort of stuff you gave me in your example, but it just doesn't actually take effect until I cycle the client daemon).
[2012-02-06 19:47:00 -0500] coderanger: jbz: It doesn't do live reloading, correct, for that you need my crazier system
[2012-02-06 19:47:00 -0500] coderanger: But in that case there is an arguments attr on the LWRP
[2012-02-06 19:47:00 -0500] coderanger: https://github.com/opscode/cookbooks/blob/master/chef_handler/recipes/json_file.rb#L26
[2012-02-06 19:47:00 -0500] jbz: yeah I tried to use that but I never could get it to work right
[2012-02-06 19:48:00 -0500] jbz: I never could figure out how to access that arg value in the handler
[2012-02-06 19:48:00 -0500] coderanger: yeah, there is a reason we didn't put it in the chef_handler cookbook, live reloading is ... finicky
[2012-02-06 19:48:00 -0500] jbz: hm
[2012-02-06 19:48:00 -0500] jbz: I dunno if this would work for me anyway, the value of the bucket might have to change run-to-run
[2012-02-06 19:48:00 -0500] coderanger: jbz: The arguments are passed to your classes #new
[2012-02-06 19:48:00 -0500] jbz: sigh, complexity.
[2012-02-06 19:49:00 -0500] coderanger: Handlers can access the node object directly
[2012-02-06 19:49:00 -0500] coderanger: just store it as a node attr
[2012-02-06 19:49:00 -0500] jbz: Yeah, that's what I'm going to have to do I think
[2012-02-06 19:49:00 -0500] jbz: thanks
[2012-02-06 19:49:00 -0500] spicyWith: coderanger: should the deploy_key be in the data_bags/ directory or under cookbooks/myapp/attributes/something.json?
[2012-02-06 19:50:00 -0500] coderanger: spicyWith: I never tried it with that option, sec
[2012-02-06 19:50:00 -0500] coderanger: spicyWith: It is passed through verbatim to the deploy resource
[2012-02-06 19:50:00 -0500] coderanger: so it should just be a string
[2012-02-06 19:51:00 -0500] spicyWith: coderanger: where should I put it though?
[2012-02-06 19:51:00 -0500] coderanger: spicyWith: Put what?
[2012-02-06 19:51:00 -0500] miah: stphung: i have a few systems where i am doing that. i am working on getting them tied into chef though.
[2012-02-06 19:52:00 -0500] coderanger: The actual key data?
[2012-02-06 19:52:00 -0500] spicyWith: coderanger: the deploy_key
[2012-02-06 19:52:00 -0500] spicyWith: yes
[2012-02-06 19:52:00 -0500] coderanger: Whereever you want, a databag seems logical
[2012-02-06 19:53:00 -0500] stphung: miah:  cool thanks for the help :)
[2012-02-06 19:53:00 -0500] spicyWith: coderanger: are the data bags under data_bags treated the same as things in cookbooks/foo/attributes/default.json?
[2012-02-06 19:53:00 -0500] coderanger: No
[2012-02-06 19:53:00 -0500] coderanger: 100% unrelated
[2012-02-06 19:55:00 -0500] spicyWith: coderanger: so a deploy key for an app would be under data_bags/appname.json and in there something like {"id":"appaname", deploy_key: "laskdjflkajsdflkjasdlkj"}?
[2012-02-06 19:56:00 -0500] coderanger: spicyWith: You are probably reading a guide for the data-bag-driven (read: current) application cookbook
[2012-02-06 19:56:00 -0500] coderanger: My modified version has nothing to do with that
[2012-02-06 19:56:00 -0500] coderanger: you can't cross those streams
[2012-02-06 19:57:00 -0500] coderanger: For the LWRP you need to provide the deploy_key as an actual string, just like with the deploy resource
[2012-02-06 19:57:00 -0500] spicyWith: coderanger: fair enough. I just don't know where to place the deploy_key. I think the id error in the recipe we were seeing before is coming from the fact that the key is defined in recipe/default.rb
[2012-02-06 19:58:00 -0500] coderanger: No, it isn't, it is because I never tested deploy keys in general :)
[2012-02-06 19:58:00 -0500] spicyWith: does that make sense?
[2012-02-06 19:58:00 -0500] spicyWith: coderanger: uh oh
[2012-02-06 19:58:00 -0500] coderanger: It looks like they just won't work right now
[2012-02-06 19:58:00 -0500] coderanger: Its a ruby scoping malfunction
[2012-02-06 19:58:00 -0500] spicyWith: seriously?
[2012-02-06 19:58:00 -0500] spicyWith: FML
[2012-02-06 19:59:00 -0500] spicyWith: am I hosed?
[2012-02-06 19:59:00 -0500] coderanger: You just have to fix it :P
[2012-02-06 19:59:00 -0500] spicyWith: I've been trying to get chef to deploy this for waaay to long
[2012-02-06 19:59:00 -0500] coderanger: I think it should be new_resource.name instead of #id
[2012-02-06 20:00:00 -0500] coderanger: spicyWith: If you are in a hurry, using experimental, unreleased code is probably not the best approach :D
[2012-02-06 20:00:00 -0500] spicyWith: coderanger: I think I might need some direction. I can barely read ruby.
[2012-02-06 20:00:00 -0500] fujin: hello; morning.
[2012-02-06 20:00:00 -0500] coderanger: If you want we have a real walkthrough of a django deploy using the released versions of things
[2012-02-06 20:00:00 -0500] fujin: hello spicyWith; pong.
[2012-02-06 20:00:00 -0500] spicyWith: coderanger: I was just using what I thought was the correct and endorsed way
[2012-02-06 20:01:00 -0500] jbz: coderanger: Have time to look at a gist?  Tried what you said, and got this: https://gist.github.com/1754454
[2012-02-06 20:01:00 -0500] spicyWith: fujin: morning fujin, how was that pizza?
[2012-02-06 20:01:00 -0500] coderanger: spicyWith: Nope, its a personal side-project
[2012-02-06 20:01:00 -0500] coderanger: http://wiki.opscode.com/display/chef/Build+a+Django+Stack
[2012-02-06 20:01:00 -0500] coderanger: Thats the official way
[2012-02-06 20:01:00 -0500] coderanger: Sorry, I thought that was clear, nothing under my personal github is official anything
[2012-02-06 20:02:00 -0500] spicyWith: coderanger: ah crap
[2012-02-06 20:02:00 -0500] coderanger: That is what the next major version of the application cookbook will probably look like, but it isn't done yet
[2012-02-06 20:02:00 -0500] coderanger: I got pulled onto other projects shortly after djangocon
[2012-02-06 20:03:00 -0500] coderanger: (read: pycon eating my brain)
[2012-02-06 20:05:00 -0500] spicyWith: where is the chef-repo for that example? I had seen the example way back, but never the chef-repo
[2012-02-06 20:06:00 -0500] jtimberman: spicyWith: https://github.com/opscode/django-quick-start
[2012-02-06 20:06:00 -0500] jtimberman: is the repository for that wiki page
[2012-02-06 20:06:00 -0500] spicyWith: jtimberman: ah, yes that was the next tab over.. thanks
[2012-02-06 20:08:00 -0500] spicyWith: coderanger: and I was so close to get your code running. Any chance you could look into the deploy keys issue?
[2012-02-06 20:08:00 -0500] coderanger: Sure, just not this second, can you file a ticket on github.com/coderanger/cookbooks?
[2012-02-06 20:08:00 -0500] coderanger: (thats where the dev for that cookbook set happens)
[2012-02-06 20:08:00 -0500] coderanger: the djangocon2011 repo is just archival
[2012-02-06 20:09:00 -0500] jbz: coderanger: How am I (I'm betting) totally screwing up handling options in that handler/cookbook? I keep getting "had an error: wrong number of arguments (1 for 0)". https://gist.github.com/1754454
[2012-02-06 20:10:00 -0500] spicyWith: coderanger: sure. What timeframe do you think we're looking at - hours or days?
[2012-02-06 20:11:00 -0500] coderanger: Um, maybe tonight? I've got to get this IRC logger bot online today and I've got a captcha bug to tackle before I can move on to anything else
[2012-02-06 20:12:00 -0500] coderanger: So maybe tonight, can't really make a solid promise until I figure out why this @#$ thing won't start on a preprod server
[2012-02-06 20:14:00 -0500] fujin: =(
[2012-02-06 20:14:00 -0500] fujin: what are you using for an irc logger bot?
[2012-02-06 20:14:00 -0500] coderanger: net::yail apparently, someone else picked it
[2012-02-06 20:16:00 -0500] slyphon: holy underwear!
[2012-02-06 20:16:00 -0500] slyphon: ok, so "starting over from scratch" seemed to fix things
[2012-02-06 20:18:00 -0500] jbz: Can anybody take a look at my chef_handler argument passing and tell me how I screwed it up? :-)
[2012-02-06 20:18:00 -0500] fujin: yes
[2012-02-06 20:18:00 -0500] fujin: past it on a gist with debug error code
[2012-02-06 20:19:00 -0500] jbz: fujin: https://gist.github.com/1754454
[2012-02-06 20:19:00 -0500] fujin: if you past a gist with a single question mark I am 100% more likely to read it than reading the entire sentence prefacing any gists
[2012-02-06 20:19:00 -0500] fujin: (#justsayin)
[2012-02-06 20:19:00 -0500] jbz: (noted)
[2012-02-06 20:19:00 -0500] fujin: I LOVE GISTS
[2012-02-06 20:20:00 -0500] coderanger: oh right, IRC nicks are width-limited
[2012-02-06 20:20:00 -0500] coderanger: grrr
[2012-02-06 20:20:00 -0500] coderanger: Testing testing
[2012-02-06 20:22:00 -0500] fujin: jbz: initialize may have special context here, I fear those arguments may in fact be passed to report and not to new
[2012-02-06 20:22:00 -0500] fujin: one sec checking class
[2012-02-06 20:22:00 -0500] jbz: fujin: ahhhh
[2012-02-06 20:23:00 -0500] fujin: nope, docs say
[2012-02-06 20:23:00 -0500] fujin: should go to initializxe
[2012-02-06 20:23:00 -0500] fujin: weird. reading
[2012-02-06 20:23:00 -0500] jbz: hm.
[2012-02-06 20:23:00 -0500] jbz: I 'cargo-cult'-ed that code, so I'm totally willing to believe I'm doing needless complex and/or straight wrong things.
[2012-02-06 20:23:00 -0500] fujin: https://github.com/opscode/cookbooks/blob/master/chef_handler/providers/default.rb#L33
[2012-02-06 20:24:00 -0500] fujin: what is node[:mdsol][:temp_loc] ?
[2012-02-06 20:24:00 -0500] jbz: Yeah, I saw that, the :new is what sends the args to initialize, right?
[2012-02-06 20:24:00 -0500] jbz: oh, that's a string I'm setting in the default attrs
[2012-02-06 20:24:00 -0500] jbz: (literally, it's "/var/chef/reports"
[2012-02-06 20:25:00 -0500] jbz: fujin: If you want the full code, let me know.  I snipped what I thought was relevant to avoid overload.
[2012-02-06 20:25:00 -0500] fujin: I believe the arguments param is expecting an array
[2012-02-06 20:26:00 -0500] fujin: try arguments [ node["somethingsomething] ]
[2012-02-06 20:26:00 -0500] fujin: https://github.com/opscode/cookbooks/blob/master/chef_handler/providers/default.rb#L71
[2012-02-06 20:26:00 -0500] fujin: oh, might just work ;\
[2012-02-06 20:30:00 -0500] jbz: fujin:  Yeah, confusing...
[2012-02-06 20:31:00 -0500] fujin: hold, will test
[2012-02-06 20:31:00 -0500] fujin: on a call as well
[2012-02-06 20:34:00 -0500] Brad_K: coderanger: tell Barry "hi!" for me, if you would, please.  that is, if your brain isn't totally zombie-fied by then.  ;-)
[2012-02-06 20:34:00 -0500] coderanger: Brad_K: "by then"?
[2012-02-06 20:35:00 -0500] Brad_K: pycon?
[2012-02-06 20:35:00 -0500] coderanger: Oh, that barry
[2012-02-06 20:35:00 -0500] coderanger: There is also an Opscode barry :-)
[2012-02-06 20:35:00 -0500] Brad_K: ahh, not familiar with that Barry.  sorry for the confusion.
[2012-02-06 20:36:00 -0500] Brad_K: out of curiosity, has anyone deployed any of the nginx cookbooks found on github in the real world?  i know that the Opscode official cookbook appears to be the second most popular one they have, but i'm curious about using it for other things, like reverse proxying.
[2012-02-06 20:36:00 -0500] coderanger: PyCon may or may not kill me this year, lots of driving and my tutorial was closing in on sold-out last I heard
[2012-02-06 20:38:00 -0500] Brad_K: speaking from my own experience, it is both nice and scary to have a tutorial sold-out.  for me, i get nervous about wanting to make sure i don't let anyone down.
[2012-02-06 20:38:00 -0500] yfeldblum: Brad_K, deploying nginx as a reverse proxy using opscode's community cookbook? it has worked fine for me
[2012-02-06 20:38:00 -0500] coderanger: All my prior ones have been much more niche topics
[2012-02-06 20:38:00 -0500] Brad_K: otoh, i don't want to try to cram in so much material that everything has to be rushed through.
[2012-02-06 20:38:00 -0500] coderanger: Also I find it surprising that so many PyCon attendees are lining up to have me teach them Ruby :)
[2012-02-06 20:38:00 -0500] coderanger: but then again, I taught C last year
[2012-02-06 20:38:00 -0500] yfeldblum: Brad_K, i mean you have to write your own nginx config template
[2012-02-06 20:39:00 -0500] Brad_K: yfeldblum: yeah, i assumed i'd have to write my own template, i just wanted to get a sense of how difficult/different that is from the standard templates, preferably from someone who had actually done it.
[2012-02-06 20:39:00 -0500] slyphon: coderanger: "there should be one and only one right way to do it"
[2012-02-06 20:40:00 -0500] slyphon: coderanger: they don't tell you, the answer to that is "learn ruby"
[2012-02-06 20:40:00 -0500] fujin: ok, back
[2012-02-06 20:40:00 -0500] slyphon: i kid the python community!
[2012-02-06 20:41:00 -0500] Brad_K: slyphon: TIMTOWTDI is a philosophy that seems to have been adopted aggressively by the Ruby camp.  not so much stolen from Perl, more like completely and totally overtaken.
[2012-02-06 20:41:00 -0500] coderanger: "debugging is overrated"
[2012-02-06 20:41:00 -0500] slyphon: well
[2012-02-06 20:41:00 -0500] slyphon: Brad_K: eyyy
[2012-02-06 20:41:00 -0500] slyphon: ehhh
[2012-02-06 20:41:00 -0500] slyphon: Brad_K: not good ruby
[2012-02-06 20:41:00 -0500] Brad_K: slyphon: and that's actually the core premise of the chef tutorial that i will be doing at FLOSS UK 2012 in march.
[2012-02-06 20:41:00 -0500] slyphon: there's "best practice"
[2012-02-06 20:41:00 -0500] slyphon: and "good style"
[2012-02-06 20:42:00 -0500] fujin: jbz: one of the example files in that cookbook passes a path in a hash
[2012-02-06 20:42:00 -0500] slyphon: but it's not, you know, baked into the fuckin' language
[2012-02-06 20:42:00 -0500] fujin: jbz: https://github.com/opscode/cookbooks/blob/master/chef_handler/recipes/json_file.rb#L26
[2012-02-06 20:42:00 -0500] fujin: jbz: that file initialize method is here https://github.com/opscode/chef/blob/master/chef/lib/chef/handler/json_file.rb#L28
[2012-02-06 20:42:00 -0500] fujin: jbz: It would be my expectation that json_file handler *should* work
[2012-02-06 20:43:00 -0500] Brad_K: slyphon: that works fine for experienced practioners who know the language very well and know exactly what they want to achieve.  TIMTOWTDI is not such a good idea for people who are trying to learn.
[2012-02-06 20:43:00 -0500] slyphon: i disagree, i had to learn at some point as well
[2012-02-06 20:43:00 -0500] slyphon: you need someone experienced to show you how to use the tools
[2012-02-06 20:44:00 -0500] slyphon: i mean, ok, yes, in teh case of someone who's learning, you should not overwhelm them with the multitude of ways to concat two strings
[2012-02-06 20:44:00 -0500] Brad_K: well, then, speaking as someone who is not nearly as advanced as you are, and who therefore is closer to the problem as seen by people who are brand-new to the code/system, I would say that TIMTOWTDI was a really big hurdle that i've had problems with, and I believe that the same is true for many others.
[2012-02-06 20:45:00 -0500] slyphon: ok, but that doesn't mean that's a problem with the language
[2012-02-06 20:45:00 -0500] coderanger: Yes, this, even in Chef, node.foo vs. node[:foo] vs. node['foo']
[2012-02-06 20:45:00 -0500] coderanger: This is Wrong(tm) when it comes to language design
[2012-02-06 20:45:00 -0500] Brad_K: and not everyone has the ability to latch onto an experienced programmer who can be their mentor.
[2012-02-06 20:45:00 -0500] slyphon: coderanger: that's an API
[2012-02-06 20:45:00 -0500] slyphon: they decided to make that flexible
[2012-02-06 20:46:00 -0500] coderanger: Its a DSL, that is part of the language
[2012-02-06 20:46:00 -0500] slyphon: no
[2012-02-06 20:46:00 -0500] slyphon: that's part of *chef*
[2012-02-06 20:46:00 -0500] coderanger: Sure, and Chef is a superset of Ruby
[2012-02-06 20:46:00 -0500] slyphon: h = {:a => 2}
[2012-02-06 20:46:00 -0500] slyphon: h['a'] => nil
[2012-02-06 20:46:00 -0500] coderanger: I'm not saying its a ruby problem, just that its a problem ...
[2012-02-06 20:46:00 -0500] slyphon: i mean
[2012-02-06 20:46:00 -0500] slyphon: you're the one that is teaching C
[2012-02-06 20:47:00 -0500] coderanger: Flexibility is overrated :D
[2012-02-06 20:47:00 -0500] slyphon: well, maybe
[2012-02-06 20:47:00 -0500] fujin: I always prefered the '.' method of accessing variables
[2012-02-06 20:47:00 -0500] yfeldblum: Brad_K, not terribly hard ... bunch of tuts out there on google ... docs are available (http://wiki.nginx.org/Configuration) and examples are available (http://wiki.nginx.org/RubyonRailsMongrel)
[2012-02-06 20:47:00 -0500] fujin: fuck noobs and flexibility
[2012-02-06 20:47:00 -0500] coderanger: fujin: We know, and we love you even though you are wrong :)
[2012-02-06 20:47:00 -0500] slyphon: fujin: that's a method cal, though
[2012-02-06 20:47:00 -0500] slyphon: call
[2012-02-06 20:47:00 -0500] fujin: yeh so?
[2012-02-06 20:47:00 -0500] fujin: i like it that way
[2012-02-06 20:48:00 -0500] jbz: fujin: aigh
[2012-02-06 20:48:00 -0500] atomic-penguin: node.foo == less typing
[2012-02-06 20:48:00 -0500] jbz: fujin: I restarted the chef-client daemon for the Nth time, this time *after* adding some newlines into my file, and itworks now.
[2012-02-06 20:48:00 -0500] jbz: I'm just gonna go drink whisky.
[2012-02-06 20:49:00 -0500] jbz: Thanks for your efforts.
[2012-02-06 20:49:00 -0500] fujin: damn :\
[2012-02-06 20:49:00 -0500] fujin: np!
[2012-02-06 20:49:00 -0500] fujin: enjoy
[2012-02-06 20:49:00 -0500] fujin: scotch or bourbon?
[2012-02-06 20:49:00 -0500] coderanger: opscode-communit: welcome!
[2012-02-06 20:49:00 -0500] yfeldblum: chef does a lot of crazy stuff in the name of having a pretty DSL ...
[2012-02-06 20:49:00 -0500] Brad_K: yfeldblum: i had seen the nginx configuration page, but it had never occurred to me to look at anything related to Ruby-on-Rails or Mongrel.  those kinds of tips are exactly what i was hoping to get.  Thanks!
[2012-02-06 20:49:00 -0500] Brad_K: i don't suppose you have any additional tips?
[2012-02-06 20:49:00 -0500] fujin: Brad_K: we use nginx at Heavywater for deploying all of our app systems
[2012-02-06 20:49:00 -0500] fujin: https://github.com/heavywater/chef-app
[2012-02-06 20:50:00 -0500] fujin: it loadbalances to a unix domain socket running Unicorn, usually
[2012-02-06 20:50:00 -0500] yfeldblum: Brad_K, heh, not really, more of a set-it-up-and-done
[2012-02-06 20:50:00 -0500] fujin: sometimes Rainbows!
[2012-02-06 20:50:00 -0500] Brad_K: coderanger: so, opscode-communit is your irc thing you've been working on?  is it a handler/reporter, or something else?
[2012-02-06 20:50:00 -0500] coderanger: Brad_K: For now, just a logger
[2012-02-06 20:50:00 -0500] jesserobbins: brad_k: We know the TIMTOWTDI answer for Chef makes it hard for people just learning.
[2012-02-06 20:51:00 -0500] jesserobbins: brad_k: We're working on some ideas around making the getting started process a little more straightforward.
[2012-02-06 20:51:00 -0500] yfeldblum: my opinion: always use brackets-and-quotes for attributes (feel free to take this as incontrovertible law)
[2012-02-06 20:52:00 -0500] jesserobbins: brad_k: a "headfirst" approach, if you are familiar with the concept.
[2012-02-06 20:52:00 -0500] fujin: I believe yfeldblum opinion matches the current foodcritic rules regarding attribute accessor
[2012-02-06 20:52:00 -0500] Brad_K: jesserobbins: i understand.  i probably would never have even thought of this issue if it wasn't for certain Opscode folks.  i just hope to be able to help the community in my own way in this regard, and use the results as a feedback mechanism to the documentation.  i'll make jtimberman love me whether he wants to or not.  ;-)
[2012-02-06 20:52:00 -0500] yfeldblum: TIMTOWTDI, but in this case my way of doing it is right
[2012-02-06 20:53:00 -0500] jesserobbins: brad_k: I need to go to a meeting, but would love to hear more about this.  Can you send me your contact info, or are you around here enough that I can just find you.
[2012-02-06 20:53:00 -0500] Brad_K: jesserobbins: i'm a learn-by-doing kind of guy, and that's what i'm going to be teaching.  i actually use my logs of when i'm in #chef to fill out my timesheets, so i'm here pretty much all the time i'm at work.
[2012-02-06 20:54:00 -0500] jesserobbins: ;-)
[2012-02-06 20:54:00 -0500] slyphon: omfg, apt-get purge chef doesn't bother to check if the init.d script is a symlink or a file, so something just removed /usr/bin/sv
[2012-02-06 20:54:00 -0500] slyphon: that's *awesome*
[2012-02-06 20:54:00 -0500] jtimberman: the TIMTOWTDI of node attribute access (node.foo, node[:foo], node['foo']) is exactly why I *only* mention the node['foo'] syntax when teaching Chef Fundamentals.
[2012-02-06 20:55:00 -0500] jtimberman: If a student asks, then I will elaborate, but not too much.
[2012-02-06 20:55:00 -0500] slyphon: jtimberman: yeah, but symbols are so much more...idiomatic
[2012-02-06 20:55:00 -0500] Brad_K: single-quote, not double-quote?
[2012-02-06 20:55:00 -0500] slyphon: jtimberman: but, yes, you're right
[2012-02-06 20:55:00 -0500] jtimberman: Brad_K: either.
[2012-02-06 20:55:00 -0500] yfeldblum: double-quotes
[2012-02-06 20:55:00 -0500] slyphon: Brad_K: you really wanna teach interpolation?
[2012-02-06 20:55:00 -0500] yfeldblum: for me
[2012-02-06 20:55:00 -0500] slyphon: to n00bs?
[2012-02-06 20:55:00 -0500] jtimberman: slyphon: I do teach interpolation, ruby's #{} bits.
[2012-02-06 20:55:00 -0500] atomic-penguin: jtimberman, why in the early days of Chef did more cookbooks use the node[:foo] syntax?
[2012-02-06 20:56:00 -0500] yfeldblum: interpolation happens all the time anyway, so beginners need to learn it
[2012-02-06 20:56:00 -0500] atomic-penguin: jtimberman, why the change, is what I'm getting at?
[2012-02-06 20:56:00 -0500] jtimberman: atomic-penguin: because thats what adam and i were used to writing when doing ruby hashes.
[2012-02-06 20:56:00 -0500] slyphon: yeah
[2012-02-06 20:56:00 -0500] jtimberman: so it was "more natural" to type it
[2012-02-06 20:56:00 -0500] slyphon: symbol access in hashes is more common in pure ruby
[2012-02-06 20:56:00 -0500] jtimberman: but people who aren't rubyists don't know what the symbol syntax means.
[2012-02-06 20:56:00 -0500] jtimberman: and in chef it *really* doesn't matter.
[2012-02-06 20:56:00 -0500] slyphon: rather symbols-as-keys
[2012-02-06 20:56:00 -0500] jtimberman: because its a mash anyway
[2012-02-06 20:56:00 -0500] fujin: early chef used extlib mashes
[2012-02-06 20:57:00 -0500] jtimberman: the monster mash
[2012-02-06 20:57:00 -0500] fujin: jtimberman: technically it is a Chef::Node::Attribute /me swoons
[2012-02-06 20:57:00 -0500] Brad_K: i will tell them that they will see different methods that are actually equivalent, and i will show some examples.  i generally try to teach from real-world examples of code, so i will show them stuff from existing cookbooks, like chef-client.
[2012-02-06 20:57:00 -0500] brandoma: sour mash?
[2012-02-06 20:57:00 -0500] slyphon: :)
[2012-02-06 20:57:00 -0500] jtimberman: fujin: yes yes.
[2012-02-06 20:57:00 -0500] atomic-penguin: it was a graveyard smash
[2012-02-06 20:57:00 -0500] yfeldblum: symbols in hashes should be reserved only for specific cases, such as named parameters to methods, method names, and similar
[2012-02-06 20:57:00 -0500] fujin: It behaves kind of like a mash
[2012-02-06 20:57:00 -0500] luke_: does anyone have an idea why i might get "INFO: HTTP Request Returned 401 Unauthorized: Failed to authenticate. Ensure that your client key is valid." after creating a new node on ec2? more details: https://gist.github.com/ebd94430693f720a07bd
[2012-02-06 20:57:00 -0500] fujin: except adam and I wrote it, so yeah. much cooler
[2012-02-06 20:57:00 -0500] slyphon: yfeldblum: eh?
[2012-02-06 20:58:00 -0500] jtimberman: luke_: something wrong with the validation client key
[2012-02-06 20:58:00 -0500] fujin: luke_: check your validation key is valid and using the right name (/etc/chef/client.rb)
[2012-02-06 20:58:00 -0500] jtimberman: atomic-penguin: the change is for consistency with how we're now teaching the class.
[2012-02-06 20:58:00 -0500] luke_: fujin: will do
[2012-02-06 20:58:00 -0500] jtimberman: the use of strings for hash keys is least surprising since it generally just always works
[2012-02-06 20:58:00 -0500] jtimberman: ruby pedants: do not comment :P
[2012-02-06 20:58:00 -0500] yfeldblum: slyphon, that's my style, and so far as i am able to impose it, that is law :P
[2012-02-06 20:58:00 -0500] slyphon: yfeldblum: not...really
[2012-02-06 20:59:00 -0500] Brad_K: luke_: did you accidentally delete your "-validator" client?  and were you in the right directory tree when you issued the command?
[2012-02-06 20:59:00 -0500] slyphon: i mean, ok
[2012-02-06 20:59:00 -0500] fujin: I guess you can interp into strings for hash keys as well without resorting to send and stuff.
[2012-02-06 20:59:00 -0500] fujin: or doing sym-to-string shit.
[2012-02-06 20:59:00 -0500] slyphon: :"#{blah}_foo"
[2012-02-06 20:59:00 -0500] fujin: yeah but fuck that noise
[2012-02-06 20:59:00 -0500] yfeldblum: slyphon, it boils down to: strings as the default choice, unless there is a specific reason for a symbol over a string
[2012-02-06 21:00:00 -0500] slyphon: eh
[2012-02-06 21:00:00 -0500] slyphon: in 1.9 it's cooler anyway to use symbols
[2012-02-06 21:00:00 -0500] slyphon: { foo: 'bar' }
[2012-02-06 21:00:00 -0500] jtimberman: you can use what you want.
[2012-02-06 21:00:00 -0500] luke_: Brad_K: yes possibly i could have screwed something up there. i'll check and come back
[2012-02-06 21:00:00 -0500] slyphon: jtimberman: no no, then you can't *fight* about meaningless nonsense
[2012-02-06 21:00:00 -0500] jtimberman: but i'm going to teach new chef users strings :)
[2012-02-06 21:00:00 -0500] jtimberman: slyphon: the fucking bikeshed is green!
[2012-02-06 21:00:00 -0500] jtimberman: :)
[2012-02-06 21:00:00 -0500] slyphon: jtimberman: :D
[2012-02-06 21:00:00 -0500] jtimberman: <3
[2012-02-06 21:01:00 -0500] fujin: you can't paint bikesheds green man
[2012-02-06 21:01:00 -0500] fujin: green colorblind guys will get fucked up
[2012-02-06 21:01:00 -0500] fujin: thinking its purple or whatever
[2012-02-06 21:01:00 -0500] jtimberman: fujin: you have uncovered my plot :(
[2012-02-06 21:02:00 -0500] fujin: hehe
[2012-02-06 21:03:00 -0500] slyphon: "you have sank my battleship"
[2012-02-06 21:04:00 -0500] JasonBox: Oh, but I seem to recall using a string matters when accessing data_bags
[2012-02-06 21:04:00 -0500] fujin: sure does
[2012-02-06 21:04:00 -0500] jtimberman: yes
[2012-02-06 21:04:00 -0500] jtimberman: different kind of object ><
[2012-02-06 21:06:00 -0500] JasonBox: That's what I thought
[2012-02-06 21:06:00 -0500] JasonBox: Always used symbols everywhere else
[2012-02-06 21:06:00 -0500] JasonBox: Maybe that's a bad habbit rofl
[2012-02-06 21:06:00 -0500] Brad_K: a bad rabbit named hofl?!?  i'm confused.
[2012-02-06 21:08:00 -0500] jbz: Confuse-A-Cat!
[2012-02-06 21:12:00 -0500] yfeldblum: strings are strings; everything else is confusing and buggy
[2012-02-06 21:15:00 -0500] coderanger: testing
[2012-02-06 21:19:00 -0500] coderanger: test
[2012-02-06 21:22:00 -0500] luke_: fujin: Brad_K: as you suggested my /etc/chef/validatation.pem was wrong. thanks for pointing me in the right direction.
[2012-02-06 21:23:00 -0500] fujin: np
[2012-02-06 21:23:00 -0500] fujin: your knife bootstrap sohuld take care of shipping the validation over
[2012-02-06 21:23:00 -0500] luke_: yep, that's working now
[2012-02-06 21:23:00 -0500] fujin: ah. cool :)
[2012-02-06 21:23:00 -0500] luke_: problem before was i had an old validation.pem in /etc/chef, from when i was using hosted chef
[2012-02-06 21:23:00 -0500] fujin: ah right on
[2012-02-06 21:24:00 -0500] jbz: Is there a Chef Config item for the 'temp location' (where Chef writes temp files) or is that hardcoded by platform?
[2012-02-06 21:24:00 -0500] jbz: i.e. if I had a handler which needed a scratch loc to build some files, is there a config item I could have it use?
[2012-02-06 21:25:00 -0500] jbz: (I don't find anything that looks like it in the Chef configuration wiki page)
[2012-02-06 21:25:00 -0500] fujin: :file_cache_path ?
[2012-02-06 21:26:00 -0500] fujin: https://github.com/opscode/chef/blob/master/chef/lib/chef/config.rb#L148
[2012-02-06 21:26:00 -0500] fujin: yeh, Chef::Config[:file_cache_path]
[2012-02-06 21:26:00 -0500] fujin: go memory power!~
[2012-02-06 21:26:00 -0500] jbz: oh ok that's used for scratch space too?
[2012-02-06 21:27:00 -0500] jbz: Awesome.  Thanks.
[2012-02-06 21:27:00 -0500] fujin: yeah, I usually just make a dir under there.
[2012-02-06 21:27:00 -0500] fujin: guaranteed to exist, see? :)
[2012-02-06 21:29:00 -0500] jbz: indeeeeeed.
[2012-02-06 21:29:00 -0500] yfeldblum: ssd7, there was recently an activerecord security fix caused by activerecord overusing symbols :P
[2012-02-06 21:30:00 -0500] jbz: fujin: Is that config available directly from within a handler, or do I need to pass it in from the cookbook like is done in json_file?
[2012-02-06 21:30:00 -0500] fujin: directly in handler
[2012-02-06 21:31:00 -0500] jbz: Sweet.
[2012-02-06 21:31:00 -0500] fujin: maybe need to require 'chef/config'; unlikely though
[2012-02-06 21:36:00 -0500] silk1: Short of reading through all of the cookbooks and roles etc, is there a way to determine where an attribute has been ingerited from?
[2012-02-06 21:36:00 -0500] silk1: inherited rather
[2012-02-06 21:38:00 -0500] fujin: why would you want to
[2012-02-06 21:40:00 -0500] flashmanbahadur: the mdadm.rb provider on lines 30-32: def popen4
[2012-02-06 21:40:00 -0500] flashmanbahadur: raise Exception, "deprecated, bitches"
[2012-02-06 21:40:00 -0500] flashmanbahadur: end
[2012-02-06 21:41:00 -0500] silk: its not programatically, its just tosee where something had been setup previously
[2012-02-06 21:44:00 -0500] fujin: silk: not really sure. i know you can see the precedence level for each attribute
[2012-02-06 21:44:00 -0500] fujin: not sure if you can see where it was defined from/
[2012-02-06 21:44:00 -0500] silk: yep
[2012-02-06 21:52:00 -0500] silk: no matter, the person asking has stopped talking to me :)
[2012-02-06 21:57:00 -0500] coderanger: test
[2012-02-06 22:06:00 -0500] segv: hey guys I keep getting this merb : chef-server (api) : worker (port 4000) ~ Client already exists - (Merb::ControllerExceptions::Conflict)
[2012-02-06 22:06:00 -0500] segv: in my logs when trying to create a client
[2012-02-06 22:07:00 -0500] fujin: the client you are trying to create already exists.
[2012-02-06 22:07:00 -0500] fujin: try deleting it first
[2012-02-06 22:07:00 -0500] segv: It doesn't :\
[2012-02-06 22:07:00 -0500] segv: It does that for any client I create
[2012-02-06 22:07:00 -0500] segv: https://gist.github.com/f95967eb9718202d20bc
[2012-02-06 22:07:00 -0500] segv: more detailed log
[2012-02-06 22:08:00 -0500] segv: but when I check in mongo, it created the new client and told me it failed to
[2012-02-06 22:09:00 -0500] fujin: chef doesn't use mongodb
[2012-02-06 22:09:00 -0500] segv: bah sorry
[2012-02-06 22:09:00 -0500] segv: couch*
[2012-02-06 22:09:00 -0500] segv: dyslexic typing ;)
[2012-02-06 22:09:00 -0500] fujin: it sounds like your couchdb is broken or the wrong version
[2012-02-06 22:09:00 -0500] fujin: have you tried deleting the client and trying again?
[2012-02-06 22:09:00 -0500] segv: yeah
[2012-02-06 22:10:00 -0500] segv: "Could not delete client test_test"
[2012-02-06 22:10:00 -0500] segv: hmm
[2012-02-06 22:10:00 -0500] bmhatfield: Hi guys  I'm hoping to elicit some help understanding a very odd problem that we are having with chef.
[2012-02-06 22:10:00 -0500] segv: yeah, sounds like couchdb is being a bastage
[2012-02-06 22:11:00 -0500] bmhatfield: Has anyone seen a circumstance where obviously nonsensical strings appear in attributes/run lists, etc?
[2012-02-06 22:11:00 -0500] bmhatfield: Stored all the way up to the chef server?
[2012-02-06 22:12:00 -0500] bmhatfield: An example nonsensical string might be the runlist being replaced with recipe[flags], recipe[roles], recipe[vendor_id]
[2012-02-06 22:12:00 -0500] bmhatfield: But we don't have any cookbooks named those things
[2012-02-06 22:13:00 -0500] bmhatfield: Or entire attribute trees replaced with what appears to be the actual CODE of some chef modules?
[2012-02-06 22:15:00 -0500] bmhatfield: If this is the wrong place to get help, please let me know
[2012-02-06 22:15:00 -0500] bmhatfield: I just don't even know what information to gather to be useful at this point
[2012-02-06 22:16:00 -0500] cwj: sounds like crazy pills, i've never seen that kind of behavior
[2012-02-06 22:16:00 -0500] bmhatfield: I know it sounds like crazy pills. We are seeing all sorts of crazy behavior.
[2012-02-06 22:16:00 -0500] Brad_K: bmhatfield: this is a good place.  the only issue is that you can never be sure who's going to be logged in here at what time.
[2012-02-06 22:17:00 -0500] KarlHungus: hrm. can i 'include_recipe', or 'depends', from a cookbooks library files?
[2012-02-06 22:18:00 -0500] bmhatfield: Let me see if I can grab some examples
[2012-02-06 22:18:00 -0500] bmhatfield: We've seen this time and time again
[2012-02-06 22:19:00 -0500] bmhatfield: "yum": {
[2012-02-06 22:19:00 -0500] bmhatfield:    "{:regex=>[/^([-a-zA-Z0-9_.]+)$/, /^\\d+$/]}": null,
[2012-02-06 22:19:00 -0500] bmhatfield:    "{:group=>{:regex=>[/^([-a-zA-Z0-9_.]+)$/, /^\\d+$/]}}": null,
[2012-02-06 22:19:00 -0500] bmhatfield:    "repopath": "/pub/yum",
[2012-02-06 22:19:00 -0500] bmhatfield:    "exportpath": "/pub"
[2012-02-06 22:19:00 -0500] bmhatfield:   },
[2012-02-06 22:19:00 -0500] bmhatfield: So
[2012-02-06 22:19:00 -0500] bmhatfield: The "repopath" and "exportpath" are all that's supposed th be in there
[2012-02-06 22:20:00 -0500] bmhatfield: the other regex stuff
[2012-02-06 22:20:00 -0500] bmhatfield: just appears in there
[2012-02-06 22:21:00 -0500] bmhatfield: Those regexes are actually part of the chef code
[2012-02-06 22:21:00 -0500] bmhatfield: I think those ones are in the file class
[2012-02-06 22:21:00 -0500] segv: fujin: wasn't couchdb, was rabbitmq :)
[2012-02-06 22:21:00 -0500] segv: the password was wrong on the server end
[2012-02-06 22:21:00 -0500] segv: Fixed.
[2012-02-06 22:23:00 -0500] bmhatfield: We also had this tree we call provisioning, we had built a sort of mini provisioner based upon chef
[2012-02-06 22:23:00 -0500] bmhatfield: on one node, the tree (which was all plain strings), got overwritten to this:
[2012-02-06 22:23:00 -0500] bmhatfield: "provisioning": {
[2012-02-06 22:23:00 -0500] bmhatfield:    "{:group=>{:regex=>[/^([-a-zA-Z0-9_.]+)$/, /^\\d+$/]}}": null,
[2012-02-06 22:23:00 -0500] bmhatfield:    "not in valid numeric range": null,
[2012-02-06 22:23:00 -0500] bmhatfield:    "@provider": null,
[2012-02-06 22:23:00 -0500] bmhatfield:    "file[/usr/local/nagios/etc/nrpe.d/check_varnish.cfg]": null
[2012-02-06 22:23:00 -0500] bmhatfield:   },
[2012-02-06 22:24:00 -0500] bmhatfield: You can see it in the webui, in knife node edit, and it hurts the actual chef runs
[2012-02-06 22:25:00 -0500] bmhatfield: We have simply no idea what could be causing this. It's very intermittent
[2012-02-06 22:25:00 -0500] bmhatfield: Any advice on how to start tracking it down?
[2012-02-06 22:29:00 -0500] pbaker: Anyone run into any issue with the deploy_revision resource not showing the output of migrate_command when log = :info?
[2012-02-06 22:32:00 -0500] pbaker: it works if the log level is :debug
[2012-02-06 22:33:00 -0500] pbaker: and run_command is passed :command_log_level => :info
[2012-02-06 22:35:00 -0500] ssd7_: bmhatfield: Are you on Hosted Chef or is this your own chef server
[2012-02-06 22:35:00 -0500] bmhatfield: This is our own chef server
[2012-02-06 22:35:00 -0500] bmhatfield: Running on Centos 5.7, with Chef 0.9.18
[2012-02-06 22:36:00 -0500] bmhatfield: (We can't update to 10 quite yet due to backwards incompatible changes, though we are working on it. This issue is just too urgent to wait for that project)
[2012-02-06 22:36:00 -0500] ssd7_: Is this only in node data?
[2012-02-06 22:36:00 -0500] bmhatfield: So far, yes, it appears to be
[2012-02-06 22:38:00 -0500] jtimberman: debug log output from a chef-client exhibiting the issue?
[2012-02-06 22:41:00 -0500] bmhatfield: I have debug logs from some nodes, but because it's so intermittent I don't have logging for definitively when it came from.
[2012-02-06 22:42:00 -0500] bmhatfield: I've read through them indepth and have been unable to locate anything
[2012-02-06 22:42:00 -0500] bmhatfield: But that's without knowing when the problem occured
[2012-02-06 22:42:00 -0500] ssd7_: bmhatfield: So by intermittent, do you mean that the same node will push this data and then on the next run push good data?
[2012-02-06 22:43:00 -0500] yfeldblum: ssd7, not if the run-list is broken :P
[2012-02-06 22:43:00 -0500] bmhatfield: no, once it pushes bad data it stays broken
[2012-02-06 22:44:00 -0500] bmhatfield: What I mean is that I can't always tell when it originally pushed bad data (for instance, not in the run-list)
[2012-02-06 22:44:00 -0500] bmhatfield: One of my coworkers has a debug log that he's sending me right now of the first time a run list broke, as best as he can tell
[2012-02-06 22:44:00 -0500] bmhatfield: I'll put it on pastebin in just a moment
[2012-02-06 22:45:00 -0500] ssd7_: OK.  I would probably start by trying to recreate this on a throw away node that you can start from a clean state.
[2012-02-06 22:45:00 -0500] bmhatfield: http://pastebin.com/V6wTC1hf
[2012-02-06 22:46:00 -0500] bmhatfield: I'm not sure how to recreate it, we have about 100 nodes running chef on Centos, and one pushes bad data about once every two days.
[2012-02-06 22:47:00 -0500] |shad0w|: the data in your provisioning mash looks like it came from a lwrp
[2012-02-06 22:47:00 -0500] bmhatfield: So the odds of a given node being broken is very low  and some have never pushed bad data
[2012-02-06 22:48:00 -0500] yfeldblum: is something incorrectly assigning things to node attributes?
[2012-02-06 22:48:00 -0500] yfeldblum: node.asdf.xyz ||= file "/etc/asdf.conf"
[2012-02-06 22:50:00 -0500] bmhatfield: yfeldblum: you mean, bad in one of our cookbooks? If it were, would this not happen every run?
[2012-02-06 22:51:00 -0500] yfeldblum: yes, but perhaps in an execution path that rarely is taken?
[2012-02-06 22:51:00 -0500] bmhatfield: I'm sorry if I sound like I am being difficult, I am so grateful for help here you don't eve know
[2012-02-06 22:51:00 -0500] mlei: i'm trying to install chef-server using chef-solo bootstrap method on centos 5.7
[2012-02-06 22:51:00 -0500] yfeldblum: you've got something related to nagios and varnish in your bad node data
[2012-02-06 22:51:00 -0500] mlei: first i got an issue with gecode not finding qt, and I edited the cookbook to disable qt in the configure step
[2012-02-06 22:52:00 -0500] yfeldblum: is there anything in the nagios/varnish stuff like that?
[2012-02-06 22:52:00 -0500] bmhatfield: I will rip through them  perhaps there's a clue there actually
[2012-02-06 22:52:00 -0500] mlei: now i've gotten to building the chef-server gem and it can't find gecode. it's installed in /usr/local
[2012-02-06 22:53:00 -0500] bmhatfield: our Nagios cookbook also sometimes writes out templates where all the values within @node are blank
[2012-02-06 22:53:00 -0500] ssd7_: bmhatfield: Well, the thing about yfeldblum's hypothesis is that it as long as the attribute was set (say from some role or environment) you would be save, but say someone made a change somewhere that unset it, then the assignment would occur
[2012-02-06 22:53:00 -0500] |shad0w|: are you doing a lot of search ?
[2012-02-06 22:53:00 -0500] mlei: but from the /usr/lib64/ruby/gems/1.8/gems/dep_selector-0.0.8/ext/dep_gecode/mkmf.log , it looks like /usr/local is not in the paths that it searches
[2012-02-06 22:53:00 -0500] bmhatfield: yes, especially in the Nagios cookbook
[2012-02-06 22:53:00 -0500] bmhatfield: |shad0w|: that last line was at you
[2012-02-06 22:54:00 -0500] |shad0w|: are you making sure you are getting back data before you proceed?
[2012-02-06 22:54:00 -0500] mlei: is there a place I can tweak to make sure it looks in /usr/local for the headers?
[2012-02-06 22:56:00 -0500] bmhatfield: |shad0w|: Yes, usually, but I'll read through it more carefully
[2012-02-06 22:57:00 -0500] |shad0w|: probably why the provisioning attrib is getting set with what looks like a resource block too (IE the resource was passed null values)
[2012-02-06 23:00:00 -0500] spicyWith: jtimberman: if I follow this deployment strategy https://github.com/opscode/django-quick-start for django apps will I be able to deploy from a private git repo?
[2012-02-06 23:04:00 -0500] bmhatfield: |shad0w|: Can you rephrase that last statement?
[2012-02-06 23:04:00 -0500] bmhatfield: I'm not quite following
[2012-02-06 23:04:00 -0500] bmhatfield: Especially the stuff in the parenthesis
[2012-02-06 23:04:00 -0500] |shad0w|: what does the code look like that populates the provisioning attribute ?
[2012-02-06 23:08:00 -0500] bmhatfield: The code that populates the provisioning tree is unrelated and only runs once per node (We have a little UI for the API that populates that data)
[2012-02-06 23:09:00 -0500] bmhatfield: That tool hasn't been used for over a month at this point
[2012-02-06 23:11:00 -0500] segv: hmm
[2012-02-06 23:12:00 -0500] segv: now im getting merb : chef-server (api) : worker (port 4000) ~ Client already exists - (Merb::ControllerExceptions::Conflict) on "regenerating" the client key
[2012-02-06 23:12:00 -0500] segv: that is an issue.
[2012-02-06 23:21:00 -0500] segv: That is really frustrating
[2012-02-06 23:44:00 -0500] josh_ol: I'm using the apache2 and application cookbooks for a rails app, can anyone point me to how I should configure SSL certificates? Do I just do that all myself or do these/other existing cookbooks have a better way?
[2012-02-06 23:45:00 -0500] jtimberman: josh_ol: I'd do that in a separate cookbook
[2012-02-06 23:46:00 -0500] jtimberman: josh_ol: since those will be separate resources than those taht are managed by the application or apache2 cookbooks.
[2012-02-06 23:47:00 -0500] josh_ol: jtimberman: ok, thanks

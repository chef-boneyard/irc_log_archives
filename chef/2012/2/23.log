[2012-02-23 08:09:00 -0500] jtimberman: BryanWB: cool (tomcat), tickets open?
[2012-02-23 08:09:00 -0500] BryanWB: i think so
[2012-02-23 08:10:00 -0500] jtimberman: thanks <3
[2012-02-23 08:11:00 -0500] BryanWB: my pleasure, gnight
[2012-02-23 09:22:00 -0500] m4rcu5: good morning!
[2012-02-23 09:35:00 -0500] m4rcu5: i am trying something and i would like to get your opinion on it. I added 3 atribute to all my nodes to identify the DC, Country, City the nodes is in. but now for my resolver cookbook i would like to find the servers closest to me. what would be the best way to go about this?
[2012-02-23 09:49:00 -0500] BryanWB: that sounds challenging
[2012-02-23 09:50:00 -0500] BryanWB: u would need some geodata to convert each nodes location into coordinates
[2012-02-23 09:50:00 -0500] BryanWB: and then calculate distance, then sort according to distance, wouldn't be surprised if google maps has api for something like that, but then u r sending them your data ;)
[2012-02-23 10:05:00 -0500] m4rcu5: BryanWB: no need for geodata, we set our hostnames according to the location and i parse this hostname in baseline cookbook and set the 3 attributes
[2012-02-23 10:06:00 -0500] BryanWB: m4rcu5: but how to calculate distance?
[2012-02-23 10:06:00 -0500] nico: use a kind of 'metric'
[2012-02-23 10:06:00 -0500] nico: store it in a databag for eg
[2012-02-23 10:06:00 -0500] m4rcu5: hhmm, thats a harder one, i was thinking od searching within the same DC, then within the same city and then the same country
[2012-02-23 10:06:00 -0500] nico: it would be like a network routing table
[2012-02-23 10:07:00 -0500] nico: how many of each ?
[2012-02-23 10:07:00 -0500] nico: you can generate those metric by yourself and take network topology into account
[2012-02-23 10:08:00 -0500] nico: because a direct link will be more efficient than a multi hop link, even if the state/city is closer
[2012-02-23 10:10:00 -0500] m4rcu5: nico, it does not have to be so advanced :)
[2012-02-23 10:11:00 -0500] nico: over engineering things is what I do best ;)
[2012-02-23 10:12:00 -0500] nico: and your routing data can be poulated with http://www.rubygeocoder.com/
[2012-02-23 10:12:00 -0500] nico: (awesome lib)
[2012-02-23 10:14:00 -0500] m4rcu5: nico, but if we would only look within the same dc/ccity/country etc?
[2012-02-23 10:15:00 -0500] nico: You can do it with a precedence mechanism
[2012-02-23 10:16:00 -0500] nico: check https://github.com/ripienaar/puppet-extlookup
[2012-02-23 10:16:00 -0500] nico: the author uses a sort of "precedence resolving"
[2012-02-23 10:16:00 -0500] nico: that defines priority between arguments
[2012-02-23 10:18:00 -0500] nico: you can use this to select which attribute to use first to make your lookup & stuff
[2012-02-23 10:29:00 -0500] m4rcu5: thanks nico, i guess that also adds some real beef to the recipe, i was hoping to do it with some small statements within the book
[2012-02-23 10:50:00 -0500] m4rcu5: hhmm, reading trough the whole precedence thing, i gues it gets to big and is more based on puppet
[2012-02-23 11:44:00 -0500] tolland: in general is "environment" used to map onto a physical platform, ie datacentre-1 datacentre-2 or to a logical environment "production web platform" " test web platform" ?
[2012-02-23 11:46:00 -0500] tolland: or even have "customer-1" as the environment and have all the physical and prod/test stuff in rolls and tags?
[2012-02-23 11:46:00 -0500] thom: i'd suggest environment ought to be prod/test etc
[2012-02-23 11:46:00 -0500] thom: and then datacentres can map to roles
[2012-02-23 11:47:00 -0500] thom: but if you have customers, that could likewise be a good map to environments
[2012-02-23 12:20:00 -0500] BryanWB: ranjibd: u were right, redhat-lsb it total shit
[2012-02-23 12:20:00 -0500] BryanWB: btw, do u know much about maven?
[2012-02-23 12:21:00 -0500] BryanWB: it pulls in QT as a dependency!
[2012-02-23 12:28:00 -0500] ranjibd: BryanWB,  :-) maven .. very little man
[2012-02-23 12:34:00 -0500] BryanWB: hah, probably to your benefit
[2012-02-23 12:35:00 -0500] JasonBox: redhat-lsb bad?
[2012-02-23 12:35:00 -0500] BryanWB: the rpm pulls in millions of dependencies
[2012-02-23 12:37:00 -0500] JasonBox: Oh, nice
[2012-02-23 12:37:00 -0500] JasonBox: That's the LSB working, don't you feel it?
[2012-02-23 12:37:00 -0500] JasonBox: ;)
[2012-02-23 12:40:00 -0500] JasonBox: 60 deps
[2012-02-23 12:40:00 -0500] JasonBox: Including 132 individual references to coreutils ftw
[2012-02-23 12:40:00 -0500] JasonBox: (On FC16)
[2012-02-23 13:09:00 -0500] `brendan: morning
[2012-02-23 13:37:00 -0500] arreyder: if I wanted the ipv4 address on eth0:1 how would I go about getting it?  This is how I have done it in the past for eth0: https://gist.github.com/1892867 , but grabbing the address on eth0:1 is alluding me.  Not sure how to reference that sub interface.
[2012-02-23 13:37:00 -0500] arreyder: node[:network][:interfaces][:eth0:1][:addresses]  was my first failed guess
[2012-02-23 13:38:00 -0500] arreyder: ohai showed it labled as eth0:1 so I was hopeful that would work
[2012-02-23 13:40:00 -0500] c64: Hey!
[2012-02-23 13:40:00 -0500] c64: I'm writing a provider - How do I create a function to be called in a ruby block?
[2012-02-23 13:40:00 -0500] c64: I create a new ruby block and notify it?
[2012-02-23 13:40:00 -0500] c64: or is there are more ruby-like way?
[2012-02-23 13:41:00 -0500] c64: (and if I need to create a ruby_block, how do I pass parameters
[2012-02-23 13:44:00 -0500] BryanWB: c64: i think u can put it in libraries/default.rb but not sure
[2012-02-23 13:44:00 -0500] c64: hmmm
[2012-02-23 13:44:00 -0500] c64: OK - I'll take a look!
[2012-02-23 13:45:00 -0500] BryanWB: c64:  i have a nasty way to do it that i don't recommend
[2012-02-23 13:46:00 -0500] c64: Oy. I wish I would have known about libraries earlier -
[2012-02-23 13:46:00 -0500] c64: Now I"m going to have to rewrite my propvider....
[2012-02-23 13:46:00 -0500] BryanWB: yeah, that's what u want
[2012-02-23 13:46:00 -0500] BryanWB: http://wiki.opscode.com/display/chef/Libraries
[2012-02-23 13:47:00 -0500] plu: can I somehow reset the 'freeze state' of my cookbooks in an environment?
[2012-02-23 13:48:00 -0500] c64: ...and now, I REALLY need to learn Ruby...
[2012-02-23 13:49:00 -0500] BryanWB: c64: it's pretty rad
[2012-02-23 13:49:00 -0500] c64: let's try something:
[2012-02-23 13:49:00 -0500] c64: Ruby?
[2012-02-23 13:49:00 -0500] bawt_: Ruby is smart enough to treat it all as one hash.
[2012-02-23 13:50:00 -0500] c64: yeehaw!
[2012-02-23 13:50:00 -0500] c64: BryanWB: I'll add it to my toolbox
[2012-02-23 13:50:00 -0500] zts: arreyder: try node['network']['interfaces']['eth0:1']['addresses']
[2012-02-23 13:51:00 -0500] arreyder: zts: thanks, trying
[2012-02-23 13:52:00 -0500] c64: Any recommendations on which library to use to parse XML?
[2012-02-23 13:52:00 -0500] c64: Just need to pull one attribute
[2012-02-23 13:52:00 -0500] c64: from a document
[2012-02-23 13:52:00 -0500] BryanWB: c64: umm, rexml?
[2012-02-23 13:52:00 -0500] BryanWB: no experience there
[2012-02-23 13:52:00 -0500] c64: there are a few out there
[2012-02-23 13:53:00 -0500] arreyder: zts: perfect, thanks.  My lack of ruby skill showing.
[2012-02-23 13:53:00 -0500] c64: I'll try rexml
[2012-02-23 13:53:00 -0500] c64: thansk
[2012-02-23 13:53:00 -0500] zts: arreyder: no problems - that's why the recommendation these days is to use strings instead of symbols (the things starting with a colon) as keys for node attributes
[2012-02-23 13:54:00 -0500] arreyder: noted, will use that for now on.  Thanks for the tip.
[2012-02-23 13:54:00 -0500] zts: arreyder: some things (like colons) aren't allowed in symbols, so it doesn't work but in a non-obvious way
[2012-02-23 13:56:00 -0500] bluenemo_: hi guys, i was wondering how i could use non-hardcoded usernames in recipes (like for example:    cookbook_file "#{ENV['HOME']}/ruby_installer.tar.gz" do     i want this for example for owner or group or so.. do you have any idea? my ruby isnt that good yet sadly :/
[2012-02-23 13:57:00 -0500] BryanWB: bluenemo_: chef-client runs as root so that will always be /root/ruby_..
[2012-02-23 13:57:00 -0500] BryanWB: i would use a databag or attribute for that
[2012-02-23 13:58:00 -0500] bluenemo_: BryanWB, so far i just dont want to hardcode "bluenemo": http://pastebin.com/pF3EXYNN
[2012-02-23 13:59:00 -0500] BryanWB: bluenemo_: u want chef cache path
[2012-02-23 13:59:00 -0500] bluenemo_: sorry i dont get that BryanWB. have you got a link to that?
[2012-02-23 13:59:00 -0500] BryanWB: cookbook_file  "#{Chef::Config[:file_cache_path]}/#{tarball_name}"
[2012-02-23 14:00:00 -0500] bluenemo_: ah ok i see cool thank you :)
[2012-02-23 14:00:00 -0500] BryanWB: bluenemo_: r u trying to unpack a tarball?
[2012-02-23 14:00:00 -0500] BryanWB: to a given location?
[2012-02-23 14:00:00 -0500] bluenemo_: but i was more concerned with not calling the user (yes i am - already works) by its name but his id or so
[2012-02-23 14:00:00 -0500] bluenemo_: yes
[2012-02-23 14:00:00 -0500] BryanWB: pls consider using ark https://github.com/bryanwb/cookbooks/tree/master/ark
[2012-02-23 14:01:00 -0500] bluenemo_: ah this one looks cool thank you i'll look into it. however any idea for my user stuff? user id 1000 would be already fine i guess
[2012-02-23 14:02:00 -0500] BryanWB: erm not sure
[2012-02-23 14:06:00 -0500] BryanWB: there are ruby posix commands for querying /etc/passwd
[2012-02-23 14:07:00 -0500] bluenemo_: ah ok cool. i've got cat /etc/passwd | grep "x:1000" | sed  's/:.*//' in bash for that but my ruby is still very basic :) i thought about declaring a variable like that, like     username = `$(cat /etc/passwd | grep "x:1000" | sed  's/:.*//')`
[2012-02-23 14:08:00 -0500] BryanWB: i think there is a ruby lib that is much more elegant, `require 'etc'` i think
[2012-02-23 14:14:00 -0500] seancribbs: has anyone built a bootstrap for smartos yet?
[2012-02-23 14:15:00 -0500] seancribbs: if not, i might
[2012-02-23 14:15:00 -0500] seancribbs: i suppose it might be more complicated than that since pkgin is kind of rudimentary
[2012-02-23 14:16:00 -0500] seancribbs: need a package provider for it :/
[2012-02-23 14:22:00 -0500] gchristensen: hi, I'm trying to install my first cookbook, `git`, but I'm getting dependency errors: "ERROR: Cookbook git depends on cookbook runit version >= 0.0.0 which is not currently being uploaded and cannot be found on the server." - my reaction was to add runit and upload again,but now it depends on yum, which makes no sense to me - its an Ubuntu server
[2012-02-23 14:22:00 -0500] gchristensen: here's a paste of all the output: https://gist.github.com/76b3cdfe5a90ac9d3432
[2012-02-23 14:29:00 -0500] ranjibd: gchristensen, edit the git coobook's metadata section .. remove the depends section
[2012-02-23 14:30:00 -0500] mattray: gchristensen: the dependency doesn't mean that anything is going to be installed
[2012-02-23 14:30:00 -0500] ranjibd: gchristensen, also remove the include_recipe "yum", in case its present inside the recipe
[2012-02-23 14:30:00 -0500] ranjibd: yeah.. but it does expect it to be present and downloaded .. in the client
[2012-02-23 14:30:00 -0500] mattray: it just means that the git cookbook may require the use of the yum cookbook in some cases. Definitely not if you're on Ubuntu
[2012-02-23 14:31:00 -0500] gchristensen: ok, but so installing the yum cookbook would allow me to move to an RPM-based *nix if I chose, but won't have any ill effects on my cookbooks or servers?
[2012-02-23 14:32:00 -0500] ranjibd: exactly
[2012-02-23 14:32:00 -0500] ranjibd: its there to make the cookbook cross platform ..
[2012-02-23 14:32:00 -0500] ranjibd: :0-) chef goodness
[2012-02-23 14:32:00 -0500] mattray: the git cookbook supports debian, ubuntu, arch and centos, so if the cookbooks you're using are well-written you should be able to easily move between Ubuntu and CentOS for example
[2012-02-23 14:32:00 -0500] gchristensen: wonderful, thank you
[2012-02-23 14:32:00 -0500] mattray: most of the Opscode-maintained cookbooks are meant to be cross-platform for the most part
[2012-02-23 14:33:00 -0500] mattray: so you can do a Tomcat stack on RHEL 5.6 and Ubuntu 10.04 with no changes
[2012-02-23 14:33:00 -0500] mattray: for example
[2012-02-23 14:33:00 -0500] gchristensen: makes sense to me, I guess I was just surprised to see it as a dependency and not something provided in core... or something. Makes sense now though. thank you
[2012-02-23 14:35:00 -0500] mattray: a lot of cookbooks aren't included in Chef itself so they can be versioned and maintained outside the Chef release cycle
[2012-02-23 14:35:00 -0500] mattray: same with knife plugins
[2012-02-23 14:50:00 -0500] TheBeast: so I was going through the archives on the chef mailing list and I came across this email suggesting that the omnibus build system will be rewritten in ruby sometimes soon
[2012-02-23 14:50:00 -0500] TheBeast: is this actually true?
[2012-02-23 14:50:00 -0500] mattray: yes
[2012-02-23 14:51:00 -0500] TheBeast: is there a repo for this?
[2012-02-23 14:51:00 -0500] mattray: omnibus was written in Clojure, which isn't the most accessible language
[2012-02-23 14:51:00 -0500] mattray: currently private, but it will be Open Sourced
[2012-02-23 14:51:00 -0500] mattray: btm mentioned it in the Food Fight podcast
[2012-02-23 14:52:00 -0500] TheBeast: okay
[2012-02-23 14:52:00 -0500] TheBeast: if it will be opensourced that's cool
[2012-02-23 14:52:00 -0500] TheBeast: that clojure based build system gave me headaches
[2012-02-23 14:52:00 -0500] mattray: omnibus-ruby is being used to generate Opscode Private Chef installers, so when we open source it it will be for making Open Source Chef Server installers too
[2012-02-23 14:53:00 -0500] mattray: in addition to the Full Stack Client
[2012-02-23 14:56:00 -0500] TheBeast: sounds good
[2012-02-23 14:57:00 -0500] abrookins: i'm using chef-solo v. 0.9.18 on an ubuntu 10.04 system. i have a cookbook that defines a cookbook_file resource near the top of the file and near the bottom a service that subscribes to the cookbook_file using the syntax 0.9.8 & previous subscribes syntax (which the docs say is supported by all chef versions...) and resources(). when i run chef-solo i get an error that the resource is not defined. can i not define the resource in the same file, before i defi
[2012-02-23 14:59:00 -0500] TheBeast: I find that mass deploying chef-client is a royal pita at the moment. the omnibus generated packages work as espected on most of the platforms I tested so far
[2012-02-23 14:59:00 -0500] TheBeast: but what if we want to modify it :)
[2012-02-23 15:03:00 -0500] atomic-penguin: TheBeast, http://github.com/opscode/omnibus
[2012-02-23 15:04:00 -0500] atomic-penguin: TheBeast, although it is kind of a royal pain to build.  AFAIK, you need a build host for each type of package you wish to build
[2012-02-23 15:05:00 -0500] TheBeast: atomic-penguin: I played around with that yesterday
[2012-02-23 15:05:00 -0500] TheBeast: it just didn't build
[2012-02-23 15:05:00 -0500] TheBeast: and my clojure skills are not sufficient to troubleshoot what's going on
[2012-02-23 15:05:00 -0500] atomic-penguin: TheBeast, I feel your pain
[2012-02-23 15:06:00 -0500] TheBeast: so going the package manager way at least on RHEL/CentOS is a PITA, going to omnibus way is a pita as well
[2012-02-23 15:07:00 -0500] atomic-penguin: TheBeast, like you said its not a pain to use the pre-built packages.  What do you need to modify in Omnibus that isn't meeting your requirements?
[2012-02-23 15:27:00 -0500] BryanWB: TheBeast: what is your problem on centos/rhel? it is working for me quite smoothly
[2012-02-23 15:28:00 -0500] gmcinnes: howdy chefs
[2012-02-23 15:45:00 -0500] tolland: as chef-client needs to be run by root, is there any value to moving is to /usr/sbin ?
[2012-02-23 16:06:00 -0500] atomic-penguin: tolland, I would think you'd still have to symlink it to /usr/bin if you use chef-client as a daemon.  It was hardcoded as /usr/bin/chef-client in several places, don't know if that has changed
[2012-02-23 16:37:00 -0500] jtimberman: FYI: https://twitter.com/#!/opscode/status/172721684514738176
[2012-02-23 16:38:00 -0500] ivey: "Chef Fundamentals source repository open source on GitHub: http://bit.ly/cheffnd4 #opschef #training #opensource (via @jtimberman)"
[2012-02-23 16:38:00 -0500] ivey: cool
[2012-02-23 16:40:00 -0500] hoover_damm: in otherwords... https://github.com/opscode/chef-fundamentals
[2012-02-23 16:40:00 -0500] hoover_damm: very cool
[2012-02-23 16:40:00 -0500] hoover_damm: all markdown
[2012-02-23 16:41:00 -0500] hoover_damm: thank you for embracing a free format that anyone can use easily...
[2012-02-23 16:46:00 -0500] atomic-penguin: jtimberman, sweet!
[2012-02-23 16:47:00 -0500] tolland: errr.. just a quickie.. is there a way to dump the list of resources managed by chef from knife?
[2012-02-23 16:47:00 -0500] ivey: tolland: by resources do you mean nodes?
[2012-02-23 16:47:00 -0500] tolland: im guess that list might be per-chef-client evaluation so not stored
[2012-02-23 16:48:00 -0500] ivey: oh, like actual resources on the clients?
[2012-02-23 16:48:00 -0500] tolland: ivey: nope, I am interested whether one of my recipes has messed with the iptables on a dev box.
[2012-02-23 16:48:00 -0500] ivey: ah
[2012-02-23 16:49:00 -0500] hoover_damm: well quickest way to find that out is to login to said box and review the chef log file
[2012-02-23 16:49:00 -0500] hoover_damm: the chef-server (unless this is a feature i'm unaware of) doesn't store the logs
[2012-02-23 16:50:00 -0500] hoover_damm: so you can review the indexes for said node and if you have a attribute file that dumps your iptables
[2012-02-23 16:52:00 -0500] Brad_K: one of the things we do is have an rsyslog process set up to suck in the contents of /var/log/chef/client.log on each of the chef clients and squirt that over to our rsyslog server.  from there, we can see all the chef log files from all the machines.
[2012-02-23 16:54:00 -0500] gchristensen: I'm setting up my first roles, and when setting up the database cookbook, it says to do: mysql_connection_info = {:host => "localhost", :username => 'root', :password => node['mysql']['server_root_password']} (I put this in my roles/database.rb file) when I try to run `knife role from file roles/database.rb` it complains: Exception: NameError: undefined local variable or method `node' for #<Chef::Role:0x10e57f990> - am I not supposed to put this
[2012-02-23 16:54:00 -0500] Brad_K: but since the iptables state might not be recorded as part of the chef-client run, the real way to check would be to get a copy of the iptables state before the chef run, and a copy after the chef run, and see if there are any differences.
[2012-02-23 16:58:00 -0500] hoover_damm: looks like the iptables cookbook only is there to set it up.  Not really suck em down
[2012-02-23 16:58:00 -0500] hoover_damm: (e.g. having an attribute run iptables-save and then have it indexed)
[2012-02-23 16:58:00 -0500] Brad_K: if it did, that could be a nightmare in terms of how much additional data you'd be storing per node.  yipes!
[2012-02-23 16:59:00 -0500] ssd7: Ohai Chefs
[2012-02-23 16:59:00 -0500] hoover_damm: what's worse is we're talking ruby and json
[2012-02-23 16:59:00 -0500] hoover_damm: so that's super bloat city
[2012-02-23 16:59:00 -0500] hoover_damm: but gimme my data so yum!
[2012-02-23 16:59:00 -0500] Brad_K: i'm confused.  what the hell would yum do with that data?  ;-)
[2012-02-23 17:00:00 -0500] hoover_damm: likely convert it to a rpm for the hell of it.
[2012-02-23 17:00:00 -0500] Brad_K: no, that would be fpm.  you'd need that before yum could do anything with it.  ;-)
[2012-02-23 17:01:00 -0500] hoover_damm: you don't /need/ fpm for anything
[2012-02-23 17:01:00 -0500] hoover_damm: rpmbuild can do it all
[2012-02-23 17:01:00 -0500] hoover_damm: it's just why would you want to write the spec and ...
[2012-02-23 17:01:00 -0500] Javin: anyone here familiar with how chef and solr interact? I have an odd issue that has forced me to change many of my node searches from relying on hostname to relying on fqdn.
[2012-02-23 17:02:00 -0500] Javin: Basically, I have two nodes that show up in most normally places, but are invisible when I search by hostname. If i search by fqdn they show up fine.
[2012-02-23 17:02:00 -0500] Javin: chef > puts node["hostname"]
[2012-02-23 17:02:00 -0500] Javin: vmhost1
[2012-02-23 17:02:00 -0500] Javin:  => nil
[2012-02-23 17:02:00 -0500] Javin: chef > search(:node, "hostname:vmhost1")
[2012-02-23 17:02:00 -0500] Javin:  => []
[2012-02-23 17:02:00 -0500] Brad_K: *crickets*
[2012-02-23 17:03:00 -0500] hoover_damm: has it run chef yet?
[2012-02-23 17:03:00 -0500] Brad_K: Javin: speaking only for myself, I'm a Hosted Chef customer, so that's not something I'm familiar with.
[2012-02-23 17:03:00 -0500] hoover_damm: and if you can find it by fqdn, and not by hostname
[2012-02-23 17:03:00 -0500] hoover_damm: look up what the record is in the fqdn, and check out what the hostname is
[2012-02-23 17:04:00 -0500] Javin: It has run chef many times. It is a regular node. It was a fluke I noticed this. 2 nodes (vmhost1 and vmhost2) were missing from my monitoring host and this was why.
[2012-02-23 17:04:00 -0500] tolland: yeah, make sure it has had a successful run, i spent a good few hours last week head scratching over why none of the run_lists and roles matched for my new instances
[2012-02-23 17:04:00 -0500] hoover_damm: Javin, then likely the hostname is being indexed incorrectly
[2012-02-23 17:05:00 -0500] hoover_damm: Javin, load up shef and search for it by fqdn and look at the hostname value
[2012-02-23 17:05:00 -0500] hoover_damm: I bet it's not vmhost1
[2012-02-23 17:05:00 -0500] Javin: The nodes behave perfectly fine otherwise and running ohai on the nodes shows the hostname.
[2012-02-23 17:05:00 -0500] hoover_damm: I didn't say run ohai
[2012-02-23 17:05:00 -0500] Javin: hoover_damm: one sec, let me see what that shows
[2012-02-23 17:08:00 -0500] Javin: hoover_damm: actually it looks good ( "hostname"=>"vmhost1" )
[2012-02-23 17:10:00 -0500] geekbri: does knife.ssh not honor the .ssh/config file ?
[2012-02-23 17:10:00 -0500] Javin: hoover_damm: and I suppose I should have known that, because the initial issue was that a search(:node, "hostname:*") does not return these to hosts, but a search(:node, "fqdn:*") does
[2012-02-23 17:12:00 -0500] Javin: s/to/two
[2012-02-23 17:13:00 -0500] hoover_damm: search(:node, "hostname:desolation") => [node[desolation.livid.dk]] 
[2012-02-23 17:14:00 -0500] hoover_damm: Javin, right, Hosted chef or your own server?
[2012-02-23 17:14:00 -0500] Javin: hoover_damm: my own server (10.6) and in production with about 20 hosts at the moment.
[2012-02-23 17:16:00 -0500] hoover_damm: Javin, rebuild your indexes hopefully should help then
[2012-02-23 17:17:00 -0500] Javin: hoover_damm: Are you referring to the sold indexes?
[2012-02-23 17:17:00 -0500] Javin: s/sold/solr
[2012-02-23 17:17:00 -0500] hoover_damm: Javin, correct
[2012-02-23 17:18:00 -0500] Javin: hoover_damm: ok, I'll give that a try. Thanks a lot for your help
[2012-02-23 17:25:00 -0500] maek: how does one create the environments.rb from the environments.json ? I want to make a node attribute that is a hash but I can only grok how to express that in ruby. also end result is a versioned file so I assume the .rb would be the way to go.
[2012-02-23 17:46:00 -0500] alex____: Hi - Anyone can help me with Cookbook attributes?  Is it possible to create attributes in a different file then default.rb?  Could I have attributes in a file named $cookbook/attributes/server_attributes.rb  and have the attributes loaded only in recipe server.rb?  Basically I want to create different attributes values for different recipes within a cookbook.  - Thanks !!
[2012-02-23 17:48:00 -0500] gchristensen: alex____: check out this page on attributes: http://wiki.opscode.com/display/chef/Attributes
[2012-02-23 17:50:00 -0500] alex____: Thank you gchristensen.  I read the wiki but can't find information regarding what I want to do.
[2012-02-23 17:50:00 -0500] gchristensen: unfortunately I'm as ignorant as they come about Chef, so good luck :)
[2012-02-23 17:50:00 -0500] tolland: i dont think there a recipe context, in the sense that if you did default["mything"]["myvalue"] in one recipe and the same in another, they would just write over each other
[2012-02-23 17:51:00 -0500] cwj: alex____: what you're describing is generally the use case for roles
[2012-02-23 17:53:00 -0500] cwj: if you really need a different set of values for server vs client by default and dont want to or can't use roles, i think you'll have to do some duplication
[2012-02-23 17:53:00 -0500] cwj: eg node['foo']['bar'] and node['foo']['server']['bar']
[2012-02-23 17:54:00 -0500] cwj: or node['foo']['client']['bar'] and node['foo']['server']['bar']
[2012-02-23 17:55:00 -0500] tolland: is there an idiom for regex for for value in a file, and conditionally updating and restarting a service with the service resource?
[2012-02-23 17:56:00 -0500] alex____: cwj ok thanks!
[2012-02-23 17:56:00 -0500] cwj: yeah its my understanding that splitting up cookbook attributes across files is done for ease of human consumption
[2012-02-23 17:59:00 -0500] alex____: cwj Would be nice to be able to load attribute files as we load recipes but the current setup works fine for me. thank you again!
[2012-02-23 17:59:00 -0500] cwj: you bet
[2012-02-23 18:02:00 -0500] mml: is there a way to get knife to dump stack on error?
[2012-02-23 18:02:00 -0500] mml: -V doesn't seem to do it
[2012-02-23 18:03:00 -0500] mml: ah, derp, -VV
[2012-02-23 18:19:00 -0500] cwj: tolland: not sure what you mean, can you explain in more detail?
[2012-02-23 18:22:00 -0500] jbz: tolland:  If I understand what you're asking, you could make the action of the service resource be :restart and give it an only_if with the regex in it?
[2012-02-23 18:22:00 -0500] jbz: Then you'd just have to remember to call it specifically with :enable and :start via a notify when it's first being set up, maybe from whatever resource installs the service software.
[2012-02-23 18:23:00 -0500] ank: is there a knife plugin for parallel knife bootstrap or server create? I swear I saw that somewhere last week and now I can't find it
[2012-02-23 18:24:00 -0500] mlei: hi guys. I'm running into a problem where one of my nodes doesn't show up searching for the _default environment, but knife node show does show it in that environment
[2012-02-23 18:24:00 -0500] mlei: i did a knife index rebuild, and i ended up with the same results
[2012-02-23 18:24:00 -0500] mlei: the node is a windows node, but i'm not sure if that's related
[2012-02-23 18:33:00 -0500] |shad0w|: mlei, are you on hosted chef or running your own server?
[2012-02-23 18:34:00 -0500] mlei: own server.
[2012-02-23 18:34:00 -0500] |shad0w|: http://tickets.opscode.com/browse/CHEF-2346
[2012-02-23 18:34:00 -0500] |shad0w|: might be a good place to start
[2012-02-23 18:34:00 -0500] mlei: ah. yes. this looks like it might be the issue.
[2012-02-23 18:34:00 -0500] mlei: can i work around this by disabling ohai plugins to reduce the amount of data
[2012-02-23 18:34:00 -0500] |shad0w|: probalby
[2012-02-23 18:48:00 -0500] atomic-penguin: install?
[2012-02-23 18:48:00 -0500] bawt_: install is very easy
[2012-02-23 18:48:00 -0500] atomic-penguin: omnibus?
[2012-02-23 18:48:00 -0500] bawt_: omnibus is a project for building full-stack packages for a variety of platforms, and is used to build the 'chef-full' packages downloaded from http://opscode.com/chef/install or with http://opscode.com/chef/install.sh
[2012-02-23 18:49:00 -0500] ssd7: Javin: Still around?  If so, check out the same bug that |shad0w| linked to above: http://tickets.opscode.com/browse/CHEF-2346
[2012-02-23 18:50:00 -0500] Javin: ssd7: Thanks. I'll look at it. re-indexing did not seem to help the issue.
[2012-02-23 18:51:00 -0500] Javin: ssd7: From an initial glance this might make sense as the affected systems are my 2 KVM host servers..
[2012-02-23 18:52:00 -0500] AntonZ: hello, i've installed ntp cookbook and it works and syncronizes the time on my instance, however the time is still 3 hours ahead, looks like it's EST, how do i set it to be PST ?
[2012-02-23 18:53:00 -0500] atomic-penguin: AntonZ, change your timezone file
[2012-02-23 18:53:00 -0500] AntonZ: i would like to automate the process, i dont want to change it manually
[2012-02-23 18:53:00 -0500] atomic-penguin: /etc/timezone
[2012-02-23 18:53:00 -0500] AntonZ: do i just sed it ?
[2012-02-23 18:54:00 -0500] atomic-penguin: So template it out in chef
[2012-02-23 18:54:00 -0500] AntonZ: only if i was rubby developer :)
[2012-02-23 18:54:00 -0500] ssd7: AntonZ: I believe that there is a community timezone cookbook that you could use as a starting place.
[2012-02-23 18:55:00 -0500] AntonZ: ah let me see if i can google it, i couldnt find anything yesterday though
[2012-02-23 18:55:00 -0500] gchristensen: AntonZ: if you're depending on Chef, you're going to have to write some ruby some day :)
[2012-02-23 18:55:00 -0500] AntonZ: hey, it's my 3rd week and im learning as much as i can, pretty cool stuff i must admit, like it alot
[2012-02-23 18:56:00 -0500] ssd7: AntonZ: http://community.opscode.com/cookbooks/timezone <- Seems like a reasonable starting place
[2012-02-23 18:56:00 -0500] ssd7: It is ubuntu specific though
[2012-02-23 18:56:00 -0500] AntonZ: yes, i saw that im on centos/redhat
[2012-02-23 18:57:00 -0500] gchristensen: AntonZ: perhaps you could alter it to work on centos? http://community.opscode.com/cookbooks/timezone/source I doubt it would be difficult
[2012-02-23 18:57:00 -0500] ssd7: Shouldn't be to hard to adjust.  Setting a timezone file is a pretty good "small" task you can use to learn about recipes and templates
[2012-02-23 18:59:00 -0500] AntonZ: cheers guys! looking
[2012-02-23 19:09:00 -0500] Javin: ssd7 & hoover_damm: increasing maxFieldLength 10-fold to 100000 in solrconfig.xml, restarting, and then rebuilding indexes. seems to have fixed the issue for now. A bit scary that this can happen, silently, when searches are relied so much for critical dynamically built config files (monitoring and backups being examples). I'll add some notes to the ticket: CHEF-2346
[2012-02-23 19:13:00 -0500] AntonZ: hehe, /etc/timezone does not even exist on my instance
[2012-02-23 19:16:00 -0500] ssd7: Javin: Glad that worked out.  In the future chef-solr will warn about small values of this config value: http://tickets.opscode.com/browse/CHEF-2927  Still not ideal but hopefully it will help people identify the problem more quickly
[2012-02-23 19:17:00 -0500] AntonZ: what does this do: notifies :run, 'bash[dpkg-reconfigure tzdata]'
[2012-02-23 19:17:00 -0500] AntonZ: does it execute debian package installation for tzdata ?
[2012-02-23 19:18:00 -0500] jbz: AntonZ:  That calls the named bash resource with attribute :run whenever the resource it is attached to fires (i.e. not whenever it's hecked, btu only if it carries out an action)
[2012-02-23 19:19:00 -0500] jbz: AntonZ:  In that case, it calls the built-in dpkg function to 'reconfigure' (run the configuration part of the dpkg script) for tzdata.
[2012-02-23 19:19:00 -0500] jbz: It doesn't install it.
[2012-02-23 19:23:00 -0500] ssd7: AntonZ: Note that if you are centos/rhel you will likely want to look up how this is typically done in that environment.  I believe you may want to check out /etc/localtime
[2012-02-23 19:28:00 -0500] AntonZ: well, i thought that notifies :run, 'bash[dpkg-reconfigure tzdata]' - actually installs the package, but looks like the instance already have that installed, so i need to change template "/etc/timezone" to /etc/localtime
[2012-02-23 19:29:00 -0500] AntonZ: actaully... i think ill just go script bash way - and do this ln -s /usr/share/zoneinfo/America/Los Angeles /etc/localtime
[2012-02-23 19:44:00 -0500] flashmanbahadur: what is the purpose/usage of     new_resource.updated_by_last_action(true)
[2012-02-23 19:44:00 -0500] flashmanbahadur: what reads that, and why is it important?
[2012-02-23 19:47:00 -0500] gchristensen: is there any documentation to using the `database` cookbook without the `application` cookbook?
[2012-02-23 19:50:00 -0500] ssd7: flashmanbahadur: A number of things use that.  Perhaps most importantly, I believe it is used by chef to determine whether a notifications are triggered or not
[2012-02-23 19:51:00 -0500] flashmanbahadur: ok, so it should be good practice to add that in to custom providers?
[2012-02-23 19:52:00 -0500] gchristensen: also ssd7, jtimberman was mentioning that you knew of some bugs using ec2 and bootstrapping, do you know if its possible to store --sudo and --ssh-user in the knife.rb file as defaults, so when I use `knife ec2 server create` it automatically uses those settings? (since all my servers are ubuntu)
[2012-02-23 19:52:00 -0500] ssd7: flashmanbahadur: yes, best to set it if you can
[2012-02-23 19:52:00 -0500] flashmanbahadur: ssd7: ok thanks
[2012-02-23 19:54:00 -0500] gchristensen: ssd7: here's my relevant knife.rb, with what I was hoping would work: https://gist.github.com/01b59637cb7401f4c49b
[2012-02-23 19:54:00 -0500] ssd7: gchristensen: Unfortunately, I don't think you can set those in knife.rb yet.
[2012-02-23 19:55:00 -0500] gchristensen: that's a bummer, but alright - thank you
[2012-02-23 19:56:00 -0500] ssd7: gchristensen: I may be wrong about at least one of those however, double checking now.  Improving the story around command-line vs config file options is on my personal wish list for chef 11
[2012-02-23 19:57:00 -0500] gchristensen: ssd7: I like the sounds of that. this is perhaps completely unrelated, but as a new user I find it difficult to figure out from all the README's where exactly I need to be putting their configuration options, but that's probably just a noob's problem :)
[2012-02-23 20:00:00 -0500] ssd7: gchristensen: If you are 0.10.8 it looks like knife[:ssh_user] = "bob" should work in knife.rb
[2012-02-23 20:01:00 -0500] ssd7: Ahh
[2012-02-23 20:01:00 -0500] ssd7: ok, so that will work when using knife ssh, but not knife ec2 I think
[2012-02-23 20:05:00 -0500] gchristensen: yeah
[2012-02-23 20:06:00 -0500] gchristensen: ssd7: you probably know this already, but it seems the only one that needs to be exposed is `:ssh_user`, as https://github.com/opscode/knife-ec2/blob/master/lib/chef/knife/ec2_server_create.rb#L267 seems to use sudo if its a non-root user
[2012-02-23 20:07:00 -0500] ssd7: gchristensen: It looks like jessica recently opened a bug to get ssh_user working in knife-ec2 http://tickets.opscode.com/browse/KNIFE_EC2-50
[2012-02-23 20:09:00 -0500] gchristensen: ssd7: wonderful, how often are releases made, roughly?
[2012-02-23 20:10:00 -0500] ssd7: ssd7: Hard to say for knife-ec2 unfortunately.
[2012-02-23 20:10:00 -0500] ssd7: gchristensen: ^
[2012-02-23 20:11:00 -0500] gchristensen: understood. thank you for your help
[2012-02-23 20:20:00 -0500] gmcinnes: here's something a bit off topic, but puzzling me.  Every 2 hours, something slays one of my machines.  It's not something that's started by cron, and whatever it is doesn't last long enough for it to be obvious in top.  How can I identify it?
[2012-02-23 20:21:00 -0500] ssd7: Sure it isn't chef-client :)
[2012-02-23 20:21:00 -0500] ssd7: ?
[2012-02-23 20:22:00 -0500] KarlHungus: gmcinnes: dtrace, if you've got it. maybe retrofit pt-stalk with a OS check too
[2012-02-23 20:22:00 -0500] gmcinnes: Oh! The Humanity!
[2012-02-23 20:22:00 -0500] jtimberman: gmcinnes: did you use a chaos monkey?
[2012-02-23 20:24:00 -0500] gmcinnes: if its a chaos monkey, it has a strange attractor with a 2 hr perodicity :)
[2012-02-23 20:24:00 -0500] KarlHungus: gmcinnes: sar is also your friend
[2012-02-23 20:31:00 -0500] AntonZ: has anyone isntalled gitweb with chef ? i already have git installed, just need to add gitweb
[2012-02-23 20:32:00 -0500] gmcinnes: I looked at sar.  It seems easy to get global stats like cpu usage, but not so easy to interrogate processes :( oh well.
[2012-02-23 20:32:00 -0500] gchristensen: AntonZ: https://github.com/cookbooks/gitweb
[2012-02-23 20:33:00 -0500] Brad_K: gmcinnes: looks like there are some potentially useful tools referenced at http://www.mysqlperformanceblog.com/2009/09/14/systemtap-dtrace-for-linux/
[2012-02-23 20:33:00 -0500] AntonZ: GCRistensen - thank you much! thats wonderful :)! checking it out now!
[2012-02-23 20:36:00 -0500] gmcinnes: oh, wonder of wonders, systemtap is actually available for this ancient centos!
[2012-02-23 20:36:00 -0500] gmcinnes: ok. off I go.
[2012-02-23 20:36:00 -0500] KarlHungus: Brad_K: oracle announced dtrace for linuxes https://blogs.oracle.com/linux/entry/new_beta_release_of_dtrace
[2012-02-23 20:36:00 -0500] Brad_K: cool!
[2012-02-23 20:38:00 -0500] Brad_K: according to the one and only post at https://forums.oracle.com/forums/ann.jspa?annID=1753 (dated Feb 22, 2012 10:38 AM), " The work is still in technology preview status."
[2012-02-23 20:39:00 -0500] gmcinnes: psacct ftw
[2012-02-23 20:40:00 -0500] Brad_K: the unofficial dtrace port (see ftp://crisp.dyndns-server.com/pub/release/website/dtrace ) goes back to 2008, but was updated as recently as 2012-02-11.
[2012-02-23 20:41:00 -0500] mml: has anyone had any luck w/ knife-rackspace?
[2012-02-23 20:41:00 -0500] jordan_c: AntonZ I just saw the scrollup, minus a bit where I disconnected, I modified that cookbook to do timezones in centos, works pretty well, let me know if you're interested in seeing it
[2012-02-23 20:41:00 -0500] mml: seems to be waiting forever for ssh to come up, or isn't using the private ip for some reason
[2012-02-23 20:42:00 -0500] Brad_K: mml: we use knife-rackspace all the time.
[2012-02-23 20:42:00 -0500] mml: hm
[2012-02-23 20:42:00 -0500] mml: must be me then
[2012-02-23 20:43:00 -0500] mml: if i recall, rs cloud hosts are accessible from the public interface by default right?
[2012-02-23 20:43:00 -0500] Brad_K: rackspace nodes are accessible from both the public and private interfaces, unless you've altered the firewall tables.
[2012-02-23 20:43:00 -0500] mml: yeah, that's what i thought.
[2012-02-23 20:43:00 -0500] mml: wtf.
[2012-02-23 20:44:00 -0500] Brad_K: how you access those machines will differ, depending on where you are and at what name/IP address you're trying to access them.
[2012-02-23 20:44:00 -0500] mml: i'm running knife froma different rscloud host
[2012-02-23 20:44:00 -0500] Brad_K: by default, rackspace doesn't set the FQDN on their machines.  you have to do that yourself.
[2012-02-23 20:44:00 -0500] mml: i can ssh in manually
[2012-02-23 20:44:00 -0500] mml: knife is just sitting there "waiting for ssh....."
[2012-02-23 20:45:00 -0500] Brad_K: could be a key issue?
[2012-02-23 20:45:00 -0500] mml: argh. strace tells me it's trying to use the public interface
[2012-02-23 20:45:00 -0500] mml: fail
[2012-02-23 20:46:00 -0500] Brad_K: using the public interface from another node in the rs cloud should work (depending on your firewall setup), but you wouldn't want to do that  you would end up paying money for those packets.
[2012-02-23 20:46:00 -0500] Brad_K: network access via the private interface is twice the speed, and zero cost.
[2012-02-23 20:46:00 -0500] mml: yeah. i read somehwere that knife-rackspace tries to use the internal interface
[2012-02-23 20:47:00 -0500] mml: apparently it doesn't
[2012-02-23 20:47:00 -0500] mml: derp.  print(".") until tcp_test_ssh(server.addresses["public"][0]) { sleep @initial_sleep_delay ||= 10; puts("done") }
[2012-02-23 20:48:00 -0500] Brad_K: knife-rackspace tries to use the IP address associated with the FQDN that is defined for the node.  we have our FQDNs for all our nodes pointed at the internal interface, which means that every time i try to access them with "knife ssh " then i end up having to add "-a name" at the end (to get the unqualified name), and I've mucked about with the /etc/resolv.conf so that it will search on the domain associated with the public interface instead.  it's
[2012-02-23 20:51:00 -0500] tolland: is there something similar to the augeas resource for regexing known configs?
[2012-02-23 20:59:00 -0500] mml: bradk: so far i'm not super impressed with knife-rackspace :/
[2012-02-23 21:00:00 -0500] mml: out of the box, list flavors is borken
[2012-02-23 21:00:00 -0500] mml: i've read some stuff on opscode docs that just isn't true (switch for using private address etc)
[2012-02-23 21:00:00 -0500] mml: at least it's easy to hack
[2012-02-23 21:01:00 -0500] gchristensen: AntonZ: may I help you?
[2012-02-23 21:02:00 -0500] ssd7: mml: Is this this flavor list bug you ran into: http://tickets.opscode.com/browse/KNIFE_RACKSPACE-26
[2012-02-23 21:04:00 -0500] mml: yeah
[2012-02-23 21:05:00 -0500] mml: ssd7: i already have a pull request in for it
[2012-02-23 21:05:00 -0500] mml: holy crap, it's working.
[2012-02-23 21:05:00 -0500] mml: sort of :/
[2012-02-23 21:05:00 -0500] AntonZ: gchristensen - are you there, got a few questions about gitweb cookbook
[2012-02-23 21:06:00 -0500] gchristensen: what's up?
[2012-02-23 21:07:00 -0500] AntonZ: you have some dependencies specified and a few recipes, i do need to isntall apache and gitweb, but do i need require_recipe "nginx"
[2012-02-23 21:07:00 -0500] AntonZ: require_recipe "fcgiwrap" and include_recipe "users"
[2012-02-23 21:18:00 -0500] AntonZ: also you have apache as a dependency, but i dont see where you call it for isntallation
[2012-02-23 21:19:00 -0500] gchristensen: heh, I'm not sure to be honest - I didn't write that recipe. my guess is it just uses those for portability, but it won't hurt anything
[2012-02-23 21:21:00 -0500] AntonZ: gotcha, will have to muddle abit then :)
[2012-02-23 21:22:00 -0500] mml: hmm, any decent centos6.0 bootstraps laying around?
[2012-02-23 21:22:00 -0500] gchristensen: AntonZ: I feel like most of my time with chef is muddling :P
[2012-02-23 21:22:00 -0500] mml: gchristensen: chef is the best wrapper for bash evar!
[2012-02-23 21:23:00 -0500] gchristensen: lol, I probably wouldn't bother if I didn't know we were going to have massive usage a few days in.
[2012-02-23 21:24:00 -0500] mattray: mml: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-02-23 21:24:00 -0500] mml: mattray: tx
[2012-02-23 21:25:00 -0500] mattray: mml: that's for the Full Stack Installer, still in beta but loved by millions
[2012-02-23 21:25:00 -0500] mml: there are about a half dozen assorted centos6 bootstraps around, so far none of them are for 6.0
[2012-02-23 21:25:00 -0500] AntonZ: yea, i hear you
[2012-02-23 21:25:00 -0500] mattray: mml: I believe I've used that on 6.1
[2012-02-23 21:26:00 -0500] mattray: or some strain of CentOS 6
[2012-02-23 21:28:00 -0500] mml: i should probably just stop using centos
[2012-02-23 21:29:00 -0500] mml: 'tis a silly distro
[2012-02-23 21:29:00 -0500] ssd7: I've used the full stack intaller on 6.0-6.2 but haven't used that bootstrap extensively.
[2012-02-23 21:30:00 -0500] rshade98: Anyone ever used this gist: https://gist.github.com/309568, I am having some issues getting it working
[2012-02-23 21:31:00 -0500] rshade98: I changed line 15 from variables { :settings => {} } to variables( :settings => {} ), however when I run it I get a blank file
[2012-02-23 21:32:00 -0500] rshade98: I was getting a tassoc error with the {}
[2012-02-23 21:32:00 -0500] cwj: what does the template look like?
[2012-02-23 21:34:00 -0500] rshade98: cat templates/default/sysctl.conf.erb
[2012-02-23 21:34:00 -0500] rshade98: <%- @settings.each do |k,v| %>
[2012-02-23 21:34:00 -0500] rshade98: <%= k %> <%= v %>
[2012-02-23 21:34:00 -0500] rshade98: <%- end %>
[2012-02-23 21:35:00 -0500] cwj: and what does the recipe utilizing the definition look like?
[2012-02-23 21:36:00 -0500] rshade98: sysctl "net.ipv4.tcp_syncookies" do
[2012-02-23 21:36:00 -0500] rshade98:     value "1"
[2012-02-23 21:36:00 -0500] rshade98:   end
[2012-02-23 21:37:00 -0500] cwj: looks like you might need to add "action :set" to that resource
[2012-02-23 21:44:00 -0500] ssd7: rshade98: try changing merge to merge! at line 17
[2012-02-23 21:58:00 -0500] rshade98: @ssd that was it
[2012-02-23 21:58:00 -0500] rshade98: thanks, you are the man
[2012-02-23 21:58:00 -0500] rshade98: now I just need to update the erb
[2012-02-23 22:16:00 -0500] jasonjwwilliams: Anyone had any success calling search from inside a library?
[2012-02-23 22:56:00 -0500] AntonZ: folks, im trying to install apache:default from apache2 cookbook from opscode, and it fails with port error: https://gist.github.com/1895560
[2012-02-23 22:56:00 -0500] AntonZ: i dont udnerstand the reason as i set the port, it actualyl pre-sets them for me 80,443
[2012-02-23 22:57:00 -0500] mattray: I'm not super familiar with RightScale.. but /var/cache/rightscale/cookbooks/?
[2012-02-23 22:57:00 -0500] AntonZ: well, rightscale run chef server
[2012-02-23 22:57:00 -0500] |shad0w|: what are the contents of /etc/httpd/ports.conf ?
[2012-02-23 22:57:00 -0500] AntonZ:  it says it fails to start the httpd due to the fact that port isnt set ?
[2012-02-23 22:58:00 -0500] AntonZ: #This file generated via template by Chef.
[2012-02-23 22:58:00 -0500] AntonZ: Listen 80443
[2012-02-23 22:58:00 -0500] AntonZ: NameVirtualHost *:80443
[2012-02-23 22:58:00 -0500] mattray: AntonZ: did you change it, or are the defaults just not working?
[2012-02-23 22:58:00 -0500] AntonZ: didnt chnage, defaults wont work
[2012-02-23 22:58:00 -0500] AntonZ: in the template of apacha i see that ports are assigned with comma
[2012-02-23 22:58:00 -0500] caryp: AntonZ: can you post your /etc/httpd/ports.conf
[2012-02-23 22:59:00 -0500] AntonZ: sec
[2012-02-23 22:59:00 -0500] AntonZ: #This file generated via template by Chef.
[2012-02-23 22:59:00 -0500] AntonZ: Listen 80443
[2012-02-23 22:59:00 -0500] AntonZ: NameVirtualHost *:80443
[2012-02-23 22:59:00 -0500] |shad0w|: it looks like the attribs are set wrong
[2012-02-23 22:59:00 -0500] mattray: dropped the comma
[2012-02-23 22:59:00 -0500] AntonZ: this is from attributes - # General settings
[2012-02-23 22:59:00 -0500] AntonZ: default[:apache][:listen_ports] = [ "80","443" ]
[2012-02-23 22:59:00 -0500] |shad0w|: it probably supposed to be an array
[2012-02-23 23:00:00 -0500] AntonZ: hmm
[2012-02-23 23:00:00 -0500] |shad0w|: whats the template looke like for ports.conf
[2012-02-23 23:00:00 -0500] caryp: AntonZ: for the record RightScale runs chef-solo
[2012-02-23 23:02:00 -0500] JasonBox: hrm
[2012-02-23 23:05:00 -0500] AntonZ: caryp thanks for the info, i was looking for that at some point
[2012-02-23 23:05:00 -0500] AntonZ: ill try to modify the array and remove 443 as i dont need it
[2012-02-23 23:06:00 -0500] gchristensen: I've had to run bootstrap several times now, each with progressively more success - is this... normal? it seems this is coming up near the end each time: Connection refused connecting to api.opscode.com:443 - here's all 5 attempts: https://gist.github.com/108f7b0d4cf8d5c3246e
[2012-02-23 23:25:00 -0500] gchristensen: I don't think I've been this stressed out by a tool in a long time.
[2012-02-23 23:39:00 -0500] mattray: mml: ping
[2012-02-23 23:41:00 -0500] mml: bbiab
[2012-02-23 23:43:00 -0500] ssd7: gchristensen: Still reading through it but it looks like your node is having connection problems to multiple hosts (ubuntu mirrors, rubygems).
[2012-02-23 23:45:00 -0500] mattray: mml: sent you a PM, gotta run
[2012-02-23 23:46:00 -0500] gchristensen: ssd7: I manually edited the resolve.conf which seems to fix it, however: https://gist.github.com/b7a7a10fc2246dcaffec , the backtrace didn't seem to have anything useful there; if I get that error again, I'll pate that too
[2012-02-23 23:47:00 -0500] ssd7: gchristensen: Since you have chef installed now, you don't need to run the bootstrap again.  I think the final errors you got are an actual chef error caused by reusing the node record
[2012-02-23 23:48:00 -0500] denysonique__: Is it possible to use Yaml instead of Json? with chef?
[2012-02-23 23:49:00 -0500] ssd7: gchristensen: I would do the following: knife node delete prod; knife client delete prod; ssh into the ec2 node which already had the bootstrap run on it; on the node run: chef-client -j /etc/chef/first-boot.json
[2012-02-23 23:52:00 -0500] gchristensen: ssd7: alright, that seemed to work - the errors are something I think I can work with though. I do appreciate all of your help
[2012-02-23 23:52:00 -0500] ssd7: gchristensen: Cool, glad to help :)

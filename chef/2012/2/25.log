[2012-02-25 18:31:00 -0500] murphy_slaw: is there a way to prevent rpm from starting a service when installing via "package"
[2012-02-25 18:31:00 -0500] murphy_slaw: chef installs the mysql rpm, which autostarts, before it writes /etc/my.conf, so the pid file ends up in the default location
[2012-02-25 18:32:00 -0500] murphy_slaw: and then when it restarts, it fails because my.conf is telling it to get the pid elsewhere
[2012-02-25 18:32:00 -0500] jtimberman: murphy_slaw: i don't have a redhat/centos system handy, but does yum have a command-line option to not execute post install scripts?
[2012-02-25 18:32:00 -0500] jtimberman: if it does you can pass that to the package
[2012-02-25 18:32:00 -0500] jtimberman: with the options parameter
[2012-02-25 18:34:00 -0500] murphy_slaw: apparently not :-/
[2012-02-25 18:34:00 -0500] murphy_slaw: alternately, can i force chef to create the config file before installing the package?
[2012-02-25 18:34:00 -0500] murphy_slaw: i moved the template block above the package statement but the package still gets installed first
[2012-02-25 18:34:00 -0500] Cope: jtimberman: rpm has a --nopost option
[2012-02-25 18:35:00 -0500] murphy_slaw: hmm, yeah, but i don't see a way to pass arbitrary rpm flags to yum
[2012-02-25 18:42:00 -0500] murphy_slaw: eh, i'll just stick a stub my.cnf in my base image with the correct pid path
[2012-02-25 18:43:00 -0500] jtimberman: murphy_slaw: it does not make sense that the package would be installed first if it appears after the template in the recipe
[2012-02-25 18:44:00 -0500] murphy_slaw: well, let me double check that i have the right version of the recipe on the server...
[2012-02-25 18:48:00 -0500] murphy_slaw: yeah, verified
[2012-02-25 18:48:00 -0500] murphy_slaw: i do service, template, package
[2012-02-25 18:48:00 -0500] murphy_slaw: and the package gets installed before the template gets executed
[2012-02-25 18:49:00 -0500] murphy_slaw: let me make sure i'm not installing the package elsewhere...
[2012-02-25 18:49:00 -0500] murphy_slaw: aha
[2012-02-25 18:49:00 -0500] murphy_slaw: yep, that's it
[2012-02-25 19:19:00 -0500] avishai: hi all
[2012-02-25 19:20:00 -0500] avishai: jtimberman, here?
[2012-02-25 19:20:00 -0500] bawt_: jtimberman, here is pastie: http://pastie.org/619456
[2012-02-25 19:34:00 -0500] avishai: ?
[2012-02-25 19:56:00 -0500] ssd7: Ohai Chefs
[2012-02-25 20:07:00 -0500] gchristensen: I'm looking to deploy an application on a stack managed by chef; I looked at the opscode/application cookbook, but it doesn't support my infrastructure. Are there alternative recommendations for deploying sourcecode and running pre and post deployment steps?
[2012-02-25 20:33:00 -0500] ggolin: hello all
[2012-02-25 20:33:00 -0500] ggolin: is there a way to load a cookbook into shef in client mode?
[2012-02-25 20:42:00 -0500] jtimberman: ggolin: http://stevendanna.github.com/blog/2012/01/28/shef-debugging-tips-1/
[2012-02-25 20:42:00 -0500] jtimberman: avishai: only here in passing :)
[2012-02-25 20:51:00 -0500] ggolin: oh great.
[2012-02-25 20:55:00 -0500] ssd7: gchristensen: Take a look at the deploy resource.  It is the chef resource that the application cookbook is built around.
[2012-02-25 21:01:00 -0500] ssd7: I should probably finish up shef-debugging-tips-2 eventually
[2012-02-25 21:02:00 -0500] ggolin: speaking of shef, (haha), is there a way to load a cookbook into a shef client session?
[2012-02-25 21:03:00 -0500] ssd7: ggolin: If you start shef in client mode it will download any cookbook's in the node run list, in recipe mode you can then do
[2012-02-25 21:03:00 -0500] ssd7: include_recipe "foo" to load up the resources
[2012-02-25 21:03:00 -0500] ggolin: will it pull up everything it needs?
[2012-02-25 21:04:00 -0500] ssd7: Yup
[2012-02-25 21:04:00 -0500] ggolin: neat, im gonna try that right now.
[2012-02-25 21:04:00 -0500] ggolin: thank you
[2012-02-25 21:04:00 -0500] ssd7: np :)
[2012-02-25 21:07:00 -0500] ggolin: yep, it works
[2012-02-25 21:08:00 -0500] ssd7: ggolin: You should be able to get everything you would get with debug output in shef
[2012-02-25 21:08:00 -0500] ssd7: chef
[2012-02-25 21:08:00 -0500] ssd7: Chef::Config[:log_level] = :debug
[2012-02-25 21:09:00 -0500] ggolin: aye
[2012-02-25 21:09:00 -0500] ggolin: it still throws a nomethod error, im not sure what i broke :)
[2012-02-25 21:11:00 -0500] ssd7: Does it throw a no method error when you include_recipe or when you try to run chef?  If you paste I gist I can take a look :)
[2012-02-25 21:11:00 -0500] ggolin: include_recipe
[2012-02-25 21:12:00 -0500] ssd7: Ahh.  Yeah, shef isn't great at helpign with "compile time" errors like that unfortunately
[2012-02-25 21:12:00 -0500] ggolin: i appreciate the offer, i shouldnt try to attack the issue from this angle anyways. trying to install redmine with rvm using the redmine cookbook. i should probably work on installing redmine with app+db+rvm cookbooks.
[2012-02-25 21:26:00 -0500] gchristensen: ssd7: thank you!
[2012-02-25 21:30:00 -0500] gchristensen: ssd7: btw, I love the way the code samples become plaintext
[2012-02-25 21:46:00 -0500] ssd7: gchristensen: very welcome :)
[2012-02-25 22:14:00 -0500] gchristensen: ssd7: it looks almost perfect, but the documentation for rolling back seems missing, or severely lacking
[2012-02-25 22:32:00 -0500] jtimberman: gchristensen: do you mean rollback in the deploy resource?
[2012-02-25 22:39:00 -0500] gchristensen: jtimberman: yeah
[2012-02-25 22:39:00 -0500] gchristensen: or did I miss it somewhere?
[2012-02-25 22:40:00 -0500] gchristensen: I know the mantra is to roll forward, not backwards but sometimes you've just got to roll back :P
[2012-02-25 22:46:00 -0500] jtimberman: gchristensen: "rollback to [specified revision]" :)
[2012-02-25 22:47:00 -0500] jtimberman: but, you can specify the 'rollback' action to rollback
[2012-02-25 22:47:00 -0500] jtimberman: looks like there's a rollback_on_error
[2012-02-25 22:47:00 -0500] jtimberman: of course a previous release needs to be in the deploy directory
[2012-02-25 23:30:00 -0500] gchristensen: jtimberman: so I've searched for the last 45 minutes on an example using this deploy directory and rolling back... and you mean the deploy directory on the server don't you.
[2012-02-25 23:33:00 -0500] hoover_damm: gchristensen, :rollback is an action that will roll back to the previous release
[2012-02-25 23:34:00 -0500] hoover_damm: you likely shouldn't need to use it in a recipe ever unless your doing something bizzare
[2012-02-25 23:34:00 -0500] gchristensen: yeah, just a misunderstanding. I've never used something like this, and my ignorance is showing pretty hard, heh
[2012-02-25 23:35:00 -0500] hoover_damm: I'll try and answer more questions I guess to help
[2012-02-25 23:36:00 -0500] hoover_damm: and going to chef is quite bit, it's not something overnight
[2012-02-25 23:36:00 -0500] hoover_damm: having 2 years experience with chef and the vast misunderstandings i've had on my own
[2012-02-25 23:36:00 -0500] hoover_damm: can completely lead me to believe others would ahve this issue
[2012-02-25 23:36:00 -0500] gchristensen: I appreciate that :) hah yeah, as ssd7 was saying a few nights ago - the learning curve is steep.
[2012-02-25 23:36:00 -0500] hoover_damm: and with all misunderstandings or oversights, re-evaluate, align a new thought process to work with it
[2012-02-25 23:36:00 -0500] hoover_damm: and go forward
[2012-02-25 23:37:00 -0500] hoover_damm: I used to say 90 days, my last job proved me wrong... 
[2012-02-25 23:37:00 -0500] hoover_damm: lol
[2012-02-25 23:37:00 -0500] gchristensen: lol
[2012-02-25 23:38:00 -0500] gchristensen: I'm starting a new project, and want to start with chef, because we're working towards a date where we'll need to scale very rapidly for an event, just want to be prepared
[2012-02-25 23:38:00 -0500] hoover_damm: best way to learn chef is with help
[2012-02-25 23:38:00 -0500] hoover_damm: honestly
[2012-02-25 23:39:00 -0500] hoover_damm: pairing up to learn chef can be the most helpful thing
[2012-02-25 23:40:00 -0500] hoover_damm: spent 3 days mentoring a client's guy
[2012-02-25 23:40:00 -0500] hoover_damm: (this week)
[2012-02-25 23:40:00 -0500] hoover_damm: was quite fun
[2012-02-25 23:42:00 -0500] jtimberman: gchristensen: sorry i'm a bit in and out here today :)
[2012-02-25 23:46:00 -0500] gchristensen: jtimberman: me too :)
[2012-02-25 23:46:00 -0500] gchristensen: hoover_damm: at this point I'm the only one, but hopefully next time I'll have a second hand
[2012-02-25 23:46:00 -0500] hoover_damm: gchristensen, learning it by yourself has to be rough
[2012-02-25 23:46:00 -0500] hoover_damm: I did that
[2012-02-25 23:47:00 -0500] gchristensen: a few days of pulling my hair out for sure
[2012-02-25 23:49:00 -0500] hoover_damm: the learning curve is at least 90days if not more
[2012-02-25 23:49:00 -0500] hoover_damm: depending

[2012-02-01 08:03:00 -0500] Willejs: i need to put an ssh key in a data bag, does there need to be a \n at the end of every line
[2012-02-01 08:03:00 -0500] Willejs: is there an easier way to do it?
[2012-02-01 08:04:00 -0500] linuxboy: SSH keys are single line
[2012-02-01 08:05:00 -0500] Willejs: no they are not?
[2012-02-01 08:06:00 -0500] linuxboy: erm
[2012-02-01 08:06:00 -0500] linuxboy: yes, they are
[2012-02-01 08:06:00 -0500] Blackavar: Yup, one line.
[2012-02-01 08:06:00 -0500] linuxboy: oh wait, public or private?
[2012-02-01 08:06:00 -0500] Willejs: private
[2012-02-01 08:06:00 -0500] linuxboy: yeah, thats multiline
[2012-02-01 08:07:00 -0500] Willejs: i need to put my private ssh key into a data bag for it to access github
[2012-02-01 08:07:00 -0500] linuxboy: what?
[2012-02-01 08:07:00 -0500] linuxboy: Oooohhhh
[2012-02-01 08:07:00 -0500] linuxboy: right, so you have a public/private key paid
[2012-02-01 08:07:00 -0500] linuxboy: and github have the public key
[2012-02-01 08:07:00 -0500] Willejs: yeah, i made a keypair
[2012-02-01 08:08:00 -0500] linuxboy: so you need to distribute the private key to your servers/users
[2012-02-01 08:08:00 -0500] Willejs: github have a public
[2012-02-01 08:08:00 -0500] Willejs: yess
[2012-02-01 08:11:00 -0500] Willejs: NOTE: Make sure your deploy key string is in one line with \n "deploy_key": "-----BEGIN DSA PRIVATE KEY-----\nMIIBv...EW1auXCaV\nb24T...TiaHI\n...\n-----END DSA PRIVATE KEY-----\n",
[2012-02-01 08:11:00 -0500] Willejs: even when i do that it doesn't work
[2012-02-01 08:17:00 -0500] Willejs: ahh the body needs to be a string
[2012-02-01 08:35:00 -0500] jondot: hi guys. what is the common way to separate environments on EC2? for example, i don't want an errornous chef cookbook to kill a production server by mistake?
[2012-02-01 08:37:00 -0500] fujin: environments?
[2012-02-01 08:37:00 -0500] bawt: environments is a feature of the Chef Server allowing you to constrain cookbooks to specific versions, set environment specific run lists for roles and set up environment specific attributes for nodes. Documentation: http://wiki.opscode.com/display/chef/Environments
[2012-02-01 08:37:00 -0500] fujin: jondot: ^^
[2012-02-01 08:37:00 -0500] jondot: looks interesting
[2012-02-01 08:38:00 -0500] fujin: in some cases some people prefer an entirely separate organization or chef-server
[2012-02-01 08:39:00 -0500] jondot: perhaps my question is more EC2 oriented
[2012-02-01 08:39:00 -0500] jondot: for example, i would _never_ want chef to terminate an instance that it didn't itself create
[2012-02-01 08:40:00 -0500] jondot: admittedly i'm a bit fresh on the chef terminology, i belive knife-ec2 will spawn instances for me on ec2
[2012-02-01 08:41:00 -0500] fujin: and how do you suppose you are going to regulate that?
[2012-02-01 08:41:00 -0500] fujin: knife ec2 just uses the ec2 api
[2012-02-01 08:41:00 -0500] jondot: yes, that would be my question
[2012-02-01 08:41:00 -0500] fujin: you can delete anything you like if you have access to it
[2012-02-01 08:41:00 -0500] nacer: jondot: chef don't terminate instance by himself
[2012-02-01 08:42:00 -0500] jondot: perhaps there are user level permission, or maybe people use a completely different amazon environment to build and test their chef cookbooks
[2012-02-01 08:42:00 -0500] jondot: im just looking for the common case solution
[2012-02-01 09:34:00 -0500] nico: hmm
[2012-02-01 09:34:00 -0500] nico: is it possible to know the actual recipe name in a recipe ?
[2012-02-01 09:39:00 -0500] fujin: cookbook_name and recipe_name I think
[2012-02-01 09:40:00 -0500] fish_: nico: what do you mean by 'know'?
[2012-02-01 09:40:00 -0500] fish_: nico: cookbook::recipe?
[2012-02-01 09:42:00 -0500] nico: testing that
[2012-02-01 09:44:00 -0500] nico: fujin: thx
[2012-02-01 09:45:00 -0500] BryanWB: nico did u fix the issue u had?
[2012-02-01 09:47:00 -0500] nico: BryanWB: yup
[2012-02-01 09:48:00 -0500] BryanWB: what problem?
[2012-02-01 09:48:00 -0500] nico: a typo :D
[2012-02-01 09:48:00 -0500] nico: "rsyslog" != "syslog"
[2012-02-01 09:48:00 -0500] nico: epic fail
[2012-02-01 09:50:00 -0500] BryanWB: ha! that happens to me all the time ;)
[2012-02-01 09:57:00 -0500] BryanWB: can somebody w/ centos5 tell me whether /lib/lsb/init-functions is present on their machine?
[2012-02-01 09:57:00 -0500] BryanWB: am writing init script and want it to work for centos5 not jut rhel5
[2012-02-01 10:23:00 -0500] lflux: yeah it exists on my centos5.5
[2012-02-01 10:26:00 -0500] BryanWB: lflux: tks
[2012-02-01 10:29:00 -0500] lflux: np, I run a centos shop.
[2012-02-01 10:33:00 -0500] jondot: trying to make an imagemagick recipe, just doing 'pacakge "imagemagick"' and running on ubuntu gives me ad an error: Chef::Exceptions::Exec: apt-get -q -y install imagemagick =8:6.6.0.4-3ubuntu1 returned 100, expected 0  ==> any idea why?
[2012-02-01 10:34:00 -0500] linuxboy: jondot: run the command manually
[2012-02-01 10:34:00 -0500] jondot: i did. says a package not found. however i can't understand where chef got the =8:6.6.0.4-3ubuntu1 bit, because the plain 'imagemagick' pacakge exists and runs install
[2012-02-01 10:35:00 -0500] linuxboy: apt-cache show imagemagick
[2012-02-01 10:36:00 -0500] jondot: ah, ok i see it there. so looks like the cache is not in sync with the real world? how could that be?
[2012-02-01 10:36:00 -0500] linuxboy: apt-get update
[2012-02-01 10:36:00 -0500] linuxboy: and do it again
[2012-02-01 10:37:00 -0500] jondot: nope, doesn't work
[2012-02-01 10:37:00 -0500] linuxboy: mirror is broken?
[2012-02-01 10:38:00 -0500] jondot: hmm thats a bummer.
[2012-02-01 10:38:00 -0500] linuxboy: test is by changing mirror?
[2012-02-01 10:39:00 -0500] ashb_: is it possible to have chef-client only run the changes for one cookbook?
[2012-02-01 10:41:00 -0500] jondot: ill try the devel packages.
[2012-02-01 10:41:00 -0500] jondot: ah damn, a trailing space in the package name!!!
[2012-02-01 11:09:00 -0500] Michal_: Hi, I have a problem with chef search using key 'roles', for example:  knife search node "roles:ha-infra"
[2012-02-01 11:09:00 -0500] Michal_: It turned out that if node contains any hashmap with key 'ha-infra' the result is positive, for example:
[2012-02-01 11:09:00 -0500] Michal_: "roles": [    "zookeeper",   "base" ], .....  "failover_ip": {   "ha-infra": "1.2.3.4" }
[2012-02-01 11:10:00 -0500] Michal_: If I'm using knife search node "role:ha-infra" everything is ok
[2012-02-01 11:10:00 -0500] Michal_: But I need to search using roles, because some roles include other ones
[2012-02-01 11:11:00 -0500] Michal_: Have you got any idea ?
[2012-02-01 11:28:00 -0500] nacer: Michal_: look like a bug to me
[2012-02-01 11:28:00 -0500] jondot: what is a proper way to manage cookbooks? i'd like to use both my own, opscode, and 37signals' cookbooks alltogather and be able to update them..?
[2012-02-01 12:10:00 -0500] jondot: can I specify a role through the ruby file DSL when using chef-solo ? (json file works OK)
[2012-02-01 12:53:00 -0500] Guest74596: Hi all  I was wondering if anyone could give me pointers on tracking down a problem I'm having with Chef.
[2012-02-01 12:54:00 -0500] Guest74596: I cannot for the life of me figure out what might be causing it
[2012-02-01 12:54:00 -0500] Guest74596: Periodically, the "node" array/hash will be entirely empty on some nodes
[2012-02-01 12:54:00 -0500] Guest74596: On the next run of chef, though, everything is magically fine.
[2012-02-01 12:54:00 -0500] Guest74596: It's very intermittent - once every 24 hours or less
[2012-02-01 12:55:00 -0500] Guest74596: However, it causes things like invalid Nagios configs to get generated. Then I get paged
[2012-02-01 12:56:00 -0500] jondot: is there a cookbook template generator?
[2012-02-01 12:57:00 -0500] jondot: something of the sort of 'cookbook new my_recipe'
[2012-02-01 12:57:00 -0500] ashb: jondot: knife cookbook create
[2012-02-01 12:57:00 -0500] jondot: ah, thanks
[2012-02-01 12:58:00 -0500] Guest74596: Does anyone have any advice?
[2012-02-01 12:58:00 -0500] jamescarr: so... can I add attributes to my databag and it'll populate values for, say, tomcat?
[2012-02-01 12:58:00 -0500] Guest74596: I'm quite desparate for help. My team mates have filed multiple bugs and sent things to the mailing list
[2012-02-01 12:59:00 -0500] jamescarr: sorry, populate attributes for the tomcat cookbook
[2012-02-01 13:06:00 -0500] jamescarr: schisamo, hey, can you help me figure out something in the java web quickstart?
[2012-02-01 13:11:00 -0500] jamescarr: I cannot for the life of me figure out where or how it creates that jndi connector for the app
[2012-02-01 13:12:00 -0500] jamescarr: sigh
[2012-02-01 13:12:00 -0500] `brendan: morning ya'll
[2012-02-01 13:12:00 -0500] jamescarr: nevermind, I finally found it ... it is in the applicationc ookbook
[2012-02-01 13:12:00 -0500] jamescarr: morning
[2012-02-01 13:25:00 -0500] Guest74596: Hi guys, what's the appropriate mechanism for me to get some help?
[2012-02-01 13:25:00 -0500] Guest74596: Neither myself nor my teammates can ever seem to even get acknowledged.
[2012-02-01 13:28:00 -0500] jamescarr: schisamo, I think that the multi-instance version of the java web quickstart doesn't work because it uses @host in the connection string... it only goes against localhost, while in this case mysql is on an external host
[2012-02-01 13:28:00 -0500] jamescarr: argh
[2012-02-01 13:28:00 -0500] jamescarr: how do I fix this?
[2012-02-01 13:29:00 -0500] jamescarr: surely people use chef for ruby based projects where the database is on a remote host?
[2012-02-01 13:29:00 -0500] mancdaz: how do I assign an attribute from my attributes file, as a variable at the top of a recipe, so that I don't have to keep referring to node[:thing1][:thing2] in that recipe?
[2012-02-01 13:31:00 -0500] jamescarr: mancdaz, chef recipes are plain ruby
[2012-02-01 13:31:00 -0500] jamescarr: you should be able to use a simpel ruby local variable
[2012-02-01 13:31:00 -0500] jamescarr: *simple
[2012-02-01 13:32:00 -0500] mancdaz: jamescarr: um ok, assume you are talking to someone who's not done a great deal (read: none) of ruby
[2012-02-01 13:32:00 -0500] jonlives: mancdaz: myvar = node[:thing1][:thing2]
[2012-02-01 13:32:00 -0500] jonlives: then just refer to myvar
[2012-02-01 13:33:00 -0500] mancdaz: perfect - thanks!
[2012-02-01 13:33:00 -0500] jamescarr: yeah
[2012-02-01 13:41:00 -0500] jamescarr: schisamo, nevermind... the host is  correct, but it looks like dbapp::db_bootstrap doesn't populate the database
[2012-02-01 13:47:00 -0500] jondot: is it possible that when running in chef-solo "not_if" instructions are disregarded?
[2012-02-01 14:17:00 -0500] rickless: I have a beginner question. Say I have a role called mysql_server. Maybe I want to add it to the runlists for two different nodes, which might me running different apps. When should I put the server password data so that each node gets a password specific to the project it is running?
[2012-02-01 14:17:00 -0500] rickless: s/when/where should I...
[2012-02-01 14:17:00 -0500] jonlives: rickless: maybe in an encrypted data bag, with an item for each project
[2012-02-01 14:18:00 -0500] rickless: jonlives: Right. I thought databag might be the place, but the docs didnt entirely convince me.
[2012-02-01 14:18:00 -0500] jonlives: rickless: sounds like an ideal candidate for what you're after :)
[2012-02-01 14:20:00 -0500] yfeldblum: rickless, why do you need the automated configuration to set up passwords? it would be simple to use the standard client tools to set up a blank database and an account once, and there's no headache of how to keep the password in chef
[2012-02-01 14:21:00 -0500] Brad_K: but then you've got to provide passwords for that database.
[2012-02-01 14:23:00 -0500] rickless: Well perhaps I wrong yfeldblum, but if Im deploying a rails app I need to ensure a db user with the username/password specified in by database.yml file exists, so I figured I had this problem?
[2012-02-01 14:23:00 -0500] rickless: am new to chef and quite confuse
[2012-02-01 14:23:00 -0500] rickless: d
[2012-02-01 14:23:00 -0500] jespada: rickless, data bags are stuff that you want to have available for your hole infrastructure users/ passwds sudo groups, etc
[2012-02-01 14:24:00 -0500] Brad_K: you can also have data bags for different parts of your infrastructure.
[2012-02-01 14:25:00 -0500] rickless: I think Im getting more confused. The broad question is, how do I use the opscode mysql cookbook to install a server in such a way that the software I want to run on that server can access the db? I figured predefine the passwords (hence original question) but perhaps there is another way?
[2012-02-01 14:28:00 -0500] Brad_K: we don't use MySQL, but that's basically what we've done with encrypted data bags for all the various systems we use that need passwords.
[2012-02-01 14:28:00 -0500] rickless: Pehaps I should hack the cookbook to write the access params to ENV variables or something?
[2012-02-01 14:28:00 -0500] Brad_K: so, i can't help you with the specifics of how that would apply to the mysql cookbook, but i can tell you what we do to solve the general problem.
[2012-02-01 14:29:00 -0500] rickless: Brad_K: Okay, so you recommend an encrypted databag which predefines the password. Sounds reasonable to me.
[2012-02-01 14:30:00 -0500] Brad_K: one of the things you will find with Ruby is that There Is More Than One Way To Do It, a.k.a., TIMTOWTDI, which is pronounced "Tim Toady".  However, when you're learning, Tim Toady is not necessarily your friend.
[2012-02-01 14:31:00 -0500] rickless: Brad_K: But can I ask another noob question. Say I have my databag which sets the password attribute that the cookbook looks for, how do I tell the node to load that databag? Does it have to be done explicitly by the recipe?
[2012-02-01 14:31:00 -0500] Brad_K: yes, you would have to load that databag explicitly.  Opscode has some documentation on this.
[2012-02-01 14:33:00 -0500] Brad_K: there's a page at http://wiki.opscode.com/display/chef/Encrypted+Data+Bags which also includes a link to a blog post from Joshua Timberman (one of the lead guys at Opscode) regarding how he implemented encrypted databags for a particular application.
[2012-02-01 14:33:00 -0500] rickless: I suppose I could just create app1_mysql and app2_mysql roles, which just add the main mysql role and the per app attribute defaults? sounds like as clean a solution as any?
[2012-02-01 14:36:00 -0500] Brad_K: rickless: that sounds plausible to me.
[2012-02-01 14:37:00 -0500] Brad_K: we don't have a comparable situation here, but if we did, that sounds like the route that i would try first.
[2012-02-01 14:37:00 -0500] yfeldblum: rickless, it's OK to start off by doing most of the baseline configuration (ntp, sshd, users, firewall, nginx, mysql server, hosts/dns, etc) with Chef, and deploying the application and creating the db/db-user manually or with capistrano or something
[2012-02-01 14:38:00 -0500] Brad_K: the other thing i would encourage you to do is to get something out there as a prototype that demonstrates key parts of the functionality, and once you get it up, then you can iterate on the design and fill in the gaps.  the parallel concept that i would point to here is to "publish early, publish often".
[2012-02-01 14:39:00 -0500] Brad_K: you don't have to put Humpty Dumpty back together again 100% perfect on the first attempt.
[2012-02-01 14:39:00 -0500] rickless: :)
[2012-02-01 14:48:00 -0500] rickless: Can you namespace roles? app1::mysql, etc.
[2012-02-01 14:53:00 -0500] yfeldblum: not with ::
[2012-02-01 14:53:00 -0500] yfeldblum: you can hyphenate if you like
[2012-02-01 14:53:00 -0500] yfeldblum: app1-mysql
[2012-02-01 14:55:00 -0500] rickless: yfeldblum: Do you mean roles/app1/mysql can be referenced as app-mysql or is there some namespacing directive?
[2012-02-01 15:00:00 -0500] jmazzi: what could cause this error with a `knife ssh`?  Failed to verify request signature: OpenSSL::PKey::RSAError: padding check failed
[2012-02-01 15:01:00 -0500] yfeldblum: rickless, no, the file in your chef-repo would be roles/app1-mysql.rb or roles/app1-mysql.json
[2012-02-01 15:02:00 -0500] rickless: yfeldblum: Think Ive figured out what you mean. I have roles/app1/mysql.rb which defines a role with the name app1-mysql. Thanks.
[2012-02-01 15:03:00 -0500] jtimberman: rickless: The "database" cookbook can be used in part for that.
[2012-02-01 15:04:00 -0500] jtimberman: rickless: It includes resource/provider for setting up mysql databases and such.
[2012-02-01 15:04:00 -0500] jtimberman: http://ckbk.it/database
[2012-02-01 15:06:00 -0500] jtimberman: rickless: for customized things that you need done in your systems, i wouldn't approach modifying the mysql cookbook directly. its purpose is to get mysql installed and set up so you can then in your own cookbook use it for creating databases and connecting your applications to it.
[2012-02-01 15:07:00 -0500] rickless: jtimberman: Thanks. I guess my plan was to use the mysql cookbook to install a mysql server with a root with a known password, then use the database cookbook as part of some kind of deployment recipe to ensure the required database exists for my app...
[2012-02-01 15:11:00 -0500] jtimberman: rickless: Yes.
[2012-02-01 15:11:00 -0500] BryanWB: yfeldblum: good morning!
[2012-02-01 15:29:00 -0500] yfeldblum: morning, BryanWB
[2012-02-01 15:31:00 -0500] jbz: I've got a 'how you would do this' question, because I think the way I'm planning on doing something might besilly, but I dunno any better at this point.
[2012-02-01 15:31:00 -0500] jbz: I have a situation where I need to log any successful deployments of code to an external system (to prove it was deployed for regulatory purposes).
[2012-02-01 15:32:00 -0500] jbz: The way I'm planning to do this now:  have a report handler which goes back into the chef-client log, finds the current run using the start time/end time, and copies those lines out to an external report
[2012-02-01 15:32:00 -0500] jbz: but the only way I can think of only firing this handler when a deployment actually occurs is to have the deploy resource set an attribute in the run state when it actually fires
[2012-02-01 15:33:00 -0500] jbz: and then have the handler run if that attribute is set, and unset it when it's finished.
[2012-02-01 15:33:00 -0500] jbz: This seems Rube Goldbergian.
[2012-02-01 15:33:00 -0500] jbz: Is there a better way?
[2012-02-01 15:33:00 -0500] jbz: (I'm doing it in a handler to ensure I get the full run in the log).
[2012-02-01 15:37:00 -0500] jbz: Anyone? Can anyone save me from the Goldberg bodge?
[2012-02-01 15:37:00 -0500] jbz: :-)
[2012-02-01 15:39:00 -0500] jamescarr: so guys, help me understand something (thanks for putting up with all my questions)...
[2012-02-01 15:39:00 -0500] jamescarr: When I run roles and recipes spread out across multiple machines, how does it "know" where the database server is?
[2012-02-01 15:40:00 -0500] jbz: jamescarr: A couple possible ways.  1) either you tell each machine where its database server is using attributes (via node attributes, role attributes or environment attributes) or...
[2012-02-01 15:40:00 -0500] jbz: 2) the machines do a search on the chef server for a node with attributes indicating it is the database server, and find it that way.  This is more typical.
[2012-02-01 15:41:00 -0500] jbz: jamescarr: Whenever a machine finishes a chef run, it 'saves' its run state to the chef server - i.e. all the attributes.  So other machines can search on those attributes.
[2012-02-01 15:41:00 -0500] jbz: And when they find them, be given other information about the machine which was found (such as its address, name, etc.)
[2012-02-01 15:42:00 -0500] jbz: Note: #2 will only work if the database server is using Chef and the fact that it *is* the db server has been put into the attributes somehow.
[2012-02-01 15:44:00 -0500] jamescarr: so how does this work when I go out and just terminate all my instances?
[2012-02-01 15:44:00 -0500] jtimberman: jamescarr: how does what work?
[2012-02-01 15:47:00 -0500] jamescarr: I mean... if I go out and terminate all my clients, and then redeploy the web servers, does it just use the ip of the previous db?
[2012-02-01 15:47:00 -0500] jbz: jamescarr: If you haven't brought up a new DB server yet, then yes, it will
[2012-02-01 15:48:00 -0500] jbz: at least, assuming you haven't removed the old node records from the chef server.
[2012-02-01 15:49:00 -0500] jbz: or done something like have the search pay attention to how 'fresh' the result is (when the resulting node was last updated on the chef server indicating it was 'live').
[2012-02-01 15:53:00 -0500] jamescarr: I see... it goes based on who is identified as the db_master
[2012-02-01 15:55:00 -0500] jtimberman: jamescarr: yeah, so, 'knife ec2 server delete' isn't currently aware of deleting the node/client objects from the server. there's an update in that gem on the master branch but its not released yet.
[2012-02-01 15:58:00 -0500] CiaranG: Anyone know what it means when chef-solo stops halfway through running a recipe (bash script) and just says "Killed"? I have debug output enabled, but that's still the only message that comes out.
[2012-02-01 16:01:00 -0500] jtimberman: CiaranG: there should be other relevant output from the debug messages, including the recipe where Chef was
[2012-02-01 16:02:00 -0500] jbz: CiaranG: Also, if you're in linux, you might check system logs to see if Chef or some child process got OOM killed or killed by some system mgmt process.
[2012-02-01 16:04:00 -0500] CiaranG: jbz: Thanks, that's the answer, I am officially an idiot - Feb  1 15:43:01 vagrant kernel: [ 1057.965446] Out of memory: kill process 1350 (chef-solo) score 91418 or a child
[2012-02-01 16:06:00 -0500] mjreed: it looks like data bag key values with spaces are only being indexed up to the first space.  known problem?  this is 0.10.0 server..
[2012-02-01 16:06:00 -0500] jbz: CiaranG: Not at all.  That happens to me ALL TH ETIME.
[2012-02-01 16:09:00 -0500] jtimberman: mjreed: Each data bag is a separate index.
[2012-02-01 16:17:00 -0500] mjreed: jtimberman: I know.
[2012-02-01 16:18:00 -0500] mjreed: I mean, if I have a data bag item representing my user account, with { "comment": "Mark Reed" },  I can search on the "Mark" and find it, but not the "Reed".  Even if I do something like "comment:M*Reed" as the search.
[2012-02-01 16:18:00 -0500] mjreed: the only thing in the index is "Mark", not the full string.
[2012-02-01 16:22:00 -0500] David_Miller: How do you guys use xenserver to create chef nodes, do I have to use something like openstack?
[2012-02-01 16:23:00 -0500] David_Miller: In other words, I have alot of xensverver boxes, I want to bring up nodes on them
[2012-02-01 16:24:00 -0500] David_Miller: with knfe
[2012-02-01 16:26:00 -0500] flashmanbahadur: hey, seeing a weird issue when trying to template a config file for ssh. Keeps saying it cannot find the tmp file it should have downloaded, https://gist.github.com/1717859
[2012-02-01 16:26:00 -0500] flashmanbahadur: anyone see this before?
[2012-02-01 16:26:00 -0500] BryanWB: David_Miller: there looks like there is something https://github.com/ign/chef/blob/40a8d54a71c3fef0d9d82285cee1f729566a60ef/chef/lib/chef/knife/xen_server_create.rb
[2012-02-01 16:27:00 -0500] BryanWB: David_Miller: appears to be built-in
[2012-02-01 16:28:00 -0500] David_Miller: BryanWB: much thanks, this looks like what I want
[2012-02-01 16:33:00 -0500] flashmanbahadur: seems to work if I specify path explicitly instead of using ~
[2012-02-01 16:33:00 -0500] dwhsix: I'm working w someone who frequently runs recipes one-off by doing something like: sudo chef-client -j /etc/chef/b63.json
[2012-02-01 16:33:00 -0500] dwhsix: where the b63.json file is:
[2012-02-01 16:34:00 -0500] dwhsix: run_list":["recipe[b63data]"]
[2012-02-01 16:34:00 -0500] dwhsix: that he's created on the fly
[2012-02-01 16:34:00 -0500] dwhsix: is that a bad idea?  okay?  okay as long as the recipe is actually part of the node's normal run list?
[2012-02-01 16:35:00 -0500] jbz: dwhsix: It sounds like he runs the risk of doing stuff in these one-offs that conflicts with the 'normal' runso if it's a recipe that's part of the normal runlist that is at least 'better'
[2012-02-01 16:35:00 -0500] dwhsix: jbz: that was sort of my feeling.
[2012-02-01 16:35:00 -0500] dwhsix: I'd rather he not do it at all, but I need to make sure my arguments are complete to convince him
[2012-02-01 16:36:00 -0500] jbz: well
[2012-02-01 16:36:00 -0500] jbz: it sort of breaks the idempotency guarantee
[2012-02-01 16:36:00 -0500] dwhsix: exactly
[2012-02-01 16:36:00 -0500] jbz: if you do stuff 'outside' the full client run
[2012-02-01 16:36:00 -0500] jbz: You could say that if he does that, and then does a full client run afterwards to test, it's ok
[2012-02-01 16:37:00 -0500] dwhsix: lol
[2012-02-01 16:37:00 -0500] jbz: Doing that on production nodes would give me hives
[2012-02-01 16:37:00 -0500] dwhsix: but he's doing that avoid a full client run ;-)
[2012-02-01 16:37:00 -0500] jbz: but I'm conservative.
[2012-02-01 16:37:00 -0500] jbz: oy.
[2012-02-01 16:37:00 -0500] dwhsix: it was on production
[2012-02-01 16:37:00 -0500] dwhsix: :-(
[2012-02-01 16:37:00 -0500] jbz: That's like saying "I don't want to bother having apt/dpkg handle my dependencies so I'm just going to dpkg --force this one thing."
[2012-02-01 16:38:00 -0500] jbz: I guess it's better than running ad hoc bash scripts or command stringsat least you know, later, what was done
[2012-02-01 16:38:00 -0500] jbz: but lord, it isn't good.
[2012-02-01 16:38:00 -0500] jbz: </opus>
[2012-02-01 16:38:00 -0500] dwhsix: yeah, better than nothing, but not great
[2012-02-01 16:38:00 -0500] dwhsix: next step is to work on his non-idempotent recipes :-(
[2012-02-01 16:39:00 -0500] jbz: heh
[2012-02-01 16:39:00 -0500] dwhsix: but I give him slack, chef newbie
[2012-02-01 16:39:00 -0500] jbz: I shouldn't talk.  We still use a bunch of our early cookbooks, and they're a mess.
[2012-02-01 16:40:00 -0500] jbz: I am not diplomatic enough to survive as a consultant, I think.
[2012-02-01 16:40:00 -0500] dwhsix: yeah, I did the initial pass on a lot of their recipes, and I hate how I set up environments/data bags/etc need to tip it out & start over
[2012-02-01 16:40:00 -0500] dwhsix: *rip
[2012-02-01 16:41:00 -0500] jbz: As I get older and slightly more experienced, that juggling act of 'take the time to do it right from the outset vs. get something implemented' gets more and more complex.
[2012-02-01 16:41:00 -0500] jbz: Mostly because I now understand that *both* paths can lead to later pain, it's just that the type of pain is different in each case.
[2012-02-01 16:41:00 -0500] dwhsix: agreed, and I've *never* regretted doing the former over the latter
[2012-02-01 16:41:00 -0500] dwhsix: never
[2012-02-01 16:41:00 -0500] dwhsix: but I'm preaching to the choir here ;-)
[2012-02-01 16:41:00 -0500] jbz: 1) I built in structural but consistent fail because I made a poor choice
[2012-02-01 16:42:00 -0500] jbz: 2) There's no consistency and mgmt is a mess
[2012-02-01 16:42:00 -0500] jbz: at least #1 gets rarer as I make my mistakes and try to learn.
[2012-02-01 16:42:00 -0500] dwhsix: thx for the perspective on the one-offs
[2012-02-01 16:42:00 -0500] jbz: (also, it's much cleaner to recover from #1, even if you have to usually touch more stuff).
[2012-02-01 16:42:00 -0500] jbz: NP
[2012-02-01 16:43:00 -0500] jbz: Aw, heck.
[2012-02-01 16:43:00 -0500] jbz: jtimberman: ping?
[2012-02-01 16:43:00 -0500] dwhsix: definitely
[2012-02-01 16:43:00 -0500] jbz: (or anyone else who is an ace with the chef run order?)
[2012-02-01 17:09:00 -0500] hippiehacker: in a recipe, if I want to log outside of a resource it doesn't seem to work
[2012-02-01 17:09:00 -0500] hippiehacker: https://gist.github.com/1718077
[2012-02-01 17:10:00 -0500] hippiehacker: psudo roles, bascically separating configuration into roles, and versions into databags
[2012-02-01 17:11:00 -0500] hippiehacker: but I want to exit gracefully if the versions aren't set in the databag (with a nice log message
[2012-02-01 17:12:00 -0500] jbz: hippiehacker: If you're looking to log something during the compile phase, does it work if you use Chef::Log.info("<message>")?
[2012-02-01 17:12:00 -0500] hippiehacker: jbz will check
[2012-02-01 17:12:00 -0500] jbz: Note that logging outside of resources generally happens during the compile phase and thus may show up much earlier int he run
[2012-02-01 17:13:00 -0500] jbz: although I'm not sure how it works when you use log resources.
[2012-02-01 17:36:00 -0500] c_t: is there some sort of chef-y way for setting locales?
[2012-02-01 17:44:00 -0500] jespada_: c_t, something beyond a template locale (/etc/default/locale) and the attribute LANG=en_US.UTF-8 for instance then issue update-locale (debian way), you mean?
[2012-02-01 17:45:00 -0500] c_t: Yeah, I know how to set locales, I was just wondering if there was something in place for it already is all before I went and whipped something up
[2012-02-01 17:46:00 -0500] Willejs: hi, can anyone help me with the passenger_apache2 cookbook?
[2012-02-01 17:46:00 -0500] jespada_: AFAIK no.. may be write a lwrp to do something like that could be handy
[2012-02-01 17:46:00 -0500] c_t: turned up a little cookbook that does it, so I'm being lazy and doing that
[2012-02-01 17:46:00 -0500] mconigliaro: can anyone tell me how "knife configure -i" creates a new admin user? when I try to create an admin user manually using the chef-validator user and validation.pem, it says i don't have permission to do that.
[2012-02-01 17:47:00 -0500] mconigliaro: i guess i dont understand how this is working. it seems like a chicken/egg problem
[2012-02-01 17:47:00 -0500] moos3: can i get metrics from chef-client ?
[2012-02-01 17:47:00 -0500] jespada_: c_t, I did the same
[2012-02-01 17:48:00 -0500] Willejs: the passenger_apache2 cookbook isn't moving the mod_passenger.so file to the mods available folder, think i have something wrong in the attributes file?
[2012-02-01 17:59:00 -0500] Willejs: passenger_apache2 cookbook help anyone?
[2012-02-01 17:59:00 -0500] jmazzi: for a newly created node, what could cause a Net::HTTPServerException: 403 "Forbidden" with hosted chef?
[2012-02-01 18:00:00 -0500] jmazzi: it's calling save_updated_node
[2012-02-01 18:01:00 -0500] Willejs: private key on your server? is that okay?
[2012-02-01 18:02:00 -0500] jmazzi: well, the chef run does everything, downloads and applies cookbooks
[2012-02-01 18:02:00 -0500] jmazzi: so if that was teh case, would it even have gotten that far?
[2012-02-01 18:02:00 -0500] Willejs: so yeah
[2012-02-01 18:02:00 -0500] Willejs: its fine then
[2012-02-01 18:02:00 -0500] jbz: Can anyone tell me if there's a way to run a particular handler ONLY IF a particular resource fires?
[2012-02-01 18:04:00 -0500] chaosdonkey: Hi, I wrote a patch on chef-solo, so that now it's able to download cookbooks from s3
[2012-02-01 18:04:00 -0500] jmazzi: looks like the Roles need an update permission
[2012-02-01 18:12:00 -0500] c_t: and of course, locales were peachy in production
[2012-02-01 18:12:00 -0500] c_t: just some of the test VMs had C as their locale
[2012-02-01 18:17:00 -0500] mconigliaro: can anyone tell me how "knife configure -i" creates a new admin user? what key does it use to authenticate?
[2012-02-01 18:21:00 -0500] ssd7_: mconigliaro: I think the default is /etc/chef/webui.pem
[2012-02-01 18:22:00 -0500] mconigliaro: ah, interesting. let me try using that one
[2012-02-01 18:22:00 -0500] mconigliaro: i was trying to use chef-validator
[2012-02-01 18:23:00 -0500] mconigliaro: ssd7_: awesome, that worked. thanks!
[2012-02-01 18:23:00 -0500] ssd7_: mconigliaro: :) great!
[2012-02-01 18:23:00 -0500] mconigliaro: dont know why i didnt think to try that key
[2012-02-01 18:36:00 -0500] jbz: Hey, if you guys had to gen a pdf from a ruby script, what gem would you use for this?
[2012-02-01 18:37:00 -0500] jbz: (tried prawn, but it seems to have major issues and won't work)
[2012-02-01 18:38:00 -0500] jbz: oh.  No, I'm just an idiot.
[2012-02-01 18:38:00 -0500] flashmanbahadur: knife has no way to create EBS volumes does it, just EBS backed instances
[2012-02-01 18:40:00 -0500] flashmanbahadur: what kinds of solutions do people have for attaching EBS volumes to these machines, besides putting your keys on the machine for bootstrapping
[2012-02-01 18:42:00 -0500] thom: flashmanbahadur: the opscode aws cookbook has an lwrp for creating ebs volumes
[2012-02-01 18:42:00 -0500] thom: flashmanbahadur: http://wiki.opscode.com/display/chef/Opscode+LWRP+Resources#OpscodeLWRPResources-aws
[2012-02-01 18:42:00 -0500] flashmanbahadur: thanks
[2012-02-01 18:43:00 -0500] flashmanbahadur: does that require keys on the chef-client?
[2012-02-01 18:43:00 -0500] flashmanbahadur: in the databag
[2012-02-01 18:43:00 -0500] flashmanbahadur: hmm
[2012-02-01 18:43:00 -0500] flashmanbahadur: could work
[2012-02-01 18:43:00 -0500] flashmanbahadur: thanks
[2012-02-01 18:43:00 -0500] thom: create an IAM identity specifically for that
[2012-02-01 18:43:00 -0500] thom: job done
[2012-02-01 18:43:00 -0500] flashmanbahadur: pretty much
[2012-02-01 18:45:00 -0500] Damm: create an iam to .. check!
[2012-02-01 19:03:00 -0500] sykopomp: I'm new to chef, and I'm running into this issue while playing with vagrant: `method_missing': Cannot find Chef::Resource::CookbookFile for cookbook_file
[2012-02-01 19:03:00 -0500] sykopomp: Do I need to do anything special to make CookbookFile accessible?
[2012-02-01 19:07:00 -0500] Brad_K: sykopomp: so, when you refer to a cookbook_file, you reference a file name.  that file is expected to be found in a given search path in y our chef repo, under $COOKBOOK/files/
[2012-02-01 19:07:00 -0500] Brad_K: obviously, you then need to make sure that cookbook has been uploaded to your chef server.
[2012-02-01 19:09:00 -0500] Brad_K: you could put the cookbook_file under $COOKBOOK/files/default/ or $COOKBOOK/files/$OS/ or any of several other possibilities in the search path.  See <http://wiki.opscode.com/display/chef/File+Distribution> for more details.
[2012-02-01 19:10:00 -0500] jmazzi: is there a way to set the default knife user for ssh?
[2012-02-01 19:11:00 -0500] Brad_K: jmazzi: sure, do that in your knife.rb.
[2012-02-01 19:11:00 -0500] jmazzi: Brad_K: how :)
[2012-02-01 19:12:00 -0500] Brad_K: jmazzi: there's lots of details regarding the use of knife at http://wiki.opscode.com/display/chef/Knife
[2012-02-01 19:12:00 -0500] sykopomp: Brad_K: as far as I can tell, the file is there, in <my_cookbook>/files/default/
[2012-02-01 19:13:00 -0500] Brad_K: jmazzi: i'm still looking for the specific page that would have the details you need.
[2012-02-01 19:13:00 -0500] jmazzi: I looked over that page and didnt find anything related to it
[2012-02-01 19:14:00 -0500] sykopomp: Brad_K: ...isn't it a little weird to get a method_missing for this, anyway?
[2012-02-01 19:15:00 -0500] chaosdonkey: I'm trying to run rake install from latest source but I get this error: "extconf.rb:57:in `<main>': Gecode not installed (RuntimeError)". any ideas?
[2012-02-01 19:15:00 -0500] Brad_K: jmazzi: well, if nothing else, there is a fully commented version of the knife.rb at https://github.com/opscode/chef/blob/master/chef/lib/chef/knife.rb
[2012-02-01 19:15:00 -0500] Brad_K: whoops!  wrong file.
[2012-02-01 19:15:00 -0500] BryanWB_: chaosdonkey, r u on centos/rhel?
[2012-02-01 19:15:00 -0500] chaosdonkey: ubuntu
[2012-02-01 19:16:00 -0500] jmazzi: Brad_K: i'll assume you meant this one https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/ssh.rb
[2012-02-01 19:16:00 -0500] BryanWB_: still, i think u need to add path to the gecode .so in /etc/ld.so.conf.d/gecode
[2012-02-01 19:16:00 -0500] Brad_K: jmazzi: no, that's the wrong file too.
[2012-02-01 19:16:00 -0500] BryanWB_: /usr/local/lib/
[2012-02-01 19:16:00 -0500] jmazzi: Brad_K: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/ssh.rb#L326
[2012-02-01 19:16:00 -0500] jmazzi: gonna try setting htat
[2012-02-01 19:16:00 -0500] jmazzi: that*
[2012-02-01 19:17:00 -0500] chaosdonkey: maybe I have to install libgecode?
[2012-02-01 19:18:00 -0500] BryanWB_: chaosdonkey, that's in the bootstrap
[2012-02-01 19:18:00 -0500] BryanWB_: gtg
[2012-02-01 19:19:00 -0500] jmazzi: doesn't seem to work
[2012-02-01 19:20:00 -0500] sykopomp: Brad_K: http://ruby.nopaste.dk/p4684 this is the code at fault. Doing ls /path/to/cookbooks/mine/files/default/<item> shows that the item is definitely there. What else could it be?
[2012-02-01 19:23:00 -0500] coderanger: Sure, just poke the Chef::Config object :-)
[2012-02-01 19:23:00 -0500] jbz: coderanger: You can swap out a handler on a running daemon?
[2012-02-01 19:23:00 -0500] chaosdonkey: installing the package libgecode-dev helped, thanks :)
[2012-02-01 19:24:00 -0500] coderanger: https://gist.github.com/714829
[2012-02-01 19:24:00 -0500] jbz: many thanks!
[2012-02-01 19:24:00 -0500] coderanger: Not only can you swap them out, you can distribute them in recipes
[2012-02-01 19:25:00 -0500] Brad_K: jmazzi: sorry, the file i was looking for used to be at https://github.com/opscode/chef-repo/blob/master/config/knife.rb.example but is no longer available there.  i'm still looking.
[2012-02-01 19:26:00 -0500] jmazzi: Brad_K: a forked repo shows this https://github.com/atmos/smeagol/blob/master/config/knife.rb.example
[2012-02-01 19:27:00 -0500] Brad_K: that's nowhere near fully commented.  i ran across that one already.  check out the page at http://help.opscode.com/discussions/questions/246-best-practices-for-multiple-developers-kniferb-in-chef-repo-or-not which has some other useful information.
[2012-02-01 19:27:00 -0500] sykopomp: Anyone have any idea why I'd be getting a method_missing when using cookbook_file when everything is there, as far as I can tell?
[2012-02-01 19:30:00 -0500] Brad_K: jmazzi: damn that jtimberman!  he was trying to hide it!  but he can't hide it from me!  take a look at https://gist.github.com/49b7b680c7b3d1d1be55
[2012-02-01 19:30:00 -0500] Brad_K: and i'm forking this gist so that he can't hide it from me again.
[2012-02-01 19:30:00 -0500] jmazzi: Brad_K: it's in his comment on the first link
[2012-02-01 19:31:00 -0500] Brad_K: jmazzi: sorry, not seeing the comment you were talking about.
[2012-02-01 19:32:00 -0500] jmazzi: Brad_K: thanks! it's just knife[:thing] =
[2012-02-01 19:33:00 -0500] jtimberman: Brad_K: lolwut?
[2012-02-01 19:33:00 -0500] Brad_K: you can't hide your fully commented knife.rb from me!  i'll get you and your little dog, too!  ;-)
[2012-02-01 19:33:00 -0500] jtimberman: made a public gist: https://gist.github.com/1718805
[2012-02-01 19:34:00 -0500] jtimberman: we have a task somewhere to integrate that in some documentation or something
[2012-02-01 19:34:00 -0500] Brad_K: yeah, but the other places that linked to a public location have since gone 404.
[2012-02-01 19:34:00 -0500] Brad_K: nothing in the wiki or anywhere else on the opscode site that i could find had a working link to a good copy of this information.
[2012-02-01 19:35:00 -0500] Brad_K: if you already know where to look, it's easy to find.  but it's not easy to find if you don't already know where to look.  even searches on github are  not useful.
[2012-02-01 19:43:00 -0500] Brad_K: sykopomp: sorry, i got dragged down the rabbithole.  anyway, i looked at your paste of your recipe, and i'm not seeing an obvious problem there.  can you give us a slice of what happens when you do a "chef-client -l debug" that demonstrates the problem?
[2012-02-01 19:51:00 -0500] sykopomp: Brad_K: http://ruby.nopaste.dk/p4685 (I thought it was supposed to be Chef::Provider::CookbookFile, not ::Resource::)
[2012-02-01 20:09:00 -0500] fujin: what version of chef sykopomp ?
[2012-02-01 20:09:00 -0500] fujin: does remote_file work ?
[2012-02-01 20:10:00 -0500] sykopomp: fujin: says 0.7.10 here
[2012-02-01 20:10:00 -0500] sykopomp: and I haven't tried remote_file
[2012-02-01 20:10:00 -0500] fujin: k so 0.7.10 is about
[2012-02-01 20:10:00 -0500] fujin: 2.5 years old
[2012-02-01 20:10:00 -0500] fujin: *i* was the release coordinator for 0.7 and I don't even work at opscode anymore
[2012-02-01 20:10:00 -0500] fujin: it's probably time to upgrade.
[2012-02-01 20:10:00 -0500] sykopomp: eesh
[2012-02-01 20:10:00 -0500] fujin: sykopomp: in 0.7, cookbook_file was remote_file
[2012-02-01 20:11:00 -0500] fujin: you are in very nasty, gnarly, dragon and monster water
[2012-02-01 20:11:00 -0500] sykopomp: fujin: thanks a bunch.
[2012-02-01 20:27:00 -0500] Brad_K: okay, that was out of left field.  i'm glad that fujin was around to be able to answer that.
[2012-02-01 20:30:00 -0500] fujin: when in doubt, basic diganostics :)
[2012-02-01 20:30:00 -0500] fujin: chef version, stack trace
[2012-02-01 20:31:00 -0500] Damm: mmm 0.7.10
[2012-02-01 20:31:00 -0500] Damm: that was a tasty version if I recall fujin
[2012-02-01 20:32:00 -0500] fujin: had its ups and downs I'm sure
[2012-02-01 20:32:00 -0500] Damm: like very release has
[2012-02-01 20:32:00 -0500] Brad_K: maybe we should blame the release manager for that version?  ;-)
[2012-02-01 20:41:00 -0500] Damm: why? what good would it do?
[2012-02-01 20:46:00 -0500] yfeldblum: blame? makes you feel better, saves you from the need to have a smoke, ultimately saves lives
[2012-02-01 20:46:00 -0500] slyphon: so, who's gone through the bowel-churning process of upgrading from chef 0.9 to chef 0.10 ?
[2012-02-01 20:52:00 -0500] fujin: 0.9 to 0.10 wasn't so bad.
[2012-02-01 20:52:00 -0500] slyphon: yeah?
[2012-02-01 20:52:00 -0500] fujin: Probably worth reading the 0.10 initial blog post though
[2012-02-01 20:52:00 -0500] slyphon: how about for the clients
[2012-02-01 20:53:00 -0500] slyphon: the config "just work"?
[2012-02-01 20:53:00 -0500] fujin: client.rb ?
[2012-02-01 20:53:00 -0500] bawt: client.rb is pretty handy
[2012-02-01 20:53:00 -0500] fujin: !forget client.rb
[2012-02-01 20:53:00 -0500] bawt: fine
[2012-02-01 20:53:00 -0500] fujin: slyphon: you meant the client.rb ?
[2012-02-01 20:53:00 -0500] fujin: http://www.opscode.com/blog/2011/05/02/chef-0-10-0-released/
[2012-02-01 20:54:00 -0500] slyphon: fujin: yeah /etc/chef/client.rb
[2012-02-01 20:54:00 -0500] fujin: yes afaik
[2012-02-01 20:54:00 -0500] slyphon: i mean, i wound up writing my own recipe for doing chef (runit config, etc)
[2012-02-01 20:54:00 -0500] fujin: even the 0.10 server is compatible with 0.9 clients
[2012-02-01 20:54:00 -0500] slyphon: ah, that's good
[2012-02-01 20:54:00 -0500] fujin: why ? there are opscode cookbooks available for that
[2012-02-01 20:55:00 -0500] fujin: https://github.com/opscode/cookbooks/tree/master/chef-client/
[2012-02-01 20:55:00 -0500] fujin: even supports runit lol
[2012-02-01 20:55:00 -0500] slyphon: well, now it does
[2012-02-01 20:55:00 -0500] fujin: think you could invent a square wheel while you are back there?
[2012-02-01 20:55:00 -0500] slyphon: it didn't do what i needed it to at the time
[2012-02-01 20:55:00 -0500] fujin: slyphon: upgrade one client, test, repeat =P
[2012-02-01 20:56:00 -0500] fujin: make backups
[2012-02-01 20:56:00 -0500] slyphon: fujin: let's pretend for a sec i'm not a total idiot
[2012-02-01 20:56:00 -0500] slyphon: i'm moving to using the standard :)
[2012-02-01 20:56:00 -0500] fujin: lol
[2012-02-01 20:57:00 -0500] fujin: lets pretend you aren't running a one year old piece of software on something you care about, and also pretend that you spent the time to read that blog post in depth
[2012-02-01 20:57:00 -0500] fujin: i like this game.
[2012-02-01 20:57:00 -0500] slyphon: dude, you gave me the link like 90s ago
[2012-02-01 20:57:00 -0500] slyphon: i'm reading it as fast as i possibly can
[2012-02-01 20:57:00 -0500] slyphon: also, "one year old" is "stable"
[2012-02-01 20:58:00 -0500] slyphon: one thing i don't need is "adventures in change management"
[2012-02-01 20:58:00 -0500] slyphon: let the cowboys run the bleeding edge
[2012-02-01 20:58:00 -0500] slyphon: i need my shit to work
[2012-02-01 20:58:00 -0500] fujin: ahh yeah
[2012-02-01 20:58:00 -0500] slyphon: this is like 1/10 my job
[2012-02-01 20:58:00 -0500] slyphon: it's a *really* important part, mind you ;)
[2012-02-01 20:59:00 -0500] fujin: the idea that an older version of chef is more stable than a newer version, at such a young stage in the project lifecycle
[2012-02-01 20:59:00 -0500] fujin: with really active development
[2012-02-01 20:59:00 -0500] fujin: is kind of baffling
[2012-02-01 21:00:00 -0500] slyphon: not really
[2012-02-01 21:00:00 -0500] slyphon: it works
[2012-02-01 21:00:00 -0500] slyphon: "change is bad"
[2012-02-01 21:00:00 -0500] slyphon: b/c if it *breaks* that means i'm going to be working on nothing else
[2012-02-01 21:00:00 -0500] fujin: maybe you could prevent the macarena from being invented while you are in the 90s aswell
[2012-02-01 21:00:00 -0500] slyphon: uh
[2012-02-01 21:00:00 -0500] fujin: i said a hey, ha, a hey, a hiahaha
[2012-02-01 21:00:00 -0500] slyphon: it's not like i'm running cfengine
[2012-02-01 21:01:00 -0500] fujin: you'd be running cfengine 1.x if you were.
[2012-02-01 21:01:00 -0500] fujin: anyway, the taunting subsides
[2012-02-01 21:01:00 -0500] fujin: i do not believe you will have any trouble with the upgrade process
[2012-02-01 21:02:00 -0500] labria: you're talking about chef-server upgrades?
[2012-02-01 21:03:00 -0500] slyphon: yah
[2012-02-01 21:03:00 -0500] labria: huge pain )
[2012-02-01 21:03:00 -0500] fujin: http://wiki.opscode.com/display/chef/Upgrading+Chef+0.9.x+to+Chef+0.10.x
[2012-02-01 21:03:00 -0500] slyphon: fujin: lots of poeple are hesitant to do this
[2012-02-01 21:03:00 -0500] fujin: lots of people drink milk
[2012-02-01 21:03:00 -0500] fujin: soda pop with HFCS
[2012-02-01 21:04:00 -0500] labria: I finally settled on a fucked up but working way: just install a new server with a new version, make sure it works, and then copy the couchdb database =)
[2012-02-01 21:04:00 -0500] fujin: that is how I would do it.
[2012-02-01 21:04:00 -0500] labria: 0.8 => 0.9 => 0.10
[2012-02-01 21:04:00 -0500] slyphon: couchdb....
[2012-02-01 21:04:00 -0500] slyphon: ugh
[2012-02-01 21:04:00 -0500] labria: it's just about copying 1 file
[2012-02-01 21:04:00 -0500] slyphon: yeah
[2012-02-01 21:04:00 -0500] slyphon: the one good thing about couch
[2012-02-01 21:05:00 -0500] labria: lol
[2012-02-01 21:05:00 -0500] labria: yeah, the one and only good thing )
[2012-02-01 21:05:00 -0500] fujin: You can use server.rb settings to point it at a diff. db, too
[2012-02-01 21:05:00 -0500] fujin: and/or use replication to make easy copies of point-in-time of dbs
[2012-02-01 21:05:00 -0500] slyphon: besides the "not scaling" and "no auto compaction" and "erlang"
[2012-02-01 21:05:00 -0500] labria: did you ever manage to actually make couchdb replication work?
[2012-02-01 21:06:00 -0500] fujin: Yes.
[2012-02-01 21:06:00 -0500] slyphon: only by pinging it via cron
[2012-02-01 21:06:00 -0500] labria: Cool!
[2012-02-01 21:06:00 -0500] fujin: Ubuntu cloud uses couchdb replication to replicate your address book, bookmarks, across multiple devices
[2012-02-01 21:07:00 -0500] slyphon: not anymore
[2012-02-01 21:07:00 -0500] slyphon: they couldn't make it scale
[2012-02-01 21:07:00 -0500] fujin: oh?
[2012-02-01 21:07:00 -0500] fujin: haven't been following, i guess
[2012-02-01 21:07:00 -0500] slyphon: yeah, there was an announcement a few weeks bakc
[2012-02-01 21:07:00 -0500] labria: They may. But I never managed to sync two couchdb instances
[2012-02-01 21:07:00 -0500] slyphon: couchdb is a toy with designer jeans on
[2012-02-01 21:08:00 -0500] labria: I wanted to make redundant 2-server chef installation
[2012-02-01 21:08:00 -0500] slyphon: it's the perfect example of hype completely outstripping the reality
[2012-02-01 21:09:00 -0500] fujin: you ever used it for anything slyphon ?
[2012-02-01 21:09:00 -0500] labria: Couch DB is a COOL toy. But not something I would dream of using in production. I even trust Mongo more =)
[2012-02-01 21:09:00 -0500] slyphon: yeah
[2012-02-01 21:09:00 -0500] slyphon: we did a video playcount app for a production video sharing site
[2012-02-01 21:09:00 -0500] slyphon: i spent 2 months trying to keep it up
[2012-02-01 21:10:00 -0500] slyphon: and from filling up all of my disk
[2012-02-01 21:10:00 -0500] slyphon: and you know, replicated
[2012-02-01 21:10:00 -0500] jtimberman: slyphon: i believe there's a document on the wiki about the 0.9->0.10 upgrade.
[2012-02-01 21:10:00 -0500] slyphon: and decided it was a total piece of shit
[2012-02-01 21:10:00 -0500] fujin: I linked it earlier jtimberman
[2012-02-01 21:10:00 -0500] fujin: slyphon: what version of couch?
[2012-02-01 21:10:00 -0500] labria: Couch is very-very strict about what you can do with it without bumping into CPU/Disk issues
[2012-02-01 21:10:00 -0500] slyphon: jtimberman: yeah, fujin pointed me there, after busting my balls
[2012-02-01 21:10:00 -0500] fujin: i dunno about storing video in couchdb
[2012-02-01 21:10:00 -0500] jtimberman: oh ok
[2012-02-01 21:10:00 -0500] slyphon: jtimberman: how goes?
[2012-02-01 21:10:00 -0500] slyphon: fujin: nono
[2012-02-01 21:10:00 -0500] slyphon: we didn't store videos
[2012-02-01 21:11:00 -0500] fujin: word, was gonna say
[2012-02-01 21:11:00 -0500] slyphon: we stored a little data about users playing videos
[2012-02-01 21:11:00 -0500] slyphon: just metadata
[2012-02-01 21:11:00 -0500] jtimberman: chef-server as a file server, amirite?
[2012-02-01 21:11:00 -0500] slyphon: :)
[2012-02-01 21:11:00 -0500] fujin: ever thought of using hosted chef slyphon ?
[2012-02-01 21:11:00 -0500] fujin: how many nodes you got?
[2012-02-01 21:11:00 -0500] fujin: might be easier to manage.
[2012-02-01 21:11:00 -0500] slyphon: nah, could never get it through the higher-ups
[2012-02-01 21:12:00 -0500] labria: jtimberman: sadly it is when it comes to cookbook files. Would love to have them served as static content with apache/nginx
[2012-02-01 21:12:00 -0500] slyphon: we're running on a huge private vmware cloud
[2012-02-01 21:12:00 -0500] slyphon: vpshere 5 is *all* that, i have to say
[2012-02-01 21:12:00 -0500] fujin: i think there is knife support for vsphere and you can get a hosted-chef appliance inside of the firewall, too
[2012-02-01 21:13:00 -0500] slyphon: well
[2012-02-01 21:13:00 -0500] slyphon: maybe
[2012-02-01 21:13:00 -0500] slyphon: but, you know, i can do this for free :)
[2012-02-01 21:13:00 -0500] slyphon: well
[2012-02-01 21:13:00 -0500] slyphon: "free"
[2012-02-01 21:13:00 -0500] jtimberman: "free"
[2012-02-01 21:13:00 -0500] labria: "free" =)
[2012-02-01 21:13:00 -0500] fujin: FREEEEE AS THE WIND BLOWS
[2012-02-01 21:13:00 -0500] slyphon: my salary is a "sunk cost"
[2012-02-01 21:13:00 -0500] labria: Usually you end up with a employee dedicated to it )
[2012-02-01 21:14:00 -0500] labria: (like me)
[2012-02-01 21:14:00 -0500] slyphon: yep
[2012-02-01 21:14:00 -0500] slyphon: although, i was the pilot case
[2012-02-01 21:14:00 -0500] slyphon: now the rest of the company is gonna shift
[2012-02-01 21:14:00 -0500] slyphon: most likely
[2012-02-01 21:15:00 -0500] slyphon: b/c nobody wants to maintain that huge cfengine monstrosity
[2012-02-01 21:15:00 -0500] brandoma: and the wheel of monstrosity keeps on turnin'
[2012-02-01 21:15:00 -0500] fujin: LOLL
[2012-02-01 21:15:00 -0500] fujin: so you already have some cfengine
[2012-02-01 21:16:00 -0500] fujin: i didn' teven have to bust your balls man
[2012-02-01 21:16:00 -0500] fujin: already busted
[2012-02-01 21:16:00 -0500] slyphon: that wasn't mine
[2012-02-01 21:16:00 -0500] slyphon: i tried using that for about 4 weeks, and just gave up
[2012-02-01 21:16:00 -0500] fujin: lolol just playin
[2012-02-01 21:16:00 -0500] fujin: haha yeah
[2012-02-01 21:16:00 -0500] slyphon: "Wait, i can't specify the order of operations?!"
[2012-02-01 21:16:00 -0500] fujin: I started with puppet when my old senior engineer tried to have me setup cfengine (isp job)
[2012-02-01 21:16:00 -0500] slyphon: "the FUCK?!"
[2012-02-01 21:17:00 -0500] fujin: oh yeh you just have to write a perl script to generate the files in the right orddr
[2012-02-01 21:17:00 -0500] fujin: and then rsync it around the network
[2012-02-01 21:17:00 -0500] labria: that's automation!
[2012-02-01 21:18:00 -0500] labria: rsync + for loop with ssh "update_shit.pl" =)
[2012-02-01 21:21:00 -0500] miah: cfengine made me want to eat puppies
[2012-02-01 21:21:00 -0500] labria: I had a funny chef-fuckup today. We deploy from Artifactory, and somehow metadata files there got fucked up and rolled back 1 month. Chef happily decided we're rolling back and restored dozens of servers to month-old versions of different shit.
[2012-02-01 21:22:00 -0500] miah: fun
[2012-02-01 21:22:00 -0500] fujin: lol!
[2012-02-01 21:22:00 -0500] labria: fun was restoring it manually =)
[2012-02-01 21:24:00 -0500] labria: That's what you get when you trust a java product =)
[2012-02-01 21:24:00 -0500] miah: lol
[2012-02-01 21:24:00 -0500] miah: i dont personally have any problems with properly written java software, musth like any other language really. has its strengths and weaknesses. has good and bad programmers.
[2012-02-01 21:25:00 -0500] labria: yes, of course
[2012-02-01 21:25:00 -0500] labria: but somehow, you always bump into shitty ones...
[2012-02-01 21:26:00 -0500] miah: depends on where you work
[2012-02-01 21:27:00 -0500] labria: It's like hiring java devs. Most of them are quite close-minded 8-to-5 office rats =( You gotta interview 20 to find one you can actually talk to.
[2012-02-01 21:35:00 -0500] miah: same for sysadmins
[2012-02-01 21:35:00 -0500] |shad0w|: is there a better way to add service actions than this? https://gist.github.com/1719608
[2012-02-01 21:36:00 -0500] |shad0w|: including that as a library in my cb at the moment
[2012-02-01 21:39:00 -0500] fujin: |shad0w|: no, that is standard, nice feature btw!
[2012-02-01 21:39:00 -0500] fujin: thought of opening a ticket and contributing?
[2012-02-01 21:40:00 -0500] |shad0w|: haven't looked to see what .10 looks like
[2012-02-01 21:40:00 -0500] |shad0w|: stuck on .9 atm
[2012-02-01 21:40:00 -0500] |shad0w|: when I have some spare cycles there is a lot of work I want to do
[2012-02-01 21:41:00 -0500] |shad0w|: like fixing the uid/gid logic in most of the providers. While not smart, you can have a user of numerals with a differing uid, need to add force option to the link provider, etc etc etc
[2012-02-01 21:41:00 -0500] |shad0w|: time, I has none
[2012-02-01 21:42:00 -0500] labria: Because of a similar hack I'm stuck with 0.10.4 for now. They changed the lib and my hack now fails )
[2012-02-01 21:43:00 -0500] |shad0w|: yeah, I'm dreading making mine version aware
[2012-02-01 21:43:00 -0500] |shad0w|: when it comes to that
[2012-02-01 21:43:00 -0500] labria: btw, does anyone know a better way of getting pure JSON form a search query than calling the sold server "manually"?
[2012-02-01 21:43:00 -0500] labria: Initializing 100+ nodes from json take _forever_
[2012-02-01 21:44:00 -0500] labria: *takes
[2012-02-01 21:44:00 -0500] labria: while I only need 2-3 normal attributes from my own ohai plugin
[2012-02-01 21:45:00 -0500] labria: err automatic, ohai attrs are in automatic IIRC
[2012-02-01 21:54:00 -0500] avleen: hey guys
[2012-02-01 21:54:00 -0500] avleen: i have a question..
[2012-02-01 21:54:00 -0500] avleen: is there some way to get chef-client to know it is running for the first time on a machine and so something different than normal?
[2012-02-01 21:55:00 -0500] avleen: i've been googling and I see references to a "first-boot.json", but I don't know if this is some special file or what
[2012-02-01 21:56:00 -0500] avleen: eg, would chef-client realise that it exists at /etc/chef/first-boot.json automatically and only run it the first time?
[2012-02-01 21:57:00 -0500] maek: anyone familiar with the white list cookbook? Im using it https://gist.github.com/1719729 like so and the nodes arent getting recipes or roles saved to the chef-server but there run_list is filled out. any ideas on what I can add to the white list attributes to get recipes and roles saved?
[2012-02-01 21:57:00 -0500] |shad0w|: avleen, I handle that in my bootstrap script
[2012-02-01 21:57:00 -0500] maek: they arent ohai facts that I can see
[2012-02-01 21:57:00 -0500] yfeldblum: when you do `knife bootstrap` (or `knife CLOUD server create`, which internally does `knife bootstrap`), at the end of the bootstrap it writes out a `/etc/chef/first-boot.json` file and then runs `chef-client -j /etc/chef/first-boot.json`
[2012-02-01 21:58:00 -0500] Brad_K: yfeldblum: so, you should be able to do a "ps auxww | grep chef-client" and see if you find "first-boot.json" on the command line for chef-client?  cool.
[2012-02-01 22:03:00 -0500] yfeldblum: i'm sure there's a better way to tell
[2012-02-01 22:03:00 -0500] yfeldblum: also what's the use case?
[2012-02-01 22:03:00 -0500] ssd7_: Chef::Config[:json_attribs] perhaps?
[2012-02-01 22:04:00 -0500] ssd7_: But, I won't recommend branching based on whether chef has run for the first time.  Seems better to branch based on the actual state of the system
[2012-02-01 22:05:00 -0500] moos3: is there away to make chef automatically accept host keys when executing ssh commands ?
[2012-02-01 22:05:00 -0500] labria: 1) configure ssh to ignore them
[2012-02-01 22:05:00 -0500] labria: 2) add all of them to known_hosts in advance
[2012-02-01 22:06:00 -0500] ssd7_: moos3: Are you talking about when using knife ssh?
[2012-02-01 22:10:00 -0500] jtimberman: avleen: the first-boot.json file is named by convention only.
[2012-02-01 22:10:00 -0500] moos3: ssd7_ in one of my recipes i have a rsync
[2012-02-01 22:11:00 -0500] jtimberman: moos3: StrictHostKeyChecking no
[2012-02-01 22:11:00 -0500] jtimberman: moos3: in ~/.ssh/config
[2012-02-01 22:11:00 -0500] moos3: k
[2012-02-01 22:11:00 -0500] jtimberman: moos3: its an ssh client option
[2012-02-01 22:11:00 -0500] jtimberman: so system-wide, /etc/ssh/ssh_config
[2012-02-01 22:12:00 -0500] jtimberman: i always forget the stupid syntax to use it with ssh -o tho
[2012-02-01 22:12:00 -0500] jtimberman: :)
[2012-02-01 22:12:00 -0500] jtimberman: thats what man pages are for
[2012-02-01 22:12:00 -0500] moos3: k
[2012-02-01 22:13:00 -0500] jtimberman: moos3: disclaimer: you're disabling a security feature :)
[2012-02-01 22:13:00 -0500] moos3: yea
[2012-02-01 22:13:00 -0500] moos3: just need it for the inital data sync
[2012-02-01 22:16:00 -0500] miah: i just have a cookbook distribute the ssh-host-key to all the hosts
[2012-02-01 22:16:00 -0500] moos3: nice
[2012-02-01 22:17:00 -0500] jtimberman: there's that too :)
[2012-02-01 22:17:00 -0500] miah: so all hosts are aware of other hosts host keys, and i also include stuff like github etc
[2012-02-01 22:17:00 -0500] jtimberman: http://ckbk.it/ssh_host_key iirc
[2012-02-01 22:17:00 -0500] miah: yup
[2012-02-01 22:17:00 -0500] miah: http://community.opscode.com/cookbooks/ssh_known_hosts
[2012-02-01 22:17:00 -0500] miah: that one
[2012-02-01 22:37:00 -0500] ssd7_: I <3 ssh_known_hosts
[2012-02-01 22:45:00 -0500] rocky: anyone here using chef-jenkins? i'm trying to configure a new job by following the readme but getting an error that the jenkins job config file doesn't exist (my template jenkins job config file is getting picked up)
[2012-02-01 22:46:00 -0500] rocky: coderanger, yep i do ;)
[2012-02-01 22:46:00 -0500] coderanger: Heh
[2012-02-01 22:46:00 -0500] rocky: coderanger, ^^ see the question i just asked above?
[2012-02-01 22:47:00 -0500] coderanger: I haven't used it, but got a link to the recipe?
[2012-02-01 22:47:00 -0500] rocky: https://github.com/fnichol/chef-jenkins
[2012-02-01 22:47:00 -0500] fujin: yeh i use it
[2012-02-01 22:47:00 -0500] fujin: pennyworth?
[2012-02-01 22:47:00 -0500] bawt: pennyworth is https://github.com/heavywater/pennyworth
[2012-02-01 22:48:00 -0500] fujin: https://github.com/heavywater/chef-pennyworth/blob/develop/recipes/default.rb#L92
[2012-02-01 22:48:00 -0500] rocky: fujin, is pennyworth better than chef-jenkins ?
[2012-02-01 22:48:00 -0500] rocky: or does it merely depend on chef-jenkins?
[2012-02-01 22:48:00 -0500] fujin: it uses chef-jenkins
[2012-02-01 22:49:00 -0500] hippiehacker: anyone running chef-client as a service on windows?
[2012-02-01 22:50:00 -0500] jbz: guuuh
[2012-02-01 22:50:00 -0500] jbz: this stoopid handler is kicking my ass.
[2012-02-01 22:51:00 -0500] jbz: So apparently the 'run_state.start_time' that my handler is given is *NOT* the time at which Chef writes *** Chef 0.10.x *** into the logfile.
[2012-02-01 22:51:00 -0500] jbz: It's some time *later than that*
[2012-02-01 22:52:00 -0500] rocky: fujin, maybe you can take a quick look at my recipe and corresponding error output?   http://paste.pocoo.org/show/544351/   and   http://paste.pocoo.org/show/544352/
[2012-02-01 22:52:00 -0500] rocky: i'm a relative jenkins and chef newbie
[2012-02-01 22:53:00 -0500] fujin: rocky: does /home/jenkins exist ?
[2012-02-01 22:54:00 -0500] rocky: fujin, yes, but shouldn't it succeed using /tmp/whatever ? (i mean this is the file that gets generated by the cookbook right?)
[2012-02-01 22:54:00 -0500] fujin: right, the error message is strange that is all
[2012-02-01 22:55:00 -0500] hippiehacker: https://github.com/opscode/cookbooks/tree/master/chef-client doesn't support windows, does just kickstarting it manually via knife winrm via 'chef-client -c c:\chef\client.rb -d -i 300' make sense?
[2012-02-01 22:55:00 -0500] fujin: rocky: that's erroring out actually trying to move the rendered template into place from /tmp
[2012-02-01 22:55:00 -0500] fujin: rocky: have you got more than one chef client running?
[2012-02-01 22:56:00 -0500] rocky: fujin, it's possible it's running as a diff user than jenkins ... so no write access to /home/jenkins ... is there an easy way to test for this?
[2012-02-01 22:56:00 -0500] fujin: no, run chef as root
[2012-02-01 22:56:00 -0500] fujin: yes, there is an easy way to test for it
[2012-02-01 22:56:00 -0500] fujin: it would be EACCES not ENOENT though
[2012-02-01 22:57:00 -0500] fujin: what user is chef running as ?
[2012-02-01 22:57:00 -0500] rocky: well i'm running against ubunt on ec2... as the ubuntu user, and i'm telling it to use sudo with --sudo so isn't that equiv of running as root ?
[2012-02-01 22:57:00 -0500] hippiehacker: daemonizing chef-client on windows results in  segfault 8)
[2012-02-01 22:58:00 -0500] rocky: i mean i'm running this with knife bootstrap and using the --sudo option
[2012-02-01 22:59:00 -0500] fujin: ya that should be fine
[2012-02-01 22:59:00 -0500] rocky: fujin, yeah the command i'm running is:   knife bootstrap --sudo -i ../keys/aws/appsembler.pem ec2-107-21-154-193.compute-1.amazonaws.com -x ubuntu -r 'role[jenkins]'
[2012-02-01 23:00:00 -0500] fujin: happens every run ?
[2012-02-01 23:00:00 -0500] jbz: Has anyone ever tried to pull out the logs of just the current chef run from within a cookbook or handler?
[2012-02-01 23:01:00 -0500] rocky: fujin, yup
[2012-02-01 23:01:00 -0500] rocky: fujin, i've run this now about 5x
[2012-02-01 23:01:00 -0500] fujin: where'd you get the jenkins cookbook?
[2012-02-01 23:01:00 -0500] fujin: i can try to reproduce..
[2012-02-01 23:01:00 -0500] fujin: i think the one we use for pennyworth has a few fixes
[2012-02-01 23:01:00 -0500] rocky: fujin, https://github.com/fnichol/chef-jenkins
[2012-02-01 23:03:00 -0500] fujin: sec
[2012-02-01 23:03:00 -0500] fujin: will try it
[2012-02-01 23:03:00 -0500] fujin: whats in your jenkins role ?
[2012-02-01 23:03:00 -0500] |shad0w|: avleen, you still around?
[2012-02-01 23:04:00 -0500] arrowtoknee: are there any gems or libraries that I can use to connect my rails app in to chef?  specifically i want to update some data bags via a rails app
[2012-02-01 23:04:00 -0500] rocky: fujin, one sec
[2012-02-01 23:04:00 -0500] rocky: fujin, http://paste.pocoo.org/show/544359/
[2012-02-01 23:04:00 -0500] fujin: spice?
[2012-02-01 23:04:00 -0500] bawt: spice is https://github.com/danryan/spice/
[2012-02-01 23:04:00 -0500] fujin: arrowtoknee: ^
[2012-02-01 23:05:00 -0500] fujin: rocky: that doesn't seem right, including itself =P
[2012-02-01 23:05:00 -0500] fujin: anyway it's cool
[2012-02-01 23:05:00 -0500] fujin: will test, give me a sec
[2012-02-01 23:06:00 -0500] arrowtoknee: thanks
[2012-02-01 23:06:00 -0500] arrowtoknee: i used to write my own gems but then i got an arrow to the knee
[2012-02-01 23:09:00 -0500] rocky: fujin, lol sorry, i'm still learning here
[2012-02-01 23:13:00 -0500] hippiehacker: https://gist.github.com/1720069 10.6 and 10.8 MSIs core-dump on windows when trying to daemonize 8(
[2012-02-01 23:14:00 -0500] hippiehacker: segfault in gems/win32-process-0.6.5/lib/win32/process:1120
[2012-02-01 23:15:00 -0500] jessicab: hippiehacker - i havent tested it at all, but you might find this bug interesting.. its closed so it seems like -d should work at least http://tickets.opscode.com/browse/CHEF-1736
[2012-02-01 23:15:00 -0500] jessicab: not really sure about -i though
[2012-02-01 23:17:00 -0500] rocky: fujin, any luck?
[2012-02-01 23:18:00 -0500] hippiehacker: jessicab: I'll take a look
[2012-02-01 23:18:00 -0500] fujin: rocky: the branch of chef-jenkins I have doesn't even run
[2012-02-01 23:19:00 -0500] hippiehacker: jessicab: looks like a windows service is created
[2012-02-01 23:20:00 -0500] jessicab: hippiehacker - looks like i missed something on that bug.. resolved in 10.10, but theres a work around at the bottom of it
[2012-02-01 23:22:00 -0500] rocky: fujin, ugh
[2012-02-01 23:23:00 -0500] hippiehacker: jessicab: I'm not sure I know where service_manager.rb is
[2012-02-01 23:23:00 -0500] hippiehacker: our windows boxes don't have a chef-repo, they are just clients
[2012-02-01 23:23:00 -0500] fujin: rocky: sec
[2012-02-01 23:24:00 -0500] rocky: k
[2012-02-01 23:24:00 -0500] hippiehacker: found it: https://github.com/opscode/chef/blob/master/chef/distro/windows/service_manager.rb 8)
[2012-02-01 23:27:00 -0500] hippiehacker: jessicab: is there a way to upgrade the chef gem to 10.10 via a chef, so that on the next run we could install the service?
[2012-02-01 23:27:00 -0500] jbz: whew.  Finally.
[2012-02-01 23:28:00 -0500] jbz: Managed a get a handler to spit out the subset of chef log lines concerning only the run that invoked it.
[2012-02-01 23:28:00 -0500] jtimberman: hippiehacker: chef 0.10.10 has not been released.
[2012-02-01 23:28:00 -0500] jtimberman: hippiehacker: but, you can use gem_package with the version parameter to install the Chef gem to a particular version
[2012-02-01 23:28:00 -0500] jbz: jtimberman: Is there a way to only invoke a handler if a particular resource fires?
[2012-02-01 23:28:00 -0500] jtimberman: i'd put the version in an attribute
[2012-02-01 23:29:00 -0500] jtimberman: jbz: not that i'm aware of off hand
[2012-02-01 23:29:00 -0500] jbz: Hm.  Thanks.
[2012-02-01 23:29:00 -0500] hippiehacker: thanks jtimberman
[2012-02-01 23:29:00 -0500] jtimberman: hippiehacker: then, when you want to install a particular version, modify the attribute for the node (i'd do it via a role)
[2012-02-01 23:30:00 -0500] hippiehacker: maybe I could just include service_manager.rb as a library for now
[2012-02-01 23:31:00 -0500] hippiehacker: It looks pretty self contained
[2012-02-01 23:31:00 -0500] hippiehacker: http://tickets.opscode.com/browse/CHEF-1736 + https://raw.github.com/opscode/chef/master/chef/distro/windows/service_manager.rb
[2012-02-01 23:38:00 -0500] hippiehacker: nevermind, it's not self-contained at all. I'll have to upgrade chef-client to something recent
[2012-02-01 23:40:00 -0500] rocky: fujin, still working? lol
[2012-02-01 23:41:00 -0500] fujin: yeh trying stuff
[2012-02-01 23:41:00 -0500] fujin: vagrant
[2012-02-01 23:41:00 -0500] fujin: i ran out of disk space was just tidying up some stuff
[2012-02-01 23:43:00 -0500] rocky: lol
[2012-02-01 23:49:00 -0500] hippiehacker: is there any particular reason that windows 2008R1 isn't supported? I have a veevee basebox that could facilitate testing
[2012-02-01 23:59:00 -0500] jaimef: hippiehacker: you need to use linux. unless you are stuck in New Zealand.
[2012-02-01 23:59:00 -0500] hippiehacker: 2008R1 is towards the bottom: https://github.com/hh/veewee/tree/feature/windows/templates
[2012-02-01 23:59:00 -0500] d[-_-]b: @fujin wub wub
[2012-02-01 23:59:00 -0500] jaimef: hippiehacker: this for II?

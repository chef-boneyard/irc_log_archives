[2012-02-09 08:01:00 -0500] l1x: you actually on the host and wget -qO /dev/null http://hg.rabbitmq.com/rabbitmq-c/archive/default.zip && echo "hurray" tells you hurray but the ruby client is not able to connect?
[2012-02-09 08:01:00 -0500] l1x: that is interesting
[2012-02-09 08:02:00 -0500] werdnativ: hmm, now vagrant provision worked again wonder if it's a flaky connection.
[2012-02-09 08:09:00 -0500] werdnativ: but I still don't have the /usr/lib/librabbitmq.so which is supposed to result from that recipe. I have the downloaded & unpacked files in /tmp/vagrant-chef-1 though. Puzzled.
[2012-02-09 08:12:00 -0500] werdnativ: actually it installed in /usr/local/lib, but the recipe is checking /usr/lib
[2012-02-09 08:15:00 -0500] werdnativ: my mistake, rabbitmq::libs was added by me, not opscode. :-/
[2012-02-09 09:14:00 -0500] m4rcu5: im trying to do some logic in a template to only include a certain section if the current running recipe is ntp::server, is there a way to check the name of the current running recipe?
[2012-02-09 09:15:00 -0500] BryanWB: m4rcu5: i believe so but can remember exactly
[2012-02-09 09:17:00 -0500] m4rcu5: BryanWB: i did remember that there was a way, but i cant find how :-/
[2012-02-09 09:19:00 -0500] BryanWB: m4rcu5: i bet u can discover it playing w/ shef
[2012-02-09 09:24:00 -0500] m4rcu5: BryanWB: never played with shef :-) but it should be in there somewhere
[2012-02-09 09:26:00 -0500] BryanWB: iirc, i found it using shef
[2012-02-09 09:36:00 -0500] m4rcu5: BryanWB: do you remember any more hints? :P im trying to find it
[2012-02-09 09:45:00 -0500] simon_d: I'm trying to do a simple thing "knife cookbook upload java" but it's not working. The apt cookbook is present. The error im getting is - Exception: NoMethodError: undefined method `each' for nil:NilClass
[2012-02-09 09:46:00 -0500] BryanWB: simon_d: there is an error in your cookbook
[2012-02-09 09:46:00 -0500] simon_d: its an opscode cookbook
[2012-02-09 09:47:00 -0500] simon_d: I've not made any modifications to it
[2012-02-09 09:47:00 -0500] BryanWB: simon_d: did u read the readmes?
[2012-02-09 09:47:00 -0500] BryanWB: the error comes from apt cookbook or java?
[2012-02-09 09:47:00 -0500] labria: simon_d does you local chef gem version match the server's one?
[2012-02-09 09:47:00 -0500] simon_d: maybe not word for word
[2012-02-09 09:48:00 -0500] simon_d: libria: yes it does
[2012-02-09 09:48:00 -0500] simon_d: labria: ^
[2012-02-09 09:48:00 -0500] BryanWB: i wrote most of java ckbk but am not opscoder
[2012-02-09 09:49:00 -0500] simon_d: using -VV I get a little more info: /Library/Ruby/Gems/1.8/gems/chef-0.10.8/lib/chef/knife/cookbook_upload.rb:216:in `check_server_side_cookbooks': undefined method `each' for nil:NilClass (NoMethodError)
[2012-02-09 09:49:00 -0500] BryanWB: on knife upload?
[2012-02-09 09:50:00 -0500] simon_d: yes knife cookbook upload java -VV
[2012-02-09 09:50:00 -0500] BryanWB: u uploaded apt before?
[2012-02-09 09:51:00 -0500] auxome: If I want a recipe to modify a file (example, change enabled=0 to enabled=1 if it exists)...anyone able to point me in the right direction for that?
[2012-02-09 09:51:00 -0500] simon_d: I uploaded java and it failed so I then added apt and uploaded that then tried to upload java again
[2012-02-09 09:52:00 -0500] BryanWB: what output does knife cookbook test java    do?
[2012-02-09 09:52:00 -0500] m4rcu5: auxome: nice way would be to manage the whole file with chef, dirty way is to call a sed on the file
[2012-02-09 09:52:00 -0500] BryanWB: auxome: i recommend managing the whole file
[2012-02-09 09:53:00 -0500] simon_d: BryanWB: runs through fine and doesn't highlight any issue
[2012-02-09 09:54:00 -0500] auxome: m4rcu5 / BryanWB -- I'm not sure how to go about that in this situation...i'm bootstrapping amazon linux in ec2 using knife ec2 server create... the recipe to install haproxy won't work because I need to enable the EPEL repos before it hits the install step. Maybe I'm missing the obvious
[2012-02-09 09:54:00 -0500] BryanWB: hmm, weird, trouble uploading any other cookbooks?
[2012-02-09 09:54:00 -0500] simon_d: no problem
[2012-02-09 09:54:00 -0500] BryanWB: auxome: add recipe   yumrepo::epel
[2012-02-09 09:55:00 -0500] auxome: BryanWB -- cool ty...still learning, appreciate the pointers
[2012-02-09 09:55:00 -0500] BryanWB: simon_d: i will have to look at your issue later, sorry gtg
[2012-02-09 09:56:00 -0500] simon_d: BryanWB: thanks for trying
[2012-02-09 10:25:00 -0500] simon_d: So I've had trouble using knife to upload the java cookbook from opscode com site which i solved by using the github version instead. Now I've moved onto the opscode com site version of elasticsearch and getting the same issue! Exception: NoMethodError: undefined method `each' for nil:NilClass
[2012-02-09 10:25:00 -0500] simon_d: Should I just stop using the opscode com site and get all my opscode cookbooks from github repo instead?
[2012-02-09 12:09:00 -0500] BryanWB: m4rcu5: u around? could u try `knife cookbook site install java` and then `knife cookbook java` to see if u get the same problem simon_d didt?
[2012-02-09 12:13:00 -0500] itwasntandy: ATAL: Cannot find sub command for: 'cookbook java'
[2012-02-09 12:13:00 -0500] itwasntandy: s/ATAL/FATAL/
[2012-02-09 12:13:00 -0500] itwasntandy: (I did the site install first)
[2012-02-09 12:15:00 -0500] BryanWB: itwasntandy: sorry  `knife cookbook upload java'
[2012-02-09 12:15:00 -0500] itwasntandy: $ knife cookbook upload java
[2012-02-09 12:15:00 -0500] itwasntandy: Uploading java             [1.1.0]
[2012-02-09 12:15:00 -0500] itwasntandy: upload complete
[2012-02-09 12:15:00 -0500] BryanWB: shit, then i have no idea what simon_d's problems was
[2012-02-09 12:16:00 -0500] BryanWB: itwasntandy: tks, u gave me some piece of mind
[2012-02-09 12:19:00 -0500] BryanWB: s/piece/peace/
[2012-02-09 12:55:00 -0500] c64: Hey guys - I'm new to chef. I'm using a bunch of cookbooks (from git), and wrote a few custom ones for ourselves. I not have a role which gets a clean image up-and-running.
[2012-02-09 12:56:00 -0500] c64: My question is how to continue
[2012-02-09 12:56:00 -0500] c64: I understand that recipes should be indepotent
[2012-02-09 12:56:00 -0500] c64: but how do I manage the day-to-day of chef
[2012-02-09 12:56:00 -0500] c64: ?
[2012-02-09 12:57:00 -0500] ashb: c64: I don't quite understand your question
[2012-02-09 12:58:00 -0500] c64: ...I see that the recipes in the community Git don't seem to be "signed-up" to that philosochy - for example, the Java and Tomcat  recipes always install new packages
[2012-02-09 12:58:00 -0500] ashb: c64: ah, chef it self will do the check
[2012-02-09 12:58:00 -0500] ashb: install this package if it is not already installed
[2012-02-09 12:58:00 -0500] c64: hey Ashb - What's I'm really looking for is some sort of documentation of what to do AFTER the nodes are installed and configured
[2012-02-09 12:58:00 -0500] c64: I see a LOT fo documentation of how to write recipes to install things, etc
[2012-02-09 12:59:00 -0500] c64: but I'm having issues finding documentation about the continuing maintenanace of nodes
[2012-02-09 12:59:00 -0500] c64: examples of people performing software deployment with Chef
[2012-02-09 12:59:00 -0500] ashb: the recipes describe the state that the node (or the bits you manage) should be in
[2012-02-09 12:59:00 -0500] ashb: there is no 'after' really
[2012-02-09 12:59:00 -0500] c64: examples of continuous deployment with chef
[2012-02-09 13:00:00 -0500] c64: people write about running chef-client a few times a day
[2012-02-09 13:00:00 -0500] ashb: i have chef-client running as a deamon
[2012-02-09 13:00:00 -0500] c64: but I can't see any good examples of managing roles which change.
[2012-02-09 13:00:00 -0500] ashb: so it runs every 30 mins
[2012-02-09 13:00:00 -0500] c64: exactly
[2012-02-09 13:00:00 -0500] c64: so, how to change your roles
[2012-02-09 13:00:00 -0500] c64: I mean
[2012-02-09 13:00:00 -0500] c64: If I have 50 servers
[2012-02-09 13:00:00 -0500] ashb: we do Cont. Deploy by using the application cookbook and having the deploy revision set to a tag
[2012-02-09 13:00:00 -0500] c64: and I want to do a gradual roll-out of a new version of our web app
[2012-02-09 13:00:00 -0500] ashb: then everytime chef runs it checks the value of that tag, and if its not what it deployed it runs the deployment steps
[2012-02-09 13:01:00 -0500] ashb: that would be harder, and is possibly the job for... R.I.Pinears orchestartion project. whats it called.
[2012-02-09 13:01:00 -0500] ashb: mcollective
[2012-02-09 13:02:00 -0500] c64: hmmm
[2012-02-09 13:02:00 -0500] c64: I'll look into that
[2012-02-09 13:03:00 -0500] c64: but, back to Chef -
[2012-02-09 13:03:00 -0500] c64: Is tehre a way to PUSH changes to a chef node?
[2012-02-09 13:03:00 -0500] c64: let's say I have a new sysadmin, and I add him to the users databag
[2012-02-09 13:03:00 -0500] c64: I wait 30 minutes until the next chef run?
[2012-02-09 13:04:00 -0500] c64: I think what I'm looking for is more of a paradigm of
[2012-02-09 13:04:00 -0500] ashb: knife ssh node-name run-chef
[2012-02-09 13:04:00 -0500] ashb: where run-chef is https://gist.github.com/1325982
[2012-02-09 13:04:00 -0500] c64: "Push version 15.5 to this node"
[2012-02-09 13:06:00 -0500] c64: "knife ssh node-name run-chef" isn't much different that running "ssh node-name chef-client"
[2012-02-09 13:06:00 -0500] c64: correct?
[2012-02-09 13:08:00 -0500] ashb: correct. the difference is that knife ssh can multiplex multiple nodes
[2012-02-09 13:08:00 -0500] ashb: node-name might is the wrong syntax actually
[2012-02-09 13:08:00 -0500] ashb: its knife ssh name:node-name run-chef
[2012-02-09 13:08:00 -0500] ashb: or knife ssh environment:production run-chef etc.
[2012-02-09 13:09:00 -0500] c64: That's interesting - I can keep a percentave of my servers in  a role of "beta"
[2012-02-09 13:09:00 -0500] c64: change the role attribute
[2012-02-09 13:10:00 -0500] c64: and push a run-shef to all my servers. Those without the "beta" role won't do anything...
[2012-02-09 13:10:00 -0500] c64: hmmm.
[2012-02-09 13:10:00 -0500] ashb: yeah something like that could work. I don't know of any pre-baked solution for that sort of gradual deployment already
[2012-02-09 13:11:00 -0500] ashb: you might have more luck asking on the mailing list
[2012-02-09 13:11:00 -0500] c64: I think that what originally got me worying is that
[2012-02-09 13:11:00 -0500] c64: I have a role which sets up the server
[2012-02-09 13:11:00 -0500] c64: and now I find myself REMOVING the ndoes from the role
[2012-02-09 13:11:00 -0500] c64: and creating a role for day-to-day maintenanace
[2012-02-09 13:11:00 -0500] ashb: that sounds wrong
[2012-02-09 13:11:00 -0500] ashb: what was making you do that?
[2012-02-09 13:12:00 -0500] c64: I don't really want my nodes ALWAYS checking if they should isntall java
[2012-02-09 13:12:00 -0500] c64: I'm looking for something like
[2012-02-09 13:12:00 -0500] c64: Adding a job which will be run by all the servers
[2012-02-09 13:12:00 -0500] c64: a SINGLE job
[2012-02-09 13:12:00 -0500] c64: or a few recipes
[2012-02-09 13:12:00 -0500] c64: and after they run, I don't need them anymore
[2012-02-09 13:12:00 -0500] c64: But this feels outside of the spirit of Chef...
[2012-02-09 13:13:00 -0500] c64: and finally, as I mentioned before,
[2012-02-09 13:14:00 -0500] c64: there's lots of documentation on evangelizing setting deployments up in Chef
[2012-02-09 13:14:00 -0500] c64: but not much on continuing configuratino management
[2012-02-09 13:14:00 -0500] BryanWB: i use roles
[2012-02-09 13:14:00 -0500] c64: LISA'2011 has great presentations on deploying chef
[2012-02-09 13:14:00 -0500] c64: and the WiKi
[2012-02-09 13:15:00 -0500] c64: but nothing on exmaples of MAINTAINING
[2012-02-09 13:15:00 -0500] c64: Hey Bryan -
[2012-02-09 13:15:00 -0500] c64: I was talking to AshB about day-to-day configuratino managenent
[2012-02-09 13:15:00 -0500] c64: and how I think I'm veering off-track
[2012-02-09 13:15:00 -0500] ashb: deploying vs maintaing isn't a distinction I make. I think of it as 'the node should be in this state. Make it so'
[2012-02-09 13:15:00 -0500] lflux_: I wouldn't mind some stuff about maintaining
[2012-02-09 13:16:00 -0500] c64: I'll go check this
[2012-02-09 13:16:00 -0500] c64: but
[2012-02-09 13:17:00 -0500] c64: again, not a criticism, I just don't udnerstand this so well
[2012-02-09 13:17:00 -0500] c64: for example, the Tomcat cookbook will install tomcat6 every time I run it
[2012-02-09 13:17:00 -0500] c64: and restart tomcat
[2012-02-09 13:17:00 -0500] c64: whether it's already installed or not
[2012-02-09 13:17:00 -0500] c64: same for the apache2 cookbook
[2012-02-09 13:17:00 -0500] ashb: that sounds like a bug in the tomcat cookbook then
[2012-02-09 13:18:00 -0500] c64: cool
[2012-02-09 13:18:00 -0500] c64: if that's the case, that means I'm not totally misunderstand things :-)
[2012-02-09 13:18:00 -0500] ashb: unless something is triggering a change in the config files (such as a timestamp that shouldn't be there)
[2012-02-09 13:18:00 -0500] c64: Don't take my word for it -
[2012-02-09 13:18:00 -0500] c64: it may be working properly
[2012-02-09 13:18:00 -0500] ashb: for instance my nodes use nginx and that doesn't restart, and only reloads (gracefully. yay nginx) if there is a change
[2012-02-09 13:18:00 -0500] c64: cook
[2012-02-09 13:19:00 -0500] c64: OK - then it's back to the kitchen for me
[2012-02-09 13:19:00 -0500] c64: thank you all for your help!
[2012-02-09 13:40:00 -0500] Mydalon: Hi, when I use knife I get this warning: "Invalid gemspec in [/var/lib/gems/1.8/specifications/json-1.6.1.gemspec]: invalid date format in specification: "2011-09-18 00:00:00.000000000Z""
[2012-02-09 13:40:00 -0500] Mydalon: How do I get rid of it?
[2012-02-09 13:40:00 -0500] Mydalon: It seems that everything works, though
[2012-02-09 13:49:00 -0500] m4rcu5: BryanWB: did you by any coincidence remeber the variable for the current running recipe name? i cant seem to find it
[2012-02-09 13:58:00 -0500] BryanWB: m4rcu5: sorry no :(, i suggest sending mail to ML
[2012-02-09 14:07:00 -0500] theozaurus1: Just been reading through how people are dealing with hostnames on EC2 with Chef, and just spotted this. http://lists.opscode.com/sympa/arc/chef/2010-08/msg00027.html. I was thinking of implementing something similar. Does anyone have any experience with this type of setup?
[2012-02-09 14:07:00 -0500] constr: Oh god can someone please give me access to a full application cookbook/rails/aws example before I explode PLEASE. Its impossibly difficult to figure out :(
[2012-02-09 14:23:00 -0500] Mydalon: How can I get rid of this message when using knife: "Invalid gemspec in [/var/lib/gems/1.8/specifications/json-1.6.1.gemspec]: invalid date format in specification: "2011-09-18 00:00:00.000000000Z""
[2012-02-09 14:23:00 -0500] Mydalon: I am not a ruby guy...
[2012-02-09 14:25:00 -0500] geekbri: yfeldblum: dumb question... the site-cookbooks directory where I'm keeping my personal chef cookbooks with librarian... what level should in the directory structure should it live at?
[2012-02-09 14:25:00 -0500] constr: Mydalon: The solution is just to delete your gems and gemspecs on the server. Cant tell you how to use chef for that though.
[2012-02-09 14:26:00 -0500] Mydalon: @constr I hope it is not the server.... I use hosted chef, so I can't delete ruby on the chef server ;-)
[2012-02-09 14:26:00 -0500] BryanWB: Mydalon: iirc u have to delete the line that says   "s.date = 2011-..."  in the ${gem_dir}/specificiations/json....gemspec file
[2012-02-09 14:26:00 -0500] BryanWB: but not 100% sure
[2012-02-09 14:26:00 -0500] yfeldblum: geekbri, top-level, same level as cookbooks/ ... also the ones in site-cookbooks should not be listed in your Cheffile at all, only their dependencies (from their metadata.rb files) should be listed in the Cheffile
[2012-02-09 14:27:00 -0500] Mydalon: BryanWB, I'll try that
[2012-02-09 14:27:00 -0500] Mydalon: thanx
[2012-02-09 14:27:00 -0500] constr: Mydalon: Oh you mean its chef itself thats saying that, not a ruby app of yours? Er, um ...
[2012-02-09 14:27:00 -0500] lusis: it's a rubygems problem
[2012-02-09 14:27:00 -0500] geekbri: yfeldblum: yeah.  I was reading the FAQ page on github... I just wanted to make sure I had the directory correct as i noticed the snippet said ../../site-cookbooks and that was confusing to me :)
[2012-02-09 14:27:00 -0500] lusis: I think if you upgrade your version of rubygems, it'll be fixed
[2012-02-09 14:27:00 -0500] lusis: but I don't remember
[2012-02-09 14:27:00 -0500] lusis: I just ignore it at this point
[2012-02-09 14:28:00 -0500] constr: either upgrade rubygems on the client, or if that doesnt work nuke all the gems like I said ^
[2012-02-09 14:28:00 -0500] Mydalon: constr, I don't have a ruby app
[2012-02-09 14:28:00 -0500] BryanWB: Mydalon: solution is here http://stackoverflow.com/questions/7290575/invalid-date-format-specification-in-gemspec, see 2nd answer
[2012-02-09 14:28:00 -0500] Mydalon: This happens when I do "knife status" or any other knife thing
[2012-02-09 14:28:00 -0500] Mydalon: BryanWB thank you!
[2012-02-09 14:28:00 -0500] constr: Mydalon: Your client is using ruby. Just try it manually for now and see what happens.
[2012-02-09 14:29:00 -0500] Mydalon: Great!
[2012-02-09 14:29:00 -0500] Mydalon: BryanWB, the solution you mentioned worked  fine!
[2012-02-09 14:35:00 -0500] geekbri: yfeldblum: have to say, I'm loving librarian right now :)
[2012-02-09 14:38:00 -0500] geekbri: yfeldblum: the only thing im confused about (or maybe I am not) is when I write my own cookbooks and store them in site-cookbooks right...then i upload them to the server... then i download them from the server. its going to drop them in the regular "cookbooks" directory right?  Not a huge deal just want to make sure I understand that right.
[2012-02-09 15:04:00 -0500] auduny: Hm. Is it easy to change the "version" attribute from a external role-attribute?
[2012-02-09 15:04:00 -0500] auduny: version as in package-version
[2012-02-09 15:07:00 -0500] mattray: auduny: sure
[2012-02-09 15:07:00 -0500] mattray: make an attribute in the cookbook for your version
[2012-02-09 15:07:00 -0500] mattray: like ['cookbook']['package_version'] = "2.1"
[2012-02-09 15:07:00 -0500] mattray: and then in the role you could override it
[2012-02-09 15:08:00 -0500] auduny: Yes. But how do i use it in the recipy?
[2012-02-09 15:08:00 -0500] mattray: and in the recipe you'd say version node['cookbook']['package_version']
[2012-02-09 15:08:00 -0500] auduny: Ok.
[2012-02-09 15:08:00 -0500] mattray: there are probably examples I could find, 1 sec
[2012-02-09 15:09:00 -0500] mattray: https://github.com/opscode/cookbooks/blob/master/zenoss/recipes/server.rb#L86
[2012-02-09 15:11:00 -0500] ssd7: Ohai Chefs
[2012-02-09 15:14:00 -0500] labria: ohai
[2012-02-09 15:15:00 -0500] Brad_K: ohai, didn't see you there.  ;-)
[2012-02-09 15:25:00 -0500] theozaurus1: At the moment we are using the default node_name and client_name for chef-client. This is limiting as it means manually configuring the hosts and hostname file. So we want to change it. What is the point of being able to specify the client_name differently from the node_name?
[2012-02-09 15:30:00 -0500] Brad_K: theozaurus1: we solve this problem by having a cookbook fix the hostname and the /etc/hosts file for us, and we feed in whatever hostname/clientname we want when we create the node.
[2012-02-09 15:32:00 -0500] yfeldblum: geekbri, not sure why you would be downloading your own cookbooks from the chef-server
[2012-02-09 15:33:00 -0500] theozaurus1: Brad_K: Do you make sure that it uses the same node, by making the node_name and client_name independent of the hostname?
[2012-02-09 15:34:00 -0500] Brad_K: theozaurus1: no, for us the nodename and the clientname and the output from `hostname -s` are all the same.
[2012-02-09 15:37:00 -0500] theozaurus1: Brad_K: So when you edit the hostname with the chef script does it then create a new node?!
[2012-02-09 15:38:00 -0500] Brad_K: nope.  it just takes the nodename that we specified when we created the node, and shoves that into `hostname`.
[2012-02-09 15:39:00 -0500] Brad_K: we do have the issue that our provider doesn't properly populate the FQDN of the node, so we have to fix that problem ourselves.  that is the original reason this cookbook was written.
[2012-02-09 15:40:00 -0500] savant: is there a chef book I can buy?
[2012-02-09 15:41:00 -0500] savant: Navigating the docs is a bit difficult.
[2012-02-09 15:41:00 -0500] Brad_K: savant: there is a book out there that involves chef, but it's pretty specific to a particular sub-issue.  there is a more general chef book that is under development, but i don't know the status.
[2012-02-09 15:41:00 -0500] savant: the testing driven deployment one?
[2012-02-09 15:41:00 -0500] savant: yeah
[2012-02-09 15:42:00 -0500] savant: dont think that one would be too useful
[2012-02-09 15:42:00 -0500] Brad_K: savant: yeah, the same author is working on a much more general book, or so i've heard.
[2012-02-09 15:42:00 -0500] savant: what about moving the wiki to github?
[2012-02-09 15:42:00 -0500] savant: and having something like sphinx generate it?
[2012-02-09 15:42:00 -0500] savant: then I could just grab a pdf or ebook
[2012-02-09 15:42:00 -0500] theozaurus1: Brad_K: Could you point me the direction of the scripts you use to set this up?
[2012-02-09 15:42:00 -0500] Brad_K: savant: you can get a PDF of it today.
[2012-02-09 15:43:00 -0500] savant: where?
[2012-02-09 15:43:00 -0500] savant: oh im an idiot
[2012-02-09 15:43:00 -0500] Brad_K: theozaurus1: they're all custom, and wouldn't be of much use to you.
[2012-02-09 15:43:00 -0500] savant: oh its old.
[2012-02-09 15:43:00 -0500] Brad_K: savant: no, you can generate your own PDF from the current content.
[2012-02-09 15:43:00 -0500] savant: how?
[2012-02-09 15:44:00 -0500] theozaurus1: Brad_K: Thanks for the pointers!
[2012-02-09 15:44:00 -0500] Brad_K: theozaurus1: you're welcome!
[2012-02-09 15:45:00 -0500] Brad_K: theozaurus1: btw, this was one of the first cookbooks that i believe i wrote myself, so the concept is actually quite simple.  ;-)
[2012-02-09 15:47:00 -0500] Brad_K: savant: sorry, i thought there was a more obvious link that told you how to generate your own PDF.  still looking.
[2012-02-09 15:48:00 -0500] savant: sokay
[2012-02-09 15:48:00 -0500] savant: i more or less know what im doing in chef
[2012-02-09 15:48:00 -0500] savant: except i havent read the updates since 0.9.8
[2012-02-09 15:48:00 -0500] savant: so idk whats state of the art
[2012-02-09 15:48:00 -0500] Brad_K: maybe one of the guys who works at opscode can provide a hint about where the link is.  i can't find it myself.
[2012-02-09 15:49:00 -0500] Brad_K: but there have been quite a few changes between 0.9.8 and 0.10.8.  i would encourage you to at least check those out.
[2012-02-09 15:49:00 -0500] savant: yeah
[2012-02-09 15:49:00 -0500] savant: changelog wasn't very helpful
[2012-02-09 15:49:00 -0500] savant: is there like a release page
[2012-02-09 15:50:00 -0500] savant: "guys, we have this point release with these 7 awesome features"
[2012-02-09 15:50:00 -0500] savant: ?
[2012-02-09 15:50:00 -0500] Brad_K: http://wiki.opscode.com/display/chef/Release+Notes ?
[2012-02-09 15:50:00 -0500] savant: yeah
[2012-02-09 15:50:00 -0500] savant: thats useless
[2012-02-09 15:50:00 -0500] JasonBoxLaptop: lol
[2012-02-09 15:50:00 -0500] savant: since its like "derp derp derp technical jargon that doesn't mean much unless you read the issue derp derp derp"
[2012-02-09 15:51:00 -0500] savant: sorry if I seem rude :)
[2012-02-09 15:51:00 -0500] savant: maybe something less technical would be awesome
[2012-02-09 15:51:00 -0500] savant: or like a newsletter i can subscribe to
[2012-02-09 15:51:00 -0500] Brad_K: i'm looking.
[2012-02-09 15:51:00 -0500] savant: thanks plenty :)
[2012-02-09 15:51:00 -0500] JasonBoxLaptop: I can see where that could be helpful; that's a ton of tickets closed
[2012-02-09 15:52:00 -0500] JasonBoxLaptop: I think the release blog posts are pretty good
[2012-02-09 15:52:00 -0500] JasonBoxLaptop: They hit the highlights there, iirc
[2012-02-09 15:52:00 -0500] savant: oh where?
[2012-02-09 15:52:00 -0500] JasonBoxLaptop: opscode blog
[2012-02-09 15:52:00 -0500] savant: opscode blog needs categories
[2012-02-09 15:53:00 -0500] Brad_K: there are categories.
[2012-02-09 15:53:00 -0500] Brad_K: there's a category just for announcements.
[2012-02-09 15:54:00 -0500] Brad_K: like when chef 0.10.0 was released  see http://www.opscode.com/blog/2011/05/02/chef-0-10-0-released/
[2012-02-09 15:54:00 -0500] savant: oh snap
[2012-02-09 15:54:00 -0500] savant: didnt even see that
[2012-02-09 15:54:00 -0500] Brad_K: scroll down the page, look along the right side.
[2012-02-09 15:54:00 -0500] savant: since its on the sidebar.
[2012-02-09 15:55:00 -0500] Brad_K: i don't see any announcements for 0.10.4 or 0.10.8, however.
[2012-02-09 15:55:00 -0500] savant: they dont talk about most of the releases
[2012-02-09 15:55:00 -0500] savant: like 0.6.10 => 0.10.6
[2012-02-09 15:55:00 -0500] savant: something like this would be good: http://bakery.cakephp.org/articles/lorenzo/2012/02/06/cakephp_2_0_6_released
[2012-02-09 15:55:00 -0500] savant: where it has a quick summary of what went down
[2012-02-09 15:56:00 -0500] Brad_K: ahh, here we go http://www.opscode.com/blog/2011/08/11/chef-0-10-4-released/ and http://www.opscode.com/blog/2011/12/14/chef-0-10-6-released/ and http://www.opscode.com/blog/2011/12/15/chef-0-10-8-released/
[2012-02-09 15:57:00 -0500] Brad_K: dammit.  i hate when i accidentally close the wrong window.  ;-(
[2012-02-09 16:00:00 -0500] mattray: there's also a chef-announce mailing list
[2012-02-09 16:08:00 -0500] Brad_K: of course, the main chef mailing list is one of the best resources around, but it does tend to get a lot more traffic.
[2012-02-09 16:09:00 -0500] JasonBoxLaptop: fire hose
[2012-02-09 16:13:00 -0500] cwj: i fell asleep trying to catch up on chef ml last night ;)
[2012-02-09 16:15:00 -0500] sifi|work: Hey guys, Anyone successfully deploy to a server that has Plesk installed?  I think Plesk keeps changing my mods-enanbled/dir.conf file to a real finds instead of a symlink which causes chef to quit a deploy.
[2012-02-09 16:15:00 -0500] BryanWB: cwj: i started a podcast as a shortcut to staying up-to-date ;)
[2012-02-09 16:16:00 -0500] cwj: BryanWB: yes ive been downloading foodfight, but i am worse at podcasts than email ;(
[2012-02-09 16:16:00 -0500] BryanWB: ha ha, np
[2012-02-09 16:18:00 -0500] Javin: Quick question: Anyone know of the top of their head, how I can check to see if a cookbook_file of a particular name exists in the cookbook, before trying to install install it? I.e. maybe for an <username>_authorized_keys file, which may or may not exist?
[2012-02-09 16:18:00 -0500] cwj: i miss taking the train to work, it was a good opportunity to catch up on stuff like that
[2012-02-09 16:20:00 -0500] cwj: Javin: not sure how you would do that. i think a lot of people, myself included, use data bag items for setting up users and their authorized keys
[2012-02-09 16:21:00 -0500] cwj: then you can inspect the contents of the data bag to determine if foo is present
[2012-02-09 16:24:00 -0500] Javin: cwj: I'll have to take a deeper look at data bags. I've mostly avoided them up until now, but they may very well be a better approach for this.
[2012-02-09 16:25:00 -0500] cwj: Javin: cool, the opscode 'users' cookbook is a good place to start
[2012-02-09 16:25:00 -0500] cwj: http://cookbooks.opscode.com/cookbooks/users
[2012-02-09 16:27:00 -0500] savant: If there was a newsletter with awesomeness
[2012-02-09 16:32:00 -0500] Javin: And just to answer my own question, it looks like one could test for the existence of a cookbook_file on the client via something like this: "#{Chef::Config[:file_cache_path]}/cookbooks/test/files/default/file.txt"
[2012-02-09 16:34:00 -0500] jtimberman: savant: you want the "release" category on the blog, probably: http://www.opscode.com/blog/category/release/
[2012-02-09 16:35:00 -0500] savant: yeah thats already been mentioned
[2012-02-09 16:35:00 -0500] savant: im looking for something like
[2012-02-09 16:35:00 -0500] savant: "Right now in the Chef community"
[2012-02-09 16:35:00 -0500] savant: with links to blog posts, prominent issues others are having, maybe some commentary, and what's being worked on for the next release/release notes
[2012-02-09 16:37:00 -0500] jtimberman: Thats an excellent idea. We don't have something like it yet. We have a few ways to gather and collaborate on that kind of thing, including the mailing list or the wiki.
[2012-02-09 16:37:00 -0500] savant: i'd subscribe to the newsletter
[2012-02-09 16:37:00 -0500] savant: wiki's are lame
[2012-02-09 16:37:00 -0500] mattray: savant: that's what we're attempting to do with the Food Fight podcast
[2012-02-09 16:37:00 -0500] jbz: Does Chef::Config.logile_location return a string path or a File object?
[2012-02-09 16:37:00 -0500] savant: if it's a blog post, cool
[2012-02-09 16:37:00 -0500] jtimberman: We (opscode) post new things like that on the mailing list generally
[2012-02-09 16:38:00 -0500] mattray: http://www.foodfightshow.org/
[2012-02-09 16:38:00 -0500] jtimberman: sure, everyone hates wikis.
[2012-02-09 16:38:00 -0500] savant: mattray: i dont have time for a podcast, give me something I can print out
[2012-02-09 16:38:00 -0500] jtimberman: yet here we are
[2012-02-09 16:38:00 -0500] mattray: the release notes are kinda like a wiki news post
[2012-02-09 16:39:00 -0500] savant: heh
[2012-02-09 16:40:00 -0500] jtimberman: so the answer is, there isn't one.
[2012-02-09 16:42:00 -0500] jtimberman: I encourage you to collaborate with the community around the existing tools provided, or start something to create your own.
[2012-02-09 16:43:00 -0500] savant: jtimberman: Will do
[2012-02-09 16:43:00 -0500] savant: so many dev communities, so little time
[2012-02-09 16:43:00 -0500] jtimberman: Yes :)
[2012-02-09 16:43:00 -0500] savant: whoever wrote this refcardz thing is a genius
[2012-02-09 16:43:00 -0500] jtimberman: jhulten's on dzone?
[2012-02-09 16:44:00 -0500] savant: jtimberman: I'm a core developer for the CakePHP framework. Lithium PHP framework, and yell at the composer/npm guys when i get a chance. So many codez, so little time
[2012-02-09 16:44:00 -0500] savant: jtimberman: yes, thats the one
[2012-02-09 16:44:00 -0500] savant: run_list is new I think, no?
[2012-02-09 16:45:00 -0500] jtimberman: "run_list" was added when the role feature was added in like, chef 0.6
[2012-02-09 16:46:00 -0500] savant: hmm weird
[2012-02-09 16:49:00 -0500] savant: i started writing a few blog posts on how chef works
[2012-02-09 16:49:00 -0500] savant: looks like i should go back and revise those a bit
[2012-02-09 17:02:00 -0500] savant: where do roles go in the directory structure
[2012-02-09 17:02:00 -0500] bdha: The root. chef-repo/roles/
[2012-02-09 17:04:00 -0500] savant: weird its telling me a role is missing :(
[2012-02-09 17:05:00 -0500] savant: would help if i set the attributes properly...
[2012-02-09 17:06:00 -0500] savant: can roles be specified in json files?
[2012-02-09 17:10:00 -0500] cwj: savant: yes you can use json for roles
[2012-02-09 17:10:00 -0500] savant: https://gist.github.com/6d7e33cbccf08ceddc25
[2012-02-09 17:11:00 -0500] savant: is that the proper format?
[2012-02-09 17:11:00 -0500] cwj: looks mostly right to me, but you are missing a closing }
[2012-02-09 17:11:00 -0500] savant: where
[2012-02-09 17:11:00 -0500] cwj: nm, its there
[2012-02-09 17:12:00 -0500] savant: i have this in my directory structure: https://gist.github.com/a0262e97363b06dc5c47
[2012-02-09 17:12:00 -0500] savant: and inside the roles symlink, I have an elastic.json file
[2012-02-09 17:17:00 -0500] auduny: I wish there was a middle ground when i comes to logging in chef. It's either all or nothing
[2012-02-09 17:17:00 -0500] cwj: savant: so whats the issue, you are unable to 'knife role from file roles/elastic.json' ?
[2012-02-09 17:17:00 -0500] auduny: chef-client that is.
[2012-02-09 17:18:00 -0500] auduny: It would be cool if it logged start and changes
[2012-02-09 17:18:00 -0500] auduny: Not all or just errors.
[2012-02-09 17:18:00 -0500] auduny: It's filling up my splunk :-D
[2012-02-09 17:18:00 -0500] savant: cwj: https://gist.github.com/c8b4f71a70eb72b29431
[2012-02-09 17:19:00 -0500] auduny: warn should be just that. But it does not log anything but errors.
[2012-02-09 17:20:00 -0500] cwj: auduny: consider using exception handlers to feed splunk
[2012-02-09 17:20:00 -0500] cwj: http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2012-02-09 17:20:00 -0500] cwj: instead of just capturing stdout to log
[2012-02-09 17:20:00 -0500] geekbri: Would anybody mind taking a quick peak at some chef recipe code i wrote that is supposed to execute some BASH but just bombs out telling me 'undefined method start
[2012-02-09 17:20:00 -0500] geekbri: https://gist.github.com/1781356
[2012-02-09 17:21:00 -0500] cwj: savant: i dont have a lot of personal experience with chef-solo, but it sounds like it doesn't care for the symlink'd roles
[2012-02-09 17:24:00 -0500] auduny: cwj: Have you done it?
[2012-02-09 17:24:00 -0500] auduny: I've used the report handlers to post to irc.
[2012-02-09 17:24:00 -0500] auduny: But not much more.
[2012-02-09 17:25:00 -0500] savant: nope, still giving me errors when the roles are not symlinked
[2012-02-09 17:25:00 -0500] cwj: auduny: i have not, i don't use splunk at my current gig
[2012-02-09 17:25:00 -0500] auduny: https://github.com/adamhjk/chef_handler_splunk
[2012-02-09 17:25:00 -0500] auduny: Looks promising.
[2012-02-09 17:42:00 -0500] savant: is there  a way to see what roles chef is aware of?
[2012-02-09 17:43:00 -0500] jbz: savant: knife role list?
[2012-02-09 17:44:00 -0500] savant: knife is a gem?
[2012-02-09 17:44:00 -0500] jbz: Nope, knife is chef's console tool.
[2012-02-09 17:44:00 -0500] jbz: Do you mean from within a recipe?
[2012-02-09 17:44:00 -0500] savant: im running chef-solo
[2012-02-09 17:45:00 -0500] savant: and it's complaining that it can't find the role
[2012-02-09 17:45:00 -0500] savant: that clearly exists
[2012-02-09 17:45:00 -0500] savant: this is on an aws instance
[2012-02-09 17:45:00 -0500] jbz: Oh.  Sorry.  Then I'm not sure, I only know how to do it using search against a chef server or knife.
[2012-02-09 17:47:00 -0500] yfeldblum: knife is included as part of the "chef" gem
[2012-02-09 17:48:00 -0500] savant: cant really use it since it wants to talk to a chef server
[2012-02-09 17:50:00 -0500] cap10morgan: is there a way to get ohai to report on virtual interfaces (like eth0:0)?
[2012-02-09 17:50:00 -0500] plu: https://gist.github.com/1781543
[2012-02-09 17:50:00 -0500] yfeldblum: savant, where is the role file?
[2012-02-09 17:51:00 -0500] plu: I cannot see a file /tmp/foo being generated, so the recipe does not seem to be executed at all
[2012-02-09 17:51:00 -0500] plu: anyway it should fail due to the exit 1, shouldnt it?
[2012-02-09 17:51:00 -0500] AmishGeek: ARGH!   nginx's php-fpm pap is no more my cookbook is broken
[2012-02-09 17:52:00 -0500] savant:  /tmp/chef/roles/elastic.json
[2012-02-09 17:56:00 -0500] jbz: Weird.
[2012-02-09 17:56:00 -0500] yfeldblum: savant, is that where chef-solo is configured to load roles from?
[2012-02-09 17:57:00 -0500] jbz: So, question. I have a report handler which is being installed an enabled by a cookbook.  It works fine.  BUT, if during my run, I trigger a deploy_revision with :force_deploy :delayed, so that it runs *after* the cookbook enables the report handler, the report handler doesn't fire at all (in the logs, it says 'running report handlers' but the handler isn't listed).  If the force_deploy *doesn't* run, the report handler *does* run.  Does this make sense to anyone?
[2012-02-09 17:57:00 -0500] savant: yes
[2012-02-09 17:59:00 -0500] yfeldblum: savant, does it have the {"name": "elastic", ...} field set?
[2012-02-09 18:00:00 -0500] yfeldblum: savant, as well as the other attributes? http://wiki.opscode.com/display/chef/Roles#Roles-AsJSON
[2012-02-09 18:00:00 -0500] savant: https://gist.github.com/6d7e33cbccf08ceddc25
[2012-02-09 18:12:00 -0500] savant: do I need to have empty env_run_lists and override_attributes arrays?
[2012-02-09 18:12:00 -0500] savant: they seem to be optional in the description
[2012-02-09 18:13:00 -0500] tolland_: what is the best strategy for giving a role to a host during initial deploy.
[2012-02-09 18:13:00 -0500] tolland_: I was trying with first boot parameters to chef-client, but about hald the time the node registers with no roles.
[2012-02-09 18:13:00 -0500] tolland_: 50%
[2012-02-09 18:17:00 -0500] jtimberman: savant: are you using chef-solo?
[2012-02-09 18:18:00 -0500] savant: yes
[2012-02-09 18:18:00 -0500] jtimberman: savant: do you have the role_path configured in your solo.rb?
[2012-02-09 18:18:00 -0500] jtimberman: it is /var/chef/roles by default if you didn't specify it
[2012-02-09 18:18:00 -0500] savant: yes
[2012-02-09 18:19:00 -0500] savant: roles_path       '/tmp/chef/recipes/roles'
[2012-02-09 18:19:00 -0500] jtimberman: s/roles/role/
[2012-02-09 18:19:00 -0500] savant: ?
[2012-02-09 18:19:00 -0500] savant: role_path?
[2012-02-09 18:19:00 -0500] jtimberman: role_path "/tmp/chef/recipes/roles"
[2012-02-09 18:19:00 -0500] savant: okay
[2012-02-09 18:20:00 -0500] savant: ugh somehow broke rubygems on this instance
[2012-02-09 18:21:00 -0500] cap10morgan: nm, ohai 0.6.12.rc.1 fixes my issue. yay!
[2012-02-09 18:21:00 -0500] cap10morgan: talk about good timing.
[2012-02-09 18:24:00 -0500] savant: nope
[2012-02-09 18:24:00 -0500] savant: that didnt work
[2012-02-09 18:25:00 -0500] savant: this is my solo-config.rb
[2012-02-09 18:25:00 -0500] savant: https://gist.github.com/a23afe4a51f2c598e3b2
[2012-02-09 18:25:00 -0500] savant: I'm passing it in via the -c flag on chef-solo
[2012-02-09 18:26:00 -0500] jbz: I'm running a cookbook to install a handler
[2012-02-09 18:26:00 -0500] jbz: and before running chef I've removed /var/cache/chef *and* /var/chef
[2012-02-09 18:26:00 -0500] jbz: and it's still installing an *old version of the handler* when I run chef-client
[2012-02-09 18:26:00 -0500] jbz: gaaaah
[2012-02-09 18:26:00 -0500] savant: thats how i feel
[2012-02-09 18:27:00 -0500] Drewzar: haha that's one way to take care of it :P
[2012-02-09 18:27:00 -0500] jbz: Seriously, I'm about to throw something through my iMac :-P
[2012-02-09 18:33:00 -0500] Brad_K: jbz: i've had that feeling before.  in my case, i was being stupid because i hadn't actually re-uploaded the new version of the cookbook with knife.
[2012-02-09 18:34:00 -0500] savant: fuck roles
[2012-02-09 18:34:00 -0500] savant: they dont work
[2012-02-09 18:34:00 -0500] Brad_K: savant: they work fine for me.
[2012-02-09 18:34:00 -0500] tolland_: while I dont think it effects my system very much, i am interested as to how chef is used for customer systems with possibly unknown local users, because with my client account I can list and add roles to my local instance
[2012-02-09 18:34:00 -0500] savant: Brad_K: http://www.buildsonmymachine.com/
[2012-02-09 18:35:00 -0500] tolland_: is it not something of a security issue if your clients can change their own role  list?
[2012-02-09 18:35:00 -0500] jtimberman: http://wiki.opscode.com/display/chef/Chef+Solo#ChefSolo-Roles
[2012-02-09 18:35:00 -0500] jtimberman: savant: ^
[2012-02-09 18:35:00 -0500] savant: the only difference is where im putting roles etc.
[2012-02-09 18:35:00 -0500] savant: which I have configured in my solo.rb config file
[2012-02-09 18:36:00 -0500] Brad_K: tolland_: they wouldn't be changing their role list, what they'd be doing is changing their "run list".  and that should be fully open to the node.
[2012-02-09 18:36:00 -0500] mlei: tolland_: possibly unknown local users with root?
[2012-02-09 18:37:00 -0500] savant: jtimberman: yep, I've seen that, my roles check out
[2012-02-09 18:37:00 -0500] tolland_: hmm. but if i run the monitoring cookbook i would get all the intersting configurations that nagios has for mysql client has
[2012-02-09 18:37:00 -0500] savant: if there was some debug tool I could use to be like
[2012-02-09 18:37:00 -0500] tolland_: mlei: ok, point taken
[2012-02-09 18:37:00 -0500] savant: "hey, here is where we think you have all your config info for chef solo, and here are your roles"
[2012-02-09 18:37:00 -0500] savant: that would be killer
[2012-02-09 18:38:00 -0500] mlei: i think if someone has root, you should be worried about more than if they can change your run list......
[2012-02-09 18:38:00 -0500] jtimberman: savant: can you gist log output of your chef-solo run not working?
[2012-02-09 18:38:00 -0500] savant: yep
[2012-02-09 18:41:00 -0500] savant: https://gist.github.com/eaa900e5a9e3023ac766
[2012-02-09 18:41:00 -0500] savant: roles^
[2012-02-09 18:41:00 -0500] savant: every file
[2012-02-09 18:42:00 -0500] tolland_: at what stage do you typically assign your role to your node?
[2012-02-09 18:42:00 -0500] jtimberman: savant: what is: chef-solo-flight
[2012-02-09 18:43:00 -0500] jtimberman: you can get the value of configuration values in a recipe with Chef::Config[:thing], like Chef::Config[:role_path]
[2012-02-09 18:43:00 -0500] savant: chef solo flight is a bash wrapper around chef
[2012-02-09 18:43:00 -0500] savant: basically sends the chef command over via ssh
[2012-02-09 18:43:00 -0500] ptrstr: mlei: if one has unknown local users as root you should just stop worrying and go drink beer =_
[2012-02-09 18:44:00 -0500] savant: jtimberman: https://gist.github.com/eaa900e5a9e3023ac766
[2012-02-09 18:45:00 -0500] savant: jtimberman: it doesnt get past building the json, so thats kinda useless. i was hoping there would be a tool for that :|
[2012-02-09 18:45:00 -0500] Brad_K: savant: Grade B Overall performance score 82 Ruleset applied: YSlow(V2) URL: http://www.buildsonmymachine.com/
[2012-02-09 18:45:00 -0500] Brad_K: Grade F on Use a Content Delivery Network (CDN)
[2012-02-09 18:45:00 -0500] Brad_K: Grade F on Add Expires headers
[2012-02-09 18:45:00 -0500] Brad_K: Grade B on Compress components with gzip
[2012-02-09 18:45:00 -0500] Brad_K: Grade F on Configure entity tags (ETags)
[2012-02-09 18:45:00 -0500] Brad_K: Grade E on Use cookie-free domains
[2012-02-09 18:46:00 -0500] jtimberman: savant: have you tried just running chef-solo on the machine w/o the wrapper script?
[2012-02-09 18:46:00 -0500] jbz: I am so very very confused now :-P
[2012-02-09 18:46:00 -0500] savant: Brad_K: lol
[2012-02-09 18:46:00 -0500] jbz: Is it normal during a chef-client run for cookbooks to be cached *without* their files/ subdirectories?
[2012-02-09 18:46:00 -0500] tolland_: erm
[2012-02-09 18:47:00 -0500] tolland_: how do I add a role to a node from the command line even?
[2012-02-09 18:47:00 -0500] savant: jtimberman: sec
[2012-02-09 18:47:00 -0500] savant: jtimberman: I manually compiled the dna.json file and am going to bring up the instance first
[2012-02-09 18:48:00 -0500] jtimberman: tolland_: you can use knife from your local workstation with the "knife node run list add" command.
[2012-02-09 18:48:00 -0500] jtimberman: tolland_: you can modify the node object directly with "knife node edit"
[2012-02-09 18:48:00 -0500] jtimberman: both those assume the node already exists on the Chef Server.
[2012-02-09 18:48:00 -0500] jtimberman: If it does not, you can pass in a JSON attributes file that sets the run list.
[2012-02-09 18:49:00 -0500] tolland_: i think bradk said that setting the run list did not effect the roles
[2012-02-09 18:49:00 -0500] Brad_K: tolland_: using roles is just one way to set the run list.
[2012-02-09 18:49:00 -0500] mlei: no, he meant that you not only can affect the roles, you can affect the run list in general
[2012-02-09 18:50:00 -0500] tolland_: jtimberman: im looking for a scripted solution
[2012-02-09 18:50:00 -0500] Brad_K: tolland_: there are other ways to also affect the run list, without affecting the "role".
[2012-02-09 18:50:00 -0500] jtimberman: bootstrap?
[2012-02-09 18:50:00 -0500] bawt: bootstrap is setting up your system to use Chef. You can 'bootstrap' a Chef RubyGems installation to install a Chef server, or use the knife bootstrap subcommand on new clients.
[2012-02-09 18:50:00 -0500] jtimberman: knife bootstrap?
[2012-02-09 18:50:00 -0500] bawt: knife bootstrap is http://wiki.opscode.com/display/chef/Knife+Bootstrap
[2012-02-09 18:50:00 -0500] jtimberman: tolland_: ^ that link
[2012-02-09 18:51:00 -0500] jtimberman: unless i'm completely misunderstanding the question since i'm also helping savant. :)
[2012-02-09 18:52:00 -0500] savant: jtimberman: you can ignore me for a bit, I need to bring up this instance so I'll wait till I need to bring up the mongodb instance to pester you
[2012-02-09 18:53:00 -0500] jtimberman: savant: no worries.
[2012-02-09 18:54:00 -0500] tolland_: the bootstrap for knife seems to use the -j option to pass a run_list via first boot.json, where json contains a run_list => etc etc json block
[2012-02-09 18:54:00 -0500] tolland_: im saying that appears to be unreliable.
[2012-02-09 18:55:00 -0500] AmishGeek: if a chef recipe, using the aws cookbooks tells a node to attach a EBS volume by a specific volume ID, if that volume is already attached to another node, will it auto detach and attach to the current node?
[2012-02-09 18:55:00 -0500] jtimberman: AmishGeek: no
[2012-02-09 18:55:00 -0500] jtimberman: AmishGeek: it will probably fail noisily :)
[2012-02-09 18:55:00 -0500] AmishGeek: hmm
[2012-02-09 19:00:00 -0500] jtimberman: ohai 0.6.12 release candidate: http://lists.opscode.com/sympa/arc/chef/2012-02/msg00108.html
[2012-02-09 19:00:00 -0500] jtimberman: thanks btm :)
[2012-02-09 19:06:00 -0500] Brad_K: tolland_: passing the -j argument on first boot has never been a problem for me.  the problem i've seen is that sometimes a chef run would complete and appear to be error-free, and yet the resulting node data didn't get saved back to the chef server.  however, in such cases all the work appears to have been done, my user account & ssh key have been created appropriately, and it'
[2012-02-09 19:07:00 -0500] Brad_K:  it's easy enough for me to log in manually and re-run chef-client in order to get the node data saved out correctly.
[2012-02-09 19:07:00 -0500] Brad_K: of course, that does require a quick trip through "knife node edit" to re-add the base role that we use when doing initial installs of machines, but that's a minor pain.
[2012-02-09 19:08:00 -0500] Brad_K: but i can only speak for my own personal experience.
[2012-02-09 19:08:00 -0500] berngp: Hi gentlemen,   A sort of silly thing.. I want to copy a local dir from /opt/tomcat/current/conf to /etc/tomcat/<instance-name>/conf . As of now I am using `script` but i was just wondering if I can use RemoteDirectory.
[2012-02-09 19:11:00 -0500] Brad_K: out of curiosity, has anyone actually used the nginx cookbook?  i'm curious about how i would go about setting it up to do a reverse proxy situation....
[2012-02-09 19:12:00 -0500] Brad_K: it seems to be somewhat similar to the apache2 cookbook, but there doesn't seem to be an equivalent of the web_app.conf.erb template that is intended to make it easier to set up web sites.
[2012-02-09 19:13:00 -0500] savant: there is an nginx.conf
[2012-02-09 19:13:00 -0500] savant: i've used a wrapper for my apps
[2012-02-09 19:13:00 -0500] Brad_K: indeed, there is an nginx.conf, but that appears to be a system-wide configuration file that isn't intended to have any web sites defined in it.
[2012-02-09 19:13:00 -0500] savant: so I can just do nginx_site "site-name" and it brings up the site.
[2012-02-09 19:14:00 -0500] savant: there isnt anything out there that is configurable i think
[2012-02-09 19:14:00 -0500] Brad_K: and this cookbook does come with nxsiteenable and nxsitedisable commands, being equivalent to the a2siteenable and a2sitedisable commands for apache2.
[2012-02-09 19:15:00 -0500] Brad_K: but i haven't been able to find any templates or anything that are intended to make it easier to create the actual web sites themselves.
[2012-02-09 19:16:00 -0500] Brad_K: sorry, make that nxdissite and nxensite.
[2012-02-09 19:16:00 -0500] AntonZ: Hello, does anyone know of a cookbook to install oracle db server?
[2012-02-09 19:16:00 -0500] Brad_K: AntonZ: http://community.opscode.com/cookbooks/oracle ?
[2012-02-09 19:17:00 -0500] AntonZ: interesting! thank you for  the link!
[2012-02-09 19:17:00 -0500] Brad_K: there's lots of cookbooks on the opscode community site.  i recommend starting there any time you're looking for something.
[2012-02-09 19:18:00 -0500] AntonZ: cheers mate!
[2012-02-09 19:18:00 -0500] Brad_K: they may not have what you need, or they may have something but it doesn't do everything you need, but there's a good chance that they've got at least a decent starting point.
[2012-02-09 19:23:00 -0500] spicyWith: fujin: postgresql question. I created a user and db using your recipe, but now I can't log in. Here's what I'm getting:psql: FATAL:  Peer authentication failed for user
[2012-02-09 19:26:00 -0500] Otterley: IMHO if you're installing Oracle, Chef is probably not for you
[2012-02-09 19:27:00 -0500] Otterley: (at least for that particular portion of your infrastructure)
[2012-02-09 19:33:00 -0500] and311: Can someone clarify something from the MySQL cookbook and a relevant email thread on the mailing list?
[2012-02-09 19:33:00 -0500] miah: much of the oracle install can be scripted though
[2012-02-09 19:33:00 -0500] and311: Here is the thread:
[2012-02-09 19:33:00 -0500] and311: http://lists.opscode.com/sympa/arc/chef/2011-05/msg00286.html
[2012-02-09 19:33:00 -0500] miah: almost every piece has a silent install option
[2012-02-09 19:33:00 -0500] Otterley: yeah, but that's only a tiny fraction of what you need to maintain an Oracle server
[2012-02-09 19:33:00 -0500] miah: ya
[2012-02-09 19:34:00 -0500] miah: but i dont think its impossible
[2012-02-09 19:34:00 -0500] Otterley: if you come up wit the secret sauce for managing an Oracle (or any DB, for that matter) environment using a single Chef run, please let me know
[2012-02-09 19:34:00 -0500] and311: In it, Seth claims: "We could have also used 'extend' like so: extend Opscode::OpenSSL::Password.  That would make every method in the Opscode::OpenSSL::Password module available to EVERY instance of Chef::Recipe"
[2012-02-09 19:34:00 -0500] miah: i would say that if you are a oracle shop your team is probably not in the right mindset to use chef
[2012-02-09 19:34:00 -0500] and311: But I don't think that's how extend would work.
[2012-02-09 19:35:00 -0500] miah: Otterley: indeed, its work that needs to be done, but i think it can be
[2012-02-09 19:36:00 -0500] Otterley: Chef really works best for managing ephemeral stateless hosts; it's not really a good fit for stateful or long-lived hosts
[2012-02-09 19:37:00 -0500] senthilr: Otterley: what would you recommend instead
[2012-02-09 19:38:00 -0500] Otterley: nothing that's open source :(
[2012-02-09 19:38:00 -0500] senthilr: too bad
[2012-02-09 19:38:00 -0500] Otterley: I've had the privilege of working with closed-source package managers that are awesome
[2012-02-09 19:38:00 -0500] Otterley: I'd love to whip one up sometime, tpkg is closest but it's a long way off
[2012-02-09 19:40:00 -0500] dchalloner: How could I do a conditional block not_if statement which covers several resources?
[2012-02-09 19:41:00 -0500] senthilr: clear
[2012-02-09 19:41:00 -0500] senthilr: oops, mischan
[2012-02-09 19:41:00 -0500] siezer: orking w I disagree
[2012-02-09 19:41:00 -0500] siezer: er
[2012-02-09 19:42:00 -0500] siezer: Otterley I disagree: the bigger pain in the ass something is, the better candidate it is for automation. oracle being a huge pain in the ass.
[2012-02-09 19:42:00 -0500] Otterley: I think we're in violent agreement there
[2012-02-09 19:42:00 -0500] siezer: sweet
[2012-02-09 19:42:00 -0500] senthilr: I wouldn't automate something like Oracle
[2012-02-09 19:42:00 -0500] Otterley: I'm arguing that Chef is not the right tool for performing that specific type of automation :)
[2012-02-09 19:42:00 -0500] senthilr: this is not somethnig  you would do very often
[2012-02-09 19:43:00 -0500] senthilr: and lot of things could go wrong as Oracle by in itself does not provide enough room for automation
[2012-02-09 19:44:00 -0500] Otterley: one particular thing you have to worry about state is that usually state is important to your business, and you can't have your automation framework nuking your data
[2012-02-09 19:44:00 -0500] Otterley: remember, whatever can be done for you automatically can be done to you automatically
[2012-02-09 19:45:00 -0500] siezer: indeed many people leave their databases manually administered and automate everything else
[2012-02-09 19:46:00 -0500] siezer: however, at somepoint the statistical probability of your DBA fucking shit up because they're working manually with a hangover exceeds well tested automation ;)
[2012-02-09 19:46:00 -0500] mlei: i think it's possible to do database automation with good design decisions, but it's better to err on the side of caution if those kinds of good design decisions are not in place. and yes, chef may not be the right tool for that.
[2012-02-09 19:48:00 -0500] jkyle: I tried to change the name of a node, but now I have two nodes that point to the same vm
[2012-02-09 19:48:00 -0500] jkyle: e.g. knife exec -E 'nodes.transform("name:old_name") {|n| n.name("new_name");n.save}'
[2012-02-09 19:48:00 -0500] mlei: that sounds like you saved a new one but didn't delete the old one
[2012-02-09 19:49:00 -0500] jkyle: I'll delete the old one, but how would you just change the name in place?
[2012-02-09 19:50:00 -0500] savant: wow new chef is noisy
[2012-02-09 19:50:00 -0500] savant: or at least noisier than i remember
[2012-02-09 19:55:00 -0500] plu: https://gist.github.com/1782429
[2012-02-09 19:56:00 -0500] plu: is this a feature or a bug? :)
[2012-02-09 19:56:00 -0500] plu: DEBUG: sh(test -f /tmp/perl-app)
[2012-02-09 19:56:00 -0500] plu: it's always running the not_if... of the first recipe
[2012-02-09 19:56:00 -0500] plu: :(
[2012-02-09 19:57:00 -0500] kallistec: plu: you should use unique names for your resources
[2012-02-09 19:57:00 -0500] plu: kallistec: hmm ok
[2012-02-09 19:58:00 -0500] plu: kallistec: but what if I get a recipe from somebody else, I need to check all his resources for name clashes with mine?
[2012-02-09 19:59:00 -0500] jbz: plu:  Chef runs work by first (in the compile phase) building a list of all the resources that have to be executed in the execution phase.  If you have multiple resources with the same name, they'll step on each other in the compile phase, AFAICT.
[2012-02-09 19:59:00 -0500] kallistec: plu: well, the behavior is there so that you can have different actions on a resource at different places in the execution order, like enabling a service and starting it at some later time
[2012-02-09 20:00:00 -0500] kallistec: that said, we're gonna review the implementation of it pretty soon and maybe make some changes there
[2012-02-09 20:01:00 -0500] kallistec: when we added the ability to have multiple not_if/only_if guards per resource, it exposed that a lot of people were/are doing what you're doing and it was working by accident
[2012-02-09 20:01:00 -0500] plu: ah
[2012-02-09 20:01:00 -0500] plu: I had the feeling this was working before
[2012-02-09 20:02:00 -0500] plu: so I was always doing it wrong, and it was just working by accident :)
[2012-02-09 20:02:00 -0500] Drewzar: Hey guys we're getting random 500s from opscode =\
[2012-02-09 20:03:00 -0500] plu: ah
[2012-02-09 20:03:00 -0500] plu: it really does work on 0.10.0 for example
[2012-02-09 20:03:00 -0500] kallistec: plu: yes, before you could only have one not_if and one only_if, so you were replacing them. but if you hadn't set a not_if on one of them, it would have inherited the one from the previous resource
[2012-02-09 20:03:00 -0500] plu: ok, I'm gonna rename everything then
[2012-02-09 20:03:00 -0500] plu: kallistec: thanks for the help :)
[2012-02-09 20:05:00 -0500] kallistec: plu: you bet
[2012-02-09 20:07:00 -0500] jkyle: alright, I tried this example from the wiki. but it doesn't change the actual atrribute
[2012-02-09 20:08:00 -0500] jkyle: % knife exec -E 'nodes.transform("name:www.foundry.att.comm") {|n| n.set["name"] = "www.foundry.att.com";n.save}'
[2012-02-09 20:09:00 -0500] jkyle: tried this one too: % knife exec -E 'nodes.transform("name:www.foundry.att.comm") {|n| n.name = "www.foudnry.att.com"}'
[2012-02-09 20:13:00 -0500] dhruvbansal: What is the right way to specify cookbook dependencies when a cookbook has two "flavors" of a recipe (say a webapp with an nginx vs. apache reverse proxy) which depend on "alternative" cookbooks?
[2012-02-09 20:14:00 -0500] dhruvbansal: If a node only uses webapp::nginx it still winds up downloading the apache2 cookbook (which now also needs to be on the server) because a 'depends' statement in a cookbook can't be told about specific recipes.
[2012-02-09 20:14:00 -0500] dhruvbansal: Or am I making some simple error in how I understand cookbook dependencies and recipes?
[2012-02-09 20:15:00 -0500] jbz: dhruvbansal: No, that's correct.  You need to include the cookbook.
[2012-02-09 20:15:00 -0500] jbz: And it will d/l the whole cookbook.
[2012-02-09 20:16:00 -0500] dhruvbansal: It's not really a big deal, I guess, as all that happens is extra cookbooks are stored in server and downloaded to node.
[2012-02-09 20:17:00 -0500] dhruvbansal: But sometimes a cookbook that isn't necessary for any of the recipes I'm using will *itself* have a whole dependency tree of other cookbooks that *it* requires -- leading to a whole bunch of cookbooks I don't care about...makes me wonder if there isn't a better way...
[2012-02-09 20:17:00 -0500] mlei: if that's your concern i would split it into two cookbooks, webapp-nginx and webapp-apache2
[2012-02-09 20:18:00 -0500] mlei: and have them depend on "webapp" and the appropriate web server
[2012-02-09 20:18:00 -0500] dhruvbansal: ultimately it's too small of an annoyance and i'm too lazy ;)
[2012-02-09 20:18:00 -0500] dhruvbansal: just wondering if there was some smart flag i could pass to 'depends' that said 'only if you're also using this particular recipe'
[2012-02-09 20:19:00 -0500] dhruvbansal: honestly, the issue is worst when there is a cookbook that has a very complex server with many moving parts and cookbook dependencies and then a separate, simple agent.  i think in that case it really probably is best to just split the cookbooks.
[2012-02-09 20:29:00 -0500] spicyWith: is chef-client supposed to run constantly or only on when triggered?
[2012-02-09 20:29:00 -0500] auduny: http://tickets.opscode.com/browse/CHEF-1068
[2012-02-09 20:29:00 -0500] auduny: Is this still valid?
[2012-02-09 20:30:00 -0500] yfeldblum: spicyWith, up to you
[2012-02-09 20:30:00 -0500] btm: spicyWith: http://wiki.opscode.com/display/chef/Chef+Client
[2012-02-09 20:31:00 -0500] btm: auduny: depends on the size of your node objects, but it could be.
[2012-02-09 20:31:00 -0500] spicyWith: btm: yfeldblum thanks. So I could make it trigger manually only interesting
[2012-02-09 20:32:00 -0500] btm: auduny: those with searches returning huge node objects and/or a large number of nodes, are encouraged to use https://github.com/opscode/whitelist-node-attrs
[2012-02-09 20:33:00 -0500] btm: spicyWith: right. you can run chef-client by hand, daemonize it with a delay between runs, put it in cron (use a splay), trigger it remotely with knife ssh, whatever fits your workflow.
[2012-02-09 20:33:00 -0500] auduny: btm: What is the reason for me having a large object? Just the number of nodes in total? (about 90)
[2012-02-09 20:33:00 -0500] spicyWith: btm: that's cool. I thought it was always running by default. So now I can trigger it only when I want to do a new code deploy
[2012-02-09 20:43:00 -0500] simon_d: I'm having trouble doing a number of knife commands (cookbook list, cookbook upload for certain cookbooks, cookbook delete) All these commands work when I run them on the chef server but from my mac workstation they don't
[2012-02-09 20:44:00 -0500] mlei: simon_d: what error do you get
[2012-02-09 20:45:00 -0500] simon_d: when I do knife cookbook list I get - Exception: NoMethodError: undefined method `map' for nil:NilClass
[2012-02-09 20:46:00 -0500] mlei: did you check for syntax errors in your knife.rb?
[2012-02-09 20:46:00 -0500] mlei: sounds like something's broken in there.
[2012-02-09 20:47:00 -0500] simon_d: knife does connect to the server though. I can list nodes etc. it's just anything to do with cookbooks
[2012-02-09 20:48:00 -0500] mlei: sure, but my hunch is something is wrong with cookbook_path
[2012-02-09 20:48:00 -0500] simon_d: '/Users/user/chef-repo/cookbooks', 'site-cookbooks'
[2012-02-09 20:48:00 -0500] mlei: in brackets?
[2012-02-09 20:49:00 -0500] mlei: that is, square brackets?
[2012-02-09 20:49:00 -0500] simon_d: no just on one line lke that
[2012-02-09 20:49:00 -0500] simon_d: cookbook_path           '/Users/user/chef-repo/cookbooks', 'site-cookbooks'
[2012-02-09 20:50:00 -0500] mlei: you need square brackets around the two strings
[2012-02-09 20:50:00 -0500] simon_d: k sounds promising I'll try that
[2012-02-09 20:51:00 -0500] simon_d: damn, didnt work. still get (using -VV) /Library/Ruby/Gems/1.8/gems/chef-0.10.8/lib/chef/knife/core/generic_presenter.rb:178:in `format_cookbook_list_for_display': undefined method `map' for nil:NilClass (NoMethodError)
[2012-02-09 20:53:00 -0500] mlei: what's your cookbook_path now
[2012-02-09 20:54:00 -0500] simon_d: all of my issues/errors boil down to knife/core/*.rb
[2012-02-09 20:54:00 -0500] fujin: gist your knife.rb
[2012-02-09 20:54:00 -0500] fujin: hosted chef or your own?
[2012-02-09 20:54:00 -0500] simon_d: cookbook_path           ['/Users/user/chef-repo/cookbooks', 'site-cookbooks']
[2012-02-09 20:54:00 -0500] simon_d: own
[2012-02-09 20:54:00 -0500] fujin: gist the server.rb
[2012-02-09 20:54:00 -0500] fujin: all of it, not one line
[2012-02-09 20:58:00 -0500] simon_d: Up until recently I've been doing knife cookbook list without problems.
[2012-02-09 20:59:00 -0500] jbz: woohoo, github goes down.
[2012-02-09 20:59:00 -0500] jbz: whew.  thought I'd broken the deploy recipe again. :-P
[2012-02-09 21:00:00 -0500] c_t: I was greeted by the site of a rather menacing looking unicorn on github this morning
[2012-02-09 21:01:00 -0500] jbz: Ah, their status page finally acknowledges it ;-)
[2012-02-09 21:04:00 -0500] erikh: yeah it's been pissy all morning
[2012-02-09 21:04:00 -0500] spicyWith: jtimberman: am I getting this right. The only thing I need to do in order to use the application cookbook with a django app is to fill out the data bag? Is that the idea?
[2012-02-09 21:04:00 -0500] Otterley: GitHub needs to be spanked
[2012-02-09 21:06:00 -0500] spicyWith: Otterley: I believe they are down and bending over waiting for you to do it
[2012-02-09 21:07:00 -0500] Otterley: apparently there's an angry mob headed down Market St as we speak
[2012-02-09 21:11:00 -0500] miah: awesome
[2012-02-09 21:11:00 -0500] leifmadsen: hey all!  I have the following block of code in a recipe (http://pastebin.ca/2115514) and I'm curious as to the best approach is to setting the version for each of those files. I'm thinking attributes might be appropriate, but not sure how I should set those.
[2012-02-09 21:13:00 -0500] simon_d: fujin: https://gist.github.com/1783261
[2012-02-09 21:14:00 -0500] miah: make packages a hash
[2012-02-09 21:15:00 -0500] simon_d: packages?
[2012-02-09 21:15:00 -0500] bawt: packages is on the server
[2012-02-09 21:16:00 -0500] miah: i am talking to leifmadsen
[2012-02-09 21:16:00 -0500] leifmadsen: miah: thanks, I'll look into that
[2012-02-09 21:16:00 -0500] simon_d: miah: ok
[2012-02-09 21:16:00 -0500] leifmadsen: not only new to chef, but new to ruby :)
[2012-02-09 21:17:00 -0500] miah: ah, give it a few months and you'll feel right at home
[2012-02-09 21:18:00 -0500] leifmadsen: ya I started learning puppet, changed jobs, and they are using chef-solo, so I'm working on migrating to chef server
[2012-02-09 21:19:00 -0500] siezer: sweet
[2012-02-09 21:19:00 -0500] fujin: winning
[2012-02-09 21:19:00 -0500] miah: fun =)
[2012-02-09 21:21:00 -0500] yfeldblum: ruby is the new shell, enjoy
[2012-02-09 21:21:00 -0500] miah: indeed, and it is good
[2012-02-09 21:22:00 -0500] miah: so many poorly crafted shell scripts
[2012-02-09 21:22:00 -0500] erikh: ruby is the new perl
[2012-02-09 21:22:00 -0500] erikh: fsvo perl
[2012-02-09 21:22:00 -0500] erikh: perl's still great.
[2012-02-09 21:23:00 -0500] simon_d: fujin: can you see anything wrong with this then? https://gist.github.com/1783261
[2012-02-09 21:23:00 -0500] spicyWith: erikh: in that case ruby is write only, which I agree
[2012-02-09 21:24:00 -0500] fujin: simon_d: looks ok on the server. can you show the full -VV stack trace from knife on a gist?
[2012-02-09 21:24:00 -0500] erikh: heh -- maybe your ruby and perl is write-only. mine isn't.
[2012-02-09 21:26:00 -0500] simon_d: fujin: https://gist.github.com/1783390
[2012-02-09 21:26:00 -0500] simon_d: is that what you wanted?
[2012-02-09 21:26:00 -0500] fujin: yes, perfect
[2012-02-09 21:26:00 -0500] fujin: I couldn't quite tell what was going on before
[2012-02-09 21:26:00 -0500] fujin: now it shows me that the error you posted was coming from a server response, so
[2012-02-09 21:27:00 -0500] fujin: kind of looks wrong
[2012-02-09 21:27:00 -0500] fujin: but, ignoring that, really need to see that response
[2012-02-09 21:27:00 -0500] fujin: simon_d: have you considered nuking all of your cookbooks and reuploading, or similar?
[2012-02-09 21:27:00 -0500] yfeldblum: if your ruby code doesn't look like it might as well be slightly decorated English, you're doing it wrong :-P
[2012-02-09 21:27:00 -0500] fujin: can you restart the chef server with debug logging and tail the logs while you run that request?
[2012-02-09 21:27:00 -0500] fujin: the url: DEBUG: Sending HTTP Request via GET to chef.host.net:4000//cookbooks
[2012-02-09 21:28:00 -0500] simon_d: I tried to delete all cookbooks from the server but still no joy
[2012-02-09 21:28:00 -0500] spicyWith: erikh yfeldblum I'm more of a python person --- and there was an awkward silence in the room ---, so perl and ruby both look like gibberish.
[2012-02-09 21:29:00 -0500] spicyWith: I also think some people take the "there is more than one way to do it" very at heart, and if it's not a completely original solution, they are not happy
[2012-02-09 21:29:00 -0500] fujin: a lot of people in here use python regularly
[2012-02-09 21:29:00 -0500] simon_d: oh, not all but all that could be an issue. I had 3 cookbooks working fine. then added more then had these issues so removed all the recent additions and put things back to a working state
[2012-02-09 21:29:00 -0500] fujin: i have shipped a bunch of python stuff. openstack is all python, of course
[2012-02-09 21:29:00 -0500] spicyWith: fujin: appreciate your support from down under
[2012-02-09 21:29:00 -0500] fujin: simon_d: maybe one of the cookbooks you added is busted or something
[2012-02-09 21:30:00 -0500] simon_d: It was the opscode java one that initially caused me pain
[2012-02-09 21:30:00 -0500] fujin: simon_d: gotta see those chef server debug logs when you run the request man
[2012-02-09 21:30:00 -0500] fujin: otherwise just guessing
[2012-02-09 21:30:00 -0500] simon_d: yes. I'll get on with that
[2012-02-09 21:30:00 -0500] Brad_K: spicyWith: there are plenty of us here who have familiarity with python.  some of us are even involved in helping to support python.org.  ;-)
[2012-02-09 21:30:00 -0500] Otterley: Perl's still the only scripting language that has a non-sucky async io implementation
[2012-02-09 21:30:00 -0500] fujin: oh fuck off
[2012-02-09 21:30:00 -0500] fujin: don't start with that shit
[2012-02-09 21:30:00 -0500] kallen: heh
[2012-02-09 21:31:00 -0500] c_t: sweet
[2012-02-09 21:31:00 -0500] c_t: once we're done, we can start fighting over vi vs. emacs
[2012-02-09 21:31:00 -0500] fujin: no
[2012-02-09 21:31:00 -0500] spicyWith: has anyone successfully used the application recipe here? It seems like all I should do is set up a data_bag like in this example https://github.com/opscode/django-quick-start/blob/master/cookbooks/application/examples/data_bags/apps/django_app.json and then add recipe[application] to my role, right cc/ jtimberman
[2012-02-09 21:31:00 -0500] fujin: already stopped from happening
[2012-02-09 21:31:00 -0500] fujin: emacs is the winner
[2012-02-09 21:31:00 -0500] fujin: for that one
[2012-02-09 21:31:00 -0500] fujin: btw
[2012-02-09 21:31:00 -0500] otaku2: no, vi
[2012-02-09 21:31:00 -0500] otaku2: :P
[2012-02-09 21:31:00 -0500] c_t: vi4lyfe
[2012-02-09 21:31:00 -0500] Brad_K: no, vi
[2012-02-09 21:31:00 -0500] spicyWith: c_t: that is not even a question, VI
[2012-02-09 21:31:00 -0500] otaku2: ^
[2012-02-09 21:31:00 -0500] fujin: noobs
[2012-02-09 21:31:00 -0500] Otterley: nano ftw
[2012-02-09 21:31:00 -0500] Brad_K: no, ed
[2012-02-09 21:32:00 -0500] Otterley: cat <<EOF
[2012-02-09 21:32:00 -0500] otaku2: no, cat >>file
[2012-02-09 21:32:00 -0500] otaku2: ^
[2012-02-09 21:32:00 -0500] spicyWith: fujin like playing tetris in his editor...
[2012-02-09 21:32:00 -0500] spicyWith: i use a needle to flip bits.
[2012-02-09 21:32:00 -0500] otaku2: http://xkcd.com/378/
[2012-02-09 21:32:00 -0500] otaku2: ^ relevant
[2012-02-09 21:33:00 -0500] spicyWith: he stole my idea!
[2012-02-09 21:33:00 -0500] spicyWith: I want my moneys back
[2012-02-09 21:33:00 -0500] Otterley: judging from the code I've seen on GitHub real programmers randomly hit their keyboards until they find something that works :P
[2012-02-09 21:33:00 -0500] fujin: emacs has tetris?
[2012-02-09 21:33:00 -0500] fujin: did not know
[2012-02-09 21:33:00 -0500] spicyWith: fujin: why else would you use it :)
[2012-02-09 21:33:00 -0500] mahrtian: emacs has *
[2012-02-09 21:34:00 -0500] otaku2: Otterly: only those that do the needful.
[2012-02-09 21:34:00 -0500] spicyWith: fujin: emacs has a freaking shrink so you can talk to her about your emacs problems
[2012-02-09 21:34:00 -0500] fujin: I guess I'd have to install the package, I run a pretty minimal emacs setup.
[2012-02-09 21:34:00 -0500] simon_d: fujin: https://gist.github.com/1783436
[2012-02-09 21:34:00 -0500] atomic-penguin: There is nothing wrong with Perl.  There might be something wrong with the way some people write Perl, however.  This can be said for any dynamic scripting, or programming, language.
[2012-02-09 21:34:00 -0500] fujin: doctor mode is awesome; the algorithm is actually quite pleasant to inspect when written in EmacsLISP
[2012-02-09 21:34:00 -0500] Otterley: I like Emacs, but as a systems guy I find that learning 2 editors is more than my puny brain can handle
[2012-02-09 21:34:00 -0500] yfeldblum: Otterley, monkeys writing Shakespearean classes?
[2012-02-09 21:35:00 -0500] c_t: there's still some things perl has that I wish ruby had
[2012-02-09 21:35:00 -0500] Otterley: c_t: AnyEvent and Coro!
[2012-02-09 21:35:00 -0500] fujin: simon_d: hmm that doesn't look like debug logging
[2012-02-09 21:35:00 -0500] c_t: there's the occasional time for(;;) loops are Really Handy
[2012-02-09 21:35:00 -0500] fujin: ..
[2012-02-09 21:35:00 -0500] c_t: and it'd be nice if ruby had ++ and --
[2012-02-09 21:35:00 -0500] Otterley: c_t: isn't that what Kernel::loop is for?
[2012-02-09 21:35:00 -0500] c_t: (I know there's ways around it, but it's not the same)
[2012-02-09 21:36:00 -0500] yfeldblum: because +=1 is just too many keystrokes
[2012-02-09 21:36:00 -0500] fujin: loop { } ?
[2012-02-09 21:36:00 -0500] simon_d: serer.log - is the debug log called something else? I changed the server.rb to debug
[2012-02-09 21:36:00 -0500] c_t: Otterley: I'd need to look, but I've found sometimes you need to walk forward and back in the loop
[2012-02-09 21:36:00 -0500] yfeldblum: loop { sleep 1 ; puts "yawwwwwwn" }
[2012-02-09 21:36:00 -0500] Otterley: that doesn't sound like a loop
[2012-02-09 21:36:00 -0500] fujin: PERLLllllllllllllllllll
[2012-02-09 21:36:00 -0500] fujin: you need to walk back and forward
[2012-02-09 21:36:00 -0500] fujin: back back forward back back forward
[2012-02-09 21:37:00 -0500] atomic-penguin: M-x nethack
[2012-02-09 21:37:00 -0500] c_t: if $u[$i] =~ /condition/ { $i--; } (do other stuff)
[2012-02-09 21:37:00 -0500] spicyWith: http://turntable.fm/4f343c3e590ca237de002fcf
[2012-02-09 21:37:00 -0500] fujin: there are less gross ways to do all of that shit in ruby tbh
[2012-02-09 21:38:00 -0500] Otterley: there are lots of things I prefer about Perl but writing simple code is almost always easier in Ruby
[2012-02-09 21:38:00 -0500] yfeldblum: i -= 1 if u[i] =~ /pattern/
[2012-02-09 21:38:00 -0500] spicyWith: so. has anyone used the application recipe?
[2012-02-09 21:38:00 -0500] fujin: simon_d: did you restart the server after changing it? that should have done it, you should see DEBUG entries in there
[2012-02-09 21:39:00 -0500] simon_d: yes I restarted it from init.d
[2012-02-09 21:43:00 -0500] simon_d: fujin: I even just killed the process, checked the status and then started it again
[2012-02-09 21:43:00 -0500] fujin: hrm
[2012-02-09 21:44:00 -0500] simon_d: its the server.rb file located at /etc/chef/server.rb yes?
[2012-02-09 21:45:00 -0500] fujin: yeh
[2012-02-09 21:46:00 -0500] simon_d: its logging to STDOUT?
[2012-02-09 21:49:00 -0500] fujin: depends on how you are running it, with runit or whatever.
[2012-02-09 21:57:00 -0500] cwj: anyone here using cookbook[mongodb] 0.11 ? i am trying to get familiar with it and i'm not sure why this replica set isn't assembling itself
[2012-02-09 21:58:00 -0500] cwj: i set node[:mongodb][:cluster_name] = "haystack" but my nodes are being configured for rs_default instead of rs_haystack
[2012-02-09 22:00:00 -0500] Brad_K: cwj: are you talking about the Edelight cookbook?
[2012-02-09 22:01:00 -0500] Brad_K: we're using the Edelight mongodb cookbook, but i don't know about anyone else.
[2012-02-09 22:04:00 -0500] Brad_K: cwj: check attributes/default.rb:default[:mongodb][:shard_name] = "default"
[2012-02-09 22:05:00 -0500] cwj: yes thats the one i am using
[2012-02-09 22:05:00 -0500] Brad_K: that's how a replicaset gets named.
[2012-02-09 22:05:00 -0500] cwj: well shard names != cluster names
[2012-02-09 22:05:00 -0500] cwj: i can see where that is used as an initial value
[2012-02-09 22:06:00 -0500] Brad_K: true, but the default cluster_name is nil, so it uses the shard name as the cluster name.
[2012-02-09 22:06:00 -0500] Brad_K: attributes/default.rb:default[:mongodb][:cluster_name] = nil
[2012-02-09 22:06:00 -0500] cwj: right
[2012-02-09 22:06:00 -0500] cwj: i have set the cluster_name attribute on the nodes directly
[2012-02-09 22:07:00 -0500] cwj: https://gist.github.com/1783685
[2012-02-09 22:09:00 -0500] yfeldblum: so, who did trustwave effectively hand their root to? my $5 says apple
[2012-02-09 22:10:00 -0500] Brad_K: in our role definitions, we do the following:
[2012-02-09 22:10:00 -0500] Brad_K: default_attributes(
[2012-02-09 22:10:00 -0500] Brad_K:   "mongodb" => {
[2012-02-09 22:10:00 -0500] Brad_K:     "cluster_name" => "cname",
[2012-02-09 22:10:00 -0500] Brad_K:     "shard_name" => "sname"
[2012-02-09 22:10:00 -0500] Brad_K:   }
[2012-02-09 22:10:00 -0500] Brad_K:   )
[2012-02-09 22:10:00 -0500] Brad_K: this over-rides the defaults specified in the cookbook.
[2012-02-09 22:11:00 -0500] Brad_K: but i don't know what would happen if you were to define just the cluster_name and not the shard_name.
[2012-02-09 22:12:00 -0500] Brad_K: in fact, all of our replicasets on all our shards on all our MongoDB clusters, they all use the same cluster_name.  it's the shard name and environment that vary from one to the other.
[2012-02-09 22:12:00 -0500] corp: hola
[2012-02-09 22:13:00 -0500] Brad_K: hmm.  corp is proc spelled backwards.  i wonder if that means anything.  ;-)
[2012-02-09 22:14:00 -0500] corp: nah :)
[2012-02-09 22:14:00 -0500] mlei: |shad0w|: btw, i did a fresh install on a second box and search works fine. So something must have gone wrong in installation on the first box.
[2012-02-09 22:15:00 -0500] |shad0w|: mlei, odd
[2012-02-09 22:16:00 -0500] mlei: there were a few odd things that happened that i've since figured out how to prevent
[2012-02-09 22:16:00 -0500] mlei: for example there were two different versions of ruby-libs installed, one for i386 and one for x86_64
[2012-02-09 22:17:00 -0500] mlei: a number of things might have gotten screwed up by that.
[2012-02-09 22:17:00 -0500] mlei: even if the offending libs have since been cleaned up
[2012-02-09 22:21:00 -0500] bemu: Brad_K, cwj: I'm using the edelight cookbook, but I cut out everything relating to configuration using the gem... there are so many bugs in that cookbook, including that portion, that I don't trust it to manage a production cluster.
[2012-02-09 22:22:00 -0500] cwj: hm
[2012-02-09 22:22:00 -0500] bemu: I'll probably re-write it at some point to be more simple, and so that the configuration actually works.
[2012-02-09 22:22:00 -0500] cwj: bemu: is your version on github or somewhere else that i could look at it?
[2012-02-09 22:22:00 -0500] Brad_K: we've got it working pretty well.  but then we've made more than a few hacks on it.
[2012-02-09 22:23:00 -0500] bemu: But for now, not worth the time. I manage four clusters and the amount of time I spend managing configuration by hand is minimal.
[2012-02-09 22:24:00 -0500] bemu: There was one egregious bug where the replicaset configuration was trying to do an rs.initiate() and catching the failure, then trying to do an rs.initiate on every member... instead of simply doing rs.adds on the primary.
[2012-02-09 22:24:00 -0500] bemu: o.O
[2012-02-09 22:24:00 -0500] Brad_K: i think that was one of the bugs we fixed.
[2012-02-09 22:24:00 -0500] bemu: oh, and the string they were trying to catch was not the one actually returned.
[2012-02-09 22:25:00 -0500] bemu: You don't want my version of that cookbook. I hacked it up in such an ugly manner just to get it to work, I couldn't waste any more time on it.
[2012-02-09 22:26:00 -0500] bemu: I'm very interested in automating mongodb, and they have some good ideas in terms of design, but I think it would be better to start fresh rather than trying to mold that into something functional. I'm still a bit up in the air on it though.
[2012-02-09 22:26:00 -0500] robbyt: hi all, I'm not trolling or anything, but why should I run chef instead of puppet?
[2012-02-09 22:26:00 -0500] bemu: I'd be happy to check out your version, if it's public, Brad_K.
[2012-02-09 22:26:00 -0500] Brad_K: not yet, but it can be our first internally hacked cookbook that i put up.
[2012-02-09 22:27:00 -0500] bemu: That'd be great.
[2012-02-09 22:27:00 -0500] cwj: yeah i'd be interested in that too Brad_K
[2012-02-09 22:27:00 -0500] Brad_K: let me see what it takes to upload a cookbook.  i've never done this before on github.
[2012-02-09 22:27:00 -0500] bemu: It's super easy. You just create a new repo and push it up.
[2012-02-09 22:27:00 -0500] bemu: Let us know if you need any help.
[2012-02-09 22:28:00 -0500] bemu: mlei: What distro?
[2012-02-09 22:29:00 -0500] cwj: robbyt: afaik puppet doesn't have the same kind of search functionality chef offers, same with data bags
[2012-02-09 22:29:00 -0500] cwj: both of which are very useful
[2012-02-09 22:30:00 -0500] robbyt: cwj: yeah, I've used puppet a bit and have found many times that search() would be really useful
[2012-02-09 22:30:00 -0500] bemu: Chef has a lot more friendly community. :D
[2012-02-09 22:30:00 -0500] robbyt: bemu; better looking too, I bet
[2012-02-09 22:32:00 -0500] miah: well i am pretty hot
[2012-02-09 22:33:00 -0500] spicyWith: I'm getting a problemo with a deploy_revision in the application::django recipe. It's trying to do a git-remote ls and it's getting a ENOENT error. Full stack trace here http://pastebin.com/McVkAwZ9 cc/ jtimberman
[2012-02-09 22:35:00 -0500] simon_d: fujin: I've just thought of one thing. My knife client is "simon" yet my ssh login/key is 'user'. would these not matching cause an issue?
[2012-02-09 22:36:00 -0500] Brad_K: bemu  the instructions i was given end with "git push -u origin master", but apparently the version of git i have installed doesn't support the -u option.  should i just leave that off?
[2012-02-09 22:36:00 -0500] bemu: I don't know what the param does.
[2012-02-09 22:37:00 -0500] bemu: Should be fine.
[2012-02-09 22:37:00 -0500] simon_d: hashes match is true and signitures are true so looks like im getting authorised ok
[2012-02-09 22:38:00 -0500] corp: fujin: does this LWRP implementation look OK? https://github.com/jsierles/chef_cookbooks/blob/master/nginx/providers/site.rb
[2012-02-09 22:38:00 -0500] mlei: simon_d: have you tried just rerunning knife configure?
[2012-02-09 22:38:00 -0500] simon_d: I'l give it a go!
[2012-02-09 22:49:00 -0500] simon_d: mlei: I rerun knife configure and same problem
[2012-02-09 22:58:00 -0500] coderanger: miah: giggity
[2012-02-09 22:58:00 -0500] spicyWith: is jtimberman around?
[2012-02-09 22:58:00 -0500] mnewby: I used the same resource name in two different cookbooks, presuming that there was an implicit namespace that would protect cookbooks from stomping on each othernope.  The debug logging showed that the resource as being loaded from cookbookA, when in fact it was overridden by the resource definition in cookbookB.   Is there a best-practice for dealing with accidental overrides of this nature?
[2012-02-09 22:59:00 -0500] spicyWith: coderanger would also do to apiece the recipe gods
[2012-02-09 22:59:00 -0500] coderanger: I'm around
[2012-02-09 22:59:00 -0500] coderanger: Just watching Java om nom all my rams
[2012-02-09 22:59:00 -0500] coderanger: mnewby: What kind of resource
[2012-02-09 22:59:00 -0500] coderanger: mnewby: things like packages and files have an explicit (external) global namespace
[2012-02-09 23:00:00 -0500] coderanger: It usually only comes up for ruby_block or execute
[2012-02-09 23:00:00 -0500] mnewby: It was an execute resource.
[2012-02-09 23:00:00 -0500] spicyWith: I'm trying to deploy with the application recipe. Got myself some nice data bags set up to deploy django and gunicorn on a node. I'm getting a problemo with a deploy_revision in the application::django recipe. It's trying to do a git-remote ls and it's getting a ENOENT error. Full stack trace here http://pastebin.com/McVkAwZ9
[2012-02-09 23:00:00 -0500] spicyWith: ^^ coderanger
[2012-02-09 23:00:00 -0500] coderanger: and for those, just be very descriptive, which is also helpful when debugging
[2012-02-09 23:01:00 -0500] mnewby: Oy.  It sounds like being careful is the only answer at this point.
[2012-02-09 23:01:00 -0500] coderanger: spicyWith: Sounds like git isn't installed
[2012-02-09 23:01:00 -0500] coderanger: spicyWith: do you have the git cookbook applied?
[2012-02-09 23:01:00 -0500] spicyWith: installed it and no dice
[2012-02-09 23:01:00 -0500] spicyWith: it wasn't initially - should be a dependency for the cookbook to begin with, right?
[2012-02-09 23:01:00 -0500] coderanger: No, since you can deploy with either git or svn
[2012-02-09 23:01:00 -0500] spicyWith: damn, git didn't install correctly...
[2012-02-09 23:01:00 -0500] spicyWith: hold on
[2012-02-09 23:02:00 -0500] coderanger: Either its an install issue with git, or a PATH problem
[2012-02-09 23:05:00 -0500] jtimberman: package name is 'git-core' on some versions of ubuntu / debian, for added fun.
[2012-02-09 23:05:00 -0500] spicyWith: coderanger: it's alive!!!
[2012-02-09 23:05:00 -0500] spicyWith: jtimberman coderanger why not make git a requirement?
[2012-02-09 23:05:00 -0500] coderanger: because not everyone uses git
[2012-02-09 23:05:00 -0500] mlei: because it's not required?
[2012-02-09 23:05:00 -0500] spicyWith: I know you can also use svn, but if it ain't gonna work with either of them
[2012-02-09 23:05:00 -0500] jtimberman: spicyWith: because we don't know what version control system your source repository is.
[2012-02-09 23:05:00 -0500] jtimberman: the deploy_revision cookbook supports either.
[2012-02-09 23:06:00 -0500] coderanger: I actually want both the git and svn resources pulled out of core and put in the relevant cookbooks where they belong
[2012-02-09 23:06:00 -0500] coderanger: so that should fail even earlier
[2012-02-09 23:06:00 -0500] jtimberman: coderanger: create a ticket :P
[2012-02-09 23:06:00 -0500] coderanger: jtimberman: I'll add it to the pile :D
[2012-02-09 23:06:00 -0500] spicyWith: and git is dependent on yum?!
[2012-02-09 23:06:00 -0500] spicyWith: serious
[2012-02-09 23:06:00 -0500] jtimberman: coderanger: serious piles.
[2012-02-09 23:06:00 -0500] coderanger: also, dear lord do we need hg support
[2012-02-09 23:06:00 -0500] jtimberman: spicyWith: the git cookbook?
[2012-02-09 23:06:00 -0500] jtimberman: it might be.
[2012-02-09 23:06:00 -0500] coderanger: its just embarrassing :D
[2012-02-09 23:07:00 -0500] jtimberman: coderanger: what is hg?
[2012-02-09 23:07:00 -0500] coderanger: mercurial
[2012-02-09 23:07:00 -0500] spicyWith: jtimberman: si
[2012-02-09 23:07:00 -0500] jtimberman: coderanger: what's that? is it like bazaar?
[2012-02-09 23:07:00 -0500] jtimberman: trolololol
[2012-02-09 23:07:00 -0500] jtimberman: :)
[2012-02-09 23:07:00 -0500] jtimberman: (yes, we do need hg support... there's a mercurial cookbook...)
[2012-02-09 23:07:00 -0500] coderanger: jtimberman: Also can haz darcs?
[2012-02-09 23:07:00 -0500] jtimberman: coderanger: diaf?
[2012-02-09 23:07:00 -0500] jtimberman: you want cvs too? :P
[2012-02-09 23:08:00 -0500] jtimberman: <3
[2012-02-09 23:08:00 -0500] coderanger: well if you are offering ...
[2012-02-09 23:08:00 -0500] spicyWith: I think my vagrant vm is no longer alive...
[2012-02-09 23:08:00 -0500] spicyWith: I actually think it vaporized
[2012-02-09 23:08:00 -0500] jtimberman: coderanger: negative.
[2012-02-09 23:08:00 -0500] jtimberman: my pile of tickets is just fine.
[2012-02-09 23:08:00 -0500] l1x: hey
[2012-02-09 23:09:00 -0500] l1x: jtimberman: do you have a second?
[2012-02-09 23:10:00 -0500] simon_d: this makes no sense. I can use knife to upload all of my cookbooks. I get "undefined method `map'" if I try and list all my cookbooks. If I use the opscode community version of java cookbook and try upload it fails but the github repo one works and uploads. What the hell is going on here!?
[2012-02-09 23:11:00 -0500] Brad_K: bemu: i've done it and re-done it several times, but the instructions i'm following keep re-creating the mongodb directory within the mongodb repo, which is not what i want.
[2012-02-09 23:11:00 -0500] bemu: Brad_K: Let's move to a private message. Can you make a gist of your scroll back?
[2012-02-09 23:11:00 -0500] Brad_K: 'k
[2012-02-09 23:14:00 -0500] l1x: https://gist.github.com/1784127
[2012-02-09 23:22:00 -0500] l1x: so there no check on file existence whatsoever in the entire chef-server and merb universe
[2012-02-09 23:23:00 -0500] miah: mmm ham
[2012-02-09 23:23:00 -0500] l1x: but it would be nice to check if the files is there before the server send it to the client
[2012-02-09 23:38:00 -0500] stphung: does anyone offhand know how to access the name of a node in a recipe?
[2012-02-09 23:38:00 -0500] stphung: node[: ? ][: ?]
[2012-02-09 23:40:00 -0500] erikh: node.name
[2012-02-09 23:41:00 -0500] stphung: tyvm
[2012-02-09 23:41:00 -0500] mlei: or node[:fqdn] depending on what you want to do with it
[2012-02-09 23:42:00 -0500] stphung: just want to tag an ec2 instance "Name" with the node name
[2012-02-09 23:43:00 -0500] mlei: yeah you probably want node.name then
[2012-02-09 23:44:00 -0500] miah: yay. vagrant provision = hot
[2012-02-09 23:44:00 -0500] mlei: fqdn would give you ip-10-20-30-40.ec2.internal probably
[2012-02-09 23:48:00 -0500] Brad_K: cwj: ?
[2012-02-09 23:53:00 -0500] cwj: hi?
[2012-02-09 23:53:00 -0500] bawt: hi is there a way to automatically download chef cookbooks once I've specified them in a role?  For example I have "recipe[git], recipe[sudo], recipe[apt]" in my role and now I'd like to add them to my cookbooks folder
[2012-02-09 23:54:00 -0500] cwj: sup brad_k
[2012-02-09 23:54:00 -0500] bemu: bawt: Forget hi
[2012-02-09 23:54:00 -0500] bawt: sure
[2012-02-09 23:55:00 -0500] bemu: hi?
[2012-02-09 23:55:00 -0500] Brad_K: cwj: just making sure you were around.  hang on...
[2012-02-09 23:55:00 -0500] simon_d: can someone tell me where my cookbooks will be located on the server? I have looked where they are suppose to be based on the server.rb file but that is empty

[2012-02-19 08:04:00 -0500] Axsuul: maek: yea, its just that I'd rather host them locally for now
[2012-02-19 09:55:00 -0500] BryanWB: ohai chefs!
[2012-02-19 09:56:00 -0500] patcon: ohai Bry--ZZZZZZZZZZZSNORE
[2012-02-19 10:00:00 -0500] BryanWB: patcon, it's a bright and shiny day here ;)
[2012-02-19 10:01:00 -0500] BryanWB: mrflip, ping, i am perverting your install_from and have some q's , esp. about the has_binaries attribute
[2012-02-19 10:02:00 -0500] mrflip: lemme pull htat up
[2012-02-19 10:02:00 -0500] mrflip: yeah that could do to be a bit smarter
[2012-02-19 10:02:00 -0500] BryanWB: mrflip, do u ever have binaries in a path besides  extracted_dir/bin   ?
[2012-02-19 10:03:00 -0500] BryanWB: i want to change it to    attribute :has_binaries,  :kind_of => [Array, FalseClass, TrueClass]
[2012-02-19 10:03:00 -0500] mrflip: the only thing it knows how to do is link something to {prefix_root}/bin
[2012-02-19 10:04:00 -0500] BryanWB: for example the jvm has tons of binaries, and i only want to expose some of them
[2012-02-19 10:04:00 -0500] mrflip: I like the idea that you have to enumerate them
[2012-02-19 10:04:00 -0500] mrflip: what if instead it took a file glob
[2012-02-19 10:05:00 -0500] BryanWB: my idea is that if u set it to true, then template a file in /etc/profile.d/foo.sh that appends the home_dir/bin to the path
[2012-02-19 10:05:00 -0500] BryanWB: and if u send an array, will only append those binaries to the path
[2012-02-19 10:05:00 -0500] mrflip: gotcha. I think that should be its own verb -- 'add_dir_to_path'
[2012-02-19 10:06:00 -0500] BryanWB: but the file in /etc/profile.d/foo.sh only applies to login shells, could that be problematic for some apps?
[2012-02-19 10:06:00 -0500] BryanWB: does runit use a login shell for each service it manages?
[2012-02-19 10:07:00 -0500] mrflip: in a runit script you should be using an explicit path anyway
[2012-02-19 10:08:00 -0500] mrflip: I think about it like this -- what is the contract you're announcing
[2012-02-19 10:08:00 -0500] BryanWB: mrflip, but a runit script for say pig, may use java jvm, that is appended to PATH from /etc/profile.d/java.sh
[2012-02-19 10:08:00 -0500] BryanWB: my issue is whether runit by default will use a login tty for pig.
[2012-02-19 10:09:00 -0500] BryanWB: but i know nothing about runit
[2012-02-19 10:09:00 -0500] mrflip: it runs in a very spare environment
[2012-02-19 10:09:00 -0500] mrflip: and with purposefully brittle specifications
[2012-02-19 10:10:00 -0500] mrflip: (eg it should refer to absolute paths)
[2012-02-19 10:10:00 -0500] BryanWB: by absolute paths, u mean it cann't use symlinks?
[2012-02-19 10:10:00 -0500] mrflip: this isn't anything runit specific, it's typically just a shell script that exec's the ultimate runner
[2012-02-19 10:10:00 -0500] mrflip: no symlinks are fine
[2012-02-19 10:10:00 -0500] BryanWB: just not relative directories
[2012-02-19 10:11:00 -0500] BryanWB: how about append_path for the attribute name?
[2012-02-19 10:12:00 -0500] mrflip: https://github.com/infochimps-labs/ironfan-pantry/blob/master/cookbooks/hadoop_cluster/templates/default/sv-hadoop_namenode-run.erb
[2012-02-19 10:12:00 -0500] BryanWB: mrflip, do u use the oracle or openjdk for all your installs?
[2012-02-19 10:12:00 -0500] mrflip: the absolute directories thing is just a matter of good practice -- it's just a shell script
[2012-02-19 10:12:00 -0500] mrflip: sun
[2012-02-19 10:12:00 -0500] mrflip: er oracle
[2012-02-19 10:13:00 -0500] mrflip: hadoop, elasticsearch and cassandra will all very very disappointed
[2012-02-19 10:13:00 -0500] mrflip: if you run them in non-sun java and want them to work well
[2012-02-19 10:14:00 -0500] BryanWB: ah, i have a java cookbook that installs the oracle jdk,  i guess you bake your jdk into you amis?
[2012-02-19 10:14:00 -0500] mrflip: note: i haven't moved things over to the newest java cookbook;
[2012-02-19 10:14:00 -0500] mrflip: no, we use the java cookbook -- I carried over the java::sun recipe
[2012-02-19 10:14:00 -0500] mrflip: that's a task for later this week to migrate
[2012-02-19 10:15:00 -0500] BryanWB: mrflip, hmm, that shouldn't work anymore as its broken in ubuntu
[2012-02-19 10:15:00 -0500] mrflip: on oneiric+ I add a PPA for sun java
[2012-02-19 10:15:00 -0500] mrflip: on natty it works fine
[2012-02-19 10:16:00 -0500] BryanWB: ok, well i rewrote the java ckbk that is now in opscode/cookbooks, u can ask me any questions or issues that come up
[2012-02-19 10:16:00 -0500] mrflip: https://github.com/infochimps-labs/ironfan/blob/master/lib/chef/knife/bootstrap/ubuntu11.10-ironfan.erb
[2012-02-19 10:16:00 -0500] mrflip: I noticed that!
[2012-02-19 10:18:00 -0500] BryanWB: what do u think of append_path for the attribute name instead of has_binaries?
[2012-02-19 10:19:00 -0500] mrflip: I think there should be two different things --
[2012-02-19 10:19:00 -0500] BryanWB: instead of overloading the attribute
[2012-02-19 10:19:00 -0500] mrflip: one that symlinks a file into a known location (the current behavior)
[2012-02-19 10:20:00 -0500] mrflip: and one that adds a bin dir to the global path
[2012-02-19 10:20:00 -0500] mrflip: 'add_global_bin_dir'?
[2012-02-19 10:20:00 -0500] mrflip: It should be something more dramatic than 'append_path'
[2012-02-19 10:21:00 -0500] BryanWB: ouch, u love long names ;)
[2012-02-19 10:21:00 -0500] mrflip: which I would read past as something internal
[2012-02-19 10:21:00 -0500] mrflip: it's a rubyist thing ;)
[2012-02-19 10:21:00 -0500] mrflip: http://www.emacswiki.org/emacs/HippieExpand
[2012-02-19 10:22:00 -0500] BryanWB: don't know if u already use this but i found way to download individual jars and their dependencies using apache ivy, it searches the maven repos
[2012-02-19 10:22:00 -0500] mrflip: something that drops stuff in /etc/profile.d should wear a bright orange safety vest, or at least have a very declaratory name
[2012-02-19 10:23:00 -0500] BryanWB: u don't need a url and u don't need a pom.xml
[2012-02-19 10:23:00 -0500] BryanWB: ckbk forthcoming
[2012-02-19 10:23:00 -0500] BryanWB: fair enough
[2012-02-19 10:24:00 -0500] mrflip: there is a maven cookbook but haven't had to use it
[2012-02-19 10:24:00 -0500] mrflip: we write a shockingly small amt of java for all the java we use
[2012-02-19 10:25:00 -0500] BryanWB: that's beautiful ;)
[2012-02-19 10:27:00 -0500] mrflip: I just got ironfan to launch vms with knife -- it's really really rough but I can say 'knife cluster vm up sandbox-demo' and it will create the cluster with vagrant VMs and provision it with chef
[2012-02-19 10:27:00 -0500] BryanWB: awesome!
[2012-02-19 10:59:00 -0500] tolland: i think it took a while for me to get me head around attributes, but I am really starting to like the flexy power
[2012-02-19 11:22:00 -0500] Axsuul: Is there a way to use environments in run lists? i.e. env[production]
[2012-02-19 11:48:00 -0500] BryanWB: Axsuul, don't think so
[2012-02-19 12:02:00 -0500] Axsuul: BryanWB: thanks
[2012-02-19 12:03:00 -0500] Axsuul: Hmm, for some reason, the User resource, with home "/home/USER" and supports({ :manage_home => true }) doesn't create the home directory
[2012-02-19 12:14:00 -0500] BryanWB: Axsuul, try   supports :manage_home => true  w/ out ({})
[2012-02-19 12:14:00 -0500] Axsuul: BryanWB: it throws a syntax error for some reason if I do that
[2012-02-19 12:17:00 -0500] BryanWB: weird
[2012-02-19 12:28:00 -0500] Axsuul: its ok, I just have to create the directory manually I guess
[2012-02-19 12:28:00 -0500] Axsuul: some day when I have time, I'd like to create a resource for this =p
[2012-02-19 12:36:00 -0500] Axsuul: Do you guys typically keep the chef stuff separate from the app in a different SCM repo? (chef solo)
[2012-02-19 12:41:00 -0500] Axsuul: BryanWB: do you ever occasionally get segmentation faults? I think due to Ruby?
[2012-02-19 12:41:00 -0500] BryanWB: Axsuul, yeah, i have on centos
[2012-02-19 12:42:00 -0500] BryanWB: due to ruby, then the package was upgraded
[2012-02-19 12:42:00 -0500] Axsuul: thanks
[2012-02-19 12:42:00 -0500] BryanWB: had trouble w/ rbel6 ruby packages but the maintainer fixed them
[2012-02-19 12:43:00 -0500] BryanWB: happened recently, w/in last month
[2012-02-19 12:43:00 -0500] Axsuul: ah ok thanks
[2012-02-19 14:12:00 -0500] huzza: Is there much of a discussion to be had about the relative merits of deploying a Rails app with Chef and setting the server up with Chef and deploying with Capistrano? I can't guess which is the better approach.
[2012-02-19 14:57:00 -0500] huzza: [got cut off, sry to repeat] Is there much of a discussion to be had about the relative merits of deploying a Rails app with Chef and setting the server up with Chef and deploying with Capistrano? I can't guess which is the better approach.
[2012-02-19 15:36:00 -0500] truzie: hi
[2012-02-19 15:48:00 -0500] asg: huzza: FWIW, I prefer to use Chef for setting up and configuring systems but use Rundeck, Capistrano, and or Fabric for doing code deployments.
[2012-02-19 16:09:00 -0500] huzza: asg: When deploying Rails, do you have a clever way to create database.yml files based on the chef config, or do you just hard code the settings?
[2012-02-19 16:11:00 -0500] asg: huzza: we basically use an internal config service (based on Redis) that we built to house such config vars and then we build from templates at deploy time.
[2012-02-19 16:12:00 -0500] asg: huzza: I'm sure folks here have myriad ways they use; might be worth asking around tomorrow as more folks will be in here.
[2012-02-19 16:20:00 -0500] huzza: asg: thanks
[2012-02-19 18:09:00 -0500] ssd7: Ohai Chefs
[2012-02-19 18:35:00 -0500] BryanWB: ohai ssd7!
[2012-02-19 18:35:00 -0500] BryanWB: good morning patcon
[2012-02-19 19:35:00 -0500] patcon: haha hey BryanWB :)
[2012-02-19 20:44:00 -0500] maek: can I set an attribute to be a search string?
[2012-02-19 20:44:00 -0500] maek: is that legit?
[2012-02-19 20:47:00 -0500] cwj: you want to use a search to set the value of an attribute? i think you would have to do that inside a recipe
[2012-02-19 20:47:00 -0500] maek: cwj: ok thanks. a bit confused as that attributes.rb is ruby
[2012-02-19 20:49:00 -0500] maek: cwj: any thoughts on how to use search when the node you are searching for might not be there?
[2012-02-19 20:49:00 -0500] maek: and I dont want to have an error. its an optional role
[2012-02-19 20:49:00 -0500] cwj: well if there are no matches to a search i think you should get an empty array back
[2012-02-19 20:50:00 -0500] maek: ah not an error
[2012-02-19 20:50:00 -0500] maek: ok ty that makes it straight forward
[2012-02-19 20:50:00 -0500] cwj: i think so
[2012-02-19 20:50:00 -0500] cwj: np
[2012-02-19 20:50:00 -0500] maek: ill poke at it
[2012-02-19 21:19:00 -0500] maek: as I write more recipes im wondering if there is any unit or functional test methods I could be using/
[2012-02-19 21:21:00 -0500] galthaus: Hi!  Has anyone tried chef-server on Ubuntu 12.04.  early I know.
[2012-02-19 21:22:00 -0500] hippiehacker: http://technet.microsoft.com/en-us/sysinternals/bb896655 seems like it would be useful to detect if anyone has any open files (ala, lsof on linux) However is there a way to do something similar in plain ruby?
[2012-02-19 21:22:00 -0500] hippiehacker: basically we have to replace some files, and sometimes people leave editors or whatever open and it restricts us from renaming or moving directory they belong in
[2012-02-19 21:23:00 -0500] hippiehacker: would be nice to test if the directory CAN be moved (ie doesn't have any open file-handles within it)
[2012-02-19 21:28:00 -0500] galthaus: hippiehacker: on linux?
[2012-02-19 21:30:00 -0500] hippiehacker: galthaus: nah, windows
[2012-02-19 21:30:00 -0500] hippiehacker: though if I could figure it out in plain ruby on linux, I'd probably know where to look in windows 8)
[2012-02-19 21:31:00 -0500] galthaus: I was going to have you use ruby dir on /proc/*/fd/*
[2012-02-19 21:31:00 -0500] hippiehacker: heh
[2012-02-19 21:31:00 -0500] galthaus: filter on ^/
[2012-02-19 21:32:00 -0500] galthaus: but that is a little overkill-ish and definitely won't be a windows thing.
[2012-02-19 21:32:00 -0500] hippiehacker: seems silly that I have to try and rename a dir before I could be sure that it would occur
[2012-02-19 21:32:00 -0500] galthaus: Windows programming is not my thing.
[2012-02-19 21:32:00 -0500] hippiehacker: I'm shutting down the windows iis web server, then trying the rename (which I can do before hand)
[2012-02-19 21:33:00 -0500] hippiehacker: if the rename occurs the recipe goes ahead as planned, (bringing the service up
[2012-02-19 21:33:00 -0500] hippiehacker: but if it fails it leaves the service down
[2012-02-19 21:33:00 -0500] hippiehacker: I can't seem to find the resource equivalent of 'ensure'
[2012-02-19 21:33:00 -0500] galthaus: Do you have a follow-up mechanism to deal with leacing the service down.
[2012-02-19 21:34:00 -0500] hippiehacker: I'm not sure how to put that into a recipe I suppose
[2012-02-19 21:35:00 -0500] hippiehacker: basically the chef-run bails at that point
[2012-02-19 21:35:00 -0500] hippiehacker:  leaving everything down 8(
[2012-02-19 21:35:00 -0500] galthaus: yeah
[2012-02-19 21:35:00 -0500] galthaus: That is the tough part.  Can you separate out your editing contexts from your execution contexts?
[2012-02-19 21:35:00 -0500] galthaus: In other words, quit hitting your hand with the hammer?
[2012-02-19 21:36:00 -0500] hippiehacker: it's people 8)
[2012-02-19 21:36:00 -0500] hippiehacker: they go in and open a file manually
[2012-02-19 21:36:00 -0500] galthaus: right, get rid of them .:-)
[2012-02-19 21:36:00 -0500] hippiehacker: excellent!
[2012-02-19 21:37:00 -0500] hippiehacker: wait, they are the customer
[2012-02-19 21:37:00 -0500] hippiehacker: 8(
[2012-02-19 21:37:00 -0500] galthaus: well, could you have a recipe that copies files from an edit location to your server execution location.
[2012-02-19 21:37:00 -0500] hippiehacker: I'd like to send them a simple email that says, this run didn't complete because you hade file X open... close it and we'll upgrade
[2012-02-19 21:37:00 -0500] galthaus: Let them edit all they want, but have the recipe move after/during.
[2012-02-19 21:37:00 -0500] hippiehacker: a basically create a mystuff.NEW
[2012-02-19 21:38:00 -0500] hippiehacker: bring the server down, and try an "iis down! ; rename mystuff mystuff.OLD ; rename mystuff.NEW mystuff ; iss up!'
[2012-02-19 21:38:00 -0500] hippiehacker: they can't seem to keep there noses out of ./mystuff 8)
[2012-02-19 21:39:00 -0500] hippiehacker: doesn't have to be an editor
[2012-02-19 21:39:00 -0500] hippiehacker: it's often just the file-explorer
[2012-02-19 21:39:00 -0500] galthaus: ugh.
[2012-02-19 21:39:00 -0500] hippiehacker: windows gives me gas
[2012-02-19 21:39:00 -0500] Axsuul: Does anyone here put their cookbooks, roles, etc into the same repo as their app? (chef solo)
[2012-02-19 21:40:00 -0500] Axsuul: I'm thinking about doing this...
[2012-02-19 21:40:00 -0500] hippiehacker: Axsuul: i don't think it's uncommon, but I use https://github.com/applicationsonline/librarian to make things a bit cleaner than just having a ./cookbooks dir
[2012-02-19 21:41:00 -0500] Axsuul: hippiehacker: ah neat
[2012-02-19 21:42:00 -0500] galthaus: We keep the code with the cookbooks, but cookbooks and their control is our app.
[2012-02-19 21:44:00 -0500] Axsuul: galthaus: just the cookbooks, or the roles, nodes, etc too?
[2012-02-19 21:48:00 -0500] galthaus: sorry- roles, databags, and cookbooks.
[2012-02-19 21:48:00 -0500] galthaus: My project is Crowbar.  We have a rails app that helps manage hooking cookbooks together (along with other stuff).
[2012-02-19 21:50:00 -0500] galthaus: so, we have cookbooks, roles, databags, and subsectiosn of the rails app in a bundle that we store in github.
[2012-02-19 21:50:00 -0500] JasonBox: This must be an obvious question, but I still can't see how to get my hw address out of node[:network][:interfaces] ?
[2012-02-19 21:50:00 -0500] galthaus: We have a build process that bundles it all with the appropriate packages.
[2012-02-19 21:51:00 -0500] flashmanbahadur: JasonBox: it shows up on an instance in that location when you use ohai?
[2012-02-19 21:51:00 -0500] galthaus: JasonBox: node[:network][:interfaces][<if name>][:addresses][<mac address>]
[2012-02-19 21:52:00 -0500] galthaus: You want the key that contains a hash member family:lladdr
[2012-02-19 21:52:00 -0500] JasonBox: I definitely have a hwaddress floating around in there
[2012-02-19 21:52:00 -0500] JasonBox: But can't see how to link my iface name to it to acquire it
[2012-02-19 21:54:00 -0500] hippiehacker: galthaus: I made a project similar to crowbar at https://github.com/passionengine/ii
[2012-02-19 21:54:00 -0500] hippiehacker: not as far along as crowbar, and I didn't even know about crowbar till last week 8)
[2012-02-19 21:55:00 -0500] galthaus: hippiehacker: :-)
[2012-02-19 21:56:00 -0500] galthaus: JasonBox: I have to use ruby to iterate over the interfaces hash.  THis gives you the name and hash.  The hash contains a key/value addresses.
[2012-02-19 21:56:00 -0500] galthaus: I then iterate over the hash that is in addresses.  The key is an address and the containing hash had data about the address.
[2012-02-19 21:57:00 -0500] galthaus: You then have to find the k/v pair in that sub hash that has family = lladdr
[2012-02-19 21:57:00 -0500] galthaus: Let me see if I still have this code around
[2012-02-19 21:58:00 -0500] galthaus: Sorry Jason, I got rid of that code from crowbar it appears.  We are linux only and I pull from /sys/class/net/*/address
[2012-02-19 21:58:00 -0500] hippiehacker: galthaus: did you implement your own dhcp server for crowbar? I made some ttempts at bringing a few different dhcp libraries to support all the fields needed for pxe
[2012-02-19 21:58:00 -0500] JasonBox: galthaus: Yeah, doing something awful like that now
[2012-02-19 21:59:00 -0500] galthaus: Easier for the ohai context I'm in at the time.
[2012-02-19 21:59:00 -0500] galthaus: hippiehacker: we ahve a dhcp cookbook that we use to force nodes through bringup stages.
[2012-02-19 22:00:00 -0500] galthaus: in conjunction with the rails app.  We manage the state of a node through bring-up and then we push updates to the dhcp server through the cookbooks.
[2012-02-19 22:00:00 -0500] galthaus: mostly on node start up and the manage links, but same idea.  We found it easier to move around pxe links instead of dhcp client state in the server.
[2012-02-19 22:01:00 -0500] galthaus: So, we have machines PXE boot to a known setup location and then have the rails app adjust links.  Though the cookbooks will make sure the links are maintained if someone whacks them.
[2012-02-19 22:03:00 -0500] JasonBox: pulling from sys sounds like more fun
[2012-02-19 22:05:00 -0500] galthaus: JasonBox: https://github.com/dellcloudedge/barclamp-deployer/blob/master/chef/cookbooks/ohai/files/default/plugins/crowbar.rb
[2012-02-19 22:06:00 -0500] galthaus: line 63
[2012-02-19 22:08:00 -0500] JasonBox: Oh cool
[2012-02-19 22:08:00 -0500] JasonBox: That appears to be more sane that fighting with ohai, actually
[2012-02-19 22:10:00 -0500] JasonBox: I think I might just do that
[2012-02-19 22:11:00 -0500] JasonBox: galthaus: thanks!
[2012-02-19 22:11:00 -0500] willejs: hi, i restored a failing system from a backup on AWS, and now when i run chef-client i get 401 "Unauthorized"
[2012-02-19 22:12:00 -0500] maek: willejs: ntp
[2012-02-19 22:12:00 -0500] willejs: do i need to tell chef that this is the same server even though now it has a different ip address?
[2012-02-19 22:12:00 -0500] willejs: ahh
[2012-02-19 22:12:00 -0500] willejs: Sun Feb 19 22:12:31 UTC 2012
[2012-02-19 22:12:00 -0500] willejs: time is correct
[2012-02-19 22:12:00 -0500] maek: willejs: as long as the client key is the same as what was there before it shouldnt care
[2012-02-19 22:13:00 -0500] maek: willejs: same as chef server? they can only be a few if any seconds off
[2012-02-19 22:13:00 -0500] maek: willejs: also you could knife client delete
[2012-02-19 22:13:00 -0500] maek: and then knife client add
[2012-02-19 22:13:00 -0500] maek: and copy that pem to the host, but afaik changing the ip should not result in unauthorized
[2012-02-19 22:14:00 -0500] willejs: times match...
[2012-02-19 22:14:00 -0500] willejs: ahh il do client delete, client add
[2012-02-19 22:14:00 -0500] maek: any chance this box had its client key changed since the backup was taken?
[2012-02-19 22:14:00 -0500] maek: yeah i find it easier to do that then trouble shoot once I know ntp isnt the issue
[2012-02-19 22:16:00 -0500] galthaus: willejs: Make sure the name matches.  I think that can be a problem as well.
[2012-02-19 22:18:00 -0500] maek: willejs, galthaus: oh yeah derp. ec2 when you restore it gets a new hostname
[2012-02-19 22:18:00 -0500] maek: galthaus: good catch
[2012-02-19 22:19:00 -0500] willejs: ahh, so if i change the hostname it should work?
[2012-02-19 22:20:00 -0500] maek: willejs: at that point you should just add it as a new client
[2012-02-19 22:20:00 -0500] willejs: okay... im trying to create it but i get ERROR: RuntimeError: Please set EDITOR environment variable
[2012-02-19 22:21:00 -0500] maek: export EDITOR=vim
[2012-02-19 22:21:00 -0500] maek: you can no longer make clients without going to the editor :(
[2012-02-19 22:22:00 -0500] willejs: yeah, i set it, but it still says it
[2012-02-19 22:24:00 -0500] galthaus: JasonBox: we use that code to figure out switch port location of each port for our physical boxes.  It takes awhile, but stores the values on a structure on the node.  Use as you wish.  It assumes the switch is emitting LLDP med config frames.
[2012-02-19 22:27:00 -0500] willejs: yeah, so i set the envionment variable, but it still complains
[2012-02-19 22:28:00 -0500] galthaus: willejs: what chef-server are you using?
[2012-02-19 22:30:00 -0500] willejs: Chef Server (API) Version: 0.10.4
[2012-02-19 22:30:00 -0500] galthaus: if you have the validation.pem handy, you can clear the client.pem and remove the client from the server and let the next chef-client run "fix" it.
[2012-02-19 22:30:00 -0500] maek: you have to put the validation.pem in the /etc/chef dir of the client. in cast that isn't clear
[2012-02-19 22:31:00 -0500] galthaus: But this is from my private/opensource chef-server experience.
[2012-02-19 22:31:00 -0500] galthaus: if you are using managed chef, I think you have to be more explicit with your key/client management.
[2012-02-19 22:34:00 -0500] willejs: galthaus: cheers, tryed it but get this
[2012-02-19 22:34:00 -0500] willejs: INFO: HTTP Request Returned 409 Conflict: Client already exists
[2012-02-19 22:34:00 -0500] willejs: i have deleted the client from the server
[2012-02-19 22:35:00 -0500] maek: does that box still have client.pem
[2012-02-19 22:35:00 -0500] maek: willejs: ^ ?
[2012-02-19 22:35:00 -0500] willejs: no i renamed it
[2012-02-19 22:35:00 -0500] galthaus: hmm - to me, that means you haven't deleted the client.   Yes, what maek says
[2012-02-19 22:35:00 -0500] willejs: INFO: Client key /etc/chef/client.pem is not present - registering
[2012-02-19 22:36:00 -0500] willejs: INFO: HTTP Request Returned 403 Forbidden: You are not allowed to take this action.
[2012-02-19 22:36:00 -0500] galthaus: knife client list
[2012-02-19 22:36:00 -0500] galthaus: shows the client or not.
[2012-02-19 22:37:00 -0500] galthaus: shoot - slumber party is kicking into high gear.  Back later.  I think you need remove the client on hte server side.  If this is managed chef, then you may have to do other things.
[2012-02-19 22:37:00 -0500] willejs: not in it :(
[2012-02-19 22:38:00 -0500] galthaus: check for other pems
[2012-02-19 22:39:00 -0500] galthaus: like <name>,pem that can do it as well
[2012-02-19 22:44:00 -0500] willejs: moved all the other pems to pem.old
[2012-02-19 22:44:00 -0500] willejs: well renamed
[2012-02-19 22:44:00 -0500] willejs: and it has done the same thing
[2012-02-19 23:02:00 -0500] willejs: meh, i just created a new node completely

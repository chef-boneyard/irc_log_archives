[2012-10-23 00:23:53 -0400] miah: its def rainy  here
[2012-10-23 00:26:53 -0400] miah: i had to go buy some warmer clothes cuz i was freezing
[2012-10-23 00:33:59 -0400] srleod: How can I get a new node to bootstrap with a newer version of the chef client?  --distro something?  It seems to always pull 10.14.2 which has some bugs that screw up my cookbooks.
[2012-10-23 00:36:02 -0400] yfeldblum: srleod, many people are using the chef-full distro
[2012-10-23 00:37:38 -0400] srleod: I'm just turning on a new node with --distro chef-full, but it's using 10.14.2-1.ubuntu.11.04
[2012-10-23 00:39:58 -0400] cwj: i think your local version of knife/chef determines which version of chef gets bootstrapped on the remote node
[2012-10-23 00:40:38 -0400] srleod: cwj - oooooh!
[2012-10-23 00:40:51 -0400] srleod: that makes sense.  THANKS!
[2012-10-23 00:41:46 -0400] cwj: you bet!
[2012-10-23 00:41:57 -0400] miah: you can specify the version too iirc
[2012-10-23 00:44:16 -0400] thom: miah: yeah it is not warm
[2012-10-23 00:45:15 -0400] miah: i got fleece lined tights and gloves now so its all good =)
[2012-10-23 01:13:24 -0400] coderanger: miah: Have you guys done dinners?
[2012-10-23 01:14:40 -0400] ci_: knife ssh to vagrant virtual machine
[2012-10-23 01:15:10 -0400] Glace: I cant wait for GCE to be not in beta anymore to switch all my AWS load to it.. god damn
[2012-10-23 01:15:11 -0400] ci_: knife ssh -a ipaddress -x vagrant -i ../../.ssh/vagrant name:vagrant-vm 'df -h'
[2012-10-23 01:15:28 -0400] ci_: Times out every time
[2012-10-23 01:15:32 -0400] ci_: any idea why?
[2012-10-23 01:15:37 -0400] ci_: vagrant ssh works fine
[2012-10-23 01:15:46 -0400] ci_: knife command gives
[2012-10-23 01:15:57 -0400] ci_: WARNING: Failed to connect to node[vagrant-vm] -- Errno::ETIMEDOUT: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. - connect(2)
[2012-10-23 01:20:58 -0400] miah: coderanger: we are nibbling on cheese/meat at fonte and drinking lots of coffee
[2012-10-23 01:21:15 -0400] miah: might get something more substantial here as well. i dont think we're going to be wandering very far from here though.
[2012-10-23 01:23:22 -0400] ci_: anyone have experience with a knife ssh ETIMEDOUT error with a vagrant vm?
[2012-10-23 01:25:05 -0400] drgonzo65: with 10.16.0, I am seeing that all cookbook_file owners and groups are getting set as 0 instead of the specified owner and groupreally bad news
[2012-10-23 01:25:42 -0400] Glace: Anyone have been able to disable windows firewall with validation with Chef?
[2012-10-23 01:26:42 -0400] Glace: Is there a way to output the results of a windows batch (windows provider) and regex it?
[2012-10-23 01:29:39 -0400] coderanger: miah: Hmm doesn't seem to have real food unless they have a hidden menu
[2012-10-23 01:32:58 -0400] coderanger: miah: Heading towards lecosho if anyone wants to join in
[2012-10-23 01:50:50 -0400] cschneid: I've never used chefserver before, but have some familiarity with chefsolo. Where should I go to read up on how to get started with using the interface for the hosted version?
[2012-10-23 01:51:04 -0400] cschneid: ie, how to setup knife, setup a new node, say what role it belongs to, etc, etc.
[2012-10-23 01:58:26 -0400] miah: cschneid: http://wiki.opscode.com/display/chef/Knife
[2012-10-23 02:27:58 -0400] MikeYama: Hi there, calling in from Japan via Creationline
[2012-10-23 02:29:40 -0400] MikeYama: Wanted to ask a couple of questions - is there a way to recipe-ize virtual IOs on bare metal?
[2012-10-23 02:57:24 -0400] Glace: Is it possible to output a windows batch script ( from the windows cookbook provider) into a variable?
[2012-10-23 02:57:46 -0400] Glace: Outputing the results
[2012-10-23 02:58:02 -0400] cschneid: is it normal to run chef-client on a cronjob? Or should I trigger it manually after a cookbook update (via knife ssh command)
[2012-10-23 03:13:20 -0400] yfeldblum: cschneid, it is normal for some people but not for other people
[2012-10-23 03:14:05 -0400] cschneid: yfeldblum: thanks :)
[2012-10-23 03:14:17 -0400] cschneid: how do I run a sub-recipe. For instance, I want the server version of: knife node run_list add i-0f03d273 'recipe[postgresql]'
[2012-10-23 03:17:46 -0400] yfeldblum: cschneid, http://wiki.opscode.com/display/chef/Recipes#Recipes-IncludingRecipes
[2012-10-23 03:19:35 -0400] joonas: cschneid: you could look at some of the existing recipes, like https://github.com/coroutine/chef-postgresql :)
[2012-10-23 03:31:49 -0400] cschneid: ok. So I launched ec2 instance, installed psql on it.  Now - how do nodes know about each other? Presumably, I should be able to say in my web-instance roles "hey, go setup your database file to point at xyz ip" right?
[2012-10-23 03:41:59 -0400] flaccid: check out node search in the docs
[2012-10-23 03:43:10 -0400] cschneid: flaccid: so the idea is that my recipe would do a search on the db_server role and hook up that way?
[2012-10-23 03:45:35 -0400] flaccid: you can search with different elements so you could choose
[2012-10-23 03:46:08 -0400] cschneid: similarly, a load balancer node would search on web-app nodes and fill out the config
[2012-10-23 03:46:21 -0400] cschneid: or whatever.  Is that a general use? Is there a better way to wire nodes together?
[2012-10-23 03:58:33 -0400] rndm: what's the right way to detect ubuntu version?
[2012-10-23 03:59:06 -0400] rndm: i want to vary template content based on 10.04 or 12.04
[2012-10-23 04:00:11 -0400] flaccid: rndm: node['platform_version'] iirc
[2012-10-23 04:00:36 -0400] rndm: thanks i'll look in that direction
[2012-10-23 04:01:21 -0400] flaccid: and of course node['platform'] and you can use value_for_platform in recipes
[2012-10-23 04:05:37 -0400] rndm: also is there a way to detect ec2? (assuming i provision those with knife ec2?)
[2012-10-23 04:14:01 -0400] flaccid: ohai | grep ec2
[2012-10-23 04:14:07 -0400] flaccid: i think its cloud_provider or something
[2012-10-23 04:14:21 -0400] rndm: sweet
[2012-10-23 04:14:23 -0400] rndm: thanks again
[2012-10-23 04:26:22 -0400] geekyogi: Hi, What is the "Action:" field to execute a shell script ?
[2012-10-23 04:29:33 -0400] cwj: http://wiki.opscode.com/display/chef/Resources#Resources-Script
[2012-10-23 04:57:18 -0400] geekyogi: thanks @cwj
[2012-10-23 04:57:52 -0400] Glace: any ideas out to output a bash script to a variable?
[2012-10-23 05:01:30 -0400] cwj: Glace: maybe consider using mixlib::shellout? i dont think you can get the output from a bash resource
[2012-10-23 05:02:11 -0400] Glace: cwj: I will look into that.. actually thats even worst.. I am trying to get it from a windows batch script(windows cookbook bash provider)
[2012-10-23 05:04:14 -0400] Rayko: sorry to bother with a noob question, I'm attemping an install of chef on an ubuntu machine, but apt returns a 404 when fetching packages for an i386 machine, advice/idea?
[2012-10-23 05:08:39 -0400] Glace: cwj: if I output the script into a file.. what would be the best way to do an if if it fins a string.. (on a windows node) ruby regex?
[2012-10-23 05:10:14 -0400] evxd: Rayko: what command are you running?
[2012-10-23 05:10:42 -0400] Rayko: the apt-get update to fetch update the apt db
[2012-10-23 05:10:57 -0400] cwj: Glace: sorry, i don't quite understand the question. you want to output the script to a file and then execute the script if a regex is matched?
[2012-10-23 05:11:12 -0400] Glace: cwj: sorry im french :)
[2012-10-23 05:11:17 -0400] Glace: and yes thats exactly it
[2012-10-23 05:11:40 -0400] Rayko: evxd: "http://apt.opscode.com/dists/oneric-0.10/main/binary-i386/Packages  404  Not Found" this is the output
[2012-10-23 05:12:20 -0400] Glace: I want to output the result of a script into a file (which returns values).. if a certain value is in the output file.. I want to execute another script
[2012-10-23 05:12:59 -0400] evxd: Rayko: you spelled your distro name wrong
[2012-10-23 05:13:17 -0400] evxd: it should be the same as the output from `lsb_release -sc`
[2012-10-23 05:13:21 -0400] evxd: oneiric
[2012-10-23 05:13:21 -0400] cwj: ok, you can use the only_if guard to prevent a resource from running unless a condition is met
[2012-10-23 05:13:39 -0400] cwj: only_if { some ruby in here where you look for the pattern in the file }
[2012-10-23 05:14:09 -0400] cwj: so you could have an execute resource which is set up to run your second script, guarded by the only_if statement
[2012-10-23 05:14:12 -0400] Glace: cwj: ok thanks
[2012-10-23 05:14:30 -0400] Rayko: evxd: touche, I wrote it by hand, missed the extra "i"
[2012-10-23 05:14:48 -0400] cwj: you're welcome :)
[2012-10-23 05:16:04 -0400] evxd: i pronounce it "one eye rick" for that very reason
[2012-10-23 05:19:54 -0400] Rayko: hehe, that's useful, I don't know why I always read and say "oneric" whenever I see it, thanks, by the way, what version would you recommend 0.9 or 0.10?
[2012-10-23 05:21:14 -0400] evxd: if you're just getting started, i don't think there's really a good reason to use 0.9, so 0.10
[2012-10-23 05:26:04 -0400] Rayko: yeah, I'm new to chef, I'll go with the 0.10 release then
[2012-10-23 05:44:22 -0400] geekyogi: execute "install_agent" do
[2012-10-23 05:44:23 -0400] geekyogi:     command "./install_agent.sh"
[2012-10-23 05:44:23 -0400] geekyogi:     cwd "/tmp/"
[2012-10-23 05:44:23 -0400] geekyogi:     environment ({})
[2012-10-23 05:44:24 -0400] geekyogi:     action :nothing
[2012-10-23 05:44:24 -0400] geekyogi:   end
[2012-10-23 05:44:24 -0400] geekyogi:   template "install_agent_script" do
[2012-10-23 05:44:24 -0400] geekyogi:     source "_tmp_install_agent.sh"
[2012-10-23 05:44:25 -0400] geekyogi:     path "/tmp/install_agent.sh"
[2012-10-23 05:44:25 -0400] geekyogi:     mode "744"
[2012-10-23 05:44:26 -0400] geekyogi:     notifies :run, "execute[install_agent]", :immediately
[2012-10-23 05:44:26 -0400] geekyogi:     action :create
[2012-10-23 05:44:27 -0400] geekyogi:   end
[2012-10-23 05:44:27 -0400] geekyogi:   file "install_agent_delete" do
[2012-10-23 05:44:28 -0400] geekyogi:     path "/tmp/install_agent.sh"
[2012-10-23 05:44:28 -0400] geekyogi:     action :delete
[2012-10-23 05:46:25 -0400] geekyogi: Sorry for flooding, will this execute the bash script install_agent.sh , http://pastebin.com/ntDrqDV8
[2012-10-23 05:52:21 -0400] BryanWB_: ohai chefs!
[2012-10-23 05:53:18 -0400] jopz: Hello
[2012-10-23 05:53:32 -0400] jopz: How to integrate chef with openstack
[2012-10-23 05:56:28 -0400] BryanWB_: geekyogi: ur paste looks ok, what problem u having?
[2012-10-23 05:57:04 -0400] geekyogi: The script doesn't get executed..
[2012-10-23 05:57:40 -0400] geekyogi: @BryanWB, chef is integrated with the application.. I'm not aware of the reason, but the shell script doesn't get executed
[2012-10-23 05:58:15 -0400] BryanWB_: geekyogi: is it executable?
[2012-10-23 05:58:24 -0400] geekyogi: @BryanWB, yes
[2012-10-23 05:58:55 -0400] geekyogi: @BryanWB, could it be due to "action" set to "nothing"
[2012-10-23 05:59:37 -0400] BryanWB_: geekyogi: but it should be notified to run
[2012-10-23 05:59:43 -0400] BryanWB_: when template created
[2012-10-23 06:00:04 -0400] BryanWB_: maybe try   comman "bash /tmp/install_agent.sh"
[2012-10-23 06:00:21 -0400] geekyogi: sure ok
[2012-10-23 06:00:39 -0400] geekyogi: @BryanWB_ I will try that.. thanks
[2012-10-23 06:26:39 -0400] Rayko: to change the port of the chef server I should edit the server.rb file on the chef_server_url line, right? or is there something else to change?
[2012-10-23 06:40:01 -0400] hippiehacker: https://github.com/hh/veewee/tree/feature/windows # this now works, needs some testing and integration with vagrant, but we can now make a winrm only based windows image (no cygwin/ssh required)
[2012-10-23 07:11:31 -0400] Rayko: can I get some help configuring the chef server in this IRC or should I look for it somewhere else?
[2012-10-23 07:52:14 -0400] Schmidt: Good morning, how can I use a specific MAC address from a network interface in a template?
[2012-10-23 08:01:51 -0400] flaccid: Schmidt: see if its in ohai i guess
[2012-10-23 08:02:38 -0400] flaccid: i think there is macaddress
[2012-10-23 08:21:30 -0400] jorgesilva: mornin
[2012-10-23 08:23:36 -0400] Virunga: Hi.
[2012-10-23 08:24:05 -0400] jmara: Hey Guys, does anyone know if there are some Chef-Usergroups in Germany?
[2012-10-23 09:17:05 -0400] fish_: hrm looks like I found a bug with gem_package :remove. running chef(solo in that case) with debugging, it shows that it found that installed gem but in the next line 'package does not exist'
[2012-10-23 09:47:16 -0400] AikiLinux: i am trying to configure an omnibus install with my desktop as a client to upload cookbooks
[2012-10-23 09:47:31 -0400] AikiLinux: but i know i am doing something wrong as it isn't working
[2012-10-23 09:48:11 -0400] AikiLinux: do i need to run the knife configure on the new OS that will run the cookbook or on my desktop where i do the cookbook development ?
[2012-10-23 10:12:13 -0400] makuk66: AikiLinux: if your desktop is where you upload cookbooks, that's where you need knife. Chef-client on a chef node does not need a knife config to be able to run cookbooks
[2012-10-23 11:21:00 -0400] LennyLinux: Hi, if i set chef-client as a daemon and i change and upload on the server a cookbook present in its run_list, will it affect the client at the next run?
[2012-10-23 11:30:12 -0400] LennyLinux: I set chef-client as daemon and ps gives me this /usr/bin/ruby1.9.1 /usr/bin/chef-client -d -P /var/run/chef/client.pid -L /var/log/chef/client.log -c /etc/chef/client.rb -i 600 -s 20
[2012-10-23 11:30:17 -0400] laurent\: LennyLinux: unless configured otherwise it will download and use it yes
[2012-10-23 11:31:53 -0400] BryanWB_: coderanger: curious what u think of this dsl for collectd https://github.com/bryanwb/collectd-dsl/blob/bwb-test/foo.rb
[2012-10-23 11:38:54 -0400] LennyLinux: laurent\: can i check if a cookbook's version is equal on the client and server?
[2012-10-23 11:41:40 -0400] LennyLinux: Then, what tags are for? Like labels?
[2012-10-23 11:42:51 -0400] LennyLinux: Oh, ok, it worked.
[2012-10-23 11:42:58 -0400] LennyLinux: Awesome.
[2012-10-23 11:46:32 -0400] houst0n: Hi Guys, trying to setup a chef server w/ the bootstrap instructions on the opscode wiki however it's crapping out rather meekly. Is bootstrap-latest.tar.gz broken or something atm?
[2012-10-23 11:46:38 -0400] houst0n: http://pastie.org/5103088 <-- looks like it
[2012-10-23 12:22:02 -0400] flashingpumpkin: guys, running chef-client with an -o flag that changes the run list from the current role to a single recipe, do I not have access to the attributes that the role set?
[2012-10-23 12:25:19 -0400] laurent\: since the role is not used i'm afraid you don't
[2012-10-23 12:25:32 -0400] flashingpumpkin: laurent\, right, thanks
[2012-10-23 12:25:59 -0400] flashingpumpkin: I guess I'd have to tags then
[2012-10-23 12:26:23 -0400] flashingpumpkin: Use case: There's a recipe that actually performs an application upgrade, which should run manually though, ie with the -o flag on chef-client
[2012-10-23 12:27:48 -0400] kechagia: I have a provider that creates users, and a definition that copies files to a users homedir. Unfortunately the recipe doesn't seem to be sequential, so the copy-definition is run before the user-provider, resulting in an error if the user is not there yet. Is there a way to enforce the order in a recipe? Are providers called after definitions? is there any rule?
[2012-10-23 13:06:17 -0400] erthad: hi, all
[2012-10-23 13:06:43 -0400] erthad: does anyone know of a way to detect first run on the box while using chef solo?
[2012-10-23 13:09:28 -0400] yfeldblum: kechagia, recipes are indeed sequential, in a very specific way: they are ruby code, so your ruby code runs in the exact sequence you specify; when you declare a resource, the resource declaration is simply added to a list called the resources-collection; there is one resources-collection for the whole of the chef run; after every recipe has finished running all the ruby code in the recipes, then and only then, chef loops over the
[2012-10-23 13:09:29 -0400] yfeldblum:  resource declarations in the resources-collection, in the order in which the resources were declared, and "runs" them
[2012-10-23 13:11:07 -0400] yfeldblum: kechagia, definitions are not resources, however; they are macros, and as macros, they are "expanded" (run) immediately as the rest of the normal ruby code, and are not "saved for later" like resources are; if a definition declares a few resources, then those resource declarations will be added to the resources-collection to be "run" later, after all the recipes have finished running
[2012-10-23 13:14:44 -0400] kechagia: yfeldblum: thank you very much for your explanation. so the workaround would be to declare a resource for the definition as well? or is there away to "force" the resource-collection to be run at a specific time in the recipe?
[2012-10-23 13:14:55 -0400] kechagia: is it a better codestyle to just always use resources instead of definitions?
[2012-10-23 13:21:48 -0400] yfeldblum: kechagia, if you need to run ruby code in-between when one resource A is "run" and when another resource B is "run", you can use a ruby_block resource and declare it after resource A but before resource B ... http://wiki.opscode.com/display/chef/Resources#Resources-RubyBlock
[2012-10-23 13:22:54 -0400] yfeldblum: kechagia, so your definition might declare a ruby_block resource, and it's the ruby_block resource's job to perform the file-copying operation
[2012-10-23 13:27:53 -0400] ekristen: has anyone successfully used used nginx cookbook to install nginx and passenger together?
[2012-10-23 13:29:53 -0400] kechagia: yfeldblum: thanks, i'll try that.
[2012-10-23 13:56:32 -0400] killfill: how do i make ahte apache2 cookbook use worker instead of prefork?
[2012-10-23 14:21:51 -0400] belber: dsafadsf
[2012-10-23 14:24:55 -0400] belber: Hello, I need some help. I'm adding a file in my recipe with the owner "unicorn". But now, when I run ls -al, shows me that is the root user the owner.
[2012-10-23 14:25:13 -0400] belber: cookbook_file "/home/unicorn/.ssh/github.key" do   source "github.key"   owner "unicorn"   mode 0600   not_if {File.exists?("/home/unicorn/.ssh/github.key")} end
[2012-10-23 14:26:24 -0400] belber: ubuntu@ip-10-98-90-47:~$ ls -al /home/unicorn/.ssh/github.key -rw------- 1 root root 1679 Oct 23 14:06 /home/unicorn/.ssh/github.key
[2012-10-23 14:28:35 -0400] belber:  /me waves hello
[2012-10-23 14:39:23 -0400] Death_Syn: hmm
[2012-10-23 14:39:52 -0400] Death_Syn: I keep trying to install openssh cookbook 1.1.0, but my repo keeps getting 0.8.0, despite knife saying it is grabbing 1.1.0
[2012-10-23 14:39:56 -0400] Death_Syn: Anyone know what I'm doing wrong?
[2012-10-23 14:42:03 -0400] masterkorp: Hello, i have a problem with test kitchen
[2012-10-23 14:42:20 -0400] masterkorp: i use the vbguest plugin for vagrant
[2012-10-23 14:43:01 -0400] masterkorp: oh it just run at 2nd try
[2012-10-23 14:43:57 -0400] masterkorp: http://pastie.org/5103833
[2012-10-23 14:44:04 -0400] masterkorp: this is the problem
[2012-10-23 14:44:19 -0400] masterkorp: vgbuest cant ssh to the machine under kitchen
[2012-10-23 14:44:27 -0400] itchyouch: Unrelated question: anyone using anything other than implants for IP address management?
[2012-10-23 14:44:37 -0400] itchyouch: Ipplan
[2012-10-23 14:55:18 -0400] gyre008: can someone explain me what the heck is going on here ? https://gist.github.com/3939226
[2012-10-23 14:55:32 -0400] gyre008: in the logs service is visible as a resourcebut then somehow isn't :D
[2012-10-23 14:55:34 -0400] gyre008: uhhh
[2012-10-23 15:01:46 -0400] gyre008: that makes not sense to me.totally weird
[2012-10-23 15:01:51 -0400] gyre008: unless there is a bug...
[2012-10-23 15:14:33 -0400] killfill: hm..
[2012-10-23 15:16:09 -0400] killfill: im using chef-solo, and have a run_list like this  "recipe[apache]", "recipe[final_touch]"...   i need final_touch to be executed after apache. Inside there i have some File.open file, 'w'  and .write operations.
[2012-10-23 15:16:23 -0400] killfill: the problem is that file_touch is getting executed before apache
[2012-10-23 15:16:55 -0400] jperry2: ohai!
[2012-10-23 15:16:57 -0400] killfill: and the expanded list looks right. final_touch is after apache
[2012-10-23 15:17:12 -0400] jperry2: anon using minitest-chef-handler?
[2012-10-23 15:17:19 -0400] jperry2: anyone
[2012-10-23 15:17:35 -0400] jperry2: if yes, are you seeing this "ERROR: Report handler MiniTest::Chef::Handler raised #<LoadError: cannot load such file -- /var/chef/minitest/chef-client/helpers> [0m"
[2012-10-23 15:17:44 -0400] killfill: it seems like chef is 'compiling' the recipes before executing them?.. or something like that
[2012-10-23 15:17:57 -0400] killfill: how do i make my recipe run after apache?
[2012-10-23 15:19:11 -0400] gyre008: interestingit looks like I can't use execute resource  in application cookbook dependent cookbook ? https://gist.github.com/3939374
[2012-10-23 15:19:22 -0400] gyre008: undefined method `run_context' for nil:NilClass
[2012-10-23 15:19:28 -0400] gyre008: what the heck :)
[2012-10-23 15:21:13 -0400] killfill: any tips welcome.. :)
[2012-10-23 15:21:32 -0400] monvillalon: Im getting "Cannot find a resource for ebs_volume on ubuntu version 12.04" when trying to use AWS recipe.  Any pointers?
[2012-10-23 15:22:40 -0400] monvillalon: killfill: i think chef does a two pass, it first does some validation/gathering of info on the resources, then runs them
[2012-10-23 15:23:27 -0400] killfill: monvillalon: yah.. and it sees like the File operations im doing is execigin right ahead in the 'validation' fase or something?
[2012-10-23 15:23:42 -0400] killfill: that would explain why its doing it before the apache recipe.. :P
[2012-10-23 15:23:58 -0400] monvillalon: killfill: how are you specifying your recipe? maybe if you just require_recipe "apache" at the start of your recipe, or add "apache" to your depends metadata chef would choose the right order
[2012-10-23 15:24:43 -0400] monvillalon: killfill: move your code to a block
[2012-10-23 15:24:57 -0400] killfill: monvillalon: to a block?
[2012-10-23 15:25:08 -0400] erthad: hi!
[2012-10-23 15:25:19 -0400] flashingpumpkin: hm, why does the search here not show anything - despite the fact that this specific node is tagged with the role?
[2012-10-23 15:25:19 -0400] flashingpumpkin: https://gist.github.com/fdf97268af4914eae2aa
[2012-10-23 15:25:21 -0400] monvillalon: killfill: http://wiki.opscode.com/display/chef/Resources#Resources-RubyBlock
[2012-10-23 15:25:22 -0400] erthad: where is the bugtracker for opscode's cookbooks?
[2012-10-23 15:25:33 -0400] monvillalon: killfill: let me know if it works, I'm just guessing
[2012-10-23 15:26:17 -0400] monvillalon: erthad: they are on github, you can probably submit one there
[2012-10-23 15:26:54 -0400] erthad: monvillalon: github issues seem to be disabled for https://github.com/opscode-cookbooks/postgresql , only pull requests are there
[2012-10-23 15:27:50 -0400] monvillalon: flashingpumpkin: try roles: and also try with quotes
[2012-10-23 15:28:36 -0400] hoover_damm: erthad, tickets can be filed at tickets.opscode.com
[2012-10-23 15:28:42 -0400] hoover_damm: erthad, github is only for pull requests, not issues
[2012-10-23 15:28:48 -0400] hoover_damm: erthad, and be aware there's many postgres cookbooks
[2012-10-23 15:28:57 -0400] erthad: hoover_damm: thx
[2012-10-23 15:28:57 -0400] hoover_damm: erthad, search around you may find what you want
[2012-10-23 15:29:01 -0400] monvillalon: erthad: you are right, I'm not sure what the right place is, but there is http://community.opscode.com/questions
[2012-10-23 15:29:05 -0400] killfill: monvillalon: worked wonderfully. thanks!
[2012-10-23 15:29:21 -0400] monvillalon: killfill: no problem, momentary brilliance :)
[2012-10-23 15:29:26 -0400] killfill: jaja..
[2012-10-23 15:29:34 -0400] monvillalon: : Im getting "Cannot find a resource for ebs_volume on ubuntu version 12.04" when trying to use AWS recipe.  Any pointers?
[2012-10-23 15:29:39 -0400] hoover_damm: If your in town for the Chef Summit! don't forget to /j #chef-summit
[2012-10-23 15:29:55 -0400] erthad: hoover_damm: there is a single one at forge. I haven't search though in github, I'll take a look at that too, thx.
[2012-10-23 15:30:13 -0400] hoover_damm: erthad, i know I forked it and made a 9.2 cookbook, at&t forked mine and improved it
[2012-10-23 15:30:20 -0400] hoover_damm: erthad, so there should be two choices between att and me
[2012-10-23 15:30:23 -0400] hoover_damm: at least
[2012-10-23 15:31:01 -0400] CharlieSu: Anyone seeing issues with 10.16.0?  I'm seeing files with incorrect permissions when using my current cookbooks
[2012-10-23 15:31:19 -0400] erthad: hoover_damm: it doesn't relate to postgresql's version but to cookbook resetting postgres user's password each time the recipe is applied with chef-solo
[2012-10-23 15:31:23 -0400] flashingpumpkin: monvillalon, nothing
[2012-10-23 15:31:38 -0400] hoover_damm: erthad, ahh... lol well mine would fix that too, so would at&t if they followed my method
[2012-10-23 15:31:42 -0400] hoover_damm: erthad, i set that on initdb
[2012-10-23 15:31:44 -0400] monvillalon: flashingpumpkin: let me do some checks
[2012-10-23 15:32:52 -0400] monvillalon: flashingpumpkin: both roles and role, work for me, its weird, add -m to really see the document
[2012-10-23 15:32:55 -0400] erthad: hoover_damm: where is your repo located? I'd like to take a look
[2012-10-23 15:33:11 -0400] hoover_damm: erthad, https://github.com/damm/postgresql/
[2012-10-23 15:33:18 -0400] erthad: hoover_damm: thx
[2012-10-23 15:33:20 -0400] hoover_damm: erthad, check out the network and you'll find other forks and such
[2012-10-23 15:33:52 -0400] hoover_damm: erthad, i redid how i allow ip's last night as i've been not using the cloud much which made the glaring only allow 10.x failure
[2012-10-23 15:34:02 -0400] flashingpumpkin: monvillalon, not even "name:dev.aggregator01" works. Is it maybe some indexing delay?
[2012-10-23 15:34:05 -0400] hoover_damm: so the documentation is slightly out of date unfortunately, need to fix that
[2012-10-23 15:35:06 -0400] monvillalon: flashingpumpkin: i have no idea check  "knife node show XXXXXX -l" look for roles
[2012-10-23 15:35:45 -0400] hoover_damm: erthad, https://gist.github.com/8a3fe7bbc8b3d5ea6a91 is the role i use
[2012-10-23 15:35:55 -0400] hoover_damm: which should describe what i haven't updated in the readme
[2012-10-23 15:36:21 -0400] flashingpumpkin: monvillalon, yeah, all roles are there
[2012-10-23 15:36:57 -0400] monvillalon: flashingpumpkin: then yes it appears there is a problem with the indexing, you using hosted chef. or self hosted?
[2012-10-23 15:37:06 -0400] flashingpumpkin: monvillalon, self hosted
[2012-10-23 15:37:10 -0400] CharlieSu: When using the Omnibus installer's install.sh script how can i specify to use version 10.14.4-2
[2012-10-23 15:38:27 -0400] monvillalon: flashingpumpkin: Im out of advice :) there is the possibility that indexing is broken.  Ask someone at opscode on how to force a full reindex
[2012-10-23 15:38:38 -0400] erthad: hoover_damm: I see, thx. I was thinking of creating a flag-file on the first run too
[2012-10-23 15:39:27 -0400] killfill: i think https://github.com/opscode/cookbooks/blob/master/apache2/recipes/mod_fcgid.rb#L23  is missing a include_recipe 'yum::epel' just before that line... could that be? or its me using the cookbook wrong?
[2012-10-23 15:40:37 -0400] khani3s: Hi! There are some recipes that uses specific packages versions and i would like to store somehow on my infrastructure. I'm using chef-solo. Some suggestions? FTP server? HTTP server?
[2012-10-23 15:44:57 -0400] gyre008: CharlieSu, curl -L https://www.opscode.com/chef/install.sh ;| bash -s -- -v 10.14.4-2
[2012-10-23 15:45:11 -0400] gyre008: not sure about -2 bitbut works fine for curl -L https://www.opscode.com/chef/install.sh ;| bash -s -- -v 10.14.4
[2012-10-23 15:46:26 -0400] gyre008: khani3s, can you elaborate ?
[2012-10-23 15:46:42 -0400] CharlieSu: gyre008: thanks a ton!
[2012-10-23 15:46:53 -0400] gyre008: no probs
[2012-10-23 15:53:21 -0400] nacer: weird link resource does strange thing to me
[2012-10-23 15:53:42 -0400] nacer: it run the create action at each chef-client run
[2012-10-23 15:53:56 -0400] nacer: and i have a notifies attached to it :(
[2012-10-23 15:54:06 -0400] dimka: I have some node attributes node[:x][:a][:b]. I wanna copy them to node[:y][:a][:b]. How can I do that?
[2012-10-23 15:54:22 -0400] flashingpumpkin: monvillalon, hm, running a full reindex broke the whole search. :/
[2012-10-23 15:54:38 -0400] nacer: dimka: knife node edit ?
[2012-10-23 15:54:43 -0400] dimka: In recipe
[2012-10-23 15:55:33 -0400] nacer:  y  = node[:x]
[2012-10-23 15:55:38 -0400] Zenigor: I am having an issue with bootstrapping redhat 6. My bootstrap file is: https://gist.github.com/3939623. It is not accepting the -y attribute on the yum install during bootstrap. Any ideas?
[2012-10-23 15:55:40 -0400] monvillalon: flashingpumpkin: you have problems with your installation, I know about solr but now about how chef uses it.  How did you do a full reindex?
[2012-10-23 15:55:58 -0400] nacer: change the name of y and use node.set ?
[2012-10-23 15:56:07 -0400] nacer: dimka: i'am guessing :)
[2012-10-23 15:56:27 -0400] flashingpumpkin: monvillalon, knife index rebuild
[2012-10-23 15:56:31 -0400] dimka: Problem is that node[:x][:a][:b] is not a proper hash
[2012-10-23 15:56:37 -0400] dimka: How can I convert it to hash?
[2012-10-23 15:56:57 -0400] khani3s: gyre008: For example, one recipe should install the java version XYZ. I don't like to hit the web every time and I want to store that file somehow in some linux server
[2012-10-23 15:57:08 -0400] dimka: shef said that it's #<Chef::Node::Attribute @current_override=nil, @auto_vivifiy_on_read=false, @automatic={...}, @override={...}, @current_default=....
[2012-10-23 15:57:46 -0400] flashingpumpkin: monvillalon, logs don't indicate any troubles
[2012-10-23 15:59:31 -0400] flashingpumpkin: doh. chef-expander wasn't running. presumably crashed
[2012-10-23 15:59:51 -0400] monvillalon: flashingpumpkin: try restarting chef-solr on your server, and possibly deleting the data folder, not sure where it is, before doing a reindex
[2012-10-23 16:00:10 -0400] flashingpumpkin: monvillalon, see above. works fine after starting it again
[2012-10-23 16:00:44 -0400] monvillalon: flashingpumpkin: awesome :) i was having helpers guilt :)
[2012-10-23 16:01:15 -0400] flashingpumpkin: monvillalon, yah, was just doing tail -f /var/logs/chef/* and noticed that there was nothing happening in the expander log
[2012-10-23 16:01:30 -0400] CharlieSu: gyre008: using 10.14 instead of 10.16 fixed my problems..  there is a bug in 10.16 where cookbook_files aren't being set w/ the correct permissions
[2012-10-23 16:05:49 -0400] kryptek: Hey guys, I created my own resource in a cookbook and want to use that resource in another cookbook.. can I just use the resource in any other cookbook or do I have to include the default recipe in my run list to be able to access the resource?
[2012-10-23 16:24:56 -0400] yfeldblum: kryptek, you can just use the resource
[2012-10-23 16:25:07 -0400] kryptek: chef is smart enough to know where to locate it?
[2012-10-23 16:25:28 -0400] yfeldblum: kryptek, however, the metadata.rb of the cookbook using the resource must declare a dependency on the cookbook in which the resource is defined
[2012-10-23 16:25:38 -0400] kryptek: ahhhh... that makes sense now!
[2012-10-23 16:25:56 -0400] kryptek: You sir, are the man.
[2012-10-23 16:33:11 -0400] belber: CharlieSu I have the same problem!!!!
[2012-10-23 16:38:21 -0400] ekristen: what is up with all these recipes always redoing themselves
[2012-10-23 16:38:39 -0400] ekristen: nginx source always rebuilds
[2012-10-23 16:41:00 -0400] ekristen: how does chef-client run when its a service? if I just do chef-client, all my recipes always run over again, which means nginx gets rebuilt from source each time I run it
[2012-10-23 16:41:17 -0400] rep0st: if i run chef-client locally on my node it runs with no errors. But if i attempt to bootstrap the same node from a workstation it fails with an invalid byte sequence error. Does this mean anything to anybody? i.e where would the error message be happening?
[2012-10-23 16:42:31 -0400] yfeldblum: ekristen, the recipe is designed to compile once; maybe you're running into a bug?
[2012-10-23 16:42:48 -0400] nerdcore: ekristen: I'm pretty new to chef but from my understanding you shouldn't be using chef to build things from source. That's not "idempotent". The preferred way is to use your system's package manager (apt for Debian/Ubuntu, yum for RHEL/CentOS, and probably MacPorts for OSX)
[2012-10-23 16:43:15 -0400] nerdcore: are there really recipes which compiule from source? Seems the non-Chef way to do things to me :)
[2012-10-23 16:43:32 -0400] yfeldblum: nerdcore, it may not be idempotent, but barring building a packaging infrastructure, it may be necessary; the nginx cookbook goes to great lengths to try to build nginx from source idempotently
[2012-10-23 16:43:49 -0400] nerdcore: interesting
[2012-10-23 16:44:04 -0400] ekristen: yfeldblum: hrm
[2012-10-23 16:45:01 -0400] yfeldblum: nerdcore, the problem with nginx is that if you want a different selection of modules than that provided by default, you need to (re-)build nginx yourself
[2012-10-23 16:45:23 -0400] ekristen: yfeldblum: perhaps
[2012-10-23 16:45:27 -0400] nerdcore: yfeldblum: well that's not very "modular" :)
[2012-10-23 16:45:56 -0400] yfeldblum: nerdcore, the "modular" is at build time rather than at run time
[2012-10-23 16:46:13 -0400] yfeldblum: nerdcore, the purpose is to make nginx faster at run time
[2012-10-23 16:46:23 -0400] ekristen: yfeldblum: also if you need passenger ;-)
[2012-10-23 16:46:58 -0400] yfeldblum: ekristen, right, you will need to build nginx yourself if you want the nginx passenger module
[2012-10-23 16:47:13 -0400] ekristen: yfeldblum: right i have all that
[2012-10-23 16:47:33 -0400] ekristen: yfeldblum: by using rvm_passenger cookbook
[2012-10-23 16:48:13 -0400] ekristen: yfeldblum: which includes nginx::source
[2012-10-23 16:48:17 -0400] ekristen: in its recipe
[2012-10-23 16:48:29 -0400] ekristen: but each time I run chef-client locally as root, nginx gets rebuilt from source
[2012-10-23 16:48:40 -0400] masterkorp: http://chartbeat.com/dashboard/?url=theverge.com&k=10d95c713b0605c8ee8468af80a4f50d#
[2012-10-23 16:48:47 -0400] masterkorp: can you guys see this ?
[2012-10-23 16:49:18 -0400] ekristen: yes
[2012-10-23 16:49:59 -0400] ekristen: masterkorp: are we suppose to?
[2012-10-23 16:50:23 -0400] masterkorp: yes
[2012-10-23 16:50:26 -0400] masterkorp: thank you
[2012-10-23 16:50:29 -0400] CharlieSu: belber: just don't use the latest version..
[2012-10-23 16:50:37 -0400] CharlieSu: belber: it obviously went out with a bug
[2012-10-23 16:51:21 -0400] ekristen: how does chef know if it is suppose to run a recipe or not
[2012-10-23 16:51:28 -0400] ekristen: or if it has already done so successfully?
[2012-10-23 16:52:04 -0400] masterkorp: the the article on the wiki: chef run anatomy
[2012-10-23 16:52:47 -0400] _0x783czar: Does anyone know why I might get a "No nodes returned from search!" error when trying to trigger a chef run even if the node's name is listed in knife node list?
[2012-10-23 16:52:56 -0400] ekristen: masterkorp: for some reason nginx source keeps rebuilding nginx each time I run chef-client
[2012-10-23 16:53:01 -0400] ekristen: masterkorp: I'm trying to figure out why
[2012-10-23 16:53:29 -0400] masterkorp: ekristen: i have that same problem with notifications too
[2012-10-23 16:53:45 -0400] masterkorp: some templates restart nagios every time
[2012-10-23 16:54:07 -0400] masterkorp: http://live.theverge.com/apple-ipad-mini-live-blog/
[2012-10-23 16:54:10 -0400] masterkorp: oops
[2012-10-23 16:54:50 -0400] ekristen: really think it will be an iPad mini?
[2012-10-23 16:55:33 -0400] masterkorp: yes, 7" nook comp i bet
[2012-10-23 16:56:19 -0400] cassianoleal: is there a way to install pecl package "gearman" with php_pear?
[2012-10-23 16:56:37 -0400] cassianoleal: right now I found out how to install pear's "Net_Gearman", but that doesn't seem to include the .so module
[2012-10-23 16:58:37 -0400] ekristen: omg, I'm so close to getting my stuff automated and the dependency api is now down?! for ruby gems, f****
[2012-10-23 16:58:38 -0400] masterkorp: cassianoleal: tried the php cookbook ?
[2012-10-23 16:59:04 -0400] ekristen: masterkorp: you run the verge.com?
[2012-10-23 16:59:23 -0400] cassianoleal: masterkorp: what I did was to install the php cookbook and then php_pear "Net_Gearman"
[2012-10-23 16:59:30 -0400] eugenmayer: cassianoleal: user the php coockboot, its all in there
[2012-10-23 16:59:34 -0400] cassianoleal: I also tried "gearman", but that doesn't do anything
[2012-10-23 16:59:37 -0400] eugenmayer: cassianoleal: even how to include the .so files
[2012-10-23 16:59:49 -0400] ekristen: wow not the typical venue for apple events either
[2012-10-23 16:59:50 -0400] ekristen: interesting
[2012-10-23 17:00:00 -0400] ekristen: and they are streaming the event live?! thats new too
[2012-10-23 17:00:00 -0400] cassianoleal: eugenmayer: hmm have I been looking at the wrong place, maybe?
[2012-10-23 17:00:17 -0400] eugenmayer: cassianoleal: we are basically doing extrem-PHP lamp strack deployment
[2012-10-23 17:00:25 -0400] masterkorp: ekristen: yes, i work there
[2012-10-23 17:00:34 -0400] eugenmayer: and the php coolbook is pretty good, there are exceptions, but you nearly can handle anthing
[2012-10-23 17:00:44 -0400] eugenmayer: masterkorp: you work for apple?
[2012-10-23 17:01:04 -0400] jonlives: the rubygems dep api has been down for days.
[2012-10-23 17:01:51 -0400] ekristen: jonlives: makes it tough to do a bundle install for my app
[2012-10-23 17:01:55 -0400] masterkorp: cassianoleal: are you the runing that on chef ?
[2012-10-23 17:02:02 -0400] cassianoleal: eugenmayer: this one (http://community.opscode.com/cookbooks/php), right? I'm using that, and when I did php_pear "mongo" (to test), it did install mongo.so
[2012-10-23 17:02:11 -0400] JasonF: Just verifying: Chef 10.14 has no problem at all with Ruby 1.9.x?
[2012-10-23 17:02:11 -0400] jonlives: ekristen: i feel your pain, believe me
[2012-10-23 17:02:11 -0400] masterkorp: eugenmayer: no, never
[2012-10-23 17:02:13 -0400] cassianoleal: that's in my recipe
[2012-10-23 17:02:32 -0400] masterkorp: cassianoleal: if php on your run_list ?
[2012-10-23 17:02:43 -0400] eugenmayer: masterkorp: i just would have asked you to punch the guys in their faces for completly failing on my retina MBP
[2012-10-23 17:03:02 -0400] eugenmayer: building the BT stack next to WLAN, making 2.4 GHZ WLAN worthless any connections.
[2012-10-23 17:03:30 -0400] cassianoleal: masterkorp: yes, php gets installed just fine. "mongo" installs just fine, but gearman doesn't compile/installs the .so
[2012-10-23 17:03:56 -0400] eugenmayer: cassianoleal: doesnt compile or doesn include the .so in the ini?
[2012-10-23 17:04:01 -0400] masterkorp: cassianoleal: can you paste the chef output, :debug level please
[2012-10-23 17:04:20 -0400] cassianoleal: eugenmayer: It doesn't even create the .ini
[2012-10-23 17:04:27 -0400] cassianoleal: masterkorp: hang on, let me get that
[2012-10-23 17:04:29 -0400] eugenmayer: it does not, by default
[2012-10-23 17:04:30 -0400] ekristen: jonlives: so I have to install everything manually yes?
[2012-10-23 17:04:32 -0400] eugenmayer: but is the .so file there?
[2012-10-23 17:04:39 -0400] jonlives: ekristen: seems so for no
[2012-10-23 17:04:41 -0400] jonlives: *now
[2012-10-23 17:04:44 -0400] cassianoleal: eugenmayer: not in /usr/lib/php5/...
[2012-10-23 17:04:52 -0400] eugenmayer: php_pear "igbinary" do
[2012-10-23 17:04:52 -0400] eugenmayer:   action :install
[2012-10-23 17:04:53 -0400] eugenmayer: end
[2012-10-23 17:05:00 -0400] eugenmayer: for example, thats how you can deal with PEAR
[2012-10-23 17:05:09 -0400] eugenmayer: there are more flags like create the ini directly
[2012-10-23 17:05:36 -0400] eugenmayer: cassianoleal: .deb like system?
[2012-10-23 17:05:53 -0400] cassianoleal: eugenmayer: yes, ubuntu 12.04
[2012-10-23 17:06:05 -0400] eugenmayer: we deal differently with those inis, for some we do
[2012-10-23 17:06:06 -0400] eugenmayer: template "/etc/php5/conf.d/igbinary.ini" do
[2012-10-23 17:06:06 -0400] eugenmayer:   source "igbinary.ini.erb"
[2012-10-23 17:06:06 -0400] eugenmayer:   mode "0644"
[2012-10-23 17:06:06 -0400] eugenmayer: end
[2012-10-23 17:06:24 -0400] eugenmayer: so basically we deploy a special config file, since we need config flags, not just includes
[2012-10-23 17:06:34 -0400] cassianoleal: eugenmayer: yes, I don't have a problem creating/installing the ini file manually, but the .so is not there
[2012-10-23 17:06:35 -0400] eugenmayer: but just "enabling" is very easy using flags
[2012-10-23 17:06:51 -0400] eugenmayer: well then first try to compile it manually on the CLI
[2012-10-23 17:07:02 -0400] eugenmayer: maybe, as its ubuntu, it frankly broken
[2012-10-23 17:07:31 -0400] cassianoleal: eugenmayer: if I do a "pecl install gearman" it works beautifully
[2012-10-23 17:07:33 -0400] eugenmayer: and 12.04 should be in any cases broken, its not even LTS, isnt it? non LTS in ubuntu as serveriam shaking :D
[2012-10-23 17:07:43 -0400] cassianoleal: it is lts
[2012-10-23 17:08:14 -0400] eugenmayer: ok, at least. Then, as someone suggested, look at the debug output why its failing OR setting wrong ENV and putting the .so on the wrong places
[2012-10-23 17:09:37 -0400] cassianoleal: how do I set the log level on vagrant?
[2012-10-23 17:09:46 -0400] cassianoleal: chef's log level, I mean for chef-solo
[2012-10-23 17:12:54 -0400] Zenigor: Is anyone running a redhat infrastructure with chef? I'm having an issue on bootstrap where it isn't accepting the -y param on yum -y install #{list}
[2012-10-23 17:28:03 -0400] _0x783czar: Zenigor: I am, is this in your bootstrap script?
[2012-10-23 17:28:47 -0400] Zenigor: _0x783czar: Yup, this is my bootstrap script: https://gist.github.com/3940212 I am using RHEL 6.1 on rackspace
[2012-10-23 17:29:16 -0400] Zenigor: _0x783czar: it seems to just hang on Is this ok [y/N]
[2012-10-23 17:31:31 -0400] _0x783czar: Zenigor: weird...
[2012-10-23 17:31:47 -0400] _0x783czar: Zenigor: on line 5?
[2012-10-23 17:32:01 -0400] uncommitted: question about the "users" cookbook, having an issue with it
[2012-10-23 17:32:26 -0400] Zenigor: _0x783czar: Yeah, I'm currently converting all my bootstrap scripts and recipes from Ubuntu to RHEL. Does my bootstrap script look okay?
[2012-10-23 17:32:41 -0400] uncommitted: managing a couple of users with a common group, group is "users"
[2012-10-23 17:33:04 -0400] uncommitted: the users don't have their own group, but they should all be part of this "users" group
[2012-10-23 17:33:26 -0400] uncommitted: seems this cookbook requires that the users have their own group and then can be added to the common group?
[2012-10-23 17:33:31 -0400] _0x783czar: Zenigor: so far as I can tell, yes.  just out of curiosity, what command are you using to issue your bootstrap run?
[2012-10-23 17:34:08 -0400] Zenigor: _0x783czar: knife bootstrap XXX.XXX.XXX.XXX -N redhat  -x root -P XXXXXXXX --template-file .chef/bootstrap/ruby193_p125.erb --bootstrap-version 0.10.8 -r "role[base], role[web], role[db], role[redis], role[monit], role[scheduler]" -E rails_env
[2012-10-23 17:35:22 -0400] JasonF: Hey, I'm trying to set my "chef_server_url" in knife.rb using a ruby expression, and when I upgraded local knife/ruby to 10.14.4 + 1.9.3 respectively, I'm getting a RuntimeError: can't modify frozen strong
[2012-10-23 17:35:26 -0400] JasonF: *string
[2012-10-23 17:35:35 -0400] Zenigor: _0x783czar: I feel stupid. I needed a -y on line 3 where yum update.
[2012-10-23 17:35:41 -0400] JasonF: but if I have chef_server_url "lol", it works. (as opposed to chef_server_url some_var)
[2012-10-23 17:36:08 -0400] _0x783czar: Zenigor: in this gist you do have that
[2012-10-23 17:36:43 -0400] Zenigor: _0x783czar:  you're right, i just re-ran the bootstrap with that. I added to bootstrap file, but thought i ran it with that
[2012-10-23 17:36:56 -0400] _0x783czar: Zenigor: ah, yeah that would do it
[2012-10-23 17:37:19 -0400] Zenigor: _0x783czar: thanks for looking at that. Are you running any web apps on your RHEL?
[2012-10-23 17:37:40 -0400] upgrayedd: what do people do when they need to restart as part of a recipe?  set chef to run on boot?
[2012-10-23 17:39:49 -0400] _0x783czar: Zenigor: using it for virtualization, running ubuntu containers for the webapps.
[2012-10-23 17:40:38 -0400] thehar: chef summit irc?
[2012-10-23 17:41:06 -0400] btm: thehar: #chef-summit
[2012-10-23 17:41:27 -0400] _0x783czar: upgrayedd: usually you don't, but there are a few workarounds.  But generally you need to reevaluate the approach you're taking.
[2012-10-23 17:42:11 -0400] _0x783czar: upgrayedd: I've heard of people creating report handlers that reboot the server after the chef-run.
[2012-10-23 17:43:15 -0400] upgrayedd: i don't use chef for windows, but i don't think there are workarounds for some of those cases
[2012-10-23 17:43:52 -0400] upgrayedd: in my case the only thing is a place where disabling selinux at runtime doesn't work for one piece of software (because they check in bad ways i think)
[2012-10-23 17:44:04 -0400] Zenigor: _0x783czar: thanks for the info and for taking a peek at my bootstrap file
[2012-10-23 17:44:07 -0400] upgrayedd: so you have to reboot =/
[2012-10-23 17:44:44 -0400] _0x783czar: Zenigor: no problem
[2012-10-23 17:45:26 -0400] onzyone: hello there, i have and issue installing chef server on a ubuntu 12.10 box ...
[2012-10-23 17:45:38 -0400] onzyone: Unpacking libyajl-ruby (from .../libyajl-ruby_0.8.2-2_amd64.deb) ... dpkg: error processing /var/cache/apt/archives/libyajl-ruby_0.8.2-2_amd64.deb (--unpack):  trying to overwrite '/usr/lib/ruby/vendor_ruby/yajl/deflate.rb', which is also in package ruby-yajl 1.1.0-1 No apport report written because MaxReports is reached already                                                               Errors were encountered while processing:  /var
[2012-10-23 17:45:43 -0400] _0x783czar: upgrayedd: who said anything about Windows?  Not sure exactly what your requirments are, but could you maybe disable selinux in the bootstrap, and then issue a reboot before running recipes?
[2012-10-23 17:46:12 -0400] onzyone: i saw this in the chat log but there didn't seem to be an update to Lump
[2012-10-23 17:47:10 -0400] upgrayedd: i made images where selinux was already disabled, yes
[2012-10-23 17:47:21 -0400] upgrayedd: and chef is pre-installed
[2012-10-23 17:47:22 -0400] upgrayedd: and i clone them
[2012-10-23 17:48:27 -0400] _0x783czar: upgrayedd: ah, not sure I understand what your issue is then
[2012-10-23 17:48:40 -0400] upgrayedd: i was curious if there were smarter ways
[2012-10-23 17:49:29 -0400] _0x783czar: upgrayedd: oh, OK, well I'm not sure if there are.  Granted I'm not expert, but that's generally the approach we've taken.
[2012-10-23 17:50:40 -0400] _0x783czar: s/not expert/not an expert/
[2012-10-23 17:50:55 -0400] upgrayedd: hey you do the sed thing in conversation too!
[2012-10-23 17:50:57 -0400] upgrayedd: heh
[2012-10-23 17:51:12 -0400] geekbri: thats as old as timE!
[2012-10-23 17:51:30 -0400] upgrayedd: cool
[2012-10-23 17:51:52 -0400] _0x783czar: upgrayedd: haha, yeah I do
[2012-10-23 17:55:24 -0400] onzyone: i guess i will try ubuntu 12.04?
[2012-10-23 17:56:34 -0400] gyre008: I would REALLY like to know WHY Opscode Ubuntu packages ship with ruby 1.8 whilst the Omnibus comes with 1.9 ...
[2012-10-23 17:56:37 -0400] gyre008: totally weird
[2012-10-23 18:00:13 -0400] _0x783czar: gyre008: the packages are slightly deprecated, they encourage people to use omnibus.  I think...
[2012-10-23 18:01:09 -0400] Nopik: hi, i have some problem related to definitions. I have cookbook with a definition, used in 2 recipes from this cookbook. basically, definition gets bool param and execute some bash code with ./configure with some custom parameter or not. now, one recipe calls definition with true, the other one calls it with false. however, if i apply both recipes to the same node, i want the definition to actually execute twice, with different params. but, the way it works is tha
[2012-10-23 18:01:09 -0400] Nopik: executes only once, with the parameter from second run
[2012-10-23 18:01:18 -0400] _0x783czar: Does anyonw know why I keep getting "FATAL: No nodes returned from search!" even after I can query the same node?  It only seems to happen on some of my nodes, and only when I try to use knife ssh
[2012-10-23 18:01:58 -0400] _0x783czar: Needless to say, I've checked for typos
[2012-10-23 18:03:17 -0400] gyre008: _0x783czar, I would LOVE to use omnibus but I can'tbecause of this awesome thing: http://tickets.opscode.com/browse/COOK-1406
[2012-10-23 18:03:39 -0400] gyre008: This bug only effects the omnibus version of Chef. For a workaround you can install through apt-get, yum, gem
[2012-10-23 18:03:42 -0400] gyre008: so...yes
[2012-10-23 18:03:50 -0400] gyre008: can't do :)
[2012-10-23 18:04:06 -0400] wcmaier: reminder that #monitoringlove exists (for those bummed about monitoringsucks at Chef Summit)
[2012-10-23 18:05:12 -0400] _0x783czar: gyre008: yeah, I'm aware it has issues, but I think that's why the versions are different...  Try downloading the omnibus script without running it and see what it does to download chef, I think it might actually access a package for a newer version.
[2012-10-23 18:05:35 -0400] _0x783czar: gyre008: I have no idea if that will help, but it might help you find a newer version in package form.
[2012-10-23 18:05:48 -0400] gyre008: nope it doesn't we tried omnibus and it causes the issues exactly the same ones as reported in that bug
[2012-10-23 18:07:23 -0400] _0x783czar: gyre008: I'm not saying to use the omnibus, just see what package it downloads in the script and see if you can just get it directly.  Like I said, I have no idea if that will work, however.  sorry.
[2012-10-23 18:07:53 -0400] gyre008: I'm not blaming you :) Im just saying we tried to work around it so many timesarrgh
[2012-10-23 18:09:29 -0400] _0x783czar: gyre008: yeah, I get how that's frustrating
[2012-10-23 18:25:44 -0400] tobert: is anybody managing cookbooks with repo (as in android repo tool)?
[2012-10-23 18:39:00 -0400] miah: no
[2012-10-23 18:41:36 -0400] werdnativ: wondering about using unicorn on runit: runit expects processes to run in the foreground and manage their pid. If I run unicorn in the foreground, is there a way to have it preload and swap the pid using the unicorn.pid.oldbin trick that unicorn does?
[2012-10-23 18:45:42 -0400] ekristen: where does gem_package install gems to?
[2012-10-23 18:49:40 -0400] werdnativ: ekristen: see `gem env` for installation directory. You can specify gem_binary in the gem_package block to specify which ruby to use for installing. Also, you can set up a /etc/gemrc file or set $GEM_HOME for specifying where to install
[2012-10-23 18:56:52 -0400] enw: Hi.  I'm a relatively new Chef user, using Vagrant+Chef to set up dev environments for a team of engineers working on WordPress-based web sites.  I'm running into dependency conflicts between wordpress (requires 'php') and phpmyadmin (requires 'chef-php').  What's best-practice for resolving this sort of thing in the Chef world?  Roll my own phpmyadmin recipe?
[2012-10-23 18:57:26 -0400] Zenigor: _0x783czar: Just curious, what cookbook are you using for RHEL firewall rules if you are using one?
[2012-10-23 19:02:02 -0400] _0x783czar: Zenigor: we set those up in our bootstrap script, since we have fairly complex ones, and we don't want to risk any change to them
[2012-10-23 19:09:41 -0400] enw: anyone?  Best practice for dealing w/requirement conflicts between community cookbooks?  Should I just roll my own with different dependencies & submit to the community?
[2012-10-23 19:12:29 -0400] ekristen: werdnativ: this is being done by a cookbook recipe, so how would I see the gem env for that environment?
[2012-10-23 19:14:49 -0400] ekristen: hrm gem_package seems to be installing the gem for chef
[2012-10-23 19:22:02 -0400] kjk: how do you "undefine" a resource in a recipe?
[2012-10-23 19:22:04 -0400] ekristen: https://github.com/fnichol/chef-rvm/blob/master/README.md under the gems section, it says node['dvm']['gems'], where do I put this hash at?
[2012-10-23 19:22:57 -0400] _0x783czar: ekristen: without looking, I'd imagine in the attributes files.
[2012-10-23 19:23:09 -0400] ekristen: _0x783czar: can I put it in a role?
[2012-10-23 19:23:23 -0400] ekristen: like override attributes?
[2012-10-23 19:26:08 -0400] _0x783czar: ekristen: I think recipe attributes override role attributes...  but I could be mistaken http://wiki.opscode.com/display/chef/Attributes#Attributes-AttributeTypeandPrecedence
[2012-10-23 19:42:05 -0400] dimka: Why `data_bag_item(name,item)` returns `data_bag_item[name, item, {"id"=>item, usefull_stuff}]`?
[2012-10-23 19:42:19 -0400] dimka: And how can I generally get that usefull stuff?
[2012-10-23 19:44:54 -0400] cassianoleal: anyone with good experience with the php cookbook?
[2012-10-23 19:45:17 -0400] cassianoleal: I would like to know if there's a way to force pecl mode on the php_pear provider
[2012-10-23 19:45:36 -0400] bluepojo: dimka: the databag item can be accessed like a hash
[2012-10-23 19:45:44 -0400] Neubauer: having trouble with a recipe on engineyard, ok to post here?
[2012-10-23 19:45:49 -0400] bluepojo: dbitem['key']
[2012-10-23 19:46:16 -0400] ekristen: what is the purpose of a data bag?
[2012-10-23 19:46:27 -0400] erikh: to hold data in a central place.
[2012-10-23 19:46:36 -0400] erikh: (either for reading or writing to)
[2012-10-23 19:47:06 -0400] werdnativ: ekristen: passwords is one example. there's encrypted data bags for that too.
[2012-10-23 19:47:27 -0400] bluepojo: data bags are generally for things that are not environment specific
[2012-10-23 19:47:31 -0400] kryptek: I'm trying to get chef to install a rubygem from the default recipe of my cookbook, using 'chef_gem do action :nothing end.run_action(:install)', but the 'default' resource I created is complaining that it doesn't have the aws-sdk gem
[2012-10-23 19:47:58 -0400] ekristen: werdnativ: ok, hrm -- any other real world examples and usage, I'm trying to wrap my brain around it and see how I can use it
[2012-10-23 19:48:00 -0400] kryptek: Shouldn't the recipe run first before the resource is compiled?
[2012-10-23 19:49:48 -0400] Neubauer: trouble with chef on engineyard: node.rb:180:in `method_missing': Attribute node is not defined! (ArgumentError)
[2012-10-23 19:49:52 -0400] werdnativ: ekristen: I have data bags for which ssh keys to put into a user's ~/.ssh/authorized_keys, lots of recipes are designed around loading things like that from data bags.
[2012-10-23 19:50:14 -0400] _0x783czar: OK, so I'm having a really strange problem.  It seems that chef-solr can only find some of my nodes.  Or something like that is going on.  If I do a `knife node list` I see all of them.  However, I can only `knife ssh` on some of them.  When I tried `knife search node name:* -a name` only some of my nodes appeared (only the ones on which `knife ssh` works) does anyone have any idea what might be malfunctioning here?  This is OpenSource 
[2012-10-23 19:50:15 -0400] Neubauer: actually it's Attribute default, that was a hack i was tring
[2012-10-23 19:50:29 -0400] ekristen: werdnativ: ok cool
[2012-10-23 19:50:42 -0400] erikh: Neubauer: what recipe? is it private?
[2012-10-23 19:50:53 -0400] Neubauer: datadog, dd-agent
[2012-10-23 19:51:02 -0400] Neubauer: https://github.com/DataDog/chef-datadog
[2012-10-23 19:51:13 -0400] kryptek: _0x783czar, Are you sure all the nodes in the list are up and running?
[2012-10-23 19:51:19 -0400] erikh: ok, some important things to know about EY's chef stack
[2012-10-23 19:51:24 -0400] erikh: it's chef 0.7 (old)
[2012-10-23 19:51:27 -0400] erikh: it's chef-solo
[2012-10-23 19:51:33 -0400] _0x783czar: kryptek: yes, I can ssh manually into all of them.
[2012-10-23 19:51:46 -0400] erikh: most cookbooks you find on github won't work because of those two constraints
[2012-10-23 19:51:51 -0400] erikh: the real solution is to write your own
[2012-10-23 19:52:01 -0400] _0x783czar: kryptek: plus we have a monitoring agent reporting on each of them.
[2012-10-23 19:52:25 -0400] Neubauer: if only i could hack it locally
[2012-10-23 19:52:34 -0400] kryptek: _0x783czar, Not even any error output?
[2012-10-23 19:52:44 -0400] Neubauer: is there a command to run recipes out on EY from command line?
[2012-10-23 19:53:19 -0400] _0x783czar: kryptek: All it says "FATAL: No nodes returned from search!"
[2012-10-23 19:53:26 -0400] _0x783czar: kryptek: I'm checking the logs right now
[2012-10-23 19:53:46 -0400] erikh: Neubauer: install the engineyard gem
[2012-10-23 19:53:57 -0400] erikh: btw, #engineyard is on this network
[2012-10-23 19:54:07 -0400] Neubauer: hey erikh, thanks, i'll wander to the engineyard room :P
[2012-10-23 19:54:29 -0400] kryptek: _0x783czar, Are they EC2 instances?
[2012-10-23 19:54:38 -0400] _0x783czar: kryptek: no, Softlayer
[2012-10-23 19:54:47 -0400] erikh: their chef setup is pretty specific and as a result a lot of people in here aren't going to be familiar with how to use their stuff
[2012-10-23 19:55:35 -0400] Neubauer: yep, just came to the same conclusion, i'll hit up datadog and engineyard directly
[2012-10-23 19:56:15 -0400] kryptek: _0x783czar, I dunno, kinda sounds to me like the attribute `name` you're passing to -a maybe doesn't pull an ipv4 address and that's why you're getting that output
[2012-10-23 19:57:38 -0400] _0x783czar: kryptek: I wondered about that, but `knife node show NODE_NAME` returns the info for the node, including it's correct ipaddress
[2012-10-23 19:58:22 -0400] kryptek: hmm.. do you have them assigned to environments? Can you try: knife search  node "chef_environment:<environment" ?
[2012-10-23 19:59:06 -0400] _0x783czar: kryptek: I do not.  The solr.log file just puts this line everytime I get a failed search http://pastebin.com/83QiFtat
[2012-10-23 19:59:53 -0400] _0x783czar: kryptek: it just can't find anything by that name.  It seems like Solr is just unable to find the node, even though chef-server is aware of it.  I tried restarting solr, but that had no effect.
[2012-10-23 20:00:25 -0400] _0x783czar: kryptek: then again, I wonder if it's somthing messed up with couchdb...
[2012-10-23 20:00:31 -0400] kryptek: weird.. maybe man
[2012-10-23 20:03:08 -0400] _0x783czar: kryptek: nope... no luck
[2012-10-23 20:04:14 -0400] kryptek: :/
[2012-10-23 20:04:22 -0400] kryptek: Not even knife node search "id:*" ?
[2012-10-23 20:06:10 -0400] ekristen: where does this come from? node.run_state['nginx_configure_flags']
[2012-10-23 20:06:11 -0400] _0x783czar: kryptek: hmm, that only returns 1 -- the chef-server node
[2012-10-23 20:08:35 -0400] ekristen: what populates run_state?
[2012-10-23 20:08:41 -0400] ekristen: hash set off of node?
[2012-10-23 20:10:13 -0400] cwj: ekristen: the nginx cookbook does some crazy stuff with an ohai plugin
[2012-10-23 20:10:46 -0400] cwj: and i think ultimately you'll find that the stuff being done in that cookbook using run_state etc doesn't really work
[2012-10-23 20:10:58 -0400] ekristen: cwj: it keeps recompiling itself because the node.run_state['nginx_configure_flags'] doesn't match node.automatic_attrs['nginx']['configure_arguments']
[2012-10-23 20:11:01 -0400] cwj: yeah
[2012-10-23 20:11:09 -0400] cwj: i think there is a ticket about it
[2012-10-23 20:11:31 -0400] ekristen: cwj: I've noticed there are ~27 pull requests fixing all sorts of stuff that opscode hasn't merged yet
[2012-10-23 20:11:36 -0400] ekristen: any suggestions?
[2012-10-23 20:11:44 -0400] jeroenvds: Hi, I'm trying to bootstrap a node with this command: /usr/bin/knife bootstrap node0.chefsetup.thesis9193.wall2.test -x jvandens --sudo
[2012-10-23 20:12:02 -0400] jeroenvds: and I get node0.chefsetup.thesis9193.wall2.test Unmatched '.
[2012-10-23 20:12:18 -0400] jeroenvds: any possibility to add more output to the bootstrap proces?
[2012-10-23 20:12:23 -0400] cwj: ekristen: my solution was to lock on ver 0.99.2 of the nginx cookbook
[2012-10-23 20:12:37 -0400] jeroenvds: That way I could find out what config to look in to
[2012-10-23 20:12:52 -0400] cwj: ekristen: which is prior to all the fancy doesnt-really-work stuff the current version is doing
[2012-10-23 20:13:11 -0400] cwj: and hopefully there are some fixes forthcoming in chef itself for that
[2012-10-23 20:13:23 -0400] ekristen: cwj: yeah -- I have a few other recipes that are dependent on nginx 1.0 or higher ;(
[2012-10-23 20:13:23 -0400] cwj: still looking for the "right" ticket
[2012-10-23 20:13:26 -0400] _0x783czar: jeroenvds: um, try -V at the end
[2012-10-23 20:13:44 -0400] _0x783czar: jeroenvds: not sure if it works on bootstrap but it's the verbose flag for knife
[2012-10-23 20:14:20 -0400] jeroenvds: _0x783czar: Thanks, but I get no extra output
[2012-10-23 20:14:59 -0400] jeroenvds: When I use different bootstrap templates, I get different errors, but the first one is always the one of Unmatched '.
[2012-10-23 20:16:03 -0400] _0x783czar: that node name I take it is mapped in your /etc/hosts file?  Or known to your nameserver?
[2012-10-23 20:18:00 -0400] _0x783czar: in otherwords, you can ssh into that machine using that fqdn: node0.chefsetup.thesis9193.wall2.test
[2012-10-23 20:18:35 -0400] makerbreakr: https://gist.github.com/3941267
[2012-10-23 20:18:36 -0400] jeroenvds: without problems
[2012-10-23 20:18:52 -0400] makerbreakr: how can i figure out where that error is being thrown at?
[2012-10-23 20:19:07 -0400] jeroenvds: I also tried with the IP address, the same problem occurs
[2012-10-23 20:19:39 -0400] jeroenvds: does it matter I use cshell instead of bash?
[2012-10-23 20:20:07 -0400] _0x783czar: jeroenvds: It shouldn't
[2012-10-23 20:20:48 -0400] _0x783czar: jeroenvds: do you use csh on the host you're trying to bootstrap or your computer?
[2012-10-23 20:22:45 -0400] xmltok: how do i insert a line if and only if it doesnt exist, otherwise do a search_file_replace_line?
[2012-10-23 20:22:55 -0400] jeroenvds: both
[2012-10-23 20:24:03 -0400] _0x783czar: jeroenvds: It shouldn't since the bootstrap scripts are wrapped in the `bash -c ""` command
[2012-10-23 20:24:17 -0400] Urocyon: xmltok, you probably want to avoid line edits in chef, but you could do this with a execute, and include a not_if test using see, or something.
[2012-10-23 20:24:39 -0400] xmltok: i found insert_line_if_no_match, it just wasnt in the FileEdit doc that google returned
[2012-10-23 20:28:46 -0400] Urocyon: xmltok: I hadn't realized that got added.  It may only be in very recent versions of chef.
[2012-10-23 20:31:18 -0400] superbaloo: huum, i maybe found a bug in hosted chef
[2012-10-23 20:31:37 -0400] superbaloo: it's pretty easy to lock out of an organization :s
[2012-10-23 20:32:47 -0400] _0x783czar: superbaloo: did you?
[2012-10-23 20:32:55 -0400] makerbreakr: https://gist.github.com/3941267
[2012-10-23 20:33:00 -0400] makerbreakr: I believe i foudn one too
[2012-10-23 20:33:06 -0400] superbaloo: _0x783czar: locked out ? yes :)
[2012-10-23 20:33:43 -0400] _0x783czar: superbaloo: yeah I've noticed how easy that could be
[2012-10-23 20:34:16 -0400] rep0st: anybody know why i get an invalidbytesequence error when i `unset LANG`
[2012-10-23 20:34:21 -0400] rep0st: and try to run chef-client
[2012-10-23 20:47:47 -0400] gchristensen: http://news.cnet.com/8301-1023_3-57538449-93/zynga-employees-reportedly-headed-to-unemploymentville/
[2012-10-23 20:47:50 -0400] gchristensen: oops.
[2012-10-23 20:47:56 -0400] gchristensen: wrong channel
[2012-10-23 20:48:12 -0400] cassianoleal: I'm trying to send a fix for the PHP cookbook for an issue I hit
[2012-10-23 20:48:21 -0400] cassianoleal: I can't find how to resolve the ticket on JIRA, though
[2012-10-23 20:48:40 -0400] gchristensen: cassianoleal: have you done the contributor's agreement?
[2012-10-23 20:48:49 -0400] cassianoleal: I went through the CLA and all that, but don't know how to verify if I've been given the approved status
[2012-10-23 20:49:34 -0400] cassianoleal: gchristensen: does it take long to process, or am I just not seeing the option to resolve the issue?
[2012-10-23 20:49:36 -0400] gchristensen: you'll get an email soon (day or so) confirming it, with the granted JIRA access
[2012-10-23 20:49:41 -0400] gchristensen: someone has to manually do it
[2012-10-23 20:49:49 -0400] cassianoleal: gchristensen: ah, got it
[2012-10-23 20:49:57 -0400] cassianoleal: so I'll wait a bit for that
[2012-10-23 20:49:59 -0400] cassianoleal: thanks for the info
[2012-10-23 20:50:03 -0400] gchristensen: sure thing
[2012-10-23 21:01:19 -0400] kryptek: How can I get my cookbook to install the rubygem I need before my resources tries to require it?
[2012-10-23 21:01:57 -0400] bluepojo: run the install at compile time.
[2012-10-23 21:02:04 -0400] bluepojo: .run_action(:install)
[2012-10-23 21:02:09 -0400] bluepojo: on the end of the block
[2012-10-23 21:02:39 -0400] kryptek: chef_gem 'aws-sdk' do action :nothing end.run_action(:install) ?
[2012-10-23 21:02:56 -0400] bluepojo: https://github.com/opscode-cookbooks/build-essential/blob/master/recipes/default.rb#L37
[2012-10-23 21:02:58 -0400] bluepojo: for example
[2012-10-23 21:03:16 -0400] ekristen: I've installed knife-esx, but the knife command doesn't see it
[2012-10-23 21:08:16 -0400] nevans: is there documentation somewhere (or even just a source code file that I should read) for the variables/methods available to the bootstrap templates?
[2012-10-23 21:10:19 -0400] kryptek: I have the code for installing my gem in my cookbook but the resource still says it can't load the required file
[2012-10-23 21:11:04 -0400] nevans: specifically, I'm using `knife ec2 server create` with a template to set everything up for chef-solo, and I'd really like to set the hostname according to the --node-name given on the command line
[2012-10-23 21:21:35 -0400] makerbreakr: https://gist.github.com/3941267
[2012-10-23 21:21:43 -0400] ekristen: how can I change which version of ruby knife uses?
[2012-10-23 21:21:57 -0400] makerbreakr: am i screwed as far as that error goes?
[2012-10-23 21:25:08 -0400] rep0st: is there anyway to check on the health of the database
[2012-10-23 21:34:19 -0400] sunil__: I am trying to use knife ssh command against a role, but it seems to hang..but it works fine when using it against an individual node..any thoughts?
[2012-10-23 21:34:23 -0400] sunil__: same issue with interactive console.
[2012-10-23 21:37:09 -0400] kryptek: sunil__ : are you using -a <attr> to return the ip address of the box?
[2012-10-23 21:37:43 -0400] kryptek: example, on ec2 it's like: knife ssh "chef_environment:blah" -a ec2.public_hostname
[2012-10-23 21:37:49 -0400] sunil__: yes.
[2012-10-23 21:38:03 -0400] sunil__: i am able to see those ip's listed in interactive session as well..same issue when using hostname
[2012-10-23 21:39:27 -0400] dodizzle: where was mankind before "only_if" & "not_if"
[2012-10-23 21:39:48 -0400] kryptek: !if && if
[2012-10-23 21:40:38 -0400] erikh: commonly known as if/else
[2012-10-23 21:43:11 -0400] sunil__: could it be I have too many nodes in a role?  Its about 30 of them
[2012-10-23 21:46:42 -0400] chip-: sunil__: does knife search node return correctly?
[2012-10-23 21:48:00 -0400] sunil__: I am able to do this knife ssh name:fex-prod "uptime"  -a ec2.public_hostname and get the uptime back
[2012-10-23 21:48:26 -0400] sunil__: and when i connect  tot the role using interactive session, I am able to see all machines show up..but not sure why commands are hanging.
[2012-10-23 21:51:17 -0400] Babar: sue me.
[2012-10-23 21:51:21 -0400] Babar: oops wce.
[2012-10-23 22:12:18 -0400] qhartman: Is there a simple way to have knife return just a subset of an environments' variables when using "knife environment show -Fj"? Specifically I'd like to show just a specific object from the env.
[2012-10-23 22:12:53 -0400] qhartman: I'm thinking I'll need to write a script to act as a wrapper that parses out the chunk I'm after, but if there's something that exists off the shelf, that would be pretty sweet.
[2012-10-23 22:15:18 -0400] yfeldblum: qhartman, easy, just copy knife_environment_show into your own knife plugin file and make the few modifications you want
[2012-10-23 22:16:09 -0400] JasonF: qhartman: I *just* wrote a plugin to do that for nodes!!
[2012-10-23 22:16:17 -0400] _0x783czar: Is there some faster way to get ahold of the Opscode support team other than a ticket?  I have a simple problem caused by creating a duplicate client that has locked me out partially.
[2012-10-23 22:16:29 -0400] JasonF: qhartman: I'll gladly share it with you, probably simple to modify it to do environments
[2012-10-23 22:17:43 -0400] JasonF: qhartman:  https://gist.github.com/e856ab380a19399a1cae
[2012-10-23 22:19:11 -0400] JasonF: qhartman: hopefully you find that helpful.
[2012-10-23 22:30:50 -0400] qhartman: JasonF, That's awesome! ty ty
[2012-10-23 22:31:12 -0400] qhartman: yfeldblum, Also a good suggestion, I'll be looking into that if JasonF's solution doesn't work for some reason.
[2012-10-23 22:32:01 -0400] yfeldblum: qhartman, i'd suggest just start making knife plugins for every common query you want to do in your chef-repo
[2012-10-23 22:33:30 -0400] JasonF: qhartman: Yeah, I'm pretty sure if you change a few names in mine, and have it load the env instead of the node, it might Just Work(tm)
[2012-10-23 22:33:52 -0400] JasonF: qhartman: and I'll get that + the other knife plugin we have here in a real github repo... eventually
[2012-10-23 22:40:53 -0400] rava: is the backup process on the wiki up to date for the chef-server?
[2012-10-23 22:51:07 -0400] rava: just curious if rake task or some gem command now does what the script (https://raw.github.com/jtimberman/knife-scripts/master/chef_server_backup.rb) does
[2012-10-23 23:16:17 -0400] rava: quiet day today
[2012-10-23 23:23:20 -0400] qhartman: OK, another little bit of esoterica. I'd like to setup a knife config for the Apache user on one of my machines so it can query chef, but not make any changes. Is that possible?
[2012-10-23 23:25:03 -0400] yfeldblum: qhartman, of course it's possible, but why would you do that?
[2012-10-23 23:27:23 -0400] sunil__: is there a way to make knife ssh client skip on hosts it can't connect to?
[2012-10-23 23:27:31 -0400] sunil__: it seems like it hangs for a long tie.
[2012-10-23 23:31:43 -0400] qhartman: yfeldblum, I'm doing a bunch of automation tying into rundeck jobs. Rundeck allows values to be set from remote urls that spit out json. I want the webserver to be able to run knife so it can query chef to get current values for various things in the cluster, but as a security precaution I'd like to make it impossible for it to change things.
[2012-10-23 23:33:46 -0400] yfeldblum: qhartman, why not just trigger chef-client runs?
[2012-10-23 23:35:26 -0400] JasonF: qhartman: yeah, what yfeldblum said, where I'm at, we use our open source deployment tool Dreadnot (fork of deployinator) to trigger chef-client runs across our cluster, and that sha1 becomes the point-in-time that is running on all our devices
[2012-10-23 23:37:16 -0400] qhartman: yfeldblum, JasonF, I'm not trying to run chef-client. I'm using the information in chef to do other things. Generate reports, get current environment values to populate forms for changing those values, etc.
[2012-10-23 23:38:08 -0400] JasonF: qhartman: in your environment, is the chef-server the authoritative source of truth, or do you have an intermediary (like a git repo) that populates it?
[2012-10-23 23:38:50 -0400] qhartman: For example, I created a job that connects to Graphite and generates a bunch of graphs and then emails them. However, every day the IP of the graphite host changes, and only chef knows what it is. Rather than make someone look it up, I want that value to be automatically filled in.
[2012-10-23 23:39:13 -0400] yfeldblum: qhartman, you mean you want to write like your own dashboard app or api app that uses chef-server-api as its backend data source?
[2012-10-23 23:39:28 -0400] qhartman: JasonF, We do use git "in front of" chef, but chef is the only one that has current node-level information, and is authoritative.
[2012-10-23 23:39:46 -0400] qhartman: yfeldblum, not anything nearly that involved, at least, not at this point.
[2012-10-23 23:39:55 -0400] JasonF: qhartman: cool. Good answer. Then why not just call the API directly, instead of shelling out to chef runs?
[2012-10-23 23:39:58 -0400] JasonF: s/chef/knif/
[2012-10-23 23:40:01 -0400] JasonF: dammit, knife
[2012-10-23 23:40:19 -0400] qhartman: JasonF, Because I don't know about calling the API directly... :D
[2012-10-23 23:40:41 -0400] qhartman: but would be happy to learn, if it would be cleaner
[2012-10-23 23:40:52 -0400] JasonF: I'd suggest learning. I knew nothing about knife plugins Friday morning, spent Friday learning, then wrote what I gist'd you yesterday
[2012-10-23 23:40:57 -0400] yfeldblum: qhartman, it's just a run-of-the-mill HTTP API with JSON media types plus some extra required signing
[2012-10-23 23:41:36 -0400] Glace: For Xenserver cluster failover.. do the servers need to be exactly the same?
[2012-10-23 23:41:54 -0400] Glace: Like a dell R810 and Dell R820
[2012-10-23 23:42:00 -0400] Glace: with different processors
[2012-10-23 23:42:02 -0400] qhartman: yfeldblum, JasonF: Any pointers to jumping-off docs?
[2012-10-23 23:42:07 -0400] werdnativ: do environments work with chef-solo now or is that still a client/server feature only?
[2012-10-23 23:42:10 -0400] Glace: oops wrong channel
[2012-10-23 23:42:27 -0400] JasonF: qhartman: /usr/lib/ruby/vendor_chef/* is where I went to learn about how to write knife plugins, as well as looking at one that had already been written
[2012-10-23 23:42:34 -0400] JasonF: qhartman: so I'm not sure exactly what I'd tell you :)
[2012-10-23 23:42:48 -0400] qhartman: JasonF - That's a good a starting point as any
[2012-10-23 23:43:56 -0400] yfeldblum: qhartman, you can check out the gem "spice", which is a client library in ruby
[2012-10-23 23:44:28 -0400] werdnativ: I've been using roles to simulate environments, so just wondering if that feature works in solo now. There used to be a comment in the docs that it doesn't work but I can't find it now.
[2012-10-23 23:44:30 -0400] yfeldblum: qhartman, or the chef gem itself, which is mostly a client library but with some bits that the chef-server-api uses directly and is not usable from the client
[2012-10-23 23:44:42 -0400] yfeldblum: qhartman, but shelling out to knife sounds slow
[2012-10-23 23:44:51 -0400] qhartman: yfeldblum, JasonF , Thanks for the pointers, I will check that stuff out.
[2012-10-23 23:45:14 -0400] qhartman: yfeldblum, It's a bit slow, but a helluva lot faster than looking stuff up manually.
[2012-10-23 23:45:54 -0400] qhartman: yfeldblum, JasonF , though, let's say I do change this stuff up to do direct API calls. I'll still need to figure out the authentication question.
[2012-10-23 23:46:16 -0400] flaccid: hmm i restart iptables, systemctl restart iptables.service and check iptables -L and i do not see the rules
[2012-10-23 23:46:18 -0400] JasonF: qhartman: it's just a non-admin client, like any other client on your chef server
[2012-10-23 23:46:21 -0400] JasonF: qhartman: iirc
[2012-10-23 23:46:43 -0400] yfeldblum: qhartman, the gem "spice" implements that
[2012-10-23 23:49:54 -0400] bhenerey: is there a 'best' node.js cookbook?
[2012-10-23 23:50:02 -0400] yfeldblum: qhartman, spice is designed to be used directly by a ruby app though, so you might think about building a really simple ruby app in sinatra and use spice to fetch data from chef-server-api
[2012-10-23 23:50:21 -0400] yfeldblum: bhenerey, no; there are only those which serve your needs better, and those which serve your needs worse
[2012-10-23 23:50:37 -0400] yfeldblum: bhenerey, coincidentally, that answer applies to many such questions
[2012-10-23 23:50:42 -0400] bhenerey: how about one that isn't shit?
[2012-10-23 23:51:56 -0400] JasonF: bhenerey: one mans shit is another mans "hey, it's not that bad"
[2012-10-23 23:53:00 -0400] yfeldblum: bhenerey, are you looking for a simple cookbook with a single two-line recipe containing `package "nodejs" ; package "npm"`?
[2012-10-23 23:53:29 -0400] JasonF: if so, write it ^

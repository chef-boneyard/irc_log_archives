[2012-10-05 00:00:43 -0400] Chris1: When searching nodes, is it possible to add some logic, for example, a value is greater then or equal to a value? percent_used of a disk is greater then 65% for example.
[2012-10-05 00:01:22 -0400] segv: that was it
[2012-10-05 00:01:22 -0400] segv: sob
[2012-10-05 00:04:06 -0400] fujin: segv: ^_^
[2012-10-05 00:08:16 -0400] timsmith: anyone know if you can use the action of add and update in the yum recipe
[2012-10-05 00:08:25 -0400] timsmith: I'd like to add a repo if it doesn't exist and update it if it does
[2012-10-05 00:29:44 -0400] miah: can somebody help me with what is likely a noob test-kitchen mistake? =) https://gist.github.com/3837299 , https://github.com/miah/chef-collectd/blob/test_kitchen/test/kitchen/Kitchenfile
[2012-10-05 00:36:12 -0400] flaccid: timsmith: afaik it should already do that with the lwrp
[2012-10-05 00:36:35 -0400] ekristen: I don't think anyone has ever used mongodb cookbook to deploy a replica set, I can't see how it has ever worked in its current setup
[2012-10-05 00:41:35 -0400] abetterlie: so
[2012-10-05 00:42:15 -0400] abetterlie: ekristen: everyone who uses mongo orchestrates manually?
[2012-10-05 00:43:16 -0400] ekristen: abetterlie: those who I've talked to  I can't see how the replicaset recipe works  well I take that back it works for a two node replica set, but beyond that it does not work
[2012-10-05 00:45:30 -0400] abetterlie: ekristen: that was my observation as well. There was a conversation about this yesterday that https://github.com/needle-cookbooks/chef-mongodb might work, but I haven't had a chance to diff/test
[2012-10-05 00:46:12 -0400] ekristen: abetterlie: I've looked at that one -- their recipe isn't really any different on the replica set -- I'm trying to fix it right now, it pretty much has to be rewritten
[2012-10-05 00:46:47 -0400] ekristen: abetterlie: the recipe makes some bad assumptions
[2012-10-05 00:47:10 -0400] abetterlie: ekristen: hilarous. I'm working on the same thing.
[2012-10-05 00:47:23 -0400] ekristen: abetterlie: its pretty much a rewrite
[2012-10-05 00:47:40 -0400] ekristen: once I get a stopping point I'll share what I have
[2012-10-05 00:48:19 -0400] ekristen: the recipe doesn't even try to connect to the replicaset
[2012-10-05 00:48:34 -0400] ekristen: the only reason why adding the second node works is because at that point there is no replica set!
[2012-10-05 00:48:50 -0400] ekristen: so it initiates the replica set on the second node, including the first node as a secondary
[2012-10-05 00:49:07 -0400] ekristen: once you try and do a third, it tries to initialize instead of reconfigure
[2012-10-05 00:49:24 -0400] abetterlie: bah. Automated screwing things up. awesome.
[2012-10-05 00:50:46 -0400] ekristen: nah, just bad assumptions, I need this working like tomorrow so I should have something soon
[2012-10-05 00:51:01 -0400] ekristen: when I have something to test I'll hook you up ;-)
[2012-10-05 00:51:26 -0400] ekristen: if you want
[2012-10-05 00:52:18 -0400] fujin: that replicaset recipe is fucked
[2012-10-05 00:52:21 -0400] abetterlie: ekristen: definitely would be used to
[2012-10-05 00:52:32 -0400] ekristen: fujin: yeah I know
[2012-10-05 00:52:33 -0400] abetterlie: ekristen: *definitely would be useful
[2012-10-05 00:52:34 -0400] fujin: last time i looked it was like 1/5 the codebase of chef
[2012-10-05 00:52:50 -0400] ekristen: ?
[2012-10-05 00:52:53 -0400] fujin: i actually have it deployed. and sometimes it works
[2012-10-05 00:52:55 -0400] fujin: (at a few clients..)
[2012-10-05 00:53:04 -0400] fujin: but, most of the time it doesn't a
[2012-10-05 00:53:05 -0400] ekristen: fujin: its max is 2
[2012-10-05 00:53:08 -0400] fujin: and you have to manually repair stuff
[2012-10-05 00:53:20 -0400] fujin: ekristen: right, which doesn't really help.. most deployments
[2012-10-05 00:53:34 -0400] fujin: (you need an arbiter, or 3+, or whatever the fuck.)
[2012-10-05 00:53:36 -0400] fujin: anyway I'm out
[2012-10-05 00:53:38 -0400] fujin: ttyl
[2012-10-05 00:53:47 -0400] abetterlie: peace.
[2012-10-05 01:00:13 -0400] ekristen: abetterlie: any idea on how to notify other nodes that they need to reconfigure?
[2012-10-05 01:01:56 -0400] abetterlie: I had some hackery in place that I tried and I'm looking at it now, give me a sec
[2012-10-05 01:07:05 -0400] abetterlie: ekristen: my solution was worse than the standard recipie involving setting things up statically, so it's no better than doing it manually. I didn't address the reconfigure problem.
[2012-10-05 01:07:30 -0400] ekristen: k
[2012-10-05 01:09:57 -0400] ekristen: abetterlie: yeah so basically I'm taking the approach that if there is more than one node returned from the chef search then check to see if it is a replica set, if it is find out which is the primary and connect to it do to replicareconfigure
[2012-10-05 01:12:22 -0400] abetterlie: are you using curl and hitting the web interface or connecting to the node?
[2012-10-05 01:19:04 -0400] ekristen: using mongo ruby driver to connect to the node
[2012-10-05 01:23:57 -0400] abetterlie: Yeah, I was modifying that edelight cookbook
[2012-10-05 01:24:03 -0400] abetterlie: I gotta jet for a bit, back later
[2012-10-05 01:25:00 -0400] ekristen: ok
[2012-10-05 03:24:20 -0400] j-v-e: I can't seem to find the proper syntax to do a Chef::Search inside a library
[2012-10-05 03:24:43 -0400] j-v-e: search() is out of scope, and Chef::Search doesn't exist. anyone knows what the proper call is ?
[2012-10-05 03:27:37 -0400] j-v-e: Chef::Search::Query.new.search() ?
[2012-10-05 04:02:55 -0400] j-v-e: Chef::Search::Query.new.search().first is the answer
[2012-10-05 04:03:00 -0400] j-v-e: the first is important :)
[2012-10-05 04:49:57 -0400] siezer: @holoway please demonstrate how responsive to questions you are
[2012-10-05 04:50:34 -0400] siezer: @holoway how can make a good dinner for my girlfriend? I don't know much about cooking.... =(
[2012-10-05 05:26:51 -0400] cwj: heheh
[2012-10-05 05:29:32 -0400] coderanger: strawpoll, is it "runlist" or "run list"?
[2012-10-05 05:29:38 -0400] coderanger: or "run-list"?
[2012-10-05 05:31:41 -0400] cwj: run list
[2012-10-05 05:32:02 -0400] coderanger: it seems like that is what we usually use, but there is some inconsistency >_<
[2012-10-05 05:32:18 -0400] coderanger: "-o RunlistItem,RunlistItem...," in the chef-client help output
[2012-10-05 05:32:27 -0400] coderanger: instead of RunListItem
[2012-10-05 05:32:45 -0400] coderanger: This bother my inner pedant :)
[2012-10-05 05:32:56 -0400] cwj: indeed
[2012-10-05 05:33:00 -0400] siezer: what other output formats are there other than -Fdoc
[2012-10-05 05:33:01 -0400] siezer: ?
[2012-10-05 05:33:13 -0400] cwj: siezer: -Fj for json
[2012-10-05 05:33:29 -0400] cwj: -Fy is yaml?
[2012-10-05 05:33:37 -0400] coderanger: https://github.com/opscode/chef/tree/master/chef/lib/chef/formatters
[2012-10-05 05:34:00 -0400] coderanger: doc and minimal are the two chef-client ones
[2012-10-05 05:34:09 -0400] coderanger: (and of course you can write more as plugins)
[2012-10-05 05:34:29 -0400] coderanger: knife output formats is a different thing
[2012-10-05 05:34:41 -0400] cwj: ah
[2012-10-05 05:35:32 -0400] siezer: and any other options that -lfatal?
[2012-10-05 05:40:55 -0400] coderanger: siezer: any log level will work
[2012-10-05 05:41:01 -0400] coderanger: fatal, error, warn, info, debug
[2012-10-05 06:29:44 -0400] rman: hi everyone, trying to do my first install with chef, simple nginx::source on a debian vagrant box, but getting undefined method "default_action" in the yum cookbook. Further details in this gist, https://gist.github.com/3838402, any help appreciated to point me in right direction of fixing
[2012-10-05 06:35:22 -0400] zts: rman: default_action was added in 0.10.10, so you'll just need to upgrade your chef gem
[2012-10-05 06:37:38 -0400] rman: zts: gem list is showing me its version 10.14.4
[2012-10-05 06:40:24 -0400] zts: rman: hm, the log you gisted shows 0.10.8
[2012-10-05 06:40:59 -0400] zts: rman: you mentioned you're using knife-solo - note that you need to update the chef gem on the server (where chef-solo is run), not your workstation
[2012-10-05 06:41:21 -0400] zts: though I've not personally used knife-solo, so sorry if that advice is a bit vague
[2012-10-05 06:42:47 -0400] rman: zts: yeah, its same version on both the server and the workstation
[2012-10-05 06:43:32 -0400] rman: hmm, wonder if this is the debian having an older chef gem installed with prepare thats getting picked up by default, I feel like Ive had that problem in another project before
[2012-10-05 06:44:45 -0400] zts: rman: what does "/usr/local/bin/chef-solo -v" return (on the server)
[2012-10-05 06:46:46 -0400] rman: zts: -bash: /usr/local/bin/chef-solo: /usr/bin/ruby1.8: bad interpreter: No such file or directory
[2012-10-05 06:46:54 -0400] rman: think I'm onto something
[2012-10-05 06:47:51 -0400] zts: Sounds like :)  Anyway, I'm not sure what else to suggest, but I'm confident that your yum cookbook problem will go away if you can fix that.
[2012-10-05 06:48:06 -0400] zts: Since you're on debian, you could work around it by changing nginx's metadata.rb so it doesn't depend on the yum cookbook in the first place
[2012-10-05 06:48:23 -0400] zts: but that's just treating a symptom
[2012-10-05 06:48:26 -0400] rman: right
[2012-10-05 06:48:57 -0400] rman: I think this is another pain due to the gem packaging system vs debian packaging system causing problems
[2012-10-05 06:49:34 -0400] rman: but I appreciate the pointing in the right direction, probably going to wide out all the ruby there, manaully do an rvm install and I bet everything will fall into place
[2012-10-05 06:50:19 -0400] zts: rman: I'm doing a bit of stuff on debian at the moment, but we're installing chef from packages
[2012-10-05 06:50:19 -0400] rman: yep, after installing ruby1.8 deb package it returns version 0.10.8 of chef, thats the answer
[2012-10-05 06:51:18 -0400] zts: Anyway, good luck :)
[2012-10-05 06:56:40 -0400] rman: zts: got it, for the backlog record I had to  call "gem1.8 uninstall chef; gem1.9.1 install chef", I guess something with it not overwriting the binaries already installed *shrugs*, either way working now
[2012-10-05 06:58:51 -0400] zts: ace!
[2012-10-05 07:20:51 -0400] williamherry: when I use include_recipe "logrotate" in recipe, do I need depends "logrotate" in metadata.rb file?
[2012-10-05 07:31:26 -0400] zts: williamherry: short answer is "yes"
[2012-10-05 07:32:32 -0400] zts: williamherry: sometimes it will work anyway (if you already have logrotate in your run_list), but your cookbook should "depends" it in metadata.rb if you include_recipe
[2012-10-05 07:33:12 -0400] williamherry: zts: thanks, apache's logrotate recipe use include_recipe "logrotate" but don't not depends in metadata.rb file, how it works?
[2012-10-05 07:35:02 -0400] zts: williamherry: first question, does it work?
[2012-10-05 07:35:32 -0400] williamherry: zts: no
[2012-10-05 07:36:25 -0400] zts: williamherry: there is your answer.  It would work if you already had the logrotate cookbook loaded in your chef run - for example, another cookbook "depends" on it in metadata.rb
[2012-10-05 07:36:45 -0400] zts: williamherry: or you have a role which has "recipe[logrotate]" in the run_list
[2012-10-05 07:36:58 -0400] williamherry: is it possible to use if in metadata.rb file, like if use logrotate recipe, then depends 'logrotate'
[2012-10-05 07:37:07 -0400] williamherry: zts: ok, got it,
[2012-10-05 07:37:29 -0400] zts: williamherry: if you put it in depends, chef will make sure you have the cookbook on the node, and then it will work
[2012-10-05 07:37:59 -0400] williamherry: zts: ok, thanks
[2012-10-05 10:45:15 -0400] DocWilco: I hope this is a "don't ask to ask, just ask" kind of channel :)
[2012-10-05 10:45:35 -0400] DocWilco: I knife bootstrap a node, but it ends up not having gem installed
[2012-10-05 10:48:11 -0400] DocWilco: I _think_ bootstrap is supposed to install a recent version of gem, but it doesn't
[2012-10-05 10:48:39 -0400] DocWilco: am I wrong? if not, any ideas on how to fix it?
[2012-10-05 11:01:30 -0400] bobw: DocWilco: the omnibus installer probaly doesnt put it in the path anymore
[2012-10-05 11:02:47 -0400] DocWilco: so what's the "right" way of telling chef-client to use it?
[2012-10-05 11:18:21 -0400] ranjibd: DocWilco, are you using the default chef-full template
[2012-10-05 11:18:48 -0400] DocWilco: I tried both that and ubuntu10.04-gems
[2012-10-05 11:19:55 -0400] ranjibd:  default chef-full used omnibus and it should install the gems in /opt/chef/embedded/bin/gem env path
[2012-10-05 11:26:30 -0400] Nickesh: ranjibd: hey can i use WPAD wth chef
[2012-10-05 11:27:11 -0400] tetsu: join #chef-hacking
[2012-10-05 11:35:39 -0400] tetsu: help
[2012-10-05 11:42:56 -0400] ranjibd: Nickesh, WPAD ?
[2012-10-05 11:44:08 -0400] ranjibd: Nickesh, i dont think so... we generally specify the server url via config , solo does not need a server ,,
[2012-10-05 11:44:24 -0400] zts: DocWilco: if you want to install a gem to be used by chef, it's best to use the chef_gem resource
[2012-10-05 11:44:56 -0400] zts: DocWilco: that will do two things: 1) make sure it installs using the ruby that chef-client uses, and, 2) installs it early in the run, so that it's available for use in your recipes
[2012-10-05 11:51:04 -0400] DocWilco: yeah, I'm finding some internal cookbooks have a hard reference to /usr/bin/gem
[2012-10-05 12:38:58 -0400] wfelipe: i have 3 cookbooks, one contain yum_repository, the second containing a package resource (from the first cookbook repo), and the third one that uses include_recipe to include repo, then package recipe, but it doesn't seem to work
[2012-10-05 12:40:12 -0400] wfelipe: following an order, it should place the repo config at /etc/yum.repos.d first, then try to install package
[2012-10-05 12:40:46 -0400] wfelipe: but i don't see trying to write repo config, but if i comment out the package cookbook, i can see the repo config after a chef-client run
[2012-10-05 13:20:55 -0400] _dumfrie-: wfelipe can you run the chef client in debug put and paste the output?
[2012-10-05 13:21:44 -0400] wfelipe: _dumfrie-, i just found out the reason, i was calling run_action(:install), so chef was trying to install at the syntax check phase :/
[2012-10-05 13:22:05 -0400] _dumfrie-: well that would do it. happy you figured it out.
[2012-10-05 13:23:02 -0400] wfelipe: thanks anyway
[2012-10-05 13:23:48 -0400] _dumfrie-: no worries.
[2012-10-05 14:13:19 -0400] fish_: re
[2012-10-05 14:13:42 -0400] fish_: starting chef-solr warns me that I should set a higher maxFieldLimit
[2012-10-05 14:13:55 -0400] fish_: but no idea what a sane value for that would be
[2012-10-05 14:21:42 -0400] newb: Hey.
[2012-10-05 14:21:51 -0400] newb: Is it possible to access metadata within a recipe?
[2012-10-05 14:22:04 -0400] newb: e.g. the cookbook's version number.
[2012-10-05 14:42:17 -0400] newb: Is it possible to access metadata within a recipe? e.g. the cookbook's version number.
[2012-10-05 14:43:30 -0400] _dumfrie-: newb why do you want to access the cookbook version number?
[2012-10-05 14:44:11 -0400] newb: To create a directory based on the cookbook version.
[2012-10-05 14:44:32 -0400] _dumfrie-: Perhaps you can explain what you are trying to accomplish?
[2012-10-05 14:47:12 -0400] newb: I want to deploy different versions of source files on a machine and have them be recognized by version number..
[2012-10-05 14:48:30 -0400] _dumfrie-: You can easily accomplish that using template or file resources.
[2012-10-05 16:35:45 -0400] DWRob: question - when developing cookboks on my workstation, how do I get knife to create cookbooks in my local repo ~/chef-repo instead of /var/chef ?
[2012-10-05 16:36:38 -0400] c_t: set cookbook_path in knife.rb
[2012-10-05 16:36:48 -0400] c_t: or use -o with knife
[2012-10-05 16:37:00 -0400] DWRob: thx, let me try that
[2012-10-05 16:38:20 -0400] DWRob: that worked, thanks
[2012-10-05 16:39:10 -0400] gchristensen: is there a way to specify a template from a different cookbook?
[2012-10-05 16:44:07 -0400] gchristensen: specifically, I want to use the web_app resource from https://github.com/opscode-cookbooks/apache2 I get errors about the template not existing: https://gist.github.com/3840881 even though the docs for that resource suggest it'll fall back to its own: cookbook - Optional. Cookbook where the source template is. If this is not defined, Chef will use the named template in the cookbook where the
[2012-10-05 16:44:09 -0400] gchristensen: definition is used.
[2012-10-05 16:58:40 -0400] benner: i have strange problem: come of chef-clients (mostly on same mashines) goes down. no any errors on log, no OOM kils on dmesg and so on. chef-client is just not running. anyone had somthing like that?
[2012-10-05 17:07:30 -0400] chip-: benner: I had a similar issue, mostly with RHEL5/Centos5 clients. Eventually the fix was to start using the omnibus installer instead of installing chef-client from gems and using system ruby.
[2012-10-05 17:32:59 -0400] jtimberman: gchristensen: the web_app definition will use the template for the vhost from the cookbook where the definition is used by default, but you can pass it a cookbook parameter with the cookbook where the template you want to use is
[2012-10-05 17:34:42 -0400] c_t: 33 days until I can (hopefully) relax a bit
[2012-10-05 17:44:27 -0400] James_Wells: Greetings,  Quick question, I have  a couple hundred machines and need to change their Chef environment on their next run...  Is there a way to do this via a recipe please?
[2012-10-05 18:08:27 -0400] haidangwa: does anybody know how I can use a node's role in a recipe? For example, I have a configuration file that needs to changed based on the node's assigned role (not its run list, which I do know how to get). Is it as simple as node[:role]?
[2012-10-05 18:10:38 -0400] cwj: haidangwa: a node can have more than one role, try using node.role?('foo')
[2012-10-05 18:10:47 -0400] jwitrick: James_Wells: not sure what the best way to do this is, but I have used this knife command: knife exec -E 'nodes.transform("name:*") {|n| n.chef_environment("cloud")}'
[2012-10-05 18:10:51 -0400] mattray: haidangwa: node.roles
[2012-10-05 18:13:14 -0400] James_Wells: jwitrick, Thanx, will give that a try.
[2012-10-05 18:22:35 -0400] JohnHirbour: hey chef n00b here: I'm trying to install mysql on a clean chef client
[2012-10-05 18:22:47 -0400] JohnHirbour: normally I'd type apt-get install mysql-server and it would handle all the dependecies...
[2012-10-05 18:23:04 -0400] JohnHirbour: is that not the case with chef? IE: do I have to load build-essentials, openssl etc first and then mysql?
[2012-10-05 18:23:29 -0400] cwj: JohnHirbour: chef cookbooks ship with metadata that describe the other cookbooks they depend on
[2012-10-05 18:23:46 -0400] cwj: so a well written cookbook will include that information
[2012-10-05 18:24:03 -0400] JohnHirbour: but chef won't auto install those  it'll just yell at me to download/install them right?
[2012-10-05 18:24:44 -0400] cwj: yeah thats true, and a lot of people are addressing that part using a tool like berkshelf or librarian
[2012-10-05 18:25:17 -0400] cwj: they are both similar to ruby bundler if you are familiar with that concept
[2012-10-05 18:25:25 -0400] JohnHirbour: yea
[2012-10-05 18:26:00 -0400] cheeseplus: JohnHirbour: just to be clear chef can/will use packages (effectively dpkg -i for debian)
[2012-10-05 18:28:17 -0400] JohnHirbour: hmmm I used this cookbook for mysql: http://community.opscode.com/cookbooks/mysql
[2012-10-05 18:28:23 -0400] JohnHirbour: it apparently doens't do the needful
[2012-10-05 18:28:54 -0400] cwj: how did you add it to the node's run list?
[2012-10-05 18:29:40 -0400] JohnHirbour: knife node run_list add NODENAME 'recipe[mysql]'
[2012-10-05 18:29:44 -0400] cwj: the default recipe just installs the mysql client, so if you want a server you would need recipe[mysql::server] in the run list
[2012-10-05 18:30:44 -0400] cwj: chef cookbooks are opinionated, so its always a good idea to look through the recipes before you run them
[2012-10-05 18:31:06 -0400] JohnHirbour: yea I was trying to rush this install.. I need to slow down.
[2012-10-05 18:32:53 -0400] JasonF: cwj: opinionated is a great word to describe that.
[2012-10-05 18:32:56 -0400] JohnHirbour: are there any books on amazon I could pick up? I see plenty of puppet.. but not a lot on chef...
[2012-10-05 18:33:38 -0400] cwj: havent seen a comprehensive chef book but i hear there is one slated for next year
[2012-10-05 18:34:05 -0400] Pushnell: JohnHirbour: nope.  I wanted some myself a month ago  my best advice is to use vagrant and just start writing recipes.  things will become apparent fairly quickly.
[2012-10-05 18:34:17 -0400] cheeseplus: +1 to that approach
[2012-10-05 18:34:46 -0400] cwj: + a billion
[2012-10-05 18:34:50 -0400] jtimberman: cwj: Chef runs as root.
[2012-10-05 18:34:55 -0400] jtimberman: you downloaded code from the internet.
[2012-10-05 18:35:01 -0400] jtimberman: And you want to run it as root on your servers.
[2012-10-05 18:35:03 -0400] cwj: jtimberman: bwa?
[2012-10-05 18:35:12 -0400] jtimberman: So like, read the code :)
[2012-10-05 18:35:20 -0400] cwj: ikr
[2012-10-05 18:35:52 -0400] JohnHirbour: our CTO decided we need this server installed in 2 days using chef thanks never used it before... :-(
[2012-10-05 18:36:32 -0400] Pushnell: JohnHirbour: do it in vagrant first.  it's a much better environment for troubleshooting.
[2012-10-05 18:38:00 -0400] jtimberman: JohnHirbour: There isn't a "Chef Book" (yet - I'm aware of one being written). We (Opscode) make a version of our training materials available for free (http://opscode.com/open-training) and of course the Chef wiki is the current source of the documentation.
[2012-10-05 18:38:14 -0400] Pushnell: JohnHirbour: you'll find this handy if you do decide to use vagrant: https://gist.github.com/3841590
[2012-10-05 18:39:20 -0400] jtimberman: JohnHirbour: Vagrant is a tool for working with virtual machines (currently using Virtualbox). It's top notch and has Chef integration built in.
[2012-10-05 18:40:28 -0400] Pushnell: so  I am trying to do a svn checkout and then run some local templates that came with the checkout.  if I watch the chef run, it does appear to fully complete the svn checkout before attempting to run the templates, but the templates can't find the .erb file.  a subsequent run works correctly.  any suggestions?
[2012-10-05 18:40:29 -0400] JohnHirbour: jtimberman: http://opscode.com/open-training  seems like a dead
[2012-10-05 18:45:15 -0400] Pushnell: essentially, if I run chef twice, everything is gravy.  but the first checkout -> run templates fails.  If I only run chef once, I can manually verify that the files have been correctly checked out, but ::File.exists? during the run says false.
[2012-10-05 18:50:08 -0400] bencaron: what's the most "chef-way" way to copy files?
[2012-10-05 18:50:21 -0400] bencaron: remote_file does not seems to like "file:///path/to/file"
[2012-10-05 18:50:26 -0400] bencaron: forking cp?
[2012-10-05 18:50:39 -0400] bencaron: or using File.?
[2012-10-05 18:50:53 -0400] Pushnell: bencaron: are you copying files from your cookbook into the host?  (deploying?)
[2012-10-05 18:51:01 -0400] bencaron: no
[2012-10-05 18:51:12 -0400] bencaron: i need to copy a jar from a path to somewhere
[2012-10-05 18:51:22 -0400] bencaron: I have a  funny installer
[2012-10-05 18:51:34 -0400] Pushnell: I would do an execute with a not_if ::File.exists?
[2012-10-05 18:51:35 -0400] bencaron: in fact, no installer, only install instructions
[2012-10-05 18:51:43 -0400] bencaron: with a cp?
[2012-10-05 18:52:36 -0400] Pushnell: bencaron: aye
[2012-10-05 18:53:04 -0400] bencaron: There's FileUtils.copy in stdlib
[2012-10-05 18:53:12 -0400] bencaron: this would be more portable?
[2012-10-05 18:53:22 -0400] bencaron: In that case, I only have a suse host
[2012-10-05 18:53:35 -0400] bencaron: but I have some windows around
[2012-10-05 18:54:13 -0400] Pushnell: bencaron: you could use ruby's file copy, but it's more chef-like to use resources, ala http://pastebin.com/tXQZkkvP
[2012-10-05 18:54:31 -0400] Pushnell: that's using chef's idempotent features
[2012-10-05 18:54:38 -0400] Pushnell: otherwise, chef has no idea what your custom ruby code is doing
[2012-10-05 18:54:39 -0400] bencaron: yep, make sense
[2012-10-05 18:54:50 -0400] bencaron: perhaps in a ruby_block
[2012-10-05 18:54:57 -0400] bencaron: execute make more sense
[2012-10-05 18:55:12 -0400] bencaron: but it sounds funny to fire shell for things like that
[2012-10-05 18:55:21 -0400] bencaron: ok, cp it is!
[2012-10-05 18:55:26 -0400] bencaron: thanks Pushnell!
[2012-10-05 18:55:30 -0400] Pushnell: bencaron: np
[2012-10-05 18:56:14 -0400] Pushnell: anyone have any advice for the Pushnell re: local templates on first chef run?
[2012-10-05 18:59:41 -0400] jtimberman: JohnHirbour: sorry about that.
[2012-10-05 19:00:03 -0400] jtimberman: JohnHirbour: http://www.opscode.com/training/open-training/
[2012-10-05 19:00:14 -0400] jtimberman: JohnHirbour: looks like we moved the page since I last remembered its location
[2012-10-05 19:00:43 -0400] JohnHirbour: thanks
[2012-10-05 19:01:10 -0400] jtimberman: JohnHirbour: the source materials are on github thoguh, github.com/opscode/chef-fundamentals
[2012-10-05 19:01:19 -0400] jtimberman: and all in markdown, so easy to read
[2012-10-05 19:16:50 -0400] James_Wells: jwitrick, That did the trick.  Still want to figure out how to do it via cookbook recipes, but that was enough to get my machines locked down to specific versions of my cookbooks.  Thank you.
[2012-10-05 19:18:06 -0400] drape: is there anyway to force knife to read normal rather than default?  i'm using knife exec...
[2012-10-05 19:46:03 -0400] jwitrick: np
[2012-10-05 19:53:16 -0400] jsnapp: jtimberman, i was wondering at what point does a cookbook on the community website get a version update? for example chef-client has had lots of new commits since it's last version on aug 30 but it hasn't received a version upgrade
[2012-10-05 20:00:38 -0400] jtimberman: jsnapp: depends
[2012-10-05 20:01:21 -0400] jtimberman: http://wiki.opscode.com/display/Staging/Opscode+Cookbook+Maintenance+Processes
[2012-10-05 20:10:11 -0400] jsnapp: jtimberman: thanks for the link
[2012-10-05 20:10:53 -0400] jtimberman: so, there isn't a set schedule
[2012-10-05 20:56:31 -0400] JoshuaMiller: Can anyone comment on the expected behavior when two resources conflict?  i.e. when a file resource in one recipe says to set the owner to bob, and a file resource in a second recipe says to set the owner to billy
[2012-10-05 20:56:59 -0400] xmltok: i believe first its changed to bob, then changed to billy
[2012-10-05 20:57:21 -0400] jtimberman: if its the same resource, yeah
[2012-10-05 20:57:35 -0400] JoshuaMiller: Same resource, based on the resource name, or same, based on the file path?
[2012-10-05 20:58:18 -0400] JoshuaMiller: I assume that would be based on the recipe order then?
[2012-10-05 20:58:24 -0400] miah: hullo
[2012-10-05 21:08:32 -0400] jtimberman: JoshuaMiller: same resource based on the resource name
[2012-10-05 21:08:39 -0400] jtimberman: file "/tmp/foo" do...
[2012-10-05 21:08:45 -0400] jtimberman: would be file[/tmp/foo]
[2012-10-05 21:10:04 -0400] mattray: ubuntu@pre01:~$
[2012-10-05 21:10:07 -0400] mattray: so pretty
[2012-10-05 21:19:24 -0400] JoshuaMiller: jtimberman: thanks
[2012-10-05 21:22:51 -0400] miah: so.. test-kitchen.. why does it hate me?
[2012-10-05 21:23:05 -0400] miah: https://gist.github.com/3837299
[2012-10-05 21:23:11 -0400] miah: halp
[2012-10-05 21:26:21 -0400] haidangwa: on the package resource, if I specify a version of a package to install and my node has an earlier version already installed, the resource doesn't cause the newer version to be installed. I know there is the :upgrade action, but it seems like the default :install action should also compare package versions and install the one I want  the philosophy of expected results applies here, I think. Anyone else care to debate or offer another solution?
[2012-10-05 21:27:44 -0400] miah: haidangwa: this is how i handle it: https://github.com/scribd/percona-install/blob/master/recipes/server.rb
[2012-10-05 21:27:45 -0400] ohlol: miah stop using collectd, problem solved :)
[2012-10-05 21:27:55 -0400] miah: ohlol: uh. thats not the problem at all =)
[2012-10-05 21:28:18 -0400] ohlol: thats irrelevant!
[2012-10-05 21:28:32 -0400] haidangwa: seems like a bug in the :install action, though, to me. The documentation does specify, "version specifies the version of the package to install/upgrade" implying that it should "do the right thing"
[2012-10-05 21:29:08 -0400] miah: upgrade will only trigger if the version you specify doesn't match whats installed on the system
[2012-10-05 21:29:15 -0400] miah: install only triggers if its not already installed
[2012-10-05 21:29:19 -0400] miah: iirc
[2012-10-05 21:30:34 -0400] miah: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/package.rb#L59-97
[2012-10-05 21:30:55 -0400] miah: hrm. ya. install should upgrade.
[2012-10-05 21:31:37 -0400] haidangwa: in my case, we're using the chef_gem resource and it's not doing what I expect. I thought the chef_gem was an offshoot of gem_package, which inherits from package?
[2012-10-05 21:32:41 -0400] miah: look at the codes
[2012-10-05 21:33:02 -0400] haidangwa: @miah  the code says it's supposed toI can see that, but it aint happening!
[2012-10-05 21:33:48 -0400] haidangwa: question is, has that been rolled in to a released version? We're currently on 10.12.0.
[2012-10-05 21:55:30 -0400] greenmoss: is it possible to set variables inside a ruby_block, and retrieve them outside it?
[2012-10-05 21:55:30 -0400] greenmoss: I'm not able to get it to work:
[2012-10-05 21:55:30 -0400] greenmoss: https://gist.github.com/3842636
[2012-10-05 21:56:27 -0400] jtimberman: greenmoss: a ruby_block is a resource that is evaluated during the execution phase of node convegrence.
[2012-10-05 21:57:57 -0400] greenmoss: jtimberman: thanks; does that mean "no"?
[2012-10-05 21:59:47 -0400] greenmoss: unfortunately I'm pretty sure I have to use ruby_block
[2012-10-05 22:00:24 -0400] jtimberman: that means no
[2012-10-05 22:03:49 -0400] qhartman: I'm wanting to do a knife search for a number of instances, but only return a few specific attributes for each found instance. Is that possible?
[2012-10-05 22:05:40 -0400] qhartman: right now I'm passing -l to knife and grepping out things, but that's only really effective when I want one attribute
[2012-10-05 22:05:48 -0400] qhartman: for more than one, that works poorly
[2012-10-05 22:06:08 -0400] greenmoss: qhartman: knife search node 'blah' -a some_attribute
[2012-10-05 22:07:53 -0400] greenmoss: jtimberman: if I leave my ruby code outside a ruby_block, it executes too early
[2012-10-05 22:07:53 -0400] greenmoss: is there any way to force this code to execute later, *and* still set a variable?
[2012-10-05 22:08:08 -0400] qhartman: greenmoss, hah, I can't believe I missed that, I bet that will let me do exactly what I want. Thx!
[2012-10-05 22:08:24 -0400] qhartman: greenmoss, I've fought with that exact problem
[2012-10-05 22:08:49 -0400] qhartman: greenmoss, the only solution I've found is to either rethink how I'm approaching the problem so I don't need to do it.
[2012-10-05 22:09:28 -0400] qhartman: greenmoss, or to do an ugly hack where I set an attribute and save the node and then reference that attribute later
[2012-10-05 22:09:53 -0400] greenmoss: qhartman: hmm... saving the node
[2012-10-05 22:09:58 -0400] greenmoss: how did you accomplish that?
[2012-10-05 22:10:08 -0400] qhartman: greenmoss, but I don't recall if I ever got that to actually work right. Let me look at my code real quick and see if I can find the spot where I was fighting that recently
[2012-10-05 22:10:18 -0400] qhartman: call node.save (something similar)
[2012-10-05 22:11:31 -0400] greenmoss: *wishes there were a single code execution path within recipes*
[2012-10-05 22:11:41 -0400] qhartman: there's my node save ruby_block: https://gist.github.com/3842743
[2012-10-05 22:12:05 -0400] greenmoss: qhartman: thanks, I may try that
[2012-10-05 22:12:12 -0400] greenmoss: or maybe the rethink :(
[2012-10-05 22:13:01 -0400] qhartman: Another approach I tried, but I don'tthink I was able to get it to work was to declare a global variable in raw code which was modified in the ruby blocks.
[2012-10-05 22:13:25 -0400] greenmoss: yeah, this was two things I tried:
[2012-10-05 22:13:25 -0400] greenmoss: https://gist.github.com/3842636
[2012-10-05 22:13:41 -0400] greenmoss: a global, and an attribute
[2012-10-05 22:13:48 -0400] greenmoss: neither survived unscathed
[2012-10-05 22:15:20 -0400] qhartman: yeah, I'm not seeing the place where I fought with this problem last
[2012-10-05 22:15:47 -0400] qhartman: I'm pretty sure I ended up rethinking my approach to the problem and figuring out a way that I didn't need to pass the variable out of the ruby_block
[2012-10-05 22:16:00 -0400] greenmoss: seems that "save" does "Save this node via the REST API"
[2012-10-05 22:16:11 -0400] qhartman: As I recall, I may have ended up using an execute block and breaking the task into a shell script
[2012-10-05 22:16:13 -0400] greenmoss: sorry, "node.save"
[2012-10-05 22:23:05 -0400] jtimberman: greenmoss: yes, that is what node.save does
[2012-10-05 22:25:10 -0400] pcross616: Did teh directory resouce change from 10.6.x -10.14.x to make the permission check on the directory pre creation?  eg.  /mnt (owned by root) a resource to create a directory in /mnt/foo (owned by jboss) throws a permission issue since jboss cant create in /mnt.   This worked in 10.6  now 10.14.4 it does not.
[2012-10-05 22:26:18 -0400] tlowrimore: Running into a problem trying to provision VMs on Vagrant with Chef.  Actually, I can create the VM with vagrant up [vm-name], but subsequent calls to vagrant provision [vm-name] result in an error indicating: The chef binary (either `chef-solo` or `chef-client`) was not found on the VM and is required for chef provisioning.
[2012-10-05 22:27:09 -0400] tlowrimore: strange thing is, when I SSH into the VM, and run `which chef-client`, I see it in /usr/local/bin/
[2012-10-05 22:28:21 -0400] tlowrimore: Is this a known problem?  FYI, I'm using Vagrant 1.0.5 and Chef 10.14.4, and I'm provisioning VMs using the precise64 box
[2012-10-05 22:29:22 -0400] tlowrimore: here's a gist of my current Vagrantfile: https://gist.github.com/3842767
[2012-10-05 22:30:06 -0400] tlowrimore: I've scoured google, and sadly I'm coming up empty handed.
[2012-10-05 22:30:53 -0400] juliancdunn: tlowrimore: maybe it's that /usr/local/bin isn't in the $PATH
[2012-10-05 22:31:05 -0400] juliancdunn: I've seen that before on Fedora 17 when installing Chef Client via gems
[2012-10-05 22:31:27 -0400] juliancdunn: maybe rebuild the box using Omnibus, which makes a link into /usr/bin?
[2012-10-05 22:32:20 -0400] tlowrimore: I've seen the Omnibus installer, but I'm not clear on how I can bootstrap this with Vagrant.
[2012-10-05 22:33:20 -0400] tlowrimore: Also, I'm afraid that in my case, this is not a path issue, as I'm able to invoke chef-client from within the VM.
[2012-10-05 22:33:35 -0400] ekristen: abetterlie: you around?
[2012-10-05 22:34:18 -0400] juliancdunn: tlowrimore: you could just rebuild the precise64 box once you've installed omnibus within it
[2012-10-05 22:34:47 -0400] tlowrimore: @juliancdunn: that's a good idea.
[2012-10-05 22:45:31 -0400] jtimberman: we have some already built boxes with that
[2012-10-05 22:45:45 -0400] jtimberman: using our bento project - templates for veewee
[2012-10-05 22:45:55 -0400] jtimberman: https://github.com/opscode/bento
[2012-10-05 22:45:58 -0400] jtimberman: readme contains links to the base boxes
[2012-10-05 22:46:30 -0400] jtimberman: oh - he left.
[2012-10-05 22:46:32 -0400] jtimberman: :/
[2012-10-05 22:46:45 -0400] erikh: templates all the way down
[2012-10-05 22:50:35 -0400] jtimberman: :)
[2012-10-05 22:55:56 -0400] aviral: hi folks
[2012-10-05 22:56:14 -0400] aviral: I am getting authentication failures on opcode chef.
[2012-10-05 22:56:17 -0400] aviral: any1 else seeing this ?
[2012-10-05 22:59:42 -0400] c_t: what days are the Chef Summit again?
[2012-10-05 22:59:55 -0400] jessicab: aviral: there are some steps on this page that can help you solve auth errors http://wiki.opscode.com/display/chef/Common+Errors
[2012-10-05 23:00:26 -0400] aviral: thanks @jessicab looking
[2012-10-05 23:00:38 -0400] c_t: ah yes, the 23rd and 24th
[2012-10-05 23:03:21 -0400] jtimberman: c_t: the 23-24th!
[2012-10-05 23:03:27 -0400] jtimberman: ;)
[2012-10-05 23:04:00 -0400] c_t: jtimberman: Alas, *two* things now make going really difficult :-(
[2012-10-05 23:04:29 -0400] c_t: being so close to the election, and that I'll be out of commission most of that Friday at the neuro
[2012-10-05 23:04:40 -0400] c_t: but, I'm just pleased as punch about that last thing
[2012-10-05 23:05:22 -0400] c_t: might try to swing by and find where people are hanging out at one evening though
[2012-10-05 23:06:37 -0400] jtimberman: c_t: I'm clearly biased but I think you should be at the Summit
[2012-10-05 23:14:40 -0400] holoway: hey - anyone in here that is in the "I wish I could run all of my chef server from a github pull request" crowd?
[2012-10-05 23:16:54 -0400] JasonF: holoway: yes
[2012-10-05 23:17:07 -0400] JasonF: holoway: I use git repos + chefuploader to manage a bunch of chef servers.
[2012-10-05 23:17:20 -0400] mattupstate1: can you dowload a data bag as a json file with knife?
[2012-10-05 23:17:25 -0400] JasonF: holoway: and if we could add chef users that way... and make it delete things... mmm
[2012-10-05 23:17:57 -0400] JasonF: holoway: and I live near "Holloway Ave", so I'm taking your irc nickname as a sign that you're here to make my repos better
[2012-10-05 23:23:23 -0400] jessicab: mattupstate1: not sure if theres a better way, but that is part of the 'knife backup export' command in the knife plugin used in this guide http://wiki.opscode.com/display/chef/Migrating+to+Hosted+Chef+from+an+Open+Source+Chef+Server+implementation
[2012-10-05 23:23:30 -0400] hoover_damm: holoway, that would be neat
[2012-10-05 23:23:47 -0400] hoover_damm: holoway, haven't gotten back to that thought in over 7 months... wasn't sure how I wanted to tackle it
[2012-10-05 23:23:51 -0400] hoover_damm: was going to wait and see
[2012-10-05 23:26:57 -0400] paulmooring: mattupstate1: I think only 1 item at a time
[2012-10-05 23:27:59 -0400] paulmooring: something like `for item in $(knife data bag show mybag) ; do knife data bag show mybag $item -Fj ; done` might work
[2012-10-05 23:40:03 -0400] z: holoway: I'm pretty close to not using Knife at all, think I have >80% of things done via git commit + git push now
[2012-10-05 23:46:20 -0400] holoway: z: yeah, I have a great model for driving the majority of stuff out of git
[2012-10-05 23:46:36 -0400] holoway: I'm just whipping up a quick web hook so people stop complaining :)
[2012-10-05 23:46:39 -0400] holoway: and I got to nodes
[2012-10-05 23:46:49 -0400] holoway: and my question was, how far down the rabbit hole do people want
[2012-10-05 23:46:58 -0400] holoway: cause you could do things like delete nodes you don't have files for
[2012-10-05 23:47:14 -0400] holoway: and for run-lists and attributes, we can stomp the existing data
[2012-10-05 23:47:56 -0400] holoway: everything else is easy
[2012-10-05 23:49:18 -0400] hoover_damm: holoway, clients?
[2012-10-05 23:51:23 -0400] holoway: hoover_damm: in what way would you want clients managed from git?
[2012-10-05 23:52:13 -0400] JasonF: holoway: Yes! I want that!
[2012-10-05 23:52:23 -0400] z: holoway: I'd love to be able to replace the public key of a client with a new one
[2012-10-05 23:53:04 -0400] JasonF: holoway: If I have nodes defined in a .json file, I'd love if deleting the file deleted the node. I also want any changes in that to absoultely stomp out any previous data.
[2012-10-05 23:53:08 -0400] z: holoway: and I'd love to be able to say "Oh this client is in Git but isn't on the Chef Server, lets add it, using the public key included"
[2012-10-05 23:53:15 -0400] JasonF: holoway: I want the git repo contents to always == what the chef-server has inside
[2012-10-05 23:53:29 -0400] holoway: JasonF: so if you launch somethign from ec2
[2012-10-05 23:53:35 -0400] holoway: JasonF: and it auto-runs the client
[2012-10-05 23:53:39 -0400] holoway: JasonF: You want me to delete it
[2012-10-05 23:53:46 -0400] z: holoway: as an aside I store Nodes, Environments, Data Bags, Roles ..
[2012-10-05 23:53:58 -0400] JasonF: holoway: s/ec2/Rackspace Cloud/ ;)
[2012-10-05 23:54:08 -0400] holoway: JasonF: sure, but still - you want it gone
[2012-10-05 23:54:18 -0400] holoway: z: sadly, we generate clients for you
[2012-10-05 23:54:24 -0400] holoway: z: so no joy there without new features
[2012-10-05 23:54:31 -0400] JasonF: holoway: Unless I've either added a node .json file for it OR I've not run a chef upload yet
[2012-10-05 23:55:16 -0400] holoway: z: but even so, why in the world would you want to re-invent key management in git?
[2012-10-05 23:55:19 -0400] JasonF: We only upload on commit to repo, so if I bootstrapped a node, then immediately dump the json from the chef server + commit, then theoretically there shouldn't be a chef upload that happens between that would delete the missing node
[2012-10-05 23:55:20 -0400] holoway: cuase that's nuts
[2012-10-05 23:55:39 -0400] holoway: JasonF: right - this would get triggered when you push to a repo
[2012-10-05 23:55:46 -0400] z: holoway: I would *vastly* prefer client-side private key generation, and if you think about the HP case, or even the OPC case, sometimes you want the /same/ admin clients on each server
[2012-10-05 23:55:55 -0400] JasonF: holoway: then absolutely, that's a behavior I'd love to see.
[2012-10-05 23:55:56 -0400] holoway: z: yeah, I hear you
[2012-10-05 23:56:01 -0400] z: holoway: In fact I wrote a script which yanks shit out fo CouchDB to dupe it at HP ..
[2012-10-05 23:56:04 -0400] JasonF: holoway: especially with things like data_bags as well
[2012-10-05 23:56:05 -0400] holoway: z: but I'm getting it done now
[2012-10-05 23:56:18 -0400] z: holoway: Oh just pop it on the bucket-list for "some day" =)
[2012-10-05 23:56:21 -0400] JasonF: holoway: if the data_bag is not in my repo, I want the data_bag gone off the server
[2012-10-05 23:56:27 -0400] holoway: right
[2012-10-05 23:56:30 -0400] holoway: ok
[2012-10-05 23:56:33 -0400] JasonF: holoway: even if it means I'm screwing someone who might have gone around the proper process
[2012-10-05 23:56:35 -0400] holoway: JasonF: you willing to test this?
[2012-10-05 23:56:40 -0400] z: I am also of the opinion if it ain't in the repo, it shouldn't be on the server
[2012-10-05 23:56:45 -0400] hoover_damm: holoway, holoway I was thinking of the insanity of completely managing chef from git.  Being able to upload a holoway.json with a public key, and admin... and push, and have it work
[2012-10-05 23:56:50 -0400] z: and by "in the repo" what I mean is on the 'master' branch
[2012-10-05 23:56:56 -0400] hoover_damm: damn the doubles
[2012-10-05 23:57:05 -0400] holoway: yeah, god bless you wall
[2012-10-05 23:57:06 -0400] holoway: er all
[2012-10-05 23:57:08 -0400] holoway: I totally don't want that
[2012-10-05 23:57:10 -0400] hoover_damm: I hate it when I type too much and I can't see the beginning of the line
[2012-10-05 23:57:12 -0400] holoway: but I'm going to give you what you want anyway
[2012-10-05 23:57:13 -0400] JasonF: holoway: A little bit. I'm doing the buildbot tie in for a new chef server we're doing right now, so I could look at it, but depending on how deep the rabbit hole goes, I don't want that.
[2012-10-05 23:57:24 -0400] hoover_damm: holoway, that would be ideal... but that's also crazy
[2012-10-05 23:57:34 -0400] JasonF: meaning I don't wanna be helping you test for the next week instead of getting my stuff done ;)
[2012-10-05 23:57:38 -0400] holoway: I think you miss out on all the real possibilities of having an API for your infrastructure
[2012-10-05 23:57:41 -0400] holoway: but it's cool
[2012-10-05 23:57:48 -0400] holoway: ya'll can roll how you wanna roll
[2012-10-05 23:58:05 -0400] JasonF: holoway: I prefer having a good way to review changes. All chef changes going in via PRs is much better than knife upload random_ass_code
[2012-10-05 23:58:15 -0400] holoway: JasonF: oh, we totally agree there
[2012-10-05 23:58:20 -0400] JasonF: plus git allows for rollback of changes, etc
[2012-10-05 23:58:34 -0400] JasonF: I want the git repo to be the API to my infrastructure :)
[2012-10-05 23:58:39 -0400] holoway: JasonF: only in the most naive of conditions
[2012-10-05 23:58:48 -0400] holoway: JasonF: but it's all cool
[2012-10-05 23:58:51 -0400] paulmooring: JasonF: it's a big win for an audit trail too
[2012-10-05 23:59:01 -0400] holoway: I'm all for code review and stuff in git
[2012-10-05 23:59:07 -0400] z: holoway: If you're writing a GitHub Services hook then IMHO there should be a checkbox enabling/disabling behaviour to purge
[2012-10-05 23:59:07 -0400] holoway: and rather than talk more on IRC
[2012-10-05 23:59:09 -0400] holoway: I'm going to finish this
[2012-10-05 23:59:12 -0400] hoover_damm: holoway, hubot it?
[2012-10-05 23:59:13 -0400] JasonF: holoway+++
[2012-10-05 23:59:14 -0400] holoway: z: yeah, someone else can do that
[2012-10-05 23:59:20 -0400] z: holoway: aight :)
[2012-10-05 23:59:29 -0400] holoway: z: ya'll ask for bondage and discipline, I'ma give it to you
[2012-10-05 23:59:50 -0400] holoway: z: I think you're nuts, but I love you all enough to end the discussion with some sinatra

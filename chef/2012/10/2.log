[2012-10-02 00:03:52 -0400] bluepojo: re my earlier question: use secret-file not -s to provide the path to your secret key ;)
[2012-10-02 00:03:58 -0400] bluepojo: -s is the key itself
[2012-10-02 00:04:05 -0400] bluepojo: eg. -s `cat path_to_file`
[2012-10-02 00:04:14 -0400] bluepojo: that was my problem
[2012-10-02 00:06:03 -0400] jassinpainAgain: nice bluepojo
[2012-10-02 00:09:44 -0400] ptrstr: JasonF: sure, remove the depends from metadata.rb
[2012-10-02 01:38:27 -0400] flaccid: hmm there is a doc on best practices for raising exception with chef? should just be doing like a Chef::Log.fatal or something?
[2012-10-02 01:45:09 -0400] bassclef: https://gist.github.com/3815672  --- can anyone tell me why when it gets to the make install it tells me "make command not found?"
[2012-10-02 01:45:51 -0400] hoover_damm: build-essential doesn't include make?
[2012-10-02 01:45:56 -0400] hoover_damm: I've never underststood that
[2012-10-02 01:46:03 -0400] hoover_damm: seen it happen, rinsed and repeated and it got it.
[2012-10-02 01:46:11 -0400] hoover_damm: pretty sure it was due to old index's
[2012-10-02 01:46:20 -0400] bassclef: hoover you talking to me?
[2012-10-02 01:46:34 -0400] flaccid: bassclef: include "build-essential" no good?
[2012-10-02 01:46:58 -0400] bassclef: hmmm
[2012-10-02 01:47:09 -0400] hoover_damm: bassclef, yep
[2012-10-02 01:47:38 -0400] bassclef: thought i had build-essential on my golden-image
[2012-10-02 01:47:43 -0400] bassclef: but let me make sure
[2012-10-02 01:47:46 -0400] hoover_damm: bassclef, unfortunately after I started hosting my own apt mirror and not pruning old stuff I haven't run into this...
[2012-10-02 01:49:30 -0400] bassclef: yep build-essential working now
[2012-10-02 01:49:31 -0400] bassclef: thanks guys
[2012-10-02 01:49:36 -0400] bassclef: added it to my package installs
[2012-10-02 01:49:39 -0400] bassclef: thought i had everything
[2012-10-02 01:52:30 -0400] flaccid: you shouldn't bake that into an image though. just depend on build-essential in metadata and do the recipe include..
[2012-10-02 01:53:58 -0400] NewToChef: I am bootstrapping an EC2 instance using knife. Chef installs fine but the node fails to register with the Chef server. I get the following error:
[2012-10-02 01:53:59 -0400] NewToChef: Failed to authenticate as chef-validator. Ensure that your node_name and client key are correct.
[2012-10-02 01:54:01 -0400] hoover_damm: flaccid, indeed
[2012-10-02 01:54:12 -0400] flaccid: :)
[2012-10-02 01:54:16 -0400] hoover_damm: flaccid, but how people handle that is usually based on experience and easiest method there
[2012-10-02 01:54:38 -0400] flaccid: that could be said for almost anything though
[2012-10-02 01:54:49 -0400] hoover_damm: absolutely that's why technical debt is created so easily
[2012-10-02 01:54:50 -0400] hoover_damm: and so often
[2012-10-02 01:54:52 -0400] NewToChef: Any help on how to fix that? Does the node_name need to be set to the instance ID?
[2012-10-02 01:55:15 -0400] NewToChef: if so, how do I do that if I am bootstrapping the node using knife
[2012-10-02 01:55:33 -0400] hoover_damm: flaccid, http://queue.acm.org/detail.cfm?id=2168798
[2012-10-02 01:55:53 -0400] flaccid: yeah its on wikipedia
[2012-10-02 01:58:22 -0400] hoover_damm: flaccid, actually that's a fantastic paper on it
[2012-10-02 01:58:27 -0400] hoover_damm: flaccid, wikipedia's is likely still valid
[2012-10-02 01:58:56 -0400] SplasPood: lol, this if baffling, my virtualbox seems to be dropping chars on console.. but only the letter u, seemingly
[2012-10-02 01:59:27 -0400] Twirrim: it no longer loves u?
[2012-10-02 01:59:38 -0400] SplasPood: seems it
[2012-10-02 02:00:07 -0400] hoover_damm: SplasPood, forgot to pay the 'u' tax?
[2012-10-02 02:00:16 -0400] hoover_damm: SplasPood, please realize that's a joke :)
[2012-10-02 02:25:59 -0400] SplasPood: hoover_damm: I immediately started googling 'u tax' but could not find anything
[2012-10-02 02:26:27 -0400] flaccid: its not as bad as 'e' tax
[2012-10-02 02:29:39 -0400] SplasPood: yea the e tax is a real...
[2012-10-02 02:29:39 -0400] SplasPood: https://github.com/jedi4ever/veewee/issues/386
[2012-10-02 02:29:46 -0400] SplasPood: appears to be the same exact issue i'm having
[2012-10-02 02:29:53 -0400] SplasPood: so glad to know I'm not insane
[2012-10-02 08:58:34 -0400] cpasmoi: hey
[2012-10-02 08:59:45 -0400] cpasmoi: where can I get all the chef 9.x version client ? I'm using chef server 0.9.12 and before upgrading the server I'd like to keep chef 9.x client as update as it can
[2012-10-02 09:01:10 -0400] cpasmoi: oh, ok found it : http://rubygems.org/gems/chef/versions
[2012-10-02 09:02:21 -0400] zeroXten: if i wanted to define a function to convert fqdn to data_bag id, where should it go so that it can be used by all recipes? Do I have to write a tiny ruby library?
[2012-10-02 09:16:13 -0400] cpasmoi: strange, on a debian stable after a "gem install chef -v 0.9.18" the "chef-client" command doesn't exist...
[2012-10-02 09:21:12 -0400] cpasmoi: in fact, it has not been installed in /usr/bin/ and still exists in /var/lib/gems/1.8/bin/chef-client
[2012-10-02 09:24:44 -0400] Vaudou: hello
[2012-10-02 09:25:03 -0400] Vaudou: i have a problme with first example in this page : http://wiki.opscode.com/display/chef/Opscode+LWRP+Resources
[2012-10-02 09:25:22 -0400] Vaudou: the error is : Cannot find a resource for apt_repository on debian version 6.0.6
[2012-10-02 09:26:29 -0400] Vaudou: i try the debug mode, but I do not know how to look
[2012-10-02 09:28:16 -0400] cpasmoi: for /etc/apt/sources.list.d/zenoss.list ?
[2012-10-02 09:29:02 -0400] Vaudou: yes
[2012-10-02 09:32:03 -0400] Vaudou: it's only to test, the real cookbook is for varnish, but i've the same error
[2012-10-02 09:33:47 -0400] cpasmoi: Vaudou, is the apt_repository LWRP installed ?
[2012-10-02 09:35:29 -0400] Vaudou: cpasmoi, on the server or client ?
[2012-10-02 09:36:26 -0400] cpasmoi: server
[2012-10-02 09:36:26 -0400] Vaudou: it's a cookbook to add on the server ?
[2012-10-02 09:36:55 -0400] cpasmoi: Well I guess so, I've always used "chef-client" on my clients
[2012-10-02 09:37:17 -0400] cpasmoi: (note that I'm note used to chef, I'm only using it as far as I can)
[2012-10-02 09:42:06 -0400] Vaudou: so y already upload https://github.com/opscode-cookbooks/apt, is this the "apt_repository LWRP" ?
[2012-10-02 09:42:40 -0400] philsturgeon: hey guys, anyone tried upgrading to PHP 5.4 using the main php cookbook?
[2012-10-02 09:43:15 -0400] philsturgeon: if PHP is already installed, it will never try upgrading to the version specified in default['php']['version'] = '5.4.6' as the check is purely looking at   not_if "which php", which is always going to say true
[2012-10-02 10:04:38 -0400] philsturgeon: jtimberman: hey, can you give me a little advice on a pull request im trying to make? Right now PHP only checks it exists using:  not_if "which php"
[2012-10-02 10:04:50 -0400] philsturgeon: jtimberman: it needs to be something like: not_if "`which php` -v | grep '#{version}'"
[2012-10-02 10:04:58 -0400] philsturgeon: need to make a useful exit status out of that
[2012-10-02 10:08:21 -0400] Yann2: hi! I want to give admin rights to one of my nodes using the webui - I m a bit lost on how to do that. Any idea?
[2012-10-02 10:16:20 -0400] Yann2: ok found it, seems I was looking at the wrong place - sry
[2012-10-02 10:27:08 -0400] Vaudou: cpasmoi: its'good, i've had the apt default to my Role et it's work tks
[2012-10-02 12:53:01 -0400] sg4m: I'd like to use the knife gem in my own script - anyone done this / is it inadvisable?  my initial attempt to simply call Chef::Knife.run isn't working because of the way Chef::Knife uses MixLib::CLI.  I'm not familiar with the latter, so perhaps the problem is easy to work around?
[2012-10-02 12:57:08 -0400] ranjibd: sg4m, yeah.. you need to require mixlib/cli
[2012-10-02 12:57:29 -0400] ranjibd: sg4m, its a gem that eases command line argument processing
[2012-10-02 13:01:01 -0400] sg4m: ranjibd, yeah, I figured that out by taking a look at it :)  but the issue isn't that the mixlib gem isn't being loaded, it's what it then tries to do with the argument list.  it looks Chef::Knife expects to get both a hash of already parsed arguments *and* the original ARGV?
[2012-10-02 13:31:46 -0400] gyre007: I have a question...Im working on some LWRPs and I'd like to pass a TEMPLATE/File/Text to one of the attributes...
[2012-10-02 13:31:53 -0400] gyre007: what would be the best way to do that ?
[2012-10-02 13:32:45 -0400] gyre007: ideally template which would be expanded into text and inserted into another template ;)
[2012-10-02 13:32:53 -0400] gyre007: something like partial in Rails...
[2012-10-02 13:34:54 -0400] gyre007: basically...im trying to set up Unicorn config....with some before_exec and after_exec section code...but would like those bits to differ based on the application the UNicorn will be set up for...
[2012-10-02 13:35:22 -0400] gyre007: I guess I could pass a file and expand it into string...and use that string..
[2012-10-02 13:42:56 -0400] jtimberman: gyre007: i'd have one of the resource's attributes be able to take a hash, and then in the provider's action method, use a template resource there.
[2012-10-02 13:43:19 -0400] jtimberman: gyre007: then use the attribute that is a hash as variables attribute to the temlate
[2012-10-02 13:43:35 -0400] gyre007: I see
[2012-10-02 13:43:45 -0400] jtimberman: allow your wrapper resource to take "source" and "cookbook" attributes that get used by the template in the aaction
[2012-10-02 13:44:36 -0400] jtimberman: there'sa unicorn_config defintiion in opscode's unicorn cokbook that might be of interest to you
[2012-10-02 13:47:02 -0400] zeroXten: if i wanted to define a function to convert fqdn to data_bag id, where should it go so that it can be used by all recipes? Do I have to write a tiny ruby library?
[2012-10-02 13:49:08 -0400] gyre007: jtimberman, yeah Im using that definition....but we need slightly complicated configuration in Unicorn depending on the app it will be serving...Rack/Rails/Sinatra...Rails without ActiveRecord etc....basically we need to be able to expand certain bits into main UNicorn's config  in before_fork after* sections...will give a think about your suggesting jtimberman
[2012-10-02 13:54:37 -0400] jtimberman: zeroXten: use gsub
[2012-10-02 13:54:38 -0400] jtimberman: dns = data_bag_item("dns", node[:djbdns][:domain].gsub(/\./, "_"))
[2012-10-02 13:54:42 -0400] jtimberman: for example
[2012-10-02 13:55:08 -0400] zeroXten: yup, doing that. But this needs to be done in various cookbooks, so I'd like to be a bit more DRY and have a function
[2012-10-02 13:55:12 -0400] spox: shouldn't need to use a regex for that
[2012-10-02 13:55:13 -0400] gyre007: I'm afraid it I won't be able to use your approach jtimberman as the stuff we need to expand into the template is something like this: https://gist.github.com/3819343 ...passing this stuff (stuff between do and end inafter_fork block) via hash would be madness imho :(
[2012-10-02 13:55:42 -0400] gyre007: if we were passing simple vars and conf options hash would be really handy
[2012-10-02 13:56:05 -0400] zeroXten: i'm thinking of just having a simple company gem file which includes all our lovely functions
[2012-10-02 13:56:12 -0400] jtimberman: zeroXten: sure
[2012-10-02 13:56:29 -0400] jtimberman: zeroXten: i have a cookbook that has a libraries directory and all those little libs in it :)
[2012-10-02 13:56:49 -0400] zeroXten: but those libraries are only for that cookbook right?
[2012-10-02 13:57:44 -0400] gyre007: we just basically need some sort of rails partial thingy to expand it in the other templates :)
[2012-10-02 13:57:51 -0400] zeroXten: wouldn't I still need to chef_gem "mylib" in each cookbook that wants to use the functions? followed by a require of course
[2012-10-02 14:00:02 -0400] sg4m: bumping my own question here :) : I'd like to use the knife gem in my own script - anyone done this / is it inadvisable?  my initial attempt to simply call Chef::Knife.run isn't working because of the way Chef::Knife uses MixLib::CLI.  I'm not familiar with the latter, so perhaps the problem is easy to work around?
[2012-10-02 14:00:47 -0400] zts: sg4m: taking a step back, what is it you're trying to achieve?
[2012-10-02 14:02:17 -0400] sg4m: zts: sure - I have a script that simplifies launching EC2 instances.  it figures out what AMI to use, and how to set some other parameters we need.  currently it shells out to call knife.  I'd like to pull knife in to call it directly.
[2012-10-02 14:03:35 -0400] jmartin: sg4m: there is a knife plugin to launch ec2 instances i do believe
[2012-10-02 14:03:36 -0400] sg4m: zts: I'm also thinking about monkey patching Fog because of an intermittent issue I'm seeing at EC2.  I'd probably submit a patch if it turns out to be expected EC2 behavoir and not a bug..
[2012-10-02 14:03:48 -0400] sg4m: jmartin: yeah, I use that
[2012-10-02 14:05:09 -0400] sg4m: jmartin: currently my script shells out to call knife ec2 server create 
[2012-10-02 14:05:36 -0400] jmartin: sg4m: gotcha, just trying to make sure you were aware of it
[2012-10-02 14:06:05 -0400] sg4m: jmartin: thank you
[2012-10-02 14:06:36 -0400] jtimberman: zeroXten: libraries are available to all other cookbokos on the node
[2012-10-02 14:06:42 -0400] jtimberman: zeroXten: libraries in a cookbook.
[2012-10-02 14:06:52 -0400] jtimberman: you just declare a dependency on that one when you want to use its libraries
[2012-10-02 14:07:53 -0400] gyre007: looks like we're gonna store the arbitrary configuration text in Databags and pass it to the template...can't think of a better way of doing this...
[2012-10-02 14:08:17 -0400] geekbri: sg4m: i created a tool just like you are talking about internally for our company.  You can call knife plugins from within other knife plugins
[2012-10-02 14:08:40 -0400] jtimberman: zeroXten: when chef-client runs, one of the first things it does is determine what cookbooks it wants from the server. the server works out the dependencies (if any are declared in metadata), and the client downloads those. then it loads up the components of the cookbokos starting with libraries (like, the files in the 'libraries' directory of every cookbook)
[2012-10-02 14:08:49 -0400] geekbri: sg4m: http://wiki.opscode.com/display/chef/Knife+Plugins#KnifePlugins-UsingPluginswithinOtherPlugins
[2012-10-02 14:09:00 -0400] jtimberman: so they're "automaticlaly required"
[2012-10-02 14:09:10 -0400] geekbri: sg4m: you can write a plugin that then makes a call to knife ec2
[2012-10-02 14:09:22 -0400] jtimberman: there's a little more gymnastics if you want to ship a gem, e.g., 'chef_gem' and 'require' in your recipe(s) to use them.
[2012-10-02 14:09:28 -0400] sg4m: geekbri: ah, so you wrote your tool as a plugin?  interesting, that could work
[2012-10-02 14:09:33 -0400] geekbri: sg4m: yeah
[2012-10-02 14:09:45 -0400] jtimberman: if there's other functionality that you want to make useful outside chef, then yeah rock a gem. but if its *only* for chef then just stick it in the cookbook.
[2012-10-02 14:09:59 -0400] geekbri: sg4m: https://github.com/brianbianco/knife-nodefu   its not really ready to be consumed by people other than me, but you might find some stuff in the code useful
[2012-10-02 14:10:30 -0400] geekbri: its very rough around the edges, it was thrown together hastily but maybe you can find a useful something in there somewhere
[2012-10-02 14:10:35 -0400] jtimberman: sg4m: you could totally make a plugin wrapper that uses the knife ec2 (or other bits from chef/knife)
[2012-10-02 14:10:45 -0400] sg4m: geekbri: cool, thank you.
[2012-10-02 14:12:00 -0400] sg4m: so nobody uses the knife gem within their own tool?
[2012-10-02 14:13:37 -0400] jtimberman: sg4m: what knife gem?
[2012-10-02 14:13:44 -0400] jtimberman: sg4m: you mean the chef/knife library?
[2012-10-02 14:13:59 -0400] jtimberman: (the core knife functionality and libraries are in the Chef gem)
[2012-10-02 14:15:07 -0400] sg4m: jtimberman: right, sorry, "chef/knife" in the chef gem.
[2012-10-02 14:16:33 -0400] sg4m: jtimberman: I can see that it's meant to be a CLI tool - it does seem to have functionality that isn't available separately though, unless I've missed it?
[2012-10-02 14:47:02 -0400] rshade98: what is the best way to log from inside a library?
[2012-10-02 14:48:31 -0400] jgoulah: can you not put a conditional around "include_recipe"
[2012-10-02 14:48:35 -0400] jgoulah: does chef preprocess those?
[2012-10-02 14:50:45 -0400] SplasPood: you can put a conditional aroudnd it
[2012-10-02 14:50:50 -0400] SplasPood: around, even
[2012-10-02 14:51:35 -0400] jgoulah: alright, trying to figure out why its not working then, thanks!
[2012-10-02 14:52:32 -0400] SplasPood: hrm ya know
[2012-10-02 14:52:50 -0400] SplasPood: ...   maybe I'm lying to you
[2012-10-02 14:53:43 -0400] anentropic: is it possible or advisable to access data_bag_items from within a LWRP provider?
[2012-10-02 14:59:20 -0400] cwj: yes and yes
[2012-10-02 15:01:14 -0400] cwj: here's some provider code i wrote recently, it uses data bags a fair bit https://github.com/needle-cookbooks/chef-zncrypt/blob/needle/providers/license.rb
[2012-10-02 15:06:37 -0400] cpasmoi: hey there. I don't understand why on my most recent node the attribute ssh_pub_key from :system_users isn't filled, whereas every other key in :system_users is correct for every user
[2012-10-02 15:07:29 -0400] cpasmoi: The id_dsa.pub exists and has the same rights than any other host/node
[2012-10-02 15:14:00 -0400] cpasmoi: hum, ok, I managed to run chef-client until its end and the attribute just poped up
[2012-10-02 15:55:48 -0400] comradeloren: yo, anybody got a link to a decent Centos 5.x install guide?
[2012-10-02 15:55:54 -0400] comradeloren: flounderin' over here with what's out there
[2012-10-02 15:57:22 -0400] comradeloren: for chef-server
[2012-10-02 15:57:37 -0400] comradeloren: the omnibus installer works fine for chef-solo, but getting the server going is giving me a headache
[2012-10-02 16:06:17 -0400] leifmadsen: has anyone used pry-rescue along with chef? If so, does anyone have examples of how to modify a resource in chef for debugging purposes so you can look into the stacktrace one step at a time?
[2012-10-02 16:08:50 -0400] yfeldblum: jgoulah, recipes are pure ruby code with no magic and no preprocessing (just normal ruby methods and a method_missing handler)
[2012-10-02 16:09:10 -0400] yfeldblum: jgoulah, so you can put an `if` around include_recipe
[2012-10-02 16:09:37 -0400] yfeldblum: anentropic, i would suggest not doing that
[2012-10-02 16:09:43 -0400] jgoulah: thanks, i got it working
[2012-10-02 16:09:54 -0400] yfeldblum: anentropic, "to access data_bag_items from within a LWRP provider"
[2012-10-02 16:10:14 -0400] anentropic: yfeldblum yes have decided not to, wasn't sure if the methods were even available outside a recipe?
[2012-10-02 16:10:49 -0400] yfeldblum: jgoulah, heh i was really responding to the broader question regarding recipes being magical or chef doing some magical preprocessing, not to the narrower question of ifs and include_recipe :P
[2012-10-02 16:12:38 -0400] yfeldblum: anentropic, the recipe DSL methods are usually simple wrappers around classes, and the classes can be used from anywhere ... plus, there's a module with the methods, and you can include that module in your LWRP provider to get the methods ... in any event, the real issue is that your provider should provide an implementation for a resource and its attributes, *and nothing else* ... if there's extra information that goes into it, then tha
[2012-10-02 16:12:38 -0400] yfeldblum: t means you need more attributes on your resource so your provider can get that extra data from the resource
[2012-10-02 16:43:15 -0400] gyre007: if I have a LWRP where Im setting up template and runit service in one action and I want to notify the runit service from the template what should I do...in other words, will this work ? https://gist.github.com/3820905
[2012-10-02 16:46:50 -0400] mvisich: Hello, I had a recipie question. Is there a way I can use a directory like a file?  as in drop the directory instead of this single file. Thanks!
[2012-10-02 16:55:51 -0400] mattray: knuckolls: got a couple of big revisions to the rabbitmq cookbook, wanted to run it by you since I know you're using it in anger
[2012-10-02 16:56:00 -0400] mattray: https://github.com/opscode-cookbooks/rabbitmq/commits/COOK-1684
[2012-10-02 16:56:27 -0400] mattray: default behavior should be unchanged
[2012-10-02 16:56:51 -0400] knuckolls: mattray: ah thanks. i'll try to test it this afternoon.
[2012-10-02 16:57:03 -0400] mattray: just fixed some stupid breakages and added support for using the distro release of rabbit on Ubuntu if you're so inclined
[2012-10-02 17:05:46 -0400] morete: Hello all... I have an environment defined plenty of nodes... and all seems working but when I want to see the status section on the webui I see: "You appear to have no nodes in the XXXXX environment - try connecting one, or creating or editing a client"
[2012-10-02 17:05:59 -0400] morete: does anyone have an idea of what could be wrong?
[2012-10-02 17:08:47 -0400] jessicab: morete: maybe you have selected an environment in the drop down at the top that doesnt have any nodes? maybe try selecting none?
[2012-10-02 17:09:35 -0400] morete: jessicab, nop
[2012-10-02 17:09:50 -0400] morete: there is indeed an environment selected
[2012-10-02 17:10:11 -0400] morete: but if I go to any environment it si always saying the same thing
[2012-10-02 17:10:18 -0400] morete: and if I go to the nodes tab
[2012-10-02 17:10:20 -0400] morete: I see the nodes
[2012-10-02 17:10:36 -0400] morete: and I see access log with nodes' activity
[2012-10-02 17:17:08 -0400] morete: jessicab, found the problem...
[2012-10-02 17:17:21 -0400] morete: chef-solr was dead since last logrotate run :s
[2012-10-02 17:17:46 -0400] morete: need fixing this as jespada did in the past :)
[2012-10-02 17:31:46 -0400] jespada: morete, hi u there.. hehe yeah.. I though that was fiexed.. shame on me.. but I showed you guys the light == CM chef  , so yw ;)
[2012-10-02 17:45:02 -0400] BryanWB: bluepojo, tks for the awesome work on berkshelf!
[2012-10-02 17:45:18 -0400] bluepojo: :D
[2012-10-02 17:45:44 -0400] bluepojo: all in all, I only wrote v1 of berkshelf
[2012-10-02 17:45:51 -0400] bluepojo: reset maintains it mostly, now
[2012-10-02 17:46:06 -0400] bluepojo: save a few bug fixes here and there
[2012-10-02 17:49:03 -0400] jmartin: BryanWB: you do foodfight amirite?
[2012-10-02 17:49:08 -0400] morete: jespada, hi mate
[2012-10-02 17:49:14 -0400] morete: yeah light is awesome
[2012-10-02 17:49:25 -0400] morete: thanks for that dude...
[2012-10-02 17:49:28 -0400] morete: :)
[2012-10-02 17:50:23 -0400] morete: I'm already trying to see if I can attend sone devops conference at some point ... hope I can find an sponsor for that soon :)
[2012-10-02 17:50:44 -0400] BryanWB: jmartin: i do, tho nathenharvey does most of the work lately
[2012-10-02 17:51:08 -0400] BryanWB: but i accept most of the blame for sound quality
[2012-10-02 17:51:23 -0400] jmartin: BryanWB: ah well kudos to you and nathenharvey for inspiring my test-kitchen install/work in progress
[2012-10-02 17:51:26 -0400] jespada: morete, yup good stuff there.. me too
[2012-10-02 17:52:11 -0400] BryanWB: jmartin awesome!
[2012-10-02 17:52:15 -0400] jespada: foodfight rocks BryanWB
[2012-10-02 17:52:22 -0400] jmartin: ^
[2012-10-02 17:52:45 -0400] BryanWB: jespada, dude, u rock!
[2012-10-02 17:53:13 -0400] BryanWB: jespada, coming by Europe any time soon?
[2012-10-02 17:55:09 -0400] jespada: BryanWB, hope in a month or so... that is what I've been told.. but is up to the spain gov
[2012-10-02 17:55:49 -0400] BryanWB: jespada, fucking spanish, just like Americans to keep talented ppl out :(
[2012-10-02 17:58:37 -0400] jespada: BryanWB, yeah.. I can understand ..but still :(  I wanted to attend rome devops days, velocity eu this year  but I think I'm not gonna make it
[2012-10-02 17:58:46 -0400] jespada: next year for sure
[2012-10-02 18:32:15 -0400] SplasPood: hrm, anyone here used 'chef-solo-search' ?
[2012-10-02 18:34:20 -0400] holoway: so, having your laundry picked up via text messaging is awesome
[2012-10-02 18:34:22 -0400] holoway: fwiw
[2012-10-02 18:37:06 -0400] AdrienBrault: Hey, i'm trying to use block callbacks with the delpoy_revision provider (before_symlink for example), but it's like my blocks are ignored 
[2012-10-02 18:39:46 -0400] JasonF:  Hey gents, I'm getting this on a new install of Chef 10.14 (using chef-server::rubygems-install): https://gist.github.com/f0ed58eded0bccc3b9d0 -- The API and all other services seem to be operating properly, including the server proxy
[2012-10-02 18:40:58 -0400] JasonF: I suspect something is borken in my server.rb?
[2012-10-02 18:41:15 -0400] z: holoway: i am convinced you are living in the future
[2012-10-02 18:41:55 -0400] z: holoway: In 2012 what happens is I hear, "Why haven't you put the washing on yet?" echoing through the house.
[2012-10-02 18:42:31 -0400] JasonF: Yep. That's what happened. Format for chef_server_url is "http://chef-server:4000" in a default install. Not simply chef-server:4000.
[2012-10-02 18:43:18 -0400] jtimberman: BryanWB_: !
[2012-10-02 18:43:28 -0400] jtimberman: BryanWB_: does the --platform do at least something useful for you now?
[2012-10-02 18:43:33 -0400] jtimberman: in test-kitchen
[2012-10-02 18:50:29 -0400] poolpog: hi
[2012-10-02 18:50:45 -0400] poolpog: hows evryone today
[2012-10-02 18:52:10 -0400] jmartin: surviving, yourself?
[2012-10-02 18:52:28 -0400] poolpog: anyway, my colleague and I are trying to figure chef out...
[2012-10-02 18:52:53 -0400] poolpog: one question we had: we noticed that some nodes did not appear to pick up their assigned configuration until they checked in
[2012-10-02 18:53:38 -0400] poolpog: meaning, we had saved the Run List and the Roles (if you do knife node show NODENAME)
[2012-10-02 18:53:40 -0400] poolpog: but
[2012-10-02 18:53:58 -0400] poolpog: the new Roles didn't appear in knife node show until *after* the node had checked in
[2012-10-02 18:54:08 -0400] poolpog: does that sound normal?
[2012-10-02 18:54:22 -0400] poolpog: normal isn't the right word... "expected" is better
[2012-10-02 18:57:41 -0400] leifmadsen: poolpog: yes that is exactly how it works -- you are placing data on a server, and until the node requests that data, it can't configure itself
[2012-10-02 18:58:41 -0400] poolpog: leifmadsen, but we had pushed the configuration to the chef server -- I'd expect that the reported config would be what was pushed
[2012-10-02 18:59:10 -0400] poolpog: maybe there is another command to report whether a config has been pushed to chef? and not picked up by the node?
[2012-10-02 18:59:21 -0400] yfeldblum: poolpog, you're looking at two different things and assuming they're the same thing
[2012-10-02 18:59:39 -0400] leifmadsen: there is a server, and there are nodes
[2012-10-02 18:59:43 -0400] poolpog: NO
[2012-10-02 18:59:46 -0400] leifmadsen: pushing to the server does not trigger a node to obtain data
[2012-10-02 18:59:47 -0400] yfeldblum: poolpog, the run-list is what you saved, and as soon as you save it and run `knife node show`, then you see that new run-list immediately
[2012-10-02 18:59:48 -0400] poolpog: oops srry capslock
[2012-10-02 19:00:09 -0400] poolpog: yfeldblum, that's what we did, and it didn't do that
[2012-10-02 19:00:14 -0400] poolpog: here were my steps:
[2012-10-02 19:00:21 -0400] poolpog: 1) edit files locally
[2012-10-02 19:00:40 -0400] poolpog: 2) knife run_list add NODENAME role[new_role]
[2012-10-02 19:00:49 -0400] poolpog: 3) knife node show NODENAME
[2012-10-02 19:01:05 -0400] poolpog: ... that does *not* show all of the new recipes implied by the new role...
[2012-10-02 19:01:14 -0400] yfeldblum: poolpog, the "recipes" and "roles" lists from `knife node show` are something else entirely: they're the expanded run-lists as of the last time chef-client ran on that server and expanded the run-lists and completed a successful run and saved the node
[2012-10-02 19:01:15 -0400] poolpog: then (4) restart chef-client on NODENAME
[2012-10-02 19:01:27 -0400] yfeldblum: poolpog, as i said, you're looking at two things and assuming they're the same
[2012-10-02 19:01:31 -0400] poolpog: then "kinfe node show NODENAME" does show all the implied recipies
[2012-10-02 19:02:08 -0400] yfeldblum: poolpog, the run-list is not the same as the expanded run-list, and the roles & recipes lists come from the expanded run-list, not the run-list
[2012-10-02 19:02:08 -0400] poolpog: yfeldblum, ok, that's exactly what I'm wondering, then.
[2012-10-02 19:02:25 -0400] poolpog: (also, we aren't "asuming" -- we are totally guessing here :) )
[2012-10-02 19:02:41 -0400] mhalligan_: I'm feeling stupid (as if I'm ever not feeling stupid?), but I can't seem to find hosted chef documentation, like how to add users.
[2012-10-02 19:03:06 -0400] poolpog: how can I tell if a run list, role, or recipes have been pushed to the node description on the chef server?
[2012-10-02 19:03:25 -0400] poolpog: or is that is a nonsensical question?
[2012-10-02 19:03:51 -0400] mhalligan_: ah nevermind, the management console documentation.
[2012-10-02 19:03:53 -0400] mhalligan_: sigh
[2012-10-02 19:04:00 -0400] yfeldblum: poolpog, it's sensible from one perspective, but not from chef's perspective
[2012-10-02 19:05:20 -0400] yfeldblum: poolpog, because chef is designed for distributed, convergent data, where after a change is made then as the individual nodes pick up the change the data eventually becomes consistent and stable
[2012-10-02 19:05:31 -0400] poolpog: ok
[2012-10-02 19:05:54 -0400] poolpog: so how could I tell what the current state of the "master" configuration is?
[2012-10-02 19:06:00 -0400] holoway: z: yes, laundry pick up and delivery is the goods
[2012-10-02 19:06:11 -0400] geekbri: Is there an easy way to add an accessor to a resource provider?  I'd love to add a simply instance variable to one of my resources that can be get and set.
[2012-10-02 19:06:11 -0400] drnfx: I know on chef-server it tells you when last the node checked in, and got "updated"
[2012-10-02 19:06:12 -0400] poolpog: is that not sensible in chef terms?
[2012-10-02 19:06:30 -0400] holoway: geekbri: for what reason?
[2012-10-02 19:06:31 -0400] yfeldblum: poolpog, so you may change the run-list, but chef is designed such that the rest of the world slowly picks up the change to the run-list and adapts
[2012-10-02 19:06:56 -0400] yfeldblum: poolpog, doesn't make much sense in chef
[2012-10-02 19:07:03 -0400] poolpog: ok
[2012-10-02 19:07:07 -0400] geekbri: holoway: I have something I need to check that takes a long time, so id rather check it once and set it, than to have the method called each time.  There are many ways I could do that I was just thinking it might be convenient to shove it in the new_resource
[2012-10-02 19:07:29 -0400] yfeldblum: poolpog, the current state of the "master" configuration will be X now, but it's not necessarily what the node will see the next time it runs chef-client
[2012-10-02 19:07:33 -0400] geekbri: I think i can just def initialize and throw an instance variable in there, then just access in the provider...
[2012-10-02 19:07:34 -0400] geekbri: that should work
[2012-10-02 19:08:06 -0400] yfeldblum: poolpog, so the idea is that after a change, the whole system slowly converges and becomes stable
[2012-10-02 19:08:29 -0400] yfeldblum: poolpog, but that's not immediate and it depends on all the other nodes going through possibly multiple chef-client runs
[2012-10-02 19:09:08 -0400] yfeldblum: geekbri, it's usually best to do that in load_current_resource
[2012-10-02 19:09:32 -0400] yfeldblum: geekbri, it's usually bad practice to perform work bounded by cpu, io, or memory in a constructor
[2012-10-02 19:09:43 -0400] geekbri: it won't happen in the constructor, i'll just set it to nil there
[2012-10-02 19:09:57 -0400] geekbri: it will be in load_current_resource where it gets populated.
[2012-10-02 19:10:15 -0400] jmartin: im testing test-kitchen and the opscode apache2 cookbook just to get a feel for how it all works what i need to do for a setup, but it seems that the Apache2 cookbook fails its own tests? i would certainly assume this is likely a setup problem rather than a cookbook problem but would be interested if its been seen before. http://pastebin.com/XMubSHWa <-- output when doing a 'kitchen test' inside the apache2 cookbook
[2012-10-02 19:10:16 -0400] yfeldblum: geekbri, then you don't even need a constructor - just setting it in load_current_resource will be good enough
[2012-10-02 19:10:33 -0400] geekbri: Fair enough, it may make it more clear ot anybody who reads the code though
[2012-10-02 19:11:04 -0400] yfeldblum: geekbri, it's more likely for the bit in the constructor to go out-of-sync as the provider is changed over time
[2012-10-02 19:11:41 -0400] yfeldblum: geekbri, e.g. as you change the ivar name from @something to @something_else everywhere but forget to change it in the constructor
[2012-10-02 19:13:11 -0400] ranjibd_: jmartin, bump up chef version
[2012-10-02 19:14:06 -0400] jmartin: ranjibd_: within the basebox?
[2012-10-02 19:14:11 -0400] jmartin: or locally
[2012-10-02 19:14:47 -0400] yfeldblum: poolpog, maybe if you explain what it is you're trying to achieve, someone might be able to shed some light on an alternate way
[2012-10-02 19:15:42 -0400] poolpog: yfeldblum, not really trying to "achieve" anything other than better understanding of chef's architechture, use, best practieces, etc
[2012-10-02 19:15:49 -0400] poolpog: thanks, I appreciate the answers
[2012-10-02 19:15:54 -0400] yfeldblum: poolpog, gotcha
[2012-10-02 19:16:11 -0400] jtimberman: jmartin: the tests may not be updated to reflect reality :(.
[2012-10-02 19:16:19 -0400] ranjibd_: jmartin, its using chef_gem which was introduced later 10.8.. imho
[2012-10-02 19:16:31 -0400] ranjibd_: jmartin, i think vagrant gem.. but not sure
[2012-10-02 19:16:40 -0400] yfeldblum: jtimberman, it's a good thing you've got them then
[2012-10-02 19:16:46 -0400] jtimberman: jmartin: there was a fair amount of work happening in parallel between updates to the apache2 cookbook via COOK project tickets, and Andrew's work on it for test-kitchen example use.
[2012-10-02 19:16:50 -0400] poolpog: actually, yfeldblum, I have a better question...
[2012-10-02 19:16:56 -0400] jtimberman: yfeldblum: heh.
[2012-10-02 19:16:58 -0400] ranjibd_: jmartin, not sure how vagrant picks up the provisioner
[2012-10-02 19:17:10 -0400] ranjibd_: try updating the local chef gem first
[2012-10-02 19:17:14 -0400] poolpog: using an example: Say I put in several changes, but maybe I forgot to upload some
[2012-10-02 19:17:15 -0400] jmartin: jtimberman: ah, so likely just an issue with the baseboxes then
[2012-10-02 19:17:20 -0400] jtimberman: yfeldblum: well, the victory I believe I've just achieved is going to become a "how to write COOK ticket tests" guide
[2012-10-02 19:17:22 -0400] jmartin: ranjibd_: eh i doubt its local, this was installed today
[2012-10-02 19:17:28 -0400] jmartin: should be 'latest'
[2012-10-02 19:17:31 -0400] poolpog: is there a way I can check my local changes against what was pushed to the chef server?
[2012-10-02 19:18:16 -0400] jtimberman: the platform block in the apache2 cookbook's Kitchenfile was based on a coupling to RVM use that shouldn't be necessary with test-kitchen 0.6.0
[2012-10-02 19:18:34 -0400] erikh: test-kitchen has a rvm dependency?
[2012-10-02 19:18:35 -0400] yfeldblum: poolpog, not easily with knife, but there is another tool called knife-essentials that can help (https://github.com/jkeiser/knife-essentials, https://rubygems.org/gems/knife-essentials)
[2012-10-02 19:18:51 -0400] poolpog: thanks!
[2012-10-02 19:20:40 -0400] jtimberman: erikh: "had"
[2012-10-02 19:20:46 -0400] erikh: yay
[2012-10-02 19:20:48 -0400] jtimberman: erikh: test-kitchen is more than just cookbook testing
[2012-10-02 19:20:52 -0400] jkyle: I want to get the output of a shell command and use that as a variable in a template resource...how might I go about that?
[2012-10-02 19:20:59 -0400] jtimberman: its for project / library integration testing too
[2012-10-02 19:21:12 -0400] erikh: jtimberman: I haven't looked too hard at it yet -- lack of time
[2012-10-02 19:21:17 -0400] jkyle: if I assign the variable in a ruby_block, will it be available globally?
[2012-10-02 19:21:31 -0400] jtimberman: and one thing a person might want to know is whether their library/tool/application/whatever works on multiple different versions of ruby. which rvm is designed for facilitating of course.
[2012-10-02 19:21:33 -0400] erikh: we're bringing on another opsy person here though so I'll probably have more time soon.
[2012-10-02 19:22:10 -0400] jmartin: jtimberman: hrm, there was another cookbook that was used as a demo right? was it mysql?
[2012-10-02 19:22:11 -0400] mattray: jkyle: nope
[2012-10-02 19:22:34 -0400] jtimberman: so test-kitchen has the notion of "runtimes" that can be specified for a project, and it would use those through rvm. but for cookbooks, you probably don't care, especially if you're using our base boxes which use omnibus which have one ruby
[2012-10-02 19:22:38 -0400] jtimberman: jmartin: yeah
[2012-10-02 19:22:43 -0400] jkyle: basically, I'd like to do the equivalent of this: foo = `command --bar`
[2012-10-02 19:22:50 -0400] jtimberman: jmartin: there's several other cookbooks that have test-kitchen support
[2012-10-02 19:22:57 -0400] jtimberman: like, 27 of them total now.
[2012-10-02 19:22:59 -0400] jkyle: can I do that in a chef recipe...seem to recall it not working
[2012-10-02 19:23:11 -0400] jtimberman: jmartin: if you want a really simple example, check the zsh cookbook.
[2012-10-02 19:23:19 -0400] jtimberman: it has test kitchen and minitest chef tests
[2012-10-02 19:23:28 -0400] mattray: jkyle: you want to use the output of a command?
[2012-10-02 19:23:31 -0400] jmartin: jtimberman: ah nice, yeah i just wanted to see test-kitchen in action really
[2012-10-02 19:23:31 -0400] jtimberman: jkyle: use shell_out
[2012-10-02 19:23:38 -0400] jmartin: thanks
[2012-10-02 19:23:43 -0400] jtimberman: jmartin: yeah, like, grab the zsh cookbook from our github
[2012-10-02 19:23:46 -0400] cakehero: how can I remove chef-client?
[2012-10-02 19:23:49 -0400] jtimberman: github.com/opscode-cookbooks/zsh
[2012-10-02 19:23:50 -0400] cakehero: in a nice way
[2012-10-02 19:23:56 -0400] jtimberman: cakehero: how'd you install it?
[2012-10-02 19:24:03 -0400] cakehero: I didn't =/
[2012-10-02 19:24:06 -0400] jtimberman: !
[2012-10-02 19:24:07 -0400] cakehero: looks like it could be a package, sweet
[2012-10-02 19:24:17 -0400] cakehero: oh, the package isn't installed, heh
[2012-10-02 19:24:29 -0400] erikh: readlink /usr/bin/chef-client
[2012-10-02 19:24:39 -0400] jtimberman: there's several ways to install it. we recommend the full stack package called "omnibus" which is a native package for your distro and all its dependencies built together.
[2012-10-02 19:24:54 -0400] jtimberman: but someone could have installed it from our apt repository, a community rpm repo, or as a ruby gem
[2012-10-02 19:25:06 -0400] cakehero: readlink /usr/bin/chef-client <--- no results
[2012-10-02 19:25:22 -0400] cakehero:  /usr/bin/chef-client: a /usr/bin/ruby1.9.3-p0 script text executable
[2012-10-02 19:25:34 -0400] jkyle: searching the opscode docs for "shell_out" isn't turning anything up
[2012-10-02 19:25:42 -0400] erikh: oh, have fun with that.
[2012-10-02 19:26:34 -0400] geekbri: jkyle: my_command = Chef::ShellOut.new("somecommand --blah")
[2012-10-02 19:26:57 -0400] geekbri: jkyle: then you can my_command.run_command, and also after my_command.stdout and .stderr and .status
[2012-10-02 19:27:13 -0400] cakehero: erikh why?
[2012-10-02 19:27:17 -0400] cakehero: because it's super fun
[2012-10-02 19:27:41 -0400] jmartin: jtimberman: thoughts on my broad plan of git -> test-kitchen using jenkins to fire off test-kitchen on commits? my needs are fairly simple and im not sure if jenkins is overkill if im only testing cookbooks
[2012-10-02 19:28:03 -0400] jtimberman: jmartin: we do that :)
[2012-10-02 19:28:13 -0400] jkyle: got it
[2012-10-02 19:28:33 -0400] ranjibd_: jkyle, checkout mixlib-shellout rubygem/github documentation
[2012-10-02 19:28:40 -0400] jtimberman: cakehero: how was ruby installed in that system? is it a package? or was it installed from source, rbenv, rvm?
[2012-10-02 19:28:50 -0400] cakehero: source
[2012-10-02 19:28:51 -0400] jtimberman: it sounds like someone installed chef via rubygems
[2012-10-02 19:28:54 -0400] cakehero: 1.9.3 via source
[2012-10-02 19:29:00 -0400] cakehero: hmmm
[2012-10-02 19:29:05 -0400] jtimberman:  then probably /usr/bin/gem list chef
[2012-10-02 19:29:06 -0400] cakehero: i see chef but not chef-client via gems
[2012-10-02 19:29:09 -0400] jmartin: jtimberman: hah well its good to know it works at least :D im trying to learn chef/plan a transition and make it as 'idiot proof' as possible
[2012-10-02 19:29:21 -0400] jtimberman: the gem is chef, the binaries are chef-client chef-solo knife shef
[2012-10-02 19:29:31 -0400] jtimberman: jmartin: *nods*
[2012-10-02 19:29:34 -0400] cakehero: okay so
[2012-10-02 19:29:42 -0400] cakehero: how can I make sure chef-client doesn't startup
[2012-10-02 19:29:46 -0400] cakehero: (and just leave it installed)
[2012-10-02 19:29:53 -0400] poolpog: so, we moved one code-based configuration managed by chef from SVN to Git... can I seamlessly change the SVN resource to a Git resource and have it Just Work?
[2012-10-02 19:30:07 -0400] jmartin: cakehero: disable it in your init system?
[2012-10-02 19:30:10 -0400] jtimberman: cakehero: there's multiple ways to start chef-client as a service/daemon, so it depends
[2012-10-02 19:30:16 -0400] jtimberman: commonly it is an init script
[2012-10-02 19:30:20 -0400] poolpog: sorry, s/configuration/codebase/
[2012-10-02 19:30:31 -0400] jtimberman: it could be a runit, daemontools or bluepill service.
[2012-10-02 19:30:42 -0400] cakehero: okay, I think it starts on boot so probably init.d ?
[2012-10-02 19:30:50 -0400] cakehero: chkconfig is typically what i use but it's not installed on this server
[2012-10-02 19:30:58 -0400] jtimberman: poolpog: you may need to change specific resource attributes in the resource.
[2012-10-02 19:31:11 -0400] jtimberman: poolpog: like the URL, or the revision to check out
[2012-10-02 19:31:13 -0400] jmartin: cakehero: then it likely isnt running automatically
[2012-10-02 19:31:17 -0400] poolpog: yep, got it
[2012-10-02 19:31:23 -0400] cakehero: I started a machine and it started up
[2012-10-02 19:31:29 -0400] jmartin: cakehero: check for maybe cronjob?
[2012-10-02 19:31:33 -0400] cakehero: no cron
[2012-10-02 19:31:48 -0400] jmartin: cakehero: wait, did you mean that chkconfig isnt on the server
[2012-10-02 19:31:57 -0400] cakehero: ya'll: http://cl.ly/image/1Z3m1C1q120i
[2012-10-02 19:32:01 -0400] jmartin: or that chef-client isnt in chkconfing --list
[2012-10-02 19:32:06 -0400] cakehero: jmartin 'chkconfig' returns "package chkconfig isn't installed"
[2012-10-02 19:32:09 -0400] jhayden: quick question:
[2012-10-02 19:32:16 -0400] cakehero: quicker answer: yes
[2012-10-02 19:32:27 -0400] jhayden: I am using was ruby sdk and chef to build app stacks
[2012-10-02 19:33:06 -0400] jmartin: cakehero: what OS is this?
[2012-10-02 19:33:09 -0400] jhayden: is there a way to pass information from my ruby scripts to a ciikbook, so that it can be put in a config file of the app?
[2012-10-02 19:33:13 -0400] cakehero: lucid (ubuntu 10.04)
[2012-10-02 19:33:31 -0400] jmartin: not a ubuntu man myself, but i believe it uses runit?
[2012-10-02 19:34:03 -0400] erikh: no, by default it uses upstart and normal sysv init.
[2012-10-02 19:34:18 -0400] erikh: check for a file named 'chef-client' in /etc/init and /etc/init.d
[2012-10-02 19:34:23 -0400] cakehero: chef-client is in init.d
[2012-10-02 19:34:27 -0400] jhayden: that would be cookbook
[2012-10-02 19:34:51 -0400] erikh: update-rc.d -f chef-client remove IIRC
[2012-10-02 19:34:56 -0400] erikh: (as root)
[2012-10-02 19:35:17 -0400] cakehero: awesome
[2012-10-02 19:35:26 -0400] erikh: you did shut it down first, I presume
[2012-10-02 19:35:38 -0400] cakehero: yep
[2012-10-02 19:36:22 -0400] cakehero: erikh http://cl.ly/image/2Z111B3S2r22 <---
[2012-10-02 19:36:24 -0400] cakehero: awesome
[2012-10-02 19:36:45 -0400] jmartin: jtimberman: regarding test-kitchen and running the vagrant tests in parallel, is it a matter of the reporting back of results not supporting running in parallel or something else that im not understanding?
[2012-10-02 19:38:36 -0400] cakehero: so 100% of all systems with chef gem installed also have chef-client running by default?
[2012-10-02 19:39:32 -0400] erikh: no. you need to bootstrap it
[2012-10-02 19:39:35 -0400] erikh: have you seen the chef wiki?
[2012-10-02 19:46:17 -0400] cakehero: okay, so the last guy must have done that
[2012-10-02 19:57:19 -0400] jwitrick: any opscode guys in the room that can point me to any documentation for 'node.transform' ?
[2012-10-02 20:00:30 -0400] jtimberman: jmartin: it doesn't run in parallel
[2012-10-02 20:00:42 -0400] jtimberman: jwitrick: its in the shef built in help
[2012-10-02 20:01:05 -0400] jmartin: jtimberman: right, but i was trying to get at if there was a reason it couldnt in the future
[2012-10-02 20:01:36 -0400] jwitrick: jtimberman: thanks
[2012-10-02 20:01:39 -0400] JasonF: jwitrick: Are you who I think you are? RSE team?
[2012-10-02 20:01:47 -0400] jwitrick: :)
[2012-10-02 20:01:52 -0400] jtimberman: jmartin: dunno, other than "reading output from parallelized processes is really hard to tell whats going on"
[2012-10-02 20:03:30 -0400] jmartin: jtimberman: as in human readability? because each test is discrete anyway so as long as you can receive said output and tag it in an organized manner, spitting out the data wouldnt be too crazy difficult i assume
[2012-10-02 20:04:43 -0400] jhayden: is it possible to create a node attribute from within an aws ruby sdk?
[2012-10-02 20:11:04 -0400] poolpog: comments? hash?
[2012-10-02 20:11:07 -0400] poolpog: hm
[2012-10-02 20:11:07 -0400] poolpog: duh
[2012-10-02 20:11:09 -0400] poolpog: ruby
[2012-10-02 20:11:10 -0400] poolpog: never mind
[2012-10-02 20:12:45 -0400] mvisich: is there a way in a recipie to drop a folder like a cookbook_file ?
[2012-10-02 20:14:02 -0400] yfeldblum: mvisich, remote_directory
[2012-10-02 20:14:17 -0400] yfeldblum: mvisich, http://wiki.opscode.com/display/chef/Resources#Resources-RemoteDirectory
[2012-10-02 20:14:24 -0400] mvisich: that will work even with a local source?
[2012-10-02 20:14:44 -0400] yfeldblum: mvisich, thought you were asking "like cookbook_file"
[2012-10-02 20:14:54 -0400] yfeldblum: mvisich, with a local source, shouldn't "cp -r" work?
[2012-10-02 20:15:07 -0400] yfeldblum: mvisich, or FileUtils.cp_r in ruby
[2012-10-02 20:16:21 -0400] mvisich: I mean to say. The source file is in the file/default/folder dir of the cookbook. Can I use that as the "source" in remote_directory
[2012-10-02 20:19:07 -0400] yfeldblum: mvisich, yes
[2012-10-02 20:19:33 -0400] mvisich: awesome thanks
[2012-10-02 20:23:06 -0400] poolpog: does an "upgrade" method on a package *install* the package if it isn't already installed?
[2012-10-02 20:26:53 -0400] yfeldblum: poolpog, maybe (test it and see!) but most people will just use the line `action [:install, :upgrade]` instead of the line `action :upgrade`
[2012-10-02 20:27:07 -0400] poolpog: ok, very helpful, thanks
[2012-10-02 20:27:52 -0400] yfeldblum: poolpog, the key to remember is that each action will only be performed if chef detects that it needs to be performed; e.g., chef will only attempt to install a package if you have the :install action set and if the package isn't currently installed
[2012-10-02 20:28:15 -0400] syphon: when I run 'private-chef-ctl reconfigure', which .rb configuration file does it use? I'm having difficulty finding it
[2012-10-02 20:28:28 -0400] poolpog: i like the proper use of "e.g."
[2012-10-02 20:29:55 -0400] yfeldblum: poolpog, that's my style
[2012-10-02 20:30:09 -0400] jmartin: he is no i.e. abuser
[2012-10-02 20:30:22 -0400] poolpog: my biggest problem with chef is my complete lack of Ruby experience
[2012-10-02 20:30:35 -0400] poolpog: actually, not my biggest problem, just one of the top five
[2012-10-02 20:31:59 -0400] poolpog: unforutnately, although chef will work for config management of most any platform, there are a lot of ruby/ROR idioms and assumptions made in its design/architechture, and in its documentation
[2012-10-02 20:32:18 -0400] poolpog: I'm just venting, so i apologize
[2012-10-02 20:33:18 -0400] yfeldblum: poolpog, happily enough, i'm familiar with them all
[2012-10-02 20:33:32 -0400] yfeldblum: poolpog, or so it seems
[2012-10-02 20:33:40 -0400] poolpog: define "all"
[2012-10-02 20:34:16 -0400] yfeldblum: poolpog, http://dictionary.reference.com/browse/all
[2012-10-02 20:34:21 -0400] poolpog: lol
[2012-10-02 20:34:28 -0400] poolpog: pedantic, I like it
[2012-10-02 20:34:39 -0400] poolpog: lxk
[2012-10-02 20:34:40 -0400] poolpog: oops
[2012-10-02 20:34:44 -0400] yfeldblum: poolpog, anyway feel free to ask in here or PM me
[2012-10-02 20:34:51 -0400] poolpog: thanks
[2012-10-02 20:35:33 -0400] poolpog: but anyway, what did you mean by "familiar with them all"? all what? platforms? configuration engines? OSes? Scripting langs?
[2012-10-02 20:37:23 -0400] yfeldblum: poolpog, the "ruby/ROR idioms and assumptions"
[2012-10-02 20:37:51 -0400] poolpog: ok
[2012-10-02 20:38:00 -0400] poolpog: alas, I am not
[2012-10-02 20:38:52 -0400] yfeldblum: poolpog, many people who use chef or who hang in #chef aren't familiar with the rubyisms either
[2012-10-02 20:39:38 -0400] poolpog: thank goodness
[2012-10-02 20:41:40 -0400] dschultz: Hey all, I'm finding the output of minitest-chef-handler to be a little too verbose. I'm testing some recipes through Vagrant and when I run `vagrant provision` I get a series of "cookbook <NAME> has no directory files/default/tests/minitest/support". IIRC, the support directory is checked for helper libraries? I'm not using any...
[2012-10-02 20:42:39 -0400] leifmadsen: maybe it's just the end of the day, but shouldn't something like this work... ?
[2012-10-02 20:42:41 -0400] masterkorp: name => node.name
[2012-10-02 20:42:52 -0400] leifmadsen: if node['cloud']['provider'].nil?
[2012-10-02 20:43:01 -0400] masterkorp: is this correct if want the name to contain the node name ?
[2012-10-02 20:43:27 -0400] yfeldblum: leifmadsen, depends on what the goal is
[2012-10-02 20:43:47 -0400] leifmadsen: yfeldblum: well the recipe I'm using seems to be failing whenever I use that node attribute...
[2012-10-02 20:43:50 -0400] yfeldblum: masterkorp, that doesn't look like valid ruby
[2012-10-02 20:43:58 -0400] leifmadsen: undefined method `[]' for nil:NilClass
[2012-10-02 20:44:09 -0400] leifmadsen: is what I get when using that automatic attribute (chef 10.14.2)
[2012-10-02 20:44:17 -0400] yfeldblum: leifmadsen, that will happen if node["cloud"] is itself nil
[2012-10-02 20:44:35 -0400] _0x783czar: Can anyone explain to me the chef versioning convention?  From reading the wiki it seems like they jumped from 0.9.x to 10.x.x  This doesn't seem to make senes, I must be missing something.
[2012-10-02 20:44:37 -0400] yfeldblum: leifmadsen, because if node["cloud"] is nil, then nil["provider"] is asking ruby to do bad things
[2012-10-02 20:44:40 -0400] leifmadsen: ya, that's was my thought -- I'll maybe just check if node['cloud'] exists
[2012-10-02 20:44:44 -0400] masterkorp: yfeldblum: full example http://pastie.org/private/kuctvpo91n7wwp9p9evm6g
[2012-10-02 20:44:47 -0400] leifmadsen: yfeldblum: ya that makes sense
[2012-10-02 20:45:19 -0400] dschultz: I even went as far as to comment out the few lines of code in the minitest recipe, which helped truncate that output. I'd also like to know if there is a way to set verbose_logging to false in Vagrant. There is an option for chef.log_level, but apparently not chef.verbose_logging.
[2012-10-02 20:45:20 -0400] yfeldblum: leifmadsen, so just like in normal ruby code, what you have to do looks more like: `if node["cloud"] && node["cloud"]["provider"]`
[2012-10-02 20:45:57 -0400] yfeldblum: _0x783czar, opscode switched conventions between 0.10.10 and 0.10.12 (which became 10.12.0)
[2012-10-02 20:46:21 -0400] yfeldblum: _0x783czar, https://rubygems.org/gems/chef/versions
[2012-10-02 20:46:36 -0400] _0x783czar: yfeldblum: aaah, I thought that might be the case, thanks.
[2012-10-02 20:46:48 -0400] leifmadsen: just makes it easier to do point releases essentially
[2012-10-02 20:47:17 -0400] leifmadsen: it's amazing how many communities I've seen change version numbering methods lately (for perfectly sane reasons) and the number of people who kind of freak out :)
[2012-10-02 20:47:23 -0400] leifmadsen: _0x783czar: I'm not implying you're freaking out :D
[2012-10-02 20:47:51 -0400] leifmadsen: _0x783czar: http://www.opscode.com/blog/2012/06/19/chef-10-12-0-released/ as well
[2012-10-02 20:47:58 -0400] yfeldblum: masterkorp, ah that pastie looks like valid ruby
[2012-10-02 20:48:17 -0400] leifmadsen: yfeldblum: thanks btw
[2012-10-02 20:48:26 -0400] yfeldblum: leifmadsen, no probs
[2012-10-02 20:51:14 -0400] _0x783czar: leifmadsen: yeah that works.  I just kept wondering whether or not things in the docs that referred to 0.10.x applied to me.  I prefer the newer convention, as well.
[2012-10-02 20:51:53 -0400] leifmadsen: aye.. I just assume the 0. was dropped off the front ;)
[2012-10-02 20:51:56 -0400] leifmadsen: then it makes more sense
[2012-10-02 20:52:10 -0400] leifmadsen: 0.10.10 == 10.10 vs 10.12
[2012-10-02 20:52:23 -0400] masterkorp: yfeldblum: thanks man
[2012-10-02 20:56:54 -0400] poolpog: if a "directory" resource is mentioned in a recipe, with a full path, but no "do" block after, what does that do?
[2012-10-02 20:57:32 -0400] Rudd-XXX: hi guys
[2012-10-02 20:57:33 -0400] poolpog: it seems like it doesn't do anything
[2012-10-02 20:57:49 -0400] flaccid_: poolpog: check the default action in the wiki that will tell you
[2012-10-02 20:57:51 -0400] Rudd-XXX: how do I write a recipe that reads a file and reports that file back to the Chef server as a node attribute?
[2012-10-02 20:57:58 -0400] poolpog: flaccid_, how do I check that?
[2012-10-02 20:58:10 -0400] flaccid_: poolpog: a web browser
[2012-10-02 20:58:28 -0400] poolpog: no frikin duh
[2012-10-02 20:58:44 -0400] uompoll: Hi there. I'm going to start using Omnibus chef-client installation. And I'm using opensource ruby Chef-server 0.10.2 installed from gems using system ruby. What is the best way of upgrading my Chef server? /opt/embedded/ruby/gem install chef-server?
[2012-10-02 20:58:48 -0400] _0x783czar: Rudd-XXX: at what point will that file be created?
[2012-10-02 20:59:01 -0400] Rudd-XXX: _0x783czar, during the recipe run.  it's an ssh public key file
[2012-10-02 20:59:03 -0400] bluepojo: Rudd-XXX: You probably want an ohai plugin
[2012-10-02 20:59:14 -0400] Rudd-XXX: bluepojo, ohai runs too early
[2012-10-02 20:59:28 -0400] bluepojo: when is the file available, then?
[2012-10-02 20:59:40 -0400] Rudd-XXX: as i said, the file appears during the recipe run
[2012-10-02 20:59:52 -0400] bluepojo: make a ruby block to read the file and set the attribute then
[2012-10-02 20:59:55 -0400] bluepojo: block do
[2012-10-02 21:00:00 -0400] bluepojo:  # read file
[2012-10-02 21:00:06 -0400] poolpog: it looks like the default action is "create this directory" -- can anyone confirm that I'm reading that right? (without being a smartass about it)
[2012-10-02 21:00:08 -0400] bluepojo: node.set[soemthing] = 'something'
[2012-10-02 21:00:18 -0400] poolpog: http://wiki.opscode.com/display/chef/Resources#Resources-Directory
[2012-10-02 21:00:19 -0400] flaccid_: poolpog: correct
[2012-10-02 21:00:19 -0400] bluepojo: perhaps that'll work
[2012-10-02 21:00:20 -0400] yfeldblum: poolpog, it has the default attributes and default actions
[2012-10-02 21:00:23 -0400] bluepojo: just braingstorming
[2012-10-02 21:00:27 -0400] poolpog: thanks
[2012-10-02 21:00:27 -0400] bluepojo: and failing at typing
[2012-10-02 21:00:50 -0400] Rudd-XXX: how do I read a file?
[2012-10-02 21:00:58 -0400] Rudd-XXX: IO.read(path to file) ?
[2012-10-02 21:01:00 -0400] yfeldblum: Rudd-XXX, IO.read("/path/to/file")
[2012-10-02 21:01:06 -0400] Rudd-XXX: woohoo got it
[2012-10-02 21:01:29 -0400] Rudd-XXX: when does the block happen?
[2012-10-02 21:01:34 -0400] Rudd-XXX: that's all I need to do?
[2012-10-02 21:01:36 -0400] Rudd-XXX: let me try that
[2012-10-02 21:01:45 -0400] yfeldblum: poolpog, it's the same effect as declaring a directory resource with a block, but the block is empty
[2012-10-02 21:01:59 -0400] yfeldblum: Rudd-XXX, which block?
[2012-10-02 21:02:07 -0400] Rudd-XXX: the block IJ ust wrote
[2012-10-02 21:02:09 -0400] Rudd-XXX: block do ...
[2012-10-02 21:02:28 -0400] Rudd-XXX: seems like it is going to work
[2012-10-02 21:02:33 -0400] flaccid_: yeah, action :create is redundant
[2012-10-02 21:02:40 -0400] Rudd-XXX: NameError
[2012-10-02 21:02:40 -0400] Rudd-XXX: ---------
[2012-10-02 21:02:41 -0400] Rudd-XXX: Cannot find a resource for block on ubuntu version 12.04
[2012-10-02 21:02:41 -0400] poolpog: yfeldblum, thanks...
[2012-10-02 21:02:46 -0400] Rudd-XXX: tso that did not work
[2012-10-02 21:02:50 -0400] poolpog: now, another question abotu a Ruby idiom...
[2012-10-02 21:02:53 -0400] yfeldblum: Rudd-XXX, why do you need to do it inside a block?
[2012-10-02 21:03:01 -0400] Rudd-XXX: I was just told not 30 seconds ago to do it in a block
[2012-10-02 21:03:04 -0400] Rudd-XXX: right here
[2012-10-02 21:03:07 -0400] poolpog: hey! where is a good pastebin for this IRC room?
[2012-10-02 21:03:16 -0400] flaccid_: Rudd-XXX: may not be a good idea to listen to some people here hehe
[2012-10-02 21:03:16 -0400] _0x783czar: Rudd-XXX: the block occurs sequentially just the rest of the resources.  the "block do" is a function inside of the "ruby_block" resource
[2012-10-02 21:03:17 -0400] yfeldblum: Rudd-XXX, hmmm backscroll
[2012-10-02 21:03:25 -0400] Rudd-XXX: ahhh
[2012-10-02 21:03:29 -0400] Rudd-XXX: what a moron I am
[2012-10-02 21:03:30 -0400] Rudd-XXX: thanks
[2012-10-02 21:03:33 -0400] uompoll: Nobody knows?
[2012-10-02 21:03:43 -0400] flaccid_: nobody knows
[2012-10-02 21:04:09 -0400] yfeldblum: poolpog, just pick your favorite ... pastebin, pastie, gist, etc
[2012-10-02 21:04:31 -0400] poolpog: k
[2012-10-02 21:05:02 -0400] Rudd-XXX: how do I set a multi-level attribute?
[2012-10-02 21:05:06 -0400] poolpog: I have this SVN deploy resource... Im trying to switch it to Git
[2012-10-02 21:05:09 -0400] Rudd-XXX:     node.set["jenkins"]["ssh_key"] = contents
[2012-10-02 21:05:11 -0400] Rudd-XXX: does that work?
[2012-10-02 21:05:20 -0400] _0x783czar: Rudd-XXX: yes
[2012-10-02 21:05:22 -0400] poolpog: What does the
[2012-10-02 21:05:25 -0400] Rudd-XXX: thanks
[2012-10-02 21:05:28 -0400] poolpog: subversion 'shib config' do
[2012-10-02 21:05:31 -0400] poolpog: idiom do?
[2012-10-02 21:05:39 -0400] poolpog: the 'shib config' part, in particular
[2012-10-02 21:05:41 -0400] flaccid_: poolpog: also documented
[2012-10-02 21:06:02 -0400] poolpog: flaccid_, if I could clearly understand the docmuentation, I wouldn't ask here
[2012-10-02 21:06:18 -0400] poolpog: RTFM is not a good answer
[2012-10-02 21:06:20 -0400] yfeldblum: Rudd-XXX, via chef magic, yes
[2012-10-02 21:06:25 -0400] flaccid_: if you can't understand the docs, you are going to have a problem with using chef
[2012-10-02 21:06:32 -0400] Rudd-XXX: ok looks like its iong to work
[2012-10-02 21:06:34 -0400] poolpog: flaccid_, piss off
[2012-10-02 21:06:35 -0400] Rudd-XXX: it's magic!
[2012-10-02 21:06:37 -0400] flaccid_: poolpog: guess i'll find it for you then
[2012-10-02 21:06:50 -0400] _0x783czar: Rudd-XXX: yay
[2012-10-02 21:06:55 -0400] yfeldblum: poolpog, it's the name of the resource, which is used for exactly two purposes
[2012-10-02 21:06:55 -0400] poolpog: can anyone help me figure out *the Ruby idoms* that chef is based on?
[2012-10-02 21:07:07 -0400] poolpog: flaccid_, I have the page right here:
[2012-10-02 21:07:11 -0400] poolpog: http://wiki.opscode.com/display/chef/Deploy+Resource
[2012-10-02 21:07:20 -0400] poolpog: under, for example, "SCM Examples"
[2012-10-02 21:07:38 -0400] flaccid_: you may like to explain what you don't understand then
[2012-10-02 21:07:46 -0400] poolpog: first example, "grab_couchdb_from_svn" -- has    subversion "CouchDB Edge" do
[2012-10-02 21:07:49 -0400] yfeldblum: poolpog, 1) naming the resource in the list of resources declared in the whole chef-client run ... the chef-client run maintains a giant list of resources that are declared in all recipes, and resources are unique by a combination of type (in this case "subversion") and name (in this case "shib config")
[2012-10-02 21:08:11 -0400] poolpog: is the thing in uqotes treated liek a single thing, or two separate things? does Ruby iterate over both in the block?
[2012-10-02 21:08:29 -0400] yfeldblum: poolpog, at any point, you can look up resources with, e.g., `r = resources(:subversion => "shib config")`
[2012-10-02 21:08:33 -0400] z: poolpog: its just a helpful name, it means very little
[2012-10-02 21:08:43 -0400] poolpog: z thank you
[2012-10-02 21:08:50 -0400] z: poolpog: its treated as a string, and primarily used in a referential context
[2012-10-02 21:09:01 -0400] z: poolpog: in other Resources such as Directory, it matters more
[2012-10-02 21:09:13 -0400] yfeldblum: poolpog, the second thing it's used for is if there is a certain resource attribute that gets its default value from the resource name ... such attributes are called "name attributes" because their default values come from the resource name
[2012-10-02 21:09:27 -0400] poolpog: that's very helpful, thanks -- it is very confusing to see that there, and it appears arbitrary sometimes,  but clearly not arbitrary other times
[2012-10-02 21:09:28 -0400] z: yfeldblum: ^ thats a far more eloquent way of describing what I was trying to convey.
[2012-10-02 21:09:51 -0400] yfeldblum: poolpog, so you can do `directory "/path/to/dir"` or you can do `directory "lalallalalalala" do ; path "/path/to/dir" ; end`
[2012-10-02 21:10:02 -0400] poolpog: i see
[2012-10-02 21:10:15 -0400] poolpog: but obviously the second one would be stupid/unhelpful
[2012-10-02 21:10:23 -0400] poolpog: thanks
[2012-10-02 21:10:35 -0400] yfeldblum: poolpog, in the first case the resource has type "directory" and name "/path/to/dir" and path attribute "/path/to/dir", and in the second case the resource has type "directory" and name "lalalalalala" and path attribute "/path/to/dir"
[2012-10-02 21:10:36 -0400] flaccid_: yeah and ou rarely need to do that kind of thing but its a good example. sometimes you do that kind of thing with the log resource to do notifications because the resource name is the log message itself
[2012-10-02 21:11:14 -0400] z: flaccid_: Yeah that I find hugely helpful, although I still end up with a lot of Chef::Log.warn("") and Chef::Log.error("") about the place to augment it
[2012-10-02 21:11:27 -0400] poolpog: so the name gets into the resource automagically via chef, not via ruby, per se?
[2012-10-02 21:11:46 -0400] yfeldblum: poolpog, it's important to make sure that the resources you declare in your recipes (and in all recipes that you include in a given chef-client run) are unique by a combination of type and name, and so you may sometimes need to fiddle with the name in certain edge cases
[2012-10-02 21:11:47 -0400] z: poolpog: directory "foo" do  << this is defining a resource, which is an object
[2012-10-02 21:11:49 -0400] _0x783czar: poolpog: sometimes you want to give resources a more specific name than just the path.
[2012-10-02 21:11:53 -0400] yfeldblum: poolpog, it's normal ruby
[2012-10-02 21:12:02 -0400] flaccid_: there should be some best practices defined around logging imho
[2012-10-02 21:12:08 -0400] z: Object -> Resource -> "foo"
[2012-10-02 21:12:21 -0400] flaccid_: if you give shef a go, its going to show the object created which may help in understanding
[2012-10-02 21:12:49 -0400] z: flaccid_: most of my recipes follow a similar pattern, I have been seriously debating codifying that via Foodcritic so when other engineers at $job[0] touch cookbooks it stays the same stylistically
[2012-10-02 21:12:54 -0400] yfeldblum: poolpog, it's also useful when e.g. a package is named "libabcdef" on one OS and "libabcdef1" on another OS; you can declare one package resource but inside the package resource declaration you can set the package_name attribute depending on the platform
[2012-10-02 21:13:09 -0400] poolpog: hmmm
[2012-10-02 21:13:15 -0400] flaccid_: z: need some global standardization here
[2012-10-02 21:13:23 -0400] z: flaccid_: yeah good luck with that :)
[2012-10-02 21:13:31 -0400] flaccid_: hehe, im not taking that mission on !
[2012-10-02 21:13:58 -0400] yfeldblum: poolpog, `package "libabcdef" do ; package_name "libabcdef1" if platform?("ubuntu") ; end`
[2012-10-02 21:14:06 -0400] z: flaccid_: I don't think you'll find Opscode taking it on either, the message from very early on has been that they can provide *guidance* but that part of the appeal of Chef is there are 9-10 ways to achieve everything
[2012-10-02 21:14:20 -0400] flaccid_: thats the ruby conundrum
[2012-10-02 21:14:21 -0400] z: flaccid_: and folks essentially need to pick that which they are most comfortable with
[2012-10-02 21:14:44 -0400] flaccid_: well the good thing is that beautiful code is obvious
[2012-10-02 21:15:04 -0400] z: the fact that 70% of the approaches are equiv to pointing a loaded sawn-off shotgun at your nuts and making chef-client the trigger is.. unfortunate :)
[2012-10-02 21:15:19 -0400] yfeldblum: poolpog, as a simple example
[2012-10-02 21:15:36 -0400] flaccid_: lol
[2012-10-02 21:16:01 -0400] JasonF: z: it's like pointing a sawed off shotgun at the person who (replaces you|is hired to help you) 6 months later.
[2012-10-02 21:16:25 -0400] z: JasonF: https://github.com/etsy/foodcritic-rules << stuff like that helps
[2012-10-02 21:16:27 -0400] yfeldblum: flaccid_, i'd go with Chef::Log.info over the log resource most of the time
[2012-10-02 21:18:09 -0400] z: ignoring the fact this whole cookbook is a bit of a bodge and needs a clean-up, its an example
[2012-10-02 21:18:10 -0400] poolpog: thanks, folks...
[2012-10-02 21:18:12 -0400] z: https://github.com/agh-cookbooks/sabnzbd/blob/master/recipes/default.rb#L90
[2012-10-02 21:18:18 -0400] poolpog: I'll be back tomorrow with moah questions
[2012-10-02 21:18:36 -0400] flaccid_: yfeldblum: any particular reason?
[2012-10-02 21:19:37 -0400] yfeldblum: flaccid_, most times that you want to log something, it's because you computed a value or you detected an edge case and you want to let someone know about it, and those things typically happen in-line in the ruby computations ("at compile time")
[2012-10-02 21:20:15 -0400] z: yfeldblum: I would love Chef::Log to be more specific about *where* it was called from in terms of resource
[2012-10-02 21:20:21 -0400] yfeldblum: flaccid_, the log resource is good if you want to demarcate the beginning of a sequence of six resources that go together
[2012-10-02 21:20:36 -0400] yfeldblum: z, log the caller?
[2012-10-02 21:20:46 -0400] z: yfeldblum: yeah
[2012-10-02 21:20:59 -0400] z: yfeldblum: I end up doing 'Chef::Log.warn("sabnzbd::service >> unable to determine ' far too often
[2012-10-02 21:21:20 -0400] z: to tell me later it happened in sabnzbd::service
[2012-10-02 21:21:21 -0400] yfeldblum: z, Chef::Log.info("hi there from\n#{caller(0).lines.to_a.join("\n")}")
[2012-10-02 21:21:33 -0400] z: cute
[2012-10-02 21:21:55 -0400] yfeldblum: z, sorry
[2012-10-02 21:21:59 -0400] yfeldblum: z, Chef::Log.info("hi there from\n#{caller(0).join("\n")}")
[2012-10-02 21:22:07 -0400] z: I guess what I was more saying is it would be *nice* if it used caller(0) as default
[2012-10-02 21:22:16 -0400] flaccid_: yfeldblum: interesting hmm
[2012-10-02 21:22:16 -0400] yfeldblum: z, no need for .lines.to_a because it's already an array
[2012-10-02 21:22:48 -0400] yfeldblum: z, make a lib method called "log_with_caller" :D
[2012-10-02 21:23:54 -0400] yfeldblum: z, https://github.com/applicationsonline/librarian/blob/master/lib/librarian/logger.rb#L21-33
[2012-10-02 21:25:32 -0400] flaccid_: librarian ftw
[2012-10-02 21:32:53 -0400] Mad-D: hello
[2012-10-02 21:33:11 -0400] Mad-D: can anyone suggest me where to ask chef related questions ?
[2012-10-02 21:34:02 -0400] josephholsten: Mad-D: here. don't ask to ask! :-)
[2012-10-02 21:34:38 -0400] josephholsten: Has anyone got managed to get test-kitchen actually running within bundler?
[2012-10-02 21:35:03 -0400] josephholsten: I keep getting inconsistencies between its dependencies
[2012-10-02 21:35:49 -0400] josephholsten:  /Users/josephholsten/.rbenv/versions/2.0.0-dev/lib/ruby/2.0.0/rubygems/specification.rb:1637:in `raise_if_conflicts': Unable to activate vagrant-1.0.5, because net-ssh-2.1.4 conflicts with net-ssh (~> 2.2.2), json-1.6.1 conflicts with json (~> 1.5.1) (Gem::LoadError)
[2012-10-02 21:36:51 -0400] Mad-D: josephholsten : i didn't see any discussions instead people are just signning in or out. anyways I am new to chef world and i am interested in configuring knife on my local machine ( windows ) and configure chef server ( may be on ubuntu / linux ) and try to follow chef pattern to automate zabbix installations.
[2012-10-02 21:37:40 -0400] Mad-D: I didn't find any doc's related to configurations and stuff
[2012-10-02 21:38:03 -0400] josephholsten: oh my. I have no experience getting knife running from scratch on windows. Do you have ruby installed?
[2012-10-02 21:38:20 -0400] Mad-D: nope!
[2012-10-02 21:38:43 -0400] Mad-D: i am just getting out of opscode doc's and trying to explore everything
[2012-10-02 21:38:44 -0400] josephholsten: mmkay
[2012-10-02 21:39:03 -0400] josephholsten: do you have a chef server running currently
[2012-10-02 21:39:05 -0400] josephholsten: ?
[2012-10-02 21:39:19 -0400] rep0st: has anybody used chef to spin up VMs without dhcp?
[2012-10-02 21:40:00 -0400] josephholsten: rep0st: chef doesn't really spin up VMs itself, are you using knife bootstrap?
[2012-10-02 21:40:19 -0400] Mad-D: yes and no, i.e we have some chef stuff going on but i don't have access. So i have 2 virtual machines ( linux ). So i was wondering to start everything by my own so i can understand
[2012-10-02 21:41:16 -0400] rep0st: josephholsten: well im using knife bootstrap but i'm trying to figure out how to get to my VMs that haven't been assigned IPs yet.
[2012-10-02 21:41:53 -0400] rep0st: josephholsten: trying to figure out a sneaky way of doing it without using DHCP and rdns
[2012-10-02 21:42:18 -0400] josephholsten: rep0st: that's a neat trick. I'd love to hear how that works.
[2012-10-02 21:42:42 -0400] rep0st: josephholsten: lol yea i know. just trying to be as lazy as i can be
[2012-10-02 21:43:35 -0400] josephholsten: well I'm pretty sure most knife bootstrap scripts are built on fog (of fog.io)
[2012-10-02 21:44:24 -0400] josephholsten:  you might see if that supports what you're looking for
[2012-10-02 21:45:53 -0400] Mad-D:  <josephholsten> : where do i look for these configuration docs so i can work-around ?
[2012-10-02 22:38:16 -0400] sisooks: Hi y'all... anyone around that could help me with the python cookbook? Specifically I'd like to install python 2.7 instead of default on a Ubuntu Lucid VM.
[2012-10-02 22:38:32 -0400] bluepojo: what problems are you having with the python cookbook?
[2012-10-02 22:40:08 -0400] sisooks: @bluepojo I'm not sure if I am exactly just want to eliminate it as potential problem.... I'm using default['python']['install_method'] = 'source' then among other attributes: default['python']['version'] = '2.7.1'
[2012-10-02 22:41:05 -0400] sisooks: but when I install web.py, i'm having problems when I try to "import web" and not sure if they're talking to each other nicely.
[2012-10-02 22:41:30 -0400] sisooks: i know this is vague, excuse me in advance... trying to work it out
[2012-10-02 22:41:37 -0400] bluepojo: if you ssh to the box do you find that python is not installed properly?
[2012-10-02 22:41:49 -0400] bluepojo: after the chef run
[2012-10-02 22:41:53 -0400] bluepojo: or are you getting errors?
[2012-10-02 22:42:40 -0400] sisooks: it's there in my virtualenv and when i run the interpreter it's the right version
[2012-10-02 22:42:58 -0400] sisooks: so now I think it's more on the web.py / wsgi side of things
[2012-10-02 23:16:28 -0400] masterkorp: Does node.name outputs the fqdn ?
[2012-10-02 23:19:24 -0400] jkyle: how would I include a provider from another cookbook?
[2012-10-02 23:19:29 -0400] jkyle: resource that is
[2012-10-02 23:20:18 -0400] bluepojo: masterkorp: You can use Chef::Log.info node.name to see what exactly it outputs
[2012-10-02 23:20:35 -0400] bluepojo: that's a useful thing to know for when you need to see anything during a chef run
[2012-10-02 23:20:48 -0400] bluepojo: there's also a log resource if you want something to log during convergence rather than compile time
[2012-10-02 23:25:43 -0400] wdpro_kevin: is there a way to set a variable/attribute in a recipe based on the result of an execute command?
[2012-10-02 23:26:09 -0400] wdpro_kevin: I want to check the ulimt of the server and not run the execute if matched my threshold
[2012-10-02 23:28:51 -0400] wdpro_kevin: hmmm ulimit may already be a part of the node object

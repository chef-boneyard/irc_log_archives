[2012-10-22 00:00:02 -0400] julien: coderanger: my biggest trouble is that I can't seem to be able to run the before_migration callback
[2012-10-22 00:00:49 -0400] coderanger: pastebin?
[2012-10-22 00:02:38 -0400] julien: coderanger:  sure: http://pastebin.com/L0U8czza
[2012-10-22 00:03:38 -0400] julien: the before_migrate is never called it seems :/
[2012-10-22 00:03:43 -0400] coderanger: Ahh, if you are just using the base app resource and not writing strategy plugins it is basically the same as the built-in deploy resource
[2012-10-22 00:04:20 -0400] coderanger: Have you updated the cookbook lately? I remember seeing a patch for something that broke recently
[2012-10-22 00:04:51 -0400] coderanger: https://github.com/opscode-cookbooks/application/pull/20
[2012-10-22 00:05:06 -0400] coderanger: Looks like it hasn't been merged yet, so either pull from his upstream or patch locally
[2012-10-22 00:05:33 -0400] coderanger: Looks like it was changed in 10.14
[2012-10-22 00:05:37 -0400] julien: coderanger: hum.I wanted to started by buillding from the app resource and then 'abstract' into a custom LWRP.
[2012-10-22 00:05:57 -0400] julien: code ranger arggg. Not sure I can update our chef like that :/
[2012-10-22 00:06:57 -0400] julien: coderanger : how would you do the application_node then?
[2012-10-22 00:07:20 -0400] coderanger: julien: Well doing what you are now is fine, it is just there is a bug in the app cookbook on the latest chef release
[2012-10-22 00:07:31 -0400] coderanger: it will be patched soon, jtimberman just hasn't gotten to it yet
[2012-10-22 00:07:48 -0400] julien: code ranger that is quite annoying :/
[2012-10-22 00:08:53 -0400] coderanger: It happens from time to time, Josh has been pretty overloaded prepping for the upcoming community summit I know, and we had a big burt of open stack stuffs from that conference
[2012-10-22 00:10:12 -0400] coderanger: We send out emails a few times a week showing what pull requests have been merged, so you can always just watch that
[2012-10-22 00:10:23 -0400] julien: coderanger not blaming here :) I know you guys rock! and it's specially amazing that I'm able to find some support at 5PM on a sunday anyway! I'm trying to find my way around it. I guess for now that'll be a manual thing :(
[2012-10-22 01:02:36 -0400] jaimef: Library Providers Resources Attributes Definitions Recipes: so is this to say that values set in a recipe would override stuff defined in resources? where would roles fall into this context?
[2012-10-22 01:14:03 -0400] cwj: i wish i did not have to resort to distributing my own build of this dude's ruby gem in order to make it work with my chef cookbook, all because of his strict gem dependency versioning
[2012-10-22 01:40:44 -0400] yfeldblum: cwj, but which would you prefer as a general case? (a) most people do a good job of gem dependency versioning most of the time, or (b) most people just don't bother with it very much?
[2012-10-22 01:41:19 -0400] cwj: yeah its a complicated world
[2012-10-22 02:21:58 -0400] yfeldblum: jaimef, not sure what the question is
[2012-10-22 02:31:35 -0400] hoover_damm: yfeldblum, jaimef wanted to know where roles fall into loading attributes between libraries (shouldn't set attributes, if you do derp).. Providers (resources should do this no?) ... Resources, Attributes...
[2012-10-22 02:31:41 -0400] hoover_damm: and then lastly definition sand recipes
[2012-10-22 02:32:08 -0400] hoover_damm: and honestly the answer pretty much is on http://wiki.opscode.com/display/chef/Attributes
[2012-10-22 02:32:18 -0400] yfeldblum: cool
[2012-10-22 02:32:20 -0400] hoover_damm: there is deep merge but
[2012-10-22 02:33:18 -0400] hoover_damm: i'm sure there's a deeper desire for information there but if you look at chef as a model.. some of that extra questioning can be ignored
[2012-10-22 02:33:21 -0400] hoover_damm: :)
[2012-10-22 05:21:16 -0400] jroberts235: Can someone help me figure out why knife bootstrap doesn't find my validation.pem in my chef-repo/.chef dir when it does in fact exist there. Here is the error and some output:  http://paste2.org/p/2365420   (Chef: 10.14.4 running on osx 10.8.2)   Thanks in advance.
[2012-10-22 05:21:47 -0400] jroberts235: I forgot to say that the proper location is set in the knife.rb file
[2012-10-22 05:24:15 -0400] coderanger: jroberts235: That isn't a path
[2012-10-22 05:24:30 -0400] coderanger: ~ is something bash expands, but it isn't a valid path like that
[2012-10-22 05:24:48 -0400] coderanger: run it through ::File.expand_path to get the real verson :)
[2012-10-22 05:24:57 -0400] jroberts235: Ahhh!
[2012-10-22 05:25:09 -0400] jroberts235: let me try that.
[2012-10-22 05:25:33 -0400] coderanger: Or in the context of a command line arg, just hit tab so bash expands it
[2012-10-22 05:25:39 -0400] BryanWB__: ohai chefs!
[2012-10-22 05:26:36 -0400] coderanger: BryanWB__: If you get on a plane now you could still get here in time!
[2012-10-22 05:26:42 -0400] coderanger: Dooooo eeeeet
[2012-10-22 05:26:43 -0400] BryanWB__: coderanger:  i wish :(
[2012-10-22 05:26:52 -0400] coderanger: You will be missed :(
[2012-10-22 05:26:53 -0400] BryanWB__: nooo monnneey :(
[2012-10-22 05:26:59 -0400] BryanWB__: and i miss u guys!
[2012-10-22 05:27:07 -0400] jroberts235: coderanger:  Thanks, that was killing me.
[2012-10-22 05:27:22 -0400] coderanger: jroberts235: Really we should be expand_path'ing on any path options
[2012-10-22 05:27:26 -0400] coderanger: Want to file a bug report?
[2012-10-22 05:27:44 -0400] jroberts235: sure.
[2012-10-22 05:27:45 -0400] coderanger: Its easy to forget about, but comes up pretty often
[2012-10-22 05:28:03 -0400] jroberts235: you guys at the summit?  It might actually get addressed this week.
[2012-10-22 05:28:05 -0400] jroberts235: ;)
[2012-10-22 05:28:26 -0400] coderanger: jroberts235: Yahr, sitting at the office right now actually :)
[2012-10-22 05:29:48 -0400] jroberts235: I just took the chef prep class in S.F. with Aaron. You know him?
[2012-10-22 05:31:22 -0400] coderanger: Heh, I do indeed, I live down near San Jose
[2012-10-22 05:32:10 -0400] jroberts235: great guy!  Taught me a helluva lot in 3 days.
[2012-10-22 05:32:36 -0400] coderanger: Yep, he'll be up here for the summit :)
[2012-10-22 05:32:53 -0400] coderanger: Kind of sad how much more I see him in Seattle given he only lives like 20 minutes from me
[2012-10-22 05:32:57 -0400] jroberts235: I'll probably be here a lot over the next few weeks while I deploy chef for my company.
[2012-10-22 05:34:22 -0400] jroberts235: I am going to try to get him to stop by our office when he is down here (L.A.) in a couple of weeks to check out our implementation.
[2012-10-22 05:35:49 -0400] jroberts235: ok.  I just had to get that working before calling it a day  Thanks again, and have a good week at the summit.
[2012-10-22 05:35:59 -0400] coderanger: Lat0rz
[2012-10-22 08:32:19 -0400] mosez_: hi
[2012-10-22 08:32:52 -0400] mosez_: how can i check within a recipe if another recipe is already loaded? i need to check within my webserver recipe if php is included...
[2012-10-22 08:35:30 -0400] cwj: node.recipes will give you a list of all the recipes in the node's expanded run list as an array
[2012-10-22 08:37:22 -0400] mosez_: now i found this and it seems to work :) http://tickets.opscode.com/browse/CHEF-1587?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel
[2012-10-22 08:37:52 -0400] mosez_: ok, now my nginx and php-fpm recipes work :D
[2012-10-22 08:38:14 -0400] mosez_: now i can integrate puma for my rails apps 8)
[2012-10-22 09:00:39 -0400] mosez_: hm, is there a specific function to get the lib path of an installed gem?
[2012-10-22 09:02:01 -0400] mosez_: Gem::Specification.find_by_name("gemname").gem_dir seems to be the way, right?
[2012-10-22 09:58:31 -0400] flaccid: mosez_: afaik that would be it yes
[2012-10-22 10:19:13 -0400] tommy_e: hey guys, anyone using the database cookbook? I'm trying to install zabbix via the site cookbook, but it depends on "database", which in turn fails with "LoadError: cannot load such file -- mysql" ... I installed the mysql gem, to no avail
[2012-10-22 10:21:32 -0400] tommy_e: trace is: /var/chef/cache/cookbooks/database/libraries/provider_database_mysql.rb:29:in `load_current_resource'  - and that line is require 'mysql'
[2012-10-22 10:22:20 -0400] flaccid: tommy_e: that may be related to a change in this stuff, but you should be able rectify by using chef_gem "mysql" early
[2012-10-22 10:23:57 -0400] tommy_e: flaccid, thanks a lot, that helped :)
[2012-10-22 10:24:54 -0400] flaccid: coolio
[2012-10-22 10:45:35 -0400] Lunar_Lamp: I'm trying to install a new chef server, using the opscode ubuntu repository, but it looks like there is something wrong with the libyajl-ruby package.  Apt/dpkg gives the following error:
[2012-10-22 10:45:39 -0400] Lunar_Lamp: trying to overwrite '/usr/lib/ruby/vendor_ruby/yajl/deflate.rb', which is also in package ruby-yajl 1.1.0-1
[2012-10-22 12:05:31 -0400] masterkorp: http://community.opscode.com/cookbooks/icinga
[2012-10-22 12:05:39 -0400] masterkorp: Guys can you remove this ?
[2012-10-22 12:05:44 -0400] masterkorp: it goes anywhere
[2012-10-22 12:29:07 -0400] maxmanders: I'm trying to execute() a command on a Windows client. My command includes a path, e.g. C:\Program Files\... I've tried wrapping the path in single quotes, and backslash escaped double quotes, but they seem to get stripped out when passed to the shell.  Am I missing something obvious?
[2012-10-22 13:22:52 -0400] grahamk: Hi, I'm a new user of chef, trying to install chef server on Ubuntu 11.04, using the instructions at http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages .
[2012-10-22 13:23:45 -0400] grahamk: configuration hangs at the "Configuring chef-server-webui" screen, which clearly expects a new password to be entered, but offers nowhere to do so.  Any ideas?
[2012-10-22 13:46:21 -0400] rayrod2030: Anyone use this S3 resource? https://gist.github.com/1351043
[2012-10-22 13:47:59 -0400] ohookins: not sure if i'm understanding the docs correctly - are ALL attribute files in a cookbook read and used for any given recipe in that cookbook?
[2012-10-22 13:49:14 -0400] till__: what could be a reason that my attributes/default.rb is not read?
[2012-10-22 13:58:23 -0400] tknerr: ohai chefs
[2012-10-22 13:59:04 -0400] tknerr: did anyone succeed in running the postgresql cookbook on  ubuntu 12.04 under omnibus install?
[2012-10-22 13:59:09 -0400] dyer: Pretty excited about tomorrow !!!
[2012-10-22 13:59:59 -0400] tknerr: i'm running into this: http://tickets.opscode.com/browse/COOK-1406
[2012-10-22 14:00:15 -0400] geekbri: I am super sad I could not attend the opscode community summit
[2012-10-22 14:01:18 -0400] makerbreakr: tknerr, i did
[2012-10-22 14:01:47 -0400] tknerr: makerbreakr: yeah! neat! :-)
[2012-10-22 14:01:52 -0400] makerbreakr: I had to force an apt-get update
[2012-10-22 14:01:55 -0400] makerbreakr: before I ran it
[2012-10-22 14:02:12 -0400] tknerr: ok, that i'm doing as well
[2012-10-22 14:02:23 -0400] makerbreakr: you know what I take that back
[2012-10-22 14:02:32 -0400] makerbreakr: I had to remove the ruby recipe completely
[2012-10-22 14:02:33 -0400] rayrod2030: anyone talking to non-public s3 buckets from their chef recipes?
[2012-10-22 14:03:40 -0400] tknerr: makerbreakr: haven't tried the postresql::ruby recipe, but the postgresql::server recipe
[2012-10-22 14:03:58 -0400] tknerr: makerbreakr: so did you get it to work finally?
[2012-10-22 14:04:05 -0400] makerbreakr: yes
[2012-10-22 14:04:17 -0400] makerbreakr: one sec
[2012-10-22 14:05:00 -0400] makerbreakr: tknerr, this is hwo i had to load the recipes though https://gist.github.com/3931654
[2012-10-22 14:06:08 -0400] tknerr: makerbreakr: did you do anything else, like patching the postgresql recipe or so?
[2012-10-22 14:06:41 -0400] tknerr: makerbreakr: i'm wondering, the only difference is that you have the openssl recipe explicitly on the runlist which i don't
[2012-10-22 14:07:26 -0400] tknerr: makerbreakr: ...but this doesn't install anything actually...
[2012-10-22 14:07:34 -0400] makerbreakr: man, im really sorry, I cant remember honestly
[2012-10-22 14:07:47 -0400] makerbreakr: I know I ran into this problem, but I cant remember how i fixed it
[2012-10-22 14:08:02 -0400] tknerr: makerbreakr: hehe :-)
[2012-10-22 14:13:21 -0400] itchyouch: Hi.  I had a couple of questions on figuring out best practices and some getting started stuff.  Apologies in advance as I am typing on my iPad as my work connection is heavily filtered
[2012-10-22 14:14:35 -0400] gchristensen: itchyouch, itchyouch_ - one thing is that the folks from opscode (often the ones to reply) are in here a bit later in the day, since they are on the west coast
[2012-10-22 14:14:56 -0400] paulmooring: gchristensen: some of us get in earlier ;)
[2012-10-22 14:15:30 -0400] gchristensen: !!! good morning :)
[2012-10-22 14:15:40 -0400] gchristensen: oh my, that feller is having a tough time over there
[2012-10-22 14:16:03 -0400] itchyouch__: Sorry.  Vz lte is not liking me.  Just turned it off.  Hopefully 3G is better
[2012-10-22 14:16:37 -0400] itchyouch__: Hi.  I had a couple of questions on figuring out best practices and some getting started stuff.  Apologies in advance as I am typing on my iPad as my work connection is heavily filtered
[2012-10-22 14:16:54 -0400] itchyouch__:  When it comes to putting the chef config in revision control, are we talking about putting the /var/chef items into rev control?
[2012-10-22 14:17:47 -0400] paulmooring: itchyouch_: generally no, when people refer to a Chef repo they're usually talking about cookbooks, roles ect.
[2012-10-22 14:18:22 -0400] paulmooring: The common pattern is to let Chef manage Chef, so the details of your client.rb would be in a base role for example
[2012-10-22 14:18:45 -0400] paulmooring: and the base role and chef-client cookbook would be in your revision control
[2012-10-22 14:18:47 -0400] itchyouch: Chef manages chef?
[2012-10-22 14:19:43 -0400] paulmooring: http://community.opscode.com/cookbooks/chef-client
[2012-10-22 14:20:13 -0400] itchyouch: Thanks Paul.
[2012-10-22 14:20:15 -0400] paulmooring: I generally have that cookbook run as part of my bootstrap, it sets up the client.rb and cron tasks
[2012-10-22 14:20:19 -0400] paulmooring: any time
[2012-10-22 14:21:01 -0400] paulmooring: itchyouch: if you want an example and are a git user check out this page http://wiki.opscode.com/display/chef/Chef+Repository
[2012-10-22 14:21:06 -0400] itchyouch: I presume that's the API client that runs everything?
[2012-10-22 14:21:33 -0400] itchyouch: On that note, I'm in a heavily firewalls environment, so getting stuff off of fit is very difficult.
[2012-10-22 14:22:26 -0400] tknerr: makerbreakr: you know what - I figured out the postgresql::server recipes works fine - it's just when I use the database cookbook it includes the postgresql::ruby recipe which then fails due to CHEF-1406
[2012-10-22 14:22:43 -0400] itchyouch: Firewalled.  Anyone working with chef where opprod basically doesn't have access to the Internet?  Getting files off the net is a painful, download to my box, then authenticate to my prod firewall, the safer the file over
[2012-10-22 14:23:01 -0400] makerbreakr: tknerr, I thought that was the fix!
[2012-10-22 14:23:11 -0400] itchyouch: Then xfer (damn autocorrect) the file over
[2012-10-22 14:23:32 -0400] ohookins: i'm trying to figure out attribute file read order on chef 0.9.18 but so far i cannot make sense of it
[2012-10-22 14:23:42 -0400] ohookins: it doesn't always use the default first, or even last
[2012-10-22 14:23:50 -0400] gchristensen: itchyouch: sounds like you might want to create your own chef server, host it internally, where your servers can all communicate with it
[2012-10-22 14:23:55 -0400] ohookins: and the alphabetic ordering "rule" specified in the docs isn't being obeyed
[2012-10-22 14:24:01 -0400] tknerr: makerbreakr: yes, that helps me for the first step. but now i'm stuck with the database cookbook :-/
[2012-10-22 14:24:12 -0400] makerbreakr: what problems are you running into?
[2012-10-22 14:24:16 -0400] paulmooring: ohookins: any reason you want to use 0.9.18? support for 0.9.X was dropped a while ago
[2012-10-22 14:24:38 -0400] ohookins: paulmooring: we are in transition to 10 but it is a slow process
[2012-10-22 14:24:44 -0400] ohookins: for the moment the server is on 10 but clients on 0.9
[2012-10-22 14:25:05 -0400] gchristensen: itchyouch: conveniently - there is an easy way to setup a chef server with chef - http://wiki.opscode.com/display/chef/Installing+Chef+Server
[2012-10-22 14:25:06 -0400] itchyouch: gchristensen: Ive started with that.  Got a chef server up and running on centos 63 using the packages from frameos.org. I was trying to figure out which portions of the install get rev controlled...
[2012-10-22 14:26:49 -0400] itchyouch: A lot of that appears to use gem, which attempts to download from the net.  Unfortunately, prod doesn't get Internet.  And if it does, it gets a minimally listed set of approved urls
[2012-10-22 14:26:54 -0400] itchyouch: Via a proxy
[2012-10-22 14:27:13 -0400] gchristensen: so how do you install packages on your prod servers?
[2012-10-22 14:27:41 -0400] itchyouch: Our systems team regularly syncs a set of internal mirrors with the world
[2012-10-22 14:28:12 -0400] geekbri: We do basically the same thing.
[2012-10-22 14:28:21 -0400] geekbri: We mirror our own gems repository and pip one as well.
[2012-10-22 14:28:23 -0400] itchyouch: Most requested packages go through information security as well.  :p
[2012-10-22 14:28:26 -0400] gchristensen: this is getting out of my league
[2012-10-22 14:28:56 -0400] itchyouch: Tis a pain for me.
[2012-10-22 14:29:32 -0400] itchyouch: Usually, id do a socks proxy/reverse ssh tunnel kungfu, with a sash thro
[2012-10-22 14:29:57 -0400] itchyouch: With a ssh over http proxy deal, but that got flagged by infosec, so it's on the don't do list
[2012-10-22 14:30:53 -0400] gchristensen: this sounds like a problem for your systems team >.<
[2012-10-22 14:31:53 -0400] itchyouch: So on my list of things to do, I should attempt to manage my own gem mirror.  Sorry for my ignorance, but are gems usually centralized in a handful of places, or will I need to maintain a list of repos to sync with?
[2012-10-22 14:32:22 -0400] itchyouch: Unfortunately, my systems team also has a lot on their plate
[2012-10-22 14:32:31 -0400] paulmooring: itchyouch: RubyGems is a centralized Runy library system, like CPAN
[2012-10-22 14:32:35 -0400] ohookins: maybe my attribute file ordering confusion is related to this http://tickets.opscode.com/browse/CHEF-2903
[2012-10-22 14:32:54 -0400] paulmooring: but I happen to know it's going to also assume that you can download some other non-gems packages
[2012-10-22 14:33:20 -0400] itchyouch: Oh okay.  Anyone know how big the repository is?  Trying to see if the whole repo is easily mirrored or if I will need to pick and choose
[2012-10-22 14:33:31 -0400] paulmooring: I think pretty much all documentation/procedures assume a working Internet connection, so expect a lot of friction unfortunately
[2012-10-22 14:34:09 -0400] paulmooring: itchyouch: I know it's big, just not how big
[2012-10-22 14:34:17 -0400] itchyouch: Yea, I read through the docs a bunch and every step has been an exercise in getting Internet access of some type
[2012-10-22 14:39:16 -0400] itchyouch: Btw, how do you guys support rolling releases?
[2012-10-22 14:40:33 -0400] itchyouch: I have say 100 boxes and only want to roll out to 2-3 boxes initially, then maybe half, then another half...
[2012-10-22 14:40:40 -0400] paulmooring: itchyouch: What sort of rolling releases? Chef doesn't explicitly deal with OS upgrades so it's up to whoever writes a cookbook to deal with it
[2012-10-22 14:41:23 -0400] paulmooring: itchyouch: we provide environments as a great way to do that, but there's a lot of flexibility to tailor a solution for your needs
[2012-10-22 14:41:47 -0400] paulmooring: or are you talking about rolling out Chef initially?
[2012-10-22 14:42:05 -0400] itchyouch: paulmooring: Usually, it's internal software.  I was debating between using fpm to package up our internal software and just pulling revisions of the software direct from repo via a recipe
[2012-10-22 14:43:28 -0400] paulmooring: itchyouch: the install method isn't too important to Chef, you would likely want to use either environments or roles to specify versions via attributes
[2012-10-22 14:44:12 -0400] itchyouch: Gotcha.
[2012-10-22 14:44:39 -0400] itchyouch: Is it possible to host s repo with multiple versions of the same package?
[2012-10-22 14:44:46 -0400] paulmooring: btw ends and roles are very different things and one is probably right and the other wrong depending on your specifics
[2012-10-22 14:44:57 -0400] itchyouch: Specifically referring to a yum repo.  I dont think it is..
[2012-10-22 14:45:09 -0400] itchyouch: Ends and roles?
[2012-10-22 14:45:11 -0400] paulmooring: itchyouch: I'm pretty sure yes
[2012-10-22 14:45:18 -0400] paulmooring: environments
[2012-10-22 14:45:27 -0400] paulmooring: auto-correct is trolling me
[2012-10-22 14:45:28 -0400] itchyouch: Ahh okay.  Envs
[2012-10-22 14:46:38 -0400] bgood: Does anyone have a know why these notifications to stop a windows service would fail? (https://gist.github.com/3931832)
[2012-10-22 14:46:39 -0400] itchyouch: We have an interesting setup where theres about 50-100 boxes that are management boxes that maintain another 500-1000 hosts/jvms each.
[2012-10-22 14:47:43 -0400] itchyouch: So theres a simple automation framework to run daily operation tasks, while maintaining the management systems themselves is also a bunch of work.
[2012-10-22 14:48:00 -0400] paulmooring: bgood: nothing in event viewer?
[2012-10-22 14:48:11 -0400] bgood: nope
[2012-10-22 14:48:20 -0400] itchyouch: The end hosts are pxebooted hosts with busybox snd a jvm, so they are very minimal boxes.
[2012-10-22 14:48:28 -0400] bgood: if i make the action on the service to :stop it works
[2012-10-22 14:48:36 -0400] bgood: it seems like the notification is failing
[2012-10-22 14:48:49 -0400] paulmooring: and the templates are being updated?
[2012-10-22 14:49:01 -0400] bgood: This is running with client version 10.14.2 on a win 2008 r2 box
[2012-10-22 14:49:17 -0400] bgood: I see in the logs where the client updates the comments and logs as such
[2012-10-22 14:49:19 -0400] itchyouch: Im thinking the environments would be the way to deploy out multiple revisions of the software except that the testing environment isnt necessarily comprehensive.
[2012-10-22 14:50:15 -0400] bgood: I have tried using subscribes and notifies with no luck
[2012-10-22 14:50:25 -0400] paulmooring: bgood: The logs will still show that it check the template even if the template didn't change
[2012-10-22 14:52:38 -0400] itchyouch: Btw, im a git n00b.  on the git repo for all the cookbooks, is each cookbook essentially it's own repo to be cloned?
[2012-10-22 14:53:08 -0400] bgood: paulmooring: I added a log snip to the gist
[2012-10-22 14:54:16 -0400] bgood: you can see where one of the templates is updates and the other isn't
[2012-10-22 14:56:19 -0400] bgood: thanks for the help, I smashed my head against this problem four 1/2 the day on Friday
[2012-10-22 15:03:39 -0400] itchyouch: Is there a preference for using ruby 1.8.x vs 1.9.x or are most judging using rvm in prod?
[2012-10-22 15:03:44 -0400] itchyouch: Just using
[2012-10-22 15:05:02 -0400] itchyouch: So in the chef manages chef model, the chef recipe goes to revision control to grab the latest configs to install them on itself so to speak?
[2012-10-22 15:05:26 -0400] paulmooring: itchyouch: In terms of Chef the full stack installer is preferred
[2012-10-22 15:05:53 -0400] itchyouch: Full stack installer?  Is that a recipe?
[2012-10-22 15:06:00 -0400] paulmooring: that installs it's own Ruby under /opt/chef and you can use whatever you want as your system ruby
[2012-10-22 15:06:16 -0400] paulmooring: no it's a rpm/deb that installs Chef under /opt
[2012-10-22 15:06:31 -0400] itchyouch: Oh okay
[2012-10-22 15:07:06 -0400] paulmooring: it will currently use 1.9.3, but like I said it doesn't interfere with your system ruby it's just for Chef
[2012-10-22 15:08:17 -0400] itchyouch: Where is the full stack installer?
[2012-10-22 15:08:36 -0400] itchyouch: Is there a best practices guide that combines all this information?
[2012-10-22 15:09:25 -0400] itchyouch: Thanks for all the help btw
[2012-10-22 15:09:48 -0400] itchyouch: Apologies for the tenseness typing away on a touch screen
[2012-10-22 15:11:30 -0400] itchyouch: So I'm debating if there's a preferred method of installing the chef client via rpm/deb or via gem?
[2012-10-22 15:11:48 -0400] till__: i am using 10.14.2 and for some reason it doesn't pick up some of my attributes
[2012-10-22 15:15:44 -0400] till__: when i provision with :debug, it just won't load the attributes/default.rb for that cookbook
[2012-10-22 15:25:25 -0400] till__: maybe a vagrant issue
[2012-10-22 15:27:49 -0400] karwash: @till is the cookbook in a path defined in the Vagrantfile?
[2012-10-22 15:34:59 -0400] till__: karwash: yeah
[2012-10-22 15:35:14 -0400] till__: karwash: i ran `vagrant destroy` and `vagrant up` and it worked right away
[2012-10-22 15:35:29 -0400] till__: i am guessing the mount into the vm was stale for some reason
[2012-10-22 15:35:33 -0400] till__: but i can't figure out why
[2012-10-22 16:09:55 -0400] heathsnow: anyone familiar with using node.chef_environment?  I'm using envname = node.chef_environment and then updating the envname variable...but it seems to be removing my node from the environment when I do this
[2012-10-22 16:10:43 -0400] heathsnow: *in a recipe
[2012-10-22 16:12:51 -0400] yfeldblum: heathsnow, strings in ruby are mutable; instead of updating the string, make a copy of the string and update the copy?
[2012-10-22 16:22:09 -0400] _JamieD_: does anyone have experience getting the java recipe to work on ubuntu 12.04? I'm having problems
[2012-10-22 16:22:44 -0400] _JamieD_: looks like JAVA_HOME is not actually pointing to the java installation
[2012-10-22 16:22:51 -0400] bluepojo: In irc, it's good practice to ask your specific question rather than asking for general experience. That way people will be more likely to respond
[2012-10-22 16:23:27 -0400] _JamieD_: bluepojo: will do
[2012-10-22 16:24:13 -0400] bluepojo: if you ssh into the box, you see JAVA_HOME being unset?
[2012-10-22 16:24:59 -0400] _JamieD_: JAVA_HOME is pointing to /usr/lib/jvm/default-java
[2012-10-22 16:25:16 -0400] _JamieD_: but there is nothing there
[2012-10-22 16:25:19 -0400] itchyouch: Does gem typically keep its installations local to /opt?
[2012-10-22 16:25:45 -0400] bluepojo: depends how you have ruby installed
[2012-10-22 16:25:51 -0400] _JamieD_: ls /usr/lib/jvm/ is java-1.6.0-openjdk-amd64  java-6-openjdk-amd64  java-6-openjdk-common  java-7-openjdk-amd64
[2012-10-22 16:26:15 -0400] bluepojo: rbenv via the rbenv cookbook installs to opt by default
[2012-10-22 16:26:17 -0400] bluepojo: I believe
[2012-10-22 16:26:39 -0400] _JamieD_: the java recipe runs without error, but my jetty recipe fails with STDOUT: Cannot find a JRE or JDK. Please set JAVA_HOME to a >=1.2 JRE
[2012-10-22 16:28:20 -0400] bluepojo: _JamieD_: if you ssh into the box, can you confirm that JAVA_HOME is not being set or being set to the wrong thing?
[2012-10-22 16:29:12 -0400] _JamieD_: bluepojo: yes, thats where I got all the info from by sshing into the machine
[2012-10-22 16:31:26 -0400] _JamieD_: bluepojo: looking at the recipe /usr/lib/jvm/default-java is where JAVA_HOME gets set on ubuntu, so it looks like java is being installed into the wrong location, or there is a missing symlink. I'm totally in the dark when it comes to java so not sure what should be happening
[2012-10-22 16:31:39 -0400] till__: is there a provider to setup nginx virtualhosts?
[2012-10-22 16:32:07 -0400] bluepojo: _JamieD_: https://github.com/opscode-cookbooks/java/blob/master/recipes/openjdk.rb#L38 is how JAVA_HOME is being set
[2012-10-22 16:32:59 -0400] bluepojo: which is set here: https://github.com/opscode-cookbooks/java/blob/master/attributes/default.rb#L28-37
[2012-10-22 16:33:20 -0400] bluepojo: it could be the java recipe is not running before the jetty recipe?
[2012-10-22 16:35:07 -0400] qhartman: I'm finding that it's fairly common for Centos repos to be unreachable temporarily , causing failures in chef like this: "returns: yum-dump Repository Error: Cannot retrieve metalink for repository: epel. Please verify its path and try again". Have any of you found an elegant way to deal with this and allow chef to continue? This is rarely a fatal failure for my systems, but's it treated that way by chef.
[2012-10-22 16:35:36 -0400] karwash: @till, are you using the opscode nginx community cookbook?
[2012-10-22 16:35:38 -0400] qhartman: My first throught is to add the "failure ok" flag to the package resources, but that seems like it would be opening the door to other problems.
[2012-10-22 16:36:13 -0400] maek: qhartman: we mirror epel for that reason
[2012-10-22 16:36:20 -0400] maek: unless you run in daemon mode
[2012-10-22 16:36:25 -0400] maek: where you can just wait 5 min and try again
[2012-10-22 16:36:32 -0400] karwash: I simply used a template resource to write the config and the nginx_site definition to enable the site
[2012-10-22 16:37:02 -0400] maek: qhartman: also, does epel not use the fast_mirror plugin, in that case you should always be getting an available repo
[2012-10-22 16:37:13 -0400] itchyouch: On the centos 6, chef server installation from frameos, what's the difference between /var/chef/cookbooks and /var/chef/site-cookbooks ?
[2012-10-22 16:37:31 -0400] qhartman: maek, I have no idea if epel uses fast_mirror or not.
[2012-10-22 16:37:44 -0400] maek: itchyouch: traditionally cookbooks is for community stuff, site-cookbooks is for your custom cookbooks
[2012-10-22 16:38:16 -0400] maek: qhartman: i think it would be you using it. epel has a mirror_list right? vs pointing right to a repo?
[2012-10-22 16:38:27 -0400] qhartman: maek, It seems like mirroring the repos is a pretty heavy solution for something that's only truly a problem during the initial setup of the machine, or in the rare case that the packages change.
[2012-10-22 16:38:43 -0400] qhartman: maek, Not sure, I just enable it by installing the rpm they provide, I'll take a look....
[2012-10-22 16:39:06 -0400] qhartman: ls
[2012-10-22 16:39:20 -0400] maek: qhartman: agree. we use it enough and the bit of space is trivial, so we mirror it. I would think if its because the repo is just flaking out for a few min then daemon mode would be ok. but again a failed boot strap because of epel being down is poopie
[2012-10-22 16:40:01 -0400] itchyouch: Maek: thanks.  So im still a bit lost on the repository integration with chef.  Do people just clone the community cookbooks directly into cookbooks?  What about when changing the cookbooks, is the best practice to move it from communit to site?
[2012-10-22 16:40:41 -0400] qhartman: maek, Is it typical for the Centos mirrors to fail so often? I'm copming from debian / ubuntu, and I can only recall once where a repo I needed there went away.
[2012-10-22 16:41:34 -0400] qhartman: maek,Yes, epel is using a mirrorlist entry
[2012-10-22 16:41:46 -0400] maek: itchyouch: semi shameless plug. this is written by a co worker and this is how we deal with cookbooks http://vialstudios.com/guide-authoring-cookbooks.html - Ideally you have a dep solver like berkshelf (or librarian) that gets the community cookbooks for you.  no real reason to check community cookbooks into your repo
[2012-10-22 16:42:37 -0400] maek: qhartman: im surprised that its causing you this much hassle. I can think of maybe 2 or 3 times in recent memory that this has been a problem
[2012-10-22 16:43:05 -0400] maek: qhartman: if you find a package you know is in epel and try installing it does it says 'loading fastest mirror plugin'
[2012-10-22 16:43:16 -0400] maek: in theory that should prevent you from getting a down repo
[2012-10-22 16:43:48 -0400] maek: qhartman: ive also never seen Repository Error: Cannot retrieve metalink for repository: epel. for a yum error
[2012-10-22 16:43:49 -0400] qhartman: maek, Yeah, it's weird. There was once a couple months ago where EPEL was down hard for most of a day, but for the most part we just get spurious failures on mundame yum operations because it can't talk to some repo
[2012-10-22 16:43:55 -0400] wassy121: So, I'm having trouble setting node attributes in "knife node edit".  I have a variable, default['packageserver']['stage'] set in attributes/default.rb .  How do I override that in the node itself?
[2012-10-22 16:44:44 -0400] wassy121: I've tried:   "normal" : { "packageserver": {"stage": "beta" }, ...}
[2012-10-22 16:44:58 -0400] qhartman: maek, Trying again in few minutes almost always works, but it costs us time when we're spinning up a test cluster of 150+ AWS instances and some % of them myseteriously fail to finsih their chef runs
[2012-10-22 16:45:11 -0400] maek: qhartman: yeah indeed.
[2012-10-22 16:45:20 -0400] maek: and its always epel?
[2012-10-22 16:45:30 -0400] qhartman: maek, not always, but usually
[2012-10-22 16:45:36 -0400] karwash: @wassy121 can you override this at the role or evn level?
[2012-10-22 16:45:42 -0400] karwash: env
[2012-10-22 16:45:50 -0400] maek: wassy121: try setting it in the override section of the node edit
[2012-10-22 16:45:56 -0400] maek: knife node edit NODENAME -a
[2012-10-22 16:46:04 -0400] itchyouch: maek: Thanks.  Theres a lot stuff there.  Im going to have to buckle down and read it.
[2012-10-22 16:46:40 -0400] maek: itchyouch: so this is what works for us. basically the berks file uses metadata.rb to see what community (or other cookbooks) are needed and then berks install grabs them and berks upload sends them tot he chef server
[2012-10-22 16:46:55 -0400] itchyouch: Do people make a distinction between community cookbooks and personal cookbooks in their repos?
[2012-10-22 16:47:00 -0400] qhartman: maek, aside from the default repos we're only using epel and postgres backport repo though, so the odds of it being epel most of the time are pretty good.
[2012-10-22 16:47:14 -0400] maek: I also suggest keeping your own cookbooks in there own repo foo_cookbook bar_cookbook etc vs a giant repo of site-cookbooks/{foo, bar}
[2012-10-22 16:47:28 -0400] wassy121: ah, the -a showed me the path to greatness.  I must have already set it, and that wasn't showing up in just "knife node edit"
[2012-10-22 16:47:40 -0400] maek: qhartman: yeah i got nothing. thats why we mirror :(
[2012-10-22 16:47:44 -0400] qhartman: itchyouch, I don't know if it's a good practice or not, but any cookbook we builkd from scratch or modify heavily we prefix with a company acronym so we know it's "ours".
[2012-10-22 16:47:47 -0400] _JamieD_: bluepojo: the java recipe is running first, and completing without any errors, the path is being set correctly (according to the recipe), but nothing at the path that has been set
[2012-10-22 16:48:25 -0400] maek: itchyouch: http://berkshelf.com/
[2012-10-22 16:49:04 -0400] qhartman: itchyouch, we also don't mirror all of the community cookbooks repo, we just pull in the ones we need, and if they stop working for some reason pull in a new version when needed
[2012-10-22 16:49:21 -0400] itchyouch: qhartman: It seems like a good idea just so that there is that distinction.  I can imagine where it would be helpful for onboarding new guys
[2012-10-22 16:49:54 -0400] qhartman: itchyouch, again, I don't know if that's considered a best practice, but it works for us. It also lets us use community cookbooks that almost do what we need to bootstrap our own work.
[2012-10-22 16:50:06 -0400] itchyouch: qhartman:  thanks.  Yea, we probably dont need a million things from community.  Im thinking we will use maybe 10-15 cookbooks.
[2012-10-22 16:50:27 -0400] qhartman: itchyouch, for example, I recently used the haproxy cookbook as a basis for our own version of it that does some custom stuff specific for our application
[2012-10-22 16:51:03 -0400] itchyouch: Me personally for alphabetical reasons would probsbly postfix a mmodified cookbook
[2012-10-22 16:51:14 -0400] itchyouch: Java_companyname
[2012-10-22 16:51:15 -0400] qhartman: maek, thanks for the feedback, I'll have to just see if this gets painful enough to justify setting up a mirror
[2012-10-22 16:51:24 -0400] maek: if its a matter of 'the community cookbooks does most of what we need' what we have been doing is making company_cookbook, so like company_haproxy and then we include the community haproxy cookbook, set the attributes we need and if there is custom stuff write a recipe and include that after community.
[2012-10-22 16:51:44 -0400] maek: qhartman: might want to ask the epel dudes, like a said thats an error ive never seen.
[2012-10-22 16:51:44 -0400] qhartman: itchyouch, yeah, either way.
[2012-10-22 16:52:05 -0400] qhartman: maek, rgr
[2012-10-22 16:52:13 -0400] bluepojo: _JamieD_: that's curious, then. In this case, I'd poke around in my cookbook cache and add logging to try to see what's happening.
[2012-10-22 16:52:19 -0400] bluepojo: the cookbook cache on the box
[2012-10-22 16:52:29 -0400] bluepojo: if you edit files there directly, you can add logging statements
[2012-10-22 16:52:34 -0400] bluepojo: then kick off chef-client locally
[2012-10-22 16:52:42 -0400] itchyouch: Maek so how does one include a cookbook?  I guess cookbooks can call each other?  This is all very new
[2012-10-22 16:52:49 -0400] bluepojo: then when you're done, delete the cookbook from the cache
[2012-10-22 16:52:57 -0400] bluepojo: and it'll get redownloaded on the next run
[2012-10-22 16:53:13 -0400] itchyouch: Just to make the disctinction, the clients are just the admins of the system.  Does each node need to be a client?
[2012-10-22 16:53:13 -0400] bluepojo: so edit the java one to add logging after JAVA_HOME gets set to echo what is in JAVA_HOME
[2012-10-22 16:53:18 -0400] bluepojo: _JamieD_: ^
[2012-10-22 16:53:42 -0400] maek: itchyouch: yeah, you can do include_recipe "cookbook::foo"
[2012-10-22 16:54:07 -0400] maek: itchyouch: each node has a client associated with it, usually the node name that is the admin for that system only.
[2012-10-22 16:54:27 -0400] maek: that node only.
[2012-10-22 16:54:52 -0400] _JamieD_: bluepojo: it's fixed if I manually create a symlink from /usr/lib/jvm/default-java java's installed path. look like the recipe needs tweaking for my particular hardware/os combo
[2012-10-22 16:55:56 -0400] bluepojo: oh I see. You can either add that to a cookbook that wraps Java and use that, or figure out why you're getting the wrong JAVA_HOME
[2012-10-22 16:58:35 -0400] _JamieD_: bluepojo: just deploying my application to see if it actually works, then I'll fix the recipe...
[2012-10-22 17:00:51 -0400] erikh: JAVA_HOME is set in chef-client's environment and then set in a profile.d file
[2012-10-22 17:01:58 -0400] erikh: setting in ENV should make it available to the subshells but it's not going to get it unless you're using a login shell otherwise
[2012-10-22 17:02:12 -0400] erikh: e.g., service jetty restart isn't going to have JAVA_HOME set, most likely.
[2012-10-22 17:04:17 -0400] erikh: couple of solutions would be to manipulate your /etc/bash.bashrc to import the profile.d directory's scripts or modify the jetty startup scripts
[2012-10-22 17:04:23 -0400] erikh: they each have their own drawbacks.
[2012-10-22 17:08:45 -0400] qhartman: maek, I think I found the root of the problem. The yum config on the AMI we are using essentially caches nothing, so it's making a lot more connections to the mirrors than it needs to.
[2012-10-22 17:09:02 -0400] maek: qhartman: AH!
[2012-10-22 17:09:24 -0400] qhartman: I can't fathom why someone would make these changes
[2012-10-22 17:09:40 -0400] maek: to be l33t
[2012-10-22 17:10:48 -0400] qhartman: huh, actually it's not the AMI, it's the default settings from the yum cookbook we're using
[2012-10-22 17:11:48 -0400] qhartman: It has keepcache set to 0
[2012-10-22 17:18:01 -0400] qhartman: I've often wondered why "being l33t" so often gets translated to "make this thing .5% faster and fail twice as often"
[2012-10-22 17:18:16 -0400] qhartman: (or something similarly absurd)
[2012-10-22 17:19:06 -0400] erikh: perhaps instead of dismissing decisions ignorantly you should try and figure out why they were made in the first place
[2012-10-22 17:19:52 -0400] erikh: I have a gut feeling why it's done from similar experiences with ubuntu package repos where the cache is stale, but I can't say for sure.
[2012-10-22 17:21:41 -0400] qhartman: sure stale package caches are bad, but hitting the mirror for every single operation is worse, especially when failure to do so successfully causes the whole operation to fail
[2012-10-22 17:22:10 -0400] qhartman: there are plenty of balance points between the two extremes which would be better.
[2012-10-22 17:22:34 -0400] erikh: and you're only going to know what that balance is if you actually find out why that choice was made
[2012-10-22 17:22:59 -0400] erikh: for me, at least, if I boot AMIs or base boxes with sufficiently old enough package repo caches, package installation actually fails
[2012-10-22 17:23:06 -0400] erikh: ... which also breaks the run :)
[2012-10-22 17:23:36 -0400] erikh: the solution on the ubuntu side of things is to use the apt cookbook, which executes apt-get update and works around it.
[2012-10-22 17:28:00 -0400] maek: anyone know how to tell where open source chef couchdb is looking for the actual docs?
[2012-10-22 17:40:55 -0400] makerbreakr: whats the upper limits on nodes for a selfhosted chefserver
[2012-10-22 17:41:41 -0400] qhartman: makerbreaker, I'm sure it would depend on the hardware. We have a relatively small machine hosting a few hundred nodes with no problem
[2012-10-22 17:42:04 -0400] makerbreakr: hrm
[2012-10-22 17:42:26 -0400] makerbreakr: my load is fairly small, but the webui status page takes forever to lolad
[2012-10-22 17:42:27 -0400] makerbreakr: load*
[2012-10-22 17:42:29 -0400] makerbreakr: if at all
[2012-10-22 17:43:39 -0400] maek: makerbreaker: its slow from the get go for me. we have a 96gb box with 8 cores doing 2200 nodes
[2012-10-22 17:43:49 -0400] maek: the chef-client portion is as fast with 1 box or 2200
[2012-10-22 17:43:52 -0400] maek: same with the webui
[2012-10-22 17:44:41 -0400] makerbreakr: sorry, what do you mean its slow from the get go?
[2012-10-22 17:45:03 -0400] bluepojo: means there's no speed difference
[2012-10-22 17:45:10 -0400] bluepojo: it's just always a bit slow
[2012-10-22 17:45:17 -0400] maek: makerbreaker: the speed of open source chef is about as fast empty or loaded from my 'findings'
[2012-10-22 17:45:21 -0400] makerbreakr: ah
[2012-10-22 17:45:29 -0400] maek: knife node list on 1 node takes about as long as on 2200 nodes
[2012-10-22 17:45:32 -0400] makerbreakr: i must hvae something buggy then
[2012-10-22 17:45:36 -0400] makerbreakr: in the webui
[2012-10-22 17:45:42 -0400] maek: if its not showing up at all, then yeah buggy
[2012-10-22 17:45:50 -0400] makerbreakr: ya, it just died on my
[2012-10-22 17:45:50 -0400] makerbreakr: You appear to have no nodes - try connecting one, or creating or editing a client
[2012-10-22 17:45:52 -0400] jmartin: maek: hopefully erchef will speed some stuff up! server side at least
[2012-10-22 17:45:53 -0400] maek: if its just slower then you think it should be, that seems to be how fast oss chef is
[2012-10-22 17:46:04 -0400] makerbreakr: no, its broken
[2012-10-22 17:46:05 -0400] maek: jmartin: indeed.
[2012-10-22 17:47:44 -0400] maek: jmara: we have private chef and ive already noticed an improvement in speed. could be because its on 4 boxes with services broken out.
[2012-10-22 17:51:04 -0400] thehar: ChefSummit!
[2012-10-22 17:58:53 -0400] maek: anyone using chef with couch 1.0.2 ?
[2012-10-22 18:09:06 -0400] cwj: sumdat
[2012-10-22 18:11:17 -0400] cwj: dat summit even
[2012-10-22 18:15:55 -0400] thehar: cwj: yes
[2012-10-22 18:16:33 -0400] thehar: cwj: when do you fly into sea?
[2012-10-22 18:16:47 -0400] cwj: be there in a couple hours
[2012-10-22 18:16:47 -0400] BryanWB: anybody got a chef recipe the for the GenerixJMX  plugin?
[2012-10-22 18:16:53 -0400] thehar: cool me too
[2012-10-22 18:16:55 -0400] thehar: staying at the W
[2012-10-22 18:16:59 -0400] BryanWB: cwj, enjoy! am super envious
[2012-10-22 18:17:06 -0400] cwj: BryanWB: sorry to hear you wont be there
[2012-10-22 18:17:19 -0400] cwj: happy to proxy hugops for you though
[2012-10-22 18:17:30 -0400] BryanWB: cwj, ah thanks ;)
[2012-10-22 18:17:30 -0400] thehar: rofl
[2012-10-22 18:17:34 -0400] thehar: i <3 hugs
[2012-10-22 18:24:03 -0400] gondoi: btm: I'm sure it's been asked a few times, but I can't seem to find it in the logs: Any idea when an omnibus installer will be avail for ubuntu 12.10?
[2012-10-22 18:26:31 -0400] till__: 'there was a problem resetting your password'
[2012-10-22 18:47:35 -0400] jtimberman: gondoi: does the 12.04 one not work?
[2012-10-22 18:47:56 -0400] ekristen: whats the best repo for nginx out there?
[2012-10-22 18:48:01 -0400] ekristen: is it the opscode one?
[2012-10-22 18:48:05 -0400] gondoi: haven't tried actually, someone asked me and when i looked up that version it wasn't listed
[2012-10-22 18:48:30 -0400] btm: gondoi: it's in the backlog for engineering, not sure exactly when it will happen right now.
[2012-10-22 18:54:48 -0400] DanCreed: Hello
[2012-10-22 18:55:04 -0400] DanCreed: Is anyone familar with the tar I/O issue on windows clients running xming?
[2012-10-22 18:55:33 -0400] DanCreed: http://tickets.opscode.com/browse/CHEF-3394
[2012-10-22 18:55:36 -0400] DanCreed: scpedifically
[2012-10-22 18:58:38 -0400] DanCreed: Anyone home?
[2012-10-22 19:15:50 -0400] till__: i am trying to figure out how to access attributes which get populated by ohai
[2012-10-22 19:16:06 -0400] till__: initially (first phase of the chef run), they are not set and that's why my run fails
[2012-10-22 19:16:54 -0400] kallistec: till__: are these attributes populated by custom plugins or something?
[2012-10-22 19:17:47 -0400] till__: yes
[2012-10-22 19:18:22 -0400] till__: they get populated during the run
[2012-10-22 19:18:48 -0400] kallistec: till__: yeah, you might want to use the run_action hack to force the ohai resource to run during compile
[2012-10-22 19:19:55 -0400] till__: kallistec: what is that hack exactly?
[2012-10-22 19:20:03 -0400] till__: i've never heard of it =)
[2012-10-22 19:28:03 -0400] erratic: some guy was a total dick to me this morning on irc.
[2012-10-22 19:32:27 -0400] till__: kallistec: ohai "nginx" do action :nothing end.run_action(:reload)
[2012-10-22 19:32:31 -0400] till__: something like that?
[2012-10-22 19:32:40 -0400] till__: didn't seem to work
[2012-10-22 19:33:00 -0400] till__: sounds like a neat little problem
[2012-10-22 19:36:06 -0400] ekristen: a recipe I have keeps recompiling something from source each time chef-client
[2012-10-22 19:36:06 -0400] ekristen: rns
[2012-10-22 19:36:08 -0400] ekristen: runs*
[2012-10-22 19:38:28 -0400] ekristen: https://github.com/rellimevad/passenger_nginx <-- this is someone else's
[2012-10-22 19:38:38 -0400] ekristen: the default recipe keeps installing passenger over and over and over again
[2012-10-22 19:39:15 -0400] cwelle: Can anyone suggest a good website with directions on building a single node OpenStack server?
[2012-10-22 19:42:31 -0400] yfeldblum: cwelle, http://docs.openstack.org/essex/openstack-compute/install/apt/content/ seems like as good a bet as any
[2012-10-22 19:48:53 -0400] xdissent: yay 10.16!
[2012-10-22 19:49:00 -0400] BryanWB_: kallistec, when will i be able to put cucumber and minitest tests in   <cookbook_name>/tests rather than <cookbook_name>/files/default/test ?
[2012-10-22 19:49:10 -0400] BryanWB_: or s/tests/test/
[2012-10-22 19:53:01 -0400] jperry2: ohai!
[2012-10-22 19:53:29 -0400] BryanWB_: jperry2, ohai!
[2012-10-22 19:53:32 -0400] jperry2: I was wondering if anyone knows of any script out there to scan through your chef client log and report how long each recipe/cookbook is taking
[2012-10-22 19:53:48 -0400] jperry2: otherwise I'll write my own just wondering before I do so
[2012-10-22 19:54:01 -0400] jperry2: I guess I'm interested in the first run
[2012-10-22 19:54:10 -0400] jperry2: ones after that isn't that big of deal
[2012-10-22 19:54:19 -0400] BryanWB_: damn, great question
[2012-10-22 19:55:22 -0400] yfeldblum: jperry2, that's theoretically impossible, although practically approximable
[2012-10-22 19:55:54 -0400] JasonF: jperry2: if you're in >10.14, it's already been done as a handler
[2012-10-22 19:56:09 -0400] jperry2: can you point me to it?
[2012-10-22 19:56:20 -0400] JasonF: jperry2: https://github.com/joemiller/chef-handler-profiler
[2012-10-22 19:56:26 -0400] JasonF: jperry2: had to fish through my history :)
[2012-10-22 19:56:42 -0400] jperry2: nice, thank you, I'll take a look at that
[2012-10-22 19:56:55 -0400] JasonF: np, plan on implementing it myself when we get to 10.14 :)
[2012-10-22 19:57:04 -0400] jperry2: this is exactly what I'm looking for
[2012-10-22 19:57:11 -0400] jperry2: @yfeldblum - thank you
[2012-10-22 19:57:13 -0400] JasonF: I thought it might be :)
[2012-10-22 19:57:58 -0400] JasonF: cwelle: there's an installer Rackspace released here: http://www.rackspace.com/blog/newsarticles/rackspace-launches-openstack-based-private-cloud-software-enables-businesses-to-install-test-and-run-private-clouds-in-minutes/?b8c1ad50 -- not sure if this is a single node or whatever
[2012-10-22 20:01:33 -0400] jperry2: @JasonF - Does this recipe to set the report handler have be run at the top of your run list?
[2012-10-22 20:01:44 -0400] jperry2: or just as long as it is somewhere thats all that matters
[2012-10-22 20:01:57 -0400] kisoku: cwelle: if you are just interested in having a test instance of openstack use devstack
[2012-10-22 20:02:01 -0400] kisoku: http://devstack.org/guides/single-machine.html
[2012-10-22 20:03:15 -0400] kisoku: there's another single-node instance of openstack installer I forget the name of
[2012-10-22 20:04:27 -0400] kisoku: ah nevermind. I was thinking of trystack.org which is not really what you are looking for
[2012-10-22 20:05:15 -0400] joemiller: jperry2: if you use the 2nd example that uses ".run_action(:enable)" on the chef_handler resoure, it will be executed during the initial compile phase of chef, so it will be in effect during the full execution phase
[2012-10-22 20:05:42 -0400] joemiller: jperry2: which is especially useful for '1st run' (ie: on a new/fresh box) where you may be most interested in timing info
[2012-10-22 20:05:59 -0400] jperry2: ah okay, I'll try that one then
[2012-10-22 20:06:00 -0400] jperry2: thx
[2012-10-22 20:06:04 -0400] joemiller: jperry2: sorry, i didn't mean 2nd example. use the one in 'method 1'.
[2012-10-22 20:06:09 -0400] jperry2: ha
[2012-10-22 20:06:10 -0400] jperry2: okay
[2012-10-22 20:06:23 -0400] jperry2: and it can be any where in the run list right?
[2012-10-22 20:06:43 -0400] joemiller: jperry2: yeah, should be able to. i don't even know where it is in our run list =)
[2012-10-22 20:06:55 -0400] jperry2: okay cool, I'm going to test it locally first
[2012-10-22 20:07:05 -0400] jperry2: @joemiller - thx
[2012-10-22 20:08:25 -0400] jperry2: @joemiller - did you create a cookbook just for this handler or did you just add it to the chef_handler cookbook?
[2012-10-22 20:09:48 -0400] joemiller: jperry2: we had an existing 'chef' cookbook with recipes like 'chef::omnibus' and a couple other handlers. so i just added it there as a new recipe - chef::profiler_handler
[2012-10-22 20:09:59 -0400] jperry2: very cool
[2012-10-22 20:10:00 -0400] jperry2: t
[2012-10-22 20:10:01 -0400] joemiller: then included it from our kind of 'base' cookbook that every node gets.
[2012-10-22 20:10:01 -0400] jperry2: hx
[2012-10-22 20:10:30 -0400] addisonj: hrm, isn't hosted chef on ec2? or do they just use s3?
[2012-10-22 20:10:42 -0400] joemiller: could be included by a 'base' role too, if your org does things like that
[2012-10-22 20:24:08 -0400] AndChat|367796: Oh come on. Sorry everyone
[2012-10-22 20:31:47 -0400] killfill: how do i copy a file from path1 to path2?
[2012-10-22 20:32:30 -0400] yfeldblum: killfill, http://unixhelp.ed.ac.uk/CGI/man-cgi?cp
[2012-10-22 20:32:41 -0400] killfill: yfeldblum: i mean on chef.. :P
[2012-10-22 20:33:51 -0400] yfeldblum: killfill, 1) shell out to `cp` directly, 2) use Mixlib::ShellOut to shell out to `cp`, 3) use FileUtils.copy_file, 4) make a file resource whose content is obtained from having read another file
[2012-10-22 20:34:09 -0400] killfill: aah ok. thanks!
[2012-10-22 20:38:43 -0400] dwhsix: dang it, forgotten how to associate key with user in opscode hosted chef
[2012-10-22 20:38:48 -0400] dwhsix: reminders?
[2012-10-22 20:39:15 -0400] dwhsix: (or am I misremembering how to do this?)
[2012-10-22 20:39:37 -0400] dwhsix: e.g. my new knife.rb has
[2012-10-22 20:39:45 -0400] dwhsix: client_key               "#{current_dir}/dhaskin_obanyc_staging.pem"
[2012-10-22 20:40:06 -0400] dwhsix: forgotton how to get/gen that file...
[2012-10-22 21:03:25 -0400] thom: killfill: https://github.com/thommay/copy_file-cookbook
[2012-10-22 21:20:23 -0400] mhalligan: is anyone using the chef-logstash cookbook?
[2012-10-22 21:47:38 -0400] jl_: how do I change the path that knife is checking to look for plugins? (it can't find the rackspaxce plugin I just installed)
[2012-10-22 21:48:17 -0400] jl_: is there a plugin_path setting in knife.rb (like the cookbook_path?)
[2012-10-22 21:50:33 -0400] maek: jl_: http://wiki.opscode.com/display/chef/Knife+Plugins#KnifePlugins-InstallingPlugins seems like only 3 places
[2012-10-22 21:50:47 -0400] jl_: maek: thx
[2012-10-22 21:51:43 -0400] yfeldblum: jl_, the version of knife that ships with chef-10 looks through all installed gems
[2012-10-22 21:52:43 -0400] jl_: yfeldblum: ... I don't know what to tell you on that.
[2012-10-22 21:53:04 -0400] yfeldblum: jl_, any chance you're using bundler?
[2012-10-22 21:53:16 -0400] jl_: its there, its installed, its not found. I'm sure there's something else triggering it, but ATM I can't say
[2012-10-22 21:53:50 -0400] jl_: yfeldblum: not knowingly. I'm not a Rubyist yet. I just sudo gem installed it
[2012-10-22 21:54:10 -0400] jl_: I think homebrew may be screwing with things as it seems to have installed in a diff place
[2012-10-22 21:54:25 -0400] jl_: but, nontheless, I gotta get it running, so I'm just copying the command
[2012-10-22 21:54:40 -0400] jl_: out of the git clone into knife/plugins/knife
[2012-10-22 21:55:03 -0400] jl_: thx though.
[2012-10-22 21:56:48 -0400] jl_: :) of course that doesn't work.
[2012-10-22 21:57:26 -0400] bluepojo: jl_: you have ruby installed via homebrew?
[2012-10-22 21:57:42 -0400] bluepojo: jl_: if you sudo gem installed it, that means you used system ruby to install the gem
[2012-10-22 21:57:51 -0400] bluepojo: which means it's not going to be available via homebrew ruby
[2012-10-22 21:58:04 -0400] jl_: ahhh.. perhoops.. don't know why that would be the case, but that would be consistent with what I'm seeing
[2012-10-22 21:58:54 -0400] jl_: bluepojo: thx
[2012-10-22 21:59:12 -0400] bluepojo: homebrew is installed under your user
[2012-10-22 21:59:21 -0400] bluepojo: so you won't need sudo
[2012-10-22 21:59:49 -0400] fujin: Unfortunately, if you go around using sudo with it, it will break shit
[2012-10-22 21:59:57 -0400] bluepojo: it also yells at you
[2012-10-22 21:59:59 -0400] bluepojo: and won't let you
[2012-10-22 22:00:02 -0400] bluepojo: so that's fine
[2012-10-22 22:00:10 -0400] bluepojo: in this case
[2012-10-22 22:00:23 -0400] bluepojo: sudo is loading an environment that is not aware of homebrew ruby
[2012-10-22 22:00:27 -0400] fujin: I'd suggest rbenv for workstation version management with bundler and a Gemfile in your chef repo
[2012-10-22 22:00:45 -0400] fujin: Right on
[2012-10-22 22:01:44 -0400] bluepojo: I agree, rbenv is the way to go, but rbenv can be frustrating for people who aren't familiar with it's quirks (like setting up your bashrc/bash_profile and setting global ruby)
[2012-10-22 22:03:20 -0400] hoover_damm: almost sounds like the days of ./configure && make install
[2012-10-22 22:03:21 -0400] hoover_damm: were easier
[2012-10-22 22:03:47 -0400] jl_: okay.. so if I need to just work around this for the moment.. I'm trying to figure out where the rb scripts need to go
[2012-10-22 22:04:01 -0400] jl_: I've heard nightmares about rbenv
[2012-10-22 22:04:06 -0400] jl_: so never looked into it
[2012-10-22 22:04:28 -0400] joonas: rbenv is great
[2012-10-22 22:04:34 -0400] joonas: nothing wrong with it :)
[2012-10-22 22:04:49 -0400] joonas: rvm is nightmare ;)
[2012-10-22 22:04:56 -0400] bluepojo: oh you also have to remember to rbenv rehash every time you install something with a bin
[2012-10-22 22:05:15 -0400] jl_: ok. this sucks.
[2012-10-22 22:05:56 -0400] hoover_damm: seems like too many backflips in here, time to &
[2012-10-22 22:06:32 -0400] joonas: bluepojo: unless you have https://github.com/scoz/rbenv-rehash ;)
[2012-10-22 22:07:56 -0400] bluepojo: joonas: oooooh
[2012-10-22 22:08:37 -0400] bluepojo: joonas: ty, I think I'll use this
[2012-10-22 22:09:43 -0400] _0x783czar: Random question, does anyone know what the node info upload limit is on Hosted Chef?
[2012-10-22 22:09:59 -0400] fujin: It's not a database.
[2012-10-22 22:10:24 -0400] fujin: Probably not worth knowing the answer.
[2012-10-22 22:11:01 -0400] fujin: (unfortunately, I do not know)
[2012-10-22 22:11:43 -0400] _0x783czar: fujin: just curious because I was trying to help a guy who was getting 413 errors when registering new nodes.
[2012-10-22 22:12:08 -0400] fujin: Windows?
[2012-10-22 22:12:31 -0400] fujin: I know there was some drama many moons ago with superfluous node data on Windows platforms. Not sure of current status
[2012-10-22 22:13:17 -0400] _0x783czar: fujin: hmm, could be, I'm not sure if it was or not.  It was just a forum post and it got me wondering.
[2012-10-22 22:15:13 -0400] fujin: Stack trace of the 413?
[2012-10-22 22:16:02 -0400] _0x783czar: fujin: all he gave was: FATAL: Net::HTTPServerException: 413 "Request Entity Too Large"
[2012-10-22 22:16:58 -0400] _0x783czar: fujin: I've encountered that on OSS Chef and fixed it by upping the client_max_body_size in nginx.conf, but I don't know what would cause it for sure on Hosted
[2012-10-22 22:17:02 -0400] fujin: Hosted Chef clients can make use of Opscode support to track shit like that
[2012-10-22 22:17:37 -0400] fujin: Probably similar. I'd be looking at what is causing the amazingly oversized node data
[2012-10-22 22:17:46 -0400] _0x783czar: fujin: yeah, not sure why he didn't turn there instead of Stackoverflow.
[2012-10-22 22:17:55 -0400] _0x783czar: fujin: yeah that's what I told him to do.
[2012-10-22 22:20:06 -0400] fujin: Gzip compression should help with that a lot (on hosted chef, anyway). Hard to say. Could easily be a designed restriction on the hosted chef platform
[2012-10-22 22:23:15 -0400] _0x783czar: fujin: yeah I'd imagine on hosted chef it's more of client side issue, otherwise it'd be a pretty common problem.
[2012-10-22 22:24:25 -0400] fujin: Indeed, not something we've seen before
[2012-10-22 22:24:49 -0400] rava: heya, quick question on using cookbooks that span functionality across different packages like logrotate. is it more correct to require the cookbook and it's (in this case the definition) in other package cookbooks for defining their logrotate config file, or setup the recipes in the logrotate cookbook?
[2012-10-22 22:26:26 -0400] rava: i can see arguements for either or, but it seems like it would be more modular and less hassle to do it in the different cookbooks and recipes, but i might be missing something. or are cookbooks supposed to be as autonomous as possible (ie, all configs pertaining to the usage of a package be self contained in the cookbook)
[2012-10-22 22:26:55 -0400] jl_: erm. yea. so at some point I couldn't use an object operation that was in one of my shef scripts on my local host b/c of ruby version 1.8 vs 1.9
[2012-10-22 22:27:02 -0400] jl_: so I installed 1.9 and symlinked
[2012-10-22 22:27:14 -0400] jl_: thus my sudo gem install was using my brew installed ruby
[2012-10-22 22:27:33 -0400] jl_: just in case some other fool runs into this.
[2012-10-22 22:30:04 -0400] bluepojo: jl_: did you solve the issue?
[2012-10-22 22:30:13 -0400] jl_: no
[2012-10-22 22:30:17 -0400] bluepojo: oof
[2012-10-22 22:30:26 -0400] jl_: thought I did for a half second though.
[2012-10-22 22:30:30 -0400] jl_: yay.
[2012-10-22 22:35:51 -0400] _0x783czar: OSS Chef question, does anyone know of what might cause my server to 504 whenever I try to open the "status" tab?
[2012-10-22 22:39:15 -0400] jl_: meh. just uninstalled everything put the ruby back to 1.8 version in /usr/bin and reinstalled from gems
[2012-10-22 22:39:44 -0400] jl_: now I'm getting a new warning message about my SSL not supporting nonblocking 'Excon'
[2012-10-22 22:39:57 -0400] jl_: but I can live w/ that
[2012-10-22 22:43:28 -0400] jl_: which a sudo gem install excon took care od
[2012-10-22 22:46:13 -0400] btm: Chef 10.16.0 is out: http://www.opscode.com/blog/2012/10/22/chef-10-16-0-released/
[2012-10-22 22:46:20 -0400] fujin: Woot
[2012-10-22 22:47:04 -0400] rava: yay
[2012-10-22 22:48:43 -0400] rava: huh, i know i've used 'environment from file' with knife before this release
[2012-10-22 22:50:37 -0400] btm: rava: it only worked for a single environment and was pretty crufty.
[2012-10-22 22:50:51 -0400] btm: single environment file, that is.
[2012-10-22 22:51:00 -0400] btm: there's *.rb and -a support now.
[2012-10-22 22:51:05 -0400] btm: that's slighly smarter.
[2012-10-22 22:51:47 -0400] fujin: It just looked like the shell expansion / multiple upload would work up until now
[2012-10-22 22:52:27 -0400] fujin: Should have been a minor code change to bring it in line with role from file, etc
[2012-10-22 22:53:04 -0400] rava: nice
[2012-10-22 22:53:06 -0400] rava: thanks for the clarify
[2012-10-22 22:54:12 -0400] rava: anyone using the logrotate cookbook?
[2012-10-22 22:54:19 -0400] gyre008: hi IM trying to create a application_node cookbook which should be using Application cookbookwhen I stick appropriate resource into recipe like this: https://gist.github.com/3935247  none of the Application sub resource gets calledANY ideas ? I ran out of mine :(
[2012-10-22 22:54:49 -0400] gyre008: interesting thing is that Application bits (like git checkout etc.) DO get runonly the sub resource's actions don't mmm
[2012-10-22 22:55:28 -0400] bluepojo: gyre008: what error are you getting?
[2012-10-22 22:55:47 -0400] gyre008: bluepojo, I'm not getting ANY errorthats the weirdest thing
[2012-10-22 22:55:55 -0400] bluepojo: odd
[2012-10-22 22:56:00 -0400] gyre008: node sub resource is getting completely ignored!
[2012-10-22 22:56:03 -0400] bluepojo: the application cookbook doesn't have the best reputation, tbh
[2012-10-22 22:56:07 -0400] bluepojo: I know we don't use it at all
[2012-10-22 22:56:22 -0400] gyre008: the cookbook name is application_nodeso it should be looked up by application cookbook mmm
[2012-10-22 22:56:29 -0400] btm: I would disagree and say that I know people who love the application cookbook ;)
[2012-10-22 22:56:49 -0400] gyre008: btm, hopefully those people are round here :)
[2012-10-22 22:56:56 -0400] gyre008: to help me out haha
[2012-10-22 22:57:45 -0400] btm: gyre008: I could fathom sub-resources having an issue in a post why-run world.
[2012-10-22 22:58:00 -0400] bluepojo: We use this to deploy all our applications: https://github.com/RiotGames/artifact-cookbook
[2012-10-22 22:58:51 -0400] btm: gyre008: could you try 'gem install chef -v 10.12.0  && chef_client _10.12.0_' versus chef whatever version you're using?
[2012-10-22 22:59:11 -0400] btm: gyre008: and if 10.12.0 works okay but 10.14.0+ doesn't, please file a bug on http://tickets.opscode.com
[2012-10-22 22:59:30 -0400] erik__: Hey, can anyone help me with cookbook versioning and pathnames?   I understand versioning and such just fine, I've just got a question about whether I'm stuck using git branches to store everything...
[2012-10-22 22:59:45 -0400] gyre008: btm, I could but not at the momentit's a production machine.would need some permission from some people...
[2012-10-22 23:00:02 -0400] bluepojo: erik__: what specific problems are you having?
[2012-10-22 23:00:05 -0400] gyre008: btm, why do you suspect the problem lies with chef version anyway ?
[2012-10-22 23:01:15 -0400] erik__: given my cookbook_path is:   /foo/cookbooks     I'd like my versions to be stored this way:   /foo/cookbooks/<cname>/<cversion>/metadata.rb     That is, embed the cookbook version in the path name. NOT require someone to manipulate git branches.
[2012-10-22 23:01:20 -0400] btm: gyre008: why-run (first in 10.14.0) changed the way that resources execute their actions using #converge_by. I could see the sub-resource queueing actions with #converge_by but that queue never getting walked.
[2012-10-22 23:01:40 -0400] bluepojo: erik__: are you managing all your cookbooks in a single repository?
[2012-10-22 23:01:48 -0400] erik__: Yes.
[2012-10-22 23:01:54 -0400] gyre008: mmm btm
[2012-10-22 23:02:05 -0400] gyre008: we are on the latest chef10.14.4
[2012-10-22 23:02:07 -0400] bluepojo: erik__: That tends to make things difficult to manage. You're probably better off creating a new repository for every cookbook.
[2012-10-22 23:02:17 -0400] bluepojo: similar to how opscode does on github
[2012-10-22 23:02:22 -0400] bluepojo: then you can manage your versions in tags
[2012-10-22 23:03:08 -0400] erik__: Wouldn't I have to change my cookbook_path in ~/.chef/knife.rb  every time I wanted to do work on a new cookbook?
[2012-10-22 23:03:19 -0400] erik__: (or the commandline equivalent)?
[2012-10-22 23:03:33 -0400] gyre008: btm haha     * Whyrun not supported for application[node_phone], bypassing load. (Skipped: whyrun not supported by provider Chef::Provider::Application)
[2012-10-22 23:03:39 -0400] bluepojo: no, you can make a directory called "cookbooks" that you check everything out into
[2012-10-22 23:03:46 -0400] bluepojo: and set that as your cookbooks directory
[2012-10-22 23:03:49 -0400] bluepojo: or if you want to be super cool
[2012-10-22 23:04:03 -0400] bluepojo: you can do things the berkshelf way and use the berkshelf uploader: berkshelf.com
[2012-10-22 23:04:31 -0400] bluepojo: erik__: here's a detailed guide on this workflow: http://vialstudios.com/guide-authoring-cookbooks.html
[2012-10-22 23:04:55 -0400] btm: erik__: yeah, most LWRPs don't support chef-client being run via 'chef-client --why-run' yet, but I'm talking about the internal code that is a product of the why-run feature.
[2012-10-22 23:05:07 -0400] erik__: Right, but then I'd have the problem that I think chef would see /foo/cookbooks/me/1.0   and /foo/cookbooks/me/2.0   as needing different cookbook names (i.e. that they weren't just versions of the same cookbook, but different cookbooks)
[2012-10-22 23:05:48 -0400] bluepojo: erik__: I'm not sure what you're saying you can upload multiple versions of the same cookbook to the chef server
[2012-10-22 23:06:00 -0400] bluepojo: cookbooks are explicitly versioned in the metadata.rb
[2012-10-22 23:07:28 -0400] btm: i guess i meant gyre008 above, sorry. coffee break time.
[2012-10-22 23:07:36 -0400] gyre008: :)
[2012-10-22 23:10:31 -0400] erik__: I got that (i.e. Chef versions are in metadata.rb).    Let's forget about git for the moment.    If cookbook_path=/foo,   when I run 'knife cookbook create Me', I get a cookbook /foo/cookbooks/Me/   If I then try move that directory to /foo/cookbooks/Me/1.0/ , then run 'knife cookbook upload Me'  ,  knife can't find the cookbook.
[2012-10-22 23:11:04 -0400] bluepojo: you shouldn't be versioning with subdirectories
[2012-10-22 23:11:17 -0400] bluepojo: that's the job of your source control
[2012-10-22 23:11:27 -0400] bluepojo: it's overkill to have both git revisions and subdirectories
[2012-10-22 23:11:48 -0400] bluepojo: as git revisions solve the problem (far more elegantly) that subdirectories is trying to solve in this case
[2012-10-22 23:12:37 -0400] erik__: Well...   Not really.  It's a whole lot more clear with subdirectories at to which branch your on, and far easier to pull patches and such between them (if I'm storing each "version" as a git repo).
[2012-10-22 23:12:44 -0400] gyre008: yupsubdirectories create total madness.just like application cookbook in my case :D
[2012-10-22 23:13:10 -0400] gyre008: subdirectories are sooooooo SVN :)
[2012-10-22 23:13:17 -0400] gyre008: chef is SOOOOO git
[2012-10-22 23:13:59 -0400] erik__: This is the Mercurial vs Git debate, where Hg uses directories to segregate major branches, and Git perfers internal tagging and naming.
[2012-10-22 23:14:38 -0400] bluepojo: no, hg has proper branching built in
[2012-10-22 23:14:42 -0400] bluepojo: I used both git and hg for years
[2012-10-22 23:14:45 -0400] bluepojo: at different jobs
[2012-10-22 23:15:13 -0400] bluepojo: long story short: use real branches not subdirectories and all your problems will be solved
[2012-10-22 23:15:14 -0400] bluepojo: :D
[2012-10-22 23:15:20 -0400] erik__: hg NOW has branching, but all the places I've worked with it, the populace uses directories for major version forks.
[2012-10-22 23:15:21 -0400] bluepojo: or not even branches, use tags
[2012-10-22 23:15:38 -0400] bluepojo: put simply: the populace was doing it wrong
[2012-10-22 23:15:48 -0400] bluepojo: I don't remember how long ago hg got branches but it was not recently
[2012-10-22 23:15:52 -0400] bluepojo: in fact
[2012-10-22 23:15:58 -0400] bluepojo: I don't recall it ever not having proper branches
[2012-10-22 23:16:14 -0400] bluepojo: subdirectories is an svnism
[2012-10-22 23:16:24 -0400] bluepojo: and it'll give you headaches like you're experiencing now
[2012-10-22 23:16:40 -0400] erikh: you can't delete branches in hg
[2012-10-22 23:16:48 -0400] erik__: Hg had anon branches forever, bit added Named branches a couple of years ago.  Not really - it's a developer vs systems viewpoint.
[2012-10-22 23:17:10 -0400] Xentac: for some reason "knife ssh" always gives me Net::SSH::AuthenticationFailed, whether I pass an identity file or not... I can ssh into the host no problem with ssh and the key is in my ssh-agent
[2012-10-22 23:17:40 -0400] Xentac: I tried updating my chef gem and poking around in the code a bit
[2012-10-22 23:17:41 -0400] erikh: it's actually the only reason i don't use it
[2012-10-22 23:18:08 -0400] Xentac: "knife ssh ... screen" totally works, but that's cause it executes ssh by itself
[2012-10-22 23:18:31 -0400] Xentac: this all used to work
[2012-10-22 23:18:35 -0400] Xentac: but I haven't run it for a little while now
[2012-10-22 23:18:36 -0400] bluepojo: erikh: you can "close" branches in hg
[2012-10-22 23:18:40 -0400] bluepojo: but that's silly and annoying
[2012-10-22 23:18:54 -0400] rava: new release runs the webui much faster it seems
[2012-10-22 23:18:58 -0400] bluepojo: it serves the purpose that deleting a branch would
[2012-10-22 23:19:01 -0400] erik__: I'd prefer to do it the Hg way for the simple reason that when looking at a checkout of master, it's simple to see ALL the major releases, and to do compares of them.    If you're saying that Chef simply requires that all cookbooks live at cookbook_path/<cookbookname>/metadata.rb   well, I'll just have to live.
[2012-10-22 23:19:05 -0400] rava: at least it doesn't take a minute for the status page to load now
[2012-10-22 23:19:15 -0400] erikh: they still stick around forever, iirc
[2012-10-22 23:19:18 -0400] bluepojo: erik__: you can diff tags exactly as you're discribing
[2012-10-22 23:19:31 -0400] bluepojo: erik__: or branches for that matter
[2012-10-22 23:19:53 -0400] bluepojo: hg diff -r $tag1:$tag2
[2012-10-22 23:20:59 -0400] breckognize: Is it appropriate to ask newbie support questions here?
[2012-10-22 23:21:03 -0400] bluepojo: sure
[2012-10-22 23:21:17 -0400] erik__: I'm not saying you can't do it "the git way" in Hg.  The two have essentially converged in user functionality.  I'm saying that I *prefer* the Hg way where the entire thing isn't stored under a single repo path.
[2012-10-22 23:21:27 -0400] bluepojo: erik__: that is "the hg way"
[2012-10-22 23:21:44 -0400] bluepojo: it may not be "the old hg way"
[2012-10-22 23:22:01 -0400] breckognize: My question is in regards to chef's bootsrap step. When I run "knife bootstrap..", chef client is loaded onto the server I'm trying to configure, but it doesn't create a client.rb or client.pem file. Should it? Or am I confused about when that happens?
[2012-10-22 23:22:03 -0400] bluepojo: anyway, I don't know how to solve the issue if you want to use subdirectories to manage your tags
[2012-10-22 23:22:05 -0400] erik__: Yes.  Take a look at the OpenJDK project - every time they fork for a maintenance release, they create a new repo, NOT a new branch.
[2012-10-22 23:22:21 -0400] bluepojo: OpenJDK is not the pinnacle of best practices.
[2012-10-22 23:22:44 -0400] bluepojo: breckognize: it should create a client.pem on the node when you bootstrap it are you getting a complete chef run?
[2012-10-22 23:23:40 -0400] erik__: I'm not here to debate that. I'm simply wondering if Chef would support searching under a cookbook_path for cookbook information that was more than one directory deep.
[2012-10-22 23:23:41 -0400] breckognize: I'm not seeing any errors. It echoes my validation.pem and then the run completes.
[2012-10-22 23:24:02 -0400] bluepojo: curious are you able to gist your log?
[2012-10-22 23:24:23 -0400] bluepojo: erik__: no, chef is not written to support that style of directory layout
[2012-10-22 23:24:48 -0400] bluepojo: however
[2012-10-22 23:24:50 -0400] bluepojo: if you use berkshelf
[2012-10-22 23:24:56 -0400] bluepojo: you can store your cookbooks however you want
[2012-10-22 23:24:58 -0400] erik__: That's the info that I needed. Thanks.   I'll write my supporting software to do git branching, then.
[2012-10-22 23:25:20 -0400] bluepojo: well, perhaps not with subdirectories, actually
[2012-10-22 23:25:21 -0400] breckognize: certainly - where is that log file stored?
[2012-10-22 23:25:22 -0400] bluepojo: now that I think of it
[2012-10-22 23:25:23 -0400] bluepojo: ah well
[2012-10-22 23:25:34 -0400] bluepojo: breckognize: I mean the boostrap run
[2012-10-22 23:25:38 -0400] erik__: Thanks, I'll look at berkshelf and see if that's what would be useful for me.
[2012-10-22 23:26:09 -0400] bluepojo: berkshelf.com http://vialstudios.com/guide-authoring-cookbooks.html
[2012-10-22 23:35:50 -0400] gyre008: it looks like method_missing() of the application cookbook is not even being called.which has a consequence of my application_ resource not being loaded...interesting
[2012-10-22 23:36:43 -0400] jl_: hrm, if anyone has any experience with using the knife rackspace plugin, plz stand up, plz stand up
[2012-10-22 23:37:53 -0400] _0x783czar: Any idea what might cause OSS Chef's Status page to not work, along with search failing?
[2012-10-22 23:37:59 -0400] _0x783czar: I keep getting 504 errors
[2012-10-22 23:38:25 -0400] jl_: _0x783czar: when search fails, I usually just restart chef-solr
[2012-10-22 23:38:29 -0400] _0x783czar: I'm still a bit new to which services support what in OSS Chef and I'm not exactly sure where to start looking.
[2012-10-22 23:38:47 -0400] jl_: I dunno what the status page is. if its a webui thing, I wouldn't know as I've never used the webui so far
[2012-10-22 23:38:47 -0400] _0x783czar: jl_: I'll give that a shot.  But do you think that would affect Status as well?
[2012-10-22 23:39:43 -0400] jl_: _0x783czar: as I said, I don't know about that
[2012-10-22 23:40:05 -0400] _0x783czar: jl_: what command do you issue to restart it?  Just 'service chef-solr restart' ?
[2012-10-22 23:40:06 -0400] miah: hullo
[2012-10-22 23:40:46 -0400] jl_: maybe. I still use /etc/init.d/chef-solr restart
[2012-10-22 23:40:50 -0400] jl_: or I did
[2012-10-22 23:40:59 -0400] jl_: I have bluepill watching it now
[2012-10-22 23:41:08 -0400] _0x783czar: jl_: alright, thanks, I'll give that a shot.
[2012-10-22 23:41:37 -0400] yfeldblum: jl_, i got some ... i use rvm on my workstations, have a Gemfile in my chef-repo with "knife-rackspace" in it, and use bundler when invoking knife commands
[2012-10-22 23:41:39 -0400] jl_: not sure bluepill is the best option, but I saw some examples w/it and haven't had any problems
[2012-10-22 23:43:07 -0400] jl_: yea, I can't even get a server started. Made some API creds, and when trying to 'server create' I just get a 'bad request'
[2012-10-22 23:43:20 -0400] jl_: but, my boss just said "f this. let's go home.'
[2012-10-22 23:43:23 -0400] jl_: so
[2012-10-22 23:43:29 -0400] jl_: on that note. I will continue this tomorrow
[2012-10-22 23:43:31 -0400] jl_: :)
[2012-10-22 23:43:49 -0400] jl_: thx for the help
[2012-10-22 23:48:49 -0400] gyre008: jl_ I have some experience
[2012-10-22 23:56:52 -0400] cwj: seattle i am in you
[2012-10-22 23:58:24 -0400] _0x783czar: cwj: welcome to paradise
[2012-10-22 23:58:46 -0400] _0x783czar: cwj: wet, rainy, paradise :p
[2012-10-22 23:58:52 -0400] cwj: indeed
[2012-10-22 23:59:04 -0400] cwj: s'ok, i know about weather
[2012-10-22 23:59:26 -0400] _0x783czar: cwj: I personally like the rain, but I was raised in Seattle
[2012-10-22 23:59:35 -0400] _0x783czar: although I'm working in Idaho now

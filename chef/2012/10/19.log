[2012-10-19 00:18:08 -0400] d0-ops: Hi I am hoping someone can help. I have been struggling with my first chef configuration for more than a day.
[2012-10-19 00:18:09 -0400] d0-ops: Details:
[2012-10-19 00:18:09 -0400] d0-ops: Two EC2 instances running Cent0S 5.7
[2012-10-19 00:18:09 -0400] d0-ops: Omnibus Chef-Server and Chef-Client install
[2012-10-19 00:18:10 -0400] d0-ops: Desired configuration:
[2012-10-19 00:18:10 -0400] d0-ops: Chef-Server as (Chef-workstation)
[2012-10-19 00:18:11 -0400] d0-ops: Problem:
[2012-10-19 00:18:11 -0400] d0-ops: My understanding is that I am to use the knife tool to create the .pem files for my Chef-client so that I can use the Chef-Server on the same EC2 instance as both workstation and Chef-Server.
[2012-10-19 00:18:12 -0400] d0-ops: When running the knife command to accomplish I receive an error that the configuration file can not locate the validation.pem file. I am not sure which step creates the .pem files.
[2012-10-19 00:18:40 -0400] bluepojo: the validation.pem comes from the chef server
[2012-10-19 00:18:49 -0400] bluepojo: it gets generated when you start it up, iirc
[2012-10-19 00:18:57 -0400] loveshell: ntp syncd?
[2012-10-19 00:19:01 -0400] bluepojo: look in /etc/chef/
[2012-10-19 00:19:07 -0400] bluepojo: this isn't an ntp error message
[2012-10-19 00:19:12 -0400] bluepojo: d0-ops:
[2012-10-19 00:19:27 -0400] d0-ops: yes i've looked in there as well. it's not created.
[2012-10-19 00:19:49 -0400] d0-ops: i've run find / -name validate*.pem -print and did not find this file
[2012-10-19 00:20:39 -0400] d0-ops: root@ip-10-252-51-133 chef]# ls
[2012-10-19 00:20:39 -0400] d0-ops: bin  client.rbembedded  nodes  server.rb  version-manifest.txt
[2012-10-19 00:20:39 -0400] d0-ops: [root@ip-10-252-51-133 chef]# cd bin
[2012-10-19 00:20:40 -0400] d0-ops: [root@ip-10-252-51-133 bin]# ls
[2012-10-19 00:20:40 -0400] d0-ops: chef-client  chef-soloerubisknife  ohai  restclient  shef  tt
[2012-10-19 00:22:45 -0400] d0-ops: it seems as if the key is required to start chef server as well as to configure knife
[2012-10-19 00:23:01 -0400] d0-ops: not sure if there is another way to create this pem file ? maybe with openssl ?
[2012-10-19 00:23:48 -0400] miah: validation.pem is used to register new clients, you don't need it if you're doing chef-solo, or not running chef-server.
[2012-10-19 00:23:54 -0400] bluepojo: validation.pem is only required to create clients
[2012-10-19 00:24:43 -0400] miah: to be more specific, its only required to create clients 'automatically' when you're starting chef-client a host for the first time. you can also create the client beforehand then install the certificate.
[2012-10-19 00:24:46 -0400] d0-ops: my desired configuration is not chef-solo. my desired configuration is to use the two ec2 instances as chef-server and workstation and the other as chef-client
[2012-10-19 00:25:03 -0400] miah: then you need to start chef-server on one host.
[2012-10-19 00:25:12 -0400] miah: also, fwiw. please don't paste in channel. use gist, nopaste, whatever.
[2012-10-19 00:25:22 -0400] d0-ops: okay sorry
[2012-10-19 00:26:07 -0400] miah: is the chef-server omnibus even released yet? i know there is a demo release out that works.
[2012-10-19 00:26:11 -0400] d0-ops: i think the problem i am having is that i can not start chef-server or use the knife client without the .pem file and i am uncertain how to create the .pem file.
[2012-10-19 00:26:23 -0400] miah: you don't have to create the ppem
[2012-10-19 00:26:28 -0400] miah: chef-server will create it when it starts
[2012-10-19 00:26:43 -0400] d0-ops: right but it won't start
[2012-10-19 00:26:51 -0400] miah: then fix that problem before moving on
[2012-10-19 00:27:26 -0400] d0-ops: the error message posted shows that chef-server requires the validation.pem file to start and will not start without it.
[2012-10-19 00:27:47 -0400] d0-ops: so how do i create the .pem file by starting the server if the server requires it to start /
[2012-10-19 00:27:58 -0400] miah: the server doesnt require it to start
[2012-10-19 00:28:58 -0400] miah: if you are seeing that error, you are probably starting chef-client
[2012-10-19 00:29:46 -0400] miah: time to catch bart. bbl.
[2012-10-19 00:30:32 -0400] d0-ops: ahh okay so i need to install chef-server somehow
[2012-10-19 00:30:36 -0400] d0-ops: then start over.
[2012-10-19 00:31:22 -0400] d0-ops: this has been a very difficult installation. why can't one yum install chef-server
[2012-10-19 00:32:21 -0400] d0-ops: so should i use chef-solo then to install chef-server ?
[2012-10-19 00:32:31 -0400] hoover_damm: yes
[2012-10-19 00:33:42 -0400] d0-ops: okay thanks.
[2012-10-19 00:35:50 -0400] imanelephant: Does anyone know what the "returned 6, expected 0" error is when creating users with Chef?
[2012-10-19 00:36:14 -0400] imanelephant: flaccid: also I found the root cause of the rax chef issue/s
[2012-10-19 00:36:51 -0400] imanelephant: they have scripts that are supposed to remove chef & rvm after a server is provisioned, but they don't remove *everything*
[2012-10-19 00:37:45 -0400] imanelephant: so you get the server in a dirty state. Compounding this, these scripts leave the servers in different states in each of their 2 regions
[2012-10-19 00:38:22 -0400] bluepojo: imanelephant: pass -vv to knife to get better output
[2012-10-19 00:38:34 -0400] bluepojo: or do you mean during a chef run
[2012-10-19 00:38:42 -0400] bluepojo: in that case, you should take the command that failed
[2012-10-19 00:38:44 -0400] bluepojo: log on to the box
[2012-10-19 00:38:44 -0400] imanelephant: chef run
[2012-10-19 00:38:46 -0400] bluepojo: and try to run it
[2012-10-19 00:38:50 -0400] imanelephant: same box
[2012-10-19 00:38:57 -0400] bluepojo: it should have printed the command it tried to run
[2012-10-19 00:38:58 -0400] bluepojo: and failed
[2012-10-19 00:39:21 -0400] imanelephant: also, don't forget verbose is -V & -VV
[2012-10-19 00:39:29 -0400] imanelephant: -v & -vv just prints version
[2012-10-19 00:39:48 -0400] bluepojo: lol?
[2012-10-19 00:40:19 -0400] imanelephant: -vVv returns a verbose version
[2012-10-19 00:40:37 -0400] bluepojo: clever
[2012-10-19 00:40:40 -0400] imanelephant: (verily.)
[2012-10-19 00:52:44 -0400] imanelephant: hmm, my user recipe defined /home/someuser in etc/passwd but didn't actually create the directory
[2012-10-19 00:53:06 -0400] imanelephant: I got it right off the opscode wiki, I'm guessing there is another line needed to make the directory
[2012-10-19 00:53:32 -0400] hoover_damm: https://github.com/opscode-cookbooks/users
[2012-10-19 00:53:58 -0400] hoover_damm: unless you are trying to reinvent the wheel intentionally
[2012-10-19 00:55:33 -0400] imanelephant: I am
[2012-10-19 00:56:08 -0400] imanelephant: I have a number of cookbooks on github bookmarked, but prefer to slog through it myself
[2012-10-19 00:56:15 -0400] imanelephant: or else it won't sink in   ;-)
[2012-10-19 00:57:11 -0400] hoover_damm: actually it will
[2012-10-19 00:57:37 -0400] hoover_damm: being able to accept other peoples cookbooks is part of the cycle of not letting Chef consume too much time
[2012-10-19 00:57:47 -0400] imanelephant: ah, that's a good point
[2012-10-19 00:57:55 -0400] hoover_damm: you don't want to own 100% of the universe
[2012-10-19 00:58:06 -0400] imanelephant: however I'm actually not seeing in that cookbook where it creates the home dir.... yet
[2012-10-19 00:58:11 -0400] hoover_damm: part of using chef succesfully is building up a list of cookbooks you use, like, etc
[2012-10-19 00:58:23 -0400] hoover_damm: and then creating those to help build up your box that you can't find
[2012-10-19 00:58:42 -0400] hoover_damm: and then once you have a good spot then start iterating and fixing your cookbooks
[2012-10-19 00:58:49 -0400] hoover_damm: and improving them, and improving those other cookbooks you use
[2012-10-19 00:59:25 -0400] hoover_damm: and wait 3-9months
[2012-10-19 00:59:50 -0400] imanelephant: thanks hoover_damm that's a really important point, that I don't think is clearly made on the documentation pages
[2012-10-19 00:59:53 -0400] hoover_damm: having used chef for years, I can honestly nothing comes easily... everything worth learning takes time, patience
[2012-10-19 00:59:56 -0400] hoover_damm: and hard work
[2012-10-19 01:00:06 -0400] imanelephant: years?   :-\
[2012-10-19 01:00:18 -0400] hoover_damm: indeed
[2012-10-19 01:00:22 -0400] hoover_damm: because it's a never ending cycle
[2012-10-19 01:00:37 -0400] hoover_damm: as chef upgrades, patterns change, new things become possible
[2012-10-19 01:00:51 -0400] imanelephant: Of course, that's very different than what Rackspace told us
[2012-10-19 01:01:31 -0400] hoover_damm: basically chef allows operations people (imo) to work smarter not harder.
[2012-10-19 01:02:15 -0400] hoover_damm: have you ever worked in an organization where most everything is notes scribbled on a wiki page from other sysadmins? It's amazing how much time you can waste trying to pick up someone elses work and pushing it through
[2012-10-19 01:02:58 -0400] imanelephant: http://tickets.opscode.com/browse/CHEF-2409
[2012-10-19 01:03:33 -0400] hoover_damm: ouch
[2012-10-19 01:04:51 -0400] jtimberman: imanelephant: yeah.
[2012-10-19 01:04:54 -0400] jtimberman: I'm not a fan of that bug.
[2012-10-19 01:04:59 -0400] d0-ops: hi i am continuing with attempting to install chef-server via chef-solo
[2012-10-19 01:05:36 -0400] d0-ops: on centOS. i find the documentation to not be difficult so i was pointed to the irc channel
[2012-10-19 01:05:37 -0400] d0-ops: http://pastebin.com/rVigxi1U
[2012-10-19 01:06:14 -0400] d0-ops: i am receiving errors that state that chef-solo can not find chef-solr
[2012-10-19 01:06:29 -0400] d0-ops: is there a way to reference the correct chef-solr
[2012-10-19 01:06:52 -0400] d0-ops: would you suggest installing the server manually ?
[2012-10-19 01:07:28 -0400] d0-ops: also are these the only options ? is there a package install
[2012-10-19 01:08:38 -0400] hoover_damm: d0-ops, i don't think your meant to bootstrap chef-server from omnibus
[2012-10-19 01:09:03 -0400] hoover_damm: d0-ops, it's looking for a regular ruby install in /usr/lib/ruby/gems/ which doesn't exist... which is why the error on line 16 exists
[2012-10-19 01:09:48 -0400] hoover_damm: d0-ops, http://tmtk75.github.com/2012/05/05/chef_server_installation_on_centos-6.2.html
[2012-10-19 01:10:04 -0400] d0-ops: do you think the problem is that i installed from omnibus and then attemped to install the server ?
[2012-10-19 01:10:12 -0400] hoover_damm: yes
[2012-10-19 01:10:45 -0400] d0-ops: i am running cent0S 5.7
[2012-10-19 01:11:06 -0400] d0-ops: so i should attempt the install again only using chef-solo ?
[2012-10-19 01:11:33 -0400] hoover_damm: Basically i would suggest installing ruby and following what I linked... it's likely to work
[2012-10-19 01:12:02 -0400] hoover_damm: I imagine the instance you are using is pretty trashed, and as your on ec2 there is no you reason you can't run 6.2
[2012-10-19 01:12:05 -0400] hoover_damm: or 4.2
[2012-10-19 01:12:05 -0400] hoover_damm: or dogfood
[2012-10-19 01:14:09 -0400] d0-ops: you are correct it is hosed. i thought it best to use the version most similar to the red-hat version this will eventually be installed on (if i don't bail out of the install all together and install puppet which can be install via rpm)
[2012-10-19 01:14:29 -0400] d0-ops: okay i will try again. i appreciate the assistance
[2012-10-19 01:23:57 -0400] cssm: Anyone able to advise whether knife-openstack is compatible with Rackspace cloud servers ?  A search of the logs for this channel and an online search doesn't reveal any definitive answers.
[2012-10-19 01:24:50 -0400] hoover_damm: cssm, rackspace isn't really openstack
[2012-10-19 01:24:53 -0400] hoover_damm: cssm, that's your answer
[2012-10-19 01:25:00 -0400] hoover_damm: cssm, knife-rackspace should work
[2012-10-19 01:25:40 -0400] cssm: hoover_damm, thank you!
[2012-10-19 01:46:25 -0400] imanelephant: I'm about to take a look for a recipe that will allow me to create sql databases on target machines
[2012-10-19 01:46:38 -0400] hoover_damm: imanelephant, database cookbook?
[2012-10-19 01:46:45 -0400] imanelephant: pretty much
[2012-10-19 02:12:34 -0400] deathdonut: Can someone answer somewhat philosophical question? I'm  just starting out trying chef, and the idea of replacing the entirety of a config file that came with my distribution rather than changing the bits that need changing feels weird.
[2012-10-19 02:13:13 -0400] gchristensen: deathdonut: I felt that way too, and I'm still new to chef - so my answer may be bad, but I'll give it
[2012-10-19 02:14:20 -0400] gchristensen: deathdonut: using chef, all your servers will always have the same configurations (if done right.) many of the default distribution configs are just represetiations of defaults, or for some reason the dist changed by rewriting the config you can ensure even dissimilar environments have identical configurations.
[2012-10-19 02:15:58 -0400] deathdonut: I guess I trust distribution maintainers to have a sane / secure default config. Using chef I guess I place that trust in the guys at opscode who write the included configs?
[2012-10-19 02:17:40 -0400] hoover_damm: deathdonut, that's part of the problem of 'owning' a file... is if you want guarantee you have to own 100% of the content
[2012-10-19 02:18:15 -0400] hoover_damm: deathdonut, you can use sed/gsub/other search/replace methods to update a distro config file to where you want it to be... but distros really have to deliver that ability for it to be sane
[2012-10-19 02:18:35 -0400] hoover_damm: deathdonut, you can get pretty far with ubuntu/debian and preseeding but it doesn't cover everything
[2012-10-19 02:18:55 -0400] hoover_damm: and whenever you change something a package installs with debian you call upon the ucf curse
[2012-10-19 02:19:00 -0400] hoover_damm: (user configuration file)
[2012-10-19 02:19:43 -0400] deathdonut: yeah, I guess that's the other thing I was wondering about - how chef interacts with those preexisting debian config scripts when a package gets updated, for example.
[2012-10-19 02:19:46 -0400] hoover_damm: deathdonut, http://manpages.ubuntu.com/manpages/lucid/man1/ucf.1.html
[2012-10-19 02:19:51 -0400] hoover_damm: you don't enable
[2012-10-19 02:19:56 -0400] hoover_damm: if you do :enable on the action
[2012-10-19 02:20:08 -0400] hoover_damm: you should read that man page, and use the ucf command to purge it out of the debian control
[2012-10-19 02:20:18 -0400] hoover_damm: s/enable/upgrade
[2012-10-19 02:20:29 -0400] hoover_damm: otherwise you end up with apt-get 100 errors
[2012-10-19 02:20:32 -0400] hoover_damm: which sucks
[2012-10-19 02:20:54 -0400] deathdonut: are the provided cookbooks built to disable that stuff?
[2012-10-19 02:21:01 -0400] hoover_damm: no
[2012-10-19 02:21:13 -0400] hoover_damm: I plan to bring that up on the Opscode summit... i imagine I will be hated for that
[2012-10-19 02:21:32 -0400] deathdonut: so if I just throw up a server, start configuring with chef... when I get package updates they'll conflict?
[2012-10-19 02:21:37 -0400] hoover_damm: most cookbooks do :install and action :install is the default, so packages don't :upgrade by default
[2012-10-19 02:21:52 -0400] hoover_damm: yes
[2012-10-19 02:21:59 -0400] hoover_damm: eventually
[2012-10-19 02:22:06 -0400] hoover_damm: if you don't today you will eventually
[2012-10-19 02:22:10 -0400] hoover_damm: :(
[2012-10-19 02:22:27 -0400] hoover_damm: deathdonut, i've been wanting to make debian know my changes... so that isn't so painful
[2012-10-19 02:22:52 -0400] deathdonut: :( indeed. RHEL and bretheren seem to have more of a hands off approach to config files...
[2012-10-19 02:23:11 -0400] deathdonut: is ubuntu the main os people use chef with?
[2012-10-19 02:23:11 -0400] hoover_damm: right
[2012-10-19 02:23:15 -0400] hoover_damm: yes
[2012-10-19 02:23:26 -0400] hoover_damm: Gentoo has a more 'rcs' approach to it
[2012-10-19 02:23:33 -0400] deathdonut: seems strange then that this isn't solved somehow.
[2012-10-19 02:23:34 -0400] hoover_damm: allowing you to make Gentoo learn what you change
[2012-10-19 02:23:45 -0400] hoover_damm: your the person to ask about it in awhile
[2012-10-19 02:23:57 -0400] hoover_damm: at least that i've noticed in #chef
[2012-10-19 02:24:12 -0400] hoover_damm: I assumed most people preferred to ignore this problem
[2012-10-19 02:24:14 -0400] hoover_damm: or were unaware of it
[2012-10-19 02:24:23 -0400] deathdonut: was just looking at the exim4 config... looks totally managed by debconf by default
[2012-10-19 02:24:27 -0400] hoover_damm: to me it's just part of making chef in the lifecycle
[2012-10-19 02:24:33 -0400] hoover_damm: ahh steal my exim cookbook
[2012-10-19 02:24:49 -0400] deathdonut: I probably will go with postfix anyway, exim was just what the old admin had configured
[2012-10-19 02:24:50 -0400] hoover_damm: deathdonut, https://github.com/damm/chef-exim
[2012-10-19 02:24:58 -0400] deathdonut: thanks though!
[2012-10-19 02:25:21 -0400] hoover_damm: deathdonut, https://github.com/damm/chef-exim/blob/master/recipes/default.rb#L10-L23
[2012-10-19 02:25:28 -0400] hoover_damm: that package does support some preseeding
[2012-10-19 02:25:38 -0400] hoover_damm: although it's a bit retarded about how it builds the config file each time you restart exim
[2012-10-19 02:25:57 -0400] hoover_damm: you can likely nudge it along and get where you want to I hope
[2012-10-19 02:26:03 -0400] hoover_damm: and postfix is the ubuntu standard
[2012-10-19 02:26:11 -0400] hoover_damm: not sure that really matters
[2012-10-19 02:27:09 -0400] deathdonut: so is the right approach to try and edit the files that get used when you do a dpkg-reconfigure, or to try and keep the debian package's hands off and manage yourself with chef?
[2012-10-19 02:27:39 -0400] hoover_damm: if you have to do dpkg-reconfigure you should do everything with preseed
[2012-10-19 02:27:52 -0400] hoover_damm: so debian can know about those choices
[2012-10-19 02:28:03 -0400] hoover_damm: if you cannot get all your choices honored with preseed, then you should take the next step
[2012-10-19 02:28:08 -0400] hoover_damm: and 'own' that file
[2012-10-19 02:29:21 -0400] deathdonut: ok. Are the RHEL clones supported by chef very well? Tempting to sidestep the problem by using one of them. I haven't really developed a firm preference.
[2012-10-19 02:29:48 -0400] hoover_damm: you mean Fedora Clones?
[2012-10-19 02:29:49 -0400] hoover_damm: ;)
[2012-10-19 02:30:11 -0400] deathdonut: OpenSUSE seems like it would be even more of a pain with these issue - YaST was pretty intrusive last I looked.
[2012-10-19 02:30:14 -0400] hoover_damm: as Fedora is what RHEL is based off of... but joking aside Fedora works well, you see people struggle with centos from time to time
[2012-10-19 02:30:19 -0400] deathdonut: Sure. :)
[2012-10-19 02:30:41 -0400] hoover_damm: basically Ubuntu is the dominant distro for chef pretty much..
[2012-10-19 02:30:53 -0400] hoover_damm: so the cookbooks generally work for it best
[2012-10-19 02:31:13 -0400] hoover_damm: I don't really consider rhel and it's family in the same level of support
[2012-10-19 02:31:14 -0400] hoover_damm: :(
[2012-10-19 02:31:23 -0400] hoover_damm: unfortunately
[2012-10-19 02:31:32 -0400] hoover_damm: but that's my opinion
[2012-10-19 02:32:22 -0400] deathdonut: cool.
[2012-10-19 02:37:20 -0400] deathdonut: So how do app data and backups interact with chef? If I've got everything set up to the point of being able to rebuild a blank app server if an ec2 instance disappears, is there anything provided that helps get my files / databases back on there?
[2012-10-19 02:38:18 -0400] hoover_damm: deathdonut, aws cookbook? ebs
[2012-10-19 02:38:38 -0400] hoover_damm: deathdonut, prolly want to create an ebs device for your app data... same for your mysql server or whatever you use
[2012-10-19 02:41:00 -0400] deathdonut: awesome. Thanks damm!
[2012-10-19 03:33:47 -0400] ssd7: Ohai Chefs!
[2012-10-19 04:15:05 -0400] fujin: Yo
[2012-10-19 04:27:18 -0400] sascha_d: hey @ssd7 what are you guys doing for underlying storage mgmt on your openstack infra?
[2012-10-19 04:35:19 -0400] psykidellic: I am trying to create a postgres user in an idempotent way: https://gist.github.com/3916226 - but somehow createuser... is always executed.
[2012-10-19 04:35:37 -0400] psykidellic: I verified the "code" command and it indeed returns 1
[2012-10-19 04:52:15 -0400] fujin: psykidellic: post debug logs
[2012-10-19 04:52:34 -0400] fujin: psykidellic: -l debug
[2012-10-19 04:55:07 -0400] sascha_d: psykidellic I left you a comment. I don't know if you can actually use both "code" and "command" in one execute block
[2012-10-19 04:55:29 -0400] sascha_d: also you might have issues with quotes needing escapes in your verification command
[2012-10-19 04:57:25 -0400] psykidellic: Sorry, had to run for some errand.
[2012-10-19 04:57:41 -0400] coderanger: Anyone up that knows the server API well?
[2012-10-19 05:01:00 -0400] psykidellic: fujin: You mean the deploy log?
[2012-10-19 05:01:08 -0400] hoover_damm: coderanger, bug fujin? :)
[2012-10-19 05:01:37 -0400] psykidellic: sascha_d: I actually in my testing by removing the code and making not_if a string shell command.
[2012-10-19 05:01:46 -0400] coderanger: hoover_damm: I just skipped back to reading the erchef code
[2012-10-19 05:04:12 -0400] psykidellic: This is what I see when I deploy (btw, I forgot to mention, using chef-solo): https://gist.github.com/3916338
[2012-10-19 05:18:10 -0400] psykidellic: From the deploy output it almost seems like the not_if command is never executed.
[2012-10-19 05:50:05 -0400] aruntomar: psykidellic: as per experience, 1. always use fully path /usr/bin/psql
[2012-10-19 05:50:09 -0400] psykidellic: Interestingly, if I change the command to just a simple "test -f /etc/passwd" it works as expected.
[2012-10-19 05:50:32 -0400] aruntomar: 2. mention the database name "postgres" using -d postgres
[2012-10-19 05:51:33 -0400] psykidellic: aruntomar: In my case, there is not databse invovled. I am just trying to create the first user.
[2012-10-19 05:53:39 -0400] aruntomar: psykidellic: i believe that this is the first user u r creating after postgres is installed right?
[2012-10-19 05:53:50 -0400] psykidellic: Yes.
[2012-10-19 05:54:27 -0400] aruntomar: psykidellic: so if u run this command from command line ""psql -U postgres -c "select * from pg_user where usename='ubuntu'" | grep -c ubuntu" does it work
[2012-10-19 05:55:14 -0400] psykidellic: aruntomar: https://gist.github.com/3916440
[2012-10-19 05:55:19 -0400] psykidellic: aruntomar: Yes. And it returns 0.
[2012-10-19 05:55:44 -0400] psykidellic: Which is what is strange though in the shell, I have to do: sudo su and run it
[2012-10-19 05:58:04 -0400] psykidellic: So somehow when chef is running the psql ... command, it is returning exit status 1.
[2012-10-19 05:59:35 -0400] psykidellic: When I use the simple "test -f ... ", I can see in the logs: Skipping execute[create-ubuntu-pg-user] due to not_if command st -f /etc/passwd.... But no mention of not_if when I use the psql command.
[2012-10-19 06:01:50 -0400] aruntomar: psykidellic: yes, testing out things at my end to see why it would not work b'cas it should
[2012-10-19 06:02:04 -0400] psykidellic: thanks.
[2012-10-19 06:02:34 -0400] psykidellic: other things being, its an ec2 setup so sudoless ubuntu.
[2012-10-19 06:03:15 -0400] aruntomar: psykidellic: https://gist.github.com/3916457
[2012-10-19 06:03:38 -0400] aruntomar: psykidellic: mine is a centos box
[2012-10-19 06:04:12 -0400] aruntomar: if i try to run the command as root user, it fails, i then have to switch as postgres user and then run the command, that is when it works
[2012-10-19 06:04:42 -0400] psykidellic: correct and in my execute command I have set the user to "postgres"
[2012-10-19 06:04:54 -0400] aruntomar: point being, that chef runs as root user
[2012-10-19 06:05:21 -0400] psykidellic: correct but should not the user make the change?
[2012-10-19 06:06:34 -0400] psykidellic: From the docs: user A user name or user ID that we should change to before running this command.
[2012-10-19 06:07:04 -0400] psykidellic: Anyway, if there is another better way to do this, I am happy to hear. This is what I had come up with and I have spent more hours then I want on this issue :)
[2012-10-19 06:10:57 -0400] aruntomar: psykidellic: ok. will let u know if i come up with anything better.
[2012-10-19 06:12:10 -0400] psykidellic: I think not_if is not taking into user into consideration.
[2012-10-19 06:12:55 -0400] psykidellic: https://gist.github.com/3916440#comments = but using the same resource, when I run it first time - the database is created so in that case, it did run it as user postgres.
[2012-10-19 06:16:59 -0400] psykidellic: Yes, found it - aha -= https://gist.github.com/3916486
[2012-10-19 06:17:56 -0400] psykidellic: Wow. That was epic.
[2012-10-19 06:18:08 -0400] aruntomar: psykidellic: cool.
[2012-10-19 07:10:43 -0400] Houdini: symlinks "log" => "log", "tmp" => "tmp" create log in root of current directory, but tmp like this: current/tmp/tmp -> shared/tmp. Why?
[2012-10-19 07:14:58 -0400] benatkin: weird. I all of a sudden started getting a permission denied error everywhere on Hosted Chef after uploading some cookbooks. any idea why?
[2012-10-19 07:16:13 -0400] benatkin: somehow I'm not an admin of an organization I just started
[2012-10-19 07:18:48 -0400] benatkin: I wonder if I broke a rule :/
[2012-10-19 07:23:28 -0400] benatkin: sent a message to opscode support
[2012-10-19 07:30:55 -0400] Nitesh: hi friends
[2012-10-19 07:44:19 -0400] coderanger: Super secret preview of the next round of opscode cookbooks http://dl.dropbox.com/u/3962871/Screenshots/ztgt.png
[2012-10-19 07:44:28 -0400] coderanger: :-)
[2012-10-19 07:49:27 -0400] mschewe: I am having some problems to download the organisation validation key. It always says Organization not found. (Error 32033) - any suggestions or ideas?
[2012-10-19 08:07:17 -0400] ohookins: hey all, if i have a search on the node index in a recipe and i want to test it in an environment which doesn't have the usual nodes, what is the best way to "mock" out the data that would be returned by the search usually?
[2012-10-19 09:06:10 -0400] AikiLinux: Good morning,  does anyone have a cookbook for building a fully functional cobbler server ? including building the internal resources ?
[2012-10-19 09:16:38 -0400] mikeywaites: hey guys im hoping someone can help here
[2012-10-19 09:18:13 -0400] mikeywaites: so im trying to figure out a problem in which i need to access a data_bag_item inside of a template. i have an array containing names of databags that im currently iterating in the template, i need to be able to access each data_bag_item from the template ill paste some code up so its a bit clearer
[2012-10-19 09:21:51 -0400] LennyLinux: What version of ruby do you use within your chef client?
[2012-10-19 09:22:15 -0400] LennyLinux: I tried to use ruby 1.9 and i got problems during the installation.
[2012-10-19 09:22:58 -0400] mikeywaites: http://dpaste.com/815473/
[2012-10-19 09:23:37 -0400] mikeywaites: so basically i want to be able to access some data from the data bag inisde of the template to dynamically build up nginx locations
[2012-10-19 10:35:54 -0400] masterkorp: http://th04.deviantart.net/fs71/PRE/f/2012/269/e/9/ubuntu_12_10__new_default_wallpaper_by_albaux-d5fymm7.png
[2012-10-19 10:35:56 -0400] masterkorp: oops
[2012-10-19 10:36:48 -0400] ohookins: yesterday i asked if there was any truth behind the statement "the default.rb recipe is executed by every recipe in the cookbook"
[2012-10-19 10:37:01 -0400] ohookins: i've just tested chef 0.9 and 10 and neither appear to behave in this way
[2012-10-19 10:37:22 -0400] _rc: it's an odd statement to make
[2012-10-19 10:37:24 -0400] ohookins: does anybody know about where this idea came from?
[2012-10-19 10:37:37 -0400] masterkorp: i have no idea
[2012-10-19 10:37:56 -0400] ohookins: it's in the opscode wiki guide to creating a cookbook, which worries me
[2012-10-19 10:38:09 -0400] masterkorp: link ?
[2012-10-19 10:38:18 -0400] _rc: it's executed when you say 'recipe[yr_cookbook]' or include_recipe 'yr_cookbook' but not for yr_cookbook::other_recipe
[2012-10-19 10:38:41 -0400] masterkorp: that is what i get from it too
[2012-10-19 10:39:49 -0400] jonlives: masterkorp: that's correct - ::default is only used when you don't specify another recipe to use
[2012-10-19 10:40:03 -0400] _rc: you could write in your hypotethical other_recipe.rb "include 'yr_cookbook'"
[2012-10-19 10:40:08 -0400] jonlives: right
[2012-10-19 10:40:15 -0400] _rc: that's what makes it such an odd statement
[2012-10-19 10:40:27 -0400] _rc: and why we want to see the link
[2012-10-19 10:40:38 -0400] ohookins: masterkorp: http://wiki.opscode.com/display/chef/Guide+to+Creating+A+Cookbook+and+Writing+A+Recipe
[2012-10-19 10:41:03 -0400] ohookins: under "Step Two"
[2012-10-19 10:41:08 -0400] _rc: that's just wrong
[2012-10-19 10:41:40 -0400] ohookins: also repeated on some other external blogs
[2012-10-19 10:43:38 -0400] _rc: maybe it was the case in the deep past, but it's not true now.  blogs are free to publish whatever mistakes they like
[2012-10-19 10:46:27 -0400] masterkorp: someone please edit that
[2012-10-19 10:46:39 -0400] ohookins: ok, i've fixed it
[2012-10-19 10:47:17 -0400] ohookins: thanks for the clarification!
[2012-10-19 10:47:50 -0400] masterkorp: thanks
[2012-10-19 11:47:37 -0400] Philipp_: How can I control that variables are passed by value to a ressource?
[2012-10-19 12:04:35 -0400] fish_: what is the proper way to check if a node is running chef-solo or not?
[2012-10-19 12:05:43 -0400] aruntomar: fish_: Chef::Config[:solo]
[2012-10-19 12:05:59 -0400] fish_: aruntomar: ah thanks!
[2012-10-19 12:06:22 -0400] fish_: aruntomar: do you know if this works for chef 0.9.x as well?
[2012-10-19 12:07:31 -0400] LennyLinux: I wat to check how much time is elapsed between two ubuntu's repo updates before making it one. I thought to check the time stamp of the /var/lib/apt/lists directory, is this a stupid?
[2012-10-19 12:07:45 -0400] LennyLinux: Is there a smarter and quicker way?
[2012-10-19 12:08:09 -0400] LennyLinux: *idea
[2012-10-19 12:08:18 -0400] LennyLinux: "is this a stupid idea"
[2012-10-19 12:08:21 -0400] aruntomar: fish_: i don't know, but u can run "shef " and run the run the command i just mentioned.  if u r running your node under chef server then run 'shef -z'
[2012-10-19 12:08:44 -0400] LennyLinux: I'll make a recipe which does that.
[2012-10-19 12:09:03 -0400] fish_: aruntomar: yep I know, unfortunally my 0.9x shef is broken currently ;) but I'll figure out, thanks!
[2012-10-19 12:09:28 -0400] LennyLinux: What do you think? (This would be my first cookbook)
[2012-10-19 12:12:38 -0400] aruntomar: LennyLinux: try netselect http://askubuntu.com/questions/39922/how-do-you-select-the-fastest-mirror-from-the-command-line
[2012-10-19 12:15:10 -0400] LennyLinux: aruntomar: oh, do you think this a waste of time? Is it useless to check when i made an update before do it? I though this was good for the idempotence.
[2012-10-19 12:15:22 -0400] LennyLinux: Better just do the update of the repo?
[2012-10-19 12:16:59 -0400] LennyLinux: Maybe i wasn't clear and i apologize for this.
[2012-10-19 12:17:46 -0400] aruntomar: LennyLinux: I would say, if you can do better, then certain give it a shot, otherwise why to reinvent the wheel :)
[2012-10-19 12:20:01 -0400] aruntomar: LennyLinux: on ubuntu and debian you have netselect, on redhat based systems you have yum plugin called fastestmirror
[2012-10-19 12:21:36 -0400] LennyLinux: aruntomar: sure, but i don't understand how netselect could help me. I'd like to know when i made the last apt-get update on my machine before making it one.
[2012-10-19 12:22:36 -0400] LennyLinux: I though before i didn't explain myself, or i don't get what you're telling me and what should i do with netselect.
[2012-10-19 12:22:37 -0400] LennyLinux: :P
[2012-10-19 12:23:22 -0400] LennyLinux: *think
[2012-10-19 12:34:51 -0400] LennyLinux: aruntomar: you were right, apt cookbook already does what i want. Thank you.
[2012-10-19 13:34:02 -0400] geekbri: Is there a way to get knife node show to print all attributes?
[2012-10-19 13:34:43 -0400] geekbri: oh it seems knife node show -a . working
[2012-10-19 13:34:45 -0400] geekbri: err worked
[2012-10-19 13:43:18 -0400] yfeldblum: geekbri, `knife node show NODE` takes a `--format` or `-F` option (the default is "summary"), and also has the `--medium` (`-m`) and --long (`-l`)
[2012-10-19 13:49:20 -0400] geekbri: Ah of course.
[2012-10-19 13:55:53 -0400] ci__: first time using vagrant vm with chef and having trouble accessing
[2012-10-19 13:56:16 -0400] ci__: can ssh into vagrant vm via command line
[2012-10-19 13:56:25 -0400] ci__: can't get knife commands to work though...
[2012-10-19 13:56:46 -0400] ci__:  knife ssh name:local-lamp-vm 'df -h' -V -V
[2012-10-19 13:57:03 -0400] ci__: returns WARNING: Failed to connect to node[local-lamp-vm] -- SocketError: getaddrinfo: No such host is known.
[2012-10-19 13:57:11 -0400] ci__: can anyone help me to fix?
[2012-10-19 14:06:41 -0400] ci__: Can anyone help or even give some direction?  It would be much appreciated.
[2012-10-19 14:11:43 -0400] Philipp_: I have a Hash in a recipe and the content differs in the template, how can this happen?
[2012-10-19 14:11:53 -0400] Philipp_: I just pass it as a veriable
[2012-10-19 14:13:00 -0400] Philipp_: In my recipe I loop of a bunch of items and create a hash... this hash is passed to a template file as a variable
[2012-10-19 14:13:26 -0400] Philipp_: but the file created in the first loop contains data of the last loop
[2012-10-19 14:13:43 -0400] NoobOwnage: Morning
[2012-10-19 14:16:30 -0400] yfeldblum: Philipp_, it would be easier for people in this channel to diagnose something they can see, such as a relevant sample of the code
[2012-10-19 14:16:58 -0400] ci__: If anyone cares, the way I solved the Failed to connect to node error was to
[2012-10-19 14:17:46 -0400] ci__: add ip address and host to my local etc/hosts file.  The ip address and host are defined in the Vagrantfile (config.vm.network, config.vm.host_name)
[2012-10-19 14:17:57 -0400] yfeldblum: ci__, the `knife ssh` command tries to use the full hostname for the node recorded in the chef-server, but you can set it to try to connect with some other attribute by using the `-a` option
[2012-10-19 14:18:42 -0400] yfeldblum: ci__, for example, if you do `knife ssh QUERY COMMAND -a ipaddress` , then knife will try to connect using the "ipaddress" attribute saved for the node in the chef-server
[2012-10-19 14:19:25 -0400] shamu: hi all
[2012-10-19 14:19:41 -0400] ci__: thanks yfeldblum
[2012-10-19 14:19:43 -0400] shamu: Does anyone know how to run a shell command in a ruby block ?
[2012-10-19 14:20:49 -0400] shamu: I have to deploy a service that returns 0 before fully starting up, so I want to add a ruby block that tails the log until a specific line apears
[2012-10-19 14:21:47 -0400] shamu: Is there a way to call a shell command and get the output or return code from inside of a ruby_block ?
[2012-10-19 14:21:55 -0400] brownsteen: greetings.   Question.   In a recipe, how can I get the version of a certain cookbook (as stored in that cookbook's metadata.rb ?)
[2012-10-19 14:24:19 -0400] shamu: I'll try to create a Chef::ShellOut object and invoke it inside my ruby block
[2012-10-19 14:26:00 -0400] yfeldblum: shamu, tailing and waiting for text to appear is a little harder than that
[2012-10-19 14:28:23 -0400] shamu: yeah I saw in the doc of shellout T_T... for now I'll just erase the log when the service starts and use cat | grep
[2012-10-19 14:28:28 -0400] shamu: in a loop
[2012-10-19 14:32:09 -0400] shamu: then maybe I'll try to do a real tail using popen4 and create a LWRP to wait until something apears in a logfile
[2012-10-19 14:32:18 -0400] shamu: seems like it could be usefull again
[2012-10-19 14:32:54 -0400] brownsteen: Can someone tell me... in a Chef recipe, how can I programatically access the cookbook version string defined in metadata.rb ?
[2012-10-19 14:40:17 -0400] ci__: Ok, one more issue when connecting to a Vagrant VM with knife
[2012-10-19 14:40:48 -0400] ci__: I can vagrant ssh into my machine no problem
[2012-10-19 14:41:25 -0400] ci__: But using knife ssh -x vagrant name:local-lamp-vm 'df -h' fails
[2012-10-19 14:41:57 -0400] ci__: ERROR: could not connect to ssh-agent   and then later...
[2012-10-19 14:42:06 -0400] ci__: ERROR: all authorization methods failed (tried publickey, password)
[2012-10-19 14:42:11 -0400] ci__: Any ideas?
[2012-10-19 14:45:20 -0400] brownsteen: Can someone tell me... in a Chef recipe, how can I programatically access the cookbook version string defined in metadata.rb ?   Apologies for the repeat.
[2012-10-19 14:58:21 -0400] killfill: how do i make a recipe run after another?.. i.e. i have in my run list ["recipe[A]", "recipe[mine]"], but mine is running before A
[2012-10-19 14:59:17 -0400] ci__: Solved knife -ssh into vagrant virtual machine
[2012-10-19 15:00:03 -0400] ci__: Add vagrant private key to your ssh command - knife ssh -x username -i private_key_file name:local_lamp_server
[2012-10-19 15:00:21 -0400] brownsteen: Can someone tell me... in a Chef recipe, how can I programatically access the cookbook version string defined in metadata.rb ?   Apologies for the repeat.
[2012-10-19 15:00:27 -0400] martinisoft: would there be any reason why chef (latest version) would not completely download a cookbook?
[2012-10-19 15:02:34 -0400] shamu: killfill : your steps are processed before those of recipe A ?
[2012-10-19 15:02:43 -0400] shamu: in the log
[2012-10-19 15:03:23 -0400] shamu: and what does your expanded run list look like ?
[2012-10-19 15:04:41 -0400] shamu: maybe you have a recipe that runs before recipe A which requires your recipe "mine"
[2012-10-19 15:04:59 -0400] shamu: so recipe "mine" would be executed before recipe A
[2012-10-19 15:09:32 -0400] mattupstate: i'm using chef-solo with vagrant and i'm curious how i can set the chef environment to something other than _default
[2012-10-19 15:11:04 -0400] leifmadsen: mattupstate: chef.environment = VM_ENV
[2012-10-19 15:12:06 -0400] martinisoft: okay its an issue with the opscode hosting platform now
[2012-10-19 15:12:30 -0400] martinisoft: chef 10.14.2 and 10.14.4 suddenly stopped completely downloading some of the cookbook files
[2012-10-19 15:15:58 -0400] tknerr: ohai chefs!
[2012-10-19 15:16:12 -0400] leifmadsen: I have a loop I need to execute several execute resources, but they fail sometimes if the service the command is being run against isn't yet started. Is there a simple way to execute after the service resource has completed the start of the service?
[2012-10-19 15:16:47 -0400] leifmadsen: example: https://gist.github.com/3918769
[2012-10-19 15:17:09 -0400] masterkorp: http://pastie.org/5084519
[2012-10-19 15:17:15 -0400] masterkorp: Guys, i am clueless
[2012-10-19 15:17:41 -0400] leifmadsen: masterkorp: you're using 0.10.2 which doesn't have chef_gem
[2012-10-19 15:17:50 -0400] leifmadsen: you need to use ... I think 0.10.8 or newer
[2012-10-19 15:18:10 -0400] masterkorp: derp derp, thanks
[2012-10-19 15:18:10 -0400] shamu: leifmadsen: I just did a little something to wait for a service to finish starting by looking at the log
[2012-10-19 15:18:24 -0400] tknerr: mastercorp: there's also a cookbook that adds chef_gem compatibility with older chef versions
[2012-10-19 15:18:42 -0400] leifmadsen: tknerr: I was unaware of that :)
[2012-10-19 15:18:45 -0400] KarlHungus: leifmadsen: you have two options. block by spinning in a ruby_block resource until things are started like the jenkins cookbook does, or...
[2012-10-19 15:18:56 -0400] tknerr: masterkorp: this one should help https://github.com/hw-cookbooks/chef_gem
[2012-10-19 15:19:09 -0400] mattupstate: leifmadsen: that doesn't work
[2012-10-19 15:19:09 -0400] tknerr: masterkorp: but haven't tried it for myself ;-)
[2012-10-19 15:19:11 -0400] shamu: leifmadsen: https://gist.github.com/3918783
[2012-10-19 15:19:14 -0400] KarlHungus: leifmadsen: you can use only_if and test that the service is running in your execute resources
[2012-10-19 15:19:20 -0400] masterkorp: i know, i jusr overlooked it
[2012-10-19 15:19:26 -0400] masterkorp: this needs to be upgraded
[2012-10-19 15:19:27 -0400] KarlHungus: the latter being considerably cleaner, imho.
[2012-10-19 15:19:47 -0400] leifmadsen: KarlHungus: ya I thought about only_if, but I was afraid the command would just get skipped if the service hadn't yet started as opposed to waiting for it to start
[2012-10-19 15:19:47 -0400] shamu: it's not perfect, it reads the complete log file every second
[2012-10-19 15:20:16 -0400] KarlHungus: leifmadsen: "waiting for it to start" sounds a lot like orchestration, not converging resources ;)
[2012-10-19 15:20:46 -0400] tknerr: guys, i'm running into http://tickets.opscode.com/browse/COOK-1406 ("pg gem compile is unable to find libpq under Chef full stack (omnibus) installation")
[2012-10-19 15:20:47 -0400] leifmadsen: KarlHungus: agreed, but the commands need to be executed to start the service correctly unfortunately
[2012-10-19 15:21:08 -0400] KarlHungus: are you sure thats something you want chef to do?
[2012-10-19 15:21:14 -0400] tknerr: the pg gem wouldn't compile due to an openssl version conflict
[2012-10-19 15:21:27 -0400] jhayden: is there an easy way to get access keys and secret from iam_instance_profile from within chef or do I have to parse meta-data?
[2012-10-19 15:21:31 -0400] KarlHungus: if its required, why not template the init script that launches it? or have chef create a wrapper
[2012-10-19 15:21:53 -0400] tknerr: ubuntu 12.04 ships with openssl 1.0.1 and omnibus chef with 1.0.0
[2012-10-19 15:21:54 -0400] KarlHungus: blocking inside of chef leads to pain and suffering and wierd failure situations
[2012-10-19 15:22:15 -0400] KarlHungus: it *will* work (mostly) like shamu posted or like the example i mentioned in the jenkins cookbook
[2012-10-19 15:22:29 -0400] tknerr: would it be a horribly idea to downgrade the system openssl to 1.0.0 as a quick workaround? I'm afraid this could break loads of other things...
[2012-10-19 15:22:30 -0400] leifmadsen: KarlHungus: ya, I could also add a sleep but that is just as ugly :)
[2012-10-19 15:22:56 -0400] leifmadsen: KarlHungus: basically issue is that it only needs to wait like 1 second as the service starts incredibly fast, but chef is faster :)
[2012-10-19 15:23:45 -0400] shamu: we seem to have similar issues leifmadsen :)
[2012-10-19 15:24:08 -0400] leifmadsen: shamu: aye :)   I might use your ruby block method until I can think of a slightly better way. I likely should just template the init script
[2012-10-19 15:24:11 -0400] shamu: basically the start script of your service is returning before the service has finished starting
[2012-10-19 15:24:20 -0400] leifmadsen: shamu: that ^^
[2012-10-19 15:26:01 -0400] shamu: be careful with my method... it requires the service to overwrite it's log file everytime it starts
[2012-10-19 15:26:05 -0400] shamu: currently
[2012-10-19 15:26:40 -0400] leifmadsen: shamu: ya I'm going to modify it to just check for the opensips_fifo file which is created when the service is started
[2012-10-19 15:26:47 -0400] imanelephant: Do the cookbooks on opscode have an acutal download link? for example: http://community.opscode.com/cookbooks/php
[2012-10-19 15:26:54 -0400] imanelephant: has a download "button"
[2012-10-19 15:26:55 -0400] shamu: good idea :)
[2012-10-19 15:27:07 -0400] imanelephant: but I'm looking for an actual download link that can be copied
[2012-10-19 15:27:18 -0400] imanelephant: ie the URI itself
[2012-10-19 15:28:04 -0400] tknerr: imanelephant: http://community.opscode.com/cookbooks/php/versions/1_0_0/downloads
[2012-10-19 15:28:17 -0400] tknerr: replace the 1_0_0 with the version you like
[2012-10-19 15:28:30 -0400] imanelephant: redirects me to http://community.opscode.com/cookbooks/php
[2012-10-19 15:28:42 -0400] imanelephant: could be a browser issue-- I'm held back to Chrom 19
[2012-10-19 15:30:26 -0400] imanelephant: thx tknerr, hope this is just a browser issue with Chrome 19.
[2012-10-19 15:31:17 -0400] yfeldblum: imanelephant, the API offers download URLs
[2012-10-19 15:31:18 -0400] tknerr: imanelephant: works for me on chrome 22
[2012-10-19 15:31:33 -0400] imanelephant: thx
[2012-10-19 15:31:59 -0400] yfeldblum: imanelephant, e.g., http://community.opscode.com/api/v1/cookbooks/php/versions/1_0_0
[2012-10-19 15:32:25 -0400] karwash: http://www.meetup.com/Chef-BOSTON/events/87684762/
[2012-10-19 15:37:40 -0400] martinisoft: got some screenshots now
[2012-10-19 15:38:08 -0400] martinisoft: anyone having issues with chef runs not grabbing complete cookbooks via the hosted chef platform?
[2012-10-19 15:38:49 -0400] yfeldblum: martinisoft, chef-client does not fetch the full cookbooks; it fetches only those bits of the cookbooks that it needs, on-demand
[2012-10-19 15:39:13 -0400] martinisoft: yfeldblum: any way to force that? it just started doing this out of the blue
[2012-10-19 15:39:27 -0400] yfeldblum: martinisoft, no; why would you want to force it?
[2012-10-19 15:39:32 -0400] martinisoft: created two new instances and it stopped grabbing all the files
[2012-10-19 15:40:16 -0400] martinisoft: yfeldblum: http://d.pr/i/kBv7
[2012-10-19 15:40:18 -0400] yfeldblum: martinisoft, it's not supposed to grab all the files
[2012-10-19 15:40:30 -0400] martinisoft: then: http://d.pr/i/mvlb
[2012-10-19 15:40:41 -0400] martinisoft: why not? it used to
[2012-10-19 15:41:37 -0400] yfeldblum: martinisoft, why should it, when there's no need? ... chef-client fetches the bits of the cookbooks it needs, when it needs them
[2012-10-19 15:41:43 -0400] martinisoft: I can see why it wouldnt download files its already gotten, but its not downloading everything the first time around, thats the issue
[2012-10-19 15:42:32 -0400] martinisoft: I can nuke the cache folder for that cookbook and it'll do the exact same thing
[2012-10-19 15:42:53 -0400] avishai: hi all
[2012-10-19 15:43:04 -0400] avishai: trying foodcritic on ubuntu 12.10
[2012-10-19 15:43:15 -0400] brownsteen: Can someone tell me... in a Chef recipe, how can I programatically access the cookbook version string defined in metadata.rb ?   Apologies for the repeat.
[2012-10-19 15:43:24 -0400] avishai: had to rebuild the gem from source due to nokogiri 1.5.0 issues
[2012-10-19 15:43:45 -0400] avishai: i get "/var/lib/gems/1.9.1/gems/foodcritic-1.6.1/lib/foodcritic/chef.rb:64:in `resource_check?': Arguments cannot be nil or empty. (ArgumentError)"
[2012-10-19 15:45:22 -0400] yfeldblum: martinisoft, for example, chef-client won't download a template file up-front; but when you make a template resource and it comes time to running the provider action on that template resource during the convergence phase, then chef-client discovers it needs that template file after all, and downloads it then
[2012-10-19 15:46:11 -0400] martinisoft: yfeldblum: gotcha
[2012-10-19 15:48:06 -0400] makerbreakr: if i need to do a reinstall of my chef server
[2012-10-19 15:48:06 -0400] yfeldblum: brownsteen, http://community.opscode.com/chat/chef/2012-09-10#id-198040
[2012-10-19 15:48:12 -0400] makerbreakr: what do i need to grab other than validation.pem?
[2012-10-19 15:48:48 -0400] brownsteen: thanks yfeldblum I will investigate that link
[2012-10-19 15:49:02 -0400] martinisoft: yfeldblum: thanks :)
[2012-10-19 15:49:10 -0400] yfeldblum: martinisoft, no probs
[2012-10-19 15:49:42 -0400] avishai: is there a trace or debug option for foodcritic?
[2012-10-19 15:50:14 -0400] miketheman: avishai: explain?
[2012-10-19 15:53:59 -0400] avishai: foodcritic is going crazy when i'm checking some cookbook
[2012-10-19 15:54:14 -0400] avishai: "/var/lib/gems/1.9.1/gems/foodcritic-1.6.1/lib/foodcritic/chef.rb:64:in `resource_check?': Arguments cannot be nil or empty. (ArgumentError)"
[2012-10-19 16:04:46 -0400] miketheman: avishai: that's got to be fun. I don't think there's a debug mode. Yiou might want to try an older version of fc
[2012-10-19 17:21:57 -0400] jtimberman: testing our apache2 cookbook with test kitchen blog post: https://bitly.com/T5nRvq
[2012-10-19 17:33:13 -0400] imanelephant: oddly enough, I had a successful run with --> group "gid"  but then the next run erred out, and I had to change to --> group "group-name"
[2012-10-19 17:51:21 -0400] Urocyon: Is there a good knife command for moving a node from one chef server to another?  Would it be just another knife bootstrap?
[2012-10-19 17:55:23 -0400] kallistec: imanelephant: you can use uids and gids, but chef detects your intent from the type of the argument. Lose the quotes and it'll work
[2012-10-19 17:57:19 -0400] kallistec: imanelephant: in other words, use integers for uids/gids, strings for user/group names
[2012-10-19 17:57:54 -0400] imanelephant: kallistec++
[2012-10-19 17:58:23 -0400] kallistec: no problem
[2012-10-19 18:24:45 -0400] rava: is there a way to get chef to cleanup the jetty logs it dumps in /var/log/chef for ubuntu?
[2012-10-19 18:24:56 -0400] rava: or, better yet, make jetty log to syslog?
[2012-10-19 18:52:28 -0400] miah: why not use chef to configure jetty, or logstash to clean up the logs?
[2012-10-19 18:53:02 -0400] rava: miah: isn't that what i'm asking? :)
[2012-10-19 18:53:26 -0400] miah: feel free to make the chef-server cookbook better.
[2012-10-19 18:55:52 -0400] martinisoft: yfeldblum: I figured out the issue, kind of forgot how that cookbook is supposed to converge so I was missing some data :)
[2012-10-19 18:56:18 -0400] martinisoft: Question about knife though, when you tag a node through knife, is it supposed to show up on hosted chef?
[2012-10-19 18:56:38 -0400] martinisoft: I see the tag when I do: knife tag list [node]
[2012-10-19 18:56:46 -0400] martinisoft: but when I view the node on hosted chef, its not there
[2012-10-19 18:57:43 -0400] rava: ugh, xml config files need to die
[2012-10-19 18:59:14 -0400] mattupstate: is it possible to render a template from a file on the node's file system?
[2012-10-19 19:00:47 -0400] martinisoft: mattupstate: you mean outside of a cookbook
[2012-10-19 19:00:51 -0400] martinisoft: ??
[2012-10-19 19:02:27 -0400] mattupstate: martinisoft: yes
[2012-10-19 19:02:56 -0400] wassy121: can you "notifies :run, "template[foo]", :immediately"? on a template resource like that?
[2012-10-19 19:03:25 -0400] yfeldblum: martinisoft, tags are in the normal-level attributes
[2012-10-19 19:03:48 -0400] wassy121: Or is there a different action for template besides :run (like execute), or :install/upgrade on package?
[2012-10-19 19:03:54 -0400] yfeldblum: wassy121, :create
[2012-10-19 19:04:14 -0400] wassy121: Ah, that makes sense.  Thanks
[2012-10-19 19:05:01 -0400] yfeldblum: mattupstate, not using the `template` resource, but you can certainly just use erubis (the ERB engine) directly from normal ruby code
[2012-10-19 19:05:20 -0400] mattupstate: yfeldblum: ah, true...
[2012-10-19 19:05:26 -0400] mattupstate: just have to load the contents of the file
[2012-10-19 19:05:38 -0400] mattupstate: template provider should accept a string as source too!
[2012-10-19 19:12:13 -0400] yfeldblum: mattupstate, http://pastie.org/private/gibkawenmqquytrxqse61a
[2012-10-19 19:13:19 -0400] yfeldblum: mattupstate, and of course if you've got a file on the filesystem, just use `t = IO.read("/path/to/template.rb")`
[2012-10-19 19:13:26 -0400] mattupstate: yeah
[2012-10-19 19:14:04 -0400] yfeldblum: mattupstate, so this is an example of normal everyday run-of-the-mill ruby ... and you're allowed to use it in chef
[2012-10-19 19:14:12 -0400] mattupstate: i see that
[2012-10-19 19:14:14 -0400] mattupstate: thanks for th etip
[2012-10-19 19:14:25 -0400] yfeldblum: mattupstate, :D
[2012-10-19 19:14:57 -0400] mattupstate: if i need to pass some locals to the template?
[2012-10-19 19:15:46 -0400] mattupstate: so if in the template i'm using <%= @var_name %>
[2012-10-19 19:19:51 -0400] yfeldblum: mattupstate, if you have defined a local variable outside the template, then that local variable will also be available inside the template, if you invoke erubis by passing in `binding` as your context object; otherwise you're perfectly free to build whatever object you like and pass that as your context object
[2012-10-19 19:20:35 -0400] martinisoft: yfeldblum: oh really?
[2012-10-19 19:21:03 -0400] jhayden: I need to get iam security credentials from ec2 meta-data and it looks like ohai cannot help me at the moment
[2012-10-19 19:21:14 -0400] yfeldblum: martinisoft, mattupstate, http://www.ruby-doc.org/core-1.9.3/Binding.html
[2012-10-19 19:21:32 -0400] jhayden: is it possible for a script passed in via user-data to write a data bag on the chef-server?
[2012-10-19 19:21:39 -0400] martinisoft: can't find the wiki article on tags though
[2012-10-19 19:21:40 -0400] mattupstate: i'm assuming thats some ruby magic?
[2012-10-19 19:22:06 -0400] yfeldblum: mattupstate, uh ... fully documented and explained magic, maybe ...
[2012-10-19 19:22:19 -0400] mattupstate: haha
[2012-10-19 19:22:19 -0400] mattupstate: yeah
[2012-10-19 19:22:22 -0400] mattupstate: i understand that
[2012-10-19 19:22:56 -0400] yfeldblum: mattupstate, but not really mystical, just a little confusing especially to people used to other languages
[2012-10-19 19:23:33 -0400] mattupstate: yeah, so i'm guessing with the template providerwhen you pass variables to it..
[2012-10-19 19:24:11 -0400] mattupstate: it adds them to the scope
[2012-10-19 19:24:18 -0400] mattupstate: before rendering
[2012-10-19 19:29:48 -0400] yfeldblum: mattupstate, no the template provider just passes a copy of that variables hash to erubis: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/template.rb#L108-113 and https://github.com/opscode/chef/blob/master/chef/lib/chef/mixin/template.rb#L40-41
[2012-10-19 19:30:02 -0400] yfeldblum: mattupstate, erubis docs on the context object: http://www.kuwata-lab.com/erubis/users-guide.02.html#tut-context
[2012-10-19 19:30:55 -0400] yfeldblum: martinisoft, so that's only if you use erubis directly with the particular API method for doing that, but that's not the way chef's template provider uses erubis
[2012-10-19 19:30:58 -0400] mattupstate: got it, thanks for the explanation, really helpful
[2012-10-19 19:31:42 -0400] yfeldblum: mattupstate, no probs
[2012-10-19 19:33:38 -0400] martinisoft: yfeldblum: which wiki page has info on tags?
[2012-10-19 19:33:50 -0400] martinisoft: Trying to find it with search and coming up with 404s
[2012-10-19 19:34:34 -0400] martinisoft: I see the knife tags documentation, but didnt know tags were a "normal" attribute either
[2012-10-19 19:34:46 -0400] yfeldblum: martinisoft, http://wiki.opscode.com/display/chef/Recipes#Recipes-Tags
[2012-10-19 19:34:52 -0400] yfeldblum: martinisoft, that's one place
[2012-10-19 19:35:31 -0400] martinisoft: yeah I found that, which I use in my cookbook, but didnt know tags were a normal attribute :)
[2012-10-19 19:35:49 -0400] martinisoft: it would be in the OHAI output right?
[2012-10-19 19:36:02 -0400] yfeldblum: martinisoft, no it would not
[2012-10-19 19:36:23 -0400] martinisoft: oh, its in the node attributes
[2012-10-19 19:36:41 -0400] yfeldblum: martinisoft, https://github.com/opscode/chef/blob/master/chef/lib/chef/recipe.rb#L78-126
[2012-10-19 19:36:45 -0400] martinisoft: so weird, there is a "Tags" section of hosted chef, but its not showing up there
[2012-10-19 19:38:36 -0400] yfeldblum: martinisoft, heh yeah that is odd
[2012-10-19 19:38:45 -0400] yfeldblum: martinisoft, make a JIRA ticket if it bothers you
[2012-10-19 19:38:59 -0400] martinisoft: it kinda does, or at least doesnt make sense
[2012-10-19 19:39:01 -0400] yfeldblum: martinisoft, but if you scroll down through the node attributes you should see it
[2012-10-19 19:39:07 -0400] martinisoft: yeah I see it there
[2012-10-19 19:40:11 -0400] yfeldblum: martinisoft, i don't much use the management console much, though; i tend more towards knife, and writing simple custom knife plugins to automate common queries or commands
[2012-10-19 19:40:35 -0400] martinisoft: yeah im getting used to knife so I knew it was there
[2012-10-19 19:40:43 -0400] martinisoft: but its strange to not see it in the console
[2012-10-19 20:19:29 -0400] dougireton: I have a question about writing a new LWRP in Chef. Can I require a library in my resource file?
[2012-10-19 20:20:02 -0400] dougireton: Specifically, I want to require 'resolv' and use it's IPv4 regex constant for the regex validator in my resource
[2012-10-19 20:22:37 -0400] geekbri: I noticed an inconsistency the other day between knife node show and the web UI's attributes list
[2012-10-19 20:22:39 -0400] yfeldblum: dougireton, yes
[2012-10-19 20:22:49 -0400] bluepojo: dougireton: libraries are autorequired
[2012-10-19 20:23:11 -0400] bluepojo: **/*.rb
[2012-10-19 20:24:11 -0400] yfeldblum: bluepojo, sounds like dougireton is talking about ruby stdlib libraries ... http://ruby-doc.org/stdlib-1.8.7/libdoc/resolv/rdoc/Resolv/IPv4.html
[2012-10-19 20:24:47 -0400] bluepojo: aha
[2012-10-19 20:26:44 -0400] redgetan: if im creating an environment file to set override node attributes, where should the file be placed? i put it under project_root/environments/default.json but its not getting picked up for some reason
[2012-10-19 20:26:57 -0400] redgetan: this is my default.json environment file http://pastie.org/5085848
[2012-10-19 20:27:53 -0400] bluepojo: redgetan: are you using vagrant or some such?
[2012-10-19 20:28:06 -0400] bluepojo: also, the default environment is _default
[2012-10-19 20:29:10 -0400] redgetan: yep, using vagrant
[2012-10-19 20:29:20 -0400] bluepojo: the environment with vagrant is set in the provisioner block
[2012-10-19 20:29:33 -0400] bluepojo: chef.json = { key: 'value' }
[2012-10-19 20:29:34 -0400] redgetan: so my file name should be _default.json then
[2012-10-19 20:29:40 -0400] bluepojo: nah, use chef.json
[2012-10-19 20:30:14 -0400] bluepojo: http://vagrantup.com/v1/docs/provisioners/chef_solo.html
[2012-10-19 20:30:18 -0400] bluepojo: search for json configuration
[2012-10-19 20:30:35 -0400] redgetan: im deploying to vagrant using a bash script as opposed to VagrantFile - following the method here http://www.opinionatedprogrammer.com/2011/06/chef-solo-tutorial-managing-a-single-server-with-chef/
[2012-10-19 20:32:21 -0400] bluepojo: that tutorial doesn't mention vagrant at all
[2012-10-19 20:32:31 -0400] bluepojo: are you sure you're using vagrant without a vagrantfile?
[2012-10-19 20:34:16 -0400] redgetan: it doesnt mention vagrant, but i configured my .ssh/config so that i can simply do "ssh vagrant" instead of having to specify port number and stuff
[2012-10-19 20:34:38 -0400] redgetan: it allowed me to just run the bash script easily against vagrant
[2012-10-19 20:34:51 -0400] bluepojo: so basically you're doing chef-solo
[2012-10-19 20:34:56 -0400] bluepojo: on a box created by vagrant
[2012-10-19 20:34:57 -0400] redgetan: yep
[2012-10-19 20:35:01 -0400] bluepojo: without using the vagrant bits
[2012-10-19 20:35:08 -0400] bluepojo: treating the box like it's not really part of vagrant
[2012-10-19 20:35:16 -0400] redgetan: yes
[2012-10-19 20:35:18 -0400] bluepojo: ok
[2012-10-19 20:37:39 -0400] redgetan: and the problem is that after placing _default.json under environments folder, the atttributes set in that file are not found in node ruby object
[2012-10-19 20:37:58 -0400] bluepojo: I see
[2012-10-19 20:38:23 -0400] redgetan: i did puts node["openssh"] in my recipe, and it gives me nil
[2012-10-19 20:38:24 -0400] bluepojo: I don't really use vagrant without a vagrantfile, so I don't know off hand what the deal is
[2012-10-19 20:38:37 -0400] bluepojo: is there a particular reason you don't want to use vagrant?
[2012-10-19 20:38:52 -0400] bluepojo: that guide is pretty outdated
[2012-10-19 20:38:59 -0400] bluepojo: perhaps this one will serve your purposes: http://vialstudios.com/guide-authoring-cookbooks.html
[2012-10-19 20:39:04 -0400] bluepojo: it was updated less than a month ago
[2012-10-19 20:39:31 -0400] bluepojo: it uses vagrant with it's full suite of tools
[2012-10-19 20:39:53 -0400] redgetan: well, im gonna execute it on a vps as well, so i thought it would be more convenient if i use the bash script for deploying to both vagrant and vps instead of having to 2 separate methods of applying chef
[2012-10-19 20:40:19 -0400] bluepojo: the method is actually the same under the hood
[2012-10-19 20:40:48 -0400] bluepojo: vagrant just calls chef-solo
[2012-10-19 20:40:58 -0400] bluepojo: do you have plans to use a chef-server at any point?
[2012-10-19 20:41:00 -0400] redgetan: ic
[2012-10-19 20:41:16 -0400] redgetan: not sure yet, i just want to simply things by using chef-solo first
[2012-10-19 20:41:25 -0400] bluepojo: fair enough
[2012-10-19 20:42:09 -0400] bluepojo: I'd advise poking through the tutorial I linked above. It describes the complete workflow and possible problems you'll have along the way and how to solve them.
[2012-10-19 20:42:32 -0400] bluepojo: it also introduces you to tools that streamline tedious steps like resolving dependent cookbooks
[2012-10-19 20:42:38 -0400] redgetan: thanks for the link
[2012-10-19 20:42:43 -0400] redgetan: ill check it out
[2012-10-19 20:42:58 -0400] redgetan: but it seems to be down at the moment
[2012-10-19 20:43:23 -0400] bluepojo: hm
[2012-10-19 20:43:24 -0400] bluepojo: I'll ping the guy who wrote it it's just a github site
[2012-10-19 20:43:50 -0400] jcran: hmm, need help with error handling since github is intermittently available. what's the proper way to handle an exception that's thrown when github can't be contacted?
[2012-10-19 20:44:01 -0400] bluepojo: (he happens to be sitting next to me)
[2012-10-19 20:44:03 -0400] jcran: had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '128'
[2012-10-19 20:44:11 -0400] jcran: a begin/rescue in the recipe?
[2012-10-19 20:44:16 -0400] bluepojo: you could do that
[2012-10-19 20:44:27 -0400] bluepojo: or you could write a lwrp to encapsulate the functionality
[2012-10-19 20:44:33 -0400] jcran: ah, that's a good idea
[2012-10-19 20:44:34 -0400] bluepojo: and return friendly error messages
[2012-10-19 20:44:48 -0400] nerdcore: I'm tweaking the github.com/opscode-cookbooks/varnish.git to fix a few things. I'm curious about the use of $INSTANCE in the attributes/default.rb file. It broke my attempts to run it against a CentOS box, but having changed it to $HOSTNAME things work just fine. Any idea why $INSTANCE was used? Seems incorrect to me.
[2012-10-19 20:45:16 -0400] bluepojo: nerdcore: https://github.com/opscode-cookbooks/varnish/blob/master/metadata.rb
[2012-10-19 20:45:22 -0400] bluepojo: note how it doesn't say it supports CentOS
[2012-10-19 20:45:40 -0400] jcran: bluepojo: i actually wrapped in a begin/rescue, capturing Exception (rescue Exception => e) - i know it's horrible, but wanted to see if it would work - and it still errored out
[2012-10-19 20:45:49 -0400] nerdcore: bluepojo: right, well, that's what I'm working on. I'm just asking for some feedvback
[2012-10-19 20:45:51 -0400] jcran: curious if there's a trick?
[2012-10-19 20:46:13 -0400] jcran: bluepojo: doing the begin/rescue directly in the recipe - maybe i need to wrap it in a ruby_block ?
[2012-10-19 20:46:16 -0400] bluepojo: jcran: you wrapped it's compilation run in begin/rescue
[2012-10-19 20:46:24 -0400] jcran: ah, hmm
[2012-10-19 20:46:30 -0400] bluepojo: which is different than the convergence run
[2012-10-19 20:46:34 -0400] bluepojo: chef runs are two stage
[2012-10-19 20:46:39 -0400] bluepojo: it reads all the recipes
[2012-10-19 20:46:42 -0400] bluepojo: then it executes what it's read
[2012-10-19 20:46:49 -0400] bluepojo: so you'll have to do an lwrp in this case, I think
[2012-10-19 20:47:02 -0400] nerdcore: seems on my particular EC2 instance that $INSTANCE=$HOSTNAME.compute-1.internal
[2012-10-19 20:47:06 -0400] bluepojo: on how to write lwrps?
[2012-10-19 20:47:21 -0400] jcran: nah, on the two phase thing - compliation vs running
[2012-10-19 20:47:29 -0400] jcran: know where to find info on lwrps
[2012-10-19 20:47:50 -0400] bluepojo: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-10-19 20:48:00 -0400] jcran: bluepojo: cool. tyvm!
[2012-10-19 21:44:02 -0400] jhayden: I know its late Friday but does anyone know if a chef recipe can return a value from an ec2 (something ohai can't see) and pass it to another resource?
[2012-10-19 21:44:39 -0400] mstyne: evening all
[2012-10-19 21:44:52 -0400] mstyne: is there a knife.rb configuration value to set the default environment to use
[2012-10-19 21:44:57 -0400] bluepojo: jhayden: perhaps you can write an ohai plugin so ohai can see it?
[2012-10-19 21:45:01 -0400] mstyne: I tried environment and chef_environment to no avail
[2012-10-19 21:45:05 -0400] bluepojo: I think that would be the right solution
[2012-10-19 21:45:43 -0400] jhayden: it probably would but its a bit beyond my capabilities and I am time crunched
[2012-10-19 21:45:45 -0400] jhayden: ;-)
[2012-10-19 21:45:54 -0400] bluepojo: ohai plugins are dead simple
[2012-10-19 21:46:05 -0400] bluepojo: your future self will appreciate the extra 10mins you spend now
[2012-10-19 21:46:11 -0400] bluepojo: let me find you a good example
[2012-10-19 21:46:16 -0400] jhayden: thx
[2012-10-19 21:47:29 -0400] jhayden: I'm trying to retrieve the was aim access data from meta-data
[2012-10-19 21:47:42 -0400] jhayden: iam
[2012-10-19 21:48:06 -0400] dyer: Hey guys I have a question, I a cookbook called gateway, which installs 3 parts of a component ( http and sip ).  , so in my recipe folder I have default, sip and http.rb.  Since each component can be installed independently of each other, but most often together I want to do some voodoo in the recipes based on the run list.  So in the default.rb I just have include_recipe "gateway::sip" and include_recipe "gateway:http", my question is if there is
[2012-10-19 21:48:07 -0400] dyer:  any way to see if one or both of these sub recipes are included in the run list ?
[2012-10-19 21:48:28 -0400] bluepojo: jhayden: here's the basic docs: http://wiki.opscode.com/display/chef/Writing+Ohai+Plugins
[2012-10-19 21:48:29 -0400] dyer: is there any way to expand the run list that way?
[2012-10-19 21:48:49 -0400] bluepojo: jhayden: the nginx cookbook used to include an ohai plugin, but it appears it doesn't any more
[2012-10-19 21:48:53 -0400] bluepojo: maybe I can find a different one
[2012-10-19 21:49:31 -0400] bluepojo: oh I was looking at the wrong repo
[2012-10-19 21:49:38 -0400] bluepojo: https://github.com/opscode-cookbooks/nginx/blob/master/templates/default/plugins/nginx.rb.erb
[2012-10-19 21:50:01 -0400] bluepojo: this is the most complex I've ever seen an ohai plugin get the docs provide a 2 line example that works
[2012-10-19 21:50:19 -0400] kisoku: anyone here have a lot of experience with the deploy resource ?
[2012-10-19 21:50:56 -0400] kisoku: dyer: the run_list won't get expanded if you use include_recipe
[2012-10-19 21:51:14 -0400] dyer: Damn
[2012-10-19 21:51:18 -0400] kisoku: it will only expand if you use roles
[2012-10-19 21:51:32 -0400] bluepojo: jhayden: the ohai plugin for nginx runs nginx -V and parses the output for a few values
[2012-10-19 21:51:47 -0400] kisoku: you can use a hack to see if a recipe has been included though
[2012-10-19 21:51:54 -0400] dyer: not a big fan of roles
[2012-10-19 21:51:56 -0400] bluepojo: if you know how to retrieve the data you're looking for, then you can write the ohai plugin to do it
[2012-10-19 21:51:57 -0400] kisoku: from within a recipe file
[2012-10-19 21:52:01 -0400] dyer: kisoku, I am a fan of hacks ;)
[2012-10-19 21:52:27 -0400] kisoku: well not so much a hack but rather a knowledge of chef client internals
[2012-10-19 21:52:29 -0400] bluepojo: dyer: you can ask the node what is in it's runlist
[2012-10-19 21:52:40 -0400] kisoku: you can access 'seen_recipes' in the run_context
[2012-10-19 21:52:50 -0400] dyer: Do you have an example?
[2012-10-19 21:52:57 -0400] kisoku: it's on the wiki somewhere let me find it
[2012-10-19 21:53:14 -0400] jhayden: bkuepojo so if  run a curl against meta-data and parse the aim stuff
[2012-10-19 21:53:22 -0400] dodizzle: is there a way to specify a cookbook_file source in another cookbook ?
[2012-10-19 21:53:36 -0400] jhayden: bluepojo will the data show up in node attributes?
[2012-10-19 21:53:45 -0400] kallistec: dyer: kisoku, it's node.run_state[:seen_recipes]. Also, that is getting moved to the run_context in Chef 11, so you'll have to rehack your hack
[2012-10-19 21:53:50 -0400] bluepojo: jhayden: yeah, that will work
[2012-10-19 21:53:55 -0400] bluepojo: and it will show up under node[:automatic]
[2012-10-19 21:54:01 -0400] kisoku: ah lol
[2012-10-19 21:54:10 -0400] kisoku: yes I just remembered that
[2012-10-19 21:54:20 -0400] jhayden: my head suddenly stopped hurting! ;-)
[2012-10-19 21:54:32 -0400] bluepojo: :D
[2012-10-19 21:54:37 -0400] dyer: node[:automatic] ?
[2012-10-19 21:55:24 -0400] kallistec: fwiw: https://github.com/opscode/chef/pull/436 is moving seen recipes out of Chef::Node
[2012-10-19 21:55:44 -0400] bluepojo: dyer: jhayden: oh, maybe I derped on that one
[2012-10-19 21:55:59 -0400] bluepojo: some ohai attributes show up under automatic
[2012-10-19 21:56:05 -0400] bluepojo: but now you're making me question myself
[2012-10-19 21:56:20 -0400] dyer: Sorry :)
[2012-10-19 21:56:33 -0400] dyer: I think I am going to have to rethink my flow
[2012-10-19 21:56:52 -0400] bluepojo: I think I was thinking of a specific case it's been a while since I wrote an ohai plugin
[2012-10-19 21:56:52 -0400] erikh: greets, is there a problem with the package downloader on opscode's site? knife bootstrap is not happy
[2012-10-19 21:56:56 -0400] jhayden: bluepojo one last question: the provides statement shows where in the attributes the data will appear. Can I put it in a subdir of ec2's data?
[2012-10-19 21:57:02 -0400] dyer: might be making this harder then it has to be
[2012-10-19 21:57:24 -0400] bluepojo: jhayden: yeah, you can put it where ever it makes sense
[2012-10-19 21:57:47 -0400] erikh: http://www.opscode.com/chef/download?v=10.14.4&p=ubuntu&pv=12.04&m=x86_64
[2012-10-19 21:57:50 -0400] bluepojo: the nginx plugin example puts everything under nginx for example
[2012-10-19 21:57:50 -0400] erikh: is what I'm hitting
[2012-10-19 21:57:54 -0400] dyer: can I reload attributes and restart a run in a recipe ?
[2012-10-19 21:58:08 -0400] erikh: which seems to yield a 500
[2012-10-19 21:58:10 -0400] bluepojo: you can reload attributes not sure if you can restart a whole run tho?
[2012-10-19 21:58:33 -0400] bluepojo: load_attributes "cookbook::attrs_file"
[2012-10-19 21:58:54 -0400] jhayden: bluepojo sweet! Now I will be able to access aim security-credentials from roles and not have to hard code access codes
[2012-10-19 21:59:11 -0400] jhayden: bluepojo thanks a lot, have a great weekend
[2012-10-19 21:59:17 -0400] bluepojo: any time
[2012-10-19 22:33:15 -0400] tomoj: is there a reason not to use https for install.sh?
[2012-10-19 22:37:06 -0400] jtimberman: tomoj: you can
[2012-10-19 22:39:20 -0400] tomoj: wondering why the default distro and install instructions don't - likely inside ec2 or similar so doesn't matter anyway?
[2012-10-19 22:43:06 -0400] bgood: does anyone know of any issues using notifies on windows boxes
[2012-10-19 22:43:28 -0400] bgood: I ask because I'm having lots of problems getting a template to notify a service that it should restart

[2012-10-09 00:07:03 -0400] qhartman: aha, figured it out. Need to use a "." as the separator between attributes rather than the "_" used in most of the command line tools
[2012-10-09 00:07:51 -0400] qhartman: so, to find an instance id of ec2 instances, use "ec2.instance_id" for your argument to -a
[2012-10-09 00:50:30 -0400] pedahzur: Totally, random, but Google is of NO help with this: https://www.google.com/search?q=folding%40home+chef+recipe  Anyone know of chef recipes for folding@home?
[2012-10-09 00:51:36 -0400] erikh: https://github.com/stphung/fah
[2012-10-09 00:51:44 -0400] erikh: (pro tip: use github search next time)
[2012-10-09 00:53:17 -0400] pedahzur: erikh: Ah, yeah...should have just searched github. Thanks!
[2012-10-09 00:54:36 -0400] erikh: np
[2012-10-09 01:11:46 -0400] pedahzur: Hmm...Requirements: A linux based architecture which supports Upstart.  I guess that means no RHEL for now.  At least it will provide a good starting point.
[2012-10-09 02:35:04 -0400] johnkary: i'm using vagrant + opscode mysql cookbooks, but want to connect to my MySQL db from my host mac. can i only connect from inside the VM? do i need another user? how can i do this?
[2012-10-09 02:37:34 -0400] zts: johnkary: where is the mysql db running?
[2012-10-09 02:37:49 -0400] johnkary: zts: inside my vagrant-created VM
[2012-10-09 02:38:12 -0400] johnkary: host-only networking @ 33.33.33.10
[2012-10-09 02:41:36 -0400] Pushnell: johnkary: you can set your Vagrantfile settings to do port forwarding into your VM
[2012-10-09 02:41:55 -0400] Pushnell: johnkary: http://vagrantup.com/v1/docs/getting-started/ports.html
[2012-10-09 02:42:43 -0400] Pushnell: so if you forward 3326 on your host to 3306 on the guest, you should be able to connect to localhost:3326
[2012-10-09 02:42:55 -0400] johnkary: Pushnell: i do have that setup already, forwarding 3306 to the VM
[2012-10-09 02:43:40 -0400] Pushnell: johnkary: ok.  you should be able to connect to localhost then.
[2012-10-09 02:46:23 -0400] johnkary: Pushnell: should i unset the bind_address? does that limit connects from a certain IP?
[2012-10-09 02:47:05 -0400] flaccid: bind address sounds like the address it binds to not filtering :)
[2012-10-09 02:47:31 -0400] Pushnell: johnkary: you'd have to ask #mysql
[2012-10-09 02:48:03 -0400] flaccid: for mysql it also has acl in the mysql user table
[2012-10-09 02:48:09 -0400] flaccid: all covered in mysql docs
[2012-10-09 02:49:05 -0400] johnkary: flaccid: i did see that. i tried creating a user that granted all rights on all databases, and wasn't restricted on access IP, but still wouldn't accept my password :(
[2012-10-09 02:49:34 -0400] johnkary: problem was it wouldn't take the password. it was able to connect and try to login, but denied
[2012-10-09 02:49:38 -0400] flaccid: there is possible reasons for that. still its out of scope for this channel..
[2012-10-09 02:49:58 -0400] flaccid: e.g. there is a host field in the user table
[2012-10-09 02:50:52 -0400] johnkary: ok, will try #mysql   thought maybe there was a quick fix in the cookbook or something. thanks for your help!
[2012-10-09 02:52:38 -0400] flaccid: well the cookbook works thats for sure, i use it..
[2012-10-09 03:05:51 -0400] Pushnell: if I create a server in ec2  but the initial cookbook compile fails, I can't 'knife ssh "name:servername"'  everything I try returns "No nodes returned from search".  But I can clearly see the node with that name in the opscode console, and running the same search there returns the correct node.
[2012-10-09 03:18:39 -0400] zts: Pushnell: does "knife node show servername" work?
[2012-10-09 03:19:34 -0400] Pushnell: zts: yes, node list and node show servername work as expected
[2012-10-09 03:21:25 -0400] Pushnell: as does "knife ec2 server delete i-2342423 -N servername purge"
[2012-10-09 03:21:48 -0400] zts: Pushnell: in that case, no idea - I was going to speculate that searching through the opscode console might be looking at other fields in addition to name.
[2012-10-09 03:22:16 -0400] Pushnell: zts: yeah, quite unusual.  thanks for taking a look though.
[2012-10-09 03:22:28 -0400] zts: Pushnell: no problem, since you're using Hosted Chef, it's perhaps worth opening a support ticket
[2012-10-09 03:22:59 -0400] zts: Pushnell: you could also check that "knife search node 'name:servername'" returns nothing (that should be what "knife ssh" is doing behind the scenes
[2012-10-09 03:23:10 -0400] zts: Pushnell: you could also see what comes back from "knife search node 'name:*'"
[2012-10-09 03:24:20 -0400] Pushnell: zts: ah, ok, thanks.  I'm still rather new to everything other than chef-solo
[2012-10-09 03:26:30 -0400] zts: Pushnell: no problem, search is great when it works, but can be a bit mystifying when it doesn't
[2012-10-09 06:13:27 -0400] vaq: Hello
[2012-10-09 06:13:39 -0400] vaq: can anyone please explain this behavior:
[2012-10-09 06:13:39 -0400] vaq: root@chef:~# knife node_list |grep t02   t02nl root@chef:~# knife ssh "node:t02" "w" FATAL: No nodes returned from search!
[2012-10-09 06:17:06 -0400] danryan: Hi vaq: is your node named t02nl?
[2012-10-09 06:18:00 -0400] vaq: danryan: yes
[2012-10-09 06:18:06 -0400] vaq: check the node_list ^^
[2012-10-09 06:18:36 -0400] danryan: vaq: doublechecking since your formatting put it on one line :)
[2012-10-09 06:18:50 -0400] danryan: vaq: knife ssh "node:t02*" "w"
[2012-10-09 06:19:18 -0400] danryan: vaq: note the asterisk. Without it, you're asking Chef to match a node named exactly "t02"
[2012-10-09 06:19:33 -0400] vaq: same thing
[2012-10-09 06:21:11 -0400] danryan: vaq: oh, right.
[2012-10-09 06:21:22 -0400] danryan: vaq: knife ssh "name:t02*" "w"
[2012-10-09 06:21:47 -0400] danryan: vaq: nodename isn't an attribute
[2012-10-09 06:25:11 -0400] vaq: same thing
[2012-10-09 06:25:15 -0400] vaq: FATAL: No nodes returned from search!
[2012-10-09 06:25:35 -0400] williamherry: every time chef-client run, it will freeze in package[xxx] action install for a bit little longer, how does chef check that one package is already installed?
[2012-10-09 06:26:17 -0400] danryan: vaq: weird. I wonder if chef expander is running?
[2012-10-09 06:26:19 -0400] danryan: vaq: http://wiki.opscode.com/display/chef/Chef+Indexer#ChefIndexer-ChefExpander
[2012-10-09 06:27:19 -0400] vaq: root@chef:~# ps aux|grep expander root      1205  0.0  1.9  90372 14608 ?        S    Oct08   0:03 /usr/bin/ruby1.8 /usr/bin/chef-expander -d -c /etc/chef/solr.rb -P /var/run/chef/expander.pid -L /var/log/chef/expander.log -n 1 -i 1 root      1207  1.9  4.9 109512 37984 ?        S    Oct08  20:30 chef-expander worker #1 (vnodes 0-1023)
[2012-10-09 06:28:50 -0400] danryan: vaq: there's a troubleshooting list on that page
[2012-10-09 06:28:57 -0400] danryan: run through it to see if it helps.
[2012-10-09 06:29:06 -0400] danryan: vaq: I need to run. Good luck!
[2012-10-09 07:54:41 -0400] maddoc: If you have an attribute that is set to `[ "foo" ]' by default in the cookbook, and you then want to append "bar" in a role definition and "baz" in the node definition (so you end up with [ "foo", "bar", "baz" ]); how do you do that in some nice way?
[2012-10-09 08:02:41 -0400] maddoc: Hm, you could create a hash out of it and only use the key, and then it gets automatically merged, right? Feels very hackish, though, as I have no interest in the value.
[2012-10-09 08:41:53 -0400] vaq: how do one add a node.set manually (json tag) through knife?
[2012-10-09 09:02:45 -0400] maddoc: vaq: If you just want to change an attribute or something, you can do it with `knife node edit <node>' anyway.
[2012-10-09 09:58:25 -0400] maxmanders: Quick question - for communication with chef-server, do I just need ssh open - or does chef/chef-server communicate over its own port?
[2012-10-09 09:59:07 -0400] jonlives: maxmanders: api port is 4000
[2012-10-09 09:59:10 -0400] jonlives: webui port is 4040
[2012-10-09 09:59:25 -0400] jonlives: api port is what you'll need for the clients to talk to the server
[2012-10-09 10:00:48 -0400] maxmanders: jonlives: cheers - quicker than looking up the docs ;-)
[2012-10-09 10:00:55 -0400] jonlives: np :)
[2012-10-09 10:07:58 -0400] willejs: hi
[2012-10-09 10:08:22 -0400] willejs: im trying to set an attribute for a cookbook in a role
[2012-10-09 10:08:57 -0400] willejs: {"defaults":{"application":{"id":"my_app"}}
[2012-10-09 10:09:11 -0400] willejs: would this not set the applications id to my_add?
[2012-10-09 10:14:49 -0400] _rc: willejs: that should be { "default_attributes": { "application": {} } }
[2012-10-09 10:15:23 -0400] _rc: and even then it will depend on if you have that attribute set at any higher precedence elsewhere
[2012-10-09 10:29:53 -0400] willejs: _rc: im using hosted chef, and it does not allow me to change the roles attributes to default_attributes
[2012-10-09 10:30:10 -0400] willejs: from defaults
[2012-10-09 10:30:21 -0400] _rc: willejs: what was that json fragman from?
[2012-10-09 10:30:25 -0400] _rc: *fragment
[2012-10-09 10:30:43 -0400] willejs: the roles attributes field
[2012-10-09 10:31:51 -0400] _rc: ah right I see
[2012-10-09 10:32:18 -0400] _rc: that should work then, assuming nothing overrides it in the precedence
[2012-10-09 10:32:41 -0400] willejs: i havent used chef for a while, and hosted chef is a little bit different.
[2012-10-09 10:33:35 -0400] _rc: it's default_attributes if you're editing a json file and uploading it; which is doable with hosted chef, you don't have to use the web ui
[2012-10-09 11:14:51 -0400] kechagia: Hi there. What's the best way to check whether a service is actually available? I want to restart dnsmasq when /etc/hosts is changed, but only if it's available. I could also check whether the package is installed..
[2012-10-09 11:19:46 -0400] gyre007: kechagia, subscribe the service to the /etc/hosts template notifications...
[2012-10-09 11:21:08 -0400] kechagia: gyre007: thanks, but that's not the problem. The problem is that the service might not be available, and I still want to be able to deploy the /etc/hosts.
[2012-10-09 11:21:32 -0400] kechagia: I could do something like only_if "test -x /etc/init.d/dnsmasq", but this is not very compatible (as it doesnt support upstart, systemd, etc)
[2012-10-09 11:21:41 -0400] kechagia: I'm trying ignore_failure true, maybe that helps..
[2012-10-09 11:22:22 -0400] kechagia: I'm also looking for a way to check whether a package is installed (indepentend from which package manager is used (apt, yum, etc)
[2012-10-09 11:23:32 -0400] kechagia: ignore_failure doesn't work unfortunately
[2012-10-09 11:57:31 -0400] gyre007: anyone knows a workaround for this ?? http://tickets.opscode.com/browse/COOK-1406
[2012-10-09 11:57:39 -0400] gyre007: we are totally affected by this :(
[2012-10-09 11:58:16 -0400] gyre007: hwo do I uninstall omnibus chef ??
[2012-10-09 11:59:55 -0400] kechagia: gyre007: did you install the header files for postgres? on debian/ubuntu this should be libpq-dev
[2012-10-09 12:00:05 -0400] gyre007: YESSS
[2012-10-09 12:01:37 -0400] Yann2: Hello! I want to use chef to deploy a file to every user's home dir. Can I use ohai &  a search for this?
[2012-10-09 12:02:42 -0400] gyre007: the question is how do I get rid of omnibus chef ?
[2012-10-09 12:04:39 -0400] kechagia: gyre007: delete the vm and spawn a new one? :)
[2012-10-09 12:04:54 -0400] gyre007: arrgh you joking right
[2012-10-09 12:06:00 -0400] Afterglow: I thought half the point of the omnibus chef thing was that it was basically self contained in /opt ?
[2012-10-09 12:06:15 -0400] Afterglow: so presumably it isn't that hard to remove, but don't quote me on that
[2012-10-09 12:07:27 -0400] gyre007: Afterglow, well it creates some symlinks...
[2012-10-09 12:09:01 -0400] iroller: Hello. What's the best way to check if all the hosts got the new template? I don't run chef as a daemon. When I run some knife_ssh commands on groups of hosts I need to be sure they all have the newest template from my cookbook(all of them were converged after last template update)
[2012-10-09 12:17:02 -0400] gyre007: zts, I have omnibus not OS package
[2012-10-09 12:17:07 -0400] gyre007: unless
[2012-10-09 12:17:11 -0400] gyre007: its installing dpkg
[2012-10-09 12:17:21 -0400] gyre007: oh
[2012-10-09 12:24:57 -0400] anentropic: question re the opscode aws cookbook... the readme says "The resource only handles manipulating the EBS volume, additional resources need to be created in the recipe to manage the attached volume as a filesystem or logical volume."
[2012-10-09 12:25:05 -0400] anentropic: what does the last bit mean?
[2012-10-09 12:25:32 -0400] anentropic: is that where I need to add the volume to fstab?
[2012-10-09 12:45:56 -0400] Yann2: is there an example somewhere on how I would iterate through a hash in a recipe?
[2012-10-09 12:55:37 -0400] zts: anentropic: yes, it's referring to using mkfs to format the disk, or to add it to LVM, etc
[2012-10-09 12:56:17 -0400] zts: anentropic: there's a "mount" resource for mounting the filesystem, once you have created it (to manage fstab)
[2012-10-09 12:56:37 -0400] anentropic: zts, thanks... which cookbook is the mount resource?
[2012-10-09 12:56:41 -0400] anentropic: it's in chef?
[2012-10-09 12:57:20 -0400] zts: anentropic: yeah, the mount resource is built-in http://wiki.opscode.com/display/chef/Resources#Resources-Mount
[2012-10-09 12:57:23 -0400] anentropic: oh yes, built in :)
[2012-10-09 12:57:40 -0400] zts: anentropic: also, look at the ebs_volume recipe in the database cookbook for an example of putting it all together
[2012-10-09 12:57:48 -0400] anentropic: zts, so typically with a newly created ebs I would have to mount it then format it
[2012-10-09 12:57:55 -0400] zts: exactly
[2012-10-09 12:58:03 -0400] zts: well, other way around - format first, then mount
[2012-10-09 12:58:10 -0400] anentropic: of course
[2012-10-09 12:58:46 -0400] anentropic: zts, mounting and 'add to the LVM' are equivalent?
[2012-10-09 13:00:48 -0400] zts: anentropic: not quite - maybe you want to allocate your EBS volume to LVM, so that you can then allocate it as smaller volumes yourself.  In that case, you would have an extra step to do that
[2012-10-09 13:01:07 -0400] zts: anentropic: but if you just want the whole ebs volume as one filesystem, ignore the mention of LVM and logical volumes
[2012-10-09 13:01:19 -0400] anentropic: zts, thanks, that's been a big help
[2012-10-09 13:01:23 -0400] zts: no problem
[2012-10-09 13:02:05 -0400] anentropic: zts, is there a chef resource for formatting the new volume?
[2012-10-09 13:03:22 -0400] zts: anentropic: unfortunately not - I copied this (using xfs) https://github.com/opscode-cookbooks/database/blob/master/recipes/ebs_volume.rb#L182
[2012-10-09 13:03:31 -0400] tknerr: ohai chefs
[2012-10-09 13:04:50 -0400] tknerr: is anybody using the nexus cookbook?
[2012-10-09 13:04:58 -0400] zts: anentropic: just to make sure that's clear, the command in only_if will be true if the filesystem is not already formatted as xfs
[2012-10-09 13:05:10 -0400] tknerr: I've got some trouble with the nginx proxying
[2012-10-09 13:05:48 -0400] tknerr: when I ssh to the host then i can access the nexus repo at http://localhost:8081
[2012-10-09 13:06:19 -0400] zts: anentropic: if you're using a different filesystem to xfs, you'll need to work out a command to check whether the disk is already formatted, and use that in only_if/not_if
[2012-10-09 13:06:30 -0400] masterkorp: Hello, i am having a problem with a template block:
[2012-10-09 13:06:51 -0400] Yann2: hey - I want to use a ohai variable in a recipe: I am trying to do this:     cookbook_file node["etc"]["passwd"]["yann"]["dir"]".ssh/authorized_keys" do    - how can I do the concatenation?
[2012-10-09 13:06:57 -0400] anentropic: zts, thanks again!
[2012-10-09 13:06:59 -0400] masterkorp: It has a notifies attribute that restarts nagios if the template changes
[2012-10-09 13:07:08 -0400] masterkorp: thing is the template never changes
[2012-10-09 13:07:20 -0400] masterkorp: and restarts every chef-client run
[2012-10-09 13:09:05 -0400] zts: Yann2: cookbook_file node["etc"]["passwd"]["yann"]["dir"] + ".ssh/authorized_keys"
[2012-10-09 13:09:25 -0400] zts: Yann2: although you might actually need "/.ssh/authorized_keys"
[2012-10-09 13:10:28 -0400] masterkorp: http://pastie.org/5024073
[2012-10-09 13:10:35 -0400] masterkorp: The block and the output
[2012-10-09 13:11:00 -0400] Yann2: zts, and to test if the user actually exists and/or has a home dir?
[2012-10-09 13:11:12 -0400] Yann2: sry I'm beginning with chef, it's hard to get ussed to the syntax
[2012-10-09 13:12:45 -0400] zts: masterkorp: that should only notify if the template changes - can you please pastebin the output of a whole chef run?
[2012-10-09 13:13:15 -0400] zts: Yann2: no need to apologise.  node['etc']['passwd']['yann'] will only exist of there is an entry for yann in the password file
[2012-10-09 13:13:43 -0400] zts: Yann2: this page may help you with the basic ruby syntax used in Chef recipes: http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CB8QFjAA&url=http%3A%2F%2Fwiki.opscode.com%2Fdisplay%2Fchef%2FJust%2BEnough%2BRuby%2Bfor%2BChef&ei=8SJ0UI2WHYvMrQe-koDgBQ&usg=AFQjCNHX8kXrLmbCdVyu_YfQqsyw-FEirg
[2012-10-09 13:13:52 -0400] zts: gah, sorry.  Google--
[2012-10-09 13:14:04 -0400] zts: http://wiki.opscode.com/display/chef/Just+Enough+Ruby+for+Chef
[2012-10-09 13:17:43 -0400] masterkorp: zts: i know is he the full output, maybe its because the template has no variables ?
[2012-10-09 13:18:30 -0400] tknerr: can anybody help me with an nginx configuration issue?
[2012-10-09 13:18:37 -0400] tknerr: the config is here:
[2012-10-09 13:18:38 -0400] tknerr: https://gist.github.com/3858723
[2012-10-09 13:19:07 -0400] zts: masterkorp: the full output should also have some line about the template being installed.  And a line about the previous copy being backed up
[2012-10-09 13:19:26 -0400] zts: masterkorp: also, what version of chef are you using?
[2012-10-09 13:19:55 -0400] tknerr: ah, forget it
[2012-10-09 13:20:03 -0400] tknerr: it works now
[2012-10-09 13:21:35 -0400] masterkorp: crap is was using chef-client | tee out.log
[2012-10-09 13:21:52 -0400] masterkorp: and chef-client starts dumping a buttload of json :O
[2012-10-09 13:21:55 -0400] masterkorp: like for agaes
[2012-10-09 13:29:39 -0400] gyre008: can someone eplxain me whats wrong with this ??
[2012-10-09 13:29:50 -0400] gyre008: https://gist.github.com/3858826
[2012-10-09 13:30:52 -0400] gyre008: I'm banging my head against the desk.
[2012-10-09 13:31:25 -0400] miketheman: gyre008:your head must be bruised.
[2012-10-09 13:31:33 -0400] zts: gyre008: you say "subscribes subscribes"
[2012-10-09 13:31:35 -0400] gyre008: haha
[2012-10-09 13:31:43 -0400] gyre008: yeah zts just noticed thattoo much chef :)
[2012-10-09 13:32:00 -0400] miketheman: I subscribes subscribes sometimes too.
[2012-10-09 13:32:14 -0400] miketheman: to spam email, apparently
[2012-10-09 13:35:26 -0400] gyre008: is anyone using Upstart provider ?
[2012-10-09 13:35:30 -0400] gyre008: to start the services ?
[2012-10-09 13:38:07 -0400] miketheman: gyre008: nope.
[2012-10-09 13:42:04 -0400] anentropic: zts, just noticed there's an opscode lvm cookbook that handles mounting and formatting... I guess I could make an lvm volume on the newly-created ebs volume that takes up 100% size?
[2012-10-09 13:44:01 -0400] anentropic: found this thread from 2009 where people discuss creating a 'filesystem' resource that runs mkfs etc but it's unclear how that ended up http://lists.opscode.com/sympa/arc/chef/2009-06/msg00058.html
[2012-10-09 13:44:44 -0400] masterkorp: zts: so i aparently cant paste the full output without chef-client dumping a buttload of json
[2012-10-09 13:47:23 -0400] zts: anentropic: oh cool, last time I looked for an lvm resource I couldn't find anything good.  That looks pretty nice
[2012-10-09 13:48:22 -0400] anentropic: zts, I don't know anything about LVM, does it make sense what I said, to create an lvm volume group across a single physical volume and then have a single logical volume inside that takes up all the space?
[2012-10-09 13:49:27 -0400] zts: anentropic: I don't know enough about LVM to say what the impact would be - I'd imagine your disk will be a little slower than if you didn't use LVM (probably not a big worry, EBS isn't fast).  Also, there's one more thing that can go wrong.
[2012-10-09 13:50:31 -0400] zts: anentropic: so it depends what is most important to you.  If it is having something that is easiest to get running with chef, but maybe not the best/most efficient, the LVM recipe looks good
[2012-10-09 13:50:58 -0400] zts: anentropic: personally, I would avoid LVM and put some extra time into making a recipe that does exactly what you need
[2012-10-09 13:51:17 -0400] zts: anentropic: this file shows how the logical_volume resource does its magic: https://github.com/opscode-cookbooks/lvm/blob/master/providers/logical_volume.rb
[2012-10-09 13:51:32 -0400] anentropic: zts, thanks
[2012-10-09 13:51:43 -0400] zts: masterkorp: that sounds... weird.  What version of chef are you using?
[2012-10-09 13:52:16 -0400] anentropic: zts, I also found this http://community.opscode.com/cookbooks/volumes but it's a bit baffling at first glance
[2012-10-09 13:54:04 -0400] masterkorp: zts: 10.14.2
[2012-10-09 13:55:46 -0400] masterkorp: zts: http://pastie.org/5024287
[2012-10-09 13:55:49 -0400] masterkorp: now i get this
[2012-10-09 13:57:02 -0400] zts: anentropic: I'm also baffled by that one - I think it probably forms part of the ironfan stuff, which is all very clever but I've had trouble figuring out how to re-use pieces
[2012-10-09 13:57:27 -0400] anentropic: cool, I'll roll my own mkfs sauce
[2012-10-09 13:57:33 -0400] cwj: i am using https://github.com/kohder/chef-lvm and https://github.com/kohder/chef-volumes
[2012-10-09 13:57:36 -0400] anentropic: or pastry or whatever :)
[2012-10-09 13:58:15 -0400] cwj: zero docs so it requires some cowboy-up
[2012-10-09 13:58:40 -0400] zts: masterkorp: not sure what to suggest, sorry :(  when I run chef-client at a terminal, it doesn't spit out loads of json
[2012-10-09 13:58:59 -0400] zts: masterkorp: that pastie looks like it might be dumped node data (automatic attributes from ohai), but I'm not sure
[2012-10-09 13:59:54 -0400] cwj: masterkorp: looks like one of your chef handlers is having trouble processing whatever input its being given from the chef run
[2012-10-09 14:02:35 -0400] masterkorp: thing is i did nothing to change this ?
[2012-10-09 14:03:05 -0400] masterkorp: Is it a problem if chef-client 10.14.2 is runing on ruby1.8
[2012-10-09 14:18:44 -0400] jtimberman: anentropic: the lvm cookbook's lwrps aren't tested and released. use at your own risk. may eat the world. :)
[2012-10-09 14:23:59 -0400] geekbri: cwj: I'm using those as well
[2012-10-09 14:30:26 -0400] jgerry: good morning! I have a question about setting up a service properly. I'm using monit and trying to override the default provider service (not init). I'm setting start_command and stop_command explicitly but the first thing that occurs when my run starts is that it tries /etc/init.d/logstash status Thoughts? https://gist.github.com/3854396
[2012-10-09 14:31:31 -0400] cwj: masterkorp: you may not have changed anything, but the output from the chef run being sent to the handler may have changed in a way that breaks the handler
[2012-10-09 14:46:05 -0400] Yann2: how can I throw an exception in chef? is it easy to send an error message that I'd see during the chef-run ?
[2012-10-09 14:46:21 -0400] Axsuul: Yann2: Chef::Log.error "WTF"
[2012-10-09 14:54:03 -0400] ssd7: Ohai Chefs!
[2012-10-09 14:54:16 -0400] miketheman: hi ssd7
[2012-10-09 15:20:08 -0400] masterkorp: Guys, would you give any recomendation of changed chef-client to use embebed ruby ?
[2012-10-09 15:24:03 -0400] ssd7: masterkorp: Apologies, I'm not sure what you are asking.
[2012-10-09 15:24:34 -0400] masterkorp: We want to make chef-client run with embeded chef
[2012-10-09 15:24:54 -0400] masterkorp: Only recent bootstraps use embended ruby
[2012-10-09 15:25:21 -0400] masterkorp: we upgraded the chef-client to 0.14.2 but its still using the local ruby 1.8
[2012-10-09 15:25:57 -0400] ssd7: Ah, I see.  The easiest way is to uninstall the currently installed chef-client and then install the omnibus-based chef-client.
[2012-10-09 15:26:46 -0400] ssd7: It is the install process that sets up the embedded ruby and dependencies, nothing particular about the chef-client version really (although we do have some patches in recent versions to make chef-client work well with teh embedded ruby installation).
[2012-10-09 15:27:25 -0400] masterkorp: thank you is there any documentation on uninstalling
[2012-10-09 15:29:38 -0400] ssd7: The uninstall method depends on how you originally installed.
[2012-10-09 15:30:32 -0400] ssd7: If you installed via gems, then "gem uninstall chef" is your best bet.  If you installed with native packages, then using your package manager is the way to go.
[2012-10-09 15:35:36 -0400] maek: masterkorp: check out http://community.opscode.com/cookbooks/omnibus_updater
[2012-10-09 15:35:46 -0400] maek: that removes gem or rpm chef and installs omnibus
[2012-10-09 15:36:49 -0400] masterkorp: super handy !
[2012-10-09 15:37:14 -0400] corp: greetings
[2012-10-09 15:37:15 -0400] masterkorp: http://img268.imageshack.us/img268/3214/vrias170.jpg
[2012-10-09 15:38:17 -0400] xerxas: Hi all
[2012-10-09 15:38:33 -0400] xerxas: I have a role with a recipe that sets an aws_elastic_ip  ...
[2012-10-09 15:38:48 -0400] xerxas: this doesn't work at bootstrap, and is a known problem
[2012-10-09 15:39:04 -0400] xerxas: would it work if at bootstrap, chef-client is ran with a nohup ?
[2012-10-09 15:40:31 -0400] miketheman: xerxas: where is it a known problem?
[2012-10-09 15:40:55 -0400] xerxas: miketheman: http://tickets.opscode.com/browse/KNIFE_EC2-67
[2012-10-09 15:41:12 -0400] xerxas: there is a pull request, for changing knife ec2 plugin's behaviour
[2012-10-09 15:41:20 -0400] xerxas: I do agree it's not a nice solution
[2012-10-09 15:42:09 -0400] miketheman: hm. it might run in a nohup, sure - but that's not great either.
[2012-10-09 15:42:19 -0400] miketheman: have you tried the pull request?
[2012-10-09 15:42:29 -0400] xerxas: no I didn't
[2012-10-09 15:42:36 -0400] xerxas: why it's not great ?
[2012-10-09 15:42:58 -0400] miketheman: because you lose interactive progress - if it fails you really have no idea
[2012-10-09 15:43:14 -0400] xerxas: so ?
[2012-10-09 15:43:23 -0400] xerxas: is there a better solution then ?
[2012-10-09 15:43:35 -0400] xerxas: IIRC, if bootstrap fails, run list is empty
[2012-10-09 15:44:01 -0400] miketheman: I guess I'm not sure what advantage there is in doing this at bootstrap time.
[2012-10-09 15:44:13 -0400] xerxas: miketheman:  the best solution would be to tell knife ec2 plugin , the client has changed it's address
[2012-10-09 15:44:23 -0400] xerxas: but it's somewhat out of scope I would say
[2012-10-09 15:44:43 -0400] xerxas: miketheman: the advantage is that I boostrap a host with a configuration and the configuration is applied
[2012-10-09 15:44:55 -0400] xerxas: the ip address is part of the configuration
[2012-10-09 15:45:16 -0400] miketheman: xerxas: so some of your configuration relies on ip addresses, especially of the local node?
[2012-10-09 15:46:37 -0400] xerxas: I do use ipaddress from ohai , yeah
[2012-10-09 15:46:48 -0400] xerxas: I could do a 2nd run
[2012-10-09 15:47:29 -0400] xerxas: knife ec2 server create, manually attach the ip address (which would then not be tracked in , let's say my chef-repo) , ssh host chef-client
[2012-10-09 15:47:47 -0400] xerxas: miketheman: I don't find this process clean
[2012-10-09 15:48:00 -0400] xerxas: manually attaching is 1/ error prone , 2/ not tracked
[2012-10-09 15:48:07 -0400] miketheman: agreed
[2012-10-09 15:48:25 -0400] miketheman: it does seem like a rpoblem.
[2012-10-09 15:48:44 -0400] miketheman: I'd try the pull request for knife-ec2 - see if it does what you want it to do
[2012-10-09 15:54:30 -0400] xerxas: miketheman: I think the pr changes to behaviour of ec2 plugin, not the bootstrap
[2012-10-09 15:55:34 -0400] xerxas: though, it would work, as , the instance would be boostrapped with the correct ip address, and would not loose connection to the client
[2012-10-09 15:55:57 -0400] xerxas: you have , both the ipaddress on the command line , and in the cookbooks
[2012-10-09 15:56:14 -0400] xerxas: miketheman: actually, the issue / PR haven't been accepeted
[2012-10-09 15:56:30 -0400] miketheman: you can still pull the change locally, build the gem and test it
[2012-10-09 15:57:40 -0400] xerxas: miketheman: nice, but the issue have been tested and people says it works ;)
[2012-10-09 15:58:00 -0400] miketheman: sure - and you doing the same and voting on it, adding a comment, may help move it along to acceptance
[2012-10-09 15:59:57 -0400] xerxas: miketheman: right ;)
[2012-10-09 15:59:59 -0400] xerxas: thanks
[2012-10-09 16:00:03 -0400] xerxas: I'll try it then
[2012-10-09 16:22:14 -0400] flashingpumpkin: hm. is it possible that chef-bootstrap is broken? -> http://dpaste.org/DrYi0/
[2012-10-09 16:23:52 -0400] flashingpumpkin: or is that vagrant interfering?
[2012-10-09 16:26:38 -0400] josephholsten: anyone using custom dashboards pulling from their chef server?
[2012-10-09 16:28:45 -0400] jonlives: josephholsten: you mean pulling metrics?
[2012-10-09 16:28:47 -0400] flashingpumpkin: ah yeah, it was vagrant
[2012-10-09 16:29:35 -0400] josephholsten: jonlives: atm, I'm mostly just wanting to add sorting and arbitrary columns to the status page
[2012-10-09 16:29:56 -0400] jonlives: ah ok
[2012-10-09 16:30:15 -0400] josephholsten: but I'm wondering if I should think more broadly
[2012-10-09 16:30:19 -0400] jonlives: josephholsten: we do this (slide 30 onwards): http://www.slideshare.net/jonlives/michelin-starred-cooking-with-chef
[2012-10-09 16:30:58 -0400] jonlives: that whole section is various stuff we do to get info out of chef
[2012-10-09 16:32:49 -0400] jtimberman: jonlives: And its top notch goodness!
[2012-10-09 16:33:02 -0400] jonlives: gracias!
[2012-10-09 16:33:34 -0400] josephholsten: jonlives: are you just talking about the graphite handler?
[2012-10-09 16:34:05 -0400] jonlives: josephholsten: graphite handler, the dashboards framework we use to display graphs too
[2012-10-09 16:34:30 -0400] jonlives: josephholsten: what metrics are you looking to display, might be a better question?
[2012-10-09 16:40:51 -0400] josephholsten: oh, I've got the _metrics_ shipped into graphite, I'm not worried about that
[2012-10-09 16:41:13 -0400] josephholsten: I just want something more convenient to get at ohai attributes, etc
[2012-10-09 16:41:16 -0400] jonlives: aaaah
[2012-10-09 16:41:29 -0400] josephholsten: yeah, you guys made that easy
[2012-10-09 16:42:18 -0400] jonlives: josephholsten: are you looking to report on these attribs, display them in a dashboard etc etc?
[2012-10-09 16:42:29 -0400] jonlives: we have a bunch of email reports based on search queries, for example
[2012-10-09 16:43:23 -0400] josephholsten: that sounds interesting
[2012-10-09 16:43:46 -0400] OlegYch|h: hey guys i'm getting "ArgumentError: hadoop_ark[joyentcloud] (hadoop::install line 3) had an error: ArgumentError: You must supply a name when declaring a default resource"
[2012-10-09 16:43:49 -0400] josephholsten: I've got air brakes for failed runs, not sure what else I'd want emails for
[2012-10-09 16:43:56 -0400] OlegYch|h: what might be the reason?
[2012-10-09 16:44:45 -0400] josephholsten: OlegYch|h: could we see the install.rb file?
[2012-10-09 16:44:52 -0400] jonlives: josephholsten: we email for example nodes left in our testing environment, nodes which haven't run chef in the last n mins etc etc
[2012-10-09 16:44:53 -0400] josephholsten: the recipes/install.rb
[2012-10-09 16:45:18 -0400] jonlives: josephholsten: basic template is here: https://github.com/jonlives/velocity_resources/blob/master/expanded-chef-report-template.rb
[2012-10-09 16:45:24 -0400] josephholsten: jonlives: do you guys run chef as a long-running process?
[2012-10-09 16:45:37 -0400] jonlives: josephholsten: yeah, we run it daemonized
[2012-10-09 16:45:42 -0400] OlegYch|h: yep, here http://pastie.org/5025084
[2012-10-09 16:45:44 -0400] jonlives: 10 minute run interval
[2012-10-09 16:46:04 -0400] josephholsten: do you ever have issues with process size?
[2012-10-09 16:46:11 -0400] jonlives: nope, not really
[2012-10-09 16:46:20 -0400] jonlives: very occasionally, but we have alerts for that
[2012-10-09 16:46:49 -0400] jonlives: it's easy to use a nagios event handler or something to restart the daemon if it uses too much memory, worst case
[2012-10-09 16:47:49 -0400] josephholsten: yeah, we used monit for that. but I've got a current issue where a failing run will cause the proc to blow up to 3g of resident memory.
[2012-10-09 16:48:16 -0400] jonlives: not seen that before!
[2012-10-09 16:48:32 -0400] josephholsten: I'm glad. It does not make me happy.
[2012-10-09 16:48:45 -0400] jonlives: josephholsten: could that be a misbehaving handler running on error?
[2012-10-09 16:48:54 -0400] jonlives: ie, try disabling handlers and see what happens on fail then
[2012-10-09 16:49:48 -0400] josephholsten: OlegYch|h: I think that's the ark.rb file, but the error says it's from the hadoop cookbook's install recipe
[2012-10-09 16:51:40 -0400] josephholsten: jonlives: the only handler I've intentionally added is airbrake, and I've reproduced the issue without it. do you know how to inspect/log the handlers being used?
[2012-10-09 16:52:46 -0400] jonlives: if you haven't added any yourself, you're probably not using them :p
[2012-10-09 16:52:59 -0400] jonlives: it'd be in your client.rb file tho.
[2012-10-09 16:53:00 -0400] josephholsten: OlegYch|h: also, you've got an issue on line 53. looks like a newline got added in the middle of the comment
[2012-10-09 16:53:29 -0400] mortuar: Anyone run into issues after updating gems on your chef workstation/server? I just updated from 10.12 to 10.14 on both and for some reason my user is having issues but I'm able to run knife as root
[2012-10-09 16:53:32 -0400] mortuar: which makes no sense to me
[2012-10-09 16:53:58 -0400] mortuar: Error I'm seeing ----> /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:59:in `gem_original_require': no such file to load -- chef/knife/rackspace_base (LoadError)
[2012-10-09 16:54:36 -0400] OlegYch|h: oh god
[2012-10-09 16:54:49 -0400] OlegYch|h: thank you joseph for noticing it
[2012-10-09 16:56:29 -0400] OlegYch|h: it seems to work now
[2012-10-09 17:02:06 -0400] josephholsten: is there a way to call the chef api via curl?
[2012-10-09 17:02:43 -0400] josephholsten: http://wiki.opscode.com/display/chef/Server+API points to a nonexistent LEG:Authentication
[2012-10-09 17:03:17 -0400] xerxas: ;)
[2012-10-09 17:03:20 -0400] xerxas: oops sorry
[2012-10-09 17:16:20 -0400] miketheman: josephholsten: have you read http://wiki.opscode.com/display/chef/Making+Authenticated+API+Requests ?
[2012-10-09 17:29:36 -0400] dpetzel: does anyone have a good a good minitest example of testing a custom LWRP. My newb'ness in both Ruby and Chef is shining through today, I'm struggling to wrap my head around the best way to "invoke" an LWRP froma  minitest
[2012-10-09 17:31:19 -0400] miketheman: COUNTDOWN!
[2012-10-09 17:31:22 -0400] miketheman: whoops
[2012-10-09 17:31:32 -0400] miketheman: sorry - excited about redbull stratos, and was in the wrong window
[2012-10-09 17:32:13 -0400] erikh: well, someone's playing "the final countdown" here in the office
[2012-10-09 17:32:19 -0400] josephholsten: miketheman: thx
[2012-10-09 17:34:05 -0400] flashingpumpkin: guys. I keep running into crashes when bootstrapping chef-server with chef-solo, (following the instructions on the wiki) -> http://dpaste.org/UnLM0/
[2012-10-09 17:34:52 -0400] flashingpumpkin: it appears that native ruby extensions fail building. any ideas what exactly is missing? installing ruby-dev does not help either.
[2012-10-09 17:35:31 -0400] kindsol: looks like geode libs might be missing
[2012-10-09 17:35:41 -0400] flashingpumpkin: kindsol, they're getting installed
[2012-10-09 17:35:57 -0400] kindsol: take a look at the mkmf.log file to be sure
[2012-10-09 17:37:19 -0400] kindsol: flashingpumpkin: probably found somewhere near /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/dep_selector-0.0.8/ext/dep_gecode/
[2012-10-09 17:38:28 -0400] flashingpumpkin: kindsol, http://dpaste.org/w1hPt/ - I'd guess ruby-devel is missing
[2012-10-09 17:38:44 -0400] josephholsten: anyone know if it's remotely sane to try to implement auth'd api calls in javascript?
[2012-10-09 17:39:31 -0400] kindsol: flashingpumpkin: can you paste the contents of mkmf.log?
[2012-10-09 17:39:52 -0400] flashingpumpkin: kindsol, these are the contents of the log in the dpaste above
[2012-10-09 17:40:28 -0400] kindsol: hmmm
[2012-10-09 17:41:00 -0400] flashingpumpkin: kindsol, there is a second mkmf.log file in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/ruby-shadow-2.1.4/mkmf.log along the same lines. all programs that include ruby.h
[2012-10-09 17:42:07 -0400] flashingpumpkin: kindsol, the second file: http://dpaste.org/8Jqi2/
[2012-10-09 17:43:08 -0400] kindsol: nah, this was a failure with installing the dep_selector gem
[2012-10-09 17:43:23 -0400] kindsol: the native extension dep_gecode failed to build
[2012-10-09 17:43:56 -0400] kindsol: which is why I think geocode lib is not installed.  but you could be missing some other lib too
[2012-10-09 17:44:59 -0400] flashingpumpkin: kindsol, the full chef run: http://dpaste.org/Y4C86/ - it does upgrade the gecode libs
[2012-10-09 17:45:06 -0400] kindsol: From your orig paste (http://dpaste.org/UnLM0/)
[2012-10-09 17:45:06 -0400] kindsol: Gem files will remain installed in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/dep_selector-0.0.8 for inspection.
[2012-10-09 17:45:06 -0400] kindsol: Results logged to /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/dep_selector-0.0.8/ext/dep_gecode/gem_make.out
[2012-10-09 17:45:22 -0400] kindsol: maybe paste content of gem_make.out?
[2012-10-09 17:46:52 -0400] flashingpumpkin: kindsol, gem_make.out -> http://dpaste.org/8dbIc/
[2012-10-09 17:47:21 -0400] flashingpumpkin: that's all available in the original run too. but what are those development tools?
[2012-10-09 17:48:59 -0400] kindsol: boo.  Sorry man I am out of tricks.  The next step I would take is to get `make` working from the command-line in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/dep_selector-0.0.8/ext/dep_gecode/ dir.  good luck!
[2012-10-09 17:55:46 -0400] tknerr: hey guys, what's the common way for adding a role to a node's run_list and then trigger a chef run?
[2012-10-09 17:56:36 -0400] flashingpumpkin: hm. that's a bit shit. this error happens both on local in vagrant running ubuntu 12.04 and on ec2 ubuntu 12.04 amis from canonical
[2012-10-09 17:57:50 -0400] tknerr: is it knife node edit + knife ssh "name:nodename" "sudo chef-client"
[2012-10-09 18:02:26 -0400] littonj: since upgrading to chef-10.14 I've seen several recipes on bootstrap that return FATAL: Errno::ENOENT: No such file or directory for the recipe file. has anyone else noticed this?
[2012-10-09 18:08:01 -0400] jtimberman: tknerr: if you're adding the role to the end of the run list you can use
[2012-10-09 18:08:13 -0400] jtimberman: knife node run list add NODENAME 'role[ROLENAME]'
[2012-10-09 18:14:41 -0400] juliancdunn: just posted to the ml about my Chef server refusing to supply some files to nodes... anyone have clues on why? or where I should start debugging?
[2012-10-09 18:15:35 -0400] gyre008: is there any reason why would template NOT be updating the actual file on the server ? heres whats happeningI have a template resource which is being created from within LWRP, I modify it on my laptop, upload it to the server run chef-client and it doesn't modify the actual file on the server :)so then I delete the file on the server, rerun chef-client and the new file is created with the modification I made
[2012-10-09 18:15:41 -0400] gyre008: NOW THIS IS WEIRD
[2012-10-09 18:16:48 -0400] tknerr: @jtimberman: awesome, thanks!
[2012-10-09 18:17:20 -0400] tknerr: @jtimberman: is there a similarly simple command to assign a node to an environment?
[2012-10-09 18:17:40 -0400] jtimberman: tknerr: unfortunately, no. i was just looking at a ticket for that.
[2012-10-09 18:18:07 -0400] jtimberman: http://tickets.opscode.com/browse/CHEF-1910
[2012-10-09 18:18:23 -0400] jonlives: tknerr: https://github.com/jonlives/knife-flip does it
[2012-10-09 18:18:23 -0400] jtimberman: tknerr: the way to do it is the nodes.transform there, which you can stick that in a knife exec command
[2012-10-09 18:18:31 -0400] jtimberman: jonlives: <3
[2012-10-09 18:18:35 -0400] jonlives: :p
[2012-10-09 18:18:38 -0400] jtimberman: tknerr: or use jon's plugin
[2012-10-09 18:18:43 -0400] jtimberman: because he's way cooler than me. :)
[2012-10-09 18:18:48 -0400] jonlives: haha
[2012-10-09 18:19:01 -0400] jtimberman: (which is true in any case)
[2012-10-09 18:19:15 -0400] jonlives: aww shucks, t'weren't nuthin :p
[2012-10-09 18:19:42 -0400] tknerr: nice :-)
[2012-10-09 18:19:45 -0400] jtimberman: :D
[2012-10-09 18:21:11 -0400] tknerr: @jtimberman: do you have an example for knife exec with a nodes.transform?
[2012-10-09 18:21:32 -0400] tknerr: I've seen one recently, but don't remember where it was...
[2012-10-09 18:22:53 -0400] jtimberman: tknerr: knife exec -E 'nodes.transform { YOUR BLOCK }'
[2012-10-09 18:24:49 -0400] jmartin: jtimberman: does hosted chef have an automated testing service? i.e. is that the point of test-kitchen?
[2012-10-09 18:25:18 -0400] tknerr: @jtimberman: ok, that was it. need to get more familiar with my knife... :-)
[2012-10-09 18:25:36 -0400] tknerr: jonlives: thanks as well! :-)
[2012-10-09 18:26:38 -0400] jonlives: tknerr: np :)
[2012-10-09 18:29:14 -0400] tknerr: hmmm... `knife ssh name:my-host "sudo chef-client"` tries to connect via fqdn rather than ip address, right?
[2012-10-09 18:29:40 -0400] ssd7: tknerr: By default yes, use -a ipaddress to get it to use the "ipaddress" attribute
[2012-10-09 18:30:24 -0400] ssd7: Or -a ANY_ATTR_NAME_HERE to use some other attribute
[2012-10-09 18:30:26 -0400] tknerr: @ssd7: ah, so easy, just need to ask :-) thanks!
[2012-10-09 18:33:16 -0400] tknerr: @ssd7: found it here as well: http://wiki.opscode.com/display/chef/Knife+Built+In+Subcommands
[2012-10-09 18:33:46 -0400] tknerr: @ssd7: but there's no -P for password-based authentication, isn't it? :-/
[2012-10-09 18:34:30 -0400] ssd7: -P PASSWORD should work for knife-shh
[2012-10-09 18:34:30 -0400] tknerr: @ssd7: ah forget it, there is! just overlooked it...
[2012-10-09 18:36:32 -0400] tknerr: @ssd7: thanks! guess I need a coffee... :-)
[2012-10-09 18:46:17 -0400] uncommitted: so interesting situation, wonder if anyone has come up with a solution
[2012-10-09 18:46:29 -0400] uncommitted: i'd like to create a new machine, run chef on it 1 time
[2012-10-09 18:46:46 -0400] uncommitted: and then apply a role that disables any further runs
[2012-10-09 18:49:57 -0400] jmartin: uncommitted: chef-solo sounds like a good case for that
[2012-10-09 18:50:06 -0400] monvillalon: chef mount resource gives me "is busy or already mounted" on an nfs, does the action :remount prevents this, will it unmount/remount as this could have repercussions
[2012-10-09 18:52:31 -0400] heathsnow: .
[2012-10-09 18:53:31 -0400] jgerry: I have a question about setting up a service properly. I'm using monit and trying to override the default provider service in chef (not init). I'm setting start_command and stop_command explicitly but the first thing that occurs when my chef run starts is that it tries "/etc/init.d/logstash status"  Thoughts? https://gist.github.com/3854396
[2012-10-09 18:54:01 -0400] uncommitted: jmartin: i've got a chef server up and running, and it rebuild great but devs want to be able to blow them up. I'm thinking a harakiri role but I'm not sure how the ordering will work.
[2012-10-09 18:54:13 -0400] jtimberman: jmartin: no, OHC doesn't have automated testing as a service.
[2012-10-09 18:54:58 -0400] jmartin: jtimberman: ah, well that might be something useful/additional service
[2012-10-09 18:55:14 -0400] hoover_damm: great way to avoid vagrant
[2012-10-09 18:55:41 -0400] jmartin: well test-kitchen does a nice job of that i think, and i figured that would certainly be an obvious integration
[2012-10-09 18:55:44 -0400] erikh: woohoo automated testing
[2012-10-09 18:55:55 -0400] erikh: and opscode pays the bill, right?
[2012-10-09 18:56:03 -0400] jtimberman: erikh: ....
[2012-10-09 18:56:06 -0400] erikh: jtimberman: :P
[2012-10-09 18:56:07 -0400] jtimberman: ;)
[2012-10-09 18:56:24 -0400] jcwdev: ello
[2012-10-09 18:56:38 -0400] jcwdev: quick question about cookbook attributes
[2012-10-09 18:57:13 -0400] jcwdev: say i have two application cookbooks. they are very similar and so have attributes with the same name
[2012-10-09 18:57:36 -0400] jcwdev: will those attributes conflict in the node namespace?
[2012-10-09 18:58:26 -0400] jcwdev: or are the attributes in a cookbook namespaced to that cookbook automatically?
[2012-10-09 18:59:00 -0400] jcwdev: somehow i had the impression that cookbook attributes showed up in the root of node data
[2012-10-09 18:59:08 -0400] jcwdev: node.app_name for example
[2012-10-09 18:59:43 -0400] jtimberman: jcwdev: they're only namespaced if you make them so
[2012-10-09 18:59:59 -0400] jtimberman: node['application_one'] and node['application_two'] for example
[2012-10-09 19:00:33 -0400] jcwdev: ok, so i read the docs correctly for once :)
[2012-10-09 19:01:43 -0400] jcwdev: then consider: in attributes/default.rb
[2012-10-09 19:01:43 -0400] jcwdev: cookbook_name = "my_app_cookbook"
[2012-10-09 19:01:44 -0400] jcwdev: default[cookbook_name]['app_name'] = "MyApp"
[2012-10-09 19:01:56 -0400] jcwdev: is that retarded?
[2012-10-09 19:03:37 -0400] jcwdev: essentially, what i would like to do is have a "template cookbook" that i can copy, change a few default attributes, and have a new application cookbook
[2012-10-09 19:04:05 -0400] jcwdev: but a) there seems to be no magic value for "this cookbook name" so i am setting it manually.
[2012-10-09 19:10:14 -0400] jcwdev: b) in the recipes i would then have to somehow reference cookbook_name[''app_name"] - still figuring out the syntax there - but i got the uneasy feeling that i was diverging from the right path or the "chef way"
[2012-10-09 19:10:15 -0400] jcwdev: so i figured i'd poke my head in here and fish for someone to tell me I'm missing the point somewhere :)
[2012-10-09 19:10:16 -0400] jcwdev: it really feels like i am missing something - but I dunno what :P
[2012-10-09 19:18:15 -0400] gyre008: I'm getting undefined method `dirname' for Chef::Provider::File:Class when calling File.dirname :)
[2012-10-09 19:18:29 -0400] gyre008: I thought I COULD use ruby API in chef :0
[2012-10-09 19:18:30 -0400] gyre008: :)
[2012-10-09 19:20:38 -0400] gyre008: I'm running File.dirname from within LWRP providerit doesn't like it
[2012-10-09 19:20:56 -0400] erikh: ::File.dirname
[2012-10-09 19:21:12 -0400] gyre008: mm erikh will try that
[2012-10-09 19:21:17 -0400] clexmond: you have a namespace collision
[2012-10-09 19:22:44 -0400] DigitalFlux: Hi, What's up with chef 10.14.2 ?
[2012-10-09 19:23:00 -0400] DigitalFlux: it keeps throwing "undefined method `blank?' for nil:NilClass" when using the collectd server cookbook
[2012-10-09 19:23:11 -0400] DigitalFlux: blank? doesn't work now ?
[2012-10-09 19:23:24 -0400] erikh: nil.blank? doesn't exist in ruby
[2012-10-09 19:23:27 -0400] erikh: it's a rails thing.
[2012-10-09 19:24:39 -0400] bluepojo: ActiveSupport defines #blank
[2012-10-09 19:24:44 -0400] bluepojo: fwiw
[2012-10-09 19:25:27 -0400] erikh: same with a bunch of other monkeypatches
[2012-10-09 19:25:30 -0400] erikh: e.g., nil.empty?
[2012-10-09 19:26:28 -0400] jhayden: does any know if chef has the equivalent of puppet.block?
[2012-10-09 19:26:47 -0400] jhayden: if puppet.block exists puppet will not apply any changes
[2012-10-09 19:26:49 -0400] erikh: hrm. that might make a good blog article: "Rails to Chef Traps Guide"
[2012-10-09 19:27:10 -0400] DigitalFlux: okie, switching to nil?
[2012-10-09 19:27:32 -0400] gyre008: thanks erikh
[2012-10-09 19:27:55 -0400] erikh: DigitalFlux: what you probably want is: if !var or var.blank? or something similar.
[2012-10-09 19:29:20 -0400] DigitalFlux: erikh: it seems like the cookbook maintainers solved that using nil? -> https://github.com/coderanger/chef-collectd/pull/1
[2012-10-09 19:29:56 -0400] erikh: well, blank does more than just check nil
[2012-10-09 19:30:06 -0400] erikh: so, whatever works, but realize you're changing the logic.
[2012-10-09 19:38:38 -0400] kallen: is chef's service resource particular about the LSB-compliantness of an init script on CentOS?
[2012-10-09 19:40:32 -0400] josephholsten: kallen: not last I remember. but that may only be for start/stop/restart, it seems like enable/disable would care.
[2012-10-09 19:44:36 -0400] josephholsten: kallen: looks like it's running 'chkconfig --list service_name': https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/service/redhat.rb#L59
[2012-10-09 19:45:49 -0400] cjs226: without using git, etc. is there a way to send a notification when a cookbook/role/data bag/etc. is updated?
[2012-10-09 19:47:52 -0400] DigitalFlux: HEAVYWATERS: Y U NO UPDATE YOUR COOKBOOKS ON THE COMMUNITY SITE ? :-)
[2012-10-09 19:51:57 -0400] kallen: josephholsten: thanks. noticed that. sorry got pulled away for prod "issue"
[2012-10-09 20:12:44 -0400] heathsnow: Is there a chef-solo way of working with node attributes?
[2012-10-09 20:23:37 -0400] jtimberman: heathsnow: working with them how?
[2012-10-09 20:25:54 -0400] heathsnow: jtimberman: Using node attributes in a recipe while running chef-solo.  Am I able to add node attributes via the solo.json?
[2012-10-09 20:26:58 -0400] heathsnow: Ah, I found it:  http://wiki.opscode.com/display/chef/Chef+Solo
[2012-10-09 20:28:35 -0400] yfeldblum: heathsnow, yes, the json file is your single input parameter to chef-solo, and should contain everything you need to tell chef-solo what to do, generally a run-list plus some attributes
[2012-10-09 20:29:23 -0400] juliancdunn: any idea why chef-solr needs to run as root on a Chef server?
[2012-10-09 20:42:49 -0400] monvillalon: node[:ec2][:public_hostname] seems to be empty could this be because i used bootstrap instead of knife ec2?
[2012-10-09 20:43:57 -0400] hoover_damm: likely
[2012-10-09 20:45:39 -0400] hoover_damm: or you use vpc? but if you touch the appropriate 'cloud hint' file it should turn the plugin back on
[2012-10-09 20:47:30 -0400] monvillalon: hoover_damm: ok, I'm not really following, i don't use a vpn where can i find the cloud hint file?
[2012-10-09 20:51:04 -0400] monvillalon: hoover_damm: a google search yielded "/etc/chef/ohai/hints/ec2.json" but it didn't seem to work
[2012-10-09 20:51:31 -0400] hoover_damm: cloud/hints/ec2.json afaik
[2012-10-09 20:51:36 -0400] hoover_damm: but let me verify
[2012-10-09 20:52:48 -0400] hoover_damm: monvillalon, hrm... didn't appear to make it
[2012-10-09 20:52:58 -0400] hoover_damm: monvillalon, if your not using vpc then ohai ec2 should work
[2012-10-09 20:54:16 -0400] bdha: /private-chef/ really needs a link to sales. :)
[2012-10-09 20:54:36 -0400] monvillalon: hoover_damm: I used chef bootstrap and i am now on the server running chef-client, I haven't added the hint file in the correct place apparently.  What is the root ? /etc/chef or /var/chef?
[2012-10-09 20:55:10 -0400] hoover_damm: monvillalon, I don't use the hint file
[2012-10-09 20:55:16 -0400] hoover_damm: and it appears to work just fine
[2012-10-09 20:55:47 -0400] bdha: In fact, there doesn't appear to be any sales links at all.
[2012-10-09 20:55:52 -0400] monvillalon: hoover_damm: it maybe something wrong with my recipe, let me triple check
[2012-10-09 20:56:06 -0400] hoover_damm: monvillalon, it'd start with ohai ec2
[2012-10-09 20:56:07 -0400] hoover_damm: and start down
[2012-10-09 20:56:12 -0400] bdha: oh. "Start your free trial" -> Contact slaes
[2012-10-09 20:56:13 -0400] bdha: al;dsjf
[2012-10-09 20:57:18 -0400] monvillalon: hoover_damm: i think you are assuming I know more of chef/ohai that i actually do? can I run ohai from the command line? knife search doesn't show an ec2 when using the long option
[2012-10-09 21:03:14 -0400] monvillalon: hoover_damm: it appears the key has changed form public_hostname to hostname
[2012-10-09 21:03:32 -0400] ohlol: is there a way to detect if chef is running as chef-solo?
[2012-10-09 21:03:40 -0400] ohlol: in a recipe
[2012-10-09 21:04:06 -0400] bluepojo: Chef::Config[:solo]
[2012-10-09 21:04:13 -0400] juliancdunn: if Chef::Config['solo']
[2012-10-09 21:04:16 -0400] juliancdunn: ~~
[2012-10-09 21:04:27 -0400] bluepojo: down with strings! long live symbols!
[2012-10-09 21:04:32 -0400] bluepojo: but really, it doesn't matter
[2012-10-09 21:04:33 -0400] bluepojo: ;)
[2012-10-09 21:04:43 -0400] bluepojo: ohlol:  ^^
[2012-10-09 21:04:45 -0400] ohlol: bluepojo: juliancdunn word thanks
[2012-10-09 21:05:33 -0400] juliancdunn: bluepojo: are we gonna have a FC001 fight :-)
[2012-10-09 21:06:08 -0400] reset: always prepared to fight on FC001
[2012-10-09 21:06:20 -0400] juliancdunn: I actually run with FC001 off
[2012-10-09 21:06:24 -0400] juliancdunn: I do like symbols
[2012-10-09 21:06:41 -0400] reset: well that was a quick fight
[2012-10-09 21:06:45 -0400] juliancdunn: :-)
[2012-10-09 21:11:00 -0400] mortuar: You guys know of an easy way to use knife ssh via a RS cloud server's internal IP?
[2012-10-09 21:12:01 -0400] monvillalon: hoover_damm: I think you are right about the vpn, this machine was actually given to me, I am not sure. For sure amazon doesn't give me public_hostname using "wget".  However once I added the cloud hint at least I get the right IP.
[2012-10-09 21:12:06 -0400] mortuar: I want chef to use the internal IPs
[2012-10-09 21:12:12 -0400] mortuar: but knife lists 'ipaddress' as the external
[2012-10-09 21:12:43 -0400] miketheman: mortuar: you might be able to get it from an attribute
[2012-10-09 21:12:59 -0400] miketheman: mortuar: for ec2, I use '-a ec2.public_hostname'
[2012-10-09 21:13:37 -0400] mortuar: @miketheman: that's what I'm looking into right now but having issues
[2012-10-09 21:14:01 -0400] mortuar: miketheman: I did a -l and am trying to pull the internal IP but it's looking like a pretty silly process
[2012-10-09 21:14:15 -0400] mortuar: don't understand why there isn't a 'public_ip' and 'private_ip' or something
[2012-10-09 21:14:31 -0400] miketheman: mortuar: I guess the thing to look for is what attribute ohai would return
[2012-10-09 21:15:07 -0400] miketheman: (and ohai 6.14.0 seems to include some fixes for ip address detection)
[2012-10-09 21:15:26 -0400] mortuar: I'm on 6.14.0 D:
[2012-10-09 21:15:29 -0400] miketheman: mortuar: http://tickets.opscode.com/browse/OHAI-267
[2012-10-09 21:16:49 -0400] mortuar: hmm
[2012-10-09 21:18:59 -0400] mortuar: miketheman: closest I can get is '-a network.interfaces.eth1.routes.src'
[2012-10-09 21:19:16 -0400] mortuar: and I get 'cannont convert string to integer
[2012-10-09 21:19:17 -0400] miketheman: hm. that seems a little troublesome
[2012-10-09 21:19:20 -0400] mortuar: yeah D:
[2012-10-09 21:20:25 -0400] miketheman: don't know what to tell you - we don't use rs, but thought the approach would be similar
[2012-10-09 21:20:41 -0400] mortuar: and that's the only place that it actually lists the IP as an attribute
[2012-10-09 21:20:42 -0400] mortuar: np
[2012-10-09 21:21:03 -0400] miketheman: there's no node[:rackspace]?
[2012-10-09 21:21:27 -0400] mortuar: I don't see that in a -l output
[2012-10-09 21:21:33 -0400] mortuar: is that what you mean?
[2012-10-09 21:21:41 -0400] mortuar: knife node show <node> -l ?
[2012-10-09 21:22:02 -0400] miketheman: no - on the node, "ohai"
[2012-10-09 21:22:07 -0400] miketheman: or ohai rackspace
[2012-10-09 21:22:30 -0400] miketheman: also, according to http://tickets.opscode.com/browse/OHAI-267?focusedCommentId=23476&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-23476 you may have to drop a file
[2012-10-09 21:22:42 -0400] miketheman: touch /etc/chef/ohai/hints/rackspace.json
[2012-10-09 21:22:47 -0400] miketheman: and run ohai again
[2012-10-09 21:22:57 -0400] miketheman: open ticket here: http://tickets.opscode.com/browse/KNIFE_RACKSPACE-32
[2012-10-09 21:23:11 -0400] mortuar: hmm....
[2012-10-09 21:23:26 -0400] mortuar: man I've had such a beast of a time with chef
[2012-10-09 21:23:27 -0400] miketheman: as referenced here: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/rackspace.rb#L45-52
[2012-10-09 21:23:28 -0400] mortuar: :/
[2012-10-09 21:23:33 -0400] miketheman: mortuar: sorry to hear it
[2012-10-09 21:23:49 -0400] mortuar: miketheman: no worries
[2012-10-09 21:23:53 -0400] miketheman: we're on a mix of vagrant, ec2 and hardware in multiple datacenters, love chef
[2012-10-09 21:23:53 -0400] mortuar: i appreciate it
[2012-10-09 21:24:08 -0400] mortuar: miketheman: I've just had nothing but headaches
[2012-10-09 21:24:15 -0400] mortuar: I thought puppet was bad
[2012-10-09 21:24:19 -0400] mortuar: haha ;)
[2012-10-09 21:24:27 -0400] mortuar: haha! thanks
[2012-10-09 21:26:07 -0400] karwash: anyone know how to pass chefspec multiple cookbook paths?
[2012-10-09 21:26:24 -0400] miketheman: karwash: can you elaborate?
[2012-10-09 21:28:15 -0400] mortuar: miketheman: looks like touching that file made ohai report the private_ip on the local machine
[2012-10-09 21:28:27 -0400] mortuar: but a knife node show <node> -a private_ip still doesn't work
[2012-10-09 21:28:57 -0400] miketheman: you have to have a chef-client run report it back to chef server
[2012-10-09 21:29:23 -0400] mortuar: I ran chef-client manually
[2012-10-09 21:29:38 -0400] miketheman: and it might be inside -a rackspace.private_ip
[2012-10-09 21:29:43 -0400] mortuar: ohhh
[2012-10-09 21:29:44 -0400] mortuar: let me try that
[2012-10-09 21:29:58 -0400] karwash: miketheman: Yeah, I'm trying to run chefspec against a cookbook that depends on a cookbook not in the current directory... I'm getting cookbook not found error... i'm wondering if there is a way i can tell chefspec to look in two directories for cookbooks
[2012-10-09 21:30:14 -0400] mortuar: bingo
[2012-10-09 21:30:19 -0400] mortuar: miketheman: thank you so much
[2012-10-09 21:30:34 -0400] miketheman: mortuar: no problem, glad I could help witha  cloud provider I know little about. :)
[2012-10-09 21:30:40 -0400] mortuar: :D
[2012-10-09 21:31:24 -0400] miketheman: karwash: I did a workaround.
[2012-10-09 21:31:33 -0400] karwash: oh yeah?
[2012-10-09 21:32:08 -0400] karwash: is there any way to force chefspec to just look at knife.rb for cookbook path?
[2012-10-09 21:32:09 -0400] miketheman: karwash: I use Berkshelf to shim/provide my cookbook, as well as the dependencies into <myrepo>/cookbooks/<all the cookbooks for the test including my own>
[2012-10-09 21:32:34 -0400] heathsnow: I'm a ruby newb and can't seem to get past "TypeError: can't convert nil into String"......any ideas?  http://dpaste.com/811729/
[2012-10-09 21:32:37 -0400] miketheman: karwash: https://github.com/miketheman/cook-test/blob/master/Rakefile
[2012-10-09 21:33:11 -0400] miketheman: so I do a 'rake berks && rake`
[2012-10-09 21:33:31 -0400] karwash: ah, ok... i see, cool... i'll take a look.
[2012-10-09 21:33:40 -0400] miketheman: in general, read the readme here: https://github.com/miketheman/cook-test
[2012-10-09 21:33:53 -0400] miketheman: it's kind of my "scaffolding" for new cookbooks
[2012-10-09 21:35:35 -0400] barefoot: heathsnow: how about the traceback?
[2012-10-09 21:35:51 -0400] karwash: sweet, thanks miketheman!
[2012-10-09 21:36:05 -0400] ssd7: heathsnow: +1 on trace.  if I had to guess, I'd look at: "#{id}" + "#{node_env}"
[2012-10-09 21:36:12 -0400] ssd7: heathsnow: Where is node_env defined?
[2012-10-09 21:36:37 -0400] ssd7: ahh, I see now, nvm
[2012-10-09 21:37:17 -0400] heydrick: has there been any work on a resource to manage /etc/network/interfaces on debian/ubuntu?
[2012-10-09 21:38:07 -0400] ssd7: heathsnow: Actually that is still my guess, I think you actually want @new_resource.node_env at line 20 of that paste
[2012-10-09 21:38:58 -0400] redgetan: hi, anyone know how to generate Shadow hash of a password ?
[2012-10-09 21:39:07 -0400] redgetan: using https://rubygems.org/gems/ruby-shadow
[2012-10-09 21:39:27 -0400] redgetan: and https://github.com/fnichol/chef-user
[2012-10-09 21:39:38 -0400] heathsnow: ssd7: I'll give it a shot
[2012-10-09 21:40:28 -0400] heathsnow: stack: http://dpaste.com/811732/
[2012-10-09 21:41:32 -0400] miketheman: redgetan: see the subsections here http://wiki.opscode.com/display/chef/Resources#Resources-User
[2012-10-09 21:42:59 -0400] ssd7: heathsnow: Unfortunately you hit a bug inside an error inspector, hard to say what the real error is.
[2012-10-09 21:43:33 -0400] ssd7: heathsnow: If you upgrade to 10.14.4, I think that particular bug is fixed.
[2012-10-09 21:44:15 -0400] redgetan: miketheman: thanks
[2012-10-09 21:44:43 -0400] heathsnow: ssd7: same error with the @new_resource.node_env....I'll upgrade to 10.14.4 and see if the error is any clearer.
[2012-10-09 21:45:37 -0400] barefoot: might not be a good idea to redeclare id inside the block after using it as the var also
[2012-10-09 22:02:15 -0400] Willejs_: how are values in the params hash set?
[2012-10-09 22:16:47 -0400] Willejs_: anyone active?
[2012-10-09 22:17:50 -0400] ssd7: Willejs_: A bit.  Are you refering to the params hash available inside a definition?
[2012-10-09 22:18:14 -0400] Willejs_: yes
[2012-10-09 22:18:41 -0400] Willejs_: ssd7: yeah, how do you set the values in it?
[2012-10-09 22:18:52 -0400] heathsnow: Yay!  Upgrading to 10.14.4 produced a better error.....turns out line 7 needed to be just 'action' instead of 'actions'.   http://dpaste.com/811729/
[2012-10-09 22:18:59 -0400] JasonF: when you do resource "name" do
[2012-10-09 22:19:09 -0400] JasonF: thing "lol"
[2012-10-09 22:19:22 -0400] JasonF: params[:thing] == "lol"
[2012-10-09 22:19:29 -0400] JasonF: Willejs_: ^
[2012-10-09 22:19:47 -0400] Willejs_: ahh, okay. so if I'm using the apache2 cookbook
[2012-10-09 22:19:54 -0400] Willejs_: i should set the params from another cookbook?
[2012-10-09 22:24:27 -0400] mortuar: heya
[2012-10-09 22:24:42 -0400] mortuar: does anyone know if you can edit the bootstrap that occurs during a 'knife rackspace server create' ?
[2012-10-09 22:24:56 -0400] mortuar: I basically just need to drop a single empty file on the server somewhere
[2012-10-09 22:25:02 -0400] mortuar: so it can be picked up my the first chef-client run
[2012-10-09 22:26:05 -0400] bluepojo: why can't you write that file during the chef run?
[2012-10-09 22:27:08 -0400] bluepojo: file("path/to/file.ext").run_action(:create) will ensure it runs before convergence, if that's what you need.
[2012-10-09 22:27:16 -0400] bluepojo: err
[2012-10-09 22:27:19 -0400] bluepojo: ensure it gets created
[2012-10-09 22:27:38 -0400] bluepojo: you should generally avoid doing more than you must during bootstrap
[2012-10-09 22:27:49 -0400] bluepojo: as it's not something that can be easily updated if it's not managed by the chef recipes
[2012-10-09 22:28:06 -0400] Urocyon: In a new environment I've set up a chef server, but when I register nodes with it, the node's client.rb file keeps getting a chef_server_url of localhost:4000.  If I change client.rb, it gets changed back to localhost:4000 when chef-client runs.   What did I miss in my setup?
[2012-10-09 22:28:36 -0400] bluepojo: is your knife.rb set up correctly?
[2012-10-09 22:28:41 -0400] bluepojo: cat ~/.chef/knife.rb
[2012-10-09 22:29:00 -0400] Urocyon: yeah, the knife file has the right url.
[2012-10-09 22:29:00 -0400] mortuar: bluepojo: the reason I want to run it during the bootstrap is because it's an ohai hints file I have it being created in a recipe now
[2012-10-09 22:29:09 -0400] mortuar: but after it gets created I need to run chef-client again
[2012-10-09 22:29:16 -0400] mortuar: so righ tnow
[2012-10-09 22:29:25 -0400] yfeldblum: mortuar, yes you can
[2012-10-09 22:29:27 -0400] mortuar: its kick server -> bootstrap -> run chef-client again
[2012-10-09 22:29:31 -0400] bluepojo: ah I see
[2012-10-09 22:29:36 -0400] mortuar: and I'd rather not have to do that to get knife ssh to run correctly
[2012-10-09 22:30:03 -0400] yfeldblum: mortuar, http://wiki.opscode.com/display/chef/Custom+Knife+Bootstrap+Script and https://github.com/opscode/chef/tree/master/chef/lib/chef/knife/bootstrap
[2012-10-09 22:30:24 -0400] mortuar: thanks yfeldblum.
[2012-10-09 22:30:25 -0400] bluepojo: Urocyon: do you have the chef client recipe running on that box and setting an attribute with localhost instead of the right url?
[2012-10-09 22:30:26 -0400] yfeldblum: mortuar, just pick the bootstrap script you like, copy it to your chef-repo in the correct location, and edit it away
[2012-10-09 22:30:44 -0400] mortuar: yfeldblum: any way to edit the bootstrap that happens when using knife rackspace?
[2012-10-09 22:30:50 -0400] erikh: as someone who's written a lot of bootstrap templates, if you can avoid this, do it
[2012-10-09 22:31:40 -0400] erikh: bootstrap templates tend to vary wildly between major releases and certain methods of installing chef can be very tailored to the default templates.
[2012-10-09 22:31:41 -0400] Urocyon: bluepojo: that's what I'm guessing.
[2012-10-09 22:33:03 -0400] yfeldblum: mortuar, also you have to pass a parameter to `knife rackspace server create` to choose the bootstrap template, or stick a default value for that parameter into your knife.rb
[2012-10-09 22:33:20 -0400] erikh: look for --template-file
[2012-10-09 22:33:32 -0400] erikh: (installing the knife-rackspace stuff now to check if it exists)
[2012-10-09 22:33:36 -0400] erikh: that's the option for knife bootstrap, at least.
[2012-10-09 22:33:46 -0400] erikh: again though, if you can avoid this, you should. )
[2012-10-09 22:33:48 -0400] yfeldblum: erikh, i tend to view the templates that ship with chef as suggestions that may work in the common case, but which are unlikely to work in any particular environment due to all the possible edge cases, quirks, etc
[2012-10-09 22:33:55 -0400] Urocyon: bluepojo: my attributes are showing that default server_url.   Not sure where the best place to change that is.
[2012-10-09 22:34:42 -0400] yfeldblum: erikh, e.g., there's a centos5 bootstrap template, but no centos6 bootstrap template
[2012-10-09 22:35:06 -0400] bluepojo: Urocyon: can set it in your environment or create a base cookbook that sets your organization's sane defaults
[2012-10-09 22:35:06 -0400] erikh: yep, --template-file exits,
[2012-10-09 22:35:15 -0400] bluepojo: I prefer the base cookbook path
[2012-10-09 22:35:16 -0400] erikh: exists too.
[2012-10-09 22:36:11 -0400] Urocyon: bluepojo: right now I'm running two chef servers in different data centers, but using the same source tree.
[2012-10-09 22:36:11 -0400] bluepojo: you can include_recipe "myorg_base" in your cookbooks to get all sane defaults set up automatically for things like chef server url and other things that all your boxes will need regardless of what kind of box they are
[2012-10-09 22:36:29 -0400] Urocyon: bluepojo: so maybe an environment setting would be better.
[2012-10-09 22:36:35 -0400] bluepojo: yeah, that makes sense to me
[2012-10-09 22:40:22 -0400] yfeldblum: Urocyon, why are you running two different chef-servers?
[2012-10-09 22:45:05 -0400] Urocyon: bluepojo: it was a bad setting in my server.rb file on my chef-server.  Corrected, and fixed the client.rb files accordingly.  It looks like it's working fine now.
[2012-10-09 22:46:01 -0400] Urocyon: yfeldblum: because I have my chef servers on private networks in each data center, and those private networks don't have access to each other.
[2012-10-09 22:49:18 -0400] Urocyon: I'm thinking it's a bad idea though and maybe I want to just expose one and lock it down with some good firewall rules.
[2012-10-09 22:57:09 -0400] Willejs_: I'm having an issue with attributes on a client. i can see they have set through the web console, however, when i run sudo shef -z they appear as the cookbooks defaults
[2012-10-09 22:57:22 -0400] kallen: pincus
[2012-10-09 22:57:25 -0400] kallen: gah. mischan
[2012-10-09 22:57:46 -0400] Willejs_: any ideas?
[2012-10-09 23:10:00 -0400] dodizzle1: what is the recommended way to test using search in a recipe without having to put it in the recpie
[2012-10-09 23:10:09 -0400] dodizzle1: is there an irb for chef?
[2012-10-09 23:10:44 -0400] bluepojo: shef
[2012-10-09 23:10:47 -0400] bluepojo: is like irb for chef
[2012-10-09 23:10:54 -0400] bluepojo: but you can just use knife
[2012-10-09 23:10:55 -0400] dodizzle1: sweet, thanks
[2012-10-09 23:11:00 -0400] bluepojo: knife search node ...
[2012-10-09 23:11:42 -0400] dodizzle1: yeah I'm just trying to convert my knife search to a recipe
[2012-10-09 23:11:51 -0400] bluepojo: aha
[2012-10-09 23:11:54 -0400] bluepojo: yeah, shef will work
[2012-10-09 23:12:00 -0400] dodizzle1: and wanted to tested it before I actually put it in the recipe
[2012-10-09 23:17:15 -0400] yfeldblum: dodizzle1, what about having a safe test environment where you can run recipes?
[2012-10-09 23:17:38 -0400] yfeldblum: dodizzle1, where you can fail over and over where it doesn't matter, and succeed where it does matter
[2012-10-09 23:50:13 -0400] killfill: hi
[2012-10-09 23:51:29 -0400] killfill: why does knife boostrap the nodes compiling rubygems from source, and not using a package?
[2012-10-09 23:51:46 -0400] killfill: all OS's that i know has rubygems avaible from packages..
[2012-10-09 23:55:57 -0400] bluepojo: killfill: packages are often out of date
[2012-10-09 23:56:07 -0400] bluepojo: I can't think of a distro that has a current ruby package
[2012-10-09 23:56:24 -0400] bluepojo: every ruby project I know builds it's own ruby
[2012-10-09 23:56:41 -0400] bluepojo: further, chef is installed in self contained directories
[2012-10-09 23:56:49 -0400] bluepojo: under /opt/chef
[2012-10-09 23:56:55 -0400] bluepojo: so it doesn't mess with the rest of your system
[2012-10-09 23:58:54 -0400] killfill: is it possible to run knife boostrap withouth chef-server?.. im using chef-solo on the nodes.. :)
[2012-10-09 23:59:14 -0400] killfill: bluepojo: ah ok.
[2012-10-09 23:59:23 -0400] erikh: ubuntu actually has a patched rubygems in its pakcages that won't let you upgrade it with the standard sources

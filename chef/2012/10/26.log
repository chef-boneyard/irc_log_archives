[2012-10-26 00:44:29 -0400] coderanger: There it is
[2012-10-26 00:45:13 -0400] hoover_damm: hrm
[2012-10-26 00:45:15 -0400] hoover_damm: is it me?
[2012-10-26 00:45:26 -0400] hoover_damm: josephholsten, well you can always abuse me ;)
[2012-10-26 00:45:34 -0400] coderanger: No, just been having connection stability issues
[2012-10-26 00:45:45 -0400] coderanger: I'll refresh the missing logs from backups in a bit
[2012-10-26 00:45:49 -0400] josephholsten: sry, just looking for that patch
[2012-10-26 00:45:51 -0400] hoover_damm: josephholsten, http://logs.likens.us/2012/%23chef.10-25.12.log
[2012-10-26 00:46:16 -0400] hoover_damm: as always :) I log
[2012-10-26 00:46:52 -0400] josephholsten: thanks!
[2012-10-26 00:48:03 -0400] hoover_damm: I actually log a few channels like but I really need to clean up my irclogs
[2012-10-26 00:48:11 -0400] hoover_damm: i have a lot of old cruft i should encrypt and delete
[2012-10-26 00:48:16 -0400] hoover_damm: (encrypt,backup,delete)
[2012-10-26 00:52:34 -0400] josephholsten: coderanger: https://github.com/josephholsten/chef/tree/subclass-lwrp
[2012-10-26 01:01:57 -0400] bngreer: any ideas why I wouldn't have a private key?
[2012-10-26 01:15:03 -0400] wcmaier: webframp: ohai!
[2012-10-26 01:15:32 -0400] wcmaier: we're all sorted at Simple to host in early december
[2012-10-26 01:15:39 -0400] webframp: wcmaier: ohai!
[2012-10-26 01:15:45 -0400] webframp: most excellent
[2012-10-26 01:16:20 -0400] webframp: wcmaier: so space is set. topic ideas?
[2012-10-26 01:16:28 -0400] wcmaier: james offered to run through erchef
[2012-10-26 01:16:41 -0400] wcmaier: which should be released by or around that time
[2012-10-26 01:17:13 -0400] webframp: ok, sounds great
[2012-10-26 01:17:33 -0400] wcmaier: nathan/opscode also seemed to be down with sponsoring pizza
[2012-10-26 01:17:43 -0400] wcmaier: and if we're at simple, we'll hook up beer
[2012-10-26 01:17:53 -0400] webframp: we may have some interesting orchestration stuff to discuss as well, have to talk with chris roberts first
[2012-10-26 01:18:00 -0400] wcmaier: ooooh
[2012-10-26 01:18:05 -0400] wcmaier: that'd be super
[2012-10-26 01:18:26 -0400] webframp: I'm sure heavywater can contribute towards pizza too if needed
[2012-10-26 01:18:58 -0400] wcmaier: yay
[2012-10-26 01:19:08 -0400] hoover_damm: pizza costs that much? (joking)
[2012-10-26 01:20:09 -0400] wcmaier: webframp: have a preferred mail address for further/async coordination?
[2012-10-26 01:20:37 -0400] webframp: wcmaier: sean@hw-ops.com will work
[2012-10-26 01:20:49 -0400] wcmaier: cool
[2012-10-26 01:20:54 -0400] wcmaier: i shall roll the ball
[2012-10-26 01:21:34 -0400] erikh: ah is this the PDX meetup?
[2012-10-26 01:21:41 -0400] webframp: erikh: yea
[2012-10-26 01:22:14 -0400] erikh: speaking of which, there's one in Palo Alto that I signed up for, but haven't actually attended yet. anyone in here go to it? what's it like?
[2012-10-26 09:22:11 -0400] sameersegal: Whats the "best practice" for hosting a MySQL server using Chef? EBS backed, master-slave, cron for db backups?
[2012-10-26 09:31:37 -0400] mattp: sameersegal: if you're going the AWS route then use the RDS product; it will handle a lot of the chores for you (like replication, snapshots, backups etc). Depends on how much you want to do by hand, of course.
[2012-10-26 09:33:07 -0400] sameersegal: mattp: I also have a CouchDB server that I need to replicate. I was thinking of sharing the Master and Slave nodes to save money. If I use RDS, I need to pay 4x costs
[2012-10-26 09:33:26 -0400] sameersegal: instead of 2x at the moment
[2012-10-26 09:36:15 -0400] Nopik: i have some problem starting services from chef.. actions [ :enable, :start ] do enable service, but do not start them
[2012-10-26 09:36:37 -0400] Nopik: while manual sudo /etc/init.d/myservice start do correctly starts everything
[2012-10-26 09:38:06 -0400] Nopik: moreover, if i have action :nothing, and notifies :start, "service[myservice]" it dont even try to start it (no message in chef log that it is trying to start(
[2012-10-26 11:36:49 -0400] Unicron_: how do i prevent a template from being created at compile time?
[2012-10-26 11:37:13 -0400] Unicron_: or a template resource being run at compile time rather
[2012-10-26 11:38:25 -0400] Unicron_: i need the template to run only after an execute resource has been run, but no matter what order I structure my recipe, the template always attempts to be created first.
[2012-10-26 11:52:50 -0400] maddoc: How do you completely replace an array that is defined in a default attribute, with an array that you define in a role?
[2012-10-26 11:52:56 -0400] maddoc: I.e. not merging them.
[2012-10-26 12:31:37 -0400] kryptek: maddoc,  You need to use an override attribute
[2012-10-26 12:32:48 -0400] kryptek: override_attribute('my_array' => [])
[2012-10-26 12:40:22 -0400] maddoc: kryptek: Yeah, I do, but still get the entries. Read from the deep merge article "When an attribute is of the same type of data, such as a hash or an array, the contents are merged. This is true even at different levels of precedence such as default and override attributes."
[2012-10-26 12:46:06 -0400] a_a_g1: anyone experiencing problems with the opscode chef server?
[2012-10-26 12:50:40 -0400] maddoc: kryptek: Weird thing is that I only see the override attributes when printing the array using `shef -z' or looping + logging the contents of the array in the recipe. But when the configuration file is generated it includes the defaults too.
[2012-10-26 12:50:54 -0400] maddoc: s/only see/see only/
[2012-10-26 12:51:08 -0400] kryptek: hmm..
[2012-10-26 12:51:30 -0400] maddoc: For some context I'm fighting with the riak cookbook and changing the error_log and info_log for lager.
[2012-10-26 12:51:39 -0400] maddoc: and try to change*
[2012-10-26 12:51:56 -0400] maddoc: Too tired today, probably the reason why I missed something obvious.
[2012-10-26 12:53:37 -0400] a_a_g1: 'knife data bag show' is timing out consistently
[2012-10-26 12:54:59 -0400] kryptek: a_a_g1, Looks like I'm having some issues here as well.
[2012-10-26 12:55:29 -0400] kryptek: maddoc,  I dunno man, you think the same would happen if you put the array in the environment file?
[2012-10-26 12:55:52 -0400] kryptek: I guess so, right?  It's all deep merge.. ugh
[2012-10-26 12:56:16 -0400] maddoc: kryptek: Err, as a matter of fact it's actually the environment I'm setting it in, not the role. My bad.
[2012-10-26 12:56:31 -0400] kryptek: ahhh ok
[2012-10-26 12:56:41 -0400] kryptek: that makes more sense now
[2012-10-26 12:57:10 -0400] kryptek: I thought when you overrode the attributes in a role file it completely overwrote the node if it existed
[2012-10-26 12:58:16 -0400] maddoc: But it just merges if it's an array, right?
[2012-10-26 12:58:34 -0400] nacer: oi
[2012-10-26 12:58:37 -0400] maddoc: I'm using override_attributes in the environment definition, btw. So at least that was true. :-)
[2012-10-26 12:58:40 -0400] nacer: opscode down ?
[2012-10-26 12:58:46 -0400] nacer: or aws down :) ?
[2012-10-26 12:58:47 -0400] kryptek: nacer, looks like it
[2012-10-26 12:59:10 -0400] nacer: kryptek: it's night a seatle no ?
[2012-10-26 12:59:36 -0400] kryptek: nacer, Hehe, it's something.  Doesn't look to be completely down, but there is certainly an increase in api errors
[2012-10-26 12:59:42 -0400] kryptek: $ knife data bag show users
[2012-10-26 12:59:43 -0400] kryptek: ERROR: Server returned error for https://api.opscode.com/organizations/zumba/data/users, retrying 1/5 in 4s
[2012-10-26 13:00:01 -0400] maddoc: kryptek: But I think it's really weird that I can see the array entries from default when running shef or trying to loop over the array in the recipe. Otherwise I could just have worked around it and deleted the entries from the attribute in the recipe.
[2012-10-26 13:00:06 -0400] nacer: 6 AM at seatle hum
[2012-10-26 13:00:11 -0400] maddoc: can't*
[2012-10-26 13:00:20 -0400] maddoc: Bah, should stop writing. Or at least read before hitting enter.
[2012-10-26 13:00:41 -0400] kryptek: maddoc,  Don't sweat it.. nobody here is grading your grammar man :P
[2012-10-26 13:01:41 -0400] maddoc: Yeah, just trying to not add more confusion to this by writing the wrong things all the time. ;-)
[2012-10-26 13:03:13 -0400] kryptek: It's one of those problems that doesn't _sound_ difficult, but damn, it's a pain in the butt lol
[2012-10-26 13:04:37 -0400] kryptek: It's 9am, so I'm officially working.. attention span is a little shorter, but I'm still here to help!
[2012-10-26 13:13:15 -0400] alexbst: erm, got problems :/
[2012-10-26 13:13:19 -0400] alexbst: opscode status page is down too
[2012-10-26 13:13:22 -0400] alexbst: http://status.opscode.com :(
[2012-10-26 13:15:30 -0400] hcastro: same
[2012-10-26 13:16:27 -0400] alexbst: the bst stands for bastard btw.
[2012-10-26 13:18:29 -0400] hcastro: unfortunately, looks like status page on tumblr isn't loading either
[2012-10-26 13:19:12 -0400] jonlives: hcastro: looks like tumblr are having an outage
[2012-10-26 13:20:48 -0400] UukGoblin: what's down apart from the status page?
[2012-10-26 13:20:57 -0400] UukGoblin: tumblr? :-O
[2012-10-26 13:21:01 -0400] UukGoblin: is it AWS again?
[2012-10-26 13:21:26 -0400] UukGoblin: knife works here, which is surprising
[2012-10-26 13:21:38 -0400] UukGoblin: (using hosted chef)
[2012-10-26 13:23:40 -0400] Mez: Anyone else using hosted chef having problems with api.opscode.com (nginx timed out)
[2012-10-26 13:23:47 -0400] Mez: ah...
[2012-10-26 13:24:36 -0400] UukGoblin: Mez, yes
[2012-10-26 13:24:49 -0400] UukGoblin: ERROR: Server returned error for https://api.opscode.com/organizations/digitalscience/environments/production, retrying 5/5 in 47s
[2012-10-26 13:25:01 -0400] Mez: yeah :)
[2012-10-26 13:25:07 -0400] Mez: I shoulda read backlog...
[2012-10-26 13:25:11 -0400] UukGoblin: this should be output from chef-solo though... we're using both chef-solo and hosted chef here
[2012-10-26 13:25:30 -0400] Mez: ooh, I think it just came back
[2012-10-26 13:25:32 -0400] UukGoblin: I'm confused, we're trying to figure out why other stuff is broken here
[2012-10-26 13:27:16 -0400] kryptek: lol.  funny to see people trickling in for the same issue :)
[2012-10-26 13:28:01 -0400] geekbri: is hosted chef hurtin at the moment?
[2012-10-26 13:28:52 -0400] geekbri: Yeahhhhh looks like it is :)
[2012-10-26 13:30:10 -0400] geekbri: Any opscode employees want to comment on an official status :
[2012-10-26 13:30:11 -0400] geekbri: :)
[2012-10-26 13:32:27 -0400] alexbst: on a page that works
[2012-10-26 13:32:34 -0400] alexbst: geekbri ;)
[2012-10-26 13:33:52 -0400] maruq: hey guys.
[2012-10-26 13:34:12 -0400] maruq: I've been considering playing with Berkshelf & using it as a way to train the devs to do some ops
[2012-10-26 13:34:29 -0400] maruq: I'm just wondering, how do people manage various environments with it
[2012-10-26 13:34:53 -0400] maruq: eg. do you use chef envs, or sep git branches?
[2012-10-26 13:36:27 -0400] alexbst: maruq - combination of chef orgs (prod vs non-prod) and envs (further subdivision) as well as a master git branch and tags to keep a history of the envs/cookbook vers.
[2012-10-26 13:37:24 -0400] maruq: alexbst: okay cool. so berkshelf & envs will play nice together? (I haven't tried yet, I'm running librarian)
[2012-10-26 13:37:51 -0400] maruq: alexbst: do you know if there's any articles of people playing with things?
[2012-10-26 13:37:56 -0400] masterkorp: GUYS I DRUNK TOO MUCH COFFEEE
[2012-10-26 13:39:12 -0400] maruq: @masterkorp: code all the things!
[2012-10-26 13:39:54 -0400] UukGoblin: ok my (hosted) chef run succeeded taking 10x longer than usual, and having several API hiccups on the way
[2012-10-26 13:39:57 -0400] masterkorp: just submitting a small kitchen problem
[2012-10-26 13:40:01 -0400] UukGoblin: but it finished sucessfully in the end
[2012-10-26 13:41:06 -0400] geekbri: UukGoblin: I
[2012-10-26 13:41:11 -0400] geekbri: I'm having hosted chef issues as well
[2012-10-26 13:42:29 -0400] masterkorp: i would never trust another entity something so sensitive such as chef server
[2012-10-26 13:42:54 -0400] yfeldblum: don't most people in here run one or more applications that handily solve the problem of one codebase but two instances?
[2012-10-26 13:43:30 -0400] geekbri: I find most people who say things like that have some other sensitive piece of information outsourced.
[2012-10-26 13:43:35 -0400] Virunga: Hi, i have to append some lines to a file, do you have any advice to makes this thing idempotent, please?
[2012-10-26 13:44:41 -0400] maruq: yfeldblum geekbri masterkorp: actually, that's something I was thinking about the other day - is there a recommended way to setup chef failover?
[2012-10-26 13:45:25 -0400] masterkorp: maruq: i've been think about that too
[2012-10-26 13:45:34 -0400] maruq: yfeldblum geekbri masterkorp: as in 2 servers, the couchdb replicates over (ideally 2 way), then you could stick them behind a load balancer & call
[2012-10-26 13:45:44 -0400] yfeldblum: maruq, why do you need failover?
[2012-10-26 13:46:01 -0400] masterkorp: yes but there would only be a chef server at the time
[2012-10-26 13:46:03 -0400] maruq: yfeldblum geekbri masterkorp: ssl might be a problem though
[2012-10-26 13:46:25 -0400] yfeldblum: maruq, there's a couchdb, a rabbitmq, a solr, and a filesystem directory
[2012-10-26 13:46:35 -0400] yfeldblum: maruq, but again, why do you need failover?
[2012-10-26 13:46:35 -0400] maruq: yfeldblum: In case an EC2 region goes south at 3am again
[2012-10-26 13:47:05 -0400] masterkorp: maruq: i do not use ssl, since its all inside a vpn
[2012-10-26 13:47:21 -0400] maruq: yfeldblum: failover to another server in another availability region or similar
[2012-10-26 13:48:04 -0400] maruq: in theory, it wouldn't break the nodes, but if you're running client demonised, your logs would go crazy
[2012-10-26 13:48:20 -0400] geekbri: thats what log rotation is for
[2012-10-26 13:49:16 -0400] maruq: geekbri: true. but there's other cases. eg. server crashes, it takes 10-15 to rebuild & restage the data in.
[2012-10-26 13:49:30 -0400] maruq: during that time, there's no automated config settings, etc.
[2012-10-26 13:50:01 -0400] maruq: hopefully, things can reach eventual consistency, but not always the case.
[2012-10-26 13:52:50 -0400] mcortesi5: hi guys, what happens if you define the same resource (that is same name and type)  twice but with different parameters?
[2012-10-26 13:54:22 -0400] yfeldblum: mcortesi5, the second resource declaration reopens the first and changes the attributes of the first, but does not declare a second resource of the same type and name
[2012-10-26 13:55:19 -0400] mcortesi5: thanks yfeldblum !
[2012-10-26 13:56:17 -0400] mcortesi5: And I'm assuming that if i don't change all the attributes, I mean, I'm just overriding some and left undefined others, then the undefined ones, will get the first definition value
[2012-10-26 13:58:23 -0400] Virunga: The documentation says that the file specified with package's option responce_file is fetched by Cookbook File, does it implies that the file must be in the <cookbook>/files directory?
[2012-10-26 13:59:27 -0400] yfeldblum: mcortesi5, yes
[2012-10-26 14:00:36 -0400] spox: yikes. 502 errors abound
[2012-10-26 14:02:17 -0400] spox: meh, even the status page is dead
[2012-10-26 14:06:48 -0400] ShawnMcCool_: Hi all, i started playing with vagrant and chef for the first time today. I have my LAMP stack set up and everything is solid. Now, I just want to add a custom apache config. What is the correct way to do that? Should I make a cookbook for this purpose?
[2012-10-26 14:07:35 -0400] spox: ShawnMcCool_: http://community.opscode.com/cookbooks/apache2
[2012-10-26 14:07:50 -0400] spox: knife site cookbook download apache2
[2012-10-26 14:08:48 -0400] spox: if you have all that stuff setup, then yeah, you'll probably want to start a cookbook to define all the bits of your "app" or what ever it is
[2012-10-26 14:09:05 -0400] spox: including the apache config part using the helpers from the apache cookbook
[2012-10-26 14:09:24 -0400] dhanasekaran: HI, Guys I am new to chef, It possible already installed package if any update means it's alert please guide me.
[2012-10-26 14:09:41 -0400] dhanasekaran: my client machine
[2012-10-26 14:11:28 -0400] hcastro: ShawnMcCool_: use definitions provided in the apache2 cookbook in an app specific cookbook: https://github.com/hectcastro/chef-uptime/blob/master/recipes/default.rb#L63-67
[2012-10-26 14:13:32 -0400] UukGoblin: so what's exactly broken? Why is tumblr down?
[2012-10-26 14:13:38 -0400] dhanasekaran: any update guys, client package update notification to see form server end..
[2012-10-26 14:16:06 -0400] alexbst: https://twitter.com/opscode_status
[2012-10-26 14:16:30 -0400] alexbst: sadly opscode think irc people are second class ;)
[2012-10-26 14:16:42 -0400] alexbst: 20 minutes ago :
[2012-10-26 14:16:48 -0400] alexbst: Hosted Chef Connectivity issue - 25 Oct 2012 5:30 AM PST We are investigating an issue with increased error rates to the OHC API servers
[2012-10-26 14:25:05 -0400] alexbst: amused they got the date wrong, too ;) 25th ;)
[2012-10-26 14:25:57 -0400] spox: well, the api is responding again at least
[2012-10-26 14:26:46 -0400] behemphi: @spox
[2012-10-26 14:26:52 -0400] behemphi: I cannot edit an environment
[2012-10-26 14:27:09 -0400] behemphi: I can edit a node, so I  am pretty sure it is not back completely
[2012-10-26 14:27:26 -0400] geekbri: its not back, it seems spotty at best.
[2012-10-26 14:27:34 -0400] geekbri: sometimes the API works, other times I get 504
[2012-10-26 14:28:38 -0400] spox: ha, yeah. i had a couple nodes converge, and then start failing again
[2012-10-26 14:28:40 -0400] spox: alas
[2012-10-26 14:29:07 -0400] behemphi: premataure optimism is the root of all evil :-)
[2012-10-26 14:29:35 -0400] alexbst: api is still mostly pooched
[2012-10-26 14:30:17 -0400] lvnilesh: Greetings
[2012-10-26 14:31:22 -0400] erthad: hi, all
[2012-10-26 14:31:50 -0400] erthad: is there a way to load the resource into variable by name?
[2012-10-26 14:32:15 -0400] geekbri: On the bright side at least I have an excuse for my lack of productivity today
[2012-10-26 14:32:18 -0400] threescoops: Bad things appear to be happening with hosted chef and status.opscode.com doesn't seem to be much happier either
[2012-10-26 14:32:39 -0400] kryptek: yep
[2012-10-26 14:32:43 -0400] kryptek: We're all hurting here.
[2012-10-26 14:32:47 -0400] geekbri: status.opscode.com is hosted on tumblr, and tumbler is down I think
[2012-10-26 14:32:56 -0400] threescoops: geekbri: I guessed as much
[2012-10-26 14:38:05 -0400] Virunga: Is the package resource already idempotent or do i need to add not_if.. ?
[2012-10-26 14:38:42 -0400] yfeldblum: Virunga, all resources shipped with chef are designed to be idempotent
[2012-10-26 14:41:02 -0400] geekbri: excluding really the script based resources
[2012-10-26 14:43:15 -0400] xdissent: Yay, thanks for the quick 10.16.2 release, dudes! Btm, you're a machine!
[2012-10-26 14:43:28 -0400] xdissent: that cookbook_file bug was killing me
[2012-10-26 14:48:42 -0400] geekbri: chef api down is killin me!
[2012-10-26 14:49:25 -0400] UukGoblin: I should find another hosted chef provider and load balance between the two
[2012-10-26 14:51:14 -0400] yfeldblum: geekbri, right
[2012-10-26 15:10:02 -0400] geekbri: heyyy are we looking at an API recovery?!
[2012-10-26 15:10:38 -0400] geekbri: awww spoke to soon
[2012-10-26 15:11:06 -0400] paulmooring: geekbri: most Opscode folks are not really watching irc at the moment
[2012-10-26 15:11:16 -0400] geekbri: Oh I'm sure they are busy trying to fix things.  I prefer it that way.
[2012-10-26 15:12:12 -0400] paulmooring: tumblr is having issues at the moment as well so https://twitter.com/opscode_status is the place to watch for updatexz
[2012-10-26 15:13:42 -0400] mvisich: hello. I was wondering if there was a way to boot strap a node with a specific enviroment ? Thanks!
[2012-10-26 15:14:39 -0400] paulmooring: mvisich: use the '-E' flag
[2012-10-26 15:14:53 -0400] mvisich: awesome thanks
[2012-10-26 15:25:21 -0400] jbz: Sorry for the poke-nose-in thing, but is the hosted platform officially having issues, and can anyone point me to an official status update if so? (thanks in advance)
[2012-10-26 15:25:41 -0400] behemphi: https://twitter.com/opscode_status
[2012-10-26 15:25:44 -0400] behemphi: and yes
[2012-10-26 15:25:54 -0400] jbz: oh hehe I was looking on the webpage.  My bad.  Thanks much.
[2012-10-26 15:26:05 -0400] behemphi: np
[2012-10-26 15:29:19 -0400] xdissent: wonder if hosted chef has anything to do with global google app engine outage?
[2012-10-26 15:33:28 -0400] knuckolls: hosted chef is having troubles this morning it seems
[2012-10-26 15:33:49 -0400] UukGoblin: https://twitter.com/opscode_status
[2012-10-26 15:34:16 -0400] knuckolls: perfect, that's basically what i was looking for
[2012-10-26 15:34:17 -0400] knuckolls: thx
[2012-10-26 15:36:11 -0400] UukGoblin: knuckolls, tumblr is also down, and that's apparently where status.opscode.com is hosted: http://bostinno.com/2012/10/26/tumbler-outage-tumblr-is-down-for-users-right-now-report/#ss__249929_245543_0__ss
[2012-10-26 15:36:23 -0400] knuckolls: ah
[2012-10-26 15:36:25 -0400] knuckolls: cool
[2012-10-26 15:36:35 -0400] knuckolls: a perfect storm
[2012-10-26 15:41:27 -0400] qhartman: How hipster is Opscode? So hipster their infrastructure status page is hosted on Tumblr.
[2012-10-26 15:41:40 -0400] qhartman: The next version is just going to be an Instagram stream.
[2012-10-26 15:47:34 -0400] maxmanders: Not sure if I'm missing a piece of the pizzle re encrypted data bags... Surely there's a flaw in that I have to distribute the encruption key file to the nodes in an unescure fashion via Chef, mitigating the security of the encrypted data bag?
[2012-10-26 15:48:01 -0400] maxmanders: Further more, if many engineers are working with chef, then for them to be able to maintain that data bag, they'd also need the key I created...?
[2012-10-26 15:48:18 -0400] freerobby: Is anybody else completely unable to deploy with hosted chef right now?
[2012-10-26 15:48:33 -0400] freerobby: i can't get to their status blgo
[2012-10-26 15:48:35 -0400] qhartman: freerobby, Is broken
[2012-10-26 15:48:41 -0400] freerobby: thx
[2012-10-26 15:48:42 -0400] qhartman: https://twitter.com/opscode_status
[2012-10-26 15:58:02 -0400] jbz: maxmanders: We deploy the encryption key outside the chef channel.  We're using AWS, and we deploy that as part of the node build before chef is installed.
[2012-10-26 15:58:15 -0400] heathsnow: I can't deploy w/hosted chef atm
[2012-10-26 15:58:28 -0400] jbz: Opscode is reporting problems, and there's this:  http://internettrafficreport.com/namerica.htm
[2012-10-26 15:58:47 -0400] jbz: So Opscode's problems may not be Opscode (directly)
[2012-10-26 16:00:34 -0400] paulmooring: freerobby: tumblr is down right now as well, our status account on twitter is the place to watch for updates https://twitter.com/opscode_status
[2012-10-26 16:00:36 -0400] freerobby: heathsnow: it's down
[2012-10-26 16:00:45 -0400] freerobby: paulmooring: Yeah just saw that, didn't realize it. Thank you.
[2012-10-26 16:06:34 -0400] yfeldblum: maxmanders, or maybe you might ask what its purpose is, i.e., exactly what types of attacks is it designed to thwart?
[2012-10-26 16:08:02 -0400] alexbst: waah, jbz quitted.
[2012-10-26 16:11:18 -0400] miketheman: hm.
[2012-10-26 16:11:32 -0400] miketheman: http://status.opscode.com/ -> "We're sorry
[2012-10-26 16:11:33 -0400] miketheman: Our servers are over capacity and certain pages may be temporarily unavailable. We're working quickly to resolve the issue."
[2012-10-26 16:11:52 -0400] miketheman: as well as http://www.downforeveryoneorjustme.com/api.opscode.com
[2012-10-26 16:14:45 -0400] JasonBox: hrm, did ruby-shadow ever get integrated into the full-stack for EL?
[2012-10-26 16:15:23 -0400] miketheman: JasonBox: full-stack aka omnibus?
[2012-10-26 16:15:23 -0400] flashingpumpkin: guys - quick question. say, I'm using the AWS cookbook to create EBS volumes. Do lightweight providers have return values? Ideally I'd like to tag the EBS volume after it was created, but obvs I don't know its id yet
[2012-10-26 16:15:27 -0400] miketheman: and EL being the rpm deploy?
[2012-10-26 16:15:30 -0400] flashingpumpkin: how would I go about that?
[2012-10-26 16:16:13 -0400] JasonBox: miketheman: Yeah
[2012-10-26 16:16:14 -0400] hcastro: flashingpumpkin: volume references get store in node attributes
[2012-10-26 16:16:25 -0400] flashingpumpkin: hcastro, ah, sweet. thanks
[2012-10-26 16:16:48 -0400] miketheman: JasonBox: from this post it seems so. http://www.opscode.com/blog/2012/09/07/chef-10-14-0-released/
[2012-10-26 16:17:12 -0400] miketheman: once installed, you might be abnle to invoke `gem list` from the omnibus ruby to verify that
[2012-10-26 16:19:21 -0400] adamsb6: i dont see anything in the motd, any details on hosted chef problems?
[2012-10-26 16:22:04 -0400] alexbst: adamsb6 - check the twitter status page
[2012-10-26 16:22:08 -0400] alexbst: (for opscode)
[2012-10-26 16:22:11 -0400] alexbst: it's still down
[2012-10-26 16:22:32 -0400] threescoops: ...along with quite a few other bits of the internets, it seems
[2012-10-26 16:22:55 -0400] alexbst: I'm not seeing packet loss from N Virginia to the opscode api
[2012-10-26 16:23:40 -0400] threescoops: "Hosted Chef Connectivity issue - 25 Oct 2012 8:47 AM PST Increased error rates for OHC API servers continue. Short complete outage upcoming" -- @opscode_status
[2012-10-26 16:24:01 -0400] alexbst: what is a short complete outage upcoming ?
[2012-10-26 16:24:07 -0400] alexbst: 'reboot everything!'
[2012-10-26 16:24:08 -0400] alexbst: ?
[2012-10-26 16:24:16 -0400] threescoops: They mean 26th, not 25th. That's from ~20min ago
[2012-10-26 16:24:32 -0400] adamsb6: thanks, just saw the chat log in the motd
[2012-10-26 16:24:42 -0400] adamsb6: i was thinking maybe it was a rackspace outage since tumblr was also having problems
[2012-10-26 16:25:18 -0400] addisonj: :(
[2012-10-26 16:27:31 -0400] alexbst: Have to be blunt but the communication has been very poor so far.
[2012-10-26 16:27:45 -0400] alexbst: I may need to sign up to twitter just to make a critical tweet
[2012-10-26 16:27:50 -0400] alexbst: since obviously irc is 2nd class ;)
[2012-10-26 16:28:01 -0400] miketheman: alexbst: seems like tumblr (who opscode typically uses for status) is also down
[2012-10-26 16:28:14 -0400] maxmanders: jbz: in hindsight that makes sense, that'll be done in future... but for now - just feels a bit hokey
[2012-10-26 16:28:22 -0400] miketheman: I _do_ think that there sohuld hjave been something put into IRC, for sure
[2012-10-26 16:28:51 -0400] adamsb6: fwiw, i monitor hosted chef status, and there have been brief periods of stability
[2012-10-26 16:29:04 -0400] adamsb6: im thinking their team must be completely focused on getting things back up right now
[2012-10-26 16:29:55 -0400] adamsb6: my monitor says they're back up as of 1 min ago
[2012-10-26 16:30:14 -0400] miketheman: adamsb6: you're checks might be causing the overload. :)
[2012-10-26 16:30:45 -0400] adamsb6: just like monday when we started using dynamodb and brought down aws
[2012-10-26 16:46:11 -0400] addisonj: downtime is good for one thing, to teach me how my reliant I am on something
[2012-10-26 16:50:31 -0400] alexbst: agreed, my group has started asking how we roll our own chef server if this lasts for more than a few hours ;)
[2012-10-26 16:50:40 -0400] addisonj: i am back
[2012-10-26 16:50:40 -0400] alexbst: and in particular one which contains all the data we need.
[2012-10-26 16:50:55 -0400] alexbst: addisonj - back as in opscode hosted chef looks good ?
[2012-10-26 16:51:05 -0400] addisonj: yeah
[2012-10-26 16:51:12 -0400] addisonj: at list knife node list worked for me
[2012-10-26 16:54:02 -0400] alexbst: and now it is down again ;)
[2012-10-26 16:54:08 -0400] alexbst: stability seems to be an issue.
[2012-10-26 16:54:14 -0400] alexbst: had a few good runs..
[2012-10-26 17:06:31 -0400] uncommitted: What does this error mean?
[2012-10-26 17:06:32 -0400] uncommitted: INFO: HTTP Request Returned 404 Not Found: No routes match the request:
[2012-10-26 17:06:59 -0400] uncommitted: chef-client seems to run fine, and the error is INFO
[2012-10-26 17:12:02 -0400] adamsb6: looks like we might be back up
[2012-10-26 17:12:27 -0400] adamsb6: uncommitted: hosted chef has been down for most of this morning
[2012-10-26 17:12:44 -0400] uncommitted: oh, I'm hosting myself
[2012-10-26 17:13:59 -0400] adamsb6: oh, nm.  what was the request for?  likely you're trying to access a resource that doesn't exist in your server.
[2012-10-26 17:14:10 -0400] adamsb6: e.g. a node has been deleted
[2012-10-26 17:14:16 -0400] mhalligan: adabmsb6: still down over here
[2012-10-26 17:19:14 -0400] sunil__: Anyone know if opscode rate limits api calls?  trying to run chef-client on 30 nodes via knife ssh throws lots of api errors..
[2012-10-26 17:20:13 -0400] spox: sunil__: https://twitter.com/opscode_status
[2012-10-26 17:20:13 -0400] paulmooring: sunil__: There's ongoing issues with Hosted Chef at the moment
[2012-10-26 17:20:59 -0400] sunil__: got it..I figured as much..Thanks paul.
[2012-10-26 17:21:13 -0400] sunil__: thanks @spox
[2012-10-26 17:21:22 -0400] spox: sunil__: sure
[2012-10-26 17:23:04 -0400] sunil__: in this kind of situation, how do you guys generally handle making changes to your infra etc?
[2012-10-26 17:25:09 -0400] sunil__: I am thinking edit files directly on servers and make sure changes are also in git and stop chef-client from running automatically..enable chef-client once api is back and all changes are updated..
[2012-10-26 17:25:31 -0400] uncommitted: adamsb6: I've just rebuilt this host, ran knife (client|node) delete new node is now on chef 10.16.2 and Centos, before it was debian and 10.14
[2012-10-26 17:43:10 -0400] ssd7: Hi all, just thought I would post in here as well.  The team is working on the Hosted Chef issues.  Apologies for the lack of updates on status.opscode.com.  Tumblr and Twitter have also been trolling us.
[2012-10-26 17:44:29 -0400] mhalligan: even status.opscode.com is down
[2012-10-26 17:44:37 -0400] mhalligan: oh heh you said that.
[2012-10-26 17:48:16 -0400] Pushnell__: is manage.opscode.com down?
[2012-10-26 17:48:24 -0400] Pushnell__: oh, hey scrollback
[2012-10-26 17:48:27 -0400] Pushnell__: thanks!
[2012-10-26 17:53:57 -0400] adamsb6: sunil__: i abandon the idea of infrastructure changes when hosted chef is down.  im currently working on a method to start services on newly provisioned nodes when the initial chef run fails.  basically i store the versions that i should be running in s3, then pull those versions and verify that they're in place before starting services.
[2012-10-26 17:54:44 -0400] adamsb6: uncommitted: what are the lines above the error?  that should tell you what resource is 404ing
[2012-10-26 17:55:20 -0400] jroberts: I have an open-source server built using the latest full-stack installation running on ubuntu 12.04.1 and everything I can't upload a cookbook for some reason.  I must be doing something wrong as I built a new server and have the same problem, but I can't figure out what it is.  Here is the error: https://gist.github.com/3960249
[2012-10-26 17:59:01 -0400] jroberts: I should also say that I can upload a cookbook while on the chef server, just not from my desktop
[2012-10-26 18:01:26 -0400] qhartman: jroberts, I'm about to step out, but it looks like your knife config is wrong
[2012-10-26 18:01:44 -0400] qhartman: probably your cookbook direcotry path setting
[2012-10-26 18:04:03 -0400] jroberts: Ok, is that supposed to be the path on the server or my local cookbook?
[2012-10-26 18:05:07 -0400] Virunga: Where can i find the api reference of chef?
[2012-10-26 18:05:26 -0400] Virunga: For example of Chef::Resource::Package
[2012-10-26 18:07:13 -0400] Virunga: jroberts: you should look the logs of chef server and knife
[2012-10-26 18:08:02 -0400] Virunga: jroberts: check that there's a rabbitmq user named chef
[2012-10-26 18:08:43 -0400] Virunga: On the documentation it's wrote that chef should create it but isn't true. I had to create it myself.
[2012-10-26 18:08:46 -0400] jroberts: I can upload a role using 'from file'.  Just not cookbooks.
[2012-10-26 18:08:52 -0400] Virunga: oh
[2012-10-26 18:08:59 -0400] jroberts: right.
[2012-10-26 18:09:41 -0400] jroberts: the error I get refers to /home/ubuntu and I can't find that it ANY configs for chef.
[2012-10-26 18:10:14 -0400] Virunga: try to use the -VV option to get a better explanation of the error.
[2012-10-26 18:10:15 -0400] jroberts: when I ran knife configure -i I set the path to the chef-repo and I have a cookbooks dir there
[2012-10-26 18:10:23 -0400] jroberts: k, will try
[2012-10-26 18:12:39 -0400] Virunga: How can i know the api of the Chef::Resource::Package class ? Please?
[2012-10-26 18:12:45 -0400] jroberts: got some good info.
[2012-10-26 18:13:05 -0400] Virunga: See :)
[2012-10-26 18:16:07 -0400] jroberts: it's failing to create a dir in /home/ubuntu, which is where I ran knife configuration from but other than that shouldn't be used for anything.  The cookbook path is the default location "/var/lib/chef/cookbooks".  I assume this is because the chef server, running as user chef can't write to /home/ubuntu, but why is it trying to???
[2012-10-26 18:16:25 -0400] adamsb6: Virunga: whenever the official docs come up short i dig into the code, it's pretty well written
[2012-10-26 18:16:29 -0400] jroberts: I put the full output of the error in the gist above
[2012-10-26 18:17:47 -0400] Virunga: adamsb6: ok, but look the code takes more precious time :)
[2012-10-26 18:18:18 -0400] Virunga: searching online i found this http://rubydoc.info/gems/chef/Chef/Resource/Package
[2012-10-26 18:19:19 -0400] geekbri: wow these API issues are still going on?
[2012-10-26 18:19:41 -0400] adamsb6: i think those are the official docs, and they're generated from the code.  if the code doesnt have comments, the docs wont be very detailed.
[2012-10-26 18:20:54 -0400] jacqui: hello. is the current outage a rackspace issue? their status page is all green...
[2012-10-26 18:21:58 -0400] edelschaedel: i'm getting api timeouts on hosted chef.  is it down?
[2012-10-26 18:22:27 -0400] mattray: jacqui: there will be a post-mortem once everything is resolved.
[2012-10-26 18:22:40 -0400] Mithrandir: edelschaedel: 19:43 <@ssd7> Hi all, just thought I would post in here as well.  The team is working on the Hosted Chef issues.  Apologies for the lack of updates on status.opscode.com.  Tumblr and Twitter have also been trolling us.
[2012-10-26 18:22:45 -0400] Mithrandir: edelschaedel: aka, yes, being worked on.
[2012-10-26 18:23:10 -0400] edelschaedel: mithrandir:  thanks for the update!
[2012-10-26 18:23:18 -0400] paulmooring: status page was down until recently, we've been updating twitter https://twitter.com/opscode_status
[2012-10-26 18:23:20 -0400] jacqui: mattray: ok, thanks.
[2012-10-26 18:23:35 -0400] paulmooring: I'll make sure something gets put up on status.opscode.com now that tumblr is back up
[2012-10-26 18:24:19 -0400] Virunga: The ruby code inside a resource block is evaluated at compile time?
[2012-10-26 18:24:38 -0400] Virunga: (very noob question)
[2012-10-26 18:24:59 -0400] Virunga: Please help a noob. :)
[2012-10-26 18:25:36 -0400] Mithrandir: Virunga: yes (assuming you're not talking about the ruby code in a ruby block)
[2012-10-26 18:26:10 -0400] Virunga: Mithrandir: no i'm not. Thanks!
[2012-10-26 18:26:59 -0400] Virunga: jroberts: Don't you use a chef-repo?
[2012-10-26 18:27:49 -0400] jroberts: sorry, what do you mean?
[2012-10-26 18:28:36 -0400] Virunga: A repository on your workstation where put all the cookbooks and role and other stuff.
[2012-10-26 18:28:41 -0400] jroberts: yes.
[2012-10-26 18:28:54 -0400] geekbri: why dont they just use chef to bring up a new API server :)
[2012-10-26 18:28:57 -0400] jroberts: which is where my cookbook is that I am trying to upload.
[2012-10-26 18:28:59 -0400] geekbri: automation guys!
[2012-10-26 18:29:06 -0400] spox: lol
[2012-10-26 18:29:40 -0400] Virunga: xD
[2012-10-26 18:29:43 -0400] makerbreakr: what do you guys use for notifications for error conditions based on scaling?
[2012-10-26 18:29:55 -0400] makerbreakr: ie, high disk i/o, high load etc
[2012-10-26 18:30:28 -0400] adamsb6: we use monit for the individual nodes
[2012-10-26 18:30:40 -0400] makerbreakr: if I wanted to write some software, to get notified that xyz server is under high load, and spin up a new one based on load parameters
[2012-10-26 18:30:42 -0400] adamsb6: a combination of newrelic and pingdom for application/service level monitoring
[2012-10-26 18:31:03 -0400] Virunga: jroberts: i can't find the gist url of your error, did you paste it?
[2012-10-26 18:31:06 -0400] adamsb6: oh, for that we just use aws autoscaling groups with cloudwatch alarms
[2012-10-26 18:31:21 -0400] jroberts: https://gist.github.com/3960249#comments
[2012-10-26 18:35:15 -0400] jroberts: Virunga:  it's a problem with cache_options( :path =>
[2012-10-26 18:35:30 -0400] jroberts: where should that point ?
[2012-10-26 18:35:58 -0400] Virunga: i put /var/chef/cache
[2012-10-26 18:36:14 -0400] jroberts: did you set perms on that?
[2012-10-26 18:36:20 -0400] Virunga: no
[2012-10-26 18:37:21 -0400] jroberts: ok.  I'll figure it out.  Thanks for your time.
[2012-10-26 18:37:35 -0400] Virunga: yw
[2012-10-26 18:41:15 -0400] mhoran: Is it possible to reference a data bag from an attributes file? When I try, I don't get the expected result.
[2012-10-26 18:42:56 -0400] cwj: mhoran: https://github.com/karmi/cookbook-elasticsearch/blob/master/attributes/default.rb is one example i've seen
[2012-10-26 18:43:33 -0400] cwj: might also look at https://github.com/hw-cookbooks/bag_config
[2012-10-26 18:46:03 -0400] mhoran: Cool, I saw bag_config. Cheers.
[2012-10-26 18:50:54 -0400] cwj: anyone successfully used HTTParty in lwrp code? i am having a hard time with ensuring the gem is available before any code that depends on it is loaded
[2012-10-26 18:51:14 -0400] sethvargo: cwj: what are you trying to do?
[2012-10-26 18:52:08 -0400] cwj: i have a library file in my cookbook creating a class PingdomClient which includes HTTParty
[2012-10-26 18:52:41 -0400] sethvargo: are the requests failing (exception) or not running
[2012-10-26 18:53:41 -0400] cwj: include HTTParty fails because the library code is loaded before my default recipe can install the gem
[2012-10-26 18:53:54 -0400] cwj: uninitialized constant exception
[2012-10-26 18:53:58 -0400] cwj: [2012-10-26T18:40:23+00:00] DEBUG: Re-raising exception: NameError - uninitialized constant PingdomClient::HTTParty
[2012-10-26 18:54:30 -0400] cwj: if i manually install the gem then my code works
[2012-10-26 18:55:14 -0400] cwj: i have worked around this previously by moving the class inside the provider's action, but that lwrp only had one real action
[2012-10-26 18:55:16 -0400] sethvargo: can you do something like the aws cookbook?
[2012-10-26 18:55:17 -0400] sethvargo: begin
[2012-10-26 18:55:17 -0400] sethvargo:   require 'right_aws'
[2012-10-26 18:55:18 -0400] sethvargo: rescue LoadError
[2012-10-26 18:55:18 -0400] sethvargo:   Chef::Log.warn("Missing gem 'right_aws'")
[2012-10-26 18:55:18 -0400] sethvargo: end
[2012-10-26 18:55:31 -0400] sethvargo: but obviously include instead of require
[2012-10-26 18:55:52 -0400] spox: include?
[2012-10-26 18:55:55 -0400] cwj: i've tried that, but i wind up just trading exceptions
[2012-10-26 18:56:39 -0400] sethvargo: is the code on gh
[2012-10-26 18:56:41 -0400] sethvargo: ^?
[2012-10-26 18:56:52 -0400] cwj: https://gist.github.com/3960708
[2012-10-26 18:56:58 -0400] spox: cwj: is the httparty stuff being used inside your lib?
[2012-10-26 18:57:03 -0400] spox: or are you subclassing directly?
[2012-10-26 18:57:24 -0400] spox: yeah
[2012-10-26 18:57:33 -0400] spox: so just take out the include module bit
[2012-10-26 18:57:44 -0400] spox: move it into the initialize and put your require above the include
[2012-10-26 18:57:57 -0400] spox: that way, you require and include the module when you instantiate the object
[2012-10-26 18:58:00 -0400] spox: and it's not required up front
[2012-10-26 18:58:04 -0400] cwj: so move both require and include into initialize?
[2012-10-26 18:58:25 -0400] cwj: i guess i will need to move base_uri there also
[2012-10-26 18:58:33 -0400] spox: yeah. or have a setup method or something to make it a little more explicit
[2012-10-26 18:58:46 -0400] cwj: ok i will try that, thanks :(
[2012-10-26 18:58:48 -0400] cwj: er :)
[2012-10-26 18:58:52 -0400] spox: lol
[2012-10-26 18:58:56 -0400] cwj: :D
[2012-10-26 18:59:17 -0400] spox: i think you'll likely need something like: self.class.base_uri 'https://fubar!'
[2012-10-26 18:59:30 -0400] cwj: ah yeah
[2012-10-26 18:59:33 -0400] uncommitted: chef-server-webui, seems the admin user doesn't work how can I reset this?
[2012-10-26 19:02:48 -0400] cwj: spox: updated the gist, now i am getting an undefined method exception for 'include'
[2012-10-26 19:03:07 -0400] sethvargo: you can't call include on an instance
[2012-10-26 19:03:11 -0400] spox: oh, right
[2012-10-26 19:03:12 -0400] spox: sorry
[2012-10-26 19:03:12 -0400] sethvargo: self.class.include
[2012-10-26 19:03:13 -0400] spox: extend
[2012-10-26 19:03:14 -0400] spox: ftw
[2012-10-26 19:03:17 -0400] sethvargo: or extend
[2012-10-26 19:03:20 -0400] sethvargo: depends on what you're trying to do
[2012-10-26 19:03:32 -0400] cwj: not familiar with extend, will look into it
[2012-10-26 19:03:45 -0400] spox: since there is already an instance initialized, including into the class won't have any affect on the current instance
[2012-10-26 19:06:23 -0400] sethvargo: anyone using the most recent version of Berkshelf on ruby 1.9.3-p286? Even the simplest Berskfile are failing to resolve for me...
[2012-10-26 19:07:41 -0400] spox: cwj: in your default recipe, are you using gem_package or chef_gem?
[2012-10-26 19:08:30 -0400] cwj: i am using chef_gem, and using the g = chef_gem  g.run_action(:install) trick
[2012-10-26 19:08:50 -0400] spox: chef_gem doesn't need the trick fwiw
[2012-10-26 19:09:01 -0400] cwj: huh ok
[2012-10-26 19:10:16 -0400] unclek: any word on the outage?
[2012-10-26 19:11:27 -0400] hcastro: unclek: http://status.opscode.com is back up
[2012-10-26 19:11:55 -0400] unclek: heatstro: hmmm, still having issues
[2012-10-26 19:12:18 -0400] uncommitted: regarding chef-server-webui, deleted the admin user in couchdb and recreated, still won't allow login with admin and the password in webui.rb
[2012-10-26 19:13:47 -0400] unclek: can't even login: We're sorry, but an error occurred while processing your request. Our support team has been notified. Please try again later or visit help.opscode.com for assistance. Thank you for your patience.
[2012-10-26 19:14:44 -0400] cwj: self.class.extend HTTParty doesn't throw an error, but all of the variations on setting base_uri that i have tried (self.base_uri, self.class.base_uri, base_uri) return undefined method exception
[2012-10-26 19:15:15 -0400] cwj: which makes me think the extend isn't really working
[2012-10-26 19:15:22 -0400] hcastro: unclek: i meant the status page is back up after the tumblr outage, not hosted chef itself
[2012-10-26 19:15:29 -0400] spox: cwj: https://gist.github.com/3960758
[2012-10-26 19:15:46 -0400] unclek: ah.
[2012-10-26 19:15:47 -0400] cwj: spox: ok let me try that
[2012-10-26 19:16:05 -0400] spox: cwj: notice the bit at the bottom too :)
[2012-10-26 19:16:29 -0400] cwj: rgr
[2012-10-26 19:16:45 -0400] uncommitted: figured out the webui issue, apparently I overrode it at some point in /etc/chef/ewbus.rb
[2012-10-26 19:18:29 -0400] cwj: spox: awesome, just had to lose the '=' for base_uri. thanks for your help!
[2012-10-26 19:18:44 -0400] spox: cwj: cool, no problem :)
[2012-10-26 19:36:16 -0400] reset: sethvargo: hey what was your issue?
[2012-10-26 19:37:03 -0400] sethvargo: reset: fresh install, simple Berksfile, cant resolve any dependencies
[2012-10-26 19:37:22 -0400] sethvargo: reset:site :opscode
[2012-10-26 19:37:22 -0400] sethvargo: cookbook 'nginx'
[2012-10-26 19:37:40 -0400] sethvargo: yields: Cookbook 'nginx' not found in any of the default locations
[2012-10-26 19:37:52 -0400] reset: what OS are you on
[2012-10-26 19:37:59 -0400] sethvargo: Mac OSX
[2012-10-26 19:38:23 -0400] reset: and what version of Berkshelf
[2012-10-26 19:38:37 -0400] sethvargo: 0.5.1
[2012-10-26 19:38:37 -0400] intinig: hi all
[2012-10-26 19:38:41 -0400] bluepojo: sethvargo: does knife cookbook site download nginx work?
[2012-10-26 19:39:00 -0400] reset: sethvargo: can you install --pre so you get 0.6.0 beta
[2012-10-26 19:39:01 -0400] bluepojo: making sure it's a berkshelf issue and not something else
[2012-10-26 19:39:04 -0400] sethvargo: bluepojo:  worked fine
[2012-10-26 19:39:05 -0400] sethvargo: Downloading nginx from the cookbooks site at version 1.0.2 to /Users/svargo/Development/chef-repo/nginx-1.0.2.tar.gz
[2012-10-26 19:39:05 -0400] sethvargo: Cookbook saved: /Users/svargo/Development/chef-repo/nginx-1.0.2.tar.gz
[2012-10-26 19:39:08 -0400] bluepojo: ok, good to know
[2012-10-26 19:39:19 -0400] reset: I'm pretty sure that's a bad error message that I'm throwing right there
[2012-10-26 19:39:24 -0400] reset: and really something else happened
[2012-10-26 19:39:34 -0400] JustinCampbell: hmm
[2012-10-26 19:41:09 -0400] reset: sethvargo: what is the exact error message btw
[2012-10-26 19:41:17 -0400] sethvargo: so, it changes
[2012-10-26 19:41:28 -0400] sethvargo: when I use the global site :opscode, it's Cookbook 'tmux' not found in any of the default locations
[2012-10-26 19:41:58 -0400] sethvargo: When I use cookbook 'nginx', site: :opscode, its /Users/svargo/.rvm/gems/ruby-1.9.3-p286/gems/dep_selector-0.0.8/lib/dep_selector/selector.rb:123:in `rescue in block in find_solution': Unable to satisfy constraints on package none due to solution constraint (none >= 0.0.0). Solution constraints that may result in a constraint on none: [(none >= 0.0.0)] (DepSelector::Exceptions::NoSolutionExists)
[2012-10-26 19:42:41 -0400] reset: sethvargo: can you upgrade to the pre version of Berkshelf and let me know what that error is
[2012-10-26 19:42:53 -0400] reset: 0.5.x uses DepSelector and 0.6.x uses Solve
[2012-10-26 19:42:59 -0400] sethvargo: yea, gimme 5. someone just walked in though
[2012-10-26 19:43:29 -0400] reset: ok great
[2012-10-26 19:46:07 -0400] sethvargo: reset: magic! it's working on pre
[2012-10-26 19:46:22 -0400] reset: ok great
[2012-10-26 19:46:33 -0400] reset: the dependency resolver is a lot better in 0.6.x
[2012-10-26 19:48:09 -0400] sethvargo: yea, it was actually pretty fast. rubygems should take a hint...
[2012-10-26 19:49:23 -0400] sethvargo: thanks again!
[2012-10-26 19:49:33 -0400] reset: no problem man
[2012-10-26 19:50:53 -0400] intinig: I need some suggestions. I am writing a recipe that does initial configuration and setup of a server. I am stuck after generating a ssh-key for a "deploy" user I created. I want to add that key to github, probably using the github_api gem. What is the correct way to proceed? Copying the script that uploads the key on the server and then running it? Or is there a better way?
[2012-10-26 19:55:06 -0400] _0x783czar: intinig: Although I've never needed to use the github_api gem, I'd imagine that would be the best way to approach the situation.  In chef there are always tons of ways to solve any given problem.  Since I'm not exactly familiar with the script you'll be running I can't say for certain, but that approach seeems just as good as any.
[2012-10-26 19:56:54 -0400] intinig: _0x783czar: thx
[2012-10-26 19:56:57 -0400] intinig: I have another question
[2012-10-26 19:57:03 -0400] intinig: :)
[2012-10-26 19:57:14 -0400] intinig: I use an execute resource to generate an ssh key
[2012-10-26 19:57:33 -0400] intinig: but it tries to do that on each run of chef-client and it should not do it
[2012-10-26 19:57:40 -0400] intinig: should I add a check in the recipe
[2012-10-26 19:57:48 -0400] intinig: so if the file does not exists it runs ssh-keygen?
[2012-10-26 20:00:23 -0400] jondecamp: intinig: you can use 'creates' in the execute block and give it the path to the key you expect to be created.
[2012-10-26 20:00:36 -0400] jondecamp: intinig: or a not_if statement
[2012-10-26 20:00:44 -0400] intinig: jondecamp: I went with not_if
[2012-10-26 20:00:56 -0400] intinig:   not_if "test -f /var/apps/.ssh/id_dsa"
[2012-10-26 20:04:33 -0400] ssd7: Hosted Chef Users: We should be back up.  Post-mortem to follow.
[2012-10-26 20:06:58 -0400] spox: \o/
[2012-10-26 20:07:05 -0400] heydrick: hosted chef runs are working for me now
[2012-10-26 20:11:21 -0400] hoover_damm: ssd7, i blame the little pixie gremlins
[2012-10-26 20:12:54 -0400] karwash:  yep... no more timeouts... life is good.
[2012-10-26 20:14:26 -0400] xtort: Thanks ssd7.
[2012-10-26 20:19:48 -0400] gchristensen: I'm running chef-client on a node, and I'm getting "Error Syncing Cookbooks:" but then no output. and then [2012-10-26T16:19:10-04:00] FATAL: Net::HTTPServerException: 404 "Not Found"
[2012-10-26 20:20:02 -0400] gchristensen: any known issues wrt the down-time there? or something else on this system?
[2012-10-26 20:22:09 -0400] gchristensen: the stacktrace doesn't seem particularly helpful, but - https://gist.github.com/497424482aaeccc21f0f
[2012-10-26 20:23:26 -0400] _0x783czar: ssd7: might that outtage explain why my status tab shows all my nodes as having never checked in?
[2012-10-26 20:24:46 -0400] ssd7: _0x783czar: That depends
[2012-10-26 20:25:30 -0400] ssd7: _0x783czar: I would run chef-client accross your nodes, ensure they all run to completion, and then see if it updates the status tab
[2012-10-26 20:25:38 -0400] ssd7: if it doesn't something might be up
[2012-10-26 20:26:58 -0400] gchristensen: it appears that I can bootstrap a new server, but when I rerun chef-client on an existing node it fails
[2012-10-26 20:27:53 -0400] gchristensen: just kidding ,it ended up failing about half way through.
[2012-10-26 20:30:12 -0400] behemphi: I have run chef-client on three existing nodes with no problem
[2012-10-26 20:30:23 -0400] behemphi: chef versions wereh 10.2 and 10.12 and 10.14
[2012-10-26 20:30:41 -0400] queso: I am using Chef Solo (with virtualbox and vagrant). I'm trying to install mysql-server using the mysql cookbook. I've added mysql.mysql_root_password to my node json file and tried the same with a role and no matter what I do chef tries using a random root password instead of the password I specify, so it consistently fails with the installation. Help?
[2012-10-26 20:31:02 -0400] gchristensen: seems to be residual from the down time - 10.14 - can't bootstrap or run chef-client
[2012-10-26 20:33:24 -0400] gchristensen: this new machine is running 10.16.2
[2012-10-26 20:40:11 -0400] _0x783czar: ssd7: alright, I'll do that in a bit
[2012-10-26 20:52:23 -0400] thehar: howdyho
[2012-10-26 20:52:37 -0400] bluepojo: hi
[2012-10-26 20:52:58 -0400] qhartman: 'ello
[2012-10-26 21:01:20 -0400] Majost: FATAL: ArgumentError: Cannot find a recipe matching web_app in cookbook apache2
[2012-10-26 21:01:44 -0400] Majost: The weird part is -- I don't even use the web_app function in my cookbook
[2012-10-26 21:06:07 -0400] Majost: Any ideas?
[2012-10-26 21:08:14 -0400] bluepojo: that error will throw if you include_recipe "apache2::web_app"
[2012-10-26 21:08:22 -0400] bluepojo: are you sure you're not doing that anywhere?
[2012-10-26 21:08:26 -0400] bluepojo: Majost:
[2012-10-26 21:10:01 -0400] Majost: yup
[2012-10-26 21:10:16 -0400] Majost: just grepped my entire cookbook to be sure
[2012-10-26 21:10:34 -0400] Majost: however
[2012-10-26 21:10:53 -0400] Majost: I am using apache_module and apache_site
[2012-10-26 21:11:20 -0400] intinig: a stupid question:
[2012-10-26 21:11:29 -0400] intinig: I am running an execute block
[2012-10-26 21:11:57 -0400] intinig: like this execute "foobar -k OPTION -u OPTION2 -t OPTION3"
[2012-10-26 21:12:03 -0400] Majost: bluepojo: neither of those definitions appear to include web_app though
[2012-10-26 21:12:13 -0400] intinig: I want option to be the node name so I add #{node.name}
[2012-10-26 21:12:39 -0400] intinig: and I want option2 and 3 to be passed via json before the chef run. They should not be stored on the node (they are a username and a password)
[2012-10-26 21:12:41 -0400] intinig: how do I do that?
[2012-10-26 21:13:14 -0400] Majost: if you use node['blah'] it will store it
[2012-10-26 21:13:53 -0400] Majost: intinig: you probably want to just use regular variables so the values do not live beyond runtime
[2012-10-26 21:15:28 -0400] intinig: Majost: like ENV variables?
[2012-10-26 21:15:38 -0400] bluepojo: intinig: are you using chef server or chef solo?
[2012-10-26 21:15:44 -0400] intinig: bluepojo: hosted chef
[2012-10-26 21:15:52 -0400] bluepojo: in that case use encrypted data bags
[2012-10-26 21:15:56 -0400] bluepojo: for protected data
[2012-10-26 21:15:58 -0400] bluepojo: like passwords
[2012-10-26 21:16:20 -0400] bluepojo: this way you can make the data available without exposing it
[2012-10-26 21:16:27 -0400] bluepojo: to anyone who doesn't have the key
[2012-10-26 21:17:17 -0400] Majost: caveat of encrypted data bags is the key must be on the box to decrypt the value
[2012-10-26 21:17:22 -0400] bluepojo: true
[2012-10-26 21:21:45 -0400] Majost: bluepojo: do you know if there is anything special I need to include to access definitions?
[2012-10-26 21:23:23 -0400] bluepojo: Majost: you just have to depend on the cookbook
[2012-10-26 21:23:51 -0400] bluepojo: then lwrps, libraries, definitions, attributes, etc. become available
[2012-10-26 21:23:57 -0400] bluepojo: in your metadata.rb
[2012-10-26 21:24:48 -0400] Majost: hrm
[2012-10-26 21:25:30 -0400] Majost: yeah, I depend in the metadata and include_recipe "apache2" in the cookbook/recipe
[2012-10-26 21:26:01 -0400] bluepojo: if you include_recipe, it will run the recipe where you call include
[2012-10-26 21:26:06 -0400] bluepojo: if that's what you want, then you're good
[2012-10-26 21:26:27 -0400] bluepojo: if you just depend, the recipe won't get run, but you will have access to the things defined in that cookbook for your own recipes
[2012-10-26 21:26:42 -0400] _0x783czar: ssd7: Not sure if you're still here, but running my chef-clients again did not seem to change their status in on the status tab.  They are still showing up as having never checked in for some reason.  They were all showing as having reported in yesterday.
[2012-10-26 21:27:27 -0400] ssd7: _0x783czar: PM me your org nam and I can take a look.  Otherwise feel free to email support@opscode.com
[2012-10-26 21:29:38 -0400] JasonF: When I load a data bag item, is ordering of items within that guaranteed in Ruby 1.8?
[2012-10-26 21:32:23 -0400] _0x783czar: ssd7: done
[2012-10-26 21:40:40 -0400] intinig: ok I am almost there
[2012-10-26 21:40:47 -0400] intinig: how do I do lazy evaluation of attributes?
[2012-10-26 21:40:57 -0400] intinig: I am uploading the secret file to the server
[2012-10-26 21:41:22 -0400] intinig: and after that I use Chef::EncryptedDataBagItem.load
[2012-10-26 21:41:31 -0400] intinig: unfortunately it tries to load it immediately when compiling the recipe
[2012-10-26 21:41:41 -0400] intinig: and since /etc/chef/encrypted_data_bag_secret isn't there
[2012-10-26 21:41:42 -0400] intinig: it dies
[2012-10-26 21:44:33 -0400] bluepojo: you can provide the secret at bootstrap time
[2012-10-26 21:44:52 -0400] JasonF: The answer to my question is no, for anyone finding this on google later. We proved they got reordered in a log :).
[2012-10-26 21:48:17 -0400] yfeldblum: JasonF, the ordering of object keys in JSON is not guaranteed, nevermind what happens in ruby ...
[2012-10-26 21:50:25 -0400] yfeldblum: JasonF, also the ordering of hash keys in ruby-1.8 is not guaranteed; the ordering of hash keys in ruby-1.9 is guaranteed to be exactly the order of their insertions, but that's only useful in some cases - for example, it's not a real ordering of the keys based on the keys themselves, which you would want for many purposes
[2012-10-26 21:59:06 -0400] timsmith: does anyone know of a nice automated way to dump all the databags/roles/environments from a chef server to a format appropriate for managing in git and later being uploaded with knife?
[2012-10-26 21:59:59 -0400] adamsb6: knife role show $role_name -j
[2012-10-26 22:00:11 -0400] intinig: ok I have done all I had to do (I think) but now it's loading empty values instead of the decrypted databags value. They work perfectly via knife
[2012-10-26 22:01:01 -0400] timsmith: adamsb6: I was hoping for something that would do them all. I have a lot of databags
[2012-10-26 22:01:14 -0400] adamsb6: make that: knife role show -F j $role_name
[2012-10-26 22:01:24 -0400] adamsb6: just do a list and use it as the input for a loop in bash
[2012-10-26 22:01:35 -0400] adamsb6: e.g.
[2012-10-26 22:02:00 -0400] adamsb6: for x in `knife data bag list` ; do knife data bag show -F -j $x > data_bags/$x.json ; done
[2012-10-26 22:06:58 -0400] timsmith: perfect
[2012-10-26 22:07:00 -0400] timsmith: thanks
[2012-10-26 22:07:39 -0400] dougireton: Is powershell a built-in resource in Chef 10.12.0 or do I need the PowerShell cookbook?
[2012-10-26 22:08:49 -0400] intinig: ok, I fixed it, thanks everyone :)
[2012-10-26 22:09:46 -0400] paulmooring: dougireton: you need the cookbook
[2012-10-26 22:10:19 -0400] dougireton: ok, @paulmooring, is it built-in in a later version of the Chef client?
[2012-10-26 22:11:41 -0400] paulmooring: it is not yet nor is it on the roadmap, but a ticket was added for moving it to Chef at the summit earlier this week
[2012-10-26 22:13:44 -0400] _0x783czar: ssd7: hey, sorry I missed your reply, anyway, in the PM I sent you the paste
[2012-10-26 22:16:56 -0400] JasonF: yfeldblum: consistency is what I wanted; you're saying that in the case of a JSON data bag, I can't even rely on it to be consistent even in ruby 1.9?
[2012-10-26 22:18:12 -0400] yfeldblum: JasonF, you may be able to achieve consistency with ruby-1.9 with some care, but generally speaking it's unreliable; if consistency is what you're after, i'd suggest actually sorting the keys when emitting JSON
[2012-10-26 22:19:57 -0400] JasonF: yfeldblum: thanks. That's what I suspected based on what you said before :).
[2012-10-26 22:27:17 -0400] dougireton: I'm writing a printer LWRP for Windows printers, with the idea that I'll be contributing it back soon. Should the LWRP go into the Opscode Windows cookbook or a separate Printers cookbook?
[2012-10-26 22:28:21 -0400] dougireton: it has a dependency on PowerShell, FYI, so that would have to be added to the Windows cookbook if my LWRP went into that cookbook
[2012-10-26 22:41:04 -0400] yfeldblum: JasonF, no probs
[2012-10-26 22:48:06 -0400] jacquesc: quick question? with an organization validator pem, how do you create (with knife) a client that has the ability to create/remove roles and cookbooks
[2012-10-26 22:48:07 -0400] jacquesc: is it the -a flag?
[2012-10-26 23:02:22 -0400] _0x783czar: Can anyone think of a way to have a recipe tell if it's running in Chef-Client or Chef-Solo?
[2012-10-26 23:08:45 -0400] jacquesc: so its definitely not the -a flag. not quite understanding chef client permissions
[2012-10-26 23:09:19 -0400] jacquesc: maybe i need to create a user instead?
[2012-10-26 23:13:45 -0400] jacquesc: even when i manually `knife client edit` my user, and set admin: true, it doesnt stick
[2012-10-26 23:15:29 -0400] JasonF: _0x783czar: yeah: if Chef::Config[:solo]
[2012-10-26 23:17:28 -0400] _0x783czar: JasonF: perfect, thanks!
[2012-10-26 23:18:37 -0400] jacquesc: hmm, so validator clients cant create admin clients
[2012-10-26 23:18:52 -0400] jacquesc: (reading wiki docs, that point isnt 100% clear but i'm starting suspect thats the case)
[2012-10-26 23:23:19 -0400] jtimberman: jacquesc: On hosted chef? if you need a particular API client to have more permissions than it starts out with then you'll need to edit it through the management webui.
[2012-10-26 23:23:31 -0400] jtimberman: there's an API for it, but we don't have much tooling around that.
[2012-10-26 23:23:52 -0400] jtimberman: like, public tooling
[2012-10-26 23:23:53 -0400] jacquesc: yep, on opscode platform
[2012-10-26 23:24:28 -0400] jacquesc: would love to call that API if at all possible
[2012-10-26 23:24:51 -0400] jacquesc: if its possible to create a client with admin privileges from an organization validator pem
[2012-10-26 23:27:10 -0400] jtimberman: you'd put the API client in the admin group, rather than assign admin privileges. I *think* the only way the "admin" attribute on an API client is used is in Open Source Chef
[2012-10-26 23:27:33 -0400] jtimberman: gotta run, power diminishing and my flight is boarding soon.
[2012-10-26 23:27:43 -0400] jacquesc: cool, thanks. i'll dig into it
[2012-10-26 23:27:49 -0400] jtimberman: if you have further questions please email support@opscode.com :-)
[2012-10-26 23:29:23 -0400] jacquesc: woohoo, that worked
[2012-10-26 23:35:32 -0400] timsmith: Is there a way run Foodcritic with a whitelist of FC rules.  I want to set it up in our Team City runs, but there's certain rules I just don't care about
[2012-10-26 23:36:18 -0400] cheeseplus: timsmith: foodcritic --tags ~FC002 cookbooks
[2012-10-26 23:36:38 -0400] timsmith: can you give that multiple rules?  Ideally I'd like to just ignore a few rules
[2012-10-26 23:37:01 -0400] cheeseplus: timsmith: yep, it's at the top of the Foodcritic FAQ
[2012-10-26 23:37:16 -0400] cheeseplus: timsmith: https://github.com/cucumber/cucumber/wiki/tags
[2012-10-26 23:37:30 -0400] cheeseplus: uses the same format as cucumber
[2012-10-26 23:38:20 -0400] timsmith: I thought I read through that so I wouldn't get a RTFM, but apparently I missed that
[2012-10-26 23:38:35 -0400] wcmaier: we all should RTFM ;)
[2012-10-26 23:38:54 -0400] cheeseplus: I try not to say RTFM if I can legit help someone even if I'm the one who RTFMs
[2012-10-26 23:38:55 -0400] cheeseplus: ;)
[2012-10-26 23:39:29 -0400] cheeseplus: I've used --tags before as there is one rule that always yells at me and I can't be bothered
[2012-10-26 23:41:24 -0400] cheeseplus: FC024 is always the one that gives me grief since the cookbook I maintain doesn't support amazon or scientifc (on purpose)
[2012-10-26 23:41:50 -0400] timsmith: FC024 is going for sure
[2012-10-26 23:41:55 -0400] timsmith: I have CentOS and Ubuntu
[2012-10-26 23:42:02 -0400] timsmith: support for other OS types isn't really an issue
[2012-10-26 23:42:11 -0400] timsmith: and it'll all be platform family soon anyways
[2012-10-26 23:44:05 -0400] cheeseplus: timsmith: ha, assuming platform family actually give you what you expect - it doesn't
[2012-10-26 23:44:36 -0400] cheeseplus: I have to case several distros for that very reason
[2012-10-26 23:48:59 -0400] timsmith: well if you 100% know scientific is busted you can not use platform_family
[2012-10-26 23:50:40 -0400] wcmaier: aw
[2012-10-26 23:50:49 -0400] wcmaier: i ran SL for a long time; it basically worked
[2012-10-26 23:52:40 -0400] timsmith: well I've added scientific and amazon support to just about every Opscode cookbook I've touched
[2012-10-26 23:52:47 -0400] wcmaier: nice
[2012-10-26 23:55:37 -0400] hoover_damm: almost makes you wish you could do cookbook/debian/recipe/default.rb
[2012-10-26 23:55:51 -0400] hoover_damm: to try and support all the insanity of trying to support everything
[2012-10-26 23:56:00 -0400] hoover_damm: well even 10 distros can be rough
[2012-10-26 23:56:51 -0400] hoover_damm: arch, oracle, scientific, redhat, centos, ubuntu, debian, fedora core ... then you land in a little BSD or solaris sand
[2012-10-26 23:57:10 -0400] hoover_damm: my suggestion was ugly btw
[2012-10-26 23:57:17 -0400] timsmith: well I think only 1 person in the chef community uses BSD
[2012-10-26 23:57:42 -0400] timsmith: it's all https://github.com/andreacampi
[2012-10-26 23:58:33 -0400] KarlHungus: timsmith: i use it extensively
[2012-10-26 23:59:22 -0400] KarlHungus: not enough of my work is public right now, because i'm lazy about documentation and succumb too often to perfectionism

[2012-01-16 09:04:00 -0500] nacer:  ihi
[2012-01-16 09:04:00 -0500] nacer: hi
[2012-01-16 09:04:00 -0500] BryanWB: hi!
[2012-01-16 09:04:00 -0500] BryanWB: nacer: tks for nice comment
[2012-01-16 09:05:00 -0500] nacer: BryanWB: i am still listening the podcast :)
[2012-01-16 09:07:00 -0500] nacer: BryanWB: are you in EU ?
[2012-01-16 09:10:00 -0500] BryanWB: nacer: yup, rome
[2012-01-16 09:10:00 -0500] nacer: BryanWB: nice
[2012-01-16 09:10:00 -0500] nacer: BryanWB: but you live there ?
[2012-01-16 09:11:00 -0500] BryanWB: yes, i live in rome. u in France?
[2012-01-16 09:11:00 -0500] nacer: BryanWB: yup
[2012-01-16 09:11:00 -0500] nacer: BryanWB: Toulouse
[2012-01-16 09:11:00 -0500] nacer: BryanWB: South
[2012-01-16 09:11:00 -0500] BryanWB: sounds lovely, italy is a mess
[2012-01-16 09:11:00 -0500] nacer: BryanWB: i have live some month in toscania :)
[2012-01-16 09:12:00 -0500] BryanWB: ah, toscana is nice, better than rome
[2012-01-16 09:13:00 -0500] nacer: BryanWB: France will become a mess soon enought :)
[2012-01-16 09:33:00 -0500] iroller: Hey. Can I use non-boolean arguments with custom knife plugins? For example I want to have config[:myopt] == "myvalue" instead of config[:myopt] == true when running knife my_plugin --myopt myvalue. :boolean => false is not working for me.
[2012-01-16 10:14:00 -0500] lflux: ohai chefs
[2012-01-16 10:15:00 -0500] lflux: anyone know of a ruby library for manipulating SSH authorized_keys files
[2012-01-16 10:27:00 -0500] wereHamster: how do I override the node hostname in chef-solo?
[2012-01-16 10:27:00 -0500] wereHamster: I tried attributes: { hostname: '...' } in my json, but that didn't work
[2012-01-16 10:36:00 -0500] caaakeeey: is there a nice hello world somewhere for running a ruby client and server on the same machine?
[2012-01-16 10:47:00 -0500] BryanWB: wereHamster: put    node_name  'my_custom_name'   in your solo.rb
[2012-01-16 10:48:00 -0500] wereHamster: no way to override it through the json?
[2012-01-16 10:48:00 -0500] wereHamster: and how is it set if I used chef server?
[2012-01-16 10:49:00 -0500] wereHamster: can I set custom attributes in the json and then use it in my cookbooks?
[2012-01-16 10:50:00 -0500] wereHamster: and nope, putting node_name into solo.rb didn't work :(
[2012-01-16 10:50:00 -0500] wereHamster: my nginx template uses <%= node[:hostname %>
[2012-01-16 11:37:00 -0500] BryanWB: wereHamster: override_attributes  , yes
[2012-01-16 11:37:00 -0500] BryanWB: actually, i don't think u can override name in json
[2012-01-16 11:37:00 -0500] BryanWB: try   node[:name]
[2012-01-16 11:38:00 -0500] BryanWB: hostname is gotten by  ` hostname `
[2012-01-16 11:48:00 -0500] wereHamster: so what's the recomended way to set the hostname? Where do I define it? When doing the inital bootstrap of the instance? Or do you define it in chef-server?
[2012-01-16 11:56:00 -0500] nacer: wereHamster: i think node.hostname come from ohai and ohai get it from /etc/hostname
[2012-01-16 11:57:00 -0500] wereHamster: so I have to set the hostname when bootstrapping the node, right?
[2012-01-16 11:58:00 -0500] wereHamster: in the same script which installs ruby and chef, before I run chef because chef expects the hostname to be set.
[2012-01-16 11:58:00 -0500] BryanWB: wereHamster:   use node_name in solo.rb or in client.rb , but i don't think u can change it later as chef-server uses it as the node's id
[2012-01-16 11:58:00 -0500] nacer: i think you are looking for node.name
[2012-01-16 12:00:00 -0500] nacer: like BryanWB say use node_name for setting the node name and use node.name in your cookbook instead of node.hostname
[2012-01-16 12:02:00 -0500] yfeldblum: lflux, what can't you do to authorized_keys with #lines and #join("\n") ?
[2012-01-16 12:04:00 -0500] yfeldblum: caaakeeey, see the chef-client and chef-server cookbooks - they're cookbooks that you can run with chef-solo to install and run the chef-client and the chef-server
[2012-01-16 12:04:00 -0500] BryanWB: yfeldblum: good morngin!
[2012-01-16 12:04:00 -0500] BryanWB: yfeldblum: u sounded great on the podcast
[2012-01-16 12:05:00 -0500] wereHamster: so I really have to use node.name, and not node[:name] ..
[2012-01-16 12:06:00 -0500] lflux: yfeldblum: it'll end up being that but I was hoping that there was already a gem for it
[2012-01-16 12:06:00 -0500] lflux: sorry, a gem that didn't totally suck.
[2012-01-16 12:11:00 -0500] yfeldblum: BryanWB, thanks, hope i get a spare minute to listen to it today!
[2012-01-16 12:13:00 -0500] yfeldblum: BryanWB, probably tonight
[2012-01-16 12:19:00 -0500] yfeldblum: BryanWB, the thing that unites devs & ops ... "zomg this six-step clicking on things is so PAINFUL so i'm going to spend 3 hours writing something in bash/ruby/appletalk that will do it or give me a 3-step solution"
[2012-01-16 12:19:00 -0500] tolland: hi, i would like to one off apply a recipe
[2012-01-16 12:20:00 -0500] yfeldblum: tolland, if a recipe is any good, you can apply it infinitely many times and it should be the same as applying it once
[2012-01-16 12:20:00 -0500] tolland: sorry, i meant from command line - say "chef-client recipe[java-jre]"
[2012-01-16 12:21:00 -0500] tolland: but rather than have to go into shef, or write out a first-boot.json and call it with -j
[2012-01-16 12:29:00 -0500] yfeldblum: tolland, why not add it to the node's run-list?
[2012-01-16 12:29:00 -0500] tolland: yfeldblum: can I do that from a one-liner?
[2012-01-16 12:30:00 -0500] tolland: basically some users dont have access to the server, not is knife configured by standard on the workstations.
[2012-01-16 12:30:00 -0500] tolland: though I am thinking of rolling a knife.rb to match the client.rb so knife would work for searches and node lists.
[2012-01-16 12:31:00 -0500] tolland: I have some users who don't know chef, and don;t want to. but will run all sorts of bash scripts to install stuff like jdk or jpackage, i want to give them a command to run recipes if necessary
[2012-01-16 12:32:00 -0500] BryanWB: yfeldblum: exactly ;)
[2012-01-16 12:32:00 -0500] BryanWB: the expression that comes to mind is "this is fucking killing my soul"
[2012-01-16 12:34:00 -0500] tolland: hmm. i didnt read back the previous conversation. it looks like I was on-topic by accident
[2012-01-16 12:35:00 -0500] lflux: ruby experts: I want to check if a string exists in another string. is String#index the correct answer?
[2012-01-16 12:38:00 -0500] BryanWB: tolland: have u seen my java cookbook? https://github.com/bryanwb/cookbooks/tree/master/java  may be useful to u
[2012-01-16 12:39:00 -0500] tolland: haha yeah
[2012-01-16 12:39:00 -0500] tolland: thats what i am using.
[2012-01-16 12:40:00 -0500] BryanWB: tolland: my cookbook doesn't have a jre recipe
[2012-01-16 12:40:00 -0500] tolland: but the user is some Java developer who wants sun JDK on the team dev box, they dont have any idea about shef or chef-client
[2012-01-16 12:40:00 -0500] tolland: BryanWB: it was just an example
[2012-01-16 12:41:00 -0500] tolland: i hacked out the LWRP into from that recipe into something to install various java
[2012-01-16 12:43:00 -0500] tolland: but the developers are running scripts that change sudoers to get requiretty and all sorts off stuff so install various jpackage and sun jdk
[2012-01-16 12:43:00 -0500] tolland: shef -z run "recipe[java::sunjdk]" would save a lot of bother
[2012-01-16 12:44:00 -0500] tolland: I guess it shall be a plugin, (if one doesn't exist already)
[2012-01-16 12:45:00 -0500] BryanWB: interesting!
[2012-01-16 12:45:00 -0500] BryanWB: u use jpackage? i thought jpackage was dead
[2012-01-16 12:46:00 -0500] BryanWB: it hasn't been update since Dec 2010
[2012-01-16 12:46:00 -0500] BryanWB: how did u change the lwrp? i would be happy to extend it to meet what u need
[2012-01-16 12:46:00 -0500] BryanWB: u r referring to the java_ark lwrp, correct?
[2012-01-16 12:48:00 -0500] caaakeeey: what's the difference between ohai and facter?
[2012-01-16 12:48:00 -0500] BryanWB: caaakeeey:  afaict they are very similar, both gather info about the system
[2012-01-16 12:49:00 -0500] caaakeeey: why do they both exist?
[2012-01-16 12:50:00 -0500] tolland: BryanWB: only becayuse we still have centos 5.6
[2012-01-16 12:50:00 -0500] BryanWB: tolland:  doesn't mean u have to use old java libraries
[2012-01-16 12:50:00 -0500] tolland: and need tomcat6
[2012-01-16 12:52:00 -0500] tolland: i just use it to configure the various paths in "alternatives"
[2012-01-16 12:52:00 -0500] BryanWB: yeah, i still haven't gotten around to revising tomcat6 ckbk to use java_ark
[2012-01-16 12:52:00 -0500] yfeldblum: lflux, http://rubydoc.info/stdlib/core/1.8.7/String:index
[2012-01-16 12:53:00 -0500] lflux: I'll take that as a yes
[2012-01-16 12:53:00 -0500] BryanWB: tolland: well if u ever get a chance, drop me a mail w/ how u changed it, or even w/ ur hacks and i would consider upstreaming them
[2012-01-16 12:54:00 -0500] lflux: (since my code using it seems to work)
[2012-01-16 12:54:00 -0500] yfeldblum: lflux, so yes, you can use `abcdef(3, 4, 5) if "some magic string".index("substring")` should work
[2012-01-16 12:56:00 -0500] yfeldblum: lflux, something good to know about ruby is that in an if-else, the else will be triggered if the condition is either `false` or `nil` (exactly one of those and nothing else), but the if will be triggered if the condition is `0` (or any othe number, string or any other value)
[2012-01-16 12:57:00 -0500] lflux: wonderful :)
[2012-01-16 12:58:00 -0500] BryanWB: lflux, i highly recommend pry, it helped me understand ruby's stdlib
[2012-01-16 12:58:00 -0500] BryanWB: lflux more details in here http://devopsanywhere.blogspot.com/2011/10/month-with-chef.html
[2012-01-16 12:59:00 -0500] lflux: oooh
[2012-01-16 12:59:00 -0500] lflux: that looks interesting
[2012-01-16 12:59:00 -0500] lflux: i'll take a look at it later
[2012-01-16 12:59:00 -0500] lflux: that your blog?
[2012-01-16 13:02:00 -0500] BryanWB: yup
[2012-01-16 13:02:00 -0500] BryanWB: farther down in article is stuff on pry
[2012-01-16 13:06:00 -0500] iroller: knife exec -E 'search(:node, "Product Name:PowerEdge MODEL01").each {|n| puts n.fqdn} # gives me wrong results because whitespaces. How can I use search with whitespaced attributes?
[2012-01-16 13:12:00 -0500] yfeldblum: lucene query syntax is here: http://lucene.apache.org/java/3_4_0/queryparsersyntax.html
[2012-01-16 13:20:00 -0500] iroller: yfeldblum: I'm trying to use smth like search(:node, '"Product Name":"#{product_name}"') in my knife plugin, no luck :(
[2012-01-16 13:20:00 -0500] iroller: search(:node, "Product Name":"#{product_name}") => gives error too
[2012-01-16 13:25:00 -0500] iroller: weird :/
[2012-01-16 13:26:00 -0500] skiold: iroller: you have no variable expansion on the first one, single quotes are killing the #{} expansion
[2012-01-16 13:27:00 -0500] iroller: skiold: yeah I know. It doesn't work even with string
[2012-01-16 13:27:00 -0500] skiold: ah, right, the knife exec sample
[2012-01-16 13:38:00 -0500] kerute: hi
[2012-01-16 13:41:00 -0500] iroller: Yay! search(:node, "dmi_system_product_name:\"#{myvar}\"") works :)
[2012-01-16 13:44:00 -0500] skiold: iroller: oh! underscores replace everything; we were fighting search scoping a moment ago
[2012-01-16 13:44:00 -0500] matti: You could do: search(:node, sprintf('dmi_system_product_name: "%s"', myvar)); too :)
[2012-01-16 13:45:00 -0500] matti: If you really need to have some nasty quotes.
[2012-01-16 13:45:00 -0500] iroller: thanks :)
[2012-01-16 13:48:00 -0500] lflux: is there a better way to test if I got a recipe syntactically correct (so I dont get stuff like 'undefined method `foobar`' when i forget a = somewhere?
[2012-01-16 13:49:00 -0500] lflux: besides uploading and running
[2012-01-16 13:49:00 -0500] matti: lflux: ruby -c can detect some obvious syntax errors.
[2012-01-16 13:50:00 -0500] lflux: the rake target in my chef-repo doesn't catch it
[2012-01-16 13:50:00 -0500] lflux: i e just running 'rake'
[2012-01-16 13:52:00 -0500] matti: I don't know that this Rakefile does :)
[2012-01-16 13:54:00 -0500] caaakeeey: how do i ask knife cookbook upload to me more verbose, it seems to be hanging, but its probably just uploading some stuff in /files, but either way id like to know what its up to
[2012-01-16 13:54:00 -0500] caaakeeey: nvm me
[2012-01-16 13:56:00 -0500] caaakeeey: it does seem to be hanging :/
[2012-01-16 14:00:00 -0500] caaakeeey: does chef upload files in parallel or sequentially?
[2012-01-16 14:02:00 -0500] tolland: if i link knife.rm to client.rb then my instances can use knife commands as the client, is that sensible? or will it break things?
[2012-01-16 14:09:00 -0500] erikh: knife -c /etc/chef/client.rb
[2012-01-16 14:12:00 -0500] caaakeeey: im changing the recipe, reuploading it, but chef-client uses an old version of the recipe...
[2012-01-16 14:21:00 -0500] BryanWB: caaakeeey: that means the old version must have a higher version #
[2012-01-16 14:24:00 -0500] caaakeeey: ahh, how do i clear that knowledge from the client?
[2012-01-16 14:25:00 -0500] caaakeeey: @BryanWB
[2012-01-16 14:27:00 -0500] BryanWB: caaakeeey: just increase the version # in metadata.rb for the cookbook u want to upload
[2012-01-16 14:27:00 -0500] BryanWB: then upload it
[2012-01-16 14:29:00 -0500] caaakeeey: yeah i did that, but its still a bit silly, if you accidently specify too high a number, theres no going back?
[2012-01-16 14:54:00 -0500] thom: knife cookbook delete foo version-number
[2012-01-16 14:55:00 -0500] BryanWB: caaakeeey: u can delete specific versions of a cookbook from ur che-sever
[2012-01-16 14:55:00 -0500] BryanWB: knife cookbook delete foo    # u r prompted to choose which version to delete
[2012-01-16 14:58:00 -0500] caaakeeey: ah k, thanks :)
[2012-01-16 15:02:00 -0500] lflux: How do I set arrays with node.set ?
[2012-01-16 15:10:00 -0500] hmarr: Has anyone noticed permissions issues with chef-solr installed by the Ubuntu package?
[2012-01-16 15:10:00 -0500] hmarr: It seems like it might be logrotate causing problems; solr dies every Sunday morning at 8:30 am
[2012-01-16 15:15:00 -0500] yfeldblum: lflux, can you give a bit more detail?
[2012-01-16 15:24:00 -0500] lflux: I basically did node["foo"]["bar"] << frob
[2012-01-16 15:24:00 -0500] lflux: checking first if that's an array and creating it if not
[2012-01-16 15:33:00 -0500] hcastro: anyone run into a situation where after a reboot the instance automatically attaches mdadm arrays at random /dev points?
[2012-01-16 15:36:00 -0500] erikh: never seen that before
[2012-01-16 15:36:00 -0500] erikh: although it's entirely possible I suppose
[2012-01-16 15:45:00 -0500] dkingofpa: yfeldblum:  On windows, running librarian-chef via a "git bash" environment.  Getting "fork() function is unimplemented".  Not sure if this is librarian or the apache2 cookbook.  https://gist.github.com/1621439
[2012-01-16 15:48:00 -0500] yfeldblum: dkingofpa, i cannot support librarian on windows
[2012-01-16 15:48:00 -0500] yfeldblum: dkingofpa, at least, i have not done any ruby on windows programming ...
[2012-01-16 15:49:00 -0500] yfeldblum: windows doesn't do fork/exec
[2012-01-16 15:51:00 -0500] yfeldblum: if anyone wants to help with that ... :P
[2012-01-16 15:54:00 -0500] dkingofpa: yfeldblum:  Yeah, I've never done that either.  I was just trying to put together some docs on using a project of mine for windows folks.
[2012-01-16 15:54:00 -0500] dkingofpa: yfeldblum:  Didn't know if you've seen that error before when running an install.
[2012-01-16 16:02:00 -0500] yfeldblum: dkingofpa, yeah, i've never run librarian on windows, so i haven't seen it :D
[2012-01-16 16:05:00 -0500] caaakeeey: any ideas? http://dpaste.com/688657/
[2012-01-16 16:12:00 -0500] yfeldblum: dkingofpa, it may work on cygwin or msyswin or some such, never tried it
[2012-01-16 16:17:00 -0500] dkingofpa: yfeldblum: I've tried the "git bash" shell that's installed with git for windows.  I've also tried the "Start Command Prompt with Ruby" shell that's installed with the RubyInstaller.
[2012-01-16 16:20:00 -0500] dkingofpa: yfeldblum:  "git bash" bombs on the apache2 cookbook from the community site.  Ruby command prompt bombs on the database cookbook from the community site.  Cookbooks from a git repo appear to work.
[2012-01-16 16:25:00 -0500] gmcinnes1: happy mondays chefs.
[2012-01-16 16:25:00 -0500] caaakeeey: anyone? http://dpaste.com/688657/
[2012-01-16 16:30:00 -0500] gmcinnes1: stupid question chefs.  If I change a template file and push it up to the server, the next chef client run on a node should pick it up, no?
[2012-01-16 16:30:00 -0500] mostlygeek: in chef how do you check if it is ubuntu 10.04, 10.10, etc?
[2012-01-16 16:30:00 -0500] thom: caaakeeey: in general try asking a question in channel, people are more likely to be able to help
[2012-01-16 16:30:00 -0500] mostlygeek: nm
[2012-01-16 16:31:00 -0500] thom: caaakeeey: in this case, try ":installpath => nil" in the definition
[2012-01-16 16:31:00 -0500] mostlygeek: http://wiki.opscode.com/display/chef/Recipes#Recipes-CommonAutomaticAttributes
[2012-01-16 16:32:00 -0500] yfeldblum: dkingofpa, interesting ... do you have backtraces? try running with `--verbose`?
[2012-01-16 16:33:00 -0500] dkingofpa: yfeldblum: yeah, it's in the gist - https://gist.github.com/1621439
[2012-01-16 16:34:00 -0500] dkingofpa: yfeldblum: when librarian goes to download a cookbook from the community site, it calls fork.
[2012-01-16 16:34:00 -0500] dkingofpa: yfeldblum:  lib/librarian/chef/source/site.rb  line 180
[2012-01-16 16:35:00 -0500] dkingofpa: yfeldblum: I made a note to myself to take a look at replacing that call to fork with something more windows friendly when I get some free time.  :)
[2012-01-16 16:37:00 -0500] caaakeeey: thom, thanks, but if i do that i get "FATAL: ArgumentError: wrong number of arguments (3 for 2)"
[2012-01-16 16:38:00 -0500] yfeldblum: dkingofpa, just a tip, if you run `librarian-chef install --verbose &> result.txt` then you can get all the long lines of output appearing as a single line rather than split across lines in the gist
[2012-01-16 16:38:00 -0500] thom: caaakeeey: can you post the entire definition and the full stack trace please
[2012-01-16 16:39:00 -0500] gmcinnes1: what would cause a node not to pick up changes to a cookbook template?
[2012-01-16 16:39:00 -0500] yfeldblum: dkingofpa, also, does windows have the `tar` command?
[2012-01-16 16:40:00 -0500] yfeldblum: dkingofpa, would be pointless to rewrite that bit to do some windows-friendly process-creation unless there's a supported way to untar on windows ...
[2012-01-16 16:42:00 -0500] yfeldblum: dkingofpa, please add an issue to github.com/applicationsonline/librarian/issues regarding windows support and this particular backtrace from the chef site source
[2012-01-16 16:42:00 -0500] dkingofpa: yfeldblum: will do
[2012-01-16 16:47:00 -0500] caaakeeey: thom, http://dpaste.com/688675/ seems to suggest its just going off and executing something else...
[2012-01-16 17:09:00 -0500] caaakeeey: thom, what is the point of definitions, would it make sense to have everything in the recipe, and then use attributes?
[2012-01-16 17:11:00 -0500] mostlygeek: anybody use chef to deploy a web application?
[2012-01-16 17:13:00 -0500] lflux: I'm building a chef repo to deploy mine
[2012-01-16 17:13:00 -0500] lflux: but ours is packaged as RPMs
[2012-01-16 17:14:00 -0500] thom: caaakeeey: definitions are good when you're doing the same thing in multiple places, so you don't have to cut'n'paste code
[2012-01-16 17:16:00 -0500] caaakeeey: mm
[2012-01-16 17:18:00 -0500] mostlygeek: lflux: your web app is packaged as RPM?
[2012-01-16 17:20:00 -0500] bdha: https://github.com/jjhuff/knife-plugin-role-viz/ # Oh, very neat.
[2012-01-16 17:45:00 -0500] miketheman: anyone know if I can specify an "environment" statically in the knife.rb file?
[2012-01-16 17:45:00 -0500] miketheman: nothing in the wiki docs for it
[2012-01-16 17:46:00 -0500] chip-: Is there an 'easy' way to find the version of a cookbook that a particular node is running?
[2012-01-16 17:46:00 -0500] chip-: knife node show -l didn't return versions that I could see
[2012-01-16 17:46:00 -0500] chip-: (beyond looking at the node, then the run list, then the environment, and sussing it out that way
[2012-01-16 17:46:00 -0500] chip-: )
[2012-01-16 17:47:00 -0500] miketheman: doesn't look like that attribute comes back
[2012-01-16 17:47:00 -0500] miketheman: could be a good idea to file an improvement for ohai to send that back to server
[2012-01-16 17:53:00 -0500] miketheman: filed http://tickets.opscode.com/browse/CHEF-2868 to track environment in knife.rb file
[2012-01-16 18:20:00 -0500] supergrilo: Hello!
[2012-01-16 18:23:00 -0500] arthur_kalm: Hi everyone, I'm writing a chef recipe and I'm having trouble with the order of execution. For example, we're using remote_directory to copy over a directory with a secret key that we use in a data bag decryption right below. However, they seem to be running out of order
[2012-01-16 18:23:00 -0500] arthur_kalm: We're getting a file not found directory
[2012-01-16 18:24:00 -0500] arthur_kalm: *error
[2012-01-16 18:24:00 -0500] miketheman: how much data is in remote_directory?
[2012-01-16 18:24:00 -0500] miketheman: size-wise?
[2012-01-16 18:25:00 -0500] arthur_kalm: Is there a way to ensure it runs in order? I've had a similar problem with using a recipe that compiles and installs something, but I also need to copy to directories that get created after the compile.
[2012-01-16 18:26:00 -0500] arthur_kalm: miketheman 100kb maybe
[2012-01-16 18:27:00 -0500] miketheman: arthur_kalm: this actually seems a little insecure - since the server has the databag decryption key...
[2012-01-16 18:28:00 -0500] arthur_kalm: That seemed to be the way you do encrypted databags
[2012-01-16 18:28:00 -0500] arthur_kalm: My main question is, how do I make sure things run in order
[2012-01-16 18:29:00 -0500] arthur_kalm: And block until the command above finishes
[2012-01-16 18:30:00 -0500] fabio: when i run ohai on debian/ubuntu this error occurs: http://pastebin.ca/2103661
[2012-01-16 18:30:00 -0500] fabio: i use the last version of ohai
[2012-01-16 18:30:00 -0500] fabio: ii  ohai                             0.6.10-1
[2012-01-16 18:31:00 -0500] miketheman: arthur_kalm: have you run it with debug, and seen where it fails? does it fail specifically because the file is not there?
[2012-01-16 18:31:00 -0500] fabio: ii  rubygems1.8                      1.3.7-3
[2012-01-16 18:32:00 -0500] arthur_kalm: miketheman yes
[2012-01-16 18:32:00 -0500] fabio: anyone can help me?
[2012-01-16 18:34:00 -0500] arthur_kalm: Same thing with the other cookbook that compiles and installs from source. I try to copy over configuration files to directories that get created by the compile
[2012-01-16 18:36:00 -0500] arthur_kalm: It seems that commands are getting executed in parallel
[2012-01-16 19:00:00 -0500] hippiehacker: I upgraded from chef-10.6 to chef-10.8 via the msi on windows and now with the the powershell recipe just hangs with this last line in the debug log: DEBUG: sh(C:\Windows\sysnative\WindowsPowershell\v1.0\powershell.exe -Comma
[2012-01-16 19:00:00 -0500] hippiehacker: nd "& {Get-Host}")
[2012-01-16 19:01:00 -0500] hippiehacker: is there a way to debug this? that command works fine on the command line
[2012-01-16 19:03:00 -0500] hippiehacker: cookbooks windows =1.2.8 and powershell=1.0.2
[2012-01-16 19:04:00 -0500] hippiehacker: where can I download 10.6 msi?
[2012-01-16 19:04:00 -0500] fujin: http://www.opscode.com/chef/install.msi
[2012-01-16 19:04:00 -0500] fujin: installer?
[2012-01-16 19:05:00 -0500] fujin: windows_installer is http://www.opscode.com/chef/install.msi
[2012-01-16 19:05:00 -0500] hippiehacker: fujin: you sure that 10.6 and not 10.8?
[2012-01-16 19:05:00 -0500] fujin: nfi man
[2012-01-16 19:05:00 -0500] fujin: i would anticipate it to be updated
[2012-01-16 19:05:00 -0500] fujin: btm: is that msi 10.6 or 10.8?
[2012-01-16 19:05:00 -0500] hippiehacker: 10.8 seems to break things
[2012-01-16 19:05:00 -0500] fujin: oh, you asked for 10.6. my bad
[2012-01-16 19:05:00 -0500] fujin: misread
[2012-01-16 19:05:00 -0500] fujin: 10.8 was supposed to *fix* stuff in windows I thought =P
[2012-01-16 19:06:00 -0500] hippiehacker: heh
[2012-01-16 19:06:00 -0500] hippiehacker: it's just hanging
[2012-01-16 19:06:00 -0500] hippiehacker: the the default recipes from opscode only
[2012-01-16 19:07:00 -0500] rfuentes: i'm having some issues with the new dependencies for chef on centos
[2012-01-16 19:07:00 -0500] rfuentes: anyone can please help me? =)
[2012-01-16 19:08:00 -0500] hippiehacker: there is no sysnative directory in c:\windows
[2012-01-16 19:08:00 -0500] hippiehacker: DEBUG: sh(C:\Windows\sysnative\WindowsPowershell\v1.0\powershell.exe -Command "& {Get-Host}"
[2012-01-16 19:08:00 -0500] hippiehacker: )
[2012-01-16 19:08:00 -0500] fujin: =\
[2012-01-16 19:09:00 -0500] fujin: https://github.com/opscode/cookbooks/blob/master/powershell/libraries/core.rb#L37
[2012-01-16 19:09:00 -0500] fujin: maybe a bug in there man.
[2012-01-16 19:10:00 -0500] fujin: you have powershell installed I assume?
[2012-01-16 19:10:00 -0500] hippiehacker: it was introduced lately, as I've been fine before upgrading to 10.8 on the windows client
[2012-01-16 19:10:00 -0500] fujin: it has alway sbeen my preference to raise an application failure if a required binary is not present from inside of a binary
[2012-01-16 19:10:00 -0500] fujin: in the service providers, for example
[2012-01-16 19:10:00 -0500] fujin: if chkconfig is missing etc.
[2012-01-16 19:10:00 -0500] fujin: hippiehacker: where is powershell.exe on your system?
[2012-01-16 19:10:00 -0500] hippiehacker: going to look
[2012-01-16 19:12:00 -0500] hippiehacker: https://github.com/opscode/cookbooks/blob/master/powershell/libraries/core.rb#L42 in this path
[2012-01-16 19:12:00 -0500] hippiehacker: why would it choose the other?
[2012-01-16 19:12:00 -0500] hippiehacker: and then hang?
[2012-01-16 19:12:00 -0500] yfeldblum: fujin, that's a good practice
[2012-01-16 19:13:00 -0500] yfeldblum: fujin, if it's a critical binary, i might even check during application boot/initialization/setup for the required binary, not just sometime before the first use
[2012-01-16 19:13:00 -0500] hippiehacker: c:\windows\system32\WindowsPowershell\v1.0\powershell.exe
[2012-01-16 19:13:00 -0500] hippiehacker: (and in the path)
[2012-01-16 19:13:00 -0500] fujin: hippiehacker: that's.. weird
[2012-01-16 19:14:00 -0500] fujin: schisamo: can you take a look at this? looks like wrong interpreter being selected by the powershell core library
[2012-01-16 19:14:00 -0500] fujin: hippiehacker: I'd be starting to butcher that cookbook library myself now
[2012-01-16 19:14:00 -0500] fujin: hack that interpreter method
[2012-01-16 19:14:00 -0500] hippiehacker: it's just after uninstalling chefclient
[2012-01-16 19:14:00 -0500] hippiehacker: msi v 10.4 and 10.6 then installing 10.8 fresh
[2012-01-16 19:15:00 -0500] hippiehacker: the file doesn't exist
[2012-01-16 19:16:00 -0500] hippiehacker: why would it use that one... very strange (line 39/40)
[2012-01-16 19:17:00 -0500] fujin: something about me assumes some path expansion nonsense?
[2012-01-16 19:18:00 -0500] fujin: hippiehacker: like I said instead of speculation lay out some Chef::Log.debug in that interpreter method
[2012-01-16 19:18:00 -0500] fujin: output of %x[dir File.dirname(that big long thing)]
[2012-01-16 19:18:00 -0500] fujin: i dunno. :)
[2012-01-16 19:18:00 -0500] hippiehacker: forking
[2012-01-16 19:22:00 -0500] fujin: well schisamo is headed to the cinema with triplets
[2012-01-16 19:22:00 -0500] fujin: i imagine you'll see him a little later
[2012-01-16 19:22:00 -0500] fujin: sounds worth of some investigation in any case :\
[2012-01-16 19:28:00 -0500] hippiehacker: if I wanted to pull my forked powershell recipe from within a fork of opscode/cookbooks, how would I reference that in my Cheffile?
[2012-01-16 19:28:00 -0500] hippiehacker: https://github.com/hh/cookbooks/tree/feature/powershellpath
[2012-01-16 19:30:00 -0500] cap10morgan: is it possible to specify a recipe version in the run list?
[2012-01-16 19:30:00 -0500] ssd7: Ohai Chefs
[2012-01-16 19:30:00 -0500] yfeldblum: morning, ssd7
[2012-01-16 19:31:00 -0500] kallistec: cap10morgan: yes, but it's discouraged, you should use environments
[2012-01-16 19:31:00 -0500] cap10morgan: kallistec: ok, i need to RTFM on environments. thanks.
[2012-01-16 19:32:00 -0500] kallistec: cap10morgan: here's the overview I wrote when we shipped it: http://www.opscode.com/blog/2011/04/21/chef-0-10-preview-environments/
[2012-01-16 19:32:00 -0500] kallistec: and on the wiki: http://wiki.opscode.com/display/chef/Environments
[2012-01-16 19:33:00 -0500] cap10morgan: cool, thanks
[2012-01-16 19:36:00 -0500] fujin: hippiehacker: not sure how the Cheffile stuff works IRT modded ones.
[2012-01-16 19:36:00 -0500] fujin: I think there is a way to do it cause I have been looking at it for pennyworth
[2012-01-16 19:36:00 -0500] hippiehacker: cookbook 'powershell', :git => 'https://github.com/hh/cookbooks.git', :ref => 'feature/powershellpath', :path => 'powershell'
[2012-01-16 19:36:00 -0500] yfeldblum: what's the recommended way to untar from ruby on windows?
[2012-01-16 19:37:00 -0500] coderanger: yfeldblum: We ship a tar.exe with the windows omnibus installer
[2012-01-16 19:37:00 -0500] yfeldblum: hippiehacker, i like your branch namespacing
[2012-01-16 19:37:00 -0500] hippiehacker: turns into feature/CHEF-XXX if I make a ticket
[2012-01-16 19:39:00 -0500] yfeldblum: coderanger, cool, so that will work from chef-client on windows, but what about from e.g. a knife plugin or, gasp, librarian?
[2012-01-16 19:39:00 -0500] fujin: hippiehacker: you are probably going to want to display those with Chef::Log.debug
[2012-01-16 19:39:00 -0500] hippiehacker: https://github.com/hh/cookbooks/commit/22e039d5fb281593b5924723794fa0c9b17bcb8d
[2012-01-16 19:39:00 -0500] fujin: oh
[2012-01-16 19:39:00 -0500] fujin: you are
[2012-01-16 19:39:00 -0500] fujin: lol
[2012-01-16 19:39:00 -0500] fujin: misread. wow
[2012-01-16 19:40:00 -0500] fujin: ran out of espresso beans today.. avoiding supermarket at 9am
[2012-01-16 19:40:00 -0500] hippiehacker: heading to tangleball.org.nz today. want to setup something similar in Tauranga. moving to downtown this weekend
[2012-01-16 19:41:00 -0500] yfeldblum: coderanger, should windows people use the full-stack installer to get knife? if so, is there a way for them to run librarian so that it has the same PATH?
[2012-01-16 19:43:00 -0500] hippiehacker: I can see the windows chef-client updated core.rb for powershell, but I'm not seeing the debug output.... I only see "Loading Recipe powershell via include_recipe, Found recipe default in cookbook powershell, sh(C:\Windows\sysnative\WindowsPowershel.... blah blah....
[2012-01-16 19:44:00 -0500] hippiehacker: I have those debugs just above the lines that would return that, I wonder if it's set somewher elese
[2012-01-16 19:51:00 -0500] hippiehacker: Does Chef::Log work within libraries?
[2012-01-16 19:51:00 -0500] fujin: yeah
[2012-01-16 19:51:00 -0500] hippiehacker: https://github.com/hh/cookbooks/commit/2ba4e866ae2b6dc0485f467a1bb5ead6fc18868d
[2012-01-16 19:51:00 -0500] hippiehacker: just not seeing any output from it
[2012-01-16 19:52:00 -0500] fujin: does %x[] work on 'doze? i dunno
[2012-01-16 19:52:00 -0500] fujin: :)
[2012-01-16 19:54:00 -0500] hippiehacker: git commit -m 'make log statements more visible' ; git push; librarian-chef update powershell ; knife cookbook upload powershell ; knife winrm -blah testwindows box
[2012-01-16 19:55:00 -0500] fabio: when i run ohai on debian/ubuntu this error occurs: http://pastebin.ca/2103661
[2012-01-16 19:55:00 -0500] fabio: i use the last version of ohai
[2012-01-16 19:55:00 -0500] fabio: anyone can help me?
[2012-01-16 19:55:00 -0500] hippiehacker: https://github.com/hh/cookbooks/commit/f1f782eb1dfbb8c84aa9321bd69af39cacbc9432 but XXX and YYY should have showed up :)
[2012-01-16 19:56:00 -0500] coderanger: yfeldblum: Not that I know of directly, this is part of why librarian should be rewritten as a plugin :D
[2012-01-16 19:56:00 -0500] fujin: hippiehacker: and you're running in debug, that definitely is not output? sounds like you have something whacky going on. cookbook versioning?
[2012-01-16 19:56:00 -0500] fujin: enviornment using an older cookbook version?
[2012-01-16 19:56:00 -0500] fujin: bad cache?
[2012-01-16 19:56:00 -0500] fujin: do knife cookbook delete powershell -yap
[2012-01-16 20:03:00 -0500] hippiehacker: fujin: some issue with librarian-chef
[2012-01-16 20:03:00 -0500] hippiehacker: it's not bringing down my code or something
[2012-01-16 20:11:00 -0500] fujin: lame :\
[2012-01-16 20:12:00 -0500] hippiehacker: now I'm getting a 500 error from winrm when trying to connect... I hate windows
[2012-01-16 20:13:00 -0500] hippiehacker: totally unrelated, but frustrating
[2012-01-16 20:14:00 -0500] Damm: frustrating but totally awesome to windows nerds
[2012-01-16 20:14:00 -0500] hippiehacker: fujin: logging shows that both directories exist....
[2012-01-16 20:16:00 -0500] hippiehacker: fujin: some majic behind the scenes?
[2012-01-16 20:16:00 -0500] fujin: mmm
[2012-01-16 20:16:00 -0500] fujin: I don't know that any other code touched it? What is the output of the ::File.exists? calls?
[2012-01-16 20:16:00 -0500] hippiehacker: true
[2012-01-16 20:16:00 -0500] fujin: you said it was picking an interpreter that doesn't exist, right?
[2012-01-16 20:17:00 -0500] hippiehacker: Looking at the filesystem with cmd.exe and explorer.exe, I'd say it doesn't exist
[2012-01-16 20:17:00 -0500] hippiehacker: looking at the code I'd say it does
[2012-01-16 20:17:00 -0500] fujin: that is fucked up
[2012-01-16 20:18:00 -0500] siezer: woot
[2012-01-16 20:18:00 -0500] fujin: maybe change the form?
[2012-01-16 20:18:00 -0500] fujin: Dir.entries(dir).include? "powershell.exe"
[2012-01-16 20:19:00 -0500] yfeldblum: hippiehacker, librarian-chef isn't currently supported on windows
[2012-01-16 20:19:00 -0500] fujin: [ dir_a, dir_b ].detect("powershell.exe") { |dir| ::Dir.entries(dir).include? "powershell.exe" }
[2012-01-16 20:19:00 -0500] yfeldblum: hippiehacker, because it uses unixy things like fork/exec and tar
[2012-01-16 20:20:00 -0500] hippiehacker: https://gist.github.com/1622767 isn't librarian-chef related
[2012-01-16 20:20:00 -0500] hippiehacker: I'm running on unix hosts, pushing powershell recipe via winrm
[2012-01-16 20:21:00 -0500] fujin: hippiehacker: so the interpreter call is good, right?
[2012-01-16 20:21:00 -0500] fujin: it's picking the right one? 64bit powershell
[2012-01-16 20:21:00 -0500] fujin: just the sh(C:\Windows\sysnative\WindowsPowershell\v1.0\powershell.exe -Command "& {Get-Host}") times out?
[2012-01-16 20:21:00 -0500] fujin: what happens if you paste that into cmd.exe?
[2012-01-16 20:22:00 -0500] hippiehacker: fujin: it would appear that it is just timing out.... (however, c:\windows\sysnative does not exist, only c:\windows\system32)
[2012-01-16 20:23:00 -0500] fujin: but that dir output shows it existing
[2012-01-16 20:23:00 -0500] fujin: https://gist.github.com/1622767
[2012-01-16 20:24:00 -0500] hippiehacker: I agree that it does show it existing in the gist / log
[2012-01-16 20:24:00 -0500] hippiehacker: but it does not exist on the filesystem
[2012-01-16 20:24:00 -0500] fujin: what the fuck?
[2012-01-16 20:25:00 -0500] hippiehacker: I'll poke around, make sure on the right host, see if I'm doing something stupid, but at first glance... and second... I'm just perplexed
[2012-01-16 20:25:00 -0500] fujin: that seems like windows magic
[2012-01-16 20:27:00 -0500] hippiehacker: sysnative but magically detecte system32 vs system64
[2012-01-16 20:27:00 -0500] hippiehacker: eithere way the command still hangs, and it didn't under chef-client 10.6... I think I'd rather download 10.6 directly and see if it really is a version change issue
[2012-01-16 20:28:00 -0500] fabio: hello?! :P
[2012-01-16 20:28:00 -0500] fabio: anyone can help me?
[2012-01-16 20:28:00 -0500] fabio: :B
[2012-01-16 20:30:00 -0500] ssd7: That largely depends on the question.
[2012-01-16 20:31:00 -0500] fabio: when i run ohai on debian/ubuntu this error occurs: http://pastebin.ca/2103661
[2012-01-16 20:31:00 -0500] fujin: hippiehacker: you can use the enviornment installed by the msi (I guess?) and downgrade the gem to 10.6
[2012-01-16 20:31:00 -0500] fabio: this is a ohai package from opscode repository
[2012-01-16 20:32:00 -0500] fabio: and ubuntu natty
[2012-01-16 20:32:00 -0500] fujin: hippiehacker: looks like c:\ruby ?
[2012-01-16 20:32:00 -0500] fujin: hippiehacker: https://github.com/opscode/omnibus has the windows/powershell docs
[2012-01-16 20:32:00 -0500] hippiehacker: http://msdn.microsoft.com/en-us/library/aa384187.aspx : "The %windir%\System32 directory is reserved for 64-bit applications. .... WOW64 hides this difference using a file system redirector."
[2012-01-16 20:33:00 -0500] spicyWith: I'm trying to understand what SSL certificates are used for. Any pointers? I'm setting up my open source chef installation. Server is up and running. Trying to get started on my laptop
[2012-01-16 20:33:00 -0500] hippiehacker: fujin: thanks
[2012-01-16 20:35:00 -0500] hippiehacker: opscode: please provide old binaries for the install .msi as you upgrade
[2012-01-16 20:36:00 -0500] fujin: hippiehacker: nice !
[2012-01-16 20:36:00 -0500] siezer: hippiehacker: you can get it as far back as 0.10.4 from http://s3.amazonaws.com/opscode-full-stack
[2012-01-16 20:37:00 -0500] hippiehacker: siezer: thanks, downloading
[2012-01-16 20:39:00 -0500] fabio: ssd7: ssd7  ?
[2012-01-16 20:39:00 -0500] hippiehacker: siezer: does opscode have an automated test suite for the windows stacks against the different versions... windows-2008 2008R2  / at various service packs etc
[2012-01-16 20:39:00 -0500] motiejus: Hello all. I am investigating chef-server redundancy. Is there a way to backup the whole chef-server, so it can be re-spawned easily & simply? Seems like it has lots of components and setup isn't that easy
[2012-01-16 20:40:00 -0500] ssd7: fabio: What version of ohai do you have installed??
[2012-01-16 20:40:00 -0500] motiejus: I am investigating the scenario "what if the node that holds chef-server crashes"
[2012-01-16 20:41:00 -0500] fabio: ii  ohai                             0.6.10-1
[2012-01-16 20:41:00 -0500] workmad3: motiejus: your chef-client runs can't happen
[2012-01-16 20:41:00 -0500] workmad3: motiejus: and you can't upload new cookbooks, etc
[2012-01-16 20:41:00 -0500] fabio: ssd7: from opscode repository
[2012-01-16 20:42:00 -0500] motiejus: well, I know that, but talking about reving the server from backups
[2012-01-16 20:42:00 -0500] ssd7: fabio: Hmm.
[2012-01-16 20:42:00 -0500] motiejus: I found this.. http://sys-notes.com/bin/view/Main/ChefServerMaintenance .. according to that, only config files and couchdb backups are necessary
[2012-01-16 20:42:00 -0500] motiejus: I believe I have just answered my question :)
[2012-01-16 20:43:00 -0500] spicyWith: what is SSL used for in chef?
[2012-01-16 20:43:00 -0500] workmad3: motiejus: ah, ressurecting it... at the moment, I rely on the fact that I have all of my roles, cookbooks, databags and node setups in my chef repo and if my server dies, I just need to reinstall a new chef server, upload all the data and re-authenticate my nodes against the new server
[2012-01-16 20:44:00 -0500] workmad3: motiejus: so I don't worry about backing up my chef server, because it's entirely recreatable (although slightly annoying as I need to reauthenticate all my nodes)
[2012-01-16 20:44:00 -0500] ssd7: fabio: So there is this old bug: http://tickets.opscode.com/browse/OHAI-138  but it is marked as fixed.
[2012-01-16 20:44:00 -0500] motiejus: I failed to find a node list in my repository (and roles assigned to the nodes)
[2012-01-16 20:44:00 -0500] fabio: ssd7: is it a regression bug?
[2012-01-16 20:44:00 -0500] workmad3: motiejus: I created a nodes directory and store node json in it... not sure if that's normal, but it's what I do
[2012-01-16 20:45:00 -0500] workmad3: motiejus: your chef repository can store whatever you want after all :)
[2012-01-16 20:45:00 -0500] necromancer: why can't i wrap service() calls with an if condition?
[2012-01-16 20:45:00 -0500] necromancer: i have to use only_if()
[2012-01-16 20:45:00 -0500] necromancer: not as readable
[2012-01-16 20:45:00 -0500] motiejus: well, right, but there should be a pretty way to import that all and tell server to process() :)
[2012-01-16 20:46:00 -0500] workmad3: motiejus: I could write a rake task that did it pretty quickly, I suspect... it isn't the import that's a problem though :)
[2012-01-16 20:46:00 -0500] motiejus: and reauthentication.. shouldn't it be enough to backup the server private key?
[2012-01-16 20:46:00 -0500] fabio: ssd7: i saw this link... you prefer that i open a new ticket?
[2012-01-16 20:46:00 -0500] workmad3: motiejus: yeah, I could keep the server key backed up
[2012-01-16 20:46:00 -0500] motiejus: server's
[2012-01-16 20:46:00 -0500] workmad3: motiejus: then I'd just need to remove the client.pem file from each node
[2012-01-16 20:47:00 -0500] motiejus: but .. why? if you have server's private key, can't you just "hotswap" the server?
[2012-01-16 20:47:00 -0500] workmad3: motiejus: but as I have a bootstrap script that basically just removes client.pem and validation.pem then recreates the validation and reruns chef-client for a new authentication
[2012-01-16 20:47:00 -0500] motiejus: all right, that's just another option.
[2012-01-16 20:48:00 -0500] workmad3: motiejus: the client.pem isn't registered with the server, unless you've backed up the server
[2012-01-16 20:48:00 -0500] motiejus: I was actually asking about data. If it's possible to store everything in a repo, then it's more than perfect
[2012-01-16 20:49:00 -0500] ssd7: fabio: Yeah, I'd say open a new ticket and then if it is the same thing someone can do the de-duping once that is determined.  It still could be something particular to your local system, unfortunately I have to run for a bit.
[2012-01-16 20:49:00 -0500] workmad3: motiejus: but yeah, my workflow for a new node basically goes - install, create a new node json file in my repo, load chef with that file, run chef on new node
[2012-01-16 20:49:00 -0500] workmad3: motiejus: it also acts as the seed for my new node for the first chef run :)
[2012-01-16 20:49:00 -0500] fabio: ssd7: tks :)
[2012-01-16 20:50:00 -0500] motiejus: workmad3: I will check this further. I believe there is a limited of things that need a backup in chef-probably each client's public keys and server's private key
[2012-01-16 20:50:00 -0500] workmad3: motiejus: as long as you have reasonably infrequent node additions, it's pretty easy to manage
[2012-01-16 20:50:00 -0500] motiejus: ok, I see. Well, sounds like perfect world from that perspective then
[2012-01-16 20:50:00 -0500] workmad3: motiejus: yeah, if I had to add new nodes really often then I'd reconsider it :)
[2012-01-16 20:51:00 -0500] motiejus: let's suppose you do. How would things change?
[2012-01-16 20:51:00 -0500] workmad3: motiejus: but for my current needs... it works well, and I don't need to mess around with backing up my chef server (making it entirely replacable)
[2012-01-16 20:51:00 -0500] workmad3: motiejus: I'd back up the chef server data, probably with something like bacula
[2012-01-16 20:51:00 -0500] hippiehacker: the 10.8 installer wants a reboot... is the reason documented somewhere? Installing ruby and friends should never require a reboot
[2012-01-16 20:51:00 -0500] workmad3: motiejus: and I'd probably stop storing the node info in my git repo because it would be annoying to maintain
[2012-01-16 20:52:00 -0500] motiejus: workmad3: ok, clear.
[2012-01-16 20:53:00 -0500] hippiehacker: fujin: it is a 10.8 msi issue, 10.6 works fine
[2012-01-16 20:54:00 -0500] hippiehacker: I'd have expected that to get caught
[2012-01-16 20:54:00 -0500] motiejus: workmad3: thank you very much for the overview :)
[2012-01-16 20:55:00 -0500] hippiehacker: 10.8 msi doesn't work on windows 2008R1 SP1, where 10.6 does.... having something to do with powershell
[2012-01-16 20:56:00 -0500] spicyWith: should I have a knife config file per chef repository?
[2012-01-16 20:56:00 -0500] fabio: http://tickets.opscode.com/browse/OHAI-328
[2012-01-16 21:04:00 -0500] spicyWith: hmmm, love them crickets.
[2012-01-16 21:05:00 -0500] fujin: hippiehacker: log a ticket and getr someone to look at it, mailing list post, whatever
[2012-01-16 21:05:00 -0500] fujin: spicyWith: i sometimes have one knife file per branch
[2012-01-16 21:05:00 -0500] fujin: eventually we ended up with like a smart knife file that read ENV variables
[2012-01-16 21:12:00 -0500] spicyWith: fujin: my savior, thanks for the response. This https://github.com/opscode/chef-repo/tree/master/cookbooks seems to imply that there is one in the chef repo. While this seems to imply there is a unique one for http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2012-01-16 21:24:00 -0500] ryker: is there any way to include a role or have a role evaluated in a recipe immediately?
[2012-01-16 21:25:00 -0500] ryker: right now I just add the role to the node's run_list, but I would like to have that role run/evaluated right away, not just on the next chef run
[2012-01-16 22:03:00 -0500] spicyWith: fujin: is it possible to have two separate "organizations" running on the same chef server?
[2012-01-16 22:04:00 -0500] siezer: spicyWith only with hosted and private chef. an "organization" would be a single opensource chef server
[2012-01-16 22:06:00 -0500] spicyWith: siezer: is there any way to "fudge" that? I basically want to run two separate projects, if I'm explaining this correctly
[2012-01-16 22:19:00 -0500] siezer: spicyWith you'd have to run multiple opensource chef servers
[2012-01-16 22:19:00 -0500] siezer: one "organization" being one application "infrastructure" in perfect isolation
[2012-01-16 22:33:00 -0500] spicyWith: siezer: fun times, thanks :)
[2012-01-16 22:44:00 -0500] miketheman: fujin: you around?
[2012-01-16 22:51:00 -0500] fujin: miketheman: yeah waht up
[2012-01-16 22:52:00 -0500] miketheman: working on trying out the chef-jenkins cookbook
[2012-01-16 22:52:00 -0500] miketheman: it's got your face all over it. ;)
[2012-01-16 22:53:00 -0500] fujin: kind of
[2012-01-16 22:53:00 -0500] fujin: i fix the bugs i come across and contribute them back to the community.
[2012-01-16 22:53:00 -0500] fujin: plus theres https://github.com/heavywater/pennyworth
[2012-01-16 22:53:00 -0500] fujin: http://junglist.gen.nz/blog/2011/11/16/pennyworth-quick-start/
[2012-01-16 22:53:00 -0500] spicyWith: siezer: so if I have several chef-servers running, where would I store each .chef/knife.rb, in the chef-repo, correct?
[2012-01-16 22:53:00 -0500] miketheman: so that one is the "source" for the opsocde community site
[2012-01-16 22:54:00 -0500] fujin: well dang
[2012-01-16 22:54:00 -0500] miketheman: but what I'm failing on is the server setup and using the jenkins_cli provider
[2012-01-16 22:54:00 -0500] siezer: spicyWith aha. so have one directory on your chef-workstation per infrastructure, each with it's own .chef/knife.rb
[2012-01-16 22:54:00 -0500] fujin: miketheman: I definitely am not the maintainer, perhaps I should talk to fnichol
[2012-01-16 22:54:00 -0500] fujin: I know he was suggesting I get commit access
[2012-01-16 22:55:00 -0500] fujin: to tidy up the forks laying all around..
[2012-01-16 22:55:00 -0500] fujin: miketheman: what's the problem with the provider?
[2012-01-16 22:55:00 -0500] fujin: miketheman: show debug logs
[2012-01-16 22:55:00 -0500] maek: I just used the new windows chef-client installer (very cool thanks!) and was wonder where chef-client looks for binarys. Im doing  cmd = "cd #{tmp_zip_dir} && unzip -qo #{tmp_package_path}" with unzip in my "dos" path and chef is telling me it cant find unzip. any ideas?
[2012-01-16 22:55:00 -0500] miketheman: fujin: for statement: jenkins_cli "install-plugin rake"
[2012-01-16 22:55:00 -0500] spicyWith: siezer: and no ~/.chef/ correct?
[2012-01-16 22:56:00 -0500] miketheman: fujin: paste http://pastebin.com/dRcS2P4p
[2012-01-16 22:56:00 -0500] siezer: spicyWith I actually use a ~/.chef/knife.rb that pulls all the settings out of ENV['SHELL_VARIABLE'] so I can switch between projects with bash aliases
[2012-01-16 22:57:00 -0500] miketheman: was getting an error earlier using the `%w{list}.each` method in the example,. so I simplified
[2012-01-16 22:57:00 -0500] fujin: miketheman: you're on an old version of chef and show the recipe too
[2012-01-16 22:58:00 -0500] siezer: spicyWith knife will look for .chef/knife.rb in . first, then ../.chef, then ../../.chef ....
[2012-01-16 22:58:00 -0500] fujin: miketheman: this is the line it is failing on https://github.com/heavywater/pennyworth/blob/develop/cookbooks/jenkins/providers/cli.rb#L52
[2012-01-16 22:58:00 -0500] miketheman: fujin: 0.10.8 only had an update for windows installers
[2012-01-16 22:59:00 -0500] fujin: ah word
[2012-01-16 22:59:00 -0500] miketheman: fujin: recipe is literally: include_recipe "jenkins::default"
[2012-01-16 22:59:00 -0500] miketheman: jenkins_cli "install-plugin rake"
[2012-01-16 22:59:00 -0500] fujin: heh
[2012-01-16 22:59:00 -0500] fujin: ok
[2012-01-16 22:59:00 -0500] fujin: let me try to reproduce
[2012-01-16 22:59:00 -0500] fujin: gimme a sec, booted into windows. gaming :)
[2012-01-16 22:59:00 -0500] spicyWith: siezer: would you ever be knifing around outside of the directory structure that would find the right knife.rb?
[2012-01-16 22:59:00 -0500] miketheman: hahaha, nice
[2012-01-16 23:00:00 -0500] miketheman: smart move, instead of hacking on a build cluster on a day off.
[2012-01-16 23:00:00 -0500] fujin: eh. life of a consultant
[2012-01-16 23:00:00 -0500] fujin: brb
[2012-01-16 23:03:00 -0500] siezer: spicyWith right. my command aliases cd me into the relevant chef-repo. the ENV always looks in ./cookbooks, and I use a lot of custom bootstraps, so it works out
[2012-01-16 23:03:00 -0500] fujin: back
[2012-01-16 23:04:00 -0500] miketheman: w00t
[2012-01-16 23:04:00 -0500] fujin: I'm just going to do vagrant up on my pennyworth repo
[2012-01-16 23:05:00 -0500] fujin: since it's basically the same
[2012-01-16 23:05:00 -0500] miketheman: sure
[2012-01-16 23:05:00 -0500] fujin: uses that lwrp under the hood
[2012-01-16 23:06:00 -0500] perfengin: hi, has anyone used puppet for deploying oracle software like weblogic, rdbms? Or just deploying applications in weblogic?
[2012-01-16 23:06:00 -0500] perfengin: I mean...chef
[2012-01-16 23:06:00 -0500] perfengin: lol
[2012-01-16 23:07:00 -0500] miketheman: HAHAHAH
[2012-01-16 23:07:00 -0500] perfengin: yeah, copy & paste...guess where else I asked that question ;)
[2012-01-16 23:08:00 -0500] miketheman: go ask it in #bcfg2 too. ;)
[2012-01-16 23:10:00 -0500] perfengin: I guess do one does this...I wonder why...scared, lazy?
[2012-01-16 23:11:00 -0500] miketheman: maybe nobody uses oracle anymore
[2012-01-16 23:11:00 -0500] fujin: i haven't had a huge scale client use any oracle products with chef
[2012-01-16 23:11:00 -0500] fujin: maybe like an old library or something, but nothing core
[2012-01-16 23:11:00 -0500] fujin: I imagine if weblogic has an API, you could automate it with Chef ;)
[2012-01-16 23:12:00 -0500] fujin: even stuff without APIs can be butchered
[2012-01-16 23:12:00 -0500] miketheman: http://community.opscode.com/cookbooks/oracle
[2012-01-16 23:12:00 -0500] perfengin: I think oracle is still one of the most common dbs.
[2012-01-16 23:13:00 -0500] miketheman: http://www.google.com/trends/?q=oracle
[2012-01-16 23:13:00 -0500] miketheman: http://www.google.com/trends/?q=mysql&ctab=0&geo=all&date=all&sort=0
[2012-01-16 23:13:00 -0500] perfengin: weblogic has a scripting language, yes. I'm sure it works I just wonder why I don't find anything about in in the web
[2012-01-16 23:13:00 -0500] miketheman: http://www.google.com/trends/?q=mongodb&ctab=0&geo=all&date=all&sort=0
[2012-01-16 23:13:00 -0500] perfengin: thanks for the oracle cookbook link
[2012-01-16 23:14:00 -0500] miketheman: np
[2012-01-16 23:14:00 -0500] perfengin: yeah a lot of people search for mongo db...but that has a lot of reasons
[2012-01-16 23:15:00 -0500] perfengin: I'm not an oracle fan (not at all), but that's what my company uses and we won't switch very soon
[2012-01-16 23:15:00 -0500] miketheman: jus' sayin'. ;)
[2012-01-16 23:16:00 -0500] miketheman: fujin: the only_if is at the beginning and ending of the line
[2012-01-16 23:17:00 -0500] fujin: mine is still running lol
[2012-01-16 23:17:00 -0500] fujin: fresh vm build
[2012-01-16 23:17:00 -0500] fujin: nz internet is slow :)
[2012-01-16 23:17:00 -0500] fujin: i have 10/1mbit adsl2+
[2012-01-16 23:17:00 -0500] fujin: it's consistent though! :\
[2012-01-16 23:17:00 -0500] miketheman: slow and steady wins the race
[2012-01-16 23:25:00 -0500] Crim: Hey, are there any docs that describe the process for migrating a chef server instance from one box to another?
[2012-01-16 23:25:00 -0500] Crim: my searching didn't come up with anything
[2012-01-16 23:27:00 -0500] fujin: http://wiki.apache.org/couchdb/Replication
[2012-01-16 23:27:00 -0500] fujin: http://soundcloud.com/profresher/sets/that-good-good/
[2012-01-16 23:27:00 -0500] coderanger: Crim: Easiest way is to just backup and restore the couchdb data
[2012-01-16 23:27:00 -0500] coderanger: Crim: Usually in /var/lib/couchdb
[2012-01-16 23:27:00 -0500] coderanger: or similar
[2012-01-16 23:27:00 -0500] bitmonk: that will get you into lots of trouble, actually. :)
[2012-01-16 23:27:00 -0500] Crim: so basically dump and restore couchdb, then push all of your cookbooks to the new server?
[2012-01-16 23:28:00 -0500] bitmonk: you can reindex solr, but you want to grab all of the hashes..
[2012-01-16 23:28:00 -0500] coderanger: then you need to force a full re-index into solr, and copy the chef sandbox data
[2012-01-16 23:28:00 -0500] bitmonk: your cookbooks are in couch
[2012-01-16 23:28:00 -0500] coderanger: bitmonk: Not entirely, the cookbook file data is on the FS
[2012-01-16 23:28:00 -0500] bitmonk: fair enough.
[2012-01-16 23:28:00 -0500] coderanger: just the manifests live in couch :-/
[2012-01-16 23:28:00 -0500] bitmonk: i forget all of the details, and i wish i wrote a general purpose tutorial when i tackled this,  but it can be a nightmare.
[2012-01-16 23:29:00 -0500] coderanger: Yeah, its unfortunate currently
[2012-01-16 23:29:00 -0500] coderanger: Patches Accepted :D
[2012-01-16 23:30:00 -0500] Crim: so general process, dump & restore couchdb, reindex solr, move over all the hashes, whatever missing steps here, and then point the clients to the new address
[2012-01-16 23:30:00 -0500] Crim: sounds like fun :p
[2012-01-16 23:33:00 -0500] Crim: anything that needs to be considered if I'm going from 0.10.4 to 0.10.8
[2012-01-16 23:33:00 -0500] Crim: wonder if I should upgrade this 10.4 instance first
[2012-01-16 23:35:00 -0500] miketheman: fujin: just looking at line 52, should it have both only_if's on that?
[2012-01-16 23:37:00 -0500] fujin: [pennyworth] [Mon, 16 Jan 2012 23:33:14 +0000] INFO: Chef Run complete in 1635.953642 seconds
[2012-01-16 23:37:00 -0500] fujin: miketheman: that's just using the builtin jenkins.server.plugins array
[2012-01-16 23:38:00 -0500] fujin: what'd you say was in your recipe?
[2012-01-16 23:38:00 -0500] miketheman: jenkins_cli "install-plugin rake"
[2012-01-16 23:39:00 -0500] fujin: :\
[2012-01-16 23:39:00 -0500] fujin: one sec
[2012-01-16 23:39:00 -0500] coderanger: Crim: I don't think anything changed that would matter
[2012-01-16 23:39:00 -0500] coderanger: Crim: It should be stateless anyway
[2012-01-16 23:39:00 -0500] Crim: ok, I'm upgrading now just ot be safe
[2012-01-16 23:40:00 -0500] Crim: i assume doing so can't hurt anything
[2012-01-16 23:42:00 -0500] bitmonk: Crim: we had some very minor breakage going from 0.10.4 to 0.10.8
[2012-01-16 23:42:00 -0500] bitmonk: in a recipe, we had a command with "creates" and "not_if" and the not_if was never run
[2012-01-16 23:42:00 -0500] bitmonk: (there is a bug and a patch submitted by gpapilion, don't have the link handy)
[2012-01-16 23:42:00 -0500] bitmonk: but that was on the client
[2012-01-16 23:43:00 -0500] bitmonk: server wise your data ought be fine.
[2012-01-16 23:43:00 -0500] Crim: the bug is on 10.8?
[2012-01-16 23:43:00 -0500] bitmonk: yah
[2012-01-16 23:43:00 -0500] Crim: hmm cool thanks for the heads up
[2012-01-16 23:43:00 -0500] bitmonk: yah it was very minor, we were able to work around it.
[2012-01-16 23:45:00 -0500] fujin: miketheman: trying some stuff
[2012-01-16 23:45:00 -0500] miketheman: fujin: k
[2012-01-16 23:46:00 -0500] fujin: hmm i was able to reproduce that
[2012-01-16 23:46:00 -0500] fujin: one sec
[2012-01-16 23:46:00 -0500] fujin: https://gist.github.com/60658a50f58bf361a806
[2012-01-16 23:46:00 -0500] miketheman: fujin: good, I'm not hallucinating
[2012-01-16 23:46:00 -0500] miketheman: yep, same same
[2012-01-16 23:47:00 -0500] miketheman: I suspect that the conditional at the end of the line is a mistake
[2012-01-16 23:48:00 -0500] fujin: hmm?
[2012-01-16 23:48:00 -0500] miketheman: https://github.com/heavywater/pennyworth/blob/develop/cookbooks/jenkins/providers/cli.rb#L52
[2012-01-16 23:49:00 -0500] fujin:  that would be fine, except for some reason that not_if/only_if are being initialized to arrays instead of nil
[2012-01-16 23:49:00 -0500] fujin: https://gist.github.com/8e5fc6b9268e513d4407
[2012-01-16 23:49:00 -0500] miketheman: hm
[2012-01-16 23:49:00 -0500] bitmonk: http://tickets.opscode.com/browse/CHEF-281 && https://github.com/opscode/chef/pull/214/files
[2012-01-16 23:55:00 -0500] fujin: miketheman: might have found it

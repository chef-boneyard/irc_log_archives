[2012-01-18 09:23:00 -0500] mtylty: hi
[2012-01-18 09:25:00 -0500] mtylty: anybody can explain what is the "chef way" of overriding certain resources defined in a recipe?
[2012-01-18 09:26:00 -0500] mtylty: I mean, overriding (from another cookbook) a resource defined in a recipe contained in a cookbook
[2012-01-18 09:27:00 -0500] mtylty: I've been trying by finding a defined resource via the resources("resource[name]") method
[2012-01-18 09:28:00 -0500] mtylty: and then calling on that obj methods you would normally call on that resource type
[2012-01-18 09:28:00 -0500] mtylty: but it doesn't work as expected
[2012-01-18 09:31:00 -0500] mtylty: i.e. when using this "hack" on multiple resources of the same type, chef throws Chef::Exceptions::ResourceNotFound
[2012-01-18 09:52:00 -0500] mtylty: oh never mind!
[2012-01-18 09:52:00 -0500] mtylty: I found the problem
[2012-01-18 09:52:00 -0500] mtylty: http://tickets.opscode.com/browse/CHEF-1406
[2012-01-18 13:06:00 -0500] BryanWB: foobar
[2012-01-18 13:45:00 -0500] raz: hmm
[2012-01-18 13:46:00 -0500] raz: knife-bootstrap seems to set the first part of the node-name as hostname ("foo" for "foo.bar.com") but doesn't set a proper fqdn in /etc/hosts
[2012-01-18 13:46:00 -0500] raz: how do i fix that?  /etc/hosts should get "1.2.3.4 foo.bar.com", not "1.2.3.4 foo"
[2012-01-18 13:47:00 -0500] raz: actually /etc/hosts should get: "1.2.3.4 foo.bar.com foo"
[2012-01-18 13:47:00 -0500] BryanWB: knife bootstrap doesn't touch /etc/hosts afaik
[2012-01-18 13:47:00 -0500] raz: aaah!
[2012-01-18 13:47:00 -0500] BryanWB: your distro handles that
[2012-01-18 13:48:00 -0500] raz: ok, time to take the blame elsewhere :)
[2012-01-18 13:48:00 -0500] Brad_K: In the case of CentOS on Rackspace, they don't properly set their FQDN.so I had to create a cookbook to fix that problem myself.
[2012-01-18 13:48:00 -0500] raz: yes, guess i'll do the same
[2012-01-18 13:48:00 -0500] raz: is there a standard-cookbook for that already?
[2012-01-18 13:48:00 -0500] ashb: neither does EC2
[2012-01-18 13:49:00 -0500] ashb: or the chef bootstrapping on EC2
[2012-01-18 13:49:00 -0500] raz: yup, for some reason nobody gets that right
[2012-01-18 13:49:00 -0500] raz: do you guys run node-name = fqdn, or do you set a separate fqdn somewhere?
[2012-01-18 13:49:00 -0500] raz: run with*
[2012-01-18 13:50:00 -0500] ashb: name = hostname (no domain) for me
[2012-01-18 13:51:00 -0500] Brad_K: we have our nodename equal to the non-qualified domain name, because our machines each have two interfaces  one on a publicly accessible network, and one on a private-only RFC1918 network (their "service network").  So, each interface will get appropriately named with an FQDN, but the machine's nodename is not qualified.
[2012-01-18 13:52:00 -0500] Brad_K: i.e., nodename == `hostname -s`
[2012-01-18 13:52:00 -0500] raz: hmm
[2012-01-18 13:53:00 -0500] Brad_K: this makes it easy for me to set my search path in my /etc/resolv.conf on my chef workstation to include the public interface network name that we have, and then "knife ssh " will work when I add a "-a name" at the end.
[2012-01-18 13:53:00 -0500] raz: i think i'll stick with name = fqdn to avoid clashes
[2012-01-18 13:53:00 -0500] Brad_K: if you have only one interface on the machine, that should be fine.  if you have multiple interfaces, that could be a problem.
[2012-01-18 13:54:00 -0500] raz: well, in our deployments one of them is always the "primary" or "public"
[2012-01-18 13:54:00 -0500] Brad_K: for us, we want all our machines to talk to each other by default over the private "service network", because traffic on that network has a higher rate limit and is not billed.  traffic on the public interface is both billed and has a lower rate limit.
[2012-01-18 13:54:00 -0500] nacer: oh Brad_K i just understand your case , the trick you use is good :)
[2012-01-18 13:54:00 -0500] BryanWB: any chefs going to FOSDEM?
[2012-01-18 13:55:00 -0500] Brad_K: i used to go to FOSDEM regularly, back when i lived in Brussels.  ;-)
[2012-01-18 13:55:00 -0500] raz: man.. someone tell the opscode idiots that a javascript download link for cookbooks is the worst idea ever
[2012-01-18 13:56:00 -0500] Brad_K: raz: i wouldn't call them idiots.  i know some of them personally, and all the ones i know are very smart people.
[2012-01-18 13:56:00 -0500] raz: Brad_K: reflexes, that link makes me furious
[2012-01-18 13:56:00 -0500] raz: how do you even come up with an idea like that..
[2012-01-18 13:57:00 -0500] Brad_K: sometimes they can be confused, or misguided, or might not fully understand the nature of a situation, but we're talking about a small and quickly growing company here, so things are constantly evolving.
[2012-01-18 13:57:00 -0500] raz: ok. someone tell the confused opscoders that they need to evolve their download links.
[2012-01-18 13:57:00 -0500] ashb: I just use knife to download the cookbooks anywy
[2012-01-18 13:57:00 -0500] BryanWB: me too
[2012-01-18 13:59:00 -0500] raz: yea that works, but i browse them on the website and fall for the fake-link every time
[2012-01-18 14:00:00 -0500] raz: Brad_K: where do you store your fqdn's for the machines, in a databag?
[2012-01-18 14:02:00 -0500] BryanWB: it never even occurred to me to click on those links
[2012-01-18 14:02:00 -0500] raz: well, they're big and orange. ;)
[2012-01-18 14:03:00 -0500] raz: it's hard for me to resists these attributes
[2012-01-18 14:03:00 -0500] Brad_K: no, we store the FQDNs in the hostname.  that gets propagated by the OS into the /etc/hosts file on the next boot.
[2012-01-18 14:04:00 -0500] Brad_K: but `hostname` returns a non-qualified name.  You only get the fully qualified name when you do a `hostname -f`.
[2012-01-18 14:04:00 -0500] raz: yes, now i'm confused
[2012-01-18 14:05:00 -0500] raz: i mean, when you setup a new host (which doesn't have the fqdn anywhere by default), where do you source the FQDN from?
[2012-01-18 14:05:00 -0500] raz: like, your recipe that fixes /etc/hosts, where does it read the fqdn from?
[2012-01-18 14:05:00 -0500] Brad_K: the FQDN gets set by taking the unqualified output from `hostname` and tacking on the private domain name.
[2012-01-18 14:06:00 -0500] raz: ahh okay
[2012-01-18 14:06:00 -0500] raz: and the domain name is a node attribute?
[2012-01-18 14:19:00 -0500] Brad_K: no, we set the domain name site-wide.
[2012-01-18 14:19:00 -0500] Brad_K: it's hard-coded.
[2012-01-18 14:27:00 -0500] raz: hrmm
[2012-01-18 14:27:00 -0500] raz: why the heck can't i access the "name" attribute of a node in a recipe
[2012-01-18 14:40:00 -0500] BryanWB: try node.name
[2012-01-18 14:41:00 -0500] raz: hm, well, i've already changed to setting the domain as an attribute in an environment
[2012-01-18 14:42:00 -0500] gmcinnes1: ahoy chefs. I'm trying to set up a recipe for doing a postgres master/slave setup. Its not easy. Any established patterns for handling nodes who depend on each other?
[2012-01-18 14:42:00 -0500] raz: but i'm still struggling to access that attribute in a search result
[2012-01-18 14:43:00 -0500] BryanWB: gmcinnes1: hey! me too
[2012-01-18 14:43:00 -0500] raz: search(:node, "*:*")[0]["dns_domain"] gives me nil
[2012-01-18 14:43:00 -0500] BryanWB: raz: what about jut domain?
[2012-01-18 14:43:00 -0500] BryanWB: gmcinnes1: i plan to use search
[2012-01-18 14:44:00 -0500] raz: Brad_K: that might work, but i specifically want dns_domain (which is my custom attribute)
[2012-01-18 14:44:00 -0500] raz: in knife search node "*:*" -F json it shows up under "default" -> "dns_domain"
[2012-01-18 14:45:00 -0500] gmcinnes1: BryanWB: go on...
[2012-01-18 14:45:00 -0500] BryanWB: gmcinnes1: i will probably give the pg master the role  role[pg_master]  and the slaves  role[pg_slave]
[2012-01-18 14:46:00 -0500] BryanWB: so for slave configuration, in recipe   search(:node, "role:pg_master")
[2012-01-18 14:47:00 -0500] yfeldblum: BryanWB, in that case, i'd recommend that the two roles both add the same recipe to the run-list, but the pg_master role simply assigns a "master" default attribute and the pg_slave role simply assigns a "slave" default attribute, and then the search simply searches based on the expected attribute rather than on the run-list or roles
[2012-01-18 14:47:00 -0500] yfeldblum: search(:node, "postgresql_server_master:true") or some such
[2012-01-18 14:48:00 -0500] yfeldblum: the reason is, that technique preserves the layering of cookbooks at the bottom and roles at the top, where things at the top are permitted to know about things below them but things at the bottom are not permitted to know about things above them
[2012-01-18 14:49:00 -0500] BryanWB: yfeldblum: so an attribute then
[2012-01-18 14:49:00 -0500] BryanWB: yfeldblum: good morning my dear Cylon!
[2012-01-18 14:49:00 -0500] yfeldblum: morning, BryanWB
[2012-01-18 14:50:00 -0500] raz: ffs.. how do i access a node attribute from a search result?
[2012-01-18 14:50:00 -0500] BryanWB: but i am convinced u sleep so thus are not a cylon :(
[2012-01-18 14:50:00 -0500] yfeldblum: just for a few hours
[2012-01-18 14:50:00 -0500] gmcinnes1: yfeldblum: see, now this is exactly the kind of style guide I was talking about :)
[2012-01-18 14:55:00 -0500] gmcinnes1: BryanWB: That's basically the approach I'm taking. My problem is more pg specific.  There's an obtuse dance you have to do to get the slave up, involving copying directories from the master to the slave etc.
[2012-01-18 14:56:00 -0500] gmcinnes1: And obviously there's timing, since the slave can't come up before the master is built etc.
[2012-01-18 14:58:00 -0500] ranjibd: BryanWB, recently i have started migrating all orchestration to mcollective,,, specially systems which has master , slave or other cross server dependencies
[2012-01-18 14:58:00 -0500] BryanWB: gmcinnes1: well i know chef quite well but nothing about pg, so it would be great if we could collaborate
[2012-01-18 14:59:00 -0500] yfeldblum: gmcinnes1: might want to make the slave part of your recipe fault-tolerant of the master being undefined in chef, and fault-tolerant of the master being defined in chef but down
[2012-01-18 15:01:00 -0500] gmcinnes1: yfeldblum: maybe by June :)
[2012-01-18 15:02:00 -0500] gmcinnes1: BryanWB: I know next to nothing about either, but I'm learning!  Happy to collaborate though.  I'll push up what I have once it sorta works.
[2012-01-18 15:04:00 -0500] BryanWB: ranjibd: but can't i make the postgres init scripts robust enough so I don't have to go the trouble of setting up mcollective?
[2012-01-18 15:05:00 -0500] yfeldblum: gmcinnes1, just a couple branches in your recipe :P ... if !chef_server_has_pg_master then ... else if !pg_master_discovered_alive then ... else ... end
[2012-01-18 15:05:00 -0500] theozaurus: Is anyone else having difficulty with the search command? We are running chef-client and we keep getting 500 errors on the search directive.
[2012-01-18 15:11:00 -0500] gmcinnes1: yfeldblum: Yeah. Not hard.  It's just that there's so much silly walking in terms of permissions and syncing and blah blah blah to get this going.
[2012-01-18 15:14:00 -0500] yfeldblum: gmcinnes1, sounds like a pain ...
[2012-01-18 15:16:00 -0500] gmcinnes1: yfeldblum: tis. Maybe once I get it working you and BryanWB would be kind enough to look for ways to make it more elegant
[2012-01-18 15:18:00 -0500] BryanWB: gmcinnes1: r u using connection pooling too? our dba insists i set up pg_bouncer
[2012-01-18 15:21:00 -0500] gmcinnes1: BryanWB: No. Doing very "simple" log shipping replication for a warm standby.  pg has nothing if not a lot of options.
[2012-01-18 15:28:00 -0500] rweng: hi. in a cookbook, do the files in the libraries path get required automatically?
[2012-01-18 15:35:00 -0500] yfeldblum: rweng, yes
[2012-01-18 15:36:00 -0500] rweng: hm, strange. on the opscode website it says that chef is os x compatible, but it doesn't seem that way. First, the libraries files are not required automatically on os x, second, attributes like cpu[:total] are not available.
[2012-01-18 15:37:00 -0500] yfeldblum: rweng, perhaps ohai extracts different information from different operating systems, and libraries are only available if the cookbook containing the libraries is somehow required/included
[2012-01-18 15:47:00 -0500] atomic-penguin: Has anyone installed commvault simpana agents with Chef?
[2012-01-18 16:43:00 -0500] statix: Is there some kind of reference or way to list the variables available in bootstrap templates?
[2012-01-18 16:44:00 -0500] ranjibd:  statix variable?  are you looking for command line flags ?
[2012-01-18 16:45:00 -0500] ranjibd: bootstrap?
[2012-01-18 16:45:00 -0500] bawt: bootstrap is setting up your system to use Chef. You can 'bootstrap' a Chef RubyGems installation to install a Chef server, or use the knife bootstrap subcommand on new clients.
[2012-01-18 16:45:00 -0500] ranjibd: fujin, this is insane :-)
[2012-01-18 16:45:00 -0500] statix: No, info on the variables that can be referenced in scripts like these
[2012-01-18 16:45:00 -0500] statix: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/ubuntu10.04-apt.erb
[2012-01-18 16:46:00 -0500] statix: eg. apparently @config[:chef_node_name] refers to the -N bootstrap command-line argument, but that is not obvious
[2012-01-18 16:47:00 -0500] ranjibd: ok.. so u can get the full list of keys for @config hash.. i dont know  any reference.. but in irb u can check it
[2012-01-18 16:48:00 -0500] ranjibd: Chef::Config.from_file(ur irb file)
[2012-01-18 16:48:00 -0500] ranjibd: p Chef::Config
[2012-01-18 16:48:00 -0500] ranjibd: this will enlist all the key value pairs inside config hash
[2012-01-18 16:51:00 -0500] statix: Ok, thank you. Now to figure out how to go about that ;)
[2012-01-18 16:52:00 -0500] statix: <-- Not-so-Ruby experienced
[2012-01-18 16:55:00 -0500] ranjibd: statix, http://ranjib.posterous.com/
[2012-01-18 17:01:00 -0500] statix: Ok, I think I've managed that through shef
[2012-01-18 17:32:00 -0500] Andorbal: has anyone run into a problem installing knife-windows where you get an error "undefined method 'gsub'" while building documentation for rubyntlm?
[2012-01-18 17:48:00 -0500] jtimberman: rweng: what yfeldblum said is correct, not all operating systems are created equally, so the default attributes detected by ohai may differ by platform.
[2012-01-18 17:49:00 -0500] jtimberman: rweng: chef most certainly does work on OS X, though, I manage 3 workstations at my house with it :)
[2012-01-18 17:50:00 -0500] yfeldblum: jtimberman, re "what yfeldblum said is correct", mind if i use that repeatedly and out of context? :P
[2012-01-18 17:50:00 -0500] jtimberman: yfeldblum: ha!
[2012-01-18 17:51:00 -0500] jtimberman: yfeldblum: I don't mind ;)
[2012-01-18 17:54:00 -0500] c_t: what's the strangest OS supported by chef & ohai, anyway?
[2012-01-18 17:54:00 -0500] c_t: "strange" being somewhat relative I suppose
[2012-01-18 17:54:00 -0500] cwj: windows
[2012-01-18 17:54:00 -0500] cwj: ;)
[2012-01-18 17:54:00 -0500] hbarnes: c_t: Windows
[2012-01-18 17:54:00 -0500] hbarnes: yeah
[2012-01-18 17:54:00 -0500] hbarnes: all at once
[2012-01-18 18:03:00 -0500] ranjibd: jtimberman, any update on opscode's presence on rubyconf ?
[2012-01-18 18:03:00 -0500] ranjibd: *in rubyconf
[2012-01-18 18:04:00 -0500] jtimberman: ranjibd: in India? I don't have any update.
[2012-01-18 18:04:00 -0500] jtimberman: That doesn't mean someone else doesn't :)
[2012-01-18 18:04:00 -0500] ranjibd: jtimberman, yes.. RubyConf india..
[2012-01-18 18:05:00 -0500] ranjibd: jtimberman, we got 3 proposals on chef .. lets see if ola/nick/pratik consider them ...
[2012-01-18 18:11:00 -0500] jtimberman: ranjibd: Cool :)
[2012-01-18 18:12:00 -0500] ranjibd: jtimberman, for opscode's participation with whom i should talk?
[2012-01-18 18:15:00 -0500] rfuentes: Hi
[2012-01-18 18:15:00 -0500] rfuentes: everybody.
[2012-01-18 18:15:00 -0500] rfuentes: I have a small issue with chef...
[2012-01-18 18:16:00 -0500] rfuentes: i'm doing: knife bootstrap 171.11.11179 distro centos5-gems
[2012-01-18 18:16:00 -0500] rfuentes: on my workstation
[2012-01-18 18:17:00 -0500] rfuentes: and on the server, with chef-client, I receive:  Errno::ECONNREFUSED: Connection refused - Connection refused connecting to localhost:4000 for /clients, giving up
[2012-01-18 18:17:00 -0500] rfuentes: I'm been searching, but I can't found relevant info.
[2012-01-18 18:17:00 -0500] rfuentes: anyone? :-)
[2012-01-18 18:18:00 -0500] ranjibd: in your knife config , whats the value of chef_server_url
[2012-01-18 18:18:00 -0500] ranjibd: rfuentes, your chef server is located on the same workstation ?
[2012-01-18 18:20:00 -0500] rfuentes: no ranjibd, is separated.
[2012-01-18 18:20:00 -0500] rfuentes: on the workstation, the .chef/knife.rb file, exists, but is empty
[2012-01-18 18:20:00 -0500] rfuentes: and in the server, the .chef directory, doesn't exist
[2012-01-18 18:21:00 -0500] ranjibd: so  u need to pass the chef server url via a command line flag,, or just knife configure -i
[2012-01-18 18:22:00 -0500] ranjibd: fujin, can i use bawt to show knife command --help
[2012-01-18 18:22:00 -0500] rfuentes: in the workstation, or in the server?
[2012-01-18 18:22:00 -0500] ranjibd: rfuentes, in the  workstation, from where you are executing knife
[2012-01-18 18:22:00 -0500] rfuentes: ok ok
[2012-01-18 18:22:00 -0500] rfuentes: thanks ranjibd :-)
[2012-01-18 18:32:00 -0500] dajia: btm:  Thanks for your help yesterday on my ohai attribute issue.  I've now confirmed that the problem is occuring on the Chef server as well, which was not installed by Omnibus.  On neither of the OEL servers I've checked is this attribute showing up when ohai runs.
[2012-01-18 19:09:00 -0500] bemu: Anyone else using the edelight mongodb cookbook?
[2012-01-18 19:25:00 -0500] alex__: Anyone can help with syntax for searching for node attributes from a recipe?  My attribute is burried like :testattr:cluster:name  I want to extract the value for name from testattr:cluster:name .With knife I can search with : knife search node 'testattr*cluster*name:test'  How do I do in a recipe? Thanks!
[2012-01-18 19:28:00 -0500] miah: moin
[2012-01-18 19:28:00 -0500] jbz: alex__: http://wiki.opscode.com/display/chef/Search
[2012-01-18 19:29:00 -0500] jbz: alex__:  More specifically, http://wiki.opscode.com/display/chef/Search#Search-UsingSearchinRecipes
[2012-01-18 19:31:00 -0500] ranjibd: alex__, search(:node,"a_b_c_d:val") , for node.a.b.c.d==val
[2012-01-18 19:31:00 -0500] alex__: I read this link.  it shows how to seach for a key in my case I can search for 'name' with  search(:node, "name:test") but I'm looking for the full key name.
[2012-01-18 19:31:00 -0500] ranjibd: each nesting translated into a _ in solr , and / in ohai
[2012-01-18 19:32:00 -0500] alex__: ranjibd, thanks!! look like it works.
[2012-01-18 19:33:00 -0500] alex__: thanks ranjibd and jbz!
[2012-01-18 19:33:00 -0500] jbz: heh thanks ranjibd!
[2012-01-18 19:35:00 -0500] ranjibd: search?
[2012-01-18 19:35:00 -0500] bawt: search is http://wiki.opscode.com/display/chef/Search
[2012-01-18 19:35:00 -0500] ranjibd: u saw that jbz ? thats fujin's trippy bot
[2012-01-18 19:35:00 -0500] ranjibd: jbz?
[2012-01-18 19:35:00 -0500] bawt: jbz is 100% right
[2012-01-18 19:35:00 -0500] ranjibd: lol
[2012-01-18 19:37:00 -0500] jbz: heh indeed, bawt rules.
[2012-01-18 19:37:00 -0500] jbz: wait, what?!??! Hahahah NO I'M NOT
[2012-01-18 19:38:00 -0500] atomic-penguin: ranjibd?
[2012-01-18 19:38:00 -0500] bawt: ranjibd is right. somehow the nodes are now reporting their FQDN incorrectly...
[2012-01-18 19:39:00 -0500] ranjibd: fujin?
[2012-01-18 19:39:00 -0500] bawt: fujin is the resident git ninja and looks cute with a neck beard
[2012-01-18 19:39:00 -0500] atomic-penguin: atomic-penguin?
[2012-01-18 19:39:00 -0500] ranjibd: holoway?
[2012-01-18 19:39:00 -0500] bawt: holoway is that gist sane
[2012-01-18 19:39:00 -0500] ranjibd: atomic-penguin?
[2012-01-18 19:39:00 -0500] ranjibd: eh... bug ??
[2012-01-18 19:39:00 -0500] c_t: no love for atomic-penguin
[2012-01-18 19:39:00 -0500] atomic-penguin: atomic-penguin is fucking awesome
[2012-01-18 19:39:00 -0500] ranjibd: lolz
[2012-01-18 19:40:00 -0500] jbz: atomic_penguin is BOT INVISIBLE
[2012-01-18 19:40:00 -0500] atomic-penguin: c_t?
[2012-01-18 19:40:00 -0500] ranjibd: c_t is hollow man
[2012-01-18 19:44:00 -0500] ranjibd: alex__?
[2012-01-18 19:45:00 -0500] atomic-penguin: ranjibd is easily amused.
[2012-01-18 19:48:00 -0500] yfeldblum: yfeldblum?
[2012-01-18 19:48:00 -0500] bawt: yfeldblum is right
[2012-01-18 19:58:00 -0500] yfeldblum: Infrastructure As Application vs Infrastructure As Code. Discuss.
[2012-01-18 20:00:00 -0500] jbz: Infrastructure as Application is packaged for endusers.  INfrastructure as Code requires those smart enough and familiar enough with it to utilize properly, but still lifts you above requiring metal.
[2012-01-18 20:00:00 -0500] jbz: The latter is more flexible but has a steeper learning curve/implementation curve.  The former is easier to deploy (Heroku) but less flexible.
[2012-01-18 20:06:00 -0500] brett_h: can someone tell me what I'm doing wrong with --freeze here? http://dpaste.com/689885/
[2012-01-18 20:09:00 -0500] jbz: brett_h: And if you do a full cookbook list it' sdefinitely not in there?
[2012-01-18 20:09:00 -0500] brett_h: jbz: like with -a? right, it's definitely not there and never has been
[2012-01-18 20:12:00 -0500] jbz: brett_h: Does it upload if you don't --freeze it?
[2012-01-18 20:12:00 -0500] jbz: brett_h: Alternately, try the first upload with both --freeze and --force :-P
[2012-01-18 20:13:00 -0500] brett_h: force works, and not doing freeze works
[2012-01-18 20:13:00 -0500] brett_h: but forcing kind of defeats the purpose :)
[2012-01-18 20:13:00 -0500] brett_h: I can upload normally, then freeze it
[2012-01-18 20:14:00 -0500] brett_h: guess it's just a bug
[2012-01-18 20:14:00 -0500] jbz: Yeah, I'd file that
[2012-01-18 20:14:00 -0500] Urocyon: I'd like to add a masquerade rule to iptables... not sure of the best way to do this with chef and make the configuration idempotent.
[2012-01-18 20:15:00 -0500] jbz: Urocyon: it's hard.  What distro are you on?  Can you front-end it with ufw?
[2012-01-18 20:15:00 -0500] yfeldblum: Urocyon, 1) try the "firewall" cookbook or 2) check out the firewall software "shorewall" which has idempotent file-based configuration
[2012-01-18 20:15:00 -0500] jbz: Urocyon:  If you *have* to use iptables, you can try shoehorning a check into not_if
[2012-01-18 20:16:00 -0500] Urocyon: natty.   I didn't think there were masq commands in ufw, that you had to modify the pre and post routing scripts.
[2012-01-18 20:16:00 -0500] jbz: Oh, masq.  My severe bad. :-P
[2012-01-18 20:17:00 -0500] Urocyon: I've been using shorewall for firewall settings, though I was looking at moving to the firewall cookbook.
[2012-01-18 20:19:00 -0500] Urocyon: I suppose I could add in my own versions of /etc/default/ufw and etc/ufw/before.rules
[2012-01-18 20:35:00 -0500] spicyWith: jtimberman: is there a good reason node configurations aren't stored in code/json somewhere in your chef-repo?
[2012-01-18 20:39:00 -0500] spicyWith: I'm thinking something along the lines of what littlechef (https://github.com/tobami/littlechef) does with nodes
[2012-01-18 20:42:00 -0500] yfeldblum: spicyWith, i would say that, for the client/server model, per-node configuration data is "variable data" suitable for being stored in a database, but not suitable for being stored ina  codebase
[2012-01-18 20:43:00 -0500] spicyWith: yfeldblum: I guess that's a valid point, although it makes it a lot harder to replicate environments easily
[2012-01-18 20:43:00 -0500] yfeldblum: spicyWith, indeed, it is best to configure every node with a single role, or at least to come very close to this model, without changing any per-node attributes manually
[2012-01-18 20:43:00 -0500] yfeldblum: spicyWith, chef is hard
[2012-01-18 20:44:00 -0500] RobbieAB: yfeldblum: Is every node different to all the others? :o
[2012-01-18 20:44:00 -0500] yfeldblum: spicyWith, what do you mean by "replicate environments"?
[2012-01-18 20:45:00 -0500] yfeldblum: RobbieAB, it is best to try not to have snowflakes
[2012-01-18 20:45:00 -0500] RobbieAB: I know. That was why we kept some stuff outside chef.
[2012-01-18 20:47:00 -0500] yfeldblum: RobbieAB, speaking of which, yes, there is nothing that says the entire configuration of a node must be in chef; often it's useful to get every node configured just a little bit with chef, e.g. every node has NTP and SSH installed and configured the same way, and then go from there
[2012-01-18 20:48:00 -0500] yfeldblum: RobbieAB, and then install applications or databases or web servers or whatever manually until you figure out how to get them into chef
[2012-01-18 20:48:00 -0500] spicyWith: yfeldblum: by environments I mean prod (EC2) vs dev (vagrant)
[2012-01-18 20:48:00 -0500] RobbieAB: yfeldblum: *nods* Thats how we started. We are moving towards unique chef set-ups now, simply for the ability to use the central config repo.
[2012-01-18 20:51:00 -0500] jaimef: is there a way to validate erb templates?
[2012-01-18 20:52:00 -0500] ranjibd: jaimef, yup
[2012-01-18 20:54:00 -0500] brett_h: I don't quite understand depends vs include_recipe, if you make something a dep will it actually be "run" beforehand in any sense?
[2012-01-18 20:54:00 -0500] jaimef: ok, let me rephrase, how do I validate a template? getting a undef [] on nil
[2012-01-18 20:54:00 -0500] jaimef: trying to cook
[2012-01-18 20:55:00 -0500] yfeldblum: brett_h, "depends" ensures the cookbook is downloaded to the node; "include_recipe" runs a single recipe out of the multiple recipes that are actually present in the cookbook
[2012-01-18 20:56:00 -0500] brett_h: yfeldblum: how is apt_repository available in this recipe, then? https://github.com/opscode/cookbooks/blob/master/java/recipes/sun.rb#L35
[2012-01-18 20:56:00 -0500] brett_h: yfeldblum: I don't see it included, apt is just a dep
[2012-01-18 20:57:00 -0500] yfeldblum: brett_h, apt_repository is either a definition, library, or resource/provider; those are automatically loaded as soon as a cookbook is loaded, and cookbook X is loaded before cookbook Y if cookbook Y depends on cookbook X
[2012-01-18 21:00:00 -0500] statix: FWIW, I just had to apply this manually; seems pretty essential : https://github.com/opscode/knife-ec2/pull/28
[2012-01-18 21:01:00 -0500] ranjibd: jaimef, no easy way actually.. for a dynamic language
[2012-01-18 21:05:00 -0500] dajia: Hello, all.  I'm having a heck of an ohai problem.  I have placed a known-working ohai plugin in /etc/ohai/plugins and added this line to client.rb: Ohai::Config[:plugin_path] << '/etc/ohai/plugins'        However, when I run ohai, the attribute returned is not listed.
[2012-01-18 21:10:00 -0500] dajia: If I move the plugin into /usr/lib/ruby/gems/1.8/gems/ohai-0.6.10/lib/ohai/plugins then it works.  But why?
[2012-01-18 21:14:00 -0500] ssd7: dajia: I know you've gone over this a bit before in here, but to bring me back up to speed, but does: ohai -d /etc/ohai/plugins also not work?
[2012-01-18 21:15:00 -0500] geekbri: If i entered the wrong hostname went installing chef through the apt package, is there a way to repair this broken install? if i simply changed the hostname to what i entered.... can i just restart the services and things will work like magic?
[2012-01-18 21:17:00 -0500] fujin: ranjibd: no, bawt doesn't know about knife.. but since it is ruby, potentially it could I suppose
[2012-01-18 21:17:00 -0500] fujin: maybe it could show rdoc or something.
[2012-01-18 21:17:00 -0500] dajia: ssd7:  Yes, that does work.  But without that (i.e. as part of a regular chef or ohai run) it does not.
[2012-01-18 21:18:00 -0500] dajia: geekbri:  Do you mean you mis-entered the node name?
[2012-01-18 21:18:00 -0500] dajia: ssd7:  Also, if I copy the plugin rb file into the gem directory, it works.
[2012-01-18 21:19:00 -0500] geekbri: dajia: I was doing an apt-get install chef-server, and it asked for the hostname, and i made a typo.  Now a bunch of the services (including web-ui) won't start.  The error is that the /etc/chef/validation.pem and /etc/chef/client.pem do'nt exist.  Im wondering if there is a way to regenerate these.
[2012-01-18 21:19:00 -0500] ssd7: dajia: Would you mind create a gist with a debug log of a chef-client run that isn't working as expected with Ohai::Config set in client.rb?  Really, I just need to see everything that ohai spits out at the beginning
[2012-01-18 21:20:00 -0500] dajia: Do you want debug of chef-client or ohai?
[2012-01-18 21:23:00 -0500] ssd7: chef-client
[2012-01-18 21:23:00 -0500] geekbri: even worse, it seems like chef-expander _seems_ to start fine, but actually becomes a zombie proccess
[2012-01-18 21:24:00 -0500] ssd7: dajia: I am unsure if this was always the case, but as far as I know, ohai will not look at /etc/chef/client.rb when run independently
[2012-01-18 21:25:00 -0500] dajia: That seems odd to me.
[2012-01-18 21:28:00 -0500] aurigus: I would like to bring chef into my datacenter environment to manage lots of servers. does anyone have a link to a good tutorial about how the client/server notion of chef works? I've followed the tutorial on the wiki but still a bit confused about the pieces and how they work together
[2012-01-18 21:29:00 -0500] ssd7: aurigus: You might check out the "Chef Basics" section of the wiki.  Perhaps this: http://wiki.opscode.com/display/chef/Architecture+Introduction
[2012-01-18 21:29:00 -0500] dajia: ssd7:  I'm going to have to set up a test and get back to you.  I had shut that system down thinking I would kickstart it and start over.  This was when it seemed possible that it was related to the omnibus installer, which I've now largely ruled out.
[2012-01-18 21:30:00 -0500] aurigus: I've read that but still have a hard time following. Maybe I'm just slow ;)
[2012-01-18 21:31:00 -0500] ssd7: dajia: Sounds good. Yeah, I just took a quick peak at the code and unless it is alluding me, client.rb isn't read by ohai directly, so in your case I would expect your plugin to work inside a chef-client run but not when calling ohai directly (unless you call it with -d)
[2012-01-18 21:31:00 -0500] jbz: aurigus:  What's confusing you first, when you go through that stuff
[2012-01-18 21:31:00 -0500] jbz: ?
[2012-01-18 21:32:00 -0500] ssd7: aurigus: Heh, probably not slow, we just recently rearranged stuff so I want to make sure people have a sense of where the relevant articles are.
[2012-01-18 21:35:00 -0500] aurigus: Well - I'll just give you a run-through of what I've done. So I've installed Chef-server fine. I've added the same system as a node. I've loaded up a cookbook from the community site to the server and added it to the run-list for the node.
[2012-01-18 21:38:00 -0500] aurigus: it seems to have run on the server, but with an error
[2012-01-18 21:38:00 -0500] RobbieAB: What is the error?
[2012-01-18 21:38:00 -0500] aurigus: so now, I don't really know how to troubleshoot that cookbook or install a new version from the opscode community site
[2012-01-18 21:39:00 -0500] aurigus: It downloads fine but won't install
[2012-01-18 21:39:00 -0500] aurigus: # knife cookbook site install zabbix
[2012-01-18 21:39:00 -0500] aurigus: Installing zabbix to /var/chef/cookbooks
[2012-01-18 21:39:00 -0500] aurigus: ERROR: The default branch 'master' does not exist
[2012-01-18 21:39:00 -0500] aurigus: probably need to fix my git install
[2012-01-18 21:40:00 -0500] RobbieAB: hmm... Sounds like a git issue
[2012-01-18 21:40:00 -0500] ssd7: Ahhh, I see.  Have you made any commits to your repository yet?
[2012-01-18 21:40:00 -0500] bemu: Sorry to ask again, but has anyone played with the edelight mongodb cookbook?
[2012-01-18 21:40:00 -0500] hippiehacker: is there a chef way to set file permissions on windows?
[2012-01-18 21:41:00 -0500] ssd7: hippiehacker: In Chef master, yes.  In the current release, you can get it done but it is hacky.
[2012-01-18 21:41:00 -0500] bemu: yfeldblum: Ping!
[2012-01-18 21:43:00 -0500] aurigus: I need to investigate more about how git and chef live together. Thanks for the tips guys :)
[2012-01-18 21:45:00 -0500] hbarnes: aurigus: i've been helping with the zabbix cookbook lately. If you have problems with it specifically, I might be able to help.
[2012-01-18 21:45:00 -0500] aurigus: nothing in particular, I am just beginning and there is an overwhelming amount of information there
[2012-01-18 21:45:00 -0500] spicyWith: what is the course of action if one of your nodes (i.e. a server) goes rogue on you and you have to blast it off the face of the earth to start with a new one?
[2012-01-18 21:45:00 -0500] aurigus: Plus I am hosting my own chef server, and a lot of the articles are geared towards Hosted Chef
[2012-01-18 21:45:00 -0500] spicyWith: (from a chef perspective how does that work?)
[2012-01-18 21:46:00 -0500] aurigus: gotta run, thanks hbarnes
[2012-01-18 21:46:00 -0500] hbarnes: spicyWith: here's how I do it: knife node delete -y dev-vagrant-harlan; knife client delete -y dev-vagrant-harlan;
[2012-01-18 21:46:00 -0500] RobbieAB: I wouldn't delete the node.
[2012-01-18 21:46:00 -0500] hbarnes: where dev-vagrant-harlan is my node / client name, of course.
[2012-01-18 21:46:00 -0500] hbarnes: RobbieAB: orly?
[2012-01-18 21:46:00 -0500] RobbieAB: Keep the node spec, so when you wipe the server and reinstall, it ge's picked up
[2012-01-18 21:47:00 -0500] jbz: RobbieAB: Then do you have to manually associate the new server's new-registered client with that node?
[2012-01-18 21:47:00 -0500] RobbieAB: Not if they have the same name.
[2012-01-18 21:47:00 -0500] jbz: Hmmmm.
[2012-01-18 21:47:00 -0500] jbz: Ah, I see.  We use EC2 nodes which have their instance ID in their names, so that wouldn't work for us. :-)
[2012-01-18 21:47:00 -0500] spicyWith: hbarnes: right. So you would have to launch another instance and specify all the run list and such. You can't just say: "this should be the same node, just a different server" - I'm also thinking of how you would upgrade server, i.e. going from a small to large instance
[2012-01-18 21:48:00 -0500] hbarnes: spicyWith: destroy the instance and run again?
[2012-01-18 21:48:00 -0500] spicyWith: RobbieAB: please elaborate, you speak interesting words
[2012-01-18 21:48:00 -0500] RobbieAB: spicyWith: You can, just keep the node name the same. All you need to do is remove the client
[2012-01-18 21:48:00 -0500] spicyWith: RobbieAB: node name from who's perspective? i.e. does it work on ec2?
[2012-01-18 21:49:00 -0500] RobbieAB: The chef central server, based on my observations of how ours behaves, has two components for a client server.
[2012-01-18 21:49:00 -0500] RobbieAB: It has a client, which controls authentication, and a node which details stuff like runlists and attributes.
[2012-01-18 21:50:00 -0500] RobbieAB: If your client server get's compromised, you can just remove the client spec from the central server, and re-register the client server with the same node name
[2012-01-18 21:51:00 -0500] RobbieAB: And it automatically picks up the node spec.
[2012-01-18 21:51:00 -0500] timsmith: Question on the use of include_recipe.  Does include_recipe perform the same function as including a recipe in a role or run list?
[2012-01-18 21:51:00 -0500] RobbieAB: (At least, that is the behaviour we see)
[2012-01-18 21:51:00 -0500] yfeldblum: spicyWith, i delete the node, client and actual server, and start fresh ... i don't do anything where i hardcode node names - it's all by search
[2012-01-18 21:52:00 -0500] jbz: ...what yfeldblum said
[2012-01-18 21:52:00 -0500] ssd7: spicyWith: Note also, that reusing nodes like that can cause authorization issues if you are on Hosted Chef,
[2012-01-18 21:53:00 -0500] yfeldblum: spicyWith, also, all of my node names have a random component given by `openssl rand -hex 4` so that i can be pretty sure it's unique
[2012-01-18 21:53:00 -0500] yfeldblum: spicyWith, as ssd7 pointed out, reusing node names can be bad in edge cases, so this just avoids the possibility
[2012-01-18 21:54:00 -0500] RobbieAB: spicyWith: Basically, if you blow away everything in the server it's guaranteed to work.
[2012-01-18 21:54:00 -0500] RobbieAB: But for some set-ups, you can get away with being "lazy".
[2012-01-18 21:55:00 -0500] cwj: is modifying the _default environment not allowed? I am using hosted chef and getting "Response: Merb::ControllerExceptions::MethodNotAllowed" when i attempt to `knife environment from file default.json`
[2012-01-18 21:55:00 -0500] yfeldblum: if you are doing chef right and completely, standing up any new node in any role for which you have previously defined any necessary roles, envs, data bags, etc., should be just a few commands and done
[2012-01-18 21:56:00 -0500] patcon: hbarnes: knife-playground gem has a "knife pg clientnode delete" command, if that makes for slightly less typing with your approach :)
[2012-01-18 21:56:00 -0500] hbarnes: patcon: ohhh. nifty. gonna go take a look.
[2012-01-18 21:57:00 -0500] patcon: RobbieAB: and thanks for that tip on leaving nodes. that's totally helpful
[2012-01-18 21:57:00 -0500] RobbieAB: patcon: I discovered it after we managed to rather spectacularly break our instance.
[2012-01-18 21:58:00 -0500] gmcinnes1: does anyone else experience the occasional seggie on CentOS 6?
[2012-01-18 21:59:00 -0500] spicyWith: RobbieAB: yfeldblum jbz ssd7 thanks. Trying to think the chef way here.. how would you deal with the case of having to upgrade a server, for example?
[2012-01-18 21:59:00 -0500] yfeldblum: spicyWith, what do you mean by "upgrade"?
[2012-01-18 21:59:00 -0500] RobbieAB: ^ ++
[2012-01-18 21:59:00 -0500] patcon: RobbieAB: haha i'm going to assume that "rather spectacularly" connotes something way over-the-top. Like rewriting every file in /etc with ASCII pictures of clowns
[2012-01-18 22:00:00 -0500] RobbieAB: patcon: Like managing to break the authentication on half our servers...
[2012-01-18 22:00:00 -0500] yfeldblum: ascii pictures of clowns is: http://www.chris.com/ascii/index.php?art=people%2Foccupations%2Fclowns
[2012-01-18 22:00:00 -0500] spicyWith: yfeldblum: substitute instance A with instance B which should run the same software, but on moar hardware
[2012-01-18 22:00:00 -0500] RobbieAB: With a whole bunch of weird, not very clever, per-node tweaks..
[2012-01-18 22:01:00 -0500] spicyWith: yfeldblum: awesome, those are mexican clowns :)
[2012-01-18 22:01:00 -0500] yfeldblum: spicyWith, add instance B to whatever cluster it is, perform any cluster additions for B, perform any cluster removes for A, delete instance A
[2012-01-18 22:01:00 -0500] RobbieAB: So that rebuilding the node specs would have been several days work. :(
[2012-01-18 22:02:00 -0500] yfeldblum: spicyWith, e.g. if app servers, spin up B, add B to the load-balancers, remove A from the load-balancers, spin down A
[2012-01-18 22:03:00 -0500] patcon: yfeldblum spicyWith: haha oh man.. i love you, internet.
[2012-01-18 22:03:00 -0500] RobbieAB: spicyWith: Depends, are you migrating the OS or rebuilding the OS?
[2012-01-18 22:04:00 -0500] spicyWith: yfeldblum: hmmm, ok. Trying to think, what about a DB server, where there shouldn't be two instances running but B should substitute A
[2012-01-18 22:04:00 -0500] spicyWith: RobbieAB: rebuilding, I would say
[2012-01-18 22:04:00 -0500] spicyWith: RobbieAB: yfeldblum never done this, so just trying to do it as an exercise
[2012-01-18 22:05:00 -0500] RobbieAB: spicyWith: Well... If it's the DB server, I would cry. :p
[2012-01-18 22:05:00 -0500] RobbieAB: For the app server, with a rebuild, I would take yfeldblums path.
[2012-01-18 22:05:00 -0500] yfeldblum: spicyWith, spin up B, take a backup from A and restore on B, switch everything to use B, spin down A
[2012-01-18 22:06:00 -0500] spicyWith: RobbieAB: yeah, for the app the yfeldblum approach sounds good
[2012-01-18 22:06:00 -0500] yfeldblum: spicyWith, with a lot of testing thrown in, and spinning down A only after a period where B has been stable
[2012-01-18 22:06:00 -0500] RobbieAB: For the DB, I would prefer to migrate the OS if possible.
[2012-01-18 22:06:00 -0500] yfeldblum: spicyWith, preferably, use a clusterable db :)
[2012-01-18 22:07:00 -0500] hbarnes: RobbieAB: I didn't quite follow earlier when you said "rebuilding the node specs" what does that entail? Do you mean doing a re-kick/install of the OS itself?
[2012-01-18 22:08:00 -0500] spicyWith: yfeldblum: is that switch done at the chef level - i.e. there is a data bag that contains the server or changing code? chef level sounds best to me, but not sure if possible,
[2012-01-18 22:09:00 -0500] yfeldblum: spicyWith, the particular mechanism is likely to be tricky
[2012-01-18 22:09:00 -0500] yfeldblum: spicyWith, and you may want to institute e.g. a readonly mode or maintenance downtime while you do this
[2012-01-18 22:09:00 -0500] RobbieAB: hbarnes: I meant rebuilding the run-list, and than making a whole bunch of tweaks to half the nodes with knife.
[2012-01-18 22:09:00 -0500] RobbieAB: (Our set-up is a bit of a mess)
[2012-01-18 22:09:00 -0500] hbarnes: Ahh, I got it.
[2012-01-18 22:10:00 -0500] RobbieAB: I'm slowly trying to clean it up, but time to invest in polishing chef when it "works" is hard to find.
[2012-01-18 22:12:00 -0500] hbarnes: Yeah, I know the feeling.
[2012-01-18 22:23:00 -0500] gmcinnes1: do attributes get rolled back from chef server if a chef client run fails?
[2012-01-18 22:24:00 -0500] macros: They don't get persisted to the server until the end of a successful run
[2012-01-18 22:24:00 -0500] gmcinnes1: ah. bugger.
[2012-01-18 22:26:00 -0500] fujin: *unless* you use node.save explicitly in compile time
[2012-01-18 22:27:00 -0500] jbz: Yeah, big raspberry for not persisting at the start of a run :-P
[2012-01-18 22:27:00 -0500] timsmith: how would you go about adding the node.save?
[2012-01-18 22:28:00 -0500] fujin: if you have to ask you probably don't need it.
[2012-01-18 22:28:00 -0500] timsmith: this causes us a lot of problems
[2012-01-18 22:28:00 -0500] tpot: gmcinnes1: yeah that behaviour stumped me for a few hours before i figured it out
[2012-01-18 22:28:00 -0500] timsmith: during system builds
[2012-01-18 22:28:00 -0500] fujin: it's fine. once a node is saved, it is indexed, and searchable.. one might assume it was operational if it was saved
[2012-01-18 22:28:00 -0500] fujin: you guys are doing it wrong
[2012-01-18 22:28:00 -0500] gmcinnes1: saving at the end is probably the RIGHT THING (TM)
[2012-01-18 22:29:00 -0500] gmcinnes1: but I have a race condition in dependencies between nodes that I'm having a hard time solving.
[2012-01-18 22:30:00 -0500] fujin: heh
[2012-01-18 22:30:00 -0500] gmcinnes1: you said it :)
[2012-01-18 22:30:00 -0500] fujin: use the right tool for the job
[2012-01-18 22:31:00 -0500] gmcinnes1: a sledgehammer?
[2012-01-18 22:31:00 -0500] gmcinnes1: or crossbow?
[2012-01-18 22:31:00 -0500] yfeldblum: gmcinnes1, what's the race condition?
[2012-01-18 22:32:00 -0500] fujin: I'd suggest looking at something like Noah or the discovery cookbook I released the other day: http://ckbk.it/discovery, or my pylon project (experimental) http://github.com/fujin/pylon
[2012-01-18 22:32:00 -0500] fujin: or zookeeper. or yeah, the righ ttool for the job
[2012-01-18 22:32:00 -0500] tpot: gmcinnes1: a knife, of course
[2012-01-18 22:32:00 -0500] fujin: and an understanding of the problem
[2012-01-18 22:32:00 -0500] fujin: MY KINGDOM
[2012-01-18 22:32:00 -0500] tpot: gmcinnes1: i have a cookbook that merges attributes from other nodes to make a config file
[2012-01-18 22:32:00 -0500] tpot: it works, but is problematic and quite often i have to edit node attributes by hand to fix things
[2012-01-18 22:33:00 -0500] fujin: noah?
[2012-01-18 22:33:00 -0500] bawt: noah is the most cleverest name on the planet
[2012-01-18 22:33:00 -0500] fujin: !forget noah
[2012-01-18 22:33:00 -0500] bawt: sure
[2012-01-18 22:33:00 -0500] fujin: noah is http://github.com/lusis/noah
[2012-01-18 22:33:00 -0500] fujin: get some.
[2012-01-18 22:34:00 -0500] timsmith: does anyone know what's up with the mountable_volumes cookbook that is a dependency on all the info chimps cookbooks.  I can't find it anywhere
[2012-01-18 23:05:00 -0500] timsmith: how do you handle dependencies with multiple platforms.  I have a cookbook that needs to run on ubuntu and windows so it needs to have a dependency on both of those cookbooks, but if you include the Windows cookbook on a Linux system it fails
[2012-01-18 23:14:00 -0500] fujin: i use suggests in the metadata.rb and implicit inclusion in a role
[2012-01-18 23:14:00 -0500] fujin: targeted for the platform
[2012-01-18 23:14:00 -0500] fujin: until we get something like platform-specific-metadata..
[2012-01-18 23:18:00 -0500] timsmith: I'll give suggests a try.  I wasn't aware of that one
[2012-01-18 23:19:00 -0500] fujin: so you don't have tow orry about putting 'depends'..
[2012-01-18 23:19:00 -0500] fujin: it doesn't do anything
[2012-01-18 23:19:00 -0500] fujin: it's like depends that you don't care about.
[2012-01-18 23:19:00 -0500] fujin: including it in the role run_list ships it to the node
[2012-01-18 23:26:00 -0500] timsmith: so would suggests be used at the role level and not the metadata level?
[2012-01-18 23:57:00 -0500] timsmith: Why would you receive this error when trying to bootstrap a node with knife bootstrap
[2012-01-18 23:57:00 -0500] timsmith: ERROR: TypeError: can't convert false into String

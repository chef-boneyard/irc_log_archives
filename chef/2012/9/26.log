[2012-09-26 00:18:44 -0400] coderanger: Check if you have any non-printing characters in there
[2012-09-26 00:18:54 -0400] coderanger: possibly a unicode zero-width space
[2012-09-26 00:28:35 -0400] thedeeno: everyonce and a while I have a deploy which goes badly. Unfortunatley, the application cookbook assumes this deploy is completed and won't attempt it again until I push a new revision of my app.
[2012-09-26 00:29:18 -0400] thedeeno: I can set `action :force_deploy` but remembering to remove it is problematic, not to mention 2 rounds of cookbook uploads.
[2012-09-26 00:29:39 -0400] thedeeno: So question: If I want to set an action of my resource for a single run, how would you guys reccomend I do it?
[2012-09-26 00:30:20 -0400] Hiryu: Is there a way to apply a role to a node based on the name of the node and/or the machine? I've been looking through the docs for a while and I haven't found anything one way or another. But I'm really new so maybe I don't know what I'm looking for
[2012-09-26 00:32:02 -0400] Embalmed: anyone use the munin cookbook?   how would i do the snmp plugin?  (ie i want the munin server to poll snmp data from nodes with a certain recipe)
[2012-09-26 01:02:52 -0400] CluelessNewbie: q: with https://github.com/opscode-cookbooks/ubuntu and role config https://gist.github.com/8d1c09f756df806b6aca I'm having a stupid newbie moments on how to set the attributes into the module. Can someone check my syntax / eyeball if I'm doing something wrong.
[2012-09-26 01:03:18 -0400] CluelessNewbie: "archive_url" appears to never get set, the role is executed perfectly.
[2012-09-26 01:04:08 -0400] Axsuul: yfeldblum: I guess chef librarian prefers if cookbooks are from the community site. However, I find myself using more and more cookbooks from github, or one thats I modify myself. Isn't this the direction cookbooks are heading toward?
[2012-09-26 01:06:52 -0400] kreedy: I'm having a chicken and egg problem with an upstart service and its config file. I want the changing of the config file to 'notifies :restart, resources(:service => "service_name")' and that config file is a template. If I define the template first, it will fail, as the service it notifies is not yet defined. If I define the service first, it will fail, as the upstart config file is not yet in place. Any ideas? https://gist.github.com/a92feb7346b81f1fe8a4
[2012-09-26 01:06:56 -0400] yfeldblum: Axsuul, sysadmins? tending towards tip-of-master, unreleased, unstable-as-a-unicycle cookbooks?
[2012-09-26 01:07:47 -0400] yfeldblum: Axsuul, it seems to me there's often discussion in here of versioning and packaging
[2012-09-26 01:08:20 -0400] CluelessNewbie: yfeldblum: would you mind having a look at my gist and gland over to see if I'm doing anything wrong?
[2012-09-26 01:08:30 -0400] CluelessNewbie: glance..
[2012-09-26 01:08:42 -0400] yfeldblum: kreedy, that's why opscode made a new query-string syntax for delayed notifications
[2012-09-26 01:08:57 -0400] yfeldblum: kreedy, notifies :restart, "service[#{service_name}]"
[2012-09-26 01:09:57 -0400] kreedy: excellent. will try that out
[2012-09-26 01:10:00 -0400] kreedy: thanks!
[2012-09-26 01:10:31 -0400] Axsuul: yfeldblum: yea, i agree that sysadmins will tend towards that, but for the developer like myself, i have my own edge cases that i address with other cookbooks *shrug*
[2012-09-26 01:11:15 -0400] yfeldblum: CluelessNewbie, you're setting that at the default level in the role; but is something else setting that attribute at a higher level than default?
[2012-09-26 01:11:46 -0400] CluelessNewbie: yfeldblum: negative. this is a chef-solo + vagrant setup, only one role defined.
[2012-09-26 01:12:18 -0400] CluelessNewbie: is the syntax correct for that plugin? (am i on the right path)
[2012-09-26 01:12:41 -0400] yfeldblum: CluelessNewbie, i don't know about the plugin but just as pure ruby code it looks fine
[2012-09-26 01:13:06 -0400] yfeldblum: CluelessNewbie, it's not just roles; maybe a recipe is setting it at a higher precedence level (normal level or override level)
[2012-09-26 01:13:08 -0400] CluelessNewbie: yfeldblum: compare to the attributes.rb of that plugin = https://github.com/opscode-cookbooks/ubuntu/blob/master/attributes/default.rb
[2012-09-26 01:13:45 -0400] CluelessNewbie: oh dammit, that is probably it.
[2012-09-26 01:17:06 -0400] kreedy: yfeldblum: That worked perfectly, thanks! I have one more question if you don't mind. I also have a deploy_revision resource in the mix for this service. deploy_revision doesn't have :notifies. Is the best way to go about this with 'restart_command = "/usr/sbin/service service_name restart"' or is there a better way?
[2012-09-26 01:17:13 -0400] yfeldblum: CluelessNewbie, yes, that attributes file sets the attribute at the normal level, which is a bad idea generally (because it "sticks" between chef runs and is not reset at the beginning of each chef run) and which also overrides the default-level attribute
[2012-09-26 01:18:04 -0400] CluelessNewbie: many thanks. Reading up on the levels now. Ta.
[2012-09-26 01:18:09 -0400] CluelessNewbie: thanks for the direction.
[2012-09-26 01:19:43 -0400] yfeldblum: kreedy, i suppose that will work
[2012-09-26 01:19:56 -0400] jtimberman: Embalmed: there's a munin_plugin definition in the cookbook that might be helpful
[2012-09-26 01:20:14 -0400] jtimberman: kreedy: "notifies" is available to all resources
[2012-09-26 01:20:22 -0400] jtimberman: that is, any resource can notify another
[2012-09-26 01:21:15 -0400] jtimberman: Axsuul: hopefully we see more people releasing cookbooks to the community site and sharing that way rather than using GitHub, as the former is designed specifically for sharing release-worthy usable artifacts and the other is for sharing source code projects
[2012-09-26 01:21:40 -0400] jtimberman: GitHub is awesome, and its great for sharing code, but it is not a mechanism for releasing and discovering software.
[2012-09-26 01:22:06 -0400] jtimberman: for example, if i want a RubyGem, I'm going to rubygems.org, not github, to find the one i want to install.
[2012-09-26 01:23:12 -0400] CluelessNewbie: yfeldblum: confirmed and now working!
[2012-09-26 01:23:39 -0400] Axsuul: I agree, but there are a lot of gem authors out there who forget to update the the RubyGems version
[2012-09-26 01:24:07 -0400] yfeldblum: jtimberman, that's playing it so ... safe ...
[2012-09-26 01:24:17 -0400] jtimberman: yfeldblum: sysadminlike, i know
[2012-09-26 01:24:31 -0400] jtimberman: don't have time now to elaborate :)
[2012-09-26 01:24:34 -0400] jtimberman: bbiab.
[2012-09-26 01:24:35 -0400] yfeldblum: Axsuul, open an issue on github with the title "release v#{version} to rubygems" :D
[2012-09-26 01:24:48 -0400] Axsuul: Github has become the goto now, especially since it comes up first in Google
[2012-09-26 01:25:24 -0400] hoover_damm: now we just need Github to enforce some silly license... to make everyone abandon it for some other site
[2012-09-26 01:25:36 -0400] Axsuul: yfeldblum: it's much faster to just point it to git =)
[2012-09-26 01:25:39 -0400] hoover_damm: not likely
[2012-09-26 01:25:55 -0400] yfeldblum: Axsuul, that may be how you do it, but librarian-chef is still going to assume its users work a little more rigorously :P
[2012-09-26 01:26:13 -0400] kreedy: jtimberman: so it does. thanks!
[2012-09-26 01:26:27 -0400] yfeldblum: hoover_damm, like auto-switching all projects that are GPL to BSD, and all projects that are BSD to GPL?
[2012-09-26 01:28:57 -0400] yfeldblum: Axsuul, the browser-js and php cowboys, though, are moving to github as their release trains
[2012-09-26 01:29:31 -0400] hoover_damm: yfeldblum, history lesson if you forgot... sf.net was popular until they enforced gpl
[2012-09-26 01:30:56 -0400] yfeldblum: hoover_damm, didn't know that
[2012-09-26 01:31:44 -0400] hoover_damm: yfeldblum, yep, there's other reasons outside of that... but that was one of the reasons
[2012-09-26 01:32:34 -0400] hoover_damm: yfeldblum, I admit I don't shed a tear when a project moves from sourceforge to github... as they have made it harder over the years to provide sane download links
[2012-09-26 01:33:21 -0400] yfeldblum: hoover_damm, i've noticed that
[2012-09-26 01:34:04 -0400] Axsuul: GitHub makes browsing the source easy, their issue tracker is decent (I really wish opscode used it for their cookbooks)
[2012-09-26 01:34:43 -0400] Axsuul: It's a hassle having to jump between
[2012-09-26 01:35:41 -0400] hoover_damm: Axsuul, i use org-jira and just file my jira tickets from emacs
[2012-09-26 01:35:53 -0400] hoover_damm: never leaving my editor
[2012-09-26 01:40:00 -0400] Axsuul: hoover_damm: ah, emacs :)
[2012-09-26 01:41:00 -0400] hoover_damm: yes the solution to everything
[2012-09-26 01:43:35 -0400] Axsuul: hoover_damm: good thing this isn't a vim chan :)
[2012-09-26 01:45:19 -0400] hoover_damm: Axsuul, i'm a 15+senior vi user who converted to emacs.  Most vi trolls can't tell me anything worth hearing.
[2012-09-26 01:45:59 -0400] Axsuul: hoover_damm: whats the main reason behind the switch
[2012-09-26 01:47:35 -0400] DeadZen: hoover_damm: don't worry I got kicked from vim when I started bitching about it
[2012-09-26 01:47:38 -0400] hoover_damm: Axsuul, bad habbits mainly
[2012-09-26 01:47:38 -0400] DeadZen: ;p
[2012-09-26 01:47:57 -0400] hoover_damm: DeadZen, meh you get kicked a lot anyway
[2012-09-26 01:48:09 -0400] DeadZen: huh?
[2012-09-26 01:48:17 -0400] DeadZen: I got kicked once, and never went back
[2012-09-26 01:49:07 -0400] DeadZen: from where?
[2012-09-26 01:50:11 -0400] hoover_damm: this is OT anywho
[2012-09-26 01:51:31 -0400] DeadZen: still... you can answer
[2012-09-26 02:53:59 -0400] jaimef: whyrun
[2012-09-26 02:54:24 -0400] erikh: whylie, I need a beer
[2012-09-26 02:57:26 -0400] spox: http://is.gd/ZneDWa
[2012-09-26 02:57:37 -0400] jaimef: anyone at the SF whyrun meetup?
[2012-09-26 03:15:06 -0400] Axsuul: Anyone know of a good chef cookbook to manage ssh hosts?
[2012-09-26 03:34:29 -0400] nwjsmith: Has anyone had trouble uploading the ohai cookbook to a hosted chef account before?
[2012-09-26 03:35:19 -0400] nwjsmith: I'm getting a 403 Forbidden on my account, but only when running `knife cookbook upload ohai`
[2012-09-26 03:36:44 -0400] bluepojo: nwjsmith: what error are you getting?
[2012-09-26 03:36:48 -0400] bluepojo: oh
[2012-09-26 03:37:09 -0400] bluepojo: did you freeze the cookbook when uploading the first time?
[2012-09-26 03:37:14 -0400] bluepojo: and are you reuploading the same version?
[2012-09-26 03:38:32 -0400] nwjsmith: that's the weird thing, I've never uploaded it before. When I run `knife cookbook list`, there's no ohai either
[2012-09-26 03:39:50 -0400] bluepojo: oh interesting
[2012-09-26 03:39:54 -0400] bluepojo: can you upload any cookbooks?
[2012-09-26 03:39:59 -0400] bluepojo: is it just ohai that's giving you trouble
[2012-09-26 03:39:59 -0400] bluepojo: ?
[2012-09-26 03:40:08 -0400] nwjsmith: just ohai
[2012-09-26 03:40:35 -0400] bluepojo: curious
[2012-09-26 03:40:36 -0400] nwjsmith: I've been able to upload a bunch of others; nginx, runit, php, apache2
[2012-09-26 03:41:30 -0400] bluepojo: is it the one off the community site? I can download it and try to upload to an org on my account to see if I get a similar error
[2012-09-26 03:42:00 -0400] bluepojo: what version?
[2012-09-26 03:42:04 -0400] bluepojo: nwjsmith:
[2012-09-26 03:42:54 -0400] nwjsmith: 1.1.2
[2012-09-26 03:45:20 -0400] bluepojo: hm. I got no error
[2012-09-26 03:45:24 -0400] bluepojo: and ohai has no dependencies
[2012-09-26 03:45:28 -0400] bluepojo: so it can't be that
[2012-09-26 03:46:43 -0400] thedeeno: nwjsmith: can u nuke that cookbook with `knife cookbook delete`?
[2012-09-26 03:47:16 -0400] bluepojo: he said he's never successfully uploaded it
[2012-09-26 03:47:17 -0400] bluepojo: I believe
[2012-09-26 03:47:23 -0400] bluepojo: knife cookbook show ohai
[2012-09-26 03:47:24 -0400] bluepojo: to be sure
[2012-09-26 03:47:58 -0400] nwjsmith: Both commands error "Cannot find a cookbook named ohai"
[2012-09-26 03:48:12 -0400] bluepojo: oh!
[2012-09-26 03:48:22 -0400] bluepojo: nv,
[2012-09-26 03:48:23 -0400] bluepojo: nvm
[2012-09-26 03:48:25 -0400] bluepojo: maybe
[2012-09-26 03:48:43 -0400] bluepojo: I was thinking maybe you're not giving the right cookbooks directory
[2012-09-26 03:48:44 -0400] bluepojo: for the uploader
[2012-09-26 03:48:49 -0400] bluepojo: -o path/to/cookbooks
[2012-09-26 03:49:03 -0400] bluepojo: but you're getting 403s
[2012-09-26 03:49:07 -0400] bluepojo: not "can't find cookbook"
[2012-09-26 03:49:19 -0400] bluepojo: one option is to try Berkshelf, which has it's own cookbook uploader
[2012-09-26 03:49:23 -0400] bluepojo: perhaps it's a quirk with knife
[2012-09-26 03:49:39 -0400] bluepojo: berkshelf.com
[2012-09-26 03:50:42 -0400] bluepojo: echo 'cookbook "ohai"' > Berksfile; berks install; berks upload
[2012-09-26 03:51:42 -0400] bluepojo: nwjsmith:
[2012-09-26 03:52:18 -0400] nwjsmith: Yeah, -o isn't changing anything. I'll try berkshelf
[2012-09-26 03:54:59 -0400] bluepojo: if you want to avoid the gecode installation, use pre to install berkshelf
[2012-09-26 03:55:06 -0400] bluepojo: the latest version drops gecode as a dependency
[2012-09-26 03:55:11 -0400] bluepojo: but hasn't hit full release
[2012-09-26 03:58:14 -0400] javi: Hi, I'm new in chef and have a question, I just configured a client called (by accident) localhost, when i run the command "knife node run_list add localhost 'recipe[getting-started]' "  I get the answer " node 'localhost' not found"
[2012-09-26 03:59:49 -0400] javi: When i run the command " knife client list" I can see my client 'localhost' listed, but when in run the command "knife node list" I don't get any node
[2012-09-26 03:59:49 -0400] bluepojo: javi: what happens when you say "knife node show localhost"
[2012-09-26 03:59:59 -0400] bluepojo: perhaps you didn't actually create the client
[2012-09-26 04:00:32 -0400] bluepojo: if knife node show doesn't come back with anything, I'd just rebootstrap the node with the proper name
[2012-09-26 04:00:38 -0400] bluepojo: delete the client.pem off the box if there is one
[2012-09-26 04:00:41 -0400] erikh: clients and nodes are different
[2012-09-26 04:00:43 -0400] bluepojo: in /etc/chef
[2012-09-26 04:00:50 -0400] bluepojo: knife client show localhost
[2012-09-26 04:00:52 -0400] bluepojo: :X
[2012-09-26 04:00:58 -0400] bluepojo: I misread
[2012-09-26 04:00:59 -0400] erikh: a client doesn't mean there's a node associated with it.
[2012-09-26 04:01:02 -0400] erikh: aye
[2012-09-26 04:01:10 -0400] bluepojo: yeah, that can be confusing
[2012-09-26 04:01:11 -0400] erikh: now stop talking in here and play torchlight with me
[2012-09-26 04:01:16 -0400] bluepojo: I'm still at work
[2012-09-26 04:01:16 -0400] bluepojo: but
[2012-09-26 04:01:19 -0400] erikh: feh.
[2012-09-26 04:01:21 -0400] bluepojo: lol.
[2012-09-26 04:01:41 -0400] erikh: elebertus is still ignoring me
[2012-09-26 04:01:48 -0400] erikh: I think your company gave him the ass burgers.
[2012-09-26 04:02:26 -0400] bluepojo: I think my company put him on a very demanding project
[2012-09-26 04:02:32 -0400] bluepojo: which he's not allowed to talk about XD
[2012-09-26 04:04:53 -0400] erikh: ah
[2012-09-26 04:05:07 -0400] javi: <bluepojo> I installed the workstation with omnibus so I run all the commands inside ~/chef-repo, and the keys are in ~/chef-repo/.chef
[2012-09-26 04:05:59 -0400] javi: <bluepojo> I created the client but I did not create the node, How can I create the node for the client?
[2012-09-26 04:06:22 -0400] maek: javi: when you check the box in with the validator it should make the client and the node
[2012-09-26 04:06:47 -0400] bluepojo: javi: did you do knife bootstrap <IP or domain name> ?
[2012-09-26 04:08:51 -0400] javi: bluepojo: yes, I'm following this guide: http://wiki.opscode.com/display/chef/Client+Bootstrap+Fast+Start+Guide
[2012-09-26 04:08:58 -0400] rocket: does anyone know if there is a chef recipe for installing mysql 5.5 on centos6?
[2012-09-26 04:09:08 -0400] bluepojo: javi: did the chef run complete or error out?
[2012-09-26 04:09:20 -0400] bluepojo: if it doesn't complete, then it won't check in to the chef server as a new node
[2012-09-26 04:09:33 -0400] bluepojo: on the first run
[2012-09-26 04:09:57 -0400] nwjsmith: bluepojo: Berkshelf didn't work either, `Ridley::Errors::HTTPForbidden errors: 'Merb::ControllerExceptions::Forbidden'`
[2012-09-26 04:10:07 -0400] bluepojo: wow.
[2012-09-26 04:10:22 -0400] bluepojo: this is hosted chef, right?
[2012-09-26 04:10:35 -0400] hoover_damm: Ridley? who's got Sphinx?
[2012-09-26 04:10:37 -0400] bluepojo: I'm really puzzled by this.. they really don't want your ohai cookbook
[2012-09-26 04:10:39 -0400] hoover_damm: lol
[2012-09-26 04:10:43 -0400] bluepojo: Ridley is a library reset wrote
[2012-09-26 04:10:57 -0400] nwjsmith: Yeah, hosted chef
[2012-09-26 04:11:03 -0400] javi: bluepojo: yes, it's hosted chef
[2012-09-26 04:11:24 -0400] hoover_damm: oooh
[2012-09-26 04:11:27 -0400] hoover_damm: neat name
[2012-09-26 04:11:35 -0400] hoover_damm: bluepojo, reminded me of a sphinx thing (thinking sphinx)
[2012-09-26 04:11:38 -0400] hoover_damm: for merb
[2012-09-26 04:11:42 -0400] bluepojo: ah
[2012-09-26 04:12:04 -0400] bluepojo: Ridley was written to support another project named Mother Brain
[2012-09-26 04:12:27 -0400] javi: but you are right I did not notice but there was an error running the command  knife bootstrap ... the error is:  Failed to authenticate to the chef server
[2012-09-26 04:12:46 -0400] bluepojo: aha that'll do it
[2012-09-26 04:14:09 -0400] bluepojo: https://github.com/reset/ridley
[2012-09-26 04:14:23 -0400] bluepojo: it's a sweet chef API wrapper
[2012-09-26 04:14:26 -0400] bluepojo: really clean
[2012-09-26 04:14:36 -0400] maek: javi: whats the line after that. does it say as client 'validator' or something?
[2012-09-26 04:15:34 -0400] javi: server response: Invalid signature for user or client 'localhost'
[2012-09-26 04:16:02 -0400] maek: javi: do you have the validation key on your box? are you providing that to the node on boot strap?
[2012-09-26 04:16:06 -0400] maek: also
[2012-09-26 04:16:10 -0400] maek: hostname -f is set?
[2012-09-26 04:18:37 -0400] javi: Relevant Config Settings: chef_server_url   "https://api.opscode.com/organizations/xxx" ;  node_name     "localhost"  client_key        "/etc/chef/client.pem" ;
[2012-09-26 04:19:16 -0400] javi: I have all of these, I have the file client.pem in the remote client, and the command hostname -f returns 'localhost'
[2012-09-26 04:19:28 -0400] erikh: ehh
[2012-09-26 04:19:45 -0400] erikh: does your hosts file still have localhost pointing at 127.0.0.1?
[2012-09-26 04:20:13 -0400] erikh: naming your host "localhost" can wreak all sorts of havoc on your system resolver
[2012-09-26 04:22:47 -0400] javi: erikh: in the file /etc/hosts of my remote client I have the line "127.0.0.1       localhost"  do I have to delete that?
[2012-09-26 04:22:55 -0400] erikh: no,
[2012-09-26 04:22:58 -0400] erikh: fix your hostname
[2012-09-26 04:23:02 -0400] erikh: and thusly your client name.
[2012-09-26 04:23:07 -0400] erikh: and your node name, etc.
[2012-09-26 04:25:59 -0400] javi: Ok, I changed the hostname of the client to "clientone" and now I will run the command  " knife bootstrap ...." again
[2012-09-26 04:26:46 -0400] maek: javi: not sure if the boot strapper does it but you should delete client.rb and client.pem
[2012-09-26 04:26:52 -0400] maek: just to avoid conflict
[2012-09-26 04:30:55 -0400] jtimberman: Axsuul: re: github issues - one reason is that it didn't exist when we set up our open source projects and workflows around them, and then wasn't in a state where it made comfortable to switch. now we have such a long history for the various projects in jira, it would be detrimental to switch.
[2012-09-26 04:30:56 -0400] javi: maek: I did what you said, this time I think it worked, the last line says "INFO: Report handlers complete" and the command " knife node list" returns "clientone" I also ran the  command "knife node run_list add clientone 'recipe[getting-started]'" and it worked, thank you very much!!!!
[2012-09-26 04:31:15 -0400] bluepojo: nice :D
[2012-09-26 04:31:29 -0400] maek: javi: great success
[2012-09-26 04:31:40 -0400] javi: thank you bluepojo!!
[2012-09-26 04:31:43 -0400] jtimberman: well, not "detrimental" per se, but arduous, and i'm not aware of whether there's a great way to preserve the history available.
[2012-09-26 04:32:14 -0400] javi: so the problem was the hostname, lesson learned =)
[2012-09-26 04:33:49 -0400] maek: javi: yeah, localhost is not nice for chef
[2012-09-26 04:33:55 -0400] erikh: localhost is not nice for unix
[2012-09-26 04:34:05 -0400] erikh: unless you mean 127.0.0.1.
[2012-09-26 04:34:06 -0400] maek: :)
[2012-09-26 04:34:10 -0400] maek: yeah
[2012-09-26 05:44:34 -0400] nickesh: i am writing recipe for installing firefox, i have written well, and need to set the proxy settings automatically. i know , i have to edit i.e. prefs.js file
[2012-09-26 05:46:17 -0400] nickesh: but the problem is this file in inside the directory that is named randomly. like..      .mozilla/firefox/abcd123.default/prefs,js
[2012-09-26 05:46:38 -0400] nickesh: how can i go there to edit that file using normal ruby
[2012-09-26 05:47:02 -0400] nickesh: or are there any better ways to do that
[2012-09-26 05:48:12 -0400] nickesh: i used this .mozilla/firefox/*.default/prefs.js
[2012-09-26 05:48:23 -0400] nickesh: but it didn't work
[2012-09-26 05:49:16 -0400] Randm: hmm
[2012-09-26 05:49:20 -0400] Randm: you know about wpad, right?
[2012-09-26 05:50:25 -0400] nickesh: @Randm: if this is for me, NO
[2012-09-26 05:57:40 -0400] Randm: nickesh: you can use a javascript based language to setup proxies
[2012-09-26 05:57:49 -0400] Randm: and not have to futz with javascript files
[2012-09-26 05:59:18 -0400] nickesh: can i use javascript with ruby?
[2012-09-26 05:59:41 -0400] Randm: http://en.wikipedia.org/wiki/Web_Proxy_Autodiscovery_Protocol
[2012-09-26 06:44:13 -0400] nickesh: @Randm: hey i didn't  get much of it, what all i have to is, given a blank computer (only linux installed ) write a chef recipes to install all the softwares  (list is given).
[2012-09-26 06:53:34 -0400] Randm: nickesh: this is seperate outside of chef
[2012-09-26 06:53:51 -0400] Randm: the browser tries to fetch some file on startup from a few domains
[2012-09-26 06:54:00 -0400] Randm: that configures the proxies for that network
[2012-09-26 06:55:00 -0400] nickesh: Randm: how can it be..
[2012-09-26 06:55:13 -0400] nickesh: outside of chef?
[2012-09-26 06:59:36 -0400] zts: nickesh: just to give you an extra headache... I didn't think the profile directory was created until the first time you start firefox.  Have you confirmed that it is there as soon as you install it?
[2012-09-26 07:00:28 -0400] zts: nickesh: Randm's point is that if your problem is to set the proxy settings automatically, there is a better way to do it than Chef.  It will work for (almost) all web browsers, and you won't have to deal with the random directory name
[2012-09-26 07:00:57 -0400] Randm: that too
[2012-09-26 07:01:01 -0400] zts: nickesh: is the proxy the only firefox configuration you need to automate, or do you also need to set other options?
[2012-09-26 07:01:03 -0400] Randm: the profile directory is randomly named
[2012-09-26 07:01:12 -0400] Randm: and only after the user starts it the first time
[2012-09-26 07:01:42 -0400] zts: Thought so - which means you would need to also start and stop firefox during your chef run.  Not ideal!
[2012-09-26 07:02:42 -0400] nickesh: @zts: yep, i have to start and stop the firefox
[2012-09-26 07:04:07 -0400] nickesh: zts: what can i do better? sir
[2012-09-26 07:05:28 -0400] nickesh: i don't know other ways..
[2012-09-26 07:06:11 -0400] nickesh: i am doing it as i used to do through terminal. command by command
[2012-09-26 07:06:19 -0400] nickesh: install the firefox
[2012-09-26 07:06:41 -0400] nickesh: and then set the proxies manually.
[2012-09-26 07:06:51 -0400] nickesh: any better way?
[2012-09-26 07:07:48 -0400] zts: nickesh: well, if you are just worried about proxies, use the WPAD solution suggested by Randm (ie, do not use Chef for that)
[2012-09-26 07:08:15 -0400] zts: Firefox does not make it easy to automate this...
[2012-09-26 07:08:25 -0400] nickesh: :)
[2012-09-26 07:08:42 -0400] zts: However, if you insisted on using Chef, then it looks like Firefox has a command-line option to create a profile
[2012-09-26 07:08:44 -0400] zts: http://kb.mozillazine.org/Command_line_arguments
[2012-09-26 07:08:53 -0400] zts: maybe you could use that instead of stopping and starting it
[2012-09-26 07:09:33 -0400] zts: then, you could write some ruby code to work out what the name of the directory is, and use that in your recipe
[2012-09-26 07:09:48 -0400] zts: I'm not a ruby expert, so I can't help you with that
[2012-09-26 07:10:26 -0400] Randm: use chef to deploy a webserver and use wpad, heh
[2012-09-26 07:10:32 -0400] zts: also, you will have a problem with the order of things - the ruby would normally run in the "compile" phase, which will be earlier than you create the firefox profile
[2012-09-26 07:10:49 -0400] zts: so maybe you'd have to run Chef twice to completely configure the machine
[2012-09-26 07:10:58 -0400] zts: Randm: that is a much better suggestion :)
[2012-09-26 07:12:08 -0400] Randm: unless this is a chef-solo thing for his own homedir
[2012-09-26 07:13:32 -0400] nickesh: @zts: ooo yeah,i never thought about that, seems i am in big trouble
[2012-09-26 07:14:17 -0400] zts: nickesh: another thing to try (I am not sure if this would work), maybe you can just create the whole profile directory yourself with Chef, containing the files you want
[2012-09-26 07:14:42 -0400] zts: if firefox lets you use the same "random" name on every machine, maybe that would work (I don't know)
[2012-09-26 07:15:19 -0400] nickesh: no it creates different name every time
[2012-09-26 07:17:33 -0400] zts: sure, but what if you put something there before the first time it starts?
[2012-09-26 07:18:09 -0400] zts: so, configure firefox by hand, then make a copy of the .mozilla/firefox/abcd123.default you end up with
[2012-09-26 07:18:44 -0400] zts: next, on a clean system, install firefox then don't start it up.  Instead, copy .mozilla/firefox/abcd123.default into place
[2012-09-26 07:18:59 -0400] zts: if you then start up firefox, does it work (and have your configuration)
[2012-09-26 07:19:11 -0400] nickesh: let me check
[2012-09-26 07:24:25 -0400] Randm: zts: bad idea from a security standpoint
[2012-09-26 07:24:40 -0400] Randm: the reason why it's randomized is to prevent file:/// based attack vectors
[2012-09-26 07:29:42 -0400] CJNE: anyone tried aws autoscaling + chef bootstrapping?
[2012-09-26 07:30:04 -0400] zts: Randm: good point (I wasn't aware of that).  However, you could generate a random string in your recipe and use that as the random part of the directory to be created
[2012-09-26 07:30:58 -0400] zts: Randm: the main part here I'm unaware of is whether that string is random and insignificant (eg, Firefox globs that directory to find profiles, and ignores the part to the first period)
[2012-09-26 08:13:28 -0400] Axsuul: Is there any way to check within a recipe if node has a certain role
[2012-09-26 08:14:29 -0400] zts: Axsuul: try something like... if node[roles].include? your_role
[2012-09-26 08:15:04 -0400] laurent\: node["roles"] or node.roles
[2012-09-26 08:15:08 -0400] zts: sorry, that probably wants to be node['roles'].include?
[2012-09-26 08:15:11 -0400] Axsuul: Cool thanks
[2012-09-26 08:15:24 -0400] zts: laurent\++
[2012-09-26 08:52:04 -0400] Unicron_: anyone experienced situation where running chef-client manually on the cli would cause the run to be actioned in a different order than if you send a kill signal to the daemon to wake it up?
[2012-09-26 08:53:31 -0400] Unicron_: havre a recipe to install ruby-shadow that includes the build-essential recipe - if I let the chef-client daemon start the run,. then everything works fine, if I run chef-client manually, then build-essential does not get installed before ruby-shadow, causing a failure.
[2012-09-26 09:06:22 -0400] WoOh_: Hi
[2012-09-26 09:06:43 -0400] WoOh: Is the command do ... end block valid for a execute resource?
[2012-09-26 09:09:10 -0400] WoOh: ?
[2012-09-26 09:40:47 -0400] zts: WoOh: I don't think that will work, as the command parameter takes a string, not a block
[2012-09-26 09:42:41 -0400] zts: WoOh: taking a step back, what is it that you are trying to do?
[2012-09-26 09:51:38 -0400] Mydalon1: Hi, I copy directory contents with remote_directory. Is there a way to keep the original permission settings (especially the executable flag)?
[2012-09-26 10:08:38 -0400] aruntomar: hi! is there a way to automatically attach my aws instance bootstrapped by chef, to elastic load balancer of aws via chef?
[2012-09-26 10:14:32 -0400] masterkorp: http://i.imgur.com/rKRHY.jpg
[2012-09-26 10:17:21 -0400] zts: aruntomar: yes, look at the "aws" cookbook
[2012-09-26 10:18:45 -0400] aruntomar: zts: thanks. will look into it
[2012-09-26 10:36:05 -0400] nickesh: @zts: hey that trick(copying existed *.default files in  new *.default) works, but how can i stop running ./firefox automatically (using next command)
[2012-09-26 10:36:24 -0400] nickesh: after ./firefox
[2012-09-26 11:29:22 -0400] BryanWB: btm, ping
[2012-09-26 12:03:49 -0400] maxmanders: I've started working with more than one chef repo; so instead of ~/.chef - I have many dirs with a .chef directory.  It would seem that knife is ignoring the cookbook_path in these - any thoughts or pointers on debugging this?
[2012-09-26 12:04:17 -0400] maxmanders: If I puts cookbook_path immediately after defining it in knife.rb, it does not contain my path - only /var/....
[2012-09-26 12:04:57 -0400] maxmanders: If I use -o <path> it works fine
[2012-09-26 12:13:51 -0400] leifmadsen: \o/
[2012-09-26 12:14:15 -0400] leifmadsen: with my latest pull request, everything can now run minitest-handler cookbook with minitest spec tests :)
[2012-09-26 12:21:46 -0400] BryanWB: leifmadsen, is it  a patch to the minitest handler cookbook?
[2012-09-26 12:22:10 -0400] BryanWB: leifmadsen, i don't see a pull request
[2012-09-26 12:22:44 -0400] BryanWB: leifmadsen, ah, u patch the underlying gem
[2012-09-26 12:23:01 -0400] leifmadsen: BryanWB: well I have 2 pull requests
[2012-09-26 12:23:21 -0400] leifmadsen: BryanWB: one on the mysql cookbook itself which fixes the require File.expand_path line
[2012-09-26 12:23:27 -0400] leifmadsen: COOK-1704 is for that one
[2012-09-26 12:23:45 -0400] leifmadsen: then I submitted one to minitest-chef-handler as well to patch the gem to use the new provider_for_resource call
[2012-09-26 12:24:15 -0400] leifmadsen: even though it's not strictly required now that btm added a backwards compatible path (which works after testing 10.14.4.rc.0)
[2012-09-26 12:24:56 -0400] leifmadsen: BryanWB: I was referring to this request fyi  https://github.com/opscode-cookbooks/mysql/pull/41
[2012-09-26 12:25:06 -0400] BryanWB: leifmadsen, kewl
[2012-09-26 12:25:17 -0400] leifmadsen: pretty good for pre-9:00am
[2012-09-26 12:25:24 -0400] BryanWB: mos def ;)
[2012-09-26 12:25:27 -0400] leifmadsen: I can pretty much just go and drink beers for the rest of the day now
[2012-09-26 12:35:48 -0400] maxmanders: fg
[2012-09-26 12:36:29 -0400] leifmadsen: that was your first mistake
[2012-09-26 12:36:37 -0400] leifmadsen: it's like saying Beetlejuice 3 times
[2012-09-26 12:47:49 -0400] gyre007: can I get the Chef server URL from within the recipe ?
[2012-09-26 12:47:53 -0400] gyre007: like query it
[2012-09-26 12:48:01 -0400] maxmanders: Fuuuuuu - so it looks like I'd some how introduced an invisible invalid multibyte space char in knife.rb  *facepalm*
[2012-09-26 12:51:02 -0400] gchristensen: maxmanders: happens to me every time I copy/paste from the wiki :(
[2012-09-26 12:53:36 -0400] gyre007: or like ...query what chef-server (ie IP or URL) I'm talking to ?
[2012-09-26 13:15:56 -0400] newb: Do I need Ruby to use Knife?
[2012-09-26 13:16:57 -0400] royh: newb: yes.
[2012-09-26 13:17:12 -0400] newb: Even on Windows?
[2012-09-26 13:17:14 -0400] royh: knife is coded in ruby as well
[2012-09-26 13:17:31 -0400] Houdini: even on Windows :)
[2012-09-26 13:18:04 -0400] newb: Thanks.
[2012-09-26 13:18:29 -0400] newb: Also, any way of installing only knife and not Chef on Windows?
[2012-09-26 13:20:52 -0400] newb: Any way of executing a run_list remotely? (without SSH'ing into the node?)
[2012-09-26 13:22:33 -0400] geekbri: when you say executing a run list do you just mean running chef client?
[2012-09-26 13:25:03 -0400] newb: Yes.
[2012-09-26 13:25:10 -0400] newb: Run recipes on a node.
[2012-09-26 13:27:36 -0400] geekbri: you could just ssh user@host 'sudo chef-client'
[2012-09-26 13:27:37 -0400] geekbri: or
[2012-09-26 13:27:59 -0400] geekbri: knife ssh "<some search here>" "sudo chef-client" -x <whatever user>
[2012-09-26 13:32:52 -0400] newb: Yep, I know. But is there any way of doing it without SSHing into the machine? Like pushing it on the node.
[2012-09-26 13:33:07 -0400] newb: Without having to run "chef-client" on the node.
[2012-09-26 13:46:21 -0400] geekbri: You mean running chef-client in daemon mode?  There are many ways to do it.  We use run-it, but you could use runit, bluepill, monit, cron
[2012-09-26 13:46:25 -0400] geekbri: whatever tickles your fancy
[2012-09-26 13:48:43 -0400] jblaine: or... just run it in daemon mode without any of that stuff wrapped around it.
[2012-09-26 13:48:47 -0400] en0x: can't u just demonize it?
[2012-09-26 13:49:01 -0400] newb: Actually, that wouldn't solve my problem.
[2012-09-26 13:49:15 -0400] en0x: i have something like this:
[2012-09-26 13:49:16 -0400] en0x: knife ssh "role:AppServers"`uptime`
[2012-09-26 13:49:17 -0400] en0x: WARNING: Failed to connect to node[xxxxx] -- Net::SSH::AuthenticationFailed: root@xxxxxx
[2012-09-26 13:49:30 -0400] en0x: on this server i have chef-client demonized
[2012-09-26 13:49:34 -0400] en0x: do i need to do something special?
[2012-09-26 13:51:36 -0400] newb: Another issue: is it possible to specify which file to fetch (URL, or whatever) through the chef-client command line?
[2012-09-26 13:52:42 -0400] newb: That is, the files fetched by my recipe need to be defined dynamically. The recipe itself stays the same, it's just the file that it uses for the installation that changes.
[2012-09-26 13:53:33 -0400] newb: It seems that this is possible through the -j JSON file attribute... but the JSON file has to be local to the node, right?
[2012-09-26 13:56:07 -0400] geekbri: You could just demonize it, I prefer to use something that will restart it if it blows up for some reason.
[2012-09-26 13:57:30 -0400] sunil__: @en0x can you ssh to it manually using -x username
[2012-09-26 13:58:20 -0400] sunil__: it seems like auth issue is due to either not the right username or it can't find the ssh key..are you using ssh keys?
[2012-09-26 13:59:13 -0400] newb: geekbri: It's because I want to run unit tests on different versions of source code which is installed via Chef.
[2012-09-26 13:59:27 -0400] en0x: ok i fixed my issue
[2012-09-26 13:59:42 -0400] newb: So I need to specify the source code to fetch with Chef. So far, the only way I've found to do that is through the -j option..
[2012-09-26 14:00:52 -0400] jblaine: newb: So you're looking for a way to pass arbitrary values into chef-client, which then get referenced by a recipe?
[2012-09-26 14:01:11 -0400] en0x: sunil__: yeah i was pointing to wrong key... now it's fixed...
[2012-09-26 14:01:23 -0400] newb: jblaine: Yes.
[2012-09-26 14:01:37 -0400] en0x: i was thinking about combinining chef with mcollective... should I do that or operate on knife strictly?
[2012-09-26 14:03:46 -0400] sunil__: cool en0x.
[2012-09-26 14:04:20 -0400] sunil__: it all depends on what your goal is..knife is a great tool and takes advantage of chef search..
[2012-09-26 14:05:03 -0400] jblaine: newb: Out of my league, but your -j finding is where I'd start.
[2012-09-26 14:05:16 -0400] en0x: i want to be able to execute commands or restart services or reload servers etc... i'm heavilly based on amazon aws
[2012-09-26 14:13:59 -0400] Zenigor: In the upcoming month my company will be rolling out an almost identical rails app as our current production one. Would I just be able to rip out the app specific stuff in recipes and move those into app-specific roles or is it advised to handle two different chef repos?
[2012-09-26 14:16:09 -0400] yfeldblum: Zenigor, what are the pros and cons for your team for each of the alternatives?
[2012-09-26 14:17:21 -0400] Zenigor: yfeldblum: i dont really feel there are any cons as the only difference between the two env's are the rails app itself. I was more concerned on whether or not it was the chef way
[2012-09-26 14:17:58 -0400] yfeldblum: Zenigor, you think there are no cons to ... which one?
[2012-09-26 14:18:56 -0400] Zenigor: yfeldblum: sorry, to moving mostly app related ssl certs and psql db names to roles over having to manage two chef infrastuctures
[2012-09-26 14:20:14 -0400] yfeldblum: Zenigor, many people in fact manage multiple (or many) applications from a single infrastructure
[2012-09-26 14:20:28 -0400] newb: Can the remote_directory resource fetch files that are NOT in the /files/ directory, but elsewhere on the Chef server?
[2012-09-26 14:21:25 -0400] yfeldblum: newb, no
[2012-09-26 14:21:39 -0400] Zenigor: yfeldblum: thank you
[2012-09-26 14:21:43 -0400] yfeldblum: newb, because there is no /files directory on the chef-server
[2012-09-26 14:22:13 -0400] newb: It's in the CouchDB, right?
[2012-09-26 14:23:00 -0400] newb: So the only way to fetch files "the Chef-way" and the idempotent-way is either by sending something in the /files/ directory or through a URL?
[2012-09-26 14:26:05 -0400] jblaine: What's the summary of 'benefits of storing config attributes in data bags'?
[2012-09-26 14:26:15 -0400] drnfx: s
[2012-09-26 14:26:20 -0400] jblaine: I keep hearing people pose it as The Way
[2012-09-26 14:26:30 -0400] yfeldblum: jblaine, what does the question even mean?
[2012-09-26 14:26:41 -0400] yfeldblum: jblaine, more specifically, what are these "config attributes"?
[2012-09-26 14:27:58 -0400] yfeldblum: newb, chef-server-api, in the cookbook metadata json response, lists each file in the cookbook, its checksum, and a URL for fetching that file
[2012-09-26 14:28:14 -0400] jblaine: heh - I don't know really, I've just heard people indicating that they've moved to that model, so was looking to see if someone could expound
[2012-09-26 14:28:40 -0400] jmartin: jblaine: using databags is a good way to populate data into your recipes
[2012-09-26 14:28:43 -0400] jblaine: I am forever trying to not redo everything 6 months down the road.
[2012-09-26 14:28:44 -0400] yfeldblum: newb, in the oss chef-server-api, it's a URL to an endpoint in the chef-server-api; in hosted-chef, it's a signed S3 URL
[2012-09-26 14:28:45 -0400] jmartin: it makes them more generic
[2012-09-26 14:29:06 -0400] jmartin: so you can use the same recipe in all manner of situations/deployments
[2012-09-26 14:29:17 -0400] jmartin: and the only thing that changes is your data bag information
[2012-09-26 14:29:19 -0400] jblaine: jmartin: As opposed to environment and role attributes?
[2012-09-26 14:29:30 -0400] newb: yfeldblum: FTP transfer is not yet supported, right?
[2012-09-26 14:30:30 -0400] jmartin: jblaine: databags can allow more fine grained control, in addition to allowing you to use encryption on some of those things
[2012-09-26 14:30:56 -0400] jmartin: so you arent transferring config information in plaintext
[2012-09-26 14:31:21 -0400] en0x: hmm i cannot add identity_file to my knife.rb... I have private key for ssh in different location and I don't want to use knife ssh -i /path/to/key... i just want to use knife ssh .... without the -i
[2012-09-26 14:31:22 -0400] drnfx: I am jumping into this conversation, @jmartin so you would recommend to use the databag model opposed to setting attributes and environments?
[2012-09-26 14:31:36 -0400] en0x: i added something like identity_file '/path/to/key' but this does not work
[2012-09-26 14:31:59 -0400] jmartin: drnfx: like all things chef, its really dependent on what suits your workflow
[2012-09-26 14:32:09 -0400] balboah: Why does the node search environent _default return a node that displays environment: dev? http://pastebin.com/rQQ0mvgG
[2012-09-26 14:32:17 -0400] drnfx: well, this is intriguing because I
[2012-09-26 14:32:34 -0400] jblaine: jmartin: Right, that's the kind of thing I keep hearing. Can you elaborate on "can allow more fine-grained control" -- as in, what's an example of what I could do with a databag that would be obtuse or hard with normal attributes
[2012-09-26 14:32:58 -0400] drnfx: I just setup chef on Monday evening, and been reading trying ot plan out how to utlizie chef for our various environments... setting variables for dev,qa,prod etc
[2012-09-26 14:34:40 -0400] jblaine: if all people are saying is "use databags instead of hardcoding config crap in your recipes themselves"... that's one thing. If I'm not already hardcoding config crap in my recipes (because I am using environment and role attributes), are there still gains?
[2012-09-26 14:35:02 -0400] jblaine: Encryption aside.
[2012-09-26 14:36:18 -0400] jblaine: Just seems on the surface, in the basic scenario as above, like a different place to store the same data. I'm searching for the motivation, assuming one is already properly abstracting recipes to reference environment and role attributes.
[2012-09-26 14:36:29 -0400] jmartin: jblaine: sorry one moment, employer calls!
[2012-09-26 14:37:04 -0400] jblaine: of course, happy to get any replies as anyone's time permits!
[2012-09-26 14:38:28 -0400] maxmanders: Trying to troubleshoot a Windows provisioning issue... can't seem to find any useful chef-client logs on the Win machine - anybody know where chef-client logs to by default?
[2012-09-26 14:38:38 -0400] gale: jblaine: using databags is more extensible but if what you've got works for you it's right for you
[2012-09-26 14:38:49 -0400] maxmanders: There is an opscode/chef/log directory that's empty so I'm hoping there's another location to check.
[2012-09-26 14:39:09 -0400] Axsuul: If you're new to chef, all I gotta say is chef-server can be a lil overkill
[2012-09-26 14:44:29 -0400] yfeldblum: newb, why would you need ftp transfer when you've already got http
[2012-09-26 14:44:54 -0400] yfeldblum: jmartin, node attributes allow the same level of control, and can also be encrypted
[2012-09-26 14:46:04 -0400] yfeldblum: jblaine, no - data bags (aka your own custom tables in the CM database) are an approach many find useful
[2012-09-26 14:46:47 -0400] yfeldblum: jblaine, it might be better for this person on this team at this company with this skillset and this history and this repository to use data-bags, but it's not universally better
[2012-09-26 14:46:56 -0400] jmartin: yfeldblum: ah i didnt realize node attributes could be encrypted
[2012-09-26 14:47:33 -0400] jmartin: does chef provide functionality for that, or is it RYO ruby blocks?
[2012-09-26 14:48:00 -0400] yfeldblum: jmartin, ruby provides plenty of encryption primitives so, with a little research and a little practice, you can easily build your own
[2012-09-26 14:48:14 -0400] jmartin: right right
[2012-09-26 14:48:19 -0400] jmartin: the lesson as always
[2012-09-26 14:48:22 -0400] jmartin: defer to yfeldblum
[2012-09-26 14:48:23 -0400] jmartin: haha
[2012-09-26 14:50:52 -0400] yfeldblum: jmartin, https://github.com/opscode/chef/blob/master/chef/lib/chef/encrypted_data_bag_item.rb <--- effectively, a tutorial on using encryption in ruby
[2012-09-26 14:51:36 -0400] yfeldblum: jmartin, (but don't use YAML, since ruby has two different YAML libraries currently and they're not 100% compatible)
[2012-09-26 14:53:48 -0400] jblaine: yfeldblum: Thanks.
[2012-09-26 14:58:21 -0400] maxmanders: Is there a gotcha I should be aware of regarding the service resource and no guarnteed start/stop order? Evidence would suggest that a service start is happening earlier than anticipated...
[2012-09-26 15:16:41 -0400] yfeldblum: maxmanders, what's this evidence?
[2012-09-26 15:22:27 -0400] maxmanders: I have a service block at the end of a recipe that has Chef::Log.info either side of it - those log messages appear earlier in the log than expected....
[2012-09-26 15:23:04 -0400] maxmanders: In any case - that's been pushed down by another question :-P  Where does one specify per-node attributes to override recipe variables on a per-node basis
[2012-09-26 15:23:56 -0400] cheeseplus: maxmanders: on the node with override_attributes
[2012-09-26 15:24:24 -0400] maxmanders: cheeseplus: Still a noob, so forgive my ignorance... where do these sit in my local chef-repo...
[2012-09-26 15:24:42 -0400] maxmanders: cheeseplus: Or do I pass a json string to knife for a particular node
[2012-09-26 15:24:59 -0400] cheeseplus: maxmanders: knife node edit nodename
[2012-09-26 15:25:30 -0400] maxmanders: Ah ok - much appeciated.  So these values don't actually appear locally, the knife node edit just updates the node values on the chef-server?
[2012-09-26 15:25:36 -0400] cheeseplus: the override attributes will be on the chef server
[2012-09-26 15:25:41 -0400] cheeseplus: correct
[2012-09-26 15:25:46 -0400] maxmanders: Cool - thanks for clearing that up
[2012-09-26 15:26:29 -0400] cheeseplus: so if you have something in your recipe that sets default[attribute] then the override_attributes on the node will be used instead
[2012-09-26 15:26:51 -0400] cheeseplus: maxmanders: http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2012-09-26 15:27:33 -0400] cheeseplus: maxmanders: you'll probably refer to that more than a few times
[2012-09-26 15:31:00 -0400] jblaine: maxmanders: Also, before you go setting a bunch of attributes directly on nodes...
[2012-09-26 15:31:16 -0400] jblaine: maxmanders: Consider using roles and setting the attributes there
[2012-09-26 15:31:55 -0400] jblaine: maxmanders: And store the role files in your repo so you can use a VCS
[2012-09-26 15:32:27 -0400] jblaine: maxmanders: edit roles/somerole.rb; knife role from file roles/somerole.rb = "Updated!"
[2012-09-26 15:36:43 -0400] cheeseplus: maxmanders: +1 for what jblaine says, my method was only answering if you wanted unique attributes on each node
[2012-09-26 15:52:27 -0400] joerussbowman: For anyone interested, I threw some quick notes up on my blog for getting chef-client running on a Solaris 11 server - http://joerussbowman.tumblr.com/post/32331563283/chef-quick-notes-installing-chef-client-on-solaris-11
[2012-09-26 16:02:14 -0400] maxmanders: jblaine: already using git; and would consider roles and environments - but in this case, we have a genuine need for per-node differences... cheers for the tips though!
[2012-09-26 16:16:49 -0400] maxmanders: FYI the specific node config is for a master/slave failover situation... both nodes will need to know the other is its slave; and then we'd need some way to failover with minimal intervention... (Win32/SQLServer)
[2012-09-26 16:31:30 -0400] JasonF: Is there a doc somewhere on custom bootstrap scripts? I see the examples in the repo, but some of the stuff it's calling, I can't find documented -- like <% config_contents =%> in ubuntu12.04-gems.erb
[2012-09-26 16:31:37 -0400] JasonF: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/ubuntu12.04-gems.erb
[2012-09-26 16:31:54 -0400] JasonF: the custom bootstrap doc in the wiki didn't contain any detailed information at all, from what I could tell.
[2012-09-26 16:33:13 -0400] mattray: JasonF: what are you trying to do? I recently was making custom bootstraps
[2012-09-26 16:33:55 -0400] JasonF: I'm migrating a bootstrap script for Ubuntu 10.04 to Ubuntu 12.04, and we used (basically) the stock ubuntu 10.04-apt bootstrap. I'm trying to implement an apt-based bootstrap for ubutnu 12.04 now as well
[2012-09-26 16:34:03 -0400] jtimberman: http://wiki.opscode.com/display/chef/Knife+Bootstrap and http://wiki.opscode.com/display/chef/Custom+Knife+Bootstrap+Script
[2012-09-26 16:34:05 -0400] JasonF: the only one you have in a repo is the gem install bootstrap
[2012-09-26 16:34:12 -0400] jtimberman: JasonF: seen those pages on the wiki?
[2012-09-26 16:34:29 -0400] JasonF: Yeah, just got done reading them before jumping in here
[2012-09-26 16:34:32 -0400] JasonF:   echo "chef    chef/chef_server_url    string  <%= @chef_config[:chef_server_url] %>" | debconf-set-selections
[2012-09-26 16:34:44 -0400] JasonF: ^ that's the part that from as far as I can tell, isn't working from 10.04 -> 12.04
[2012-09-26 16:35:15 -0400] JasonF: but I'm looking at how your build the configs for the gem-based install, and all you do is copy the variable "config_contents" into the file... and I can't find docs on what that var is/where it comes from
[2012-09-26 16:35:21 -0400] JasonF: guess I'm gonna dig through the code :(
[2012-09-26 16:36:02 -0400] jtimberman: JasonF: it comes from the knife bootstrap library in chef.
[2012-09-26 16:36:19 -0400] jtimberman: JasonF: its a helper method that replaces the contents in the rendered template (shell script) with the default config file.
[2012-09-26 16:36:26 -0400] jtimberman: you can totally replace it with something else if you want.
[2012-09-26 16:36:47 -0400] JasonF: I figured that's what it did, and instead of replacing it, I might just want to use it, I'd just like to know exactly what it does first.
[2012-09-26 16:37:40 -0400] jtimberman: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/core/bootstrap_context.rb#L57-80
[2012-09-26 16:37:43 -0400] jtimberman: thats the method
[2012-09-26 16:38:00 -0400] JasonF: sweet. That's exactly what I was fishing around Github for.
[2012-09-26 16:38:01 -0400] JasonF: Thanks!
[2012-09-26 16:38:02 -0400] jtimberman: lines 58-63 are the base config, and then additional lines are added
[2012-09-26 16:38:07 -0400] jtimberman: You're welcome.
[2012-09-26 16:38:33 -0400] JasonF: that's awesome, exactly what I was looking for.
[2012-09-26 16:44:05 -0400] anentropic: I'm having a problem with chef server + vagrant
[2012-09-26 16:44:24 -0400] anentropic: getting a 401 from Chef when doing `vagrant provision`
[2012-09-26 16:44:53 -0400] leifmadsen: after reading a post  this morning about test-kitchen, I was wondering if the way the mysql cookbook does it's include is maybe to make it work with test-kitchen and running its tests instead of via the minitest-handler cookbook?
[2012-09-26 16:45:03 -0400] leifmadsen: jtimberman: you're likely the best person to know the answer to that question...
[2012-09-26 16:46:49 -0400] anentropic: I posted more info about my issue on Vagrant's github https://github.com/mitchellh/vagrant/issues/1158
[2012-09-26 16:52:57 -0400] masterkorp: FATAL: Chef::Exceptions::FileNotFound: cookbook_file[/usr/lib/nagios/plugins/check_latency_from_graphite.rb] (nagios::check_latency_from_graphite line 3) had an error: cookbook nagios does not contain file files/default/plugins/check_latency_from_graphite.rb
[2012-09-26 16:53:00 -0400] masterkorp: what the heck
[2012-09-26 17:00:33 -0400] masterkorp:  source "default/plugins/check_latency_from_graphite.rb"
[2012-09-26 17:00:40 -0400] masterkorp: shall i remove default ?
[2012-09-26 17:04:45 -0400] drnfx: masterkorp i think i ran in to that same thing earleir
[2012-09-26 17:05:14 -0400] drnfx: for source, just use the name of the file
[2012-09-26 17:05:48 -0400] masterkorp: hmm
[2012-09-26 17:05:54 -0400] drnfx: cookbook_file "/srv/nginx-passenger-0.8.54_3.0.2-3.x86_64.rpm" do
[2012-09-26 17:05:54 -0400] drnfx:   source "nginx-passenger-0.8.54_3.0.2-3.x86_64.rpm"
[2012-09-26 17:05:54 -0400] drnfx:   mode 0777
[2012-09-26 17:05:54 -0400] drnfx:   owner "root"
[2012-09-26 17:05:54 -0400] drnfx:   group "root"
[2012-09-26 17:05:55 -0400] drnfx: end
[2012-09-26 17:06:00 -0400] masterkorp: foodcritic would have a warning for this
[2012-09-26 17:06:03 -0400] drnfx: im on a crappy irc clinet, did htat work?
[2012-09-26 17:06:12 -0400] drnfx: err did you see the enitre blob
[2012-09-26 17:06:18 -0400] masterkorp: drnfx: even if its under files/default/plugins/
[2012-09-26 17:06:26 -0400] masterkorp: yeah
[2012-09-26 17:06:56 -0400] drnfx: I have it as chef-repo/cookbooks/nginx/files/default
[2012-09-26 17:07:18 -0400] drnfx: have it in that dir, I had created a folder previously and that didn't work, I had to drop the files in the default dir
[2012-09-26 17:07:28 -0400] masterkorp: worked with plugins/name
[2012-09-26 17:07:43 -0400] drnfx: nice
[2012-09-26 17:07:53 -0400] masterkorp: so after testing
[2012-09-26 17:08:07 -0400] masterkorp: if there is any folder under default you need to specify it
[2012-09-26 17:08:26 -0400] masterkorp: so in this case i need to place plugins/file
[2012-09-26 17:08:43 -0400] masterkorp: being file in files/default/plugins/file
[2012-09-26 17:10:46 -0400] en0x: one more question... i have a template: http://wklej.org/id/837365/ now i want to add to it what kind of role it is... how i can do that?
[2012-09-26 17:12:17 -0400] jtimberman: masterkorp: drnfx "default" is implied in the path to the files or templates.
[2012-09-26 17:12:34 -0400] newb: Any way to version a Chef cookbook outside of the x.y.b method?
[2012-09-26 17:12:42 -0400] jtimberman: see http://wiki.opscode.com/display/chef/File+Distribution
[2012-09-26 17:12:45 -0400] jtimberman: file specificity section
[2012-09-26 17:12:57 -0400] masterkorp: thanks
[2012-09-26 17:13:05 -0400] jtimberman: leifmadsen: i haven't run mysql tests since the last release of the cookbook, and dont' reember which version of chef i used :\
[2012-09-26 17:13:33 -0400] leifmadsen: jtimberman: gotcha -- well I made a pull request today that allows it to work again with minitest-handler cookbook
[2012-09-26 17:13:44 -0400] leifmadsen: not sure how you ran them the first time around
[2012-09-26 17:13:52 -0400] leifmadsen: because minitest-handler cookbook uses the support directory
[2012-09-26 17:13:55 -0400] jtimberman: leifmadsen: "kitchen test"
[2012-09-26 17:14:13 -0400] jtimberman: which might pin the minitest-handler cookbook and libraries to a particular version
[2012-09-26 17:14:16 -0400] leifmadsen: gotcha, which I suppose is why I was asking how kitchen test does stuff, because it might conflict with minitest-handler cookbook and minitest-chef-handler
[2012-09-26 17:14:24 -0400] leifmadsen: gotcha
[2012-09-26 17:14:30 -0400] leifmadsen: my pull request makes it work with latest of both
[2012-09-26 17:15:36 -0400] jtimberman: yeah we're using this: https://github.com/opscode/test-kitchen/blob/master/config/Cheffile#L42-45
[2012-09-26 17:16:28 -0400] leifmadsen: jtimberman: oic... which is forked from btm's cookbook which I suspect is what I'm using
[2012-09-26 17:16:35 -0400] leifmadsen: as installed via 'knife cookbook install'
[2012-09-26 17:17:32 -0400] leifmadsen: maybe s/kotiri/btm/
[2012-09-26 17:18:09 -0400] leifmadsen: the btm cookbook seems to use a support/ directory for helpers now
[2012-09-26 17:19:26 -0400] jtimberman: gem minitest-chef-handler version 0.6.2 gets installed by test kitchen.
[2012-09-26 17:19:32 -0400] jtimberman: during the kitchen test run
[2012-09-26 17:20:25 -0400] leifmadsen: right, which is what I use too  and that's fine. It's the misalignment between the kotiri fork of minitest-handler-cookbook and the original
[2012-09-26 17:20:51 -0400] leifmadsen: if you use the original as installed via knife, then the mysql cookbook will fail to execute tests and raise an exception
[2012-09-26 17:21:39 -0400] anthroprose: anyone know why I would get a successful cookbook upload message but *never* see it serverside (with hosted chef...)?
[2012-09-26 17:27:21 -0400] JasonF: When I'm running knife bootstrap, it appears @chef_config url variables are getting populated with YOU_MUST_SET_CHEF_URL -- I can't find how that info is populated to ensure that variable is properly set
[2012-09-26 17:30:12 -0400] jtimberman: Twirrim: hey
[2012-09-26 17:30:41 -0400] jtimberman: leifmadsen: we definitely should get the current released version working under test kitchen, no doubt.
[2012-09-26 17:31:00 -0400] jtimberman: JasonF: that comes from your knife.rb
[2012-09-26 17:33:40 -0400] JasonF: jtimberman: Yeah, I'm slowly figuring it out. Bootstrap file consisting of <%= @chef_config.inspect %> followed by exit 127 was really revealing
[2012-09-26 17:45:08 -0400] justinlilly: I want to set the ulimit for a user to something greater than the default. This file lives in /etc/security/limits.conf for my system. How can I determine if this is under management of an existing chef recipe?
[2012-09-26 17:46:21 -0400] joshhertz: add a comment and force a chef run. Watch the output of the log to see if it changes the file.
[2012-09-26 17:46:27 -0400] joshhertz: it's a quick and dirty way.
[2012-09-26 17:47:41 -0400] justinlilly: assuming its not managed, do I just make a new cookbook just for that? Or lump it in with an existing cookbook? Something slightly different?
[2012-09-26 17:48:37 -0400] rocket: justinlilly unfortunately both ways work .. :)  Its really a matter of your workflow and how you would remember where the work is being done.
[2012-09-26 17:49:09 -0400] en0x: i have issue uploading cookbooks... to my chef server http://wklej.org/id/837404/ ... the directories are being created in /var/chef/sandboxes but that's about it
[2012-09-26 17:49:34 -0400] joshhertz: and if when you have a template that's managing a file, it's always a good idea to put "## This File is managed by Chef and any changes will be overwritten" at the head of the file.
[2012-09-26 17:51:33 -0400] joshhertz: I've found that if you have multiple cookbooks at mod a shared file like that, you should have a seperate cookbook for managing that "thing" and have your recipes call it. For instance, if you need to change limits for a tomcat user in one recipe and change limits for a mysql user in another, they should both call a different cookbook that manages that file.
[2012-09-26 17:51:39 -0400] joshhertz: just my opinion on it.
[2012-09-26 17:52:25 -0400] justinlilly: joshhertz: sounds legit. I think what I'll do for now is manage it in my "app" cookbook, with a comment saying "This is managed by the app cookbook", then refactor it when there's another consumer of it.
[2012-09-26 18:01:26 -0400] ekristen: how do I run a recipe against a machine that has already been bootstrapped?
[2012-09-26 18:02:02 -0400] justinlilly: ekristen: hosted chef? If so, you can add a recipe to the node via the opscode management console.
[2012-09-26 18:02:23 -0400] ekristen: justinlilly: my own hosted chef
[2012-09-26 18:02:43 -0400] ekristen: does adding the recipe to the node automatically execute it?
[2012-09-26 18:02:49 -0400] ekristen: or do you have to run something to execute it?
[2012-09-26 18:03:22 -0400] justinlilly: ekristen: it will execute when chef-client runs next.
[2012-09-26 18:03:35 -0400] justinlilly: which you can force by doing `kill -USR1 <pid_of_chef-client>`
[2012-09-26 18:03:40 -0400] ekristen: ok what defines when chef-client runs again?
[2012-09-26 18:03:41 -0400] ekristen: ok
[2012-09-26 18:03:47 -0400] ekristen: is there a time period as to when it runs?
[2012-09-26 18:03:53 -0400] joshhertz: around 30 minutes.
[2012-09-26 18:03:59 -0400] joshhertz: and it can be customized.
[2012-09-26 18:04:08 -0400] ekristen: ok cool
[2012-09-26 18:04:09 -0400] ekristen: thanks!
[2012-09-26 18:04:18 -0400] joshhertz: also, cli to add recipes:
[2012-09-26 18:04:36 -0400] joshhertz: knife node run_list add NODENAME recipe:COOKBOOK::RECIPE
[2012-09-26 18:05:46 -0400] joshhertz: err
[2012-09-26 18:05:47 -0400] joshhertz: knife node run_list add NODENAME recipe[COOKBOOK::RECIPE]
[2012-09-26 18:06:08 -0400] joshhertz: also, from the client server "sudo chef-client" does a run and outputs to stdout
[2012-09-26 18:06:39 -0400] ekristen: ok cool
[2012-09-26 18:06:40 -0400] ekristen: thanks
[2012-09-26 18:08:03 -0400] jwitrick: what is the best way to tell a resource that a status code of '0' or '255' is ok.
[2012-09-26 18:09:04 -0400] io_syl: Is status.opscode.com down?
[2012-09-26 18:09:27 -0400] sivajag: hey morning everyone
[2012-09-26 18:09:28 -0400] chip-: http://www.downforeveryoneorjustme.com/status.opscode.com
[2012-09-26 18:09:46 -0400] sivajag: as anybody had any success with running chef in linode using knife-linode
[2012-09-26 18:10:03 -0400] io_syl: chip-: thx lol
[2012-09-26 18:10:19 -0400] sivajag: I am getting this error
[2012-09-26 18:10:20 -0400] sivajag: ERROR: knife encountered an unexpected error
[2012-09-26 18:10:20 -0400] sivajag: This may be a bug in the 'linode datacenter list' knife command or plugin
[2012-09-26 18:10:21 -0400] sivajag: Please collect the output of this command with the `-VV` option before filing a bug report.
[2012-09-26 18:10:23 -0400] sivajag: Exception: NoMethodError: undefined method `each_with_object' for {"LOCATION"=>"Dallas, TX, USA", "DATACENTERID"=>2}:Hash
[2012-09-26 18:20:32 -0400] yfeldblum: sivajag, each_with_object is new in ruby v1.9
[2012-09-26 18:20:55 -0400] sivajag: pooh need ruby v1.9 for using knife-linode
[2012-09-26 18:21:02 -0400] sivajag: pooh -> ooh
[2012-09-26 18:21:43 -0400] sivajag: thanks @yfelblum
[2012-09-26 18:21:51 -0400] sivajag: i will update ruby and try
[2012-09-26 18:39:33 -0400] Twirrim: jtimberman: hey
[2012-09-26 18:39:35 -0400] rocket: does anyone have a chef cookbook that will install mysql 5.5 on centos 6?
[2012-09-26 18:40:03 -0400] Twirrim: jtimberman: not sure quite why/how, but somehow had ended up with rabbitmq 1.4.0 :-/
[2012-09-26 18:40:38 -0400] jtimberman: Twirrim: Ah ha. Does 1.6.2 from the community site work for you now?
[2012-09-26 18:42:31 -0400] Twirrim: yeah it's fine :)
[2012-09-26 18:42:40 -0400] jtimberman: Cool.
[2012-09-26 18:45:04 -0400] newb: Hey guys. Is there anyway to version a Cookbook aside from the standard version variable? Is there such a thing as a build variable?
[2012-09-26 18:51:32 -0400] jtimberman: newb: no, just 'version' in the metadata.
[2012-09-26 18:52:53 -0400] dwhsix: if I create a node with "knife ec2 server create environment foo"
[2012-09-26 18:53:14 -0400] dwhsix: how do I access the envirobnment name on the node?  though Chef::Config[:environment] would do it, but seems not...
[2012-09-26 18:53:54 -0400] newb: jtimberman: Thanks.
[2012-09-26 18:53:57 -0400] jtimberman: dwhsix: do you want to *set* the environment when launching that instance?
[2012-09-26 18:53:59 -0400] jtimberman: use -E
[2012-09-26 18:54:16 -0400] dwhsix: I thought dash dash environment was synonym
[2012-09-26 18:54:24 -0400] dwhsix: no I *think* the node is in the environment
[2012-09-26 18:54:30 -0400] jtimberman: i cannot read.
[2012-09-26 18:54:34 -0400] dwhsix: just need to access the environment name
[2012-09-26 18:54:40 -0400] jtimberman: how do you want to access it?
[2012-09-26 18:54:42 -0400] jtimberman: like, in a recipe?
[2012-09-26 18:54:47 -0400] dwhsix: yeah
[2012-09-26 18:54:49 -0400] jtimberman: or querying the chef server with knife node show
[2012-09-26 18:54:52 -0400] jtimberman: node.chef_environment
[2012-09-26 18:55:02 -0400] jtimberman: its a method on the node object that returns its environment.
[2012-09-26 18:55:19 -0400] dwhsix: oh - is that equivalent to node[:chef_environment] ?
[2012-09-26 18:55:30 -0400] dwhsix: ha - no
[2012-09-26 18:55:34 -0400] dwhsix: just tested
[2012-09-26 18:55:35 -0400] dwhsix: ok
[2012-09-26 18:55:37 -0400] dwhsix: that should do it
[2012-09-26 18:55:41 -0400] jtimberman: node[:chef_environment] is not a thing :)
[2012-09-26 18:55:50 -0400] dwhsix: no, apparently it isn't ;-)
[2012-09-26 18:55:55 -0400] jtimberman: that would be an attribute, which you could create, but then you would be confused.
[2012-09-26 18:55:59 -0400] jtimberman: :)
[2012-09-26 18:56:10 -0400] dwhsix: I think I've been bitten by this before once or 300 times
[2012-09-26 18:56:48 -0400] dwhsix: thx!
[2012-09-26 18:58:09 -0400] sunil__: question about managing a python app with supervisor and chef..
[2012-09-26 18:59:47 -0400] sunil__: I have various programs I am looking to manage under supervisor, chef cookbook is great but wondering the best way to approach the setup..I want to be able to manage certain paramours dynamically for all of those programs..in specific number or processors etcI was thinking either building a data bag with num_proc values for each program, or just define the program and its attributes in a role itself..
[2012-09-26 19:00:39 -0400] sunil__: anyone have experience with supervisor/chef mgmt?
[2012-09-26 19:04:30 -0400] cwj: i use chef to deploy supervisor and configure supervisor to manage celery processes, afaik i am not using the supervisord cookbook from the community site though
[2012-09-26 19:10:57 -0400] Embalmed: quick question... i'm trying to identify network switches in my node list to create a snmp munin configuration, but there is no chef client running on the switch obviously, so i think applying a recipe will never actually get run
[2012-09-26 19:11:04 -0400] cwj: https://github.com/needle-cookbooks/chef-celery this cookbook provides definitions that use supervisord resources from this fork of a supervisord cookbook https://github.com/needle-cookbooks/chef-supervisord
[2012-09-26 19:11:24 -0400] Embalmed: can i put an attribute directly into the node json?  is that the best way to do it?
[2012-09-26 19:12:22 -0400] jtimberman: Embalmed: knife node edit NODENAME
[2012-09-26 19:12:29 -0400] jtimberman: Embalmed: will open $EDITOR with the node object
[2012-09-26 19:12:40 -0400] jtimberman: Embalmed: you can also dump the node to a file and edit that and upload it.
[2012-09-26 19:13:14 -0400] jtimberman: knife node show NODENAME -Fj -l > NODENAME.json; vi NODENAME.json; knife node from file NODENAME.json
[2012-09-26 19:13:34 -0400] jtimberman: TIMTOWTDI :)
[2012-09-26 19:13:55 -0400] jtimberman: if you want to use the webui, you can do that too, but its a bit clunky compared to using an editor.
[2012-09-26 19:18:20 -0400] thedeeno: will chef's user resource automatically create its group if it doesn't exist?
[2012-09-26 19:19:10 -0400] jtimberman: thedeeno: i don't think so necessarily, depends on the underlying platform's useradd command.
[2012-09-26 19:20:29 -0400] Embalmed: eh, my power just dumped so i lost connect to my bnc, so if anyone responded i missed it
[2012-09-26 19:21:12 -0400] bluepojo: thedeeno: CentOS doesn't, at least
[2012-09-26 19:21:29 -0400] bluepojo: I'll get "group doesn't exist" errors
[2012-09-26 19:25:40 -0400] thedeeno: bluepojo: thanks, yeah just wanted to drop this group resource out if it wan't needed. ty
[2012-09-26 19:32:35 -0400] drape: i'm passing a hash via json to chef-client and when i change the contents it adds another object instead of removing the old.  is there a way around this?  does that even make sense ? :)
[2012-09-26 19:33:13 -0400] Embalmed: can i just set an attribute on a node ?   i can't use a run_list to do it since the device doesn't support running chef-client
[2012-09-26 19:33:41 -0400] Embalmed: i just need to set somethign so i can search for it in my munin server cookbook
[2012-09-26 19:34:22 -0400] drape: Embalmed: tried using knife?
[2012-09-26 19:34:38 -0400] Embalmed: yeah but every time i set an attribute it is gone the next time i edit it
[2012-09-26 19:36:28 -0400] drape: so, when you knife node edit host and write it out you don't get an error?  and when you immediately open it back is the attribute there?
[2012-09-26 19:37:09 -0400] Embalmed: no error and no, the attribute is gone
[2012-09-26 19:38:28 -0400] Embalmed: hmm, if i add it in the normal {} block it seems to stay   must have been doing it wrong
[2012-09-26 19:38:34 -0400] drape: ah
[2012-09-26 19:41:12 -0400] fractaloop: Is there a way I can get the number of CPUs from Ohai during my recipe run?
[2012-09-26 19:41:34 -0400] jtimberman: fractaloop: node['cpu']['total']
[2012-09-26 19:41:43 -0400] fractaloop: Woot thanks!
[2012-09-26 19:41:49 -0400] jtimberman: may not be persent on some platforms (like osx, iirc)
[2012-09-26 19:42:22 -0400] fractaloop: We're only deploying to ubuntu and possibly centos...I'm sure those are fine, right?
[2012-09-26 19:42:36 -0400] Embalmed: so if i add   a block  normal: { munin: {   "snmp": true  }  }
[2012-09-26 19:42:43 -0400] Embalmed: how do i find it via search?
[2012-09-26 19:42:46 -0400] fractaloop: Also, why are some node attributes strings while others are symbols? Is there a convention
[2012-09-26 19:42:47 -0400] fractaloop: ?
[2012-09-26 19:42:51 -0400] drape: can you overrite attributes stored on the server via local json? referring to previous question about a hash.
[2012-09-26 19:44:02 -0400] leifmadsen: drape: http://wiki.opscode.com/display/chef/Attributes  <-- learn about precedence
[2012-09-26 19:44:04 -0400] drape: Embalmed node:[munin][:snmp] ?
[2012-09-26 19:44:11 -0400] leifmadsen: incredibly important to understand
[2012-09-26 19:46:00 -0400] Embalmed: knife search node 'munin:snmp' works yay
[2012-09-26 19:47:29 -0400] drape: leifmadsen: i'm still at a loss :(
[2012-09-26 19:47:55 -0400] drape: dumfries: Normal attributes are not reset
[2012-09-26 19:48:00 -0400] drape: er
[2012-09-26 19:53:46 -0400] leifmadsen: jtimberman: heh, just found that there is a pull request open against test-kitchen to fix the minitest-handler cookbook thing we discussed earlier
[2012-09-26 19:55:55 -0400] jtimberman: leifmadsen: cool :)
[2012-09-26 19:56:50 -0400] leifmadsen: jtimberman: linked the issues in jira as well so they get fixed at the same time
[2012-09-26 19:58:30 -0400] jtimberman: leifmadsen: <3
[2012-09-26 19:58:43 -0400] leifmadsen: heh, I've done my fair share of bug triage :D
[2012-09-26 19:59:27 -0400] leifmadsen: looking forward to 10.14.4 and these changes which will make all my automated testing work again for the first time since 0.10.8 :)
[2012-09-26 19:59:39 -0400] hekman: hey guys, kind of curious about this: http://tickets.opscode.com/browse/CHEF-2627?focusedCommentId=27442#comment-27442
[2012-09-26 20:02:00 -0400] leifmadsen: I suppose... curious in what way?
[2012-09-26 20:02:50 -0400] hekman: curious about my comment... wondering if that is not calling exit for a reason, or if it was just overlooked
[2012-09-26 20:04:15 -0400] j|: the service resource's pattern attribute is regular expression, yes?
[2012-09-26 20:04:22 -0400] j|: and it can handle groups?
[2012-09-26 20:05:07 -0400] j|: do I need to group the alternatives or can I just pass them in a vertical bar-seperated list?
[2012-09-26 20:12:56 -0400] philsturgeon: hey guys. I know nobody really fancies digging through exceptions but I have errors installing rabbitmq https://gist.github.com/db1bb27e8dd311738239
[2012-09-26 20:13:21 -0400] philsturgeon: it seems to give different errors each time. i have listed there the first error, which when i run vagrant provision (or sudo chef-client) again it gives the second
[2012-09-26 20:14:06 -0400] philsturgeon: jtimberman: hey Joshua, could I steal a little of your time on this one?
[2012-09-26 20:16:44 -0400] philsturgeon: if i sudo apt-get remove rabbitmq-server then run chef-client again it works fine. this happens each time i fire up a node
[2012-09-26 20:16:44 -0400] j|: philsturgeon: apt-get is failing
[2012-09-26 20:17:25 -0400] philsturgeon: jl I had a terrible internet this morning, but the connection should be better now. is it likely to be some crappy "connection timeout" stuff?
[2012-09-26 20:18:12 -0400] j|: possibly. unfortunately apt-get only returns 0 or 100
[2012-09-26 20:18:12 -0400] philsturgeon: ahh its rabbitmq again. seems to be failing consistently (when i remove rabbitmq and try again, or start from scratch, its always the same error)
[2012-09-26 20:18:52 -0400] j|: philsturgeon: and 100 seems to be for every error.
[2012-09-26 20:18:53 -0400] j|: :P
[2012-09-26 20:19:59 -0400] philsturgeon: jl that is useless! heh. ok well running it manually gives me some input prompt crap about an existing config file being in place, so its possible a previous error spooked it (potentially due to dodgy connection)
[2012-09-26 20:20:17 -0400] philsturgeon: so, probably resolved. thanks
[2012-09-26 20:20:54 -0400] j|: yea, that will do it
[2012-09-26 20:20:56 -0400] drape: i'm still trying to understand attribute persistence and how to delete/override normal attributes via new json.  is there a proper way to use node.delete then load in new json?
[2012-09-26 20:21:15 -0400] j|: manual page of apt-get says it will abort if run with '-y' in these cases
[2012-09-26 20:21:22 -0400] j|: which means it will return 100
[2012-09-26 20:21:29 -0400] j|: and thus chef-client will see it as a fail
[2012-09-26 20:21:32 -0400] j|: and abort
[2012-09-26 20:22:08 -0400] j|: philsturgeon: just make sure you don't overwrite your own custom config
[2012-09-26 20:22:10 -0400] j|: :)
[2012-09-26 20:22:48 -0400] philsturgeon: jl ahh it wasnt custom config, this is a vagrant box ive destroyed and brought up a bunch of times - shouldnt be anything there. i just missed one error then tried again and got a new error. thanks for all your explaining, i have a way better understanding of whats happening
[2012-09-26 20:23:05 -0400] philsturgeon: must remember, when a command fails try it manually
[2012-09-26 20:23:43 -0400] mhalligan: has anyone run into an issue where ruby-shadow is installed, but the users cookbook still errors with "unable to load ruby-shadow", on ubuntu? I'm thinking maybe there's a mystery dependency for the ruby shadow on the system side, that's not being met
[2012-09-26 20:24:35 -0400] j|: philsturgeon: yea, always a good start.
[2012-09-26 20:25:16 -0400] mhalligan: (I'm using the omnibus packages)
[2012-09-26 20:27:58 -0400] newb: Hey everyone. Is it possible to upload a specific version of a cookbook with knife?
[2012-09-26 20:30:46 -0400] j|: newb, as knife usually runs in a git repo, I'm going to guess the expected workflow is that you have a specific branch you have checked out and you can use the --freeze and --force options to the cookbook command to manage the server's view of the cookbook version. Just a guess tho
[2012-09-26 20:31:41 -0400] newb: jl: I'm actually going to have several different versions of the cookbooks locally..
[2012-09-26 20:34:20 -0400] j|: newb: what's your workflow?
[2012-09-26 20:49:11 -0400] yfeldblum: newb, why?
[2012-09-26 20:51:00 -0400] newb: To test recipes with different source files..
[2012-09-26 20:51:37 -0400] drape: so there is no way to overrite node attributes via passed json since they are merged?  any other alternatives beside node.delete(:attr) at the end of the recipe?
[2012-09-26 21:10:05 -0400] gyre008: is there any cookbook for a general Rack application guys ? I haven't found anything in Community cookbooks ...
[2012-09-26 21:10:13 -0400] gyre008: neither on github
[2012-09-26 21:10:41 -0400] yfeldblum: newb, there's always branches
[2012-09-26 21:11:12 -0400] yfeldblum: drape, not sure i understood the question
[2012-09-26 21:15:40 -0400] mhalligan: jtimberman: I seem to have 0.6.0 of your virtual box cookbook installed, but the version on github is 0.5.0
[2012-09-26 21:15:43 -0400] drape: yfeldblum: i have a hash that i'd like to add/remove objects to/from.  i'm passing these attributes from local json.  it only adds objects to the node[:hash]
[2012-09-26 21:15:49 -0400] mhalligan: jtimberman: any idea where to go to find the latest?
[2012-09-26 21:16:43 -0400] yfeldblum: drape, what hash is this? just a normal ruby hash, or is it node data?
[2012-09-26 21:18:31 -0400] rava: is anyone else getting no public key errors when trying to add the opscode repo to a lenny machine?
[2012-09-26 21:18:54 -0400] drape: yfeldblum: "keys": [ { "item": { "name": 1 } }, { "item": { "name": 2 } } ]
[2012-09-26 21:20:59 -0400] drnfx: We have been using git to keep track of our modifications to our chef-repo, but one thing I notice is whenever I upload the cookbook to our chef-server, version 0.1.0 is alwyas the version applied
[2012-09-26 21:21:09 -0400] yfeldblum: drape, so you have a hash, you have objects, you have attributes, there's a "local json" (are you using chef-solo or chef-client?), and you have node[:hash] ... i'm not sure what the relationships between all these things are, or even what all these things are
[2012-09-26 21:21:09 -0400] drnfx: is there an extra step I am missing to tie in git with knife?
[2012-09-26 21:21:45 -0400] drape: yfeldblum: ha, understood
[2012-09-26 21:22:06 -0400] rava: drnfx: are you updating the metadata.rb file?
[2012-09-26 21:22:54 -0400] drnfx: negative... knew it was something right under my nose.
[2012-09-26 21:23:12 -0400] yfeldblum: drape, from a higher level, what are you trying to accomplish?
[2012-09-26 21:23:52 -0400] drape: yfeldblum: building a iptables cookbook that you can add/remove rules using node data
[2012-09-26 21:24:02 -0400] rava: drnfx: hehe, no worries. it once took me 3 days of bashing my head against the keyboard trying to install chef-server only to discover it was failing because i was using special characters for the rabbitmq password, even though it said not to in plain english in the ncurses install menu >.>
[2012-09-26 21:24:34 -0400] drape: problem is rules (objects in that hash) are never removed, only updated.
[2012-09-26 21:24:34 -0400] yfeldblum: drape, why do it that way?
[2012-09-26 21:24:57 -0400] drape: yfeldblum: i'm hardheaded
[2012-09-26 21:26:44 -0400] drape: suggestions?
[2012-09-26 21:29:25 -0400] yfeldblum: drape, chef-client or chef-solo?
[2012-09-26 21:29:47 -0400] jtimberman: mhalligan: there's a 0.7.1 on the community site, but i didn't author it.
[2012-09-26 21:29:56 -0400] drape: yfeldblum: chef-client
[2012-09-26 21:30:37 -0400] drape: yfeldblum: i understand from the docs that local json is merged w/server node attr
[2012-09-26 21:31:15 -0400] drape: but didn't know if there was a way todo what i'm trying
[2012-09-26 21:32:47 -0400] yfeldblum: drape, most people don't use local json with chef-client because that's really for 1) chef-solo and 2) the initial chef-client run only which is usually triggered in bootstrap
[2012-09-26 21:33:50 -0400] drape: yfeldblum: makes sense
[2012-09-26 21:34:30 -0400] drape: so most ppl don't modify their node attributes regularly?
[2012-09-26 21:34:53 -0400] mhalligan: jtimberman: hrm, ok.
[2012-09-26 21:34:54 -0400] bluepojo: I rarely do
[2012-09-26 21:34:54 -0400] jtimberman: drape: not really.
[2012-09-26 21:35:06 -0400] jtimberman: drape: we recommend setting attributes at the role level, rather than the node directly
[2012-09-26 21:35:10 -0400] jtimberman: modifying nodes leads to snowflakes.
[2012-09-26 21:35:13 -0400] bluepojo: I only edit node attributes if I'm troubleshooting something and need to mess with a specific node
[2012-09-26 21:35:17 -0400] jtimberman: unique and special snowflakes.
[2012-09-26 21:35:19 -0400] bluepojo: but that's always temporary
[2012-09-26 21:35:32 -0400] mhalligan: it would be nice if they pointed to their github url inside the read me
[2012-09-26 21:36:22 -0400] drape: so it sounds like i need to be running chef-solo for tasks like this.
[2012-09-26 21:36:58 -0400] yfeldblum: drape, most people who want to modify the node attributes of individual nodes will use `knife node edit`, but it's in general best practice with chef-client to avoid modifying individual nodes and instead try to put things into recipes, definitions, roles, environments, etc
[2012-09-26 21:38:23 -0400] yfeldblum: drape, you seem to have a problem, and have decided upon the one and only solution in the universe but are stuck with an implementation problem ... but maybe there are other ways of solving the original problem?
[2012-09-26 21:39:03 -0400] drape: apparently i've been running chef in a not so optimal way :).  i have alot of snowflakes...
[2012-09-26 21:39:18 -0400] drape: but i thought that was ok
[2012-09-26 21:40:39 -0400] yfeldblum: drape, the chef way is anti-snowflake
[2012-09-26 21:41:23 -0400] jtimberman: drape: its totally fine to have snowflakes for now, but as you probably know its hard to maintain, and you move to patterns that reduce or remove the snowflakes over time.
[2012-09-26 21:42:11 -0400] jtimberman: and yes, we're anti-snowflake around here. no one likes the situation of "that one server" - you know, the one that was built carefully by hand by three admins over 6 years and the last time it rebooted it took down half the site.
[2012-09-26 21:42:18 -0400] jtimberman: (for example)
[2012-09-26 21:42:29 -0400] rep0st: lol
[2012-09-26 21:42:32 -0400] drape: nice
[2012-09-26 21:42:47 -0400] rep0st: hence my best practices comment from a couple days ago
[2012-09-26 21:42:56 -0400] chip-: (raise your hand if you both know that server and have built that server)
[2012-09-26 21:42:57 -0400] jtimberman: the goal is moving away from things that are hard to manage (one off configs) to things that are easy to manage (ubiquitous, easy to replace services)
[2012-09-26 21:42:59 -0400] rep0st: mmm...what's snowflakes exactly?
[2012-09-26 21:43:07 -0400] rep0st:  /raiseHand
[2012-09-26 21:43:29 -0400] jtimberman: rep0st: every snowflake (like the real ones that fall from clouds) is unique and different.
[2012-09-26 21:43:37 -0400] rep0st: gotcha
[2012-09-26 21:43:48 -0400] jtimberman: snowflake servers are generally ones built by hand and have unique and special configs.
[2012-09-26 21:44:09 -0400] rep0st: i actually had to build one two weeks ago
[2012-09-26 21:44:16 -0400] rep0st: =X
[2012-09-26 21:44:57 -0400] jtimberman: chip-: with date +%F timestamped filename version control right?
[2012-09-26 21:44:58 -0400] rep0st: =*(
[2012-09-26 21:45:21 -0400] rep0st: lol love that style of vc
[2012-09-26 21:45:25 -0400] jtimberman: cp /etc/hosts /etc/hosts-jt.`date +%F`
[2012-09-26 21:45:27 -0400] chip-: jtimberman: conffile.bak.yyyy-mm-dd-initials
[2012-09-26 21:45:34 -0400] jtimberman: yup ;)
[2012-09-26 21:45:47 -0400] drape: so, say i have a couple hundred servers running apache each on a different port.  that port # would be in the node data.  thats not bad is it?
[2012-09-26 21:46:25 -0400] rep0st: lol my first question would be why are they running on a diff port
[2012-09-26 21:46:35 -0400] jtimberman: drape: its not *bad*, but the "Chef Way" would be calculate the port in a recipe.
[2012-09-26 21:46:51 -0400] jtimberman: rep0st: i've seen some use cases where that occurs
[2012-09-26 21:47:13 -0400] drape: rep0st: fantasyland
[2012-09-26 21:47:40 -0400] rep0st: i++ kinda of incrementation?
[2012-09-26 21:48:04 -0400] sntxrr: chip-: I mostly kicked that snowflake server over by accident due to bad power cabling tie offs. 30-40 minute "warmup" time to recache. Execs swore they lost millions every minute it was down
[2012-09-26 21:48:16 -0400] drape: i assume the hostnames like that too, all calculated via roles, etc?
[2012-09-26 21:48:21 -0400] jtimberman: its probably be better to do a virtualhost -> port mapping in e.g. a data bag.
[2012-09-26 21:48:24 -0400] sntxrr: which is funny, I never saw a single million
[2012-09-26 21:48:35 -0400] drape: (facepalm)
[2012-09-26 21:48:38 -0400] nwjsmith: I'm having trouble with hosted chef. It won't let me upload the ohai v1.1.2 cookbook with knife. I'm getting a `Merb::ControllerExceptions::Forbidden`. Has anyone seen behaviour like this?
[2012-09-26 21:49:05 -0400] jtimberman: nwjsmith: can you run knife cookbook upload ohai -VV and gist/pastebin the output
[2012-09-26 21:49:15 -0400] chip-: sntxrr: Are the execs willing to dedicate $500k to replacing it with a properly scaled solution?
[2012-09-26 21:49:25 -0400] jtimberman: nwjsmith: and if its on hosted chef, you can also open a support request via support@opscode.com
[2012-09-26 21:49:26 -0400] chip-: sntxrr: If "No," then it really isn't THAT valuable, now is it?
[2012-09-26 21:49:58 -0400] sntxrr: they weren't. though when they lost even more millions due to lack of DB backups, suddenly the DBA that had been screaming about backups for months had a blank check
[2012-09-26 21:50:10 -0400] sntxrr: we'll just say I chose to leave that place of employment pretty quickly
[2012-09-26 21:50:34 -0400] chip-: They do not sound like they're very good at calculating risk/reward scenarios, no.
[2012-09-26 21:51:33 -0400] sntxrr: no, not really
[2012-09-26 21:51:45 -0400] sntxrr: in fact, I'd go so far as to not recommend EVER working for them
[2012-09-26 21:51:53 -0400] sntxrr: though I might be a bit biased :D
[2012-09-26 21:51:59 -0400] nwjsmith: jtimberman: https://gist.github.com/cd172adb0b94397dc403
[2012-09-26 21:52:47 -0400] jtimberman: nwjsmith: do you have privilege via the ACL to upload that cookbook? is it frozen in an environment at that version?
[2012-09-26 21:53:49 -0400] drape: yfeldblum jtimberman thx for the help. i'll be back with more questions.  maybe i can right this ship...
[2012-09-26 21:54:36 -0400] jtimberman: drape: :-)
[2012-09-26 21:54:38 -0400] jtimberman: Good luck!
[2012-09-26 21:54:53 -0400] nwjsmith: jtimberman: in the gui, I have permissions to both create and list cookbooks. The ohai cookbook isn't listed in the cookbooks tab of the UI though, and isn't listed in `knife cookbook list`.
[2012-09-26 21:56:31 -0400] xuru: Anyone have a good example of using http_request resource as a way to not download large files if it hasn't changed sense the last time it was downloaded?
[2012-09-26 21:56:56 -0400] bluepojo: not_if { check md5 sum }
[2012-09-26 21:57:43 -0400] xuru: bluepojo: but I would have to download it to get the md5 sum
[2012-09-26 21:57:55 -0400] bluepojo: no, save the md5 sum from the last time you downloaded it
[2012-09-26 21:58:01 -0400] bluepojo: or oh
[2012-09-26 21:58:02 -0400] bluepojo: I mean
[2012-09-26 21:58:09 -0400] bluepojo: sometimes packages have md5s available
[2012-09-26 21:58:18 -0400] bluepojo: you don't have to always calculate it yourself
[2012-09-26 21:58:35 -0400] xuru: not this one
[2012-09-26 21:58:58 -0400] xuru: Here is what I'm trying now, but it doesn't seem to work:  git://gist.github.com/3758731.git
[2012-09-26 21:58:59 -0400] bluepojo: some cookbooks specify the md5 of the artifact in the attributes
[2012-09-26 21:59:11 -0400] bluepojo: so you calculate it yourself and check it in
[2012-09-26 21:59:21 -0400] bluepojo: so when it runs in production, it has it available
[2012-09-26 22:00:08 -0400] nwjsmith: jtimberman: I have no cookbook versions specified in the environment
[2012-09-26 22:00:13 -0400] xuru: bluepojo: I'm downloading it from outside my environment, so I don't have access to it's md5 checksum without having to download it and check
[2012-09-26 22:00:20 -0400] bluepojo: yeah that's what I mean.
[2012-09-26 22:00:24 -0400] bluepojo: download it to your dev machine
[2012-09-26 22:00:26 -0400] bluepojo: md5 it
[2012-09-26 22:00:30 -0400] bluepojo: save the md5 in an attribute
[2012-09-26 22:00:43 -0400] bluepojo: use the attribute to compare vs. the one you have on the production box
[2012-09-26 22:00:58 -0400] bluepojo: but that's manual
[2012-09-26 22:01:01 -0400] xuru: This is in a cookbook recipe, and it currently downloads it everytime, and checks the checksum
[2012-09-26 22:01:26 -0400] xuru: I don't want to have to download it everytime only when it changes on the other end
[2012-09-26 22:01:34 -0400] jtimberman: nwjsmith: those 403's can sometimes be transient from s3, iirc. can you open a ticket with support?
[2012-09-26 22:01:59 -0400] nwjsmith: jtimberman: for sure
[2012-09-26 22:02:19 -0400] jtimberman: nwjsmith: thanks :D
[2012-09-26 22:26:23 -0400] _0x783czar: Question: I just finised setting up my OpenSource Chef Server.  I creaded a client for myself, placed the key on my management workstation, configured knife, and even grabbed the validator key.  Now I'm trying to upload my stuff to the server from my repo.  Only the roles got updated, I got a 500 error when uploading cookbooks.  Has anyone elese encountered this problem?
[2012-09-26 22:26:39 -0400] bluepojo: what does the 500 say?
[2012-09-26 22:26:42 -0400] bluepojo: just 500 no messae?
[2012-09-26 22:26:44 -0400] bluepojo: message
[2012-09-26 22:26:55 -0400] c_t: urk
[2012-09-26 22:26:55 -0400] _0x783czar: bluepojo: Internal Server Error
[2012-09-26 22:27:02 -0400] bluepojo: are all chef services running?
[2012-09-26 22:27:07 -0400] c_t: massive CPAN + Mountain Lion problems
[2012-09-26 22:27:11 -0400] bluepojo: solr, expander, server
[2012-09-26 22:27:25 -0400] _0x783czar: bluepojo: they were the last time I checked, I'll check again
[2012-09-26 22:27:33 -0400] bluepojo: sometimes that'll cause 500s
[2012-09-26 22:27:37 -0400] bluepojo: not sure in this case
[2012-09-26 22:30:15 -0400] _0x783czar: bluepojo: I can't find expander...
[2012-09-26 22:30:32 -0400] _0x783czar: bluepojo: nm found it
[2012-09-26 22:31:09 -0400] _0x783czar: bluepojo: so yes it looks like they're all running
[2012-09-26 22:31:13 -0400] rava: _0x783czar: what's in the chef-server logs?
[2012-09-26 22:32:25 -0400] _0x783czar: rava: run that on the server?
[2012-09-26 22:33:50 -0400] bluepojo: rava: he's failing on cookbook upload
[2012-09-26 22:34:15 -0400] rava: _0x783czar: oh, my bad, misread that it was uploading the cookbook not running the client
[2012-09-26 22:34:22 -0400] bluepojo: _0x783czar: you can do knife cookbook upload something -vv
[2012-09-26 22:34:27 -0400] bluepojo: to get more verbose output
[2012-09-26 22:34:31 -0400] rava: _0x783czar: maybe trying knife uoload with -vv
[2012-09-26 22:34:35 -0400] bluepojo: but a 500 is pretty clear that the server is not configured correctly
[2012-09-26 22:34:40 -0400] bluepojo: or something is wrong
[2012-09-26 22:34:45 -0400] bluepojo: knife is successfully hitting the server
[2012-09-26 22:34:48 -0400] bluepojo: and the server is saying "nope"
[2012-09-26 22:35:00 -0400] rava: bluepojo: it's just really odd that the role goes through
[2012-09-26 22:35:09 -0400] rava: and that it's the cookbook that pukes
[2012-09-26 22:35:13 -0400] _0x783czar: bluepojo: rava: OK I'll try that, here's what the logs spit out when I try to upload a cookbook.  http://pastebin.com/GeJJBWCg
[2012-09-26 22:35:18 -0400] rava: does the cookbook pass knife test <cookbookname> ?
[2012-09-26 22:35:59 -0400] _0x783czar: rava: yes
[2012-09-26 22:36:05 -0400] _0x783czar: rava: all cookbooks fail
[2012-09-26 22:36:45 -0400] rava: check the couchdb and rabbitmq logs
[2012-09-26 22:37:10 -0400] rava: it's likely one of those that's puking. whenever i've seen error messages like that it was one of those 2
[2012-09-26 22:38:33 -0400] _0x783czar: rava: on it
[2012-09-26 22:41:52 -0400] _0x783czar: rava: bluepojo: OK here's the couchdb logs, http://pastebin.com/q1iZn3na and rabbitmq logs are quiet
[2012-09-26 22:42:33 -0400] bluepojo: couch seems fine
[2012-09-26 22:42:42 -0400] kreedy: google hangout on backbone.js for anyone interested https://plus.google.com/hangouts/_/stream/b448a14aa911ce58edd4d9ca419997b242f6a553?authuser=0&hl=en
[2012-09-26 22:42:48 -0400] _0x783czar: rava: bluepojo: should rabbitmq be quiet?
[2012-09-26 22:42:56 -0400] bluepojo: rava might know better than me
[2012-09-26 22:43:00 -0400] bluepojo: I'm not sure
[2012-09-26 22:43:02 -0400] kreedy: oops. wrong channel. my bad.
[2012-09-26 22:43:05 -0400] rava: is it running?
[2012-09-26 22:43:13 -0400] _0x783czar: rava: yes
[2012-09-26 22:43:54 -0400] _0x783czar: rava: ps aux shows five programs beloging to the rabbitmq user
[2012-09-26 22:43:58 -0400] rava: depends on your logging lvl, but generally yes
[2012-09-26 22:44:40 -0400] rava: that's fine. if your log level isn't debug or info for rabbit it's generally quiet log wise when it's behaving
[2012-09-26 22:45:16 -0400] rava: and you're getting 200's in the couch db requests
[2012-09-26 22:45:19 -0400] rava: really wonky
[2012-09-26 22:46:05 -0400] _0x783czar: rava: yeah, here's the output of running 'knife cookbook upload apache2 -V'  http://pastebin.com/Hgsve5jB
[2012-09-26 22:47:04 -0400] _0x783czar: rava: I'm wondering if what to make of the last lines where it's saying "no such file or directory"
[2012-09-26 22:47:14 -0400] rava: ditto
[2012-09-26 22:47:24 -0400] rava: how'd you install chef-server on this machine?
[2012-09-26 22:48:18 -0400] _0x783czar: rava: chef-solo, using the chef-server cookbook and installing the a nginx proxy
[2012-09-26 22:52:59 -0400] _0x783czar: rava: also data bags upload just fine
[2012-09-26 22:55:01 -0400] rava: doesn't the chef-solo recipe install via gems?
[2012-09-26 22:55:08 -0400] _0x783czar: rava: yes
[2012-09-26 22:55:35 -0400] rava: could be that there's a gem missing. i had all sorts of issues installing chef via gems 2 months ago.
[2012-09-26 22:59:25 -0400] _0x783czar: rava: I don't know.  I looked for the file it says is missing and I found that the directory it's looking for does exist but the file or any files similar to it, do not exist there.  Here's the ls output: http://pastebin.com/1nLVH4Ye
[2012-09-26 23:03:31 -0400] rava: notice who owns that folder
[2012-09-26 23:03:37 -0400] rava: what's the chef-server process running as?
[2012-09-26 23:04:26 -0400] _0x783czar: rava: aahh, it's running as chef
[2012-09-26 23:04:45 -0400] rava: try chowning that directory to be chef:chef
[2012-09-26 23:04:45 -0400] drnfx: woudln't that return a different error.. liek ERRON::Permission denied?
[2012-09-26 23:05:00 -0400] rava: drnfx: you'd think
[2012-09-26 23:05:24 -0400] rava: drnfx: but whenever i have errors where permissions are involved, the low level permission error doesn't bubble up. i just get the merb error that it puked trying to do something
[2012-09-26 23:05:33 -0400] rava: thus the 50x errors
[2012-09-26 23:05:37 -0400] drnfx: yeah
[2012-09-26 23:05:47 -0400] drnfx: could be that its trying to create that temp directory for the sandbox locks
[2012-09-26 23:06:00 -0400] rava: that's what i'm thinking
[2012-09-26 23:07:06 -0400] rava: thing is, my chef install is in /usr/lib/ruby/vendor_ruby owned by root:root and it's not puking
[2012-09-26 23:07:37 -0400] _0x783czar: rava: no dice
[2012-09-26 23:07:38 -0400] rava: then again, i did the install via apt, let me see if the config has it using a different space (like var/run/chef)
[2012-09-26 23:07:51 -0400] rava: gyah
[2012-09-26 23:07:53 -0400] drnfx: rava: my chef-server install is the same
[2012-09-26 23:07:56 -0400] _0x783czar: rava: however, I did just try re installign the chef-server-api gem
[2012-09-26 23:07:58 -0400] drnfx: ubuntu distro, and used apt
[2012-09-26 23:08:04 -0400] rava: drnfx: ditto
[2012-09-26 23:08:14 -0400] _0x783czar: rava: and now I have different errors
[2012-09-26 23:08:21 -0400] rava: @.@
[2012-09-26 23:08:30 -0400] _0x783czar: rava: "No such file or directory - getcwd"
[2012-09-26 23:09:13 -0400] _0x783czar: rava: the folder structure has not changed, so now I'm really confused...
[2012-09-26 23:09:41 -0400] rava: _0x783czar: this is why i avoid using gem for any installs, i never trust it to get all the right dependencies
[2012-09-26 23:10:17 -0400] _0x783czar: rava: the boss was really excited by the idea of having chef-solo build the server for us
[2012-09-26 23:10:19 -0400] drnfx: just out of curiosity what distro are you runnin gon?
[2012-09-26 23:10:36 -0400] _0x783czar: drnfx: Ubuntu 12.04
[2012-09-26 23:11:09 -0400] drnfx: have you tried using the chef-server pkgs for ubuntu?
[2012-09-26 23:11:16 -0400] drnfx: rather than installing via gem?
[2012-09-26 23:12:07 -0400] _0x783czar: drnfx: Have not, as I told rava, the boss really wanted to have chef-solo build the server, but I'm wondering about trying it.
[2012-09-26 23:12:32 -0400] _0x783czar: drnfx: although, before I propose that to the CTO, I'm going to have to have exhausted all options with this.
[2012-09-26 23:12:33 -0400] rava: _0x783czar: it's very painless to do it through the debs
[2012-09-26 23:12:56 -0400] kvanderw: any clue why I am getting this?
[2012-09-26 23:12:57 -0400] kvanderw: knife cookbook upload --allERROR: ArgumentError: wrong number of arguments (1 for 2)
[2012-09-26 23:12:57 -0400] rava: _0x783czar: i feel ya, did you get that new error when installing or trying to upload cookbooks?
[2012-09-26 23:13:27 -0400] _0x783czar: rava: uploading cookbooks.  the install went over without a hitch.
[2012-09-26 23:14:36 -0400] rava: and it's that no getcwd error right?
[2012-09-26 23:14:48 -0400] _0x783czar: rava: yes
[2012-09-26 23:15:23 -0400] drnfx: kvanderw, if you do a knife cookbook list are you able to see all you rcookbooks?
[2012-09-26 23:15:52 -0400] kvanderw: drnfx: yup - nice list
[2012-09-26 23:16:40 -0400] _0x783czar: rava: with packages... how painless are we talking?  Is there some sort of guide I can look at?
[2012-09-26 23:16:57 -0400] kvanderw: drnfx: I had done the knife command to update all my cookbooks - now I need to get those changes from my workstation to my chef-server. and this @#$#@$ error keeps slapping me around.
[2012-09-26 23:17:06 -0400] drnfx: kvanderw, check your metadata.rb files
[2012-09-26 23:17:16 -0400] rava: _0x783czar: add the opscode repo -> add the gpg key -> apt-get update -> apt-get install chef
[2012-09-26 23:17:25 -0400] drnfx: and chef-server
[2012-09-26 23:17:26 -0400] rava: and chef-server
[2012-09-26 23:17:33 -0400] rava: http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2012-09-26 23:17:40 -0400] rava: drnfx: jinx!
[2012-09-26 23:18:09 -0400] kvanderw: drnfx: there are 221 of those files on my box - what am I looking for ?
[2012-09-26 23:18:14 -0400] drnfx: _0x783czar, I installed my chef server about 5 months ago, forgot about it becuase other projects received higher priority, worked with it on Monday and easy peasy
[2012-09-26 23:18:37 -0400] kvanderw: drnfx: I have recently updated the chef-server and my local chef - so both are current.
[2012-09-26 23:18:39 -0400] _0x783czar: rava: drnfx: haha, alright... I'll talk to the boss see what he says.
[2012-09-26 23:18:55 -0400] kvanderw: drnfx: ruby is 1.8.7
[2012-09-26 23:19:24 -0400] rava: _0x783czar: the chef-solo install route is hella cool, when it works. I tried to do it that way myself since it meant i could script the entire standup of my infrastructure
[2012-09-26 23:20:13 -0400] rava: _0x783czar: i ended up just wrapping the install steps for debian in a shell script, then having the cookbooks kick in once the chef server was up and operational
[2012-09-26 23:21:00 -0400] drnfx: kvanderw, updated to which version?
[2012-09-26 23:21:09 -0400] kvanderw: 10.14.2
[2012-09-26 23:21:18 -0400] kvanderw: drnfx: ^
[2012-09-26 23:22:10 -0400] drnfx: kvanderw, try running it with -V flag for debug
[2012-09-26 23:22:24 -0400] drnfx: since you have 221 cookbooks, then that should help narrowing it down
[2012-09-26 23:22:48 -0400] kvanderw: drnfx: used "knife cookbook upload --all -V"
[2012-09-26 23:22:58 -0400] kvanderw: drnfx: got 1 message
[2012-09-26 23:22:58 -0400] kvanderw: WARN: found a directory chef-gitorious in the cookbook path, but it contains no cookbook files. skipping.
[2012-09-26 23:23:35 -0400] kvanderw: drnfx: so, just drop/terminate/destroy this?
[2012-09-26 23:24:02 -0400] drnfx: kvanderw, my mistake -V -V at the end
[2012-09-26 23:24:09 -0400] drnfx: I always forget the second
[2012-09-26 23:24:59 -0400] _0x783czar: rava: so, I got the go ahead from the boss to give it a shot
[2012-09-26 23:25:18 -0400] kvanderw: drnfx: ok so this line
[2012-09-26 23:25:19 -0400] kvanderw: from /Users/kurtvanderwater/chef-repo/cookbooks/chef-webapp/metadata.rb:19:in `from_file'
[2012-09-26 23:25:36 -0400] kvanderw: drnfx: would be my pointer to the metadata.rb issue that you were alluding to?
[2012-09-26 23:25:37 -0400] drnfx: check that line out
[2012-09-26 23:25:55 -0400] drnfx: correct. line 19 on that metadata.rb file is puking
[2012-09-26 23:27:13 -0400] rava: _0x783czar: going to fire up a vm later tonight and try doing the chef-solo route. you have me all sorts of curious
[2012-09-26 23:27:14 -0400] kvanderw: drnfx: looks to me like an incomplete file - but I am not yet well versed in the reading of ruby
[2012-09-26 23:27:27 -0400] drnfx: cat that metadata.rb and pastebin it
[2012-09-26 23:27:41 -0400] kvanderw: drnfx: sure
[2012-09-26 23:28:35 -0400] kvanderw: drnfx: http://pastebin.com/Q8s4dadq
[2012-09-26 23:29:06 -0400] drnfx: kvanderw, okay, since you said you updated your chef
[2012-09-26 23:29:55 -0400] drnfx: line 19 recipe "webapp" shoudl be recipe "cookbook::recipe"
[2012-09-26 23:31:07 -0400] kvanderw: drnfx: made that change - retried knife - same error - same line when run with -V -V
[2012-09-26 23:31:28 -0400] kvanderw: drnfx: no wait
[2012-09-26 23:31:40 -0400] kvanderw: cookbook::recipe and NOT cookbook::webapp ??
[2012-09-26 23:32:04 -0400] drnfx: well
[2012-09-26 23:32:06 -0400] kvanderw: drnfx: fails both ways
[2012-09-26 23:32:17 -0400] drnfx: the cookbook it is in is chef-webapp
[2012-09-26 23:32:42 -0400] drnfx: so it should read recipe "chef-webapp::webapp"
[2012-09-26 23:34:42 -0400] kvanderw: drnfx: looks like it was a copy of something that I was playing with - git indicates this file was my fault - I was trying to setup gitorious on my own - apparently got 1/2 way into it and had a priority interrupt somewhere - which promptly wiped memory cells - I will just kill this completely for now.
[2012-09-26 23:35:50 -0400] drnfx: kvanderw, okay, I was reading up on the recipe usage in metadata, it is used for descriptions of your recipes. so the format is recipe "cookbook::recipe","description"
[2012-09-26 23:36:11 -0400] _0x783czar: drnfx: rava: what did you put for the opscode list to get the newst version?
[2012-09-26 23:36:41 -0400] kvanderw: drnfx: k - thanks - will prune a few things here and see if I can get back on track - I hate being a noob - LOL
[2012-09-26 23:37:02 -0400] drnfx: kvanderw, we are all noobs at one point. Remember -V -V very helpful for debuggin
[2012-09-26 23:37:14 -0400] rava: it's in the wiki doc i linked you
[2012-09-26 23:37:17 -0400] drnfx: echo "deb http://apt.opscode.com/ `lsb_release -cs`-0.10 main" | sudo tee /etc/apt/sources.list.d/opscode.list
[2012-09-26 23:37:22 -0400] kvanderw: drnfx: yea - that was a great tip - THANKS!!
[2012-09-26 23:47:18 -0400] kvanderw: drnfx: you are a jewel - I got all my cookbooks uploaded to my chef-server - minus some junk I was playing with :)
[2012-09-26 23:47:36 -0400] kvanderw: drnfx: I really like your -V -V
[2012-09-26 23:48:51 -0400] drnfx: kvanderw, haha no worries bro. Not sure how I feel about being called a jewel though.
[2012-09-26 23:49:07 -0400] rava: drnfx: you're shiny
[2012-09-26 23:49:08 -0400] drnfx: kvanderw, i was in your shoes about 48 hours ago... -V -V saved my sanity
[2012-09-26 23:51:36 -0400] drnfx: well guys, leaving work. catch the community tomorrow
[2012-09-26 23:51:45 -0400] rava: rest easy
[2012-09-26 23:52:04 -0400] kvanderw: drnfx: unfortunately - I already got so mad at the whole thing, I ordered a new drive - just so I could start over
[2012-09-26 23:52:23 -0400] kvanderw: drnfx: probably a good thing though - 5 years of cruft on this box - it needs a fresh start - :)
[2012-09-26 23:52:41 -0400] kvanderw: drnfx: 'gnight
[2012-09-26 23:59:04 -0400] _0x783czar: drnfx: thanks for the help

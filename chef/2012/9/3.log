[2012-09-03 00:04:20 -0400] yfeldblum_: flaccid, people using chef are using the same backup/restore tools as people using puppet, cfengine, or their own two hands ...
[2012-09-03 00:06:09 -0400] flaccid: i don't know what people using puppet or cfengine are using sorry yfeldblum_
[2012-09-03 00:08:42 -0400] z: bacula, rsnapshot, backuppc... many things...
[2012-09-03 00:09:04 -0400] z: cloud or not its still a server. I'm not sure I get what you're asking.
[2012-09-03 00:09:14 -0400] PRK_nz: I just want to clarify my understanding. If I write a recipe, say testcookbook/recipes/test.rb, and add it to a nodes run list (recipe[testcookbook::test]), then it'll also execute the default recipe in testcookbook?
[2012-09-03 00:09:40 -0400] z: PRK_nz: incorrect
[2012-09-03 00:09:42 -0400] yfeldblum_: PRK_nz, that is false
[2012-09-03 00:09:50 -0400] z: PRK_nz: default is only used if you recipe[testcookbook]
[2012-09-03 00:10:27 -0400] PRK_nz: Yea, that's what I thought, but http://wiki.opscode.com/display/chef/Guide+to+Creating+A+Cookbook+and+Writing+A+Recipe (step 2) suggests otherwise...
[2012-09-03 00:10:31 -0400] z: PRK_nz: if you want default within test, you can use include_recipe, but thats quite a hack
[2012-09-03 00:18:10 -0400] flaccid: z: aws support - backup/restore to s3 and ebs for a start
[2012-09-03 00:18:54 -0400] z: flaccid: backing up to S3 is a problem for Bacula, rsnapshot or $choice_of_tool ?
[2012-09-03 00:19:27 -0400] z: flaccid: automating the copy over to S3/EBS too, although Chef can help you by installing cronjobs, init scripts et al..
[2012-09-03 00:19:34 -0400] z: flaccid: I'm still not sure what you're getting at...
[2012-09-03 00:22:25 -0400] yfeldblum_: flaccid, for example, to backup a postgres database, you can write a shell script that runs pgdump and uploads the result to an S3 bucket, and you can use chef to drop the script on the postgres server and add a cron entry to run the script every night ... not sure it applies to your situation per se, but it's an example of how someone might use chef to backup up something in the cloud
[2012-09-03 00:25:08 -0400] flaccid: sure guys, but i'm talking about this 'choice of tool', i know i can chef the rest, but isn't there some de facto methods established in this area?
[2012-09-03 00:25:48 -0400] yfeldblum_: flaccid, no, because the method of backing up Important Thing X within Infrastructure Y at Company Z depends heavily on X, Y, and Z
[2012-09-03 00:26:01 -0400] flaccid: for example, https://github.com/opscode/cookbooks/tree/master/aws/#aws_ebs_volume also provides restore from a snapshot functionality before even looking at 'choice of tool'
[2012-09-03 00:26:01 -0400] z: thats an opinionated subject, and something you might ask in ##infra-talk. I'm sure you'll get 10 different answers :)
[2012-09-03 00:26:32 -0400] flaccid: sounds like you guys are encouraging reinvention of the wheel here ;)
[2012-09-03 00:26:56 -0400] flaccid: i don't mind doing my own thing, but i try to play nice in the oss style
[2012-09-03 00:28:18 -0400] yfeldblum_: flaccid, not really - you can easily compose some of the high-level tools that are already out there into a simple script and then easily deploy the script with chef
[2012-09-03 00:29:17 -0400] yfeldblum_: flaccid, likewise, you can use https://github.com/meskyanichi/backup if it fits
[2012-09-03 00:29:31 -0400] yfeldblum_: flaccid, not sure where you're going with ebs though
[2012-09-03 00:31:47 -0400] flaccid: well i wrote a boto cookbook and of course there is fog and even things like deltacloud. its kind of a 'big choice'
[2012-09-03 00:32:23 -0400] z: boto and fog are libraries
[2012-09-03 00:32:32 -0400] z: you're goin to need to elaborate.
[2012-09-03 00:32:50 -0400] flaccid: yes, chef becomes your frontend to those libraries.
[2012-09-03 00:33:17 -0400] flaccid: yfeldblum_: this backup gem looks well supported, might be a good option for sure thanks
[2012-09-03 00:33:47 -0400] yfeldblum_: flaccid, indeed
[2012-09-03 00:34:00 -0400] flaccid: *indeed* :)
[2012-09-03 00:35:20 -0400] flaccid: i do appreciate the input as well z
[2012-09-03 00:35:22 -0400] yfeldblum_: flaccid, careful with it though - it has support for a wide number of things - multiple databases, multiple destinations, multiple ways to notify you - but it may not support all of the specific features of these things that might happen to be important to you, so i'd recommend that you see what it currently can do and see if it's a good fit for what you need
[2012-09-03 00:36:10 -0400] flaccid: yeah i'm not looking for anything with special requirements, this pretty much does all i need, so its of good consideration
[2012-09-03 00:37:33 -0400] z: yfeldblum_: the same warning should apply to all third party cookbooks ;)
[2012-09-03 00:38:45 -0400] yfeldblum_: flaccid, cool
[2012-09-03 00:39:09 -0400] flaccid: if you don't know how oss flows, need a warning before touch it at all :p
[2012-09-03 00:42:00 -0400] flaccid: anyone know if coderanger is on holidays or something? just wondering if anyone might know when he may be alive again to get a PR processed
[2012-09-03 00:42:12 -0400] coderanger: I was, got back to the US this week
[2012-09-03 00:42:14 -0400] coderanger: Whats up?
[2012-09-03 00:42:32 -0400] coderanger: Still working through a three-week backlog on email and such :)
[2012-09-03 00:42:36 -0400] flaccid: oh hello there :)
[2012-09-03 00:42:43 -0400] flaccid: hope you had a nice time
[2012-09-03 00:42:48 -0400] coderanger: Yahr!
[2012-09-03 00:43:00 -0400] flaccid: just this guy coderanger whenever you get a chance, no rush at all https://github.com/coderanger/chef-collectd/pull/4
[2012-09-03 00:43:47 -0400] z: rightscale requires metadata.json? lolwut
[2012-09-03 00:44:04 -0400] flaccid: yep, sad isn't it
[2012-09-03 00:44:57 -0400] yfeldblum_: does rightscale require metadata.json *to be in git*?
[2012-09-03 00:45:13 -0400] flaccid: recipes and node attributes won't be detected without it
[2012-09-03 00:45:55 -0400] yfeldblum_: flaccid, i get that you need the metadata.json when delivering a cookbook to rightscale ... but does it need to be in the https://github.com/coderanger/chef-collectd git repository?
[2012-09-03 00:46:30 -0400] yfeldblum_: flaccid, or can it be compiled from metadata.rb at a point in time after you git clone and before delivering it to rightscale?
[2012-09-03 00:46:38 -0400] z: flaccid: why do you have a depends on apache2?
[2012-09-03 00:46:46 -0400] flaccid: yfeldblum_: yes, of course you can fork it or copy it
[2012-09-03 00:46:49 -0400] z: https://github.com/flaccid/chef-collectd/commit/c245e6ffe166d77065dfe01a3885e156b32521cc#L0R9
[2012-09-03 00:47:01 -0400] flaccid: z: collectd_web probbly
[2012-09-03 00:47:29 -0400] z: yfeldblum_: I'm not sure I like the idea of Git containing a whole crapload of metadata.json just to satisfy some weird Rightscale whim
[2012-09-03 00:47:32 -0400] yfeldblum_: flaccid, no i mean simply a pre-upload phase which loads each cookbook missing a metadata.json and creating one
[2012-09-03 00:47:42 -0400] flaccid: z: i agree
[2012-09-03 00:47:56 -0400] flaccid: yfeldblum_: i tried to get em to do that but they don't want to
[2012-09-03 00:48:34 -0400] z: flaccid: I can't speak for coderanger but I know a *lot* of people who'd reject that hunk of your patch, RightScale can shove that idea up their bum frankly
[2012-09-03 00:48:45 -0400] yfeldblum_: z, i'm ok with it in principle - but i'm not ok with this particular implementation of it in practice because json keys are not ordered, especially the way chef/knife serialize the json files from the ruby ... which means these json files will change repeatedly for no reason other than knife recompiled it in a different order again and again
[2012-09-03 00:48:54 -0400] flaccid: z: welcome to the life i have to deal with
[2012-09-03 00:49:15 -0400] z: flaccid: I feel sorry for you :-(
[2012-09-03 00:49:24 -0400] coderanger: flaccid: at a minimum, please remove metadata.json
[2012-09-03 00:49:29 -0400] coderanger: thats a derived file, shouldn't be in git
[2012-09-03 00:49:38 -0400] z: flaccid: however I am thankful you gave me [another] good reason to shoot down Rightscale every time it comes up in planning meetings ;)
[2012-09-03 00:49:49 -0400] flaccid: z: try working there
[2012-09-03 00:49:49 -0400] coderanger: In fact, you not only added it, you removed it from gitignore
[2012-09-03 00:49:52 -0400] yfeldblum_: z, i'm tolerant of it in principle, but not partial to it, since the metadata.json is a build artifact that gets built from source, and therefore source itself
[2012-09-03 00:50:01 -0400] coderanger: _
[2012-09-03 00:50:01 -0400] z: yfeldblum_: Agreed.
[2012-09-03 00:50:10 -0400] z: yfeldblum_: That's actually my beef.
[2012-09-03 00:50:17 -0400] yfeldblum_: z, typos!
[2012-09-03 00:50:21 -0400] yfeldblum_: z, and therefore *not* source itself
[2012-09-03 00:50:27 -0400] z: I got it despite the typo ;)
[2012-09-03 00:50:35 -0400] flaccid: coderanger: so what should i do to remove it, can you add more commits to a PR?
[2012-09-03 00:50:51 -0400] coderanger: flaccid: yeah, just push to the branch it was made from
[2012-09-03 00:50:52 -0400] z: Must be one of these things:
[2012-09-03 00:50:52 -0400] z: if yuo can raed tihs, you hvae a sgtrane mnid, too.
[2012-09-03 00:50:53 -0400] z: Can you raed tihs? Olny 55 plepoe out of 100 can.
[2012-09-03 00:51:19 -0400] coderanger: don't forget to git revert https://github.com/flaccid/chef-collectd/commit/f51fcc2c56f0b0a7dce24a60db403a14ee00315f too
[2012-09-03 00:51:37 -0400] yfeldblum_: flaccid, you can either git-revert or git-rebase (and rewrite history thereby)
[2012-09-03 00:51:55 -0400] flaccid: kk, i wills give it a try
[2012-09-03 00:51:58 -0400] z: I'd rebase personally as having that show in history is suboptimal
[2012-09-03 00:52:31 -0400] yfeldblum_: flaccid, also you should get rid of the .DS_Store in gitignore ... that should not go into every project's gitignore ... instead you should stick that in your home dir's global gitignore file
[2012-09-03 00:52:36 -0400] z: Unless you came come up with a suitably comical revert message, of course, I love those :D
[2012-09-03 00:53:48 -0400] yfeldblum_: flaccid, that way, .DS_Store will be automatically and magically gitignored in every project you're working on all the time
[2012-09-03 00:54:09 -0400] z: yfeldblum_: https://github.com/flaccid/chef-collectd/blob/f51fcc2c56f0b0a7dce24a60db403a14ee00315f/.gitignore
[2012-09-03 00:54:24 -0400] z: Given that file only contains .DS_Store he could just git rm the whole thing
[2012-09-03 00:55:13 -0400] z: Although upstream (https://github.com/coderanger/chef-collectd/blob/master/.gitignore) has one which excludes metadata.json so...
[2012-09-03 00:55:21 -0400] z: coderanger may still want that ;)
[2012-09-03 00:55:35 -0400] flaccid: dang i hate being a git noob, but yes i am going to try to do all this now
[2012-09-03 00:55:40 -0400] yfeldblum_: flaccid, http://www.cybersprocket.com/using-a-git-excludes-file/
[2012-09-03 00:56:09 -0400] flaccid: thanks yfeldblum_
[2012-09-03 00:56:12 -0400] z: :-)
[2012-09-03 00:56:35 -0400] flaccid: at least i won't do this again. its good to know what upstream will and won't accept
[2012-09-03 00:56:36 -0400] yfeldblum_: z, i'd keep the gitignore there because older chefs (chef < 0.10) write metadata.json files
[2012-09-03 00:56:46 -0400] PRK_nz: flaccid: Is this the same blueprint? http://thechangelog.com/post/6492516586/blueprint-reverse-engineer-server-configuration
[2012-09-03 00:56:59 -0400] flaccid: PRK_nz: no
[2012-09-03 00:57:34 -0400] yfeldblum_: z, but that's really not a terribly big deal either way
[2012-09-03 00:57:39 -0400] flaccid: all i do is use librarian PRK_nz, its nothing more crazy than that
[2012-09-03 00:59:03 -0400] flaccid: hmm so git revert or git rebase
[2012-09-03 00:59:42 -0400] flaccid: i guess just a git rebase master
[2012-09-03 01:04:53 -0400] yfeldblum_: flaccid, but props for splitting up the commits and giving clear summary commit messages
[2012-09-03 01:06:52 -0400] flaccid: yfeldblum_: thanks y0. i am trying to do the right thing and get better with everything
[2012-09-03 01:11:14 -0400] PRK_nz: flaccid: I'll have a closer look at that link ;)
[2012-09-03 01:13:32 -0400] flaccid: PRK_nz: my blueprint thing is just a name for the concept, its not related to that blueprint project. all it is is using librarian for cookbook collection from the Cheffile and vagrant for dev/test, so its just files and the repos is like a package
[2012-09-03 01:13:57 -0400] flaccid: hehe id id the git revert https://github.com/flaccid/chef-collectd/commit/e227ec4095e83a1f4dfe58d92a5abff34b0a8267
[2012-09-03 01:15:01 -0400] flaccid: coz i'm a git noob, i will nag coderanger by pm for next steps :(
[2012-09-03 05:24:41 -0400] martinisoft: is there a reliable way to test ohai plugins?
[2012-09-03 05:36:21 -0400] ssd7: martinisoft: What do you mean?
[2012-09-03 05:36:43 -0400] martinisoft: trying to write a linode ohai plugin
[2012-09-03 05:37:29 -0400] martinisoft: and finding out the cloud plugin is coupled to the existing rackspace/ec2/eucalyptus plugins, so I wouldn't know how to implement the same cloud mash
[2012-09-03 05:37:50 -0400] martinisoft: https://gist.github.com/1338655 <- tried that plugin, but it doesn't set anything in the cloud mash
[2012-09-03 05:39:04 -0400] martinisoft: get debug output like this: [Mon, 03 Sep 2012 05:38:21 +0000] DEBUG: Plugin linode threw exception #<NoMethodError: undefined method `[]' for nil:NilClass> /var/lib/chef/ohai_plugins/linode.rb:47:in `get_ip_address'
[2012-09-03 05:41:45 -0400] ssd7: martinisoft: It looks like your cloud variable isn't getting set becuase you're plugin in failing before then.
[2012-09-03 05:43:17 -0400] ssd7: My guess is that your problem is at line 59
[2012-09-03 05:44:13 -0400] ssd7: But I'd need to see the full stack trace to be sure.
[2012-09-03 05:44:39 -0400] martinisoft: thats probably correct
[2012-09-03 05:45:00 -0400] martinisoft: I can provide a chef output log
[2012-09-03 05:46:46 -0400] ssd7: martinisoft: What might also be interesting to see in the output of `ohai network` on the machine on which you are running this.
[2012-09-03 05:51:02 -0400] martinisoft: can gist that
[2012-09-03 05:52:54 -0400] martinisoft: ssd7: https://gist.github.com/3607072
[2012-09-03 05:55:59 -0400] ssd7: Hrmm
[2012-09-03 05:58:25 -0400] martinisoft: im thinking its a string, not a symbol
[2012-09-03 05:59:11 -0400] ssd7: martinisoft: Yeah, that would be my first guess.  try :'eth0:0'
[2012-09-03 05:59:31 -0400] paulmooring: ssd7: I don't think that should matter
[2012-09-03 06:00:32 -0400] paulmooring: mixing strings/symbols works fine in shed for me and 'eth0:0' is valid
[2012-09-03 06:01:05 -0400] ssd7: paulmooring: Ah, yep.  Using a mash so it shouldn't matter.
[2012-09-03 06:01:14 -0400] retr0h: why not use the network_addr ohai plugin
[2012-09-03 06:01:17 -0400] retr0h: https://gist.github.com/1040543
[2012-09-03 06:01:19 -0400] martinisoft: changing them to strings works
[2012-09-03 06:01:28 -0400] ssd7: O.o
[2012-09-03 06:01:32 -0400] paulmooring: changing what to strings?
[2012-09-03 06:02:41 -0400] martinisoft: https://gist.github.com/1338655
[2012-09-03 06:02:48 -0400] martinisoft: changing line 58 to a string
[2012-09-03 06:02:52 -0400] martinisoft: now the plugin works
[2012-09-03 06:03:51 -0400] martinisoft: http://cl.ly/image/0N1r0d3P2q1W
[2012-09-03 06:04:03 -0400] martinisoft: thats the view of the node on hosted chef now
[2012-09-03 06:04:06 -0400] retr0h: I don't think it's due to it being a string
[2012-09-03 06:04:14 -0400] retr0h: I think it's b/c your checking a different interface
[2012-09-03 06:04:20 -0400] retr0h: eth0:0 vs eth0
[2012-09-03 06:04:32 -0400] retr0h: no?
[2012-09-03 06:05:26 -0400] martinisoft: oooooooh now I know why
[2012-09-03 06:05:49 -0400] martinisoft: for giggles, I removed the eth0:0 interface
[2012-09-03 06:05:53 -0400] martinisoft: plugin crashed again
[2012-09-03 06:06:10 -0400] retr0h: thats b/c its nil
[2012-09-03 06:06:27 -0400] retr0h: so network[:interfaces][nil][:addresses]
[2012-09-03 06:06:29 -0400] retr0h: fails
[2012-09-03 06:06:47 -0400] paulmooring: martinisoft: what retr0h said, the plugin should probably avoid hardcoded interface names
[2012-09-03 06:07:04 -0400] retr0h: I recommend using https://gist.github.com/1040543
[2012-09-03 06:07:10 -0400] retr0h: its much nicer to use
[2012-09-03 06:07:45 -0400] martinisoft: ah nice
[2012-09-03 06:08:08 -0400] martinisoft: going to just disable all the cloud plugins then
[2012-09-03 06:08:30 -0400] martinisoft: feel like I'm bending over backwards
[2012-09-03 06:09:52 -0400] ssd7: Curious.  I thought that eth0:0 was clearly there in the ohai output that was posted.
[2012-09-03 06:09:55 -0400] martinisoft: retr0h: thats a nice plugin :)
[2012-09-03 06:10:12 -0400] martinisoft: ssd7: it definitely was :o
[2012-09-03 06:11:56 -0400] williamherry: is there any way to get client's log on chef server?
[2012-09-03 06:12:37 -0400] retr0h: for my hypervisors i have custom ohai plugins that abstract away eth0 eth1 etc.. into names that we understand, so node[:network][:mgmt_ipv4] gives me the management IP on any node
[2012-09-03 06:13:59 -0400] retr0h: doesn't make sense on VMs but for hypervisors running openstack infrastructure.. when you have 3 or 4 interfaces it's bit nicer to read in cookbooks
[2012-09-03 06:14:47 -0400] ssd7: http://tickets.opscode.com/browse/OHAI-88
[2012-09-03 06:15:20 -0400] ssd7: For those interested in fixing this :)
[2012-09-03 06:21:48 -0400] martinisoft: https://gist.github.com/3607243
[2012-09-03 06:21:49 -0400] martinisoft: there
[2012-09-03 06:21:58 -0400] martinisoft: added a guard against a missing interface
[2012-09-03 06:35:42 -0400] williamherry: is there any way to get client's output on chef server?
[2012-09-03 06:42:52 -0400] ssd7: williamherry: No.  You can see the server side logs related to individual API requests, but that is it.
[2012-09-03 06:43:07 -0400] williamherry: ssd7, thanks
[2012-09-03 06:43:38 -0400] ssd7: williamherry: No problem.  Anything in particular you are trying to do?
[2012-09-03 06:45:29 -0400] williamherry: we want to see if it run success on a web page
[2012-09-03 06:47:18 -0400] williamherry: I am gonna rewrite some log function to make it not only write to disk, but also send to server, is it easy to do so?
[2012-09-03 06:52:58 -0400] BryanWB_: ohai chefs!
[2012-09-03 06:53:05 -0400] BryanWB_: happy end of summer!
[2012-09-03 06:57:03 -0400] flaccid_: happy start of summer!
[2012-09-03 06:57:10 -0400] flaccid_: well spring at least
[2012-09-03 07:01:49 -0400] ssd7: Heya BryanWB_ !
[2012-09-03 07:02:51 -0400] BryanWB_: ssd7: hey dude! so psyched my buddy nathen will join u guys
[2012-09-03 07:03:01 -0400] flaccid_: anyone know if this pyrat person is on irc or anything? https://github.com/pyrat/chef-backup
[2012-09-03 07:03:15 -0400] flaccid_: its dated and doesn't do much but i'm trying to not re-do
[2012-09-03 07:03:15 -0400] ssd7: BryanWB_: We are pretty psyched to have him!
[2012-09-03 07:31:18 -0400] williamherry: [OT] hi, I wan't ask a question that not very tech, we make a CentOS custom ISO that base on rackspace's alamo that use chef to deploy openstack, it is OK to add all releated company's LOGO it to the first screen of that,
[2012-09-03 07:35:04 -0400] flaccid_: williamherry: i can't talk for the holders of the code there, but as long as it abides by the licenses
[2012-09-03 07:37:20 -0400] flaccid_: if this 'screen' is separate it shouldn't matter as long as you don't breach the licenses elsewhere
[2012-09-03 07:39:56 -0400] flaccid_: ianal of course
[2012-09-03 07:41:10 -0400] Mithrandir: williamherry: you'd have to check applicable copyright and trademark licences.
[2012-09-03 07:44:13 -0400] williamherry: thanks flaccid and Mithrandir
[2012-09-03 07:45:23 -0400] BryanWB_: williamherry: i would err on not using the logo
[2012-09-03 07:45:46 -0400] BryanWB_: code is probably ok, but there may be separate restrictions on using the logo
[2012-09-03 07:48:17 -0400] williamherry: we want to use their logo just try to say that all hard work are made by those great company, we will not use them avoiding trouble, thanks all
[2012-09-03 08:03:58 -0400] masterkorp: bd
[2012-09-03 09:20:44 -0400] williamherry: log_location in /etc/chef/client.rb set to STDOUT, but it will logged to /var/log/chef/client.log, why this happen?
[2012-09-03 09:25:02 -0400] ashb: did you restart your daemon?
[2012-09-03 09:27:56 -0400] williamherry: ashb, yes, does log_location support other type log device like unix socket? and can I set it to a list like [STDOUT, '/tmp/ss.log']
[2012-09-03 09:28:05 -0400] gyre007: can someone explain to me what is the best use of Chef tags ?
[2012-09-03 09:28:37 -0400] gyre007: because from what I can see you can only tag recipes...not nodes ?
[2012-09-03 09:28:49 -0400] ashb: williamherry: not sure, sorry. You'd have to read the code
[2012-09-03 09:29:04 -0400] williamherry: ashb, thank you any way
[2012-09-03 09:29:11 -0400] ashb: gyre007: i've never used tags, and I get the feeling not many people do
[2012-09-03 09:33:36 -0400] BryanWB_: i was unaware of the existence of tags
[2012-09-03 09:33:38 -0400] BryanWB_: w/ chef
[2012-09-03 09:35:17 -0400] gyre007: a lot of people actuall are
[2012-09-03 10:04:01 -0400] williamherry: there two place that can specify log_location in centos, /etc/chef/client.rb and /etc/sysconfig/chef-client, what's diff between them?
[2012-09-03 11:10:30 -0400] vaq: Hello, I have a strange issue with my ActiveMQ cookbook. I have "service activemq start" as the last instruction in the cookbook. The log shows that activemq starts but it only runs for a few seconds then it dies leaving a pid file and a empty log file.. If I run "service activemq start" manually at the node I deploy the cookbook at there is no problems. Any ideas?
[2012-09-03 11:13:30 -0400] bram__: 90
[2012-09-03 11:16:26 -0400] vaq: ?
[2012-09-03 11:23:07 -0400] oneiroi: Hi All, possible to run a local chef-server on OSX?
[2012-09-03 11:47:32 -0400] vaq: anyone know why I can start activemq through bin/activemq start but it doesn't work as a init script?
[2012-09-03 12:09:54 -0400] BryanWB_: jhowarth: hey dude, am running into some issues w/ ur patch to postgresql::ruby recipe
[2012-09-03 12:10:26 -0400] BryanWB_: jhowarth: i presume u have the pg repos baked into ur default vagrant and vmware boxes
[2012-09-03 13:35:58 -0400] BryanWB_: jtimberman: got a few qs for u when u get a chance
[2012-09-03 13:40:01 -0400] dmoarir: Anyone else experienced problems with wget in an execute or a script resource with large files (say over 1,5Gb)? The exact problem being that the chef client dies with out of memory errors.
[2012-09-03 13:42:12 -0400] Babar: I wonder what you're downloading in your resource :)
[2012-09-03 13:42:45 -0400] BryanWB_: dmoarir: i would use remote_file for that
[2012-09-03 13:43:30 -0400] dmoarir: install media files, oracle
[2012-09-03 13:45:24 -0400] BryanWB_: dmoarir: have u tried remote_file?
[2012-09-03 13:46:06 -0400] dmoarir: BryanWB_: actually not, I'll take a look at it
[2012-09-03 13:46:59 -0400] dmoarir: replacing wget with curl seems to work, but just wondering why wget makes the chef client go nuts
[2012-09-03 13:47:50 -0400] dmoarir: wget itself works find from the command line
[2012-09-03 13:47:55 -0400] dmoarir: er fine
[2012-09-03 13:52:59 -0400] dmoarir: looking at remote_file, is it http only or can it do https?
[2012-09-03 13:53:21 -0400] BryanWB_: dunno :(
[2012-09-03 13:53:28 -0400] BryanWB_: i only used w/ http
[2012-09-03 13:53:48 -0400] dmoarir: ok, thanks though
[2012-09-03 13:59:53 -0400] yfeldblum_: dmoarir, don't see why it couldn't do https
[2012-09-03 14:16:40 -0400] UukGoblin: can someone plz fix the python cookbook so that it's possible to pip install stuff like git+git://github.com/tangentlabs/django-oscar.git#egg=django-oscar?
[2012-09-03 14:30:17 -0400] gyre007: is there an easy way how I can copy ALL contents of the directory to certain directory on the node ?
[2012-09-03 14:30:48 -0400] gyre007: remote_directory requires the directory to be named as the detination directory...but there are already files in that dest. directory which i dont want to override
[2012-09-03 14:30:59 -0400] bdha: wget? rsync? git?
[2012-09-03 14:31:03 -0400] gyre007: or is remote_dir NOT overriding those files ?
[2012-09-03 14:31:13 -0400] jonlives: gyre007: afaik it doesn't overwrite those files
[2012-09-03 14:31:17 -0400] gyre007: bdha, lol dude...Chef-way pleaase :)
[2012-09-03 14:31:21 -0400] _rc: gyre007: depends on the parameters you pass it
[2012-09-03 14:31:22 -0400] bdha: There isn't one, really.
[2012-09-03 14:31:30 -0400] gyre007: jonlives, let's see :)
[2012-09-03 14:31:44 -0400] jonlives: gyre007: lemme check one of our boxes that uses it
[2012-09-03 14:31:51 -0400] gyre007: ok
[2012-09-03 14:31:54 -0400] bdha: ah, remote_dir. Not via cookbooks. Sorry.
[2012-09-03 14:31:55 -0400] gyre007: taht would be awesome
[2012-09-03 14:32:58 -0400] jonlives: gyre007: yeah it def doesn't overwrite stuff already in the directory - providing filenames don't clash with the stuff chef is copying of course
[2012-09-03 14:33:09 -0400] gyre007: coolios
[2012-09-03 14:33:17 -0400] gyre007: awesome jonlives will give it a go then :)
[2012-09-03 14:33:24 -0400] jonlives: gravy :)
[2012-09-03 14:55:23 -0400] rocketeer125: join #puppet
[2012-09-03 14:59:40 -0400] BryanWB_: is there any ruby shortcut to tell if a package is installed?
[2012-09-03 15:00:19 -0400] BryanWB_: like    package_installed?('postgresql90')
[2012-09-03 15:10:23 -0400] gyre007: I have a question about embedded rubies...
[2012-09-03 15:11:32 -0400] gyre007: I have installed Sensu (monitoring framework) - sensu ships with its own embedded ruby like omnibus Chef. The problem is when I'm trying to install gem_package resource it installs it into the Chef's one and not the Sensu's one...is there any way around that ??
[2012-09-03 15:12:17 -0400] bdha: Override the gem the gem_package resource is using.
[2012-09-03 15:13:24 -0400] gyre007: bdha, mm ?
[2012-09-03 15:13:26 -0400] gyre007: can you elaborate a bit please
[2012-09-03 15:13:26 -0400] bdha: gem_package "foo" do
[2012-09-03 15:13:33 -0400] bdha: gem_binary  "/opt/ruby/bin/gem"
[2012-09-03 15:13:35 -0400] bdha: acion: install
[2012-09-03 15:13:35 -0400] bdha: end
[2012-09-03 15:13:37 -0400] bdha: Or whatever.
[2012-09-03 15:13:44 -0400] gyre007: mm will look into that
[2012-09-03 15:13:55 -0400] bdha: Assumes that sensu's bundled Ruby includes its own gem.
[2012-09-03 15:15:08 -0400] gyre007: yeah it does
[2012-09-03 15:15:35 -0400] vaq: Hello, I have some strange issues with init scripts in my cookbooks.. During cookbook deployment i run "service <ID> start" the service starts and continues to run, but when the cookbook deployment is done, it stops.. Any ideas?
[2012-09-03 15:38:58 -0400] vaq: Hello, I have some strange issues with init scripts in my cookbooks.. During cookbook deployment i run "service <ID> start" the service starts and continues to run, but when the cookbook deployment is done, it stops.. Any ideas?
[2012-09-03 15:39:57 -0400] Jay_Levitt: vaq: is your chef-client running as root?  Is it possible the script doesn't require root otherwise, and everything chugs happily along, except it never daemonizes the server?
[2012-09-03 15:40:24 -0400] vaq: Jay_Levitt: yes chef-client is running as root.
[2012-09-03 15:41:08 -0400] vaq: Jay_Levitt: the funny part is, if I do screen -dmS glass /etc/init.d/glassfish start, it runs glassfish for 10 seconds and then crash, same behavior with chef-client
[2012-09-03 15:41:19 -0400] vaq: Jay_Levitt: but if I do /etc/init.d/glassfish start from my prompt, it keeps running
[2012-09-03 15:41:41 -0400] Jay_Levitt: vaq: weird.  Out of my depth on that :/
[2012-09-03 15:42:46 -0400] Jay_Levitt: gyre007: what do you think of sensu? I cant find any screenshots on their site, but I'm forever looking for A Better Monitoring tool
[2012-09-03 15:43:39 -0400] gyre007: Jay_Levitt, so far so good...it's definitely good if you're running your stuff in the Cloud ...much less hassle than Nagios and constant reconfiguration when your instance dies
[2012-09-03 15:43:52 -0400] aruntomar: vaq: try tmux, it's like screen but much better and many more features.
[2012-09-03 15:44:04 -0400] Jay_Levitt: gyre007: is the constant reconfiguration only because IP addresses change? we're in a VPC so that doesn't hurt us
[2012-09-03 15:44:20 -0400] gyre007: also scaling
[2012-09-03 15:44:32 -0400] vaq: aruntomar: but I am not trying to run the app in a screen anyway, the above was for debugging purpose.. /etc/init.d/glassfish spawns glassfish as a daemon
[2012-09-03 15:44:35 -0400] gyre007: all you have to care about with sensu is to scale your queue
[2012-09-03 15:44:45 -0400] gyre007: ie Rabbit
[2012-09-03 15:45:01 -0400] vaq: aruntomar: it seems like some environment issue
[2012-09-03 15:45:03 -0400] yfeldblum_: gyre007, at what point do you need to scale your queue?
[2012-09-03 15:45:05 -0400] gyre007: ive only started using it last week...still getting to grips with it
[2012-09-03 15:45:14 -0400] gyre007: yfeldblum_, if you have loads of servers...
[2012-09-03 15:45:36 -0400] gyre007: i havent had to do that yet though
[2012-09-03 15:45:47 -0400] gyre007: also all config is in json...supereasy to script in any language
[2012-09-03 15:45:57 -0400] gyre007: and easy to stick it into Chef...
[2012-09-03 15:46:08 -0400] yfeldblum_: gyre007, heh, can you give a ballpark of how many servers and the unscaled queue is still working fine?
[2012-09-03 15:46:08 -0400] gyre007: either as databag or as whatever you wish :)
[2012-09-03 15:46:40 -0400] gyre007: yfeldblum_, we have about 20-50 servers running which are monitored by sensu...
[2012-09-03 15:46:50 -0400] gyre007: rabbit is totally ok with that load...
[2012-09-03 15:46:53 -0400] yfeldblum_: gyre007, cool
[2012-09-03 15:47:06 -0400] gyre007: cant give you exact metrics though..
[2012-09-03 15:47:32 -0400] gyre007: aarrgh...but im hitting a bit of a wall with Chef and Sensu...
[2012-09-03 15:47:41 -0400] gyre007: both ship with their embedded rubies
[2012-09-03 15:48:51 -0400] gyre007: and I need sensu-plugin gem to use sensu plugins...I installed it....it gets installed...BUT on the client nodes im getting Fatal errors reporting that I'm missing some other gems...whilst on server nodes im not getting any errors :)
[2012-09-03 15:48:53 -0400] gyre007: im puzzled
[2012-09-03 15:50:24 -0400] gyre007: http://pastebin.com/QQV1QQKN
[2012-09-03 15:52:01 -0400] jmartin1: gyre007: are you specifying the gem_binary properly? for some reason it looks like its still searching your chef rubygems
[2012-09-03 15:52:23 -0400] gyre007: jmartin1, no it's not...see the list of gems in that error
[2012-09-03 15:52:41 -0400] gyre007: ill update the pastebing
[2012-09-03 15:52:42 -0400] gyre007: sec
[2012-09-03 15:53:41 -0400] gyre007: http://pastebin.com/VvJrMFPF
[2012-09-03 15:54:04 -0400] gyre007: first theres a list of Chef gems and then list of Sensu gems and compare it with the ones spit by that error
[2012-09-03 15:54:15 -0400] jmartin1: yah, i see json
[2012-09-03 15:54:25 -0400] jmartin1: but not listed in the sensu gems
[2012-09-03 15:54:27 -0400] jmartin1: which is weird
[2012-09-03 15:54:46 -0400] gyre007: mm
[2012-09-03 15:54:47 -0400] gyre007: totally
[2012-09-03 15:55:23 -0400] gyre007: lol looks like A COMPLETE mash of both
[2012-09-03 15:55:24 -0400] gyre007: really
[2012-09-03 15:56:28 -0400] gyre007: but highline is now installed in both!!!!!!
[2012-09-03 15:56:32 -0400] gyre007: so what the heeeck
[2012-09-03 15:57:16 -0400] gyre007: this is what I did thinking it would help: http://pastebin.com/pdAJ4mUb
[2012-09-03 15:57:21 -0400] gyre007: nope it didnt
[2012-09-03 15:58:41 -0400] gyre007: #clueless
[2012-09-03 16:00:48 -0400] ssd7: gyre007: Mind posting a full debug log?
[2012-09-03 16:01:12 -0400] gyre007: ssd7, it's very long but can...second
[2012-09-03 16:02:06 -0400] ssd7: You might also try putting Chef::Log.info(RbConfig::CONFIG['bindir']) before the failure point just to ensure it is pointing at the gem installation we think it is.
[2012-09-03 16:02:22 -0400] gyre007: uh it might actually be related to some mongo stuff...wth :)
[2012-09-03 16:02:33 -0400] gyre007: because it crashes straight after mongo
[2012-09-03 16:03:07 -0400] gyre007: http://pastebin.com/3eEhWDD4
[2012-09-03 16:03:12 -0400] gyre007: its the last snippet
[2012-09-03 16:05:44 -0400] gyre007: strange
[2012-09-03 16:13:41 -0400] gyre007: mm that code requires mongo and it cant' find it apparently...
[2012-09-03 16:14:26 -0400] gyre007: despite the fact that mongo IS installed
[2012-09-03 16:14:32 -0400] gyre007: I mean mongo gem
[2012-09-03 16:15:17 -0400] gyre007: weird things happening :)
[2012-09-03 16:17:14 -0400] gyre007: so why can't the Chef find the mongo gem when it IS installed: http://pastebin.com/92eVy8Cn
[2012-09-03 16:20:31 -0400] gyre007: when I log on to shef...and do require 'mongo', all goes well :))) now im totally lost haha
[2012-09-03 16:20:49 -0400] gyre007: so from the files it doesnt and from the shef irb session it loads fine ?
[2012-09-03 16:22:03 -0400] gyre007: http://pastebin.com/HMgS2jbE
[2012-09-03 16:22:27 -0400] ssd7: gyre007: Heh, I was just about to ask if it works in shef.  One guess is that something in your cookbooks is messing with your gem path.  I would try the log line I posted above right before the point that the recipe fails.
[2012-09-03 16:23:11 -0400] gyre007: ssd7, before the  require 'mongo' ?
[2012-09-03 16:24:28 -0400] ssd7: Hmm.  Let me read the stack trace again.  One sec.
[2012-09-03 16:25:16 -0400] ssd7: I would put it somewhere above: mongodb::replicaset line 166
[2012-09-03 16:25:49 -0400] ssd7: You probably want to wrap it in a ruby_block to make sure it runs at convergance time.
[2012-09-03 16:26:16 -0400] ssd7: Or use the log resource: log RbConfig::CONFIG['bindir']
[2012-09-03 16:26:29 -0400] gyre007: http://pastebin.com/9sSuT3yA ?
[2012-09-03 16:27:05 -0400] ssd7: gyre007: That'll work
[2012-09-03 16:29:22 -0400] gyre007: nope doesnt produce any output
[2012-09-03 16:32:15 -0400] ssd7: Hrm
[2012-09-03 16:33:26 -0400] ssd7: What if you change it to just Gem.bindir rather than RbConfig::CONFIG['bindir']
[2012-09-03 16:34:29 -0400] gyre007: it looks like when you use gem_binary it messes up the PATH to gems...good stuff and lots of fun
[2012-09-03 16:37:05 -0400] gyre007: when I remove that gem_binary bit all goes through so theres gotta be a bug
[2012-09-03 16:39:01 -0400] ssd7: gyre007: Remove the gem_binary where?  The gem_binary is /supposed/ to install the gem to the specified binary, so in some sense it is expected to mess with the path.
[2012-09-03 16:40:09 -0400] ssd7: brb
[2012-09-03 16:40:10 -0400] gyre007: and it does :) I added it into another recipe which is installing gem dependencies for sensu embedded ruby...those packages install fine...but then the code continues and the path continues to be set to sensu path and chef fails to find its gems...
[2012-09-03 16:40:13 -0400] gyre007: thats my theory
[2012-09-03 16:40:29 -0400] gyre007: so when I remove gem_binary attrib from those dependencies all works fine
[2012-09-03 16:40:58 -0400] gyre007: it is mesing with the path but it's not reverting the path back to what it was before the gem_binary attribute was used...
[2012-09-03 16:41:00 -0400] gyre007: bizzare
[2012-09-03 16:41:01 -0400] ssd7: Ahh, I see.  That sounds like a bug to me.
[2012-09-03 16:41:05 -0400] gyre007: yup
[2012-09-03 16:51:40 -0400] ssd7: gyre007: I think this is fixed in 10.14 currently in RC
[2012-09-03 16:53:18 -0400] ssd7: gyre007: https://github.com/opscode/chef/commit/e272821c
[2012-09-03 16:55:02 -0400] gyre007: ssd7, cheers
[2012-09-03 16:55:57 -0400] gyre007: is there any workaround ??
[2012-09-03 16:56:21 -0400] gyre007: like adding Gem.clear_paths ?
[2012-09-03 16:56:24 -0400] gyre007: or something like that
[2012-09-03 16:58:47 -0400] ssd7: gyre007: Yes, I think that running Gem.clear_paths would do it, you just have to be sure to run it at convergence and not compile, which means making sure it is inside a ruby_block.  Depending on the environment you could also upgrade to 10.14
[2012-09-03 17:03:06 -0400] gyre007: something like this ? http://pastebin.com/tFmhkxkK
[2012-09-03 17:17:43 -0400] ssd7: gyre007: Not quite.  You should have that rubyblock outside of the gem_package resource.
[2012-09-03 17:20:09 -0400] kewark: whats the difference between data bags and attributes? which one is easier to configure before lauching a server on ec2?
[2012-09-03 17:20:10 -0400] gyre007: yep
[2012-09-03 17:20:12 -0400] gyre007: done that
[2012-09-03 17:20:21 -0400] gyre007: and it worked...thanks for help ssd7
[2012-09-03 17:20:44 -0400] ssd7: no problem :)
[2012-09-03 17:21:49 -0400] yfeldblum_: kewark, data bags are effectively a *separate* database which have no connection to nodes, roles, environments, or any node/role/environment attributes
[2012-09-03 17:22:36 -0400] yfeldblum_: kewark, a recipe may, at its discretion, elect to search through a data-bag; but data-bags have no intrinsic impact on node attributes, on run-lists, etc
[2012-09-03 17:24:38 -0400] kewark: yfeldblum_: when configuring something like haproxy or pgpool what's the best way to specify the backend servers for that kind of services?
[2012-09-03 17:25:09 -0400] yfeldblum_: kewark, up to you
[2012-09-03 17:25:54 -0400] kewark: so either data bags or attributes is fine right?
[2012-09-03 17:27:00 -0400] yfeldblum_: kewark, chef ships with a variety of choices (node attributes, roles, environments, data-bags, and combinations thereof) but it's up to you to test out various alternatives and find some good choices based on their fit with your infrastructure, your personality, your company, your team, the programs you're deploying, the data you're storing, the ways in which you'll need to query and change things, etc
[2012-09-03 17:29:40 -0400] kewark: ok thanks yfeldblum_
[2012-09-03 17:33:38 -0400] yfeldblum_: kewark, no probs
[2012-09-03 17:34:57 -0400] yfeldblum_: kewark, i can't tell you how you should do it because i don't know enough about you and your context to tell you that - but i and others here are certainly happy to help with more concrete or more specific or more detailed questions
[2012-09-03 17:41:23 -0400] kewark: well I am creating a recipe for pgpool(for replication) but I don't know what are the pg servers yet, so I was wondering what is the best/recommended way to do this
[2012-09-03 17:50:22 -0400] mardek: can someone help me ? I have the cookbook users that I'm applying to a node but no users are created
[2012-09-03 17:50:44 -0400] yfeldblum_: mardek, which cookbook?
[2012-09-03 17:52:23 -0400] mardek: users but I saw that I don't have the latest version
[2012-09-03 17:52:24 -0400] yfeldblum_: kewark, various approaches - one possibility is to have a role just for the pgpool cluster with a special default attribute that assigns a cluster name; then in a recipe, the recipe can search for other nodes with that pgpool cluster name
[2012-09-03 17:52:34 -0400] mardek: yfeldblum_: that one http://community.opscode.com/cookbooks/users
[2012-09-03 17:53:16 -0400] kewark: yfeldblum_: how can I search nodes? that seems interesting
[2012-09-03 17:53:47 -0400] mardek: yfeldblum_: I did apply my cookbook to my node with no problem, but when I'm executing chef-client no users are added
[2012-09-03 17:54:12 -0400] mardek: yfeldblum_: but I have users in my data bag users
[2012-09-03 17:54:31 -0400] yfeldblum_: kewark, http://wiki.opscode.com/display/chef/Search#Search-UsingSearchinRecipes
[2012-09-03 17:55:00 -0400] yfeldblum_: mardek, what does `knife data bag show users` say?
[2012-09-03 17:55:44 -0400] kewark: awesome thanks again
[2012-09-03 17:57:11 -0400] mardek: yfeldblum_: that show all my users in my data bag
[2012-09-03 17:58:30 -0400] yfeldblum_: mardek, what does the data in one of these data-bag items look like?
[2012-09-03 18:07:26 -0400] mardek: yfeldblum_: it display me the list of my users
[2012-09-03 18:07:44 -0400] mardek: yfeldblum_: when I do a `knife data bag show users`
[2012-09-03 18:09:02 -0400] yfeldblum_: mardek, yes, but what about the data for one user? e.g., if the data-bag item is named "mardek" (data_bags/users/mardek.json in your repo), what does the data look like? feel free to pastie it after scrubbing away anything sensitive
[2012-09-03 18:09:57 -0400] mardek: yfeldblum_: nope the user I use is called mndeko
[2012-09-03 18:10:10 -0400] mardek: yfeldblum_: And i can see its attributes
[2012-09-03 18:10:44 -0400] mardek: yfeldblum_: the group, sshkey and password hashed
[2012-09-03 18:12:05 -0400] yfeldblum_: mardek, i can't see if there's a problem with the structure of the data-bag item's data, or rule out that possibility, if you don't show the data ...
[2012-09-03 18:12:46 -0400] jaimef: anyone have any sort of CI for their recipes/cookbooks?
[2012-09-03 18:14:45 -0400] ssd7: jaimef: Internally we are building a bit of CI around test-kitchen for the Opscode cookbooks.
[2012-09-03 18:14:58 -0400] jaimef: ok
[2012-09-03 18:15:58 -0400] ssd7: jaimef: Any questions about setting up CI in particular?
[2012-09-03 18:16:39 -0400] yfeldblum_: ssd7, what for? i thought using other people's production environments as your CI environment was a good strategy!
[2012-09-03 18:20:34 -0400] ssd7: yfeldblum_: :)
[2012-09-03 18:26:38 -0400] jaimef: ssd7: was just looking to not reinvent the wheel
[2012-09-03 18:26:51 -0400] jaimef: with the functional rspec tests. and heckle applied to dna
[2012-09-03 18:28:13 -0400] ssd7: jaimef: Well, a lot of the community is starting to check out the newly released test-kitchen: https://github.com/opscode/test-kitchen
[2012-09-03 18:28:56 -0400] ssd7: Currently it is fairly vagrant centric, but there is ongoing work to add support for openstack and other backends.
[2012-09-03 18:29:11 -0400] jaimef: vagrang is good
[2012-09-03 18:33:18 -0400] ssd7: jaimef: Indeed, we use vagrant extensively.  Support for other runners is mostly to make it a bit easier to tie into something like jenkins
[2012-09-03 18:33:58 -0400] jaimef: need to move off chef solo first
[2012-09-03 19:12:23 -0400] oleksiyp: hello all, i'm trying to install gitolite(to manage git repositories) to a virtual machine using chef via vagrant http://pastebin.com/5KZtYxHx
[2012-09-03 19:13:08 -0400] oleksiyp: i have problem "uninitialized constant Chef::Recipe::Opscode"
[2012-09-03 19:52:52 -0400] gyre007: can I notify a service to be restarted from within remote_directory resource ?
[2012-09-03 19:55:06 -0400] krawek: whats the equivalent of node[:rackspace][:private_ip] on amazon ec2?
[2012-09-03 20:01:03 -0400] jonlives: gyre007: yes :)
[2012-09-03 20:05:26 -0400] richleland: krawek - not sure of exact equivalent, but I think you can replace :rackspace with :ec2
[2012-09-03 20:05:48 -0400] richleland: krawek do a knife node list YOURNODENAME -l
[2012-09-03 20:06:05 -0400] richleland: krawek the "-l" part will give a list of all available node attributes
[2012-09-03 20:06:06 -0400] krawek: neither :amazon or :ec2 are defined
[2012-09-03 20:06:10 -0400] krawek: [14] pry(#<Chef::Recipe>)> node[:amazon]
[2012-09-03 20:06:10 -0400] krawek: => nil
[2012-09-03 20:06:11 -0400] krawek: [15] pry(#<Chef::Recipe>)> node[:ec2]
[2012-09-03 20:06:12 -0400] krawek: => nil
[2012-09-03 20:06:18 -0400] krawek: ok
[2012-09-03 20:06:29 -0400] richleland: krawek - check out the cloud attribute too
[2012-09-03 20:06:48 -0400] richleland: krawek knife node show YOURNODENAME -a cloud
[2012-09-03 20:07:48 -0400] krawek: $ knife node list web1 -l
[2012-09-03 20:07:49 -0400] krawek: Error: invalid option: -l
[2012-09-03 20:07:56 -0400] richleland: yeah - I had a typo in there
[2012-09-03 20:07:59 -0400] richleland: replace list with show
[2012-09-03 20:08:04 -0400] krawek: yeah
[2012-09-03 20:08:05 -0400] richleland: knife node show web1 -l
[2012-09-03 20:10:11 -0400] Jay_Levitt: anyone used the --ebs-size parameter with "knife ec2 server create"?  When I connect to the server, it says my EBS volume has only 8GB, but when I "sudo resize2fs" it says "The filesystem is already 26214400 blocks long.  Nothing to do!"
[2012-09-03 20:10:15 -0400] krawek: "cloud" is not defined
[2012-09-03 20:10:17 -0400] gyre007: jonlives, how :)
[2012-09-03 20:10:42 -0400] jonlives: gyre007: "notifies :restart, resources(:service => "foo")"
[2012-09-03 20:10:56 -0400] jonlives: add that line to your resource
[2012-09-03 20:11:09 -0400] jonlives: with foo being the name  of the service
[2012-09-03 20:11:22 -0400] jonlives: it has to be the name of a service you've declared in chef with a service block tho
[2012-09-03 20:11:30 -0400] Jay_Levitt: Um, nevermind.  I blinked and now it's 100GB.
[2012-09-03 20:12:46 -0400] Jay_Levitt: krawek, you may need to drop the (empty) file /etc/chef/ohai/hints/ec2.json on your server.
[2012-09-03 20:13:02 -0400] Jay_Levitt: It's apparently become impossible for ohai to guess that you're on EC2 anymore.
[2012-09-03 20:14:09 -0400] krawek: hmm ok
[2012-09-03 20:14:19 -0400] Jay_Levitt: That should create the node[:ec2] section.
[2012-09-03 20:37:11 -0400] halcyonCorsair: hi, chef noob here, is anyone here familiar with the opscode perl cookbook?
[2012-09-03 20:38:17 -0400] ssd7: halcyonCorsair: Not super-familiar but I may be able to help.  What's up?
[2012-09-03 20:39:53 -0400] halcyonCorsair: ssd7: I'm playing around with chef-solo, am I right in thinking I should be able to override ['perl']['packages'] in my node.json and specify all the perl packages I want installed?
[2012-09-03 20:42:55 -0400] ssd7: That does look like it should work
[2012-09-03 20:45:15 -0400] halcyonCorsair: hmm, so perhaps my json syntax is incorrect
[2012-09-03 20:45:24 -0400] halcyonCorsair: ssd7: will it append or override?
[2012-09-03 20:45:49 -0400] hoover_damm: override if you specify -j node.json
[2012-09-03 20:45:55 -0400] mrtazz: what is the "official" way to send chef-client output directly to syslog? I've tried a couple of ways (including https://gist.github.com/787164) and it doesn't seem to work for me
[2012-09-03 20:46:06 -0400] hoover_damm: or more specifically it should overwrite the node['perl']['packages'] with what is in node.json
[2012-09-03 20:49:07 -0400] halcyonCorsair: is there a preferred json lint tool?
[2012-09-03 20:49:51 -0400] Jay_Levitt: Just had a horrible thought... if I'm using the ubuntu-gems bootstrap to install chef on a node, and I set up rvm::system and reboot.. am I going to need to reinstall any gem that would have been installed by chef_gem, because it was installed to the stock ubuntu gem library?
[2012-09-03 20:52:42 -0400] halcyonCorsair: hoover_damm: ssd7: thanks
[2012-09-03 20:55:31 -0400] halcyonCorsair: Jay_Levitt: I believe so
[2012-09-03 20:58:26 -0400] Jay_Levitt: hoo boy.  And I can't upgrade to 10.14 and chef-full, because the database cookbook still (sounds) stuck on the pgm gem.
[2012-09-03 20:58:29 -0400] Jay_Levitt: s/pgm/pm
[2012-09-03 20:58:34 -0400] Jay_Levitt: s/pm/pg!
[2012-09-03 21:03:13 -0400] hoover_damm: Jay_Levitt, known issue
[2012-09-03 21:03:16 -0400] hoover_damm: Jay_Levitt, don't use chef-full
[2012-09-03 21:03:35 -0400] hoover_damm: Jay_Levitt, you'll have to use system ruby and chef installed via rubygems (or apt)
[2012-09-03 21:03:42 -0400] Jay_Levitt: hoover_damm: yeah.. I haven't been, for exactly that reason.  I'll just prepare to discover what gems get installed at bootstrap and reinstall them in rvm
[2012-09-03 21:04:00 -0400] hoover_damm: lol @ rvm
[2012-09-03 21:04:18 -0400] hoover_damm: I really wish Ruby wasn't so freaking hard
[2012-09-03 21:04:25 -0400] Jay_Levitt: Seriously.
[2012-09-03 21:04:57 -0400] Jay_Levitt: Also it spoils me with elegance and simplicity, so when stuff like this (which, let's face it, would be normal in any other world) happens, it's like NOOOOO! MY ELEGANT DOMAIN MODEL!
[2012-09-03 21:04:58 -0400] hoover_damm: I worked with Wayne for quite some time to my dislike of rvm isn't because of Wayne or because some of RVM's code makes my eyes bleed
[2012-09-03 21:05:07 -0400] hoover_damm: it's honestly because it shouldn't be required
[2012-09-03 21:05:22 -0400] hoover_damm: we should be able to have ruby easy, simple and without an act of god
[2012-09-03 21:05:40 -0400] Jay_Levitt: yeah.. I've asked around the office about rbenv vs rvm vs whatever, and everyone agrees that when one of them breaks, they try the other, and keep using that till IT breaks
[2012-09-03 21:05:55 -0400] hoover_damm: :(
[2012-09-03 21:05:56 -0400] hoover_damm: that's sad
[2012-09-03 21:06:16 -0400] Jay_Levitt: This one's not rvm's fault tho, really - I mean, if bootstrap installs some gems, and then we install a new ruby, of course those gems will disappear.
[2012-09-03 21:06:43 -0400] Jay_Levitt: That'd be true even if we compiled ruby from source by hand.
[2012-09-03 21:07:08 -0400] hoover_damm: well the gem_home path is normally either 1.8 or 1.9
[2012-09-03 21:07:23 -0400] hoover_damm: so if you go from 1.8.6 to 1.8.7 gem list should still show your old gems
[2012-09-03 21:07:33 -0400] Jay_Levitt: sure, but I'd be installing 1.9 anyway
[2012-09-03 21:07:34 -0400] hoover_damm: e.g. /usr/lib/ruby/1.8 or /usr/lib/ruby/1.9
[2012-09-03 21:07:50 -0400] hoover_damm: guh and it's still 1.9.1
[2012-09-03 21:07:51 -0400] hoover_damm: if it's 1.9.3
[2012-09-03 21:07:58 -0400] Jay_Levitt: right, because numbers.
[2012-09-03 21:08:45 -0400] Jay_Levitt: (was just reminded of my favorite Ruby 1.9-ism:  [1,2,3,] is a valid array with three items.
[2012-09-03 21:08:59 -0400] Jay_Levitt: leave your commas on all your lines, and if you add more lines, great!
[2012-09-03 21:09:00 -0400] yfeldblum_: Jay_Levitt, haven't seen rvm break in any meaningful way on me that wasn't easily correctable
[2012-09-03 21:09:28 -0400] hoover_damm: Jay_Levitt, you are aware how you can tar up the rvm and untar it on all your servers?
[2012-09-03 21:09:42 -0400] hoover_damm: Jay_Levitt, to save like building of rubies, and reinstallation of gems?
[2012-09-03 21:10:01 -0400] Jay_Levitt: hoover_damm: sure, I'm actually going to make an AMI at some point when I get happier with my chef stuff
[2012-09-03 21:10:27 -0400] hoover_damm: there's lots of neat little silly patterns I was pulling out of Wayne's head.
[2012-09-03 21:10:31 -0400] Jay_Levitt: in fact, meant to ask - are there things I should delete before making an AMI (stuff that only happens at bootstrap), or will ohai figure its way out of whatever was left behind?
[2012-09-03 21:10:52 -0400] hoover_damm: Jay_Levitt, mkdir -p /etc/chef and make sure /etc/chef/client.rb and the validation stuff is gone
[2012-09-03 21:11:05 -0400] Jay_Levitt: ah, good one
[2012-09-03 21:11:13 -0400] hoover_damm: Jay_Levitt, I normally just do export HISTFILE=/dev/null and then rm .vim* .emacs* .bash_history
[2012-09-03 21:11:17 -0400] hoover_damm: rm -rf /etc/chef/
[2012-09-03 21:11:20 -0400] hoover_damm: mkdir -p /etc/chef/
[2012-09-03 21:12:50 -0400] Jay_Levitt: I'm not even worried about command history and dotfiles - this would be a one-shot recipe that converges a node and then dumps itself to an AMI.
[2012-09-03 21:12:50 -0400] hoover_damm: Jay_Levitt, basically I was going to say there's nothing wrong with a bootstrap that would untar a RVM install with everything preinstalled
[2012-09-03 21:13:09 -0400] hoover_damm: Jay_Levitt, then write the validation and client.rb and then run chef
[2012-09-03 21:13:09 -0400] Jay_Levitt: hoover_damm: Oh, you mean *before* chef installs its own gem?
[2012-09-03 21:13:18 -0400] hoover_damm: Jay_Levitt, ahem... bootstrap :)
[2012-09-03 21:13:45 -0400] hoover_damm: Jay_Levitt, instead of it installing chef-full or system... it would install rvm and then untar a tarred up copy of your rvm install with everything already installed
[2012-09-03 21:14:12 -0400] hoover_damm: Jay_Levitt, then it would then follow the regular next steps to write client.rb an the json and run chef-client under rvm
[2012-09-03 21:14:16 -0400] Jay_Levitt: I like that..
[2012-09-03 21:14:34 -0400] Jay_Levitt: but: it'd end up installing gems while sudo'd.
[2012-09-03 21:14:36 -0400] hoover_damm: basically you can tar up .rvm or /usr/local/rvm and ship it anywhere
[2012-09-03 21:14:45 -0400] hoover_damm: great way to deploy updates
[2012-09-03 21:14:58 -0400] hoover_damm: right sudo isn't a problem :)
[2012-09-03 21:15:26 -0400] Jay_Levitt: sure it is.. then stuff in /usr/local/rvm/**/gems is owned by root, and a regular "$ gem" can't update them
[2012-09-03 21:15:28 -0400] hoover_damm: mull it over :) expand the thought and make your deployment easier
[2012-09-03 21:15:44 -0400] Jay_Levitt: well, realistically if I wait for 10.14 to settle out, the chef-full/pg thing gets fixed, I think
[2012-09-03 21:15:55 -0400] Jay_Levitt: Looks like most of the work has been done, the big refactoring, etc
[2012-09-03 21:16:04 -0400] hoover_damm: chef-full/pg is ticketed and as a blocking ticket
[2012-09-03 21:16:12 -0400] hoover_damm: they'll need to include pg in chef-full to fix that
[2012-09-03 21:16:22 -0400] hoover_damm: or perhaps opscode has other plans
[2012-09-03 21:16:26 -0400] hoover_damm: I can't say
[2012-09-03 21:17:25 -0400] Jay_Levitt: I'm not sure.. looked like they did a bunch of work to prevent pg from being needed at compile time
[2012-09-03 21:17:47 -0400] Jay_Levitt: which solved some chicken-and-egg that I can no longer remember what.
[2012-09-03 21:18:21 -0400] Jay_Levitt: how can I see 10.14 blockers?
[2012-09-03 21:20:29 -0400] Jay_Levitt: Interesting.. COOK-1406 is priority "blocker" but isn't targeted to 10.14.  Ah, JIRA.
[2012-09-03 21:25:34 -0400] patcon: hey guys, is there a preferred means to determine in a recipe/attributes whether something is running in chef-solo vs chef-client?
[2012-09-03 21:26:48 -0400] meineerde: patcon: if Chef::Config[:solo]
[2012-09-03 21:54:08 -0400] halcyonCorsair: how can I specify an apt repository resource in my node.json (for chef-solo) with the apt cookbook?
[2012-09-03 22:39:37 -0400] patcon: meineerde: you = hero
[2012-09-03 22:49:42 -0400] samkottler: shreyans: hey!
[2012-09-03 22:51:33 -0400] halcyonCorsair: is anyone able to help me with using the database cookbook?
[2012-09-03 23:09:54 -0400] krawek: yfeldblum_ richleland Jay_Levitt thank you guys for your help today
[2012-09-03 23:10:11 -0400] krawek: really appreciated
[2012-09-03 23:11:17 -0400] Jay_Levitt: glad it helped.. I'm still figuring this out myself!
[2012-09-03 23:26:49 -0400] flaccid: hmm anyone seen any mono chef stuff around?
[2012-09-03 23:30:22 -0400] flaccid: weirdly that appears to be a negative
[2012-09-03 23:58:15 -0400] Jay_Levitt: Today I learned: You can't use DNS to discover your NAT instance so you can set up your default route.

[2012-09-18 00:00:29 -0400] hashpuppy_: new to chef.  i see that ntp has only 3 stars.  is this a cookbook you guys create yourselves?  or do you just site install and modify it?
[2012-09-18 00:01:06 -0400] hashpuppy_: it also says build status: failing on the website
[2012-09-18 00:01:08 -0400] Pushnell: hashpuppy_: best way to determine if a community cookbook is right for you is to download it and read through it.
[2012-09-18 00:01:13 -0400] awgross|flashman: Pushnell: there must be a good way to do it , just not coming to mind
[2012-09-18 00:01:24 -0400] timsmith: the NTP cookbook will do what 90% of people need
[2012-09-18 00:01:34 -0400] timsmith: no modifications necessary
[2012-09-18 00:01:44 -0400] timsmith: it just went through a major refactoring also
[2012-09-18 00:02:00 -0400] hashpuppy_: cool.  last question about ntp.  do you guys put the server list in a databag or is that really not necessary for ntp?
[2012-09-18 00:02:23 -0400] erikh: I use search to build server lists from the resources they provide
[2012-09-18 00:02:52 -0400] erikh: e.g., knife search node 'roles:syslog_server' # -> all syslog servers
[2012-09-18 00:03:19 -0400] erikh: that keeps it pretty dynamic, and more up-to-date than any databag would be
[2012-09-18 00:03:35 -0400] timsmith: hashpuppy_:  The default method is to use a list of servers in your environment file, but you can also install ntp servers using the cookbook and then have the clients find the servers via search.  That's new in this release
[2012-09-18 00:03:38 -0400] hashpuppy_: i see.  so, that assumes i used chef to create my ntp server, right?
[2012-09-18 00:03:52 -0400] timsmith: yes
[2012-09-18 00:03:57 -0400] hashpuppy_: very cool.  thanks
[2012-09-18 00:32:08 -0400] joemiller: how can i detect if chef is running with `-l debug` ?
[2012-09-18 00:34:02 -0400] joemiller: ah found it. Chef::Log.level
[2012-09-18 00:53:37 -0400] hashpuppy_: ntp has the following in attributes/default.rb:   default['ntp']['servers']   = %w{ 0.pool.ntp.org 1.pool.ntp.org 2.pool.ntp.org 3.pool.ntp.org }
[2012-09-18 00:54:06 -0400] hashpuppy_: i added the following to my development.rb
[2012-09-18 00:54:09 -0400] hashpuppy_: default_attributes( "ntp" => { "servers" => ["0.north-america.pool.ntp.org", "1.north-america.pool.ntp.org"] })
[2012-09-18 00:54:15 -0400] hashpuppy_: but i see all 5 of them in ntp.conf
[2012-09-18 00:54:24 -0400] hashpuppy_: s/5/6
[2012-09-18 00:56:46 -0400] juliancdunn: hashpuppy_: yes, attributes at the same precedence level get merged
[2012-09-18 00:57:19 -0400] juliancdunn: if you want to override, use either normal_attributes or override_attributes in your environment
[2012-09-18 00:57:41 -0400] hashpuppy_: juliancdunn: thanks.  i thought cookbook default < environment default < role default < node default
[2012-09-18 00:58:10 -0400] juliancdunn: yeah, it's not 100% clear from the docs... I found this out the hard way
[2012-09-18 00:58:14 -0400] hashpuppy_: lol
[2012-09-18 00:58:24 -0400] hashpuppy_: ok
[2012-09-18 00:59:54 -0400] hashpuppy_: http://wiki.opscode.com/display/chef/Setting+Attributes+%28Examples%29
[2012-09-18 01:00:21 -0400] hashpuppy_: says default attributes applied in an attributes file has lower precedence than default attributes applied in an environment
[2012-09-18 01:00:25 -0400] hashpuppy_: should i file a bug?
[2012-09-18 01:00:37 -0400] hashpuppy_: that either the docs or wrong or the behavior is wrong
[2012-09-18 01:03:26 -0400] juliancdunn: probably then
[2012-09-18 01:03:31 -0400] juliancdunn: I didn't think it was that explicit
[2012-09-18 03:06:26 -0400] a|i: just upgraded to chef 10.14.2, and getting this error after running chef-client:
[2012-09-18 03:06:41 -0400] a|i: ArgumentError: Attribute platform_family is not defined!
[2012-09-18 03:06:54 -0400] a|i: \/var/chef/cache/cookbooks/git/attributes/default.rb:20:in `from_file'
[2012-09-18 03:07:11 -0400] a|i: I have the latest chef and ohai
[2012-09-18 03:07:25 -0400] a|i: where is the platform_family attribute defined?
[2012-09-18 03:19:17 -0400] miah: platform_family is provided by ohai
[2012-09-18 03:22:03 -0400] zts: a|i: what does "ohai platform_family" return?
[2012-09-18 03:22:52 -0400] a|i: zts: /usr/lib/ruby/gems/1.8/gems/ohai-0.6.4/lib/ohai/system.rb:221:in `attributes_print': I cannot find an attribute named platform_family!
[2012-09-18 03:23:21 -0400] a|i: zts: I had to manually add the attribute to the chef node.
[2012-09-18 03:23:26 -0400] a|i: not ideal.
[2012-09-18 03:23:47 -0400] zts: that is definitely not the latest ohai
[2012-09-18 03:24:21 -0400] zts: I've just checked a machine I have with 0.10.10 (via omnibus), and it shipped with ohai 0.6.12
[2012-09-18 03:24:38 -0400] zts: I can't remember when platform_family was added, but I suspect it was after 0.6.4
[2012-09-18 03:25:13 -0400] a|i: gem list ohai ohai (0.6.4)
[2012-09-18 03:25:39 -0400] a|i: thought installing latest version of chef installs the right version of ohai.
[2012-09-18 03:25:43 -0400] a|i: no dependency?
[2012-09-18 03:26:41 -0400] zts: good question, I don't install from gems so I'm not sure - perhaps it has a dependency without a version constraint?
[2012-09-18 03:27:15 -0400] zts: the other thing is that the error you pasted came from a cookbook recipe, and that shouldn't have changed from upgrading chef
[2012-09-18 03:27:24 -0400] a|i: I don't either, but didnt want to launch a new instance simply because of uphgrading chef.
[2012-09-18 03:27:27 -0400] zts: did you also update the git cookbook before getting that error?
[2012-09-18 03:27:37 -0400] a|i: yes git cookbook is the latest.
[2012-09-18 03:28:00 -0400] a|i: I also updated the cookbook.
[2012-09-18 03:28:16 -0400] a|i: I got another error, upgraded chef..
[2012-09-18 03:28:23 -0400] a|i: and then this happened.
[2012-09-18 03:28:24 -0400] zts: ahh, understood
[2012-09-18 03:28:48 -0400] a|i: thanks ohai platform_family works now.
[2012-09-18 03:56:43 -0400] fleish: hi all, I'm having a problem with an apache virtualhost template file. basically I add some lines and I believe something in them gets parsed by ruby/chef and horks everything. what's especially odd is that I've added these same lines to another (albeit simplier) apache virtualhost template file with no such issues. I described it here to avoid pasting too much into the channel http://pastebin.com/qzkCKVPS
[2012-09-18 04:18:38 -0400] zts: fleish: I'd guess it's the "%>s" that it doesn't like, although a quick search suggests that it should only be a problem for opening tags (ie, <%)
[2012-09-18 04:19:00 -0400] zts: fleish: first suggestion would be to remove those characters from each line, and see if the template renders successfully
[2012-09-18 04:19:34 -0400] zts: fleish: if so, try using "%%>s" instead, and see if that does the right thing
[2012-09-18 04:19:38 -0400] fleish: zts: strange, b/c I see in the apache2 cookbook the apache2.conf.erb template has similar lines with the %>s
[2012-09-18 04:19:59 -0400] fleish: zts: and they appear to be rendered properly from that template
[2012-09-18 04:20:11 -0400] zts: fleish: sounds like that invalidates my theory :)
[2012-09-18 04:20:23 -0400] fleish: zts: also, I have another template where I add these same lines and it works just fine
[2012-09-18 04:20:30 -0400] zts: fleish: still, general suggestion is to narrow down your problem - which of the lines you've added introduces the problem?
[2012-09-18 04:20:35 -0400] hoover_damm: fleish, can you gist the whole template that's failing?
[2012-09-18 04:20:59 -0400] hoover_damm: fleish, line 4-10 makes me feel like i'm missing something
[2012-09-18 04:21:21 -0400] fleish: zts: yeah, was moving towards that when I went into the apache2.conf to see if I was overlapping with something
[2012-09-18 04:21:59 -0400] fleish: hoover_damm: you mean you want to see the diff of the working & broken file?
[2012-09-18 04:22:16 -0400] hoover_damm: fleish, no just the erb template in question
[2012-09-18 04:24:47 -0400] fleish: hoover_damm: here's the diff. I'll need to scrub the rest of the file if you want to see it http://pastebin.com/XJkZy2yi
[2012-09-18 04:26:44 -0400] fleish: and here is another similar template that has the lines in it and renders properly: http://pastebin.com/EKysnMdJ
[2012-09-18 04:26:48 -0400] hoover_damm: strange, well to escape an erb code it's <%%
[2012-09-18 04:26:58 -0400] hoover_damm: ending with a %>
[2012-09-18 04:28:51 -0400] fleish: yes, but then wouldn't this in the apache cookbook have a similar problem (not to mention the same lines I am using in another template with no issue)? LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
[2012-09-18 04:29:28 -0400] hoover_damm: those shouldn't be activating on erb
[2012-09-18 04:29:32 -0400] hoover_damm: those are %{ not <%
[2012-09-18 04:30:40 -0400] fleish: I agree they shouldn't be activating, but based on the error output it seems something is amiss - not sure if erb is to blame or not - but it fails to parse lines below
[2012-09-18 04:31:25 -0400] fleish: (erubis):116: syntax error, unexpected tCONSTANT, expecting ')'
[2012-09-18 04:31:30 -0400] hoover_damm: fleish, erb -x | ruby -c
[2012-09-18 04:31:38 -0400] hoover_damm: on your template should be able to produce a 'Syntax OK'
[2012-09-18 04:31:44 -0400] hoover_damm: fleish, feel free to hit erb -x and review it
[2012-09-18 04:32:26 -0400] hoover_damm: fleish, at leaast locally i can't see anythiing amiss
[2012-09-18 04:32:34 -0400] hoover_damm: fleish, maybe run erb -x on the server acting up?
[2012-09-18 04:33:56 -0400] fleish: hoover_damm: yeah, that gives me the same erubis error I get on the server when chef-client runs
[2012-09-18 04:39:09 -0400] BryanWB: ohai chefs!
[2012-09-18 04:39:28 -0400] ssd7: Heya!
[2012-09-18 04:39:31 -0400] hoover_damm: fleish, then erb -x and keep digging
[2012-09-18 04:39:49 -0400] hoover_damm: fleish, fwiw i use ruby 1.9 with erubis 2.7.0
[2012-09-18 04:42:58 -0400] fleish: hoover_damm: ok here's what I find. when I add it to the first virtualhost for port 80 all is well. when I try to add it to the second virtualhost below it in the file for port 443 it stops parsing correctly
[2012-09-18 04:43:44 -0400] hoover_damm: fleish, then lookup and find where your missing a closing _erbout.concat
[2012-09-18 04:43:58 -0400] hoover_damm: fleish, not terribly easy to debug but if you can't see it any other way heh
[2012-09-18 04:45:24 -0400] fleish: hoover_damm: I'm not very ruby savy. but does it make any logical sense that copy and pasting the same line from above would suddenly cause a syntax error below?
[2012-09-18 04:48:48 -0400] fleish: also the insertion of these lines *below* 116 are somehow causing a syntax error *up above* on line 116
[2012-09-18 04:51:06 -0400] fleish: ah I found it, the hippy before me has a syntax error in the file that is getting triggered by this
[2012-09-18 04:51:20 -0400] fleish:     ServerAlias <%= node.chef_environment >%-web.somewhere.com
[2012-09-18 04:51:48 -0400] fleish: so long as I put the lines anywhere *above* that it was fine
[2012-09-18 04:52:29 -0400] erikh: do you use an editor with syntax highlighting?
[2012-09-18 04:53:16 -0400] fleish: sometimes
[2012-09-18 04:53:20 -0400] fleish: not this time though :)
[2012-09-18 04:53:35 -0400] erikh: consider doing so next time :)
[2012-09-18 04:53:38 -0400] fleish: I prefer my vim's uncolored
[2012-09-18 04:57:53 -0400] fleish: thanks everyone
[2012-09-18 07:22:23 -0400] halkeye: I'm playing around with rvm_deploy and noticed it no longer seems to work because of the various converge_by in lib/chef/provider/deploy.rb. Is there a way to trigger the converge stuff?
[2012-09-18 08:29:28 -0400] zeroXten: hi all. Following the chef-server installation guide in http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo and it looks like gems_dir is nil causing an error in rubygems-install.rb:203
[2012-09-18 08:31:15 -0400] zeroXten: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.14.2/distro/redhat/etc/sysconfig/chef-solr does exist though, so I'm guessing that the node attributes are borked in some way
[2012-09-18 08:50:21 -0400] zeroXten: i've tried hacking it into chef.json and even solo.rb but nothing works ;(
[2012-09-18 09:07:44 -0400] alex88: hi guys
[2012-09-18 09:08:22 -0400] alex88: if i have to fire up n instances, and each instance need to get a different integer as a command argument, how would you do that?
[2012-09-18 09:09:53 -0400] alex88: because i have a generator that accepts a range of integer and to speed up process i want to run a vm with 1-10 as argument, another with 11-20 and so on
[2012-09-18 09:26:40 -0400] zeroXten: is it normally this quiet in here?
[2012-09-18 09:27:41 -0400] Mithrandir: tends to be more active later in the day.  Lots of folks here are US-based.
[2012-09-18 09:27:53 -0400] jchome: indeed. :)
[2012-09-18 09:30:39 -0400] zeroXten: yeah, figured as much.
[2012-09-18 09:30:59 -0400] zeroXten: right, time to start setting fire to stuff I think
[2012-09-18 09:31:16 -0400] zeroXten: and I'll start with what is supposed to be my chef server
[2012-09-18 09:34:07 -0400] gyre007: guys Im using apt recipe in my cookbook and I'm getting -> NameError: uninitialized constant Mixlib::ShellOut ... https://gist.github.com/3742249
[2012-09-18 09:34:23 -0400] gyre007: looks like it can't run apt-get finger
[2012-09-18 09:34:32 -0400] gyre007: I mean apt-key finger
[2012-09-18 09:34:39 -0400] gyre007: has anyone come across this ?
[2012-09-18 09:35:11 -0400] gyre007: this is the recipe Im using: https://gist.github.com/3742254
[2012-09-18 09:36:44 -0400] zts: gyre007: you'll need to update your chef install
[2012-09-18 09:37:26 -0400] zts: gyre007: the problem is that Mixlib::Shellout was introduced in a newer chef (I think it was 0.10.8, and you're on 0.10.6)
[2012-09-18 09:44:03 -0400] gyre007: zts, youre spot on zts!
[2012-09-18 09:44:18 -0400] gyre007: id like to upgrade it to 10.12 for the time being until we upgrade it to 10.14
[2012-09-18 09:44:31 -0400] gyre007: not really sure if I can upgrade gem to certain version...
[2012-09-18 09:48:34 -0400] zts: gyre007: I haven't done it, but this suggests it is possible: http://journal.bitshaker.com/articles/2007/10/20/install-old-versions-of-ruby-gems/
[2012-09-18 09:49:00 -0400] zts: gyre007: alternatively, you could amend the recipe - Mixlib::ShellOut was Chef::ShellOut in some earlier versions of Chef
[2012-09-18 09:49:30 -0400] zts: gyre007: that might work for you, but upgrading it to 10.12 would definitely be the better option
[2012-09-18 09:49:31 -0400] gyre007: zts, cheers, but I want to upgrade chef gems anyway....i wanted to do it at some point...
[2012-09-18 09:49:44 -0400] zts: Cool :)  this is a good excuse then
[2012-09-18 10:03:49 -0400] zeroXten: anyone have any suggestions for my problem above? Just simply trying to install chef-server bootstrapped via chef omnibus
[2012-09-18 10:29:17 -0400] gyre007: strange...I use a specific gem binary https://gist.github.com/3742491 to install some gems into embedded ruby...yet chef seems to be ignoring them and installing them into system rubies...i am using rvm though that might be messing stuff up too
[2012-09-18 11:39:30 -0400] krisk: hi there. Is there a way to specify the order of cookbooks in a role? the rvm recipe fails if the users recipe doesn't run before it..
[2012-09-18 12:29:12 -0400] zeroXten: hmm, i'll try this a different way. What is the best way of installing chef-server on centos6?
[2012-09-18 12:30:03 -0400] Mithrandir: I'd use the omnibus installer
[2012-09-18 12:31:33 -0400] zeroXten: right, then when i get an error?
[2012-09-18 12:36:09 -0400] rgsteele: So, right now, it looks like the cron resource does not support time zones - is there a plan to add that support, and if not, are patches accepted?  I suppose people are just exporting TZ in the 'command' as a workaround currently?
[2012-09-18 13:45:57 -0400] gyre007: whats the safest way to upgrade chef-server ? and all other chef packages that come with it .?
[2012-09-18 13:47:48 -0400] Death_Syn: guh
[2012-09-18 13:48:20 -0400] Death_Syn: Getting Error 500: no such file to load -- chef/monkey_patches/moneta when I try to upload a cookbook to my just upgraded chef-server (10.12.0 -> 10.14.2)
[2012-09-18 13:49:23 -0400] mdeboard: Can anyone help me sort out the inconsistency here? https://gist.github.com/7a57a477158aa5c17928 Why does my `knife ssh` query return no results but a `knife search node` query for the same term yields results?
[2012-09-18 13:50:39 -0400] gyre007: mdeboard, what does knife search node "name:cl.knife.test1" return ?
[2012-09-18 13:51:31 -0400] mdeboard: gyre007: Lines 4-12
[2012-09-18 13:51:49 -0400] geekbri: additionally, does knife ssh "role:webserver" "sudo ohai" do
[2012-09-18 13:51:53 -0400] geekbri: err
[2012-09-18 13:51:56 -0400] geekbri: s/do/work
[2012-09-18 13:52:04 -0400] geekbri: not sure how I typoed work as do....
[2012-09-18 13:52:21 -0400] mdeboard: no
[2012-09-18 13:52:22 -0400] mdeboard: it says no results
[2012-09-18 13:53:04 -0400] gyre007: im wondering whether I can SCP files via knife
[2012-09-18 13:53:12 -0400] _rc: it looks like it hasn't run yet, you just did a node create
[2012-09-18 13:53:12 -0400] geekbri: is this hosted chef, or did you setup your own chef server/
[2012-09-18 13:53:14 -0400] gyre007: if it can ssh it should be capable of scp
[2012-09-18 13:53:33 -0400] mdeboard: geekbri: Well, see, how can I tell? :P
[2012-09-18 13:53:43 -0400] mdeboard: _rc: I suppose, how do I make it go
[2012-09-18 13:53:46 -0400] mdeboard: :)
[2012-09-18 13:54:04 -0400] geekbri: mdeboard: well did you setup chef server yourself or did you setup an account with opscode for them to host one for you :)
[2012-09-18 13:54:18 -0400] _rc: mdeboard: knife bootstrap usually
[2012-09-18 13:54:31 -0400] geekbri: mdeboard: did perhaps your initial chef run fail?
[2012-09-18 13:54:47 -0400] mdeboard: geekbri: Yeah it did fail, it said that a cookbook "webserver" couldn't be found :|
[2012-09-18 13:56:28 -0400] mdeboard: geekbri: I'm using knife from my workstation, and yeah I did create an account with opscode but I was under the impression that was required regardless
[2012-09-18 13:56:53 -0400] _rc: mdeboard: so fix the first problem first; upload the roles/cookbooks you refer to
[2012-09-18 13:57:06 -0400] mdeboard: Now I just ran bootstrap, the node metadata output from 'knife search' is still empty 9except for name & environment)
[2012-09-18 13:57:18 -0400] mdeboard: How do I upload roles?
[2012-09-18 13:57:25 -0400] Death_Syn: oh bugger, i did an aptitude full-upgrade, and aptitude happily removed all the packages taht chef-server and friends depended on (moneta and such)
[2012-09-18 13:57:31 -0400] mdeboard: i don't see a knife role upload like for cookbooks
[2012-09-18 13:57:31 -0400] geekbri: mdeboard:  knife role from file <some role file>
[2012-09-18 13:57:44 -0400] mdeboard: Oh, I did do that already
[2012-09-18 13:58:07 -0400] _rc: then why did it say that it couldn't find a cookbook?
[2012-09-18 13:58:20 -0400] mdeboard: I have no idea, why would it call a role a cookbook?
[2012-09-18 13:58:43 -0400] yfeldblum: gyre007, you can scp files without knife already ^-^
[2012-09-18 13:58:58 -0400] geekbri: mdeboard: knife cookbook upload webserver
[2012-09-18 13:59:02 -0400] _rc: mdeboard: I'm just going on what you said happened
[2012-09-18 13:59:09 -0400] mdeboard: geekbri: Are roles cookbooks?
[2012-09-18 13:59:14 -0400] geekbri: mdeboard: different things.
[2012-09-18 13:59:24 -0400] mdeboard: I'm so confused.
[2012-09-18 13:59:40 -0400] geekbri: mdeboard: v
[2012-09-18 13:59:41 -0400] _rc: cookbooks are collections of recipes other things, but not roles
[2012-09-18 13:59:42 -0400] gyre007: gyre007, in parallel to 20 hosts ? And not via Chef ? :)
[2012-09-18 13:59:43 -0400] geekbri: mdeboard: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-09-18 13:59:46 -0400] gyre007: darn
[2012-09-18 13:59:53 -0400] gyre007: that was supposed to go to yfeldblum  :)
[2012-09-18 14:00:46 -0400] geekbri: mdeboard: roles contain a list of things to run, like other roles or cookbook recipes
[2012-09-18 14:01:11 -0400] geekbri: mdeboard: a cookbook is a set of instructions that does something when it is called (hopefully based upon attributes you set in the role and the cookbooks default attributes)
[2012-09-18 14:01:48 -0400] _rc: mdeboard: you may want to stop and absorb some docs. http://wiki.opscode.com/display/chef/Core+Components seems apt
[2012-09-18 14:01:51 -0400] geekbri: mdeboard: so you could create a "webserver" role that knows to run the nginx::install recipe and the code::deploy recipe
[2012-09-18 14:02:09 -0400] geekbri: mdeboard: that would mean that your server would need the "nginx" and "code" cookbooks
[2012-09-18 14:04:51 -0400] gyre007: yfeldblum, I like the search ability of knnife in combination with scp...tahtd be awesome
[2012-09-18 14:07:25 -0400] mdeboard: Ok let me try this again, I think last time I ran `knife ec2` I used the -r flag
[2012-09-18 14:07:44 -0400] mdeboard: `-r webserver` thinking that a run_list is a role
[2012-09-18 14:18:27 -0400] Death_Syn: augh, ican't install chef from packages now
[2012-09-18 14:18:38 -0400] Death_Syn: (ubuntu precise)
[2012-09-18 14:21:57 -0400] Death_Syn: ahh, the version flipped out, i had .ubuntu.11.04
[2012-09-18 14:22:05 -0400] Death_Syn: is now just 10.14.2-1
[2012-09-18 14:31:51 -0400] geekbri: mdeboard: a run_list can contain roles
[2012-09-18 14:40:19 -0400] jasond: should I expect a ruby_block to occasionally execute several times during a run?
[2012-09-18 14:44:17 -0400] _dumfrie-: jasond no, unless you are triggering it to run in other locations.
[2012-09-18 14:54:08 -0400] mdeboard: I guess knife ec2 0.5.14 doesn't respect the "-N" flag?
[2012-09-18 14:54:29 -0400] mdeboard: I set a name but it still set the node name equal to the FQDN (Private DNS of ec2 instance)
[2012-09-18 14:56:16 -0400] mdeboard: Actually it doesn't seem to respect quite a few command line flags
[2012-09-18 15:10:50 -0400] pwelch: has anyone run into the issue of getting an "Illegal Instruction" during a chef-run on AWS?
[2012-09-18 15:18:10 -0400] ssd7: pwelch: I've seen one other case of this but haven't nailed it down yet.  What OS, arch, ruby verison are you running?
[2012-09-18 15:21:04 -0400] pwelch: ssd7: ubuntu 10.04, ami-ac07f2c5 which is 64bit, ruby version REE, and currently running it in AWS us-east-1
[2012-09-18 15:21:33 -0400] pwelch: I got it last week a couple times and chalked it up to a possible bad instance.
[2012-09-18 15:21:42 -0400] pwelch: just got it again this morning building a new one
[2012-09-18 15:21:59 -0400] pwelch: but I have built a few in the same region over the past week without an issue
[2012-09-18 15:22:41 -0400] ssd7: Is this Chef 10.14?
[2012-09-18 15:23:34 -0400] pwelch: yes. Chef 10.14.2
[2012-09-18 15:28:12 -0400] martinisoft: curious about the runit cookbook, I'm on Ubuntu 12.04, seems the cookbook was only meant to run 9.04 and earlier?
[2012-09-18 15:30:11 -0400] makuk66: martinisoft: we're running the runit cookbook in 12.04. Appears to work
[2012-09-18 15:30:20 -0400] KarlHungus: platform conditional metadata depends, do they exist?
[2012-09-18 15:30:59 -0400] _rc: KarlHungus: don't appear to, no
[2012-09-18 15:31:28 -0400] martinisoft: makuk66: ill gist the error
[2012-09-18 15:31:36 -0400] martinisoft: tried to converge one of my ec2 instances and it blew up
[2012-09-18 15:32:30 -0400] martinisoft: https://gist.github.com/ebbbdd9f075b8f702040
[2012-09-18 15:33:07 -0400] martinisoft: running Chef 10.14.2 right now
[2012-09-18 15:34:50 -0400] _rc: martinisoft: are your apt indexes up to date, as that's just a 'no package called runit' error
[2012-09-18 15:35:16 -0400] martinisoft: they should be, I've got the apt cookbook in my runlist
[2012-09-18 15:35:30 -0400] martinisoft: maybe if I make it earlier in the run list it'll execute an update
[2012-09-18 15:47:22 -0400] Pushnell: is it sane/normal/socially acceptable to use a library in an attributes file?
[2012-09-18 15:49:05 -0400] yfeldblum: Pushnell, it may work technically but the attributes files are really for the orthogonal simple defaults (and yes you can set default-level attributes in a recipe too)
[2012-09-18 15:50:49 -0400] Pushnell: yfeldblum: ok, thanks.  I'm probably using chef in ways unintended but which will nonetheless work well for us.
[2012-09-18 15:51:44 -0400] Pushnell: essentially, instead of using a defaults.rb attributes file, I'm trying to use a databag item as the default attributes
[2012-09-18 15:51:54 -0400] yfeldblum: Pushnell, *kaboom!*
[2012-09-18 15:52:05 -0400] yfeldblum: Pushnell, bad idea: that's what recipes are for
[2012-09-18 15:52:34 -0400] Pushnell: yfeldblum: I know.  that's why my recipes are doing the manual lifting of importing the databag and applying it.
[2012-09-18 15:52:42 -0400] yfeldblum: Pushnell, cool
[2012-09-18 15:54:29 -0400] Pushnell: yfeldblum: I'm trying very hard to separate the config data from the code, as our deploy tools here should have access to change all of the config but none of the deploy code.
[2012-09-18 15:54:57 -0400] yfeldblum: Pushnell, good
[2012-09-18 15:55:23 -0400] Pushnell: yfeldblum: I thought so :)  But chef doesn't have the same point of view.  Data and code both go into recipes.
[2012-09-18 15:55:47 -0400] Pushnell: (at the default level)
[2012-09-18 15:56:13 -0400] yfeldblum: Pushnell, computed default node data may go into recipes, but static default node data may go into cookbook attributes
[2012-09-18 15:56:43 -0400] Pushnell: yfeldblum: but what if I want static default node data to come from databags?
[2012-09-18 15:57:11 -0400] yfeldblum: Pushnell, why are you copying data from A into B, when you could just use it directly from A?
[2012-09-18 15:57:22 -0400] yfeldblum: Pushnell, A is the data-bag item, B is the node data
[2012-09-18 15:58:29 -0400] gyre007: anyone here uses mongo community cookbook ? we are and just found out that it keeps restarting mongo every time chef-client runs...
[2012-09-18 15:58:31 -0400] gyre007: arrgh..
[2012-09-18 15:58:56 -0400] wamcvey: I'm having issues with attributes. I in my base role, I set: a 'default_attributes()' for ["users"]["active_groups"] to a list of group names. In a specific role which gets applied to a particular host (and which has the base role in the runlist), I have an override_attributes() definition which sets ["users"]["active_groups"] to a different list.
[2012-09-18 15:59:32 -0400] wamcvey: When I run shef -z on the node with the specific role, and check on node['users']['active_groups'] it comes back nil
[2012-09-18 16:00:43 -0400] gyre007: needless to say the restart forces master to change to slave...
[2012-09-18 16:00:53 -0400] gyre007: and some other node becomes master...
[2012-09-18 16:02:49 -0400] Pushnell: yfeldblum: I want to have all config in databags, both default and overrides, because this lets us write tools around json data.  The recipes don't care where the data came from, it's looking at node attributes so that we can override things for just a specific node, eg for testing different config.
[2012-09-18 16:03:47 -0400] Pushnell: yfeldblum: feel free to tell me I'm crazy and doing it wrong :)  I'm still fairly new to chef but was surprised that databags can't directly be used for default attributes.  Perhaps I'm conceiving things differently.
[2012-09-18 16:05:59 -0400] rocket: Pushnell: you could do something similar with roles or environments .. eg use json data
[2012-09-18 16:08:37 -0400] yfeldblum: gyre007, why is that a problem?
[2012-09-18 16:09:56 -0400] yfeldblum: Pushnell, roles are data (json) that you can use to prepopulate nodes data; data-bags are *just* a set of tables that have no relation whatsoever to nodes data
[2012-09-18 16:10:10 -0400] Pushnell: rocket: I had considered environments but we need to be compatible with chef-solo for doing dev in vagrant.  I hadn't seriously considered using role attributes  I'll have to give that some thought.
[2012-09-18 16:11:14 -0400] rocket: Pushnell: I have a chef-server I start via vagrant .. with a set of scripts I call to repopulate that vagrant chef server in case I accidentally blow it away...
[2012-09-18 16:11:28 -0400] rocket: Pushnell: eg I never configure it via the webui .. just a set of scripts
[2012-09-18 16:12:12 -0400] rocket: that way I have the full power of chef and I can scale to a production system in the future etc
[2012-09-18 16:12:19 -0400] gyre007: yfeldblum, well whilst the mongo master moves to another node, we are getting connection exceptions ...
[2012-09-18 16:12:21 -0400] Pushnell: rocket: so you're doing multi-vm vagrant?
[2012-09-18 16:12:27 -0400] wamcvey: So... 'shef -z' should load a host's roles and set the 'node' according to the attribute deep merge algorithm, right?
[2012-09-18 16:12:43 -0400] rocket: in this case I just do a separate vagrant instance .. eg I have a separate folder I just startup first
[2012-09-18 16:12:46 -0400] yfeldblum: gyre007, so ... what driver?
[2012-09-18 16:12:49 -0400] gyre007: yfeldblum, because you're connecting to master...then master switches and your connection should switch too...thats a problem....
[2012-09-18 16:14:31 -0400] gyre007: yfeldblum, i think there is only one for rails...
[2012-09-18 16:14:41 -0400] Pushnell: yfeldblum: thanks for letting me bounce all of this off you, btw
[2012-09-18 16:14:59 -0400] gyre007: yfeldblum, whats wors i cant figure out why is it restarting the service when it shouldnt mmm
[2012-09-18 16:15:08 -0400] yfeldblum: gyre007, yes, the ruby driver is a little fail
[2012-09-18 16:15:14 -0400] gyre007: :)
[2012-09-18 16:19:45 -0400] wamcvey: shef not showing attributes overridden in roles: https://gist.github.com/3744047  (the problem isn't just shef... shef is just the easiest way to demonstrate the issue)
[2012-09-18 16:19:57 -0400] darrenhasgerms: Hi all i'm a little new to setting up chef-server and have run in to a headache I have the webui up but the default credentials are not working admin|p@ssw0rd1 and admin|prawns are what i found on google
[2012-09-18 16:20:00 -0400] darrenhasgerms: to no avail.
[2012-09-18 16:20:21 -0400] darrenhasgerms: Anyone know the location of the ::config I can modify to *set* the default?
[2012-09-18 16:20:37 -0400] rocket: darrenhasgerms: what did you use to setup the server?
[2012-09-18 16:20:38 -0400] darrenhasgerms: additional note: i have not logged in successfully yet, so i dont think i can modify couch i dont think
[2012-09-18 16:20:51 -0400] darrenhasgerms: i was installing it manually
[2012-09-18 16:20:55 -0400] darrenhasgerms: package by package
[2012-09-18 16:21:04 -0400] darrenhasgerms: if that's what you mean
[2012-09-18 16:21:13 -0400] darrenhasgerms: ahh directions
[2012-09-18 16:21:14 -0400] darrenhasgerms: sec
[2012-09-18 16:21:15 -0400] darrenhasgerms: derp
[2012-09-18 16:21:24 -0400] yfeldblum: gyre007, the ideal is to write apps which are tolerant to mongo shifting primaries in a replset
[2012-09-18 16:21:24 -0400] darrenhasgerms: http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually
[2012-09-18 16:21:44 -0400] darrenhasgerms: its all up and going.. i just can't get logged in.
[2012-09-18 16:22:25 -0400] rocket: did you update /etc/chef/server.rb?
[2012-09-18 16:22:36 -0400] rocket: web_ui_default_password is set in there
[2012-09-18 16:22:50 -0400] darrenhasgerms: SHOOT that was the file i forgot about
[2012-09-18 16:22:53 -0400] darrenhasgerms: GAH
[2012-09-18 16:22:54 -0400] darrenhasgerms: ty
[2012-09-18 16:22:56 -0400] rocket: eg it might be defaulted to "somerandompasswordhere"
[2012-09-18 16:23:08 -0400] darrenhasgerms: dangit i knew it was something minor
[2012-09-18 16:23:13 -0400] darrenhasgerms: ty rocket
[2012-09-18 16:26:15 -0400] yfeldblum: gyre007, or setting up some mongoconfig and mongos servers too :P
[2012-09-18 16:33:07 -0400] darrenhasgerms: ugh, thanks again for the help. sorry for the newb ?
[2012-09-18 16:52:12 -0400] gyre007: yfeldblum, but we are not living in ideal world :)
[2012-09-18 16:56:39 -0400] mikeg: is it possible to edit a nodes run list in a recipe?  I want a server build to run, and at the end of the run change the run_list so that it's different on subsequent chef-client runs
[2012-09-18 16:58:29 -0400] mikeg: forget it.  changed my mind.  came up with a better idea
[2012-09-18 17:06:45 -0400] jblaine: Save me a bunch of time now that we're doing legit chef infra planning? I need to provide location-based attributes (say, for preferred LDAP server to contact). The run-list for any host in any location should be the same as any other. Store the attributes with a) environments b) roles c) other?
[2012-09-18 17:07:27 -0400] jblaine: Also, are there any Chef Patterns resources to read?
[2012-09-18 17:09:13 -0400] jblaine: Addendum: "for the sake of this question right now" --  re: "The run-list for any host ... same as any other..."
[2012-09-18 17:21:08 -0400] rocket: jblaine: I would use environments for setting params that are global to all nodes
[2012-09-18 17:21:25 -0400] rocket: jblaine: then use roles as a way to override specific items
[2012-09-18 17:40:37 -0400] Loof: Does chef support git deployments on windows yet?
[2012-09-18 17:44:46 -0400] jhayden: anyone know how to set the version number of a cookbook?
[2012-09-18 17:45:06 -0400] jhayden: I have a cookbook that knife uploads as version 0.0.0
[2012-09-18 17:45:31 -0400] jhayden: but I have version = 0.12.0 in metadata.rb and metatdata,json
[2012-09-18 17:45:40 -0400] jhayden: am I missing something?
[2012-09-18 17:49:29 -0400] juliancdunn: jhayden: literally "version = 0.12.0" ?
[2012-09-18 17:49:42 -0400] juliancdunn: or version "0.2.10"
[2012-09-18 17:50:00 -0400] jhayden: metadata.rb    version = "0.12.0"
[2012-09-18 17:50:05 -0400] juliancdunn: no equals sign
[2012-09-18 17:50:12 -0400] jhayden: json     "version": "0.12.0"
[2012-09-18 17:50:19 -0400] juliancdunn: i mean, don't put an equals sign in metadata.rb
[2012-09-18 17:50:37 -0400] rocket: metadata.rb   version     "0.0.1"
[2012-09-18 17:50:39 -0400] jhayden: ok, I'll give that a shot
[2012-09-18 17:50:41 -0400] jhayden: thx
[2012-09-18 17:50:42 -0400] rocket: is what I have
[2012-09-18 17:50:56 -0400] rocket: I just update the metadata.rb file
[2012-09-18 17:51:28 -0400] jhayden: that did it!
[2012-09-18 17:52:05 -0400] juliancdunn: jhayden: the json file is autogenerated for you
[2012-09-18 17:52:06 -0400] jhayden: Thanks, couldn't find it documented but then again who reads docs  ;-)
[2012-09-18 17:52:19 -0400] juliancdunn: "It's a good practice to always edit metadata.rb but not the JSON file"
[2012-09-18 17:52:24 -0400] juliancdunn: http://wiki.opscode.com/display/chef/Metadata
[2012-09-18 17:52:28 -0400] stuartrexking: I am seeing the pg gem install error on embedded (not omnibus). It's the same error reported here http://tickets.opscode.com/browse/COOK-1406
[2012-09-18 17:54:05 -0400] stuartrexking: When I add a recipe that includes database::postgresql (which itself includes postgresql::ruby which does the pg gem compilation and install) I get the error
[2012-09-18 17:54:55 -0400] stuartrexking: I am bootstrapping an ubuntu instance on AWS.
[2012-09-18 17:55:17 -0400] stuartrexking: Very frustrating, as this works on a Vagrant VM (non omnibus)
[2012-09-18 17:59:22 -0400] ptrstr: jblaine: we use environments for location based attributes
[2012-09-18 18:00:22 -0400] ptrstr: jblaine: but you can also use data bags or rely on searchwe use all 3
[2012-09-18 18:05:37 -0400] jblaine: thanks ptrstr and rocket
[2012-09-18 18:05:55 -0400] stuartrexking: Is it possible that database::postgresql installs pg gem during compile phase, but postgresql is only installed during convergence and the pg gem depends on postgresql being installed.
[2012-09-18 18:06:47 -0400] jblaine: PS: "API client" vs. chef-client vs. "Chef client aka a node" = so unnecessarily confusing due to poor naming legacy :)
[2012-09-18 18:07:50 -0400] jblaine: no less than 4549435393945439 words spent explaining the differences in the wiki :)
[2012-09-18 18:08:56 -0400] Jay_Levitt: stuartrexking: I have been wondering if COOK-1406 was resolved by changes in the cookbooks (now at v0.3.0) and in chef (now at 10.14).  I guess you found the answer
[2012-09-18 18:09:16 -0400] Jay_Levitt: jtimberman might know more about what else needs to happen for it to get fixed
[2012-09-18 18:09:31 -0400] Jay_Levitt: stuartrexking: oh, sorry, you said not omnibus
[2012-09-18 18:09:43 -0400] yfeldblum: ptrstr, using envs for region-based or dc-based data seems like a good approach
[2012-09-18 18:10:22 -0400] Jay_Levitt: stuartrexking: wait, did you mean "embedded, NOW omnibus"?  I don't know of an embedded install other than the omnibus...
[2012-09-18 18:10:32 -0400] yfeldblum: ptrstr, e.g. on aws you might have an env named "us-west-1" and another named "asia-pacific-1"
[2012-09-18 18:13:20 -0400] stuartrexking: Jay_Levitt: Not omnibus
[2012-09-18 18:13:32 -0400] stuartrexking: Chef that is installed as part of knife bootstrap
[2012-09-18 18:14:10 -0400] Jay_Levitt: stuartrexking: what method are you using, then? knife bootstrap will default to omnibus unless you specify gems or apt
[2012-09-18 18:14:32 -0400] stuartrexking: Jay_Levitt: Oh, I didn't realise that.
[2012-09-18 18:14:43 -0400] stuartrexking: Jay_Levitt: here is the full debug log https://gist.github.com/a355e42a5d5bedbc494c
[2012-09-18 18:14:50 -0400] Jay_Levitt: stuartrexking: Yeah, I think it changed in 10.10 or 10.12.  So yes, you're using omnibus and hitting exactly that error
[2012-09-18 18:15:06 -0400] Jay_Levitt: The only workaround I could find was "yeah, don't use omnibus then"
[2012-09-18 18:15:19 -0400] Jay_Levitt: but I know jtimberman has been working on the chicken-and-egg problem that causes it.
[2012-09-18 18:15:28 -0400] Jay_Levitt: And if we say jtimberman enough his terminal will beep and he will swoop in and save us.
[2012-09-18 18:15:35 -0400] stuartrexking: Jay_Levitt: how do I tell knife bootstrap to not use omnibus?
[2012-09-18 18:15:52 -0400] stuartrexking: Jay_Levitt: My kingdom for a jtimberman
[2012-09-18 18:15:58 -0400] Jay_Levitt: knife bootstrap --distro ubuntu12.04-gems
[2012-09-18 18:16:14 -0400] Jay_Levitt: that'll install it into the gems of system ruby (which, mind you, is 1.8!)
[2012-09-18 18:16:55 -0400] stuartrexking: Ok. I don't *think that will be a problem. Let me try...
[2012-09-18 18:17:44 -0400] geekbri: you can use chef_gem to install gems for chefs ruby
[2012-09-18 18:18:17 -0400] geekbri: the gem resource installs to the system ruby
[2012-09-18 18:18:27 -0400] stuartrexking: Jay_Levitt: You mentioned apt. Is there an alternative to installing as a system gem?
[2012-09-18 18:18:44 -0400] Jay_Levitt: stuartrexking: there's also --distro ubuntu12.04-apt but I'm not sure exactly how it installs things
[2012-09-18 18:18:55 -0400] Jay_Levitt: You can peek into the chef gem to see what that template looks like
[2012-09-18 18:19:09 -0400] srleod: Anybody know off-hand how to increase log retention for the chef-client cookbook?
[2012-09-18 18:26:39 -0400] jblaine: If it is "recommended"[wiki] to delete the chef-validator private key from disk once a node is registered and has a client.pem, shouldn't 'knife bootstrap' do that?
[2012-09-18 18:27:04 -0400] jtimberman: Jay_Levitt: my terminal w/ irssi doesn't beep, as its running in tmux on a system in my basement :)
[2012-09-18 18:27:28 -0400] Jay_Levitt: jtimberman: Oh!  Interesting.  Hey, if a cable guy knocks on your door, let him in - he's just checking the wires.
[2012-09-18 18:27:56 -0400] Jay_Levitt: That loudspeaker he's carrying is for something else unrelated.
[2012-09-18 18:28:06 -0400] jtimberman: stuartrexking: if you really want to use omnibus with the pg gem, the way i got that to work was to compile postgresql libraries required and install under /opt/chef/embedded as the prefix
[2012-09-18 18:28:21 -0400] jtimberman: Jay_Levitt: heh... i have dsl tho :)
[2012-09-18 18:28:25 -0400] jtimberman: cable guy would be very suspicious
[2012-09-18 18:28:27 -0400] rocket: assuming I queue a bunch of process restarts to not happen immediately .. how can I have them then run at a point I choose later in my recipe
[2012-09-18 18:28:41 -0400] rocket: eg I dont want the restart to happen at the very end of the recipe ...
[2012-09-18 18:29:25 -0400] Jay_Levitt: Oh, we've, uh, upgraded you :)    So I saw you did the major refactoring of the cookbooks; and I think some other work was gated on 10.14 release; what else needs to happen for omnibus + pg to start working again seamlessly?
[2012-09-18 18:29:44 -0400] stuartrexking: jtimberman: Is there a recipe to do that?
[2012-09-18 18:30:19 -0400] stuartrexking: Jay_Levitt: I tip my hat at you. Thankyou.
[2012-09-18 18:31:11 -0400] rocket: also is there a way to preserve ordering inside attributes?  eg I was trying to a nested hash and its coming out in a different order than I have defined
[2012-09-18 18:39:44 -0400] jblaine: . o O ( s/API client/API consumer/g )
[2012-09-18 18:40:47 -0400] jblaine: . o O ( s/chef client/Node/g )
[2012-09-18 18:44:36 -0400] candybar: fubuntu 12.04 trying to install chef-server with chef-solo https://gist.github.com/3744952
[2012-09-18 18:49:04 -0400] jtimberman: stuartrexking: no
[2012-09-18 18:49:15 -0400] waerloga: anyone else run into problems trying to install/upgrade chef on debian from the opscode repo today?
[2012-09-18 18:49:16 -0400] jtimberman: at leats, not written by me :)
[2012-09-18 18:51:01 -0400] waerloga: https://gist.github.com/3745026
[2012-09-18 18:53:54 -0400] waerloga: http://tickets.opscode.com/browse/CHEF-3298 is a related bug it seems
[2012-09-18 18:56:25 -0400] stuartrexking: Jay_Levitt: I am seeing a different error now. It's related to the application cookbook. It's an ArgumentError I have not seen before. I have had this working, so I suspect it's to do with the using of the chef gem / system ruby. https://gist.github.com/5aeb3a0f7df11f95f93c
[2012-09-18 18:57:52 -0400] stuartrexking: Also, it's strange in the logs. It's reported that chef-10.12.0 was installed, then the chef declaration starts with *** Chef 10.14.2 ***
[2012-09-18 18:59:25 -0400] rocket: has anyone used sortable_mash before?
[2012-09-18 19:01:52 -0400] rocket: jtimberman: ping
[2012-09-18 19:04:31 -0400] mdeboard: If I want to use the apache2 cookbook, I know that in my role definition I can provide overrides for like node['apache2'][':user']; how do I override templates? Do I need to fork the apache2 cookbook repo or is there a way in a role to do this
[2012-09-18 19:04:34 -0400] matschaffer: is it a fools errand to try to bootstrap over zlogin, or should I just set up ssh
[2012-09-18 19:05:11 -0400] matschaffer: I guess that's not really an either/or
[2012-09-18 19:05:51 -0400] yfeldblum: sortable_mash?
[2012-09-18 19:06:51 -0400] rocket: yfeldblum: its a cookbook I found to order mash files based on their input..
[2012-09-18 19:07:21 -0400] rocket: I have a problem where I am defining a mash/hash and I want to use the order of the hash to define the order the components are installed
[2012-09-18 19:07:31 -0400] rocket: yfeldblum: due to depenancy requirements
[2012-09-18 19:07:50 -0400] _rc: mdeboard: depends on the cookbooks use of templates; the template resource has a cookbook parameter, but that may not be exposed in the cookbook you're interested in
[2012-09-18 19:07:52 -0400] rocket: yfeldblum: unfortunately ruby 1.8 is not maintaining the ordering for me
[2012-09-18 19:08:11 -0400] mdeboard: _rc: Ok, so what specifically do I need to look at? Which file?
[2012-09-18 19:09:01 -0400] rocket: yfeldblum: eg I am trying to maintain this order
[2012-09-18 19:09:05 -0400] rocket: default['RM']['server']['csa_zenpacks'] = {
[2012-09-18 19:09:05 -0400] rocket:     "http://192.168.87.1:8080/packs/" => {
[2012-09-18 19:09:05 -0400] rocket:         "ZenPacks.zenoss.AdvancedSearch" => "1.1.0",
[2012-09-18 19:09:06 -0400] rocket:         "ZenPacks.zenoss.ApacheMonitor" => "2.1.3",
[2012-09-18 19:09:07 -0400] _rc: mdeboard: whichever recipe that's currently managing the template resource with the template you're interested in monkeying with
[2012-09-18 19:09:24 -0400] _rc: rocket: then don't use a hash
[2012-09-18 19:09:27 -0400] mdeboard: Damn that's a lot of jargon
[2012-09-18 19:09:53 -0400] rocket: _rc how should I do it instead .. sorry I am not as fluent in ruby as I would like
[2012-09-18 19:10:09 -0400] mdeboard: How do i tell what recipe is currently managing the template resource with the template I'm interested in monkeying with?
[2012-09-18 19:10:13 -0400] _rc: mdeboard: I'm giving the general-purpose answer, because you haven't given specifics
[2012-09-18 19:10:28 -0400] _rc: mdeboard: by examning the code in the cookbook
[2012-09-18 19:10:43 -0400] mdeboard: What kind of specifics do I even need to give?
[2012-09-18 19:10:47 -0400] _rc: rocket: make it an array of hashes
[2012-09-18 19:10:53 -0400] mdeboard: I swear I've read the relevant docs.
[2012-09-18 19:10:56 -0400] stuartrexking: Is there a way to upgrade the system ruby before installing chef using knife bootstrap with an AWS instance?
[2012-09-18 19:11:05 -0400] _rc: mdeboard: did you read the cookbook?
[2012-09-18 19:11:30 -0400] mdeboard: _rc: Sure, all the default.rbs and the *.erb file I want to overwrite, but ...
[2012-09-18 19:11:48 -0400] mdeboard: I mean that's a lot of information intake, seeking some specificity myself.
[2012-09-18 19:12:01 -0400] _rc: mdeboard: so you saw the template resource that makes use of the .erb you want to mess with?
[2012-09-18 19:12:53 -0400] mdeboard: _rc: Yeah, I think so, but everything's parameterized so it's hard to be certain. https://gist.github.com/0774e19115fae388637b
[2012-09-18 19:13:32 -0400] _rc: mdeboard: so that doesn't have a cookbook parameter, does it
[2012-09-18 19:14:44 -0400] mdeboard: This is it actually, I believe https://gist.github.com/3a3c3df32ac140377472
[2012-09-18 19:15:00 -0400] mdeboard: The only match ack-grep turned up for apache2.conf.erb
[2012-09-18 19:15:13 -0400] _rc: which also, doesn't have a cookbook parameter
[2012-09-18 19:15:55 -0400] mdeboard: What does that tell me?
[2012-09-18 19:16:40 -0400] _rc: that it only uses the template that's part of that cookbook, and there's no mechanism for saying 'hey use the one from this cookbook instead'
[2012-09-18 19:16:53 -0400] yfeldblum: rocket, maintain a separate array for the sequence of the elements?
[2012-09-18 19:17:54 -0400] rocket: yfeldblum: I am trying that based on the recommendation from _rc
[2012-09-18 19:20:22 -0400] scottsbaldwin: When you use the gem_package resource in a recipe, does it always get installed into the omnibus gems?
[2012-09-18 19:21:13 -0400] mdeboard: _rc: So that means that there is no way to specify another template?
[2012-09-18 19:21:30 -0400] _rc: mdeboard: not as currently written
[2012-09-18 19:25:43 -0400] mdeboard: _rc: So, custom cookbook then?
[2012-09-18 19:26:38 -0400] _rc: mdeboard: if that best meets your needs.  otherwise I'd suggest code up a fix to the community cookbook so it more readily fits your needs and submit it
[2012-09-18 19:27:24 -0400] jblaine: I don't understand the purpose of 'knife configure -i' using chef-webui.pem's private key for a brand new server, on a brand new server.
[2012-09-18 19:27:33 -0400] mdeboard: _rc: I see; I like the latter better. Thanks.
[2012-09-18 19:27:45 -0400] jblaine: I don't like following steps in the wiki blindly. Can anyone explain?
[2012-09-18 19:28:05 -0400] jblaine: Looking at the source has not illuminated anything.
[2012-09-18 19:28:55 -0400] _rc: jblaine: it uses it as an admin client, to generate a new client certificate for the server you're bootstrapping
[2012-09-18 19:29:54 -0400] jblaine: Okay, so it is registering the *server* as an API client?
[2012-09-18 19:30:04 -0400] _rc: yes
[2012-09-18 19:30:10 -0400] jblaine: Is that mandatory?
[2012-09-18 19:30:33 -0400] jblaine: I'm trying to understand why that is necessary.
[2012-09-18 19:30:44 -0400] rocket: yfeldblum: thanks I have it working now I think ... its just taking a bit more syntax and code than I hoped
[2012-09-18 19:30:46 -0400] _rc: it's not mandatory
[2012-09-18 19:30:53 -0400] rocket: _rc thanks also
[2012-09-18 19:31:56 -0400] jblaine: The wiki assumes I chef-solo-installed with the inclusion of webui_enabled there, too. Without which I assume there would *be no chef-webui.pem* to spoof with.
[2012-09-18 19:33:47 -0400] ev0ldave: has anyone seen an EOF error when running chef-client?  it pulls an empty response from the chef server... http://pastebin.com/2w5R3bRp
[2012-09-18 19:34:14 -0400] ev0ldave: this only happens running chef-client on the chef server.  all other nodes work fine
[2012-09-18 19:34:43 -0400] ev0ldave: it pulls the run list just fine, the cookbooks come back empty
[2012-09-18 19:38:32 -0400] scottsbaldwin: Anyone know how to install gems to the system gem path rather than the omnibus path?
[2012-09-18 19:39:07 -0400] cwj: generally speaking, gem_package will install in the system path
[2012-09-18 19:39:15 -0400] cwj: chef_gem installs to the omnibus path
[2012-09-18 19:39:24 -0400] scottsbaldwin: When I use the gem_package resource, they get dumped in the omnibus path
[2012-09-18 19:39:39 -0400] ev0ldave: scottsbaldwin:  /opt/chef/embedded/bin/gem is the chef gem. use /usr/bin/gem
[2012-09-18 19:40:04 -0400] scottsbaldwin: ev0ldave: use /usr/bin/gem as the gem_binary?
[2012-09-18 19:40:11 -0400] ev0ldave: scottsbaldwin:  yes
[2012-09-18 19:40:19 -0400] ev0ldave: or whereever your ruby is installed to
[2012-09-18 19:40:30 -0400] ev0ldave: scottsbaldwin:  which gem
[2012-09-18 19:40:50 -0400] scottsbaldwin: so the omnibus gem binary is just getting picked up on the path first then...
[2012-09-18 19:41:14 -0400] ev0ldave: possibly, i dont add /opt/chef to my path
[2012-09-18 19:41:28 -0400] scottsbaldwin: neither do i
[2012-09-18 19:41:30 -0400] ev0ldave: which gem will tell you which one it is running
[2012-09-18 19:41:34 -0400] scottsbaldwin: that's what is throwing me off
[2012-09-18 19:41:48 -0400] scottsbaldwin: i think running chef-client is dropping the omnibus on the path
[2012-09-18 19:42:09 -0400] scottsbaldwin: from the wiki: As part of enforce_path_sanity, the Omnibus bin directories are added to the PATH
[2012-09-18 19:58:05 -0400] stuartrexking: jtimberman: Do you by any chance have a snippet on how you compiled the libs for postgres and placed them in /opt/chef/embedded?
[2012-09-18 20:03:49 -0400] jblaine: I'm pretty sure Ruby on Windows has various sleep(10) calls in it as a joke.
[2012-09-18 20:05:25 -0400] mdeboard: lol
[2012-09-18 20:05:29 -0400] mdeboard: funny joke!
[2012-09-18 20:09:43 -0400] srleod: My chef-client is stuck in a loop crashing on a bad recipe every 10 minutes.  How can I kick it to run the new recipe?
[2012-09-18 20:17:22 -0400] jtimberman: stuartrexking: i don't, sorry.
[2012-09-18 20:18:25 -0400] gchristensen: so using metadata.rb I've added build-essential as a dependency to my cookbook, but how can I ensure it gets executed without manually putting it in my roles' run-list?
[2012-09-18 20:18:50 -0400] stuartrexking: jtimberman: I have the run just about completing using gem chef on ubuntu 12.04, but now I see this error, which I suspect is because system ruby is 1.8. The error itself is unclear. Any tips?
[2012-09-18 20:18:52 -0400] stuartrexking: https://gist.github.com/5aeb3a0f7df11f95f93c
[2012-09-18 20:18:54 -0400] jtimberman: gchristensen: chef does not run a recipe unless it is in a run list.
[2012-09-18 20:19:15 -0400] gchristensen: jtimberman: understood, but can I have my recipe add it to the run-list?
[2012-09-18 20:20:29 -0400] jtimberman: stuartrexking: i know there were a couple regressions found in the deploy resource in 10.14.2.
[2012-09-18 20:20:49 -0400] jtimberman: gchristensen: while you *can*, that isn't something i would do
[2012-09-18 20:21:20 -0400] gchristensen: hrmm okay.
[2012-09-18 20:25:14 -0400] stuartrexking: jtimberman: You sound like it was a surprise that the resource regressed.
[2012-09-18 20:29:22 -0400] anthroprose: anyone have an idea of why I can create clients just fine from knife CLI but if I try and use bootstrap
[2012-09-18 20:29:23 -0400] jtimberman: stuartrexking: btm has more up to date information about the topic than i do.
[2012-09-18 20:29:24 -0400] anthroprose: I get 403s
[2012-09-18 20:29:46 -0400] matschaffer: anthroprose: is validation.pem in place & correct on the node being bootstrapped?
[2012-09-18 20:30:06 -0400] Eulipion: anyone else having issued with the webui?  it wont startand is not logging anything
[2012-09-18 20:30:27 -0400] jtimberman: anthroprose: are you trying to reuse the previous node/client names?
[2012-09-18 20:30:46 -0400] anthroprose: mat: in that it happens to be placed via bootstrap, yes it is in place
[2012-09-18 20:30:53 -0400] anthroprose: and the clients/node names are not in use
[2012-09-18 20:31:27 -0400] matschaffer: anthroprose: usually the error has a reason with it, is that not the case?
[2012-09-18 20:32:04 -0400] anthroprose: I do not have perms to PUT to clients
[2012-09-18 20:32:15 -0400] anthroprose: but I do... I'm doing it from the CLI just fine
[2012-09-18 20:32:19 -0400] anthroprose: its only the bootstrap that fails
[2012-09-18 20:32:37 -0400] matschaffer: the bootstrap uses the validation client, I think.
[2012-09-18 20:34:03 -0400] anthroprose: I'm assuming it has something to do with my recent perms refactor... went from user level to groups
[2012-09-18 20:45:12 -0400] erikh: anyone know why Socket.gethostname() is returning nil here, and not anywhere else? https://gist.github.com/55c7cfb442bf79e3e18b
[2012-09-18 20:50:57 -0400] erikh: ok, that's definitely not the problem...
[2012-09-18 20:52:30 -0400] matschaffer: anthroprose: that sounds like a likely culprit
[2012-09-18 20:52:37 -0400] _0x783czar: Can anyone recommend a good guide for bootstrapping an OpenSource Chef Server?
[2012-09-18 20:52:55 -0400] anthroprose: mat: actually just dug it out... was missing one little checkbox ;) many thanks for the pinpointing...
[2012-09-18 20:52:57 -0400] _0x783czar: The wiki page seems a bit disjointed
[2012-09-18 20:53:09 -0400] matschaffer: anthroprose: no worries, glad you found it :)
[2012-09-18 20:53:32 -0400] _0x783czar: Then again, I may just not be finding the right page on there
[2012-09-18 20:57:41 -0400] erikh: jtimberman: around?
[2012-09-18 20:59:40 -0400] jblaine: _0x783czar: I stood one up via the chef-solo boostrap just last week.
[2012-09-18 20:59:48 -0400] jblaine: _0x783czar: On RHEL6, FWIW
[2012-09-18 20:59:52 -0400] jblaine: _0x783czar: Worked fine.
[2012-09-18 21:00:25 -0400] jblaine: _0x783czar: I have only just now found that I am properly comprehending a lot of the wiki content. I've spent a lot of time with it and screwing around.
[2012-09-18 21:00:59 -0400] jblaine: _0x783czar: it just takes a bit to make sense of the way things work
[2012-09-18 21:01:07 -0400] jblaine: _0x783czar: Happy to try to answer any questions you have
[2012-09-18 21:01:56 -0400] jblaine: _0x783czar: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo is what I used
[2012-09-18 21:02:27 -0400] _0x783czar: jblaine: hey thanks, that helps.  I'll let you know if I hit a brick wall
[2012-09-18 21:02:41 -0400] jblaine: _0x783czar: those steps are lacking (to me) in that they don't truly describe WTF is going on -- just gives you steps to run
[2012-09-18 21:03:39 -0400] erikh: ohhhh yeah, I broke the ruby parser in the new chef error message system *hard*
[2012-09-18 21:04:48 -0400] magoo: moving our infrastructure to AWS VPC and upon initial try at creating one of our standard boxes, I'm getting ERROR: Excon::Errors::SocketError: getaddrinfo: nodename nor servname provided, or not known (SocketError)
[2012-09-18 21:05:19 -0400] magoo: i'm providing a servername via -N
[2012-09-18 21:07:26 -0400] jblaine: how the heck do I find and edit content that is being included as an excerpt in the current wiki page
[2012-09-18 21:09:51 -0400] Eulipion: anyone else having issues with the webui?  it wont start and is not logging anything
[2012-09-18 21:13:13 -0400] jtimberman: erikh: whatsu p
[2012-09-18 21:13:22 -0400] erikh: heh, sorry to be such a bother
[2012-09-18 21:13:25 -0400] jtimberman: np
[2012-09-18 21:13:31 -0400] barefoot: is there a way to exit/return from a recipe without finishing it? i.e. check for chef-solo and exit or continue with rest of recipe
[2012-09-18 21:13:34 -0400] miah: no more bother!
[2012-09-18 21:13:40 -0400] erikh: so, it's really simple to reproduce, but I'm totally failing at getting into jira
[2012-09-18 21:14:11 -0400] erikh: bash resource, write a for loop (with the do/done on their own lines, like classy men do it), and make sure the resource fails execution
[2012-09-18 21:14:15 -0400] erikh: the error handler will do the rest
[2012-09-18 21:14:34 -0400] erikh: let me dig up a highlight from github where the problem is
[2012-09-18 21:14:52 -0400] jtimberman: barefoot: 'return'
[2012-09-18 21:14:55 -0400] jtimberman: will exit the recipe
[2012-09-18 21:14:59 -0400] jtimberman: without an exception
[2012-09-18 21:15:13 -0400] barefoot: ty sir
[2012-09-18 21:15:40 -0400] erikh: https://github.com/opscode/chef/blob/master/chef/lib/chef/formatters/error_inspectors/resource_failure_inspector.rb#L70-72
[2012-09-18 21:15:44 -0400] _0x783czar: jblaine: OK, so I created the solo.rb, the chef.json, I disabled SELinux, and installed the epel repo.  Now, is the next step to get the chef-server cookbook?
[2012-09-18 21:16:00 -0400] erikh: jtimberman: anyhow, HTH... it's easy to reproduce, and the workaround is more or less to unroll the loop
[2012-09-18 21:19:33 -0400] angrybit: What strategies are you guys using for package management?  I'm using Amazon Linux AMI (Fedora derivative) and I'm working on a cookbook for specifying packages.  How are you ensuring all packages are at the same version across all servers?  Do you define attributes with package names and versions for ALL installed packages?  When you want to upgrade packages, do you update the attributes?
[2012-09-18 21:20:26 -0400] angrybit: Just trying to figure out if there is a better way than manually updating each off 200+ installed packages/versions in a file somewhere.
[2012-09-18 21:20:35 -0400] angrybit: of*
[2012-09-18 21:29:06 -0400] bytheway: Opinions on librarian vs berkshelf? New chef user trying to figure out how to manage cookbooks
[2012-09-18 21:40:33 -0400] marsam: bytheway bershelf looks good
[2012-09-18 21:42:10 -0400] bytheway: Is it preferred over librarian?
[2012-09-18 21:44:24 -0400] jessicab: bytheway: i think librarian has been around a bit longer.. i wouldnt say ive heard a preference for either, but ive recommended librarian based on that before
[2012-09-18 21:44:33 -0400] jessicab: its just probably been tested a bit more because of that
[2012-09-18 21:45:02 -0400] bytheway: There really isn't much out there comparing the two, I did know librarian is older.
[2012-09-18 21:47:10 -0400] jessicab: yea, we were asked that a few weeks ago and did a bit of research but couldnt seem to find anything.. seems like berkshelf is so new that most people havent tried both
[2012-09-18 21:48:18 -0400] marsam: bytheway http://christian-trabold.de/librarian-chef-vs-berkshelf
[2012-09-18 21:48:48 -0400] bytheway: Yup, that's the one post about it,   Read it already
[2012-09-18 21:49:28 -0400] miah: i've been using librarian forever. i haven't tried berkshelf yet.
[2012-09-18 21:52:20 -0400] kallistec: erikh: so what's the result of your bug? extra output, or type error?
[2012-09-18 21:56:10 -0400] Axsuul: bytheway: riot games uses that heavily, and they have a shitton of servers, so it's definitely tested
[2012-09-18 21:56:26 -0400] Axsuul: bytheway: however, for now I prefer librarian, I'm not sure how I feel about the shims idea
[2012-09-18 21:56:46 -0400] jblaine: _0x783czar: no
[2012-09-18 21:57:14 -0400] jblaine: _0x783czar: now you run chef-solo per the wiki, which does everything for you
[2012-09-18 21:58:35 -0400] jblaine: section "Bootstrap Chef Server" at http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2012-09-18 21:58:40 -0400] lflux_: ohai
[2012-09-18 21:58:50 -0400] lflux_: is there an easy way to add a role to multiple nodes?
[2012-09-18 21:59:05 -0400] bytheway: Thanks Axsuul.   Probably will just look at librarian for now, luckily they are pretty similar in,workflow so if the community does trend to berkshelf, it isn't a terrible transition.
[2012-09-18 21:59:05 -0400] jblaine: _0x783czar: done for the day, happy to help tomorrow as I can
[2012-09-18 21:59:35 -0400] _0x783czar: jblaine: alright thanks for the help
[2012-09-18 21:59:38 -0400] Axsuul: bytheway: yes, in the end, using librarian or berkshelf is... **essential**
[2012-09-18 22:00:01 -0400] Axsuul: bytheway: I've used the one massive cookbook repo method before and it's horrible
[2012-09-18 22:00:37 -0400] jtimberman: lflux_: as in, you want to add a role across multiple nodes in the chef server with a single command?
[2012-09-18 22:00:44 -0400] lflux_: jtimberman: yeah
[2012-09-18 22:00:52 -0400] lflux_: jtimberman: and I realized knife exec existed
[2012-09-18 22:00:56 -0400] jtimberman: lflux_: you can use knife exec :)
[2012-09-18 22:01:00 -0400] bytheway: Yeah, wanted to start off with some kind of cookbook management.   Don't like the all-in-one repo
[2012-09-18 22:01:04 -0400] jtimberman: that's what i'd use.
[2012-09-18 22:01:40 -0400] lflux_: me too, since I've apparently done stuff in this vein before with exec, looking at my source tree
[2012-09-18 22:01:57 -0400] lflux_: (it's midnight, what can I say)
[2012-09-18 22:03:55 -0400] erikh: kallistec: type error, conversion of nil to string by way of +
[2012-09-18 22:04:57 -0400] erikh: kallistec: I'm *guessing* that lines[current_line] is nil, but that's just from the error message, and the break never gets hit because it raises before then
[2012-09-18 22:07:31 -0400] kallistec: erikh: yeah, that makes sense. I thought I'd originally made it check if current_line + 1 was nil
[2012-09-18 22:17:33 -0400] stearns: ssd7: re: http://tickets.opscode.com/browse/CHEF-3337 -- have any of the other cloud plugins been modified to use the new ohai hints? (I'm looking for an example of where to add the extra info to the hints hash)
[2012-09-18 22:19:12 -0400] Layke: Is the hosted version of Chef free? (Not intending to ask a stupid question)
[2012-09-18 22:19:28 -0400] jtimberman: Layke: free up to 5 nodes
[2012-09-18 22:19:44 -0400] Layke: Ahh yeah. I see it now.
[2012-09-18 22:19:52 -0400] Layke: "Hosted Chef is free for 5 nodes or less"
[2012-09-18 22:20:02 -0400] Layke: Sorry. I didn't see that bit :)
[2012-09-18 22:25:01 -0400] Glacee: Hi, anyone knows if its possible to find the mysql socket path for the opscode "database" cookbook?
[2012-09-18 22:25:08 -0400] Glacee: to change*
[2012-09-18 22:25:41 -0400] Glacee: The mysql cookbook works fine with a different socket path.. but the database cookbook still tries to connect to the default path
[2012-09-18 22:28:57 -0400] Glacee: I am doing the an ovveride od the socket variable of the mysql cookbook on a role
[2012-09-18 22:29:01 -0400] Glacee: of*
[2012-09-18 22:35:56 -0400] Layke: Is there a *really* steep learning curve with Chef?
[2012-09-18 22:36:03 -0400] Layke: Or should I be able to plod along pretty nicely?
[2012-09-18 22:39:44 -0400] mdeboard: Layke: There are a lot of new concepts and some things that appear to be internally inconsistent
[2012-09-18 22:40:37 -0400] mdeboard: Layke: In my experience so far there are also a few very misleading error messages
[2012-09-18 22:40:56 -0400] mdeboard: that are the result of poor/non-explicit misconfiguration handling
[2012-09-18 22:41:16 -0400] mdeboard: YMMV obviously
[2012-09-18 22:42:01 -0400] Layke: Understood :)
[2012-09-18 22:42:55 -0400] ssd7: stearns: The ec2 plugin uses Ohai Hints
[2012-09-18 22:45:16 -0400] _0x783czar: After I bootstrapped an OpenSource Chef Server is there anything additional I need to be able to access the WebUI (I enabled it and can see it running in the process list)
[2012-09-18 22:46:42 -0400] Layke: So after 5 nodes, if I want, I can run my own chef server (open source? free?)
[2012-09-18 22:47:06 -0400] _0x783czar: Layke: yes, that's what I'm building right now
[2012-09-18 22:47:16 -0400] _0x783czar: ll
[2012-09-18 22:47:24 -0400] Layke: :)
[2012-09-18 22:49:54 -0400] Layke: _0x783czar, Where is the download for a private chef open source server?
[2012-09-18 22:50:41 -0400] _0x783czar: Layke: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2012-09-18 22:50:49 -0400] _0x783czar: Layke: that's the guide I'm using right now
[2012-09-18 22:51:00 -0400] Layke: Thanks
[2012-09-18 22:51:35 -0400] _0x783czar: Layke: just install chef the same way you did on your Management Workstation, then follow the guide  It's pretty self explanitory.
[2012-09-18 22:52:00 -0400] _0x783czar: Layke: let me know if you have any questions, I'm no expert on it, since I'm just learning as I go right now
[2012-09-18 22:52:12 -0400] Layke: I'm still just reading atm. I'll probably do it tomorrow
[2012-09-18 22:53:09 -0400] Layke: Trying to find out the best way to manage automatic deployment of my EC2 servers, so that they can autoregister themselves with Chef, install everything that they need, and update their configs.
[2012-09-18 22:54:06 -0400] jtimberman: Layke: there is not a "private chef open source server". There is "Opscode Private Chef" (http://opscode.com/private-chef) which is a commercial product, and there's "Open Source Chef Server" (http://wiki.opscode.com/display/chef/Installation) that is the free open source chef server.
[2012-09-18 22:54:30 -0400] aslan: hey guys how do you get to the webui for couchdb?
[2012-09-18 22:54:31 -0400] Layke: jtimberman, Without being overly naive, what's the difference?
[2012-09-18 22:54:33 -0400] jtimberman: Layke: The product page for Private Chef links to a form to register for the 60 day free trial.
[2012-09-18 22:54:41 -0400] Layke: In terms of functinality
[2012-09-18 22:54:55 -0400] aslan: i remember localhost:5984/chef/
[2012-09-18 22:55:51 -0400] Layke: http://wiki.opscode.com/display/chef/The+Different+Flavors+of+Chef :)
[2012-09-18 22:55:56 -0400] jtimberman: Layke: As far as chef-client is concerned in accessing the API, they're the same functionally :). As far as administrative use, they're rather different, important differences being: support from Opscode directly :), multi-tenancy/organizations (each acting as a separate Chef Server providing data segregation)
[2012-09-18 22:56:34 -0400] jtimberman: that is, Private Chef is supported by Opscode, and has multi-tenancy. Along with a full RBAC system between objects in the API.
[2012-09-18 22:56:55 -0400] Layke: It sounds like the oss chef server would be good enough for me.
[2012-09-18 22:57:22 -0400] jtimberman: it is for many people :)
[2012-09-18 22:57:53 -0400] jtimberman: but that the API is the same for clients, it's relatively straightforward to migrate later :)
[2012-09-18 22:57:56 -0400] Layke: Yeah. :) Okay, that's good. $120, is a little under half of my budget on servers per month. :)
[2012-09-18 22:58:10 -0400] aslan: hey guys how do you get to the webui for couchdb? please
[2012-09-18 22:58:42 -0400] Layke: But usually have 5-10 servers running, and they *constantly* need updating since I run EC2 spot requests to keep my costs down.
[2012-09-18 22:59:36 -0400] _0x783czar: OK, so I installed the OpenSource Chef, but can't seem to access the webui.  I keep trying to access it at http://MY_IP:4040 but can't access it.
[2012-09-18 22:59:49 -0400] ssd7: aslan: Typically ssh tunnel: ssh -L 5984:localhost:5984 chef.example.com and then  http://localhost:5984/_utils
[2012-09-18 23:00:19 -0400] aslan: ssd7: oh thanks. i know about the port forwarding. i just forgot about the _utils
[2012-09-18 23:01:36 -0400] Layke: If any admins are here, I think this is a mistake in the docs. http://wiki.opscode.com/display/chef/stub
[2012-09-18 23:01:52 -0400] Layke: JFYI :)
[2012-09-18 23:02:45 -0400] ssd7: Layke: Interesting.  I shall poke "ian"
[2012-09-18 23:08:24 -0400] kallistec: erikh: https://github.com/opscode/chef/compare/CHEF-3460 if you want to give it a go
[2012-09-18 23:09:15 -0400] erikh: kallistec: probably tomorrow AM
[2012-09-18 23:09:18 -0400] erikh: thanks!
[2012-09-18 23:17:26 -0400] aslan: kallistec: i am trying to use the couchdb of a chef 0.9 for a chef 0.10 server. i am getting an error regarding environement _default. how can i fix this?
[2012-09-18 23:18:56 -0400] aslan: kallistec: i tried to manually create it but that failed too
[2012-09-18 23:22:39 -0400] aslan: ?
[2012-09-18 23:24:44 -0400] a|i: I have recipe[mysql::server] in un list, and I get this error: Could not find previously defined grants.sql resource
[2012-09-18 23:25:28 -0400] a|i: the doc says that the recipe is supposed to create /etc/mysql/grants.sql
[2012-09-18 23:30:25 -0400] a|i: anyone?
[2012-09-18 23:30:36 -0400] a|i: 415 people here..
[2012-09-18 23:30:46 -0400] mdeboard: IRC is an asynchronous communication medium
[2012-09-18 23:30:51 -0400] mdeboard: Patience
[2012-09-18 23:30:58 -0400] mdeboard: Your call will be takenin the order it was received
[2012-09-18 23:32:03 -0400] aslan: any one?? what is this error: 404 NOT FOUND: CANNOT LOAD ENVIRONMENT _DEFAULT ?
[2012-09-18 23:35:12 -0400] aslan: I used to get help in this room :(
[2012-09-18 23:40:22 -0400] hoover_damm: aslan, chef 0.9 and chef 0.10 do not use the same data layout in the database
[2012-09-18 23:41:24 -0400] hoover_damm: afaik
[2012-09-18 23:41:27 -0400] hoover_damm: i could be wrong
[2012-09-18 23:41:34 -0400] hoover_damm: but I think there was things added
[2012-09-18 23:41:55 -0400] aslan: hoover_damm: so how can i migrate a chef 0.9 data to chef 0.10?
[2012-09-18 23:42:24 -0400] aslan: hoover_damm: i dont want to recreate all my keys, data bags, roles ....
[2012-09-18 23:42:53 -0400] hoover_damm: aslan, don't you have those in chef-repo?
[2012-09-18 23:43:01 -0400] hoover_damm: aslan, everything 'except' my nodes is in chef-repo
[2012-09-18 23:43:06 -0400] hoover_damm: aslan, I don't have to 'rebuild' anything
[2012-09-18 23:43:20 -0400] aslan: hoover_damm: how about the nodes?
[2012-09-18 23:43:22 -0400] hoover_damm: aslan, there are tools to fetch this data btw
[2012-09-18 23:43:31 -0400] hoover_damm: aslan, knife node show foo -Fj > foo.json
[2012-09-18 23:43:31 -0400] aslan: hoover_damm: where are the tools?
[2012-09-18 23:43:34 -0400] hoover_damm: basic
[2012-09-18 23:43:49 -0400] hoover_damm: http://wiki.opscode.com/display/chef/Backing+Up+Chef+Server
[2012-09-18 23:44:05 -0400] hoover_damm: should back it up before you do anything
[2012-09-18 23:44:26 -0400] aslan: hoover_damm: how about your client.pem and validation.pem
[2012-09-18 23:44:54 -0400] hoover_damm: aslan, I moved from installing ruby to using the omnibus style... so I just nuked client.rb and re-bootstrapped my servers
[2012-09-18 23:45:02 -0400] hoover_damm: aslan, it is /soooo/ much cleaner to deploy
[2012-09-18 23:45:19 -0400] aslan: hoover_damm: i am using the solo method
[2012-09-18 23:45:46 -0400] hoover_damm: aslan, knife bootstrap hostname
[2012-09-18 23:46:11 -0400] hoover_damm: aslan, basically bootstrapping clients is a easy delight now
[2012-09-18 23:47:04 -0400] aslan: hoover_damm: how did you migrate your couchdb? did you use your repo backup?
[2012-09-18 23:47:22 -0400] a|i: I uploaded mysql cookbook to chef server, but of all of these attributes: https://github.com/opscode-cookbooks/mysql/blob/master/attributes/server.rb I only see a few on the server. eg default['mysql']['reload_action'] is not there.
[2012-09-18 23:47:46 -0400] a|i: the lacking attributes cause errors when running chef-client.
[2012-09-18 23:49:17 -0400] erikh: try knife node edit <your node> -a
[2012-09-18 23:49:23 -0400] erikh: you should see them in the 'default' section.
[2012-09-18 23:49:48 -0400] erikh: presuming your node converged successfully since you've put the newly uploaded cookbook in your run_list
[2012-09-18 23:51:27 -0400] a|i: erikh: the recipe is part of a run list in a role.
[2012-09-18 23:52:37 -0400] hoover_damm: aslan, I migrated off to hosted chef a few years ago and stopped caring about it
[2012-09-18 23:52:52 -0400] hoover_damm: aslan, I found the whole chore of managing my own chef server to be horrible
[2012-09-18 23:53:14 -0400] hoover_damm: aslan, this allows me to focus on the clients and let opscode host my data... it's not a perfect deal
[2012-09-18 23:53:29 -0400] hoover_damm: aslan, but it's cheaper then us having to buy the hardware and pay someone to support it.
[2012-09-18 23:53:32 -0400] hoover_damm: at least in our opinion
[2012-09-18 23:55:05 -0400] aslan: hoover_damm: we have a shit load of servers. If i go the "hosted chef" route it can easily add up. i will talk to my boss about it. but until then i really like to move to chef 10
[2012-09-18 23:57:04 -0400] erikh: a|i: that's not what I asked, did it converge successfully at least once?
[2012-09-18 23:57:30 -0400] a|i: erikh: it turned out a site cookbook was overriding the attributes file :)
[2012-09-18 23:57:51 -0400] a|i: erikh: what I don't understand about the mysql server recipe is the password generation. how does it work?
[2012-09-18 23:58:16 -0400] erikh: I've actually gotta bail, quittin' time for the day
[2012-09-18 23:58:17 -0400] erikh: ttfn
[2012-09-18 23:58:32 -0400] a|i: okay.

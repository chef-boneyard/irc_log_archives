[2012-09-25 01:20:35 -0400] ddyke: Hello
[2012-09-25 01:21:02 -0400] ddyke: exit
[2012-09-25 01:24:17 -0400] drnfx: Hello, I am trying to bootstrap a brand new node, however I am receiving the following error:FATAL: NameError: undefined local variable or method `e' for #<Chef::Formatters::ErrorInspectors::RegistrationErrorInspector:0x00000016126fb8>
[2012-09-25 01:24:25 -0400] drnfx: Has anyone experienced this before?
[2012-09-25 01:24:50 -0400] bluepojo1: are you rescuing an error and forgetting to set e in the rescue declaration?
[2012-09-25 01:26:18 -0400] drnfx: From my understanding of the code, an error is being rescued. But this is a vanilla installation of chef-client 10.14.2
[2012-09-25 01:26:34 -0400] bluepojo1: could be a bug
[2012-09-25 01:26:34 -0400] drnfx: not a proficient ruby guy yet so im at a loss
[2012-09-25 01:26:47 -0400] bluepojo1: so in the stack trace, there should be a line number
[2012-09-25 01:26:49 -0400] bluepojo1: if you open that file
[2012-09-25 01:27:03 -0400] bluepojo1: you'll be inside a rescue block
[2012-09-25 01:27:06 -0400] bluepojo1: the rescue should say
[2012-09-25 01:27:10 -0400] bluepojo1: rescue => e
[2012-09-25 01:27:19 -0400] bluepojo1: my instinct says someone forgot the => e
[2012-09-25 01:27:37 -0400] bluepojo1: rescue ErrorName => e is also valid
[2012-09-25 01:27:55 -0400] drnfx: the first file is /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.14.2/lib/chef/formatters/error_inspectors/registration_error_inspector.rb line 45 is blowing up.
[2012-09-25 01:28:04 -0400] bluepojo1: if that's the case, file a bug and downgrade chef
[2012-09-25 01:29:03 -0400] zts: drnfx: http://tickets.opscode.com/browse/CHEF-3443
[2012-09-25 01:30:06 -0400] zts: drnfx: if you installed from gems, the prerelease for 10.14.4 was uploaded last night - so you could test that out.  If not, bluepojo1's advice to downgrade is your best bet
[2012-09-25 01:30:22 -0400] drnfx: zts: I saw that bug report but when looking through the comments Kenneth mentions that he had a whitespace in his client.rb file
[2012-09-25 01:30:36 -0400] drnfx: I checked my /etc/chef/client.rb file but this wasn't applicable
[2012-09-25 01:32:38 -0400] zts: drnfx: the whitespace issue was what triggered the bug in his case, but it wasn't the bug
[2012-09-25 01:32:47 -0400] zts: drnfx: https://github.com/kennethkalmer/chef/commit/270f073cbf4a6df3c369724cab5da16cb2b23c57
[2012-09-25 01:33:09 -0400] drnfx: zts: this may be a dumb question... but if I am running a chef server do I need to downgrade that server?
[2012-09-25 01:33:34 -0400] zts: drnfx: not a dumb question at all!  And no, just downgrading the client where you're seeing the error should be fine
[2012-09-25 01:34:14 -0400] zts: drnfx: if you're having the problem on multiple nodes downgrading one might be enough for you - that should then show you the actual error, which you can go fix on your other nodes
[2012-09-25 01:34:52 -0400] drnfx: Fortunately this is a clean Chef implementation. Just started learning/reading this afternoon
[2012-09-25 01:35:16 -0400] zts: Bad luck to hit a bug so soon after starting :(
[2012-09-25 01:35:30 -0400] drnfx: nature of the beast :_
[2012-09-25 01:35:31 -0400] drnfx: :)
[2012-09-25 01:35:36 -0400] zts: very true
[2012-09-25 01:35:57 -0400] drnfx: At least the community is helpful. I may just modify the code myself to get past this.
[2012-09-25 01:41:42 -0400] drnfx: modified the code on node and i got the correct error
[2012-09-25 01:41:46 -0400] drnfx: Thanks zts :)
[2012-09-25 01:42:26 -0400] drnfx: 1
[2012-09-25 01:44:19 -0400] zts: no problem :)
[2012-09-25 02:00:30 -0400] drnfx: just wanted to say... successfully worked after that code change
[2012-09-25 02:08:04 -0400] drnfx: another dumb question... to execute chef-client on the node from knife do i use knife ssh?
[2012-09-25 02:08:48 -0400] tpot: that's one way
[2012-09-25 02:08:54 -0400] tpot: can also run it as a daemon
[2012-09-25 02:09:06 -0400] tpot: or run out of cron
[2012-09-25 02:10:06 -0400] drnfx: ah okay, just happy i got my first cookbook/recipe/node working
[2012-09-25 02:13:34 -0400] tpot: nice
[2012-09-25 02:13:43 -0400] tpot: it's a big achievement (-:
[2012-09-25 02:13:58 -0400] tpot: welcome to chef!
[2012-09-25 02:14:14 -0400] drnfx: tpot: do you know a saul waizer?
[2012-09-25 02:14:20 -0400] tpot: no
[2012-09-25 02:14:38 -0400] drnfx: worth a shot hah. and thank you i should have been using chef a long time ago
[2012-09-25 02:14:58 -0400] bluepojo: woo congrats
[2012-09-25 02:21:42 -0400] drnfx: thanx boss.
[2012-09-25 02:47:28 -0400] drnfx: thanks all. later
[2012-09-25 03:32:42 -0400] iverson0881: hey all, was reading http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+(LWRP)#LightweightResourcesandProviders(LWRP)-Keyword%3Aattribute but I couldn't figure how to specify a default value for an attribute
[2012-09-25 03:33:10 -0400] iverson0881: seems like it's possible in the "heavyweight" example but didn't seem to get translated into the "lightweight" example with @ syntax
[2012-09-25 03:34:30 -0400] spox: attribute :fubar, :kind_of => String, :default => 'foobar'
[2012-09-25 03:37:05 -0400] iverson0881: awesome thank you spox
[2012-09-25 03:37:15 -0400] spox: iverson0881: sure :)
[2012-09-25 03:53:50 -0400] iverson0881: how do i figure out the name or define the name of the provider I just created so that I can use it in a recipe?
[2012-09-25 03:54:51 -0400] huhongbo: when i using databag to generate the conf file ,how to tell the service to restart
[2012-09-25 03:56:29 -0400] huhongbo: i want to restart the service when databag change
[2012-09-25 03:56:33 -0400] iverson0881: :huhongbo i use templates and i'm sure it applies to data bags (AFAIK), but you could have something like:     notifies :restart, "service[nginx]"
[2012-09-25 03:56:55 -0400] iverson0881: and then below in the recipe somewhere have: service "nginx" do
[2012-09-25 03:56:56 -0400] iverson0881:     supports :restart => true, :reload => true
[2012-09-25 03:56:57 -0400] iverson0881:     action :enable
[2012-09-25 03:56:58 -0400] iverson0881: end
[2012-09-25 03:57:32 -0400] huhongbo: when the databag change the conf will change ,then it can do with notifiles to tell the service restart ?
[2012-09-25 03:57:45 -0400] spox: huhongbo: iverson0881 is pointing to the correct thing. the data bags are generally being used by a resource to write a configuration file
[2012-09-25 03:57:57 -0400] spox: you need to put the notification within that resource
[2012-09-25 03:58:06 -0400] spox: which will generally be a template or file resource
[2012-09-25 03:58:14 -0400] huhongbo: ok ,i got it
[2012-09-25 04:02:15 -0400] iverson0881: anyone have an idea on the provider name?
[2012-09-25 04:08:41 -0400] zts: iverson0881: is http://wiki.opscode.com/display/chef/Lightweight+Resources+and+Providers+(LWRP)#LightweightResourcesandProviders%28LWRP%29-FileLocations what you're looking for?
[2012-09-25 04:09:05 -0400] zts: iverson0881: if not, I may have misunderstood your question
[2012-09-25 04:12:06 -0400] iverson0881: agh okay thanks i understand now
[2012-09-25 05:11:27 -0400] Axsuul: Anyone know if librarian chef's outdated command works with cookbooks with :git used as the source
[2012-09-25 05:26:06 -0400] flaccid: Axsuul: not sure what you m ean by outdated but i use that a lot without issue iirc
[2012-09-25 05:26:45 -0400] Axsuul: flaccid: All my cookbooks point to a git repo, but if they are updated with the version changed in metadata.rb, librarian-chef outdated doesn't seem to pick that up
[2012-09-25 05:43:32 -0400] Axsuul: flaccid: ever experience that/
[2012-09-25 05:47:07 -0400] Axsuul: yfeldblum: You around?
[2012-09-25 06:36:27 -0400] ssd7: Ohai Chefs
[2012-09-25 07:43:53 -0400] williamherry: my chef-server-webui cracked by co-worker
[2012-09-25 07:49:55 -0400] daole: Hi, I ran into troubles in running the example of cucumber-chef
[2012-09-25 07:50:04 -0400] daole: Anyone has the same issue?
[2012-09-25 07:50:15 -0400] daole: exit (SystemExit)       /home/ubuntu/features/support/env.rb:50:in `exit'
[2012-09-25 07:52:25 -0400] williamherry: any paper about chef secure?
[2012-09-25 08:25:15 -0400] huhongbo: when i upload the cookbooks using knife
[2012-09-25 08:25:22 -0400] huhongbo: ERROR: Server returned error for http://pc-mon02:4000/sandboxes/4fee7d690aaa4a4fbaa8dd29edbad3f2,
[2012-09-25 08:32:50 -0400] ranjibd: huhongbo, -VV?
[2012-09-25 08:34:51 -0400] huhongbo: HTTP Request Returned 500 Internal Server Error: Invalid cross-device link
[2012-09-25 08:35:01 -0400] huhongbo: i use nginx to proxy chef api
[2012-09-25 08:35:36 -0400] huhongbo: https://gist.github.com/3780660
[2012-09-25 08:43:56 -0400] ranjibd: huhongbo, can you check the chef server log ?
[2012-09-25 08:44:03 -0400] BryanWB: danryan, around?
[2012-09-25 08:44:09 -0400] BryanWB: ohai chefs!
[2012-09-25 08:44:46 -0400] ranjibd: huhongbo, is it new cookbook , or existing one... try deleting the cookbook from the server
[2012-09-25 08:44:53 -0400] ranjibd: BryanWB, ohai
[2012-09-25 08:45:04 -0400] BryanWB: hey ranjibd!
[2012-09-25 08:45:04 -0400] huhongbo: is the existing one
[2012-09-25 08:48:40 -0400] BryanWB: reset, u awake? i want to put a blurb into next foodfightshow about newest releases of berkshelf and ridley
[2012-09-25 08:48:52 -0400] huhongbo: fixed i move the cache to the same location which checksum directory in
[2012-09-25 08:50:42 -0400] nickesh: writing a recipe for installing firefox, wrote well, but i don't know about how to give firefox proxy settings. I want these settings done automatically instead manually
[2012-09-25 08:51:32 -0400] nickesh: can anybody help?
[2012-09-25 08:52:18 -0400] ranjibd: nickesh, set it in your system
[2012-09-25 08:52:39 -0400] ranjibd: and then check for .firefox or .mozilla  folder inside your home directory
[2012-09-25 08:53:22 -0400] ranjibd: i think it stores the preferences there.. we use the same trick for chrome installation customization.. im sure even firefox will be the same
[2012-09-25 08:54:43 -0400] nickesh: @ranjibd: how can i do that, i mean where(which file) to write the settings
[2012-09-25 08:55:49 -0400] ranjibd: nickesh, i generally edit the prefences manually via ui and then grep for the settings inside .mozilla.. hang on.. im trying it out at my end
[2012-09-25 08:57:04 -0400] jedi4ever: hi BryanWB - seems like your jmxtrans  cookbook is failing because of unzip missing - (ark uses it)
[2012-09-25 08:57:26 -0400] jedi4ever: do you think it belongs in jmxtrans or ark cookbook?
[2012-09-25 08:57:32 -0400] BryanWB: jedi4ever, ouch, ark shud install the dependencies for unzip
[2012-09-25 08:57:40 -0400] BryanWB: lemme check
[2012-09-25 08:58:00 -0400] ranjibd: nickesh, got it. ~/.mozilla/firefox/<xxx>.default/prefs.js .. is the file
[2012-09-25 08:58:11 -0400] BryanWB: jedi4ever, https://github.com/bryanwb/chef-ark/blob/master/recipes/default.rb#L22
[2012-09-25 08:58:34 -0400] BryanWB: jedi4ever, is "unzip" package installed and still failing?
[2012-09-25 08:58:52 -0400] ranjibd: nickesh, `user_pref("network.proxy.backup.ftp", "<ipaddress>");` this is the string you need to add
[2012-09-25 08:59:30 -0400] jedi4ever: BryanWB: I see it in the recipe too - still jmxtrans fails with missing unzip (in ark) - if I install manually - all goes well
[2012-09-25 08:59:42 -0400] BryanWB: ouch, what os u on?
[2012-09-25 08:59:48 -0400] BryanWB: s/os/distro/
[2012-09-25 08:59:50 -0400] jedi4ever: ubuntu
[2012-09-25 08:59:53 -0400] jedi4ever: 12.04
[2012-09-25 09:00:42 -0400] BryanWB: i think i c issue
[2012-09-25 09:01:08 -0400] BryanWB: jedi4ever, i should have `include_recipe "ark"` at the top of the default recipe
[2012-09-25 09:01:26 -0400] BryanWB: to make sure ark and its deps handled first
[2012-09-25 09:01:57 -0400] jedi4ever: yep - makes sense , I'll put in a pull request
[2012-09-25 09:02:20 -0400] BryanWB: jedi4ever, tks, i shud have caught that
[2012-09-25 09:02:36 -0400] jedi4ever: on another note - the logstash cookbook fails because the apt-get update for openjdk isn't done first - thoughts there ?
[2012-09-25 09:02:45 -0400] jedi4ever: also include apt-get in that one ?
[2012-09-25 09:02:56 -0400] BryanWB: hmm
[2012-09-25 09:03:17 -0400] BryanWB: jedi4ever, u using mine or lusis?
[2012-09-25 09:03:35 -0400] nickesh: @ranjibd: in which file should i add that line?
[2012-09-25 09:03:40 -0400] jedi4ever: I think lusis one - didn't know you had your own :)
[2012-09-25 09:03:59 -0400] BryanWB: jedi4ever, yeah, not all my changes have made it upstream into lusis
[2012-09-25 09:04:18 -0400] BryanWB: jedi4ever, which recipe?
[2012-09-25 09:05:56 -0400] BryanWB: jedi4ever, in my vagrantfile, i have the    `apt` recipe above logstash::server and logstash::kibana  so I assume that it is necessary for this purpose, to do `apt-get update` as well
[2012-09-25 09:06:15 -0400] jedi4ever: i think it's in  java recipe - when it installs openjdk it tells that it can't find the package - only after apt-get update
[2012-09-25 09:07:04 -0400] jedi4ever: does it make sense to put things like this in the log stash recipe ? include_recipe "apt" to have it executed first ?
[2012-09-25 09:07:05 -0400] BryanWB: jedi4ever,heh, likely shud be in java recipe as well. I only use ubuntu for testing w/ vagrant so i am guilty there
[2012-09-25 09:07:28 -0400] BryanWB: jedi4ever, hmm, it seems like boilerplate to me
[2012-09-25 09:07:44 -0400] BryanWB: cuz u would have to put it in any recipe that is used on ubuntu
[2012-09-25 09:07:50 -0400] gyre007: strange...im checking runlist via knife and am getting TOTALLY different results than what Im seeing in WEbUI
[2012-09-25 09:07:52 -0400] gyre007: uhh
[2012-09-25 09:07:53 -0400] BryanWB: which is most
[2012-09-25 09:08:07 -0400] gyre007: which one is correct then
[2012-09-25 09:08:16 -0400] BryanWB: gyre007, knife
[2012-09-25 09:08:18 -0400] jedi4ever: BryanWB does chef have something like run stages for this ?
[2012-09-25 09:08:38 -0400] BryanWB: umm, run stages? dont believe so
[2012-09-25 09:08:54 -0400] gyre007: BryanWB, so why is WebUI confusing me ?
[2012-09-25 09:08:56 -0400] BryanWB: just compilation, then converge phase
[2012-09-25 09:09:03 -0400] BryanWB: gyre007, i would avoid it
[2012-09-25 09:09:15 -0400] gyre007: :)
[2012-09-25 09:09:43 -0400] jedi4ever: in puppet you can assign blocks to stages and say stage 1 -> stage 2 -> stage 3 (handles updates problem nicely)
[2012-09-25 09:10:24 -0400] BryanWB: jedi4ever, sadly, nothing like that
[2012-09-25 09:10:52 -0400] gyre007: oh boy this is all messed up
[2012-09-25 09:11:15 -0400] gyre007: just used WebUI to add a new role to runlist of one of the nodes...it's not coming up in knife...wtf...
[2012-09-25 09:11:25 -0400] gyre007: arrrgh
[2012-09-25 09:22:01 -0400] nickesh: janjibd: where can in find a cookbook for firefox as a reference?
[2012-09-25 09:22:28 -0400] nickesh: ranjibd: where can in find a cookbook for firefox as a reference?
[2012-09-25 09:29:18 -0400] ranjibd: nickesh, not sure.. try knife cookbook search firefox
[2012-09-25 09:33:12 -0400] nickesh: ranjibd: it is saying FATAL: Cannot find sub command for: 'cookbook search firefox'
[2012-09-25 09:34:54 -0400] ranjibd: nickesh,  my bad `knife cookbook site search firefox`
[2012-09-25 09:35:33 -0400] CJNE: i have two environments, test and prod. what is the best practise for defining attributes like db_host? in test the webserver role should use localhost but in prod it should be x.y.z. Doing it with role attributes don't seem to work with environments. Doing it with enviromnet attributes ties to the recipe rather than the role so if i wanted to use the same recipe in two different roles with different settings it wouldn't work, i think? Still learning so i might ha
[2012-09-25 09:36:17 -0400] ranjibd: CJNE, you can override attributes in environment
[2012-09-25 09:37:31 -0400] CJNE: ranjibd: override role attributes ?
[2012-09-25 09:38:05 -0400] nickesh: @ranjibd: for that command i have to provide proxy address(i think :))
[2012-09-25 09:38:26 -0400] nickesh:  output was:  ERROR: Network Error: Error connecting to http://cookbooks.opscode.com/api/v1/search?q=firefox&items=10&start=0 - Connection timed out - connect(2) Check your knife configuration and network settings
[2012-09-25 09:38:53 -0400] nickesh: how can i specify proxy in the command
[2012-09-25 09:39:57 -0400] ranjibd: knife.rb
[2012-09-25 09:40:21 -0400] ranjibd: nickesh,  but im not too sure exactly what you have to put there.. need  to dig
[2012-09-25 09:40:39 -0400] nickesh: :)
[2012-09-25 09:41:11 -0400] ranjibd: CJNE, atributes are not role / environment specific,. they are access from the node object , but can be defined under cookbook, role , environment
[2012-09-25 09:45:42 -0400] CJNE: yeah, what i'm trying to figure out is where i should define them. I want to re-use the same cookbook for different roles. The roles have different "values" (attributes?) for things like db_host and it's also depending on the enviromnet. Like this:
[2012-09-25 09:46:28 -0400] CJNE: role A prod: db_host: 1.2.3.4, test: db_host: localhost
[2012-09-25 09:46:49 -0400] CJNE: role B prod: db_host: 2.3.4.5, test: db_host: localhost
[2012-09-25 09:47:13 -0400] CJNE: where would i put those specifics?
[2012-09-25 09:47:49 -0400] CJNE: (using the same cookbook)
[2012-09-25 10:00:37 -0400] laurent\: hmm got some weird issues with libgit-ruby
[2012-09-25 10:04:46 -0400] laurent\: https://gist.github.com/3781015
[2012-09-25 10:05:24 -0400] laurent\: i'm using libgit-ruby in one of my cookbook
[2012-09-25 10:06:17 -0400] laurent\: then in another i've been trying to execute "git init #{somewhereelse}"
[2012-09-25 10:07:03 -0400] laurent\: it does reinit the repository that was used with libgit-ruby in the previous cookbook
[2012-09-25 10:07:30 -0400] laurent\: i'm not using the git/deploy resource but i guess it would be impacted as well
[2012-09-25 10:12:52 -0400] laurent\: guess it's time to try something new, like rugged for ex
[2012-09-25 10:24:51 -0400] iroller: Hi. Is it possible to push attibutes to `chef-client -j` not from file but from command line like `chef-client -j '{"somekey": "someval"}'` ?
[2012-09-25 11:43:16 -0400] laurent\: is there a magic method to add a Last-Changed timestamp in template ?
[2012-09-25 12:16:21 -0400] BryanWB: any body know of a nice lwrp for haproxy backends?
[2012-09-25 12:59:28 -0400] nickesh: @ranjibd: still there?
[2012-09-25 13:04:37 -0400] nickesh: i want to edit a file file.txt in directory 'z', path is /home/x/y/z/file.txt, but the problem is directory name of directory x can be anything, i.e. *.default, ".default " is always there in the directory name, but i don't know value of "*", i tried giving path=/home/*.default/y/z/file.txt, it did not work
[2012-09-25 13:12:44 -0400] veetow: is chef's template resource idempotent?
[2012-09-25 13:13:09 -0400] geekbri: veetow: yes
[2012-09-25 13:13:45 -0400] veetow: geekbri: but if the file already exists as it should be as defined by the template et al
[2012-09-25 13:13:54 -0400] veetow: will a chef run "touch" the file
[2012-09-25 13:13:56 -0400] veetow: ?
[2012-09-25 13:14:13 -0400] veetow: i'm baiting a bit as i think i know the answer
[2012-09-25 13:14:51 -0400] geekbri: veetow: no it shouldn't.  The provider for template takes a checksum of the file on disk and a checksum of what the content is supposed to be, if it matches it takes no action
[2012-09-25 13:15:02 -0400] veetow: ah, really?
[2012-09-25 13:15:10 -0400] geekbri: veetow: It then after that, check the permissions and ownership I believe
[2012-09-25 13:15:15 -0400] veetow: then i'm mistaken and i need to test
[2012-09-25 13:15:23 -0400] veetow: thanks geekbri
[2012-09-25 13:15:48 -0400] geekbri: veetow: https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/template.rb#L49-70
[2012-09-25 13:16:22 -0400] veetow: well there it is
[2012-09-25 13:16:25 -0400] veetow: thanks sir
[2012-09-25 13:16:34 -0400] veetow: or ma'am
[2012-09-25 13:21:22 -0400] geekbri: Sir :)
[2012-09-25 13:31:22 -0400] sunil__: good morning folks..have a question about a linux kernel bug and chef-client run..
[2012-09-25 13:31:57 -0400] sunil__: Anyone dealt with this? https://bugs.launchpad.net/ubuntu/+source/linux/+bug/999755
[2012-09-25 13:34:40 -0400] sunil__: I am debating whether I should patch the kernel..its only happening on few machines...
[2012-09-25 13:51:34 -0400] CJNE: how do i use a data bag item in a role.rb (in attribute_overrides) ?
[2012-09-25 14:03:15 -0400] miketheman: is there a way to state in a cookbook/metadata or something "do not upload to server/ignore me"?
[2012-09-25 14:05:19 -0400] yfeldblum: miketheman, why ... ?
[2012-09-25 14:05:31 -0400] yfeldblum: CJNE, no
[2012-09-25 14:06:16 -0400] miketheman: yfeldblum: we're getting to the point where a lot of cookbooks leverage chef-server search. Most development is done via chef-solo. some code is written to "patch" this functionality, and I never actually need this code to be uploaded to chef-server
[2012-09-25 14:06:17 -0400] yfeldblum: CJNE, the ruby DSL for role files are an extremely thin layer over simple static JSON role files
[2012-09-25 14:06:34 -0400] miketheman: yfeldblum: performing a `knife cookbook upload -a` will include the dev-only local cookbooks
[2012-09-25 14:08:32 -0400] yfeldblum: miketheman, i suppose you could put it in a different cookbook directory that you do not add to your knife.rb, but which you do add to /etc/chef/solo.rb
[2012-09-25 14:08:34 -0400] leifmadsen: miketheman: alternatively you could just wrap your include_recipes in default.rb with a check to determine if you're using chef-solo, and if not, to just return a Chef::Log or something and then move on?
[2012-09-25 14:08:46 -0400] leifmadsen: +1 to yfeldblum
[2012-09-25 14:14:43 -0400] Unicron_: hi - is there any way to use a bootstrap template to just add one extra line to the initial client.rb that gets installed on the new node?
[2012-09-25 14:15:35 -0400] Unicron_: I bootstrap rhel, debian and ubuntu nodes so don't want to write a template for each, just a little thing that gets tacked on to the end
[2012-09-25 14:16:36 -0400] Unicron_: specifically add 'no_proxy "<chef_server_url>"'
[2012-09-25 14:17:44 -0400] CJNE: yfeldblum: ok, thanks, still trying to grasp this :)
[2012-09-25 14:32:34 -0400] tknerr: ohai chefs!
[2012-09-25 14:32:59 -0400] tknerr: can someone help me with a chefspec question?
[2012-09-25 14:33:40 -0400] matschaffer: tknerr: just ask man :)
[2012-09-25 14:33:54 -0400] tknerr: hey mat :-)
[2012-09-25 14:34:03 -0400] tknerr: still compiling the question ;-)
[2012-09-25 14:34:15 -0400] Loof: tknerr: The answer is 42
[2012-09-25 14:34:43 -0400] en0x: [;
[2012-09-25 14:34:47 -0400] tknerr: @Loof: already tried that - but it didn't help ;-)
[2012-09-25 14:35:19 -0400] tknerr: i'm trying to write a spec for the jira cookbook, but it depends on runit, java and apache2 cookbooks
[2012-09-25 14:36:31 -0400] tknerr: when I run rspec I get the error below on `ChefSpec::ChefRunner.new.converge 'jira::default'`
[2012-09-25 14:36:41 -0400] tknerr: Chef::Exceptions::CookbookNotFound:        Cookbook runit not found. If you're loading runit from another cookbook, make sure you configure the dependency in your metadata
[2012-09-25 14:38:33 -0400] tknerr: I can pull in the cookbook dependencies via librarian
[2012-09-25 14:39:13 -0400] miketheman: yfeldblum, leifmadsen - thanks for the ideas - I'll look at that.
[2012-09-25 14:39:22 -0400] tknerr: I can also tell the ChefRunner where the cookbook path is, e.g. `ChefSpec::ChefRunner.new({:cookbook_path => '/some/path'})`
[2012-09-25 14:39:55 -0400] tknerr: but the problem is that I can only pass a single cookbook_path - not an array
[2012-09-25 14:41:13 -0400] tknerr: so I can pass either `/path/to/my/jira-cookbook` or `/path/to/my/jira-cookbook/cookbooks` (that's where I download the cookbook deps with librarian), but not both
[2012-09-25 14:42:18 -0400] tknerr: wondering how other people write chefspec specs for cookbooks that depend on other cookbooks?
[2012-09-25 14:42:25 -0400] tknerr: are there any examples?
[2012-09-25 14:50:56 -0400] tknerr: ahhh, forget it - noticed that the `cookbook_path` is passed directly to `Chef::Config[:cookbook_path]`, so I can actually pass both cookbook_paths as an array:
[2012-09-25 14:50:57 -0400] tknerr: https://github.com/acrmp/chefspec/blob/master/lib/chefspec/chef_runner.rb#L72
[2012-09-25 14:57:11 -0400] BryanWB: tknerr, 0.6.0 of berkshelf has windows support
[2012-09-25 14:57:22 -0400] BryanWB: it is prerelease
[2012-09-25 14:58:04 -0400] jblaine: ghartman: Thanks re: attribute help on 9/20. Your suggestion that I thought I had tried... worked.
[2012-09-25 14:58:36 -0400] tknerr: BryanWB: I have noticed the announcement in the chef mailing list today, but didn't notice that there is a prelease gem for 0.6.0 is out there already - thanks!
[2012-09-25 14:58:50 -0400] BryanWB: tknerr, gem install berkshelf --pre
[2012-09-25 15:00:28 -0400] tknerr: BryanWB: thanks, I will give it a try! :-)
[2012-09-25 15:25:56 -0400] tknerr: anyone knows whether chefspec considers notifications?
[2012-09-25 15:27:05 -0400] en0x: hi, i'm looking into chef because I want to integrate it in my AWS environment... i have one quick question. is there a way to see somewhere if the cookbook failed for specific server or group of servers with the reason etc?
[2012-09-25 15:27:39 -0400] tknerr: e.g. i have a "mysql" service resource declared with `action :nothing`, and somewhere else I have `notifies :restart, resources(:service => "mysql"), :immediately`
[2012-09-25 15:28:27 -0400] tknerr: I would have expected that `it { should restart_service 'mysql' }` should pass
[2012-09-25 15:29:15 -0400] tknerr: but in fact it fails
[2012-09-25 15:30:09 -0400] tknerr: `it { should nothing_service 'mysql' }` passes, so can I conclude that chefspec currently does not consider subscriptions / notifications?
[2012-09-25 15:33:54 -0400] drnfx: Hello all! Does chef check to see if you have already installed items in your run list prior to running automatically, or does that have to be configured?
[2012-09-25 15:35:50 -0400] cheeseplus: drnfx: it will always go through the run list but if configs haven't changed or packages already installed then it won't do anything
[2012-09-25 15:36:33 -0400] cheeseplus: but it doesn't go "oh I've already run this recipe, I'm not going to run it again"
[2012-09-25 15:38:05 -0400] AikiLinux: the docs says that if an item exist chef does not alter it, but I am not certain
[2012-09-25 15:45:07 -0400] drnfx: Ah OKay, I was just wondering becuase I have a recipe to configure ruby, but when i re-ran chef-client to install the latest recipe in the run list, it appeared to be compiling again.
[2012-09-25 15:55:09 -0400] leifmadsen: what is the best way to get my library to output information to the console for debugging purposes? Just using Chef::Log.info("foobar") seems to output nothing... :\
[2012-09-25 16:02:14 -0400] Pushnell: leifmadsen: You can just 'log "important things happening"'
[2012-09-25 16:05:37 -0400] leifmadsen: Pushnell: thanks -- tested and seems like something must be getting blocked or not enabled, so I'll have to figure out an alternate way of getting log output
[2012-09-25 16:58:21 -0400] Unicron_: hi guys, I have a run list with one recipe named recipe[ocl-users::systems] which you can see here http://pastebin.com/AxLxDEjA
[2012-09-25 16:59:30 -0400] Unicron_: This needs the ruby-shadow gem building and so requires build-essential installing first - but this doesn't happen and the gem tries to compile before build-essential is installed.
[2012-09-25 16:59:50 -0400] Unicron_: I thought the recipe was read from top to bottom and the order respected?  seems not to be the case ehre
[2012-09-25 16:59:56 -0400] Unicron_: s/ehre/here/
[2012-09-25 17:01:07 -0400] Unicron_: should I be putting the build-essential bits in the chef_gem block before action :install?
[2012-09-25 17:03:56 -0400] cheeseplus: Is there a way to get knife ssh to be aware of your ssh config?
[2012-09-25 17:04:15 -0400] cheeseplus: and/or can the values for identity file be set in knife.rb?
[2012-09-25 17:09:38 -0400] yfeldblum: Unicron_, http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-09-25 17:12:04 -0400] justinlilly: hey folks. Anyone have somewhere I can read about best practices of configuring nagios via chef for amazon infrastructure? (SQS, RDS, ElastiCache, etc)
[2012-09-25 17:13:10 -0400] Unicron_: thanks yfeldblum, ill check it out
[2012-09-25 17:16:07 -0400] j-v-e: Howdy gentlemen
[2012-09-25 17:16:38 -0400] j-v-e: quick module question: I have two module in the same cookbook. moduleA and moduleB. moduleB wants to call a function from moduleA. Is there a simple way to do that ?
[2012-09-25 17:18:01 -0400] yfeldblum: j-v-e, show an example?
[2012-09-25 17:23:07 -0400] j-v-e: yfeldblum: https://gist.github.com/3783268
[2012-09-25 17:25:20 -0400] yfeldblum: j-v-e, how could that possibly work? - ModuleB doesn't include ModuleA!
[2012-09-25 17:25:45 -0400] j-v-e: sysadmin doing ruby fail :)
[2012-09-25 17:26:00 -0400] bluepojo: is there a reason it's wrapped in Chef::Recipe?
[2012-09-25 17:26:38 -0400] j-v-e: probably not.
[2012-09-25 17:26:48 -0400] bluepojo: in that case remove that and all will work
[2012-09-25 17:26:49 -0400] j-v-e: how do I include moduleA in moduleB ?
[2012-09-25 17:26:54 -0400] bluepojo: just call include
[2012-09-25 17:26:56 -0400] bluepojo: like you did
[2012-09-25 17:26:59 -0400] bluepojo: but remove line 3 and 5
[2012-09-25 17:27:30 -0400] bluepojo: if you put it inside Chef::Recipe, that means that Chef::Recipe now has a method called funcA
[2012-09-25 17:27:36 -0400] bluepojo: not ModuleB
[2012-09-25 17:28:03 -0400] j-v-e: like that ? https://gist.github.com/3783268
[2012-09-25 17:28:06 -0400] j-v-e: still doesn't work
[2012-09-25 17:28:28 -0400] bluepojo: same error?
[2012-09-25 17:28:42 -0400] j-v-e: yep
[2012-09-25 17:28:53 -0400] bluepojo: let me write an example real fast
[2012-09-25 17:29:16 -0400] bluepojo: OH
[2012-09-25 17:29:17 -0400] bluepojo: I see
[2012-09-25 17:29:24 -0400] bluepojo: sec
[2012-09-25 17:29:52 -0400] bluepojo: you're working with modules in this case
[2012-09-25 17:29:58 -0400] bluepojo: but you're defining instance methods
[2012-09-25 17:30:33 -0400] bluepojo: even if you do ModuleA.functA, it won't work
[2012-09-25 17:30:55 -0400] bluepojo: to define a module function like that, you need to prefix the method name with self.
[2012-09-25 17:31:12 -0400] bluepojo: or wrap the method definition with "class << self; # method def; end"
[2012-09-25 17:31:48 -0400] bluepojo: for example
[2012-09-25 17:31:49 -0400] bluepojo: https://gist.github.com/3783314
[2012-09-25 17:32:13 -0400] j-v-e: calling ModuleA.functA doesn't change anything
[2012-09-25 17:32:26 -0400] bluepojo: that's what I'm saying
[2012-09-25 17:32:35 -0400] j-v-e: k, let's try that
[2012-09-25 17:32:58 -0400] bluepojo: in order for you to be able to use these instance methods as a mixin, you need to include them on a class and instantiate the class
[2012-09-25 17:33:01 -0400] bluepojo: which I suppose is not what you want
[2012-09-25 17:36:07 -0400] j-v-e: what I want is to export funcB() to other cookbooks, but not all of the functions in ModuleA
[2012-09-25 17:36:47 -0400] j-v-e: ModuleA is used from within the cookbook itself,
[2012-09-25 17:37:13 -0400] bluepojo: I see
[2012-09-25 17:37:15 -0400] j-v-e: I just want to export one function from ModuleA to other cookbook, and I thought that I could do it using a separate module
[2012-09-25 17:37:25 -0400] j-v-e: but maybe there's a better way
[2012-09-25 17:37:32 -0400] bluepojo: Is there harm in sharing all the methods?
[2012-09-25 17:37:41 -0400] bluepojo: it's certainly simpler
[2012-09-25 17:38:21 -0400] bluepojo: btw: here's how you properly share class methods between modules
[2012-09-25 17:38:22 -0400] bluepojo: https://gist.github.com/3783314
[2012-09-25 17:38:23 -0400] bluepojo: updated the gist
[2012-09-25 17:38:44 -0400] bluepojo: though that still may not solve your problem if you're trying to isolate methods
[2012-09-25 17:38:48 -0400] bluepojo: cause that shares all methods
[2012-09-25 17:41:37 -0400] mamu: Hi, the exception/report handler gives you the status of the run , all_resources, updated resources etc. Is there a way that I can get this information per recipe that is part of that run ? Something like - Recipe A - success, recipe B - success Recipe N - failed (after which the run itself stops)
[2012-09-25 18:12:13 -0400] _0x783czar: Has anyone ever had trouble installing RabbitMQ on Ubuntu 12.04?  I can't get it to work and am not getting any significant error output.  It refuses to start the server, fails everytime
[2012-09-25 18:21:47 -0400] Hiryu: are there any books written on chef yet?
[2012-09-25 18:23:39 -0400] _0x783czar: Hiryu: http://shop.oreilly.com/product/0636920025146.do
[2012-09-25 18:24:20 -0400] Hiryu: youch, in another year?
[2012-09-25 18:24:27 -0400] Hiryu: well, looking forward to it regardless
[2012-09-25 18:45:21 -0400] erikh: _0x783czar: did you change the hostname on the box?
[2012-09-25 18:46:52 -0400] _0x783czar: erikh: haha yup just figured it out that was precisely the problem
[2012-09-25 18:47:20 -0400] erikh: yeah, rabbit is really pissy about that.
[2012-09-25 18:51:52 -0400] j-v-e: bluepojo: I'm still fighting with my modules :/ I can get it to work, but it requires `module_function` to make the functions of the module visible from the other cookbook
[2012-09-25 18:52:17 -0400] j-v-e: problem is, with `module_function`, I'm outside of the Chef class and I can't call any of the chef methods anymore
[2012-09-25 18:52:38 -0400] j-v-e: How do I access a node attributes directly ? Chef::Node('something') ?
[2012-09-25 19:05:55 -0400] bluepojo: j-v-e: Perhaps pass those attributes as a parameter to the method
[2012-09-25 19:06:10 -0400] bluepojo: j-v-e: the simplest is just to pass node
[2012-09-25 19:06:22 -0400] bluepojo: but if you have a specific attribute, you should pass that
[2012-09-25 19:09:55 -0400] ekristen: hi
[2012-09-25 19:10:07 -0400] ekristen: nginx is failing to install due to a cpu attribute missing
[2012-09-25 19:11:17 -0400] erikh: class Chef::Recipe; include MyModule; end
[2012-09-25 19:11:17 -0400] yfeldblum: j-v-e, in ruby, modules are used for a few different things; and depending on the purpose for which you are using them, you use them in different ways
[2012-09-25 19:11:27 -0400] erikh: gets around needing module_function
[2012-09-25 19:11:51 -0400] erikh: you can alternatively declare your methods as 'def self.some_method', which isn't the same as module_function but may achieve the desired effect.
[2012-09-25 19:11:52 -0400] ekristen: it seems to have been fixed in the qa branch but not the master branch --- how can I alter my local nginx cookbook copy
[2012-09-25 19:12:21 -0400] yfeldblum: j-v-e, the first use is to have methods that are exposed off a constant, so that you can do something like this: MyWellKnownConstant.some_method_1(arg1, arg2)
[2012-09-25 19:13:35 -0400] yfeldblum: j-v-e, for that type of use, just start the module off with module_function (or start it off with `extend self`, or wrap all the methods in a `class << self ; ... ; end` scope)
[2012-09-25 19:14:18 -0400] yfeldblum: j-v-e, the second use is to define instance methods which cannot be called directly, but which can be called on instances of a class if the module is mixed into that class
[2012-09-25 19:15:25 -0400] yfeldblum: j-v-e, for the second type of use, you will want to `include MyCoolModule` inside some other class, and then instances of that other class can call the methods defined in MyCoolModule ... but for this type of use, do not use module_function (or the variants of it) that are specific for the first way of using modules
[2012-09-25 19:16:36 -0400] yfeldblum: j-v-e, in your particular case, you might start out with the first type of usage - methods being exposed off of a well-known constant - unless and until there's a real need to do something else
[2012-09-25 19:17:14 -0400] yfeldblum: j-v-e, when you do that, you always have to call the methods by prefixing them with the constant and the period (a la: MyWellKnownConstant.some_method)
[2012-09-25 19:21:12 -0400] mdeboard: On this page here, I'm confused about the following: "This validator client creates a new API client that the node can then use for all future request. A check is done to see if a client key exists on the node (typically, /etc/chef/client.pem)" ... what client key is client.pem? validator client? api client? validator client is ridic confusing given there's a validator.pem and client.pem. Is validator client... both
[2012-09-25 19:21:12 -0400] mdeboard:  of those? Or what.
[2012-09-25 19:27:27 -0400] jessicab: mdeboard: its a different key, created by chef-client the first time it runs.. chef-client uses validator.pem to create it, but first it checks to see if client.pem already exists
[2012-09-25 19:27:43 -0400] mdeboard: What's a different key?
[2012-09-25 19:27:55 -0400] mdeboard: Not trolling, there's just a ton of .pem files here
[2012-09-25 19:28:06 -0400] mdeboard: mdeboard.pem, <organization>-validator.pem, client.pem, validator.pem
[2012-09-25 19:28:08 -0400] jessicab: client.pem is a different key from your users api key, and the validation key.. nah, no worries, totally confused me at first too
[2012-09-25 19:28:46 -0400] jessicab: org-validation.pem is just hosteds version of validatior.pem btw.. you shouldnt have one if youre on open source
[2012-09-25 19:29:11 -0400] mdeboard: I'm just using hosted right now to et my head around chef
[2012-09-25 19:29:21 -0400] mdeboard: (which is taking awhile)
[2012-09-25 19:29:37 -0400] jessicab: ah ok, well the client.pem is created for each node, so you only need to copy over the org-validator to create a the client.pem for a new node
[2012-09-25 19:29:58 -0400] mdeboard: so cp org-validator /etc/chef/client.pem ?
[2012-09-25 19:30:07 -0400] mdeboard: headdesk
[2012-09-25 19:30:18 -0400] jessicab: i might be biased :P but i think this is a good place to start.. if you havent seen this already http://wiki.opscode.com/display/chef/Fast+Start+Guide
[2012-09-25 19:30:37 -0400] bluepojo: the validator has 1 purpose: create a new client
[2012-09-25 19:30:57 -0400] mdeboard: Been through it, I was actually using chef just fine last week, wrote some cookbooks, was spinning up servers
[2012-09-25 19:30:59 -0400] bluepojo: which creates that box's client
[2012-09-25 19:31:10 -0400] mdeboard: then I did something, which I don't remember, and now I'm getting nothing but 401 errors
[2012-09-25 19:31:11 -0400] jessicab: well.. its technically cp org-validator.pem /etc/chef/validation.pem.. but you could also have knife set it up for you, which is what the guide has you do instead
[2012-09-25 19:31:55 -0400] jessicab: there are actually 3 different 401 errors, could be a few things going on - http://wiki.opscode.com/display/chef/Common+Errors
[2012-09-25 19:32:36 -0400] mdeboard: right, and this page is what has prompted my confusion
[2012-09-25 19:33:06 -0400] j-v-e: yfeldblum: problem is that `extend self` or `module_function` take me out of the chef scope, and I can't use any of the chef resources anymore. I get NameError: undefined local variable or method `node' for
[2012-09-25 19:33:42 -0400] mdeboard: I think part of the problem si that I'm reusing node names, after a node has been deleted I'm trying to reuse that name
[2012-09-25 19:33:48 -0400] mdeboard: also nodes can't match usernames? wut
[2012-09-25 19:34:21 -0400] jessicab: mdeboard: yea.. i hate that bug, i hear were about to fix it.. that only happens with really common names though like 'staging'
[2012-09-25 19:34:42 -0400] jessicab: mdeboard: you can reuse your own node names though, just make sure you do a knife node delete NAME and a knife client delete NAME first
[2012-09-25 19:36:05 -0400] jessicab: mdeboard: and youll need to delete the /etc/chef/client.pem if this node already has one too, so itll create it when it creates the node/client
[2012-09-25 19:36:10 -0400] mdeboard: hooray a different error
[2012-09-25 19:36:13 -0400] mdeboard: progress
[2012-09-25 19:36:32 -0400] jessicab: haha, well thats something
[2012-09-25 19:37:39 -0400] yfeldblum: j-v-e, of course ... and that's not a problem: it's how all ruby modules work!
[2012-09-25 19:38:08 -0400] yfeldblum: j-v-e, you can always pass in the node as an argument
[2012-09-25 19:38:15 -0400] j-v-e: right, but does that mean that I must use Chef::Something in my module or can I reimport it ?
[2012-09-25 19:38:33 -0400] yfeldblum: j-v-e, i don't even know what that question means ...
[2012-09-25 19:39:05 -0400] yfeldblum: j-v-e, from a recipe, you can run: `MyConstant.my_method(node)` ... but of course you have to `module MyConstant ; def my_method(node) ... ` in the library
[2012-09-25 19:39:39 -0400] j-v-e: right. and that works fine. the problem is to run my_method() from another cookbook
[2012-09-25 19:41:00 -0400] j-v-e: I'll figure it out eventually :) my lack of formal coding training is the issue
[2012-09-25 19:41:03 -0400] yfeldblum: j-v-e, right, and in another cookbook, `MyConstant.my_method(node)` should work
[2012-09-25 19:42:13 -0400] cap10morgan: isn't there a node.has_role?('role_name') kinda thing you can do?
[2012-09-25 19:42:38 -0400] cap10morgan: I coulda sworn I read about it, but I can't find it now
[2012-09-25 19:44:46 -0400] yfeldblum: cap10morgan, probably node.roles.include?("role_name")
[2012-09-25 19:45:14 -0400] cap10morgan: yfeldblum: yep, that's probably it. thanks.
[2012-09-25 19:48:02 -0400] lusis: okay I've been over this 20 times and I can't find the logic in chef-server that shows where it creates the validation.pem at startup if missing
[2012-09-25 19:48:10 -0400] lusis: please point me in the right direction before I punch a kitten
[2012-09-25 19:48:17 -0400] bluepojo: lusis: it doesn't create the validation.pem
[2012-09-25 19:48:20 -0400] bluepojo: it creates the client.pem
[2012-09-25 19:48:32 -0400] bluepojo: the validation.pem is provided by the person running knife bootstrap
[2012-09-25 19:49:05 -0400] lusis: no. If you restart chef-server-webui and there's no validation.pem in the /etc/chef directory, it creates one
[2012-09-25 19:49:31 -0400] bluepojo: oh you mean on the chef server itself
[2012-09-25 19:49:32 -0400] bluepojo: not on a node
[2012-09-25 19:49:33 -0400] bluepojo: my bad
[2012-09-25 19:49:33 -0400] lusis: yes
[2012-09-25 19:49:36 -0400] lusis: no worries
[2012-09-25 19:49:36 -0400] lusis: heh
[2012-09-25 19:50:01 -0400] lusis: part of our bootstrap process removes validation.pem and we're booting a chef server from a chef-server
[2012-09-25 19:50:25 -0400] lusis: so neat little thing where it actually erases the validation.pem at the end of the run but it's erasing the one chef-server-webui creates
[2012-09-25 19:50:29 -0400] lusis: ;)
[2012-09-25 19:50:38 -0400] yfeldblum: lusis, https://github.com/opscode/chef/blob/master/chef-server-api/config/init.rb#L83-84 ?
[2012-09-25 19:50:50 -0400] lusis: fml
[2012-09-25 19:50:53 -0400] lusis: I bet that's it
[2012-09-25 19:51:13 -0400] yfeldblum: lusis, https://github.com/opscode/chef/blob/master/chef/lib/chef/certificate.rb#L98-131
[2012-09-25 19:51:55 -0400] lusis: tehre we go. I just wanted to know the damn setting for the filename
[2012-09-25 19:52:23 -0400] lusis: yfeldblum: danke
[2012-09-25 19:52:46 -0400] yfeldblum: lusis, no probs
[2012-09-25 19:53:17 -0400] lusis: so it's the same syntax as knife.rb
[2012-09-25 19:53:20 -0400] lusis: which makes sense
[2012-09-25 19:53:24 -0400] lusis: I can override that in a template
[2012-09-25 19:53:28 -0400] lusis: so it doesn't get purged
[2012-09-25 19:53:29 -0400] lusis: woot
[2012-09-25 19:54:06 -0400] lusis: or maybe not
[2012-09-25 19:54:08 -0400] lusis: hrmm
[2012-09-25 19:54:45 -0400] mdeboard: Does Chef now use POST instead of PUT when creating new clients? I'm following the steps here http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-403Forbidden , but I don't actually see any of the lines it suggest I might
[2012-09-25 19:54:54 -0400] lusis: crap
[2012-09-25 19:55:41 -0400] mdeboard: er, derp attack. Nevermind.
[2012-09-25 19:57:33 -0400] lusis: nm it created it. woot.
[2012-09-25 19:57:46 -0400] newb: Where are cookbook files stored on the Chef server?
[2012-09-25 19:58:53 -0400] _0x783czar: How do I change the port which the Chef-Server webui uses?
[2012-09-25 20:00:50 -0400] Zenigor: In the upcoming month my company will be rolling out an almost identical rails app as our current production one. Would I just be able to rip out the app specific stuff in recipes and move those into app-specific roles or is it advised to handle two different chef repos?
[2012-09-25 20:01:24 -0400] cwj: newb: cookbook contents are stored in the chef-server's couchdb
[2012-09-25 20:02:28 -0400] newb: cwj: How can I access that?
[2012-09-25 20:03:21 -0400] cwj: newb: what are you trying to accomplish?
[2012-09-25 20:04:06 -0400] newb: I'm trying to send source code files to a node.
[2012-09-25 20:04:14 -0400] cwj: the couchdb instance can be accessed directly via http rest api, but generally speaking you probably shouldn't do that
[2012-09-25 20:04:35 -0400] cwj: is the source code stored in a revision control repository?
[2012-09-25 20:04:42 -0400] newb: Currently I'm using a Python script to grab files from a repository
[2012-09-25 20:04:47 -0400] newb: Yes, Perforce.
[2012-09-25 20:05:23 -0400] newb: Can I use the Deploy resource with that?
[2012-09-25 20:05:42 -0400] cwj: if you were using subversion or git you could, but chef doesn't support perforce at this time
[2012-09-25 20:06:03 -0400] cwj: if you already have a python script that works, why not have chef install that script and then execute it?
[2012-09-25 20:06:37 -0400] newb: Is it possible to run knife on a Windows machine without having Chef installed?
[2012-09-25 20:06:54 -0400] cwj: when you include the script in your chef cookbook, you can tell chef to install it using a cookbook_file resource, no need to access the couchdb directly
[2012-09-25 20:07:11 -0400] cwj: i dont know anything about running chef on windows
[2012-09-25 20:07:27 -0400] newb: Is it possible to run knife on Unix without installing Chef?
[2012-09-25 20:07:38 -0400] cwj: knife is usually installed as part of the chef installation, it would probably be a lot of work to install it without installing chef
[2012-09-25 20:07:46 -0400] cwj: they depend on many of the same libraries, etc
[2012-09-25 20:07:54 -0400] cwj: you just configure them seperately
[2012-09-25 20:07:54 -0400] timsmith: Anyone with experience upgrading from Chef .9 to 10?  I've upgraded my sever, but I'm curious if I need to immediately upgrade my clients.  The .9 clients seem to work just fine at the moment on the 10.14.2 server.
[2012-09-25 20:07:58 -0400] newb: A windows machine running unit tests, needs to grab files, zip them and make them accessible to a node.
[2012-09-25 20:08:38 -0400] newb: Right now I'm zipping them and putting them in my cookbook's /files/ folder.. then uploading the cookbook and running it on the node.
[2012-09-25 20:08:53 -0400] cwj: sounds like a lot of cookbook churn
[2012-09-25 20:09:13 -0400] newb: Yeah. Aside from getting files from Git or a URL, is there any other way?
[2012-09-25 20:09:51 -0400] lusis: yfeldblum: thanks again. suppose I should PR this thing
[2012-09-25 20:10:02 -0400] cwj: newb: this might be relevant http://www.youtube.com/watch?v=9v1Hnl3ZyBg
[2012-09-25 20:10:06 -0400] lusis: I looked for an hour and couldn't find that damn thing
[2012-09-25 20:10:43 -0400] cwj: i havent used rundeck myself but from what you are describing it sounds like it could be a fit
[2012-09-25 20:12:24 -0400] newb: Alright, thanks. I'll look into that.
[2012-09-25 20:13:12 -0400] yfeldblum: lusis, just gotta know where to look ^-^
[2012-09-25 20:13:32 -0400] lusis: yfeldblum: and today, I did not know where to look. The shame burns me
[2012-09-25 20:13:33 -0400] lusis: heh
[2012-09-25 20:13:40 -0400] lusis: I never dive into server code that often
[2012-09-25 20:13:57 -0400] lusis: this was just an interesting race condition if you will
[2012-09-25 20:15:05 -0400] kallen: i got a letter from Orrick the other day, haven't lookt at it. wonder what it is..
[2012-09-25 20:15:09 -0400] kallen: ugh. mischan :>
[2012-09-25 20:15:45 -0400] jmartin: kallen: At least it wasn't from Oreck. That would have sucked.
[2012-09-25 20:15:48 -0400] kallen: :D
[2012-09-25 20:16:12 -0400] mhalligan: my google-fu is failing me here, is there a good cookbook out there for managing R? mostly I'm trying to see if anyone already has a good provider for managing R modules
[2012-09-25 20:28:33 -0400] j|_: hrm. where should I start looking when [rabbitmq, chef-server, chef-solr, chef-expander] are all running, yet knife search yields no results..?
[2012-09-25 20:29:34 -0400] jtimberman: mhalligan: i believe ssd7 had one.
[2012-09-25 20:31:04 -0400] jtimberman: mhalligan: https://github.com/stevendanna/cookbook-r
[2012-09-25 20:31:38 -0400] mhalligan: woot, thanks :)
[2012-09-25 20:33:06 -0400] mhalligan: R (like chef) is not a name very-well optimized for googling
[2012-09-25 20:35:07 -0400] justinlilly: j|_: What is your search query?
[2012-09-25 20:35:10 -0400] drnfx: How do I show the versions of cookbook uploaded to chef-server. I am modifying my cookbooks but everytime i upload its [0.1.0]
[2012-09-25 20:35:37 -0400] j|_: justinlilly: knife search node 'name:<name of a node returned from knife node list>'
[2012-09-25 20:35:47 -0400] j|_: justinlilly: or knife search node '*:*'
[2012-09-25 20:36:00 -0400] j|_: or knife search node 'name:*'
[2012-09-25 20:36:09 -0400] senthilr: mhalligan:
[2012-09-25 20:36:09 -0400] senthilr: github.com: chef "R" statistics
[2012-09-25 20:36:18 -0400] justinlilly: odd. Are those nodes registered with opscode?
[2012-09-25 20:36:19 -0400] senthilr: searching like that, provides the right links
[2012-09-25 20:36:47 -0400] mhalligan: oh wow, way better, thanks!
[2012-09-25 20:36:51 -0400] mhalligan: derp
[2012-09-25 20:40:13 -0400] j|_: justinlilly: using open chef, not hosted chef.
[2012-09-25 20:40:41 -0400] justinlilly: ahh. sorry. my limited understanding is only for hosted chef.
[2012-09-25 20:42:08 -0400] AdrianM: hi I have a question about implementing a chef_handler that sends email upon encountering an exception
[2012-09-25 20:54:33 -0400] j|_: for the record, I believe the answer lies with in a gem load error that I see inside of the chef-expander logfile
[2012-09-25 20:57:01 -0400] haidangwa: Hi All! Has anybody implemented "geminabox" or "geminaboxplus"? We've been using the rubygems-mirror gem to mirror rubygems.org behind our firewall and like everyone else, have run into the SystemStackError when "gem generate_index" is run against the full gem set. Any known scaling problems with geminabox or geminaboxplus that you know of?
[2012-09-25 21:01:30 -0400] j|_: hrm, I see in the chat logs someone was run into this before.. but I don't see how they fixed it.
[2012-09-25 21:02:56 -0400] j|_: ah, no, he says right there "multiple versions of eventmachine gem"
[2012-09-25 21:22:28 -0400] sunil__: Whats the recommended interval for chef-client I know default is like 30 minutes, is there any major harm in running it every 5 or 10 minutes?  Considering theres minimal server level config changes happening?
[2012-09-25 21:22:57 -0400] jtimberman: sunil__: if there's minimal changes why run more often?
[2012-09-25 21:23:56 -0400] JasonF: sunil__: the big limit is going to be load on your chef server.
[2012-09-25 21:24:13 -0400] sunil__: well I want changes to propagate faster when pushed to the server
[2012-09-25 21:29:27 -0400] chip-: If you need them to happen to a particular host group very quickly, you could use knife ssh to trigger the run.
[2012-09-25 21:30:50 -0400] j|_: so, for google-food: if /var/log/chef/expander.log: "can't activate eventmachine" then use 'gem' to reinstall the 'eventmachine' gem with a single working version.
[2012-09-25 21:33:23 -0400] sunil__: @chip can I do * or use regex on node names to trigger chef-client reload?
[2012-09-25 21:34:36 -0400] sunil__: is that better approach than lowering the time on chef-client?
[2012-09-25 21:35:24 -0400] chip-: sunil__: you can use search terms in knife ssh. It's really cool.
[2012-09-25 21:36:16 -0400] chip-: so for instance, something like knife ssh "chef_environment:foo AND role:bar" "sudo /etc/init.d/chef-client restart" -a cloud.public_hostname -x username
[2012-09-25 21:36:23 -0400] chip-: (apologies if I mangled some syntax there, it's from memory)
[2012-09-25 21:36:54 -0400] sunil__: got it I will test this approach..
[2012-09-25 21:37:15 -0400] chip-: that command would find all hosts in environment foo with role bar, and force a chef-client run, logging in via the address stored at node attribute cloud.public_hostname and user username
[2012-09-25 21:37:38 -0400] sunil__: what about being able to use just regex on node name? web-prod[1-10]
[2012-09-25 21:37:43 -0400] Axsuul: For librarian-chef, are we allowed to use :ref => "1.0.0" to target the version numbers in the git repo's metadata.rb?
[2012-09-25 21:39:11 -0400] sunil__: Thanks chip, thats pretty handy
[2012-09-25 21:39:45 -0400] chip-: It's a great big loaded gun aimed at your foot, but yes. Very handy.
[2012-09-25 21:39:59 -0400] _0x783czar: jtimberman: I was wondering if you've heard of a problem with setting the sudoers file on ubuntu with chef?  my recipe (which uses a cookbook file to set the sudoers file) works fine on centos, but fails on ubuntu.  I know it's not the contents of the file, because if I inject it manually with visudo it works just fine, but sudo breaks everytime I do it with chef.
[2012-09-25 21:41:35 -0400] chip-: sunil__: if you wanted to use regex instead, you could use that to feed a while read line; do loop in a bash script that calls ssh to restart the chef-client daemon.
[2012-09-25 21:42:35 -0400] chip-: knife ssh + search will be faster though, since it runs in parallel.
[2012-09-25 21:43:25 -0400] sunil__: I was wondering because knife does let you bulk delete and manage nodes using regex.. but yeah script would be the classic way..
[2012-09-25 21:43:38 -0400] chip-: You might be able to, I haven't tried.
[2012-09-25 21:44:05 -0400] joshhertz1: I like the bash do loop a little better. It lets you check the gun chamber before unloading if you have it echo the commands you're going to run through first.
[2012-09-25 21:45:08 -0400] chip-: No reason you can't echo with knife ssh.
[2012-09-25 21:46:04 -0400] chip-: But I've definitely hurt myself a few times.
[2012-09-25 21:46:10 -0400] chip-: (tl;dr: shutdown -r != shutdown -h. That goes double on instance-backed EC2 nodes.)
[2012-09-25 21:47:20 -0400] sunil__: can you also call knife from other scripts?  I have been using it to build servers and I love itsay if I want to write a tool to monitor a queue and launch more nodes as it grows.can I just dynamically build knife commands considering all the variables are known?
[2012-09-25 21:55:07 -0400] erikh: yep, you can even drive knife commands straight from ruby without shelling out
[2012-09-25 21:55:16 -0400] erikh: it takes a bit more work, but each knife command is just a class with a #run method
[2012-09-25 21:56:46 -0400] sunil__: thanks @erikh that is great.
[2012-09-25 22:04:38 -0400] bluepojo: sinil__ erikh: note that not all knife components are written with the intention that they will be run from a ruby script and occasionally have issues
[2012-09-25 22:04:45 -0400] bluepojo: like they have inconsistent use of the Knife::UI object
[2012-09-25 22:04:52 -0400] bluepojo: sometimes they call puts instead, for example
[2012-09-25 22:13:17 -0400] Axsuul: Anyone using the apt cookbook with the postgresql cookbook? It doesn't appear to update packages before installing postgresql
[2012-09-25 22:24:30 -0400] erikh: oh, sure, but that's what the code is for
[2012-09-25 22:28:26 -0400] justinlilly: If I `include_recipe "mysql::client"` in my recipe, will that automatically install it? Or does that just provide me access to the things inside that recipe?
[2012-09-25 22:29:24 -0400] Pushnell: juliancdunn: it will run the mysql::client recipe immediately which I believe installs the mysql client.  any libraries defined in the mysql cookbook will also be available.
[2012-09-25 22:29:31 -0400] Pushnell: gah, supposed to be justinlilly
[2012-09-25 22:29:50 -0400] bluepojo: justinlilly: you should always read the recipes you're running on your boxes
[2012-09-25 22:30:48 -0400] _0x783czar: How do I change what port the Chef-Server WebUI listens on
[2012-09-25 22:31:13 -0400] justinlilly: Pushnell: thanks.
[2012-09-25 22:31:44 -0400] justinlilly: bluepojo: thanks as well. :)
[2012-09-25 22:37:55 -0400] justinlilly: How can I determine which version of a recipe a given node is using? I can't seem to find out via knife.
[2012-09-25 22:38:09 -0400] justinlilly: I've tried via knife and also ohai which doesn't seem to do it for me.
[2012-09-25 22:39:03 -0400] JasonF: one clever way, although there are some cases it could be inaccurate
[2012-09-25 22:39:14 -0400] JasonF: is look in /var/cache/chef/cookbooks/ and see what cookbook version is cached there
[2012-09-25 22:39:45 -0400] justinlilly: hrm. Seems to be the right version.
[2012-09-25 22:40:38 -0400] justinlilly: I have cookbook A which `depends "mysql"` and `include_recipe "mysql::client"`, but knife search node "recipes:mysql\:\:client" or mysql::client or mysql .. all return 0 entries.
[2012-09-25 22:41:32 -0400] erikh: include_recipe won't show up in that list, I don't think.
[2012-09-25 22:41:44 -0400] justinlilly: :(
[2012-09-25 22:41:53 -0400] justinlilly: oh well. thanks. :)
[2012-09-25 22:51:32 -0400] Houdini: What is run_state?
[2012-09-25 22:53:39 -0400] Houdini: I mean node.run_state, can't find any documentation about it
[2012-09-25 23:01:35 -0400] Axsuul: Houdini: I think it defines the environment variables
[2012-09-25 23:03:29 -0400] Houdini: Axsuul: do you know how to set up run_state?
[2012-09-25 23:04:45 -0400] Axsuul: Houdini: ive seen it in a cookbook somewhere, no exactly sure how to use it though, where are you seeing it beind used
[2012-09-25 23:06:21 -0400] Houdini: https://github.com/opscode-cookbooks/nginx/blob/master/recipes/source.rb line 69
[2012-09-25 23:06:26 -0400] Houdini: node.run_state['nginx_force_recompile'] = false
[2012-09-25 23:06:43 -0400] Houdini: it's some kind of one time action, but have no idea how to trigger it
[2012-09-25 23:07:53 -0400] Axsuul: Houdini: this is where I saw it: https://github.com/opscode/cookbooks/blob/master/application/recipes/rails.rb#L24
[2012-09-25 23:08:19 -0400] Axsuul: Houdini: i think its being used like a session variable
[2012-09-25 23:08:26 -0400] Axsuul: Houdini: to keep track of state across recipes
[2012-09-25 23:09:01 -0400] yfeldblum: run_state is an ephemeral Hash that lives for the duration of your chef-client/chef-solo run (it's not saved anywhere) and is used internally in chef to track the state of the chef-client/chef-solo run
[2012-09-25 23:09:53 -0400] Houdini: yfeldblum: thanks for explanation. However how to recompile nginx in that recipe? I mean why how to set up nginx_force_recompile?
[2012-09-25 23:10:22 -0400] Axsuul: yfeldblum: I have a question about chef-librarian (great work btw), how does outdated work exactly for cookbooks pointing to a git repo
[2012-09-25 23:10:35 -0400] Axsuul: yfeldblum: i have some cookbooks that I've updated the version for in metadata.rb, but outdated doesn't pick them up
[2012-09-25 23:10:57 -0400] yfeldblum: Houdini, that particular cookbook is a little complex, so you'll want to read the source code carefully
[2012-09-25 23:11:43 -0400] yfeldblum: Axsuul, outdated is really intended for cookbooks from the community-site (or any endpoint with the same API)
[2012-09-25 23:13:24 -0400] Axsuul: yfeldblum: ah, gotcha
[2012-09-25 23:14:03 -0400] yfeldblum: Axsuul, in general it's a better idea to track package releases (such as cookbooks released to the community site), rather than to track unreleased packages in source control, and so librarian-chef expects that you will mostly be using cookbooks from the community site and that you will be managing very carefully any cookbooks that come from git
[2012-09-25 23:15:55 -0400] Axsuul: yfeldblum: col thanks
[2012-09-25 23:19:30 -0400] Axsuul: Hmm it appears opscode user sign up is broken =/
[2012-09-25 23:32:32 -0400] coderanger: Axsuul: What are you seeing?
[2012-09-25 23:33:03 -0400] Axsuul: coderanger: it as my fault, i didn't see the error message (email already taken). wish it was another color so it was more noticeable
[2012-09-25 23:48:28 -0400] addisonj: Hey, I am migrating from open source chef to hosted chef, following this guide: http://wiki.opscode.com/display/chef/Migrating+to+Hosted+Chef+from+an+Open+Source+Chef+Server+implementation, when I try and upload my nodes, I get this error: Chef::Exceptions::ValidationFailed: Option name's value ip-10-xxx-xx-2xx.us-west-2.compute.internal does not match regular expression /^[\-[:alnum:]_]+$/

[2012-09-11 00:00:06 -0400] Liku: rava: I think it's a problem in that that I'm trying to run sudo with data from array. But it have to work (
[2012-09-11 00:00:16 -0400] rava: miah: that would be nice to look through.
[2012-09-11 00:00:45 -0400] rava: miah: nagios is such a beast..
[2012-09-11 00:00:52 -0400] miah: https://github.com/miah/nagios/tree/refactor
[2012-09-11 00:02:02 -0400] miah: im working on a bunch of crazy stuff to gather up details from databags with or without search and the possibility of merging some things. not all nodes may have node objects, and not all contacts may be users etc.
[2012-09-11 00:02:02 -0400] rava: miah: thanks
[2012-09-11 00:02:49 -0400] rava: miah: yeah, that's something i ran into when i was toying with writing my own
[2012-09-11 00:03:13 -0400] rava: miah: we're kinda evil in that we have vendors as contacts in our nagios config for the services of theirs nagios monitors :)
[2012-09-11 00:03:21 -0400] Liku: maybe is someone else who can help me?
[2012-09-11 00:03:39 -0400] _0x783czar: btm: Updated, thanks for the update, I know from expecience how little bugs can get in there.  Thanks for the great work you guys to at opscode.
[2012-09-11 00:03:43 -0400] miah: i have a bunch of commits i need to push up for that book too
[2012-09-11 00:03:49 -0400] rava: Liku: link to the cookbook you're using
[2012-09-11 00:03:57 -0400] miah: i've been working on the gather and config scripts today
[2012-09-11 00:03:59 -0400] rava: Liku: im looking at mine and i think we're using different cookbooks
[2012-09-11 00:04:14 -0400] _0x783czar: btm: I just just a bit frustraded :p
[2012-09-11 00:04:17 -0400] Liku: https://github.com/opscode-cookbooks/sudo
[2012-09-11 00:04:39 -0400] rava: hrm, this is the one im using
[2012-09-11 00:05:17 -0400] miah: Liku: do you have a users databag? do some of the users in that data bag have a "enable_sudo" attribute?
[2012-09-11 00:05:33 -0400] miah: if no, that would be why the array is empty and there is nothing to iterate over
[2012-09-11 00:06:07 -0400] Liku: rava: yes, I have it
[2012-09-11 00:06:14 -0400] Liku: and  it's not empty
[2012-09-11 00:06:53 -0400] Liku: maybe I write that in other way?
[2012-09-11 00:07:09 -0400] rava: Liku: did you try the search through shef?
[2012-09-11 00:07:16 -0400] rava: Liku: not using knife databag..
[2012-09-11 00:07:33 -0400] Liku: no, I didn't
[2012-09-11 00:08:01 -0400] rava: hop on a node and run shef -S yourchefserverurl
[2012-09-11 00:08:06 -0400] rava: and run the databag search that way
[2012-09-11 00:08:14 -0400] miah: knife search users 'enable_sudo:true'
[2012-09-11 00:08:34 -0400] miah: shef -z
[2012-09-11 00:08:51 -0400] rava: ^ that one
[2012-09-11 00:10:10 -0400] rava: thanks for all the help earlier everyone, heading out
[2012-09-11 00:10:47 -0400] miah: inside shef -z do this
[2012-09-11 00:10:56 -0400] miah: ata_bag(:users).each { |u| puts " #{data_bag_item(:users, u)['enable_sudo']}"
[2012-09-11 00:10:58 -0400] miah: doh
[2012-09-11 00:11:03 -0400] miah: data_bag(:users).each { |u| puts " #{data_bag_item(:users, u)['enable_sudo']}"
[2012-09-11 00:11:26 -0400] miah: and of course missing trailing }
[2012-09-11 00:11:34 -0400] miah: you get the idea..
[2012-09-11 00:11:38 -0400] rava: heh
[2012-09-11 00:11:57 -0400] miah: working with data bags directly (without search) isn't too hard
[2012-09-11 00:12:17 -0400] Liku: what shall I write after shef -z?
[2012-09-11 00:12:28 -0400] z: ^ what miah was writing above
[2012-09-11 00:12:50 -0400] miah: Liku: data_bag(:users).each { |u| puts "#{ data_bag_item(:users, u)['enable_sudo'] }" }
[2012-09-11 00:13:02 -0400] Liku: moment
[2012-09-11 00:13:08 -0400] miah: that will print out each user that has that attribute
[2012-09-11 00:13:24 -0400] miah: or well, it will print out the attribute and then the array of users
[2012-09-11 00:13:38 -0400] Liku: *searching*
[2012-09-11 00:14:09 -0400] miah: i've been doing lots of databag fun because i've been making the nagios book work with chef solo (because testing is awesome)
[2012-09-11 00:14:44 -0400] miah: ok. i have to go to the park for a moment and get fresh air. good luck. =)
[2012-09-11 00:15:21 -0400] Liku: I'm getting the result
[2012-09-11 00:15:43 -0400] Liku: so seems it works
[2012-09-11 00:15:56 -0400] Liku: but how to use it with sudo recipe?
[2012-09-11 00:16:15 -0400] Liku: miah: thank you :)
[2012-09-11 00:16:55 -0400] Liku: z: what do you think about that?
[2012-09-11 00:18:52 -0400] Liku: guys is someone around please?
[2012-09-11 00:19:49 -0400] flaccid_: no
[2012-09-11 00:20:18 -0400] Liku: (
[2012-09-11 00:28:31 -0400] patricioe: hey folks, any recommendation for orchestrating a bunch of chef scripts into more like cluster creation ? currently for Twitter-Storm I have different roles  but I'm looking more into creating a cluster with boxes of different roles.
[2012-09-11 00:28:51 -0400] patricioe: something that pops in a google search is Ironfan
[2012-09-11 00:40:57 -0400] _0x783czar: what was the last version of 10.12.x?
[2012-09-11 00:41:08 -0400] manuel__: people
[2012-09-11 00:41:14 -0400] manuel__: what is wrong with knife bootstrap?
[2012-09-11 00:41:25 -0400] manuel__: it keeps telling me that it's broekn
[2012-09-11 00:41:44 -0400] manuel__: 10.0.251.165 Downloading Chef ubuntu12.04-gems for ubuntu...
[2012-09-11 00:41:44 -0400] manuel__: 10.0.251.165 Unable to retrieve a valid package!
[2012-09-11 00:41:48 -0400] manuel__: why?
[2012-09-11 00:41:53 -0400] z: btm: /topic needs an update
[2012-09-11 00:42:23 -0400] manuel__: hello?
[2012-09-11 00:44:34 -0400] btm: z: still haven't finished the release.
[2012-09-11 00:44:52 -0400] z: btm: Ahhhhh misread you earlier, still waiting on Omnibus?
[2012-09-11 00:44:58 -0400] btm: _0x783czar: only 10.12.0
[2012-09-11 00:45:13 -0400] btm: manuel__: a gist (http://gist.github.com) of what you're running and the error would be helpful.
[2012-09-11 00:45:36 -0400] btm: z: yeah, jenkins is falling over with memory issues it looks like.
[2012-09-11 00:46:15 -0400] z: btm: funny, had those issues the other day myself, I think the appropriate saying is "Fscking Java!" in this situation
[2012-09-11 00:47:00 -0400] manuel__: how do I figure out which valid install.sh versions exist?
[2012-09-11 00:47:04 -0400] manuel__: -v version of course
[2012-09-11 00:47:10 -0400] manuel__: i do not want to isntall the omnibus one
[2012-09-11 00:47:55 -0400] z: manuel__: Is there something up with Omnibus which you don't like..?
[2012-09-11 00:48:18 -0400] manuel__: you know nvm
[2012-09-11 00:48:23 -0400] manuel__: for two hours opscode.com would just not work
[2012-09-11 01:00:53 -0400] jforest: that would be dissapointing
[2012-09-11 01:04:29 -0400] btm: manuel__: install.sh downloads omnibus packages. other than some debian packages, there isn't another common type of package. You could install from gems the old fashioned way.
[2012-09-11 01:05:23 -0400] manuel__: ths has ben happening all day long:
[2012-09-11 01:05:24 -0400] manuel__: https://gist.github.com/3695214
[2012-09-11 01:05:30 -0400] manuel__: see?  I cannot deploy machines because of this
[2012-09-11 01:05:44 -0400] manuel__: my it infrastructure is completely paralyzed
[2012-09-11 01:06:02 -0400] btm: manuel__: install.sh -v 10.14.0
[2012-09-11 01:06:09 -0400] flaccid_: z: domain registrars are much of a muchness if you ask me they all suck
[2012-09-11 01:06:15 -0400] z: flaccid_: I love mine.
[2012-09-11 01:06:26 -0400] flaccid_: URI z ?
[2012-09-11 01:06:29 -0400] z: flaccid_: dnsimple.com
[2012-09-11 01:06:37 -0400] btm: manuel__: nothing is down, the 10.14.2 packages aren't up yet.
[2012-09-11 01:06:37 -0400] manuel__: btm, thanks for the workaround but this problem should have never happened to begin with
[2012-09-11 01:06:47 -0400] flaccid_: thats not a URI, but i'll give it a go :
[2012-09-11 01:06:52 -0400] manuel__: why does the software not even try to instal an older version?
[2012-09-11 01:06:56 -0400] btm: flaccid_: :P
[2012-09-11 01:07:06 -0400] btm: manuel__: it's a shell script, not software.
[2012-09-11 01:07:24 -0400] manuel__: btm, ah, it's a shell script, not software
[2012-09-11 01:07:26 -0400] btm: manuel__: there isn't that much logic available.
[2012-09-11 01:07:27 -0400] flaccid_: btm: :p
[2012-09-11 01:07:48 -0400] manuel__: I see, great logic there
[2012-09-11 01:07:58 -0400] manuel__: consequently I should expect that sloppy opscode software deployments paralyze my IT infrastructure
[2012-09-11 01:08:30 -0400] manuel__: that's probably because there aren't for loops available in shell language
[2012-09-11 01:08:32 -0400] flaccid_: i smell a troll
[2012-09-11 01:08:34 -0400] manuel__: wait, there are
[2012-09-11 01:08:35 -0400] z: manuel__: helpful hint, and note I'm not Opscode, your attitude *sucks* and there are simple enough workarounds available. Sure its not ideal, but coming in here and being a dick about it isn't making anyone want to help.
[2012-09-11 01:08:42 -0400] btm: manuel__: you can always download Omnibus packages from http://www.opscode.com/chef/isntall
[2012-09-11 01:08:52 -0400] btm: http://www.opscode.com/chef/install
[2012-09-11 01:09:19 -0400] btm: manuel__: there are loops, there is not a JSON parsing library handy across heterogenous platforms.
[2012-09-11 01:09:24 -0400] flaccid_: this https://gist.github.com/3695214 does not even show how the error is established.
[2012-09-11 01:09:47 -0400] manuel__: meh, I'll use the workaround, but I would have expected better software quality from Opscode.
[2012-09-11 01:09:54 -0400] flaccid_: and btm ever heard of bug trackers?
[2012-09-11 01:10:01 -0400] btm: manuel__: I'm sorry you feel that way.
[2012-09-11 01:10:13 -0400] btm: flaccid_: yes? why?
[2012-09-11 01:10:16 -0400] flaccid_: err sorry manuel__
[2012-09-11 01:10:25 -0400] flaccid_: reading the wrong lines!
[2012-09-11 01:10:26 -0400] manuel__: no, you're not sorry btm.
[2012-09-11 01:10:34 -0400] manuel__: and that "it's not software, it's a shell script" is the most bullshit excuse.
[2012-09-11 01:10:40 -0400] manuel__: flaccid_ thanks.
[2012-09-11 01:11:14 -0400] flaccid_: now that i am quoting the right person, manuel__ have you submitted a dang bug yet?
[2012-09-11 01:11:38 -0400] manuel__: flaccid_ not yet.  I might.  Right now I need to fix my own infrastructure with the workaround.
[2012-09-11 01:12:07 -0400] manuel__: oh wait
[2012-09-11 01:12:22 -0400] flaccid_: good luck with that
[2012-09-11 01:12:23 -0400] manuel__: the workaround doesnt work for me, because I'm using knife ec2 server create, not knife bootstrap
[2012-09-11 01:12:35 -0400] manuel__: is there anything I can do instead?
[2012-09-11 01:12:52 -0400] joemiller: manuel__: cry like a bitch? oh wait, you're already doing that
[2012-09-11 01:13:02 -0400] flaccid_: hehe
[2012-09-11 01:13:07 -0400] flaccid_: give god a call
[2012-09-11 01:13:16 -0400] zts: I love the warm, welcoming Chef community
[2012-09-11 01:13:50 -0400] manuel__: zts, me too.  These are the warm and welcoming people that give Chef a great name and rake in the Big Bucks for Opscode.
[2012-09-11 01:13:55 -0400] z: its fair comment IMO, if you want support from IRC then you should check your self-entitlement and dick attitude at the door
[2012-09-11 01:14:07 -0400] zts: manuel__: don't know if it will work, but try --bootstrap-version if you haven't already
[2012-09-11 01:14:20 -0400] joemiller: i'm not associated with opscode
[2012-09-11 01:14:29 -0400] bluepojo: more accurately, you should test upgrades in staging before upgrading your production boxes.
[2012-09-11 01:14:34 -0400] manuel__: I was kind of considering hosted or private chef.  We have a few thousand machines that we're in the process of bringing to convergence.  Until today, that is.
[2012-09-11 01:14:36 -0400] bluepojo: finding problems in production is your own fault
[2012-09-11 01:14:36 -0400] zts: z: indeed.  On the other hand, "shit happens, get over it, shell scripts can't have logic" is ridiculous too
[2012-09-11 01:14:47 -0400] flaccid_: joemiller: this is not an about channel
[2012-09-11 01:14:48 -0400] manuel__: now there's no way I'm giving Opscode a cent.
[2012-09-11 01:15:07 -0400] bluepojo: their support team thanks you
[2012-09-11 01:15:09 -0400] zts: I'd be tempted to cry "own your availability" at manuel, if there was any supported way of caching packages locally
[2012-09-11 01:15:38 -0400] manuel__: zts, that's what I will have to build on my own, because (you're very right) ideally we should own our availability
[2012-09-11 01:15:59 -0400] zts: manuel__: you don't need to build your own, just grab the packages downloaded by install.sh and use those directly
[2012-09-11 01:16:03 -0400] manuel__: Anyway, I will not be using Opscode services or recommending them, not just for the software quality, but for the arrogant and offensive people that seem to accrete in their support channel.
[2012-09-11 01:16:07 -0400] btm: zts: If you use Omnibus, you can put the debs + rpms in a local package repository. If you use gems, you can host them in your own gem server.
[2012-09-11 01:16:12 -0400] zts: manuel__: that's not fair
[2012-09-11 01:16:24 -0400] zts: manuel__: this channel is not representative of opscode support
[2012-09-11 01:16:28 -0400] manuel__: zts, yes, I guess that works, but I'm at the stage of bootstrapping the environment that will bring the machines to convergence.
[2012-09-11 01:16:54 -0400] manuel__: zts, it appears to be representative of the community.
[2012-09-11 01:17:19 -0400] joemiller: manuel__: i'm surprised you're upset that by being an asshole others responded in kind
[2012-09-11 01:17:21 -0400] btm: manuel__: knife ec2 server create, like most knife bootstrap derivatives, installs the same version of chef on the remote system that you have on your workstation.
[2012-09-11 01:17:23 -0400] flaccid_: z: kind of a nice site, cept i have to signup to search for domains it seems so its a huge fail
[2012-09-11 01:17:35 -0400] manuel__: anyway, thanks to the people who DID help me.  I appreciate it.
[2012-09-11 01:17:46 -0400] flaccid_: manuel__: my pleasure
[2012-09-11 01:17:51 -0400] manuel__: no problem flaccid_
[2012-09-11 01:17:55 -0400] joemiller: manuel__: do you find it normal that by being a prick on IRC that people are more inclined to welcome you and help you? what channels are those?
[2012-09-11 01:17:58 -0400] z: manuel__: Arrogant? Occasionally. Offensive? Only when significantly provoked. A lot of people here have a *long* history contributing here, not just turning up and going "PEOPLE. HELP ME. SHITS BROKE AND I'M GONNA BITCH".
[2012-09-11 01:18:28 -0400] flaccid_: i admit it, i'm a dick but i have the right expectations as a result :)
[2012-09-11 01:18:32 -0400] z: flaccid_: Well when signed up, they have A-1 service. Support is *very* helpful. their API is handy, ISTR there is Chef cookbooks to integrate, etc
[2012-09-11 01:19:03 -0400] z: flaccid_: I migrated 20+ domains from GoDaddy about 12 months ago and have no regrets whatsoever, I love the service.
[2012-09-11 01:19:03 -0400] flaccid_: z: you'd kind of expect that as a prereq :)
[2012-09-11 01:19:26 -0400] manuel__: as for joemiller and btm, well, words like "prick" and "asshole" are free at the dollar store
[2012-09-11 01:19:48 -0400] bluepojo: lol, this guy.
[2012-09-11 01:19:53 -0400] joemiller: he didn't use those words, only i did
[2012-09-11 01:20:02 -0400] manuel__: do a better job of fostering a community that doesn't include verbally abusive and condescending people
[2012-09-11 01:20:13 -0400] flaccid_: i think we should stop dwelling on this convo and eat burritos instead
[2012-09-11 01:20:28 -0400] z: flaccid_: I tend to assume at this point I'm being trolled. Good advice.
[2012-09-11 01:23:12 -0400] btm: you know, omnibus builds aren't up [on omnitruck] for 10.14.2 yet, the way you get that error is when you ask for something that doesn't exist.
[2012-09-11 01:23:51 -0400] btm: sometime soon we should blog about the new omnitruck api.
[2012-09-11 01:25:09 -0400] zts: either you were being trolled and you fed it (the wrong thing), or you were dealing with someone who was justifiably frustrated, made a reasonable complaint (in entirely the wrong way), and copped at least as much attitude back as he brought to the table
[2012-09-11 01:25:39 -0400] zts: while the latter is unsurprising, and not atypical for IRC, it also stands at odds with what Adam Jacob stood up and talked about at chef conf (or wherever it was)
[2012-09-11 01:25:53 -0400] zts: and I think that that's the thing that annoys me
[2012-09-11 01:26:01 -0400] btm: zts: what's that exactly?
[2012-09-11 01:26:09 -0400] zts: But I'll try to channel this into something constructive by opening a ticket for improvements to install.sh
[2012-09-11 01:26:55 -0400] zts: btm: as in, what exactly is the thing that annoys me?
[2012-09-11 01:27:54 -0400] btm: zts: Sure, that's a good enough place to start.
[2012-09-11 01:29:25 -0400] hoover_damm: omnitruck
[2012-09-11 01:29:26 -0400] hoover_damm: heh
[2012-09-11 01:29:48 -0400] z: waiting for omniplane
[2012-09-11 01:30:13 -0400] hoover_damm: so it drops debs on you?
[2012-09-11 01:30:57 -0400] zts: btm: I'd put it two ways, neither of which may be adequate explanation.  But I'm pre-coffee, so maybe I'll need to write about it elsewhere.  Anyway...
[2012-09-11 01:31:29 -0400] btm: hoover_damm: it keeps a manifast of known omnibus artifacts and serves you a 302 over ssl based on the inputs (platform, platform_version, chef_version, arch)
[2012-09-11 01:31:59 -0400] zts: btm: 1) Adam gets up and talks about how welcoming the Chef community is.  While I think that's true most of the time, the exceptions really stand out for me - perhaps that's because of my own expectations, rather than what is reasonable.
[2012-09-11 01:32:51 -0400] zts: btm: 2) this channel serves much better as a hangout for chef practitioners than a community support channel.  The attitude is often wrong for support.  As there's no other community support forum, that means some people who come looking for assistance get a shitty deal
[2012-09-11 01:34:13 -0400] btm: zts: ah, well, there's a lot of really awesome people in the Chef community, and many of them hang out here. I wouldn't personally fault any of them for not being patient with someone's outright frustration. The community is really welcoming if you need a hand but I don't think any of us expect them to provide emotional counseling for someone who is irritable.
[2012-09-11 01:34:49 -0400] btm: zts: there mailing lists are another community support forum, and to one degree or another, the ticket tracker is too.
[2012-09-11 01:35:05 -0400] zts: btm: no, and nobody should be _obliged_ to do that.  But instead of biting, a better response is to ignore those people.  I don't always try to help in here - if I'm in a shitty mood, or if someone is being a tool, I know that we're both going to have a bad experience from the interaction
[2012-09-11 01:36:02 -0400] flaccid_: oh this topic again
[2012-09-11 01:36:15 -0400] zts: agreed, and I certainly wouldn't suggest that the community support is ineffective.  It has served me well :)
[2012-09-11 01:36:16 -0400] btm: zts: sure, but nobodies perfect, so its okay.
[2012-09-11 01:36:24 -0400] hoover_damm: btm, yummy!
[2012-09-11 01:36:34 -0400] hoover_damm: btm, is omnibus updated to 1.9.3 yet?
[2012-09-11 01:36:40 -0400] z: hoover_damm: yeah, 10.14
[2012-09-11 01:36:45 -0400] z: hoover_damm: 1.9.3-p194
[2012-09-11 01:36:45 -0400] flaccid_: some super models are perfect
[2012-09-11 01:36:48 -0400] btm: zts: its hard, as someone who deals with upset people on a daily basis.
[2012-09-11 01:36:48 -0400] z: hoover_damm: I was *happy*
[2012-09-11 01:37:03 -0400] hoover_damm: i forget what ours is running at, but it removes me from building em
[2012-09-11 01:37:14 -0400] hoover_damm: we're locked on 0.10.8 due to migration and not having time
[2012-09-11 01:37:14 -0400] flaccid_: i work in support, so i'm used to dealing with upset peoples
[2012-09-11 01:37:16 -0400] zts: btm: I know, as someone who has been doing that for years
[2012-09-11 01:37:18 -0400] btm: flaccid_: I don't like super models, I find their lack of imperfections to make them imperfect. :)
[2012-09-11 01:37:20 -0400] hoover_damm: to properly test stuff
[2012-09-11 01:37:22 -0400] hoover_damm: or upgrade
[2012-09-11 01:37:29 -0400] hoover_damm: so i'm still locked into building em for the time being
[2012-09-11 01:37:38 -0400] zts: btm: which is exactly why I'm not always prepared to do it for free, to strangers on irc :)
[2012-09-11 01:37:40 -0400] flaccid_: btm: thus the 'some'
[2012-09-11 01:39:26 -0400] btm: yeah. oh well. that was a few moments.
[2012-09-11 01:40:27 -0400] btm: zts: but yeah, it's best to be quiet when people are being hard than be grumpy back, but our own emotionals are just as irrational, so that's hard.
[2012-09-11 01:40:49 -0400] btm: As irrational as Java? MAYBE.
[2012-09-11 01:42:35 -0400] hoover_damm: you don't debug java... java debugs you
[2012-09-11 01:42:56 -0400] z: In Soviet Russia, sysadmins do not find Java using all memory, because they threaten Java with gulag
[2012-09-11 01:43:06 -0400] btm: fo'sho. if I have to connect to this process I'm going to be angry.
[2012-09-11 01:43:15 -0400] z: Elsewhere in world Java treat your system like cheap motel, and use it to fullest extent of $10 can buy
[2012-09-11 01:45:48 -0400] z: Moral of the story: I should write a process supervision tool called 'gulag'.
[2012-09-11 01:47:45 -0400] hoover_damm: http://www.imdb.com/title/tt0579743/
[2012-09-11 02:24:09 -0400] williamherry: yeah, chef 10.14 released
[2012-09-11 02:27:23 -0400] williamherry: do I have to upgrade chef on server node
[2012-09-11 02:30:55 -0400] flaccid_: you don't have to do anything in a literal sense
[2012-09-11 02:33:09 -0400] ssd7: williamherry: No need to upgrade the server to update the clients.
[2012-09-11 02:34:27 -0400] williamherry: flaccid, I find there have new feature called why-run, don't need to upgrade knife command to support it?
[2012-09-11 02:36:29 -0400] ssd7: williamherry: Why-run is a feature of chef-client, so you'll need to update the version of chef running on nodes to use it.
[2012-09-11 02:37:33 -0400] williamherry: ssd7, thanks
[2012-09-11 02:44:57 -0400] btm: 10.14.2 is out http://www.opscode.com/blog/2012/09/11/chef-10-14-2-released/
[2012-09-11 02:45:57 -0400] flaccid_: w00
[2012-09-11 02:53:52 -0400] zts: btm++
[2012-09-11 02:57:52 -0400] btm: hopefully that fixes up any regressions folks have been hitting. if not, please file a bug we'll get another patch release out in a few more days.
[2012-09-11 03:28:34 -0400] williamherry: update to 10.14, some of my recipe fail, can some one help? http://pastie.org/4699510
[2012-09-11 03:33:11 -0400] jtimberman: williamherry: do you have an init script for that service installed? does it come from the package, or do you create it from another chef resource?
[2012-09-11 03:34:27 -0400] williamherry: there no such init script on centos, this is other people's cookbook that deploy openstack, it works before
[2012-09-11 03:35:42 -0400] flaccid_: williamherry: something has to provide the init script if you wanna use the service resource on it.
[2012-09-11 03:36:47 -0400] williamherry: ok, I am gonna find it, is it a way to specify not use the very new version of chef, I wan't try 10.12 back
[2012-09-11 03:37:20 -0400] ssd7: williamherry: Depends on how you are installing but, yes you can go back to 10.12
[2012-09-11 03:37:22 -0400] flaccid_: personally, i don't think this has anything to do with the chef version
[2012-09-11 03:38:22 -0400] williamherry: thanks, all, I will read more code
[2012-09-11 03:40:02 -0400] ssd7: williamherry: Is that cookbook online somewhere?
[2012-09-11 03:41:34 -0400] williamherry: ssd7, sure https://github.com/williamherry/openstack-cookbooks/tree/master/cookbooks/sysctl
[2012-09-11 03:42:49 -0400] ssd7: williamherry: What OS are you seeing that on?
[2012-09-11 03:43:20 -0400] williamherry: ssd7, centos
[2012-09-11 03:43:44 -0400] ssd7: 6 ?
[2012-09-11 03:44:01 -0400] williamherry: this cookbook didn't say that if it support centos, but it work before, I am confuse, yes 6.2
[2012-09-11 03:46:44 -0400] flaccid_: i wasn't aware that centos had anything to do with openstack
[2012-09-11 03:48:55 -0400] flaccid_: nor systcl for that matter heh
[2012-09-11 03:49:57 -0400] flaccid_: you might wanna ensure that this recipe install procsp and its service in init.d https://github.com/williamherry/openstack-cookbooks/blob/master/cookbooks/sysctl/recipes/default.rb
[2012-09-11 03:50:57 -0400] ssd7: williamherry: From what I can this isn't really a regression, Chef 10.14 is just revealing something that probably wasn't actually working before
[2012-09-11 03:54:06 -0400] williamherry: flaccid, there are one package called procps, but it doesn't provides any init script, it is diff from ubuntu, why so many distros
[2012-09-11 03:55:13 -0400] flaccid_: that sounds like your problem williamherry. you can't manage a service that doesn't exist..
[2012-09-11 03:56:15 -0400] williamherry: flaccid, yes, so I am gonna update sysctl to work on centos that have no such service
[2012-09-11 03:56:25 -0400] flaccid_: e.g. service "flaccid" won't get you far without a flaccid package providing flaccid service
[2012-09-11 03:56:51 -0400] flaccid_: yeah, node['platform'] and value_for_platform are your friends for that multi platform support dev
[2012-09-11 03:58:44 -0400] flaccid_: i don't see a rason to tie to openstack in any way though
[2012-09-11 03:58:48 -0400] flaccid_: *reason
[2012-09-11 03:59:37 -0400] williamherry: flaccid, thanks
[2012-09-11 03:59:48 -0400] flaccid_: np
[2012-09-11 04:00:32 -0400] ssd7: williamherry: fwiw, I believe in Ubuntu the procps init script basically just reloads /etc/sysctl.conf and related .d configuration files
[2012-09-11 04:30:52 -0400] williamherry: ssd7, thanks, I will create one by myself if necessary
[2012-09-11 05:14:55 -0400] miah: hi
[2012-09-11 05:37:06 -0400] ssd7: heya
[2012-09-11 05:39:15 -0400] jtimberman: current status: nife ssh 'platform:mac_os_x OR platform:ubuntu' 'curl -L https://www.opscode.com/chef/install.sh | sudo bash && sudo /opt/chef/embedded/bin/gem install chef-handler-updated-resources chef-handler-mail' :-)
[2012-09-11 05:39:29 -0400] jtimberman: there's a "k" in there, right at the beginning, of course.
[2012-09-11 05:48:04 -0400] miah: fun
[2012-09-11 05:59:37 -0400] Mithrandir: jtimberman: hmm, perhaps those chef-handler-* gems should be packaged too
[2012-09-11 06:25:31 -0400] nickesh: hey i am using openjdk recipe for installing java. this is the one :https://github.com/bryanwb/chef-java/blob/master/recipes/openjdk.rb:
[2012-09-11 06:25:58 -0400] nickesh: but the problem is it only installs java compiler
[2012-09-11 06:26:11 -0400] nickesh: i.e jre and not jvm
[2012-09-11 06:26:23 -0400] nickesh: how can i get that done
[2012-09-11 06:26:50 -0400] nickesh: can anyone help me..
[2012-09-11 06:27:26 -0400] nickesh: https://github.com/bryanwb/chef-java/blob/master/recipes/openjdk.rb
[2012-09-11 06:27:40 -0400] flaccid_: nntr nickesh
[2012-09-11 06:27:44 -0400] nickesh: correct url
[2012-09-11 06:28:02 -0400] nickesh: what is nntr
[2012-09-11 06:28:13 -0400] flaccid_: No Need To Repeat
[2012-09-11 06:28:24 -0400] nickesh: ok...
[2012-09-11 06:28:57 -0400] nickesh: but what about the problem?
[2012-09-11 06:29:13 -0400] flaccid_: what about it?
[2012-09-11 06:29:29 -0400] nickesh: can u tell me what is going wrong
[2012-09-11 06:29:36 -0400] zts: nickesh: that recipe just installs the openjdk package for your platform, so if it is missing something then it's unlikely to be the recipe's fault
[2012-09-11 06:29:46 -0400] flaccid_: i think you mean 'you' not u. someone will help if they can.
[2012-09-11 06:29:50 -0400] zts: nickesh: which platform are you using, and how are you checking what has/hasn't been installed?
[2012-09-11 06:30:12 -0400] nickesh: @zts: centos
[2012-09-11 06:32:27 -0400] nickesh: when i run that recipe using chef-solo command, it runs fine, after that i run "javac" command it also works fine but "java" command doesn't work
[2012-09-11 06:33:03 -0400] flaccid_: jre != jdk
[2012-09-11 06:33:17 -0400] nickesh: i know that
[2012-09-11 06:33:26 -0400] zts: nickesh: if you do "rpm -qa '*java*'", do you see both the  openjdk and openjdk-devel packages installed?
[2012-09-11 06:33:33 -0400] zts: (or in the output of your chef-solo run, did it say both were installed)
[2012-09-11 06:33:47 -0400] flaccid_: java is jre, not jdk (javac).
[2012-09-11 06:34:41 -0400] nickesh: yeah i see both of them
[2012-09-11 06:34:54 -0400] flaccid_: using what?
[2012-09-11 06:36:25 -0400] zts: nickesh: and if you 'ls /etc/alternatives', you see entries for javac but not java ?
[2012-09-11 06:38:50 -0400] nickesh: @zts: i can see both of them
[2012-09-11 06:39:18 -0400] zts: nickesh: okay, how about 'ls /usr/bin/java' ?
[2012-09-11 06:39:20 -0400] nickesh: but JAVA comes in red color and black background. what does that mean
[2012-09-11 06:39:34 -0400] zts: aha, okay
[2012-09-11 06:40:10 -0400] zts: please do 'ls -la /etc/alternatives/java /etc/alternatives/javac'
[2012-09-11 06:40:19 -0400] nickesh: @zts: this is output.    /usr/bin/java
[2012-09-11 06:42:05 -0400] zts: what the red colours mean will depend on how your shell is configured, but usually I'd guess that means that the symlink is broken
[2012-09-11 06:42:21 -0400] zts: in other words, /usr/bin/java points to /etc/alternatives/java, but then /etc/alternatives/java doesn't point to anything
[2012-09-11 06:42:51 -0400] nickesh: ls -la /etc/alternatives/java                         lrwxrwxrwx 1 root root 26 Sep  4 16:09 /etc/alternatives/java -> /usr/lib/jvm/java/bin/java
[2012-09-11 06:43:18 -0400] zts: yeah, that's not right for openjdk
[2012-09-11 06:43:24 -0400] nickesh: ok
[2012-09-11 06:43:25 -0400] flaccid_: http://community.opscode.com/cookbooks/java
[2012-09-11 06:43:33 -0400] nickesh: ls -la /etc/alternatives/javac lrwxrwxrwx 1 root root 41 Sep 11 12:06 /etc/alternatives/javac -> /usr/lib/jvm/java-1.6.0-openjdk/bin/javac
[2012-09-11 06:43:48 -0400] nickesh: but what is it
[2012-09-11 06:43:54 -0400] zts: nickesh: here would be my suggestion - try uninstalling the java-1.6.0-openjdk package, then running chef-solo again.
[2012-09-11 06:44:02 -0400] zts: that should reinstall the package, and update the alternatives
[2012-09-11 06:44:34 -0400] zts: pay close attention to the output - if it is successful, then your /usr/bin/java should work.  If not, you should get an error (and I have seen the java cookbook fail before like that)
[2012-09-11 06:44:39 -0400] nickesh: yes sir  i did that many times but it gives same result
[2012-09-11 06:46:04 -0400] zts: okay, well if it always goes wrong, it is good to produce debug logs (chef-solo -l debug) and then put them somewhere like gist.github.com
[2012-09-11 06:46:12 -0400] zts: then you can share the link here, that might have more information about going wrong
[2012-09-11 06:47:08 -0400] nickesh: ok
[2012-09-11 06:47:19 -0400] nickesh: i will try..
[2012-09-11 06:48:12 -0400] zts: nickesh: also, the java cookbook that flaccid_ linked to has been updated more recently than the one you are using.  Are you using the one from github for a reason?
[2012-09-11 06:48:41 -0400] wonko_be: hi, is there a way to stop chef-solo from loading all the attribute-files?
[2012-09-11 06:49:08 -0400] flaccid_: wonko_be: i'm doubting. sounds like you are trying to work around bad design
[2012-09-11 06:49:37 -0400] wonko_be: it is with chefspec - it actually uses chef-solo to mimic the converge
[2012-09-11 06:49:45 -0400] wonko_be: we have some "normal" cookbooks (haproxy, apache, ...)
[2012-09-11 06:49:57 -0400] flaccid_: chefspec sounds bad
[2012-09-11 06:50:22 -0400] wonko_be: and we have some specific cookbooks (setup_for_client_x) - which also includes some overrides for apache_workers and the such
[2012-09-11 06:50:31 -0400] nickesh: @zts: no, there is no such reason, i will try the other one
[2012-09-11 06:53:04 -0400] zts: wonko_be: I haven't used chefspec in anger, but I was pretty sure it doesn't use chef-solo...
[2012-09-11 06:53:13 -0400] zts: are you sure about that?
[2012-09-11 06:53:51 -0400] zts: oh, it sets Chef::Config[:solo] = true, I guess you mean that?
[2012-09-11 06:55:25 -0400] nickesh: @zts: one more thing.... i just uninstalled the java, yum remove java, it removed two packages.. java-1.6.0-openjdk and java-1.6.0-openjdk-devel, now i run the command "ls -la /etc/alternatives/javac" it gave o/p: ls: cannot access /etc/alternatives/javac: No such file or directory  but when i run the commmand "ls -la /etc/alternatives/java" it gave o/p lrwxrwxrwx 1 root root 26 Sep  4 16:09 /etc/alternatives/java -> /usr/lib/jvm/java/
[2012-09-11 06:56:02 -0400] zts: If that's magically loading attributes from all the cookbooks in the cookbook_path, that's unhelpful  But I'd chase that as a bug with chefspec rather than chef-solo
[2012-09-11 06:56:18 -0400] nickesh: *color
[2012-09-11 06:57:14 -0400] zts: nickesh: hm, any chance you already have some other java package installed on that system?
[2012-09-11 06:57:30 -0400] zts: nickesh: what does "rpm -qf /usr/lib/jvm/java/" say ?
[2012-09-11 06:58:02 -0400] nickesh: @zts: file /usr/lib/jvm/java is not owned by any package
[2012-09-11 06:59:41 -0400] zts: nickesh: okay, that sounds like some version of java has previously been installed without using a package - maybe from a tarball?
[2012-09-11 07:00:06 -0400] nickesh: dont know, how to cheeck it
[2012-09-11 07:00:13 -0400] wonko_be: zts: indeed, it sets the config to "solo", and if you set the loglevel to debug, it is actually loading all the cookbooks
[2012-09-11 07:00:33 -0400] wonko_be: which is expected/documented behaviour by chef-solo
[2012-09-11 07:01:41 -0400] zts: wonko_be: nice.  Well yes, to answer your exact question, I'm not aware of any way to tell chef-solo not to do that.  I agree with you that it's misbehaviour in the context of chefspec, though
[2012-09-11 07:02:23 -0400] zts: nickesh: you would probably have to ask anyone else that has installed software on that system before
[2012-09-11 07:03:24 -0400] nickesh: zts: ok.. but can't we check ourself if it is installed
[2012-09-11 07:03:26 -0400] zts: nickesh: but anyway, try using the other java cookbook to install openjdk, use "-l debug" so that it makes lots of logs, and put them on gist.github.com or a pastebin if /usr/bin/java is still broken
[2012-09-11 07:03:46 -0400] zts: nickesh: even if there is one there already, update-alternatives should switch to point to the newly installed one
[2012-09-11 07:04:17 -0400] nickesh: ok...
[2012-09-11 07:40:07 -0400] BryanWB: ohai chefs!
[2012-09-11 07:41:34 -0400] erikh: BryanWB: hey dude, are you in SF now?
[2012-09-11 07:41:50 -0400] BryanWB: erikh,  fly out tomorrow
[2012-09-11 07:42:01 -0400] erikh: ah, fun!
[2012-09-11 07:42:14 -0400] BryanWB: erikh, y i love long plane flts, i get a lot of reading done
[2012-09-11 07:42:16 -0400] royh: anyone going for velocity?
[2012-09-11 07:42:23 -0400] BryanWB: am currently rereading pro git
[2012-09-11 07:42:35 -0400] erikh: BryanWB: I'm a smoker and conversely anything over 2 hours makes me want to commit capital crimes
[2012-09-11 07:51:33 -0400] danryan: erikh: ^ a thousand times this
[2012-09-11 07:55:13 -0400] williamherry: again I need help, all knife command work fine except search, after a little dig I find that chef-solr not start and this error in log file:http://paste.ubuntu.com/1198167/
[2012-09-11 07:57:59 -0400] BryanWB: danryan, does mastermind only use ssh as it communication mechanism w/ nodes?
[2012-09-11 08:01:30 -0400] danryan: BryanWB: yes for the moment, until I add support for additional providers
[2012-09-11 08:01:48 -0400] BryanWB: danryan, kewl
[2012-09-11 08:02:21 -0400] BryanWB: danryan,  i keep thinking about how i need a lightweight orchestration when using vagrant
[2012-09-11 08:02:50 -0400] BryanWB: and might not necessarily need the same in production env
[2012-09-11 08:02:56 -0400] BryanWB: esp. to set up tests
[2012-09-11 08:03:05 -0400] danryan: BryanWB: Cool, I'd love to hear about your use cases
[2012-09-11 08:03:13 -0400] BryanWB: danryan, since u asked ;)
[2012-09-11 08:03:19 -0400] danryan: :D
[2012-09-11 08:03:56 -0400] BryanWB: danryan, set up a master postgresql server, then another pg server in failover mode
[2012-09-11 08:04:07 -0400] BryanWB: fail the master, check if failover becomes new master
[2012-09-11 08:04:37 -0400] BryanWB: then run a cucumber or minitest tests to see if the desired state is met
[2012-09-11 08:04:46 -0400] BryanWB: all in vagrant
[2012-09-11 08:05:18 -0400] danryan: man oh man
[2012-09-11 08:05:26 -0400] danryan: BryanWB: that's also my use case :D
[2012-09-11 08:05:31 -0400] BryanWB: awesome!
[2012-09-11 08:05:32 -0400] danryan: (one of many :)
[2012-09-11 08:06:14 -0400] BryanWB: i can see using orchestration in prod, but i actually need it more for testing now
[2012-09-11 08:06:35 -0400] BryanWB: and i don't need super-scalability
[2012-09-11 08:06:42 -0400] BryanWB: at least not now
[2012-09-11 08:06:48 -0400] danryan: Honestly I hadn't thought about testing locally with vagrant and mastermind. As it exists, mastermind is more of a hosted service
[2012-09-11 08:07:42 -0400] danryan: but I'm in the process of rewriting the workflow runner  in a way that should greatly facilitate this
[2012-09-11 08:08:03 -0400] BryanWB: kewl
[2012-09-11 08:20:20 -0400] dchapdelaine: Hi, is there some documentation about running chef-client/chef-server working with instances bootstrapped by cloudwatch? Because the node doesn't exist on chef-server,  the run_list is empty.
[2012-09-11 08:21:12 -0400] dchapdelaine: usually I would use knife ec2 and specify the run_list
[2012-09-11 08:31:40 -0400] williamherry: anyone know my question? chef-solr can't start, http://paste.ubuntu.com/1198167/
[2012-09-11 08:32:35 -0400] sampikesley: does /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/rt.jar exist?
[2012-09-11 08:33:26 -0400] williamherry: sampikesley, yes
[2012-09-11 08:34:59 -0400] danryan: BryanWB: Just thinking about what your particular workflow would look like in the mastermind dsl I came up with this: https://gist.github.com/3696906 (ssh provider is already there; I'd need to think on the vagrant one some more)
[2012-09-11 08:35:19 -0400] danryan: You might notice it looks shockingly like Chef :)
[2012-09-11 08:35:48 -0400] BryanWB: danryan, looks quite nice and yes, familiar ;)
[2012-09-11 08:38:26 -0400] williamherry: sampikesley, any suggestion?
[2012-09-11 08:39:36 -0400] BryanWB: danryan, here is a minor variation, but might be overthinking it  https://gist.github.com/3696935
[2012-09-11 08:40:15 -0400] danryan: BryanWB: Oh snap, I like that even better
[2012-09-11 08:40:41 -0400] BryanWB: but i wud use `node` instead of vagrant, then u can add different provisioners later
[2012-09-11 08:40:53 -0400] BryanWB: shud u get around to it
[2012-09-11 08:42:09 -0400] danryan: Indeed! I have an EC2 and a Rackspace provisioner at the moment, but both are accessed by specific methods, ec2_server and rackspace_server, respectively
[2012-09-11 08:43:04 -0400] danryan: would be quite interesting to allow one to set default provisioners, so node always maps to ec2, or vagrant, or what-have-you
[2012-09-11 08:43:24 -0400] BryanWB: couldnt a MasterMind::Provisioner abstract away the creation details?
[2012-09-11 08:44:04 -0400] BryanWB: couldnt a MasterMind::Provisioner  *class* abstract away the creation details?
[2012-09-11 08:49:15 -0400] danryan: Quite. I'm trying to think in terms of how Chef does it. You have a Resource, a package, that you interact with. If you're on Ubuntu, that resource's Provider becomes Chef::Resource::AptPackage which knows how to act on a package. But you don't need to know how apt installs things. You just tell it to install and just works, right?
[2012-09-11 08:51:16 -0400] BryanWB: danryan, yup, but in this case u also have to supply credentials info for a provisioner other than vagrant
[2012-09-11 08:51:55 -0400] BryanWB: actually, "provisioner" is bad as it is a namespce collision w/ the vagrant::provision
[2012-09-11 08:53:02 -0400] williamherry:  I just finger it out, that file is crrupted, after yum reinstall it, now work fine
[2012-09-11 08:57:41 -0400] BryanWB: danryan, https://gist.github.com/3696935
[2012-09-11 08:58:40 -0400] danryan: BryanWB: very nice.
[2012-09-11 09:00:20 -0400] shamaz_: hi i am a newbie in chef and writing now my first lwrp. Now i have in one cookbook two resources and two providers each for one resource. Can i use one provider within the other?
[2012-09-11 09:01:13 -0400] danryan: BryanWB: https://gist.github.com/3697044 I think it looks all right to have special attributes based on what platform is selected.
[2012-09-11 09:01:55 -0400] BryanWB: danryan, sure, nice
[2012-09-11 09:03:58 -0400] BryanWB: danryan, wud be nice to either specify individual credentials as attributes or as a hash, that way u cud reuse ur steps for different platforms
[2012-09-11 09:04:03 -0400] BryanWB: if u wanted to
[2012-09-11 09:05:32 -0400] williamherry: chef-solr now can start but search still not work, it says some thing like 'errors_in_solr_configure....' https://gist.github.com/3697062
[2012-09-11 09:10:35 -0400] shamaz_: have no one an answer?
[2012-09-11 09:22:24 -0400] zts: shamaz_: I'm not sure what you mean, can you pastebin some code?
[2012-09-11 09:24:58 -0400] williamherry: Address family not supported by protocol any one see this error before? such horrible day
[2012-09-11 09:28:17 -0400] dunc: sounds like something to do with IPv4 or IPv6, what's the context?
[2012-09-11 09:29:07 -0400] nickesh: zts: u there
[2012-09-11 09:30:48 -0400] nickesh: hey i used opscodes java recipe, but still "java" command not working..
[2012-09-11 09:31:41 -0400] nickesh: ENV["JAVA_HOME"] = java_home
[2012-09-11 09:31:54 -0400] nickesh: what does it do exactly?
[2012-09-11 09:33:54 -0400] BryanWB: nickesh, sets the shell variable JAVA_HOME to the java_home defined in the cookbook
[2012-09-11 09:34:08 -0400] BryanWB: useful if u have a script resource that uses java
[2012-09-11 09:34:12 -0400] BryanWB: like clojure
[2012-09-11 09:34:58 -0400] nickesh: and if i close the terminal window will it be erased?
[2012-09-11 09:35:29 -0400] BryanWB: nickesh the oracle cookbook currently sets the JAVA_HOME by creating /etc/profile.d/jdk.sh
[2012-09-11 09:35:29 -0400] shamaz_: ok, here it is http://pastebin.com/1Xrzxjzk
[2012-09-11 09:35:40 -0400] BryanWB: the openjdk recipe doesn't currently do that but should
[2012-09-11 09:36:34 -0400] nickesh: then how can i set java_home variable permanatly?
[2012-09-11 09:36:48 -0400] BryanWB: w/ openjdk recipe?
[2012-09-11 09:37:02 -0400] BryanWB: template /etc/profile.d/jdk.sh
[2012-09-11 09:37:18 -0400] BryanWB: using the java_home var
[2012-09-11 09:38:59 -0400] shamaz_: zts: I want to wride the method "a_long_methode" in a separate file
[2012-09-11 09:39:03 -0400] williamherry: dunc, https://gist.github.com/aaaa20c49605ec6fe4d7
[2012-09-11 09:40:33 -0400] nickesh: BryanWB: but i heard that for desktop these variables are storedin .bashrc file and for server in /etc/profile file
[2012-09-11 09:41:13 -0400] BryanWB: nickesh,  i prefer a separate file , don't know about desktops
[2012-09-11 09:43:11 -0400] nickesh: ok.. but how does the machine know where to look for these (java_home and path) variables.. i mean in which file, and well there i no jdk.sh file in profile.d
[2012-09-11 09:44:13 -0400] BryanWB: use a template resource
[2012-09-11 09:44:26 -0400] BryanWB: to create it
[2012-09-11 09:44:49 -0400] nickesh: ok... it means i have to create a new file
[2012-09-11 09:45:14 -0400] williamherry: dunc, still there, can you help me about that?
[2012-09-11 09:45:44 -0400] nickesh: but how does machine know that these variables are in jdk.sh file
[2012-09-11 09:45:50 -0400] shamaz_: zts: are u there?
[2012-09-11 09:46:06 -0400] BryanWB: nickesh, every login should load  /etc/profile.d/*.sh
[2012-09-11 09:47:26 -0400] BryanWB: i have deployed to prod
[2012-09-11 09:47:40 -0400] BryanWB: oops wrong tty
[2012-09-11 09:48:21 -0400] nickesh: ok.. means all *.sh files will be loaded. is it only for "profile.d" or any other folder, i mean can we store this jdk.sh file anywhere else?
[2012-09-11 09:49:10 -0400] BryanWB: only profile.d
[2012-09-11 09:50:18 -0400] nickesh: ok.. why this folder is so special?
[2012-09-11 09:50:54 -0400] BryanWB: dunno, ask the linux gods
[2012-09-11 09:51:25 -0400] nickesh: hahaha...
[2012-09-11 09:51:32 -0400] nickesh: thainks :)
[2012-09-11 09:51:40 -0400] nickesh: *thanks :)
[2012-09-11 09:58:19 -0400] gyre007: why is chef-client using so much memory...on one of the boxy I can see that its eating up like 340M RSS...pmap -d shows a whopping 500M being used by it
[2012-09-11 09:58:43 -0400] gyre007: mental
[2012-09-11 10:00:58 -0400] krisk: is it possible to create 4096bit RSA keys + csrs with "rake ssl_cert"?
[2012-09-11 10:03:54 -0400] adz: gyre007, perhaps http://tickets.opscode.com/browse/CHEF-3432
[2012-09-11 10:05:18 -0400] gyre007: adz, yeah seeing exactly the same thing
[2012-09-11 10:05:52 -0400] adz: the guy who raised the ticket seemed to think it was new in 10.14
[2012-09-11 10:42:20 -0400] gyre007: is it possible with knife to retrieve certain node attributes from the CHef server ?
[2012-09-11 10:44:44 -0400] gyre007: basically to query the whole node object
[2012-09-11 10:46:03 -0400] Babar: knife search node ... -a attribute ?
[2012-09-11 10:47:10 -0400] gyre007: Babar, that will find a node with a given attribute...right ? I need to list a given attribute for a given node...
[2012-09-11 10:47:39 -0400] Babar: right. Why would you try it or read the doc when you can just guess that I'm saying bullshit.
[2012-09-11 10:47:43 -0400] Babar: good luck getting help
[2012-09-11 10:49:10 -0400] gyre007: im not saying you are saying bullshit..arrgh
[2012-09-11 10:51:20 -0400] BryanWB: Babar, be nice
[2012-09-11 10:51:35 -0400] Babar: right.
[2012-09-11 10:55:13 -0400] gyre007: actually Babar got me into right direction....I used the following command: knife search node "name:app*" -a attr1.field
[2012-09-11 10:55:33 -0400] BryanWB: gyre007, as Babar intimated   `knife search node "name:foobar1" -a some_attribute should work
[2012-09-11 11:07:52 -0400] nkrinner: hi all
[2012-09-11 11:08:19 -0400] nkrinner: i try to debug a problem i have with knife search, and i think the problem is with chef-expander
[2012-09-11 11:08:28 -0400] nkrinner: chef-expanderctl node-status
[2012-09-11 11:08:29 -0400] nkrinner: Collecting status info from the cluster...done
[2012-09-11 11:08:30 -0400] nkrinner: Host    PID     GUID    Vnodes
[2012-09-11 11:08:47 -0400] nkrinner: does this output look sane? i thought chef-expander should have at least one node?
[2012-09-11 11:09:07 -0400] nkrinner: the worker process is present:
[2012-09-11 11:09:09 -0400] nkrinner: ps aux | grep expander
[2012-09-11 11:09:11 -0400] nkrinner: root     28114  0.0  0.1  85612 18996 pts/0    Sl   09:34   0:00 /usr/bin/ruby1.9 /usr/bin/chef-expander -L /var/log/chef/expander.log -n 1 -i 1 -l debug
[2012-09-11 11:09:12 -0400] nkrinner: root     28119  0.4  0.1 157792 23520 pts/0    Sl   09:34   0:26 chef-expander worker #1 (vnodes 0-1023)
[2012-09-11 11:09:44 -0400] nkrinner: other chef-expanderctl commands always time out with no reaction at all
[2012-09-11 11:09:52 -0400] nkrinner: any suggestions?
[2012-09-11 13:52:42 -0400] ssd7: Ohai Chefs
[2012-09-11 13:56:28 -0400] geekbri: hello there
[2012-09-11 13:59:02 -0400] jtimberman: ohai!
[2012-09-11 13:59:51 -0400] geekbri: jtimberman: do you do your crossfit workouts throughout the winter outside ?
[2012-09-11 14:02:43 -0400] jtimberman: geekbri: dunno yet, its still in the 80's most days :)
[2012-09-11 14:03:47 -0400] geekbri: jtimberman: Me neither, I guess we will both find out!  I could see my breathe when I left for work this morning so I started thinking about how potentially unpleasant it may get :)
[2012-09-11 14:52:11 -0400] uncommitted: seems the init file for 10.14.2 is missing the CONFIG variable
[2012-09-11 14:52:29 -0400] uncommitted: DAEMON_OPTS="-d -P $PIDFILE -c $CONFIG -i $INTERVAL -s $SPLAY"
[2012-09-11 14:52:44 -0400] uncommitted: in the file CONFIG nor SPLAY are defined
[2012-09-11 15:11:37 -0400] jonesy: is there syntax for referencing an attribute inside the code section of a chef 'script' block?
[2012-09-11 15:12:03 -0400] jonesy: the interpreter is python, if that makes a difference.
[2012-09-11 15:12:34 -0400] yfeldblum: jonesy, no, you must use normal string interpolation at the time that the script string is composed, which is immediately
[2012-09-11 15:13:06 -0400] jonesy: thank you, yfeldblum
[2012-09-11 15:24:56 -0400] joemiller: anyone else had trouble with the git resource in 10.14.x? looks like it's not resolving tags to sha ref correctly
[2012-09-11 15:32:47 -0400] joe_k_: I am having trouble understanding a key component of the chef workflow.... namely, if I edit things in the webui, how do I get that configuration back into my git repo?
[2012-09-11 15:33:13 -0400] juliancdunn: joe_k_: you don't... those are kind of mutually exclusive
[2012-09-11 15:33:14 -0400] joe_k_: im not sure how the server and the repo get connected except for me manually uploading things, but there seems to be no reverse path
[2012-09-11 15:33:41 -0400] joe_k_: are you saying the set of configurable items in the webui and the set of items in the repo are distinct?
[2012-09-11 15:33:49 -0400] juliancdunn: joe_k_: no, they're the same objects
[2012-09-11 15:33:59 -0400] juliancdunn: but if you want to have a git workflow, don't use the WebUI to edit objects
[2012-09-11 15:34:06 -0400] joe_k_: oh
[2012-09-11 15:34:14 -0400] joe_k_: well dang
[2012-09-11 15:34:14 -0400] juliancdunn: instead, manage your objects (JSON or DSL) in Git, upload them through the API
[2012-09-11 15:35:10 -0400] joe_k_: can the server just use the repo versus me manually uploading?  I thought that was kind of the "magic" - you commit changes, infrastructure is mutated to match
[2012-09-11 15:35:33 -0400] juliancdunn: no
[2012-09-11 15:35:46 -0400] joe_k_: hm.
[2012-09-11 15:36:33 -0400] juliancdunn: that would be an awesome idea though... if Chef used Git as a backing store for objects
[2012-09-11 15:37:15 -0400] joe_k_: ok, is there a way to dump out the config i may have made in the webui to a directory of files
[2012-09-11 15:37:23 -0400] itwasntandy: joe_k_: yes with knife
[2012-09-11 15:37:28 -0400] itwasntandy: knife role edit foobar
[2012-09-11 15:37:35 -0400] itwasntandy: and then :w foobar.json in vi to write it out to file
[2012-09-11 15:37:45 -0400] itwasntandy: probably a quicker way of doing it
[2012-09-11 15:37:54 -0400] itwasntandy: but for just 1 or 2, its easy enough
[2012-09-11 15:38:10 -0400] juliancdunn: itwasntandy: knife role show foobar -Fj > foobar.json
[2012-09-11 15:38:11 -0400] joe_k_: so that downloads the role from the server to a temp file and edits it, it does not edit the file in git?
[2012-09-11 15:38:15 -0400] joe_k_: errrr, in the working dir
[2012-09-11 15:38:24 -0400] itwasntandy: juliancdunn: ah yeh that'd be better :)
[2012-09-11 15:38:28 -0400] itwasntandy: joe_k_: what julican said
[2012-09-11 15:38:44 -0400] itwasntandy: juliancdunn: I don't think having git as backing store for chef would be a good idea... as it would be far too easy then to break stuff on the server.
[2012-09-11 15:38:50 -0400] joe_k_: (e.g. the current dir ./roles/whatever)
[2012-09-11 15:39:05 -0400] itwasntandy: we opt to have bamboo checkout from git, run stuff through foodcritic etc and then upload
[2012-09-11 15:39:14 -0400] itwasntandy: and are adding more tests and fixes in overtime
[2012-09-11 15:40:47 -0400] juliancdunn: itwasntandy: that's cool
[2012-09-11 15:40:59 -0400] leifmadsen: itwasntandy: I do the same thing, but s/bamboo/jenkins/
[2012-09-11 15:41:04 -0400] joe_k_: so I have to manually discover and "show" each possible configured object rather than a "knife backup"? (I am looking to create a snapshot of the current server state that I could copy over my repo)
[2012-09-11 15:41:55 -0400] itwasntandy: leifmadsen: yeh I'd love to s/bamboo/jenkins/ too but we have a lot of atlassian stuff here :(
[2012-09-11 15:43:13 -0400] juliancdunn: joe_k_: have a look at jtimberman's backup script
[2012-09-11 15:43:20 -0400] juliancdunn: https://raw.github.com/jtimberman/knife-scripts/master/chef_server_backup.rb
[2012-09-11 15:43:35 -0400] juliancdunn: you can "knife exec" that and it'll dump out almost everything to your working directory
[2012-09-11 15:44:28 -0400] leifmadsen: itwasntandy: ya, we have JIRA at the new company I work at, and there we no automated testing so I got to install jenkins. I know the Asterisk project has bamboo, but no git?  :)
[2012-09-11 15:45:41 -0400] leifmadsen: itwasntandy: hoping to get the work flow changed a bit? committing to development, automatically testing, merge to testing, perform manual testing and code review via gerrit, and successful code reviews and tests getting pushed to master, then deployed via chef
[2012-09-11 15:50:26 -0400] joe_k_: so you "build" changes to your git repo by using knife in a jenkins script to deploy nodes, then test them?
[2012-09-11 15:50:56 -0400] joe_k_: and that's all homegrown scripts/jenkins config?
[2012-09-11 15:52:12 -0400] joe_k_: then if testing works, jenkins proceeds to upload to the "production"
[2012-09-11 15:52:14 -0400] joe_k_:  environment?
[2012-09-11 15:55:32 -0400] leifmadsen: joe_k_: that's the idea ya
[2012-09-11 15:55:52 -0400] leifmadsen: although the upload to production would be controlled based on when we wanted to actually deploy to production
[2012-09-11 15:57:53 -0400] joe_k_: any idea if someone has written the script to sync the server with a checked-out repo? (e.g. "knife upload"ing each file)
[2012-09-11 15:58:27 -0400] krawek: joe_k_: how so?
[2012-09-11 15:59:15 -0400] leifmadsen: in my case jenkins just does a git checkout, runs foodcritic, then triggers some vagrant stuff that runs minitest::spec tests
[2012-09-11 15:59:21 -0400] joe_k_: i'd just rather re-use than write anew, a script that iterates through the repo's "nodes" for example and uploads each to the server to make the server match the repo
[2012-09-11 15:59:29 -0400] joe_k_: foodcritic
[2012-09-11 15:59:33 -0400] joe_k_: ?
[2012-09-11 16:00:05 -0400] krawek: just write a post-receive hook to upload the recipes
[2012-09-11 16:00:08 -0400] joe_k_: so thats a structure checker for the repo
[2012-09-11 16:00:27 -0400] krawek: so everytime you push to server repo it syncs the recipes
[2012-09-11 16:00:34 -0400] joe_k_: yay, github is down
[2012-09-11 16:00:56 -0400] joe_k_: right, i was wondering if that script might be found in the community (to "sync the recipes")
[2012-09-11 16:01:21 -0400] krawek: just use the commands like knife cookbook upload -a
[2012-09-11 16:01:30 -0400] joe_k_: ah
[2012-09-11 16:01:32 -0400] joe_k_: ok
[2012-09-11 16:02:59 -0400] krawek: rake -T has more useful commands
[2012-09-11 16:04:15 -0400] leifmadsen: joe_k_: not sure if it helps, but http://bit.ly/Lz3Fka
[2012-09-11 16:08:27 -0400] jtimberman: juliancdunn: joe_k_: ssd has a more updated backup/restore script i believe
[2012-09-11 16:08:44 -0400] jtimberman: but apparently he's not here at the moment
[2012-09-11 16:09:06 -0400] rocket: is anyone available to help me understand whats going on with the application cookbook?  I see alot of the recipes are deprecated?  I was going to pattern my application install based on them but I am wondering if that would be a bad thing to do now
[2012-09-11 16:11:40 -0400] jtimberman: rocket: the recipes are deprecated in favor of the LWRP's that have been created in the application cookbook and the other application_LANG cookbooks
[2012-09-11 16:12:21 -0400] rocket: jtimberman: so for myself I should look at building a application_zenoss cookbook to follow the pattern?
[2012-09-11 16:18:43 -0400] jtimberman: rocket: that isn't the pattern
[2012-09-11 16:19:02 -0400] jtimberman: rocket: the additional application cookbooks extend the application LWRP
[2012-09-11 16:19:17 -0400] jtimberman: rocket: if you're looking to deploy zenoss, there's a zenoss cookbook.
[2012-09-11 16:23:17 -0400] rocket: jtimberman: I am a zenoss employee looking to greatly expand and enhance the cookbook .. I am just trying to figure out the best practices when I have distributed databases and rabbitmq servers for example
[2012-09-11 16:23:42 -0400] TTimo: hello. if I have only one machine, and I want to start writing some simple recipes to learn .. should I be looking at chef-solo ?
[2012-09-11 16:23:46 -0400] rocket: jtimberman: I used to work with matt ... I know he did alot of work on it initially
[2012-09-11 16:26:20 -0400] TTimo: can I write/update recipes locally .. or the only way is to checkin and have a cycle through the git repo
[2012-09-11 16:26:54 -0400] rocket: TTimo: vagrant chef-solo might be a great place to start ...
[2012-09-11 16:27:27 -0400] joemiller: not sure if anyone else is seeing this yet, but i filed a bug with the git provider in 10.14.x. also trying to patch it on our test nodes. http://tickets.opscode.com/browse/CHEF-3437
[2012-09-11 16:27:29 -0400] rocket: TTimo: I then went the route of using vagrant/chef-solo to deploy a local chef server to learn that aspect
[2012-09-11 16:27:36 -0400] sanguisdex: if I wanted to start with hosted chef at first how much of a pain is it to switch to my own chef server down the road for existing nodes? is there any documentation on this?
[2012-09-11 16:27:47 -0400] TTimo: rocket: k, ty
[2012-09-11 16:27:55 -0400] rocket: TTimo: if you are using a recipe that does searches or uses advanced features you will want a chef server
[2012-09-11 16:28:48 -0400] TTimo: I'm learning the aws cookbooks atm. lvm etc. to drive disk setup on my VMs
[2012-09-11 16:28:56 -0400] rocket: sanguisdex: I assume you could just run knife bootstrap with different parameters against your existing nodes when you wanted to make the switch ..  but I havent done this or tested it
[2012-09-11 17:19:44 -0400] stormerider: so i'm getting an error that a recipe can't find a file that is in files/host-<hostname>/. confirmed the filename and the hostname, is there a way to see what hostname chef sees the node as having to make sure it matches up?
[2012-09-11 17:21:11 -0400] btm: stormerider: when you first run chef-client it says, 'Starting Chef Run for' with the node name after it.
[2012-09-11 17:21:49 -0400] btm: stormerider: by default the node name is the same as the host name. you can see what is being collected with 'ohai hostname'
[2012-09-11 17:23:00 -0400] stormerider: hm. ohai hostname shows "ops". ohai fqdn shows the ec2 junk. how do i correct the fqdn?
[2012-09-11 17:24:00 -0400] stormerider: the file is under files/host-ops.l7a.co/
[2012-09-11 17:25:16 -0400] btm: stormerider: check your /etc/hosts file and make it right for your platform so 'hostname' and 'hostname -f' return the hostname and the fqdn, respectively.
[2012-09-11 17:25:42 -0400] btm: stormerider: sometimes this is just "x.x.x.x fqdn hostname alias alias alias"
[2012-09-11 17:26:52 -0400] btm: stormerider: IIRC, sometimes you have to run an init script after you make those changes like '/etc/init.d/hostname restart'
[2012-09-11 17:27:59 -0400] stormerider: so i dont even see the ec2-blahblah.com inside /etc/hosts
[2012-09-11 17:30:10 -0400] stormerider: ah, ok. got it sorted out. thanks.
[2012-09-11 17:30:24 -0400] btm: stormerider: what OS are you on? Check /etc/hostname.
[2012-09-11 17:31:49 -0400] stormerider: i had the fqdn in /etc/hostname, which is wrong. fixed that to just be the hostname, and added a record for the EIP with the fqdn and short hostname and everything is happy
[2012-09-11 17:38:10 -0400] stormerider: hm. why is my chef client (in this case also my server) caching and running version 0.0.2 of a cookbook when I've uploaded 0.0.6?
[2012-09-11 17:39:17 -0400] ev0ldave: is it pinned in the environment?
[2012-09-11 17:40:38 -0400] btm: stormerider: is it on the server? knife cookbook show foo ?
[2012-09-11 17:41:12 -0400] stormerider: ev0ldave: how do i check that?
[2012-09-11 17:41:21 -0400] stormerider: btm: yes, all versions are there
[2012-09-11 17:41:25 -0400] jtimberman: stormerider: knife node show NODENAME -E
[2012-09-11 17:41:30 -0400] jtimberman: will show its environment
[2012-09-11 17:41:36 -0400] jtimberman: then knife environment show ENVIRONMENT
[2012-09-11 17:43:30 -0400] stormerider: blargh, yes.
[2012-09-11 17:44:13 -0400] stormerider: when i went into the webui i didnt see anything in the environment but i see it in the knife env show
[2012-09-11 17:44:32 -0400] ev0ldave: yeah... i have constant issues with the webui
[2012-09-11 17:47:54 -0400] stormerider: thanks all.
[2012-09-11 17:53:19 -0400] stormerider: https://gist.github.com/3700251 -- i see it operating across multiple users but its not finding them in the data bags even though they show up in "knife data bag show users". does search do any kind of filtering that might be occurring here?
[2012-09-11 18:02:31 -0400] Reverand: hi, i just released a knife-oca plugin. it's pretty basic, but functional. oca stands for opennebula cloud api and is the native xml-rpc interface to opennebula. i deliver a basic fog oca provider too. in case, you are interested, have a look at https://github.com/Reverand221/knife-oca.
[2012-09-11 18:06:23 -0400] Babar: so... I still have an issue with my cookbook, which says: EOFError: end of file reached.   I tried removing the cookbook, and the re-uploading it, same issue. Anything else I could try?
[2012-09-11 18:07:35 -0400] btm: Babar: when does it say that? Can you post the error to http://gist.github.com? what version of chef are you running? http://tickets.opscode.com/browse/CHEF-3421 ?
[2012-09-11 18:09:55 -0400] ev0ldave: stormerider: a .each in the search if you are writing those users to the hash?
[2012-09-11 18:11:58 -0400] ev0ldave: search(:users, "*:*").each { |u| blah blah}
[2012-09-11 18:12:20 -0400] Babar: btm: nice bug report... it seems it's missing one local file, but it doesn't want to upload it because it didn't change
[2012-09-11 18:12:26 -0400] Babar: can I force it to re-upload?
[2012-09-11 18:13:03 -0400] ev0ldave: easy to test out in shef
[2012-09-11 18:16:46 -0400] pabst^: Any idea where ohai pulls the ip address of a linux server from?
[2012-09-11 18:17:43 -0400] btm: pabst^: usually eth0.
[2012-09-11 18:17:55 -0400] Babar: btm: so, with the knife cookbook download -VV I could see where it stopped downloading, and the upload wouldn't upload it back because it claimed it hadn't been modified, so what I did is that I modified all the files which failed, until it passed. Now it works :)
[2012-09-11 18:18:51 -0400] rava: is it possible to configure the output of what knife node show by default (i know about --long and --medium, i don't want more just other)
[2012-09-11 18:18:53 -0400] pabst^: btm: makes sense, is it possible to change that? ec2 instances have eth0 as the internal ethernet device, the private 10. address, and most openvz machines have venet and no eth0
[2012-09-11 18:19:10 -0400] rava: pabst^: you can use the cloud attributes
[2012-09-11 18:19:23 -0400] stormerider: ev0ldave: it seems like they appear when i do a 'knife data bag list users' but not when i do a 'knife search users "*:*"'. re-uploading them all to make sure they're indexed correctly.
[2012-09-11 18:19:34 -0400] leifmadsen: ya, what rava said
[2012-09-11 18:20:22 -0400] btm: pabst^: it's not possible to change the source of the ipaddress attribute but all the interfaces are collected in the network tree.
[2012-09-11 18:20:24 -0400] leifmadsen: node['cloud']['public_ipv4_address'] I believe would be an example
[2012-09-11 18:20:36 -0400] rava: from the command line: =>knife node show OPS1PROD -a 'cloud.public_hostname'
[2012-09-11 18:20:36 -0400] rava: cloud.public_hostname:  ec2-184-73-195-174.compute-1.amazonaws.com
[2012-09-11 18:20:49 -0400] pabst^: yeah, i guess i gotta figure out how to do this with my cookbook
[2012-09-11 18:21:09 -0400] chip-: pabst^: the usual way is to do an ifcase. if cloud.public_hostname is populated, sue that. Else use ipaddress.
[2012-09-11 18:21:12 -0400] rava: pabst^: like leifmadsen just posted, node attributes
[2012-09-11 18:21:13 -0400] pabst^: it pulls ip address, so I need to be able to say well, if this
[2012-09-11 18:21:14 -0400] pabst^: ah ok
[2012-09-11 18:21:20 -0400] pabst^: thanks
[2012-09-11 18:21:24 -0400] leifmadsen: ya, there are several in the cloud group
[2012-09-11 18:21:36 -0400] pabst^: awesome, thank you very much
[2012-09-11 18:21:37 -0400] leifmadsen: public_hostname, public_ipv4_address, private_hostname, etc
[2012-09-11 18:21:50 -0400] leifmadsen: knife search node name:ec2_server -a cloud
[2012-09-11 18:21:56 -0400] leifmadsen: that'll show you a bunch of things you can use
[2012-09-11 18:22:19 -0400] Babar: btm: ok, all my cookbooks are like this, so I'm guessing somehow my couchdb got corrupted. I remember some old ways to clear it and have it re-upload everything... is there a nice way now?
[2012-09-11 18:24:53 -0400] btm: Babar: maybe: for cook in `knife cookbook list | awk '{ print $0 }' | xargs` ; do knife cookbook delete $cook --purge ; done
[2012-09-11 18:25:05 -0400] btm: (off the top of my head)
[2012-09-11 18:25:33 -0400] Babar: ah, --purge, I like that
[2012-09-11 18:25:53 -0400] ezotrank: Good day. Has some native way to deploy when project repo is changed?
[2012-09-11 18:27:03 -0400] btm: ezotrank: mostly often you run chef-client regularly via cron or daemonized and use the scm/deploy resources to deploy, which are idempotent.
[2012-09-11 18:28:45 -0400] leifmadsen: ezotrank: that btm said, otherwise you can be fancy and configure a trigger or polling for your git repo to do it for you, or just run "knife ssh name:node_name 'sudo chef-client'"
[2012-09-11 18:29:05 -0400] pabst^: Curious, has anyone ever seen couchdb just randomly, go to sleep and never come back? (i.e. pid file exists but subsys is dead)
[2012-09-11 18:30:05 -0400] rava: im trying to clean up a user's cookbook i've been using ,for it seems to run converge commands regardless if they are needed (chaing file ownership when it's already correct). i was under the impression chef-client would automatically check these things out before execution, or is that only for template generation if the checksums don't match?
[2012-09-11 18:31:34 -0400] btm: rava: the built-in providers almost always check to see if they need to do something before they do it.
[2012-09-11 18:32:05 -0400] btm: rava: are they using the the file provider to configure file ownership or doing it some other way?
[2012-09-11 18:33:26 -0400] rava: btm: the provider does stuff like this: http://pastebin.com/21AQ9uwy
[2012-09-11 18:34:12 -0400] rava: joshua and schisamo's users cookbook
[2012-09-11 18:35:20 -0400] btm: rava: are you sure the ownership is already correct? e.g. ls -l /home/foo ; chef-client ; ls -l /home/foo ?
[2012-09-11 18:35:34 -0400] rava: yup
[2012-09-11 18:35:54 -0400] leifmadsen: and that another recipe isn't changing it then getting changed back by another?
[2012-09-11 18:36:04 -0400] rava: i'll run the client, look at ownership (which is good after client run), rerun client and log ouput has it going through all the same steps
[2012-09-11 18:36:09 -0400] leifmadsen: I've had that happen when someone else write a recipe in my list of recipes :)
[2012-09-11 18:36:13 -0400] btm: rava: can you gist the full output of -l debug?
[2012-09-11 18:36:23 -0400] rava: i was going to start digging into the report handlers to confirm those shell commands are actually being run and it's not just saying it's going to run those
[2012-09-11 18:36:30 -0400] ev0ldave: any plans to include ruby-shadow in the chef install?
[2012-09-11 18:36:45 -0400] leifmadsen: well, you'll see it popping up on the console tellign you what it is lookgin to do, but might not actually be making changes
[2012-09-11 18:37:02 -0400] leifmadsen: like if I tell it to install ssh server via the package resource, it's not installing ssh server every time I run it
[2012-09-11 18:37:26 -0400] leifmadsen: but I'll see the same output (info) whether it installed or not as it is doing the check at that point
[2012-09-11 18:39:57 -0400] rava: i noticed issues with it when it would fail to finish executing if a user was logged in
[2012-09-11 18:40:25 -0400] rava: as it would try to run usermod commands against the user id and puke for obvious reasons, even though the user's uid is already what is specified in the databag
[2012-09-11 18:53:31 -0400] maxmanders: My lack of Ruby may be letting me down here... trying to dynamically create parameter to run_list in a role depending on whether chef-solo is being used...
[2012-09-11 18:54:11 -0400] maxmanders: I've create an array, and I unshift a recipe on to it depending on $condition... but what do I actually pass to run_list, is it just a comma separated list of strings; can I pass an array?
[2012-09-11 18:55:39 -0400] autif: Is it possible to read the signing_key from an environment variable instead of a file for the rest server API - Chef::REST.new(chef_server_url, client_name, signing_key)
[2012-09-11 18:56:29 -0400] btm: autif: for chef, or for something you're writing to talk to the server?
[2012-09-11 18:58:21 -0400] jtimberman: maxmanders: roles are unaware of whether they're run under chef-solo or not.
[2012-09-11 18:59:04 -0400] jtimberman: maxmanders: you can do in a recipe: include_recipe "mything" if Chef::Config[:solo]
[2012-09-11 18:59:27 -0400] autif: btm: For a rails app that will be (say) deleting nodes from the server - it is hosted on heroku and we do not want to check in a workstation.pem key wfor example. But, we can set an environment variable using their webUI. So ...
[2012-09-11 19:03:59 -0400] maxmanders: jtimberman: Ah okay, my plan was to create a role, define an array for the recipe list, and use if Chef::Config[:solo] to unshift a different recipe to the array of recipies accordingly.. then call run_list with the array, which will have the right recipe prepended...
[2012-09-11 19:05:08 -0400] maxmanders: jtimberman: Specific problem, I want to use users::sysadmins for production, but testing using vagrant and chef-solo, users::sysadmins won't work apparently due to that recipe requiring chef server (from what I've read)
[2012-09-11 19:09:55 -0400] maxmanders: Perhaps this gist will make my intentions clearer: https://gist.github.com/3701054
[2012-09-11 19:11:32 -0400] Babar: btm: thanks! [2012-09-11T21:11:08+02:00] INFO: Chef Run complete in 100.703359 seconds
[2012-09-11 19:11:59 -0400] autif: OK read the code in gems/chef/lib/chef/rest/auth_credentials.rb and it looks like signing_key is required as a file.
[2012-09-11 19:14:25 -0400] btm: autif: maybe a patch that refactored getting the credentials out of a file, out, and then you could provide it however you wanted.
[2012-09-11 19:38:38 -0400] pabst^: hmmmmm I'm starting to feel like sold isn't properly building indexes
[2012-09-11 19:38:44 -0400] pabst^: or I'm using knife search completely wrong
[2012-09-11 19:41:45 -0400] organicveggie: Restart chef-solr (0.9.14) and now I'm getting "SEVERE: java.lang.RuntimeException: java.io.IOException: read past EOF".
[2012-09-11 19:41:52 -0400] organicveggie: Any suggestions?
[2012-09-11 19:44:28 -0400] organicveggie: Tried running "knife index rebuild", but that fails -- WARN: HTTP Request Returned 500 Internal Server Error: 500
[2012-09-11 19:45:01 -0400] organicveggie: Tried moving the Solr data directory out of the way and recreating the entire index. That also failed - WARN: HTTP Request Returned 500 Internal Server Error: Connection failed - user: chef
[2012-09-11 19:49:23 -0400] organicveggie: Bueller?
[2012-09-11 19:51:10 -0400] richoid: Hi all, anyone doing bootstrap to citrix xenserver with chef-full omnibus client?
[2012-09-11 19:51:43 -0400] richoid: ... I haven't, was just trying, noticed it's failing on rpmlib dependencies.
[2012-09-11 20:02:09 -0400] jcran: should cookbook_file overwrite existing files w/ a :create action?
[2012-09-11 20:02:23 -0400] jcran: i'm not seeing that it does, maybe i should be using templates instead?
[2012-09-11 20:02:52 -0400] frank_: yes
[2012-09-11 20:03:06 -0400] frank_: only :create_if_missing will not overwrite if it exists
[2012-09-11 20:03:40 -0400] frank_: (if you have no "unless" or "only_if" or other things that prevent execution)
[2012-09-11 20:04:38 -0400] rava: god, nothing makes you appreciate ruby or python more than having to touch php
[2012-09-11 20:04:51 -0400] frank_: :)
[2012-09-11 20:05:36 -0400] jcran: frank_: perhaps :create_if_missing is the default?
[2012-09-11 20:06:00 -0400] frank_: not in recent ones no
[2012-09-11 20:06:15 -0400] jcran: weird. i'm on 10.14.2
[2012-09-11 20:06:48 -0400] frank_: http://wiki.opscode.com/display/chef/Resources#Resources-CookbookFile
[2012-09-11 20:06:52 -0400] frank_: create is default
[2012-09-11 20:06:54 -0400] btm: jcran: create is the default, and we generally consider create_if_missing to not be the best action we ever put in there.
[2012-09-11 20:07:16 -0400] jcran: hehe, k - probably my bug, trying to track it down
[2012-09-11 20:07:18 -0400] frank_: btm: it's usefull, although I tend to prefer not_if constructions over create_if_missing
[2012-09-11 20:07:33 -0400] rava: btm: btw, found out why my recipes puked in test yesterday with the user lwrp bug. the chef-client recipe has :upgrade defined, so on a client run in the env it got the broken packages.
[2012-09-11 20:07:44 -0400] btm: frank_: right. TMTOWTDI, but some ways are better than others :)
[2012-09-11 20:08:47 -0400] btm: rava: what do you mean by 'broken packages' ?
[2012-09-11 20:09:34 -0400] rava: btm: yesterday we were hashing over the issue with the user lwrp not using the right flags and puking the users::sysadmin recipe
[2012-09-11 20:10:40 -0400] organicveggie: Okay. Managed to get chef-solr running again. but despite running "knife index rebuild", I'm not seeing everything in search results.
[2012-09-11 20:10:55 -0400] rava: btm: then you pushed the updates in 10.4.2 at some point fixing it, all afternoon i was trying to figure out how the broken lwrp had gotten there in the first place, and only thing i can see having caused it was that the chef-client recipe updates when run
[2012-09-11 20:11:41 -0400] rava: btm: specifically the usermod flags (at least that's what was breaking for me on ubuntu/debian)
[2012-09-11 20:11:55 -0400] pabst^: ah!
[2012-09-11 20:11:58 -0400] pabst^: I'm so close!@
[2012-09-11 20:13:18 -0400] joemiller: btm: trying to fix provider/git.rb in 10.14.2, but the 'remote_resolve_reference' in provider/git.rb doesn't seem to be called. it seems like another one is being called, but i can't find it in the code. any ideas?
[2012-09-11 20:15:16 -0400] pabst^: What would be the proper way to write this search?? knife search node "network:venet0:0::addresses:broadcast:*" - the venet0:0 is the interface name, but i think knife is seeing the : as a separator
[2012-09-11 20:17:01 -0400] ed1: Looking for an easy way of upgrading a chef 0.10.6 server to 0.10.14. I'd like to be able to preserve client & node info at a minimum. Any suggestions?
[2012-09-11 20:17:33 -0400] btm: ed1: backup, then just upgrade the gems and restart.
[2012-09-11 20:17:48 -0400] ed1: ok - that sounds almost too easy. Let me give it a shot.
[2012-09-11 20:18:30 -0400] btm: ed1: upgrades within the same major version (Chef 9, Chef 10, Chef 11) shouldn't have major breaking changes, like a different database schema or anything.
[2012-09-11 20:18:48 -0400] btm: pabst^: did you try \: ?
[2012-09-11 20:18:59 -0400] ed1: btm: thanks!
[2012-09-11 20:19:20 -0400] pabst^: btm: I did, I just saw that and added it in, still throwing an error, not sure why yet though thanks
[2012-09-11 20:21:40 -0400] pabst^: doesn't matter, something is wrong with the query anyway, it returns nothing
[2012-09-11 20:22:24 -0400] btm: pabst^: what about: knife search node network_venet0\:0_addresses_broadcast:*
[2012-09-11 20:22:40 -0400] btm: pabst^: what about: knife search node 'network_venet0\:0_addresses_broadcast:*'
[2012-09-11 20:22:46 -0400] jcran: frank_ / btm: thanks for the help, got it sorted, bug in my bootstrapping process
[2012-09-11 20:26:22 -0400] pabst^: AH! Thank btw!! - I had also forgotten a field so what does the _ do?
[2012-09-11 20:26:39 -0400] pabst^: or what is the best practice for using _ over :?
[2012-09-11 20:26:57 -0400] rocket: how would I put a breakpoint in a chef cookbook so I can inspect values at that point etc .. in order to better debug this environment
[2012-09-11 20:27:59 -0400] btm: pabst^: in search : separates the field name to search and the value to search for, and you use _ to seperate nested field names.
[2012-09-11 20:28:25 -0400] btm: rocket: http://wiki.opscode.com/display/chef/Shef#Shef-TheBreakpointResource
[2012-09-11 20:28:29 -0400] pabst^: ah ok makes sense
[2012-09-11 20:28:49 -0400] btm: pabst^: lots of good stuff here: http://wiki.opscode.com/display/chef/Search
[2012-09-11 20:30:16 -0400] joemiller: btm: trying to figure out why this fixes the git issue i'm seeing in 10.14.2. drawing a blank. http://tickets.opscode.com/browse/CHEF-3437?focusedCommentId=27028#comment-27028
[2012-09-11 20:30:38 -0400] pabst^: Thanks btm I did have that up, I really must have not read it well enough appreciate the help!
[2012-09-11 20:31:38 -0400] btm: joemiller: Not sure off the top of my head. I'm finishing up CHEF-3435 right now which is nearby in terms of code, I'll look into that after.
[2012-09-11 20:32:56 -0400] barefoot: If I have a search object with many nodes, is there an easy to to pull out matches without iterating over the entire object? like if I wanted to pull all the nodes with a certain recipe out?
[2012-09-11 20:33:47 -0400] btm: barefoot: http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-select
[2012-09-11 20:34:06 -0400] joemiller: btm: ok. thanks
[2012-09-11 20:35:48 -0400] barefoot: btm: tyvm
[2012-09-11 20:39:31 -0400] btm: joemiller: do you have a recipe snippet that reproduces CHEF-3437? perhaps you could whip one up using the opscode chef repo?
[2012-09-11 20:40:13 -0400] joemiller: btm: i'll try to whipe one up. right now it's a piece of a much larger recipe
[2012-09-11 20:40:16 -0400] joemiller: *whip
[2012-09-11 20:41:43 -0400] renchap: \o
[2012-09-11 20:41:45 -0400] renchap: oops
[2012-09-11 20:41:58 -0400] oddover_: ohai chefs
[2012-09-11 20:42:16 -0400] TTimo: welcome to the knife party
[2012-09-11 20:42:17 -0400] oddover_: I have a question for you guys
[2012-09-11 20:42:23 -0400] oddover_: hehe
[2012-09-11 20:43:20 -0400] oddover_: I was wondering if chef has any capability of being able to edit files or databases on a different system. I guess a good example would be: could a node add itself to DNS?
[2012-09-11 20:43:48 -0400] btm: oddover_: does DNS have an API?
[2012-09-11 20:43:57 -0400] oddover_: not sure
[2012-09-11 20:44:17 -0400] btm: oddover_: so, the answer is yes, but the other system needs a way to programmatically access it.
[2012-09-11 20:44:19 -0400] geekbri: Chef allows you to write regular old ruby, so really you can do just about anything
[2012-09-11 20:44:41 -0400] oddover_: @btm: Makes sense
[2012-09-11 20:44:50 -0400] oddover_: geekbri: also makes sense.
[2012-09-11 20:44:55 -0400] btm: oddover_: http://ckbk.it/dynect is a cookbook that allows you to add nodes to Dyn Dynect DNS service.
[2012-09-11 20:45:08 -0400] jforest: ls
[2012-09-11 20:45:10 -0400] jforest: dammit
[2012-09-11 20:45:13 -0400] jforest: I've been doing that all day.
[2012-09-11 20:45:13 -0400] oddover_: lol
[2012-09-11 20:45:20 -0400] jforest: I think it's quitting time
[2012-09-11 20:45:52 -0400] oddover_: ok, thanks guys. This was more of a curiosity question
[2012-09-11 20:46:14 -0400] geekbri: jforest: don't you mean you think its :q time
[2012-09-11 20:46:16 -0400] geekbri: ;)
[2012-09-11 20:46:25 -0400] btm: oddover_: the F5 guys have cooked up recipes for adding nodes to their load balancers http://bit.ly/IEWFwr
[2012-09-11 20:46:27 -0400] chip-: that's why they're called :q socks
[2012-09-11 20:48:05 -0400] joemiller: btm: ticket updated
[2012-09-11 20:51:24 -0400] btm: joemiller: how is chef installed?
[2012-09-11 20:51:58 -0400] jforest: geekbri: true true, it is :q! time
[2012-09-11 20:52:07 -0400] geekbri: for safety :qa!
[2012-09-11 20:53:26 -0400] joemiller: btm: omnibus
[2012-09-11 20:53:35 -0400] joemiller: btm: chef-10.14.2-1.el6.x86_64
[2012-09-11 20:56:37 -0400] btm: joemiller: sudo /opt/chef/embedded/bin/gem cleanup chef
[2012-09-11 20:56:42 -0400] btm: joemiller: try that
[2012-09-11 20:56:56 -0400] btm: joemiller: I still can't repro on my workstation.
[2012-09-11 20:58:02 -0400] halkeye: is there a fix for chef+vagrant readily available to overcome the fact ohai/chef records the internal ip (10.0.x.x) instead of any of the other ones? So recipes can't use that data reliably (i'm looking at the application_ruby trying to find a db server)
[2012-09-11 20:58:07 -0400] joemiller: chef-0.10.10 gem was removed. i saw that earlier, but renamed the provider/git.rb file and still had the issue. running again now..
[2012-09-11 20:58:33 -0400] joemiller: btm: ok, works fine now
[2012-09-11 20:58:48 -0400] btm: halkeye: ohai records all the ip addresses under network/interfaces
[2012-09-11 20:59:01 -0400] btm: joemiller: yay/boo. i hate that.
[2012-09-11 20:59:43 -0400] halkeye: btm, yea but database recipe uses "ipaddress"
[2012-09-11 21:01:35 -0400] btm: halkeye: for what, binding the database to an interface?
[2012-09-11 21:02:12 -0400] joemiller: btm: damn. i see what did it. we were installing 'knife-github-cookbooks' via chef_gem which pulled chef-0.10.10 into the embedded gems. argh
[2012-09-11 21:02:56 -0400] btm: joemiller: I still don't fully understand how that happens, but generally hate ruby for its friendliness toward having many versions of the same libraries installed.
[2012-09-11 21:03:45 -0400] btm: halkeye: the mysql cookbook defaults to using ipaddress for its bind address, but you can set mysql['bind_address'] to something else in a role
[2012-09-11 21:03:58 -0400] hoover_damm: chef-client 0.10.10
[2012-09-11 21:04:01 -0400] hoover_damm: to get 0.10.10
[2012-09-11 21:04:08 -0400] hoover_damm: chef-client 10.12.2
[2012-09-11 21:04:12 -0400] hoover_damm: such fun
[2012-09-11 21:04:32 -0400] hoover_damm: have 4 gems installed that way and call them that way
[2012-09-11 21:04:53 -0400] btm: hoover_damm: every now and then I like being able to do: 'chef-client ; chef-client _OLDVER_' but that's not really worth it overall.
[2012-09-11 21:05:13 -0400] hoover_damm: btm, it's not really a feature
[2012-09-11 21:05:16 -0400] btm: joemiller: if you could explain that on the ticket in case someone else ends up there, that'd be great.
[2012-09-11 21:05:24 -0400] hoover_damm: btm, but opinions are like assholes and everyone has one.
[2012-09-11 21:05:32 -0400] halkeye: btm, https://github.com/opscode-cookbooks/application_ruby/blob/master/providers/rails.rb#L161
[2012-09-11 21:05:51 -0400] btm: hoover_damm: well, someone wrote it into the rubygems wrapper, so someone figured it was a feature.
[2012-09-11 21:05:57 -0400] joemiller: btm: i did. tnx
[2012-09-11 21:06:41 -0400] rocket: is there a best practices doc on what to put into environments, vs databags, vs roles?
[2012-09-11 21:08:27 -0400] btm: halkeye: you can set database[:host] on the role, see https://github.com/opscode-cookbooks/application/blob/master/libraries/default.rb#L114
[2012-09-11 21:09:20 -0400] hoover_damm: btm, likely an engine yard employee
[2012-09-11 21:10:36 -0400] btm: rocket: role data should be related to that role, e.g. a webserver role should have the port the web server runs on defined in the role.
[2012-09-11 21:11:07 -0400] btm: rocket: data bags are for data that isn't specifically related to a role, like a list of users.
[2012-09-11 21:12:07 -0400] btm: rocket: environments are used when settings differ between an environment, like when production is on big iron and dev is on a laptop, and your software has to run with different characteristics like less memory or without a load balancer.
[2012-09-11 21:12:40 -0400] rocket: ok thats good to know .. thanks :)
[2012-09-11 21:13:51 -0400] martinisoft: quick question on making the chef-repo, is it bad practice (even if its a hidden, private repo) to track the validator keys in the repo?
[2012-09-11 21:14:37 -0400] hoover_damm: btm, always ended up doing wacky stuff there :/ felt right at the time
[2012-09-11 21:15:25 -0400] maxmanders: The following gist /works/ insofar as I can use a single role that works on both chef-solo/vagrant and e.g. EC2... I'm just learning and want to know if this is the correct *chef* way to achieve my goal: https://gist.github.com/3702112
[2012-09-11 21:16:18 -0400] btm: rocket: https://github.com/opscode/chef-fundamentals/blob/master/slides/additional-topics/01_slide.md
[2012-09-11 21:17:48 -0400] rocket: thanks btm
[2012-09-11 21:25:46 -0400] btm: martinisoft: i can't think of a reason why that's terrible. everyone shares that file in a different way, just remember to treat it like a confidential credential.
[2012-09-11 21:36:40 -0400] hoover_damm: and don't be afraid to regenerate it
[2012-09-11 21:38:02 -0400] halkeye: btm, sorry, for application database[:host] that goes under default_attributes : { database : { host => "blah" } } right?
[2012-09-11 21:38:24 -0400] Babar: what is the recommended way to store an attribute for a node depending on its graphic card (thus extracted from lspci)?
[2012-09-11 21:39:03 -0400] cheeseplus: Babar: you could shove them into a databag
[2012-09-11 21:39:26 -0400] cheeseplus: Babar: does ohai have the information in it or do you have to use LSPCI to get what you want?
[2012-09-11 21:39:41 -0400] Babar: ohai doesn't have the information in it, afaict
[2012-09-11 21:40:00 -0400] btm: halkeye: in a role I'd put it in override_attributes.
[2012-09-11 21:40:13 -0400] hoover_damm: Babar, lspci plugiin so you can get it?
[2012-09-11 21:40:26 -0400] cheeseplus: ^^
[2012-09-11 21:40:31 -0400] btm: halkeye: http://wiki.opscode.com/display/chef/Attributes#Attributes-AttributeTypeandPrecedence
[2012-09-11 21:41:15 -0400] hoover_damm: Babar, https://github.com/opscode/ohai/pull/37/files is a good place to start
[2012-09-11 21:41:34 -0400] hoover_damm: rather old (open) pull request
[2012-09-11 21:42:07 -0400] _0x783czar: Any idea why I might be getting this error when I try to run ohai on one of my clients? http://pastebin.com/xAbpLAnF
[2012-09-11 21:42:24 -0400] Babar: hoover_damm: nice. But does that mean each chef run will run this lspci?
[2012-09-11 21:42:44 -0400] hoover_damm: Babar, why is that bad?
[2012-09-11 21:43:23 -0400] btm: _0x783czar: 'bundle list'?
[2012-09-11 21:44:01 -0400] Babar: hoover_damm: I prefer on-demand. if I save the information somewhere, it's not for ohai to re-build it on every run
[2012-09-11 21:44:21 -0400] hoover_damm: Babar, your silly
[2012-09-11 21:44:54 -0400] _0x783czar: btm: bear with me, I'm still a bit of a n00b with ruby.  What is 'bundle list' supposed to do?
[2012-09-11 21:45:09 -0400] btm: Babar: but then you have to remember to ask for it to be there or not be stale, rather than having it always available.
[2012-09-11 21:45:11 -0400] hoover_damm: Babar, or I am.  But I would run lspci as an ohai plugin.  Yes I would want it to be run every time I run chef-client and ensure it's updated, why wouldn't I?
[2012-09-11 21:45:32 -0400] hoover_damm: Babar, If my recipe is querying against pci ids in the server I want to ensure the answer is fresh
[2012-09-11 21:45:58 -0400] makerbreakr: _0x783czar it will list the fiels in your Gemfile
[2012-09-11 21:46:10 -0400] btm: _0x783czar: well, it looks like you have bundler installed. Ruby has a problem where different versions of libraries generally aren't compatible, so bundler is one solution to say "when I run this ruby application, only expose these gems (libraries) and these versions of those gems to it"
[2012-09-11 21:46:22 -0400] Babar: right. So for the one time in the year, or most likely in the lifetime of the machine, that it might change, you will run it every time, every half an hour. Sorry, that's not how I do it.
[2012-09-11 21:46:51 -0400] hoover_damm: if you have chef-client setup to run every 30minutes, yes that's how I do it.
[2012-09-11 21:46:56 -0400] btm: _0x783czar: unfortunately it can also do some wacky stuff, and the environment your ruby apps run in aren't always the same as what your environment appears to be to you.
[2012-09-11 21:47:01 -0400] hoover_damm: if you have chef-client setup to run once, then it would only run once
[2012-09-11 21:47:21 -0400] Babar: what's the point of using chef if you only run chef-client once?
[2012-09-11 21:48:07 -0400] btm: Alright you two, the data collection model is fine either way :)
[2012-09-11 21:48:25 -0400] btm: _0x783czar: so I was curious what 'bundle list' returned and if it would give a list of gems like what was in your paste.
[2012-09-11 21:48:27 -0400] jordane: Babar: some people only run chef when they need to. For example: we have an automated deployment system that runs chef when a new code version is deployed.
[2012-09-11 21:48:27 -0400] Babar: but anyway, back to my original question: is there a way to store atributes from a receipe?
[2012-09-11 21:48:30 -0400] hoover_damm: I really don't know what your point is Babar as you've not said it.
[2012-09-11 21:48:33 -0400] _0x783czar: btm: OK, well that's not good, 'bundle list' echoes back "Could not locate Gemfile"
[2012-09-11 21:48:41 -0400] joewilliams: if i wanted to write a chef-client in a different language where can i find docs on how to auth, the http endpoints that i need to implement and etc?
[2012-09-11 21:48:45 -0400] Babar: jordane: yes. THis I understand. But that's not once.
[2012-09-11 21:49:21 -0400] jordane: Babar: fair enough.
[2012-09-11 21:49:22 -0400] btm: joewilliams: http://wiki.opscode.com/display/chef/Server+API
[2012-09-11 21:49:23 -0400] Babar: hoover_damm: I've said it. Running many commands to fill out ohai just in case you might need it is, to my humble opinion, not the right way to do it.
[2012-09-11 21:49:36 -0400] _0x783czar: makerbreakr: thanks, 'bundle list' echoes back "Could not locate Gemfile"
[2012-09-11 21:50:05 -0400] btm: _0x783czar: are you just running 'ohai' at your command prompt?
[2012-09-11 21:50:13 -0400] hoover_damm: Babar, I see nothing wrong with listing the pci ids every run... that's very light weight
[2012-09-11 21:50:18 -0400] Babar: jordane: and if one day I'll have time, I'll setup my cluster like this ;) But as for now I'm lazy and have very limited time, I poll every 30 min.
[2012-09-11 21:50:28 -0400] _0x783czar: btm: yes, and then piping it into less so I can search attributes
[2012-09-11 21:50:31 -0400] hoover_damm: Babar, now if you interpert them and store the names and the rest
[2012-09-11 21:50:50 -0400] btm: _0x783czar: what does this say: ls -l `which ohai`
[2012-09-11 21:50:51 -0400] hoover_damm: Babar, but it's just like having ohai run dmidecode every run
[2012-09-11 21:51:00 -0400] Babar: hoover_damm: my point exactly.
[2012-09-11 21:51:09 -0400] joewilliams: thanks btm
[2012-09-11 21:51:10 -0400] hoover_damm: which I value
[2012-09-11 21:51:13 -0400] joemiller: btm: just built a fresh box with chef 10.14.2 omnibus and seeing that same failure on the git sha ref. no chef 10.10 gem polluting the embedded ruby space either. investigating again
[2012-09-11 21:51:23 -0400] hoover_damm: so whatever
[2012-09-11 21:51:25 -0400] Babar: hoover_damm: then I think we have to disagree on that :)
[2012-09-11 21:51:41 -0400] _0x783czar: btm: "lrwxrwxrwx 1 root root 18 Sep 11 12:32 /usr/bin/ohai -> /opt/chef/bin/ohai"
[2012-09-11 21:52:02 -0400] btm: joemiller: *nod* I've got to bail soon, update the ticket if you can figure out what is causing it. If I can repro it I'll fix it.
[2012-09-11 21:52:04 -0400] hoover_damm: Babar, data collection is easy to disagree on
[2012-09-11 21:52:08 -0400] hoover_damm: gets too opinionated
[2012-09-11 21:52:30 -0400] Babar: agreed.
[2012-09-11 21:52:36 -0400] Babar: so anyway, is there a way to store an attribute? :)
[2012-09-11 21:52:39 -0400] btm: _0x783czar: hrm. can you pastebin '/opt/chef/embedded/bin/gem list' ?
[2012-09-11 21:52:56 -0400] hoover_damm: Babar, make an attribute run a command to grab it?
[2012-09-11 21:53:15 -0400] joewilliams: btm: are there docs on auth? or do i just need to read mixlib-auth to figure out how to form all the headers and etc?
[2012-09-11 21:53:36 -0400] ranjibd: can anyone point me to examples of chefspec tests involving data bags ?
[2012-09-11 21:53:40 -0400] btm: Babar: all node attributes are saved to the server at the end of the run. write a recipe to run the command, parse the output and put them in node attributes (node['lspci'] = Mash.new)
[2012-09-11 21:53:40 -0400] hoover_damm: Babar, that is your goal.  attributes/gfxcard.rb and it grabs it one time only
[2012-09-11 21:53:55 -0400] _0x783czar: btm: sure thing.  http://pastebin.com/rs5Qf5xQ
[2012-09-11 21:53:56 -0400] hoover_damm: with the bit that ^^ btm tossed in
[2012-09-11 21:54:00 -0400] hoover_damm: and you should be rocking
[2012-09-11 21:54:03 -0400] Babar: btm: exactly what I wanted to know! Perfect. thanks a lot!
[2012-09-11 21:54:09 -0400] btm: joewilliams: if there are, they're probably out of date since we just bumped the auth protocol version.
[2012-09-11 21:54:53 -0400] joewilliams: ok
[2012-09-11 21:54:54 -0400] btm: _0x783czar: that looks very wrong. you should reinstall omnibus.
[2012-09-11 21:55:23 -0400] btm: joewilliams: this is the historical documentation though, I guess it's a valuable place to start: http://wiki.opscode.com/display/chef/Making+Authenticated+API+Requests
[2012-09-11 21:56:06 -0400] btm: joewilliams: it just won't have info on the new auth protocol which has some additional headers.
[2012-09-11 21:56:12 -0400] _0x783czar: btm: alright, is there an better way to do that other than bootstrapping again?
[2012-09-11 21:59:08 -0400] joewilliams: btm: is the auth api documented there still functional with oss chef-server?
[2012-09-11 22:00:36 -0400] z: joewilliams: What're you writing a new chef-client using?
[2012-09-11 22:01:31 -0400] btm: _0x783czar: sudo true ; curl https://www.opscode.com/chef/install.sh | sudo bash
[2012-09-11 22:01:40 -0400] btm: joewilliams: AFAIK
[2012-09-11 22:07:52 -0400] joewilliams: z: we are seeing what'll take to write a JS client, we want to build some dashboards using chef data
[2012-09-11 22:09:15 -0400] hoover_damm: nice!
[2012-09-11 22:21:18 -0400] cheeseplus: Has anyone seen or done any integration of the chef-users cookbook with LDAP?
[2012-09-11 22:23:32 -0400] TTimo: anyone know/recommend some cookbooks to manage partitioning -> create filesystem -> RAID + LVM setup ?
[2012-09-11 22:23:59 -0400] TTimo: I found bits and pieces, opscode's ebs and lvm .. but nothing that has everything together
[2012-09-11 22:24:19 -0400] TTimo: in particular the partition/mkfs/md part
[2012-09-11 22:27:52 -0400] halkeye: https://github.com/opscode-cookbooks/application/blob/master/libraries/default.rb#L118 <-- can anyone how I can set database['host']? It doesn't seem to work with attributes set on the node or role level as far as I can tell
[2012-09-11 22:29:08 -0400] halkeye: i'm pretty sure that code is checking if the node/application has the database receipe, but I am not certain
[2012-09-11 22:34:19 -0400] awgross|flashman: does opscode give out awards for most obscure bugfix?  I think I just submitted a winner
[2012-09-11 22:34:29 -0400] awgross|flashman: http://tickets.opscode.com/browse/COOK-1645
[2012-09-11 22:35:34 -0400] awgross|flashman: TTimo: I have some stuff along those lines, but it assumes no partitioning and instead gets whole drives.  Sits on Top of ebs cookbook
[2012-09-11 22:36:30 -0400] TTimo: cool. is that posted on github ?
[2012-09-11 22:37:00 -0400] awgross|flashman: TTimo: unfortunately no, but I can make some gists.  Needs some cleanup and refactoring before I can really OS it
[2012-09-11 22:39:48 -0400] awgross|flashman: TTimo: here is the LWRP provider
[2012-09-11 22:39:51 -0400] TTimo: fair enough. I'm going to trim down the complexity of this whole thing significantly anyway, because I'm on a deadline
[2012-09-11 22:39:51 -0400] awgross|flashman: https://gist.github.com/3702689
[2012-09-11 22:40:29 -0400] awgross|flashman: Here is the LWPR resource
[2012-09-11 22:40:29 -0400] awgross|flashman: https://gist.github.com/3702694
[2012-09-11 22:40:36 -0400] awgross|flashman: Here is an example usage
[2012-09-11 22:41:42 -0400] awgross|flashman: https://gist.github.com/2d4596d09d340bbb7eb5
[2012-09-11 22:42:02 -0400] awgross|flashman: The "default" recipe, which installs dependencies
[2012-09-11 22:42:27 -0400] TTimo: cool. looks like that'll be pretty useful, thanks
[2012-09-11 22:42:35 -0400] awgross|flashman: https://gist.github.com/3702717
[2012-09-11 22:42:40 -0400] awgross|flashman: and there is one more big thing
[2012-09-11 22:42:49 -0400] awgross|flashman: you need to modify the AWS::EBS cookbook
[2012-09-11 22:42:58 -0400] awgross|flashman: to add some timeouts and retries for ebs attachment
[2012-09-11 22:43:06 -0400] awgross|flashman: because AWS loves to respond with drives being busy
[2012-09-11 22:43:10 -0400] awgross|flashman: when they arent
[2012-09-11 22:43:13 -0400] awgross|flashman: takes 3-5 tries
[2012-09-11 22:43:16 -0400] awgross|flashman: then they are ok
[2012-09-11 22:43:18 -0400] TTimo: ow
[2012-09-11 22:44:43 -0400] awgross|flashman: err wait
[2012-09-11 22:44:45 -0400] awgross|flashman: not the ebs one
[2012-09-11 22:44:49 -0400] awgross|flashman: the mdadm recipe
[2012-09-11 22:45:20 -0400] TTimo: k. haven't touched that one yet
[2012-09-11 22:45:55 -0400] TTimo: does gist stuff expire. I'll just save the URLs
[2012-09-11 22:46:01 -0400] awgross|flashman: Here is the modified :create statement insdie the LWRP https://gist.github.com/3702731
[2012-09-11 22:46:02 -0400] awgross|flashman: no
[2012-09-11 22:46:06 -0400] awgross|flashman: itll be there for a long time
[2012-09-11 22:46:21 -0400] awgross|flashman: its going to be kidna confusing
[2012-09-11 22:46:29 -0400] awgross|flashman: since i havent really refactored it well
[2012-09-11 22:46:39 -0400] awgross|flashman: so feel free to ask questions when you get around to it
[2012-09-11 22:48:19 -0400] TTimo: yeah .. I suspect it'll be a while
[2012-09-11 22:48:31 -0400] TTimo: but I'll push stuff to the backlog for sure :)
[2012-09-11 23:00:54 -0400] _0x783czar: So it seems that I may be having a problem.  I think that my ruby or my rvm cookbook is breaking my embedded chef environ.  I can't use ohai after I execute my run list.  And my chef gem list is cut by over half.
[2012-09-11 23:01:05 -0400] fish_: hrm, trying to install chef-server-api but when starting chef-server I get:
[2012-09-11 23:01:06 -0400] fish_: Loading init file from ./config/init.rb
[2012-09-11 23:01:06 -0400] fish_: /usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- chef/environment (LoadError)
[2012-09-11 23:01:14 -0400] fish_: did I miss something?
[2012-09-11 23:01:21 -0400] _0x783czar: Has anyone encountered a problem like that before?
[2012-09-11 23:02:06 -0400] fish_: might be related to the fact that I split up chef into one host running couchdb, rabbitmq, chef-solr and chef-expander, the other one running chef-server/chef-server-api
[2012-09-11 23:03:33 -0400] fish_: hrm.. chef-server doesn't depend on chef? ;)
[2012-09-11 23:03:39 -0400] fish_: probably thats the reason
[2012-09-11 23:43:54 -0400] martinisoft: is there a cookbook or method to set hostnames on a chef managed node?
[2012-09-11 23:48:26 -0400] Pushnell: what's the right way to do a boolean attribute?  = 'true' ?
[2012-09-11 23:50:40 -0400] Pushnell: martinisoft: http://community.opscode.com/cookbooks/hostname
[2012-09-11 23:51:04 -0400] martinisoft: so weird, did not find that cookbook in search
[2012-09-11 23:57:35 -0400] 44UAAEIUW: weird i never seen that either
[2012-09-11 23:58:24 -0400] flaccid__: i made lwrp for hostname in https://github.com/flaccid/cookbooks/tree/master/cookbooks/system
[2012-09-11 23:58:53 -0400] flaccid__: i should probably start submitting cookbooks to community site

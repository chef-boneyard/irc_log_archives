[2012-07-24 00:01:00 -0400] rava: knife node search users "action:remove"
[2012-07-24 00:01:07 -0400] rava: er data bag
[2012-07-24 00:01:13 -0400] rava: knife data bag search users "action:remove"
[2012-07-24 00:01:56 -0400] rava: god i'm an idiot, sorry forgot search isn't in the data bag sub command list
[2012-07-24 00:02:00 -0400] rava: it's its own subcommand
[2012-07-24 00:02:29 -0400] rava: knife search users "action:remove"
[2012-07-24 00:02:32 -0400] rava: sorry :)
[2012-07-24 00:02:34 -0400] stormerider: yeah, just found that.
[2012-07-24 00:02:37 -0400] stormerider: no worries :)
[2012-07-24 00:03:43 -0400] stormerider: rava: http://pastebin.com/raw.php?i=PQuPe9pr
[2012-07-24 00:03:51 -0400] stormerider: is one of the users
[2012-07-24 00:04:11 -0400] rava: and the id == the username?
[2012-07-24 00:04:27 -0400] stormerider: yes
[2012-07-24 00:05:12 -0400] rava: and you didn't change the attribute value for search_group ?
[2012-07-24 00:05:17 -0400] rava: think it's sysadmins
[2012-07-24 00:08:18 -0400] kreedy: I'm having some NilClass issues using ruby_block in a mongodb cookbook. My ruby experience outside of chef is minimal. Anyone have a second to help out? https://github.com/edelight/chef-mongodb/blob/master/definitions/mongodb.rb#L169 is causing "ERROR: NoMethodError: ruby_block[config_replicaset] (mongodb::replicaset line 166) had an error: NoMethodError: undefined method `<=>' for nil:NilClass"
[2012-07-24 00:08:24 -0400] kreedy:  and it's defined in https://github.com/edelight/chef-mongodb/blob/master/libraries/mongodb.rb
[2012-07-24 00:09:15 -0400] kreedy: ubuntu 10.04, chef 0.10.8, ruby 1.8.7
[2012-07-24 00:11:29 -0400] stormerider: rava: dont see where that attribute is set, but i havent been touching it.
[2012-07-24 00:12:59 -0400] dnszero: Chef recipe help: I need a user resource to stop apache if a change is need. Any idea how I can make this happen? Trying to use service "blah" in a user resource doesn't work (invalid)
[2012-07-24 00:14:50 -0400] dnszero: Or more specifically: How do I make chef change the home dir of www-data user on a debian/ubuntu box?
[2012-07-24 00:16:26 -0400] stormerider: rava: here's a different user set to be removed, and the chef-client run that goes with it: http://pastebin.com/G6VJYt8m
[2012-07-24 00:17:38 -0400] rava: what's your users/providers/manage.rb look like for the remove action?
[2012-07-24 00:28:03 -0400] stormerider: rava: where is that found? I'm not seeing that in the cookbook
[2012-07-24 00:28:12 -0400] newb: kreedy, chef has a built in "oh father forgive them for they know not what they are doing" mode. to turn that off, set 'node['how_stoned_were_you'] => true' to install mongodb
[2012-07-24 00:28:23 -0400] newb: jk
[2012-07-24 00:29:04 -0400] stormerider: (wondering if the cookbook is incomplete or something... the joys of inheriting a platform...)
[2012-07-24 00:30:20 -0400] rava: stormerider: sorry storm, had to finish fixing something
[2012-07-24 00:30:42 -0400] rava: it should be in your chef repo/cookbooks/users/providers/manage.rb
[2012-07-24 00:30:52 -0400] rava: if you're using the same cookbook as i
[2012-07-24 00:31:15 -0400] kreedy: newb: lol
[2012-07-24 00:31:35 -0400] kreedy: i feel like it must be a classpath thing that i just don't get in ruby / ruby blocks
[2012-07-24 00:31:58 -0400] kreedy: it's defined as class Chef::ResourceDefinitionList::MongoDB in libraries/mongodb.rb - https://github.com/edelight/chef-mongodb/blob/master/libraries/mongodb.rb
[2012-07-24 00:32:06 -0400] kreedy: tried using that full class name too with no luck
[2012-07-24 00:33:19 -0400] kreedy: been combing through http://wiki.opscode.com/display/chef/Libraries as well :-/
[2012-07-24 00:40:03 -0400] stormerider: rava: apparently it is not. i only have cookbooks/users/(attributes|recipes|templates). I'll have to look into this further, my former cosysadmin may have been writing his own cookbook.
[2012-07-24 00:40:16 -0400] stormerider: rava: do you have a link to your cookbook?
[2012-07-24 00:42:53 -0400] rava: stormerider: sure 1 sec
[2012-07-24 00:43:29 -0400] stormerider: rava: no rush, thanks for all the help.
[2012-07-24 00:45:16 -0400] rava: https://github.com/opscode-cookbooks/users
[2012-07-24 00:45:44 -0400] rava: bunch of modifications of my own, but they all build on top of what's in that cookbook.
[2012-07-24 00:47:26 -0400] stormerider: rava: thanks. looks like the databag syntax matches what i have, so i'll give that a whirl.
[2012-07-24 00:48:11 -0400] stormerider: now if i could only convert my repo to use git... hopefully Atlassian adds git hosting to their OnDemand offering soon.
[2012-07-24 00:48:22 -0400] rava: stormerider: god i wish...
[2012-07-24 00:48:52 -0400] rava: stormerider: that cookbook is pretty easy to extend and tool around with. good learning sandbox
[2012-07-24 00:48:58 -0400] stormerider: apparently you can link to external DVCSes now with Fisheye on Demand, but they dont have the hosting part implemented  yet.
[2012-07-24 00:50:01 -0400] flaccid_: whats the recommended way to check for chef version in a recipe so i can use chef_gem if the chef version is high enough?
[2012-07-24 00:50:42 -0400] rava: rest easy everyone. goodluck in your endeavors
[2012-07-24 00:58:59 -0400] flaccid_: i guess its  node['chef_packages']['chef']['version'] but hmm need to do a >= on that somehow
[2012-07-24 01:02:02 -0400] kreedy: i've narrowed down the problem to this: members.sort!{ |x,y| x['name'] <=> y['name'] }
[2012-07-24 01:04:44 -0400] flaccid_: hopefully if puts node['chef_packages']['chef']['version'] >= '0.10.10' does the trick
[2012-07-24 01:06:14 -0400] kreedy: ah hah. members[0]['name'] is nil :-/
[2012-07-24 01:08:56 -0400] kreedy: should node[:name] be nil on all of my boxes?
[2012-07-24 01:19:57 -0400] kreedy: can i get a node's configured name in a recipe in the node object? or do i have to rely on node[:hostname] and node[:fqdn]?
[2012-07-24 01:20:43 -0400] ssd7: kreedy: node.name should work
[2012-07-24 01:21:11 -0400] ssd7: The name is a method on the node object, so node[:name] and node["name"] will NOT work.
[2012-07-24 01:21:25 -0400] kreedy: awesome. trying that now
[2012-07-24 01:26:06 -0400] kreedy: thanks ssd7! that worked, but now on to other issues. did that not used to be the case in earlier versions of chef?
[2012-07-24 01:27:30 -0400] ssd7: Hrmmm.  I'd have to do some historical digging.  I started using Chef post 0.10.0 and am not always clear on all the changes between 0.9 and 0.10
[2012-07-24 01:27:44 -0400] kreedy: gotcha
[2012-07-24 04:18:00 -0400] neurodamage: are there any maintained packages for fedora/centos/redhat systems? or is the typical way to get those setup by bootstrapping using the gem installation instead of packages?
[2012-07-24 04:19:10 -0400] flaccid: not afaik, most package is lagged or given up on with distros in a lot of respects
[2012-07-24 04:19:21 -0400] flaccid: gem install chef works great
[2012-07-24 04:19:31 -0400] flaccid: and the docs show all the other bootstrapping
[2012-07-24 04:19:42 -0400] flaccid: iirc there are docs specific to centos and redhat etc.
[2012-07-24 04:21:57 -0400] neurodamage: flaccid: true I'll use that method
[2012-07-24 04:42:41 -0400] miah: hi
[2012-07-24 04:58:20 -0400] BryanWB_: ohai chefs!
[2012-07-24 04:58:30 -0400] bemu: ohai!
[2012-07-24 05:00:38 -0400] miah: sup
[2012-07-24 05:01:29 -0400] neurodamage: ohai!
[2012-07-24 05:12:29 -0400] ssd7: Ohai Chefs
[2012-07-24 05:13:23 -0400] JoeGaudet1: Hey, total noob question. How do I work with an external git hosted cookbook.
[2012-07-24 05:13:37 -0400] JoeGaudet1: for instance
[2012-07-24 05:13:37 -0400] JoeGaudet1: https://github.com/phlipper/chef-percona
[2012-07-24 05:14:22 -0400] flaccid: work with?
[2012-07-24 05:15:07 -0400] JoeGaudet1: Like get it into my little chef repo
[2012-07-24 05:15:16 -0400] JoeGaudet1: Configure it, add it to my chef server.
[2012-07-24 05:15:17 -0400] JoeGaudet1: Etc
[2012-07-24 05:15:31 -0400] flaccid: have you read the docs yet?
[2012-07-24 05:15:52 -0400] JoeGaudet1: Been reading for a while. Something I am clearly missing.
[2012-07-24 05:15:58 -0400] JoeGaudet1: I've been making some head way with roles etc.
[2012-07-24 05:16:12 -0400] JoeGaudet1: using knife to add cookbooks from the community site
[2012-07-24 05:16:27 -0400] JoeGaudet1: Perhaps I am missing something obvious
[2012-07-24 05:16:32 -0400] flaccid: its covered in the docs
[2012-07-24 05:16:51 -0400] flaccid: i'll have a quick look
[2012-07-24 05:17:09 -0400] JoeGaudet1: I did a fair bit of googling, all I got was about authoring your own.
[2012-07-24 05:17:10 -0400] ssd7: JoeGaudet1: Unless I am misunderstanding you, there is no built-in way to point knife at an external git repo and have it added to your repository automatically.
[2012-07-24 05:17:24 -0400] ssd7: But, your chef-repo is simply a git repository
[2012-07-24 05:17:54 -0400] ssd7: And the end goal is to have the upstream cookbook as a folder in your cookbooks/ directory, so there are many paths that will get you what you want
[2012-07-24 05:18:08 -0400] flaccid: http://wiki.opscode.com/display/chef/Uploading+Cookbooks first result when i searched on the wiki.
[2012-07-24 05:18:16 -0400] JoeGaudet1: ssd7: Yeah that is infact the goal.
[2012-07-24 05:18:56 -0400] ssd7: JoeGaudet1: If you use lots of cookbooks from git that aren't on the community site, one option in librarian: https://github.com/applicationsonline/librarian
[2012-07-24 05:19:05 -0400] JoeGaudet1: I am by no means an expert git user, we use HG round here
[2012-07-24 05:19:37 -0400] flaccid: librarian is cool
[2012-07-24 05:21:17 -0400] ssd7: Some people use submodules, but I'm not particularly fond of them.  I've also done a bit with using git's "subtree" merge feature but it can get a bit hairy.  If you are just trying to get going, you can also just download the cookbook as tarball and untar it into a folder in your cookbook directory.
[2012-07-24 05:21:34 -0400] ssd7: Then just: git add the directory, git commit, and knife upload.
[2012-07-24 05:21:46 -0400] ssd7: Apologies if that is a bit terse.
[2012-07-24 05:24:12 -0400] ssd7: A good portion of the community has adopted yfeldblum's librarian that I linked to above.  But since I don't currently use it I can't offer much advice there.
[2012-07-24 05:24:32 -0400] JoeGaudet1: Looks not too bad to me
[2012-07-24 05:24:50 -0400] JoeGaudet1: I think I'll give it a go
[2012-07-24 05:24:54 -0400] JoeGaudet1: Thanks man
[2012-07-24 05:26:30 -0400] ssd7: No problem :)
[2012-07-24 05:29:19 -0400] flaccid: JoeGaudet1: this is also a handy read http://blog.base2.io/2012/05/01/vagrants-and-chefs-and-librarians-oh-my/
[2012-07-24 05:46:58 -0400] JoeGaudet1: ssd7: That worked great thanks
[2012-07-24 05:48:34 -0400] JoeGaudet1: Percona up and running
[2012-07-24 06:10:15 -0400] kreedy: anyone have thoughts on deploying opscode-cookbooks/firewall vs opscode-cookbooks/iptables?
[2012-07-24 06:43:24 -0400] huhongbo: is possible to add key to ohai -> network-> inteface
[2012-07-24 06:43:41 -0400] jatan: yes
[2012-07-24 06:43:46 -0400] jatan: you can add wherever
[2012-07-24 06:43:57 -0400] jatan: the structure is pretty flexible
[2012-07-24 06:44:25 -0400] huhongbo: i write the test code like that https://gist.github.com/3168424
[2012-07-24 06:44:38 -0400] huhongbo: but if_name doesn't apear on ohai output
[2012-07-24 07:19:23 -0400] huhongbo: some one can give a sample code to add new value to network interface
[2012-07-24 07:19:50 -0400] flaccid: i would of thought ohai would pick up all interfaces
[2012-07-24 07:20:08 -0400] huhongbo: i try the code network['interfaces'].keys.each ,it cannot add too
[2012-07-24 07:21:11 -0400] huhongbo: i'm newbie to ruby
[2012-07-24 07:21:16 -0400] flaccid: run ohai from the command line and grep out the interface, it should be there...
[2012-07-24 07:21:42 -0400] flaccid: but im not sure how to add, maybe jatan can verify that
[2012-07-24 07:21:58 -0400] flaccid: (guess you can make a custom ohai plugin). sorry i don't know much in this area..
[2012-07-24 07:22:16 -0400] huhongbo: yes, i'm writing the custom ohai plugin
[2012-07-24 07:22:43 -0400] flaccid: did you follow the doc?
[2012-07-24 07:23:41 -0400] huhongbo: i want to add new value to exist mash network[interfaces][iface],i'm following the doc ,but the doc is not so clear to add value to exist mash
[2012-07-24 07:25:14 -0400] huhongbo: sample code https://gist.github.com/3168584
[2012-07-24 07:32:48 -0400] huhongbo: sorry , i made a big mistake ,but include the ohai plugins dir
[2012-07-24 07:43:40 -0400] nacer: ohai
[2012-07-24 08:41:37 -0400] specialsauce: morning chefs. I'm trying to set up a new LWRP and I'm getting an error (http://pastebin.com/P0znWVwQ) when trying to reference it in a recipe, despite calling it the exact way specified in the opscode LWRP docs. Can anyone point out what I'm doing wrong please?
[2012-07-24 08:46:30 -0400] _rc: specialsauce: the - in the cookbook name is parsing as a minus sign, so that's my - cookbook_check "foo" do
[2012-07-24 08:47:29 -0400] specialsauce: _rc: ok, thanks, so I just need to escape it/quote it somehow?
[2012-07-24 08:47:46 -0400] _rc: I'd rename the cookbook
[2012-07-24 08:48:02 -0400] specialsauce: not really an option given that's our naming convention for about 150 cookbooks :-)
[2012-07-24 08:48:49 -0400] _rc: well given the alternative is you patch ruby in some manner, I suggest you change that too
[2012-07-24 08:49:16 -0400] specialsauce: so there's no way just to quote or escape it?!
[2012-07-24 08:49:33 -0400] _rc: correct
[2012-07-24 08:49:46 -0400] specialsauce: I've been working on cookbooks for almost a year and this is only a problem for LWRPs, seems weird
[2012-07-24 09:04:39 -0400] specialsauce: _rc, I think I figured out how I can do it - using send(method, arg) when calling the LWRP resource
[2012-07-24 09:36:39 -0400] specialsauce: patching ruby my arse
[2012-07-24 09:37:31 -0400] _rc: so with send, you code looks just spiffy, right?
[2012-07-24 09:39:16 -0400] afterglow: does anyone know what can cause application.rb to do this FATAL: Unknown error processing config file  with error can't convert nil into String
[2012-07-24 09:42:05 -0400] jatan: afterglow, your config file is broken?
[2012-07-24 09:42:23 -0400] jatan: likely some missing " or whatnot
[2012-07-24 09:43:02 -0400] afterglow: jatan: my knife and chef-client are running but i'm specifically receiving the error using Adam's chef-jenkins code thus my confusion. I'll double check all the configs for syntax
[2012-07-24 09:43:13 -0400] ukio: ohai!
[2012-07-24 09:45:01 -0400] ukio: does someone have an example for a node in .rb format (rather than node.json) at hand?
[2012-07-24 09:48:04 -0400] specialsauce: ukio: sure, 2 secs and i'll pastebin it
[2012-07-24 09:49:18 -0400] ukio: @specialsauce: yay, thanks man! :-) I currently can't spin up my local chef server for testing due to proxy issues...
[2012-07-24 09:50:08 -0400] ukio: @specialsauce: btw: how do you get that - `knife node show -F ruby`?
[2012-07-24 09:50:45 -0400] specialsauce: ukio: http://pastebin.com/qbT9ghqv is a rough template for something basic. We hand-carve the ruby node files and manage in git, don't use json at all
[2012-07-24 09:51:18 -0400] afterglow: specialsauce: do you have a particular way you keep git & chef in sync?
[2012-07-24 09:51:34 -0400] specialsauce: afterglow, yes, I wrote a script that is called on git commit hook to make any updates
[2012-07-24 09:51:40 -0400] specialsauce: I keep meaning to put this on github
[2012-07-24 09:52:07 -0400] afterglow: ok, just because I am trying to do similar at the moment using the chef-jenkins stuff on github and it is not so much work
[2012-07-24 09:52:36 -0400] specialsauce: _Rc - I didn't ask if it was possible with neat code to do it, i just asked if it was possible to do it. adding a "send" on the call is far far far easier in the short term to get it working than renaming every single cookbook
[2012-07-24 09:52:43 -0400] specialsauce: afterglow, yep i just rolled my own
[2012-07-24 09:53:52 -0400] afterglow: specialsauce: would be interesting to see ;)
[2012-07-24 09:54:27 -0400] ukio: specialsauce: thanks for the pastebin!
[2012-07-24 09:54:46 -0400] ukio: specialsauce: and yes, i would also be interested in the commit hook script
[2012-07-24 09:55:05 -0400] specialsauce: np, yeah i'll get this stuff up on github soon
[2012-07-24 09:55:43 -0400] ukio: specialsauce: i was thinking to use knife-essentials plugin for finding the diff and then run the appropriate knife upload commands
[2012-07-24 09:57:15 -0400] specialsauce: ukio: thats pretty much all the script I wrote does yep
[2012-07-24 09:57:17 -0400] ukio: keeping the chef-repo and chef server in sync seems like a common use case that is not covered by chef natively
[2012-07-24 09:57:28 -0400] specialsauce: defintiely
[2012-07-24 09:57:46 -0400] ukio: and everybody rolls his own solution... :-)
[2012-07-24 09:58:22 -0400] specialsauce: heh, yeah. its a relatively young tool, this stuff will get standardised eventually
[2012-07-24 10:00:46 -0400] ukio: yeah, hope so :-)
[2012-07-24 10:06:46 -0400] ukio: specialsauce: why do you set the ip address and fqdn in the node.rb? Isn't that already set before chef and then discovered by ohai?
[2012-07-24 10:08:59 -0400] ukio: specialsauce: i guess putting the fqdn to the node.rb does *not* set the hostname on the machine, right?
[2012-07-24 11:28:52 -0400] maruq: hi guys
[2012-07-24 11:29:32 -0400] maruq: I seem to be having fun with the postgresql cookbook, as chef-client isn't running apt-get update first
[2012-07-24 11:31:10 -0400] maruq: it's explicitly declared in my role
[2012-07-24 11:33:24 -0400] maruq: https://gist.github.com/0c55fabc3099b28758a6
[2012-07-24 11:34:03 -0400] maruq: it definitely seems like outdated apt repos, if I call "apt-get update", then run the command, it completes fine
[2012-07-24 11:34:17 -0400] maruq: but not sure as to why chef wouldn't run that first
[2012-07-24 11:40:40 -0400] maruq: ah, seems it's a known issue: http://stackoverflow.com/questions/9246786/how-can-i-get-chef-to-run-apt-get-update-before-running-other-recipes
[2012-07-24 11:48:07 -0400] lewjg: I think it's been fixed as well, but I don't know if it's in. http://tickets.opscode.com/browse/COOK-1382
[2012-07-24 11:48:28 -0400] lewjg: You could try that line in that ticket in the interim.
[2012-07-24 11:48:34 -0400] lewjg: notifies :run, resources(:execute => "apt-get update"), :immediately
[2012-07-24 11:50:33 -0400] maruq: lewjg: thanks, although currently using librarian, makes things a little tricky
[2012-07-24 11:51:07 -0400] maruq: I'm just testing the suggestion at bottom of SO article. (execute block with end.run_action)
[2012-07-24 11:53:36 -0400] lewjg: Seems to be a common pattern.
[2012-07-24 11:53:52 -0400] lewjg: ALthough I don't know that :install is what you're looking for. I think execute only uses :run and :nothing
[2012-07-24 11:53:59 -0400] maruq: yeah, but it also breaks expected behaviour
[2012-07-24 11:54:07 -0400] maruq: yup, it's :run
[2012-07-24 11:59:08 -0400] maruq: hmm gem building still failed
[2012-07-24 11:59:17 -0400] maruq: let's just go for server for the sec
[2012-07-24 12:06:15 -0400] maruq: ah, server calls the gem too grrr
[2012-07-24 12:19:58 -0400] maruq: ah, think it's my gem path stuff...
[2012-07-24 12:21:31 -0400] maruq: does chef 10.12.0 still install via ruby?
[2012-07-24 12:22:28 -0400] maruq: nope, looks like the bootstrap script uses the omnibus ah
[2012-07-24 12:30:09 -0400] specialsauce: ukio: it does set anything, its just a property that I have access to. There are certain conditions in which you have access to a node's properties (set in the node file) and not to its attributes (returned from ohai). I was encountering these circumstances often enough in recipes where it was vital that dat was available that it was the safest way to fetch them from somewhere I could rely on them being set
[2012-07-24 12:43:44 -0400] ukio: specialsauce: thanks for the explanation
[2012-07-24 13:32:47 -0400] ukio: is there a Ruby implementation of the ec2-api-tools? I don't have Java installed but Ruby... :-)
[2012-07-24 13:34:44 -0400] geekbri: ukio: there is not, but there is a ruby SDK for AWS
[2012-07-24 13:35:05 -0400] geekbri: ukio: there are also things like Fog
[2012-07-24 13:35:25 -0400] jondot: should i set a system-wide RAILS_ENV / RACK_ENV variable through chef in order to indicate 'production/staging/development' etc?
[2012-07-24 13:35:45 -0400] jondot: i used to do that via adding to /etc/environment, wondering if thats common with chef as well
[2012-07-24 13:35:56 -0400] ukio: geekbri: bummer. i've seen the sdk and know about fog, but i was looking for an exact mimic of the ec2-api-tools. thanks!
[2012-07-24 13:36:49 -0400] yfeldblum: jondot, i like to deploy apps with a wrapper script that sets up the env vars and then runs the app (as subprocess or even just with exec)
[2012-07-24 13:37:17 -0400] yfeldblum: jondot, the wrapper script is app-specific, and is the script that you use when you want to run the app
[2012-07-24 13:37:24 -0400] jondot: somehow it feels right that a machine is indicated as staging/production etc. to avoid mistakes where production runs together with development
[2012-07-24 13:44:00 -0400] yfeldblum: jondot, you have app installs with RAILS_ENV=staging?
[2012-07-24 13:44:12 -0400] jondot: for example, yes
[2012-07-24 13:44:48 -0400] jondot: what i used to do when i *manually* set up a server is add RAILS_ENV to /etc/environment according to the configuration i destined this server for
[2012-07-24 13:45:22 -0400] jondot: now i'm wondering how to do that with chef, and even moreso - is it "right" to do with chef at all
[2012-07-24 13:45:30 -0400] leifmadsen: morning all -- curious if there is a way to force chef-client to use eth1 instead of eth0?
[2012-07-24 13:46:27 -0400] yfeldblum: jondot, i don't like to do that myself ... i prefer this approach: http://www.12factor.net/config
[2012-07-24 13:47:24 -0400] jondot: yes its a question of "who is stamped as 'env'" ? is it the server or the app
[2012-07-24 13:47:31 -0400] yfeldblum: jondot, all non-laptop installs for me have RAILS_ENV=production, but there are a variety of other env vars that the app listens to in order to setup this or that
[2012-07-24 13:47:47 -0400] yfeldblum: jondot, the wrapper script that gets deployed sets up the env vars
[2012-07-24 13:48:20 -0400] yfeldblum: jondot, and chef gets them from e.g. node attributes set with a role, or perhaps from a data bag item, or however else you'd like to do it
[2012-07-24 13:48:20 -0400] jondot: and for every "stage" (production, development, staging) you set up a different wrapper?
[2012-07-24 13:48:55 -0400] jondot: ah, ok so its stored with chef. thats why I asked if its right or not.
[2012-07-24 13:49:13 -0400] jondot: the only problem i have with that is that not always I rely on chef-server. i also do chef-solo with vagrant and development environments
[2012-07-24 13:49:29 -0400] jondot: and with solo i lose the per-node attribute centralized store
[2012-07-24 13:50:20 -0400] jondot: i think for now i'll solve this at the deployment script side. it will export the environment variable while deploying (with capistrano and Foreman upstart export)
[2012-07-24 13:50:31 -0400] yfeldblum: jondot, remember, chef is building blocks - and it's perfectly ok to add on stuff to it (like e.g. a script to compile a node.json for you to use with chef-solo)
[2012-07-24 14:10:12 -0400] ssd7: Ohai Chefs
[2012-07-24 14:32:24 -0400] haakon_: isn't there an "official" lighttpd cookbook available?
[2012-07-24 14:33:37 -0400] mattray: haakon_: nope, I was just looking 2 days ago
[2012-07-24 14:33:52 -0400] mattray: decided to use apache instead for my cookbook
[2012-07-24 14:34:04 -0400] mattray: but lighttpd != apache
[2012-07-24 14:34:30 -0400] haakon_: mattray: aight - yes, lighty is the right tool for the job for my upcoming project as well
[2012-07-24 14:35:55 -0400] mattray: yeah, I'm not aware of one
[2012-07-24 14:51:08 -0400] ggolin: hi all
[2012-07-24 14:51:43 -0400] zomGreg: hi guys, I'm running into an issue installing the mysql gem on ubuntu 10.04.
[2012-07-24 14:52:04 -0400] ggolin: im using omnibus chef-client installation, trying to use the database cookbook. works with mysql, however when i try postgres chef-client fails with a 'FATAL: LoadError: no such file to load -- pg'
[2012-07-24 14:52:22 -0400] zomGreg: I'm reading http://www.ruby-forum.com/topic/133380, wondering how I can tell what the right path to take is.
[2012-07-24 14:52:30 -0400] jwitrick: quick question. what si the best way to 'reload' attribute values from the chef server during execution of  chef?
[2012-07-24 14:52:52 -0400] jwitrick: i know there is a build in command node.save. Is there one named node.load?
[2012-07-24 14:53:12 -0400] ggolin: zomGreg, what is the error you are getting?
[2012-07-24 14:53:23 -0400] ggolin: zomGreg, are you using the database/application cookbooks?
[2012-07-24 14:53:30 -0400] zomGreg: the error: https://gist.github.com/3170425
[2012-07-24 14:53:38 -0400] zomGreg: yes, I am using the database cookbook
[2012-07-24 14:54:04 -0400] ggolin: zomGreg, same here but for me it works for mysql and breaks for postgres
[2012-07-24 14:54:22 -0400] zomGreg: the error is similar to many others, but I'm seeking to understand why instead of just "apt-get install libmysqldev yada ydada"
[2012-07-24 14:56:18 -0400] zomGreg: other gems fail as well, so I've got a system problem. This seems weird to me: ERROR:  Error installing fog: multi_json requires RubyGems version >= 1.3.6.
[2012-07-24 14:56:36 -0400] zomGreg: ii  rubygems1.9.1                     1.3.5-1ubuntu2                    package management framework for Ruby librar
[2012-07-24 14:58:14 -0400] zomGreg: normally I would say something like a path problem, but /usr/bin/gem ultimately maps to /usr/bin/gem1.9.1 via /etc/alternatives...
[2012-07-24 15:00:35 -0400] ggolin: for me this fails sudo /opt/chef/embedded/bin/gem install pg witha missing library
[2012-07-24 15:01:52 -0400] zomGreg: /opt/chef/embedded/bin/gem install mysql << heh, that worked.
[2012-07-24 15:02:28 -0400] zomGreg: so, path problem after all?
[2012-07-24 15:02:34 -0400] ggolin: im not sure
[2012-07-24 15:02:51 -0400] ggolin: zomGreg, do a chef_gem 'mysql'
[2012-07-24 15:02:56 -0400] ggolin: in your recipe
[2012-07-24 15:03:10 -0400] ggolin: still makes no sense because the database cookbook should do that for you
[2012-07-24 15:03:25 -0400] zomGreg: I did.
[2012-07-24 15:03:34 -0400] zomGreg: that's what caused the original error.
[2012-07-24 15:06:53 -0400] mattray: ggolin: I'd bet postgres is having the same error that just got worked out for mysql
[2012-07-24 15:07:11 -0400] mattray: installation of the pg gem with omnibus that is
[2012-07-24 15:07:19 -0400] mattray: jtimberman: ^^ known issue?
[2012-07-24 15:07:33 -0400] ggolin: mattray, i tried installing the gem manually.
[2012-07-24 15:07:43 -0400] mattray: ggolin: for which ruby?
[2012-07-24 15:07:49 -0400] mattray: omnibus or system?
[2012-07-24 15:08:10 -0400] ggolin: omnibus, i would think, ran with absolute path
[2012-07-24 15:08:24 -0400] ggolin: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/pg-0.14.0/ext/gem_make.out
[2012-07-24 15:08:47 -0400] mattray: hmm that seems right
[2012-07-24 15:09:38 -0400] ggolin: yeah
[2012-07-24 15:10:28 -0400] ggolin: heh, system ruby gem install pg worked
[2012-07-24 15:12:39 -0400] mattray: maybe the postgres stuff isn't omnibus-aware?
[2012-07-24 15:12:47 -0400] mattray: wrong ruby used?
[2012-07-24 15:13:00 -0400] mavimo: hello, ayone have experience with chef+vagrant+application/application_ruby cookbook?
[2012-07-24 15:13:13 -0400] dwhsix: I thought that was a known issue (pg + omnibus)
[2012-07-24 15:13:17 -0400] Jay_Levitt: I'm starting to use fnichol/chef-user and I feel weird about putting a list of usernames and public keys in my chef-repo. Someone please point out that if public keys can't be leaked, the world has way bigger problems than my web site.
[2012-07-24 15:13:25 -0400] dwhsix: was a msg on mailing list just recvently...
[2012-07-24 15:13:27 -0400] ggolin: dwhsix, oh it is?
[2012-07-24 15:13:34 -0400] dwhsix: let me see if I can find it
[2012-07-24 15:13:37 -0400] ggolin: dwhsix, is there a fix?
[2012-07-24 15:13:50 -0400] dwhsix: good write-up on why pg (mainly) and mysql are sort of messed up w/ omnibus
[2012-07-24 15:13:54 -0400] dwhsix: hang on
[2012-07-24 15:14:15 -0400] ggolin: the worst thing about the database cookbook is trying to google 'database cookbook issue'
[2012-07-24 15:14:25 -0400] ggolin: comes up with all sorts of paula dean stuff :)
[2012-07-24 15:14:28 -0400] jperry2: I'm spinning up a local chef server for testing, is there any faster way to upload all the components instead of using knife?
[2012-07-24 15:14:39 -0400] dwhsix: ggolin: I think not really, but I confess I haven't been paying enough attention
[2012-07-24 15:14:44 -0400] jperry2: for example loading cookbooks, roles, environments, etc
[2012-07-24 15:14:59 -0400] jperry2: especially if I have access to the machine via ssh
[2012-07-24 15:15:32 -0400] dwhsix: argh why does opscode use sympa
[2012-07-24 15:15:38 -0400] dwhsix: so ugly & clumsy
[2012-07-24 15:15:40 -0400] Jay_Levitt: ggolin: hackernews had an interesting idea once. If all chef users formed a circle, you could get easy My World searches about chef topics.
[2012-07-24 15:16:08 -0400] ggolin: Jay_Levitt, eeeenteresting idea.
[2012-07-24 15:16:18 -0400] ggolin: jperry2, knife can upload a bunch of cookbooks at once
[2012-07-24 15:16:32 -0400] jperry2: I'm using "knife cookbook upload --all"
[2012-07-24 15:16:38 -0400] jperry2: takes about 50 seconds for all of them
[2012-07-24 15:16:41 -0400] jperry2: I want to speed that up
[2012-07-24 15:16:47 -0400] ggolin: jperry2, ...why?
[2012-07-24 15:17:02 -0400] dwhsix: um opscode folks is the mailing list archive busted?
[2012-07-24 15:17:08 -0400] ggolin: jperry2, how often do you intend to upload ALL of the cookbooks?
[2012-07-24 15:17:09 -0400] jperry2: and we have 75 roles
[2012-07-24 15:17:15 -0400] jperry2: this is for all local development
[2012-07-24 15:17:22 -0400] jperry2: so it would be initially
[2012-07-24 15:17:24 -0400] dwhsix: never mind just really clumsy UI
[2012-07-24 15:17:51 -0400] jperry2: just trying to cut down on the getting things going in a local dev environment
[2012-07-24 15:18:10 -0400] jperry2: I may paralyze the roles, data bags, and environment uploads
[2012-07-24 15:18:35 -0400] dwhsix: ggolin: ok, took a while to find: http://lists.opscode.com/sympa/arc/chef/2012-07/msg00241.html
[2012-07-24 15:18:35 -0400] jperry2: the cookbooks I can't do that since they have circular dependencies so the "--all" option is my only approach for that
[2012-07-24 15:18:43 -0400] dwhsix: hth
[2012-07-24 15:19:14 -0400] ggolin: jperry2, um
[2012-07-24 15:19:25 -0400] ggolin: dwhsix, thank you for taking the time
[2012-07-24 15:19:27 -0400] Jay_Levitt: (..."paralyze?" what is this?)
[2012-07-24 15:19:51 -0400] thom: parallelise, i'd guess
[2012-07-24 15:20:01 -0400] jperry2: ha
[2012-07-24 15:20:02 -0400] Jay_Levitt: oh. I thought it was some type of smart "freeze" :)
[2012-07-24 15:20:03 -0400] jperry2: yeah
[2012-07-24 15:20:07 -0400] jperry2: bad spelling
[2012-07-24 15:20:15 -0400] dwhsix: ggolin: np, don't know if it'll help I ended up punting on mysql one of these days I'll go back and fix up my cookbooks to do it right
[2012-07-24 15:20:31 -0400] dwhsix: that is, I use it but I don't think it comes up cleanly from scratch
[2012-07-24 15:21:18 -0400] Jay_Levitt: dwhsix: oh, wow that is helpful (and scary)
[2012-07-24 15:21:27 -0400] dwhsix: Jay_Levitt: lol yeah
[2012-07-24 15:21:44 -0400] ggolin: oy.. means i will have to stop using omnibus.
[2012-07-24 15:22:27 -0400] dwhsix: one of these days (if someone else doesn't do it) I want to take https://github.com/opscode/rails-quick-start and make it work on chef 10.12, ubuntu 12, omnibus, etc
[2012-07-24 15:23:14 -0400] mattray: ggolin: 10.14 is in RC, if this is related to omnibus vs. the cookbook, it should get released soon
[2012-07-24 15:23:15 -0400] Jay_Levitt: god, that would be nice.  I've been doing dev/devops for 25 years, and it's taken me a week to get chef to the point where it'll install RVM and populate some users - mostly because it's so hard to see the screen through all the tears :)
[2012-07-24 15:23:43 -0400] Jay_Levitt: (and of course the inherent complexity.. I want a walkthrough that covers MY SYSTEM EXACTLY)
[2012-07-24 15:23:56 -0400] dwhsix: Jay_Levitt: chef is awesome when it's awesome, and when it's not yeah
[2012-07-24 15:24:06 -0400] mattray: Jay_Levitt: wait until you see my openstack quickstart, likely to work for 3 people
[2012-07-24 15:24:16 -0400] Jay_Levitt: mattray: hehe..
[2012-07-24 15:24:16 -0400] mattray: since every network is a unique snowflake
[2012-07-24 15:24:47 -0400] ggolin: it finally works in my environment. now i want to use postgres with it.
[2012-07-24 15:24:49 -0400] Jay_Levitt: yeah, in my mind I picture something like Firefox's help system, where every wiki page is customized for your management platform and your client platform
[2012-07-24 15:25:42 -0400] mattray: Jay_Levitt: I believe they've got quite an investment in their wiki, MindTouch
[2012-07-24 15:25:49 -0400] mattray: really cool stuff
[2012-07-24 15:25:59 -0400] mattray: (and lots of people working on it too)
[2012-07-24 15:26:08 -0400] Jay_Levitt: oh, wow, didn't realize it was A Thing
[2012-07-24 15:26:57 -0400] mattray: I went way down the wiki rathole a few years ago, MindTouch is the bomb
[2012-07-24 15:27:16 -0400] mattray: it's a wiki mashup engine
[2012-07-24 15:27:36 -0400] mattray: you can do really cool things with it, as evidenced by Mozilla's site
[2012-07-24 15:27:51 -0400] Jay_Levitt: I didn't realize anyone had got that right!
[2012-07-24 15:28:19 -0400] Jay_Levitt: why doesn't everyone know about this?
[2012-07-24 15:28:40 -0400] mattray: MindTouch seems to have gone more towards CMS and Sharepoint markets
[2012-07-24 15:28:53 -0400] mattray: but it's an amazing wiki
[2012-07-24 15:29:05 -0400] Jay_Levitt: I'm sure it's pricey, but I'm sure so is Confluence
[2012-07-24 15:29:11 -0400] mattray: it's open source
[2012-07-24 15:29:16 -0400] Jay_Levitt: :O
[2012-07-24 15:29:24 -0400] mattray: written in .Net :)
[2012-07-24 15:29:31 -0400] mattray: runs on Mono
[2012-07-24 15:29:34 -0400] Jay_Levitt: .....so close.
[2012-07-24 15:29:40 -0400] dwhsix: lol
[2012-07-24 15:29:48 -0400] mattray: you knew there had to be a catch ;)
[2012-07-24 15:30:34 -0400] Jay_Levitt: ok, then why isn't Jeff Atwood always evangelizing it? :)
[2012-07-24 15:32:13 -0400] mattray: I dunno
[2012-07-24 15:32:31 -0400] zomGreg: mindtouch is sweet, but expensive, IIRC. I've been using sphinx for documentation. Pure static html fastness.
[2012-07-24 15:34:15 -0400] mattray: zomGreg: do they not do open source anymore?
[2012-07-24 15:36:02 -0400] zomGreg: mindtouch? I think there's a limit on it of some kind. But that's pure poor memory by me.
[2012-07-24 15:36:15 -0400] mattray: http://developer.mindtouch.com/ seems to still be there
[2012-07-24 15:36:22 -0400] mattray: I guess they just don't push that angle
[2012-07-24 15:37:19 -0400] mattray: I used it to send Zenoss monitoring data into the wiki and have the wiki track contact info and push that into the alerting system
[2012-07-24 15:37:50 -0400] mattray: automatically generating wiki pages for every node that got monitored
[2012-07-24 15:39:56 -0400] wamcvey: How's the best way to upgrade a chef-client installed via  the omnibus installation?
[2012-07-24 15:42:12 -0400] ggolin: mattray, that is really neat.
[2012-07-24 15:42:52 -0400] mattray: ggolin: that was before I knew about Chef, so now I could go even more nuts with it. Using Chef to deploy both and populate both with metadata
[2012-07-24 15:44:08 -0400] ggolin: id have to deal with mediawiki if i wanted a similar functionality
[2012-07-24 15:50:11 -0400] masterkorp: Guys, how do you manage multiple keys of your chef servers on knife eg my work chef server and my personal server
[2012-07-24 15:50:13 -0400] masterkorp: ?
[2012-07-24 15:52:42 -0400] BryanWB_: anybody know the emacs regex to replace symbols w/ strings?
[2012-07-24 15:54:40 -0400] afterglow: masterkorp: i use knife-block plugin personally
[2012-07-24 15:54:51 -0400] masterkorp: afterglow: hmm
[2012-07-24 15:55:05 -0400] masterkorp: can you give me a link ?
[2012-07-24 15:55:35 -0400] afterglow: masterkorp: https://github.com/greenandsecure/knife-block/
[2012-07-24 15:56:10 -0400] masterkorp: afterglow: thanks
[2012-07-24 15:56:44 -0400] Jay_Levitt: is there a way to teach "knife ssh" more about the username, --attribute, etc. for a given server?
[2012-07-24 15:58:55 -0400] leifmadsen: can I use an automatic attribute in a json file?
[2012-07-24 15:59:21 -0400] Jay_Levitt: i.e. I'd like to go from "knife ssh name:cheftest -a ipaddress -x root" to "knife ssh cheftest". Obviously I can alias most of this, but I imagine different nodes might have different "default" usernames
[2012-07-24 16:02:01 -0400] jperry2: is there  a way to tell chef to ignore dependencies?
[2012-07-24 16:02:06 -0400] jperry2: when uploading a cookbook?
[2012-07-24 16:02:25 -0400] cheeseplus: jperry2: it always seems to do so for me
[2012-07-24 16:02:52 -0400] jperry2: hmm, I'm uploading to a fresh chef server and the cookbook upload fails for me if the depends doesn't exist
[2012-07-24 16:03:19 -0400] btm: jperry2: why do you want to upload a cookbook without its dependencies?
[2012-07-24 16:04:18 -0400] jperry2: @btm: this is just for local development where I am loading up all the cookbooks to the chef server and to cut time I want to parallel it
[2012-07-24 16:04:29 -0400] jperry2: using threads
[2012-07-24 16:04:39 -0400] mattray: jperry2: knife cookbook upload -a doesn't work?
[2012-07-24 16:04:48 -0400] jperry2: yeah but that loads them up one at a time
[2012-07-24 16:05:15 -0400] jperry2: I want to speed up the upload time by doing several at a time
[2012-07-24 16:08:43 -0400] BryanWB_: webframp: around?
[2012-07-24 16:12:37 -0400] btm: jperry2: sounds like a patch to knife is in order ;)
[2012-07-24 16:12:47 -0400] jperry2: :)
[2012-07-24 16:13:09 -0400] jperry2: btm: should I file a ticket or you already did?
[2012-07-24 16:14:05 -0400] btm: jperry2: you should file the ticket after you've created the patch. :)
[2012-07-24 16:15:11 -0400] leifmadsen: :)
[2012-07-24 16:15:13 -0400] btm: jperry2: In all seriousness, there isn't an ignore dependencies feature. You could probably find a line to comment out if you so desired.
[2012-07-24 16:16:34 -0400] leifmadsen: so I have an issue open against the file provider/resource where after chef 0.10.8 the ability to return the files owner/group/mode seems to have been removed. This unfortunately breaks minitest::spec and wonder if there might be another method that exists to look that data up and I'm just not seeing it in the source.
[2012-07-24 16:17:14 -0400] leifmadsen: issue is CHEF-3235 fyi
[2012-07-24 16:19:33 -0400] jperry2: @btm: thx, I'll check it out
[2012-07-24 16:19:51 -0400] jperry2: btm: pull request?
[2012-07-24 16:20:09 -0400] btm: leifmadsen: CHEF-3235 is on my list of things to look at before 10.14 ships if nobody gets to it first.
[2012-07-24 16:20:41 -0400] leifmadsen: btm: ok cool -- I couldn't quite tell if the functionality was just removed, or if it existed somewhere else and I just could find it to update minitest
[2012-07-24 16:20:56 -0400] leifmadsen: it appeared to be no longer available anywhere from what I could search out
[2012-07-24 16:21:30 -0400] rach: hi , when I m using chef with knife-ec2 (list / create) .  Is it possible to get the output in an easy format ? eg: json
[2012-07-24 16:21:33 -0400] gmcinnes: howdy chefs
[2012-07-24 16:21:38 -0400] leifmadsen: also what is the time frame usually on 10.x releases? about 8-10 weeks?
[2012-07-24 16:21:49 -0400] btm: leifmadsen: i think it's just a regerssion that is fixable. I've got to get all the contributions merged first, which means fixing the broken tests first though.
[2012-07-24 16:21:56 -0400] rach: I tried --format json
[2012-07-24 16:22:13 -0400] leifmadsen: btm: fair enough -- glad to hear its on the list as we'll be stuck on 0.10.8 for the meantime
[2012-07-24 16:22:19 -0400] leifmadsen: otherwise everything works great :D
[2012-07-24 16:22:21 -0400] btm: leifmadsen: our goal is every two months, yeah. 10.14 is blocked on a couple things from Opscode Engineering so it'll based on when we get those which will put us a bit long.
[2012-07-24 16:22:35 -0400] leifmadsen: btm: np, I know how that goes
[2012-07-24 16:22:51 -0400] leifmadsen: did a lot of release management for asterisk for a while
[2012-07-24 16:23:54 -0400] leifmadsen: btm: I updated the Fix Version/s for the ticket to 10.14.0
[2012-07-24 16:24:21 -0400] gmcinnes: jtimberman: ping. you about?
[2012-07-24 16:24:22 -0400] rach: hi , when I m using chef with knife-ec2 (list / create) .  Is it possible to get the output in an easy format ? eg: json
[2012-07-24 16:24:54 -0400] leifmadsen: rach: irc etiquette seems to dictate you shouldn't repeat within a 10 minute period
[2012-07-24 16:27:28 -0400] mattray: rach: I don't believe that's a supported feature
[2012-07-24 16:28:09 -0400] mattray: rach: patches for knife-ec2 to support that might be worthwhile
[2012-07-24 16:28:28 -0400] stormerider: speaking of knife, i had an issue with "knife data bag from file <bag> -a"... didn't do anything, but if i replaced "-a" with a filename, it uploaded it fine. wasnt sure if i was doing something wrong or what.
[2012-07-24 16:28:29 -0400] mattray: since knife node list -fj works
[2012-07-24 16:28:52 -0400] rach: I m using it in solo mode
[2012-07-24 16:28:57 -0400] rach: but thanks you
[2012-07-24 16:29:12 -0400] rach: I will check to path it
[2012-07-24 16:29:19 -0400] mattray: stormerider: -a isn't supported with knife data bag yet
[2012-07-24 16:29:32 -0400] mattray: stormerider: assuming you want "all"
[2012-07-24 16:29:50 -0400] mattray: stormerider: knife data bag from file --help shows your options
[2012-07-24 16:30:25 -0400] rach: I thought that it was possible to get the output of the ec2 plugin in a more easy format
[2012-07-24 16:30:31 -0400] rach: to be able to script it
[2012-07-24 16:30:36 -0400] mattray: yeah, probably
[2012-07-24 16:30:41 -0400] Jay_Levitt: is there a semantic difference between "upload" and "from file"? Or are we transitioning from one to the other?
[2012-07-24 16:30:46 -0400] mattray: rach: it's just not turned on yet
[2012-07-24 16:31:08 -0400] rach: thanks
[2012-07-24 16:31:14 -0400] mattray: Jay_Levitt: there's no knife data bag upload
[2012-07-24 16:31:21 -0400] rach: will check the source
[2012-07-24 16:31:30 -0400] Jay_Levitt: right, but some commands have "upload", and others have "from file", and they seem to mean the same thing, no?
[2012-07-24 16:31:32 -0400] mattray: Jay_Levitt: not transitioning AFAIK
[2012-07-24 16:31:42 -0400] mattray: Jay_Levitt: just inconsistent I guess :/
[2012-07-24 16:32:04 -0400] Jay_Levitt: mattray: yeah, I was politely asking "hey, this seems inconsistent, is there a story here?"
[2012-07-24 16:32:16 -0400] mattray: btm: ^^ any story worthwhile?
[2012-07-24 16:32:28 -0400] gmcinnes: any nagios users out there that could point to the rationale of the Chef community cookbook setting the 'interval_length' from the standard 60 to 1 ?
[2012-07-24 16:32:38 -0400] StormSilver: Jay_Levitt: I think usually when you see "from file", it means "I am giving you the path to the file". Whereas when you see "upload", it means "I'm telling you the thing I want, but you need to work out the path from information that you know"
[2012-07-24 16:32:55 -0400] mattray: StormSilver: good answer
[2012-07-24 16:33:48 -0400] ashb: gmcinnes: allows you to specify checks to happen at granularity of < 1min (i.e 30s or 1m30s)
[2012-07-24 16:33:50 -0400] Jay_Levitt: StormSilver: ah, true.. seems like a smart "upload" could do either, but that's more work.
[2012-07-24 16:35:05 -0400] gmcinnes: ashb: yeah. that's fair enough and seems totally reasonable. the nagios docs say that values other than "60" are untested and YMMV.
[2012-07-24 16:35:39 -0400] Jay_Levitt: and speaking of.. is there a good pattern/plugin/hook for "upload the cookbooks I changed since my last upload"?
[2012-07-24 16:36:34 -0400] gmcinnes: ashb: But I haven't had any problems with nagios itself in that state. Unfortunately nagiosgrapher tool assumes that interval_length is 60, and messes up the graphing :(
[2012-07-24 16:36:38 -0400] ashb: gmcinnes: and probably have done for about 15 years
[2012-07-24 16:36:43 -0400] ashb: its well tested and works by lots of people
[2012-07-24 16:36:54 -0400] ashb: gmcinnes: ah. thats epically fail
[2012-07-24 16:37:30 -0400] gmcinnes: yeah.  it's not even called out. There's just a magic number 60 in the code.
[2012-07-24 16:40:50 -0400] ggolin: nice.
[2012-07-24 16:45:26 -0400] evilantnie: anyone use the capistrano-chef gem for deploys?
[2012-07-24 16:45:48 -0400] evilantnie: doesn't seem to want to work with my multistage capistrano config
[2012-07-24 16:46:21 -0400] btm: mattray: Jay_Levitt: I think 'from file' was used when you're reading from a JSON file and upload when you had a larger object like a cookbook.
[2012-07-24 16:48:20 -0400] stormerider: morgan@rain:~/svn/OPS/chef-repo/cookbooks/users$ knife data bag from file
[2012-07-24 16:48:22 -0400] stormerider: knife data bag from file BAG FILE|FOLDER [FILE|FOLDER..] (options)
[2012-07-24 16:48:24 -0400] stormerider:     -a, --all                        Upload all data bags
[2012-07-24 16:48:37 -0400] stormerider: knife says it does, thus my confusion :)
[2012-07-24 16:50:31 -0400] maruq: garrensmith: I seem to be hitting the PGError issue you hit yesterday. did you manage to solve?
[2012-07-24 16:51:08 -0400] garrensmith: maruq: I hit that issue about a month ago. No I haven't resolved it.
[2012-07-24 16:51:21 -0400] maruq: garrensmith: grrr.
[2012-07-24 16:51:57 -0400] garrensmith: maruq: yup, check if opscode haven't updated their postgres recipe
[2012-07-24 16:52:36 -0400] maruq: garrensmith: last update was a month ago
[2012-07-24 16:52:45 -0400] garrensmith: that sucks
[2012-07-24 16:53:07 -0400] maruq: garrensmith: is it just that the line checks for PGError rather than PG::Error?
[2012-07-24 16:53:22 -0400] garrensmith: maruq: no I tried that, didn't seem to fix it.
[2012-07-24 16:53:58 -0400] maruq: garrensmith: ugh
[2012-07-24 16:54:39 -0400] maruq: garrensmith: they also don't seem to have issues enabled on the repo
[2012-07-24 16:54:50 -0400] garrensmith: maruq: check this https://github.com/opscode-cookbooks/postgresql/pull/5 might help
[2012-07-24 16:57:11 -0400] maruq: garrensmith: thanks. giving it a try now
[2012-07-24 16:57:28 -0400] garrensmith: let me know how it goes
[2012-07-24 17:04:52 -0400] maruq: garrensmith: doesn't seem to fix :(
[2012-07-24 17:05:00 -0400] garrensmith: damn
[2012-07-24 17:05:35 -0400] maruq: so what happens if you change the thing to PG::Error ?
[2012-07-24 17:05:55 -0400] maruq: does it find the gem?
[2012-07-24 17:14:24 -0400] garrensmith: maruq: try and see what happens from what I remember it just failed
[2012-07-24 17:14:52 -0400] maruq_: garrensmith: cool. just forking the repo & trying now
[2012-07-24 17:21:21 -0400] maruq: ah, damn caching!
[2012-07-24 17:27:36 -0400] maruq: garrensmith: the chef_gem stuff fails as I believe it installs the omnibus, not the ruby version
[2012-07-24 17:28:06 -0400] maruq: I have ruby preinstalled on my instance, reverting back to normal way, then using the PG::Error
[2012-07-24 17:35:15 -0400] maruq: ahh!! why is librarian downloading the old commit?!! I cleaned the cache & it's not picked it up
[2012-07-24 17:35:16 -0400] leifmadsen: I can wrap an include_recipe statement inside a case right?
[2012-07-24 17:35:28 -0400] miah: hi
[2012-07-24 17:35:36 -0400] miah: leifmadsen: yes
[2012-07-24 17:35:44 -0400] leifmadsen: cool thanks, figured it should be fine :)
[2012-07-24 17:36:43 -0400] miah: maruq: update your Cheffile?
[2012-07-24 17:37:43 -0400] maruq: miah: I didn't. ran "librarian-chef install --clean", assumed that would pull HEAD from repo?
[2012-07-24 17:37:47 -0400] BryanWB: webframp, around?
[2012-07-24 17:37:57 -0400] maruq: miah: added the specific commit in there now
[2012-07-24 17:38:13 -0400] webframp: BryanWB: yep
[2012-07-24 17:38:31 -0400] BryanWB: webframp, i have made a ton of additions to the graphite cookbook
[2012-07-24 17:38:31 -0400] maruq: miah: specific commit as ref seems to have fixed that prob ;)
[2012-07-24 17:38:52 -0400] BryanWB: webframp, however i have made them all on master
[2012-07-24 17:38:54 -0400] webframp: BryanWB: awesome!
[2012-07-24 17:39:38 -0400] webframp: happy to take a PR
[2012-07-24 17:39:50 -0400] BryanWB: webframp, umm, i added centos support and bumped the version #
[2012-07-24 17:39:51 -0400] miah: BryanWB: oh?
[2012-07-24 17:39:57 -0400] BryanWB: miah, hello :)
[2012-07-24 17:40:06 -0400] miah: i havent touched my graphite cookbook in a few moths now. curious to hear what you have done.
[2012-07-24 17:40:15 -0400] miah: about to also do the centos implementation
[2012-07-24 17:40:31 -0400] BryanWB: webframp, however i have everything in one giant branch, no topic branches
[2012-07-24 17:40:40 -0400] BryanWB: miah, updated to 0.9.10
[2012-07-24 17:40:46 -0400] webframp: BryanWB: that's great, glad to hear others are using and improving it
[2012-07-24 17:40:50 -0400] BryanWB: miah, btw i also added rhel support to collectd
[2012-07-24 17:41:21 -0400] miah: cool
[2012-07-24 17:41:22 -0400] webframp: well, if you want to cherry pick stuff into branches that's cool. If not, I can wade through the commits
[2012-07-24 17:41:36 -0400] miah: my collectd cookbook should work fine in rhel with a few minor tweaks
[2012-07-24 17:41:40 -0400] BryanWB: webframp, gr8 that will save mea bunch of toime ;)
[2012-07-24 17:41:43 -0400] BryanWB: miah,  https://github.com/bryanwb/chef-collectd
[2012-07-24 17:41:56 -0400] BryanWB: it compiles the 5.1.0 branch from source
[2012-07-24 17:42:28 -0400] BryanWB: webframp, was thinking of adding Vagrantfile + Berksfile for testing, does that interest u?
[2012-07-24 17:43:04 -0400] miah: BryanWB: nice
[2012-07-24 17:43:04 -0400] ukio: is anybody using mccloud currently?
[2012-07-24 17:43:05 -0400] jtimberman: maruq: there are issues w/ installing the pg gem under omnibus, which has been brought up on the mailng list and related to ticket COOK-1406.
[2012-07-24 17:43:06 -0400] miah: mine does that too
[2012-07-24 17:43:14 -0400] miah: https://github.com/miah/chef-collectd
[2012-07-24 17:43:15 -0400] miah: =)
[2012-07-24 17:43:17 -0400] BryanWB: webframp, also here is my preso in part inspired by yours   https://github.com/bryanwb/monitoring-preso
[2012-07-24 17:43:17 -0400] miah: i also use ark
[2012-07-24 17:43:19 -0400] webframp: BryanWB: yea, both are good. We've been using them at Heavywater a bit more
[2012-07-24 17:43:21 -0400] BryanWB: miah, dammin!
[2012-07-24 17:43:52 -0400] ukio: i'm trying to put together a minimal Mccloudfile for setting up apache2 via chef-solo
[2012-07-24 17:44:02 -0400] miah: also, i have a few attribute tricks that allow people to customize their install a bit
[2012-07-24 17:44:12 -0400] webframp: BryanWB: looks nice! what'd you think of using showoff?
[2012-07-24 17:44:16 -0400] maruq: jtimberman: thanks. I've pre-baked an AMI with ruby1.8, trying to get it going using that
[2012-07-24 17:44:30 -0400] BryanWB: webframp, i think it is pain but better for collaboration on presos
[2012-07-24 17:44:38 -0400] BryanWB: easier for others to reuse your resources
[2012-07-24 17:45:08 -0400] BryanWB: but part of the pain is i m relatively inexperienced w/ markdown
[2012-07-24 17:45:18 -0400] BryanWB: the svgs in there could be useful to u
[2012-07-24 17:45:19 -0400] maruq: jtimberman, garrensmith: changing from "PGError" to "PG::Error" in postgresql cookbook didn't fix. It now can't find Chef::Recipe::PG
[2012-07-24 17:45:26 -0400] miah: i have a bunch of cookbooks in progress..
[2012-07-24 17:45:26 -0400] BryanWB: and easy to change
[2012-07-24 17:45:31 -0400] Jay_Levitt: jtimberman: of the workarounds proposed in that thread, which do you think is the best?
[2012-07-24 17:45:34 -0400] miah: would <3 to have people helping me with them
[2012-07-24 17:45:50 -0400] geekbri: miah: which cookbooks do you have in progress
[2012-07-24 17:45:51 -0400] BryanWB: miah, what wokring on?
[2012-07-24 17:46:25 -0400] webframp: BryanWB: I agree, it's a little more work to get layout and formatting exactly as you want. But in open, easy, versioned sharing is worth it
[2012-07-24 17:46:57 -0400] BryanWB: i always hate when i c a nice preso and i can't reuse their assets
[2012-07-24 17:48:58 -0400] miah: redis, collectd, dhcpd, graphite, percona (called percona-install in my repo for now), a hostname cookbook (currently private), nginx, varnish, haproxy (as always), simple iptables (have some fixing to do here), yum (more fixing), stud (need to make it use ark)
[2012-07-24 17:49:22 -0400] doomviking: so you aren't busy
[2012-07-24 17:49:24 -0400] miah: i think i've written or rewritten ~40 cookbooks at this point
[2012-07-24 17:49:30 -0400] BryanWB: i still haven't figured out how to lwrp haproxy
[2012-07-24 17:49:36 -0400] BryanWB: cuz i use all the options
[2012-07-24 17:49:37 -0400] miah: BryanWB: coderanger is working on it
[2012-07-24 17:49:53 -0400] coderanger: BryanWB: Yahr
[2012-07-24 17:50:08 -0400] coderanger: Though of late I'm debating if its really the right way to go >_<
[2012-07-24 17:50:15 -0400] BryanWB: miah, tks for pointing me to haproxy, i have been doing all my http routing w/ it and been quite happy w/ it
[2012-07-24 17:50:41 -0400] coderanger: https://github.com/coderanger/haproxy
[2012-07-24 17:50:42 -0400] geekbri: I still have to rewrite my OWN redis cookbook heh
[2012-07-24 17:50:56 -0400] geekbri: If only there were more than 24 hours in a day.
[2012-07-24 17:51:16 -0400] coderanger: BryanWB: https://github.com/coderanger/haproxy/blob/master/resources/proxy.rb is the interesting file
[2012-07-24 17:51:26 -0400] maruq: geekbri: +1
[2012-07-24 17:51:28 -0400] BryanWB: coderanger, tks
[2012-07-24 17:51:37 -0400] Jay_Levitt: geekbri: admit it.  You wasted the extra second on June 30, didn't you?
[2012-07-24 17:52:04 -0400] maruq: lol
[2012-07-24 17:52:15 -0400] geekbri: Jay_Levitt: But but... it was my birthday
[2012-07-24 17:54:48 -0400] miah: coderanger: nice. i still have "review coderangers code for haproxy"
[2012-07-24 17:55:06 -0400] miah: on my task list
[2012-07-24 17:55:36 -0400] coderanger: miah: Making a full DSL for the config file is starting to seem a tad silly, might rescope it to just use normal template for config snippets
[2012-07-24 17:56:00 -0400] BryanWB: hey dpetzel!
[2012-07-24 17:56:16 -0400] dpetzel: Hey BryanWB, how goes it?
[2012-07-24 17:56:26 -0400] BryanWB: dpetzel, going well
[2012-07-24 17:56:34 -0400] Jay_Levitt: geekbri: btw, how was the meetup? Any slides?
[2012-07-24 17:57:00 -0400] coderanger: miah: You coming down to PA tonight?
[2012-07-24 17:57:10 -0400] geekbri: Jay_Levitt: it was pretty good, nice first showing.  Wish I had more than 6 days to prepare my presentation.  I did put slides up on the meetup page yeah
[2012-07-24 17:58:40 -0400] miah: coderanger: probably not. we have a work dinner thing because we have a bunch of people in town.
[2012-07-24 17:58:50 -0400] coderanger: laaaaaame
[2012-07-24 17:58:50 -0400] miah: otherwise i would be there. i need to talk to some sane ops people.
[2012-07-24 17:59:11 -0400] Jay_Levitt: miah: objection!  Assumes facts not in evidence
[2012-07-24 17:59:19 -0400] miah: ?
[2012-07-24 17:59:28 -0400] miah: i work with non-sane ops people =)
[2012-07-24 17:59:31 -0400] evilantnie: Does anyone use the capistrano-chef gem?  having trouble getting it working with multistage
[2012-07-24 18:00:29 -0400] maruq: garrensmith, jtimberman: it seems to be failing on the "require 'pg'"
[2012-07-24 18:00:46 -0400] maruq: how do I see the gems that chef sees?
[2012-07-24 18:01:20 -0400] maruq: it calls Gem.clear_paths right before
[2012-07-24 18:02:17 -0400] Jay_Levitt: miah: right, the assumption was that sane ops people exist :)
[2012-07-24 18:02:25 -0400] geekbri: Sanity is over reated.
[2012-07-24 18:02:26 -0400] geekbri: rated.
[2012-07-24 18:07:55 -0400] miah: i'm pretty sane considering my life.
[2012-07-24 18:08:37 -0400] geekbri: I'm sane enough.
[2012-07-24 18:09:02 -0400] nickpresta: When trying to start rabbitmq via: `setsid /etc/init.d/rabbitmq-server restart` I get: `execvp: No such file or directory` and then setsid returns 1 and fails. Here is a gist: https://gist.github.com/3171498
[2012-07-24 18:09:17 -0400] geekbri: The geekbri cranial system is eventually sane.
[2012-07-24 18:09:24 -0400] geekbri: It may have periods of insanity, but it is always eventually sane.
[2012-07-24 18:10:00 -0400] anthroprose: eventual consistency in the greymatter
[2012-07-24 18:10:17 -0400] anthroprose: mine takes major HUP events to acheive that...
[2012-07-24 18:11:53 -0400] maruq: under omnibus, calling "gem_package" uses system provided ruby, ja?
[2012-07-24 18:12:06 -0400] btm: maruq: first 'ruby' found in your path, yes.
[2012-07-24 18:12:47 -0400] maruq: btm: hmm so calling "Gem.clear_paths" should force that to be picked up correctly?
[2012-07-24 18:13:04 -0400] maruq: just trying to debug this postgresql recipe
[2012-07-24 18:15:04 -0400] btm: maruq: hrm, what are you trying to accomplish?
[2012-07-24 18:15:44 -0400] maruq: btm: cookbook calls
[2012-07-24 18:15:44 -0400] maruq: "
[2012-07-24 18:16:13 -0400] maruq: btm: cookbook calls "Gem.clear_paths" (https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/server.rb line 66)
[2012-07-24 18:16:33 -0400] maruq: btm: trying to figure out why it can't find the 'pg' it installs earlier
[2012-07-24 18:18:11 -0400] btm: maruq: if by earlier you mean postgresql::client.rb:42, gem_package installs a gem to the system ruby, and omnibus does not run under the system ruby.
[2012-07-24 18:18:15 -0400] btm: maruq: (https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/client.rb#L42)
[2012-07-24 18:18:39 -0400] maruq: btm: yep, that's what I meant
[2012-07-24 18:19:04 -0400] maruq: btm: ah, so it can't find 'pg' as it's installing that to system, then using it's own stuff?>
[2012-07-24 18:20:13 -0400] btm: maruq: gem_package installs to the system ruby. chef_gem installs to the ruby chef is running under. sometimes these are the same thing (if you install chef to your system rubygems). With omnibus they are not the same because Omnibus has an embedded ruby that Chef runs under
[2012-07-24 18:21:27 -0400] maruq: btm: ah, that would probably be it. I'm installing chef via "knife bootstrap", which looks to pull down omnibus
[2012-07-24 18:21:43 -0400] btm: maruq: the postgresql cookbook needs to be updated to call chef_gem, however, the pg gem compiles native extensions and needs postgresql headers which are normally installed with apt (libpq-dev). However, when compiling these under omnibus, the environment is tainted because omnibus has its own copy of openssl which is different than the version that the upstream libpq-dev is compiled against, and thus breaks (COOK-1406)
[2012-07-24 18:22:25 -0400] maruq: btm: ah! my problem exactly!
[2012-07-24 18:22:33 -0400] btm: maruq: work arounds: 1) not use Omnibus for the postgresql cookbook 2) modify the postgresql cookbook to install postgres into /opt/chef from source 3) wait for me to do #2.
[2012-07-24 18:22:54 -0400] ggolin: maruq, mine too. i went with workaround #1
[2012-07-24 18:23:51 -0400] ggolin: now im beating my head against the pg cookbook, trying to get it to do grants
[2012-07-24 18:24:15 -0400] newb: @mattray : how to pass -d to 'knife cookbook upload' from spiceweasel
[2012-07-24 18:24:34 -0400] newb: I am not sure how to pass that through knife.rb
[2012-07-24 18:25:16 -0400] maruq: btm: ah, thanks do you think #2 will happen soon (next week or so), or better to explore #1?
[2012-07-24 18:25:31 -0400] maruq: btm: no pressure there man, I realise it's probably a spare time thing
[2012-07-24 18:25:37 -0400] david415: yo
[2012-07-24 18:25:42 -0400] newb: I want all the "knife cookbook -c knife.rb upload build-essential" to become "knife cookbook -d -c knife.rb upload build-essential"
[2012-07-24 18:26:00 -0400] newb: when spiceweasel spits it ou
[2012-07-24 18:26:05 -0400] newb: out
[2012-07-24 18:26:25 -0400] mattray: newb: spiceweasel assumes that the cookbooks are ordered by dependencies. It should be smarter than that I guess, as long as all the deps are included
[2012-07-24 18:26:31 -0400] maruq: ggolin: hmm.. probably a better route.
[2012-07-24 18:27:00 -0400] mattray: newb: and if "-d" was added by default, it would be nuts
[2012-07-24 18:27:08 -0400] mattray: as in, it would take forever
[2012-07-24 18:27:20 -0400] newb: @mattray, that's the problem I am facing
[2012-07-24 18:27:35 -0400] btm: maruq: yes, in the next week or so.
[2012-07-24 18:27:36 -0400] newb: my yaml file lists the cookbooks, but not in dependency order
[2012-07-24 18:27:45 -0400] newb: now sure how to get that order - any ideas?
[2012-07-24 18:28:07 -0400] mattray: spiceweasel extractlocal will attempt to put them in the right order
[2012-07-24 18:28:41 -0400] mattray: it goes through in passes, no deps go first, then deps that are already matched recursively
[2012-07-24 18:29:30 -0400] ggolin: how do i get the database cookbook postgres_database resource to use the socket instead of hitting localhost:5432?
[2012-07-24 18:30:11 -0400] david415: i'm a newbie at chef... and i'm trying to get my recipe to work
[2012-07-24 18:30:15 -0400] david415: https://github.com/miah/percona-install/blob/master/recipes/config.rb
[2012-07-24 18:30:49 -0400] david415: sometimes the tracebacks don't help so much
[2012-07-24 18:31:08 -0400] david415: NoMethodError: undefined method `[]' for nil:NilClass
[2012-07-24 18:31:14 -0400] david415: /var/chef/cache/cookbooks/percona/recipes/config.rb:27:in `from_file'
[2012-07-24 18:32:23 -0400] ggolin: david415, is eth0 not configured on the system?
[2012-07-24 18:32:55 -0400] newb: @mattray: one more thing: your code expects strings of form 'depends "pg"' and fails if we have "depends 'pg'" - notice the single quotes. How do I put in both " and ' in your gsub command?
[2012-07-24 18:33:11 -0400] miah: david415: you should be using a different attribute, like i mentioned to you before.
[2012-07-24 18:33:43 -0400] jtimberman: maruq ggolin btm: A question for you, or anyone else installing the pg gem. Do you expect the postgresql::client recipe to handle that because you're going to use the gem in a Chef recipe (e.g., in the database cookbook's postgresql resources)? Or because you want to have it installed for your application?
[2012-07-24 18:34:17 -0400] ggolin: jtgiri_, latter
[2012-07-24 18:34:24 -0400] ggolin: er. jtimberman
[2012-07-24 18:35:03 -0400] jtimberman: ggolin: Does your application use the Ruby under Chef? Because IMO it shouldn't, and you should have your own Ruby installed (via package, via rbenv/rvm, etc)
[2012-07-24 18:35:28 -0400] mattray: newb: there's a ticket for that I need to check out, there might be a patch
[2012-07-24 18:36:15 -0400] ggolin: jtimberman, it does not. it uses systemwide ruby
[2012-07-24 18:36:39 -0400] jtimberman: ggolin: do you want the gem installed, or the rubygem-package provided by the distro?
[2012-07-24 18:37:01 -0400] jtimberman: My opinion is that the postgresql (and mysql) client recipes shouldn't install the gem at all.
[2012-07-24 18:37:44 -0400] ggolin: jtimberman, i think i want the expected or the right thing to happen. whether or not these two things are the same - thats another question. i tend to agree with what you are saying though.
[2012-07-24 18:37:59 -0400] jtimberman: http://lists.opscode.com/sympa/arc/chef/2012-07/msg00093.html
[2012-07-24 18:38:42 -0400] newb: oh, @mattray, I see it at https://github.com/mattray/spiceweasel/pull/17. What should be the correct gsub pattern?
[2012-07-24 18:39:16 -0400] jtimberman: For a topic that has generated subsequent other tickets, discussion threads and IRC conversations, I've seen a pretty low amount of participation on the COOK-1441 ticket itself.
[2012-07-24 18:39:19 -0400] ggolin: jtimberman, seems reasonable
[2012-07-24 18:39:21 -0400] maruq: jtimberman: I'm only using it for the server recipe at this stage.
[2012-07-24 18:39:35 -0400] jtimberman: maruq: do you even want the pg gem installed?
[2012-07-24 18:39:47 -0400] maruq: jtimberman: I'm easy either way really
[2012-07-24 18:40:02 -0400] ggolin: jtimberman, my usecase is with a rails app.
[2012-07-24 18:40:10 -0400] maruq: jtimberman: I'm not going to be running any ruby stuff on the same server, so not needed
[2012-07-24 18:40:20 -0400] jtimberman: i guess the postgresql::server recipe tries to use that to determine if the user password is set.
[2012-07-24 18:40:29 -0400] mattray: newb: dunno, I'd have to sit down and hack on it a bit, I'm working on other stuff right now
[2012-07-24 18:40:37 -0400] maruq: jtimberman: If I wanted the gem for my rails app, I could install myself
[2012-07-24 18:40:45 -0400] jtimberman: ggolin: does your rails app have a gemfile, with the pg gem?
[2012-07-24 18:40:59 -0400] ggolin: jtimberman, it does, yes.
[2012-07-24 18:41:13 -0400] ggolin: jtimberman, it runs bundle install and all that jazz.
[2012-07-24 18:41:15 -0400] jtimberman: we have a pretty small sample size between just the two of you, but it seems reasonable that is going to be more common than not.
[2012-07-24 18:41:33 -0400] jtimberman: ggolin: yeah, so you don't even care if the gem is installed by Chef, because your deployment will do that.
[2012-07-24 18:41:46 -0400] maruq: jtimberman: yeah, I think most would be fine with installing gem themselves via chef / bundler / etc
[2012-07-24 18:42:18 -0400] jtimberman: Pretty sure anyone building a modern Rails app is doing that.
[2012-07-24 18:42:30 -0400] jtimberman: Because it's the commonly accepted Community Best Practice for Rails App Development.
[2012-07-24 18:42:49 -0400] ggolin: i applaud the effort you took to capitalize all that, jtimberman :)
[2012-07-24 18:42:57 -0400] jtimberman: ggolin: Typing fast helps sometimes :)
[2012-07-24 18:43:42 -0400] wamcvey: jtimberman: hey, I noticed you've fixed some bugs in the python cookbook; however, the fixes have never made it the opscode community cookbook site (and the cookbook's version info was never bumped.) I'm running into the "pip freeze returned 1" bug, but I'm curious if there are outstanding issues that are keeping the git updates from getting pushed into the cookbook release proper.
[2012-07-24 18:44:18 -0400] jtimberman: wamcvey: we're still in the COOK code review catch up.
[2012-07-24 18:45:04 -0400] ggolin: node['postgresql']['password']['postgres'] - what sets this? the pg::server recipe?
[2012-07-24 18:45:06 -0400] jtimberman: We have 74 tickets right now that are merged and ready for release, but over 40 more that need to be reviewed.
[2012-07-24 18:45:21 -0400] jtimberman: ggolin: yes: node.set_unless[:postgresql][:password][:postgres] = secure_password
[2012-07-24 18:45:46 -0400] ggolin: yeah i see it. i guess my cookbook is outdated.
[2012-07-24 18:45:59 -0400] nickpresta: @jtimberman: FWIW: I would expect the mysql recipe to install the mysql gem
[2012-07-24 18:46:01 -0400] maruq: ggolin: I just set it myself in the role for the moment
[2012-07-24 18:46:18 -0400] nickpresta: Or at least wouldn't expect to see a warning about missing it
[2012-07-24 18:46:40 -0400] wamcvey: jtimberman: ok... well, the pip issue is a blocker... so I wanted to get a fix right away; however, didn't want to load in the cookbook if it was still in flux or had known (worse) issues.
[2012-07-24 18:46:40 -0400] ggolin: jtimberman, you coming to sd in august by chanse?
[2012-07-24 18:46:51 -0400] ggolin: chance even. gah.
[2012-07-24 18:46:54 -0400] jtimberman: nickpresta: i'm curious why that is the expectation, it seems rather application specific?
[2012-07-24 18:47:14 -0400] jtimberman: ggolin: not this year.
[2012-07-24 18:47:35 -0400] ggolin: jtimberman, too bad. we were plotting to drown you in ale.
[2012-07-24 18:47:46 -0400] nickpresta: jtimberman: I expect it more so because I see "Missing gem 'mysql'", which, to me, is saying that I should either have it installed already (I don't know why), or that it should've been installed, but wasn't.
[2012-07-24 18:47:56 -0400] nickpresta: I don't actually use Ruby, so I don't need it installed.
[2012-07-24 18:48:28 -0400] jtimberman: ggolin: :D
[2012-07-24 18:49:02 -0400] jtimberman: nickpresta: what if that message was at debug level rather than info and you almost never saw it? or were modified in such a way that it wasn't like "Wait did I do something wrong"?
[2012-07-24 18:49:38 -0400] nickpresta: I think that would solve the confusion/concern. I realize that as a Python user, I don't need the MySQL gem, but it seems that chef is saying that I/it needs it.
[2012-07-24 18:50:32 -0400] mattray: ggolin: I'll drink his ale
[2012-07-24 18:50:46 -0400] ggolin: mattray, coming to linuxcon thing?
[2012-07-24 18:50:52 -0400] mattray: yeah, I've got a talk and Chef training
[2012-07-24 18:50:54 -0400] maruq: nickpresta, jtimberman: something like "WARNING: The MySQL gem isn't installed, remember to install it before using ruby, there's a good developer"
[2012-07-24 18:51:08 -0400] ggolin: mattray, sweet, we will find you and drown you.
[2012-07-24 18:51:10 -0400] jtimberman: maruq: heh
[2012-07-24 18:51:18 -0400] pdoc: Hi, i updated my chef gem on my workstation from 0.10.10 to 0.10.12 yesterday, and now whenever i run certain knife commands im getting the error "ERROR: ArgumentError: wrong number of arguments (1 for 2)" for example when running: knife cookbook upload cookbook -o cookbooks/, has anyone else run into this issue? im not sure how to figure out what is causing it
[2012-07-24 18:51:23 -0400] mattray: maruq: I think jtimberman prefers a mysql::client recipe?
[2012-07-24 18:51:31 -0400] jtimberman: I was thinking more like, Chef::Log.debug "MySQL gem not found, continuing on like a good soldier."
[2012-07-24 18:51:44 -0400] ggolin: keepin on truckin
[2012-07-24 18:51:58 -0400] ggolin: and an ascii dave grohl.
[2012-07-24 18:52:02 -0400] ggolin: obviously.
[2012-07-24 18:52:02 -0400] mattray: ggolin: sounds good, looking at the CloudOpen schedule right now
[2012-07-24 18:52:03 -0400] maruq: jtimberman, mattray: haha!
[2012-07-24 18:52:12 -0400] jtimberman: "Gem not found, that's fine, we'll hug anyway"
[2012-07-24 18:52:21 -0400] maruq: lol
[2012-07-24 18:52:34 -0400] ggolin: that one would require an ascii clown.
[2012-07-24 18:52:50 -0400] jtimberman: no one wants to hug a clonw.
[2012-07-24 18:52:56 -0400] jtimberman: s/clonw/clown/
[2012-07-24 18:53:01 -0400] ggolin: you're getting my drift
[2012-07-24 18:53:14 -0400] maruq: jtimberman: also, while I've got you the compile time run stuff best way to hack an apt-get update in there?
[2012-07-24 18:53:46 -0400] maruq: jtimberman: I guess alter apt::default to call at compile time?
[2012-07-24 18:54:25 -0400] gondoi: in regards to metadata, is there a way to define needed data bag items much like attributes?
[2012-07-24 18:55:22 -0400] nickpresta: When the rabbitmq recipe tries to restart via: `setsid /etc/init.d/rabbitmq-server restart` I get: `execvp: No such file or directory` and then setsid returns 1 and fails. Here is a gist: https://gist.github.com/3171498
[2012-07-24 18:55:51 -0400] yfeldblum: gondoi, i like to think of data bags like mysql tables and data bag items like the records in a mysql table
[2012-07-24 18:56:51 -0400] gondoi: sure, but i'm curious about the metadata.rb there is the ability to define the attributes that the cookbook uses, but not for data bags. so if we are using encrypted data bags, how can you define that as a needed value in the metadata.rb?
[2012-07-24 18:57:09 -0400] gondoi: http://wiki.opscode.com/display/chef/Metadata#Metadata-attribute
[2012-07-24 18:59:14 -0400] yfeldblum: gondoi, when you use a database, you can ask questions of it like: "is there a record with key ABC?" and "please give me the record whose key is XYZ"
[2012-07-24 18:59:32 -0400] yfeldblum: gondoi, you are then free to use whatever programming language you've got to inspect the result of that query
[2012-07-24 18:59:37 -0400] newb: how to I delete all cookbooks from my chef server using knife?
[2012-07-24 18:59:44 -0400] yfeldblum: gondoi, and that's how to work with data bags and data bag items
[2012-07-24 19:00:01 -0400] gondoi: yfeldblum: sure.. i get that, but what about documentation that lives in metadata.rb?
[2012-07-24 19:00:09 -0400] jtimberman: metadata?
[2012-07-24 19:00:13 -0400] jtimberman: bah
[2012-07-24 19:00:22 -0400] jtimberman: where's bawt!
[2012-07-24 19:00:41 -0400] yfeldblum: gondoi, there is no special handling for that in cookbook metadatas
[2012-07-24 19:00:48 -0400] jtimberman: http://wiki.opscode.com/display/chef/Metadata
[2012-07-24 19:00:49 -0400] gondoi: right :D
[2012-07-24 19:00:57 -0400] j|: hrm, I'm assuming 'knife ssh' uses the FQDN of the node to connect to?
[2012-07-24 19:00:59 -0400] gondoi: i'm asking what can be done if anything
[2012-07-24 19:01:11 -0400] yfeldblum: gondoi, most people write either cursory or extremely-detailed descriptions, possibly with code examples, in cookbooks' readme files
[2012-07-24 19:01:39 -0400] gondoi: okay
[2012-07-24 19:01:45 -0400] yfeldblum: gondoi, like this example: https://github.com/opscode-cookbooks/users#usage
[2012-07-24 19:01:48 -0400] mattray: j|: I believe it uses the node.name by default, so you'll want to use -a ipaddress or -a fqdn
[2012-07-24 19:01:59 -0400] gondoi: yfeldblum: yeah we are considering doing something in the desc like "data bag: blah"
[2012-07-24 19:02:28 -0400] btm: maruq: take a look at http://tickets.opscode.com/browse/COOK-1381
[2012-07-24 19:02:37 -0400] gondoi: the difference is that we are wanting to parse it programmatically
[2012-07-24 19:02:55 -0400] yfeldblum: gondoi, just curious: what for?
[2012-07-24 19:02:58 -0400] jtimberman: maruq: you can look up the resource in your recipe wherey ou need it and call run action
[2012-07-24 19:02:59 -0400] j|: mattray: cool. thanks. Didn't come across that info in 'knife help ssh'
[2012-07-24 19:03:01 -0400] jtimberman: like
[2012-07-24 19:03:12 -0400] jtimberman: resources("execute[apt-get update]").run_action :run
[2012-07-24 19:03:31 -0400] yfeldblum: or just: `apt-get update`
[2012-07-24 19:03:34 -0400] gondoi: so the same way that chef-server displays attributes and default values and such, a way to present a data bag that is required in order for a cookbook to run
[2012-07-24 19:03:46 -0400] mattray: j|: you'll typically run something like knife ssh "role:base" "chef-client" -x root -a ipaddress
[2012-07-24 19:03:48 -0400] j|: mattray: wow, I totally stand corrected. that's like the first line in 'knife help ssh'
[2012-07-24 19:04:10 -0400] maruq: jtimberman: cool, thanks
[2012-07-24 19:04:19 -0400] mattray: j|: but I now see the default is fqdn
[2012-07-24 19:04:29 -0400] yfeldblum: gondoi, might want to consider depending more on git and readme files, and less on the chef-server-webui?
[2012-07-24 19:05:18 -0400] gondoi: yfeldblum: probably, we were just looking for a standard that may have already been there
[2012-07-24 19:05:20 -0400] j|: mattray: yea, that explains why the first nodes I did worked b/c I used the FQDN as the name, then I thought "well, it knows what to do, make the names short"
[2012-07-24 19:05:40 -0400] yfeldblum: gondoi, my standard way is git and readmes ^-^
[2012-07-24 19:05:45 -0400] pdoc: i dont mean to be annoying, i just asked this, but does anyone have a recommendation of where to look to solve this issue? i saw it was asked before in here and the fix had to do with metadata.rb, but i cant see how this would happen for every cookbook
[2012-07-24 19:05:46 -0400] pdoc: pdougherty@Phils-Mac-mini cookbooks (master) $ knife cookbook upload php -o ./
[2012-07-24 19:05:46 -0400] pdoc: ERROR: ArgumentError: wrong number of arguments (1 for 2)
[2012-07-24 19:05:48 -0400] mattray: j|: I use -a ipaddress out of habit
[2012-07-24 19:05:54 -0400] j|: but the '-a' is exactly what I needed. For some reason I stopped reading that when I saw '--attribute'
[2012-07-24 19:05:58 -0400] mattray: j|: too many clouds
[2012-07-24 19:07:42 -0400] allan_wind: How do I render a template into a ruby variable instead of file?
[2012-07-24 19:08:49 -0400] ggolin: hoooooooo i really want to know what you are doing, allan_wind
[2012-07-24 19:09:31 -0400] allan_wind: well, I am writing a iptables cookbook, and I prefer not having state in both the kernel and a template file
[2012-07-24 19:10:07 -0400] hoover_damm: allan_wind, file "/tmp/foo" do content whatever end
[2012-07-24 19:10:11 -0400] allan_wind: thinking of rendering a template to a variable, call iptables-save + some fixup, then diff the two to see if I need to update it
[2012-07-24 19:10:23 -0400] hoover_damm: allan_wind, use the file resource + content to make a cheap template
[2012-07-24 19:10:41 -0400] hoover_damm: that's how i write database.yml for example
[2012-07-24 19:11:21 -0400] yfeldblum: allan_wind, ggolin, https://gist.github.com/734005a4ba53fce449a0
[2012-07-24 19:11:25 -0400] allan_wind: hoover_damm: how to combine your file with your content?
[2012-07-24 19:12:48 -0400] allan_wind: yfeldblum: that is for a plain .erb template but would like to plug into the usual chef magic to locate the right template
[2012-07-24 19:13:38 -0400] allan_wind: just figured there would be a relatively easy way
[2012-07-24 19:13:42 -0400] maruq: jtimberman: good news is if I remove the password setting block, the postgresql::server stuff completes fine
[2012-07-24 19:14:10 -0400] hoover_damm: allan_wind, you don't combine
[2012-07-24 19:14:31 -0400] hoover_damm: allan_wind, that is a cheap template pattern so you can write content to a file without using the template resource or creating erb files
[2012-07-24 19:14:34 -0400] ggolin: but does he blend
[2012-07-24 19:14:48 -0400] hoover_damm: now if you want to read the data in a ruby block, then add it to your data
[2012-07-24 19:14:50 -0400] hoover_damm: and then write it
[2012-07-24 19:14:52 -0400] hoover_damm: that could work
[2012-07-24 19:15:15 -0400] maruq: jtimberman: and it's only really used to check the login stuff.
[2012-07-24 19:15:16 -0400] allan_wind: hoover_damm: ah... that content.  Yeah, I prefer not writing the file at all.
[2012-07-24 19:15:18 -0400] hoover_damm: but there's a point where a template resource and owning the file works
[2012-07-24 19:15:40 -0400] maruq: alright, going to head home & grab some food. I'll try and have more of a bash later
[2012-07-24 19:16:23 -0400] maruq: thanks guys.
[2012-07-24 19:16:42 -0400] allan_wind: diff q, then, how do I find the path at run-time of the template per file specificy?
[2012-07-24 19:17:02 -0400] allan_wind: then I can use yfeldblum's suggestion
[2012-07-24 19:17:27 -0400] aabes: any way to tell chef client to keep the temp files it generates to run scripts?
[2012-07-24 19:17:31 -0400] yfeldblum: allan_wind, https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/template.rb#L78-79
[2012-07-24 19:17:43 -0400] railsraider: worth knowing, thanks to Michael Papis, he fixed my request to disable Doc and RI when Ree is installed  which makes rvm-chef fly with see installation (just change line78 on chef_rvm_recipe_helpers to     command "curl -L https://get.rvm.io | bash -s head "
[2012-07-24 19:18:02 -0400] allan_wind: yfeldblum: sweet, thx
[2012-07-24 19:24:47 -0400] aabes: any debugging hints for a bash resource that fails on one node, while all it's doing is a chmod?
[2012-07-24 19:25:12 -0400] aabes: debug dump has:  line 1: nil: command not found
[2012-07-24 19:25:41 -0400] aabes: it also checks that the file exists before attempting to chmod it with a  only_if " [[ -e FILE ]] "
[2012-07-24 19:26:53 -0400] railsraider: aabes: only_if "test -f file"
[2012-07-24 19:27:20 -0400] geekbri: You have to pass guards either a block or a command
[2012-07-24 19:27:35 -0400] aabes: well.. bash seems to be ok with [[ -e xXX ]] on the command line, and on other nodes..
[2012-07-24 19:28:12 -0400] anthroprose: aabes: interpolation from ruby DSL i think.... need to escape them if your doing stuff like that
[2012-07-24 19:28:17 -0400] geekbri: indeed it works for me from cmd line as well but maybe whatever ruby is using to shell out doesnt like it.
[2012-07-24 19:28:39 -0400] geekbri: yeah for example, maybe you need to escape it.  Although using test -f <file_name> works just as well
[2012-07-24 19:28:42 -0400] geekbri: and is a lot less messy
[2012-07-24 19:29:09 -0400] aabes: test sees to fail in the same way
[2012-07-24 19:29:43 -0400] geekbri: maybe you could gist the bash resource ?
[2012-07-24 19:30:15 -0400] retr0h_: aabes: not_if { ::File.exists?("/path/to/file") } ?
[2012-07-24 19:30:20 -0400] aabes: oh, and it's actually a /dev/XXX, not actually a file, so need to use -e or -c
[2012-07-24 19:31:01 -0400] railsraider: pastie?
[2012-07-24 19:31:04 -0400] aabes: retr0h - that's an option... though I'm curious if folks have ideas on why it would fail on one node, and not on 4 others...
[2012-07-24 19:31:25 -0400] railsraider: no one knows what you are trying to do
[2012-07-24 19:31:31 -0400] anthroprose: if using execute, use 'creates' instead of not_if... I think it's better supported
[2012-07-24 19:31:31 -0400] geekbri: youre sure the nodes are identical? :)
[2012-07-24 19:31:31 -0400] railsraider: pastie
[2012-07-24 19:31:33 -0400] anthroprose: could be wrong tho..
[2012-07-24 19:31:48 -0400] allan_wind: yfeldblum: the code to lookup template, I think, depends on name of cookbook.  How do I find that so I don't have to hard-code it?
[2012-07-24 19:32:16 -0400] aabes: http://pastebin.com/YW3a14K5
[2012-07-24 19:34:00 -0400] anthroprose: ah, actually want to check +x on it... gotcha
[2012-07-24 19:34:53 -0400] railsraider: aabes:  The a flag has the same effect as specifying the ugo flags
[2012-07-24 19:35:05 -0400] yfeldblum: allan_wind, from the top-level of a recipe file?
[2012-07-24 19:36:25 -0400] allan_wind: yfeldblum: within a ruby block but top level is fine too
[2012-07-24 19:45:01 -0400] yfeldblum: allan_wind, you may be able to use `cookbook_name` to get the name of the current cookbook from the recipe's top-level
[2012-07-24 19:45:08 -0400] yfeldblum: allan_wind, https://github.com/opscode/chef/blob/master/chef/lib/chef/recipe.rb#L39
[2012-07-24 19:47:22 -0400] allan_wind:  yfeldblum: excellent
[2012-07-24 19:52:13 -0400] aabes: railsraider: thanks. but the problem seems to be that even an "echo" fails on that onde
[2012-07-24 19:52:59 -0400] aabes: basically a bash resource, with the command  "echo 'life is beautiful'" fails... .draw your own conclusions
[2012-07-24 19:54:25 -0400] j|: for editing a databag in a cookbook, I'm assuming one should create a directory in the cookbook called 'databags'. Is that the standard practice for wanting to keep the databags in version control? (followed by 'knife data bag from file <data_bag_name> <file_name>')}
[2012-07-24 19:54:37 -0400] gmcinnes: Does Chef store backups of configs it has templates of by default?
[2012-07-24 19:55:08 -0400] gmcinnes: ie, if I made changes locally on a host and then slayed them with a chef run, can expect a copy of the local changes to have been stored anywhere?
[2012-07-24 19:56:34 -0400] j|: ah, crap. Today is "find the answer in the documentation after asking the question day for me."
[2012-07-24 19:56:59 -0400] j|: quitting smoking serious impairs one's ability to RTFM.
[2012-07-24 19:57:12 -0400] j|: my attention span is like zero, man. anyway...
[2012-07-24 19:59:00 -0400] allan_wind: j[: you will get some years back to catch up on the manuals :-)
[2012-07-24 20:00:45 -0400] aabes: j| - you find your answer?
[2012-07-24 20:00:55 -0400] aabes: there's a data_bag_item class that you can use in your recipies...
[2012-07-24 20:01:22 -0400] aabes: gmcinnes - not by default
[2012-07-24 20:01:32 -0400] j|: yea, its right on the page about (waaaiit for it.) data bags. (wiki.opscode.com/chef/Data+Bags)
[2012-07-24 20:02:04 -0400] newb: what good sinatra based frontends are there for elasticsearch
[2012-07-24 20:03:04 -0400] j|: allan_wind: yea, I know.. I'm tryin, man! My GF is out of town so I'm trying to do it in the month that she's gone or else it will be 8 times as hard.
[2012-07-24 20:03:29 -0400] aabes: any thoughts what can cause a "bash" echo to report nil: command not found, for pretty much anything?
[2012-07-24 20:04:06 -0400] j|: aabes: windows ami? ;)
[2012-07-24 20:04:19 -0400] aabes: rhel 6.2
[2012-07-24 20:04:39 -0400] stormerider: what's the command to bootstrap chef on a node over ssh with knife? and if i go to do that, should i set up the role first or can i do that afterwards?
[2012-07-24 20:05:15 -0400] aabes: found CHEF-2850, but that doesn't seem to be the case for me
[2012-07-24 20:06:08 -0400] j|: aabes: that's weird. don't know what to tell you. Sounds like a problem with the provider? or you are using an 'execute' resource?
[2012-07-24 20:06:36 -0400] aabes: using 'bash' explicitly
[2012-07-24 20:06:43 -0400] j|: aabes: I'm probably not much help. blind leading the less blind at this point..
[2012-07-24 20:07:03 -0400] aabes: here's the code: http://pastebin.com/YW3a14K5
[2012-07-24 20:07:26 -0400] gmcinnes1: aabes: thx.  oops on me, I guess :)
[2012-07-24 20:10:58 -0400] j|: aabes, never seen a bash resource yet, but from the examples compared to your code, I don't see any "command" attributes on the examples
[2012-07-24 20:11:11 -0400] j|: on the examples I see them use a Here Doc
[2012-07-24 20:11:49 -0400] j|: aabes: http://wiki.opscode.com/display/chef/Resources#Resources-Script
[2012-07-24 20:11:58 -0400] j|: code <<-EOH
[2012-07-24 20:12:42 -0400] j|: but I see the command attribute in the execute resource, which the Script resource is supposed to inherit from..
[2012-07-24 20:12:57 -0400] aabes: yea.. about to try that. the funny thing is that it works just fine on multiple nodes - fails on just 1
[2012-07-24 20:14:04 -0400] j|: hrm. and thus your question I suppose. I'm interested to hear the differences between the node that it fails on?
[2012-07-24 20:14:31 -0400] j|: (I'm assuming that this node is not totally foo-bar'd from something like 'sudo chmod -R 000 /'
[2012-07-24 20:17:01 -0400] stormerider: hm. question, is chef supported on fedora 8?
[2012-07-24 20:18:04 -0400] aabes: hmm.. switching to code from command seems to have made the failed node happier...
[2012-07-24 20:18:15 -0400] aabes: and no.. it was'nt foobared.. fresh KS install
[2012-07-24 20:19:20 -0400] j|: wonder why the "command" would fail, but the code heredoc would go through.
[2012-07-24 20:19:44 -0400] j|: if you figure out an answer, I'd be interested in hearing it.
[2012-07-24 20:22:47 -0400] excalq: On an EC2 instance creation, I'm seeing a "FATAL: Net::HTTPServerException: 401 "Unauthorized"", but with no info about where/what/why. It's after the line "INFO: *** Chef 10.12.0 ***" during the build (shortly after the ohai install completes)
[2012-07-24 20:23:17 -0400] stormerider: what distros does "knife bootstrap" support? anyone have a list?
[2012-07-24 20:23:27 -0400] sascha_d: excalq... auth to the chef server is probably failing
[2012-07-24 20:23:57 -0400] excalq: can I test that without building an instance each time?
[2012-07-24 20:24:45 -0400] anthroprose: excalq: its most likely ACL permissions within the chef server
[2012-07-24 20:24:56 -0400] anthroprose: ive had that happen when the node/client had permission but not the group
[2012-07-24 20:25:36 -0400] excalq: so this is during a build of a new node
[2012-07-24 20:25:59 -0400] excalq: and failed builds aren't yet added as nodes.
[2012-07-24 20:26:50 -0400] excalq: I'll experiement with ACL permissions for the validation-client
[2012-07-24 20:29:15 -0400] excalq: oh, if I made an AMI from a prior chef node, and use that AMI to build a new node, might the /etc/chef contents get in the way?
[2012-07-24 20:29:34 -0400] excalq: If so, that's an interesting situation that I'll need to find a resolution to..
[2012-07-24 20:30:17 -0400] fooforge: stormerider: I think knife bootstrap only supports Fedora 13 or higher. Opscode's wiki mentions four currently supported distributions: http://wiki.opscode.com/display/chef/Knife+Bootstrap
[2012-07-24 20:31:32 -0400] aabes: make sure the hostname is set correctly....
[2012-07-24 20:31:57 -0400] aabes: chef-client will try to use the hostname as the client name, and if one already exists... then auth will fail
[2012-07-24 20:32:32 -0400] fooforge: stormerider: Nevertheless I'd strongly advise to upgrade. Fedora 8 is almost five years old. EoL has happened in January 2009.
[2012-07-24 20:36:20 -0400] stormerider: fooforge: thanks. i don't know why we're using such an old image, or why fedora, even. i need to talk to some of our engineering folks and see if i can migrate these images over to ubuntu instead, since that's what we're using for virtually everything else.
[2012-07-24 20:40:28 -0400] fooforge: stormerider: Welcome.
[2012-07-24 21:21:07 -0400] cluther: Anyone ever run into a Unauthorized validation.pem when attempting to bootstrap nodes?
[2012-07-24 21:21:22 -0400] cluther: With debug logging on the chef-server I can see the error is: padding check failed
[2012-07-24 21:21:36 -0400] cluther: I've tried resetting the chef-validator key to no avail.
[2012-07-24 22:01:20 -0400] Guest45437: any good docs on using git as version control on chef-server. Reading http://wiki.opscode.com/display/chef/Chef+Repository but it doesn't explain how to configure chef-server to automatically update git
[2012-07-24 22:02:59 -0400] yfeldblum: Guest45437, because chef-server of course does not automatically update git
[2012-07-24 22:03:46 -0400] yfeldblum: Guest45437, indeed, if you do have some sort of connection between them, it would be the other way around! if you change something in git and push it to the shared git server, you might have a post-receive hook that looks at the changes and pushes the changes to the chef-server
[2012-07-24 22:06:04 -0400] Guest45437: yfeldblum, thanks so we need to set up triggers on the git server to update the chef server
[2012-07-24 22:06:22 -0400] yfeldblum: Guest45437, you can certainly do that, if that's the approach you want to take
[2012-07-24 22:09:07 -0400] Guest45437: yfeldblum, the most optimal solution would be to have the git server updated when someone does a knife upload
[2012-07-24 22:09:19 -0400] j|: Guest45437: there were some people talking about similar things on the chef mailing list a few weeks ago
[2012-07-24 22:09:43 -0400] j|: Guest45437: they actually had their post-hooks figuring out which knife commands to run
[2012-07-24 22:10:03 -0400] j|: Guest45437: if you searched the mailing list for "infrastructure as code" it should come up.
[2012-07-24 22:11:01 -0400] Guest45437: j|: ThanksI'll go check out the mailing list
[2012-07-24 22:12:18 -0400] yfeldblum: Guest45437, that is, actually, a really bad solution - the opposite of optimal
[2012-07-24 22:12:33 -0400] j|: yfeldblum: lol
[2012-07-24 22:13:04 -0400] yfeldblum: Guest45437, as a software developer, i have made it my practice *not* to SSH into the production servers, open vim, and start typing code!
[2012-07-24 22:13:25 -0400] j|: Guest45437: the mailing list thread was doing the opposite, having git commits then get translated to knife commands.
[2012-07-24 22:13:39 -0400] yfeldblum: Guest45437, and even if i were to have to do that, i wouldn't want my edits to be auto-committed to git!
[2012-07-24 22:13:41 -0400] mattray: yeah, Jenkins picks up commits, tests them, then deploys them
[2012-07-24 22:14:22 -0400] yfeldblum: Guest45437, i treat the infrastructure codebase like it's one giant application, whose purpose is to run other individual applications
[2012-07-24 22:15:00 -0400] j|: Guest45437: but, someone else, last week, mentioned santoku
[2012-07-24 22:15:06 -0400] j|: Guest45437: https://github.com/knuckolls/knife-santoku
[2012-07-24 22:15:38 -0400] Guest45437: j|: so the mailing list thread method would never have the developer use knife
[2012-07-24 22:16:33 -0400] j|: it only does hipchat right now I believe, but if you'd rather your workflow be knife-oriented, I'd bet the author would point out how to extend it to have git call backs. I don't know if there's already something like that out there, but it does seem to be the opposite of how most people want to work
[2012-07-24 22:17:20 -0400] j|: Guest45437: right, no knife use was their policy
[2012-07-24 22:17:25 -0400] j|: everything via git
[2012-07-24 22:23:23 -0400] Guest45437: yfeldblum: I thought you were upping versions on the server everytime you ran knife upload, it would be nice to have that automatically updated to version control. I was thinking we could control the actual versions applied by the Environments. I will have to read up on knife as Im fairly new to this
[2012-07-24 22:25:12 -0400] yfeldblum: Guest45437, what's the point of having version control at all, in that scenario?
[2012-07-24 22:28:18 -0400] Guest45437: It seems most people don't want their workflow to be knife oriented.
[2012-07-24 22:28:48 -0400] Guest45437: yfeldblum: I see your point, if using knife, the chef server acts as the version control anyways.
[2012-07-24 22:29:25 -0400] grantr: chef server is NOT version control
[2012-07-24 22:29:33 -0400] j|: Guest45437: well, you can't 'git reset' w/ knife.
[2012-07-24 22:29:47 -0400] countdigi: grantr: amen
[2012-07-24 22:29:57 -0400] j|: or branch.. or.. you know.. control versions. ;)
[2012-07-24 22:30:34 -0400] yfeldblum: Guest45437, so very wrong ... the chef-server is absolutely not version control, and if you try to use it like version control, good luck with that!
[2012-07-24 22:30:43 -0400] Guest45437: I thought you could save different versions of the cookbooks on the chef-server
[2012-07-24 22:31:44 -0400] yfeldblum: Guest45437, the point of version control like git is to enable many different developers, working in different places and at different times and over a long period of time, to collaborate in building complex software
[2012-07-24 22:32:38 -0400] yfeldblum: Guest45437, of course, you're not going to get any of those benefits by following the approach you described - regardless of whether or not you've got a post-upload git-commit hook
[2012-07-24 22:36:37 -0400] Guest45437: yfeldblum, which is why you would have all the developers collborate on git and at the end release the cookbook, to the chef server.
[2012-07-24 22:37:12 -0400] yfeldblum: Guest45437, yes ... git first, chef-server second, and no need for a hook from chef-server to commit to git
[2012-07-24 22:42:48 -0400] jdsanders: Howdy - It looks like there's a few different tools out there to assist in bootstrapping and converging a set of servers with chef-solo - has any one of them gained more mindshare than any of the rest?
[2012-07-24 22:44:40 -0400] mydalon1: Hi, I would like to check whether the last chef-client run was successful - how would I do that? I thought about checking whether /var/cache/chef/failed-run-data.json exists - but this file is not deleted with a successful run. Any ideas?
[2012-07-24 22:45:12 -0400] Guest45437: yfeldblum, j| : Thanks for the info. I'll check the mailing lists as well.
[2012-07-24 22:45:45 -0400] j|: Guest45437: glad anything I said helped. I'm still figuring most of this out myself.
[2012-07-24 22:46:22 -0400] retr0h_: mydalon1: probably want to setup an exception handler of some sort: http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2012-07-24 22:47:46 -0400] mydalon1: retr0h_, I will have a look at this, thx
[2012-07-24 22:49:55 -0400] retr0h: mydalon1: you can also search all your nodes and see which ones haven't checked in successfully in n seconds....
[2012-07-24 22:50:23 -0400] j|: retr0h: command / link?
[2012-07-24 22:52:45 -0400] retr0h: j|: I had used this before (https://gist.github.com/668421)
[2012-07-24 22:53:36 -0400] j|: nice. bookmarked. thx!
[2012-07-24 23:23:06 -0400] tupy: hey guys, how can I get a default value for a missing data_bag_item?
[2012-07-24 23:25:45 -0400] yfeldblum: tupy, by finding out of it exists and handling both the case where it does exist and the case where it does not exist
[2012-07-24 23:26:00 -0400] masterkorp: Guys when bootstaping a node do i need the validator.pem in it ?
[2012-07-24 23:47:12 -0400] newb: masterkorp, no
[2012-07-24 23:47:24 -0400] newb: your bootstrap script/template should do it for you
[2012-07-24 23:47:28 -0400] Guest45437: j|: the mailing list http://lists.opscode.com/sympa/arc/chef/2012-06/msg00266.html was a good read

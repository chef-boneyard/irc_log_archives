[2012-07-03 00:00:02 -0400] tmolina: ty jameson
[2012-07-03 00:00:07 -0400] bdha: First step is files, templates, data bags and search.
[2012-07-03 00:00:15 -0400] cnf: hmm
[2012-07-03 00:00:17 -0400] bdha: Then writing LWPRs and managing node attributes.
[2012-07-03 00:00:24 -0400] tmolina: I was declaring node attributes but weren't getting picked up -must have been overriding somewhere
[2012-07-03 00:00:31 -0400] cnf: bdha: ok, now that was kinda useful
[2012-07-03 00:00:41 -0400] bdha: I'll read that as a "thank you." :)
[2012-07-03 00:00:49 -0400] cnf: it was, it was :P
[2012-07-03 00:01:00 -0400] cnf: i'm seeing a liitle bit of clarity
[2012-07-03 00:01:31 -0400] jameson: tmolina: if you are concerend about the attributes, you can also use override_attributes() in roles as well
[2012-07-03 00:01:38 -0400] cnf: also, i don't think i fully understand what LWPR's are
[2012-07-03 00:01:39 -0400] drrk: just pulling all your configs into a git repo is a good start, as you get them together and you can look for patterns
[2012-07-03 00:01:53 -0400] bdha: cnf: In all honestly -- and this is not some Zen bullshit -- you have to learn by doing. Solve your problem, even if you do it in the most ghetto fashion.
[2012-07-03 00:01:58 -0400] erratic: lightweight readonly writers
[2012-07-03 00:02:00 -0400] bdha: Because then you have a block of code you can _refine_.
[2012-07-03 00:02:10 -0400] bdha: When I started doing CM five years ago, my first puppet repo was a fucking nightmare.
[2012-07-03 00:02:11 -0400] erratic: protocols
[2012-07-03 00:02:18 -0400] cnf: bdha: i am doing
[2012-07-03 00:02:26 -0400] cnf: bdha: but i don't even get half of chef yet
[2012-07-03 00:02:28 -0400] tmolina: jameson, i thought though the node.defaults in the cookbook would override
[2012-07-03 00:02:40 -0400] cnf: so i'm trying to define problems, so i have stuff to try
[2012-07-03 00:02:48 -0400] erratic: cnf I spent many nights in the udistrict drinking beer and hacking away
[2012-07-03 00:03:00 -0400] bdha: cnf: Yup. Good luck. Time for dinner. :)
[2012-07-03 00:03:01 -0400] erratic: my poor liver
[2012-07-03 00:03:02 -0400] erratic: ouch o_O
[2012-07-03 00:03:07 -0400] jameson: tmolina: the order is defaults, normal, then overrides
[2012-07-03 00:03:21 -0400] jameson: tmolina: http://wiki.opscode.com/display/chef/Attributes
[2012-07-03 00:03:32 -0400] cnf: bdha: thanks!
[2012-07-03 00:03:46 -0400] cnf: erratic: i'm from Belgium
[2012-07-03 00:03:56 -0400] tmolina: thanks, I've been looking at http://wiki.opscode.com/display/chef/Templates but
[2012-07-03 00:04:17 -0400] erratic: guys Im stinky
[2012-07-03 00:04:20 -0400] erratic: Im going home
[2012-07-03 00:04:21 -0400] erratic: to shower
[2012-07-03 00:04:23 -0400] erratic: x_x
[2012-07-03 00:04:24 -0400] tmolina: thought it was something in the way I declared the dependency  that was screwing it up
[2012-07-03 00:04:25 -0400] jameson: tmolina: you should pass values into Templates using variables({ --- })
[2012-07-03 00:04:39 -0400] erratic: hoover_damm thank you as always, wish I could buy you coffee sometime
[2012-07-03 00:04:46 -0400] erratic: thanks everyone else
[2012-07-03 00:04:48 -0400] erratic: night
[2012-07-03 00:04:52 -0400] cnf: night
[2012-07-03 00:04:59 -0400] jameson: night
[2012-07-03 00:05:09 -0400] tmolina: jameson, I am using the sudo cookbook don't wanna mess around with it
[2012-07-03 00:05:30 -0400] hoover_damm: erratic, as i said earlier.  No thanks.
[2012-07-03 00:05:49 -0400] tmolina: i just wanna be able to pass in the attributes and not edit the template in the cookbook - is that good practice?
[2012-07-03 00:07:58 -0400] jameson: tmolina: do not be afraid to monkey-patch/modify the cookbooks :P
[2012-07-03 00:08:35 -0400] jameson: tmolina: yes, if you modify the attributes in roles they would be changed before it runs.
[2012-07-03 00:08:45 -0400] jameson: bdha: right?
[2012-07-03 00:09:02 -0400] jameson: attributes from roles are loaded before any of the convergence happens I believe
[2012-07-03 00:09:04 -0400] josephholsten: tmolina: well, be a little afraid to monkey patch the *sudo* cookbook
[2012-07-03 00:09:04 -0400] jameson: double checking..
[2012-07-03 00:09:26 -0400] tmolina: ha - yea I just monkey-patched and it worked, but thought there might be a way you're supposed to
[2012-07-03 00:10:05 -0400] tmolina: i'll try overriding in the roles - just feels better :)
[2012-07-03 00:14:01 -0400] erratic_: sorry had to come back
[2012-07-03 00:14:09 -0400] erratic_: was enjoying that too much
[2012-07-03 00:14:48 -0400] jameson: oro
[2012-07-03 00:16:08 -0400] erratic_: ohai
[2012-07-03 00:16:55 -0400] erratic_: im thinking about grabbing my laptop and heading to the beer authority
[2012-07-03 00:21:06 -0400] syphon: so if you use chef-solo daemonized (with -d) and cookbooks from a URL (with -r), it doesn't re-download the cookbook with every iteration. Is that expected behavior or a bug?
[2012-07-03 00:23:41 -0400] jameson: it shouldn't unless the cookbooks have changed(?)
[2012-07-03 00:24:15 -0400] syphon: it doesn't even if they have changed
[2012-07-03 00:24:37 -0400] syphon: if I stop the daemon and restart it, it'll re-download the cookbooks (and pick up my change)
[2012-07-03 00:24:49 -0400] syphon: but I can't just leave the daemon running and have it pick up changes to the cookbook
[2012-07-03 00:25:58 -0400] jameson: that might... be the right behaviour
[2012-07-03 00:26:16 -0400] jameson: because the chef-server tells the chef-client what it needs to update
[2012-07-03 00:26:41 -0400] syphon: yeah, I figured -d was more used in a client/server model, and we're experimenting with more lightweight chef-solo implementations
[2012-07-03 00:27:10 -0400] syphon: I might have to just make a cron job out of it or something
[2012-07-03 00:27:14 -0400] hoover_damm: syphon, expected
[2012-07-03 00:27:47 -0400] hoover_damm: syphon, chef-client -i 1800 ... whenever chef-client triggers it doesn't do the entire run
[2012-07-03 00:27:50 -0400] hoover_damm: like running chef-client
[2012-07-03 00:28:23 -0400] hoover_damm: syphon, cronning chef-client creates a scaling pain on your endpoint ... so hope it's S3
[2012-07-03 00:28:26 -0400] hoover_damm: for your cookbooks
[2012-07-03 00:28:48 -0400] syphon: I'm running `chef-solo -j http://network/node.json -r http://network/cookbooks.tar.gz -i 60 -d`
[2012-07-03 00:29:04 -0400] hoover_damm: so it prolly won't re-read node.json nor re-fetch your cookbooks
[2012-07-03 00:29:11 -0400] syphon: I just want to leave it running, then update cookbooks.tar.gz and have it automagically pick them up
[2012-07-03 00:30:24 -0400] erratic_: how is that a scaling problem
[2012-07-03 00:30:53 -0400] syphon: it could create a Thundering Herd scenario (since cron doesn't splay like Chef can)
[2012-07-03 00:31:02 -0400] hoover_damm: syphon, +1
[2012-07-03 00:31:11 -0400] erratic_: i see
[2012-07-03 00:31:24 -0400] syphon: still, I'd like to use chef-solo daemonized for this rather than a cron job :(
[2012-07-03 00:31:28 -0400] erratic_: staggering
[2012-07-03 00:31:34 -0400] jameson: syphon: you could give them a time offset based on their fqdn
[2012-07-03 00:37:25 -0400] erratic_: i am going to code the shit out of some chef cookbooks in a bit
[2012-07-03 00:48:56 -0400] lawrenceseattle: I'm trying to get custom resources to inherit properly, but it looks like it can't find the dependent resource  (Bash)  How do you ensure that it's loaded right?
[2012-07-03 01:32:56 -0400] josephholsten: ok, so windows doesn't have readlink
[2012-07-03 01:33:08 -0400] josephholsten: this makes the deploy resource awkward
[2012-07-03 01:46:46 -0400] hoover_damm: capistrano style deploys on windows could be fun
[2012-07-03 01:47:09 -0400] hoover_damm: could but i doubt it
[2012-07-03 01:47:23 -0400] josephholsten: hoover_damm: ever seen anyone doing that sort of thing? this is unexplored territory for me
[2012-07-03 01:47:50 -0400] josephholsten: I want to use the new hotness in the application cookbook
[2012-07-03 01:50:20 -0400] hoover_damm: josephholsten, not off hand
[2012-07-03 01:50:28 -0400] hoover_damm: josephholsten, new stuff is always fun
[2012-07-03 01:51:15 -0400] josephholsten: well `ln -s` in cygwin just creates a copy
[2012-07-03 01:51:16 -0400] josephholsten: not even a hard link
[2012-07-03 01:51:32 -0400] hoover_damm: you need the equivilent pattern
[2012-07-03 01:51:38 -0400] hoover_damm: to create links in windows
[2012-07-03 01:51:59 -0400] hoover_damm: http://stackoverflow.com/questions/46885/how-to-create-symbolic-links-in-windows
[2012-07-03 01:52:11 -0400] hoover_damm: subst
[2012-07-03 01:52:12 -0400] hoover_damm: ahh
[2012-07-03 01:52:18 -0400] josephholsten: I'll go look around the alt.net community, maybe the nuget folks will have a deployment style I can copy
[2012-07-03 01:52:19 -0400] josephholsten: ?
[2012-07-03 01:53:38 -0400] josephholsten: really?
[2012-07-03 01:54:28 -0400] josephholsten: that's a solution for the current -> releases/foo problem, but we've still got shared configs &c
[2012-07-03 01:56:07 -0400] hoover_damm: well you have subst or .shortcuts
[2012-07-03 01:56:08 -0400] hoover_damm: hehe
[2012-07-03 01:56:15 -0400] hoover_damm: not exactly what you wanted
[2012-07-03 01:56:24 -0400] josephholsten: mklink: http://technet.microsoft.com/en-us/library/cc753194(WS.10).aspx
[2012-07-03 01:56:38 -0400] josephholsten: not that it seems to be in my path
[2012-07-03 01:57:58 -0400] josephholsten: and I'm definitely on 2008r2
[2012-07-03 02:02:23 -0400] hoover_damm: josephholsten, http://superuser.com/questions/255731/make-a-hard-link-without-extra-programs-in-windows-7
[2012-07-03 02:05:10 -0400] josephholsten: weird, mklink is in the command.com path but not powershell
[2012-07-03 02:05:20 -0400] josephholsten: (or cygwin)
[2012-07-03 02:09:40 -0400] josephholsten: and mklink has backwards order, and works really really funky for directories
[2012-07-03 02:09:50 -0400] josephholsten: but we have progress!
[2012-07-03 02:15:21 -0400] josephholsten: we'll continue this shortly
[2012-07-03 02:22:21 -0400] jameson: in knife.rb it was knife[:environment] that sets the default environment for commands?
[2012-07-03 02:23:26 -0400] jameson: ah, it is
[2012-07-03 02:39:28 -0400] jameson: [Tue, 03 Jul 2012 02:35:50 +0000] FATAL: NoMethodError: undefined method `aintainer' for #<Chef::Cookbook::Metadata:0x7fa2bd952970>
[2012-07-03 02:39:31 -0400] jameson: this one is new :3
[2012-07-03 02:40:09 -0400] jameson: ah nvm
[2012-07-03 02:44:50 -0400] Twirrim: aintainer ;)
[2012-07-03 02:47:09 -0400] Twirrim: today has been oh so much fun, installing ruby and ruby gems by hand on some old SuSE boxes that none of the bootstrap options like, so I can get chef on them..
[2012-07-03 02:47:33 -0400] Twirrim: I'll be so glad when we're rid of them (and we do have a rough road-map for that anyway)
[2012-07-03 02:52:31 -0400] Twirrim: next stage, figure out why the chef-client::service and chef-client::cron recipes fail on our Oracle Linux boxes.
[2012-07-03 03:02:17 -0400] jtimberman: Twirrim: have you tried the latest full stack RPM on those suse boxes?
[2012-07-03 03:16:42 -0400] scairbus: I have the recipe chef-client::service in the base role, is there a way to negate that in another role? like !recipe[chef-client::service] in the chef server's role so that it doesn't run on the chef server but runs everywhere else?
[2012-07-03 03:18:06 -0400] jameson: scairbus: i don't believe so
[2012-07-03 03:18:32 -0400] jameson: scairbus: I have a similar issue, but I did it by adding the base role to every role, and not including it in the roles that didn't need it
[2012-07-03 03:18:57 -0400] scairbus: hmm shucks. there are other recipes in base that I want run
[2012-07-03 03:19:25 -0400] scairbus: I just want chef-client:service to stop screwing up the /var/run/chef and /var/log/chef permissions so solr will restart
[2012-07-03 03:20:20 -0400] jameson: :|
[2012-07-03 03:20:30 -0400] scairbus: thanks though
[2012-07-03 03:20:34 -0400] jameson_zzz: np
[2012-07-03 03:31:35 -0400] jtimberman: scairbus: edit your local copy of the chef-client::service recipe and put at the top something like
[2012-07-03 03:31:46 -0400] jtimberman: return if node.roles.include?("chef-server-role-name")
[2012-07-03 03:31:56 -0400] jtimberman: as the first line
[2012-07-03 03:33:06 -0400] scairbus: ah, cool, thanks, I'll give that a shot
[2012-07-03 03:44:28 -0400] scairbus: the cookbook in /vrar/c/ache/chef/cookbooks? for some reason it keeps deleting my line
[2012-07-03 03:44:59 -0400] scairbus: er deletes the return line. I wonder if I have a no-cache setting or something set
[2012-07-03 04:07:03 -0400] hoover_damm: jtimberman, how do I evaluate node.roles.include? so it works on the first run?
[2012-07-03 04:07:19 -0400] jtimberman: hoover_damm: use node.run_list.roles
[2012-07-03 04:07:20 -0400] hoover_damm: jtimberman, my problem is on the first run... when I bootstrap an instance node.roles is nil
[2012-07-03 04:07:24 -0400] jtimberman: scairbus: did you upload the cookbook?
[2012-07-03 04:07:26 -0400] hoover_damm: ahh
[2012-07-03 04:07:41 -0400] hoover_damm: jtimberman, gracias hit that a few times :)
[2012-07-03 04:07:53 -0400] jtimberman: hoover_damm: i'd think node.roles would work tho
[2012-07-03 04:07:59 -0400] hoover_damm: no
[2012-07-03 04:08:02 -0400] jtimberman: huh
[2012-07-03 04:08:02 -0400] hoover_damm: at least not on 0.10.8
[2012-07-03 04:08:06 -0400] scairbus: jtimberman: no I thought you meant update the local cached copy, I went ahead and just put it in the checked in cookbook and uploaded it
[2012-07-03 04:08:08 -0400] scairbus: works great, thanks
[2012-07-03 04:08:10 -0400] jtimberman: i'd have to go look in the code for where it gets expanded.
[2012-07-03 04:08:14 -0400] scairbus: now solr can restart
[2012-07-03 04:08:20 -0400] hoover_damm: it didn't get expanded until node.save
[2012-07-03 04:08:29 -0400] jtimberman: scairbus: yeah the cache will get updated every time
[2012-07-03 04:08:29 -0400] hoover_damm: I could node.save and then re-start the chef-run to catch it
[2012-07-03 04:08:30 -0400] hoover_damm: but meh
[2012-07-03 04:09:03 -0400] hoover_damm: yeah I was working on some stupid logic that depended on that... I resolved it was stupid logic
[2012-07-03 04:09:11 -0400] hoover_damm: and refactored it into something better
[2012-07-03 04:09:17 -0400] hoover_damm: so perhaps it's better that way? :)
[2012-07-03 04:16:26 -0400] jtimberman: yeah generally, i prefer the roles attribute for search, and run_list.roles for recipes.
[2012-07-03 04:58:50 -0400] BryanWB_: ohai chefs!
[2012-07-03 04:59:14 -0400] josephholsten: howdy BryanWB_
[2012-07-03 04:59:32 -0400] BryanWB_: yo josephholsten
[2012-07-03 04:59:51 -0400] josephholsten: anyone interested in chef on windows around?
[2012-07-03 05:00:03 -0400] sascha_d: interested is a loose term
[2012-07-03 05:00:14 -0400] josephholsten: I'm going back to tweaking the deploy resource to work on win
[2012-07-03 05:01:01 -0400] sascha_d: I pray I never have to deploy code on Windows. I'm sure the resource will be awesome though.
[2012-07-03 05:01:07 -0400] josephholsten: we'll see how well `mklink` as a `ln -s` replacement
[2012-07-03 05:01:23 -0400] josephholsten: I pray you never have to either
[2012-07-03 05:01:27 -0400] sascha_d: I've done one proof of concept on windows and didn't enjoy it
[2012-07-03 05:03:38 -0400] syphon: do I need to do anything special to make the 'service' resource work on OSX?
[2012-07-03 05:03:57 -0400] josephholsten: hippiehacker: you're big on the windows-chef stuff, right?
[2012-07-03 05:04:00 -0400] syphon: it works fine on Windows and CentOS, but on my macbook it says "unable to find /etc/init.d/svc"
[2012-07-03 05:04:22 -0400] hippiehacker: josephholsten: I've done a bit
[2012-07-03 05:05:15 -0400] josephholsten: hippiehacker: I'm trying to get the deploy resource working on win. atm I'm trying to get the symlink stuff working via 'mklink'.  anything else you'd like to see with deploy or the application cookbooks?
[2012-07-03 05:05:47 -0400] hippiehacker: I'm trying to write a knife script for 'knife rackspace server create'  any thoughts on how to approach that? Chef::Knife::RackspaceServerCreate.new.run 8)
[2012-07-03 05:06:11 -0400] josephholsten: syphon: what release of chef are you using?
[2012-07-03 05:07:19 -0400] hippiehacker: josephholsten: not off the top of my head
[2012-07-03 05:07:21 -0400] syphon: 10.8
[2012-07-03 05:08:22 -0400] josephholsten: syphon: ah, the macosx resource provider wasn't added yet
[2012-07-03 05:08:39 -0400] syphon: upgrading chef should fix it then?
[2012-07-03 05:09:23 -0400] josephholsten: looks like it's in 0.10.10, but you may as well upgrade to 10.12 in the mean time
[2012-07-03 05:09:33 -0400] syphon: word, thanks
[2012-07-03 06:43:00 -0400] josephholsten: goodness, this windows support is a rathole
[2012-07-03 07:31:19 -0400] laurent\: :)
[2012-07-03 09:09:59 -0400] zeroXten: how does one ensure that a certain ruby gem is available when using chef? e.g. i need to use ruby-ip because ipaddr sucks
[2012-07-03 10:01:35 -0400] zts: zeroXten: if it's for use by chef (as opposed to another application on your system), use the chef_gem resource
[2012-07-03 10:03:00 -0400] PapaSierra: morning, i'm working with chef for the first time. so far i've been using it with vagrant. now i'm using it with chef-solo on a vanilla server. so far i've come up with this (based heavily on other people's work): https://gist.github.com/2974764
[2012-07-03 10:03:42 -0400] PapaSierra: it appears to run correctly. it just sets up a run list and installs chef-solo and a few requirements. then it shows you the command to run chef at the end
[2012-07-03 10:04:40 -0400] PapaSierra: if the above is correct then i can move onto looking at the actual cookbooks
[2012-07-03 10:15:54 -0400] kesor: the nginx cookbook is using ohai for version, how does that work when bootstrapping? I am trying to set default['nginx']['version'] in the role file, but ohai overrides it with an empty string  can someone help?
[2012-07-03 10:41:52 -0400] zeroXten: zts: ah thanks :)
[2012-07-03 10:55:51 -0400] zeroXten: zts: hmm, i'm guessing chef_gem wouldn't work in solo mode?
[2012-07-03 10:56:57 -0400] zeroXten: undefined method `chef_gem'
[2012-07-03 10:58:56 -0400] chrisa2: chef_gem was new in 0.10.10 - which version are you on?
[2012-07-03 10:59:45 -0400] zeroXten: huh, 0.10.6
[2012-07-03 11:03:01 -0400] chrisa2: there is a cookbook which might help: http://community.opscode.com/cookbooks/chef_gem (i've not used it though)
[2012-07-03 11:16:52 -0400] zeroXten: chrisa2: ah, cunning, thanks
[2012-07-03 11:19:55 -0400] kesor: there is gem_package which is built-in
[2012-07-03 11:20:35 -0400] zeroXten: yeah, i am trying to use that, and in such a way that my require doesn't bork first
[2012-07-03 11:23:52 -0400] kesor: one thing I noticed about gem_package is that it is using the same ruby chef is running with, which might not be the same as you want to use. but it can be changed with gem_binary.
[2012-07-03 11:27:55 -0400] kesor: how can I overwrite ohai attributes before they are defined in ohai?
[2012-07-03 11:28:31 -0400] jatan: kesor, huh?
[2012-07-03 11:28:35 -0400] jatan: why would you want to do that?
[2012-07-03 11:29:06 -0400] kesor: when running chef-solo the first time, node['nginx']['version'] is empty because its empty in ohai, running second time works.
[2012-07-03 11:30:00 -0400] jatan: kesor, but it's neccessarily empty
[2012-07-03 11:30:08 -0400] jatan: it shows that nginx is not installed
[2012-07-03 11:30:16 -0400] jatan: once chef-solo installs it, it'll show the version
[2012-07-03 11:30:27 -0400] kesor: it tries to install the source version into /opt/nginx-    when it should install it into /opt/nginx-1.2.1  since the role file says default_attributes nginx/version=1.2.1
[2012-07-03 11:30:54 -0400] jatan: then the recipe is broken
[2012-07-03 11:31:00 -0400] jatan: and needs to be fixed
[2012-07-03 11:31:05 -0400] kesor: so the nginx cookbook is using the same attribute to say which version to install as well as which version is installed?
[2012-07-03 11:31:53 -0400] kesor: I'm a bit new to chef  so it took me a while to realize what I just said. guess i'd need to patch it :(
[2012-07-03 11:32:42 -0400] jatan: kesor, yes, the recipe should check if version is empty, then query which version is available
[2012-07-03 11:32:52 -0400] jatan: and set that as it's version string
[2012-07-03 11:33:00 -0400] kesor: but it is using node['nginx']['version'] in its attribute/source.rb file.
[2012-07-03 11:33:04 -0400] jatan: otherwise the above is inevitable
[2012-07-03 11:33:33 -0400] jatan: kesor, ah, then something is wrong with the attribute passing
[2012-07-03 11:33:35 -0400] kesor: also, if I want to replace the version, say upgrade the source compiled version .. then changing nginx['version'] will have no effect since it will use the ohai version.
[2012-07-03 11:34:22 -0400] kesor: to be frank, expected slighly better quality of cookbooks from community.opscode.com.
[2012-07-03 11:35:39 -0400] jatan: kesor, contact the author and ask him/her to explain how it should work
[2012-07-03 11:35:45 -0400] jatan: is probably the fastest way to resolve your issue
[2012-07-03 11:36:00 -0400] kesor: good idea, thanks.
[2012-07-03 11:37:37 -0400] PapaSierra: i've run chef with a runlist that includes php, mysql, apache2, ssl, and apt. chef reports completion in 68 seconds. no errors on screen. now: mysql is *sort of* installed, php not at all. i'm not sure what's wrong.
[2012-07-03 11:37:52 -0400] PapaSierra: for example: The program 'php' is currently not installed.  You can install it by typing: sudo apt-get install php5-cli
[2012-07-03 11:38:59 -0400] PapaSierra: oh, i think i installed mysql client, not server
[2012-07-03 11:43:54 -0400] kesor: PapaSierra: you probably need to read the README files more carefully for the cookbooks you are trying to use.
[2012-07-03 11:44:07 -0400] PapaSierra: right
[2012-07-03 11:44:43 -0400] PapaSierra: can i set up a main recipe from which all other recipes are run? instead of a runlist?
[2012-07-03 11:49:07 -0400] PapaSierra: kesor how do i go about debugging this: Mixlib::ShellOut::ShellCommandFailed: service[mysql] (mysql::server line 56) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2012-07-03 11:49:39 -0400] kesor: you might want to check your mysql server logs, see what kind of errors it has.
[2012-07-03 11:49:55 -0400] kesor: PapaSierra: you can setup a "role" which can include many recipes, yes.
[2012-07-03 11:50:32 -0400] PapaSierra: wow cool (regarding roles), not so cool regarding the error. let me see...
[2012-07-03 11:52:36 -0400] PapaSierra: kesor the logs are 100% empty. i guess that's to be expected because it's chef that died, not mysql
[2012-07-03 11:53:30 -0400] kesor: the error message you pasted usually has a file where the commands and errors are shown, you might want to look at that. it basicaly said that it tried to run some command but the exit code of that command was not 0 (which means the command failed, not chef).
[2012-07-03 11:53:34 -0400] PapaSierra: http://www.hastebin.com/gisakitobu.txt
[2012-07-03 11:54:18 -0400] PapaSierra: what is shellout?
[2012-07-03 11:54:44 -0400] kesor: it runs a command in a shell
[2012-07-03 11:55:03 -0400] kesor: you might want to look at open pull requests for the mysql cookbook, for example this one: https://github.com/opscode-cookbooks/mysql/pull/17   one of those might fix your problem.
[2012-07-03 11:55:42 -0400] PapaSierra: looks like: restart_service might be the problem
[2012-07-03 12:02:47 -0400] zeroXten: bah, it ignored my cookbook that used 'gem_package', even though I put it first in the run list. Does chef resolve all requirements first? I guess I'll have to use that chef_gem cookbook
[2012-07-03 12:05:28 -0400] zts: zeroXten: chef_gem does more than gem_package - it makes sure that the gem is installed early in the run (during the compile phase)
[2012-07-03 12:05:36 -0400] zeroXten: yeah, fair enough
[2012-07-03 12:05:51 -0400] zts: zeroXten: you can still make it do the same thing though, see here: http://www.opscode.com/blog/2009/06/01/cool-chef-tricks-install-and-use-rubygems-in-a-chef-run/
[2012-07-03 12:06:45 -0400] zts: I'd still recommend using chef_gem though - it'll make your own recipes a bit cleaner
[2012-07-03 12:07:48 -0400] zeroXten: zts: is the cookbook ok? I'd rather not be forced to update to 0.10.10 right now
[2012-07-03 12:08:22 -0400] zts: zeroXten: I haven't personally used it, but I'm lead to believe it works transparently
[2012-07-03 12:08:26 -0400] zeroXten: ok
[2012-07-03 12:08:30 -0400] zeroXten: i'll give it a go
[2012-07-03 12:08:48 -0400] zts: zeroXten: if you try it and it turns out not to work, you have my apology and I'll owe you a drink :)
[2012-07-03 12:08:57 -0400] DigitalFlux: Hi There
[2012-07-03 12:09:38 -0400] DigitalFlux: I am trying to install a chef server using the bootstrap method (chef-solo) on Ubuntu 12.04
[2012-07-03 12:09:49 -0400] DigitalFlux: I get some errors there, is 12.04 supported ?
[2012-07-03 12:09:57 -0400] DigitalFlux: [Tue, 03 Jul 2012 12:03:38 +0000] FATAL: Errno::ENOENT: No such file or directory - /var/lib/gems/1.8/gems/chef-10.12.0/distro/debian/etc/init.d/chef-solr
[2012-07-03 12:20:53 -0400] cnf: can roles depend on other roles?
[2012-07-03 12:21:11 -0400] cnf: so you define a role "base", and have your role "webserver" depend on the base role?
[2012-07-03 12:23:33 -0400] zts: cnf: absolutely, just include "role[base]" in your webserver role's run_list
[2012-07-03 12:25:08 -0400] DigitalFlux: never mind, i just installed chef from the gems instead of the system packages
[2012-07-03 12:36:40 -0400] cnf: zaiste_: oh, sweet!
[2012-07-03 12:36:42 -0400] cnf: zaiste_: thanks!
[2012-07-03 12:37:37 -0400] cnf: bah
[2012-07-03 12:37:46 -0400] cnf: zts: oh, sweet!, thanks! :P
[2012-07-03 12:37:54 -0400] cnf: zts: absolute lifesaver!
[2012-07-03 12:51:01 -0400] zts: np :)
[2012-07-03 13:02:22 -0400] geekbri: anybody have a good doc on how to get an existing server under chef management
[2012-07-03 13:10:39 -0400] cnf: geekbri: i saw a script that supposedly generated chef config, but i have never tried it
[2012-07-03 13:10:46 -0400] cnf: lemme see if i can find the link again
[2012-07-03 13:13:20 -0400] cnf: no, don't seem to be able to find it again
[2012-07-03 13:13:22 -0400] cnf: weird
[2012-07-03 13:14:32 -0400] geekbri: Thats ok, nobody seems to be alive so i'll just google around a bit more
[2012-07-03 13:21:59 -0400] cnf: if i come across that link again, i'll hit you up :P
[2012-07-03 13:22:11 -0400] cnf: also, why is my chef-client getting the cookbooks so slowly :/
[2012-07-03 13:22:28 -0400] jperry2: anyone have a recommendation for a plugin that will spin up a chef server on a vm and put all my cookbooks on it?
[2012-07-03 13:22:44 -0400] cnf: takes about 5 seconds per file doing "NFO: Storing updated cookbooks..."
[2012-07-03 13:23:25 -0400] cnf: jperry2: rake and knife bootstrap?
[2012-07-03 13:23:58 -0400] jperry2: so after you have a vm running use "knife bootstrap" to get a chef server up and running?
[2012-07-03 13:25:00 -0400] brugidou: no it'll run a chef-client i think
[2012-07-03 13:25:25 -0400] jperry2: I want a chef server up and running on a vm so folks can develop locally
[2012-07-03 13:25:31 -0400] jperry2: without using the main production server
[2012-07-03 13:25:40 -0400] jperry2: this also allows them to work offline too
[2012-07-03 13:25:56 -0400] brugidou: you could crate a simple vm image
[2012-07-03 13:26:07 -0400] brugidou: with a chef server you manually installed
[2012-07-03 13:26:16 -0400] brugidou: and distribute that to your devs
[2012-07-03 13:26:18 -0400] jperry2: true
[2012-07-03 13:26:23 -0400] jperry2: I think that is my best bet
[2012-07-03 13:26:35 -0400] jperry2: what is probably the minimum requirements for the vm
[2012-07-03 13:26:38 -0400] jperry2: memory, etc
[2012-07-03 13:26:40 -0400] brugidou: otherwise crowbar has an iso that bootstrap a server with everything
[2012-07-03 13:26:44 -0400] brugidou: but it's probably way to much
[2012-07-03 13:27:15 -0400] brugidou: i don't know... minimum like 8GB disk 512MB ram
[2012-07-03 13:28:05 -0400] PapaSierra: i hate being a noob and getting thrown curveballs! i can't make sense of this: http://www.hastebin.com/lurociyivu.txt i've tried updating to the latest version of the mysql cookbook from opscode, i've tried manually applying this pull request https://github.com/opscode-cookbooks/mysql/pull/17/files and i've tried using an old copy of the mysql cookbook that has worked for some colleagues. i'm just getting errors.
[2012-07-03 13:28:05 -0400] PapaSierra:  it's taken me 2 hours to make no progress :( anyone able to understand what's wrong?
[2012-07-03 13:28:13 -0400] geekbri: jperry2: I think fnichols is working on a knife plugin for that
[2012-07-03 13:28:30 -0400] geekbri: jperry2: http://fnichol.github.com/knife-server/
[2012-07-03 13:29:19 -0400] geekbri: PapaSierra: what happens when you try to go into the server and start or restart mysql manually?
[2012-07-03 13:29:28 -0400] cnf: jperry2: why not use chef-hosted?
[2012-07-03 13:30:24 -0400] PapaSierra: geekbri good point, let me try...
[2012-07-03 13:30:26 -0400] cnf: jperry2: also, you could knife bootstrap a machine, and have a cookbook to have chef-client install chef-server
[2012-07-03 13:33:06 -0400] PapaSierra: geekbri interesting: in /etc/init.d/ there is mysql but not mysqld
[2012-07-03 13:36:54 -0400] kesor: can I check if something is defined, for example ruby cookbook defines ruby_gem but ruby_enterprise cookbook defines ree_gem and in the passenger cookbook I want to use either one which is available.
[2012-07-03 13:48:05 -0400] Toumar: Question: when using knife-ec2, is there an established way to allow chef to manage the known_hosts file? My use case involves cycling through nodes in the same IP space often enough that I get RSA fingerprint collisions at least once a week. I know I could manage the file on the bootstrapping server outside of Chef, but if there's an existing tactic for this, I'd love to hear it.
[2012-07-03 13:48:29 -0400] PapaSierra: using https://github.com/opscode-cookbooks/mysql, if mysql::server is in my run list, how is it possible that mysql gets installed but not mysqld?
[2012-07-03 14:14:47 -0400] cnf: how do i define the order in which my cookbooks run?
[2012-07-03 14:15:32 -0400] geekbri: cnf: the run list is the order
[2012-07-03 14:15:43 -0400] cnf: hmm, weird
[2012-07-03 14:16:17 -0400] cburyta: is it true that if you add require recipe at the start of a recipe it triggers a load of the required first?
[2012-07-03 14:16:31 -0400] cburyta: i suspect it may be but i haven't needed to test that out yet myself
[2012-07-03 14:17:42 -0400] cnf: it doesn't seem to be respecting the order
[2012-07-03 14:18:54 -0400] cnf: i need to run chef-client twice to get it working without errors
[2012-07-03 14:20:16 -0400] yfeldblum: cburyta, yes and no
[2012-07-03 14:21:02 -0400] yfeldblum: cburyta, yes, it runs the included recipe at that point, but recall that *running* a recipe means *declaring resources*, and that converging resources is *not* performed when the recipe runs
[2012-07-03 14:21:30 -0400] yfeldblum: cburyta, however, you still need to declare a dependency on the other cookbook in the metadata.rb or it won't work
[2012-07-03 14:22:22 -0400] yfeldblum: cnf, maybe it's something else?
[2012-07-03 14:23:41 -0400] cnf: yfeldblum: plausible, but i have no idea what
[2012-07-03 14:24:24 -0400] cnf: yfeldblum: i have the users module installed, which should create all needed users, but the nagios cookbook is complaining one of the users it need isn't present
[2012-07-03 14:25:43 -0400] yfeldblum: cnf, what do you mean by "users module" and by "installed"?
[2012-07-03 14:26:34 -0400] cnf: yfeldblum: https://github.com/opscode-cookbooks/users and it is in my "base" role run_list as "recipe[users::sysadmins]"
[2012-07-03 14:26:49 -0400] agoddard: ohai chefs, I've just spun up a cloudstack instance, but having issues with knife-cloudstack and knife-cloudstack-fog, any CS users around?
[2012-07-03 14:26:52 -0400] cnf: and my monitoring role has role[base] in its runlist
[2012-07-03 14:27:48 -0400] yfeldblum: cnf, ok, and can you link to the line in the nagios cookbook which is complaining?
[2012-07-03 14:30:12 -0400] cnf: yfeldblum: sure, in about 10 minutes, i just did a vagrant destroy, vagrant up :P
[2012-07-03 14:30:23 -0400] cnf: yfeldblum: and it takes about 10 minutes to download all my cookbooks, it seems :/
[2012-07-03 14:32:03 -0400] cnf: no idea why it is so slow
[2012-07-03 14:32:21 -0400] erratic_: morning
[2012-07-03 14:39:13 -0400] cnf: still running...
[2012-07-03 14:45:52 -0400] cnf: still giving me 'Storing updated cookbooks/apache2/recipes/mod_mime.rb in the cache.'
[2012-07-03 14:46:01 -0400] cnf: about 5 seconds per .rb file ^^;
[2012-07-03 14:46:13 -0400] jperry2: @cnf: ref hosted chef
[2012-07-03 14:46:22 -0400] cnf: jperry2: this _is_ hosted chef
[2012-07-03 14:46:24 -0400] jperry2: I don't want every developer having to go create an account
[2012-07-03 14:46:32 -0400] cnf: jperry2: ah
[2012-07-03 14:46:33 -0400] jperry2: for tesitng locally
[2012-07-03 14:46:39 -0400] cnf: jperry2: how many devs?
[2012-07-03 14:46:40 -0400] jperry2: and that means they have to be connected as well
[2012-07-03 14:46:44 -0400] jperry2: 60
[2012-07-03 14:46:48 -0400] cnf: hmm yeah
[2012-07-03 14:46:53 -0400] cnf: fair enough
[2012-07-03 14:46:56 -0400] jperry2: :)
[2012-07-03 14:47:03 -0400] cnf: jperry2: chef-solo doesn't work?
[2012-07-03 14:47:09 -0400] jperry2: I am going to check that out
[2012-07-03 14:47:17 -0400] jperry2: I did see knife-server it uses ec2
[2012-07-03 14:47:25 -0400] jperry2: I am working on having it use vagrant
[2012-07-03 14:47:47 -0400] jperry2: I spoke with the author and he may have an option called "standalone" which would work on vagrant
[2012-07-03 14:48:08 -0400] jperry2: I may start simple and have it so if the box has ssh access then the standalone approach will work
[2012-07-03 14:48:35 -0400] jperry2: then maybe add more functionality to have it do all the vagrant stuff (spin up, buildout, etc)
[2012-07-03 14:48:52 -0400] jperry2: I am liking just build out a chef server and save the box
[2012-07-03 14:49:01 -0400] jperry2: this way you don't incur the cost of always provisioning it
[2012-07-03 14:49:22 -0400] jperry2: which instead of 8 mins it could be 3 mins :)
[2012-07-03 14:51:11 -0400] jperry2: anyone use chef for their application deployments?
[2012-07-03 14:51:18 -0400] jperry2: would like to see some write-ups on this
[2012-07-03 14:51:23 -0400] jperry2: or hear about how it went
[2012-07-03 14:51:32 -0400] jameson_zzz: like a web-app?
[2012-07-03 14:51:41 -0400] jperry2: yeah
[2012-07-03 14:51:48 -0400] jperry2: or a whole tomcat installation
[2012-07-03 14:51:59 -0400] jperry2: basically the package can be an rpm
[2012-07-03 14:52:01 -0400] jperry2: or .deb
[2012-07-03 14:52:09 -0400] jperry2: how you managed your versions etc
[2012-07-03 14:52:17 -0400] jperry2: was the chef-client interval a problem
[2012-07-03 14:52:26 -0400] jperry2: how did you handle rollbacks
[2012-07-03 14:53:31 -0400] jameson_zzz: you can use package provider to install .deb or .rpms
[2012-07-03 14:53:46 -0400] jperry2: yes
[2012-07-03 14:53:51 -0400] jameson: I think most of the work is in the configurations
[2012-07-03 14:53:53 -0400] jperry2: does it handle rollbacks ewell?
[2012-07-03 14:54:29 -0400] jameson: i don't know about rollbacks, most of the problems are with updates
[2012-07-03 14:55:03 -0400] jameson: rollbacks of a recipe is a new question..
[2012-07-03 14:55:53 -0400] jperry2: so do you create a cookbook for each of your applications?
[2012-07-03 14:55:59 -0400] jperry2: or do you just have one deploy cookbook
[2012-07-03 14:56:22 -0400] jameson: i have a cookbook for basically every major package
[2012-07-03 14:56:47 -0400] jameson: you then include standard stuff with the recipe
[2012-07-03 14:56:55 -0400] jameson: e.g. the python package comes with pip and virtualenv
[2012-07-03 14:57:20 -0400] jperry2: I'm talking more about our company creates applications mostly a war file
[2012-07-03 14:57:31 -0400] jameson: ah, I have a recipe specifically for our apps
[2012-07-03 14:57:31 -0400] jperry2: do you guys have a cookbook for each of your applications?
[2012-07-03 14:57:46 -0400] jperry2: so just one cookbook/recipe for all of your apps
[2012-07-03 14:58:04 -0400] jameson: I have 3
[2012-07-03 14:58:15 -0400] jameson: nginx, flask, database
[2012-07-03 15:05:39 -0400] Nopik: hi.. my chef installation is apparently working, but when i take a look at processes and cpu usage on chef-server machine, i see that all chef-solr, chef-expander, chef-server-web are taking lots of cpu.. my load average increases by 10 whenever I start those
[2012-07-03 15:06:30 -0400] martha: when writing an lwrp, is there any way to set the default value for an attribute to be the value for another attribute?
[2012-07-03 15:06:47 -0400] martha: like:  attribute :foo, :default :name
[2012-07-03 15:07:13 -0400] Nopik: i've gone through logs, but nothing suspicious there
[2012-07-03 15:07:19 -0400] yfeldblum: martha, yes of course - it's just ruby
[2012-07-03 15:07:45 -0400] yfeldblum: martha, `def foo ; @foo ||= name ; end`
[2012-07-03 15:07:55 -0400] zts: martha: in that particular case, see also :name_attribute
[2012-07-03 15:09:20 -0400] nacer: nice \o/ /tmp/chef-full-10.12.0-1-mac_os_x-10.7.2-x86_64.sh
[2012-07-03 15:09:35 -0400] martha: zts:  I don't want to always set it to the name_attribute, just if is not specified
[2012-07-03 15:13:57 -0400] cnf: yfeldblum: aha, it errored :P
[2012-07-03 15:14:28 -0400] Nopik: any ideas why chef services are constantly eating up tons of cpu?
[2012-07-03 15:14:50 -0400] erratic: because they're efficient
[2012-07-03 15:15:17 -0400] kesor: how can I reload ohai so that it picks up the newly installed ruby language I added to path via /etc/profile.d/ruby.sh  ?
[2012-07-03 15:15:55 -0400] laurent\: am I the only one having issues with chef and rabbitmq on wheezy ?
[2012-07-03 15:15:59 -0400] Nopik: yeah, that doesn't seem efficient to me at all
[2012-07-03 15:17:56 -0400] erratic: Nopik running chef server is a pain
[2012-07-03 15:18:02 -0400] cnf: yfeldblum: what part of the error did you want to see?
[2012-07-03 15:18:10 -0400] erratic: I wish I could setup like a real chef server cluster
[2012-07-03 15:18:17 -0400] erratic: that'd be dope
[2012-07-03 15:18:37 -0400] erratic: with like a dedicated solr indexer and dedicated couchdb servers
[2012-07-03 15:18:43 -0400] erratic: that'd be crazy
[2012-07-03 15:19:36 -0400] cnf: hmm, it's the user cookbook that does weird things...
[2012-07-03 15:19:41 -0400] laurent\: irclogs are helpful :) http://tickets.opscode.com/browse/CHEF-3256
[2012-07-03 15:20:18 -0400] yfeldblum: cnf, which line in the recipe it was
[2012-07-03 15:21:01 -0400] cnf: yfeldblum: https://github.com/opscode-cookbooks/users/blob/master/providers/manage.rb#L81
[2012-07-03 15:21:43 -0400] yfeldblum: cnf, are you putting a data bag item for the nagios user into the users data bag?
[2012-07-03 15:21:53 -0400] cnf: yfeldblum: yep
[2012-07-03 15:21:56 -0400] yfeldblum: cnf, why?
[2012-07-03 15:22:10 -0400] cnf: wait, no
[2012-07-03 15:22:15 -0400] cnf: for the nagiosadmin user
[2012-07-03 15:22:24 -0400] cnf: so i can provide htpasswd
[2012-07-03 15:22:59 -0400] erratic: dirtbag
[2012-07-03 15:23:21 -0400] erratic: why arent you in church
[2012-07-03 15:23:40 -0400] cnf: yfeldblum: according to https://github.com/opscode-cookbooks/nagios/blob/master/README.md section data bags
[2012-07-03 15:24:45 -0400] cnf: yfeldblum: did i misinterpret this?
[2012-07-03 15:25:01 -0400] yfeldblum: cnf, why do you have a nagiosadmin user?
[2012-07-03 15:25:17 -0400] yfeldblum: cnf, that section of the readme is an example
[2012-07-03 15:25:34 -0400] kesor: how do I force ohai to update its automatic attributes from the changed PATH ?
[2012-07-03 15:26:09 -0400] yfeldblum: cnf, you're supposed to substitute the real users that should exist and should be able to browse the nagios webui, such as the user "cnf" or the user "yfeldblum"
[2012-07-03 15:26:28 -0400] cnf: yfeldblum: those exist as well
[2012-07-03 15:27:29 -0400] yfeldblum: cnf, so there's no need for a nagiosadmin user?
[2012-07-03 15:28:00 -0400] cnf: yfeldblum: it's a test vm, there is no _need_ for any specific user as such
[2012-07-03 15:28:36 -0400] cnf: but why isn't that one user working?
[2012-07-03 15:28:55 -0400] cjs226: I've written a script/cookbook that can be used as a workflow with Chef.  Any input is appreciated.  https://github.com/cjs226/git_to_chef
[2012-07-03 15:29:09 -0400] yfeldblum: cnf, i'm suggesting that, in the first instance, you're interpreting an example provided in a readme which is intended to be read as a template as though that's the exact thing you need
[2012-07-03 15:29:17 -0400] erratic: Im sick of percona xtrabackup
[2012-07-03 15:29:35 -0400] martha: yfeldblum: that worked, thanks
[2012-07-03 15:29:54 -0400] yfeldblum: martha, no probs
[2012-07-03 15:30:31 -0400] cnf: yfeldblum: uhm
[2012-07-03 15:31:00 -0400] cnf: it's just called nagiosadmin out of convenience
[2012-07-03 15:31:09 -0400] cnf: could just have well called it bob
[2012-07-03 15:31:31 -0400] cnf: it's a test vm, the names don't matter
[2012-07-03 15:32:44 -0400] cnf: yfeldblum: but the name should not make it fail, should it?
[2012-07-03 15:32:53 -0400] yfeldblum: cnf, alright, any indication why it's that line, which declares a directory resource, would fail?
[2012-07-03 15:32:59 -0400] yfeldblum: cnf, any messages in the log, any backtrace?
[2012-07-03 15:33:37 -0400] cnf: yes, it gives me https://gist.github.com/635eda7320cb9d18689c
[2012-07-03 15:34:05 -0400] hoover_damm: laurent\, When people don't bitch that they see questions from them selves when they google
[2012-07-03 15:34:22 -0400] hoover_damm: laurent\, irc logs are what help me learn and :)
[2012-07-03 15:34:33 -0400] cnf: yfeldblum: and i checked, it made a user and a group nagiosadmin
[2012-07-03 15:34:39 -0400] cnf: it even made the homedir
[2012-07-03 15:34:53 -0400] cnf: with proper permissions
[2012-07-03 15:35:56 -0400] yfeldblum: cnf, did you set a group?
[2012-07-03 15:37:08 -0400] cnf: yfeldblum: just sysadmins
[2012-07-03 15:37:44 -0400] cnf: which is a requirement for the users cookbook
[2012-07-03 15:37:52 -0400] masterkorp: 8
[2012-07-03 15:38:14 -0400] erratic: connected to parrotbase
[2012-07-03 15:39:25 -0400] yfeldblum: cnf, did you set a gid?
[2012-07-03 15:39:45 -0400] cnf: yfeldblum: no, not on any of the defined users
[2012-07-03 15:40:03 -0400] cnf: yfeldblum: what i read from the users cookbook docs, this wasn't needed
[2012-07-03 15:40:39 -0400] yfeldblum: cnf, can you get the backtrace?
[2012-07-03 15:41:29 -0400] cnf: yfeldblum: that https://gist.github.com/635eda7320cb9d18689c ?
[2012-07-03 15:41:41 -0400] cnf: (that's updated from the last one :P )
[2012-07-03 15:43:03 -0400] jtimberman: cnf: it isn't a requirement for the users cookbook in the users_manage lwrp, it is just the example used in the recipe
[2012-07-03 15:43:13 -0400] jtimberman: cnf: you can use a different group name, and you don't need to use a nagiosadmin user.
[2012-07-03 15:43:17 -0400] yfeldblum: cnf, is that backtrace telling you anything?
[2012-07-03 15:43:44 -0400] cnf: jtimberman: i'm just testing, the names aren't relevant atm :P
[2012-07-03 15:44:24 -0400] cnf: yfeldblum: it can't find a groupid of a group it created and is present?
[2012-07-03 15:45:39 -0400] yfeldblum: cnf, that may be it; you could try fiddling with the data bag item or try inspecting the chef code looking for what it's doing under the hood
[2012-07-03 15:45:59 -0400] cnf: hmz
[2012-07-03 15:46:07 -0400] cnf: i'm not too good with ruby
[2012-07-03 15:46:18 -0400] erratic: I remember when I was a kid
[2012-07-03 15:46:31 -0400] erratic: and I'd get all angry and swear at people who were trying to help
[2012-07-03 15:46:55 -0400] erratic: Im surprised thats such a unique thing
[2012-07-03 15:47:07 -0400] erratic: I don't ever see anybody here get as pissed off as I used to get
[2012-07-03 15:47:18 -0400] cnf: yfeldblum: weird thing is, if i run it again, it works
[2012-07-03 15:47:43 -0400] cnf: yfeldblum: anyway, office closing, gtg home
[2012-07-03 15:47:49 -0400] erratic: bye cnf
[2012-07-03 15:47:52 -0400] cnf: i'll be back online in half an our or so
[2012-07-03 15:48:19 -0400] erratic: yeah I used to get mad and hit my keyboard and stuff
[2012-07-03 15:48:21 -0400] erratic: and break stuff
[2012-07-03 15:50:02 -0400] hoover_damm: cnf, https://github.com/opscode-cookbooks/users/blob/ffae371d8f0b1a59eaeca0676cce5c1ea52cc884/providers/manage.rb#L54-L57
[2012-07-03 15:50:27 -0400] hoover_damm: it should make the group first
[2012-07-03 15:50:34 -0400] erratic: damn
[2012-07-03 15:50:40 -0400] erratic: percona xtrabackup is janky as fuck
[2012-07-03 15:50:44 -0400] erratic: it like
[2012-07-03 15:50:49 -0400] erratic: changed my root password or something
[2012-07-03 15:50:55 -0400] erratic: now I cant login
[2012-07-03 15:51:04 -0400] hoover_damm: xtrabackup won't change your password
[2012-07-03 15:51:05 -0400] hoover_damm: don't be silly
[2012-07-03 15:51:18 -0400] erratic: hoover_damm then somebody must be messing with me cuz
[2012-07-03 15:51:24 -0400] erratic: it worked I swear it
[2012-07-03 15:51:30 -0400] erratic: here I'll check it again
[2012-07-03 15:52:25 -0400] erratic: I haven't struck a computer in years but I'm willing to compromise with that today
[2012-07-03 15:52:44 -0400] hoover_damm: sounds like you should take a breather and meditate
[2012-07-03 15:52:51 -0400] hoover_damm: violence against a computer will never solve a thing
[2012-07-03 15:52:54 -0400] hoover_damm: just hurt your hand
[2012-07-03 15:53:04 -0400] kesor: anyone knows how I force ohai to reload its rules during a chef run?
[2012-07-03 15:55:04 -0400] erratic: hehe
[2012-07-03 15:55:09 -0400] erratic: nah Im just kidding
[2012-07-03 15:55:14 -0400] erratic: I dont get mad like that anymore
[2012-07-03 15:58:10 -0400] kesor: anyone has any idea how to make ohai reload its attributes during a run?
[2012-07-03 16:01:44 -0400] zts: kesor: Use the ohai resource http://wiki.opscode.com/display/chef/Resources#Resources-Ohai
[2012-07-03 16:02:26 -0400] kesor: zts: wow, was looking for hours for this.
[2012-07-03 16:04:34 -0400] zts: kesor: to be honest with you, I didn't know that it existed either - but I did know there was an 'ohai' cookbook, and I looked at how it worked
[2012-07-03 16:04:57 -0400] kesor: the ohai cookbook is for installing more ohai plugins, not for reloading.
[2012-07-03 16:05:13 -0400] zts: kesor: it is, but it reloads the node's ohai data if plugins are installed during the run
[2012-07-03 16:05:45 -0400] kesor: indeed. didn't think of looking into its code, now I see.
[2012-07-03 16:05:47 -0400] kesor: thanks a lot.
[2012-07-03 16:05:50 -0400] zts: no problem
[2012-07-03 16:06:23 -0400] kesor: have been using chef for about a week, still amazed at the poor quality of most cookbooks out there.
[2012-07-03 16:06:31 -0400] jameson: ^
[2012-07-03 16:15:37 -0400] geekbri: Anybody know of any good docs for bringing an already existing server under chef management
[2012-07-03 16:15:54 -0400] cnf: back!
[2012-07-03 16:16:22 -0400] geekbri: EG. a server not being bootstrapped with knife
[2012-07-03 16:16:49 -0400] cnf: hoover_damm: ok...
[2012-07-03 16:16:59 -0400] cnf: hoover_damm: what group are we talking about?
[2012-07-03 16:18:00 -0400] cnf: because the nagiosadmin group is present (and the user cookbook is responsible for creating that)
[2012-07-03 16:18:31 -0400] hoover_damm: cnf, can you gist the databag redacted?
[2012-07-03 16:18:50 -0400] cnf: uhm, sure
[2012-07-03 16:19:05 -0400] cnf: which bit? just the nagiosadmin user?
[2012-07-03 16:19:40 -0400] hoover_damm: Generally you should redact bits that are security related.  If your having a problem you should share as much as you can
[2012-07-03 16:19:46 -0400] hoover_damm: otherwise we are left to read your mind
[2012-07-03 16:20:01 -0400] hoover_damm: and you know how hard it is to read minds on irc.
[2012-07-03 16:20:39 -0400] cnf: https://gist.github.com/635eda7320cb9d18689c#comments there
[2012-07-03 16:20:52 -0400] cnf: i think that is what it was
[2012-07-03 16:23:16 -0400] hoover_damm: cnf, now read over the code
[2012-07-03 16:23:19 -0400] hoover_damm: cnf, https://github.com/opscode-cookbooks/users/blob/ffae371d8f0b1a59eaeca0676cce5c1ea52cc884/providers/manage.rb#L54-L57
[2012-07-03 16:23:41 -0400] hoover_damm: what does it say at line 54? and what's missing in your databag?
[2012-07-03 16:23:46 -0400] hoover_damm: put together the pieces
[2012-07-03 16:24:09 -0400] cnf: hoover_damm: the user exists
[2012-07-03 16:24:12 -0400] cnf: WITH an id
[2012-07-03 16:24:17 -0400] cnf: and the GROUP exists
[2012-07-03 16:24:19 -0400] cnf: with a gid
[2012-07-03 16:24:25 -0400] cnf: the cookbook created those just fine
[2012-07-03 16:24:41 -0400] zts: cnf: looking at the source of the current users cookbook, I think that someone managed to unfix this when they converted it to an LWRP: http://tickets.opscode.com/browse/CHEF-1699
[2012-07-03 16:24:43 -0400] cnf: also, if i run chef-client again, it does it just fine
[2012-07-03 16:24:55 -0400] zts: cnf: that would account for the group being created the first time, but not noticed by chef during that run
[2012-07-03 16:25:15 -0400] cnf: hoover_damm: and on 2nd run, not just that user, but the others i had defined work, all of them without defining a gid
[2012-07-03 16:25:29 -0400] hoover_damm: cnf, right there's a bug in that code
[2012-07-03 16:25:35 -0400] hoover_damm: cnf, but part of the problem is how your databag is
[2012-07-03 16:25:39 -0400] cnf: zts: let me have a look
[2012-07-03 16:25:53 -0400] hoover_damm: cnf, if you fix your databag the bug shouldn't matter
[2012-07-03 16:26:16 -0400] cnf: with "fix" you mean define a gid?
[2012-07-03 16:26:41 -0400] hoover_damm: yep
[2012-07-03 16:27:02 -0400] hoover_damm: using cookbooks the way the README instructs is beneficial
[2012-07-03 16:27:33 -0400] hoover_damm: and any bugs with it you can open at that repo
[2012-07-03 16:27:33 -0400] hoover_damm: :)
[2012-07-03 16:27:39 -0400] cnf: uhm
[2012-07-03 16:27:48 -0400] cnf: except the readme didn't say to put in a gid
[2012-07-03 16:27:49 -0400] hoover_damm: also don't forget to checkout https://github.com/opscode-cookbooks/users/pulls
[2012-07-03 16:27:55 -0400] hoover_damm: yet the code does
[2012-07-03 16:27:56 -0400] hoover_damm: that reaks
[2012-07-03 16:30:09 -0400] cnf: sure
[2012-07-03 16:30:40 -0400] cnf: but having opscode represented cookbooks do weird things like this doesn't help the learning process
[2012-07-03 16:31:11 -0400] erratic: any idea how to properly stop mysqld_safe when its in the foreground
[2012-07-03 16:31:19 -0400] cnf: also, i think i just figure out why it was crashing on nagiosadmin
[2012-07-03 16:31:22 -0400] erratic: control d, x, c and ] dont work
[2012-07-03 16:31:26 -0400] cnf: and NOT on my other users...
[2012-07-03 16:31:41 -0400] cnf: hoover_damm: it wasn't the lack of a gid, it was the lack of a uid
[2012-07-03 16:31:46 -0400] halfamind: Hi #chef, I'm using the great logrotate cookbook and logrotate_app helper. Any idea how to specify that it should use a template in a different (non-logrotate) cookbook?
[2012-07-03 16:31:50 -0400] erratic: I have to -z and then kill -9 the pid
[2012-07-03 16:32:06 -0400] cnf: the code compensates the lack of a gid by using the uid, if i read that right
[2012-07-03 16:32:23 -0400] hoover_damm: cnf, learning is a part of failing
[2012-07-03 16:32:51 -0400] hoover_damm: cnf, that's why I linked the line.  It was just more then just 1 thing possible :)
[2012-07-03 16:32:57 -0400] hoover_damm: cnf, most things do
[2012-07-03 16:33:04 -0400] hoover_damm: cnf, gid and uid are generally the same
[2012-07-03 16:33:54 -0400] cnf: yes, which is what i was counting on
[2012-07-03 16:34:01 -0400] cnf: let the system sort out the id's
[2012-07-03 16:34:10 -0400] cnf: but that code doesn't detect that, in that bit
[2012-07-03 16:34:29 -0400] cnf: anyway, why is getting cookbooks from chef hosted so slow?
[2012-07-03 16:34:43 -0400] cnf: 5 seconds per .rb file on average, is this normal?
[2012-07-03 16:36:30 -0400] geekbri: chef hosted stores the cookbooks on s3.  Not really an answer to your question, but
[2012-07-03 16:36:32 -0400] geekbri: just a useful fact.
[2012-07-03 16:36:34 -0400] hoover_damm: cnf, you may need to have a block do Etc.endgrent if you get 1 time failures still
[2012-07-03 16:36:44 -0400] hoover_damm: sort of an answer
[2012-07-03 16:36:47 -0400] hoover_damm: it's a leading answer geekbri
[2012-07-03 16:37:08 -0400] cnf: Etc.endgrent ?
[2012-07-03 16:37:17 -0400] DigitalFlux: Hi Guys
[2012-07-03 16:37:26 -0400] DigitalFlux: I'm trying to install a cookbook
[2012-07-03 16:37:36 -0400] DigitalFlux: it throws an error though
[2012-07-03 16:37:39 -0400] DigitalFlux: command -> knife cookbook site install sensu
[2012-07-03 16:37:54 -0400] DigitalFlux: error -> Exception: NoMethodError: undefined method `first' for "~/chef-repo/cookbooks":String
[2012-07-03 16:37:57 -0400] DigitalFlux: Any hints ?
[2012-07-03 16:38:53 -0400] thom: DigitalFlux: your ~/.chef/knife.rb probably has something like cookbook_path            "#{ENV['HOME']}/work/chef/cookbooks" in
[2012-07-03 16:38:59 -0400] thom: should be cookbook_path            ["#{ENV['HOME']}/work/chef/cookbooks"]
[2012-07-03 16:39:13 -0400] thom: ie, the path needs to be an array
[2012-07-03 16:40:44 -0400] DigitalFlux: thom: aha, let me check that ..
[2012-07-03 16:40:58 -0400] cnf: hmz
[2012-07-03 16:41:15 -0400] DigitalFlux: thom: okie, that worked :)
[2012-07-03 16:41:17 -0400] DigitalFlux: thom: Thanks
[2012-07-03 16:41:46 -0400] thom: DigitalFlux: np
[2012-07-03 16:43:18 -0400] cnf: damnit, it's slow today...
[2012-07-03 17:14:20 -0400] hoover_damm: cnf, how good is your ruby skills?
[2012-07-03 17:14:43 -0400] hoover_damm: reading the source code and the readme / manual is pretty much the best way to go
[2012-07-03 17:14:53 -0400] hoover_damm: that way you can understand how things work
[2012-07-03 17:15:08 -0400] hoover_damm: following the code :)
[2012-07-03 17:25:39 -0400] sabooky: how do you change a files permission in chef?
[2012-07-03 17:26:04 -0400] sabooky: Is it a :create_if_missing?
[2012-07-03 17:26:42 -0400] miah: moin
[2012-07-03 17:27:06 -0400] jetsnoc: http://wiki.opscode.com/display/chef/Resources provides some pretty good examples on using a template, setting the mode bits and even using a test like only_if
[2012-07-03 17:27:48 -0400] cnf: hoover_damm: I know how to do basic progrmming
[2012-07-03 17:28:06 -0400] cnf: hoover_damm: specific ruby, unfamiliar
[2012-07-03 17:32:45 -0400] erratic: I need to eat
[2012-07-03 17:32:50 -0400] erratic: I missed breakfast this mornin
[2012-07-03 17:33:13 -0400] erratic: I all woke up late and rolled out of bed and went straight to the buss
[2012-07-03 17:36:02 -0400] erratic: vom..//,.,, bleeec....*swollow* Im ok
[2012-07-03 17:36:58 -0400] hoover_damm: cnf, you should learn ruby
[2012-07-03 17:37:06 -0400] erratic: yeah you should
[2012-07-03 17:37:15 -0400] erratic: Ive been learning by virtue of learning chef
[2012-07-03 17:37:19 -0400] erratic: its a neat language
[2012-07-03 17:37:22 -0400] cnf: i tried ruby a while back
[2012-07-03 17:37:29 -0400] hoover_damm: cnf, basically chef has a basic dsl.  But to truly go beyond the basics
[2012-07-03 17:37:31 -0400] hoover_damm: you need to know ruby
[2012-07-03 17:37:33 -0400] hoover_damm: excel at ruby
[2012-07-03 17:37:46 -0400] cnf: i didn't like it much, myself
[2012-07-03 17:37:55 -0400] hoover_damm: then don't use Chef?
[2012-07-03 17:37:57 -0400] erratic: cnf I made a pretty bad ass phpmyadmin cookbook
[2012-07-03 17:38:23 -0400] hoover_damm: being proficient in the language it's written in is a highly valuable skill
[2012-07-03 17:38:46 -0400] erratic: it does a search for servers with mysql-server in the runlist and adds them as a server to connect to from the phpmyadmin instance and gives them aliases by hostname too
[2012-07-03 17:38:49 -0400] erratic: its pretty sweet
[2012-07-03 17:39:18 -0400] erratic: hoover_damm I understand where he's coming from though
[2012-07-03 17:39:23 -0400] cnf: hoover_damm: you know, the general elitist attitude "become a ruby master or gtfo" gets old :/
[2012-07-03 17:39:24 -0400] erratic: thats like saying
[2012-07-03 17:39:50 -0400] erratic: being proficient in Visual C#, Python, LINQ/LINQ-to-SQL, stored procedures, C/C++, ect ect is highly valuable
[2012-07-03 17:39:55 -0400] erratic: its only valuable if you need it
[2012-07-03 17:40:20 -0400] cnf: it's not like i don't need to know a bunch of other languages as well
[2012-07-03 17:40:30 -0400] erratic: the most valuable language I've ever became proficient in is Javascript
[2012-07-03 17:40:33 -0400] erratic: and PHP
[2012-07-03 17:40:42 -0400] erratic: third is mysql
[2012-07-03 17:41:05 -0400] erratic: and thats the truth
[2012-07-03 17:41:17 -0400] cnf: and as it stands, in the conf management world, there is chef and puppet
[2012-07-03 17:41:21 -0400] hoover_damm: cnf, being proficient in ruby and being able to read a stack trace is required
[2012-07-03 17:41:22 -0400] cnf: not that much choice...
[2012-07-03 17:41:31 -0400] hoover_damm: if you don't want to learn ruby.  Then perhaps Chef isn't for you
[2012-07-03 17:41:38 -0400] erratic: cnf there's cfengine
[2012-07-03 17:41:40 -0400] miketheman: cnf: isn't this a continuation of the same discussion from yesterday?
[2012-07-03 17:42:07 -0400] cnf: hoover_damm: you know, once again there is this "you don't want to be come an expert?"
[2012-07-03 17:42:10 -0400] erratic: there's also the idea of using scp and bash scripts and curl / wget which really aint all that bad tbqh
[2012-07-03 17:42:14 -0400] cnf: i know some basic ruby
[2012-07-03 17:42:27 -0400] cnf: i can read a stack trace, mostly
[2012-07-03 17:42:36 -0400] cnf: i can write ruby, if it's not too specific
[2012-07-03 17:43:19 -0400] cnf: but being told i need to go and read a bunch of books, and become an expert, and learn the entire thing inside out, or i might as well not begin is just bullshit
[2012-07-03 17:43:32 -0400] erratic: agreed
[2012-07-03 17:43:44 -0400] zts: seconded
[2012-07-03 17:43:45 -0400] erratic: Im a learn on an as per needed basis kind of person myself
[2012-07-03 17:43:46 -0400] cnf: and the resistance to making thing easier for NEW people is just plain elitist
[2012-07-03 17:44:03 -0400] cnf: erratic: as it should be
[2012-07-03 17:44:14 -0400] erratic: dont get me wrong
[2012-07-03 17:44:17 -0400] tyler_c: cnf: I JUST started using chef, and I had zero ruby :)
[2012-07-03 17:44:17 -0400] cnf: i'm pretty sure i'll pick up ruby as i work with chef
[2012-07-03 17:44:23 -0400] erratic: theres some stuff I like to voluntarily go out of my way to learn
[2012-07-03 17:44:27 -0400] zts: cnf: it doesn't appear to be resistance shared by opscode.  One of the demos from... uh, something recent... shows that chef 11 will do its best to give useful error messages without resorting to stack traces
[2012-07-03 17:44:29 -0400] erratic: but I do it for the lulz
[2012-07-03 17:44:32 -0400] erratic: and for no other reason
[2012-07-03 17:44:42 -0400] cnf: but i am sure as hell NOT gonna read 3 ruby books just so i can get some basic things working
[2012-07-03 17:44:54 -0400] tyler_c: if you just learn a few of the basics of ruby, then it makes chef a lot easier, but there is no need to be an expert out of the gate
[2012-07-03 17:44:55 -0400] cnf: zts: oh no, the opscode people are AWESOME
[2012-07-03 17:45:07 -0400] paulmooring: cnf: I missed the beginning of this conversation, but part of the intent of Chef is to allow the Ruby in recipes to be pretty basic
[2012-07-03 17:45:11 -0400] zts: amen
[2012-07-03 17:45:24 -0400] tyler_c: the first couple chapters of this are really helpful if you only wanna pick up one book
[2012-07-03 17:45:24 -0400] cnf: paulmooring: yes, that is what i understood
[2012-07-03 17:45:27 -0400] tyler_c: http://pragprog.com/book/ruby/programming-ruby
[2012-07-03 17:45:51 -0400] cnf: paulmooring: but most of the questions on chef end with "go learn ruby real well, or don't bother with ruby" type responses
[2012-07-03 17:45:51 -0400] paulmooring: You should be able to use chef w/ only a very basic understanding of Ruby, and if you know a lot about Ruby, awesome there's even more power available for you
[2012-07-03 17:46:09 -0400] cnf: paulmooring: which is what i am protesting against
[2012-07-03 17:46:35 -0400] erratic: goodie I get to figure out why cloudfuse isn't working on this server with strace
[2012-07-03 17:46:50 -0400] cnf: tyler_c: really, i did some rails coding a year or 2 ago, and I code python. I should know enough to get by to start out
[2012-07-03 17:47:11 -0400] paulmooring: Not to say you need to know a ton about Ruby to use Chef, we just want that power and flexibility available to you if you want it
[2012-07-03 17:47:25 -0400] cnf: paulmooring: oh, and that is fine
[2012-07-03 17:47:29 -0400] cnf: paulmooring: i don't mind that
[2012-07-03 17:47:53 -0400] cnf: paulmooring: i think chef is pretty great, albeit complex to start with
[2012-07-03 17:48:14 -0400] cnf: paulmooring: the general channel attitude to some things (and specifically new people) just irks me at times.
[2012-07-03 17:49:33 -0400] cnf: and again, every single contact with opscode people so far has been nothing but stellar
[2012-07-03 17:49:38 -0400] cnf: those guys rock
[2012-07-03 17:50:06 -0400] zts: I do wish there was more of opscode in this channel
[2012-07-03 17:50:14 -0400] paulmooring: cnf: From what I've seen inside Opscode, the idea is hide the gritty Ruby details in libraries and LWRPs and keep recipes in the realm of non-Ruby programmers
[2012-07-03 17:50:32 -0400] cnf: yeah, they seem to share my sentiment
[2012-07-03 17:50:47 -0400] cnf: also, i still haven't wrapped my head around LWPR
[2012-07-03 17:51:22 -0400] c_t: I think LWPR's aren't necessarily the easiest concept in chef
[2012-07-03 17:51:28 -0400] hoover_damm: cnf, it's about reading code, not always writing code
[2012-07-03 17:51:39 -0400] paulmooring: cnf: LWRPs are just a way to write custom DSL items (like 'package' or 'user') in your cookbook
[2012-07-03 17:51:49 -0400] hoover_damm: cnf, I know i've tried asking you politely to 'read the source' and you don't seem to
[2012-07-03 17:52:12 -0400] hoover_damm: cnf, and really you won't win with chef until you become more of a self service expert
[2012-07-03 17:52:30 -0400] cnf: hoover_damm: who says i don't read the source?
[2012-07-03 17:52:31 -0400] hoover_damm: cnf, as you automate more infrastructure you tend to change it slightly, have to re-do things
[2012-07-03 17:52:37 -0400] cnf: i read the damned cookbooks
[2012-07-03 17:52:59 -0400] hoover_damm: cnf, and this requires being able to code your own cookbooks from a basic notion
[2012-07-03 17:53:03 -0400] cnf: and knowing ruby or not, it's a bloody fuckton to take in at once
[2012-07-03 17:53:08 -0400] hoover_damm: cnf, and refactor it until you get where you want.
[2012-07-03 17:53:11 -0400] hoover_damm: cnf, oh absolutely
[2012-07-03 17:53:16 -0400] cnf: hoover_damm: which i can
[2012-07-03 17:53:34 -0400] hoover_damm: cnf, it's a lot to take in, and it's nothing to take in.
[2012-07-03 17:53:38 -0400] cnf: I'm already mostly convinced i'll write most my own cookbooks
[2012-07-03 17:53:46 -0400] cnf: but before i do
[2012-07-03 17:53:46 -0400] hoover_damm: then you've already damned yourself
[2012-07-03 17:53:50 -0400] hoover_damm: chef is about sharing
[2012-07-03 17:53:51 -0400] hoover_damm: reusing
[2012-07-03 17:53:59 -0400] hoover_damm: I don't want to write all my own cookbooks
[2012-07-03 17:54:01 -0400] hoover_damm: just what I have to
[2012-07-03 17:54:09 -0400] cnf: hoover_damm: yes, except every shared cookbook i try fails on me
[2012-07-03 17:54:22 -0400] miketheman: cnf: what distro are you testing?
[2012-07-03 17:54:23 -0400] jameson: cnf: which cookbooks are you using?
[2012-07-03 17:54:23 -0400] hoover_damm: are you using the cookbooks wrong? using them in a way they are not intended
[2012-07-03 17:54:29 -0400] hoover_damm: ?
[2012-07-03 17:54:33 -0400] cnf: hoover_damm: and the answer i generally get to that is "well, you are supposed to code it yourself anyway"
[2012-07-03 17:54:43 -0400] cnf: hoover_damm: i. do. not. know!
[2012-07-03 17:54:50 -0400] cnf: that's the stuff i try to figure out
[2012-07-03 17:54:55 -0400] cnf: miketheman: ubuntu and centos
[2012-07-03 17:54:57 -0400] hoover_damm: cnf, because basically what your stressing over is stuff that shouldn't be that hard
[2012-07-03 17:55:01 -0400] zts: hoover_damm: are you being disingenuous, or are you really suggesting that a majority of cookbooks on the community site will Just Work for most people?
[2012-07-03 17:55:03 -0400] erratic: an unbuffered parakeet with parity mode enabled ovo
[2012-07-03 17:55:04 -0400] hoover_damm: cnf, vagrant will absolutely make it harder
[2012-07-03 17:55:15 -0400] cnf: wha?
[2012-07-03 17:55:16 -0400] hoover_damm: zts, to one degree or another.
[2012-07-03 17:55:25 -0400] cnf: how will vagrant make it harder?
[2012-07-03 17:55:40 -0400] erratic: I get to figure out vagrant here pretty soon too
[2012-07-03 17:55:50 -0400] jameson: chef-solo is not the most supported tool by opscode :3
[2012-07-03 17:55:59 -0400] jameson: anything that uses search breaks
[2012-07-03 17:56:07 -0400] cnf: jameson: i use -hosted
[2012-07-03 17:56:21 -0400] erratic: uhhh
[2012-07-03 17:56:22 -0400] jameson: I do too
[2012-07-03 17:56:23 -0400] cwj: vagrant is awesome but learning vagrant on top of chef isn't going to decrease the grade of the already steep learning curve
[2012-07-03 17:56:26 -0400] miah: search only breaks because people don't write code that deals with solo usually
[2012-07-03 17:56:28 -0400] erratic: well then I need to change from using search?
[2012-07-03 17:56:57 -0400] miah: vagrant isn't difficult, all you really need to know: vagrant up, vagrant provision, vagrant halt
[2012-07-03 17:56:58 -0400] hoover_damm: cnf, vagrant isn't the same as you use
[2012-07-03 17:57:00 -0400] miah: download a prebuilt box
[2012-07-03 17:57:14 -0400] hoover_damm: cnf, i always develop on what i'll be using
[2012-07-03 17:57:14 -0400] jameson: erratic: basically, unless you are using the chef-hosted version
[2012-07-03 17:57:22 -0400] miah: i devel on vagrant
[2012-07-03 17:57:26 -0400] cnf: hoover_damm: vagrant is just a vm
[2012-07-03 17:57:27 -0400] hoover_damm: and one of the biggest things i've heard about every vagrant user is how it starts as vagrant
[2012-07-03 17:57:31 -0400] erratic: I run my own chef server
[2012-07-03 17:57:35 -0400] hoover_damm: and how it messes with people
[2012-07-03 17:57:37 -0400] erratic: with chef-solr
[2012-07-03 17:57:41 -0400] jameson: miah: not event, all I ever use is vagrant destroy -f && vagrant up [node]
[2012-07-03 17:57:42 -0400] erratic: whats the diff between solo and solr
[2012-07-03 17:57:52 -0400] jameson: isn't solr the messaging?
[2012-07-03 17:57:54 -0400] miah: solr is a search backend
[2012-07-03 17:57:58 -0400] hoover_damm: cnf, no it's not
[2012-07-03 17:58:04 -0400] hoover_damm: cnf, your lack of brain cells is reaking
[2012-07-03 17:58:06 -0400] erratic: I thought it was a search indexer
[2012-07-03 17:58:13 -0400] miah: hoover_damm: be nice. hugops!
[2012-07-03 17:58:13 -0400] hoover_damm: cnf, vagrant is a framework around virtualbox.  Thank you.
[2012-07-03 17:58:23 -0400] jameson: vagrant is a cli + config tool to VirtualBox
[2012-07-03 17:58:45 -0400] jameson: (a good one at that)
[2012-07-03 17:58:47 -0400] cnf: hoover_damm: oh, right, assert your superiority by insulting me, why don't you
[2012-07-03 17:58:53 -0400] erratic: I dont even have this solo thing as near as I can tell and search() works fine in all of my recipes
[2012-07-03 17:58:56 -0400] zts: don't feed the troll
[2012-07-03 17:59:14 -0400] erratic: come on now guys
[2012-07-03 17:59:41 -0400] jameson: erratic: if you are using hosted-chef search works, if you aren't searches wont work?
[2012-07-03 17:59:54 -0400] tyler_opscode: cnf: here is a document entitled "Just enough Ruby for Chef" :)
[2012-07-03 17:59:55 -0400] tyler_opscode: http://wiki.opscode.com/display/chef/Just+Enough+Ruby+for+Chef'
[2012-07-03 17:59:56 -0400] erratic: master_ips = search(:node, "role:Lamp_Master").map {|n| n["network"]["interfaces"]["eth1"]["addresses"].select { |address, data| data["family"] == "inet" }[0][0]}
[2012-07-03 18:00:00 -0400] erratic: that works fine for me
[2012-07-03 18:00:01 -0400] cnf: tyler_opscode: read it
[2012-07-03 18:00:05 -0400] erratic: Im hosting my own chef server
[2012-07-03 18:00:11 -0400] jameson: erratic: in chef_solo?
[2012-07-03 18:00:15 -0400] cnf: strangely, i do read the docs ^^;
[2012-07-03 18:00:15 -0400] jameson: oh yeah
[2012-07-03 18:00:21 -0400] erratic: I dont know thats what I'm trying to figure out
[2012-07-03 18:00:29 -0400] zts: erratic: yeah, chef-solo works without a chef server - you'll be using chef-client with your chef server
[2012-07-03 18:00:34 -0400] jameson: sorry, I use chef-hosted & chef-server interchangably
[2012-07-03 18:00:36 -0400] erratic: ohhhhh
[2012-07-03 18:00:44 -0400] erratic: I see
[2012-07-03 18:00:44 -0400] erratic: yeah
[2012-07-03 18:01:30 -0400] erratic: yeah, I decided a long time ago it didn't make since to do this without server or hosted and I didn't want to pay for hosted so I learned how to setup the damn server and troubleshoot it
[2012-07-03 18:01:34 -0400] erratic: and I'm still learning apparently
[2012-07-03 18:02:37 -0400] cnf: erratic: -hosted is free for limited machines
[2012-07-03 18:03:00 -0400] erratic: honestly
[2012-07-03 18:03:11 -0400] erratic: there's theres the fact taht I dont have passwords in databags in all cases too
[2012-07-03 18:03:31 -0400] erratic: and I dont really want that shit on someone elses servers even in databags
[2012-07-03 18:03:44 -0400] erratic: those hosted servers are a huge target for hax0rs
[2012-07-03 18:03:49 -0400] zts: erratic: that's the problem that Encrypted Databags are designed to solve
[2012-07-03 18:03:55 -0400] zts: erratic: but yeah, we run our own chef server too, for similar reasons
[2012-07-03 18:03:56 -0400] cnf: erratic: you know about encrypted data bags, right?
[2012-07-03 18:04:09 -0400] erratic: yeah but isnt the key still stored on the server or the client somewhere
[2012-07-03 18:04:22 -0400] jameson: erratic: you have the pem file
[2012-07-03 18:05:06 -0400] erratic: *nod*
[2012-07-03 18:06:02 -0400] hoover_damm: miah, I didn't honestly mean disrespect.  It came out :(
[2012-07-03 18:06:03 -0400] erratic: thats cool that its free for a few servers I did not know that
[2012-07-03 18:06:25 -0400] hoover_damm: miah, i've just noticed how people complain about vagrant not starting as root and how that rocks them.
[2012-07-03 18:07:07 -0400] hoover_damm: and I do develop on ec2 when i'm doing ec2 stuff as it just removes a few rough spots that can come out
[2012-07-03 18:09:25 -0400] cwj: vagrant's chef-client provisioner works great for me
[2012-07-03 18:09:30 -0400] cwj: runs as root etc
[2012-07-03 18:09:34 -0400] cwj: <3 vagrant
[2012-07-03 18:09:37 -0400] erratic: d00d
[2012-07-03 18:09:41 -0400] erratic: that sounds so awesome
[2012-07-03 18:09:52 -0400] erratic: I can't wait till I start doing vagrant for my testing environment
[2012-07-03 18:10:04 -0400] cnf: yeah, vagrant is pretty sweet
[2012-07-03 18:11:48 -0400] cnf: i think i'll go cook
[2012-07-03 18:11:57 -0400] cnf: and try and find my zen again ^^;
[2012-07-03 18:14:53 -0400] miah: erratic: it will seriously take you less than an hour to do it. just do it and stop talking about it =)
[2012-07-03 18:16:13 -0400] erratic: miah its more a matter of I want to buy a computer to do it on but I dont want to spend the money
[2012-07-03 18:16:34 -0400] cnf: erratic: what are you on now? a rabbit with irc?
[2012-07-03 18:16:49 -0400] erratic: don't want to muck up my laptop with that either
[2012-07-03 18:16:55 -0400] erratic: a rabbit...?
[2012-07-03 18:17:00 -0400] erratic: Im a parrot
[2012-07-03 18:17:05 -0400] erratic: rac rac rac rac rac rac rac rac rac rac rac rac
[2012-07-03 18:17:07 -0400] miah: muck up your laptop? you're installing vagrant, which is a front end to virtual box.. nothing to muck up really.
[2012-07-03 18:17:22 -0400] erratic: windows right
[2012-07-03 18:17:31 -0400] erratic: I dont want to put linux on my laptop
[2012-07-03 18:17:43 -0400] cnf: erratic: vagrant runs on windows
[2012-07-03 18:17:46 -0400] erratic: cool
[2012-07-03 18:17:47 -0400] cnf: erratic: installer and all
[2012-07-03 18:17:51 -0400] hoover_damm: Today's excuses are brought to you by the color blue...
[2012-07-03 18:18:04 -0400] erratic: lol
[2012-07-03 18:18:24 -0400] cnf: erratic: just do it.
[2012-07-03 18:18:27 -0400] miketheman: what has become of this channel?
[2012-07-03 18:18:58 -0400] cnf: damnit, no unicode for the nike swoosh
[2012-07-03 18:20:21 -0400] Maniacal: so this page:  http://wiki.opscode.com/display/chef/Evaluate+and+Run+Resources+at+Compile+Time.  If I want stuff like that to run do I need to put it into a recipe that is called in the runlist?  Or could I put it into a recipe that isn't part of the runlist but is within a cookbook that is part of the run list.  In other words, during convergence, do all the recipes in a cookbook get converged, or just the specific recipes that are in a runlist
[2012-07-03 18:20:57 -0400] bahamas10: is there a beginners guide to chef i'm missing? i can't for the life of me figure out how to use ohai attributes in a template
[2012-07-03 18:21:01 -0400] paulmooring: Maniacal: Only the recipes in the runlist
[2012-07-03 18:21:35 -0400] paulmooring: bahamas10: use `node[:attribute]`
[2012-07-03 18:21:36 -0400] erratic: ohai2u
[2012-07-03 18:22:02 -0400] erratic: yeah was about to say that sounds right
[2012-07-03 18:22:12 -0400] hoover_damm: Maniacal, to add onto what paulmooring said.  Cookbooks are loaded first by the runlist, then it looks at the metadata and ships the cookbooks required for your runlist.
[2012-07-03 18:22:18 -0400] paulmooring: bahamas10: Also you might have a look at this http://wiki.opscode.com/display/chef/Guide+to+Creating+A+Cookbook+and+Writing+A+Recipe
[2012-07-03 18:23:00 -0400] Maniacal: paulmooring: ok.  add-on question.  Could I just put that code into a "library" file to ensure it get's run whenever that cookbook is used?  Because according to this page http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run Libraries are the first thing loaded during compile.
[2012-07-03 18:23:02 -0400] paulmooring: There's various guides on the wiki, normally I would say start w/ the installation guide but it sounds like you're passed that
[2012-07-03 18:23:29 -0400] hoover_damm: Maniacal, afaik not all libraries are loaded.
[2012-07-03 18:23:34 -0400] hoover_damm: only ones that you depend on
[2012-07-03 18:23:37 -0400] paulmooring: Maniacal: It depends on what you want do
[2012-07-03 18:23:38 -0400] hoover_damm: or are in your runlist
[2012-07-03 18:23:49 -0400] bahamas10: thanks paulmooring , i feel like i might be over complicating this, i'm trying to get the ip address of a specific interface, node[:network][:interfaces][:net0][:addresses].keys.first
[2012-07-03 18:23:50 -0400] paulmooring: hoover_damm: they're all loaded if that cookbook is in the runlist
[2012-07-03 18:23:53 -0400] hoover_damm: Maniacal, so if it's in the runlist or depended upon that library would be loaded
[2012-07-03 18:24:02 -0400] bahamas10: however that just looks unnecessarily complicated, so i'm probably wrong
[2012-07-03 18:24:15 -0400] paulmooring: Maniacal: generally if you want 2 recipes to run, include 1 recipe in the other
[2012-07-03 18:24:19 -0400] hoover_damm: i'll let paul do his job.
[2012-07-03 18:25:15 -0400] paulmooring: hoover_damm: that's generally not something we advertise for using, although I've done some weird monkey patching solutions to Chef by dropping code in libraries :)
[2012-07-03 18:25:38 -0400] paulmooring: Maniacal: have a look at this http://wiki.opscode.com/display/chef/Recipes#Recipes-IncludingRecipes
[2012-07-03 18:25:40 -0400] Maniacal: ok.  I need to install fog for a lwrp we have in a cookbook.  but that cookbook also has a script it lays down that needs fog.  so I thought that I want the http://wiki.opscode.com/display/chef/Evaluate+and+Run+Resources+at+Compile+Time stuff to run whenever that cookbook is used.  whether it's for the lwrp, or for laying down the script
[2012-07-03 18:26:58 -0400] paulmooring: Maniacal: There's gem package resources for installing gems in Chef, and you can require a gem inside an LWRP, is that what you're asking about?
[2012-07-03 18:27:51 -0400] Maniacal: that was failing for us during compile time because the lwrp was requiring a gem that wasn't installed
[2012-07-03 18:28:04 -0400] Maniacal: so we had to use the hackery to install it during compile time
[2012-07-03 18:28:55 -0400] webframp: Maniacal: chef_gem is for install gems needed by chef, in recipes for example, gem_package is for standard gems
[2012-07-03 18:28:57 -0400] paulmooring: Maniacal: I would make another recipe, call it fog::install and include that, and in the fog recipe I would put something like example 2 in that link inside and only_if to check if fog is installed
[2012-07-03 18:29:20 -0400] paulmooring: then just include the fog install recipe before using the lwrp
[2012-07-03 18:31:43 -0400] paulmooring: but to directly answer your question, yes the library will always run first, although the intention is to put functions in the library and call them in recipes
[2012-07-03 18:32:15 -0400] Maniacal: paulmooring: ok.  I can try that.  I wasn't the guy who had the problem with the lwrp.  that was solved by another team member so I'll have to play around to make sure that doesn't break anything.  I was hoping someone could just 'require cookbook' when they needed the lwrp or just use cookbook::script if they want to run that recipe.  that way they wouldn't have to remmber to also include cookbook::foginstall .  Was hoping the prereq of fog could be auto
[2012-07-03 18:32:15 -0400] Maniacal: matically resolved if they choose either
[2012-07-03 18:33:12 -0400] paulmooring: Maniacal: it would be cleaner to put a 'install_fog_if_not_installed' function in the library and call that above require 'fog' in the lwrp
[2012-07-03 18:33:16 -0400] gmcinnes: howdy chefs.
[2012-07-03 18:34:35 -0400] gmcinnes: I have an issue where the directory resource is not changing the ownership of newly created directories, even though the debug output says it is.  Is there any way to get down to an output of the chown command it's trying to execute?
[2012-07-03 18:34:42 -0400] Maniacal: paulmooring: ok.  that sounds like what I want.  sounds like if I do that fog will get installed whenever that cookbook is called (if it isn't already installed of course), which is what I want.
[2012-07-03 18:36:37 -0400] paulmooring: Maniacal: untested off the top of my head something like:
[2012-07-03 18:37:08 -0400] paulmooring: Gem::DependencyInstaller.new.install('cucumber') unless Gem::Specification.all_names.grep('fog')
[2012-07-03 18:37:47 -0400] paulmooring: err, new.install('fog') rather
[2012-07-03 18:37:53 -0400] Maniacal: yeah.  I translated :)
[2012-07-03 18:39:37 -0400] Maniacal: paulmooring: this may be a dumb question, because of the name, but will Gem::DependencyInstaller install all the prereqs for fog?  Because currently we have to do:  e = execute "yum install -y -q libxml2 libxml2-devel libxslt libxslt-devel" do <snip> before installing the fog gem
[2012-07-03 18:40:03 -0400] paulmooring: Then no it will not
[2012-07-03 18:40:35 -0400] patcon: yfeldblum: Hey Jay, hopefully you don't mind, but I looped you in on a github discussion regarding composer, which is becoming the defacto package manager for PHP libs
[2012-07-03 18:40:46 -0400] yfeldblum: patcon, sure
[2012-07-03 18:40:51 -0400] Maniacal: ok.  I'll play around a bit and see what I can figure out.  thanks for all your help
[2012-07-03 18:41:18 -0400] patcon: mainly soliciting advice for how they're not keeping commit hash data in the lockfile, and have no plans to. Example: https://gist.github.com/3011872
[2012-07-03 18:41:37 -0400] patcon: yfeldblum: thanks man. no rush or anything :)
[2012-07-03 18:46:17 -0400] yfeldblum: patcon, is there like a community server for released versions of php library projects?
[2012-07-03 18:46:35 -0400] yfeldblum: patcon, or are all dependencies assumed to be on github and fetched from github?
[2012-07-03 18:46:48 -0400] patcon: this is the aspiring community hub: http://packagist.org/
[2012-07-03 18:46:50 -0400] erratic: compressing down the parakeet
[2012-07-03 18:47:05 -0400] patcon: sorry, that was really important context
[2012-07-03 18:48:07 -0400] patcon: i believe the maintainers want packagist to be the main package repository, but allow VCS repos to be temporary sources
[2012-07-03 18:50:00 -0400] yfeldblum: patcon, i see packagist, but i mean, when someone releases a php project, does he somehow upload a tarball or something to packagist, which hosts the tarball and people can download the tarball directly from packagist? that's the model that rubygems.org and the chef community site follow
[2012-07-03 18:50:26 -0400] yfeldblum: patcon, from what i can see, packagist seems like it's an index of php projects on github
[2012-07-03 18:50:39 -0400] yfeldblum: patcon, unless i'm missing something
[2012-07-03 18:53:05 -0400] patcon: one sec. just want to confirm. my understanding was that it was uploaded, but i don't use it myself
[2012-07-03 18:56:16 -0400] miah: packagist appears to be bundler for php
[2012-07-03 18:56:26 -0400] miah: it uses: http://getcomposer.org/
[2012-07-03 18:56:39 -0400] miah: "Composer is a tool for dependency management in PHP. It allows you to declare the dependent libraries your project needs and it will install them in your project for you."
[2012-07-03 18:56:44 -0400] savant: miah: thats correct. Composer is bundler, packagist is akin to rubgems.org
[2012-07-03 18:56:46 -0400] miah: so packagist is more like rubygem
[2012-07-03 18:56:50 -0400] miah: yup
[2012-07-03 18:57:02 -0400] savant: Hi all. Should I be using @node or node when referencing the node in a chef template?
[2012-07-03 18:57:16 -0400] erratic: what would I use that for
[2012-07-03 18:57:33 -0400] miah: <%= @node['foo'] %>
[2012-07-03 18:57:50 -0400] erratic: that was in regards to the composer thing
[2012-07-03 18:58:04 -0400] miah: i dont care about php enough to think about what i would use composer for =)
[2012-07-03 18:58:11 -0400] erratic: heh
[2012-07-03 18:58:36 -0400] savant: I would use composer the same way i use bundler
[2012-07-03 18:58:41 -0400] erratic: I seriously never need to do aynthing but apt-get install php5-curl / the likes and pear/pecl install
[2012-07-03 18:58:43 -0400] savant: to install application-level dependencies
[2012-07-03 19:00:18 -0400] savant: is there a way to see what the current @node var contents would be for a particular chef run once all the attribute, role, and recipe files have been coalesced
[2012-07-03 19:00:19 -0400] savant: ?
[2012-07-03 19:00:21 -0400] yfeldblum: but, how in particular do packagist and composer work? (rather than what in general are they)
[2012-07-03 19:01:11 -0400] savant: yfeldblum: depends upon the install strategy
[2012-07-03 19:01:16 -0400] savant: they are just dependency managers
[2012-07-03 19:01:29 -0400] savant: you give it a composer.json file, which contains a list of app dependencies
[2012-07-03 19:01:43 -0400] savant: and then composer goes through, downloads/clones/checks out the deps
[2012-07-03 19:01:54 -0400] savant: and puts them in the proper places in your application
[2012-07-03 19:02:02 -0400] yfeldblum: savant, does packagist host tarballs of released versions of libraries? or does packagist merely index github repositories that look like php libraries?
[2012-07-03 19:02:11 -0400] savant: afaik, it can.
[2012-07-03 19:02:25 -0400] savant: im unsure on that, I can ask in #composer-dev if you want
[2012-07-03 19:02:30 -0400] savant: but there are different strategies
[2012-07-03 19:02:39 -0400] savant: tarball, git clone, svn, hg etc.
[2012-07-03 19:03:02 -0400] savant: why?
[2012-07-03 19:04:22 -0400] savant: oh and another thing, im looking at the mysql cookbook, and it references the mysql vars in the template as @mysql['foo']
[2012-07-03 19:04:28 -0400] yfeldblum: savant, i'm asking about packagist, not composer
[2012-07-03 19:04:32 -0400] savant: is that preferred to @node['mysql']['foo']
[2012-07-03 19:05:20 -0400] yfeldblum: savant, the top-level keys of the Hash object that you assign as the template resource's `variables` attribute are set up as instance variables inside the template ERB's context
[2012-07-03 19:05:42 -0400] savant: yfeldblum: ah. no, packagist is just an index. I believe it just does slim proxying for wherever the download actually is. you run composer, and packagist responds with some json from it's solr index as to your query
[2012-07-03 19:05:45 -0400] savant: https://github.com/composer/packagist
[2012-07-03 19:05:52 -0400] savant: its nothing special
[2012-07-03 19:06:00 -0400] yfeldblum: savant, my preferred way is *always* to use only the instance variables inside the template ERB's context that come from the template resource's `variables` attribute
[2012-07-03 19:06:16 -0400] miah: yfeldblum: i agree
[2012-07-03 19:06:21 -0400] savant: yfeldblum: makes sense. looks like this repo is kinda weird
[2012-07-03 19:06:25 -0400] miah: i would love to discuss more best practices around templating though
[2012-07-03 19:06:39 -0400] savant: im currently cleaning up all of our cookbooks
[2012-07-03 19:06:44 -0400] savant: and lots of opscode cookbooks
[2012-07-03 19:06:46 -0400] yfeldblum: savant, my preferred way is that the recipe is responsible for inspecting the `node` instance and pulling from it whatever it needs and creating a Hash with the data the ERB will need and assigning the Hash to the template resource's `variables` attribute
[2012-07-03 19:06:49 -0400] miah: savant: i am doing the same
[2012-07-03 19:06:51 -0400] savant: as per the suggestions of foodcritic.
[2012-07-03 19:07:05 -0400] yfeldblum: savant, my preferred way means that the template ERBs will *never* reference either `node` or `@node`
[2012-07-03 19:07:17 -0400] monvillalon: Is there any way to capture the output of a bash/execute block?
[2012-07-03 19:07:21 -0400] savant: hence my question as to a way to inspect @node before a chef run actually occurs, but after it is compiled
[2012-07-03 19:07:38 -0400] savant: yfeldblum: why do you prefer that?
[2012-07-03 19:08:15 -0400] yfeldblum: savant, however, my preferred way sometimes gets in the way of quick-and-dirty, but is typically better (and actually simpler and cleaner!) as the recipe or the template gets larger
[2012-07-03 19:08:41 -0400] yfeldblum: savant, because that way the inputs to the template ERB are crystal clear to everyone
[2012-07-03 19:09:14 -0400] erratic: Im hungry
[2012-07-03 19:09:16 -0400] savant: hmm
[2012-07-03 19:09:22 -0400] savant: i think I prefer @node
[2012-07-03 19:09:33 -0400] savant: since I dont have derived variables
[2012-07-03 19:09:44 -0400] yfeldblum: savant, derived variables?
[2012-07-03 19:09:53 -0400] savant: like from node search
[2012-07-03 19:10:08 -0400] yfeldblum: savant, i'm not sure i followed
[2012-07-03 19:10:12 -0400] javawidget: I need to learn how to use the search functionality.
[2012-07-03 19:10:20 -0400] javawidget: for sure.
[2012-07-03 19:10:30 -0400] savant: well if I wanted to template out a file that depended upon what available instances have a certain role
[2012-07-03 19:10:44 -0400] savant: i currently have that hardcoded in some attribute file or a base.json role
[2012-07-03 19:10:50 -0400] savant: so I dont do
[2012-07-03 19:10:58 -0400] savant: vars = search(:derp)
[2012-07-03 19:11:19 -0400] savant: template "herp" {variables(var)}
[2012-07-03 19:11:21 -0400] savant: etc.
[2012-07-03 19:14:45 -0400] yfeldblum: savant, sure, but whether it's hardcoded in an attributes file or a base role or gotten from search, i'd still suggest massaging and manhandling the data in the recipe and assigning to the template resource's variables attribute, and having a really simple and really dumb ERB which doesn't need to do anything special at all to get the data in the right format (because that's done in the recipe)
[2012-07-03 19:15:11 -0400] savant: i guess. its usually pretty straightfoward though
[2012-07-03 19:15:20 -0400] savant: i'll do a first pass to normalize to @node
[2012-07-03 19:15:27 -0400] savant: and then do a second to normalize to setting vars
[2012-07-03 19:16:00 -0400] yfeldblum: savant, that sounds like a really bad idea
[2012-07-03 19:16:17 -0400] yfeldblum: savant, because you cannot scale it up to larger and more complex recipes
[2012-07-03 19:16:32 -0400] yfeldblum: savant, much better to treat the node as pure input which you are not allowed to modify
[2012-07-03 19:17:12 -0400] savant: well when I reference @node, I am just referencing attributes set in the dna/role
[2012-07-03 19:17:54 -0400] savant: atm it does random crap, so I want to get it in a position where i know what every template file needs, then I can go back and rewrite the 'template "herp" do' calls to explicitly set data from the node/wherever.
[2012-07-03 19:19:16 -0400] pwf: anyone know why my deploy resource isn't updating the symlink?
[2012-07-03 19:19:28 -0400] yfeldblum: savant, the problems are not apparent until the size of the project scales up - at which point they can become even insurmountable
[2012-07-03 19:19:36 -0400] pwf: my repository is set to branch-A
[2012-07-03 19:19:42 -0400] pwf: it checks out bothe trunk and branch-A
[2012-07-03 19:19:57 -0400] pwf: and then leaves the symlink pointed to the trunk revision
[2012-07-03 19:19:58 -0400] savant: yfeldblum: well like I said, i'll go back after this pass to fix it to explicitly set information
[2012-07-03 19:22:36 -0400] pwf: so for the deploy resource, 'revision' is all it looks at to determine which folder to symlink to?
[2012-07-03 19:22:53 -0400] pwf: i can see two places in my code where it says 'HEAD is revision xxxx'
[2012-07-03 19:23:09 -0400] pwf: i don't understand why it's even looking at trunk though since i changed the url to the branch url
[2012-07-03 19:26:27 -0400] cnf: ow man!
[2012-07-03 19:26:34 -0400] cnf: i overfed myself!
[2012-07-03 19:26:53 -0400] c_t: You want donuts? Then eat all the donuts in the world!
[2012-07-03 19:27:17 -0400] cnf: naw man!
[2012-07-03 19:27:21 -0400] cnf: i'm stuffed...
[2012-07-03 19:30:15 -0400] cnf: oohhh, so stuffed...
[2012-07-03 19:31:40 -0400] pwf: this deploy resource... can get stuffed
[2012-07-03 19:32:16 -0400] cnf: ha!
[2012-07-03 19:33:28 -0400] cnf: hmz, and getting cookbooks from-hosted is still soo slow...
[2012-07-03 19:35:49 -0400] cnf: anyone from opscode about?
[2012-07-03 19:36:55 -0400] gmcinnes: guys, I'm having a real hard time. Everything says that my directories are being set up as expected, but they're not getting chown'ed to the correct owner.  They're being left as root
[2012-07-03 19:38:24 -0400] miah: the 'directory' resource also accepts 'owner' and 'group' arguments
[2012-07-03 19:38:27 -0400] miah: resources?
[2012-07-03 19:38:27 -0400] bawt_: resources is http://wiki.opscode.com/display/chef/Resources
[2012-07-03 19:38:45 -0400] gmcinnes: yeah, I know. I've got them set, and its working on most directories, but not some.
[2012-07-03 19:39:17 -0400] gmcinnes: I can see output from debug that indicates the directories are being set to the correct numeric owner, but after the run, the owner remains as root
[2012-07-03 19:39:38 -0400] gmcinnes: It creates the directory structure correctly, and with the correct permissions.
[2012-07-03 19:42:00 -0400] cnf: hmm, it being so slow really slows down testing...
[2012-07-03 19:44:51 -0400] cnf: paulmooring: poke? :P
[2012-07-03 19:47:20 -0400] paulmooring: cnf: we're looking into it now
[2012-07-03 19:47:30 -0400] cnf: paulmooring: aha, awesome!
[2012-07-03 19:47:39 -0400] cnf: paulmooring: just so i know it's not me going bonkers :P
[2012-07-03 19:49:04 -0400] jan0232: anybody using the application_ruby cookbook (apache2 + passenger)i'm having trouble getting it to work. i want to use rbenv to install the proper ruby version for my app and tell passenger to use that one
[2012-07-03 19:51:11 -0400] gmcinnes: miah: any other ideas? This is really weird.
[2012-07-03 19:52:02 -0400] gmcinnes: output is here: http://pastie.org/private/cforgsvshnjcedyxkspa2a  all looks normal to me.  "owner changed to 33" seems fine
[2012-07-03 19:56:09 -0400] miah: recursive doesnt work the way you wish it did
[2012-07-03 20:10:32 -0400] cnf: hmm, still confused by this bug
[2012-07-03 20:10:43 -0400] cnf: users cookbook is still giving me errors
[2012-07-03 20:11:03 -0400] cnf: and i even added gid's to my users
[2012-07-03 20:12:55 -0400] jameson: miah: it's a shame that recursive is just mkdir + chmod :(
[2012-07-03 20:13:54 -0400] jameson: so the final directory get's correct permissions but any other directory is owned by root
[2012-07-03 20:15:48 -0400] Guest26773: Im paying like 750 for an 8 core computer today
[2012-07-03 20:15:52 -0400] Guest26773: with 16 gb of ram
[2012-07-03 20:16:02 -0400] jameson: erratic: play Diablo 3 on it
[2012-07-03 20:16:09 -0400] erratic: thats the idea!
[2012-07-03 20:16:13 -0400] erratic: I have a copy already
[2012-07-03 20:16:17 -0400] cnf: noooooo!!!!
[2012-07-03 20:16:22 -0400] cnf: not diablo3!!!!!!!!!!!!
[2012-07-03 20:16:24 -0400] jameson: watch you drop off the planet
[2012-07-03 20:16:29 -0400] erratic: but Im also gonna run virtualbox and vagrant on it
[2012-07-03 20:16:44 -0400] jameson: oh, I do that on my macbook
[2012-07-03 20:16:49 -0400] miah: cnf: the users cookbook doesn't like it when users already exist
[2012-07-03 20:16:50 -0400] jameson: it's mostly a ram issue for me
[2012-07-03 20:16:55 -0400] jameson: 16gb :)
[2012-07-03 20:17:01 -0400] cnf: miah: they don't
[2012-07-03 20:17:06 -0400] miah: i have 4gb of ram in my mba and i run vagrant just fine..
[2012-07-03 20:17:08 -0400] erratic: you have 16 in your macbook?
[2012-07-03 20:17:10 -0400] cnf: miah: vagrant sandbox rollback ftw :P
[2012-07-03 20:17:19 -0400] jameson: miah: run 4 instances :3
[2012-07-03 20:17:22 -0400] cnf: and 2nd on 4G MBA and vagrant
[2012-07-03 20:17:27 -0400] miah: jameson: i do
[2012-07-03 20:17:33 -0400] miah: but i set the ram on my vm's to be reasonable
[2012-07-03 20:17:41 -0400] cnf: indeed!
[2012-07-03 20:17:42 -0400] jameson: I have them at 1GB
[2012-07-03 20:17:44 -0400] cnf: like 128MB
[2012-07-03 20:17:47 -0400] jameson: :X
[2012-07-03 20:17:47 -0400] cnf: ha!
[2012-07-03 20:17:58 -0400] miah: ya. 128 / 256 should be enough for most dev
[2012-07-03 20:18:26 -0400] cnf: i find redhat based dists need more ram, than debian/ubuntu based ones, though
[2012-07-03 20:18:29 -0400] cnf: dno why
[2012-07-03 20:18:38 -0400] miah: i dont think thats true
[2012-07-03 20:18:41 -0400] savant: what is with the naming schema of attribute files?
[2012-07-03 20:18:45 -0400] miah: i am doing rhel/centos dev, with low ram.
[2012-07-03 20:18:51 -0400] savant: in the mysql cookbook, the attributes file is called "server.rb"
[2012-07-03 20:18:55 -0400] erratic: man you know what would be hella gangster would be to make a whole bunch of openbsd cookbooks
[2012-07-03 20:18:56 -0400] miah: it just depends on how you build your boxes. i personally am a fan of minimal installs.
[2012-07-03 20:18:56 -0400] erratic: like for like
[2012-07-03 20:19:00 -0400] erratic: ypserv and stuff
[2012-07-03 20:19:01 -0400] savant: does that mean its not auto-loaded? or does the name not matter?
[2012-07-03 20:19:19 -0400] jameson: I'm trying to mirror m1_smalls.
[2012-07-03 20:19:19 -0400] cnf: miah: yeah, minimal veewee install is bloody 800MB!!!
[2012-07-03 20:19:20 -0400] miah: openbsd doesn't have functional providers in chef (unless kisoku finished them)
[2012-07-03 20:19:25 -0400] cnf: it's insane
[2012-07-03 20:19:41 -0400] miah: -rw-r--r--  1 miah  staff   632M Jun 15 00:00 centos-6-x86_64.box
[2012-07-03 20:19:50 -0400] jameson: most of our apps is memory bound and not cpu bound so... I need the exorbitant ram :X
[2012-07-03 20:19:50 -0400] cnf: miah: if you have some nice centos boxes, do share :P
[2012-07-03 20:20:20 -0400] miah: i use the sensu boxes =)
[2012-07-03 20:20:36 -0400] cnf: miah: also 259Mlucid32 and 404Mprecise32 :P
[2012-07-03 20:20:43 -0400] cnf: sensu? (googleing)
[2012-07-03 20:20:52 -0400] cnf: https://github.com/sensu/sensu ?
[2012-07-03 20:20:56 -0400] miah: indeed
[2012-07-03 20:21:13 -0400] cnf: they have base boxes?
[2012-07-03 20:21:14 -0400] jameson: i think precise64 form vagrant is 350mb?
[2012-07-03 20:21:35 -0400] cnf: jameson: yah, something like that
[2012-07-03 20:25:26 -0400] erratic: I had weird dreams last night
[2012-07-03 20:26:23 -0400] erratic: couldnt sleep
[2012-07-03 20:26:29 -0400] erratic: now that Ive eaten I want to go to sleep
[2012-07-03 20:26:48 -0400] jameson: was the dream that chef was working and all cbs were wonderful?
[2012-07-03 20:27:21 -0400] erratic: no it was more like a dream of my alternate personalities were messing with my other personalities
[2012-07-03 20:27:44 -0400] jameson: like your dev servers were messing with your production servers?
[2012-07-03 20:27:48 -0400] erratic: which is like something I've experienced on dmt
[2012-07-03 20:27:52 -0400] erratic: but
[2012-07-03 20:27:53 -0400] jameson: because of a bad config?
[2012-07-03 20:27:58 -0400] erratic: sort of
[2012-07-03 20:28:09 -0400] jameson: sounds terrible :P
[2012-07-03 20:28:12 -0400] erratic: like I was rm -rfing shit and didnt realize I did it to myself because it was another personality
[2012-07-03 20:28:23 -0400] gmcinnes: :)
[2012-07-03 20:28:25 -0400] erratic: dont recall that it was that exact scenario but yeah basically
[2012-07-03 20:28:58 -0400] gmcinnes: that must have been what happened to me :)
[2012-07-03 20:29:23 -0400] erratic: that usually happens when my seretonin levels are modulated by something like 5-htp or l-tryptophan
[2012-07-03 20:29:30 -0400] erratic: I was also having trouble going back to sleep
[2012-07-03 20:29:59 -0400] erratic: I have bipolar disorder which I take meds for and I take anti depressants too
[2012-07-03 20:30:03 -0400] erratic: probably had something to do with it
[2012-07-03 20:30:32 -0400] cnf: erratic: zen is a hard place to reach, isn't it
[2012-07-03 20:30:41 -0400] erratic: not really
[2012-07-03 20:30:57 -0400] erratic: its been really easy for me the last couple of months since I started taking meds again
[2012-07-03 20:31:21 -0400] erratic: last night was just weird and random
[2012-07-03 20:31:22 -0400] cnf: zen in a bottle :P
[2012-07-03 20:31:39 -0400] erratic: several bottles
[2012-07-03 20:31:57 -0400] erratic: I have a SMTWTFS case
[2012-07-03 20:32:07 -0400] erratic: I take about 5 or 6 different medications a day
[2012-07-03 20:39:07 -0400] savant: is there a chef style guide
[2012-07-03 20:39:11 -0400] savant: other than food critic?
[2012-07-03 20:39:45 -0400] hoover_damm: savant, food critic is a linting tool
[2012-07-03 20:39:59 -0400] savant: im aware
[2012-07-03 20:40:08 -0400] savant: it comes with a readme though
[2012-07-03 20:40:20 -0400] savant: which I looked through and it seems like a style guide
[2012-07-03 20:40:22 -0400] savant: somewhat
[2012-07-03 20:40:23 -0400] zts: savant: there's a few floating around.  While I don't agree with everything in it, this one is thought provoking: https://github.com/infochimps-labs/ironfan/wiki/style_guide
[2012-07-03 20:40:33 -0400] savant: yeah I'm reading that now
[2012-07-03 20:40:49 -0400] hoover_damm: savant, https://github.com/infochimps-labs/style_guide/blob/master/style-guide-ruby.md
[2012-07-03 20:40:59 -0400] hoover_damm: savant, yfeldblum i think had some others
[2012-07-03 20:41:12 -0400] hoover_damm: savant, I wrote my own...
[2012-07-03 20:41:20 -0400] savant: linky
[2012-07-03 20:41:22 -0400] savant: ?
[2012-07-03 20:41:23 -0400] hoover_damm: savant, I haven't shared it because it's incomplete and likely to change often
[2012-07-03 20:41:27 -0400] savant: :(
[2012-07-03 20:41:28 -0400] savant: k
[2012-07-03 20:41:40 -0400] savant: heh
[2012-07-03 20:41:47 -0400] savant: The docs on chef are somethings hard to follow
[2012-07-03 20:41:56 -0400] savant: I know when I began, I was uber confused by everything
[2012-07-03 20:42:04 -0400] yfeldblum: i don't have any of my own, except for my sporadic comments in this channel
[2012-07-03 20:42:06 -0400] savant: i started writing a tutorial series on chef
[2012-07-03 20:42:17 -0400] hoover_damm: yfeldblum, ahh I thought you had your own style guide
[2012-07-03 20:42:19 -0400] savant: but a styleguide would be super-nice as well
[2012-07-03 20:42:49 -0400] hoover_damm: ahh
[2012-07-03 20:42:50 -0400] hoover_damm: https://github.com/ampledata/cookbook-style-guide
[2012-07-03 20:49:36 -0400] erratic: kittens
[2012-07-03 20:50:30 -0400] thehar: puppies
[2012-07-03 20:50:38 -0400] erratic: you too can haz one
[2012-07-03 20:50:56 -0400] savant: omg
[2012-07-03 20:51:05 -0400] savant: i had a kitten claw at me last week
[2012-07-03 20:51:07 -0400] savant: she attacked
[2012-07-03 20:51:10 -0400] savant: worst date ever
[2012-07-03 20:51:13 -0400] erratic: I need to stop can hazing
[2012-07-03 20:51:15 -0400] jameson: mm
[2012-07-03 20:51:21 -0400] savant: its okay though, she is moving in on the 14th
[2012-07-03 20:51:25 -0400] cnf: erratic: oh, please don't
[2012-07-03 20:51:26 -0400] jameson: aws cookbook is incomplete
[2012-07-03 20:51:33 -0400] erratic: cnf lol
[2012-07-03 20:52:30 -0400] erratic: GLIIIIIIITCH
[2012-07-03 20:54:49 -0400] cnf: it must be me
[2012-07-03 20:54:57 -0400] cnf: but every cookbook i use errors...
[2012-07-03 20:55:34 -0400] cnf: every bloody single one!
[2012-07-03 20:56:49 -0400] cnf: grmbl :(
[2012-07-03 20:57:20 -0400] erratic: pastie error
[2012-07-03 20:58:08 -0400] cnf: http://pastie.org/4195236
[2012-07-03 20:58:32 -0400] erratic: less /srv/chef/file_store/chef-stacktrace.out
[2012-07-03 20:58:49 -0400] erratic: hmm
[2012-07-03 20:58:58 -0400] jameson: wrong window
[2012-07-03 20:59:01 -0400] erratic: package[php53] (php::package line 32) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for php53
[2012-07-03 20:59:32 -0400] erratic: edit that recipe package
[2012-07-03 20:59:37 -0400] erratic: and look at line 32
[2012-07-03 20:59:54 -0400] cnf: already doing that
[2012-07-03 20:59:54 -0400] erratic: my first thought would be to change that php53 to just php
[2012-07-03 21:00:09 -0400] erratic: because basically what thats doing is apt-get installing php
[2012-07-03 21:00:21 -0400] cnf: erratic: yum installing
[2012-07-03 21:00:31 -0400] erratic: yum search php53?
[2012-07-03 21:01:02 -0400] cnf: obviously doesn't exist
[2012-07-03 21:01:18 -0400] erratic: thats strange
[2012-07-03 21:01:50 -0400] cnf: really, why is it every cookbook i touch has fatal errors in them?
[2012-07-03 21:01:57 -0400] cnf: or do they only happen to me?
[2012-07-03 21:02:11 -0400] erratic: its hard to say without seeing all the errors for myself
[2012-07-03 21:02:24 -0400] erratic: could be any number of things
[2012-07-03 21:03:08 -0400] cnf: it's very tiresome
[2012-07-03 21:03:11 -0400] cnf: and frustrating
[2012-07-03 21:03:19 -0400] erratic: indeed
[2012-07-03 21:03:34 -0400] erratic: but
[2012-07-03 21:03:36 -0400] erratic: totally worth it
[2012-07-03 21:03:41 -0400] cnf: i dno
[2012-07-03 21:03:48 -0400] cnf: i have to get anything working
[2012-07-03 21:03:59 -0400] cnf: i have yet to get anything working
[2012-07-03 21:04:15 -0400] erratic: you're using hosted right?
[2012-07-03 21:04:24 -0400] cnf: ye
[2012-07-03 21:05:00 -0400] erratic: my problem is I dont have any experience with crappy redhat boxes
[2012-07-03 21:05:12 -0400] erratic: all my shit is ubuntu
[2012-07-03 21:05:45 -0400] cnf: yeah, well
[2012-07-03 21:05:48 -0400] erratic: and I used packages too instead of gems
[2012-07-03 21:05:52 -0400] cnf: legacy and company policy
[2012-07-03 21:07:56 -0400] cnf: maybe i should just abandon existing cookbooks
[2012-07-03 21:08:48 -0400] savant: in hosted chef we trust
[2012-07-03 21:10:06 -0400] erratic: whats wrong with hosting your own
[2012-07-03 21:11:06 -0400] cnf: i got no problem with hosted
[2012-07-03 21:11:11 -0400] cnf: well besides it being slow atm :P
[2012-07-03 21:11:20 -0400] cnf: just none of the damned cookbooks work ^^;
[2012-07-03 21:12:19 -0400] erratic: can you do teamviewer or something
[2012-07-03 21:12:22 -0400] erratic: and I'll help you figure it out
[2012-07-03 21:12:30 -0400] miketheman: cnf: I've built quite the architectures on community cookbooks. some require a little tweaking, but that's largely to undertsand what they are doing. the ntp cookbook should work for you out of the box.
[2012-07-03 21:13:58 -0400] erratic: cnf or like some kind of shared screen
[2012-07-03 21:14:19 -0400] cnf: erratic: yeah, that's not gonna happen :P
[2012-07-03 21:14:45 -0400] erratic: I'll share you yours if you'll share me mine
[2012-07-03 21:15:35 -0400] cnf: miketheman: every time i need to edit a cookbook, that means i need to fork it, and maintain a version control repo for it
[2012-07-03 21:15:59 -0400] erratic: can I share my desktop as view only and show you how I did mine
[2012-07-03 21:16:10 -0400] erratic: actually its git underneath prob
[2012-07-03 21:16:14 -0400] cnf: how you did your what?
[2012-07-03 21:16:22 -0400] erratic: my chef-repo directory
[2012-07-03 21:16:34 -0400] erratic: I pull in changes from their git repo and push changes to a remote called backup
[2012-07-03 21:17:17 -0400] cnf: yyyeeeaaahhh...
[2012-07-03 21:17:58 -0400] Twirrim: jtimberman: the omniwhatsit? that sadly didn't work, but we're talking about SuSE 10 boxes here, nothing works on them ;)
[2012-07-03 21:18:23 -0400] erratic: cnf whats so hard about that
[2012-07-03 21:18:24 -0400] erratic: lol
[2012-07-03 21:18:34 -0400] cnf: nothing
[2012-07-03 21:18:41 -0400] cnf: i'm wondering where you are going...
[2012-07-03 21:19:11 -0400] erratic: oh you're still expecting community cookbooks to do everything you ever want them to do out of the box
[2012-07-03 21:19:18 -0400] erratic: yeah thats just not likely I'm sorry
[2012-07-03 21:19:30 -0400] erratic: Ive had to write 5 or 6 of my own
[2012-07-03 21:19:53 -0400] erratic: and pretty much the ones that came from community I've modified in almost every case
[2012-07-03 21:19:57 -0400] erratic: even the fail2ban one
[2012-07-03 21:20:06 -0400] cnf: erratic: not every, no
[2012-07-03 21:20:16 -0400] cnf: erratic: just the basic advertised behavior, that's all
[2012-07-03 21:20:46 -0400] erratic: hmm
[2012-07-03 21:21:22 -0400] miketheman: cnf: you don't need to fork the repo - you can use `knife cookbook site install <cookbook name>` and that will place that into your regular cookbook directory
[2012-07-03 21:21:44 -0400] erratic: miketheman I think what he meant was he didnt want to edit them
[2012-07-03 21:21:57 -0400] miketheman: erratic: some don't need editing, some do.
[2012-07-03 21:21:59 -0400] erratic: because it would change files that you have to commit before you can knife cookbook site install again
[2012-07-03 21:22:20 -0400] erratic: miketheman there's no right or wrong way in my opinion
[2012-07-03 21:22:25 -0400] miketheman: the apache2 cookbook has come a long way for cross-platform compatibility, and at this point I include it into my own cookbook and try to never modify it.
[2012-07-03 21:24:01 -0400] cnf: miketheman: except all of them so far have needed modifieing for me
[2012-07-03 21:24:11 -0400] cnf: miketheman: and if it's modified, it needs to be version controlled
[2012-07-03 21:24:56 -0400] cnf: miketheman: no cookbook i have been testing with so far has worked unchanged
[2012-07-03 21:25:02 -0400] cnf: except some deps ones
[2012-07-03 21:27:26 -0400] miketheman: very sorry to hear that.
[2012-07-03 21:27:36 -0400] cnf: yeah, indeed
[2012-07-03 21:27:57 -0400] miketheman: one of the best parts of the chef community is that the problems that I've found and fixed, I've contributed back to the source, and they make it out in newer versions
[2012-07-03 21:27:59 -0400] cnf: miketheman: and i'm not even trying to do weird specific stuff yet
[2012-07-03 21:28:21 -0400] cnf: i'm just trying to understand how it all works and fits together
[2012-07-03 21:31:09 -0400] erratic: I just realized I can hazed a cheezburger for lunch
[2012-07-03 21:31:18 -0400] erratic: yay for me
[2012-07-03 21:32:34 -0400] cnf: CAN HAS!
[2012-07-03 21:33:54 -0400] miketheman: I'd recommend taking some time to do some introductory to chef reading/viewing
[2012-07-03 21:34:26 -0400] miketheman: this is an oldie but goodie: http://blip.tv/opscode/intro-to-chef-3776519
[2012-07-03 21:34:43 -0400] cnf: bah, flash ^^;
[2012-07-03 21:34:56 -0400] miketheman: ah well.
[2012-07-03 21:35:10 -0400] cnf: OH, FFS!!!
[2012-07-03 21:35:19 -0400] cnf: stupid cookbooks, stop crapping out on me!
[2012-07-03 21:35:37 -0400] miketheman: you may have a better time working on another project, if this one is causing you this much emotional trouble.
[2012-07-03 21:36:03 -0400] cnf: what other project?
[2012-07-03 21:36:19 -0400] miketheman: one that doesn't cause you to lose it over things not working.
[2012-07-03 21:36:46 -0400] erratic: heh
[2012-07-03 21:36:50 -0400] erratic: I think he's just like me
[2012-07-03 21:36:59 -0400] miketheman: "erratic"?
[2012-07-03 21:37:04 -0400] miketheman: :)
[2012-07-03 21:37:05 -0400] erratic: yeah
[2012-07-03 21:37:12 -0400] cnf: and how is that gonna help me learn how the damned stuff works
[2012-07-03 21:37:17 -0400] erratic: I start rocking back and forth sometimes
[2012-07-03 21:37:35 -0400] erratic: then I go off and start drinkin
[2012-07-03 21:37:44 -0400] miketheman: I pound on my desk sometimes too. But then I take a step back, and try and figure out where I may have gone wrong.
[2012-07-03 21:37:45 -0400] erratic: and throw beer bottles at mah computer
[2012-07-03 21:37:52 -0400] cnf: is it really that weird to expect things to work?
[2012-07-03 21:38:38 -0400] erratic: miketheman I'm proud to say I haven't actually struck a computer in years
[2012-07-03 21:38:53 -0400] erratic: I used to beat the fucking shit out of my computers and my monitor and my keyboard
[2012-07-03 21:39:00 -0400] erratic: like bloody knuckles
[2012-07-03 21:39:08 -0400] erratic: because I was absolutely insane
[2012-07-03 21:39:16 -0400] cnf: it's crapping out on it's templates
[2012-07-03 21:39:19 -0400] cnf: that's just...
[2012-07-03 21:39:20 -0400] cnf: wrong
[2012-07-03 21:39:36 -0400] erratic: yeah
[2012-07-03 21:39:42 -0400] erratic: its silly
[2012-07-03 21:40:15 -0400] erratic: bipolar
[2012-07-03 21:40:16 -0400] erratic: lol
[2012-07-03 21:40:43 -0400] erratic: most people dont ever get over that sort of behavior
[2012-07-03 21:40:46 -0400] miketheman: I suspect there's some severe lack of context here.
[2012-07-03 21:41:10 -0400] erratic: miketheman yeah i've had a really fucked up life
[2012-07-03 21:42:29 -0400] cnf: right, this one i don't get
[2012-07-03 21:42:38 -0400] cnf: http://pastie.org/4195468
[2012-07-03 21:44:33 -0400] workmad3: cnf: looks like 'a["nagios"]' hasn't been set to a value so it's coming back as nil
[2012-07-03 21:44:47 -0400] cnf: workmad3: but it is
[2012-07-03 21:44:57 -0400] workmad3: cnf: not according to the template
[2012-07-03 21:45:55 -0400] workmad3: cnf: check the value inside and outside the template
[2012-07-03 21:46:04 -0400] cnf: workmad3: what?
[2012-07-03 21:46:05 -0400] bawt_: workmad3: what is your workflow then, if i may ask? :)
[2012-07-03 21:46:24 -0400] cnf: workmad3: what does that mean?
[2012-07-03 21:46:52 -0400] workmad3: cnf: I mean, log out the value of 'a["nagios"]' from inside the template, and from the recipe outside the template
[2012-07-03 21:47:26 -0400] cnf: i don't even know where outside is
[2012-07-03 21:47:46 -0400] workmad3: cnf: cookbooks/nagios/definitions/nagios_conf.rb:28
[2012-07-03 21:47:52 -0400] makerbreaker: how would i go about resetinng tx/rx counters?
[2012-07-03 21:47:56 -0400] workmad3: cnf: line 28 of that file
[2012-07-03 21:48:58 -0400] cnf: hmz
[2012-07-03 21:50:16 -0400] cnf: i don't get it
[2012-07-03 21:52:40 -0400] cnf: i can't even trace where the damned variables come from
[2012-07-03 21:53:05 -0400] erratic: wheres die(print_r($blah)) when you need it
[2012-07-03 21:56:34 -0400] cnf: wth is it doing now?
[2012-07-03 21:56:36 -0400] gmcinnes: cnf: you can run chef-client -l debug
[2012-07-03 21:57:01 -0400] gmcinnes: and use Chef::Log.debug("eek!") to get insight.
[2012-07-03 21:57:19 -0400] cnf: ah, ok
[2012-07-03 21:57:23 -0400] cnf: thanks, lets see
[2012-07-03 21:57:34 -0400] cnf: gmcinnes: what does the resulting line look like?
[2012-07-03 21:58:10 -0400] gmcinnes: well, it will be one of the lines in the big mess of crap that "chef-client -l debug" spits out :)
[2012-07-03 21:58:17 -0400] erratic: cp: cannot create regular file `../cloudfuse/files/default/cloudfuse': Text file busy
[2012-07-03 21:58:21 -0400] erratic: dafuq
[2012-07-03 21:58:53 -0400] cnf: oh, big mess of crap indeed
[2012-07-03 21:59:24 -0400] gmcinnes: yeah. I would recommend you get familiar with it though :(
[2012-07-03 22:00:23 -0400] gmcinnes: you can always add: Chef::Log.debug("*" * 80) where you need it, to act as a waypointer
[2012-07-03 22:00:38 -0400] erratic: I use print sometimes
[2012-07-03 22:00:40 -0400] erratic: hehe
[2012-07-03 22:01:10 -0400] cnf: uhm
[2012-07-03 22:01:23 -0400] cnf: not even sure where to look for it now
[2012-07-03 22:03:46 -0400] erratic: I kind of dont feel like buying that computer
[2012-07-03 22:05:04 -0400] cnf: wth?
[2012-07-03 22:05:04 -0400] bawt_: wth is it running then
[2012-07-03 22:05:08 -0400] cnf: i can't find my debug output
[2012-07-03 22:06:11 -0400] cnf: ok
[2012-07-03 22:06:13 -0400] cnf: man
[2012-07-03 22:06:21 -0400] cnf: it should contain the needed elements
[2012-07-03 22:06:30 -0400] cnf: so why the fuck is the nagios cookbook crapping out?
[2012-07-03 22:06:50 -0400] cnf: every damned cookbook!
[2012-07-03 22:07:12 -0400] jameson: you using chef-solo or server/hosted?
[2012-07-03 22:07:17 -0400] cnf: hosted
[2012-07-03 22:07:23 -0400] jameson: what's the error?
[2012-07-03 22:07:36 -0400] jameson: you're trying the nagios quick start?
[2012-07-03 22:07:47 -0400] cnf: quick start?
[2012-07-03 22:08:06 -0400] jameson: http://wiki.opscode.com/display/chef/Nagios+Quick+Start
[2012-07-03 22:08:11 -0400] jameson: if that fails
[2012-07-03 22:08:17 -0400] jameson: there is something very wrong
[2012-07-03 22:08:28 -0400] erratic: heh
[2012-07-03 22:08:42 -0400] cnf: no, i just got the nagios cookbook
[2012-07-03 22:08:46 -0400] jameson: (i did it with chef 10.12 on precise 12.04)
[2012-07-03 22:08:51 -0400] cnf: and like every cookbook i touch
[2012-07-03 22:08:51 -0400] erratic: I'm like falling out of my chair today
[2012-07-03 22:08:57 -0400] cnf: it crashes all over the place
[2012-07-03 22:09:00 -0400] erratic: I need a seatbelt
[2012-07-03 22:09:34 -0400] cnf: this time, it's crap like http://pastie.org/4195468
[2012-07-03 22:11:14 -0400] cnf: i'm so tired of all the errors
[2012-07-03 22:12:03 -0400] jameson: that is
[2012-07-03 22:12:05 -0400] jameson: probably
[2012-07-03 22:12:14 -0400] jameson: a doesn't exist
[2012-07-03 22:12:17 -0400] jameson: try @a
[2012-07-03 22:12:37 -0400] jameson: I am guessing you are passing in variables({ :a =>  .... }) ?
[2012-07-03 22:12:48 -0400] cnf: jameson: no
[2012-07-03 22:12:52 -0400] jameson: that's a ruby error, not a chef error
[2012-07-03 22:12:55 -0400] cnf: i am using a public cookbook
[2012-07-03 22:13:13 -0400] cnf: https://github.com/opscode-cookbooks/nagios to be precise
[2012-07-03 22:13:16 -0400] workmad3: cnf: what node attributes did you add?
[2012-07-03 22:13:19 -0400] jan0232: anybody using the new application_ruby cookbook?
[2012-07-03 22:13:22 -0400] jameson: then you are missing the data_bag items probably
[2012-07-03 22:13:42 -0400] cnf: workmad3: none, it's not failing on nodes
[2012-07-03 22:13:58 -0400] cnf: jameson: i'm not missing the nagios email ones, no
[2012-07-03 22:14:36 -0400] workmad3: cnf: sorry, yes, I'm forgetting the nagios cookbook
[2012-07-03 22:14:47 -0400] jameson: that nagios::client pulls from -> users/nagiosadmin.json
[2012-07-03 22:15:20 -0400] cnf: jameson: where does it say that?
[2012-07-03 22:15:34 -0400] workmad3: cnf: so, all your user data bags that are have a group of 'sysadmin' have a '"nagios": { "email": "whatever" }' attribute?
[2012-07-03 22:15:36 -0400] cnf: and that does exist, and has the nagios email set
[2012-07-03 22:15:45 -0400] cnf: workmad3: yep
[2012-07-03 22:17:47 -0400] jameson: cnf: so you are just installing nagios?
[2012-07-03 22:18:20 -0400] cnf: jameson: i'm just trying to get something working, so i can get a feel for chef
[2012-07-03 22:18:58 -0400] jameson: cnf: do you have a "nagios" => { "server_role" => "monitoring" } in your roles directory
[2012-07-03 22:19:06 -0400] jameson: in the role that uses nagios
[2012-07-03 22:19:21 -0400] jameson: basically https://github.com/opscode-cookbooks/nagios/blob/master/recipes/client.rb#L27
[2012-07-03 22:19:28 -0400] jameson: that line, if you don't have a server_role
[2012-07-03 22:19:45 -0400] jameson: will not define mon_host
[2012-07-03 22:19:52 -0400] cnf: that's for the client
[2012-07-03 22:19:55 -0400] jameson: with will then break everything in templating
[2012-07-03 22:19:57 -0400] jameson: for the server?
[2012-07-03 22:20:10 -0400] kevmo: I have a cookbook with multiple recipe's in it.  I need to add a dependency for one recipe on another in the same cookbook.  I know that you can add dependencies to cookbooks for other cookbook's recipe's, but how do you do this for recipes within the same cookbook.
[2012-07-03 22:20:16 -0400] cnf: huh?
[2012-07-03 22:20:24 -0400] cnf: jameson: now i'm totally confused
[2012-07-03 22:20:46 -0400] jameson: cnf: the nagios recipe by default installs the client not the server
[2012-07-03 22:21:11 -0400] cnf: jameson: i have recipe[nagios::server]
[2012-07-03 22:21:14 -0400] jameson: kevmo: include_recipe
[2012-07-03 22:21:24 -0400] jameson: kevmo: see python's virtualenv
[2012-07-03 22:21:45 -0400] jameson: include_recipe "python::pip"
[2012-07-03 22:22:03 -0400] kevmo: thanks
[2012-07-03 22:22:46 -0400] erratic: swollow a whole live parakeet
[2012-07-03 22:22:53 -0400] cnf: jameson: i folowed the role example from https://github.com/opscode-cookbooks/nagios/blob/master/README.md
[2012-07-03 22:23:28 -0400] cnf: damnit >,<
[2012-07-03 22:23:36 -0400] jameson: cnf: and the data bag?
[2012-07-03 22:23:44 -0400] cnf: jameson: which one?
[2012-07-03 22:23:49 -0400] jameson: users
[2012-07-03 22:24:02 -0400] jameson: https://github.com/opscode-cookbooks/nagios/blob/master/README.md#users
[2012-07-03 22:24:02 -0400] cnf: yes, i have that
[2012-07-03 22:24:07 -0400] cnf: with all the attributes set
[2012-07-03 22:24:14 -0400] jameson: and you added it to hosted-chef?
[2012-07-03 22:24:39 -0400] cnf: of cours
[2012-07-03 22:24:39 -0400] erratic: ugh ugh ugh
[2012-07-03 22:24:40 -0400] cnf: e
[2012-07-03 22:24:42 -0400] erratic: bustin out phpstorm
[2012-07-03 22:25:22 -0400] cnf: i should just stop using other peoples cookbooks
[2012-07-03 22:27:51 -0400] barefoot: cnf: your pastebin indicates the entry in your users data_bag isnt there huh?
[2012-07-03 22:28:14 -0400] jameson: pastebin
[2012-07-03 22:28:21 -0400] jameson: knife data bag list
[2012-07-03 22:28:35 -0400] jameson: and knife data bag show users admin
[2012-07-03 22:28:46 -0400] jameson: or whatever the user you are using for nagios
[2012-07-03 22:28:59 -0400] jameson: and censor it for privacy
[2012-07-03 22:29:20 -0400] cnf: barefoot: yes... as many people have pointed out
[2012-07-03 22:29:27 -0400] cnf: barefoot: as i read, but it is there
[2012-07-03 22:29:44 -0400] jameson: show us the pastebin?
[2012-07-03 22:29:47 -0400] barefoot: cnf: pastebin what jameson is asking for, should be easy to sort
[2012-07-03 22:30:08 -0400] cnf: too late, i just deleted all the users
[2012-07-03 22:30:28 -0400] cnf: starting from one again
[2012-07-03 22:31:25 -0400] barefoot: heh
[2012-07-03 22:31:54 -0400] jameson: try
[2012-07-03 22:31:55 -0400] jameson: the
[2012-07-03 22:31:58 -0400] jameson: nagios-quick-start
[2012-07-03 22:32:39 -0400] barefoot: that cookbook is nice imho, I just got done tearing it apart to add nsca and making it work for our env
[2012-07-03 22:33:08 -0400] cnf: i'm not liking it much atm
[2012-07-03 22:33:40 -0400] jameson: if that cookbook doesn't work
[2012-07-03 22:33:54 -0400] jameson: like maybe chef... is really not working for you
[2012-07-03 22:33:58 -0400] jameson: it's the quick-start cookbook
[2012-07-03 22:34:26 -0400] achmed: are default attributes not available to a recipe in a chef run if they are from a different recipe?
[2012-07-03 22:35:01 -0400] cnf: maybe it isn't
[2012-07-03 22:35:10 -0400] cnf: it keeps bloody figting me
[2012-07-03 22:35:47 -0400] erratic: and now you've got your finger stuck in your bum
[2012-07-03 22:36:01 -0400] jameson: jtimberman: is there a reason the aws cookbook is on right_aws 2.1.0? or is it just one of those 'didn't test, you can try it' deal?
[2012-07-03 22:36:03 -0400] cnf: that just might be a better idea
[2012-07-03 22:36:23 -0400] cnf: maybe i should just try puppet
[2012-07-03 22:36:37 -0400] erratic: welp Im happy I uploaded something like 14 gigs of music to google music today
[2012-07-03 22:37:04 -0400] erratic: musical warez
[2012-07-03 22:38:04 -0400] cnf: i'm going to bed
[2012-07-03 22:38:11 -0400] cnf: this shit isn't working out
[2012-07-03 22:38:20 -0400] achmed: has anyone made recipes that do searches for nodes and then access attributes on the results?
[2012-07-03 22:38:23 -0400] erratic: night browski
[2012-07-03 22:38:27 -0400] achmed: i'm having all sorts of problems with it
[2012-07-03 22:38:33 -0400] erratic: broski *
[2012-07-03 22:38:36 -0400] erratic: whatevs
[2012-07-03 22:38:46 -0400] erratic: cnf paigeat@paigeat.info I'll try to help if I can
[2012-07-03 22:39:03 -0400] cnf: cheers
[2012-07-03 22:40:22 -0400] erratic: eeewwwwwwwwwwwwwwww
[2012-07-03 22:40:29 -0400] erratic: Ive got stalkers on google+
[2012-07-03 22:40:32 -0400] erratic: x_x
[2012-07-03 22:40:45 -0400] jameson: meh
[2012-07-03 22:40:57 -0400] erratic: you dont understand
[2012-07-03 22:41:04 -0400] erratic: X________x
[2012-07-03 22:41:16 -0400] erratic: do not want
[2012-07-03 22:41:32 -0400] jameson: achmed: i've not had issues with default attributes
[2012-07-03 22:41:40 -0400] jameson: achmed: are the nodes you are searching for already up?
[2012-07-03 22:41:50 -0400] jameson: that was my issue when I was doing it before
[2012-07-03 22:41:56 -0400] achmed: what do you mean already up?
[2012-07-03 22:42:06 -0400] jameson: was it provisioned, and registered with chef-server
[2012-07-03 22:42:15 -0400] achmed: yes.  for starters i'm just setting all the roles on one node
[2012-07-03 22:42:37 -0400] achmed: and doing the searches based on roles
[2012-07-03 22:42:44 -0400] achmed: because of the expanded run-list limitation
[2012-07-03 22:43:03 -0400] achmed: so, yeah, the search is definitely returning results
[2012-07-03 22:43:10 -0400] jameson: oh
[2012-07-03 22:43:21 -0400] jameson: are you getting key-map errors?
[2012-07-03 22:43:29 -0400] jameson: you have to do .to_hash
[2012-07-03 22:43:40 -0400] jameson: oh wait
[2012-07-03 22:43:43 -0400] jameson: nvm that was data bags
[2012-07-03 22:43:46 -0400] achmed: yeah
[2012-07-03 22:44:10 -0400] achmed: i'm rolling the chef client machine back to an earlier disk snapshot, i'll get the error back in a second
[2012-07-03 22:44:18 -0400] jameson: if it's all on one node, the node attributes may have been overwritten, what kind of errors are yougetting
[2012-07-03 22:48:23 -0400] erratic: Im like one of those stereotypical programmers that comes to work all stinky today
[2012-07-03 22:48:32 -0400] erratic: I need to take a fucking shower bad
[2012-07-03 22:48:42 -0400] erratic: Im about to dip out of here in an hour
[2012-07-03 22:48:44 -0400] achmed: =(
[2012-07-03 22:50:12 -0400] achmed: [2012-07-03T16:53:53-06:00] FATAL: NoMethodError: undefined method `[]' for nil:NilClass
[2012-07-03 22:50:39 -0400] erratic: -VV
[2012-07-03 22:50:55 -0400] gmcinnes: anyone aware of issues with installing chef-server on Debian 6?
[2012-07-03 22:51:01 -0400] gmcinnes: via the apt method?
[2012-07-03 22:51:10 -0400] achmed: what it doesnt like is         :mongo_port => mongo_node['mongodb']['port'],
[2012-07-03 22:51:15 -0400] achmed: in template variables
[2012-07-03 22:51:19 -0400] erratic: gmcinnes I know this sounds stupid but everyone keeps telling me use gems
[2012-07-03 22:51:33 -0400] gmcinnes: o rly.
[2012-07-03 22:51:47 -0400] erratic: yeah apparently apt packages are shite
[2012-07-03 22:52:01 -0400] ijonas: hi folks, when I try symlink two directories together I get a "Is a directory - /home/deploy/caseblocks/shared/vendor/bundle" - Does Chef only link files or also directories?
[2012-07-03 22:52:06 -0400] achmed: i have complete instructions for wheezy i wrote on our internal wiki
[2012-07-03 22:52:06 -0400] erratic: they seem to do ok for me on ubuntu but if I had a chance to start over I'd use gems
[2012-07-03 22:52:29 -0400] gmcinnes: it seems a bit silly to bother packaging them and having them suck too much to use :)
[2012-07-03 22:54:15 -0400] erratic: yes it does but considering gems is like the proverbial ruby package manager
[2012-07-03 22:54:42 -0400] erratic: likely to be less of a pain in the ass one would imagine
[2012-07-03 22:55:52 -0400] gmcinnes: possibly. I think its eeksy peeksy
[2012-07-03 22:56:29 -0400] erratic: I want some nitrous oxide
[2012-07-03 22:56:41 -0400] erratic: its too bad I cant do nitrous at work
[2012-07-03 22:56:45 -0400] erratic: or at all
[2012-07-03 22:56:48 -0400] erratic: I threw out my cracker
[2012-07-03 22:57:18 -0400] erratic: can just imagine my office floor being litered with spent nitrous cartidges
[2012-07-03 22:58:25 -0400] cwj: hippie crack
[2012-07-03 22:58:38 -0400] erratic: in motherfuckin deed
[2012-07-03 23:11:35 -0400] jan0232: i used rbenv to install ruby 1.9.3  passenger still gets installed in the system ruby gems where chef is also...
[2012-07-03 23:11:46 -0400] jan0232: i want my app to run on 1.9.3
[2012-07-03 23:11:53 -0400] jan0232: how would i do that?
[2012-07-03 23:13:26 -0400] pas256: Hi
[2012-07-03 23:13:34 -0400] pas256: Chef newbie here
[2012-07-03 23:16:03 -0400] erratic: novice
[2012-07-03 23:16:23 -0400] pas256: question about the chef-repo with hosted Chef the .chef directory should not be checked in right, since it will be different for each user?
[2012-07-03 23:16:52 -0400] erratic: checked in where?
[2012-07-03 23:16:55 -0400] erratic: git?
[2012-07-03 23:16:55 -0400] bawt_: git is http://wiki.opscode.com/display/opscode/Working+with+Git or awesome
[2012-07-03 23:16:58 -0400] pas256: yes git
[2012-07-03 23:17:05 -0400] erratic: add your own remote and push to that
[2012-07-03 23:17:07 -0400] erratic: thats what I do
[2012-07-03 23:17:08 -0400] cwj: pas256: depends on how you want to do things, but i include my .chef directory in my repo and exclude my key file
[2012-07-03 23:17:20 -0400] erratic: dont delete the remote thats there though
[2012-07-03 23:17:31 -0400] cwj: so documentation i share with my team says "put your key file here" and then everything more or less just works
[2012-07-03 23:17:33 -0400] monvillalon: Is it possible to use knife features directly from a ruby application. For example I currently have a bunch of bash scripts that automate knife, ec2 and local processes. And would would like to write them as ruby without parsing console output
[2012-07-03 23:17:55 -0400] cwj: monvillalon: http://wiki.opscode.com/display/chef/Knife+Exec
[2012-07-03 23:18:00 -0400] cwj: knife exec scripts
[2012-07-03 23:18:04 -0400] erratic: if you delete or change origin then knife wont work
[2012-07-03 23:18:05 -0400] pas256: Yeah I am find with adding my own remote it is more about multiple ppl using the same repo
[2012-07-03 23:18:59 -0400] erratic: cant you push the remote settings along with the repo to the server and just have all of your users push to that remote as well?
[2012-07-03 23:19:11 -0400] monvillalon: cwj: wow! seems really useful let me see if i grok this :)
[2012-07-03 23:19:25 -0400] cwj: monvillalon: i can probably dig up an example script if you need
[2012-07-03 23:21:06 -0400] erratic: god damn it Im so stinky
[2012-07-03 23:21:11 -0400] erratic: I need to go home and take a shower so bad
[2012-07-03 23:21:16 -0400] erratic: I wish we had showers here at work.
[2012-07-03 23:21:17 -0400] monvillalon: cwj: thanks! i may take you up on that, I need to write a script that can set up an environment. Including load balancers and have to jump between aws and chef code.  I was using bash and grep but Im investigating if i can do everything in ruby
[2012-07-03 23:22:12 -0400] cwj: i miss having showers at the office, discourages me from bike commuting
[2012-07-03 23:22:23 -0400] cwj: i still do it but then i feel stinky all day
[2012-07-03 23:22:34 -0400] cwj: hope the next office will have them
[2012-07-03 23:24:22 -0400] thehar: cwj: i agree
[2012-07-03 23:24:24 -0400] thehar: we haz no shower
[2012-07-03 23:24:31 -0400] monvillalon: cwj: The script basically has access to the chef server via the workstations knife installation and configuration.
[2012-07-03 23:26:42 -0400] cwj: thehar: are you using veewee
[2012-07-03 23:26:45 -0400] thehar: newp
[2012-07-03 23:26:48 -0400] cwj: gorsh
[2012-07-03 23:26:50 -0400] thehar: tried to use it and it wouldn't build shit
[2012-07-03 23:26:52 -0400] thehar: so
[2012-07-03 23:30:21 -0400] jan0232: this sucks..sometimes my chef-client run just halts...
[2012-07-03 23:30:24 -0400] erratic: plunk plunk plunk plunk plunk
[2012-07-03 23:30:27 -0400] jan0232: doing nothing
[2012-07-03 23:30:48 -0400] jan0232: i kill it, do it again and it works
[2012-07-03 23:30:52 -0400] jan0232: or not
[2012-07-03 23:30:53 -0400] jan0232: weird
[2012-07-03 23:31:14 -0400] monvillalon: cwj: This works :) Im going to start with a script that creates an ec2 instance, and creates an ami, delete the instance and node from chef.
[2012-07-03 23:32:14 -0400] monvillalon: jan0232: This may not be it, but are you sure your ssh connection is alive
[2012-07-03 23:33:10 -0400] monvillalon: thehar: I found a bug in veewee, with ubuntu at some point it gets stuck, and you just reload the machine and keeps going
[2012-07-03 23:33:28 -0400] jan0232: monvillalon: not really surebut at least nothing is happening, because my laptop shows no activity whatsoever. i'm using vagrant right now to test the stuff
[2012-07-03 23:34:03 -0400] thehar: monvillalon: orly?
[2012-07-03 23:34:10 -0400] thehar: maybe i was too lazy to do that and that's why
[2012-07-03 23:34:25 -0400] erratic: the cornerstone of every parrots diet is seed
[2012-07-03 23:34:29 -0400] monvillalon: jan0232: ServerAliveInterval 10 to the start of your ssh config and it should keep the ssh connection alive for ever
[2012-07-03 23:34:39 -0400] monvillalon: thehar: yeahp :)
[2012-07-03 23:34:46 -0400] thehar: i wish it exported amis
[2012-07-03 23:34:46 -0400] thehar: :)
[2012-07-03 23:34:51 -0400] monvillalon: thehar: I have an ubuntu 12 server that proves it :)
[2012-07-03 23:34:52 -0400] cwj: thehar: i have been using it to build boxes and it works fine, until now when it cant ssh into this vm for reasons unclear
[2012-07-03 23:36:02 -0400] thehar: neat
[2012-07-03 23:36:03 -0400] monvillalon: thehar: There is a plugin for vagrant that provisions ec2 , haven't used it, and no amis.  Im currently in that problem myself. But I'm going the api route
[2012-07-03 23:36:37 -0400] yfeldblum: monvillalon, yes you can (and arguably should) do all that in ruby
[2012-07-03 23:36:48 -0400] monvillalon: cwj: Did you read? my comment. If it can't ssh just restart the vm from vbox interface ill connect on reboot
[2012-07-03 23:37:00 -0400] jan0232: is the ruby version chef-client runs on independent of my app?? or do i need to bootstrap to that ruby version i want to use because i'm having a hard time getting rbenv to work :(
[2012-07-03 23:37:20 -0400] cwj: monvillalon: but veewee has already exited the build process because of authentication failure
[2012-07-03 23:37:22 -0400] monvillalon: yfeldblum: thanks for the encorougement :) I'm learning ruby as I go though :)
[2012-07-03 23:37:40 -0400] thehar: we are building a framework to do things in ec2 and build stuff but our problem is it takes 12-17 minutes to build the chef-server instance and that is a blocking thing
[2012-07-03 23:37:40 -0400] cwj: is there some way for me to tell it to try ssh again?
[2012-07-03 23:38:08 -0400] thehar: so trying to figure out how to make that easier without managing amis
[2012-07-03 23:38:17 -0400] monvillalon: cwj: Ohhh..did it stayed on waiting for ssh for a loooong time and then it stopped trying
[2012-07-03 23:38:21 -0400] yfeldblum: monvillalon, if you want to do it as a knife plugin, then ... you can use Fog to talk to AWS directly, which is what the various knife plugins do, and you can use the classes in the Chef namespace to talk to the chef-server api endpoint, which is what all the core knife tasks do
[2012-07-03 23:38:55 -0400] cwj: monvillalon: yeah this is different, i can 'ssh -p 7222 vagrant@localhost' no problem
[2012-07-03 23:39:05 -0400] monvillalon: yfeldblum: I promise to open source it, if I can manage it :)
[2012-07-03 23:39:07 -0400] cwj: using --debug did not show me more about why the authentication is failing
[2012-07-03 23:39:41 -0400] monvillalon: cwj: Yeah its different. I couldn't ssh at all, because of a nat bug in vbox
[2012-07-03 23:39:54 -0400] cwj: and im reusing most of the code for this basebox definition between a bunch of other definitions, which all build fine
[2012-07-03 23:39:56 -0400] monvillalon: cwj: I guess you have to start again.
[2012-07-03 23:40:36 -0400] yfeldblum: monvillalon, w/e, won't hold you to it; it's probably going to be highly tailored to the details of your environment and it's probably going to be mostly a straight-up example of usage of the Fog and Chef classes plus a little extra logic on top
[2012-07-03 23:40:41 -0400] monvillalon: cwj: where exactly did it stop? did you manage to run the postinstall.sh
[2012-07-03 23:42:04 -0400] monvillalon: yfeldblum: Lets see what comes out, first :)
[2012-07-03 23:42:14 -0400] monvillalon: yfeldblum: specially from a ruby newbie
[2012-07-03 23:43:12 -0400] cakehero: Should my service issue a reload command if I delete the unicorn.rb file here: http://pastebin.com/jPVbsFWu ?
[2012-07-03 23:43:22 -0400] cakehero: I'm using subscribes and trying to test the service subscribes attribute
[2012-07-03 23:43:23 -0400] cburyta: with centos i had an issue with that, had to do with persistent-net rules.
[2012-07-03 23:43:24 -0400] cburyta: http://www.cyberciti.biz/tips/vmware-linux-lost-eth0-after-cloning-image.html
[2012-07-03 23:43:52 -0400] cwj: monvillalon: no its not getting in to run any of my scripts
[2012-07-03 23:45:35 -0400] monvillalon: cwj: then that its not it, what are you building?
[2012-07-03 23:46:46 -0400] cwj: monvillalon: the precise64 definition from this repo https://github.com/needle/basebox
[2012-07-03 23:49:11 -0400] cwj: maybe i should take a deep breath and reboot my box
[2012-07-03 23:49:24 -0400] cwj: er laptop
[2012-07-03 23:49:39 -0400] erratic: yeah
[2012-07-03 23:49:41 -0400] erratic: that usually helps
[2012-07-03 23:49:52 -0400] monvillalon: cwj: That definition "inherits" from the ubuntu definition, do you have them side by side?
[2012-07-03 23:49:57 -0400] erratic: Im definitely going to go have a beer after this
[2012-07-03 23:50:00 -0400] erratic: and wind down
[2012-07-03 23:50:14 -0400] cwj: monvillalon: yeah it inherits a bunch of stuff, and precise32 builds fine
[2012-07-03 23:50:24 -0400] cwj: they both reuse the same code
[2012-07-03 23:50:29 -0400] cwj: or are supposed to
[2012-07-03 23:51:01 -0400] monvillalon: cwj: hmm, then Im sorry to say I'm out of ideas, good luck with that one
[2012-07-03 23:51:08 -0400] cwj: thanks :D
[2012-07-03 23:51:10 -0400] cwj: bbiab
[2012-07-03 23:51:11 -0400] erratic: IM out of here
[2012-07-03 23:51:14 -0400] erratic: later cwj
[2012-07-03 23:51:46 -0400] monvillalon: cwj: adding missing preseed.cfg symlink for precise64 definition
[2012-07-03 23:52:19 -0400] monvillalon: cwj: unless you are cameron :)
[2012-07-03 23:52:28 -0400] cwj: yes, yes i am
[2012-07-03 23:54:24 -0400] cwj: rebooting this macbook air is so fast its like it didnt happen

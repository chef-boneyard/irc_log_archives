[2012-07-02 00:28:48 -0400] flaccid: anyone seen a chef cookbook or recipe or what have you for changing a system's ulimit?
[2012-07-02 00:58:47 -0400] hoover_damm: should be done at image level or pre-chef
[2012-07-02 00:58:48 -0400] hoover_damm: tbh
[2012-07-02 00:59:22 -0400] hoover_damm: flaccid, i have a cookbook that does it just to do it... but I have it tied to a reboot notification
[2012-07-02 01:00:07 -0400] flaccid: hoover_damm: yeah i agree
[2012-07-02 01:00:15 -0400] flaccid: can i check out you cookbook
[2012-07-02 01:00:24 -0400] hoover_damm: it's not public and it's just a template
[2012-07-02 01:00:28 -0400] hoover_damm: I can gist what I do
[2012-07-02 01:00:30 -0400] hoover_damm: nothing fancy
[2012-07-02 01:00:48 -0400] flaccid: kk thanks
[2012-07-02 01:02:12 -0400] hoover_damm: https://gist.github.com/b14ead6768cc3aa735c9
[2012-07-02 01:02:21 -0400] flaccid: danke hoover_damm
[2012-07-02 01:03:19 -0400] flaccid: nofile = unlimit -n ?
[2012-07-02 01:05:44 -0400] flaccid: ah yeah, i get it
[2012-07-02 01:33:37 -0400] hoover_damm: yep
[2012-07-02 01:45:50 -0400] hakunin: great, now every time i google for something, i get my own conversations on this channel as first results
[2012-07-02 01:52:50 -0400] hoover_damm: is it my fault? :-P
[2012-07-02 01:53:02 -0400] hoover_damm: it's either mine or Opscode's
[2012-07-02 01:53:07 -0400] hoover_damm: only people who publicly log this channel
[2012-07-02 01:54:48 -0400] cwj: heheh i was having the the same issue today
[2012-07-02 01:57:18 -0400] hoover_damm: - site:*.likens.us
[2012-07-02 01:57:18 -0400] hoover_damm: ?
[2012-07-02 02:31:39 -0400] williamherry: does not_if compatible with execute resource?
[2012-07-02 02:33:55 -0400] flaccid: williamherry: afaik it is
[2012-07-02 02:34:56 -0400] williamherry: not_if "ls /opt/iso/#{image}" to check before run execute, am I wrong?
[2012-07-02 02:36:23 -0400] flaccid: not_if File.exists?() would be better
[2012-07-02 02:37:24 -0400] flaccid: not_if { File.exists?() } sorry
[2012-07-02 02:37:34 -0400] williamherry: flaccid, I already tried not_if {File.exists?("/opt/#{image}"), it work with directory, but not work with execute for me
[2012-07-02 02:37:37 -0400] flaccid: you'll see a comment on the not_if if ran in debug log level
[2012-07-02 02:38:03 -0400] flaccid: i'm not sure what the problem is sorry
[2012-07-02 02:38:22 -0400] williamherry: flaccid, I will try debug
[2012-07-02 04:03:14 -0400] cescalante: jameson: did you escape the ec2 outage okay?
[2012-07-02 04:56:18 -0400] hoover_damm: Most people had an outage this weekend
[2012-07-02 04:56:22 -0400] hoover_damm: either via ec2, or leapsecond
[2012-07-02 04:56:24 -0400] hoover_damm: including apple
[2012-07-02 04:58:11 -0400] amagee: Running chef-client has recently started just printing one line "[Mon, 02 Jul 2012 14:57:24 +1000] INFO: *** Chef 0.10.10 ***" and then hanging.  How can I debug this?
[2012-07-02 05:04:36 -0400] hoover_damm: try -l debug?
[2012-07-02 05:14:25 -0400] amagee: hoover_damm: ah thanks, wasn't aware of that option
[2012-07-02 05:23:07 -0400] BryanWB_: ohai chefs!
[2012-07-02 05:26:01 -0400] c_t: ohai
[2012-07-02 05:26:34 -0400] laurent\: bonjour !
[2012-07-02 05:30:39 -0400] BryanWB_: bonmeow?
[2012-07-02 05:39:33 -0400] laurent\: miaou !
[2012-07-02 05:40:33 -0400] c_t: Russian lolcats are probably pretty fun too
[2012-07-02 06:17:46 -0400] hoover_damm: c_t, the first rule of French lolcats is you don't talk about french lolcats.
[2012-07-02 06:18:11 -0400] hoover_damm: c_t, don't forget they are scrappers.
[2012-07-02 07:18:37 -0400] betelgeuse_: hey, can anyone tell me the difference between chef-solo and chef-server ?
[2012-07-02 07:19:20 -0400] betelgeuse_: coderanger
[2012-07-02 07:20:27 -0400] coderanger: Hmm?
[2012-07-02 07:21:05 -0400] betelgeuse_: i was a bit confused , what is the difference between chef-solo and chef-server
[2012-07-02 07:21:49 -0400] betelgeuse_: if i want to run an instance on aws what should i be using ?
[2012-07-02 07:23:37 -0400] coderanger: betelgeuse_: chef-server is the server component in the client/server model, solo is a standalone tool that doesn't talk to a chef-server and as such gives up all the cross-server indexing and transport features of Chef
[2012-07-02 07:23:45 -0400] coderanger: As to which to use, thats a very deep question :)
[2012-07-02 07:23:59 -0400] coderanger: And I have to go, so I'm afraid others will have to fill in that
[2012-07-02 07:24:12 -0400] railsraider: anyone had luck doing bundle install --without development test?
[2012-07-02 07:24:22 -0400] betelgeuse_: coderanger: thanks
[2012-07-02 07:24:25 -0400] railsraider: maybe theres some resource to handle bundle?
[2012-07-02 07:24:41 -0400] amagee: yeah.. chef-solo is easier to get up and running with, but chef-server is more powerful once you're used to it
[2012-07-02 07:24:46 -0400] railsraider: i get all the gems installed including dev and test gems
[2012-07-02 07:25:46 -0400] betelgeuse_: amagee: so they do the same work as such ?
[2012-07-02 07:25:48 -0400] jatan: amagee, it's just as powerful, it just manages your nodes
[2012-07-02 07:26:11 -0400] amagee: yeah, what jatan said
[2012-07-02 07:26:14 -0400] jatan: betelgeuse_, chef-solo manages chef on one OS instance, chef-server can manage many chefs running on multiple instances
[2012-07-02 07:26:40 -0400] jatan: depending on your security policies and etc, chef-solo might be your only option
[2012-07-02 07:26:44 -0400] betelgeuse_: jatan: thanks , i think that clears my doubt
[2012-07-02 07:26:47 -0400] jatan: and it's a very good option
[2012-07-02 07:27:11 -0400] betelgeuse_: actually i want to run an instance on aws , so i was looking on which one to use
[2012-07-02 07:27:30 -0400] jatan: if you're managing just that one instance, chef-solo makes so much more sense
[2012-07-02 07:27:37 -0400] jatan: less overhead and complexity
[2012-07-02 07:28:22 -0400] betelgeuse_: jatan: yes , i would want to launch only a single instance. So i will go ahead with chef-solo.
[2012-07-02 07:28:54 -0400] betelgeuse_: and it is open source right ?
[2012-07-02 07:30:55 -0400] jatan: yes it is
[2012-07-02 07:31:07 -0400] jatan: it's up on github, so if you got any patches, you're most welcome :)
[2012-07-02 07:31:54 -0400] betelgeuse_: I code only in python . So if i learn ruby someday i will try !
[2012-07-02 07:46:06 -0400] BryanWB_: erikh: http://devopsanywhere.blogspot.it/2012/07/stash-those-logs-set-up-logstash.html  setting up logstash w/ berkshelf
[2012-07-02 08:18:57 -0400] railsraider: why does execute block looks for an actual file? http://pastie.org/4186159
[2012-07-02 08:27:58 -0400] railsraider: is there a way to run a certain recipe with chef-client command?
[2012-07-02 08:56:29 -0400] frank_: all, is there a GOOD way to tell the debian package provider to get a version from eg squeeze-backports?
[2012-07-02 08:56:47 -0400] frank_: because the options "-t squeeze-backports" is quite stupid
[2012-07-02 08:57:46 -0400] Mithrandir: package "foo/squeeze-backports" might do it, except I suspect the provider's not smart enough to parse that
[2012-07-02 08:57:52 -0400] Mithrandir: so it'll fall down a well
[2012-07-02 08:57:56 -0400] Mithrandir: you could hard code the version
[2012-07-02 08:58:12 -0400] frank_: Mithrandir: myes, but then I'd have to change recipe for each new version
[2012-07-02 08:58:34 -0400] Mithrandir: yes
[2012-07-02 08:58:44 -0400] frank_: problem now is that if you have repoX and repoY, and package is in both, but version of repoY is higher than in repoX, you can't force it to install version in repoX
[2012-07-02 08:59:03 -0400] frank_: as it determines highest version, and specificly wants to install that version
[2012-07-02 08:59:29 -0400] huhongbo: i connect 15 nodes and now the solr cpu 140%,is it normal?
[2012-07-02 09:00:01 -0400] frank_: instead of just doing apt-get -t squueze-backports FOO
[2012-07-02 09:00:39 -0400] frank_: huhongbo: login to your box, stop ntpd (if running) and issue date -s "$(date)"
[2012-07-02 09:00:48 -0400] frank_: huhongbo: leap second bug that affects combo linux+java
[2012-07-02 09:02:03 -0400] huhongbo: frank_:thanks ,cpu is ok now ,then I should start ntp or not ?
[2012-07-02 09:02:05 -0400] Mithrandir: frank_: you can tune apt's preferences file
[2012-07-02 09:02:28 -0400] frank_:  huhongbo yes, restart ntp if it was running before
[2012-07-02 09:02:45 -0400] frank_: huhongbo: you just need to kill it becuase otherwise the date -s will not work as expexcted
[2012-07-02 09:02:51 -0400] frank_: Mithrandir: myes
[2012-07-02 09:03:17 -0400] frank_: Mithrandir: but is there a specific reason chef does a lookup for the version first?
[2012-07-02 09:03:38 -0400] frank_: Mithrandir: instead of just installing the package and have the packaging system work out the version it needs?
[2012-07-02 09:06:21 -0400] huhongbo: frank_:thanks ,solved the cpu problem
[2012-07-02 09:08:11 -0400] Mithrandir: frank_: unsure.
[2012-07-02 10:19:59 -0400] amian84: Hi, i've a problem and maybe someone could be help me
[2012-07-02 10:55:52 -0400] _aeris_: amian84 > if you don't ask your question, nobody could help you =)
[2012-07-02 10:56:22 -0400] _aeris_: irc is an asynchronous transport protocol =)
[2012-07-02 11:50:26 -0400] intinig: hello everyone!
[2012-07-02 11:51:16 -0400] specialsauce: o/
[2012-07-02 11:51:19 -0400] intinig: I have played with chef several times, but one thing escapes my mind. Maybe there's a reason for it and I don't know it. Anyway: Why when I do a knife bootstrap the node isn't setup so it runs chef-client every n- minutes so I can run more recipes on it?
[2012-07-02 11:57:45 -0400] amian84: I've chef 10.12.0-1 and ohai 6.14.0-1 in a ubuntu maverick. When I launch chef-client, always runs correctly, and gets all attributes from ohai, but when I demonized chef-client, I lost attributes values, as hostname, os_value, kernel,...
[2012-07-02 11:58:55 -0400] specialsauce: intinig, I guess that's because there's multiple workflows possible - to run the cleint pull daemonised, to cron it, to run it manually, to trigger the pull from the server remotely
[2012-07-02 11:59:11 -0400] amian84: I think that the problem it's in the ruby path environments and when ohai runs require_plugins don't find the path of plugins
[2012-07-02 12:01:09 -0400] intinig: specialsauce: but is there a way, using knife bootstrap to bootstrap it so one of the workflows is in place? Like having it daemonized?
[2012-07-02 12:03:35 -0400] specialsauce: intinig, I'm afraid I don't use knife bootstrap myself but I'm sure you could use a plugin/modified knife bootstrap script to start up the daemon or do a one-off run or whatever
[2012-07-02 12:04:02 -0400] intinig: specialsauce: thx I'll google around for a while to come up with an answer
[2012-07-02 12:04:31 -0400] specialsauce: intinig, there's an example replacement bootstrap script here - https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/ubuntu10.04-apt.erb
[2012-07-02 12:05:00 -0400] specialsauce: doesn't do exactly what you want but shows you really simple examples for how you can integrate stuff into your bootstrap script
[2012-07-02 12:08:13 -0400] intinig: specialsauce: I found an easier way. I can specify an initial run-list with knife bootstrap. I just have it run recipe[chef-client] on bootstrap and then it gets daemonized
[2012-07-02 12:08:16 -0400] intinig: thx :)
[2012-07-02 12:09:18 -0400] Guest49067: chef beginner here. Is there a way to introspect and retrieve all default-attributes on a particular role/recipe ? Im trying to figure out a way so that users can know what values to fill in
[2012-07-02 12:12:20 -0400] wonko_be: a small usability question: if I do knife node edit, and when saving, my json syntax is invalid, is there a way to reopen my editor with the content I tried to submit instead of removing all my changes?
[2012-07-02 12:13:03 -0400] Guest49067: I can do the above from an admin client , knife search only allows me to search if i know the attribute name
[2012-07-02 12:13:27 -0400] wonko_be: or some question like "syntax error - reopen in editor (y/n)"
[2012-07-02 12:14:26 -0400] workmad3: wonko_be: /wi2
[2012-07-02 12:14:29 -0400] workmad3: oops, sorry
[2012-07-02 12:14:42 -0400] workmad3: window-switch typo
[2012-07-02 12:37:07 -0400] UukGoblin: hello
[2012-07-02 12:38:01 -0400] UukGoblin: I'm reading up about Chef, and I'm looking for some docs/tutorials/guides/info on how to manage already running servers
[2012-07-02 12:38:26 -0400] UukGoblin: i.e. what happens when I want to manually override a config file in a server and stop chef-client from trying to overwrite it
[2012-07-02 12:38:43 -0400] UukGoblin: or what do I do if I want to do it for a bunch of servers etc
[2012-07-02 12:39:09 -0400] UukGoblin: or if for instance I want to examine what the expanded config file will look like before chef restarts a daemon
[2012-07-02 12:39:36 -0400] UukGoblin: this sort of stuff - as most docs seem to be oriented around installing new boxes from scratch
[2012-07-02 12:41:20 -0400] specialsauce: UukGoblin, you have some control over chef since you can stop the daemon if you really want to update a file manually or whatever, but that path lies a world of pain
[2012-07-02 12:41:45 -0400] specialsauce: its much less painful if you manage something completely through Chef. I would manage one file through chef completely rather than 100 files partially
[2012-07-02 12:42:34 -0400] UukGoblin: specialsauce, well yes, but speaking from some experience, it's often the case that you want to fix an issue quickly rather than go through multiple levels of abstraction, i.e. deployment procedures etc
[2012-07-02 12:43:12 -0400] specialsauce: UukGoblin. Agreed, so you would stop the chef client temporarily in that instance normally, and then backport the change into Chef. Also, personally I haven't installed Chef on any existing hosts, I rebuilt hosts in parallel using Chef and tweaked them until perfect, then susbstitued them in. That way you *kn0w* you can rebuild the host from scratch
[2012-07-02 12:43:17 -0400] UukGoblin: in any case, I'm just looking for docs, I want to see what options Chef has for such scenarios (i.e. the example of stopping chef-client)
[2012-07-02 12:43:33 -0400] specialsauce: UukGoblin, there is no standard workflow for that, you roll your own
[2012-07-02 12:43:51 -0400] UukGoblin: hm
[2012-07-02 12:44:17 -0400] UukGoblin: well OK, for instance, what commands should I run after I update an attribute?
[2012-07-02 12:44:30 -0400] UukGoblin: when I want to, let's say, do it step by step
[2012-07-02 12:44:30 -0400] specialsauce: on the chef client?
[2012-07-02 12:44:54 -0400] UukGoblin: i.e. see the new expanded config file on a target machine, and restart/reload the service after I visually say it's fine
[2012-07-02 12:45:24 -0400] UukGoblin: well I guess I'd use knife to upload the new attribute to the Chef Server, but then what do I type to get chef-clients to pull that change and roll it out slowly?
[2012-07-02 12:45:30 -0400] specialsauce: UukGoblin, normally people automate all that, by having a notify on the file resource to restart the service
[2012-07-02 12:45:38 -0400] UukGoblin: ah ah ah
[2012-07-02 12:45:53 -0400] UukGoblin: but it's never been the case that I wanted to update ALL SERVERS at once
[2012-07-02 12:45:53 -0400] specialsauce: the stuff you plan to do manually by checking people normally do using a CI pipeline or whatever
[2012-07-02 12:46:25 -0400] UukGoblin: everywhere I worked, we upgraded one server first, made sure it's all OK on graphs, and then went on to the second
[2012-07-02 12:46:38 -0400] specialsauce: the chef client is pull and uses a splay interval but if that's not enough, you could trigger a pull by one or more clients from the server and not run chef-client as a daemon if you wanted
[2012-07-02 12:46:50 -0400] UukGoblin: right
[2012-07-02 12:46:56 -0400] UukGoblin: and that's the sort of info I'm looking for :-)
[2012-07-02 12:47:14 -0400] UukGoblin: I found on a blog that it's got to do with convergence strategies or sth
[2012-07-02 12:47:19 -0400] specialsauce: or, even better, have that scripted, so that the whole thing takes one out of the pool, chefs it, checks it, puts it back in the pool
[2012-07-02 12:47:20 -0400] UukGoblin: I'd like to learn more about it :-)
[2012-07-02 12:47:30 -0400] specialsauce: but that's pretty advanced/not how a lot of people start off with chef
[2012-07-02 12:47:57 -0400] UukGoblin: hm.
[2012-07-02 12:48:15 -0400] UukGoblin: yeah that'd be perfect, also tackling the issue of writing simple tests for running services
[2012-07-02 12:48:50 -0400] specialsauce: yep, we integrate with nagios here to check that stuff
[2012-07-02 12:49:18 -0400] UukGoblin: ah, fun
[2012-07-02 12:50:01 -0400] UukGoblin: ok so basically that stuff is not yet in the official docs
[2012-07-02 12:50:27 -0400] UukGoblin: but this 'splay interval' you mentioned - where can I read about it?
[2012-07-02 12:51:10 -0400] specialsauce: I could be wrong but I think because that kind of thing isn't really the core function of Chef and is more about how you go about a workflow in your anvironment, its not covered in any of the docs I've seen, but by all means trawl the chef wiki
[2012-07-02 12:51:33 -0400] UukGoblin: right
[2012-07-02 12:53:09 -0400] UukGoblin: well thanks for the info, I'll look for some other resources on that :-)
[2012-07-02 12:54:09 -0400] specialsauce: UukGoblin, np, I'd ask around how other people are doing it - here or the mailing list are both good resources
[2012-07-02 12:54:56 -0400] UukGoblin: kk
[2012-07-02 12:55:07 -0400] UukGoblin: I'm basically preparing for an interview I have with a company that uses chef
[2012-07-02 12:55:15 -0400] UukGoblin: so I probably won't go poking mailing lists just yet ;-]
[2012-07-02 12:58:04 -0400] railsraider: knife bootstrap does not pick up the default distro template for ubuntu 10.04
[2012-07-02 13:13:49 -0400] intinig: I have a cookbook (rvm) that I installed from the community site. It requires apt, but when I trie to run one of its recipes it didn't work, so I went into the logs and saw that it needs to run apt-get update before. Is this a problem with the cookbook I am using or should I run apt-get the first time using some other cookbook/recipe?
[2012-07-02 13:39:42 -0400] cnf: man, i really can't get my head around chef
[2012-07-02 13:41:57 -0400] cnf: how would I for example set up 3 machines running apache, with each 5 different vhosts?
[2012-07-02 13:49:35 -0400] PapaSierra: morning all, i've worked with chef before but never written a recipe. i would like to learn. to start simply i thought i'd try to install a gem, namely capistrano using chef. please can someone point me to a tutorial where i can learn how to get chef to do this the "right way": "gem install capistrano"
[2012-07-02 13:57:26 -0400] atomic-penguin: PapaSierra, your best bet is to take a look at the Resources page
[2012-07-02 13:57:29 -0400] atomic-penguin: resources?
[2012-07-02 13:57:29 -0400] bawt_: resources is http://wiki.opscode.com/display/chef/Resources
[2012-07-02 13:58:28 -0400] atomic-penguin: PapaSierra, there you should find a Packages resource, which includes 'chef_gem' or 'gem_package'
[2012-07-02 14:00:38 -0400] PapaSierra: thanks atomic-penguin, looking now...
[2012-07-02 14:01:28 -0400] atomic-penguin: PapaSierra, the difference between those one is to hook the gem into the Chef ruby environment (chef_gem), the other to hook it into the system's ruby (gem_package)
[2012-07-02 14:02:26 -0400] PapaSierra: ah, so i would want a gem_package, right?
[2012-07-02 14:03:05 -0400] atomic-penguin: PapaSierra, if you need capistrano for the chef recipe, then use chef_gem.  Otherwise, you would want to use gem_package.
[2012-07-02 14:04:24 -0400] PapaSierra: i want chef-solo to provision a lamp server, and when done i want capistrano to be available to me on that server. i could be wrong but i presume that i would want to use gem_package for that
[2012-07-02 14:05:56 -0400] atomic-penguin: PapaSierra, I don't know your use case, and personally have never used cap.  If you need to 'require capistrano' and write 'cap deploy' code in your recipe, I would presume you'd want chef_gem
[2012-07-02 14:07:35 -0400] PapaSierra: ok, i appreciate what you're saying. i don't want to run "cap deploy" *in* a recipe. i want capistrano installed and then later when the dev server is completely provisioned i, as a human, will manually call $ cap deploy
[2012-07-02 14:07:50 -0400] PapaSierra: hence why i say gem_package, instead of chef_gem
[2012-07-02 14:08:02 -0400] atomic-penguin: PapaSierra, in that case, yes you would.
[2012-07-02 14:08:24 -0400] PapaSierra: i don't quite understand: provider       The class name of a provider to use for this resource.
[2012-07-02 14:09:32 -0400] PapaSierra: atomic-penguin it looks like all i need is: package "capistrano"
[2012-07-02 14:09:43 -0400] atomic-penguin: PapaSierra, most of the time you won't have to bother with that.  It should match a provider based on your OS platform and filetype
[2012-07-02 14:10:49 -0400] atomic-penguin: PapaSierra, for example apt/yum on debian/rhel respectively
[2012-07-02 14:11:12 -0400] PapaSierra: ah ok, understood
[2012-07-02 14:12:22 -0400] atomic-penguin: In this case, I would advise `gem_package "capistrano"` and use a version option to install a specific version of the gem
[2012-07-02 14:19:01 -0400] dyer: Anyone have any idea why omnibus is bitching that it can't find the chef gem?  I thought omnibus was supposed to ship everything bundled  ( https://gist.github.com/bec686331fa188cbe131 )
[2012-07-02 14:34:53 -0400] dyer: Bueller ?
[2012-07-02 14:35:43 -0400] atomic-penguin: dyer, did you try forking a new shell after the install?
[2012-07-02 14:35:47 -0400] dyer: yes
[2012-07-02 14:36:05 -0400] atomic-penguin: dyer, did the package create /usr/bin/chef-client?
[2012-07-02 14:36:22 -0400] atomic-penguin: dyer, or symlink it in some way?
[2012-07-02 14:36:51 -0400] dyer: symlink
[2012-07-02 14:36:52 -0400] dyer: https://gist.github.com/f3143594d2508acb5368
[2012-07-02 14:37:42 -0400] atomic-penguin: Isn't the new omnibus installed in /opt/opscode?
[2012-07-02 14:38:21 -0400] dyer: not on my system
[2012-07-02 14:38:24 -0400] dyer: centos 5.8
[2012-07-02 14:38:55 -0400] spox: should be /opt/chef if using 10.12 i believe
[2012-07-02 14:39:52 -0400] atomic-penguin: Thats weird, because everytime I've install chef-full 10.12 on CentOS/RHEL it goes into /opt/opscode.  Previous versions installed to /opt/chef
[2012-07-02 14:40:53 -0400] dyer: no, I think u have it backwards
[2012-07-02 14:41:01 -0400] dyer: I just removed 10.12 and installed 10.8 and got /opt/opscode
[2012-07-02 14:41:21 -0400] dyer: removed 10.8 and installed 10.12 and got /opt/chef
[2012-07-02 14:41:35 -0400] dyer: both fail
[2012-07-02 14:41:42 -0400] dyer: when I try to run chef-client
[2012-07-02 14:42:18 -0400] atomic-penguin: Perhaps, I'm running on little sleep.  Haven't had power for 3 or 4 days
[2012-07-02 14:49:13 -0400] dyer: Yikes
[2012-07-02 14:50:29 -0400] atomic-penguin: Getting inconsistent results there.  A second re-install of the omnibus packages seems to clear it up
[2012-07-02 14:50:41 -0400] atomic-penguin: Also on Rhel/Centos 5
[2012-07-02 14:50:54 -0400] atomic-penguin: x86 arch
[2012-07-02 14:51:12 -0400] dyer: second reinstall?
[2012-07-02 14:51:16 -0400] dyer: like remove and install ?
[2012-07-02 14:51:19 -0400] atomic-penguin: dyer, yes
[2012-07-02 14:51:22 -0400] dyer: did that
[2012-07-02 14:51:24 -0400] dyer: several times
[2012-07-02 14:51:26 -0400] dyer: I'll try it again
[2012-07-02 14:53:45 -0400] hcastro: is there a process to get chef/devops meetups on http://wiki.opscode.com/display/chef/Community+Events without being on meetup?
[2012-07-02 15:21:00 -0400] dyer: atomic-penguin, no dice
[2012-07-02 15:22:41 -0400] dyer: https://gist.github.com/7c09daec5c21a37ecc6f
[2012-07-02 15:25:50 -0400] atomic-penguin: dyer, I saw a similar error on x86_64.  it cleared however, after doing an exit, then su -
[2012-07-02 15:26:26 -0400] dyer: I just closed the termainl
[2012-07-02 15:26:30 -0400] dyer: and reopened it
[2012-07-02 15:26:31 -0400] dyer: same thing
[2012-07-02 15:26:43 -0400] atomic-penguin: I wish I could reproduce it to help you
[2012-07-02 15:27:24 -0400] dyer: #fml
[2012-07-02 15:38:16 -0400] jtimberman: dyer:
[2012-07-02 15:38:24 -0400] dyer: I think I figured  it out actually
[2012-07-02 15:38:36 -0400] dyer: I think RVM was screwing things up
[2012-07-02 15:38:51 -0400] jtimberman: dyer: oops - the 10.12 package installs in /opt/chef, before that in /opt/opscode.
[2012-07-02 15:40:06 -0400] jtimberman: dyer: use dpkg or rpm on the package name (chef or chef-full, respectively) to verify the path. if it's not correct please open a ticket under the package component in the chef project.
[2012-07-02 15:46:49 -0400] jan-scorp1on: hi. just getting started with chef and have one simple question i know now how i can setup my infrastructure and deploy an app with chef now, what if i have 2 different apps. would i need to install 2 chef-servers? or have two "organizations" in hosted-chef?? or would it make sense to manage multiple apps within the same organization??
[2012-07-02 15:47:58 -0400] jameson: you should be able to mage multiple apps within the same org
[2012-07-02 15:48:36 -0400] jan-scorp1on: ok
[2012-07-02 15:48:58 -0400] jan-scorp1on: would it make sense to separate those though??
[2012-07-02 15:49:01 -0400] jameson: you may run into issues with different variations on cookbooks and data_bags being open to both app
[2012-07-02 15:50:00 -0400] jameson: but then you are writing the recipes/cookbooks yourself, and access to the databags are limited to that scope..
[2012-07-02 15:50:41 -0400] jameson: I think there are some management tools as well.
[2012-07-02 15:51:58 -0400] jan-scorp1on: ok so basically i can install one chef server and manage everything from thereand with a little bit of care i should be able to manage multiple applications' servers with it...
[2012-07-02 15:52:30 -0400] jan-scorp1on: heh, it really doesn't matter to me, i'm just curious :)
[2012-07-02 15:52:40 -0400] jan-scorp1on: it's kind of a steep learning curve ;)
[2012-07-02 15:52:52 -0400] jameson: yeah, that shouldn't be an issue
[2012-07-02 15:53:01 -0400] jan-scorp1on: ok, thx
[2012-07-02 15:53:02 -0400] jameson: yeah, the initial learning curve is a bit rough
[2012-07-02 15:53:46 -0400] jan-scorp1on: but way cool :)
[2012-07-02 15:55:52 -0400] jan-scorp1on: hmm i wonder how i delete an organization from the hosted-chef :(
[2012-07-02 15:58:57 -0400] jameson: i think you would have to ask opscode to do that
[2012-07-02 16:00:44 -0400] jan-scorp1on: i added another organization just as a test
[2012-07-02 16:00:53 -0400] jan-scorp1on: i can keep it but won't use it
[2012-07-02 16:00:54 -0400] jan-scorp1on: so
[2012-07-02 16:01:03 -0400] jan-scorp1on: well i guess it doesn't matter :)
[2012-07-02 16:01:43 -0400] martha: anyone use chef on solaris?  I've written providers for pkgutil packages and for zones and I'd love someone else to try them out and give me some feedback.
[2012-07-02 16:21:25 -0400] miketheman: it's a new dawn, it's a new day, a new life.
[2012-07-02 16:21:47 -0400] miketheman: mdadm provider doesn't seem to create an mdadm.conf file - is that just me?
[2012-07-02 16:23:03 -0400] miketheman: I know lusis ran into some mdadm problems here: http://tickets.opscode.com/browse/CHEF-2546
[2012-07-02 16:23:22 -0400] thom: it doesn't, you need to generate it yourself
[2012-07-02 16:23:41 -0400] miketheman: would be VERY helpful to put a note about that in http://wiki.opscode.com/display/chef/Resources#Resources-Mdadm
[2012-07-02 16:30:33 -0400] ashb: miketheman: its a wiki :)
[2012-07-02 16:55:12 -0400] miah: hi
[2012-07-02 16:55:49 -0400] miah: martha: post to the mailing list, post them on github, the community site, etc. you'll get feedback =)
[2012-07-02 16:57:23 -0400] martha: miah:  I've posted them on the community site.  I'm planning on posting to the mailing list,.
[2012-07-02 16:58:21 -0400] miah: awesome
[2012-07-02 16:59:11 -0400] martha: I'm working on zpool and zfs lwrps first, though
[2012-07-02 16:59:35 -0400] martha: I also have a solaris bootstrap, but I'm not sure how to share that
[2012-07-02 17:03:42 -0400] miah: advertise, post to github =)
[2012-07-02 17:03:55 -0400] miah: if there isn't a solaris bootstrap included with chef, file a ticket and submit a pull request
[2012-07-02 17:04:00 -0400] miah: contributing?
[2012-07-02 17:04:00 -0400] bawt_: contributing is http://wiki.opscode.com/display/chef/How+to+Contribute
[2012-07-02 17:06:46 -0400] miketheman: martha: very interested in the solaris stuff.
[2012-07-02 17:08:00 -0400] martha: miketheman:  http://community.opscode.com/cookbooks/pkgutil  and http://community.opscode.com/cookbooks/zone
[2012-07-02 17:08:22 -0400] martha: I've only tested on solaris 5.10 x86
[2012-07-02 17:08:33 -0400] martha: but I'd love some else to try it out
[2012-07-02 17:09:22 -0400] jessicab: i thought the chef-full bootstrap worked with solaris?
[2012-07-02 17:14:39 -0400] martha: jessicab:  it doesn't for me, on a clean solaris install
[2012-07-02 17:15:35 -0400] martha: solaris doesn't come with wget or curl or gnu awk, at least by default
[2012-07-02 17:16:27 -0400] martha: my bootstrap uses opencsw
[2012-07-02 17:21:32 -0400] jessicab: martha - hm weird.. definitely sounds like a bug then, that was supposed to work with solaris too
[2012-07-02 17:33:51 -0400] hoover_damm: 5.10?
[2012-07-02 17:34:03 -0400] hoover_damm: lol
[2012-07-02 17:38:02 -0400] coderanger: hoover_damm: Solaris 9 is still in use
[2012-07-02 17:38:06 -0400] coderanger: >_<
[2012-07-02 17:38:30 -0400] jblaine: Hi all. Chef newbie failing: https://gist.github.com/3034481
[2012-07-02 17:38:37 -0400] jblaine: Any ideas welcome.
[2012-07-02 17:40:11 -0400] _aeris_: hello #chef
[2012-07-02 17:40:13 -0400] jblaine: Only really looking for a solution to the syntax error ;) I know attributes should ideally not be in the recipe code, etc.
[2012-07-02 17:40:29 -0400] _aeris_: is there any simple way to activate SSL on chef webui and api ?
[2012-07-02 17:41:10 -0400] miketheman: jblaine: maybe change "value_for_patform (" to "value_for_platform(" - remove the space?
[2012-07-02 17:41:29 -0400] jblaine: _aeris_: Have you read: http://wiki.opscode.com/display/chef/How+to+Proxy+Chef+Server+with+Apache
[2012-07-02 17:41:38 -0400] miketheman: (ignore my typo in platform) :)
[2012-07-02 17:42:02 -0400] _aeris_: yes, but this is not i named  a simple way  =)
[2012-07-02 17:44:11 -0400] danryan: Anyone using the tags feature of Chef?
[2012-07-02 17:45:39 -0400] jblaine: miketheman: Remarkably, that solved it. Is that a Ruby requirement?
[2012-07-02 17:46:41 -0400] miketheman: jblaine: I think it's part of the definition of the function
[2012-07-02 17:51:40 -0400] hoover_damm: coderanger, that's silly
[2012-07-02 18:06:43 -0400] josephholsten: anyone had experience digging into memory bloat issues with chef? chef-rundeck is hovering around a gig of resident memory and I've only got ~75 hosts
[2012-07-02 18:13:48 -0400] miah: search returns a full array of attributes, if chef-rundeck does a bunch of searches, this makes sense.
[2012-07-02 18:15:40 -0400] Ober: if you were to dump node to a json file, where would be a good place to do it to ensure everything has been evaluated
[2012-07-02 18:18:08 -0400] barefoot: Ober: "the place" should have nothing to do with it?
[2012-07-02 18:18:56 -0400] josephholsten: miah: it's got this https://github.com/opscode/chef-rundeck/blob/master/lib/chef-rundeck.rb#L40
[2012-07-02 18:19:36 -0400] josephholsten: that is, it calls `Chef::Node.list(true)`
[2012-07-02 18:21:54 -0400] Ober: barefoot: ok. some things in chef cookbooks do not appear instantiated.
[2012-07-02 18:23:12 -0400] barefoot: Ober: you are talking about doing `knife node show $host -Fj > filename.json` right?
[2012-07-02 18:23:18 -0400] hoover_damm: josephholsten, right it has to load all the nodes and then make them available to rundeck
[2012-07-02 18:23:31 -0400] hoover_damm: the fact it's doing it in xml is neat
[2012-07-02 18:24:48 -0400] Ober: chef solo
[2012-07-02 18:25:14 -0400] Ober: with a File.open("/tmp/node.json","w") { |f| f.write(node.to_json) }
[2012-07-02 18:30:56 -0400] nphase_: Anyone had problems with knife cookbook github install lately? "ERROR: The object you are looking for could not be found" is what im getting after the "Removing pre-existing version" step
[2012-07-02 18:31:05 -0400] nphase_: even after cleaning up so there is no pre-existing version
[2012-07-02 18:35:22 -0400] mjreed: OK, what's up with this:
[2012-07-02 18:35:22 -0400] mjreed: $ ssh newbox.mydomain sudo id
[2012-07-02 18:35:22 -0400] mjreed: /ssh
[2012-07-02 18:35:39 -0400] erikh: ssh newbox.mydomain 'sudo id'
[2012-07-02 18:35:43 -0400] mjreed: uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk)
[2012-07-02 18:35:57 -0400] mjreed: so that works
[2012-07-02 18:36:05 -0400] mjreed: but when I do
[2012-07-02 18:36:05 -0400] mjreed: knife bootstrap newbox.mydomain -x $USER --sudo
[2012-07-02 18:36:10 -0400] mjreed: I get a "knife sudo password:" prompt
[2012-07-02 18:36:26 -0400] erikh: does the username you're sshing from match $USER?
[2012-07-02 18:36:35 -0400] mjreed: yes.
[2012-07-02 18:36:47 -0400] erikh: hrm, no idea then
[2012-07-02 18:37:01 -0400] erikh: --sudo won't desire a password unless necessary
[2012-07-02 18:37:14 -0400] erikh: you could have a pty issue, depends on your sudoers configuration.
[2012-07-02 18:38:02 -0400] hoover_damm: syslog (authorization) logs maybe relevent
[2012-07-02 18:38:11 -0400] hoover_damm: into why sudo won't let it
[2012-07-02 18:41:37 -0400] mjreed: ah, sudoers has bash disallowed.  OK, that I can fix.  Thanks.
[2012-07-02 19:00:47 -0400] jhulten: If I need to secure the couchdb backend of a chef server do I put the username and password in couchdb_url?
[2012-07-02 19:18:57 -0400] masterkorp: http://p.rapimg.com/ipix_new/pkw/93/934/p6893493_2x.jpg
[2012-07-02 19:19:01 -0400] masterkorp: oops
[2012-07-02 19:26:21 -0400] miketheman: nice
[2012-07-02 19:35:37 -0400] jperry2: anyone ever see this when starting their chef-server?
[2012-07-02 19:35:43 -0400] jperry2: this: /usr/lib/ruby/gems/1.8/gems/bunny-0.8.0/lib/qrack/client.rb:191:in `read': failed to allocate memory (NoMemoryError)
[2012-07-02 19:44:17 -0400] jperry2: anyone have a recommendation for getting a chef server up and running locally on my workstation and have it sync everything i.e. cookbooks, environments, roles, etc?
[2012-07-02 19:44:54 -0400] jperry2: I would like it to be using vagrant
[2012-07-02 19:46:02 -0400] miketheman: anyone know if there's an option to pass to `mount` resource to not set the volume to fsck?
[2012-07-02 19:47:52 -0400] _aeris_: miketheman > last value in fstab, but in mount directly, i don't know
[2012-07-02 19:49:46 -0400] miah: http://wiki.opscode.com/display/chef/Resources#Resources-Mount
[2012-07-02 19:50:31 -0400] miketheman: miah:  duh, thanks. I've re-read that page 5 times today, and eyes glossed over the dump/pass options
[2012-07-02 20:04:02 -0400] cnf: hmz
[2012-07-02 20:04:17 -0400] cnf: does chef need every cookbook another cookbook _might_ need?
[2012-07-02 20:07:37 -0400] miah: if its listed as a dependancy, it should be on the chef server as well.
[2012-07-02 20:08:01 -0400] miah: so, if you have a 100% rhel shop, but a cookbook requires the apt cookbook, then yes. you will have the apt cookbook on your server as well.
[2012-07-02 20:08:14 -0400] cnf: hmm, balls
[2012-07-02 20:08:20 -0400] miah: its a minor issue
[2012-07-02 20:08:30 -0400] miah: surely, your server already has lots of un-needed packages installed.
[2012-07-02 20:08:31 -0400] bdha: Of course, the first cookbook probably won't work if it assumes apt in the first place.
[2012-07-02 20:08:49 -0400] cnf: it assumes apache2 AND nginx
[2012-07-02 20:08:54 -0400] cnf: one of those will not be used
[2012-07-02 20:09:37 -0400] miah: well, people attempt to write cookbooks to be usable by more than one platform. cookbook authors shouldn't make assumptions about _your_ architecture.
[2012-07-02 20:10:11 -0400] miketheman: "good cookbook authors"
[2012-07-02 20:10:35 -0400] Mithrandir: I think they should.  Good cookbooks integrate well with each other, which means making assumptions and/or interfaces.
[2012-07-02 20:10:37 -0400] miah: miketheman: there are a few of us
[2012-07-02 20:10:42 -0400] miah: most people who write cookbooks shouldn't be ;)
[2012-07-02 20:11:05 -0400] barefoot: hehe
[2012-07-02 20:11:07 -0400] miah: Mithrandir: i think its good to push best practices
[2012-07-02 20:11:27 -0400] miah: but, most cookbooks implement antipatterns and aren't idempotent
[2012-07-02 20:11:44 -0400] miah: so i dont want those cookbooks to make assumptions about my architecture
[2012-07-02 20:11:50 -0400] bdha: Most of the community cookbooks assume Ubuntu as a rule.
[2012-07-02 20:11:53 -0400] miah: true
[2012-07-02 20:12:01 -0400] bdha: But modifying them to support whatever is pretty trivial.
[2012-07-02 20:12:09 -0400] miah: depends on the codebase
[2012-07-02 20:12:22 -0400] miah: the nginx cookbook == somebody threw up
[2012-07-02 20:12:23 -0400] bdha: Sure. But most of this stuff is "install something and configure it", the latter being the hard part.
[2012-07-02 20:12:30 -0400] bdha: Haven't seen it.
[2012-07-02 20:12:37 -0400] miah: dont look, your eyes will bleed
[2012-07-02 20:12:38 -0400] bdha: I love the cookbooks from Basho and Boundary.
[2012-07-02 20:12:43 -0400] bdha: So, so nice.
[2012-07-02 20:13:15 -0400] c_t: the opscode apache2 cookbook takes the tactic of using debian/ubuntu style configs rather than trying to make RH type ones work too
[2012-07-02 20:13:54 -0400] Mithrandir: miah: well, take a random, trivial cookbook, like a cookbook for a simple web server.  You want that integrated with your monitoring system, right?  So it needs to either know about all the interfaces all the nagios/icinga/reconnoiter/whatever cookbooks are out there or make an assumption that you're using nagios, that your nagios has its configs in /etc/nagios3/conf.d and so on.
[2012-07-02 20:15:16 -0400] Mithrandir: trying to abstract or generalise that so any app can be monitored by any monitoring system isn't really feasible, I think.  And even if you could, it'd mean massive complexity and a not particularly well tested cookbook for the obscure cases.
[2012-07-02 20:15:20 -0400] cnf: imo, there are still many gaps in the docs
[2012-07-02 20:15:22 -0400] miah: Mithrandir: your nagios cookbook should expose an attribute specifying its config_dir
[2012-07-02 20:15:30 -0400] miah: so, you don't have to make so many assumptions
[2012-07-02 20:15:35 -0400] miah: besides, you can also search for attributes
[2012-07-02 20:15:49 -0400] miah: and your cookbook can support all of those monitoring systems. its just most people don't try to cover all possible cases.
[2012-07-02 20:16:18 -0400] Mithrandir: I think it's better to not try to support it all.  Define what you support and support that well
[2012-07-02 20:16:46 -0400] Mithrandir: also, how does the nagios server know which nodes should go into the webserver hostgroup?  That comes down to local policy very quickly.
[2012-07-02 20:17:08 -0400] miah: true
[2012-07-02 20:17:29 -0400] miah: you can expose more details in your roles. people just don't consider it.
[2012-07-02 20:18:03 -0400] Mithrandir: yup, lots of (reasonable) ways to build the structure.
[2012-07-02 20:18:07 -0400] miah: so.. https://github.com/miah/nginx/blob/master/recipes/source.rb vs https://github.com/miah/nginx/blob/master/recipes/_install_from_source.rb
[2012-07-02 20:18:10 -0400] miah: which one is more sane?
[2012-07-02 20:18:49 -0400] cnf: o,O
[2012-07-02 20:18:51 -0400] miah: source.rb has all the problems that make me hate most cookbooks
[2012-07-02 20:19:03 -0400] miah: DONT WRITE MONOLITHIC BULLSHIT PEOPLE
[2012-07-02 20:19:39 -0400] miah: not to mention.. most cookbooks fail DRY so badly
[2012-07-02 20:19:53 -0400] Mithrandir: that one makes me very sad, yes.
[2012-07-02 20:19:58 -0400] miah: how many times is the _same_ 'user' resource defined in the nginx cookbook?
[2012-07-02 20:20:55 -0400] miah: also, people fail to define things and just let the 'package' make assumptions
[2012-07-02 20:21:06 -0400] miah: i don't care if the package is going to create the user, i still want chef to manage it ultimately.
[2012-07-02 20:21:09 -0400] Mithrandir: I think building stuff from source is sadness too, but that's a completely separate discussion. :-)
[2012-07-02 20:21:18 -0400] miah: Mithrandir: oh. i agree completely.
[2012-07-02 20:21:54 -0400] miah: i'm thinking about other ways to handle this issue. possible a cookbook that does fpm. or just a rake task to do fpm.
[2012-07-02 20:22:18 -0400] miah: but mostly, i want to give flexibility. because asking people to actually rollout jenkins, and their own apt/yum repo is beyond the skills of many
[2012-07-02 20:22:41 -0400] Mithrandir: yeah, I kinda want to do hosted apt/yum
[2012-07-02 20:23:03 -0400] cnf: i still struggle with ruby, let alone "proper cookbook methodology"
[2012-07-02 20:23:05 -0400] cnf: :P
[2012-07-02 20:23:13 -0400] miah: i will be rolling that out in my internal infrastructure eventually. but for now, i want to ensure my nginx servers are a. the latest awesome shit. b. compiled with the options we need.
[2012-07-02 20:24:09 -0400] miah: i still think this is required reading for most people wanting to write cookbooks: http://blog.nistu.de/2012/03/04/reusability-in-configuration-management-systems
[2012-07-02 20:24:58 -0400] cnf: yeah, so far not a single cookbook i have tried is usable as is.
[2012-07-02 20:25:07 -0400] cnf: kind of a pain, when one is starting out
[2012-07-02 20:25:10 -0400] miah: cnf: 'the well grounded rubyist', 'eloquent ruby', 'design patterns in ruby'
[2012-07-02 20:25:14 -0400] miah: go forth and read =)
[2012-07-02 20:25:18 -0400] cnf: meh
[2012-07-02 20:25:28 -0400] cnf: just enough ruby to get by
[2012-07-02 20:26:08 -0400] miah: true. i somewhat cringe when foodfight show talks about how many cookbooks are out there.. because 95% of them are garbage
[2012-07-02 20:26:16 -0400] miah: im somewhat of an elitest snob, sorries =)
[2012-07-02 20:26:30 -0400] miah: at the same time, i'm excited that people are super excited about chef
[2012-07-02 20:26:46 -0400] cnf: i _really_ don't want to master yet another language just so i can manage my systems
[2012-07-02 20:26:46 -0400] miah: i just also feel like you should take some of that excitement and write code you can be proud of
[2012-07-02 20:26:54 -0400] cnf: i'll learn it like i learn a DSL
[2012-07-02 20:26:57 -0400] atomic-penguin: I've almost finished reading "Why's Poignant Guide"
[2012-07-02 20:27:15 -0400] miah: people who are operations engineers, but who are afraid of being polyglots: please work elsewhere
[2012-07-02 20:27:21 -0400] cnf: but i don't want to become master at ruby, just so i can have a functional conf management sys
[2012-07-02 20:27:29 -0400] miah: good luck with that then
[2012-07-02 20:27:32 -0400] atomic-penguin: It seems bat-shit insane until he ties it into code examples, then its like, that totally makes sense
[2012-07-02 20:27:46 -0400] cnf: miah: you know, that is a SHIT attitude
[2012-07-02 20:28:09 -0400] miah: i think the world would be a better place if people works in what _they loved_
[2012-07-02 20:28:27 -0400] miah: being unwilling to learn something is a sign that you dont love your work
[2012-07-02 20:28:30 -0400] Mithrandir: you don't have to be a master of ruby to write decent cookbooks.
[2012-07-02 20:28:36 -0400] cnf: i got plenty to learn
[2012-07-02 20:28:36 -0400] miah: Mithrandir: exactly
[2012-07-02 20:28:46 -0400] miah: i've been _writing_ ruby <1 year
[2012-07-02 20:28:56 -0400] Mithrandir: even I, who is by no means a master programmer is able to write decent cookbooks and decent ruby if I take the time to do so.
[2012-07-02 20:28:57 -0400] cnf: python being one
[2012-07-02 20:29:01 -0400] cnf: and perl being another
[2012-07-02 20:29:09 -0400] miah: nobody really needs to learn perl though
[2012-07-02 20:29:12 -0400] miah: :P
[2012-07-02 20:29:12 -0400] cnf: rather not add ruby as well
[2012-07-02 20:29:20 -0400] cnf: miah: legacy does exist
[2012-07-02 20:29:22 -0400] Mithrandir: I think perl's a wonderful language, but it shouldn't be your first.
[2012-07-02 20:29:53 -0400] Mithrandir: if you know a smattering of python and ruby and C and shell and such, picking up a decent perl isn't really hard either.  They're all quite similar.
[2012-07-02 20:30:03 -0400] miketheman: ruby by far has been the most approachable language I've learned
[2012-07-02 20:30:11 -0400] cnf: miketheman: i disagree
[2012-07-02 20:30:23 -0400] miketheman: cnf: that's ok. :)
[2012-07-02 20:30:27 -0400] yfeldblum: automation comprises writing software which automates; to write software, one typically wants to use a high-level language in which one is proficient
[2012-07-02 20:30:35 -0400] miah: ^
[2012-07-02 20:31:21 -0400] miah: i personally don't trust myself to do the brakes on my car so i pay somebody to do that. but i will do general maintenance. i also wouldn't want somebody who can barely write a shell script to write automation code for my infrastructure.
[2012-07-02 20:31:23 -0400] miketheman: further on yfeldblum - you have to learn _something_ to write your automation in, if one is not proficient in a particular language
[2012-07-02 20:31:25 -0400] Mithrandir: it'd be cool if somebody looked at reviving the code holoway wrote to be able to write recipes in non-ruby languages.
[2012-07-02 20:31:26 -0400] geekbri: I enjoy perl, but you know what... go and try to maintain some perl code from somebody elses projects and you'll have a better idea of some of its difficulties
[2012-07-02 20:31:49 -0400] cnf: i do my own brakes on my bike
[2012-07-02 20:31:50 -0400] miketheman: hah - "maintain perl".
[2012-07-02 20:31:51 -0400] Mithrandir: geekbri: shit programmers will write shit code in any language.
[2012-07-02 20:31:52 -0400] cnf: because i can
[2012-07-02 20:31:52 -0400] miah: geekbri: lol yup.
[2012-07-02 20:31:59 -0400] miah: Mithrandir: true
[2012-07-02 20:32:09 -0400] miah: i think so long as you have standards in your code, others can pick it up.
[2012-07-02 20:32:10 -0400] cnf: and i can do quite a bit more than "barely write a shell script"
[2012-07-02 20:32:23 -0400] geekbri: Mithrandir: yes but in perl I find more often than not even the good programmers can write very unreadable code.
[2012-07-02 20:32:24 -0400] Mithrandir: perl's just gotten more of a reputation for it because you can write horrendously complicated one-liners that do wonderful things
[2012-07-02 20:32:28 -0400] miah: but if you can't even conform to some level of standard in your code.. good luck.
[2012-07-02 20:32:38 -0400] Mithrandir: and you have perl golf and such, so the perl community has taken some pride in obfuscating it.
[2012-07-02 20:32:40 -0400] miah: people <3 internal variables in perl.
[2012-07-02 20:33:01 -0400] bdha: Pobox has been a Perl company since day 1.
[2012-07-02 20:33:02 -0400] bdha: 15 years ago.
[2012-07-02 20:33:07 -0400] bdha: You can write maintainable Perl.
[2012-07-02 20:33:14 -0400] miah: bdha: certainly
[2012-07-02 20:33:15 -0400] Mithrandir: geekbri: they _can_, yes.  If they do, they're pissing in their paints, so to speak.
[2012-07-02 20:33:16 -0400] atomic-penguin: There is nothing wrong with Perl
[2012-07-02 20:33:34 -0400] Mithrandir: uhm, pants.
[2012-07-02 20:33:41 -0400] Mithrandir: not paints.  That would just be weird.
[2012-07-02 20:33:46 -0400] bdha: Rule 34.
[2012-07-02 20:33:55 -0400] yfeldblum: simple things can be done simply: a simple knobless single-platform package/template/service cookbook won't be terribly hard for a new rubyist
[2012-07-02 20:33:58 -0400] geekbri: Also, Ruby lends itself very well to creating DSL's
[2012-07-02 20:34:10 -0400] miah: yfeldblum: true true
[2012-07-02 20:34:24 -0400] miah: i started out by writing really simple cookbooks
[2012-07-02 20:34:24 -0400] Mithrandir: http://search.cpan.org/~holoway/Chef-0.01/lib/Chef.pm
[2012-07-02 20:34:45 -0400] bdha: Mithrandir: :)
[2012-07-02 20:34:58 -0400] yfeldblum: complex things need to be done simply as well; this typically means writing many waterproof abstractions in a language in which one is proficient
[2012-07-02 20:34:59 -0400] geekbri: I think only using 1 language for cookbooks is a huge advantage.  If made it possible to write cookbooks in 4 different languages, that just makes it more difficult for anybody just starting to use community cookbooks
[2012-07-02 20:35:09 -0400] geekbri: now suddenly instead of learning 1 language they dont know, they may have to learn 3 languages they dont know.
[2012-07-02 20:35:13 -0400] miah: probably my simplest / ugliest cookbook written in ~15 minutes. https://github.com/miah/chef-stud/blob/master/recipes/default.rb
[2012-07-02 20:35:14 -0400] Mithrandir: most cookbooks are "install packages 1-4, dump a config file, restart service if file changes", IME. :-)
[2012-07-02 20:35:38 -0400] Mithrandir: geekbri: sysadmins are polyglots.
[2012-07-02 20:35:54 -0400] geekbri: if thats so, why be so concerned about ruby being the language you write cookbooks in :-P
[2012-07-02 20:36:37 -0400] miah: we are polyglots by nature. everything has different configuration formats. there are tons of different protocols. many programming languages.
[2012-07-02 20:36:55 -0400] Mithrandir: clearly all configuration files should be s-expressions.  Much simpler.
[2012-07-02 20:37:01 -0400] bdha: My devs write most of our chef.
[2012-07-02 20:37:31 -0400] bdha: On the other hand: http://news.perlfoundation.org/2012/05/cooking-perl-with-chef---grant-2.html
[2012-07-02 20:38:08 -0400] geekbri: clearly all our configuration files should be written in the sendmail macro language
[2012-07-02 20:38:18 -0400] bdha: Dude.
[2012-07-02 20:38:19 -0400] yfeldblum: Mithrandir, unless your s-expressions are Turing-complete
[2012-07-02 20:38:28 -0400] geekbri: m4 macros for all the things
[2012-07-02 20:38:30 -0400] bdha: geekbri: http://advent.rjbs.manxome.org/2010/2010-12-10.html
[2012-07-02 20:38:39 -0400] c_t: write your configs in postscript, dur
[2012-07-02 20:38:49 -0400] cnf: think i remember why i didn't like this channel
[2012-07-02 20:38:51 -0400] geekbri: bdha: what is this DEVIL WORK
[2012-07-02 20:38:59 -0400] geekbri: wow somebody is grumpy
[2012-07-02 20:39:02 -0400] Mithrandir: yfeldblum: clearly they should be.
[2012-07-02 20:39:10 -0400] yfeldblum: cnf, there really isn't much to be said, other than that Chef is a framework in which to write system automation programs ... programs
[2012-07-02 20:39:32 -0400] yfeldblum: Mithrandir, i believe they are
[2012-07-02 20:40:11 -0400] cnf: yfeldblum: doesn't excuse this channel
[2012-07-02 20:40:15 -0400] cnf: but hey
[2012-07-02 20:40:33 -0400] bdha: cnf: What's the problem now?
[2012-07-02 20:40:52 -0400] bdha: geekbri: Blame Meng! (The same guy who wrote SPF!) ;-)
[2012-07-02 20:41:15 -0400] cnf: bdha: nothing you are interested in
[2012-07-02 20:41:18 -0400] cnf: but as i said
[2012-07-02 20:41:24 -0400] bdha: shrug, ok.
[2012-07-02 20:43:07 -0400] miah: i think if you _only ever want to deal with a dsl_ : go use puppet
[2012-07-02 20:43:12 -0400] miah: :P
[2012-07-02 20:43:42 -0400] yfeldblum: miah, how do you define "monolithic bullshit"?
[2012-07-02 20:44:08 -0400] Mithrandir: it's like porn.  You know it when you see it?
[2012-07-02 20:44:22 -0400] thehar: is there controversy happening in here today?
[2012-07-02 20:44:28 -0400] geekbri: miah: heh yup, although isn't puppet is built on top of ruby.
[2012-07-02 20:44:35 -0400] geekbri: whoa me i accidentally the english
[2012-07-02 20:44:40 -0400] Mithrandir: it's really hard to define qualitative criteria.
[2012-07-02 20:44:46 -0400] miah: yfeldblum: cookbooks that do _everything_ in a single recipe.
[2012-07-02 20:44:53 -0400] miah: geekbri: yup. =)
[2012-07-02 20:45:30 -0400] geekbri: Honestly I hadn't written a single line of ruby 6 months ago, and now I've submitted patches for knife-ec2 and written cookbooks that seem to be used by others, and I routinely read the chef source
[2012-07-02 20:45:46 -0400] yfeldblum: geekbri, yes, the puppet "providers" are ruby, but the puppet "recipes" are not ruby
[2012-07-02 20:45:46 -0400] geekbri: Sometimes you gotta learn something new, its not so terrible.
[2012-07-02 20:46:00 -0400] yfeldblum: geekbri, so the basic puppet use-case is non-ruby
[2012-07-02 20:46:04 -0400] geekbri: yfeldblum: yes true, but its still a brand new DSL to learn
[2012-07-02 20:46:16 -0400] miah: its a dsl without iterators! =)
[2012-07-02 20:46:29 -0400] geekbri: yfeldblum: so fundamentally whats the difference between learning some custom DSL and just learning a DSL thats basically ruby with extras in it.
[2012-07-02 20:46:31 -0400] yfeldblum: geekbri, yes, and the subject of the conversation is learning a brand new DSL vs learning a brand new programming language
[2012-07-02 20:46:32 -0400] geekbri: nothin!
[2012-07-02 20:46:46 -0400] geekbri: yfeldblum: at least the second adds potential future value :-P
[2012-07-02 20:46:52 -0400] yfeldblum: geekbri, ruby is extremely complicated when it comes to the rules of the language
[2012-07-02 20:46:55 -0400] miah: thats what i've loved about chef. i learned the "dsl" but in reality i was learning ruby.
[2012-07-02 20:47:20 -0400] yfeldblum: geekbri, DSLs like puppet's are likely to be extremely simple
[2012-07-02 20:47:26 -0400] yfeldblum: geekbri, at least, in comparison
[2012-07-02 20:47:44 -0400] geekbri: Different strokes for different folks I guess.
[2012-07-02 20:47:57 -0400] yfeldblum: geekbri, yep
[2012-07-02 20:48:02 -0400] Mithrandir: I think puppet's dsl is much harder to read and write than ruby is.
[2012-07-02 20:48:04 -0400] geekbri: building scalable automated systems is not simple, so I guess maybe my expectation is that people might be ok with learning a slightly complex language.
[2012-07-02 20:48:33 -0400] yfeldblum: Mithrandir, the rules of puppet's DSL are straightforward; the rules of Ruby the language are anything but
[2012-07-02 20:49:24 -0400] yfeldblum: Mithrandir, the rules have got little to do with intuitability in the normal case, and everything to do with ability to understand what the problem is in the failure case
[2012-07-02 20:49:39 -0400] Mithrandir: yfeldblum: I don't find it that way.  The ways that you can't redeclare resources, except when you realise them and how virtual and exported resources play in is really complex.
[2012-07-02 20:50:11 -0400] Mithrandir: I don't believe that anything is intuitive, so that label is, IMO, meaningless.
[2012-07-02 20:52:00 -0400] kolektiv: afternoon all. does anyone have any suggestions for installing software from binary archives?
[2012-07-02 20:52:12 -0400] kolektiv: specifically, i don't want to to it every time chef runs!
[2012-07-02 20:52:34 -0400] barefoot: package?
[2012-07-02 20:52:35 -0400] kolektiv: (steps: extract, overwrite some files with templates, leave alone!)
[2012-07-02 20:52:55 -0400] kolektiv: barefoot: the software isn't available as a package, but as a nightly binary archive
[2012-07-02 20:53:26 -0400] geekbri: kolektiv: there are many different ways to make that process idempotent.  One would be to touch a file somehwere when it is installed and only install if the file doesn't exist
[2012-07-02 20:53:33 -0400] barefoot: oh "archive" my bad
[2012-07-02 20:53:35 -0400] yfeldblum: Mithrandir, but you don't have to deal with strings-vs-symbols-vs-messages, multiple ways to do string-interpolation, multiple ways to create arrays, local scopes, ivar scopes, etc
[2012-07-02 20:54:07 -0400] yfeldblum: Mithrandir, once all of that is second-nature to you, it's easy; until then, it's a lot of confusion
[2012-07-02 20:54:18 -0400] yfeldblum: Mithrandir, but that certainly depends on the person in question
[2012-07-02 20:54:29 -0400] Mithrandir: yfeldblum: except when you do.  string interpolation changed in puppet's dsl between 2.6 and 2.7
[2012-07-02 20:55:06 -0400] Mithrandir: oh, and you have local scope too, sure, you have '' strings and "" strings, so you have to think about string interpolation.
[2012-07-02 20:55:34 -0400] Mithrandir: strings vs symbols is an annoyance in ruby, sure.  Not sure what you mean by messages in that context.
[2012-07-02 20:55:36 -0400] kolektiv: geekbri: yeah, is there a canonical way of doing that? seems like a common use case
[2012-07-02 20:55:37 -0400] yfeldblum: Mithrandir, don't know puppet in that level of detail, but fair enough; i'm actually discussing a theoretical, idealized, external DSL vs a DSL embedded into a complex language like Ruby
[2012-07-02 20:55:56 -0400] Mithrandir: yfeldblum: while I'm talking about this pesky real world. ;-)
[2012-07-02 20:56:20 -0400] geekbri: kolektiv: I don't think there is a canonical way, but it is certainly a commonly used way :).  Depends on the software.  Some software is nice and will respond to -v and tell you what version it is, so you can check for the existence of the binary and run that to see what version you are on
[2012-07-02 20:56:26 -0400] yfeldblum: Mithrandir, "calling a method" is actually done by sending an object a message: `my_obj.message_name(arg1, arg2, key1: val1)`
[2012-07-02 20:56:45 -0400] kolektiv: geekbri: no such luck on a -v - it's a java service which will be hung under tomcat
[2012-07-02 20:56:59 -0400] Mithrandir: yfeldblum: oh, that bit.  That's not too hard for me to grok, but then, I've written some thousands lines of code.
[2012-07-02 20:57:13 -0400] yfeldblum: Mithrandir, my point exactly
[2012-07-02 20:57:36 -0400] geekbri: kolektiv: the ole' touch a file has worked well in the past for me, you just may want to build in a way to "force" a deploy of the binary... or you could always just go in and delete the file manually
[2012-07-02 20:57:40 -0400] yfeldblum: Mithrandir, the relative difficulty varies by the person
[2012-07-02 20:57:57 -0400] Mithrandir: yfeldblum: sure, hence my "it's not that way for me", rather than "no, it's not". :-)
[2012-07-02 20:58:07 -0400] yfeldblum: Mithrandir, not that way for me either :P
[2012-07-02 20:59:51 -0400] kolektiv: geekbri: yeah i think i'll be experimenting a bit
[2012-07-02 21:02:22 -0400] geekbri: I was under the impression most people understood the difference between calling a method, and sending a message to an object that then calls the method that message represents.
[2012-07-02 21:03:35 -0400] Mithrandir: miah: that lsb.rb link is a bit sad, since /etc/lsb-release isn't the interface, the binary in /usr/bin is.
[2012-07-02 21:03:56 -0400] miah: Mithrandir: yup
[2012-07-02 21:04:40 -0400] Mithrandir: it is sad that you need the full lsb stuff just to get lsb_release, though
[2012-07-02 21:05:02 -0400] erratic: if I want to push a binary to a box I can't use template
[2012-07-02 21:05:08 -0400] erratic: I think it changes the binary
[2012-07-02 21:05:13 -0400] erratic: is there another way I can do it
[2012-07-02 21:05:18 -0400] erratic: from a recipe?
[2012-07-02 21:05:31 -0400] erratic: I have a precompiled binary that I want to push to several of my servers
[2012-07-02 21:08:19 -0400] Babar: yeah, ld will change the binary
[2012-07-02 21:08:26 -0400] Babar: just push it only if it doesn't exist
[2012-07-02 21:08:38 -0400] erratic: I cant push it at all
[2012-07-02 21:08:39 -0400] Babar: or... if it's newer than some date
[2012-07-02 21:08:48 -0400] erratic: it wont even run if I try to push it that way
[2012-07-02 21:08:50 -0400] jameson: anyone here use the mongodb cookbook?
[2012-07-02 21:08:59 -0400] erratic: something about templating changes it
[2012-07-02 21:09:07 -0400] Babar: that's not normal. It should run. Unless it's the wrong architecture
[2012-07-02 21:09:08 -0400] Babar: oh... templates?!
[2012-07-02 21:09:10 -0400] erratic: its like asci vs binary mode
[2012-07-02 21:09:15 -0400] Mithrandir: erratic: cookbook_file?
[2012-07-02 21:09:15 -0400] Babar: why would you template a binary? It's a file!
[2012-07-02 21:09:23 -0400] erratic: Mithrandir thanks
[2012-07-02 21:09:52 -0400] Babar: right, you wrote template. It just made so little sense I occulted that fact, sorry
[2012-07-02 21:10:15 -0400] erratic: http://pastie.org/4189366
[2012-07-02 21:10:21 -0400] erratic: its ok
[2012-07-02 21:10:28 -0400] erratic: I didn't know any better thats why I did it
[2012-07-02 21:10:29 -0400] erratic: hehe
[2012-07-02 21:10:51 -0400] Babar: you don't even need the source if the file has the same name
[2012-07-02 21:10:59 -0400] jameson: anyone here use/deploy mongodb with chef?
[2012-07-02 21:11:20 -0400] jameson: because is it just me
[2012-07-02 21:11:34 -0400] jameson: or does it error with it's own init script
[2012-07-02 21:14:29 -0400] erratic: this cloudfuse cookbook I made is pretty thugged out
[2012-07-02 21:14:31 -0400] hoover_damm: which one? there's many different cookbooks
[2012-07-02 21:14:45 -0400] hoover_damm: most of them suck in different ways
[2012-07-02 21:20:21 -0400] jameson: hoover_damm: the one provided by edelight
[2012-07-02 21:20:42 -0400] jameson: so many cookbooks are half abandoned ;_;
[2012-07-02 21:20:50 -0400] jameson: while taking up the good names
[2012-07-02 21:21:29 -0400] hoover_damm: jameson, tell me about it
[2012-07-02 21:21:32 -0400] erratic: jameson I customize the crap out of all of mine anyway
[2012-07-02 21:21:41 -0400] hoover_damm: jameson, how does the init break?
[2012-07-02 21:23:41 -0400] jameson: it doesn't break persay
[2012-07-02 21:24:04 -0400] jameson: it fails 3 times (because it inits itself twice), and the 3rd one errors, and then succeeds
[2012-07-02 21:25:19 -0400] jameson: that's the funny/terrible part about it
[2012-07-02 21:25:41 -0400] jameson: it still manages to start the mongodb, and the reason it works is because they did ignore_failure
[2012-07-02 21:25:53 -0400] jameson: http://pastebin.com/FGJ8s41R
[2012-07-02 21:25:58 -0400] jameson: there's the pastebin :|
[2012-07-02 21:38:08 -0400] cnf: dno who posted http://blog.nistu.de/2012/03/04/reusability-in-configuration-management-systems but hoorah!
[2012-07-02 21:40:05 -0400] miah: i did
[2012-07-02 21:40:29 -0400] miah: because i try to read / listen to everything chef / configuration management related =)
[2012-07-02 21:42:26 -0400] jameson: there really should be a like a... do's and don't for cookbooks beyond passing foodcritic and such ~_~
[2012-07-02 21:42:38 -0400] jameson: i've been writing mine to be extensible
[2012-07-02 21:42:58 -0400] jameson: then writing another cookbook on top of it that customizes it for own user
[2012-07-02 21:43:45 -0400] jameson: *our own
[2012-07-02 21:44:44 -0400] cnf: current public cookbooks are appalling, sadly
[2012-07-02 21:45:02 -0400] miah: jameson: i am writing something about it
[2012-07-02 21:45:15 -0400] miah: but im slow at writing, and lack the confidence that i have in programming
[2012-07-02 21:45:34 -0400] miah: others should definitely write about it as well though
[2012-07-02 21:46:30 -0400] jameson: I can't write because my blogposts tend to end as rants... :X
[2012-07-02 21:49:39 -0400] erratic: ohai to me
[2012-07-02 21:50:12 -0400] hoover_damm: remremember to not judge cookbooks until people judge yours
[2012-07-02 21:51:53 -0400] tzn: I'm having problems with subversion resource over ssh+svn, it runs as different user, but despite ssh keys present keeps asking for password and host fingerprint confirmation
[2012-07-02 21:52:03 -0400] tzn: anyone had similar problem?
[2012-07-02 21:55:28 -0400] scairbus: ok, I know I'm missing something obvious. when chef-client errors out and emails a report, how do I change the destination address? I tried adding an event handler to the chef client cookbook with a new email address but that didn't work
[2012-07-02 21:56:40 -0400] jtimberman: cnf: that seems a bit unfair.
[2012-07-02 21:56:47 -0400] thehar: @to_address?
[2012-07-02 21:56:52 -0400] miah: hoover_damm: im fine with that
[2012-07-02 21:57:02 -0400] erratic: ohai
[2012-07-02 21:58:07 -0400] cnf: jtimberman: maybe, but i think it's true
[2012-07-02 21:58:40 -0400] hoover_damm: miah, I wasn't saying that to you
[2012-07-02 21:59:03 -0400] hoover_damm: Having written chef cookbooks since mid 2009 I can tell you that I have gotten better, worse, lazier and a lot crustier
[2012-07-02 21:59:17 -0400] erratic: haz needs to be a chef command
[2012-07-02 21:59:25 -0400] hoover_damm: having the prettiest cookbook on the block doesn't bother me anymore
[2012-07-02 21:59:33 -0400] erratic: so I have an excuse to start saying haz all the time again
[2012-07-02 21:59:34 -0400] thehar: lol
[2012-07-02 21:59:45 -0400] javawidget: lol
[2012-07-02 21:59:46 -0400] hoover_damm: life is ugly
[2012-07-02 21:59:56 -0400] hoover_damm: start with what works, and expand from there
[2012-07-02 21:59:58 -0400] javawidget: I've been at it for about a month...
[2012-07-02 22:00:02 -0400] miah: hoover_damm: true. im just saying, i take criticism. so if you find problems please judge/bug me.
[2012-07-02 22:00:06 -0400] javawidget: I don't think I could get any crustier..
[2012-07-02 22:00:19 -0400] miah: i just want to get crusier ;)
[2012-07-02 22:00:32 -0400] erratic: lol
[2012-07-02 22:00:33 -0400] erratic: you would
[2012-07-02 22:00:49 -0400] hoover_damm: miah, truthfully i'm a asshole in this regard.  If you have an issue with a cookbook I'm going to ask for a patch...  If you need help with a cookbook I wrote... you better have a stacktrace handy or I won't bother
[2012-07-02 22:01:05 -0400] miah: hoover_damm: of course
[2012-07-02 22:01:16 -0400] hoover_damm: Unless i'm getting paid, I don't have to do anything for anyone.
[2012-07-02 22:01:21 -0400] javawidget: so.. no generalized judgements
[2012-07-02 22:01:24 -0400] cnf: hoover_damm: there is a difference between your own cookbooks, and the one supposed to represent chef's cream (which the opscode knife cookbook site ones do)
[2012-07-02 22:01:24 -0400] javawidget: ;)
[2012-07-02 22:01:47 -0400] jtimberman: cnf: not all the cookbooks on the community site are written by opscode.
[2012-07-02 22:01:52 -0400] jtimberman: in fact, the *vast* majority aren't.
[2012-07-02 22:01:57 -0400] cnf: sure
[2012-07-02 22:02:06 -0400] jtimberman: and we don't review any of them at all, unless we use them ourselves.
[2012-07-02 22:02:28 -0400] hoover_damm: jtimberman, honestly I'd pay to have my cookbooks Opscode certified
[2012-07-02 22:02:29 -0400] hoover_damm: *duck*
[2012-07-02 22:02:29 -0400] miah: jtimberman: i dare say that opscode doesn't have the time to adequately keep the 'opscode cookbooks' in the 'creame of the crop' line either
[2012-07-02 22:02:39 -0400] hoover_damm: jtimberman, I realize that opens a pandoras box
[2012-07-02 22:02:47 -0400] miah: nginx... wow. what a ugly cookbook.
[2012-07-02 22:02:58 -0400] cnf: jtimberman: i understand that, but those are the ones new users run into first
[2012-07-02 22:03:26 -0400] miah: ya'll are busy with awesome stuff. not as much dedicated time to the cookbooks.
[2012-07-02 22:03:43 -0400] jtimberman: miah: true story
[2012-07-02 22:03:56 -0400] cnf: jtimberman: and tbh, so far ops code people have been the one bright spot inf my general chef experience.
[2012-07-02 22:04:31 -0400] miah: cnf: the opscode folks are all awesome.
[2012-07-02 22:04:37 -0400] cnf: yes, yes they are
[2012-07-02 22:05:36 -0400] erratic: Im so tired of being a programmer
[2012-07-02 22:05:50 -0400] erratic: the hell was I thinking
[2012-07-02 22:05:59 -0400] miah: im only tired of being a human
[2012-07-02 22:06:07 -0400] jtimberman: miah: transcend!
[2012-07-02 22:06:24 -0400] miah: working on it
[2012-07-02 22:06:37 -0400] erratic: yeah theres a word for that
[2012-07-02 22:06:41 -0400] erratic: I forget what it is
[2012-07-02 22:06:43 -0400] erratic: ascension?
[2012-07-02 22:06:50 -0400] miah: all valid ways of transcendace are illegal or frowned upon
[2012-07-02 22:06:59 -0400] erratic: yeah
[2012-07-02 22:07:05 -0400] erratic: there's a good reason for that
[2012-07-02 22:07:06 -0400] javawidget: need a recipe - human::transcend
[2012-07-02 22:07:12 -0400] miah: erratic: not really
[2012-07-02 22:07:16 -0400] erratic: usually starts with the person talking about it is a schizophrenic
[2012-07-02 22:07:40 -0400] erratic: that or really high on dmt
[2012-07-02 22:08:19 -0400] miah: suicide is illegal, and highly frowned upon. but the donatists probablly all got what they wanted
[2012-07-02 22:08:30 -0400] erratic: Im really glad nobody let me commit suicide
[2012-07-02 22:08:40 -0400] erratic: but yeah I mean for people who are terminally ill
[2012-07-02 22:08:42 -0400] erratic: makes sense
[2012-07-02 22:08:46 -0400] javawidget: oregon
[2012-07-02 22:09:23 -0400] miah: drugs are illegal in most cases, unless your incredibly rich.
[2012-07-02 22:09:39 -0400] erratic: silk road
[2012-07-02 22:09:41 -0400] erratic: but yeah
[2012-07-02 22:09:42 -0400] miah: anyways. ya. transcendance. probably isn't going to happen anytime soon.
[2012-07-02 22:09:52 -0400] erratic: we're talking about legality
[2012-07-02 22:09:54 -0400] erratic: sorry
[2012-07-02 22:10:03 -0400] erratic: I confused legality with availability
[2012-07-02 22:10:11 -0400] miah: indeed
[2012-07-02 22:10:47 -0400] miah: when i grow up i want to be unix
[2012-07-02 22:11:25 -0400] erratic: I never want to take drugs again but somehow I always end up changing my mind when the opportunity presents itself
[2012-07-02 22:12:07 -0400] erratic: innobackupex-1.5.1: Error: Failed to stream 'backup-my.cnf': Inappropriate ioctl for device at /usr/bin/innobackupex-1.5.1 line 374.
[2012-07-02 22:12:11 -0400] erratic: have you seen that before miah?
[2012-07-02 22:12:52 -0400] miah: lack of details
[2012-07-02 22:13:05 -0400] erratic: sec
[2012-07-02 22:13:24 -0400] erratic: http://pastie.org/private/c1va303nnnyppow6vgnv9w
[2012-07-02 22:14:12 -0400] erratic: oh shit
[2012-07-02 22:14:19 -0400] erratic: I know why its doing that nevermind
[2012-07-02 22:14:24 -0400] erratic: ....
[2012-07-02 22:14:38 -0400] erratic: ./mnt/cloudfiles/sqlbackups/<%= @hostname %>/<%= ipaddress =>/
[2012-07-02 22:14:52 -0400] hoover_damm: miah, even the rich go to jail
[2012-07-02 22:15:18 -0400] miah: hoover_damm: <sometimes>
[2012-07-02 22:15:37 -0400] erratic: my xbf was rich
[2012-07-02 22:15:41 -0400] hoover_damm: miah, let's break this down a little
[2012-07-02 22:15:47 -0400] miah: erratic: still, lack of details. i dont know innobackupex well enough to debug from that.
[2012-07-02 22:15:50 -0400] erratic: he'd drop 5,000 on his own bail for getting pulled over with coke
[2012-07-02 22:15:51 -0400] hoover_damm: miah, politicians rarely to to jail
[2012-07-02 22:16:03 -0400] miah: politicians, and bankers == will never see the inside of a jail cell
[2012-07-02 22:16:04 -0400] hoover_damm: miah, the rich go to jail for the most part but there are some that keep their heads low
[2012-07-02 22:16:24 -0400] erratic: fuckin idiot
[2012-07-02 22:16:28 -0400] erratic: sry just had to
[2012-07-02 22:16:29 -0400] erratic: he was
[2012-07-02 22:16:30 -0400] erratic: lol
[2012-07-02 22:16:39 -0400] miah: i think topic has drifted quite a bit..
[2012-07-02 22:16:40 -0400] hoover_damm: miah, politically tied rich... could pass the joint to obama and still not get arrested
[2012-07-02 22:18:34 -0400] erratic: miah no worries I know what I did wrong
[2012-07-02 22:18:38 -0400] erratic: just specifying the wrong path
[2012-07-02 22:18:59 -0400] cheeseplus: miah: re: your tweet what about node[:codename]
[2012-07-02 22:20:37 -0400] miah: hrm?
[2012-07-02 22:20:42 -0400] javawidget: nginx is a disgusting cookbook... as is snmp
[2012-07-02 22:21:10 -0400] miah: github.com/miah/nginx *cough*
[2012-07-02 22:21:13 -0400] javawidget: In most cases, it's easier for me to implement my own cookbooks than to use someone elses
[2012-07-02 22:21:24 -0400] javawidget: Sorry buddy ;)
[2012-07-02 22:21:35 -0400] javawidget: totaly sucked for my use case.
[2012-07-02 22:22:03 -0400] cheeseplus: miah: you menionted node['lsb'] and I'm actually looking to extract similar info
[2012-07-02 22:22:10 -0400] javawidget: I spent so much time just trying to figure out what was going on....I just needed a reverse proxy ;)
[2012-07-02 22:22:13 -0400] miah: node['platform']
[2012-07-02 22:22:20 -0400] miah: ohai is missing a few other things though.
[2012-07-02 22:22:33 -0400] cheeseplus: miah: but say I want "precise" for Ubuntu 12.04
[2012-07-02 22:22:44 -0400] cheeseplus: ohai seems to have that under "codename"
[2012-07-02 22:23:05 -0400] jtimberman: javawidget: what is "disgusting" about it?
[2012-07-02 22:23:24 -0400] miah: ah
[2012-07-02 22:23:30 -0400] javawidget: well...
[2012-07-02 22:23:32 -0400] miah: cheeseplus: i do this. http://tickets.opscode.com/browse/OHAI-385
[2012-07-02 22:23:46 -0400] cheeseplus: miah: at least that is where I was going to try grabbing from unless you have a better suggestion ;)
[2012-07-02 22:23:50 -0400] javawidget: it's huge...
[2012-07-02 22:24:01 -0400] javawidget: it handles so many different possible use cases...
[2012-07-02 22:24:09 -0400] cheeseplus: the tweet was timely as I was talking to our packaging guy who changed up our naming scheme
[2012-07-02 22:24:14 -0400] jtimberman: understand that nginx isn't exactly a simple piece of software. especially not when the OS packages are insufficient for your use case, and you need to do things like add modules.
[2012-07-02 22:24:23 -0400] miah: jtimberman: yup
[2012-07-02 22:24:39 -0400] javawidget: but totally misses the mark on basic deployment deployment types.
[2012-07-02 22:24:43 -0400] miah: i added source install, as well as adding nginx's public repo's for yum/apt
[2012-07-02 22:24:57 -0400] miah: still lots to do
[2012-07-02 22:25:05 -0400] jtimberman: if you can rock the nginx package from your distribution, use recipe[nginx] and bob's your uncle
[2012-07-02 22:25:17 -0400] miah: i'd still <3 feedback on github.com/miah/percona-install
[2012-07-02 22:25:20 -0400] javawidget: the most basic principal of scalability is simplicity
[2012-07-02 22:25:26 -0400] jtimberman: or if you roll your own packages and host them, you can do that too.
[2012-07-02 22:25:27 -0400] cheeseplus: miah: yea, he has packaged things such that for ubuntu only we the actual names
[2012-07-02 22:25:31 -0400] jtimberman: er, use it for that too
[2012-07-02 22:25:36 -0400] javawidget: it's not simple. :)
[2012-07-02 22:25:41 -0400] miah: jtimberman: yup. thats the plan. i want default to be _useful_ as well as being customizable.
[2012-07-02 22:25:45 -0400] javawidget: but...
[2012-07-02 22:25:48 -0400] javawidget: to be fair..
[2012-07-02 22:26:00 -0400] miah: cheeseplus: the actual names = stupid =)
[2012-07-02 22:26:10 -0400] miah: also, i never remember the names.. but i can remember numbers no problem.
[2012-07-02 22:26:13 -0400] javawidget: I'm about 2 months old wiht chef.. so, take my opinions lightly ;)
[2012-07-02 22:26:22 -0400] miah: precise pengin? uh. wtf is that. 12.04. OK GOT YA
[2012-07-02 22:26:30 -0400] erratic: precise pigeon
[2012-07-02 22:26:41 -0400] cheeseplus: miah: I somewhat agree, his argument was compelling since we really only typically care about the major version on most distros
[2012-07-02 22:26:51 -0400] erratic: ronnie ratsass
[2012-07-02 22:26:57 -0400] javawidget: precise panacaea
[2012-07-02 22:27:00 -0400] miah: cheeseplus: true
[2012-07-02 22:27:01 -0400] cheeseplus: so for centos we just do centos/6/package.rpm
[2012-07-02 22:27:16 -0400] cheeseplus: miah: but with ubuntu you have 11.04 and 11.10
[2012-07-02 22:27:28 -0400] miah: i only care about LTS
[2012-07-02 22:27:30 -0400] miah: :P
[2012-07-02 22:27:30 -0400] erratic: precise parrot
[2012-07-02 22:27:39 -0400] cheeseplus: or I can just yell at him and he will probably change it :)
[2012-07-02 22:27:46 -0400] jtimberman: pangolin
[2012-07-02 22:27:47 -0400] miah: Ubuntu Dangling Participle
[2012-07-02 22:27:48 -0400] javawidget: precise prebuscent
[2012-07-02 22:27:49 -0400] jtimberman: fwiw
[2012-07-02 22:27:58 -0400] erratic: javawidget heh
[2012-07-02 22:28:30 -0400] miah: guh. i have a pile of things i need to add to the yum cookbook as well.
[2012-07-02 22:29:11 -0400] erratic: are you contributing community cookbooks or just talking about doing your own
[2012-07-02 22:29:14 -0400] miah: have i said recently how much i hate redhat? that if i ever met jeff johnson (who im sure is a cool guy) i'd punch him for RPM (which i know he's not totally responsibile for)
[2012-07-02 22:29:25 -0400] miah: erratic: both.
[2012-07-02 22:29:34 -0400] miah: i fork, fix, and PR
[2012-07-02 22:29:40 -0400] erratic: but redhat was made on slackware
[2012-07-02 22:29:51 -0400] miah: noways.
[2012-07-02 22:30:02 -0400] miah: maybe in ancient history land
[2012-07-02 22:30:12 -0400] erratic: yeah dont get me wrong
[2012-07-02 22:30:21 -0400] erratic: its a total piece of shit and I could care less about redhat now
[2012-07-02 22:30:30 -0400] erratic: infact pretty much everything after 5 sucked ass
[2012-07-02 22:30:45 -0400] miah: i turned down the offer of having miah@redhat.com
[2012-07-02 22:30:51 -0400] miah: fwiw.
[2012-07-02 22:31:06 -0400] javawidget: i'll take dependency hell on slackware any day than a corrupt rpm db on a production system...
[2012-07-02 22:31:14 -0400] miah: javawidget: HELL YES
[2012-07-02 22:31:29 -0400] javawidget: thanks god for dpkg
[2012-07-02 22:31:34 -0400] miah: <3 dpkg
[2012-07-02 22:31:40 -0400] javawidget: anch'io
[2012-07-02 22:31:54 -0400] erratic: oh yeah
[2012-07-02 22:31:55 -0400] javawidget: imma gon' marry your dpkg babies
[2012-07-02 22:31:55 -0400] erratic: well
[2012-07-02 22:32:00 -0400] erratic: I'll take statically compiled binaries
[2012-07-02 22:32:03 -0400] erratic: fuck shared libraries
[2012-07-02 22:32:08 -0400] erratic: I have 2 tb of diskspace and shit
[2012-07-02 22:32:11 -0400] erratic: lulz
[2012-07-02 22:32:32 -0400] javawidget: you'll never need more than 2tb of disk space, right?
[2012-07-02 22:32:39 -0400] javawidget: ;->
[2012-07-02 22:32:46 -0400] erratic: not really
[2012-07-02 22:32:53 -0400] erratic: I dont download as much warez as I used to
[2012-07-02 22:33:03 -0400] erratic: I used to be all about some warez and codes
[2012-07-02 22:33:18 -0400] javawidget: then we all got jobz
[2012-07-02 22:33:20 -0400] javawidget: ;)
[2012-07-02 22:35:02 -0400] erratic: shakes head
[2012-07-02 22:35:04 -0400] erratic: some job
[2012-07-02 22:35:05 -0400] erratic: hehehe
[2012-07-02 22:35:14 -0400] erratic: j/k
[2012-07-02 22:35:17 -0400] erratic: I love my job
[2012-07-02 22:35:46 -0400] cheeseplus: joining the game industry ended 99% of my warez activities
[2012-07-02 22:36:03 -0400] erratic: cheeseplus prq
[2012-07-02 22:36:07 -0400] erratic: :)
[2012-07-02 22:36:29 -0400] erratic: an0nym0u5 is like the new internet gangbang gang sign
[2012-07-02 22:36:34 -0400] erratic: throw it up
[2012-07-02 22:36:37 -0400] erratic: get on tor
[2012-07-02 22:36:49 -0400] cheeseplus: lol
[2012-07-02 22:37:46 -0400] cheeseplus: erratic: usenet 4 lyfe
[2012-07-02 22:37:58 -0400] erratic: oh hells yeah
[2012-07-02 22:38:00 -0400] erratic: nzb baby
[2012-07-02 22:38:17 -0400] erratic: downloadin parity copies like a mother fuckin fiend and shit
[2012-07-02 22:38:33 -0400] erratic: for all my 40 gig blu ray rips
[2012-07-02 22:39:05 -0400] erratic: I haven't done that in so long
[2012-07-02 22:39:07 -0400] erratic: I miss usenet
[2012-07-02 22:39:08 -0400] cheeseplus: first time I saw par2 in action I thought it was magic
[2012-07-02 22:39:16 -0400] erratic: I KNOW RIGHT I WAS LIKE WORD
[2012-07-02 22:39:19 -0400] erratic: thats dope!
[2012-07-02 22:39:40 -0400] cheeseplus: I mean I understood how parity worked, it had just never applied to me
[2012-07-02 22:46:16 -0400] hoover_damm: miah, remember this motto.  All package managers suck
[2012-07-02 22:46:21 -0400] hoover_damm: you will never find one that you won't hate someday
[2012-07-02 22:46:31 -0400] erratic: I fuckin hate autoconf
[2012-07-02 22:46:33 -0400] hoover_damm: dependency resolution is a bitch
[2012-07-02 22:46:41 -0400] thehar: In the midnight hour. I can feel your powers.
[2012-07-02 22:46:41 -0400] erratic: I wish people would just use a damn makefile
[2012-07-02 22:46:49 -0400] erratic: and a shell script
[2012-07-02 22:46:55 -0400] hoover_damm: autoconf is fine
[2012-07-02 22:47:02 -0400] hoover_damm: the problem is people who don't understand how to use autoconf
[2012-07-02 22:47:09 -0400] hoover_damm: not a black art
[2012-07-02 22:47:11 -0400] hoover_damm: but darn close
[2012-07-02 22:47:21 -0400] erratic: its pretty tricky
[2012-07-02 22:48:06 -0400] hoover_damm: nah
[2012-07-02 22:48:11 -0400] hoover_damm: stop using distros that make it hard
[2012-07-02 22:48:13 -0400] erratic: [Mon, 02 Jul 2012 15:48:07 -0700] FATAL: EOFError: end of file reached
[2012-07-02 22:48:17 -0400] erratic: I hate that so much
[2012-07-02 22:48:35 -0400] hoover_damm: it shouldn't take an act of god to make your binary distro into something that can build most things
[2012-07-02 22:48:46 -0400] hoover_damm: without calling down the powers of satan to assist
[2012-07-02 22:48:47 -0400] hoover_damm: or something
[2012-07-02 22:49:04 -0400] erratic: I'll talk to anton lavey about that
[2012-07-02 22:49:24 -0400] hoover_damm: i doubt you know him.  If you do, that's just another reason to ..
[2012-07-02 22:49:35 -0400] erratic: >_>
[2012-07-02 22:49:40 -0400] erratic: I wanna hang out sometime!
[2012-07-02 22:49:45 -0400] erratic: am I ever gonna meet you
[2012-07-02 22:49:50 -0400] erratic: lol
[2012-07-02 22:50:14 -0400] hoover_damm: Likely not
[2012-07-02 22:50:20 -0400] erratic: I need to be talked out of buying an expensive 8 core system
[2012-07-02 22:50:25 -0400] hoover_damm: I rarely meet anyone
[2012-07-02 22:50:26 -0400] hoover_damm: or go out
[2012-07-02 22:50:36 -0400] erratic: sad story
[2012-07-02 22:51:13 -0400] hoover_damm: not to me
[2012-07-02 22:51:47 -0400] erratic: this friday convention center 3rd floor 6pm
[2012-07-02 22:51:48 -0400] erratic: 2600
[2012-07-02 22:52:33 -0400] erratic: I might actually go I just remembered
[2012-07-02 22:56:10 -0400] erratic: shrug
[2012-07-02 22:56:13 -0400] erratic: nothing important
[2012-07-02 22:56:35 -0400] erratic: 2600.com
[2012-07-02 22:57:41 -0400] erratic: http://wa2600.org/
[2012-07-02 23:01:16 -0400] erratic: this is pretty annoying, http://pastie.org/4189909
[2012-07-02 23:01:21 -0400] erratic: it works fine on two other servers
[2012-07-02 23:01:36 -0400] erratic: cant imagine what could possibly be wrong with the apt cookbook even looking at this stacktrace
[2012-07-02 23:01:41 -0400] erratic: it doesn't make a whole lot of sense
[2012-07-02 23:02:02 -0400] erratic: http://pastie.org/4189914
[2012-07-02 23:02:09 -0400] erratic: EOF?of what file..
[2012-07-02 23:06:44 -0400] hoover_damm: your not posting anything useful
[2012-07-02 23:06:56 -0400] hoover_damm: can you post the recipe in question that is causing this at least?
[2012-07-02 23:07:30 -0400] erratic: sure one sec
[2012-07-02 23:09:10 -0400] erratic: http://pastie.org/private/cfui8hxwpmhhjixcwpaw
[2012-07-02 23:10:10 -0400] erratic: package "xtrabackup"
[2012-07-02 23:10:16 -0400] erratic: uses apt I'm pretty sure
[2012-07-02 23:10:22 -0400] erratic: this all works on two of my other vms...
[2012-07-02 23:11:44 -0400] hoover_damm: the package block shouldn't be using net/http
[2012-07-02 23:12:05 -0400] hoover_damm: chef-client -l debug then
[2012-07-02 23:12:12 -0400] erratic: oh hey that helps alot
[2012-07-02 23:12:13 -0400] erratic: things
[2012-07-02 23:12:17 -0400] erratic: thanks*
[2012-07-02 23:13:42 -0400] erratic: heh
[2012-07-02 23:13:56 -0400] erratic: pm
[2012-07-02 23:15:33 -0400] erratic: man
[2012-07-02 23:15:40 -0400] erratic: 192.168.1.252:4000/cookbooks/percona/0.5.1/files/6d13c8f80880e07f04e3d733a727acc5,
[2012-07-02 23:15:57 -0400] erratic: I really dont want to test that with curl
[2012-07-02 23:16:03 -0400] erratic: Im going to have to arent i
[2012-07-02 23:16:18 -0400] erratic: is there a tool that'll make it easy for me to generate the headers I need to sign the request
[2012-07-02 23:16:26 -0400] erratic: so I can test with curl if I need to
[2012-07-02 23:17:35 -0400] erratic: I guess I could look at it with wireshark
[2012-07-02 23:19:05 -0400] erratic: where do you see package "block" I'm not trying to block any packages am I
[2012-07-02 23:19:16 -0400] erratic: oh
[2012-07-02 23:20:53 -0400] hoover_damm: erratic, that's an EOF from chef-server-api
[2012-07-02 23:21:09 -0400] erratic: lemme see what the log says there
[2012-07-02 23:21:12 -0400] hoover_damm: erratic, turn up the debug logging in chef-server and restart it
[2012-07-02 23:21:13 -0400] erratic: I didn't even think to try that
[2012-07-02 23:21:17 -0400] hoover_damm: log_level that is
[2012-07-02 23:21:24 -0400] erratic: *nod*
[2012-07-02 23:21:31 -0400] cnf: hmz, i just can't figure out how to manage vhosts with chef
[2012-07-02 23:21:43 -0400] erratic: cnf apache?
[2012-07-02 23:21:48 -0400] cnf: erratic: sure
[2012-07-02 23:22:06 -0400] erratic: I had an issue where the vhosts needed to be loaded in a certain order
[2012-07-02 23:22:10 -0400] erratic: so
[2012-07-02 23:22:16 -0400] erratic: I numbered the vhost files
[2012-07-02 23:22:30 -0400] erratic: thats about all I know
[2012-07-02 23:22:33 -0400] erratic: other than that
[2012-07-02 23:22:44 -0400] cnf: o,O
[2012-07-02 23:22:47 -0400] erratic: seems to work just fine :)
[2012-07-02 23:22:51 -0400] cnf: how?
[2012-07-02 23:23:42 -0400] cnf: i don't mean how do you order them
[2012-07-02 23:23:50 -0400] erratic: oh
[2012-07-02 23:23:58 -0400] erratic: why ?
[2012-07-02 23:24:01 -0400] cnf: how do you manage vhosts in chef
[2012-07-02 23:24:08 -0400] erratic: ohhhh
[2012-07-02 23:24:13 -0400] erratic: just template files..
[2012-07-02 23:24:20 -0400] erratic: template per vhost
[2012-07-02 23:24:29 -0400] erratic: sometimes thats the easiest way
[2012-07-02 23:25:02 -0400] erratic: I dont like messing around with json too much unless there's something that I can actually imagine myself changing and usually for stuff like that databags are more appropriate
[2012-07-02 23:25:13 -0400] hoover_damm: if you have to number your vhosts to ensure the load order works
[2012-07-02 23:25:17 -0400] hoover_damm: you are doing something wrong
[2012-07-02 23:25:17 -0400] cnf: wait, you make a cookbook, with your vhosts hardcoded in them?
[2012-07-02 23:25:24 -0400] cnf: o,O
[2012-07-02 23:25:30 -0400] hoover_damm: named based vhosts have worked properly
[2012-07-02 23:25:31 -0400] hoover_damm: for eons
[2012-07-02 23:25:32 -0400] erratic: hoover_damm I ultimately convinced my boss of that too and we decided to do something else
[2012-07-02 23:26:06 -0400] cnf: so if you had 3 web servers, with 3 vhosts each, you'd make 3 recipies?
[2012-07-02 23:26:15 -0400] hoover_damm: cnf, and 9 files
[2012-07-02 23:26:16 -0400] erratic: well they're my cookbooks
[2012-07-02 23:26:20 -0400] cnf: o,O
[2012-07-02 23:26:22 -0400] cnf: wtf?
[2012-07-02 23:26:22 -0400] erratic: they're for a very specific purpose
[2012-07-02 23:26:24 -0400] erratic: so yeah
[2012-07-02 23:26:40 -0400] hoover_damm: cnf, that's part of the learning process.
[2012-07-02 23:26:43 -0400] cnf: that just sounds totally wrong to me
[2012-07-02 23:26:50 -0400] hoover_damm: cnf, some people create tons of cookbooks that are insanely specific
[2012-07-02 23:26:59 -0400] hoover_damm: cnf, they might as well be one of shell scripts at that point
[2012-07-02 23:27:26 -0400] cnf: i don't want to do that...
[2012-07-02 23:27:30 -0400] erratic: cnf think about it in terms of what if you were to use community cookbooks that got updated all the time, your server infrastructure would be constantly changing for no good reason in particular
[2012-07-02 23:27:35 -0400] hoover_damm: me neither
[2012-07-02 23:27:57 -0400] erratic: the whole idea behind my methodology is to pick a starting point and run with it and only take from future additions what you need at least
[2012-07-02 23:28:02 -0400] cnf: erratic: how would it be updated that changed my server infrastructure???
[2012-07-02 23:28:18 -0400] hoover_damm: cnf, you'd update the cookbook
[2012-07-02 23:28:28 -0400] hoover_damm: cnf, your thinking with the wrong brain here
[2012-07-02 23:28:30 -0400] erratic: well if you're saying the cookbooks shouldn't be hardcoded I suspect thats why because
[2012-07-02 23:28:51 -0400] erratic: I mean the reason why
[2012-07-02 23:28:54 -0400] cnf: i want one cookbook that does _all_ apache configuration, and i'll tell it what vhosts to put where
[2012-07-02 23:29:00 -0400] cnf: i just don't get _how_ to do this
[2012-07-02 23:29:34 -0400] miah: you create a cookbook that depends on the apache2 cookbook. then your cookbook has a recipe that calls 'apache_site' for each vhost you want to manage
[2012-07-02 23:30:03 -0400] cnf: huh?
[2012-07-02 23:30:08 -0400] erratic: so like extending it?
[2012-07-02 23:31:12 -0400] erratic: this is making mad
[2012-07-02 23:31:19 -0400] erratic: I'm going to go smoke a cigarette
[2012-07-02 23:31:22 -0400] cnf: miah: you do what?
[2012-07-02 23:32:28 -0400] hoover_damm: cnf, I remember how hard it was converting a client to just use include_recipe "nginx::source" and then nginx_site "something" do enable true end
[2012-07-02 23:32:51 -0400] hoover_damm: but it was a thing of beauty because the end result works on any cloud provider and they can easily add to it
[2012-07-02 23:33:12 -0400] cnf: you know, i don't understand what any of you are saying...
[2012-07-02 23:33:50 -0400] hoover_damm: cnf, :)
[2012-07-02 23:34:15 -0400] cnf: really :(
[2012-07-02 23:34:16 -0400] hoover_damm: basically they created a cookbook called passenger to install nginx and passenger.  I moved said client to Unicorn, they created passenger::unicorn for that change originally
[2012-07-02 23:35:31 -0400] cnf: but that's installation
[2012-07-02 23:35:34 -0400] hoover_damm: then I updated their nginx cookbook to support compiling passenger or not... and then updated nginx.conf and converted it to .. template "#{node[:nginx][:dir]}/sites-available/foobar" do source "foobar" nginx_site "foobar" do enable true end
[2012-07-02 23:35:36 -0400] cnf: that's the easy but
[2012-07-02 23:35:40 -0400] cnf: bit*
[2012-07-02 23:35:51 -0400] syphon: True or False? chef-solo can be daemonized.
[2012-07-02 23:36:00 -0400] hoover_damm: true
[2012-07-02 23:36:04 -0400] syphon: http://wiki.opscode.com/display/chef/Chef+Configuration+Settings says no, but `chef-solo --help` says yes.
[2012-07-02 23:36:04 -0400] hoover_damm: don't forget -i
[2012-07-02 23:36:20 -0400] syphon: I figure one or the other source is out of date :)
[2012-07-02 23:36:23 -0400] hoover_damm: it should work, it's been awhile since i've used it that way
[2012-07-02 23:36:31 -0400] hoover_damm: it's also been 0.6 since i used it that way
[2012-07-02 23:36:35 -0400] hoover_damm: so I maybe wrong
[2012-07-02 23:36:52 -0400] cnf: i get how to use chef for installing stuff
[2012-07-02 23:37:07 -0400] erratic: hoover_damm what the hell! I start chef-server -l debug and run chef-client and the goddamn thing works
[2012-07-02 23:37:09 -0400] cnf: i just really can't figure out how to get it to properly manager all my etc stuff
[2012-07-02 23:37:10 -0400] erratic: thats so bogus
[2012-07-02 23:37:27 -0400] erratic: >_<
[2012-07-02 23:37:44 -0400] hoover_damm: cnf, then you are not modeling your /etc stuff in a way that can be managed
[2012-07-02 23:37:48 -0400] cnf: like how the hell to manage vhosts
[2012-07-02 23:37:58 -0400] hoover_damm: depends on the purpose of the vhosts
[2012-07-02 23:38:13 -0400] cnf: what?
[2012-07-02 23:38:20 -0400] hoover_damm: this is something really that should be decided so others don't have to decide
[2012-07-02 23:38:40 -0400] cnf: ...
[2012-07-02 23:38:42 -0400] hoover_damm: because I do vhosts based on databags generally.  Store my vhosts in a databag for a role and then have that role fetch that databag
[2012-07-02 23:38:45 -0400] hoover_damm: expand it
[2012-07-02 23:38:47 -0400] hoover_damm: configure
[2012-07-02 23:39:04 -0400] cnf: hoover_damm: but then every "web" server has the same vhosts
[2012-07-02 23:39:14 -0400] hoover_damm: apply the same role
[2012-07-02 23:39:32 -0400] cnf: say you have 10 servers, with 100 vhosts each
[2012-07-02 23:39:36 -0400] hoover_damm: cnf, the problem with configuration management is two fold.
[2012-07-02 23:39:46 -0400] hoover_damm: cnf, one part is automating it.  the other part is making it automateable
[2012-07-02 23:40:02 -0400] hoover_damm: cnf, we (ops) people tend to build things that are impossible to automate out of the box
[2012-07-02 23:40:47 -0400] hoover_damm: so when you get in that situation you have to kind of step back and figure out how to re-jigger your production to the point where you can start moving the automation in
[2012-07-02 23:41:08 -0400] hoover_damm: I have totally worked in companies where i couldn't automate squat because everyone was involved in ./configure && make && make install
[2012-07-02 23:41:11 -0400] hoover_damm: with svn checkouts
[2012-07-02 23:41:24 -0400] cnf: didn't i just say i can't figure out how to fit it into chef?
[2012-07-02 23:41:44 -0400] hoover_damm: now you have to figure out how to put it into chef
[2012-07-02 23:41:52 -0400] cnf: ARGL@!
[2012-07-02 23:42:38 -0400] hoover_damm: cnf, step 1) describe everything
[2012-07-02 23:43:13 -0400] hoover_damm: cnf, step 2 generally means filling what you describe into your storage schema
[2012-07-02 23:43:19 -0400] hoover_damm: wether it's zookeeper, Noah or Chef
[2012-07-02 23:43:21 -0400] erratic: cnf its the end of the day man, dont stress out too much you'll get this eventually
[2012-07-02 23:43:22 -0400] hoover_damm: or some json blob
[2012-07-02 23:43:35 -0400] barefoot: "the other part is making it automateable"++ well put
[2012-07-02 23:43:41 -0400] cnf: erratic: seems like not
[2012-07-02 23:43:53 -0400] hoover_damm: barefoot, some engineers really don't get that.
[2012-07-02 23:43:55 -0400] hoover_damm: but it's true
[2012-07-02 23:44:28 -0400] erratic: cnf trust me, Ive been so pissed off because of chef a few times... and it always comes to me later
[2012-07-02 23:44:39 -0400] tmolina: hello, I'm a chef noob and have basic usage question
[2012-07-02 23:44:46 -0400] cnf: erratic: been weeks, still at the pissed off, wtf stage
[2012-07-02 23:44:55 -0400] tmolina: trying to use the sudo cookbook
[2012-07-02 23:44:57 -0400] syphon: hmm chef-solo claims to be running daemonized (it throws no errors and I see it in `ps -ef`) but it doesn't seem to be running the runlist. I suppose I have to re-direct the output so I can see exactly what the heck is going on
[2012-07-02 23:45:02 -0400] tmolina: but can't get attributes to load
[2012-07-02 23:45:13 -0400] erratic: cnf hack it together the way I did, and change it / update it later ?
[2012-07-02 23:45:31 -0400] cnf: also, wth is noah?
[2012-07-02 23:45:32 -0400] Maniacal: anyone know how to define an attribute in chefspec without that attribute being set in the attributes file?  I have to set  default[:ec2][:hostname] = ""  in my attributes file because chefspec doesn't seem to want to allow me to set that attribute for the test without it first being a default attribute
[2012-07-02 23:45:42 -0400] erratic: theres a reason they charge like 7,000$ for a class on how to do all of this
[2012-07-02 23:45:57 -0400] tmolina: anybody use that sudo cookbook (w ubuntu 12.04) could help ? how do you properly set attribute?
[2012-07-02 23:46:02 -0400] Maniacal: I don't want to have to put in all these blanks in my default attribute just to accommodate these tests
[2012-07-02 23:46:05 -0400] hoover_damm: cnf, http://zookeeper.apache.org/ https://github.com/lusis/Noah/
[2012-07-02 23:46:11 -0400] jameson: erratic: because that's how much we'd get paid during the time we learn to do this :3
[2012-07-02 23:46:25 -0400] cnf: hoover_damm: and what are those things?
[2012-07-02 23:46:35 -0400] erratic: sure but you get a hell of a lot more Im sure in terms of best patterns and practices
[2012-07-02 23:46:39 -0400] hoover_damm: you can always hire someone to mentor you
[2012-07-02 23:46:50 -0400] hoover_damm: cnf, start reading
[2012-07-02 23:46:59 -0400] jameson: erratic: or the work around ~_~
[2012-07-02 23:47:02 -0400] bdha: Heavywater does really really good Chef training.
[2012-07-02 23:47:09 -0400] cnf: i have been reading for days, damnit >,<
[2012-07-02 23:47:11 -0400] bdha: dje++
[2012-07-02 23:47:22 -0400] hoover_damm: bdha, I bet
[2012-07-02 23:47:29 -0400] jameson: cnf: you can always try the "I am a hammer, you are all nails" method for a few days
[2012-07-02 23:47:38 -0400] jameson: you learn... the hard way, but you remember more :X
[2012-07-02 23:47:40 -0400] hoover_damm: bdha, although I admit I still prefer learning from fujin
[2012-07-02 23:47:53 -0400] cnf: jameson: oh, spare me the bs
[2012-07-02 23:47:57 -0400] erratic: jameson I picked it up pretty fast tbqh
[2012-07-02 23:48:19 -0400] cnf: i have been told "read this, read that, read that over there" so many times, and rarely has it shed any light on the issue
[2012-07-02 23:48:23 -0400] bdha: hoover_damm: Haven't seen any video of him, but I don't doubt it. :)
[2012-07-02 23:48:23 -0400] jameson: :| it took me a week to stop saying I'm just going to use fabric or puppet
[2012-07-02 23:48:27 -0400] erratic: Im considering asking opscode if I can take a job with them again since the last time I interviewed not that I want to leave my current job
[2012-07-02 23:48:31 -0400] erratic: but I'm curious
[2012-07-02 23:48:32 -0400] hoover_damm: there's a difference between knowing how to write a cookbook and being building a large set of cookbooks that are generalized
[2012-07-02 23:48:41 -0400] erratic: how much better off I would have been knowing what I know now
[2012-07-02 23:48:53 -0400] bdha: Write Shit That Gets Shit Done. Then later you can refactor it.
[2012-07-02 23:48:57 -0400] jameson: cnf: have you been just trying stuff? because I got frustrated (as you are now) and just started trying things
[2012-07-02 23:49:08 -0400] jameson: like half my vagrant servers didn't run
[2012-07-02 23:49:10 -0400] cnf: jameson: yees
[2012-07-02 23:49:11 -0400] bdha: Automate the pain you have now, abstract and generalize when you no longer have immediate pain.
[2012-07-02 23:49:13 -0400] jameson: because I had bad config files ~_~
[2012-07-02 23:49:17 -0400] cnf: my vagrant instance runs fine
[2012-07-02 23:49:18 -0400] jameson: and bad recipes
[2012-07-02 23:49:21 -0400] cnf: i can install stuff fine
[2012-07-02 23:49:39 -0400] hoover_damm: If you can't describe and abstract what your automating
[2012-07-02 23:49:45 -0400] hoover_damm: you will be causing yourself a lot of pain
[2012-07-02 23:49:49 -0400] erratic: http://pastie.org/4190101
[2012-07-02 23:50:11 -0400] cnf: and all the zen bs, but no actual useful help >,<
[2012-07-02 23:50:11 -0400] jameson: ~_~
[2012-07-02 23:50:28 -0400] jameson: cnf: I just jumped in here, but what are you doing?
[2012-07-02 23:50:31 -0400] jameson: *scrolls up*
[2012-07-02 23:50:52 -0400] bdha: cnf: Yeah, what _are_ you trying to do?
[2012-07-02 23:51:13 -0400] erratic: hoover_damm great everything works... I pm'd you my concerns
[2012-07-02 23:51:18 -0400] erratic: the only ones I have left
[2012-07-02 23:51:27 -0400] erratic: mainly that I fixed it but I dont know what I did
[2012-07-02 23:51:27 -0400] erratic: lol
[2012-07-02 23:51:34 -0400] cnf: trying to figure out how to properly manage vhosts with chef
[2012-07-02 23:51:35 -0400] hoover_damm: erratic, it's too bad you haven't realized that I don't respond to queries
[2012-07-02 23:51:35 -0400] erratic: seems like a caching issue?
[2012-07-02 23:51:45 -0400] erratic: oh sorry :(
[2012-07-02 23:51:51 -0400] jameson: cnf: so starting with not doing it properly
[2012-07-02 23:52:04 -0400] jameson: so for 10 vhors with 100 servers
[2012-07-02 23:52:05 -0400] cnf: jameson: what?
[2012-07-02 23:52:16 -0400] jameson: er 10 server, 100 vhosts,
[2012-07-02 23:52:21 -0400] jameson: have 10 roles
[2012-07-02 23:52:25 -0400] jameson: with 10 vhosts
[2012-07-02 23:52:26 -0400] hoover_damm: sounds like a cookbook upload failure
[2012-07-02 23:52:30 -0400] hoover_damm: delete the cookbook, re-upload
[2012-07-02 23:52:31 -0400] hoover_damm: try again
[2012-07-02 23:53:03 -0400] bdha: cnf: http://www.eventbrite.com/org/429733222?s=5384212 # Any of those near you?
[2012-07-02 23:53:04 -0400] erratic: are you talking to me?
[2012-07-02 23:53:25 -0400] cnf: bdha: wrong continent
[2012-07-02 23:53:37 -0400] erratic: because yeah it does sound like that except I didn't even have to do that to fix it just restarted chef-server / started it with -l debug in foreground
[2012-07-02 23:53:42 -0400] bdha: welp.
[2012-07-02 23:54:03 -0400] bdha: erratic: Ruby segfault?
[2012-07-02 23:54:22 -0400] erratic: oh the segfault?
[2012-07-02 23:54:23 -0400] bdha: Also, lol if you ruby 1.8
[2012-07-02 23:54:27 -0400] erratic: thats from soemthing else I'm pretty sure
[2012-07-02 23:54:31 -0400] erratic: thats just a random bug I've noticed
[2012-07-02 23:54:39 -0400] hoover_damm: bdha, GC likely
[2012-07-02 23:54:42 -0400] erratic: comes up every now and then
[2012-07-02 23:54:48 -0400] bdha: cnf: Everyone does it differently. You aren't going to get a definitive answer.
[2012-07-02 23:54:55 -0400] josephholsten: bdha: are you on mac? I've had ssl issues with builds on one machine
[2012-07-02 23:55:02 -0400] erratic: not sure what produces it in other words
[2012-07-02 23:55:02 -0400] cnf: bdha: even some ideas would be nice
[2012-07-02 23:55:05 -0400] bdha: josephholsten: 64bit Linux only.
[2012-07-02 23:55:14 -0400] cnf: bdha: i'm getting hardly any real answers
[2012-07-02 23:55:22 -0400] hoover_damm: cnf, try emailing the mailing list.
[2012-07-02 23:55:26 -0400] bdha: cnf: I would template out the virtualhost block and push in attributes into the template from the recipe.
[2012-07-02 23:55:26 -0400] hoover_damm: and asking your question
[2012-07-02 23:55:44 -0400] hoover_damm: cnf, your going to get opinions on how to solve this problem and no one will hand you a solution
[2012-07-02 23:55:45 -0400] bdha: And write out each vhost as its own file and have httpd include vhosts/*.conf.
[2012-07-02 23:56:07 -0400] bdha: And store the domains themselves in databags, which I'd use Search to pull and iterate over.
[2012-07-02 23:56:08 -0400] hoover_damm: cnf, so ask your question to the lists and read over the replies, describe and try and find a spot that makes you happy
[2012-07-02 23:56:08 -0400] cnf: hoover_damm: i didn't _ask_ for a sollution
[2012-07-02 23:56:24 -0400] cnf: i am just looking for understanding
[2012-07-02 23:56:24 -0400] hoover_damm: cnf, no i'm just pointing out there is no /solution/
[2012-07-02 23:56:43 -0400] erratic: setient sup
[2012-07-02 23:56:51 -0400] erratic: welcome to chef bro
[2012-07-02 23:56:54 -0400] josephholsten: cnf: could you describe what you want?
[2012-07-02 23:57:09 -0400] josephholsten: I think we're going in circles answering you
[2012-07-02 23:57:14 -0400] jameson: ^
[2012-07-02 23:57:18 -0400] cnf: bdha: yeah, that was what i was generally thinking
[2012-07-02 23:57:30 -0400] bdha: cnf: Seems perfectly reasonable to me.
[2012-07-02 23:57:31 -0400] erratic: sigh
[2012-07-02 23:57:32 -0400] cnf: bdha: i just do not understand how to make chef properly do that
[2012-07-02 23:58:03 -0400] bdha: cnf: You put the domains and any metadata in one or more data bags. You use Chef Search to iterate over a template resource for each vhost.
[2012-07-02 23:58:15 -0400] bdha: The rendered templates are written out to the filesystem on the webserver they are assigned to.
[2012-07-02 23:58:20 -0400] cnf: i don't even need vhosts, specifically, i'm just trying to figure out how to manage all my /etc in chef
[2012-07-02 23:58:26 -0400] bdha: Well.
[2012-07-02 23:58:31 -0400] bdha: That's a different question.
[2012-07-02 23:58:46 -0400] bdha: For things like vhosts which are in some sense dymanic, it makes sense to manage them individually and dynamically, in Chef.
[2012-07-02 23:58:52 -0400] cnf: bdha: so how do you get the different vhosts on different web servers?
[2012-07-02 23:58:54 -0400] tmolina: when you add 'depends foo' in a cookbook - is that dependency supposed to run with the default attributes declared in the cookbook?
[2012-07-02 23:59:05 -0400] cnf: create a machine specific role per server?
[2012-07-02 23:59:13 -0400] bdha: But for full text files that may not change very often, but you want to enforce policy, you would want to put the entire file either in Chef files/ or just in git.
[2012-07-02 23:59:27 -0400] bdha: cnf: You could also have a key in the databag that specifics which machine "role" they run on.
[2012-07-02 23:59:41 -0400] bdha: And assing that role to a system. When you iterate over the databag, drop that domain.
[2012-07-02 23:59:43 -0400] jameson: tmolina: yes, unless you overwrite them in roles, or when you use the LWRPs
[2012-07-02 23:59:46 -0400] bdha: That lets you have run a vhost on multiple backends.
[2012-07-02 23:59:53 -0400] bdha: jameson: First steps.

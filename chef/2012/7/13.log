[2012-07-13 00:07:12 -0400] kaawee: Hello! Is it possible to keep package "ruby1.9.1" on a debian squeeze machine when installing chef or chef-server? It looks like package "ohai" depends on package "ruby" but package "ruby" is in conflict with package "ruby1.9.1"
[2012-07-13 00:10:16 -0400] flaccid_: hmm https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L20 returns FATAL: NameError: uninitialized constant Opscode::OpenSSL. is this cookbook not compatible with chef-solo or something?
[2012-07-13 00:11:16 -0400] flaccid_: looks like i need to include the openssl cookbook/recipe i guess
[2012-07-13 00:11:31 -0400] hoover_damm: yep you need the openssl cookbook depended on
[2012-07-13 00:12:42 -0400] flaccid_: guess its depended but isn't in mah cache, k thanks
[2012-07-13 00:14:31 -0400] hoover_damm: hrm how'd that happen?
[2012-07-13 00:15:23 -0400] flaccid_: i didn't download it :)
[2012-07-13 00:17:23 -0400] flaccid_: hmm https://github.com/opscode-cookbooks/database/blob/master/recipes/master.rb#L30 on the other hand looks like it won't work with chef-solo
[2012-07-13 00:17:35 -0400] flaccid_: DEBUG: Chef::Exceptions::PrivateKeyMissing: I cannot read /etc/chef/client.pem, which you told me to use to sign requests!
[2012-07-13 00:19:51 -0400] hoover_damm: node.save is somewhere?
[2012-07-13 00:21:14 -0400] flaccid_: yeah https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L136 but its conditional not for chef solo hmm
[2012-07-13 00:30:32 -0400] flaccid_: dang now i have no idea why mysql won't start
[2012-07-13 00:30:33 -0400] flaccid_:  init: mysql main process (30737) terminated with status 1
[2012-07-13 00:31:08 -0400] hoover_damm: check out mysql.err
[2012-07-13 00:31:14 -0400] hoover_damm: or whatever it's called in the datadir
[2012-07-13 00:31:20 -0400] hoover_damm: sometimes it's syslog instead of there
[2012-07-13 00:32:13 -0400] flaccid_: seems this is all the info i get
[2012-07-13 00:32:27 -0400] flaccid_: it tries to start like kernel: [92190.403680] type=1400 audit(1342139482.027:38): apparmor="STATUS" operation="profile_replace" name="/usr/sbin/mysqld" pid=31049 comm="apparmor_parser"
[2012-07-13 00:32:42 -0400] KKumar_: using chef-solo, is it possible to set the run_list as part of attribute file processing, rather than passed as part of the json file argument?
[2012-07-13 00:32:56 -0400] flaccid_: then init: mysql main process (31053) terminated with status 1 and init: mysql respawning too fast, stopped
[2012-07-13 00:33:06 -0400] hoover_damm: flaccid_, that's in syslog... but now you need to check out /var/log/mysql/
[2012-07-13 00:33:13 -0400] hoover_damm: flaccid_, mysql can log to it's own file
[2012-07-13 00:33:21 -0400] flaccid_: hoover_damm: unfortunately nothing in the mysql logs
[2012-07-13 00:33:44 -0400] hoover_damm: if you teardown apparmor
[2012-07-13 00:33:45 -0400] hoover_damm: does it work?
[2012-07-13 00:34:13 -0400] erikh: apparmor :(
[2012-07-13 00:34:26 -0400] KKumar_: that is, can I over ride run_list as part of the code executed in the attributes file in my cookbook?
[2012-07-13 00:34:39 -0400] flaccid_: hoover_damm: negative
[2012-07-13 00:34:44 -0400] erikh: KKumar_: you can edit it, but it won't take effect until the next run
[2012-07-13 00:35:07 -0400] flaccid_: let me try again though
[2012-07-13 00:35:50 -0400] flaccid_: yep negative on that
[2012-07-13 00:36:00 -0400] hoover_damm: su - mysqld
[2012-07-13 00:36:02 -0400] hoover_damm: run it by hand?
[2012-07-13 00:36:35 -0400] flaccid_: Unknown id: mysqld
[2012-07-13 00:36:51 -0400] KKumar_: erikh: I am using chef-solo. I need the run_list to be determined dynamically. What's the best way to do it? (apart from invoking solo itself from a script)
[2012-07-13 00:36:56 -0400] flaccid_: i will try in sudo -i
[2012-07-13 00:37:35 -0400] hoover_damm: err mysql
[2012-07-13 00:37:41 -0400] erikh: KKumar_: honestly now, how much chef have you done before?
[2012-07-13 00:37:56 -0400] hoover_damm: kinda weak way to debug but when you don't have much to go on
[2012-07-13 00:38:01 -0400] erikh: I'm not as worried about your approach other than it's very unorthodox
[2012-07-13 00:38:03 -0400] flaccid_: hoover_damm: http://dpaste.org/hZBkX/
[2012-07-13 00:38:27 -0400] erikh: I'd suggest reading the literature for means on how to do this a little more idiomatic
[2012-07-13 00:38:47 -0400] hoover_damm: flaccid_, so you don't have InnoDB installed
[2012-07-13 00:38:50 -0400] hoover_damm: and your trying to use it?
[2012-07-13 00:39:06 -0400] hoover_damm: flaccid_, which is funny knowing on line 4
[2012-07-13 00:39:17 -0400] flaccid_: well this is the mysql::server recipe setting it up
[2012-07-13 00:39:22 -0400] hoover_damm: flaccid_, fdatasync
[2012-07-13 00:39:24 -0400] KKumar_: hmm, less than a week. any pointer?
[2012-07-13 00:39:26 -0400] hoover_damm: flaccid_, that's the issue
[2012-07-13 00:39:31 -0400] flaccid_: i didn't set it up, the recipe did
[2012-07-13 00:39:31 -0400] hoover_damm: flaccid_, wow that's a horrible error
[2012-07-13 00:39:38 -0400] hoover_damm: 120713  0:36:48 InnoDB: Unrecognized value fdatasync for innodb_flush_method
[2012-07-13 00:39:40 -0400] hoover_damm: right
[2012-07-13 00:39:42 -0400] hoover_damm: now fix the recipe
[2012-07-13 00:39:47 -0400] hoover_damm: so you can re-run
[2012-07-13 00:39:48 -0400] hoover_damm: and win
[2012-07-13 00:40:44 -0400] flaccid_: hoover_damm: so a bug in this ? https://github.com/opscode-cookbooks/mysql
[2012-07-13 00:40:48 -0400] Majost: What is the best way to distribute SSL keys to nodes?
[2012-07-13 00:41:02 -0400] erikh: KKumar_: have you read the literature on the wiki?
[2012-07-13 00:41:16 -0400] hoover_damm: flaccid_, https://github.com/opscode-cookbooks/mysql/pull/17
[2012-07-13 00:41:23 -0400] erikh: basically, what you probably should be doing is switching your approach based on metadata in recipes
[2012-07-13 00:41:30 -0400] erikh: not switching your runlist on metadata.
[2012-07-13 00:41:43 -0400] hoover_damm: it's truly unfortunate when people think they can just send a pull request without following the contributing process
[2012-07-13 00:41:53 -0400] hoover_damm: and the pulls get kinda 'lost' because the owner doesn't want to sign a CLA
[2012-07-13 00:41:55 -0400] flaccid_: hoover_damm: ah yeah thanks very much
[2012-07-13 00:42:03 -0400] hoover_damm: or whatever the reason is
[2012-07-13 00:42:23 -0400] hoover_damm: if your going to go through the effort of submitting a patch to Opscode to fix something... spend the time to make sure it gets accepted?
[2012-07-13 00:42:26 -0400] hoover_damm: seems logical
[2012-07-13 00:42:29 -0400] hoover_damm: not rocketscience
[2012-07-13 00:42:41 -0400] KKumar_: erikh: yes. Specifically http://wiki.opscode.com/display/chef/Setting+the+run_list+in+JSON+during+run+time
[2012-07-13 00:43:22 -0400] flaccid_: hoover_damm: do you recommend i do the same pull or something?
[2012-07-13 00:43:35 -0400] hoover_damm: flaccid_, you'll need that pull contents
[2012-07-13 00:43:40 -0400] hoover_damm: flaccid_, someone needs to resubmit the pill
[2012-07-13 00:43:43 -0400] hoover_damm: s/pill/pull
[2012-07-13 00:44:13 -0400] erikh: KKumar_: right this is at start time
[2012-07-13 00:44:25 -0400] erikh: editing it is a whole different matter
[2012-07-13 00:44:56 -0400] erikh: either use roles or make your cookbooks work with a variety of systems
[2012-07-13 00:45:48 -0400] KKumar_: erikh: ok. I think that my cookbook would be cleaner if there's not a lot of switching and branching. I do use roles - my run_list is a list of roles.
[2012-07-13 00:55:15 -0400] flaccid_: hoover_damm: until i get that pull done, do you think i can set ['mysql']['tunable']['innodb_flush_method'] in the node.json ?
[2012-07-13 01:02:52 -0400] Majost: Can encrypted databags be stored on disk as json for use with chef-solo?
[2012-07-13 01:04:28 -0400] flaccid_: ah not yet coz the logic isn't in the template, the extra commit tricked me
[2012-07-13 01:09:51 -0400] jtimberman: heh - tickets.opscode.com/browse/COOK-1443
[2012-07-13 01:15:04 -0400] flaccid_: jtimberman: i should be able to get around to do a new pull in a few hours
[2012-07-13 01:15:10 -0400] flaccid_: *request
[2012-07-13 01:17:52 -0400] flaccid_: hmm i still get FATAL: LoadError: no such file to load -- mysql coz of a require 'mysql' in a lib. is that for the rubygem? doesn't seem like it installs it
[2012-07-13 01:19:49 -0400] flaccid_: i guess this is http://tickets.opscode.com/browse/COOK-1009
[2012-07-13 01:21:07 -0400] flaccid_: i learnt to search :)
[2012-07-13 01:22:33 -0400] flaccid_: dang chef_gem is cool in shef
[2012-07-13 01:27:32 -0400] jtimberman: flaccid_: see COOK-1441
[2012-07-13 01:27:42 -0400] jtimberman: for discussion about rubygems and the mysql/postgresql cookbooks.
[2012-07-13 01:27:48 -0400] flaccid_: hmm, but what if the chef_gem needs build-essential run first for make?
[2012-07-13 01:27:58 -0400] flaccid_: ah yeah i got that mail too, thanks jtimberman
[2012-07-13 02:00:09 -0400] flaccid_: hmm does web_app resource support variables to export to the template?
[2012-07-13 02:36:25 -0400] cburyta: anybody know if running deploy resource with the action set to "force_deploy" is supposed to run the migration command also?
[2012-07-13 02:37:05 -0400] masterkorp: is there a specific resource to untar bz2 files ?
[2012-07-13 02:41:11 -0400] flaccid_: hmm if a template variable in the template is <%= @database['database'] %> in the resource option for variables, is this right to match up? :database['adapter'] => node['mediawiki_application']['database']['adaptor'],
[2012-07-13 02:47:09 -0400] prasad_dp_sc: hello
[2012-07-13 02:47:38 -0400] prasad_dp_sc: I have problem with knife vsphere
[2012-07-13 02:47:50 -0400] prasad_dp_sc: I am getting error
[2012-07-13 02:47:55 -0400] prasad_dp_sc: connecting
[2012-07-13 02:48:05 -0400] prasad_dp_sc: ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
[2012-07-13 02:48:10 -0400] prasad_dp_sc: Can I get help please
[2012-07-13 02:49:13 -0400] prasad_dp_sc: Anybody uses knife-vshpere?
[2012-07-13 02:51:52 -0400] prasad_dp_sc: I need help connecting to vcenter server using knife
[2012-07-13 02:51:59 -0400] prasad_dp_sc: help me plz
[2012-07-13 05:02:19 -0400] ivanoats: hey all. i am getting an error with the apache2 recipe - just on rackspace, but not on vagrant. error is chef::Exceptions::Package: No version specified, and no candidate version available for apache2
[2012-07-13 05:04:20 -0400] hector: package is missing in your repository it appears
[2012-07-13 05:04:42 -0400] hector: apt-cache search <pkg_name> on said system ?
[2012-07-13 05:07:00 -0400] BryanWB_: ohai chefs!
[2012-07-13 05:19:07 -0400] ivanoats: hector: thanks, yeah it looks like apt does not run before trying the apache2 recipe
[2012-07-13 05:19:14 -0400] ivanoats: even though it is first in the run list
[2012-07-13 05:19:26 -0400] ivanoats: ssh'd manually into the server and did apt-get update
[2012-07-13 05:19:33 -0400] ivanoats: but is there a way to avoid that?
[2012-07-13 05:20:02 -0400] hector: ahh, how do you add the repository ?
[2012-07-13 05:21:25 -0400] ivanoats: um
[2012-07-13 05:21:35 -0400] hector: if you add a repository using the apt_repository lwrp - apt-get update will always run a chef-client
[2012-07-13 05:21:47 -0400] hector: err on a chef-client run
[2012-07-13 05:21:52 -0400] ivanoats: sorry, i am total n00b on chef
[2012-07-13 05:22:06 -0400] hector: http://wiki.opscode.com/display/chef/Opscode+LWRP+Resources#OpscodeLWRPResources-apt
[2012-07-13 05:22:22 -0400] BryanWB_: sheeeittt!
[2012-07-13 05:24:29 -0400] retr0h: I also recommend adding apt to your base role - it runs apt-get update to make sure your fresh
[2012-07-13 05:24:56 -0400] ivanoats: yeah, i guess i need to create a base role
[2012-07-13 05:25:02 -0400] ivanoats: just had one role - webserver
[2012-07-13 05:26:22 -0400] ivanoats: the run list was run_list "recipe[apt]", "recipe[apache2]", "recipe[apache2::mod_ssl]", "recipe[rvm::system]"
[2012-07-13 05:26:30 -0400] ivanoats: so i thought apt would run first
[2012-07-13 05:26:37 -0400] retr0h: ivanoats: thats fine - altho I tend to have a base role regardless where I have ohai, chef_handlers, common system tools, ntp, monitoring defined then you can just drop that base role into your webserver role..
[2012-07-13 05:26:44 -0400] ivanoats: but it looks like APAche is before APT
[2012-07-13 05:26:57 -0400] retr0h: I find it useful to give all my nodes common behavior
[2012-07-13 05:27:46 -0400] ivanoats: is there a good source for a base role online somewhere?
[2012-07-13 05:27:49 -0400] retr0h: recipe[apt] is jsut going to apt-get update more or less
[2012-07-13 05:28:21 -0400] ivanoats: found one
[2012-07-13 05:28:22 -0400] ivanoats: https://gist.github.com/858903
[2012-07-13 05:28:54 -0400] hector: hmm if recipe[apt] is first in the run_list, an apt-get update should have ran
[2012-07-13 05:29:09 -0400] ivanoats: ok, that's what i thought, thanks for confirming
[2012-07-13 05:33:34 -0400] hector: np
[2012-07-13 06:35:49 -0400] nd__: retr0h: I thought ohai is on chef-managed-nodes anyway, why installing it as a package?
[2012-07-13 06:42:42 -0400] prasad: I need help with knife-vsphere, getting error while running knife vsphere vm list
[2012-07-13 06:42:52 -0400] prasad: ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
[2012-07-13 06:43:12 -0400] prasad: Please suggest if I am doing anything wrong
[2012-07-13 06:43:35 -0400] prasad: On the same wkstation knife-esx i working fine
[2012-07-13 06:44:05 -0400] prasad: I would like to connect to vcenter rather than just ESXi host
[2012-07-13 07:24:25 -0400] coderanger: Does http://hastebin.com/xodedaqalu.rb look insane to you guys?
[2012-07-13 07:25:41 -0400] erikh: just to be sane I'd anchor the regex for the device at the end, e.g. \d+$
[2012-07-13 07:25:46 -0400] erikh: safe*
[2012-07-13 07:26:08 -0400] coderanger: Eh, thats just for display purposes in the error message, nothing important :)
[2012-07-13 07:26:15 -0400] erikh: other than that, I don't know much about drbd to be honest, so I'll refrain from comments otherwise
[2012-07-13 07:26:17 -0400] erikh: fair enough.
[2012-07-13 10:25:47 -0400] jacobat: What is the process for contributing patches to cookbooks back to chef? Github pull requests? tickets.opscode.com?
[2012-07-13 10:30:18 -0400] jacobat: http://wiki.opscode.com/display/chef/How+to+Contribute provides the answer
[2012-07-13 10:36:59 -0400] zoubi: hello all
[2012-07-13 10:37:22 -0400] zoubi: I have a vagrant VM whose run list is a role
[2012-07-13 10:37:38 -0400] zoubi: the cookbooks needed by the role are correctly uploaded, as well as the role
[2012-07-13 10:38:55 -0400] zoubi: but when I launch vagrant, I have no errors, but the cookbooks of the role are not applied
[2012-07-13 10:39:11 -0400] zoubi: here is my VagrantFile http://pastebin.com/tFcW8EzF
[2012-07-13 10:40:06 -0400] zoubi: and the log : http://pastebin.com/gJ47Hx5q
[2012-07-13 10:55:06 -0400] jacobat: It seems the client run completes but it doesn't do anything. What does your role look like?
[2012-07-13 11:31:46 -0400] RJ2: "FATAL: Sorry, knife-spork requires ruby 1.9 or newer" <-- i have 1.9 installed, /etc/alternates updated, ruby --version shows 1.9.3p0. How can i make the spork plugin use it?
[2012-07-13 11:32:54 -0400] RJ2: i tried gem installing it again, didn't help (but gem installing chef again after switching to ruby 1.9 did make knife use new ruby)
[2012-07-13 11:52:56 -0400] gale: hello
[2012-07-13 11:53:39 -0400] gale: is there a nice cookbook I can use that mananges various cloud dns providers? Rackspace, Amazon etc so I don't have to worry about switching between them?
[2012-07-13 12:06:37 -0400] masterkorp: Is there any cookbook to the amazon S3 service ?
[2012-07-13 12:12:57 -0400] chrismdp: hello! is there any reason I get this error when running "knife ec2 server create..."? "data not multiple of block length (OpenSSL::Cipher::CipherError)"
[2012-07-13 12:13:57 -0400] chrismdp: looks like it's occurring inside ssh_command inside knife. I can successfully ssh into the new server via the command line.
[2012-07-13 12:14:04 -0400] chrismdp: any ideas, anyone?
[2012-07-13 12:15:12 -0400] ranjibd: gale, you have to write one.. on top of fog
[2012-07-13 12:15:58 -0400] ranjibd: masterkorp, the aws cookbook has ebs and eip support, not s3, you can use s3cmd or s3culr to write one...
[2012-07-13 12:16:28 -0400] masterkorp: its uses fog right ?
[2012-07-13 12:18:39 -0400] masterkorp: oh man will do so
[2012-07-13 12:18:53 -0400] masterkorp: just such a tight schedule
[2012-07-13 12:19:04 -0400] masterkorp: i freaking hate deadlines
[2012-07-13 12:21:23 -0400] gale: ranjibd: cheers that looks like the way to do it, aye
[2012-07-13 12:31:28 -0400] ranjibd: masterkorp, we all hate deadlines..  :-)
[2012-07-13 12:32:03 -0400] chrismdp: Found the issue: turns out I needed to hack command.force_encoding("binary") into knife/ssh.rb to make it work.
[2012-07-13 12:32:10 -0400] masterkorp: "Even if its shit and does nothing usefull, it has to be done by that day"
[2012-07-13 12:32:16 -0400] chrismdp: will submit a ticket and pull request
[2012-07-13 12:32:21 -0400] ranjibd: masterkorp, exactly what you are trying to do? i have a couple of cookbooks on top of s3curl & s3cmd
[2012-07-13 12:32:58 -0400] masterkorp: ranjibd: trying to sync and backup some dirs from there
[2012-07-13 12:33:20 -0400] masterkorp: ranjibd:  i would to have a resource to get a dir from there to a machine
[2012-07-13 12:38:05 -0400] ranjibd: masterkorp, s3cmd has a sync facility .. you can wrap it as an execute resource.. also u need to drop a .cfg file.. you can templatize/cookbook_file that
[2012-07-13 12:39:56 -0400] chrismdp: and the original error was due to me using unicode characters to describe the role on the command line :) copy paste from google doc == bad idea :)
[2012-07-13 12:40:16 -0400] masterkorp: ranjibd: hmm nice
[2012-07-13 12:40:38 -0400] masterkorp: ranjibd: i could use it untill i get s3 support on aws cook
[2012-07-13 12:40:49 -0400] masterkorp: ranjibd: can you share ?
[2012-07-13 13:04:10 -0400] huhongbo: in recipes i use node.ipaddress ,why got the "["fe80::a00:27ff:fe09:8e76", {"family"=>"inet6", "prefixlen"=>"64", "scope"=>"Link"}]."
[2012-07-13 13:06:22 -0400] huhongbo: sometime node,ipaddress give me "["172.16.1.10", {"broadcast"=>"172.16.1.255", "netmask"=>"255.255.255.0", "family"=>"inet", "prefixlen"=>"24", "scope"=>"Global"}]."
[2012-07-13 13:06:38 -0400] huhongbo: i run ohai ipaddress i got the right ipaddress
[2012-07-13 13:21:21 -0400] jerem`: the #{Chef::Config[:file_cache_path]} variable isn't correct because it use c:/.. for path whereas c:\..
[2012-07-13 13:45:19 -0400] dwhsix1: if I'm using the latest application cookbook (specifically _ruby) should I also be using "recipe[database::master]"?
[2012-07-13 13:54:22 -0400] markba: Hi there.
[2012-07-13 13:54:46 -0400] markba: I've come across an issue when using cloud-config to create the firstboot.json
[2012-07-13 13:54:54 -0400] markba: ... It doesn't get created
[2012-07-13 13:55:08 -0400] markba: I believe this is similar to http://tickets.opscode.com/browse/CHEF-2962
[2012-07-13 13:55:13 -0400] markba: Anyone have a workaround??
[2012-07-13 13:55:38 -0400] markba: Also...
[2012-07-13 13:55:39 -0400] markba: 2012-07-13T13:55:28+00:00] ERROR: Running exception handlers [2012-07-13T13:55:28+00:00] ERROR: Report handler Chef::Handler::ErrorReport raised #<Encoding::UndefinedConversionError: "\x8B" from ASCII-8BIT to UTF-8> [2012-07-13T13:55:28+00:00] ERROR: /var/lib/gems/1.9.1/gems/chef-10.12.0/lib/chef/node.rb:502:in `encode' [2012-07-13T13:55:28+00:00] ERROR: /var/lib/gems/1.9.1/gems/chef-10.12.0/lib/chef/node.rb:502:in `to_json' [2012-07-13
[2012-07-13 14:03:19 -0400] geekbri: anybody else notice the opscode website being a tad slow this morning?
[2012-07-13 14:05:52 -0400] dwhsix1: been to community.opscode.com a few times, seemed fine
[2012-07-13 14:09:44 -0400] markba: I really need to have a firstboot.json generated... If knife bootstrap, and run_list from cloud-config are broken... what do/
[2012-07-13 14:46:10 -0400] rbuck: hi
[2012-07-13 14:46:59 -0400] rbuck: after following the apt-get install instructions for creating my own server it fails to run. in fact i get strange errors during installation please see this http://pastebin.com/TmizuUWv
[2012-07-13 14:47:16 -0400] rbuck: "You seem to have a legacy setting for solr_url"
[2012-07-13 14:47:25 -0400] rbuck: the install fails to start up the services
[2012-07-13 14:47:43 -0400] rbuck: i am trying to install on ubuntu server 11.04
[2012-07-13 14:48:34 -0400] rbuck: on the same server i have apache previously installed which serves up a ISO mirror, and a TFTP site serving up PXELINUX images.
[2012-07-13 14:49:15 -0400] rbuck: has anyone any better suggestions for installing on ubuntu server 11.04? or workarounds for known issues?
[2012-07-13 14:58:49 -0400] BryanWB_: what's the easiest way to get ruby19 on a machine? i am using omnibus chef so that's why i don't have it in the 1st place
[2012-07-13 14:59:20 -0400] knuckolls: what OS?
[2012-07-13 14:59:28 -0400] BryanWB_: centos :)
[2012-07-13 14:59:34 -0400] BryanWB_: 6, luckily
[2012-07-13 14:59:54 -0400] BryanWB_: i have the rbel repository enabled but i have had issues w/ those rpms in the past
[2012-07-13 15:00:06 -0400] knuckolls: another will surely be able to help ;) my centos is rusty
[2012-07-13 15:00:35 -0400] BryanWB_: there probably is a way to do it quickly w/ the rbenv and ruby_build cookbooks but it is not readily apparent to me
[2012-07-13 15:00:56 -0400] knuckolls: i'd opt for a package
[2012-07-13 15:03:19 -0400] dwhsix: along similar lines, I've installed ruby from package on ubuntu 12.04, but it really seems to me like chef is still using the embedded ruby sometimes (and at bad times)
[2012-07-13 15:03:34 -0400] dwhsix: for example, when bundler tries to install my gems, the nokogiri build is failing, and I see:
[2012-07-13 15:03:58 -0400] dwhsix:     /opt/chef/embedded/bin/ruby extconf.rb
[2012-07-13 15:04:10 -0400] dwhsix: this puzzles & worries me
[2012-07-13 15:06:29 -0400] dwhsix: this is during deploy:
[2012-07-13 15:06:32 -0400] dwhsix: Processing execute[bundle install --path=vendor/bundle --deployment --without development test cucumber production] action run (/var/chef/cache/cookbooks/application_ruby/providers/rails.rb line 80)
[2012-07-13 15:18:26 -0400] yfeldblum: dwhsix, hmm, that might be a problem
[2012-07-13 15:18:47 -0400] yfeldblum: dwhsix, also a problem is the incorrect --without argument passed to bundle
[2012-07-13 15:19:47 -0400] dwhsix: yfeldblum: I can post my recipe we're I'm trying to use application_ruby, if that might help debug...
[2012-07-13 15:19:51 -0400] dwhsix: *where
[2012-07-13 15:23:10 -0400] yfeldblum: dwhsix, don't really know terribly much about that cookbook
[2012-07-13 15:24:53 -0400] dwhsix: yfeldblum: k, thx the problem may be with the deploy resource, ultimately
[2012-07-13 15:25:05 -0400] dwhsix: I dunno just so damn frustrating
[2012-07-13 15:25:17 -0400] jonathandade: Is there a way to use a '$' in an attribute without it being seen as a variable?
[2012-07-13 15:25:40 -0400] masterkorp: http://www.slideshare.net/jtimberman/understanding-lwrp-development
[2012-07-13 15:25:57 -0400] masterkorp: can someone with a facebook account download me this ?
[2012-07-13 15:25:58 -0400] yfeldblum: dwhsix, sorry?
[2012-07-13 15:27:29 -0400] dwhsix: yfeldblum: just trying to debug this is very frustrating I feel like I must be going at cross-purposes to what omnibus chef wants me to do, but don't know
[2012-07-13 15:27:59 -0400] dwhsix: I assume (possibly incorrectly) that my rails app should be run with a ruby that's *not* the omnibus embedded ruby...
[2012-07-13 15:28:05 -0400] dwhsix: maybe that's wrong
[2012-07-13 15:29:01 -0400] jerem`: When I call a restart for a service in my recipe, I need to include this the recipe of this service in my recipe
[2012-07-13 15:29:04 -0400] jerem`: right ?
[2012-07-13 15:29:43 -0400] yfeldblum: dwhsix, that's the right assumption
[2012-07-13 15:30:05 -0400] dwhsix: yfeldblum: whew-
[2012-07-13 15:30:07 -0400] dwhsix: thx
[2012-07-13 15:30:12 -0400] yfeldblum: dwhsix, problem is, not everything knows to check for that
[2012-07-13 15:30:18 -0400] yfeldblum: jonathandade, more details?
[2012-07-13 15:30:24 -0400] dwhsix: as I'm painfully discovering
[2012-07-13 15:36:04 -0400] jonathandade: I have an attribute I am setting on the node that is a password. It was set including a '$' in it. When I run a recipe that just puts this to the screen or writes it in the file the $.... is missed. I assume because it is being seen as an unset variable.
[2012-07-13 15:36:11 -0400] jonathandade: Is there any way around this?
[2012-07-13 15:42:26 -0400] masterkorp: jonathandade: http://dc393.4shared.com/img/-XRUz-xC/s7/deal_with_it.gif
[2012-07-13 15:45:15 -0400] jtimberman: jonathandade: what kind of password? where / how is it set in the recipe?
[2012-07-13 15:47:52 -0400] jonathandade: At the moment the password is in plain text, but it is being used with curl. I was trying to figure out why the auth failed and got back to the attribute being passed  was similar to 'Uber$ecretPassword' but only the 'Uber' part was being passed along.
[2012-07-13 15:48:46 -0400] jonathandade: At the moment I am testing it by setting it in the node json on my local machine for testing
[2012-07-13 15:53:47 -0400] jonathandade: Oops my bad its fine in a plain ol' recipe. It's when its in the bash do block...
[2012-07-13 15:54:03 -0400] jtimberman: you probably need to quote it, or escape the $
[2012-07-13 15:56:23 -0400] jonathandade: I tried a few ways so far. Guess I'll have to keep trying. I may have to go look at the code for the bash provider.
[2012-07-13 15:59:45 -0400] jasond: for the package resource does "action :upgrade" install the package if it's not installed?
[2012-07-13 16:07:40 -0400] ivanoats: why does apt-get update not run when the recipe[apt] is in the run list?
[2012-07-13 16:09:16 -0400] knuckolls: https://github.com/opscode-cookbooks/apt/blob/master/recipes/default.rb
[2012-07-13 16:09:24 -0400] knuckolls: looks like that first execute resource should fire
[2012-07-13 16:09:43 -0400] ivanoats: knuckolls: right, line 23 says it should run, right?
[2012-07-13 16:09:55 -0400] knuckolls: you can force an update by notifying the apt-get update resource from other cookbooks
[2012-07-13 16:10:05 -0400] knuckolls: well there's that not_if, is that file there?
[2012-07-13 16:10:07 -0400] PapaSierra: i inherited cookbooks including one called vagrant_main (obviously the "main" recipe for use with vagrant). I decided to copy paste that vagrant_main and call it project where i could basically modify it for my project. i invoke project::default, but somehow its reading in vagrant_main::attributes. why would that be? do i need to specify the attribute file? i would have thought it just used attributes from the same cookbook and nothing else?
[2012-07-13 16:10:19 -0400] knuckolls: i also saw something about a bug/regression in the apt cookbook....
[2012-07-13 16:10:35 -0400] ivanoats: i can't install anything without apt working
[2012-07-13 16:10:56 -0400] knuckolls: ivanoats: https://github.com/opscode-cookbooks/rabbitmq/commit/9bab2c64ed154cfb4e9bf88f0b8eb0b699dea8e9#commitcomment-1575118
[2012-07-13 16:11:09 -0400] knuckolls: this is all the evidence i have about a possible bug
[2012-07-13 16:11:30 -0400] ivanoats: this is pretty tough stuff for a noob
[2012-07-13 16:11:47 -0400] knuckolls: ah it'll give you some XP though
[2012-07-13 16:11:54 -0400] knuckolls: are you on ec2?
[2012-07-13 16:12:00 -0400] ivanoats: should i just ssh to server and run it manually? seems counter productive
[2012-07-13 16:12:02 -0400] ivanoats: rackspace
[2012-07-13 16:12:10 -0400] knuckolls: does rackspace have the concept of user-data?
[2012-07-13 16:12:21 -0400] knuckolls: so you can pass in a script on bootup, before the bootstrap?
[2012-07-13 16:12:42 -0400] knuckolls: i pass in a few things in a custom user-data script on ec2, apt-get update being one of them. ulimit fixes as well.
[2012-07-13 16:13:12 -0400] ivanoats: not exactly sure what that means but I googled "rackspace user data" and got this merged commit which seems to indicate it does https://github.com/rackspace/python-novaclient/pull/108
[2012-07-13 16:13:44 -0400] jordane: knuckolls: I know the api supports doing such things. Don't know if the knife plugin does.
[2012-07-13 16:14:00 -0400] bradgignac: i don't believe it does
[2012-07-13 16:14:23 -0400] bradgignac: actually, i don't think the first-gen api supports it. i believe its just the next-gen api
[2012-07-13 16:14:53 -0400] knuckolls: well knife-rackspace uses fog internally
[2012-07-13 16:15:07 -0400] knuckolls: so if fog has support for it, it can be abstracted up to knife-rackspace pretty easily
[2012-07-13 16:15:15 -0400] knuckolls: but it doesn't solve ivanoats problem
[2012-07-13 16:15:18 -0400] ivanoats: that would be great to have an example of how to pass a simple command before bootstrap
[2012-07-13 16:15:26 -0400] ivanoats: e.g. "apt-get update"
[2012-07-13 16:15:33 -0400] cooper: yah, but i don't think fog has been updated to support the new API (rackspace on openstack)
[2012-07-13 16:15:35 -0400] bradgignac: knife-rackspace only works for first-gen servers
[2012-07-13 16:15:44 -0400] bradgignac: knife-openstack works for next-gen servers
[2012-07-13 16:16:16 -0400] cooper: bradgignac: true?? last i tried a few weeks ago it did not mattray around?
[2012-07-13 16:16:23 -0400] bradgignac: i was just looking for him
[2012-07-13 16:16:49 -0400] knuckolls: ivanoats: chef doesn't really have a concept of "before bootstrap", that's what i use user-data for. But one thing you can do is just write a custom recipe as the first thing in your run-list that runs an execute apt-get update.
[2012-07-13 16:17:23 -0400] ivanoats: so... do i create a new recipe in my apt cookbook?
[2012-07-13 16:17:26 -0400] cooper: i'm knife-rackspace-ing a ubuntu image with recipe[apt] in the run listi have not seen the issue ivanoats is seeing.
[2012-07-13 16:17:26 -0400] knuckolls: ivanoats: just shell out to do it, it's a hack but it works. if there's really a bug with the apt recipe then any evidence you can provide and put in an opscode jira ticket would be helpful
[2012-07-13 16:17:48 -0400] knuckolls: ivanoats: just make a new cookbook, "init-fix" or whatever. make a new recipe default.rb, put your fix in there, and upload the cookbook
[2012-07-13 16:17:53 -0400] ivanoats: cooper: what image?
[2012-07-13 16:18:00 -0400] bradgignac: cooper: mattray just recently released a new version about 2 weeks ago, and it should work
[2012-07-13 16:18:13 -0400] cooper: ivanoats: 125  Ubuntu 12.04 LTS
[2012-07-13 16:18:38 -0400] knuckolls: cooper: what version of your apt cookbook?
[2012-07-13 16:18:42 -0400] ivanoats: wierd, let me gist my roles
[2012-07-13 16:19:08 -0400] cooper: bradgignac: good news! i'm going to give it a shot today.
[2012-07-13 16:19:10 -0400] ivanoats: I'm using apt 1.2.0
[2012-07-13 16:19:12 -0400] cooper: knuckolls: 1.4.2
[2012-07-13 16:19:49 -0400] bradgignac: cooper: can you ping me if it doesn't? the fog work i've done *should* enable it, but i want ot make sure
[2012-07-13 16:20:11 -0400] ivanoats: so.. maybe librarian-chef gave me an old version of the apt cookbook somehow
[2012-07-13 16:20:59 -0400] cooper: bradgignac: yah, can do. will ping you only if it *doesn't*need to update gem & lunch soon, but i'll get back to you if it doesn't work out. thx.
[2012-07-13 16:21:30 -0400] bradgignac: cooper: awesome. thanks. rackspace is doing a bunch of work right now to make sure that fog and chef are ready for all their new product offerings
[2012-07-13 16:22:14 -0400] cooper: bradgignac: i was trying to poke us to do that (i work there). do you know w/ whom you've worked?
[2012-07-13 16:22:24 -0400] bradgignac: cooper: i work there too
[2012-07-13 16:22:36 -0400] cooper: ivanoats: INFO: Processing execute[apt-get-update] action run (apt::default line 22)
[2012-07-13 16:22:43 -0400] bradgignac: cooper: i contributed DBaaS and identity to fog
[2012-07-13 16:23:20 -0400] ivanoats: yeah, it looks like when I set up apt with librarian-chef I was pulling from fnichol's repo instead of opscode. going to try now with the latest version
[2012-07-13 16:23:36 -0400] cooper: bradgignac: awesome. good work :)
[2012-07-13 16:23:51 -0400] knuckolls: ivanoats: hope that works for you. i've gotta go. best of luck.
[2012-07-13 16:26:11 -0400] cooper: ivanoats: glad you've got it figured out
[2012-07-13 16:26:38 -0400] ivanoats: thanks for the pointers everyone.. will let you know when it works, server is building
[2012-07-13 16:36:16 -0400] dmerrick: i'm getting a weird error decrypting a data bag on 10.12 i get the following:
[2012-07-13 16:36:17 -0400] dmerrick: Psych::SyntaxError: couldn't parse YAML at line 2 column 15
[2012-07-13 16:36:29 -0400] dmerrick: there's no yaml though it's json
[2012-07-13 16:39:22 -0400] ranjibd: hola
[2012-07-13 16:42:01 -0400] mvisich: is there any ways to set an enviroment off a firstboot.json?
[2012-07-13 16:44:42 -0400] ivanoats: follow-up, the latest version of the apt recipe fixed my issue
[2012-07-13 16:45:51 -0400] mvisich: does anyone know if there is a way to set the enviroment for a node via the first boot.json ?
[2012-07-13 16:52:47 -0400] retr0h: nd___: for custom ohai plugins
[2012-07-13 16:53:32 -0400] retr0h: nd___: drop them in ohai/files/default/plugins/ for distribution
[2012-07-13 16:57:59 -0400] ranjibd: mvisich, -E will do , from command line
[2012-07-13 17:00:23 -0400] mvisich: chef-client -E ?
[2012-07-13 17:01:37 -0400] mvisich: awww sick thanks!
[2012-07-13 17:01:48 -0400] upgrayedd: when should variables in templates have @ and when should they not?
[2012-07-13 17:02:50 -0400] mvisich: @ is when you are taking values from the attribute files
[2012-07-13 17:02:59 -0400] yfeldblum: mvisich, ?
[2012-07-13 17:04:07 -0400] yfeldblum: upgrayedd, when you assign to the template resource, in your recipe, its variables (variables :key1 => "value1", :key2 => "value2"), each key-value pair in that Hash will be made available to your template ERB as an instance variable with @
[2012-07-13 17:04:48 -0400] yfeldblum: upgrayedd, so in that example, you will be able to use @key1 and @key2 in the template ERB
[2012-07-13 17:05:44 -0400] upgrayedd: yfeldblum, thanks
[2012-07-13 17:18:25 -0400] anthroprose: does there already exist or is there an easy way to add a hook inbetween the ec2 provisioning step and chef-client bootstrapping when doing a knife provisioning?  I'd like to spin up instances from outside of a VPC and need to attach an EIP in the middle of the process to keep going with SSH....
[2012-07-13 17:18:57 -0400] dmerrick: i was able to fix my issue by installing/upgrading the psych gem
[2012-07-13 17:22:27 -0400] Majost: Are encrypted data bags supported in chef solo?
[2012-07-13 17:35:58 -0400] yfeldblum: Majost, what purpose would they serve?
[2012-07-13 17:36:28 -0400] yfeldblum: Majost, what purpose would they serve *you*?
[2012-07-13 17:37:13 -0400] Majost: to test out our cookbook
[2012-07-13 17:38:08 -0400] yfeldblum: Majost, i just looked at the code, and i can't see why they wouldn't work
[2012-07-13 17:38:18 -0400] yfeldblum: Majost, but you may want to test it
[2012-07-13 17:38:43 -0400] Majost: yeah, I asked because I am having some issues getting it to work as one would expect
[2012-07-13 17:39:10 -0400] yfeldblum: Majost, how?
[2012-07-13 17:40:52 -0400] Majost: yfeldblum: EJC will tell you
[2012-07-13 17:41:01 -0400] Majost: we are working on this together
[2012-07-13 17:41:19 -0400] EJC: hello - yeah, the error we're getting looks like it's not understanding the copied/pasted values I grabbed from the encrypted databag
[2012-07-13 17:41:38 -0400] EJC: "FATAL: OpenSSL::Cipher::CipherError: bad decrypt"
[2012-07-13 17:49:18 -0400] hoover_damm: sounds like you have the wrong secret
[2012-07-13 17:52:06 -0400] EJC: I generated an actual encrypted databag and am using that exact key
[2012-07-13 17:56:19 -0400] EJC: then I'm using that exact key this way Chef::EncryptedDataBagItem.load("encrypted_certs", "item", "/full/path/to/databag_key")
[2012-07-13 17:57:54 -0400] hoover_damm: well if your getting that error message
[2012-07-13 17:57:58 -0400] hoover_damm: sounds like what you think isn't true
[2012-07-13 18:15:57 -0400] ivanoats: if I update a role, will the node apply the new recipes in the role
[2012-07-13 18:16:09 -0400] EJC: I'm more curious if passing in the secret file to the "load" method - id it prefixing that path with /etc/chef or something?
[2012-07-13 18:16:48 -0400] miah: ivanoats: yes, next time the client checks in it will receive the updates
[2012-07-13 18:19:24 -0400] arthur_kalm: Hello everyone, I just upgraded my chef server from 0.10.08 to 0.10.12 and I'm running into this issue: http://tickets.opscode.com/browse/CHEF-3256
[2012-07-13 18:20:20 -0400] arthur_kalm: This is on a 10.04 ubuntu server
[2012-07-13 18:20:32 -0400] arthur_kalm: With Chef installed from apt
[2012-07-13 18:21:27 -0400] sabooky: How does one supress newlines in chef templates?
[2012-07-13 18:22:52 -0400] arthur_kalm: Does anyone know what the solution is?
[2012-07-13 18:25:10 -0400] arthur_kalm: I really don't want to roll back. Is this a known issue with 0.10.12?
[2012-07-13 18:25:46 -0400] jtimberman: fwiw, we dropped the 0. from 10.12+
[2012-07-13 18:26:07 -0400] jtimberman: sabooky: newlines from erb lines like if statements?
[2012-07-13 18:26:30 -0400] sabooky: yeah, if and .each
[2012-07-13 18:26:31 -0400] jtimberman: sabooky: <% if condition -%>, that is, use the -%>
[2012-07-13 18:26:41 -0400] jtimberman: that will suppress the newline.
[2012-07-13 18:26:47 -0400] sabooky: Oh cool
[2012-07-13 18:26:52 -0400] sabooky: is that a chef specific thing or an ERB thing?
[2012-07-13 18:27:14 -0400] jtimberman: erb
[2012-07-13 18:27:20 -0400] sabooky: I was testing it in pry (irb like tool)
[2012-07-13 18:27:27 -0400] sabooky: cool.. I'll give that a go.. thanks a bunch
[2012-07-13 18:27:31 -0400] jtimberman: cheers
[2012-07-13 18:28:37 -0400] sabooky: hmm.. ERB didn't like the -%>
[2012-07-13 18:28:46 -0400] sabooky: but it's ok.. I know that works in chef since i've seen it before
[2012-07-13 18:28:51 -0400] sabooky: Thanks, will test with chef
[2012-07-13 18:29:07 -0400] arthur_kalm: jtimberman is that a known problem in 10.12? I have a very vanilla install and managing only 10 nodes
[2012-07-13 18:33:00 -0400] jtimberman: arthur_kalm: sorry, i'm not very familiar with the state of open source chef server these days.
[2012-07-13 18:33:32 -0400] arthur_kalm: Ok thanks
[2012-07-13 18:38:38 -0400] dwhsix: so earlier I was talking about how the deploy in the application cookbook seemed to be using embedded ruby, even though I had installed ruby from package for the system to use
[2012-07-13 18:39:06 -0400] erikbeta: if I'm setting something in an environment via default_attributes() should that replace anything set in a cookbook's attribute file?
[2012-07-13 18:39:15 -0400] dwhsix: if I go on the node, run shef, and do the execute('bundle') command, it now looks like it's using the installed system ruby (which is what I want)
[2012-07-13 18:39:29 -0400] miah: erikbeta: yes
[2012-07-13 18:39:33 -0400] dwhsix: is that just a symptom of dong the deploy in the same chef run that ruby got installed in?
[2012-07-13 18:39:35 -0400] miah: attributes?
[2012-07-13 18:39:35 -0400] bawt_: attributes is http://wiki.opscode.com/display/chef/Attributes
[2012-07-13 18:39:39 -0400] miah: erikbeta: go read that
[2012-07-13 18:39:48 -0400] dwhsix: *doing
[2012-07-13 18:39:56 -0400] miah: i think dong was appropriate
[2012-07-13 18:39:59 -0400] dwhsix: lol
[2012-07-13 18:40:05 -0400] erikbeta: miah: right I did, I'm setting listen_ports and for some reason it seems to be merging with the defaults in the cookbook
[2012-07-13 18:40:45 -0400] erikbeta: I thought they only got merged if they were of the same precedence level? i.e. two variables being set in cookbooks?
[2012-07-13 18:40:56 -0400] miah: no
[2012-07-13 18:41:18 -0400] miah: its a precedence level. some things take higher precedence than others..
[2012-07-13 18:41:44 -0400] miah: the condition of being considered more important than someone or something else; priority in importance, order, or rank: his desire for power soon took precedence over any other consideration.
[2012-07-13 18:41:50 -0400] miah: ^- precedence
[2012-07-13 18:42:14 -0400] erikbeta: right I'm just confused how apache listen_ports is being merged
[2012-07-13 18:42:20 -0400] erikbeta: when I am setting it in an environment
[2012-07-13 18:42:29 -0400] erikbeta: e.g. "listen_ports" => [ "8080", "443" ], is in my environment
[2012-07-13 18:42:54 -0400] erikbeta: and when the cookbook runs I end up with "8080", "443", "80"
[2012-07-13 18:43:08 -0400] erikbeta: and afaik there is nothing setting it on the role or node
[2012-07-13 18:44:16 -0400] erikbeta: I guess I'll try just using override_attributes() and see if that works
[2012-07-13 18:45:55 -0400] mattray: erikbeta: 80 is in the attributes.rb with the cookbook?
[2012-07-13 18:46:36 -0400] erikbeta: mattray: yep
[2012-07-13 18:46:45 -0400] erikbeta: its just the stock opscode apache2 cookbook
[2012-07-13 18:46:50 -0400] mattray: override should clear that up
[2012-07-13 18:47:38 -0400] erikbeta: yeah I was hoping to figure out why default didn't seem to work, oh well, that's the only variable giving me this trouble
[2012-07-13 18:51:46 -0400] arthur_kalm: Does chef server 10.12 work with ruby 1.8.7 or does it need 1.9?
[2012-07-13 18:53:30 -0400] EJC: ahhh - my issue was I failed to "load" the secret then pass that object along (I was just trying to pass the path to the secret file)
[2012-07-13 18:53:34 -0400] EJC: all good now
[2012-07-13 19:13:48 -0400] hoover_damm: arthur_kalm, unfortunately it still supports 1.8.7
[2012-07-13 19:14:21 -0400] hoover_damm: may run into 1.9.x cookbooks
[2012-07-13 19:14:23 -0400] hoover_damm: but chef should work
[2012-07-13 19:16:15 -0400] nickpresta: Hello, I want to provision my VMs with chef-solo using Vagrant. I have a multi-VM setup and the chef-solo provisioner works great. However, I want to have a "base" set of recipes and then VM-specific recipes. This is what I have now: http://dpaste.com/770340/ I know this is a "vagrant" thing, but I figured someone here has done what I'm trying before.
[2012-07-13 19:21:07 -0400] miah: mattray: making progress on dhcp =)
[2012-07-13 19:21:51 -0400] hoover_damm: dhcp? what's wrong with radvd?
[2012-07-13 19:22:02 -0400] hoover_damm: ;)
[2012-07-13 19:23:33 -0400] emperorcezar: How can I append to a config file in a recipe?
[2012-07-13 19:25:25 -0400] geekbri: what kind of a config file?  There are a few ways you could do it, what the right way is might depend on many different things :)
[2012-07-13 19:26:00 -0400] hoover_damm: s/right/wrong
[2012-07-13 19:26:02 -0400] hoover_damm: or left? hehe
[2012-07-13 19:26:10 -0400] hoover_damm: sometimes the right was is never to be found
[2012-07-13 19:26:13 -0400] hoover_damm: and it's a way that works
[2012-07-13 19:26:20 -0400] emperorcezar: geekbri: I need to add a line to the end of /etc/profile
[2012-07-13 19:26:26 -0400] emperorcezar: idiomatically
[2012-07-13 19:26:35 -0400] emperorcezar: however you spell it
[2012-07-13 19:27:09 -0400] geekbri: emperorcezar: perhaps dropping a file into /etc/profile.d/ if youre distro supports it, is the proper way to go :)
[2012-07-13 19:29:08 -0400] mattray: miah: you see my tweets? that article about omshell, we could just use the script resource as an lwrp to manage it
[2012-07-13 19:29:56 -0400] hoover_damm: emperorcezar, wrong
[2012-07-13 19:30:04 -0400] hoover_damm: emperorcezar, what geekbri said is 100% right
[2012-07-13 19:30:13 -0400] hoover_damm: drop it iin /etc/profie.d to set, unset, etc
[2012-07-13 19:30:26 -0400] hoover_damm: blew my mind to realize there's /etc/sysctl.d
[2012-07-13 19:30:42 -0400] hoover_damm: now i feel like i've been licking the yellow bus window on sysctl
[2012-07-13 19:30:43 -0400] hoover_damm: for too long
[2012-07-13 19:31:31 -0400] geekbri: which of the yellow bus size you are on depends on if you were using sysctl the utility or just writing to /proc/sys directly ;)
[2012-07-13 19:44:35 -0400] JasonBox: heh
[2012-07-13 19:44:36 -0400] arthur_kalm: If anyone is interested, the issue i was having with beam earlier is cased by a newer version of rabbitmq
[2012-07-13 19:45:06 -0400] arthur_kalm: When I keep rabbitmq at 2.7, i can still upgrade chef to 10.12
[2012-07-13 19:45:43 -0400] shishir_das: #puppet
[2012-07-13 19:46:02 -0400] JasonBox: heh
[2012-07-13 19:55:19 -0400] miah: mattray: that looks awesome
[2012-07-13 19:56:06 -0400] mattray: miah: so what are you actively working on? dhcp, tftp or kickstart OS installs?
[2012-07-13 19:56:24 -0400] dwhsix: beginning to think that switching to omnibus chef in this rails project was a Big Mistake
[2012-07-13 19:56:36 -0400] dwhsix: head hurts from banging it against the wall ;-)
[2012-07-13 19:56:43 -0400] ypaq: hi guys
[2012-07-13 19:56:54 -0400] knuckolls: dwhsix: what's the problem? gems not installing?
[2012-07-13 19:56:59 -0400] ypaq: what's the best way to handle sysctl with chef?
[2012-07-13 19:57:20 -0400] dwhsix: knuckolls: sort of bundle install is clearly using chef's embedded ruby
[2012-07-13 19:57:31 -0400] chip-: Sysctl cookbook?
[2012-07-13 19:57:33 -0400] dwhsix: which it shouldn't
[2012-07-13 19:57:39 -0400] ypaq: which one? :)
[2012-07-13 19:57:42 -0400] knuckolls: ypaq: i use a variant of this one https://github.com/Fewbytes/sysctl-cookbook
[2012-07-13 19:57:53 -0400] knuckolls: it lets you control sysctl via attributes
[2012-07-13 19:57:56 -0400] knuckolls: so you set them in roles
[2012-07-13 19:58:02 -0400] knuckolls: which in my opinion is clearly the way to go
[2012-07-13 19:58:04 -0400] chip-: Yup
[2012-07-13 19:58:15 -0400] miah: mattray: all of the above =) right now i am hacking on the dhcp cookbook
[2012-07-13 19:58:19 -0400] ypaq: knuckolls: sounds reasonable
[2012-07-13 19:58:26 -0400] miah: ultimate goal is to have a new kickstart server
[2012-07-13 19:58:27 -0400] chip-: (See also: Setting vm.overcommit_memory=1 for Redis)
[2012-07-13 19:58:32 -0400] dwhsix: can't figure out what I'm doing wrong if anything...
[2012-07-13 19:58:49 -0400] knuckolls: ypaq: hand in hand with sysctl is also ulimit, which i'm of the opinion shouldn't be managed by chef
[2012-07-13 19:59:06 -0400] miah: ulimit is easily managable by chef
[2012-07-13 19:59:23 -0400] ypaq: knuckolls: why not manage ulimit wiht chef?
[2012-07-13 19:59:33 -0400] ypaq: requires reboot?
[2012-07-13 19:59:38 -0400] miah: it doesnt
[2012-07-13 19:59:38 -0400] knuckolls: it is, but all sorts of child processes inherit the ulimits from chef-client
[2012-07-13 19:59:52 -0400] knuckolls: only the processes that are pam enabled are going to read the limits.conf file
[2012-07-13 20:00:01 -0400] mattray: miah: sounds cool, ping me if you have issues or questions. pxe_dust doesn't depend on dhcp, so I haven't used it much lately. But I would definitely love to shoe-horn kickstarts into that cookbook
[2012-07-13 20:00:10 -0400] miah: ya
[2012-07-13 20:00:20 -0400] mattray: and tftp is trivial
[2012-07-13 20:00:22 -0400] miah: so, right now i am just making dhcp more flexible so it can work on more than debian
[2012-07-13 20:00:29 -0400] miah: ya. tftp is easy so i'm leaving it for now
[2012-07-13 20:00:37 -0400] miah: bbiaf
[2012-07-13 20:00:53 -0400] knuckolls: my solution was to set up limits.conf before chef-client runs, so it has the limits i want on the node, and pam enabled or not every process gets the right limits without having to worry about whether or not the forked process is going to grab limits from limits.conf that was managed by chef, or going to inherit from chef-client which is running with limits from before it was configured
[2012-07-13 20:01:07 -0400] knuckolls: that was a long confusing sentence.
[2012-07-13 20:01:24 -0400] dwhsix: knuckolls: if you have any suggestions I'll mail beer or single-malt or coffee whatever's your poison
[2012-07-13 20:02:02 -0400] mharrytemp: greetings #chef - I've got a question about an ironfan issue; I realize it's not exactly the right place but I can't find an IRC channel for ironfan
[2012-07-13 20:02:07 -0400] ypaq: knuckolls: i get it. thanks!
[2012-07-13 20:02:51 -0400] knuckolls: dwhsix: is bundle vendoring the gems?
[2012-07-13 20:03:48 -0400] dwhsix: knuckolls: I believe so I'm using application+application_ruby pretty vanilla
[2012-07-13 20:04:01 -0400] dwhsix: what's failing at the moment is
[2012-07-13 20:04:17 -0400] dwhsix: bundle install --path=vendor/bundle --deployment --without development test cucumber production
[2012-07-13 20:04:44 -0400] dwhsix: because (I believe) it's using the embedded ruby
[2012-07-13 20:04:46 -0400] mharrytemp: if anyone knows the answer, or where to find the answer (I've spent a lot of time in the code and on Google; can't figure it out), pointers would be super-appreciated. Question is: cluster_role and facet_role have override_attributes, but how do you do the same at a server/chef node level in the cluster context. In other words, how do I set a server-specific chef attribute in the cluster file. There seems to be no equivalent function, e.g. server_role.ove
[2012-07-13 20:07:50 -0400] knuckolls: dwhsix: i'm reasonably unfamiliar with the application stuff. so i may not be much help just yet ;)
[2012-07-13 20:08:39 -0400] dwhsix: knuckolls: np, any help is very appreciated
[2012-07-13 20:09:20 -0400] knuckolls: but if you've got stacktraces or anything to pastebin i might be able to point you in the right direction
[2012-07-13 20:09:26 -0400] dwhsix: to be a little more specific, when that bundle install runs, it fails building nokogiri, and I *think* that's happening because:
[2012-07-13 20:11:08 -0400] dwhsix: (apologies in advance)
[2012-07-13 20:11:10 -0400] dwhsix: Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
[2012-07-13 20:11:10 -0400] dwhsix:         /opt/chef/embedded/bin/ruby extconf.rb
[2012-07-13 20:11:11 -0400] dwhsix: checking for libxml/parser.h... no
[2012-07-13 20:11:11 -0400] dwhsix: -----
[2012-07-13 20:11:11 -0400] dwhsix: libxml2 is missing
[2012-07-13 20:11:40 -0400] dwhsix: that should *not* be the embedded ruby, and I bet it can't find libxml2 cause it's looking in the embedded lib, not in the system kib
[2012-07-13 20:11:41 -0400] knuckolls: ubuntu?
[2012-07-13 20:11:41 -0400] bawt_: ubuntu is ubuntu
[2012-07-13 20:11:43 -0400] dwhsix: *lib
[2012-07-13 20:11:50 -0400] dwhsix: yes, ubuntu, sorry
[2012-07-13 20:12:48 -0400] knuckolls: i see what you mean about the embedded stuff, but question are libxslt1-dev and libxml2-dev installed?
[2012-07-13 20:12:56 -0400] knuckolls: 10.04? 12.04?
[2012-07-13 20:13:04 -0400] dwhsix: 12.04
[2012-07-13 20:13:39 -0400] dwhsix: ok, they're not...
[2012-07-13 20:13:52 -0400] knuckolls: nokogiri won't build without libxml and libxslt
[2012-07-13 20:13:58 -0400] dwhsix: right, understood
[2012-07-13 20:14:01 -0400] knuckolls: you may also want/need to install the ruby-dev headers
[2012-07-13 20:14:12 -0400] knuckolls: which in 12.04 i think is ruby1.9.3-dev
[2012-07-13 20:14:32 -0400] knuckolls: but you can check that with apt-cache search ruby | grep "^ruby*dev"
[2012-07-13 20:14:36 -0400] dwhsix: I've sort of been holding off fixing that until I was convinced the right ruby was being used to run bundle
[2012-07-13 20:14:45 -0400] miah: herp herp
[2012-07-13 20:14:50 -0400] dwhsix: (fixing the lack of libxml etc)
[2012-07-13 20:15:52 -0400] dwhsix: would be nice if there was a rails quickstart project that was on 12.04+omnibus I suppose I could do that ;-)
[2012-07-13 20:15:57 -0400] mhalligan: Is there a way to attribetus into a machine remotely? I want to have a process on one server to grab data from a node's cloud provider and insert it into it's attribuet tree
[2012-07-13 20:16:31 -0400] knuckolls: dwhsix: my feeling is that if it's vendoring the gems, it doesn't matter what version of ruby is running bundle
[2012-07-13 20:16:51 -0400] knuckolls: all that matters is that the correct system ruby runs the actual application and it's bundler aware
[2012-07-13 20:16:58 -0400] knuckolls: but... you know, assumptions
[2012-07-13 20:18:08 -0400] dwhsix: huh
[2012-07-13 20:18:40 -0400] dwhsix: knuckolls: okay maybe I'll go down that path, see what happens.
[2012-07-13 20:19:05 -0400] h00kwurm: hi #chef, sorry about cutting in on solving anothers' issue, but i seem to have my own. I'm trying to configure knife and create a command line client for the admin on the chef server, but everytime I try i get back ERROR: Server returned error for http://beta.chef.xxx.com:4000/clients/root after it says creating initial API user. after doing it five times it fails. any ideas?
[2012-07-13 20:19:16 -0400] dwhsix: it just Feels Wrong, though
[2012-07-13 20:19:32 -0400] dwhsix: h00kwurm: that's just the way irc works
[2012-07-13 20:19:45 -0400] knuckolls: dwhsix: agreed. gets you past head banging though if it works.
[2012-07-13 20:20:17 -0400] dwhsix: knuckolls: I just worry about subtle problems later
[2012-07-13 20:20:45 -0400] h00kwurm: if it helps, the i'm using root as the client name for the new client
[2012-07-13 20:21:39 -0400] h00kwurm: and i use the default paths for validation/webui.pem; when i move them to ~/.chef/ it gives me an error saying they are unreadable (i've chown-ed them, though...)
[2012-07-13 20:22:48 -0400] c_t: perms for .chef/?
[2012-07-13 20:23:11 -0400] c_t: or, I suppose, ~/
[2012-07-13 20:23:34 -0400] h00kwurm: for ~/
[2012-07-13 20:23:35 -0400] h00kwurm: -rw-------  1 root root 1370 2011-12-25 17:48 .bash_history
[2012-07-13 20:23:35 -0400] h00kwurm: -rw-r--r--  1 root root 3106 2011-07-08 17:13 .bashrc
[2012-07-13 20:23:36 -0400] h00kwurm: drwx------  2 root root 4096 2011-10-18 14:42 .cache/
[2012-07-13 20:23:36 -0400] h00kwurm: drwxr-xr-x  2 root root 4096 2012-07-13 19:49 .chef/
[2012-07-13 20:23:36 -0400] h00kwurm: drwxr-xr-x  3 root root 4096 2012-07-13 18:52 .gem/
[2012-07-13 20:23:36 -0400] h00kwurm: drwx------  2 root root 4096 2011-12-17 18:00 .gnupg/
[2012-07-13 20:23:45 -0400] h00kwurm: -rw-------  1 root root    1 2011-10-20 21:55 .nano_history
[2012-07-13 20:23:46 -0400] h00kwurm: -rw-r--r--  1 root root  140 2011-07-08 17:13 .profile
[2012-07-13 20:23:46 -0400] h00kwurm: -rw-r--r--  1 root root 1163 2011-12-17 18:01 tee
[2012-07-13 20:23:47 -0400] h00kwurm: -rw-------  1 root root 4173 2012-07-13 18:56 .viminfo
[2012-07-13 20:23:48 -0400] h00kwurm: for ~/.chef
[2012-07-13 20:23:49 -0400] h00kwurm: -rw-r--r-- 1 root root  385 2012-07-13 20:22 knife.rb
[2012-07-13 20:23:50 -0400] h00kwurm: -rw-r--r-- 1 root root 1679 2011-12-17 18:40 root.pem
[2012-07-13 20:23:51 -0400] c_t: urk
[2012-07-13 20:24:00 -0400] h00kwurm: -rw------- 1 root root 1675 2012-07-13 19:49 validation.pem
[2012-07-13 20:24:01 -0400] h00kwurm: -rw------- 1 root root 1679 2012-07-13 19:49 webui.pem
[2012-07-13 20:24:02 -0400] h00kwurm: but it might be noted that i'm running as root, though
[2012-07-13 20:24:02 -0400] c_t: sorry, I meant *just* for ~/ and ~/.chef
[2012-07-13 20:24:13 -0400] h00kwurm: oops. i'm dumb
[2012-07-13 20:24:28 -0400] h00kwurm: ~/ : drwxr-xr-x  6 root root 4096 2012-07-13 20:04 ./
[2012-07-13 20:24:47 -0400] h00kwurm: ~/.chef : drwxr-xr-x 2 root root 4096 2012-07-13 19:49 ./
[2012-07-13 20:25:03 -0400] geekbri: it would be great if you didn't do that again.  perhaps that could go to pastebin.com :)
[2012-07-13 20:25:10 -0400] h00kwurm: yeah, my bad
[2012-07-13 20:25:14 -0400] geekbri: no biggie
[2012-07-13 20:26:37 -0400] h00kwurm: my current permissions: http://pastebin.com/kVZTXM3d
[2012-07-13 20:26:48 -0400] h00kwurm: thanks geekbri
[2012-07-13 20:27:15 -0400] geekbri: np
[2012-07-13 20:30:57 -0400] h00kwurm: anybody got any ideas? i cant find anything that works googling
[2012-07-13 20:32:15 -0400] knuckolls: h00kwurm: are you setting up your own chef-server?
[2012-07-13 20:32:17 -0400] knuckolls: yes?
[2012-07-13 20:33:35 -0400] h00kwurm: yes
[2012-07-13 20:33:40 -0400] knuckolls: i ran into problems like that when i was trying to set up my own. now i use hosted chef because i was wasting so much time fooling with hosting my own chef-server. 5 free nodes is enough to get you going for awhile.
[2012-07-13 20:34:12 -0400] h00kwurm: i would love to, but i can't. company wants their own chef server
[2012-07-13 20:34:21 -0400] knuckolls: yeah :(
[2012-07-13 20:34:30 -0400] knuckolls: opscode also supplies private chef
[2012-07-13 20:34:34 -0400] knuckolls: but both are $$$
[2012-07-13 20:34:39 -0400] h00kwurm: exactly :/
[2012-07-13 20:35:00 -0400] knuckolls: well perhaps someone will come along that is hosting their own that might help
[2012-07-13 20:35:07 -0400] knuckolls: you may get more visibility on the mailing list
[2012-07-13 20:35:33 -0400] h00kwurm: good idea, i'll bug them there too.
[2012-07-13 20:37:13 -0400] Assaf: Hi all
[2012-07-13 20:38:19 -0400] Assaf: Anyone can advise about chef as a solution to periodical system test infrastructure setup
[2012-07-13 20:43:49 -0400] pwf: anyone use the application resource with node attributes before?
[2012-07-13 20:44:22 -0400] pwf: i'm trying use the django resource, and give the database block attribtues from my node, but it's complaining that something is nil
[2012-07-13 20:44:51 -0400] pwf: all of the attributes have defaults in the recipe though, and are even overridden in the environment
[2012-07-13 20:45:08 -0400] pwf: so i'm guessing the node itself is what's nil? why can't i access it?
[2012-07-13 20:45:57 -0400] Assaf: We have around 30-40 hosts we install / revert from snapshot and would like to setup before tests begins, is Chef open source ok with such situation, I mean can it be triggered by a script?
[2012-07-13 20:57:10 -0400] pwf: my problem when away when i did 'thingysettings = node[:thingy]' outside of the block, and then accessed the settings with 'thingysettings[:setting]'
[2012-07-13 20:57:17 -0400] pwf: this seems totally nonobvious to me
[2012-07-13 21:03:26 -0400] ranjibd: Assaf, surely ..
[2012-07-13 21:05:19 -0400] Assaf: Hi ranjibd, thanks, so basically we can setup a server with the required cookbooks, there's a way we can trigger Chef to deploy manually? from the server?
[2012-07-13 21:05:30 -0400] ranjibd: pwf, you are using the ruby_nbloc resource ?
[2012-07-13 21:06:23 -0400] ranjibd: Assaf, you will be using the knife command line utility or raw chef api to orchestrate stuff
[2012-07-13 21:06:37 -0400] pwf: no ranjibd, i'm using the application django deploy stuff
[2012-07-13 21:07:23 -0400] ranjibd: Assaf, you can use a host of knife plugins (ec2, raskcspace, openstack) to provision your instances ,,
[2012-07-13 21:07:38 -0400] ranjibd: pwf, then it should have access to the node object ..
[2012-07-13 21:08:28 -0400] Assaf: Thanks, we would like to deploy installation of Python wih some libs, plus copy and setup system tests and later execute them
[2012-07-13 21:08:59 -0400] Assaf:  We have AIX, HP-UX, Linux, and Windows test hosts
[2012-07-13 21:09:44 -0400] Assaf: so basically, I can host a Chef server on a "master" Linux server, revert all test hosts and trigger deployment with a knife command?
[2012-07-13 21:10:01 -0400] ranjibd: Assaf, yeah
[2012-07-13 21:10:18 -0400] ranjibd: you might have some hiccups on the no linux systems
[2012-07-13 21:10:30 -0400] ranjibd: in windows its mostly powershell tricks..
[2012-07-13 21:10:41 -0400] Assaf: Can it work with Cygwin?
[2012-07-13 21:11:22 -0400] ranjibd: Assaf, i have never tried, but it should work.. i use  chef against linux, windows and solaris installations ...
[2012-07-13 21:11:54 -0400] ranjibd: i know some folks here run in against AIX too.. but not sure about UX or plan9
[2012-07-13 21:11:57 -0400] ranjibd: :-)
[2012-07-13 21:12:08 -0400] Assaf: :-)
[2012-07-13 21:13:02 -0400] Assaf: Do you know other solutions I should check? like Puppet / glu maybe?
[2012-07-13 21:14:03 -0400] ranjibd: see,,, its not very neat on any side.. but i personally liked chef more.. i used puppet for more than 3 years before migrating to chef
[2012-07-13 21:14:58 -0400] ranjibd: and i wont advice any one to choose puppet unless you want to avoid raw programming and restrict yourself to the dsl itself .. which i find is hardly possible ,,
[2012-07-13 21:15:10 -0400] Assaf: I see... I'll try it... we wrote scripts to do deployments over SSH and it starts to get too complicated
[2012-07-13 21:15:35 -0400] Bittarman: did I miss something? I have all the cookbooks that are in the deps list... http://pastie.org/private/d6mi3k3pv4mlubzukgpla
[2012-07-13 21:16:07 -0400] ranjibd: Assaf, we all went through the same
[2012-07-13 21:17:19 -0400] ranjibd: Bittarman, can you manually trigger `apt-get -q -y install libxml2-dev=2.7.8.dfsg-2+squeeze3 ` and see whats happening ?
[2012-07-13 21:17:42 -0400] Bittarman: ranjibd, just thought to do that. the package 404's.
[2012-07-13 21:17:56 -0400] ranjibd: yeah.. so thats the problem ..
[2012-07-13 21:18:00 -0400] Bittarman: its late on a friday... brains slooooow today :)
[2012-07-13 21:18:10 -0400] ranjibd: :-) u need more beer
[2012-07-13 21:18:24 -0400] Bittarman: I was thinking about getting something a little harder actually :D
[2012-07-13 21:19:21 -0400] Bittarman: ok.. need to see about making vagrant run apt-get update before trying to install php then :)
[2012-07-13 21:19:26 -0400] Assaf: ranjibd, thanks, I'll start reading the documentation and see how I manage with a short demo to the guys here
[2012-07-13 21:21:16 -0400] ranjibd: Assaf, start migrating your shell scripts to chef recipes, model individual commands as execute resources, use some builtin resources if available (like package ,service etc). make them idempotent, and test it by invoking the chef client twice. and you'd be good to begin with.. dont read too much before hand
[2012-07-13 21:23:52 -0400] Assaf: ranjibs, Thanks I willl :-)
[2012-07-13 21:35:34 -0400] knuckolls: periodically my nodes report in with an error like this: Errno::ENOENT: No such file or directory - /var/chef/cache/checksums/chef-file--tmp-chef-rendered-template20120713-26994-3zpb9w-0
[2012-07-13 21:35:34 -0400] knuckolls: No such file or directory - /var/chef/cache/checksums/chef-file--tmp-chef-rendered-template20120713-26994-3zpb9w-0
[2012-07-13 21:35:45 -0400] knuckolls: you know, just every once and awhile
[2012-07-13 21:35:54 -0400] knuckolls: seems to be fine after that one run.
[2012-07-13 21:35:58 -0400] knuckolls: just curious as to what it means
[2012-07-13 21:40:02 -0400] ranjibd: knuckolls, chef uses checksums and sandboxing to sync its resources
[2012-07-13 21:40:37 -0400] knuckolls: so it's just some periodic blip in that subsystem?
[2012-07-13 21:40:40 -0400] ranjibd: but that error should not occur ..
[2012-07-13 21:41:19 -0400] knuckolls: the chef-client is fine the next run
[2012-07-13 21:41:30 -0400] ranjibd: knuckolls, do you have the full log.. have you observed any pattern? like particular  template resource for which it occurs?
[2012-07-13 21:41:33 -0400] knuckolls: which means i don't mind that there's a blip here and there
[2012-07-13 21:41:57 -0400] knuckolls: um. no i haven't observed a pattern. i use the report handlers to send back every change and error on every node to a chat room
[2012-07-13 21:42:03 -0400] knuckolls: so that just pops up on a node from time to time
[2012-07-13 21:42:13 -0400] knuckolls: but i may be able to find it in the logs on the most recent ode
[2012-07-13 21:42:14 -0400] knuckolls: node*
[2012-07-13 21:42:16 -0400] ranjibd: knuckolls, the name of the template resource differs between the phases? does it have something dynamic?
[2012-07-13 21:42:47 -0400] knuckolls: not that i'm aware of, the cookbooks are reasonably pedestrian
[2012-07-13 21:43:06 -0400] knuckolls: the error doesn't give me any information as to what template it was trying to checksum or whatever it's doing
[2012-07-13 21:43:08 -0400] knuckolls: just some random tmp file
[2012-07-13 21:44:48 -0400] knuckolls: http://pastebin.com/r9Ccz24K
[2012-07-13 21:44:51 -0400] knuckolls: the stacktrace
[2012-07-13 21:55:16 -0400] ranjibd: knuckolls, i think its a bug..chef tries to delete the invalid checksum files after the run finishes, and the invalid file list is obtained from : all files in cache - valid checksums .. so ideally the file must have been there..and something has deleted it
[2012-07-13 21:57:13 -0400] knuckolls: ranjibd: seems like a bug to me too
[2012-07-13 21:59:17 -0400] hoover_damm: knuckolls, -l debug would be useful
[2012-07-13 21:59:19 -0400] hoover_damm: when that occurs
[2012-07-13 21:59:23 -0400] knuckolls: hm
[2012-07-13 21:59:28 -0400] hoover_damm: just too little information to guess
[2012-07-13 21:59:31 -0400] hoover_damm: all answers will suck
[2012-07-13 21:59:43 -0400] knuckolls: i could probably leave the nodes in debug mode
[2012-07-13 21:59:47 -0400] knuckolls: and wait for it to happen
[2012-07-13 21:59:51 -0400] knuckolls: and hope i catch it
[2012-07-13 22:00:00 -0400] hoover_damm: that's the way to do it :)
[2012-07-13 22:00:24 -0400] knuckolls: it's probably happening in other people's stuff, i just don't know how many people have every event fire back to a dashboard
[2012-07-13 22:17:21 -0400] hoover_damm: dashboard?
[2012-07-13 22:29:54 -0400] lawrenceseattle: what's the best way to manage permissions in chef?  do you guys just do authorized_keys for root?  or sudo?
[2012-07-13 22:31:01 -0400] chip-: permissions how?
[2012-07-13 22:31:10 -0400] Majost: lawrenceseattle: Personally, I use the "user" and "sudo" cookbooks for users on systems...
[2012-07-13 22:31:10 -0400] lawrenceseattle: like login permissions
[2012-07-13 22:31:16 -0400] chip-: User permissions.
[2012-07-13 22:31:17 -0400] chip-: Gotcha.
[2012-07-13 22:31:50 -0400] chip-: I use the user & sudo cookbooks, and passworded ssh keys for passwordless users.
[2012-07-13 22:32:01 -0400] chip-: (so the 2-factor-ish ssh key is the only means of authentication)
[2012-07-13 22:32:36 -0400] chip-: and then I've been playing with either 'nobody knows the root password' and passwordless sudo for that user, or keeping the root pw on file and having no sudo.
[2012-07-13 22:32:54 -0400] chip-: But really, if you have to log in, you've already spent too much money. The whole goal is that I stop logging into machines whenever possible.
[2012-07-13 22:33:32 -0400] lawrenceseattle: well chef has to login to run chef-client or chef-solo right?
[2012-07-13 22:34:56 -0400] chip-: to bootstrap, yes.
[2012-07-13 23:01:59 -0400] jkyle: where can I set the interface (ip) for chef-server to listen to? I have in /etc/chef/server.rb a line for chef_server_url http://localhost:4000, but it's listening on *
[2012-07-13 23:02:52 -0400] syphon: can anyone provide guidance on how to use the nginx cookbook to install nginx from a custom RPM location? (rather than the default yum repository, or wherever it installs from by default)
[2012-07-13 23:03:30 -0400] chip-: Sorry, haven't done it on a rhel-based distro.
[2012-07-13 23:12:18 -0400] lawrenceseattle: syphon: just install the repo in question in /etc/yum.repo.d/
[2012-07-13 23:12:41 -0400] lawrenceseattle: and add exclude on others if it's conflicting
[2012-07-13 23:13:18 -0400] lawrenceseattle: is there an exec equivalent for chef-solo?
[2012-07-13 23:24:16 -0400] miah: exec?
[2012-07-13 23:24:16 -0400] bawt_: exec is http://wiki.opscode.com/display/chef/Knife+Exec
[2012-07-13 23:31:40 -0400] Majost: What typically causes this error: "NoMethodError: undefined method `[]' for nil:NilClass"
[2012-07-13 23:32:51 -0400] jan0232: Majost: something expects to access an array, but it doesn't exist, it's nil
[2012-07-13 23:33:05 -0400] jan0232: could be anything ;)
[2012-07-13 23:34:11 -0400] Majost: is there a way to have it display the name of the array which is causing the exception
[2012-07-13 23:34:28 -0400] jan0232: there should be a line number somewhere
[2012-07-13 23:34:33 -0400] jan0232: at least with :DEBUG
[2012-07-13 23:35:02 -0400] hoover_damm: if you get nil:nil it means your trying to access an invalid oject
[2012-07-13 23:35:29 -0400] Majost: there is -- but the line reference is from ohai, which isn't likely the real source of the issue
[2012-07-13 23:35:37 -0400] hoover_damm: there's a variety of ways to debug it but the first realization you should have is, everything is nil
[2012-07-13 23:35:55 -0400] Majost: thats rather zen
[2012-07-13 23:35:59 -0400] Majost: ;)
[2012-07-13 23:36:19 -0400] jan0232: maybe overwrite NilClass ;)
[2012-07-13 23:36:25 -0400] hoover_damm: with trueclass?
[2012-07-13 23:36:28 -0400] jan0232: :D
[2012-07-13 23:36:30 -0400] Majost: heh
[2012-07-13 23:36:56 -0400] Majost: jan0232: you mentioned ":DEBUG"
[2012-07-13 23:37:21 -0400] Majost: is there a way I can enable this at the cookbook level, or when running knife
[2012-07-13 23:37:42 -0400] hoover_damm: knife -VV
[2012-07-13 23:37:59 -0400] hoover_damm: usually what you end up doing is throwing around log statements to understand how stupid you are
[2012-07-13 23:38:13 -0400] hoover_damm: log "variable a: #{something}"
[2012-07-13 23:38:25 -0400] hoover_damm: and then you can run chef and /facepalm correctly
[2012-07-13 23:38:39 -0400] Majost: yeah, I did that already
[2012-07-13 23:38:45 -0400] Majost: but couldn't find the problem
[2012-07-13 23:38:47 -0400] hoover_damm: note i'm also an abuser of this pattern so I guess i'm calling myself stupid :-p
[2012-07-13 23:38:55 -0400] hoover_damm: so your log statement shows your data?
[2012-07-13 23:38:59 -0400] hoover_damm: that you expect?
[2012-07-13 23:39:06 -0400] jan0232: i have a role like this: recipes "apt", "build-essential", "ruby-shadow"  but somehow it fails building gem native extensions for ruby-shadow because it can't find "make"it seems build-essential won't really execute..what could be the cause of that??
[2012-07-13 23:39:16 -0400] Majost: it completes, and the /var/chef/cache/failed-run-data.json file mirrors this
[2012-07-13 23:40:23 -0400] hoover_damm: jan0232, compile time vs runtime?
[2012-07-13 23:40:48 -0400] Majost: jan0232: omnibus chef?
[2012-07-13 23:40:54 -0400] jan0232: yes omnibus
[2012-07-13 23:41:03 -0400] hoover_damm: use chef_gem
[2012-07-13 23:41:08 -0400] jan0232: that's what i did
[2012-07-13 23:41:24 -0400] Majost: omnibus isn't chef_gem though
[2012-07-13 23:42:33 -0400] jan0232: if i comment out the ruby-shadow recipe build-essential will run
[2012-07-13 23:42:41 -0400] jan0232: maybe it really is compile time vs runtime
[2012-07-13 23:47:31 -0400] jan0232: but i'm setting the compile time flag to true and it still won't work :(
[2012-07-13 23:49:00 -0400] hoover_damm: compile time flag?
[2012-07-13 23:49:14 -0400] jan0232: "build-essential" => { :compiletime => true }
[2012-07-13 23:49:24 -0400] hoover_damm: what's that in?
[2012-07-13 23:49:26 -0400] jan0232: said in the read me of that opscode recipe
[2012-07-13 23:49:32 -0400] hoover_damm: neat
[2012-07-13 23:50:40 -0400] hoover_damm: hrm
[2012-07-13 23:50:41 -0400] hoover_damm: neat
[2012-07-13 23:50:43 -0400] hoover_damm: didn't know
[2012-07-13 23:50:51 -0400] hoover_damm: learn something new every day :)
[2012-07-13 23:51:10 -0400] jan0232: well it doesn't work though ;)
[2012-07-13 23:52:01 -0400] hoover_damm: default_attributes( "build-essential" => { compiletime" => true } )
[2012-07-13 23:52:02 -0400] hoover_damm: ?
[2012-07-13 23:52:09 -0400] jan0232: yep
[2012-07-13 23:52:10 -0400] hoover_damm: err there's a " before the compiletime
[2012-07-13 23:52:33 -0400] jan0232: oh
[2012-07-13 23:53:07 -0400] hoover_damm: you can access things usually via either flat name or symbol
[2012-07-13 23:53:20 -0400] jan0232: all i want is apt-get install build-essential before my own ruby-shadow recipe does chef_gem :D
[2012-07-13 23:53:24 -0400] hoover_damm: so node[:compiletime] or node["compiletime"] or node['compiltime']
[2012-07-13 23:53:27 -0400] hoover_damm: should all hit the same thing
[2012-07-13 23:53:47 -0400] hoover_damm: now someone else can say i'm wrong and educate correctly
[2012-07-13 23:55:21 -0400] jan0232: no matter what i do, can't get it to work :S
[2012-07-13 23:56:45 -0400] hoover_damm: i've always put build-essential in my bootstrap
[2012-07-13 23:56:47 -0400] hoover_damm: so i can't say nuttin
[2012-07-13 23:57:35 -0400] jan0232: why? wouldn't it be preferred to let chef do the most it can?
[2012-07-13 23:58:22 -0400] jan0232: oh and i just figured out whats wrong...
[2012-07-13 23:58:43 -0400] jan0232: the attribute is not "build-essential" it's "build_essential"  error in read me :(
[2012-07-13 23:58:43 -0400] hoover_damm: ?
[2012-07-13 23:58:56 -0400] hoover_damm: oh - to _ conversion
[2012-07-13 23:58:56 -0400] hoover_damm: lol
[2012-07-13 23:59:01 -0400] hoover_damm: geeze
[2012-07-13 23:59:03 -0400] jan0232: default_attributes( "build-_essential" => { "compiletime" => true } )
[2012-07-13 23:59:11 -0400] jan0232: oops, you know what i mean
[2012-07-13 23:59:11 -0400] jan0232: ;)

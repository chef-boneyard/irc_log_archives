[2012-07-05 02:07:35 -0400] hoover_damm: friday the 4th tinkering around with preseeds
[2012-07-05 02:07:40 -0400] hoover_damm: weee
[2012-07-05 02:07:50 -0400] hoover_damm: s/friday/wednesday
[2012-07-05 02:35:38 -0400] flaccid: hoover_damm: lucky. but its already friday here so not too bad for me either :)
[2012-07-05 02:35:47 -0400] flaccid: oh i mean thurs, dang!
[2012-07-05 02:57:28 -0400] tightwork: Anyone use spice to connect to opscode?
[2012-07-05 03:14:28 -0400] hoover_damm: flaccid, sorta.  Basically just ironing out a good preseed file
[2012-07-05 03:14:45 -0400] hoover_damm: flaccid, I guess i'll have to do something janky for the serial console in grub2.  Nothing obvious in the example :(
[2012-07-05 03:15:28 -0400] hoover_damm: and it's now clear to me resize2fs was always meant to go up... never down
[2012-07-05 03:15:29 -0400] hoover_damm: woops
[2012-07-05 03:15:33 -0400] flaccid: sounds like some casual fun!
[2012-07-05 03:15:56 -0400] hoover_damm: so i'll just configure my preseed to use 4% of the disk
[2012-07-05 03:15:58 -0400] hoover_damm: and leave the rest
[2012-07-05 03:16:27 -0400] hoover_damm: having apt-cacher felt weird compared to a regular disk mounted up
[2012-07-05 03:16:31 -0400] hoover_damm: totally works
[2012-07-05 03:25:26 -0400] huhongbo: how many nodes on chef-worker can handle
[2012-07-05 03:26:40 -0400] huhongbo: 160 nodes make worker to use 100% cpu
[2012-07-05 03:28:50 -0400] hoover_damm: it's not that straight forward.  It's a matter of how many nodes are converging at the same time
[2012-07-05 03:29:15 -0400] huhongbo: i use crontab so almost the sometime
[2012-07-05 03:29:23 -0400] hoover_damm: worst way to scale
[2012-07-05 03:29:35 -0400] huhongbo: what is the best praticce ?
[2012-07-05 03:29:43 -0400] huhongbo: use daemon ?
[2012-07-05 03:29:44 -0400] hoover_damm: crontab with --splay if you really want to cron
[2012-07-05 03:30:10 -0400] hoover_damm: and give it a 15 minute splay if you run every 45
[2012-07-05 03:30:44 -0400] huhongbo: what is the best choice to run ~1000 nodes
[2012-07-05 03:32:13 -0400] hoover_damm: you should prolly split up your chef-server into subservers
[2012-07-05 03:32:27 -0400] hoover_damm: one server for rabbitmq/expander, one for solr, one for chef-server, one for couchdb
[2012-07-05 03:32:36 -0400] hoover_damm: if your going to scale up beyond ~1000 nodes
[2012-07-05 03:32:51 -0400] hoover_damm: also I think you should mail the mailing list... because there are better more detailed answers there
[2012-07-05 03:32:54 -0400] hoover_damm: bawt_, lists?
[2012-07-05 03:32:54 -0400] bawt_: lists is http://lists.opscode.com
[2012-07-05 03:33:21 -0400] hoover_damm: it's been about 2years since I hosted my own chef server (for various reasons).  Currently I use hosted
[2012-07-05 03:33:46 -0400] hoover_damm: Opscode also does have Private Chef if you want to have Opscode scale / set it up
[2012-07-05 03:33:56 -0400] hoover_damm: and they can help you determine the resource requirements I imagine
[2012-07-05 03:34:35 -0400] huhongbo: i'm doing the test,so i'll decide later how to deal with the product deploy
[2012-07-05 03:34:51 -0400] hoover_damm: but basically --splay is your best friend here
[2012-07-05 03:35:30 -0400] hoover_damm: and likely you'll need to scale up the chef-server-api workers
[2012-07-05 03:35:34 -0400] hoover_damm: (chef-server workers)
[2012-07-05 03:38:07 -0400] huhongbo: what's the diff with cron and daemon mode
[2012-07-05 03:38:47 -0400] hoover_damm: as far as scaling? very little
[2012-07-05 03:39:00 -0400] hoover_damm: cron without splay it matters a lot
[2012-07-05 03:39:05 -0400] hoover_damm: you'll always get hammers at 30 after
[2012-07-05 03:43:18 -0400] huhongbo:  add the splay to client.rb and it'll work or not
[2012-07-05 03:43:34 -0400] hoover_damm: command line option
[2012-07-05 03:43:41 -0400] hoover_damm: although splay might work in config
[2012-07-05 03:44:18 -0400] huhongbo: I'll try it at command line
[2012-07-05 03:47:43 -0400] arbiterofcool: hello
[2012-07-05 03:48:46 -0400] arbiterofcool: I am trying to use the jenkins cookbook
[2012-07-05 03:49:05 -0400] arbiterofcool: with vagrant
[2012-07-05 03:55:11 -0400] arbiterofcool: hello
[2012-07-05 04:51:18 -0400] drpump: Ran into a problem with setting the group on a file resource. Anyone around who has done this successfully before?
[2012-07-05 05:10:12 -0400] flaccid: drpump: sure
[2012-07-05 05:10:49 -0400] drpump: So we're using code that looks like:
[2012-07-05 05:10:58 -0400] drpump: file 'myfile.txt' do
[2012-07-05 05:11:08 -0400] drpump:   user 'xxx'
[2012-07-05 05:11:25 -0400] drpump: oops, s/user/owner/ so
[2012-07-05 05:11:31 -0400] drpump:   owner 'xxx'
[2012-07-05 05:11:35 -0400] drpump:   group 'yyy'
[2012-07-05 05:11:37 -0400] drpump: end
[2012-07-05 05:11:45 -0400] flaccid: http://wiki.opscode.com/display/chef/Resources#Resources-File
[2012-07-05 05:11:50 -0400] flaccid: use absolute path to file
[2012-07-05 05:12:04 -0400] drpump: It does. Just didn't put it into the sample.
[2012-07-05 05:12:11 -0400] drpump: Owner is set successfully. Group is not.
[2012-07-05 05:12:14 -0400] drpump: No error is reported.
[2012-07-05 05:12:22 -0400] flaccid: still can't see a problem
[2012-07-05 05:12:27 -0400] flaccid: 'doesn't work' doesn't help
[2012-07-05 05:12:48 -0400] drpump: i.e. the file owner is correctly reset.
[2012-07-05 05:12:52 -0400] drpump: The file group is not
[2012-07-05 05:13:36 -0400] drpump: e.g. if I do 'ls -l file.txt' before, it shows www-data, www-data as owner and group respectively.
[2012-07-05 05:13:49 -0400] drpump: After, it shows xxx, www-data
[2012-07-05 05:14:11 -0400] drpump: Sucked into meeting. BRB
[2012-07-05 05:14:54 -0400] flaccid: no idea sorry.
[2012-07-05 05:15:09 -0400] flaccid: try to ask good questions next time to save everyone time.
[2012-07-05 05:24:19 -0400] hoover_damm: without knowing what version of chef he's running, or a debug log... /me sits on meeting pebcak
[2012-07-05 05:29:20 -0400] flaccid: yeah its a question of http://www.catb.org/~esr/faqs/smart-questions.html
[2012-07-05 05:29:45 -0400] flaccid: excuse the pun
[2012-07-05 05:46:05 -0400] kiesia: can anyone point me to a recipe that sets up nginx+passenger?
[2012-07-05 05:49:06 -0400] flaccid: that should be pretty easy to find
[2012-07-05 05:49:22 -0400] flaccid: https://www.google.com/search?client=opera&rls=en&q=chef+nginx+passenger&sourceid=opera&ie=utf-8&oe=utf-8&channel=suggest
[2012-07-05 05:50:38 -0400] kiesia: I have tried that, trust me ;-) I'm new to chef, so perhaps I don't get it, but I haven't seen a recipe that will compile passenger with nginx
[2012-07-05 05:50:51 -0400] kiesia: everything seems to be based around apache
[2012-07-05 05:51:46 -0400] flaccid: its not about recipes necessarily, but maybe it doesn't exist then
[2012-07-05 05:51:51 -0400] flaccid: in which case, you could make it
[2012-07-05 05:52:14 -0400] flaccid: did you check the community site for passenger and nginx cookbooks?
[2012-07-05 05:55:30 -0400] hoover_damm: rofl passenger
[2012-07-05 05:55:35 -0400] hoover_damm: you shouldn't
[2012-07-05 05:55:59 -0400] hoover_damm: unless passenger has stepped up it's game using proxy_pass via apache or nginx works better
[2012-07-05 05:57:15 -0400] flaccid: life is brighter in python/django land.
[2012-07-05 05:57:31 -0400] kiesia: flaccid: yes, just double checked
[2012-07-05 05:57:38 -0400] hoover_damm: indeed
[2012-07-05 05:58:34 -0400] flaccid: if_does_not_exist build_it
[2012-07-05 05:58:40 -0400] kiesia: yes
[2012-07-05 05:58:42 -0400] kiesia: totally
[2012-07-05 05:58:52 -0400] hoover_damm: kiesia, https://www.refheap.com/paste/3456
[2012-07-05 05:58:58 -0400] flaccid: then share_to_the_world_well
[2012-07-05 05:59:28 -0400] hoover_damm: kiesia, the patch mentioned in line 24 is the regular newrelic tie patch...
[2012-07-05 05:59:57 -0400] hoover_damm: kiesia, modify the nginx source to basically gem install and then follow that pattern to install? :) it's a bit more work
[2012-07-05 05:59:58 -0400] philwo: kiesia: i have one, wait, i'll polish it a bit and paste you a link
[2012-07-05 06:00:23 -0400] kiesia: cool, thanks all
[2012-07-05 06:00:33 -0400] flaccid: would be cool to ''package' it. would be better than pastebins
[2012-07-05 06:00:46 -0400] hoover_damm: that's the problem with passenger
[2012-07-05 06:00:47 -0400] hoover_damm: you shouldn't
[2012-07-05 06:00:52 -0400] hoover_damm: passenger-standalone
[2012-07-05 06:01:16 -0400] hoover_damm: really you shouldn't be compiling it into nginx any longer
[2012-07-05 06:01:20 -0400] flaccid: all the more reason to not use ruby crap
[2012-07-05 06:01:27 -0400] hoover_damm: use passenger-standalone and then shove it into proxy_pass
[2012-07-05 06:01:28 -0400] hoover_damm: +1
[2012-07-05 06:01:32 -0400] hoover_damm: ruby crap is just infectious
[2012-07-05 06:02:12 -0400] flaccid: because doing more makes people feel like they did something :)
[2012-07-05 06:02:42 -0400] flaccid: its like when you use visual studio or something starting to enjoy. you need to cut yourself off
[2012-07-05 06:04:16 -0400] hoover_damm: that's what i've done
[2012-07-05 06:04:24 -0400] hoover_damm: more and more python
[2012-07-05 06:04:43 -0400] flaccid: did you see my boto cookbook hoover_damm ?
[2012-07-05 06:04:59 -0400] philwo: kiesia: https://gist.github.com/3051666
[2012-07-05 06:05:45 -0400] philwo: tested on Ubuntu 12.04, if I remember correctly
[2012-07-05 06:06:14 -0400] drpump: @flaccid, hoover_damm was only half finished describing the issue. Haven't used IRC for years, so forgive the lack of protocol niceties.
[2012-07-05 06:06:52 -0400] flaccid: drpump: not sure what your point is sorry
[2012-07-05 06:07:03 -0400] kiesia: philwo: nice, thanks! I'll test it out tomorrow
[2012-07-05 06:07:17 -0400] drpump: Chucking off about me not asking a good question or providing logs etc.
[2012-07-05 06:07:37 -0400] flaccid: drpump: yeah learn to cite things so you can get help please
[2012-07-05 06:08:36 -0400] hoover_damm: flaccid, no I have not.
[2012-07-05 06:10:06 -0400] flaccid: hoover_damm: more recipes needed for those that have time https://github.com/flaccid/cookbooks/tree/master/cookbooks/boto/recipes
[2012-07-05 06:13:57 -0400] hoover_damm: flaccid, will have to watch those and follow up with em later
[2012-07-05 06:13:59 -0400] hoover_damm: flaccid, neat stuff
[2012-07-05 06:14:22 -0400] flaccid: yeah no rush, just always good to run into another pythonista in ruby land :)
[2012-07-05 06:15:34 -0400] hoover_damm: flaccid, prolly hang around with aws enough to make a boto lwrp
[2012-07-05 06:17:25 -0400] flaccid: yeah that would be cool hoover_damm . i just add to this cookbook as i need to when i can which is rare. coz its python not many people use it that use chef
[2012-07-05 06:20:26 -0400] hoover_damm: too bad, they don't know what they're missing out on
[2012-07-05 06:24:27 -0400] flaccid: its hard to get that across to em
[2012-07-05 06:31:36 -0400] BryanWB_: erikh: around? got a berkshelf q for u
[2012-07-05 07:11:56 -0400] erikh: BryanWB_: what's up?
[2012-07-05 07:14:08 -0400] BryanWB_: erikh: if i do  $ berks install --shim cookbooks/   more than once I start getting copies of each cookbook w/in the shims
[2012-07-05 07:14:18 -0400] BryanWB_: but only for the cookbooks pulled from git
[2012-07-05 07:14:23 -0400] amian84: In Ubuntu Maverick I've installed Chef=0.10.10-2 and Ohai=6.14.0-1 and i've a recipe that modified the Ohai::Config[:plugin_path] inserting a new path. Also my recipe create this path and insert custom plugins. When I demonized cehf-client, the first run get values correctly from ohai, but the followings runs ohai don't get all values from all plugins, for example i put a log line into kernel plugin and the first run prints this mess
[2012-07-05 07:14:25 -0400] amian84: age but the followings runs doesn't..... Someone have any idea why this problem happens to me?
[2012-07-05 07:14:29 -0400] erikh: hrm. I'm very unfamiliar with the shims code
[2012-07-05 07:14:34 -0400] BryanWB_: erikh: doesn't actually cause a problem but was curious
[2012-07-05 07:14:40 -0400] erikh: you'll probably want to talk to reset/Jamie Windsor
[2012-07-05 07:14:45 -0400] BryanWB_: erikh: k i will ask ask reset
[2012-07-05 07:14:59 -0400] BryanWB_: erikh: r u a riotgamer?
[2012-07-05 07:15:05 -0400] erikh: nah. long story with that.
[2012-07-05 07:15:23 -0400] erikh: I know quite a few of them though. BluePojo and I worked on test.rubygems.org together
[2012-07-05 07:15:26 -0400] erikh: (which is currently down)
[2012-07-05 07:15:54 -0400] erikh: ec2 ate my site
[2012-07-05 07:32:58 -0400] betelgeuse_: coderanger , jatan : can you help me with a little syntax ? I had created a remote directory and i need to copy the folder from that directory to an another folder in my client, how do i do it ? I am using chef solo
[2012-07-05 07:43:10 -0400] kesor: please please someone help, http://pastie.org/4203038  - I don't understand why attributes file is not taking an attribute from the role but using its own attribute instead.
[2012-07-05 07:54:48 -0400] coderanger: kesor: use an override in the role
[2012-07-05 07:55:04 -0400] coderanger: two places both setting at the same level is effectively undefined
[2012-07-05 07:55:24 -0400] coderanger: (technically speaking it is well defined, but we reserve the right to change it later)
[2012-07-05 07:56:11 -0400] jannel: coderanger: alphabetical order of the role names? :)
[2012-07-05 07:56:49 -0400] coderanger: jannel: I think it was roles then envs then cookbooks
[2012-07-05 07:57:05 -0400] coderanger: Roles are applied in the (recursive) order you would expect from the runlist
[2012-07-05 07:57:26 -0400] coderanger: but between different types of sources (roles, env, cookbooks) you shouldn't really count it
[2012-07-05 07:57:45 -0400] coderanger: General rule is that cookbooks set at default, roles/env set at override
[2012-07-05 07:57:46 -0400] jannel: yeah, it's better to use overrides anyway
[2012-07-05 07:57:52 -0400] coderanger: and per-node stuff is set at normal
[2012-07-05 07:58:25 -0400] coderanger: Once or twice I've had a reason to do an override from a cookbook, but its rare
[2012-07-05 08:03:14 -0400] kesor: ok, thanks.
[2012-07-05 08:03:27 -0400] kesor: its quite confusing though
[2012-07-05 08:03:58 -0400] kesor: i ended up removing the dependency of attributes in the attribute file, and just saving the prefix of the url.
[2012-07-05 08:24:22 -0400] kesor: Why even though I have "ohai 'foo' do action :reload end" the languages[:ruby] is not changed although I installed a new one as /usr/bin/ruby? it is still using /opt/vagrant_ruby/bin/ruby for the following recipes...
[2012-07-05 08:57:04 -0400] cnf: ffs, i just hate auditing a database, and seeing plain text passwords
[2012-07-05 09:04:26 -0400] masterkorp: lol
[2012-07-05 09:04:31 -0400] masterkorp: cnf: security
[2012-07-05 09:04:36 -0400] masterkorp: who needs that
[2012-07-05 09:04:49 -0400] cnf: apparently not these people
[2012-07-05 09:04:58 -0400] cnf: masterkorp: no password needed for mysql root login, either
[2012-07-05 09:05:12 -0400] masterkorp: let me gyess
[2012-07-05 09:05:28 -0400] masterkorp: its a php web aplication
[2012-07-05 09:05:51 -0400] BryanWB_: do they have phpmyadmin turned on and internet-accessible? that's my favorite
[2012-07-05 09:05:57 -0400] cnf: masterkorp: perl cgi
[2012-07-05 09:06:02 -0400] masterkorp: awww
[2012-07-05 09:06:07 -0400] masterkorp: i missed it
[2012-07-05 09:06:09 -0400] agosse: hah i was going to guess perl
[2012-07-05 09:06:28 -0400] masterkorp: perl is not common nowadays
[2012-07-05 09:06:34 -0400] agosse: that's why i didn't
[2012-07-05 09:06:36 -0400] agosse: ;-)
[2012-07-05 09:07:18 -0400] cnf: this, btw
[2012-07-05 09:07:22 -0400] agosse: we use it, but our app is like a decate old
[2012-07-05 09:07:26 -0400] agosse: decade
[2012-07-05 09:07:34 -0400] cnf: is the reg / user panel of a hosting provider
[2012-07-05 09:07:39 -0400] cnf: btw
[2012-07-05 09:07:59 -0400] agosse: sweet - free hosting for all!
[2012-07-05 09:10:40 -0400] cnf: :P
[2012-07-05 09:10:48 -0400] cnf: wel, no
[2012-07-05 09:10:55 -0400] cnf: he has very solid security in place
[2012-07-05 09:11:16 -0400] cnf: ( he needs to manually set up your actual vhost )
[2012-07-05 09:12:31 -0400] masterkorp: lol
[2012-07-05 09:13:17 -0400] masterkorp: since you're here, i pressume you're youing to chef the shit out of that
[2012-07-05 09:14:41 -0400] cnf: that's the idea
[2012-07-05 09:28:05 -0400] jerem`: when I launch chef-client, it will download and execute recipes even if these recipes are already installed. How to don't reinstall recipes  which are already installed ?
[2012-07-05 09:29:35 -0400] maruq: jerem: chef only changes what it needs to to make things conform to the recipes
[2012-07-05 09:30:11 -0400] jerem`: maruq: why it recompile packages ?
[2012-07-05 09:30:50 -0400] maruq: jerem: got an example? are you installing from source or from a repo or something?
[2012-07-05 09:31:11 -0400] jerem`: it depends, sometimes from source
[2012-07-05 09:31:43 -0400] jerem`: the ./configure && make steps are done
[2012-07-05 09:32:37 -0400] jerem`: even if the packages is already installed
[2012-07-05 09:33:55 -0400] maruq: jerem`: you probably want to use something like a not_if or a notifies in your recipes
[2012-07-05 09:34:58 -0400] maruq: http://wiki.opscode.com/display/chef/Resources#Resources-ConditionalExecution
[2012-07-05 09:35:06 -0400] maruq: http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2012-07-05 09:35:58 -0400] jerem`: thank you maruq
[2012-07-05 09:36:12 -0400] maruq: jerem`: no worries ;)
[2012-07-05 12:20:47 -0400] maruq: hi guys
[2012-07-05 12:21:23 -0400] maruq: is there a preferred cookbook we all use to install redis? preferably using packages with support for replication
[2012-07-05 12:22:32 -0400] jan0232: no idea...
[2012-07-05 12:22:35 -0400] jan0232: https://github.com/brianbianco/redisio/  ?
[2012-07-05 12:23:53 -0400] maruq: jan0232: yeah, I tried that one as it's 5 star, but can't seem to get my web nodes to talk to it
[2012-07-05 12:24:15 -0400] maruq: firewall ports are all open, there's no bind declaration in the config
[2012-07-05 12:25:23 -0400] maruq: those are probably issues for the project, just wondering if anyone's amanged to get redis working one way or another
[2012-07-05 12:25:55 -0400] jan0232: never used that sorry :(
[2012-07-05 12:26:39 -0400] maruq: jan0232: no worries
[2012-07-05 12:27:01 -0400] jan0232: chef is awesomebut it can be SOOO frustrating :)
[2012-07-05 12:27:40 -0400] cnf: word
[2012-07-05 12:33:02 -0400] maruq: amen
[2012-07-05 12:47:20 -0400] morete: hi jespada
[2012-07-05 12:47:42 -0400] morete: Does enyone have any pointer on "TypeError: superclass mismatch for class Tuple"?
[2012-07-05 12:52:53 -0400] maruq: jan0232: solved my issue PEBCAK ;)
[2012-07-05 12:53:05 -0400] jan0232: cool :)
[2012-07-05 12:53:25 -0400] maruq: launched the Redis node in the wrong EC2 security group
[2012-07-05 13:09:51 -0400] jespada: hi morete , that kind of error is ruby telling you that you are trying to define a class who's supperclass is different  than what you or someone already did
[2012-07-05 13:10:59 -0400] jespada: but you need to give some context or a gist maybe regarding chef.. for more help
[2012-07-05 13:11:40 -0400] jespada: I think i saw that "issue" whit a riak cookbook ..no sure
[2012-07-05 13:23:14 -0400] zoubi: do some of you have ever succeeded to install postgresql using the default recipe on GitHub on a Ubuntu 10.04 machine?
[2012-07-05 13:23:46 -0400] zoubi: I have this error : [Thu, 05 Jul 2012 05:59:07 -0700] FATAL: Chef::Exceptions::Exec: package[postgresql-client] (postgresql::client line 37) had an error: apt-get -q -y install postgresql-client=8.4.8-0ubuntu0.10.04 returned 100, expected 0
[2012-07-05 13:24:08 -0400] zoubi: When I install it by myself, I can see it tries to install postgresql.8.4.12
[2012-07-05 13:24:59 -0400] zoubi: and if I put this version in the attributes, it doesn't work either, because it tries to start the service using this path /etc/init.d/postgresql-8.4.12-client instead of postgresql-client
[2012-07-05 13:25:05 -0400] zoubi: I don't see how to achieve that
[2012-07-05 13:25:12 -0400] zoubi: would you have any idea?
[2012-07-05 13:31:57 -0400] myusuf3: awesome
[2012-07-05 13:32:10 -0400] myusuf3: so you help with supporting chef users right hoover_damm ? :)
[2012-07-05 13:47:14 -0400] agosse: dumb question
[2012-07-05 13:47:49 -0400] agosse: is there a simple way (ie using chef-client) inside of a guest to figure out what the current node attributes are?
[2012-07-05 13:48:10 -0400] agosse: like on the command line - assuming I don't have access to the chef server
[2012-07-05 13:48:27 -0400] myusuf3: yeah
[2012-07-05 13:48:33 -0400] myusuf3: its called...
[2012-07-05 13:49:52 -0400] myusuf3: ohai
[2012-07-05 13:49:54 -0400] myusuf3: i think
[2012-07-05 13:49:57 -0400] myusuf3: thats what its for.
[2012-07-05 13:50:04 -0400] myusuf3: http://wiki.opscode.com/display/chef/Ohai
[2012-07-05 13:50:08 -0400] myusuf3: yep thats it
[2012-07-05 13:50:19 -0400] agosse: ta
[2012-07-05 13:55:39 -0400] yfeldblum: agosse, how do you have access to chef-client but not chef-server?
[2012-07-05 13:56:53 -0400] agosse: yfeldblum: working on RightScale server templates
[2012-07-05 13:57:12 -0400] myusuf3: agosse
[2012-07-05 13:57:14 -0400] myusuf3: or anyone
[2012-07-05 13:57:26 -0400] myusuf3: do you guys know how to catch an exception
[2012-07-05 13:57:34 -0400] myusuf3: I have code that creates user groups
[2012-07-05 13:57:38 -0400] myusuf3: but when I run it again
[2012-07-05 13:57:42 -0400] cnf: you know, i'm still not entirely clear on nodes vs clients
[2012-07-05 13:57:45 -0400] myusuf3: it breaks saying the group exists already
[2012-07-05 13:58:08 -0400] myusuf3: cnf, whats not clear
[2012-07-05 13:58:13 -0400] yfeldblum: cnf, a node is a thing that has lots of data about a particular thing that may be configured by chef (usually a server)
[2012-07-05 13:59:18 -0400] yfeldblum: cnf, a "client" or, rather, an api-client, is a thing which has a name, an admin flag, and a public key used for logging in, and it's like a "user" record for a webapp that humans might use
[2012-07-05 14:00:42 -0400] frank_: yfeldblum: except that every node that is able to run chef-client, needs to be a client as well
[2012-07-05 14:01:05 -0400] yfeldblum: frank_, nodes don't run chef-client; servers run chef-client
[2012-07-05 14:01:26 -0400] cnf: hmz
[2012-07-05 14:01:30 -0400] frank_: server == "every node that is able to run chef-client"
[2012-07-05 14:01:30 -0400] yfeldblum: frank_, chef-client runs typically save node data to a node object, and use a client object to obtain the permission to do the saving
[2012-07-05 14:01:46 -0400] yfeldblum: frank_, that's not the right way to look at it
[2012-07-05 14:02:07 -0400] frank_: yfeldblum: so mean I am wrong that every "server" needs a client?
[2012-07-05 14:02:20 -0400] myusuf3: I am having an issue ehre
[2012-07-05 14:02:22 -0400] myusuf3: https://gist.github.com/62534eec5eef2e806c58
[2012-07-05 14:02:44 -0400] myusuf3: I used to able to run this on multiple times on the same machine without issue
[2012-07-05 14:02:47 -0400] cnf: yfeldblum: so when a new client authenticates with chef-hosted, it makes a node and a client
[2012-07-05 14:03:01 -0400] cnf: yfeldblum: say it craches, i can delete the client, but keep the node?
[2012-07-05 14:03:09 -0400] frank_: cnf: even with chef-self-hosted
[2012-07-05 14:03:11 -0400] myusuf3: now I am getting Chef::Exceptions::Exec error
[2012-07-05 14:03:12 -0400] cnf: and a new client with the same name will use the nodes data?
[2012-07-05 14:03:34 -0400] myusuf3: saying the group exists
[2012-07-05 14:03:54 -0400] yfeldblum: cnf, i suppose; i typically delete both and start from scratch in that case
[2012-07-05 14:04:09 -0400] myusuf3: is there a way to catch the exception
[2012-07-05 14:04:13 -0400] myusuf3: and continue gracefully?
[2012-07-05 14:04:39 -0400] cnf: yfeldblum: but you can put attriubtes and data in a node, right?
[2012-07-05 14:05:30 -0400] cnf: so i can define say a list of vhosts to run on that particular one on the node information?
[2012-07-05 14:06:04 -0400] yfeldblum: cnf, yes - that is the purpose and functionality of the "normal-level" node attributes
[2012-07-05 14:06:08 -0400] zoubi: any idea of why the postgresql package adds a 0 between the package version and the os version? (for ubuntu)
[2012-07-05 14:06:24 -0400] cnf: hmm
[2012-07-05 14:06:29 -0400] yfeldblum: zoubi, because ubuntu 12.04 is ubuntu 12.04, not ubuntu 12.4
[2012-07-05 14:06:30 -0400] cnf: yfeldblum: i'm playing with it a bit, atm
[2012-07-05 14:06:45 -0400] zoubi: it should be apt-get -q -y install postgresql-client=8.4.8-0ubuntu10.04 but it is apt-get -q -y install postgresql-client=8.4.8-0ubuntu0.10.04
[2012-07-05 14:06:48 -0400] yfeldblum: zoubi, because ubuntu 12.04 is ubuntu 2012-april
[2012-07-05 14:06:57 -0400] zoubi: yfeldblum, not this kind of error
[2012-07-05 14:07:00 -0400] cnf: yfeldblum: and it seems you can't create a client, when there is already a node with that name
[2012-07-05 14:07:13 -0400] cnf: yfeldblum: that just confuses me
[2012-07-05 14:07:18 -0400] yfeldblum: zoubi, ah
[2012-07-05 14:07:23 -0400] cnf: it feels like 2 things that should be one thing...
[2012-07-05 14:07:24 -0400] zoubi: as you can see, I have ubuntu0.10.04 instead of ubuntu10.04
[2012-07-05 14:07:38 -0400] zoubi: it makes apt unable to find the package (obviously)
[2012-07-05 14:07:52 -0400] yfeldblum: cnf, they are two separate things, but we often need to use them together
[2012-07-05 14:08:08 -0400] cnf: yfeldblum: when you say often, when don't you?
[2012-07-05 14:08:29 -0400] myusuf3: ha
[2012-07-05 14:09:47 -0400] myusuf3: does anyone have an idea on how to hand exception in chef/
[2012-07-05 14:09:49 -0400] myusuf3: ?
[2012-07-05 14:09:59 -0400] myusuf3: handle*
[2012-07-05 14:10:28 -0400] yfeldblum: cnf, when you use knife you don't
[2012-07-05 14:10:38 -0400] cnf: yfeldblum: sorry?
[2012-07-05 14:10:48 -0400] yfeldblum: cnf, when you in anyway want to ask the chef-server for information (outside a chef-client run) you don't
[2012-07-05 14:11:01 -0400] geekbri: myusuf3: what do you mean?
[2012-07-05 14:11:27 -0400] myusuf3: geekbri well I have this issue
[2012-07-05 14:11:30 -0400] myusuf3: https://gist.github.com/62534eec5eef2e806c58
[2012-07-05 14:11:36 -0400] myusuf3: where I am creating groups and users
[2012-07-05 14:11:37 -0400] cnf: yfeldblum: so they are mutually dependent entities, just holding different data?
[2012-07-05 14:11:55 -0400] yfeldblum: cnf, they are independent
[2012-07-05 14:12:01 -0400] myusuf3: for the longest time it was working on this machine I was running the  script on
[2012-07-05 14:12:05 -0400] myusuf3: multiple times
[2012-07-05 14:12:19 -0400] myusuf3: now when I run it
[2012-07-05 14:12:36 -0400] yfeldblum: cnf, the client has authentication and authorization stuff
[2012-07-05 14:12:40 -0400] myusuf3: throws a Chef::Exceptions::Error
[2012-07-05 14:12:46 -0400] myusuf3: saying that the group already exists
[2012-07-05 14:12:58 -0400] yfeldblum: cnf, the node has saved discovered, computed, and set data
[2012-07-05 14:13:14 -0400] myusuf3: I am not sure why this is happening now
[2012-07-05 14:13:26 -0400] geekbri: myusuf3: can you gist the stack trace
[2012-07-05 14:13:33 -0400] cnf: yfeldblum: except, i don't see how they can be created independantly
[2012-07-05 14:13:39 -0400] myusuf3: its not much more than that but sure
[2012-07-05 14:13:53 -0400] yfeldblum: cnf, `knife node create ABCD` and `knife client create WXYZ`
[2012-07-05 14:14:02 -0400] cnf: yes sure
[2012-07-05 14:14:10 -0400] cnf: hmz
[2012-07-05 14:14:31 -0400] yfeldblum: cnf, in a chef-client run and a chef-client run ONLY, you need one of each and the two need to match
[2012-07-05 14:14:32 -0400] cnf: i'm probably missing something
[2012-07-05 14:14:56 -0400] yfeldblum: cnf, but chef-client is not the only way of interacting with the chef-server api-endpoint
[2012-07-05 14:15:06 -0400] yfeldblum: cnf, e.g., knife is another way
[2012-07-05 14:15:21 -0400] cnf: yes, i'm using knife
[2012-07-05 14:15:40 -0400] yfeldblum: cnf, and many people have a use-case for building additional automation, reporting, etc functionality that integrates with the chef-server api-endpoint
[2012-07-05 14:15:44 -0400] myusuf3: geekbri https://gist.github.com/18682de0000cb2e716a7
[2012-07-05 14:15:53 -0400] cnf: i think maybe i don't understand the client creation process
[2012-07-05 14:15:55 -0400] yfeldblum: cnf, and these use-cases also require merely a client
[2012-07-05 14:16:56 -0400] cnf: hmm
[2012-07-05 14:17:30 -0400] cnf: i'm going to have to see how new clients are created
[2012-07-05 14:17:37 -0400] cnf: i don't think i understand that bit yet
[2012-07-05 14:18:01 -0400] cnf: my understanding now is that a fresh machine, when chef-client first runs, it creates the node and client
[2012-07-05 14:18:10 -0400] cnf: and it errors when the node already exists
[2012-07-05 14:18:19 -0400] yfeldblum: cnf, that's right
[2012-07-05 14:18:36 -0400] cnf: see, that's confusing
[2012-07-05 14:19:15 -0400] cnf: yfeldblum: so what use is 'knife client create' ?
[2012-07-05 14:20:03 -0400] cnf: hmm
[2012-07-05 14:20:06 -0400] yfeldblum: cnf, it asks the chef-server api-endpoint to make a new client object?
[2012-07-05 14:20:23 -0400] cnf: yfeldblum: but then you have no actual chef-client that can use that?
[2012-07-05 14:20:37 -0400] geekbri: myusuf3: it looks like the group you are trying to ser that users GUID too does not exist
[2012-07-05 14:20:42 -0400] yfeldblum: cnf, a chef-client can use it
[2012-07-05 14:20:48 -0400] BryanWB_: yo pythonistas here,  do u evar use just 'python setup.py' and not 'python setup.py install'  w/ the typical setup.py?
[2012-07-05 14:20:55 -0400] cnf: huh?
[2012-07-05 14:21:09 -0400] yfeldblum: cnf, e.g. you can skip the auto-registration step in the chef-client run by pre-creating the client and the node that the chef-client run will need
[2012-07-05 14:21:27 -0400] yfeldblum: cnf, and copying the private key to the server that chef-client is running on
[2012-07-05 14:21:37 -0400] myusuf3: geekbri, its complaining that it does exist
[2012-07-05 14:21:44 -0400] cnf: yfeldblum: hmm, ok, so creating it with knife gives you the private key?
[2012-07-05 14:21:49 -0400] zoubi: yfeldblum, any idea?
[2012-07-05 14:22:02 -0400] myusuf3: BryanWB_ no you do not
[2012-07-05 14:22:08 -0400] geekbri: myusuf3: manpage for groupmod seems to imply exit condition 4 is that the group doesnt exist
[2012-07-05 14:22:10 -0400] cnf: yfeldblum: let me try that
[2012-07-05 14:22:13 -0400] yfeldblum: cnf, yes it does
[2012-07-05 14:22:14 -0400] geekbri: myusuf3: which distro?
[2012-07-05 14:22:27 -0400] myusuf3: unless you have it setup to run something when the file is setup to day
[2012-07-05 14:22:37 -0400] myusuf3: to do* something like that
[2012-07-05 14:22:42 -0400] cnf: hmm, ok...
[2012-07-05 14:23:00 -0400] myusuf3: geekbri ubuntu12.04
[2012-07-05 14:23:10 -0400] myusuf3: well it does exist
[2012-07-05 14:23:14 -0400] BryanWB_: myusuf3: so pretty much always 'python setup.py install'  ?
[2012-07-05 14:23:30 -0400] myusuf3: BryanWB_ yeah there are other ones though like develop
[2012-07-05 14:23:39 -0400] myusuf3: and you could probably code in your own
[2012-07-05 14:23:53 -0400] myusuf3: using the sys.argv
[2012-07-05 14:24:13 -0400] myusuf3: jtimberman ping!
[2012-07-05 14:24:24 -0400] geekbri: myusuf3: and if you change that to use a guid that doesn't exist, or the users own guid does it work fine?
[2012-07-05 14:24:53 -0400] myusuf3: geekbri I didn't try that, because this has been wokring on multiple calls.
[2012-07-05 14:25:13 -0400] myusuf3: then it just stops
[2012-07-05 14:25:17 -0400] cnf: you know, i really do like knife
[2012-07-05 14:25:19 -0400] myusuf3: I can  try changing the number I guess.
[2012-07-05 14:25:20 -0400] geekbri: myusuf3: yeah I've never had the issue you're having and I've done similar things before thats the only reason I asked.
[2012-07-05 14:25:26 -0400] BryanWB_: if any pythonistas could help me write a test setup.py to test python support in ark, i would much appreciate it
[2012-07-05 14:25:27 -0400] cnf: i just have to learn all it's details
[2012-07-05 14:25:49 -0400] geekbri: cnf: the knife source is pretty easy to read.  I've been writing a whole bunch of knife plugins, I can help you sort through it if you end up doing so.
[2012-07-05 14:26:12 -0400] myusuf3: BryanWB_ setup.py shouldn't contains tests
[2012-07-05 14:26:25 -0400] cnf: geekbri: i'm really not looking forward to reading the source at this point, thanks ^^;
[2012-07-05 14:26:41 -0400] geekbri: cnf: ok! But you'd be surprised, it's a bit fun and you'll learn a lot :)
[2012-07-05 14:26:49 -0400] myusuf3: BryanWB_https://github.com/myusuf3/octogit/blob/master/setup.py
[2012-07-05 14:26:54 -0400] BryanWB_: myusuf3: this is for the ark cookbook, i am adding an action to do   `python setup.py install` after downloading and unpacking a tarball
[2012-07-05 14:26:57 -0400] myusuf3: BryanWB_ https://github.com/myusuf3/octogit/blob/master/setup.py
[2012-07-05 14:27:01 -0400] cnf: geekbri: information overload...
[2012-07-05 14:27:03 -0400] BryanWB_: i need to add a test to the cookbook
[2012-07-05 14:27:21 -0400] myusuf3: the test would be see if its installed
[2012-07-05 14:28:00 -0400] BryanWB_: myusuf3: y, i just need to learn enough about setup.py to install something trivial w/ it as part of my minitest test suite
[2012-07-05 14:28:28 -0400] myusuf3: BryanWB_ okay here is a good resource
[2012-07-05 14:28:55 -0400] myusuf3: BryanWB_ http://guide.python-distribute.org/quickstart.html
[2012-07-05 14:29:16 -0400] BryanWB_: myusuf3: tks
[2012-07-05 14:30:26 -0400] myusuf3: geekbri so switching the number worked
[2012-07-05 14:30:29 -0400] myusuf3: chef finished the run
[2012-07-05 14:30:39 -0400] myusuf3: but If i need to rerun the coobooks it would break
[2012-07-05 14:30:41 -0400] myusuf3: which isn't good
[2012-07-05 14:31:09 -0400] geekbri: myusuf3: yes thats clearly a bad thing... hrm
[2012-07-05 14:31:22 -0400] geekbri: myusuf3: well you could try doing a rescue, or you could dig into the code of the provider and see why thats happening
[2012-07-05 14:31:23 -0400] myusuf3: i need to make that reciepe continue if the group and stuff is setup
[2012-07-05 14:31:39 -0400] myusuf3: where are all the opscode people.
[2012-07-05 14:31:51 -0400] myusuf3: documentation sucks when it comes to dealing with issue
[2012-07-05 14:31:56 -0400] myusuf3: i am not a ruby developer
[2012-07-05 14:32:08 -0400] myusuf3: :(
[2012-07-05 14:32:40 -0400] BryanWB_: myusuf3:  trying to see if a group exists using ruby?
[2012-07-05 14:33:06 -0400] myusuf3: BryanWB_ is a bit more invovled than that
[2012-07-05 14:33:29 -0400] myusuf3: but if you illuminate me as to why i am getting the issue
[2012-07-05 14:33:40 -0400] myusuf3: https://gist.github.com/18682de0000cb2e716a7
[2012-07-05 14:33:43 -0400] BryanWB_: myusuf3: i can try
[2012-07-05 14:33:52 -0400] myusuf3: thats the stacktrace
[2012-07-05 14:34:36 -0400] cnf: yfeldblum: i'm having a bit of a play with knife and nodes/clients etc
[2012-07-05 14:34:57 -0400] cnf: i'm trying to figure out if i can use nodes to store data
[2012-07-05 14:36:21 -0400] chrisa2: myusuf3: is it possible you already have a different group with gid 9001?
[2012-07-05 14:36:39 -0400] myusuf3: chrisa2 that is the problem
[2012-07-05 14:36:48 -0400] myusuf3: I ran my cookbooks on it once already
[2012-07-05 14:37:01 -0400] myusuf3: but rerunning it causes this issue
[2012-07-05 14:37:16 -0400] myusuf3: it wasn't throwing this exception before
[2012-07-05 14:38:11 -0400] BryanWB_: myusuf3: what os/distro u on?
[2012-07-05 14:38:27 -0400] chrisa2: myusuf3: yeah, it's likely that when nothing existed, it would work
[2012-07-05 14:38:40 -0400] chrisa2: but now you've already got a gid 9001, it's going to fall over
[2012-07-05 14:38:44 -0400] BryanWB_: chrisa2: that's pretty crappy that it isn't idempotent
[2012-07-05 14:38:55 -0400] BryanWB_: it shouldn't fail on second run
[2012-07-05 14:39:07 -0400] chrisa2: BryanWB_: without the data it's difficult to tell if it's specifying something unpossible
[2012-07-05 14:39:21 -0400] chrisa2: i.e. the contents of node[:users] and node[:groups]
[2012-07-05 14:39:29 -0400] myusuf3: ubuntu12.04
[2012-07-05 14:39:43 -0400] chrisa2: i would guess it's creating a group and then changing its gid later in the run
[2012-07-05 14:40:00 -0400] chrisa2: and then later reusing the original gid for another group
[2012-07-05 14:40:13 -0400] chrisa2: then the second time through the gid's already in use
[2012-07-05 14:40:21 -0400] chrisa2: can't say without the data though
[2012-07-05 14:41:06 -0400] cnf: hmm, weird
[2012-07-05 14:43:34 -0400] yfeldblum: cnf, yes you can
[2012-07-05 14:43:39 -0400] cnf: yfeldblum: if i let chef-client create the node and the client. then delete the node with knife, and create a new one with the same name
[2012-07-05 14:43:46 -0400] cnf: everything stops working :P
[2012-07-05 14:44:57 -0400] cnf: yfeldblum: should that not work?
[2012-07-05 14:45:54 -0400] geekbri: cnf: delete the client entry :)
[2012-07-05 14:46:11 -0400] cnf: geekbri: well yeah, then everything working even more
[2012-07-05 14:46:45 -0400] yfeldblum: cnf, don't know
[2012-07-05 14:46:52 -0400] cnf: hmm
[2012-07-05 14:47:11 -0400] cnf: i;m trying to figure out how to use nodes to store node specific data
[2012-07-05 14:47:16 -0400] yfeldblum: cnf, you've got to separate in your mind between, on the one hand, what *chef-client* requires and, on the other hand, what *all other things that use chef* require
[2012-07-05 14:47:24 -0400] geekbri: I believe if you brought up a new node, and gave it the same client key as the previous node which you deleted, it would probably be ok.
[2012-07-05 14:47:46 -0400] cnf: geekbri: i did that
[2012-07-05 14:47:56 -0400] cnf: geekbri: made a new node with the same name
[2012-07-05 14:48:07 -0400] cnf: yfeldblum: plausible
[2012-07-05 14:48:33 -0400] cnf: yfeldblum: i'm trying to find out exactly that, i think :P
[2012-07-05 14:49:08 -0400] cnf: i don't get why deleting a node, and creating a new one with the same name doesn't work
[2012-07-05 14:50:19 -0400] zts: cnf: when you said it stopped working, what was the nature of the failure?
[2012-07-05 14:50:23 -0400] yfeldblum: cnf, for *chef-client*
[2012-07-05 14:50:33 -0400] yfeldblum: cnf, because *chef-client* has extra constraints
[2012-07-05 14:50:52 -0400] cnf: yfeldblum: sorry?
[2012-07-05 14:51:16 -0400] yfeldblum: cnf, because the way *chef-client* works, it detects whether it needs to create a node and a client during the registration step, and the detection is saying "no"
[2012-07-05 14:52:06 -0400] cnf: yfeldblum: ok, so i let it create the node and the client
[2012-07-05 14:52:10 -0400] cnf: and it works
[2012-07-05 14:52:20 -0400] cnf: so if i then delete the node, and make a new one with the same name
[2012-07-05 14:52:49 -0400] cnf: i figured that should work, because chef-client has a client it can auth on, and a matching node, no?
[2012-07-05 14:53:06 -0400] zts: I would expect that to work
[2012-07-05 14:53:18 -0400] zts: with the caveat that I can't imagine why you'd want to
[2012-07-05 14:53:32 -0400] yfeldblum: cnf, why should it work? that's not correct reasoning, because it's an assumption and not reasoning; instead, you should find out if that works ...
[2012-07-05 14:53:58 -0400] cnf: well, it doesn't
[2012-07-05 14:54:03 -0400] yfeldblum: cnf, there you go then
[2012-07-05 14:54:15 -0400] chrisa2: cnf: in what way does it not work? auth fail, or just doesn't do what it should?
[2012-07-05 14:54:18 -0400] cnf: but i don't get why
[2012-07-05 14:54:37 -0400] cnf: chrisa2: hold on, i'll recreate the error
[2012-07-05 14:54:46 -0400] drew84844: I'm getting an error that my validation file doesn't exist, when it actually does.  I don't suppose anyone can help?  https://gist.github.com/7c9981c1653fa35576a4
[2012-07-05 14:54:52 -0400] yfeldblum: cnf, look at all material error output, backtraces, logs, etc to find out why
[2012-07-05 14:54:53 -0400] chrisa2: i would expect it to work, but unless you manually set up the run list on the recreated node, it'll be empty
[2012-07-05 14:55:02 -0400] cnf: yfeldblum: and i don't get how i can use a node to store data, if i can't figure out how to edit that stuff much
[2012-07-05 14:55:23 -0400] cnf: chrisa2: well, yes i set up the runlist on the new node :P
[2012-07-05 14:55:44 -0400] myusuf3: chrisa2 what data do you need/
[2012-07-05 14:55:56 -0400] cnf: yfeldblum: i think i am still not understanding nodes
[2012-07-05 14:56:44 -0400] yfeldblum: cnf, a "node", to the chef-server, is a record in a database where data specific to that record is kept
[2012-07-05 14:57:06 -0400] yfeldblum: cnf, what you're not understanding is the inner workings of the chef-client registration process
[2012-07-05 14:57:06 -0400] chrisa2: myusuf3: whatever you end up with in node[:users] and node[:groups], the bits that relate to uid or gid 9001
[2012-07-05 14:57:14 -0400] chrisa2: cnf: right, just checking :)
[2012-07-05 14:57:24 -0400] cnf: yfeldblum: yes, i know i'm not understanding it :P
[2012-07-05 14:57:37 -0400] cnf: knowing i don't understand it doesn't help me understand it though
[2012-07-05 14:57:53 -0400] yfeldblum: cnf, that's what you may want to focus on
[2012-07-05 14:57:58 -0400] morete: jespada : correct, riak cookbook
[2012-07-05 14:58:11 -0400] yfeldblum: cnf, by looking at output, backtraces, logs, and source code
[2012-07-05 14:58:15 -0400] cnf: chrisa2: http://pastie.org/4204671
[2012-07-05 14:58:23 -0400] cnf: yfeldblum: that's what i'm doing
[2012-07-05 14:58:31 -0400] cnf: but man, chef is information overload!!!
[2012-07-05 14:59:48 -0400] chrisa2: cnf: is there anything useful in /srv/chef/file_store/chef-stacktrace.out ?
[2012-07-05 14:59:56 -0400] gmcinnes: yfeldblum: if you have a sec later, I could *really* use some help with chef-server on Debian 6.0.5. I've tried package and bootstrap methods, tweaking various things, but I just can't get it to install.
[2012-07-05 15:00:16 -0400] cnf: chrisa2: no, same thing as in the paste
[2012-07-05 15:00:36 -0400] gmcinnes: yfeldblum: the merb processes just don't seem to get installed. Or get installed in the wrong place.
[2012-07-05 15:00:43 -0400] cnf: hmm
[2012-07-05 15:00:59 -0400] cnf: i don;t get how i can use a node to store data
[2012-07-05 15:01:21 -0400] yfeldblum: gmcinnes, i'm not familiar to that level of detail with how to setup chef-server
[2012-07-05 15:02:55 -0400] gmcinnes: yfeldblum: do know what the preferred way to make ruby / chef-solo is for using to bring up chef-server ?  Following the docs on the wiki doesn't seem to work.
[2012-07-05 15:04:01 -0400] cnf: i thought i could use nodes to store info such as a list of vhosts the node needs to run
[2012-07-05 15:04:04 -0400] yfeldblum: gmcinnes, this ended up working for me: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2012-07-05 15:04:08 -0400] cnf: but i can't see how that can work
[2012-07-05 15:05:04 -0400] cnf: some article said to put them in node attributes
[2012-07-05 15:05:13 -0400] yfeldblum: cnf, unfortunately, there's nothing anybody in this channel can do with a "it doesn't work"
[2012-07-05 15:05:19 -0400] drew84844: I'm getting an error that my validation file doesn't exist, when it actually does.  I don't suppose anyone can help?  https://gist.github.com/7c9981c1653fa35576a4
[2012-07-05 15:05:44 -0400] cnf: yfeldblum: i didn't say "it doesn't work
[2012-07-05 15:05:53 -0400] cnf: yfeldblum: i said "i don't see how it can work"
[2012-07-05 15:07:02 -0400] yfeldblum: cnf, the typical way to do it is `knife node edit NAME -e vim` and, in the editor, setting the attribute that your recipe watches for
[2012-07-05 15:07:23 -0400] cheeseplus: drew84844: one file has an underscore, the other a "-"
[2012-07-05 15:07:28 -0400] cnf: yfeldblum: ok, but then how do you version contoll that?
[2012-07-05 15:07:46 -0400] cheeseplus: drew84844: xxxxxxx_validator.pem vs /home/drew/.chef/xxxxxxx-validator.pem
[2012-07-05 15:08:01 -0400] drew84844: Wow, thanks very much!
[2012-07-05 15:08:15 -0400] cheeseplus: np, just a fresh set of eyes ;)
[2012-07-05 15:08:38 -0400] yfeldblum: cnf, don't know; but in general, i version-control code, but i don't version-control data
[2012-07-05 15:08:49 -0400] cnf: you don't?
[2012-07-05 15:08:52 -0400] gmcinnes: yfeldblum: It mostly works for me, but it falls over in two places a) rabbitmq-server's init file doesn't have correctly set chkconfig values and b) after fixing that the merb services still won't start (which I think is because they're getting installed in /opt/embedded..  and not in the gem path).  But it seems to work out of the box for everyone else, so I'm stumped.  I'll struggle on.
[2012-07-05 15:09:45 -0400] gmcinnes: cnf: if you want to version control it, but it in a data bag and put that data bag in version control, then look it up from the data bag at chef-client run time
[2012-07-05 15:10:36 -0400] cnf: gmcinnes: so node information is fleeting in nature?
[2012-07-05 15:11:24 -0400] yfeldblum: gmcinnes, worked for me on ubuntu 10 & 11, never tried on debian
[2012-07-05 15:11:29 -0400] gmcinnes: cnf: not fleeting necessarily. It lives on the chef server.
[2012-07-05 15:11:39 -0400] cnf: hmm
[2012-07-05 15:11:59 -0400] cnf: from what i can see, nodes are basically a place for chef-client to store data
[2012-07-05 15:12:10 -0400] yfeldblum: cnf, node attributes at the normal level is not fleeting in nature; rather, node attributes at the normal level are persisted until you remove or change them
[2012-07-05 15:12:18 -0400] yfeldblum: cnf, that's false
[2012-07-05 15:12:45 -0400] yfeldblum: cnf, chef-client *does* store it's output data in a node, but that's not the only thing nodes are for
[2012-07-05 15:13:16 -0400] cnf: yfeldblum: so what else are they used for?
[2012-07-05 15:13:34 -0400] yfeldblum: cnf, in particular, nodes are also the *input* to chef-client, and they are also the *input* to chef-solo, and there are also plenty of other things you can do with them
[2012-07-05 15:13:45 -0400] gmcinnes: cnf: be careful about the term "node" too. Its easy to refer to a chef clientized machine as a "node".  But there's also the "node" data structure on the chef-server.  Careful not to confuse the two.
[2012-07-05 15:14:19 -0400] cnf: yfeldblum: yeah, i'm trying to figure out the "plenty of other things"
[2012-07-05 15:15:44 -0400] cnf: yfeldblum: and it seems i'm still missing some pieces
[2012-07-05 15:18:41 -0400] cnf: hmz
[2012-07-05 15:19:38 -0400] gmcinnes: cnf: attributes on chef-server are not "fleeting" but they are transient in the sense that if your chef-server melts down for some reason you can't neccesarily rebuild your infrastructure
[2012-07-05 15:20:17 -0400] cnf: gmcinnes: yeah, that i find a strange concept
[2012-07-05 15:20:48 -0400] gmcinnes: cnf: not really. the tools are there to do that if that's what you want.
[2012-07-05 15:21:11 -0400] gmcinnes: cnf: that's why I do it via data bags.  They're all just json files
[2012-07-05 15:21:26 -0400] cnf: i find it strange it seems to resist all my attempts at backup/restore
[2012-07-05 15:21:39 -0400] cnf: gmcinnes: yeah, i'll probably go that route
[2012-07-05 15:22:44 -0400] gmcinnes: cnf:  if amazon aws goes haywire and eats Hosted Chef, I can rebuild all my chef-server data from data bags as soon as it comes back up
[2012-07-05 15:23:00 -0400] cnf: gmcinnes: yeah, that's exactly what i want
[2012-07-05 15:23:10 -0400] cnf: i never want any of my data at any 1 point
[2012-07-05 15:23:16 -0400] geekbri: Anybody here well versed with the python_pip resource?  I'd love to know if there is an existing way to get it to send a notification only if installed the pip, not if it was already installed
[2012-07-05 15:23:39 -0400] cnf: also http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence where are data bags in that list?
[2012-07-05 15:23:56 -0400] cnf: (in the 7 > 10 one)
[2012-07-05 15:24:05 -0400] ashb: geekbri: is there an easy way to get pip/python to tell you if something is already installed?
[2012-07-05 15:24:08 -0400] ashb: if so it sohuld be possible
[2012-07-05 15:24:15 -0400] ashb: but I'm not familiar with the pip resource
[2012-07-05 15:24:36 -0400] geekbri: ashb: yeah I could grep through the output of pip freeze and parse it to check
[2012-07-05 15:24:43 -0400] geekbri: ashb: so I could do an only_if on that...
[2012-07-05 15:24:45 -0400] gmcinnes: yfeldblum: yeah. it worked no prob in Ubuntu for me too :(
[2012-07-05 15:25:08 -0400] cnf: hmm
[2012-07-05 15:25:10 -0400] gmcinnes: cnf: typically you look up information from data bags inside a recipe, so it would be 10.
[2012-07-05 15:25:10 -0400] yfeldblum: gmcinnes, well, that's all the info i have, sorry!
[2012-07-05 15:25:37 -0400] morete: jespada: weird thing to me is that when I run chef-client manually it doesnt fail... when it runs as deamon it fails :S
[2012-07-05 15:25:46 -0400] gmcinnes: yfeldblum: n/p.  Thanks for trying!  I've been blocked on this for a few days. Do you know who is the chef-server guru?
[2012-07-05 15:25:55 -0400] cnf: hmm
[2012-07-05 15:26:00 -0400] yfeldblum: cnf, data bag items have got zero to do with node attributes
[2012-07-05 15:26:29 -0400] cnf: yfeldblum: what?
[2012-07-05 15:26:30 -0400] bawt_: yfeldblum: what is the order attribute files are loaded though
[2012-07-05 15:26:56 -0400] yfeldblum: gmcinnes, i do not, but you might poke people from opscode to find out who's a good person to ask
[2012-07-05 15:27:16 -0400] yfeldblum: cnf, node attributes do not include data bag items
[2012-07-05 15:27:51 -0400] cnf: aren't attributes attributes?
[2012-07-05 15:27:59 -0400] yfeldblum: cnf, `node["my-cookbook"]["my-key"]` will fetch data from the node instance, and `data_bag_item("bag-name", "item-name")` will fetch data from a data-bag item
[2012-07-05 15:28:23 -0400] yfeldblum: cnf, no, they aren't, because you're mixing different things together that shouldn't be mixed together
[2012-07-05 15:28:26 -0400] gmcinnes: cnf: yes, I should be clear. yfeldblum is correct. They are orthogonal concepts. But what you do is look up what you want in a data bag, and then set the attribute to that value.  (Or whatever else you want to do with that info).
[2012-07-05 15:28:52 -0400] gmcinnes: yfeldblum: oh, I totally thought you were an opscoder since you always have such good answers to my questions :)
[2012-07-05 15:29:30 -0400] cnf: hmz
[2012-07-05 15:29:37 -0400] cnf: i'm still confused
[2012-07-05 15:29:41 -0400] cnf: but it's time to go home
[2012-07-05 15:29:42 -0400] yfeldblum: gmcinnes, heh!
[2012-07-05 15:30:01 -0400] jespada: morete, stop and start chef-client then check.. I think is related to the cache..
[2012-07-05 15:32:18 -0400] jespada: morete, also checking on issues on the github repo for riak cookbook you will find something about that, and they mention(11 month ago) that this happen when is loaded twice , but should be fixed by now
[2012-07-05 15:32:25 -0400] morete: jespada: I did restart it, first run went fine, second run failed
[2012-07-05 15:32:55 -0400] morete: indeed, I found that in github
[2012-07-05 15:34:38 -0400] withnale: hi. whats the correct way to get a remote file from an arbitrary http location now that remote_file is depricated?
[2012-07-05 15:37:56 -0400] _rc: withnale: it's not deprecated; just the behaviour of looking in files/
[2012-07-05 15:44:32 -0400] mgalkiewicz: hi is there any way to change default provider for all service resources globally?
[2012-07-05 15:49:02 -0400] BryanWB_: mgalkiewicz: i am sure there is, u can monkeypatch chef itself
[2012-07-05 15:51:05 -0400] mgalkiewicz: where is the best place to do this?
[2012-07-05 15:51:22 -0400] jespada: mgalkiewicz, maybe write a lwrp (cookbook) that do that and include it on your base role
[2012-07-05 15:52:15 -0400] mgalkiewicz: I have found sth like this https://gist.github.com/3054490
[2012-07-05 15:52:22 -0400] mgalkiewicz: will it do the trick?
[2012-07-05 15:52:59 -0400] mgalkiewicz: I am not sure if lwrp is what I am looking for
[2012-07-05 15:54:28 -0400] jespada: mgalkiewicz, no is not.. I misunderstood your question
[2012-07-05 15:55:38 -0400] mgalkiewicz: jespada: so what do you suggest?
[2012-07-05 15:55:51 -0400] jespada: mgalkiewicz, that gits looks like could do the trick, not sure thought ... try it out.. is the best way to find out
[2012-07-05 15:59:00 -0400] mgalkiewicz: jespada: I have added it to my main role but there is a weird error. Could you refresh the gist and take a look?
[2012-07-05 15:59:14 -0400] mgalkiewicz: jespada: how it is possible that invokercd does not support such option?
[2012-07-05 16:00:15 -0400] mgalkiewicz: is it possible that there are different providers for different actions within one resource?
[2012-07-05 16:02:42 -0400] yfeldblum: mgalkiewicz, nope
[2012-07-05 16:03:09 -0400] jespada: mgalkiewicz, afaik no
[2012-07-05 16:04:36 -0400] mgalkiewicz: so it is quite weird that invokercd was the default provider for service resorce in 0.10.8 and actions like enable worked fine.
[2012-07-05 16:06:12 -0400] leifmadsen: hey all, last week I had some links I found and meant to test out that would help determine which cookbooks in my chef server were out of sync with those in my repository. As I'm at the cottage I don't have those in my history. Anyone happen to know some decent tools for checking that my cookbooks are in sync between my chef server and repo?
[2012-07-05 16:07:37 -0400] mgalkiewicz: leifmadsen: why dont you just upload all of them
[2012-07-05 16:07:56 -0400] leifmadsen: seems kind of brute force
[2012-07-05 16:08:59 -0400] kallistec: https://github.com/jkeiser/knife-essentials
[2012-07-05 16:10:09 -0400] leifmadsen: kallistec: huh neat
[2012-07-05 16:10:10 -0400] leifmadsen: thanks
[2012-07-05 16:13:27 -0400] myusuf3: ideas whit the script resource is exiting with 1
[2012-07-05 16:13:35 -0400] myusuf3: but when i run it on cl it works
[2012-07-05 16:13:36 -0400] myusuf3: https://gist.github.com/d89af621e4011ea6c972
[2012-07-05 16:13:41 -0400] myusuf3: cli*
[2012-07-05 16:14:38 -0400] mgalkiewicz: myusuf3: would be nice to see resource script
[2012-07-05 16:14:44 -0400] myusuf3: one second
[2012-07-05 16:16:27 -0400] myusuf3: mgalkiewicz https://gist.github.com/9cd3885ebf5e003ee805
[2012-07-05 16:16:52 -0400] myusuf3: basically
[2012-07-05 16:16:55 -0400] myusuf3: to go directory
[2012-07-05 16:16:59 -0400] myusuf3: and call the make file
[2012-07-05 16:19:25 -0400] barefoot: seems like it could only be a missing file or perms right? "`chdir': No such file or directory"
[2012-07-05 16:19:57 -0400] myusuf3: barefoot is that directed at me?
[2012-07-05 16:20:04 -0400] barefoot: yes
[2012-07-05 16:20:31 -0400] myusuf3: thats not the error its throwing thos
[2012-07-05 16:20:34 -0400] myusuf3: though*
[2012-07-05 16:20:48 -0400] myusuf3: its saying that the script ended with 1
[2012-07-05 16:21:19 -0400] barefoot: right, it errored out, you need to find the error, oh there it is on the next line
[2012-07-05 16:21:46 -0400] withnale: _rc: thanks
[2012-07-05 16:22:38 -0400] myusuf3: yeah; i am not sure what is causing this.
[2012-07-05 16:24:23 -0400] thedeeno: Is there a built in way to build/install a gem from a private git repository?
[2012-07-05 16:24:44 -0400] myusuf3: barefoot ideas?
[2012-07-05 16:24:59 -0400] barefoot: yes
[2012-07-05 16:25:00 -0400] barefoot: 16:19:25 < barefoot> seems like it could only be a missing file or perms right? "`chdir': No such file or directory"
[2012-07-05 16:25:14 -0400] mgalkiewicz: myusuf3: are you sure that cwd directory is present and that you did not do any typo?
[2012-07-05 16:25:23 -0400] myusuf3: mgalkiewicz yes
[2012-07-05 16:26:02 -0400] x0nic: can anyone tell me, if I can update data bags with chef solo?
[2012-07-05 16:26:03 -0400] barefoot: myusuf3: can you pastebin `namei -m /home/source/site/sourcemetrics.com/checkouts/sourcemtrics.com`?
[2012-07-05 16:26:49 -0400] myusuf3: barefoot :( typo
[2012-07-05 16:26:55 -0400] myusuf3: mgalkiewicz barefoot  thanks!
[2012-07-05 16:27:10 -0400] barefoot: np
[2012-07-05 16:27:55 -0400] myusuf3: barefoot
[2012-07-05 16:28:01 -0400] myusuf3: I have a quick question
[2012-07-05 16:28:09 -0400] myusuf3: I am using redisio for my redis deployment
[2012-07-05 16:28:22 -0400] myusuf3: he provides all these roles in the readme
[2012-07-05 16:28:49 -0400] myusuf3: https://github.com/brianbianco/redisio
[2012-07-05 16:29:04 -0400] myusuf3: I am not sure where to put the default parameters
[2012-07-05 16:29:10 -0400] myusuf3: so they taken advantage of.
[2012-07-05 16:29:36 -0400] myusuf3: i added redisio::install and redisio::enable to runlist in my solo.json
[2012-07-05 16:29:44 -0400] myusuf3: but where do the I store the default attributes
[2012-07-05 16:31:55 -0400] barefoot: pretty much anywhere that fits into your current setup I guess? http://wiki.opscode.com/display/chef/Attributes
[2012-07-05 16:37:21 -0400] x0nic: can anyone tell me, if I can update data bags with chef solo?
[2012-07-05 16:44:01 -0400] heartbyte: I'm getting a HTTP Request Returned 500 Internal Server Error: Connection failed when trying to run chef-client
[2012-07-05 16:46:33 -0400] yfeldblum: x0nic, why would you want to do that?
[2012-07-05 16:47:04 -0400] ssd7: Ohai Chefs!
[2012-07-05 16:47:16 -0400] c_t: ohai
[2012-07-05 16:48:08 -0400] gmcinnes: bonjour mes amis
[2012-07-05 16:48:52 -0400] gmcinnes: boy, do I have a question for you ssd7, when you have a minute
[2012-07-05 16:49:18 -0400] ssd7: I've got a few minutes now
[2012-07-05 16:51:10 -0400] heartbyte: hey guys, quick question. i'm sort of doing some ops stuff today instead of our usual guy. am i supposed to run something before chef-client when our chef server gets rebooted?
[2012-07-05 16:51:40 -0400] gmcinnes: I'm trying to install chef-server on Debian 6.0.5 but no matter how I try I keep running into issues with a) rabbitmq-server not being enabled properly and b) the merb processes not starting.
[2012-07-05 16:53:39 -0400] gmcinnes: ssd7: The rabbitmq-server part looks like this issue: http://tickets.opscode.com/browse/COOK-572
[2012-07-05 16:54:09 -0400] gmcinnes: ssd7: Sorry, this one: http://tickets.opscode.com/browse/COOK-649
[2012-07-05 16:54:40 -0400] gmcinnes: ssd7: but then after that, it looks like the merb services aren't getting installed either, even after fixing rabbitmq-server manually.
[2012-07-05 16:56:40 -0400] ssd7: gmcinnes: How are you going about installing chef-server?
[2012-07-05 16:57:26 -0400] gmcinnes: I've tried the bootstrap and package methods, with the same result in each.
[2012-07-05 16:57:42 -0400] gmcinnes: Within bootstrap I've tried both the runit and init init styles
[2012-07-05 16:58:29 -0400] ssd7: gmcinnes: I think your best bet is to post what you are seeing to the mailing list (you may have, I haven't checked the mailing list yet this morning) as this will probably require a bit more digging than I can do at the moment.
[2012-07-05 16:59:12 -0400] gmcinnes: What is the preferred way to get chef-solo for a bootstrap style install?  I have a hunch that something is going wrong because the merb gems are ending up in the /opt/embedded/. hierarchy
[2012-07-05 16:59:41 -0400] ssd7: gmcinnes: Ahh, that could definitely be the case, I'm not sure if those cookbooks have all been checked for omnibus compatibility
[2012-07-05 17:01:19 -0400] gmcinnes: ssd7: so, I can't remember how to get chef on a Debian machine *without* omnibus.  apt-get'ing ruby and rubygems and then doing gem install chef doesn't work either
[2012-07-05 17:02:06 -0400] Mithrandir: assuming you have wheezy: apt-get install chef gets you 0.10.10
[2012-07-05 17:03:25 -0400] gmcinnes: Mithrandir: squeeze. It doesn't appear to be in the repo.
[2012-07-05 17:07:13 -0400] jessicab: gmcinnes - you can find that info here http://wiki.opscode.com/display/chef/Installing+Chef+Client+on+Ubuntu+or+Debian
[2012-07-05 17:24:08 -0400] gmcinnes: jessicab: yeah. I've been through the apt version of that. Unfortunately that doesn't work for me. (at least, it produces the same version of fail when I try and install chef server).  Maybe I'll try the knife bootstrap variety
[2012-07-05 17:24:14 -0400] jessicab: gmcinnes - i dont know much about rabbit, but if youre doing this on the same server, perhaps you could try removing the rabbitmq lib and stuff before reinstalling? http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-Startingrabbitmqserver%3AFAILED
[2012-07-05 17:24:20 -0400] gmcinnes: ok. good to know.
[2012-07-05 17:33:23 -0400] myusuf3: barefoot I did was you suggested and added the attributes to my node.json
[2012-07-05 17:33:31 -0400] myusuf3: but it doesn't seem to be picking it up
[2012-07-05 17:36:22 -0400] miah: hi
[2012-07-05 17:36:44 -0400] geekbri: I don't know if this is still true, but having your properly set always used to make a big difference in the apt package installing properly or just plain not working
[2012-07-05 17:36:59 -0400] geekbri: wow left out the most important word.  "Hostname"
[2012-07-05 17:39:53 -0400] myusuf3: geekbri
[2012-07-05 17:40:04 -0400] myusuf3: i am using your redisio cookbook
[2012-07-05 17:40:09 -0400] geekbri: Neato :)
[2012-07-05 17:40:14 -0400] geekbri: Hopefully you are pleased with it
[2012-07-05 17:40:21 -0400] myusuf3: i have the option to turn on upstart in the setting
[2012-07-05 17:40:39 -0400] geekbri: I recently merged that pull request into the master branch.
[2012-07-05 17:40:50 -0400] geekbri: I am just contemplating some changes to it before I push it up as an official version
[2012-07-05 17:40:57 -0400] myusuf3: and you list a bunch of ways to start redis instances and default attributes
[2012-07-05 17:40:58 -0400] cnf: right
[2012-07-05 17:41:03 -0400] cnf: diy iphone repair failed
[2012-07-05 17:41:08 -0400] cnf: iphone: broken ^^;
[2012-07-05 17:41:37 -0400] myusuf3: so wait you dont support upstart setting yet? then why is it in the README?
[2012-07-05 17:41:56 -0400] geekbri: It isn't, unless you have pulled down the latest code from the master branch.
[2012-07-05 17:42:08 -0400] geekbri: what version of the cookbook are you using?
[2012-07-05 17:42:22 -0400] myusuf3: when was this merge done; I tried it out yesterday
[2012-07-05 17:42:26 -0400] myusuf3: pull from master
[2012-07-05 17:42:38 -0400] geekbri: Yeah, the master branch supports it.
[2012-07-05 17:42:54 -0400] geekbri: tag 1.0.3 (last official release, also on the community site) does not
[2012-07-05 17:42:58 -0400] myusuf3: 1.0.3
[2012-07-05 17:43:32 -0400] geekbri: I'll bump the version of master to 1.0.4 to avoid this confusion.  I wouldn't use HEAD of master for production systems.
[2012-07-05 17:43:58 -0400] myusuf3: hmm
[2012-07-05 17:44:02 -0400] myusuf3: well I used it as a submodule
[2012-07-05 17:44:10 -0400] myusuf3: why do you develop in master
[2012-07-05 17:44:14 -0400] myusuf3: why not work in a branch
[2012-07-05 17:44:19 -0400] myusuf3: and merge cleanly with master
[2012-07-05 17:44:22 -0400] geekbri: Thats not to say the head of master isn't safe, its safe to use as in I have tested it.  there are just potential changes I might make.
[2012-07-05 17:44:24 -0400] myusuf3: so it doesn't break anyone/.
[2012-07-05 17:44:42 -0400] geekbri: I tested this one, it could have been a feature branch
[2012-07-05 17:44:52 -0400] geekbri: I lied a little when I said it wasn't safe to use
[2012-07-05 17:44:54 -0400] geekbri: it is safe to use.
[2012-07-05 17:44:57 -0400] myusuf3: since people are depending on you :)
[2012-07-05 17:45:07 -0400] geekbri: Well those people should stick to the officially tag releases ;)
[2012-07-05 17:45:10 -0400] myusuf3: only pushed to master after testing I would hope
[2012-07-05 17:45:28 -0400] myusuf3: its hard to keep it in sync with my setting thats way, when using submodules
[2012-07-05 17:45:31 -0400] geekbri: Yes, like I said, I have tested it, but it is still in development (not an official release).  It could still have changes made to it.
[2012-07-05 17:45:39 -0400] myusuf3: anyways thats fine :)
[2012-07-05 17:45:52 -0400] geekbri: myusuf3: I use librarian-chef myself, its pretty handy.
[2012-07-05 17:45:53 -0400] myusuf3: added the  default attribute to the my node.json
[2012-07-05 17:46:07 -0400] geekbri: also, just using the versions from the community site works, as I push releases to that.
[2012-07-05 17:46:07 -0400] myusuf3: << python guy i am using fabric and submodules
[2012-07-05 17:46:33 -0400] geekbri: Although, generally using the HEAD of master for any project isn't necessarily the recommended way to be running something in production :)
[2012-07-05 17:46:34 -0400] myusuf3: will that work well?
[2012-07-05 17:46:44 -0400] geekbri: youre right though, this particular one should have been branched as "upstart" then merged down when completely finished.
[2012-07-05 17:47:47 -0400] myusuf3: kk
[2012-07-05 17:47:49 -0400] geekbri: myusuf3: 1.0.3 doesn't support monit/upstart so if you want those features you'll have to use the commit you are on.  I will (time permitting) be released this as 1.0.4 soon.  I am just contemplating some changes to the way it handles dealing with the upstart and monit options, as I currently think they are messy and gross.
[2012-07-05 17:48:13 -0400] miah: upstart is gross
[2012-07-05 17:48:17 -0400] geekbri: +1
[2012-07-05 17:48:21 -0400] myusuf3: miah;, I likeit
[2012-07-05 17:48:22 -0400] miah: i flat out wont support it
[2012-07-05 17:48:30 -0400] myusuf3: why do you think its gross?
[2012-07-05 17:48:35 -0400] miah: myusuf3: then im sorry that your mommy dropped you
[2012-07-05 17:48:36 -0400] myusuf3: geekbri; I have master
[2012-07-05 17:48:44 -0400] myusuf3: miah, can you tell me why?
[2012-07-05 17:48:46 -0400] myusuf3: haha
[2012-07-05 17:48:53 -0400] myusuf3: other than my mom dropping me
[2012-07-05 17:48:54 -0400] geekbri: I have very intentionally originally only supported SysV style
[2012-07-05 17:48:59 -0400] miah: upstart doesn't implement 'restart' correctly
[2012-07-05 17:49:05 -0400] miah: also, it loses track of processes _ALL THE TIME_
[2012-07-05 17:49:19 -0400] myusuf3: what do you suggest then as an alternative?
[2012-07-05 17:49:24 -0400] miah: runit
[2012-07-05 17:49:31 -0400] myusuf3: what wrong with thier version of restart
[2012-07-05 17:49:40 -0400] miah: if a service is not currently running, restart fails
[2012-07-05 17:49:51 -0400] geekbri: I am also not even sure "monit" support should be in the cookbook at all... since I provide a LWRP for installing redis, you could just use the LRWP to install it and then handle the start/stop/monitoring of it with a separate cookbook / LWRP
[2012-07-05 17:50:15 -0400] geekbri: Which is why I took so long to merge that pull request in the first place.
[2012-07-05 17:50:33 -0400] myusuf3: geekbri; okay but master has upstart support correct?
[2012-07-05 17:50:41 -0400] geekbri: myusuf3: yes.
[2012-07-05 17:50:49 -0400] myusuf3: kk which is what I have here
[2012-07-05 17:50:59 -0400] geekbri: I will most likely leave it in, I may just rearrange some things, so just do yourself a favor and lock into the commit you are using.
[2012-07-05 17:51:04 -0400] myusuf3: so putting default_attributes in the node.json
[2012-07-05 17:51:08 -0400] myusuf3: should work correct?
[2012-07-05 17:51:19 -0400] Toumar: For anyone familiar with the knife-ec2 - is there a way to change the way it interacts with the known_hosts file? I created ~/.ssh/config but knife-ec2 doesn't seem to be respecting the settings in that file.
[2012-07-05 17:51:27 -0400] miah: geekbri: do you 'tag' your releases in git? if not.. you should. it makes it easier for people to 'lock in'
[2012-07-05 17:51:31 -0400] geekbri: miah: I do.
[2012-07-05 17:51:35 -0400] miah: cool
[2012-07-05 17:51:38 -0400] geekbri: miah: he is using HEAD
[2012-07-05 17:51:48 -0400] miah: ah
[2012-07-05 17:51:49 -0400] miah: insanity
[2012-07-05 17:51:51 -0400] geekbri: Right
[2012-07-05 17:51:57 -0400] geekbri: thats sort of what I was saying :)
[2012-07-05 17:52:13 -0400] geekbri: If you are going to use HEAD of master you may once in a while experience problems :)
[2012-07-05 17:52:21 -0400] geekbri: myusuf3: not sure I follow, what exactly do you want to do
[2012-07-05 17:52:28 -0400] myusuf3: i want to enable upstart
[2012-07-05 17:52:35 -0400] myusuf3: I am new to chef
[2012-07-05 17:52:50 -0400] myusuf3: so what I did was
[2012-07-05 17:52:56 -0400] myusuf3: included your cookbook
[2012-07-05 17:52:58 -0400] geekbri: myusuf3: can you show me the role file you are using ?
[2012-07-05 17:53:10 -0400] myusuf3: adding redisio::install and redisio::enable to my run_list
[2012-07-05 17:53:15 -0400] myusuf3: thats the thing
[2012-07-05 17:53:18 -0400] myusuf3: i am not using a role file
[2012-07-05 17:53:24 -0400] myusuf3: I want to add the setting to my node.json
[2012-07-05 17:53:41 -0400] geekbri: oh you are just manually entering attributes?
[2012-07-05 17:53:41 -0400] myusuf3: I want to keep my cookbook code seperate from your cookbook
[2012-07-05 17:53:53 -0400] myusuf3: if you can tell me how to do it correctly
[2012-07-05 17:53:59 -0400] myusuf3: It would be much apprecaited
[2012-07-05 17:54:15 -0400] myusuf3: i am just confused with structure
[2012-07-05 17:54:19 -0400] geekbri: I will once I determine what exactly youre trying to do and how to do it :-P
[2012-07-05 17:54:21 -0400] myusuf3: when I am using other people's cookbooks
[2012-07-05 17:54:28 -0400] myusuf3: haha
[2012-07-05 17:54:35 -0400] myusuf3: i want redis default
[2012-07-05 17:54:37 -0400] myusuf3: with upstart
[2012-07-05 17:54:38 -0400] geekbri: myusuf3: can you show me the applicable part of your node.json in a gist and I will show you how it should look ?
[2012-07-05 17:54:43 -0400] myusuf3: using your cookbook
[2012-07-05 17:54:47 -0400] myusuf3: kk sure
[2012-07-05 17:57:53 -0400] myusuf3: https://gist.github.com/93c2b88420514bbc591d
[2012-07-05 17:57:58 -0400] myusuf3: geekbri ^
[2012-07-05 17:58:39 -0400] myusuf3: but when I list jobs in upstart
[2012-07-05 17:58:44 -0400] myusuf3: the redis one isn't there
[2012-07-05 17:59:01 -0400] geekbri: myusuf3: yeah, sorry the guy who changed the readme seems to have documented his own additions wrong somehow
[2012-07-05 17:59:11 -0400] geekbri: give me one second i'll show you how it should look
[2012-07-05 17:59:24 -0400] myusuf3: kk I am not sure what th *%w
[2012-07-05 17:59:27 -0400] myusuf3: and all that is
[2012-07-05 17:59:28 -0400] myusuf3: kk
[2012-07-05 17:59:46 -0400] geekbri: %w is just a way of telling ruby that you are using a whitespace delimited array
[2012-07-05 18:00:20 -0400] geekbri: blech I may have to entirely rewrite this guys work and implement it myself.
[2012-07-05 18:03:45 -0400] miah: doh
[2012-07-05 18:03:51 -0400] miah: that is my world in general
[2012-07-05 18:04:20 -0400] geekbri: Yeah, I was super hesitant to merge the request, although I did testing and a code review and decided "ok I will merge this into master and work on it some"
[2012-07-05 18:04:31 -0400] geekbri: but now I'm thinking I should have just taken his idea and reimplemented it myself
[2012-07-05 18:05:58 -0400] myusuf3: haha
[2012-07-05 18:06:03 -0400] myusuf3: so?
[2012-07-05 18:06:03 -0400] bawt_: so is this appstore everyone's talking about
[2012-07-05 18:06:13 -0400] KarlHungus: hmm... anyone have a clever solution for handling the shell attribute in a user data bag?
[2012-07-05 18:06:25 -0400] geekbri: myusuf3: Been a while since i've edited a node.json by hand, but try this https://gist.github.com/68a28ca34fe8fa3fe40a
[2012-07-05 18:06:29 -0400] geekbri: myusuf3: let me know if that works.
[2012-07-05 18:06:36 -0400] KarlHungus: if i want zsh, what do i put? /usr/bin/zsh? /bin/zsh? /usr/local/bin/zsh?
[2012-07-05 18:07:13 -0400] KarlHungus: bah. i'll just use the name, not the path
[2012-07-05 18:09:28 -0400] jameson_zzz: normally shells are in /bin/*
[2012-07-05 18:10:24 -0400] geekbri: you can always do "which zsh" to double check the location.
[2012-07-05 18:12:22 -0400] timsmith: Opscode guys:  Any idea when we might see a nice merging of outstanding pull requests for the cookbooks
[2012-07-05 18:13:36 -0400] myusuf3: geekbri, no upstart jobs
[2012-07-05 18:13:39 -0400] myusuf3: ..
[2012-07-05 18:13:41 -0400] myusuf3: forget it
[2012-07-05 18:13:46 -0400] myusuf3: I am going to write the cookbook myself
[2012-07-05 18:14:03 -0400] myusuf3: this is a problem with chef
[2012-07-05 18:14:45 -0400] myusuf3:  people write things but they can't be used flexibily without having to rewrite functionality. I have to maintain it; even though its a "cookbook"
[2012-07-05 18:14:50 -0400] myusuf3: nothing against you
[2012-07-05 18:14:53 -0400] myusuf3: geekbri
[2012-07-05 18:15:05 -0400] myusuf3: frustration I have been having with cookbooks
[2012-07-05 18:15:11 -0400] KarlHungus: jameson_zzz: what does "normally" mean to you?
[2012-07-05 18:15:54 -0400] KarlHungus: jameson_zzz: i'm mostly joking, fwiw. =)
[2012-07-05 18:17:19 -0400] geekbri: I am pretty sure that the cookbook itself works fine, I just think you are not setting the attributes properly.  I unfortunately can't right now go through and troubleshoot it for you :)
[2012-07-05 18:17:26 -0400] hoover_damm: myusuf3, building a set of cookbooks you 'trust' and re-use is a part of finding your footing with Chef.
[2012-07-05 18:17:49 -0400] hoover_damm: myusuf3, just as much as reviewing cookbooks and determining you should copy and paste what you like and start fresh
[2012-07-05 18:17:54 -0400] geekbri: myusuf3: if you do find an error in the cookbook itself you can file an issue on github and I will fix it.
[2012-07-05 18:18:00 -0400] myusuf3: hoover_damn, yeah I can understand that but that being the main challenge with chef is ridiculous
[2012-07-05 18:18:24 -0400] myusuf3: geekbri well if you can tell me how to get upstart working; i would be happy.
[2012-07-05 18:18:28 -0400] hoover_damm: myusuf3, ideally you should fork and submit pull requests for cookbooks that have bugs.  But not everyone is trying to solve the same problem so they may not see your pull request with the same 'eyes'.
[2012-07-05 18:18:37 -0400] cgag: I have a lightweight provider, and within it i'm trying to have one of my resources subscribe to a resource from another cookbook.  The subscribe line seems to be fine as it runs without giving a resource not found error, but it doesn't seem to actually pick up the changes in the resource it subscribes to.
[2012-07-05 18:18:39 -0400] geekbri: myusuf3: if you set the node attributes properly, the cookbook will start redis through upstart
[2012-07-05 18:18:58 -0400] cgag: Is it a problem to subscribe to resources from other cookbooks?  Or maybe to resources outside my provider?
[2012-07-05 18:19:02 -0400] geekbri: myusuf3: my guess is that in your chef solo instances the node attributes aren't being set properly, so its using the default upstart value which is false.
[2012-07-05 18:19:03 -0400] myusuf3: geekbri; there is no upstart job keeping it up though
[2012-07-05 18:19:24 -0400] myusuf3: i sent you how I was setting up my node.json
[2012-07-05 18:19:35 -0400] hoover_damm: upstart can diaf
[2012-07-05 18:19:38 -0400] geekbri: it could also be that, looking at the way this guy did his upstart jobs, if the /etc/init.d/redis6379 script exists, it falls back to use sysv
[2012-07-05 18:19:46 -0400] geekbri: so you may have to delete the sysv script
[2012-07-05 18:19:56 -0400] hoover_damm: i might accept systemd
[2012-07-05 18:19:59 -0400] hoover_damm: i just haven't used it enough
[2012-07-05 18:20:04 -0400] geekbri: I don't like upstart either.
[2012-07-05 18:20:12 -0400] myusuf3: hoover_damm I will look into runit
[2012-07-05 18:20:19 -0400] hoover_damm: myusuf3, github.com/damm/redis
[2012-07-05 18:20:46 -0400] hoover_damm: myusuf3, basically that's a fork of the ironfan (mrflips) redis cookbook without any ark or any other dependencies
[2012-07-05 18:21:04 -0400] myusuf3: hoover_damm, hmm
[2012-07-05 18:21:05 -0400] hoover_damm: myusuf3, uses redis and works out of the box
[2012-07-05 18:21:17 -0400] myusuf3:  I will give it a shot
[2012-07-05 18:21:23 -0400] myusuf3: are the cookbooks you use that clean?
[2012-07-05 18:21:23 -0400] hoover_damm: myusuf3, you'll need my sysctl cookbook as well
[2012-07-05 18:21:33 -0400] myusuf3: so when you say I will need it
[2012-07-05 18:21:38 -0400] hoover_damm: myusuf3, as with redis you'll want to set vm.overcommit_memory => 1
[2012-07-05 18:21:42 -0400] hoover_damm: myusuf3, and that cookbook sets that
[2012-07-05 18:21:44 -0400] myusuf3: that means that it just need to be in the coobooks directory?
[2012-07-05 18:21:54 -0400] hoover_damm: just needs to be uploaded or with your chef-solo tarball
[2012-07-05 18:21:58 -0400] myusuf3: yee
[2012-07-05 18:22:00 -0400] myusuf3: okay
[2012-07-05 18:22:00 -0400] hoover_damm: github.com/damm/sysctl
[2012-07-05 18:22:07 -0400] myusuf3: so i run a rsync script to do this
[2012-07-05 18:22:29 -0400] geekbri: Just for the record, my cookbook fully supports installing redis and running it out of the box.
[2012-07-05 18:22:43 -0400] geekbri: I stand by my statement that the issue isn't my cookbook but how he is setting the attributes in his chef solo instance.
[2012-07-05 18:22:45 -0400] hoover_damm: geekbri, to be fair there's 800 different redis cookbooks
[2012-07-05 18:23:11 -0400] hoover_damm: geekbri, as a end-usre I wouldn't know how they could pick heads or tails short of flipping a coin and praying
[2012-07-05 18:23:16 -0400] myusuf3: geekbri, okay
[2012-07-05 18:23:20 -0400] myusuf3: lets see what the issue
[2012-07-05 18:23:40 -0400] geekbri: hoover_damm: I don't mind him using another one, I'm just saying I don't think its a bug in the cookbook as much as the cookbook is doing what it is supposed to be given the attributes it has :)
[2012-07-05 18:24:06 -0400] hoover_damm: geekbri, remember to take everything you see in #chef with a grain of salt.  Usage patterns can break cookbooks easily
[2012-07-05 18:24:12 -0400] geekbri: I also merged a pull request and stated in the commit message that I wouldn't suggest people use it yet :)
[2012-07-05 18:24:27 -0400] hoover_damm: I really need to rewrite my redis cookbook into a lwrp
[2012-07-05 18:24:29 -0400] geekbri: Since I want to do further code review and make changes, thats why it hasn't been tagged with a release version yet!
[2012-07-05 18:24:33 -0400] hoover_damm: but I haven't been assed to
[2012-07-05 18:24:34 -0400] hoover_damm: lol
[2012-07-05 18:24:54 -0400] geekbri: yeah, I have many additions / changes / etc that I want to make, its just that whole time thing :)
[2012-07-05 18:25:20 -0400] myusuf3: I am just annoyed geekbri
[2012-07-05 18:25:28 -0400] myusuf3: I just need simplier cookbooks
[2012-07-05 18:25:31 -0400] hoover_damm: geekbri, the problem is the usage patterns inside a chef-client world are pretty straight forward
[2012-07-05 18:25:32 -0400] myusuf3: without as many exceptions
[2012-07-05 18:25:38 -0400] myusuf3: delete a script
[2012-07-05 18:25:41 -0400] myusuf3: and what not
[2012-07-05 18:26:18 -0400] hoover_damm: geekbri, the problem is once you step outside regular chef-client.  How people do chef-solo seems to be chaotic at best
[2012-07-05 18:27:12 -0400] geekbri: hoover_damm: yes, thats a fact.  I did indeed test this CB with chef-solo and had no issue, but it becomes difficult for me to troubleshoot everybody elses issues :)
[2012-07-05 18:27:13 -0400] myusuf3: documentation issue
[2012-07-05 18:27:16 -0400] myusuf3: im my opinion
[2012-07-05 18:27:24 -0400] myusuf3: I looked everywhere for a good way of doing things
[2012-07-05 18:27:29 -0400] hoover_damm: if you are going to use chef-solo you should expect to take a great deal of the weight of cooking
[2012-07-05 18:27:31 -0400] hoover_damm: and refactoring
[2012-07-05 18:27:35 -0400] myusuf3: just gather what I could from the community
[2012-07-05 18:27:38 -0400] hoover_damm: and describing your node attributes and likely builting services around chef-solo
[2012-07-05 18:27:51 -0400] geekbri: hoover_damm: I use a chef server, i've just tested it with both
[2012-07-05 18:28:01 -0400] hoover_damm: because you'll never be able to accept food from a chef-client user and expect it to 'just work'.
[2012-07-05 18:28:11 -0400] hoover_damm: they use search, they use databags differently
[2012-07-05 18:28:20 -0400] geekbri: hoover_damm: I test it in a series of VMs i have using chef solo (for all the different distros) and then I push it to a test server I have and test it on an instance using a chef-server / chef-client normal way of doing things.
[2012-07-05 18:28:35 -0400] hoover_damm: geekbri, you care more then  you should.
[2012-07-05 18:28:48 -0400] geekbri: hoover_damm: perhaps, I just wanted it to be safe for people to use :)
[2012-07-05 18:28:48 -0400] hoover_damm: geekbri, that's not a bad thing it's commendable
[2012-07-05 18:29:13 -0400] hoover_damm: geekbri, that's kinda why I'd love Opscode Tested stamps on community.opscode.com
[2012-07-05 18:29:32 -0400] geekbri: Its just really hard to trouble shoot everybody elses setup.  There is a lot that can go wrong when using chef to setup your servers (not chefs fault) because order matters in a lot of things, how you setup your attributes matter.
[2012-07-05 18:29:35 -0400] geekbri: a whole lot can go wrong.
[2012-07-05 18:29:43 -0400] hoover_damm: geekbri, it's can be pretty rough trying to hit all the angles for everyone else and trying to to document make it enough for everyone
[2012-07-05 18:29:46 -0400] hoover_damm: is impossible
[2012-07-05 18:29:49 -0400] geekbri: yeah
[2012-07-05 18:30:12 -0400] geekbri: Its very hard to trouble shoot all the potential things that can go wrong, short of just having access to their server and doing it for them :-P
[2012-07-05 18:30:21 -0400] hoover_damm: I stopped trying to please end-users about 2.5years ago when a customer of mine when I worked for Engine Yard explained to me how futile it was because every ruby developer thinks they know better
[2012-07-05 18:30:27 -0400] hoover_damm: and they want it this way
[2012-07-05 18:30:33 -0400] hoover_damm: this was in regards to a Thinking Sphinx Cookbook actually
[2012-07-05 18:30:48 -0400] hoover_damm: and Thinking Sphinx can be quite a big goolash
[2012-07-05 18:30:49 -0400] geekbri: I will fix just about any issue thats submitting via github issues, as long as they are true :)
[2012-07-05 18:30:55 -0400] myusuf3: I am asking how to do it :(
[2012-07-05 18:31:07 -0400] geekbri: hoover_damm: ugh, I had to write my own thinking sphinx cookbook because we use it here, I hate it.
[2012-07-05 18:31:52 -0400] hoover_damm: geekbri, basically drum roll is sometimes people care too much and screw themselves over by caring about knobs in cookbooks that don't matter.  They end up creating more work and have to fix bugs
[2012-07-05 18:31:58 -0400] hoover_damm: geekbri, because they thought they needed something
[2012-07-05 18:32:10 -0400] geekbri: welcome to what just happened to me :-P
[2012-07-05 18:32:26 -0400] hoover_damm: you should throw that back on the person that did it
[2012-07-05 18:32:28 -0400] miah: hoover_damm: http://en.wikipedia.org/wiki/You_ain't_gonna_need_it
[2012-07-05 18:32:46 -0400] hoover_damm: miah, haha
[2012-07-05 18:33:06 -0400] hoover_damm: I tend to mix a little KISS with some OCD
[2012-07-05 18:33:12 -0400] geekbri: My biggest mistake was accepting a pull request.  I think I may just revert the changes and rewrite it myself in a better way
[2012-07-05 18:33:14 -0400] hoover_damm: it bruns onlya  little
[2012-07-05 18:33:23 -0400] hoover_damm: yeah I have to do that with my redis cookbook
[2012-07-05 18:33:37 -0400] geekbri: I was going to do that anyway, but this just strengthens my opinion that I should have done it in the first place.
[2012-07-05 18:33:43 -0400] thecox: how does one raise an error in a recipe to prevent the rest of the recipe from executing?
[2012-07-05 18:33:45 -0400] hoover_damm: I really hate evaluating attributes that are set in the same cookbook to construct a ruby version
[2012-07-05 18:33:48 -0400] hoover_damm: s/ruby/redis
[2012-07-05 18:34:00 -0400] hoover_damm: I'm going to move that to my recipe because that is just disgusting
[2012-07-05 18:34:10 -0400] hoover_damm: in an attribute it's uglier then it has to be
[2012-07-05 18:34:16 -0400] hoover_damm: in a recipe it can be much less fugly
[2012-07-05 18:34:42 -0400] hoover_damm: geekbri, Only you can do it in a way that will make you happy
[2012-07-05 18:34:53 -0400] myusuf3: hmm
[2012-07-05 18:34:56 -0400] geekbri: hoover_damm: unfortunately sometimes thats too true!
[2012-07-05 18:35:01 -0400] hoover_damm: geekbri, accepting pull requests is dangerous because the first thing you have to do is re-evaluate what is flat
[2012-07-05 18:35:13 -0400] myusuf3: so if you revert that geekbri i will write the upstart thing my own
[2012-07-05 18:35:46 -0400] hoover_damm: geekbri, i've become pretty cowboy about it ... but I wish I wasn't
[2012-07-05 18:36:06 -0400] geekbri: myusuf3: I'm not used to debugging chef-solo too much, but this is my guess on what happened.  First you installed redis and it setup the init.d SysV style script.  the service LWRP for redis checks to see if /etc/init.d/redis<port> exists.  If it does it starts redis that way.  If not it check /etc/init/redis<port>.   If /etc/init/redis<port> exists, you can just safely deleted the init.d script and it shoudl work without issue.
[2012-07-05 18:36:22 -0400] hoover_damm: geekbri, basically I would suggest just leaving pull requests open and let people submit full pull requests.  Evaluate it, test it, and if you don't like it tell them 'no thank you'.
[2012-07-05 18:36:25 -0400] geekbri: myusuf3: if the /etc/init/redis<port> doesn't exist, that means that your node attributesprobably aren't set properly.
[2012-07-05 18:36:36 -0400] hoover_damm: geekbri, you /always/ have the right to refuse
[2012-07-05 18:36:45 -0400] myusuf3: geekbri i will check for the script
[2012-07-05 18:36:55 -0400] myusuf3: you gave me the node attributes
[2012-07-05 18:37:04 -0400] geekbri: hoover_damm: I had merged his commit locally, tested it and done a code review.  It worked, and althought he code was ugly I figured I would have time to massage it to pretty before tagging for a release
[2012-07-05 18:37:06 -0400] myusuf3: so I will deal with that when it happens
[2012-07-05 18:37:11 -0400] myusuf3: so let me delete the script
[2012-07-05 18:37:21 -0400] geekbri: hoover_damm: but some individuals are using HEAD on Master instead of the tagged versions
[2012-07-05 18:37:25 -0400] hoover_damm: geekbri, going to redisconf?
[2012-07-05 18:37:30 -0400] geekbri: myusuf3: Yeah, but thats not to say I even set the node attributes properly
[2012-07-05 18:37:39 -0400] geekbri: hoover_damm: I desperately want to, but I doubt my company has the $ to send me right now.
[2012-07-05 18:37:50 -0400] geekbri: hoover_damm: we need some more east coast conferences :)
[2012-07-05 18:37:54 -0400] hoover_damm: geekbri, my cats will hate me
[2012-07-05 18:37:55 -0400] hoover_damm: but i may
[2012-07-05 18:38:00 -0400] hoover_damm: it's only pdx
[2012-07-05 18:38:20 -0400] geekbri: hoover_damm: My friend lives in seattle (works for aws) so I might be able to stay with him, then I could pay for the ticket myself and maybe just get a small free vacation
[2012-07-05 18:38:33 -0400] geekbri: hoover_damm: let me know if you go, ill let you know if i get to.
[2012-07-05 18:38:37 -0400] geekbri: i'm not optimistic
[2012-07-05 18:38:38 -0400] hoover_damm: poor thing working for aws
[2012-07-05 18:38:39 -0400] hoover_damm: lol
[2012-07-05 18:38:45 -0400] geekbri: well he works on the SDKs
[2012-07-05 18:38:50 -0400] hoover_damm: oh phew
[2012-07-05 18:38:53 -0400] geekbri: so he has been isolated from the nightmares :)
[2012-07-05 18:38:56 -0400] hoover_damm: i'd hate to be an engineer fixing crap lately
[2012-07-05 18:39:09 -0400] hoover_damm: i lost enough of my /own/ sleep
[2012-07-05 18:39:18 -0400] hoover_damm: I don't want to loose sleep for someone else lol
[2012-07-05 18:39:44 -0400] myusuf3: geekbri there is no /etc/init/redis<port> script
[2012-07-05 18:40:27 -0400] geekbri: myusuf3: I'd love to know what the attributes are after a run of chef-client, not sure how to get those with chef-solo
[2012-07-05 18:40:44 -0400] geekbri: Id love to see what the result of those default attributes when merged with the cookbook attributes show
[2012-07-05 18:40:53 -0400] geekbri: that would lead me to a reasonable answer as to what was wrong.
[2012-07-05 18:40:54 -0400] myusuf3: idk
[2012-07-05 18:41:09 -0400] myusuf3: I am going to work on something else
[2012-07-05 18:41:16 -0400] myusuf3: I am getting unproductive and angry
[2012-07-05 18:41:20 -0400] myusuf3: thanks for your help! :D
[2012-07-05 18:41:35 -0400] geekbri: ok.  Just a word of advise, if you use chef, puppet, salt stack, whatever... you will end up having to debugging of other peoples cookbooks / puppet manifests whatever
[2012-07-05 18:41:48 -0400] geekbri: its just the nature of doing infrastructure as code.
[2012-07-05 18:41:53 -0400] myusuf3: I will hit you up tomorrow if you are around.
[2012-07-05 18:42:06 -0400] geekbri: I will be on my way to my brothers for the weekend, you can always send me a message on github though.
[2012-07-05 18:42:17 -0400] myusuf3: geekbri dont you think that ridiculous and will lead to everyone writing their own cookbooks?
[2012-07-05 18:42:33 -0400] myusuf3: all the dupublication of work?
[2012-07-05 18:42:36 -0400] myusuf3: this*
[2012-07-05 18:42:50 -0400] myusuf3: I am almost pissed off enough to write everythnig myself.
[2012-07-05 18:42:50 -0400] KarlHungus: thats usually how winning patterns are discovered ;)
[2012-07-05 18:42:58 -0400] geekbri: +1
[2012-07-05 18:43:16 -0400] geekbri: It is not often an easy process to discover if you should write a cookbook yourself or if an existing one is good enough
[2012-07-05 18:43:27 -0400] myusuf3: hmm
[2012-07-05 18:43:29 -0400] myusuf3: kk
[2012-07-05 18:43:34 -0400] myusuf3: thanks for the advice guys
[2012-07-05 18:43:37 -0400] geekbri: that is something I struggle with frequently.  I like to use something maintained by other people because then it gets updated like magic without effort from me.
[2012-07-05 18:43:47 -0400] geekbri: However evaluating if a cookbook is worthy is all part of the process
[2012-07-05 18:43:58 -0400] geekbri: If all cookbooks were perfect a lot of us might be out of jobs ;)
[2012-07-05 18:44:17 -0400] hoover_damm: nah
[2012-07-05 18:44:20 -0400] geekbri: Infrastructure as code is a lot different than just developing a piece of software.
[2012-07-05 18:44:37 -0400] hoover_damm: people who expect to be able to copy and paste cookbooks and use them and win often fail
[2012-07-05 18:44:47 -0400] geekbri: yes, that doesn't really work
[2012-07-05 18:44:54 -0400] hoover_damm: It's just like copying and pasting a program you don't understand
[2012-07-05 18:45:18 -0400] gmcinnes: but having said that, a lot of the example cookbooks give the wrong impression.
[2012-07-05 18:45:34 -0400] hoover_damm: examples are just examples
[2012-07-05 18:46:29 -0400] hoover_damm: if you have the expectation that you can just install chef and build out some large infra with mysql and rails apps out of the box.  You'll often find your usage patterns in rails to be your first stumbling block
[2012-07-05 18:46:57 -0400] thedeeno: is there a built in provider for building and install a gem from a gitrepo?
[2012-07-05 18:47:09 -0400] geekbri: Does anybody know if its possible to dump the node attributes data from a chef-solo run?
[2012-07-05 18:47:21 -0400] hoover_damm: geekbri, it's just ohai + whatever's in node.json
[2012-07-05 18:47:28 -0400] hoover_damm: geekbri, and yes it's possible to do pp node.to_a
[2012-07-05 18:47:39 -0400] geekbri: yeah, that I know, I guess i meant
[2012-07-05 18:47:57 -0400] geekbri: is there an easy way for me to tell somebody who isn't me, hey, dump me the merging of ohai + node.json so I can look at it
[2012-07-05 18:48:15 -0400] hoover_damm: just dump node.json is all you need
[2012-07-05 18:51:09 -0400] hoover_damm: geekbri, basically thursday morning dashed due to not enough readme reading :(
[2012-07-05 18:52:44 -0400] geekbri: hoover_damm: :)
[2012-07-05 18:56:22 -0400] cgag: I have a lightweight provider, and within it i'm trying to have one of my resources subscribe to a resource from another cookbook.  The subscribe line seems to be fine as it runs without giving a resource not found error, but it doesn't seem to actually pick up the changes in the resource it subscribes to.  Is it a problem to subscribe to resources from other cookbooks?  Or maybe to resources outside my provider?
[2012-07-05 18:59:04 -0400] miah: use notify rather than subscribe.
[2012-07-05 19:00:27 -0400] cgag: i don't think i can since that first resource doesn't know all the things that will be subscribing to it
[2012-07-05 19:00:27 -0400] cnf: this steven fella is being really helpful on the opscode support desk :P
[2012-07-05 19:06:06 -0400] geekbri: Steven D ?
[2012-07-05 19:06:31 -0400] geekbri: Nice guy.
[2012-07-05 19:08:09 -0400] cnf: idno, he just signs as steven :P
[2012-07-05 19:09:14 -0400] yfeldblum: myusuf3, there needs to be many of everything, including cookbooks
[2012-07-05 19:10:35 -0400] geekbri: Different strokes for different folks!
[2012-07-05 19:16:37 -0400] cnf: hmm
[2012-07-05 19:16:52 -0400] cnf: the opscode support desk site could do with basic markdown support or somethin
[2012-07-05 19:16:53 -0400] cnf: g
[2012-07-05 19:18:43 -0400] hoover_damm: arn't most people stil using entp apps?
[2012-07-05 19:19:20 -0400] hoover_damm: or tender
[2012-07-05 19:19:45 -0400] hoover_damm: neat entp app... https://mix.oracle.com/home
[2012-07-05 19:20:08 -0400] miketheman: in a knife plugin, would it be incorrect to use 'node.name' attribute, since node['name'] doesn't exist?
[2012-07-05 19:20:47 -0400] paulmooring: miketheman: almost certainly yes
[2012-07-05 19:20:58 -0400] miketheman: paulmooring: a better option?
[2012-07-05 19:21:09 -0400] miketheman: node['fqdn'] != node.name
[2012-07-05 19:21:13 -0400] paulmooring: what are you trying to do?
[2012-07-05 19:21:18 -0400] paulmooring: like via search?
[2012-07-05 19:22:13 -0400] hoover_damm: i use n.name
[2012-07-05 19:22:14 -0400] hoover_damm: alot
[2012-07-05 19:22:15 -0400] miketheman: no - from the output of a knife status run
[2012-07-05 19:22:25 -0400] hoover_damm: http://likens.us/blog/2012/03/29/knife-plugins/
[2012-07-05 19:22:44 -0400] mrtazz: hey, is there a quick way to update a nodes attributes gathered from ohai, without doing a full chef-client run?
[2012-07-05 19:23:25 -0400] miketheman: paulmooring: is that wonrg? hoover_damm uses it, jtimberman does too.
[2012-07-05 19:23:40 -0400] paulmooring: no actually that's correct in that situation
[2012-07-05 19:23:59 -0400] miketheman: ok then. I will use n.name (just my n = node) ;)
[2012-07-05 19:24:05 -0400] paulmooring: the same Node class is available, but you have to get a node from the server to use it on
[2012-07-05 19:24:28 -0400] paulmooring: the difference is there's no `node` automatically using knife (like in a cookbook)
[2012-07-05 19:24:43 -0400] hoover_damm: tense matters
[2012-07-05 19:25:20 -0400] hoover_damm: paulmooring, right node is built from ohai during a client run.  Knife isn't a client in the same sense
[2012-07-05 19:26:55 -0400] paulmooring: also hoover_damm and jtimberman are probably both smarter than me, so if they do it it's ok :)
[2012-07-05 19:26:55 -0400] miketheman: paulmooring: yeah, mkaes sense - I think I'm creating an object that happens to be called "node".
[2012-07-05 19:27:26 -0400] mrtazz: can ohai itself update data about the node on chef server or only when called from a chef run?
[2012-07-05 19:28:17 -0400] paulmooring: mrtazz: ohai can never update the Chef server, the chef-client builds the node from ohai, but all the Chef server interaction is done via chef-client/knife
[2012-07-05 19:30:07 -0400] javawidget: Hi All...
[2012-07-05 19:30:13 -0400] mrtazz: hmm, would just running chef-client with an empty run list be enough to update the node info?
[2012-07-05 19:30:13 -0400] javawidget: happy 7-5
[2012-07-05 19:31:07 -0400] javawidget: question: I need to populate a config file on a node with all of the server names that have a particular role.
[2012-07-05 19:31:40 -0400] javawidget: anyone have any examples of what such and erb file would look like?
[2012-07-05 19:32:02 -0400] javawidget: such *an erb file would look like ?
[2012-07-05 19:33:12 -0400] javawidget: I think I might have to use a search function...
[2012-07-05 19:35:33 -0400] paulmooring: javawidget: that's probably the best way, use search in the recipe to build an array than pass a variable into the template
[2012-07-05 19:36:17 -0400] javawidget: search(:node, 'role:load_balancer')
[2012-07-05 19:36:19 -0400] hoover_damm: javawidget, ssh_known_hosts cookbook is a good example
[2012-07-05 19:36:25 -0400] morete: jespada: issue fixed... bye!
[2012-07-05 19:36:29 -0400] hoover_damm: javawidget, searches everything and then drops it to a template
[2012-07-05 19:36:31 -0400] javawidget: awesome.
[2012-07-05 19:36:48 -0400] javawidget: thanks again, hoover_damm.... (again) :)
[2012-07-05 19:37:24 -0400] hoover_damm: javawidget, i'm just glad that my learning can benefit others :)
[2012-07-05 19:43:13 -0400] gmcinnes: oh! that's the best one
[2012-07-05 19:43:19 -0400] gmcinnes: has a great food court :)
[2012-07-05 19:43:46 -0400] gmcinnes: why are you there?
[2012-07-05 19:44:55 -0400] miketheman: is it bad to set a node attribute mid-run via `node.set`?
[2012-07-05 19:45:13 -0400] hoover_damm: set.unless
[2012-07-05 19:45:29 -0400] hoover_damm: unless your trying to make it an override
[2012-07-05 19:47:30 -0400] miketheman: hoover_damm:  how would I apply that to something like this? if node['myattr'].nil? ; node.set['myattr'] = foo ; end
[2012-07-05 19:48:56 -0400] hoover_damm: miketheman, http://wiki.opscode.com/display/chef/Attributes#Attributes-SettingaValueOnlyIftheAttributeHasNoValue
[2012-07-05 19:49:17 -0400] hoover_damm: and no you shouldn't use if node['myattr'].nil? only
[2012-07-05 19:50:13 -0400] miketheman: that applies to attribute files only, correct?
[2012-07-05 19:50:43 -0400] hoover_damm: miketheman, you should always start out with if node.has_key?("somekey") && if node['somekey'].length > 2
[2012-07-05 19:50:46 -0400] hoover_damm: dosomething
[2012-07-05 19:50:47 -0400] hoover_damm: for example
[2012-07-05 19:51:05 -0400] hoover_damm: miketheman, the nil? isn't worth it after you have .has_key?
[2012-07-05 19:52:19 -0400] miketheman: I don't think I understand
[2012-07-05 19:52:37 -0400] miketheman: If I know that I'm setting the attribute by default to nil, then it should always have a key
[2012-07-05 19:52:59 -0400] miketheman: testing the length of it seems like a good idea, since then it is at least not nil
[2012-07-05 19:53:29 -0400] hoover_damm: why would you set a key to nil always?
[2012-07-05 19:53:38 -0400] hoover_damm: miketheman, .length is just an example
[2012-07-05 19:54:02 -0400] hoover_damm: miketheman, you use .has_key? to determine if the subkey/key exists and then access it
[2012-07-05 19:54:53 -0400] miketheman: it's not set to nil always - only by default.
[2012-07-05 19:55:22 -0400] miketheman: it's meant to be overridden at a non-cookbook level, such as a role, environment, etc - and potentially also a recipe
[2012-07-05 19:58:06 -0400] hoover_damm: weird pattern
[2012-07-05 19:58:18 -0400] hoover_damm: if it works for you cool
[2012-07-05 19:58:31 -0400] miketheman: yeah, I think that's a good point. I'll take another look at why we're doing that.
[2012-07-05 19:59:43 -0400] geekbri: So you know how if the template resource no-ops and doesn't actually have to lay down a new template it doesn't send a notification when you are using notifies.  Anybody know how to add that into my LWRPs ?
[2012-07-05 20:00:11 -0400] geekbri: Do notifications only get sent if the  updated_by_last_action() method is called on @new_resource?
[2012-07-05 20:01:44 -0400] geekbri: Hrm, perhaps its the case that by default a resource has updated_by_last_action set to true for an LWRP so in its initialization you would have to set that to false in order to prevent notifications from being sent unless you set updated_by_last_action to true
[2012-07-05 20:02:05 -0400] geekbri: meh I guess I have to go read some more source
[2012-07-05 20:03:51 -0400] kevmo: On the Chef Server web console > Nodes, is there a way to tell Chef not to poll for the /etc/group and /etc/passwd?  The reason I ask is because I have these servers joined to my AD domain via likewiseopen and since doing so the chef console has become extremely slow because it appears to be trying to enumerate all of the users and groups in my domain.
[2012-07-05 20:04:56 -0400] JasonF: kevmo: I don't know about likewiseopen, but with straight samba, you can disable it responding with ad users when you run "getent passwd" or "getent group"
[2012-07-05 20:05:03 -0400] JasonF: (which is what is actually being run there)
[2012-07-05 20:05:55 -0400] kevmo: Do you run that on the node or chef server?
[2012-07-05 20:05:59 -0400] kevmo: thank you!
[2012-07-05 20:06:18 -0400] JasonF: kevmo: that's something most likely being run on the node
[2012-07-05 20:06:34 -0400] JasonF: just run, from the command line on one of your nodes, "time getent passwd" and "time getent group"
[2012-07-05 20:06:40 -0400] JasonF: and I think you'll see that's where the hangup is
[2012-07-05 20:06:47 -0400] kevmo: thank you
[2012-07-05 20:06:57 -0400] JasonF: and if you can make those return faster (by disabling AD results in there), then you've probably fixed your issue
[2012-07-05 20:07:13 -0400] JasonF: I doubt you'll have any success, at least with current versions of chef, with getting it not to run that in the recipes
[2012-07-05 20:07:23 -0400] JasonF: but ymmv
[2012-07-05 20:45:57 -0400] xuru: Anyone here familiar with deploy_revision provider?  More specifically, using the application cookbook?  I noticed that when using the subversion scm_provider, it doesn't pickup different urls.  For example, ^/trunk/MyProj v.s. ^/branches/MyProj/sprint20.
[2012-07-05 20:47:28 -0400] xuru: I guess I'm asking where to start looking to change the behavior...
[2012-07-05 20:53:06 -0400] zuhaib: So I need some help as I got a weird issue of recipes running in an odd order.  I have one recipe that depends on mysql::client being installed, so in my role I set mysql::client ahead of it in the run list. Yet every chef run it goes out of order and runs my custom recipe first and it fails because mysql is missing
[2012-07-05 20:54:05 -0400] zuhaib: I have even added a "include_recipe" block and it still ignore it and going stright to the part that requires mysql
[2012-07-05 20:54:37 -0400] jessicab: zuhaib - did you add a depends to the metadata for that cookbook too?
[2012-07-05 20:54:50 -0400] ssd7: zuhaib: Do you have a debug log of this run you could post somewhere?
[2012-07-05 20:55:16 -0400] zuhaib: ssd7: Have not flagged debug on yet, but let me work on that
[2012-07-05 20:55:51 -0400] zuhaib: jessicab: no, i did not.  SHou,ld I do that
[2012-07-05 20:56:38 -0400] jessicab: zuhaib - pretty sure you have to set the depends if you want one to depend on another, i dont think include_recipe works without that
[2012-07-05 20:57:07 -0400] jessicab: http://wiki.opscode.com/display/chef/Metadata#Metadata-depends
[2012-07-05 20:58:34 -0400] hicham: Hello everybody is there any one that use mongodb cookbook here ?
[2012-07-05 20:59:50 -0400] zuhaib: jessicab: one issue with that is this mysql requirment is only for dev boxes, hum.  I would need to kick it out to its own cookbook if I want to force a depend on.  But should not including mysql:client in the run list before this it should just install the client then move on.
[2012-07-05 21:01:07 -0400] jessicab: i dont think depends actually does anything until you use include_recipe, so you could just only use include_recipe whenever you want to use it
[2012-07-05 21:03:43 -0400] zuhaib: I thought if something depends on it and you dont have it in the run list chef will complain.. maybe i am mistkaen
[2012-07-05 21:04:59 -0400] jessicab: zuhaib - i think depends just requires it to be on the server, like how youll run some cookbooks on centos and it depends on apt.. but never actually uses it
[2012-07-05 21:26:05 -0400] ssd7: Specify a depends in metadata.rb ensures that the chef-client will download the recipe and load its libraries at the start of the chef-run.  include_recipe will ensure that the recipe is processed.  include_recipe will work without depends provided that the cookbook in question was downloaded for some other reason, but you should always specify dependencies in metadata.rb if you do actually depend on it.
[2012-07-05 21:26:36 -0400] ssd7: s/^Specify/Specifying/
[2012-07-05 21:27:08 -0400] bluepojo: https://gist.github.com/3056558
[2012-07-05 21:27:18 -0400] bluepojo: why do I get no output when trying to start chef-solr?
[2012-07-05 21:27:22 -0400] bluepojo: same goes for chef-server
[2012-07-05 21:38:01 -0400] bluepojo: re: above: the init script thinks the binary shoukld be in /usr/bin but it's in /usr/sbin. I made a symlink to /usr/bin and the init script works again.
[2012-07-05 21:38:06 -0400] bluepojo: should *
[2012-07-05 22:05:31 -0400] jodell: what's the appropriate way to share an anonymous method amongst multiple recipes?
[2012-07-05 22:08:34 -0400] nickethier: whats the typical workflow when using git to version you chef-server-repo. For example whats the typical life-cycle from a commit to the chef server repo to the change making it to the chef server?
[2012-07-05 22:09:07 -0400] nickethier: does that question event make sense?
[2012-07-05 22:12:17 -0400] jodell: oh duh, libraries
[2012-07-05 22:28:14 -0400] pas256: Hi
[2012-07-05 22:28:34 -0400] pas256: At the end of an ubuntu bootstrap file is the line
[2012-07-05 22:28:35 -0400] pas256: <%= start_chef %>'
[2012-07-05 22:28:56 -0400] pas256: if I modify it to
[2012-07-05 22:29:11 -0400] pas256: <%= start_chef %> -i 3600 -s 600'
[2012-07-05 22:29:35 -0400] pas256: is that a) going to work, and b) the best way of having the client check in once an hour?
[2012-07-05 22:31:08 -0400] cheesepl_: pas256: that will run it in daemon mode which should do the trick, the other option is cron
[2012-07-05 22:31:51 -0400] pas256: cheesepl_: great thanks
[2012-07-05 22:36:29 -0400] cheesepl_: pas256: I've seen some weird stuff happen in daemon mode before, should be ok but if it gets wonky then cron is typically a reliable fallback
[2012-07-05 22:39:25 -0400] pas256: good to know
[2012-07-05 22:39:56 -0400] pas256: next question: I see a lot of talk about getting chef client to log to syslog, but no mention of how to do this from the command line
[2012-07-05 22:39:59 -0400] pas256: any ideas?
[2012-07-05 22:42:47 -0400] cheesepl_: looks like currently there is an outstanding PR to get it working in the latest Chef
[2012-07-05 22:42:48 -0400] cheesepl_: https://github.com/opscode/cookbooks/pull/341
[2012-07-05 22:43:16 -0400] pas256: I saw that too, but other bugs look like it has been closed
[2012-07-05 22:43:17 -0400] pas256: ?!?
[2012-07-05 22:43:25 -0400] pas256: http://tickets.opscode.com/browse/CHEF-273
[2012-07-05 22:43:34 -0400] cheesepl_: I'd have to test it out honestly
[2012-07-05 22:47:30 -0400] gdey: Hello all, I'm trying to follow the EC2 Bootstrap Fast guide, but keep getting an error when trying to create a server. The command I'm using is this: knife ec2 server create -I ami-87712ac2 -x ubuntu --region 'us-west-1'
[2012-07-05 22:47:46 -0400] gdey: and it keeps giving me this error: ERROR: Fog::Compute::AWS::Error: InvalidParameterValue => Invalid availability zone: [us-east-1b]
[2012-07-05 22:48:35 -0400] gdey: I tried to google for this. But the two entries, keep redirect me to the main opscode support pages.
[2012-07-05 22:48:59 -0400] xuru: you can specify the zone with -Z I believe
[2012-07-05 22:49:00 -0400] gdey: Anyone one have a clue or a page that could explain what I'm doing wrong?
[2012-07-05 22:49:15 -0400] cheesepl_: gdey: what is in your knife.rb?
[2012-07-05 22:49:45 -0400] gdey: xuru: Tried it, got the same error. I replace --region with -Z.
[2012-07-05 22:49:58 -0400] pas256: Fog I think is a little behind the times
[2012-07-05 22:50:05 -0400] pas256: and doesn't support all regions
[2012-07-05 22:50:32 -0400] jsh: gdey: use both
[2012-07-05 22:50:33 -0400] jsh: --region us-east-1 -Z us-east-1a
[2012-07-05 22:50:33 -0400] xuru: gdey: you'll need to specify a -f (i.e. -f m1.small)
[2012-07-05 22:51:14 -0400] gdey: Cheesepl_, I have then entries for aws (here is a copy: https://gist.github.com/3056947)
[2012-07-05 22:51:28 -0400] gdey: I blocked out the access key and secret
[2012-07-05 22:51:56 -0400] gdey: jsh: K I'll try that now.
[2012-07-05 22:51:58 -0400] cheesepl_: gdey: looks fine, was just curious if there was a conflicting value
[2012-07-05 22:53:01 -0400] gdey: jsh, thanks that worked.
[2012-07-05 22:53:18 -0400] gdey: knife ec2 server create -I ami-87712ac2 -x ubuntu --region 'us-west-1' -Z 'us-west-1b' <-- works. Thanks guys.
[2012-07-05 22:53:29 -0400] pas256: cool
[2012-07-05 22:54:13 -0400] jsh: gdey: np
[2012-07-05 22:55:13 -0400] xuru: anyone know how to use deploy_branch provider?
[2012-07-05 23:58:51 -0400] uncommitted: having a difficult time figuring out how to loop through data bags, wondering if anyone here can point me in the right direction?
[2012-07-05 23:59:05 -0400] uncommitted: here's a pastebin http://pastebin.com/RnMkFrnH

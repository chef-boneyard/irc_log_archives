[2012-07-17 00:11:34 -0400] ashb: JasonF: I'd recommend using ruby's alternate quite formats. one of
[2012-07-17 00:11:38 -0400] ashb: '"password"'
[2012-07-17 00:11:44 -0400] ashb: %q{"password"}
[2012-07-17 00:12:36 -0400] ashb: or %Q{"password#{interpolate_works_in_this_form}"}
[2012-07-17 00:14:03 -0400] JasonF: ashb: thanks. TIL.
[2012-07-17 00:14:29 -0400] ashb: the {} can be pretty much any printable char that's not a-z0-9
[2012-07-17 00:14:32 -0400] ashb: %q!foo!
[2012-07-17 00:14:35 -0400] ashb: %q(a)
[2012-07-17 00:14:37 -0400] ashb: %q[a] etc
[2012-07-17 00:14:52 -0400] ashb: okay scratch that
[2012-07-17 00:15:11 -0400] ashb: nope i was right in the first place
[2012-07-17 00:15:13 -0400] ashb: all those work
[2012-07-17 00:15:22 -0400] ashb: (and q vs Q controls interploate vs not)
[2012-07-17 00:19:06 -0400] masterkorp: On json files i can use something like having a base dir and then subdirs use that dir as base to set ?
[2012-07-17 00:19:22 -0400] masterkorp: like "main" : "etc"
[2012-07-17 00:19:43 -0400] masterkorp: and "subdir" : main"/subdir" ?
[2012-07-17 00:23:44 -0400] ashb: no
[2012-07-17 00:23:54 -0400] ashb: not without doing the post-processing yourself
[2012-07-17 00:24:00 -0400] masterkorp: meh
[2012-07-17 00:24:07 -0400] ashb: json files are very simple
[2012-07-17 00:24:16 -0400] masterkorp: then i will use the attributes in ruby
[2012-07-17 00:30:53 -0400] nmistry: can a node be assigned to multiple environments?
[2012-07-17 00:31:03 -0400] timsmith: nope
[2012-07-17 00:31:15 -0400] nmistry: thanks timsmith
[2012-07-17 00:34:28 -0400] chip-: nmistry: You can set up the same server as multiple nodes if you want with chef-client -N
[2012-07-17 00:34:31 -0400] chip-: but it gets tricky
[2012-07-17 00:37:07 -0400] Majost: Does anyone know how to retrieve the randomly generated password created by the postgresql::server cookbook/recipe?
[2012-07-17 00:37:37 -0400] Majost: I just do: node['postgresql']['password']['postgres']
[2012-07-17 00:37:38 -0400] Majost: yes?
[2012-07-17 00:39:13 -0400] ashb: seems likely
[2012-07-17 00:42:31 -0400] Majost: Chef::Exceptions::ValidationFailed: Required argument password is missing!
[2012-07-17 00:42:44 -0400] Majost: I thought it was my postgresql password lookup
[2012-07-17 00:43:01 -0400] Majost: but I haven't the slightest idea where it is coming from
[2012-07-17 00:43:23 -0400] Majost: the stacktrace.out makes it seem like it is
[2012-07-17 00:43:31 -0400] Majost: but the password is valid and used
[2012-07-17 01:48:44 -0400] honza: Morning, could somebody please help me with a postgresql cookbook issue?
[2012-07-17 01:49:03 -0400] honza: Getting a "NameError: uninitialized constant Chef::Recipe::Opscode" error
[2012-07-17 01:50:35 -0400] honza: back
[2012-07-17 01:50:48 -0400] flaccid: honza: using latest chef? did you search google and the bug tracker for that error?
[2012-07-17 01:51:17 -0400] honza: flaccid: i'm not much of a ruby guy and the errors/suggestions didn't really make sense to me
[2012-07-17 01:51:31 -0400] flaccid: yes
[2012-07-17 01:52:11 -0400] honza: flaccid: this is running inside vagrant if that makes a difference
[2012-07-17 01:52:24 -0400] flaccid: yes
[2012-07-17 01:53:11 -0400] flaccid: flaccid: honza: using latest chef? did you search google and the bug tracker for that error?
[2012-07-17 04:02:15 -0400] kiesia: Hmm, I am sure I have something basic wrong - does anyone know why chef would be building nginx, passenger and rvm on every run?
[2012-07-17 04:02:54 -0400] kiesia: I have the recipes set up within a role
[2012-07-17 04:36:36 -0400] Axsuul: Can anyone recommend me a short intro video into chef that I can send to my friend to convince him to dig into this stuff?
[2012-07-17 05:00:07 -0400] nmistry: just saw your message now chip-.   Thanks for the suggestion.
[2012-07-17 05:09:49 -0400] BryanWB_: ohai chefs!
[2012-07-17 05:20:59 -0400] jtimberman: Axsuul: yes
[2012-07-17 05:21:01 -0400] jtimberman: Axsuul: one moment
[2012-07-17 05:21:43 -0400] jtimberman: http://www.youtube.com/watch?v=UpHKVkLDBtU&feature=plcp
[2012-07-17 05:21:46 -0400] jtimberman: that one is fun :)
[2012-07-17 05:54:46 -0400] eleventh: hello
[2012-07-17 05:55:19 -0400] eleventh: anybody had come across the issue that knife cookbook upload takes terribly long time?
[2012-07-17 06:00:36 -0400] linux2000in: Hi guys
[2012-07-17 06:00:51 -0400] linux2000in: question for Chef - useradd
[2012-07-17 06:01:03 -0400] linux2000in: any one ?
[2012-07-17 06:01:31 -0400] flaccid: no
[2012-07-17 06:01:36 -0400] flaccid: can i ask a question?
[2012-07-17 06:01:39 -0400] linux2000in: :(
[2012-07-17 06:01:58 -0400] linux2000in: i will try i am fairly new
[2012-07-17 06:06:54 -0400] linux2000in: i have Redat configured with open ldap
[2012-07-17 06:07:57 -0400] linux2000in: while i run useradd reciepe from Chef ( i am trying to add user which is already in ldap). but i need system account with login . incase of any outage on LDAP
[2012-07-17 06:08:51 -0400] linux2000in:  i can not add the user .. i think Chef resource uses useradd command but i want tot u se lusersadd
[2012-07-17 06:09:14 -0400] flaccid: looks like you'll need to find something chef that manages openldap
[2012-07-17 06:10:22 -0400] linux2000in: no
[2012-07-17 06:10:54 -0400] linux2000in: user i am tryting to add to system ( throught reciep) is already in LDAP. But i need to be added locally
[2012-07-17 06:11:51 -0400] linux2000in: like system admins accounts are local and openldap. in case host is down or does not get reply from ldap
[2012-07-17 06:13:11 -0400] flaccid: i don't get what the problem is sorry. the user resource can be used to add a specified user.
[2012-07-17 06:20:32 -0400] eleventh: hello
[2012-07-17 06:20:34 -0400] eleventh: anybody had come across the issue that knife cookbook upload takes terribly long time?
[2012-07-17 06:35:52 -0400] vaq: I read somewhere that /root/.chef/client.rb on the chef server, is the config file moved to the client when doing bootstrap. This doesn't seem to be the case in my setup. Where does bootstrap get it's default values? I want to append something to the configuration file.
[2012-07-17 06:59:10 -0400] vaq: anyone?
[2012-07-17 07:00:16 -0400] poutine: chef certainly has a lot of ugly people in the documentation
[2012-07-17 07:00:22 -0400] poutine: can't you guys use stock images
[2012-07-17 07:00:50 -0400] flaccid: example?
[2012-07-17 07:01:04 -0400] poutine: http://wiki.opscode.com/display/chef/Developers
[2012-07-17 07:01:20 -0400] poutine: http://wiki.opscode.com/display/chef/Chef+Basics
[2012-07-17 07:01:43 -0400] poutine: http://wiki.opscode.com/display/chef/Chef+Essentials <- This guy's beard is ridiculous
[2012-07-17 07:06:07 -0400] specialsauce: trollololololol
[2012-07-17 07:07:23 -0400] flaccid: nice beards
[2012-07-17 07:07:36 -0400] BryanWB_: those are winning beards!
[2012-07-17 07:07:53 -0400] poutine: call it a troll all you want, pics stolen from digital blasphemy (the synapse pic in the last URL used without copyright permissions), and pictures of ridiculously ugly people with poor hygiene are not something you can easily show on company slides without being looked at like you're touched in the head
[2012-07-17 07:08:03 -0400] BryanWB_: i gotta say that kallistec's beard is definitely underperfroming
[2012-07-17 07:08:05 -0400] BryanWB_: :)
[2012-07-17 07:08:21 -0400] BryanWB_: ugly people? those guys are beautiful
[2012-07-17 07:08:52 -0400] flaccid: since does personal appearance have anything to do with devopping
[2012-07-17 07:08:57 -0400] flaccid: this isn't vanity fair
[2012-07-17 07:09:04 -0400] flaccid: *when
[2012-07-17 07:10:34 -0400] poutine: http://www.imagedirekt.com/en/royaltyfree-images-photos/1766207.html
[2012-07-17 07:10:39 -0400] poutine: you guys lifted that pic without paying for it
[2012-07-17 07:10:58 -0400] vaq: I read somewhere that /root/.chef/client.rb on the chef server, is the config file moved to the client when doing bootstrap. This doesn't seem to be the case in my setup. Where does bootstrap get it's default values? I want to append something to the configuration file.
[2012-07-17 07:11:04 -0400] poutine: http://cache1.veer.com/img/timg/mpp/1766000/1766207_t.jpg
[2012-07-17 07:11:07 -0400] poutine: look familiar?
[2012-07-17 07:11:50 -0400] poutine: http://wiki.opscode.com/display/chef/Chef+Essentials <- copyright infringement in official documentation is very professional
[2012-07-17 07:14:39 -0400] BryanWB_: vaq: the config file should be templated by bootstrap
[2012-07-17 07:15:05 -0400] BryanWB_: and it should get its values from the bootstrap template
[2012-07-17 07:15:22 -0400] BryanWB_: which may reuse values from your knife.rb
[2012-07-17 07:15:48 -0400] vaq: default is: cat <<'EOP' <%= config_content %> EOP ) > /etc/chef/client.rb
[2012-07-17 07:15:57 -0400] vaq: where is config_content defined?
[2012-07-17 07:18:10 -0400] vaq: and where is the default bootstrap template located?
[2012-07-17 07:19:02 -0400] BryanWB_: i don't know i would have to use find  to find it, it is an *.erb file inside the chef gem
[2012-07-17 07:21:03 -0400] vaq: : /var/lib/gems/1.8/gems/chef-10.12.0/lib/chef/knife/bootstrap/archlinux-gems.erb /var/lib/gems/1.8/gems/chef-10.12.0/lib/chef/knife/bootstrap/centos5-gems.erb /var/lib/gems/1.8/gems/chef-10.12.0/lib/chef/knife/bootstrap/chef-full.erb /var/lib/gems/1.8/gems/chef-10.12.0/lib/chef/knife/bootstrap/fedora13-gems.erb
[2012-07-17 07:21:14 -0400] vaq: but none of them are used when you use knife bootstrap FQDN
[2012-07-17 07:30:32 -0400] ranjibd__: BryanWB_, config file is not template .. i guess
[2012-07-17 07:33:07 -0400] ranjibd__: its cat  > /etc/chef/client.rb
[2012-07-17 07:33:09 -0400] ranjibd__: lib/chef/knife/bootstrap/ubuntu10.04-apt.erb
[2012-07-17 07:33:26 -0400] ranjibd__: line 35/36
[2012-07-17 08:04:54 -0400] zoubi: hi all
[2012-07-17 08:05:14 -0400] zoubi: do you see any reasons why the code inside the not_if condition is not executed? http://pastebin.com/edvN7DUH
[2012-07-17 08:06:58 -0400] zoubi: when I run chef-client with debug output, I don't see any mention of the command in the not_if
[2012-07-17 08:40:11 -0400] masterkorp: http://p.rapimg.com/ipix_new/pkw/77/222/p7322277_7x.jpg
[2012-07-17 09:06:09 -0400] ranjibd__: masterkorp, nice !
[2012-07-17 09:08:12 -0400] masterkorp: Oh sorrywrong window
[2012-07-17 09:08:48 -0400] flaccid: haha
[2012-07-17 09:30:15 -0400] flaccid: FATAL: NameError: Cannot find a resource for mysql_database on debian version 6.0.4 - any ideas? i'm doing include_recipe "mysql::server" prior and have the mysql cookbook as a dep
[2012-07-17 09:45:44 -0400] flaccid: hmm maybe database cookbook is not actually available
[2012-07-17 09:50:35 -0400] nacer: Hi
[2012-07-17 09:52:42 -0400] meineerde: flaccid: when using a chef server, you have to put the database cookbook either into your run_list or at least as a dependency in the metadata of a cookbook in your run_list
[2012-07-17 09:53:14 -0400] flaccid: not using chef server, it was not in the cookbooks_path had to update via git
[2012-07-17 09:53:17 -0400] flaccid: my bads..
[2012-07-17 09:56:03 -0400] huhongbo: when i run ruby_code from chef,i got the error ruby_block[echo 123] (mcollective-chef::server line 95) had an error: NoMethodError: private method `open' called for Chef::Resource::File:Class
[2012-07-17 09:56:24 -0400] flaccid: still, with application cookbook i always get this /var/lib/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/resource.rb:598: warning: already initialized constant Application
[2012-07-17 09:56:34 -0400] ranjibd__: huhongbo, ::File
[2012-07-17 09:56:38 -0400] flaccid: i'm only including it once etc., has to be a bug right...
[2012-07-17 09:56:54 -0400] huhongbo: I'll try test
[2012-07-17 09:57:04 -0400] ranjibd__: Chef has an internal File class, you want the stdlib file class, which you can access by ::File
[2012-07-17 10:00:40 -0400] huhongbo: thanks , solved the problem,i'm wondering why linux test File.open fine,and some machine got the error
[2012-07-17 10:00:57 -0400] flaccid: http://tickets.opscode.com/browse/COOK-1402 bugs like this make me wonder how people are actually able to use the mysql cookbook on a debian system.
[2012-07-17 10:08:40 -0400] bahman2000: i have a n00b question ...
[2012-07-17 10:09:13 -0400] bahman2000: on osx i did this to install chef workstation curl -L http://www.opscode.com/chef/install.sh | sudo bash
[2012-07-17 10:09:24 -0400] bahman2000: how do i uninstall?
[2012-07-17 10:13:48 -0400] bahman2000: my n00b question crashed irc...
[2012-07-17 10:17:00 -0400] Babar: bahman2000: you read what the script does and you undo it yourself? :)
[2012-07-17 10:17:21 -0400] bahman2000: haha ok :)
[2012-07-17 10:17:32 -0400] bahman2000: not elegant, but ok
[2012-07-17 10:19:23 -0400] ranjibd__: bahman2000, gem uninstall chef ?
[2012-07-17 10:19:44 -0400] bahman2000: wasn't installed with gem tho...
[2012-07-17 10:20:15 -0400] ranjibd__: /opt/opscode/embedded/bin/gem
[2012-07-17 10:20:21 -0400] bahman2000: in fact i don't think the install worked at all can't knife
[2012-07-17 10:20:36 -0400] Babar: what was the output of the curl | bash?
[2012-07-17 10:20:48 -0400] ranjibd__: i have never used osx, i am giving you references from linux
[2012-07-17 10:20:59 -0400] bahman2000: Downloading Installing then back to prompt no confirmation that it was installed
[2012-07-17 10:21:15 -0400] Babar: normally, you should have a /tmp/chef...*.sh
[2012-07-17 10:21:40 -0400] Babar: chef-full-*.sh
[2012-07-17 10:21:42 -0400] bahman2000: yeah there's /private/tmp/chef*.sh
[2012-07-17 10:21:58 -0400] Babar: ok, that's what it did to install it
[2012-07-17 10:22:10 -0400] Babar: as it's very platform specific, I'm afraid I can't help you much more than that
[2012-07-17 10:22:19 -0400] Babar: and I doubt there is any uninstall when you install it this way
[2012-07-17 10:22:20 -0400] bahman2000: so i can just rm that chef-full-*.sh ?
[2012-07-17 10:22:31 -0400] Babar: but that won't do any good.
[2012-07-17 10:22:34 -0400] bahman2000: ya
[2012-07-17 10:25:33 -0400] bahman2000: when i say knife it says command not found means chef not installed properly, right?
[2012-07-17 10:25:51 -0400] Babar: or that it installed somewhere which is not in your path
[2012-07-17 10:29:26 -0400] bahman2000: sudo find / -name knife* comes back blank
[2012-07-17 10:44:42 -0400] masterkorp: bahman2000: arch ?
[2012-07-17 10:44:56 -0400] masterkorp: what system are you using ?
[2012-07-17 10:44:59 -0400] bahman2000: osx
[2012-07-17 10:45:04 -0400] masterkorp: ewww
[2012-07-17 10:45:08 -0400] bahman2000: hehe
[2012-07-17 10:45:11 -0400] masterkorp: but use gems
[2012-07-17 10:45:26 -0400] masterkorp: using .rvm or something like that ?
[2012-07-17 10:45:42 -0400] masterkorp: the gem "chef" has everything
[2012-07-17 10:45:59 -0400] bahman2000: tried to install chef via curl, i think it failed, just want to make sure to clean it all out and install using gem
[2012-07-17 10:46:13 -0400] masterkorp: if you install with gem directly use gem install -n /usr/bin/
[2012-07-17 10:46:38 -0400] bahman2000: sudo gem install chef says ERROR:  http://rubygems.org/ does not appear to be a repository
[2012-07-17 10:47:07 -0400] bahman2000: i need to install a repo i thinks...
[2012-07-17 10:47:54 -0400] bahman2000: or install rubygems from source instead of using the osx bundle
[2012-07-17 10:48:53 -0400] flaccid: curl installs stuff?
[2012-07-17 10:49:24 -0400] bahman2000: not sure if it does says Installing Chef 10.xxxx then goes back to prompt, I can't call or find knife
[2012-07-17 10:49:29 -0400] flaccid: i am on os x atm using rubygems.org
[2012-07-17 10:50:04 -0400] flaccid: i havnt had an issue installing gems on os x
[2012-07-17 10:50:37 -0400] bahman2000: did you build rubygems from source?
[2012-07-17 10:50:45 -0400] bahman2000: or using osx bundle?
[2012-07-17 10:50:53 -0400] flaccid: just what comes with os x
[2012-07-17 10:50:58 -0400] bahman2000: i c
[2012-07-17 10:51:06 -0400] flaccid: gem sources shows http://rubygems.org/
[2012-07-17 10:51:07 -0400] flaccid: and is working
[2012-07-17 10:51:36 -0400] bahman2000: i see same sources but no worky weird...
[2012-07-17 10:52:53 -0400] bahman2000: little snitch is not blocking...
[2012-07-17 10:53:43 -0400] bahman2000: maybe i'm regionally constrained...
[2012-07-17 10:54:04 -0400] flaccid: does curl http://rubygems.org/ work
[2012-07-17 10:54:51 -0400] bahman2000: mmm yeah, gives me page source...
[2012-07-17 10:55:23 -0400] bahman2000: do i need to update like yum update ?
[2012-07-17 10:57:31 -0400] flaccid: not afaik
[2012-07-17 10:58:19 -0400] bahman2000: maybe it's region i try via vpn...
[2012-07-17 10:59:25 -0400] bahman2000: nah
[2012-07-17 11:02:53 -0400] flaccid: does sudo gem update --system also fail?
[2012-07-17 11:03:17 -0400] bahman2000: yup
[2012-07-17 11:03:30 -0400] bahman2000: Errno::EHOSTDOWN: Host is down - connect(2) (http://rubygems.org/yaml)
[2012-07-17 11:04:50 -0400] bahman2000: so bizarre
[2012-07-17 11:06:38 -0400] flaccid: it redirects to http://production.s3.rubygems.org/yaml and i can hit it
[2012-07-17 11:08:36 -0400] bahman2000: as can i, with my browser...
[2012-07-17 11:10:22 -0400] bahman2000: oh wtf, it was failing in iTerm but works in Terminal...
[2012-07-17 11:10:35 -0400] flaccid: as you are running this little snitch thing and have vpn and stuff it could be your customer stuff otherwise i guess can blame apple
[2012-07-17 11:10:39 -0400] flaccid: pj
[2012-07-17 11:10:41 -0400] flaccid: oh..
[2012-07-17 11:13:00 -0400] bahman2000: sudo gem install chef under way :) thanks for trying flaccid :)
[2012-07-17 11:13:35 -0400] flaccid: eh weird shiz indeed
[2012-07-17 11:14:22 -0400] bahman2000: Error installing chef:  Failed to build gem native extension.
[2012-07-17 11:15:27 -0400] flaccid: sudo gem install chef --no-rdoc --no-ri
[2012-07-17 11:15:48 -0400] flaccid: if you still need build deps you might have to install them albeit through homebrew or similar
[2012-07-17 11:15:59 -0400] flaccid: but iirc there is doc on opscode wiki about using chef on os x...
[2012-07-17 11:16:52 -0400] bahman2000: yeah this http://wiki.opscode.com/display/chef/Workstation+Setup+for+Mac+OS+X
[2012-07-17 11:16:58 -0400] bahman2000: says build ruby from source :(
[2012-07-17 11:17:01 -0400] flaccid: cool
[2012-07-17 11:17:04 -0400] flaccid: oh
[2012-07-17 11:17:10 -0400] flaccid: i don't recall doing that
[2012-07-17 11:17:14 -0400] flaccid: but fair enough..
[2012-07-17 11:17:20 -0400] bahman2000: --no-rdoc --no-ri failed too
[2012-07-17 11:17:37 -0400] flaccid: i probably installed what it needs to build native extensions
[2012-07-17 11:19:09 -0400] bahman2000: need XCode command line tools for this isht
[2012-07-17 11:20:38 -0400] flaccid: yeah
[2012-07-17 11:22:09 -0400] cnf: damnit, calendaring is till a bitch ^^;
[2012-07-17 11:32:16 -0400] masterkorp: bahman2000: dont do it
[2012-07-17 11:34:03 -0400] cnf: bahman2000: from source? why?
[2012-07-17 11:34:09 -0400] cnf: bahman2000: also, just use rbenv
[2012-07-17 11:35:14 -0400] masterkorp: or yaour -S ruby-chef
[2012-07-17 11:35:16 -0400] masterkorp: bamm
[2012-07-17 11:36:01 -0400] flaccid: according to https://github.com/opscode/cookbooks/tree/master/apache2 web_app should run apache2::mod_rewrite but i'm getting Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration when starting apache
[2012-07-17 11:36:42 -0400] nocturnal: chef uses openssh? as in, full support of ssh_config?
[2012-07-17 11:37:04 -0400] flaccid: nocturnal: chef doesn't use ssh afaik for operation
[2012-07-17 11:37:17 -0400] nocturnal: ok thanks. a friend was confused then because he told me chef used openssh.
[2012-07-17 11:50:31 -0400] BryanWB_: chef uses http
[2012-07-17 12:14:32 -0400] cpasmoi: hi
[2012-07-17 13:06:29 -0400] TheSyndicate: how do i hire a chef to cook
[2012-07-17 13:06:35 -0400] TheSyndicate: i love to eat pepperoni pizzas
[2012-07-17 13:16:45 -0400] zts: TheSyndicate: hiring a chef can be hard work, and remember to factor in the capital costs of a suitable question
[2012-07-17 13:17:32 -0400] zts: TheSyndicate: if your pizza consumption requirements are relatively small, you may find it more cost effective to use a Paas (Pizza-as-a-Service) provider such as Domino's or Pizza Hut
[2012-07-17 13:17:58 -0400] zts: That'll teach me to try to be funny... "suitable kitchen" not "suitable question" :)
[2012-07-17 13:37:58 -0400] specialsauce: ohai chefs. question for you. at the moment i install packages via the yum package resource provider. This is fine except sometimes yum needs a cache update to know about new packages in the fairly dynamic repos I have set up. Would it be a Bad Thing in any way to have a non-idempotent execute resource do a yum cache update at the start of every chef client run or would this be a sensible solution?
[2012-07-17 13:40:46 -0400] ashb: specialsauce: look at what the apt cookbook does
[2012-07-17 13:41:11 -0400] dwhsix: any good write-ups somewhere on good multi-dev chef development practices?
[2012-07-17 13:41:29 -0400] specialsauce: ashb, thanks, will do
[2012-07-17 13:41:45 -0400] dwhsix: we still run into problems of devs stepping on each others' toes, accidentally changing stuff in chef server that affects other environments
[2012-07-17 13:41:51 -0400] specialsauce: dwhsix, nothing too great that I've seen, though I would be interested in seeing that too
[2012-07-17 13:41:58 -0400] timsmith: specialsauce: I'm not sure if there's any write ups, but it is something that is talked about a lot
[2012-07-17 13:42:01 -0400] dwhsix: someone mentioned each dev running their own chef server...
[2012-07-17 13:42:23 -0400] dwhsix: and I was also wondering if yuo could have some way whereby devs use chef-solo, then promote to server at "release"?
[2012-07-17 13:42:51 -0400] timsmith: specialsauce: My company uses self contained dev environments that contain a chef server and a bootstrap script to load the repo into the server.  Devs can do whatever they want and then commit those changes upstream
[2012-07-17 13:43:59 -0400] atomic-penguin: specialsauce, if you look in the yum provider there is an execute to run 'yum -q makecache'
[2012-07-17 13:44:08 -0400] dwhsix: timsmith: yeah, we've been toying with that idea
[2012-07-17 13:44:45 -0400] atomic-penguin: specialsauce, it runs anytime one of the managed .repo files are changed, so the cache should be updated if you manage .repo files with chef
[2012-07-17 13:44:47 -0400] timsmith: specialsauce: It works fairly well
[2012-07-17 13:51:50 -0400] atomic-penguin: ashb, no apt is not yum.  The package index in yum is not updated like with 'apt-get update'
[2012-07-17 13:53:05 -0400] specialsauce: there is a "yum clean all && yum makecache" that will do a similar thing, I've stuck that in as an early included execute for now
[2012-07-17 13:53:44 -0400] atomic-penguin: specialsauce, there is an idempotent resource for that here, https://github.com/opscode-cookbooks/yum/blob/master/providers/repository.rb#L33
[2012-07-17 14:07:27 -0400] atomic-penguin: specialsauce, matter of fact, this example might do what you're looking for, https://github.com/atomic-penguin/cookbook-yumrepo/blob/master/recipes/corporate.rb
[2012-07-17 14:10:18 -0400] ashb: atomic-penguin: ah didn't realise
[2012-07-17 14:10:57 -0400] atomic-penguin: if you run yum clean all && yum makecache every time, you'll significantly slow down the convergence of your runs
[2012-07-17 14:12:50 -0400] cpasmoi: why don't use a crontab every night, executing yum clean ?
[2012-07-17 14:19:18 -0400] Zenigor: I am using this command to bootstrap a new rackspace instance with knife and it is continually setting my chef environment to _default. Anyone have any suggestions? I have tried several different placements of -E development.
[2012-07-17 14:19:20 -0400] Zenigor: knife rackspace server create --template-file .chef/bootstrap/ruby193_p125.erb --bootstrap-version 0.10.8 -r "role[web],role[admin],role[db],role[redis],role[resque]" -S "nginx_test" -N "nginx_test" -E development
[2012-07-17 14:19:55 -0400] timsmith: does anyone have a recommendation for counting the number of nodes returned by search?
[2012-07-17 14:22:14 -0400] coltrane: Using the opscode PHP cookbook on ubuntu some of the extensions in /etc/php5/cli/conf.d have nothing set after "extension=" which causes php to report "Unable to load dynamic library". I'm not sure how to correct this in chef
[2012-07-17 14:22:53 -0400] railsraider: how can i use encrypted data bags with chef environments?
[2012-07-17 14:27:15 -0400] yfeldblum: railsraider, the same way you could do so without chef environments
[2012-07-17 14:32:55 -0400] jperry2: for a bash resource and I don't specify an action what is the default?
[2012-07-17 14:33:00 -0400] jperry2: will it run
[2012-07-17 14:33:08 -0400] jperry2: if not what is the action for a bash resource
[2012-07-17 14:33:56 -0400] yfeldblum: jperry2, http://wiki.opscode.com/display/chef/Resources#Resources-Script
[2012-07-17 14:34:32 -0400] yfeldblum: Zenigor, you made a mistake in your template file?
[2012-07-17 14:35:15 -0400] Zenigor: yfeldblum: Which template file? my environment template file?
[2012-07-17 14:35:25 -0400] jperry2: nm I found it
[2012-07-17 14:35:30 -0400] yfeldblum: Zenigor, the bootstrap template file: .chef/bootstrap/ruby193_p125.erb
[2012-07-17 14:35:34 -0400] jperry2: action :run
[2012-07-17 14:35:37 -0400] jperry2: is the default
[2012-07-17 14:36:16 -0400] Zenigor: yfeldblum: https://gist.github.com/3129768 is my bootstrap template file
[2012-07-17 14:37:18 -0400] yfeldblum: Zenigor, your bootstrap template file doesn't set the node's chef-environment
[2012-07-17 14:39:31 -0400] yfeldblum: Zenigor, take a look at the end of https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/bootstrap/chef-full.erb
[2012-07-17 14:40:26 -0400] yfeldblum: Zenigor, for reference, the ERB is evaluated in the context of an instance of https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/core/bootstrap_context.rb
[2012-07-17 14:40:44 -0400] yfeldblum: Zenigor, so e.g. here's how `start_chef` is defined: https://github.com/opscode/chef/blob/master/chef/lib/chef/knife/core/bootstrap_context.rb#L82-88
[2012-07-17 14:43:22 -0400] Zenigor: yfeldblum: I think i see it now. So I need to declare first_boot.to_json rather than my run list line? or in addition to?
[2012-07-17 14:44:20 -0400] yfeldblum: Zenigor, well you may want to use the `first_boot` method too but it's probably not necessary in your particular case
[2012-07-17 14:44:43 -0400] railsraider: yfeldblum: when I encrypt the data bag , i have an item name password but when it encrypted it  kind of remove the password item and its not accessible http://pastie.org/4272076
[2012-07-17 14:45:12 -0400] yfeldblum: Zenigor, rather, the last line is <%= start_chef %> and that method knows how to construct the command to invoke chef-client with the first-boot.json attributes file and the environment both passed on the command line
[2012-07-17 14:47:55 -0400] yfeldblum: railsraider, to start off with the nomenclature, what you've got there is an encrypted data-bag-item, not an encrypted data-bag
[2012-07-17 14:48:18 -0400] zoubi: is it possible to use knife ec2 server create on a windows workstation? it keeps waiting indefinitely for sshd to start (which seems obvious :s)
[2012-07-17 14:49:00 -0400] sascha_d: yes
[2012-07-17 14:49:04 -0400] yfeldblum: railsraider, more to the point, when you encrypt a data-bag-item, what actually happens is that all of the top-level values are 1) serialized to a JSON string, 2) the serialized string is encrypted with AES and your key, 3) the ciphertext is base64-encoded
[2012-07-17 14:49:06 -0400] sascha_d: you can just kill the proc after that
[2012-07-17 14:49:28 -0400] sascha_d: I do it all the time. Or I have in the past. Happily, I'm not creating windows workstations at the moment
[2012-07-17 14:49:30 -0400] railsraider: yfeldblum: i want to encrypt only password items inside the data bags, how do i retriev
[2012-07-17 14:49:32 -0400] yfeldblum: railsraider, the top-level keys in your data-bag-item are "id", "production", and "testing"
[2012-07-17 14:49:33 -0400] railsraider: them
[2012-07-17 14:50:26 -0400] yfeldblum: railsraider, although the value for "id" is not included among the top-level values for encryption
[2012-07-17 14:50:52 -0400] yfeldblum: railsraider, so the JSON data `{"password": "asdasdsad"}` is serialized to a JSON string and encrypted
[2012-07-17 14:51:13 -0400] yfeldblum: railsraider, as for how you should structure your data to take best advantage of the features chef offers, that's up to you
[2012-07-17 14:51:34 -0400] railsraider: what's the best practice for doing that
[2012-07-17 14:51:43 -0400] railsraider: can you please give me an example?
[2012-07-17 14:51:47 -0400] yfeldblum: railsraider, there is no best practice that i know of
[2012-07-17 14:52:00 -0400] railsraider: or something that will work :)
[2012-07-17 14:53:07 -0400] yfeldblum: railsraider, encrypt it yourself, and have the recipe decrypt it?
[2012-07-17 14:54:02 -0400] railsraider: if i encrypt the whole data-bag how can i access an item in it once decrypt i am using the decryption on opscode website
[2012-07-17 14:55:26 -0400] yfeldblum: railsraider, not sure i understood the question
[2012-07-17 14:56:35 -0400] railsraider: yfeldblum: i encrypt a dat bag, now in my recipe I'm decrypting the data bag and wanna retrieve the password item how do i get the password out of the decrypted data bag
[2012-07-17 14:57:43 -0400] yfeldblum: railsraider, still not sure i got it - if your recipe decrypts a data bag item, then it decrypts the data bag item, right? and all the data in the data bag item that was encrypted is now available to the recipe, right?
[2012-07-17 14:58:29 -0400] geekbri: Anybody here going to the chef-boston meetup tonight?
[2012-07-17 15:00:41 -0400] dwhsix: geekbri: want to but I have a conflict
[2012-07-17 15:00:52 -0400] dwhsix: trying to get a coworker to go
[2012-07-17 15:00:56 -0400] railsraider: yfeldblum: here's what i get when i do the inspect OpenSSL::Cipher::CipherError: bad decrypt
[2012-07-17 15:01:12 -0400] geekbri: dwhsix: Well i'll be there!
[2012-07-17 15:01:48 -0400] dwhsix: everything happens on tue nights all the bostonrb stuff, etc. hopefully in the fall I'll no longer have a regular tue night conflict
[2012-07-17 15:02:06 -0400] yfeldblum: railsraider, that happens when you decrypt a ciphertext with the wrong key, or when you try to decrypt the plaintext
[2012-07-17 15:02:15 -0400] geekbri: dwhsix: well unfortunate!  Too bad you couldn't be there!
[2012-07-17 15:02:23 -0400] zoubi: sascha_d, what do you mean by kill the proc?
[2012-07-17 15:02:25 -0400] dwhsix: yup
[2012-07-17 15:02:46 -0400] zoubi: sascha_d, you mean that although it show "waiting for sshd", it actually is sending commands to the VM?
[2012-07-17 15:02:52 -0400] sascha_d: zoubi I mean once it says waiting for ssh, ctrl-c
[2012-07-17 15:03:11 -0400] sascha_d: the vm is there and available, you'll just never be able to ssh
[2012-07-17 15:03:27 -0400] zoubi: sascha_d, ok, but I'd like to bootstrap the instance with a role
[2012-07-17 15:04:52 -0400] maruq: hi guys
[2012-07-17 15:05:37 -0400] maruq: so.. I'm wondering if I can use knife bootstrap to apply the "chef-client" cookbook as a kind of jumpstart
[2012-07-17 15:05:42 -0400] maruq: is that the normal process?
[2012-07-17 15:06:12 -0400] maruq: I've mostly done things through the old hacked client.rb file that takes ec2-user-data
[2012-07-17 15:06:21 -0400] maruq: (previously chef 0.9.x)
[2012-07-17 15:06:42 -0400] maruq: now on chef 10.x and have some other devs / ops using the system
[2012-07-17 15:07:18 -0400] maruq: if I use "knife bootstrap" to kickstart the node with the chef-client, and then another dev runs "knife bootstrap", will the world end?
[2012-07-17 15:08:38 -0400] maruq: or, is there a way to start a node from workstation, have it run demonized, but also accept manual calls?
[2012-07-17 15:13:54 -0400] ashb: maruq: yes, use this small script https://gist.github.com/1325982
[2012-07-17 15:16:59 -0400] maruq: ashb: so add that to the node, run "knife bootstrap" from local?
[2012-07-17 15:17:21 -0400] ashb: not sure what bootstrap would do with upgrading
[2012-07-17 15:17:35 -0400] ashb: but that script lets you run chef-client as a deamon but still run things manually when you need to
[2012-07-17 15:17:43 -0400] maruq: ashb: er sorry, meant how to use
[2012-07-17 15:18:01 -0400] maruq: ashb: from the node or from workstations?
[2012-07-17 15:18:11 -0400] ashb: oh that goes on the node
[2012-07-17 15:18:21 -0400] ashb: and you either log in or run it via knife ssh
[2012-07-17 15:18:41 -0400] maruq: ashb: ah, right, that would make sense
[2012-07-17 15:19:40 -0400] maruq: ashb: I used to use https://gist.github.com/319106
[2012-07-17 15:20:08 -0400] maruq: that causes the node to look for ec2-user-data, which then uses to kickstart the run
[2012-07-17 15:20:52 -0400] timsmith: is it possible to do a chef search for multiple chef_environments
[2012-07-17 15:20:55 -0400] timsmith: ?
[2012-07-17 15:21:18 -0400] ranjibd: timsmith: yeah, unless you specify a particular environment
[2012-07-17 15:21:34 -0400] ranjibd: name:xxx will search against all environments
[2012-07-17 15:21:56 -0400] timsmith: I'd like to search for 2+ particular environments
[2012-07-17 15:22:03 -0400] ranjibd: name:xxx AND chef_environment:production will  restrict it to production environment
[2012-07-17 15:22:17 -0400] maruq: timsmith, ranjibd: couldn't you use "chef_environment:A OR chef_environment:B" ?
[2012-07-17 15:22:43 -0400] timsmith: maruq:  I was figuring I'd have to do that
[2012-07-17 15:23:04 -0400] timsmith: maruq:  I was just hoping there was a better way.  I have an array of environments to search in.  The search query could get rather large
[2012-07-17 15:23:22 -0400] maruq: timsmith: "chef_environment:*" would probably also work, but as ranjibd said, if you don't declare, it won't use
[2012-07-17 15:26:12 -0400] knuckolls_: timsmith: you can just generate the query string?
[2012-07-17 15:26:25 -0400] Zenigor: yfeldblum: changing the last line to <%= start_chef %> made the world better. Thank you
[2012-07-17 15:26:32 -0400] yfeldblum: Zenigor, cool
[2012-07-17 15:28:10 -0400] maruq: timsmith: I hit that before https://gist.github.com/b5fc5752985f7df8f0f7
[2012-07-17 15:28:29 -0400] jasond: hm, so I am removing a few packages like this: http://pastebin.com/tM9xfyqc  the chef log says they were removed: http://pastebin.com/fsa9MxN4  yet they weren't http://pastebin.com/4dtPELyd  any idea why?
[2012-07-17 15:28:31 -0400] maruq: assuming my_envs = an array of enviroments
[2012-07-17 15:29:32 -0400] ashb: jasond: possibly difference between remove and purge
[2012-07-17 15:30:12 -0400] jasond: purge just removes the config files as well
[2012-07-17 15:31:18 -0400] timsmith: maruq:  That snippet was exactly what I needed.  Thanks
[2012-07-17 15:31:20 -0400] railsraider: yfeldblum: i am able to get the id back, but i think the error is related to how i query a 2nd level in the json like testing: password:
[2012-07-17 15:31:34 -0400] maruq: timsmith: nw ;)
[2012-07-17 15:35:56 -0400] jasond: so adding purge to the package actions actually removed the packages.  seems like a bug
[2012-07-17 15:36:26 -0400] yfeldblum: railsraider, we need some more details about what you're trying to do and how you're trying to do it
[2012-07-17 15:38:17 -0400] railsraider: yfeldblum: http://pastie.org/4272076 i want to access items inside the data bag such as password nested a few levels down the data bag
[2012-07-17 15:38:59 -0400] senilegenius: howdy alli have a need to use a regex in my recipe but regex always makes me want to scratch my eyes out. :)
[2012-07-17 15:39:04 -0400] senilegenius: i would like to match everything *before* the last '.'
[2012-07-17 15:39:13 -0400] senilegenius: so "1.2.3.4.54321" becomes ""1.2.3.4"
[2012-07-17 15:39:21 -0400] yfeldblum: railsraider, that should work; ensure you're encrypting & decrypting with the same key?
[2012-07-17 15:39:25 -0400] senilegenius: right now i'm only able to match *after* the last '.'  https://gist.github.com/3130090
[2012-07-17 15:42:03 -0400] miketheman: so, roles and environment run lists.
[2012-07-17 15:42:44 -0400] miketheman: per wiki docs, env_run_lists does not require a "_default", rather: "If you do not specify a per environment run list for a certain environment, such as "production" and "preprod" in the above example, chef will use the default run list (like before). If it is the default run list that you desire, there is no need to specify it."
[2012-07-17 15:43:16 -0400] miketheman: however, in chef 10.12, this errors out.
[2012-07-17 15:43:17 -0400] miketheman: chef-10.12.0/lib/chef/role.rb:135:in `env_run_lists': _default key is required in env_run_lists. (Chef::Exceptions::InvalidEnvironmentRunListSpecification)
[2012-07-17 15:44:19 -0400] miketheman: seems like either the docs are wrong, or this code is: https://github.com/opscode/chef/blob/master/chef/lib/chef/role.rb#L129-141
[2012-07-17 15:46:05 -0400] miketheman: seems to be a ticket here: http://tickets.opscode.com/browse/CHEF-2636 that mentions it, but no updates have happened.
[2012-07-17 15:46:59 -0400] miketheman: So who wins, code or documentation? ;)
[2012-07-17 15:47:05 -0400] railsraider: yfeldblum: still getting openSSL::Cipher::CipherError: bad decrypt even after recreating the data bag using the same key
[2012-07-17 15:48:40 -0400] railsraider: probably missing the decrypt call
[2012-07-17 15:49:06 -0400] railsraider: or does Chef::EncryptedDataBagItem.load it call decrypt
[2012-07-17 15:49:23 -0400] knuckolls_: miketheman: seems to me like code always wins
[2012-07-17 15:51:23 -0400] yfeldblum: railsraider, sorry, actually you need to do one of two things: set the `encrypted_data_bag_secret` config in your /etc/chef/client.rb, or pass into Chef::EncryptedDataBagItem.load the secret itself (not the path to the secret - you need to read that file yourself)
[2012-07-17 15:51:43 -0400] railsraider: i did pass it
[2012-07-17 15:51:47 -0400] railsraider: ah!
[2012-07-17 15:51:52 -0400] railsraider: no i did the file path
[2012-07-17 15:52:04 -0400] railsraider: ok
[2012-07-17 15:52:27 -0400] yfeldblum: railsraider, you can use Chef::EncryptedDataBagItem.load_secret(path_to_secret) if you like
[2012-07-17 15:54:58 -0400] railsraider: yfeldblum: thank you!!!! that was my mistake thanks again!
[2012-07-17 15:55:03 -0400] yfeldblum: railsraider, sure
[2012-07-17 15:56:02 -0400] konopka: what's the best approach to disabling a service when a recipe that enables it is missing in a run?
[2012-07-17 15:56:50 -0400] yfeldblum: konopka, have a reverse recipe
[2012-07-17 15:59:01 -0400] konopka: yfeldblum: so manually add that reverse to a run or have it somehow check if the other recipe is running?
[2012-07-17 16:07:30 -0400] whyohwhy: hey
[2012-07-17 16:08:09 -0400] j|: is there a formal specification for the ruby DSL that chef uses somewhere online?
[2012-07-17 16:08:47 -0400] whyohwhy: can someone tell me how can I run an external ruby script file from a recipe?
[2012-07-17 16:09:04 -0400] spox: whyohwhy: execute resource
[2012-07-17 16:09:09 -0400] j|: can't you use an exec resource?
[2012-07-17 16:09:12 -0400] whyohwhy: where do I put the file in the cookbook?
[2012-07-17 16:09:39 -0400] j|: http://wiki.opscode.com/display/chef/Resources#Resources-Execute
[2012-07-17 16:10:39 -0400] jtimberman: j|: its not a specification per se, but the recipe DSL is documented here: http://wiki.opscode.com/display/chef/Recipes
[2012-07-17 16:11:04 -0400] j|: jtimberman: yea, I'm there already. Thx tho!
[2012-07-17 16:11:07 -0400] jtimberman: whyohwhy: there's a script resource, which can use a variety of interpreters, including Ruby. There's also ruby_block, which will execute the ruby code it contains.
[2012-07-17 16:11:11 -0400] jtimberman: j|: :)
[2012-07-17 16:11:22 -0400] jtimberman: j|: arey ou looking for something in particular?
[2012-07-17 16:12:01 -0400] jtimberman: whyohwhy: and of course you can drop off the ruby script with say, cookbook_file, or remote_file resource and then execute it with the execute resource, but that seems like an anti-pattern if the script is ruby
[2012-07-17 16:12:38 -0400] whyohwhy: I don't want to copy the script file to the client machine, Is it possible to put it somewhere in the cookbook and to run it form there?
[2012-07-17 16:12:45 -0400] j|: jtimberman: yes! a Clue! I have none. My brain may perhaps be afflicted with stupidity. I don't think an online doc can help me w/ that though. Thanks anyway, I'm just trying to get a better picture about how to read and write this stuff. Basic N00b issues. Thanks again, tho.
[2012-07-17 16:13:58 -0400] c_t: woah
[2012-07-17 16:14:00 -0400] c_t: so, uh
[2012-07-17 16:14:13 -0400] c_t: googling chef latex gives some very strange results
[2012-07-17 16:14:17 -0400] j|: haha
[2012-07-17 16:15:04 -0400] j|: I like the 2nd result in DDG for "python chef"
[2012-07-17 16:15:16 -0400] j|: "Python for dinner? 3 top local chefs to cook invasive species ..."
[2012-07-17 16:15:52 -0400] hoover_damm: why isn't it pychef?
[2012-07-17 16:15:55 -0400] hoover_damm: strange
[2012-07-17 16:16:44 -0400] j|: hoover_damm: nice. :: bookmarked ::
[2012-07-17 16:18:47 -0400] whyohwhy: jtimberman: can I use the script resource to run the script as a file in the cookbook itself, or I must to copy the script file to the machine first?
[2012-07-17 16:19:25 -0400] whyohwhy: must copy*
[2012-07-17 16:19:46 -0400] yfeldblum: konopka, write a recipe to remove the resources you don't like anymore and add it to the run-list
[2012-07-17 16:22:06 -0400] konopka: yfeldblum: it's not something i want to remove necessarily, more something that's optional. example: a dev environment configured via chef/vagrant with optional auto-start web server. include the web recipe if you want it to auto run a service. remove it if you want to ssh in and tweak  to your liking.
[2012-07-17 17:30:06 -0400] erratic: replace carrots with commas
[2012-07-17 17:30:46 -0400] erratic: like carrots better
[2012-07-17 17:30:49 -0400] RJ2: when i do knife status, 2 of my nodes say "<loads of> hours ago" - but they are running chef-client fine. I think it's because i have github.com/opscode-cookbooks/whitelist-node-attrs on those nodes
[2012-07-17 17:31:04 -0400] RJ2: is there a specific attribute i need to whitelist to make that work?
[2012-07-17 17:31:15 -0400] RJ2: (i'm using that because the nodes have 10k+ ip addresses)
[2012-07-17 17:35:23 -0400] cwj: RJ2: i think that plugin is using the ohai time attribute
[2012-07-17 17:35:38 -0400] RJ2: cwj: yeah it's ohai_time, just checked the knife status source
[2012-07-17 17:35:46 -0400] RJ2: will send a pull req for the default whitelist
[2012-07-17 17:35:58 -0400] RJ2: thanks
[2012-07-17 17:37:37 -0400] cwj: you bet
[2012-07-17 17:41:53 -0400] c_t: haha: http://www.theonion.com/video/hp-on-that-cloud-thing-that-everyone-else-is-talki,28789/
[2012-07-17 17:47:33 -0400] jperry2: how do I load a file from another cookbook?
[2012-07-17 17:47:57 -0400] jperry2: there is file that has a module -> module defined that I want to use
[2012-07-17 17:54:14 -0400] doomviking: heh. cloud stuff.
[2012-07-17 17:54:53 -0400] j|: c_t: lol. "4G, 5G, 6G.. all the Gs.. right in the computer"
[2012-07-17 17:55:18 -0400] c_t: I chuckled at "crowdsourcing 2.0"
[2012-07-17 17:55:37 -0400] doomviking: CDROMS!
[2012-07-17 17:55:45 -0400] j|: haha, yea, that's good too
[2012-07-17 17:55:46 -0400] jasond: is there a way to make a library available to *all* cookbooks?
[2012-07-17 17:55:46 -0400] j|: :)
[2012-07-17 17:56:42 -0400] doomviking: ALL THE G'S
[2012-07-17 17:56:43 -0400] miah: libraries are available to cookbooks who 'depend' on them
[2012-07-17 17:58:14 -0400] jasond: miah: so a library in cookbooks/apache2/libraries would be available to a syslog recipe?
[2012-07-17 17:59:32 -0400] miah: it should be, so long as the syslog cookbook depends on it.
[2012-07-17 18:00:58 -0400] jasond: weird, i wouldn't have thought that based on the docs
[2012-07-17 18:01:01 -0400] jasond: thanks
[2012-07-17 18:15:08 -0400] miah: you can always write a library as a module and then explicitly include it in your recipe
[2012-07-17 18:15:48 -0400] erratic: ohmigerd
[2012-07-17 18:15:50 -0400] miah: jasond: https://github.com/fujin/chef-discovery/blob/master/libraries/recipe.rb
[2012-07-17 18:16:02 -0400] miah: that works too =)
[2012-07-17 18:16:25 -0400] miah: im still learning the proper ruby way to do these things and trying to apply them to chef though
[2012-07-17 18:16:57 -0400] erratic: learning ruby is like ....learning a whole new language for me
[2012-07-17 18:16:57 -0400] jperry2: @miah, @jasond, If I add a depends on the cookbook its pulled down
[2012-07-17 18:16:58 -0400] erratic: and stuff
[2012-07-17 18:17:23 -0400] jperry2: can I just do a "include <module>:<module>" in the recipe to have access to methods inside it
[2012-07-17 18:17:58 -0400] erratic: you ought to be able to to in the .rb file which is like a view kinda
[2012-07-17 18:18:08 -0400] erratic: thats how I think of them
[2012-07-17 18:18:10 -0400] jperry2: the file actually exists under cookbooks/chef_handler/files/default/handlers/
[2012-07-17 18:18:18 -0400] erratic: its really just mvc
[2012-07-17 18:18:49 -0400] jperry2: if I put a depends on the cookbook is that module in my library path so I can just do an include on it?
[2012-07-17 18:19:26 -0400] erratic: jperry2 have you seen the cookbook tutorial
[2012-07-17 18:19:47 -0400] erratic: http://wiki.opscode.com/display/chef/Guide+to+Creating+A+Cookbook+and+Writing+A+Recipe
[2012-07-17 18:22:52 -0400] jperry2: @erratic?
[2012-07-17 18:22:57 -0400] jperry2: how does that help my question
[2012-07-17 18:23:03 -0400] jperry2: I know how to write recipes etc
[2012-07-17 18:23:27 -0400] HarvesterOfBeer: howdy. I'm trying to set up chef server 0.10 on Ubuntu 12.04. I'm also going to need the knife windows bootstrap plugin which needs ruby 1.9.1+
[2012-07-17 18:23:29 -0400] geekbri: yfeldblum: remember that sub-run-context stuff we were talking about from yesterday.  In the last gist you had put up, it was still caching new_resource and current_resource... but since sub-run-context was a dup of run_context I don't think that was actually necessary.  Unless of course you are going to be setting anything in those objects... then it is.
[2012-07-17 18:23:37 -0400] geekbri: So i guess better still to have it.
[2012-07-17 18:23:47 -0400] HarvesterOfBeer: the chef install is going to force install ruby 1.8.x
[2012-07-17 18:24:05 -0400] erratic: jperry2 sec
[2012-07-17 18:24:14 -0400] miah: jperry2: the cookbook still needs to be pulled down
[2012-07-17 18:24:19 -0400] jperry2: I know that
[2012-07-17 18:24:21 -0400] HarvesterOfBeer: even though I alredy have 1.9.1 installed
[2012-07-17 18:24:21 -0400] erratic: lemme look through some of mine and see if there's any examples of what you're trying to do
[2012-07-17 18:24:23 -0400] jperry2: that is what depends is for
[2012-07-17 18:24:27 -0400] yfeldblum: geekbri, right, that was originally because of the `sub_run_context.instance_exec do ... end` bit
[2012-07-17 18:24:29 -0400] HarvesterOfBeer: any suggestions from the hive mind?
[2012-07-17 18:24:37 -0400] miah: modules are included with ::
[2012-07-17 18:25:03 -0400] miah: http://wiki.opscode.com/display/chef/Libraries
[2012-07-17 18:25:06 -0400] miah: has the deets
[2012-07-17 18:25:09 -0400] geekbri: yfeldblum: yeah, I was going to omit it from my usage, but then I realized if you happen to use any of the resource parameters, getting isn't an issue, but if for some reason you set one of them... you need to have it cached still, because setting the run_context back aftewards will nuke your changes
[2012-07-17 18:25:19 -0400] yfeldblum: geekbri, there's another use for it, of course, which is that you often don't really want to be calling methods or looking at instance variables from within resource-declaration blocks
[2012-07-17 18:25:27 -0400] erratic: miah there you go
[2012-07-17 18:25:53 -0400] jperry2: yeah I saw this before
[2012-07-17 18:26:00 -0400] yfeldblum: geekbri, it's often much better to capture your data into local variables, which have different rules for how they work than methods and instance variables
[2012-07-17 18:26:07 -0400] geekbri: yfeldblum: well, what do you mean.  You might want to use the new_resource.parameter as a parameter in the resource you are calling inside the provider
[2012-07-17 18:26:11 -0400] jperry2: unfortunately it's not under libraries
[2012-07-17 18:26:15 -0400] jperry2: I can see if we can move it
[2012-07-17 18:26:22 -0400] jperry2: with minimal impact
[2012-07-17 18:26:24 -0400] geekbri: yfeldblum: hrm, what are the complications ?  why would you want to avoid using the accessors?
[2012-07-17 18:26:35 -0400] jperry2: there must be an easier way
[2012-07-17 18:26:43 -0400] yfeldblum: geekbri, right, to take an example, `file("/etc/asdf") { content new_resource.file_content }`
[2012-07-17 18:26:51 -0400] geekbri: yeah
[2012-07-17 18:26:57 -0400] geekbri: I've been doing that, thats why I ask ;)
[2012-07-17 18:27:04 -0400] yfeldblum: geekbri, there, `new_resource` is calling a method ... but what's it calling the method *on*?
[2012-07-17 18:27:24 -0400] yfeldblum: geekbri, it's calling the method `new_resource` on the Chef::Resource::File instance!
[2012-07-17 18:27:26 -0400] geekbri: its calling it on the new_resource instance variable of the resource object
[2012-07-17 18:27:37 -0400] geekbri: sorry the method that returns the instance variable
[2012-07-17 18:27:59 -0400] yfeldblum: geekbri, so there's a whole lot of magic going on in chef to redirect the methods that you call in weird places, such as inside resource-declaration blocks
[2012-07-17 18:29:02 -0400] yfeldblum: geekbri, of course the class Chef::Resource::File does not have a method `new_resource`, and even if it did, there's no way in the world it could know to return the same new_resource as the thing that instantiated the file resource would have liked it to return
[2012-07-17 18:29:55 -0400] CharlieSu: Hi.  I've got a bunch of servers that have chef installed via a gem and I'd like to update them to the latest version using the omnibus installer.  Anything I need to do special to upgrade?
[2012-07-17 18:30:23 -0400] geekbri: yfeldblum: hrm, yeah I know that the resource class catches new_resource with method missing and hands that off to the provider
[2012-07-17 18:30:40 -0400] yfeldblum: geekbri, so long as you're working in the normal type of ruby way, where you're not instance_exec'ing a block on some other object, `new_resource` will work just fine ... but when you start instance_exec'ing a block on some other object, you're at the mercy of that other object
[2012-07-17 18:31:03 -0400] geekbri: right because the enclosing provider could be different right?
[2012-07-17 18:31:16 -0400] geekbri: so you are instance execing so the provider you are in is no longer the enclosing provider?
[2012-07-17 18:32:08 -0400] yfeldblum: geekbri, sometimes it will work out right, but sometimes it won't, and it can become a huge mess especially if you don't have enough experience seeing and fixing these problems (which is really common among new Chef users and experienced Chef users who aren't experienced Ruby programmers)
[2012-07-17 18:32:40 -0400] CharlieSu: when will Chef go to 1.9.3 ?
[2012-07-17 18:32:55 -0400] erratic: also will their be apt-get upgrades available
[2012-07-17 18:33:05 -0400] erratic: ideally it'd be that easy
[2012-07-17 18:33:13 -0400] erratic: but Id just like to know what to expect
[2012-07-17 18:33:20 -0400] geekbri: yfeldblum: ok so, assigning the results of new_resource.parameter to a variable will just store a reference to that object in the variable.  This is much safer because then no matter what instance_exec you end up in, its still just a reference to that same object, without the worry of what method_missing will do with it?
[2012-07-17 18:33:26 -0400] yfeldblum: geekbri, the point of #instance_exec is to change what `self` refers to inside that execution of the block; when ruby sees `new_resource`, it's either a local variable if you declared a local variable of that name, or else it's a method call, and ruby calls that method on whatever `self` happens to be at the time
[2012-07-17 18:33:32 -0400] erratic: so I can prepare myself ...
[2012-07-17 18:33:38 -0400] yfeldblum: geekbri, that's right
[2012-07-17 18:34:43 -0400] yfeldblum: geekbri, indeed, you can assign the result of calling `new_resource` to a local variable too, but either way will work just fine - it depends on your particular preference which way you go, but they both work and they're both perfectly acceptable
[2012-07-17 18:34:53 -0400] geekbri: yfeldblum: ok that makes sense and is very reasonable.  Although if you never call instance_exec and you are just changing the run_context this shouldn't be an issue right?  I still think it makes sense to store the parameters in a variable but you aren't necessarily going to run into issues.
[2012-07-17 18:35:23 -0400] yfeldblum: geekbri, when you declare a resource and pass a block, like `file "/etc/asdf" do ... end` ... that absolutely uses #instance_exec
[2012-07-17 18:35:48 -0400] geekbri: yfeldblum: oh right it must be calling it on the resource itself to get into the right self
[2012-07-17 18:35:50 -0400] geekbri: yes?
[2012-07-17 18:37:16 -0400] yfeldblum: geekbri, yes
[2012-07-17 18:37:44 -0400] yfeldblum: geekbri, here's the code that instantiates a resource object and instance_exec's the resource-declaration block ... https://github.com/opscode/chef/blob/master/chef/lib/chef/mixin/recipe_definition_dsl_core.rb#L65-74
[2012-07-17 18:37:47 -0400] geekbri: hrm ok.  I really need to dig into the internals of chef and draw some diagrams of the work flow
[2012-07-17 18:41:45 -0400] jperry2: @miah, - are libraries accessible from other cookbooks?
[2012-07-17 18:41:49 -0400] yfeldblum: geekbri, all in all: magic doesn't always work; know what the trick is and know when it works and when it doesn't, and you can save yourself days' worth of debugging
[2012-07-17 18:42:19 -0400] yfeldblum: jperry2, yes, so long as the other cookbook depends on the cookbook containing the library using the `depends` declaration in the other cookbook's metadata.rb
[2012-07-17 18:42:38 -0400] jperry2: got it
[2012-07-17 18:42:39 -0400] jperry2: thx
[2012-07-17 18:44:46 -0400] spheromak: or as long as its been loaded somewhere in your runlist before you try to access the classes/methods in the library
[2012-07-17 18:45:31 -0400] spheromak: guess hsouldn't matter where in run list.. libs are parsed in compile phase
[2012-07-17 18:45:41 -0400] yfeldblum: spheromak, that's not necessarily true
[2012-07-17 18:47:45 -0400] miah: spheromak: <3 hows it been?
[2012-07-17 18:48:05 -0400] spheromak: when is it not? ive not ran ito an issue where cook with libs was in rynlist and libs were not there.
[2012-07-17 18:48:28 -0400] spheromak: yfeldblum: this is without using depends. (its a core/helper lib thats in a base role)
[2012-07-17 18:48:40 -0400] spheromak: miah: it's going well nice to be back in the US for a bit
[2012-07-17 18:49:31 -0400] spheromak: miah: did you want the dhcp/pxe/bind stuff i did ? not really wanting to go public with it but i can send it to you if you want it.
[2012-07-17 18:49:47 -0400] spheromak: i.e. its verry dirty work :P
[2012-07-17 18:50:19 -0400] miah: spheromak: yes please please =)
[2012-07-17 18:50:32 -0400] miah: just email it miah @ chia - pet . org
[2012-07-17 18:50:56 -0400] miah: are you planning on visiting sf anytime soon?
[2012-07-17 18:51:26 -0400] spheromak: nothing in the plans i go through there everytime im going to seoul tho.
[2012-07-17 18:51:38 -0400] spheromak: just not enough of a layover to go visit people
[2012-07-17 18:52:56 -0400] miah: oh wow
[2012-07-17 18:52:57 -0400] miah: ya
[2012-07-17 18:53:03 -0400] miah: why you going to seoul so much ?
[2012-07-17 18:53:15 -0400] spheromak: working outta seoul atm
[2012-07-17 18:53:23 -0400] spheromak: over there 1/2 time
[2012-07-17 18:53:29 -0400] bbhoss: Hi all. Can I do LWRP in a role definition, or only recipes. Just trying to add a repo and a package to install
[2012-07-17 18:53:50 -0400] spheromak: bbhoss: you asking if you can call a resource inside a role ?
[2012-07-17 18:54:07 -0400] spheromak: thats usually something you do in a recipe :)
[2012-07-17 18:54:08 -0400] bbhoss: I think, sounds like no?
[2012-07-17 18:54:35 -0400] bbhoss: running ruby 1.9.3 and omnibus together seems like something nobody does
[2012-07-17 18:55:59 -0400] behemphi: Hello all, I think I have found a bug where when uploading a cookbook where only a template changes the chef-client does not pull it down.
[2012-07-17 18:56:02 -0400] yfeldblum: spheromak, defining libs is also ruby code, and can possibly depend on prior libs
[2012-07-17 18:56:19 -0400] behemphi: The order is I change the template, then upload the cookbook, then run the chef client
[2012-07-17 18:56:29 -0400] behemphi: no change on the machine
[2012-07-17 18:56:55 -0400] behemphi: then I comment change a recipe (add a comment), upload the cookbook, run the chef-client
[2012-07-17 18:57:00 -0400] behemphi: template chagne now in effect
[2012-07-17 18:57:24 -0400] behemphi: I could not find this described in the database, but wanted to check if anyone has seen this behavior
[2012-07-17 18:58:51 -0400] miah: spheromak: oh wow. so new gig? =)
[2012-07-17 18:59:20 -0400] Twirrim: hmm.. bootstrap latest from the chef-solo instructions is trying to install epel-release-6-5 which no longer exists.
[2012-07-17 18:59:30 -0400] miah: bbhoss: roles don't allow you to define lwrp's. you can define attributes, and run lists.
[2012-07-17 18:59:39 -0400] Twirrim: we're on to epel-release-6-7 now
[2012-07-17 18:59:45 -0400] karsten: vagrant question: we've got a base image including a set of guest additions which don't match my specific version of virtualbox. Is there a sane way to accomodate this? Or a better place to ask if not here?
[2012-07-17 18:59:50 -0400] spheromak: miah: yea been busy last couple months was in S korea for about 10 weeks
[2012-07-17 18:59:54 -0400] bbhoss: miah: that's what I thought, writing a new recipe now :)
[2012-07-17 19:00:15 -0400] miah: ya. so it does suck. thre are lots of lwrp's in cookbooks that don't use attributes or data bags
[2012-07-17 19:00:31 -0400] spheromak: yes it is
[2012-07-17 19:00:51 -0400] miah: spheromak: wows
[2012-07-17 19:01:02 -0400] miah: thats awesome. congrats =)
[2012-07-17 19:01:43 -0400] karsten: And related, on 'vagrant up' I get the following error: FATAL: OpenSSL::Cipher::CipherError: bad decrypt
[2012-07-17 19:01:43 -0400] erratic: I think Im going to throw up
[2012-07-17 19:02:08 -0400] karsten: Which I suspect has to do with encrypted databag keys.
[2012-07-17 19:02:56 -0400] erratic: I cant stand my coworkers annoying voice
[2012-07-17 19:03:03 -0400] erratic: I wish for him to go away
[2012-07-17 19:03:06 -0400] erratic: very badly
[2012-07-17 19:03:07 -0400] doomviking: headphones
[2012-07-17 19:03:08 -0400] erratic: :(
[2012-07-17 19:03:15 -0400] erratic: doomviking lost a 100$ pair last week
[2012-07-17 19:03:19 -0400] erratic: blacked out
[2012-07-17 19:03:20 -0400] karsten: ball gag.
[2012-07-17 19:03:24 -0400] erratic: lost my 400 dollar purse too
[2012-07-17 19:03:25 -0400] doomviking: cant help you there
[2012-07-17 19:03:25 -0400] erratic: and a laptop
[2012-07-17 19:03:34 -0400] erratic: I know just sayin
[2012-07-17 19:03:44 -0400] CharlieSu: when will Chef go to 1.9.3 ?
[2012-07-17 19:04:12 -0400] doomviking: I buy $15 sony earplugs, because they are awesome and I dont cry if I lose or mangle them.
[2012-07-17 19:04:20 -0400] erratic: :<
[2012-07-17 19:04:31 -0400] geekbri: I lose or mangle everything.
[2012-07-17 19:04:44 -0400] erratic: yeah I lose my sense of self control
[2012-07-17 19:04:50 -0400] erratic: and then I lose a lot more
[2012-07-17 19:04:54 -0400] erratic: and then I gain it back
[2012-07-17 19:04:58 -0400] erratic: and then I lose it again
[2012-07-17 19:05:06 -0400] erratic: pretty tired of my life if you cant tell
[2012-07-17 19:05:12 -0400] geekbri: Its like that scene in tommy boy where he mangles the poor muffin.
[2012-07-17 19:05:15 -0400] geekbri: or maybe it was a piece of bread.
[2012-07-17 19:05:52 -0400] erratic: awesome
[2012-07-17 19:06:18 -0400] erratic: flavored**
[2012-07-17 19:06:23 -0400] erratic: not smoking chips
[2012-07-17 19:06:25 -0400] erratic: god
[2012-07-17 19:06:32 -0400] erratic: those wouldn't be very tasty
[2012-07-17 19:06:47 -0400] erratic: anybody want my job ? I'm gonna run away
[2012-07-17 19:07:24 -0400] erratic: I've got my mind set on wrapping up projects so that I could hand them off to somebody else
[2012-07-17 19:07:44 -0400] erratic: I'm seriously considering leaving seattle forever
[2012-07-17 19:07:46 -0400] erratic: I hate it here
[2012-07-17 19:07:53 -0400] erratic: tired of it
[2012-07-17 19:08:12 -0400] karsten: erratic: Um, mildly offtopic.
[2012-07-17 19:08:17 -0400] doomviking: ...
[2012-07-17 19:08:20 -0400] erratic: lol
[2012-07-17 19:08:27 -0400] geekbri: I think somebody needs to hug it out.
[2012-07-17 19:08:31 -0400] geekbri: Cross coast hug
[2012-07-17 19:09:51 -0400] erratic: technically this is lunch time but since I stayed up really late chatting on dating sites and stuff till like 4 in the morning and watching season 4 of breaking bad
[2012-07-17 19:09:57 -0400] erratic: and didn't show up till 9
[2012-07-17 19:10:04 -0400] erratic: technically I'm supposed to make up for the time
[2012-07-17 19:10:31 -0400] nilsga: Hi! I'm having problems trying to create a user with a hashed password. Get an error about ruby-shadow not being installed. I have tried installing it in a recipe before the user recipe runs, but I get the same error regardless. Any tips?
[2012-07-17 19:11:14 -0400] cwj: nilsga: the users cookbook needs to be fixed to install ruby-shadow
[2012-07-17 19:11:29 -0400] cwj: i should go fix my pull request for that
[2012-07-17 19:11:36 -0400] cwj: if it hasnt been fixed already
[2012-07-17 19:13:04 -0400] nilsga: Is there a branch I can clone to get it working?
[2012-07-17 19:13:33 -0400] nilsga: Or a patch I can apply
[2012-07-17 19:15:52 -0400] CharlieSu: nilsga: are you doing a Gem.clear_paths after you install the gem?
[2012-07-17 19:16:37 -0400] nilsga: I'm installing the libshadow-ruby1.8 package
[2012-07-17 19:16:46 -0400] nilsga: before the user recipe runs
[2012-07-17 19:19:39 -0400] cwj: nilsga: https://github.com/needle-cookbooks/chef-opscode-users/tree/COOK-937 contains my fix
[2012-07-17 19:20:03 -0400] cwj: i am trying to rework it to use chef_gem instead of the logic you see there
[2012-07-17 19:20:09 -0400] cwj: but it does work for me
[2012-07-17 19:21:33 -0400] cwj: installing the libshadow-ruby1.8 package probably doesnt work for you because the user cookbook is trying to require ruby-shadow during the compilation phase, before it gets a chance to install the package you asked for
[2012-07-17 19:22:07 -0400] nilsga: ok
[2012-07-17 19:22:09 -0400] nilsga: thanks
[2012-07-17 19:22:13 -0400] nilsga: I'll try that
[2012-07-17 19:22:20 -0400] CharlieSu: i concur w/ cwj
[2012-07-17 19:25:12 -0400] nilsga: slightly related: What's the opinion on password-less login and password-less sudo?
[2012-07-17 19:25:24 -0400] cwj: seems like i cannot make use of include_recipe in a provider? is that so?
[2012-07-17 19:27:32 -0400] bbhoss: anyone know if node.run_list.roles behavior has changed recently?
[2012-07-17 19:28:12 -0400] bbhoss: i am having issues with this in the application cookbook: (app["server_roles"] & node.run_list.roles).each do |app_role|
[2012-07-17 19:28:37 -0400] bbhoss: it says there is no method each for Falseclass, which sounds impossible because two arrays &ed together should be at least []
[2012-07-17 19:29:06 -0400] ashb: one of those is not an array
[2012-07-17 19:29:12 -0400] ashb: possibly app["server_roles"]
[2012-07-17 19:29:22 -0400] ashb:  nil & ['a']
[2012-07-17 19:29:23 -0400] ashb: => false
[2012-07-17 19:29:25 -0400] bbhoss: ah, I'll check that possiblity
[2012-07-17 19:29:38 -0400] bbhoss: is there some way to add a logger to the chef-client runs?
[2012-07-17 19:30:44 -0400] cwj: bbhoss: http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2012-07-17 19:31:21 -0400] thehar: or do you mean Chef::Log()
[2012-07-17 19:31:36 -0400] cwj: yeah that would be different
[2012-07-17 19:32:13 -0400] bbhoss: yeah, just a simple logger
[2012-07-17 19:32:26 -0400] thehar: you can use Chef::Log()
[2012-07-17 19:36:56 -0400] cwj: Chef::Log also allows you to specify the log level
[2012-07-17 19:37:13 -0400] cwj: e.g. Chef::Log.debug("You will only see this when you run chef with -l debug")
[2012-07-17 19:40:05 -0400] bbhoss: this is kinda random, but does anyone know why these other packages aren't going to be installed? : https://gist.github.com/e0101d772a9cdadce866
[2012-07-17 19:41:44 -0400] hoover_damm: bbhoss, the meta package is just sayiing it can't install subpackages
[2012-07-17 19:42:01 -0400] bbhoss: hoover_damm: can I get it to tell my why?
[2012-07-17 19:42:11 -0400] hoover_damm: bbhoss, yep you need to install the package in question not the meta
[2012-07-17 19:42:34 -0400] hoover_damm: apt-get install -y 1:1.9.3.194-0~51~precise1
[2012-07-17 19:42:38 -0400] bbhoss: hoover_damm: i've tried, and it gives me the same error but with other package
[2012-07-17 19:42:42 -0400] hoover_damm: err ruby1.9.1-1:1.9.3.194-0~51~precise1
[2012-07-17 19:42:56 -0400] hoover_damm: bbhoss, are you running precise?
[2012-07-17 19:43:03 -0400] hoover_damm: or trying to use backports?
[2012-07-17 19:43:08 -0400] bbhoss: yes, precise, this is a PPA
[2012-07-17 19:43:23 -0400] hoover_damm: sounds like the ppa is borked or competing with precises 193
[2012-07-17 19:43:33 -0400] bbhoss: ah, does it actually have 1.9.3
[2012-07-17 19:43:46 -0400] hoover_damm: oneric was 1.9.2
[2012-07-17 19:43:56 -0400] hoover_damm: precise has 1.9.3
[2012-07-17 19:44:16 -0400] hoover_damm: but yeah it sounds like you had a broken ppa or a ppa not designed for you
[2012-07-17 19:44:57 -0400] bbhoss: well it says it works on precise, and the packages appear to be in the ppa for it. it is in competition though with the other one
[2012-07-17 19:45:10 -0400] bbhoss: https://gist.github.com/f5a2acda21ed9fa2c6ad
[2012-07-17 19:45:55 -0400] hoover_damm: generally brightbox should work
[2012-07-17 19:46:03 -0400] bbhoss: yeah, as I thought
[2012-07-17 19:46:28 -0400] hoover_damm: maybe rinse and repeat?
[2012-07-17 19:46:34 -0400] hoover_damm: and see if your results are still fubared?
[2012-07-17 19:46:59 -0400] bbhoss: what, kill the whole server and start over?
[2012-07-17 19:47:09 -0400] hoover_damm: if you can
[2012-07-17 19:47:22 -0400] hoover_damm: apt-get update and try again
[2012-07-17 19:47:24 -0400] bbhoss: oh, I can, it's just unpleasant and I'm not sure if that would fix it
[2012-07-17 19:47:28 -0400] bbhoss: oh I already tried that
[2012-07-17 19:47:29 -0400] hoover_damm: but basically a+b != c here
[2012-07-17 19:47:35 -0400] bbhoss: yeah
[2012-07-17 19:47:54 -0400] hoover_damm: you can try the #ubuntu channels maybe they can help you debug it further
[2012-07-17 19:47:54 -0400] bbhoss: how does it decide which version to use? ubuntu vs brightbox?
[2012-07-17 19:48:27 -0400] bbhoss: it seems they are busy getting webcams to work :)
[2012-07-17 19:48:49 -0400] hoover_damm: oh desktop channel? try -server?
[2012-07-17 19:49:38 -0400] hoover_damm: or talk to brightbox perhaps? basically this is a simple chore that if you added the ppa right it would work, if you added it wrong you'd get a certificate warning
[2012-07-17 19:49:41 -0400] hoover_damm: not this
[2012-07-17 19:50:59 -0400] bbhoss: yeah I got the key added right, this is weird
[2012-07-17 19:51:11 -0400] bbhoss: i am not their customer though, not sure if I could just email support about it
[2012-07-17 19:52:29 -0400] hoover_damm: Unfortunately I can't lead you to that answer
[2012-07-17 19:53:12 -0400] bbhoss: heh, thanks anyways
[2012-07-17 19:54:32 -0400] geekbri: Anybody here headed to the chef-boston meetup later tonight ?!
[2012-07-17 20:00:01 -0400] erratic: na na na net split
[2012-07-17 20:00:58 -0400] erratic: someone unleashed some very l33t hax to facilitate that netsplit
[2012-07-17 20:05:56 -0400] erratic: http://www.tumblr.com/tagged/arbitrary+cat+eating+banana+gif
[2012-07-17 20:07:14 -0400] miah: i never notice that stuff anymore. i set up my client to ignore splits, joins, quits, nick changes, etc..
[2012-07-17 20:07:42 -0400] erratic: you'll have me on your ignore list soon enough
[2012-07-17 20:07:58 -0400] erratic: for posting random pictures of cats eating bananers
[2012-07-17 20:08:59 -0400] geekbri: The internet is powered by cats eating bananas.
[2012-07-17 20:09:31 -0400] erratic: Im pretty sure that cat is not really trying to eat the banana rather just biting it because it's mad
[2012-07-17 20:09:37 -0400] erratic: understandably so
[2012-07-17 20:10:34 -0400] erratic: cats are so cute when they're mad
[2012-07-17 20:14:00 -0400] bbhoss: hoover_damm: so it appears that it is looking for deps that don't exist, I guess the package is broken? https://gist.github.com/cdcbf29968090b7889ef
[2012-07-17 20:20:35 -0400] bbhoss: so since it appears that this PPA isn't going to work for me, how in the world are people getting ruby 1.9.x on their boxes while using chef omnibus? Manually compiling from source?
[2012-07-17 20:23:57 -0400] hoover_damm: bbhoss, sounds like it's not designed for your version
[2012-07-17 20:24:32 -0400] bbhoss: hoover_damm: what do you mean? I am running a precise package with the precise?
[2012-07-17 20:26:11 -0400] hoover_damm: bbhoss, libyaml-0-2 - Fast YAML 1.1 parser and emitter library
[2012-07-17 20:26:13 -0400] hoover_damm: is in precise
[2012-07-17 20:26:15 -0400] hoover_damm: if you can't install that
[2012-07-17 20:26:21 -0400] hoover_damm: i have to question if your running precise
[2012-07-17 20:26:41 -0400] doomviking: we compile from source on bootstrap
[2012-07-17 20:27:02 -0400] bbhoss: hoover_damm: yes I am, it's the linode copy of it
[2012-07-17 20:27:11 -0400] bbhoss: doomviking: with rvm or just manually?
[2012-07-17 20:27:35 -0400] doomviking: well, its in the bootstrap file, so, neither. scripted, not rvm
[2012-07-17 20:27:59 -0400] bbhoss: i know what you mean
[2012-07-17 20:28:24 -0400] bbhoss: I was going to do that but it seems omnibus is a nicer way of doing it, many of my boxes don't need ruby
[2012-07-17 20:28:39 -0400] bbhoss: do you think you could share your template file though?
[2012-07-17 20:30:47 -0400] doomviking: bbhoss: https://gist.github.com/3131844
[2012-07-17 20:31:13 -0400] doomviking: you can obviously ignore the setting routes crap in there, its a hack for the private cloud networking.
[2012-07-17 20:31:56 -0400] bbhoss: thanks, what does the routes thing do out of curiosity?
[2012-07-17 20:32:30 -0400] doomviking: its part of a particular nightmare that I do not want to get into.
[2012-07-17 20:32:45 -0400] miah: i omnibus now, but previously did rvm, and before that just hoped the system ruby worked fine :P
[2012-07-17 20:33:12 -0400] bbhoss: haha, completely understandable doomviking. I ended up having to write some custom ohai plugins for linode and I wondered if it was a similar issue :)
[2012-07-17 20:33:18 -0400] geekbri: PSRWaaS, Pray System Ruby Works as a Service
[2012-07-17 20:33:28 -0400] doomviking: heh
[2012-07-17 20:34:05 -0400] bbhoss: I'm pretty sure systemruby will work, especially since they have 1.9.3, but I'm concerned with some of the patches they might have applied, and build options they chose
[2012-07-17 20:35:35 -0400] bbhoss: I haven't trusted debian since the openssl debacle. Just recently I think there was an issue that affected mysql, but I think it affected others too (but not the source).
[2012-07-17 20:37:03 -0400] miah: i'm pretty sure chef-client will just work in most 'system ruby' circumstances
[2012-07-17 20:37:39 -0400] miah: but if you want very specific build options and gentoo performance tweaks (-j 9000) you'll want to compile your own, or build a package.
[2012-07-17 20:39:35 -0400] bbhoss: hah, it's -j is over 9000
[2012-07-17 20:39:52 -0400] bbhoss: miah: see, I am trying to keep the system ruby separate from the chef ruby
[2012-07-17 20:42:16 -0400] mhalligan: some chef documentation suggests installing chef via gems. some does it via packages. some recommends curl | http://www.opscode.com/chef/install.sh (which does packages)
[2012-07-17 20:42:24 -0400] mhalligan: is there a standard / best practice that anyone sticks to?
[2012-07-17 20:43:11 -0400] HarvesterOfBeer: mhalligan: I'm currently wading through this, too
[2012-07-17 20:43:27 -0400] HarvesterOfBeer: trying to get chef server set up on precise with ruby 1.9.3...
[2012-07-17 20:43:45 -0400] HarvesterOfBeer: I need the knife windows bootstrap plugin which requires ruby 1.9.1+
[2012-07-17 20:43:56 -0400] mhalligan: harvesterofbeer: I think ruby versioning performs fellatio on donkeys precisely because it convinces people to use hosted versions of servers that suck to setup :)
[2012-07-17 20:44:26 -0400] mhalligan: just use $hipster_packaging_alternative of the week and it'll work fine.
[2012-07-17 20:45:01 -0400] dwhsix: ouch
[2012-07-17 20:45:30 -0400] HarvesterOfBeer: man, this is why I'm always dealign with ulcers when trying something ruby based
[2012-07-17 20:45:57 -0400] mhalligan: I love ruby until it's time to deal with gems / packaging / installation, then I consider doing everyuthing in bash which just works
[2012-07-17 20:46:43 -0400] geekbri: go deal with like perl or python packaging for a while you might not hate it so much :)
[2012-07-17 20:47:06 -0400] barefoot: heh
[2012-07-17 20:47:55 -0400] HarvesterOfBeer: surprisingly, I've had very few issues with python and packages. Usually the system version just works
[2012-07-17 20:48:00 -0400] mhalligan: geekbri: I've spent the last 2 days rewriting the shittasticness of the python and application_python cookbooks, so yea I know what you mean
[2012-07-17 20:48:19 -0400] mhalligan: cpan rocks once you figure out the secret shell everyone uses for cpan installation. cpanm or whatever.
[2012-07-17 20:48:21 -0400] geekbri: I'm now running my own pypi server, which is a blast.
[2012-07-17 20:48:26 -0400] dschultz: Is there a recommended way for upgrading Ruby from 1.8.7 to 1.9 on chef-server? I've read some install via RVM, but it can cause PATH errors. Btw, this is needed in order to install knife-windows.
[2012-07-17 20:48:37 -0400] geekbri: yeah i've used cpanm and cpanm -e so that I can script it.  I still dont like cpan :)
[2012-07-17 20:48:39 -0400] cwj: geekbri: what are you using for that?
[2012-07-17 20:48:50 -0400] dschultz: Seems I'm not the only one bashing my head over this...
[2012-07-17 20:49:00 -0400] geekbri: cwj: http://pypi.python.org/pypi/pypiserver/.   It's not perfect, but for our needs its working
[2012-07-17 20:49:21 -0400] javawidget: I've noticed that chef-client does a chef run everytime dhclient renews its address..
[2012-07-17 20:49:21 -0400] HarvesterOfBeer: dschultz: yeah, you and me both
[2012-07-17 20:49:26 -0400] javawidget: it this normal behaviour?
[2012-07-17 20:49:28 -0400] mhalligan: is it better to install chef from a gem? or is it better to install it from opscode's "omnibus" packages?
[2012-07-17 20:49:40 -0400] mhalligan: or distro-provides packages?
[2012-07-17 20:49:46 -0400] cwj: geekbri: oic. i'll have a look at it
[2012-07-17 20:49:49 -0400] cwj: was considering https://github.com/steiza/simplepypi
[2012-07-17 20:49:55 -0400] jtimberman: mhalligan: installation using the full stack package (http://opscode.com/chef/install) is what Opscode recommends starting with version 10.12. we still continue to support gem and apt installations in our release process.
[2012-07-17 20:50:07 -0400] cwj: wondering if i coulnt get away with generating static files and uploading them to an s3 bucket
[2012-07-17 20:50:12 -0400] jtimberman: that is, we continue to release the gems, and the apt packages.
[2012-07-17 20:50:24 -0400] HarvesterOfBeer: jtimberman: what version of ruby is installed with the omnibus packages? 1.9.x hopefully?
[2012-07-17 20:50:26 -0400] mhalligan: jtimberman: then would it be appropriate for me to do a pull-request to https://github.com/mhalligan/chef/blob/master/chef/lib/chef/knife/bootstrap/ubuntu12.04-gems.erb to reflect that?
[2012-07-17 20:50:32 -0400] geekbri: cwj: it lets you fall back to the default pypi server if the package isn't on yours as well.  We are able to register and upload our pips and then use it to grab all other pips as well when we dont have them and it fallsback to pypi
[2012-07-17 20:50:36 -0400] jtimberman: 1.9.2-p180, i believe
[2012-07-17 20:50:54 -0400] jtimberman: ah, ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-linux]
[2012-07-17 20:50:59 -0400] cwj: geekbri: ah thats nice
[2012-07-17 20:51:05 -0400] jtimberman: (I don't know when it will be 1.9.3)
[2012-07-17 20:51:12 -0400] bbhoss: HarvesterOfBeer: you too bro, lol
[2012-07-17 20:51:24 -0400] HarvesterOfBeer: jtimberman: the omnibus packages are only for chef client nodes, yes?
[2012-07-17 20:51:31 -0400] jtimberman: HarvesterOfBeer: *right now* yes.
[2012-07-17 20:51:35 -0400] cwj: i need to start packaging the python modules our app needs
[2012-07-17 20:51:38 -0400] jtimberman: HarvesterOfBeer: we're working on Open Source Chef Server too
[2012-07-17 20:51:49 -0400] jtimberman: and our Private Chef installation is with a single package.
[2012-07-17 20:51:57 -0400] thedeeno: can I supply a git repo to the gem_package resource?
[2012-07-17 20:52:02 -0400] HarvesterOfBeer: jtimberman: ok, thanks
[2012-07-17 20:52:04 -0400] jtimberman: "One Package to Rule Them All"(tm)
[2012-07-17 20:52:08 -0400] HarvesterOfBeer: lol
[2012-07-17 20:52:17 -0400] erratic: parakeet emitter
[2012-07-17 20:52:34 -0400] mhalligan: jtimberman: it seems like a team of techwriters spending a few months updating all of opscode's docs to warn that something is a deprecated standard, or to just make these processes standard, would be awesome. having gone through the quickstart doc I ended up doing like 15 steps that now I realize were pretty unnecessary. needless frustration to new users
[2012-07-17 20:53:11 -0400] mhalligan: holy half finished thought. it seems like devoting a team to doing that would prevent needless frustration to new users.
[2012-07-17 20:53:42 -0400] jtimberman: HarvesterOfBeer: This video from ChefConf includes further information about the full stack packages and some other things. It's two months ago, so some things have shipped, and others are almost ready (like the why-run mode mentioned, will be in 10.14) http://www.youtube.com/watch?v=Lv89JG81-9M
[2012-07-17 20:53:43 -0400] HarvesterOfBeer: mhalligan: word
[2012-07-17 20:54:15 -0400] geekbri: I saw why_run when I was lurking in the 0.10.10 source
[2012-07-17 20:54:18 -0400] jtimberman: mhalligan: We have hired a tech writer who is working on documentation refactoring. I'm not directly involved in that so I'm not sure what the status is.
[2012-07-17 20:54:23 -0400] geekbri: gobblin up all yer codez
[2012-07-17 20:54:39 -0400] mhalligan: jtimberman: this would certainly give you an advantage over puppet. puppet's websites are an incredible shitshow
[2012-07-17 20:55:29 -0400] eous: lol
[2012-07-17 20:56:25 -0400] Jay_Levitt: If I create my roles by adding e.g. roles/base.rb to my chef-repo, will I always have to "knife role from file" them all, or will I be able to have them propagate into Hosted Chef somehow? </noob>
[2012-07-17 20:57:04 -0400] miah: knife role from file
[2012-07-17 20:57:12 -0400] miah: unless you use a CI process that does that for you
[2012-07-17 20:57:24 -0400] erratic: miah <3
[2012-07-17 20:57:31 -0400] erratic: I do use that
[2012-07-17 20:57:36 -0400] erratic: I use the webui tool too
[2012-07-17 20:57:41 -0400] Jay_Levitt: ok, so that's just a convenient convention for me, and there's no magic in it
[2012-07-17 20:57:50 -0400] erratic: usually knife role from file *
[2012-07-17 20:58:37 -0400] hoover_damm: using chef-repo + knife + webui = failure
[2012-07-17 20:58:45 -0400] erratic: why
[2012-07-17 20:58:46 -0400] hoover_damm: too many ways to change the same data
[2012-07-17 20:59:06 -0400] hoover_damm: you'll have someone change it and chef-repo will be out of sync
[2012-07-17 20:59:08 -0400] doomviking: probably a rake task to do them all, as well
[2012-07-17 20:59:08 -0400] HarvesterOfBeer: options are good, but there needs to be some best practices and consistency
[2012-07-17 20:59:15 -0400] HarvesterOfBeer: the other way lies perl
[2012-07-17 20:59:15 -0400] erratic: I use chef backup to maintain concurrency between whats stored in chef server and my chef-repo
[2012-07-17 20:59:16 -0400] hoover_damm: and then it's not so easy to understand why x is y
[2012-07-17 20:59:19 -0400] miah: webui is a bad way to manage roles unless you have a process that sucks down the changes and populates git
[2012-07-17 20:59:23 -0400] mhalligan: best practices? but, but, this is devops.
[2012-07-17 20:59:28 -0400] HarvesterOfBeer: lol
[2012-07-17 20:59:35 -0400] hoover_damm: mhalligan, you mean do whatever you want?
[2012-07-17 20:59:36 -0400] erratic: https://github.com/pyrat/chef-backup
[2012-07-17 20:59:44 -0400] miah: ya
[2012-07-17 20:59:49 -0400] mhalligan: hoover_damm: seems to be the spirit of the thing
[2012-07-17 20:59:56 -0400] erratic: actually thats not the right thing
[2012-07-17 20:59:58 -0400] erratic: one sec
[2012-07-17 20:59:59 -0400] geekbri: I'm still not clear if devops is a job title, job responsibility, methodology, or new internet buzz word
[2012-07-17 21:00:17 -0400] hoover_damm: mhalligan, basically you'll find several types of people.  People who think they know it all but secretly question everything
[2012-07-17 21:00:21 -0400] HarvesterOfBeer: geekbri: yes
[2012-07-17 21:00:21 -0400] Jay_Levitt: geekbri: thank god, I thought it was just me
[2012-07-17 21:00:27 -0400] doomviking: this is all you need to know about devops: https://twitter.com/DEVOPS_BORAT
[2012-07-17 21:00:35 -0400] hoover_damm: mhalligan, those are the funnest type because they'll do whatever they can to prove they are right
[2012-07-17 21:00:37 -0400] geekbri: Devops borat is my god.
[2012-07-17 21:00:43 -0400] mhalligan: doomviking ++
[2012-07-17 21:00:44 -0400] hoover_damm: mhalligan, including ring around the head
[2012-07-17 21:00:57 -0400] erratic: https://gist.github.com/03fa4b6a64ab9c9b85f3
[2012-07-17 21:01:00 -0400] erratic: ^ backup script
[2012-07-17 21:01:07 -0400] hoover_damm: mhalligan, then you ahve those who pull together a bunch of data from multiple places to make a cohesive thought
[2012-07-17 21:01:12 -0400] hoover_damm: mhalligan, those are pretty neat
[2012-07-17 21:01:24 -0400] hoover_damm: because you can look at a puzzle that is an answer
[2012-07-17 21:01:50 -0400] hoover_damm: there's others beyond that but :) the mutt devops
[2012-07-17 21:01:51 -0400] hoover_damm: are fun
[2012-07-17 21:01:54 -0400] Jay_Levitt: erratic: thanks.  It's confusing that recipes in chef-repo are real recipes that get run, but roles (which are collections of recipes) are not
[2012-07-17 21:02:08 -0400] geekbri: cohesive thought? I hate it already
[2012-07-17 21:02:30 -0400] miah: a role is not a recipe. its a definition.
[2012-07-17 21:02:33 -0400] hoover_damm: geekbri, exactly if someone takes 40 different ideas to piece it together into 1 working thought... you just don't know what to say
[2012-07-17 21:02:38 -0400] hoover_damm: maybe run?
[2012-07-17 21:02:44 -0400] erratic: just think of a role as a fake node
[2012-07-17 21:02:51 -0400] erratic: nodes and roles both have runlists
[2012-07-17 21:02:59 -0400] miah: well, a node can belong to multiple roles too
[2012-07-17 21:03:00 -0400] erratic: roles can be applied to nodes
[2012-07-17 21:03:01 -0400] hoover_damm: no please don't think of roles as a fake node
[2012-07-17 21:03:28 -0400] hoover_damm: http://wiki.opscode.com/display/chef/Roles
[2012-07-17 21:03:34 -0400] Jay_Levitt: I'm sure the minute I get to my second node, I'll also find it confusing that I don't have nodes defined in here either..
[2012-07-17 21:03:41 -0400] erratic: hoover_damm I dont get why its confusing, it makes perfect sense to me xD
[2012-07-17 21:04:02 -0400] hoover_damm: erratic, you apply incorrect thoughts and call them correct
[2012-07-17 21:04:19 -0400] erratic: ok
[2012-07-17 21:04:32 -0400] miah: to quoteth our lord John Allspaw;
[2012-07-17 21:04:33 -0400] miah: "The best way to attack the problem is to divide and conquer. Services (collections of related software and configurations) are the atoms, and roles (the types of machines in your infrastructure) are the molecules. Once you have a robust set of services defined, it will be easy to shuffle existing services into alternative combinations to serve new roles or to split an existing role into more specialized configurations.
[2012-07-17 21:04:34 -0400] hoover_damm: erratic, and remember chef is a learning curve... what you say today will change tomorrow
[2012-07-17 21:05:04 -0400] hoover_damm: miah, that's the hardest people to do for some
[2012-07-17 21:05:16 -0400] hoover_damm: miah, but yes you have to describe everything
[2012-07-17 21:05:20 -0400] miah: yup
[2012-07-17 21:05:21 -0400] hoover_damm: miah, once you describe it... it's all malluable
[2012-07-17 21:05:28 -0400] hoover_damm: i never got that 2 years ago
[2012-07-17 21:05:29 -0400] hoover_damm: i do now
[2012-07-17 21:05:32 -0400] Jay_Levitt: so judging by that backup script - the true knowledge of nodes, roles and data_bags lives on the chef-server, but true knowledge of everything else lives in chef-repo?
[2012-07-17 21:05:46 -0400] geekbri: If anybody is going to chef-boston meetup, see you there in a bit!!!
[2012-07-17 21:05:59 -0400] Jay_Levitt: geek, when/where?
[2012-07-17 21:06:01 -0400] erratic: just think of chef-repo as a firmware
[2012-07-17 21:06:04 -0400] miah: Jay_Levitt: just because its in git that doesn't mean chef knows about it
[2012-07-17 21:06:12 -0400] geekbri: Jay_Levitt: http://www.meetup.com/Chef-BOSTON/events/69335812/
[2012-07-17 21:06:13 -0400] erratic: and the server as a microcontroller
[2012-07-17 21:06:16 -0400] erratic: lol
[2012-07-17 21:06:16 -0400] miah: you still have to upload those changes.
[2012-07-17 21:06:20 -0400] geekbri: (today at 6pm, bright cove offices)
[2012-07-17 21:06:32 -0400] Jay_Levitt: damn, can't make it.. next time tho :)
[2012-07-17 21:06:36 -0400] javawidget: Hey guys... quiestion: I've noticed that chef-client does a chef run everytime dhclient renews its address.. - normal behaviour?
[2012-07-17 21:06:39 -0400] Jay_Levitt: (plus those chairs hurt my back)
[2012-07-17 21:07:01 -0400] geekbri: Wish me luck! :-p
[2012-07-17 21:07:14 -0400] javawidget: and if so, what do I do about software deploy recipes?
[2012-07-17 21:07:19 -0400] Jay_Levitt: good luck!
[2012-07-17 21:07:34 -0400] Jay_Levitt: miah: but that's not true for recipes, right?
[2012-07-17 21:08:02 -0400] doomviking: its true for cookbooks
[2012-07-17 21:08:04 -0400] miah: Jay_Levitt: uh no. you still need to upload cookbooks when you've made changes to them. chef-server is completely unaware of your git repository.
[2012-07-17 21:08:05 -0400] doomviking: painfully true
[2012-07-17 21:08:31 -0400] erratic: anyone here use librarian?
[2012-07-17 21:08:45 -0400] cwj: erratic: i do
[2012-07-17 21:08:53 -0400] cwj: i know several others do as well
[2012-07-17 21:09:07 -0400] Jay_Levitt: oh, I didn't realize that. maybe my problem is that knife hides *some* of the magic with knife site install, and I don't know which half is magic
[2012-07-17 21:09:23 -0400] erratic: I'm trying to figure out how its helpful
[2012-07-17 21:10:07 -0400] miah: its helpful if you store your cookbooks in their own repo's (a good pratice), and use 3rd party cookbooks
[2012-07-17 21:10:10 -0400] cwj: erratic: well my previous method of maintaining our chef repo involved a lot of per-cookbook branches and quickly became a total nightmare
[2012-07-17 21:10:26 -0400] miah: librarian is alot like bundler
[2012-07-17 21:10:31 -0400] cwj: librarian made it easy to break cookbooks out into their own repo, which feels much more natural
[2012-07-17 21:10:34 -0400] miah: cwj: yup, exactly.
[2012-07-17 21:10:43 -0400] erratic: gotcha
[2012-07-17 21:10:55 -0400] cwj: easier to pull in other people's cookbooks, easier to publish/share my own
[2012-07-17 21:11:11 -0400] miah: i think the Readme.md in librarian explains it pretty clearly now
[2012-07-17 21:11:21 -0400] cwj: easier to fork opscode cookbooks and fix stuff
[2012-07-17 21:11:38 -0400] miah: i dont allow 'site-cookbooks' in my chef-repo
[2012-07-17 21:11:50 -0400] cwj: yeah i have also ditched site-cookbooks
[2012-07-17 21:12:04 -0400] dwhsix: has anybody thought about a chef server that integrates directly w/ git in some way?
[2012-07-17 21:12:19 -0400] cwj: dwhsix: some people have published git post-recieve hooks which upload to chef server
[2012-07-17 21:12:38 -0400] dwhsix: cwj: interesting
[2012-07-17 21:12:38 -0400] erratic: dwhsix that backup script that I posted earlier? thats one way to do it
[2012-07-17 21:12:56 -0400] cwj: i think thats probably the right way to approach it, since not everyone uses git as their revision control system
[2012-07-17 21:13:02 -0400] erratic: just make a cron job and use git hooks or something if you need more concurrency than what I cron would offer
[2012-07-17 21:13:12 -0400] erratic: wait
[2012-07-17 21:13:13 -0400] dwhsix: I guess I was (idly) thinking of something where the chef server had explicit knowledge of the source control system
[2012-07-17 21:13:19 -0400] erratic: just use cron.
[2012-07-17 21:13:24 -0400] dwhsix: havn't really thought it thru at all
[2012-07-17 21:13:41 -0400] erratic: dwhsix https://gist.github.com/03fa4b6a64ab9c9b85f3
[2012-07-17 21:14:32 -0400] erratic: https://gist.github.com/df75c6ddb9c220cdce91
[2012-07-17 21:14:46 -0400] dwhsix: erratic: interesting that snapshots your chef server?
[2012-07-17 21:14:51 -0400] dwhsix: (the first gist)
[2012-07-17 21:14:57 -0400] erratic: check out the second gist
[2012-07-17 21:15:02 -0400] erratic: that runs the first gist from cron
[2012-07-17 21:15:07 -0400] dwhsix: ah, I see the rest
[2012-07-17 21:15:10 -0400] dwhsix: kewl
[2012-07-17 21:15:12 -0400] erratic: and I just have a second remote
[2012-07-17 21:15:27 -0400] erratic: don't overwrite origin you need that to install site cookbooks if you use them
[2012-07-17 21:15:32 -0400] erratic: I guess some people don't use them at all
[2012-07-17 21:15:53 -0400] dwhsix: just started using 'em, don't grok 'em yet, which is probably dangerous
[2012-07-17 21:16:17 -0400] erratic: well wait maybe site cookbooks are something other than community cookbooks
[2012-07-17 21:16:21 -0400] erratic: I assume thats the same thing..
[2012-07-17 21:16:30 -0400] Jay_Levitt: dwhsix: That's what I did before chef; I used git/github to push changes to my idempotent config script over to the server.
[2012-07-17 21:16:32 -0400] dwhsix: knife cookbook site install foo
[2012-07-17 21:16:46 -0400] dwhsix: does git magical stuff
[2012-07-17 21:17:00 -0400] mhalligan: is rake install deprecated or frowned upon? I've had a couple of people tell me this lately
[2012-07-17 21:17:17 -0400] cwj: mhalligan: i think it is deprecated in favor of using knife
[2012-07-17 21:17:18 -0400] Jay_Levitt: I would very much like to be able to version control my actual chef config, not a repo with many elements that I may or may not have remembered to push up to chef server
[2012-07-17 21:17:24 -0400] btm: mhalligan: rake is deprecated in favor of knife sub-commands.
[2012-07-17 21:18:18 -0400] HarvesterOfBeer: dwhsix: it would be nice if the magic was documented
[2012-07-17 21:18:28 -0400] btm: mhalligan: http://tickets.opscode.com/browse/CHEF-2353
[2012-07-17 21:18:37 -0400] dwhsix: HarvesterOfBeer: -whew- it's not just me
[2012-07-17 21:19:05 -0400] dwhsix: I suspect it's not that magic, just a level of git-fu I haven't yet achieved
[2012-07-17 21:19:23 -0400] Jay_Levitt: in fact, "knife cookbook site install" isn't even documented in "knife cookbook help"
[2012-07-17 21:19:44 -0400] mhalligan: man knife cookbook site install is all over the web documentation.
[2012-07-17 21:20:05 -0400] Jay_Levitt: yep
[2012-07-17 21:20:05 -0400] mhalligan: so it's better to just go grab cookbooks from github and clone them?
[2012-07-17 21:20:28 -0400] Jay_Levitt: knife cookbook site install != rake install
[2012-07-17 21:20:33 -0400] Jay_Levitt: (I assume?!)
[2012-07-17 21:21:09 -0400] cwj: thats correct
[2012-07-17 21:21:16 -0400] paulmooring: Jay_Levitt: that's right anything using knife is the suggested way
[2012-07-17 21:21:23 -0400] paulmooring: only using the rake command is deprecated
[2012-07-17 21:21:25 -0400] mhalligan: jay_levitt: knife cookbook site install downloads community plugins and uploads them to your chef server I think
[2012-07-17 21:21:44 -0400] cwj: mhalligan: there is a github plugin for knife if you want to install cookbooks directly from github without making the leap to librarian
[2012-07-17 21:21:52 -0400] paulmooring: mhalligan: it actually downloads them w/ dependencies locally and sets up git branchs
[2012-07-17 21:22:07 -0400] paulmooring: you still have to `knife cookbook upload` them to the server
[2012-07-17 21:22:19 -0400] mhalligan: paulmooring: that sounds awesome. why would that be deprecated?
[2012-07-17 21:22:24 -0400] paulmooring: It's not
[2012-07-17 21:22:29 -0400] cwj: https://github.com/websterclay/knife-github-cookbooks
[2012-07-17 21:22:41 -0400] cwj: paulmooring is describing the behavior of 'knife cookbook site install foo'
[2012-07-17 21:22:47 -0400] paulmooring: `knife cookbook site install` is "the right way"
[2012-07-17 21:22:47 -0400] cwj: not the behavior of rake install
[2012-07-17 21:22:51 -0400] erratic: is it worth switching from mysql to postgres
[2012-07-17 21:24:10 -0400] mhalligan: oh I see. the site-cookbooks discussion != knife cookbook site install discussion
[2012-07-17 21:24:51 -0400] miah: i never use knife cookbook site install
[2012-07-17 21:25:38 -0400] erratic: yeah it'll overwrite stuff
[2012-07-17 21:25:54 -0400] miah: im not worried about that, because like i said. i use librarian.
[2012-07-17 21:26:38 -0400] erratic: hmm
[2012-07-17 21:27:23 -0400] hoover_damm: the world is out to get you, time to unplug
[2012-07-17 21:27:41 -0400] erratic: not funny
[2012-07-17 21:27:45 -0400] erratic: I didnt take my meds today
[2012-07-17 21:28:10 -0400] jtimberman: mhalligan: the rake tasks were written before knife, and now knife has that functionality covered (knife cookbook upload -a)
[2012-07-17 21:29:02 -0400] mhalligan: jtimberman: rake also had some validation/lint-like tasks right? were those ported or decided to be better left to your own processes?
[2012-07-17 21:29:24 -0400] jtimberman: mhalligan: there was a syntax check task, but that is done by knife cookbook upload.
[2012-07-17 21:29:37 -0400] mhalligan: ah sweet.
[2012-07-17 21:29:38 -0400] jtimberman: its actually 'knife cookbook test', which is a library called by upload.
[2012-07-17 21:29:55 -0400] miah: aka 'ruby -c'
[2012-07-17 21:29:57 -0400] jtimberman: we don't hae a built in linter, though foodcritic is awesome for that.
[2012-07-17 21:30:09 -0400] miah: knife-spork + foodcritic == win
[2012-07-17 21:30:23 -0400] jtimberman: i wrote a replacement plugin for knife cookboook test that will optionally do lint checking (with foodcritic)
[2012-07-17 21:30:31 -0400] jtimberman: its basically just in a gist, not released :)
[2012-07-17 21:30:57 -0400] HarvesterOfBeer: jtimberman: nice!
[2012-07-17 21:31:14 -0400] miah: fwiw. https://github.com/jonlives/knife-spork
[2012-07-17 21:32:05 -0400] JasonBox: hrm, what cloud service based monitoring and metrics tools are people using to monitor cloud systems?
[2012-07-17 21:32:06 -0400] erratic: lol
[2012-07-17 21:33:22 -0400] erratic: JasonBox I'm using munin ?
[2012-07-17 21:33:27 -0400] jtimberman: JasonBox: i know of efforts around boundary, circonous, datadog, newrelic.
[2012-07-17 21:33:34 -0400] jtimberman: probably loads of others.
[2012-07-17 21:33:37 -0400] jtimberman: munin4L
[2012-07-17 21:33:57 -0400] erratic: jtimberman its not bad
[2012-07-17 21:34:12 -0400] erratic: I hear the new one has interactive graphs
[2012-07-17 21:34:18 -0400] erratic: that you can do zooming with and stuff
[2012-07-17 21:34:19 -0400] jtimberman: its the last thing i really used much :)
[2012-07-17 21:34:43 -0400] JasonBox: erratic: Yeah, was looking for something that is SaaS rather than running monitors myself  internally
[2012-07-17 21:34:50 -0400] erratic: ohhh
[2012-07-17 21:34:55 -0400] erratic: ubuntu has one
[2012-07-17 21:34:59 -0400] erratic: we thought about using it
[2012-07-17 21:35:02 -0400] erratic: but its super expensive
[2012-07-17 21:35:03 -0400] jperry2: libraries should have access to attributes set in an attributes file right?
[2012-07-17 21:35:08 -0400] jtimberman: jperry2: no
[2012-07-17 21:35:11 -0400] erratic: I'm not sure how cool it is either
[2012-07-17 21:35:15 -0400] jtimberman: jperry2: they're loaded before attributes files are loaded.
[2012-07-17 21:35:17 -0400] jtimberman: anatomy?
[2012-07-17 21:35:17 -0400] bawt: anatomy is http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-07-17 21:35:19 -0400] erratic: its called ubuntu landscape or something?
[2012-07-17 21:35:25 -0400] jtimberman: jperry2: that page has the load order listed
[2012-07-17 21:35:29 -0400] jperry2: crap
[2012-07-17 21:35:30 -0400] HarvesterOfBeer: erratic: yeah
[2012-07-17 21:35:35 -0400] doomviking: <--- hates munin less than cacti
[2012-07-17 21:35:36 -0400] Bonkers: if I install a gem with gem_package, how can I figure out where the binaries got installed to? it depends on where ruby is installed
[2012-07-17 21:35:38 -0400] doomviking: or ganglia
[2012-07-17 21:35:48 -0400] jperry2: @jtimberman, so I should pass that then to a method
[2012-07-17 21:35:49 -0400] JasonBox: jtimberman: thanks
[2012-07-17 21:35:50 -0400] HarvesterOfBeer: doomviking: word
[2012-07-17 21:35:52 -0400] stompyj: are there documentation archives for older versions of chef?
[2012-07-17 21:35:53 -0400] erratic: doomviking yeah snmp sounds like a pain in the ass to deal with
[2012-07-17 21:35:58 -0400] jperry2: the attribute that is
[2012-07-17 21:36:11 -0400] doomviking: f'ing multicast.
[2012-07-17 21:36:16 -0400] erratic: and I'll bet the zenoss one is really heavy
[2012-07-17 21:36:50 -0400] jtimberman: stompyj: not really. wikis aren't spectacular for that, and we never built in versioning to the pages.
[2012-07-17 21:37:03 -0400] stompyj: jtimberman: fair enough
[2012-07-17 21:37:24 -0400] stompyj: how insane would it be to try and upgrade from 0.7.16, to current?
[2012-07-17 21:37:26 -0400] jperry2: jtimberman: is there a better alternative to libraries?
[2012-07-17 21:37:27 -0400] stompyj: I assume there'd be much breakage?
[2012-07-17 21:37:32 -0400] jperry2: for this use case
[2012-07-17 21:37:53 -0400] cwj: Bonkers: i think 'gem which foo' will give you some idea
[2012-07-17 21:38:06 -0400] cwj: but it doesnt point you directly to any binaries installed by the gem, etc
[2012-07-17 21:39:30 -0400] Bonkers: cwj, thanks, that'll probably get me closer at least
[2012-07-17 21:40:15 -0400] cwj: np
[2012-07-17 21:40:18 -0400] erratic: jtimberman I hear of some people using nagios and munin together
[2012-07-17 21:40:30 -0400] erratic: my experience with nagios is limited but I'm not in any hurry to jump into it either
[2012-07-17 21:40:56 -0400] jordane: erratic: Yeah, I know a fair number of people who use nagios for alerts and munin for data aggregation.
[2012-07-17 21:41:08 -0400] jtimberman: jperry2: i don't know your use case.
[2012-07-17 21:41:10 -0400] jordane: There are also a few projects centered around adding data aggregation to nagios.
[2012-07-17 21:41:18 -0400] jtimberman: jperry2: you could ship a ruby gem, install that in a recipe and use it, i guess.
[2012-07-17 21:41:22 -0400] erratic: its just more shit on top of shit unless it can do something really useful for me like telling me when my servers are running out of diskspace but I already have something setup that sends me syslog messages via smtp to a single email
[2012-07-17 21:41:30 -0400] erratic: so I'm thinkin I might use that instead if I can
[2012-07-17 21:42:09 -0400] doomviking: nagios / pingdom -> pagerduty
[2012-07-17 21:42:09 -0400] erratic: at least I know postfix and rsyslog well enough
[2012-07-17 21:42:33 -0400] jperry2: jtimberman: I have a module -> module I wanted to use from another cookbook so for right now I copied the code out and put it into a library  The file was part of a chef_handler
[2012-07-17 21:42:42 -0400] jperry2: living under chef_handler/files/default/handlers/
[2012-07-17 21:42:51 -0400] HarvesterOfBeer: pagerduty is worthy especially if you have multiple folks on rotation
[2012-07-17 21:42:57 -0400] cwj: gosh i love pagerduty
[2012-07-17 21:43:15 -0400] cwj: at first i was like "why would i pay $18/user/month for this"
[2012-07-17 21:43:27 -0400] cwj: now i am like "i gladly pay $18/user/month for this"
[2012-07-17 21:43:43 -0400] HarvesterOfBeer: *ding*
[2012-07-17 21:43:49 -0400] doomviking: key for me was the robot call after email/sms invariable failed to wake me up
[2012-07-17 21:44:09 -0400] HarvesterOfBeer: lol, yeah escalation tree is handy too
[2012-07-17 21:44:23 -0400] mhalligan: cwj: it's frustrating having to justify the cost benefit of services like pagerduty or hosted-chef
[2012-07-17 21:44:24 -0400] HarvesterOfBeer: i just set the ringer on my phone to stun and it usually works
[2012-07-17 21:44:29 -0400] mhalligan: but they rock
[2012-07-17 21:44:32 -0400] HarvesterOfBeer: for sure
[2012-07-17 21:44:33 -0400] doomviking: heh
[2012-07-17 21:44:40 -0400] erratic: hmmmm
[2012-07-17 21:44:49 -0400] cwj: mhalligan: yeah, no doubt
[2012-07-17 21:45:07 -0400] HarvesterOfBeer: pagerduty is easy, especially if the person who holds the purse strings either has had to juggle who is on call or has gotten egg on their face because somebody didn't respond
[2012-07-17 21:45:07 -0400] doomviking: my iphone doesnt yet have the "send electric shock" function.
[2012-07-17 21:45:28 -0400] mhalligan: (though hosted-chef's pricing sucks when you're just using it to setup temporary dev vms)
[2012-07-17 21:45:56 -0400] mhalligan: pagerduty certainly makes nagios suck an order of magnitude less
[2012-07-17 21:46:02 -0400] jtimberman: mhalligan: as long as you're under 5 nodes its free :)
[2012-07-17 21:46:04 -0400] HarvesterOfBeer: ayup
[2012-07-17 21:46:39 -0400] mhalligan: jtimberman: hah, well I'm just being sneaky and adding nodes on boot, then deleting on shutdown ;)
[2012-07-17 21:47:02 -0400] mhalligan: rather than having another 4 hour discussion about how expensive it is
[2012-07-17 21:48:23 -0400] cwj: yeah it would be nice if i could have all my nodes ending in '*-vagrant' ignored when it comes billing time ;)
[2012-07-17 21:50:00 -0400] balexander: I'm setting up a Vagrant project using Chef (0.10.8) and am getting this error "FATAL: NameError: python_pip[virtualenv] (python::virtualenv line 23) had an error: NameError: uninitialized constant Mixlib::ShellOut" from opscode's python cookbook
[2012-07-17 21:50:07 -0400] mhalligan: cwj: definitely
[2012-07-17 21:50:30 -0400] erratic: there used to be this real simple site monitoring tool that basically just pinged sites and would send out notifications when the site was down
[2012-07-17 21:50:32 -0400] balexander: is this just a matter of gem installing mixlib-shellout?
[2012-07-17 21:50:40 -0400] erratic: donno what it was called
[2012-07-17 21:50:46 -0400] mhalligan: our plan currently is to move to OS chef server when we hit 50 nodes in a couple months
[2012-07-17 21:51:31 -0400] mhalligan: we'll be at 200 a month afterwards and apparently saving $7k/year is more important than focusing on unsolved problems
[2012-07-17 21:51:42 -0400] btm: balexander: http://tickets.opscode.com/browse/COOK-1282
[2012-07-17 21:52:56 -0400] balexander: thanks btm, do you know why it wasn't merged in?
[2012-07-17 21:56:25 -0400] jtimberman: balexander: see my query to justin huff, which is from a a month ago, he only replied today
[2012-07-17 21:56:26 -0400] mhalligan: apparently rackspace tech support doesn't like it when you tell them that your mom can provision nodes faster than their api
[2012-07-17 21:57:13 -0400] karsten: mhalligan: But is it true?
[2012-07-17 21:58:04 -0400] yfeldblum: mhalligan, how long? 5 minutes?
[2012-07-17 21:58:18 -0400] btm: balexander: its in the queue for cook code review. Velocity Conference put that a bit behind.
[2012-07-17 21:58:20 -0400] mhalligan: yfeldblum: hahaha. 5 minutes would be lovely. usually it's 12-15
[2012-07-17 21:58:22 -0400] mhalligan: sometiems 30
[2012-07-17 21:58:34 -0400] yfeldblum: mhalligan, what size?
[2012-07-17 21:58:41 -0400] mhalligan: but my mom could run myec2 scripts and provision in about 60 seconds
[2012-07-17 21:58:57 -0400] mhalligan: yfeldblum: the smallest node, then the 4gb and 8gbs are the only ones I've tested against
[2012-07-17 21:59:13 -0400] yfeldblum: mhalligan, what times? rackspace's peak times or trough times?
[2012-07-17 21:59:40 -0400] mhalligan: rackspace is just suffering from being a sales-focused organization trying to switch to a technology-focused organization.
[2012-07-17 21:59:49 -0400] mhalligan: yfeldblum: trough times?
[2012-07-17 22:00:34 -0400] mhalligan: yfeldblum: it doesn't matter really. i've been having the same experience for the past five months of working with chef & rackspace, I'm sure I've tested at 2am, 2pm, and every time in-between
[2012-07-17 22:01:10 -0400] spokrandt: what is the best way to compare to files in a   only_if do    i would like to only run a definition if the two files differ
[2012-07-17 22:01:25 -0400] spokrandt: compare two files.. :>
[2012-07-17 22:01:50 -0400] mhalligan: ooh that one only took 14 minutes.
[2012-07-17 22:03:41 -0400] jtimberman: btm: chefconf, velocity, and a vacation ;)
[2012-07-17 22:03:44 -0400] itwasntandy: mhalligan: if you think rackspace's API is slow, you should try the azure api for provisioning linux vms...
[2012-07-17 22:04:13 -0400] cwj: spokrandt: http://ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-compare_file
[2012-07-17 22:04:18 -0400] jtimberman: mhalligan: we're so spoiled. used to take 15 minutes to uncrate a new server and rack it, if you were fast.
[2012-07-17 22:04:21 -0400] cwj: or similar
[2012-07-17 22:05:04 -0400] leocassarani: spokrandt, cwj: best to use #cmp as it will work on Ruby 1.8 as well
[2012-07-17 22:05:12 -0400] cwj: there you go
[2012-07-17 22:05:13 -0400] balexander: btm and jtimberman: thanks! the issue / pull request fixed the mixlib::shellout problem
[2012-07-17 22:05:17 -0400] mhalligan: jtimberman: hah, screw that. every comany where Ia actually had scale I buy a rack at a time and require them to give me a spreadsheet with mac addresses so that all I had to do was boot shit up
[2012-07-17 22:06:02 -0400] mhalligan: jtimberman: but nowdays if I had to do real hardware I would just buy servers with a hypervisor built in and deploy a snapshotted image and have chef catch up
[2012-07-17 22:06:28 -0400] mhalligan: ^jtimberman^itwasntandy
[2012-07-17 22:07:55 -0400] HarvesterOfBeer: mhalligan: yep! preconfigured with hypervisor is the ticket for bulk deploy
[2012-07-17 22:09:52 -0400] mhalligan: itwsantandy: I'm curios, how long does provisioning take on azure? on the same level of suckage at rackspace? or more?
[2012-07-17 22:10:16 -0400] HarvesterOfBeer: how about linode?
[2012-07-17 22:16:15 -0400] mhalligan: no experience with linode
[2012-07-17 22:17:08 -0400] erratic: http://www.youtube.com/watch?v=pAMrGHa7ubM
[2012-07-17 22:24:36 -0400] ryker: anyone know if I can safely use node attributes as a default value for a resource?  such as: attribute :myattribute, :kind_of => String, :default => node['cookbook_name']['myattribute']
[2012-07-17 22:25:15 -0400] ryker: in attributes/default.rb I have set['cookbook_name']['myattribute'] = 'something'
[2012-07-17 22:25:19 -0400] jtimberman: ryker: not necessarily, the attributes files are loaded after resources files
[2012-07-17 22:25:21 -0400] jtimberman: anatomy?
[2012-07-17 22:25:21 -0400] bawt: anatomy is http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-07-17 22:25:37 -0400] jtimberman: if you set the attribute on the node, or with a role, it might be ok
[2012-07-17 22:25:44 -0400] jtimberman: but its hard to rely on that.
[2012-07-17 22:26:34 -0400] ryker: ah, ok.  thx.  this makes sense then.  it seemed to be failing on new nodes, but worked on old nodes.  now i know why. :)
[2012-07-17 22:26:35 -0400] ryker: ty
[2012-07-17 22:26:53 -0400] hoover_damm: erratic, you know it's never too late to take your meds
[2012-07-17 22:27:39 -0400] erratic: lol
[2012-07-17 22:27:49 -0400] erratic: yes it is Im like 10 miles from my house
[2012-07-17 22:28:18 -0400] erratic: probably farther than that actually
[2012-07-17 22:28:27 -0400] erratic: sec
[2012-07-17 22:29:08 -0400] erratic: 15
[2012-07-17 22:29:51 -0400] erratic: http://tinyurl.com/85w6wfv
[2012-07-17 22:30:37 -0400] erratic: not going back home till the day is over lol
[2012-07-17 22:32:47 -0400] erratic: I wanna work somewhere cool where my place is like a floor or two above my office
[2012-07-17 22:34:49 -0400] erratic: actually no I dont want to work at all
[2012-07-17 22:34:53 -0400] erratic: that would be much better
[2012-07-17 22:35:26 -0400] hoover_damm: you live near 7-11?
[2012-07-17 22:35:45 -0400] erratic: you know the one?
[2012-07-17 22:35:49 -0400] erratic: heh
[2012-07-17 22:35:59 -0400] hoover_damm: I don't go there without some kind of ahem weapon
[2012-07-17 22:36:10 -0400] hoover_damm: had a friend who used to live in the neighborhood
[2012-07-17 22:36:17 -0400] hoover_damm: kept an AK-47 by his door
[2012-07-17 22:36:22 -0400] erratic: dude I go there wearing a dress at 12 oclock at night nobody messes with me
[2012-07-17 22:36:28 -0400] erratic: people try to sell me shit though
[2012-07-17 22:36:39 -0400] erratic: some guy tried to sell me a cd for 5 bucks last night when I went to get my slurpie
[2012-07-17 22:36:59 -0400] hoover_damm: well that specific spot is rather calm now
[2012-07-17 22:37:00 -0400] erratic: Im pretty sure what he meant was he was trying to sell me drugs
[2012-07-17 22:37:06 -0400] hoover_damm: used to be wild
[2012-07-17 22:37:18 -0400] erratic: hoover_damm I've lived near that 7-11 since 2007
[2012-07-17 22:37:22 -0400] erratic: several different places
[2012-07-17 22:37:26 -0400] c_t: Mean streets of... Shoreline?
[2012-07-17 22:37:34 -0400] erratic: shoreline lake forest park lake city
[2012-07-17 22:37:36 -0400] hoover_damm: basically
[2012-07-17 22:37:48 -0400] hoover_damm: it's the corner of shoreline, lake forrest park, lake city
[2012-07-17 22:37:49 -0400] erratic: the police wont touch it because nobody is sure whose jurisidiction it is
[2012-07-17 22:38:05 -0400] hoover_damm: you have a strip joint up the block
[2012-07-17 22:38:10 -0400] hoover_damm: and it quickly turns into bothell
[2012-07-17 22:38:19 -0400] erratic: hoover_damm I went up there the other night on a saturday around 2 and there was some chick in a truck that looked like she was about to die in the passenger seat
[2012-07-17 22:38:20 -0400] c_t: I guess 99 along there is kinda skeezy (per usual 99 standards)
[2012-07-17 22:38:21 -0400] hoover_damm: well kenmore then bothell
[2012-07-17 22:38:23 -0400] erratic: she looked so fucked up
[2012-07-17 22:38:46 -0400] hoover_damm: c_t, nah
[2012-07-17 22:38:48 -0400] HarvesterOfBeer: sounds classy  :-)
[2012-07-17 22:38:49 -0400] erratic: just like the look in her eyes was like whoa damn
[2012-07-17 22:38:57 -0400] hoover_damm: c_t, I grew up on the streets of Denver (Colfax)
[2012-07-17 22:39:04 -0400] erratic: lay off the dope for a minute or something
[2012-07-17 22:39:06 -0400] hoover_damm: the stuff in Seattle is so mild it's funny
[2012-07-17 22:39:11 -0400] c_t: indeed
[2012-07-17 22:39:17 -0400] c_t: I've only been spooked once in Seattle
[2012-07-17 22:39:23 -0400] erratic: hoover_damm ever been to chicago?
[2012-07-17 22:39:28 -0400] c_t: hoho
[2012-07-17 22:39:39 -0400] c_t: erratic: I was at a thing at the McCormick Center once
[2012-07-17 22:39:41 -0400] s1_: chicago is *rough* outside the nice areas
[2012-07-17 22:39:50 -0400] c_t: went out to find cigarettes one day
[2012-07-17 22:39:50 -0400] s1_: makes seattle look like pleasantville
[2012-07-17 22:39:54 -0400] c_t: got real interesting
[2012-07-17 22:40:00 -0400] erratic: chicago is prolly the worst in the us
[2012-07-17 22:40:01 -0400] s1_: that's not even the hood
[2012-07-17 22:40:14 -0400] c_t: s1_: isn't the hood about 5" away from it?
[2012-07-17 22:40:19 -0400] s1_: sure
[2012-07-17 22:40:24 -0400] s1_: go to the west side
[2012-07-17 22:40:25 -0400] c_t: I ended up getting some crackhead to take me to a kwiki-mart
[2012-07-17 22:40:26 -0400] s1_: or deep south side
[2012-07-17 22:40:28 -0400] erratic: I grew up down in little rock arkansas
[2012-07-17 22:40:29 -0400] s1_: then you in the REAL hood
[2012-07-17 22:40:34 -0400] erratic: used to go up to memphis
[2012-07-17 22:40:46 -0400] erratic: memphis is poppin
[2012-07-17 22:40:58 -0400] c_t: folks from Brooklyn assured me it was a pretty bad neighborhood
[2012-07-17 22:40:58 -0400] s1_: chicken joints, gangsters everywhere slinging drugs
[2012-07-17 22:43:47 -0400] doomviking: I was born a poor black child
[2012-07-17 22:44:53 -0400] s1_: sounds like the first sentence in a book
[2012-07-17 22:45:13 -0400] doomviking: its from a movie actually. anyway
[2012-07-17 22:45:29 -0400] s1_: i was close :)
[2012-07-17 22:49:26 -0400] erratic: s1_ yes, I lived in a place with bars on the windows more than once
[2012-07-17 22:49:55 -0400] erratic: gunshots? yeah so what
[2012-07-17 22:50:31 -0400] s1_: heh
[2012-07-17 22:50:47 -0400] s1_: chicago is a shitshow right now because of the gang wars.  5-10 people dead on every weekend, 20+ wounded is average
[2012-07-17 22:50:58 -0400] c_t: erratic, but your time in the state pen isn't really relevant
[2012-07-17 22:51:17 -0400] erratic: fuck no
[2012-07-17 22:51:45 -0400] erratic: I work with a dude with a spider web tattoo
[2012-07-17 22:51:51 -0400] erratic: I know what that shit is about
[2012-07-17 22:52:10 -0400] bbhoss: HarvesterOfBeer: you ever get your problem solved?
[2012-07-17 22:52:53 -0400] Majost: How does one use encrypted databags for populating values in templates?
[2012-07-17 22:52:55 -0400] HarvesterOfBeer: bbhoss: nope, still fighting with ruby and dependencies
[2012-07-17 22:53:40 -0400] bbhoss: shit, you are having nearly the exact same issues as me I think, I was hoping you'd figured it out :)
[2012-07-17 22:53:56 -0400] bbhoss: you're trying to run 1.9.3 bootstrap right?
[2012-07-17 22:54:30 -0400] cwj: key = Chef::EncryptedDataBagItem.load_secret(File.expand_path('/path/to/key')
[2012-07-17 22:54:52 -0400] cwj: secrets = Chef::EncryptedDataBagItem.load("somedatabag","someitem", key)
[2012-07-17 22:55:05 -0400] bbhoss: HarvesterOfBeer: ping if you didn't see
[2012-07-17 22:55:24 -0400] cwj: then you can pass secrets to a template using the variables attribute
[2012-07-17 22:55:27 -0400] Majost: cwj: can it inherit the value from the recipe?
[2012-07-17 22:56:06 -0400] Majost: cwj: I load the value in the recipe currently -- and want to avoid duplicating the same code if possible.
[2012-07-17 22:56:24 -0400] cwj: Majost: look at the 'variables' attribute of the template resource
[2012-07-17 22:56:26 -0400] cwj: http://wiki.opscode.com/display/chef/Resources#Resources-Template
[2012-07-17 22:57:08 -0400] HarvesterOfBeer: bbhoss: what I originally tried was installing a base 12.04 server, then ruby 1.9.x, then add the opscode PPA, and then ap-get install chef-server
[2012-07-17 22:57:24 -0400] bbhoss: HarvesterOfBeer: you are trying to install the server still?
[2012-07-17 22:57:32 -0400] Majost: cwj: Ah! Thanks! =)
[2012-07-17 22:57:34 -0400] cwj: Majost: e.g. variables({ :secrets => secrets })
[2012-07-17 22:57:38 -0400] HarvesterOfBeer: that failed because it was going to install ruby1.8 as well and I need 1.9.1+
[2012-07-17 22:57:43 -0400] HarvesterOfBeer: bbhoss: yeah
[2012-07-17 22:57:49 -0400] eous: rbenv for the win
[2012-07-17 22:57:52 -0400] cwj: or variables({ :foo_secret => secrets['foo'] })
[2012-07-17 22:58:08 -0400] spokrandt: I'm trying to do a number of resources in a sequence   remove from LB => undeploy a war => deploy a new war => add back to LB.  is this what definitions are for?
[2012-07-17 22:58:28 -0400] cwj: spokrandt: or a lwrp
[2012-07-17 22:58:36 -0400] bbhoss: HarvesterOfBeer: why do you need 1.9 on the chef server?
[2012-07-17 22:58:42 -0400] cwj: although that sounds like a rather complex one :)
[2012-07-17 22:59:01 -0400] cwj: a definition might work best
[2012-07-17 22:59:02 -0400] HarvesterOfBeer: the knife-windows plugin requires it
[2012-07-17 22:59:52 -0400] erratic: I wonder what these guys use for automation http://www.jetbrains.com/youtrack/
[2012-07-17 23:00:08 -0400] bbhoss: HarvesterOfBeer: knife is all clientside though right? why would the server need 1.9?
[2012-07-17 23:00:48 -0400] spokrandt: and it is ok to mix ruby and resources within a definition?
[2012-07-17 23:01:16 -0400] cwj: spokrandt: afaik yes, its the same as a recipe in that respect
[2012-07-17 23:02:04 -0400] bbhoss: HarvesterOfBeer: or are you trying to run the server on what you want to use as a client?
[2012-07-17 23:02:25 -0400] cwj: spokrandt: the apache cookbook has some pretty digestible examples of definitions
[2012-07-17 23:02:49 -0400] spokrandt: ok I'll go read   :>
[2012-07-17 23:04:10 -0400] HarvesterOfBeer: bbhoss: this could be my chef ignorance at workthe plugin is used to (among other things) remotely bootstrap windows clients
[2012-07-17 23:04:30 -0400] HarvesterOfBeer: whatever machine is running the plugin needs to have ruby 1.9.1+ on it
[2012-07-17 23:04:42 -0400] bbhoss: HarvesterOfBeer: right, but the plugin is a plugin for knife, not chef
[2012-07-17 23:04:51 -0400] HarvesterOfBeer: hmm
[2012-07-17 23:04:59 -0400] bbhoss: do you have a separate server and client?
[2012-07-17 23:05:12 -0400] HarvesterOfBeer: right now I'm just trying to get the server set up
[2012-07-17 23:05:28 -0400] HarvesterOfBeer: but, yes, I will have a separate workstation as well as a separate git server, etc
[2012-07-17 23:06:02 -0400] bbhoss: ok well just do gem install knife-windows or whatever on your workstation/client
[2012-07-17 23:06:24 -0400] bbhoss: shouldn't need to do it on the server unless you are running it on the server, which is atypical
[2012-07-17 23:06:26 -0400] HarvesterOfBeer: yeah, that makes sense. I'll give that a whirl
[2012-07-17 23:06:33 -0400] HarvesterOfBeer: cool, thanks
[2012-07-17 23:10:48 -0400] Majost: cwj: Sorry for the follow newb question; what would the value be defined in the template? node[:foo_secret]  ?
[2012-07-17 23:11:14 -0400] cwj: i believe it would be @foo_secret
[2012-07-17 23:12:55 -0400] Majost: and a member would be accessible? eg: @foo_secret["id"]
[2012-07-17 23:13:24 -0400] Jay_Levitt: After using "knife rackspace server create", shouldn't I be able to ssh to it? What might be wrong here? https://gist.github.com/dce961159c39b3f4411b
[2012-07-17 23:14:27 -0400] erratic: whaaaaaaaaaat
[2012-07-17 23:14:28 -0400] erratic: you can do that
[2012-07-17 23:14:29 -0400] erratic: dude
[2012-07-17 23:15:12 -0400] cwj: Majost: yeah
[2012-07-17 23:15:49 -0400] Majost: nice
[2012-07-17 23:15:59 -0400] erratic: Jay_Levitt can you point me to that knife plugin
[2012-07-17 23:16:02 -0400] erratic: or whatever
[2012-07-17 23:16:19 -0400] Jay_Levitt: https://github.com/opscode/knife-rackspace
[2012-07-17 23:17:36 -0400] doomviking: Jay_Levitt: my knife ssh usually requires something like "knife ssh 'role:base' "screen" -a ipaddress" or somesuch
[2012-07-17 23:17:40 -0400] behemphi: @Jay_Levitt I might have a work-around for you
[2012-07-17 23:17:56 -0400] behemphi: I make a host file entry for the server
[2012-07-17 23:18:15 -0400] behemphi: This is me naively hacking around, but it works
[2012-07-17 23:18:25 -0400] Jay_Levitt: ok, then dumb question: at that point, why wouldn't I just ssh directly to the box?
[2012-07-17 23:18:26 -0400] doomviking: knife-rackspace is cool
[2012-07-17 23:18:31 -0400] erratic: ya
[2012-07-17 23:19:03 -0400] behemphi: Sorry, I should say on the workstation where I issued the knife-rs cmd from is where I make the host entry
[2012-07-17 23:19:16 -0400] behemphi: 10.64.12.22 cars cars.feedmagnet.com
[2012-07-17 23:19:19 -0400] behemphi: by way of example
[2012-07-17 23:19:27 -0400] behemphi: brb
[2012-07-17 23:19:47 -0400] doomviking: I use it for multiple logins. knife ssh 'chef_environment:ding' "screen" -a ipaddress gets me a screen session with all nodes in the ding env
[2012-07-17 23:20:06 -0400] Jay_Levitt: oh! literally -a ipaddress
[2012-07-17 23:20:13 -0400] doomviking: indeed
[2012-07-17 23:20:29 -0400] Jay_Levitt: I thought you meant you typed in the ipaddress.  Gotcha, thanks
[2012-07-17 23:20:39 -0400] doomviking: oh yeah. sorry :)
[2012-07-17 23:20:54 -0400] erratic: I mean its not totally necesarry but its going to make
[2012-07-17 23:20:59 -0400] erratic: life alot easier
[2012-07-17 23:21:01 -0400] erratic: ty
[2012-07-17 23:21:53 -0400] erratic: Jay_Levitt you know what
[2012-07-17 23:21:58 -0400] erratic: we also use cloud load balancer
[2012-07-17 23:22:14 -0400] erratic: I wonder if theres a way to add a new LAMP role server to the load balancer chain
[2012-07-17 23:22:32 -0400] erratic: like I wonder if theres an api
[2012-07-17 23:22:38 -0400] erratic: obviously the cookbook doesn't support it
[2012-07-17 23:22:57 -0400] Jay_Levitt: ::shrug:: I'm only planning to be on rackspace for a few weeks
[2012-07-17 23:24:30 -0400] erratic: we use cloud servers loadbalancers and files
[2012-07-17 23:24:36 -0400] erratic: if you want
[2012-07-17 23:24:44 -0400] erratic: I made a a "cloudfuse" cookbook
[2012-07-17 23:24:50 -0400] erratic: for cloudfiles
[2012-07-17 23:24:51 -0400] doomviking: are the rs lbs api driven?
[2012-07-17 23:25:05 -0400] erratic: doomviking I hope so
[2012-07-17 23:25:08 -0400] erratic: Im gonna find out
[2012-07-17 23:25:23 -0400] doomviking: last I looked they were not, but that was about a year ago
[2012-07-17 23:26:58 -0400] erratic: well I mean
[2012-07-17 23:27:10 -0400] erratic: I need to figure out whether or nto thats too off in the weeds
[2012-07-17 23:27:24 -0400] erratic: I mean its really trivial to add an ip address through the web interface..
[2012-07-17 23:28:55 -0400] erratic: easy as possible though for the person after me
[2012-07-17 23:29:00 -0400] erratic: I may run away
[2012-07-17 23:30:22 -0400] doomviking: I instinctively hate anything I have to go enter into a web form.
[2012-07-17 23:30:49 -0400] doomviking: ok maybe thats a little bit of a broad generalization. but you know what I mean.
[2012-07-17 23:31:01 -0400] erratic: yes
[2012-07-17 23:31:20 -0400] erratic: I want this to be a "documentable" process
[2012-07-17 23:31:20 -0400] doomviking: do I hate it more than building my own load balancers? yes
[2012-07-17 23:31:26 -0400] erratic: few simple commands
[2012-07-17 23:31:28 -0400] bbhoss: everything has an API with capybara :)
[2012-07-17 23:31:44 -0400] erratic: doomviking well the plus side, I dont have to use rs lb
[2012-07-17 23:32:12 -0400] erratic: because I made the nginx cookbook spin up an lb for me and I have an override for my lamp servers that you specify the ip of the lb to allow connections via iptables
[2012-07-17 23:32:23 -0400] doomviking: cool
[2012-07-17 23:33:00 -0400] erratic: I use it in my testing environment
[2012-07-17 23:33:02 -0400] bbhoss: I actually have an LB role that runs haproxy. The haproxy config is generated by iterating over the application server roles and adding it
[2012-07-17 23:33:31 -0400] bbhoss: that's how the haproxy config works I think. I have nginx in front of unicorn and more
[2012-07-17 23:33:35 -0400] erratic: is haproxy better than nginx?
[2012-07-17 23:33:43 -0400] bbhoss: for load balancing, yeah
[2012-07-17 23:33:53 -0400] bbhoss: nginx is cool though, I put haproxy in front
[2012-07-17 23:34:27 -0400] bbhoss: "better" is subjective though, haproxy is designed to be a load balancer, nginx is general purpose, that's why I use it
[2012-07-17 23:34:36 -0400] erratic: yeah I was certain nginx was the way to go but I'm not really a sysadmin like I pretend to be
[2012-07-17 23:34:56 -0400] bbhoss: has a nice little admin interface and more to let you see your load being balanced, and the status of the backends
[2012-07-17 23:34:58 -0400] erratic: so I donno whats best or good I just read that it does load balancing and figured it out
[2012-07-17 23:35:12 -0400] erratic: nice
[2012-07-17 23:35:16 -0400] bbhoss: well if you want a real load balancer, definitely check out haproxy
[2012-07-17 23:35:21 -0400] erratic: maybe I'll try it then
[2012-07-17 23:37:20 -0400] doomviking: varnish will do it too, but choose your poison
[2012-07-17 23:42:03 -0400] timsmith: can anyone explain to me the use case for "pattern" in the service resource
[2012-07-17 23:44:49 -0400] cwj: i believe it is an alternative for services which lack their own 'status' command
[2012-07-17 23:50:30 -0400] erratic: cwj documentation ?
[2012-07-17 23:50:57 -0400] erratic: Im kinda curious what that is
[2012-07-17 23:51:00 -0400] cwj: http://wiki.opscode.com/display/chef/Resources#Resources-Service
[2012-07-17 23:51:08 -0400] erratic: http://wiki.opscode.com/display/chef/Resources
[2012-07-17 23:51:10 -0400] erratic: yes
[2012-07-17 23:51:14 -0400] erratic: was just about to say
[2012-07-17 23:51:16 -0400] erratic: I think I found it
[2012-07-17 23:51:16 -0400] erratic: lol
[2012-07-17 23:51:34 -0400] erratic: sorry about that
[2012-07-17 23:52:08 -0400] cwj: np
[2012-07-17 23:52:35 -0400] cwj: that resources wiki page gets enough play to earn a place in my bookmarks toolbar :)
[2012-07-17 23:52:55 -0400] erratic: yes I always forget about it
[2012-07-17 23:53:07 -0400] erratic: Ive been spending more time with chef lately
[2012-07-17 23:53:42 -0400] erratic: something I get used to is how to find everything eventually
[2012-07-17 23:58:38 -0400] erratic: hmm

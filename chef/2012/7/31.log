[2012-07-31 00:00:01 -0400] PRK_nz: hmmm, interesting
[2012-07-31 00:00:11 -0400] chip-: For instance, I want to use the Ark cookbook, which is on the cookbooks site at 0.0.11, but if I go looking around git, I only find version 0.0.10 tagged off what seems to be the main repo
[2012-07-31 00:00:19 -0400] chip-: And there's no links back to git from the cookbooks site.
[2012-07-31 00:00:37 -0400] cheeseplus: PRK_nz: the problem is that is also a paid product
[2012-07-31 00:00:45 -0400] PRK_nz: yea ;)
[2012-07-31 00:00:50 -0400] cheeseplus: and you still have to script everything yourself
[2012-07-31 00:00:59 -0400] cheeseplus: but it's a great framework with lots of plugins
[2012-07-31 00:01:11 -0400] javawidget: I often find it easier to write my own recipes...
[2012-07-31 00:01:27 -0400] javawidget: I'll reuse some of the super basic recipes...
[2012-07-31 00:01:41 -0400] javawidget: but some of the stuff in opscode is over the top complicated...
[2012-07-31 00:01:46 -0400] cheeseplus: javawidget: agreed, sometimes the existing recipes are more confusing than helpful
[2012-07-31 00:01:50 -0400] javawidget: and I'm a big fan of keeping it simple.
[2012-07-31 00:03:34 -0400] PRK_nz: I'm struggling to find a way to manage our code repo atm. We use a fork of the opscode IIS recipe because we didn't want it to install/reinstall IIS etc and now I've got to figure out how we can best move forward, maintaining our own forked repo
[2012-07-31 00:04:29 -0400] PRK_nz: because we don't work with fresh nodes of course :S
[2012-07-31 00:04:56 -0400] javawidget: did you start from the beginning and fork opscode's "chef-repo"
[2012-07-31 00:05:26 -0400] PRK_nz: I wasn't involved at that part but I'm sure our base would have started from the opscode chef repo
[2012-07-31 00:05:44 -0400] PRK_nz: but our IIS cookbook is forked from theirs
[2012-07-31 00:05:55 -0400] PRK_nz: so our Cheffile points to the fork
[2012-07-31 00:06:05 -0400] javawidget: so...
[2012-07-31 00:06:25 -0400] javawidget: you can use knife to download and install the cookbook into your own chef repo... instead of forking it...
[2012-07-31 00:06:35 -0400] rfe: why would jetty not starting? is that a known bug in the chef deb package?
[2012-07-31 00:06:50 -0400] javawidget: knife cookbook site install <cookbook>
[2012-07-31 00:07:06 -0400] karsten: rfe: a likely good place to start would be your jetty log.
[2012-07-31 00:07:12 -0400] PRK_nz: so would that allow me to modify the code while still getting upstream changes?
[2012-07-31 00:07:24 -0400] javawidget: Ah...
[2012-07-31 00:07:50 -0400] Jay_Levitt: PRK_nz: I seem to recall that the "github" gem makes it easy to pull upstream changes (and even others' pull requests) into your fork
[2012-07-31 00:08:09 -0400] PRK_nz: hmmm worth looking into
[2012-07-31 00:09:00 -0400] javawidget: http://wiki.opscode.com/display/chef/Managing+Cookbooks+With+Knife
[2012-07-31 00:09:16 -0400] javawidget: I definitely suggest taking a look there..
[2012-07-31 00:09:39 -0400] javawidget: but, yes.... sort of.
[2012-07-31 00:10:03 -0400] rfe: karsten: I just installed chef-server using apt-get. it doesn't start at all so there is no log file in /var/log/jetty
[2012-07-31 00:10:06 -0400] PRK_nz: my current dilemma is ohai has stopped reporting the ipaddress attribute of 3 random nodes
[2012-07-31 00:10:22 -0400] javawidget: knife will create a branch that contains the pristine copy of the code to track upstream changes.
[2012-07-31 00:10:39 -0400] Jay_Levitt: He's already using librarian though.
[2012-07-31 00:10:43 -0400] PRK_nz: and near identical node in another cluster doesn't have issues
[2012-07-31 00:11:30 -0400] Jay_Levitt: (right?)
[2012-07-31 00:11:55 -0400] PRK_nz: correct
[2012-07-31 00:12:09 -0400] Jay_Levitt: I'm pretty sure if you're using librarian, you don't want to use knife cookbook site install..
[2012-07-31 00:13:04 -0400] PRK_nz: from what I understand, all contents in /cookbooks are not part of our repo, and defined in Cheffile. Only /site-cookbooks are in our repo
[2012-07-31 00:13:29 -0400] rfe: karsten:  this is what i see  http://pastebin.com/jxuc91WH   it looks like all the services are running, but i dont feel comfortable when i see "fail"msg
[2012-07-31 00:13:44 -0400] PRK_nz: and hence when we didn't want a feature from upstream, we forked and changed Cheffile
[2012-07-31 00:19:38 -0400] cakehero: Does anyone know if I can get access to provider variables / resource variables from within a resource (I'm using the application resource and I want to grab the revision hash from giit)
[2012-07-31 00:33:03 -0400] julienphalip: josephholsten: This seems to work well: http://dpaste.com/778298/
[2012-07-31 01:33:38 -0400] steveh7: Hello everyone. Quick question if I may just barge in here: How can I establish the version number of a package that is installed by a Chef provider within a recipe?
[2012-07-31 01:34:24 -0400] steveh7: e.g. I'm installing a Homebrew package (http://community.opscode.com/cookbooks/homebrew) that requires additional action once the bare package is installed, and I need to know the version number to symlink to the appropriate place
[2012-07-31 01:43:53 -0400] cheeseplus: steveh7: Chef doesn't exactly have knowledge of the version of a package but I'm sure brew or the package itself could be queried and the result parsed
[2012-07-31 01:44:09 -0400] cwj: brew really sucks at that actually
[2012-07-31 01:44:15 -0400] cheeseplus: you could push that version info back into a chef attribute though
[2012-07-31 01:44:16 -0400] cwj: at least last time i tried to use it
[2012-07-31 01:44:36 -0400] cheeseplus: I'd just do "program -v" and parse it
[2012-07-31 01:44:41 -0400] cheeseplus: old fashioned style
[2012-07-31 01:44:42 -0400] steveh7: yep, the homebrew provider has a protected method to do just that, but I'm not sure how to access the class instance to get at it
[2012-07-31 01:45:00 -0400] cheeseplus: oh well thats nice at least
[2012-07-31 01:45:13 -0400] steveh7: https://github.com/opscode-cookbooks/homebrew/blob/master/libraries/homebrew_package.rb#L43
[2012-07-31 01:45:17 -0400] cwj: you can ask brew for the prefix of a formula and it tells you what the prefix would be if you installed the latest version it knows about
[2012-07-31 01:45:56 -0400] steveh7: i'm just trying to get access to the instance of Chef::Provider::Package::Homebrew for that package so I can query it
[2012-07-31 01:46:13 -0400] cwj: ah
[2012-07-31 01:46:55 -0400] javawidget: where can I get the name of the environment from within a chef recipe?
[2012-07-31 01:47:19 -0400] ampledata: node.chef_environment
[2012-07-31 01:47:21 -0400] javawidget: Any ideas?
[2012-07-31 01:47:38 -0400] javawidget: oh yeah? that easy?
[2012-07-31 01:47:42 -0400] ampledata: it's a method, not a key, so node['chef_environment'] won't work
[2012-07-31 01:47:49 -0400] ampledata: yup, that easy
[2012-07-31 01:47:54 -0400] javawidget: Thank you!
[2012-07-31 01:48:02 -0400] javawidget: trying that now!
[2012-07-31 01:49:52 -0400] javawidget: So...
[2012-07-31 01:50:07 -0400] javawidget: I have a data bag for each environment ...
[2012-07-31 01:50:25 -0400] javawidget: ..that contains users... so....
[2012-07-31 01:50:28 -0400] javawidget: users = data_bag_item("users", "#{node.chef_environment}")
[2012-07-31 01:50:44 -0400] javawidget: that look correct to you?
[2012-07-31 01:50:51 -0400] cwj: you can drop the string interpolation on node.chef_environment
[2012-07-31 01:51:18 -0400] javawidget: Ah...
[2012-07-31 01:51:31 -0400] javawidget: Ok..
[2012-07-31 01:51:47 -0400] javawidget: I see why.. awesome. thanks..
[2012-07-31 01:58:55 -0400] flaccid: jtimberman: do you know which commit solved this bug http://tickets.opscode.com/browse/COOK-1443
[2012-07-31 01:58:56 -0400] jameson: hey..
[2012-07-31 01:59:05 -0400] jameson: how long does it take for upgraded account to take into affect?
[2012-07-31 01:59:24 -0400] jameson: like if I just moved from basic to launch
[2012-07-31 02:05:19 -0400] yfeldblum: javawidget, i wouldn't go that route myself
[2012-07-31 02:05:39 -0400] javawidget: what'd be your recommendation?
[2012-07-31 02:06:18 -0400] javawidget: (eventually, users will all go into ldap - this is just a quick fix to get developers access)
[2012-07-31 02:07:20 -0400] yfeldblum: javawidget, i might suffix each data bag item with the env: users = data_bag("users").select{|item_name| item_name.end_with?("-#{node.chef_environment}")}
[2012-07-31 02:07:48 -0400] yfeldblum: javawidget, or `user = data_bag_item("users", "yfeldblum-#{node.chef_environment}")`
[2012-07-31 02:08:13 -0400] yfeldblum: javawidget, or i might suffix the data bag name itself: users = data_bag("users-#{node.chef_environment}")
[2012-07-31 02:08:27 -0400] javawidget: I see..
[2012-07-31 02:08:30 -0400] yfeldblum: javawidget, or user = data_bag_item("users-#{node.chef_environment}", "yfeldblum")
[2012-07-31 02:09:08 -0400] javawidget: what is the difference?
[2012-07-31 02:09:12 -0400] yfeldblum: javawidget, i think of a data bag as akin to a table in a mysql database, and a data bag item as akin to a single record in a mysql table
[2012-07-31 02:09:26 -0400] javawidget: ah.
[2012-07-31 02:09:30 -0400] javawidget: I see.
[2012-07-31 02:09:38 -0400] javawidget: Well...
[2012-07-31 02:10:18 -0400] javawidget: that makes a lot of sense,
[2012-07-31 02:10:21 -0400] yfeldblum: javawidget, so i might have a database with users (and other things) in it, and i might have a table named "users_production", or each record in the table named "users" might have a ID column and each ID is suffixed with the env, such as a record whose ID might be "yfeldblum-production"
[2012-07-31 02:10:49 -0400] javawidget: so..
[2012-07-31 02:10:53 -0400] yfeldblum: in the data bags world, records have string IDs that you get to set, and not auto-incrementing numerical IDs set by the DB
[2012-07-31 02:11:16 -0400] javawidget: I'd have a data bag "production"... and an item "javawidget"
[2012-07-31 02:11:45 -0400] yfeldblum: javawidget, nah, a data bag named "users-production" and a data bag item within it named "javawidget"
[2012-07-31 02:12:26 -0400] yfeldblum: javawidget, because you don't have a table in your database named "production" ...
[2012-07-31 02:12:31 -0400] javawidget: ok..
[2012-07-31 02:12:45 -0400] javawidget: so...
[2012-07-31 02:13:02 -0400] yfeldblum: data bag = mysql table ... data bag item = record in mysql table
[2012-07-31 02:14:06 -0400] javawidget: I like it... and the magic is in the .end_with to find the correct items.
[2012-07-31 02:14:25 -0400] javawidget: .end_with?()
[2012-07-31 02:14:39 -0400] javawidget: using the naming convention of the bags
[2012-07-31 02:14:51 -0400] javawidget: er.. bag items, rather
[2012-07-31 02:16:05 -0400] yfeldblum: javawidget, yeah ... http://ruby-doc.org/core-1.8.7/String.html#method-i-end_with-3F
[2012-07-31 02:16:37 -0400] javawidget: $$$
[2012-07-31 02:17:03 -0400] yfeldblum: javawidget, if "users-production" (data bag) ends with "-production" (or "-#{node.chef_environment}"), that's the "table" of users specific to the production environment
[2012-07-31 02:33:33 -0400] ssutch: vagrant + lucid64 box - geting noMethodError: undefined method `[]` for nil:NilClass - any idea?
[2012-07-31 02:34:15 -0400] ssutch: first launch
[2012-07-31 02:34:33 -0400] yfeldblum: ssutch, need a backtrace ...
[2012-07-31 02:34:54 -0400] ssutch: yfeldblum certainly
[2012-07-31 02:35:06 -0400] ssutch: https://gist.github.com/3212973
[2012-07-31 02:41:40 -0400] hoover_damm: gotta love that ohai plugin
[2012-07-31 02:41:43 -0400] hoover_damm: that nginx has
[2012-07-31 02:43:36 -0400] ssutch: any idea why the NoMethodError []
[2012-07-31 02:44:02 -0400] ssutch: i did not specify the ohai_plugin
[2012-07-31 02:44:11 -0400] ssutch: must be a part of the default?
[2012-07-31 02:44:42 -0400] hoover_damm: ssutch, https://github.com/opscode-cookbooks/nginx/blob/master/recipes/ohai_plugin.rb#L22
[2012-07-31 02:44:55 -0400] hoover_damm: node['ohai']['plugin_path'] would be nil?
[2012-07-31 02:45:28 -0400] ssutch: no idea
[2012-07-31 02:46:26 -0400] ssutch: i am just using Vagrantfile default configuration machinery
[2012-07-31 04:10:37 -0400] flaccid: if you play it, send it
[2012-07-31 04:11:05 -0400] countdigi: http://www.youtube.com/watch?v=EsbatO3lWDc&feature=related
[2012-07-31 04:14:50 -0400] countdigi: im a slow motion exodus lost in coffee beans ... nice lyrics :-)
[2012-07-31 04:18:56 -0400] flaccid: not too shabby
[2012-07-31 04:19:28 -0400] countdigi: they did the soundtrack for the movie garden state - other tune is:
[2012-07-31 04:19:36 -0400] countdigi: http://www.youtube.com/watch?v=Xfz-YyYXHp0&feature=fvwp&NR=1
[2012-07-31 04:20:19 -0400] countdigi: its like one guy doing all the sequencing and then a singer both from france i believe
[2012-07-31 04:20:29 -0400] countdigi: anyways very chef-topic like :-)
[2012-07-31 04:21:47 -0400] flaccid: something to help the cooking once in a while isn't too bad imho
[2012-07-31 04:21:55 -0400] countdigi: :-)
[2012-07-31 04:41:12 -0400] PRK_nz: https://gist.github.com/3213692
[2012-07-31 04:42:03 -0400] PRK_nz: If I have something like that, but some_attribute exists during the run,e.g. from Ohai, then how can I actually check the Chef server if the attribute exists?
[2012-07-31 04:42:53 -0400] PRK_nz: A specific example is some_attribute = ipaddress (from Ohai)
[2012-07-31 04:43:20 -0400] SplasPood: hrm... I want to use deploy_revision but I want to vary the svn url (to point to new tags) for each release...  This doesn't seem to be possible, am I doing it wrong?
[2012-07-31 04:43:34 -0400] PRK_nz: so it pretty much always exists, but I'd like to actually save it back to the node if it's not set on the node
[2012-07-31 04:44:19 -0400] flaccid: PRK_nz: node['foo']['bar'] = 'foobar'  but if its a node attribute you can just set it in the cookbooks attributes
[2012-07-31 04:44:30 -0400] flaccid: and there is node.save though if you need it
[2012-07-31 04:44:34 -0400] flaccid: should all be in docs
[2012-07-31 04:44:55 -0400] PRK_nz: flaccid: but I only want to save it it isn't set on the node...
[2012-07-31 04:45:22 -0400] flaccid: unless node['foo'] == 'bar'
[2012-07-31 04:47:03 -0400] PRK_nz: ok, it's actually a hack as Ohai is not finding the IP address for some reason. so during the run, node['ipaddress'] has normally existed, but now it's failing, so I'd like to save it back to the node (chef server) if it's not already saved there. That way node['ipaddress'] should always exist, even if Ohai failed to find it
[2012-07-31 04:48:15 -0400] PRK_nz: so I don't think I can use node['foo'] == 'bar' because I don't know it
[2012-07-31 04:48:29 -0400] PRK_nz: know what bar is, that is...
[2012-07-31 04:49:13 -0400] PRK_nz: flaccid: do you follow me? :S
[2012-07-31 04:50:43 -0400] flaccid: nope
[2012-07-31 04:50:45 -0400] PRK_nz: On one node I've seen it return absolutely nothing, e.g. node['ipaddress'] doesn't even exist, and on anther (ohai 0.6.14 as opposed to 0.6.10), it has it equal to null...
[2012-07-31 04:51:12 -0400] flaccid: you can check if stuff exists in ruby
[2012-07-31 04:51:58 -0400] miah: hi
[2012-07-31 04:52:07 -0400] flaccid: e.g. node.foo.has_key? :bar
[2012-07-31 04:52:46 -0400] PRK_nz: problem is that node['ipaddress'] is an automatic attribute
[2012-07-31 04:53:32 -0400] flaccid: node.has_key? :ipaddress
[2012-07-31 04:53:48 -0400] PRK_nz: hmmm
[2012-07-31 04:55:55 -0400] PRK_nz: Where do Ohai automatic attributes fall in the attribute hierarchy?
[2012-07-31 04:56:17 -0400] countdigi: at the very top
[2012-07-31 04:56:24 -0400] countdigi: nothing can override them
[2012-07-31 04:56:50 -0400] flaccid: i don't see any issue in doing the key check.
[2012-07-31 04:56:56 -0400] miah: PRK_nz:
[2012-07-31 04:56:59 -0400] miah: attributes?
[2012-07-31 04:57:00 -0400] bawt: attributes is http://wiki.opscode.com/display/chef/Attributes
[2012-07-31 04:57:24 -0400] flaccid: there is also an automatic attributes page and anatomy of chef run
[2012-07-31 04:58:11 -0400] miah: lol
[2012-07-31 04:58:26 -0400] PRK_nz: ok, so we use the ipaddress attrib during a run in a template. And up until yesterday when Ohai gave up the ghost, it worked fine because ipaddress was always there
[2012-07-31 04:58:27 -0400] miah: attributes are great and weird =)
[2012-07-31 04:58:30 -0400] kensly: should my chef-server machine appears in the node list?
[2012-07-31 04:58:41 -0400] miah: i feel like proper attribute use can be like proper class variable use
[2012-07-31 04:58:49 -0400] miah: but its easier in the chef context =)
[2012-07-31 04:59:06 -0400] miah: kensly: if you are running the chef client on it, yes.
[2012-07-31 04:59:30 -0400] flaccid: its a good practice to export via variables in the template resource. that way you can also do logic and pre-assign.
[2012-07-31 04:59:59 -0400] kensly: miah: thanks. It's weird. I just rolled out a new machine, i went on my workstation to bootstrap that machine, and now only that node appears in the node list. i dont see the chef-server node... -_-
[2012-07-31 05:00:39 -0400] kensly: the only thing i did was added a role file and then bootstrap
[2012-07-31 05:01:25 -0400] PRK_nz: This'll have to wait to tomorrow, it's doing my head in
[2012-07-31 05:01:32 -0400] PRK_nz: thanks for your help :D
[2012-07-31 05:04:26 -0400] kensly: is it because i am using the chef-repo from opscode as skeleton? it erases the node list? (and hence stauts list shows only the new machine)?
[2012-07-31 05:05:02 -0400] miah: the node list is stored on the server
[2012-07-31 05:06:03 -0400] kensly: okay. what could change the list?
[2012-07-31 05:07:15 -0400] kensly: i am gonna look at some log files.. hope that can give me some indication...
[2012-07-31 05:12:09 -0400] kensly: if i run sudo chef-client on chef-server machine, and i get 401 unauthroized, does it mean i have lost the keys? and i need to recreate them?
[2012-07-31 05:12:19 -0400] kensly: 403 my bad
[2012-07-31 05:13:42 -0400] miah: you just need to register a client
[2012-07-31 05:14:56 -0400] kensly: miah: how do i register the client again?
[2012-07-31 05:15:09 -0400] ssd7: Ohai Chefs!
[2012-07-31 05:15:48 -0400] miah: kensly: http://wiki.opscode.com/display/chef/Authentication+and+Authorization
[2012-07-31 05:15:52 -0400] miah: ssd7: hullo
[2012-07-31 05:17:42 -0400] erikh: hey folks.
[2012-07-31 05:18:00 -0400] miah: hi erikh
[2012-07-31 05:19:30 -0400] kensly: miah: yes. i did try sudo chef-client it said client already exist. if knife.rb said node name is server01 then i performed knife client delete server01
[2012-07-31 05:19:44 -0400] kensly: miah: chef-client still said it exists
[2012-07-31 05:24:24 -0400] miah: the node would be deleted on the server, but the local client will still have the key (though it will 403 when it tries to connect)
[2012-07-31 05:27:46 -0400] kensly: miah: nodename.pem should be deleted?
[2012-07-31 05:29:09 -0400] miah: what are you trying to do exactly?
[2012-07-31 05:29:21 -0400] flaccid: how is cron/crond abstractly restarted? is there a cookbook because i believe that the service name restarts
[2012-07-31 05:30:43 -0400] miah: abstractly?
[2012-07-31 05:31:02 -0400] flaccid: the service name restarts
[2012-07-31 05:31:14 -0400] flaccid: sorry varies, so i can't just restart it arbitrarily with the service resource
[2012-07-31 05:31:18 -0400] miah: i'd define a case statment that sets the service name based on some other environmental factor
[2012-07-31 05:31:32 -0400] miah: eg, case node.platform_family
[2012-07-31 05:31:35 -0400] miah: when 'rhel'
[2012-07-31 05:31:46 -0400] miah: crond_service = 'crond'
[2012-07-31 05:31:49 -0400] miah: etc..
[2012-07-31 05:32:07 -0400] flaccid: so just duplicate https://github.com/opscode-cookbooks/cron/blob/master/recipes/default.rb essentially ?
[2012-07-31 05:32:11 -0400] miah: then you can just restart 'service[crond_service]'
[2012-07-31 05:32:17 -0400] flaccid: except it will be a restart
[2012-07-31 05:32:39 -0400] miah: looks like the service definition in that file is exactly what you want
[2012-07-31 05:32:54 -0400] miah: it defines a resource named 'crond'
[2012-07-31 05:33:08 -0400] miah: and the service_name is based on node.platform
[2012-07-31 05:33:18 -0400] miah: so you can restart 'crond' and it should work regardless
[2012-07-31 05:33:40 -0400] flaccid: oh true coz of service_name, good point
[2012-07-31 05:33:52 -0400] flaccid: however i don't want my recipe to depend on cron but rather be optional
[2012-07-31 05:34:10 -0400] flaccid: but i guess i might have to
[2012-07-31 05:36:37 -0400] flaccid: miah: i'll have to include_recipe "cron" in my recipe i assume because the code is in a recipe, a depends won't suffice ?
[2012-07-31 05:39:32 -0400] miah: so long as the cron recipe runs on your system, and 'crond' is seen as a resource by chef. you don't need to include that recipe in another.
[2012-07-31 05:40:10 -0400] miah: depends exposes lwrps and such to cookbooks
[2012-07-31 05:40:42 -0400] flaccid: the cron recipe is not expected to be in run_list and there is no lwrp.
[2012-07-31 05:40:54 -0400] flaccid: thus my suggestion that include_recipe is required to ensure
[2012-07-31 05:40:56 -0400] kensly: miah: sorry, didn't see the message until now.  I want chef-server to show up in the node and status list, i believe i am supposed to.
[2012-07-31 05:41:32 -0400] kensly: miah: knife client delete chefserver  and then sudo chef-client won't allow me to reregister
[2012-07-31 05:42:08 -0400] miah: flaccid: ah. i would add cron to a 'base' type role.. =)
[2012-07-31 05:42:25 -0400] kensly: miah: i've renamed chefserver.pem so it doesn't exist anymore to the machine....  but it doesn't help me reregistering at all. thanks
[2012-07-31 05:42:27 -0400] miah: but ya. in that case a include_recipe would be fine. it would ensure the contents of that recipe were executed.
[2012-07-31 05:42:44 -0400] flaccid: miah: chef solo supports roles?
[2012-07-31 05:43:32 -0400] miah: flaccid: http://wiki.opscode.com/display/chef/Chef+Solo#ChefSolo-Roles
[2012-07-31 05:44:22 -0400] flaccid: sweet as. yeah unfortunately we don't have that at RightScale :(
[2012-07-31 05:45:07 -0400] BryanWB_: ohai chefs!
[2012-07-31 05:46:43 -0400] miah: hiya BryanWB_
[2012-07-31 05:50:41 -0400] BryanWB_: miah: hey .   this week any better for u?
[2012-07-31 05:50:58 -0400] BryanWB_: miah: congrats on the media coverage ;)
[2012-07-31 06:01:58 -0400] miah: thanks
[2012-07-31 06:02:02 -0400] miah: this week is ok
[2012-07-31 06:02:46 -0400] miah: how are things with you?
[2012-07-31 06:07:38 -0400] miah: im fine with it being in each file =)
[2012-07-31 06:12:39 -0400] BryanWB_: miah: things fine w/ me
[2012-07-31 06:25:33 -0400] miah: BryanWB_: good to hear =)
[2012-07-31 09:22:26 -0400] railsraider: Hi, I am having some issues trying to set override_attriubutes on a role
[2012-07-31 09:22:45 -0400] masterkorp: explain those issues
[2012-07-31 09:22:55 -0400] railsraider: I'm trying to do this "users::admin" => { "ssh_keys_folder" => "app-server", "ssh_keys" => ["id_rsa", "id_rsa.pub", "id_dsa", "id_dsa.pub",  "known_hosts"]}
[2012-07-31 09:23:07 -0400] railsraider: on the role
[2012-07-31 09:23:31 -0400] railsraider: and then on the users::admin recipe to get this value
[2012-07-31 09:24:29 -0400] railsraider: for some reason i get cookbook_file[/home/admin/.ssh/%W{id_rsa id_rsa.pub id_dsa id_dsa.pub known_hosts}] (users::admin line 66) which is incorrect
[2012-07-31 09:25:32 -0400] railsraider: in my recipe is do node['users:admin']['ssh_keys'].each do | sshfile |
[2012-07-31 09:46:59 -0400] railsraider: nm fixed it
[2012-07-31 10:04:00 -0400] rubous: hi, anyone got this error message while adding a user account through chef? NoMethodError: undefined method `sp_pwdp' for nil:NilClass
[2012-07-31 10:09:13 -0400] rubous: is someone here?
[2012-07-31 10:09:57 -0400] obazoud: BryanWB_, I send you a pull request to add default jmx queries: Head and non heap memory (jvm), and requests information (tomcat)
[2012-07-31 10:10:21 -0400] obazoud: BryanWB_, I will take a look of tomcat cookbook this afternoon
[2012-07-31 10:10:44 -0400] BryanWB_: i got it! and merged tks
[2012-07-31 10:20:42 -0400] masterkorp: http://pastie.org/private/f0plwgwkxfmpmab6sevua
[2012-07-31 10:20:56 -0400] masterkorp: any idea of what that notifies mean ?
[2012-07-31 10:25:53 -0400] masterkorp: sorry i got it
[2012-07-31 10:34:04 -0400] masterkorp: so on that file i am getting this
[2012-07-31 10:35:32 -0400] masterkorp: http://paste.debian.net/181306/
[2012-07-31 10:35:48 -0400] masterkorp: i get that from that recipe
[2012-07-31 10:36:26 -0400] masterkorp: oh wait
[2012-07-31 10:38:03 -0400] masterkorp: i got that one
[2012-07-31 10:38:16 -0400] masterkorp: heh, herpedy derp today
[2012-07-31 12:01:51 -0400] cnf: hmm
[2012-07-31 12:02:57 -0400] cnf: where does http://pastie.org/4364832 come from...
[2012-07-31 12:05:59 -0400] workmad3: cnf: java/recipes/oracle.rb line 35
[2012-07-31 12:06:10 -0400] cnf: workmad3: except it doesn't
[2012-07-31 12:06:29 -0400] workmad3: cnf: what is that line?
[2012-07-31 12:06:30 -0400] cnf: at just says 'tarball_url = node['java']['jdk']['7'][arch]['url']'
[2012-07-31 12:06:39 -0400] workmad3: cnf: right... one of those in nil
[2012-07-31 12:06:45 -0400] cnf: no mention of from_file
[2012-07-31 12:07:20 -0400] workmad3: cnf: the important thing is the [] on NilClass
[2012-07-31 12:07:37 -0400] cnf: ok... what does that mean?
[2012-07-31 12:08:43 -0400] workmad3: cnf: it means that either node['java'], node['java']['jdk'], node['java']['jdk']['7'] or node['java']['jdk']['7'][arch] hasn't been set
[2012-07-31 12:09:08 -0400] cnf: hmm
[2012-07-31 12:10:10 -0400] workmad3: cnf: the problem with doing lots of [] accesses in a row like that is that you can't tell which one is causing the issue though
[2012-07-31 12:10:52 -0400] cnf: i didn't even understand that was what the traceback was telling me ^^;
[2012-07-31 12:12:50 -0400] cnf: hmz, weird java cookbook
[2012-07-31 12:14:43 -0400] cnf: hmm, i don't understand what's going wrong...
[2012-07-31 12:15:15 -0400] cnf: i'm trying to use https://github.com/opscode-cookbooks/java/blob/master/recipes/oracle.rb
[2012-07-31 12:21:42 -0400] BryanWB_: cnf: u can't download from the net
[2012-07-31 12:21:48 -0400] BryanWB_: the jdk for oracle
[2012-07-31 12:21:55 -0400] cnf: BryanWB_: i know
[2012-07-31 12:21:59 -0400] BryanWB_: cuz it's on site that requires javasript
[2012-07-31 12:22:23 -0400] BryanWB_: so u have to override the url
[2012-07-31 12:22:30 -0400] cnf: i have
[2012-07-31 12:22:33 -0400] BryanWB_: well fuck
[2012-07-31 12:22:43 -0400] BryanWB_: i wrote that shitty cookbook btw
[2012-07-31 12:23:21 -0400] cnf: aha :P
[2012-07-31 12:23:50 -0400] cnf: BryanWB_: let me paste my role
[2012-07-31 12:24:03 -0400] cnf: BryanWB_: http://pastie.org/4364917
[2012-07-31 12:24:08 -0400] cnf: should that not work?
[2012-07-31 12:24:55 -0400] geekbri: I've successfully used the oracle jdk with that cookbook
[2012-07-31 12:25:50 -0400] geekbri: Just figured i'd throw that useless bit of knowledge in there.
[2012-07-31 12:26:00 -0400] cnf: geekbri: well, thank you, for nothing :P
[2012-07-31 12:26:13 -0400] BryanWB_: cnf: 'url '   u have extra space in the url   variable
[2012-07-31 12:26:19 -0400] BryanWB_: url[space]
[2012-07-31 12:26:45 -0400] BryanWB_: cnf: unless it cut and paste weirdness
[2012-07-31 12:26:45 -0400] cnf: well fuck me!
[2012-07-31 12:26:59 -0400] BryanWB_: i do that shit all the time ;)
[2012-07-31 12:27:13 -0400] cnf: how the fuck did i miss that :(
[2012-07-31 12:28:32 -0400] cnf: aha!
[2012-07-31 12:28:35 -0400] cnf: next error :P
[2012-07-31 12:28:54 -0400] cnf: BryanWB_: your cookbook doesn't allow for https downloads!
[2012-07-31 12:29:03 -0400] cnf: FATAL: Chef::Exceptions::ValidationFailed: Option url's value https://chef.sensirius.com/downloads/jdk-7u5-linux-i586.tar.gz does not match regular expression /^http:\/\/.*(tar.gz|bin|zip)$/
[2012-07-31 12:29:22 -0400] BryanWB_: cnf: whoh
[2012-07-31 12:29:28 -0400] BryanWB_: u right, i never thot of that
[2012-07-31 12:29:40 -0400] cnf: ^^;
[2012-07-31 12:29:59 -0400] BryanWB_: i can change that pretty easily
[2012-07-31 12:30:03 -0400] cnf: uhu
[2012-07-31 12:30:12 -0400] cnf: but how long before the changes make it upstream? :P
[2012-07-31 12:30:20 -0400] BryanWB_: don't know
[2012-07-31 12:30:28 -0400] BryanWB_: since i m no longer the upstream
[2012-07-31 12:30:40 -0400] cnf: ^^;
[2012-07-31 12:31:26 -0400] BryanWB_: wow this code I wrote is horrible
[2012-07-31 12:32:05 -0400] cnf: haha!
[2012-07-31 12:32:11 -0400] cnf: time to refactor!
[2012-07-31 12:34:33 -0400] obazoud: BryanWB_, i send you a pull request to fix jvm opts in (new) tomcat cookbook
[2012-07-31 12:35:09 -0400] cnf: hmm
[2012-07-31 12:35:17 -0400] cnf: BryanWB_: what kind of checksum does that expect?
[2012-07-31 12:36:32 -0400] obazoud: cnf, sha256sum
[2012-07-31 12:36:45 -0400] cnf: aha, i was using md5 :P
[2012-07-31 12:46:41 -0400] cnf: right
[2012-07-31 12:46:44 -0400] cnf: next, tomcat!
[2012-07-31 12:50:42 -0400] cnf: hmm... i'm doing something wrong again ^^;
[2012-07-31 12:51:22 -0400] jwitrick: Anyone have any ideas why the version of couchdb that gets installed by the chef-server bootstrap on a centos 5.8 machine would keep crashing?
[2012-07-31 12:52:53 -0400] BryanWB_: obazoud: fucking awesome
[2012-07-31 12:52:57 -0400] BryanWB_: cnf: sha256sum
[2012-07-31 12:53:12 -0400] cnf: BryanWB_: yah, obazoud told me :P
[2012-07-31 12:53:20 -0400] cnf: BryanWB_: trying to install tomcat now
[2012-07-31 12:53:27 -0400] cnf: that's not yours, is it? :P
[2012-07-31 12:53:37 -0400] BryanWB_: cnf: could be, i can't remember
[2012-07-31 12:53:54 -0400] cnf: http://community.opscode.com/cookbooks/tomcat ?
[2012-07-31 12:53:56 -0400] chrisr244: Another kind of basic question...is there a way to change an attribute in a cookbook progmatically via Ruby? or is just going in and doing a find/replace type thing the best solution?
[2012-07-31 12:56:28 -0400] obazoud: BryanWB_, thanks :)
[2012-07-31 12:58:30 -0400] benner: hi
[2012-07-31 12:59:44 -0400] BryanWB_: obazoud: i want to get rid of webapp_opts and more_opts, i think that was a a bad idea
[2012-07-31 12:59:58 -0400] BryanWB_: i just want to have jvm_opts and jmx_opts
[2012-07-31 13:00:00 -0400] benner: what settings determine where to upload cookbooks using knife?
[2012-07-31 13:00:29 -0400] BryanWB_: i keep the separate cuz u can't shutdown java w/ the jmx opts on the command line
[2012-07-31 13:01:29 -0400] obazoud: BryanWB_, yes webapp_opts and more_opts are useless
[2012-07-31 13:02:29 -0400] BryanWB_: obazoud: i don't want to put JMXOPTS into JAVA_OPTS
[2012-07-31 13:02:37 -0400] BryanWB_: i get errors if using jmx
[2012-07-31 13:03:35 -0400] obazoud: BryanWB_, hmm, which errors ? I had tested in vagrant and i have no problems
[2012-07-31 13:03:47 -0400] BryanWB_: w/ jmx?
[2012-07-31 13:03:52 -0400] obazoud: yes
[2012-07-31 13:04:02 -0400] BryanWB_: i must be stupide then
[2012-07-31 13:05:01 -0400] BryanWB_: obazoud: this command throws an ugly error if  the jmx_opts are on the command line https://github.com/bryanwb/chef-tomcat/blob/master/templates/default/tomcat.init.el.erb#L178
[2012-07-31 13:05:57 -0400] obazoud: BryanWB_, could you pastebin these errors ?
[2012-07-31 13:06:08 -0400] BryanWB_: ugh, not now unfortunately
[2012-07-31 13:21:11 -0400] masterkorp: I have a cookbook wich certain recipes depends of it, but not all. What's the best way to set that ?
[2012-07-31 13:24:48 -0400] jwitrick: you could use 'depends "foo"'
[2012-07-31 13:25:00 -0400] jwitrick: in the metadata.rb file
[2012-07-31 13:25:23 -0400] masterkorp: but that would make the whole cookbook depend of that other cookbbok
[2012-07-31 13:26:04 -0400] masterkorp: eg monit::rescue depends of rescue cookbook
[2012-07-31 13:26:13 -0400] masterkorp: but not monit::default
[2012-07-31 13:26:18 -0400] masterkorp: errr
[2012-07-31 13:26:24 -0400] masterkorp: monit::sausage
[2012-07-31 13:28:10 -0400] jwitrick: so if you would rather not just have it always need recipe foo. you could also use 'suggests'
[2012-07-31 13:29:37 -0400] jwitrick: for example i have a database cookbook that has depends 'apt' but i am running a RHEL box. I just have the 'apt' recipe uploaded but never used
[2012-07-31 13:32:10 -0400] masterkorp: hmm
[2012-07-31 13:32:22 -0400] masterkorp: would include_recipe be any usefull in here
[2012-07-31 13:32:33 -0400] masterkorp: oh man this is is soo wrong by design
[2012-07-31 13:34:28 -0400] cnf: crap!
[2012-07-31 13:34:36 -0400] cnf: i hate cookbook dependance chains ^^;
[2012-07-31 13:35:23 -0400] cnf: masterkorp: hehe, same issues? :P
[2012-07-31 13:35:23 -0400] masterkorp: yeah
[2012-07-31 13:35:55 -0400] masterkorp: i would just add those recipes to the node run list by now i think
[2012-07-31 13:36:07 -0400] masterkorp: but will ad a task for this
[2012-07-31 13:37:57 -0400] cnf: hmz
[2012-07-31 13:43:55 -0400] cnf: damn dep chains :P
[2012-07-31 13:51:08 -0400] rayrod2030: any log stash users here?
[2012-07-31 13:52:10 -0400] masterkorp: Just ask
[2012-07-31 13:52:36 -0400] masterkorp: rayrod2030: http://www.catb.org/~esr/faqs/smart-questions.html
[2012-07-31 13:52:54 -0400] rayrod2030: I've set up log stash using lusis-logstash cookbook and I'm getting a broken pipe error between my agent and my server.
[2012-07-31 13:53:04 -0400] rayrod2030: I've opened up 5959 for the server as recommended for logstash
[2012-07-31 14:01:08 -0400] benner:  ~.
[2012-07-31 14:14:50 -0400] cnf: oh, ffs!
[2012-07-31 14:14:57 -0400] cnf: stupid tomcat cookbook!
[2012-07-31 14:18:22 -0400] xerxas: Hi all , I have a directory "name" do action :delete end , works first time , but then , the directory is not here anymore
[2012-07-31 14:18:46 -0400] cnf: BryanWB_: can your cookbook install oracle java from a downloaded rpm?
[2012-07-31 14:18:54 -0400] BryanWB_: cnf: no
[2012-07-31 14:18:59 -0400] cnf: hmz, crap
[2012-07-31 14:19:03 -0400] xerxas: are directory action :delete supposed to be rescued ?
[2012-07-31 14:19:04 -0400] BryanWB_: cnf: sorry
[2012-07-31 14:19:24 -0400] cnf: BryanWB_: and the tomcat6 coobook through yum doesn't see java installed
[2012-07-31 14:19:30 -0400] cnf: so it installs another version!
[2012-07-31 14:19:49 -0400] BryanWB_: rayrod2030: my fork of lusis-logstash has a # of fixes in it    github.com/bryanwb/chef-logstash
[2012-07-31 14:20:02 -0400] BryanWB_: cnf: yeah, that's not my tomcat cookbook
[2012-07-31 14:20:14 -0400] BryanWB_: cuz jpackage is crap
[2012-07-31 14:21:11 -0400] BryanWB_: cnf: u may have more success w/ my tomcat cookbook, but not sure, bryanwb/chef-tomcat
[2012-07-31 14:21:17 -0400] BryanWB_: it has a really nice lwrp
[2012-07-31 14:21:20 -0400] cnf: i'm looking
[2012-07-31 14:21:30 -0400] cnf: BryanWB_: but it says it has no init scripts?
[2012-07-31 14:23:42 -0400] BryanWB_: ? it should have init scripts
[2012-07-31 14:24:18 -0400] cnf: oh, only base doesn't
[2012-07-31 14:25:32 -0400] ssd7: Ohai Chefs!
[2012-07-31 14:26:10 -0400] BryanWB_: cnf: hmm, i thiink that just installs base, which is very vasic
[2012-07-31 14:26:23 -0400] cnf: hmm, let me see
[2012-07-31 14:29:39 -0400] rgsteele: I've been told the answer to this question is no, but I'd just like to confirm: Is there any way to reference attributes defined in a recipe from a role?  I'd like to leverage some path prefixes in my role's override_attributes stanza.
[2012-07-31 14:32:38 -0400] yfeldblum: rgsteele, it's still a complete, final, total, and firm "no"
[2012-07-31 14:32:58 -0400] rgsteele: yfeldblum: 10-4, thanks.
[2012-07-31 14:33:43 -0400] yfeldblum: rgsteele, however, perhaps someone in this room can suggest a good way to approach your problem, if you want to tell us more about it?
[2012-07-31 14:39:17 -0400] rgsteele: yfeldblum: In my default attributes file, I set a few root paths, e.g. set[:foo][:dir] = '/var/lib/foo'.  In one of the roles used by a node that implements the cookbook with that attributes file, I have some attributes I want to override that use the same prefix, but I'd like to leverage node[:foo][:dir] in the JSON instead of hardcoding the paths, since the root portion of the path never...
[2012-07-31 14:39:19 -0400] rgsteele: ...changes.
[2012-07-31 14:39:33 -0400] rgsteele: That way, if the root path ever changes, I don't need to modify my attributes file and the roles.
[2012-07-31 14:41:21 -0400] yfeldblum: rgsteele, perhaps the role can specify just the path suffixes, and the recipe is responsible for always combining the prefix, which has a default value declared in the attributes file in the cookbook, with each of the different suffixes, which also have default values declared in the attributes file?
[2012-07-31 14:41:23 -0400] rgsteele: But, I'm thinking maybe I should just use "default[:foo][:dir]" in recipes/defaults.rb, and then having another recipe that this role includes in its run list after the default recipe, which uses "set[:foo][:dir]".
[2012-07-31 14:42:03 -0400] yfeldblum: rgsteele, don't use `set`
[2012-07-31 14:42:57 -0400] rgsteele: yfeldblum: Your approach sounds interesting, but then you're not really overriding anything.
[2012-07-31 14:45:10 -0400] rgsteele: yfeldblum: set/normal and override are the only precedence levels higher than default that can be set in recipes; I guess you're recommending using "default[....]" in the default recipe and "override[....]" in the more type-specific recipe?
[2012-07-31 14:45:57 -0400] yfeldblum: rgsteele, like this: https://gist.github.com/6be62c1d4460d78f380d
[2012-07-31 14:46:33 -0400] rayrod2030: BryanWB_: I've managed to get the agent and server talking for a bit by opening up iptables.  Still can't see data though.  Will work on it again later today with your fork.
[2012-07-31 14:47:33 -0400] yfeldblum: rgsteele, edited it
[2012-07-31 14:49:29 -0400] cnf: BryanWB_: your cookbook doesn't do an update alternatives, when you install the oracle package?
[2012-07-31 14:53:11 -0400] BryanWB_: no
[2012-07-31 14:53:32 -0400] BryanWB_: cuz update-alternatives relies on there being a .jinfo file w/ a certain format
[2012-07-31 14:53:42 -0400] BryanWB_: inside the tarball and oracle keeps fucking w/ it
[2012-07-31 14:57:36 -0400] obazoud: BryanWB_, fyi, it is possible to download jdk from Oracle website if you have a "good" cookie ;) https://gist.github.com/3216933
[2012-07-31 14:57:49 -0400] yfeldblum: rgsteele, you usually don't need to use override-level attributes
[2012-07-31 14:58:10 -0400] BryanWB_: obazoud: nice
[2012-07-31 14:58:14 -0400] yfeldblum: rgsteele, you can also use `default_unless["foo"]["bar"] = "asdf"` in an attributes file
[2012-07-31 14:58:19 -0400] BryanWB_: but they might change it tomorrow
[2012-07-31 14:58:33 -0400] BryanWB_: and afaict u r violating their terms of service
[2012-07-31 14:58:50 -0400] BryanWB_: and if anyone will sue u for the most trivial of reasons, it is Oracle
[2012-07-31 14:59:20 -0400] rgsteele: yfeldblum: Let me try and explain a bit better
[2012-07-31 14:59:30 -0400] rgsteele: yfeldblum: That works, but I really don't want default["foo"]["bar"] in the default attributes file, because it's not needed for all nodes.  As an example, I have default["foo"]["etc"] = '/etc/foo' in my default attributes file.  Servers set default["conf"] to "#{node['foo']['etc']}/alice" as the app config file, and most clients use "#{node['foo']['etc']}/bob".  But a small group of clients...
[2012-07-31 14:59:32 -0400] rgsteele: ...use "#{node['foo']['etc']}/charlie".  I wanted those clients to include the same client recipe as the others in their role, and override default["conf"] using "#{node['foo']['etc']}/charlie".
[2012-07-31 14:59:48 -0400] garrettux: ohai chefs!  I have a question about Chef::Mixin::Command.popen4
[2012-07-31 15:00:01 -0400] obazoud: BryanWB_, yes it is only a tip, do not use in cookbook, but it is fun
[2012-07-31 15:00:27 -0400] BryanWB_: yes definitly fun ;)
[2012-07-31 15:00:44 -0400] yfeldblum: rgsteele, you can also declare attribute defaults in a recipe file rather than in an attributes file
[2012-07-31 15:01:11 -0400] mattray: anyone use the ifconfig resource?
[2012-07-31 15:01:22 -0400] sascha_d: mattrayI did a long time ago
[2012-07-31 15:01:25 -0400] mattray: ie. if I don't know my ip in advance and plan on using dhcp...
[2012-07-31 15:01:36 -0400] mattray: the name attribute is your address :/
[2012-07-31 15:01:44 -0400] sascha_d: it gave us some grief though as it rebuilt the cfg files on every chef run
[2012-07-31 15:01:46 -0400] sascha_d: so we quit
[2012-07-31 15:01:50 -0400] mattray: ugh
[2012-07-31 15:02:00 -0400] mattray: yeah, I don't think it gets much love/use
[2012-07-31 15:03:24 -0400] mattray: I'm going to kick the tires on it for awhile and open tickets accordingly
[2012-07-31 15:04:39 -0400] garrettux: anyone know how to set the cwd of a command being run with Chef::Mixin::Command.popen4?
[2012-07-31 15:05:06 -0400] garrettux: other than Chef::Mixin::Command.popen4("cd /foo && ls") do ...
[2012-07-31 15:05:29 -0400] garrettux: i don't see anything after reading the source but i may be missing something
[2012-07-31 15:05:30 -0400] ashb: garrettux: (not looked but) ISTR there is a cwd property
[2012-07-31 15:05:38 -0400] atomic-penguin: BryanWB_, its not actually against the terms of service
[2012-07-31 15:05:39 -0400] ashb: or is it the problem that popen4 doesn't support it?
[2012-07-31 15:05:41 -0400] atomic-penguin: I've read them
[2012-07-31 15:06:18 -0400] BryanWB_: atomic-penguin: hmm, could be worth using the cookie then, but does it expire?
[2012-07-31 15:06:27 -0400] garrettux: ashb:  Ara's original popen4 supports it, but from what i can tell Chef::Mixin::Command.popen4 doesn't.  you can pass it an args hash but i don't see cwd or any chdirs in there
[2012-07-31 15:06:54 -0400] ashb: oh I'm thinking of shellout i think
[2012-07-31 15:07:10 -0400] atomic-penguin: BryanWB_, you accept the terms of the license by using the software, the shrinkwrap "accept" button is unnecessary to actually enforce that license
[2012-07-31 15:07:19 -0400] garrettux: yeah, i looked at that, but it doesn't capture the output, and that's what i need
[2012-07-31 15:07:32 -0400] ashb: so Mixin::Command coulg be modified to support it
[2012-07-31 15:08:04 -0400] ashb: just need a Dir.chdir args[:cwd] if args[:cwd] around line 100
[2012-07-31 15:08:04 -0400] atomic-penguin: BryanWB_, I've attempted to urge them to release those on their public-yum site, with no luck so far
[2012-07-31 15:08:06 -0400] ashb: just before the begin
[2012-07-31 15:08:31 -0400] garrettux: ashb: thanks, i'll give that a shot
[2012-07-31 15:08:32 -0400] BryanWB_: atomic-penguin: hmm, i want to encourage ppl to use openjdk cuz oracle is evil
[2012-07-31 15:09:35 -0400] atomic-penguin: BryanWB_, evil or not, I still need to use Oracle/Sun Java in several places because it is the only JDK/JRE certified for our enterprise-y applications
[2012-07-31 15:11:48 -0400] atomic-penguin: BryanWB_, I don't see anything about that script that would be expirable, its not like a unique session cookie
[2012-07-31 15:11:52 -0400] BryanWB_: grrrr, u right
[2012-07-31 15:13:03 -0400] yfeldblum: popen4 may work differently on ruby 1.9 vs on ruby 1.8
[2012-07-31 15:14:26 -0400] atomic-penguin: BryanWB_, put an attribute in there default.java.accept_terms = "no"
[2012-07-31 15:14:53 -0400] BryanWB_: atomic-penguin: excellent idea
[2012-07-31 15:14:56 -0400] atomic-penguin: BryanWB_, make the user override it, so it won't seem like you're subverting their backasswards policy
[2012-07-31 15:21:29 -0400] Gu: Hi,  any good links for a walkthrough to help me get started with a vagrant rails chef-solo configuration?
[2012-07-31 15:23:28 -0400] railsraider: how does a node has attributes of cookbooks when the run list is empty
[2012-07-31 15:23:37 -0400] railsraider: and how can i add my own node attributes
[2012-07-31 15:24:30 -0400] sascha_d: mattrayI thought that it had actually been removed from the resources
[2012-07-31 15:24:48 -0400] mattray: sascha_d: it's still there/listed
[2012-07-31 15:24:55 -0400] sascha_d: I remember looking at the source code to see if I was smart enough to fix the problems but I was still working for a client who didn't want me to take the time
[2012-07-31 15:24:58 -0400] mattray: just not working for dhcp
[2012-07-31 15:25:07 -0400] mattray: yeah, I'm opening a ticket, but I've got no time
[2012-07-31 15:25:11 -0400] sascha_d: :)
[2012-07-31 15:25:46 -0400] railsraider: i don't get how to set node attributes that would always appear in the attributes on chef-web-ui so that i can override them
[2012-07-31 15:26:24 -0400] railsraider: i did this in my attributes for a test cookbook set['update_remote_hosts']['hosts_Array'] = ['slavedb055', 'ubuntuapp12', 'slavedb056']
[2012-07-31 15:26:33 -0400] railsraider: i still don't see it on the node
[2012-07-31 15:26:39 -0400] yfeldblum: railsraider, any automatic-level attributes set by ohai at the beginning of the run (before any cookbooks are loaded), and any normal-level attributes set at any time but not unset, by either sysadmins directly or by recipes, would continue to be saved on a node even after removing everything in its run-list and completing a successful chef-client run
[2012-07-31 15:27:55 -0400] Gu: Hi,  any good links for a walkthrough to help me get started with a vagrant rails chef-solo configuration?
[2012-07-31 15:27:57 -0400] railsraider: yfeldblum: so how do i set an override attribute that would be automatic
[2012-07-31 15:28:16 -0400] mattray: sascha_d: http://tickets.opscode.com/browse/CHEF-3333 :(
[2012-07-31 15:29:01 -0400] sascha_d: maybe I'm smarter than I was a year and a half ago
[2012-07-31 15:29:15 -0400] sascha_d: I need to build a centos vm to look at it
[2012-07-31 15:29:18 -0400] railsraider: Gu:  matschaffer  has great videos on that http://www.youtube.com/watch?v=1G6bd4b91RU
[2012-07-31 15:29:31 -0400] yfeldblum: railsraider, automatic-level attributes are reserved for ohai, and you should not set them yourself either directly or in a recipe
[2012-07-31 15:29:49 -0400] matschaffer: thanks railsraider! now I just need to make some more ;)
[2012-07-31 15:30:09 -0400] yfeldblum: railsraider, you normally do not need to use override-level attributes - default-level attributes usually suffice -, and i think that could be true in your case
[2012-07-31 15:30:48 -0400] Gu: thanks railsraider!
[2012-07-31 15:30:50 -0400] railsraider: yfeldblum: i guess the question is how do i make override attributes that i can override for a cookbook in the run list from the chef- web-ui interface
[2012-07-31 15:31:28 -0400] railsraider: i read that page about the attribute 5 times but still don't really get it
[2012-07-31 15:32:07 -0400] sascha_d: ohey mattray the last time I read the docs for ifconfig, it was red hat/centos love only
[2012-07-31 15:32:24 -0400] sascha_d: I am looking at the resource again now
[2012-07-31 15:32:52 -0400] sascha_d: mattray"Currently, the default provider only writes out a start-up configuration file for the interface on Red Hat-based platforms (it writes to /etc/sysconfig/network-scripts/ifcfg-#{device_name}). "
[2012-07-31 15:36:11 -0400] yfeldblum: railsraider, you don't; override-level attributes can be set in recipes, roles, and environments; normal-level attributes can be set in recipes and by the sysadmin, via either knife or the chef-server-webui
[2012-07-31 15:37:46 -0400] yfeldblum: railsraider, default-level attributes can be set in the same places that override-level recipes can be set (recipes, roles, environments) and automatic-level attributes can be set by ohai or your custom ohai plugins
[2012-07-31 15:37:48 -0400] railsraider: yfeldblum so instead of putting default['recipe']['bla bla] just use normal['recipe']['bla bla'] ? in the attributes file? and it will show up on the web ui?
[2012-07-31 15:38:25 -0400] yfeldblum: railsraider, that's possible, but the more important question is: why?
[2012-07-31 15:38:54 -0400] yfeldblum: railsraider, you should typically use only default-level attributes for everything, unless there is a specific, very compelling reason to use some other level
[2012-07-31 15:39:25 -0400] railsraider: yfeldblum: because i have a need to for dynamic update of attributes say firewall ports that are usually closed but i want to open them via the chef-web-ui and re-run of chef-client
[2012-07-31 15:39:43 -0400] yfeldblum: railsraider, why can you not do that in a role?
[2012-07-31 15:40:04 -0400] yfeldblum: railsraider, or, alternatively, why can you not set up SSH port-forwarding?
[2012-07-31 15:43:49 -0400] erratic: Ive been learning erlang in my free time
[2012-07-31 16:04:55 -0400] jerem`: I install with a recipe but I always have recipe.old-131313133
[2012-07-31 16:05:59 -0400] jerem`: it do that only when the current folder is different that new right ?
[2012-07-31 16:20:09 -0400] Gu: I am just getting started with chef and vagrant - I get this error : [Tue, 31 Jul 2012 18:17:01 +0200] INFO: Setting the run_list to ["recipe[mysql]", "role[web]"] from JSON [Tue, 31 Jul 2012 18:17:01 +0200] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out [Tue, 31 Jul 2012 18:17:01 +0200] FATAL: TypeError: can't convert nil into String
[2012-07-31 16:20:23 -0400] Gu: my config and full log : http://pastie.org/4366048
[2012-07-31 16:22:19 -0400] miah: 'nil into String' generally means an attribute isn't being passed to something that wants it
[2012-07-31 16:22:20 -0400] Gu: railsraider: can you take a look at http://pastie.org/4366048 ?
[2012-07-31 16:22:33 -0400] miah: look at your stacktrace.out
[2012-07-31 16:22:40 -0400] miah: it should tell you exactly what file the error is in
[2012-07-31 16:24:01 -0400] yfeldblum: Gu, you need to gist the file /tmp/vagrant-chef-1/chef-stacktrace.out, which is a crucial part of the error message
[2012-07-31 16:24:18 -0400] Gu: thanks I will take a look
[2012-07-31 16:25:28 -0400] kallistec: PSA: errors like this should be a lot easier to debug in Chef 10.14, you can try the beta 3 now
[2012-07-31 16:26:20 -0400] Gu: https://gist.github.com/3218246
[2012-07-31 16:27:11 -0400] Gu: I am having enough troubles starting out, so I would rather stay away from beta stuff. although it's nice to know that the errors where improved
[2012-07-31 16:27:56 -0400] kallistec: fair enough
[2012-07-31 16:28:20 -0400] kallistec: in this case it looks like something is wrong with one of your role files
[2012-07-31 16:28:25 -0400] sascha_d: @kallistecorly? Maybe I will go fire up some 10.14 and pass in bad attributes.  I wanted to play with whyrun anyway.
[2012-07-31 16:29:13 -0400] yfeldblum: Gu, the exception is thrown on this line: https://github.com/opscode/chef/blob/10.12.0/chef/lib/chef/role.rb#L315
[2012-07-31 16:29:25 -0400] kallistec: sascha_d: look at http://tickets.opscode.com/browse/CHEF-3319 for one example
[2012-07-31 16:30:31 -0400] Gu: thanks yfeldblum & @kallistec, I will look into the role files
[2012-07-31 16:30:39 -0400] yfeldblum: Gu, it sounds like Chef::Config[:role_path] is nil
[2012-07-31 16:31:04 -0400] yfeldblum: Gu, what does the chef-solo config file look like?
[2012-07-31 16:32:42 -0400] sascha_d: @kallistecaw I am imrpress.  No more funky 20 questions with Ruby
[2012-07-31 16:33:01 -0400] Gu: kinda feel stupid here :) I don't think I have one, Isn't Vagrantfile is used instead?
[2012-07-31 16:33:58 -0400] yfeldblum: Gu, did you specify the roles path in your Vagrantfile?
[2012-07-31 16:34:40 -0400] Gu: no
[2012-07-31 16:34:41 -0400] Jay_Levitt: So I just realized that I've been adding all sorts of recipes to my role's run_list (and adding default_attributes in the role), instead of adding them to my own recipe that's run by the run_list (and using the Ruby DSL).  How do people generally divide up run_list vs. custom recipe?
[2012-07-31 16:35:12 -0400] Gu: I assumed that roles are not a must
[2012-07-31 16:35:37 -0400] yfeldblum: Gu, are you using any roles in the run-list?
[2012-07-31 16:36:13 -0400] Gu: I tried with and without defining roles, It didn't work both ways
[2012-07-31 16:36:26 -0400] Gu: I get a different error when I don't use roles
[2012-07-31 16:37:33 -0400] yfeldblum: Gu, ok so your run-list does include something like "role[base]"
[2012-07-31 16:37:49 -0400] yfeldblum: Gu, that means you have to tell vagrant, in your Vagrantfile, where the roles are kept
[2012-07-31 16:37:58 -0400] Gu: yfeldblum: yes, When I don't define a role I get "NameError: uninitialized constant Chef::Resource::ApplicationBase"
[2012-07-31 16:38:13 -0400] yfeldblum: Gu, http://vagrantup.com/v1/docs/provisioners/chef_solo.html ... scroll down to "Roles"
[2012-07-31 16:38:39 -0400] Gu: are roles mandatory?
[2012-07-31 16:39:53 -0400] Gu: thanks for the link, thats what I have been following up until now, but it doesn't really say what should go in the role files
[2012-07-31 16:41:10 -0400] yfeldblum: Gu, roles are not mandatory
[2012-07-31 16:41:23 -0400] yfeldblum: Gu, but most people probably use them
[2012-07-31 16:41:53 -0400] Gu: I will create role files then
[2012-07-31 16:42:20 -0400] Gu: any idea about the "FATAL: NameError: uninitialized constant Chef::Resource::ApplicationBase" error?
[2012-07-31 16:43:27 -0400] siezer: Jay_Levitt when order matters, and things are tightly coupled, its better to include_recipe from a recipe (example: nagios:server include_recipe's apache2 for its web console)
[2012-07-31 16:43:52 -0400] siezer: where order doesn't matter, or things are loosely coupled, its safe to just pile things into a role
[2012-07-31 16:44:08 -0400] siezer: openssh and motd for example
[2012-07-31 16:44:13 -0400] yfeldblum: Gu, you always have to provide a backtrace
[2012-07-31 16:44:41 -0400] yfeldblum: Gu, if you have an error message, that's not enough for others to help you - you need to get the backtrace along with the error message
[2012-07-31 16:44:46 -0400] Jay_Levitt: siezer: yeah, order hasn't mattered much for me yet - basic stuff like apache2, sudo, postgres
[2012-07-31 16:45:31 -0400] cpasmoi: I have a question about the wordpress cookbook. I want my wordpress website to link to my server/wp (like http://example.com/wp ) instead of server/. I know that the "DocumentRoot" directive has to be at /var/www/ instead of /var/www/wp but how can I change this without changing the :docroot ressource
[2012-07-31 16:46:10 -0400] Gu: Here is my backtrace and error: https://gist.github.com/3218367
[2012-07-31 16:46:36 -0400] Jay_Levitt: siezer: otoh, I like keeping the attributes next to the recipe, which the DSL lets me do.  otohoh, that moves me into a 'base' role AND a 'base' recipe, which feels un-DRY
[2012-07-31 16:47:58 -0400] cpasmoi: Or else, perhaps should I change the node['wordpress']['dir'] on the default recipe (this ressource defines the :docroot used by web_app function) to /var/www/ instead of /var/www/wp but... Well, no, as everything is really in /var/www/wp....
[2012-07-31 16:48:33 -0400] yfeldblum: Gu, do you have both the application and application_ruby cookbooks?
[2012-07-31 16:50:43 -0400] patcon: hey y'all, anyone know whether there's been any work on getting a torrent download resource working on mac?
[2012-07-31 16:51:49 -0400] patcon: mattray ^^
[2012-07-31 16:51:55 -0400] patcon: seems up your alley :)
[2012-07-31 16:52:37 -0400] Gu: thanks yfeldblum - looks like that was the problem, I will stop bothering you and do some error hunting mysql :)
[2012-07-31 16:52:52 -0400] yfeldblum: Gu, no probs
[2012-07-31 16:53:12 -0400] Gu: mysql = myself :)
[2012-07-31 17:01:36 -0400] mattray: patcon: I haven't touched it in awhile, I was having weird issues with the DHT
[2012-07-31 17:01:46 -0400] mattray: patcon: there's also a transmission cookbook if you're just downloading
[2012-07-31 17:02:22 -0400] dajia: Hello, everyone
[2012-07-31 17:03:05 -0400] patcon: mattray: thanks man, I'm testing out both, but transmission ckbk has issues related to bencode. Don't think it's available in any of the mac packaging systems
[2012-07-31 17:03:18 -0400] dajia: Has anyone used an options line in a yum_package resource and specified "--enablerepo=somerepo", but had that option ignored?
[2012-07-31 17:03:24 -0400] patcon: mattray:  thanks anyhow :)
[2012-07-31 17:03:31 -0400] mattray: patcon: I just ran out of patience with my bittorrent cookbook
[2012-07-31 17:03:43 -0400] dajia: I have verified from the command line that I can do a yum --enablerepo=somerepo install mypackage, but it fails when run within chef.
[2012-07-31 17:04:10 -0400] mattray: patcon: it would work fine for awhile, then some nodes would never work. I think it was related to network configurations
[2012-07-31 17:04:29 -0400] mattray: patcon: probably on a private network it would work fine
[2012-07-31 17:04:45 -0400] patcon: hm. my setups pretty simple, so might give it a shot -- bktorrent and aria2 are available via macports
[2012-07-31 17:05:25 -0400] patcon: basically looking to use the a torrent resource to download xcode for workstation provisioning like what pivotal labs does :)
[2012-07-31 17:06:17 -0400] mattray: patcon: downloads should work fine
[2012-07-31 17:06:24 -0400] patcon: sahweet. thanks dude
[2012-07-31 17:06:31 -0400] mattray: patcon: my frustrations were mostly around trying to seed files
[2012-07-31 17:17:41 -0400] lily_: i am trying to bootstrap a new ubuntu node. i got this:  INFO: HTTP Request Returned 401 Unauthorized: Failed to authenticate. Ensure that your client key is valid.
[2012-07-31 17:17:56 -0400] barefoot: dajia: http://tickets.opscode.com/browse/CHEF-2427
[2012-07-31 17:18:52 -0400] lily_: i follow the guide and i still get these errors... any idea?
[2012-07-31 17:19:21 -0400] dajia: barefoot:  I've seen that, but that ticket is about a year old, and I'm running the latest chef client.  Has there really been no resolution on this in that time?
[2012-07-31 17:19:27 -0400] Jay_Levitt: There are some recipes that are controlled purely through node/role attributes, not LWRPs.  Can I (and should I) set those attributes from my own recipe? Or should those always go into my role definition?
[2012-07-31 17:19:43 -0400] lily_: on my workstation, i have validation.pem so i can use knife bootsrap.
[2012-07-31 17:19:51 -0400] dajia: Also, cleaning the cache did nothing.
[2012-07-31 17:22:27 -0400] dols: lily_, http://wiki.opscode.com/display/chef/Common+Errors
[2012-07-31 17:24:09 -0400] bencaron: i'm trying to install a gem and use it right-away in a recipe
[2012-07-31 17:24:14 -0400] bencaron: i'm using chef_gem
[2012-07-31 17:24:23 -0400] bencaron: but it don't seem to work
[2012-07-31 17:24:47 -0400] bencaron: any idea what I can do wrong?
[2012-07-31 17:25:30 -0400] bencaron: i'm doing chef_gem "inifile", then require "inifile"
[2012-07-31 17:25:49 -0400] bencaron: don't really see what else I could do.. :\
[2012-07-31 17:26:09 -0400] lily_: dols: but the node isn't in the node list
[2012-07-31 17:26:18 -0400] bencaron: it does install, but is not available for my recipe
[2012-07-31 17:26:57 -0400] lily_: dols: and on the affected node, the new machine i am tyring to bootstrap doesn't even have client.pem
[2012-07-31 17:30:18 -0400] dols: lily_: i think you need to recreate the keys and configure knife again.. at least, that's what i did, and the node wasn't in the node list for me, either
[2012-07-31 17:30:35 -0400] Jay_Levitt: If I'm in a recipe, are there some global variables/methods/etc that would tell me what role I've been called from? Searching the docs for "variable" yields surprisingly little about introspection.
[2012-07-31 17:31:27 -0400] Jay_Levitt: (Actual use case: I want each role to (drily) call a recipe named for that role.)
[2012-07-31 17:31:34 -0400] lily_: dols: recreate the keys. on the chef server? it's frigentening to do it. do you mind to tell me what needs to be done? on chef-server and on the workstation? should i delete validator.pem webui.pem and chefserver.pem from chef-server?
[2012-07-31 17:33:32 -0400] nickpresta: When executing commands in an execute block, can I execute them as root (using sudo) even though chef-solo is being run as a normal (vagrant) user?
[2012-07-31 17:35:48 -0400] dols: lily_: i would create back up copies of the *.pem files on the server and your ~/.chef directory on your workstation before proceeding
[2012-07-31 17:36:40 -0400] lily_: dols: okay. i will rename them. so do i first go to chef-server to do knife configure -i  initial?
[2012-07-31 17:36:48 -0400] lily_: dols: or just restart the services?
[2012-07-31 17:41:36 -0400] dols: lily_: you need to restart the services for this procedure before reconfiguring your workstation clients, i think
[2012-07-31 17:52:17 -0400] karsten: Is there a file viewer with syntax highlighting?  I'd prefer not invoking an editor, even in read-only mode.  Though if that's the answer, I can live with it (vim).
[2012-07-31 17:54:00 -0400] karsten: Erm.  Wrong channel.
[2012-07-31 17:56:05 -0400] JasonF: karsten: "view" = vim in forced read only mode
[2012-07-31 17:56:59 -0400] karsten: JasonF: Yeah, but it's got that annoying habit of still taking edit commands, then barfing at you.
[2012-07-31 17:57:22 -0400] karsten: Sort of like Microsoft's alleged Word reader which popped up a dialog every time you hit any key.
[2012-07-31 17:57:28 -0400] lily_: dols: thanks. i just recreated the keys. before i do anything serious like bootstrap. what keys should be present in the workstation?  i have ~/.chef/validation.pem knife.rb and workstation.pem
[2012-07-31 17:57:38 -0400] karsten: JasonF: But thanks.
[2012-07-31 18:03:24 -0400] s1-:  /whois bemu
[2012-07-31 18:04:57 -0400] lily_: why is sudo chef-client trying to read /etc/chef on my workstation?
[2012-07-31 18:05:09 -0400] lily_: that directory does not exist
[2012-07-31 18:05:55 -0400] dols: lily_: sounds like you are on the right path, you should check your knife.rb that the path name to the keys are correct
[2012-07-31 18:06:23 -0400] yfeldblum: lily_, because chef-client (the agent that runs on servers) looks for /etc/chef/client.rb as its default config file
[2012-07-31 18:06:32 -0400] yfeldblum: lily_, why are you running chef-client on your workstation?
[2012-07-31 18:06:50 -0400] lily_: yfeldblum: oh i thought u need the client.pem but i guess that isn't important?
[2012-07-31 18:07:00 -0400] lily_: dols: okay thanks let me try
[2012-07-31 18:07:11 -0400] yfeldblum: lily_, that's a jump ... what are you trying to do?
[2012-07-31 18:07:28 -0400] yfeldblum: lily_, why are you running chef-client on your workstation, given that chef-client is the agent that runs on servers?
[2012-07-31 18:08:18 -0400] lily_: yfeldblum: oh my bad.... okay i tried to bootstrap but it didn't even create a new node. so the common error page didn't help me solve it. now i have recreated the keys, i thought i would need the client.pem
[2012-07-31 18:09:48 -0400] yfeldblum: lily_, again, chef-client is supposed to run on servers, and you're not supposed to run chef-client on your workstation
[2012-07-31 18:10:09 -0400] yfeldblum: lily_, i don't even understand what your goal is
[2012-07-31 18:10:24 -0400] jtimberman: yfeldblum: there's no reason why you shouldn't run chef-client on a workstation, presuming of course that you want to configure your workstation with Chef.
[2012-07-31 18:10:51 -0400] jtimberman: I may be biased in that though.
[2012-07-31 18:11:55 -0400] yfeldblum: jtimberman, right, but that's not my base-case assumption
[2012-07-31 18:12:35 -0400] lily_: yfeldblum: sorry for being stupid. this is what's going on...
[2012-07-31 18:12:48 -0400] nickpresta: I have an execute block that runs "sudo echo $(whoami) > /home/vagrant/output.txt" and after Chef runs, the file does not exist, despite it saying that the recipe completed
[2012-07-31 18:13:05 -0400] nickpresta: Would there be a reason for this? How can I verify something actually ran? Thanks
[2012-07-31 18:13:30 -0400] yfeldblum: nickpresta, chef-client (and chef-solo) should typically be running as root
[2012-07-31 18:13:33 -0400] lily_: yfeldblum: i am trying to knife bootstrap a new ubuntu through my workstation. instead i keep getting 401 unauthorized error because it said client key is not valid...
[2012-07-31 18:13:36 -0400] erratic: I am wondering if anyone could help me make my map/select a little more robust: https://gist.github.com/3d4ab002f8eee96f3d51
[2012-07-31 18:13:45 -0400] nickpresta: yfeldblum: Is there a way to run chef-solo as root via Vagrant provisioner?
[2012-07-31 18:13:58 -0400] erratic: I'd like to return an empty list instead of getting that nomethod error
[2012-07-31 18:14:06 -0400] yfeldblum: nickpresta, it should run as root already
[2012-07-31 18:14:45 -0400] lily_: i've took dols' advice to recreate the keys. but none of that helps.... yesterday i was testing this on a sandbox, the whole process works. i am so confused whats going on
[2012-07-31 18:14:54 -0400] nickpresta: yfeldblum: Then it probably is. At any rate, I have an execute block that stops iptables, but every time chef is run and I SSH into the machine, iptables is still running.
[2012-07-31 18:15:19 -0400] miketheman: re: deploy resource, what execution environment does this inherit? I'm getting complaints that a path is not being loaded correctly.
[2012-07-31 18:15:30 -0400] yfeldblum: nickpresta, don't use "sudo" then if you're already running as root ...
[2012-07-31 18:15:51 -0400] yfeldblum: nickpresta, also if you want to know who you are, Chef::Log.info(`whoami`)
[2012-07-31 18:18:08 -0400] lily_: yfeldblum: even on chef-server i have no client.pem  ...
[2012-07-31 18:18:44 -0400] yfeldblum: lily_, i have no idea what, overall, you're trying to accomplish ... what's the result you're looking for?
[2012-07-31 18:19:08 -0400] lily_: yfeldblum: thanks. i am tyring to bootstrap a new machine
[2012-07-31 18:19:13 -0400] lily_: yfeldblum: that's all i am trying to do
[2012-07-31 18:19:31 -0400] lily_: yfeldblum: but it doesn't let me to bootstrap because it said 401 unauthorized. ensure your client key is valid.
[2012-07-31 18:19:54 -0400] jessicab: lily_: when you recreated the validator key, did you use the steps in this section under chef server? just might be good to confirm how you did that key http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-401Unauthorized%28usingvalidatorAPIclient%29
[2012-07-31 18:21:59 -0400] yfeldblum: lily_, how are you trying to do the bootstrap? what command are you using?
[2012-07-31 18:22:31 -0400] mksm: Hello. I have several recipes that installs gems that depend on the nokogiri gem which depends on libxml dev system package. Do I need to add 'package "libxml-dev"' to all recipes that will install nokogiri?
[2012-07-31 18:22:55 -0400] lily_: yfeldblum: knife bootstrap TEST.SERVER.ADDRESS -x USERNAME -P PASSWORD -r 'role[base_server]' --sudo       i just added a new role but i have done the same command yesterday so it was working....
[2012-07-31 18:23:08 -0400] lily_: jessicab: yes i did follow that section. i will try again
[2012-07-31 18:24:15 -0400] lily_: jessicab: chefserver is the chef server node's name. knife node delete chefserver   and knife client delete chefserver
[2012-07-31 18:24:58 -0400] lily_: jessicab: i then also removed validation.pem webui.pem and even chefserver.pem.   then i restart chef-server so validation and webui are recreated. finally, i reconfigure the client on chef-server
[2012-07-31 18:25:27 -0400] lily_: jessicab: on the workstation. i deleted folder contains the keys and knife.rb  i reconfigure (i scp down the keys)
[2012-07-31 18:25:39 -0400] lily_: jessicab: finally, i issued the bootstrap command. it failed because of 401
[2012-07-31 18:25:57 -0400] jessicab: lily_: the chef server shouldnt really need a node name.. unless youre talking about the client youre bootstrapping? i thought the node and client arent getting created when you bootstrap?
[2012-07-31 18:27:11 -0400] lily_: jessicab: on chef-server, the knife.rb has a line  node_name   and i filled it with the default, which happens to be chefserver   i was following the wiki
[2012-07-31 18:27:27 -0400] lily_: jessicab: yes. when i tried to bootstrap, it doesn't even show up on the node list or client list
[2012-07-31 18:34:35 -0400] jessicab: lily_: so you can do a knife client list so that chef server admin key you have is probably fine.. i wonder if you can also do a knife client list with the validation.pem.. i believe something like 'knife client list -k .chef/validation.pem -u chef-validator' would test that part
[2012-07-31 18:34:56 -0400] jessicab: lily_: it sounds like its probably the validation.pem thats bad from your description, since thats whats used to create the client
[2012-07-31 18:39:11 -0400] lily_: jessicab: ERROR: You authenticated successfully to http://localhost:4000 as chef-validator but you are not authorized for this action Response:  You are not allowed to take this action.
[2012-07-31 18:39:44 -0400] lily_: jessicab: thats what i got   the only thing i did that was different from the tutorial was using full path when specifying the key location
[2012-07-31 18:40:10 -0400] lily_: jessicab: example:     Please enter the location of the existing admin client's private key: [/etc/chef/webui.pem] .chef/webui.pem      i put full path /home/chefserver/.chef/webui.pem
[2012-07-31 18:45:28 -0400] jessicab: lily_: im honestly more used to hosted chef, but i believe it should be authorized to do that.. either way, it did confirm the key was good and if it was a permissions issue for the bootstrap youd get a 403, so perhaps thats just a test that doesnt work the same on open source
[2012-07-31 18:46:48 -0400] lily_: jessicab: thanks. i am going to start from zero again.... we just can't use hosted because it's a school lab project. but thanks.
[2012-07-31 18:48:20 -0400] jessicab: lily_: yea, im all out of ideas.. that scenario just sounds strange, if you run into it again you might want to try the mailing list since its kind of easier to debug these weird issues that have lots of details to them over email
[2012-07-31 18:48:40 -0400] patcon: mattray: i think this is a chef thing, but the run keeps exiting with the aria2c process still running? It's a 2GB file, so long timeout might not have been noticed otherwise
[2012-07-31 18:48:40 -0400] lily_: jessicab:  no problem! thanks :)
[2012-07-31 18:49:17 -0400] mattray: patcon: there are a number of ways to run it, I assume you saw that?
[2012-07-31 18:49:19 -0400] patcon: wondering whether I should look for a chef-level fix, or something in the provider. any thoughts?
[2012-07-31 18:49:38 -0400] mattray: patcon: you can have it keep downloading in the background if you're not waiting on it
[2012-07-31 18:49:39 -0400] patcon: bah. i might put my foot in my mouth. let me RTFM :)
[2012-07-31 18:49:50 -0400] mattray: or you can have it block and wait
[2012-07-31 18:50:05 -0400] mattray: there's also a flag for whether or not to keep seeding, and ratios
[2012-07-31 18:50:15 -0400] patcon: mattray: i have it set as blocking, since everything in the run depends on it. but i think there's still a timeout somewhere
[2012-07-31 18:50:23 -0400] mattray: weird
[2012-07-31 18:50:40 -0400] mattray: I know I've seen it go 30 minutes and finish successfully
[2012-07-31 18:50:51 -0400] patcon: so the chef run errors out, aria2c process is still running, and i have to kill it manually or else the next run says the port is in use
[2012-07-31 18:51:07 -0400] patcon: hm... ok, will investigate more. thanks!
[2012-07-31 18:51:23 -0400] mattray: patcon: hrm I don't recall
[2012-07-31 19:03:43 -0400] rgsteele: Question about top-down ordering and attribute precedence.  In this pastie: http://pastie.org/4366799   ... will myvar = 'baz' and myvar2 = 'quux'?
[2012-07-31 19:04:32 -0400] yfeldblum: rgsteele, no
[2012-07-31 19:04:58 -0400] yfeldblum: rgsteele, they will both be 'baz'
[2012-07-31 19:05:14 -0400] EJC: hey all - I'm getting a new whacky error - "no such file to load -- chef" even when I can see this "/usr/lib/ruby/gems/1.8/gems/chef-10.12.0" - I'm just trying to run the Rakefile that comes as part of the opscode repository
[2012-07-31 19:05:21 -0400] EJC: (ubuntu 12.X)
[2012-07-31 19:05:33 -0400] EJC: seems like the gem isn't visible or something, can't put my finger on it :-/
[2012-07-31 19:06:57 -0400] rgsteele: yfeldblum: What, really?  Why?
[2012-07-31 19:07:50 -0400] yfeldblum: rgsteele, because when you do `default[:a][:b] = "abc"` and then attempt to query `default[:a][:b]` multiple times without changing its value, it will always return the same value that you set for it
[2012-07-31 19:08:21 -0400] yfeldblum: rgsteele, if you want myvar2 to have 'quux', then you should do `myvar2 = override[:foo][:bar]`
[2012-07-31 19:09:31 -0400] rgsteele: yfeldblum: Oh, I meant to set myvar = node[:foo][:bar] and myvar2 = node[:foo][:bar].  That change your answer at all?
[2012-07-31 19:09:42 -0400] yfeldblum: rgsteele, yes
[2012-07-31 19:09:53 -0400] rgsteele: yfeldblum: Okay, good, I'm not crazy then - just a bad typist.
[2012-07-31 19:28:36 -0400] kent__: on a workstation, do i always need the validation.pem from chef-server?
[2012-07-31 19:28:52 -0400] kent__: whether it's hosted or standalone?
[2012-07-31 19:29:47 -0400] jameson: anyone ever had issues
[2012-07-31 19:29:57 -0400] jameson: with knife ec2 server create sometime creating the wrong flavor on ec2?
[2012-07-31 19:30:07 -0400] jameson: I say t1.micro but sometimes it creates m1.small(s)
[2012-07-31 19:35:19 -0400] geekbri: I've never had that issue.
[2012-07-31 19:36:39 -0400] jameson: i have a shell script running knife ec2 server create :|
[2012-07-31 19:37:01 -0400] jameson: i am deploying 4 servers, but 2 of them goes up as m1.small and the other 2 as t1.micro
[2012-07-31 19:51:22 -0400] yfeldblum: i hear that flat text files are the most flexible database technology
[2012-07-31 19:52:27 -0400] dwhsix: yfeldblum: hey, don't knock 'em for certain definition of "flexible"
[2012-07-31 19:52:38 -0400] smw_work: Hi all. https://github.com/opscode-cookbooks/passenger_apache2/blob/master/recipes/mod_rails.rb has `include_recipe "passenger_apache2"`. Does this mean that that the default.rb recipe will be run if I call it?
[2012-07-31 19:53:05 -0400] smw_work: so I can do recipe[passenger_apache2:mod_rails] and it will install/configure mod_rails?
[2012-07-31 19:53:34 -0400] geekbri: yfeldblum: Sure, thats what we use with hadoop :-P
[2012-07-31 19:54:02 -0400] smw_work: geekbri, hay! good to see you :-)
[2012-07-31 19:54:16 -0400] geekbri: smw_work: :), include_recipe with just the cookbook name will run the default recipe
[2012-07-31 19:54:27 -0400] yfeldblum: scratch that - it turns out you can get higher performance with 1000 processes mapping the same large binary file, as long as they don't use locks
[2012-07-31 19:54:38 -0400] geekbri: smw_work: if you want to run a specific recipe within that cookbook you would use include_recipe cookbook::recipe_I_want_to_run
[2012-07-31 19:54:53 -0400] smw_work: ::?
[2012-07-31 19:55:00 -0400] smw_work: I have not seen that anywhere...
[2012-07-31 19:55:12 -0400] smw_work: nm... I just can't read
[2012-07-31 19:55:27 -0400] geekbri: Thats ok, literacy is overrated.
[2012-07-31 19:56:24 -0400] geekbri: you also are going to want to encase that argument in '' or "" :).
[2012-07-31 19:56:55 -0400] smw_work: geekbri, this is what I have so far http://fpaste.org/wjv2/
[2012-07-31 19:57:11 -0400] geekbri: looks ok to me.
[2012-07-31 19:57:36 -0400] smw_work: my goal is to get chef-solo installing passenger (should be easy), then work on my own cookbook with misc config/permissions changes
[2012-07-31 19:58:34 -0400] geekbri: My goal is to be the master of the universe, but He Man is really tough.
[2012-07-31 19:58:46 -0400] geekbri: Yours is more realistic than mine.
[2012-07-31 19:58:46 -0400] smw_work: lol
[2012-07-31 19:58:58 -0400] smw_work: geekbri, no it isn't, I have no idea what I am doing ;-)
[2012-07-31 19:59:05 -0400] spox: i dunno. i watched a few episodes on netflix for nostalgic sake.
[2012-07-31 19:59:11 -0400] spox: i remember him being a lot tougher when i was a kid
[2012-07-31 19:59:31 -0400] geekbri: spox: are you implying that he wasn't that great, skeletor was just that incompetant ?
[2012-07-31 19:59:34 -0400] smw_work: geekbri, yours seems more realistic at the moment ;-)
[2012-07-31 20:00:17 -0400] smw_work: hmm... I need to find the thundercats...
[2012-07-31 20:01:22 -0400] geekbri: smw_work: keep asking questions when you get stuck
[2012-07-31 20:01:59 -0400] smw_work: geekbri, will do. The thing I posted is good enough, working on running chef-solo
[2012-07-31 20:07:12 -0400] smw_work: how can I run a ruby dsl recipe with chef solo?
[2012-07-31 20:07:14 -0400] smw_work: is it possible?
[2012-07-31 20:07:35 -0400] smw_work: I see -j for specifying a json recipe
[2012-07-31 20:08:41 -0400] smw_work: sorry, these are roles, not recipes I am talking about
[2012-07-31 20:11:27 -0400] geekbri: -j is for specifying the node information in a json file
[2012-07-31 20:11:39 -0400] geekbri: and by node information I mean role :)
[2012-07-31 20:11:40 -0400] smw_work: right
[2012-07-31 20:11:50 -0400] smw_work: I want to specify role from the ruby dsl
[2012-07-31 20:12:02 -0400] geekbri: You just want to run a single recipe?
[2012-07-31 20:12:20 -0400] smw_work: no, I want to run a role which includes a list of recipies
[2012-07-31 20:12:28 -0400] geekbri: chef-solo -j /path/to/node.json
[2012-07-31 20:12:33 -0400] smw_work: eventually, it will include other config values
[2012-07-31 20:12:40 -0400] smw_work: geekbri, but it is not json
[2012-07-31 20:13:08 -0400] ivey: you need to make a node.json that specifies a run_list which includes your role
[2012-07-31 20:13:19 -0400] smw_work: ah
[2012-07-31 20:13:54 -0400] smw_work: that is what confused me
[2012-07-31 20:14:07 -0400] geekbri: Shazam!
[2012-07-31 20:14:21 -0400] ivey: you could also use shef if you want a repl, it's pretty cool
[2012-07-31 20:14:34 -0400] geekbri: smw_work: http://wiki.opscode.com/display/chef/Chef+Solo useful wiki page
[2012-07-31 20:14:46 -0400] smw_work: geekbri, that is the page I am reading
[2012-07-31 20:14:51 -0400] geekbri: ahh, gotcha
[2012-07-31 20:15:06 -0400] geekbri: I could have been more clear when answering, sorry :)
[2012-07-31 20:16:04 -0400] geekbri: the node information, as far as I know, has to be in json format.  The roles you include are written in the ruby DSL
[2012-07-31 20:18:25 -0400] smw_work: ok
[2012-07-31 20:18:32 -0400] smw_work: node info != role
[2012-07-31 20:18:38 -0400] smw_work: that was my problem
[2012-07-31 20:19:28 -0400] geekbri: you can think of the node json file as a stand in for the chef server :)
[2012-07-31 20:19:39 -0400] geekbri: Where it would normally store the run_list of a node.
[2012-07-31 20:22:01 -0400] smw_work: geekbri, so, it appears it can not find the role I gave it. How do I tell it where to look?
[2012-07-31 20:22:24 -0400] geekbri: smw_work: have you setup a solo.rb file?
[2012-07-31 20:22:27 -0400] smw_work: I configured the cookbook_path
[2012-07-31 20:22:29 -0400] smw_work: yes
[2012-07-31 20:22:33 -0400] geekbri: smw_work: you need to add a role_path to it
[2012-07-31 20:22:38 -0400] smw_work: thanks
[2012-07-31 20:27:14 -0400] smw_work: geekbri, "Invalid char `\302' in expression" :-\
[2012-07-31 20:28:36 -0400] geekbri: smw_work: what editor are you using?  Is it possible it added some weird junk into the file?
[2012-07-31 20:28:57 -0400] smw_work: using nano
[2012-07-31 20:29:03 -0400] smw_work: but copy/pasting may have
[2012-07-31 20:30:11 -0400] smw_work: fixed it :-)
[2012-07-31 20:30:21 -0400] smw_work: just deleted and remade every space XD
[2012-07-31 20:33:28 -0400] geekbri: sometimes fromdos will fix that for you
[2012-07-31 20:33:52 -0400] geekbri: tofrodos, whatever its called now a days
[2012-07-31 20:37:31 -0400] smw_work: geekbri, why was apache restarted the second time I ran it. Nothing was changed... right?
[2012-07-31 20:37:36 -0400] xmltok: can chef be configured to allow certain users to update only certain databags or would that need to be managed by a code repository?
[2012-07-31 20:37:46 -0400] geekbri: smw_work: I'm not familiar with those cookbooks so I can't say.
[2012-07-31 20:37:55 -0400] xmltok: say i wanted to allow certain users to update a few packages or modify configurations on those packages, but not other cookbooks
[2012-07-31 20:38:36 -0400] Xenith: I've got a question. Does chef have any reporting capabilities like puppet has? Such as being able to report failed runs with log outputs, etc.
[2012-07-31 20:39:58 -0400] mattray: Xenith: yes. There are reporting and exception handlers that will allow you to push successful and failed chef-client runs wherever you want
[2012-07-31 20:40:14 -0400] mattray: Xenith: ie. splunk, email, whatever
[2012-07-31 20:40:21 -0400] Xenith: mattray: Nothing built into the webui though, I assume?
[2012-07-31 20:40:37 -0400] mattray: coming in Chef 11 afaik
[2012-07-31 20:41:18 -0400] Xenith: Wasn't there talk of rewriting chunks of chef core in erlang for 11?
[2012-07-31 20:42:11 -0400] DrBB: Any tips on getting the ec2 plugin to run on ubuntu 10.04lts?  It tells me to install the knife-ec2 gem, which I already did.
[2012-07-31 20:42:27 -0400] mattray: Xenith: yes, much of the server has already been rewritten
[2012-07-31 20:42:46 -0400] mattray: Xenith: essentially open sourcing Hosted Chef's enhancements
[2012-07-31 20:42:55 -0400] Xenith: Ah, neat.
[2012-07-31 20:42:58 -0400] geekbri: Now I have to go relearn erlang so I can read the source
[2012-07-31 20:43:06 -0400] geekbri: Anybody have any erlang book recommendations! :)
[2012-07-31 20:43:08 -0400] Xenith: Thanks, the report handlers should be sufficient for what I need.
[2012-07-31 20:43:17 -0400] mattray: geekbri: the vast majority of patches for Chef were on the client
[2012-07-31 20:43:28 -0400] mattray: which will remain ruby
[2012-07-31 20:43:49 -0400] geekbri: Mm yes I would hope so :)
[2012-07-31 20:51:08 -0400] smw_work: geekbri, right now I am manually installing ruby from a tar.gz file. What would be the best way to do this in chef?
[2012-07-31 20:51:17 -0400] smw_work: geekbri, is there a good way?
[2012-07-31 20:52:38 -0400] DrBB: great -- so gem installed knife-ec2 into /var/lib/gems/1.8/gems/ but knife is running out of /opt/chef/embedded/bin/ruby
[2012-07-31 20:53:20 -0400] spox: DrBB: use chef_gem instead of gem_package
[2012-07-31 20:54:09 -0400] DrBB: how do i use chef_gem?  command not found
[2012-07-31 20:54:42 -0400] spox: oh, you are doing this manually?
[2012-07-31 20:55:02 -0400] spox: the embedded version of ruby and friends isn't really intended to be the "system ruby"
[2012-07-31 20:55:10 -0400] DrBB: i'm setting it up on my workstation, which i'm not managing with chef.
[2012-07-31 20:55:56 -0400] spox: you'll probably want a proper ruby install for your system rather than using the embedded ruby
[2012-07-31 20:56:10 -0400] DrBB: yeah, i get that -- totally makes sense.  but i need to be able to install stuff into the embedded ruby.
[2012-07-31 20:56:46 -0400] spox: i'm still not sure why, but perogative and all that :P
[2012-07-31 20:56:58 -0400] spox:  /opt/chef/embedded/bin/gem install some_gem_i_want
[2012-07-31 20:57:58 -0400] DrBB: mmm -- good idea.  i'll try that.
[2012-07-31 21:03:41 -0400] jameson: how would i check for a file on all my nodes in a set environment?
[2012-07-31 21:03:57 -0400] chip-: I know this is a bit OT, but I'm stumped. Potentially stupid git question: If I save a post-update hook in .git/hooks in a new repo, how the hell do I commit that up to the server?
[2012-07-31 21:04:11 -0400] jameson: I'm doing knife ssh -E "env_name" "role:*" "file /etc/chef/client.rb"
[2012-07-31 21:04:31 -0400] jameson: but it runs it for every node (even nodes that aren't in the "env_name" environment)
[2012-07-31 21:05:40 -0400] jameson: oo found it.. chef_environment:
[2012-07-31 21:15:47 -0400] jasonk: how do you give existing nodes a role?
[2012-07-31 21:16:38 -0400] mattray: jasonk: knife node run list add SERVER "role[foo'}
[2012-07-31 21:16:47 -0400] mattray: err "role[foo]"
[2012-07-31 21:20:14 -0400] jasonk: mattray:  thanks!
[2012-07-31 21:22:27 -0400] chip-: (Figured out my issue with git)
[2012-07-31 21:39:03 -0400] Guest68817: i am trying to upload a cookbook git. but it said "ERROR: Cookbook git depends on cookbook dmg version >= 0.0.0,"
[2012-07-31 21:39:27 -0400] mattray: Guest68817: looks like you need to upload the dmg cookbook
[2012-07-31 21:40:51 -0400] Guest68817: mattray: thanks. wait a second, does knife cookbook site vendor git -d   pull down dmg version?
[2012-07-31 21:43:10 -0400] mattray: Guest68817: dunno, try it :)
[2012-07-31 21:43:44 -0400] mattray: yes
[2012-07-31 21:48:18 -0400] Guest68817: mattray: weird. it actually requires me to upload runit dmg and yum  cookbooks before i can actualyl upload git.
[2012-07-31 21:48:33 -0400] mattray: knife upload cookbook git -a
[2012-07-31 21:49:06 -0400] mattray: err
[2012-07-31 21:49:13 -0400] mattray: knife cookbook upload git --include-dependencies
[2012-07-31 21:52:22 -0400] Guest68817: mattray: thanks. actually -d doesn't work because that's what i tried first. i will try aniother cookbook thanks
[2012-07-31 21:53:18 -0400] mattray: Guest68817: knife cookbook upload -h shows the options (-d is disable-editing)
[2012-07-31 21:56:37 -0400] Guest68817: mattray:  oh thanks! i think the doc is outdated then.
[2012-07-31 21:56:41 -0400] Guest68817: mattray: http://wiki.opscode.com/display/chef/Managing+Cookbooks+With+Knife#ManagingCookbooksWithKnife-upload
[2012-07-31 21:56:59 -0400] Guest68817: mattray: d, --include-dependencies:  if it's true i will report that.
[2012-07-31 22:13:59 -0400] jameson: if I ran sudo chef-client
[2012-07-31 22:14:12 -0400] jameson: it would re-register/update the node's information with the chef-server right?
[2012-07-31 22:14:15 -0400] jameson: (on hosted chef)
[2012-07-31 22:15:01 -0400] mattray: jameson: did you delete your client.pem?
[2012-07-31 22:15:15 -0400] mattray: jameson: I mean, yes it will update
[2012-07-31 22:15:28 -0400] mattray: jameson: it will re-register if there's no client.pem
[2012-07-31 22:16:00 -0400] jameson: mattray: I'm trying to get the client to update it's public_hostname/ipaddress with hosted-chef after I change it's IP address with elastic_ip
[2012-07-31 22:16:49 -0400] jameson: the best I can come up with is to make it do chef-client and check for completion via knife-ssh
[2012-07-31 22:16:57 -0400] mattray: yeah, that'll work
[2012-07-31 22:17:12 -0400] mattray: chef-client will rerun ohai which will update the hostname and ipaddress
[2012-07-31 22:17:26 -0400] mattray: the client.pem is the unique identifier, not the ip address
[2012-07-31 22:17:26 -0400] josephholsten: ugh, fat chefs
[2012-07-31 22:18:34 -0400] jameson: yeah, i'm doing a knife ec2 server create
[2012-07-31 22:18:43 -0400] jameson: but it hangs at the end because the node change's it ip address
[2012-07-31 22:18:50 -0400] jameson: so my entire deployment freezes :(
[2012-07-31 22:18:53 -0400] josephholsten: anyone want to track down memory reference leaks? my chef services are regularly >300MB these days. I have to watch them with monit these days.
[2012-07-31 22:19:08 -0400] mattray: jameson: that seems odd
[2012-07-31 22:19:47 -0400] mattray: josephholsten: which version?
[2012-07-31 22:20:00 -0400] mattray: jameson: changes its ip?
[2012-07-31 22:20:08 -0400] jameson: using elastic_ip
[2012-07-31 22:20:12 -0400] jameson: to change it's own ip address
[2012-07-31 22:20:23 -0400] jameson: the pipe just breaks without sending a disconnect message.
[2012-07-31 22:20:28 -0400] josephholsten: mattray: just updated to 10.12 across all boxes this week, I had been using a mix incl 10.8 and 10.10 previously
[2012-07-31 22:20:34 -0400] jameson: so my side of the ssh connection just hangs around all day :X
[2012-07-31 22:20:55 -0400] mattray: josephholsten: weird, is it persistently large, or just spikes?
[2012-07-31 22:21:16 -0400] mattray: jameson: you're changing the networking during the run?
[2012-07-31 22:21:52 -0400] josephholsten: mattray: it's such that if I have the monit process check set to >200MB, most boxes will restart chef every day.
[2012-07-31 22:21:53 -0400] jameson: yup
[2012-07-31 22:22:09 -0400] jameson: mattray: courtesty of RightAws::Ec2::ElasticIp
[2012-07-31 22:22:34 -0400] josephholsten: I've heard windows node objects are quite large, but we've only got half a dozen of them.
[2012-07-31 22:22:40 -0400] mattray: jameson: oh, so self-inflicted
[2012-07-31 22:22:51 -0400] jameson: yuuup
[2012-07-31 22:22:53 -0400] mattray: josephholsten: I think sascha_d had something about reducing windows node sizes
[2012-07-31 22:23:07 -0400] mattray: jameson: is there another ip address that persists?
[2012-07-31 22:23:17 -0400] mattray: jameson: ie. a public and an elastic?
[2012-07-31 22:23:22 -0400] jameson: well
[2012-07-31 22:23:27 -0400] jameson: the private would persist
[2012-07-31 22:23:42 -0400] mattray: josephholsten: there's also initial support for partial searches on hosted chef now
[2012-07-31 22:23:48 -0400] jameson: I get a
[2012-07-31 22:24:12 -0400] mattray: jameson: like could you use one of the cloud addresses instead of the public address?
[2012-07-31 22:24:22 -0400] mattray: jameson: for your ssh session
[2012-07-31 22:24:23 -0400] jameson: mmm SocketError: getaddrinfo: nodename nor servname provided, or not known
[2012-07-31 22:24:37 -0400] jameson: it's the knife ec2 server create that is hanging.
[2012-07-31 22:24:43 -0400] jameson: so there isn't much to do there :|
[2012-07-31 22:24:54 -0400] yfeldblum: mattray, how does that work?
[2012-07-31 22:24:58 -0400] mattray: jameson: kinda janky, but leave out the elasticip stuff the first run
[2012-07-31 22:25:20 -0400] mattray: jameson: then come back in with knife ssh -a cloud.somethingorother
[2012-07-31 22:25:42 -0400] mattray: jameson: or open a ticket and look at what's changed in knife ec2 lately
[2012-07-31 22:25:54 -0400] jameson: well.. it's expected
[2012-07-31 22:25:55 -0400] jameson: the hanging
[2012-07-31 22:25:55 -0400] mattray: yfeldblum: josephholsten: 1 sec
[2012-07-31 22:26:56 -0400] mattray: yfeldblum: josephholsten: https://github.com/opscode/partial_search
[2012-07-31 22:27:04 -0400] mattray: still very much in testing
[2012-07-31 22:27:20 -0400] jameson: because the server changed it's ip address.. so is my option really just to mark the node (say give it "go_change_ip")
[2012-07-31 22:27:26 -0400] jameson: and then make it change it's ip after?
[2012-07-31 22:27:34 -0400] jameson: using knife-ssh?
[2012-07-31 22:28:00 -0400] mattray: jameson: I haven't used elasticip, but don't you still have multiple ips?
[2012-07-31 22:28:23 -0400] mattray: jameson: you are just giving it an additional one?
[2012-07-31 22:28:37 -0400] sascha_d: ohai, wat?
[2012-07-31 22:28:45 -0400] sascha_d: I don't know if that's been merged yet
[2012-07-31 22:28:56 -0400] mattray: sascha_d: was it for ohai?
[2012-07-31 22:28:59 -0400] jameson: mattray: uh no, it's actually changing it's external ipaddress (so the old IP is no longer valid)
[2012-07-31 22:29:00 -0400] sascha_d: yeah
[2012-07-31 22:29:09 -0400] sascha_d: it's the windows/kernel plugin
[2012-07-31 22:29:18 -0400] sascha_d: broken out into two new plugins
[2012-07-31 22:29:22 -0400] sascha_d: whose names I cannot remember
[2012-07-31 22:29:23 -0400] mattray: jameson: oh, then I got nothing. I was dealing with floating ips for openstack and assumed they were similar
[2012-07-31 22:29:34 -0400] mattray: sascha_d: to be included in 10.14?
[2012-07-31 22:30:01 -0400] sascha_d: so what I did doesn't necessarily reduce the size of the node, but it allows you to disable the plugin that generates all the data that most of us find useless
[2012-07-31 22:30:37 -0400] mattray: yeah, so that and partial search make everything faster
[2012-07-31 22:30:48 -0400] sascha_d: original plugin had lots of useful info and a bunch of not so useful - kind of like reading the plug and play section of device manager
[2012-07-31 22:31:02 -0400] sascha_d: I <3 partial search
[2012-07-31 22:31:12 -0400] mattray: are you already using it?
[2012-07-31 22:31:51 -0400] sascha_d: no
[2012-07-31 22:31:56 -0400] sascha_d: I'm not currently working
[2012-07-31 22:32:00 -0400] sascha_d: so, no
[2012-07-31 22:32:11 -0400] sascha_d: and my recent gigs have been chef solo stuff
[2012-07-31 22:32:12 -0400] mattray: ahh, I didn't know if you'd seen https://github.com/opscode/partial_search and jumped on it
[2012-07-31 22:32:20 -0400] sascha_d: but it's possible I could be gainfully employed soon
[2012-07-31 22:32:30 -0400] sascha_d: no, I think I've just heard partial search gossip
[2012-07-31 22:33:00 -0400] yfeldblum: mattray, i think that's the right way to do it
[2012-07-31 22:33:03 -0400] sascha_d: or I follow the problems that interest me on the mailing list
[2012-07-31 22:33:39 -0400] josephholsten: I'd like to just take a week and run one of my chef-clients with memprof and thin things out.
[2012-07-31 22:33:40 -0400] yfeldblum: mattray, the right API for the partial search
[2012-07-31 22:33:56 -0400] josephholsten: I had a proc at 1.25GB resident last week.
[2012-07-31 22:36:06 -0400] josephholsten: mattray: is partial search coming to ruby-chef-server? or just coming when erchef is released?
[2012-07-31 22:36:25 -0400] mattray: josephholsten: almost certainly with Chef 11 (erchef)
[2012-07-31 22:36:36 -0400] josephholsten: woo
[2012-07-31 22:37:45 -0400] josephholsten: oh, what's the best way to upgrade a chef 10.8 server that got set up with deb packages?
[2012-07-31 22:38:22 -0400] josephholsten: there isn't a server omnibus release yet, right?
[2012-07-31 22:39:35 -0400] mattray: not yet
[2012-07-31 22:39:43 -0400] mattray: again, Chef 11
[2012-07-31 22:41:57 -0400] hoover_damm: mattray, keep saying that word and they'll just start asking for it
[2012-07-31 22:42:02 -0400] hoover_damm: so becareful of what you wish for
[2012-07-31 23:02:16 -0400] sabooky: How does one deal with multiple recipies modifying the same file?
[2012-07-31 23:02:50 -0400] sabooky: Basically I have an /etc/sysconfig/tomcat file that defines a few variables.. but then I want my jenkins cookbook to update /etc/sysconfig/tomcat to add JENKINS_HOME
[2012-07-31 23:04:46 -0400] smw_work: Hi all. I have a recipe that installs a file and then needs to restart a process called "god" which is installed from another recipe here: https://github.com/opscode/cookbooks/blob/master/god/recipes/default.rb
[2012-07-31 23:05:06 -0400] smw_work: how would I make sure when files change in my recipe, god is restarted?
[2012-07-31 23:10:08 -0400] danryan: Hey chefs, did something in the way LWRPs handle resource attributes change from 0.9 to 0.10? I have an LWRP that is failing on 0.10 but not earlier versions:
[2012-07-31 23:10:09 -0400] danryan: https://gist.github.com/65bde344853673af1972
[2012-07-31 23:10:17 -0400] smw_work: and how do I copy a file to a location without template?
[2012-07-31 23:10:50 -0400] danryan: The gist of the, er gist, is that when an attribute is :required => true, the :default is ignored when no attribute is specified in the resource block
[2012-07-31 23:11:46 -0400] smw_work: nm, figured that out, now back to the god restarting :-)
[2012-07-31 23:53:17 -0400] freerobby: what is the best practice for having a cookbook set variables that are available to cookbooks that include it?
[2012-07-31 23:53:49 -0400] freerobby: err, rather recipes that set variables for future recipes
[2012-07-31 23:55:26 -0400] yfeldblum: freerobby, generally not a great idea; prefer for one recipe to set node attributes and for the other recipe to read node attributes, if possible
[2012-07-31 23:55:27 -0400] cwj: thats what node attributes are for
[2012-07-31 23:56:16 -0400] freerobby: yfeldblum: Even if said attribute/variable is never needed again after the recipe runs?
[2012-07-31 23:56:35 -0400] yfeldblum: freerobby, yeah, why not?
[2012-07-31 23:56:51 -0400] yfeldblum: freerobby, i like to think of recipes as having, as their inputs, the node attributes
[2012-07-31 23:57:11 -0400] freerobby: yfeldblum: Just reminds me a bit of global variable syndrome. Not a big deal, just wasn't sure if that was the intended method
[2012-07-31 23:58:28 -0400] freerobby: yfeldblum: Unrelated  we implemented our staging environment based on a compromise between your system (separate orgs) and the traditional system (separate environments). We've been thrilled with it.
[2012-07-31 23:58:35 -0400] freerobby: your knife.rb hack worked great
[2012-07-31 23:58:50 -0400] yfeldblum: freerobby, cool!

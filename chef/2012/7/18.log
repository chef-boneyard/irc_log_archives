[2012-07-18 00:12:35 -0400] Majost: So I created this resource file: http://pastebin.com/USn1MSGN
[2012-07-18 00:12:39 -0400] Majost: but when I try to use it
[2012-07-18 00:12:52 -0400] Majost: I get this error: http://pastebin.com/RBDW6tPY
[2012-07-18 00:13:33 -0400] Majost: db_bag is defined in the default recipe
[2012-07-18 00:15:29 -0400] Majost: I suppose my question is; what am I doing wrong in the resource?
[2012-07-18 00:18:45 -0400] Majost: cwj: Is there anything specific I need to do so that 'template' becomes a valid method in my resource?
[2012-07-18 00:19:30 -0400] Majost: the examples do not seem to suggest an include or anything is required
[2012-07-18 00:19:40 -0400] Majost: but the stacktrace I am getting says otherwise
[2012-07-18 00:20:25 -0400] cwj: i think you will have to pass db_bag to your resource an argument/attribute
[2012-07-18 00:21:00 -0400] cwj: as for using a template in your resource, i thought that was supposed to work
[2012-07-18 00:22:03 -0400] cwj: if that first pastebin is the entire contents of your resource then i think you are missing some things
[2012-07-18 00:22:29 -0400] Majost: it is
[2012-07-18 00:22:38 -0400] Majost: less the MIT license. heh
[2012-07-18 00:23:02 -0400] cwj: you should look at some other LWRP examples, because that would go in the provider, not the resource
[2012-07-18 00:24:57 -0400] Majost: for a template?
[2012-07-18 00:27:50 -0400] cwj: i feel like we might be using the same term to talk about two different things. is your full cookbook visible somewhere?
[2012-07-18 00:31:47 -0400] yfeldblum: Majost, no, there is nothing specific you need to do to make 'template' become a valid method in your resource
[2012-07-18 00:31:55 -0400] yfeldblum: Majost, it isn't a valid method and never will be
[2012-07-18 00:32:44 -0400] yfeldblum: Majost, take a look at some of the resources that opscode wrote to give you an idea of what a resource is: https://github.com/opscode/chef/tree/master/chef/lib/chef/resource
[2012-07-18 00:37:18 -0400] karsten: is there any way for a chef node to find out what its node name is?
[2012-07-18 00:37:25 -0400] karsten: ohai returns the hostname.
[2012-07-18 00:38:10 -0400] cwj: karsten: its stored as node[:name] is it not
[2012-07-18 00:38:24 -0400] karsten: cwj: ... where, and accessed how?
[2012-07-18 00:38:54 -0400] karsten: cwj: file, ohai data object, knife data request ... ?
[2012-07-18 00:39:26 -0400] cwj: *the* node object, accessible in your recipe, etc
[2012-07-18 00:39:53 -0400] Majost: yfeldblum: thanks
[2012-07-18 00:43:52 -0400] karsten: cwj: is there a command I can run *from the node* to determine this?
[2012-07-18 00:44:01 -0400] karsten: cwj: ... or only from w/in a recipe?
[2012-07-18 00:44:42 -0400] karsten: hrm.  gotta go.
[2012-07-18 00:44:50 -0400] cwj: by default ohai collects it from hostname -s, but it can be overridden by the chef-client or chef-solo config
[2012-07-18 01:00:36 -0400] mhalligan: ugh. there's nothing more frustrating than chef crapping out halfway through the mysql cookbook, then spending the next hour remembering how to make dpkg actually uninstall and reinstall mysql fully.
[2012-07-18 01:00:38 -0400] mhalligan: packaging sucks.
[2012-07-18 01:01:10 -0400] pbuckley: or you've just gotten lazy ;)
[2012-07-18 01:05:19 -0400] mhalligan: need a big warning somewhere: all cookbooks are likely to be broken on ubuntu 12.04. use a scotty factor of 10x for estimates.
[2012-07-18 01:09:15 -0400] hoover_damm: That's common knowledge of any new version of a distro
[2012-07-18 01:09:31 -0400] hoover_damm: it's unfortunate that most people don't realize that a new version of a distribution means there's edges to be snipped
[2012-07-18 01:10:47 -0400] pbuckley: ^^
[2012-07-18 01:10:59 -0400] pbuckley: its actually gotten alot better then it used to be
[2012-07-18 01:11:26 -0400] hoover_damm: basically the pattern I would like to see Ubuntu/Debian provide that could make this problem a lot less brittle would be more preseeding
[2012-07-18 01:11:37 -0400] hoover_damm: allow us to preseed all of our configuration options upon installation of a package
[2012-07-18 01:11:50 -0400] hoover_damm: that means we only have to worry about what we want to change, not what is
[2012-07-18 01:12:05 -0400] hoover_damm: not always easier
[2012-07-18 01:12:26 -0400] hoover_damm: but at least then Ubuntu/Debian might agree with what Chef does better? *shrug* likely wrong but it's a thought
[2012-07-18 01:12:40 -0400] hoover_damm: and you can do a lot of this with work already
[2012-07-18 01:12:43 -0400] hoover_damm: it just could be easier
[2012-07-18 01:52:33 -0400] esad: I need to add some non-chef nodes to munin configuration
[2012-07-18 01:52:44 -0400] esad: can I just create nodes in the manage console
[2012-07-18 01:52:51 -0400] esad: how would I assign them hostnames?
[2012-07-18 01:53:02 -0400] esad: so that chef can update munin server cnfig and allow those clients to connect
[2012-07-18 02:05:08 -0400] hoover_damm: esad, knife node from file is one option
[2012-07-18 02:05:38 -0400] hoover_damm: esad, or if you prefer the ruby way you can b=Chef::Node.load("nodename") and just ruby it up :(
[2012-07-18 04:18:44 -0400] forestbird: any idea why the apache cookbook overwrites the chef solo json passed via vagrant? is that a vagrant issue?
[2012-07-18 04:25:24 -0400] flaccid: forestbird: i believe so
[2012-07-18 04:26:03 -0400] flaccid: i don't think teh apache cookbook would be touching the node.json
[2012-07-18 04:26:27 -0400] flaccid: you have to do things like https://github.com/scalarium/cookbooks/blob/master/Vagrantfile or http://jbbarth.com/archives/2011/3/20/vagrant_provisioning_with_chefsolo/
[2012-07-18 04:40:32 -0400] littleidea: forestbird: maybe look at the attributes that are being set in the json and look at whatever is being overwritten in the cookbook, may be an attribute precedence issue
[2012-07-18 04:46:54 -0400] flaccid: if in a template, it has a placeholder such as  @database['database'] how do i express that with the variables option in my template resource?
[2012-07-18 04:47:09 -0400] forestbird: littleidea: i thought the json should have precedence...
[2012-07-18 04:50:03 -0400] littleidea: forestbird: I would have thought so for most scenarios, but it something is being overwritten, that's the first thing I would think to look at: how is this specified in the cookbook.
[2012-07-18 04:52:41 -0400] forestbird: littleidea:   set['apache']['user']    = "www-data"
[2012-07-18 04:52:41 -0400] forestbird:   set['apache']['group']   = "www-data"
[2012-07-18 04:54:43 -0400] flaccid: i see in https://github.com/opscode-cookbooks/application_php shows i fink
[2012-07-18 04:54:49 -0400] c_t: littleidea: also look at this if you haven't: http://wiki.opscode.com/display/chef/Attributes#Attributes-AttributeTypeandPrecedence
[2012-07-18 04:55:32 -0400] c_t: oh wait, it's forestbird having the trouble?
[2012-07-18 04:57:08 -0400] littleidea: forestbird: so those are set/normal, which is higher precedence than default, so maybe that is the issue? the vagrant json might be set at the default level? I'd have to dig into code to know for sure.
[2012-07-18 04:57:45 -0400] forestbird: well, i made a role now and will try to use override
[2012-07-18 05:00:46 -0400] forestbird: ok, that did the trick
[2012-07-18 05:01:02 -0400] forestbird: thanks for pointing me to that...
[2012-07-18 05:01:25 -0400] forestbird: but I'm not satisfied with the json being ignored... :)
[2012-07-18 05:02:42 -0400] forestbird: i checked the contents of "node" and it is really that the json is just blasted away by the recipe defintion
[2012-07-18 05:05:54 -0400] senilegenius: anyone know how to force delete a nodeafter screwing up the run list with a knife exec -E nodes.transform ? :(
[2012-07-18 05:06:34 -0400] senilegenius: when i try to show or delete that node now i just get:  Unable to create Chef::RunList::RunListItem from String:"recipe[recipe[recipe[]]]": must be recipe[] or role[]
[2012-07-18 05:08:00 -0400] c_t: can you edit the node and remove the runlist?
[2012-07-18 05:08:32 -0400] senilegenius: nope same error :S
[2012-07-18 05:10:19 -0400] c_t: this is sort of throwing stuff against the wall, but can you do it via the management console?
[2012-07-18 05:11:23 -0400] senilegenius: heh. i rarely try the easy stuffi like to make things hard on myselftrying that now :)
[2012-07-18 05:11:47 -0400] c_t: oh, I very rarely touch said management console, but it's worth a shot
[2012-07-18 05:13:22 -0400] senilegenius: c_t: thanks that totally worked :)
[2012-07-18 05:13:41 -0400] c_t: sweet
[2012-07-18 05:13:54 -0400] senilegenius: funny knife would error out but the mgmt console could handle it.
[2012-07-18 06:30:02 -0400] countdigi: i feel lonely as an rhel admin in a chef world ;-)
[2012-07-18 06:30:25 -0400] Randm: burn the non-debian user!
[2012-07-18 06:30:30 -0400] countdigi: lol
[2012-07-18 06:31:25 -0400] countdigi: definitely makes me learn the intricacies of cookbooks :-)
[2012-07-18 06:33:51 -0400] Randm: I sent some patches off when I was doing chef on rhel work
[2012-07-18 06:34:32 -0400] countdigi: cool tx for sending it upstream
[2012-07-18 06:34:59 -0400] Randm: well, mostly tickets
[2012-07-18 06:35:50 -0400] countdigi: im fairly new to chef.. studied puppet for a while but the more i learned ruby i finally came to the "dark side" :-)
[2012-07-18 06:53:08 -0400] linux2000in: hi
[2012-07-18 06:56:51 -0400] specialsauce: countdigi, rhel here too o/
[2012-07-18 06:58:43 -0400] countdigi: cool
[2012-07-18 06:59:08 -0400] countdigi: messing around w/ fog and rhel 63 right now w/ rvm
[2012-07-18 06:59:11 -0400] countdigi: on aws
[2012-07-18 06:59:39 -0400] countdigi: and just to spill all the beans i also admin aix :-)
[2012-07-18 07:00:22 -0400] specialsauce: i used to be solaris admin, much happer in happy shiny linuxland
[2012-07-18 07:00:34 -0400] countdigi: fortunately there is not much we have to do - it just runs a couple ent apps and oracle .. actually quite solid on bazillion dollar hardware :-)
[2012-07-18 07:00:39 -0400] countdigi: yeah
[2012-07-18 07:00:45 -0400] countdigi: almost rid of solaris in my shop
[2012-07-18 07:00:57 -0400] countdigi: i grew up on solaris but man oracle tanked it
[2012-07-18 07:02:39 -0400] specialsauce: yep, 5 years ago I was in a 100% solaris env, then it just died a death almost overnight
[2012-07-18 07:05:19 -0400] lflux: We had people defending Solaris yet after the Sol10 fiasco (no patches unless you were licensed)
[2012-07-18 07:05:48 -0400] lflux: I rolled out Sol9 at our computer club. back then we didn't have chef, we had AFS package
[2012-07-18 07:06:00 -0400] countdigi: i got around that by using my old universities id on sunsolve ;-)
[2012-07-18 07:06:21 -0400] countdigi: but yeah it went downhill quick like u said
[2012-07-18 07:07:16 -0400] lflux: oh yeah, smuggled patches from the central IT with Sunsolve accounts :)
[2012-07-18 07:07:50 -0400] lflux: man this brings back memories of flashing PROMs in a 50 high stack of Ultra1s
[2012-07-18 07:08:07 -0400] countdigi: lol
[2012-07-18 07:08:45 -0400] Randm: guy I knew called sun up in the 90s
[2012-07-18 07:08:46 -0400] countdigi: of course these are purely fictional accounts for entertainment that i put forth
[2012-07-18 07:09:00 -0400] Randm: because the ethernet eeprom got wiped
[2012-07-18 07:09:04 -0400] Randm: so it didn't know its mac address
[2012-07-18 07:09:08 -0400] Randm: and there was no way to set it
[2012-07-18 07:09:14 -0400] Randm: they asked for his serial #
[2012-07-18 07:09:18 -0400] Randm: "4"
[2012-07-18 07:09:28 -0400] lflux: Randm: yep, that happened often enough. you could set it from the forth prompt
[2012-07-18 07:09:30 -0400] Randm: It was written in the back in grease pensile.
[2012-07-18 07:09:35 -0400] lflux: on SS10's IIRC
[2012-07-18 07:09:52 -0400] Randm: lflux: this machine had an m68k cpu.
[2012-07-18 07:10:04 -0400] Randm: They were like "uhhh, hold on"
[2012-07-18 07:10:12 -0400] Randm: and found some manager that had worked on those boxes
[2012-07-18 07:10:19 -0400] Randm: they got him a new eeprom though
[2012-07-18 07:10:29 -0400] lflux: ah, oldschool
[2012-07-18 07:10:30 -0400] c_t: there's a place in Seattle with tons and tons of old random Sun cards
[2012-07-18 07:10:31 -0400] Randm: yeah
[2012-07-18 07:10:38 -0400] c_t: probably not quite that old
[2012-07-18 07:10:44 -0400] Randm: heh
[2012-07-18 07:10:49 -0400] c_t: more SBus stuff than you can shake a stick at though
[2012-07-18 07:10:49 -0400] Randm: dunno
[2012-07-18 07:10:54 -0400] Randm: sbus is pretty old.
[2012-07-18 07:10:59 -0400] Randm: could be VME though?
[2012-07-18 07:11:05 -0400] countdigi: i lost blood multiple times to sbus installations
[2012-07-18 07:11:26 -0400] c_t: I think it's mainly of mid-90s vintage, I think
[2012-07-18 07:11:41 -0400] c_t: this place was really neat about, oh, 10-11 years ago
[2012-07-18 07:11:46 -0400] lflux: ugh yeah. open the lid, remove one or both cg6, move jumper, flash PROM, move jumper, replace
[2012-07-18 07:11:59 -0400] c_t: now, the rare times I go in there, it feels like I walked into an episode of "Hoarders"
[2012-07-18 07:12:32 -0400] c_t: "Boxes of mangled laptop cases, boxes of ISA sound cards, boxes of random SBus NIC cards..."
[2012-07-18 07:12:35 -0400] lflux: countdigi: we still have a souped up SS20 running 2.6 as a mailserver.
[2012-07-18 07:12:40 -0400] Randm: countdigi: because you needed a new space heater?
[2012-07-18 07:12:58 -0400] lflux: hypersparcs are good heaters.
[2012-07-18 07:13:09 -0400] c_t: heh, I got one that beats that
[2012-07-18 07:13:30 -0400] c_t: a long ass time ago, in the heady time of the year 2000, I wandered through the computer section in my local Goodwill
[2012-07-18 07:13:35 -0400] countdigi: i regret a lot of things i threw away - some of the old richard stevens books (got em used again on amazon) ... dont know what i was thinkin
[2012-07-18 07:13:42 -0400] c_t: and my eyes fell up on a curiously large computer
[2012-07-18 07:13:47 -0400] Randm: what was that IRIX box that needed three phase power and didn't meet radio emission standards?
[2012-07-18 07:13:52 -0400] c_t: not enormous, but it caught my eye for looking odd
[2012-07-18 07:14:07 -0400] Randm: NeXT cube?
[2012-07-18 07:14:07 -0400] c_t: It was a MicroPDP-11/23
[2012-07-18 07:14:11 -0400] Randm: oi
[2012-07-18 07:14:15 -0400] countdigi: cool
[2012-07-18 07:14:19 -0400] c_t: for $18
[2012-07-18 07:14:24 -0400] c_t: needless to say I bought that shit
[2012-07-18 07:14:29 -0400] c_t: (bent the cart loading it in too)
[2012-07-18 07:14:33 -0400] Randm: there was probably more than $18 worth of steel in it
[2012-07-18 07:14:43 -0400] c_t: almost got it working a few years later
[2012-07-18 07:14:59 -0400] c_t: with an emulated tape drive & a hacked up version of 2.9BSD
[2012-07-18 07:15:06 -0400] c_t: but... the hard drive had died :-(
[2012-07-18 07:15:23 -0400] c_t: and a new one would have been between $250 and $700, depending on the model
[2012-07-18 07:15:37 -0400] countdigi: to come back to present is 1.9.3 stable w/ chef? ive been running 192p320 for a long time and it just works so haven't upgraded but doing a new ami image and curious
[2012-07-18 07:16:00 -0400] c_t: later someone drove his truck through my house, and the front panel of the PDP-11 got sheared off (I had never put it back together)
[2012-07-18 07:16:06 -0400] c_t: so that was the end of that
[2012-07-18 07:16:31 -0400] countdigi: i have a good/bad habit of holdin back a version on ruby/perl :-)
[2012-07-18 07:17:54 -0400] BryanWB_: ohai chef!
[2012-07-18 07:18:43 -0400] c_t: BryanWB_ might be able to answer that question, countdigi
[2012-07-18 07:18:56 -0400] BryanWB_: i can try
[2012-07-18 07:19:23 -0400] c_t: is 1.9.3 stable with chef, he asks
[2012-07-18 07:20:22 -0400] countdigi: building a new ami image w/ rhel63 and by default i was going to go w/ 1.9.2p320 w/ chef 10.12.0
[2012-07-18 07:20:38 -0400] countdigi: just curious what others are deploying for latest
[2012-07-18 07:21:30 -0400] BryanWB_: countdigi: it should work fine
[2012-07-18 07:21:37 -0400] BryanWB_: countdigi: use the omnibus installer
[2012-07-18 07:21:46 -0400] BryanWB_: countdigi: anything else is just wasting time
[2012-07-18 07:22:17 -0400] countdigi: heard of that but is it outside of chef? chicken-n-egg?
[2012-07-18 07:22:23 -0400] BryanWB_: countdigi: and it won't affect any rubies installed b4 or after   http://www.opscode.com/chef/install
[2012-07-18 07:22:43 -0400] BryanWB_: countdigi: u don't need chef installed to use it, it installs chef
[2012-07-18 07:22:52 -0400] BryanWB_: think of it as the farm :)
[2012-07-18 07:23:11 -0400] countdigi: ah
[2012-07-18 07:23:22 -0400] countdigi: kinda like rvm for chef
[2012-07-18 07:23:36 -0400] Randm: it installs chef, ruby, etc in a self-contained little world
[2012-07-18 07:24:56 -0400] countdigi: omnibus(n):  a horse-drawn wagon for passenger transport
[2012-07-18 07:25:16 -0400] countdigi: ;-)
[2012-07-18 07:26:23 -0400] Randm: because no one can be trusted to package the 'right' version of ruby
[2012-07-18 07:35:34 -0400] countdigi: wow thats a new paradigm ... very weird... not saying anything bad but wow
[2012-07-18 07:36:19 -0400] countdigi: ah clojure based
[2012-07-18 07:37:05 -0400] BryanWB_: u c w/ it many ruby-based projects cuz debian and rhel both screw up ruby
[2012-07-18 07:37:26 -0400] countdigi: [root@ip-10-76-131-213 ~]# lein deps
[2012-07-18 07:37:27 -0400] countdigi: WARNING: You're currently running as root; probably by accident.
[2012-07-18 07:37:30 -0400] countdigi: normal?
[2012-07-18 07:37:30 -0400] bawt: normal is what you set on the node by editing it
[2012-07-18 07:37:37 -0400] Randm: is ruby 1.9 not backwards compatible with 1.8?
[2012-07-18 07:37:42 -0400] Randm: ;)
[2012-07-18 07:37:43 -0400] BryanWB_: i never use the clojure part
[2012-07-18 07:37:48 -0400] BryanWB_: Randm: parts aren't
[2012-07-18 07:38:04 -0400] Randm: yeah, that's most likely why though.  same with perl, python, etc.
[2012-07-18 07:38:13 -0400] Randm: java, c, c++, etc
[2012-07-18 07:38:52 -0400] Randm: python was really bad for a while because redhat was using it for their systems tools
[2012-07-18 07:41:38 -0400] countdigi: anaconda... yikes
[2012-07-18 07:42:58 -0400] countdigi: wasnt jlo in that?
[2012-07-18 07:56:10 -0400] lflux: Randm: yeah, replacing the default python on centos is ... interesting.
[2012-07-18 08:11:44 -0400] cnf: ^^;
[2012-07-18 08:11:54 -0400] cnf: what's wrong with it? is it that old?
[2012-07-18 08:17:04 -0400] countdigi: #ruby-lang and home u are arachnid
[2012-07-18 08:19:52 -0400] lflux: cnf: it's like 2.4 or something, but /usr/bin/python is used for yum and other system tools
[2012-07-18 08:20:00 -0400] lflux: and replacing it with 2.6 breaks ym
[2012-07-18 08:20:29 -0400] cnf: lflux: o,O
[2012-07-18 08:20:34 -0400] cnf: that is... sad...
[2012-07-18 08:20:50 -0400] cnf: 2.6 should be backwards compatible... it should not break
[2012-07-18 08:20:52 -0400] lflux: this is true for 5 at least
[2012-07-18 08:20:55 -0400] cnf: lflux: also, even on centos 6?
[2012-07-18 08:20:58 -0400] cnf: ah
[2012-07-18 08:21:02 -0400] lflux: 6 has a newer
[2012-07-18 08:21:26 -0400] cnf: still, their tools should not break on latest minor release
[2012-07-18 08:29:40 -0400] m1lth14d3s: hi, I'm newby in chef. I would like to install postgres 9.1 on debian sqeezy. But If I see well the postges cookbook hasn't support that yet. I found the deb package on the web so I could download it but I don't know which resource support that.
[2012-07-18 09:00:32 -0400] bahman2000: who's awake :) ?
[2012-07-18 09:01:04 -0400] bahman2000: trying to set up a workstation with OHC where do i grab my user private key?
[2012-07-18 09:02:15 -0400] senilegenius: bahman2000: OHC?
[2012-07-18 09:02:23 -0400] bahman2000: hosted chef
[2012-07-18 09:02:28 -0400] bahman2000: opscode hosted chef
[2012-07-18 09:02:58 -0400] bahman2000: ah found it
[2012-07-18 09:03:12 -0400] bahman2000: it's under my community profile
[2012-07-18 09:03:13 -0400] senilegenius: ahyah, under change password me thinkgs
[2012-07-18 09:03:23 -0400] senilegenius: yup
[2012-07-18 09:19:18 -0400] proffalken: anyone know if there is a graceful way to handle old node attributes in Chef Recipies?
[2012-07-18 09:19:50 -0400] proffalken: I've got a few nodes that for what ever reason haven't checked in for some time and the "old" attribute values are seriously screwing some of my code over
[2012-07-18 09:21:28 -0400] bahman2000: flaccid you here?
[2012-07-18 09:26:52 -0400] haad: hi
[2012-07-18 09:27:19 -0400] haad: if I have a cookbook with multiple recipes
[2012-07-18 09:27:35 -0400] haad: how can I run one of them which is not run by default
[2012-07-18 09:27:58 -0400] haad: https://github.com/gchef/bootstrap-cookbook -> ruby_apps recipe
[2012-07-18 09:38:55 -0400] flaccid: bahman2000: no
[2012-07-18 09:39:04 -0400] bahman2000: oh sheet
[2012-07-18 09:39:36 -0400] bahman2000: flaccid i got a mac-chef question tho :(
[2012-07-18 09:40:08 -0400] flaccid: why do you still have it?
[2012-07-18 09:40:24 -0400] bahman2000: cause i'm stubborn that way...
[2012-07-18 09:46:20 -0400] nacer: Does someone know t he best way to manage ruby version for my server "I use passenger"
[2012-07-18 09:46:24 -0400] nacer: ?
[2012-07-18 09:49:30 -0400] maruq: nacer: not entirely sure what you mean you want to use a ruby version other than the one chef uses?
[2012-07-18 09:49:56 -0400] nacer: maruq: other than my system is ship to
[2012-07-18 09:50:19 -0400] maruq: nacer: eg. chef runs under ruby 1.8.x, you want 1.9.x?
[2012-07-18 09:50:33 -0400] nacer: maruq: no it's really about chef
[2012-07-18 09:50:49 -0400] nacer: maruq: but i will use a cookbook for install my new ruby version
[2012-07-18 09:51:06 -0400] maruq: nacer: so, you want chef to run on 1.9.x?
[2012-07-18 09:51:28 -0400] nacer: maruq: chef already run in 1.9.x with the omnibus installation method
[2012-07-18 09:51:55 -0400] maruq: nacer: I'm not sure if it's exactly what you're after, but I'm using https://github.com/fnichol/chef-rvm & https://github.com/fnichol/chef-rvm_passenger
[2012-07-18 09:52:05 -0400] bahman2000: flaccid i figured it out :))))
[2012-07-18 09:52:10 -0400] nacer: maruq: i want a new version of ruby in my system
[2012-07-18 09:52:25 -0400] nacer: maruq: and i want it managed by chef :)
[2012-07-18 09:52:40 -0400] maruq: nacer: ah, then check out those links I just posted
[2012-07-18 09:52:49 -0400] nacer: maruq: ok, you use them ?
[2012-07-18 09:53:54 -0400] maruq: nacer: yep. I call rvm::system to install 1.9.3 system-wide, rvm::gem_package sets up gems correctly, rvm_passenger::apache2 installs passenger
[2012-07-18 09:54:18 -0400] nacer: maruq: ok that's what ia want
[2012-07-18 09:54:25 -0400] maruq: nacer: they all provide passenger::nginx if that's more your thing too
[2012-07-18 11:27:43 -0400] withnale: Hello. Is there any way to reference one of my own defines using a variable?
[2012-07-18 11:28:07 -0400] withnale: for example    deploy_myappserver_$var do ... end ?
[2012-07-18 12:10:16 -0400] msturm: hey, is there a way to deal with two variants of a cookbook on one chef server? I want a modified community cookbook in some roles and the original community cookbook in another role?
[2012-07-18 12:18:12 -0400] workmad3: msturm: pretty sure you can specify the version you want to use
[2012-07-18 12:19:13 -0400] dwhsix: msturm: we do that a lot.  specify cookbook versions in their metadata, and specify which version to use (in our case, we do it in the environment)
[2012-07-18 12:27:12 -0400] msturm: ok, thx, I was wondering if there is some other namespacing technique, but different versions is may be the most simple solution
[2012-07-18 12:29:02 -0400] dwhsix: msturm: hmm actually, reading more closely, I see what you mean these aren't different versions of the same cookbook, but really branches.
[2012-07-18 12:29:51 -0400] dwhsix: how modified are they from one another?  can you make the modifications logic-based and keep one cookbook?
[2012-07-18 12:30:16 -0400] dwhsix: that has different behavior by looking at the role(s) of the node it's running on?
[2012-07-18 12:30:22 -0400] yfeldblum: msturm, why not modify the cookbook such that it is appropriate for all of your use cases?
[2012-07-18 12:30:30 -0400] dwhsix: yfeldblum: jinx
[2012-07-18 12:33:54 -0400] msturm: we don't want to mix the two cookbooks because they are used by different departments/developers
[2012-07-18 12:35:20 -0400] msturm: so I think different versions will solve that
[2012-07-18 12:41:34 -0400] BryanWB_: new foodfightshow out ! http://bit.ly/Q5PTWR
[2012-07-18 12:46:47 -0400] yfeldblum: msturm, two departments, one chef-server?
[2012-07-18 12:47:00 -0400] yfeldblum: msturm, won't that cause conflicts of multiple kinds?
[2012-07-18 12:47:37 -0400] geekbri: BryanWB_: Listening now!
[2012-07-18 12:48:03 -0400] msturm: yfeldblum: this is the first one :)
[2012-07-18 12:48:14 -0400] BryanWB_: i love the Graphite Badass
[2012-07-18 12:51:25 -0400] msturm: yfeldblum: but I agree, without namespacing the contribution of multiple departments on one set of cookbooks is not that easy
[2012-07-18 12:54:17 -0400] geekbri: BryanWB_: where did you guys get the wild guitar riffs you use in the show
[2012-07-18 12:57:00 -0400] BryanWB_: eric reeves
[2012-07-18 12:57:07 -0400] BryanWB_: recorded them for the show
[2012-07-18 12:57:24 -0400] geekbri: sweet
[2012-07-18 12:57:27 -0400] yfeldblum: msturm, why do you need to have multiple departments share only one chef-server?
[2012-07-18 12:57:37 -0400] BryanWB_: yeah, i love that track
[2012-07-18 13:00:50 -0400] msturm: yfeldblum: at least in production another chef server instance is expensive, you need backups, HA, monitoring so we try to minimize the amount
[2012-07-18 13:03:42 -0400] geekbri: I'd be curious to know how many people here are actually using chef to deploy their own applications, and how many people are still using things like fabric / capistrano / etc
[2012-07-18 13:06:20 -0400] DigitalFlux: Hi Guys
[2012-07-18 13:06:25 -0400] DigitalFlux: How can something like this happen -> https://gist.github.com/3136107
[2012-07-18 13:06:34 -0400] DigitalFlux: The node is there indeed, but i can't search for it ?!
[2012-07-18 13:08:10 -0400] ashb: DigitalFlux: what do you mean?
[2012-07-18 13:08:27 -0400] DigitalFlux: ashb: the node is shown when i use knife node list
[2012-07-18 13:08:43 -0400] DigitalFlux: ashb: but if i use knife search with a query that matches it, it isn't shown ..
[2012-07-18 13:09:03 -0400] ashb: it looks like it is in your gist
[2012-07-18 13:10:27 -0400] nacer: maruq: to bad this packages (rvm) are not in community repo
[2012-07-18 13:11:24 -0400] maruq: nacer: yeah, would be nice. although I mostly use librarian-chef, it works like Bundler for ruby
[2012-07-18 13:11:25 -0400] DigitalFlux: ashb: hmm, however
[2012-07-18 13:11:34 -0400] DigitalFlux: ashb: using that with knife ssh doesn't :/
[2012-07-18 13:11:36 -0400] DigitalFlux: knife ssh name:chef-server 'sudo chef-client -N chef-server' -a ec2.public_hostname
[2012-07-18 13:11:43 -0400] DigitalFlux: returns -> FATAL: No nodes returned from search!
[2012-07-18 13:12:07 -0400] maruq: nacer: https://github.com/applicationsonline/librarian
[2012-07-18 13:12:41 -0400] maruq: nacer: it takes over your cookbooks dir, but sets up all the cookbooks + dependencies for you, quite nice
[2012-07-18 13:13:05 -0400] maruq: nacer: it doesn't matter if they're in the community repo, you can use any git repo ;)
[2012-07-18 13:13:10 -0400] nacer: maruq: ok it's a supermarket
[2012-07-18 13:13:34 -0400] maruq: nacer: a supermarket?
[2012-07-18 13:13:41 -0400] yfeldblum: maruq, you can set it to take over a different dir if you like using the --path option to librarian-chef install
[2012-07-18 13:13:54 -0400] nacer: maruq: all the cookbook(ingredient) in one place :)
[2012-07-18 13:14:23 -0400] maruq: yfeldblum: yep, but I prefer to have it manage my default cookbooks, then I can create my own in site-cookbooks ;)
[2012-07-18 13:14:47 -0400] maruq: nacer: that's one way to think of it ;)
[2012-07-18 13:15:26 -0400] yfeldblum: maruq, absolutely, and that's why it's the default way to use it
[2012-07-18 13:17:04 -0400] maruq: yfeldblum: hurrah for sane defaults!
[2012-07-18 13:17:32 -0400] maruq: yfeldblum: once I get things setup, I'll move my cookbooks out to git repos & manage through librarian too ;)
[2012-07-18 13:18:13 -0400] maruq: yfeldblum: also makes it nicer to have cookbook repos that my prod servers & dev vms can both use ;)
[2012-07-18 13:19:10 -0400] yfeldblum: maruq, some people consider that an insane default
[2012-07-18 13:20:58 -0400] maruq: yfeldblum: here's to the crazy ones! ;)
[2012-07-18 13:32:17 -0400] geekbri: That is the way I use librarian as well, works good for me.
[2012-07-18 13:32:44 -0400] geekbri: Perhaps not a popular opinion as I know plenty of people not using it.. but I can't imagine managing my cookbooks without using librarian-chef
[2012-07-18 13:34:21 -0400] yfeldblum: same
[2012-07-18 13:35:12 -0400] maruq: yup librarian + chef-server/client for prod, librarian + chef-solo + vagrant for dev
[2012-07-18 13:35:55 -0400] maruq: that way you get pretty much the same stack in both envs
[2012-07-18 13:36:46 -0400] maruq: there's a few caveats - eg. DB replication/failover stuff wouldn't be in dev; but for it removes a lot of the simple "worked in dev" bugs
[2012-07-18 13:38:25 -0400] yfeldblum: maruq, or you could use multiple VMs in dev ;P
[2012-07-18 13:40:07 -0400] yfeldblum: maruq, testing replication & failure in dev can be as simple as `vagrant halt db1`
[2012-07-18 13:43:00 -0400] DigitalFlux: so i'm running the rabbitmq cookbook
[2012-07-18 13:43:15 -0400] DigitalFlux: and it keeps complaining that the apt-get resource is not there
[2012-07-18 13:43:16 -0400] DigitalFlux: FATAL: Chef::Exceptions::ResourceNotFound: Cannot find a resource matching execute[apt-get update] (did you define it first?)
[2012-07-18 13:43:28 -0400] DigitalFlux: while it is there indeed in the apt cookbook
[2012-07-18 13:43:31 -0400] DigitalFlux: any hints ?
[2012-07-18 13:43:37 -0400] ashb: include the apt cookbook
[2012-07-18 13:43:43 -0400] ashb: but then raise a bug that it doens't do that right itself
[2012-07-18 13:44:08 -0400] DigitalFlux: actually it is included, and it used to work just fine ..
[2012-07-18 13:44:16 -0400] ashb: :/
[2012-07-18 13:44:19 -0400] ashb: don't know then sorry
[2012-07-18 13:45:45 -0400] DigitalFlux: ashb: no worries, Thanks man
[2012-07-18 13:47:36 -0400] yfeldblum: DigitalFlux, what's the version of the rabbitmq cookbook? got a backtrace?
[2012-07-18 13:47:57 -0400] maruq: yfeldblum: hmm true.
[2012-07-18 13:47:59 -0400] DigitalFlux: yfeldblum: rabbitmq [1.5.0]
[2012-07-18 13:48:31 -0400] yfeldblum: maruq, if you're going that route, though, devs are going to need supercharged workstations/laptops
[2012-07-18 13:48:37 -0400] DigitalFlux: yfeldblum: I lost the stacktrace, but it was in the default.rb file
[2012-07-18 13:49:03 -0400] DigitalFlux: yfeldblum: the apt_repository was the one using it i guess ..
[2012-07-18 13:49:13 -0400] maruq: yfeldblum: yeah, that's kind of why I went the slightly different route. at the moment our dev machines are MacBook Airs
[2012-07-18 13:49:43 -0400] maruq: yfeldblum: the machines are quite beefy for general stuff, but multiple VMs = not so great
[2012-07-18 13:51:22 -0400] yfeldblum: DigitalFlux, that recipe neglects to `include_recipe "apt"`, so you may want to insert `recipe[apt]` into the run-list before the `recipe[rabbitmq]`
[2012-07-18 13:51:41 -0400] DigitalFlux: yfeldblum: hmm, i see
[2012-07-18 13:51:47 -0400] DigitalFlux: yfeldblum: okie, Thanks
[2012-07-18 13:52:33 -0400] yfeldblum: DigitalFlux, the resource `execute[apt-get update]` is declared in the recipe apt::default
[2012-07-18 13:54:58 -0400] geekbri: maruq: sounds like its time to change those airs for the new retina MBP's ;)
[2012-07-18 13:55:43 -0400] cwj: my new air runs multiple VMs no sweat :)
[2012-07-18 13:55:57 -0400] maruq: geekbri: I'll try and push that past the CFO, but think it'd be easier for the design guys to justify ;)
[2012-07-18 13:56:24 -0400] maruq: cwj: how many are you running at once?
[2012-07-18 13:56:25 -0400] yfeldblum: maruq, indeed, the design guys must have the ability to edit 9 videos simultaneously
[2012-07-18 13:56:33 -0400] geekbri: Psh, everybody knows the non engineer depts just get the leftover laptops that eng is done with :-P
[2012-07-18 13:56:44 -0400] cwj: derived an unreasonable amount of pleasure out of spinning up a 4 node elasticsearch cluster with vagrant the other day
[2012-07-18 13:56:57 -0400] maruq: yfeldblum: so that's why youtube is always open on their computers? ;)
[2012-07-18 13:57:14 -0400] cwj: only wish i could have 16gb of ram in it
[2012-07-18 13:57:49 -0400] yfeldblum: cwj, 64gb is the new 16gb
[2012-07-18 13:57:57 -0400] maruq: cwj: hmm okay, running anything else at the same time? I found mysql + 2 web servers + redis & I started to get kernel panics
[2012-07-18 13:58:12 -0400] geekbri: maruq: watching flash videos on a mac IS a good case for needing a beefier computer thats for sure!
[2012-07-18 13:58:34 -0400] cwj: maruq: yeah vbox is unfortunately buggy
[2012-07-18 13:58:41 -0400] maruq: geekbri: amen!
[2012-07-18 13:59:02 -0400] cwj: but i bet your panics stop if you switch to wired and turn off your wifi
[2012-07-18 13:59:05 -0400] geekbri: yfeldblum: soon 128gb will be the new 64gb!
[2012-07-18 13:59:16 -0400] maruq: but the MacBook Air is surprisingly able. I have an 11" for home & 13" for work, damn nice machines
[2012-07-18 13:59:20 -0400] geekbri: cwj: Yeah I saw that bug on the Vbox tracker as well.
[2012-07-18 13:59:30 -0400] geekbri: Theres some issue apparently with the wifi drivers and vbox heh
[2012-07-18 13:59:51 -0400] yfeldblum: cwj, wish libvirt+lxc would make it easy to do internal networks on a laptop with wireless ...
[2012-07-18 13:59:55 -0400] maruq: strange might have to explore that
[2012-07-18 14:01:35 -0400] cwj: maruq: https://www.virtualbox.org/ticket/9359
[2012-07-18 14:01:48 -0400] cwj: also https://www.virtualbox.org/ticket/9897 to some degree
[2012-07-18 14:02:11 -0400] cwj: and for me the problem persists under mountain lion
[2012-07-18 14:02:32 -0400] cwj: time to find some breakfast, bbl
[2012-07-18 14:02:43 -0400] maruq: was just going to ask if fixed on [redacted] ;)
[2012-07-18 14:03:01 -0400] maruq: it's only on OS X, yeah?
[2012-07-18 14:03:33 -0400] cnf: maruq: love my MBA :P
[2012-07-18 14:05:07 -0400] cnf: geekbri: and i don't have flash installed
[2012-07-18 14:05:19 -0400] maruq: cnf: smart man ;)
[2012-07-18 14:05:37 -0400] cnf: i can do without just fine
[2012-07-18 14:05:55 -0400] cnf: though i do sometimes cheat by using the ipad :P
[2012-07-18 14:06:04 -0400] cnf: well, "cheat", ipad doesn't have flash either
[2012-07-18 14:06:30 -0400] geekbri: I recently shattered the corner of my ipad :(.  Completely functional, no damage to the touch.view area, but looking it makes my insides hurt
[2012-07-18 14:06:42 -0400] cnf: balls :/
[2012-07-18 14:06:54 -0400] cnf: geekbri: and those things are surprisingly sturdy. at that
[2012-07-18 14:07:33 -0400] geekbri: cnf:  they are, unless you drop them on some hard tiles near your breakfast bar :-P
[2012-07-18 14:07:43 -0400] cnf: :P
[2012-07-18 14:07:54 -0400] geekbri: $300 for a replacement!! I was like, no thanks Ill live with my damaged goods
[2012-07-18 14:08:05 -0400] cnf: even then, must have been an unlucky drop
[2012-07-18 14:08:07 -0400] geekbri: LIttle bit of clear packing tape over it, some inner turmoil, but i'll be ok
[2012-07-18 14:08:14 -0400] cnf: hehe
[2012-07-18 14:08:16 -0400] geekbri: i dropped it flat too, not even on a corner.  Like you said, just unlucky.
[2012-07-18 14:08:20 -0400] geekbri: and it was in a case.
[2012-07-18 14:08:25 -0400] cnf: uhu
[2012-07-18 14:08:31 -0400] cnf: smart cover?
[2012-07-18 14:09:19 -0400] geekbri: no but similar
[2012-07-18 14:09:48 -0400] cnf: uhu
[2012-07-18 14:09:58 -0400] cnf: anyway, love my air :P
[2012-07-18 14:10:10 -0400] geekbri: Indeed, wish I had one, backaches on the train are getting old :-P
[2012-07-18 14:10:10 -0400] cnf: and i especially love it without FLASH!
[2012-07-18 14:10:47 -0400] maruq: geekbri: you could probably find something cheaper on ifixit.com if you're willing to tinker
[2012-07-18 14:11:08 -0400] geekbri: maruq: oh I'm always willing to tinker
[2012-07-18 14:11:17 -0400] maruq: not sure if they have the front glass, but friend smashed back glass of iPhone 4S & got a replacement
[2012-07-18 14:11:27 -0400] geekbri: but I use the ifixit app! Who will i repair my ipad using ifixit using the ifixit ipad app ;)
[2012-07-18 14:11:50 -0400] cnf: haha
[2012-07-18 14:24:27 -0400] mewp: is there a way for a cookbook to depend on a gem (I need to use it in a definition, so I can't use chef_gem in a recipe)?
[2012-07-18 14:27:04 -0400] yfeldblum: mewp, you can use chef_gem in a definition
[2012-07-18 14:31:01 -0400] maruq: geekbri: haha
[2012-07-18 14:32:38 -0400] mewp: oh. it works. I've tried to use it before the definition, and it has failed. thanks.
[2012-07-18 14:33:18 -0400] jperry2: is there another alternative to librarian gem
[2012-07-18 14:33:24 -0400] jperry2: I heard there is something new out
[2012-07-18 14:33:34 -0400] jperry2: but they couldn't remember the name
[2012-07-18 14:33:46 -0400] geekbri: something with a B i think
[2012-07-18 14:33:48 -0400] geekbri: berkshir?
[2012-07-18 14:34:25 -0400] geekbri: damn I can't remember now either.
[2012-07-18 14:35:32 -0400] geekbri: Berkshelf!
[2012-07-18 14:35:51 -0400] geekbri: http://berkshelf.com/
[2012-07-18 14:36:19 -0400] geekbri: looks like it came out of riotgames
[2012-07-18 14:40:43 -0400] yfeldblum: jperry2, is librarian-chef not a good match for your use case?
[2012-07-18 14:42:32 -0400] geekbri: The real question is, did riotgames just reinvent librarian-chef with a different name for no apparent reason :-P
[2012-07-18 14:44:41 -0400] yfeldblum: geekbri, i haven't asked; but, the more the merrier
[2012-07-18 14:45:13 -0400] geekbri: yfeldblum: yeah, certainly its never a bad thing to have options.  You can always poke around on theirs and see if there is anything you want to adopt to yours :)
[2012-07-18 14:45:25 -0400] yfeldblum: geekbri, of course :P
[2012-07-18 14:47:18 -0400] yfeldblum: geekbri, one difference is that berkshelf copies cookbooks into a dotdir in your home directory, and hardlinks those copies into your cookbooks dir; another is that berkshelf is shipping an integration with knife that syncs your cookbooks up to your chef-server
[2012-07-18 14:48:01 -0400] yfeldblum: geekbri, there's also a difference in the structure of the lockfile
[2012-07-18 14:49:08 -0400] geekbri: yfeldblum: Looks like you read more into the documentation than I did ! :-P
[2012-07-18 14:49:47 -0400] yfeldblum: geekbri, for the first one, i'm eyeing a deeper integration with knife than either librarian-chef or berkshelf supports right now; for the second one, i'm eying a similar feature
[2012-07-18 14:50:34 -0400] yfeldblum: geekbri, i have been eying both since well before riotgames released berkshelf; the problem for me is finding the time
[2012-07-18 14:51:11 -0400] geekbri: yfeldblum: Yeah I know that feeling.  Notice they had a list of like 4-5 contributors / maintainers for theirs, as opposed to the single one on your project :)
[2012-07-18 14:51:12 -0400] yfeldblum: geekbri, and i'm sure there are a number of other differences, but those are some that i noticed as i was reading the docs & the code
[2012-07-18 14:51:39 -0400] geekbri: yfeldblum: of course all theirs being riot games employees :)
[2012-07-18 14:51:58 -0400] yfeldblum: geekbri, heh, yeah, that's another difference
[2012-07-18 14:53:59 -0400] yfeldblum: geekbri, another difference is that librarian is a framework for writing bundlers, and librarian-chef is a smallish adapter; there's an adapter for puppet as well (and they've asked me to split out the librarian-chef adapter from the librarian framework)
[2012-07-18 14:54:55 -0400] yfeldblum: not the puppetlabs crew, someone else
[2012-07-18 14:56:35 -0400] yfeldblum: because they don't want a gem dependency on chef when they're using a librarian for puppet tool
[2012-07-18 14:57:58 -0400] spokrandt: can someone tell me why the ruby block gets executed before everything else?    http://pastebin.com/X8Gs7wBB
[2012-07-18 14:58:57 -0400] ashb: spokrandt: debug log output please
[2012-07-18 14:59:26 -0400] yfeldblum: spokrandt, fixed it for you: http://pastebin.com/xeMHF7hS
[2012-07-18 14:59:41 -0400] yfeldblum: spokrandt, put the ruby_block stuff inside its block attribute
[2012-07-18 15:00:09 -0400] spokrandt: ok I'll give er a shot  thanks
[2012-07-18 15:01:58 -0400] dwhsix: geekbri: how as the boston chef meetup?
[2012-07-18 15:02:00 -0400] dwhsix: *was
[2012-07-18 15:02:22 -0400] jperry2: yfeldlum - I just wanted to know what the other one is
[2012-07-18 15:02:28 -0400] jperry2: berkshelf was it
[2012-07-18 15:02:51 -0400] jperry2: basically our use case is we are trying to deploy our internal applications which are rpms
[2012-07-18 15:03:00 -0400] jperry2: and us dropwizard
[2012-07-18 15:03:08 -0400] yfeldblum: jperry2, cool
[2012-07-18 15:03:08 -0400] geekbri: dwhsix: it was pretty nice, the brightcove office is huge! and beautiful
[2012-07-18 15:03:28 -0400] dwhsix: lol and the meetup? useful?
[2012-07-18 15:04:14 -0400] jperry2: so instead of having the application cookbook live with the infrastructure cookbooks I thought it would be better to move it into a separate repo
[2012-07-18 15:04:22 -0400] jperry2: and allow developers to touch it directly
[2012-07-18 15:04:39 -0400] jperry2: this way there is separation and use librarian chef to pull it down
[2012-07-18 15:05:07 -0400] geekbri: dwhsix: A mixed bag :)
[2012-07-18 15:05:16 -0400] geekbri: I thought it was useful, but i was presenting, so thats cheating
[2012-07-18 15:05:17 -0400] jperry2: dwhsix: I met you yesterday
[2012-07-18 15:05:18 -0400] jperry2: I'm Jay
[2012-07-18 15:05:29 -0400] jperry2: I had to leave early
[2012-07-18 15:05:45 -0400] dwhsix: jperry2: do yuo mean geekbri?
[2012-07-18 15:06:02 -0400] geekbri: nice to meet you confused, I'm brian!
[2012-07-18 15:06:11 -0400] erratic: goodmorning kitteh chefs
[2012-07-18 15:06:50 -0400] jperry2: oh thought dwhsix was kevin
[2012-07-18 15:07:04 -0400] jperry2: geekbri: I didn't get to meet you personally
[2012-07-18 15:07:07 -0400] dwhsix: lol
[2012-07-18 15:07:08 -0400] erratic: why the name ohai
[2012-07-18 15:07:08 -0400] jperry2: thx for the presentation
[2012-07-18 15:07:18 -0400] geekbri: jperry2: thats probably in your best interest.  :)
[2012-07-18 15:07:23 -0400] dwhsix: dwhsix=denis haskin
[2012-07-18 15:08:05 -0400] dwhsix: geekbri jperry2 - did it seem like there might be another?
[2012-07-18 15:08:11 -0400] geekbri: dwhsix: yes.
[2012-07-18 15:08:17 -0400] dwhsix: schweet
[2012-07-18 15:09:06 -0400] geekbri: I wish I had more than 6 days to prepare my presentation. I think it would have gone better.
[2012-07-18 15:09:19 -0400] geekbri: But for a first meetup it was a good meet and greet, and to make sure people were actually interested in coming I think.
[2012-07-18 15:09:29 -0400] jperry2: dwhsix I think so
[2012-07-18 15:09:31 -0400] geekbri: Lots of Fiksu / brightcove people.
[2012-07-18 15:10:03 -0400] jperry2: I'd like to see someone talk about using chef for deployments
[2012-07-18 15:10:07 -0400] jperry2: and how well it works for them
[2012-07-18 15:10:28 -0400] jperry2: we are starting to do this but would like to hear from someone that has it fully rolled out
[2012-07-18 15:10:31 -0400] geekbri: yeah i'd like to see that too :).  We use chef for deployments and it works ok for us... but our env is a little different than probably a lot of users
[2012-07-18 15:10:34 -0400] jperry2: and has been using it for awhile
[2012-07-18 15:10:59 -0400] geekbri: I'd like to know how people are handling rolling things out to multiple servers at the same time.
[2012-07-18 15:11:00 -0400] jperry2: our biggest grip about deployments is the interval we have set for chef
[2012-07-18 15:11:11 -0400] jperry2: right there is no predictability
[2012-07-18 15:11:19 -0400] jperry2: unless you use chef-solo and log into every box
[2012-07-18 15:11:29 -0400] jperry2: or manually run chef-client
[2012-07-18 15:11:34 -0400] jperry2: but that isn't ideal
[2012-07-18 15:11:50 -0400] geekbri: Yeah, same thoughts as me.
[2012-07-18 15:11:51 -0400] jperry2: the other thing is communicating back when everything is done
[2012-07-18 15:12:07 -0400] geekbri: Well there are defintley hooks in chef-client that allow you to fire things off when a run is done
[2012-07-18 15:12:27 -0400] jperry2: yes but no easy way to say hey everything is done
[2012-07-18 15:12:32 -0400] jperry2: across an environment
[2012-07-18 15:12:38 -0400] jperry2: we are solving this with nagios
[2012-07-18 15:12:39 -0400] geekbri: so that can be done, its the "get things all deployed synchronously " that im wondering how people are handling (yeah there is no easy way for sure)
[2012-07-18 15:12:51 -0400] jperry2: by pushing that information to a nagios server then have something pulling it
[2012-07-18 15:13:03 -0400] yfeldblum: jperry2, another approach might be to have chef drop a script that does the deployment; then your deploy actions merely trigger the script to run
[2012-07-18 15:13:37 -0400] geekbri: Plus what about the situation where you want to deploy code to say..... a couple canary servers first, then deploy to the rest if everything goes ok
[2012-07-18 15:13:51 -0400] geekbri: lots of deployment related questions that I'd love to see how others are answering/handling
[2012-07-18 15:14:00 -0400] workmad3: geekbri: I believe the solution to 'get all things deployed synchronously' is 'don't' :)
[2012-07-18 15:14:10 -0400] yfeldblum: jperry2, the deploy action might ssh into all the nodes and shell out to the script; or it the script might actually be a daemon listening on a port and the deploy action sends a message to the port; or the script might actually be a daemon listening on a rabbitmq, and the deploy action might be a message to the queue
[2012-07-18 15:14:16 -0400] workmad3: geekbri: or at least, I don't believe chef is the right tool at that point
[2012-07-18 15:14:22 -0400] jperry2: geekbri: yeah hearing about canary launches is something we want
[2012-07-18 15:14:45 -0400] geekbri: workmad3: you may very well be right, but if the chef server is your brain and it contains all this information about your infrastructure, it seems like the kind of thing you would want sending your code out
[2012-07-18 15:14:51 -0400] workmad3: geekbri: the chef process is geared towards eventual consistency and convergence
[2012-07-18 15:14:56 -0400] geekbri: But I agree that perhaps chef just isn't the the thing that should be doing it.
[2012-07-18 15:15:08 -0400] dwhsix: couldn't you give your canary servers an additional role?
[2012-07-18 15:15:15 -0400] geekbri: Perhaps you just build a tool on top of knife, or the chef server API that does the deploy.
[2012-07-18 15:15:28 -0400] geekbri: dwhsix: what if your canary servers frequently change?
[2012-07-18 15:15:40 -0400] jperry2: dwhsix: that is what we were thinking is we would have another role for canary
[2012-07-18 15:15:59 -0400] workmad3: geekbri: while what you're suggesting sounds more like you have an orchetrating master that slaves all the nodes and the command flow is done on the server
[2012-07-18 15:16:25 -0400] dwhsix: geekbri: reassign the canary role around?  this is off the top of my head
[2012-07-18 15:16:49 -0400] geekbri: dwhsix: oh well yes you could do that :) I just meant it would be nice if it could be a little more automated, but of course everytihng can be automated if you take the time to do it!
[2012-07-18 15:17:09 -0400] jperry2: and then rollbacks is another question I have
[2012-07-18 15:17:14 -0400] jperry2: we are using rpms
[2012-07-18 15:17:24 -0400] jperry2: so if things go wrong you want to roll the version back
[2012-07-18 15:17:28 -0400] dwhsix: geekbri: +1
[2012-07-18 15:17:31 -0400] geekbri: workmad3: I'm just saying, the chef-server carries a lot of information that helps describe your infra.  EG you might be able to find out what the database servers are for a given environment through chef.  So if you have it there, but chef isn't doing deployments of your code... where does your code get that information from?
[2012-07-18 15:17:58 -0400] dwhsix: jperry2: yeah, rollbacks are a pain
[2012-07-18 15:18:12 -0400] jperry2: does yum and apt support rollback?
[2012-07-18 15:18:14 -0400] geekbri: dwhsix: like you dont want to have a YML File in your git repo describing where the servers are, you want to be able to dynamically generate that information on a deploy right?  getting that from chef would be perfect, as it has all this information about how things are
[2012-07-18 15:18:21 -0400] jperry2: I think you would have to shutdown the service remove it
[2012-07-18 15:18:27 -0400] jperry2: remove the rpm install
[2012-07-18 15:18:30 -0400] jperry2: then install an older version
[2012-07-18 15:18:32 -0400] geekbri: whoops that was for workmad3 not dwhsix
[2012-07-18 15:18:40 -0400] dwhsix: geekbri: np
[2012-07-18 15:19:06 -0400] workmad3: geekbri: yes, I agree, and you can use searches to do that sort of thing
[2012-07-18 15:19:23 -0400] workmad3: geekbri: and personally, I do code deployment through chef ;)
[2012-07-18 15:19:31 -0400] geekbri: workmad3: so do I :-P
[2012-07-18 15:19:47 -0400] geekbri: but I can totally see a lot of the complications surrounding it
[2012-07-18 15:20:08 -0400] jperry2: yeah I think we'll have to tackle them as we run into them but I don't have a full grasp of how it will all work
[2012-07-18 15:20:11 -0400] workmad3: geekbri: yes, you basically need to structure convergence into your deployment at that point
[2012-07-18 15:20:13 -0400] yfeldblum: app ops != infra ops
[2012-07-18 15:20:27 -0400] geekbri: but I want it to go through chef because chef-server is the brains.  It's got all this information about how everything is.  Right thats the beauty of it. I want to 'leverage' that for 'synergy' in a 'other buzz word here' world
[2012-07-18 15:20:40 -0400] yfeldblum: geekbri, that's why it has an API :P
[2012-07-18 15:20:55 -0400] geekbri: yfeldblum: oh yes I know, but remember that time discussion we had earlier ;)
[2012-07-18 15:21:36 -0400] yfeldblum: geekbri, :P
[2012-07-18 15:22:35 -0400] jperry2: I think you could send a flag as part of rollback
[2012-07-18 15:22:57 -0400] jperry2: we are storing the version number in a databag
[2012-07-18 15:23:01 -0400] jperry2: for each environment
[2012-07-18 15:23:13 -0400] jperry2: the rollback would have to change the version number back in the databag
[2012-07-18 15:23:28 -0400] jperry2: this way the rollback isn't overwritten on the next chef run
[2012-07-18 15:23:37 -0400] geekbri: rollbacks certainly can be a pain.
[2012-07-18 15:23:44 -0400] jperry2: yeah but are needed
[2012-07-18 15:24:11 -0400] geekbri: Oh absolutely.  WE have the advantage that the way our stuff is deployed, that a rollback just consists of basically updated a symlink to an older packaged directory
[2012-07-18 15:24:12 -0400] yfeldblum: maybe roll forward instead of back?
[2012-07-18 15:24:26 -0400] geekbri: also a good idea, just another deploy that happens to be an older version
[2012-07-18 15:24:27 -0400] jperry2: its easier when you have a full stack that you can rollback to but if you are doing upgrades to a machine that is where it becomes difficult
[2012-07-18 15:24:57 -0400] jperry2: yeah another deploy but an older version
[2012-07-18 15:25:14 -0400] jperry2: with rpms though yum gets a little confused I think
[2012-07-18 15:25:26 -0400] jperry2: you have to pass a flag to install an older version
[2012-07-18 15:25:37 -0400] jperry2: not sure if apt-get supports an older version install
[2012-07-18 15:25:52 -0400] jperry2: removing the rpm would work so you would have to do uninstall first
[2012-07-18 15:26:01 -0400] jperry2: rather than having apt-get or yum handle it for you
[2012-07-18 15:26:02 -0400] geekbri: yeah, thats fine though, just noop if the RPM is the right version
[2012-07-18 15:26:05 -0400] geekbri: if its not just remove and install new one
[2012-07-18 15:26:14 -0400] jperry2: right
[2012-07-18 15:26:28 -0400] jperry2: we might just have to do that for all installs
[2012-07-18 15:26:31 -0400] geekbri: Deployment engineer is never easy
[2012-07-18 15:26:38 -0400] geekbri: engineering
[2012-07-18 15:27:03 -0400] geekbri: I'd be more than glad to hire somebody just to handle that so I don't have to ;)
[2012-07-18 15:27:20 -0400] jperry2: ha
[2012-07-18 15:27:26 -0400] jperry2: yeah
[2012-07-18 15:27:28 -0400] cheeseplus: release engineers, ASSEMBLE!
[2012-07-18 15:27:35 -0400] jperry2: I am release engineer
[2012-07-18 15:27:50 -0400] jperry2: but I do software and chef stuff too
[2012-07-18 15:27:50 -0400] erratic: Im a kitteh engineer
[2012-07-18 15:27:50 -0400] jperry2: :)
[2012-07-18 15:28:04 -0400] geekbri: you are a gentleman and a scholar
[2012-07-18 15:28:08 -0400] cheeseplus: I am no longer the exclusive release engineer thankfully
[2012-07-18 15:28:11 -0400] jperry2: I have written deployment tools int he past
[2012-07-18 15:28:24 -0400] jperry2: rails app that used ajax
[2012-07-18 15:28:32 -0400] jperry2: it was pretty cool
[2012-07-18 15:28:35 -0400] jperry2: but we didn't have chef
[2012-07-18 15:28:43 -0400] ranjibd: jperry2, did you get simplecov working with chefspec ?
[2012-07-18 15:29:01 -0400] jperry2: ranjibd we ditched chef spec and strictly using minitest-handler
[2012-07-18 15:29:51 -0400] jperry2: we felt we were creating similar tests in minitest-handler so we stayed with minitest-handler
[2012-07-18 15:30:15 -0400] jperry2: chef spec is faster because you don't' have to converge a node but we felt the real value was seeing what was actually done on the system
[2012-07-18 15:30:33 -0400] jperry2: we felt chef spec was mostly testing the chef code specifically
[2012-07-18 15:30:55 -0400] jperry2: rather than testing real results and the state of your system after several recipes have run
[2012-07-18 15:31:32 -0400] geekbri: jperry2: you should give a talk on your use of minitest-handler at the next meetup.
[2012-07-18 15:32:37 -0400] jperry2: geekbri: I might, I'm working to roll out a continuous delivery pipeline for our infrastructure code that will have this all mixed in
[2012-07-18 15:33:16 -0400] geekbri: jperry2: I certainly would be super interested to see a presentation on that, if you are allowed to divulge it all of course :)
[2012-07-18 15:33:22 -0400] jperry2: :)
[2012-07-18 15:33:44 -0400] jperry2: we may be able to, if I have time when the next meeetup nears and this pipeline is complete
[2012-07-18 15:33:55 -0400] erratic: engineering kitteh haz been making chef recipiez
[2012-07-18 15:34:05 -0400] jperry2: otherwise I'll def do it after the next
[2012-07-18 15:34:24 -0400] jperry2: geekbri: we should def chat more about using chef for deployments
[2012-07-18 15:34:29 -0400] spokrandt: please tell me that definitions have not_if only_if.   I see an old ticket from 2010 stating they don't..
[2012-07-18 15:34:43 -0400] jperry2: as I really see this being useful but need to iron out all the kinks
[2012-07-18 15:34:53 -0400] jperry2: we only have one product doing this and its not in production
[2012-07-18 15:34:56 -0400] jperry2: so very new
[2012-07-18 15:35:12 -0400] ranjibd: jperry2, they both serve different purposes
[2012-07-18 15:35:55 -0400] ranjibd: once you have large chef codebase, you need unit tests, i too use minitest-handler , but as an integration test or UAT
[2012-07-18 15:36:27 -0400] ranjibd: but for doing TDD, i dont have much choice except chefspec
[2012-07-18 15:36:33 -0400] jperry2: ranjidb - what type of unit tests are you running
[2012-07-18 15:36:40 -0400] jperry2: you can still do TDD
[2012-07-18 15:36:43 -0400] jperry2: with minitest-handler
[2012-07-18 15:36:48 -0400] jperry2: we are using a knife server locally
[2012-07-18 15:36:52 -0400] jperry2: so you can do everything in isolation
[2012-07-18 15:37:00 -0400] erratic: knife catbook
[2012-07-18 15:37:09 -0400] erratic: kittehpicture upload
[2012-07-18 15:37:29 -0400] jperry2: meaning each infrastructure engineer will have their own personal chef server they can spin up in vagrant and test their changes
[2012-07-18 15:37:39 -0400] jperry2: so I create a bunch of mintiest tests
[2012-07-18 15:37:45 -0400] jperry2: push them to my local chef server
[2012-07-18 15:37:55 -0400] ranjibd: if you are converging an actual node, then how you can test individual resources ? without testing the actual chef library itself?
[2012-07-18 15:38:23 -0400] ranjibd: we do something similar, minitest + openvz containers..
[2012-07-18 15:38:32 -0400] ranjibd: for isolation,..
[2012-07-18 15:38:37 -0400] jperry2: I am testing individual resources
[2012-07-18 15:38:44 -0400] ranjibd: but thats different,,
[2012-07-18 15:38:46 -0400] jperry2: I'm testing that the resource did the right thing
[2012-07-18 15:39:04 -0400] ranjibd: jperry2, yes.. but you are also testing the actual resource implementation in chef
[2012-07-18 15:39:08 -0400] ranjibd: isn't it?
[2012-07-18 15:39:35 -0400] jperry2: basically I found myself writing chef specs to say hey will this file be created
[2012-07-18 15:40:04 -0400] jperry2: but with minitest-handler I check that the file was created and it has the right contents
[2012-07-18 15:40:10 -0400] geekbri: jperry2: Yeah, deployments of code with chef is very interesting to me.
[2012-07-18 15:40:15 -0400] erratic: anyone know the ubuntu packagees for server very well I have something I'd like to put to rest this morning that seems to be a problem out of the box...
[2012-07-18 15:41:10 -0400] erratic: nevermind
[2012-07-18 15:41:30 -0400] jperry2: ranjibd, I'm not saying unit tests are bad or they don't provide anything
[2012-07-18 15:41:48 -0400] erratic: woot
[2012-07-18 15:41:48 -0400] jperry2: but I just felt that mintiest-handler was providing the biggest bang for the buck
[2012-07-18 15:42:50 -0400] jperry2: I wasn't a fan that the user had to write basically a very similar test in both frameworks
[2012-07-18 15:43:02 -0400] ranjibd: jperry2, yes.. integration tests  are the most important ones. as they check  end to end  stuff
[2012-07-18 15:43:41 -0400] ranjibd: yes,, the tests looks similar.. what i need is some good matchers and mocks
[2012-07-18 15:43:48 -0400] jperry2: ranjibd, I see your point though with testing in isolation but we made a decision that it wasn't that important at least for cookbooks
[2012-07-18 15:43:52 -0400] erratic: http://www.youtube.com/watch?v=VGk0qb27Uhk this is appropriately vulgar for any office
[2012-07-18 15:44:12 -0400] jperry2: ranjibd, minitest-handler has a lot of good matchers
[2012-07-18 15:45:21 -0400] jperry2: we haven't had a need yet for mocks
[2012-07-18 15:45:44 -0400] yfeldblum: spokrandt, definitions aren't resources; they're macros, and they're expanded in-line in the recipe
[2012-07-18 15:46:11 -0400] geekbri: spokrandt: definitions get turned into the resource they wrap essentially.  Definitions also can't be notified
[2012-07-18 15:46:21 -0400] yfeldblum: spokrandt, so no, definitions do not have actions, they do not have notifications/subscriptions, and they do not have guards, because they're macros and not resources
[2012-07-18 15:46:42 -0400] jperry2: what are guards?
[2012-07-18 15:46:49 -0400] yfeldblum: jperry2, not_if/only_if
[2012-07-18 15:46:50 -0400] geekbri: not_if and only_if are guardss
[2012-07-18 15:46:53 -0400] jperry2: ah right
[2012-07-18 15:46:53 -0400] geekbri: -s
[2012-07-18 15:46:55 -0400] jperry2: thx
[2012-07-18 15:47:03 -0400] yfeldblum: geekbri, type faster
[2012-07-18 15:47:36 -0400] geekbri: yfeldblum: you're making the base assumption that typing is my speed bottle neck. I'm pretty sure my sad brain is the issue there.
[2012-07-18 15:48:12 -0400] yfeldblum: geekbri, writing, like programming & ops, is 99% typing and 1% thinking
[2012-07-18 15:48:19 -0400] jperry2: definitions can be used in other recipes outside the cookbook it is defined in?
[2012-07-18 15:48:25 -0400] yfeldblum: jperry2, yes
[2012-07-18 15:48:29 -0400] workmad3: yfeldblum: unless you're a really slow thinker :)
[2012-07-18 15:48:43 -0400] jperry2: yfeldblum: cool
[2012-07-18 15:48:53 -0400] yfeldblum: jperry2, the using cookbook must, in its metadata.rb, declare a dependency (using the `depends` method) on the cookbook containing the definition
[2012-07-18 15:49:13 -0400] erratic: anybody here ever used mikrotik routeros
[2012-07-18 15:49:28 -0400] jperry2: yfeldblum: thats what I thought
[2012-07-18 15:49:29 -0400] jperry2: thx
[2012-07-18 15:51:19 -0400] jperry2: ranjibd - do you have some good examples of where chef spec provided you with better results than minitest-handler?
[2012-07-18 15:51:53 -0400] jperry2: I'm not opposed to brining it back at some point but want to have good examples to avoid duplication
[2012-07-18 15:52:46 -0400] ranjibd: we manage all our users using chef.. their vpn certs, chef clients, ssh client etc.. the cookbook named ums ensures you have a single cert every where , also controls users access to different environments
[2012-07-18 15:53:29 -0400] ranjibd: the cookbook internally invokes search and other library function (Openssh wrappers)..
[2012-07-18 15:53:53 -0400] j-v-e: good day gentlemen
[2012-07-18 15:53:58 -0400] Ry4an: I've got a problem that really has me flummoxed and would appreciate any help.
[2012-07-18 15:54:14 -0400] Ry4an: I'm installing the mysql gem in mysql::client, and I can confirm it's there
[2012-07-18 15:54:20 -0400] ranjibd: to test this , without an actual node convergence i need to mock the Chef::Search::Query as well as fee openssl wrappers..
[2012-07-18 15:54:28 -0400] Ry4an: but subsequent attempts to use it by the database cookbook don't find it
[2012-07-18 15:54:41 -0400] j-v-e: I'm looking into tuning our chef server a bit. I've increase Xms and Xmx for java solr, increase the number of chef workers to 8 with haproxy in front of it, and now I'm wondering if there's a way to increase the performances of couchdb.
[2012-07-18 15:54:45 -0400] j-v-e: ANyone has advice on that ?
[2012-07-18 15:54:54 -0400] Ry4an: is there (I'm using chef solo) something I have to do to get chef to rescan its gem path or something?
[2012-07-18 15:55:07 -0400] ranjibd: and its easy to do these things in chefspec.. as you are running the whole stuff locally, against your libs, and under rspec's context.
[2012-07-18 15:55:12 -0400] ashb: j-v-e: the typical first step is to seperate out the various components onto different boxes
[2012-07-18 15:56:35 -0400] j-v-e: we might go down that road if needed, ashb. But before that, I'd like to know if there's a way to control couchdb memory usage, of if we should look at linux virtual memory, or that kind of thing.
[2012-07-18 15:56:36 -0400] jperry2: ranjibd - I see what you mean
[2012-07-18 15:56:42 -0400] j-v-e: Chef tuning lacks documentation it seems.
[2012-07-18 15:56:43 -0400] dschultz: "gem install chef"
[2012-07-18 15:56:53 -0400] jperry2: I guess for the searching part chef specs have an advantage
[2012-07-18 15:57:01 -0400] dschultz: whoops! wrong window.. ugh
[2012-07-18 15:57:04 -0400] ranjibd: jperry2, i dont think its a better approach, i just feel it suits my need :-) . mainly because it makes the chef script writing just as any other feature development, and also helps  translate the whole infra domain just as another functional domain for the devs, like mobile, banking or health etc
[2012-07-18 15:57:24 -0400] ranjibd: but you do need minitest handler or cucumber-nagio for actual integration tests
[2012-07-18 15:57:33 -0400] ranjibd: theres no doubt about that.
[2012-07-18 15:58:07 -0400] ashb: j-v-e: yeah there's not much docs that I can see (and i use hosted chef)
[2012-07-18 15:58:12 -0400] ashb: about all I can find is http://wiki.opscode.com/display/chef/Chef+Configuration+Settings#ChefConfigurationSettings-solrsettings
[2012-07-18 15:58:27 -0400] jperry2: ranjidb - I could see this being solved where you create a bunch of nodes on your local chef environment this way search is testing
[2012-07-18 15:58:57 -0400] jperry2: and you get real results back
[2012-07-18 15:59:09 -0400] jperry2: this is all on a local chef server so your an do as you wish
[2012-07-18 15:59:25 -0400] jperry2: you can basically have your chef server populated with a ton of different types of nodes
[2012-07-18 15:59:31 -0400] jperry2: maybe pressed it with data
[2012-07-18 15:59:35 -0400] jperry2: preseed
[2012-07-18 15:59:59 -0400] jperry2: you could always have it make an exact copy of your production chef server so you have real results
[2012-07-18 16:00:16 -0400] jperry2: but you do run the risk of your services talking to those
[2012-07-18 16:00:19 -0400] jperry2: which don't want :)
[2012-07-18 16:01:03 -0400] jperry2: but your environments should be locked down so that it can't accidentally be talked to
[2012-07-18 16:01:25 -0400] geekbri: just like real testing there should be some sort of setup and teardown of the information stored inside of the chef server you use for the testing :)
[2012-07-18 16:01:31 -0400] ranjibd: no its not that.. i dont want to test the search calls, i want to test the logic that i have specified.. thats all.. i want to test the whole stuff  chef + my cookbooks in a separate , less frequently triggered state
[2012-07-18 16:03:14 -0400] jperry2: geekbri: of course it could be part of that
[2012-07-18 16:03:33 -0400] geekbri: jperry2: Ah if only we all had unlimited engineering resources!
[2012-07-18 16:03:38 -0400] jperry2: ha
[2012-07-18 16:04:07 -0400] dwhsix: heard on the twitterverse: "the hardest engineering problem is sleep"
[2012-07-18 16:05:08 -0400] geekbri: hah pretty good.
[2012-07-18 16:05:24 -0400] geekbri: At that meetup last night, it was asked "is anybody here NOT hiring, raise your hand"
[2012-07-18 16:05:26 -0400] geekbri: not a single hand went up
[2012-07-18 16:06:08 -0400] erratic: heh
[2012-07-18 16:06:22 -0400] j-v-e: anyone ever used varnish in front of couchdb ?
[2012-07-18 16:07:01 -0400] j|: j-v-e: we started to, but it ended up not being important for our use cases and we dropped it
[2012-07-18 16:09:57 -0400] j-v-e: j|: searches are taking forever on some nodes, we tried to boost solr but that didn't help. what issues did you run into exactly, and how did you fix it ?
[2012-07-18 16:10:23 -0400] erratic: I need to get my daily dose of i can haz
[2012-07-18 16:11:31 -0400] ashb: j-v-e: do you have lots of users on your nodes?
[2012-07-18 16:11:47 -0400] jtimberman: geekbri: a couple months ago, that question was asked at a boulder ruby meetup, and only independent consultants raised their hands
[2012-07-18 16:12:07 -0400] jtimberman: one shouted "i'm available for hire on short term contracts though" :)
[2012-07-18 16:12:45 -0400] geekbri: jtimberman: Hah.  Yeah it is pretty wild trying to find people.
[2012-07-18 16:12:47 -0400] erratic: https://i.chzbgr.com/completestore/12/7/13/t9BMgNpdYU6vzIJCtFZ_Yg2.gif
[2012-07-18 16:12:59 -0400] ashb: pretty much the same at the London UG too
[2012-07-18 16:13:18 -0400] j-v-e: ashb: users ?
[2012-07-18 16:13:45 -0400] j-v-e: we have a lot of cookbooks that do a lot of searches, so when nodes reprovision, they hit the chef server pretty hard
[2012-07-18 16:13:45 -0400] ashb: j-v-e: i.e. a large number of properties form ohai that couch has to index
[2012-07-18 16:14:15 -0400] j|: j-v-e: ashb may be of better help than I. It was quite a while ago and we ripped out early in the development stages. For the level we got to, we didn't have any problems. Also, we weren't using that varnish for the chef couch. We were caching something internal, but it ended up being cacheable from somewhere else much easier, so that's why dropped it.
[2012-07-18 16:14:19 -0400] j-v-e: yes, I don't know the exact number, but since we don't (and don't want to) whitelist attributes, we have a bunch
[2012-07-18 16:14:25 -0400] ashb: I'm just making wild guesses here
[2012-07-18 16:14:27 -0400] ashb: knife ssh name* 'ohai | wc -l'
[2012-07-18 16:14:32 -0400] ashb: what sort of values does that return?
[2012-07-18 16:15:12 -0400] erratic: http://cheezburger.com/39824897
[2012-07-18 16:15:15 -0400] erratic: yaaaay its maru
[2012-07-18 16:15:34 -0400] j-v-e: ashb: around ~1400, +/- 10% depending on the node
[2012-07-18 16:15:44 -0400] ashb: about the same as me then
[2012-07-18 16:15:51 -0400] ashb: so nothing is unduly large there
[2012-07-18 16:16:08 -0400] j-v-e: no, I think it's really the amount of searches we do
[2012-07-18 16:16:29 -0400] j-v-e: we have a couple of cookbooks that do stuff like search):node, "roles:chef-client")
[2012-07-18 16:16:49 -0400] ashb: which basically returns every node
[2012-07-18 16:16:52 -0400] ashb: how many nodes do you have?
[2012-07-18 16:16:58 -0400] j-v-e: ~300
[2012-07-18 16:17:12 -0400] j-v-e: so 300 * 1400 = lots of attributes to return
[2012-07-18 16:17:33 -0400] ashb: its not quite that many attributes as there are {} on their own lines
[2012-07-18 16:17:36 -0400] ashb: but yeah possibly
[2012-07-18 16:18:01 -0400] j-v-e: do you think varnish could sit in front of couchdb ?
[2012-07-18 16:18:23 -0400] ashb: yes though you have to make sure you expire the cache right
[2012-07-18 16:18:31 -0400] ashb: shouldn't be too hard to do though
[2012-07-18 16:19:01 -0400] ashb: j-v-e: are you compacting your couchdb DB?
[2012-07-18 16:19:16 -0400] ashb: not sure if that makes performance difference or just reduces disk space
[2012-07-18 16:19:22 -0400] ashb: (I don't know much about cdb)
[2012-07-18 16:22:17 -0400] JasonBox: hrm, anyone using Chef on Solaris?
[2012-07-18 16:23:05 -0400] geekbri: dear #lazyweb.  Any of you using some sort of vim matchit for ruby being/end stuff ?
[2012-07-18 16:24:32 -0400] erratic: being?
[2012-07-18 16:24:43 -0400] geekbri: begin
[2012-07-18 16:25:46 -0400] erratic: oh
[2012-07-18 16:40:17 -0400] Ry4an: I'm going bonkers trying to get the mysql gem available early enough, and I've tried all the tricks here: http://wiki.opscode.com/display/chef/Evaluate+and+Run+Resources+at+Compile+Time
[2012-07-18 16:40:50 -0400] Ry4an: I'm to the point where I've tweaked the VagrantFile to make sure mysql-client and ruby-mysql are both installed before chef ever runs
[2012-07-18 16:41:08 -0400] Ry4an: and I still get "INFO: Missing gem 'mysql'" right off the bat
[2012-07-18 16:41:32 -0400] Ry4an: and "ATAL: LoadError: no such file to load -- mysql" when I try to use the 'database' cookbook.
[2012-07-18 16:42:33 -0400] Ry4an: Is there a separate chef (solo) gempath that's not consulting the OS-wide gempath that I can't figure out?
[2012-07-18 16:43:26 -0400] btm: Ry4an: How is Chef installed?
[2012-07-18 16:44:06 -0400] Ry4an: It's "already there" in the vagrant base, but I'm guessing apt.  I'll confirm.
[2012-07-18 16:44:29 -0400] Ry4an: hrm, not by apt
[2012-07-18 16:44:54 -0400] Ry4an: chef-solo is /opt/vagrant_ruby/bin/chef-solo
[2012-07-18 16:45:47 -0400] Ry4an: hrm, that does seem to have its own gems down in there...
[2012-07-18 16:48:48 -0400] btm: Ry4an: Do you know the difference between chef_gem and gem_package?
[2012-07-18 16:49:25 -0400] thedeeno: I'm using an encrypted databag. Will I have a bad time if I try to use values from it in my default attributes?
[2012-07-18 16:49:32 -0400] Ry4an: btm: I did come to understand that, I think.  I've tried both.
[2012-07-18 16:49:52 -0400] Ry4an: and I'm calling "Gem.clear_paths"
[2012-07-18 16:50:35 -0400] Ry4an: after doing the compile-time gem_package (via .run_action(:install)) too
[2012-07-18 16:50:59 -0400] btm: Ry4an: Well, you need to install the gems to the GEM_PATH for the ruby that chef-solo is being run under. chef_gem should do this for you. (it also calls Gem.clear_paths and installs immediately during the compile phase of the chef run)
[2012-07-18 16:53:32 -0400] Ry4an: btm: makes sense.  When I did that directly it was failing because mysql::client hadn't yet installed the necessary development libraries, but now I've forced them in before the 1st chef run, so I'll give that another go.
[2012-07-18 16:54:44 -0400] yfeldblum: thedeeno, it's generally a good idea to keep only static defaults in your attributes file (static strings, numbers, booleans, etc) and defaults that may be computed solely from data provided by ohai (e.g. a default bin path that may depend on the platform and platform version)
[2012-07-18 16:55:17 -0400] yfeldblum: thedeeno, for everything else, it's not a good idea to try to set it as a default in an attributes file (including your case)
[2012-07-18 16:56:13 -0400] thedeeno: yfeldblum: thanks, that'll probably save me some time.
[2012-07-18 17:20:34 -0400] Rach: Hi
[2012-07-18 17:20:49 -0400] Rach: somebody has an idea why chef is damn slow
[2012-07-18 17:21:00 -0400] jameson: ruby
[2012-07-18 17:21:01 -0400] jameson: :P
[2012-07-18 17:21:10 -0400] Rach: on a ubuntu ec2 box
[2012-07-18 17:21:17 -0400] jameson: micro gets throttled
[2012-07-18 17:21:18 -0400] jameson: hard
[2012-07-18 17:21:21 -0400] Rach: mmmh :P
[2012-07-18 17:21:29 -0400] jameson: (i have the same problem)
[2012-07-18 17:21:38 -0400] jameson: have you tried it on a small instance instead of micro?
[2012-07-18 17:21:43 -0400] Rach: small
[2012-07-18 17:22:26 -0400] Rach: time chef-client --version >  Chef: 10.12.0  /  real0m24.401s  / user0m23.573s / sys0m0.824s
[2012-07-18 17:22:56 -0400] Rach: but doing the same operation on ruby is ok
[2012-07-18 17:23:39 -0400] Rach: could it be linked to the way of bootstraping chef ?
[2012-07-18 17:24:07 -0400] jameson: well
[2012-07-18 17:24:13 -0400] jameson: it looks like it's running fast enough
[2012-07-18 17:24:18 -0400] jameson: sys time is less than a second
[2012-07-18 17:25:23 -0400] Rach: I m not very familar with difference real/user/sys
[2012-07-18 17:25:55 -0400] newb: hi chefs
[2012-07-18 17:26:03 -0400] jameson: real is wall-clock time
[2012-07-18 17:26:18 -0400] jameson: user,sys is time CPU spen in user-stuff and system-stuff
[2012-07-18 17:27:23 -0400] Rach: ok I just read about it... does it mean the process is slow/block down
[2012-07-18 17:28:32 -0400] Rach: thanks
[2012-07-18 17:28:53 -0400] doomviking: yawn
[2012-07-18 17:34:32 -0400] jameson: yes
[2012-07-18 17:45:23 -0400] geekbri: If you are doing anything ever on a micro instance on ec2 and you find yourself asking "why is X thing so slow" the answer is almost always "because you are using a micro"
[2012-07-18 17:46:06 -0400] arthurmm: so, hi guys
[2012-07-18 17:46:09 -0400] erratic: micro instance?
[2012-07-18 17:47:21 -0400] erratic: Im wondering why gem takes forever to install
[2012-07-18 17:47:29 -0400] geekbri: you using a t1.micro??
[2012-07-18 17:47:42 -0400] erratic: The rackspace commands were moved to plugins in Chef 0.10
[2012-07-18 17:47:50 -0400] erratic: You can install the plugin with `(sudo) gem install knife-rackspace
[2012-07-18 17:47:53 -0400] erratic: did that
[2012-07-18 17:47:56 -0400] erratic: now why isnt it working
[2012-07-18 17:49:17 -0400] yfeldblum: arthurmm, hi
[2012-07-18 17:50:10 -0400] arthurmm: so, I am with some problem here, someone has that problem "exception": "ArgumentError: invalid byte sequence in US-ASCII",
[2012-07-18 17:50:30 -0400] arthurmm: when generating template
[2012-07-18 17:52:14 -0400] geekbri: Sounds to me like for some reason ruby is using US-ASCII and you are using some other encoding
[2012-07-18 17:53:02 -0400] arthurmm: yeah, looking for that I saw that should be the locale variables
[2012-07-18 17:53:30 -0400] arthurmm: but, in my shell the locale variables is correct
[2012-07-18 17:54:09 -0400] arthurmm: but, I dont know how to make chef-client execute command speficing locale (if it is the problem)
[2012-07-18 17:54:38 -0400] arthurmm: someone has that problem already ?
[2012-07-18 17:54:44 -0400] yfeldblum: arthurmm, try, in a recipe, Chef::Log.info("".encoding.to_s)
[2012-07-18 17:55:00 -0400] geekbri: arthurmm: http://zentralmaschine.net/index.php/2012/02/fixing-invalid-byte-sequence-in-us-ascii-once-and-for-all/   it looks like this guy has a slew of potential solutions
[2012-07-18 17:57:13 -0400] erratic: https://github.com/opscode/knife-rackspace/blob/master/README.rdoc
[2012-07-18 17:58:39 -0400] arthurmm: yfeldblum, yeah, this is the output [2012-07-18T14:57:40-03:00] INFO: US-ASCII
[2012-07-18 17:59:24 -0400] yfeldblum: arthurmm, look at the backtrace for that exception and find out what line of code is triggering the exception
[2012-07-18 17:59:26 -0400] arthurmm: geekbri, I try to put #encoding: utf-8 in my template, I will test putting it in my recipe
[2012-07-18 17:59:53 -0400] miah: moin
[2012-07-18 17:59:57 -0400] arthurmm: yfeldblum, /usr/local/lib/ruby/gems/1.9.1/gems/chef-10.12.0/lib/chef/mixin/template.rb:74:in `split'
[2012-07-18 18:00:55 -0400] erratic: put down the knife miah
[2012-07-18 18:01:08 -0400] geekbri: miah: afternoon :)
[2012-07-18 18:02:40 -0400] yfeldblum: arthurmm, https://github.com/opscode/chef/blob/10.12.0/chef/lib/chef/mixin/template.rb#L74
[2012-07-18 18:03:01 -0400] yfeldblum: arthurmm, sounds like there's a non-US-ASCII byte in your template file
[2012-07-18 18:03:30 -0400] geekbri: Thats what I was attempting to say earlier :)
[2012-07-18 18:04:21 -0400] arthurmm: yfeldblum, yes, it 's correct
[2012-07-18 18:07:18 -0400] jameson: anyone know where what expand_options() expects?
[2012-07-18 18:07:26 -0400] jameson: hash? or array?
[2012-07-18 18:11:16 -0400] miah: jameson: welcome to ruby. http://en.wikipedia.org/wiki/Duck_typing
[2012-07-18 18:11:34 -0400] miah: http://rubydoc.info/gems/chef/0.8.16/Chef/Provider/Package#expand_options-instance_method
[2012-07-18 18:11:35 -0400] cnf: is that like duck taping?
[2012-07-18 18:12:08 -0400] miah: cnf: kind of :P
[2012-07-18 18:12:10 -0400] newb: ddi the 'solr_url' change from "http://localhost:8983" to http://localhost:8983/solr ?
[2012-07-18 18:12:24 -0400] newb: I got this message when running the opscode chef rcp
[2012-07-18 18:12:33 -0400] newb: 'WARN: You seem to have a legacy setting for solr_url: did you mean http://localhost:8983/solr ?'
[2012-07-18 18:13:48 -0400] miah: yes
[2012-07-18 18:15:04 -0400] arthurmm: sorry guys, my workstation stop work
[2012-07-18 18:15:27 -0400] arthurmm: so, it's a config file, my language has ... and others characters
[2012-07-18 18:15:43 -0400] arthurmm: is there a way to chef-client accept that file
[2012-07-18 18:15:45 -0400] arthurmm: ?
[2012-07-18 18:16:07 -0400] newb: miah, https://github.com/opscode/cookbooks/blob/master/chef-server/templates/default/server.rb.erb
[2012-07-18 18:16:34 -0400] geekbri: I've seen in the chef source they have invented something better than duck typing.  Madoff typing.
[2012-07-18 18:16:42 -0400] newb: is there an updated version? surely somene has been using a cookbook to install chef since the last update?
[2012-07-18 18:17:07 -0400] stphung: dumb question: does anyone know how to delete an organization in hosted chef ?
[2012-07-18 18:17:22 -0400] miah: newb: submit a fix?
[2012-07-18 18:17:51 -0400] miah: stphung: email support. =)
[2012-07-18 18:18:04 -0400] stphung: miah: thanks :) :)
[2012-07-18 18:18:12 -0400] newb: sure, but I will; be calling upon you guys as I fix them :-D
[2012-07-18 18:18:50 -0400] Ry4an: btm: compile-time chef_gem after a pre-chef apt-get mysqllib-dev got me where I needed to go.  Thanks!
[2012-07-18 18:22:36 -0400] btm: Ry4an: great. You can use the hacks shown for using gem_package the old way to get the mysqllib-dev package installed during the compile phase too. (end.run_action(:install))
[2012-07-18 18:24:00 -0400] Ry4an: I did try that and it still wasn't "early enough" that I could figure out, but I'll admit I can't understand how that could be.  I resorted to a shell line in the VagrantFile before the chef provisioner.
[2012-07-18 18:24:00 -0400] yfeldblum: arthurmm, so i believe chef actually sets the encoding to us-ascii (w.g. like LC_ALL="C") for legacy compatibility
[2012-07-18 18:24:59 -0400] arthurmm: yfeldblum, ok, Encoding.default_external = Encoding::UTF_8 work for me
[2012-07-18 18:25:01 -0400] btm: Ry4an: example: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/client.rb#L39
[2012-07-18 18:25:54 -0400] arthurmm: I put that on my recipe
[2012-07-18 18:26:24 -0400] arthurmm: but, is some weird
[2012-07-18 18:27:15 -0400] yfeldblum: arthurmm, the problem with that approach is that other parts of chef might assume the encoding will always be US-ASCII
[2012-07-18 18:27:43 -0400] Ry4an: btm: Hrm, I was doing 'apt-get' in an exec directly.  I'll give this a try.
[2012-07-18 18:29:19 -0400] arthurmm: yfeldblum, yeah, i think about it too
[2012-07-18 18:30:35 -0400] arthurmm: yfeldblum, the faster way is remove ... from the file, but it's I think it is not the right thing to do
[2012-07-18 18:30:52 -0400] yfeldblum: arthurmm, why not?
[2012-07-18 18:31:36 -0400] arthurmm: yfeldblum, because i cannot use my language correctly, only it
[2012-07-18 18:31:58 -0400] yfeldblum: arthurmm, will that be a big problem for you?
[2012-07-18 18:32:20 -0400] arthurmm: yfeldblum, it is not a big problem
[2012-07-18 18:35:43 -0400] yfeldblum: arthurmm, maybe you can open a ticket at tickets.opscode.com telling them about this problem, and until they fix it, only use US-ASCII characters?
[2012-07-18 18:37:58 -0400] arthurmm: yfeldblum, yes, I will use ascii characters and open the ticket
[2012-07-18 18:47:30 -0400] newb: do the latest rcps to install chef reside under the two at https://github.com/opscode-cookbooks/chef
[2012-07-18 18:47:32 -0400] newb: ?
[2012-07-18 18:47:38 -0400] newb: or is there something mroe recent
[2012-07-18 18:48:26 -0400] knuckolls: newb: in the readme for that cookbook "In the interest of user experience and clarity of intention, this cookbook is deprecated."
[2012-07-18 18:48:49 -0400] knuckolls: installing chef is usually done via the knife bootstrap command, or is at least the simplest way to install chef on a machine
[2012-07-18 18:49:19 -0400] knuckolls: did that answer your question?
[2012-07-18 18:52:48 -0400] newb: knuckolls, no, I mentioned "under the two at https://github.com/opscode-cookbooks/chef" to save myself from typing the real, split cookbook URIs
[2012-07-18 18:53:06 -0400] newb: does, knife bootstrap provision a new node with the chef server or client?
[2012-07-18 18:54:04 -0400] knuckolls: newb: knife bootstrap logs in to a node, registers it with the chef-server and runs chef-client once on the run-list that it was told to run.
[2012-07-18 18:54:35 -0400] knuckolls: newb: if you've got chef-client in your run list, it will daemonize the chef-client and the client will report in periodically with the chef-server to see if anything new needs to be run
[2012-07-18 18:55:16 -0400] knuckolls: tools like knife-ec2, knife-rackspace, and knife-eucalyptus will provision a machine, and immediately bootstrap it.
[2012-07-18 18:56:20 -0400] newb: knuckolls, exactly and my question was about installing the chef server on a node to have my own chef server
[2012-07-18 18:57:07 -0400] newb: you might have skipped my first few questions and hecne, by chef perhaps you assumes I was asking about the client :-)
[2012-07-18 18:57:11 -0400] knuckolls: newb: i haven't used this, but it looks nice. others in here have mentioned it. http://fnichol.github.com/knife-server/
[2012-07-18 18:57:23 -0400] knuckolls: newb: nah i was just confused by what you meant ;)
[2012-07-18 18:57:26 -0400] newb: aha!
[2012-07-18 18:57:27 -0400] cheeseplus: knife bootstrap could be used to bootstrap a server as well but 90% of the time it's bootstrapping the client
[2012-07-18 18:57:46 -0400] newb: cheeseplus, that would be great - how do I read more on that?
[2012-07-18 18:58:22 -0400] cheeseplus: I'd actually second the knife-server method
[2012-07-18 18:59:43 -0400] geekbri: fnichol writes a lot of really good stuff.
[2012-07-18 19:01:08 -0400] cheeseplus: newb: I've also seen folks use https://github.com/CoreMedia/chef-bootstrap
[2012-07-18 19:01:38 -0400] newb: thanks cheeseplus, knuckolls!
[2012-07-18 19:02:38 -0400] cheeseplus: np, not sure if there is a "one true way" to bootstrap a server atm
[2012-07-18 19:10:06 -0400] geekbri: One bootstrap to rule them all, one bootstrap to start them, one bootstrap to bring them on and in the darkness bind9 them
[2012-07-18 19:10:34 -0400] geekbri: or whatever
[2012-07-18 19:10:39 -0400] hoover_damm: someone set that as the topic
[2012-07-18 19:10:40 -0400] cheeseplus: hehe
[2012-07-18 19:11:16 -0400] arthurmm: yfeldblum, ticket created http://tickets.opscode.com/browse/CHEF-3304
[2012-07-18 19:13:52 -0400] hoover_damm: it's also possible to bootstrap chef with juju
[2012-07-18 19:13:58 -0400] hoover_damm: or something you write
[2012-07-18 19:14:07 -0400] hoover_damm: bootstrapping chef is just a process
[2012-07-18 19:14:14 -0400] hoover_damm: easy to move it
[2012-07-18 19:15:38 -0400] ranjibd: with omnibus it reduced significantly ..
[2012-07-18 19:16:28 -0400] hoover_damm: using the debs honestly is cleaner then gems if you can
[2012-07-18 19:16:40 -0400] hoover_damm: just because of the whole rubygems wait
[2012-07-18 19:16:59 -0400] hoover_damm: same waiting feels a little faster with apt then gem
[2012-07-18 19:18:20 -0400] ranjibd: hoover_damm, gem with --no-ri , --no-rdoc.. drop a .gem file to enforce this.. it will be bit quicker ?
[2012-07-18 19:18:42 -0400] hoover_damm: ranjibd, still not as fast
[2012-07-18 19:20:27 -0400] newb: , but the tigers not so slow
[2012-07-18 19:21:44 -0400] newb: they are like Java and Oracle tech recruiters: they prowl around and hit you at your weakest moment
[2012-07-18 19:23:03 -0400] newb: hoover_damm, show me some juju links
[2012-07-18 19:23:33 -0400] newb: bootstraping chef is easy when it works
[2012-07-18 19:23:45 -0400] newb: right now having issues having it auth with rabbit
[2012-07-18 19:45:52 -0400] yfeldblum: geekbri, revised https://gist.github.com/d85be145f3ff824ccc07 with second use-case
[2012-07-18 19:46:31 -0400] yfeldblum: geekbri, slightly different from http://realityforge.org/code/2012/07/17/lwrp-notify-on-changed-resources.html
[2012-07-18 19:57:09 -0400] zuhaib: Hey got a quesiton about search, and I am pretty sure I know the answer but is the search results ordered in any way when they are returned or should I always run sort if that is what I want
[2012-07-18 20:03:42 -0400] yfeldblum: zuhaib, they're not necessarily ordered in any particular order; if you care about the order the results are returned in, you will want to sort them yourself
[2012-07-18 20:04:20 -0400] yfeldblum: zuhaib, search(:node, "role:database").sort_by{|n| n["fqdn"]}
[2012-07-18 20:07:36 -0400] arthurmm: guys, there is opscode repo with a lot of cookbooks, some have password
[2012-07-18 20:07:55 -0400] arthurmm: how do you store yours passwords ? commit in repo ?
[2012-07-18 20:10:04 -0400] cheeseplus: arthurmm: encrypted databags is a solution to prevent committing it in code
[2012-07-18 20:13:51 -0400] arthurmm: cheeseplus, thanks, I don't read that part of manual (problems with time)
[2012-07-18 20:16:57 -0400] zuhaib: Thanks yfeldblum, that is what I expected
[2012-07-18 20:24:08 -0400] newb: trying to install chef server for a while and I hit only this error repeatedly
[2012-07-18 20:24:08 -0400] newb: FATAL: Connection to rabbitmq refused. Check your rabbitmq configuration and chef's amqp* settings
[2012-07-18 20:24:15 -0400] newb: Followed everythign available online
[2012-07-18 20:25:32 -0400] newb: =ERROR REPORT==== 18-Jul-2012::20:22:49 === exception on TCP connection <0.379.0> from 127.0.0.1:38440 {bad_header,<<65,77,81,80,0,0,9,1>>}
[2012-07-18 20:31:01 -0400] geekbri: yfeldblum: Ah nice.  Yeah I saw his original blog post. I like your revision better as it is just a method and not a resource.
[2012-07-18 20:35:13 -0400] yfeldblum: geekbri, Chef::Provider already has a method #recipe_eval, which the gist was based on
[2012-07-18 20:35:20 -0400] erratic: http://nagios.sourceforge.net/images/screens/big/statuswml.jpg
[2012-07-18 20:35:34 -0400] erratic: thats pretty useful
[2012-07-18 20:35:54 -0400] geekbri: yfeldblum: yes, I've seen it, but it doesn't have the extra check to see if any of the resources executed have been udpated :-P
[2012-07-18 20:36:09 -0400] yfeldblum: geekbri, yep
[2012-07-18 20:36:10 -0400] geekbri: yfeldblum: overriding that method with this one makes more sense to me than introducing an additional resource to do the same thing!
[2012-07-18 20:36:58 -0400] yfeldblum: geekbri, that one actually is a method in a provider just like my updated gist
[2012-07-18 20:37:30 -0400] yfeldblum: geekbri, the only difference is in that one you write `notify_action :action_name do .... end` whereas with mine you write `action :action_name do ; recipe_eval do ... end ; end`
[2012-07-18 20:37:51 -0400] geekbri: yfeldblum: guess I should have read that post more carefully
[2012-07-18 20:38:21 -0400] yfeldblum: geekbri, so mine makes a lot of sense to people who are already used to #recipe_eval - such as me :P
[2012-07-18 20:40:41 -0400] geekbri: yfeldblum: I like the idea of overriding recipe_eval as well, because then it stays with the existing conventions.  You still only have the action method in your provider DSL, and you just specify the block inside of it that needs to propagate notifications.
[2012-07-18 20:41:20 -0400] ypaq: hey,
[2012-07-18 20:41:38 -0400] yfeldblum: geekbri, yep
[2012-07-18 20:42:04 -0400] geekbri: yfeldblum: also having it be "recipe_eval" means that you can have an action that you define where some of the resources you call DON'T propagate their updates.  I can't think of a use case for that at the moment, but I'm sure there might be some edge cases out there for it
[2012-07-18 20:43:31 -0400] yfeldblum: geekbri, the other one allows for the same thing: actions created with the `action` method are normal, whereas actions created with the `notify_action` allow for isolated sub-run-context and sub-resources
[2012-07-18 20:43:54 -0400] geekbri: yfeldblum: yes but what im saying is, what if you had a single action where you only wanted SOME of the resources calling inside of that action to propogate
[2012-07-18 20:44:18 -0400] ypaq: i'm running an apt-get -q -y update / upgrade in my boostrap script for ubuntu 12.04. during bootstrap of a new machine with knife i'm getting a dialog about a grub config. this stalls the bootstrap process. any idea how to get rid of this?
[2012-07-18 20:44:32 -0400] geekbri: yfeldblum: I can't think of a use case for that currently, but it is very possible one exists.
[2012-07-18 20:44:42 -0400] yfeldblum: geekbri, ah right ... but um ... don't do that
[2012-07-18 20:45:26 -0400] geekbri: yfeldblum: Haha yes I agree that doesn't sound like proper behavior BUT having that flexibility doesn't necessarily hurt, at least not as long you know what youre doing :)
[2012-07-18 20:48:11 -0400] dajia: Does anyone know if yum_package can install package groups, or just individual packages?
[2012-07-18 20:48:52 -0400] ypaq: chef wiki navigation bar is a ffing joke
[2012-07-18 20:50:50 -0400] geekbri: yfeldblum: well then if that type of behavior should be forbidden maybe his does make more sense then.. hehe comfort level with recipe_eval aside
[2012-07-18 20:50:59 -0400] cheeseplus: dajia: my understanding was just packages
[2012-07-18 20:51:10 -0400] cheeseplus: I have a feeling miah would know though
[2012-07-18 20:51:51 -0400] yfeldblum: geekbri, i prefer the #recipe_eval approach because it is clearer to me
[2012-07-18 20:52:06 -0400] geekbri: yfeldblum: I like that it doesn't add additional things to the provider DSL
[2012-07-18 20:52:55 -0400] yfeldblum: geekbri, the #recipe_eval appraoch doesn't put forward the idea that there are two different types of action methods; it continues the idea that there is one type of action method only, but its implementation is up to you
[2012-07-18 20:53:57 -0400] geekbri: yfeldblum: yeah that is what I am trying to get at with the "no addition to the DSL" stuff.  An action is still an action, you aren't changing that.
[2012-07-18 20:54:24 -0400] geekbri: also, an action can be a notifying action if you called updated_by_last_action on new_resource
[2012-07-18 20:54:34 -0400] geekbri: so the name could be potentially misleading.
[2012-07-18 20:54:55 -0400] yfeldblum: geekbri, well, actually, *all* actions should conditionally mark the resource as updated-by-last-action
[2012-07-18 20:55:14 -0400] yfeldblum: geekbri, the particular way you do it, or the particular way you find out whether you need to do it, is an implementation detail
[2012-07-18 20:55:28 -0400] yfeldblum: geekbri, but if you don't do it, you're breaking the rule about providers
[2012-07-18 20:56:18 -0400] geekbri: yfeldblum: I meant if you called it with true, I believe that the updated filed init's to false (or even if it doesn't init at all it would then be nil) so effectively not calling updated_by_last_action(false)  is the same as calling it
[2012-07-18 20:56:34 -0400] geekbri: filed = ivar
[2012-07-18 20:57:23 -0400] geekbri: don't ask me how I typoed ivar as filed
[2012-07-18 21:00:57 -0400] yfeldblum: geekbri, right, conditionally marking the resource  = marking the resource if some condition is true (like if you wrote the file, triggered the nuke, whatever)
[2012-07-18 21:02:19 -0400] yfeldblum: geekbri, so i mean that every action method which modifies anything of interest ought to mark the resource as updated-by-last-action (and if the action method didn't update the resource, it shouldn't touch that flag, or should begin the action method with marking it false ... not sure which is correct)
[2012-07-18 21:02:41 -0400] geekbri: yfeldblum: oh absolutely.
[2012-07-18 21:03:00 -0400] geekbri: yfeldblum: I usually don't touch the flag, but if you wanted to be very clear you could mark it as false I suppose.
[2012-07-18 21:05:29 -0400] geekbri: gotta run!
[2012-07-18 21:05:40 -0400] erratic: my epeen is 8 characters long
[2012-07-18 21:05:43 -0400] erratic: its huge
[2012-07-18 21:05:46 -0400] erratic: thats all I just heard
[2012-07-18 21:05:51 -0400] erratic: ...
[2012-07-18 21:05:59 -0400] miah: i did a what?
[2012-07-18 21:06:13 -0400] erratic: here in my office...
[2012-07-18 21:06:21 -0400] erratic: the things I hear
[2012-07-18 21:06:31 -0400] cheeseplus: miah: someone was asking if yum_package could do groupinstalls
[2012-07-18 21:06:46 -0400] miah: yes
[2012-07-18 21:07:28 -0400] cheeseplus: do you need to do anything special?
[2012-07-18 21:07:49 -0400] miah: uh hold
[2012-07-18 21:08:33 -0400] erratic: wohever was asking about cloud monitoring yesterday
[2012-07-18 21:08:34 -0400] miah: maybe i misspoke. i don't see it.. but i could have swore i read it in the code.. hold on.
[2012-07-18 21:08:40 -0400] erratic: we found one called monitis
[2012-07-18 21:08:47 -0400] erratic: it seems pretty decent so far
[2012-07-18 21:09:04 -0400] erratic: might be a little expensive if you have a lot of servers though
[2012-07-18 21:10:08 -0400] erratic: I guess we're dropping keepass and keepassx too and moving to passpack
[2012-07-18 21:10:43 -0400] erratic: we're too small of a group for ldap
[2012-07-18 21:10:51 -0400] miah: http://tickets.opscode.com/browse/CHEF-1392
[2012-07-18 21:11:04 -0400] miah: looks like im wrong..
[2012-07-18 21:12:30 -0400] miah: maybe there is a cookbook that implements that feature
[2012-07-18 21:14:32 -0400] cheeseplus: miah: in this case I am glad you are wrong cause I told them I didn't think it could
[2012-07-18 21:15:55 -0400] miah: i dont think it would be too difficult to implement it though.
[2012-07-18 21:18:30 -0400] cwj: erratic: i think it was me
[2012-07-18 21:18:41 -0400] cwj: erratic: take a look at lastpass enterprise also
[2012-07-18 21:19:13 -0400] cwj: i havent seen passpack before, but i have been using lastpass for quite a while now. its $24/user/year for their enterprise offering
[2012-07-18 21:19:24 -0400] cwj: (iirc)
[2012-07-18 21:20:48 -0400] cwj: i just wish i could get lastpass extension inside mobile safari :(
[2012-07-18 21:22:12 -0400] doomviking: is that like 1Password
[2012-07-18 21:22:20 -0400] doomviking: apparenetly
[2012-07-18 21:22:29 -0400] cheeseplus: yep but browser based
[2012-07-18 21:22:40 -0400] JasonF: in Android, one of the ways LastPass presents is as a keyboard, which is kinda nice, because changing input methods on the fly is easy with Android, so you can just change + then choose autofill from the lastpass keyboard
[2012-07-18 21:22:41 -0400] doomviking: 1Password has browser extensions :)
[2012-07-18 21:22:44 -0400] HarvesterOfBeer: 1Password FTW
[2012-07-18 21:22:50 -0400] cheeseplus: I've been using it for ages as well
[2012-07-18 21:22:56 -0400] doomviking: 1Password + DropBox
[2012-07-18 21:23:05 -0400] HarvesterOfBeer: doomviking: word
[2012-07-18 21:23:07 -0400] adamjon858_: A bit new to Chef here
[2012-07-18 21:23:09 -0400] cheeseplus: doomviking: lastpass on multiple browsers with extension syncing
[2012-07-18 21:23:17 -0400] adamjon858_: Am I supposed to create a new .chef/ in each project directory?
[2012-07-18 21:23:20 -0400] cheeseplus: so I have all the passwords everywhere
[2012-07-18 21:23:36 -0400] HarvesterOfBeer: cheeseplus: does lastpass have mobile clients as well?
[2012-07-18 21:23:45 -0400] cwj: lastpass has the advantage of being usable in a browser without extensions
[2012-07-18 21:23:56 -0400] doomviking: sounds like it solves the same problem
[2012-07-18 21:24:00 -0400] cheeseplus: they have an app but I rarely use it on mobile
[2012-07-18 21:24:03 -0400] cwj: lastpass has mobile clients, but i think you have to be a premium subscriber to use it
[2012-07-18 21:24:06 -0400] JasonF: HarvesterOfBeer: lastpass has an android app + a dolphin browser extension
[2012-07-18 21:24:08 -0400] JasonF: but you have to pay
[2012-07-18 21:24:11 -0400] JasonF: it's like $20/yr
[2012-07-18 21:24:19 -0400] cheeseplus: also what cwj mentioned, you can access it via plain ol web
[2012-07-18 21:24:24 -0400] cwj: $12/yr last time i renewed my personal account
[2012-07-18 21:24:33 -0400] cheeseplus: which is great if you have no access to install things on a system
[2012-07-18 21:24:39 -0400] erratic: cwj loved keypass but we need more granularity and like click to copy support and stupid stuff like that
[2012-07-18 21:24:49 -0400] JasonF: ah, I might have paid $20/yr for LastPass+Xmarks (same company)
[2012-07-18 21:24:59 -0400] cwj: JasonF: ah yeah that sounds right
[2012-07-18 21:25:08 -0400] cheeseplus: yep, I paid for that too
[2012-07-18 21:25:21 -0400] doomviking: no subscription got 1pass
[2012-07-18 21:25:21 -0400] HarvesterOfBeer: looks like a good solution
[2012-07-18 21:25:25 -0400] doomviking: s/got/for
[2012-07-18 21:25:35 -0400] JasonF: the thing we use it for a lot, is sharing -- you can share usernames/passwords with other lastpass users, so me and $wife share the account info for our bills+banks
[2012-07-18 21:25:35 -0400] adamjon858_: so do I put a .chef/ directory in each new project?
[2012-07-18 21:25:47 -0400] doomviking: adamjon858_: thats what I do
[2012-07-18 21:25:55 -0400] cwj: JasonF: same
[2012-07-18 21:26:05 -0400] adamjon858_: do i put cookbooks grab bags etc in that directory?
[2012-07-18 21:26:09 -0400] erratic: cwj haha, start typing last pass into google
[2012-07-18 21:26:16 -0400] erratic: the 2nd suggestion is lastpass hacked
[2012-07-18 21:26:17 -0400] erratic: lol
[2012-07-18 21:26:26 -0400] adamjon858_: I'm trying to setup chef to scale my django app over multiple servers on EC2
[2012-07-18 21:26:27 -0400] doomviking: adamjon858_: thats how I set mine up. one .chef directory for each chef project
[2012-07-18 21:26:44 -0400] adamjon858_: So everything chef related goes in that .chef/ in my project root?
[2012-07-18 21:26:49 -0400] doomviking: project = chef platform installation
[2012-07-18 21:27:03 -0400] adamjon858_: doomviking: not sure I follow
[2012-07-18 21:27:06 -0400] doomviking: adamjon858_: I have keys and knife.rb in there only
[2012-07-18 21:27:27 -0400] adamjon858_: is my "chef project" going to be in a completely separate place then my git repo for the application code?
[2012-07-18 21:27:32 -0400] cwj: erratic: they had an event some time ago where they detected some network traffic they could not account for, so they recommended that everyone change their master password. the data is encrypted before it is sent to lastpass, so lastpass being hacked is kind of low on my list of security concern
[2012-07-18 21:27:58 -0400] doomviking: adamjon858_: I have a doomviking-chef directory, with keys and knife.rb that points to my hosted chef. in doomvikig-chef, is the chef layout of data bags and cookbooks etc
[2012-07-18 21:28:06 -0400] cwj: i was actually rather impressed a) that they caught it and b) how they handled it
[2012-07-18 21:28:11 -0400] doomviking: which is also a git repo, so that I can track changes
[2012-07-18 21:28:24 -0400] erratic: nice
[2012-07-18 21:28:43 -0400] adamjon858_: doomviking: ok cool. My question is would I put a .chef/ folder in my web apps git repo?
[2012-07-18 21:28:49 -0400] adamjon858_: Or should I have a completely separate chef repo
[2012-07-18 21:29:33 -0400] doomviking: adamjon858_: I'd keep them separate, but YMMV.
[2012-07-18 21:30:43 -0400] doomviking: adamjon858_: I see no sense in having a .chef inside some other application directory
[2012-07-18 21:31:11 -0400] adamjon858_: doomviking: even if that chef config is going to be specific to just that application?
[2012-07-18 21:31:25 -0400] adamjon858_: I guess I don't 100% understand how chef works yet, still going through the basic tutorial
[2012-07-18 21:32:31 -0400] doomviking: adamjon858_: yeah I'd keep it separate, unless you want data bags and cookbook and everything else inside your web app directory. that just seems weird to me. but I control dozens of apps and servers with chef
[2012-07-18 21:33:46 -0400] dschultz: Guys, advice on this is appreciated: I'm working w/ knife-windows and have installed chef-client and configured winRM on a Win2003 server. The issue is running knife winrm where -x is a domain user. I pass -x domain\\user in the command and it returns "ERROR: Failed to authenticate to *** as domain\user". Is domain authentication supported? I found a ticket regarding this as well (http://tickets.opscode.com/browse/KNIFE_WINDOWS-25). I hope there is a solut
[2012-07-18 21:33:46 -0400] dschultz: ion out there for Open Source Chef...
[2012-07-18 21:34:49 -0400] HarvesterOfBeer: dschultz: urf, that doesnt bode well
[2012-07-18 21:34:54 -0400] HarvesterOfBeer: I need domain auth...
[2012-07-18 21:35:07 -0400] doomviking: poor windows guys.
[2012-07-18 21:35:11 -0400] dschultz: Note, I can telnet to port 5985 on node from Chef-server
[2012-07-18 21:35:36 -0400] dschultz: Damn Windows! Our Linux mgmt has been a thing of beauty!
[2012-07-18 21:37:00 -0400] nomadmonad: Redmond needs more love, send them hugs and tears
[2012-07-18 21:37:16 -0400] karsten: dschultz: In the stupid questions department:  are you escaping backslashes properly and/or quoting them?
[2012-07-18 21:37:42 -0400] karsten: dschultz: ... and / or can you verify authenticating to the host via, say, samba / smbclient / CIFS?
[2012-07-18 21:38:34 -0400] HarvesterOfBeer: dschultz: may have to fall back on deploying sshd to all the win boxen
[2012-07-18 21:38:40 -0400] erratic: lastpass doesnt have the group level permissions and stuff that I want
[2012-07-18 21:40:23 -0400] dschultz: Tried quoting, "domain\admin" and tried w/o quotes and escaping w/ domain\\admin
[2012-07-18 21:41:59 -0400] HarvesterOfBeer: who wrote the knife-windows plugin? Opscode? Can we get ahold of the author directly somehow?
[2012-07-18 21:42:11 -0400] HarvesterOfBeer: I can walk down to their office and bang on the windows...
[2012-07-18 21:42:47 -0400] dschultz: Ha, yeah written by Opscode team
[2012-07-18 21:43:02 -0400] karsten: HarvesterOfBeer: http://blog.sfgate.com/hottopics/2012/07/17/angry-with-isp-man-hacks-servers-then-shows-up-with-ax/
[2012-07-18 21:43:34 -0400] HarvesterOfBeer: karsten: lol! I'd show up with beer and not an axe
[2012-07-18 21:43:50 -0400] karsten: :)
[2012-07-18 21:44:26 -0400] doomviking: I wonder how much latency / packet loss it took for him to lose it
[2012-07-18 21:44:57 -0400] dschultz: Stepping out for a moment. Someone please tell me they have gotten domain auth working with knife-windows. The ticket I noted is still unresolved...
[2012-07-18 21:54:29 -0400] karsten: Is there a way to list my available amis on ec2?
[2012-07-18 21:56:17 -0400] erratic: got an 808 boom and an 808 bap
[2012-07-18 22:00:52 -0400] timsmith: Does anyone ever get this error when trying to add local accounts on CentOS boxes: undefined method `sp_pwdp' for nil:NilClass
[2012-07-18 22:01:43 -0400] leifmadsen: hey all, have a little issue when using the User resource with the password attribute. Since it requires ruby-shadow to be installed, I have used gem_package "ruby-shadow" before using the User resource. However, it doesn't seem to be able to use it until I run the chef-client a 2nd time. The catch-22 is if I use chef_gem, then it can't install because I haven't run the build-essential recipe yet (chef_gem prior to conve
[2012-07-18 22:01:43 -0400] leifmadsen: rgence)
[2012-07-18 22:01:52 -0400] leifmadsen: any suggestions on a way around this predicament?
[2012-07-18 22:02:15 -0400] timsmith: leifmadsen: Why not just install the OS package
[2012-07-18 22:02:26 -0400] timsmith: leifmadsen: I install the necessary RPM and DEBs for my boxes
[2012-07-18 22:02:28 -0400] leifmadsen: timsmith: I actually tried that too
[2012-07-18 22:02:40 -0400] timsmith: leifmadsen: I've never had that problem
[2012-07-18 22:02:43 -0400] leifmadsen: hmmmm
[2012-07-18 22:02:51 -0400] timsmith: leifmadsen:  Let me grab my order
[2012-07-18 22:02:55 -0400] _rc: leifmadsen: use the new version of build-essential that lets you install at compile time
[2012-07-18 22:03:38 -0400] jinnko`: leifmadsen: just a guess but could it be that you need to trigger an ohai reload between installing and calling the user resource
[2012-07-18 22:04:55 -0400] timsmith: so on an Ubuntu box in my base recipe I just run 'package "libshadow-ruby1.8"' then I do my various user adds
[2012-07-18 22:05:14 -0400] JasonBoxLaptop: Indeed
[2012-07-18 22:06:10 -0400] erratic: yawwwn
[2012-07-18 22:06:35 -0400] leifmadsen: timsmith: in the same recipe file I presume?
[2012-07-18 22:06:46 -0400] timsmith: yes
[2012-07-18 22:06:54 -0400] timsmith: 2 big evil base OS recipe
[2012-07-18 22:06:59 -0400] timsmith: 1 big that should say
[2012-07-18 22:07:07 -0400] leifmadsen: gotcha... huh
[2012-07-18 22:07:29 -0400] timsmith: I do it on CentOS too
[2012-07-18 22:07:32 -0400] timsmith: 6.2
[2012-07-18 22:07:37 -0400] leifmadsen: this is 5.8 I'm on...
[2012-07-18 22:07:48 -0400] timsmith: I've never tried it on a 5 node
[2012-07-18 22:07:52 -0400] timsmith: I killed those off
[2012-07-18 22:07:55 -0400] leifmadsen: perhaps my gem_package is hindering the actual package installation (as I just noticed I have duplicated that)
[2012-07-18 22:08:02 -0400] leifmadsen: timsmith: ya I wish
[2012-07-18 22:08:13 -0400] timsmith: try getting rid of the gem and just install via the package
[2012-07-18 22:08:19 -0400] leifmadsen: ya that's next step, thanks
[2012-07-18 22:08:27 -0400] leifmadsen: at least I know it *can* work :D
[2012-07-18 22:08:35 -0400] timsmith: it can
[2012-07-18 22:09:18 -0400] leifmadsen: thanks much, I'll give the standard package method a shot
[2012-07-18 22:12:20 -0400] dschultz: So, I can mount a cifs share with no issue. Still no success on knife winrm & domain auth
[2012-07-18 22:14:36 -0400] HarvesterOfBeer: dschultz: you sure the machine you are targeting has WinRM set up and configured to allow connections?
[2012-07-18 22:14:55 -0400] timsmith: and is in the same domain
[2012-07-18 22:14:58 -0400] timsmith: or a domain with a trust
[2012-07-18 22:15:00 -0400] HarvesterOfBeer: can you use winrm to run something remotely from another windows box?
[2012-07-18 22:19:24 -0400] dschultz: HarvesterOfBeer: winRM is configured, for sure, and it's listening on the port. I can telnet to that port from Chef server. Possible config issue with winRM? I dunno, I suppose testing winRM on another box can't hurt.
[2012-07-18 22:24:51 -0400] doomviking: heh. poor t1.micro.
[2012-07-18 22:31:00 -0400] countdigi: but cheap :-) im spinning up a couple playing w/ Fog
[2012-07-18 22:31:21 -0400] HarvesterOfBeer: dschultz: if you can use winrm from another windows box, then the issue is probably not the windows box config, but the aforementioned issue with knife-windows
[2012-07-18 22:33:38 -0400] HarvesterOfBeer: dschultz: can you see what version of knife-windows got installed?
[2012-07-18 22:34:06 -0400] timsmith: I'm having a wonderful time with local user account creation on centos.  For some reason chef seems to think that the user already exists on this system.  It's not in /etc/passwd or /etc/shadow though.  Chef fails because it can't run a usermod on that user.  Any idea what chef would be hanging onto that would make it think the user is around?
[2012-07-18 22:34:29 -0400] dschultz: HarvesterOfBeer: Agreed. I come from a Linux world where this crap doesn't exist, for good reason. I'm looking at how to do a remote test using winRM now...
[2012-07-18 22:34:55 -0400] HarvesterOfBeer: dschultz: ayup. hear ya.
[2012-07-18 22:35:12 -0400] dschultz: HarvesterOfBeer: knife-windows (0.5.8)
[2012-07-18 22:36:59 -0400] HarvesterOfBeer: dschultz: well, there have been some changes landed to the plugin code since thenalthough I don't see anything for KNIFE_WINDOWS-25
[2012-07-18 22:37:00 -0400] HarvesterOfBeer: https://github.com/opscode/knife-windows/commits/master
[2012-07-18 22:39:14 -0400] dschultz: HarvesterOfBeer: Yeah, shame
[2012-07-18 22:43:04 -0400] erratic: knife, knife, knife knife--knife-knife
[2012-07-18 22:43:30 -0400] erratic: this cookbook turned out well
[2012-07-18 22:43:44 -0400] erratic: I cant remember the name monitis
[2012-07-18 22:46:02 -0400] erratic: dude
[2012-07-18 22:57:49 -0400] greg: can cookbook generic-users delete users? haven't seen this anywhere
[2012-07-18 23:04:31 -0400] uncommitted: hey there, have a template question maybe someone can point me in the right direction
[2012-07-18 23:04:57 -0400] uncommitted: trying to build a config file where it goes var1 , var2 , var3
[2012-07-18 23:05:28 -0400] uncommitted: i'm having a difficult time imagining how to not add a comma if it's the last var
[2012-07-18 23:05:39 -0400] uncommitted: [{rabbit, [{cluster_nodes, [<% @cluster_members.each do |n| -%> 'rabbit@<%= n %>', <% end -%>]}]}]
[2012-07-18 23:06:20 -0400] spox: uncommitted: use map to create an array of strings
[2012-07-18 23:06:21 -0400] erratic: I wanna say ternary
[2012-07-18 23:06:24 -0400] spox: and then #join(',')
[2012-07-18 23:06:36 -0400] erratic: but using a ternary in something like that though seems hard
[2012-07-18 23:07:12 -0400] uncommitted: ah, join? that gives my small mind a direction. thank you.
[2012-07-18 23:07:31 -0400] erratic: ohhhh right
[2012-07-18 23:12:19 -0400] syphon: is the nginx cookbook hardcoded to always install nginx from the epel repo? I'd like to configure it to use my company's local repo instead
[2012-07-18 23:15:52 -0400] erratic: so wait a minute
[2012-07-18 23:16:00 -0400] erratic: how is chef gonna be written in erlang
[2012-07-18 23:17:00 -0400] miah: when shef doesnt work i am sad
[2012-07-18 23:18:11 -0400] yfeldblum: miah, is shef not working?
[2012-07-18 23:18:56 -0400] miah: not on the box im on (and its 0.9.12)
[2012-07-18 23:21:25 -0400] miah: possibly the handler was just fubaring it
[2012-07-18 23:21:25 -0400] cheeseplus: erratic: parts of it will be erlang, memory consumption will go down and it will be much easier to scale
[2012-07-18 23:22:51 -0400] qhartman: All of a sudden a we're getting chef-client runs that bail with "illegal instruction" and no useful error output.
[2012-07-18 23:22:53 -0400] qhartman: Any ideas?
[2012-07-18 23:23:06 -0400] qhartman: The ec2 instances we're running on were recently rebooted.
[2012-07-18 23:24:04 -0400] miah: usually 'illegal instruction' is the result of memory corruption or other fubar
[2012-07-18 23:24:05 -0400] cheeseplus: erratic: also the Erlang conversion (or select parts) is already being used
[2012-07-18 23:24:09 -0400] miah: reboot your ec2 instances again?
[2012-07-18 23:24:23 -0400] qhartman: yeah, that's what I was afraid of.
[2012-07-18 23:24:26 -0400] miah: :(
[2012-07-18 23:24:27 -0400] miah: sorry
[2012-07-18 23:24:32 -0400] cheeseplus: erratic: hosted chef is already partially erlang
[2012-07-18 23:24:52 -0400] erratic: well then
[2012-07-18 23:25:54 -0400] miah: erratic: http://www.youtube.com/watch?v=FRFekZrLNas
[2012-07-18 23:26:12 -0400] cheeseplus: basically garbage collection sucks and merb is a fatty
[2012-07-18 23:27:00 -0400] erratic: one of our interns
[2012-07-18 23:27:05 -0400] erratic: one of the two we're going to hire
[2012-07-18 23:27:08 -0400] erratic: is an erlang nerd
[2012-07-18 23:27:26 -0400] cheeseplus: I am in a company full of them
[2012-07-18 23:27:55 -0400] cheeseplus: which is good, seeing as our product (riak) is written mostly in Erlnag
[2012-07-18 23:28:04 -0400] cheeseplus: s/Erlnag/Erlang/
[2012-07-18 23:36:35 -0400] uncommitted: thank you spox, map and join works great
[2012-07-18 23:36:48 -0400] spox: uncommitted: sure thing
[2012-07-18 23:47:20 -0400] erratic: http://basho.com/blog/technical/2010/04/05/why-vector-clocks-are-hard/
[2012-07-18 23:49:40 -0400] newb: does 'apt/resources/repository.rb' need to have a 'actions :apt-get-update' if I were to do a 'notifies :run, resources(:execute => "apt-get-update"), :immediately' from another rcp calling apt_repository?
[2012-07-18 23:50:39 -0400] newb: I am getting a 'Chef::Exceptions::ResourceNotFound - Cannot find a resource matching execute[apt-get-update] (did you define it first?)'
[2012-07-18 23:54:40 -0400] newb: this throws the error
[2012-07-18 23:54:40 -0400] newb: https://github.com/opscode-cookbooks/rabbitmq/blob/master/recipes/default.rb#L49

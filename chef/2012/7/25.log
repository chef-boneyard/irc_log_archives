[2012-07-25 00:02:24 -0400] Majost: whats the easiest way to generate a pseudo-random string within an erb?
[2012-07-25 00:09:07 -0400] gmcinnes: nice techniques here: http://stackoverflow.com/questions/88311/how-best-to-generate-a-random-string-in-ruby
[2012-07-25 00:10:26 -0400] masterkorp: Is there a way to see chef-client log from knife
[2012-07-25 00:10:38 -0400] masterkorp: eg when add a role to a run_list
[2012-07-25 00:19:55 -0400] Majost: What is wrong with this syntax: http://pastie.org/4327211
[2012-07-25 00:20:15 -0400] Majost: stack trace in the bottom part
[2012-07-25 00:31:11 -0400] Majost: ah, figured it out
[2012-07-25 00:31:12 -0400] Majost: hah
[2012-07-25 00:34:03 -0400] JoeGaudet: Hey all, do Data Bags have to be associated with a particular node ? or are they there by default ?
[2012-07-25 00:35:12 -0400] JoeGaudet: That is to say, if I add a recipe to a node's run_list that depends on a data bag that I've added to my hosted chef. Should it see that db by default ?
[2012-07-25 00:47:28 -0400] masterkorp: I really need help, i hate to be annoying, but anyone can point me to any doc please
[2012-07-25 00:48:19 -0400] j|: masterkorp: if no one else answers, I can try to help.
[2012-07-25 00:48:23 -0400] j|: what's up?
[2012-07-25 00:48:52 -0400] masterkorp: j|: thanks in advance reallu
[2012-07-25 00:49:38 -0400] j|: masterkorp: do my best. I'm no expert at this yet, but I'm always willing to learn by trying to help someone
[2012-07-25 00:49:39 -0400] masterkorp: j|: so i am just added a role to a node run_list, the recipe cleary did not run. what way do you recomend to check the log
[2012-07-25 00:50:28 -0400] masterkorp: i tought that knife you would run the role right-away and give me the output
[2012-07-25 00:50:52 -0400] j|: any reason that the obvious answer of just ssh in and check the log isn't okay?
[2012-07-25 00:51:22 -0400] masterkorp: where is the log located ?
[2012-07-25 00:51:34 -0400] masterkorp: log_location       STDOUT
[2012-07-25 00:51:39 -0400] masterkorp: oh wait
[2012-07-25 00:51:40 -0400] j|: well, if you run 'knife ssh name:<node_name> "sudo chef-client"'
[2012-07-25 00:52:00 -0400] j|: that will start a chef run on the node
[2012-07-25 00:52:10 -0400] j|: and you can watch the output of the chef-client run
[2012-07-25 00:53:05 -0400] masterkorp: WARNING: Failed to connect to node[celticsforum.sbni.com] -- SocketError: getaddrinfo: Name or service not known
[2012-07-25 00:53:56 -0400] j|: okay, so do it via the ipaddress
[2012-07-25 00:54:26 -0400] masterkorp: and if loging to the machine manually and run sudo chef-client i get no output
[2012-07-25 00:54:35 -0400] j|: no output at all?
[2012-07-25 00:55:16 -0400] masterkorp: oh wait, i am getting, damm ec2 micro instances are slow as hell
[2012-07-25 00:55:36 -0400] masterkorp: j|: is it a problem if another chef-client is already runing ?
[2012-07-25 00:55:38 -0400] j|: :)
[2012-07-25 00:55:53 -0400] j|: nah, it's all via REST API calls anyway
[2012-07-25 00:56:34 -0400] knuckolls: masterkorp: i just hopped in, but i've had problems running two chef-clients at the same time. like on ubuntu if one chef-client is running apt, and then the other tries to do something the second one will bomb because apt locks.
[2012-07-25 00:56:36 -0400] knuckolls: things like that.
[2012-07-25 00:56:51 -0400] masterkorp: [Wed, 25 Jul 2012 00:50:21 +0000] INFO: HTTP Request Returned 412 Precondition Failed: {"non_existent_cookbooks":["c
[2012-07-25 00:56:53 -0400] masterkorp: elticsforum"],"cookbooks_with_no_versions":[],"message":"Run list contains invalid items: no such cookbook celticsfo
[2012-07-25 00:56:55 -0400] masterkorp: rum."}
[2012-07-25 00:56:58 -0400] masterkorp: got the sucker
[2012-07-25 00:57:36 -0400] j|: ah, two chef-clients on the same node. that I didn't think you meant.
[2012-07-25 00:57:40 -0400] masterkorp: oh so the recipe in on site-cookbooks, and the role is like this http://pastie.org/private/vn3xnkba3i9n0ooh7bxaiw
[2012-07-25 00:58:47 -0400] j|: okay, so obvious first question, did you 'knife cookbook upload celticsforums'?
[2012-07-25 00:59:05 -0400] masterkorp: no, we deploy that with capistrano
[2012-07-25 00:59:12 -0400] masterkorp: and yeah the recipe is there
[2012-07-25 00:59:23 -0400] masterkorp: and its in the git-repo
[2012-07-25 01:00:35 -0400] masterkorp: that i can confirm
[2012-07-25 01:00:46 -0400] masterkorp: so any ideas/sugestions ?
[2012-07-25 01:01:01 -0400] j|: well, git repo is a good start, but it looks to me like chef-server doesn't have your celticsforum cookbook
[2012-07-25 01:01:16 -0400] j|: 'knife cookbook list' shows it?
[2012-07-25 01:01:35 -0400] masterkorp: http://chef.sbni.com:4040/cookbooks/celtics-forum/0.0.0
[2012-07-25 01:01:41 -0400] masterkorp: its is hre
[2012-07-25 01:01:48 -0400] j|: Oops! Google Chrome could not find chef.sbni.com:4040
[2012-07-25 01:01:57 -0400] masterkorp: oh wait, i am missing the "-"
[2012-07-25 01:01:57 -0400] j|: ;)
[2012-07-25 01:02:04 -0400] masterkorp: j|: yeah its a vpn
[2012-07-25 01:02:15 -0400] j|: gotcha.
[2012-07-25 01:02:22 -0400] j|: so you just need a hyphen.
[2012-07-25 01:02:26 -0400] j|: here: -
[2012-07-25 01:02:39 -0400] masterkorp: great let me sacrifice a goat first
[2012-07-25 01:02:50 -0400] j|: isn't it sheep?
[2012-07-25 01:02:58 -0400] masterkorp: j|: please be around i bet that i will have more problems :p
[2012-07-25 01:03:25 -0400] j|: yea, I'm working on my own setup, so I'm lurking here for a while anyway
[2012-07-25 01:04:36 -0400] masterkorp: thanks man
[2012-07-25 01:04:44 -0400] masterkorp: it will be a long night for me
[2012-07-25 01:07:07 -0400] j|: np.
[2012-07-25 01:07:43 -0400] j|: masterkorp: I'm curious as to what capistrano is doing that chef couldn't do / what your env is using it for specifically?
[2012-07-25 01:08:02 -0400] masterkorp: j|: we use a github for system
[2012-07-25 01:08:27 -0400] masterkorp: capistrano takes the production repo and deploys it to chef
[2012-07-25 01:08:40 -0400] masterkorp: since each devop has its one fork
[2012-07-25 01:08:44 -0400] masterkorp: *own
[2012-07-25 01:08:58 -0400] masterkorp: j|: btw http://musicforprogramming.net/ offtopic but its cool for long nights
[2012-07-25 01:10:35 -0400] j|: nice! Personally, my programming music is generally on the heavier side of things, but I'll definitely check it out
[2012-07-25 01:10:59 -0400] masterkorp: me too, but on the long nights
[2012-07-25 01:11:01 -0400] masterkorp: ...
[2012-07-25 01:11:29 -0400] j|: heavy stuff is too much late night? or you just prefer more mellow things after a while?
[2012-07-25 01:12:12 -0400] j|: I always liked bands like Isis for being able to go back and forth really smoothly.. I can space out and then still rock out and keep my focus
[2012-07-25 01:12:37 -0400] masterkorp: yeah, after like 12+ hours my head gets to sensible on heavy musec
[2012-07-25 01:13:34 -0400] j|: :)
[2012-07-25 01:15:03 -0400] j|: yea, shit. speaking of music and long nights, cigarette, beer and then back here in a min
[2012-07-25 01:27:43 -0400] j|: masterkorp: when you get a min, I'm interested to hear your github,capistrano,chef workflow a little more in detail. Why isn't it enough to just have each dev on git and merge the changes into the production / master branch?
[2012-07-25 01:28:07 -0400] j|: also, thx for the site. I like what I'm hearing.
[2012-07-25 01:29:12 -0400] masterkorp: j|: yeah, but then how would those changes get to the chef server ?
[2012-07-25 01:29:21 -0400] masterkorp: github hooks suck
[2012-07-25 01:30:19 -0400] j|: ah, gotcha. Yea, with us I'm the one in charge of backtracking chef into an existing deployment. So right now I'm the only chef dev and I haven't had to think that far ahead yet.
[2012-07-25 01:31:23 -0400] j|: I just edit locally, git commit, push, knife cookbook upload
[2012-07-25 01:32:05 -0400] masterkorp: then we just use cap production deploy
[2012-07-25 01:32:25 -0400] masterkorp: and it produces a warning in campfire
[2012-07-25 02:12:19 -0400] cakehero: where should I keep SSL certificates and key files?
[2012-07-25 02:12:25 -0400] cakehero: (chef-solo)
[2012-07-25 02:13:25 -0400] coderanger: cakehero: The chef server :)
[2012-07-25 02:13:35 -0400] cakehero: Just in a folder, heh
[2012-07-25 02:13:45 -0400] cakehero: <chef>/s33kretstuff/
[2012-07-25 02:13:50 -0400] cakehero: okay, we have chef server
[2012-07-25 02:14:00 -0400] cakehero: (migrating to it, the last guy broke it)
[2012-07-25 02:14:19 -0400] coderanger: With solo its up to you, just don't put them in version control evaaaarrrrr
[2012-07-25 02:14:49 -0400] cakehero: hmmmm
[2012-07-25 02:14:51 -0400] cakehero: s3? lawlz
[2012-07-25 02:15:06 -0400] cakehero: CacheFly?
[2012-07-25 02:16:29 -0400] coderanger: cakehero: For distro I would SCP it directly from workstations to target servers
[2012-07-25 02:16:37 -0400] coderanger: as part of initial bootstrap
[2012-07-25 02:16:38 -0400] cakehero: ok cool
[2012-07-25 02:16:41 -0400] cakehero: i can do that
[2012-07-25 02:16:56 -0400] coderanger: Security material distribution is kind of a clusterfuck no matter how you do it
[2012-07-25 02:16:59 -0400] cakehero: what do you use for initial bootstrap? Capistrano or something similar?
[2012-07-25 02:17:09 -0400] cakehero: well I knew chef-server based would be better
[2012-07-25 02:17:24 -0400] coderanger: knife bootstrap covers most of what I do
[2012-07-25 02:17:34 -0400] coderanger: If not that, I would make a fabric script
[2012-07-25 02:17:41 -0400] coderanger: or cap, if you like that koolaid
[2012-07-25 02:22:25 -0400] cakehero: awesome
[2012-07-25 02:22:33 -0400] cakehero: I'm down with knife
[2012-07-25 02:22:45 -0400] cakehero: So what about powering up new instances. I haven't gotten that far yet
[2012-07-25 02:22:51 -0400] cakehero: but if we want to deploy to a new datacenter
[2012-07-25 02:23:01 -0400] cakehero: I was thinking script for powering them up (bash/cap, again)
[2012-07-25 02:23:12 -0400] cakehero: would I do that w/nice? (this is AWS)
[2012-07-25 02:23:40 -0400] flaccid_: knife?
[2012-07-25 02:24:37 -0400] hoover_damm: bob
[2012-07-25 02:24:41 -0400] hoover_damm: you should be using bob flaccid_
[2012-07-25 02:24:59 -0400] flaccid_: URI?
[2012-07-25 02:26:00 -0400] hoover_damm: sorry bad joke
[2012-07-25 02:27:13 -0400] flaccid_: over my head
[2012-07-25 02:54:42 -0400] lastobelus: does anyone have any idea how I would refer to the release_path & database host inside an application > php resource? So that I can add more templates besides the standard local_settings_file?
[2012-07-25 03:42:54 -0400] Majost: Is there a special way to deal with registering upstart scripts which is not part of the service provider?
[2012-07-25 03:45:39 -0400] Majost: I tried using provider Chef::Provider::Service::Upstart as part of the service definition
[2012-07-25 03:45:55 -0400] Majost: but it doesn't seem to register the upstart service before attempting to invoke it
[2012-07-25 03:54:26 -0400] j|: hrm. knife search node name:<node_name> is okay
[2012-07-25 03:54:57 -0400] j|: but knife ssh name:<node_name> <command> -a ipaddress gets TIME_OUT
[2012-07-25 03:55:43 -0400] j|: and then ssh to the IP listed in the knife search, and it's fine
[2012-07-25 03:56:08 -0400] j|: and then try again in a min, and no nodes returned from search when using knife ssh, but still show up with using knife search
[2012-07-25 03:56:18 -0400] j|: wtf... ?
[2012-07-25 03:58:04 -0400] j|: man, I must be tired and just typing stupid typos
[2012-07-25 04:00:15 -0400] Majost: heh
[2012-07-25 04:02:59 -0400] j|: okay, that's interesting
[2012-07-25 04:03:41 -0400] j|: knife ssh ends up getting the internal IP for the node, yet the "IP" field from 'knife node show' has the public IP
[2012-07-25 04:05:19 -0400] j|: knife node show <node_name> -a ipaddress shows the internal one
[2012-07-25 04:06:15 -0400] j|: hrm, so how do I tell knife ssh to use the same IP that's returned by 'knife node show'
[2012-07-25 04:11:48 -0400] miah: moin
[2012-07-25 04:12:27 -0400] j|: moin?
[2012-07-25 04:20:39 -0400] retr0h: j|: is this on an ec2 instance?
[2012-07-25 04:24:59 -0400] j|: yea, I'm trying to figure out the 'correct' name of the attribute
[2012-07-25 04:25:28 -0400] retr0h: try doing knife node show <node_name> -a cloud
[2012-07-25 04:25:30 -0400] j|: b/c I can see both public and private with 'knife node show <node_name> -Ft'
[2012-07-25 04:25:44 -0400] retr0h: i think ohai populates stuff from ec2 there
[2012-07-25 04:26:09 -0400] retr0h: err knife search node "name:$name" -a cloud
[2012-07-25 04:26:19 -0400] j|: yea, I see them
[2012-07-25 04:26:36 -0400] j|: ...but I think I already tried to pass '-a public_ipv4' and
[2012-07-25 04:26:43 -0400] j|: '-a public_ips' to knife ssh
[2012-07-25 04:26:56 -0400] retr0h: well would it be cloud.public_ipv4?
[2012-07-25 04:27:01 -0400] j|: no, actually, I was just checking them with knife search
[2012-07-25 04:27:18 -0400] j|: retr0h: A chhaa!
[2012-07-25 04:27:41 -0400] j|: cloud.public_ipv4
[2012-07-25 04:27:44 -0400] j|: sweeeeeet
[2012-07-25 04:27:52 -0400] j|: ::dances::
[2012-07-25 04:28:11 -0400] j|: \o\  ...  /o/
[2012-07-25 04:28:16 -0400] retr0h: j|: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/cloud.rb
[2012-07-25 04:30:04 -0400] j|: nice, so ec2.public_ipv4 works too
[2012-07-25 04:30:27 -0400] j|: but, cloud.public_ipv4 would work even on the instances over in other non-AWS clouds
[2012-07-25 04:30:33 -0400] j|: that's sweet.
[2012-07-25 04:31:00 -0400] retr0h: yah-- i keep wondering when there will be an openstack one
[2012-07-25 04:31:19 -0400] j|: or, at least for rackspace and eucalyptus
[2012-07-25 04:31:25 -0400] j|: yea, no openstack yet, eh?
[2012-07-25 04:31:35 -0400] retr0h: b/c the euca one would work if it weren't for the mac address filtering
[2012-07-25 04:32:01 -0400] j|: never used eucalyptus.
[2012-07-25 04:32:04 -0400] j|: don't know much about it
[2012-07-25 04:32:13 -0400] retr0h: good man :P
[2012-07-25 04:32:24 -0400] j|: :)
[2012-07-25 04:32:29 -0400] j|: and ignorant
[2012-07-25 04:32:36 -0400] retr0h: j|: I wrote a semi lame one for openstack - have few other plugins there too (https://bitbucket.org/retr0h/ohai)
[2012-07-25 04:34:40 -0400] j|: that's cool.
[2012-07-25 04:34:57 -0400] j|: I haven't even looked at Ohai plugins yet
[2012-07-25 04:37:55 -0400] retr0h: j|: Ohai plugins are sooooooo awesome
[2012-07-25 04:41:46 -0400] j|: yea, that sounds pretty cool. I'm reading more about Ohai now
[2012-07-25 04:44:03 -0400] j|: right now, Ohai is just some black magic sitting behind the other stuff that I'm just starting to figure out. What was the first time you decided you needed to write an Ohai plugin? what did it solve?
[2012-07-25 04:54:16 -0400] j|: retr0h: awesome. I didn't know I could do somethings like 'knife search node name:<node_name> -a filesystem./dev/sda1.percent_used
[2012-07-25 04:54:22 -0400] j|: that's really cool.
[2012-07-25 04:54:28 -0400] j|: that's really fucking great.
[2012-07-25 04:54:34 -0400] j|: fuck. yea.
[2012-07-25 04:55:10 -0400] j|: wouldn't have seen that had you not just had me reading up on it. thx.
[2012-07-25 05:07:42 -0400] j|: wow, chef is awesome. I didn't realize the power it had and am only starting to right now.
[2012-07-25 05:08:23 -0400] j|: used cf-engine at my last job and just started here a few months ago and my boss was like "we want to use chef. figure it out."
[2012-07-25 05:09:15 -0400] j|: so funny b/c cf-engine was driving me a little bit crazy to the point that another guy and I were going to write our own system in python. Then start this job and start learning chef and find out it does everything we wanted something to do already.
[2012-07-25 05:09:21 -0400] j|: that's so cool, man. I love it.
[2012-07-25 05:09:59 -0400] retr0h: chef is pretty awesome.  glad u diggen it
[2012-07-25 05:10:40 -0400] j|: yea, dude. I had no idea how much information is available w/ Ohai
[2012-07-25 05:10:55 -0400] j|: and how easy it is to search for it
[2012-07-25 05:11:24 -0400] j|: just went through a python + boto script to set up cloudwatch metrics and alarms to monitor root disk percent used
[2012-07-25 05:12:03 -0400] j|: If I had known I could just "knife search node name:* -a filesystem./dev/sda1.percent_user" and have *everything* right there in front of me, I wouldn't have even bothered
[2012-07-25 05:12:23 -0400] j|: this is awesome. my job just got so much easier.
[2012-07-25 05:13:10 -0400] retr0h: yah I have some ipmi and lldp plugins so I can query for my servers IPMI addresses or know which switchports they are plugged into w/o having to look at some spreadsheet.
[2012-07-25 05:16:00 -0400] j|: hahaha
[2012-07-25 05:16:37 -0400] j|: so funny, man I was hacking up all this shit and making special referential LDAP entries and scripts to sync it all to do stuff like that at my last job
[2012-07-25 05:16:43 -0400] j|: damn I feel soooo stupid
[2012-07-25 05:17:03 -0400] j|: if only I had known... wow, I feel sorry for them now.
[2012-07-25 05:17:10 -0400] j|: supposed to see them on Friday
[2012-07-25 05:17:17 -0400] j|: I'm going to evangelize a bit. :)
[2012-07-25 05:17:29 -0400] j|: (if that's a word..)
[2012-07-25 05:18:31 -0400] j|: and all that was to basically have the spreadsheets that you're already avoiding and have them stored in a replicated database that I could query via cmdline
[2012-07-25 05:18:54 -0400] j|: so we had LDAP, and I got to know it well enough to make it do all sorts of shit it wasn't really being used for.
[2012-07-25 05:19:26 -0400] j|: just making custom schemas and special entries... this is so much better to do things w/ chef.
[2012-07-25 05:19:55 -0400] j|: anyway, I learned something tonight. that's for sure.
[2012-07-25 05:20:10 -0400] j|: retr0h: thanks for the help, man. I really appreciate it.
[2012-07-25 05:20:20 -0400] j|: I'm going to get a few hours of sleep I think.
[2012-07-25 05:20:25 -0400] j|: peace
[2012-07-25 05:31:08 -0400] ssd7: Ohai Chefs
[2012-07-25 05:31:55 -0400] paulmooring: hello ssd7
[2012-07-25 05:32:52 -0400] ssd7: Heya paulmooring, how goes it?
[2012-07-25 05:33:16 -0400] paulmooring: pretty good, just finished doing battle with some windows cookbooks and I won :)
[2012-07-25 05:33:55 -0400] ssd7: Nice
[2012-07-25 05:34:19 -0400] paulmooring: what brings you online this time of night?
[2012-07-25 05:35:46 -0400] ssd7: Wife is out of town, I've officially watched all of Netflix, and the friend I had over to play some games finally had to head home.
[2012-07-25 05:36:13 -0400] paulmooring: all of Netflix huh, we just re-watch Dr Who when that happens
[2012-07-25 05:37:28 -0400] ssd7: Yeah, I /just/ finished a run through Dr Who.  I'm watching Star Trek TNG with my wife (who has never seen any of it).
[2012-07-25 05:42:31 -0400] c_t: I've never been able to get into Dr. Who, to be honest
[2012-07-25 05:42:35 -0400] c_t: blasphemous, I know
[2012-07-25 05:44:03 -0400] paulmooring: It's pretty British, some people don't like that
[2012-07-25 05:44:37 -0400] ssd7: I've enjoyed Dr. Who up to now, but I'm a bit bored with the format at this point.  I tend to be a bigger fan of shows with longer story arcs.
[2012-07-25 05:44:52 -0400] c_t: I like other British things and all, but it somehow never clicked
[2012-07-25 05:45:27 -0400] paulmooring: ssd7: like breaking bad? the new season is starting off pretty great
[2012-07-25 05:45:28 -0400] c_t: I'd feel the need to start at the beginning, too, and watching thirty-someodd years of a TV show is a pretty big undertaking
[2012-07-25 05:47:13 -0400] ssd7: paulmooring: I've enjoyed breaking bad as well.
[2012-07-25 05:47:17 -0400] c_t: admittedly a number of the early episodes are lost
[2012-07-25 05:48:49 -0400] ssd7: c_t: :)  Interesting that same line of reasoning is why I've never been into comic books.  It seems like a universe that has already left me behind and left no way to catch up.
[2012-07-25 05:57:53 -0400] ssd7: paulmooring: This is what I was talking about earlier today in terms of a general fix for the problem with Mixlib::ShellOut::ShellCommand (http://tickets.opscode.com/browse/CHEF-3152)
[2012-07-25 05:58:59 -0400] paulmooring: ah, that makes sense but it's a lot more work than the hack I was thinking of
[2012-07-25 07:01:15 -0400] TeknamBul: I guys,  when in a resource, I do -> notifies :restart, "service[httpd]" , Can I put an IF statement?  for exemple  IF true THEN  notifies....   Thanks
[2012-07-25 07:01:24 -0400] erikh: yes.
[2012-07-25 07:01:26 -0400] erikh: it's just ruby.
[2012-07-25 08:27:33 -0400] masterkorp: I need to run some sql queries on a recipe, any sugestions ?
[2012-07-25 08:31:41 -0400] maruq: morning knife wielders
[2012-07-25 08:34:33 -0400] cpasmoi: morning
[2012-07-25 08:34:50 -0400] cpasmoi: is there a way to comment a json file line ?
[2012-07-25 08:36:31 -0400] maruq: cpasmoi: JSON doesn't support comments natively
[2012-07-25 08:36:40 -0400] maruq: cpasmoi: see: http://stackoverflow.com/questions/244777/can-i-comment-a-json-file
[2012-07-25 08:37:00 -0400] cpasmoi: in fact i'm already on that page ;p
[2012-07-25 08:37:16 -0400] maruq: haha
[2012-07-25 08:37:27 -0400] cpasmoi: i wanted to know if chef allows json comments
[2012-07-25 08:37:37 -0400] Mithrandir: afaik, no
[2012-07-25 08:37:38 -0400] cpasmoi: as it seems the json format does not
[2012-07-25 08:37:48 -0400] cpasmoi: ok
[2012-07-25 08:38:25 -0400] cpasmoi: I better understand why the previous sysadmin didn't comment json files...
[2012-07-25 08:38:25 -0400] maruq: cpasmoi: I would guess not, although it supports ruby files & json for a lot of things
[2012-07-25 08:38:36 -0400] maruq: cpasmoi: haha!
[2012-07-25 08:39:02 -0400] Mithrandir: yeah, you can generally do ruby  json for most bits.
[2012-07-25 08:39:46 -0400] cpasmoi: I'm learning all the chef architecture without bigs internal doc :)
[2012-07-25 09:13:06 -0400] lastobelus: anyone have any idea why a chef-client run reports WARN: No node with role kiwi_db_master, but in shef search(:node, "role:kiwi_db_master") finds the node, which does exist?
[2012-07-25 09:15:37 -0400] lastobelus: ahh: because the environment did not get set on the node
[2012-07-25 10:03:50 -0400] Guest1: hey, anybody?
[2012-07-25 10:06:24 -0400] Guest1: im not sure this is the place where to ask. I just throw my quest: Writting a cookbook, I'd like to indicate that it needs another cookbook. How can i write that inside my recipe? Cheers
[2012-07-25 10:13:14 -0400] masterkorp: usually if you use any resource from it, its automatically
[2012-07-25 10:13:19 -0400] masterkorp: but you can for with
[2012-07-25 10:13:22 -0400] masterkorp: *force
[2012-07-25 10:14:41 -0400] masterkorp: include_recipe "apache2::mod_ssl"
[2012-07-25 10:15:07 -0400] masterkorp: oh he is not here
[2012-07-25 10:15:10 -0400] masterkorp: fml
[2012-07-25 10:59:44 -0400] sampikesley: anybody here yet?
[2012-07-25 10:59:53 -0400] sampikesley: anybody have any chefspec-fu?
[2012-07-25 11:00:01 -0400] ranjibd: yo
[2012-07-25 11:00:42 -0400] sampikesley: CHefspec
[2012-07-25 11:00:44 -0400] sampikesley: I have
[2012-07-25 11:00:45 -0400] sampikesley:   chef_run = ChefSpec::ChefRunner.new
[2012-07-25 11:00:45 -0400] sampikesley:   chef_run.node.chef_environment = "production"
[2012-07-25 11:00:53 -0400] sampikesley: the goggles, they do nothing
[2012-07-25 11:18:32 -0400] ranjibd: chef_run.node.chef_environment.should == "production"
[2012-07-25 11:19:06 -0400] ranjibd: samography, are your trying to assert against the node's chef_environment? or just assigning it?
[2012-07-25 11:20:04 -0400] sampikesley: I need to assign it
[2012-07-25 11:20:34 -0400] sampikesley: the file produced by the recipe varies depending upon the chef_environment
[2012-07-25 11:20:46 -0400] sampikesley: that's what I wanna test
[2012-07-25 11:21:08 -0400] sampikesley: but chef_run.node.chef_environment = "production" doesn't do what I want
[2012-07-25 11:21:44 -0400] workmad3: sampikesley: ==, not =
[2012-07-25 11:22:04 -0400] sampikesley: to assign?
[2012-07-25 11:22:17 -0400] workmad3: sampikesley: oh, you want to assign... sorry
[2012-07-25 11:22:23 -0400] sampikesley: yeah
[2012-07-25 11:22:30 -0400] workmad3: can you assign the environment in the run?
[2012-07-25 11:22:33 -0400] sampikesley: that assignment returns silently
[2012-07-25 11:22:37 -0400] sampikesley: I don't know
[2012-07-25 11:22:47 -0400] sampikesley: Well if not, this is all pretty bloody useless
[2012-07-25 11:22:52 -0400] workmad3: heh
[2012-07-25 11:25:23 -0400] workmad3: sampikesley: ah, a quick look through the code reveals something..
[2012-07-25 11:25:41 -0400] workmad3: sampikesley: the chefspec running runs in chef-solo mode, and chef-solo currently doesn't support environments :/
[2012-07-25 11:25:48 -0400] workmad3: *chefspec runner
[2012-07-25 11:27:48 -0400] sampikesley: shit shit shit
[2012-07-25 11:27:49 -0400] sampikesley: OK
[2012-07-25 11:31:34 -0400] workmad3: sampikesley: you could alter your approach slightly I guess... this is rspec after all, you could do something like chef_run.node.stub!(:chef_environment).and_return("production") instead
[2012-07-25 12:34:54 -0400] sampikesley: Aha!
[2012-07-25 12:35:01 -0400] sampikesley: That might just do it
[2012-07-25 12:51:37 -0400] yfeldblum: not really a fan of too much stubbing, because you can, without realizing it, run into situations like this: ojb.stub(:not_a_method) { 3 } ; obj.not_a_method.should == 3
[2012-07-25 12:55:04 -0400] sampikesley: doesn't seem to work anyway
[2012-07-25 13:00:50 -0400] neurodamage: sampikesley: just bought that book myself? any good haven't start it yet
[2012-07-25 13:05:03 -0400] sampikesley: Yes
[2012-07-25 13:05:06 -0400] sampikesley: Very good
[2012-07-25 13:05:29 -0400] sampikesley: And it led me to this http://designpatternsinruby.com/
[2012-07-25 13:05:33 -0400] sampikesley: which is also very good
[2012-07-25 13:14:29 -0400] sampikesley: This is never gonna work
[2012-07-25 13:14:39 -0400] sampikesley: I need to stub one attribute onto a real object
[2012-07-25 13:15:42 -0400] Jay_Levitt: Newbie q: I'm using fnichols/chef-user, which can either create users with a user_account provider or with a data bag.  Is there a reason to prefer one over the other? I imagine this comes up often in chef.
[2012-07-25 13:16:48 -0400] Jay_Levitt: ok, why?
[2012-07-25 13:17:30 -0400] sampikesley: I wrote my own custom user LWRP
[2012-07-25 13:17:34 -0400] sampikesley: Ages ago
[2012-07-25 13:17:59 -0400] sampikesley: Specifying everything about a user in a databag just feels right
[2012-07-25 13:18:49 -0400] sampikesley: I can also pull out e.g. their public key to apply to an app-specific system user's authorized_keys
[2012-07-25 13:20:23 -0400] Jay_Levitt: oh, that will be useful.. but that's specific to your LWRP, right? I don't see an obvious way of doing that with chef-user
[2012-07-25 13:22:35 -0400] Jay_Levitt: actually, wouldn't that be easier in the DSL?  user_account { id: "deploy", ssh_keys: all_the_keys() }
[2012-07-25 13:24:32 -0400] sampikesley: POssibly
[2012-07-25 13:24:42 -0400] sampikesley: But my user data bags are used by other of my cookbooks too
[2012-07-25 13:24:49 -0400] Jay_Levitt: ah, then yes
[2012-07-25 13:24:56 -0400] Jay_Levitt: I HATE CHOICES
[2012-07-25 13:25:01 -0400] sampikesley: For us, the user databags are Canonical Truth
[2012-07-25 13:25:28 -0400] Jay_Levitt: I bet if I had a better JSON editing mode in Sublime, I would love data bags
[2012-07-25 13:25:51 -0400] Jay_Levitt: I also bet if this weren't Ruby, I wouldn't insist on perfect elegance in a freaking sysadmin script.
[2012-07-25 13:26:04 -0400] sampikesley: Jay_Levitt: this is a common gripe with Chef, I've found. There are eleventy million ways to do anything, but you really want somebody to say "Just do it this way, never mind why, don't ask questions, just do this"
[2012-07-25 13:26:50 -0400] Jay_Levitt: yeah.. most cookbooks spend half a README page giving you ten options on how to install them
[2012-07-25 13:27:22 -0400] Jay_Levitt: chef feels like "the great thing about standards is there are so many to choose from"
[2012-07-25 13:27:49 -0400] sampikesley: I started writing this up http://pikesley.github.com/learn-yourself-some-chef/
[2012-07-25 13:27:52 -0400] Jay_Levitt: which means you end up reinventing more than you should.  I want more things like librarian (thanks, yfeldblum)
[2012-07-25 13:28:01 -0400] sampikesley: But then I got sick and Im only just getting back in the saddle
[2012-07-25 13:28:07 -0400] Jay_Levitt: HA!  Yes, that quote is money.
[2012-07-25 13:28:07 -0400] sampikesley: Must do some more of that
[2012-07-25 13:28:10 -0400] Jay_Levitt: That's it exactly.
[2012-07-25 13:29:19 -0400] Jay_Levitt: I feel like I'm coming into Chef right at the time when you *might* use m4, but you *might* also have some snippets in raw .cf, and then there's this new thing called perl, and...
[2012-07-25 13:29:36 -0400] freerobby: Does anybody have experience/opinions with managing environments via branch tracking vs standard version control strategies, as outlined here? http://www.opscode.com/blog/2011/04/21/chef-0-10-preview-environments/
[2012-07-25 13:30:27 -0400] freerobby: Both seem fairly heavyhanded, would be curious if anybody's tried both.
[2012-07-25 13:31:22 -0400] Jay_Levitt: oof.. opscode blog seems to be html escaping its html escapes there!
[2012-07-25 13:32:05 -0400] freerobby: Jay_Levitt: Yeah. If you do a command+f for "Environment Workflows" you'll see what I mean.
[2012-07-25 13:32:24 -0400] freerobby: *Environments
[2012-07-25 13:32:40 -0400] Jay_Levitt: ah, yes
[2012-07-25 13:33:59 -0400] freerobby: It seems to me that you should be able to upload cookbook/environment pairs without having to worry about which versions are bound to which.
[2012-07-25 13:34:20 -0400] freerobby: It feels silly to have to keep bumping a cookbook version during development just to get it to bind with your development environment.
[2012-07-25 13:34:26 -0400] Jay_Levitt: too bad librarian-chef doesn't support version-per-environments.. but I guess it can't, since chef doesn't really know that librarian exists.
[2012-07-25 13:35:05 -0400] freerobby: Jay_Levitt: Yeah. I'm starting to think the best way to run multiple environments is with multiple chef server organizations
[2012-07-25 13:35:16 -0400] freerobby: But then you have to manage two separate config files so that knife uploads to the right one
[2012-07-25 13:35:54 -0400] Jay_Levitt: yeah, that seems sucky too.  This is my first week on chef, so don't look to me for answers :)  I'm still in the anger/denial phase of "why doesn't chef solve all my problems"
[2012-07-25 13:36:01 -0400] freerobby: I <3 chef dearly but the environments piece feels very messy.
[2012-07-25 13:36:30 -0400] freerobby: I also wonder if node searches should automatically scope to the current environment instead of forcing that logic on the cookbook.
[2012-07-25 13:36:48 -0400] freerobby: If somebody has a bug in a cookbook with a bad search, and you test it on staging, you could foreseeably FUBAR your production environment.
[2012-07-25 13:36:54 -0400] freerobby: well, maybe not FUBAR but definitely FU
[2012-07-25 13:37:46 -0400] Jay_Levitt: oh, good point... there's no way to guarantee isolation unless you have completely separate orgs.
[2012-07-25 13:44:20 -0400] leifmadsen: is there a node attribute that returns the current role being used to provision the server?
[2012-07-25 13:45:31 -0400] masterkorp: http://pastie.org/private/uz9zqhhet7wm7vjv8wmfq
[2012-07-25 13:45:37 -0400] masterkorp: on this recipe
[2012-07-25 13:46:09 -0400] masterkorp: http://pastie.org/4330169
[2012-07-25 13:46:13 -0400] masterkorp: i get this error
[2012-07-25 13:46:22 -0400] masterkorp: the syntax seems fine
[2012-07-25 13:46:29 -0400] masterkorp: please any sugestions
[2012-07-25 13:46:38 -0400] masterkorp: i need an extra pair of eyes
[2012-07-25 13:47:13 -0400] freerobby: leifmadsen: Do you mean the current role being executed? Node attributes are persistent so it wouldn't be the place for ephemeral info like that
[2012-07-25 13:47:26 -0400] freerobby: But it might be surfaced as an instance_variable or provider attribute somewhere
[2012-07-25 13:47:42 -0400] leifmadsen: freerobby: ya, I need to basically pick a different template based on the role being used
[2012-07-25 13:49:14 -0400] freerobby: leifmadsen: I think the better pattern there would be to have your different roles set some other node attribute, and then do it based on those node attributes
[2012-07-25 13:49:35 -0400] leifmadsen: freerobby: ya... someone at work just told me about node['roles'] that returns an array
[2012-07-25 13:49:39 -0400] yfeldblum: Jay_Levitt, the author of librarian-chef thinks it's a silly practice
[2012-07-25 13:50:06 -0400] freerobby: leifmadsen: Right  but if you have multiple roles in there, node['roles'] won't tell you which is actively running
[2012-07-25 13:50:18 -0400] yfeldblum: Jay_Levitt, and prefers having multiple chef-servers, or multiple orgs in a multitenant chef-server
[2012-07-25 13:50:31 -0400] leifmadsen: freerobby: that's fine -- I mispoke -- I don't need to care what is running right now, just what is going to be executed
[2012-07-25 13:50:43 -0400] masterkorp: I what to be annoying be can anyone help me ?
[2012-07-25 13:51:04 -0400] masterkorp: it says that its an unexpected "=>"
[2012-07-25 13:51:12 -0400] masterkorp: but the syntax is good
[2012-07-25 13:51:15 -0400] freerobby: yfeldblum: Interesting. So does he just set up multiple knife.rb files for each org?
[2012-07-25 13:51:27 -0400] leifmadsen: that's kind of what we've determined we're going to do
[2012-07-25 13:51:37 -0400] leifmadsen: we'll have different dirs with knife.rb files that you work in
[2012-07-25 13:52:01 -0400] leifmadsen: each pointing to the appropriate chef server that manages appropriate environments
[2012-07-25 13:52:25 -0400] freerobby: leifmadsen: I think I like this idea a lot better.
[2012-07-25 13:53:26 -0400] freerobby: leifmadsen: Do you guys find chef-librarian necessary/useful now that cookbooks are in their own repos?
[2012-07-25 13:53:34 -0400] leifmadsen: multiple chef servers with a centralized management server for production. Production management via knife on that server for production, and local knife.rb on workstation for development to the chef-dev server
[2012-07-25 13:53:42 -0400] yfeldblum: freerobby, yes, with a "master" knife.rb which listens for an environment variable KNIFE_ENV and calls from_file to load up the org-specific or chef-server specific "sub"-knife.rb
[2012-07-25 13:53:44 -0400] leifmadsen: freerobby: never used it, so I guess not :)
[2012-07-25 13:53:53 -0400] freerobby: leifmadsen: ha!
[2012-07-25 13:54:02 -0400] leifmadsen: yfeldblum: that's an interesting method
[2012-07-25 13:54:30 -0400] yfeldblum: leifmadsen, export KNIFE_ENV=test ; knife status
[2012-07-25 13:54:40 -0400] leifmadsen: we haven't gotten chef into production yet as we have a lot of existing infrastructure and we're still developing our lab for chef deployment with jenkins and vagrant. Thanks for the idea with the ENV variable
[2012-07-25 13:54:48 -0400] leifmadsen: yfeldblum: amazing, that might work great
[2012-07-25 13:55:00 -0400] freerobby: yfeldblum: We have a CHEF_ORGNAME environment variable; I wonder if I could just swap that out.
[2012-07-25 13:55:03 -0400] leifmadsen: as I have been thinking about the different knife files and how to manage those
[2012-07-25 13:55:52 -0400] yfeldblum: freerobby, others use an orgname envvar as well, but i like to keep my way generic enough to deal with either orgs on hosted-chef, orgs on private-chef, your own chef-server, or if someone makes a new implementation of chef-server, to be able to point to that as well
[2012-07-25 13:56:35 -0400] ssd7: Ohai Chefs
[2012-07-25 13:56:48 -0400] masterkorp: hello
[2012-07-25 13:56:52 -0400] leifmadsen: yfeldblum: might look into that today and see how to make that work. Sounds easy and clean though.
[2012-07-25 13:56:53 -0400] StormSilver: ohai2u ssd7
[2012-07-25 13:57:39 -0400] yfeldblum: leifmadsen, it took me a while to get it working cleanly and certainly a bunch of poking around the chef and mixlib-config sources, but once i set it up it works just fine
[2012-07-25 13:57:43 -0400] masterkorp: oh i fixed my problem
[2012-07-25 13:57:45 -0400] freerobby: yfeldblum: Interesting. Any chance you might gist your knife.rb (obviously scrubbing anything identifiable)? I've used chef-solo and hosted chef but never roled my own server. Alternatively, what would be different other than the ORGNAME stuff?
[2012-07-25 13:57:51 -0400] DigitalFlux: There is no passenger-nginx 'official' cookbook ?
[2012-07-25 13:57:59 -0400] leifmadsen: yfeldblum: and chance you could pastebin an example usage?
[2012-07-25 13:58:07 -0400] leifmadsen: freerobby: :)
[2012-07-25 13:58:15 -0400] DigitalFlux: I kinda need a merge between the official nginx cookbook and this -> https://github.com/rellimevad/passenger_nginx
[2012-07-25 13:58:37 -0400] yfeldblum: freerobby, leifmadsen, not at the moment, but i'm happy to describe the techniques and answer any questions
[2012-07-25 13:59:08 -0400] freerobby: yfeldblum: I'm just curious what about your knife config would be materially different other than the OPSCODE_ vars
[2012-07-25 13:59:23 -0400] leifmadsen: yfeldblum: even documention pointer to using an ENV var in the knife.rb would be useful. I can't spend much time looking at it this second, but want to play today and see about getting that going.
[2012-07-25 13:59:41 -0400] freerobby: leifmadsen: I can gist our knife.rb if you want to see how it could be done with multiple servers
[2012-07-25 13:59:53 -0400] freerobby: the only thing we don't have is a way to do your own chef-server
[2012-07-25 14:00:30 -0400] leifmadsen: we're using our own chef servers :)
[2012-07-25 14:00:38 -0400] leifmadsen: not sure how that is different then though
[2012-07-25 14:01:21 -0400] freerobby: leifmadsen: https://gist.github.com/3176332
[2012-07-25 14:01:22 -0400] leifmadsen: I'm picturing a case statement in the .rb file using the ENV var though for data control or whatever
[2012-07-25 14:02:10 -0400] leifmadsen: I see the reason to use the sub-knife.rb files now though since you could just statically define that data and include it in the knife.rb based on ENV var
[2012-07-25 14:02:24 -0400] leifmadsen: freerobby: thanks, that probably gets me at least half way
[2012-07-25 14:02:27 -0400] yfeldblum: leifmadsen, from_file(File.expand_path("../environments/test/#{ENV["KNIFE_ENV"]}.rb", __FILE__))
[2012-07-25 14:02:32 -0400] leifmadsen: I'll document later if I get this all working
[2012-07-25 14:02:46 -0400] leifmadsen: yfeldblum: bam -- thanks much
[2012-07-25 14:03:52 -0400] yfeldblum: leifmadsen, freerobby, i don't keep these "sub"-knife.rb files in version control, or my client keys or the validation key, etc; but they are easy enough to rewrite if i need to rewrite them and happen not to have them backed up
[2012-07-25 14:04:46 -0400] leifmadsen: yfeldblum: ya exactly -- that's what I was thinking because I didn't want different branches when merged to overwrite the existing files, but I could actually separate them out now across the branches and keep some data in git if wanted
[2012-07-25 14:05:10 -0400] yfeldblum: leifmadsen, freerobby, because all the options that describe this particular chef-repo are set in the "master" knife.rb (cache path, cookbook path, etc), and all the options that specify the client, key, and chef-server-url, of which there are only a few, are in the "sub" knife.rb for each environment
[2012-07-25 14:05:48 -0400] leifmadsen: +1
[2012-07-25 14:05:51 -0400] leifmadsen: makes sense to me
[2012-07-25 14:06:49 -0400] yfeldblum: leifmadsen, freerobby, in fact, you can even make a bunch of helper methods in your "master" knife.rb, arranging it such that you can have each "sub" knife.rb only need to call a single method
[2012-07-25 14:08:30 -0400] yfeldblum: leifmadsen, obviously, if i have a config/environments/test/knife.rb with config pointing to the test infrastructure's chef-server, then there are also the config/environments/test/yfeldblum.pem and config/environments/test/validation.pem or whatever else is generally needed, and the "sub" knife.rb will have to point to these files
[2012-07-25 14:10:02 -0400] leifmadsen: yfeldblum: aye, and the knife.rb in that subdir could even look up what my username is locally if I want to dynamically pick the .pem file I suppose
[2012-07-25 14:10:10 -0400] Jay_Levitt: yfeldblum: tell the author of librarian-chef "thanks for the advice" :)
[2012-07-25 14:10:13 -0400] Jay_Levitt: I just had coffee with a guy who worked on Suse/Zenworks/Ximian YAST/Zypp, and I feel WAY BETTER about chef's rough edges now.
[2012-07-25 14:10:21 -0400] yfeldblum: leifmadsen, indeed
[2012-07-25 14:10:28 -0400] yfeldblum: Jay_Levitt, done
[2012-07-25 14:10:34 -0400] yfeldblum: Jay_Levitt, yw
[2012-07-25 14:10:53 -0400] masterkorp: Can anyone confirm this http://pastie.org/4330289
[2012-07-25 14:10:55 -0400] masterkorp: ?
[2012-07-25 14:11:09 -0400] masterkorp: its a correct syntax right ?
[2012-07-25 14:11:40 -0400] leifmadsen: masterkorp: nothing obvious that I see anyways
[2012-07-25 14:11:51 -0400] yfeldblum: leifmadsen, i like to just look for "validation.pem" and any other "*.pem" file in the same directory as the sub-knife.rb and assume those are the two key files i need (validation and my client key) for that chef-server
[2012-07-25 14:12:18 -0400] leifmadsen: yfeldblum: +1
[2012-07-25 14:12:30 -0400] yfeldblum: leifmadsen, that logic is wrapped up in a method defined elsewhere, and called as a one-liner in the sub-knife.rb
[2012-07-25 14:13:57 -0400] leifmadsen: yfeldblum: thanks for the tips, much appreciated. I had been thinking about this for a while and you've given me a lot of tools to work with. We're probably going to abstract out the production stuff to only be accessable from another server too in order to help devs not fuck up :)
[2012-07-25 14:14:14 -0400] yfeldblum: leifmadsen, no probs
[2012-07-25 14:15:18 -0400] StormSilver: DEVS ARE PERFECT THEY SHOULD ALWAYS HAVE PRODUCTION KEYS
[2012-07-25 14:15:32 -0400] leifmadsen: :)
[2012-07-25 14:15:57 -0400] gmcinnes: how else can they do updates in place?
[2012-07-25 14:16:11 -0400] StormSilver: Exactly!
[2012-07-25 14:16:21 -0400] StormSilver: And what if they need to ship an untested patch?
[2012-07-25 14:16:31 -0400] gmcinnes: oh. they wouldn't do that.
[2012-07-25 14:16:42 -0400] gmcinnes: of course they tested it and it works on *their* machine :)
[2012-07-25 14:16:48 -0400] StormSilver: Oh, right.
[2012-07-25 14:16:57 -0400] StormSilver: Not that I've ever done that.
[2012-07-25 14:16:59 -0400] cheeseplus: Of course I upgraded the kernel without testing!
[2012-07-25 14:17:29 -0400] leifmadsen: always make sure you have no way of going back to a known working version too in order to make sure progress is always going forward
[2012-07-25 14:18:07 -0400] freerobby: yfeldblum: Was AFK for a bit, thanks for the pointers
[2012-07-25 14:18:24 -0400] nickpresta: When the rabbitmq recipe tries to restart via: `setsid /etc/init.d/rabbitmq-server restart` I get: `execvp: No such file or directory` and then setsid returns 1 and fails. Here is a gist: https://gist.github.com/3171498
[2012-07-25 14:20:03 -0400] Death_Syn: Hi
[2012-07-25 14:20:32 -0400] Death_Syn: I just started building a chef server on Ubuntu 12.04 LTS, and am failing to start chef-solr for the following: /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- chef/log (LoadError)
[2012-07-25 14:21:12 -0400] Death_Syn: looks like chef/solr/application/solr is the one actually making the requirement?
[2012-07-25 14:22:14 -0400] Death_Syn: I see where it looks for chef/log, but I do not find chef/log.rb anywhere to be used
[2012-07-25 14:22:42 -0400] yfeldblum: freerobby, no probs
[2012-07-25 14:35:18 -0400] Jay_Levitt: Storm: I used to attach debuggers to live production problems and do things like "break 2934(if date_p = null() then print "found null date!";date_p = pointer(todays_date);cont)"
[2012-07-25 14:36:22 -0400] StormSilver: Jay_Levitt: Sometimes that's the only way.
[2012-07-25 14:36:50 -0400] StormSilver: Jay_Levitt: If you've got three people standing over your shoulder watching, then it's a lot safer.
[2012-07-25 14:36:51 -0400] Jay_Levitt: StormSilver: Yep :)  especially when you have a very deploy cycle.
[2012-07-25 14:37:07 -0400] Jay_Levitt: +slow
[2012-07-25 14:38:09 -0400] Jay_Levitt: Oo, good idea.  I will tell my past self to get a second set of eyes.
[2012-07-25 14:38:23 -0400] StormSilver: Jay_Levitt: I'm a fan of this: http://www.bnj.com/cowboy-coding-pink-sombrero/
[2012-07-25 14:38:41 -0400] Jay_Levitt: yes!!  We do that at PatientsLikeMe - everyone dons "crisis hats"
[2012-07-25 14:43:49 -0400] dwhsix: StormSilver: that is *awesome*
[2012-07-25 14:43:59 -0400] zomGreg: is there a resource/mechanism for doing authenticated remote_file downloads?
[2012-07-25 14:48:49 -0400] gmcinnes: oh man I *love* that pink sombrero
[2012-07-25 14:50:19 -0400] gmcinnes: It's like making the last person to break the build were a dunce cap  :)
[2012-07-25 14:50:47 -0400] Jay_Levitt: it's not just about punishment tho - it's about giving yourself contextual reminders that you are in "production mode"
[2012-07-25 14:51:04 -0400] dwhsix: +1
[2012-07-25 14:51:54 -0400] yfeldblum: not quite sure how you edit code on the production server when there are actually X production servers
[2012-07-25 14:55:48 -0400] Jay_Levitt: You pick one, see if your fix works, then roll it out the normal way
[2012-07-25 14:57:01 -0400] gmcinnes: absolutely. I have a bright red fugly background set in the console in prod servers.
[2012-07-25 14:57:22 -0400] gmcinnes: not only does it make it obvious you're there, but the pain of looking at it makes you want to get out of there asap :)
[2012-07-25 14:59:55 -0400] nobdraisentone: https://github.com/opscode/chef/blob/master/chef/lib/chef/search/query.rb#L39 what `&block' means here?
[2012-07-25 15:01:10 -0400] gmcinnes: if the search method is passed a block it will be in that variable.
[2012-07-25 15:01:52 -0400] stormerider: does anyone have a tutorial on using the users cookbook? there's apparently some differences between the official one and the one in my repo and im confused about how to specify the users/groups for a role
[2012-07-25 15:02:16 -0400] yfeldblum: nobdraisentone, http://yehudakatz.com/2010/02/25/rubys-implementation-does-not-define-its-semantics/
[2012-07-25 15:03:09 -0400] gmcinnes: awesome yfeldblum. I was looking for a good description of that.
[2012-07-25 15:04:12 -0400] nobdraisentone: yfeldblum: thanks
[2012-07-25 15:06:28 -0400] yfeldblum: rubyrubyrubyrubyruby!
[2012-07-25 15:09:55 -0400] qhartman: I have a bunch of different chef recipes that add package repositories and then immediately run yum or apt-get update to get the latest package info. Sometimes they run 4 or 5 times on a single chef run, and they run on every chef run. I'd like to reduce that to make runs faster. Any suggestions for tests I can do to skip those updates? All the ones I've thought of so far are flawed in one way or another.
[2012-07-25 15:10:20 -0400] ggolin: qhartman, :notifies
[2012-07-25 15:11:33 -0400] qhartman: ggolin, When I've tried that, the first chef run always fails to install the packages because on that first run, when it actually needs to run, the update waits until after the package attempts to install
[2012-07-25 15:13:33 -0400] linTest: question about opscode > cookbook > database -- platform list does not show Windows. I need something like this for SQL Server on a Windows server
[2012-07-25 15:16:10 -0400] cheeseplus: linTest: sounds like you get to write it!
[2012-07-25 15:34:50 -0400] Jay_Levitt: Is there a way to express a data bag in a single json file, instead of one file per item?
[2012-07-25 15:39:49 -0400] yfeldblum: Jay_Levitt, no, and thank goodness no, because that's a silly idea
[2012-07-25 15:40:07 -0400] ssd7: Jay_Levitt: Unfortunately I don't think so.  Although, it wouldn't be too hard to make a plugin to handle such a file.
[2012-07-25 15:40:25 -0400] Jay_Levitt: yfeldblum: why is it silly to want a users.json instead of a bunch of individual files?
[2012-07-25 15:40:26 -0400] yfeldblum: Jay_Levitt, think of a data-bag like it's a mysql table with thousands or millions of records, and think of a data-bag item like it's a single record in that mysql table
[2012-07-25 15:41:28 -0400] yfeldblum: Jay_Levitt, the data-bags system is just an arbitrary database with read-mostly, k/v, GET/PUT/DELETE semantics, and arbitrary JSON content
[2012-07-25 15:41:40 -0400] yfeldblum: Jay_Levitt, and the whole idea is to treat it as such
[2012-07-25 15:42:11 -0400] ErebusBat: Can I ask a question RE: ruby-shadow and chef-solo on Ubuntu 10.04 (lucid)?
[2012-07-25 15:42:14 -0400] sampikesley: it would fit really nicely into MongoDB...
[2012-07-25 15:42:24 -0400] Jay_Levitt: so maybe I'm thinking about it too much from the perspective of the chef-repo directory instead of the chef server?
[2012-07-25 15:42:54 -0400] ssd7: Jay_Levitt: Even from the the chef-repo directory, I think the file-per data bag item is easier.
[2012-07-25 15:43:02 -0400] ssd7: It means that your commits tend to be easier to read
[2012-07-25 15:43:22 -0400] yfeldblum: Jay_Levitt, i mean, yeah, it's data in a database ... with convenient CLI commands to GET/PUT/DELETE "tables" and "records" (data bags and data bag items)
[2012-07-25 15:43:24 -0400] ssd7: and when you need to make mass changes, the shell is just there, waiting to help you.
[2012-07-25 15:43:34 -0400] mattray: http://live.twit.tv/Chef on FLOSS Weekly
[2012-07-25 15:43:50 -0400] ssd7: mattray: NICE!
[2012-07-25 15:43:53 -0400] Jay_Levitt: ssd7: true... I'm living in my text editor, where I don't have any way to do aggregate table operations (or even select more than one row)
[2012-07-25 15:43:56 -0400] ErebusBat: I am getting the error "You must have ruby-shadow installed for password support!" which is strange given: 1) I am using knife-solo/opsode installer  2) I have installed libshadow-ruby1.8 and 2) did a gem install using the embedded ops code ruby, yet still get the error
[2012-07-25 15:44:37 -0400] yfeldblum: Jay_Levitt, you can certainly keep all the records in your database in git; most people do when it comes to chef and data bags, although i don't think that's necessary or even desirable
[2012-07-25 15:44:59 -0400] Jay_Levitt: yfeldblum: well, I was thinking about moving towards the git push -> hook -> knife upload workflow
[2012-07-25 15:45:10 -0400] Jay_Levitt: maybe I shouldn't.  Just saw a good post about "the codebase vs the database"
[2012-07-25 15:45:19 -0400] yfeldblum: Jay_Levitt, where's that post?
[2012-07-25 15:48:03 -0400] ErebusBat: No one else had this issue on luicd?
[2012-07-25 15:48:30 -0400] allan_wind: Is there a way to only run code in the attributes when cookbook is installed?  Similar to a ruby_block?
[2012-07-25 15:49:10 -0400] yfeldblum: Jay_Levitt, that's something i've been talking about off and on in this channel
[2012-07-25 15:49:26 -0400] yfeldblum: allan_wind, not sure i understood the question
[2012-07-25 15:49:32 -0400] ssd7: ErebusBat: From what you are describing, if you did install ruby-shadow to the embedded gem, it *should* work
[2012-07-25 15:50:42 -0400] ErebusBat: ssd7 I agree.  I did: cd /opt/chef/embedded/bin/gem install ruby-shadow and it work
[2012-07-25 15:51:00 -0400] ErebusBat: ^  ignore that 'CD'
[2012-07-25 15:51:29 -0400] allan_wind: yfeldblum: I have an ntp cookbook that sets attributes conditionally based on the version string of the ntp daemon.  It runs even if the ntp cookbook is not enabled on the host, so I check if ntp is installed of course, but I prefer deferring evaluation of most of the attribute if cookbook is not enabled
[2012-07-25 15:52:08 -0400] knuckolls: today represents the day that i go from fooling around with cassandra to getting a production cluster up and running. anyone in here using anything specific to provision a cluster with chef?
[2012-07-25 15:53:20 -0400] ErebusBat: ssd7 and "ruby-shadow (2.1.4)" shows in a gem list from the embedded ruby
[2012-07-25 15:53:34 -0400] ssd7: Hrmm.
[2012-07-25 15:53:40 -0400] yfeldblum: allan_wind, you can certainly shell out in an attributes file to find out information about the server ... has_ntp = `which ntpd`.strip != "" ; if has_ntp ... else ... end
[2012-07-25 15:54:57 -0400] allan_wind: This is what I do now:
[2012-07-25 15:54:58 -0400] allan_wind: ntp_version = `/usr/sbin/ntpd --version`
[2012-07-25 15:55:13 -0400] allan_wind: and will probably just catch the exception for `` executing a non-existing file
[2012-07-25 15:55:50 -0400] allan_wind: It seems like there should be a way to say, don't bother evaluating this block of the attribute file if the cookbook is not even install on the host nayways
[2012-07-25 15:55:57 -0400] ssd7: ErebusBat: You might also try putting a "chef_gem 'ruby-shadow'" into one of your recipes to be sure.
[2012-07-25 15:56:27 -0400] ErebusBat: ssd7 Will do
[2012-07-25 15:57:20 -0400] yfeldblum: allan_wind, attributes files have no way to know whether or not a recipe in the same cookbook will or won't be run
[2012-07-25 15:57:54 -0400] allan_wind: yfeldblum: k, thx
[2012-07-25 15:58:01 -0400] yfeldblum: allan_wind, if you really want that behavior with attributes, set default attributes assuming ntp isn't there in the attributes file, and then in an ntp recipe, set new default attributes assuming ntp is there
[2012-07-25 15:58:58 -0400] ErebusBat: ssd7 I took out the rescue block looks like it also depends on the highline gem
[2012-07-25 15:59:09 -0400] ErebusBat: Putting that in a chef_gem block and we shal see
[2012-07-25 15:59:19 -0400] allan_wind: yfeldblum: good suggestion, somehow, I like it when pushing as much of the os dependent stuff into attributes instead of recpe
[2012-07-25 15:59:22 -0400] allan_wind: recipe
[2012-07-25 16:00:53 -0400] Jay_Levitt: yfeldblum: found it.. it was you who said it!  http://lists.opscode.com/sympa/arc/chef/2012-04/msg00351.html
[2012-07-25 16:02:00 -0400] yfeldblum: Jay_Levitt, hah, forgot about that ... also i thought you were talking about a blog post or something, didn't realize you meant the list
[2012-07-25 16:02:24 -0400] ErebusBat: ssd7: that was it. highline gem was also missing
[2012-07-25 16:19:31 -0400] Adz: can I get chef-client to just reset the ohai attributes?
[2012-07-25 16:21:11 -0400] qhartman: I believe if you set an empty run list on a node (or maybe a no-op role) it will run ohai stuff and save the changes. Not sure though
[2012-07-25 16:21:39 -0400] yfeldblum: Adz, for what purpose?
[2012-07-25 16:23:01 -0400] Adz: everything got moved to another subnet. I use the autoetchosts cookbook so the hosts can find each other, but chef-client keeps failing because hosts aren't where it expects them to be.
[2012-07-25 16:23:31 -0400] specialsauce: i've been doing some more thinking about how to practically certain eg JSON files from templates. At the moment the problem with the template resource is you can only easily variabilise individual values rather than truly build the file dynamically. The problem then comes when you have a JSON file containing an array of variable size, but with elements of a fixed format. This seems to be quite common. I'm now thinking I need to create a "templa
[2012-07-25 16:23:31 -0400] specialsauce: teoftemplates" LWRP, where you create a template that is built up from micro-templates into a full file. Does this sound crazy to people or sound like a good idea?
[2012-07-25 16:25:42 -0400] sampikesley: what does your "array of variable size" contain?
[2012-07-25 16:27:04 -0400] specialsauce: an array that might contain one or more other arrays or hashes, with 0-n elements
[2012-07-25 16:27:16 -0400] specialsauce: so my idea is basically to allow recursion in templates
[2012-07-25 16:27:25 -0400] specialsauce: by building them up from their smallest components
[2012-07-25 16:27:45 -0400] specialsauce: ie define a templateoftemplates as an array of hashes, arrays etc, each of which is in a micro template
[2012-07-25 16:27:53 -0400] specialsauce: i don't see any other way of managing this effectively
[2012-07-25 16:27:59 -0400] sampikesley: sounds dangerous
[2012-07-25 16:28:06 -0400] specialsauce: in what way?
[2012-07-25 16:28:14 -0400] aravind_: hi, anyone else having problems getting to the opscode wiki in chrome?
[2012-07-25 16:28:26 -0400] sampikesley: I mean it sounds awesome in the right hands, but it sounds like you could easily tie yourself in knots
[2012-07-25 16:28:42 -0400] aravind_: seems to work just fine in firefox and chromium.. its just chrome that seems to be having problems with it.
[2012-07-25 16:28:55 -0400] sampikesley: aravind_: WORKSFORME
[2012-07-25 16:29:11 -0400] specialsauce: sampikesley, I think it matches how you build the JSON or whatever config file conceptually anyway
[2012-07-25 16:29:13 -0400] ssd7: aravind_: Works here too, any particular error you are getting, or just timing out?
[2012-07-25 16:29:28 -0400] specialsauce: sampikesley, i'm open to other suggestions but I can't think of any other alternatives
[2012-07-25 16:29:40 -0400] aravind_: ssd7: Error 354 (net::ERR_CONTENT_LENGTH_MISMATCH): The server unexpectedly closed the connection.
[2012-07-25 16:30:04 -0400] Jay_Levitt: aravind_: worksforme too, Mac 10.7.4, Chrome 20.0.1132.57
[2012-07-25 16:30:12 -0400] Adz: yfeldblum, everything got moved to another subnet. I use the autoetchosts cookbook so the hosts can find each other, but chef-client keeps failing because hosts aren't where it expects them to be.
[2012-07-25 16:30:13 -0400] aravind_: this has been happening since yesterday morning (afaict).
[2012-07-25 16:30:46 -0400] cheeseplus: also fine for me
[2012-07-25 16:31:10 -0400] specialsauce: aravind_, itsnotmeitsyou :-P
[2012-07-25 16:31:28 -0400] ssd7: aravind_: I'll poke around a bit.
[2012-07-25 16:31:38 -0400] aravind_: ssd7: thanks.
[2012-07-25 16:31:58 -0400] aravind_: specialsauce: might be.. but it's really confusing as to why..
[2012-07-25 16:32:51 -0400] aravind_: if it helps, I am linux, running 20.0.1132.57 on 64 bit linux.
[2012-07-25 16:33:08 -0400] aravind_: s/am linux,/am/
[2012-07-25 16:33:25 -0400] sampikesley: specialsauce: I'm guiessing the erb templates can't do some sort of "include_other_file(param => 'foo')"?
[2012-07-25 16:33:45 -0400] sampikesley: because that would be awesome
[2012-07-25 16:34:20 -0400] mattray: aravind_: proxies?
[2012-07-25 16:34:36 -0400] specialsauce: sampikesley, i'm not sure, that's a good alternative, similar idea except how would you handle size 0, you'd have to have logic about whether to insert eg comma separators
[2012-07-25 16:34:40 -0400] qhartman: sampikesley, if you want to include just plain text, you can do: "<%= File.read("common.txt") %>"
[2012-07-25 16:35:00 -0400] specialsauce: qhartman, it would need to include other templtes, and have them processed
[2012-07-25 16:35:03 -0400] aravind_: mattray: nope, no proxies in between.  I can disable all proxy config and test again.
[2012-07-25 16:35:41 -0400] aravind_: mattray: actually, yup.. it was already in the direct connection mode - so yeah, no proxies.
[2012-07-25 16:35:57 -0400] mattray: weird, can't reproduce
[2012-07-25 16:36:13 -0400] mattray: any particular build of chrome?
[2012-07-25 16:36:49 -0400] aravind_: umm.. I am on arch linux, so whatever they get their build from.. I think they fetch an rpm and extract the bits from there.
[2012-07-25 16:37:18 -0400] aravind_: I can track the rpm down if you think it will help.
[2012-07-25 16:38:23 -0400] qhartman: specialsauce, I think you can put arbirary ruby stuff in the ERB brackets, so you should be able to include another ERB somehow: http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html
[2012-07-25 16:38:57 -0400] ssd7: Well, chromium has this commit
[2012-07-25 16:38:59 -0400] ssd7: http://git.chromium.org/gitweb/?p=chromium/src.git;a=commitdiff;h=f001bd6a14612d0d547539c5a7a3cf53f95e3816
[2012-07-25 16:40:29 -0400] aravind_: ssd7: that's from 2011.. :) this stuff was working last week.
[2012-07-25 16:40:44 -0400] qhartman: specialsauce, Google says: http://stackoverflow.com/questions/10236049/including-one-erb-file-into-another
[2012-07-25 16:41:40 -0400] specialsauce: qhartman, taking a look now, cheers
[2012-07-25 16:42:10 -0400] qhartman: specialsauce, It may not be directly applicable since it seems to use some Rails glue, but I bet you could make it go
[2012-07-25 16:43:20 -0400] specialsauce: qhartman, just trying to make sense of it :-P
[2012-07-25 16:43:42 -0400] qhartman: good first step
[2012-07-25 16:43:45 -0400] qhartman: :D
[2012-07-25 16:45:53 -0400] specialsauce: interesting, I think I get it. It still doesn't really cover the fact that the included template could be (if it was an array) of size 0 or size 6 for instance, so you'd still have to manage the comma separators somehow I think?
[2012-07-25 16:46:54 -0400] jwitrick: Im having issues with knife bootstrap and a custom distro. undefined local variable or method `first_boot'
[2012-07-25 16:47:19 -0400] jwitrick: any one know of any workarounds
[2012-07-25 16:47:59 -0400] ssd7: jwitrick: Can you post the bootstrap template you are working to gist.github.com or something similar?  Also, what version of Chef?
[2012-07-25 16:48:15 -0400] sampikesley: specialsauce: some_array.join(","), no?
[2012-07-25 16:48:58 -0400] jwitrick: I am running chef-server 10.8 https://gist.github.com/3177203
[2012-07-25 16:49:34 -0400] ssd7: jwitrick: What is the version of chef you are running locally.  That is, what does knife --version display.
[2012-07-25 16:49:45 -0400] jwitrick: same. 10.8
[2012-07-25 16:50:04 -0400] specialsauce: sampikesley, i'll have a play around with this i think, might take a bit of fiddling :-)
[2012-07-25 16:50:25 -0400] sampikesley: If you crack it, blog it  :)
[2012-07-25 16:52:05 -0400] ssd7: jwitrick: quickest work around would be to upgrade your local chef version.  The first_boot function was added after 10.8.
[2012-07-25 16:52:14 -0400] jwitrick: make sense.
[2012-07-25 16:52:19 -0400] jwitrick: ill look at that.
[2012-07-25 16:52:36 -0400] jwitrick: thanks for the help
[2012-07-25 16:52:44 -0400] ssd7: np
[2012-07-25 17:04:22 -0400] freerobby: When uploading cookbooks via "rake upload_cookbooks", is there any way to stop chef from generating all of its metadata.json files now that they are no longer necessary?
[2012-07-25 17:17:19 -0400] aravind_: ssd7: there?  I think I figured out the problem..
[2012-07-25 17:24:50 -0400] corp: greetings
[2012-07-25 17:28:34 -0400] ssd7: aravind_: great, responded via private message, got pulled away for a second.
[2012-07-25 17:30:27 -0400] newb: Thinking of setting up a reverse SSH tunnel to manage EC2 nodes from an inhouse chef server: what ports would I need to forward?
[2012-07-25 17:31:22 -0400] corp: newb: chef server works over HTTPS, so just port 443
[2012-07-25 17:31:44 -0400] newb: +corp, but what's 4040?
[2012-07-25 17:32:43 -0400] corp: i believe thats where the web ui is started, by default
[2012-07-25 17:32:53 -0400] corp: i usually set everything up on the same port
[2012-07-25 17:33:10 -0400] newb: +corp, oh I meant 4000
[2012-07-25 17:33:24 -0400] corp: thats also the default for the chef server
[2012-07-25 17:33:41 -0400] corp: so, those ports if you are using the default setup
[2012-07-25 17:33:56 -0400] newb: 4040 is the webui sure and hence I don't need to fwd it as clients don't use that, but yes, I am using default setup
[2012-07-25 17:34:54 -0400] newb: so only 4000 huh, taht was easy! I was concerned as I recall people having lots of issues reverse SSHing their chef server!
[2012-07-25 17:35:20 -0400] corp: well, i've never tried it
[2012-07-25 17:35:34 -0400] corp: with the old openid setup, it may have been an issue
[2012-07-25 17:35:49 -0400] newb: +corp, I am using 10.12
[2012-07-25 17:42:25 -0400] corp: newb: should be OK then
[2012-07-25 17:43:35 -0400] yfeldblum: newb, chef-server-api and chef-server-webui work over HTTP and not HTTPS, but many people choose to set up an http reverse proxy with tls/ssl termination and proxy requests through it
[2012-07-25 17:44:47 -0400] yfeldblum: newb, the chef-server cookbook can, for example, optionally set up apache2 to listen to HTTPS and be a reverse proxy to a chef-server-api/chef-server-webui backend
[2012-07-25 17:49:01 -0400] aravind_: if anyone else is having problems viewing to the opscode wiki, try clearing out all opscode cookies from your browser and try again.
[2012-07-25 17:49:21 -0400] newb: yfeldblum, yes I have seen that functionality but my needs are simple (only for testing) ATM, and I can see reverse SSHing 4000 is all I need. I am astonished at how simple it sounds and will try it out now!
[2012-07-25 17:50:26 -0400] yfeldblum: newb, proxying over SSH doesn't sound fun to me
[2012-07-25 17:50:58 -0400] stearns: "knife linode server create" seems to allocate a private IP automatically (yay!); any hints on passing it into the initial chef-client run so that I can set up /etc/network/interfaces with it?
[2012-07-25 17:51:12 -0400] yfeldblum: newb, configuring your knife.rb to talk to "http://#{ip_or_dns_name}:4000" seems easier
[2012-07-25 17:52:02 -0400] newb: yfeldblum, my chef server is my desktop, behind my home's DSL router
[2012-07-25 17:52:47 -0400] newb: I don't want to port forward (router's locked) and they easy way out seems proxying over SSH, once I have logged into a brand new EC2 node
[2012-07-25 17:52:52 -0400] newb: is there a better way?
[2012-07-25 17:53:04 -0400] yfeldblum: newb, run your test chef-server on EC2?
[2012-07-25 17:53:56 -0400] newb: yfeldblum, but I already have  my chef server on my desktop :-(
[2012-07-25 17:54:19 -0400] cheesepl_: it seems like that setup is going to overly complicate things
[2012-07-25 17:54:22 -0400] newb: although it takes me no time to provision a new chef-server thanks to spiceweasel, berkshelf and chef!
[2012-07-25 17:54:35 -0400] newb: cheesepl_, I am all ears
[2012-07-25 17:54:53 -0400] newb: what complications are we looking forward to?
[2012-07-25 17:55:00 -0400] newb: I am interested
[2012-07-25 17:55:33 -0400] yfeldblum: newb, setting up a central service, that other external services will talk to, on your desktop ... doesn't seem like a good idea
[2012-07-25 17:55:43 -0400] cheesepl_: ^ that
[2012-07-25 17:56:02 -0400] newb: yfeldblum, ha ha, yes, but my desktop is a sunk cost
[2012-07-25 17:56:07 -0400] newb: new nodes cost me money by the minute
[2012-07-25 17:56:29 -0400] newb: unless the hassle of issues > new EC2 nodes
[2012-07-25 17:56:38 -0400] newb: so I need to learn if the hassle of issues > new EC2 nodes
[2012-07-25 17:57:04 -0400] newb: need you guys experience in that
[2012-07-25 17:57:28 -0400] cheesepl_: My experience tells me that the hassle of issues would be greater
[2012-07-25 17:57:44 -0400] cheesepl_: it's like running a web server on your home machine, it can work but it's just not a _good_ idea
[2012-07-25 17:58:09 -0400] yfeldblum: newb, run it on a single micro instance?
[2012-07-25 18:00:18 -0400] newb: yfeldblum, chef server on a  micro instance?
[2012-07-25 18:00:20 -0400] newb: no way
[2012-07-25 18:00:27 -0400] newb: more like a m1.medium
[2012-07-25 18:00:42 -0400] benblack: one more reason not to use server.
[2012-07-25 18:00:46 -0400] newb: unless you have some solr flags I don't know about
[2012-07-25 18:01:00 -0400] newb: no, 10.12 uses no solr does it?
[2012-07-25 18:01:10 -0400] yfeldblum: newb, why not on a micro instance?
[2012-07-25 18:01:13 -0400] newb: rabbit and couch
[2012-07-25 18:01:15 -0400] yfeldblum: newb, just for testing?
[2012-07-25 18:01:24 -0400] benblack: chef-solo 4 life
[2012-07-25 18:01:25 -0400] yfeldblum: newb, have you tried it?
[2012-07-25 18:01:52 -0400] yfeldblum: benblack, that just moves around the cost of building node.json's for 10,000 nodes to somewhere else :P
[2012-07-25 18:01:55 -0400] newb: yfeldblum, I tried it in a vagrant VM with 2GB RAM and was in some pain
[2012-07-25 18:02:05 -0400] yfeldblum: newb, vagrant =/= EC2
[2012-07-25 18:02:12 -0400] newb: hmm
[2012-07-25 18:02:29 -0400] newb: chef server, on a single micro instance?
[2012-07-25 18:02:32 -0400] newb: okk
[2012-07-25 18:02:44 -0400] newb: knife-server huh?
[2012-07-25 18:02:56 -0400] benblack: yfeldblum: 1) why have per-node files?  2) also eliminates all the auth nonsense, the couch nonsense, the rabbit nonsense, and having at least 3 copies of things outside version control.
[2012-07-25 18:02:59 -0400] benblack: so.
[2012-07-25 18:03:02 -0400] newb: no, knife bootstrap with omnibus template
[2012-07-25 18:03:04 -0400] benblack: chef-solo!
[2012-07-25 18:03:41 -0400] yfeldblum: newb, play around with the EC2 calculator for a micro instance with a single EBS volume to see what the price is
[2012-07-25 18:04:20 -0400] yfeldblum: newb, or you can run it on a rackspace flavor-2 server (512MB, 20GB), which is $22/mo
[2012-07-25 18:04:36 -0400] newb: benblack, chef-solo is cool until you start needing search to dsicover nodes in a cluster - la infochips iranfan
[2012-07-25 18:05:02 -0400] yfeldblum: newb, it doesn't run well on a rackspace flavor-1 server (256MB, 10GB), and anyway rackspace is discontinuing that flavor
[2012-07-25 18:05:18 -0400] yfeldblum: benblack, they all have the same run-list?
[2012-07-25 18:06:26 -0400] yfeldblum: newb, i haven't tried knife-server, but i've done it a few times following the "chef-server via chef-solo" tutorial on the opscode wiki
[2012-07-25 18:10:56 -0400] Death_Syn: i'm probably about to put up a chef-server on a rackspace flavor-2
[2012-07-25 18:11:05 -0400] Death_Syn: it is working out pretty well on my local kvms
[2012-07-25 18:12:23 -0400] freerobby: yfeldblum: One more question for your multi-env setup: for environment specific configuration, e.g. setting RACK_ENV to staging vs production, do you put that in a data bag, or do you code your recipes in some other way to deduce that?
[2012-07-25 18:14:06 -0400] miah: moin
[2012-07-25 18:14:43 -0400] yfeldblum: freerobby, all app config is done via a data-bag item for that app, and that data-bag item can include things like what files to inject (config/database.yml) and also includes "config", which is a set of env vars
[2012-07-25 18:15:32 -0400] yfeldblum: freerobby, the app's start script (written and dropped off by chef) exports the env vars and runs the "real" app start command
[2012-07-25 18:16:58 -0400] freerobby: yfeldblum: Thank you very much.
[2012-07-25 18:17:04 -0400] yfeldblum: freerobby, so it looks like `export RACK_ENV=production ; export DATABASE_URL=postgres://127.0.0.1/dbname ; export PORT=12345 ; cd /path/to/app ; rvm use app-specific-ruby ; exec bundle exec unicorn -c config/unicorn.rb`
[2012-07-25 18:17:16 -0400] freerobby: yep, got it
[2012-07-25 18:17:26 -0400] corp: does anyone actually use ironfan?
[2012-07-25 18:17:39 -0400] yfeldblum: corp, i hear ironman uses ironfan
[2012-07-25 18:17:42 -0400] freerobby: yfeldblum: this is soooooooooo much better than the typical environment setup
[2012-07-25 18:19:22 -0400] yfeldblum: freerobby, so i have a data-bag item like this: {"id": "some-app-name", "config": {"RACK_ENV": "production", "DATABASE_URL": "postgres://127.0.0.1/dbname"}, "run_command": "bundle exec unicorn -c config/unicorn.rb"}
[2012-07-25 18:20:07 -0400] yfeldblum: freerobby, the recipe adds the PORT env var (and apps are required to look for it and listen on that port, as part of the infrastructure <--> application contract)
[2012-07-25 18:21:11 -0400] yfeldblum: freerobby, so apache might be listening on 80 and 443, and the recipe configures apache to proxy to localhost:12345, and the same recipe configures the start script to export PORT=12345
[2012-07-25 18:21:44 -0400] freerobby: yfeldblum: We do something similar, the only issue on our end is that 75% of our env vars are configured dynamically by querying chef server, so i'll need to intersperse the static stuff with the dynamic.
[2012-07-25 18:21:48 -0400] freerobby: I think I like that paradigm though.
[2012-07-25 18:21:48 -0400] yfeldblum: freerobby, this is heavily influenced by a combination of the application cookbook and 12factor.net
[2012-07-25 18:25:03 -0400] yfeldblum: freerobby, yep, so a strategy to handle that is: in the data-bag item's config entry, if a value is a string, then export that string, but if the value is a hash (json object), then there's special recipe code that interprets that hash, runs the query, and comes up with a string
[2012-07-25 18:25:52 -0400] yfeldblum: freerobby, so e.g., {"id": "some-app", "config":{"DATABASE_URL": {"type": "postgres-url", "bag": "services", "item": "some-app-db"}}
[2012-07-25 18:27:15 -0400] freerobby: yfeldblum: Yeah. Luckily in our case it's even more straightforward where the queries aren't dependent on anything that would be in the databag.
[2012-07-25 18:27:28 -0400] yfeldblum: freerobby, like what?
[2012-07-25 18:28:20 -0400] freerobby: yfeldblum: For example, we deduce our database URL by querying chef server and returning a URL generated by a role and dns lookup.
[2012-07-25 18:28:52 -0400] freerobby: e.g. RIAK_HOSTS=[array of riak hostnames, generated by chef query]
[2012-07-25 18:29:57 -0400] yfeldblum: freerobby, ah, right, what i do is i describe services with data bag items too, so i might have a service data-bag-item like {"id": "some-riak-cluster", "type": "riak-cluster", other important attributes ... }
[2012-07-25 18:31:54 -0400] yfeldblum: freerobby, and the app data-bag-item might have a config key like {"RIAK_URL": {"item": "some-riak-cluster"}}
[2012-07-25 18:32:14 -0400] yfeldblum: miah, howdy
[2012-07-25 18:34:30 -0400] benblack: queries are the devil.
[2012-07-25 18:35:22 -0400] yfeldblum: benblack, what shall we do instead?
[2012-07-25 18:35:28 -0400] benblack: put it all in git.
[2012-07-25 18:36:13 -0400] yfeldblum: benblack, 10,000 nodes in git?
[2012-07-25 18:36:22 -0400] benblack: why not?
[2012-07-25 18:36:38 -0400] yfeldblum: benblack, that's one fine approach among many
[2012-07-25 18:36:58 -0400] benblack: it has the advantage of being predictable and consistent.
[2012-07-25 18:37:38 -0400] benblack: versus the version in one git repo, the version in the clone of that repo on the chef server, the version in chef-server, and the version in the chef-client cache.
[2012-07-25 18:38:29 -0400] benblack: then add queries and you have the question of the exact state of the system at the time the query ran, of which there is often no record.
[2012-07-25 18:38:49 -0400] yfeldblum: benblack, those are indeed advantages
[2012-07-25 18:41:33 -0400] mhalligan: has anyone ever seen 401 Unauthorized (Please synchronize the clock) when your clock is perfectly in time?
[2012-07-25 18:43:05 -0400] jessicab: mhalligan: perhaps the servers time is off?
[2012-07-25 18:43:24 -0400] mhalligan: hosted chef, I'd hope they were good at that
[2012-07-25 18:43:42 -0400] jessicab: heh yea, youd have to be on oss for that to be the issue
[2012-07-25 18:45:22 -0400] Mithrandir: mhalligan: correct tz too?
[2012-07-25 18:45:44 -0400] mhalligan:  mithrandir: I thought about that, tried both UTC and PDT .. but really I'm not quite sure how one can have a "correct" time zone.
[2012-07-25 18:52:09 -0400] cwj: i thought the clock message was present in any 401 error, but maybe i'm mistaken
[2012-07-25 18:52:27 -0400] mhalligan: why would that be present?
[2012-07-25 18:52:41 -0400] mhalligan: standard http thing?
[2012-07-25 18:52:43 -0400] mattray: http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-401Unauthorized%28Pleasesynchronizetheclock%29
[2012-07-25 18:59:53 -0400] UForgotten: ok I'm struggling with something... I want to build a custom recipe that I can call to create users from any cookbook.  TMTOWTDI is one issue, and getting it to work is another.  I decieded to try making a cookbook with an LWRP in it, but it just doesn't work.  another suggestion I saw was to write it as a library or definition, but I feel like that will have the same problem.
[2012-07-25 19:00:19 -0400] UForgotten: (mainly cos I'm a ruby/chef noob lol)
[2012-07-25 19:01:11 -0400] UForgotten: so what I'm asking is, what's the "preferred" way to be able to call a procedure from multiple cookbooks.  LWRP seems like the logical choice, but it seems like it has a lot of overhead getting the data in.
[2012-07-25 19:07:17 -0400] cwj: UForgotten: take a look at definitiosn
[2012-07-25 19:07:20 -0400] cwj: definitions even
[2012-07-25 19:09:12 -0400] mhalligan: mattray: yeah, I read that, my clock is fine. :/
[2012-07-25 19:09:37 -0400] UForgotten: cwj: I thought definitions were discouraged though?
[2012-07-25 19:12:32 -0400] jessicab: mhalligan: have you tried something like 'ntpdate pool.ntp.org' to make sure it isnt an issue with the time zone?
[2012-07-25 19:24:00 -0400] nickpresta: Has anyone got the nginx recipe working on CentOS? Even after applying https://github.com/opscode-cookbooks/nginx/pull/13 and https://github.com/opscode-cookbooks/nginx/pull/14, it still doesn't work.
[2012-07-25 19:24:54 -0400] chip-: Having an issue with chef-solo puking on this role file: https://gist.github.com/3178033
[2012-07-25 19:25:18 -0400] chip-:   "name": "base",
[2012-07-25 19:25:30 -0400] chip-: grah.
[2012-07-25 19:25:35 -0400] chip-: "/tmp/vagrant-chef-1/chef-solo-2/roles/base.rb:2: odd number list for Hash "name": "base","
[2012-07-25 19:47:40 -0400] tolland: how do i set an attribute from knife command line
[2012-07-25 19:48:18 -0400] tolland: ie is there a one-liner, rather than using the editor?
[2012-07-25 20:07:53 -0400] yfeldblum: tolland, not that i'm aware of, but there's nothing stopping you from writing a really simple knife plugin that can do it
[2012-07-25 20:08:00 -0400] anthroprose: anyone have a hack or new plugin for knife that will allow bootstrapping ec2 instances with userdata instead of ssh?
[2012-07-25 20:08:24 -0400] anthroprose: I'm tired of attaching eips to vpc instances to shoehorn chef into the stack
[2012-07-25 20:10:37 -0400] mattray: anthroprose: I thought there were vpc patches somewhere
[2012-07-25 20:10:44 -0400] mattray: ssd7_: ^^ know anything?
[2012-07-25 20:10:54 -0400] anthroprose: aha.. thats why I asked
[2012-07-25 20:14:20 -0400] anthroprose: mattray: happen to know of a url? My googlefoo fails me, only decent hit I got was chatlogs from here last time I asked :)
[2012-07-25 20:15:57 -0400] mattray: anthroprose: https://github.com/opscode/knife-ec2/pulls and http://tickets.opscode.com/browse/KNIFE_EC2 are where I'd start
[2012-07-25 20:16:22 -0400] mattray: I know ssd7_ has been working on a bunch of updates recently
[2012-07-25 20:16:57 -0400] anthroprose: hrmf.... I'm blind... even looked at the pull page.. thanks for the ticketlist as well
[2012-07-25 20:20:47 -0400] gondoi: mattray: hey i have an incoming patch for the omnibus install.sh script that will randomly pick cloud files or s3 to dl from, or you can specify.. can I just do a pull request in github, or does it need to be a jira ticket?
[2012-07-25 20:21:59 -0400] mattray: gondoi: a Jira ticket is preferred, since that's how they get tracked by us. So if you don't open one, eventually we will. Opening one yourself reduces the lag time
[2012-07-25 20:22:40 -0400] gondoi: okay, i'll get one started still have some loose ends to tie up (copying files and dns), but the basic code is there
[2012-07-25 20:22:57 -0400] gondoi: here is basically what I'm adding.. dns will be diff
[2012-07-25 20:23:08 -0400] gondoi: https://gist.github.com/3177298
[2012-07-25 20:53:46 -0400] benblack: is anyone else running chef on GCE and have you seen an issue where node[:ipaddress] is null even though the default interface has an ip address?
[2012-07-25 20:54:30 -0400] ssd7_: mattray: I don't /think/ I've seen a patch like that
[2012-07-25 20:54:49 -0400] ssd7_: I am cutting a release ASAP so if I missed it in triage, someone should ping me
[2012-07-25 20:55:00 -0400] ssd7_: anthroprose: ^
[2012-07-25 20:55:46 -0400] masterkorp: http://pastie.org/4332412
[2012-07-25 20:55:51 -0400] masterkorp: guys any idea ?
[2012-07-25 20:56:12 -0400] ssd7_: We had one VPC related patch regarding creating an SSH tunnel, but it didn't make it past triage
[2012-07-25 20:56:13 -0400] masterkorp: "NoMethodError: undefined method `default' for Chef::Resource::Template"
[2012-07-25 20:56:27 -0400] anthroprose: ssd: current pull request for an simple ssh bounce...
[2012-07-25 20:56:28 -0400] masterkorp: i see no typo there
[2012-07-25 20:57:01 -0400] anthroprose: https://github.com/opscode/knife-ec2/pull/53
[2012-07-25 20:57:16 -0400] mhalligan: jesiscab: Yep, I'm just writing this off as a problem on opscode's side. ntp had no drift and it eventually started working without any action taken on my part
[2012-07-25 20:57:21 -0400] anthroprose: I have interest in https://github.com/opscode/knife-ec2/pull/49 as I am currently doing all this crap by hand and then bootstrapping....
[2012-07-25 20:57:30 -0400] anthroprose: I may recode the idea just to get past legal stuff
[2012-07-25 20:57:32 -0400] anthroprose: if its hung
[2012-07-25 20:57:42 -0400] ssd7_: anthroprose: Yeah, check the comment here re pull 53: http://tickets.opscode.com/browse/KNIFE_EC2-69
[2012-07-25 20:57:51 -0400] masterkorp: i hate to be annoying, but can anyone help me ?
[2012-07-25 20:57:52 -0400] mhalligan: guessing I was being routed to a server whose time was off
[2012-07-25 20:58:01 -0400] anthroprose: ahh I see that
[2012-07-25 20:58:13 -0400] anthroprose: maybe I can devote some time to these as I am facing similar issues
[2012-07-25 20:58:28 -0400] ssd7_: re 49, btm started a thread on the mailing list regarding that
[2012-07-25 20:58:53 -0400] anthroprose: doing the ssh bounce is more secure, but massive overhead if you have a large shard structure thats all independent
[2012-07-25 20:59:02 -0400] anthroprose: temp attaching eips is not sustainable in the long run...
[2012-07-25 20:59:54 -0400] ssd7_: Essentially there are two issues with pull 49 (KNIFE_EC2-67): (1) Chef should be able to do that more easily inside the chef client run and (2) we are hesitant to add more and more features of fog that aren't Chef specific as they are hard to maintain and test well.
[2012-07-25 21:00:42 -0400] anthroprose: agreed on the fog, no need to cross featuresets...
[2012-07-25 21:01:17 -0400] anthroprose: but I dont understand #1? the entire point is to do all this so you can even run the chef client?
[2012-07-25 21:01:17 -0400] ssd7_: I have a few ideas about how we might solve (2) by making it easier to have access to fog features without having to have yet another option for them, but I would have to flesh that out more before I know if it is viable.
[2012-07-25 21:01:25 -0400] masterkorp: is the cwd on the bash block mandatory ?
[2012-07-25 21:01:53 -0400] hoover_damm: you prefer to put the cd in your command?
[2012-07-25 21:01:55 -0400] ssd7_: anthroprose: Right,  I get that is your use case for getting the elastic IP so (1) probably doesn't apply to you
[2012-07-25 21:02:08 -0400] masterkorp: hoover_damm: its not really necessary
[2012-07-25 21:02:11 -0400] anthroprose: ah, gotcha..
[2012-07-25 21:02:27 -0400] hoover_damm: masterkorp, your cwd is / otherwise or wherever you start chef-client
[2012-07-25 21:02:44 -0400] hoover_damm: masterkorp, so without setting cwd you should assume your location could be anywhere
[2012-07-25 21:02:57 -0400] ssd7_: I don't think the triage group would be completely opposed to the ssh bounce if the concerns in the ticket were addressed well
[2012-07-25 21:03:20 -0400] anthroprose: so the best practices is essentially run your knife clients inside the network?
[2012-07-25 21:03:33 -0400] masterkorp: hoover_damm: http://pastie.org/4332412
[2012-07-25 21:03:43 -0400] masterkorp: hoover_damm: i use the fullpaths so
[2012-07-25 21:03:55 -0400] anthroprose: Why can't I rule the world from my laptop?!
[2012-07-25 21:04:26 -0400] hoover_damm: masterkorp, that works appropriately then
[2012-07-25 21:04:43 -0400] hoover_damm: or should
[2012-07-25 21:04:50 -0400] masterkorp: do you have any idea what's causing that errro ?
[2012-07-25 21:04:58 -0400] hoover_damm: what's line 43?
[2012-07-25 21:06:19 -0400] hoover_damm: /var/chef/cache/cookbooks/celtics-forum/recipes/default.rb:43
[2012-07-25 21:06:29 -0400] ssd7_: anthroprose: :)  Like I said, new features are mostly about maintainability.  Lots of people use knife-ec2 so we want to be careful about extensive changes like the one in pull request 53.  If you or the original author have time to address the concerns, it will definitely get looked at in code review
[2012-07-25 21:07:05 -0400] masterkorp:  43     :server_name =>  default['smf']['server_name'],
[2012-07-25 21:07:10 -0400] masterkorp: extra space
[2012-07-25 21:08:15 -0400] hoover_damm: haha
[2012-07-25 21:08:23 -0400] hoover_damm: doh
[2012-07-25 21:09:33 -0400] anthroprose: ssd: Ohh totally... I just wanted to make sure that that was the appropriate thing to do (cleanup/rewrite the existing idea that was proposed)
[2012-07-25 21:10:07 -0400] anthroprose: i.e. the idea was a sound concept in the overall design/concept going forward
[2012-07-25 21:11:22 -0400] ssd7_: anthroprose: You might want to ping the original author as well, just in case he is working on it already
[2012-07-25 21:21:29 -0400] tubbo: hi guys, having a strange error here... [2012-07-25T21:20:56+00:00] FATAL: Chef::Exceptions::Package: package[git] (system::default line 9) had an error: Chef::Exceptions::Package: git has no candidate in the apt-cache
[2012-07-25 21:21:53 -0400] tubbo: i bootstrapped the server and all of the envs/roles are identical to a box i previously spun up that didn't have this problem
[2012-07-25 21:26:22 -0400] benblack:         "routes": [
[2012-07-25 21:26:23 -0400] benblack:           {
[2012-07-25 21:26:23 -0400] benblack:             "destination": "default",
[2012-07-25 21:26:23 -0400] benblack:             "family": "inet",
[2012-07-25 21:26:23 -0400] benblack:             "via": "10.240.0.1",
[2012-07-25 21:26:24 -0400] benblack:             "metric": "100"
[2012-07-25 21:26:24 -0400] benblack:           },
[2012-07-25 21:26:35 -0400] benblack: conspicuous lack of :src attribute
[2012-07-25 21:26:58 -0400] benblack: anyone running ubuntu 12.04 with ohai 6.14.0?
[2012-07-25 21:27:48 -0400] cwj: tubbo: if you include the apt recipe earlier in your run list it will ensure that an apt-get update has happened
[2012-07-25 21:27:55 -0400] cwj: tubbo: might fix your problem there
[2012-07-25 21:28:38 -0400] benblack: yeah, this is a bug in ohai on 12.04
[2012-07-25 21:28:41 -0400] cwj: i am scratching my head at a templating issue, has anyone seen erubis/chef add dangling quotes to template output?
[2012-07-25 21:28:57 -0400] cwj: https://github.com/sensu/sensu-chef/blob/master/templates/default/rabbitmq.config.erb is the template
[2012-07-25 21:29:27 -0400] cwj: node.sensu.rabbitmq.port is a "Fixnum" with value 5671
[2012-07-25 21:29:29 -0400] cwj: but i get 5671' in the resulting file, instead of 5671
[2012-07-25 21:40:04 -0400] heydrick1: is there an easy way to clone all the repos under https://github.com/opscode-cookbooks?
[2012-07-25 21:45:23 -0400] yfeldblum: heydrick1, why would you want to do that?
[2012-07-25 21:45:54 -0400] heydrick1: yfeldblum: to have them local for reference
[2012-07-25 21:46:33 -0400] yfeldblum: heydrick1, i'd recommend downloading a web browser ...
[2012-07-25 21:46:51 -0400] Majost: So I am trying to auto-generate a password with secure_password; however I am having trouble getting it to work as expected.
[2012-07-25 21:47:31 -0400] yfeldblum: cwj, in the recipe: Chef::Log.info("\n#{JSON.pretty_generate(node.sensu.to_hash)}")
[2012-07-25 21:47:42 -0400] yfeldblum: Majost, what is `secure_password`?
[2012-07-25 21:47:49 -0400] Majost: i've tried adding this line: "::Chef::Node.send(:include, Opscode::OpenSSL::Password)" to the attributes file and the recipe... but the result is: "FATAL: Chef::Mixin::Template::TemplateError: undefined method `[]' for nil:NilClass"
[2012-07-25 21:48:28 -0400] Majost: yfeldblum: https://github.com/opscode-cookbooks/openssl/blob/master/libraries/secure_password.rb
[2012-07-25 21:50:07 -0400] yfeldblum: Majost, ew ... what about using this? SecureRandom.hex(16).to_i(16).to_s(36)
[2012-07-25 21:51:23 -0400] yfeldblum: Majost, or this? SecureRandom.base64(16).gsub(/\=/, '')
[2012-07-25 21:51:29 -0400] Majost: yfeldblum: Does that require ruby 1.9.x?
[2012-07-25 21:52:43 -0400] yfeldblum: Majost, 1.8.7 has it too
[2012-07-25 21:53:23 -0400] yfeldblum: Majost, rvm 1.8.7 exec ruby -e 'require "securerandom"; puts SecureRandom.base64(16).gsub(/\=/, "")'
[2012-07-25 21:53:31 -0400] benblack: ipaddress setting in find_ip_and_mac() in network.rb is a mess and buggy.
[2012-07-25 21:53:38 -0400] benblack: that is all.
[2012-07-25 21:53:54 -0400] yfeldblum: benblack, they could definitely use your help!
[2012-07-25 21:54:48 -0400] yfeldblum: Majost, it will use /dev/urandom or openssl's prng, not sure which it tries first
[2012-07-25 21:54:56 -0400] benblack: well, remove the conditionals
[2012-07-25 21:55:03 -0400] benblack: and just ip = addr
[2012-07-25 21:55:16 -0400] benblack: and it will probably work more reliably than it does now
[2012-07-25 21:58:25 -0400] yfeldblum: benblack, jfyi opscode uses their own JIRA at tickets.opscode.com & people talk hacking on chef at #chef-hacking on irc
[2012-07-25 21:59:45 -0400] benblack: is that so
[2012-07-25 22:00:53 -0400] benblack: i always forget how much we like our cliques
[2012-07-25 22:04:11 -0400] yfeldblum: benblack, unless you just wanted to vent in here about ohai's network code? which is perfectly fine too
[2012-07-25 22:05:34 -0400] yfeldblum: it's always useful to send your database write operation to the shard that has the table you want to write to
[2012-07-25 22:05:39 -0400] benblack: that would be ironic
[2012-07-25 22:06:58 -0400] hoover_damm: benblack, open a ticket and submit some code
[2012-07-25 22:07:13 -0400] hoover_damm: it's unfortunate that time is always the problem
[2012-07-25 22:07:38 -0400] benblack: i did
[2012-07-25 22:07:42 -0400] benblack: somebody broke it, obviously
[2012-07-25 22:08:28 -0400] benblack: instead, i will fix it locally
[2012-07-25 22:08:34 -0400] benblack: someone else will run into it soon enough
[2012-07-25 22:51:57 -0400] PRK_nz: Hey, can you have sub directories in templates/default? e.g. templates/default/file_name and templates/default/some_sub_dir/file_name
[2012-07-25 22:57:54 -0400] bhenerey: anyone using https://github.com/cookbooks/hw-chef-graphiti on Ubuntu 12.04? I'm having this trouble: https://gist.github.com/3179225
[2012-07-25 23:27:09 -0400] flaccid_: bhenerey: STDERR: sh: 1: bundle: not found pretty clear in the paste..
[2012-07-25 23:30:52 -0400] bhenerey: yeah, but gem_package "bundler" in the recipe
[2012-07-25 23:32:59 -0400] flaccid_: if you need it in the actual chef run, you'll need to use chef_gem "bundler"

[2012-07-22 00:08:26 -0400] jtimberman: ssd7: ohai!
[2012-07-22 02:37:32 -0400] cap10morgan: has anyone using the application_ruby cookbook run into this runit error: unable to open supervise/ok: access denied ?
[2012-07-22 02:40:43 -0400] cap10morgan: ah, it's executing that as the app's owner
[2012-07-22 02:42:01 -0400] hoover_damm: that would do it
[2012-07-22 02:43:25 -0400] digitallogic: I'm having an issue using knife bootstrap with ubuntu12.04-gems.erb if anyone is familiar
[2012-07-22 02:43:43 -0400] digitallogic: it looks like the gem is installing chef-client to /usr/local/bin
[2012-07-22 02:44:02 -0400] digitallogic: and the bootstrap is expecting /usr/bin/chef-client
[2012-07-22 02:44:12 -0400] digitallogic: https://gist.github.com/3158017
[2012-07-22 02:45:33 -0400] cap10morgan: looks like the unicorn provider in application_ruby doesn't set the owner or group of the runit_service. seems like it should, no?
[2012-07-22 02:48:29 -0400] hoover_damm: digitallogic, that's a configuration option now
[2012-07-22 02:48:35 -0400] hoover_damm: on where to specify the binary
[2012-07-22 02:48:55 -0400] hoover_damm: digitallogic, at least on 0.10.10 and higher, 0.10.8 totally dump you on /usr/bin
[2012-07-22 02:49:29 -0400] hoover_damm: basically upgrade your chef gem and it might work
[2012-07-22 02:51:59 -0400] digitallogic: hoover_damm: the gem on my local machine where I'm running "knife bootstrap"?
[2012-07-22 03:02:09 -0400] hoover_damm: digitallogic, yep
[2012-07-22 03:02:22 -0400] hoover_damm: you can specify the version in the bootstrap as well
[2012-07-22 03:03:26 -0400] hoover_damm: --bootstrap-version 0.10.12
[2012-07-22 03:03:56 -0400] cap10morgan: hmm, setting the owner and group on the runit_service doesn't help. I guess only root can hup a runit service?
[2012-07-22 03:04:06 -0400] hoover_damm: cap10morgan, correct
[2012-07-22 03:04:07 -0400] digitallogic: hoover_damm: thanks, I'm trying to install 0.10.12 on the target machine before messing with upgrading the gem
[2012-07-22 03:04:18 -0400] cap10morgan: Seems like the unicorn provider in application_ruby is not well tested. Or I'm missing something.
[2012-07-22 03:04:49 -0400] hoover_damm: digitallogic, seems backwards
[2012-07-22 03:05:01 -0400] hoover_damm: but your choice
[2012-07-22 03:12:35 -0400] digitallogic: hoover_damm: thanks I don't think I was grokking the issue properly
[2012-07-22 03:13:59 -0400] hoover_damm: digitallogic, the issue is that rubygems should install gems in /usr/local/bin but has been installing them in /usr/bin for years
[2012-07-22 03:14:05 -0400] hoover_damm: digitallogic, so we all expect it there
[2012-07-22 03:14:21 -0400] hoover_damm: digitallogic, fhs says it should be elsewhere... so debian/ubuntu has always tried to do the right thing
[2012-07-22 03:14:58 -0400] hoover_damm: digitallogic, it was statically set to /usr/bin/chef-client until 0.10.10 made it a which chef-client to run it
[2012-07-22 03:15:07 -0400] hoover_damm: which was less failure prone
[2012-07-22 03:16:18 -0400] hoover_damm: hrm i thought it was which
[2012-07-22 03:16:21 -0400] hoover_damm: ohwell
[2012-07-22 03:16:38 -0400] hoover_damm: it's config[:chef_client_path] anyway
[2012-07-22 03:17:00 -0400] hoover_damm: knife[:chef_client_path]="/usr/local/bin/chef-client"
[2012-07-22 03:17:28 -0400] digitallogic: and in order to specify that location to the node I'm bootstraping, I'd need the newer gem where I"m running the bootstrap command?
[2012-07-22 03:18:59 -0400] hoover_damm: nah that ends up in .chef/knife.rb
[2012-07-22 03:19:53 -0400] digitallogic: ah ok
[2012-07-22 03:20:13 -0400] digitallogic: is it advisable to point that /usr/local/bin or /usr/bin?
[2012-07-22 03:21:08 -0400] digitallogic: I'm wondering since I have a few older ubuntu servers that are set up for /usr/bin/chef-client
[2012-07-22 03:21:16 -0400] digitallogic: if I should keep it consistent
[2012-07-22 03:22:09 -0400] hoover_damm: if you want consistency you should use omnibus
[2012-07-22 03:22:14 -0400] hoover_damm: and avoid the whole ruby issue completely
[2012-07-22 03:22:32 -0400] hoover_damm: with chef-full template
[2012-07-22 03:23:38 -0400] digitallogic: hoover_damm: thanks, I think I'll give that a shot
[2012-07-22 03:24:24 -0400] hoover_damm: digitallogic, yep it puts a the whole omnibus suite in /opt/opscode and the bootstrap makes everything work
[2012-07-22 03:24:27 -0400] hoover_damm: :)
[2012-07-22 03:25:03 -0400] digitallogic: "everything works" sounds exactly like what I'm looking for :)
[2012-07-22 03:25:15 -0400] digitallogic: thanks hoover_damm
[2012-07-22 03:27:02 -0400] hoover_damm: good luck
[2012-07-22 03:56:05 -0400] cap10morgan: ok, that's fixed: https://github.com/opscode-cookbooks/application_ruby/pull/9
[2012-07-22 07:51:18 -0400] seelenfresser: hey anyone knows how to make expander.log not be empty? :)
[2012-07-22 09:51:15 -0400] kesor: how do I force languages['ruby']['gem_bin'] to be the newly installed bin/gem after ruby is installed on the system from a cookbook? problem is the cookbooks following the ruby one still have vagrant_ruby/bin/gem as their gem binary.
[2012-07-22 09:53:25 -0400] kesor: http://stackoverflow.com/questions/11314523/chef-ohai-how-to-use-newly-installed-ruby-with-gem-package
[2012-07-22 10:49:28 -0400] lflux: How do I update a cookbook i've installed with "cookbook site install" with a newer version from github?
[2012-07-22 10:49:40 -0400] lflux: the python cookbook is out of date and I need to update it...
[2012-07-22 11:19:15 -0400] lflux: (I just rm'd it and added a submodule)
[2012-07-22 16:39:02 -0400] Bonkers: do packages implicitly define services? why does this not cause an error for non-existing service[mongodb] as the first line of a recipe: package "mongodb" do notifies :stop, 'service[mongodb]', :immediately end
[2012-07-22 16:40:07 -0400] Bonkers: does existance of /etc/init.d/foo implicitly define a service?
[2012-07-22 16:51:08 -0400] cheeseplus: Bonkers: that is what the default provider looks at (/etc/init.d/foo)
[2012-07-22 16:51:13 -0400] cheeseplus: http://wiki.opscode.com/display/chef/Resources#Resources-Service
[2012-07-22 16:51:27 -0400] Bonkers: ya, but doesn't implicitly define a service
[2012-07-22 16:51:35 -0400] Bonkers: I think I'm confused how these files are evaluated in multiple passes
[2012-07-22 16:52:04 -0400] Bonkers: looks like you can define a service below a notifies :immediately
[2012-07-22 16:52:21 -0400] Bonkers: which is a bit counterintuitive

[2012-07-12 00:02:59 -0400] miah: yes
[2012-07-12 00:03:03 -0400] miah: that is correct
[2012-07-12 00:03:36 -0400] miah: cakehero: https://github.com/miah/percona-install/blob/master/recipes/default.rb#L60
[2012-07-12 00:03:47 -0400] cakehero: awesome
[2012-07-12 00:04:01 -0400] cakehero: cool and I should specify Dpkg provider for Ubuntu I presume?
[2012-07-12 00:04:26 -0400] miah: yup =)
[2012-07-12 00:05:57 -0400] cakehero: I'm there
[2012-07-12 00:05:58 -0400] cakehero: oops
[2012-07-12 00:29:54 -0400] hoover_damm: patcon, there really isn't a way to fix the debian package of jenkins
[2012-07-12 00:30:19 -0400] hoover_damm: patcon, if you understood the nuances of debian packaging it might make more sense
[2012-07-12 00:30:39 -0400] hoover_damm: patcon, most package management systems (even gentoo) have some kind of /etc management.
[2012-07-12 00:30:59 -0400] hoover_damm: patcon, once you change those files and you upgrade or downgrade or reinstall that package manager usually wants to know 'can i update this config file?'
[2012-07-12 00:31:19 -0400] hoover_damm: patcon, basically noninteractive mode should say 'ignore this bit and just work' ... debian fails instead
[2012-07-12 00:31:36 -0400] hoover_damm: patcon, ucf purge is just a work around to the system
[2012-07-12 00:31:44 -0400] hoover_damm: patcon, just like how when you install mysql in debian it starts it up by default
[2012-07-12 00:31:54 -0400] hoover_damm: patcon, it's the policies of debian/ubuntu that make it so
[2012-07-12 00:32:20 -0400] patcon: hoover_damm: for reals? hm. ok. really appreciate the explanation though
[2012-07-12 00:32:29 -0400] patcon: hoover_damm: aaaand you can. little link at the bottom :)
[2012-07-12 00:32:41 -0400] hoover_damm: patcon, it's not there
[2012-07-12 00:32:50 -0400] hoover_damm: patcon, I was the originator of the pull request
[2012-07-12 00:32:56 -0400] hoover_damm: can't unsubscribe from your own pull
[2012-07-12 00:32:59 -0400] patcon: ah shit. lame
[2012-07-12 00:33:45 -0400] hoover_damm: honestly it is, I did that cookbook for a client and I converted it to a war for a client and I did the pull request for fujin
[2012-07-12 00:33:54 -0400] hoover_damm: I really don't use jenkins at all and don't like it for CI
[2012-07-12 00:34:09 -0400] hoover_damm: I got stuck with enough hand rolled CI that Jenkins is 'weird' to me...
[2012-07-12 00:34:19 -0400] hoover_damm: i'm sure it's weird the other way around too ;)
[2012-07-12 00:35:56 -0400] patcon: haha fair enough :)
[2012-07-12 00:38:03 -0400] patcon: hoover_damm: that PR is totally cluttered, i was thinking about adding an install_method attr, so maybe I'll just fetch your commit and submit a new one so I can close that down for you haha
[2012-07-12 00:38:28 -0400] patcon: but anyhow, another day. have a good night dude
[2012-07-12 00:38:34 -0400] hoover_damm: patcon, honestly I really don't care.  with 0.10.8 we ran chef-client supposidly twice
[2012-07-12 00:38:37 -0400] hoover_damm: and it happened
[2012-07-12 00:38:49 -0400] hoover_damm: it may be resolved by now but it may not
[2012-07-12 00:38:57 -0400] hoover_damm: but the pattern it layed out will blowup occasionally
[2012-07-12 00:39:05 -0400] hoover_damm: and there isn't a easy way around it
[2012-07-12 00:39:38 -0400] hoover_damm: when your package manager asks can I add this tex to here and it fails because your not in interactive mode
[2012-07-12 00:39:45 -0400] hoover_damm: it kinda feels more like it's on the distro end
[2012-07-12 00:39:47 -0400] hoover_damm: then anywhere else
[2012-07-12 00:40:11 -0400] patcon: true that
[2012-07-12 00:40:52 -0400] hoover_damm: and really that is the truth
[2012-07-12 00:40:59 -0400] hoover_damm: Apt is really fun to automate
[2012-07-12 00:41:03 -0400] hoover_damm: a lot harder then it should be sometimes
[2012-07-12 01:14:31 -0400] flaccid_: whats the right way to ensure git is installed? the application cookbooks don't seem to take care of that. possible bug?
[2012-07-12 01:16:08 -0400] flaccid_: i guess i should add in https://github.com/opscode-cookbooks/git
[2012-07-12 01:16:37 -0400] Majost: yep
[2012-07-12 01:16:39 -0400] hoover_damm: flaccid_, depends
[2012-07-12 01:16:54 -0400] hoover_damm: flaccid_, deploy resource can work on svn or git... so the answer is it should depend on both svn and git
[2012-07-12 01:16:59 -0400] hoover_damm: i think
[2012-07-12 01:17:39 -0400] Majost: when writing a metadata.rb --- how does one correctly define multiple 'depends'? Each as a separate line, some other way?
[2012-07-12 01:18:02 -0400] flaccid_: hoover_damm: well application/providers/default.rb line 122 calls git ls-remote but i don't see any git dep to have it install
[2012-07-12 01:19:36 -0400] hoover_damm: Majost, usually you see %w{foo bar}.each do |cb|
[2012-07-12 01:19:39 -0400] hoover_damm: dep cb
[2012-07-12 01:19:39 -0400] hoover_damm: end
[2012-07-12 01:20:15 -0400] hoover_damm: i've seen people do depends "bob", "bill", "blue"
[2012-07-12 01:20:18 -0400] hoover_damm: but i dunno if that works
[2012-07-12 01:29:09 -0400] mhalligan: any suggestions for debugging an error which says "FATAL: Net::HTTPServerException: 403 "Forbidden"" ?
[2012-07-12 01:29:26 -0400] mhalligan: the stacktrace isn't giving me much of an idea as to what the client can't talk to and when it can't talk to it
[2012-07-12 01:29:56 -0400] hoover_damm: need more data then that
[2012-07-12 01:30:02 -0400] mhalligan: yep I agree
[2012-07-12 01:30:07 -0400] hoover_damm: chef-client -l debug
[2012-07-12 01:30:13 -0400] hoover_damm: the error messages usually are pretty good
[2012-07-12 01:30:47 -0400] mhalligan: oh hrm I was only in info. maybe that.s why.
[2012-07-12 01:31:10 -0400] hoover_damm: hopefully
[2012-07-12 01:34:00 -0400] mhalligan: interesting, so it's failing at the end of the run when it tries to upload state back to hosted-chef
[2012-07-12 01:35:44 -0400] flaccid_: pretty sure [Thu, 12 Jul 2012 01:28:25 +0000] INFO: Application light-weight resource already initialized -- overriding! is a bug with application cookbook. it occurs without even using it
[2012-07-12 01:38:20 -0400] flaccid_: also i dunno if i am pebkacing here but using this application lwrp doesn't seem to setup a vhost for the app
[2012-07-12 01:45:19 -0400] jperry2: any reason why an update to the environment a node belongs to would say "node not updates, skipping node save"?
[2012-07-12 01:45:26 -0400] jperry2: I'm doing this with the "-E" option
[2012-07-12 01:45:49 -0400] jperry2: knife node edit <node-name> -E qa
[2012-07-12 02:16:01 -0400] flaccid_: anyone around that uses application_php? i can't work how to setup the apache vhost
[2012-07-12 02:17:38 -0400] flaccid_: hmm guess i need to use the web_app resource on top or somethin
[2012-07-12 02:31:01 -0400] b636bc7ca: What should chef.recipe_url be if I want to install stuff from https://github.com/opscode-cookbooks?
[2012-07-12 02:35:31 -0400] mattray: anyone have any ideas how to get searches to treat the fields as integers rather than strings?
[2012-07-12 02:35:50 -0400] mattray: ie. knife search node 'uptime_seconds:[0 TO 600]' -a uptime_seconds
[2012-07-12 02:36:03 -0400] mattray: that returns 111784 as a valid entry
[2012-07-12 02:58:52 -0400] mattray: looks like it has to be done in Ruby in a recipe
[2012-07-12 03:03:33 -0400] yfeldblum: mattray, problem with solr?
[2012-07-12 03:03:56 -0400] mattray: no, I just wish the fields were treated as ints, they're all stored as strings
[2012-07-12 03:04:22 -0400] mattray: so range queries are kinda wrong
[2012-07-12 03:04:35 -0400] yfeldblum: mattray, does lucene not have support for numbers?
[2012-07-12 03:04:48 -0400] mattray: oh it does, but chef jams everything in there as strings
[2012-07-12 03:05:13 -0400] mattray: when you get your search results back in a recipe you can use ruby to .toi them
[2012-07-12 03:05:17 -0400] yfeldblum: mattray, can that be changed?
[2012-07-12 03:05:35 -0400] mattray: I'm giving up my efforts
[2012-07-12 03:05:53 -0400] mattray: inside a recipe works, or even in knife exec
[2012-07-12 03:05:56 -0400] mattray: just not knife search
[2012-07-12 03:06:26 -0400] mattray: because afaict you can't tell solr to cast values before applying the search
[2012-07-12 03:06:53 -0400] mattray: you post-process with ruby
[2012-07-12 03:07:36 -0400] mattray: doing it in knife exec was way faster than the 45 minutes I spent trying to understand how to tell Solr to do what I want
[2012-07-12 03:08:58 -0400] yfeldblum: mattray, can chef be changed to index numbers as numbers?
[2012-07-12 03:09:14 -0400] mattray: probably
[2012-07-12 03:09:25 -0400] mattray: I don't know how chef-solr works
[2012-07-12 03:09:38 -0400] mattray: but I'd guess that would be the way to do it
[2012-07-12 03:36:17 -0400] Bonkers: why is there both a metadata.rb and metadata.json for some cookbooks?
[2012-07-12 03:37:45 -0400] yfeldblum: Bonkers, knife 0.9, when it would compile the metadata.rb, would also save the compiled result to disk as metadata.json
[2012-07-12 03:38:00 -0400] yfeldblum: Bonkers, knife 0.10 and knife 10 no longer do that
[2012-07-12 03:38:11 -0400] Bonkers: do they get used if they're there? should I just remove them?
[2012-07-12 03:39:39 -0400] yfeldblum: Bonkers, you can probably remove them
[2012-07-12 03:39:51 -0400] yfeldblum: Bonkers, the .json, that is
[2012-07-12 03:39:54 -0400] Bonkers: ok, thanks, yep
[2012-07-12 03:40:25 -0400] Bonkers: is there any way to draw a dep tree? something is depending on runit and I can't figure out what, I thought it might have been the metadata.json files, but apparently not
[2012-07-12 03:41:20 -0400] erikh: ack "depends 'runit'" cookbooks
[2012-07-12 03:41:22 -0400] erikh: :P
[2012-07-12 03:41:47 -0400] erikh: actually that won't be entirely the case
[2012-07-12 03:42:03 -0400] erikh: %w[runit].each { |x| depends x } and so forth
[2012-07-12 03:42:18 -0400] erikh: I'm not sure I have a good answer for you other than acking/grepping for runit in the metadata.rb's
[2012-07-12 03:42:46 -0400] Bonkers: I went through all results for runit and don't see any more direct or indirect depends
[2012-07-12 03:42:53 -0400] erikh: hrm
[2012-07-12 03:42:58 -0400] Bonkers: unless depends 'r' + 'unit' is in there somewhere
[2012-07-12 03:43:02 -0400] erikh: heh.
[2012-07-12 03:43:09 -0400] erikh: well, you could try searching for include_recipe I guess
[2012-07-12 03:43:21 -0400] erikh: but that *shouldn't* be there without a depends statement.
[2012-07-12 03:43:42 -0400] erikh: providers would just not work, and that's how runit is typically hooked in
[2012-07-12 03:43:43 -0400] Bonkers: aha, I don't have all cookbooks locally
[2012-07-12 03:43:47 -0400] Bonkers: it's git
[2012-07-12 03:43:49 -0400] erikh: aha
[2012-07-12 03:43:55 -0400] Bonkers: I deleted the cookbook and looked at the error
[2012-07-12 03:44:50 -0400] erikh: need to head to another machine, ta
[2012-07-12 03:47:11 -0400] jtimberman: yeah, sorry about that
[2012-07-12 03:47:32 -0400] jtimberman: Bonkers: our 'git' cookbook will let you set up a git server, and we use runit normally
[2012-07-12 03:47:45 -0400] Bonkers: ya, I figured
[2012-07-12 03:47:55 -0400] Bonkers: not something I care about terribly, just figured I'd trim unused stuff if I don't use it
[2012-07-12 03:48:39 -0400] Bonkers: the more painful thing is trying to get nginx+bluepill working
[2012-07-12 03:48:46 -0400] Bonkers: this nginx bluepill support is a mess
[2012-07-12 03:50:06 -0400] jtimberman: nginx+runit == winning :)
[2012-07-12 03:50:17 -0400] miah: whats the point of nginx + bluepill
[2012-07-12 03:51:21 -0400] miah: looks interesting enough.. runit works great though
[2012-07-12 03:51:52 -0400] Bonkers: I'm doing everything else in ruby, so I figured stick with it
[2012-07-12 03:52:00 -0400] Bonkers: rails, unicorn, chef, etc
[2012-07-12 03:52:28 -0400] Bonkers: and it's supposedly supported, I think I have it just about fixed anyway
[2012-07-12 03:52:47 -0400] Bonkers: the nginx bluepill support was clearly never tested on a clean instance
[2012-07-12 03:53:41 -0400] jtimberman: It was ;)
[2012-07-12 03:53:45 -0400] jtimberman: Just ... awhile ago.
[2012-07-12 03:53:52 -0400] jtimberman: Before Ubuntu 12.04, probably.
[2012-07-12 03:55:40 -0400] Bonkers: maybe bluepill changed, but seems unlikely
[2012-07-12 03:55:47 -0400] vaq: Shouldn't chef create validation.pem and client.pem upon start?
[2012-07-12 03:56:03 -0400] Bonkers: nginx::commons creates directories that are required by the bluepill setup, but bluepill setup happens before commons runs
[2012-07-12 03:57:10 -0400] mattray: vaq: validation.pem is provided by the bootstrap
[2012-07-12 03:57:25 -0400] mattray: the client uses that to request a client.pem from the chef-server
[2012-07-12 03:58:18 -0400] vaq: I recently installed a new chef-server on ubuntu lucid, it didn't create /etc/chef/client.pem nor /etc/chef/validation.pem like it did with an installation on Debian.
[2012-07-12 03:58:37 -0400] mattray: oh I don't know about setting up the server
[2012-07-12 03:58:40 -0400] mattray: I meant for a client
[2012-07-12 04:00:05 -0400] PRK_nz: Can I have two command's in an execute resource?
[2012-07-12 04:01:09 -0400] erikh: PRK_nz: use a bash resource for that
[2012-07-12 04:01:31 -0400] PRK_nz: erikh: it's a windows node :P
[2012-07-12 04:01:40 -0400] erikh: hrm. no idea, then.
[2012-07-12 04:01:51 -0400] PRK_nz: ok, I'll just try it
[2012-07-12 04:05:51 -0400] erikh: aaaaand of course the vbox machines I spent all day sprinkling with logstash configuration are not coming up
[2012-07-12 04:05:53 -0400] erikh: fml
[2012-07-12 04:10:43 -0400] jtimberman: PRK_nz: there's a powershell resource :)
[2012-07-12 04:10:47 -0400] jtimberman: and a windows_batch resource
[2012-07-12 04:10:54 -0400] jtimberman: in the powershell and windows cookbooks, respectively
[2012-07-12 04:11:42 -0400] PRK_nz: n00b question: are they like these: http://wiki.opscode.com/display/chef/Resources ?
[2012-07-12 04:12:33 -0400] erikh: jtimberman: hey, can I pick your brain for a sec? I haz ideaz.
[2012-07-12 04:18:47 -0400] jtimberman: erikh: whats up
[2012-07-12 04:19:43 -0400] erikh: so, I had two strange issue yesterday with metadata; both in the default section on nodes "sticking" across cookbook versions
[2012-07-12 04:20:12 -0400] erikh: e.g., nginx had hte build dir set to the old version but the new version was requested, and logstash had some stickiness with the embedded elasticsearch stuff.
[2012-07-12 04:20:36 -0400] erikh: anyhow, point is, what would be the cost of making default attributes automatically updated if they come from a different cookbook version?
[2012-07-12 04:20:56 -0400] erikh: it seems like that's the right thing to do, but I figured you'd be aware of the caveats more than I.
[2012-07-12 04:23:04 -0400] jtimberman: attributes aren't aware of the version of the cookbook they're in
[2012-07-12 04:23:16 -0400] jtimberman: if you want to ensure the right values are used, override them in a role
[2012-07-12 04:27:19 -0400] yfeldblum: erikh, perhaps the earlier cookbook set these attributes at the "normal" level, rather than the default level?
[2012-07-12 04:27:30 -0400] erikh: no, they didn't.
[2012-07-12 04:27:47 -0400] erikh: jtimberman: yeah, it was more of a "this would be nice" thing instead of a "this already exists" thing.
[2012-07-12 04:32:16 -0400] yfeldblum: erikh, https://github.com/opscode-cookbooks/nginx/blob/master/attributes/source.rb ?
[2012-07-12 04:33:00 -0400] erikh: I already resolved it. this is about a feature request, really
[2012-07-12 04:37:06 -0400] williamherry: hi, how to handle client node that has different time zone with server, their time will not sync, how to solve this problem?
[2012-07-12 04:41:11 -0400] yfeldblum: williamherry, are timestamps not computed in utc?
[2012-07-12 04:42:15 -0400] williamherry: them are computed in utc, you mean it is ok with multi time zone?
[2012-07-12 04:42:59 -0400] yfeldblum: williamherry, i assume that's the case
[2012-07-12 04:43:39 -0400] williamherry: yfeldblum, thanks
[2012-07-12 05:11:29 -0400] BryanWB_: ohai chefs!
[2012-07-12 05:11:32 -0400] BryanWB_: erikh: around?
[2012-07-12 05:20:40 -0400] erikh: BryanWB_: I am!
[2012-07-12 05:20:45 -0400] BryanWB_: erikh: hi dude
[2012-07-12 05:20:49 -0400] erikh: just finally got my logstash stuff running
[2012-07-12 05:20:55 -0400] BryanWB_: big oops on my part as I don't use the runit part
[2012-07-12 05:20:57 -0400] erikh: pretty awesome.
[2012-07-12 05:21:01 -0400] erikh: ah, np there
[2012-07-12 05:21:12 -0400] erikh: I just hacked it for now, but figured I should at least tell someone
[2012-07-12 05:21:28 -0400] BryanWB_: the nil.empty? shouldn't happen as i set [inputs], [outputs], [filters] = []
[2012-07-12 05:21:32 -0400] BryanWB_: in the attributes
[2012-07-12 05:21:38 -0400] erikh: is that in your new patches?
[2012-07-12 05:21:42 -0400] BryanWB_: y
[2012-07-12 05:21:46 -0400] erikh: it's not working appropriately in lusis's cookbook
[2012-07-12 05:21:48 -0400] erikh: ok awesome
[2012-07-12 05:21:50 -0400] erikh: that's all I found.
[2012-07-12 05:21:54 -0400] BryanWB_: y, lusis hasn't pulled yet
[2012-07-12 05:22:02 -0400] BryanWB_: but i need to fix the runit thikg
[2012-07-12 05:22:13 -0400] erikh: yeah, either or works depending on what you prefer there
[2012-07-12 05:22:26 -0400] BryanWB_: i am esp. interested in whether  hash_to_stash works consistently
[2012-07-12 05:22:33 -0400] erikh: hrm
[2012-07-12 05:22:35 -0400] erikh: let me peek
[2012-07-12 05:22:40 -0400] BryanWB_: to convert a ruby hash to logstash statement
[2012-07-12 05:22:53 -0400] BryanWB_: https://github.com/bryanwb/chef-logstash/blob/master/libraries/default.rb
[2012-07-12 05:23:03 -0400] BryanWB_: and there are examples in the readme
[2012-07-12 05:23:11 -0400] erikh: looks good
[2012-07-12 05:23:20 -0400] BryanWB_: but devil is in details
[2012-07-12 05:23:32 -0400] BryanWB_: lusis thinks it will break
[2012-07-12 05:23:36 -0400] erikh: how does the logstash config handle spaces?
[2012-07-12 05:23:37 -0400] BryanWB_: on edge cases
[2012-07-12 05:23:40 -0400] erikh: any kind of whitespace?
[2012-07-12 05:23:47 -0400] erikh: like foo bar { }
[2012-07-12 05:23:56 -0400] BryanWB_: afaik it is not whitespace significant, but not sure
[2012-07-12 05:24:30 -0400] erikh: I guess what I'm saying is if I feed json: "foo bar": { }
[2012-07-12 05:24:31 -0400] erikh: etc
[2012-07-12 05:24:57 -0400] BryanWB_: great question, no idea
[2012-07-12 05:25:39 -0400] erikh: also instead of using inspect it might be in your best interest to case out the Integer/TrueClass/FalseClass stuff
[2012-07-12 05:25:49 -0400] erikh: also this:
[2012-07-12 05:25:58 -0400] BryanWB_: i did that earlier but it seemed unnecessary
[2012-07-12 05:26:03 -0400] BryanWB_: but still might be worth doing
[2012-07-12 05:26:46 -0400] erikh: https://gist.github.com/d3d1b21a44595aa3e9c3
[2012-07-12 05:26:49 -0400] erikh: is a little cleaner
[2012-07-12 05:27:13 -0400] erikh: brb, hth!
[2012-07-12 05:28:01 -0400] BryanWB_: erikh: when u return, where do u c runit pointing to logstash.conf instead of shipper.conf?
[2012-07-12 05:28:47 -0400] BryanWB_: erikh: y, i may change it to match ur gist
[2012-07-12 05:33:10 -0400] erikh: BryanWB_: in the template, let me link it
[2012-07-12 05:33:27 -0400] erikh: https://github.com/bryanwb/chef-logstash/blob/master/templates/default/sv-logstash_agent-run.erb#L9
[2012-07-12 05:33:41 -0400] BryanWB_: ah, i have never looked at that file :)
[2012-07-12 05:37:00 -0400] erikh: here, I did a small rewrite of your hash_to_stash routine
[2012-07-12 05:37:02 -0400] erikh: https://gist.github.com/e6c177ae1389ccbecb33
[2012-07-12 05:37:42 -0400] BryanWB_: those runit files may need more surgery since lusis added extra templating for conif file
[2012-07-12 05:37:51 -0400] BryanWB_: sorry, extra attributes for config filename
[2012-07-12 05:37:54 -0400] erikh: aha
[2012-07-12 05:39:04 -0400] BryanWB_: lovely! love ur rewrite
[2012-07-12 05:39:38 -0400] BryanWB_: i think u need `case v.class.to_s`
[2012-07-12 05:39:54 -0400] erikh: nah
[2012-07-12 05:39:58 -0400] erikh: case works against === there
[2012-07-12 05:40:01 -0400] BryanWB_: or maybe just ` case v.class `
[2012-07-12 05:40:03 -0400] erikh: and class provides an ===
[2012-07-12 05:40:20 -0400] BryanWB_: umm, what's ===  ?
[2012-07-12 05:40:36 -0400] erikh: it's an operator that case uses for comparisons
[2012-07-12 05:40:37 -0400] hoover_damm: your truly devops now
[2012-07-12 05:40:43 -0400] erikh: be nice.
[2012-07-12 05:41:20 -0400] erikh: so, when you case v, it looks at teh first when, uses === against the v, and sees if it gets a true value.
[2012-07-12 05:41:35 -0400] erikh: so it's String === v there, which is true for strings in v
[2012-07-12 05:42:02 -0400] erikh: I finally got logstash going... just mailed my boss a pic
[2012-07-12 05:42:05 -0400] erikh: so excited!
[2012-07-12 05:42:14 -0400] BryanWB_: nice!
[2012-07-12 05:42:28 -0400] erikh: now to get graphite going with it
[2012-07-12 05:42:33 -0400] BryanWB_: i am also working on the graphite cookbook but just for rhel support
[2012-07-12 05:42:47 -0400] erikh: ah, coool
[2012-07-12 05:43:03 -0400] BryanWB_: r u a rhel user or lucky enough to use ubuntu?
[2012-07-12 05:43:10 -0400] erikh: we're on ubuntu
[2012-07-12 05:43:18 -0400] erikh: my boss likes rhel, but has trouble arguing for it.
[2012-07-12 05:43:23 -0400] BryanWB_: ah, much more straightforward then
[2012-07-12 05:43:27 -0400] BryanWB_: w/ just ubuntu
[2012-07-12 05:43:47 -0400] erikh: yeah, chef seems to like ubuntu a lot more than RHEL, or so I've noticed
[2012-07-12 05:43:49 -0400] hoover_damm: if node.has_key?("bob") && if node['bob'].has_key? && if node['bob'] === "{somejson}"
[2012-07-12 05:43:55 -0400] hoover_damm: add a few more if's in there
[2012-07-12 05:44:16 -0400] hoover_damm: for the most part debian/ubuntu takes up a good 30-40% chunk
[2012-07-12 05:44:22 -0400] hoover_damm: when your talking a lot of distributions
[2012-07-12 05:44:25 -0400] hoover_damm: 30% is a lot of users
[2012-07-12 05:44:45 -0400] hoover_damm: and I'm talking out my butt on figures here
[2012-07-12 05:44:47 -0400] hoover_damm: just to be clear
[2012-07-12 05:46:51 -0400] BryanWB_: is '===' in ruby 1.8.7?
[2012-07-12 05:47:18 -0400] jatan: BryanWB_, for some objects, yes :)
[2012-07-12 05:47:50 -0400] BryanWB_: gr8, i use 1.9* but want this cookbook to work across both
[2012-07-12 05:49:16 -0400] jatan: BryanWB_, it doesn't make much sense to develop against 1.8.7 anymore.. whoever is using it should seriously consider switching to 1.9 anyhow
[2012-07-12 05:49:45 -0400] jatan: happily there arent too many gotchas that are difficult to work around between the two
[2012-07-12 05:49:46 -0400] BryanWB_: jatan: yeah, but a lot of consumers of the cookbook will be running 1.8.7 unfortunately
[2012-07-12 05:51:18 -0400] erikh: BryanWB_: it is unlikely you will find a class you want to use that doesn't implement === for case purposes
[2012-07-12 05:51:23 -0400] erikh: very unlikely.
[2012-07-12 05:51:35 -0400] erikh: especially since it's defined on Class#===
[2012-07-12 05:53:24 -0400] jtimberman: erikh: if your earlier query was about a feature request, then a ticket, and a post to the mailing list would be in order )
[2012-07-12 05:53:40 -0400] erikh: meh
[2012-07-12 05:53:48 -0400] erikh: I just wanted to get a basic impression
[2012-07-12 05:54:08 -0400] erikh: I need to get back on those mailing lists since I changed jobs anyhow
[2012-07-12 05:56:07 -0400] BryanWB_: erikh: tks a lot for ur help
[2012-07-12 05:56:43 -0400] erikh: anytime!
[2012-07-12 06:18:46 -0400] hoover_damm: BryanWB_, you should stop using 1.8.7
[2012-07-12 06:19:12 -0400] hoover_damm: just because I want to see 1.9.x only in gems and not 1.8.x gems
[2012-07-12 06:19:41 -0400] hoover_damm: where Buck Rogers travels back in time
[2012-07-12 06:19:42 -0400] hoover_damm: to fix gems
[2012-07-12 06:20:02 -0400] BryanWB_: hoover_damm: i actually have
[2012-07-12 06:20:30 -0400] BryanWB_: hoover_damm: _but_ i imagine a fair # of users for the logstash cookbook will be running 1.8.7
[2012-07-12 06:21:28 -0400] jtimberman: they should stop too
[2012-07-12 06:21:59 -0400] BryanWB_: jtimberman: next u will say that everyone should quit using RHEL 5 :)
[2012-07-12 06:32:09 -0400] jtimberman: BryanWB_: no
[2012-07-12 06:32:15 -0400] jtimberman: BryanWB_: but, rhel 4, certainly ;)
[2012-07-12 06:32:28 -0400] jtimberman: rhel 5 is ... 5 years old. O.o
[2012-07-12 06:32:47 -0400] jtimberman: i mean its cool, if your app stack is built on 5 year old stuff.
[2012-07-12 06:32:55 -0400] jtimberman: but most web ops shops arent :)
[2012-07-12 06:33:58 -0400] BryanWB_: jtimberman: u were gr8 on ffs other night, tks for coming on
[2012-07-12 06:34:20 -0400] jtimberman: thanks
[2012-07-12 07:05:59 -0400] nmistry: i am having a problem with chef + knife-rackspace where a knife rackspace server create is not setting the :cloud or :rackspace attributes
[2012-07-12 07:06:13 -0400] nmistry: has anyone seen this problem before?
[2012-07-12 07:06:33 -0400] nmistry: it seems intermittent
[2012-07-12 07:06:47 -0400] nmistry: was running chef 0.10.10 and now upgraded to 10.12.0
[2012-07-12 08:01:26 -0400] nmistry: i think this has to do with the chef cloud plugin
[2012-07-12 08:19:43 -0400] nmistry: can someone point me in the right direction looking for where chef gets the cloud information for ec2/rackspace  i found in the debug logs.. "loading plugin cloud" but cant seem to find where that code lives
[2012-07-12 08:20:49 -0400] cnf: anyone know of a nice secondary dns as a service provider? with bulk packages?
[2012-07-12 08:24:46 -0400] HenrikSR: Hi. Can I run a single recipe using someting like this: knife ssh name:<nodename> "sudo chef-client <recipename>"
[2012-07-12 08:32:11 -0400] Bonkers: HenrikSR, just add it to your run_list
[2012-07-12 08:32:39 -0400] Bonkers: knife node run_list add NODE_NAME 'receipe[foo]'
[2012-07-12 08:32:42 -0400] Bonkers: then run chef-client
[2012-07-12 08:33:22 -0400] HenrikSR: I am not precise enough. :) Lets say I already have 3 reciepes on the chef-client. But I want to rerun just one of them.
[2012-07-12 08:33:40 -0400] HenrikSR: I am very new to chef. so my flow understanding is not perfect yet
[2012-07-12 08:33:54 -0400] Mithrandir: the usual way is to just run the whole run list, not just a single.
[2012-07-12 08:34:18 -0400] nmistry: i have narrowed the problem down to ohai not getting the information properly on my two instances
[2012-07-12 08:34:29 -0400] nmistry: one instance does not get the cloud info
[2012-07-12 08:34:33 -0400] nmistry: the other instance does get the cloud info
[2012-07-12 08:34:41 -0400] nmistry: both were spawned with the same command
[2012-07-12 08:35:04 -0400] HenrikSR: ok. but I would be nice to be able to simple rerun a role for a node or just a recipe.
[2012-07-12 08:36:39 -0400] Mithrandir: HenrikSR: what for?  Your recipes should be idempotent.
[2012-07-12 08:37:38 -0400] williamherry: hi, is it possible to make chef work without check clock of client node?
[2012-07-12 08:38:06 -0400] HenrikSR: yes. I agree that in most part - they should. And all scripts should be build that way. however - It can take time to rerun everthing. And therefore I would be a nice flexibility to be able to do that.
[2012-07-12 08:38:11 -0400] Mithrandir: williamherry: no, the clocks need to be fairly in sync for the crypto to be secure.
[2012-07-12 08:41:39 -0400] williamherry: Mithrandir, we have some old compute that change time may cause problem,
[2012-07-12 08:43:15 -0400] mhalligan: nmistry: right because the rackspace attribute I think is based on the way the kernel is named
[2012-07-12 08:43:54 -0400] mhalligan: nmistry: jtimberman wrote a nice plugin to help with some of the data otherwise in that rackspace tree
[2012-07-12 08:48:05 -0400] nmistry: really?
[2012-07-12 08:50:41 -0400] nmistry: crap.
[2012-07-12 08:50:42 -0400] nmistry:  kernel[:release].split('-').last.eql?("rscloud")
[2012-07-12 08:57:21 -0400] nmistry: found a bug w/ that
[2012-07-12 08:57:29 -0400] nmistry: it checks the kernel and the mac address
[2012-07-12 08:57:39 -0400] nmistry: kernel does not match
[2012-07-12 08:57:48 -0400] nmistry: but the mac address matches (sometimes)
[2012-07-12 08:58:12 -0400] nmistry: rs does not always return 00:00:00 mac addresses
[2012-07-12 08:58:29 -0400] nmistry: will see if i can fix it and send a patch
[2012-07-12 09:32:53 -0400] maruq: has anyone used the mongodb cookbook? If so, how the hell do you get the replica set stuff going?
[2012-07-12 09:34:10 -0400] maruq: calling mongodb::replicaset & setting the node[:mongodb][:cluster_name], as it says in the docs, fails no matter what I try
[2012-07-12 11:00:23 -0400] gorgon: hey guys having an issue with chef-10.12.0 and downloading an  s3_file resource it seems to be erroring out with had an error: NameError: uninitialized constant Chef::Provider::S3File::AWS anyone seen this before?
[2012-07-12 11:01:18 -0400] gorgon: full stack trace at http://pastie.org/4243128
[2012-07-12 11:02:30 -0400] gorgon: if anyone could point me in any direction would be helpful cause im drawing a blank right now :(
[2012-07-12 11:29:50 -0400] zoubi: is there any problems currently, creating and boostrapping ec2 instances using knife ec2?
[2012-07-12 11:30:01 -0400] zoubi: the newly created instance gets terminated immediately
[2012-07-12 11:30:18 -0400] zoubi: but if I create the instance manually through the console of amazon, it keeps running
[2012-07-12 11:47:18 -0400] yatesy: what are peoples thoughts on upgrading chef when using omnibus, at the moment all i can see is when we get word there's a new chef version we have to rerun the install.sh script on all chef boxes
[2012-07-12 11:47:58 -0400] yatesy: i kinda like having apt repos (ubuntu here) where I can manage the upgrade in a nice way, although i also like the idea of omnibus having it totally isolated from the system
[2012-07-12 12:16:27 -0400] jperry2_: anyone know if there are any knife plugins that will edit json files or roles specifically
[2012-07-12 12:16:46 -0400] masterkorp: I love that now opscode has one repository per cookbook
[2012-07-12 12:16:49 -0400] masterkorp: so nice
[2012-07-12 12:17:03 -0400] masterkorp: i can use git submodule now
[2012-07-12 12:17:07 -0400] jperry2_: I want to be able to have something edit the attributes in a role automatically
[2012-07-12 12:17:21 -0400] geekbri: anybody have any recommendations for good html5 slides?  Or perhaps I should just stick to pages.
[2012-07-12 12:17:32 -0400] jperry2_: I could just use the json library to read the json file then spit it out again but just wanted to see if there was something already out there that did this
[2012-07-12 12:17:35 -0400] jperry2_: knife plugin, etc
[2012-07-12 12:41:15 -0400] masterkorp: Is there any chef book ?
[2012-07-12 12:42:06 -0400] BryanWB_: masterkorp: unfortunately, not yet
[2012-07-12 12:42:34 -0400] BryanWB_: there is 'test-driven infrastructure with chef' which is good but not a comprehensive overview of chef
[2012-07-12 12:45:26 -0400] masterkorp: BryanWB_: yeah i have that one
[2012-07-12 12:45:47 -0400] masterkorp: I want to recomend something to a newbie
[2012-07-12 12:46:03 -0400] BryanWB_: sadly, the wiki is all there is currently
[2012-07-12 12:46:21 -0400] masterkorp: but wiki is hard to grasp if you dont the concepts of infratuture as a code
[2012-07-12 12:46:25 -0400] masterkorp: and so on
[2012-07-12 12:46:39 -0400] masterkorp: Its a great resource after that
[2012-07-12 12:49:54 -0400] BryanWB_: y, agreed
[2012-07-12 12:51:36 -0400] maruq: masterkorp, bryanWB_: there's also the chef-fundamentals presentation: https://github.com/opscode/chef-fundamentals
[2012-07-12 12:54:00 -0400] masterkorp: thank you
[2012-07-12 12:55:23 -0400] BryanWB_: maruq: good point
[2012-07-12 12:55:27 -0400] BryanWB_: forgot about that
[2012-07-12 12:55:50 -0400] maruq: it's a bit verbose in parts, but I guess that's good if handing to a newbie
[2012-07-12 13:43:31 -0400] nd__: How do I check in a recipe of another recipe is installed on the node?
[2012-07-12 13:44:33 -0400] nd__: Ah, looking in node['recipes'] should do it I see
[2012-07-12 13:47:34 -0400] yfeldblum: nd__, that only tells you the recipes listed in the node's expanded run-list
[2012-07-12 13:48:01 -0400] yfeldblum: nd__, that is only a few of the recipes that the node will actually end up running
[2012-07-12 13:57:41 -0400] nd__: yfeldblum: I thought this expands all roles and related recipes into it too?
[2012-07-12 13:57:49 -0400] nd__: yfeldblum: What's the correct method then?
[2012-07-12 13:58:16 -0400] yfeldblum: nd__, it expands roles only
[2012-07-12 13:59:10 -0400] yfeldblum: nd__, why do you need to know if some recipe will be run on a node?
[2012-07-12 14:00:46 -0400] nd__: I wanted to build some logic into a recipe in that it also writes a monit-template for the daemon-process if monit is installed on the node (which it always should be, but)
[2012-07-12 14:01:34 -0400] nd__: Is this not a good idea?
[2012-07-12 14:06:24 -0400] yfeldblum: nd__, perhaps, consider having your recipe look at a particular node attribute and using that to decide whether to drop the monit template
[2012-07-12 14:07:32 -0400] yfeldblum: nd__, in your cookbook's attributes file, you would default that attribute to false; but in a role, someone could default it to true
[2012-07-12 14:07:59 -0400] yfeldblum: nd__, it's roles that know how to combine multiple recipes, so it's roles that should know how to decide about this case too
[2012-07-12 14:14:23 -0400] nd__: yfeldblum: Yes, the attribtue is the other way I had in mind. Alright, I'll go for that
[2012-07-12 14:17:30 -0400] xerxas: Hi all, is there some documentation, or advises of when should I use data bags or when should I use node or role attributes ?
[2012-07-12 14:24:35 -0400] yfeldblum: xerxas, it's mostly down to "use your best judgment based on your in-depth knowledge of the facts and the context" - but if you have a particular question about a concrete case, i may be able to offer better insights
[2012-07-12 14:25:20 -0400] jperry2_: anyone storing the version of their own application in a role as an attribute?
[2012-07-12 14:25:46 -0400] jperry2_: I was thinking of creating attributes in the role file that pertain to a particular version in the environment
[2012-07-12 14:26:08 -0400] jperry2_: I would put them in the production.json file but we have that being pushed as part of a cookbook pipeline
[2012-07-12 14:26:34 -0400] laurent\: xerxas: otherwise you'll end an answer that looks like "avoid node attributes, use roles attributes as much as possible, if you can't do it with roles attribute then go for databags" :)
[2012-07-12 14:26:53 -0400] laurent\: s/end an/end up with an/
[2012-07-12 14:27:23 -0400] knuckolls: FATAL: Chef::Exceptions::Exec: package[tree] (sysadmin::tools line 6) had an error: Chef::Exceptions::Exec: apt-get -q -y install tree=1.5.3-1 returned 100, expected 0
[2012-07-12 14:27:30 -0400] knuckolls: i get errors like this intermittently
[2012-07-12 14:27:56 -0400] knuckolls: leads me to believe that my apt mirror is lying to me or buggin' out. it's not always the same apt package
[2012-07-12 14:28:13 -0400] knuckolls: has anyone else experienced this with chef on 10.04? i'm on ec2 if it matters.
[2012-07-12 14:28:53 -0400] ashb: knuckolls: yeah i've had that from time to time
[2012-07-12 14:29:12 -0400] ashb: manually doing an apt-get update seemed to un-wedge it last time I think
[2012-07-12 14:29:30 -0400] knuckolls: yes that's what i've added to my user-script to make sure apt-get update runs well before the chef-bootstrap
[2012-07-12 14:29:37 -0400] knuckolls: but that's in place and it's happening again :(
[2012-07-12 14:30:07 -0400] ashb: for me my chef run did an apt-get update from the apt receipe but it didn't seem to help. running manually did however
[2012-07-12 14:30:11 -0400] xerxas: knuckolls: is this at bootstrap ? I
[2012-07-12 14:30:20 -0400] knuckolls: xerxas: yes.
[2012-07-12 14:30:21 -0400] ashb: its only happened once or twice so I've never dug into it any deeper
[2012-07-12 14:30:25 -0400] nd__: knuckolls: yes, I have that too apt-get update fixed it for me too
[2012-07-12 14:30:45 -0400] knuckolls: all of you on ec2?
[2012-07-12 14:30:52 -0400] nd__: not me, no
[2012-07-12 14:30:55 -0400] xerxas: I have an idea, but I may be wrong, when ubuntu boots on ec2, cloud-init does an apt-get update
[2012-07-12 14:31:02 -0400] xerxas: you can't run two concurrent apt-get
[2012-07-12 14:31:07 -0400] knuckolls: hm
[2012-07-12 14:31:15 -0400] xerxas: just an idea ...
[2012-07-12 14:31:16 -0400] knuckolls: well there's a lock file
[2012-07-12 14:31:27 -0400] knuckolls: which i've encountered before. specifically on 12.04
[2012-07-12 14:31:39 -0400] knuckolls: but it doesn't seem present
[2012-07-12 14:31:55 -0400] knuckolls: i'm sad that you've encountered it off-ec2 as well
[2012-07-12 14:32:00 -0400] xerxas: knuckolls: yeah, the lockfile doesn't make chef wait for apt-get update to finish , it juste makes apt-get return code != 0
[2012-07-12 14:32:01 -0400] knuckolls: i was convinced it was my specific mirror
[2012-07-12 14:32:15 -0400] xerxas: probably 100 , as stated in the manpage :  apt-get returns zero on normal operation, decimal 100 on error.
[2012-07-12 14:32:35 -0400] xerxas: ahh, didn't saw nd__ is not on ec2
[2012-07-12 14:32:36 -0400] knuckolls: xerxas: interesting. that's at least a good lead. i'll dig into that.
[2012-07-12 14:33:05 -0400] knuckolls: as usual, the chef room delivers ;)
[2012-07-12 14:33:06 -0400] knuckolls: thanks all
[2012-07-12 14:33:19 -0400] xerxas: anyone for my data bags vs node / role attributes question ?
[2012-07-12 14:33:38 -0400] xerxas: I'm pretty new to chef, and I tend to think it's better to have data bags mostly everywhere , am I wrong ?
[2012-07-12 14:33:55 -0400] ashb: what/when was the QW?
[2012-07-12 14:33:57 -0400] ashb: s/W//
[2012-07-12 14:34:00 -0400] knuckolls: xerxas: i use attributes in roles and environments primarily
[2012-07-12 14:34:16 -0400] ashb: ah then.
[2012-07-12 14:34:23 -0400] knuckolls: xerxas: and data bags for "global" stuff that lots of recipes need to look up
[2012-07-12 14:34:24 -0400] nd__: But I'm fairly new to chef, so don't give to much weight to my problems I'm working on two recipes and for that restored a local vm about 20 times while installing my recipes several times the apt timed out, had error 100, etc. but the default mirror seems to be in the us on ubuntu while i'm in germany, so I attributed it to that but I didn't come around to change the mirror yet.
[2012-07-12 14:35:40 -0400] knuckolls: nd__: thanks :) if i figure it out i'll be sure to let everyone know
[2012-07-12 14:35:57 -0400] nd__: great
[2012-07-12 14:36:47 -0400] yfeldblum: xerxas, you can think of node attributes and roles as being for node-specific data; and data-bags as being for data not specific to individual nodes
[2012-07-12 14:36:49 -0400] xerxas: knuckolls: let's say for databases, you would use role attributes ?
[2012-07-12 14:37:34 -0400] knuckolls: xerxas: depends on what you mean. if i'm configuring parameters of the database configuration file, i'll likely use attributes in the role
[2012-07-12 14:37:40 -0400] xerxas: yfeldblum:  ok , If I might in the future move some ressource that are sticked to one node, I should rather add role attributes, and be prepared to cut / paste the relevant json in to another role ?
[2012-07-12 14:37:56 -0400] knuckolls: xerxas: if i'm publishing username/password information to an application, i'll likely store that in an encrypted data bag
[2012-07-12 14:39:41 -0400] cnf: knuckolls: what username / password information?
[2012-07-12 14:40:16 -0400] knuckolls: cnf: database connection information, login to the database, password
[2012-07-12 14:40:19 -0400] knuckolls: that kind of stuff
[2012-07-12 14:40:48 -0400] cnf: right
[2012-07-12 14:41:23 -0400] xerxas: knuckolls: seems a wise answer, because database l/p are connected to application then , so typically , the database role and front role would share these informations
[2012-07-12 14:42:05 -0400] knuckolls: xerxas: also, you don't want your sensitive information in plain text in your github repo, so plop it in an encrypted data bag
[2012-07-12 14:42:06 -0400] cnf: knuckolls: i'm trying to avoid passwords as much as possible, but indeed database stuff you can't avoid ^^;
[2012-07-12 14:42:08 -0400] cnf: well, atm
[2012-07-12 14:42:29 -0400] knuckolls: cnf: yeah that and AWS keys are the primary use cases for encrypted data bags
[2012-07-12 14:42:37 -0400] cnf: uhu
[2012-07-12 14:42:48 -0400] xerxas: cnf:  me too , I think that inside your own infrastructure, you pretty much can't be "secure"
[2012-07-12 14:43:12 -0400] cnf: xerxas: security isn't a boolean situation
[2012-07-12 14:43:21 -0400] cnf: it's a compromise, always
[2012-07-12 14:53:25 -0400] zoubi: is there any known issue using a debian squeeze, vagrant, and a chef-server? I have an error telling me that validation.pem is not well formatted... But if I change the OS by a Ubuntu, it works fine
[2012-07-12 14:54:44 -0400] jperry2_: is it bad to set attributes namespaced with environment in a role
[2012-07-12 14:55:20 -0400] yfeldblum: jperry2, it seems rather odd to me
[2012-07-12 14:55:21 -0400] jperry2_: for example ['testapp']['version']['production'] = "11"
[2012-07-12 14:55:31 -0400] jperry2_: it wouldn't be for cookbooks
[2012-07-12 14:55:41 -0400] jperry2_: but for our internal applications we want to deploy with chef
[2012-07-12 14:56:10 -0400] ashb: any reason you want to do that in a role? that is typically in a databag (if you follow the application cookbook strategy anyway)
[2012-07-12 14:56:29 -0400] jperry2_: we have another pipeline that pushes the environment file for cookbook versions
[2012-07-12 14:56:36 -0400] jperry2_: its only for the rpm version of our application
[2012-07-12 14:57:09 -0400] jperry2_: I'd rather not mix our internal applications with that pipeline and potentially run the risk of overwriting the environment changes
[2012-07-12 14:57:54 -0400] jperry2_: so manage the application version in a databad?
[2012-07-12 14:57:58 -0400] jperry2_: databag I mean
[2012-07-12 14:58:18 -0400] ashb: I do, yes
[2012-07-12 14:58:35 -0400] ashb: "revision": { "production": "stuff", "staging": "other" }
[2012-07-12 14:58:41 -0400] ashb: in the databag for each app
[2012-07-12 14:59:00 -0400] leifmadsen: ya, sounds like it would be valid to relate it to the environment so you have the correct version in testing vs production
[2012-07-12 14:59:30 -0400] jperry2_: so you would have a databag for each of our internal applications?
[2012-07-12 14:59:44 -0400] ashb: i do, yes
[2012-07-12 14:59:53 -0400] jperry2_: I see
[2012-07-12 15:00:09 -0400] ashb: data_bag/apps/x.json, y.json etc
[2012-07-12 15:00:12 -0400] jperry2_: can search see what databag was applied to what nodes?
[2012-07-12 15:00:27 -0400] ashb: no - data bags are not applied to nodes, they are global
[2012-07-12 15:00:40 -0400] ashb: the application cookbook expects certain format
[2012-07-12 15:00:42 -0400] knuckolls: jperry2_: databags aren't applied to nodes, recipes just look up data from them
[2012-07-12 15:00:47 -0400] jperry2_: meaning it would be nice to know what application exists on a particular node
[2012-07-12 15:00:54 -0400] jperry2_: how would you handle that part?
[2012-07-12 15:00:56 -0400] knuckolls: some people use tags
[2012-07-12 15:01:07 -0400] ashb: and the way it works out which is you have a list of roles in the data bag and the application cookbook does the right thing if the current node has a matching role
[2012-07-12 15:01:11 -0400] knuckolls: or have a role for an app that encapsulates the recipe
[2012-07-12 15:01:31 -0400] ashb: jperry2_: http://www.opscode.com/blog/2010/05/06/data-driven-application-deployment-with-chef/
[2012-07-12 15:01:41 -0400] jperry2_: right now I am using a role per application
[2012-07-12 15:01:49 -0400] ashb: should largely still be correct (environments didn't exist then mind)
[2012-07-12 15:01:51 -0400] jperry2_: and in the role is a cookbook that installs the application
[2012-07-12 15:02:23 -0400] jperry2_: but I'm struggling on where to manage the versions across our environments without running the risk of impacting others
[2012-07-12 15:02:26 -0400] ashb: oh though it looks like that way is deprecated now
[2012-07-12 15:02:27 -0400] ashb: https://github.com/opscode-cookbooks/application
[2012-07-12 15:02:46 -0400] ashb: so possibly ignore everything I've just said
[2012-07-12 15:03:17 -0400] jperry2_: ha
[2012-07-12 15:03:36 -0400] jperry2_: so are you saying don't use data bags for this?
[2012-07-12 15:03:57 -0400] ashb: possibly. read the usage section of that cookbook and see what it recommends
[2012-07-12 15:04:41 -0400] jperry2_: okay I'll check that out
[2012-07-12 15:04:59 -0400] jperry2_: anyone having a problem with chef being unpredictable as to when it deploys your application?
[2012-07-12 15:05:16 -0400] geekbri: miah: what did you mean by your method chaining tweet?
[2012-07-12 15:05:45 -0400] ashb: jperry2_: how unpretictable? chef-client in daemon mode has a built in splay parameter to prevent thundering herd problem of all nodes checking in at the same time
[2012-07-12 15:06:07 -0400] jperry2_: yeah I guess it is that you have no idea when your application is fully deployed
[2012-07-12 15:06:39 -0400] jperry2_: and you may have a reason in production to balance your deploys meaning don't take them all down at the same time
[2012-07-12 15:06:47 -0400] jperry2_: maybe the "splay" will cover this edge case
[2012-07-12 15:08:50 -0400] xerxas: cnf: yeah, security isn't boolean , that's why I quoted secure
[2012-07-12 15:09:19 -0400] huhongbo: i use sensu-chef to provision vagrant ,but it got error
[2012-07-12 15:09:57 -0400] huhongbo: https://gist.github.com/3098727
[2012-07-12 15:10:45 -0400] jperry2_: huhongbo are you trying to provision a chef server or just a chef client?
[2012-07-12 15:11:19 -0400] huhongbo: provision sensu through vagrantfile
[2012-07-12 15:11:55 -0400] huhongbo:   address node.has_key?(:cloud) ? node.cloud.public_ipv4 : node.ipaddress  is 104line
[2012-07-12 15:13:24 -0400] huhongbo: https://github.com/sensu/sensu-chef/blob/master/recipes/default.rb
[2012-07-12 15:15:01 -0400] huhongbo: jperry2_: vagrant using the chef-solo to provision
[2012-07-12 15:15:45 -0400] jperry2_: ah ok
[2012-07-12 15:16:08 -0400] kesor: why can't I make an attribute in attributes.rb that contains a list of hashes? error says "FATAL: Chef::Exceptions::ValidationFailed: Data Bag Items must contain a Hash or Mash!".
[2012-07-12 15:16:34 -0400] ashb: kesor: you sure that error is from attributes?
[2012-07-12 15:16:48 -0400] ashb: might be something like you've got a databag item with an invalid id
[2012-07-12 15:16:54 -0400] jperry2_: I wasn't sure if you were using sensu-chef to provision your vagrant box instead of using vagrant to execute chef for you
[2012-07-12 15:17:13 -0400] jperry2_: I understand now after looking at the project that its a cookbook
[2012-07-12 15:17:34 -0400] kesor: ashb: oh, you are right. it might be because I am trying to load a non-existing data_bag. How can I check that a a data bag exists before trying to load it?
[2012-07-12 15:17:55 -0400] ashb: i *think* that would give you a different error
[2012-07-12 15:18:04 -0400] ashb: but search would do it
[2012-07-12 15:18:36 -0400] kesor: so only way to check if a data bag exists is to search for it and check the results? ok.
[2012-07-12 15:19:13 -0400] ashb: think so. but I'm not sure the error is from the data bag not existing. but it might be
[2012-07-12 15:19:22 -0400] jperry2_: @ashb: that application cookbook you linked I wonder if it supports an rpm
[2012-07-12 15:19:33 -0400] ashb: bag = search(:bagname, 'id:something')[0]
[2012-07-12 15:19:43 -0400] jperry2_: or package
[2012-07-12 15:19:44 -0400] ashb: is i think a way of doing it
[2012-07-12 15:19:51 -0400] kesor: ashb: the trace has "Failed to load data bag item: "security_groups" "mysql"" just before this error I pasted.
[2012-07-12 15:19:59 -0400] ashb: probably is then
[2012-07-12 16:18:55 -0400] knuckolls: ashb, xerxas, nd__: i don't have proof other than absence of the error but i think the apt problem was because i'm using the chef-client cookbook to daemonize the chef-client and it was improperly starting it up before the initial bootstrap was finished so I had two chef-clients running at the same time. When one would apt-get update, then apt-get installs via the package resource would bomb.
[2012-07-12 16:19:30 -0400] knuckolls: there were other intermittent timing problems we were having that are probably solved by fixing that as well.
[2012-07-12 16:19:50 -0400] knuckolls: theoretically
[2012-07-12 16:21:03 -0400] cnf: hmm
[2012-07-12 16:24:31 -0400] cg: sure
[2012-07-12 16:24:40 -0400] cg: oops
[2012-07-12 16:50:04 -0400] AshtonKem: Hey, I'm sure this is a very common question, but I cannot figure out why my recipes are running out of order.
[2012-07-12 16:50:24 -0400] AshtonKem: I specified them in order on a run_list for a role, and vagrant (using chef-solo) is running them out of order.
[2012-07-12 16:50:49 -0400] yfeldblum: AshtonKem, how do you know they're running out of order?
[2012-07-12 16:51:00 -0400] AshtonKem: Because it's not installing postgres first.
[2012-07-12 16:51:26 -0400] AshtonKem: postgresql::server is one of the earlier recipes, and a later recipe is trying to create a database before pg is installed.
[2012-07-12 16:52:10 -0400] AshtonKem: I've got 2 roles, base and devel.
[2012-07-12 16:52:26 -0400] AshtonKem: Base includes apt, ant, java, subversion, and postgresql::server
[2012-07-12 16:52:44 -0400] AshtonKem: devel includes role[base], and then a few custom recipes to setup my application.
[2012-07-12 16:53:10 -0400] AshtonKem: Base works fine on its own, but when I run devel it skips most of the base stuff straight to the custom recipes, and fails.
[2012-07-12 16:55:22 -0400] yfeldblum: AshtonKem, how do the devel recipes work, in terms of setting up a postgresql database?
[2012-07-12 16:55:41 -0400] AshtonKem: They use the database recipe to create databases and database users.
[2012-07-12 16:55:50 -0400] AshtonKem: If I set vagrant to use the base role, alone.
[2012-07-12 16:55:54 -0400] AshtonKem: Then tell it to use the devel role.
[2012-07-12 16:55:56 -0400] AshtonKem: Everything works.
[2012-07-12 16:56:10 -0400] AshtonKem: But when I use the devel role alone on a clean system, it skips everything in the base role.
[2012-07-12 16:59:59 -0400] yfeldblum: AshtonKem, what does the devel role look like?
[2012-07-12 17:01:53 -0400] AshtonKem: http://pastebin.com/jPswxT2v
[2012-07-12 17:02:49 -0400] AshtonKem: And base.json: http://pastebin.com/weQs8Gz4
[2012-07-12 17:04:35 -0400] yfeldblum: AshtonKem, which of the devel recipes tries to create a db or otherwise deal with postgresql?
[2012-07-12 17:04:56 -0400] AshtonKem: reset_db
[2012-07-12 17:06:37 -0400] yfeldblum: AshtonKem, how does that recipe work?
[2012-07-12 17:07:00 -0400] AshtonKem: Hrm, I think I might've found a bug in my own code. Gimme 1 sec to see if that's the issue.
[2012-07-12 17:07:36 -0400] dwhsix: chef doesn't run "apt-get update" automatically, right?
[2012-07-12 17:07:39 -0400] dwhsix: I need to explicitly do it?
[2012-07-12 17:07:50 -0400] AshtonKem: You need the apt cookbook.
[2012-07-12 17:08:11 -0400] AshtonKem: Okay, there's definitely a bug in my code here.
[2012-07-12 17:09:01 -0400] dwhsix: AshtonKem: thx wonder why I didn't already have that in this project noticing I had it in another
[2012-07-12 17:13:27 -0400] miah: hi
[2012-07-12 17:13:32 -0400] yfeldblum: hi
[2012-07-12 17:17:53 -0400] dwhsix: hi
[2012-07-12 17:21:35 -0400] AshtonKem: Does chef go through all the roles and decide which ones will actually be executed before running any of them?
[2012-07-12 17:21:53 -0400] AshtonKem: Because I found a few bugs in my code that might explain why even the first role wasn't going.
[2012-07-12 17:22:04 -0400] AshtonKem: *first recipe
[2012-07-12 17:22:15 -0400] ashb: anatomy?
[2012-07-12 17:22:15 -0400] bawt_: anatomy is http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2012-07-12 17:22:22 -0400] ashb: AshtonKem: read that
[2012-07-12 17:22:29 -0400] ashb: should cover most/all what you want to know
[2012-07-12 17:23:22 -0400] AshtonKem: Son of a gun, there it is, right there.
[2012-07-12 17:23:24 -0400] AshtonKem: Much appreciated.
[2012-07-12 17:23:25 -0400] ashb: actually that doesn't really say, but the roles and recipes are expanded in the order you set them in the run list
[2012-07-12 17:23:41 -0400] AshtonKem: So if you have surrounding pure ruby code that makes decisions, and that breaks, you're SOL.
[2012-07-12 17:23:46 -0400] ashb: yes
[2012-07-12 17:24:16 -0400] AshtonKem: Well, crap.
[2012-07-12 17:24:24 -0400] AshtonKem: My later recipes depend on some decisions based on postgres.
[2012-07-12 17:24:39 -0400] AshtonKem: Is there any way to turn that code into an atomic chunk that gets evaluated at the end?
[2012-07-12 17:24:51 -0400] ashb: notifies and subscribes
[2012-07-12 17:25:01 -0400] ashb: and a chef ruby resource or similar
[2012-07-12 17:25:10 -0400] ashb: http://wiki.opscode.com/display/chef/Resources#Resources-RubyBlock and http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2012-07-12 17:25:40 -0400] AshtonKem: Ruby block is perfect. Thank you.
[2012-07-12 17:34:49 -0400] jperry2_: would it be better to store an rpm version in a default_attribute or override_attribute in a role?
[2012-07-12 17:36:29 -0400] miah: always default, unless a node belongs to multiple roles and you want to override an attribute defined by another role.
[2012-07-12 17:40:47 -0400] linTest: Looking at options for passing install variables during software installation process on a Windows node. Is Powershell what would typically be used for this?
[2012-07-12 17:59:16 -0400] Toumar: knife-ec2 gem is 0.5.14 on github but I get 0.5.12 when I do gem install knife-ec2. using -v=0.5.14 gives me an error. Fastest way to install 0.5.14?
[2012-07-12 18:01:35 -0400] hoover_damm: Toumar, 0.5.12 is on rubygems
[2012-07-12 18:01:41 -0400] hoover_damm: 0.5.14 is not released
[2012-07-12 18:01:59 -0400] hoover_damm: at least not according to gem search -r
[2012-07-12 18:02:43 -0400] Toumar: Bummer - I was hoping to pull a version with [KNIFE_EC2-45] fixed
[2012-07-12 18:02:45 -0400] hoover_damm: Toumar, your free to clone it and build the gem and use it... but it's just not on rubygems
[2012-07-12 18:02:58 -0400] Toumar: I'll do that.
[2012-07-12 18:03:03 -0400] hoover_damm: and if you find any bugs please report them
[2012-07-12 18:03:12 -0400] Toumar: Will do
[2012-07-12 18:03:39 -0400] hoover_damm: works beautifully
[2012-07-12 18:05:49 -0400] PapaSierra2: morning all, at my wits end, i added a ppa so that ubuntu 12 could install php >= 5.4, now it's trying to install mysql and i'm getting this http://dpaste.com/769909/
[2012-07-12 18:08:31 -0400] hoover_damm: PapaSierra2, you need to run apt-get -y install mysql-client=5.5.25-1~ppa1~precise
[2012-07-12 18:08:33 -0400] hoover_damm: PapaSierra2, paste the output
[2012-07-12 18:08:45 -0400] hoover_damm: PapaSierra2, all we know is apt failed with error 100... nothing more
[2012-07-12 18:09:06 -0400] PapaSierra2: hoover_damm ok great, doing that now...
[2012-07-12 18:09:24 -0400] PapaSierra2: thanks of the idea on how do diagnose
[2012-07-12 18:11:13 -0400] jperry2_: any reason why this would fail in my cookbook attributes file?
[2012-07-12 18:11:14 -0400] jperry2_: default['glitch']['version'] = node['glitch'][node.chef_environment]['version']
[2012-07-12 18:12:54 -0400] hoover_damm: jperry2_, do that in a recipe
[2012-07-12 18:14:11 -0400] PapaSierra: hoover_damm ok, firstly i think i can see an issue: my vm isn't pinging google
[2012-07-12 18:14:13 -0400] yfeldblum: because `node["glitch"][node.chef_environment]` returns nil?
[2012-07-12 18:14:32 -0400] dwhsix: recommendations on debugging "HTTP Request Returned 409 Conflict: Client already exists" that has just started appearing?
[2012-07-12 18:14:40 -0400] PapaSierra: i changed my dns settings on my router, my host can ping google, my guest cannot
[2012-07-12 18:14:43 -0400] dwhsix: I wish that error would provide more info
[2012-07-12 18:14:45 -0400] jperry2_: Im' getting a
[2012-07-12 18:14:46 -0400] jperry2_: NoMethodError: undefined method `[]' for nil:NilClass
[2012-07-12 18:15:19 -0400] PapaSierra: jperry2_ somewhere you have something like [:example] and :example is not being set
[2012-07-12 18:15:26 -0400] PapaSierra: so ruby sees []
[2012-07-12 18:15:42 -0400] jperry2_: I have that attribute I'm accessing defined on the role
[2012-07-12 18:15:57 -0400] erikh: :example is a value
[2012-07-12 18:15:59 -0400] erikh: not a variable.
[2012-07-12 18:16:12 -0400] erikh: what you have is what yfeldblum alluded to.
[2012-07-12 18:16:23 -0400] erikh: the environment doesn't have a data structure defined for it.
[2012-07-12 18:17:03 -0400] jperry2_: ok
[2012-07-12 18:17:04 -0400] yfeldblum: jperry2, data from roles may be loaded after attributes files are loaded
[2012-07-12 18:17:14 -0400] jperry2_: okay
[2012-07-12 18:17:16 -0400] yfeldblum: jperry2, indeed, i hope that's the case :P
[2012-07-12 18:17:39 -0400] yfeldblum: jperry2, if you want to do anything other than set static defaults or set defaults based on ohai data, that goes in the recipe and not in the attributes file
[2012-07-12 18:18:03 -0400] hoover_damm: i tried in attributes and it just got too messy
[2012-07-12 18:18:05 -0400] yfeldblum: jperry2, in your case, you're setting defaults based on other node data gotten from somewhere besides ohai (like roles), so it goes in the recipe
[2012-07-12 18:18:05 -0400] jtimberman: Ohai Chefs! I am soliciting feedback: http://lists.opscode.com/sympa/arc/chef/2012-07/msg00093.html and http://tickets.opscode.com/browse/COOK-1441
[2012-07-12 18:18:28 -0400] jessicab: dwhsix: just means it thinks it needs to register as a new client.. but one already exists, perhaps you didnt delete a client when deleting a node? or changed the node name to one that already exists?
[2012-07-12 18:18:59 -0400] jperry2_: yfeldblum - If I am using it in the recipe any way to let the server know that value was set
[2012-07-12 18:19:09 -0400] jperry2_: meaning I set a value in the role but I want to make sure it is used on the node
[2012-07-12 18:19:13 -0400] jperry2_: and I want it to be searchable
[2012-07-12 18:19:14 -0400] dwhsix: jessicab: thx - yeah, I know what it means, but was puzzled by which client it was trying to register as
[2012-07-12 18:19:17 -0400] jperry2_: is that possible?
[2012-07-12 18:19:19 -0400] dwhsix: but I think I found it
[2012-07-12 18:19:50 -0400] yfeldblum: jperry2, yep, just take that line and move it from the attributes to the recipe
[2012-07-12 18:20:29 -0400] jperry2_: ah okay
[2012-07-12 18:20:35 -0400] jperry2_: should I use default or something else?
[2012-07-12 18:20:38 -0400] jperry2_: normal?
[2012-07-12 18:20:38 -0400] bawt_: normal is what you set on the node by editing it
[2012-07-12 18:23:23 -0400] dwhsix: opscoders (or whoever added it): thank you for adding purge to "knife ec2 server delete"
[2012-07-12 18:23:41 -0400] jperry2_: yfeldblum: if I set an attribute in the recipe itself should I use default or normal?
[2012-07-12 18:24:31 -0400] jperry2_: and any attribute setting in a recipe is considering a node attribute right?
[2012-07-12 18:24:43 -0400] BryanWB:  dear lusis!
[2012-07-12 18:25:24 -0400] newb: aha, lusis, BryanWB: logstash q's on the way, but before that anyone messed around with vagrant/veewee and elasticsearch maybe with a bit of chef thrown in there?
[2012-07-12 18:26:12 -0400] newb: essentially something that allows me to test out various elasticsearch configs on vbox VMs effortlessly
[2012-07-12 18:26:50 -0400] newb: like different sharding options
[2012-07-12 18:27:21 -0400] BryanWB: newb, will try to help, i m not an expert on either es nor ls, have spend more time doing the cookbooks than working w/ the respective tools
[2012-07-12 18:28:16 -0400] newb: thanks BryanWB, how does index sharding differ from breaking up the indexing load across multiple shards?
[2012-07-12 18:28:34 -0400] BryanWB: newb i have no idea, sounds very interesting
[2012-07-12 18:29:03 -0400] knuckolls: newb: i don't think there is a difference
[2012-07-12 18:29:17 -0400] newb: ha ha. oh, and lusis, BryanWB: I will be checking out logstash over the weekend. do you have a podcast around or something? I read your blog post and the shipper component
[2012-07-12 18:29:19 -0400] hoover_damm: newb, isn't there decent es recipes?
[2012-07-12 18:29:36 -0400] hoover_damm: newb, sounds like your overthinking ES but it should be fun
[2012-07-12 18:29:37 -0400] BryanWB: newb see karmi's cookbook, that's what i used
[2012-07-12 18:29:37 -0400] hoover_damm: good luck
[2012-07-12 18:29:37 -0400] knuckolls: you set a number of shards initially and the write is going to be routed to the shard on the correct node
[2012-07-12 18:29:45 -0400] hoover_damm: btw karmi rocks
[2012-07-12 18:29:53 -0400] BryanWB: knuckolls tks for the work on  haproxy pattern btw
[2012-07-12 18:29:59 -0400] newb: hoover_damm, there indeed are. was looking for feedback on who used what and which one would be easier to test out various elasticsearch configs on vbox VMs effortlessly
[2012-07-12 18:30:08 -0400] BryanWB: u want karmi's
[2012-07-12 18:30:13 -0400] knuckolls: bryanwb: np i wanted it and i wrote it ;)
[2012-07-12 18:30:13 -0400] newb: karmi, +1 from what I read
[2012-07-12 18:30:29 -0400] BryanWB: he is also quite responsive if u contact him on #elasticsearch
[2012-07-12 18:31:11 -0400] knuckolls: i ended up having to alter some things in karmi's cookbook, but i frankly don't remember what. not much. something with the init script on 10.04
[2012-07-12 18:31:31 -0400] knuckolls: ping me if you have any problems with it and i'll look at what i had to do.
[2012-07-12 18:31:38 -0400] newb: cool
[2012-07-12 18:31:48 -0400] newb: what's equivalent in python to his tire stuff?
[2012-07-12 18:33:38 -0400] BryanWB: newb we will talk more about logstash and es next week but sadly no dedicated show to ls yet
[2012-07-12 18:33:53 -0400] BryanWB: for foodfightshow
[2012-07-12 18:34:11 -0400] newb: BryanWB, cool +1
[2012-07-12 18:34:52 -0400] jperry2_: this will work in a  recipe right? normal['glitch']['version'] = node['glitch'][node.chef_environment]['version']
[2012-07-12 18:35:04 -0400] jperry2_: where node['glitch'][node.chef_environment]['version'] is defined in a role
[2012-07-12 18:37:28 -0400] knuckolls: newb, if you're setting up a logstash architecture i should warn you that if you use rabbitmq and ubuntu that the existing opscode-cookbooks/rabbitmq cookbook is pretty broken. see my pull request for fixes.
[2012-07-12 18:37:43 -0400] knuckolls: dunno if you're headed down that path, but i figured i'd cut that one off at the pass if you are
[2012-07-12 18:39:16 -0400] newb: knuckolls, good point. I was thking of using logstasth's syslog OR hacknig the shipper
[2012-07-12 18:39:32 -0400] newb: logstasth's syslog is mature aint' it
[2012-07-12 18:39:49 -0400] knuckolls: catching syslog over tcp and udp you mean?
[2012-07-12 18:39:58 -0400] newb: just tcp
[2012-07-12 18:40:00 -0400] knuckolls: or slurping up syslog files
[2012-07-12 18:40:01 -0400] knuckolls: ah
[2012-07-12 18:40:09 -0400] knuckolls: yeah we use it, works fine
[2012-07-12 18:40:15 -0400] knuckolls: that's about all i can say ;)
[2012-07-12 18:40:22 -0400] knuckolls: #logstash might have more to say about it
[2012-07-12 18:40:29 -0400] newb: hmm
[2012-07-12 18:47:50 -0400] jtimberman: knuckolls: what pull request is that? is there a resolved ticket for it?
[2012-07-12 18:47:55 -0400] knuckolls: yep
[2012-07-12 18:47:59 -0400] knuckolls: i'll dig it out
[2012-07-12 18:48:01 -0400] jtimberman: thanks
[2012-07-12 18:48:18 -0400] erikh: newb: as i understand it logstash's syslog support is being retired in 1.2.0
[2012-07-12 18:48:27 -0400] knuckolls: https://github.com/opscode-cookbooks/rabbitmq/pull/3
[2012-07-12 18:48:31 -0400] erikh: at least that's what the warnings said yesterday when I tried to use it
[2012-07-12 18:48:35 -0400] knuckolls: http://tickets.opscode.com/browse/COOK-1317
[2012-07-12 18:48:47 -0400] newb: erikh, oh noes. do they want us to use some MQ liek AMPQ or something?
[2012-07-12 18:49:05 -0400] jtimberman: knuckolls: thanks!
[2012-07-12 18:49:06 -0400] knuckolls: jtimberman: i had a solid sleepless night trying to power through solving that one. Daniel DeLeo helped me through the final bind with the process groups and setsid.
[2012-07-12 18:49:17 -0400] knuckolls: give him a high five for me
[2012-07-12 18:49:23 -0400] newb: high five
[2012-07-12 18:49:38 -0400] newb: :-D
[2012-07-12 18:49:51 -0400] erikh: logstash has its own shipper
[2012-07-12 18:50:04 -0400] jtimberman: aw, sad face: This pull request cannot be automatically merged.
[2012-07-12 18:50:08 -0400] knuckolls: dang
[2012-07-12 18:50:13 -0400] knuckolls: i can rebase
[2012-07-12 18:50:14 -0400] jtimberman: that might be a red herring
[2012-07-12 18:50:19 -0400] jtimberman: but if you can rebase that'd be peachy
[2012-07-12 18:50:23 -0400] newb: erikh, are you talking about the AMPQ based python logstashshipper?
[2012-07-12 18:50:26 -0400] erikh: but don't hold me to this, I'm just going by error messages I got
[2012-07-12 18:50:28 -0400] erikh: no
[2012-07-12 18:50:30 -0400] erikh: there's a tcp shipper.
[2012-07-12 18:50:42 -0400] erikh: and it's AMQP :)
[2012-07-12 18:51:46 -0400] knuckolls: newb: the reason syslog is being deprecated is that it's really just nothing more than a tcp input (or output) with the syslog filter on it
[2012-07-12 18:52:08 -0400] knuckolls: as far as i understand it. so you can compose your own out of the building blocks logstash provides
[2012-07-12 18:52:40 -0400] jtimberman: knuckolls: what is package "util-linux"
[2012-07-12 18:52:49 -0400] knuckolls: it provides setsid
[2012-07-12 18:53:22 -0400] jtimberman: ah, for running as a non-priv user?
[2012-07-12 18:53:34 -0400] knuckolls: nope for a much more insidious reason
[2012-07-12 18:53:44 -0400] knuckolls: the service/init script would work fie
[2012-07-12 18:53:47 -0400] knuckolls: fine*
[2012-07-12 18:53:58 -0400] knuckolls: it would fire up rabbitmq
[2012-07-12 18:54:07 -0400] knuckolls: but as soon as the chef run ended, the rabbitmq process disappeared
[2012-07-12 18:54:11 -0400] erikh: ha
[2012-07-12 18:54:12 -0400] knuckolls: as if it were cleaning up a child process
[2012-07-12 18:54:22 -0400] erikh: don't you want to do that with start-stop-daemon though?
[2012-07-12 18:54:28 -0400] knuckolls: you better believe i tried.
[2012-07-12 18:54:31 -0400] erikh: fair enough.
[2012-07-12 18:54:46 -0400] jtimberman: haha
[2012-07-12 18:54:47 -0400] erikh: setsid will do the job regardless
[2012-07-12 18:55:08 -0400] knuckolls: there is likely a "better way"
[2012-07-12 18:55:18 -0400] knuckolls: but this is effective
[2012-07-12 18:55:20 -0400] newb: knuckolls, about the "index sharding differ from breaking up the indexing load across multiple shards",  for GBs of documents in ES sharding manually is the only way out?
[2012-07-12 18:55:21 -0400] jtimberman: knuckolls: @existing_erlang_key =  File.read('/var/lib/rabbitmq/.erlang.cookie')
[2012-07-12 18:55:23 -0400] jtimberman: why the @?
[2012-07-12 18:55:33 -0400] knuckolls: let me look at it, it's been a little while ;)
[2012-07-12 18:57:34 -0400] knuckolls: jtimberman: no reason at all.
[2012-07-12 18:57:39 -0400] knuckolls: it'll work without the @
[2012-07-12 18:57:57 -0400] knuckolls: likely because a lot of this cookbook was written with little sleep
[2012-07-12 18:58:12 -0400] knuckolls: i'll rebase, clean that up and anything else you identify and resubmit the pull request
[2012-07-12 19:00:12 -0400] jtimberman: knuckolls: i'll drop comments if i have more
[2012-07-12 19:00:17 -0400] knuckolls: k
[2012-07-12 19:00:47 -0400] newb: logstash does require good understanding of ES
[2012-07-12 19:00:51 -0400] newb: hmm
[2012-07-12 19:01:20 -0400] knuckolls: just saw your question about ES newb, not sure i followed it
[2012-07-12 19:01:22 -0400] jtimberman: knuckolls: actually just the one, wondering if the erlang cookie file location should be an attribute?
[2012-07-12 19:01:43 -0400] jtimberman: its fine if thats going to be a reliable location on any platforms the cookbook supports :)
[2012-07-12 19:01:59 -0400] newb: knuckolls, will re ask on es channel
[2012-07-12 19:02:03 -0400] newb: thanks though
[2012-07-12 19:02:43 -0400] knuckolls: as far as i'm aware that's the default for the redhat and ubuntu from the rabbitmq maintained packages
[2012-07-12 19:10:12 -0400] jperry2_: are there any knife tools that will edit your roles file for you
[2012-07-12 19:10:23 -0400] jperry2_: for example if I have deep attributes
[2012-07-12 19:10:32 -0400] jperry2_: I can use a json parser and write the file back out
[2012-07-12 19:10:43 -0400] jperry2_: but wanted to know if there was anything already available
[2012-07-12 19:16:27 -0400] knuckolls: jtimberman: i updated the pull request with the rebase, the @ fix, and the erlang cookie path attribute
[2012-07-12 19:17:35 -0400] knuckolls: https://github.com/opscode-cookbooks/rabbitmq/pull/3
[2012-07-12 19:19:32 -0400] jtimberman: knuckolls: :D <3
[2012-07-12 19:20:12 -0400] knuckolls: note that i've only tested it with ubuntu. my redhat experience ended around 1999
[2012-07-12 19:20:48 -0400] jtimberman: ok
[2012-07-12 19:20:54 -0400] jtimberman: I'll test on centos
[2012-07-12 19:20:57 -0400] jtimberman: cheers man
[2012-07-12 19:23:37 -0400] dwhsix: ok, omnibus chef hiding ruby from the rest of the system is just causing me no end of grief
[2012-07-12 19:23:55 -0400] dwhsix: what should I be adding to say "yes, damn it, install ruby, for everyone." ?
[2012-07-12 19:25:18 -0400] dwhsix: maybe "package 'ruby1.9.3'"?  This is ubuntu precise
[2012-07-12 19:25:46 -0400] knuckolls: dwhsix: precise is package "ruby1.9" i believe
[2012-07-12 19:26:13 -0400] dwhsix: knuckolls: ok, but in general, would that do what I want?
[2012-07-12 19:26:56 -0400] geekbri: if you want ruby1.9 it is, if you are content with 1.8.7 you could just do package 'ruby'
[2012-07-12 19:27:12 -0400] dwhsix: actually, looks like it is 'ruby1.9.1' or 'ruby1.9.3'
[2012-07-12 19:27:12 -0400] geekbri: omnibus very purposefully isolates the ruby its using from the rest of the system
[2012-07-12 19:27:55 -0400] dwhsix: geekbri: yeah, I understand & that's probably a Good Thing, but I guess I just need a different mindset now
[2012-07-12 19:27:58 -0400] knuckolls: i don't have a precise node in front of me, but i'd find the available ruby packages with apt-cache search ruby | grep "^ruby"
[2012-07-12 19:28:23 -0400] geekbri: looks to me like 12.04 "ruby" installs 1.8.7
[2012-07-12 19:28:29 -0400] dwhsix: knuckolls: yup, that's what I just did ;-)
[2012-07-12 19:28:50 -0400] dwhsix: and should I install package rubygems as well? or does that way madness lie?
[2012-07-12 19:29:32 -0400] knuckolls: i haven't delved too deep into precise. madness did lie that way in 10.04, i'd like to believe that it installs a modern version of rubygems
[2012-07-12 19:29:50 -0400] geekbri: there is ruby, ruby1.8, ruby 1.9.1, there are also full packages, including ruby 1.9.3-full
[2012-07-12 19:30:13 -0400] geekbri: you probably want to install rubygems, or install it from source, whichever you prefer.
[2012-07-12 19:30:45 -0400] dwhsix: k, thx all - will report back
[2012-07-12 19:36:32 -0400] jtimberman: dwhsix: you will want ruby1.9.1, rubygems1.9.1
[2012-07-12 19:36:53 -0400] jtimberman: totally recommend the full package though, because it doesn't have the "split out stuff like irb" insanity :)
[2012-07-12 19:36:59 -0400] dwhsix: jtimberman: issue with 1.9.3?  doesn't it have some wanted improvements?
[2012-07-12 19:37:10 -0400] jtimberman: dwhsix: no, that is the name of the package.
[2012-07-12 19:37:16 -0400] jtimberman: it will actually install ruby 1.9.3
[2012-07-12 19:37:21 -0400] jtimberman: -p0 iirc
[2012-07-12 19:37:39 -0400] dwhsix: right, I saw that yesterday
[2012-07-12 19:37:54 -0400] jtimberman: ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
[2012-07-12 19:38:04 -0400] jtimberman: the "1.9.1" refers to the ABI compatibility of the Ruby installed.
[2012-07-12 19:38:22 -0400] geekbri: never really understood the whole split things out of ruby package deal they had going on
[2012-07-12 19:38:23 -0400] jtimberman: 1.9.3 is 1.9.1 compatible, e.g.
[2012-07-12 19:38:28 -0400] dwhsix: so ruby1.9.1-full?
[2012-07-12 19:38:32 -0400] dwhsix: does that include rubygems?
[2012-07-12 19:38:34 -0400] jperry2_: if you install an rpm package and it has a service that is running will it stop it?
[2012-07-12 19:39:29 -0400] jtimberman: dwhsix: one way to find out :)
[2012-07-12 19:39:37 -0400] dwhsix: lol
[2012-07-12 19:39:44 -0400] jtimberman: dwhsix: RubyGems is included in the Ruby stdlib in 1.9
[2012-07-12 19:39:56 -0400] jtimberman: dwhsix: whether the full package includes it or not i don't remember.
[2012-07-12 19:40:16 -0400] dwhsix: jtimberman: k, will try it & see thx
[2012-07-12 19:41:25 -0400] dwhsix: ah, good to know about why they're calling it 1.9.1 (ABI compat) makes sense now
[2012-07-12 19:45:13 -0400] Zenigor: Trying to bootstrap rackspace servers and all day today they have been hanging on installing openjdk-6-jdk. there are no errors in /var/chef/cache/chef-stacktrace.out
[2012-07-12 19:45:40 -0400] jtimberman: Zenigor: on ubuntu?
[2012-07-12 19:45:51 -0400] jtimberman: Zenigor: because that might end up with a huge heaping pile of packages its downloading :)
[2012-07-12 19:45:56 -0400] Zenigor: Ubuntu 11.10, sorry forgot to mention that
[2012-07-12 19:45:59 -0400] jtimberman: and not actually hung
[2012-07-12 19:46:38 -0400] Zenigor: normally the rackspace bootstrap process in its entirety takes no longer than 15mins or so. as of right now its been going for close to 45mins
[2012-07-12 19:47:07 -0400] jtimberman: Zenigor: log in and see what's up? process table should have an apt-get install going if its still installing.
[2012-07-12 19:47:58 -0400] jtimberman: knuckolls: centos5 converged the rabbitmq recipe :)
[2012-07-12 19:48:41 -0400] Zenigor: jtimberman: I see nothing related to apt-get at all in top nor ps aux | grep install
[2012-07-12 19:49:58 -0400] linTest: windows node > calling powershell in a recipe; getting NameError: Cannot find a resource for powershell; but I have powershell installed on the windows server
[2012-07-12 19:54:35 -0400] jperry2_: anyone use the "allow_downgrade" package option?
[2012-07-12 19:56:53 -0400] patcon: yfeldblum: just heard about berkshelf and trying to sort out its selling point. any thoughts? seems like it's more a structure for what you keep in tmp/ ?
[2012-07-12 19:57:54 -0400] ivey: patcon: it's dependency manager for cookbooks
[2012-07-12 19:58:27 -0400] yfeldblum: patcon, not sure; i have read the content on th berkshelf website and also took a stroll through some of the code, but i haven't tried it out yet
[2012-07-12 19:59:00 -0400] patcon: ivey yfeldblum: ah thanks guys
[2012-07-12 19:59:05 -0400] jtimberman: knuckolls: you tested on lucid?
[2012-07-12 19:59:23 -0400] yfeldblum: patcon, it seems to have some functional differences with librarian-chef (which i may copy in time! ^-^), but i'm not familiar enough with it to go into details
[2012-07-12 19:59:26 -0400] jtimberman: patcon: hey there, COOK-1441 may be relevant to your mysql type interests :)
[2012-07-12 20:00:48 -0400] ivey: yfeldblum: biggest differences are it keeps 1 copy of the downloaded cookbooks and links them to your app directory, had built-in upload to avoid some naming issues with knife cookbook upload, and is faster
[2012-07-12 20:01:23 -0400] ivey: but it also will be adding chef server support soon, so you can get your cookbook deps from the chef server instead of github
[2012-07-12 20:01:35 -0400] jtimberman: knuckolls: everything seems working on centos 5 and 6, and ubuntu 10.04, but not 12.04
[2012-07-12 20:02:07 -0400] patcon: yfeldblum: yeah, was going to look into it looking for the same common ground. my open-source spidey-sense goes wild when i see two projects that seem so similar -- guess I want to help see if the tools can be bridged :)
[2012-07-12 20:02:16 -0400] patcon: jtimberman++
[2012-07-12 20:03:05 -0400] dwhsix: build-essential cookbook doesn't install make?
[2012-07-12 20:03:13 -0400] patcon: "same common ground" -- Patrick Connolly, Department of Redundancy Department
[2012-07-12 20:03:15 -0400] dwhsix: or am I doing something stupid?
[2012-07-12 20:03:30 -0400] linTest: anybody have hints on calling powershell in a Windows recipe?
[2012-07-12 20:03:31 -0400] hoover_damm: make isn't a part of build-essential?
[2012-07-12 20:03:32 -0400] jtimberman: dwhsix: it should
[2012-07-12 20:03:39 -0400] hoover_damm: i recall make being removed?
[2012-07-12 20:03:43 -0400] hoover_damm: perhaps i was delusional
[2012-07-12 20:03:59 -0400] dwhsix: poking at it now
[2012-07-12 20:04:10 -0400] hoover_damm: apt-cache show / apt-get source it
[2012-07-12 20:04:14 -0400] hoover_damm: and you can verify with facts
[2012-07-12 20:04:25 -0400] jtimberman: Depends: libc6-dev | libc-dev, gcc (>= 4:4.4.3), g++ (>= 4:4.4.3), make, dpkg-dev (>= 1.13.5)
[2012-07-12 20:04:26 -0400] dwhsix: facts. meh.
[2012-07-12 20:05:01 -0400] hoover_damm: dwhsix, apt-cache show build-essential
[2012-07-12 20:05:07 -0400] hoover_damm: 12.04 shows it should install make
[2012-07-12 20:05:11 -0400] hoover_damm: so i'm clearly wrong
[2012-07-12 20:05:15 -0400] dwhsix: Depends: libc6-dev | libc-dev, gcc (>= 4:4.4.3), g++ (>= 4:4.4.3), make, dpkg-dev (>= 1.13.5)
[2012-07-12 20:05:29 -0400] dwhsix: yeah am I getting bitten by omnibus again?
[2012-07-12 20:06:47 -0400] dwhsix: no, I think maybe build-essential cookbook isn't getting run maybe...
[2012-07-12 20:08:10 -0400] jtimberman: hurm. actually on lucid it installed rabbitmq-server 1.7.2
[2012-07-12 20:08:14 -0400] Majost: I have a quick question about metadata: with depends statements, is there a way to specify a particular recipe?
[2012-07-12 20:08:16 -0400] ivey: dwhsix: compile time vs run time problem?
[2012-07-12 20:08:24 -0400] jtimberman: Majost: no
[2012-07-12 20:08:29 -0400] jtimberman: Majost: its at the whole cookbook level
[2012-07-12 20:08:29 -0400] ivey: dwhsix:
[2012-07-12 20:08:44 -0400] Majost: jtimberman:  thanks! =)
[2012-07-12 20:08:48 -0400] dwhsix: ivey: no, looks like user error *sheepish grin*
[2012-07-12 20:10:38 -0400] yfeldblum: Majost, specifying a particular recipe in a depends would be rather useless
[2012-07-12 20:10:59 -0400] Majost: yfeldblum: postgresql is an example where it would not be useless
[2012-07-12 20:11:04 -0400] Majost: eg: postgresql::server
[2012-07-12 20:11:31 -0400] Majost: the server recipe automagically configures the admin password for the db
[2012-07-12 20:11:48 -0400] yfeldblum: Majost, chef-client would still need to download the full postgresql cookbook, regardless of which recipe you declared a dependency on
[2012-07-12 20:12:23 -0400] MinhP: hey folks
[2012-07-12 20:13:21 -0400] MinhP: knife bootstrap isnt setting the environment with the -E flag, anyone know whats going on?
[2012-07-12 20:13:22 -0400] Majost: would the correct way to invoke it after declaring the depends be to modify the default recipe of my cookbook to do: include_recipe 'postgresql::server'?
[2012-07-12 20:14:22 -0400] yfeldblum: Majost, that's right - a depends declaration in the metadata does not say that any recipes in that cookbook should be run - only that the cookbook should be available in case something else wants to run one of its recipes (or use one of its templates, libraries, definitions, etc)
[2012-07-12 20:14:48 -0400] yfeldblum: Majost, that something else might indeed take the form of `include_recipe "postgresql::server"`
[2012-07-12 20:14:48 -0400] Majost: ah, got it. =)
[2012-07-12 20:15:43 -0400] jtimberman: Majost: i'd use a role that applies the recipe in the run list
[2012-07-12 20:15:47 -0400] jtimberman: generally speaking
[2012-07-12 20:16:01 -0400] dwhsix: yeah, my error on make & build-essential. past that...
[2012-07-12 20:17:18 -0400] danclien: is there a way to force a recipe to even if it's been included once already?
[2012-07-12 20:18:18 -0400] cnf: danclien: why would you do that?
[2012-07-12 20:18:52 -0400] danclien: cnf: temporary configuration file change during the bootstrap process
[2012-07-12 20:20:15 -0400] cnf: danclien: ?
[2012-07-12 20:20:57 -0400] danclien: cnf: needed to temporary change the user on mercurial to download source files
[2012-07-12 20:21:37 -0400] cnf: i'm confused at what you want to do
[2012-07-12 20:23:23 -0400] danclien: cnf: recipe 1 sets up the scm user, recipe 2 temporarily changes to a different scm user, need to run recipe 1 again at the end
[2012-07-12 20:23:46 -0400] cnf: why would you do that o,O
[2012-07-12 20:24:21 -0400] knuckolls: jtimberman: glad to hear it worked fine on centos. i can see what's wrong with 12.04 but not today
[2012-07-12 20:24:37 -0400] knuckolls: i am interested in seeing that cookbook fixed up so i'll likely bug you more about it tomorrow
[2012-07-12 20:24:45 -0400] cnf: which one?
[2012-07-12 20:25:36 -0400] danclien: cnf: set up scm on a dev box.  need to download source code with readonly user
[2012-07-12 20:25:39 -0400] jtimberman: knuckolls: i'm debugging now
[2012-07-12 20:25:47 -0400] jtimberman: knuckolls: i'm not sure why 1.7.2 is getting installed on lucid
[2012-07-12 20:26:04 -0400] cnf: danclien: why would you need to change config files for that?
[2012-07-12 20:26:22 -0400] knuckolls: is it? that was the bug i fixed. originally it wasn't doing an apt-get update after adding the rabbitmq repo
[2012-07-12 20:26:24 -0400] cnf: can't you supply those on the command line?
[2012-07-12 20:26:25 -0400] danclien: cnf: not expose user passwords?
[2012-07-12 20:26:45 -0400] cnf: danclien: how are they less exposed in config files?
[2012-07-12 20:26:51 -0400] knuckolls: jtimberman: so it was just pulling the rabbitmq package from the 10.04 canonical repository
[2012-07-12 20:27:25 -0400] danclien: cnf: using global readonly user.
[2012-07-12 20:27:49 -0400] cnf: ...
[2012-07-12 20:28:05 -0400] danclien: cnf: and i can't prompt for user passwords during the process
[2012-07-12 20:29:00 -0400] cnf: danclien: why not?
[2012-07-12 20:29:00 -0400] jtimberman: knuckolls: yeah debugging now
[2012-07-12 20:29:43 -0400] MinhP: it looks like knife bootstrap doesnt know how the handle the --environment flag
[2012-07-12 20:30:29 -0400] danclien: cnf: automated run, and i don't wnat to store user's actual passwords in mercurial's config files
[2012-07-12 20:30:56 -0400] cnf: danclien: you aren't making a lot of sense
[2012-07-12 20:31:06 -0400] cnf: danclien: what do you put in the config file the first run?
[2012-07-12 20:31:11 -0400] danclien: fair enough
[2012-07-12 20:31:15 -0400] cnf: and what are you trying to put back?
[2012-07-12 20:32:19 -0400] danclien: the original mercurial config files
[2012-07-12 20:32:34 -0400] cnf: "original" from what?
[2012-07-12 20:33:22 -0400] danclien: mercurial recipe
[2012-07-12 20:33:31 -0400] danclien: to set up scm for devs
[2012-07-12 20:33:39 -0400] cnf: so why change it?
[2012-07-12 20:34:29 -0400] danclien: i need files from mercurial to bring up the development environment
[2012-07-12 20:35:08 -0400] danclien: well, special case for the dev environment
[2012-07-12 20:36:26 -0400] cnf: so why change the config file?
[2012-07-12 20:36:54 -0400] pwf: why does the DAEMON path in the debian init.d script for chef-server have the totally wrong path
[2012-07-12 20:37:02 -0400] cnf: hg clone http://user:password@mydomain.org and be done with it
[2012-07-12 20:37:14 -0400] pwf: my chef-server cookbook is installing everything to /usr/local/bin, but this file has it in /usr/bin: https://github.com/opscode/chef/blob/master/chef/distro/debian/etc/init.d/chef-server#L18
[2012-07-12 20:37:50 -0400] danclien: cnf: ahh... good point
[2012-07-12 20:38:25 -0400] cnf: danclien: you can but the user / password (and the domain) in an encryted databag if you want
[2012-07-12 20:39:11 -0400] danclien: cnf: data isn't sensitive, and the temp user is locked down
[2012-07-12 20:39:34 -0400] danclien: more for convenience
[2012-07-12 20:39:37 -0400] cnf: fair enough :P
[2012-07-12 20:41:01 -0400] danclien: thanks for the help, much appreciated
[2012-07-12 20:41:19 -0400] jtimberman: knuckolls: i think i found it, in the apt cookbook the notification on the sources.list file update was doing a delayed notification
[2012-07-12 20:41:28 -0400] cnf: no worries, good luck
[2012-07-12 20:44:09 -0400] knuckolls: jtimberman: did that just fix lucid or precise too?
[2012-07-12 20:44:17 -0400] hoover_damm: danclien, .hgrc?
[2012-07-12 20:44:41 -0400] jtimberman: knuckolls: fixed lucid
[2012-07-12 20:44:46 -0400] knuckolls: k
[2012-07-12 20:44:46 -0400] jtimberman: knuckolls: i'm checking precise
[2012-07-12 20:48:34 -0400] jtimberman: worked O.o
[2012-07-12 20:48:59 -0400] knuckolls: awesome
[2012-07-12 20:49:10 -0400] knuckolls: i have a branch that does auto clustering too
[2012-07-12 20:49:27 -0400] knuckolls: but i had to ask on the rabbitmq mailing list about how to clean up dead nodes
[2012-07-12 20:49:48 -0400] jtimberman: i saw the branch when i fetched
[2012-07-12 20:49:48 -0400] knuckolls: and they admitted that you basically can't without making a new node of the same name, and having it act like the dead node and remove itself
[2012-07-12 20:50:13 -0400] jtimberman: that seems suboptimal from a configuration management perspecive O.o
[2012-07-12 20:50:19 -0400] knuckolls: right
[2012-07-12 20:50:26 -0400] knuckolls: they freely admitted that it was a design flaw
[2012-07-12 20:50:26 -0400] dwhsix: anyboy wiling to look at this stacktrace from a chef run and help me understand why I'm getting "Gem::LoadError: Could not find highline (>= 1.6.9)" ?
[2012-07-12 20:50:31 -0400] dwhsix: https://gist.github.com/3100895
[2012-07-12 20:50:40 -0400] knuckolls: so what's in there for auto clustering is good enough
[2012-07-12 20:50:43 -0400] dwhsix: doesn't even seem to be any of my code...
[2012-07-12 20:50:53 -0400] knuckolls: if you want to try to merge that in, or i can try to send you a more proper pull request for it
[2012-07-12 20:51:55 -0400] pwf: anyone know why the chef-server gem installs to /usr/local/bin, but the init.d script in the chef gem points to /usr/bin on ubuntu?
[2012-07-12 20:52:37 -0400] knuckolls: jtimberman: there's quite a few changes in that branch actually, auto installing the management UI, setting custom data directories, and the auto clustering
[2012-07-12 20:52:58 -0400] knuckolls: we also have a branch that adds providers for adding/removing queues, bindings, and exchanges
[2012-07-12 20:53:42 -0400] knuckolls: i mostly just haven't cut it up into commits and sent the pull requests
[2012-07-12 20:56:24 -0400] Bonkers: where do gem_packages get installed to? how do I run them?
[2012-07-12 21:00:39 -0400] ivey: Bonkers: to the ruby gems directory of the ruby installation chef chooses to use at that point
[2012-07-12 21:00:47 -0400] ivey: ideally to wherever your system ruby is
[2012-07-12 21:01:06 -0400] Bonkers: what if there is none?
[2012-07-12 21:01:07 -0400] ivey: but if there is no system ruby, with omnibus it will go to /opt/chef/embedded/lib...
[2012-07-12 21:01:15 -0400] Bonkers: ah, thanks
[2012-07-12 21:01:43 -0400] ivey: once chef_gem gets more established, I think gem_package should warn/fail if installing to omnibus embedded ruby
[2012-07-12 21:01:51 -0400] javawidget: can I override an attribute from an environment for just a single node?
[2012-07-12 21:01:55 -0400] ivey: because that's almost never what you want
[2012-07-12 21:01:59 -0400] ivey: javawidget: yes
[2012-07-12 21:02:11 -0400] javawidget: can you point me in the right direction?
[2012-07-12 21:02:35 -0400] ivey: javawidget: http://wiki.opscode.com/display/chef/Attributes shows the attribute precendence
[2012-07-12 21:03:07 -0400] dwhsix: ivey: +1 I've been bittin by that a few times
[2012-07-12 21:03:11 -0400] dwhsix: *bitten
[2012-07-12 21:03:37 -0400] javawidget: chef-client -j
[2012-07-12 21:03:40 -0400] javawidget: ?
[2012-07-12 21:03:43 -0400] ivey: dwhsix: worst part is that we were installing ruby in a recipe, so the second run would work
[2012-07-12 21:04:43 -0400] dwhsix: ouch
[2012-07-12 21:06:46 -0400] hoover_damm: ivey_off, installing ruby in a recipe? lol
[2012-07-12 21:06:51 -0400] hoover_damm: sounds familar
[2012-07-12 21:07:30 -0400] hoover_damm: then again I see nothing wrong with that if you use omnibus and your reinstalling system ruby
[2012-07-12 21:07:34 -0400] hoover_damm: just have to do it with care
[2012-07-12 21:07:45 -0400] ivey: yeah we're trying hard to use base OS + omnibus bootstrap and do the rest in recipes
[2012-07-12 21:07:49 -0400] ivey: so base OS has no ruby
[2012-07-12 21:07:58 -0400] ivey: and then add system ruby only if we need it
[2012-07-12 21:08:17 -0400] hoover_damm: if your not a ruby shop
[2012-07-12 21:08:20 -0400] hoover_damm: should be easy
[2012-07-12 21:08:55 -0400] javawidget: ok..
[2012-07-12 21:08:56 -0400] javawidget: so..
[2012-07-12 21:09:10 -0400] javawidget: I created a json file with the "default_attributes"
[2012-07-12 21:09:20 -0400] javawidget: and ran chef-client -j my.json
[2012-07-12 21:09:59 -0400] javawidget: I also tried override_attributes in the json file.
[2012-07-12 21:12:37 -0400] javawidget: Got it! :)
[2012-07-12 21:12:44 -0400] javawidget: ls
[2012-07-12 21:12:57 -0400] javawidget: I just needed to specify the attribute in the json.
[2012-07-12 21:13:00 -0400] javawidget: very cool.
[2012-07-12 21:13:04 -0400] ivey: javawidget: cool
[2012-07-12 21:13:09 -0400] javawidget: thank you.
[2012-07-12 21:13:21 -0400] ivey: sure!
[2012-07-12 21:47:17 -0400] acqant: I'm heading down the wrong path.  Need some help.
[2012-07-12 21:47:19 -0400] acqant: search(:node, "role:r-iptables") do |matched_node|
[2012-07-12 21:47:25 -0400] acqant: if matched_node.to_s == "node[#{node['fqdn']}]" then
[2012-07-12 21:47:28 -0400] acqant: ICK
[2012-07-12 21:48:09 -0400] acqant: I want to apply iptables files to nodes based on if they are in a role and also which environment that node is in
[2012-07-12 21:48:31 -0400] acqant: The text returned from searches is throwing me off.
[2012-07-12 21:52:37 -0400] barefoot: acqant: like search(:node, 'role:iptables AND chef_environment:#{node.chef_environment}") ?
[2012-07-12 21:54:11 -0400] acqant: I was trying  node:Environment as if it was an attribute of the matched nodes
[2012-07-12 21:55:28 -0400] acqant: I want to change the source file location based on the environment
[2012-07-12 22:05:32 -0400] acqant: this worked
[2012-07-12 22:05:34 -0400] acqant: search(:node, "role:r-iptables") do |matched_node|
[2012-07-12 22:05:52 -0400] acqant: then if matched_node.to_s == "node[#{node['fqdn']}]" and node['domain'] =~ /site3/
[2012-07-12 22:06:06 -0400] acqant: thanks
[2012-07-12 22:08:21 -0400] jtimberman: joemiller: actually, yo ;) since this is chef related, not sensu :D - COOK-1438, due to another pull request that i merged, yours won't merge cleanly (per the pull request UI). I'll go ahead and just add fedora to the list in the case statement adn close it out.
[2012-07-12 22:12:54 -0400] lastobelus: I can't figure out how the new non-databag style of application cookbook is supposed to integrate with the database cookbook, and where I set usernames and passwords now.
[2012-07-12 22:13:44 -0400] JasonBox: Oh
[2012-07-12 22:15:48 -0400] lastobelus: anyone of know of an example using the new non-databag application cookbook?
[2012-07-12 22:18:41 -0400] barefoot: where can I find documentation for "supports" as in "supports this OS" in this example? https://github.com/opscode/cookbooks/blob/master/nagios/metadata.rb#L18
[2012-07-12 22:21:21 -0400] joemiller: jtimberman: ok. thank you
[2012-07-12 22:21:26 -0400] spokrandt: getting NoMethodError: undefined method `[]' for :array:Symbol   could someone take a look at http://pastebin.com/WN2GDNgn  and help me out?
[2012-07-12 22:24:28 -0400] gdey: your issue is #{:array['id']}.war symbols can not be used as hashes.
[2012-07-12 22:24:33 -0400] gdey: are you sure it's :array?
[2012-07-12 22:25:38 -0400] spokrandt: in the recipe I'm getting data out of a databage and using it.    how is it passed into a define?
[2012-07-12 22:26:25 -0400] gdey: well in a define you use the params[:array] to get the value
[2012-07-12 22:26:39 -0400] gdey: so it should be params[:array]['id']
[2012-07-12 22:26:52 -0400] spokrandt: thank you..
[2012-07-12 22:27:27 -0400] gdey: I think that's what you want. Had to look up how define worked. (http://wiki.opscode.com/display/chef/Definitions)
[2012-07-12 22:27:29 -0400] gdey: NP.
[2012-07-12 22:35:52 -0400] jtimberman: FYI: rabbitmq cookbook version 1.5.0 released with some cool changes. (/cc joemiller knuckolls)
[2012-07-12 22:36:02 -0400] jtimberman: it depends on apt cookbook 1.4.4, so make sure you update that too
[2012-07-12 22:37:50 -0400] miah: nice
[2012-07-12 22:38:04 -0400] jtimberman: miah: AND IT WORKS ON CENTOS
[2012-07-12 22:38:04 -0400] jtimberman: :P
[2012-07-12 22:47:21 -0400] hoover_damm: someday the distro santacaluse will show up on our doorstop and tell us suprise... i'm going to leave a new brick on your door
[2012-07-12 22:47:24 -0400] hoover_damm: a new distro to deal with
[2012-07-12 22:47:26 -0400] hoover_damm: merry x-mas
[2012-07-12 22:47:38 -0400] c_t: it's a Christmas miracle
[2012-07-12 22:48:14 -0400] hoover_damm: Honestly what I want is a distro that can grok chef from the inside out
[2012-07-12 22:48:27 -0400] hoover_damm: I want to be able to use chef to preseed/configure almost every part I can of said package
[2012-07-12 22:48:38 -0400] hoover_damm: without jumping through 8 hoops of fire
[2012-07-12 22:49:13 -0400] hoover_damm: it's like package "percona-server" do configure_options settings.to_json end
[2012-07-12 22:49:28 -0400] hoover_damm: and when the distro goes to update the package it respects what chef set and doesn't freak out
[2012-07-12 22:49:31 -0400] hoover_damm: if you do that
[2012-07-12 22:49:45 -0400] hoover_damm: rocket science i know
[2012-07-12 22:51:15 -0400] barefoot: how would you exit a recipe without halting the entire run?
[2012-07-12 22:52:54 -0400] Majost: Try: exit!(0)
[2012-07-12 22:53:04 -0400] Majost: I'm guessing though
[2012-07-12 22:56:28 -0400] jtimberman: barefoot: return
[2012-07-12 22:57:07 -0400] barefoot: ty, just saw that on http://lists.opscode.com/sympa/arc/chef/2012-04/msg00266.html
[2012-07-12 22:57:54 -0400] hcastro: jtimberman: you still think there is value in http://tickets.opscode.com/browse/COOK-1382 ?
[2012-07-12 23:02:27 -0400] jtimberman: hcastro: hey there
[2012-07-12 23:02:36 -0400] jtimberman: hcastro: in making a resource attribute to control it?
[2012-07-12 23:03:11 -0400] jtimberman: there was another ticket http://tickets.opscode.com/browse/COOK-1381
[2012-07-12 23:03:17 -0400] hcastro: jtimberman: yeah -- i was unaware of the run context nuances
[2012-07-12 23:03:29 -0400] jtimberman: which leads me to believe some folks might want to be able to do that
[2012-07-12 23:03:45 -0400] jtimberman: i run apt-get update out of cron every minute anyway. (kidding!)
[2012-07-12 23:03:51 -0400] jtimberman: :)
[2012-07-12 23:04:36 -0400] hcastro: so then you just want it to default to true?
[2012-07-12 23:04:45 -0400] jtimberman: hcastro: if it were there yeah, i would.
[2012-07-12 23:04:59 -0400] jtimberman: thats the least surprising thing to me
[2012-07-12 23:05:14 -0400] jtimberman: (and i'm lazy and don't want to update the 8 other cookbooks using apt_repository)
[2012-07-12 23:05:27 -0400] hcastro: only reason why i defaulted to false was because before i wrote the patch, that's how it was working
[2012-07-12 23:05:37 -0400] jtimberman: ah indeed.
[2012-07-12 23:06:05 -0400] jtimberman: i think that is a side effect bug of the conversion that happened in an earlier ticket
[2012-07-12 23:06:10 -0400] hcastro: although i wasn't sure if i caught master in a bad state and whatever the last official release had it working immediately
[2012-07-12 23:06:12 -0400] jtimberman: it used to update immediately
[2012-07-12 23:06:19 -0400] hcastro: i see
[2012-07-12 23:06:22 -0400] jtimberman: it just wasnt' a notification
[2012-07-12 23:07:14 -0400] hcastro: i'll update the default to true and see what people
[2012-07-12 23:07:17 -0400] hcastro: think
[2012-07-12 23:08:23 -0400] hcastro: jtimberman: hard work on the community cookbooks is appreciated btw
[2012-07-12 23:08:55 -0400] pwf: what happens if you specify a recipe in a run list twice
[2012-07-12 23:09:11 -0400] pwf: does it run it twice, or just the first occurrence?
[2012-07-12 23:09:54 -0400] pwf: nevermind, found the answer.
[2012-07-12 23:09:58 -0400] pwf: i am terrible at google
[2012-07-12 23:10:31 -0400] jtimberman: hcastro: :D
[2012-07-12 23:36:06 -0400] timsmith: Does anyone use the check_solr.rb nagios check to check their solr installs?

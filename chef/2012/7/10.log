[2012-07-10 00:00:00 -0400] eft: any ideas how to do it the chef way?
[2012-07-10 00:04:33 -0400] miah: juliancdunn: ya.
[2012-07-10 00:07:56 -0400] hoover_damm: miah, i bet yum doesn't even grok the version right
[2012-07-10 00:28:43 -0400] jameson: aww man
[2012-07-10 00:29:01 -0400] jameson: need a few more nodess
[2012-07-10 01:17:32 -0400] littonj: I'm having an issue with chef-server(10.12.0) connecting to rabbitmq(1.7.2). chef-expander can connect without issue, but when I try to start chef-server I get a "cannot connect" and a "bad header" in the rabbitmq.log file
[2012-07-10 01:17:38 -0400] littonj: has anyone seen this?
[2012-07-10 01:33:51 -0400] littonj: This was apparently due to using an old version of rabbitmq with the latest version of chef.
[2012-07-10 01:34:31 -0400] hoover_damm: any reason so old?
[2012-07-10 01:34:33 -0400] hoover_damm: or just cuz?
[2012-07-10 01:35:08 -0400] ttilley: is it possible or sane to perform provisioning that requires rebooting, then continuing where left off after reboot?
[2012-07-10 01:41:07 -0400] hoover_damm: ttilley, not without leaving tons of nasty not_if's
[2012-07-10 01:41:22 -0400] ttilley: ugh
[2012-07-10 01:42:10 -0400] littonj: rabbitmq was old because I was using the ubuntu 10.04 package. I don't recall a version requirement in the docs, either
[2012-07-10 01:42:37 -0400] griff: Hello, new to chef having trouble with prolly something simple can i have some expertise?
[2012-07-10 01:42:54 -0400] hoover_damm: ttilley, my last roll with chef as my provisioning manager was using a gold image and just running chef on the loopback image
[2012-07-10 01:43:01 -0400] hoover_damm: ttilley, and then pressing it up when i was done
[2012-07-10 01:43:22 -0400] hoover_damm: ttilley, just using chef's idempotent basic understandings to work around the bludgeoning
[2012-07-10 01:44:32 -0400] ttilley: hoover_damm: it's for a complex cloud cluster setup where the third party software ceases to function properly and requires a full system reboot when you switch it to the role it should have. (starts out as cluster-in-a-box, but then you assign it a role (mysql db + filesystem, or rabbitmq + neo4, or plain LXC container runner, etc) and a controller for it, and it requires a clean start)
[2012-07-10 01:44:37 -0400] ttilley: wow
[2012-07-10 01:44:43 -0400] ttilley: forgive the horrible run-on english there
[2012-07-10 01:44:58 -0400] ttilley: distracted by my 5  day old son
[2012-07-10 01:45:09 -0400] ttilley: who is ADORABLE
[2012-07-10 01:46:19 -0400] hoover_damm: ttilley, they are the best distractors ;)
[2012-07-10 01:46:22 -0400] hoover_damm: ttilley, and they keep us sane
[2012-07-10 01:46:35 -0400] ttilley: s/sane/tired/g
[2012-07-10 01:46:36 -0400] hoover_damm: ttilley, and ouch
[2012-07-10 01:46:36 -0400] ttilley: lol
[2012-07-10 01:46:45 -0400] ttilley: yeah.
[2012-07-10 01:47:32 -0400] hoover_damm: you usually end up cronning reboots at that point
[2012-07-10 01:47:41 -0400] hoover_damm: but that's pretty fail
[2012-07-10 01:48:03 -0400] ttilley: yeah...
[2012-07-10 01:48:33 -0400] ttilley: well. time to prepare myself for a state headache i suppose
[2012-07-10 01:50:59 -0400] hoover_damm: setup a local state machine?
[2012-07-10 01:51:13 -0400] dwhsix: anybody using the redis cookbook?
[2012-07-10 01:51:16 -0400] hoover_damm: and have something check if your state is broken and then sledgehammer it
[2012-07-10 01:51:16 -0400] dwhsix: failing for me with:
[2012-07-10 01:51:17 -0400] dwhsix: FATAL: Chef::Exceptions::Exec: user[redis] (redis::server line 58) had an error: Chef::Exceptions::Exec: usermod -u '335' redis returned 8, expected 0
[2012-07-10 01:51:36 -0400] dwhsix: which seems to be because it's running usermod when the redis user is logged in
[2012-07-10 01:51:42 -0400] hoover_damm: yep
[2012-07-10 01:51:46 -0400] hoover_damm: dwhsix, lol woop
[2012-07-10 01:51:59 -0400] hoover_damm: dwhsix, who's cookbook you using?
[2012-07-10 01:52:04 -0400] hoover_damm: there's many
[2012-07-10 01:52:18 -0400] dwhsix: ah the one listed at the community opscode site
[2012-07-10 01:52:19 -0400] dwhsix: hang on...
[2012-07-10 01:52:29 -0400] hoover_damm: there's many
[2012-07-10 01:52:37 -0400] dwhsix: rather: I just did knife cookbook site install redis
[2012-07-10 01:52:38 -0400] dwhsix: ;-)
[2012-07-10 01:53:01 -0400] dwhsix: better one to use?  I'm not particular...
[2012-07-10 01:53:30 -0400] hoover_damm: mine shouldn't produce that error but you have to use my sysctl cookbook
[2012-07-10 01:53:42 -0400] hoover_damm: as I force everyone to set vm.overcommit
[2012-07-10 01:53:52 -0400] hoover_damm: github.com/damm/
[2012-07-10 01:54:08 -0400] hoover_damm: I got burned by a few so I made my own
[2012-07-10 01:54:18 -0400] dwhsix: that should be ok with me, I'll give it a shot, thx
[2012-07-10 01:58:49 -0400] mhalligan: is it common to randomly get errors from hosted-chef about timeouts to s3?
[2012-07-10 02:23:18 -0400] tightwork: I have this http://dpaste.com/768836/ to create a directory recursive with certain permissions but it creates the directory with root perms, what gives?
[2012-07-10 02:44:25 -0400] barefoot: tightwork: maybe it should just be using the var, not "var" ?
[2012-07-10 02:44:38 -0400] barefoot: err "#{var}"
[2012-07-10 02:45:36 -0400] barefoot: meh, I see Im using it both ways
[2012-07-10 02:53:10 -0400] coderanger: fujin: Ping
[2012-07-10 04:19:08 -0400] fujin: coderanger: hey, missed your ping
[2012-07-10 04:19:10 -0400] fujin: coderanger: sup?
[2012-07-10 04:19:32 -0400] coderanger: fujin: Whats good to do in either christchurch or wellington? :)
[2012-07-10 04:19:33 -0400] fujin: my ERC highlighting has been playing up a little -_-
[2012-07-10 04:19:48 -0400] fujin: wellington has an impeccable selection of craft beer and splendid coffee
[2012-07-10 04:19:56 -0400] fujin: only city in all of nz to get a pourover or cold drip
[2012-07-10 04:20:01 -0400] fujin: I don't know; what do you like to do?
[2012-07-10 04:20:06 -0400] fujin: It's freezing. I'd avoid going outside if possible[.
[2012-07-10 04:20:28 -0400] fujin: Christchurch is more than likely going to be colder than Wellington, but close enough to the mountains that you could spend a day or two there if you wanted to..
[2012-07-10 04:21:15 -0400] fujin: wellington => Southern Cross, Malthouse, The Apartment, Hashigo Zake, The Tap Haus, Little Beer Quarter, Fork and Brewer, Kelburn Village Pub, The Bruhaus and D4 on Featherston.
[2012-07-10 04:22:05 -0400] fujin: coderanger: what are you doing in this horrible country?
[2012-07-10 04:22:27 -0400] coderanger: My mother is presenting at a conference in wellington at the end of august
[2012-07-10 04:22:41 -0400] fujin: oh! splendid. what field is your mother in?
[2012-07-10 04:22:43 -0400] coderanger: so we are making a grand tour of it
[2012-07-10 04:22:47 -0400] fujin: have you travelled to NZ before?
[2012-07-10 04:22:55 -0400] coderanger: Its some digial fabrication thing run by MIT
[2012-07-10 04:22:58 -0400] fujin: golly
[2012-07-10 04:23:02 -0400] coderanger: http://cba.mit.edu/events/12.08.FAB8/index.html
[2012-07-10 04:23:37 -0400] fujin: that's very neat
[2012-07-10 04:23:53 -0400] fujin: august is prime wintering. I'd highly recommend the skifields
[2012-07-10 04:23:59 -0400] fujin: snowboard or skiier? Neither?
[2012-07-10 04:24:06 -0400] coderanger: Not in many years :)
[2012-07-10 04:24:20 -0400] fujin: ah. nor me I'm afraid (i wish!) always seem to miss it.
[2012-07-10 04:28:31 -0400] coderanger: Plan right now is 4 days in sydney, 4 days in chc, and then 7 days in wellington
[2012-07-10 04:29:01 -0400] fujin: oh, in that case. book a tour or something man
[2012-07-10 04:29:08 -0400] fujin: fucked if I know about touristy shit -- I'm a local
[2012-07-10 04:29:20 -0400] fujin: i been to wellington maybe 4 times, only ever drive through it :)
[2012-07-10 04:29:24 -0400] fujin: christchurch only once :)
[2012-07-10 04:29:44 -0400] fujin: if you get your mum drunk on craft beer the whole week
[2012-07-10 04:29:52 -0400] fujin: she will probably not enjoy herself (maybe?!)
[2012-07-10 04:33:10 -0400] coderanger: hah, I think we are going to try and find more like "go see the sheep fields" kind of stuff
[2012-07-10 04:34:12 -0400] coderanger: derpp, BoA flagged buying several thousand worth of airline tickets as possible fraud, probably for the best :)
[2012-07-10 04:34:34 -0400] fujin: ain't no damn sheep man
[2012-07-10 04:34:46 -0400] fujin: you gotta go to like a farm show
[2012-07-10 04:34:47 -0400] fujin: to see sheep
[2012-07-10 04:45:49 -0400] BryanWB: is there is a way to write a function in  my_cookbook/libraries/default.rb and use it a template?
[2012-07-10 04:49:21 -0400] coderanger: Sure, just use it?
[2012-07-10 04:53:53 -0400] BryanWB: for some reason i had it in my head that I had to do something funky like Chef::Recipe.send   , had to do that a while ago to use methods in attributes/default.rb
[2012-07-10 04:53:56 -0400] BryanWB: iirc
[2012-07-10 04:56:26 -0400] fujin: umm
[2012-07-10 04:56:34 -0400] fujin: BryanWB: yeah, you are right
[2012-07-10 04:56:39 -0400] fujin: it's kind of tricky, here lemme show ya
[2012-07-10 04:57:00 -0400] fujin: BryanWB: https://github.com/fujin/chef-discovery/blob/master/libraries/recipe.rb#L17
[2012-07-10 04:57:14 -0400] BryanWB: fujin, perfect, tks!
[2012-07-10 04:57:14 -0400] fujin: if you wanted to discovery_foo inside of a template
[2012-07-10 04:57:21 -0400] fujin: you'd obviously want to extend that one too.
[2012-07-10 04:57:31 -0400] BryanWB: that will totally clean up my insane logstash template
[2012-07-10 04:57:34 -0400] fujin: BryanWB: some people choose to extend Chef::Provider as well so you can discovery_foo in the LWRPz.
[2012-07-10 04:57:58 -0400] BryanWB: btw, pull request to add rhel support to graphite cookbook coming
[2012-07-10 04:58:05 -0400] fujin: oh, sick :)
[2012-07-10 05:05:45 -0400] miah: hi
[2012-07-10 05:05:56 -0400] BryanWB: miah, hello!
[2012-07-10 05:06:30 -0400] miah: oh
[2012-07-10 05:06:31 -0400] miah: i see
[2012-07-10 05:07:08 -0400] miah: fujin: this is awesome
[2012-07-10 05:07:43 -0400] fujin: miah: what is awesome
[2012-07-10 05:08:14 -0400] miah: that code you linked
[2012-07-10 05:08:20 -0400] fujin: ah
[2012-07-10 05:08:23 -0400] miah: i guess i need to read the Recipe class now
[2012-07-10 05:09:03 -0400] fujin: It's a rather nice class.
[2012-07-10 05:11:09 -0400] fujin: using the send/include trick in that manner allows me to construct pseudo-DSL extensions that do not require the operator to pass in the 'node' from the recipe
[2012-07-10 05:11:12 -0400] fujin: so they kind of act natural
[2012-07-10 05:11:21 -0400] fujin: pleasant or whatever -__
[2012-07-10 06:14:44 -0400] BryanWB: reset, good evening ;)
[2012-07-10 06:15:27 -0400] reset: hey BryanWB, did you want to chat a few about that github issue?
[2012-07-10 06:15:36 -0400] BryanWB: reset, if u have a minute, yes
[2012-07-10 06:15:41 -0400] reset: sure thing
[2012-07-10 06:15:58 -0400] BryanWB: reset, 1st it would be super helpful if u could tell me how u develop using berkshelf
[2012-07-10 06:16:33 -0400] reset: we develop cookbooks in solidarity and follow the single responsibility principle
[2012-07-10 06:16:46 -0400] reset: every cookbook has a vagrant file and every cookbook has a berksfile
[2012-07-10 06:17:08 -0400] reset: the develop changes the vagrant file as he is testing things out
[2012-07-10 06:17:16 -0400] reset: but by default it just boots the default recipe
[2012-07-10 06:17:52 -0400] reset: every cookbook lives in it's own git repository
[2012-07-10 06:18:00 -0400] reset: and all of those have their own build server job
[2012-07-10 06:18:16 -0400] reset: after every commit into the master brancha  new build is run and the version is incremented
[2012-07-10 06:18:32 -0400] reset: and then it, and it's dependencies, are uploaded to a Chef Server
[2012-07-10 06:18:45 -0400] reset: we treat our cookbooks like any other software project
[2012-07-10 06:19:22 -0400] BryanWB: kewl
[2012-07-10 06:19:31 -0400] reset: I'm working on a set of articles / guides which will be used internally at RIot for training
[2012-07-10 06:19:44 -0400] reset: and then shortly after published to the public
[2012-07-10 06:19:54 -0400] BryanWB: so the Berksfile  as "record of all our corporate cookbooks" is really an anti-pattern
[2012-07-10 06:20:16 -0400] reset: there are quite a few best practices that we follow internally that we should really communicate out to the community
[2012-07-10 06:20:35 -0400] BryanWB: reset, hmm, when u thinking of publishing these articles?
[2012-07-10 06:20:48 -0400] reset: BryanWB: yes, that is exactly why we built Berkshelf
[2012-07-10 06:21:14 -0400] reset: the original recommendation from Opscode to keep everything in your chef-repo is a really, really, poor idea
[2012-07-10 06:21:26 -0400] reset: hopefully in a few weeks. I need to write them first
[2012-07-10 06:21:52 -0400] BryanWB: think u could come on foodfightshow 1st week of August to talk about this process?
[2012-07-10 06:21:56 -0400] reset: before I write them I need to add two additional source locations for the Berksfile to accept
[2012-07-10 06:22:20 -0400] reset: yeah I need to run it by my legal department but I am sure they'll be just fine
[2012-07-10 06:22:46 -0400] reset: just let me know what day and time and if you have anything else you usually send somebody
[2012-07-10 06:22:51 -0400] reset: jamie@vialstudios.com
[2012-07-10 06:22:55 -0400] BryanWB: ok, can we plan on it then? would be gr8 to have u and Ivey.
[2012-07-10 06:23:06 -0400] reset: ya we can get Ivey in there too
[2012-07-10 06:23:14 -0400] reset: and should
[2012-07-10 06:23:19 -0400] BryanWB: r u awake mornings PST? u in LA btw?
[2012-07-10 06:23:28 -0400] reset: I'm in LA
[2012-07-10 06:23:59 -0400] BryanWB: nice, I'm from Whittier, or the Beverly Hills of East LA as we like to call it
[2012-07-10 06:23:59 -0400] reset: August 2-5th I won't be available, but any other day around that
[2012-07-10 06:24:31 -0400] reset: Riot is located in Santa Monica, super nice out there ;)
[2012-07-10 06:24:52 -0400] BryanWB: u in SM as well?
[2012-07-10 06:24:56 -0400] reset: ya
[2012-07-10 06:25:02 -0400] BryanWB: damn, super envy
[2012-07-10 06:26:49 -0400] BryanWB: ok, so when u want to do cookbook maintenance, u typically do a fresh git clone rather than working w/ old files?
[2012-07-10 06:27:34 -0400] reset: if you're working on a cookbook
[2012-07-10 06:27:41 -0400] reset: you keep a clone of it on your drive
[2012-07-10 06:27:43 -0400] reset: or you reclone it
[2012-07-10 06:28:11 -0400] reset: if you have a cookbook with a dependency that also needs modifications
[2012-07-10 06:28:18 -0400] reset: for example, say we're building a web application
[2012-07-10 06:28:24 -0400] reset: you have one cookbook for the application
[2012-07-10 06:28:28 -0400] reset: let's call it "myapp"
[2012-07-10 06:28:37 -0400] reset: and then you have another cookbook for say the web server, "nginx"
[2012-07-10 06:28:57 -0400] reset: you can clone both to your disk
[2012-07-10 06:29:16 -0400] reset: and then modify the berksfile located in "myapp" with a path source location pointing to your on local disk clone of NGINX
[2012-07-10 06:29:35 -0400] BryanWB: hmm, this is where a Berksfile.local  would come in handy
[2012-07-10 06:29:40 -0400] reset: this will allow you to make changes to your "myapp" cookbook and then when you need to make modifications to "nginx", you'd just be able to
[2012-07-10 06:29:50 -0400] reset: what would that do?
[2012-07-10 06:30:13 -0400] BryanWB: override cookbook sources in Berksfile
[2012-07-10 06:30:17 -0400] BryanWB: but not be checked into git
[2012-07-10 06:30:21 -0400] reset: that exists
[2012-07-10 06:30:31 -0400] reset: cookbook "nginx", path: "~/code/nginx-cookbook"
[2012-07-10 06:30:38 -0400] reset: you would put something like that in your Berksfile
[2012-07-10 06:30:43 -0400] BryanWB: but that is in Berksfile and in git
[2012-07-10 06:31:02 -0400] BryanWB: wouldn't u not want to track temporary changes needed for testing?
[2012-07-10 06:31:20 -0400] reset: oh sure, you can just ignore the changes in the Berksfile that you made as you went
[2012-07-10 06:31:31 -0400] reset: or you coule also copy it to Berskfile.local, or anything else you'd like to call it
[2012-07-10 06:31:41 -0400] reset: since you can specify the location of the Berksfile on the command line when you invoke berks
[2012-07-10 06:31:49 -0400] reset: it doesn't ACTUALLY need to be called Berksfile
[2012-07-10 06:31:53 -0400] reset: it could be called anything
[2012-07-10 06:32:07 -0400] reset: this is up to you
[2012-07-10 06:33:03 -0400] BryanWB: reset, how do rioters find all the corporate cookbooks? a wiki page w/ the list?
[2012-07-10 06:33:27 -0400] BryanWB: or in your private git acct,   each one prefaced w/ 'cookbook-*' ?
[2012-07-10 06:33:34 -0400] reset: no, they are all located in our internal github server or on our riotgames public account
[2012-07-10 06:33:42 -0400] reset: there is one more way, though
[2012-07-10 06:33:46 -0400] reset: and this is coming in the next few days
[2012-07-10 06:34:04 -0400] reset: I'm adding a chef_api source location
[2012-07-10 06:34:13 -0400] reset: which will allow you to say, "get the cookbook out of my Chef Server"
[2012-07-10 06:34:22 -0400] BryanWB: ah, neat
[2012-07-10 06:34:28 -0400] reset: and since we automatically put our cookbooks in the Chef Server after every change
[2012-07-10 06:34:32 -0400] reset: (as I mentioned a bit earlier)
[2012-07-10 06:34:49 -0400] reset: everyone can, and should, be pulling their dependencies out of the Chef Server
[2012-07-10 06:35:16 -0400] reset: this is something very different than the norm for how the community has done things in the past
[2012-07-10 06:35:23 -0400] reset: that's why I'm writing the articles I mentioned
[2012-07-10 06:35:51 -0400] reset: basically we are treating Chef Servers as artifact servers and giving you the ability to pull "blessed" artifacts out of it to work with
[2012-07-10 06:36:09 -0400] BryanWB: kewl
[2012-07-10 06:36:13 -0400] reset: this feature was so important to us that I moved it up higher than Windows support
[2012-07-10 06:36:25 -0400] reset: so now 0.4.0 will release with this and the foundations of Windows support
[2012-07-10 06:36:29 -0400] reset: and 0.5.0 will include Windows support
[2012-07-10 06:39:09 -0400] reset: BryanWB: does this help you so far?
[2012-07-10 06:39:19 -0400] BryanWB: reset, it does, very helpful
[2012-07-10 06:39:33 -0400] reset: one of the guides I'm going to create will walk somebody through what it is like to develop a cookbook from start to finish
[2012-07-10 06:39:41 -0400] BryanWB: will have to think about how to present it to others on my team
[2012-07-10 06:39:51 -0400] BryanWB: s/will/i will/
[2012-07-10 06:39:54 -0400] reset: I'm going to try to give it to every Riot engineer after they go through the basic Opscode training
[2012-07-10 06:40:16 -0400] reset: it'll be generic enough that I can give it to the community
[2012-07-10 06:40:25 -0400] reset: hopefully this will help train your guys too
[2012-07-10 06:41:59 -0400] BryanWB: reset, is 9am pst too early for u?
[2012-07-10 06:41:59 -0400] BryanWB: for interview
[2012-07-10 06:42:08 -0400] BryanWB: that will be gr8
[2012-07-10 06:42:16 -0400] reset: I wake up at 1130am, but I can manage
[2012-07-10 06:42:18 -0400] reset: haha
[2012-07-10 06:43:35 -0400] reset: I think 9 will be ok for Ivey as well - he's on EST time
[2012-07-10 06:46:21 -0400] reset: BryanWB: what day were you thinking?
[2012-07-10 06:46:28 -0400] BryanWB: reset, Aug 1st
[2012-07-10 06:46:41 -0400] BryanWB: a wednesday
[2012-07-10 06:46:48 -0400] reset: works for me
[2012-07-10 06:46:57 -0400] BryanWB: invite coming
[2012-07-10 06:50:31 -0400] nmistry: hi all,  i am trying to deal with a /etc/network/interfaces that gets automatically generated by my provider,and want to append items to the end of the file.  any suggestions?
[2012-07-10 06:52:05 -0400] flaccid_: nmistry: run chef after the provider does its thing
[2012-07-10 06:52:26 -0400] reset: BryanWB: got it. I'm gonna grab some dinner - was there anything else you wanted to know in the immediate?
[2012-07-10 06:52:31 -0400] nmistry: thanks flaccid_ , what happens when the system reboots and replaces the file?
[2012-07-10 06:52:50 -0400] flaccid_: nmistry: chef should run again and reconverge to re-manage the file
[2012-07-10 06:52:52 -0400] BryanWB: reset, nope, have a gr8 night! tks for your help
[2012-07-10 06:52:59 -0400] specialsauce: nmistry, are you wanting to add extra interfaces or just to some stuff you can add in post-up type files etc?
[2012-07-10 06:52:59 -0400] reset: no prob man! You too!
[2012-07-10 06:53:13 -0400] nmistry: what about if it specialsauce i want to add a bridge and a tunnel
[2012-07-10 06:53:21 -0400] nmistry: sorry  specialsauce i want to add a bridge and a tunnel
[2012-07-10 06:53:38 -0400] nmistry: debian squeeze does not have interfaces.d yet
[2012-07-10 06:53:42 -0400] nmistry: otherwise iw ould have used that
[2012-07-10 06:53:46 -0400] specialsauce: yeah
[2012-07-10 06:54:14 -0400] nmistry: wish chef had the option to check for block markers in a file.. and if they exist, the template applies in there
[2012-07-10 06:54:19 -0400] specialsauce: i would have thought you could handle that in post-up type scripts maybe? and leave the interfaces file alone? don't know, dn't often mess with network stuff these days :-)
[2012-07-10 06:54:29 -0400] nmistry: hrm
[2012-07-10 06:54:31 -0400] nmistry: maybe
[2012-07-10 06:54:34 -0400] nmistry: thats an idea
[2012-07-10 06:55:18 -0400] flaccid_: thats a pretty good idea
[2012-07-10 06:55:42 -0400] flaccid_: but unless your provider does a regular update of the file there is no reason chef can't manage it
[2012-07-10 06:56:00 -0400] nmistry: i would have to rewirte the entire file though right?
[2012-07-10 06:56:20 -0400] flaccid_: thats what chef templates are for
[2012-07-10 06:56:35 -0400] nmistry: hrm, its pretty complicated, two interfaces, routes, etc
[2012-07-10 06:57:09 -0400] flaccid_: if its static, put it in the template, if not you can get those out of the file before writing the template with those variables
[2012-07-10 06:57:47 -0400] flaccid_: or not get it out of the template but rather via ohai or other system interfaces
[2012-07-10 06:58:45 -0400] nmistry: hm, but then its really provider specific
[2012-07-10 06:59:00 -0400] nmistry: i get your point flaccid_  just need to figure out how i wanna skin this cat.
[2012-07-10 06:59:14 -0400] flaccid_: its not provider specific at all
[2012-07-10 07:00:01 -0400] flaccid_: here is an example of this kind of thing i guess https://github.com/flaccid/cookbooks/blob/master/cookbooks/resolver/recipes/default.rb
[2012-07-10 07:00:09 -0400] nmistry: k
[2012-07-10 07:00:10 -0400] nmistry: reading
[2012-07-10 07:00:25 -0400] flaccid_: but i don't know exactly what your provider is doing, why and how regularly..
[2012-07-10 07:00:48 -0400] nmistry: oh shit just figured out how to it easliy
[2012-07-10 07:00:51 -0400] nmistry: (pardon)
[2012-07-10 07:01:03 -0400] nmistry: just check to see if the interface br0 or whatever exists
[2012-07-10 07:01:07 -0400] nmistry: if it does not, add it
[2012-07-10 07:01:23 -0400] nmistry: if the sytem reboots and replaces my config, then it will just re-add
[2012-07-10 07:01:34 -0400] flaccid_: right, thats just avoiding system config
[2012-07-10 07:02:11 -0400] nmistry: so node['
[2012-07-10 07:02:37 -0400] nmistry: sorry check for  node['network']['interfaces']['br0']
[2012-07-10 07:03:07 -0400] nmistry: does that make sense?
[2012-07-10 07:03:17 -0400] flaccid_: its not entirely desirable but yeah
[2012-07-10 07:03:27 -0400] nmistry: ok, what do you recommned?
[2012-07-10 07:03:41 -0400] flaccid_: what i already recommended :)
[2012-07-10 07:03:44 -0400] nmistry: oh
[2012-07-10 07:03:47 -0400] nmistry: hehe.
[2012-07-10 07:03:52 -0400] nmistry: kinda knew you were going to say that.
[2012-07-10 07:04:00 -0400] flaccid_: but there probably is no harm in doing it as you suggest
[2012-07-10 07:04:32 -0400] nmistry: looking at the example again, are you referring to how it handles /etc/resolv.conf?
[2012-07-10 07:04:32 -0400] flaccid_: like with an execute resource and not_if on node['network']['interfaces']['br0']
[2012-07-10 07:04:56 -0400] flaccid_: instead of getting the nameserver values from /etc/resolv.conf, it uses dnsruby to get them
[2012-07-10 07:05:15 -0400] flaccid_: this is like dynamic config without direct edit or datamine
[2012-07-10 07:06:43 -0400] nmistry: oh i see now
[2012-07-10 07:06:48 -0400] nmistry:  nameservers = Dnsruby::Config::new::nameserver()
[2012-07-10 07:06:55 -0400] nmistry: (not familiar w/ dnsruby)
[2012-07-10 07:06:55 -0400] flaccid_: yep
[2012-07-10 07:07:10 -0400] flaccid_: neither was or am i still
[2012-07-10 07:07:46 -0400] nmistry: lets see if i understand this right, if resolver/nameservers is not provided by chef, grab em from resolv.conf.
[2012-07-10 07:08:37 -0400] nmistry: circular dependency that gets broken only when chef passes in something new
[2012-07-10 07:08:39 -0400] nmistry: hm
[2012-07-10 07:08:42 -0400] nmistry: interesting trick
[2012-07-10 07:10:20 -0400] flaccid_: i guess so yeah
[2012-07-10 07:10:41 -0400] flaccid_: if you don't specify them, the existing ones are re-used
[2012-07-10 07:10:42 -0400] flaccid_: graceful degradation ftw
[2012-07-10 07:10:57 -0400] nmistry: yea, that is nice
[2012-07-10 07:11:29 -0400] flaccid_: chef with templates i feel is like mvc
[2012-07-10 07:11:38 -0400] flaccid_: or mvt
[2012-07-10 07:13:37 -0400] nmistry: one other question, any way to make chef reboot a machine when its finished running
[2012-07-10 08:50:36 -0400] DigitalFlux: Hi Folks
[2012-07-10 08:51:11 -0400] DigitalFlux: The the command line arguments of knife doesn't override the configuration in knife.rb
[2012-07-10 08:51:13 -0400] DigitalFlux: why is that ?
[2012-07-10 09:13:21 -0400] cnf: hmm
[2012-07-10 09:27:33 -0400] cnf: looking at librarian
[2012-07-10 09:33:19 -0400] fujin: cnf: look at berkshelf too! :)
[2012-07-10 09:34:56 -0400] cnf: o,O
[2012-07-10 09:35:27 -0400] cnf: that looks even more confusing
[2012-07-10 09:38:24 -0400] fujin: try to become less confused over time
[2012-07-10 09:45:02 -0400] cnf: useful ...
[2012-07-10 09:46:22 -0400] WilliamHerry: ERROR: EOFError: end of file reached when download cookbook, still can't solve it, some one please help
[2012-07-10 10:38:58 -0400] Aneel_: Hi
[2012-07-10 10:39:11 -0400] Aneel_: How to pass arguments to recipes?
[2012-07-10 10:39:49 -0400] Aneel_: Could please help on this?
[2012-07-10 10:40:29 -0400] cnf: Aneel_: you mean attributes?
[2012-07-10 10:40:47 -0400] cnf: Aneel_: do you have a specific cookbook you are using?
[2012-07-10 10:41:04 -0400] Aneel_: Yes. I have to pass some info and use that inside recipe
[2012-07-10 10:41:38 -0400] Aneel_: No. Want to get some file from outside into the system
[2012-07-10 10:41:49 -0400] Aneel_: using chef client
[2012-07-10 10:42:04 -0400] Aneel_: Name will be changes every time
[2012-07-10 10:43:05 -0400] zts: where does the name come from?
[2012-07-10 10:43:50 -0400] Aneel_: I will pass the name to recipe when calling
[2012-07-10 10:44:19 -0400] zts: recipes aren't called, though, they're placed on the run list
[2012-07-10 10:44:25 -0400] zts: so the only "arguments" are the node's attributes
[2012-07-10 10:44:45 -0400] zts: do you mean to pass the name in from outside?  (eg, in an environment variable, or the command line)
[2012-07-10 10:46:10 -0400] Aneel_: I am pushing this recipe with bootstrap.
[2012-07-10 10:47:29 -0400] Aneel_: This is more like deployment of tar ball using recipe
[2012-07-10 10:48:57 -0400] zts: If that's exactly what it is, then I'd probably suggest using the 'ark' cookbook, and pass the name of the file in using an attribute
[2012-07-10 10:48:59 -0400] zts: but I'm guessing
[2012-07-10 10:50:13 -0400] zts: perhaps you could gist/pastebin what you've got so far, and point out exactly what the problem is
[2012-07-10 10:51:08 -0400] Aneel_: Could you please provide ark cookbook link
[2012-07-10 10:51:27 -0400] zts: http://community.opscode.com/cookbooks/ark
[2012-07-10 10:53:34 -0400] Aneel_: Thanks a lot for link
[2012-07-10 10:53:51 -0400] Aneel_: I will try this & let you know the update
[2012-07-10 11:00:41 -0400] zts: no problem, good luck :)
[2012-07-10 11:08:00 -0400] dwhsix: hoover_damm: you around? tried your redis cookbook...
[2012-07-10 11:08:02 -0400] dwhsix: failed with:
[2012-07-10 11:08:55 -0400] dwhsix: Expected process to exit with [0], but received '1'
[2012-07-10 11:08:57 -0400] dwhsix: when running:
[2012-07-10 11:09:22 -0400] dwhsix:        /usr/bin/chpst -u root /usr/bin/sv restart /etc/service/redis_server
[2012-07-10 11:09:38 -0400] dwhsix: will gist full stacktrace
[2012-07-10 11:11:43 -0400] z: ssh node chef-client
[2012-07-10 11:12:02 -0400] z: ahh apparently i'm scrolled back 3 days and answering an old question
[2012-07-10 11:12:15 -0400] dwhsix: ha
[2012-07-10 11:14:45 -0400] dwhsix: hoover_damm: actually, looks like redis didn't get installed digging...
[2012-07-10 11:16:54 -0400] PapaSierra: i'm in need of installing pecl_http. i was thinking of writing a recipe to cover the 3 or 4 steps involved. one step is to add "extension=http.so" to php.ini. how do i go about doing that properly in chef?
[2012-07-10 11:24:10 -0400] laurent\: PapaSierra: ideally using a php lwrp that would maintain a pecl_http.ini in php conf.d dir
[2012-07-10 11:24:22 -0400] laurent\: don't know if the lwrp exists tho
[2012-07-10 11:25:27 -0400] PapaSierra: ah, so essentially instead of adding that one line of config into php.ini you can place it inside conf.d/ and it works the same/
[2012-07-10 11:25:38 -0400] laurent\: yep
[2012-07-10 11:26:03 -0400] PapaSierra: that's perfect :) on ubuntu, any guesses where i locate conf.d/?
[2012-07-10 11:26:16 -0400] laurent\: /etc/php5/
[2012-07-10 11:26:38 -0400] cnf: Aneel_: sorry, i had to step out, i'm at work
[2012-07-10 11:26:45 -0400] cnf: Aneel_: did you figure out your problem?
[2012-07-10 11:27:12 -0400] Aneel_: Please go ahead
[2012-07-10 11:27:27 -0400] Aneel_: No. Still working on that
[2012-07-10 11:27:39 -0400] cnf: Aneel_: right, so what is it you are trying to do?
[2012-07-10 11:28:07 -0400] Aneel_: Just want to deploy tar ball to chef client using bootstrap
[2012-07-10 11:28:35 -0400] Aneel_: But name will be change everytime
[2012-07-10 11:29:48 -0400] cnf: so you are writing your own cookbook?
[2012-07-10 11:29:59 -0400] cnf: Aneel_: and what will the name of the tarbal be?
[2012-07-10 11:30:23 -0400] Aneel_: <Applicationname>-version.tar.gz
[2012-07-10 11:30:38 -0400] cnf: Aneel_: ok, so the version changes every time?
[2012-07-10 11:31:11 -0400] Aneel_: Yes. tarbal will be available at http. Just to get it and extract on client
[2012-07-10 11:31:50 -0400] cnf: Aneel_: do you not contol the http target?
[2012-07-10 11:32:08 -0400] cnf: (ie, can't you make a -latest.tgz link?
[2012-07-10 11:33:15 -0400] Aneel_: That could be one option. But I have multiple applications on the http
[2012-07-10 11:33:31 -0400] cnf: Aneel_: you could always put it in your role, of course, but then you'd have to edit the role every time you update
[2012-07-10 11:34:02 -0400] cnf: weird way to distribute apps, though ^^;
[2012-07-10 11:34:33 -0400] Aneel_: Ok. What I am using this recipe in automation of deployment. So that could not help me out.
[2012-07-10 11:35:25 -0400] cnf: what is "that"?
[2012-07-10 11:35:58 -0400] PapaSierra: laurent\ i'm using this php cookbook. in the description they say it includes lwrps for pear and pecl packages. this sounds perfect. i'm installing pecl_http so i might have to add a recipe. i can see already it's adding stuff to conf.d/ so that concept is included. would you be able to point me in the direction of where it's doing this so i can then follow the patter to install pecl_http? https://github.com/Zeelot/vagrant-cookbooks/tree/fb3d46159c1bf9329
[2012-07-10 11:35:58 -0400] PapaSierra: d19a9beba3eaedb631b4c6/php
[2012-07-10 11:36:22 -0400] Aneel_: linking at http
[2012-07-10 11:36:36 -0400] PapaSierra: https://github.com/Zeelot/vagrant-cookbooks/tree/fb3d46159c1bf93293d19a9beba3eaedb631b4c6/php
[2012-07-10 11:37:00 -0400] cnf: Aneel_: why not? just have <appname>-latest.tgz link to <appname>-1.2.3.tgz
[2012-07-10 11:37:16 -0400] cnf: Aneel_: and -latest always points to the version you wan to deploy?
[2012-07-10 11:37:18 -0400] Aneel_: But you have given right clue. May be put each application in seperate sub directory
[2012-07-10 11:37:49 -0400] cnf: Aneel_: else, put an attribute in your role, and use that
[2012-07-10 11:37:49 -0400] Aneel_: I will change diectory structure at http
[2012-07-10 11:38:01 -0400] cnf: but again, then you'd have to edit the role every deploy
[2012-07-10 11:39:07 -0400] Aneel_: But I will use like this "knife bootstrap <node> -r recipe[deploy::<application>]"
[2012-07-10 11:39:23 -0400] Aneel_: this will get the -latest.tar.gz
[2012-07-10 11:40:17 -0400] Aneel_: cnf: thanks a lot for the inputs
[2012-07-10 11:40:25 -0400] cnf: Aneel_: no worries
[2012-07-10 11:41:43 -0400] cnf: Aneel_: btw, why don't you use roles, instead of defining specific recipes?
[2012-07-10 11:44:46 -0400] laurent\: PapaSierra: have you looked at the readme for the php cookbook ? https://github.com/opscode-cookbooks/php there are example on how to use the provider
[2012-07-10 11:45:42 -0400] PapaSierra: right, it's looking tantilisingly close to what i want. i've never used lwrps so i'm not sure yet how to use them and where to put that code. i'm using chef-solo. still reading up...
[2012-07-10 11:49:47 -0400] cnf: PapaSierra: btw, why don't you use -hosted?
[2012-07-10 11:50:38 -0400] PapaSierra: well on my dev machine i'm using vagrant with chef-solo and on the live server i'm only really working on one server so i guess i just use solo there too, no?
[2012-07-10 11:53:33 -0400] cnf: PapaSierra: -hosted is free for up to 5 nodes
[2012-07-10 11:53:38 -0400] cnf: PapaSierra: and imo well worth it
[2012-07-10 11:53:45 -0400] cnf: works better than -solo :P
[2012-07-10 11:54:03 -0400] PapaSierra: ok, thanks for the tip. from a workflow perspective what are the benefits?
[2012-07-10 11:54:18 -0400] cnf: no need to push files around
[2012-07-10 11:54:23 -0400] PapaSierra: do you use opscode recipes or you provide your own?
[2012-07-10 11:54:28 -0400] cnf: and -client can search attributes
[2012-07-10 11:54:33 -0400] cnf: -solo can not, afaik
[2012-07-10 11:54:36 -0400] cnf: PapaSierra: either
[2012-07-10 11:54:50 -0400] cnf: PapaSierra: you use knife to manage cookbooks / roles / userbags
[2012-07-10 11:54:53 -0400] cnf: data_bags
[2012-07-10 11:54:54 -0400] cnf: even
[2012-07-10 11:55:28 -0400] PapaSierra: ok, i'll take some time to look into it. chef is still a little mystical to me, working on solving that bug ;)
[2012-07-10 11:55:50 -0400] cnf: PapaSierra: also, pretty much all docs and cookbooks assume you are using -server or -hosted
[2012-07-10 11:56:05 -0400] cnf: PapaSierra: yeah it's a handful to sort out :P
[2012-07-10 11:56:33 -0400] PapaSierra: yeah i noticed. i find the docs a little hard to digest
[2012-07-10 11:57:37 -0400] cnf: uhu
[2012-07-10 11:57:40 -0400] cnf: so do i :P
[2012-07-10 11:59:16 -0400] PapaSierra: also, something that keeps baffling me is that when i try to use the official opscode cookbooks, and i'm doing everything by the book, i'm not pushing the boundaries at all, then suddenly i get a massive ruby stacktrace. i'm left wondering how is everyone using this stuff. something is a little off
[2012-07-10 11:59:38 -0400] cnf: PapaSierra: my experience exactly
[2012-07-10 12:00:22 -0400] PapaSierra: i'd love to meet a chef expert and just watch them in action so i can learn the techniques
[2012-07-10 12:00:32 -0400] kesor: most of the "official" opscode cookbooks are actually contributed from the community, and I find their maintenance (github.com/opscode-cookbooks) lacking in responsiveness.
[2012-07-10 12:01:10 -0400] kesor: from my experience, most cookbooks have several open pull requests that you abosolutely must merge yourself to make the cookbook not break.
[2012-07-10 12:02:11 -0400] cnf: yeah
[2012-07-10 12:02:15 -0400] cnf: it's sad :/
[2012-07-10 12:02:42 -0400] PapaSierra: right, the mysql cookbook has a show stopper in it. there's a pull request with a few +1s but no action taken, i then switched to percona because of that, it worked, but then i needed php 5.4.4 instead of 5.3.10 so then i added dotdeb as an apt repo and suddenly percona stopped working
[2012-07-10 12:02:48 -0400] PapaSierra: :S
[2012-07-10 12:02:49 -0400] kesor: and with no disrespect, but this channel is quite dead and getting some help is hard. some time ago when I was working with puppet the scenery is very different.
[2012-07-10 12:03:05 -0400] cnf: it's dead at european hours
[2012-07-10 12:03:12 -0400] cnf: it's quite active at US hours
[2012-07-10 12:04:20 -0400] cnf: but yeah, the cookbook state is something that irks me as well :P
[2012-07-10 12:04:51 -0400] yfeldblum: opscode uses jira, not github issues or pull requests; many of the pull requests to various opscode-supported cookbooks were done without creating a corresponding issue in jira
[2012-07-10 12:05:41 -0400] kesor: that is a very bad excuse to neglect their github repositories that their clients depend on.
[2012-07-10 12:05:44 -0400] cnf: yfeldblum: that's a good point
[2012-07-10 12:05:54 -0400] cnf: one i shall try to mind when i ever do my own
[2012-07-10 12:06:23 -0400] yfeldblum: kesor, they tell everyone who is willing to listen how they can contribute
[2012-07-10 12:06:26 -0400] kesor: they should integrate jira with github then, so that pull requests from github create a jira ticket...
[2012-07-10 12:08:00 -0400] PapaSierra: the mysql pull request was created by someone else, i was about the 5th +1, then someone told me about jira, so i created a bug report and linked to the pull request. about a week has gone by and there's been no activity on that ticket
[2012-07-10 12:08:04 -0400] yfeldblum: kesor, would it be nicer for us if they used github rather than jira? sure; but they have been using jira since well before github pull-requests were invented
[2012-07-10 12:08:34 -0400] kesor: there is a plugin for jira that creates jira tickets automatically for each pull request in github.
[2012-07-10 12:08:52 -0400] kesor: I personally love JIRA, it has been putting bread on my table for many years now.
[2012-07-10 12:09:06 -0400] yfeldblum: PapaSierra, did you mark the jira ticket as "resolved" and change the resolution field to "fixed"?
[2012-07-10 12:09:51 -0400] PapaSierra: no because i was reporting the issue, not fixing it
[2012-07-10 12:09:59 -0400] yfeldblum: PapaSierra, and did the person who issued the pull-request sign the CLA indicating he knowingly contributes code to opscode projects under the Apache2 license?
[2012-07-10 12:10:14 -0400] yfeldblum: PapaSierra, top-let corner of http://tickets.opscode.com/secure/Dashboard.jspa
[2012-07-10 12:10:19 -0400] yfeldblum: top-left corner
[2012-07-10 12:11:24 -0400] kesor: yfeldblum: should I hire a lawyer to fix bugs for a broken product of a company that provides a service and takes my money?
[2012-07-10 12:11:30 -0400] PapaSierra: yfeldblum i've got no idea. i just saw the pull request with lots of activity on it but no official response, so i created the jira ticket. i'm not really part of the chef community so i wasn't sure about the process
[2012-07-10 12:12:10 -0400] cnf: hmz, i can't figure out the knife ssh syntax ^^;
[2012-07-10 12:12:22 -0400] kesor: just a mention of "the process" gives me shivers, why would a company involved in the opensource community have process in 2012 that includes CLAs and ticket workflows?
[2012-07-10 12:13:37 -0400] PapaSierra: not sure. someone once told me that it's a way to show their bosses how much work they've done in a day so they get paid as opposed to just clicking merge on a pull request. sounds like a funny explanation, i hope it's not true ;)
[2012-07-10 12:13:41 -0400] cnf: should `knife ssh "node:name" uptime` not work?
[2012-07-10 12:13:48 -0400] yfeldblum: kesor, they try to minimize the process
[2012-07-10 12:14:38 -0400] kesor: yfeldblum: giving more focus to better the documentation, and integrate some pull requests in their repos would benefit them more imho.
[2012-07-10 12:15:24 -0400] yfeldblum: kesor, for example, the CLA is less than 2 pages, and you sign it once and then it applies for any and every opscode project; indeed your company can sign the CCLA once for all of its employees, and then as long as you work there you don't have to sign the CLA yourself
[2012-07-10 12:16:02 -0400] cnf: hmz, how the heck does knife ssh work?
[2012-07-10 12:16:15 -0400] kesor: what you just said  i'll just shut up about it, since there is nothing nice I can answer about that.
[2012-07-10 12:16:35 -0400] PapaSierra: cnf that's OT ;)
[2012-07-10 12:17:39 -0400] yfeldblum: kesor, and yes, the silly process of marking the issue as resolved in jira and changing the resolution field to fixed is silly, but at the moment that's what you do and hopefully they'll be able to simplify the process even further, possibly to github issues and pull-requests, in the future
[2012-07-10 12:18:40 -0400] kesor: I would expect someone from opscode begging me to sign a CLA as the first comment on every pull-request created in github, since if they expect all their users to be aware of their process  they need to communicate it much much better.
[2012-07-10 12:19:13 -0400] yfeldblum: kesor, http://wiki.opscode.com/display/chef/How+to+Contribute#HowtoContribute-WhydoIneedtofilloutaCLA%3F
[2012-07-10 12:19:26 -0400] cnf: oh, wth?
[2012-07-10 12:19:32 -0400] ashb: cnf: knife ssh name:foo remote command to run
[2012-07-10 12:19:40 -0400] cnf: ashb: yes, been trying that
[2012-07-10 12:19:41 -0400] yfeldblum: kesor, they do go through their hundred or so github projects from time to time and try to explain it to people
[2012-07-10 12:19:44 -0400] cnf: not working
[2012-07-10 12:19:54 -0400] Mithrandir: it's a bit silly you can't turn off pull requests on github
[2012-07-10 12:19:56 -0400] cnf: FATAL: No nodes returned from search!
[2012-07-10 12:19:57 -0400] yfeldblum: cnf, quote the query and quote the command
[2012-07-10 12:19:59 -0400] cnf: is all i ever get
[2012-07-10 12:20:14 -0400] cnf: yfeldblum: knife ssh "hostname:learn-chef" "uptime"
[2012-07-10 12:20:15 -0400] cnf: like that?
[2012-07-10 12:20:20 -0400] yfeldblum: cnf, yes
[2012-07-10 12:20:35 -0400] cnf: FATAL: No nodes returned from search!
[2012-07-10 12:20:37 -0400] yfeldblum: cnf, also, make sure that the query uses only attributes that are actually attributes and are actually saved to chef-server
[2012-07-10 12:20:43 -0400] ashb: cnf: does knife search node "your query" return anything?
[2012-07-10 12:20:52 -0400] cnf: ashb: knife node list
[2012-07-10 12:20:52 -0400] yfeldblum: cnf, that, e.g., are visible from `knife node show NODE`
[2012-07-10 12:20:52 -0400] cnf: learn-chef
[2012-07-10 12:21:05 -0400] ashb: cnf: node list is name, not hostname
[2012-07-10 12:21:22 -0400] cnf: ashb: same thing
[2012-07-10 12:21:32 -0400] cnf: i have also tried with "role:learning"
[2012-07-10 12:21:35 -0400] cnf: also same thing
[2012-07-10 12:21:52 -0400] ashb: does the knife search node "role:learning" return anything?
[2012-07-10 12:22:41 -0400] cnf: hmz, no
[2012-07-10 12:22:52 -0400] yfeldblum: kesor, also http://wiki.opscode.com/display/chef/How+to+Contribute#HowtoContribute-YouuseGitHub%2Cwhydon%27tyouuseGitHubPullRequests%3F
[2012-07-10 12:23:13 -0400] yfeldblum: `role` isn't a key; you're probably looking for `roles`
[2012-07-10 12:24:03 -0400] cnf: argl!
[2012-07-10 12:24:08 -0400] cnf: chef-client crashed again
[2012-07-10 12:24:08 -0400] ashb: fwiw knife search node "role:ubuntu" does return nodes for me
[2012-07-10 12:24:18 -0400] cnf: >,<
[2012-07-10 12:24:18 -0400] kesor: yfeldblum: I've seen that page. its a huge turnoff that instead of focusing on quality and fixing longstanding critical bugs, opscode has their priorities in legal processes and ass covering.
[2012-07-10 12:24:45 -0400] cnf: kesor: yes, because getting sued is very productive
[2012-07-10 12:24:49 -0400] PapaSierra: looking at jira i'd say a fair number of the open issues are actually talking about the mysql cookbook issue i mentioned earlier
[2012-07-10 12:25:43 -0400] kesor: cnf: there are other ways to protect themselves from getting sued, which do not include this amount of process and expectations from their power users who actually want to help them and use their broken product.
[2012-07-10 12:25:50 -0400] cnf: right, wth is wrong with the nagios cookbook >,<
[2012-07-10 12:26:19 -0400] yfeldblum: cnf, they're unlikely to get sued over it; far more likely: extremely large customers who fund 95% of their work will not use chef over it
[2012-07-10 12:26:25 -0400] cnf: kesor: you know, constructive criticism is always welcome
[2012-07-10 12:26:34 -0400] cnf: kesor: just moaning is just moaning, though
[2012-07-10 12:26:52 -0400] cnf: yfeldblum: fair point
[2012-07-10 12:27:09 -0400] kesor: cnf: its just that I realized that the several pull requests I made last week, which fix critical bugs in their cookbooks, will never get actually fixed ...
[2012-07-10 12:27:10 -0400] PapaSierra: i'm an extremely small customer, funding 0% of chef, and still i'm not sure i'm getting my money's worth ;)
[2012-07-10 12:27:14 -0400] PapaSierra: just kidding
[2012-07-10 12:27:28 -0400] yfeldblum: kesor, maintain a fork?
[2012-07-10 12:27:29 -0400] cnf: kesor: so follow the procedure
[2012-07-10 12:27:53 -0400] PapaSierra: i'm looking at puppet though, just to compare, what's to choose between them?
[2012-07-10 12:27:57 -0400] yfeldblum: kesor, indeed, that's why it's on github to begin with - so that it's easy to maintain a fork
[2012-07-10 12:28:01 -0400] cnf: right, so what the hell is this nagios cookbook doing...
[2012-07-10 12:28:06 -0400] kesor: i did them a favor and fixed some bugs. I made a pull request in their repo in github. thats all the procedure I'm willing to dedicate to this.
[2012-07-10 12:28:19 -0400] cnf: kesor: then don't bother
[2012-07-10 12:28:37 -0400] cnf: _i_ wouldn't accept a pull request from someone unwilling to put in any effort
[2012-07-10 12:28:42 -0400] kesor: its not like i'm doing this for my own amusement, I actually get paid to work on these chef cookbooks you know.
[2012-07-10 12:29:26 -0400] PapaSierra: i'm doing this for my own amusement, but it's not fun anymore when cookbooks don't work
[2012-07-10 12:29:43 -0400] kesor: I get paid because opscode has broken cookbooks and I have the knowledge to fix them, and I do opscode a favor and actually contribute my changes back to them  which (now I realize) they would not accept because they want me to jump through hoops.
[2012-07-10 12:30:16 -0400] kesor: and people in this channel actually support opscode and it all makes sense to them. which I find weird.
[2012-07-10 12:30:25 -0400] Mithrandir: you're not doing them a favour when you're not providing them the patches in a format they can use.
[2012-07-10 12:30:39 -0400] kesor: its a pull request in THEIR github repository ...
[2012-07-10 12:31:01 -0400] Mithrandir: how is that relevant if it does not conform to the standard they have for accepting contributions?
[2012-07-10 12:31:21 -0400] cnf: kesor: https://github.com/opscode/cookbooks there
[2012-07-10 12:31:22 -0400] cnf: ?
[2012-07-10 12:31:35 -0400] kesor: cnf: no, https://github.com/opscode-cookbooks/
[2012-07-10 12:31:55 -0400] yfeldblum: cnf, jfyi that repo is old and is no longer maintained
[2012-07-10 12:32:03 -0400] cnf: yfeldblum: right
[2012-07-10 12:32:07 -0400] kesor: if I was the only one, you might be right that I'm just bitching here. but there are hundreds of unmerged pull requests from multitudes of people that just rot in their repositories for a year sometimes.
[2012-07-10 12:32:25 -0400] yfeldblum: kesor, that is indeed unfortunate
[2012-07-10 12:32:45 -0400] cnf: so open a jira ticket, and enter the relevant information
[2012-07-10 12:32:58 -0400] kesor: and (as I didn't know), there is a high probability that most of those contributors never even hear of any CLA and CCLA signing.
[2012-07-10 12:33:13 -0400] yfeldblum: PapaSierra, with chef, you write recipes; recipes are ruby scripts where you can write any ruby code you like; recipes are executed on the individual nodes, not on the central CM server
[2012-07-10 12:33:26 -0400] cnf: which is weird
[2012-07-10 12:33:31 -0400] cnf: because _I_ have heard of it
[2012-07-10 12:33:35 -0400] cnf: and i'm brand new
[2012-07-10 12:33:46 -0400] cnf: and haven't even tried submitting any patches or code
[2012-07-10 12:34:03 -0400] yfeldblum: kesor, please help the cause, and in each of those pull-requests or issues, comment with a link to the how-to-contribute page?
[2012-07-10 12:34:46 -0400] kesor: I am not yet willing to become the full-time github-opscode volunteer, maybe sometime in the future when I find it beneficial for myself somehow.
[2012-07-10 12:34:47 -0400] cnf: anyway, back to trying to figure out what this nagios cookbook is doing wrong
[2012-07-10 12:37:21 -0400] cnf: anyone here use the nagios cookbook?
[2012-07-10 12:37:56 -0400] cnf: http://pastie.org/4231405 isn't that right?
[2012-07-10 12:38:28 -0400] ashb: i do but i haven o idea how old or tweaked my version is
[2012-07-10 12:39:15 -0400] yfeldblum: PapaSierra, with puppet, you write manifests; these are executed on the central CM server, not on the individual nodes; therefore they cannot have arbitrary ruby code, but must be written in the puppet manifest language
[2012-07-10 12:39:15 -0400] cnf: it's installing apache, even though i tell it to use nginx, and crashes on firstrun
[2012-07-10 12:39:20 -0400] ashb: ah it looks like i just tweaked the recipe to use nginx/spawn-cgi etc.
[2012-07-10 12:40:05 -0400] ashb: cnf: what does the log show?
[2012-07-10 12:40:11 -0400] ashb: "Setting up nagios server via NGINX"?
[2012-07-10 12:40:59 -0400] PapaSierra: thanks for the explanation yfeldblum i'll save further reading for the weekend. i like chef and i use it with vagrant, but i'm still on the nasty part of the learning curve
[2012-07-10 12:42:35 -0400] cnf: ashb: i just did a vagrant destroy, brining it up again
[2012-07-10 12:42:53 -0400] ashb: you might be able to see the old log in /var/log/chef/client.log ?
[2012-07-10 12:43:08 -0400] ashb: can't remember if vagrant changes that or not
[2012-07-10 12:48:10 -0400] cnf: wth
[2012-07-10 12:48:15 -0400] cnf: why is it installing apache?
[2012-07-10 12:49:57 -0400] cnf: ashb: it just starts installing apache, i don't see where that is triggered though
[2012-07-10 12:51:15 -0400] cnf: how do i find out where that install is triggered?
[2012-07-10 12:51:53 -0400] kesor: turn on debug logging and read it?
[2012-07-10 12:53:35 -0400] cnf: o,O
[2012-07-10 12:55:50 -0400] cnf: damn, that's just a wall of text
[2012-07-10 12:57:57 -0400] ashb: yeah there'll be lots of spew at the start
[2012-07-10 12:59:59 -0400] yfeldblum: cnf, are you using the latest released version of the nagios cookbook?
[2012-07-10 13:00:16 -0400] cnf: yfeldblum: what librarian gave me
[2012-07-10 13:00:51 -0400] yfeldblum: cnf, can you gits the Cheffile?
[2012-07-10 13:00:55 -0400] yfeldblum: gist*
[2012-07-10 13:01:10 -0400] yfeldblum: or pastie or w/e
[2012-07-10 13:01:29 -0400] ashb: okay the 'released' version only has apache support
[2012-07-10 13:01:31 -0400] ashb: compare:
[2012-07-10 13:01:31 -0400] ashb: https://github.com/opscode-cookbooks/nagios/blob/1.2.6/recipes/server.rb
[2012-07-10 13:01:37 -0400] ashb: https://github.com/opscode-cookbooks/nagios/blob/master/recipes/server.rb
[2012-07-10 13:03:47 -0400] yfeldblum: ashb, yep, that's what i was driving at :P
[2012-07-10 13:03:56 -0400] cnf: yfeldblum: http://pastie.org/4231518
[2012-07-10 13:04:28 -0400] intinig: I just finished catching up with all the jira / github irc log :)
[2012-07-10 13:04:48 -0400] intinig: can't say I really disagree about the fact that if you're on github you should use github's tools :)
[2012-07-10 13:05:07 -0400] cnf: hmz, i don't quite get the debug output
[2012-07-10 13:05:15 -0400] intinig: but hey, it's opscode's software and it's their right to do whatever they wish.
[2012-07-10 13:05:40 -0400] kesor: would be nice if they at least used https://marketplace.atlassian.com/plugins/com.atlassian.jira.plugins.bitbucket or something.
[2012-07-10 13:05:46 -0400] cnf: ashb: wait, so the docs say it does nginx, but it doesn' actually do it?
[2012-07-10 13:05:55 -0400] ashb: which docs?
[2012-07-10 13:06:08 -0400] cnf:  https://github.com/opscode-cookbooks/nagios/
[2012-07-10 13:06:19 -0400] ashb: that isn't the version that librarian gave you i suspect
[2012-07-10 13:06:43 -0400] ashb: https://github.com/opscode-cookbooks/nagios/tree/1.2.6
[2012-07-10 13:06:50 -0400] cnf: i don't know
[2012-07-10 13:07:02 -0400] cnf: last time, i just did knife cookbook site install nagios
[2012-07-10 13:07:31 -0400] ashb: that will get the latest version from http://community.opscode.com/cookbooks/nagios
[2012-07-10 13:08:09 -0400] cnf: oh, so knife cookbook site gets different version from librarian?
[2012-07-10 13:08:43 -0400] ashb: can't remember what librarian does - never used it and not looked in a while
[2012-07-10 13:09:18 -0400] julien___: Hi
[2012-07-10 13:09:58 -0400] maruq: ashb: librarian pulls from the url you give it
[2012-07-10 13:10:11 -0400] julien___: We're trying to find the best way to update the network configuration of each of our nodes. Is it better to do it at the bootstrap level, or create a custom recipe?
[2012-07-10 13:10:13 -0400] cnf: yfeldblum: poke? ^^;
[2012-07-10 13:10:16 -0400] maruq: the default one for opscode cookbooks is "site 'http://community.opscode.com/api/v1'"
[2012-07-10 13:12:15 -0400] cnf: maruq: so adding :git => 'https://github.com/opscode-cookbooks/nagios' will give me HEAD again?
[2012-07-10 13:12:33 -0400] yfeldblum: cnf, yep you're getting the latest released version of opscode's nagios cookbook, which is at version1.2.6
[2012-07-10 13:12:49 -0400] maruq: cnf: yep
[2012-07-10 13:12:53 -0400] cnf: hmm
[2012-07-10 13:13:15 -0400] maruq: cnf: it's what I do for rvm, ":git => 'https://github.com/fnichol/chef-rvm'"
[2012-07-10 13:13:34 -0400] cnf: https://github.com/opscode-cookbooks/nagios/pulls lots of pull requests open, a lot of them with jira tickets
[2012-07-10 13:13:54 -0400] yfeldblum: cnf, do what maruq says, and you will get the unstable code currently in git; opscode does recommends and supports only the versions they release, not the unstable code in git, but as long as you test it out yourself and ensure it works, you should be fine
[2012-07-10 13:14:17 -0400] cnf: right
[2012-07-10 13:14:25 -0400] cnf: atm, it's all just on learn-box vm
[2012-07-10 13:14:29 -0400] cnf: so it doesn't matter
[2012-07-10 13:15:30 -0400] cnf: but man, cookbooks being in the state they are is very confusing
[2012-07-10 13:15:38 -0400] cnf: not to mention frustrating :P
[2012-07-10 13:15:56 -0400] maruq: yfeldblum cnf: you'll get the HEAD, but librarian will lock at that sha, rather than a wandering HEAD
[2012-07-10 13:16:11 -0400] cnf: oh
[2012-07-10 13:16:12 -0400] cnf: hmz
[2012-07-10 13:16:17 -0400] zoubi: hello
[2012-07-10 13:16:31 -0400] zoubi: I have a cookbook which requires JAVA_HOME to be set
[2012-07-10 13:17:00 -0400] yfeldblum: maruq, that's right
[2012-07-10 13:17:21 -0400] zoubi: in my recipe, I added a require_recipe "java", which executes itself a ruby_block with ENV["JAVA_HOME"] =  node[:java][:java_home]
[2012-07-10 13:17:28 -0400] maruq: cnf: e.g. here's the snippit in the chef file.lock https://gist.github.com/691f13e066010fdb5499
[2012-07-10 13:17:58 -0400] cnf: maruq: ah, so if i delete the lock file, i'll get the new head again?
[2012-07-10 13:18:06 -0400] zoubi: I execute the same ruby code in my own recipe
[2012-07-10 13:18:33 -0400] zoubi: I also added this script:http://pastebin.com/MQHhdMD7
[2012-07-10 13:18:34 -0400] maruq: cnf: you can also use a ":ref => 'something'" to point to anything git recognises as a reference
[2012-07-10 13:18:50 -0400] cnf: right, i saw that in the example file
[2012-07-10 13:18:52 -0400] zoubi: and I give JAVA_HOME with the environment property of the execute command
[2012-07-10 13:18:56 -0400] maruq: cnf: librarian-chef install --clean would do that
[2012-07-10 13:19:03 -0400] zoubi: http://pastebin.com/7np6vgWf
[2012-07-10 13:19:12 -0400] cnf: maruq: right
[2012-07-10 13:19:14 -0400] maruq: but it would also get latest of any others you haven't locked
[2012-07-10 13:19:24 -0400] zoubi: despite all of this, this last execute statemtent continues to complain about JAVA_HOME not being set
[2012-07-10 13:19:28 -0400] zoubi: I'm going mad :)
[2012-07-10 13:19:38 -0400] zoubi: did anyone of you already had to do something like this?
[2012-07-10 13:20:48 -0400] maruq: cnf: need to run out for 20 or so, but hopefully that's enough to get you started
[2012-07-10 13:21:20 -0400] PapaSierra: what's the significance of the 3 in libpcre3-dev? how do i verify that these isn't a newer version for ubuntu 12 for example?
[2012-07-10 13:21:45 -0400] cnf: maruq: ok, thanks
[2012-07-10 13:23:02 -0400] cnf: right, just signed the CLA, so that is out of the way :P
[2012-07-10 13:25:13 -0400] cnf: cookbook dependencies are a bit of a mess, imo ^^;
[2012-07-10 13:27:53 -0400] kesor: anyone knows tutorials/blogposts about creating chef cookbook libraries?
[2012-07-10 13:30:18 -0400] cnf: hmm
[2012-07-10 13:31:26 -0400] kesor: I have this piece of code that creates iptable rules from something similar to aws ec2 security groups, and I want these to get stored in data bags and this library to generate iptable rules.
[2012-07-10 13:33:43 -0400] thom: PapaSierra: it's the version number of the library shared object
[2012-07-10 13:34:23 -0400] thom: PapaSierra: it describes the ABI of the library, so if you link with libpcre3 *any* version of libpcre3 will work with your system
[2012-07-10 13:35:00 -0400] PapaSierra: thom where do i see info on it? and is there a 4 for instance? just curious how this works
[2012-07-10 13:36:21 -0400] thom: PapaSierra: http://www.debian.org/doc/debian-policy/ch-sharedlibs.html describes what's going on; use http://packages.debian.org/search?keywords=libpcre&searchon=names&suite=stable&section=all to see all the libpcre* packages in debian
[2012-07-10 13:36:55 -0400] thom: (or http://packages.ubuntu.com/search?keywords=libpcre&searchon=names&suite=precise&section=all )
[2012-07-10 13:37:04 -0400] PapaSierra: thom great answer, thanks i'll read up now...
[2012-07-10 13:39:13 -0400] cnf: grrr, stupid nagios cookbook!
[2012-07-10 13:39:46 -0400] PapaSierra: cnf i wish i could help
[2012-07-10 13:39:59 -0400] yfeldblum: cnf, rather than deleting the lockfile, you can run `librarian-chef update` to update *all* cookbooks and rewrite the lockfile entirely, or you can run `librarian-chef update CB1 CB2 CB3` to update just those particular cookbooks named on the command line and their dependencies
[2012-07-10 13:40:25 -0400] cnf: yfeldblum: ah, thank you
[2012-07-10 13:43:43 -0400] Doc_X: http://what-if.xkcd.com/1/
[2012-07-10 13:43:50 -0400] Doc_X: sorry, wrong window
[2012-07-10 13:50:48 -0400] laurent\: outch i've upgraded my couchdb from 1.1.1 to 1.2.0 by mistake ! tried to downgrade to 1.1.1 so I can do a proper dump but it was crashing. in the end i just copied the chef.couch file to 1.2.0, it seems to be working
[2012-07-10 14:08:35 -0400] zoubi: any idea why the java cookbook with the default attributes on Ubuntu Precise 32 bits doesn't create /usr/lib/jvm/default-java as I believe it should?
[2012-07-10 14:19:36 -0400] cnf: stupid cookbook :/
[2012-07-10 14:25:51 -0400] red5: hi guys ! i'd like to know if have any problem with http://community.opscode.com/api/v1 ? i've tried to access and doesn't works .
[2012-07-10 14:27:36 -0400] zoubi: Ihave these folders in /usr/lib/jvm http://pastebin.com/0N1AXbw9
[2012-07-10 14:27:43 -0400] zoubi: no trace of default-java :(
[2012-07-10 14:30:17 -0400] PapaSierra: so having fiddled with the chef recipes i tried starting apache2 and got this http://dpaste.com/769029/ it seems like there are a few errors in there! the particular worries are the make_sock permission denied, and the fqdn error
[2012-07-10 14:32:25 -0400] zts: PapaSierra: the make_sock error means that you already have a webserver running on that system (perhaps apache is already running?)
[2012-07-10 14:33:16 -0400] PapaSierra: oh? that's interesting because actually when i visit the url i do get a response
[2012-07-10 14:34:22 -0400] PapaSierra: how do i tell which programming is running on 80?
[2012-07-10 14:37:17 -0400] cnf: ok, so the nagios cookbook doesn't work well with nginx ^;
[2012-07-10 14:37:18 -0400] Zenigor: Try lsof -i :80
[2012-07-10 14:39:59 -0400] maruq: has anyone used the mongodb cookbook & managed to get replica sets going?
[2012-07-10 14:40:27 -0400] PapaSierra: zts ok, first problem solved, i wasn't restarting with sudo. the problem is now reduced to http://dpaste.com/769036/
[2012-07-10 14:40:35 -0400] maruq: for some reason it doesn't seem to pick up my replica set name & so it fails
[2012-07-10 14:40:56 -0400] zoubi: while on line 45 of this file https://github.com/opscode-cookbooks/java/blob/master/recipes/openjdk.rb#L42, the execution path goes in the "else", despite I run a VM on Ubuntu Precise, and install openjdk 6 ?
[2012-07-10 14:41:44 -0400] zts: PapaSierra: the other two are warnings, not errors.  the NameVirtualHost one means that you've told Apache to listen on port 443, and to run virtualhosts on that port, but then you haven't got any <VirtualHost> stanzas for it
[2012-07-10 14:42:15 -0400] zts: PapaSierra: the middle one means that apache couldn't figure out the right name for your server - if you add an entry for 127.0.1.1 to /etc/hosts, that should go away
[2012-07-10 14:44:56 -0400] PapaSierra: zts, in /etc/hosts there are two entries: 127.0.0.1 localhost and 127.0.1.1 precise32
[2012-07-10 14:45:55 -0400] zts: PapaSierra: ah, in that case it probably doesn't like the fact that the entry for 127.0.1.1 is only a hostname (it wants an FQDN)
[2012-07-10 14:47:20 -0400] nmistry: is it possible to download a remote file to a new location then move/rename it?
[2012-07-10 14:47:23 -0400] zts: PapaSierra: to be honest, that's in the category of things that I probably wouldn't bother fixing unless it's causing a specific problem for you - it's generally harmless, but some server generated responses (eg error pages) will show that IP address instead of a hostname
[2012-07-10 14:48:55 -0400] nmistry: basically preventing the file from being corrupt
[2012-07-10 14:49:44 -0400] laurent\: is there something like http://wiki.opscode.com/display/chef/Working+with+Git for the new opscode-cookbooks repositories ?
[2012-07-10 14:50:00 -0400] nickpresta: I'm having a strange error with the MySQL recipe. When it tries to create the confd_dir with the owner and group "mysql", it throws the error: http://dpaste.com/769045/plain/ I ssh into the machine and run id mysql and get: uid=27(mysql) gid=27(mysql) groups=27(mysql) So clearly mysql exists. Any thoughts?
[2012-07-10 14:50:01 -0400] laurent\: iow, what's your process when contributing to cookbooks ?
[2012-07-10 14:51:21 -0400] PapaSierra: zts, understood. let me try it with a fdqn just for eduction purposes. and if not i'll ignore it
[2012-07-10 14:51:22 -0400] PapaSierra: thanks
[2012-07-10 14:51:24 -0400] zts: nmistry: I thought that remote_file does that for you, behind the scenes
[2012-07-10 14:51:43 -0400] geekbri: laurent\: to contribute to opscode cookbooks you have to sign the CLA, issue a jira ticket, resolve the ticket, make sure to link to your pull request (and I usually link in my pull request to the jira ticket as well)
[2012-07-10 14:51:51 -0400] zts: PapaSierra: no problems - it's obviously more important to solve that for internet-facing services than for your vagrant box, but it's certainly good to know
[2012-07-10 14:52:00 -0400] nmistry: zts, if thats the case thats perfect  how can i confirm that
[2012-07-10 14:52:21 -0400] geekbri: laurent\: after you sign the CLA it takes a little bit before they grant you the jira permissions to resolve tickets.
[2012-07-10 14:53:59 -0400] PapaSierra: zts eventually this will go on a live server though, that's the issue. but no, i put example.com in hosts and still the same warning
[2012-07-10 14:54:41 -0400] zts: PapaSierra: could you gist/pastebin your /etc/hosts please?
[2012-07-10 14:54:53 -0400] nickpresta: It looks like I might be affected by this bug: http://tickets.opscode.com/browse/CHEF-1699
[2012-07-10 14:57:42 -0400] zts: nmistry: a quick look at the source suggests that it does, but I don't know it well enough to swear on my life.  If nobody else here knows for sure, I'd suggest testing it for yourself
[2012-07-10 14:58:21 -0400] laurent\: geekbri: no i mean, i don't really want to clone individual cookbooks on my github, is there's another process
[2012-07-10 14:58:22 -0400] nmistry: just saw it at line 41 @ https://github.com/opscode/chef/blob/master/chef/lib/chef/provider/remote_file.rb
[2012-07-10 14:58:38 -0400] nmistry: creates a raw file
[2012-07-10 14:58:43 -0400] laurent\: nevermind, i'll fork and rename it
[2012-07-10 14:58:49 -0400] nmistry: then cps
[2012-07-10 14:59:17 -0400] linTest: workflow question > environment and roles > if I define these via Ruby DSL so I can keep in git repo; what is workflow to apply these to chef-server?
[2012-07-10 14:59:17 -0400] maruq: I probably should sign the CLA & help out some time
[2012-07-10 15:00:29 -0400] yfeldblum: linTest, `knife role from file ROLENAME.rb` and `knife environment from file ENVIRONMENTNAME.rb`
[2012-07-10 15:02:29 -0400] nmistry: zts here is the line:    FileUtils.cp raw_file.path, @new_resource.path
[2012-07-10 15:02:40 -0400] nmistry: not sure why its not a mv
[2012-07-10 15:23:39 -0400] maruq: question: can I do a search in an attributes file?
[2012-07-10 15:24:46 -0400] ashb: fairly sure no - they are static defaults
[2012-07-10 15:25:04 -0400] maruq: eg. set['myclientserverthing']['server'] = search(:node, 'role:server')[0]
[2012-07-10 15:25:51 -0400] yfeldblum: maruq, you can, but that is rather unwise; the attributes file is intended for static defaults
[2012-07-10 15:25:58 -0400] maruq: I know the roles & data bags are uploaded as json, not sure how the attributes are used
[2012-07-10 15:26:28 -0400] yfeldblum: attributes?
[2012-07-10 15:26:28 -0400] bawt_: attributes is http://wiki.opscode.com/display/chef/Attributes
[2012-07-10 15:26:50 -0400] maruq: yfeldblum: okay, basically progressing further on idea I was trying yesterday. so the correct place for dynamic attribute setting is the recipe?
[2012-07-10 15:27:01 -0400] yfeldblum: maruq, yes
[2012-07-10 15:28:36 -0400] maruq: so just: node['foo']['bar'] = search(:node, "role:server")[0] ?
[2012-07-10 15:29:05 -0400] maruq: well, better handling of the search results, but you get the gist
[2012-07-10 15:32:16 -0400] PapaSierra: php cookbook fail: https://github.com/Zeelot/vagrant-cookbooks/blob/master/php/templates/default/extension.ini.erb the @name is pecl_http, but the extension is just http :(
[2012-07-10 15:34:10 -0400] yfeldblum: maruq, yeah ... but you should be very careful to select only the specific data you need from the search results; don't assign a full node object to an attribute in another node object
[2012-07-10 15:37:20 -0400] nmistry: whats the general concensus about having nested roles?  is this a bad idea or not?
[2012-07-10 15:37:24 -0400] yfeldblum: maruq, for example: result = search(:node, "role:server").first ; node["foo"]["bar"] = result["fqdn"]
[2012-07-10 15:37:34 -0400] yfeldblum: nmistry, what's a nested role?
[2012-07-10 15:37:48 -0400] nmistry: role being assigned in a role
[2012-07-10 15:38:06 -0400] nmistry: inside role[abc]   -> runlist ( role [xyz] )
[2012-07-10 15:38:15 -0400] yfeldblum: nmistry, perfectly fine
[2012-07-10 15:38:19 -0400] maruq: yfeldblum: yep, sorry, just meant the left side of the equation. obviously need to handle search results safely
[2012-07-10 15:38:35 -0400] nmistry: i know its symantically ok, but wondering about best practices, etc.
[2012-07-10 15:38:48 -0400] nmistry: thanks yfeldblum, btw.
[2012-07-10 15:38:49 -0400] yfeldblum: nmistry, perfectly fine in the land of best practices, too
[2012-07-10 15:38:56 -0400] nmistry: rgr cool
[2012-07-10 15:39:02 -0400] linTest: using chef-server; what determines the run order of recipes and how do I define this?
[2012-07-10 15:39:40 -0400] maruq: linTest: use depends in the cookbook metadata / includes in the recipe
[2012-07-10 15:39:52 -0400] maruq: I believe it will also run the run
[2012-07-10 15:39:59 -0400] meineerde: linTest: reciopes are run in the order they are defined
[2012-07-10 15:40:01 -0400] maruq: *run_List in order
[2012-07-10 15:43:57 -0400] linTest: maruq; so I should define a run_list.json and put that in the /attributes directory? Is that the typical pattern?
[2012-07-10 15:44:45 -0400] maruq: I generally just put the run list as part of the role
[2012-07-10 15:45:39 -0400] thehar: good morning!
[2012-07-10 15:45:41 -0400] maruq: I guess if you wanted, you could define it elsewhere, but I feel more comfortable with it in the role
[2012-07-10 15:45:58 -0400] linTest: maruq: just getting started and don't have a role defined yet
[2012-07-10 15:46:25 -0400] maruq: eg. If I call the my_web_app role, it'll have the run_list + default_attributes needed to boot that
[2012-07-10 15:47:19 -0400] maruq: linTest: no worries. I just try and define roles for most things. that way it's less thinking if things go wrong at 3am
[2012-07-10 15:47:45 -0400] maruq: eg. I can just boot my_web_app role & know it'll be good.
[2012-07-10 15:48:01 -0400] maruq: rather than going "right, I need apache, mysql, etc"
[2012-07-10 15:49:57 -0400] linTest: maruq: thanks -- I'm still taking baby steps and trying to figure out typical workflow (if there is such a thing as typical workflow)
[2012-07-10 15:54:46 -0400] maruq: linTest: chef wiki or https://github.com/opscode/chef-fundamentals are probably good starting points
[2012-07-10 15:55:39 -0400] maruq: linTest: "Test-Driven Infrastructure with Chef" is also a pretty good read. It's quite short too, not going to take forever like a lot of tech books
[2012-07-10 16:03:36 -0400] cjs226: my prod environment constrains ALL cookbooks per the version in the master branch of git.  is it possible to "inherit" the prod env but allow the latest version of a particular cookbook?
[2012-07-10 16:04:38 -0400] cjs226: for example, systems in an alternate environment
[2012-07-10 16:05:37 -0400] yfeldblum: cjs226, i doubt it
[2012-07-10 16:06:39 -0400] cjs226: yfeldblum:  bummer.  i guess i'll just copy the prod file and edit it each time the prod env changes.
[2012-07-10 16:32:36 -0400] dyer: Hey guys, anyone ever have any issues with writing out JSP template files the <% in the JSP seems to be screwing me up, and I can't even seem to go the <%= "<%\nresponse.sendRedirect(\"#{@default_home}\");\n%>" %> route
[2012-07-10 16:33:15 -0400] ashb: yes - producing JSP with ERB templates is hard
[2012-07-10 16:34:13 -0400] dyer: yep, any tips ?
[2012-07-10 16:34:20 -0400] dyer: "don't" doesn't count :)
[2012-07-10 16:34:34 -0400] ashb: ISTR there's some way of changing the tags that ERB looks for
[2012-07-10 16:35:08 -0400] dyer: ISTR?
[2012-07-10 16:35:43 -0400] ashb: I seem to recall
[2012-07-10 16:36:02 -0400] dyer: ah, thats a new one for m e
[2012-07-10 16:37:05 -0400] dyer: Yea, I am trying to do some googling but I am not finding much on the jsp/erb issue
[2012-07-10 16:39:01 -0400] yfeldblum: dyer, http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html
[2012-07-10 16:39:10 -0400] yfeldblum: dyer, about 1 screen down
[2012-07-10 16:42:19 -0400] ashb: yeah, just <%% for the open JSP tags seems to be the only way
[2012-07-10 16:43:02 -0400] ashb: <%% response.sendRedirect(" <%= @default_home %>"); %>
[2012-07-10 16:44:06 -0400] ashb: not quite that
[2012-07-10 16:44:50 -0400] ashb: yfeldblum: <%% seems to treate everything inside the <%% %> as literal, but also includes the <%% %> in the output
[2012-07-10 16:45:10 -0400] ashb: <%= "<%" %> response.sendRedirect(" <%= @default_home %>"); %>
[2012-07-10 16:45:12 -0400] ashb: is ugly but does work
[2012-07-10 16:49:27 -0400] dyer: hrm, still playing w/ it
[2012-07-10 16:49:34 -0400] dyer: got everything besides the actual variable working
[2012-07-10 16:50:01 -0400] hoover_damm: heh
[2012-07-10 16:50:47 -0400] ashb: dyer: in <%% I couldn't get it to interpolate anything
[2012-07-10 16:51:00 -0400] dyer: yea, thats where I am at right this second
[2012-07-10 16:51:06 -0400] dyer: thank god I don't have to do this to often :)
[2012-07-10 16:51:16 -0400] ashb: <%= "<%" %>
[2012-07-10 16:52:01 -0400] dyer: yep, trying that right now
[2012-07-10 17:02:59 -0400] miah: moin
[2012-07-10 17:07:42 -0400] dyer: ashb, so I got it to work.. https://gist.github.com/6fc6014651eeccd9fa09
[2012-07-10 17:09:53 -0400] dyer: not pretty but I guess it will work in this case :)
[2012-07-10 17:16:31 -0400] jlwestsr: Can someone give me a hand with https://gist.github.com/3084816? Trying to get the override block correct for nginx version attribute. Doesn't seem to work.
[2012-07-10 17:19:04 -0400] nickpresta: Is it expected that you should be able to rerun chef multiple times on the same machine successfully?
[2012-07-10 17:19:13 -0400] JasonF: absolutely
[2012-07-10 17:19:17 -0400] jlwestsr: yes
[2012-07-10 17:19:20 -0400] JasonF: it's supposed to be idempotent (sp?)
[2012-07-10 17:19:35 -0400] JasonF: by definition, if your recipe can't be run over and over again without breaking things, you're doing it wrong
[2012-07-10 17:19:51 -0400] nickpresta: For some reason, running the mysql recipe on centos fails
[2012-07-10 17:19:59 -0400] JasonF: anytime you need a "run once and never again", you should use a lockfile/lock attribute (but this isn't very good practice)
[2012-07-10 17:20:17 -0400] nickpresta:  that is, running it multiple times fails
[2012-07-10 17:22:31 -0400] jtimberman: fails how?
[2012-07-10 17:22:32 -0400] jtimberman: where?
[2012-07-10 17:22:44 -0400] jtimberman: paste the output to a gist?
[2012-07-10 17:24:52 -0400] nickpresta: @jtimberman: https://raw.github.com/gist/3084877/34b04396a54e39deb0b085f8ef23d3c1222ef329/gistfile1.txt
[2012-07-10 17:25:23 -0400] nickpresta: I've applied the patch from https://github.com/opscode-cookbooks/mysql/pull/17 as well. The recipe completes the first time it is run on a clean box, but not any subsequent times
[2012-07-10 17:26:36 -0400] lewjg: @nickpresta: Do you set the mysql attributes?
[2012-07-10 17:27:00 -0400] lewjg: Because if you don't set server_debian_password it will auto-generate it each time.
[2012-07-10 17:27:04 -0400] lewjg: But it's already been set.
[2012-07-10 17:27:23 -0400] lewjg: (I'm assuming this is a solo run)
[2012-07-10 17:27:44 -0400] lewjg: Same with server_root_password and server_repl_password
[2012-07-10 17:28:03 -0400] nickpresta: @lewjg: I'm looking in attributes/server.rb. I don't see server_debian_password in here (I'm also on CentOS, if that matters).
[2012-07-10 17:28:36 -0400] lewjg: I'm guessing you won't see any debian attributes then :)
[2012-07-10 17:29:24 -0400] nickpresta: In recipes/server.rb, I see http://dpaste.com/769102/plain/
[2012-07-10 17:29:45 -0400] lewjg: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L25
[2012-07-10 17:30:20 -0400] lewjg: I'm guessing this would fire for redhat: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L144
[2012-07-10 17:31:29 -0400] lewjg: So you should probably set the mysql > server_root_password attribute, and they it won't randomly generate.
[2012-07-10 17:32:29 -0400] nickpresta: That's fine, I can do that. But going back to my original question, does this not violate idempotence?
[2012-07-10 17:32:57 -0400] nickpresta: Or should I have hard coded a password from the beginning?
[2012-07-10 17:33:32 -0400] lewjg: I guess I'd say that it'd idempotent on server, but that solo requires the password to be set.
[2012-07-10 17:34:42 -0400] nickpresta: in my solo.json, I have "mysql": {"server_root_password": "mysql"} - shouldn't that be picked up?
[2012-07-10 17:34:51 -0400] jtimberman: nickpresta: are you using solo?
[2012-07-10 17:34:57 -0400] nickpresta: @jtimberman: yes
[2012-07-10 17:35:14 -0400] jtimberman: yeah, you need to set the attributes in the node's attributes.
[2012-07-10 17:35:27 -0400] jtimberman: all the password attributes, they're dynamically generated by the recipe if the node doesn't have them set.
[2012-07-10 17:36:11 -0400] nickpresta: So there is no reason to have mysql options in my solo.json if I'm using Chef Solo?
[2012-07-10 17:36:16 -0400] Toumar: re: ckbk.it/route53 - when I run a recipe using this, I get the error "RRSet with DNS name foo. is not permitted in zone bar". IS anyone familiar with the route53 cookbook?
[2012-07-10 17:36:26 -0400] jtimberman: nickpresta: to be clear
[2012-07-10 17:36:30 -0400] jtimberman: nickpresta: those are not "options"
[2012-07-10 17:36:32 -0400] jtimberman: they are attributes.
[2012-07-10 17:36:59 -0400] jtimberman: the "solo.json" contains node attributes.
[2012-07-10 17:40:22 -0400] lewjg: @nickpresta Has it always been in there, or did you just add it?
[2012-07-10 17:40:35 -0400] lewjg: Because you're going to have to remove mysql to make it work.
[2012-07-10 17:40:40 -0400] lewjg: Since the root password has already been set.
[2012-07-10 17:41:14 -0400] nickpresta: I can just create a new box. I'm using Vagrant and the Chef-Solo provisioner
[2012-07-10 17:41:22 -0400] lewjg: There you go. Destroy!
[2012-07-10 17:51:29 -0400] achmed: i wanted to use the CIDR library in the netaddr gem
[2012-07-10 17:51:48 -0400] achmed: i just require 'cidr' and require 'netaddr' at the top of the recipe and it seems to work, is there a better way?
[2012-07-10 17:55:02 -0400] jwitrick: im trying to setup a mysql server on centos 5.8. but the mysql recipe does not seem to set my root password. any idea?
[2012-07-10 17:55:06 -0400] judd7: Any opscoders here care to comment on Jira and (if) you integrate it into a backend bug system?
[2012-07-10 18:00:27 -0400] lewjg: @jwitrick: that's a popular topic today! Solo?
[2012-07-10 18:00:46 -0400] miah: iirc, the foodfight talk from chefconf was quite hilarious and i want to see the video from it.. but i can't find it on youtube.. wtf.
[2012-07-10 18:03:47 -0400] cwj: yeah it was very funny
[2012-07-10 18:04:36 -0400] cwj: i dont think ive seen any of the ignite talks on the official opscode youtube page
[2012-07-10 18:05:55 -0400] miah: :/
[2012-07-10 18:09:44 -0400] judd7: http://www.meetup.com/Chef-NYC/events/71703412/  <- tonight in NYC.
[2012-07-10 18:24:49 -0400] gdey: how can i get knife to give me an ssh shell into a node that is managed by chef?
[2012-07-10 18:25:20 -0400] miketheman: anyone having 500 errors from api.opscode.com ?
[2012-07-10 18:25:42 -0400] gdey: I tired knife ssh node:Name -a 'ec2.host_name' but that does not do anything. And an hours worth of google is not paying off.
[2012-07-10 18:28:31 -0400] Zenigor: Is anyone spinning up rackspace or otherwise servers for feature branch code testing? I'm trying to get over a mental hurdle here and its probably due to my lack of chef experience. I seem to have to do manual intervention of my node setup using knife after i have used knife rackspace server create and that doesn't seem to scale correctly and I'm sure that I'm doing something wrong, I just don't know what it is
[2012-07-10 18:29:18 -0400] jordane: Zenigor: I regularly spin up rackspace servers with knife. What issues are you running into?
[2012-07-10 18:30:24 -0400] hoover_damm: miketheman, nothing is posted
[2012-07-10 18:30:35 -0400] Zenigor: @jordane the command I'm using to spin them up is: knife rackspace server create -S "nginx_test" -N "nginx_test" --template-file .chef/bootstrap/ruby193_p125.erb -r "web,admin,db,redis,resque" my problem is that my node config of knife node edit nginx_test is barebones and i am having to go back in and edit the node to get a complete server
[2012-07-10 18:30:51 -0400] miketheman: hoover_damm: I know, I checked that first.
[2012-07-10 18:31:07 -0400] miketheman: I think it was my own fault, tried to upload a 1-byte size role.
[2012-07-10 18:31:08 -0400] hoover_damm: miketheman, what kind of 500's are you getting? gistable?
[2012-07-10 18:31:15 -0400] miketheman: it doesn't error out on that fast
[2012-07-10 18:31:18 -0400] hoover_damm: 1byte sized role? weird
[2012-07-10 18:31:20 -0400] jordane: Zenigor: Are you getting any errors on the bootstrap proccess? I've seen some issues where if the bootstrap fails it empties the run list
[2012-07-10 18:31:24 -0400] hoover_damm: it'd think it'd say this isn't json
[2012-07-10 18:31:25 -0400] hoover_damm: and fail
[2012-07-10 18:31:27 -0400] gdey: always seems when you give up, you find the answer.
[2012-07-10 18:31:40 -0400] jwitrick: no solo. I am using chef-server
[2012-07-10 18:32:29 -0400] hoover_damm: Zenigor, your roles don't empose what your trying to set?
[2012-07-10 18:32:58 -0400] hoover_damm: or they should and that's not what your seeing?
[2012-07-10 18:33:30 -0400] Zenigor: @jordane there arent any errors and the run list inside /etc/chef/first-boot.json is still full and correct. just it seems as the cookbook data isnt part of the node config
[2012-07-10 18:35:52 -0400] cnf: m00
[2012-07-10 18:36:47 -0400] jordane: Zenigor: What do you mean 'the cookbook data isn't part of the node config'?
[2012-07-10 18:36:55 -0400] jb____: hum.. running chef-solr withouth problems on one ubuntu 11.04, now installed another chef-solr on a ubuntu 11.04 and it complains about "Chef Solr is not installed or solr_home_path, solr_data_path, and solr_jetty_path are misconfigured"
[2012-07-10 18:37:10 -0400] cnf: silly java :
[2012-07-10 18:37:12 -0400] cnf: :P
[2012-07-10 18:37:13 -0400] jb____: but i'm sure that i've not configured solr on the first node at all.. so, any hints?
[2012-07-10 18:37:24 -0400] jb____: cnf: its openjkd on both
[2012-07-10 18:37:37 -0400] cnf: jb____: as i said, silly java :P
[2012-07-10 18:37:43 -0400] jb____: heh
[2012-07-10 18:37:53 -0400] jb____: too bad that doesnt help
[2012-07-10 18:37:57 -0400] jb____: ;)
[2012-07-10 18:38:02 -0400] cnf: true
[2012-07-10 18:38:52 -0400] jb____: its also the exact same version, meeeeh
[2012-07-10 18:39:17 -0400] cnf: jb____: there is only one thing worse than java problems :P
[2012-07-10 18:39:31 -0400] jb____: and bootstraping with chef-latest wont work too
[2012-07-10 18:39:54 -0400] cnf: jb____: java on OSX :P
[2012-07-10 18:39:58 -0400] jb____: haha
[2012-07-10 18:40:34 -0400] Zenigor: @jordane my bad, if you look at https://gist.github.com/3085420 you will see data for apache, postgres, etc. that info isnt populated in the new node
[2012-07-10 18:40:53 -0400] jb____: chef-solr states on the not-working machine, that i should use "chef-solr-installer"
[2012-07-10 18:40:59 -0400] jb____: which then replies with "STDERR: tar (child): /usr/lib/ruby/solr/solr-home.tar.gz: Cannot open: No such file or directory
[2012-07-10 18:41:11 -0400] jb____: no chance to find this solr-home.tar.gz anywhere..
[2012-07-10 18:41:19 -0400] hoover_damm: Zenigor, are you putting this instance in the development environment?
[2012-07-10 18:41:31 -0400] hoover_damm: you lack a -E development on your knife rackspace server create
[2012-07-10 18:41:41 -0400] hoover_damm: and as your gist shows that being an environment
[2012-07-10 18:42:30 -0400] CharlieSu: Interesting question.  I've got chef setup and working wonderfully across our systems, but I need it to do something just a little differently for a single process.  I'm using HAProxy on my weblayer and it builds its configuration file from a JSON structure that a webapp outputs.  I'd like to have a process running on these machines that acts just like chef but is much quicker and doesn't need to communicate with the Chef serv
[2012-07-10 18:43:29 -0400] jb____: CharlieSu: chef-solo? :)
[2012-07-10 18:44:01 -0400] CharlieSu: jb____: ?  good idea or are you making fun of my spelling?
[2012-07-10 18:44:08 -0400] jb____: no
[2012-07-10 18:44:30 -0400] CharlieSu: jb____: no what?
[2012-07-10 18:44:33 -0400] Zenigor: @hoover_damm ill try it with the -E flag, i just didn't see that flag in the knife rackspace gem
[2012-07-10 18:44:34 -0400] jb____: no, i'm serious
[2012-07-10 18:45:03 -0400] hoover_damm: Zenigor, that's why that data isn't getting assigned to the node.  It needs to be a part of that environment.
[2012-07-10 18:45:07 -0400] jb____: CharlieSu: chef-solo should do what you requested.. quicker since it doesnt communicates with chef-server
[2012-07-10 18:45:16 -0400] hoover_damm: Zenigor, atm chef-client / knife both call it -E so you can even run chef-client -E development on the server
[2012-07-10 18:45:20 -0400] CharlieSu: jb____: yeah that is what i was getting at...
[2012-07-10 18:45:22 -0400] hoover_damm: Zenigor, to put it in the development env
[2012-07-10 18:46:28 -0400] CharlieSu: jb____: well i suggested that..  will it work on a box that also uses the normal chef client?
[2012-07-10 18:50:23 -0400] cnf: hmm
[2012-07-10 18:50:54 -0400] cnf: trying to figure out if i should fork the nagios cookbook, or create a new one to manage configuring it.
[2012-07-10 18:51:08 -0400] jb____: CharlieSu: yes
[2012-07-10 18:59:43 -0400] jb____: ahh.. installing the chef-solr gem brings the solr-home.tar.gz
[2012-07-10 18:59:51 -0400] jb____: finally
[2012-07-10 19:00:12 -0400] jb____: and it works
[2012-07-10 19:00:13 -0400] jb____: surprise
[2012-07-10 19:01:33 -0400] Jay_Levitt: holy mother of god.. omnibus installer on OS X 10.7.4 is chewing up 100% CPU in rsync and making my brand-new Macbook Pro cry.  Normal?
[2012-07-10 19:01:58 -0400] forestbird: i don't see why (2.) would spare you the need of a passphrase for the ssh key (on the right) http://wiki.opscode.com/display/chef/Deploy+Resource#DeployResource-SCMResources
[2012-07-10 19:03:09 -0400] jtoft: Does anyone have any idea why, for whatever reason, these three particular servers I have are not searchable by role: prd-hadoop1, prd-hadoop2, prd-hadoop3. knife search node "role:hadoop" fails, even though all of them have the role[hadoop], but knife search node "hostname:*hadoop*" doesn't fail. Ideas?
[2012-07-10 19:03:27 -0400] jtoft: I've completely deleted the nodes, clients, and recreated them; still no luck
[2012-07-10 19:03:37 -0400] jtoft: every other node doesn't show this behavior
[2012-07-10 19:11:54 -0400] jtoft: Is there any way to manually index a node?
[2012-07-10 19:17:55 -0400] rbarrero: Hello
[2012-07-10 19:18:04 -0400] rbarrero: I'm looking for some guidance on delete ec2 nodes
[2012-07-10 19:18:11 -0400] rbarrero: I know I can do "knife ec2 server delete <Instance ID>"
[2012-07-10 19:18:27 -0400] rbarrero: but how do I get the instance ID from knife search?
[2012-07-10 19:18:57 -0400] asker_: knife ec2 server list
[2012-07-10 19:19:24 -0400] knuckolls: rbarrero: knife node show <node_name> -l | grep instance
[2012-07-10 19:20:08 -0400] rbarrero: ah
[2012-07-10 19:20:51 -0400] rbarrero: I was missing the long details there... thanks!
[2012-07-10 19:21:04 -0400] knuckolls: np it plagued me for a long time before i actually went and looked it up
[2012-07-10 19:21:18 -0400] rbarrero: cool, thx
[2012-07-10 19:21:35 -0400] rbarrero: wow, I didn't realize knife had all that data per node
[2012-07-10 19:21:42 -0400] rbarrero: basically ohai?
[2012-07-10 19:21:55 -0400] knuckolls: every chef run it reports back to the chef server with all the ohai data
[2012-07-10 19:22:15 -0400] knuckolls: knife node show is just dumping out everything the chef server knows about the node
[2012-07-10 19:23:58 -0400] spokrandt: does anyone have a link to more documentation on the application cookbook.  The git repo and the java-quick-start are a little thin on documentation.
[2012-07-10 19:28:47 -0400] rbarrero: so I guess it's a good thing to run chef-client as a daemon?
[2012-07-10 19:29:06 -0400] knuckolls: rbarrero: that changed my opinion of chef more than anything else
[2012-07-10 19:29:38 -0400] knuckolls: but you've got to be a little more careful with how you develop cookbooks and what cookbook versions make it up to production
[2012-07-10 19:29:42 -0400] knuckolls: that's why i use environments
[2012-07-10 19:29:51 -0400] knuckolls: and spork for ease of cookbook development
[2012-07-10 19:30:46 -0400] geekbri: In my experience, if you try to use chef as a "run only when I tell you to run, and dont run as a service constantly" you will probably be in a world of pain.
[2012-07-10 19:30:54 -0400] geekbri: although I know there are people doing that, and I think even some big companies.
[2012-07-10 19:31:10 -0400] knuckolls: i did that for about half a year and yes it was a world of pain compared to running it as a daemon
[2012-07-10 19:32:00 -0400] geekbri: I'm sure you can do it that way successfully, but I think it is very un-chef like, and adds a lot of issues that just aren't worth dealing with
[2012-07-10 19:32:15 -0400] geekbri: It feels to me a lot like trying to drive around in a car with square wheels.
[2012-07-10 19:46:38 -0400] jaylevitt: Hmm.. just installed omnibus on Mac (chef-full-10.12.0-1-mac_os_x-10.7.2-x86_64.sh) and chef-client says it can't find RubyGem chef: https://gist.github.com/964f1cc62cb2140266d9
[2012-07-10 19:48:29 -0400] jaylevitt: and /opt/opscode/embedded/bin/gem list looks suspiciously like our regular gem list.  Could rvm be doing something bad here?
[2012-07-10 19:48:37 -0400] segv: hey guys, on mac os x, the ifconfig resource, does this allow *multiple* ips on the same interface?
[2012-07-10 19:50:41 -0400] mhalligan: is there a way to make chef dump more data into a stacktrace? I've got an error that's killing my networking in a strange way, and I'm trying to figure out what's causing it. the stacktraces just give me the connectivity errors after that point
[2012-07-10 19:51:23 -0400] cnf: segv: something like sudo ifconfig en0 alias 192.168.0.101 255.255.255.0 ?
[2012-07-10 19:53:01 -0400] segv: cnf: well I mean it has the ifconfig resource, instead of "adding" it to the lo0 interface, it just overwrites the current one with the last address in my loop
[2012-07-10 19:53:20 -0400] segv: the default action of "add" on mac os x, literally appends the address vs. overwriting hte current interfae
[2012-07-10 19:54:06 -0400] segv: jesus i totally mistyped that all
[2012-07-10 19:54:11 -0400] cnf: hmm?
[2012-07-10 19:54:22 -0400] jtimberman: mhalligan: you can run chef-client -l debug for more information during the run, and the 'failed-run-data.json' file will have the entire resource collection when it failed.
[2012-07-10 19:54:44 -0400] jtimberman: mhalligan: but the stack trace is from the exception that occurred
[2012-07-10 19:54:57 -0400] jtimberman: usually what you really want is more context about the errro
[2012-07-10 19:55:08 -0400] segv: so say I have %w{127.0.0.1 127.0.0.2 127.0.0.5 127.0.0.6}.each do |address|
[2012-07-10 19:55:29 -0400] segv: ifconfig "#{address}" do \n device lo0 \n end
[2012-07-10 19:55:40 -0400] segv: it will *always* leave lo0 with .0.0.6
[2012-07-10 19:55:46 -0400] segv: instead of adding the on
[2012-07-10 19:56:11 -0400] segv: e.g. https://gist.github.com/0966655f3ae95aedd668
[2012-07-10 19:56:20 -0400] segv: that right there is generated from an "add"
[2012-07-10 19:56:25 -0400] cnf: i don't know how aliasing works in chef
[2012-07-10 19:56:30 -0400] segv: e.g. sudo ifconfig lo0 add 127.0.0.105
[2012-07-10 19:56:39 -0400] Urocyon: Buffer Playback...
[2012-07-10 19:56:39 -0400] Urocyon: [14:46:38] Hmm.. just installed omnibus on Mac (chef-full-10.12.0-1-mac_os_x-10.7.2-x86_64.sh) and chef-client says it can't find RubyGem chef: https://gist.github.com/964f1cc62cb2140266d9
[2012-07-10 19:56:39 -0400] Urocyon: [14:48:29] and /opt/opscode/embedded/bin/gem list looks suspiciously like our regular gem list.  Could rvm be doing something bad here?
[2012-07-10 19:56:39 -0400] Urocyon: [14:48:37] hey guys, on mac os x, the ifconfig resource, does this allow *multiple* ips on the same interface?
[2012-07-10 19:56:40 -0400] Urocyon: [14:50:41] is there a way to make chef dump more data into a stacktrace? I've got an error that's killing my networking in a strange way, and I'm trying to figure out what's causing it. the stacktraces just give me the connectivity errors after that point
[2012-07-10 19:57:01 -0400] segv: ?
[2012-07-10 19:57:08 -0400] segv: That's a nice bugger bug
[2012-07-10 19:57:22 -0400] linTest: I need to copy files between Windows nodes. Using ruby fileutils and 'net use' but wonder if there is a cleaner way?
[2012-07-10 19:57:24 -0400] segv: I do not know why my typing is failing today, brain, meet fingers.
[2012-07-10 19:57:47 -0400] cnf: hmz
[2012-07-10 19:58:17 -0400] cnf: what would you guys do to manage hosts in nagios? edit the existing cookbook, or create a new one?
[2012-07-10 19:58:28 -0400] segv: I edited the hell out of mine.
[2012-07-10 19:58:30 -0400] segv: Works just fine
[2012-07-10 19:58:33 -0400] miah: the nagios cookbook uses searches
[2012-07-10 19:58:46 -0400] miah: or databags..
[2012-07-10 19:59:02 -0400] cnf: miah: and...
[2012-07-10 19:59:15 -0400] segv: meh
[2012-07-10 19:59:21 -0400] segv: just gonna use a bash command to pass off the variables.
[2012-07-10 19:59:24 -0400] CharlieSu: can the http_request resource be used w/ a HTTPS connection?
[2012-07-10 20:00:23 -0400] Urocyon: Buffer Playback...
[2012-07-10 20:00:24 -0400] Urocyon: [14:46:38] Hmm.. just installed omnibus on Mac (chef-full-10.12.0-1-mac_os_x-10.7.2-x86_64.sh) and chef-client says it can't find RubyGem chef: https://gist.github.com/964f1cc62cb2140266d9
[2012-07-10 20:00:24 -0400] Urocyon: [14:48:29] and /opt/opscode/embedded/bin/gem list looks suspiciously like our regular gem list.  Could rvm be doing something bad here?
[2012-07-10 20:00:24 -0400] Urocyon: [14:48:37] hey guys, on mac os x, the ifconfig resource, does this allow *multiple* ips on the same interface?
[2012-07-10 20:00:24 -0400] Urocyon: [14:50:41] is there a way to make chef dump more data into a stacktrace? I've got an error that's killing my networking in a strange way, and I'm trying to figure out what's causing it. the stacktraces just give me the connectivity errors after that point
[2012-07-10 20:00:32 -0400] segv: haha
[2012-07-10 20:01:51 -0400] cnf: so no one uses the nagios cookbook besides segv ?
[2012-07-10 20:02:26 -0400] geekbri: sometimes "edit existing cookbook" practically turns into create a new one
[2012-07-10 20:03:16 -0400] cnf: geekbri: yeah, it seems like that
[2012-07-10 20:03:25 -0400] CharlieSu: cnf: nagios sucks..  look at Zabbix
[2012-07-10 20:03:31 -0400] cnf: but i prefer to edit existing cookbooks as little as possible
[2012-07-10 20:03:33 -0400] cnf: CharlieSu: no thank you
[2012-07-10 20:03:40 -0400] geekbri: my experience with zabbix was not a good one.
[2012-07-10 20:04:26 -0400] cnf: i dislike zabbix, a lot
[2012-07-10 20:04:50 -0400] CharlieSu: geekbri: I've used nagios, zabbix, zenoss and a few others.  Zabbix is the best free solution I found..
[2012-07-10 20:04:54 -0400] miah: cnf: i used it just fine at my previous job
[2012-07-10 20:05:00 -0400] miah: i plan on not using nagios much longer though
[2012-07-10 20:05:07 -0400] elijah-mbp: aw, zabbix is okay.  ;)    it's just what it is.
[2012-07-10 20:05:20 -0400] cnf: CharlieSu: i really don't like zabbix
[2012-07-10 20:05:24 -0400] miah: sensu!
[2012-07-10 20:05:32 -0400] yfeldblum: X sucks so look at Y; Y sucks so look at Z; Z sucks so look at X
[2012-07-10 20:05:34 -0400] CharlieSu: I've got zabbix monitoring over 200 servers at the moment.. works flawlessly
[2012-07-10 20:05:43 -0400] cnf: yfeldblum: word
[2012-07-10 20:05:54 -0400] cnf: and for now, it's nagios for legacy reasons
[2012-07-10 20:06:08 -0400] cnf: at least i can control it 100% from the cli
[2012-07-10 20:06:14 -0400] geekbri: yfeldblum: +1
[2012-07-10 20:06:16 -0400] cnf: no damned web GUI's
[2012-07-10 20:06:21 -0400] yfeldblum: CharlieSu, does zabbix make scrambled eggs and bacon for you every morning? my installation of Monitoring System XYZ does
[2012-07-10 20:06:44 -0400] geekbri: Honestly I don't think i've found a single monitoring system I do like.  I just dont have the time to write one.
[2012-07-10 20:06:46 -0400] elijah-mbp: CharlieSu: we hit our first scaling hump at 300, a second one around a thousand, a third one a few hundred machines after that.  all were database related.
[2012-07-10 20:06:49 -0400] yfeldblum: course, it doesn't monitor any servers, so that's its downside
[2012-07-10 20:06:58 -0400] cnf: CharlieSu: i will not use it as long as it relies on a webgui for configuration
[2012-07-10 20:06:59 -0400] cnf: yfeldblum: hehehe
[2012-07-10 20:07:11 -0400] elijah-mbp: cnf:  it has a perfectly good api you can use.
[2012-07-10 20:07:18 -0400] elijah-mbp: you have to speak JSONRPC though ;)
[2012-07-10 20:07:37 -0400] cnf: elijah-mbp: no thank you
[2012-07-10 20:07:51 -0400] geekbri: I've used opsview as well, which is just built on top of nagios.  meh.
[2012-07-10 20:08:06 -0400] forestbird: I don't see why (2.) would spare you the need of a passphrase for the ssh key (on the right) http://wiki.opscode.com/display/chef/Deploy+Resource#DeployResource-SCMResources
[2012-07-10 20:08:13 -0400] Urocyon: Buffer Playback...
[2012-07-10 20:08:13 -0400] Urocyon: [14:46:38] Hmm.. just installed omnibus on Mac (chef-full-10.12.0-1-mac_os_x-10.7.2-x86_64.sh) and chef-client says it can't find RubyGem chef: https://gist.github.com/964f1cc62cb2140266d9
[2012-07-10 20:08:13 -0400] Urocyon: [14:48:29] and /opt/opscode/embedded/bin/gem list looks suspiciously like our regular gem list.  Could rvm be doing something bad here?
[2012-07-10 20:08:13 -0400] Urocyon: [14:48:37] hey guys, on mac os x, the ifconfig resource, does this allow *multiple* ips on the same interface?
[2012-07-10 20:08:13 -0400] Urocyon: [14:50:41] is there a way to make chef dump more data into a stacktrace? I've got an error that's killing my networking in a strange way, and I'm trying to figure out what's causing it. the stacktraces just give me the connectivity errors after that point
[2012-07-10 20:08:29 -0400] geekbri: I'm going to introduce a new methodology.  User complaint emails as a monitoring service.  UCEaaMS
[2012-07-10 20:08:38 -0400] cnf: can someone ban that Urocyon bot?
[2012-07-10 20:08:46 -0400] forestbird: or does this have to be understood that both 1. and 2. are needed?
[2012-07-10 20:08:56 -0400] cnf: yfeldblum: i'm trying to decide how to manage my nagios hosts, edit the existing or create a new cookbook
[2012-07-10 20:08:58 -0400] elijah-mbp: ha!
[2012-07-10 20:09:09 -0400] yfeldblum: cnf, what's wrong with the existing?
[2012-07-10 20:09:47 -0400] cnf: yfeldblum: unless i am missing something (quite possible) i don't see how to manage my hosts to monitor with it.
[2012-07-10 20:11:09 -0400] cnf: also, why the hell does it install the client on the damned server :(
[2012-07-10 20:11:37 -0400] miah: geekbri: have you looked at sensu?
[2012-07-10 20:11:43 -0400] geekbri: miah: negatory, should I?
[2012-07-10 20:11:48 -0400] miah: yes
[2012-07-10 20:11:52 -0400] Urocyon: Buffer Playback...
[2012-07-10 20:11:52 -0400] Urocyon: [14:46:38] Hmm.. just installed omnibus on Mac (chef-full-10.12.0-1-mac_os_x-10.7.2-x86_64.sh) and chef-client says it can't find RubyGem chef: https://gist.github.com/964f1cc62cb2140266d9
[2012-07-10 20:11:52 -0400] Urocyon: [14:48:29] and /opt/opscode/embedded/bin/gem list looks suspiciously like our regular gem list.  Could rvm be doing something bad here?
[2012-07-10 20:11:53 -0400] Urocyon: [14:48:37] hey guys, on mac os x, the ifconfig resource, does this allow *multiple* ips on the same interface?
[2012-07-10 20:11:53 -0400] Urocyon: [14:50:41] is there a way to make chef dump more data into a stacktrace? I've got an error that's killing my networking in a strange way, and I'm trying to figure out what's causing it. the stacktraces just give me the connectivity errors after that point
[2012-07-10 20:12:10 -0400] geekbri: miah: I'll add it to my "to research" list
[2012-07-10 20:12:20 -0400] miah: http://www.youtube.com/watch?v=BXxtdE-Paco
[2012-07-10 20:12:24 -0400] miah: for some more details
[2012-07-10 20:12:53 -0400] miah: (or http://www.sonian.com/cloud-monitoring-sensu/)
[2012-07-10 20:12:59 -0400] segv: geekbri: pretty much, my nagios recipe is probably 1300 lines more than the original haha
[2012-07-10 20:13:09 -0400] geekbri: segv: sounds like my hadoop cookbook
[2012-07-10 20:13:14 -0400] segv: Too many individualized intances, when you have 20 one off boxes
[2012-07-10 20:13:20 -0400] miah: segv: is that a single recipe?
[2012-07-10 20:13:23 -0400] segv: that adds like 400 lines all by itself, including templates
[2012-07-10 20:13:23 -0400] segv: haha
[2012-07-10 20:13:25 -0400] yfeldblum: cnf, the cookbook, with some slight adjustments, works fine for me for monitoring all the hosts in the infrastructure
[2012-07-10 20:13:42 -0400] segv: Not including custom search matches and additions
[2012-07-10 20:13:56 -0400] segv: miah: yes, monolithic as hell.
[2012-07-10 20:14:02 -0400] segv: It's quite disturbing.
[2012-07-10 20:14:05 -0400] miah: gross
[2012-07-10 20:14:09 -0400] geekbri: oof 1300 in one recipe thats painful
[2012-07-10 20:14:13 -0400] cnf: right, is that a way of saying "you missed something, but i'm not telling you what"?
[2012-07-10 20:14:21 -0400] mhalligan: jtimberman: I do run -l debug but it doesn't actually show me what action was run immediately before the stacktrace. is there another way to do that? I'm trying to figure out what is breaking my network.
[2012-07-10 20:14:26 -0400] miah: heynow!
[2012-07-10 20:14:29 -0400] geekbri: haha
[2012-07-10 20:14:30 -0400] segv: haha
[2012-07-10 20:14:40 -0400] geekbri: Sorry, mama bird instincts kicked in
[2012-07-10 20:14:54 -0400] cnf: i tried the sensu cookbook
[2012-07-10 20:15:09 -0400] mhalligan: jtimberman: (ahh I missed your next msg). How do I go about geting more context then?
[2012-07-10 20:15:14 -0400] cnf: didn't work (what a surprise ^^;) so i went back to tinkering with the nagios one
[2012-07-10 20:16:30 -0400] geekbri: We currently use scout, its.... ok.
[2012-07-10 20:16:34 -0400] cnf: hmz
[2012-07-10 20:16:50 -0400] cnf: i really can't figure out how to configure nagios with this cookbook
[2012-07-10 20:17:11 -0400] cnf: and no one has anything useful to say
[2012-07-10 20:19:58 -0400] cnf: can't i run into a _single_ cookbook that just works...
[2012-07-10 20:20:15 -0400] geekbri: They are out there.  Although most cookbooks do require customization :)
[2012-07-10 20:20:39 -0400] cnf: it's damned frustrating >,<
[2012-07-10 20:21:32 -0400] CharlieSu: cnf: I'm able to configure all of my nodes via API w/ Zabbix...
[2012-07-10 20:22:54 -0400] cnf: CharlieSu: great for you, not useful for me
[2012-07-10 20:23:29 -0400] timsmith: cnf: I've been working heavily on the Nagios cookbook.  There's a lot missing.  I have a ton of pull requests open, but I have a bunch more stuff to push upstream soon
[2012-07-10 20:23:32 -0400] CharlieSu: cnf: just tryign to let you know you don't need a webui
[2012-07-10 20:24:05 -0400] cnf: timsmith: is it yours?
[2012-07-10 20:24:19 -0400] timsmith: multi environment monitoring, multi OS monitoring (don't apply linux checks on windows boxes), fixing the install from source, allow installing nrpe on centos from package, support event handlers
[2012-07-10 20:24:30 -0400] timsmith: it's not mine, but I've hacked the crap out of it lately to make it work
[2012-07-10 20:25:08 -0400] timsmith: I have it installing 3.4.1 on Ubuntu right now from source and monitoring windows/centos/ubuntu boxes in multiple environments with event handlers
[2012-07-10 20:25:10 -0400] mhalligan: jtimberman: ok I'm just going to blame hostedchef and amazon, the problem eventually wentaway on it's own
[2012-07-10 20:25:42 -0400] cnf: timsmith: 1) why the hell does nagios::server insist on installing ::client as well?
[2012-07-10 20:25:57 -0400] cnf: timsmith: and 2) how do i add hosts to nagios?
[2012-07-10 20:26:15 -0400] timsmith: cnf: I've always wondered
[2012-07-10 20:26:45 -0400] cnf: and 3) when do you expect your pull requests to be applied, and a new tag created? :P
[2012-07-10 20:26:52 -0400] timsmith: cnf:  It installs the client, but really you should have the client installed environment wide
[2012-07-10 20:27:03 -0400] cnf: timsmith: sorry?
[2012-07-10 20:27:06 -0400] timsmith: cnf: Hosts are populated with a search
[2012-07-10 20:27:16 -0400] cnf: you should have the client installed env wide?
[2012-07-10 20:27:18 -0400] cnf: what do you mean?
[2012-07-10 20:27:41 -0400] timsmith: cnf:  You'll need NRPE on the clients.  You could do non-NRPE checks, but you won't be happy with the results
[2012-07-10 20:27:50 -0400] cnf: why?
[2012-07-10 20:27:54 -0400] cnf: i don't use nrpe now
[2012-07-10 20:28:21 -0400] cnf: and search? i have 1 node in chef. there is nothing to search
[2012-07-10 20:28:25 -0400] timsmith: cnf:  Valid use case.  The NRPE client should probably be removed from chef server
[2012-07-10 20:28:54 -0400] timsmith: it'll search for all nodes and then just populate itself
[2012-07-10 20:29:00 -0400] timsmith: as you add / remove nodes it'll get those nodes
[2012-07-10 20:29:08 -0400] cnf: yeah, that's useless to me
[2012-07-10 20:29:25 -0400] timsmith: that's just how it does it
[2012-07-10 20:29:37 -0400] timsmith: if you had hundreds you would want it to find them all
[2012-07-10 20:29:44 -0400] cnf: so i'm back to my original question
[2012-07-10 20:29:48 -0400] jaylevitt: Could somebody who's successfully used the omnibus installer paste me the output of /opt/opscode/embedded/bin/gem environment?
[2012-07-10 20:29:49 -0400] timsmith: the config impact to you is nothing though.  It'll just find the single node
[2012-07-10 20:29:53 -0400] cnf: should i extend the nagios cookbook?
[2012-07-10 20:29:59 -0400] cnf: or make my own, to add hosts to nagios
[2012-07-10 20:30:15 -0400] timsmith: is your goal to monitor hosts that aren't in chef?
[2012-07-10 20:30:18 -0400] yfeldblum: cnf, how would you like a nagios cookbook to work?
[2012-07-10 20:30:38 -0400] cnf: yfeldblum: a data bag with hosts / services would be nice
[2012-07-10 20:30:59 -0400] cnf: even when (eventually, in a long time) every single host on this network is chef controlled
[2012-07-10 20:31:11 -0400] cnf: i'll still have external hosts to check, which are outside my control
[2012-07-10 20:31:25 -0400] cnf: and how do you define dependancies, if it does a search?
[2012-07-10 20:31:34 -0400] cnf: how does it know where the switches / routers are?
[2012-07-10 20:31:46 -0400] cnf: and what are physical machines, and which ones are virtual?
[2012-07-10 20:31:54 -0400] timsmith: there's no concept of dependancies at the moment
[2012-07-10 20:32:01 -0400] cnf: exactly
[2012-07-10 20:32:01 -0400] timsmith: services are defined in a nagios_services databag
[2012-07-10 20:32:08 -0400] timsmith: I've added a nagios_eventhandlers data bag
[2012-07-10 20:32:24 -0400] cnf: i need a nagios_hosts databag
[2012-07-10 20:32:36 -0400] cnf: (or just a nagios databag, with evertything in it)
[2012-07-10 20:32:38 -0400] timsmith: nothing would stop you from extending the data bag items to be dependent on other data items
[2012-07-10 20:32:56 -0400] timsmith: the concept of dependencies was on my personal roadmap
[2012-07-10 20:33:02 -0400] cnf: timsmith: right, so my original question was
[2012-07-10 20:33:10 -0400] cnf: should i extend the existing cookbook?
[2012-07-10 20:33:14 -0400] cnf: or make my own?
[2012-07-10 20:34:05 -0400] yfeldblum: cnf, if the way you want to configure nagios differs widely from the way the existing opscode-cookbooks/nagios cookbook does it, you may prefer to a) roll your own or b) extend the original and contribute back the changes
[2012-07-10 20:34:18 -0400] cnf: yfeldblum: even if every single machine that can be put in chef is in chef, there would still be a bunch of routers switches etc that i'd need to monitor
[2012-07-10 20:34:45 -0400] cnf: yfeldblum: yes, i know, that has been the question for some time now :/
[2012-07-10 20:35:10 -0400] yfeldblum: cnf, can you see a way to extend the original to encompass your additional goals?
[2012-07-10 20:35:34 -0400] timsmith: you might want to fork that one
[2012-07-10 20:35:39 -0400] cnf: timsmith: and i think the discovery is a good thing. just not if it's the only way ^^;
[2012-07-10 20:35:53 -0400] yfeldblum: cnf, can you see how it could be extended, even if you're not sure how you would do it yourself?
[2012-07-10 20:36:05 -0400] cnf: yfeldblum: i don't know, i lack a ton of experience in doing this
[2012-07-10 20:36:52 -0400] timsmith: so other option you have that's a bit less clean, but works
[2012-07-10 20:36:58 -0400] timsmith: for the hosts you want to add
[2012-07-10 20:37:01 -0400] timsmith: just put them in the template
[2012-07-10 20:37:07 -0400] cnf: timsmith: yeah, but then i'll have to deal with merging upstream changes etc
[2012-07-10 20:37:10 -0400] timsmith: My previous nagios / chef setup had that
[2012-07-10 20:37:17 -0400] cnf: and hope they don't collide with my stuff ^^;
[2012-07-10 20:37:19 -0400] timsmith: if you fork it you'll be in that boat anyways
[2012-07-10 20:37:38 -0400] timsmith: at the moment the nagios cookbook always requires a bit of custom editing
[2012-07-10 20:37:46 -0400] cnf: timsmith: atm, it's about 80 hosts
[2012-07-10 20:38:01 -0400] timsmith: I hope to fix that down the road.  My company heavily relies on this cookbook
[2012-07-10 20:38:26 -0400] cnf: i was thinking of making a databag with host => [service, list] etc items
[2012-07-10 20:38:36 -0400] cnf: and use that to build my config files
[2012-07-10 20:38:41 -0400] timsmith: it would be nice though if Opscode would merge some of the outstanding pull requests
[2012-07-10 20:38:56 -0400] timsmith: you'd probably want to just fork the cookbook then
[2012-07-10 20:38:57 -0400] cnf: timsmith: and unify all nagios stuff in one nagios databag
[2012-07-10 20:39:11 -0400] cnf: timsmith: you know, just give it a key "host" or "service" etc
[2012-07-10 20:41:06 -0400] cnf: hmz
[2012-07-10 20:41:25 -0400] cnf: damnit, it's a lot to take in all at once
[2012-07-10 20:45:08 -0400] cnf: and not really any clearer, either
[2012-07-10 20:45:31 -0400] miah: the nagios cookbook already supports that i thought?
[2012-07-10 20:45:50 -0400] cnf: miah: supports what?
[2012-07-10 20:45:53 -0400] miah: databags
[2012-07-10 20:46:16 -0400] cnf: yes, for users and services
[2012-07-10 20:46:19 -0400] cnf: not for hosts
[2012-07-10 20:46:25 -0400] cnf: as far as i can see, anyway
[2012-07-10 20:46:37 -0400] miah: because hosts are ephemeral
[2012-07-10 20:46:49 -0400] miah: host centric network = failsauce
[2012-07-10 20:47:00 -0400] cnf: bullshit
[2012-07-10 20:47:25 -0400] miah: i'm a big fan of defining roles and making sure they provide my services
[2012-07-10 20:47:41 -0400] miah: i don't care about the actual 'hosts' in the same regard
[2012-07-10 20:47:45 -0400] cnf: good for you
[2012-07-10 20:47:51 -0400] miah: i monitor them, but logging into a single host? not a great thing
[2012-07-10 20:48:00 -0400] cnf: i like monitoring my network as well
[2012-07-10 20:48:04 -0400] miah: its a good way to create divergence
[2012-07-10 20:48:09 -0400] miah: cnf: awesome
[2012-07-10 20:48:13 -0400] cnf: and most machines are not in chef yet
[2012-07-10 20:48:16 -0400] miah: :(
[2012-07-10 20:48:19 -0400] miah: i know how that goes
[2012-07-10 20:48:25 -0400] miah: yu'll get there
[2012-07-10 20:48:31 -0400] miah: just go a role at a time
[2012-07-10 20:48:39 -0400] cnf: and still, i need to monitor my network as well
[2012-07-10 20:48:45 -0400] cnf: not to mention external dependencies
[2012-07-10 20:48:49 -0400] miah: yup
[2012-07-10 20:48:57 -0400] miah: so what i would do
[2012-07-10 20:49:05 -0400] miah: is extend the existing nagios cookbook and push the changes upstream
[2012-07-10 20:49:07 -0400] cnf: so while detecting nodes is _great_
[2012-07-10 20:49:21 -0400] cnf: i need other ways of defining them
[2012-07-10 20:49:21 -0400] miah: ya, nodes is fail if its networking gear that lives outside of chef
[2012-07-10 20:49:51 -0400] cnf: miah: and i don't see how i can define dependencies with searches...
[2012-07-10 20:50:01 -0400] miah: but i think you can define nodes arbitrarily
[2012-07-10 20:50:03 -0400] cnf: but that might be just me
[2012-07-10 20:50:18 -0400] miah: so you could probably just create a node for each network resource. it doesn't have to have a unique client key associated with it
[2012-07-10 20:50:39 -0400] cnf: hmm
[2012-07-10 20:51:05 -0400] miah: afaik, nobody has really tried to solve the 'network hosts in chef' yet
[2012-07-10 20:51:12 -0400] cnf: uhu
[2012-07-10 20:51:28 -0400] cnf: and i still don't get how searching nodes tells nagios what services to monitor
[2012-07-10 20:51:42 -0400] miah: i suspect you'd have to run multiple chef-client instances on a single client/node host, and each of those chef client instances would manage a different 'remote' node
[2012-07-10 20:51:58 -0400] miah: cnf: ya. you have to define a way to announce the services
[2012-07-10 20:52:11 -0400] miah: so, typically you can do that with some attribute magic and roles
[2012-07-10 20:52:21 -0400] cnf: i mean, it would work for nrpe, but that's for internal stuff, not for services
[2012-07-10 20:52:26 -0400] miah: ya
[2012-07-10 20:52:45 -0400] cnf: hmm, i could set up attributes in roles to define services
[2012-07-10 20:52:56 -0400] hoover_damm: woops miah is not talking with herself again
[2012-07-10 20:53:13 -0400] miah: ?
[2012-07-10 20:53:24 -0400] cnf: hmm, but how do i safely define dependencies...
[2012-07-10 20:54:03 -0400] cnf: wonder if ohai detects xen dom0's...
[2012-07-10 20:54:06 -0400] miah: i think you could define depenancies similarly. if you define a service via attribute, you could create a subkey that declares dependancies.
[2012-07-10 20:54:24 -0400] miah: hoover_damm: is it bad when i talk to people other than myself?
[2012-07-10 20:54:38 -0400] cnf: miah: yes, but a "role" can't define a switch as a dependency
[2012-07-10 20:54:51 -0400] cnf: miah: because a "webserver" can be anywhere on the network
[2012-07-10 20:55:27 -0400] hoover_damm: miah, nah I had the person you were talking to on ignore
[2012-07-10 20:55:46 -0400] cnf: maybe i should do the same
[2012-07-10 20:55:52 -0400] jperry2: is it best practice to store the version of an rpm you want to use in the cookbook attribute, role, environment?
[2012-07-10 20:56:10 -0400] jperry2: it will also be a version number that will change frequently
[2012-07-10 20:56:53 -0400] jperry2: also what would be a sensible default?
[2012-07-10 20:57:07 -0400] jperry2: set version to nil?
[2012-07-10 20:57:55 -0400] chip-: jperry2: Depends entirely what granularity you want?
[2012-07-10 20:58:11 -0400] jperry2: well it will be an application that we'll deploy frequently
[2012-07-10 20:58:15 -0400] chip-: Attributes can be in all 3 places, best practice depends on your implementation.
[2012-07-10 20:58:30 -0400] chip-: I subscribe to "attributes belong in environments" myself, but it depends on your workflow.
[2012-07-10 20:58:37 -0400] jperry2: I see
[2012-07-10 20:58:43 -0400] chip-: (see also: the knife-spork plugin, and etsy's workflow, which is pretty nice.)
[2012-07-10 20:58:54 -0400] cnf: hmmweird
[2012-07-10 20:58:55 -0400] jperry2: okay
[2012-07-10 20:58:55 -0400] jperry2: thx
[2012-07-10 20:58:57 -0400] chip-: Generally cookbooks get sane defaults
[2012-07-10 20:59:19 -0400] chip-: and my roles are VERY generic ("Java", "apache2", "nginx")
[2012-07-10 20:59:24 -0400] chip-: and contain few attributes
[2012-07-10 20:59:27 -0400] miah: cnf: sure. i suppose it would be difficult to tie things to a specific switch.
[2012-07-10 20:59:34 -0400] miah: hoover_damm: ah =)
[2012-07-10 20:59:36 -0400] chip-: and then environments hold attributes.
[2012-07-10 20:59:48 -0400] cnf: miah: which isn't unimportant
[2012-07-10 20:59:49 -0400] miah: i use to have a massive ignore list.. but then i started on estrogen.. ;)
[2012-07-10 20:59:52 -0400] jperry2: chip? you have a link to etsy's workflow?
[2012-07-10 20:59:56 -0400] miah: cnf: ya
[2012-07-10 21:00:10 -0400] knuckolls: jperry2: this is it https://github.com/jonlives/knife-spork
[2012-07-10 21:00:13 -0400] knuckolls: i use it as well.
[2012-07-10 21:00:23 -0400] chip-: That opens up roles to be places where I can put beautiful unique snowflake configs, if I have to have some.
[2012-07-10 21:00:26 -0400] jperry2: yeah we use that tool
[2012-07-10 21:00:27 -0400] cnf: i rarely use my client to ignore anyone
[2012-07-10 21:00:44 -0400] chip-: http://www.youtube.com/watch?v=nSnJCJiZDDU is a GREAT talk from chefconf about Etsy's workflow
[2012-07-10 21:00:55 -0400] jperry2: cool
[2012-07-10 21:00:56 -0400] jperry2: thx
[2012-07-10 21:00:58 -0400] knuckolls: ah i'd only seen those slides. didn't know there was a youtube
[2012-07-10 21:01:01 -0400] jonlives: also, I'm usually in here if y'all have any questions :)
[2012-07-10 21:01:03 -0400] chip-: More: https://github.com/jonlives/velocity_resources
[2012-07-10 21:01:06 -0400] miah: cnf: i suspect there is still a way to do it. you probably just need to cull more details from the switch itself. if you can tie nodes(a nginx webserver) to resources on the other nodes(a port on a switch) you should be able to do this
[2012-07-10 21:01:07 -0400] cnf: hmz :/
[2012-07-10 21:01:26 -0400] jonlives: slideshare of that velocity talk too: http://www.slideshare.net/jonlives/michelin-starred-cooking-with-chef
[2012-07-10 21:01:38 -0400] chip-: There video of the velocity talk?
[2012-07-10 21:01:47 -0400] cnf: miah: yeah, but that gets complex, fast
[2012-07-10 21:01:59 -0400] jonlives: chip-: as it was a tutorial it's likely to be behind an O'Reilly paywall I'm afraid.
[2012-07-10 21:02:11 -0400] chip-: Boo-urns.
[2012-07-10 21:02:31 -0400] miah: cnf: yup
[2012-07-10 21:02:56 -0400] miah: its a good thing we have computers to manage that dependancy chain for us though =)
[2012-07-10 21:02:57 -0400] cnf: i think for now, i'll make it so i can add everything manually
[2012-07-10 21:03:03 -0400] miah: ya
[2012-07-10 21:03:04 -0400] miah: start small
[2012-07-10 21:03:23 -0400] cnf: i'll make my own cookbook, i think
[2012-07-10 21:03:32 -0400] cnf: i'd rather not touch the current one
[2012-07-10 21:03:57 -0400] chip-: jonlives: Pretty much every time I've thought "Man, I'd like to do  with Chef" you guys have already done it.
[2012-07-10 21:04:09 -0400] chip-: It's gotten to the point that I really just start cruising your github before I even google.
[2012-07-10 21:04:15 -0400] jonlives: :p
[2012-07-10 21:04:55 -0400] jonlives: glad to be of help!
[2012-07-10 21:05:11 -0400] jaylevitt: I'm trying to update the Fast Start wiki... did knife once look for config info in ~/chef-repo/.chef?  Looks like it now expects it in #{current_dir}, but I'm not sure I get the moving parts yet.
[2012-07-10 21:10:08 -0400] jaylevitt: ...ok, is there a better place for newbie questions then?
[2012-07-10 21:11:59 -0400] cnf: also, screw sensu
[2012-07-10 21:13:02 -0400] jessicab: jaylevitt: it should look in the .chef directory in the current dir for the file, it looks a few other places too.. normally we just recommend having people run knife commands from ~/chef-repo so the .chef directory in there is used http://wiki.opscode.com/display/chef/Knife#Knife-Knifeconfiguration
[2012-07-10 21:13:15 -0400] jaylevitt: jessicab: hey, I was just about to email you :)
[2012-07-10 21:13:44 -0400] paulmooring: jaylevitt: it looks in ./.chef first then ~/.chef finally /etc/chef
[2012-07-10 21:17:13 -0400] knuckolls: as i understand it, it goes up the directory tree from where you are looking for .chef folders starting with the current directory
[2012-07-10 21:19:49 -0400] jaylevitt: nope: https://gist.github.com/1883d54a1c9f755552a4
[2012-07-10 21:21:45 -0400] jaylevitt: (paulmooring: jessicab: )
[2012-07-10 21:23:02 -0400] jessicab: jaylevitt: did you change the knife.rb at all? it seems like it finds the knife config, but cant find where its specifying the user key is?
[2012-07-10 21:23:13 -0400] jaylevitt: Nope, that's freshly generated
[2012-07-10 21:24:24 -0400] jessicab: jaylevitt: is your knife.rb not in .chef with the keys?
[2012-07-10 21:24:40 -0400] jaylevitt: ....DOH
[2012-07-10 21:25:06 -0400] jaylevitt: I can follow directions!  ::sigh:: thanks.
[2012-07-10 21:25:36 -0400] jessicab: np, it happens :P
[2012-07-10 21:26:37 -0400] jaylevitt: (that said, I'm pretty sure registering for a new account now drops you on the documentation landing page, so you never actually see your keys.  But I'm not positive.)
[2012-07-10 21:27:42 -0400] cnf: i should get a title
[2012-07-10 21:27:49 -0400] cnf: "chef crasher" or something
[2012-07-10 21:32:28 -0400] mattray: cnf: Community QA Lead?
[2012-07-10 21:32:36 -0400] cnf: mattray: haha :P
[2012-07-10 21:33:37 -0400] cnf: hmm, is it normal chef recreates a file on every run, even though nothing has changed?
[2012-07-10 21:33:55 -0400] chip-: No. Something changed. Is it writing a timestamp inside the file?
[2012-07-10 21:34:23 -0400] cnf: nope
[2012-07-10 21:34:56 -0400] cnf: chip-: a diff in /srv/chef/cache/etc/httpd shows me they are identical
[2012-07-10 21:36:10 -0400] jessicab: cnf: i think its actually comparing the md5sum of the file locally and on the server, if that helps at all
[2012-07-10 21:36:25 -0400] cnf: jessicab: it's generated from a template
[2012-07-10 21:41:48 -0400] cnf: hmz, wth?
[2012-07-10 21:42:08 -0400] cnf: really, i seem to crash every single cookbook i use
[2012-07-10 21:43:16 -0400] dwhsix: hoover_damm: you around?
[2012-07-10 21:43:24 -0400] hoover_damm: dwhsix, sort of
[2012-07-10 21:43:28 -0400] dwhsix: lol
[2012-07-10 21:43:38 -0400] dwhsix: so w/ your redis cookbook
[2012-07-10 21:43:51 -0400] dwhsix: all I should need is
[2012-07-10 21:43:51 -0400] dwhsix:     "recipe[redis::server]",
[2012-07-10 21:43:54 -0400] dwhsix: right?
[2012-07-10 21:44:03 -0400] hoover_damm: dwhsix, correct.  You will need my sysctl cookbook as well
[2012-07-10 21:44:05 -0400] dwhsix: when I have only that, seems like redis isn't even getting installed
[2012-07-10 21:44:12 -0400] hoover_damm: this is runit based
[2012-07-10 21:44:15 -0400] dwhsix: but if I add     "recipe[redis::install_from_package]",
[2012-07-10 21:44:35 -0400] hoover_damm: do you have 2 redis cookbooks uploaded?
[2012-07-10 21:44:41 -0400] dwhsix: I get error w/ usermod cause the redis user is logged in...
[2012-07-10 21:44:55 -0400] dwhsix: oh let me make sure I'm clean
[2012-07-10 21:45:34 -0400] hoover_damm: dwhsix, if you have knife-essentialls installed
[2012-07-10 21:45:39 -0400] hoover_damm: i'd love it if you could do the following
[2012-07-10 21:45:44 -0400] hoover_damm: knife show /cookbooks/redis/attributes/default.rb
[2012-07-10 21:45:47 -0400] hoover_damm: and gist the output
[2012-07-10 21:46:16 -0400] dwhsix: ack, don't have knife-essentials, hang on
[2012-07-10 21:46:40 -0400] hoover_damm: default[:redis][:installation_preference] = "upstream"
[2012-07-10 21:46:43 -0400] hoover_damm: you should see that in it
[2012-07-10 21:46:44 -0400] jperry2: is there a chef resource for recursively setting the owner and group of a directory that already exists?
[2012-07-10 21:47:01 -0400] hoover_damm: basically when you can't identify up or down knife-essentials is an essential tool
[2012-07-10 21:47:04 -0400] hoover_damm: in giving me direction
[2012-07-10 21:47:42 -0400] jperry2: or is it recommended to use execute?
[2012-07-10 21:47:57 -0400] jperry2: and use "chown -R user:group"?
[2012-07-10 21:48:18 -0400] dwhsix: hoover_damm: https://gist.github.com/3086434
[2012-07-10 21:48:55 -0400] dwhsix: hmm not seeing that
[2012-07-10 21:49:04 -0400] dwhsix: maybe I have cruft from my old redis cookbook(s)...
[2012-07-10 21:49:10 -0400] unixguy: installed chef-full per directions for omnibus, am now getting the following when attempting to install chef-server via chef-solo: http://pastebin.com/pBKJZMFY
[2012-07-10 21:49:25 -0400] unixguy: anyone seen this before?
[2012-07-10 21:49:32 -0400] hoover_damm: dwhsix, could be
[2012-07-10 21:49:35 -0400] hoover_damm: time to purge it
[2012-07-10 21:49:37 -0400] hoover_damm: and reupload
[2012-07-10 21:49:45 -0400] unixguy: os is centos 6.2
[2012-07-10 21:49:48 -0400] jperry2: whats in the stacktrace?
[2012-07-10 21:49:57 -0400] unixguy: sec ill post it
[2012-07-10 21:51:12 -0400] dwhsix: hoover_damm: purge is there specific command for that?
[2012-07-10 21:51:29 -0400] hoover_damm: dwhsix, knife cookbook delete redis
[2012-07-10 21:51:29 -0400] dwhsix: or do you just mean make sure it's cleaned up
[2012-07-10 21:51:32 -0400] dwhsix: ah
[2012-07-10 21:51:34 -0400] dwhsix: got it
[2012-07-10 21:51:34 -0400] hoover_damm: dwhsix, make sure you delete all of them
[2012-07-10 21:51:38 -0400] unixguy: stackstrace here: http://pastebin.com/gEpWkM2L
[2012-07-10 21:51:44 -0400] hoover_damm: this is the unfortunate problem with the name 'redis'
[2012-07-10 21:53:27 -0400] dwhsix: yeah, geez, the one in the chef server was some other version entirely.   sorry
[2012-07-10 21:53:44 -0400] jperry2: @unixguy: nothing is standing out
[2012-07-10 21:53:54 -0400] jperry2: have you tried knife-server plugin?
[2012-07-10 21:53:57 -0400] jperry2: works great
[2012-07-10 21:55:12 -0400] unixguy: the omnibus rpm is supposed to install everything this needs to go out of the box right?
[2012-07-10 21:55:54 -0400] jperry2: not sure
[2012-07-10 21:55:55 -0400] hoover_damm: dwhsix, nbd
[2012-07-10 21:55:56 -0400] jperry2: sorry
[2012-07-10 21:56:07 -0400] hoover_damm: dwhsix, I've ran into 5 different redis cookbooks in the past 6 months
[2012-07-10 21:56:49 -0400] chip-: I wrote my own damn
[2012-07-10 21:57:22 -0400] chip-: So sick of bad Redis cookbooks.
[2012-07-10 21:57:52 -0400] hoover_damm: we all did
[2012-07-10 21:58:13 -0400] hoover_damm: not sure how many set vm.overcommit_memory
[2012-07-10 21:58:15 -0400] hoover_damm: but mine does
[2012-07-10 21:58:54 -0400] hoover_damm: so when did /etc/sysctl.d come around?
[2012-07-10 21:58:56 -0400] hoover_damm: anyone remember?
[2012-07-10 21:59:19 -0400] hoover_damm: asking the wrong crowd prolly
[2012-07-10 22:02:15 -0400] Majost: I am having a little trouble understanding something in the sudo cookbook
[2012-07-10 22:02:29 -0400] Majost: %sysadmin     ALL=(ALL) <%= "NOPASSWD:" if @passwordless %>ALL
[2012-07-10 22:02:51 -0400] Majost: how do I set the passwordless value so the nopasswd option is set?
[2012-07-10 22:02:51 -0400] chip-: hoover_damm: Mine does too
[2012-07-10 22:03:16 -0400] chip-: I wish the company lawyers would get off their asses so I could publish this before I switch jobs in 2 weeks
[2012-07-10 22:03:19 -0400] chip-: but it seems unlikely
[2012-07-10 22:03:24 -0400] chip-:  :( Hate throwing away code because I switch gigs.
[2012-07-10 22:04:47 -0400] hoover_damm: throwing away code is good
[2012-07-10 22:04:55 -0400] hoover_damm: think about how you can do it again
[2012-07-10 22:05:13 -0400] hoover_damm: you know what you did last time, know how you could do it better perhaps? easy opportunity
[2012-07-10 22:05:21 -0400] hoover_damm: will take a lot less time i promise
[2012-07-10 22:05:39 -0400] hoover_damm: throwing away code no matter how small nor big is super vital
[2012-07-10 22:05:48 -0400] hoover_damm: saves a heap of time for me
[2012-07-10 22:06:14 -0400] hoover_damm: people who don't throw away code... you can flip a coin on how long it'll take them to fix their cookbook
[2012-07-10 22:06:19 -0400] hoover_damm: and you'll still be off by 6months
[2012-07-10 22:08:51 -0400] dwhsix: woohoo! chef-client actually ran to completion...
[2012-07-10 22:09:50 -0400] JasonF: Is there a preferred way to write to /proc or /sys in chef? Should a simple file block work?
[2012-07-10 22:09:50 -0400] hoover_damm: :)
[2012-07-10 22:10:14 -0400] hoover_damm: JasonF, file resource?
[2012-07-10 22:10:36 -0400] hoover_damm: JasonF, i'm sure you could overarchitect it and include augeas and several other unnneccesary gems
[2012-07-10 22:10:44 -0400] hoover_damm: but file "/proc/something/bar" do content "1" end
[2012-07-10 22:10:46 -0400] hoover_damm: should work
[2012-07-10 22:10:53 -0400] JasonF: okay, cool.
[2012-07-10 22:11:15 -0400] Majost: okay... just figured out part of the sudo cookbook issue (rtfm)
[2012-07-10 22:11:48 -0400] Majost: but I am not clear where the authorization section goes in a json role
[2012-07-10 22:12:25 -0400] Majost: is it a new section all together, or  a sub of say, "env_run_lists"
[2012-07-10 22:15:07 -0400] chip-: hoover_damm: I JUST wrote it last month. It's a solid cookbook, uses ark and everything! Plus attributizing the newest Redis conf file took some time.
[2012-07-10 22:15:21 -0400] chip-: I should see if there are sublime text macros for taking a conf file and rendering it into an attribute file.
[2012-07-10 22:15:26 -0400] chip-: If they don't exist, maybe I'll try to write some.
[2012-07-10 22:15:34 -0400] chip-: Anyway. Speaking of Redis, this is neat: https://github.com/kumarnitin/RedisLive
[2012-07-10 22:16:10 -0400] hoover_damm: chip-, sounds like overcare
[2012-07-10 22:16:17 -0400] hoover_damm: chip-, you can use miahs or mine and not worry
[2012-07-10 22:16:33 -0400] chip-: Probably true.
[2012-07-10 22:16:46 -0400] chip-: I wrote it with an eye toward publishing, so I definitely overcared in this case.
[2012-07-10 22:17:07 -0400] hoover_damm: I tried to get most bits in mine
[2012-07-10 22:17:22 -0400] hoover_damm: and I know I totally overcared
[2012-07-10 22:18:47 -0400] Majost: got it
[2012-07-10 22:18:56 -0400] hoover_damm: chip-, you like running monitor on your redis instances?
[2012-07-10 22:19:27 -0400] hoover_damm: people forget that profiling costs
[2012-07-10 22:19:30 -0400] chip-: hoover_damm: Not continuously, but it's nice for profiling.
[2012-07-10 22:19:45 -0400] hoover_damm: sides there's better ways to profile redis
[2012-07-10 22:20:01 -0400] hoover_damm: graph 'info' :) to graphite
[2012-07-10 22:20:01 -0400] hoover_damm: win
[2012-07-10 22:20:55 -0400] chip-: I just thought it a neat tool worth sharing, for instances when quick & dirty would be useful.
[2012-07-10 22:21:24 -0400] hoover_damm: monitor is just as useful :)
[2012-07-10 22:22:04 -0400] gondoi: I'm trying to check the version of chef with node[:chef][:version], but it's a string so how do i check for > 0.10.10?
[2012-07-10 23:01:14 -0400] masterkorp: http://s.rapimg.com/ipix_new/pkw/24/184/p7318424_4x.jpg
[2012-07-10 23:01:16 -0400] masterkorp: oops
[2012-07-10 23:19:55 -0400] PRK_nz: I'm having trouble creating a directory via Chef on a Windows node, any able to help?
[2012-07-10 23:20:21 -0400] masterkorp: errors please
[2012-07-10 23:20:48 -0400] masterkorp: (btw my i assume that windows are installed on walls)
[2012-07-10 23:20:59 -0400] PRK_nz: ;)
[2012-07-10 23:21:09 -0400] PRK_nz: C:/opscode/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-0.10.8/lib/chef/config.rb:88:in `initialize': No such file or directory - C:\chef\logs\20120710_2237.log (Errno::ENOENT)
[2012-07-10 23:21:40 -0400] erikh: check your chef configuration
[2012-07-10 23:21:43 -0400] PRK_nz: and in my client.rb file is:
[2012-07-10 23:21:46 -0400] PRK_nz: log = "C:\\chef\\logs\\" + Time.now.strftime("%Y%m%d_%H%M") + ".log"
[2012-07-10 23:21:46 -0400] erikh: unix-wise it's /etc/chef/client.rb
[2012-07-10 23:21:48 -0400] PRK_nz: directory "#{log}" do
[2012-07-10 23:21:50 -0400] PRK_nz:   inherits true
[2012-07-10 23:21:52 -0400] PRK_nz:   action :create
[2012-07-10 23:21:54 -0400] PRK_nz: end
[2012-07-10 23:21:55 -0400] erikh: don't paste here
[2012-07-10 23:21:56 -0400] PRK_nz: log_location log
[2012-07-10 23:21:58 -0400] PRK_nz: sorry
[2012-07-10 23:22:05 -0400] erikh: gist.github.com next time
[2012-07-10 23:22:07 -0400] erikh: :)
[2012-07-10 23:22:10 -0400] PRK_nz: thanks
[2012-07-10 23:22:24 -0400] erikh: so, I don't think resources work in client.rb
[2012-07-10 23:22:38 -0400] PRK_nz: hmm, that would explain it :)
[2012-07-10 23:22:46 -0400] erikh: try this
[2012-07-10 23:22:59 -0400] erikh: require 'fileutils'; FileUtils.mkdir_p("c:/chef/logs")
[2012-07-10 23:23:21 -0400] erikh: not sure how well that works on windows, though.
[2012-07-10 23:23:34 -0400] PRK_nz: ok, I'll give it a try, thanks
[2012-07-10 23:23:35 -0400] rbarrero: knife ssh executes in parallel correct?
[2012-07-10 23:23:40 -0400] erikh: correct
[2012-07-10 23:24:22 -0400] rbarrero: any flag to serialize execution?
[2012-07-10 23:24:48 -0400] erikh: not sure. you could check the help, though.
[2012-07-10 23:26:07 -0400] masterkorp: rbarrero: why would you need to seriablize ?
[2012-07-10 23:26:11 -0400] masterkorp: i am curious
[2012-07-10 23:26:29 -0400] rbarrero: sure... well, restarting tomcat for example on all nodes at once would cause an outage
[2012-07-10 23:26:37 -0400] masterkorp: yeah
[2012-07-10 23:26:57 -0400] rbarrero: so I can do a lookup of all nodes
[2012-07-10 23:27:03 -0400] masterkorp: No systemd ?
[2012-07-10 23:27:08 -0400] masterkorp: i love systemd for that
[2012-07-10 23:27:15 -0400] rbarrero: and do a 'ssh' to each system
[2012-07-10 23:27:20 -0400] rbarrero: kludgey though
[2012-07-10 23:27:45 -0400] rbarrero: I was hoping for an alternative using Knife
[2012-07-10 23:28:08 -0400] rbarrero: can I pull the internal hostname of each node in role with knife?
[2012-07-10 23:28:16 -0400] rbarrero: ... in a role...
[2012-07-10 23:28:26 -0400] masterkorp: rbarrero: https://github.com/knuckolls/knife-santoku
[2012-07-10 23:28:38 -0400] masterkorp: may be useful or not
[2012-07-10 23:29:24 -0400] PRK_nz: worked a treat, thanks erikh
[2012-07-10 23:29:46 -0400] erikh: PRK_nz: awesome.
[2012-07-10 23:29:54 -0400] rbarrero: thanks
[2012-07-10 23:31:05 -0400] rbarrero: answered my own question:
[2012-07-10 23:31:16 -0400] rbarrero: knife search node 'role:vp-tvp-dc-webapp' | grep FQDN: | awk '{print $2}'
[2012-07-10 23:33:07 -0400] masterkorp: grep and awk in the same command
[2012-07-10 23:33:11 -0400] masterkorp: classy
[2012-07-10 23:36:35 -0400] hoover_damm: rbarrero, knife search node 'role:tv-tvp-dc-webapp' -a fqdn
[2012-07-10 23:36:56 -0400] hoover_damm: you can toss on the awk if you want still
[2012-07-10 23:37:01 -0400] hoover_damm: but the grep is totally unneccesary
[2012-07-10 23:52:02 -0400] Majost: Is there a built-in for the chef-repo 'rake ssl_cert' to automagically sign the the cert against a specific CA, or create a CSR
[2012-07-10 23:54:53 -0400] yfeldblum: Majost, this is why you can also just use the openssl CLI
[2012-07-10 23:55:14 -0400] yfeldblum: Majost, it was written for just these sorts of cases

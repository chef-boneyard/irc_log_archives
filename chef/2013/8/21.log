[2013-08-21 00:09:58 -0400] cpuguy83: Found this funny... I signed up as a chef contributor, Opscode sent a thank you note by mail.  They got my name wrong.  An automation company, which has my correctly inputted name, sent mail to me with a typo in my name.
[2013-08-21 00:23:00 -0400] daveops: cpuguy83: security through obscurity
[2013-08-21 00:23:12 -0400] daveops: :)
[2013-08-21 00:31:30 -0400] Perceptes: How do you specify a cookbook on GitHub in a cookbook's metadata using `depends`?
[2013-08-21 00:32:38 -0400] jtimberman: Perceptes: "you don't", you need to use berkshelf or librarian to resolve dependencies that come from git repositories.
[2013-08-21 00:34:08 -0400] Perceptes: I use librarian to manage top-level cookbooks my app requires. does that mean that if cookbook X requires cookbook Y, and cookbook Y is only available on GitHub, that my application must be aware of this and explicitly install cookbook Y with librarian?
[2013-08-21 01:36:21 -0400] ryker: quiet in here. :)
[2013-08-21 01:37:39 -0400] ryker: got a question about knife ec2 server create.  What's the difference between the -i and the -S parameters?  -S is my ec2 keypair name right?  So what is the ssh identify file specified by -i?
[2013-08-21 01:45:16 -0400] juliancdunn: ryker: maybe the actual id_rsa key itself? I don't remember
[2013-08-21 01:46:33 -0400] ryker: juliancdunn: oh, maybe the path to the private key so knife can install and run chef on the newly created instance I guess?
[2013-08-21 01:54:47 -0400] jalateras: has anyone used the chef-redis cookbook
[2013-08-21 02:57:41 -0400] juliancdunn: ryker: no, I think that's already handled by the OOTB bootstrap - doesn't need an "-i"
[2013-08-21 08:15:24 -0400] m4rcu5: if your wrapping a community cookbook, do you add a recipe with "include_recipe "original::recipe"" for each original recipe you want to use?
[2013-08-21 08:16:26 -0400] isbaran: m4rcu5: depends on your use case i guess
[2013-08-21 08:19:06 -0400] m4rcu5: isbaran: i want to change the default recipe, actullay i just want to insert some search functions and then include the original default recipe, but the rest of the recipes may stay the same
[2013-08-21 08:21:29 -0400] isbaran: m4rcu5: i didn't understand the problem, what you're doing sounds good
[2013-08-21 08:21:51 -0400] isbaran: you don't need to touch other recipes or create your_cook::recipe if you're not needing
[2013-08-21 08:22:45 -0400] m4rcu5: isbaran: well, my question for the wrapper cookbook is, how can i include all original recipes in that cookbook? so acme-cookbook::recipe works the same as cookbook::recipe
[2013-08-21 08:23:13 -0400] isbaran: m4rcu5: just include cookbook::recipe thats all
[2013-08-21 08:23:59 -0400] isbaran: that would include default recipe, if default recipe includes other recipes of original cookbook they'll also be included
[2013-08-21 08:26:41 -0400] m4rcu5: ok, so for example the NTP cookbook has a undo and disable recipe aswell, so if i want my ntp cookbook to install i should use acme-ntp in my runlist, and if i want to use the disable i should add ntp::disable in the runlist?
[2013-08-21 08:27:11 -0400] isbaran: yes
[2013-08-21 08:27:53 -0400] isbaran: or you can include them in your cookbook too
[2013-08-21 08:31:20 -0400] m4rcu5: isbaran: ok fair enough, thanks!
[2013-08-21 08:51:26 -0400] ichilton: Is it sane to create a role which just calls a wrapper recipe, or does everyone just call the recipe?
[2013-08-21 08:51:38 -0400] ichilton: It feels neater to add roles to nodes rather than bare recipes
[2013-08-21 09:17:10 -0400] ichilton: Can you do something like this in a role?
[2013-08-21 09:17:11 -0400] ichilton: include_recipe "apt" if node['platform_family'] == 'debian'
[2013-08-21 09:17:30 -0400] ichilton: obviously add to run list instead of include, but the conditional I mean...
[2013-08-21 09:17:54 -0400] ichilton: could you do something like:
[2013-08-21 09:18:07 -0400] ichilton: run_list << "apt" if node['platform_family'] == 'debian'
[2013-08-21 09:18:08 -0400] ichilton: ?
[2013-08-21 09:25:45 -0400] trilitheus: Hi all, trying to figure out why a recipe that comes later in the run list is doing work before another recipe that is earlier in the run_list
[2013-08-21 09:27:25 -0400] trilitheus: I'm calling nagios cookboook via a wrapper, chef-nagios - which has a case on the os attribute and just includes nagios cookbook if its linux
[2013-08-21 09:28:08 -0400] trilitheus: later I call chef-nagios::smartarray which adds some DAS disk checks, but it is being processed before nagios cookbook is called
[2013-08-21 09:28:58 -0400] trilitheus: run_list['chef-nagios::default','chef-nagios::smartarray']
[2013-08-21 09:30:19 -0400] isbaran: trilitheus: there is a run queue build process, like dependency resolving. chef doesn't simply run scripts in order
[2013-08-21 09:30:39 -0400] isbaran: i think this page covers it: http://erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/
[2013-08-21 09:37:04 -0400] fishGoM00: ichilton: you can put something like this in a recipe
[2013-08-21 09:37:06 -0400] fishGoM00: if platform?("ubuntu")
[2013-08-21 09:37:09 -0400] fishGoM00: <code>
[2013-08-21 09:37:10 -0400] fishGoM00: end
[2013-08-21 09:41:10 -0400] mtpereira: I think you can, yes
[2013-08-21 09:43:01 -0400] mtpereira: isbaran: thanks for that link! great info there
[2013-08-21 09:43:42 -0400] ichilton: fishGoM00: but not in a role?
[2013-08-21 09:52:08 -0400] nd__: ha, mirkokiefer still working with chef ;)
[2013-08-21 10:00:42 -0400] fishGoM00: ichilton: not as far as I am aware, perhaps have a recipe in the role to do your magic
[2013-08-21 10:00:53 -0400] ichilton: yeah, that's what i'm thinking - thanks
[2013-08-21 10:20:31 -0400] trilitheus: isbaran, many thanks - I pretty much thought that but struggled to rationalise the order in my head
[2013-08-21 10:38:42 -0400] zaargy: what's teh recommended method to sync chef servers?
[2013-08-21 10:39:09 -0400] zaargy: sync on demand as when i what to update one chef server from another
[2013-08-21 10:39:24 -0400] zaargy: sync cookbooks, databags and environments that is
[2013-08-21 11:00:23 -0400] mirkokiefer: @nd__ hey andy, yes found this channel quite helpful :)
[2013-08-21 11:03:05 -0400] fishGoM00: zaargy: I found this the other day which might help (backup and restore scripts)
[2013-08-21 11:03:08 -0400] fishGoM00: http://blog.higgsboson.tk/2013/04/27/automated-backups-for-chef-server/
[2013-08-21 11:06:34 -0400] mswart: What is the recommende way to install a chef server 11 on a 32bit ubuntu system? My old chef server 10 uses the packages from apt.opscode.com but there are not maintained anymore.
[2013-08-21 11:09:25 -0400] fishGoM00: mmm there are a few things missing from the installer it seems (Mac, FreeBSD...32bit versions etc)
[2013-08-21 11:10:30 -0400] fishGoM00: I've not seen anything about this page updating anytime soon :/  Does anyone know if support for the 'missing' installers is coming?
[2013-08-21 11:21:49 -0400] trilitheus: isbaran, it transpires that I'm stupid - i was using case 'os' when 'linux' include_recipe 'nagios'
[2013-08-21 11:22:20 -0400] trilitheus: so nagios recipe wasn't being called as I need to do case node['os'] instead
[2013-08-21 11:25:00 -0400] nd__: mirkokiefer: sure, that's why I hang here too
[2013-08-21 11:27:49 -0400] a_c_m__: just getting started, but wondering what the current "right" way to do things was re: Berkself vs Librarian ?
[2013-08-21 11:28:18 -0400] a_c_m__: is there a consensus on which is right?
[2013-08-21 11:33:30 -0400] mtpereira: a_c_m__: I'm also very fresh in chef but it seems to me that Berkshelf is more adopted than Librarian. Personally, I like it better because it keeps the dependencies in a seperated directory from the cookbooks your developing. Also, Jamie Winsor made me believe that Berkshelf is what I want to use in this video https://www.youtube.com/watch?v=hYt0E84kYUI :P
[2013-08-21 11:34:32 -0400] linuxboy: hi
[2013-08-21 11:34:34 -0400] linuxboy: https://github.com/opscode-cookbooks/jenkins/blob/master/providers/job.rb#L86
[2013-08-21 11:34:35 -0400] a_c_m__: mtpereira: thanks!
[2013-08-21 11:34:42 -0400] linuxboy: that doesn't seem to work with URLs with spaces
[2013-08-21 11:35:05 -0400] a_c_m__: linuxboy: do you need to use %20
[2013-08-21 11:35:09 -0400] a_c_m__: instead perhaps?
[2013-08-21 11:35:24 -0400] linuxboy: a_c_m__: I think the job.rb should encode it itself
[2013-08-21 11:35:24 -0400] a_c_m__: or what ever the url encoded thing is for a space
[2013-08-21 11:35:38 -0400] a_c_m__: could try it and see if it works
[2013-08-21 11:35:46 -0400] a_c_m__: but was just a guess
[2013-08-21 11:36:08 -0400] linuxboy: I've added a 'url = URI.escape(url)' in there
[2013-08-21 11:36:17 -0400] linuxboy: but that doesn't work
[2013-08-21 11:48:29 -0400] mirkokiefer: seeing how great dependency management works in nodejs I always feel that having a global directory for keeping modules is a bad idea
[2013-08-21 11:48:41 -0400] mirkokiefer: so librarian makes more sense to me than berkshelf
[2013-08-21 11:56:49 -0400] m4rcu5: is it allowed to use search in your attributes file? im filling my attributes with search vars
[2013-08-21 11:58:50 -0400] teukka: bear: re: knife-solo and ssh gateway. knife-solo doesn't use knife::ssh (but net:ssh directly) so the config options are not fylly compatible. but yeah, easiest to use ssh config
[2013-08-21 12:02:32 -0400] zaargy: can i make knife just register my workstation wihtout creating a new knife.rb?
[2013-08-21 12:03:01 -0400] zaargy: e.g. use the validation.pem to register without overwriting my existing knife.rb
[2013-08-21 12:03:11 -0400] zaargy: knife configure -i -c .chef/knife.rb doesn't work etc
[2013-08-21 12:14:27 -0400] quattr8: anyone here using the mongodb cookbook and got it to bootstrap replica sets/sharding?
[2013-08-21 12:18:10 -0400] konopka: quattr8: i tried using the chef-mongodb cookbook's (github master) last week and ran into issues
[2013-08-21 12:18:37 -0400] zaargy: nm got it
[2013-08-21 12:18:50 -0400] zaargy: yeah we use the mongodb cookbook
[2013-08-21 12:18:55 -0400] quattr8: do you remember what went wrong? I can't seem to get it to actually configure
[2013-08-21 12:18:58 -0400] zaargy: it works but it ain't pretty
[2013-08-21 12:19:14 -0400] quattr8: it will start the mongod process fine but its not configuring the replicaset
[2013-08-21 12:19:20 -0400] zaargy: bootstrap the replias, bootstrap the config nodes, bootstrap the mongos nodes
[2013-08-21 12:21:09 -0400] quattr8: config nodes and mongos works but the replica set wont
[2013-08-21 12:22:11 -0400] quattr8: couldn't initiate : can't find self in the replset config
[2013-08-21 12:22:29 -0400] quattr8: its either that error or the error where it's trying to add itself as replicaset member
[2013-08-21 12:23:55 -0400] rogue_jayant: Hi guys
[2013-08-21 12:24:11 -0400] rogue_jayant: need some help with apache override attributes in a role
[2013-08-21 12:24:30 -0400] rogue_jayant: have created a role and trying to run it with chef solo command
[2013-08-21 12:24:46 -0400] rogue_jayant: trying to override apache listen port
[2013-08-21 12:24:55 -0400] rogue_jayant: but does not work
[2013-08-21 12:25:10 -0400] jalateras: has anyone used the elasticsearch cookbook
[2013-08-21 12:25:22 -0400] rogue_jayant: {"name": "apache2-Role","description":"apache2-Role: created by ITapp","default_attributes":{},"override_attributes":{"apache2": {"listen_ports":["8181","9191"]}},"json_class":"Chef::Role","chef_type":"role","run_list":["recipe[apache2]"]}
[2013-08-21 12:25:44 -0400] jalateras: i am having trouble configuring a set of plugins to install with it and was after some help
[2013-08-21 12:26:12 -0400] rogue_jayant: is there anything wrong i am doing with this role
[2013-08-21 12:26:56 -0400] daveops: rogue_jayant: it's just "apache": "listen_ports", not "apache2"
[2013-08-21 12:30:40 -0400] rogue_jayant: ok thanks.. i ran this from my chef dir
[2013-08-21 12:30:44 -0400] rogue_jayant: sudo chef-solo -j node.json
[2013-08-21 12:31:49 -0400] rogue_jayant: still i get something like this when i hit the IP where apache got installed
[2013-08-21 12:31:50 -0400] rogue_jayant: Apache Server at 184.72.17.183 Port 80
[2013-08-21 12:32:02 -0400] rogue_jayant: the port should  change
[2013-08-21 12:40:47 -0400] m4rcu5: hhmm, why is this http://nopaste.dk/p58851 causing a "can't convert String into Integer" ?
[2013-08-21 12:42:56 -0400] daveops: m4rcu5: what line? that will happen when you're trying to access an Array using a string instead of an int as the index
[2013-08-21 12:43:36 -0400] m4rcu5: daveops: this one >> next if n['location'].nil? or n['fqdn'] == node['fqdn']
[2013-08-21 12:43:54 -0400] m4rcu5: im guessing im not supposed to use search in my attributes file :-/
[2013-08-21 12:44:35 -0400] lewiz: Is there a way to get a list of nodes that haven't checked in within n hours via knife?
[2013-08-21 12:47:48 -0400] rogue_jayant: one more question??
[2013-08-21 12:48:07 -0400] rogue_jayant: "override_attributes":{"apache2": {"listen_ports":["8181","9191"]}}
[2013-08-21 12:48:35 -0400] rogue_jayant: in the above override attribute how can we figure out that this is not apache2 and apache
[2013-08-21 12:48:55 -0400] isbaran: apache2 cookbook uses apache as attribute base
[2013-08-21 12:49:15 -0400] isbaran: all of the attributes start with apache, just check attributes file
[2013-08-21 12:49:42 -0400] isbaran: its a bad choice i guess
[2013-08-21 13:06:34 -0400] dokeefe: greetings - first time in irc - having issue trying to configure chef client; receive 'ERROR: Errno::ECONNRESET: Connection reset by peer - SSL_connect' after entering password for API user
[2013-08-21 13:18:12 -0400] viraptor: hi all, could someone tell me how can I get a version of a specific, loaded cookbook from an attributes file?
[2013-08-21 13:20:31 -0400] viraptor: or alternatively how can I get to the Chef::Context instance
[2013-08-21 13:24:55 -0400] jhiggs: How do you guys go about starting upstart services, specifically dealing with restarting a stopped service (upstart will leave it stopped, init.d scripts will leave it started).
[2013-08-21 13:27:20 -0400] cpuguy83: jhiggs: init.d scripts don't do anything but start/stop the service.  Upstart can be used to start/stop services based on what other services are running, it can be configured to ensure the service is started (in case of a crash or something)
[2013-08-21 13:28:24 -0400] cpuguy83: So, you can make apache start once the network services have started (and likewise stop).  You can tell upstart to start the service if it has stopped (like monit or god) ever x seconds up to a max number of tries, etc.
[2013-08-21 13:28:36 -0400] droy: hi all, if I decide to use SVN to store cookbooks, etc, none of the knife commands to pull down community cookbooks/recipes work.  So I'll have to manage the downloads, etc myself, correct?
[2013-08-21 13:29:07 -0400] bean: droy: don't use SVN
[2013-08-21 13:29:09 -0400] bean: don't be silly
[2013-08-21 13:29:11 -0400] cpuguy83: droy: Use Berkshelf... and git
[2013-08-21 13:29:12 -0400] bean: why would you use SVN
[2013-08-21 13:29:16 -0400] bean: what is this the 1990s
[2013-08-21 13:29:16 -0400] bean: ?
[2013-08-21 13:29:24 -0400] cpuguy83: bean: ouch
[2013-08-21 13:29:25 -0400] droy: we use svn currently
[2013-08-21 13:29:34 -0400] droy: and no immediate plans to change to git
[2013-08-21 13:29:37 -0400] bean: yeesh
[2013-08-21 13:29:50 -0400] bean: just talk them into a private github account :)
[2013-08-21 13:30:19 -0400] droy: it would be nice to integrate into our current setup.  personally i have no problem setting up git for chef, but it's just one more thing to manage and train, etc
[2013-08-21 13:30:47 -0400] bean: yeah... also keep in mind that the migration process from svn -> git is tedious and unfun.
[2013-08-21 13:30:54 -0400] bean: so the more stuff you throw into svn
[2013-08-21 13:31:02 -0400] bean: the bigger pain it will be when you do
[2013-08-21 13:31:06 -0400] ptrf: so, I've come here asking this question before, but I'm not really sure I'm satisfied
[2013-08-21 13:31:14 -0400] cpuguy83: Should totally use CVS instead :)
[2013-08-21 13:31:21 -0400] bean: haha
[2013-08-21 13:31:37 -0400] droy: maybe Perforce would do the trick?
[2013-08-21 13:31:59 -0400] bean: can't say i've used it
[2013-08-21 13:32:09 -0400] droy: consider yourself lucky :)
[2013-08-21 13:32:13 -0400] ptrf: so I'll just ask again: is it a really bad idea to invoke knife programmatically? i would like to run knife bootstrap from within a provisioning-script
[2013-08-21 13:32:21 -0400] ptrf: and use some of the output
[2013-08-21 13:32:45 -0400] ptrf: currently, i'm spawning a subshell and invoking knife there, like you would in a shell
[2013-08-21 13:32:53 -0400] ptrf: but it keeps bugging me
[2013-08-21 13:33:11 -0400] cpuguy83: ptrf: What do you mean it keeps bugging you/
[2013-08-21 13:33:12 -0400] cpuguy83: ?
[2013-08-21 13:33:22 -0400] ptrf: well, the script is in ruby
[2013-08-21 13:33:41 -0400] bean: ptrf: http://lists.opscode.com/sympa/arc/chef/2011-08/msg00014.html seems to show how to /really/ invoke it in ruby
[2013-08-21 13:33:42 -0400] ptrf: it would be much nicer if I could require 'chef/knife/something' and go ahead
[2013-08-21 13:34:03 -0400] ptrf: bean: <3
[2013-08-21 13:34:07 -0400] bean: :)
[2013-08-21 13:34:35 -0400] ptrf: the reason I'm asking - it seems like there's not a lot of documentation around
[2013-08-21 13:34:45 -0400] bean: that would be accurate, ptrf
[2013-08-21 13:34:46 -0400] ptrf: at least not for invoking knife programmatically
[2013-08-21 13:34:57 -0400] bean: You could probably figure it out from reading the source
[2013-08-21 13:34:57 -0400] bean: but
[2013-08-21 13:35:00 -0400] bean: that sounds less than ideal
[2013-08-21 13:35:01 -0400] ptrf: and I took it that it was somewhat a no-no to start doing that
[2013-08-21 13:35:09 -0400] ptrf: yeah, well that's fine
[2013-08-21 13:35:42 -0400] ptrf: i'm really happy to have a (possibly) working example to work from, it seemed a bit tough to navigate all of chef's sources
[2013-08-21 13:35:55 -0400] ptrf: I'm just a bit worried about internal API changes
[2013-08-21 13:36:07 -0400] bean: yeah, I would be too
[2013-08-21 13:36:11 -0400] ptrf: but, we can always fix the chef in the Gemfile
[2013-08-21 13:36:36 -0400] bean: yep
[2013-08-21 13:36:46 -0400] bean: I'd just figure out if that works in the version you're using
[2013-08-21 13:36:48 -0400] ptrf: well, seems like the compromise again, thanks
[2013-08-21 13:36:49 -0400] bean: and pin to that version
[2013-08-21 13:36:57 -0400] bean: np
[2013-08-21 13:36:58 -0400] ichilton: Interested in chatting about roles vs cookbooks/recipes and how much to modularise - anyone have any thoughts/experience/conventions?
[2013-08-21 13:37:17 -0400] ptrf: just returned to my provisioning environment and it hit me again how annoyed I was with the execution
[2013-08-21 13:37:32 -0400] cpuguy83: Damn you cygwin and your changing directory structures out of nowhere.
[2013-08-21 13:37:47 -0400] ichilton: Currently i'm finding myself tempted to create roles as those seem better for putting in runlists - and having them call recipes - but then i'm ending up with roles which just call a single recipe
[2013-08-21 13:37:53 -0400] bean: ichilton: a lot of people would tell you to not do roles for the most part and to do node cookbooks.
[2013-08-21 13:37:56 -0400] ichilton: which seems a bit daft, but does give me future expansion
[2013-08-21 13:38:10 -0400] bean: IMO, pick what works best for you, and do it that way.
[2013-08-21 13:38:15 -0400] ichilton: k
[2013-08-21 13:38:29 -0400] bean: ichilton: are you using berkshelf?
[2013-08-21 13:38:36 -0400] bean: /have you watched "The Berkshelf Way" talk
[2013-08-21 13:38:41 -0400] ichilton: So there isn't really a convention, people just do it?
[2013-08-21 13:38:44 -0400] cpuguy83: ichilton: I'm leaning towards a role-cookbook.  The way roles are setup now are too dangerous.
[2013-08-21 13:38:50 -0400] bean: ^ +1
[2013-08-21 13:39:01 -0400] ichilton: I did watch that a while ago, but need to re-watch.
[2013-08-21 13:39:12 -0400] bean: It'd be worth a re-watch if you have the time
[2013-08-21 13:39:15 -0400] ichilton: I'm just setting up the repo and am about to look into Berkshelf
[2013-08-21 13:39:27 -0400] cpuguy83: ichilton: I hard from someone here that spoke with an Opscode guy that they are working to make roles better so you can actually use them as intended without it blowing up in your face... so that's coming sometime... in the future.
[2013-08-21 13:39:58 -0400] ichilton: bean: does he talk about this stuff?
[2013-08-21 13:40:01 -0400] ichilton: cpuguy83: ah, cool.
[2013-08-21 13:40:21 -0400] bean: I thought he talked about roles a bit and that you shouldn't use them but I might be thinking of a different talk
[2013-08-21 13:40:29 -0400] ichilton: ah, ok
[2013-08-21 13:40:32 -0400] cpuguy83: bean: Yep, he does talk about that.
[2013-08-21 13:40:37 -0400] bean: kk
[2013-08-21 13:40:46 -0400] bean: It's been a monthish since i've watched it
[2013-08-21 13:40:49 -0400] cpuguy83: Essentially, use roles only to contain a role-cookbook.
[2013-08-21 13:41:02 -0400] bean: yep.
[2013-08-21 13:41:11 -0400] bean: I do use one role in production
[2013-08-21 13:41:16 -0400] bean: and thats related to my NTP setup
[2013-08-21 13:41:23 -0400] cpuguy83: Then you version your role cookbook for your environments.  Let's you test your cookbook changes much more easily.
[2013-08-21 13:41:43 -0400] cpuguy83: hell, I just put NTP on everything.
[2013-08-21 13:42:19 -0400] bean: yeah, i have an ntp server
[2013-08-21 13:42:23 -0400] bean: its a bit over engineered
[2013-08-21 13:42:25 -0400] bean: :0
[2013-08-21 13:42:54 -0400] ichilton: I've currently got these cookbooks - all with a single default recipe): base_server (sets up ntp, timezone and locale), tools (installs packages for curl, wget, dnsutils, git, tmux, vim etc), remote_machine (will call mycompany_users to add users/keys etc and setup firewall), shell (adding packages like whois, traceroute etc), mycompany_users
[2013-08-21 13:43:13 -0400] ichilton: I've then got a base role which adds base_server and tools
[2013-08-21 13:43:42 -0400] ichilton: but am then thinking a remote role which just adds the remote_machine cookbook
[2013-08-21 13:44:50 -0400] ichilton: but was then thinking about a web server role - do I call a mycompany_web cookbook which then includes the nginx cookbook etc or do I just add the nginx cookbook directly in a role...
[2013-08-21 13:45:07 -0400] ichilton: and actually should I use separate recipies under a mycompany cookbook instead of separate cookbooks
[2013-08-21 13:45:13 -0400] ichilton: so many choices to make! :)
[2013-08-21 13:45:37 -0400] cpuguy83: ichilton: The first one.
[2013-08-21 13:45:44 -0400] cpuguy83: Is my preference, as of now.
[2013-08-21 13:45:53 -0400] ichilton: cpuguy83: which you refering to? - recipes vs cookbooks?
[2013-08-21 13:46:19 -0400] cpuguy83: ichilton: a webserver role which contains the mycompany_web cookbook, which includes the nginx cookbook
[2013-08-21 13:46:29 -0400] ichilton: oh, right
[2013-08-21 13:46:46 -0400] ichilton: it does feel nicer adding roles to a note's runlist rather than adding individual recipes...
[2013-08-21 13:47:11 -0400] ichilton: what do you think about separate cookbooks vs a mycompany cookbook that has receipes for these things instead of separate cookbooks?
[2013-08-21 13:47:59 -0400] ichilton: thinking now that: mycompany::base, mycompany::users, mycompany::web_servers, mycompany::tools etc might be neater
[2013-08-21 13:48:20 -0400] ichilton: and only splitting out into a separate cookbook if it's generic and potentially distributable
[2013-08-21 13:48:23 -0400] ichilton: thoughts?
[2013-08-21 13:49:40 -0400] cpuguy83: Can one client create any number of nodes?
[2013-08-21 13:49:41 -0400] bean: I think that's valid, though I usually try to keep cookbooks doing one specific thing
[2013-08-21 13:49:55 -0400] bean: cpuguy83: as long as it has a validation.pem i'd imagine so
[2013-08-21 13:51:35 -0400] ichilton: ok, thanks
[2013-08-21 13:54:09 -0400] cpuguy83: humbug, chef is looking @ the nodename to match to a client.
[2013-08-21 13:54:25 -0400] bean: cpuguy83: it can be matched off of something in /etc/chef/client.rb
[2013-08-21 13:55:30 -0400] cpuguy83: bean: Do you have a doc or an elaboration on that?
[2013-08-21 13:55:45 -0400] bean: sec
[2013-08-21 13:56:04 -0400] bean: cpuguy83: http://docs.opscode.com/config_rb_client.html node_name
[2013-08-21 13:57:41 -0400] cpuguy83: Yeah, that's my problem, unfortunately.
[2013-08-21 13:58:42 -0400] cpuguy83: I image digital signage players, which run chef, was kind of hoping to use one client key on the image for all systems, but clearly that's not going to work... probably good that it doesn't work.
[2013-08-21 14:01:00 -0400] bean: yeah
[2013-08-21 14:01:06 -0400] bean: chef would likely be confused
[2013-08-21 14:02:29 -0400] m4rcu5: cpuguy83: just out of interest, whats software are you running on them?
[2013-08-21 14:02:44 -0400] cpuguy83: m4rcu5: As far as?
[2013-08-21 14:02:55 -0400] m4rcu5: for the signage display
[2013-08-21 14:03:20 -0400] cpuguy83: Right now, Stratacache's Activia (which is my parent company)
[2013-08-21 14:03:33 -0400] cpuguy83: m4rcu5: Are you in digital signage as well?
[2013-08-21 14:04:44 -0400] m4rcu5: cpuguy83: you can probbably call it signage abuse, we run PADS on our text television system of the local broadcast station :)
[2013-08-21 14:05:22 -0400] cpuguy83: Never heard of PADS, been doing this awhile too.
[2013-08-21 14:06:17 -0400] m4rcu5: cpuguy83: check nds.eu, im just looking for alternatives which might suit our needs
[2013-08-21 14:06:52 -0400] m4rcu5: we want to mix mainly text-tv (so text pages based on db entries), recorded video and live video
[2013-08-21 14:08:41 -0400] pabst^: so we separate our servers by environment (production, qa, dev) but we also segregate by datacenter / geography. I need to apply different attributes based on the geography, would it be better to create environments like prod-central, prod-east, or just keep my environments production, qa, staging, dev, and create roles to deal with the geographic / datacenter attributes?
[2013-08-21 14:10:03 -0400] ichilton: How do people manage using a single chef server for multiple projects?
[2013-08-21 14:10:22 -0400] ichilton: You can put your .chef and knife.rb under the chef-repo for that project, but then you are duplicating the keys
[2013-08-21 14:10:43 -0400] bean: i separate those concerns, ichilton
[2013-08-21 14:10:44 -0400] ichilton: Is it possible to have ~/.chef with keys & knife config, then override certain ones from a project specific knife.rb under chef-repo ?
[2013-08-21 14:11:03 -0400] bean: and have a different "knife" command that refers to a different knife.rb
[2013-08-21 14:11:12 -0400] bean: for multiple chef servers.
[2013-08-21 14:11:13 -0400] ichilton: different knife command??
[2013-08-21 14:11:28 -0400] ichilton: bean: have an example anywhere?
[2013-08-21 14:11:33 -0400] bean: but you said one server, right?
[2013-08-21 14:11:43 -0400] ichilton: well, yes - but i'm interested both ways.
[2013-08-21 14:11:54 -0400] ichilton: interested in understanding how you manage it
[2013-08-21 14:11:54 -0400] bean: I really don't recommend doing more than one if you dont have to.
[2013-08-21 14:12:09 -0400] pabst^: isnt PADS an electrical engineering product? I have only heard of it, never have seen it.
[2013-08-21 14:12:17 -0400] m4rcu5: ichilton: yeps, check out my .chef/knife.rb example in my chef repo (not my homedir!) http://nopaste.dk/p58855
[2013-08-21 14:12:36 -0400] bean: ichilton: i have "knife-prod" which is simply "knife "$@" --config $HOME/.chef/knife-prod.rb"
[2013-08-21 14:13:11 -0400] maniac: hello guys  i'm started to hrdening my infrastructure server and saw one thing :
[2013-08-21 14:13:11 -0400] maniac: epmd      19402   chef_server    3u  IPv4 293233253      0t0  TCP *:epmd (LISTEN)
[2013-08-21 14:13:12 -0400] maniac: beam.smp  19390   chef_server    7u  IPv4 293233279      0t0  TCP *:48596 (LISTEN)
[2013-08-21 14:13:12 -0400] maniac: java      19456   chef_server    9u  IPv4 293234010      0t0  TCP *:40414 (LISTEN)
[2013-08-21 14:13:12 -0400] maniac: java      19456   chef_server   10u  IPv4 293234011      0t0  TCP *:d-s-n (LISTEN)
[2013-08-21 14:13:12 -0400] maniac: java      19456   chef_server   11u  IPv4 293234012      0t0  TCP *:45130 (LISTEN)
[2013-08-21 14:13:12 -0400] maniac: beam.smp  19608   chef_server    8u  IPv4 293236395      0t0  TCP *:47818 (LISTEN)
[2013-08-21 14:13:12 -0400] maniac: beam.smp  19823   chef_server    8u  IPv4 293237074      0t0  TCP *:56503 (LISTEN)
[2013-08-21 14:13:25 -0400] maniac: how can i restrict those service to loopback interface for example?
[2013-08-21 14:14:02 -0400] ichilton: m4rcu5: ah, right - so keys are common and in ~/.chef, you have a knife.rb per project in the chef-repo, and it always loads ~/knife.local.rb from the root of the chef-repo??
[2013-08-21 14:15:56 -0400] m4rcu5: ichilton: in this case, i have multiple chef server, and keep my keys for them in ~/.chef, and the config for the servers are in the chef-repo/.chef, the knife.local.rb is indeed another include from my chef-repo/.chef/ directory
[2013-08-21 14:16:21 -0400] ichilton: bean: ahh, I see - so you use the right alias to get the right config...
[2013-08-21 14:16:27 -0400] bean: yep
[2013-08-21 14:16:35 -0400] m4rcu5: its basicly just to keep my keys out of the chef-repo and keep compatibility with knife-block
[2013-08-21 14:16:54 -0400] ichilton: right
[2013-08-21 14:17:07 -0400] bean: we used knife block for a bit but i think we're team alias now.
[2013-08-21 14:17:21 -0400] m4rcu5: bean: ?
[2013-08-21 14:17:22 -0400] ichilton: what's knife block?
[2013-08-21 14:17:51 -0400] bean: we just use aliases :)
[2013-08-21 14:18:12 -0400] bean: knife block is a knife plugin for switching what knife.rb you're using
[2013-08-21 14:18:28 -0400] ichilton: m4rcu5: so what's in your knife.local.rb ?
[2013-08-21 14:18:34 -0400] ichilton: bean: ahh, cool
[2013-08-21 14:19:20 -0400] jtimberman: i have multiple chef servers, but they're Enterprise Chef, so the difference in the url is the organization name. I use an environment variable to switch between organizations.
[2013-08-21 14:20:04 -0400] m4rcu5: ichilton: mainly the basic knife stuff, let me paste it
[2013-08-21 14:20:08 -0400] ichilton: where's a good place to put provider api keys? - maybe a ~/.chef/knife.user.rb for user specific/sensitive stuff which is included?
[2013-08-21 14:20:12 -0400] ichilton: m4rcu5: ta
[2013-08-21 14:20:28 -0400] ichilton: jtimberman: Hi Joshua!
[2013-08-21 14:20:55 -0400] m4rcu5: ichilton: http://nopaste.dk/p58856 it has one trick: the username is stripped from its '.' dots, our shell usernames have dots in them, chef doesn't like them :)
[2013-08-21 14:21:04 -0400] ichilton: jtimberman: ah, and your knife.rb looks at that env variable to decide what to set?
[2013-08-21 14:21:25 -0400] ichilton: m4rcu5: why do you use ENV['HOME'] instead of just ~/ paths btw?
[2013-08-21 14:22:08 -0400] m4rcu5: ichilton: i guess some old skool practice
[2013-08-21 14:22:23 -0400] ichilton: m4rcu5: ah, ok - so either way is fine?
[2013-08-21 14:22:30 -0400] ichilton: m4rcu5: your way looks more rubyish ;)
[2013-08-21 14:22:53 -0400] jtimberman: https://gist.github.com/jtimberman/6295120
[2013-08-21 14:23:05 -0400] m4rcu5: i don't know where and how the '~' is interpereted, so the env var makes sure its set to the real path
[2013-08-21 14:23:09 -0400] ichilton: jtimberman: thanks
[2013-08-21 14:23:16 -0400] ichilton: m4rcu5: nod
[2013-08-21 14:23:35 -0400] jtimberman: i used to have a knife.rb that would switch the chef_server_url based on which git branch i was on.
[2013-08-21 14:23:47 -0400] jtimberman: but i got tired of having to maintain branches :)
[2013-08-21 14:23:53 -0400] jtimberman: it used the grit gem.
[2013-08-21 14:23:54 -0400] ichilton: jtimberman: any thoughts on my roles vs recipes and separate cookbooks vs one company cookbook with separate recipes question just above?
[2013-08-21 14:24:10 -0400] ichilton: jtimberman: ah, ok
[2013-08-21 14:25:02 -0400] jtimberman: ichilton: we use a site-specific cookbook and apply with roles.
[2013-08-21 14:25:09 -0400] jtimberman: for each thing
[2013-08-21 14:25:13 -0400] m4rcu5: jtimberman: we are about to hit full on madness, we build everything in the site-cookbooks and pulled tens of community cookbooks into the cookbooks folder, now we need to split it all up into seperate repos and find a way to keep it all together :)
[2013-08-21 14:25:29 -0400] ichilton: jtimberman: have a public example ?
[2013-08-21 14:25:58 -0400] chris613: I just tried to do a `knife index rebuild` and in the middle of it I got "ERROR: Failed to authenticate", and now all my nodes are getting it too. Any idea wtf going on? Chef Server 10.18.2
[2013-08-21 14:26:42 -0400] jtimberman: so for example, we use redis for some internal services, and have a 'redis' cookbook, and then we have an opscode-redis which does the wrapping of searches and additional site-specific configuration we need. we apply it all to the "redis" nodes with a role.
[2013-08-21 14:26:51 -0400] jtimberman: no public examples :)
[2013-08-21 14:27:00 -0400] jtimberman: since the site specific cookbooks are... ahem, site specific ;)
[2013-08-21 14:27:06 -0400] ichilton: right
[2013-08-21 14:27:33 -0400] ichilton: so you do use separate cookbooks like opscode-bla rather than have a single opscode cookbook with different recipes?
[2013-08-21 14:27:45 -0400] chris613: ichilton: Oh you most definitely don'
[2013-08-21 14:27:56 -0400] chris613: *don't want just one big "company" cookbook
[2013-08-21 14:28:12 -0400] jtimberman: ichilton: yeah
[2013-08-21 14:28:17 -0400] jmartin: jtimberman: i was randomly curious if you had any idea on pushy progress? or like a page i can scope out in the future?
[2013-08-21 14:28:22 -0400] jtimberman: separate cookbooks makes it easier to manage, version-wise.
[2013-08-21 14:28:30 -0400] jtimberman: jmartin: i don't have any data on that
[2013-08-21 14:28:33 -0400] ichilton: what about a company cookbook for generic things like users, tools, base etc, and then package specific ones separate?
[2013-08-21 14:28:34 -0400] jmartin: ah k
[2013-08-21 14:28:46 -0400] jtimberman: ichilton: sure, we have a "users" cookbook )
[2013-08-21 14:28:52 -0400] jmartin: jtimberman: thanks btw
[2013-08-21 14:28:54 -0400] ichilton: or maybe i'm modularising too much
[2013-08-21 14:28:55 -0400] jtimberman: which is where the community "users" cookbook came from.
[2013-08-21 14:29:18 -0400] jtimberman: but we don't use the LWRP that cookbook provides, as it was written before that conversion.
[2013-08-21 14:29:27 -0400] ichilton: k
[2013-08-21 14:30:02 -0400] ichilton: jtimberman: but you tend to apply roles to runlists rather than recipes?
[2013-08-21 14:30:17 -0400] ichilton: jtimberman: so it's sane to have a base role which just calls the base cookbook?
[2013-08-21 14:30:30 -0400] jtimberman: Sure?
[2013-08-21 14:30:42 -0400] jtimberman: We definitely use roles instead of recipes.
[2013-08-21 14:31:06 -0400] jtimberman: I don't like the "wrapper" cookbook pattern personally in that it does "include_recipe", and that doesn't append the recipe name to the node's recipes attribute.
[2013-08-21 14:31:29 -0400] ichilton: So if you had a web node, would you call the nginx cookbook directly in a web role, or would you have a web role which called the opscode-web cookbook which then included the nginx cookbook?
[2013-08-21 14:31:30 -0400] jtimberman: (yes we should probably fix that, and i believe there's a ticket)
[2013-08-21 14:31:54 -0400] jtimberman: depends :)
[2013-08-21 14:32:54 -0400] failshell: anyone managing which kernel is loaded on boot with Chef?
[2013-08-21 14:33:00 -0400] ichilton: so where do you install odd tools like curl, wget, vim, tmux etc? - in a base cookbook with other stuff, or a separate tools type cookbook, or under a site one?
[2013-08-21 14:33:30 -0400] bean: we have an "essentials" roles that contains cbs that install that stuff
[2013-08-21 14:33:56 -0400] ichilton: bean: communities cookbooks or a wrapper cookbook?
[2013-08-21 14:33:57 -0400] failshell: ichilton: whatever you find more appropriate : )
[2013-08-21 14:34:06 -0400] bean: either or
[2013-08-21 14:34:38 -0400] maniac: guys what about restrict to interfaces issue? can anyone help with that?
[2013-08-21 14:34:42 -0400] ichilton: and would you put that list of packages in an attribute?
[2013-08-21 14:34:47 -0400] jtimberman: ichilton: we have separate cookbooks for a few things like that.
[2013-08-21 14:34:56 -0400] failshell: seems like im going to write a cookbok to manage grub. doesnt seem to be one out there
[2013-08-21 14:35:13 -0400] jtimberman: like, vim, zsh, tmux, screen, are all separate cookbooks in a "base-packages" role or something like that.
[2013-08-21 14:35:25 -0400] ichilton: right
[2013-08-21 14:35:42 -0400] ichilton: and tmux might be a custom cookbook which includes the community tmux cookbook?
[2013-08-21 14:35:54 -0400] ichilton: s/custom cookbook/custom wrapper cookbook/
[2013-08-21 14:36:45 -0400] jtimberman: i think we'rej ust using an old fork of the tmux cookbook
[2013-08-21 14:37:19 -0400] jtimberman: we don't have a crazy config scheme for tmux. our users recipe has a "drop off dotfiles" thing so people can put their tmux config they want in the repo for their user
[2013-08-21 14:38:11 -0400] jtimberman: i definitely recommend just building something that works, and iterate on fixing issues as they come up, rather than a bunch of up front design.
[2013-08-21 14:38:29 -0400] jtimberman: chef is flexible and composable, so dont' be afraid to experiment with something.
[2013-08-21 14:38:41 -0400] jtimberman: you're not "doing it wrong" if the thing you did works.
[2013-08-21 14:38:50 -0400] jtimberman: and doesn't cause you pain :)
[2013-08-21 14:40:14 -0400] m4rcu5: jtimberman: even using searches in a attribute file is not considered doing it wrong?
[2013-08-21 14:40:45 -0400] ichilton: jtimberman: cool, thanks
[2013-08-21 14:40:59 -0400] jtimberman: m4rcu5: if you get that working and you like it, rock out.
[2013-08-21 14:40:59 -0400] jmartin: jtimberman: is private chef now enterprise chef?
[2013-08-21 14:41:12 -0400] jtimberman: jmartin: Yes. As is Hosted Chef.
[2013-08-21 14:41:25 -0400] jtimberman: jmartin: So there's now just Enterprise Chef.
[2013-08-21 14:41:49 -0400] jmartin: jtimberman: is there a release about it? i dont want to bug you with 20 questions if i can just read
[2013-08-21 14:42:09 -0400] jmartin: im just curious as to how they 'merged' or if its just basically in name
[2013-08-21 14:42:40 -0400] m4rcu5: will the open source chef keep on existing? i see that all new features are just released in the enterprise chef, its make me worry a bit
[2013-08-21 14:44:35 -0400] jtimberman: jmartin: This blog post encapsulates the announcements we made this week: http://www.opscode.com/blog/2013/08/19/introducing-enterprise-chef/
[2013-08-21 14:44:45 -0400] jtimberman: m4rcu5: open source chef will *totally* exist.
[2013-08-21 14:44:46 -0400] jmartin: jtimberman: thank ya much :D
[2013-08-21 14:45:18 -0400] m4rcu5: jtimberman: is there a but....?
[2013-08-21 14:45:49 -0400] jtimberman: m4rcu5: but, certain features will only be in Enterprise Chef?
[2013-08-21 14:46:01 -0400] jtimberman: some EC features will get added to open source chef, or at least, the code will be released.
[2013-08-21 14:46:12 -0400] jtimberman: but i have no idea which ones or to what degree.
[2013-08-21 14:47:52 -0400] m4rcu5: jtimberman: clear, and the networking integration im reading about, will that be EC only?
[2013-08-21 14:48:16 -0400] jtimberman: m4rcu5: doubt it, the arista stuff is already open sourced.
[2013-08-21 14:48:32 -0400] jtimberman: like, arista has the cookbooks: https://github.com/aristanetworks/chef-eos-cookbooks
[2013-08-21 14:49:09 -0400] failshell: jtimberman: pretty cool to be able to manage networking devices now
[2013-08-21 14:49:20 -0400] jtimberman: oh sweet, eos and netdev_eos are on the community site too.
[2013-08-21 14:49:54 -0400] jtimberman: cookbook "eos" and cookbook "netdev_eos" in your berksfile :)
[2013-08-21 14:49:58 -0400] ichilton: jtimberman: btw - this blog post: http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/  == awesome!
[2013-08-21 14:50:06 -0400] jtimberman: ichilton: thanks :)
[2013-08-21 14:50:55 -0400] m4rcu5: jtimberman: cool, im interested on how one would write the config to the switch, i cant see the chef ruby thing running on the switch OS itself
[2013-08-21 14:51:35 -0400] jtimberman: m4rcu5: i think the arista one does, iirc they have fedora something under the hood.
[2013-08-21 14:51:50 -0400] jtimberman: other than there beign cookbooks for it and some press releases i don't know much about any of that.
[2013-08-21 14:52:07 -0400] m4rcu5: 0_0 ok, im not sure thats going the right way, installing ruby and all on a switch
[2013-08-21 14:53:25 -0400] jtimberman: i don't know man :)
[2013-08-21 14:53:37 -0400] jtimberman: i don't have any arista
[2013-08-21 14:53:52 -0400] m4rcu5: me <3 Juniper :)
[2013-08-21 14:54:00 -0400] jtimberman: i don't have any of those either :D
[2013-08-21 14:54:17 -0400] m4rcu5: your all in the cloud i guess?
[2013-08-21 14:55:24 -0400] jtimberman: as far as anyone else is concerned we ARE the cloud :D
[2013-08-21 14:55:50 -0400] m4rcu5: lawl, let the thunder of the clouds begin!
[2013-08-21 14:55:56 -0400] jmartin: jtimberman: loves him some software defined networking :D
[2013-08-21 14:56:13 -0400] jmartin: but thats the whole point of the aritsa/juni integrations etc as well
[2013-08-21 14:56:22 -0400] m4rcu5: well, but coud has to run on metal aswell i guess, what hardware do you guys build on?
[2013-08-21 14:56:22 -0400] jmartin: i would assume
[2013-08-21 15:00:09 -0400] chris613: I'm having some sort of indexing problem. I can search for my node by chef_environment, but not by name. Other nodes work fine, and this node worked fine until yesterday. 10.18.2 https://gist.github.com/csibbitt/b9d55bb62da367d56c21  Can anyone help?
[2013-08-21 15:00:20 -0400] chris613: I just did a `knife index rebuild` and it worked
[2013-08-21 15:10:21 -0400] gswallow: any chef-on-windows (particularly through ssh) users here?
[2013-08-21 15:10:46 -0400] gswallow: I am having a hell of a time with cygwin and openssh.  The cygwin community is NO help and I am curious what ssh servers you install on Windows.
[2013-08-21 15:10:50 -0400] jperry: ohai
[2013-08-21 15:11:15 -0400] jperry: anyone know how I could stub out a method on Chef::Mixin::ShellOut in ChefSpec?
[2013-08-21 15:11:20 -0400] jperry: in particular :shell_out
[2013-08-21 15:16:12 -0400] erikmack: The "Download Starter Kit" button results in a Rails "We're sorry but something went wrong" error.  This is the preview site.  Anyone know another way to get the starter kit?
[2013-08-21 15:19:45 -0400] jtimberman: erikmack: you can click the "administrative" tab at the top, select your organization from the list, and then the "starter kit" button will be clickable.
[2013-08-21 15:19:52 -0400] jtimberman: s/button/link on the left/
[2013-08-21 15:27:56 -0400] erikmack: jtimberman, that's where I am ... "starter kit" link loads page with Download Starter Kit button, click Proceed in "Are you certain?" dialog, then rails error
[2013-08-21 15:28:30 -0400] erikmack: I thought maybe the old site had a link somewhere
[2013-08-21 15:32:40 -0400] urandom_: hey, what's the right version of rabbitmq-server to use with chef 10.16.2?  is 3.0.x compatible?
[2013-08-21 15:34:28 -0400] urandom_: i'm asking because my rabbitmq server 3.0.4 has been working fine with chef 10.16.2 for months, and this morning it started throwing fatal frame errors complaining about the frame_end_marker.  wondering if i have something really wrong in my couchdb or something.
[2013-08-21 15:35:35 -0400] nebrera2: hello
[2013-08-21 15:35:47 -0400] nebrera2: how do I disable reporting in chef-client run ?
[2013-08-21 15:37:57 -0400] cpuguy83: nebrera2: Use chef-solo?
[2013-08-21 15:38:11 -0400] nebrera2: obnibus
[2013-08-21 15:38:25 -0400] cpuguy83: No, I'm saying that would be a way to disable reporting
[2013-08-21 15:38:48 -0400] nebrera2: I get this error:
[2013-08-21 15:38:49 -0400] nebrera2: Received exception (405) attempting to generate run history id (URL Path: reports/nodes/pablo02/runs), disabling reporting for this run.
[2013-08-21 15:39:59 -0400] nebrera2: who is receiving this this report? chef-server-webui ?
[2013-08-21 15:40:11 -0400] danryan: nebrera2: do you have hosted, open source, or private chef?
[2013-08-21 15:40:24 -0400] nebrera2: opensource
[2013-08-21 15:40:25 -0400] cpuguy83: That's what I'd assume, or some handler
[2013-08-21 15:41:58 -0400] jtimberman: nebrera2: in your /etc/chef/client.rb: enable_reporting false
[2013-08-21 15:42:22 -0400] nebrera2: easy
[2013-08-21 15:42:24 -0400] nebrera2: thanks
[2013-08-21 15:42:29 -0400] danryan: nebrera2: OSS version doesn't support reporting. and jtimberman beats me to it
[2013-08-21 15:43:48 -0400] jtimberman: it will gracefully handle not being able to send reports :)
[2013-08-21 15:43:55 -0400] jmartin: heh
[2013-08-21 15:44:56 -0400] nebrera2: thanks
[2013-08-21 15:45:03 -0400] nebrera2: what is report used for ?
[2013-08-21 15:48:10 -0400] gchristensen: miah: that simplefinance elasticsearch cookbook needs some docs :P
[2013-08-21 15:48:24 -0400] jtimberman: nebrera2: reporting feature in Enterprise Chef
[2013-08-21 15:48:27 -0400] whilp: gchristensen: it's brand new ;)
[2013-08-21 15:48:31 -0400] btm: nebrera2: http://www.opscode.com/blog/2013/04/25/opscode-momentum-surges-as-chef-community-unites-at-chefconf-2013/
[2013-08-21 15:49:19 -0400] nebrera2: thanks
[2013-08-21 15:49:51 -0400] gchristensen: whilp: yeah I'm seeing that. I'm deploying it to a few servers, hopefully I'll be able to contribute some to it.
[2013-08-21 15:50:14 -0400] whilp: gchristensen: that's awesome! i'm super excited about a few of the patterns i see there, too
[2013-08-21 15:50:40 -0400] whilp: feel free to hit us up in ##simple, too, if you run into trouble
[2013-08-21 15:50:49 -0400] toy_: hi guys, I have a little problem with chef installation right now. I'm given box without root access at all. How do I install chef-solo without root access? Is there a workaround for this one.
[2013-08-21 15:50:55 -0400] whilp: most of the simple ops team is available there (somewhat less attentive here)
[2013-08-21 15:50:56 -0400] toy_: no matter how ugly it will be.
[2013-08-21 15:51:18 -0400] tabolario: i'm going to be deploying elasticsearch soon as well
[2013-08-21 15:51:36 -0400] teukka: toy_: `gem install chef`
[2013-08-21 15:52:01 -0400] toy_: ah you are here as well /teukka. Thanks will try that.
[2013-08-21 15:52:23 -0400] teukka: toy_: but without root access you have hard time converging the node. many resources expect root
[2013-08-21 15:53:48 -0400] toy_: we are trying to demonstrate this problem with our guys that this is almost impossible.
[2013-08-21 15:53:56 -0400] nebrera2: hello again
[2013-08-21 15:54:08 -0400] nebrera2: Im am having problems with syslog gem
[2013-08-21 15:54:14 -0400] toy_: we have some very hard people here.
[2013-08-21 15:54:54 -0400] toy_: but will try that thanks again.
[2013-08-21 15:55:02 -0400] nebrera2: this is my chef-client.rb file: http://pastebin.com/5QRSepQB
[2013-08-21 15:55:18 -0400] nebrera2: it works but sometimes it says the gem is not found
[2013-08-21 15:55:25 -0400] nebrera2: I need to login and log out again
[2013-08-21 15:57:48 -0400] jmartin: cpuguy83: i randomly found you on a SO post re: rails, can I PM you for a bit more info?
[2013-08-21 15:57:53 -0400] btm: nebrera2: how are you installing the gem?
[2013-08-21 15:58:06 -0400] nebrera2: gem install chef
[2013-08-21 15:58:07 -0400] cpuguy83: jmartin: Sure... What post?
[2013-08-21 15:58:17 -0400] nebrera2: and it install chef-11.6.0
[2013-08-21 15:58:24 -0400] btm: nebrera2: how are you installing the syslog gem?
[2013-08-21 15:58:43 -0400] nebrera2: gem install syslog_logger
[2013-08-21 15:58:55 -0400] nebrera2: with 11.4.0 didn't complain
[2013-08-21 16:00:09 -0400] jmartin: cpuguy83: in re: sidekiq etc
[2013-08-21 16:01:16 -0400] btm: you're manually installing the syslog_logger gem at the command prompt? It's probably related to the ruby/rubygems, not Chef so much. (although if you were using an Omnibus install, you'd want to make sure you installed the syslog gem into there.) If Chef gives you an error about the gem you could try to load irb and see if require 'rubygems' ; require 'syslog/logger' works alright
[2013-08-21 16:01:44 -0400] nebrera2: with chef-11.4.4  works
[2013-08-21 16:01:47 -0400] nebrera2: perfectly
[2013-08-21 16:02:03 -0400] nebrera2: I do update and I get an monologer error:  http://pastebin.com/j1aGXgdv
[2013-08-21 16:06:00 -0400] btm: nebrera2: what you're telling Chef that you want it to log to isn't a file, that's what that error means.
[2013-08-21 16:06:41 -0400] nebrera2: I am using the same file I used with 11.4.4 version
[2013-08-21 16:06:55 -0400] nebrera2: exactly the same I paste before http://pastebin.com/5QRSepQB
[2013-08-21 16:07:03 -0400] jperry: ohai
[2013-08-21 16:07:08 -0400] btm: nebrera2: the logger is different in 11.6.0 as part of the Ruby 2.0.0 compatibility, see CHEF-3935
[2013-08-21 16:07:18 -0400] nebrera2: ahm
[2013-08-21 16:07:49 -0400] jperry: trying to install a vagrant plugin under another user but it keeps trying to install a vagrant plugin under the root user
[2013-08-21 16:08:30 -0400] nebrera2: I am using ruby 1.9.3
[2013-08-21 16:08:44 -0400] nebrera2: what should I change in my configuration file, btm ?
[2013-08-21 16:11:50 -0400] nebrera2: now with the new version it has a rotate property itself, Logger.new(name, shift_age = 7, shift_size = 1048576)
[2013-08-21 16:11:52 -0400] nebrera2: isn't ?
[2013-08-21 16:12:45 -0400] btm: nebrera2: I don't know, configuring the logger to pass to Syslog that way was never really supported, just a workaround. I'll open a ticket.
[2013-08-21 16:13:16 -0400] nebrera2: thanks btm
[2013-08-21 16:13:50 -0400] nebrera2: anyway I don't mind use a file on /var/log/chef-client.log
[2013-08-21 16:13:59 -0400] nebrera2: but I do need rotation
[2013-08-21 16:14:55 -0400] nebrera2: is the file rotated now with this new monologger version ?
[2013-08-21 16:17:10 -0400] cpuguy83: There totally should be a standard service that you can register log files with and when you want them to be rotated.  Like upstart but just for log rotation and archival.
[2013-08-21 16:17:19 -0400] nebrera2: and how do I specify for example rotate when log is 1MB
[2013-08-21 16:17:26 -0400] kallistec: nebrera2: no, and it was never a good idea, because chef uses the logger inside signal traps
[2013-08-21 16:18:21 -0400] nebrera2: so how do you rotate them ?
[2013-08-21 16:18:30 -0400] nebrera2: rotatelog.d ?
[2013-08-21 16:20:44 -0400] btm: nebrera2: a lot of people use runit to run the chef-client, and the http://ckbk.it/chef-client cookbook will set it up for you.
[2013-08-21 16:21:13 -0400] nebrera2: same as erchef, isn't ?
[2013-08-21 16:33:07 -0400] fly9: anyone ever have an issue with the java cookbook installing openjdk version 7 on the update-alternatives step? (ubuntu) - leaving it at 6 seems to work fine
[2013-08-21 16:42:36 -0400] AlHafoudh: hi, what is the best/common way to install ruby using chef? i need to pick specific ruby version
[2013-08-21 16:43:29 -0400] bradgignac: AlHafoudh: i prefer fnichols rbenv cookbook
[2013-08-21 16:44:28 -0400] AlHafoudh: bradgignac: you use it for production systems? do you install it system-wide or per-user ?
[2013-08-21 16:45:02 -0400] bradgignac: system-wide
[2013-08-21 16:45:39 -0400] fly9: my issue was fixed when I added an attribute: set['java']['openjdk_packages'] = [ "openjdk-7-jre-headless" ] to my app cookbook
[2013-08-21 16:45:58 -0400] AlHafoudh: and how do you deal with gems? its there a problem with non-root users installing gems? iam doing this first time
[2013-08-21 16:46:06 -0400] nebrera2: finished integration with runit
[2013-08-21 16:46:09 -0400] nebrera2: thanks a lot
[2013-08-21 16:46:40 -0400] bradgignac: AlHafoudh: can't remember exactly what to do off hand. i'm pretty sure th rbenv directory is owned by the rbenv group. just make sure your users are part of that
[2013-08-21 16:47:06 -0400] AlHafoudh: oh, right
[2013-08-21 16:47:10 -0400] AlHafoudh: thanks :)
[2013-08-21 16:53:33 -0400] Majost: Is this valid syntax: node['etc']['passwd'][node['my_cookbook']['cookbook_username']]['dir']
[2013-08-21 16:55:16 -0400] tabolario: Majost: yes
[2013-08-21 16:55:43 -0400] tabolario: Majost: Also, when in doubt, just run `ruby -c filename.rb`
[2013-08-21 16:56:15 -0400] Majost: yeah, the concern I have is the nested node reference causing a convergence to freak out
[2013-08-21 16:56:16 -0400] Majost: heh
[2013-08-21 16:56:51 -0400] Majost: actually
[2013-08-21 16:57:20 -0400] Majost: a better question is, does the ohai data get updated if a recipe adds a user
[2013-08-21 16:57:53 -0400] Majost: because if it doesn't, my example probably wont work
[2013-08-21 17:01:24 -0400] seanhorn: jtimberman: FYI erikmak's question from a little earlier today about a Starter Kit Rails error is another presentation of the "Missing organization validator client" problem. Thanks, Isa!
[2013-08-21 17:02:25 -0400] mattupstate: can use use `search` in an attribute file?
[2013-08-21 17:04:14 -0400] cpuguy83: mattupstate: Try it and see
[2013-08-21 17:04:30 -0400] mattupstate: that means uploading a new cookbook and running on a remote node
[2013-08-21 17:21:03 -0400] maraca: hey guys - im trying to find out whether my node is running on ec2 or something else
[2013-08-21 17:21:10 -0400] maraca: by doing this "if node.attribute?('ec2')"
[2013-08-21 17:21:31 -0400] maraca: doesn't seem, to work :/ any better options you'd recommend?
[2013-08-21 17:22:48 -0400] mattupstate: maraca: shouldn't you know that already?
[2013-08-21 17:23:05 -0400] mattupstate: sorry, that doesn't really help
[2013-08-21 17:23:09 -0400] maraca: haha that's a good point ;)
[2013-08-21 17:23:19 -0400] maraca: i only want to create / mount ebs volume if im on EC2
[2013-08-21 17:24:06 -0400] maraca: as opposed to vagrant
[2013-08-21 17:27:07 -0400] cpuguy83: maraca: are you getting an error when doing that?
[2013-08-21 17:27:24 -0400] maraca: no it is just not getting in the if statement
[2013-08-21 17:27:45 -0400] maraca: [2013-08-21T17:19:48+00:00] INFO: Not running on EC2. Skipping mounting the EBS volume.
[2013-08-21 17:28:02 -0400] maraca: that's on first run
[2013-08-21 17:33:48 -0400] mattupstate: maraca: which provisioner are you using with vagrant?
[2013-08-21 17:34:06 -0400] mattupstate: oh, first run it doesn't do as you expect...
[2013-08-21 17:34:35 -0400] perfectsine: I'm having a problem with my not_if statements being resolved consistently.  On initial deploy they resolve with false and redeploy my scripts, after some time they will start work though.  Has anyone seen that before?  Ubuntu 12.04 and Chef 11.4.4
[2013-08-21 17:35:54 -0400] maraca: mattupstate, all runs actually have the same behavior
[2013-08-21 17:36:22 -0400] maraca: i am looking for a way of knowing whether or not the box is in ec2 , and can trigger ec2 actions like creating an EBS volume
[2013-08-21 17:36:27 -0400] maraca: or if it's not
[2013-08-21 17:37:13 -0400] maraca: i see people doing if node.has_key?("ec2")
[2013-08-21 17:37:16 -0400] mattupstate: so, first run probably doesn't trigger because the attributes haven't been set?
[2013-08-21 17:37:36 -0400] maraca: but on second run it doesn't work either
[2013-08-21 17:37:55 -0400] maraca: i see people also doing things like "if node['cloud']"
[2013-08-21 17:38:03 -0400] gswallow: maraca: have you tried with shef?
[2013-08-21 17:38:04 -0400] mattupstate: have you tried either of those?
[2013-08-21 17:38:23 -0400] maraca: i tried both and none are returning true
[2013-08-21 17:38:34 -0400] gswallow: run shef -z then you can poke around for things like node['ec2'] and node['cloud']
[2013-08-21 17:38:35 -0400] maraca: gswallow, no going to do this right now
[2013-08-21 17:38:44 -0400] maraca: sweet. thanks will try this
[2013-08-21 17:39:52 -0400] gswallow: iirc there's an ohai plugin or something that detects a rest endpoint that's available on all EC2 nodes, available at the 169.254.x.y APIPA (?) address.  But I do very little on EC2.
[2013-08-21 17:40:09 -0400] gswallow: if ohai finds that rest endpoint, then it will set up the ec2 key
[2013-08-21 17:40:27 -0400] gchristensen: yeah, it gets bundled with ohayi
[2013-08-21 17:40:29 -0400] tabolario: if you're in a VPC you need to create a hint file
[2013-08-21 17:40:44 -0400] maraca: ah thanks tabolario
[2013-08-21 17:40:45 -0400] tabolario: something along the lines of /etc/chef/ohai/hints/ec2.json
[2013-08-21 17:40:46 -0400] maraca: that i didn't know
[2013-08-21 17:40:50 -0400] maraca: i am in VPC
[2013-08-21 17:41:04 -0400] tabolario: then just run chef client again and it should populate the cloud.* and ec2.* attributes
[2013-08-21 17:41:15 -0400] tabolario: (that file can just have {} as the content)
[2013-08-21 17:41:23 -0400] maraca: awesome that was my next question
[2013-08-21 17:41:52 -0400] maraca: thanks guys!!
[2013-08-21 17:41:59 -0400] tabolario: np :)
[2013-08-21 17:42:00 -0400] gswallow: anyway, anyone here have experience with chef on windows, and using knife ssh?
[2013-08-21 17:42:24 -0400] gswallow: I can't get it to work.  Or I can.but only randomly.  This may be a Net::SSH problem in ruby itself, and pty allocation.
[2013-08-21 17:42:57 -0400] cpuguy83: gswallow: You need to have a native Windows SSH server, not cygwin/openssh
[2013-08-21 17:43:07 -0400] gswallow: cpuguy83: what do you recommend?
[2013-08-21 17:43:52 -0400] gswallow: I think it worked ok with copssh but then we would need to license it
[2013-08-21 17:44:16 -0400] cpuguy83: gswallow: http://docs.opscode.com/plugin_knife_windows.html
[2013-08-21 17:44:36 -0400] cpuguy83: gswallow: I use winrm instead of SSH (which was easy to setup via openssh)
[2013-08-21 17:44:45 -0400] gswallow: winrm was easier, yeah :)
[2013-08-21 17:47:27 -0400] cpuguy83: gswallow: I think http://www.freesshd.com/ provides a native Windows shell
[2013-08-21 17:48:54 -0400] mattupstate: anyone know if you can use search in an attribute file?
[2013-08-21 17:49:34 -0400] btm: gswallow: most cloud plugins for ohai also populate node['cloud'], so you can write cookbooks that are cloud platform independent. checking for the existance of an metadata endpoint in EC2 or elsewhere needs to have another indication that we're in that cloud first, otherwise the network call would cause a long timeout elsewhere. The hints system, which all of the newer knife-CLOUD plugins should populate, was made to aleviate this on systems where there ...
[2013-08-21 17:49:40 -0400] btm: ... wasn't any way to tell where we were.
[2013-08-21 18:18:58 -0400] dgarstang: Grrrr. 'knife ec2 server create' keeps telling me 'You have not provided a valid image (AMI) value.'. but when I validate in the amazon console, looks fine.
[2013-08-21 18:22:19 -0400] ignatz: maybe -i versus -I?
[2013-08-21 18:22:35 -0400] kl4m: I use -I
[2013-08-21 18:22:47 -0400] ignatz: I'd check my command line
[2013-08-21 18:22:56 -0400] tabolario: or just try --image :)
[2013-08-21 18:23:20 -0400] ignatz: yay for reduced ambiguity
[2013-08-21 18:23:56 -0400] dgarstang: ignatz: I am using --image
[2013-08-21 18:24:48 -0400] mattupstate: does node.run_list include recipes that were included via `include_recipe` ?
[2013-08-21 18:24:55 -0400] dgarstang: ... knife ec2 server create --user-data user_data/before_bootstrap.sh --flavor m1.small --ssh-user bcadmin --template chef_full --image ami-fb68f8cb --run-list "role[admin]" --environment prod --subnet subnet-b0def5d9 --node-name foo --security-group-ids sg-cd031ca1
[2013-08-21 18:25:00 -0400] dgarstang: eek, that was long sorry
[2013-08-21 18:25:11 -0400] ignatz: try passing -V or -VV and maybe you can see where it's lowing up
[2013-08-21 18:25:33 -0400] dgarstang: ignatz: -VV is totally useless. Never does anything.
[2013-08-21 18:25:42 -0400] ignatz: okay. :)
[2013-08-21 18:25:48 -0400] mattupstate: -I is shorthand flag
[2013-08-21 18:25:55 -0400] ignatz: yes
[2013-08-21 18:26:00 -0400] dgarstang: mattupstate: i'm using --image
[2013-08-21 18:26:20 -0400] mattupstate: i know, perhaps that will work instead
[2013-08-21 18:26:33 -0400] dgarstang: mattupstate: tried that earlier, it did not
[2013-08-21 18:27:30 -0400] ignatz: and you're in the right region?
[2013-08-21 18:27:37 -0400] dgarstang: this is with VPC too... which increases complexity, but as I said, I went into the UI and compared the sec group, the subnet and the image the UI showed me with what I was passing to knife. They match
[2013-08-21 18:28:06 -0400] dgarstang: ignatz: :-O
[2013-08-21 18:29:11 -0400] ignatz: if so, I'm out of help for you :D
[2013-08-21 18:30:03 -0400] dgarstang: ignatz: That was it, Thanks for the eyeballage
[2013-08-21 18:31:59 -0400] ignatz: really! cool!
[2013-08-21 18:32:36 -0400] tabolario: ah yeah the ec2 error messages can be a bit obscure sometimes
[2013-08-21 18:33:03 -0400] tabolario: i have a giant shell script with incantations to make my whole environment now
[2013-08-21 18:33:15 -0400] ignatz: I was just listing the things I've had. I have one instance in eu-west-1 and I keep forgetting and freaking out.
[2013-08-21 18:33:29 -0400] tabolario: i need to check out spiceweasel
[2013-08-21 18:33:47 -0400] ignatz: I use cloudformation for that because I'm on AWS exclusively right now.
[2013-08-21 18:33:49 -0400] tabolario: yeah AZ/region being incorrect was a mistake i made a lot
[2013-08-21 18:34:04 -0400] tabolario: CF is still on my list to check out
[2013-08-21 18:34:22 -0400] ignatz: I love it. JSON and you're done, and you can dump in scripts when you want.
[2013-08-21 18:34:24 -0400] tabolario: the syntax looked intimidating
[2013-08-21 18:34:38 -0400] tabolario: well not the json syntax, but the schema
[2013-08-21 18:34:39 -0400] ignatz: nah, if you can do shell it's not bad.
[2013-08-21 18:34:58 -0400] tabolario: do you have the CF config bootstrap chef onto the nodes then?
[2013-08-21 18:34:59 -0400] ignatz: it does look wacky at first but the docs are *really* good.
[2013-08-21 18:35:03 -0400] dgarstang: I wish we were just in AWS. Now we're in google. Oh, but they are cheaper per Gb so that MUST be a wise choice
[2013-08-21 18:35:13 -0400] ignatz: yes, it does some magic with files and then runs chef-client
[2013-08-21 18:35:37 -0400] ignatz: I have autoscale groups with chef roles
[2013-08-21 18:35:44 -0400] tabolario: fun, i'm going to check that out. that might be just what i need as a next step towards on-demand acceptance testing environments
[2013-08-21 18:35:57 -0400] ignatz: The only thing I haven't got it to do is clean up dead nodes. That's the next project.
[2013-08-21 18:36:11 -0400] geggam: must be nice... some of us have data requirements preventing us from renting clouds... we have to build our own
[2013-08-21 18:36:19 -0400] tabolario: someone referred me to a script for just that the other day
[2013-08-21 18:36:21 -0400] ignatz: geggam: good times
[2013-08-21 18:36:50 -0400] tabolario: http://railsware.com/blog/2013/02/12/chef-server-and-amazon-auto-scaling-groups/
[2013-08-21 18:36:59 -0400] ignatz: I may have to do taht soon, but the boss is amenable to buying Nebula
[2013-08-21 18:37:07 -0400] geggam: its one of those arguments you give up... if you have your own machines and virtualize it takes more hardware
[2013-08-21 18:37:12 -0400] geggam: but its cool so you have to do it
[2013-08-21 18:37:14 -0400] ignatz: tabolario: thanks!
[2013-08-21 18:37:31 -0400] tabolario: we're going to set up a little set of boxes in the office and run openstack on it for dev/testing :)
[2013-08-21 18:37:46 -0400] ignatz: oh this looks sweet
[2013-08-21 18:37:47 -0400] tabolario: that is a project i am very much looking forward to
[2013-08-21 18:37:53 -0400] geggam: i have one desktop for that ...12 cores and 64 gb ram
[2013-08-21 18:38:09 -0400] ignatz: yeah, nebula is just openstack with the openstack originators building it so you don't commit suicide
[2013-08-21 18:38:24 -0400] tabolario: i think we're going to get one box for all the controller stuff and one beefy box for the compute nodes
[2013-08-21 18:38:35 -0400] tabolario: i see rackspace has some sort of openstack installer now too
[2013-08-21 18:40:10 -0400] tabolario: and then there's the ubuntu one eucalyptus?
[2013-08-21 18:46:03 -0400] tabolario: ignatz: would you mind sharing any of your CF stuff or is there too much redactable info in there?
[2013-08-21 18:51:05 -0400] ignatz: I will have to look. If I can I'll put stuff in a gist
[2013-08-21 18:51:30 -0400] ignatz: It's not great stuff, I'm still a newbie, but at least it has ideas in it.
[2013-08-21 18:57:53 -0400] force: Before I go bugging #chef-hacking, does anybody know where you go to discuss general test-kitchen usage? Is it #chef-hacking? Thanks
[2013-08-21 19:00:13 -0400] mveitas: anybody have any idea why my EC2 node that has chef run that was successful might be missing the 'ec2' node attributes?
[2013-08-21 19:00:16 -0400] tabolario: force: i dare say that would be here
[2013-08-21 19:00:26 -0400] tabolario: mveitas: is it in a VPC?
[2013-08-21 19:00:36 -0400] mveitas: yes it is
[2013-08-21 19:00:54 -0400] tabolario: echo "{}" | sudo tee /etc/chef/ohai/hints/ec2.json && sudo chef-client
[2013-08-21 19:01:10 -0400] mattray: mveitas: what tabolario said
[2013-08-21 19:01:26 -0400] tabolario: (VPC instances need the hint in order for ohai to see that they are on EC2)
[2013-08-21 19:02:32 -0400] mveitas: thanks tabolario and mattray
[2013-08-21 19:03:38 -0400] force: So I'm building OpenVPN client and server configuration. I want to test them against each other. To do this manually, I'd provision 2 boxes in my Vagrantfile and run openvpn::server on one and openvpn::client on the other, then spot check them. I'd rather automate it, of course. I can't find in documentation or source code whether it is possible to bring up 2 boxes in concert and configure and test them against each other with .kitchen.yml.
[2013-08-21 19:04:21 -0400] force: Testing client against server seems like it would be a a pretty common need, so I wonder if I'm just missing something.
[2013-08-21 19:05:12 -0400] mattray: force: Test-Kitchen currently is intended for single node testing, not missing anything yet
[2013-08-21 19:06:28 -0400] miah: oi
[2013-08-21 19:07:04 -0400] force: mattray: but but but... :(
[2013-08-21 19:07:37 -0400] mattray: force: right now
[2013-08-21 19:07:38 -0400] miah: force: https://github.com/chef-workflow
[2013-08-21 19:08:02 -0400] force: Does anybody else have an approach to automating testing of client/server interaction in Chef? I usually get by in test-kitchen by just installing the server and client on the same box and testing them, but that doesn't really work for my OpenVPN config because they both want to control the tun0 interface.
[2013-08-21 19:08:16 -0400] miah: https://github.com/chef-workflow/chef-workflow has the main docs
[2013-08-21 19:09:16 -0400] force: miah: thanks for the links. reading...
[2013-08-21 19:10:14 -0400] subway: Is there a good way to override individual resources in a cookbook?
[2013-08-21 19:11:01 -0400] subway: For instance, I'm using the opscode postgres cookbook, but do not want the assign password resource to ever run. I like to avoid modifying upstream cookbooks to make upgrading in the future easier.
[2013-08-21 19:12:09 -0400] log1kal: subway: check out chef-rewind for that
[2013-08-21 19:12:19 -0400] log1kal: https://github.com/bryanwb/chef-rewind
[2013-08-21 19:14:23 -0400] subway: Thanks.... Does that gem get installed on the client, server, or both?
[2013-08-21 19:15:46 -0400] log1kal: you make it part of a wrapper recipe, and use chef_gem to install it
[2013-08-21 19:16:05 -0400] log1kal: like https://github.com/bryanwb/chef-rewind#usage
[2013-08-21 19:16:44 -0400] force: miah: chef-workflow doesn't appear to utilize test-kitchen. It looks like a cool idea, but I'm not finding a good introduction in the docs. There are lots of partial introductions. Am I crazy?
[2013-08-21 19:17:10 -0400] subway: log1kal: cool, thanks.
[2013-08-21 19:17:23 -0400] log1kal: no prob!
[2013-08-21 19:18:37 -0400] miah: force: it doesnt.
[2013-08-21 19:18:43 -0400] miah: force: read the wiki.
[2013-08-21 19:19:02 -0400] miah: force: https://github.com/chef-workflow/chef-workflow/wiki
[2013-08-21 19:19:09 -0400] miah: its linked in the main readme of chef-workflow
[2013-08-21 19:19:36 -0400] force: miah: Yes. I read that.
[2013-08-21 19:19:53 -0400] miah: the entire thing? wow. fast.
[2013-08-21 19:20:43 -0400] miah: testing infrastructure isn't easy. that doesn't mean the test harness has to be hard, but it likely means its not going to be simple.
[2013-08-21 19:21:08 -0400] force: My point is that that is a document that links to lots of partial introductions, but I'm not finding a cohesive introduction that discusses what the parts are or gives a good description of what it does. I'm including https://github.com/chef-workflow/chef-workflow/wiki/what-chef-workflow-solves
[2013-08-21 19:21:31 -0400] force: Anyway, thanks miah. I appreciate it. I'll spend more time with it later.
[2013-08-21 19:42:35 -0400] tabolario: haha
[2013-08-21 19:43:11 -0400] gchristensen: he just spews snow all over my servers
[2013-08-21 19:43:56 -0400] tabolario: i need to get logstash up soon or people are going to start pestering me for ssh access again
[2013-08-21 19:43:57 -0400] gchristensen: I ended up adding a MOTD message noting that his stuff will be broken: http://gsc.io/s/achtung-20130821-144345.png
[2013-08-21 19:44:14 -0400] tabolario: nice
[2013-08-21 19:44:19 -0400] gchristensen: heh, I just set up graylog2 today ... up to 12,000 messages a second.
[2013-08-21 19:44:51 -0400] tabolario: i'm holding out that the one m3.xlarge instance i have is going to be big enough to run all of my monitoring stuff on
[2013-08-21 19:45:08 -0400] gchristensen: heh... I had to spin up a cluster of four machines to handle this
[2013-08-21 19:45:12 -0400] chris613: gchristensen: We have similar MOTDs and headers in every plaintext file. Does it stop people? Nope
[2013-08-21 19:45:24 -0400] tabolario: i think we were at about 20GB for the month with papertrail before i dropped it
[2013-08-21 19:45:26 -0400] gchristensen: chris613: :(
[2013-08-21 19:45:30 -0400] chris613: So I editted our recipes to use perms like 555 instead of 755. Slows 'em down at least
[2013-08-21 19:45:39 -0400] gchristensen: chris613: smart!
[2013-08-21 19:45:58 -0400] chris613: The next step in the arms race will be a `chattr +i` wrapper around all file related resources
[2013-08-21 19:46:12 -0400] tabolario: i've finally started making people submit all their requests to me through pivotal tracker instead of IM'ing me to add environment variables and such
[2013-08-21 19:46:16 -0400] chris613: It's surprising how many people have no idea about chattr +i
[2013-08-21 19:47:06 -0400] tabolario: could you make chef chattr -i and +i around file resources?
[2013-08-21 19:55:31 -0400] gondoi: anyone in here used kitchen-docker?
[2013-08-21 20:08:10 -0400] timsmith: code review today?
[2013-08-21 20:13:39 -0400] Majost: How does one access user information such as home dir, shell, etc., in a chef run in which the user was just created?
[2013-08-21 20:16:47 -0400] Majost: right now, I am trying to the the 'etc' module -- but then I get into some weird issues around encapsulating chef dsl code within a ruby block, and it seems like I might be going about this the wrong way.
[2013-08-21 20:17:10 -0400] Majost: s/to the the/to use the/
[2013-08-21 20:17:29 -0400] cpuguy83: Majost: Dir.home('username') works on Linux
[2013-08-21 20:18:08 -0400] Majost: hrm, thats a little cleaner
[2013-08-21 20:20:57 -0400] Majost: still, the problem with this is I need to put it into a ruby block to ensure the user creation happens before I attempt to run the Dir.home stuff
[2013-08-21 20:21:15 -0400] Majost: and the subsequent action is a chef dsl action
[2013-08-21 20:21:51 -0400] cpuguy83: Majost: The rubyblock runs before anything else, unless I'm mistaken.. haven't used one before
[2013-08-21 20:23:13 -0400] Majost: if the code is not contained within a 'ruby_block' section; then yes, you are right and it will execute before anything else
[2013-08-21 20:23:50 -0400] Majost: however, within a ruby_block it will execute the block in oder of operations of the recipe.
[2013-08-21 20:24:45 -0400] tlr00: Really bizarre issue I am running into: I am trying to extract the eth1 ip by setting a default attribute to look up: node[:network][:interfaces][:eth1][:addresses].keys[0] - it flips between inet6 and inet - kind of weird.
[2013-08-21 20:25:26 -0400] Majost: you are asking for all addresses on the interface though
[2013-08-21 20:25:48 -0400] Majost: tlr00: there is an ipv6 and ip (v4) value as well
[2013-08-21 20:26:01 -0400] Majost: one sec, I need to see what it is
[2013-08-21 20:26:20 -0400] Majost: ipaddress
[2013-08-21 20:26:30 -0400] Majost: and ip6address
[2013-08-21 20:27:07 -0400] Majost: so node['ipaddress'] will return the v4 address and the other returns v6
[2013-08-21 20:27:19 -0400] Majost: hrm
[2013-08-21 20:27:28 -0400] Majost: that might not work for a specific interface though
[2013-08-21 20:27:35 -0400] tlr00: weird
[2013-08-21 20:28:30 -0400] tlr00: In addition to this bizarre issue I tried this: ifconfig eth0 | awk '/inet addr:/{ sub(/addr:/, ""); print $2}' and it still flips between the two.
[2013-08-21 20:35:40 -0400] tlr00: Anyone know any better way to extract an interface ip addr (inet addr) in a cleaner way.
[2013-08-21 20:38:07 -0400] wongt: :/join #alfresco
[2013-08-21 20:38:37 -0400] cpuguy83: tlr00: Try https://github.com/rapid7/network_interface
[2013-08-21 20:38:58 -0400] cpuguy83: I haven't used it or seen it in any way shape or form, but based on the description it should be OK.
[2013-08-21 20:39:52 -0400] cwj: TODO: Write a gem description
[2013-08-21 20:39:53 -0400] cwj: lol
[2013-08-21 20:40:11 -0400] cpuguy83: Yep, lo
[2013-08-21 20:40:24 -0400] Majost: tlr00: you might to filter the result set of network.interfaces.eth1.addresses for only those which have a sub value of 'inet'
[2013-08-21 20:40:42 -0400] cpuguy83: Actually, looking at it now. gives output like:
[2013-08-21 20:40:44 -0400] tlr00: Yeah a gem descript would be cool.
[2013-08-21 20:40:45 -0400] cpuguy83: irb(main):008:0> NetworkInterface.addresses('en1')
[2013-08-21 20:40:45 -0400] cpuguy83: => {18=>[{"addr"=>"e0:f8:47:1e:51:82", "netmask"=>nil, "broadcast"=>nil}], 30=>[{"addr"=>"fe80::e2f8:47ff:fe1e:5182%en1", "netmask"=>"ffff:ffff:ffff:ffff::", "broadcast"=>nil}], 2=>[{"addr"=>"10.0.1.112", "netmask"=>"255.255.255.0", "broadcast"=>"10.0.1.255"}]}
[2013-08-21 20:41:04 -0400] tlr00: Right
[2013-08-21 20:41:19 -0400] tlr00: pull it out via .keys[1]
[2013-08-21 20:41:27 -0400] tlr00: or 0*
[2013-08-21 20:42:23 -0400] mattupstate: anyone know if you can perform a search in an attribute file?
[2013-08-21 20:45:41 -0400] Majost: mattupstate: I think you can only search attributes after the node has converged.... what are you trying to do?
[2013-08-21 20:46:01 -0400] Majost: I should say, *successfully* converged.
[2013-08-21 20:47:05 -0400] mattupstate: i've created a "myorganization-databases" cookbook thinking i could update the attributes for hosts, users, passwords, etc
[2013-08-21 20:47:17 -0400] mattupstate: but then i just realized, i can run a recipe first
[2013-08-21 20:47:23 -0400] mattupstate: to override things
[2013-08-21 20:48:54 -0400] Majost: In general, you can run chef search from anywhere where ruby is executed... but depending on what you intend to do, it may or may not behave the way you expect.
[2013-08-21 20:49:43 -0400] Majost: This is to say, if you are searching for something which is being defined by your cookbook for the first time, it will return empty
[2013-08-21 20:49:54 -0400] mattupstate: i understand that
[2013-08-21 20:50:59 -0400] Majost: then yeah, it should work fine.
[2013-08-21 20:51:02 -0400] mattupstate: i'm trying to figure out how to merge defaults, with search values, and data bags
[2013-08-21 20:51:12 -0400] mattupstate: or rather, how best to
[2013-08-21 20:51:45 -0400] cpuguy83: mattupstate: You can use the hashes fetch method to do that
[2013-08-21 20:51:57 -0400] mattupstate: cpuguy83: not aware of it
[2013-08-21 20:52:10 -0400] cpuguy83: So in your recipe do your search and provide a block
[2013-08-21 20:52:19 -0400] Majost: in my experience, anything which is dynamic is not wise to store in attributes... but thats just my opinion more than anything else.
[2013-08-21 20:52:20 -0400] cpuguy83: a = { b: 2 }
[2013-08-21 20:52:33 -0400] cpuguy83: a.fetch(:c) { 3 }
[2013-08-21 20:52:57 -0400] cpuguy83: This would will give you 3 if c is nil
[2013-08-21 20:53:03 -0400] Majost: The reason I don't like putting them in attributes, is if a value is dropped -- such as a user is removed in your case, the attribute stays until you go in and remove it
[2013-08-21 20:53:50 -0400] cpuguy83: And with that I'm out.
[2013-08-21 20:55:06 -0400] micxer: hi there, i'm playing around with test kitchen and got to a point ,where i want to test a cookbook that works based on data bag content
[2013-08-21 20:55:18 -0400] mattupstate: i'm not seeing much about this fetch function anywhere
[2013-08-21 20:55:26 -0400] micxer: problem is: my data bags are in a different repository (all data bags together) and i have one repository per cookbook
[2013-08-21 20:55:48 -0400] micxer: i found a way to provide a data bag for testing with kitchen but is there a way to use the data bag on the chef server/hosted chef for testing?
[2013-08-21 21:01:03 -0400] micxer: anyone any idea? or is my approach the wrong one?
[2013-08-21 21:07:55 -0400] dgarstang: I'm passing -j '{ "node_env": "prod", "cluster": "hub" }' to knife ec2 server create, and it's complaining (in bad english) that 'A JSON text must at least contain two octets! (JSON::ParserError)'. However, when I paste that JSON into a syntax checker, it checks out fine
[2013-08-21 21:12:54 -0400] EricL: Is there a way in a template block to check if the source file exists and if not use a different one?
[2013-08-21 21:14:07 -0400] EricL: if file_exists('foo.erb'); source 'foo.erb'; else; source 'default.erb'; end;
[2013-08-21 21:14:11 -0400] EricL: Something like that?
[2013-08-21 21:14:18 -0400] gchristensen: sure
[2013-08-21 21:14:41 -0400] dgarstang: Seems like no -j works at all with knife ec2. Used to... wonder if that was changed, and borken
[2013-08-21 21:14:43 -0400] EricL: I don't mean exists on the server though.  I mean exists in the cookbook template dir
[2013-08-21 21:16:01 -0400] gchristensen: EricL: why wouldn't it exist?
[2013-08-21 21:16:46 -0400] EricL: Say I have a bunch of Rails apps and some need specific nginx configs.  If the node['app']['name'].nginx.erb exists, I want it to use that one.  If not, use the default nginx config.
[2013-08-21 21:17:07 -0400] timsmith: anyone know where you can download the omnibus installer for the 11.6.0 hotfix release
[2013-08-21 21:17:08 -0400] EricL: (the default nginx config for a rails app filling in with this apps variables I mean)
[2013-08-21 21:17:26 -0400] timsmith: or how to upgrade an existing 11.6.0 release to the hotfix release
[2013-08-21 21:18:44 -0400] dgarstang: Seems like no -j works at all with knife ec2. Used to... wonder if that was changed, and borken
[2013-08-21 21:19:22 -0400] dgarstang: Some days I don't know why I'm muckin with this stuff. Moving to Podunk WY and becoming a truck driver sounds appealing.
[2013-08-21 21:21:01 -0400] EricL: gchristensen: I think I might have found an answer: http://stackoverflow.com/a/12755870/227644
[2013-08-21 21:22:08 -0400] gchristensen: cool, I think.
[2013-08-21 21:22:30 -0400] EricL: gchristensen: Is that a good way of approaching it?  rescueing?
[2013-08-21 21:22:50 -0400] gchristensen: well it just seems like a bizarre and surprising way to code it, but do what you got to do :)
[2013-08-21 21:23:23 -0400] dgarstang: Sew... anyone using -j with knifey-ec2?
[2013-08-21 21:25:07 -0400] tabolario: EricL, i would put that in an LWRP with a template attribute
[2013-08-21 21:25:08 -0400] gchristensen: anyone here on Rackspace Managed Colocation?
[2013-08-21 21:25:29 -0400] EricL: tabolario: I am not sure what that means. I need to Google that.
[2013-08-21 21:26:17 -0400] tabolario: EricL, are your apps defined in different cookbooks or different recipes within the same cookbook?
[2013-08-21 21:27:47 -0400] tabolario: i'm actually in the process of refactoring my rails app stuff into some LWRPs so i'm thinking about these things right now :)
[2013-08-21 21:28:03 -0400] EricL: The apps use a recipe called rails_app (crazy naming scheme I know).  And the nginx config should be pulled from node['app']['name']
[2013-08-21 21:30:54 -0400] EricL: tabolario: Would different cookbooks have been a better move?
[2013-08-21 21:31:07 -0400] EricL: tabolario: (in case you couldn't tell, I'm relatively new to Chef)
[2013-08-21 21:32:11 -0400] tabolario: EricL, well for how i was originally doing things, different cookbooks made sense because each app i have has several recipes like app, scheduler, worker, web (and then a default recipe that all those include)
[2013-08-21 21:32:15 -0400] celhead1: greetings! I'm fairly new to chef.  I'm running chef-client on a node that doesn't have access to the internet.  One of my recipes needs to install a gem.  I'm thinking that a cookbook_file might be a way to do that.  Or, just run an execute block.  Is there a better way?
[2013-08-21 21:33:11 -0400] tabolario: i'm as yet undecided how i want to do things now
[2013-08-21 21:33:44 -0400] tabolario: i think for starters i'm going to write LWRPs for each of those recipes, and call those in the recipes instead of duplicating things between my different app cookbooks
[2013-08-21 21:34:11 -0400] EricL: tabolario: Ok, so are you suggesting that I create a new resource called template_default (or something) and it should rescue on missing template failure?
[2013-08-21 21:35:07 -0400] tabolario: sorry brb, i will answer that in a moment
[2013-08-21 21:35:42 -0400] gchristensen: btm: no code review today+
[2013-08-21 21:35:44 -0400] gchristensen: ?
[2013-08-21 21:35:57 -0400] dgarstang: so... who's using that -j option with knife ec2?
[2013-08-21 21:38:03 -0400] dgarstang: apparrently no one but me is using the -j option with knife ec2
[2013-08-21 21:39:11 -0400] yfeldblum: tabolario, what is actually different between those 4 recipes?
[2013-08-21 21:39:53 -0400] tabolario: yfeldblum: the largest difference is that app/scheduler/worker each have a specific runit_service resource for the appropriate process
[2013-08-21 21:40:18 -0400] yfeldblum: tabolario, why not make it a touch data-driven?
[2013-08-21 21:40:19 -0400] tabolario: the web recipe creates the ssl cert files and has an nginx_site resource in it for the vhost
[2013-08-21 21:40:53 -0400] tabolario: yfeldblum: do you mean having a node attribute that indicates which of those things a node should include?
[2013-08-21 21:41:57 -0400] tabolario: or maybe a role search
[2013-08-21 21:42:03 -0400] yfeldblum: tabolario, no, i mean like (1) having a single recipe/provider to deploy the app; (2) having a single recipe/provider which takes an attribute to deploy a runit service; (3) having a single recipe/provider to deploy nginx+certs
[2013-08-21 21:42:59 -0400] yfeldblum: tabolario, then in a top-level recipe for the web process, you could invoke the app, runit, and nginx recipes; meanwhile, in a top-level recipe for the worker process, you could invoke only the app and runit recipes
[2013-08-21 21:43:25 -0400] yfeldblum: tabolario, or resources/providers if you structure it that way
[2013-08-21 21:43:42 -0400] yfeldblum: tabolario, or definitions, which are awesome too
[2013-08-21 21:48:40 -0400] Majost: how does one call a chef provider from within a ruby_block?
[2013-08-21 21:50:30 -0400] tabolario: yfeldblum: so at the top level maybe something like this https://gist.github.com/tabolario/418c04cda61d16d6dd23
[2013-08-21 21:51:38 -0400] tabolario: i need to look up that array merging article though to see if that would play nicely if i wanted to say, have global config for each app in an environment
[2013-08-21 21:52:12 -0400] tabolario: or maybe....
[2013-08-21 21:52:41 -0400] dgarstang: so... who's using that -j option with knife ec2?
[2013-08-21 21:53:23 -0400] tabolario: i could do like node['services'].each { |service| application_app node['applications'][service] {} }
[2013-08-21 21:53:51 -0400] tabolario: node['services'] would be the list of things i want on that node, and node['applications'] i would define in the chef environment
[2013-08-21 22:00:08 -0400] yfeldblum: tabolario, something like that
[2013-08-21 22:01:03 -0400] yfeldblum: tabolario, but it would be even cooler if there were some way for your recipe to detect from the node attributes what app services this node should run, so that you don't need 4 top-level recipes
[2013-08-21 22:01:17 -0400] tabolario: marker roles maybe?
[2013-08-21 22:01:33 -0400] yfeldblum: tabolario, marker roles are a possibility
[2013-08-21 22:01:51 -0400] tabolario: oh you know what, i think i need to use something like that anyway if i want to for example use a search to get my upstreams for nginx vhosts
[2013-08-21 22:01:56 -0400] yfeldblum: tabolario, so that it's an attribute that the recipe can inspect, rather than a run-list item
[2013-08-21 22:02:28 -0400] yfeldblum: tabolario, i typically prefer searching for nodes based on an attribute rather than based on a run-list item
[2013-08-21 22:02:35 -0400] tabolario: ah hmm
[2013-08-21 22:04:55 -0400] memelet: Is there any way to lock versions in an environment to the current values?
[2013-08-21 22:05:17 -0400] memelet: I mean lock all version, where I don't know the version of the full transitive closure
[2013-08-21 22:06:35 -0400] tabolario: so i guess the end goal is to be able to say in a generic nginx vhost template, give me all the upstreams for the application that this vhost is for
[2013-08-21 22:07:38 -0400] mburns: If I want to conditionally enable a service, would something like ' only_if system("grep -q FOO /bar/baz") '
[2013-08-21 22:08:14 -0400] mburns: work, or is there a better way  to test (with a bash command) if a Service block should be executed or not)
[2013-08-21 22:09:00 -0400] btorch: hi anyone here can give me a hand on chef-client and proxying issues ?
[2013-08-21 22:09:52 -0400] btorch: I was able to knife bootstrap this VM but now that I'm trying to run chef-client I think http_proxy, no_proxy settings are getting in the way and making stuff just hang
[2013-08-21 22:11:26 -0400] tabolario: yfeldblum: so just more thinking out loud, maybe something like search(:node, "services_app:#{service_name}").map { |node| "#{node['cloud']['local_ipv4']}:#{node['applications'][service_name]['rails']['listen_port']}" }, where rails.listen_port is a normal attribute set by that recipe
[2013-08-21 22:11:59 -0400] tabolario: oh wait that query is wrong, because i'm ['services']['app'] would be an array
[2013-08-21 22:12:12 -0400] yfeldblum: tabolario, sure something like that
[2013-08-21 22:12:53 -0400] tabolario: that would be great, then i might not even need to manually set the listen ports for the app servers :) (i'm running more than one app server on a box atm)
[2013-08-21 22:14:51 -0400] tabolario: well this has given me a lot of good stuff to think about yfeldblum, thanks!
[2013-08-21 22:15:02 -0400] yfeldblum: tabolario, cool
[2013-08-21 22:37:12 -0400] dysinger: what's the best way to put a conditonal around a block of resources (say I don't want them to run if we aren't on ec2).  asking for a friend.  I trie to explain chef's 2 pass system on cookbooks but I don't think I can articulate it well enough & he's flustered.
[2013-08-21 22:43:15 -0400] strgbrew: dumb question but why is there no easy way to do file globing operations in chef?  ie, chown user:group /some/dir/*
[2013-08-21 22:43:27 -0400] strgbrew: ^^ using  a file resource
[2013-08-21 22:46:33 -0400] gchristensen: strgbrew: well you could use an execute block, or a bash block, but really its because you're intended to manage the files individually.
[2013-08-21 22:46:34 -0400] pontiki: you can with Dir
[2013-08-21 22:46:40 -0400] gchristensen: ah! cool!
[2013-08-21 22:47:14 -0400] strgbrew: gchristensen: ya, i'm already doing a Dir.glob because there's no way to copy files around locally
[2013-08-21 22:47:24 -0400] strgbrew: pontiki: awesome! thanks for the lead
[2013-08-21 22:47:27 -0400] strgbrew: thank you both
[2013-08-21 22:48:10 -0400] strgbrew: pontiki: are you speaking of ruby Dir or a resource in chef?
[2013-08-21 22:48:18 -0400] Liquid--: Hey Y'all! - is anyone still using encrypted data bags for database users? If not, is there an alternative that is secure? I just downloaded the mongodb cookbook but there is no user recipe so I'm trying to create one!
[2013-08-21 22:49:45 -0400] pontiki: ruby Dir
[2013-08-21 22:50:06 -0400] strgbrew: pontiki: thought so, thanks again!
[2013-08-21 22:51:17 -0400] pontiki: nw
[2013-08-21 22:53:44 -0400] jtnz: Hi, I know that using 'notifies' ignores the not_if/only_if on the resource being notified. I'm wondering if subscribes is also the same?
[2013-08-21 22:54:32 -0400] chance: Why can't i access the attribute parameters of the application LWRP from inside of the definition?
[2013-08-21 22:59:10 -0400] chance: https://gist.github.com/ecnahc515/6301289 as a reference
[2013-08-21 23:00:05 -0400] dysinger: nm my question above.  I think I just got too paranoid about things blowing up 1st pass.
[2013-08-21 23:02:37 -0400] dgarstang: so... who's using that -j option with knife ec2?
[2013-08-21 23:04:46 -0400] dgarstang: Seems like no -j works at all with knife ec2. Used to... wonder if that was changed, and borken
[2013-08-21 23:06:48 -0400] dgarstang: Seriously, it won't take -j '{ "node_env": "production" }'
[2013-08-21 23:13:32 -0400] dgarstang: Would someone be able to try and verify -j is broken in knife ec2 server create?
[2013-08-21 23:14:17 -0400] troyready: Wouldn't you just do that with -E
[2013-08-21 23:14:27 -0400] troyready: (I don't use ec2 so could be missing something)
[2013-08-21 23:14:57 -0400] dgarstang: troyready: -E is the chef environment, which may not, is probably not, the same as our concept of environment
[2013-08-21 23:15:21 -0400] dgarstang: troyready: I also need to pass the node role, and it's cluster, ie specific data centre.
[2013-08-21 23:17:11 -0400] troyready: Sure, I figured there was more to it. node_env seems a little confusingly close to a node's chef environment, but to each their own
[2013-08-21 23:17:36 -0400] troyready: I briefly looked up the knife ec2 config when you raised the issue earlier, but didn't see anything that would help
[2013-08-21 23:19:24 -0400] dgarstang: troyready: be nice if someone could verify. It worked earlier this week and then I upgraded
[2013-08-21 23:24:35 -0400] troyready: weird. I don't see any new commits to knife-ec2 since july 25th
[2013-08-21 23:25:19 -0400] dgarstang: troyready: -j '{ "y": "x" }' should work then...
[2013-08-21 23:31:47 -0400] Majost: Anyone using setgid bits when creating a directory via chef?
[2013-08-21 23:32:18 -0400] Majost: The modes which it sets are waaaay wrong, and I suspect there is something to this I don't know about
[2013-08-21 23:34:00 -0400] Majost: huh
[2013-08-21 23:34:23 -0400] Majost: I need to prepend 2570 with a zero it seems
[2013-08-21 23:36:00 -0400] douglaswth: yeah, how can it tell it is octal otherwise?
[2013-08-21 23:39:14 -0400] Majost: I am just thinking in terms of chmod, which is implicit.

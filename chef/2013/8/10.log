[2013-08-10 00:23:07 -0400] miah: run time
[2013-08-10 00:23:31 -0400] miah: the resource is added, and at run time the not_if is evaluated
[2013-08-10 00:44:12 -0400] narsk: cat ~/.ddns/fog_ddns.rb
[2013-08-10 03:04:31 -0400] gkra: miah: thanks :)
[2013-08-10 13:06:18 -0400] MattMaker: I'm currently trying to encode the preferred configuration of everything that's on my macbook pro. It's a lot of fun, but it really, really could be a lot easier than it currently is.
[2013-08-10 13:06:39 -0400] MattMaker: *encode using chef-solo / pivotal workstation / librarian-chef
[2013-08-10 13:06:51 -0400] MattMaker: The thing I like about Ruby: the process of refactoring one's code tends to mean that most of the code *goes away*.
[2013-08-10 13:07:27 -0400] MattMaker: to me, coming into it as a newbie, it feels like a lot of Chef is still not "gone away" yet
[2013-08-10 13:07:57 -0400] MattMaker: Anyone have any silver bullets?
[2013-08-10 13:57:45 -0400] pontiki: no keemosabe
[2013-08-10 17:01:11 -0400] zahary: Hi,
[2013-08-10 17:01:11 -0400] zahary: I'm curious why doesn't Chef try to keep track of what resources it has created (like
[2013-08-10 17:01:11 -0400] zahary: user accounts, directories, files, etc) in order to be able to automatically remove them
[2013-08-10 17:01:12 -0400] zahary: later if the creation instructions disappear from the recipes or the run-list is edited in a
[2013-08-10 17:01:12 -0400] zahary: major way. What would be the downsides of such an approach?
[2013-08-10 17:02:25 -0400] mattray: zahary: how do you track what an execute resource does?
[2013-08-10 17:03:08 -0400] mattray: it also would be expected to know and preserve the previous state?
[2013-08-10 17:03:20 -0400] zahary: well, execute resource doesn't have an obvious undo operation and could be an exception
[2013-08-10 17:03:41 -0400] stormerider: zahary: i dont think that's idempotent
[2013-08-10 17:04:08 -0400] mattray: it's nearly impossible to do 100% correct
[2013-08-10 17:04:31 -0400] zahary: in more traditional software development, tup is an example of a build system working in a similar fashion
[2013-08-10 17:05:15 -0400] zahary: it provides strong guarantees that with a set of updated "makefiles", the build will always produce the same output regardless of the previous state
[2013-08-10 17:05:25 -0400] zahary: http://gittup.org/tup/
[2013-08-10 17:07:00 -0400] mattray: rolling back is a myth. Would Chef be expected to know and undo everything the installed applications did? logs, output files?
[2013-08-10 17:07:55 -0400] mattray: the reason containers and the cloud are popular is because infrastructure that is completely disposable and recreatable is much simpler
[2013-08-10 17:08:22 -0400] mattray: and what's the real value? servers are cheap
[2013-08-10 17:08:49 -0400] yfeldblum_: retry > rollback
[2013-08-10 17:09:03 -0400] mattray: I can provision bare metal in ~3 minutes, VMs in 20 seconds, docker instances in ~1 second
[2013-08-10 17:10:07 -0400] yfeldblum_: "The arrows go up. This makes it very fast."
[2013-08-10 17:10:10 -0400] yfeldblum_: wat
[2013-08-10 17:10:33 -0400] zahary: so, the philosophy of Chef is that I should prefer clean installs? my question is mostly motivated by the slower pace of iterative development - dealing with errors that I make while developing the recipes
[2013-08-10 17:12:37 -0400] mattray: zahary: yes, the eventual goal is to get to the point where you can lose any piece of your infrastructure and replace it with confidence. When to replace nodes becomes your call
[2013-08-10 17:25:15 -0400] MattMaker: zahary: although I have made a few recipes that "undo" a corresponding one. but these are generally ones where I think I know what the recipe could have done
[2013-08-10 17:28:57 -0400] MattMaker: what *is* kind of strange is that chef doesn't tell you right up front that recipes aren't intended to be reversible. It's opinionated software, it's probably correct, and that's fine. But I think there ought to be symmetrical commands for undoing things, and those commands should just output 'no.'
[2013-08-10 17:30:13 -0400] MattMaker: I guess it makes semantic sense that you can't un-cook a recipe. :) can't unscramble the eggs
[2013-08-10 17:31:46 -0400] zahary: well, most of the resources have a :delete action. if you manage a long-running Chef instance you'll end up with a lot of those
[2013-08-10 17:31:59 -0400] MattMaker: Python does this too... I wrote an uninstaller patch for a packager system, I forget the name, and they were like, "what's this for?" and rejected it
[2013-08-10 17:32:37 -0400] MattMaker: zahary: ah, that's good to know. I'm still green at this and I'm making a wreck of the food prep area
[2013-08-10 17:35:01 -0400] MattMaker: *patch for uninstalling packages that were installed as dependencies, rejected because dependencies aren't tracked by 'pip' and something else might need the package (I was prompting the user, in the patch)
[2013-08-10 17:36:09 -0400] MattMaker: anyway, it looks like brew install and brew cask install are taking over most of my recipes, for my current effort
[2013-08-10 17:36:35 -0400] geggam: good reason to use system packaging MattMaker  .. like rpm and deb .. it manages dependencies... if you use them
[2013-08-10 17:36:59 -0400] MattMaker: geggam: aye, turned out it was a religious argument in the Python world
[2013-08-10 17:37:32 -0400] geggam: that is a religious argument everywhere... those of us who have been to dependency hell preach packaging
[2013-08-10 17:37:37 -0400] geggam: :)
[2013-08-10 17:37:44 -0400] MattMaker: I'd like to find an IDE that I can develop my recipes in
[2013-08-10 17:37:48 -0400] geggam: vi ?
[2013-08-10 17:37:56 -0400] MattMaker: treat the whole chef client installation as a project
[2013-08-10 17:38:00 -0400] geggam: git
[2013-08-10 17:38:18 -0400] geggam: too snarky ?
[2013-08-10 17:38:20 -0400] MattMaker: not IDE enough
[2013-08-10 17:38:21 -0400] geggam: :)
[2013-08-10 17:38:28 -0400] geggam: i hate guis... i mention that ?
[2013-08-10 17:38:41 -0400] MattMaker: I want something like MonoDevelop's "find in all files"
[2013-08-10 17:38:58 -0400] geggam: what is monodevelop ?
[2013-08-10 17:39:19 -0400] MattMaker: it's like Visual Studio / RubyMine/IntelliJ/etc
[2013-08-10 17:39:22 -0400] geggam: ew
[2013-08-10 17:39:33 -0400] MattMaker: I want to be able to *see* the project
[2013-08-10 17:39:57 -0400] MattMaker: I can do that with grep, but I have to write a lot of scripts to get that going
[2013-08-10 17:40:17 -0400] zahary: there is always git grep that searches only in the repository files
[2013-08-10 17:40:33 -0400] MattMaker: with all the subfolders, a chef "project" is like a bunch of tiny little boxes with lids
[2013-08-10 17:40:54 -0400] MattMaker: and I just want to edit the two files that have the word "foo" in them anywhere
[2013-08-10 17:40:59 -0400] geggam: find . -type f -iname '*foo*' -exec grep bar {} ;\
[2013-08-10 17:41:01 -0400] MattMaker: don't care what kind of file they are
[2013-08-10 17:41:11 -0400] MattMaker: yes, I know grep
[2013-08-10 17:41:21 -0400] MattMaker: but I'll spend days optimizing it
[2013-08-10 17:41:47 -0400] MattMaker: I used to have scripts that would do exactly "edit the two files that have the word "foo" in them anywhere"
[2013-08-10 17:41:50 -0400] geggam: so if you insulate yourself from all the cool options you can just click stuff and not be bothered ?
[2013-08-10 17:42:11 -0400] geggam: sorry... im tired and feeling like being an ass... ill shup now
[2013-08-10 17:42:34 -0400] MattMaker: there are times when doing something the lame way is faster, and I get paid to know this
[2013-08-10 17:42:44 -0400] MattMaker: otherwise, I do agree
[2013-08-10 17:43:06 -0400] geggam: i get paid to make sure developers code keeps running and is deployed to quite a few servers.. and i have shitty developers
[2013-08-10 17:43:32 -0400] MattMaker: and it really would be nice to be able to "fly" over a bird's eye view of an entire chef setup
[2013-08-10 17:43:42 -0400] MattMaker: nothing really does that well right now
[2013-08-10 17:43:52 -0400] geggam: my favorite job description is this.. "i keep code running that shouldnt"
[2013-08-10 17:43:56 -0400] MattMaker: ha!
[2013-08-10 17:44:44 -0400] MattMaker: you know, "insulating myself" from doing a bunch of steps is exactly why I am using chef...
[2013-08-10 17:45:09 -0400] geggam: architect things simpler and you dont need to do many steps
[2013-08-10 17:45:19 -0400] MattMaker: otherwise, we have "Organization: Lots of little piles, all around my room"
[2013-08-10 17:45:26 -0400] geggam: last time you ran yum update what happened ?
[2013-08-10 17:45:41 -0400] MattMaker: well sure, but this is exactly what I am doing with chef
[2013-08-10 17:45:53 -0400] MattMaker: this is for OS X
[2013-08-10 17:45:58 -0400] geggam: so now u run yum update with chef on 15 thousand servers at once
[2013-08-10 17:46:01 -0400] geggam: ew
[2013-08-10 17:46:12 -0400] geggam: sold your soul to the highest bidder i see ?
[2013-08-10 17:46:20 -0400] geggam: gates is for poor folk
[2013-08-10 17:46:21 -0400] MattMaker: ew? it's just BSD. I live in consoles running 'screen'
[2013-08-10 17:46:30 -0400] MattMaker: I write iOS apps, so...
[2013-08-10 17:46:31 -0400] geggam: jobs gets the rich ones
[2013-08-10 17:46:45 -0400] geggam: the rest of use use linux/bsd
[2013-08-10 17:46:48 -0400] MattMaker: I bought it used
[2013-08-10 17:47:32 -0400] geggam: i should quit poking you.. im feeling very agitative
[2013-08-10 17:47:38 -0400] MattMaker: I haven't really been happy with an OS since the Commodore Amiga died
[2013-08-10 17:47:50 -0400] geggam: i like openbsd
[2013-08-10 17:48:04 -0400] geggam: it works.. on supported hardware
[2013-08-10 17:48:19 -0400] geggam: and doesnt try to run on things that arent supported
[2013-08-10 17:48:27 -0400] geggam: simple
[2013-08-10 17:48:46 -0400] geggam: alas i have to work on centos/ redhat
[2013-08-10 17:49:29 -0400] MattMaker: I built coin-op arcade units on top of stripped-down Debian/Kubuntu kernels
[2013-08-10 17:49:56 -0400] MattMaker: Ubuntu, because exactly -- I needed to support new incoming hardware
[2013-08-10 17:50:23 -0400] MattMaker: and I had all these bash scripts doing something like what chef does
[2013-08-10 17:50:25 -0400] geggam: wow... 3 for 3 on the sold my soul to the OS demons
[2013-08-10 17:50:48 -0400] geggam: yer going to OS hell
[2013-08-10 17:50:58 -0400] MattMaker: They're all the same to me now
[2013-08-10 17:51:00 -0400] geggam: may as well just pack yer bags
[2013-08-10 17:51:21 -0400] MattMaker: I have transcended
[2013-08-10 17:51:36 -0400] MattMaker: or rather, I mangle every OS so it looks like how I like it
[2013-08-10 17:51:56 -0400] MattMaker: I am looking to 'chef' to support me in this endeavor
[2013-08-10 17:52:17 -0400] geggam: yep... right place... u can mangle many systems very quickly with chef
[2013-08-10 17:52:31 -0400] geggam: in an irreparable way \
[2013-08-10 17:52:38 -0400] geggam: >:]
[2013-08-10 17:54:03 -0400] MattMaker: yeah, I got a banged up old laptop to repeatedly run bare metal installs against. takes forever, though
[2013-08-10 17:55:08 -0400] geggam: ive been dabbling with crowbar... with minimal success .. heard of it ?
[2013-08-10 17:55:40 -0400] MattMaker: onlt the name
[2013-08-10 17:55:42 -0400] MattMaker: *only
[2013-08-10 17:56:17 -0400] MattMaker: I went with librarian-chef, because pivotal-workstation, and now berkswhatever looks better :(
[2013-08-10 17:56:24 -0400] MattMaker: berkshelf?
[2013-08-10 17:57:22 -0400] MattMaker: dangit, I can never remember where I put things on local drives
[2013-08-10 17:57:25 -0400] geggam: berkshelf is good... .crowbar is the bootstrappingprocess
[2013-08-10 17:57:32 -0400] geggam: locate is a mans best friend
[2013-08-10 17:59:56 -0400] MattMaker: oh hey, looks like I have my locate up-to-date, that found it right away
[2013-08-10 18:00:01 -0400] MattMaker: thanks
[2013-08-10 18:01:09 -0400] geggam: ran out of smartass
[2013-08-10 18:01:58 -0400] mattray: MattMaker: if you were to support an IDE for Chef development, what would it be? Eclipse?
[2013-08-10 18:02:13 -0400] mattray: VisualStudio? ;)
[2013-08-10 18:02:37 -0400] geggam: make a ruby onrails app for it :)
[2013-08-10 18:02:40 -0400] mattray: I think there's some stuff floating around for Rubymine and Sublime somewhere
[2013-08-10 18:02:52 -0400] MattMaker: currently I have no preference, they all do the index on the right, file on the left, search results on the bottom thing
[2013-08-10 18:03:30 -0400] MattMaker: I've actually fired up RubyMine just now, to fix Cupertino after Apple broke it this weekend
[2013-08-10 18:03:47 -0400] MattMaker: (automates managing Apple security thingies for iOS apps)
[2013-08-10 18:03:59 -0400] MattMaker: I like Sublime
[2013-08-10 18:04:59 -0400] mattray: so do we, we push people towards it in training because it's good and cross platform
[2013-08-10 18:06:16 -0400] MattMaker: I had to remote debug a custom Linux USB device driver awhile back, and NetBeans did a surprisingly good job at that.
[2013-08-10 18:06:47 -0400] MattMaker: I'm having a rough time getting RubyMine to remote debug rails without getting an error on one end or the other
[2013-08-10 18:08:03 -0400] MattMaker: I haven't tried Eclipse in a while, so I dunno. It's only recently (in glacial time) that Java-based apps have stopped being awkward and ugly
[2013-08-10 18:08:16 -0400] MattMaker: They are nice and shiny, lately. Took long enough!
[2013-08-10 18:08:27 -0400] MattMaker: totally gridbag
[2013-08-10 18:35:54 -0400] d4c7: is there a schedule for knife plugins to get merged and versioned?
[2013-08-10 18:55:06 -0400] pontiki: i'd like to ask some general questions regarding setting up chef-solo for personal development of several projects.
[2013-08-10 18:55:35 -0400] pontiki: background: i've been up until recently working with a team using hosted chef, and have written a short handful of recipes
[2013-08-10 18:56:21 -0400] pontiki: i'd like to switch to chef-solo, as there is no possible way i can affort hosted chef on my own, and i don't *really* think i need it
[2013-08-10 18:57:37 -0400] pontiki: so question: how do i organize cookbooks for the various projects i'm running? i'd like to have the ability to spool up vagrant VMs at will, but also be able to deploy to my VPS eventually.
[2013-08-10 18:58:26 -0400] pontiki: i've got the starter kit installed in chef-repo as stated in the Quick Start guide
[2013-08-10 18:59:36 -0400] pontiki: of course i also have folders for each of my projects. i don't want to add the chef or vagrant stuff to the code bases, though
[2013-08-10 19:00:10 -0400] pontiki: i'm looking, i think? , at a parallel set of folders for the chef config, yes?
[2013-08-10 19:00:38 -0400] pontiki: and *please* tell me if there's a better place to ask this
[2013-08-10 19:00:49 -0400] pontiki: or pointers to reading material
[2013-08-10 19:02:33 -0400] siezer: pontiki I keep a ~/src/ directory with all cookbooks as an individual git project named cookbookname-cookbook
[2013-08-10 19:02:37 -0400] mattray: pontiki: if not hosted chef, why not just use the open source chef server?
[2013-08-10 19:02:45 -0400] siezer: with just cookbookname in the metadata.rb
[2013-08-10 19:03:19 -0400] siezer: then I use berkshelf and one "project cookbook" or "application cookbook"
[2013-08-10 19:03:20 -0400] pontiki: mattray: it's tempting. i have a small file server sitting over there -->
[2013-08-10 19:04:30 -0400] pontiki: siezer: each cookbook is in it's own repo, not one repo for all cookbooks? that'd be the way i'd go.
[2013-08-10 19:04:48 -0400] siezer: absolutely
[2013-08-10 19:04:52 -0400] pontiki: i need to read up on berkshelf
[2013-08-10 19:05:14 -0400] pontiki: (shouldn't that be brkchef?)
[2013-08-10 19:05:18 -0400] siezer: equate a cookbook to a rubygem, python or perl module
[2013-08-10 19:05:31 -0400] pontiki: right, i have that notion
[2013-08-10 19:06:37 -0400] siezer: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2013-08-10 19:06:56 -0400] pontiki: ta
[2013-08-10 19:07:29 -0400] siezer: combined with spiceweasel or multivm vagrant to track nodes/recipe mappings, you should be all set for multiple projects
[2013-08-10 19:08:27 -0400] pontiki: spiceweasel? multivm vagrant?
[2013-08-10 19:09:25 -0400] siezer: those let you describe machine sizes (cpu/mem), base OS, etc to apply a recipe to
[2013-08-10 19:09:37 -0400] pontiki: ah ok
[2013-08-10 19:09:45 -0400] siezer: spiceweasle is yaml that spits out knife commands for bootstrapping ec2/rackspace/opentack/whatever
[2013-08-10 19:09:55 -0400] mattray: siezer: or JSON or Ruby :)
[2013-08-10 19:10:01 -0400] siezer: vagrant uses its own plugins to talk to IaaS directly
[2013-08-10 19:10:02 -0400] siezer: =)
[2013-08-10 19:10:16 -0400] siezer: mattray I forgot =)
[2013-08-10 19:10:17 -0400] pontiki: my VPS is over on gandi. also have a DO droplet
[2013-08-10 19:10:40 -0400] mattray: just added DO support to spiceweasel :)
[2013-08-10 19:11:05 -0400] pontiki: the gandi VPS will be host to most of my projects
[2013-08-10 19:11:13 -0400] mattray: gandi support's been there for awhile
[2013-08-10 19:11:25 -0400] pontiki: rails apps, sinatra apps, node.js apps, etc
[2013-08-10 19:11:31 -0400] pontiki: it's my demo/playground
[2013-08-10 19:12:13 -0400] pontiki: awesome :)
[2013-08-10 19:17:15 -0400] siezer: pontiki beware there are still some rough edges around the berkshelf, chef proper, and some other ecosystem tools like chefspec
[2013-08-10 19:17:28 -0400] siezer: but for me, the tradeoff is worth it
[2013-08-10 19:17:57 -0400] siezer: and you can use berkshelf to "vendor" into a chef-repo structure to get around much of them
[2013-08-10 19:18:05 -0400] siezer: s/much/many/
[2013-08-10 19:34:08 -0400] FuZion755: hi all, quick question, is there any support in Chef or best practices for building and installing a Gem from a git repo?  Right now I'm manually cloning, running gem build and then gem_package... can't see to find any references to any more efficient way
[2013-08-10 19:36:59 -0400] coderanger: FuZion755: That is not something Rubygems supports, so no
[2013-08-10 19:37:13 -0400] coderanger: FuZion755: Bundler does support it, so can you use that
[2013-08-10 19:39:53 -0400] FuZion755: cool, thanks coderanger
[2013-08-10 19:48:26 -0400] gchristensen: is there any docs on how to publish a cookbook to tcommunity?
[2013-08-10 20:33:33 -0400] mattray: gchristensen: http://community.opscode.com/cookbooks
[2013-08-10 20:33:42 -0400] mattray: "Add a new cookbook"
[2013-08-10 20:33:51 -0400] mattray: that'll set it up with your community credentials
[2013-08-10 20:34:05 -0400] mattray: then you'll use knife cookbook site share to push from your chef repo
[2013-08-10 20:53:39 -0400] Codemonkey: Hey
[2013-08-10 20:54:35 -0400] Codemonkey: Does anyone have experience with the AWS cookbook? I'm trying to use aws_elastic_lb to register the node with my load balancer but Chef returns "Error executing action `register` on resource 'aws_elastic_lb[app]'"
[2013-08-10 20:56:08 -0400] Codemonkey: Here's the chef output: https://gist.github.com/MiniCodeMonkey/8700365a6a061d2b9400
[2013-08-10 20:57:32 -0400] AlHafoudh: hi all
[2013-08-10 20:57:59 -0400] AlHafoudh: what should I use for collecting syslog from many servers?
[2013-08-10 20:58:11 -0400] AlHafoudh: graylog? nagios? ..
[2013-08-10 21:00:47 -0400] Codemonkey: Awfully quiet in here today :)
[2013-08-10 21:10:44 -0400] pontiki: this is fun
[2013-08-10 21:13:53 -0400] ignatz: codemonkey, looks like you didn't associate the load balancer with instance ID(s)
[2013-08-10 21:14:19 -0400] ignatz: iirc you can't create an ELB without either instances or an autoscale group
[2013-08-10 21:14:39 -0400] Codemonkey: I'm trying to register the instance with ELB
[2013-08-10 21:14:51 -0400] Codemonkey: (ELB doesn't have any instances already, that might be a problem?)
[2013-08-10 21:14:52 -0400] ignatz: oh huh sorry got it backwards
[2013-08-10 21:15:00 -0400] ignatz: yeah, that might be it
[2013-08-10 21:17:02 -0400] ignatz: could it somehow not be looking up the instance id of "app" properly?
[2013-08-10 21:18:03 -0400] ignatz: it doesn't seem to show up in the compiled resource
[2013-08-10 21:18:16 -0400] Codemonkey: Waaait a minute. I think I set the wrong load balancer name
[2013-08-10 21:18:29 -0400] ignatz: I hate it when its something like that.
[2013-08-10 21:18:46 -0400] Codemonkey: Nooooo way
[2013-08-10 21:18:54 -0400] Codemonkey: God, I feel stupid now
[2013-08-10 21:19:06 -0400] ignatz: It's way better than fighting a bug for 3 days!
[2013-08-10 21:19:21 -0400] ignatz: Yesterday I spent a while chasing a bug and it turned out I was referring to a node that didn't exist yet.
[2013-08-10 21:21:26 -0400] Codemonkey: Heh, the joys of a developer...
[2013-08-10 21:22:57 -0400] ignatz: right. a life spent looking for semicolons
[2013-08-10 21:26:27 -0400] ignatz: I've had to do a lot of Chef Windows stuff at this job and it's been quite a ride.
[2013-08-10 21:29:03 -0400] ignatz: BTW I have an odd one. I have to run the Nagios server recipe twice, every time. It doesn't pick up the server name right the first time. It's probably because my Ubuntu version (13) is newer than the one tested with the cookbook but in case you've seen that...
[2013-08-10 22:18:43 -0400] msch: how can I set attributes depending on whether a recipe is in the run list or not? e.g. I want to set some other cookbook's attributes differently if my recipe is going to run
[2013-08-10 22:45:28 -0400] bjensen82: is Chef solo always run as root?
[2013-08-10 22:47:07 -0400] mattray: bjensen82: it runs as whatever user you want, but typically root so you have sufficient privileges to make the changes you'd want
[2013-08-10 22:47:33 -0400] bjensen82: mattray: I guess I was meaning to ask: What is it run as default?
[2013-08-10 22:47:39 -0400] bjensen82: as = by
[2013-08-10 22:48:00 -0400] mattray: bjensen82: most run as root, or use sudo
[2013-08-10 22:48:22 -0400] bjensen82: but is it a default or you do you need to set it somewhere?
[2013-08-10 22:49:17 -0400] mattray: as default
[2013-08-10 22:57:02 -0400] bjensen82: mattray: ok. Thanks :)
[2013-08-10 23:52:23 -0400] DCAP: Hi, If anyone is interested in creating chef cookbooks for a debian LAMP project I am working on (Apache, postgres etc) using tools like Vagrant and EC2 please contact me. Apologies however there is no training in australia and Its driving me nuts trying to get it to work as I am not a programmer (main issue is using attributes for the postgresql/database recipe)

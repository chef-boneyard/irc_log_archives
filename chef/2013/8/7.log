[2013-08-07 00:17:05 -0400] stompyj: is there a cheat sheet for things that have disappeared from chef 10 to chef 11?
[2013-08-07 00:17:22 -0400] stompyj: my call to ::Dir.exists? is no longer working
[2013-08-07 00:23:58 -0400] cwj: stompyj: Dir is part of the ruby stdlib
[2013-08-07 00:24:17 -0400] stompyj: yeah, the exists? method is missing when called from chef 11
[2013-08-07 00:24:37 -0400] stompyj: (which made me assume chef is doing something with it)
[2013-08-07 00:25:34 -0400] cwj: i would expect prefixing with :: to avoid colliding with anything Chef is doing
[2013-08-07 00:25:37 -0400] cwj: so thats really weird
[2013-08-07 00:25:44 -0400] stompyj: yeah, its wild
[2013-08-07 00:25:58 -0400] stompyj: if you puts Dir.methods in IRB, its there.  inside chef, it's missing
[2013-08-07 00:26:10 -0400] stompyj: ::Dir.methods *
[2013-08-07 00:26:12 -0400] cwj: what about in chef-shell
[2013-08-07 00:26:18 -0400] stompyj: let me try that
[2013-08-07 00:26:42 -0400] stompyj: which I never knew existed btw :)
[2013-08-07 00:26:45 -0400] stompyj: thanks for that
[2013-08-07 00:27:09 -0400] stompyj: yep, it's there in chef-shell
[2013-08-07 00:28:40 -0400] cwj: gist recipe and stacktrace?
[2013-08-07 00:29:36 -0400] stompyj: sure! one se
[2013-08-07 00:29:37 -0400] stompyj: c
[2013-08-07 00:30:04 -0400] stompyj: chef shell was 11.4 and my vagrant is running 11.6, so I want to re-run in vagrant using 11.4 first
[2013-08-07 00:30:13 -0400] cwj: k
[2013-08-07 00:31:15 -0400] oneness: anyone know how to add new node to cluster/cluster-name.rb file?
[2013-08-07 00:36:12 -0400] stompyj: cwj: actually, I'm gonna play with this a bit more, thanks for the offer tho.  this is a great irc channel
[2013-08-07 00:36:38 -0400] stompyj: I may come back tomorrow if I am still stumped
[2013-08-07 00:36:39 -0400] cwj: stompyj: cool, i gotta go mow the lawn anyway. good luck!
[2013-08-07 00:36:43 -0400] stompyj: lol nice
[2013-08-07 00:44:49 -0400] gchristensen: do cookbooks ever *store* data in an encrypted data bag?
[2013-08-07 00:48:35 -0400] yoshie902a: hi, I'm wondering if anyone could give me some direction.  I've learned the basics of chef, I can download cookbooks, setups roles, etc.  However, I do not have a great understanding of how to customize chef. my issue now, is if I setup a db role and a web app role and deploy them on two different EC2 machines, where do setup the DB address?
[2013-08-07 00:50:08 -0400] Sauraus: I am going crazy here... I have 3 .erb files, 2 of these complain about ^M in the files when they are transfered to the guest Linux system, from my windows workstation, anyone have ideas?
[2013-08-07 00:52:55 -0400] yoshie902a: anyone here understand chef well enough to walk me through adjusting some code?  I can pay a little for the help, but too poor to pay much. we could do a screen share of something. do a private message if interested.  thanks
[2013-08-07 00:53:17 -0400] gchristensen: jtimberman: do you by chance know if there is an example (or if its possible and I should read XYZ, or not possible don't bother) to have a recipe create and save an encrypted data bag?
[2013-08-07 00:57:41 -0400] stompyj: cwj: https://gist.github.com/erichmond/6170328#file-chef_issues
[2013-08-07 00:57:45 -0400] stompyj: wild
[2013-08-07 01:05:46 -0400] stompyj: cwj: whoa, never mind it's a local error o_o
[2013-08-07 01:14:52 -0400] yoshie902a: I'm following http://wiki.opscode.com/display/chef/Build+A+Rails+Stack, but I am trying to understand how the radiant web app knows where the database instance would be found. I assume the load balancer, but how does the load balancer know? where are the configs to set it up?
[2013-08-07 01:16:16 -0400] coderanger: yoshie902a: The chef-server has an index of data about all nodes
[2013-08-07 01:16:28 -0400] coderanger: yoshie902a: So each of those is running searches against that index to find the relevant data
[2013-08-07 01:16:42 -0400] stompyj: Can someone do me a favor and just do a
[2013-08-07 01:17:08 -0400] stompyj: puts ::Dir.public_methods(false) inside a recipe and let me know if home, exist?, or exists? are there?
[2013-08-07 01:17:32 -0400] yoshie902a: coderanger: if I wanted to replicate Building a rails stack, with chef solo, what would you recommend?
[2013-08-07 01:18:04 -0400] coderanger: yoshie902a: Generally you use roles or a data bag to set the various inter-server data
[2013-08-07 01:18:54 -0400] coderanger: stompyj: I just did it in irb and they are all there
[2013-08-07 01:20:06 -0400] stompyj: coderanger: thank you
[2013-08-07 01:20:07 -0400] yoshie902a: coderanger: I'm sorry I'm so knew at this, but could you point me at a chef solo example or recipe that shows how to use a role or data bag to set the various inter-server data?  I'm mainly trying to figure out how to tell my web app to talk to the db, or redis/resque server
[2013-08-07 01:20:16 -0400] stompyj: coderanger: well, in IRB they'd be htere
[2013-08-07 01:20:30 -0400] stompyj: and they're there in chef-shell too
[2013-08-07 01:20:32 -0400] coderanger: yoshie902a: I don't use solo much, so I don't have any examples, sorry
[2013-08-07 01:20:45 -0400] stompyj: but for some reason when I run that same command in an actual recipe, they're not
[2013-08-07 01:20:48 -0400] coderanger: stompyj: We are definitely not monkeypatching Dir to remove methods :)
[2013-08-07 01:20:55 -0400] coderanger: stompyj: Can you pastebin the recipe code and error?
[2013-08-07 01:20:56 -0400] yoshie902a: are there different recipes on opscode  for server vs solo?
[2013-08-07 01:20:58 -0400] stompyj: haha, i 1000% believe you
[2013-08-07 01:21:07 -0400] yoshie902a: coderanger: ^
[2013-08-07 01:21:11 -0400] stompyj: but i'm mystified as to what's going on
[2013-08-07 01:21:30 -0400] coderanger: yoshie902a: Some cookbooks will not work as well with solo, we don't generally have specific cookbooks for solo though
[2013-08-07 01:21:46 -0400] yoshie902a: :(
[2013-08-07 01:23:01 -0400] coderanger: yoshie902a: Solo mostly exists for boostrapping chef-server and for very specific embedded needs when integrating with an existing backplane, unless you are writing your own CMDB and integrating it with chef-solo, I don't recommend using it
[2013-08-07 01:23:21 -0400] coderanger: stompyj: pastebin? :)
[2013-08-07 01:23:25 -0400] yoshie902a: coderanger: what is a CMDB?
[2013-08-07 01:23:35 -0400] coderanger: configuration management database
[2013-08-07 01:23:53 -0400] coderanger: General term for "the thing that knows about all of your infrastructure"
[2013-08-07 01:23:58 -0400] coderanger: chef-server is a very simple CMDB :)
[2013-08-07 01:24:55 -0400] yoshie902a: coderanger: assuming I use the server version, can you point me to the section in the docs that speak about how my web app would find the DB, redis/reque server, etc?
[2013-08-07 01:25:22 -0400] yoshie902a: I have not been able to find any documentation on it
[2013-08-07 01:25:34 -0400] coderanger: yoshie902a: http://docs.opscode.com/essentials_search.html
[2013-08-07 01:26:19 -0400] stompyj: coderanger: https://gist.github.com/erichmond/6170434
[2013-08-07 01:26:59 -0400] stompyj: yoshie902a: I concur with coderanger, chef-solo is very DIY, it may make sense to get up on server first while you're getting things sorted
[2013-08-07 01:28:04 -0400] coderanger: stompyj: Am I correct in guessing you are running the recipe inside vagrant?
[2013-08-07 01:28:16 -0400] stompyj: ruh roh :)
[2013-08-07 01:28:17 -0400] stompyj: yeah
[2013-08-07 01:28:41 -0400] stompyj: let me run it remotely
[2013-08-07 01:28:46 -0400] stompyj: will take 3 mins
[2013-08-07 01:28:52 -0400] coderanger: stompyj: How did you install Chef on your vagrant box? If you are using the old vagrant-default precise64 image it uses a very old version of Ruby
[2013-08-07 01:28:56 -0400] yoshie902a: coderanger: great reference material. I'm understand this a bit better now.
[2013-08-07 01:29:04 -0400] coderanger: stompyj: Check out the vagrant-omnibus plugin for a better way :)
[2013-08-07 01:29:26 -0400] coderanger: stompyj: I would wager those methods were added in Ruby 1.9
[2013-08-07 01:30:19 -0400] coderanger: yoshie902a: So in the case of the load balancer, it does a search like search(:node, 'roles:appserver')
[2013-08-07 01:30:19 -0400] coderanger: yoshie902a: and grabs the IPs from that
[2013-08-07 01:30:29 -0400] stompyj: SWEET BABY JESUS you're right
[2013-08-07 01:30:35 -0400] stompyj: I upgraded chef, but not ruby
[2013-08-07 01:30:36 -0400] stompyj: ...
[2013-08-07 01:30:51 -0400] stompyj: danke
[2013-08-07 01:30:53 -0400] coderanger: yoshie902a: https://github.com/python/psf-chef/blob/master/cookbooks/psf-loadbalancer/recipes/haproxy.rb#L10 is an example
[2013-08-07 01:30:54 -0400] sweep: question
[2013-08-07 01:31:17 -0400] sweep: when running the command knife configure --initial I get the following error....
[2013-08-07 01:31:27 -0400] sweep: ERROR: Your private key could not be loaded from /etc/chef-server/admin.pem Check your configuration file and ensure that your private key is readable
[2013-08-07 01:31:50 -0400] sweep: I'm unable to get passed this point
[2013-08-07 01:31:52 -0400] coderanger: stompyj: Opscode also provides "blank" (read no chef or puppet installed) base boxes
[2013-08-07 01:31:53 -0400] sweep: any ideas???
[2013-08-07 01:32:01 -0400] coderanger: stompyj: Check out the opscode-bento project for links
[2013-08-07 01:32:09 -0400] coderanger: stompyj: Those + vagrant-omnibus == <3
[2013-08-07 01:32:34 -0400] coderanger: sweep: You need to grab your admin key :)
[2013-08-07 01:32:45 -0400] coderanger: sweep: you are setting up an open-source server, right?
[2013-08-07 01:32:50 -0400] sweep: yes
[2013-08-07 01:33:35 -0400] coderanger: sweep: So yeah, you need to grab that file from the chef-server machine, it is the initial admin user
[2013-08-07 01:33:42 -0400] coderanger: using that, you can create your own user account
[2013-08-07 01:33:57 -0400] sweep: do I put it in the .chef dir??
[2013-08-07 01:34:45 -0400] coderanger: sweep: You can put it wherever you want, just give "-k /path/to/admin.pem" as a command line argument
[2013-08-07 01:34:48 -0400] yoshie902a: coderanger: this makes a lot of sense now. However, where would I find those configs, for example, in the nginx recipe, I will be uploading  web app, lets say in this case the radiant cookbook, where would those search configs normally be?
[2013-08-07 01:35:24 -0400] stompyj: coderanger: thanks! although, just for clarification, the issue I'm having is that the ruby is being referenced is 1.8.  Will either of those projects fix that issue?
[2013-08-07 01:35:34 -0400] coderanger: yoshie902a: It depends on how you want to do things, as you can see from that recipe I linked, I tend to use a very LWRP-heavy style, but thats probably more advanced than you need :)
[2013-08-07 01:35:54 -0400] yoshie902a: what is LWRP?
[2013-08-07 01:36:02 -0400] coderanger: stompyj: Yes, our omnibus installers include their own Ruby, which happens to be 1.9.3 (I think, might be 1.9.2)
[2013-08-07 01:36:10 -0400] stompyj: PURRRFECT
[2013-08-07 01:36:11 -0400] stompyj: thanks so much
[2013-08-07 01:36:25 -0400] coderanger: yoshie902a: A way of building new Chef resources like template and cookbook_file and package
[2013-08-07 01:36:38 -0400] yoshie902a: what does it stand for?
[2013-08-07 01:36:43 -0400] coderanger: yoshie902a: Like if you look at that recipe, you can see there is an haproxy_section resource
[2013-08-07 01:36:53 -0400] coderanger: lightweight resources/providers
[2013-08-07 01:37:46 -0400] sweep: thanks I'll give it a try!
[2013-08-07 01:38:44 -0400] yoshie902a: coderanger: that seems pretty smart to me.
[2013-08-07 01:39:23 -0400] yoshie902a: I would think you would need to factor the config variables out.
[2013-08-07 01:43:28 -0400] yoshie902a: in a case where I find this.. "    results = search(:node, "role:#{app["database_master_role"][0]} AND chef_environment:#{node.chef_environment}", nil, 0, 1)"
[2013-08-07 01:43:44 -0400] yoshie902a: where is the database_master_role defined?
[2013-08-07 01:46:16 -0400] coderanger: yoshie902a: I think thats coming from a data bag
[2013-08-07 01:46:59 -0400] coderanger: Look for "app = <something>" further up in the file
[2013-08-07 02:01:51 -0400] yoshie902a: coderanger: app = node.run_state[:current_app]
[2013-08-07 02:02:16 -0400] coderanger: yoshie902a: Oh, you are reading the old application cookbook?
[2013-08-07 02:02:30 -0400] yoshie902a: coderanger: am I?
[2013-08-07 02:02:53 -0400] yoshie902a: coderanger: I just downloaded the rails-quick-start tutorial and working off that
[2013-08-07 02:03:04 -0400] coderanger: yoshie902a: Yeah, that is super old
[2013-08-07 02:03:24 -0400] yoshie902a: yikes, will it make a difference?
[2013-08-07 02:06:45 -0400] yoshie902a: I downloaded the new nginx cookbook but can not find app= anymore. was it replaced with something else?
[2013-08-07 02:07:07 -0400] coderanger: yoshie902a: The new application cookbook is very very different
[2013-08-07 02:07:47 -0400] yoshie902a: I've noticed. totally confused now. :(  do the new cookbooks still use search()
[2013-08-07 02:09:00 -0400] yoshie902a: coderanger: ^ and is there something that explains the new structure?
[2013-08-07 02:12:18 -0400] coderanger: Yes they do use search, and check the readme on application_ruby for an overview of using the new one
[2013-08-07 02:12:27 -0400] coderanger: There should be an example in there too
[2013-08-07 02:22:48 -0400] yoshie902a: coderanger: thanks again for all your help! I'm learning a lot.
[2013-08-07 02:23:17 -0400] coderanger: No problem
[2013-08-07 02:23:33 -0400] yoshie902a: coderanger: where is the @database hash set in ruby_application, I see that the database_template.yml.erb calls it, but I do not see where it is set
[2013-08-07 02:24:14 -0400] coderanger: yoshie902a: It is driven by that database do end block
[2013-08-07 02:25:33 -0400] yoshie902a: coderanger: I do not see a database do end block in the template, are you referring to another file?
[2013-08-07 02:25:55 -0400] coderanger: Yes, in the recipe
[2013-08-07 02:26:11 -0400] coderanger: Look at the examples in the readme
[2013-08-07 02:26:24 -0400] yoshie902a: oh, got it, so that database block is going to be in another recipe
[2013-08-07 02:26:41 -0400] yoshie902a: I was trying to figure out where it fits in
[2013-08-07 02:27:54 -0400] yoshie902a: so that would also mean that the application_ruby code would need to be included in the recipe
[2013-08-07 02:28:05 -0400] yoshie902a: otherwise, you could not call it.
[2013-08-07 02:28:17 -0400] yoshie902a: coderanger: does this seem correct?
[2013-08-07 02:28:30 -0400] coderanger: sort of, application_ruby is kind of like a library
[2013-08-07 02:28:35 -0400] coderanger: you don't use it directly,
[2013-08-07 02:29:39 -0400] yoshie902a: so how can the recipe reference it?
[2013-08-07 02:29:41 -0400] coderanger: it provides stuff that you use via the application resource
[2013-08-07 02:30:25 -0400] yoshie902a: :(. not I'm getting a little lost. can you point me to a recipe that uses the application_ruby library to setup a rails app?
[2013-08-07 02:30:35 -0400] gchristensen: coderanger: any thoughts on saving encrypted data bags from a recipe? I'm about to make a resource or something to try and make it work.
[2013-08-07 02:30:37 -0400] yoshie902a: not=now
[2013-08-07 02:31:22 -0400] coderanger: yoshie902a: I don't have one, sorry, there was a radiant example long ago when I wrote it, but I'm not sure where it went, I'll check my old repos in a bit
[2013-08-07 02:31:46 -0400] coderanger: gchristensen: Not sure what you are asking ,you should just be able to use the API from a ruby_block or LWRP
[2013-08-07 02:31:57 -0400] yoshie902a: I have that downloaded already, but I figured it was out of date, so I should not use it as a reference
[2013-08-07 02:32:22 -0400] gchristensen: coderanger: I want to have a recipe  create and update encrypted data bags. a ruby block is the way to go?
[2013-08-07 02:33:56 -0400] coderanger: yoshie902a: Yeah, I don't have a full-stack example of a rails app that I can find
[2013-08-07 02:34:15 -0400] coderanger: gchristensen: Sure, just have to poke the encrypted data bag APIs manually probably
[2013-08-07 02:34:24 -0400] yoshie902a: coderanger: that's ok, you're helping me a great deal
[2013-08-07 02:34:33 -0400] gchristensen: coderanger: shall I look at the knife code for a good example of that?
[2013-08-07 02:35:07 -0400] coderanger: gchristensen: thats what I would do :)
[2013-08-07 02:35:59 -0400] yoshie902a: coderanger: ya, the radiant example seems to point to a database on the same server.  oh well
[2013-08-07 02:37:25 -0400] coderanger: yoshie902a: Just check out the app_ruby readme
[2013-08-07 02:37:33 -0400] gchristensen: coderanger: thank you!
[2013-08-07 02:37:36 -0400] coderanger: yoshie902a: That database_master_role is what it searches for
[2013-08-07 02:38:44 -0400] yoshie902a: coderanger: I've read it already.  Since I'm starting from very little, I was hoping to have a working example, I could download and play with.  No problem though.  I can test the application_ruby examples in the readme
[2013-08-07 02:39:26 -0400] coderanger: yoshie902a: If you are familiar with python, there is both an example in the application_python repo and several live deployments in the psf-chef repo
[2013-08-07 02:40:13 -0400] yoshie902a: coderanger:  I'm not a python guy, but I'm sure they will help.  thank you
[2013-08-07 02:59:53 -0400] gchristensen: gosh durnit, librarian-chef didn't update application_ruby, but did update application_ruby causing my deployments to bork
[2013-08-07 03:02:46 -0400] gchristensen: so ... anyone ever experienced where librarian refuses to update a cookbook?
[2013-08-07 03:07:25 -0400] pontiki: Ook
[2013-08-07 03:26:37 -0400] gchristensen: good grief, I could switch to Berkshelf in the time its taken to try and resolve this silliness
[2013-08-07 04:54:18 -0400] jtoft: I'm running into a funny issue where I have a provider that defines a service, but after running the provider it seems that the service context isn't local to the recipe it's running in; it throws a service definition error. Any ideas on how to fix that?
[2013-08-07 05:34:14 -0400] NagaLakshmi: Hi.. Is there any way to retrieve the attributes from the cookbooks run during the chef run?
[2013-08-07 05:51:39 -0400] coderanger: NagaLakshmi: Not sure what you mean
[2013-08-07 05:52:00 -0400] coderanger: NagaLakshmi: Cookbook attributes are merged in to the node and just show up as part of the node attributes
[2013-08-07 06:07:20 -0400] NagaLakshmi: For example if we run mysql cookbook,how can we retrieve the mysql's username and password?
[2013-08-07 06:10:00 -0400] jtoft: If I do something like: group node[:nginx][:group] do ;members node[:postgres][:user]; append true; action :modify; end in some internal cookbook, is there a way to get around the cloned resource attribute warning for the group? (CHEF-3694)
[2013-08-07 06:14:49 -0400] jtoft: resources(:group => node[:nginx][:group])
[2013-08-07 06:14:50 -0400] jtoft: I see
[2013-08-07 06:27:18 -0400] coderanger: NagaLakshmi: generally node['mysql']['root_db_password'] I think, or something like that
[2013-08-07 07:38:09 -0400] tomtaylor: hello, i don't suppose anyone has a second to help me with an odd git/ssh-agent problem?
[2013-08-07 07:47:57 -0400] tomtaylor: Well, i'll throw this out anyway. I'm using vagrant with SSH forward agent. During `vagrant provision`, my chef scripts fail when clone a private git repo from github, complaining the key is invalid. However, I have checked the environment during provisioning, and SSH_AUTH_SOCK env is present, and if I execute `ssh -T git@github.com` or `git ls-remote
[2013-08-07 07:47:57 -0400] tomtaylor: git@github.com:user/repo.git` from the chef script it works as expected. It seems like there's something about the way that chef executes git that causes the forward agent socket to no longer be present, thus failing SSH authentication.
[2013-08-07 08:07:53 -0400] davout: hello all
[2013-08-07 08:08:40 -0400] davout: how can i manage my roles/environments locally, without using knife, simply pushing them to the chef server from time to time like i do with cookbooks ?
[2013-08-07 08:57:24 -0400] m4rcu5: is there any way to block all cookbooks from running if there is no version defined in the environment?
[2013-08-07 08:58:07 -0400] jonlives: m4rcu5: nope :)
[2013-08-07 08:58:21 -0400] jonlives: not unless you write the logic yourself, or something :)
[2013-08-07 08:58:50 -0400] m4rcu5: jonlives: :'( you dont have anything in spork that helps with it? we use spork upload anyways :)
[2013-08-07 08:59:12 -0400] jonlives: m4rcu5: that was part of the impetus behind spork updating irc, graphite etc etc so we can quickly see if a cookbook is uploaded but not promoted etc.
[2013-08-07 08:59:22 -0400] jonlives: so it helps, but it doesn't enforce anything.
[2013-08-07 08:59:32 -0400] jonlives: and if it did, you could still use knife cookbook upload to get round it.
[2013-08-07 08:59:59 -0400] m4rcu5: jonlives: but if you upload a cookbook thats new, then every server in the env will install it without version contreaints
[2013-08-07 09:00:25 -0400] jonlives: correct :)
[2013-08-07 09:00:40 -0400] jonlives: and that I've found, there's no way to stop that from happening.
[2013-08-07 09:00:53 -0400] m4rcu5: on the same topic, can you have it auto upload the environment after you promoted?
[2013-08-07 09:01:18 -0400] jonlives: m4rcu5: you can just run promote --remote, which does a local promote then uploads :)
[2013-08-07 09:01:52 -0400] m4rcu5: jonlives: you could have it set the version in all envs to 0.0.0 on upload :-/
[2013-08-07 09:02:05 -0400] m4rcu5: jonlives: thanks, my feature was already in there! :)
[2013-08-07 09:02:39 -0400] jonlives: m4rcu5: there's actually a feature I'm writing for the next version which will be spork omni, which essentially lets you combine bump, upload and promote (or promote --remote) into one command.
[2013-08-07 09:02:47 -0400] jonlives: the individual commands will still stay too.
[2013-08-07 09:03:01 -0400] jonlives: so that would essentially do what you're looking for I think?
[2013-08-07 09:03:04 -0400] zaargy: do you commit your environment file back to your repository too?
[2013-08-07 09:03:18 -0400] zaargy: i have some logic around spork and git to do that but it's a bit hacky :S
[2013-08-07 09:03:33 -0400] jonlives: zaargy: are you using spork's git plugin to git add them?
[2013-08-07 09:03:39 -0400] zaargy: oh in our case i should say our ci does the spork bit
[2013-08-07 09:03:44 -0400] jonlives: aaah ok
[2013-08-07 09:03:53 -0400] zaargy: oh i didn't know about the git plugin actually
[2013-08-07 09:04:20 -0400] jonlives: zaargy: https://github.com/jonlives/knife-spork/blob/master/plugins/Git.md
[2013-08-07 09:04:43 -0400] jonlives: zaargy: it'll git pull before all commands (including from submodules) and git add metadata.rb and env files
[2013-08-07 09:04:50 -0400] jonlives: you still have to commit yourself, intentionally :p
[2013-08-07 09:05:33 -0400] zaargy: ah i see. yeah i could probably have used this. i have some logic that too a while to get right since there are a lot ooof error conditions!
[2013-08-07 09:05:42 -0400] zaargy: s/too/took/
[2013-08-07 09:06:16 -0400] jonlives: zaargy: plugin source: https://github.com/jonlives/knife-spork/blob/master/lib/knife-spork/plugins/git.rb
[2013-08-07 09:06:31 -0400] jonlives: it should handle most of the error conditions we came across at Etsy at least :p
[2013-08-07 09:06:50 -0400] jonlives: it has methods for commit, push and tag which aren't used at the moment.
[2013-08-07 09:07:14 -0400] m4rcu5: jonlives: well, if you upload a cookbook, the env should actually read 0.0.0 to prevent any server (of which the environment has not been promoted) to install it, as soon as you promote the cookbook in an env it should set the version number. or am i thinking completely the wrong way?
[2013-08-07 09:07:56 -0400] jonlives: m4rcu5: that's not the way environments work at the moment, but you could certainly have them work that way :)
[2013-08-07 09:08:12 -0400] jonlives: at the moment, if you upload, nothing happens to the environments.
[2013-08-07 09:08:14 -0400] zaargy: yup, cool. thanks.
[2013-08-07 09:09:28 -0400] m4rcu5: jonlives: im trying to make sure that no unplanned cookbooks enter the production environment, but i dont really know how
[2013-08-07 09:10:27 -0400] zaargy: m4rcu5: do you set the runlists in your roles?
[2013-08-07 09:10:36 -0400] jonlives: m4rcu5: well that's the thing - at the moment there is no such way. The approach i'd emphasise is to avoid trying to eliminate human error (which is impossible), but instead optimize for quick recovery when it happens. That's why there's so much stuff in spork to alert various chat systems, graphite etc when spork operations are carried out.
[2013-08-07 09:10:37 -0400] m4rcu5: zaargy: yep
[2013-08-07 09:10:58 -0400] zaargy: right. so that makes things harder since roles can't be versioned at all.
[2013-08-07 09:11:00 -0400] jonlives: m4rcu5: but that said, please feel free to open an issue on spork about this and I'll have a look at it :)
[2013-08-07 09:11:06 -0400] zaargy: so you can move your runlists to app cookbooks
[2013-08-07 09:11:17 -0400] zaargy: which eventually leads to the berkshelf way
[2013-08-07 09:11:32 -0400] zaargy: then you just constraint your app cookbooks in your environments
[2013-08-07 09:11:36 -0400] jonlives: on the above note, next spork version will also include a command for changing roles :p
[2013-08-07 09:11:39 -0400] m4rcu5: zaargy: and then version the app cookbook, but i don't wee where the berkshelf way comes in?
[2013-08-07 09:11:41 -0400] jonlives: so you'll find out about that too.
[2013-08-07 09:12:08 -0400] zaargy: well i said it leads to the berkshelf way as then you manage your library cookbooks at the cookbook level with berkshelf
[2013-08-07 09:12:38 -0400] jonlives: fwiw, at Etsy we still manage all of our runlist logic in roles
[2013-08-07 09:12:53 -0400] jonlives: which I know is a bit controversial these days :p
[2013-08-07 09:13:00 -0400] zaargy: yeah i watched the food fight show ;)
[2013-08-07 09:14:23 -0400] m4rcu5: jonlives: the humar error is to easy to make, we add a new recipe to a role, upload the role, upload the cookbook, but forget to set the prod version to 0.0.0 and promote the testing version, it will install the recipe on all boxes without hassitation :)
[2013-08-07 09:15:02 -0400] zaargy: so if you move your runlist to app cookboko then your runlist would be versioned in teh same way which means it'll need get applied to another env til you bump it
[2013-08-07 09:15:05 -0400] jonlives: m4rcu5: absolutely, human error is always easy to make.
[2013-08-07 09:15:13 -0400] m4rcu5: zaargy: i still have to dig into the berkshelf way, and how that would manage the role cookbook better then our current way using a git repo. the main thing i didn;t want was a repository per cookbook
[2013-08-07 09:15:32 -0400] zaargy: yeah i took a while to fall in love with that idea too
[2013-08-07 09:15:41 -0400] zaargy: also not modifying community cookbooks etc is a constant pain
[2013-08-07 09:15:45 -0400] zaargy: lots of rewind action etc
[2013-08-07 09:16:04 -0400] zaargy: we are moving towards a berkshelf/spork combined way
[2013-08-07 09:16:07 -0400] m4rcu5: jonlives: as its so easy, i was thinking, maybe i was doing it wrong, what is your procedure of releasing a new cookbook into a role at etsy?
[2013-08-07 09:16:11 -0400] jonlives: m4rcu5: in this case you just move your runlist from the role into a cookbook, which you can then version etc. of course, you can still upload *that* cookbook without promoting :p
[2013-08-07 09:17:05 -0400] jonlives: m4rcu5: we don't actually safeguard against the situation you described. we have our chef users pretty well trained, but mainly we focus on finding out when that happens as quickly as possible.
[2013-08-07 09:17:31 -0400] jonlives: we log failing chef runs with a gist to an irc channel, we broadcast uploads and promotes into irc and to graphite etc
[2013-08-07 09:19:09 -0400] m4rcu5: jonlives: thats what i would like to do aswell, and ive seen the etsy slides about it, but what is your procedure, just t get a feel how you do it
[2013-08-07 09:20:12 -0400] jonlives: m4rcu5: how do you mean procedure? the procedure for chef changes in general, or for identifying that problem?
[2013-08-07 09:21:14 -0400] zaargy: it sounds like that workflow works for you guys because you have your bases covered for when stuff goes wrong
[2013-08-07 09:21:18 -0400] m4rcu5: for the chef changes, for example the addition of a cookbook to a role
[2013-08-07 09:21:26 -0400] zaargy: which is probably a result of how the org grew when a lot of places do the reverse :)
[2013-08-07 09:22:27 -0400] jonlives: zaargy: true :)
[2013-08-07 09:23:07 -0400] jonlives: m4rcu5: ok, for adding a cookbook to a role, we find out that happens from the git commit. Currently, we have no way to expose that more widely, which is why I'm adding role commands into the next spork release :)
[2013-08-07 09:23:17 -0400] jonlives: that way we'll see *those* in IRC, graphite etc too.
[2013-08-07 09:25:35 -0400] m4rcu5: jonlives: so basicly you need to be extreemly carefull when messing with roles
[2013-08-07 09:26:14 -0400] m4rcu5: i am however thinking about using jenkins to upload to the integration/production server and automaticly setting the env version to 0.0.0 for each new cookbook
[2013-08-07 09:26:56 -0400] jonlives: m4rcu5: practically, we're not actually that careful, mainly because we have the stuff in place to find out quickly when stuff breaks. that said, it's something we've realised we don't have as much insight into as we'd like.
[2013-08-07 09:27:21 -0400] jonlives: m4rcu5: if you're already using jenkins for spork, that's a perfectly sensible idea.
[2013-08-07 09:28:37 -0400] m4rcu5: jonlives: jenkins to control spork? sounds like a nice solution, do you guys have any examples?
[2013-08-07 09:29:29 -0400] jonlives: m4rcu5: I think zaargy is usinf ci to control spork so may be more help, we don't actually do that. I was more saying it sounds like a good idea for what you're trying to do :)
[2013-08-07 09:30:06 -0400] zaargy: yep
[2013-08-07 09:31:21 -0400] zaargy: essentially when you commit, we have jenkins increment the version number, update the environment, and push that back to git
[2013-08-07 09:32:44 -0400] jonlives: git post commit hook?
[2013-08-07 09:33:02 -0400] zaargy: yeah from our reposiotry manager which is stash
[2013-08-07 09:33:14 -0400] jonlives: neat :)
[2013-08-07 09:33:37 -0400] zaargy: we have a script that reads all the cookbooks from stash and creates builds automagically too which is pretty cool
[2013-08-07 09:33:40 -0400] zaargy: via teh jenkins job dsl
[2013-08-07 09:33:42 -0400] jonlives: m4rcu5: it sounds like that could def be a good fit for your problem
[2013-08-07 09:35:21 -0400] m4rcu5: sounds like it, i did get some idears from out conversation which im goig to include in our workflow
[2013-08-07 09:35:40 -0400] jonlives: awesome :)
[2013-08-07 09:43:50 -0400] m4rcu5: jonlives: i do am a bit curious for the next version of spork :)
[2013-08-07 09:44:22 -0400] jonlives: m4rcu5: current list of stuff to be in it: https://github.com/jonlives/knife-spork/issues?milestone=1&state=open
[2013-08-07 09:51:17 -0400] alexbst: sadly my workflow is probably going to move away from spork in future
[2013-08-07 09:51:37 -0400] jonlives: booooo
[2013-08-07 09:53:06 -0400] jonlives: alexbst: how dare the workflow I decreed not work for you :p
[2013-08-07 09:53:18 -0400] jonlives: alexbst: whatcha looking to move to out of curiosity?
[2013-08-07 10:02:58 -0400] alexbst: jonlives - berkshelf and some sort of git-based environment setup.
[2013-08-07 10:04:10 -0400] jonlives: alexbst: if it helps, spork support berkshelf and git :p
[2013-08-07 10:08:41 -0400] alexbst: aye, but my devs feel it is a problem to have to look after so many cookbooks :-) they want the berkshelf style management of community cookbooks..
[2013-08-07 10:11:16 -0400] jonlives: alexbst: I get what you mean, I was just pointing out that you can still manage the promotion etc of berkshelf cookbooks with spork :)
[2013-08-07 10:11:27 -0400] jonlives: it works just as well as cookbooks in your normal repo
[2013-08-07 10:12:48 -0400] alexbst: the 'thing' is the berkshelf dependency management :-)
[2013-08-07 10:13:11 -0400] jonlives: aaaah
[2013-08-07 10:13:29 -0400] alexbst: we're trying to reduce the number of cookbooks we look after in git - instead of importing all the community cookbooks..
[2013-08-07 10:16:01 -0400] jonlives: right I'm with you
[2013-08-07 10:17:20 -0400] alexbst: we're looking at the repo-per-cookbook method atm.
[2013-08-07 10:17:21 -0400] gkarekinian: I'm doing the opposite, I'm using Librarian _and_ I've recently started versioning my cookbooks dir because it's so convenient to use git diff
[2013-08-07 10:18:28 -0400] Afterglow: we do pretty much the librarian thing but with berkshelf instead
[2013-08-07 10:18:36 -0400] alexbst: this is the big problem with opscode chef - they've provided many of the tools but none of the workflow direction ;)
[2013-08-07 10:19:01 -0400] gkarekinian: Also, <3 spork
[2013-08-07 10:19:20 -0400] alexbst: the most I we get out of them in calls is 'yeah, the current concensus seems to be X'
[2013-08-07 10:19:23 -0400] zaargy: repos per cookbook makes a lot of sense though. smaller unit of work, smaller risk, makes logical sense to have cookbook as a boundary for a commit
[2013-08-07 10:19:41 -0400] zaargy: so yeah i am liking it now
[2013-08-07 10:20:23 -0400] Afterglow: its nice, we use repo per cookbook and have jenkins bump the versions using thor-scmversion
[2013-08-07 10:20:37 -0400] alexbst: my issue with the repo-per-cookbook thing is that it hardly reflects the real nature of the API and how much a dev/engineer can do with knife directly.
[2013-08-07 10:20:46 -0400] m4rcu5: zaargy: but most cookbooks aint that biog, and having to create a single repo for each and very one of them in stash
[2013-08-07 10:21:25 -0400] zaargy: sure but we have automated that process so it's not a big deal
[2013-08-07 10:21:58 -0400] zaargy: we need to host all communiyt cookbooks locally and we have a one click process to import any etc
[2013-08-07 10:22:18 -0400] zaargy: and we create a wrapper for each community cookbook automatically
[2013-08-07 10:22:21 -0400] alexbst: you've all gone and created your own rube goldberg machines ;-)
[2013-08-07 10:22:26 -0400] gkarekinian: haha
[2013-08-07 10:22:28 -0400] zaargy: then we use those wrappers in our app cookbooks
[2013-08-07 10:22:47 -0400] jonlives: thing is, opscode have to be all things to all people, so they can't really recommend a workflow :p
[2013-08-07 10:22:53 -0400] m4rcu5: that really sounds like a goldberg machine yes :P
[2013-08-07 10:22:56 -0400] gkarekinian: and then it catches the mouse!
[2013-08-07 10:23:07 -0400] jonlives: since we've already got what, 4 workflows in the last 30 lines of scrollback? :p
[2013-08-07 10:23:26 -0400] gkarekinian: I think there's more workflows than users
[2013-08-07 10:23:38 -0400] gkarekinian: Our workflow is constantly changing
[2013-08-07 10:23:39 -0400] jonlives: haha possibly :D
[2013-08-07 10:23:59 -0400] Afterglow: workflow is very much each to their own, i've worked in 3 chef places in the last couple of years and they all had different workflows that all worked for them
[2013-08-07 10:24:13 -0400] jonlives: for beginners, the lack of workflow direction can be a bit daunting, it has to be said
[2013-08-07 10:24:31 -0400] jonlives: but I don't really see how opscode could endorse a particular workflow without pissing off everyone not using it ;p
[2013-08-07 10:24:41 -0400] alexbst: I'm metro-retro-sexual with a hint of kink and a side order of salad tossing. Don't judge me!
[2013-08-07 10:24:42 -0400] Afterglow: yeah if you know what you want its fine but if you just turned up an installed chef all the debate and different flows is very confusing
[2013-08-07 10:24:59 -0400] jonlives: right
[2013-08-07 10:24:59 -0400] zts: Repo per cookbook is nice if creating repo's is cheap, but it's a pain if that's an action with a large overhead.
[2013-08-07 10:25:41 -0400] jonlives: in our case we're still on one large repo.
[2013-08-07 10:25:56 -0400] zts: Afterglow: to be fair, I could say exactly the same thing about git and development workflows
[2013-08-07 10:26:08 -0400] jonlives: or any workflow for that matter :p
[2013-08-07 10:26:08 -0400] m4rcu5: alexbst: say whut 0_o
[2013-08-07 10:26:13 -0400] zaargy: thing is we are actually seeing little benefit of all the wrapping community cookbooks etc (which frankly are often not ideal for our use case etc)
[2013-08-07 10:26:15 -0400] zts: jonlives: totally :)
[2013-08-07 10:26:19 -0400] zaargy: so we have to jump through a lot of hoops
[2013-08-07 10:26:30 -0400] zaargy: have had a lot of success with the one big repo before
[2013-08-07 10:27:07 -0400] Afterglow: zts: yes you can say the same of almost anything :) just an observation it might be nice if there was a simple example on the website that people could use to work from (there might be to be fair I haven't checked)
[2013-08-07 10:27:26 -0400] m4rcu5: we got a system of branching and merging back into master before we enter integration and production
[2013-08-07 10:28:06 -0400] jonlives: zaargy: that's the same reason we don't use berkshelf / community cookbooks that much, mainly because it doesn't fit that well with the way we use cookbooks.
[2013-08-07 10:28:11 -0400] zts: Afterglow: yeah, that's fair - or even links to blog posts/presentations/whatever where people have described what they're doing
[2013-08-07 10:28:22 -0400] alexbst: one of the issues with the big mixed repo of community and custom cookbooks is that.. you can't tell the difference + engineers just start modifying the communty cookbooks without feeding back fixes or wrapping them :/
[2013-08-07 10:29:21 -0400] Afterglow: yeah we keep the community cookbooks locally but we use gh:enterprise so we just stick them in a different org to our own ones to make it clear
[2013-08-07 10:29:41 -0400] Afterglow: it also makes it easier for jenkins to treat them differently e.g. from a style enforcement perspective
[2013-08-07 10:29:42 -0400] zaargy: alexbst: well wwe have a naming convention
[2013-08-07 10:29:53 -0400] zaargy: and in jenkins you can see what is a wrapper and what is community easily
[2013-08-07 10:29:59 -0400] zaargy: a view for each group etc
[2013-08-07 10:30:07 -0400] jonlives: we're a bit weird according to current canon, we logically seperate app config into the cookbooks for the different apps, and use roles to bring it together.
[2013-08-07 10:30:12 -0400] zaargy: <orgname>-<community-cookbook>
[2013-08-07 10:31:35 -0400] jonlives: rephrase. that didn't make sense. we seperate configs into the cookbook for the relevant bit of the stack, ie mysql, apache, and use roles to bring the recipes together.
[2013-08-07 10:31:49 -0400] zaargy: so yeah we're doing all this work but at the same time we're kidding ourselves that we can just pull changes from community cookbook one day and all will bbbe fine etc
[2013-08-07 10:32:44 -0400] jonlives: haha yeah
[2013-08-07 10:53:15 -0400] Morphesus: Hi :)
[2013-08-07 10:53:32 -0400] Morphesus: Is there a way to print debug messages in chef?
[2013-08-07 10:54:00 -0400] alexbst: http://docs.opscode.com/resource_log.html
[2013-08-07 10:54:27 -0400] Morphesus: Nice, thanks :)
[2013-08-07 11:09:15 -0400] willejs: seems like i can't put a logical or operators in erb templates? like this <%= @params['DynamoPrefix'] || @params['EnvPrefix'] %>
[2013-08-07 11:17:25 -0400] rog: hello - using knife, or API call to chef server - is there anyway to determine if a node is in the middle of converging ?
[2013-08-07 11:17:47 -0400] rog: eg GET /node/NAME then check idletime_seconds or something
[2013-08-07 11:22:01 -0400] bcave: morning all.
[2013-08-07 11:22:39 -0400] bcave: have a question about how chef users maintain their chef configs, specifically relating to site cookbooks....
[2013-08-07 11:23:50 -0400] bcave: I have a chef config that consists of a number of site cookbooks (e.g. apt) as well as some home baked ones. If an existing site cookbook doesn't offer the functionality I need, then I update configuration through a recipe in 1 of my own cookbooks
[2013-08-07 11:24:08 -0400] bcave: the reason being is that I don't maintain the site cookbook....
[2013-08-07 11:24:59 -0400] bcave: e.g. I need a specific jar added to my jre/lib/security directory. I have a role that includes a java recipe and then also includes myrecipe::set_jars as part of the run list.
[2013-08-07 11:25:13 -0400] hughsaunders: chef-shell attribute inconsistency: https://gist.github.com/hughsaunders/3afb97e86e7d6ab1ebdd
[2013-08-07 11:25:34 -0400] bcave: was wondering how / what the best practise is in terms of modifying site cookbooks, and how other chef users do it? Just make the modifications directly in the site cookbooks?
[2013-08-07 11:27:17 -0400] hughsaunders: bcave: you can have a site specific wrapper cookbook that makes use of the upstream cookbook
[2013-08-07 11:45:29 -0400] bcave: ah, ok hughsaunders. so have a my_java cookbook that includes the java recipe. makes sense. if the config is minimal, then use a cookbook that makes lots of minor changes to stuff from other recipes
[2013-08-07 11:46:57 -0400] bcave: next question... :)  i have a cookbook with 2 recipes with some level of overlap, and I'm trying to reduce the redundancy. So I now have a "common" recipe, and then "recipe1" and "recipe2". I want to include_recipe. http://docs.opscode.com/essentials_cookbook_recipes.html
[2013-08-07 11:47:31 -0400] bcave: from there,  if 2 recipes are in the same cookbook, so I have to use the full ref to the common recipe? e.g. in recipe1: include_recipe "my_cookbook::common"
[2013-08-07 11:47:40 -0400] bcave: or is there a shorthand for that?
[2013-08-07 11:48:00 -0400] bcave: include_recipe "::common"
[2013-08-07 11:49:54 -0400] hughsaunders: http://docs.opscode.com/essentials_cookbook_recipes.html#include-recipes
[2013-08-07 11:50:08 -0400] hughsaunders: should be ok without the ::
[2013-08-07 11:50:41 -0400] bcave: i was thinking that include_recipe "common" would try include the "default" recipe from the "common" cookbook....
[2013-08-07 11:50:53 -0400] bcave: instead of "common" recipe from the current cookbook....
[2013-08-07 11:51:15 -0400] hughsaunders: sounds plausible.. would have to test it
[2013-08-07 11:53:37 -0400] bcave: thanks hugh
[2013-08-07 13:25:08 -0400] jacobwg: I'm getting the following error: FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2013-08-07 13:25:20 -0400] jacobwg: This is the stacktrace: http://pastebin.com/0bmvkHyH
[2013-08-07 13:25:28 -0400] jacobwg: This happens whenever I run chef-client...
[2013-08-07 13:25:35 -0400] jacobwg: Does anyone know why this might be happening?
[2013-08-07 13:27:28 -0400] aramus_: Hello, does anyone know where Chef::Log.info is printed out to?
[2013-08-07 13:28:55 -0400] hughsaunders: aramus_: chef-client output
[2013-08-07 13:29:17 -0400] atomic-penguin: aramus_, check /var/chef/client.log if you're running it non-interactively
[2013-08-07 13:30:11 -0400] aramus_: Hmm, thanks. For some reason, it's not printing to stdout/.
[2013-08-07 13:37:00 -0400] aramus_: Would anyone know why a simple Chef::Log.info is not printing to stdout when I run chef-client via command line?
[2013-08-07 14:37:45 -0400] castro1688: anyone have any experience overwriting templates using a wrapper cookbook?
[2013-08-07 14:38:05 -0400] castro1688: followed this example with no avail, http://red-badger.com/blog/2013/06/24/berkshelf-application-cookbooks/
[2013-08-07 14:38:24 -0400] wongt_: castro1688: it's fairly simple
[2013-08-07 14:39:12 -0400] castro1688: was that blog post on the right track or was that a over complication of it?
[2013-08-07 14:39:30 -0400] wongt_: In your wrapper cookbook you would redefine you template and add another template file in the wrapper cookbook
[2013-08-07 14:40:07 -0400] wongt_: what are you trying to accomplish
[2013-08-07 14:41:58 -0400] wongt_: I normally create a library cookbook with a template call and create wrapper cookbook. In the wrapper cookbook I copy the same template entries and have another template availabe which overrides it
[2013-08-07 14:42:33 -0400] wongt_: I am not very clear: but check this out http://devopsanywhere.blogspot.ca/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-08-07 14:42:39 -0400] castro1688: so we've got a standard splunk cookbook. to prevent modifications of the original cookbook and add our custom configs, we have splunk-wrapper. we want everything to run through splunk, but override the templates with what we defined in splunk-wrapper
[2013-08-07 14:43:13 -0400] wongt_: check the Gangnam Style Cookbook Pattern picture
[2013-08-07 14:45:01 -0400] castro1688: just took a look. so using the edit template, that means each chef run it would keep rewriting it?
[2013-08-07 14:45:15 -0400] wongt_: What I do is include the splunk cookbook, include_recipe "splunk" (let's say in the default recipe). After I would add a template entry for you config file (template "..." ...) and call the wrapper cookbook template
[2013-08-07 14:45:53 -0400] wongt_: well now I reuse the teplate ressource once again to override the previouse template call in the splunk cookbook
[2013-08-07 14:46:42 -0400] wongt_: does it make any sense?
[2013-08-07 14:47:16 -0400] castro1688: I think so. I'm gonna test it out. thanks!
[2013-08-07 14:48:32 -0400] wongt_: but if possible try to use attributes or databag. in your wrapper cookbook you would only modify what is necessary to change instead of have a totaly different template
[2013-08-07 14:51:42 -0400] Signum_: Could someone please clear up my confusion. In the web interface I see different node attribute values under "Nodes" when I click on "Show" or "Edit". How come? Is "Edit" showing the default attributes that are overriden by the attributes I see in "Show"? I'm a bit confused.
[2013-08-07 15:02:50 -0400] castro1688: wongt_ so using template worked great. I guess my thought was using another template call would cause it to flip flop every chef run. so my other question is what is the fundimental difference between this method http://red-badger.com/blog/2013/06/24/berkshelf-application-cookbooks/ and using plain template?
[2013-08-07 15:03:34 -0400] mathewpeterson: Is it possible to use include_recipe inside a begin/rescue block?
[2013-08-07 15:07:57 -0400] wongt_: If I understand well, it is basically doing the samething, with an exception of validating that the template exists or else it skips the instructions
[2013-08-07 15:12:07 -0400] wongt_: I think you may do the samething using ignore_failure true with the template
[2013-08-07 15:14:02 -0400] wongt_: something like this: include_recipe 'nginx'
[2013-08-07 15:14:02 -0400] wongt_: node.override['nginx']['gzip'] = "off"
[2013-08-07 15:14:02 -0400] wongt_: template "#{node['nginx']['dir']}//sites-available/default" do source "default-site.erb" ignore_failre true
[2013-08-07 15:14:05 -0400] wongt_: end
[2013-08-07 15:14:59 -0400] wongt_: But my example does not throug and exception description
[2013-08-07 15:15:22 -0400] wongt_: it would just ignore and continue to the next instructions if it fails
[2013-08-07 15:16:34 -0400] castro1688: wongt_ so i recant my earlier statement.. it looks like it is updating the template in splunk, and then updating again in splunk-wrapper.. so it keeps updating every run which the splunk cookbook causes a service restart.. is that normal for overriding a template?
[2013-08-07 15:19:47 -0400] wongt_: in the example you provided from http://red-badger.com/blog/2013/06/24/berkshelf-application-cookbooks/?
[2013-08-07 15:23:41 -0400] castro1688: no. using template resource
[2013-08-07 15:28:27 -0400] bcave: woah... strange error i just ran into. I refactored a recipe, and now when I rerun it, a gem_package resource fails: No such file or directory - /usr/local/bin/gem env gempath
[2013-08-07 15:28:39 -0400] bcave: but my gem binary is on /usr/bin/gem, not in local
[2013-08-07 15:48:16 -0400] murphy_slaw: getting this error when trying to run 'knife exec': /usr/lib64/ruby/gems/1.9.1/gems/chef-11.4.4/lib/chef/shell/ext.rb:294:in `node': undefined method `session' for Shell:Module (NoMethodError)
[2013-08-07 15:56:44 -0400] jtimberman: jonlives: very astute about us and workflow ;)
[2013-08-07 15:57:36 -0400] jonlives: jtimberman: workflowhugs :p
[2013-08-07 16:04:00 -0400] adamjk-dev: jtimberman: hey, I had some questions about the jenkins cookbook if you had a minute
[2013-08-07 16:04:28 -0400] adamjk-dev: jtimberman: I was looking it over and writing some integration tests for it (test kitchen and minitest)
[2013-08-07 16:10:10 -0400] mathewpeterson: If you use "include_recipe" inside another recipe, does Chef include the attributes for that cookbook?
[2013-08-07 16:20:08 -0400] statix_: Is there a good way to disable say one cookbook that's in a role, for one node?
[2013-08-07 16:22:39 -0400] maruq: statix_: if you're doing it from a cookbook, you could just not include_recipe based on some attribute
[2013-08-07 16:23:44 -0400] statix_: I figured you'd have to do it within the cookbook/recipe. Was hoping there was some way to do a sort of runlist "modification"
[2013-08-07 16:24:00 -0400] maruq: statix_: er, from inside a recipe
[2013-08-07 16:24:39 -0400] jtimberman: adamjk-dev: i don't know much about the jenkins cookbook other than "it can install jenkins" as that's all i've used it for.
[2013-08-07 16:25:24 -0400] maruq: statix_: you could probably grab the run_list from node, Array#delete what you don't want & then save the node attributes?
[2013-08-07 16:26:01 -0400] maruq: statix_: I'm not sure that's the best practice though, or if it would take effect before other things converge
[2013-08-07 16:32:22 -0400] jbz: Could anyone familiar with knife-block tell me why, if I'm using rvm and have installed knife block, knife can't find the plugin?
[2013-08-07 16:32:29 -0400] jbz: (installed using the gem)
[2013-08-07 16:41:26 -0400] adamjk-dev: jtimberman: ah okay, I was thinking of adding some tests to it... but the current jenkins_test cookbook embedded in the jenkins cookbook does weird things
[2013-08-07 16:41:58 -0400] adamjk-dev: jtimberman: it doesn't really use minitest or anything
[2013-08-07 16:47:13 -0400] lewiz: What's the best way to change permissions on files not handled by Chef?  I want to unset executable bit on a bunch of files.  I could just chmod a-x /dir/* in an execute but this doesn't seem very Chefy.
[2013-08-07 16:50:12 -0400] barefoot: lewiz: do the perms keep getting reset? is chef resetting them currently?
[2013-08-07 16:51:05 -0400] lewiz: barefoot: the perms wouldn't get reset.  chef is not currently doing anything with the dir
[2013-08-07 16:51:47 -0400] barefoot: if its a one time thing just manually do it since you dont want chef to manage it?
[2013-08-07 16:52:14 -0400] lewiz: barefoot: manual isn't an option as it needs to be done for many servers and for future servers
[2013-08-07 16:52:52 -0400] lewiz: barefoot: It's to update /etc/update-motd.d on Ubuntu to replace it with a static motd.  I think I can get away with a remote_directory and purge true to remove existing files and install my own.  Other option was to install my own and set the others -x.  I don't really care about the stock ones so this is fine
[2013-08-07 16:53:29 -0400] bean: lewiz: one sec, I have a "motd" cookbook that we use internally
[2013-08-07 16:53:34 -0400] bean: i can check how we do that if you want.
[2013-08-07 16:54:25 -0400] lewiz: bean: yeah, that would be handy, thanks.  That's what this one is :)
[2013-08-07 16:54:37 -0400] bean: ah, looks like we just slam stuff stuff in /etc/motd.tail
[2013-08-07 16:54:38 -0400] lewiz: bean: tbh I didn't think to check for community recipes that do this
[2013-08-07 16:54:43 -0400] bean: yep
[2013-08-07 16:54:44 -0400] bean: motd-tail
[2013-08-07 16:54:50 -0400] bean: i think
[2013-08-07 16:54:59 -0400] lewiz: bean: fair enough.  I've got it going with remote_directory now.  I don't want the ubuntu crap, it's too verbose
[2013-08-07 16:55:05 -0400] bean: eh
[2013-08-07 16:55:08 -0400] bean: its not so bad
[2013-08-07 16:55:11 -0400] bean: gives a good overview
[2013-08-07 16:59:13 -0400] stormerider: it's grown on me
[2013-08-07 17:19:44 -0400] theCzar: OK, looks like it's working for me
[2013-08-07 17:28:44 -0400] eherot: miah: question about your logstash cookbook
[2013-08-07 17:29:05 -0400] eherot: miah: how do you associate more than one filter with a single input (like in the example on http://cookbook.logstash.net/recipes/central-syslog/)
[2013-08-07 17:29:38 -0400] bakins: no really a chef issue, but http://curl.haxx.se/ca/cacert.pem seems to have changed checksums and lots of omnibus stuff no longer works. comment in the new pen file still claims its from december
[2013-08-07 17:29:42 -0400] gchristensen: does an LWRP have access to node data?
[2013-08-07 17:29:59 -0400] jhulten: Does chef-client provide different exit codes depending on how it fails?
[2013-08-07 17:30:45 -0400] jhulten: gchristensen: It does, but be careful about hiding too much.
[2013-08-07 17:31:25 -0400] gchristensen: jhulten: valid point, I'll just pass in my attribute.
[2013-08-07 17:33:16 -0400] jhulten: You could use a default value from an attribute, but give yourself the chance to change it. Like choosing the provider for the Package resource...
[2013-08-07 17:33:31 -0400] gchristensen: yeah
[2013-08-07 17:37:07 -0400] volker-: usualy an attribute has the style "node['cookbookname']['attributename'].  Is it a good style to use 'node['myownattribute_not_bound_to_a_cookbook']'?
[2013-08-07 17:38:58 -0400] volker-: I know that there are data bags, but I find the use of a databag for a simple syslog-path variable a little bit overhead.
[2013-08-07 17:39:23 -0400] theCzar: can I create and use an encrypted data bag without Knife?
[2013-08-07 17:39:36 -0400] cpuguy83: volker-: It's always going to be better to have that nested in something
[2013-08-07 17:39:57 -0400] volker-: cpuguy83: why?
[2013-08-07 17:40:00 -0400] cpuguy83: volker-: even something like node['do_not_touch_my_configs']['syslog_path']
[2013-08-07 17:40:24 -0400] cpuguy83: volker-: (helps) Ensures stuff doesn't get overwritten by something else.
[2013-08-07 17:41:40 -0400] volker-: cpuguy83: yeah, but node['my_syslog_path'] = 'foo' shouldn't be overwritten by anything. I mean if have to take care about any overwrite anyway, don't I?
[2013-08-07 17:42:33 -0400] cpuguy83: volker-: I would do node['syslog']['my_path']
[2013-08-07 17:43:21 -0400] volker-: cpuguy83: I always try to avoid loading foreign cookbook attributes, this makes a cookbook less independet.
[2013-08-07 17:43:39 -0400] volker-: cpuguy83: e.g. when I will tell apache where to store the logfiles
[2013-08-07 17:44:56 -0400] cpuguy83: volker-: You could also do something like node['local_configs']['syslog_path'], or even node['local_configs']['syslog']['path']
[2013-08-07 17:45:17 -0400] cpuguy83: It's just a good way to group stuff together that should be grouped together, and keep items which are not related in separate areas
[2013-08-07 17:45:23 -0400] volker-: true
[2013-08-07 17:45:33 -0400] volker-: and what is common practise? throwing everything in a data bag?
[2013-08-07 17:45:59 -0400] cpuguy83: My personal belief is to not use a databag at all costs
[2013-08-07 17:46:18 -0400] volker-: cpuguy83: not even using databags for users?
[2013-08-07 17:46:27 -0400] cpuguy83: If I need something in encrypted I'll put it in an encrypted databag, but I try to keep everything in attributes
[2013-08-07 17:46:56 -0400] volker-: cpuguy83: how do you manage then users with their ssh key or specific files?
[2013-08-07 17:47:02 -0400] cpuguy83: volker-: For me, personally, yep.  I have a users cookbook with the shadow user's shadow passwords, public ssh keys, etc.
[2013-08-07 17:47:03 -0400] paulmooring: volker-: out of curiosity why do you want to make your cookbooks less independent?
[2013-08-07 17:48:00 -0400] volker-: paulmooring: more modularity. And I get frustrated when I do a knife cookbook download of f.e. apache and get then 500 other cookbooks which are dependencies
[2013-08-07 17:48:45 -0400] volker-: paulmooring: let's say I use today rsyslog and tomorrow ng-of-yet-another-better-syslogd
[2013-08-07 17:48:49 -0400] cpuguy83: For users I debated doing databags, just because it is truly global data, but including the user cookbook in my _common_system cookbook essentially makes it global as well.
[2013-08-07 17:48:55 -0400] cpuguy83: And versioned.
[2013-08-07 17:49:02 -0400] gchristensen: coderanger: is there a way to determine if a cookbook is frozen in the webui's?
[2013-08-07 17:52:33 -0400] Kzim: Hi, there is only the encrypted data bag to store password right ? and node can no edit one wihout admin right ?
[2013-08-07 17:54:54 -0400] mattupstate: Kzim: a node should not edit a data bag
[2013-08-07 17:56:05 -0400] mattupstate: you have to have the secret or secret file to create an encrypted data bag and make any edits to an encrypted data bag
[2013-08-07 17:59:04 -0400] Kzim: mattupstate, i have to have the secret file to read them also so i have it. my probleme is that i want want to generate the password and store them manualy
[2013-08-07 17:59:42 -0400] bcave: how many knife ec2 users are there here?
[2013-08-07 18:00:23 -0400] mose: maybe they all sleep
[2013-08-07 18:00:28 -0400] bcave: lol
[2013-08-07 18:00:36 -0400] bcave: possibly
[2013-08-07 18:00:55 -0400] mose: I have a knife ec2 in a project I just inherited, but I don't really count I guess (yet)
[2013-08-07 18:01:05 -0400] mattupstate: Kzim: i'm not seeing a problem with generating a password and storing it in an encrypted data bag manually
[2013-08-07 18:01:20 -0400] bcave: i was thinking of a feature request for the plugin, just wondering what other users thought of the idea...
[2013-08-07 18:01:56 -0400] mose: couldn't help, noteven sure by what end hold that knife
[2013-08-07 18:01:56 -0400] miah: eherot: hrm. unsure. feel free to PM me, my current config generator might not work with that pattern. but it could be changed.
[2013-08-07 18:02:07 -0400] bcave: so currently it bootstraps chef onto the instance via SSH...  but it could just as easily bootstrap chef by sending the resolved bootstrap template to the instance via userdata....
[2013-08-07 18:02:21 -0400] bcave: that way, you can provision instances without needing SSH access
[2013-08-07 18:02:27 -0400] jmickle: is there a opscode ticket review today?
[2013-08-07 18:02:32 -0400] jmickle: hey miah how are you
[2013-08-07 18:02:51 -0400] bcave: worth a feature request?
[2013-08-07 18:04:29 -0400] mose: bcave: no idea, but it costs nothing to ask anyways
[2013-08-07 18:04:33 -0400] miah: jmickle: good, tired =)
[2013-08-07 18:05:04 -0400] jmickle: miah: ah sorry! Thanks for all the help with the librato changes btw! Super excited to see that get merged in
[2013-08-07 18:05:29 -0400] Kzim: mattupstate, well it's a manual operation :(
[2013-08-07 18:07:18 -0400] mattupstate: Kzim: you'll have to manage a JSON file
[2013-08-07 18:07:44 -0400] mattupstate: and use `knife data bag from file path/to/file.json secret thesecret`
[2013-08-07 18:08:21 -0400] mattupstate: i forgot some arguments in there
[2013-08-07 18:10:09 -0400] basic`: how do i unfreeze all of my cookbooks?
[2013-08-07 18:10:39 -0400] basic`: do i just upload --all --force ?
[2013-08-07 18:20:14 -0400] jbz: Does anyone know when chef-server 11.0.10 is due? Or, failing that, if there's a way to get a version which has http://tickets.opscode.com/browse/CHEF-3975 fixed?
[2013-08-07 18:28:21 -0400] tek0: I'm trying to use `knife openstack server create` with a debian sid image. is there a way to specify a custom url to the bootstrap script so I can override the debian package parameters, as downloading it fails with 404? or is there an even easier way?
[2013-08-07 18:32:15 -0400] basic`: anyone familiar with knife spork around?
[2013-08-07 18:32:26 -0400] basic`: i'm having trouble figuring out how to make the workflow work is it possible not to freeze every time?
[2013-08-07 18:32:37 -0400] adamjk-dev: anyone have examples of a multi-box configuration with Test Kitchen?
[2013-08-07 18:32:54 -0400] adamjk-dev: meaning, like in Vagrant how you can define multiple boxes
[2013-08-07 18:33:03 -0400] basic`: it seems like i want to bump, promote dev to new bumped version upload the new bumped version a few times while testing, and then spork upload, promote production, and repeat?
[2013-08-07 18:37:14 -0400] jhulten: basic`: It is possible, but you may get greater traction out of using vagrant and the chef-zero plugin. Let you stop uploading to an external server...
[2013-08-07 18:37:30 -0400] basic`: chef-zero eh
[2013-08-07 18:37:36 -0400] basic`: that's probably what i want
[2013-08-07 18:37:50 -0400] jhulten: https://github.com/andrewgross/vagrant-chef-zero
[2013-08-07 18:38:06 -0400] aramus_: Hllo, is there a knife command that blows all attributes to their default settings?
[2013-08-07 18:38:12 -0400] jhulten: Creates a chefzero instance on one box and your target on another.
[2013-08-07 18:38:18 -0400] aramus_: Hello*, values*
[2013-08-07 18:39:11 -0400] basic`: hmm
[2013-08-07 18:39:39 -0400] basic`: i think i'm like 70% through having a working knife spork workflow i think i'll stick with that
[2013-08-07 18:40:07 -0400] adamjk-dev: hrm... anyone use kitchen platforms and suites to define a client/server model?
[2013-08-07 18:40:14 -0400] adamjk-dev: I want a jenkins master and a jenkins slave
[2013-08-07 18:40:21 -0400] adamjk-dev: defined in my kitchen.yml
[2013-08-07 18:41:41 -0400] jbz: adamjk-dev - I'm using Short Order Cook, that has a vagrantfile that defines both a server and a client if that helps
[2013-08-07 18:42:15 -0400] jbz: Oh, but not with test kitchen, derp.
[2013-08-07 18:42:20 -0400] adamjk-dev: jbz: Yeah, I know how to define it all in a Vagrantfile, just was trying to mirror that in a kithen.yml
[2013-08-07 18:42:27 -0400] adamjk-dev: jbz: hehe, exactly
[2013-08-07 18:44:38 -0400] adamjk-dev: but I wasn't sure how to make kitchen build me two machines where the second is aware of the first machine's IP
[2013-08-07 18:44:52 -0400] jbz: yeah, um.
[2013-08-07 18:49:57 -0400] rayrod2030: What's the best hadoop cookbook out there?  opscode?  riotgames cloudera cookbook?
[2013-08-07 18:50:31 -0400] alexbst: hi jbz and rayrod2030 :-)
[2013-08-07 18:50:35 -0400] Kzim: mattupstate, k i' ll do that thanks
[2013-08-07 18:50:55 -0400] rayrod2030: sup :)
[2013-08-07 18:50:58 -0400] jbz: sup alexbst
[2013-08-07 18:51:14 -0400] miah: jmickle: thank you =)
[2013-08-07 18:51:24 -0400] miah: jmickle: for pushing that code.
[2013-08-07 18:53:05 -0400] aramus_: Hello, is there a knife command that blows all attributes to their default values?
[2013-08-07 18:54:36 -0400] d```: aramus_: the values are recomputed each convergence
[2013-08-07 18:54:53 -0400] adamjk-dev: jbz: yeah I am a bit confused at the moment.... I want to bring up a jenkins server (jenkins::server), then bring up a slave tied to that server (jenkins::node_jnlp) and have the node be server aware
[2013-08-07 18:55:05 -0400] aramus_: Well, let's say I over-ride an attribute in a recipe using node.normal[:attribute].
[2013-08-07 18:55:39 -0400] aramus_: d```: When I bring the node back to a previous snapshot, the nomal attribute remainds
[2013-08-07 18:57:33 -0400] d```: aramus_: maybe this will help: http://docs.opscode.com/essentials_cookbook_attribute_files.html#attribute-precedence
[2013-08-07 18:58:14 -0400] jbz: Guh.  Why would knife data bag show work but knife cookbook upload tell me it can't find nodename/servname.  SIgh.
[2013-08-07 18:58:52 -0400] aramus_: d```: thanks, I've read that and I know that th attribute's value is still stored on the chef server. I just want to know if there's a command to reset these attributes back to their default values.
[2013-08-07 18:59:22 -0400] d```: if you http://docs.opscode.com/essentials_nodes_chef_run.html
[2013-08-07 18:59:36 -0400] d```: aramus_: each chef run, the attributes are reset
[2013-08-07 18:59:41 -0400] d```: so if you roll back a snapshot
[2013-08-07 18:59:55 -0400] d```: the attributes will be reset on the next chef run
[2013-08-07 19:01:07 -0400] btm: @opscode #opschef code review returns, join: https://plus.google.com/hangouts/_/1e36b841ad330b90ca5ed5b5c718fb0bf40fb1b0, watch: http://youtu.be/UwgNK9OlYiE
[2013-08-07 19:01:13 -0400] aramus_: d```, pretty sure normal attributes persist throughout multiple chef runs http://docs.opscode.com/essentials_cookbook_attribute_files.html#attribute-types
[2013-08-07 19:01:56 -0400] d```: aramus_: oh, now I see.
[2013-08-07 19:02:08 -0400] aramus_: since they persist, i want to see if there's a way to just blast it all the normal attributes back to the default attributes in the cookbooks :(
[2013-08-07 19:02:28 -0400] basic`: http://comments.gmane.org/gmane.comp.sysutils.chef.user/11598
[2013-08-07 19:02:33 -0400] basic`: that basically describes what i want to do
[2013-08-07 19:02:49 -0400] basic`: but how do they keep staging versions from being frozen? knife spork upload has no option that i can see that will prevent a freeze
[2013-08-07 19:04:57 -0400] jbz: Has anyone run into a situation where knife data bag works fine for creation/reading but knife cookbook upload fails with: "/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)" - even when I specify the server URL?
[2013-08-07 19:07:45 -0400] stevefink: hmm, I see a ton of information on knife, but not where to download it :-)
[2013-08-07 19:07:46 -0400] rayrod2030: jbz: what version of knife?  11.6.0?
[2013-08-07 19:08:13 -0400] rayrod2030: stevefink: install the chef gem and you'll get knife.
[2013-08-07 19:08:23 -0400] stevefink: ah it's part of the actual chef gem, thanks
[2013-08-07 19:10:04 -0400] jbz: rayrod2030: Got it, I had to put the chef server into my etc/hosts
[2013-08-07 19:10:15 -0400] rayrod2030: woot
[2013-08-07 19:10:28 -0400] jbz: weird that you don't for the data bag module, but you do for the cookbook module
[2013-08-07 19:10:32 -0400] jbz: guh.
[2013-08-07 19:11:28 -0400] konopka: is it possible to override a template attribute that's set in one recipe from another? i'm not seeing a public method exposed for "force_unlink" on the template class like "cookbook" is.
[2013-08-07 19:12:37 -0400] miah: konopka: update your version of chef.
[2013-08-07 19:13:07 -0400] konopka: miah: easier said then done :)
[2013-08-07 19:13:47 -0400] miah: if only you were using some sort of automated configuration management system that allowed you to update/manage software on servers.. oh wait.
[2013-08-07 19:14:15 -0400] konopka: haha fair enough
[2013-08-07 19:14:37 -0400] coldboot|laptop: Is there a way to test out Chef's "search" function in isolation in a Ruby script?
[2013-08-07 19:16:49 -0400] basic`: how do i install knife gems so that they aren't wiped out every time i upgrade my chef install?
[2013-08-07 19:16:57 -0400] basic`: (on osx, if that matters)
[2013-08-07 19:17:57 -0400] jmickle: miah: my pleasure, i hope it works out
[2013-08-07 19:18:36 -0400] miah: jmickle: indeed. please keep up the awesome =)
[2013-08-07 19:20:05 -0400] jmickle: miah: ha thanks :-)
[2013-08-07 19:24:18 -0400] dgarstang: Can't decide where to put load balancer config... what's 'better', data bags or attributes in general?
[2013-08-07 19:25:19 -0400] jmickle: dgarstang what you trying to do?
[2013-08-07 19:25:21 -0400] bjensen82: Hi guys. How can I set the chef run list in vagrant to use a role instead of a specific recipe?
[2013-08-07 19:26:33 -0400] dgarstang: jmickle: I suppose it's a general question. if your seperating the data from the recipe, in this case putting hapoxy lb's somewhere outside the code, what's better? data bags or attributes?
[2013-08-07 19:30:02 -0400] dgarstang: no idea eh
[2013-08-07 19:30:16 -0400] jhulten: bjensen82: chef.add_role "web"
[2013-08-07 19:30:21 -0400] jmickle: dgarstang: it generally depends on you
[2013-08-07 19:30:23 -0400] bjensen82: Thanks
[2013-08-07 19:30:32 -0400] jmickle: dgarstang: i personally use attributes because data bags annoy me
[2013-08-07 19:31:07 -0400] jmickle: dgarstang: but if its something you need to keep secure data bags are a great way to go, generally with load balancers i don't have anything that needs to be hidden
[2013-08-07 19:31:33 -0400] coldboot|laptop: Where is the documentation for the objects returned by the Chef Knife "search" function?
[2013-08-07 19:31:56 -0400] jmickle: dgarstang: but i also run all dynamic load balancers, 90% of my config for haproxy is generated on the fly during a chef run
[2013-08-07 19:32:17 -0400] dgarstang: jmickle: and the lb's come from attributes?
[2013-08-07 19:32:39 -0400] jmickle: dgarstang: in my setup yes, idk that its the "right" way but it works
[2013-08-07 19:32:48 -0400] dgarstang: jmickle: sounds good.
[2013-08-07 19:32:54 -0400] miah: 'the right way' is often subjective
[2013-08-07 19:33:10 -0400] jmickle: hehe
[2013-08-07 19:33:17 -0400] dgarstang: miah: best practice is good to know, and with chef that's often not ... known
[2013-08-07 19:33:32 -0400] jmickle: dgarstang: the best advise is keep it simple, don't get complicated and think about managing it at 2am :-P
[2013-08-07 19:33:54 -0400] dgarstang: like... is there a doc somewhere that says this? ie if you want encryption use data bags, else attributes. That would be a best practice that should be documented somewhere.
[2013-08-07 19:33:59 -0400] jmickle: it doesn't matter how well your recipe runs every day between the hours of 8 and 6
[2013-08-07 19:34:08 -0400] jmickle: what matters is how well it runs on fri night at 2-3 am
[2013-08-07 19:34:15 -0400] jmickle: hehe
[2013-08-07 19:34:39 -0400] dgarstang: jmickle: that's right, cuz no matter how often you say 'no deploys on a Friday', it always happens
[2013-08-07 19:34:45 -0400] jmickle: exactly
[2013-08-07 19:34:55 -0400] dgarstang: :-\
[2013-08-07 19:35:13 -0400] jmickle: so like i said just keep it simple, understand it and weigh out the pros and cons of each one in accordance to your infrastructure
[2013-08-07 19:35:21 -0400] jmickle: like miah said the right way is subjective
[2013-08-07 19:35:38 -0400] dgarstang: still would like to see best practices stuff documented. Puppet does it.
[2013-08-07 19:36:01 -0400] jmickle: well puppet also makes a lot of assumptions right
[2013-08-07 19:36:15 -0400] jmickle: if you assume the whole world is going to be a PHP + apache + mysql infrastructure
[2013-08-07 19:36:21 -0400] miah: jmickle: fwiw. pretty sure dgarstang is ignoring me =)
[2013-08-07 19:36:25 -0400] dgarstang: jmickle: That's not true.
[2013-08-07 19:36:30 -0400] jmickle: its easy to assume things like "Auto scaling" are in the finger tips of everyone
[2013-08-07 19:37:01 -0400] dgarstang: miah: I said I wanted to see best practices documented somewhere in response to you saying was subjective. :)
[2013-08-07 19:37:05 -0400] jmickle: miah: hehehehehe why would whthat be? :-P
[2013-08-07 19:37:49 -0400] jmickle: either way dgarstang definitely best practice theories are always entertaining to read. Maybe we can all come forth and help form a collection of some soon :-)
[2013-08-07 19:38:01 -0400] dgarstang: jmickle: Well that'd be nice
[2013-08-07 19:38:08 -0400] jmickle: instead of best practices more of a "this is how i do it"
[2013-08-07 19:38:25 -0400] dgarstang: jmickle: Sure
[2013-08-07 19:38:45 -0400] jmickle: submit a ticket to opscode see if they will organize something
[2013-08-07 19:39:03 -0400] jmickle: we can all tie in miah is one of the best people I know when it comes to answers
[2013-08-07 19:39:07 -0400] d```: jmickle: reading through foodcritic rules seems like a good place to start
[2013-08-07 19:39:49 -0400] jmickle: d```: :-)
[2013-08-07 19:39:55 -0400] dgarstang: d```: I think that's more of a style guide (which puppet also has)
[2013-08-07 19:40:33 -0400] coldboot|laptop: How can I get a "Node" object in chef-shell? (I want to test out a search() invocation where it uses "node.name")
[2013-08-07 19:40:34 -0400] jmickle: dgarstang: sounds like you are more favorable/familiar with puppet? Why use chef?
[2013-08-07 19:41:19 -0400] dgarstang: jmickle: cuz I got sick and tired of spending 90% of my puppet time trying to manage relationship ordering. Every time you asked about it in #puppet, the response was 'makes sense to me!'
[2013-08-07 19:41:37 -0400] jmickle: "makes sense to me!" :-P
[2013-08-07 19:41:44 -0400] dgarstang: jmickle: yeah, sorry... i'm not so good at managing a giant directed graph in my head.
[2013-08-07 19:41:55 -0400] dgarstang: *squinty eye*
[2013-08-07 19:42:28 -0400] jmickle: dgarstang: like i said sometimes its about just keeping things simple, I've met hundreds of admins all who want to complicate the world but there is no logical reason why
[2013-08-07 19:42:48 -0400] jmickle: if you follow your knowledge and understanding generally you will be fine
[2013-08-07 19:42:50 -0400] dgarstang: jmickle: it's never simple though.
[2013-08-07 19:43:01 -0400] jmickle: well if it was simple we wouldn't have jobs :-)
[2013-08-07 19:43:08 -0400] dgarstang: suppose
[2013-08-07 19:43:40 -0400] jmickle: idle around the chat, listen to what some of the sr folks like miah and code ranger have to say as well as jtimberman
[2013-08-07 19:43:54 -0400] jmickle: you will learn more then you ever wanted to know in a day or two
[2013-08-07 19:44:22 -0400] dgarstang: jmickle: right way is subjective.... isn't particularly ...objective.
[2013-08-07 19:44:34 -0400] jmickle: but it is truth
[2013-08-07 19:45:06 -0400] jmickle: i can tell you truth through experience
[2013-08-07 19:45:31 -0400] jmickle: i once worked for this very large website and everyone had the "right way" to do things
[2013-08-07 19:45:41 -0400] jmickle: we scaled to 100 million users the "right way"
[2013-08-07 19:45:48 -0400] jmickle: 200 mill " the right way"
[2013-08-07 19:46:10 -0400] miah: i've worked for lots of companies that claim to do things 'the right way' but ultimately i left them because they were doing it 'the wrong way'
[2013-08-07 19:46:13 -0400] jmickle: and finally at 300 mil "the right way" we realized it was subjective that the right way was really non existant
[2013-08-07 19:46:41 -0400] jmickle: and we realized that after blowing millions a month on infrastructure that we could come up with a "non right way" that would cut our costs in half and scale us to 400+ million users
[2013-08-07 19:46:56 -0400] miah: mostly, to me. the right way involved automating as much as you can, tieing that in with integration testing, and writing good monitoring systems (that essentially do continuous integration testing)
[2013-08-07 19:46:57 -0400] jmickle: so that became the "right way for us"
[2013-08-07 19:47:46 -0400] jmickle: miah i agree :-)
[2013-08-07 19:48:05 -0400] jmickle: dgarstang: so thats why there is truth in that statement, sometimes the right way for me is not the right way for you
[2013-08-07 19:48:27 -0400] jmickle: dgarstang: instead listen to all the "right ways" and shape yours according :-)
[2013-08-07 19:48:33 -0400] zed_e_drive: o/
[2013-08-07 19:48:47 -0400] jmickle: hiyoo zed_e_drive
[2013-08-07 19:49:02 -0400] zed_e_drive: got a small issue if anyone can help out, debian doesnt seem to be following what i tell it, having an issue uploading a cookbook even when i specify the path
[2013-08-07 19:49:26 -0400] jmickle: zed ask away
[2013-08-07 19:49:58 -0400] zed_e_drive: so i am in ~/chef-org/
[2013-08-07 19:50:07 -0400] coldboot|laptop: Does anyone know why this query doesn't work: `knife search 'NOT role:SomeRole AND name:SomeName'`?
[2013-08-07 19:50:16 -0400] zed_e_drive: i have made whatever changes i needed to said cookbook
[2013-08-07 19:50:36 -0400] zed_e_drive: knife cookbook upload -o . nginx yields cannot find cookbook in path
[2013-08-07 19:50:38 -0400] jmickle: coldboot|laptop: what are you searching for you need to add a search "node, environment"
[2013-08-07 19:50:52 -0400] zed_e_drive: knife cookbook upload nginx from the parent dir, also cannot find the path
[2013-08-07 19:51:08 -0400] miah: set your cookbook_path in your knife.rb
[2013-08-07 19:51:22 -0400] zed_e_drive: so thats my other question
[2013-08-07 19:51:28 -0400] zed_e_drive: can i simply set the parent dir to be current_dir
[2013-08-07 19:51:32 -0400] zed_e_drive: in the parent dir
[2013-08-07 19:51:41 -0400] zed_e_drive: this is unfortunately not my environment, so this stuff wasnt in git
[2013-08-07 19:51:47 -0400] zed_e_drive: so its a dirty way to do all this
[2013-08-07 19:51:59 -0400] coldboot|laptop: jmickle: No, it doesn't work because you have the "NOT" component at the beginning of the query, instead of at the end.
[2013-08-07 19:52:22 -0400] bjensen82: I get the error: "The chef binary (either `chef-solo` or `chef-client`) was not found on the VM". Im using a clean image of ubuntu 12.04 with Vagrant where I have setup chef-solo as provisioner. I havent installed Chef on the clean image..Do I instruct vagrant to do that?
[2013-08-07 19:52:40 -0400] coldboot|laptop: Does anyone know why this query doesn't work: `knife search 'NOT role:SomeRole AND name:SomeName'`, but this works fine: `knife search 'name:SomeName AND NOT role:SomeRole'`?
[2013-08-07 19:53:04 -0400] miah: coldboot|laptop: go read about Lucene search syntax
[2013-08-07 19:53:55 -0400] jmickle: coldboot|laptop: http://docs.opscode.com/knife_search.html
[2013-08-07 19:57:53 -0400] Sauraus: What's the COOK hangout
[2013-08-07 19:57:54 -0400] Sauraus: ?
[2013-08-07 19:58:05 -0400] jmickle: Sauraus: i don't think its going on
[2013-08-07 19:58:55 -0400] Sauraus: serious?
[2013-08-07 19:59:26 -0400] jmickle: Sauraus: I'm not sure but it sounded like they have not done one since the security situation
[2013-08-07 19:59:43 -0400] Sauraus: @sethvargo you in the channel?
[2013-08-07 20:01:19 -0400] MrBIOS: any idea why I'm experiencing this failure when doing a knife search (no IP returned)?
[2013-08-07 20:01:20 -0400] MrBIOS: http://pastie.org/private/1npoerk9bsih0qjmee4ooa
[2013-08-07 20:01:30 -0400] MrBIOS: this is with the very latest Chef 11 server
[2013-08-07 20:04:31 -0400] btm: @opscode cookbook code review, join: https://plus.google.com/hangouts/_/8753b994996017c9768a4ba9648b53fc69544657, watch: http://youtu.be/md3RBiKA3WE
[2013-08-07 20:04:40 -0400] btm: Sauraus: ---^
[2013-08-07 20:05:32 -0400] dgarstang: Having a conceptual issue with attributes. Simple example. nrpe.conf.... the list of host IP's (basically the nagios server) that are allowed to connect. That could either go in the cookbook attributes, but since it's a region specific thing, would seem to make more sense to put into a location based role (which I've kinda already got)....
[2013-08-07 20:05:33 -0400] Sauraus: The party is over :D
[2013-08-07 20:06:35 -0400] Sauraus: @btm sure that URL is good?
[2013-08-07 20:07:49 -0400] amccloud: Can you trigger notify outside of a resource? Specifically, I'm using the application cookbook that takes a restart_command. I'd rather have it notify my existing service resource instead of doing an execute resource or manually passing 'service blah restart'
[2013-08-07 20:10:20 -0400] dgarstang: Could you put location specific attributes directly into the cookbook?
[2013-08-07 20:12:12 -0400] Sauraus: @btm still no go on that URL
[2013-08-07 20:14:27 -0400] prometheanfire: so, the chef installer installs stuff to /usr/bin (symlinks) and puts stuff in /var/cache
[2013-08-07 20:14:45 -0400] coldboot|laptop: jmickle: That doesn't explain the query syntax.
[2013-08-07 20:14:49 -0400] Sauraus: @opscode what's the COOK url? the one above provided by @btm doesn't work
[2013-08-07 20:14:49 -0400] prometheanfire: via a .deb that runs a script that installs to /opt
[2013-08-07 20:14:51 -0400] prometheanfire: WAT
[2013-08-07 20:14:58 -0400] prometheanfire: this makes no sense
[2013-08-07 20:18:08 -0400] prometheanfire: why does opscode seem to go out of it's way to NOT distribute actual packages (debs rpms tarballs)?
[2013-08-07 20:20:20 -0400] siezer: prometheanfire ?
[2013-08-07 20:21:10 -0400] prometheanfire: I just don't understand why opscode's only(?) method of distibution is that shell script
[2013-08-07 20:21:22 -0400] siezer: prometheanfire http://www.opscode.com/chef/install/ <-- google -> "chef install" -> first result
[2013-08-07 20:21:47 -0400] gswallow: irb(main):004:0> require 'chef'
[2013-08-07 20:21:47 -0400] gswallow: LoadError: cannot load such file -- yajl/yajl
[2013-08-07 20:21:47 -0400] gswallow: from /usr/local/lib/ruby/site_ruby/2.0.0/rubygems/custom_require.rb:36:in `require'
[2013-08-07 20:23:48 -0400] siezer: prometheanfire the install script just detects the OS and downloads the appropriate package from the same place the install page drop down boxes link to
[2013-08-07 20:24:23 -0400] prometheanfire: siezer: ok, I somehow missed that
[2013-08-07 20:24:31 -0400] prometheanfire: siezer: still installs to opt, don't get that then
[2013-08-07 20:25:17 -0400] siezer: prometheanfire the installer is hermetically sealed into /opt and ships with its own ruby, and various libs that ruby links to
[2013-08-07 20:25:20 -0400] prometheanfire: or etc stuff should be in /etc/opt
[2013-08-07 20:25:33 -0400] prometheanfire: ya, that bugs me too :P
[2013-08-07 20:25:37 -0400] prometheanfire: but that
[2013-08-07 20:25:43 -0400] prometheanfire: but that's a whole other deal
[2013-08-07 20:25:55 -0400] cwj: how green was my bikeshed
[2013-08-07 20:26:03 -0400] siezer: why would that bug you
[2013-08-07 20:26:27 -0400] prometheanfire: not linking against system libs bugs me is all
[2013-08-07 20:26:37 -0400] prometheanfire: it's not the worst thing, so meh
[2013-08-07 20:26:40 -0400] siezer: it links against the system libc ;)
[2013-08-07 20:26:42 -0400] prometheanfire: freeswitch does it too
[2013-08-07 20:26:47 -0400] prometheanfire: that's good at least :P
[2013-08-07 20:27:08 -0400] prometheanfire: system ssl would be good too, basically anything not ruby
[2013-08-07 20:27:30 -0400] prometheanfire: but /etc/ stuff should be in /etc/opt
[2013-08-07 20:27:32 -0400] siezer: we ship a newer openssl than whats on most systems
[2013-08-07 20:27:44 -0400] prometheanfire: and /var/opt
[2013-08-07 20:27:49 -0400] prometheanfire: oh
[2013-08-07 20:28:09 -0400] prometheanfire: 1.0.1e?
[2013-08-07 20:28:44 -0400] siezer: yep
[2013-08-07 20:28:51 -0400] siezer: https://github.com/opscode/omnibus-software/blob/master/config/software/openssl.rb
[2013-08-07 20:29:09 -0400] amccloud: Can I manually queue up a notification to a resource outside of a resource?
[2013-08-07 20:29:38 -0400] prometheanfire: we have that :D
[2013-08-07 20:30:25 -0400] siezer: there be dragons
[2013-08-07 20:30:52 -0400] prometheanfire: ya
[2013-08-07 20:30:56 -0400] siezer: that version of openssl begs a patch to ruby for newer gcc versions
[2013-08-07 20:31:26 -0400] dgarstang: Do cookbook specific attributes have any facility to handle data for multiple locations?
[2013-08-07 20:31:58 -0400] prometheanfire: lrwxrwxrwx jenkins-node/jenkins-node        0 2013-07-23 14:07 ./opt/chef/embedded/lib/libssl.so -> libssl.so.1.0.0
[2013-08-07 20:32:03 -0400] prometheanfire: 1.0.0 :P
[2013-08-07 20:32:28 -0400] adnichols: dgarstang do you mean having attributes in a cookbook have different values depending on where the "node" lives? Such as in different sites or datacenters?
[2013-08-07 20:32:41 -0400] dgarstang: adnichols: absoutely!
[2013-08-07 20:32:44 -0400] siezer: prometheanfire if you don't want to trust the vendor (opscode) to manage the linked-to libs, there's always the rubygems based installation method
[2013-08-07 20:32:57 -0400] siezer: where you bring your own ruby and All The Things
[2013-08-07 20:32:58 -0400] prometheanfire: true
[2013-08-07 20:33:13 -0400] dgarstang: (allthethings) Oh. That don't work here
[2013-08-07 20:33:22 -0400] adnichols: dgarstang I personally use roles for this - but you can use any role/recipe/environment approach you want to override attributes based on location
[2013-08-07 20:33:23 -0400] prometheanfire: I was thinking of packaging chef 11 for gentoo,
[2013-08-07 20:33:30 -0400] jtimberman: dgarstang: hipchat to irc gateway needed :)
[2013-08-07 20:33:35 -0400] adnichols: some folks lookup the location & then load values from a data bag
[2013-08-07 20:33:36 -0400] prometheanfire: we can take the deb, but the rubygem method may be better
[2013-08-07 20:33:55 -0400] siezer: I know a gentoo shop that uses the rubygem method
[2013-08-07 20:34:08 -0400] dgarstang: adnichols: Yah, that's the approach I had started to take.... just wasn't 100% sure of it. Seems like data should be contained within the cookbook. ... dunno... cuz some might be in the cookbook and some in roles/. Messy?
[2013-08-07 20:34:11 -0400] dgarstang: jtimberman: hehe
[2013-08-07 20:34:22 -0400] prometheanfire: siezer: for chef11?
[2013-08-07 20:34:59 -0400] siezer: yep
[2013-08-07 20:35:09 -0400] adnichols: dgarstang I'm unaware of a "pure" way to do this inherent to attributes in cookbooks - I consider the system a whole with layers and my environment is a base cookbook with custom attributes layered over that via a role/recipe
[2013-08-07 20:35:20 -0400] siezer: client side anyway... the server side is a lot more complicated
[2013-08-07 20:35:34 -0400] siezer: because of postgres and friends
[2013-08-07 20:35:48 -0400] dgarstang: adnichols: your not bothered by having some data in a role, and some in the cookbook attributes?
[2013-08-07 20:36:04 -0400] prometheanfire: siezer: if they already have a working ebuild I may be able to get it into mainline
[2013-08-07 20:36:19 -0400] adnichols: dgarstang I'm not - I know that to evaluate the real values being used I have to look at both
[2013-08-07 20:36:28 -0400] prometheanfire: siezer: if you feel like asking them my email is <nick>@gentoo.org
[2013-08-07 20:36:40 -0400] dgarstang: adnichols: another way might be to put it all in cookbook attributes, and structure the json such that each location is keyed.
[2013-08-07 20:36:45 -0400] adnichols: dgarstang no different to me than having default values for sshd & overrides in a config
[2013-08-07 20:37:28 -0400] dgarstang: adnichols: ie "ntp": { "us1": { stuff }, "us2: { stuff } }
[2013-08-07 20:38:50 -0400] adnichols: dgarstang yeah, you can do that too - there are lots of ways. In my world I'm happy with good enough - some folks strive for something closer to perfect :)
[2013-08-07 20:39:02 -0400] coldboot|laptop: Why does this query fail, if Chef uses Lucene query syntax?: `knife search -- '+role:SomeRole -name:SomeName'`
[2013-08-07 20:39:58 -0400] siezer: prometheanfire I'll ask
[2013-08-07 20:40:31 -0400] prometheanfire: siezer: ok, thanks :D  /parting here
[2013-08-07 20:44:13 -0400] amccloud: Is run_context private API?
[2013-08-07 20:46:24 -0400] freezey: opscode-logger: why you no release chef 11.0.10
[2013-08-07 20:55:57 -0400] prometheanfire: neurogeek: hi
[2013-08-07 20:56:13 -0400] siezer: gentoo party
[2013-08-07 20:56:23 -0400] neurogeek: woohoo
[2013-08-07 20:56:32 -0400] neurogeek: prometheanfire, pretty good, you?
[2013-08-07 20:56:40 -0400] prometheanfire: neurogeek: good :D
[2013-08-07 20:56:52 -0400] prometheanfire: neurogeek: you have an ebuild I can get into the tree for chef11?
[2013-08-07 20:57:34 -0400] dgarstang: trying to dump array into template. Anyone know how I can remove trailing comma from 1,2,3,  etc?
[2013-08-07 20:58:05 -0400] coldboot|laptop: Does Chef still actually use Lucene's query syntax? Does it do any pre-processing on knife search queries?
[2013-08-07 20:58:49 -0400] neurogeek: prometheanfire, not really, I was actually interested in seeing where the conversation was heading
[2013-08-07 20:58:58 -0400] siezer: oh =\
[2013-08-07 20:59:05 -0400] prometheanfire: neurogeek: it was about packaging chef11 for gentoo
[2013-08-07 20:59:26 -0400] prometheanfire: I have go, but if you have anything my email is <nick>@gentoo.org
[2013-08-07 21:00:01 -0400] neurogeek: my bad then, I thought it was about packaging in general
[2013-08-07 21:00:13 -0400] siezer: ah
[2013-08-07 21:00:16 -0400] neurogeek: prometheanfire, talk to you later then
[2013-08-07 21:00:54 -0400] prometheanfire: neurogeek: that's how it started
[2013-08-07 21:01:02 -0400] siezer: neurogeek to clear up any confusion... opscode only *supports* the omnibus-built packages that are sealed into /opt for our platform list
[2013-08-07 21:01:04 -0400] prometheanfire: just wanting chef to follow the FHS
[2013-08-07 21:01:25 -0400] siezer: neurogeek if a distro (gentoo) wants to ship their own build, linked to their own libs, go for it
[2013-08-07 21:01:56 -0400] d```: does the chef omnibus installer even support gentoo?
[2013-08-07 21:02:04 -0400] siezer: nope
[2013-08-07 21:02:26 -0400] adnichols: dgarstang does somearray.join(',') not work?
[2013-08-07 21:02:32 -0400] neurogeek: but this is new to chef11, right?
[2013-08-07 21:02:52 -0400] dgarstang: adnichols: well, I was doing <% @allowed_hosts.each do |dev| %> ... so... I dunno.
[2013-08-07 21:03:05 -0400] d```: maybe start with submitting a gentoo compatibility patch to their omnibus installer
[2013-08-07 21:03:13 -0400] adnichols: dgarstang if you just need a comma separated list - don't do that :) use join
[2013-08-07 21:03:15 -0400] dgarstang: adnichols: hm, k
[2013-08-07 21:04:10 -0400] dgarstang: adnichols: oh, this got me an empty result. <% @allowed_hosts.join(',') %>
[2013-08-07 21:05:08 -0400] neurogeek: I dont think that might work, d```
[2013-08-07 21:05:18 -0400] adnichols: I'd have to see a pastie of the inputs and maybe the whole code block that was working before w/ the trailing comma
[2013-08-07 21:05:22 -0400] cheflevelramen: Ohai Chefs. What is the best way to manage multiple chef organizations? I have 4-5 groups that I work with, each of which has their own AWS environment. I'd imagine in hosted/private chef, I'd just create new organizations for each, along with seperate chef-repos for each. However, they all use the same set of tools (think Nagios, AV, etc), and so would need to be able to search for them. Can instances in one chef organization
[2013-08-07 21:06:13 -0400] d```: cheflevelramen: do they manage their own recipes?
[2013-08-07 21:06:42 -0400] cheflevelramen: d```: not yet, but they probably would at some point
[2013-08-07 21:07:02 -0400] d```: well you could maybe do something where none of them have direct access to the server
[2013-08-07 21:07:14 -0400] d```: and have cookbook uploads managed by git hooks
[2013-08-07 21:07:40 -0400] d```: and then have each client in their own environment
[2013-08-07 21:07:42 -0400] dgarstang: I'm confused. I thought I HAD to pass variables => to template. I see an example here where someone didn't do that, and they are using node[foo] in the template
[2013-08-07 21:08:39 -0400] adnichols: dgarstang I'm not sure of the details around that - I suspect some node attributes are available inside the template but I tend to pass them in for clarity
[2013-08-07 21:08:45 -0400] cheflevelramen: d```: Yea, I was thinking something along those lines. However, it obviously would get a bit cumbersome to then have multiple environments for each group, ie., g1-dev, g1-prod, g2-dev, g2-prod, etc
[2013-08-07 21:08:54 -0400] bjensen82: i want to install some private certificates (for github deployments). But I am unsure of how to store the certs in my cert reposity. Ideas please?
[2013-08-07 21:09:02 -0400] bjensen82: cert repo = chef repo
[2013-08-07 21:09:13 -0400] dgarstang: adnichols: ugh, again, more than one way to do it
[2013-08-07 21:10:25 -0400] adnichols: The templates docs suggest the node object can be accessed inside a template.
[2013-08-07 21:10:31 -0400] dgarstang: adnichols: in that case, any idea why <% @allowed_hosts.join(',') %> would give me an empty result, while iterating over @allowed_hosts doesn't ?
[2013-08-07 21:11:07 -0400] adnichols: dgarstang I would need ot see what you are passing into @allowed_hosts in the template definition - or maybe what the block in the template looked like when it was working but had a trailing comma
[2013-08-07 21:11:31 -0400] dgarstang: adnichols: passing the same thing. all i changed was how the template accessed it
[2013-08-07 21:11:32 -0400] adnichols: My suspicion is that @allowed_hosts is not actually an array
[2013-08-07 21:11:51 -0400] dgarstang: adnichols: i think it is. When I use <%= @allowed_hosts %> i see [a,b]
[2013-08-07 21:12:12 -0400] adnichols: oh
[2013-08-07 21:12:15 -0400] adnichols: no =
[2013-08-07 21:12:23 -0400] adnichols: <%= @allowed_hosts.join...
[2013-08-07 21:12:36 -0400] dgarstang: you mean <= ... ?
[2013-08-07 21:12:42 -0400] adnichols: no, I mean <%=
[2013-08-07 21:12:51 -0400] dgarstang: oh. *cry*
[2013-08-07 21:13:29 -0400] adnichols: I've never done that (yeah right)
[2013-08-07 21:13:32 -0400] dgarstang: adnichols: see, it caught you too...
[2013-08-07 21:15:44 -0400] adnichols: I'm pretty used to my inadequacy when it comes to getting chef recipes right without lots of testing
[2013-08-07 21:17:38 -0400] joelnn: is there a way to save a reference to a resource, so that I can later put it in a service 'subscribes' attribute? I have a service that depends on a bunch of files, and its a bit tedious. I'd like to make an array of resources, and subscribe to them all
[2013-08-07 21:20:40 -0400] siezer: joelnn https://gist.github.com/someara/18f23c4fd5a716be85b6
[2013-08-07 21:21:51 -0400] siezer: chef builds a resource_collection during compile time before doing the converge. that's what allows for the notification system to work in the first place
[2013-08-07 21:23:01 -0400] siezer: joelnn you may want to reverse it to a subscribes tho
[2013-08-07 21:23:06 -0400] joelnn: siezer: cool... how would I dump a bunch of those into a service 'subscribes' list
[2013-08-07 21:23:37 -0400] siezer: http://docs.opscode.com/chef/resources.html#subscribes-syntax
[2013-08-07 21:23:38 -0400] joelnn: maybe I can pass an array of resources to subscribes, and just didn't know it
[2013-08-07 21:24:27 -0400] siezer: you can put multiple subscribes lines in your service definition
[2013-08-07 21:25:00 -0400] joelnn: that's what I'm trying to avoid, typing the resource names twice, or a line per resource :)
[2013-08-07 21:25:34 -0400] joelnn: guess I just swallow it
[2013-08-07 21:26:05 -0400] siezer: not sure how to avoid it off the top of my head. someone stronger with the ruby may know
[2013-08-07 21:26:33 -0400] joelnn: can you put 'subscribes' in a block I wonder?
[2013-08-07 21:26:48 -0400] siezer: well technically everything between the do and end is already a block
[2013-08-07 21:27:14 -0400] joelnn: like, resources.each do { |r| subscribes :reload, r }
[2013-08-07 21:27:56 -0400] miah: siezer: http://docs.opscode.com/chef/resources.html#subscribes-syntax
[2013-08-07 21:28:36 -0400] stevefink: what's currently the best way to install a bunch of gems, just use 'package' directive?
[2013-08-07 21:28:47 -0400] miah: but you have to specify 'subscribes ...' for _each_ item you want to subscribe to
[2013-08-07 21:28:51 -0400] miah: same for notifications
[2013-08-07 21:29:14 -0400] miah: you could do %w(foo bar baz).each do { |i| subscribes i... }
[2013-08-07 21:29:36 -0400] joelnn: ah you can do that eh? ok nice
[2013-08-07 21:30:12 -0400] joelnn: guess I should have just tried, but was uncertain
[2013-08-07 21:30:43 -0400] miah: its ruby
[2013-08-07 21:30:59 -0400] siezer: its "ruby" ;)
[2013-08-07 21:31:05 -0400] joelnn: the DSL creates some doubt in my mind :)
[2013-08-07 21:31:11 -0400] spheromak: how so
[2013-08-07 21:31:34 -0400] siezer: the only thing the ruby should be doing is building that resource collection
[2013-08-07 21:32:18 -0400] miah: the dsl is really only around resources. recipes are still just ruby eval'd into classes
[2013-08-07 21:32:21 -0400] spheromak: siezer, I think i understand where you are coming from, but the nerd in me has to whole heartedly disagree :P
[2013-08-07 21:32:28 -0400] siezer: saying chef is "just ruby" implies it's okay to make changes to the system using FileUtils or whatever during the compilation phase
[2013-08-07 21:32:45 -0400] miah: siezer: yes, you can. and chef does indeed do such things internally.
[2013-08-07 21:32:56 -0400] miah: but you should only do such things inside Resources or Providers
[2013-08-07 21:32:58 -0400] miah: not recipes
[2013-08-07 21:33:03 -0400] siezer: right
[2013-08-07 21:33:29 -0400] spheromak: siezer if you do it idempotent I don't think there is much of an issue. one of those things. If i wanted a safe sandbox I would still be using puppet :)
[2013-08-07 21:33:56 -0400] spheromak: In general I agree with both of you tho.
[2013-08-07 21:33:58 -0400] miah: mostly, i reach for the bare metal if a resource provider doesn't already exist (or i think its shoddy)
[2013-08-07 21:34:08 -0400] spheromak: and I usually give people shit in reviews if they do nasty in recipe :P
[2013-08-07 21:34:13 -0400] jtimberman: This is an excellent, detailed look at how Chef builds the resource collection, and how the notification system works: http://erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/
[2013-08-07 21:34:27 -0400] miah: yup, erikh's blog there is great
[2013-08-07 21:34:33 -0400] spox: spheromak: hi!
[2013-08-07 21:35:16 -0400] joelnn: jtimberman: excellent, thanks
[2013-08-07 21:35:26 -0400] siezer: miah I know how chef works ;) All I'm trying to say is that the phrase "Chef is Just Ruby" creates a lof of FUD and confusion
[2013-08-07 21:35:39 -0400] siezer: and people doing nasty things at compile time out of ignorance
[2013-08-07 21:35:48 -0400] miah: i think it only does so to people who have avoided reading chef source code
[2013-08-07 21:35:59 -0400] joelnn: for me it's the oppopsite, I would like to see exactly how it's "just ruby", or I am uncertain about what I'm able to do
[2013-08-07 21:36:02 -0400] siezer: aka all newbie users ever
[2013-08-07 21:36:05 -0400] miah: and i'd guess that 95% of chef's users dont know how it works
[2013-08-07 21:36:18 -0400] siezer: I'd say its more like 99.5
[2013-08-07 21:36:20 -0400] joelnn: I'm a developer first, so I like to understand
[2013-08-07 21:36:28 -0400] spox: "do magic" ... wait ... infrastructure!
[2013-08-07 21:36:29 -0400] spox: win!
[2013-08-07 21:36:42 -0400] siezer: joelnn you can use "just ruby" to implement providers all day long
[2013-08-07 21:36:50 -0400] theCzar: If I add a notifies in a template resource, will that only fire off if the template actually changes something?
[2013-08-07 21:36:59 -0400] miah: if you want examples of that, take a look at my cookbooks (mostly chef_logstash)
[2013-08-07 21:37:00 -0400] siezer: but the ruby in a recipe should be building the resource collection
[2013-08-07 21:37:33 -0400] miah: im still working on my skills and trying to make it better.
[2013-08-07 21:37:45 -0400] joelnn: yeah what I'm doing here in the recipe is defining a bunch of file, cookbook_file, template resources etc, and then I want a service to subscribe to them
[2013-08-07 21:37:48 -0400] spheromak: theCzar, if the notification is a "notifies" in the template resource the notify only fires when the resource takes action. i.e. changes content
[2013-08-07 21:37:52 -0400] joelnn: and trying to do it in a concise DRY way
[2013-08-07 21:38:32 -0400] miah: write a definition or a resource provider
[2013-08-07 21:38:39 -0400] miah: i still think that most recipes should really be definitions
[2013-08-07 21:38:46 -0400] theCzar: spheromak: cool
[2013-08-07 21:39:10 -0400] miah: then you have a unique name tied to a abstract 'definition' of some resources that does a specific action
[2013-08-07 21:41:23 -0400] joelnn: miah: sounds good to me. though I am perhaps one of the few people who doesn't like to split code into more files than absolutely necessary, so I prefer to see most things in the recipe
[2013-08-07 21:41:29 -0400] Sauraus: How does chef-solo handle line endings?
[2013-08-07 21:41:45 -0400] miah: joelnn: deal with it? =)
[2013-08-07 21:41:50 -0400] Sauraus: I am going crazy here with a simple script file that just won't work on Linux unless I run dos2unix on it
[2013-08-07 21:42:20 -0400] miah: joelnn: https://gist.github.com/miah/6179023
[2013-08-07 21:42:21 -0400] miah: =)
[2013-08-07 21:42:34 -0400] miah: Sauraus: stop writing your code in notepad++ or windows =)
[2013-08-07 21:42:46 -0400] Sauraus: Thanks for the tip :P
[2013-08-07 21:42:46 -0400] miah: or make sure to save it 'unix style'
[2013-08-07 21:43:03 -0400] miah: windows does CRLF and unix only does LF iirc
[2013-08-07 21:43:05 -0400] joelnn: miah: wow... must be a powerful library
[2013-08-07 21:43:05 -0400] Sauraus: eg. /LF
[2013-08-07 21:43:08 -0400] miah: joelnn: =)
[2013-08-07 21:43:34 -0400] miah: auto-generated code ftw.
[2013-08-07 21:43:49 -0400] d```: I have a bunch of recipes that search for other nodes based on environment and roles
[2013-08-07 21:43:52 -0400] joelnn: I think generally the more files you have, the more bitrot you have
[2013-08-07 21:44:16 -0400] miah: joelnn: certainly.
[2013-08-07 21:44:26 -0400] miah: its why i keep track: https://codeclimate.com/github/miah/chef_logstash
[2013-08-07 21:44:41 -0400] d```: I'm trying to move to the "no roles" scheme of chef recipe writing, but I'm having a hard time figuring out the syntax for searching for recipes that are applied directly to the node
[2013-08-07 21:46:08 -0400] siezer: d``` currently, you'll have to have your recipe leave some evidence it was ran in the node object
[2013-08-07 21:46:23 -0400] miah: my code in chef_logstash really only lives in ~6 files. the rest are automatically created resources based on logstash plugins.
[2013-08-07 21:46:25 -0400] joelnn: miah: nice. clearly this is way beyond the cookbooks I'm writing... though I generally look at the available cookbooks (haven't needed logstash yet), decide that the attribute/recipe surface area is too much, and write my own small cookbook
[2013-08-07 21:46:36 -0400] siezer: I like to do node['cookbook']['recipe_name']['applied'] = true
[2013-08-07 21:46:37 -0400] spheromak: d``` you can use tags,
[2013-08-07 21:46:47 -0400] miah: ya, i dont like including _any_ attributes or recipes in my cookbooks
[2013-08-07 21:47:09 -0400] spheromak: tags are a good way if you are using include_recipe   since  node.recipes? doesn't  report all recipes only those directly on the run_list
[2013-08-07 21:47:23 -0400] miah: recipe based cookbooks that use 100+ attributes are basically: awful code with crazy global variables. the kind of stuff ruby programmers tell you to avoid.
[2013-08-07 21:47:29 -0400] spox: node.run_state[:seen_recipes]
[2013-08-07 21:47:55 -0400] spheromak: I like tags, cause its a bit more role-like (without the side effeects)  or you can just set an attrib.
[2013-08-07 21:48:26 -0400] spheromak: the tag can be applied at bootstrap. where the attrib has to be set then node.save has to run (i.e. converge has to succeed or you have to have explicitly node.saved).
[2013-08-07 21:48:43 -0400] d```: wow, I like all these solutions
[2013-08-07 21:48:52 -0400] siezer: tags have the disadvantage of being limited to strings tho
[2013-08-07 21:48:59 -0400] d```: I'll have to figure out what's best for me
[2013-08-07 21:49:00 -0400] spheromak: miah, I agree  @spox   Agreed you can  use node.run_state as well
[2013-08-07 21:49:13 -0400] spheromak: siezer, I think its a good limitation
[2013-08-07 21:49:14 -0400] d```: or let you guys argue it out and decide a winner secretly
[2013-08-07 21:49:30 -0400] d```: I use miah's cookbooks in my org, so she's winning for now
[2013-08-07 21:49:33 -0400] miah: the more ruby you learn, the more obvious the winner is
[2013-08-07 21:50:04 -0400] spheromak: miah, problem is not all shops will have "ruby" programmers :D
[2013-08-07 21:50:10 -0400] spheromak: even after years of puppet/chef
[2013-08-07 21:50:15 -0400] miah: tags shouldn't really be any more complicated than strings.
[2013-08-07 21:50:50 -0400] dgarstang: can cookbook attributes be in json?
[2013-08-07 21:50:52 -0400] spox: dump object, base64 encode, tag on node
[2013-08-07 21:50:54 -0400] spox: profit!
[2013-08-07 21:51:11 -0400] miah: if you've only written 'ruby' for puppet or chef, you need to expand your skillset a little bit.
[2013-08-07 21:51:16 -0400] spheromak: node.tag node.marshal
[2013-08-07 21:51:17 -0400] spheromak: :D
[2013-08-07 21:51:21 -0400] spheromak: or better yet.
[2013-08-07 21:51:27 -0400] spheromak: run_context.marshal
[2013-08-07 21:51:43 -0400] dgarstang: docs on json attributes, non existent
[2013-08-07 21:51:54 -0400] spox: like leaving an easter egg, except you get death threats in the end
[2013-08-07 21:51:57 -0400] spheromak: was thinking about that the otheer day. Marshaling objects back to the chef server.  like a boss
[2013-08-07 21:52:05 -0400] spheromak: chef CORBA
[2013-08-07 21:52:10 -0400] spheromak: *ORB
[2013-08-07 21:52:11 -0400] kisoku: ewwwwwww
[2013-08-07 21:52:14 -0400] spheromak: kisoku, lol
[2013-08-07 21:52:32 -0400] kisoku: seriously I wake up to this ?
[2013-08-07 21:52:33 -0400] kisoku: :-P
[2013-08-07 21:52:44 -0400] spheromak: dgarstang, you asking about -j  json_attribs ?
[2013-08-07 21:52:57 -0400] spheromak: kisoku, morning
[2013-08-07 21:53:05 -0400] kisoku: I remember kanies maessing about with marshal for puppet a long time ago
[2013-08-07 21:53:13 -0400] spheromak: yea
[2013-08-07 21:53:18 -0400] kisoku: and it turning out to be a Really Bad Idea
[2013-08-07 21:53:29 -0400] spheromak: yea I didn't say it was a good idea.
[2013-08-07 21:53:33 -0400] kisoku: don't remember the specifics
[2013-08-07 21:53:37 -0400] dgarstang: spheromak: is that what they are called?
[2013-08-07 21:53:52 -0400] spheromak: dgarstang, well I was trying to disambiguate your statement
[2013-08-07 21:53:56 -0400] dgarstang: http://docs.opscode.com/essentials_cookbook_attribute_files.html .... string 'json' does not appear on page.
[2013-08-07 21:53:59 -0400] spheromak: what json attribs are not documented
[2013-08-07 21:54:09 -0400] dgarstang: spheromak: ^
[2013-08-07 21:54:36 -0400] spheromak: attribs aren't in json
[2013-08-07 21:54:51 -0400] dgarstang: spheromak: poo. more readable. Ok.
[2013-08-07 21:55:12 -0400] spheromak: roles can be json  (with json attribs)
[2013-08-07 21:55:24 -0400] spheromak: dgarstang,  dunno hashes in ruby 1.9 are pretty readable
[2013-08-07 21:55:42 -0400] dgarstang: spheromak: but not attributes. :( it's hard to see a hierarchial structure when flattened out
[2013-08-07 21:55:57 -0400] spheromak: attribs are Mash, you can set it like a hash if  you like
[2013-08-07 21:56:23 -0400] dgarstang: spheromak: howso?
[2013-08-07 21:56:26 -0400] ggolin: does anyone use chef-zero?
[2013-08-07 21:56:49 -0400] ggolin: im wondering if search works the same as with a normal chef-server
[2013-08-07 21:56:55 -0400] dgarstang: http://docs.opscode.com/essentials_cookbook_attribute_files.html ... string 'hash' does not appear.
[2013-08-07 21:57:07 -0400] dgarstang: http://docs.opscode.com/essentials_cookbook_attribute_files.html ... string 'mash' also doesn't appear.
[2013-08-07 21:57:07 -0400] ggolin: particularly id like to point out that it does not do that for me :)
[2013-08-07 21:57:24 -0400] spheromak: ggolin, https://gist.github.com/spheromak/6179166
[2013-08-07 21:57:30 -0400] spheromak: eer sorry
[2013-08-07 21:57:32 -0400] spheromak: dgarstang, ^^
[2013-08-07 21:57:42 -0400] spheromak: ggolin, there is a bug in  chef-zero search
[2013-08-07 21:57:44 -0400] ggolin: darn it.
[2013-08-07 21:57:47 -0400] ggolin: oh?
[2013-08-07 21:57:49 -0400] ggolin: do tell
[2013-08-07 21:57:50 -0400] spheromak: where its doing some greedy matching
[2013-08-07 21:57:52 -0400] dgarstang: spheromak: I see, thanks
[2013-08-07 21:58:16 -0400] dgarstang: love to know why sometimes it's node['thing'] and sometimes node[:thing]
[2013-08-07 21:58:31 -0400] spheromak: dgarstang, no reason thats all style
[2013-08-07 21:58:43 -0400] ggolin: spheromak, well at this point i have only one possible search result (node). i feed it to a template but there are things missing from it. like fqdn.
[2013-08-07 21:58:48 -0400] spheromak: attributes are magically vivifided
[2013-08-07 21:58:58 -0400] spheromak: ggolin, https://github.com/jkeiser/chef-zero/issues/31
[2013-08-07 21:59:04 -0400] spheromak: ]found this @ work last week
[2013-08-07 22:00:04 -0400] ggolin: seems like it may be vaguely related
[2013-08-07 22:00:13 -0400] spheromak: dgarstang, so  they are effectively equivalent
[2013-08-07 22:00:31 -0400] ggolin: thanks spheromak
[2013-08-07 22:00:31 -0400] dgarstang: spheromak: chef, y u not standardize
[2013-08-07 22:00:48 -0400] spheromak: dgarstang,  timtowtdi
[2013-08-07 22:00:55 -0400] Sauraus: Did something change with the latest chef release in terms of how line endings are treated for templates & cookbook_file?
[2013-08-07 22:01:32 -0400] adnichols: dgarstang I value the flexibility - I can use tools like foodcritic to enforce my preferred standard
[2013-08-07 22:01:42 -0400] Sauraus: Looks like line endings are no longer converted to the platform on which the files are created/processed
[2013-08-07 22:03:16 -0400] freerobby: Is there any way for me to run "knife node run_list add" on a node search to add a role to a lot of nodes with one operation?
[2013-08-07 22:03:31 -0400] spheromak: Sauraus, sounds like underlying ruby stuff more than chef stuff.
[2013-08-07 22:03:37 -0400] spheromak: Sauraus, possibly.
[2013-08-07 22:03:47 -0400] ggolin:  freerobby look into environments
[2013-08-07 22:04:04 -0400] spheromak: freerobby, you can look into knife exec and  "transform"
[2013-08-07 22:04:18 -0400] spheromak: freerobby,  you can also do stuff like that from  chef-shell
[2013-08-07 22:04:18 -0400] freerobby: ggolin: spheromak: Thanks guys
[2013-08-07 22:04:29 -0400] Sauraus: Don't think it's Ruby because if the line ending is forced to be /LF it all works
[2013-08-07 22:06:47 -0400] joelnn: how did I go so long before trying chef-shell...
[2013-08-07 22:07:22 -0400] spheromak: joelnn, dunno one of the great things in chef :P
[2013-08-07 22:10:21 -0400] freerobby: spheromak: Whoa, exec/transform is awesome!
[2013-08-07 22:10:30 -0400] spheromak: freerobby, yes
[2013-08-07 22:10:40 -0400] freerobby: That is a rocking tip, very gad I asked.
[2013-08-07 22:10:43 -0400] spheromak: freerobby, transform also in chef-shell
[2013-08-07 22:10:50 -0400] dgarstang: so much for chefs idempotency. ran my cookbook 1st time, fine. Run it a second, get an error
[2013-08-07 22:11:12 -0400] spheromak: dgarstang, pebkac ?
[2013-08-07 22:11:51 -0400] doomviking: yawn.
[2013-08-07 22:11:52 -0400] dgarstang: spheromak: not unless I'm typing 'vagrant provision' wrong
[2013-08-07 22:12:15 -0400] spheromak: dgarstang, it does what you tell it, if you tell it to break something then it wont work on teh next run ;)
[2013-08-07 22:12:33 -0400] spheromak: i.e. I've broken yum/apt many times which blew things up
[2013-08-07 22:13:00 -0400] spheromak: but chef did what I asked
[2013-08-07 22:13:30 -0400] dgarstang: spheromak: Well, I'm looking at systm here, and it looks fine. Created nagios user and group
[2013-08-07 22:14:56 -0400] joelnn: this is a bit like saying "I dropped my hard drive, so much for magnetic storage"
[2013-08-07 22:15:10 -0400] spheromak: dgarstang, can't debug it without the output from chef in a gist or something.  My comment was only cause you stated chef wasn't idempotent. (and a user can make it so) Generally the builtin resources are idempotent. Chef does give you alot of rope tho.
[2013-08-07 22:18:06 -0400] dgarstang: I don't get it... http://pastebin.com/y6P3xTBx
[2013-08-07 22:19:45 -0400] ggolin: dgarstang, whats the breakage
[2013-08-07 22:20:34 -0400] ptwobrussell: hey folks - i am very new to chef and wanted to ask for little bit of advice. i just realized that the vagrant-berkshelf plugin that i am using as part of an "easy to use cross-platform" virtual machine experience requires gcc because vagrant-berkshelf has some dependencies that need to get compiled. Requiring consumers of my project to go and find an appropriate version of gcc introduces an extra layer of indirection that is probably a deal breaker a
[2013-08-07 22:20:35 -0400] ptwobrussell: this point, so i am considering porting the Vagrant-based VM that uses Chef+Berkshelf back to using a bootstrap.sh script that handles installation of dependencies when it first boots up. Before I did, though, I was curious if there are some good alternatives you'd recommend to Berkshelf that don't require gcc or other layers of indirection? e.g. what would be a good path forward to using Vagrant + Chef + (???) where (???) doesn't require gcc or
[2013-08-07 22:20:36 -0400] ptwobrussell: third-party dependencies involving extra steps. Ideally something that's in pure Ruby I guess? Or is it fairly straight forward to use Chef without Berkshelf to get to the same place?
[2013-08-07 22:20:43 -0400] dgarstang: ggolin: on the 2nd run, I'm getting "Couldn't lookup integer GID for group name 502" (when i switch the user comments around)
[2013-08-07 22:21:02 -0400] binamov: dgarstang line 8 is log log is your intention?
[2013-08-07 22:21:04 -0400] dgarstang: Don't know why it thinks the 'name' is 502.
[2013-08-07 22:21:17 -0400] dgarstang: binamov: fixed
[2013-08-07 22:21:54 -0400] siezer: ptwobrussell what deps?
[2013-08-07 22:22:11 -0400] ptwobrussell: Here's a link to the repo. Not many of them - https://github.com/ptwobrussell/Mining-the-Social-Web-2nd-Edition
[2013-08-07 22:22:15 -0400] joelnn: dgarstang: I was confused by this too, but I think "gid" is supposed be a group name. if you don't specify gid, then the default is to create a group with the same name
[2013-08-07 22:22:19 -0400] dgarstang: ggolin: on every ocassion it logs the 'name' as nagios, not 502
[2013-08-07 22:22:28 -0400] joelnn: http://docs.opscode.com/resource_user.html
[2013-08-07 22:22:31 -0400] ggolin: hm
[2013-08-07 22:23:02 -0400] joelnn: dgarstang: if you want to create a group and specify a gid, I believe you want http://docs.opscode.com/resource_group.html
[2013-08-07 22:23:02 -0400] dgarstang: joelnn: oh hell.
[2013-08-07 22:23:21 -0400] dgarstang: gid is the name? Well that's confusing.
[2013-08-07 22:23:31 -0400] siezer: ptwobrussell if the workstations are macs, installing xcode + cli tools isn't unreasonable. If they're windows, I bet you're talking about nokogiri, which should ship its on precompiled ming32 bits
[2013-08-07 22:24:40 -0400] dgarstang: ggolin: thanks. that's dumb.
[2013-08-07 22:24:48 -0400] dgarstang: works now.
[2013-08-07 22:29:53 -0400] joelnn: so if 'foo' is a local variable in a recipe, which is a reference to a resource, ' subscribes :reload, "#{foo}" ' would be the way to subscribe to it?
[2013-08-07 22:30:07 -0400] ptwobrussell: siezer - yea, i know what you're saying, but asking a fairly non-technical audience to go out and do those things is probably a bit of a stretch at this point since I am trying to reach a very broad audience. i will have to do some digging and figure out how to either use Chef without Berkshelf (which I know very little about at this point) or go back to my Bash script : /
[2013-08-07 22:34:58 -0400] mannyt: ptwobrussell: you can always create a vagrant box that is already running chef-solo
[2013-08-07 22:35:29 -0400] mannyt: When they run vagrant up the box will start and they can login and run the chef-solo command with any cookbooks they download onto the vm
[2013-08-07 22:36:51 -0400] ptwobrussell: mannyt - hmm. that is an interesting idea. i will have to look into that more. so perhaps i can have them 1) download Virtualbox, 2) download Vagrant, 3) vagrant up) and then have all of the VM happen on the box as it is booting up. No need to install the vagrant-berkshelf plugin or anything? That would be great
[2013-08-07 22:37:21 -0400] ptwobrussell: i know next to nothing about chef/berkshelf so i am just now starting to understand what is possible/relatively easy to do
[2013-08-07 22:38:45 -0400] kisoku: dear library cookbook authors, stop using search :-P
[2013-08-07 22:39:13 -0400] kisoku: depending on node state is a smell
[2013-08-07 22:39:31 -0400] joelnn: ptwobrussell: unless/until you know what you need chef-server for, I would stick with chef-solo. that's how I'm approaching it anyway. chef-server is sort of a big ball of "state" to me, and state is exactly what I'm fighting.
[2013-08-07 22:41:59 -0400] djustin: I'm trying to loop through the registry via Win32::Registry to grab the 64 bit uninstallstring, but keep getting redirected to the 32bit space...any ideas how to get around this?
[2013-08-07 22:42:01 -0400] ptwobrussell: joelnn- thanks. i'll definitely lean that direction. i appreciate the advice
[2013-08-07 22:43:03 -0400] chalettu: any chef zero gurus in the room?
[2013-08-07 22:47:23 -0400] joelnn: ptwobrussell: I found this post helpful, in that vein: https://coderwall.com/p/j72egw. definitely check out "berks --install" if you haven't yet
[2013-08-07 22:47:50 -0400] djustin: phew...found a way to get around the redirect to 32 bit
[2013-08-07 22:48:26 -0400] ptwobrussell: joelnn - awesome. thanks. i'll read this tonight. i definitely need the advice
[2013-08-07 22:49:22 -0400] joelnn: ptwobrussell: sorry, "berks install --path"
[2013-08-07 22:50:01 -0400] joelnn: lets you install all your cookbooks to a path you specify, which you can then tar up and redistribute as you like.
[2013-08-07 23:02:23 -0400] makerbreaker: does anyone work for/run an msp and utilize chef?
[2013-08-07 23:09:34 -0400] joelnn: makerbreaker: clearly this disqualifies me, but whats an msp?
[2013-08-07 23:09:43 -0400] joelnn: managed service provider?
[2013-08-07 23:10:06 -0400] makerbreaker: ya
[2013-08-07 23:10:28 -0400] makerbreaker: like, essentially managing several disparate companies servers
[2013-08-07 23:11:44 -0400] joelnn: do you have a question, maybe we could help anyway
[2013-08-07 23:12:03 -0400] joelnn: I'm not exactly in that role but I'm a contractor
[2013-08-07 23:12:07 -0400] makerbreaker: it's more of a business question, rather than chef specific
[2013-08-07 23:12:33 -0400] makerbreaker: I know chef in and out, Im thinking about starting business
[2013-08-07 23:12:44 -0400] makerbreaker: and want to see if it's viable, and what price points it would be viable at
[2013-08-07 23:16:37 -0400] joelnn: ah. well Chef can make you a lot more time-efficient, but as it relates to the business I don't think your customers care, unless you are going to be handing control to them in the future
[2013-08-07 23:17:13 -0400] makerbreaker: joelnn, well, ya, this isnt really chef specific, but Ill be using chef
[2013-08-07 23:17:24 -0400] makerbreaker: heh, so i figured id ask here
[2013-08-07 23:21:29 -0400] joelnn: makerbreaker: I recommend starting as a contractor and go from there. if/when you have some reusable pieces, you can charge less, and thats when you can scale. my 2 cents.
[2013-08-07 23:22:01 -0400] makerbreaker: I have a bunch of reusable pieces that Ive written over the years
[2013-08-07 23:43:38 -0400] mfick: Noobee question:Anyway to organize cookbooks like directories in a hiearchy?
[2013-08-07 23:43:55 -0400] mfick: I am trying to plan ahead for growth
[2013-08-07 23:53:49 -0400] doomviking: maybe mess around with cookbook_path
[2013-08-07 23:53:52 -0400] jhulten: mfick: Cookbooks have a flat namespace.
[2013-08-07 23:53:56 -0400] jhulten: On the server.
[2013-08-07 23:54:05 -0400] doomviking: locally
[2013-08-07 23:54:42 -0400] jhulten: Often I recommend hyphenated namespace, like mycorp-ops-base, mycorp-db-postresql

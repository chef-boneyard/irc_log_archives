[2013-08-23 00:42:21 -0400] lazyPower: I'm having a really funky problem. I'm building a cookbook to create my deploy user and get the account setup, when running the sudo cookbook in vagrant(box ubuntu precise32) it bricks the chef client and vagrant user is no longer able to passwordless sudo
[2013-08-23 00:42:44 -0400] gchristensen: indeed, because it overwrites the sudoers file
[2013-08-23 00:42:47 -0400] lazyPower: is my google fu just really bad, and this is a known problem? Or am I pioneering it?
[2013-08-23 00:43:01 -0400] lazyPower: I know it does that, it backs up the existing and deploys a new generated file.
[2013-08-23 00:44:29 -0400] lazyPower: gchristensen: do you have any friendly advice for me or reading i can do to learn how to combat this? I'd like to have a working env before i start fiddling with a server to see if it works.
[2013-08-23 00:45:11 -0400] gchristensen: lazyPower: you could add the vagrant user to the sysadmin group, if that is in sudoers, or something else... I have not done this in particular :) sorry
[2013-08-23 00:45:13 -0400] gchristensen: :(
[2013-08-23 00:45:37 -0400] lazyPower: the catch 22 is i cant sudo to read whats in the generated file
[2013-08-23 00:45:43 -0400] lazyPower: so its like *nuke*
[2013-08-23 00:45:49 -0400] gchristensen: hah
[2013-08-23 00:46:32 -0400] gchristensen: yeah that's tricky, but I don't think there is some magical thing to do, just have to toy with solutions.
[2013-08-23 00:46:59 -0400] lazyPower: ah, ok. Day 2 of messing with this, I feel like I'm running in circles.
[2013-08-23 00:47:15 -0400] lazyPower: typical dev cycle
[2013-08-23 00:47:20 -0400] gchristensen: maybe do a compat cookbook which ensures the vagrant user is sudoable
[2013-08-23 00:47:55 -0400] gchristensen: lazyPower: https://github.com/opscode-cookbooks/sudo#attributes - add vagrant and enable passwordless?
[2013-08-23 00:48:06 -0400] lazyPower: OH CRAP I JUST SOLVED IT
[2013-08-23 00:48:14 -0400] lazyPower: can i buy you a beer? your magic has rubbed off on me
[2013-08-23 00:48:44 -0400] lazyPower: i didn't add the sudo group back to the config of sudoers
[2013-08-23 00:48:45 -0400] gchristensen: lazyPower: the only repayment I ask is you help someone else with your new-found knowledge!
[2013-08-23 00:48:49 -0400] lazyPower: i had admin, wheel, and sysadmin
[2013-08-23 00:55:48 -0400] temujin9: okay, problem solved: there are at least 3 ways of specifying the name in this particular spiceweasel, and vm delete only happens if you do the 3rd (name in the vm config, rather than as -N or --vmname flags). mostly just posting for the benefit of future Google searches . . .
[2013-08-23 01:00:12 -0400] lazyPower: "/alias hideadd eval set activity_hide_targets $activity_hide_targets $-"
[2013-08-23 01:00:12 -0400] lazyPower: "/alias hideclear set -c activity_hide_targets"
[2013-08-23 01:00:12 -0400] lazyPower: "/alias hidelevels.clear set -c activity_hide_level"
[2013-08-23 01:00:13 -0400] lazyPower: "/alias hidelevels.set set activity_hide_level parts joins quits nicks modes"
[2013-08-23 01:00:13 -0400] lazyPower: "/alias hidelist set activity_hide_targets"
[2013-08-23 01:00:19 -0400] lazyPower: "/alias hideset set activity_hide_targets $-"gah
[2013-08-23 01:00:22 -0400] lazyPower: sorry
[2013-08-23 01:53:32 -0400] mburns: https://gist.github.com/mburns/6314768 <- trying to build a list of network interfaces with external IP addresses assigned to them
[2013-08-23 02:05:25 -0400] jeremyolliver: mburns: Did you have a question about that? Or...
[2013-08-23 02:06:31 -0400] jeremyolliver: I found recently when trying to iterate the network interfaces that mac addresses were a bit mixed in with the IP addresses (I think)
[2013-08-23 02:07:13 -0400] jeremyolliver: Also when testing on vagrant and virtualbox I found that all my nodes had the same node[:ipaddress] which was fun.
[2013-08-23 02:28:16 -0400] mburns: sorry, yes. My question, is, how do I reference the  node.network.interfaces.FOO.addresses hash, in my loop over node.network.interfaces? https://gist.github.com/mburns/6314768 (error added)
[2013-08-23 02:33:41 -0400] mburns: I need to inspect the address value, and conditionally add the name of the associated network interface.
[2013-08-23 03:53:58 -0400] mburns: node[:network][:interfaces][interface].addresses.keys.first.start_with?('192.168.', '127.', '10.') # is what I was looking for :)
[2013-08-23 05:38:22 -0400] Garo_: Hello. I'm building a Chef recipe which would help me to setup four different openvpn servers, which each need to have differently named openvpn configurations with different contents. These scripts are so unique, that I don't see much point of creating a single .erb template, because it would be too complex. I'd rather just create four different configuration files into my Chef git repository and let a single chef recipe ...
[2013-08-23 05:38:28 -0400] Garo_: ... to select the proper configuration from the git based on the server name and put it in place. Am I doing this right? Are there good pointers / chef recipes which would do just this with minimal customisation effort?
[2013-08-23 05:41:05 -0400] brzm: Garo_: how two configurations of same software can different so much? there is one type of config, so there is one type of specifying options (like key-value) in it. why not use simple template and render attributes from hash?
[2013-08-23 05:41:32 -0400] brzm: Garo_: or you're talking about some support scripts?
[2013-08-23 05:44:06 -0400] Garo_: brzm: I have two datacenters, each having two openvpn endpoints, which need to build a mesh of p2p openvpn connections. so each server needs to have two openvpn configuration files, each having unique set of "ifconfig ip1 ip2", "log <filename>" and the file name itself of the openvpn configs.
[2013-08-23 05:44:27 -0400] Garo_: oh and a "port <unique number>"
[2013-08-23 05:45:02 -0400] Garo_: brzm: and the point of my Chef recipe is to deploy those config files in place, depending on the server
[2013-08-23 05:56:28 -0400] brzm: Garo_: well, it's two environments and a simple recipe. config from hash. i use that scheme
[2013-08-23 06:02:09 -0400] Garo_: brzm: ok, I'd dig into the config from hash concept. thanks =)
[2013-08-23 07:01:23 -0400] linuxboy: can someone at opscode look at this? https://github.com/opscode-cookbooks/jenkins/pull/60
[2013-08-23 07:01:30 -0400] linuxboy: and this: https://github.com/opscode-cookbooks/java/pull/78
[2013-08-23 07:01:43 -0400] joelteon: what's the equivalent of rpm -Uvh in chef?
[2013-08-23 07:01:59 -0400] linuxboy: and https://github.com/opscode-cookbooks/jenkins/pull/59
[2013-08-23 07:07:26 -0400] kisoku: linuxboy: the best way to get someone to pay attention to your pull requests is to open a ticket at tickets.opscode.com
[2013-08-23 07:07:35 -0400] kisoku: have you signed the CLA ?
[2013-08-23 07:07:36 -0400] linuxboy: kisoku: done that :p
[2013-08-23 07:07:41 -0400] linuxboy: kisoku: yes
[2013-08-23 07:07:48 -0400] kisoku: there's also cookbook code reviews
[2013-08-23 07:08:01 -0400] kisoku: they are public
[2013-08-23 07:08:11 -0400] linuxboy: oooh
[2013-08-23 07:08:14 -0400] linuxboy: where do those happen?
[2013-08-23 07:08:15 -0400] kisoku: also. seth is pretty chill, so shoot him an email
[2013-08-23 07:08:22 -0400] kisoku: they happen on google hangout
[2013-08-23 07:08:37 -0400] kisoku: btm usually tweets right before it happens
[2013-08-23 07:08:48 -0400] kisoku: unfortunately it's all us timezone times :-/
[2013-08-23 07:09:00 -0400] kisoku: so I rarely get it together to attend
[2013-08-23 07:09:00 -0400] linuxboy: I thought opscode was in the UK
[2013-08-23 07:09:05 -0400] kisoku: uh
[2013-08-23 07:09:07 -0400] kisoku: no
[2013-08-23 07:09:15 -0400] kisoku: opscode is based out of seattle
[2013-08-23 07:09:21 -0400] linuxboy: heh
[2013-08-23 07:09:22 -0400] kisoku: but are distributed
[2013-08-23 07:09:30 -0400] kisoku: btm is on the esast coast I think
[2013-08-23 07:09:37 -0400] linuxboy: ah
[2013-08-23 07:09:37 -0400] kisoku: jtimberman is in boulder
[2013-08-23 07:09:47 -0400] kisoku: they have people all over the place
[2013-08-23 07:10:09 -0400] isbaran: kisoku: which twitter account is it ?
[2013-08-23 07:10:21 -0400] kisoku: the code reviews ?
[2013-08-23 07:10:24 -0400] isbaran: yes
[2013-08-23 07:10:36 -0400] linuxboy: kisoku: so how do you suggest I ask them to look at my pull requests?
[2013-08-23 07:10:49 -0400] kisoku: nicely :-P
[2013-08-23 07:10:51 -0400] kisoku: :-P
[2013-08-23 07:11:13 -0400] kisoku: seth chisamore is the main guy for the jenkins cookbook
[2013-08-23 07:11:20 -0400] kisoku: which PRs ?
[2013-08-23 07:11:38 -0400] linuxboy: #59 and #60
[2013-08-23 07:11:44 -0400] kisoku: ah yes
[2013-08-23 07:11:54 -0400] kisoku: spaces. saw the emails for that earlier today
[2013-08-23 07:12:05 -0400] linuxboy: emails?
[2013-08-23 07:12:22 -0400] linuxboy: oh yes
[2013-08-23 07:12:25 -0400] linuxboy: I made 2 tickets I think
[2013-08-23 07:13:52 -0400] kisoku: not sure why you are escaping those single quotes in 60 ?
[2013-08-23 07:15:44 -0400] kisoku: the formatting of #59 is strange
[2013-08-23 07:16:07 -0400] linuxboy: I thought that the #{@new_resource.job_name} needed interpolation
[2013-08-23 07:16:31 -0400] linuxboy: oh, you're right
[2013-08-23 07:16:33 -0400] linuxboy: didn't notice that
[2013-08-23 07:16:40 -0400] kisoku: not only is the indent level off for the closing end, I believe it is more idiomatic to usecurly braces for the block associated with the not_if
[2013-08-23 07:16:57 -0400] kisoku: ie.
[2013-08-23 07:17:08 -0400] kisoku: not_if { something something }
[2013-08-23 07:17:36 -0400] kisoku: actually
[2013-08-23 07:17:44 -0400] kisoku: that whole thing doesn't do what you think it does
[2013-08-23 07:17:52 -0400] linuxboy: why?
[2013-08-23 07:18:10 -0400] kisoku: you are adding a not_if to the log resource
[2013-08-23 07:18:49 -0400] kisoku: err
[2013-08-23 07:19:35 -0400] kisoku: nm that makes sense
[2013-08-23 07:19:43 -0400] linuxboy: \o/
[2013-08-23 07:19:54 -0400] linuxboy: and the escaped quotes in the jenkins one?
[2013-08-23 07:19:58 -0400] linuxboy: good, bad?
[2013-08-23 07:20:08 -0400] linuxboy: I thought it would give us a literal #{@new_resource.job_name}
[2013-08-23 07:21:02 -0400] linuxboy: ah, it looks like they aren't needed
[2013-08-23 07:21:32 -0400] linuxboy: what is the correct way to fix this? edit the commit and force push?
[2013-08-23 07:22:25 -0400] kisoku: yeah you can do that and the pull request will update itself
[2013-08-23 07:24:01 -0400] linuxboy: cool
[2013-08-23 07:27:25 -0400] linuxboy: https://github.com/opscode-cookbooks/jenkins/pull/60/files
[2013-08-23 07:27:58 -0400] linuxboy: the not_if one
[2013-08-23 07:28:10 -0400] linuxboy: whould I use curly brances?
[2013-08-23 07:28:26 -0400] linuxboy: *should
[2013-08-23 07:32:42 -0400] linuxboy:   not_if { test_url = URI.parse("#{node['jenkins']['server']['url']}/api/json"); JenkinsHelper.endpoint_responding?(test_url) }
[2013-08-23 07:32:45 -0400] linuxboy:  ?
[2013-08-23 07:42:32 -0400] linuxboy: kisoku: updated both, thanks for the input
[2013-08-23 07:58:22 -0400] kisoku: linuxboy: the not_if doesn't have to be a one lner
[2013-08-23 07:58:25 -0400] kisoku: it can be
[2013-08-23 07:58:28 -0400] kisoku: not_if {
[2013-08-23 07:58:31 -0400] kisoku:   your code
[2013-08-23 07:58:34 -0400] kisoku:   goes here
[2013-08-23 07:58:35 -0400] kisoku: }
[2013-08-23 07:59:20 -0400] linuxboy: oic
[2013-08-23 08:00:26 -0400] linuxboy: kisoku: thanks, fixed
[2013-08-23 08:34:03 -0400] rb__: hi
[2013-08-23 08:34:44 -0400] rb__: I created a very simple cookbook to install prerequisites on my webservers
[2013-08-23 08:34:58 -0400] rb__: the prerequisites are located into a self extractible exe
[2013-08-23 08:35:20 -0400] rb__: I tried to include this .exe in the /files/default folder
[2013-08-23 08:35:34 -0400] rb__: but it does not seem to be transferred to my server
[2013-08-23 08:38:44 -0400] tugce: hello everyone, is there a way to ensuring if a package is installed or not?
[2013-08-23 08:39:05 -0400] isbaran: tugce: see package resource
[2013-08-23 08:39:14 -0400] tugce: i searched it on google but all i found was how to install a package not ensuring if it's installed or not
[2013-08-23 08:39:58 -0400] isbaran: tugce: installing means ensuring it is installed, same thing
[2013-08-23 08:40:54 -0400] tugce: isbaran: i was wondering if there is a shorter way or not, so there is not :)
[2013-08-23 08:40:59 -0400] tugce: isbaran: thanks!
[2013-08-23 08:41:44 -0400] isbaran: tugce: you want it in a not_if only_if statement i guess ?
[2013-08-23 08:42:14 -0400] rb__: actually it depends on the package
[2013-08-23 08:42:16 -0400] tugce: isbaran: yes
[2013-08-23 08:43:03 -0400] isbaran: maybe sth like this: only_if "dpkg -l package | grep -q ^ii"
[2013-08-23 08:44:28 -0400] tugce: isbaran: hmm well it's should be platform independent, i think this can be done with platform families.
[2013-08-23 08:44:52 -0400] isbaran: better use package then :)
[2013-08-23 08:45:40 -0400] tugce: isbaran: i think i find a good way to do it :) i'll use cookbooks for installing packages then put them into a role so i think it'll be alright.
[2013-08-23 08:46:33 -0400] ptrf: is it possible to do conditional include_recipes?
[2013-08-23 08:46:33 -0400] ptrf: currently I have a include_recipe "app::nginx" if node["app"]["install_web"]
[2013-08-23 08:46:54 -0400] isbaran: ptrf: of course
[2013-08-23 08:46:58 -0400] ptrf: but it installs nginx no matter if node["app"]["install_web"] is false
[2013-08-23 08:47:19 -0400] ptrf: I found this SO-post: http://stackoverflow.com/questions/15961496/is-it-possible-to-chef-include-recipe-and-indicate-only-if-not-if-condition
[2013-08-23 08:47:54 -0400] isbaran: tugce: yesi thats how you do it normally
[2013-08-23 08:51:22 -0400] tugce: isbaran: thanks again!
[2013-08-23 08:51:39 -0400] isbaran: tugce: ne demek
[2013-08-23 08:51:59 -0400] tugce: isbaran: :)
[2013-08-23 08:59:06 -0400] isbaran: ptrf: you're probably including it somewhere else, check nagios cookbook, a lot of examples here: https://github.com/opscode-cookbooks/nagios/blob/master/recipes/server.rb
[2013-08-23 10:37:18 -0400] woltage: Does anybody else has problems with 11.0.8 server installation? I get this: "/opt/chef-server/embedded/bin/rabbitmqctl: line 23: exec: erl: not found
[2013-08-23 10:37:20 -0400] woltage: "
[2013-08-23 10:48:11 -0400] chaos: missing erlang?
[2013-08-23 10:58:25 -0400] woltage: I tought cher-server includes embedded erlang?
[2013-08-23 11:09:18 -0400] fooJBar: woltage: did you install using the solo cookbook?
[2013-08-23 11:10:11 -0400] woltage: sudo rpm -Uvh https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-server-11.0.6-1.el6.x86_64.rpm && sudo chef-server-ctl reconfigure
[2013-08-23 11:10:36 -0400] woltage: Like instructions say :)
[2013-08-23 11:11:07 -0400] fooJBar: woltage: Ah I never tried the omnibus rpm installer. But yeh I never had to install erlang myself...
[2013-08-23 11:13:09 -0400] fooJBar: woltage: I only run chef-server on Ubuntu (the download is a .deb) but I assume they should be equivalent
[2013-08-23 11:14:34 -0400] dijit: hey guys
[2013-08-23 11:14:52 -0400] dijit: I'm looking into running an open source version of chef-server in my datacenter
[2013-08-23 11:15:09 -0400] woltage: fooJBar: I think i found the problem.
[2013-08-23 11:15:14 -0400] dijit: I'm having trouble getting my head around how the topology of it.
[2013-08-23 11:15:30 -0400] dijit: so if there are any 'getting started' docs that are good then I'd happily read them
[2013-08-23 11:15:47 -0400] dijit: I'm trying to figure out the difference between a node and a workstation
[2013-08-23 11:16:38 -0400] dijit: do the recipes have to be stored on workstations?
[2013-08-23 11:16:41 -0400] dijit: for instance?
[2013-08-23 11:19:16 -0400] xhae: dijit: workstations are where you work on chef; you upload cookbooks from them to the server. nodes are machines managed by chef; they only download the cookbooks they need from the server.
[2013-08-23 11:19:53 -0400] woltage: fooJBar: looks like Redhat qpidd process is already using amqp port. So stopped qpidd and now it's working like a charm :)
[2013-08-23 11:20:43 -0400] mtpereira: dijit: see if these 2 articles help: http://docs.opscode.com/chef_overview_workstation.html http://docs.opscode.com/chef_overview_nodes.html
[2013-08-23 11:21:05 -0400] dijit: thanks!
[2013-08-23 11:28:50 -0400] mind_: hi, can someone help with data bags?
[2013-08-23 11:38:43 -0400] mveitas: mind: What kind of help with data bags?
[2013-08-23 11:50:47 -0400] Mange: Hi. I have a question about chef which I cannot find any direct information about.
[2013-08-23 11:52:04 -0400] Mange: Basiaclly, I'm wondering how to do infrastructure upgrades using Chef. Let's say we have a MongoDB 1.8 replica set on a few machines and we want to upgrade to 2.0. Upgrades like this needs to happen in a specific order, with waiting times between each upgrade. What if a machine needs extra stuff changed as well, like deleting files and whatnot
[2013-08-23 11:52:57 -0400] Mange: (Slaves need to be upgraded first, Master last. Each restarted slave needs time to catch up.)
[2013-08-23 11:53:13 -0400] Mange: (Master needs to step down before being upgraded so a slave is elected new master)
[2013-08-23 11:53:58 -0400] Mange: Is this even possible? Seems to me that Chef is basically just "patching files" on disk until they are all in the correct version; with no "imperative" instructions on how to go from one version to the next without just "replacing" it
[2013-08-23 11:54:37 -0400] Mange: Please tell me how utterly wrong I am and how people usually do this. :-P
[2013-08-23 11:55:03 -0400] rb__: hi
[2013-08-23 11:55:18 -0400] rb__: is it possible to include 3rd party files into a cookbook ?
[2013-08-23 11:55:35 -0400] rb__: like executables that would be launched by the cookbook for example
[2013-08-23 11:56:09 -0400] jmara: hey there :)
[2013-08-23 11:56:23 -0400] mveitas: rb__, you can include files if you want, but IMHO you should not and pull them from some repository somewhere
[2013-08-23 11:56:59 -0400] isbaran: mveitas: its not always ok to rely on some 3rd party repository
[2013-08-23 11:57:21 -0400] mveitas: rb__: if you do include files you can use the cookbook_file resource
[2013-08-23 11:57:57 -0400] mveitas: isbaran: I agree and would argue to create your own repository that can be reliable. A million different ways to skin a cat
[2013-08-23 11:58:57 -0400] isbaran: mveitas: yep, for single or few files i think relying on chef server is best, if it's not available nothing works anyway
[2013-08-23 12:00:22 -0400] mveitas: rb__: I use the cookbook to include small files and such, but if I am pulling files or binaries, we pull them from S3 (as we are AWS based) in order to keep our cookbooks nice and small
[2013-08-23 12:00:29 -0400] rb__: Ok, at first I wanted to include in the files/default folder but I couldn't seem to access them
[2013-08-23 12:00:42 -0400] rb__: I think I'm going to put them in an FTP repository
[2013-08-23 12:02:03 -0400] mveitas: rb__:  did you use the cookbook_file resource?
[2013-08-23 12:06:45 -0400] rb__: cookbook_file seems to correspond yes
[2013-08-23 12:07:15 -0400] rb__: I tried executing the file without cookbook_file statement, because I thought that the whole cookbook was downloaded
[2013-08-23 12:10:13 -0400] isbaran: rb__: it is downloaded afaik
[2013-08-23 12:10:36 -0400] isbaran: you just don't know the right path for file
[2013-08-23 12:11:06 -0400] rb__: it's not in C:\chef\cache\
[2013-08-23 12:11:34 -0400] rb__: neither in C:\chef\cache\remote_file, nor in C:\chef\cache\cookbooks\MyCookBooks\$
[2013-08-23 12:34:57 -0400] mveitas: rb__: https://gist.github.com/mveitas/6318818   We created our own wrapper cookbook for installing the UCE jars for JDK 7. I include two jars in the cookbook files/default directory
[2013-08-23 12:40:56 -0400] rb__: many thanks !
[2013-08-23 12:46:16 -0400] fooJBar: mveitas: +1, keep the cookbook small. We used the exact same approach here, we store zips and big binaries on an Apache2 server and used a remote_file resource instead of a cookbook_file. If you put large binaries files in files/default everything slows down (due to computing content hashes for all those files)
[2013-08-23 13:02:54 -0400] jjmojojjmojo: I'm using an execute resource, and I want to check a command in a not_if clause - most examples just show a call to ::File.exists?, how would I check the output of a command to guard the resource from running?
[2013-08-23 13:05:05 -0400] cpuguy83: jjmojojjmojo: when I use execute, i use the "creates" option
[2013-08-23 13:05:59 -0400] cpuguy83: With "creates", it looks to see if the file you provided exists and then doesn't run.  Then if my execute command is not actually creating a file, I tack on a "&& touch /my/file" to the end of the command to ensure that it does create it
[2013-08-23 13:06:45 -0400] cpuguy83: jjmojojjmojo: https://gist.github.com/cpuguy83/6195495
[2013-08-23 13:11:21 -0400] yfeldblum: jjmojojjmojo, you can pass as string to `not_if` and that will be interpreted as a command - if the command exits 0, then your execute resource will be skipped
[2013-08-23 13:11:50 -0400] cpuguy83: yfeldblum: That's awesome, I did not know that.
[2013-08-23 13:12:14 -0400] yfeldblum: jjmojojjmojo, you can also pass a block of ruby code to not_if, and if that block returns anything other than `false` or `nil`, then the execute resource will be skipped
[2013-08-23 13:13:36 -0400] yfeldblum: jjmojojjmojo, if you want to check the output of a command, you can do: not_if { `/path/to/some/command arg1 arg2` =~ /some pattern/ }
[2013-08-23 13:16:56 -0400] fedgoat: whats up with this API endpoint DELETE and SANDBOx failures during install...11.0.6  I've installed this before and never had these errors before...Have these RPM builds changed, for Enterprise Linux 6
[2013-08-23 13:35:02 -0400] fedgoat: nevermind..stupid /etc/hosts...fixed it  chef really hates when hosts file is not right for localhost
[2013-08-23 13:35:39 -0400] bean__: fedgoat: most things hate it when the hosts file isn't right for localhost
[2013-08-23 13:36:59 -0400] fedgoat: Agreed...I had the hostname set for the ip of the server, but it didn't like it when it wasnt set for 127.0.0.1..seems like rabbit got hung up a bit and didn't shutdown properly also after modifying...all fixed now :) time to cook
[2013-08-23 13:43:38 -0400] jmara: I'm trying to upgrade a package on ubuntu. How do I handle the apt questions, asking if I want to override old configs or not? is there a way to handle this?
[2013-08-23 13:45:41 -0400] ghatak: Hi
[2013-08-23 13:45:49 -0400] cpasmoi: jmara, use the :version variable in the package section
[2013-08-23 13:45:52 -0400] ghatak: can anyone help me with the issue here?
[2013-08-23 13:45:53 -0400] ghatak: http://pastebin.com/AAJj22mm
[2013-08-23 13:45:58 -0400] cpasmoi: or better, use the apt cookbook
[2013-08-23 13:47:22 -0400] mveitas: jmara: you can use the package resource and pass in options such as --force-yes
[2013-08-23 13:47:57 -0400] cpasmoi: ghatak, why don't you use directly node['app]['settings']['sub1']['var1'] in the template, if it isn't changent in the recipe ?
[2013-08-23 13:48:10 -0400] cpasmoi: no need for @var in that case
[2013-08-23 13:48:21 -0400] cpasmoi: or @params
[2013-08-23 13:48:41 -0400] ghatak: cpasmoi: the default is pretty simple in paste, it is very complicated in environments file
[2013-08-23 13:48:47 -0400] ghatak: and get overridden many places
[2013-08-23 13:48:59 -0400] ghatak: I pass relavent pieces to templates only
[2013-08-23 13:49:29 -0400] cpasmoi: ok
[2013-08-23 13:50:41 -0400] jmara: mveitas: hmm I'll try
[2013-08-23 13:51:19 -0400] mveitas: jmara: http://docs.opscode.com/resource_package.html
[2013-08-23 13:55:32 -0400] suffix_: could someone explain why a yum package resource (action :install) is failing with a "No version specified, and no candidate version available for compat-libstdc++-33-3.2.3-61" even though yum install returns: "Package compat-libstdc++-33-3.2.3-61.x86_64 already installed and latest version"
[2013-08-23 13:58:10 -0400] JustLeo: Hello
[2013-08-23 13:58:28 -0400] atomic-penguin: suffix_, maybe if you gist a snippet, someone could see what is triggering the problem.
[2013-08-23 13:58:52 -0400] ncraike: Hi all. Anyone about?
[2013-08-23 13:58:59 -0400] atomic-penguin: nope
[2013-08-23 13:59:35 -0400] ncraike: Right.
[2013-08-23 13:59:37 -0400] atomic-penguin: Ain't nobody here but us chickens
[2013-08-23 13:59:45 -0400] ncraike: and the lurkers?
[2013-08-23 13:59:51 -0400] jbz: lurking.
[2013-08-23 13:59:58 -0400] isbaran: +1
[2013-08-23 13:59:59 -0400] jbz: dark, grue, etc.
[2013-08-23 14:00:00 -0400] ncraike: excellent.
[2013-08-23 14:00:39 -0400] ghatak: atomic-penguin: hi
[2013-08-23 14:00:39 -0400] ghatak: atomic-penguin: any chance you could cast you eye on this http://pastebin.com/AAJj22mm
[2013-08-23 14:01:05 -0400] ncraike: Well, just a short question: I'd like to use a chef feature introduced in 11.6.0, but the node I want to use it on has a chef-client at version 11.4. Is there some easy, idiomatic way to upgrade the version of chef-client on a node?
[2013-08-23 14:01:18 -0400] JustLeo: May I ask someone for some help on Chef?
[2013-08-23 14:02:15 -0400] atomic-penguin: ghatak, you missed a ' in the template block when you passed :vars in
[2013-08-23 14:02:46 -0400] cpasmoi: I don't think that's the problem
[2013-08-23 14:02:50 -0400] ghatak: atomic-penguin: that is a typo in paste, recipie is fine
[2013-08-23 14:02:53 -0400] yfeldblum: JustLeo, this would be a better channel to try than the #notchef channel
[2013-08-23 14:03:34 -0400] ghatak: atomic-penguin: the problem is at top of the paste
[2013-08-23 14:05:19 -0400] mattupstate: curious question for anyone...
[2013-08-23 14:05:24 -0400] JustLeo: I'm trying to handle a chef exception within a recipe with a begin rescue block, the problem is that the exception is not being handle by the rescue block. Is there any other way to do this?
[2013-08-23 14:05:49 -0400] cpuguy83: ghatak: Not sure how either works since you are mixing symbols with strings in your hash keys
[2013-08-23 14:06:10 -0400] mattupstate: i've seen a few blog posts recently advocating to not use roles...
[2013-08-23 14:06:27 -0400] mattupstate: was curious if anyone in here has some insight into that
[2013-08-23 14:06:46 -0400] cpuguy83: mattupstate: Roles aren't versioned is the biggest thing.
[2013-08-23 14:07:08 -0400] ghatak: cpuguy83: that might be the issue
[2013-08-23 14:07:27 -0400] mattupstate: cpuguy83: i understand that part but what about `env_run_lists` ?
[2013-08-23 14:07:39 -0400] cpuguy83: mattupstate: A lot of people will uses a role to encapsulate a single cookbook, which then has everything that would have been in the role's runlist
[2013-08-23 14:07:43 -0400] mattupstate: i feel like that helps a lot with that issue
[2013-08-23 14:07:56 -0400] ghatak: cpuguy83: looking at default attributes, what would be correct way to access vars in erb ?
[2013-08-23 14:07:57 -0400] cpuguy83: Then you use the environment to lockdown the role-cookbook version
[2013-08-23 14:08:45 -0400] ncraike: Is there any easy way to update the version of chef-client installed on a node?
[2013-08-23 14:08:52 -0400] cpuguy83: ghatak: you would need @vars[:settings][:sub1]...etc not @vars['settings']['sub1']
[2013-08-23 14:08:57 -0400] ncraike: * an easy way
[2013-08-23 14:10:03 -0400] ghatak: cpuguy83: ok lets try that
[2013-08-23 14:10:09 -0400] jbz: hm, would chef-gem installing the chef-client work?  Or cause the universe to collapse in on itself before exploding outward at the speed of light?
[2013-08-23 14:10:38 -0400] mattupstate: it depends on how you installed it to begin with
[2013-08-23 14:10:46 -0400] jbz: What if it was originally omnibus?
[2013-08-23 14:11:02 -0400] ncraike: Are these questions directed at me?
[2013-08-23 14:11:05 -0400] jbz: which then installs a ruby/gem environment strictly for chefis chef a gem, in that limited environment?
[2013-08-23 14:11:07 -0400] mattupstate: i was just looking at the wiki page for this and now i cant find it
[2013-08-23 14:11:11 -0400] ncraike: Originally I installed it with "knife bootstrap <hostname".
[2013-08-23 14:11:24 -0400] jbz: ncraike: was for mattupstate who answered my original :-)
[2013-08-23 14:11:29 -0400] cpuguy83: ncraike: You can re-bootstrap
[2013-08-23 14:11:42 -0400] cpuguy83: ... I'm pretty sure, anway
[2013-08-23 14:11:42 -0400] ncraike: Ah, right. Sorry, too many questions/answers. :)
[2013-08-23 14:11:44 -0400] cpuguy83: *anyway
[2013-08-23 14:12:23 -0400] ncraike: Um... the node is on 11.4. knife bootstrap <fqdn> doesn't seem to increase that, even if I do --bootstrap-version=11.6.0
[2013-08-23 14:12:41 -0400] JustLeo: Anyone can help me on this: I'm trying to handle a chef exception within a recipe with a begin rescue block, the problem is that the exception is not being capture/handle by the rescue block. Is there any other way to do this?
[2013-08-23 14:12:43 -0400] mattupstate: http://wiki.opscode.com/display/chef/Upgrading+Chef+0.10.x+to+the+newest+version+of+Chef
[2013-08-23 14:13:22 -0400] mattupstate: i upgraded a node from 11.4 to 11.6 with `sudo true && curl -L https://www.opscode.com/chef/install.sh | sudo bash`
[2013-08-23 14:13:39 -0400] ghatak: cpuguy83: that worked. i swear to god i tried this before.
[2013-08-23 14:13:43 -0400] ghatak: and it did not work
[2013-08-23 14:14:02 -0400] ghatak: anyway, i am wiser now, as i know what not to mix with what
[2013-08-23 14:14:26 -0400] cpuguy83: ghatak: Just remember, it's all Ruby.  Using it ERB does not transform it, it's still the same vars.
[2013-08-23 14:17:32 -0400] mattupstate: cpuguy83: i still feel like roles, even if they don't manage run lists, are useful for searching
[2013-08-23 14:18:08 -0400] cpuguy83: mattupstate: Yes.  So people still use roles, but just for containing a single, versioned cookbook
[2013-08-23 14:18:50 -0400] mattupstate: cpuguy83: ok
[2013-08-23 14:20:21 -0400] mattupstate: cpuguy83: in that case, are roles still used for managing attributes much?
[2013-08-23 14:20:32 -0400] gchristensen: if I update the environment for a node, does chef-client have to run before it takes hold in the index for search?
[2013-08-23 14:20:33 -0400] cpuguy83: mattupstate: That I could not tell you.
[2013-08-23 14:23:39 -0400] ncraike: So, an example of me trying to re-bootstrap the node to update chef-client: http://pastebin.com/eSsiiHzC
[2013-08-23 14:24:08 -0400] ncraike: - that's just the start of the run. Eventually it runs the recipes, and complains about me using "lazy", which is new in 11.6.0
[2013-08-23 14:24:24 -0400] gchristensen: ncraike: you don't need to re-bootstrap, you can just re-run curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2013-08-23 14:25:08 -0400] gchristensen: ncraike: or you can use the omnibus_updater cookbook
[2013-08-23 14:25:27 -0400] fishGoM00: gchristensen: nod
[2013-08-23 14:25:41 -0400] gchristensen: hrm?
[2013-08-23 14:25:58 -0400] gchristensen: ah
[2013-08-23 14:26:14 -0400] ncraike: Ah, okay. I was hoping there was a better way than curling and running arbitrary shell scripts from opscode. That might do for now, and I'll have a look at the omnibus_updater cookbook.
[2013-08-23 14:26:32 -0400] gchristensen: ncraike: I believe that is what the bootstrap does
[2013-08-23 14:26:47 -0400] ncraike: Ah, okay
[2013-08-23 14:27:43 -0400] gchristensen: ncraike: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb#L13-L25
[2013-08-23 14:27:56 -0400] gchristensen: and it only installs chef if it isn't installed
[2013-08-23 14:28:46 -0400] ncraike: Right.
[2013-08-23 14:29:58 -0400] ncraike: Okay, I've run that curl and bash, and it's updated the node to 11.6. Thanks for the help.
[2013-08-23 14:30:32 -0400] gchristensen: surely
[2013-08-23 14:31:07 -0400] gchristensen: any advice on how to take all nodes in environment A and move them to environment B?
[2013-08-23 14:34:02 -0400] adnichols: gchristensen at some point I saw an exec script to move the environment for a given node - assume that combined w/ a search would do
[2013-08-23 14:35:46 -0400] gchristensen: hrmm okay
[2013-08-23 14:36:13 -0400] adnichols: http://comments.gmane.org/gmane.comp.sysutils.chef.user/2641
[2013-08-23 14:36:20 -0400] adnichols: not a solution - but hints at the existence of one
[2013-08-23 14:38:06 -0400] adnichols: also apparently this if you just want to move all nodes in an environment to another: knife exec -E nodes.transform(chef_environment:_default) { |n| n.chef_environment(production-VM) }
[2013-08-23 14:38:39 -0400] gchristensen: hrmmm cool
[2013-08-23 14:38:48 -0400] gchristensen: that last one looks promising, I'll give it a try. thank you!
[2013-08-23 14:38:53 -0400] adnichols: np
[2013-08-23 14:38:59 -0400] gchristensen: hah! smart quotes. even better.
[2013-08-23 14:51:12 -0400] cpuguy83: OMG, my entire problem with getting chef clients to check in properly is mtu...  Oh mtu
[2013-08-23 14:53:53 -0400] fclausen: hello all - is there a way to create new node attributes from within a recipe?
[2013-08-23 14:54:07 -0400] gchristensen: sure, set them
[2013-08-23 15:00:04 -0400] fclausen: thanks gchristensen, I am testing that.
[2013-08-23 15:00:27 -0400] fclausen: next question - when I search for node attributes, in a recipe, which precedence level will it match on?
[2013-08-23 15:01:02 -0400] gchristensen: fclausen: depends if you use node.set node.default node.override etc
[2013-08-23 15:01:57 -0400] fishGoM00: Attribute Precedence details found here:
[2013-08-23 15:01:58 -0400] fishGoM00: http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-08-23 15:01:58 -0400] gchristensen: fclausen: check out this article: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-08-23 15:02:06 -0400] gchristensen: ^ and that one
[2013-08-23 15:02:12 -0400] fishGoM00: hehe
[2013-08-23 15:03:17 -0400] fclausen: thanks gchristensen, I saw that blog post too - most useful.
[2013-08-23 15:03:27 -0400] gchristensen: I found tehblog post more useful for recipe-specific stuff
[2013-08-23 15:03:59 -0400] fclausen: one more question - it is not clear to me how I tell search() which precedence level I want to search at.
[2013-08-23 15:04:40 -0400] fclausen: e.g. search(:node, "some_attr:bla") does not specify which precedence level will be looked at
[2013-08-23 15:05:34 -0400] subway: Any good rule of thumb on mixing chef client and server versions?
[2013-08-23 15:06:16 -0400] fishGoM00: keep the client up to date is my best advice :)
[2013-08-23 15:06:40 -0400] subway: So nothing is going to blow up if I'm using a Chef 11 client against a Chef 10 server?
[2013-08-23 15:06:52 -0400] fishGoM00: esp. with the 'memory leak' and fork bomb issues prior to client 11.6.0
[2013-08-23 15:07:12 -0400] fishGoM00: umm, ymmv :)
[2013-08-23 15:07:49 -0400] subway: I know with Puppet the client had to be the same version or older than the master.
[2013-08-23 15:08:04 -0400] subway: I figured I'd ask before I started running into "Weird Shit" after upgrading.
[2013-08-23 15:09:32 -0400] fishGoM00: I think if you curl the install.sh script from here
[2013-08-23 15:09:33 -0400] fishGoM00: http://www.opscode.com/chef/install/
[2013-08-23 15:09:56 -0400] fishGoM00: it will use the latest version possible,  test on a single node first :)
[2013-08-23 15:10:52 -0400] gchristensen: lol, moving all your nodes from one enviroment to another causes some weird stuff to happen for a few minutes :)
[2013-08-23 15:15:28 -0400] fishGoM00: as weird as this? http://cdn.cramdodge.com/wp-content/uploads/2013/05/WEIRD-STUFF.jpg
[2013-08-23 15:15:56 -0400] fishGoM00: or weirder?
[2013-08-23 15:16:18 -0400] gchristensen: fishGoM00: well, its about what you would expect - nodes being taken out of rotation that maybe you prefered didn't get taken out :)
[2013-08-23 15:17:29 -0400] fishGoM00: I know such a move would break many of the nodes I have :)
[2013-08-23 15:18:11 -0400] gchristensen: fishGoM00: I generally prefer to rip the bandaid off :)
[2013-08-23 15:19:46 -0400] fishGoM00: hehehe
[2013-08-23 15:20:11 -0400] fishGoM00: fortune favours the brave :)
[2013-08-23 15:26:12 -0400] fclausen: gchristensen: to close the loop here - if I create my node attribute at the "normal" precedence level then I can find it in subsequent searches. I was making it at the "default" level whereby search() could not find it for some reason
[2013-08-23 15:26:39 -0400] gchristensen: fclausen: odd, but okay
[2013-08-23 15:33:29 -0400] EricL: If I were to send in a pull request to the opscode Nagios cookbook, how likely would it be to get merged?  It would be a patch to generate time periods from a data bag?
[2013-08-23 15:34:02 -0400] EricL: With some pull requests open for a year, it almost doesn't look worth it.
[2013-08-23 15:35:36 -0400] xhae: EricL: I think this is essential reading: http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-08-23 15:35:57 -0400] gchristensen: EricL: if you go through How To Contribute and follow the rules, very good chance.
[2013-08-23 15:38:38 -0400] EricL: Hmm, that's a lot of work.  No wonder so many people just fork it.
[2013-08-23 15:38:47 -0400] EricL: Ok, thanks.
[2013-08-23 15:39:30 -0400] xhae: It would take literally years to get legal tosign that CCLA, so I won't be submitting pull requests.
[2013-08-23 15:40:40 -0400] techminer: EricL:  It's not that bad.  I did a pull request on a cookbook and it was in within 3 months.  Kind of depends on the maintainer of the cookbook.  Until then I just ran off my fork.
[2013-08-23 15:41:43 -0400] EricL: We maintain a few open source things at my company.  Barrier to entry is a serious problem in open source.
[2013-08-23 15:44:21 -0400] chef_newbie: hello...i am new to chef...im using remote_directory to copy whole bunch of content, however it work in centos6 but not on centos5...can someobody please tell me what am i doing wrong?
[2013-08-23 15:44:47 -0400] bean__: chef_newbie: usually a stack trace is helpful in troubleshooting :)
[2013-08-23 15:45:22 -0400] chef_newbie: there is no stack trace ...it doesnt fail
[2013-08-23 15:45:29 -0400] chef_newbie: it just doesnt copy the files over
[2013-08-23 15:45:48 -0400] chef_newbie: it creates the dir but does not copy any content
[2013-08-23 15:46:17 -0400] bean__: are they both running the same chef client version?
[2013-08-23 15:46:50 -0400] chef_newbie: yes
[2013-08-23 15:47:19 -0400] bean__: hmm
[2013-08-23 15:47:25 -0400] bean__: could try turning up the log level
[2013-08-23 15:47:29 -0400] bean__: and looking at it that way
[2013-08-23 15:47:58 -0400] chef_newbie: here is the snippet from my recipe that works on centos 6 and not on centos 5
[2013-08-23 15:48:00 -0400] chef_newbie:  remote_directory "/usr/local/myDir" do
[2013-08-23 15:48:01 -0400] chef_newbie: source "usr/local/myDir"
[2013-08-23 15:48:01 -0400] chef_newbie: action :create_if_missing
[2013-08-23 15:48:01 -0400] chef_newbie: owner "me"
[2013-08-23 15:48:01 -0400] chef_newbie: group "everybody"
[2013-08-23 15:48:01 -0400] chef_newbie: files_mode 00755
[2013-08-23 15:48:02 -0400] chef_newbie: end
[2013-08-23 15:48:38 -0400] chef_newbie: im running it in debug mode now..just give me sec
[2013-08-23 15:49:30 -0400] bean__: wait, you're using remote_directory with a local source?
[2013-08-23 15:50:51 -0400] chef_newbie: ahh yes iam using remote directory with local source
[2013-08-23 15:50:56 -0400] chef_newbie: is that not the right way?
[2013-08-23 15:52:09 -0400] bean__: i haven't had much sleep, sry, that should work
[2013-08-23 15:52:11 -0400] chef_newbie: The remote_directory resource is used to recursively transfer a directory from a cookbooks files or default directory. A remote directory will obey file specificity; the directory that will be copied should be located under COOKBOOK_NAME/files/default/REMOTE_DIRECTORY. A host-or distribution-specific path can also be used.
[2013-08-23 15:52:17 -0400] chef_newbie: oh ok
[2013-08-23 15:52:17 -0400] bean__: yeah
[2013-08-23 15:52:39 -0400] chef_newbie: here is the spam from the debug mode:
[2013-08-23 15:52:44 -0400] bean__: paste bin
[2013-08-23 15:52:44 -0400] chef_newbie: * remote_directory[/usrr/local/kapps] action create_if_missing[2013-08-23T10:33:12-05:00] INFO: Processing remote_directory[/usr/local/myDir] action create_if_missing (myrecipe::default line 37)
[2013-08-23 15:52:44 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found target_mode == nil, so no mode was specified on resource, not managing mode
[2013-08-23 15:52:45 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found current_uid == nil, so we are creating a new file, updating owner
[2013-08-23 15:52:45 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found target_mode == nil, so no mode was specified on resource, not managing mode
[2013-08-23 15:52:45 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found current_uid == nil, so we are creating a new file, updating owner
[2013-08-23 15:52:45 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found current_gid == nil, so we are creating a new file, updating group
[2013-08-23 15:52:45 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found current_uid == nil, so we are creating a new file, updating owner
[2013-08-23 15:52:45 -0400] bean__: plz
[2013-08-23 15:52:46 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] INFO: remote_directory[/usr/local/myDir] owner changed to 1200
[2013-08-23 15:52:46 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found current_gid == nil, so we are creating a new file, updating group
[2013-08-23 15:52:46 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] INFO: remote_directory[/usr/local/myDir] group changed to 1200
[2013-08-23 15:52:47 -0400] chef_newbie: [2013-08-23T10:33:12-05:00] DEBUG: found target_mode == nil, so no mode was specified on resource, not managing mode
[2013-08-23 15:52:47 -0400] chef_newbie: - change owner from '' to 'me'
[2013-08-23 15:52:48 -0400] chef_newbie: - change group from '' to 'everybody'[2013-08-23T10:33:12-05:00] DEBUG: selinux utilities can not be found. Skipping selinux permission fixup.
[2013-08-23 15:52:48 -0400] bean__: noooooooooo
[2013-08-23 15:52:48 -0400] chef_newbie: Recipe: <Dynamically Defined Resource>
[2013-08-23 15:52:49 -0400] scarolan: pastebin please
[2013-08-23 15:52:50 -0400] bean__: nooooooooo
[2013-08-23 15:52:51 -0400] scarolan: argghhhhh
[2013-08-23 15:52:53 -0400] chef_newbie: ohh
[2013-08-23 15:52:53 -0400] chef_newbie: sorry
[2013-08-23 15:52:55 -0400] jrichard: lol
[2013-08-23 15:52:56 -0400] chef_newbie: too late :(
[2013-08-23 15:53:20 -0400] jrichard: gist.github.com
[2013-08-23 15:53:30 -0400] bean__: could it be the /usrr/
[2013-08-23 15:53:33 -0400] bean__: instead of /usr/
[2013-08-23 15:53:45 -0400] bean__: or thats likely just the name
[2013-08-23 15:54:23 -0400] bean__: chef_newbie: can you pastebin that portion oft he cookbook?
[2013-08-23 15:54:26 -0400] bean__: err
[2013-08-23 15:54:27 -0400] bean__: the recipe
[2013-08-23 15:54:57 -0400] chef_newbie: ok
[2013-08-23 15:56:19 -0400] jrichard: ill take over for chef_newbie
[2013-08-23 15:56:25 -0400] jrichard: http://pastebin.com/HvFjt8ky
[2013-08-23 15:56:35 -0400] jrichard: that is the recipe snippet for the remote directory
[2013-08-23 15:57:17 -0400] jrichard: http://pastebin.com/iAwgVK5r
[2013-08-23 15:57:23 -0400] jrichard: that is the debug log from the run
[2013-08-23 15:58:13 -0400] jrichard: it worked on cent 6.4 but not cent 5.8, both machines are running chef client 11.6.0
[2013-08-23 15:58:46 -0400] d```: jrichard: what version of ruby?
[2013-08-23 15:58:50 -0400] d```: on each system?
[2013-08-23 15:59:49 -0400] jrichard: Its embedded in chef, ruby 1.9.3p429
[2013-08-23 16:00:09 -0400] jrichard: on both systems
[2013-08-23 16:02:24 -0400] scarolan: This doesn't look right:
[2013-08-23 16:02:26 -0400] scarolan:   source "usr/local/myDir"
[2013-08-23 16:02:28 -0400] mattsimon: jtrichard: I missed the first part of your issue, but if you are having Ruby issues, keep in mind Ruby gets installed twice by Chef, 1) as normal system library to bootstrap the Chef Client installation, and 2) the embedded version you reffered to
[2013-08-23 16:03:25 -0400] jrichard: i believe thats how you define a local source in the cookbook files, for remote_directory, scarolan -- i could be wrong though. I thought that line would just use the typical file specificity to decide where in /files to copy from
[2013-08-23 16:03:38 -0400] scarolan: Where is "myDir" in your cookbook?
[2013-08-23 16:04:28 -0400] jrichard: basically cookbook/files/default/usr/local/myDir
[2013-08-23 16:05:58 -0400] scarolan: jrichard: I don't think you have to duplicate all the subdirs in the cookbook.  The name of the destination should take care of that for you.
[2013-08-23 16:06:14 -0400] scarolan: jrichard: try it like this:
[2013-08-23 16:06:25 -0400] scarolan: source "myDir"
[2013-08-23 16:06:36 -0400] scarolan: where myDir just sits right inside the default files directory
[2013-08-23 16:07:11 -0400] mattsimon: Can anyone help me with a question about the various OSS libraries that get compiled during the Omnibus package generation? For instance, does zLib compile in everything from the /contrib/ directory or only compiles the "standard" zLib files without all the extra stuff in /contrib/?
[2013-08-23 16:07:27 -0400] scarolan: jrichard: The docs page suggests:   the directory that will be copied should be located under COOKBOOK_NAME/files/default/REMOTE_DIRECTORY
[2013-08-23 16:08:08 -0400] erthad: hiall
[2013-08-23 16:08:31 -0400] fishGoM00: m00
[2013-08-23 16:08:37 -0400] erthad: is there a central entry point at opsode site etc for publishing knife plugins?
[2013-08-23 16:08:39 -0400] jrichard: hum. That actually worked, scarolan -- i wonder why it seemed to work on cent 6.4 the other way
[2013-08-23 16:08:52 -0400] bean__: erthad: typically one would just publish it to github :)
[2013-08-23 16:08:54 -0400] scarolan: jrichard: Same version of chef?
[2013-08-23 16:09:01 -0400] jkeiser: erthad: nope
[2013-08-23 16:09:13 -0400] jkeiser: erthad: generally plugins are named knife-something
[2013-08-23 16:09:28 -0400] jrichard: Yeah -- same version of chef, ruby, same recipe -- different OS
[2013-08-23 16:09:32 -0400] jkeiser: And people announce to the chef mailing list / IRC when they have made something cool
[2013-08-23 16:10:09 -0400] erthad: jkeiser: bean__: ok, thanks
[2013-08-23 16:11:22 -0400] dgarstang: So... anyone using -w with knife ec2 server create successfully?
[2013-08-23 16:13:11 -0400] bean__: dgarstang: have you tried putting your key on the gateway box?
[2013-08-23 16:15:17 -0400] scarolan: jrichard: Very weird...i'm not sure why it would work on one and not the other.  Probably best to stick with the docs way of doing things, for consistency's sake.
[2013-08-23 16:15:59 -0400] jrichard: Yeah, score another case of RTFM for me :)
[2013-08-23 16:16:04 -0400] jrichard: thanks for the help
[2013-08-23 16:17:32 -0400] martinisoft: Anyone able to help me with a weird EncryptedDataBag problem?
[2013-08-23 16:21:03 -0400] miah: what is the problem
[2013-08-23 16:34:17 -0400] a_c_m_: when picking chef, did people mostly just pick it outright, or did you evaluate puppet as well?
[2013-08-23 16:34:51 -0400] gchristensen: I just picked chef ...
[2013-08-23 16:36:41 -0400] dgarstang: bean__: you mean the private one?
[2013-08-23 16:37:18 -0400] bean__: yes, the key you need to SSH with
[2013-08-23 16:37:28 -0400] bean__: rather than trying to agent forward
[2013-08-23 16:37:45 -0400] dgarstang: bean__: No... because my boss will kill me. :)
[2013-08-23 16:37:59 -0400] bean__: heh
[2013-08-23 16:38:01 -0400] bean__: k
[2013-08-23 16:38:18 -0400] dgarstang: bean__: I could do it as a data gathering exercise. I'll do that
[2013-08-23 16:39:07 -0400] bean__: yeah, i'd say its wortha shot
[2013-08-23 16:45:12 -0400] jmickle: does anyone use graphite to graph cpu with collectd?
[2013-08-23 16:46:10 -0400] miah: a_c_m_: i used cfengine, then puppet, then chef =)
[2013-08-23 16:46:24 -0400] a_c_m_: and what made you go from puppet to chef?
[2013-08-23 16:46:29 -0400] a_c_m_: and what do you miss?
[2013-08-23 16:46:48 -0400] miah: puppets dsl was too restrictive and i wanted more ruby.
[2013-08-23 16:46:50 -0400] miah: i miss nothing.
[2013-08-23 16:47:03 -0400] jmickle: miah: do you use cpu on collectd into graphite?
[2013-08-23 16:47:10 -0400] miah: fwiw, i was using puppet ~4 years ago =)
[2013-08-23 16:47:23 -0400] a_c_m_: yeah i think they let you use ruby now as well
[2013-08-23 16:47:36 -0400] miah: jmickle: i think we do, i havent looked at our graphite stuff yet. been neck deep in elasticsearch and logstash
[2013-08-23 16:47:47 -0400] miah: a_c_m_: yes, but the DSL is the primary way to build puppet modules
[2013-08-23 16:47:54 -0400] jmickle: miah: got it, do you by chance know anything about converting from the CPU jiffies into a percentage?
[2013-08-23 16:48:01 -0400] miah: nope
[2013-08-23 16:48:11 -0400] jmickle: d'oh
[2013-08-23 16:48:12 -0400] a_c_m_: true
[2013-08-23 16:48:25 -0400] miah: jmickle: you could ask the same question in..
[2013-08-23 16:48:36 -0400] miah: ##simple
[2013-08-23 16:48:41 -0400] miah: jake there might be able to help =)
[2013-08-23 16:48:49 -0400] jmickle: okies ty
[2013-08-23 16:49:14 -0400] miah: also, i feel like the way i mentally map resources works best in chef
[2013-08-23 16:50:22 -0400] a_c_m_: miah: i am coming from a small puppet install, exploring chef as a solution as we scale up
[2013-08-23 16:50:45 -0400] a_c_m_: one thing i've found so far, it is seems where as in puppet the "right" ways to do thing was quite well defined, in Chef its much more freeform
[2013-08-23 16:50:56 -0400] a_c_m_: and so in a little more confusing
[2013-08-23 16:51:11 -0400] adnichols: a_c_m_ I call that flexibility :)
[2013-08-23 16:51:17 -0400] a_c_m_: e.g. Librarian vs Berkshelf
[2013-08-23 16:51:42 -0400] a_c_m_: adnichols: ha, your not wrong, but for someone trying to get started its adds a few degrees to the learning cliff
[2013-08-23 16:52:05 -0400] adnichols: a_c_m_ yep, it does - I started w/ puppet as well but have moved to chef - it works better for me
[2013-08-23 16:52:07 -0400] miah: novices need fewer choices
[2013-08-23 16:52:14 -0400] miah: so puppet migh be best for now.
[2013-08-23 16:52:31 -0400] dgarstang: a_c_m_: freeform is bad. :)
[2013-08-23 16:52:33 -0400] miah: but ya. chef is more like.. rails. it has some rough guidelines. but opscode tries really hard to not tell you how to do things.
[2013-08-23 16:52:40 -0400] miah: i personally think most people doing chef do it wrong =)
[2013-08-23 16:52:56 -0400] a_c_m_: yeah, thats sort of my point
[2013-08-23 16:52:59 -0400] dgarstang: miah: which is why some best pratices would be nice
[2013-08-23 16:53:27 -0400] adnichols: I'm absolutely certain I "do it wrong" often - but it turns out to work for me and most of the folks I work with
[2013-08-23 16:53:38 -0400] miah: my experience is different than others though. i've been doing config management since early 2000's
[2013-08-23 16:53:48 -0400] dgarstang: refactoring because you did it wrong is a total waste of time and money
[2013-08-23 16:53:50 -0400] miah: adnichols: yep
[2013-08-23 16:53:55 -0400] miah: thats fine
[2013-08-23 16:53:58 -0400] a_c_m_: these are my notes so far in what i've been playing with : http://acmconsulting.eu/post/59099043127/chef-the-devops-kind-not-the-shouty-restaurant-kind
[2013-08-23 16:54:17 -0400] miah: my problem mostly is around community cookbooks that build abstract resources out of the resource primitives
[2013-08-23 16:54:18 -0400] adnichols: dgarstang also, trying to predict every possible problem you'll have is a similar waste
[2013-08-23 16:54:23 -0400] adnichols: I prefer the refactor
[2013-08-23 16:54:36 -0400] dgarstang: adnichols: guidelines, best practices, not '1984'
[2013-08-23 16:54:38 -0400] adnichols: to each their own
[2013-08-23 16:54:59 -0400] adnichols: dgarstang I found sufficient examples out there to establish some good guidelines for me
[2013-08-23 16:55:11 -0400] adnichols: they just aren't all on the opscode site with a nice table of contents
[2013-08-23 16:55:16 -0400] miah: the guidelines i typically follow are things defined by the ruby, and oop communities
[2013-08-23 16:55:20 -0400] dgarstang: adnichols: unlike puppet
[2013-08-23 16:55:30 -0400] miah: because honestly, most sysadmins know jack all about programming
[2013-08-23 16:56:05 -0400] adnichols: dgarstang yep - perhaps, but that's a pretty minor factor for me
[2013-08-23 16:56:05 -0400] miah: im still learning, but im trying to incorporate those techniques into my cookbook development
[2013-08-23 16:56:08 -0400] a_c_m_: sysadmins are going to have to learn ;)
[2013-08-23 16:56:14 -0400] miah: concentrating mostly on writing library based cookbooks
[2013-08-23 16:56:31 -0400] dgarstang: maybe devs should learn a thing or too as well. :)
[2013-08-23 16:56:37 -0400] miah: https://github.com/miah/chef_logstash and https://github.com/SimpleFinance/chef-elasticsearch serve as examples
[2013-08-23 16:56:54 -0400] dgarstang: like... we have devs coming over with new stuff... how do you run it? errr, ./foo.py ?
[2013-08-23 16:57:00 -0400] adnichols: dgarstang in my company they have - a number of devs have picked up chef - easy for them because it's ruby
[2013-08-23 16:57:07 -0400] miah: im working on pulling a pattern out of those and putting it into a class that can be subclassed to easily build instances of specific pieces of software
[2013-08-23 16:57:38 -0400] miah: because 90% of chef cookbooks are "install package, configure service, manage service"
[2013-08-23 16:57:42 -0400] dgarstang: adnichols: i'm not talking about chef. i'm talking about things like how do you deploy it, how do you scale it? Why did you hard code config in the damn script? Instrumentation? What's that?
[2013-08-23 16:57:49 -0400] miah: i've taken that abstraction and built it into a reusable pattern
[2013-08-23 16:58:00 -0400] adnichols: dgarstang ah, yeah - and in those cases I have to define a pattern and they just copy it
[2013-08-23 16:58:46 -0400] adnichols: sometimes that sucks when my pattern isn't good :) But so it goes
[2013-08-23 16:58:46 -0400] BlakeRG: if i am using the package resource and looping over an array of packages does chef install them one by one?
[2013-08-23 16:58:53 -0400] miah: BlakeRG: yes
[2013-08-23 16:59:11 -0400] miah: because the enumerator only presents a single result each iteration
[2013-08-23 16:59:20 -0400] BlakeRG: miah: any way to fix that? I've got one package thats supposed to override another one and i get dependency problems
[2013-08-23 16:59:34 -0400] BlakeRG: or should i just change the order in which they install?
[2013-08-23 16:59:47 -0400] miah: change the order
[2013-08-23 17:00:59 -0400] BlakeRG: miah: trying that now :)
[2013-08-23 17:33:13 -0400] BlakeRG: miah: yeah, i just had to change the order in which packages are installed
[2013-08-23 17:43:53 -0400] InvidFlower: Anyone know how I could reset the main password for my local instance?
[2013-08-23 17:43:55 -0400] InvidFlower: Somehow I managed to lock myself out
[2013-08-23 17:43:56 -0400] InvidFlower: oops wrong room sorry
[2013-08-23 17:45:42 -0400] jve: InvidFlower: careful, you might accidentally type your password for the world ;)
[2013-08-23 17:46:04 -0400] InvidFlower: jve haha.. well that's exactly my problem is not knowing the password ;)
[2013-08-23 17:46:39 -0400] jve: i've been known to paste the weirdest things into IRC cause i wasn't paying attention
[2013-08-23 17:48:51 -0400] gchristensen: I've had to invalidate entire apt repos due to it...
[2013-08-23 17:49:54 -0400] jve: ooo, blast...
[2013-08-23 17:50:48 -0400] gchristensen: the guy pastedthe key and password to a public pastebin
[2013-08-23 17:50:59 -0400] jve: -_-
[2013-08-23 17:51:11 -0400] gchristensen: I gave him his warning and said if he ever was so silly again he'd probably be looking for a job.
[2013-08-23 18:03:33 -0400] afirth: anyone have a workaround to get syslog for chef-client working in 11.6?
[2013-08-23 18:04:33 -0400] afirth: pretty much dead from https://github.com/opscode/chef/commit/43d01dcc6bfc44571d72a2e9bc4f32524f547ea7
[2013-08-23 18:05:10 -0400] gchristensen: afirth: I ended up reverting to 11.4 :(
[2013-08-23 18:07:05 -0400] zahna:  can only be staticly defined in a json file?
[2013-08-23 18:07:24 -0400] afirth: k. I think it could be fixed pretty easily by using monologger for a file location and syslog for syslog. logic like https://github.com/opscode/cookbooks/pull/341/files#L3R3
[2013-08-23 18:07:32 -0400] zahna: just came across this in chef docs, "chef-solo does not allow roles".  does this mean that chef-solo run_lists can only be staticly defined in a json file?
[2013-08-23 18:09:32 -0400] zahna: i might not be asking my question correctly.  i'm still really new with chef.
[2013-08-23 18:12:36 -0400] adnichols: zahna afaik chef-solo does support roles
[2013-08-23 18:12:45 -0400] adnichols: http://docs.opscode.com/chef_solo.html
[2013-08-23 18:42:52 -0400] zahna: ok, then i guess my question is better asked: does chef-solo support dynamically assembled run_lists, say based on ohai attributes?
[2013-08-23 18:43:13 -0400] zahna: all the examples I've seen only show static run_lists specified in a json file
[2013-08-23 18:53:11 -0400] suffix_: how can I output the result of a bash command to console at specific points in a bash run
[2013-08-23 18:55:20 -0400] adnichols: zahna I'm not sure what you mean by a dynamically assembled run_list - do you have an example in a non chef-solo context?
[2013-08-23 18:59:10 -0400] dgarstang: I'm running knife ec2 server create. The bootstrap fails with 'Invalid signature for user or client 'chef-validator'', but if I immediately run chef-client it's ok.. 'sup with that?
[2013-08-23 19:01:16 -0400] adnichols: zahna I'm not aware of anywhere you can place attribute based logic other than inside a recipe - hence you can choose to include_recipe to alter what gets run but that doesn't technically modify the run_list
[2013-08-23 19:02:27 -0400] adnichols: I suppose you could also edit the node inside a recipe to modify the run_list - not sure how prickly that might become
[2013-08-23 19:14:22 -0400] bean__: dgarstang: is there already a validation.pem on the server before you start to bootstrap
[2013-08-23 19:14:22 -0400] bean__: ?
[2013-08-23 19:15:45 -0400] bean__: or is it a completely fresh node
[2013-08-23 19:16:05 -0400] fly9: hey if I had a knife bootstrap command that failed, how can I retry without recreating the machine I built originially?
[2013-08-23 19:16:20 -0400] bean__: just bootstrap again?
[2013-08-23 19:16:21 -0400] bean__: :)
[2013-08-23 19:17:24 -0400] dgarstang: I have an amazon image with the validation.pem file baked in. It looks like (based on time stamp) that the chef bootstrap process rewrites it!?
[2013-08-23 19:17:32 -0400] bean__: of course?
[2013-08-23 19:19:03 -0400] bean__: the default template for bootstrapping does
[2013-08-23 19:19:07 -0400] bean__: cat > /etc/chef/validation.pem <<'EOP'
[2013-08-23 19:19:08 -0400] bean__: <%= validation_key %>
[2013-08-23 19:19:08 -0400] bean__: EOP
[2013-08-23 19:19:21 -0400] dgarstang: bean__: Where does it get it from?
[2013-08-23 19:19:28 -0400] bean__: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/ubuntu12.04-gems.erb#L18
[2013-08-23 19:20:11 -0400] bean__: and validation key is defined in your knife.rb
[2013-08-23 19:20:26 -0400] bean__: validation_key           "#{ENV['HOME']}/.chef/hosted/validation.pem"
[2013-08-23 19:20:42 -0400] dgarstang: bean__: oic
[2013-08-23 19:21:22 -0400] julian-delphiki: you could write your own bootstrap template
[2013-08-23 19:21:24 -0400] julian-delphiki: that doesn't replace it
[2013-08-23 19:21:25 -0400] julian-delphiki: if you wanted
[2013-08-23 19:24:23 -0400] fly9: is there a knife-digital_ocean implementation for solo bootstrap using berkshelf?
[2013-08-23 19:25:08 -0400] dgarstang: julian-delphiki: nah I think that works for now. DInd't know it copied validation.pem out
[2013-08-23 19:25:14 -0400] julian-delphiki: yep
[2013-08-23 19:25:17 -0400] julian-delphiki: no need to bake it
[2013-08-23 19:25:23 -0400] dgarstang: julian-delphiki: roight
[2013-08-23 19:26:23 -0400] donaldguy: so, forgoing the fact that it shouldn't be necessary, what is the easiest way to determine the OS from a provider?
[2013-08-23 19:26:28 -0400] donaldguy: (inside a provider)
[2013-08-23 19:26:53 -0400] BlakeRG: anyone have an idea as to why this does not work despite that the file is there? https://gist.github.com/anonymous/5538a487b48e0fdf5619
[2013-08-23 19:27:19 -0400] julian-delphiki: BlakeRG: what do you get for a stack trace?
[2013-08-23 19:27:40 -0400] BlakeRG: julian-delphiki: i don't get any errors at all, it's like nothing happened
[2013-08-23 19:27:53 -0400] BlakeRG: would it be a problem is the RPM is a custom compiled one and not signed?
[2013-08-23 19:28:04 -0400] julian-delphiki: unless manually installing it also doesn't work :()
[2013-08-23 19:28:06 -0400] julian-delphiki: :)
[2013-08-23 19:29:05 -0400] BlakeRG: what tha..... /tmp/php53u-pecl-gearman-1.1.1-1.x86_64.rpm: not an rpm package (or package manifest):
[2013-08-23 19:29:12 -0400] BlakeRG: need to check on this one..
[2013-08-23 19:29:20 -0400] julian-delphiki: that'd likely do it
[2013-08-23 19:29:21 -0400] julian-delphiki: :)
[2013-08-23 19:34:07 -0400] dgarstang: So, knife ec2's bootstrap... the template has config_content for the client.rb... where would that come from?
[2013-08-23 19:37:05 -0400] julian-delphiki: let me check
[2013-08-23 19:40:37 -0400] julian-delphiki: dgarstang: https://github.com/opscode/chef/blob/master/lib/chef/knife/core/bootstrap_context.rb#L63
[2013-08-23 19:41:09 -0400] dgarstang: julian-delphiki: inline. works for me. :)
[2013-08-23 19:41:13 -0400] julian-delphiki: yep
[2013-08-23 19:41:27 -0400] dgarstang: julian-delphiki: cool, thanks. :)
[2013-08-23 19:41:30 -0400] julian-delphiki: np
[2013-08-23 19:49:40 -0400] Tom_: Anyone know if chef-solo 11.6.0 can work with environments?
[2013-08-23 19:53:44 -0400] _gmh_: Tom_: https://github.com/opscode/chef/pull/359
[2013-08-23 19:54:08 -0400] Tom_: I saw that, but it doesn't seem to work for me.
[2013-08-23 19:54:27 -0400] _gmh_: haven't actually tried it myself
[2013-08-23 19:55:05 -0400] Tom_: I put a valid environment rb file that gets uploaded to the chef server in the /var/chef/environments directory, but it seems to be ignored.
[2013-08-23 19:57:39 -0400] BlakeRG: i'm having an odd problem... when my chef script downloads a file the hash does not match, if i just wget or curl the file its fine... https://gist.github.com/anonymous/2192700ae10a949dffe3 any ideas?
[2013-08-23 19:58:29 -0400] kl4m: BlakeRG: I have this hash 45832ceb0b78fd39d23afb9bd0a98f33678717fa4ad21f329707765ad390e429
[2013-08-23 19:58:50 -0400] BlakeRG: this is nuts...
[2013-08-23 19:59:22 -0400] BlakeRG: what the hell is going on
[2013-08-23 19:59:24 -0400] kl4m: oh wait
[2013-08-23 19:59:30 -0400] kl4m: I get an html file
[2013-08-23 19:59:36 -0400] BlakeRG: WAT
[2013-08-23 19:59:38 -0400] BlakeRG: ugh
[2013-08-23 19:59:58 -0400] afirth: dropbox might be sending you a login screen, or a different version of the file, or something with metadata in it?
[2013-08-23 19:59:58 -0400] BlakeRG: hahahaha
[2013-08-23 20:00:03 -0400] BlakeRG: ok, this makes sense now.....
[2013-08-23 20:00:08 -0400] BlakeRG: yep
[2013-08-23 20:00:09 -0400] BlakeRG: my god
[2013-08-23 20:01:48 -0400] Tom_: Ran strace on chef-solo and it does not seem to ever check /var/chef/environments
[2013-08-23 20:02:52 -0400] BlakeRG: hah that was the problem kl4m
[2013-08-23 20:03:17 -0400] btm: @opscode cookbook code review: join: https://plus.google.com/hangouts/_/ce8db881b49f2d5bc062d749da331e10bc0a6dbc, watch: http://youtu.be/VPRpMChwloY
[2013-08-23 20:22:04 -0400] Liquid--: Hey all, I'm trying to get ideas on how to add users to mysql or mongodb. I ended up writing a custom cookbook to add users to MySQL but I'm interested to know how other people are solving this problem.
[2013-08-23 20:22:21 -0400] gchristensen: Liquid--: look at the database cookbook :)
[2013-08-23 20:22:35 -0400] gchristensen: Liquid--: https://github.com/opscode-cookbooks/database
[2013-08-23 20:26:00 -0400] Liquid--: gchristensen: thank you, this is awesome. I'm working mostly with mongodb right now though. I supposes at this point I would just need to hack on this cookbook. Unless there are more mongodb specific cookbooks out there.
[2013-08-23 21:36:38 -0400] naterator: hi all  looking for a bit of advice regarding dev-prod chef workflow/lifecycle where dev and prod are completely isolated, each with a chef instance. right now cookbooks are in git. i have a script that watches for role and databag changes in prod and pushes them into git, so at least that's version controlled as well. how would you approach maintaining a consistent configuration between the two chef environments? once something'
[2013-08-23 22:06:16 -0400] BlueKayak: I'm doing some testing again chef-zero, is there a knife command (or similar) to view contents of a recipe file on the server?
[2013-08-23 22:06:29 -0400] BlueKayak: *against* not again
[2013-08-23 22:06:39 -0400] afirth: check out knife-essentials
[2013-08-23 22:06:46 -0400] BlueKayak: I fooled around with knife cookbook show, to no avail
[2013-08-23 22:07:18 -0400] jkeiser: knife show /cookbooks/NAME/recipes/RECIPE.rb
[2013-08-23 22:07:31 -0400] jkeiser: It's in knife-essentials, or if you have Chef 11 that should work too
[2013-08-23 22:08:22 -0400] BlueKayak: oh cool, thx guys!  it's a chef(11)-zero server so let me try this method first:  'knife show /cookbooks/NAME/recipes/RECIPE.rb'
[2013-08-23 22:09:26 -0400] BlueKayak: Thanks -- that worked perfectly. Sweet
[2013-08-23 22:10:11 -0400] BlueKayak: Anybody else here write a custom chef (wrapper) cookbook to customize the Opscode Nagios cookbook?
[2013-08-23 22:10:43 -0400] afirth: yeah
[2013-08-23 22:11:25 -0400] BlueKayak: Cool, I'm trying to use a pre-existing (not chef-managed) Nagios 3 server, and just use the client recipe
[2013-08-23 22:11:30 -0400] afirth: just a separate cookbook here called nagios_configs - puts our site specific stuff in place
[2013-08-23 22:11:37 -0400] afirth: ^don't :P
[2013-08-23 22:11:53 -0400] afirth: o you mean for nrpe?
[2013-08-23 22:11:56 -0400] BlueKayak: DOH!....  puts on listening cap
[2013-08-23 22:12:04 -0400] BlueKayak: yes, nrpe install on LInux clients
[2013-08-23 22:12:47 -0400] BlueKayak: I created our site-specific wrapper cookbook, and am using chef-rewind gem to try and tweak params as desired
[2013-08-23 22:12:55 -0400] afirth: gotcha. do you not have metal to roll another nagios server? bc nagios with chef is sooo much better and pretty much plug & play
[2013-08-23 22:13:02 -0400] afirth: but that's here nor there
[2013-08-23 22:13:30 -0400] afirth: i am actually setting one up as we speak :-/
[2013-08-23 22:14:10 -0400] BlueKayak: Oh sweet!  glad I ran into you
[2013-08-23 22:14:28 -0400] BlueKayak: Yes, I do have a spare VM I was planning on building out a chef-managed nagios server, but...
[2013-08-23 22:14:45 -0400] afirth: move over to pm?
[2013-08-23 22:15:07 -0400] BlueKayak: right now it's tough to find time to move everything at once, so I was going with the plan of just automating client install/cfg via chef
[2013-08-23 22:15:29 -0400] BlueKayak: yes, how do we create a new pm?  (newbie to web irc)
[2013-08-23 22:16:22 -0400] BlueKayak: <moving>
[2013-08-23 23:18:38 -0400] sandfox: Hi Chef people, have a quick question about running multiple instances of a cookbook. If I have a program like redis, with it's own cookbook,  what is the sane/recommneded way to run multiple copies of that on a single server? 1 library cookbook, then 1 application cookbook per instance I want to run that inherits from the library cookbook?
[2013-08-23 23:22:55 -0400] renchap: wo, 65
[2013-08-23 23:22:58 -0400] renchap: woops
[2013-08-23 23:29:25 -0400] jbz: sandfox: When I have to do that, I usually write a wrapper cookbook that uses the community cookbook and then does whatever else is needed to multiplex it.
[2013-08-23 23:31:16 -0400] sandfox: jbz: ok, and in the "multiplex cookbook" have a recipe per instance (for example) ?
[2013-08-23 23:31:36 -0400] jbz: sandfox:  No, have a recipe which is able to set up multiple instances based on a data bag or attribute set describing them.
[2013-08-23 23:32:34 -0400] jbz: The wrapper cookbook usually starts by calling the main cookbook to install the software
[2013-08-23 23:32:48 -0400] bixu: Having a problem where hostname is not getting set before I run the community dynect cookbook, so the dynect api is freaking out.  How can I make sure the hostname is set early in the bootstrap?
[2013-08-23 23:32:53 -0400] jbz: then to configure multiple instances, if it can, it'll call configuration resources from the main cookbook multiple times
[2013-08-23 23:33:02 -0400] jbz: if it can't, it'll set up configs and service resources itself
[2013-08-23 23:34:05 -0400] sandfox: jbz: ah-ha thanks that was the sort of info I was after. Couldn't think what the sane route would be (or any route to be honest)
[2013-08-23 23:34:15 -0400] jbz: Yep
[2013-08-23 23:35:56 -0400] sandfox: jbz: as I'm lazy, and this is some internal software, and no one is looking, I could just do that all in one cookbook? (may the gods of engineering judge my soul later)
[2013-08-23 23:36:41 -0400] jbz: sandfox:  The point of using the wrapper cookbook is that that way, if the community cookbook gets updated later, you don't have to track changes and etc. in your cookbook too.
[2013-08-23 23:36:53 -0400] jbz: You can rely on the community to maintain the 'main' installer and configuration cookbook.
[2013-08-23 23:37:33 -0400] jbz: If the whole thing is going to be your work, sure.  But even there, changes to the software's deploy/configure requirements brought on from upstream can be separated from your local logic by splitting the cookbooks.
[2013-08-23 23:37:48 -0400] jbz: But your call.
[2013-08-23 23:39:14 -0400] sandfox: jbz: the whole thing is internal, but yeah I will probably break it out in logical bits at some point, but right now I'm happy to do a little evil as I just need to POC it and the actual software is far from final
[2013-08-23 23:39:23 -0400] sandfox: jbz: thanks for your help
[2013-08-23 23:40:08 -0400] jbz: yw

[2013-08-01 00:24:36 -0400] Sauraus: @trilitheus_ arch attribute on rhel is null!
[2013-08-01 00:58:55 -0400] drywheat: when using the chef directory resource, is it necessary to "always" provide the mode, owner, group?
[2013-08-01 00:59:11 -0400] drywheat: assuming i'm fine with root owning it
[2013-08-01 00:59:22 -0400] drywheat: and the umask defaults
[2013-08-01 00:59:40 -0400] drywheat: sort of looking for best practices guidance ( explicit vs implicit )
[2013-08-01 01:07:01 -0400] basic`: coderanger: we have a question about user management with the https://github.com/fnichol/chef-user cookbook we're trying to use a databag to add a user to a system, without wiping out the other node['users'] data.  Is there an easy way to set that and concat to the node['users'] array?  am I totally overthinking this?
[2013-08-01 01:51:04 -0400] ssd7_: Heads up.  tickets and wiki are going down for a while.  We'll post more information once we can.
[2013-08-01 02:16:44 -0400] coderanger: basic`: Look at the users::data_bag recipe, copy-pasta that and just concat the arrays
[2013-08-01 02:16:56 -0400] coderanger: basic`: You can check out the users recipe in the psf-chef repo too
[2013-08-01 02:17:48 -0400] basic`: coderanger, perfect, thanks
[2013-08-01 03:01:31 -0400] basic`: coderanger, err, what users recipe are you talkin about?
[2013-08-01 03:05:12 -0400] coderanger: basic`: in which context?
[2013-08-01 03:07:39 -0400] basic`: coderanger, you're saying to copy the code from https://github.com/python/psf-chef/blob/master/cookbooks/user/recipes/data_bag.rb ?
[2013-08-01 03:07:56 -0400] coderanger: I would probably start from https://github.com/fnichol/chef-user/blob/master/recipes/data_bag.rb
[2013-08-01 03:08:04 -0400] coderanger: but you can use our users recipe as inspiration too if you want :)
[2013-08-01 03:09:08 -0400] coderanger: User creation tends to be reeeeeeeally site-specific no matter what you do
[2013-08-01 03:10:47 -0400] basic`: coderanger,  ya i believe it.. we're trying to create a user for rdiff-backup and trying to separate the site specific things as much as possible
[2013-08-01 03:11:31 -0400] coderanger: basic`: I do service users in the service's recipe generally
[2013-08-01 03:11:39 -0400] coderanger: distinct from human user creation
[2013-08-01 03:12:07 -0400] coderanger: Example https://github.com/python/psf-chef/blob/master/cookbooks/rsnapshot/providers/client.rb#L2-L13
[2013-08-01 03:15:57 -0400] brucelee_: how do i stop the runsv nginx when i shutdown chef stack?
[2013-08-01 03:16:16 -0400] brucelee_: i tried to install an nginx server on top of chef stack, and use the server as also a reverse proxy
[2013-08-01 03:16:36 -0400] brucelee_: but even after shutting down chef, it still listens to port 80, and redirects to https automatically :O
[2013-08-01 03:17:22 -0400] coderanger: brucelee_: Not sure what you mean
[2013-08-01 03:17:47 -0400] basic`: coderanger, hmm
[2013-08-01 03:17:47 -0400] coderanger: brucelee_: if you "chef-server-ctl stop" that should shut things down
[2013-08-01 03:18:27 -0400] basic`: coderanger, with the lwrp can you easily reference the data bag for the public ssh key?
[2013-08-01 03:18:39 -0400] basic`: or is it a one or the other sort of situation?
[2013-08-01 03:19:21 -0400] coderanger: basic`: Yeah, you can use user_account, I just used the lower level stuffs
[2013-08-01 03:19:34 -0400] basic`: the plan was to use a server / client ssh keypair for rdiff-backup
[2013-08-01 03:19:45 -0400] coderanger: basic`: Yeah, scroll down ;-)
[2013-08-01 03:19:55 -0400] basic`: oops
[2013-08-01 03:20:38 -0400] brucelee_: coderanger: when i type that, and do ps aux | grep nginx, theres still nginx processes
[2013-08-01 03:20:49 -0400] basic`: coderanger, there we go... perfect
[2013-08-01 03:21:01 -0400] basic`: rettigs, ^^
[2013-08-01 03:21:18 -0400] coderanger: basic`: Feel free to steal liberally from that rsnapshot cookbook
[2013-08-01 03:22:53 -0400] basic`: will do, i think we already have a bit for our rdiff-backup stuff (they're similar enough in configuration)
[2013-08-01 03:23:06 -0400] basic`: thanks for the help
[2013-08-01 03:32:13 -0400] brucelee_: code: http://sprunge.us/FMfa
[2013-08-01 03:32:19 -0400] brucelee_: coderanger: http://sprunge.us/FMfa :P
[2013-08-01 03:32:36 -0400] brucelee_: ill give you a better paste
[2013-08-01 03:35:47 -0400] coderanger: brucelee_: Can you do a "ps -ef f"?
[2013-08-01 03:36:55 -0400] brucelee_: yah
[2013-08-01 03:37:25 -0400] brucelee_: http://sprunge.us/VJUh
[2013-08-01 03:38:14 -0400] brucelee_: seems like the root process is 13771
[2013-08-01 03:39:50 -0400] coderanger: Yeah, looks like a zombie that escaped runit though
[2013-08-01 03:40:28 -0400] coderanger: probably timed out during the kill and didn't respond to sigchild or something
[2013-08-01 03:40:55 -0400] brucelee_: hmmm
[2013-08-01 03:40:57 -0400] brucelee_: how can i kill it? :O
[2013-08-01 03:41:09 -0400] coderanger: kill -9?
[2013-08-01 03:41:25 -0400] brucelee_: ive tried :P
[2013-08-01 03:41:27 -0400] brucelee_: doesnt kill it
[2013-08-01 03:41:29 -0400] brucelee_: guess ill reboot
[2013-08-01 03:46:56 -0400] brucelee_: hey coderanger , http://pastebin.com/G2ZzwLhP
[2013-08-01 03:47:21 -0400] brucelee_: so i rebooted, i did chef-server-ctl stop, then did ps aux | grep nginx and its still there
[2013-08-01 03:47:30 -0400] brucelee_: i do a kill -9 on the process thats runsv nginx
[2013-08-01 03:47:39 -0400] brucelee_: then it immediately spawned a few more processes
[2013-08-01 03:47:41 -0400] brucelee_: any ideas? :P
[2013-08-01 03:47:55 -0400] coderanger: Yeah, runsv is part of runit so that will restart automatically
[2013-08-01 03:48:09 -0400] brucelee_: ok
[2013-08-01 03:48:16 -0400] brucelee_: let me kill the root process again
[2013-08-01 03:48:18 -0400] coderanger: The question is why it is either restart nginx, or why nginx is daemonizing itself
[2013-08-01 03:50:58 -0400] brucelee1: coderanger: my other host died :/
[2013-08-01 03:54:24 -0400] brucelee1: hmm not sure why nginx cant be killed :/
[2013-08-01 03:54:54 -0400] brucelee1: i killed the root process: runsvdir -P /opt/chef-server/service log: unable to lock directory: /var/log/chef-server/nginx: temporary failure?svlogd: fatal: no functional log direct
[2013-08-01 04:00:39 -0400] kisoku: coderanger: getting  502's on wiki.opscode.com
[2013-08-01 04:00:52 -0400] coderanger: kisoku: Yes, doing maintenance
[2013-08-01 04:00:59 -0400] coderanger: kisoku: status feed should have updates
[2013-08-01 04:01:06 -0400] kisoku: kk
[2013-08-01 04:01:15 -0400] kisoku: where's the status feed :-P
[2013-08-01 04:01:18 -0400] kisoku: status.oc.com ?
[2013-08-01 04:01:35 -0400] coderanger: Yep
[2013-08-01 04:01:45 -0400] coderanger: Thats the tumblr, it xposts to twitter too
[2013-08-01 04:03:30 -0400] miah: yes, please.
[2013-08-01 04:04:50 -0400] miah: tumblr is meh
[2013-08-01 04:05:47 -0400] coderanger: miah: We've been using statuspage.io for Python, its very <3
[2013-08-01 04:07:04 -0400] miah: ya. it seems good. havent used it personally.
[2013-08-01 04:46:36 -0400] joe: hi is there are way to know if the services is already installed inside the recipe ?
[2013-08-01 05:07:22 -0400] irr: Ohai Chefs. Question about Berkshelf. Why `berks install --path=chef-repo/cookbooks` only copies cookbooks from git and not creating .git directories? How am I supposed to work on my cookbooks if they're not under git? Why do I ever need cookbooks with no git on my local machine?
[2013-08-01 05:08:03 -0400] irr: That's really-really confusing
[2013-08-01 05:18:03 -0400] banachtarski: what's the best way to install ruby from chef?
[2013-08-01 05:23:12 -0400] jameson-pmac: isn't there a rvm cookbook?
[2013-08-01 05:23:29 -0400] jameson-pmac: (doesn't use ruby)
[2013-08-01 05:24:15 -0400] kisoku: fnichol's chef-rvm
[2013-08-01 05:24:23 -0400] kisoku: github.com/fnichol/chef-rvm
[2013-08-01 05:24:43 -0400] kisoku: there's also a chef-rbenv cookbook
[2013-08-01 05:24:52 -0400] kisoku: I wish there was a chef-chruby cookbook
[2013-08-01 05:25:20 -0400] kisoku: oh yeah there are a couple actually :-P
[2013-08-01 05:25:56 -0400] kisoku: this one  looks like the best of the chruby cookbooks
[2013-08-01 05:25:57 -0400] kisoku: https://github.com/Atalanta/chef-chruby
[2013-08-01 05:33:53 -0400] banachtarski: thanks
[2013-08-01 05:34:00 -0400] banachtarski: the ruby_build cookbook is killing me
[2013-08-01 05:34:10 -0400] banachtarski: i've been at it for an hour and it refuses to do anything
[2013-08-01 05:34:24 -0400] banachtarski: the way it checks if a resource should run is just wonky
[2013-08-01 05:34:43 -0400] banachtarski: i hate also how everything assumes that i need multiple ruby versions installed for each different user etc.
[2013-08-01 05:34:56 -0400] banachtarski: i just want to compile and run a ruby with a specified version in an attribute somewhere
[2013-08-01 05:44:09 -0400] rafaelmagu: knife ssh is returning an empty node that I have no idea how to remove
[2013-08-01 05:44:17 -0400] rafaelmagu: It does not appear in my node lists
[2013-08-01 05:44:22 -0400] banachtarski: yea chruby is broken for me too
[2013-08-01 05:44:29 -0400] banachtarski: relies on ruby_build
[2013-08-01 05:44:30 -0400] rafaelmagu: knife ohno also returns this empty node too
[2013-08-01 05:44:35 -0400] banachtarski: which is a piece of shit that does way to much work
[2013-08-01 05:44:36 -0400] rafaelmagu: Lost cheep in need of chefherding for more than 24 hours:
[2013-08-01 05:44:36 -0400] rafaelmagu: :382037 hours
[2013-08-01 05:44:48 -0400] rafaelmagu: Anyone got any idea on how to remove that node from Chef?
[2013-08-01 05:45:12 -0400] pontiki: i thought ruby_build installed system-wide by default...
[2013-08-01 05:45:21 -0400] banachtarski: nope
[2013-08-01 05:45:26 -0400] banachtarski: it can't even install rubybuild
[2013-08-01 05:45:27 -0400] pontiki: huh
[2013-08-01 05:45:32 -0400] banachtarski: claims that it exists already
[2013-08-01 05:45:35 -0400] banachtarski: when it clearly doesn't
[2013-08-01 05:45:39 -0400] banachtarski: fileutils broken?
[2013-08-01 05:45:41 -0400] banachtarski: impossible
[2013-08-01 05:46:18 -0400] banachtarski: both ruby_build and chruby insist that all the resources are up to date, when none of them are
[2013-08-01 05:46:24 -0400] banachtarski: this is run locally on the client
[2013-08-01 05:46:31 -0400] pontiki: is the chef-ruby_build your using? http://community.opscode.com/cookbooks/ruby_build
[2013-08-01 05:47:06 -0400] banachtarski: yep
[2013-08-01 05:47:15 -0400] banachtarski: i've tried installing from the tarball too
[2013-08-01 05:47:27 -0400] banachtarski: it's ok, i'm just writing my own now
[2013-08-01 05:47:30 -0400] banachtarski: super simple
[2013-08-01 05:47:30 -0400] pontiki: do you need to switch rubies in your production?
[2013-08-01 05:47:35 -0400] banachtarski: no
[2013-08-01 05:47:41 -0400] banachtarski: i just need one ruby
[2013-08-01 05:47:48 -0400] pontiki: shouldn't need chruby then either
[2013-08-01 05:47:50 -0400] banachtarski: that is more recent than what precise provides
[2013-08-01 05:47:52 -0400] banachtarski: agreed
[2013-08-01 05:47:53 -0400] banachtarski: i shouldn't
[2013-08-01 05:48:07 -0400] pontiki: which flavour of chef are you using?
[2013-08-01 05:48:12 -0400] banachtarski: latest
[2013-08-01 05:48:14 -0400] banachtarski: 11.6
[2013-08-01 05:48:16 -0400] banachtarski: or so
[2013-08-01 05:48:23 -0400] pontiki: no, i mean hosted, private, solo
[2013-08-01 05:48:27 -0400] banachtarski: hosted
[2013-08-01 05:50:15 -0400] pontiki: what's in your node['ruby_build'] ?
[2013-08-01 05:50:59 -0400] banachtarski: nothing
[2013-08-01 05:51:05 -0400] banachtarski: i eventually stripped it down to just that
[2013-08-01 05:51:10 -0400] banachtarski: for debugging purposes
[2013-08-01 05:51:24 -0400] banachtarski: it's possible the machine is now in a "bad state"
[2013-08-01 05:51:34 -0400] banachtarski: but for a declarative framework, that just means the recipe is buggy
[2013-08-01 05:56:27 -0400] pontiki: actually, it probably is...
[2013-08-01 05:56:43 -0400] pontiki: i've had a few times where i've had to blow a bund of things away
[2013-08-01 05:56:57 -0400] pontiki: "bunch"
[2013-08-01 05:57:15 -0400] pontiki: primarily because I screwed up a recipe
[2013-08-01 05:57:33 -0400] pontiki: ... or my devops did...
[2013-08-01 05:57:34 -0400] banachtarski: sort of defeats the purpose of state convergence/declarative programming
[2013-08-01 05:57:51 -0400] banachtarski: if i have to do that that means i can't trust the recipe to converge on the golden state on its own
[2013-08-01 05:57:56 -0400] banachtarski: which means i write it myself
[2013-08-01 05:58:40 -0400] pontiki: or, like, test the recipes and configuration
[2013-08-01 06:20:53 -0400] jtimberman: banachtarski: the problem with any tool that does "declarative state convergence" is when you have a recipe that is managing resources like "execute" or "bash" or whatever, you have an arbitrary command, so the state is *impossible* for chef to detect, so you have to guard it for convergent (and idempotent) operation with a conditional of some sort.
[2013-08-01 06:28:31 -0400] kallistec: service is even worse in that, if we all decided on a way to identify the currently running configuration version, it could work
[2013-08-01 06:32:39 -0400] nyerup: Did any of you break http://tickets.opscode.com?
[2013-08-01 06:33:10 -0400] pontiki: i confess, it was coderanger
[2013-08-01 06:33:18 -0400] pontiki: no, i have no idea, actually
[2013-08-01 06:34:34 -0400] pontiki: i recommend the celtic mix on earbits :)
[2013-08-01 06:39:41 -0400] chollya: Hello! Is there a way to sort node search results? Simple search().sort produces "Chef::Mixin::Template::TemplateError: comparison of Chef::Node with Chef::Node failed"
[2013-08-01 06:40:20 -0400] coderanger: chollya: .sort_by {|n| n.name}
[2013-08-01 06:40:24 -0400] coderanger: or something
[2013-08-01 06:40:31 -0400] coderanger: chollya: search results should be order-stable though
[2013-08-01 06:40:40 -0400] coderanger: they are sorted on an internal solr ID field
[2013-08-01 06:42:45 -0400] chollya: coderanger: they are changing every chef run. I'm querying like "search(:node, 'recipes:bacula\:\:client')" and every run list is ordered in different way
[2013-08-01 06:43:16 -0400] coderanger: chollya: what version of chef? I thought we fixed that forever ago
[2013-08-01 06:44:04 -0400] chollya: coderanger: client: Version: 11.4.4-2.debian.6.0.5, server: Version: 11.0.8-1.ubuntu.10.04
[2013-08-01 06:44:31 -0400] coderanger: Huh, well that #sort_by call will help at least
[2013-08-01 06:44:39 -0400] coderanger: assuming you can fit the whole list in RAM at once
[2013-08-01 06:44:42 -0400] chollya: coderanger: i'm trying it right now :)
[2013-08-01 06:47:36 -0400] chollya: coderanger: sort_by works just great! Thank you
[2013-08-01 06:48:30 -0400] coderanger: chollya: You should very much look in to using partial_search since otherwise you are loading potentially a lot of stuff in to RAM
[2013-08-01 06:55:30 -0400] chollya: coderanger: thank you! I will try it
[2013-08-01 10:24:39 -0400] fishGoM00: Good morning all,
[2013-08-01 10:24:51 -0400] fishGoM00: I understand from here (website down atm) http://wiki.opscode.com/display/chef/Release+Notes
[2013-08-01 10:25:08 -0400] fishGoM00: that chef-client 11.6.0 has been released
[2013-08-01 10:25:23 -0400] fishGoM00: does anyone know when it will be available on the opscode repository?
[2013-08-01 10:28:02 -0400] Perry_: Hi http://wiki.opscode.com/display/chef/IRC has a bad gateway HTTP 502
[2013-08-01 10:28:16 -0400] Perry_: someone in opscode needs to kick somthing :)
[2013-08-01 10:30:51 -0400] Perry_: Question: I am trying to run chef on ruby 2 x64 on windows on windows 2012 , getting some issues around win32/process (Assumption - this is not tested / supported?)
[2013-08-01 10:31:06 -0400] fishGoM00: yup tis deader than corduroy atm
[2013-08-01 10:32:42 -0400] Perry_: @fishGoM00 what that a response to me?
[2013-08-01 10:33:05 -0400] fishGoM00: about the opscode website, yes
[2013-08-01 10:33:11 -0400] Perry_: ahh :)
[2013-08-01 10:33:26 -0400] fishGoM00: unfortunately I can't offer any advice for chef on windows, not my bag :)
[2013-08-01 10:33:44 -0400] Perry_: *sigh* it seems it's no many peoples bag
[2013-08-01 10:34:22 -0400] fishGoM00: it sounds interesting... but I can't think what I would run from a windows machine :)
[2013-08-01 10:43:55 -0400] fishGoM00: does anyone know when chef-client 11.6.0 will be available on the opscode repository?
[2013-08-01 10:50:27 -0400] zts: fishGoM00: what do you mean by opscode repository?  They're up on the S3 bucket (at least, the enterprise linux one is, as I just installed it under Vagrant)
[2013-08-01 11:25:22 -0400] ryannielson: Is there a way to run a recipe before all others. I basically have a main recipe, that installs Rbenv, Ruby, and a couple gems. In that same recipe I also create some postgres databases. Issue is, the postgresql cookbook is a dependency of my main cookbook, so it's running before rbenv and ruby are installed. Which is think is causing the error: "FATAL: NoMethodError: undefined method `ruby' for Config:Module"
[2013-08-01 11:25:41 -0400] ryannielson: I'm running chef using chef-solo with vagrant if that matters.
[2013-08-01 11:26:50 -0400] fishGoM00: zts : The opscode apt-get repo (http://www.opscode.com/blog/2009/09/02/apt-repository-for-chef/)
[2013-08-01 11:27:13 -0400] fishGoM00: I was expected chef-client 11.6.x to be there
[2013-08-01 11:30:17 -0400] fishGoM00: zts : This link is more up to date http://generalthings.com/2012/05/08/simple-steps-install-chef-ubuntu-12-04-10-04/
[2013-08-01 11:31:27 -0400] fishGoM00: does anyone know when chef-client 11.6.0 will be available on the opscode repository?   (http://apt.opscode.com/ precise-0.10 main)
[2013-08-01 11:39:17 -0400] anay: I'm looking for a quick way to set the on_error config for knife ssh to raise an error on ssh failure. Anyone knows how to do that ?
[2013-08-01 11:39:43 -0400] zts: fishGoM00: I didn't think those repositories were being updated any more - have you installed a previous version of Chef 11 from there?
[2013-08-01 11:40:33 -0400] zts: fishGoM00: also, as a matter of etiquette, just repeating the same question is usually considered impolite - if anyone knows the answer, they will answer.  But the folks in the USA haven't woken up yet, so you could try asking again in a few hours
[2013-08-01 11:48:03 -0400] fishGoM00: was just trying to catch the new ppl joining the channel :)
[2013-08-01 11:48:03 -0400] ryannielson: Are there chef-solo before hooks or anything I can use? I want to install Ruby before postgresql because I think postgres cookbook it's having problems installing since ruby's not installed.
[2013-08-01 11:48:44 -0400] fishGoM00: I think I did install chef 11 from http://apt.opscode.com/ precise-0.10 main
[2013-08-01 11:48:55 -0400] fishGoM00: whats the best way to get updates now?
[2013-08-01 11:54:24 -0400] zts: check out http://www.opscode.com/chef/install/  - you can use install.sh to install upgrades too
[2013-08-01 11:54:31 -0400] zts: also check out the omnibus_updater cookbook
[2013-08-01 11:57:32 -0400] bcave: hi there
[2013-08-01 11:58:09 -0400] bcave: is there a better # than this for knife plugin development questions?
[2013-08-01 11:58:18 -0400] bcave: (it's something relatively simple)
[2013-08-01 11:58:38 -0400] rb2k: I'm currently trying to bootstrap an ec2 instance using knife-ec2 and chef solo. it seems to work pretty decently until the bootstrap
[2013-08-01 11:58:44 -0400] rb2k: then it bails with "ERROR: Errno::ENOENT: No such file or directory - /etc/chef/validation.pem"
[2013-08-01 11:58:48 -0400] rb2k: any idea where to set this?
[2013-08-01 11:58:52 -0400] rb2k: the opscode wiki seems down :(
[2013-08-01 11:59:34 -0400] fishGoM00: zts, thanks just looking at the omnibus installer now
[2013-08-01 11:59:37 -0400] bcave: can you log into the instance?
[2013-08-01 11:59:49 -0400] rb2k: bcave: me?
[2013-08-01 11:59:52 -0400] fishGoM00: http://www.opscode.com/blog/2013/04/25/chef-11-4-4-and-chef-10-24-4-released/ should fix most of my issues it seems
[2013-08-01 12:00:02 -0400] bcave: sorry, yes rb2k.
[2013-08-01 12:00:05 -0400] rb2k: I can
[2013-08-01 12:00:21 -0400] rb2k: it seems to have set the correct ec2 key
[2013-08-01 12:00:25 -0400] bcave: does that file exist in /etc/chef on the instance? knife should have copied it there
[2013-08-01 12:00:47 -0400] rb2k: there is no /etc/chef
[2013-08-01 12:00:53 -0400] rb2k: this is right after "waiting for SSH"
[2013-08-01 12:01:04 -0400] bcave: do you have your ssh keys set up?
[2013-08-01 12:01:08 -0400] bcave: in your knife.rB?
[2013-08-01 12:01:11 -0400] rb2k: yes
[2013-08-01 12:01:23 -0400] rb2k: knife[:aws_ssh_key_id]          = ENV['EC2_ACCOUNT']
[2013-08-01 12:01:27 -0400] bcave: knife[:aws_ssh_key_id] = "...
[2013-08-01 12:01:29 -0400] rb2k: knife[:identity_file]           = ENV['EC2_PRIVATE_KEY']
[2013-08-01 12:01:42 -0400] bcave: ya, ok. and the key is in ~/.ssh ?
[2013-08-01 12:01:47 -0400] rb2k: yes
[2013-08-01 12:01:53 -0400] rb2k: well, it's in my SSH agent
[2013-08-01 12:02:00 -0400] rb2k: otherwise I wouldn't be able to ssh to that instance :)
[2013-08-01 12:02:46 -0400] bcave: /etc/chef wouldn't exist until chef is bootstrapped. I'm not 100% sure about the difference between chef-solo and chef-client though
[2013-08-01 12:03:24 -0400] rb2k: I guess that's the main problem
[2013-08-01 12:03:31 -0400] rb2k: I don't even know what that validation is for
[2013-08-01 12:03:45 -0400] rb2k: I'd guess that the server can determine that the client is what is says it is
[2013-08-01 12:03:48 -0400] bcave: you could try checking in /var/log/messages or /var/log/secure on the instance maybe, and see if there's authentication warnings
[2013-08-01 12:03:50 -0400] rb2k: which for solo, shouldn't even work
[2013-08-01 12:04:29 -0400] bcave: when you'r running chef-client with chef-server (we're using opscode hosted chef), then validation.pem is the client authentication mechanism
[2013-08-01 12:05:02 -0400] rb2k: yeah. chef solo doesn't have a server
[2013-08-01 12:05:14 -0400] rb2k: so I'd assume I have to disable something somewhere :)
[2013-08-01 12:05:41 -0400] bcave: yup. do you have a "validation_key" and/or "validation_client_name" in knife.rb?\
[2013-08-01 12:06:26 -0400] rb2k: now I do
[2013-08-01 12:06:35 -0400] rb2k: and that seems to have prompted for a password
[2013-08-01 12:06:37 -0400] bcave: rb2k: it seems that knife-ec2 is designed to work with chef server /client
[2013-08-01 12:06:41 -0400] rb2k: I'll set it to /dev/null
[2013-08-01 12:06:45 -0400] bcave: here's what you're probably looking for: https://gist.github.com/markbirbeck/2049991
[2013-08-01 12:07:24 -0400] rb2k: Yeah, saw that before. Looked a bit weird though.
[2013-08-01 12:07:31 -0400] rb2k: I'll see if I can play with those two params
[2013-08-01 12:07:46 -0400] rb2k: I had them in solo.rb
[2013-08-01 12:07:51 -0400] rb2k: knife.rb did the trick as it seems
[2013-08-01 12:08:03 -0400] bcave: ok, great.
[2013-08-01 12:08:09 -0400] bcave: also have a look at https://github.com/neocsr/ec2-knife-solo
[2013-08-01 12:09:01 -0400] rb2k: I did NOT get that
[2013-08-01 12:09:11 -0400] rb2k: it's not a gem
[2013-08-01 12:09:18 -0400] rb2k: it might be an example setup?
[2013-08-01 12:11:12 -0400] teukka: rb2k: you can use the prerelease version of knife-solo to use it with knife-ec2. just put `knife[:solo] = true` to .chef/knife.rb
[2013-08-01 12:11:27 -0400] rb2k: teukka: oh, that's helpful!
[2013-08-01 12:11:31 -0400] rb2k: --pre ?
[2013-08-01 12:11:32 -0400] bcave: thanks teukka, was looking for something like that
[2013-08-01 12:12:23 -0400] teukka: rb2k: yeah, `gem install knife-solo --pre` (if you're not using bundler)
[2013-08-01 12:12:27 -0400] bcave: rb2k: the other alternative is to use a chef server :p
[2013-08-01 12:12:37 -0400] tobin: Anyone know how to change the version of chef-client knife ec2 create installs?
[2013-08-01 12:13:19 -0400] bcave: tobin: are you using a Gemfile ?
[2013-08-01 12:13:33 -0400] bcave: oh, what version of chef-client...
[2013-08-01 12:13:39 -0400] bcave: i misunderstood, sorry
[2013-08-01 12:13:49 -0400] teukka: tobin: --bootstrap-version
[2013-08-01 12:13:53 -0400] tobin: bcave: its installing 11.4, ineed 11.6
[2013-08-01 12:14:20 -0400] bcave: thought you were asking about what version of knife-ec2 :p
[2013-08-01 12:14:29 -0400] tobin: teukka: ah thanks.
[2013-08-01 12:14:41 -0400] teukka: tobin: it probably installs by default the same version that is used locally (i.e. knife)
[2013-08-01 12:14:55 -0400] tobin: cheers
[2013-08-01 12:17:25 -0400] hippiehacker: I'm trying to include a module within an attributes/default.rb file
[2013-08-01 12:17:29 -0400] rb2k: teukka: I don't have .chef/knife.rb
[2013-08-01 12:17:33 -0400] rb2k: I just have knife.rb in the root
[2013-08-01 12:17:36 -0400] rb2k: but that seems to get picked up
[2013-08-01 12:17:41 -0400] aspiers: http://wiki.opscode.com/display/chef10/Home is broken - 502 Bad Gateway
[2013-08-01 12:17:49 -0400] hippiehacker: include Mod::Within::Another::Cookbook::Library
[2013-08-01 12:17:56 -0400] rb2k: however, adding knife[:solo]                    = true doesn't seem to change anything
[2013-08-01 12:18:07 -0400] aspiers: if I only have two nodes in my Chef (10) environment, and I launch shef -z, why would it return different results for node.keys.sort and nodes.all.first.keys.sort, even though node.name and nodes.all.first.name are equal?
[2013-08-01 12:18:10 -0400] rb2k: But I'd assume this would be that: https://github.com/matschaffer/knife-solo/blob/master/lib/chef/knife/bootstrap_solo.rb#L22
[2013-08-01 12:18:15 -0400] hippiehacker: but I get a funny error:  DEBUG: Re-raising exception: NoMethodError - Undefined node attribute or method `include' on `node'
[2013-08-01 12:18:44 -0400] teukka: rb2k: try running with `-VV` option to get debug output
[2013-08-01 12:19:11 -0400] rb2k: I would still use "knife ec2 server create", right?
[2013-08-01 12:19:47 -0400] teukka: rb2k: yes. it uses Chef::Knife::Bootstrap` internally with is monkey pathced on your link
[2013-08-01 12:20:16 -0400] rb2k: so I shouldn't need entries for "validation_key" in my knife.rb
[2013-08-01 12:21:20 -0400] teukka: rb2k: no, you shouldn't need as far as I understand
[2013-08-01 12:21:37 -0400] rb2k: hm
[2013-08-01 12:21:38 -0400] rb2k: https://gist.github.com/rb2k/64cb0e144cdc75eaa02c
[2013-08-01 12:21:43 -0400] rb2k: it grabs some bootstrapping template
[2013-08-01 12:21:46 -0400] rb2k: and still fails
[2013-08-01 12:21:58 -0400] hippiehacker: I'm guessing it's a Chef-11 vs Chef-10 bug
[2013-08-01 12:24:34 -0400] teukka: rb2k: yeah, knife-solo is not invoked there. do you get `knife solo` commands listed if you call just `knife`?
[2013-08-01 12:25:04 -0400] rb2k: nope
[2013-08-01 12:25:22 -0400] hippiehacker: might have to use something like send :include Module::Submodule?
[2013-08-01 12:25:24 -0400] rb2k: knife-solo (0.3.0.pre5) is installed though
[2013-08-01 12:26:18 -0400] teukka: strange...
[2013-08-01 12:26:58 -0400] rb2k: gem search knife only shows knife-ec2 (0.6.4) and knife-solo (0.3.0.pre5)
[2013-08-01 12:31:21 -0400] teukka: rb2k: I have no idea why knife is not loading it for you :/
[2013-08-01 12:32:10 -0400] rb2k: 0.2.0 works
[2013-08-01 12:33:45 -0400] teukka: I'm using knife normally via bundler and it works for me. but sure enough it seems not to be loaded without bundler. maybe because of the pre-releasse then...
[2013-08-01 12:34:03 -0400] teukka: knife subcommand loading is buggy in other ways, but this is new
[2013-08-01 12:36:30 -0400] teukka: rb2k: 0.3.0 should be released soon. just have to kick matschaffer a bit more =)
[2013-08-01 12:36:36 -0400] rb2k: Let me try via bundler :)
[2013-08-01 12:36:59 -0400] teukka: rb2k: it might be that the knife[:solo] hack was not yet in 0.2.0
[2013-08-01 12:37:12 -0400] teukka: 0.3.0 has been a loooong process ;)
[2013-08-01 12:37:13 -0400] rb2k: I uninstalled 0.2.0
[2013-08-01 12:41:13 -0400] rb2k: teukka: weird, works fine with bundler O_O
[2013-08-01 12:54:28 -0400] rb2k: Can I just use berkshelf in 0.3.0?
[2013-08-01 12:54:29 -0400] rb2k: aka knife[:berkshelf]               = true
[2013-08-01 12:58:32 -0400] teukka: rb2k: that is on by default. so if berkshelf gem is installed it will be used
[2013-08-01 12:58:40 -0400] rb2k: oh, sweet
[2013-08-01 12:58:47 -0400] rb2k: then I'll just add it to the gemfile
[2013-08-01 12:58:59 -0400] teukka: and Berksfile found too, of course
[2013-08-01 12:59:02 -0400] rb2k: sure
[2013-08-01 12:59:14 -0400] rb2k: that will download the cookbooks / add the matching path?
[2013-08-01 12:59:20 -0400] rb2k: so I just have to set my "custom" path
[2013-08-01 13:00:08 -0400] teukka: yeah, by default it installs the cookbooks to ~/.berkshelf/knife-solo/... which will be configured and uploaded to the server
[2013-08-01 13:00:30 -0400] teukka: you _can_ set a custom path too, if you need to
[2013-08-01 13:01:22 -0400] rb2k: perfect
[2013-08-01 13:01:35 -0400] rb2k: that should just be a
[2013-08-01 13:01:36 -0400] rb2k: knife[:cookbook_path]           = ['cookbooks']
[2013-08-01 13:01:36 -0400] rb2k: right?
[2013-08-01 13:04:28 -0400] teukka: knife[:berkshelf_path] = 'cookbooks'
[2013-08-01 13:05:28 -0400] teukka: rb2k: oh wait, I might have misunderstood your last question
[2013-08-01 13:05:31 -0400] rb2k: sorry
[2013-08-01 13:05:34 -0400] rb2k: not the berkshelf cookbooks
[2013-08-01 13:05:37 -0400] rb2k: but just other custom ones
[2013-08-01 13:05:48 -0400] rb2k: that aren't managed by berkshelf
[2013-08-01 13:06:06 -0400] rb2k: I'm currently giving this line a try
[2013-08-01 13:06:07 -0400] rb2k: knife[:cookbook_path]           = ["#{base_path}/cookbooks"]
[2013-08-01 13:06:26 -0400] teukka: that is just `cookbook_path ['cookbooks']
[2013-08-01 13:06:35 -0400] teukka: without knife[]
[2013-08-01 13:07:02 -0400] rb2k: oh
[2013-08-01 13:07:09 -0400] teukka: other option is to add them to Berksfile and let it handle everything, including dependencies
[2013-08-01 13:10:36 -0400] bcave: is there an issue tracker for knife ?
[2013-08-01 13:11:15 -0400] bcave: tickets.opscode.com?
[2013-08-01 13:12:46 -0400] teukka: bcave: yes. CHEF project with "knife" component
[2013-08-01 13:13:46 -0400] wongt: anyone here knows if we can use mutiple encrypted data bas?
[2013-08-01 13:13:50 -0400] wongt: bag*
[2013-08-01 13:18:50 -0400] PierreO: bcave, I noticed it also
[2013-08-01 13:54:29 -0400] ab8971: sorry if this has been discussed anyone know about the 502's on http://wiki.opscode.com/
[2013-08-01 13:57:54 -0400] corehook: hello dudes
[2013-08-01 13:58:10 -0400] corehook: why so simple code like "execute "blabla" do command "sudo pkill -f haproxy" end
[2013-08-01 13:58:20 -0400] corehook: return to me
[2013-08-01 13:58:20 -0400] corehook: [2013-08-01T19:56:35+06:00] ERROR: Running exception handlers
[2013-08-01 13:58:21 -0400] corehook: [2013-08-01T19:56:35+06:00] ERROR: Exception handlers complete
[2013-08-01 13:58:33 -0400] corehook: i cant start/stop haproxy with recipes :(
[2013-08-01 13:58:36 -0400] gchristensen: ab8971: the wiki is shutting down and is being moved to docs, I believe.
[2013-08-01 13:58:57 -0400] ab8971: oh
[2013-08-01 13:59:25 -0400] ab8971: but i cannot find analogous resources to http://wiki.opscode.com/display/chef/Opscode+Cookbook+Ticket+Review+Process
[2013-08-01 13:59:31 -0400] ab8971: and http://wiki.opscode.com/display/chef/Opscode+Cookbook+Release+Process
[2013-08-01 13:59:42 -0400] gchristensen: oh, yeah, then the wiki  might just be down :)
[2013-08-01 14:00:21 -0400] perryofpeek: ab8971: http://opscode.tumblr.com/
[2013-08-01 14:00:25 -0400] ab8971: and i am trying to promote contributing to community cookbooks at my company :( as opposed to opting to create our own
[2013-08-01 14:00:36 -0400] gchristensen: ab8971: ack!
[2013-08-01 14:00:38 -0400] ab8971: oh thank you
[2013-08-01 14:00:48 -0400] perryofpeek: the wiki and tickets are "dopwn for maintenance"
[2013-08-01 14:00:54 -0400] ab8971: good resource to know
[2013-08-01 14:00:58 -0400] corehook: guys :(
[2013-08-01 14:01:15 -0400] corehook: why so simple code
[2013-08-01 14:01:18 -0400] corehook: raise exception ?
[2013-08-01 14:01:47 -0400] perryofpeek: corehook: have you tried running in debug mode to get some more detail?
[2013-08-01 14:01:58 -0400] corehook: how ?
[2013-08-01 14:02:07 -0400] corehook: how i can run in debug mode ?
[2013-08-01 14:02:08 -0400] perryofpeek: how are you running the client?
[2013-08-01 14:02:29 -0400] corehook: knife solo cook corehook@node.com -o recipe[haproxy::stop] nodes/node.json
[2013-08-01 14:03:19 -0400] corehook: i am succefully write cookbook for deploy BIG ruby on rails application
[2013-08-01 14:03:24 -0400] corehook: for deploying postgresql cluster
[2013-08-01 14:03:34 -0400] corehook: but stupid mother fucking asshole haproxy
[2013-08-01 14:03:39 -0400] corehook: dont want to be work :(
[2013-08-01 14:03:43 -0400] corehook: sorry for my english
[2013-08-01 14:03:51 -0400] perryofpeek: I thought that was french
[2013-08-01 14:03:59 -0400] sfb: pardon his russian.
[2013-08-01 14:04:10 -0400] perryofpeek: so try running with -VV
[2013-08-01 14:04:19 -0400] corehook: ok
[2013-08-01 14:04:25 -0400] perryofpeek: -V for verbose and another for more verbose
[2013-08-01 14:04:29 -0400] corehook: i am stupid russian like all russians
[2013-08-01 14:05:01 -0400] corehook: wow
[2013-08-01 14:05:04 -0400] corehook: nice debug information
[2013-08-01 14:09:11 -0400] corehook: thx guys!
[2013-08-01 14:09:49 -0400] Sam___: I have a question about include_recipe
[2013-08-01 14:10:08 -0400] Sam___: if I say include_recipe "custom"
[2013-08-01 14:10:28 -0400] Sam___: and then in the custom.rb file, I define an array.  a ruby array
[2013-08-01 14:10:48 -0400] Sam___: but the main file isn't seeing it
[2013-08-01 14:12:36 -0400] Sam___: if you include another recipe with include_recipe , and inside that include there is something like "x=1"
[2013-08-01 14:12:45 -0400] Sam___: will the main recipe know that x is 1
[2013-08-01 14:21:02 -0400] zts: Sam___: short answer is no
[2013-08-01 14:21:33 -0400] zts: Sam___: include_recipe means "compile this recipe" (if it hasn't already happened), which will result in resources being added to the resource collection
[2013-08-01 14:21:45 -0400] zts: Sam___: but it doesn't embed/inline/etc one recipe in another
[2013-08-01 14:24:29 -0400] perryofpeek: Sam__ you could add some code to the library folder in your cookbook http://docs.opscode.com/essentials_cookbook_libraries.html
[2013-08-01 14:32:24 -0400] jschoolcraft: i'm working on chef with vagrant and berkshelf and trying to install rbenv using fnichols cookbook.  the rbenv cookbook talks about including it in the run list, but I didn't think with berkshelf I should be messing with run lists.  Did I misunderstand "the berkshelf way" ?
[2013-08-01 14:34:11 -0400] corehook: :(
[2013-08-01 14:34:13 -0400] corehook: i am tired
[2013-08-01 14:34:23 -0400] corehook: https://dpaste.de/gGwzu/raw/
[2013-08-01 14:39:34 -0400] perryofpeek: corehook: it looks to me like the command is failing (duh!) but I wonder if sudo is asking for a password? have you tried running this command and the dsh user?
[2013-08-01 14:41:57 -0400] perryofpeek: corehoook: is chef running as root or with root priv? do you need to specify the user & sudo to run this command if chef is running with enough priv?
[2013-08-01 14:42:01 -0400] juliancdunn: jschoolcraft: the "berkshelf way" is just "never download community cookbooks by hand", IMO
[2013-08-01 14:45:52 -0400] corehook: chef run on dsh user
[2013-08-01 14:45:55 -0400] corehook: dsh is nopasswd sudoer
[2013-08-01 14:46:25 -0400] corehook: i all try run this command in shell, end echo $?
[2013-08-01 14:46:28 -0400] corehook: its zero
[2013-08-01 14:46:45 -0400] corehook: i dont know what i can do:(
[2013-08-01 14:47:02 -0400] corehook: but process is killed
[2013-08-01 14:47:06 -0400] corehook: with cookbook
[2013-08-01 14:47:21 -0400] joefitzgerald: trying to use remote_file on windows to store a file that is on a network share  resulting in this error: [2013-08-01T07:45:02-07:00] FATAL: NoMethodError: windows_package[7-Zip 9.20 (x64 edition)](7-zip::default line 21) had an error: NoMethodError: remote_file[c:/vagrant/chef/cache/7z920-x64.msi] (dynamically defined) had an error: NoMethodError: private method `select' called for nil:NilClass
[2013-08-01 14:47:51 -0400] joefitzgerald: c:\vagrant is a symlink to \\vmware-host\Shared Folders\-vagrant
[2013-08-01 14:49:40 -0400] joefitzgerald: in an act of ultimate irony, the stacktrace can be successfully written to this location: [2013-08-01T07:45:02-07:00] FATAL: Stacktrace dumped to c:/vagrant/chef/cache/chef-stacktrace.out
[2013-08-01 14:49:53 -0400] joefitzgerald: anyone got any ideas?
[2013-08-01 14:50:47 -0400] joefitzgerald: stacktrace here: https://gist.github.com/joefitzgerald/6132124
[2013-08-01 14:51:18 -0400] freezey: opcode ticketing down?
[2013-08-01 14:52:10 -0400] perryofpeek: freezy: http://opscode.tumblr.com/
[2013-08-01 14:52:22 -0400] freezey: ah thanks
[2013-08-01 14:52:31 -0400] freezey: maybe they should put when they are releasing 11.0.10 on here
[2013-08-01 14:52:33 -0400] freezey: heh
[2013-08-01 14:56:17 -0400] juliancdunn: joefitzgerald: show your recipe code?
[2013-08-01 14:56:36 -0400] joefitzgerald: juliancdunn: literally just using the default 7-zip recipe
[2013-08-01 14:56:38 -0400] joefitzgerald: nothign special
[2013-08-01 14:57:11 -0400] juliancdunn: hmm, weird - on first impressions it looks like a bug
[2013-08-01 14:57:16 -0400] joefitzgerald: the only special thing i am doing is moving file_cache_path
[2013-08-01 14:57:16 -0400] joefitzgerald:   # Chef Solo
[2013-08-01 14:57:17 -0400] joefitzgerald:   config.vm.provision :chef_solo do |chef|
[2013-08-01 14:57:17 -0400] joefitzgerald:     chef.add_recipe "7-zip"
[2013-08-01 14:57:17 -0400] joefitzgerald:     chef.file_cache_path = "c:/vagrant/chef/cache"
[2013-08-01 14:57:17 -0400] joefitzgerald:     chef.file_backup_path = "c:/vagrant/chef/backup"
[2013-08-01 14:57:18 -0400] joefitzgerald:   end
[2013-08-01 14:57:47 -0400] joefitzgerald: https://github.com/opscode-cookbooks/windows/blob/master/libraries/helper.rb#L72 / https://github.com/opscode-cookbooks/windows/blob/master/libraries/helper.rb#L76
[2013-08-01 14:58:10 -0400] juliancdunn: if you don't move the file_cache_path it works ok?
[2013-08-01 14:58:36 -0400] joefitzgerald: c:\vagrant is a symlink to \\vmware-host\Shared Folders\-vagrant , which is shared from my mac
[2013-08-01 14:58:50 -0400] joefitzgerald: if i leave file_cache_path at /var/chef/cache, it's fine
[2013-08-01 14:59:01 -0400] perryofpeek: corehook: try replacing the pskill bit with somthing simple like ls -al /root ?
[2013-08-01 14:59:18 -0400] joefitzgerald: the weird thing is that files DO get written there and the file *IS* touched (0 bytes)
[2013-08-01 14:59:19 -0400] perryofpeek: that should work and prove your sudo is working
[2013-08-01 14:59:38 -0400] juliancdunn: joefitzgerald: what do you mean by "symlink"
[2013-08-01 14:59:59 -0400] joefitzgerald: i mean mklink /D "$MountPoint" "\\vmware-host\Shared Folders\$ShareName"
[2013-08-01 15:00:21 -0400] joefitzgerald: $MountPoint == c:\vagrant, @ShareName == -vagrant
[2013-08-01 15:00:57 -0400] juliancdunn: hmm, maybe that's the problem - perhaps Chef can't deal with writing cache files across those kinds of links
[2013-08-01 15:00:57 -0400] joefitzgerald: https://github.com/WinRb/vagrant-windows/blob/vagrant-1.2/lib/vagrant-windows/scripts/mount_volume.vmware.ps1.erb#L44
[2013-08-01 15:01:20 -0400] joefitzgerald: julancdunn: except chef is writing files there :)
[2013-08-01 15:01:25 -0400] juliancdunn: glad to hear you're having luck with the beta of vagrant-windows though
[2013-08-01 15:01:26 -0400] joefitzgerald: e.g. the stacktrace ends up there just fine
[2013-08-01 15:01:35 -0400] joefitzgerald: juliancdunn: i'm making it work with fusion
[2013-08-01 15:01:39 -0400] perryofpeek: Has anyone run chef using 64bit ruby 2.0 on windows 2012? does chef run ok on 64Bit ruby on *nix?
[2013-08-01 15:01:42 -0400] juliancdunn: joefitzgerald: nice!
[2013-08-01 15:02:02 -0400] joefitzgerald: https://github.com/WinRb/vagrant-windows/pull/72
[2013-08-01 15:02:11 -0400] joefitzgerald: it does work
[2013-08-01 15:02:43 -0400] joefitzgerald: i just have a weird extra requirement to keep my chef file cache local because i'm throwing all the microsoft ISOs up on S3 (password protected) and want to minimize downloads during development
[2013-08-01 15:02:52 -0400] joefitzgerald: so i don't want it living in the VM
[2013-08-01 15:03:23 -0400] juliancdunn: joefitzgerald: obvs. usually I serve them through an HTTP server on the host
[2013-08-01 15:03:38 -0400] juliancdunn: e.g. 10.0.0.2 on VirtualBox -- not sure what Fusion does
[2013-08-01 15:03:43 -0400] joefitzgerald: you can't use paths like \\pathto\myshare
[2013-08-01 15:03:51 -0400] joefitzgerald: with file_cache_path
[2013-08-01 15:04:06 -0400] joefitzgerald: that seems like unnecessary copying of files though, doesn't it?
[2013-08-01 15:04:16 -0400] juliancdunn: yeah, it is a workaround
[2013-08-01 15:04:18 -0400] fiebre: hi
[2013-08-01 15:04:20 -0400] joefitzgerald: i would log this as a bug except that the tickets system is down :)
[2013-08-01 15:04:32 -0400] juliancdunn: I take it you've already tried all manner of escaping slashes
[2013-08-01 15:04:36 -0400] joefitzgerald: yah
[2013-08-01 15:04:41 -0400] fiebre: i have a generic question on updateing my chef server on centos 6 from 11.4.0 to 11.6.0
[2013-08-01 15:04:46 -0400] gchristensen: has anyone used https://github.com/VendaTech/chef-cookbook-ssl before? it looks extensive and thorough
[2013-08-01 15:04:49 -0400] juliancdunn: yeah, news at 11 on the ticketing system... we're preparing a blog post
[2013-08-01 15:04:52 -0400] fiebre: stopping chef server - and just installing the new rpm
[2013-08-01 15:04:56 -0400] joefitzgerald: tried ////, file:////, \\\\, \/\/
[2013-08-01 15:05:10 -0400] juliancdunn: tried >.< ? </kidding>
[2013-08-01 15:05:13 -0400] joefitzgerald: :)
[2013-08-01 15:05:22 -0400] fiebre: and doing 'sudo chef-server-ctl reconfigure' does the trick ?
[2013-08-01 15:28:30 -0400] bigfleet: http://downforeveryoneorjustme.com/wiki.opscode.com
[2013-08-01 15:53:24 -0400] jtimberman: bigfleet: per status.opscode.com - down for unscheduled maintainence.
[2013-08-01 15:53:35 -0400] bigfleet: @jtimberman: tyvm
[2013-08-01 15:59:16 -0400] juliancdunn: please see http://www.opscode.com/blog/2013/08/01/security-breach-user-information-for-tickets-opscode-com-and-wiki-opscode-com-compromised/
[2013-08-01 16:03:03 -0400] gchristensen: how do folks distribute the encrypted data bag keys?
[2013-08-01 16:06:52 -0400] mjcdiggity: Running into this error when using data_bag_item:
[2013-08-01 16:06:53 -0400] mjcdiggity: Chef::Exceptions::ValidationFailed: You must have an 'id' or :id key in the raw data
[2013-08-01 16:06:53 -0400] mjcdiggity: yet, data bag item is read properly, and does have an id key in the data. Not sure why this exception is being raised. chef 11.4.2
[2013-08-01 16:16:41 -0400] timsmith: anyone at opscode aware that jira is throwing an nginx bad gateway error
[2013-08-01 16:17:32 -0400] miah: timsmith: yes. http://www.opscode.com/blog/2013/08/01/security-breach-user-information-for-tickets-opscode-com-and-wiki-opscode-com-compromised/
[2013-08-01 16:17:47 -0400] timsmith: shitty
[2013-08-01 16:18:25 -0400] miah: they should set up a maintenance page explaining the situation rather than a nginx bad gateway error
[2013-08-01 16:18:32 -0400] timsmith: yep
[2013-08-01 16:19:56 -0400] joelnn: the list of things we all should do is very long, lets give them a break
[2013-08-01 16:19:59 -0400] miah: though, im honestly not sure if the nginx proxy module actually supports that. thats why i use haproxy for proxying =)
[2013-08-01 16:20:29 -0400] miah: joelnn: lol ya. i've been picking on them forever for using nginx for proxying though.
[2013-08-01 16:20:33 -0400] ssd7: miah: I'll add it to our list.  We hope to restore the wiki/tickets from backups soon once we verify that the vulnerability is plugged.
[2013-08-01 16:20:45 -0400] miah: ssd7: im sure. take your time.
[2013-08-01 16:21:03 -0400] miah: i'm pretty sure opscode knows i have much <3 for them anyways
[2013-08-01 16:21:09 -0400] joelnn: nginx works very well for proxying, I believe you can setup a 502 error handler that redirects
[2013-08-01 16:21:23 -0400] ssd7: miah: indeed we do :)
[2013-08-01 16:22:25 -0400] miah: joelnn: ah ya. its configured outside the proxy module though
[2013-08-01 16:22:46 -0400] miah: joelnn: it works fine for proxying, but not load balancing. beyond the very basics.
[2013-08-01 16:23:23 -0400] miah: joelnn: it lacks ways to set backend limits, eg backend app servers can only handle n conections.
[2013-08-01 16:23:37 -0400] joelnn: hm really
[2013-08-01 16:23:46 -0400] miah: yar
[2013-08-01 16:23:51 -0400] aneto: orly?
[2013-08-01 16:24:16 -0400] miah: so, if your backend app server performs best with ~20 concurrent connections, nginx will gladly send it as many as it can and overwhelm it.
[2013-08-01 16:24:24 -0400] timsmith: nginx should really be avoided as a load balancer
[2013-08-01 16:25:17 -0400] miah: indeed. i mean. its fine for the most basic things.
[2013-08-01 16:25:30 -0400] miah: and I <3 nginx as it is. but for load balancing there are better options
[2013-08-01 16:25:49 -0400] timsmith: I knocked 30% latency off my APIs when I switched to haproxy
[2013-08-01 16:25:53 -0400] joelnn: http://wiki.nginx.org/HttpUpstreamModule it supports least_conn balancing, which is probably what you want
[2013-08-01 16:25:58 -0400] miah: joelnn: nope
[2013-08-01 16:26:13 -0400] miah: because what that does is says "out of all my upstreams, who has the least number of connections"
[2013-08-01 16:26:17 -0400] gchristensen: that only means it'll take your app servers down around the same time. :)
[2013-08-01 16:26:26 -0400] miah: it doesn't take into account that a upstream / backend server has a limit
[2013-08-01 16:26:51 -0400] joelnn: so don't let your backend accept more than X connections, whats the difference?
[2013-08-01 16:27:12 -0400] miah: http://blog.exceliance.fr/2011/06/28/play_with_maxconn_avoid_server_slowness_or_crash/
[2013-08-01 16:27:22 -0400] miah: that explains it pretty well
[2013-08-01 16:27:46 -0400] gchristensen: joelnn: it'd be better if the LB knew the difference and didn't overload the server, or have to get rejected by the server, first
[2013-08-01 16:27:49 -0400] joelnn: hm the author is a load balancer vendor :)
[2013-08-01 16:27:55 -0400] miah: joelnn: because people configure shit incorrectly all the time. and just because your unicorn is set to only spawn 6 processes its probably also configured to queue thousands of connections
[2013-08-01 16:28:27 -0400] miah: joelnn: yes, and you can find the same topic discussed fully in http://www.amazon.com/The-Art-Capacity-Planning-Resources/dp/0596518579
[2013-08-01 16:28:42 -0400] miah: but its easier to link to that blog
[2013-08-01 16:28:42 -0400] joelnn: configuring things incorrectly is kind of a red herring, wrong config can be anywhere, including your LB
[2013-08-01 16:28:59 -0400] miah: joelnn: yup. totally agree.
[2013-08-01 16:29:17 -0400] miah: and most community cookbooks include templates that out of the box incorrectly configure things =)
[2013-08-01 16:29:25 -0400] aneto: haha
[2013-08-01 16:30:10 -0400] miah: which is why im now writing configuration generators rather than using templates
[2013-08-01 16:30:42 -0400] miah: then i dont need to worry about which random configuration variable i've missed adding an attribute for
[2013-08-01 16:31:17 -0400] joelnn: hm don't you generate configs via a template? or you mean you're not using the community template anymore
[2013-08-01 16:32:06 -0400] miah: you _can_ generate configs with the template resource. or you can write some code and create a config resource that generates configs for your app
[2013-08-01 16:32:42 -0400] miah: certainly not the cleanest config generator, but its simple: https://github.com/miah/chef_logstash/blob/master/libraries/provider_logstash_config.rb#L165-L228
[2013-08-01 16:33:45 -0400] joefitzgerald: juliancdunn: https://github.com/opscode/chef/blob/d575816324e4f2f1391659967125c3503683b86a/lib/chef/file_content_management/deploy/mv_windows.rb#L67
[2013-08-01 16:33:59 -0400] joefitzgerald: julaincdunn: that's the erroring code
[2013-08-01 16:34:23 -0400] joefitzgerald: it can't create ACL because it's a symlink to a network share, and windows can't apply an ACL to a windows share
[2013-08-01 16:34:50 -0400] aneto: miah: is that what people to refer to as a hwrp?
[2013-08-01 16:34:55 -0400] miah: aneto: yes
[2013-08-01 16:35:23 -0400] joelnn: miah: I'm not against writing code, but I find that kind of opaque. I don't get a sense of what is being configured
[2013-08-01 16:35:28 -0400] aneto: miah: yeah being the noob that I am I was pretty intimidated looking at the runit cookbook =(
[2013-08-01 16:35:37 -0400] juliancdunn: joefitzgerald: yeah, I read that code, though I didn't understand it
[2013-08-01 16:35:40 -0400] miah: joelnn: yes, nothing is being configured here.
[2013-08-01 16:35:56 -0400] juliancdunn: definitely worth a bug report once we restore public JIRA joefitzgerald
[2013-08-01 16:36:06 -0400] miah: joelnn: take a look at the README.md for some examples
[2013-08-01 16:36:28 -0400] joefitzgerald: it's simple check if the target path includes a symlink whose target is a share if so, skip ACL
[2013-08-01 16:36:52 -0400] joefitzgerald: it's not possible to create a hardlink or a directory junction to a network share so no need to guard against those
[2013-08-01 16:37:39 -0400] miah: joelnn: in this case, i'm writing resource providers. im not writing a recipe to be directly applied to a node. you still have to write a recipe that uses this resource provider to implement your business logic
[2013-08-01 16:39:14 -0400] Sauraus: @jtimberman how long does it usually take to get feedback on tickets and pull requests?
[2013-08-01 16:40:33 -0400] joelnn: miah: I see. so to the user, it's almost like applying a template
[2013-08-01 16:40:53 -0400] aneto: is there a foodfight episode about hwrp?
[2013-08-01 16:41:20 -0400] joelnn: but what is the win here, the user its great but whats the diff vs rendering an erb? I'm not an expert here
[2013-08-01 16:41:27 -0400] aneto: I would like to understand them better, the runit cookbook library seems like magic =(
[2013-08-01 16:41:57 -0400] joelnn: but seems like you can perhaps implement the same things in an erb, you can iterate through things like your generator does
[2013-08-01 16:42:25 -0400] joelnn: granted I would often rather see code than a complex erb
[2013-08-01 16:43:15 -0400] miah: joelnn: kind of
[2013-08-01 16:43:49 -0400] suffix: how would I go about setting up multiple chef environments?
[2013-08-01 16:43:59 -0400] miah: joelnn: the difference is, logstash can change and mature. the user can configure it as needed, without worry that the default template has configuration that does not apply to their environment
[2013-08-01 16:44:05 -0400] bean__: suffix: are you on chef server?
[2013-08-01 16:44:12 -0400] suffix: yes
[2013-08-01 16:44:19 -0400] bean__: you just create it then?
[2013-08-01 16:44:20 -0400] bean__: heh
[2013-08-01 16:44:35 -0400] suffix: no, I mean, how do environments work in chef
[2013-08-01 16:44:41 -0400] miah: joelnn: or that the template erb included has out of date options, or is missing a <%= @variable %> covering a specific feature
[2013-08-01 16:44:42 -0400] bean__: oh
[2013-08-01 16:44:51 -0400] bean__: suffix: http://docs.opscode.com/essentials_environments.html
[2013-08-01 16:45:02 -0400] suffix: bean__ already reading it
[2013-08-01 16:45:09 -0400] miah: template erb's tend to make lots of assumptions
[2013-08-01 16:45:09 -0400] suffix: need a better explaination though.
[2013-08-01 16:45:20 -0400] joelnn: miah: I see, I guess I can grant that. Though if there is some new syntax in logstash configs, I'd give a better chance that the user can edit a template than change your generator
[2013-08-01 16:45:36 -0400] miah: joelnn: you dont need to change the generator though
[2013-08-01 16:45:38 -0400] bean__: suffix: basically the way we use it is each env contains attributes specific to that env
[2013-08-01 16:45:49 -0400] bean__: like staging contains staging database hosts, etc.
[2013-08-01 16:45:52 -0400] joelnn: miah: really, config syntax stays constant huh :)
[2013-08-01 16:45:55 -0400] miah: i actually generate resources based on the logstash source code. so worrying about syntax is less of a issue =)
[2013-08-01 16:46:16 -0400] suffix: bean__ so I'd need to set up a different repo for each environment?
[2013-08-01 16:46:24 -0400] bean__: no, the env lives on the serv.er
[2013-08-01 16:46:26 -0400] bean__: server*
[2013-08-01 16:47:08 -0400] suffix: bean__ ok. so are there any tutorials out there on setting up additional environments?
[2013-08-01 16:47:19 -0400] rracterr: I could use some eyes on a problem So I'm running the community Users cookbook, its working wonderfully on centos, but on windows its blowing off when it goes to create the home/.ssh/authorized_keys file and its complaint is it cant find the directory but the rub here is the directory exists and its successfully created the existing authorized_keys file in that directory on previous runs so yea http://pastebin.com/gTiPgpXm
[2013-08-01 16:47:27 -0400] miah: joelnn: before the config is rendered, i actually push all the options into a resource that is based on the plugin in question to validate all of the parameters you are passing to be somewhat valid
[2013-08-01 16:48:31 -0400] aspiers: can anyone explain this weird behaviour? https://gist.github.com/aspiers/6133080
[2013-08-01 16:49:47 -0400] suffix: ok
[2013-08-01 16:51:05 -0400] suffix: so I have a data bag that stores hostnames for various nodes in my cluster. Is there a way to create different versions of a data bag for each environment?
[2013-08-01 16:51:27 -0400] rracterr: suffix: looked into ironfan yet?
[2013-08-01 16:51:36 -0400] miah: you can just put different environments in the same databag under a different key, or a databag named after each environment
[2013-08-01 16:51:37 -0400] suffix: rracterr no. what is it?
[2013-08-01 16:51:58 -0400] miah: i would avoid ironfan unless you want to replace all of your cookbooks with all of those from infochimps
[2013-08-01 16:51:58 -0400] suffix: ok
[2013-08-01 16:52:13 -0400] miah: those books are heavily coupled
[2013-08-01 16:52:57 -0400] rracterr: shaa lalalalala la uh huh. was down up in new amsterdam, staring at this yellow haired girl.
[2013-08-01 16:55:23 -0400] adnichols: anyone have a suggestion on a good openldap cookbook? The opscode maintained version needs quite a bit of work and there are a variety of forks in a variety of states
[2013-08-01 16:57:00 -0400] gchristensen: is there a way to reencrypt all databags with a new key?
[2013-08-01 16:57:05 -0400] gchristensen: s/key/secret/
[2013-08-01 16:57:47 -0400] miah: gchristensen: decrypt them and then re-encrypt them
[2013-08-01 16:58:11 -0400] gchristensen: is that a manual process, or is there an automated way to do that?
[2013-08-01 16:58:18 -0400] miah: yes, unless you write one.
[2013-08-01 16:58:47 -0400] miah: so the basics are covered
[2013-08-01 16:58:48 -0400] gchristensen: surely
[2013-08-01 16:58:56 -0400] miah: encrypted / decrypt pretty much
[2013-08-01 17:04:02 -0400] rracterr: aha the users cookbook works great on windows once, but the second time you run it it blows off because it didnt give the user rights to view the files it created the first time easy fix
[2013-08-01 17:10:45 -0400] Guest71810: clear
[2013-08-01 17:15:21 -0400] Guest71810: hey can someone help me out with setting up  test kitchen -- i am running a newer version of vagrant (package) and when running `kitchen test` i either get a Message: undefined method `[]' for nil:NilClass or a vagrant is not in bundle exception
[2013-08-01 17:15:56 -0400] Guest71810: i tried installing vagrant-wrapper but there still appears to be some conflict with the package and the gem
[2013-08-01 17:18:39 -0400] ssd7: miah: tickets.opscode.com and wiki.opscode.com now redirect to the security blog post. :)
[2013-08-01 17:20:04 -0400] Guest71810: anyone....running test-kitchen with vagrant 1.2?
[2013-08-01 17:25:40 -0400] rracterr: Nice security bulletin opsCode guys, transparency for the win
[2013-08-01 17:28:00 -0400] Sauraus: +1 on the transparency!
[2013-08-01 17:28:21 -0400] rracterr: why does vorpal blade pop into my mind anytime I see +1
[2013-08-01 17:29:19 -0400] Guest71810: any test kitchen users?
[2013-08-01 17:31:35 -0400] DrHappyAngry: hello there
[2013-08-01 17:32:14 -0400] DrHappyAngry: I was curious what the polite way to contact a cookbook maintainer would be
[2013-08-01 17:32:46 -0400] joelnn: "Greetings, I utilize your fine cookbook, and I have a concern"
[2013-08-01 17:33:23 -0400] DrHappyAngry: there's several email addresses on the nagios cookbook, and I'd like to get a hold of somebody to request a change
[2013-08-01 17:33:41 -0400] DrHappyAngry: I could just email them all, but wasn't sure if that'd be considered rude and just get ignored
[2013-08-01 17:34:00 -0400] joelnn: most polite would probably be to send a pull request
[2013-08-01 17:35:23 -0400] DrHappyAngry: what do you mean by pull request, would I need to basically fork the cookbook with my change in it and send them a link to it?
[2013-08-01 17:35:43 -0400] kallistec: aspiers: that kind of thing is why we rewrote the attributes implementation in chef 11
[2013-08-01 17:36:02 -0400] aspiers: kallistec: ah ok, it's a bug then?
[2013-08-01 17:36:10 -0400] joelnn: yep, unless you're worried that your change might not be good for another user of the cookbook, they will appreciate you making it easy for them to apply your change
[2013-08-01 17:36:25 -0400] joelnn: and if they don't apply, you have a fork that works for you.
[2013-08-01 17:36:53 -0400] joelnn: if its too big a change for you to do yourself, then you're going to have an uphill battle getting them to do it for you
[2013-08-01 17:37:11 -0400] DrHappyAngry: alrighty then, I think I can do that
[2013-08-01 17:37:18 -0400] DrHappyAngry: thanks
[2013-08-01 17:37:23 -0400] joelnn: sure
[2013-08-01 17:40:52 -0400] kallistec: aspiers: yeah, the `@current_nesting_level` gets out of sync in the chef 10 attributes code. Not really fixable outside of rewrite, hence rewrite in chef 11
[2013-08-01 17:41:09 -0400] kallistec: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-08-01 17:41:13 -0400] dgarstang: Is there an easy way to determine if 'chef-server-ctl reconfigure' has been run on a server yet?
[2013-08-01 17:41:35 -0400] bean__: dgarstang: it shouldn't hurt to run it again
[2013-08-01 17:41:37 -0400] bean__: i'd think
[2013-08-01 17:41:55 -0400] rracterr1: DrHappyAngry: correct
[2013-08-01 17:41:56 -0400] dgarstang: bean__: would rather not... call me picky
[2013-08-01 17:42:15 -0400] bean__: I don't know how often you're going to be running that, in reality, dgarstang
[2013-08-01 17:42:16 -0400] joelnn: you are picky sir
[2013-08-01 17:42:48 -0400] dgarstang: bean__: its' part of a fabric install script. don't want to run configure again if it's already been run
[2013-08-01 17:43:09 -0400] dgarstang: bean__: I think I can just check existance of /etc/chef.
[2013-08-01 17:43:39 -0400] joelnn: dgarstang: what I often do is 'touch' a particular file.
[2013-08-01 17:43:56 -0400] dgarstang: joelnn: or that... prolly better. Thanks
[2013-08-01 17:44:10 -0400] joelnn: sure
[2013-08-01 17:44:48 -0400] dgarstang: bean__: :P
[2013-08-01 17:45:22 -0400] bean__: dgarstang: how many chef servers are you going to be setting up? o.o
[2013-08-01 17:45:48 -0400] joelnn: I guess he wants to have an idempotent installer :)
[2013-08-01 17:46:15 -0400] dgarstang: bean__: Don't know. That's not the point. Might be 1, might be 10.
[2013-08-01 17:47:04 -0400] dgarstang: joelnn: he does. stuff breaks. :)
[2013-08-01 17:47:38 -0400] joelnn: yes it does.
[2013-08-01 17:53:06 -0400] gkra: brainfart + googlefail how do I delete an attribute on a node within a recipe?
[2013-08-01 17:54:12 -0400] rracterr1: gkra: that seems like bad form...
[2013-08-01 17:54:19 -0400] gkra: well...
[2013-08-01 17:54:38 -0400] gkra: what's the recommended wya to clean out unwanted/unused attributes from nodes?
[2013-08-01 17:54:45 -0400] rracterr1: I mean, its one thing to keep stuff from going back via ohai, but if its important you cant remove the attribute at execution time that is questionable
[2013-08-01 17:55:04 -0400] rracterr1: s/cant/can
[2013-08-01 17:55:34 -0400] rracterr1: gkra: can you give an example?
[2013-08-01 17:55:45 -0400] gkra: Sure. I had done:
[2013-08-01 17:56:01 -0400] gkra: node.set['sysctl']['params']['vm']['swappiness'] = 10
[2013-08-01 17:56:12 -0400] gkra: followed by an include_recipe "sysctl"
[2013-08-01 17:56:25 -0400] gkra: don't want it anymore, so how do I make sure the attribute goes away?
[2013-08-01 17:56:57 -0400] joelnn: you want attribute scope basically
[2013-08-01 17:57:10 -0400] joelnn: good queston, I would like to know the answer too
[2013-08-01 17:57:10 -0400] rracterr1: Where did you set that attribute to start with?
[2013-08-01 17:57:23 -0400] gkra: in the recipe
[2013-08-01 17:57:27 -0400] rracterr1: ack
[2013-08-01 17:57:32 -0400] gkra: well, my policy cookbook.
[2013-08-01 17:58:05 -0400] rracterr1: chef is for the most part an MVC system without the V so its really just M/C. your C = recipe your M = attributes you shouldnt put both in the same place unless they are defaults
[2013-08-01 17:58:20 -0400] gkra: yeah growing pains
[2013-08-01 17:58:50 -0400] rracterr1: if you had that attribute at the environment level then you'd just pull it if you find yourself putting tons of attributes at the node level, your really gonna hate life as you scale, or your gonna become really great with knife command lines
[2013-08-01 17:59:12 -0400] gkra: so I'm learning
[2013-08-01 17:59:29 -0400] rracterr1: I'm not intending to spank you, just stating what might not be obvious for first timers
[2013-08-01 17:59:40 -0400] gkra: understood, and appreciated :)
[2013-08-01 17:59:55 -0400] joelnn: hm are you saying that persisted that attribute to the chef server?
[2013-08-01 18:00:10 -0400] gkra: yeah
[2013-08-01 18:00:13 -0400] gkra: apparently
[2013-08-01 18:00:55 -0400] joelnn: I see. yet another reason I am staying with chef-solo for a while.
[2013-08-01 18:01:34 -0400] rracterr1: not really, if your setting the attribute in the cookbook then your only option is to remove it and republish, but then if you've got other nodes that still need it yea life gets complicated personally I'd spend the 10 minutes to take the 'policy' cookbook attributes and put them at your environment level, kill them in the cookbook, and override at the node as needed...
[2013-08-01 18:02:04 -0400] troyready: +1
[2013-08-01 18:02:20 -0400] rracterr1: vorpal blade
[2013-08-01 18:02:33 -0400] joelnn: what is actually the point of setting a node attribute in a cookbook, such that it persists?
[2013-08-01 18:03:13 -0400] joelnn: I thought you were setting the attribute so that the other recipe picks it up, sort of as a way of encapsulating that detail
[2013-08-01 18:03:23 -0400] joelnn: but no point in persisting it
[2013-08-01 18:03:52 -0400] gkra: rracterr1: well, dealing with a large app infrastructure, so I have at minimum 100s of nodes that need the same configuration. putting it in the policy attributes makes sense, for the subset of environment that gets *that* policy
[2013-08-01 18:04:13 -0400] gkra: rracterr1: my mistake was doing a node.set in the recipe instead of a default[] in the attributes.
[2013-08-01 18:04:22 -0400] rracterr1: yep
[2013-08-01 18:05:10 -0400] gkra: lol, on the bright side, we're talking about deleting one environment and rebuilding it from scratch, to ensure all our automation works the way we think it should.
[2013-08-01 18:05:16 -0400] joelnn: if you put it in the default attributes for that cookbook, would the other recipe see it?
[2013-08-01 18:05:40 -0400] gkra: I think attributes are all loaded at compile time (?)
[2013-08-01 18:06:01 -0400] rracterr1: I highly recommend BCP tests as often as possible stand up your entire enterprise (assuming your sufficiently coded) once a month, for the cost its insanely reassuring.
[2013-08-01 18:06:01 -0400] gkra: I think I'd still need to include_recipe for it to happen, though...
[2013-08-01 18:06:09 -0400] joelnn: yeah, I'm just not clear on what happens if the other cookbook also defines a default
[2013-08-01 18:06:42 -0400] joelnn: I guess you could still do an override[] attribute though?
[2013-08-01 18:06:45 -0400] gkra: joelnn: that's when you use "normal/set", "override" and friends...
[2013-08-01 18:06:46 -0400] gkra: yes.
[2013-08-01 18:07:13 -0400] gkra: ugh there's no knife command to just delete an attribute from a node?
[2013-08-01 18:14:15 -0400] prometheanfire: so... was tickets.opscode.com taken down because of the breach and how do I reset that password?
[2013-08-01 18:14:53 -0400] rracterr1: gkra: knife node edit <node>
[2013-08-01 18:18:10 -0400] tubbo: hey guys, i'm trying to watch my server go through a run of chef-solo. what's the filename for the log that chef writes to?
[2013-08-01 18:18:37 -0400] gkra: rracterr1: well, that doesn't scale well :(
[2013-08-01 18:18:38 -0400] gkra: $ knife node list | wc -l
[2013-08-01 18:18:38 -0400] gkra: 1012
[2013-08-01 18:19:01 -0400] koaps: tubbo: look under /var/chef/cache I think
[2013-08-01 18:19:35 -0400] tubbo: hmm, not there
[2013-08-01 18:19:38 -0400] tubbo: just chef-stacktraceout
[2013-08-01 18:19:41 -0400] tubbo: .out*
[2013-08-01 18:19:49 -0400] tubbo: i don't think there was an issue so that wouldn't get written.
[2013-08-01 18:21:32 -0400] rracterr1: its actually /var/log/chef/client.log
[2013-08-01 18:22:14 -0400] tubbo: hmm, that file doesn't exist either
[2013-08-01 18:22:18 -0400] tubbo: that's weird
[2013-08-01 18:22:29 -0400] rracterr1: whats your client.rb file look like?
[2013-08-01 18:22:44 -0400] rracterr1: wait, did you actually run chef-client ? :)
[2013-08-01 18:22:50 -0400] tubbo: pretty sure
[2013-08-01 18:23:01 -0400] tubbo: i mean it's an automated thing so that's kinda one thing i'd like to figure out :)
[2013-08-01 18:23:07 -0400] tubbo: actually wait
[2013-08-01 18:23:10 -0400] tubbo: i just answered my own question
[2013-08-01 18:23:23 -0400] tubbo: there's no way chef-client could've run because the server didn't have an IP :P
[2013-08-01 18:23:32 -0400] tubbo: now it does, so chef-client should run.
[2013-08-01 18:26:36 -0400] pwelch: anyone have recommendations for a AWS instance size for hosting an Open-Source Chef Server?
[2013-08-01 18:27:22 -0400] prometheanfire: it used to be ruby based, given that
[2013-08-01 18:27:33 -0400] prometheanfire: a couple of exabytes should do
[2013-08-01 18:29:36 -0400] joelnn: pwelch: how many client nodes?
[2013-08-01 18:31:01 -0400] pwelch: joelnn: less than 50
[2013-08-01 18:31:48 -0400] pwelch: I know Chef 11 Server can handle a lot of clients and nodes but was curious what people have experienced minimum hardware or aws size
[2013-08-01 18:32:09 -0400] joelnn: I guess m1.medium should be fine, but I can't vouch.
[2013-08-01 18:33:09 -0400] joelnn: I suggest just keep backups, and plan to be able to reinstall the server
[2013-08-01 18:33:23 -0400] joelnn: then you can start with a really small instance, and see if its enough.
[2013-08-01 18:33:30 -0400] pwelch: joelnn: ok, thanks. knife-server plugin is awesome for that!
[2013-08-01 18:34:01 -0400] zuhaib: We have 65 nodes using a m1.xlarge and that is a bit overkill
[2013-08-01 18:34:17 -0400] zuhaib: But we do a lot of searches and wanted the power
[2013-08-01 18:34:23 -0400] zuhaib: we also plan to double that node count
[2013-08-01 18:34:41 -0400] zuhaib: our biggest issue is we want HA for our chef server in the future
[2013-08-01 18:35:00 -0400] joelnn: thats a good point. if you use RDS then you may have good performance with a small instance
[2013-08-01 18:35:19 -0400] joelnn: and HA is simpler
[2013-08-01 18:36:13 -0400] joelnn: I would definitely scale RDS first, your apps can benefit from that as well.
[2013-08-01 18:36:48 -0400] zuhaib: Chef 11 does MySQL backend? I thought they dropped that...
[2013-08-01 18:36:55 -0400] joelnn: postgresql
[2013-08-01 18:37:23 -0400] zuhaib: yeah RDS does not do postgresql
[2013-08-01 18:37:48 -0400] joelnn: oh. whoops. I don't use RDS, can you tell :)
[2013-08-01 18:38:46 -0400] zuhaib: ah, yeah we use RDS for MySQL
[2013-08-01 18:39:08 -0400] joelnn: thats really a shame, on both ends. how much more effort would it be to support mysql, or postgres
[2013-08-01 18:39:53 -0400] zuhaib: well I was at the Chef Summit 2012 in Settle and I remember when asked if mysql support should be dropped most voted yes
[2013-08-01 18:40:26 -0400] pwelch: I would be curious to hear about HA chef server though
[2013-08-01 18:40:37 -0400] joelnn: this is why there is a SQL standard. though I know that only goes so far.
[2013-08-01 18:41:02 -0400] gchristensen: joelnn: its tragic that MySQL doesn't follow it.
[2013-08-01 18:41:17 -0400] sfalcon: There's enough effort in supporting multiple database systems that it constitutes a very real tradeoff in terms of being able to work other features/enhancements/optimizations
[2013-08-01 18:41:22 -0400] joelnn: still facebook has a huge mysql infrastructure, and I would assume opscode has other customers who do as well
[2013-08-01 18:41:34 -0400] joelnn: and there must be customers on oracle
[2013-08-01 18:41:42 -0400] gchristensen: http://dev.mysql.com/doc/refman/5.0/en/differences-from-ansi.html
[2013-08-01 18:43:27 -0400] kallistec: joelnn: Also note that mysql as a project uses the GPL in a hostile and extractive way to force people to buy licenses, which prevents us from shipping compiled code with mysql support, so no omnibus
[2013-08-01 18:44:18 -0400] gchristensen: oohh... I forgot about that issuewhen bundling mysql binaries with my omnibus packages.
[2013-08-01 18:45:48 -0400] joelnn: no closed-source omnibus, right? open source is still GPL compatible?
[2013-08-01 18:46:23 -0400] joelnn: IANAL but this "license compatibility" thing works somehow.
[2013-08-01 18:46:37 -0400] kallistec: joelnn: not necessarily because GPL and apache2 are not necessarily compatible
[2013-08-01 18:47:32 -0400] btm: No knife plugin code review today.
[2013-08-01 18:47:40 -0400] kallistec: anyway, if your primary objective is just to not run the database, this might work: https://postgres.heroku.com
[2013-08-01 18:48:21 -0400] kallistec: you'll be in some seriously unexplored territory though
[2013-08-01 18:50:13 -0400] joelnn: GPL is not "viral" for protocols, right? so you just need a mysql client implementation other than the native one from Oracle
[2013-08-01 18:50:47 -0400] coderanger: joelnn: That is thought to be correct
[2013-08-01 18:50:51 -0400] coderanger: AGPL is though
[2013-08-01 18:50:54 -0400] coderanger: ::cough::mongo::
[2013-08-01 18:51:31 -0400] joelnn: alright good, glad I found a loophole :)
[2013-08-01 18:52:47 -0400] joelnn: I'm using a mysql backend for powerdns, so its great when there is "synergy" between these things. if you have HA MySQL you don't want to go solve HA Postgres. but I do understand.
[2013-08-01 18:52:58 -0400] Otterley: hi folks
[2013-08-01 18:53:23 -0400] Otterley: anyone know whether it's possible to query chef to find all nodes that have some attribute, but only in "normal" vs. "default"?
[2013-08-01 18:53:32 -0400] coderanger: Otterley: No
[2013-08-01 18:53:35 -0400] Otterley: fark.
[2013-08-01 18:53:43 -0400] coderanger: Otterley: Attrs are merged before indexing
[2013-08-01 18:54:01 -0400] Otterley: I'm trying to rid our nodes of a normal attribute that we don't want anymore
[2013-08-01 18:54:47 -0400] coderanger: Might be a bit slow, but if you only have to do it once ...
[2013-08-01 18:55:05 -0400] Otterley: yeah, the trouble is that it's really race
[2013-08-01 18:55:06 -0400] Otterley: yeah, the trouble is that it's really racy
[2013-08-01 18:55:13 -0400] coderanger: Yarp :-(
[2013-08-01 18:55:31 -0400] coderanger: The search wouldn't help that though
[2013-08-01 18:55:44 -0400] Otterley: yeah, but at least the query would be way faster :)
[2013-08-01 18:55:59 -0400] Otterley: iterating through nodes is a pain
[2013-08-01 18:59:04 -0400] coderanger: python -c 'import chef; api = chef.autoconfigure(); for n in chef.Nodes.list().itervalues(): del n['foo']; n.save()
[2013-08-01 18:59:34 -0400] eherot: is there currently any way to view OpsCode/Chef JIRA tickets?
[2013-08-01 19:00:48 -0400] coderanger: eherot: No, things are still down as we do analysis
[2013-08-01 19:01:07 -0400] eherot: coderanger: I figured.  thanks.
[2013-08-01 19:01:13 -0400] eherot: coderanger: any rough etas yet?
[2013-08-01 19:01:46 -0400] coderanger: Check status.opscode.com, I'm specifically staying out of the incident unless they want my help (too many cooks, etc)
[2013-08-01 19:01:47 -0400] eherot: also, should those of us who use hosted atlassian stuff in other parts of our job be concerned? :-)
[2013-08-01 19:15:03 -0400] trobrock: anyone know if there is a way to specify the chef_environment in a test-kitchen run?
[2013-08-01 19:22:55 -0400] cobby: Hello  Quick question  I have a library that takes data from a recipe and using attr_accessor I am able to automatically create variables for credentials so I do not need to set attributes which are viewable by knife node edit.  My question is this  I can use puts and see the variables when the recipe is used.  however  when I try to use it in an "execute" and have it enclosed in " " it tells me its a method.  I am unsure why this is happening.  I ca
[2013-08-01 19:22:56 -0400] cobby: fix this by reassigning the dynamically generated variable to a new variable which is the same data, but a different variable.  Not sure why this is happening..  Any helps would be awesome.
[2013-08-01 19:23:33 -0400] jschoolcraft: I'm trying to follow "The Berkshelf Way" and build a cookbook for a service that requires ruby, and I want to install ruby via fnichols chef-rbenv cookbook.  Without adding it to the recipe run list.  Or maybe I'm taking that part wrong (run list shouldn't be but the default recipe)
[2013-08-01 19:25:12 -0400] eherot: jschoolcraft: I would think it would just be the first include in your default recipe
[2013-08-01 19:25:22 -0400] eherot: unless I'm missing something...
[2013-08-01 19:26:03 -0400] stormerider: something i've been seeing since i upgraded to 11.6.0 Gem::LoadError: can't activate highline-1.6.19, already activated highline-1.6.18. Any ideas?
[2013-08-01 19:27:13 -0400] eherot: cobby: that description is pretty hard to follow in my head (probably not your fault) any chance you could put the code in a Gist?
[2013-08-01 19:27:57 -0400] jschoolcraft: eherot: yeah, I included it: include["rbenv::user"] in my default recipe, and have some config based on the cookbook readme but it's not doing what I expect.  I'll update a gist in a second, waiting for another vagrant up to finish.
[2013-08-01 19:29:26 -0400] eherot: make sure you also include your metadata.rb file
[2013-08-01 19:32:06 -0400] cobby: @eherot Here it is..  https://gist.github.com/russl/a5885680ad2a7a5f683c
[2013-08-01 19:33:39 -0400] suffix: hypothetical: let's say I want to manage multiple clusters with chef (~40 nodes each). For each cluster, I need to store a list of hostnames + node designations. what is the best way to do this in chef?
[2013-08-01 19:34:10 -0400] eherot: suffix: what sort of designations?
[2013-08-01 19:34:41 -0400] suffix: internal task-based designations like "mail hub" or "router"
[2013-08-01 19:36:20 -0400] suffix: eherot ?
[2013-08-01 19:36:36 -0400] eherot: suffix: personally I would either assign roles with names like mail_hub to the appropriate nodes
[2013-08-01 19:36:41 -0400] jschoolcraft: eherot: https://gist.github.com/jschoolcraft/57f86cbe1ad2164e9c57 it's vagrant up and not provision, so it's a bit longer, and I have some checking at the end, but ruby and rbenv are not getting installed.
[2013-08-01 19:36:47 -0400] eherot: then if you want a list of all the mail_hubs you can use search to get it
[2013-08-01 19:36:55 -0400] suffix: that won't work
[2013-08-01 19:37:08 -0400] cobby: @suffix I would use roles to do what you want.
[2013-08-01 19:37:11 -0400] eherot: that is chef's internal categorization method.
[2013-08-01 19:37:16 -0400] cobby: yeah what eherot said
[2013-08-01 19:37:22 -0400] suffix: no, roles won't work
[2013-08-01 19:37:59 -0400] cobby: @suffix can these clusters have different types of designations?
[2013-08-01 19:38:19 -0400] cobby: @eherot what do you think about my issue?
[2013-08-01 19:38:36 -0400] eherot: cobby: one sec.  Doing too many things at once here ;-)
[2013-08-01 19:38:39 -0400] cobby: :)
[2013-08-01 19:40:10 -0400] eherot: jschoolcraft: can you add your metadata.rb file for the nvapi cookbook?
[2013-08-01 19:41:03 -0400] jschoolcraft: eherot: updated, and that might be my problem
[2013-08-01 19:41:11 -0400] bmcgee: Hey guys, can anyone tell me why when I run berks upload, whilst it appears to upload the cookbook, it isn't reflected in the chef server. Only way I can change anything is to bump the version before upload.
[2013-08-01 19:41:41 -0400] eherot: bmcgee: that's by design.  It doesn't force upload frozen cookbooks (it just fails silently, which is admittedly annoying)
[2013-08-01 19:42:14 -0400] bmcgee: ok can someone explain to me this frozen cookbooks thing? Have I 'frozen' the cookbook, is it frozen by default, how can I unfreeze it?
[2013-08-01 19:42:39 -0400] eherot: knife cookbook upload doesn't freeze by default, but berks upload does
[2013-08-01 19:43:00 -0400] eherot: You can upload over a frozen cookbook by doing knife cookbook upload force
[2013-08-01 19:43:14 -0400] Guest71810: bmcgee: berkshelf is attempting to get you to enforce rev'ng your metadata when you upload to the chef server
[2013-08-01 19:43:35 -0400] eherot: but berks does that on purpose to make sure you don't actually change what's on the server without changing the version (and thus causing confusion for other cookbooks which may stop working)
[2013-08-01 19:43:46 -0400] eherot: What Guest71810 said :-)
[2013-08-01 19:44:09 -0400] bmcgee: yeah, that is annoying.. i get what it's doing, be nice if it could be overriden with a flag
[2013-08-01 19:44:50 -0400] eherot: bmcgee: Yeah I thought that too at first, but then I realized things would probably be more sane in my environment if I avoided changing "tagged" cookbooks unless absolutely necessary.
[2013-08-01 19:44:58 -0400] eherot: (and it shouldn't ever be necessary if your environment is well designed)
[2013-08-01 19:45:02 -0400] suffix: I am using chef to provision large environments (40+ nodes each). I am currently using a databag to hold various information relating to each environment (passwords, hostnames, node designations, etc.). This data will change for each environment I provision, and as such, I must be able to store it with a pointer to the proper environment. What is the best way to store this data for each environment?
[2013-08-01 19:45:52 -0400] miah: uh, make a databag named after each environmnet?
[2013-08-01 19:46:43 -0400] suffix: would it make more sense to use a "chef" environment with environment attributes instead of data bags?
[2013-08-01 19:47:04 -0400] eherot: cobby: looking at your gist now...
[2013-08-01 19:47:06 -0400] miah: i dont think so
[2013-08-01 19:47:11 -0400] suffix: why
[2013-08-01 19:47:18 -0400] suffix: eherot feel free to chime in
[2013-08-01 19:47:44 -0400] miah: because you would be in attribute hell
[2013-08-01 19:48:06 -0400] miah: databags are a more sane to store that kind of data, if youre going to store it. but i wouldnt pre-generate node names or passwords
[2013-08-01 19:48:21 -0400] miah: shared stuff like, a mysql password i would probably just store in a databag
[2013-08-01 19:48:24 -0400] suffix: miah please be more specific. I am trying to come up with a solution for a very large-scale project.
[2013-08-01 19:48:37 -0400] miah: im as specific as im going to get
[2013-08-01 19:48:45 -0400] miah: also, 40 nodes is hardly large. =)
[2013-08-01 19:49:11 -0400] tabolario: i've been using a data bag per application with items keyed to my chef environments
[2013-08-01 19:49:20 -0400] joelnn: suffix, since a recommendation has already been given, perhaps you can say what you don't like about it
[2013-08-01 19:49:54 -0400] tabolario: makes it pretty simple to have an attribute in my app cookbooks like default['application']['data_bag_item'] = node.chef_environment
[2013-08-01 19:50:09 -0400] miah: indeed
[2013-08-01 19:50:24 -0400] tabolario: i've been able to get my node attributes near or at zero for nodes that way
[2013-08-01 19:50:38 -0400] tabolario: normal attrs i mean
[2013-08-01 19:51:04 -0400] suffix: I am trying to determine the best practice for storing environment-specific data / variables
[2013-08-01 19:51:05 -0400] miah: good job
[2013-08-01 19:51:21 -0400] tabolario: each app environment data bag item has a key called "env" which is a hash of environment variables that get injected with runit
[2013-08-01 19:51:45 -0400] tabolario: the kicker is that hash gets merged with an attributed called node['application_name']['env']
[2013-08-01 19:51:46 -0400] eherot: cobby: this is probably not exactly the answer you're looking for but I think what you're doing here may be re-inventing something that's already in the opscode mysql cookbook and the opscode openssl cookbook (which contains a password generator function)
[2013-08-01 19:52:33 -0400] suffix: additionally, is data bag data persistent?
[2013-08-01 19:52:36 -0400] tabolario: originally i was storing half of the environment variables in my chef environments and just the sensitive ones in the data bags, but i've since found it simpler to just put them all in the databag
[2013-08-01 19:52:40 -0400] tabolario: suffix: yes
[2013-08-01 19:52:52 -0400] suffix: tabolario where is it stored?
[2013-08-01 19:52:56 -0400] tabolario: on the chef server
[2013-08-01 19:52:58 -0400] cobby: @eherot I am not generating new passwords.  I am rolling through set passwords that I want in production.
[2013-08-01 19:53:06 -0400] suffix: tabolario what if the chef server goes down
[2013-08-01 19:53:10 -0400] eherot: cobby: oh from your data bag
[2013-08-01 19:53:20 -0400] cobby: yeah
[2013-08-01 19:53:20 -0400] miah: if the chef server goes down, then chef doesnt work.
[2013-08-01 19:53:24 -0400] cobby: @eherot yeah :)
[2013-08-01 19:53:29 -0400] joelnn: suffix what if your DNS server goes down
[2013-08-01 19:53:30 -0400] eherot: cobby: btw you should probably use an encrypted data bag for that
[2013-08-01 19:53:32 -0400] miah: databags are _stored_ so they are persistent. its not redis.
[2013-08-01 19:53:46 -0400] joelnn: hm redis supports persistence :)
[2013-08-01 19:53:52 -0400] miah: not by default =)
[2013-08-01 19:54:03 -0400] suffix: if the chef server crashes, will the data bags still exist when the server comes back up?
[2013-08-01 19:54:13 -0400] miah: suffix: yes
[2013-08-01 19:54:15 -0400] tabolario: if it didn't crash because of a disk failure, then sure
[2013-08-01 19:54:45 -0400] tabolario: just take the same considerations you would take for a database for the volumes that chef server's data is on
[2013-08-01 19:55:11 -0400] eherot: cobby: where is newuserpass set?
[2013-08-01 19:55:21 -0400] suffix: what would files / directories do I need to back up on the chef server?
[2013-08-01 19:55:40 -0400] cobby: @eherot in the data bag.  I plan on using an encrypted data bag, but want to get this to work first :)
[2013-08-01 19:55:59 -0400] suffix: what files / directories do I need to back up on the chef server in order to ensure that I do not lose data bag information?
[2013-08-01 19:56:24 -0400] joelnn: suffix, why not get some experience running chef server, you're not going to get all your answers on IRC
[2013-08-01 19:56:36 -0400] miah: also, docs.opscode.com, go read it.
[2013-08-01 19:56:46 -0400] suffix: joelnn / miah /ignored
[2013-08-01 19:56:57 -0400] miah: did dgarstang change their nick to suffix ?
[2013-08-01 19:57:22 -0400] joelnn: suffix why not have your client call somebody who knows what they're doing, rather than asking other people what to do
[2013-08-01 19:57:30 -0400] suffix: unbelievable
[2013-08-01 19:57:30 -0400] bmcgee: can anyone tell me why this fails on ec2 but works perfectly fine locally? I'm using the same version of ubuntu locally, and there seems to be no issue with adding the apt repository but on ec2 it's failing and i'm unsure what the warnings are trying to tell me is wrong. https://gist.github.com/brianmcgee/6134662
[2013-08-01 19:58:04 -0400] suffix: some people really seem to go out of their way to give freenode a bad name.
[2013-08-01 19:58:06 -0400] suffix: anyway
[2013-08-01 19:58:07 -0400] suffix: what files / directories do I need to back up on the chef server in order to ensure that I do not lose data bag information?
[2013-08-01 19:58:40 -0400] gleam: i'd recommend using knife server to do backups
[2013-08-01 19:58:41 -0400] gleam: http://fnichol.github.io/knife-server/
[2013-08-01 19:58:47 -0400] miah: bmcgee: looks like you are installing the repo, but then not updating the repo cache before trying to install it.
[2013-08-01 19:58:56 -0400] gleam: or some similar tool
[2013-08-01 19:59:01 -0400] bmcgee: miah: how can i force that to occur, with a notify?
[2013-08-01 19:59:22 -0400] miah: im certain the apt recipe has some facility for that but i dont recall what it is exactly
[2013-08-01 19:59:33 -0400] suffix: looks good. thanks gleam
[2013-08-01 19:59:35 -0400] bmcgee: miah: i'll have a google
[2013-08-01 20:00:26 -0400] bmcgee: miah: seems i was missing this: action :add
[2013-08-01 20:00:31 -0400] bmcgee: miah: giving it a try now
[2013-08-01 20:01:27 -0400] eherot: cobby: What are you trying to do to these passwords with all of this making class variables out of usernames and passwords?  It seems really convoluted...
[2013-08-01 20:04:02 -0400] suffix: what is the preferred method of creating multiple development clusters with chef?
[2013-08-01 20:04:41 -0400] cobby: @eherot I am trying to hide what the user names and passwords are.  I do not want them to be attributes just variables during a run.  Which works like a champ.  If I issue puts "newuserpass" it gives me what I expect to be for the "newuser" user.  But it does not work inside of an "execute" I have to do a variable replacement to get it to work which is what is making me sad..  I have to do anewpassvariable = newuserpass then I can add the anewpassvariable to the
[2013-08-01 20:04:42 -0400] cobby: execute resource and it works.  That makes no sense to me :(.
[2013-08-01 20:05:36 -0400] tabolario: i should start using knife-server
[2013-08-01 20:06:06 -0400] miah: cobby: context matters
[2013-08-01 20:06:38 -0400] miah: you are defining a object in a different context than the resource is executing in
[2013-08-01 20:06:51 -0400] eherot: cobby: why would they need to be made into attributes? Just assign them as local variables and then use that in the execute block...
[2013-08-01 20:07:08 -0400] miah: also ^
[2013-08-01 20:07:11 -0400] cobby: That is what I am trying to do
[2013-08-01 20:07:37 -0400] cobby: I have a group of user names in the same hash that i am iterating over.
[2013-08-01 20:07:40 -0400] miah: in ruby, a local variable just " foo = 'herpderp' "
[2013-08-01 20:07:52 -0400] cobby: right
[2013-08-01 20:08:01 -0400] miah: you are sending the results to something you are defining through an attr_accessor dynamically
[2013-08-01 20:08:03 -0400] eherot: cobby: you can add a "pass" key to that users hash on the fly.  It will not be stored outside of this context.
[2013-08-01 20:08:39 -0400] eherot: e.g. inside your mysql_data['users'] loop, do user['pass'] = password
[2013-08-01 20:09:04 -0400] eherot: then when you need to reference it: mysql_data['users'][user]['pass']
[2013-08-01 20:10:06 -0400] cobby: @eherot @miah I tried many variations of that.  Let me give it a go from scratch and see how that rolls.  thanks for the input
[2013-08-01 20:10:43 -0400] eherot: cobby: I've written almost this exact recipe a few times now so I'm pretty sure it should work without  much tweaking
[2013-08-01 20:10:49 -0400] eherot: but please do report back if it doesn't
[2013-08-01 20:10:58 -0400] suffix: what is the preferred method of creating multiple development clusters with chef?
[2013-08-01 20:13:06 -0400] coderanger: suffix: How isolated do they need to be?
[2013-08-01 20:13:30 -0400] coderanger: suffix: Generally fully isolated dev groups would be different orgs, this requires enterprise chef though
[2013-08-01 20:13:48 -0400] coderanger: suffix: Chef environments also over some isolation via cookbook version pinning
[2013-08-01 20:15:01 -0400] suffix: coderanger I would like to provision multiple development clusters with one chef server + repo. The only catch is that I need to be able to store some cluster-specific data somewhere.
[2013-08-01 20:15:29 -0400] coderanger: suffix: Generally you would use environments or roles for that
[2013-08-01 20:15:44 -0400] suffix: I figured environments might be of use
[2013-08-01 20:16:33 -0400] suffix: currently, I'm storing all of the cluster-specific data in databags. would I want to move that data to environment attributes files?
[2013-08-01 20:18:13 -0400] silk: Im sure you're all really busy, but your outage notifications really could use a date in them
[2013-08-01 20:22:01 -0400] suffix: coderanger currently, I'm storing all of the cluster-specific data in databags. would I want to move that data to environment attributes files?
[2013-08-01 20:22:35 -0400] coderanger: suffix: If bags works for you, then thats fine :-)
[2013-08-01 20:23:40 -0400] suffix: coderanger they could work; however, I'm curious to know what the shef convention is. additionally, aren't attributes safer to use for backup, etc?
[2013-08-01 20:24:09 -0400] coderanger: suffix: There isn't really a convention, just a question of how you model your data
[2013-08-01 20:24:22 -0400] coderanger: There is no safety difference, both are just JSON blobs in the postgres DB
[2013-08-01 20:24:43 -0400] coderanger: attributes are simpler, provide more structure, but also don't work so well for non-node-based data
[2013-08-01 20:25:13 -0400] coderanger: data bags are more flexible, but you have to write a bit more procedural code to grab the bag and unpack the data you want
[2013-08-01 20:25:22 -0400] suffix: yes. much of this data is global in nature
[2013-08-01 20:25:26 -0400] suffix: ok
[2013-08-01 20:25:38 -0400] suffix: we'll just stay with databags then
[2013-08-01 20:25:45 -0400] suffix: thanks for the help. you're the best
[2013-08-01 20:26:32 -0400] wdpro_kevin1: Here is a tough question
[2013-08-01 20:26:56 -0400] wdpro_kevin1: I have two roles that contain the same cookbook (users cookbook)
[2013-08-01 20:27:25 -0400] wdpro_kevin1: the second role overwrites the attribute of the first role
[2013-08-01 20:27:32 -0400] wdpro_kevin1: and only one user gets created
[2013-08-01 20:28:33 -0400] wdpro_kevin1: one problem is the attribute is an array which is not good and is the source of the problem
[2013-08-01 20:29:04 -0400] wdpro_kevin1: the question is how to I present the array in the attributes that will work?
[2013-08-01 20:29:18 -0400] joelnn: wdpro_kevin1: https://coderanger.net/2013/06/arrays-and-chef/ seems to me that one should not override the other, based on this
[2013-08-01 20:30:14 -0400] joelnn: does one role override the other?
[2013-08-01 20:30:51 -0400] coderanger: :)
[2013-08-01 20:31:00 -0400] coderanger: Yay not even having to link to it myself
[2013-08-01 20:31:10 -0400] wdpro_kevin1: I have an attribute that looks like this:  "users" => ["siteuser","rundeck"]
[2013-08-01 20:31:34 -0400] jameson-pmac: if I have default['cbname']['attrib_group']['attrib1'] = "abc", and I did the node['cbname'].to_hash.keys
[2013-08-01 20:31:51 -0400] coderanger: wdpro_kevin1: In this case you just need the simple, un-weighted solution in that post
[2013-08-01 20:32:02 -0400] wdpro_kevin1: thanks joelnn yes coderanger I've read that during my research
[2013-08-01 20:32:08 -0400] jameson-pmac: how would I exclode the stuff from ['attrib_group'] from being included? if not key.kind_of String?
[2013-08-01 20:32:12 -0400] wdpro_kevin1: let me look at it again
[2013-08-01 20:32:29 -0400] coderanger: jameson-pmac: What stuff do you want to include?
[2013-08-01 20:32:39 -0400] jameson-pmac: I only want to include string and integers.
[2013-08-01 20:32:56 -0400] coderanger: I mean 'attrib_group' is a string
[2013-08-01 20:33:13 -0400] coderanger: So it wouldn't be excluded
[2013-08-01 20:33:15 -0400] bmcgee: so i added action: add to apt_repository and again, locally everything works smoothly. try to run this on ec2 and it fails every time. Any ideas: https://gist.github.com/brianmcgee/6134662
[2013-08-01 20:33:16 -0400] jameson-pmac: I'm doing the attribute based configurations, and I'm trying not to include sub-arrays/hashes from the node.attribute
[2013-08-01 20:34:09 -0400] jameson-pmac: coderanger: if not node['cbname']['attrib_group'][key].kind_of? Array ?
[2013-08-01 20:34:24 -0400] coderanger: jameson-pmac: Can you provide a more complete example of the output you are looking for?
[2013-08-01 20:34:43 -0400] coderanger: It sounds like you want to iterate over a point in the tree and ignore values that are hashes or arrays
[2013-08-01 20:35:12 -0400] wdpro_kevin1: coderanger: like this?   default["users"] = { "user1" => true, "user2" => true }
[2013-08-01 20:35:42 -0400] coderanger: node['cbname'].inject({}) {|memo, (key, value)| memo[key] = value unless value.is_a?(Hash) or value.is_a?(Array); memo }
[2013-08-01 20:35:46 -0400] coderanger: mdevolving: Yeah
[2013-08-01 20:35:50 -0400] coderanger: ack, mistab
[2013-08-01 20:35:53 -0400] coderanger: wdpro_kevin1: yeah
[2013-08-01 20:36:47 -0400] joelnn: I'm curious why the array values set in the two roles don't get merged already? did I misunderstand?
[2013-08-01 20:36:53 -0400] wdpro_kevin1: I'll git it a shot thanks
[2013-08-01 20:37:44 -0400] joelnn: oh its in a hash. alright then, nothing confusing there
[2013-08-01 20:37:57 -0400] bmcgee: I don't understand why it's skipping installing the key etc in this: https://gist.github.com/brianmcgee/6134662
[2013-08-01 20:38:03 -0400] jameson-pmac: ah unless value.is_a?
[2013-08-01 20:38:46 -0400] coderanger: joelnn: Arrays can't be merged since there isn't enough semantic info
[2013-08-01 20:39:58 -0400] joelnn: @coderanger: I guess I was expecting the 'set union' behavior you mentioned in the article
[2013-08-01 20:42:40 -0400] jameson-pmac: coderanger: https://gist.github.com/jamesonjlee/6135093 so doing it like this isn't too crazy
[2013-08-01 20:42:50 -0400] joelnn: @coderanger: well not that I was expecting it, but once I read your article, I expected it :)
[2013-08-01 20:43:06 -0400] jameson-pmac: to not include anything that isn't a String or Integer from attributes being dumped into a config template file
[2013-08-01 20:43:54 -0400] coderanger: Its a little convoluted but sounds like it should work
[2013-08-01 20:47:08 -0400] dath1974: Does anyone know how attribute merging is supposed to work within a single cookbook where an attribute is set as 'default' in an atributes file and then again as 'default' or 'default!' in a recipe?  I'm seeing behavior I didn't quite expect...
[2013-08-01 20:47:55 -0400] s2t2: hi, can anyone help me out with an error i'm getting with the nginx cookbook? the nginx_site definition isn't getting recognized...
[2013-08-01 20:47:59 -0400] jameson-pmac: aww.. looks like ruby really doesn't have a class that encompasses both Array and Hash :\
[2013-08-01 20:48:27 -0400] dath1974: When I use 'node.default' in the recipe, the recipe attribute completely replaces the attribute (which contains a hash) from the attributes file.  When I use 'node.default!', the hashes are merged...  Is this behavior expected/dependable?
[2013-08-01 20:48:36 -0400] douglaswth: jameson-pmac: ?
[2013-08-01 20:49:27 -0400] tabolario: jameson-pmac also curious what you mean
[2013-08-01 20:50:00 -0400] dgarstang: How hard would it be to deploy a chef server with chef solo?
[2013-08-01 20:50:08 -0400] dath1974: As a reference, the merging behavior is mentioned here, but not specifically my question, or at least not from what I can reason:  https://coderanger.net/2013/06/arrays-and-chef/
[2013-08-01 20:51:31 -0400] tabolario: dgarstang: it's not hard at all :D
[2013-08-01 20:51:40 -0400] tabolario: use the opscode chef-server cookbook
[2013-08-01 20:51:44 -0400] dgarstang: tabolario: well, allrighty then
[2013-08-01 20:52:06 -0400] dgarstang: tabolario: is it run from chef-solo?
[2013-08-01 20:53:02 -0400] dgarstang: tabolario: cuz, I need to copy out the valiator.pem and admin.pem files from a central location.
[2013-08-01 20:54:28 -0400] dgarstang: tabolario: the recipe also needs to come from OUR servers, not downloaded from opscode on the fly. Operationally bad.
[2013-08-01 20:54:49 -0400] dgarstang: tabolario: oh look... opscode is down or got hacked again. We can't deploy a new server.
[2013-08-01 20:55:23 -0400] issackelly: does chef need any other ports other than 443 and 22 to operate?
[2013-08-01 20:55:34 -0400] dgarstang: basically... i want a recipe I'll grab from a cloud bucket... has to be a SINGLE file... (like I can do with puppet) and run against solo locally
[2013-08-01 20:56:09 -0400] juliancdunn: issackelly: the chef server you mean?
[2013-08-01 20:56:18 -0400] issackelly: juliancdunn ohm yes thanks
[2013-08-01 20:56:22 -0400] d```: issackelly: private chef can be bound to any port/group of ports
[2013-08-01 20:56:24 -0400] tabolario: dgarstang http://docs.opscode.com/chef_solo.html#cookbooks
[2013-08-01 20:56:39 -0400] issackelly: d``` strictly speaking of defaults right now
[2013-08-01 20:56:53 -0400] juliancdunn: issackelly: yeah, it's just an API server, so for the clients to talk to it, port 443 is all that's needed
[2013-08-01 20:56:59 -0400] juliancdunn: 22 if you want to actually administer it :-)
[2013-08-01 20:57:03 -0400] joelnn: dgarstang: I don't think hosted chef was affected? what do you mean you can't deploy a new server
[2013-08-01 20:57:05 -0400] issackelly: juliancdunn great thanks
[2013-08-01 20:57:06 -0400] d```: dgarstang: there's a talk ffrom the Joyent dude
[2013-08-01 20:57:27 -0400] dgarstang: joelnn: if opscode has an issue, means we can't deploy our stuff.
[2013-08-01 20:57:40 -0400] d```: issackelly juliancdunn-- I thought default chef api was 4000 and web interface was on 4040
[2013-08-01 20:57:49 -0400] tabolario: juliancdunn: if you're not running it with omnibus though remember there's some wizardry to be done in the nginx configs if you're running the web server at the same endpoint
[2013-08-01 20:57:50 -0400] d```: that might be different with chef 11
[2013-08-01 20:57:59 -0400] dgarstang: d```: they changed it.... but didn't update the knife configurer.
[2013-08-01 20:58:11 -0400] dgarstang: professional, not.
[2013-08-01 20:58:11 -0400] issackelly: d``` yeah I don't know much else, but in chef 11  the default web UI was on 443
[2013-08-01 20:58:18 -0400] d```: cool
[2013-08-01 20:58:21 -0400] jameson-pmac: douglaswth: in python I can do isinstance of Iterable to see.. Enumerable?
[2013-08-01 20:58:39 -0400] issackelly: It's got a self-signed root cert
[2013-08-01 20:58:45 -0400] d```: we have everythign going through nginx anyway
[2013-08-01 20:58:47 -0400] tabolario: issackelly: i think you're probably referring to the port that the nginx bundled with chef-server-omnibus runs
[2013-08-01 20:59:08 -0400] issackelly: tabolario maybe? I'm using this install guide http://docs.opscode.com/install_server.html
[2013-08-01 20:59:13 -0400] jameson-pmac: oh yay it works
[2013-08-01 20:59:17 -0400] dgarstang: tabolario: haven't read it all yet, but feels like I won't get away with a single file.
[2013-08-01 20:59:18 -0400] issackelly: I have no experience running chef-server
[2013-08-01 20:59:30 -0400] tabolario: dgarstang: why not?
[2013-08-01 20:59:37 -0400] douglaswth: jameson-pmac: they both include Enumerable
[2013-08-01 20:59:42 -0400] tabolario: tar zcvf chef-solo.tar.gz ./cookbooks
[2013-08-01 20:59:50 -0400] tabolario: issackelly yup that's the omnibus
[2013-08-01 21:00:11 -0400] tabolario: it comes with an embedded nginx that proxies to the api server and the webui
[2013-08-01 21:00:11 -0400] jameson-pmac: yep
[2013-08-01 21:00:13 -0400] dgarstang: tabolario: I don't want a tar archive. it's too hard to maintain. single file... cuz that's easy to download from an amazon/google bucket.
[2013-08-01 21:00:14 -0400] d```: dgarstang: https://www.youtube.com/watch?v=he7vxhm6v64
[2013-08-01 21:00:22 -0400] tabolario: a tar archive is a single file.
[2013-08-01 21:00:28 -0400] jameson-pmac: I did not know that ruby offered that group, TIL a bit more ruby
[2013-08-01 21:00:31 -0400] tabolario: chef solo unpacks it by itself
[2013-08-01 21:00:32 -0400] dgarstang: tabolario: container smaller files. :)
[2013-08-01 21:00:33 -0400] Illusioneer: If I wanted to manually update a client, should I do it from client or server?
[2013-08-01 21:01:01 -0400] jameson-pmac: juliancdunn: if I want a bento PR, I have to open a ticket on jira right?
[2013-08-01 21:01:07 -0400] joelnn: dgarstang: download a script that downloads the cookbooks from your own server then?
[2013-08-01 21:01:18 -0400] joelnn: curl | bash
[2013-08-01 21:01:35 -0400] dgarstang: joelnn: downloads from where?
[2013-08-01 21:01:38 -0400] joelnn: s3
[2013-08-01 21:02:23 -0400] tabolario: if you want to have a single file, don't use chef-solo, upload the chef-server omnibus to S3 or wherever your file repo is, and then deb install the package and run chef-server-ctl reconfigure
[2013-08-01 21:02:25 -0400] dgarstang: joelnn: right, but I wanted a single plain text file containing the recipe
[2013-08-01 21:02:31 -0400] joelnn: you are bootstrapping chef-server, right? more than 1 file will ultimates need to be downloaded
[2013-08-01 21:02:35 -0400] joelnn: *ultimately
[2013-08-01 21:02:49 -0400] tabolario: yeah, if you want to chef-solo you're not going to get away with a single file
[2013-08-01 21:02:56 -0400] dgarstang: joelnn: darn :(
[2013-08-01 21:03:06 -0400] dgarstang: joelnn: back to fabric. :(
[2013-08-01 21:03:28 -0400] joelnn: unless you acquiesce to the tar idea, which doesn't seem to have an actual problem :)
[2013-08-01 21:03:29 -0400] juliancdunn: jameson-pmac: yes please
[2013-08-01 21:03:37 -0400] juliancdunn: if it's back up :-/
[2013-08-01 21:03:57 -0400] dgarstang: joelnn: test, edit, tar, uplod, test, edit, tar, upload...
[2013-08-01 21:04:13 -0400] jameson-pmac: :| I almost jumped out of bed in a panic when I got that email this mornin'
[2013-08-01 21:04:49 -0400] dgarstang: https://www.youtube.com/watch?v=he7vxhm6v64... waiting for the 'bootstrapping a chef-server without talking to opscode' section
[2013-08-01 21:04:51 -0400] joelnn: dgarstang: update.sh, test, update.sh, test. don't tell me you don't know how to automating tarring and uploading
[2013-08-01 21:05:20 -0400] joelnn: *automate. where is my mind...
[2013-08-01 21:05:28 -0400] dgarstang: joelnn: through 3 different systems across a mac and to google cloud? sure... but it's easier to avoid the tar step
[2013-08-01 21:05:52 -0400] tabolario: vs having the process in a more brittle bash script...
[2013-08-01 21:05:58 -0400] juliancdunn: jameson-pmac: yeah, we're extremely sorry about that
[2013-08-01 21:06:03 -0400] coderanger: dgarstang: chef-server uses solo internally, you don't generally need it for deploying the server though
[2013-08-01 21:06:08 -0400] dgarstang: tabolario: less moving parts. :)
[2013-08-01 21:06:09 -0400] joelnn: the tar is completely transparent in your script(s)... you lost me
[2013-08-01 21:06:29 -0400] coderanger: dgarstang: the "chef-server-ctl reconfigure" is a chef-solo run in disguise
[2013-08-01 21:06:47 -0400] coderanger: If you would like to automate deployment of chef-server, there is a knife plugin called knife-server
[2013-08-01 21:06:50 -0400] dgarstang: coderanger: gotta run a few more steps... plus we don't want to download chef from opscode.
[2013-08-01 21:07:06 -0400] dgarstang: coderanger: yes, and it's broken for google
[2013-08-01 21:07:17 -0400] tabolario: download it once from opscode and put the deb on your own fileserver
[2013-08-01 21:07:22 -0400] d```: dgarstang: wait, are you trying to install chef-server w/o downloading something from opscode?
[2013-08-01 21:08:04 -0400] dgarstang: tabolario: need to work out how to make the installer point to us rather than opscode tho
[2013-08-01 21:08:18 -0400] tabolario: the installer doesn't talk to opscode
[2013-08-01 21:08:25 -0400] tabolario: it's a debian package
[2013-08-01 21:08:33 -0400] dgarstang: coderanger: http://tickets.opscode.com/browse/KNIFE-352
[2013-08-01 21:08:50 -0400] dgarstang: tabolario: good point.
[2013-08-01 21:09:24 -0400] coderanger: dgarstang: As you might notice, linking tickets is rather unhelpful at the moment :)
[2013-08-01 21:09:37 -0400] dgarstang: coderanger: :) for reference.
[2013-08-01 21:09:47 -0400] coderanger: dgarstang: Click that link ...
[2013-08-01 21:09:54 -0400] tabolario: i still need to find you on that fancy space game coderanger
[2013-08-01 21:09:57 -0400] dgarstang: coderanger: yes, I know.
[2013-08-01 21:10:18 -0400] coderanger: tabolario: Heh, I need to relocate like 4 characters now that we are retreating from Fountain :-(
[2013-08-01 21:10:30 -0400] coderanger: tabolario: Plus side, I can say I was there for the biggest ever battle
[2013-08-01 21:11:12 -0400] joelnn: there is an answer. do not retreat.
[2013-08-01 21:11:15 -0400] tabolario: coderanger: Oh man, I was thinking of jumping over there for that but I probably wouldn't have made it into the system without getting killed
[2013-08-01 21:11:27 -0400] tabolario: With my noob ships and all
[2013-08-01 21:11:57 -0400] coderanger: You probably would have been fine unless you got hit by a bomb, after my blackbird died they left my vigil alone
[2013-08-01 21:12:31 -0400] tabolario: I missed the stream on twitch too :(
[2013-08-01 21:13:12 -0400] coderanger: It would have been pretty boring
[2013-08-01 21:13:43 -0400] coderanger: Between TiDi and lag the whole 6+ hour battle was only like 30-45m of stuff happening
[2013-08-01 21:18:24 -0400] dgarstang: if I installed chef-server on a box... and then installed the client, and pointed it at itself, would that break anything?
[2013-08-01 21:20:43 -0400] Toger: dgarstang: not necesairily
[2013-08-01 21:21:21 -0400] Toger: dgarstang: if you had a recipe that conflicted w/chef server it could break something, but merely having chef-client on it does not hurt it.
[2013-08-01 21:28:06 -0400] dgarstang: Toger: kk
[2013-08-01 21:29:33 -0400] dgarstang: next question.... ugh... in the case of multiple chef servers.... uploading to each in turn is going to be slow. It's already slow to a single local one on the same network. I guess I could parralelize 'em.
[2013-08-01 21:30:23 -0400] dgarstang: rather than that approach.... can we possibly upload to a single master, and then it filter out to slaves.... or something?
[2013-08-01 21:30:36 -0400] coderanger: dgarstang: Not at the level of chef, you can do that on the backend though
[2013-08-01 21:30:43 -0400] Toger: dgarstang: there isn't a built-in replication system;
[2013-08-01 21:30:46 -0400] coderanger: postgres replication, ceph for file data, solr clustering
[2013-08-01 21:30:46 -0400] Toger: best best is parallel uploads
[2013-08-01 21:31:04 -0400] coderanger: However cross-DC postgres replication is .... bad
[2013-08-01 21:31:10 -0400] dgarstang: coderanger: backend? there's a lot of moving parts on the backend.
[2013-08-01 21:31:18 -0400] coderanger: Yes, there is
[2013-08-01 21:34:07 -0400] coderanger: Building cross-DC HA solutions is no small undertaking
[2013-08-01 21:35:53 -0400] joelnn: why is uploading to a local server slow? you should not have bandwidth problems on The Clouds either
[2013-08-01 21:40:09 -0400] jtnz: Hi, what's the recommended way to manipulate files/folders, e.g. cp or mv, with Chef? I currently use execute resources or sometimes ruby_blocks
[2013-08-01 21:43:21 -0400] coderanger: jtnz: cp can be done somewhat more idempotently via file '/to' do content File.open('/from').read end
[2013-08-01 21:43:26 -0400] freerobby: I'm running Ubuntu 12.04 on rackspace. The Mysql cookbook seems to think I'm running debian. Anybody seen this before?
[2013-08-01 21:44:01 -0400] coderanger: jtnz: mv is somewhat inherently not idempotent, so a simple execute 'mv /from /to' do only_if { File.exists?('/from') } end
[2013-08-01 21:44:12 -0400] coderanger: jtnz: That covers the simple case anyway
[2013-08-01 21:44:16 -0400] jtnz: oh, I use ruby_blocks _sometimes_ because the LWRP might need to run on both Linux and Windows, so I use fileutils.mv. Otherwise I could case node[:os] and load variant execute resources (move on windows, mv on linux)
[2013-08-01 21:44:30 -0400] coderanger: freerobby: What does `ohai platform` show?
[2013-08-01 21:44:47 -0400] coderanger: jtnz: Yeah, all of the above work :-)
[2013-08-01 21:45:31 -0400] jtnz: coderanger, ok, thanks for verifying :)
[2013-08-01 21:45:42 -0400] coderanger: jtnz: Reminder that renaming a file is only atomic sometimes, alternate thursdays and you have to sacrifice a goat
[2013-08-01 21:46:04 -0400] freerobby: coderanger: ubuntu
[2013-08-01 21:46:10 -0400] coderanger: So a power drop at the wrong moment (or an errant ctrl-c) could leave things in a cranky state
[2013-08-01 21:46:14 -0400] freerobby: but for some reason it's installing the debian conf files and not using upstart
[2013-08-01 21:46:16 -0400] jtnz: oh, I have the whole LWRP notified when another LWRP determines that it's deployment time
[2013-08-01 21:46:28 -0400] coderanger: freerobby: Is it using the platform or platform_family?
[2013-08-01 21:46:37 -0400] coderanger: freerobby: Ubuntu is indeed in the debian family
[2013-08-01 21:47:26 -0400] jtnz: coderanger, you're right though, edge cases ;)
[2013-08-01 21:47:47 -0400] freerobby: coderanger: seems to be using platform https://github.com/opscode-cookbooks/mysql/blob/master/attributes/server.rb#L140
[2013-08-01 21:47:50 -0400] freerobby: right
[2013-08-01 21:47:55 -0400] coderanger: jtnz: Non-idempotent cruft will always bite you, just a matter of time :-)
[2013-08-01 21:48:09 -0400] freerobby: coderanger: I'll take a more thorough look; I mainly wanted to be sure that this wasn't expected
[2013-08-01 21:48:24 -0400] coderanger: freerobby: Make sure you are the right version of the cookbook too
[2013-08-01 21:53:05 -0400] freerobby: coderanger: It works fine on EC2; I'm guessing there's something strange about the rackspace stock image
[2013-08-01 21:53:26 -0400] coderanger: freerobby: One sec
[2013-08-01 21:54:00 -0400] coderanger: summong rackspace minions
[2013-08-01 21:55:35 -0400] gchristensen: whats up? I have an extensive rackspace setup
[2013-08-01 21:55:44 -0400] gchristensen: also - ubuntu is not officially supported by rackspace.
[2013-08-01 21:56:09 -0400] coderanger: Yeah, but if ohai detects it correctly, which it sounds like it is, it should be working
[2013-08-01 21:57:21 -0400] gchristensen: ah, yes, all my ubuntu boxes are correctly detected
[2013-08-01 21:57:37 -0400] coderanger: Unless they do something weird like not include upstart in their image
[2013-08-01 21:57:45 -0400] gchristensen: they do
[2013-08-01 21:58:03 -0400] coderanger: Okay, well there goes my theory :)
[2013-08-01 21:58:03 -0400] gchristensen: freerobby: for the record, if you can avoid it, don't let the rackspace techs do linux things on your box :)
[2013-08-01 22:00:25 -0400] freerobby: gchristensen: heh, noted. just frustrating that their stock ubuntu image doesn't conform to stock specs.
[2013-08-01 22:01:02 -0400] coderanger: Was that a "they do include upstart" or "they do something weird"?
[2013-08-01 22:01:10 -0400] gchristensen: coderanger: they do include upstart.
[2013-08-01 22:01:15 -0400] coderanger: Okay, good :)
[2013-08-01 22:01:32 -0400] gchristensen: I'm moving all my servers away though for various reasons
[2013-08-01 22:02:58 -0400] coderanger: freerobby: You can check via `knife node show -l -a mysql` to see what the saved value of use_upstart is
[2013-08-01 22:12:37 -0400] Cheeezit: I feel like a noob, how do I control or update the to the newest version of chef on a opscode chef hosted server
[2013-08-01 22:13:01 -0400] Cheeezit: need to go from 11.4 to 11.6
[2013-08-01 22:15:32 -0400] gchristensen: Cheeezit: there is a chef-updater cookbook, and you can also re-run the installer
[2013-08-01 22:16:57 -0400] Cheeezit: I can see the version set on a node attribute, I'm just not sure how it is being set in the first place
[2013-08-01 23:06:38 -0400] Shankar: how do i resolve the following error :
[2013-08-01 23:06:40 -0400] Shankar: ParserError: 751: unexpected token at
[2013-08-01 23:06:53 -0400] Shankar: it lists the entire role file
[2013-08-01 23:07:07 -0400] xrl: Shankar: which file is it?
[2013-08-01 23:07:31 -0400] Shankar:  knife role create <user>
[2013-08-01 23:08:33 -0400] Shankar: I suspect its an issue with the override_attributes
[2013-08-01 23:08:47 -0400] Shankar: any idea how to specify these ?
[2013-08-01 23:09:21 -0400] xrl: Shankar: why do you think it's override_attributes? copy/paste the whole error in to a gist and let us take a look
[2013-08-01 23:12:53 -0400] Shankar: here is the link ot the gist : https://gist.github.com/anonymous/6136172
[2013-08-01 23:13:56 -0400] GreatSUN: re
[2013-08-01 23:14:36 -0400] xrl: Shankar: you're using '=' in a JSON file
[2013-08-01 23:14:39 -0400] barefoot: dont use single qotes or "=" ?
[2013-08-01 23:15:10 -0400] Shankar: ok .. lemme try removing that
[2013-08-01 23:18:37 -0400] Shankar: thanks .. that did it
[2013-08-01 23:22:34 -0400] GreatSUN: Hey guys
[2013-08-01 23:22:45 -0400] GreatSUN: I have a problem I never had before
[2013-08-01 23:22:58 -0400] GreatSUN: have got a template lwrp use
[2013-08-01 23:23:23 -0400] GreatSUN: it says that it doesnt fetch erb as the cache is up to date
[2013-08-01 23:23:44 -0400] GreatSUN: then it sees current contets checksum is empty, cause the file is missing
[2013-08-01 23:24:06 -0400] GreatSUN: and rendered checksum is for sure different
[2013-08-01 23:24:56 -0400] GreatSUN: but then it tries to change user, mode and such and afterwards wants to move tmp-chef-rendered file to new path
[2013-08-01 23:25:04 -0400] GreatSUN: then it got no such file or directory
[2013-08-01 23:25:25 -0400] GreatSUN: can it be, that this occurs cause the path is not created?
[2013-08-01 23:26:14 -0400] coderanger: GreatSUN: Yes, the folder you are making the file in must exist
[2013-08-01 23:27:09 -0400] GreatSUN: coderanger: hey :-)
[2013-08-01 23:27:27 -0400] GreatSUN: coderanger: is there some option to create it if it doesnt?
[2013-08-01 23:27:39 -0400] GreatSUN: I mean besides calling directory lwrp?
[2013-08-01 23:28:14 -0400] coderanger: directory isn't an lwrp, but no, you just use the resource
[2013-08-01 23:29:05 -0400] coderanger: You should specify the owner/group/mode anyway, which means being its own resource
[2013-08-01 23:30:24 -0400] xrl: is there any way to set a node <-> server correspondence through chef tools? we've had a few dupe instances and it's pretty confusing/time consuming
[2013-08-01 23:30:41 -0400] xrl: our apps are 'snowflake' and need their own ebs volumes
[2013-08-01 23:34:35 -0400] GreatSUN: coderanger: sorry for messing up lwrp and resource :-(
[2013-08-01 23:34:56 -0400] coderanger: xrl: Not sure what you mean
[2013-08-01 23:35:09 -0400] coderanger: GreatSUN: LWRP is a subset of Resource/Provider :-)
[2013-08-01 23:35:47 -0400] GreatSUN: coderanger: yes, I know... I am just a little tired :-(
[2013-08-01 23:36:06 -0400] josephholsten: reset: does kyle allan hang out in this room? I've got some contributions for the nexus cb I'd like to run by him
[2013-08-01 23:36:18 -0400] GreatSUN: coderanger: should get more sleep and get some cold beer instead of working all the time :D
[2013-08-01 23:37:49 -0400] GreatSUN: coderanger: btw. I think xrl means if you can setup cluster communication configuration via chef tools
[2013-08-01 23:38:25 -0400] GreatSUN: coderanger: like if you have mysql master and slave configuration set up that slave connects to master.... stuff like that
[2013-08-01 23:39:05 -0400] reset: josephholsten: I don't think Kyle does IRC. He's pretty active on the Nexus stuff, tho. I'll message him and ask him to take a look at your PR
[2013-08-01 23:51:30 -0400] Shankar: the override_attributes set when i create a role do not take effect for me
[2013-08-01 23:51:36 -0400] Shankar: here is the gist https://gist.github.com/anonymous/6136392
[2013-08-01 23:51:44 -0400] Shankar: any idea what I am doing wrong ?
[2013-08-01 23:53:36 -0400] coderanger: Shankar: What behavior are you seeing?
[2013-08-01 23:54:33 -0400] Shankar: when i use the parameter region , i dont get the value us-east-1
[2013-08-01 23:55:29 -0400] Shankar: here is how I use it : #{node[:sensor][:region]}
[2013-08-01 23:55:47 -0400] coderanger: Shankar: The way you have that setup it would be node[:region]
[2013-08-01 23:56:00 -0400] coderanger: If you want it under a "sensor" key you need to do that in the attributes
[2013-08-01 23:56:18 -0400] Shankar: ic .. I'll try that
[2013-08-01 23:58:22 -0400] dgarstang: coderanger: not node["region"]....? What's the : mean anyway?
[2013-08-01 23:58:38 -0400] coderanger: dgarstang: :foo is a Ruby symbol
[2013-08-01 23:58:48 -0400] coderanger: Roughly equiv to sys.intern('foo') in Ruby
[2013-08-01 23:58:52 -0400] coderanger: er in Python
[2013-08-01 23:59:10 -0400] dgarstang: coderanger: ok, that makes no sense. :)
[2013-08-01 23:59:31 -0400] coderanger: Python is actually one of very few non-C-family langs to lack symbol/atom support
[2013-08-01 23:59:41 -0400] coderanger: Goes back to #foo in Smalltalk and 'foo in Lisp
[2013-08-01 23:59:50 -0400] yfeldblum: dgarstang, symbols in ruby are numbers, and they point to strings in a giant table in the Ruby VM

[2013-08-09 00:14:39 -0400] aslan: is there a difference between node.set[... and node.default[... ?
[2013-08-09 00:18:35 -0400] douglaswth: aslan: yes, set does normal precedence and default does default precedence
[2013-08-09 00:19:21 -0400] aslan: douglaswth: so if i am within a recipe which one has a higher precedence?
[2013-08-09 00:19:49 -0400] douglaswth: normal
[2013-08-09 00:20:23 -0400] douglaswth: http://docs.opscode.com/chef_overview_attributes.html#attribute-precedence
[2013-08-09 00:22:11 -0400] aslan: douglaswth: thanks
[2013-08-09 00:29:31 -0400] asharp: when i put 'git: "https://github.com/..."' in my Berksfile, berks install will clone the cookbook. When i put 'github: ""' in my Berksfile, i get 'Failed to downloadnot found in any of the default locations'. any idea what could be going on?
[2013-08-09 00:30:53 -0400] douglaswth: is it a private repo? also, make sure you just have the user/repo for github
[2013-08-09 00:31:31 -0400] asharp: it is private. when i use 'git:' it asks for username & password. and yes i'm adding the user/repo for github
[2013-08-09 00:31:44 -0400] asharp: i've already exchanged ssh keys with github btw
[2013-08-09 00:32:59 -0400] douglaswth: you need to specify the protocol for github then, either ssh or https; this is all documented on http://berkshelf.com/
[2013-08-09 00:35:36 -0400] asharp: i added 'protocol: :ssh' and it's the same error
[2013-08-09 02:55:17 -0400] imanoobagain: hi all.
[2013-08-09 03:02:43 -0400] mikenoob: hi all.. quick question.  Still working out this workstation thing.  Do I need to install the chef-server on a hosted chef workstation?
[2013-08-09 03:03:25 -0400] mikenoob: the docs / quickstart weren't too clear.
[2013-08-09 03:03:59 -0400] amccloud: Anyway I can require 'openssl' in a recipe?
[2013-08-09 03:09:41 -0400] douglaswth: mikenoob: no, hosted chef is your chef-server
[2013-08-09 03:10:09 -0400] douglaswth: amccloud: yeah, you can do: require 'openssl'
[2013-08-09 03:10:35 -0400] mikenoob: got it.. so I don't need a full chef install on the workstation.. just the client. :)  That's what I thought.  Just trying to get the knife-ec2 stuff on the server.
[2013-08-09 03:10:54 -0400] mikenoob: I finally found the page on the docs / opcode.. :) thanks Douglas!
[2013-08-09 03:11:07 -0400] amccloud: douglaswth: I thought you had to bring things into recipes in a special manner since they are a dsl
[2013-08-09 03:33:35 -0400] amccloud: node.set_unless or node.default? Which is preferred?
[2013-08-09 03:37:06 -0400] nomlig: node.default seems much more common
[2013-08-09 07:48:11 -0400] bigbigbang: Ohai chefs ! I have some noob questions : How can we disable a service even after restart .. this way ? : service "example" do   supports :restart => true, :reload => true   action :disable end ?
[2013-08-09 07:48:30 -0400] bigbigbang: or should I use execute comamnd ...
[2013-08-09 07:49:25 -0400] bigbigbang: and a second one : How to chmod+x ?
[2013-08-09 07:49:47 -0400] bigbigbang: thks
[2013-08-09 08:48:40 -0400] Hildgrim: any reason i wouldn't be able to do a mount within this if statement: if nodename.include? 'foo.bar.com' do
[2013-08-09 08:51:02 -0400] Hildgrim: it follows the same pattern from ruby if blocks but still throws an error
[2013-08-09 08:51:31 -0400] hagzag: how are the public logs presented @ http://community.opscode.com/chat/chef ? what app do you use ?
[2013-08-09 08:53:14 -0400] zts: Hildgrim: it's difficult to help without seeing the actual error (gist/pastebin, not pasted in here)
[2013-08-09 08:53:35 -0400] zts: Hildgrim: but it's probably that you don't need the "do" at the end of that line
[2013-08-09 08:54:16 -0400] Hildgrim: http://pastebin.com/gQsegw69
[2013-08-09 08:54:27 -0400] Hildgrim: zts: oh gods you're right
[2013-08-09 08:54:31 -0400] Hildgrim: zts: thank you.
[2013-08-09 08:55:00 -0400] Hildgrim: ...that's very inconsistent. ;_;
[2013-08-09 09:03:00 -0400] zts: Hildgrim: yeah, it's logical but not obvious without knowing some more ruby stuff.  In general, if it's a built-in ruby feature (eg, if/unless/begin/while/def), it won't use 'do'.
[2013-08-09 09:04:30 -0400] zts: but if it's a method on an object (like .each), or something custom added in a DSL (like the resources you put in a recipe), it will
[2013-08-09 09:10:59 -0400] Hildgrim: well it had me scratching my head for a while. would be nice if it was a bit more obvious.
[2013-08-09 09:16:35 -0400] zts: yeah, the error you got isn't terribly helpful
[2013-08-09 09:21:57 -0400] Hildgrim: Any idea why sometimes you need to bump the version of a cookbook so that chef-client will run it when uploading using knife cookbook upload COOKBOOK? Sometimes i just have to upload the cookbook and sometimes it just works..
[2013-08-09 09:22:08 -0400] Hildgrim: and other times i have to bump the version
[2013-08-09 09:28:10 -0400] zts: I've noticed that before, but haven't really dug into it.  chef-client keeps a cache of cookbook bits on the node, and bumping the version is a clear indication that it needs to refresh everything - but I'm not sure what conditions cause it to sometimes miss changes without that
[2013-08-09 09:43:38 -0400] Hildgrim: Any idea how you would go about forcing it to re-download the cookbooks from chef-server?
[2013-08-09 09:45:44 -0400] zts: you could try deleting cookbooks/<whatever> under /var/chef/cache (or whatever your cache directory is set to)
[2013-08-09 09:45:57 -0400] Hildgrim: yeah that also SOMETIMES works hah
[2013-08-09 09:46:59 -0400] zts: hm :)
[2013-08-09 10:09:24 -0400] gavala: is it possible to use chef search inside cookbook attribute files?
[2013-08-09 11:09:44 -0400] aruntomar: gavala: IMO, no
[2013-08-09 11:17:13 -0400] gavala: shame
[2013-08-09 11:17:21 -0400] gavala: seems like an obvious use case to me
[2013-08-09 11:17:56 -0400] gavala: "populate this array attribute with this list of nodes"
[2013-08-09 11:23:39 -0400] gsandie: gavala:  I reckon you could do it in the recipe, search for whatever, then iterate through the results, node.default[:some][:array][:attr] << result, or something along those lines
[2013-08-09 11:28:18 -0400] gavala: true but then i've got to maintain attribute names in the recipe and the attributes file. It'd just be nice to only have to look in the attribute file
[2013-08-09 11:33:03 -0400] gsandie: you could create the attribute in the recipe file, node.default[:some][:array][:attr] = Array.new, and keep it all together
[2013-08-09 11:33:17 -0400] gsandie: then just document it in your readme
[2013-08-09 12:15:29 -0400] wimvandijck: Is there a way to change the default package provider for the whole client run?
[2013-08-09 12:15:56 -0400] wimvandijck: (running on Freebsd, trying to use pkgng, instead of freebsd ports, which is the default)
[2013-08-09 12:27:30 -0400] adamjk-dev: wimvandijck: I don't know that they have a provider for pkgng yet
[2013-08-09 12:27:47 -0400] adamjk-dev: wimvandijck: I thought you were allowed to specify which "provider" you use for packages
[2013-08-09 12:27:50 -0400] adamjk-dev: wimvandijck: http://www.rottenbytes.info/2012/09/05/chef-freebsd-use-pkgng/
[2013-08-09 12:28:30 -0400] adamjk-dev: wimvandijck: http://docs.opscode.com/resource_package.html
[2013-08-09 12:30:48 -0400] wimvandijck: adamjk-dev Well yes that's what I'm trying :). And I specify "  provider Chef::Provider::Package::Pkgng", but still during the chef run, it's looking for a port
[2013-08-09 12:31:00 -0400] wimvandijck: Warning : this is my first attempt at setting up a system using chef :D
[2013-08-09 12:33:00 -0400] aberrios: I'm getting an error "ETXTBSY" Text File Busy when executing an init script, the script is previously copied to /etc/init.d from a local file... what am I doing wrong?
[2013-08-09 12:33:40 -0400] aberrios: permissions are set to 0755
[2013-08-09 12:35:08 -0400] adamjk-dev: wimvandijck: hrm.... i am not sure off hand... I don't know if you have to include that file or what
[2013-08-09 12:35:18 -0400] adamjk-dev: wimvandijck: i just did some quick yoogling to see what was available
[2013-08-09 12:38:19 -0400] UukGoblin: http://pastebin.com/ciWz6DaQ
[2013-08-09 12:38:57 -0400] UukGoblin: I'm overriding the node['postgresql']['password']['postgres'] as the README / recipe says, yet it still complains that I didn't
[2013-08-09 12:39:32 -0400] UukGoblin: what am I doing wrong?
[2013-08-09 12:43:02 -0400] wimvandijck: adamjk-dev I found a recent cookbook that provides a pkgng provider and sets it as the package provider. It seems to be doing it's job, as far as I can tell from the failed-run-data.json.
[2013-08-09 12:43:10 -0400] wimvandijck: Relevant portion posted http://pastebin.com/Pa7iLB5e
[2013-08-09 12:43:20 -0400] adamjk-dev: wimvandijck: oh nice
[2013-08-09 12:43:46 -0400] wimvandijck: adamjk-dev yeah, that was my initial reaction too :D. if only i could get it to work ;)
[2013-08-09 12:44:29 -0400] adamjk-dev: wimvandijck: yeah, and I never mess much with that stuff really... was just trying to get you a quick answer or point of direction since the channel is kinda non-responsive earlier in the day
[2013-08-09 12:44:59 -0400] Illusioneer: I have a more structural question, why do we have a separate validator.pem and a admin.pem?
[2013-08-09 12:45:22 -0400] wimvandijck: adamjk-dev cool, much appreciated ;). In all honesty, I am still in the process of learning, so maybe I'm just not understanding how to use custom providers?
[2013-08-09 12:45:44 -0400] adamjk-dev: wimvandijck: yeah of course, sorry I am not much more help without really diving in
[2013-08-09 12:45:58 -0400] adamjk-dev: wimvandijck: I am new as well... and haven't written any of my own yet either or I might have more advice
[2013-08-09 12:52:57 -0400] Illusioneer: I am a bit confused, nodes and clients seem to be referred to almost interchangably
[2013-08-09 12:53:10 -0400] Illusioneer: Yet they are treated like distinctly different things
[2013-08-09 12:54:48 -0400] shimo: a client is more like a user, whereas a node is an actual machine/instance somewhere
[2013-08-09 12:55:20 -0400] shimo: for example, chef-server comes with two built-in clients, "chef-validator" and "chef-webui"
[2013-08-09 12:55:52 -0400] shimo: they are not nodes. they just access the api to do their stuff (from what i understand)
[2013-08-09 13:08:52 -0400] Illusioneer: sorry shimo my chat forgot to ping me, thanks for that :)
[2013-08-09 13:13:08 -0400] joelnn: Illusioneer: I think it's because generally you have a client defined for each node, so they are almost 1:1, other than your chef workstation(s)
[2013-08-09 13:13:37 -0400] joelnn: Illusioneer: standard "knife bootstrap" registers a new client for the node
[2013-08-09 13:13:42 -0400] Illusioneer: joelnn: yeah I am not sure what situation would require multiple clients defined for a single node
[2013-08-09 13:14:22 -0400] joelnn: as to why you want a client defined for each node, not sure... I guess a bit of security
[2013-08-09 13:15:31 -0400] Illusioneer: i promise this room, the moment I get my head properly wrapped around the whole process, I am going to make a nice long vid-cast explaining it to other newbs like me :)
[2013-08-09 13:15:34 -0400] joelnn: Illusioneer: with chef-solo I have 0 clients, so that's the other end of the spectrum :)
[2013-08-09 13:16:05 -0400] Illusioneer: joelnn: you know I was thinking of chef-solo until that single-line install for chef server came around
[2013-08-09 13:18:51 -0400] joelnn: Yeah that helps, but installing it wasn't really the barrier for me. the company I joined had a way out-of-sync chef-server, lots of node attributes scattered around, some kind of "disappearing cookbook" issue (chef repo on the server was corrupted at some point I think)
[2013-08-09 13:19:19 -0400] joelnn: so I said, hm, this seems like a thing I don't need right now :)
[2013-08-09 13:22:14 -0400] joelnn: also the very large number of places that attributes could be set/overridden made it look very daunting to me. more power/rope than I need right now.
[2013-08-09 13:24:06 -0400] wimvandijck: adamjk-dev FYI : I can force a recipe to use the pkgng provider if I set the source of the package to the packagesite for pkgng. However, I don't feel like I should be doing this for each package/recipe. Is there a place where one can set the source for all packages by default?
[2013-08-09 13:25:21 -0400] Illusioneer: right now I'm still wrapping my head around the internals of it, while things like chef solo are very appealing I don't like half measures, and while I'd have rather installed it all from scratch for now I'm happy with letting the script do that for me while I grok how the system works
[2013-08-09 13:28:03 -0400] zts: Illusioneer: you won't have multiple clients for one node, but you will have clients that are not associated with any node
[2013-08-09 13:28:25 -0400] zts: and I believe that association is simply convention - ie, I don't think there's a mapping between clients and nodes
[2013-08-09 13:28:50 -0400] zts: just that a client can update a node if the node name matches the client name
[2013-08-09 13:28:57 -0400] Illusioneer: sort of like how in a network user system like say Active Directory a user can exist independent of any workstation
[2013-08-09 13:29:10 -0400] suffix_: is it possible to use Chef.log inside of a ruby block?
[2013-08-09 13:29:57 -0400] jbz: suffix_: Yep
[2013-08-09 13:30:02 -0400] suffix_: fantastic
[2013-08-09 13:30:33 -0400] jbz: suffix_: Wait, hang on, do you mean a block of code in a recipe, or a Ruby script resource?
[2013-08-09 13:30:57 -0400] suffix_: I mean a ruby_block resource
[2013-08-09 13:31:01 -0400] jbz: i.e. if the code is being forked out to system ruby to eval, I'm not positive.  I have used it in inline ruby code in recipes.
[2013-08-09 13:31:05 -0400] jbz: ahhh
[2013-08-09 13:31:43 -0400] jbz: I still think that will work, since it'll be evaluated as part of the run
[2013-08-09 13:31:50 -0400] jbz: so Chef.log should be available, yes.
[2013-08-09 13:31:56 -0400] jbz: But I'm not 100% positive.
[2013-08-09 13:31:57 -0400] adamjk-dev: oh really? that is nice at least.... I am not aware of where you can do that sorry
[2013-08-09 13:37:34 -0400] suffix_: jbz / adamjk-dev NoMethodError: undefined method `log' for Chef::Resource::RubyBlock
[2013-08-09 13:38:19 -0400] adamjk-dev: wimvandijck: I am not sure where you can do that... but I would imagine you can
[2013-08-09 13:39:07 -0400] jbz: bleah.  Wait, try:  Chef::log.info, does that work?
[2013-08-09 13:39:56 -0400] jbz: suffix_: like - Chef::Log.info('some message')
[2013-08-09 13:41:06 -0400] suffix_: had an error: NoMethodError: undefined method `log' for Chef:Class
[2013-08-09 13:45:30 -0400] suffix_: jbz it's Chef::Log.info() with a capitol L
[2013-08-09 13:45:53 -0400] jbz: suffix_: Yep. sorry, I had it right the second time lol
[2013-08-09 13:46:15 -0400] suffix_: jbz the output does not appear to be logged to console though
[2013-08-09 13:46:18 -0400] suffix_: any idea whay?
[2013-08-09 13:46:20 -0400] suffix_: *why
[2013-08-09 13:46:27 -0400] jbz: suffix_:  It will log to whereever your client is set to log
[2013-08-09 13:46:46 -0400] suffix_: output is going to console
[2013-08-09 13:46:50 -0400] suffix_: there is no log location
[2013-08-09 13:47:00 -0400] jbz: hm
[2013-08-09 13:47:38 -0400] jbz: have you grepped the output for your message?  I know I always had issues finding log messages because of order execution not being what I had thought :-)
[2013-08-09 13:48:17 -0400] jbz: That should really say 'execution order', but that sounds all harsh
[2013-08-09 14:12:04 -0400] jdjeffers: Good morning. I have a question about the opscode/nginx recipe. I'm getting an error from the default recipe: "#<Chef::Provider::Service::Simple:0x0000000331c3a8> does not support :enable"
[2013-08-09 14:19:08 -0400] sfontes: Hello can any one help me setting up a svn server using chefcookbook
[2013-08-09 14:25:06 -0400] rep0st: so i'm approaching close to a thousand nodes being managed by chef. Any discussion about limiting my failure domain
[2013-08-09 14:33:23 -0400] MoonMan_: I'm wondering what the best way to write a simple string is? Do I need an attached attribute file?
[2013-08-09 14:39:41 -0400] me2resh: Hi, I am having a problem with chef resolving the wrong url for cookbooks, please see this error I am getting while bootstrabing http://paste2.org/EDvbb2Jz
[2013-08-09 14:45:07 -0400] jjeffers: Why would the service declaration default to the Simple provider, and not one for the OS (in this case Debian/Ubuntu)?
[2013-08-09 14:46:03 -0400] spox: jjeffers: is it using runnit?
[2013-08-09 14:51:28 -0400] jjeffers: @spox: let me check
[2013-08-09 14:52:06 -0400] jjeffers: it actually doesn't specify
[2013-08-09 14:52:21 -0400] jjeffers: service "nginx" do... no provider listed
[2013-08-09 14:53:11 -0400] jjeffers: In the source sub-recipe, which is in the run list, there is a service resource block, but it specifies Upstart. But in the default recipe, which is where the error occurs, there is no provider attribute used.
[2013-08-09 15:05:50 -0400] ank: chef-client is choking on an ohai attribute with the wrong encoding, can i spoof/set/delete an automatic attribute?
[2013-08-09 15:06:15 -0400] MoonMan_: Can anyone supply me with some sample code that writes a few lines of straight text to a config file? I'm having some trouble with the boilerplate.
[2013-08-09 15:06:34 -0400] MoonMan_: The attributes/recipe integration is sending me for a bit of a loop.
[2013-08-09 15:09:07 -0400] chris613: Moonman: The first anser on this page is a pretty simple example of how to supply variables to a template from a recipe: http://serverfault.com/questions/465555/chef-ruby-erb-files-how-does-this-example-code-work  (ignore the question itself)
[2013-08-09 15:11:08 -0400] chris613: MoonMan_: No attributes in that example, but if you have a node attribute you want to use in your config file you can just do it like <%= node['myattribute'] %>, or you can pass it in the variables clause of the template resource in the recipe
[2013-08-09 15:11:59 -0400] chris613: The thing that confused me the most about this simple stuff when I started is that the "variables clause" I referred to is actually better called "the variables attribute of the template resource", which is confusing because it has nothing at all to do with "node attributes", which are an entirely different concept
[2013-08-09 15:12:43 -0400] kl4m: Hi, I want to "wrap" a community cookbook and set a new "cookbook" property for one of its templates. It's kind of working but the file is changed each time and changed back with my reopened version. Can I declare my template resource as a kind of stub to be completed later in the run?
[2013-08-09 15:13:31 -0400] MoonMan_: So for example, if I want to print "interface = wlan0" into a config file, I'm thinking I would do "interface=<%= node["network"]["interface_name"] %>", then "node.set["network"]["interface_name"] = "wlan0" in an attributes file, right?
[2013-08-09 15:13:47 -0400] zts: chris613: I live in hope that, one day, everyone will call them 'parameters' instead of 'resource attributes'.  Not that "parameter" is unambiguous, but it's better than "attribute"
[2013-08-09 15:13:49 -0400] MoonMan_: It all seems very redundant to me. Why can't I just print text directly to a config file in one step?
[2013-08-09 15:15:50 -0400] zts: MoonMan_: you can?  Nothing forces you to make things into variables - but it saves you time when you have a config file that just has a few settings that change depending on the machine
[2013-08-09 15:16:10 -0400] chris613: zts: Well I think in ruby they are technically attributes of an object, aren't they?
[2013-08-09 15:16:35 -0400] mattupstate: with the `deploy_revision` resource, if delete the directory i'm deploying to and redeploy, it always rolls back to the previous release even though there is nothing in the deploy folder
[2013-08-09 15:16:37 -0400] chris613: Wait, maybe I investigateds this and found that they are actually methods.... probably accessor methods that mostly just set an attribute?
[2013-08-09 15:16:54 -0400] MoonMan_: zts: Well the thing is, for my application the config files would not change by machine. I'm looking for the most dead-simple way to do just write simple text into a config file using chef. Could anyone point me to some code that does just that?
[2013-08-09 15:16:58 -0400] zts: chris613: indeed, they are methods - but yeah, ignore the ruby behind the curtain :)
[2013-08-09 15:17:10 -0400] chris613: kl4m look into chef-rewind
[2013-08-09 15:17:18 -0400] mattupstate: how can i essentially reset the deployment and allow the `deploy_revision` resource act as if there was nothing there
[2013-08-09 15:17:35 -0400] d4m: Question about CHEF-4011, options --secret and --secret-file were added to 'knife bootstrap' but not 'knife ec2', what is the preferred way now to get the encrypted_data_bag_secret onto machines using 'knife ec2 server create' ?
[2013-08-09 15:17:36 -0400] zts: MoonMan_: do you want Chef to write out the whole config file, or do you want Chef to append some text to a file that is already there?
[2013-08-09 15:18:04 -0400] chris613: kl4m: chef-rewind will allow you to find an existing resource (from the community cookbook) and then re-define it (add your new cookbook property... or do we call them parameters.... or attributes....)
[2013-08-09 15:18:07 -0400] MoonMan_: zts: Whole files. All we're using chef for at this juncture is overwriting config files.
[2013-08-09 15:18:33 -0400] MoonMan_: I want to do it in the simplest way possible until I learn more about the different ways of doing things  in chef.
[2013-08-09 15:18:46 -0400] zts: MoonMan_: cool, in that case you probably want the cookbook_file resource.  You put a file inside your cookbook (under files/default/<yourfile.cfg>), and then use a cookbook_file resource to say where it goes, what its owner should be, etc
[2013-08-09 15:19:07 -0400] MoonMan_: Oh wow, that sounds super simple compared to what I was doing.
[2013-08-09 15:19:12 -0400] MoonMan_: Is it well documented?
[2013-08-09 15:19:18 -0400] zts: MoonMan_: http://docs.opscode.com/resource_cookbook_file.html
[2013-08-09 15:19:30 -0400] MoonMan_: Nice. Thanks man, I'll check that out.
[2013-08-09 15:20:06 -0400] zts: MoonMan_: no problem - be warned, there's a bunch of file resources that do slightly different things, so you will probably end up changing which resource you're using as you evolve your usage
[2013-08-09 15:20:10 -0400] me2resh: Hi, I am having a problem with chef resolving the wrong url for cookbooks, please see this error I am getting while bootstrabing http://paste2.org/EDvbb2Jz
[2013-08-09 15:20:47 -0400] zts: MoonMan_: eg, the 'file' resource can create files, and you set its contents as a string right inside your recipe - that's probably the simplest way of doing exactly what you described, but it's a mess if you have more than a few lines of content
[2013-08-09 15:21:08 -0400] zts: MoonMan_: cookbook_file installs a file you ship with your cookbook, remote_file will download a file (usually using HTTP) and install that
[2013-08-09 15:21:31 -0400] kl4m: chris613: I thought there was a builtin way but a quick test shows it does *exactly* what I want. Thanks
[2013-08-09 15:21:36 -0400] chris613: MoonMan_: When you asked "writes a few lines of straight text" it seemed like you had some text to inject/append. If you want to just deliver a file, zts is totally right with cookbook_file. Eventually you'll find that you'd rather every plaintext cookbook_file actually be a template to cut down on changes when you one day want to alter it's content. But if you're not there yet, cookbook_file is less overhead
[2013-08-09 15:21:37 -0400] MoonMan_: zts:  What about pulling whole files from version control and automatically overwriting?
[2013-08-09 15:22:16 -0400] chris613: kl4m: No built-in way that I've found. Also I haven't played with chef-rewind in Chef 11; I'm worried its behaviour might change.
[2013-08-09 15:22:40 -0400] chris613: MoonMan_: http://docs.opscode.com/resource_scm.html
[2013-08-09 15:23:08 -0400] zts: MoonMan_: There's a git resource, for checking out whole git repositories (http://docs.opscode.com/resource_git.html), and I imagine for other source control tools, if that helps
[2013-08-09 15:23:24 -0400] zts: oh yeah, forgot that 'scm' was a thing :)
[2013-08-09 15:23:24 -0400] MoonMan_: I'll go into a little more detail. My company is doing a project with raspberry pi's, running debian, where we need to deploy and update whole config files. I'm thinking an easier way to go about this problem is to just pull them off version control then get chef to put them in place. I only delved into ruby yesterday, I'm more of a javascript guy so I'm still a little lost.
[2013-08-09 15:23:49 -0400] MoonMan_: All the units will be exactly the same, hardware and software wise, so I don't think I need to go into templates quite yet.
[2013-08-09 15:24:26 -0400] MoonMan_: I'm thinking resource_git might be a better bet for my situation.
[2013-08-09 15:25:49 -0400] zts: it's worth looking at.  I've also installed lone files using remote_file downloading "raw" links from github/bitbucket/whatever, which works
[2013-08-09 15:26:12 -0400] zts: but if you can frame the problem as keeping a git clone up to date, the git resource is probably the way to go
[2013-08-09 15:27:15 -0400] MoonMan_: I think keeping a git clone up to date is exactly what our issue is. The chef documentation on git is nice and all, but do you know of any fleshed-out examples that I can study and work from?
[2013-08-09 15:27:55 -0400] MoonMan_: I'm not quite sure where I would insert my git repository information in the examples and point them exactly where the files need to go.
[2013-08-09 15:29:51 -0400] zts: MoonMan_: on the http://docs.opscode.com/resource_git.html page, search for "couchdb" - that one is pretty self-contained
[2013-08-09 15:30:17 -0400] zts: MoonMan_: the /opt/mysources/couch is the directory on your system where the git clone should go, and repository is the URL for the repo
[2013-08-09 15:30:27 -0400] zts: MoonMan_: "reference" is the name of the branch you want checked out
[2013-08-09 15:31:29 -0400] MoonMan_: zts: Very helpful, that's a reasonably clear example. What sort of boilerplate do I have to insert in my recipe before using something like that? Would there be any other files involved?
[2013-08-09 15:32:01 -0400] MoonMan_: By files I mean would there be any other files in my cookbook other than that code in a recipe?
[2013-08-09 15:32:51 -0400] jbz: MoonMan_:  If you want to be sure you have everything in a cookbook you need, use knife cookbook create to make the skeleton
[2013-08-09 15:33:46 -0400] jbz: MoonMan_That will put in all manner of subdirs and the like, as well as the metadata file and a default.rb recipe
[2013-08-09 15:33:54 -0400] MoonMan_: Okay, great. So to be clear, I create the skeleton, then I can modify that little snippet of example code to suit my needs and place that in the recipe? And that's it, it should work?
[2013-08-09 15:34:29 -0400] MoonMan_: There's no code needed before or after that snippet to reference anything?
[2013-08-09 15:34:33 -0400] zts: yeah, that should do it
[2013-08-09 15:34:34 -0400] jbz: MoonMan_:  Yep, put that snippet into the default.rb to start with.  You'll want to make sure any attributes you're using get set somewhere, too, either in the attributes/default.rb or similar.
[2013-08-09 15:34:51 -0400] jbz: MoonMan_ Nope, just the resource codeyeah, as zts said.
[2013-08-09 15:35:08 -0400] MoonMan_: Perfect, I'll try that out. Thanks for the help.
[2013-08-09 15:38:49 -0400] MoonMan_: Would :checkout be appropriate for pulling files from git unmodified?
[2013-08-09 15:39:00 -0400] MoonMan_: As an action.
[2013-08-09 15:40:02 -0400] cpuguy83: Haven't looked at the resource, but I would think checkout would be to set the branch, not get a file.
[2013-08-09 15:40:09 -0400] jbz: MoonMan_: You want :sync I think
[2013-08-09 15:40:12 -0400] cpuguy83: but, again, I haven't read it.
[2013-08-09 15:40:26 -0400] sanguisdex: so I am on ubuntu 13.04 and for the life of me I can not get knife-rackspace to install. log at http://pastebin.com/tC4pUMQy. any sugestions?
[2013-08-09 15:40:34 -0400] MoonMan_: cpuguy83: Ah yes that would make sense. :sync it is
[2013-08-09 15:42:57 -0400] alexbst: @jbz the old scrum sends its love :)
[2013-08-09 15:45:44 -0400] jbz: alexbst:  Heh tell 'em GRAAAAARGH BITCH WHINE RANT
[2013-08-09 15:51:41 -0400] jjeffers: I'm beginning to wonder if these community cookbooks were tested, at all
[2013-08-09 15:51:57 -0400] jtimberman: jjeffers: which ones?
[2013-08-09 15:52:08 -0400] Dynom: too many of 'm
[2013-08-09 15:52:09 -0400] jtimberman: if they're maintained by opscode, "yes" but "not necessarily on your platform" :)
[2013-08-09 15:52:11 -0400] binamov: jjeffers they're "use at your own risk" :)
[2013-08-09 15:52:20 -0400] jjeffers: @jtimbermann, well the nginx one for starters
[2013-08-09 15:52:29 -0400] Dynom: binamov; that is the biggest downside I find with Chef cookbooks
[2013-08-09 15:52:30 -0400] jtimberman: jjeffers: that one is quite heavily tested.
[2013-08-09 15:52:52 -0400] jjeffers: Maybe I misunderstand you are supposed to use it?
[2013-08-09 15:52:57 -0400] binamov: Dynom cookbooks written and maintained by opscode are aaight
[2013-08-09 15:53:16 -0400] jjeffers: I set "nginx::source", and the run tries to install the ubuntu package
[2013-08-09 15:53:19 -0400] binamov: Dynom it's a community after all
[2013-08-09 15:53:29 -0400] jtimberman: jjeffers: set that where?
[2013-08-09 15:53:34 -0400] jjeffers: in the run list
[2013-08-09 15:53:40 -0400] jtimberman: include the nginx::source recipe in your run list?
[2013-08-09 15:53:53 -0400] Dynom: Maybe it's the concept, not so much specifically something anyone can prevent. But I find that I spend a few hours a week, fixing stuff
[2013-08-09 15:54:20 -0400] jjeffers: @jtimberman: resolving cookbooks for run list: ["chef-client", "apt", "ruby", "base", "ntp", "mysql::server", "ruby_build", "aws", "nginx::source"
[2013-08-09 15:54:32 -0400] jtimberman: jjeffers: what version of the cookbook do you have?
[2013-08-09 15:55:09 -0400] jjeffers: 1.7
[2013-08-09 15:55:33 -0400] jjeffers: I experimented with different attributes after looking at http://www.nicolasgarnil.me/blog/2013/configuring-nginx-and-unicorn-with-chef-solo/
[2013-08-09 15:55:55 -0400] jjeffers: So I set, "nginx.install_method" to "source"
[2013-08-09 15:56:25 -0400] jjeffers: and added the "passenger" module to the list of nginx.source.modules attribute
[2013-08-09 15:56:33 -0400] binamov: Dynom i hope you fork and merge as you do that ;)
[2013-08-09 15:57:01 -0400] jtimberman: binamov: depends on whether "fixes" are "make it work for my use case" or "there's something definitely broken" :)
[2013-08-09 15:57:06 -0400] jjeffers: the passenger module sub-recipe includes the default nginx recipe, which tries to start the service and fails because there's no start script laid out
[2013-08-09 15:57:19 -0400] binamov: jtimberman ;)
[2013-08-09 15:57:51 -0400] Dynom: binamov; I whish I could, most of the hacks I do are hard-coded things, not something I'd publish :-)
[2013-08-09 16:01:07 -0400] lewiz: I'm writing a recipe that installs a file that talks to a DB to get a unique id.  As part of the recipe I'm using the output of this script as a variable.  The recipe fails at compile time as the file does not yet exist.  Is there any clever way around this?
[2013-08-09 16:02:28 -0400] yfeldblum: lewiz, why not talk to the db directly from your recipe at compile time?
[2013-08-09 16:02:59 -0400] lewiz: yfeldblum: Very good question.  Do you have any examples I could refer to?
[2013-08-09 16:03:43 -0400] yfeldblum: lewiz, or, what is the output of the script going to be used for?
[2013-08-09 16:03:59 -0400] jtimberman: man, chef runs fast on bare metal hardware systems with lots of cpu/mem :)
[2013-08-09 16:04:04 -0400] jtimberman: newsflash
[2013-08-09 16:04:27 -0400] juliancdunn: stop the presses
[2013-08-09 16:04:31 -0400] lewiz: yfeldblum: a simple integer ID.  I'm using it as the basis of a database name.  e.g. users_#{id}
[2013-08-09 16:04:31 -0400] binamov: Dynom have you considered writing wrapper cookbooks around the community ones, to make them work for you? this way when the community cookbook gets updated, your hacks will still work...
[2013-08-09 16:05:04 -0400] yfeldblum: lewiz, what does the recipe then do with that database name?
[2013-08-09 16:05:54 -0400] lewiz: yfeldblum: the db is generated from a schema in a template and loaded into mysql
[2013-08-09 16:14:07 -0400] lewiz: yfeldblum: any thoughts?
[2013-08-09 16:14:58 -0400] yfeldblum: lewiz, perhaps the script that loads the generated schema file into mysql can also first call the other script that gets the db id
[2013-08-09 16:15:44 -0400] adamjk-dev: hey all... having issues using public boxes with vagrant and chef
[2013-08-09 16:15:48 -0400] adamjk-dev: anyone seen this kind of output: http://lists.opscode.com/sympa/arc/chef/2012-11/msg00187.html
[2013-08-09 16:15:53 -0400] adamjk-dev: and perhaps know the resolution?
[2013-08-09 16:16:03 -0400] adamjk-dev: is it my insecure_private_key or directory permissions
[2013-08-09 16:16:43 -0400] lewiz: yfeldblum: yep, I don't see why that would not work
[2013-08-09 16:16:56 -0400] amccloud: how do i bootstrap a node in an environment?
[2013-08-09 16:19:44 -0400] cpuguy83: The font on the community cookbook site is so horrible.
[2013-08-09 16:24:27 -0400] jtimberman: cpuguy83: ?? font-family: Helvetica, Arial, sans-serif;
[2013-08-09 16:26:25 -0400] cpuguy83: jtimberman: Maybe it's just the MD rendering... I always go to the github repo to read about the cookbook readme
[2013-08-09 16:27:19 -0400] gkarekinian: It's the line-height and the length of the lines that are fucked up
[2013-08-09 16:27:22 -0400] jtimberman: cpuguy83: well, the cookbooks site doesn't display GitHub flavored markdown.
[2013-08-09 16:27:34 -0400] gkarekinian: That and the grey text on white
[2013-08-09 16:28:05 -0400] cpuguy83: jtimberman: yes, ugly
[2013-08-09 16:28:17 -0400] cpuguy83: gkarekinian: yes, this
[2013-08-09 16:32:34 -0400] cpuguy83: color, line spacing, font size
[2013-08-09 16:37:22 -0400] mose: hi there
[2013-08-09 16:37:37 -0400] mose: I have a weird situation for which I could use some light
[2013-08-09 16:37:48 -0400] mose: it involves chef-solo, vagrant and a mac
[2013-08-09 16:38:05 -0400] mose: I have a linux desktop and a mac
[2013-08-09 16:38:23 -0400] mose: on linux I can vagrant provision dev it works fine
[2013-08-09 16:39:09 -0400] mose: on mac with same code it fails and says there is a permission problem in ransferring the encrypted_data_bag_secret
[2013-08-09 16:39:19 -0400] mose: but perms on that file are fine for my user
[2013-08-09 16:39:34 -0400] mose: is this something typically due to my lack of mac knowledge ?
[2013-08-09 16:39:57 -0400] Illusioneer: so while running knife bootstrap (from server) it starts ok but then says it can't connect to "localhost 443 connection refused".  Now I'm guessing that's the client reporting that, but why is it trying to connect to localhost instead of the chef server?
[2013-08-09 16:47:46 -0400] binamov: Illusioneer your server is your workstation?
[2013-08-09 16:48:20 -0400] Illusioneer: no, i am running bootstrap from the server
[2013-08-09 16:49:19 -0400] binamov: Illusioneer where is the org-validator.pem ?
[2013-08-09 16:50:58 -0400] binamov: Illusioneer part of the bootstrap process is getting the org-validator.pem onto the node, so it can authenticate w chef-server and get its own private key; that's why there is a workstation setup process http://docs.opscode.com/#the-workstation
[2013-08-09 16:53:08 -0400] Illusioneer: the validator pem's in both the /etc/chef-server and I also copied it to the client /etc/chef dir
[2013-08-09 16:53:50 -0400] binamov: Illusioneer umm it's part of the bootstrap script i recommend you actually set up a workstation as described in the link i pasted above
[2013-08-09 17:04:17 -0400] MoonMan_: Can anyone tell me how to find the URL of a file in version control (Beanstalk, git)?
[2013-08-09 17:04:39 -0400] MoonMan_: I'm trying to checkout a file I have in version control from my terminal and it can't find the full path. I'm using the repo url +
[2013-08-09 17:04:48 -0400] MoonMan_: ~/<filename>
[2013-08-09 17:05:36 -0400] binamov: MoonMan_ you mean like this https://github.com/opscode/chef-repo/blob/master/README.md ?
[2013-08-09 17:05:51 -0400] quickdry21: Does anyone know what is causing this? I'm trying to upload a cookbook to a chef server I am hosting on EC2 --- $ knife cookbook upload ntp\n Uploading ntp          [0.1.0]\n ERROR: Errno::ENOENT: No such file or directory - getaddrinfo
[2013-08-09 17:06:32 -0400] MoonMan_: quickdry21:  Try sudo? It has helped me with ENOENT in the past.
[2013-08-09 17:07:18 -0400] binamov: quickdry21 MoonMan_ don't think you need sudo to do knife cookbook upload you're running this from chef-repo ?
[2013-08-09 17:07:26 -0400] quickdry21: yup
[2013-08-09 17:07:47 -0400] konopka: quickdry21: Are you able to run a knife status?
[2013-08-09 17:07:48 -0400] binamov: quickdry21 is this a vanilla community ntp cookbook or you modified it?
[2013-08-09 17:08:01 -0400] quickdry21: knife status returns nothing
[2013-08-09 17:08:12 -0400] quickdry21: this is a tutorial ntp cookbook
[2013-08-09 17:08:13 -0400] yfeldblum: MoonMan_, files in version control do not necessarily have URLs
[2013-08-09 17:08:48 -0400] MoonMan_: yfeldblum: Hm. Then how do I reference a file in cook to download and push it to a directory? I would think a URL with a file path.
[2013-08-09 17:08:54 -0400] MoonMan_: chef* lol
[2013-08-09 17:09:28 -0400] yfeldblum: MoonMan_, you may clone the repository and then copy the file from the clone
[2013-08-09 17:09:36 -0400] binamov: quickdry21 knife status should return something...
[2013-08-09 17:10:08 -0400] quickdry21: does knife client list indicate i can communicate with the chef server?
[2013-08-09 17:10:08 -0400] MoonMan_: yfeldblum: the git resource is looking for a repository URL.
[2013-08-09 17:10:19 -0400] Linuxhorn: anyone ever see an issue where chef changes a node.hostname with underscores into dashes?
[2013-08-09 17:10:28 -0400] Linuxhorn: i.e. test_1 changes to test_6
[2013-08-09 17:10:31 -0400] yfeldblum: MoonMan_, yes, repositories have URLs
[2013-08-09 17:11:03 -0400] yfeldblum: MoonMan_, a *whole* repository has a URL, but an individual file within a repository may not
[2013-08-09 17:11:25 -0400] MoonMan_: yfeldblum:  But how do I reference the file name as part of that url to point to a specific config file it needs to :sync? Or how do I reference that file period?
[2013-08-09 17:11:32 -0400] binamov: quickdry21 yes
[2013-08-09 17:11:48 -0400] MoonMan_: I believe the repository field is looking for a specific path to the file in question.
[2013-08-09 17:12:04 -0400] quickdry21: hmm. so i can knife list clients, but knife status returns nothing
[2013-08-09 17:12:17 -0400] binamov: quickdry21 and knife node list ?
[2013-08-09 17:12:31 -0400] quickdry21: returns a blank line
[2013-08-09 17:13:23 -0400] binamov: quickdry21 no bootstrapped nodes?
[2013-08-09 17:13:29 -0400] quickdry21: nope
[2013-08-09 17:13:31 -0400] yfeldblum: MoonMan_, no, the `repository` field of the `git` resource is looking for the URL of the repository
[2013-08-09 17:13:34 -0400] yfeldblum: MoonMan_, http://docs.opscode.com/resource_git.html
[2013-08-09 17:13:37 -0400] quickdry21: just trying to upload a cookbook
[2013-08-09 17:13:52 -0400] MoonMan_: yfeldblum: Okay, then how do I point it to a file? Would that be another field?
[2013-08-09 17:13:58 -0400] binamov: quickdry21 what does knife client list say?
[2013-08-09 17:14:10 -0400] quickdry21: chef-validator and chef-webui
[2013-08-09 17:14:18 -0400] yfeldblum: MoonMan_, of course not; i repeat from before: "you may clone the repository and then copy the file from the clone"
[2013-08-09 17:14:51 -0400] MoonMan_: Sorry, I'm still a little confused. Clone to where, my chef workstation?
[2013-08-09 17:14:57 -0400] binamov: quickdry21 you're doing this from chef-repo, there is a cookbooks subfolder and ntp subfolder within it?
[2013-08-09 17:15:03 -0400] quickdry21: yes sir
[2013-08-09 17:16:10 -0400] quickdry21:  home/xxx/.rvm/rubies/ruby-1.9.3-p448/lib/ruby/1.9.1/net/http.rb:763:in `initialize': No such file or directory - getaddrinfo (Errno::ENOENT)
[2013-08-09 17:16:30 -0400] quickdry21: line 763 is opening a tcp socket
[2013-08-09 17:16:31 -0400] binamov: quickdry21 oh
[2013-08-09 17:16:39 -0400] binamov: quickdry21 you have many rubys and rvm?
[2013-08-09 17:17:05 -0400] quickdry21: i'm using rvm, yes... don't have a ton of stuff installed under it
[2013-08-09 17:17:28 -0400] binamov: quickdry21 chef ships with its own ruby, part of omnibus install; disable rvm and try again?
[2013-08-09 17:19:54 -0400] binamov: quickdry21 although with the wrong ruby i can't even do a knife client list...
[2013-08-09 17:21:26 -0400] quickdry21: nope, same error
[2013-08-09 17:22:49 -0400] binamov: quickdry21 knife cookbook list ?
[2013-08-09 17:23:31 -0400] quickdry21: hmm, nothing
[2013-08-09 17:23:46 -0400] binamov: quickdry21 do a knife cookbook create foobar ; and then knife cookbook upload foobar
[2013-08-09 17:24:19 -0400] tabolario: hmm i have an ec2 vpc instance that does not seem to be getting the ec2.* attributes when i run chef-client or ohai
[2013-08-09 17:24:35 -0400] quickdry21: when i do knife cookbook create foobar, knife cookbook list still gives me nothing
[2013-08-09 17:24:47 -0400] tabolario: i see there were some issues with this last year that were resolved
[2013-08-09 17:24:48 -0400] binamov: quickdry21 because you didn't upload it yet :)
[2013-08-09 17:24:53 -0400] quickdry21: oh lol
[2013-08-09 17:25:07 -0400] binamov: quickdry21 knife cookbook list shows you what's on the server
[2013-08-09 17:25:13 -0400] quickdry21: still the same :( /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:763:in `initialize': No such file or directory - getaddrinfo (Errno::ENOENT)
[2013-08-09 17:26:01 -0400] binamov: quickdry21 something is wrong w your workstation setup...
[2013-08-09 17:26:20 -0400] quickdry21: alright... ill see if i can wipe it and start fresh
[2013-08-09 17:26:32 -0400] quickdry21: any hints on where the problem may lay?
[2013-08-09 17:26:45 -0400] binamov: quickdry21 how did you set up your workstation?
[2013-08-09 17:27:03 -0400] quickdry21: used the unibus installer, cloned the chef-repo
[2013-08-09 17:27:06 -0400] cpuguy83: quickdry21: You may want to put your workstation setup into vagrant
[2013-08-09 17:27:28 -0400] quickdry21: yeah that sounds like a good idea
[2013-08-09 17:30:04 -0400] quickdry21: thanks for your help btw!
[2013-08-09 17:31:24 -0400] volker-: what is the best way to run an 'execute' statement only once?
[2013-08-09 17:31:40 -0400] binamov: volker- use not_if only_if ?
[2013-08-09 17:31:51 -0400] volker-: puppet seems to use somethign lie "refreshonly => [true|false]"
[2013-08-09 17:32:18 -0400] volker-: binamov: thats what I know, but maybe there is also another way (but don't find it in the docs)
[2013-08-09 17:32:24 -0400] volker-: s/lie/like/
[2013-08-09 17:32:41 -0400] cpuguy83: volker-: You can tell execute that it creates a file, if the file exists it won't execute
[2013-08-09 17:32:55 -0400] binamov: volker- the other way i can think of is have the action of :nothing and have another resource notify your execute resource ?
[2013-08-09 17:34:25 -0400] volker-: cpuguy83: in one nice option? Or do you mean "notify :create, file[myfile]" and then use not_if?
[2013-08-09 17:34:33 -0400] cpuguy83: execute 'foo' do; command 'touch bar'; creates 'bar'; end
[2013-08-09 17:35:10 -0400] MoonMan_: Can anyone take a look at my code for pulling an interfaces file from a git repository and syncing it with chef? http://pastebin.com/iDd59NyA
[2013-08-09 17:35:29 -0400] cpuguy83: https://gist.github.com/cpuguy83/6195495
[2013-08-09 17:35:38 -0400] cpuguy83: volker-: ^
[2013-08-09 17:35:45 -0400] miah: so, everytime i run apt::default on ubuntu 10.04 I get this awesome apt error about the partials directory.
[2013-08-09 17:35:47 -0400] volker-: cpuguy83: but if I don'
[2013-08-09 17:36:09 -0400] volker-: cpuguy83: but if I don't run "touch foo" but "whatever exec..."
[2013-08-09 17:36:13 -0400] static: Any body have ssl issues on centOS 6 ?
[2013-08-09 17:36:21 -0400] cpuguy83: Where the command would be whatever you want to execute... if the command creates a file itself, then you can use that file, or you can , at the end of your command touch your own file
[2013-08-09 17:36:29 -0400] static: I configured my machine with a new TLD and still get the ssl error
[2013-08-09 17:36:32 -0400] binamov: MoonMan_ i think you want :checkout action?
[2013-08-09 17:36:34 -0400] static: .net
[2013-08-09 17:36:56 -0400] MoonMan_: binamov: I was speaking with some people on IRC a little while ago and they recommended I use :sync
[2013-08-09 17:37:21 -0400] static: I uninstalled chef 11 and re-installed it and clean up everything so it creates new certs
[2013-08-09 17:37:28 -0400] MoonMan_: But aside from that, am I missing any sort of header/footer code? Can I pop that right in a recipe and run it if I wanted?
[2013-08-09 17:37:40 -0400] binamov: MoonMan_ give it a shot! :)
[2013-08-09 17:37:51 -0400] MoonMan_: binamov: Sounds good, will do!
[2013-08-09 17:37:57 -0400] cpuguy83: volker-: Updated the gist to show you
[2013-08-09 17:38:42 -0400] cpuguy83: volker-: If the command itself creates a file then you can use that file in the creates statement, if it doesn't you can create your own file by adding a '&& touch some_file' to the end of your command
[2013-08-09 17:39:43 -0400] volker-: cpuguy83: hmmm. looks hacky to read with the &&, the second is less my option
[2013-08-09 17:40:16 -0400] cpuguy83: volker-: You could also set a node attr, but I like that less.
[2013-08-09 17:40:48 -0400] tabolario: jtimberman: didn't you say recently that there were issues with ohai and ec2?
[2013-08-09 17:40:53 -0400] tabolario: or maybe that was coderanger
[2013-08-09 17:40:55 -0400] volker-: cpuguy83: I think I go with the && way because it is more compact. Thanks for the tip. Would else have used a notify and not_if
[2013-08-09 17:42:53 -0400] cpuguy83: volker-: Here's where I'm doing it in  a cookbook... though it seems I made an error and have 2 creates calls... will have to fix that.  https://github.com/cpuguy83/chef-openldap-server/blob/master/recipes/install.rb#L14-19
[2013-08-09 17:43:25 -0400] cpuguy83: Not using && touch foo, but real example of using creates.
[2013-08-09 17:44:11 -0400] volker-: cpuguy83: IC. thats based on the fact that the command itself creates that file
[2013-08-09 17:44:50 -0400] cpuguy83: This should almost be a resource provided in chef for commands that don't create a file but should be a one-time only command
[2013-08-09 17:45:01 -0400] volker-: cpuguy83: where do you store your testfiles?
[2013-08-09 17:45:34 -0400] cpuguy83: volker-: If it warrants it, in /spec or /test
[2013-08-09 17:45:37 -0400] stompyj: Is there a consensus on what to do when you're using a downloaded cookbook, but you need to modify it somewhat extensively?  Should that go in cookbooks or site-cookbooks?
[2013-08-09 17:46:03 -0400] cpuguy83: stompyj: Create a wrapper cookbook
[2013-08-09 17:47:13 -0400] stompyj: cpuguy83: thanks.  is there a seminal blog post or something I should search for to become familiar with that?
[2013-08-09 17:48:14 -0400] gpatmore: I'm new to chef and ruby and I was wondering about attrib file syntax. is there any reason I need to add attribs one at a time, or can I wrap in default[:myhash] = { :prop1 => 1, :prop2 => 2 } ? or is there some reason not to?
[2013-08-09 17:48:18 -0400] cpuguy83: stompyj: Let me see if I can find one... I don't recall seeing one that was awesome.
[2013-08-09 17:49:17 -0400] stompyj: cpuguy83: no worries, I can search around myself.  I just didn't know if there was a seminal post everyone was starting from
[2013-08-09 17:49:21 -0400] stompyj: thanks!
[2013-08-09 17:49:32 -0400] cpuguy83: stompyj: Chefk out berkshelf.com
[2013-08-09 17:49:51 -0400] stompyj: cpuguy83: I'm just about to integrate berkshelf actually
[2013-08-09 17:49:52 -0400] stompyj: nice
[2013-08-09 17:50:23 -0400] cpuguy83: http://realityforge.org/code/2012/11/19/role-cookbooks-and-wrapper-cookbooks.html has an example wrapper cookbook about half way down
[2013-08-09 17:50:25 -0400] MoonMan_: Quick question. I made a recipe and put it in the run-list. Will it run on machine reboot or do I have to trigger some sort of run/knife command within the chef workstation?
[2013-08-09 17:50:31 -0400] cpuguy83: 1/4 the way down
[2013-08-09 17:50:48 -0400] MoonMan_: By machine reboot I mean rebooting the node via the node's command line.
[2013-08-09 17:50:51 -0400] stompyj: cpuguy83: PERFECT, thanks so much!
[2013-08-09 17:51:14 -0400] cpuguy83: MoonMan_: you'll need to trigger a chef run somehow
[2013-08-09 17:51:45 -0400] MoonMan_: Hm okay, do you know the command offhand? I've been googling, can't really find anything, or maybe I'm overlooking something.
[2013-08-09 17:51:47 -0400] cpuguy83: If rebooting fires up a chef-run that'll work, but generally you just need to run chef-client on the system
[2013-08-09 17:52:32 -0400] MoonMan_: cpuguy83; Is there any way to do it remotely from the workstation>?
[2013-08-09 17:52:35 -0400] cpuguy83: you could do knife cook FQDN
[2013-08-09 17:52:47 -0400] gpatmore: maybe add to inittab?
[2013-08-09 17:52:49 -0400] quickdry21: hmm, it seems the ec2 chef server is resolving to the internal address: INFO: Uploading /home/vagrant/chef-repo/cookbooks/foobar/metadata.rb (checksum hex = 1c3d820e2b3c76727f92a11e82b3fb2c) to https://xxx.ec2.internal:443/bookshelf/organization-00000000000000000000000000000000/xxxx
[2013-08-09 17:53:12 -0400] cpuguy83: or ssh FQDN 'chef-client'
[2013-08-09 17:53:21 -0400] MoonMan_: Ah okay I see
[2013-08-09 17:54:00 -0400] MoonMan_: chef client being the IP of the client or the chef node name?
[2013-08-09 17:54:17 -0400] jbz: no
[2013-08-09 17:54:25 -0400] gpatmore: maybe /etc/rc.d/rc.sysinit if you have it?
[2013-08-09 17:54:26 -0400] jbz: chef-client is the command that you run to converge the node
[2013-08-09 17:54:37 -0400] cpuguy83: chef-client is the command that's getting run
[2013-08-09 17:54:42 -0400] MoonMan_: So how do I point it at the specific node?
[2013-08-09 17:54:43 -0400] jbz: MoonMan_: Can you log in to the machine in question as root?
[2013-08-09 17:54:49 -0400] MoonMan_: jbz: Yes, I can.
[2013-08-09 17:54:53 -0400] jbz: MoonMan_:  chef-client gets run *on the node*
[2013-08-09 17:54:57 -0400] amccloud: can I do environment[staging] in my run list when bootstrapping? I've tried knife bootstrap  -e staging but that doesn't seem to work
[2013-08-09 17:55:08 -0400] jbz: so the command above would ssh to FQDN (the machine's name) and then execute chef-client on it.
[2013-08-09 17:55:28 -0400] jbz: MoonMan_:  If you just want to run it once, you can always log in, su to root, and just type 'chef-client'
[2013-08-09 17:55:28 -0400] MoonMan_: Okay I'll try that.
[2013-08-09 17:55:30 -0400] jbz: if it's installed
[2013-08-09 17:55:48 -0400] MoonMan_: Bingo. That did it.
[2013-08-09 17:55:56 -0400] jbz: if the node is registered in the chef server, you can use knife ssh
[2013-08-09 17:56:01 -0400] MoonMan_: Puked a lot of errors at me but they're probably easy to fix.
[2013-08-09 17:56:42 -0400] cpuguy83: MoonMan_: You may need to do "ssh FQDN 'sudo chef-client'"
[2013-08-09 17:57:08 -0400] MoonMan_: Okay I'll try that. It's telling me that it can't load the file ohai. I don't recall creating anything by that name.
[2013-08-09 17:57:19 -0400] MoonMan_: That happens when it's run locally. I'll try remotely.
[2013-08-09 17:57:23 -0400] cpuguy83: MoonMan_: ohai is used by Chef to get machine details
[2013-08-09 17:57:37 -0400] MoonMan_: And if it can't find ohai what does that mean?
[2013-08-09 17:57:59 -0400] gpatmore: ssh FQDN "sudo chef-client -W -l debug" # gets more info on errors (if you need), without changing anything
[2013-08-09 17:58:14 -0400] MoonMan_: Oh that's great. I'll try remotely with the flags and see.
[2013-08-09 17:58:17 -0400] jbz: MoonMan_: Chef won't work without ohai.
[2013-08-09 17:58:27 -0400] jbz: How did you install chef on the server you're trying to run it on?
[2013-08-09 17:58:52 -0400] MoonMan_: Yes, I did, and it's showing up in the opscode panel as a node.
[2013-08-09 17:59:02 -0400] MoonMan_: Unless my install is corrupted or something went wrong.
[2013-08-09 17:59:10 -0400] jbz: Huh.  Are you running chef-client as root?
[2013-08-09 17:59:13 -0400] jbz: with root's path?
[2013-08-09 17:59:27 -0400] MoonMan_: Not with root's path. I'll do that.
[2013-08-09 17:59:32 -0400] jbz: Ah, yes, su -
[2013-08-09 17:59:36 -0400] jbz: :-)
[2013-08-09 17:59:49 -0400] MoonMan_: Still threw the same error.
[2013-08-09 17:59:58 -0400] jbz: Can you pastebin the error?
[2013-08-09 18:00:06 -0400] MoonMan_: Sure thing.
[2013-08-09 18:01:29 -0400] gpatmore: for chef on reboot in root crontab u can add an entry: @reboot /usr/bin/chef-client
[2013-08-09 18:01:40 -0400] MoonMan_: jbz, this is the error it throws when run locally. http://pastebin.com/giZktWj9
[2013-08-09 18:02:25 -0400] jbz: MoonMan_: does it do that if you first "sudo su -"?
[2013-08-09 18:02:30 -0400] MoonMan_: Yes.
[2013-08-09 18:02:32 -0400] jbz: hm
[2013-08-09 18:02:53 -0400] MoonMan_: I can always restore the machine from an image after lunch and do a reinstall of chef node
[2013-08-09 18:03:02 -0400] jbz: oh wait
[2013-08-09 18:03:04 -0400] jbz: what is 'sandbox'?
[2013-08-09 18:03:13 -0400] MoonMan_: sandbox is the recipe I am trying to run.
[2013-08-09 18:03:21 -0400] MoonMan_: Oh crap.
[2013-08-09 18:03:23 -0400] jbz: heh no that's not how it works :-)
[2013-08-09 18:03:30 -0400] MoonMan_: I see now. I feel like an idiot.
[2013-08-09 18:03:36 -0400] MoonMan_: That should be HotBox, the FQDN.
[2013-08-09 18:03:41 -0400] jbz: No
[2013-08-09 18:03:44 -0400] MoonMan_: Oh?
[2013-08-09 18:03:50 -0400] jbz: you have to run chef-client *from the box that is to be managed*
[2013-08-09 18:03:59 -0400] jbz: and just run 'chef-client'
[2013-08-09 18:04:11 -0400] jbz: that should look at its config, find the appropriate chef server, get its runlist, and so forth.
[2013-08-09 18:04:14 -0400] jbz: So first
[2013-08-09 18:04:21 -0400] MoonMan_: Oh, I see. I was running it from the node but had the wrong command.
[2013-08-09 18:04:23 -0400] jbz: you have to make sure that the cookbook you're trying to run is uploaded to your chef server.
[2013-08-09 18:04:34 -0400] jbz: Then you make sure the node has that cookbook in its runlist
[2013-08-09 18:04:43 -0400] jbz: *then* you run chef-client on the node (somehow)
[2013-08-09 18:04:43 -0400] MoonMan_: Yes, it does.
[2013-08-09 18:04:47 -0400] jbz: ok
[2013-08-09 18:05:37 -0400] MoonMan_: Okay, so it's in the run list, I'm rooted into the Raspberry Pi, and I ran "chef-client sandbox" from the node. Still giving me the require: cannot load such file -- ohai error.
[2013-08-09 18:05:45 -0400] jbz: nonono
[2013-08-09 18:05:56 -0400] MoonMan_: Sorry. What's wrong now?
[2013-08-09 18:06:00 -0400] jbz: sorry, my error
[2013-08-09 18:06:03 -0400] jbz: just run 'chef-client.'
[2013-08-09 18:06:05 -0400] jbz: No arguments.
[2013-08-09 18:06:12 -0400] jbz: that means 'converge on this machine.'
[2013-08-09 18:06:47 -0400] MoonMan_: Weird. Same error. I must be still doing something wrong.
[2013-08-09 18:06:51 -0400] subway: Howdy... I'm a recent convert to Chef, coming from extensive experience with Puppet. I'm wondering if anyone could point me in the right direction for how to implement something similar to Puppet's Exported Resources.
[2013-08-09 18:07:08 -0400] jbz: MoonMan_: How did you install chef on this node?  Did you knife bootstrap it?
[2013-08-09 18:07:15 -0400] MoonMan_: Yep, bootstrapped.
[2013-08-09 18:07:22 -0400] jbz: so the raspberry pi was bootstrapped.
[2013-08-09 18:07:23 -0400] jbz: hm.
[2013-08-09 18:07:24 -0400] MoonMan_: Yes.
[2013-08-09 18:07:36 -0400] MoonMan_: Clean install of Debian.
[2013-08-09 18:07:36 -0400] jbz: Yeah, and that must have worked if it registered itself with the server
[2013-08-09 18:07:41 -0400] jbz: oh wait
[2013-08-09 18:07:42 -0400] jbz: hm
[2013-08-09 18:07:46 -0400] MoonMan_: Yeah that's what I was thinking.
[2013-08-09 18:07:54 -0400] jbz: did the bootstrap run as root?  Or as another user?
[2013-08-09 18:08:03 -0400] gpatmore: what version of chef are you using? I see this link: http://tickets.opscode.com/browse/CHEF-3778
[2013-08-09 18:08:16 -0400] MoonMan_: That is a very good question. I did it yesterday but I don't think I would have known to run it as root.
[2013-08-09 18:08:25 -0400] MoonMan_: So that might be my issue.
[2013-08-09 18:08:31 -0400] jbz: ooh, gpatmore is smarter than I fo sho
[2013-08-09 18:08:44 -0400] gpatmore: lmao. nah, google gets the cred
[2013-08-09 18:09:20 -0400] jbz: MoonMan_: Does that bug describe your setup?
[2013-08-09 18:09:35 -0400] MoonMan_: gpatmore: Nice catch. That bug does describe my setup. How do I figure out what version I'm running?
[2013-08-09 18:10:01 -0400] MoonMan_: I believe it's the latest one as I bootstrapped yesterday, but you never know.
[2013-08-09 18:11:06 -0400] gpatmore: knife --version
[2013-08-09 18:11:20 -0400] gpatmore: on workstation
[2013-08-09 18:11:36 -0400] MoonMan_: 11.60
[2013-08-09 18:11:44 -0400] MoonMan_: 11.6.0
[2013-08-09 18:12:20 -0400] MoonMan_: Later than the bug report..
[2013-08-09 18:19:11 -0400] MoonMan_: I'm going to try a fresh image and re-bootstrapping the machine under root. That should help.
[2013-08-09 18:24:38 -0400] dgarstang: So... accessing encrypted data bags.... apparently the secret can be passed to the chef-client on the cli?
[2013-08-09 18:31:43 -0400] gabrtv: is there a canonical cookbook/recipe for setting hostnames to node names on EC2?
[2013-08-09 18:32:35 -0400] alexbst: changing hostnames is a dirty, dirty game :)
[2013-08-09 18:33:54 -0400] gabrtv: alexbst: i'm doing it for syslog purposes, if that help ;)
[2013-08-09 18:35:49 -0400] dgarstang: So... accessing encrypted data bags.... apparently the secret can be passed to the chef-client on the cli?
[2013-08-09 18:39:03 -0400] jchauncey: how do you specify a different provisioner in test-kitchen?
[2013-08-09 18:40:06 -0400] erikh: hello friends -- how do I get Chef::Log to yield console output in the new chef 11 era?
[2013-08-09 18:41:17 -0400] jbz: jchauncey: Specifying the driver_plugin and driver_config in the kitchen.yml?
[2013-08-09 18:41:22 -0400] erikh: context: https://gist.github.com/erikh/0a9ad42a804f2b071fa0
[2013-08-09 18:41:50 -0400] spox: erikh: as in output from chef-client?
[2013-08-09 18:41:55 -0400] erikh: spox: yar
[2013-08-09 18:42:29 -0400] spox: --force-logger
[2013-08-09 18:42:55 -0400] erikh: er, that's not really what I was after. is there any way I can amend the output without changing how I run chef?
[2013-08-09 18:47:58 -0400] dgarstang: So... accessing encrypted data bags.... apparently the secret can be passed to the chef-client on the cli?
[2013-08-09 18:48:24 -0400] troyready: dgarstang, Yeah, and IIRC with chef 11.6.0 that's how you're supposed to do it
[2013-08-09 18:48:46 -0400] troyready: I have my specified in knife.rb and bootstrapping causes a big warning to pop up
[2013-08-09 18:49:02 -0400] troyready: Err, that is, I have it specified in the old way
[2013-08-09 18:49:28 -0400] dgarstang: troyready: Hm, ok cuz I don't see anything about a secret in the chef-cli help output
[2013-08-09 18:50:07 -0400] mattupstate: dgarstang: set the encrypted_data_bag_secet option in your knife config and it will add it to the server when bootstrapping
[2013-08-09 18:50:16 -0400] troyready: Hmm, yeah, same here -- wonder what the syntax is...
[2013-08-09 18:50:22 -0400] dgarstang: troyready: Jeez
[2013-08-09 18:50:26 -0400] mattupstate: it should point to a file
[2013-08-09 18:50:39 -0400] dgarstang: mattupstate: would rather have it on the command line
[2013-08-09 18:50:57 -0400] mattupstate: and in your recipes you load it with Chef::EncryptedDataBagItem.load_secret('/etc/chef/encrypted_data_bag_secret')
[2013-08-09 18:51:18 -0400] mattupstate: chef-client isn't concerned with it
[2013-08-09 18:51:22 -0400] dgarstang: mattupstate: troyready, and someone else I am talking to, seem to think it can be passed via the cli
[2013-08-09 18:52:21 -0400] dgarstang: It seems rather suboptimal to me if it MUST be in a file. Opscode: yeah we encrypted data bags! Yeah! Woo! Which really means we just moved it somewhere else.
[2013-08-09 18:52:44 -0400] mattupstate: it doesn't have to be a file
[2013-08-09 18:52:54 -0400] troyready: If this original pull request was right, --secret && --secret-file should do it (https://github.com/opscode/chef/pull/682)
[2013-08-09 18:52:54 -0400] mattupstate: knife gives you the option to specify it when editing a data bag
[2013-08-09 18:52:55 -0400] dgarstang: mattupstate: now we're talkin'
[2013-08-09 18:53:15 -0400] dgarstang: mattupstate: i'm not talking about updating the data bag. I'm talking about the chef-client run
[2013-08-09 18:53:33 -0400] mattupstate: however, during the context of a chef-client run on a node, how do you expect to get the secret?
[2013-08-09 18:54:02 -0400] dgarstang: mattupstate: by passing it to the chef-client from the command line
[2013-08-09 18:54:18 -0400] troyready: Oooooooooh, dgarstang, I'm sorry, I think I misread your question
[2013-08-09 18:54:21 -0400] mattupstate: problem is, each data bag can be encrypted with different secrets
[2013-08-09 18:54:31 -0400] mattupstate: using one for an entire chef-client run would not suffice
[2013-08-09 18:54:42 -0400] troyready: I was talking about specifying it during bootstrap
[2013-08-09 18:54:52 -0400] mattupstate: so how do you expect it to persist on the node?
[2013-08-09 18:55:18 -0400] dgarstang: mattupstate: Well the problem then becomes getting the secret to the node, in an automated, secure way
[2013-08-09 18:55:46 -0400] mattupstate: knife will copy it to the node when bootstrapping
[2013-08-09 18:55:50 -0400] mattupstate: if you use a file
[2013-08-09 18:55:56 -0400] dgarstang: checking
[2013-08-09 18:58:02 -0400] dgarstang: mattupstate: by passing it as an option to knife? if true, that has the same issue as passing to chef-client cli
[2013-08-09 18:58:49 -0400] dgarstang: :q!
[2013-08-09 18:58:49 -0400] mattupstate: run chef-client with some env vars or something then
[2013-08-09 18:59:13 -0400] mattupstate: i happen to encrypt all my data bags with the same secret
[2013-08-09 18:59:31 -0400] mattupstate: so the file works well for me
[2013-08-09 18:59:44 -0400] dgarstang: Looking at help output for 'knife ec2 server create'.... not seeing it
[2013-08-09 19:00:27 -0400] sn0wb1rd: dgarstang: Did you mean /part or /quit instead of :q!?
[2013-08-09 19:00:47 -0400] dgarstang: sn0wb1rd: I'm sure that happens all the time
[2013-08-09 19:01:07 -0400] joelnn: I don't really understand encrypted databags. chef clients are already authenticated against chef server, and they run as root. what is added by data bag encryption?
[2013-08-09 19:01:16 -0400] joelnn: how about data bag ACLs
[2013-08-09 19:02:59 -0400] joelnn: encryption seems like a very roundabout ACL
[2013-08-09 19:03:43 -0400] yfeldblum: joelnn, you get to claim you're encrypting things
[2013-08-09 19:03:59 -0400] stormerider: joelnn: encrypted databags mean that they're not stored in plaintext on the server
[2013-08-09 19:04:14 -0400] programmerq: so, we're trying to figure out the best way to TDD our recipes. We have a recipe that uses search. What's the best approach? Do I just detect if I'm using chef-solo and use some kind of sane default?
[2013-08-09 19:04:19 -0400] programmerq: what do other people do in practice?
[2013-08-09 19:04:20 -0400] stormerider: the main use case for developing it was hosted chef from what they've said
[2013-08-09 19:04:25 -0400] yfeldblum: stormerider, that is true also of compression :D
[2013-08-09 19:04:34 -0400] dgarstang: well gee, I dunno, I dunno how to send out the secret to chef
[2013-08-09 19:04:43 -0400] mattupstate: dgarstang: i'm trying to find some docs on it, but i'm failing to find it too, having a hard time remembering how i set this up!
[2013-08-09 19:04:58 -0400] dgarstang: mattupstate: chef docs bite again
[2013-08-09 19:04:59 -0400] cpuguy83: programmerq: you right a test to see if the server has what you want it to do, if not then write the code to make it do it.
[2013-08-09 19:05:14 -0400] joelnn: stormerider: I see... yeah for hosted chef, OK. but if you think that makes it safe to slave your chef client running as root to a hosted chef server -- good luck :)
[2013-08-09 19:06:00 -0400] joelnn: I see the wiki says its so you can commit your encrypted secrets to source control
[2013-08-09 19:06:04 -0400] stormerider: joelnn: touche (ftr, i use OSC personally)
[2013-08-09 19:06:33 -0400] cpuguy83: joelnn: You have to store your secrets somehow.  And storing them in plain text on a server that other people have access to is not good.
[2013-08-09 19:06:54 -0400] programmerq: cpuguy83: I'm not sure I follow. basically, are you saying I should try the search and fall back to a sane default?
[2013-08-09 19:07:04 -0400] programmerq: is there a way to mock out a search result during the test run?
[2013-08-09 19:07:25 -0400] programmerq: I'm using chef-minitest-handler now, but I can switch to something else if I can do things like mock results
[2013-08-09 19:07:31 -0400] joelnn: cpuguy83: I agree, but you are also running a system where that shared server tells all your servers what to do. what is the bigger vulnerability here
[2013-08-09 19:07:53 -0400] static: Hey can anybody give me hand with some install issues I'm having with 11 ?
[2013-08-09 19:08:08 -0400] cpuguy83: programmerq: TDD means write a failing test, then write the code to make the test pass.  So if you want your server to have a apache on it, then write a test to ensure the server has apache on it, then write the code that installs apache
[2013-08-09 19:08:50 -0400] joelnn: now if you say that all your cookbooks and attributes will be digitally signed by you before going into hosted chef, ok. you are a little closer to not being trivially owned
[2013-08-09 19:08:53 -0400] cpuguy83: programmerq: And honestly, I would go a step further in Chef's case with acceptance testing and actually test the individual bits, like is Apache operating the way you would like it to (listen on the right ports, right mods loaded, etc)
[2013-08-09 19:09:11 -0400] programmerq: cpuguy83: yes, I understand all of that
[2013-08-09 19:09:31 -0400] programmerq: but I would still like to write effective tests for cases where my recipe uses search in the real world
[2013-08-09 19:10:34 -0400] cpuguy83: programmerq: This is acceptance testing.  So you would do a test that actual fires up the recipe on a box and then test the box
[2013-08-09 19:11:24 -0400] programmerq: cpuguy83: what we're trying to do isn't acceptance testing. I'm more interested in testing all paths through my code, rather than testing only one path
[2013-08-09 19:11:52 -0400] programmerq: but that's also not really in scope of my original question as to whether it is possible to mock out a search result
[2013-08-09 19:11:57 -0400] mattupstate: dgarstang: https://github.com/opscode/chef/pull/682
[2013-08-09 19:12:11 -0400] cpuguy83: joelnn: The shared server is only telling your servers what to do in that it can store information that the server reacts to, but the server itself is the one that does the operation.
[2013-08-09 19:13:19 -0400] cpuguy83: programmerq: You can mock out anything with a test double, or just stubbing the methods on the actual object, etc.
[2013-08-09 19:14:18 -0400] joelnn: cpuguy83: does the server not also store the cookbooks, i.e. the software that will be run as root? maybe I'm wrong...
[2013-08-09 19:14:26 -0400] programmerq: cpuguy83: how would I "pass in" my test double on the chef run when using chef-minitest-handler or testkitchin or similar?
[2013-08-09 19:15:14 -0400] alanmeadows1: quick question, are there any examples of doing *conditional* notifies service statements?
[2013-08-09 19:16:01 -0400] joelnn: alanmeadows1: if your condition applies at "compile time", you should be able to do it with a usual 'if' or 'unless' etc
[2013-08-09 19:16:04 -0400] cpuguy83: programmerq: I would need an example of how/what you are calling
[2013-08-09 19:16:45 -0400] MrBIOS: hi folks
[2013-08-09 19:16:54 -0400] Dynom: <binamov> Dynom have you considered writing wrapper cookbooks around the community ones, to make them work for you? this way when the community cookbook gets updated, your hacks will still work...   <-- No, mostly because I don't know how that would work
[2013-08-09 19:16:56 -0400] MrBIOS: are actions taken in the Chef WebUI logged?
[2013-08-09 19:17:57 -0400] alanmeadows1: joelnn: I thought I could too -- this doesn't seem to be valid: https://gist.github.com/alanmeadows/361e3b725e54e7eed781
[2013-08-09 19:18:35 -0400] joelnn: alanmeadows1: hm, what happens with that?
[2013-08-09 19:19:44 -0400] volker-: does chef has a function like fqdn_rand in puppet (http://docs.puppetlabs.com/references/latest/function.html#fqdnrand) that creates random numbers based on the nodes fqdn
[2013-08-09 19:19:57 -0400] cpuguy83: joelnn: So don't use hosted chef :)
[2013-08-09 19:19:59 -0400] joelnn: alanmeadows1: I would try simplifying it to something like "if false then" to rule out a bug in your condition expression there. also assign the condition to a variable and "puts" it
[2013-08-09 19:20:53 -0400] cpuguy83: volker-: How is it basing it on the FQDN?  Random is random, no?
[2013-08-09 19:20:59 -0400] yfeldblum: volker-, you can just call a ruby method
[2013-08-09 19:21:15 -0400] yfeldblum: volker-, any method that ships with ruby
[2013-08-09 19:21:21 -0400] joelnn: cpuguy83: yeah if you're the kind of fellow who likes encrypted databags, then I think you are also the person who doesn't put passwords (encrypted or not) in source control, or use hosted chef. but maybe I'm off base
[2013-08-09 19:21:41 -0400] volker-: yfeldblum: true, but haven't found there one based on the fqdn, too.
[2013-08-09 19:21:56 -0400] yfeldblum: volker-, why would you want one based on the fqdn?
[2013-08-09 19:22:00 -0400] volker-: cpuguy83: i'm sure there is some helpful logic behind it
[2013-08-09 19:22:16 -0400] volker-: yfeldblum: load of tasks. e.g. kicked off by cron
[2013-08-09 19:22:26 -0400] joelnn: alanmeadows1: issue might be that the run list is not available/complete at "compile time". not sure unfortunately
[2013-08-09 19:22:27 -0400] dgarstang: Docs at http://docs.opscode.com/essentials_data_bags.html say --secret can be passed to knife...
[2013-08-09 19:22:49 -0400] cpuguy83: volker-: SecureRandom.uuid?
[2013-08-09 19:22:53 -0400] alanmeadows1: joelnn: not a problem, but basically the if condition there should be fine?
[2013-08-09 19:22:59 -0400] dgarstang: oh that's just to update the data bag
[2013-08-09 19:23:23 -0400] alanmeadows1: joelnn: I was so convinced it wouldn't work I don't think I even remember the stacktrace. I'll go back and retest.
[2013-08-09 19:23:26 -0400] joelnn: alanmeadows1: yeah I've wrapped 'notifies' and 'subscribes' in loops and stuff before, should work fine. the compile time vs converge time is what will bite you
[2013-08-09 19:24:10 -0400] cpuguy83: joelnn: True, I wouldn't use hosted chef, though I do check in shadow hashes into source control and don't have a problem with it.
[2013-08-09 19:24:12 -0400] joelnn: alanmeadows1: if compile time ends up being the issue, you might do it with a ruby_block resource
[2013-08-09 19:24:23 -0400] alanmeadows1: joelnn: thanks! :)
[2013-08-09 19:24:44 -0400] cpuguy83: joelnn: Well... sort of... SCM has limited access, passwords are for sudo access only, and I don't allow password auth to my servers
[2013-08-09 19:25:02 -0400] joelnn: cpuguy83: shadow hashes are not really reversible, so I think its not quite the same
[2013-08-09 19:25:19 -0400] cpuguy83: joelnn: Anything is reversable with the right amount of computing power
[2013-08-09 19:26:09 -0400] cpuguy83: enigma was uncrackable, until it was.
[2013-08-09 19:26:12 -0400] joelnn: if you have the power of chef-server, i.e. a big bag of persistent data, I don't know why you'd have static passwords anyway?
[2013-08-09 19:27:43 -0400] quickdry21: binamov: so it turns out it was an EC2 issue: resolved using the fix from Error 3 here: http://sanketdangi.com/post/50897416859/chef-errors-and-their-solutions
[2013-08-09 19:27:48 -0400] quickdry21: binamov: thanks again for your help
[2013-08-09 19:28:41 -0400] joelnn: cpuguy83: I think you're making more arguments why encryption is futile :)
[2013-08-09 19:30:47 -0400] yfeldblum: joelnn, not really
[2013-08-09 19:31:08 -0400] binamov: quickdry21 glad it worked out! i'm looking at error 3 and i remember your issue was with uploading, not downloading
[2013-08-09 19:38:11 -0400] cpuguy83: joelnn: Not exactly.  Sometimes you need to have things that need to remain secure, like SSL private keys, SSH private keys (though that's easier to get around).
[2013-08-09 19:38:38 -0400] quickdry21: binamov: yeah, it was with uploading, but this fixed it regardless
[2013-08-09 19:38:56 -0400] cpuguy83: joelnn: And it's crazy to not encrypt something that needs to remain when you can... even if it has a hole.
[2013-08-09 19:40:09 -0400] joelnn: I somewhat agree, but I also think it's best to stay realistic about how much security you can achieve. encrypted data bags just seems like fooling yourself.
[2013-08-09 19:41:46 -0400] cpuguy83: joelnn: Nobody ever got fired because they encrypted something (at least not in the conext of a sysadmin :) )
[2013-08-09 19:41:47 -0400] jbz: joelnn: Encrypted data bags are very useful when convincing customers and/or regulators that you can use Opscode Hosted Chef because your critical data is encrypted at rest.
[2013-08-09 19:41:48 -0400] joelnn: you have someone with access to your repo who shouldn't be able to read the passwords -- yet you let them write your automation code. makes sense :)
[2013-08-09 19:42:15 -0400] jbz: In that use case, the actual secret never goes to Opscode.
[2013-08-09 19:42:18 -0400] jbz: So, okay, improvement.
[2013-08-09 19:43:31 -0400] joelnn: jbz: I still say that is a joke, if hosted chef is owned then they don't need your passwords on the chef server, they just get it from the client
[2013-08-09 19:43:47 -0400] joelnn: jbz: but yeah if you are trying to fool a client into thinking it's secure -- ok :)
[2013-08-09 19:44:10 -0400] jbz: joelnn:  You are approaching this as a purely technical process.  Security in some cases isn't purely technical. :-)
[2013-08-09 19:44:39 -0400] jbz: No, I wouldn't say it is 'secure.'  I would say that it would be difficult for someone at Opscode to gain access to the information I am encrypting without doing things that are easily detected.
[2013-08-09 19:45:28 -0400] jbz: More importantly, though, I would say that the users in my org who have read-only access to my source control repo - such as might be gotten by pwning a machine and getting me deployer key - also will not be able to nab those values without a bunch of work.
[2013-08-09 19:45:54 -0400] jbz: If they get *root* on the box?  Sure, then I'm pwnt.
[2013-08-09 19:46:14 -0400] jbz: But it's still way better than having to tell my infosec crew or the customer's infosec crew that I have secret tokens checked into git.
[2013-08-09 19:47:00 -0400] joelnn: technically speaking, it would be so easy for anyone operating Hosted Chef to get root on your servers. don't know how you are detecting that
[2013-08-09 19:47:01 -0400] yfeldblum: cpuguy83, doing X because (1) there is a specific purpose and it demonstrably achieves useful results or (2) because it's a buzzword and you won't get fired for doing it ...
[2013-08-09 19:47:16 -0400] jbz: joelnn: Yes of course it would
[2013-08-09 19:47:23 -0400] joelnn: the only thing that protects you is the security processes they have in place
[2013-08-09 19:47:34 -0400] joelnn: which are not in your control at all
[2013-08-09 19:47:37 -0400] jbz: joelnn:  Look, if you approach things that way, then no security improvement will ever make sense.
[2013-08-09 19:47:42 -0400] jbz: There is ALWAYS a way in.
[2013-08-09 19:47:48 -0400] jbz: But I'm not sure what your objection is.
[2013-08-09 19:47:54 -0400] jbz: This is *better*, relatively speaking.
[2013-08-09 19:47:59 -0400] jbz: I trust Opscode, pretty much.
[2013-08-09 19:48:03 -0400] joelnn: I just think it's an illusion
[2013-08-09 19:48:09 -0400] jbz: I do *not* trust everyone who might get read-only to my git repo.
[2013-08-09 19:48:26 -0400] joelnn: you are encrypting your critical data to protect it from party X, and then party X tells your servers what to do
[2013-08-09 19:48:27 -0400] jbz: Because I don't have control of the latter.  Some dev might say "I don't see why anyone having read-only is a problem" and give it to someone.
[2013-08-09 19:48:34 -0400] jbz: I'm not protecting it from Opscode.
[2013-08-09 19:48:45 -0400] jbz: I'm protecting it from someone who might have a shallow path into Opscode
[2013-08-09 19:49:06 -0400] jbz: i.e. someone gets my Opscode mgmt login and can see the UI.
[2013-08-09 19:49:07 -0400] jbz: OK.
[2013-08-09 19:49:16 -0400] jbz: If I'm using encrypted data bags, that won't get them my info.
[2013-08-09 19:49:31 -0400] jbz: If they did a bunch of work, sure, it might get them root *if* that account has write.
[2013-08-09 19:49:31 -0400] cubed: had a quick question about testing. so i brought up a node via vagrant, but i am trying to actively set an attribute after i've "vagrant ssh'ed" into that node. how would i go about doing that?
[2013-08-09 19:49:32 -0400] joelnn: they're not able to upload cookbooks?
[2013-08-09 19:49:57 -0400] jbz: But there is a much greater chance that I will detect them *making a change* to my node than that I would someone know they'd read my data.
[2013-08-09 19:50:19 -0400] jbz: I don't get the whole 'this is just an illusion' argument.
[2013-08-09 19:50:27 -0400] jbz: There are defined cases where this feature is useful for security.
[2013-08-09 19:50:30 -0400] jbz: It is not globally so.
[2013-08-09 19:50:31 -0400] jbz: Okay then.
[2013-08-09 19:50:40 -0400] jbz: As an Op, it's my job to know what those cases are and when they're useful.
[2013-08-09 19:50:44 -0400] jbz: Why would I not want the feature to exist?
[2013-08-09 19:51:00 -0400] jbz: I don't expect joe average user to be presented with the option to use it, and thus misinterpret its effects.
[2013-08-09 19:53:25 -0400] joelnn: I thought the case was someone getting access to your chef user/pass?
[2013-08-09 19:53:38 -0400] jbz: That's one possible case, yes.
[2013-08-09 19:53:41 -0400] jbz: This is a tool.
[2013-08-09 19:53:47 -0400] jbz: I will use it to solve those problems where it is helpful.
[2013-08-09 19:54:02 -0400] joelnn: do they not just then upload a cookbook that does whatever they want?
[2013-08-09 19:54:11 -0400] jbz: Well.
[2013-08-09 19:54:16 -0400] jbz: First of all, I have read-only chef UI users.
[2013-08-09 19:54:41 -0400] jbz: Those are read-only because they are for use by people a) who I don't trust to make changes and b) who I don't trust to keep their credentials as safe.
[2013-08-09 19:54:42 -0400] jbz: So.
[2013-08-09 19:54:58 -0400] joelnn: I see
[2013-08-09 19:55:01 -0400] jbz: Also
[2013-08-09 19:55:18 -0400] jbz: I would like to store chef state in git
[2013-08-09 19:55:27 -0400] jbz: but there are people who have read access to the repo who I don't trust either
[2013-08-09 19:55:32 -0400] jbz: (at that level)
[2013-08-09 19:55:33 -0400] jbz: so now
[2013-08-09 19:55:46 -0400] jbz: I can indeed keep tokens in git for quick recovery/new server spinup
[2013-08-09 19:55:57 -0400] jbz: but don't have to worry that anyone who has my deployer readonly git key can read all my tokens.
[2013-08-09 19:56:34 -0400] jbz: So yeah.  Will it make you Safe()?  No, you're quite right, no way.
[2013-08-09 19:56:45 -0400] jbz: But it will let me do things I wouldn't otherwise be willing to risk.
[2013-08-09 19:56:46 -0400] jbz: :-)
[2013-08-09 19:56:53 -0400] jbz: <- distrustful, suspicious bastard
[2013-08-09 19:57:03 -0400] joelnn: I see. I guess that instead of that, I would prefer to make it so that if you have my production database passwords, it doesn't matter, because you simply can't connect to them
[2013-08-09 19:57:13 -0400] joelnn: i.e. my VPN key or my SSH key or whatever is my secret
[2013-08-09 19:57:16 -0400] jbz: Oh, that is also true.
[2013-08-09 19:57:19 -0400] jbz: Why rely on one layer?
[2013-08-09 19:57:24 -0400] joelnn: rather than my databag key
[2013-08-09 19:57:28 -0400] jbz: Why trust that someone who set those passwords doesn't also use them elsewhere?
[2013-08-09 19:58:17 -0400] MoonMan_: How can I determine if a node is bootstrapped, from the node?
[2013-08-09 19:58:19 -0400] yfeldblum: jbz, that's why i like to set them with `openssl rand`
[2013-08-09 19:58:19 -0400] jbz: Basically, why not layer as many mild security measures as feasible, in the hope that the overlap is better than a siongle hard layer?
[2013-08-09 19:58:26 -0400] jbz: yfeldblum: Indeed.
[2013-08-09 19:58:37 -0400] jbz: s/siongle/single/derps
[2013-08-09 19:58:53 -0400] joelnn: because I think there are only so many hours in the day, and you're spending time on relatively weak measures or coverups
[2013-08-09 19:58:57 -0400] jbz: MoonMan_:  If there is a client key in /etc/chef it has been registered with the chef server.
[2013-08-09 19:59:43 -0400] MoonMan_: Hrm, that dir isn't even there. Guess it isn't bootstrapped. It's not throwing up an error, it's just not saying anything during the bootstrapping process.
[2013-08-09 19:59:44 -0400] jbz: joelnn:  No, I'm not spending much time at all.  I have a dashboard which distributes the key to new nodes as part of the bootstrap and manages uploading my data to chef, and the key never reaches Opscode. I don't have to think about it much.
[2013-08-09 20:00:15 -0400] jbz: joelnn:  I just think you're being very quick to dismiss a tool.  It's not a *solution*, it's a *tool*.
[2013-08-09 20:00:33 -0400] jbz: Also, I bitched at Opscode to put that tool in, so I feel a bit protective of it. :-)
[2013-08-09 20:00:45 -0400] joelnn: oh in that case :)
[2013-08-09 20:00:53 -0400] jbz: It let me do things I couldn't otherwise do.
[2013-08-09 20:01:31 -0400] MoonMan_: jbz: What might be happening when a node is being bootstrapped from a client, under root, and it doesn't display anything other than "Bootstrapping Chef on <IP>"?
[2013-08-09 20:01:55 -0400] joelnn: I once heard a pitch about how we could encrypt all the network traffic and filesystems we had on EC2, allowing us to safely process medical records/data on EC2
[2013-08-09 20:01:58 -0400] MoonMan_: Not a client, I meant a workstation. A lot of new terminology :)
[2013-08-09 20:02:31 -0400] joelnn: and nobody said, hey aren't we running in a VM that can have its memory dumped by EC2 admins at any time
[2013-08-09 20:02:44 -0400] jbz: MoonMan_: If you're not sure if bootstrap will work for your case, try ssh-ing to a fresh install node and using the omnibus chef installer manually
[2013-08-09 20:02:45 -0400] joelnn: well, except me. I said it :)
[2013-08-09 20:02:56 -0400] MoonMan_: jbz: Okay, I'll try that.
[2013-08-09 20:03:09 -0400] jbz: joelnn: Heh yeah, we've all been there.
[2013-08-09 20:03:24 -0400] joelnn: I just don't like seeing people say, oh yeah it's secure, things are encrypted
[2013-08-09 20:03:27 -0400] yfeldblum: joelnn, did the pitchers say that the encryption would protect you *from Amazon*?
[2013-08-09 20:03:42 -0400] jbz: And if management came in and said to me "YOU CAN NOW FULLY TRUST OPSCODE BECAUSE OF ENCRYPTED DATA BAGS" I would laugh them out of the office in best joelln style
[2013-08-09 20:03:42 -0400] joelnn: if you know what the limitations are, ok go for it with your eyes open
[2013-08-09 20:04:02 -0400] btm: @opscode cookbook code review, join: https://plus.google.com/hangouts/_/f8b6745d48a4b1b24b086b8801b4f098e90579e1, watch: http://youtu.be/U_QgXcu2FPY
[2013-08-09 20:04:15 -0400] jbz: but when designing solutions with my colleagues who are clueful, I will say "Well, for this particular case, using encrypted data bags might let us do this in a quicker/easier way without increasing risk too much."
[2013-08-09 20:04:21 -0400] joelnn: yfeldblum: yes the idea was that EC2 is a "untrusted cloud" but this would make it "trusted"
[2013-08-09 20:04:48 -0400] joelnn: as opposed to Siemens or some other "private cloud" provider
[2013-08-09 20:05:35 -0400] yfeldblum: joelnn, that depends on the particular meaning of "trusted" and "untrusted"; was it intended at the time to refer to Amazon in particular as "untrusted"?
[2013-08-09 20:05:42 -0400] joelnn: jbz: yeah you can't trust them because of encrypted data bags. you can only trust them implicitly, which is what you are doing :)
[2013-08-09 20:06:07 -0400] jbz: again, I'm not trusting *Opscode* because of encrypted data bags.
[2013-08-09 20:06:14 -0400] jbz: I'm not trusting anyone, in fact.
[2013-08-09 20:06:35 -0400] jbz: I am making the risk assessment that having the tokens in git is now below my risk threshold because they are encrypted there and the key is not in that system.
[2013-08-09 20:06:37 -0400] jbz: For example.
[2013-08-09 20:07:09 -0400] joelnn: yfeldblum: yeah Amazon is a "public cloud" which is risky because other users are in the environment, and Amazon themselves are not authorized to get your private medical records
[2013-08-09 20:07:35 -0400] joelnn: that was the claim, I mean
[2013-08-09 20:07:58 -0400] joelnn: I am fine with implicit trust. actually I have a passwords file somewhere sitting unencrypted
[2013-08-09 20:08:08 -0400] yfeldblum: joelnn, the datacenter crew where you colo can put a tap in between your hardware and your ethernet cords
[2013-08-09 20:09:05 -0400] MoonMan_: What does "Unable to retrieve a valid package" usually mean, upon running the client quick installer?
[2013-08-09 20:09:09 -0400] joelnn: yfeldblum: agreed! physical security is almost always the weakest link, I think
[2013-08-09 20:09:13 -0400] tabolario: anyone have issues with nodes on ec2 bootstrapped with knife bootstrap not picking up the ohai ec2 attributes?
[2013-08-09 20:09:40 -0400] jbz: MoonMan_:  Heh I don't actually know
[2013-08-09 20:09:49 -0400] joelnn: weakest in terms of allowing you to be completely owned, and you don't worry about it
[2013-08-09 20:09:51 -0400] MoonMan_: Weird. Running on a clean debian install.
[2013-08-09 20:11:57 -0400] yfeldblum: joelnn, the idea is, of course, that you colo with a dc you can trust for reasons other than you've technically removed all their capabilities; that is true of hosting with aws as well
[2013-08-09 20:12:47 -0400] joelnn: yfeldblum: not with my medical records you don't. or maybe they do, and I don't know about it
[2013-08-09 20:13:17 -0400] jbz: They do and you don't know about it. :-)
[2013-08-09 20:13:26 -0400] pontiki: MoonMan_: i've not encountered in chef runs, but i've encountered it during installs; generally it's been due to a flaky connection
[2013-08-09 20:14:00 -0400] jbz: MoonMan_: Is your target node at your location, or elsewhere?  Is it possible that it's having trouble reaching Opscode's servers?
[2013-08-09 20:14:34 -0400] MoonMan_: pontiki: I'm getting a solid ping to google @2ms, and a solid ping @6ms to the Raspberry pi, which I'm trying to install the client to.
[2013-08-09 20:14:43 -0400] MoonMan_: Doubt it's a connection problem.
[2013-08-09 20:15:40 -0400] MoonMan_: Target node is local. About a foot away from me :)
[2013-08-09 20:17:19 -0400] joelnn: yfeldblum: and btw I agree with you. which is why it is a joke to say, lets encrypt our filesystems and network traffic, then we are secure
[2013-08-09 20:17:23 -0400] MoonMan_: Reconnected via SSH, same issue. Logged in as root.
[2013-08-09 20:17:47 -0400] joelnn: when it's just a matter of "hey Joe lets get on that container and dump the medical records from memory"
[2013-08-09 20:19:38 -0400] joelnn: and have you ever noticed how poorly paid security personnel are :)
[2013-08-09 20:20:58 -0400] joelnn: anyway /thread, thanks for pointing out some reasonable uses of encrypted data bags
[2013-08-09 20:21:52 -0400] cpuguy83: wow... lol :)
[2013-08-09 20:21:54 -0400] cpuguy83: 2 hours later
[2013-08-09 20:23:18 -0400] jbz: joelnn: Thanks for the thread!
[2013-08-09 20:25:02 -0400] joelnn: I do think I put AWS on a lower physical security tier than most colos though. There is no boundary in an AWS data center where someone says "you can't go in that cage, that's JBZ's cage"
[2013-08-09 20:25:32 -0400] joelnn: or there is security footage of someone walking up to my rack
[2013-08-09 20:25:35 -0400] jbz: joelnn: Ha yeah
[2013-08-09 20:26:05 -0400] gazarsgo: i don't think you understand fully the security in AWS DCs
[2013-08-09 20:26:33 -0400] cpuguy83: AWS is the old hoopty anyway... digital ocean is the new hotness
[2013-08-09 20:26:54 -0400] cpuguy83: :)
[2013-08-09 20:26:58 -0400] gazarsgo: LMK when digital ocean has postgres as a service :)
[2013-08-09 20:27:07 -0400] gazarsgo: because that would be sweet.
[2013-08-09 20:27:14 -0400] cpuguy83: gazarsgo: apt-get install postgres :)
[2013-08-09 20:27:50 -0400] jbz: digital ocean?
[2013-08-09 20:28:01 -0400] cpuguy83: jbz: digitalocean.com
[2013-08-09 20:28:14 -0400] jbz: ex-RCN-we-blamed-our-outage-on-a-single-hacker-pwnage RCN?
[2013-08-09 20:29:17 -0400] gazarsgo: cpuguy83: how 2 add nodes to postgres cluster w/ apt ?
[2013-08-09 20:29:38 -0400] joelnn: gazarsgo: the real issue I think with EC2 is that they have created perhaps the worlds largest target. and when someone is sophisticated or bold enough to own it, which is inevitable, they're probably not going to brag about it on twitter. they're just going to do what they want for a while.
[2013-08-09 20:29:57 -0400] joelnn: at least in a colo you have a bit of anonymity and obscurity
[2013-08-09 20:30:25 -0400] gazarsgo: so you're going to back off your claims that rack security is worse in AWS DCs and then try to claim  what, that you're paranoid ?
[2013-08-09 20:30:38 -0400] cpuguy83: joelnn: depends on the colo.. some colo's just let anybody in there.  wild wild west... of course anyone can have an AWS account too.
[2013-08-09 20:31:20 -0400] joelnn: gazarsgo: what rack security is there in AWS, and how is it relevant, given that the network is entirely connected?
[2013-08-09 20:31:27 -0400] cpuguy83: gazarsgo: There's got to be a deb for that :)... or at least there actually could be.
[2013-08-09 20:31:56 -0400] joelnn: if I go into a colo, it's my option how the network is connected
[2013-08-09 20:32:07 -0400] joelnn: if at all
[2013-08-09 20:33:14 -0400] jchauncey: is it possible to create a bridge network for a test-kitchen run? that way I can hit the chef-zero server when test-kitchen is running
[2013-08-09 20:34:47 -0400] joelnn: rack security would be relevant for pulling drives or something, but storage is virtualized as well, so who cares? the data center operator owns you anyway
[2013-08-09 20:35:14 -0400] MoonMan_: jbz: Haha, fixed my issue. Turns out due to a mind durp I inputted my opscode credentials instead of my root credentials. But it's bootstrapping right now so that's a good sign :)
[2013-08-09 20:35:35 -0400] MoonMan_: I don't know what that has to do with versioning, but it fixed it.
[2013-08-09 20:35:57 -0400] MoonMan_: Maybe it wasn't able to log into the system, thus not able to determine whether a package is available?
[2013-08-09 20:37:46 -0400] rshade98: is there a way to find out the 10.x version of an opscode cookbook
[2013-08-09 20:38:43 -0400] jbz: MoonMan_ Woot
[2013-08-09 20:39:40 -0400] jbz: MoonMan_ I'm not sure what happened, unless the first thing it tried to do on the node was have it verify the package versions and the node refused it access :-)
[2013-08-09 20:40:09 -0400] MoonMan_: jbz: Yeah that's very possible. But I'm all bootstrapped now so I'd consider it a victory.
[2013-08-09 20:40:17 -0400] jbz: VICTOLY
[2013-08-09 20:40:30 -0400] MoonMan_: Haha
[2013-08-09 21:34:12 -0400] mrdnk: Hello, I'm new to chef, and whilst working through the tutorial, knife cookbook site install networking_basic is return ENOENT on README.textile; I can see in the repo the README file has changed to .md - perfectly reasonable - and their is a pull request in place.
[2013-08-09 21:34:46 -0400] mrdnk: What I would like some help with is how to install networking_basic with the applied patch from another github repo?
[2013-08-09 21:35:10 -0400] mrdnk: Pull Request to fix README issue: https://github.com/fred/fredz_cookbooks/pull/7
[2013-08-09 21:36:17 -0400] mrdnk: I have also installed the gem for using github with knife cookbooks, but seems to limit access to user/repo - and so accessing the networking sub cookbook - doesn't work.
[2013-08-09 21:36:25 -0400] mrdnk: Anyone available who can help?
[2013-08-09 21:45:47 -0400] mrdnk: Hello, I'm new to chef, and whilst working through the tutorial, knife cookbook site install networking_basic is return ENOENT on README.textile; I can see in the repo the README file has changed to .md - perfectly reasonable - and their is a pull request in place.
[2013-08-09 21:45:54 -0400] mrdnk: Anyone available who can help?
[2013-08-09 21:48:25 -0400] jbz: mrdnk: You could just manually download it via git?
[2013-08-09 21:49:42 -0400] mrdnk: Is it as simple as just placing the folder from github into the cookbooks folder? Literally just getting into chef, so wasn't sure if it did anything else under the hood
[2013-08-09 21:49:46 -0400] cpuguy83: if I want to get just the kernel version number from ohai (ie, `uname -r`), is there a node attr for that?
[2013-08-09 21:50:07 -0400] jbz: mrdnk:  Yep, it is. :-)  Git clone it there, to be safe.
[2013-08-09 21:50:44 -0400] mrdnk: oh excellent, thank you very much
[2013-08-09 21:52:02 -0400] jbz: cpuguy83: ['kernel']['release']?
[2013-08-09 21:52:17 -0400] jbz: Er, sorrt, node['kernel']['release'] lol
[2013-08-09 21:52:19 -0400] cpuguy83: jbz: found it right as you said it, thanks :)
[2013-08-09 21:52:21 -0400] jbz: :-)
[2013-08-09 22:07:12 -0400] dgarstang: So... it kinda looks like remote_directory doesn't copy out .* files...
[2013-08-09 22:09:27 -0400] dgarstang: Anyone know if that's true?
[2013-08-09 22:14:31 -0400] dgarstang: midly annoying.
[2013-08-09 22:16:20 -0400] dgarstang: http://lists.opscode.com/sympa/arc/chef/2009-11/msg00000.html 2009....  " I'll try to look at it as it seems simple enough. ". I guess someone got busy
[2013-08-09 22:19:43 -0400] force: well, just paid a small tax to learn that Upstart doesn't load new configuration when you use `restart`. http://upstart.ubuntu.com/cookbook/#restart
[2013-08-09 22:20:21 -0400] force: Can I issue multiple actions a la `action: [ :enable, :start ]` via notifies? like `notifies [ :stop, :start ], 'service[nginx]'` ?
[2013-08-09 22:21:05 -0400] force: I know that I can define that the service doesn't support :restart (and that that's the default--a restart actually results in a stop/start), but I wouldn't mind making it more explicit.
[2013-08-09 22:22:36 -0400] jbz: force: I dunno about combining in the same notify, but you could put in multiple ordered notify:immediately
[2013-08-09 22:30:40 -0400] Sauraus: @opscode what is the proper way of handling line endings when files/templates are transfered from windows to a linux system using chef?
[2013-08-09 22:33:18 -0400] force: jbz: that's probably good enough. Thanks!
[2013-08-09 22:44:45 -0400] Sauraus: Anyone else working on Windows with linux systems on VirtualBox having problems with templates&files being CRLF on linux?
[2013-08-09 22:47:52 -0400] doomviking: thats just a common problem working between those systems
[2013-08-09 22:53:40 -0400] doomviking: use a unix-friendly text editor
[2013-08-09 23:34:15 -0400] Sauraus: @doomviking actually it wasn't until recently, https://tickets.opscode.com/browse/CHEF-4399
[2013-08-09 23:34:20 -0400] Sauraus: This was changed recently
[2013-08-09 23:40:29 -0400] doomviking: bummer
[2013-08-09 23:41:23 -0400] Sauraus: IMHO template, cookbook_file, remote_folder etc. should have an option to specify the line-ending to be applied on the node
[2013-08-09 23:41:35 -0400] Sauraus: And else default to the OS standard
[2013-08-09 23:54:36 -0400] gkra: Hey if I use ruby code in an only_if or not_if conditional for a block in a recipe, is the condition evaluated at compile time or run time?
[2013-08-09 23:55:05 -0400] gkra: i.e.: not_if { ::Etc.getgrid(6059) }
[2013-08-09 23:56:07 -0400] gkra: i.e.: not_if { ::Etc.getgrgid(6059) }

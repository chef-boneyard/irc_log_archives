[2013-08-31 04:29:26 -0400] a13x212: anyone have an example of calling cloud_attributes?
[2013-08-31 09:05:30 -0400] arpa: I can see that knife bootstrap should support the -j flag but I cannot pass any json to it without it failing.. any ideas?
[2013-08-31 09:05:37 -0400] arpa: Tried both: knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j "{version:2.3.1}"
[2013-08-31 09:05:42 -0400] arpa: and knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j "{'version':'2.3.1'}"
[2013-08-31 09:05:47 -0400] arpa: both fail on parsing errors
[2013-08-31 09:52:27 -0400] SynchronE: recipe[jarvis] whoa, Tony, is that you ?
[2013-08-31 09:54:13 -0400] abrkn: how can i notify a service to restart if started and start if not started?
[2013-08-31 10:33:13 -0400] Jheranimo: a
[2013-08-31 10:34:02 -0400] Jheranimo: hi guys is there an open source project providing a "shelf" like functionality to share cookbooks ?
[2013-08-31 10:34:57 -0400] Jheranimo: like http://community.opscode.com
[2013-08-31 10:38:05 -0400] Jheranimo: anyonw
[2013-08-31 10:38:14 -0400] Jheranimo: anyone ? any ideas ?
[2013-08-31 10:48:13 -0400] Jheranimo: https://github.com/opscode/bookshelf ?
[2013-08-31 10:53:44 -0400] Jheranimo: :q
[2013-08-31 11:45:36 -0400] abrkn: i just use github
[2013-08-31 11:45:41 -0400] abrkn: + librarian-chef
[2013-08-31 13:20:05 -0400] evtuhovich: Ohai
[2013-08-31 13:20:14 -0400] evtuhovich: When i try to clone chef-docs
[2013-08-31 13:20:15 -0400] evtuhovich: error: RPC failed; result=18, HTTP code = 200
[2013-08-31 13:20:55 -0400] evtuhovich: i set postBuffer = 1073741824 in .gitconfig according to https://confluence.atlassian.com/pages/viewpage.action?pageId=301663284
[2013-08-31 13:21:02 -0400] evtuhovich: but this doesn't help
[2013-08-31 13:21:07 -0400] evtuhovich: :-(
[2013-08-31 13:26:28 -0400] evtuhovich: Now i clone by ssh protocol (not https) and it's ok
[2013-08-31 16:43:15 -0400] arpa: I can see that knife bootstrap should support the -j flag but I cannot pass any json to it without it failing.. any ideas?
[2013-08-31 16:43:19 -0400] arpa: Tried both: knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j "{version:2.3.1}"
[2013-08-31 16:43:20 -0400] arpa: and knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j "{'version':'2.3.1'}"
[2013-08-31 16:43:22 -0400] arpa: both fail on parsing errors
[2013-08-31 16:43:34 -0400] adnichols: arpa quote strings
[2013-08-31 16:43:43 -0400] adnichols: json only supports double quotes afaik
[2013-08-31 16:44:04 -0400] arpa: So this should work: knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j "{'version':"2.3.1"}
[2013-08-31 16:44:07 -0400] arpa: sorry
[2013-08-31 16:44:13 -0400] arpa: So this should work: knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j {"version":"2.3.1"}
[2013-08-31 16:44:18 -0400] stormerider: use single quotes to wrap the json and double inside
[2013-08-31 16:44:21 -0400] adnichols: I would wrap the json in single quotes
[2013-08-31 16:44:25 -0400] arpa: So this should work: knife bootstrap 1.2.3.4 --ssh-user root --ssh-password password --ssh-port 22 --run-list "recipe[jarvis]" -j '{"version":"2.3.1"}'
[2013-08-31 16:44:33 -0400] adnichols: yes
[2013-08-31 16:44:34 -0400] stormerider: yeah, give that a shot
[2013-08-31 16:44:40 -0400] arpa: one sec, trying :)
[2013-08-31 16:49:29 -0400] arpa: Nope
[2013-08-31 16:49:47 -0400] arpa:  /var/lib/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:155:in `parse': 757: unexpected token at '{'version':'2.3.1'}' (JSON::ParserError)
[2013-08-31 16:49:57 -0400] arpa: from /var/lib/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:155:in `parse'
[2013-08-31 16:50:15 -0400] stormerider: that shows single quotes inside
[2013-08-31 16:50:58 -0400] stormerider: let me take a look at my bootstrap script, i know i use -j there.
[2013-08-31 16:51:31 -0400] stormerider: ah, i run it on a file, not a string.
[2013-08-31 16:51:55 -0400] arpa: really? documentation says string
[2013-08-31 16:52:57 -0400] arpa: stormerider: Yeah i know it shows single quotes.. but I ran the cmd with the single on the outside and the double on the inside, weird
[2013-08-31 16:53:01 -0400] arpa: I'll try a file
[2013-08-31 16:53:29 -0400] stormerider: you can use a file. i think you can use a string if you get past quoting nonsense, but is easier to handle with a file, imo
[2013-08-31 16:54:37 -0400] arpa: no, doesn't work with a file either
[2013-08-31 16:54:55 -0400] arpa: stormerider: var/lib/gems/1.9.1/gems/json-1.7.7/lib/json/common.rb:155:in `parse': 757: unexpected token at 'test.json' (JSON::ParserError)
[2013-08-31 16:55:08 -0400] arpa: i tried wrapping test.json with quotes as well, didn't help
[2013-08-31 16:55:42 -0400] stormerider: oh, sorry, im braindead this morning i use -j for chef-client, not knife.
[2013-08-31 16:55:55 -0400] stormerider: sorry for the red herring. i blame the migraine.
[2013-08-31 16:56:20 -0400] arpa: ahh, ok....
[2013-08-31 16:56:42 -0400] arpa: so strange.. It's in the docs so how does it not work? I don't see any other people complaining as well so..
[2013-08-31 17:01:45 -0400] adnichols: it looks to me like knife bootstrap only accepts a json string
[2013-08-31 17:01:59 -0400] adnichols: see this: http://tickets.opscode.com/browse/CHEF-3965?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel
[2013-08-31 17:02:00 -0400] arpa: adnichols: yeah seems that way but it doesn't work..
[2013-08-31 17:02:22 -0400] adnichols: yeah, I was looking for an example - don't use it personally
[2013-08-31 17:02:57 -0400] arpa: I can't find a single example on google
[2013-08-31 17:03:13 -0400] arpa: And I've tried every single combination of single/double quote etc..
[2013-08-31 17:03:20 -0400] adnichols: have you tried it w/out the braces? Would be non-json but I'm wondering if the exterior braces get added by knife
[2013-08-31 17:03:37 -0400] arpa: I'll try now
[2013-08-31 17:04:04 -0400] arpa: nope
[2013-08-31 17:04:07 -0400] adnichols: meh
[2013-08-31 17:04:23 -0400] adnichols: now I have to try it.. heh
[2013-08-31 17:04:32 -0400] arpa: Let me know if you get anywhere :)
[2013-08-31 17:04:39 -0400] adnichols: I mean -  you hit a parsing error right? it never even gets to the bootstrap?
[2013-08-31 17:04:46 -0400] arpa: true
[2013-08-31 17:04:47 -0400] adnichols: so I may not even need a valid node
[2013-08-31 17:05:08 -0400] arpa: Yeah I think you're right
[2013-08-31 17:05:12 -0400] gkarekinian: I can reproduce your issue in IRB:
[2013-08-31 17:05:17 -0400] gkarekinian: >> JSON.parse "'{'version':'2.3.1'}'"
[2013-08-31 17:05:49 -0400] gkarekinian: That means something is adding an extra outer single quote while parsing the command line
[2013-08-31 17:05:51 -0400] adnichols: gkarekinian does it throw a parser exception?
[2013-08-31 17:05:56 -0400] gkarekinian: Yes
[2013-08-31 17:06:14 -0400] arpa: So if I run '{'version':'2.3.1'} it should work
[2013-08-31 17:06:36 -0400] adnichols: arpa do you get a message from knife like : Bootstrapping Chef on 1.2.3.4 ?
[2013-08-31 17:06:40 -0400] adnichols: or does it fail before that?
[2013-08-31 17:06:42 -0400] arpa: no i don't
[2013-08-31 17:06:43 -0400] arpa: fails before
[2013-08-31 17:06:58 -0400] adnichols: ok - so I don't get a parse error w/ this: knife bootstrap 1.2.3.4 -j '{"test":"testing"}'
[2013-08-31 17:06:59 -0400] gkarekinian: json needs double quotes to be valid
[2013-08-31 17:07:12 -0400] adnichols: chef 11.6.0
[2013-08-31 17:07:23 -0400] gkarekinian: Yeah that looks like it should work adnichols
[2013-08-31 17:07:31 -0400] arpa: ok guys
[2013-08-31 17:07:48 -0400] arpa: I just run '{"version":"2.3.1."}' and it worked
[2013-08-31 17:07:55 -0400] arpa: I have no idea how it worked since I've tried that combination
[2013-08-31 17:08:00 -0400] arpa: but in any case, thanks so much
[2013-08-31 17:09:07 -0400] adnichols: fun stuff
[2013-08-31 18:26:30 -0400] a13x212: when i first bootstrap a rackspace cloud server, i can do knife node show <node> -a rackspace, after i disable the public interface it returns only the hostname
[2013-08-31 18:54:17 -0400] adnichols: a13x212 is the /etc/hosts entry for your host possibly using the public IP? I haven't personally run into this - just throwing out things to look at
[2013-08-31 19:00:55 -0400] a13x212: adnichols, interesting, that worked why?
[2013-08-31 19:01:12 -0400] adnichols: because stuff gets borked when a machine can't resolve its own name
[2013-08-31 19:01:24 -0400] adnichols: or the inverse
[2013-08-31 19:01:57 -0400] adnichols: wish I had a more precise explanation
[2013-08-31 20:51:52 -0400] a13x212: i'm trying to do this: print node['ipaddress_eth1'] but doesn't work
[2013-08-31 20:52:34 -0400] gkellogg: Try puts instead of print, and you might want to add a .inspect to the end
[2013-08-31 20:55:15 -0400] a13x212: returns nil
[2013-08-31 21:11:46 -0400] storme_out: i think you need node['network']['interfaces']['eth1']['addresses'] and look for family: inet
[2013-08-31 23:08:49 -0400] wpietri: Hi! I'm working my way through "Test-Driven Infrastructure with Chef" and I'm stumped. In hosted Chef, should a node have permissions to write to itself? My chef-client run fails at the end when it tries to write state back, but I'm not sure if I should change the permissions or how chef-client is running.

[2013-10-08 01:07:29 -0400] chance: theres a client_key_path
[2013-10-08 01:07:36 -0400] chance: for chef serer
[2013-10-08 01:07:46 -0400] chance: server
[2013-10-08 01:38:52 -0400] daos: do any of you guys use chef-vault
[2013-10-08 01:46:06 -0400] sgronblom: You can include cookbooks using include_recipe or?
[2013-10-08 01:46:59 -0400] sgronblom: For example if I knife cookbook site install nodejs and then create a cookbook web_server that does include_recipe "nodejs", am I actually including the nodejs cookbook as a recipe or am I including a nodejs recipe in the nodejs cookbook?
[2013-10-08 01:53:00 -0400] sgronblom: And if the second is true is there some way to include all recipes from a cookbook?
[2013-10-08 01:55:11 -0400] cheeseplus: if you include a cookbook it will fire the default recipe
[2013-10-08 01:55:40 -0400] cheeseplus: if you wanted to be explicit and run them all you could include each of the individual recipes in the wrapper cookbook
[2013-10-08 01:57:12 -0400] sgronblom: cheeseplus: ok but how would I include the wrapper cookbook?
[2013-10-08 01:58:14 -0400] sgronblom: I'm trying to group recipes for a web_server and a ci_server right now. But not sure if I should group as a role or a cookbook.
[2013-10-08 01:58:25 -0400] cheeseplus: I'm not sure I follow, you would execute the wrapper cookbook by having it in a run list
[2013-10-08 01:58:39 -0400] cheeseplus: you can do either
[2013-10-08 01:59:06 -0400] cheeseplus: I use roles myself but others use wrapper cookbook to effectively act as "roles"
[2013-10-08 01:59:07 -0400] sgronblom: Ok, so I could create a web_server cookbook where the default recipe includes nodejs and other dependencies?
[2013-10-08 01:59:22 -0400] cheeseplus: if you go the wrapper route then, yes
[2013-10-08 01:59:26 -0400] sgronblom: Yeah I heard roles are a bit discouraged because you can't version them
[2013-10-08 01:59:53 -0400] cheeseplus: well you can throw them in git like everything else but versioned inside of Chef, not exactly
[2013-10-08 02:00:33 -0400] cheeseplus: I've not heard them being discouraged but the wrapper cookbook style seems to be gaining in popularity
[2013-10-08 02:00:34 -0400] sgronblom: Yeah in that sense you can version any file. But I guess what they mean is that you can't explicitly set a specific role version for an env in Chef.
[2013-10-08 02:00:50 -0400] cheeseplus: you can still set env constraints though to pin cookbooks
[2013-10-08 02:00:57 -0400] cheeseplus: I use a combo of roles and environments
[2013-10-08 02:02:33 -0400] sgronblom: http://leknarf.net/blog/2013/04/22/staying-sane-while-writing-chef-cookbooks/#.UlNnrGTEzx4 Here you have one "Don't use roles"
[2013-10-08 02:03:25 -0400] cheeseplus: sure, there is an argument to be made there but I've never heard Opscode say anything about not using them ;)_
[2013-10-08 02:03:40 -0400] cheeseplus: to each their own
[2013-10-08 02:06:29 -0400] sgronblom: Sure sure, but sometimes users are quicker to notice pain points than the official supporter will acknowledge them
[2013-10-08 02:06:51 -0400] sgronblom: I think I will go with the wrapper cookbook and consider roles to be nonexistant
[2013-10-08 02:07:03 -0400] cheeseplus: certainly, I'm just saying that folks do it both ways - Chef has many ways to do something
[2013-10-08 02:07:10 -0400] sgronblom: But thanks for explaining how the include "cookbook_name" works
[2013-10-08 02:07:32 -0400] sgronblom: Yeah of course for simple setups using Roles will not cause problems most of the time
[2013-10-08 02:08:50 -0400] stormerider: anyone know what I need to set to get this cookbook to be able to configure the mysql database? im not familiar with the databse cookbook https://gist.github.com/anonymous/aaf55e0acb635aa14085
[2013-10-08 02:16:56 -0400] stormerider: specifically, im trying to use the gitlab cookbook, and it looks like it's trying to create the database using mysql root user w/o a password and i have a password set
[2013-10-08 02:22:01 -0400] sgronblom: stormerider: Maybe you have to override the mysql password somehow
[2013-10-08 04:26:52 -0400] sgronblom: Is knife git-aware?
[2013-10-08 04:27:08 -0400] sgronblom: Do I have to commit my cookbooks for knife upload to work_
[2013-10-08 04:38:25 -0400] sgronblom: Can you have nested directories in cookbooks?
[2013-10-08 04:38:35 -0400] sgronblom: cookbooks/myorg/jenkins?
[2013-10-08 04:38:48 -0400] sgronblom: Or would that have to be done as cookbooks/myorg-jenkins?
[2013-10-08 05:59:29 -0400] sgronblom: Getting a 400 error when trying to knife upload . to my Hosted Chef...
[2013-10-08 06:06:24 -0400] DeadZen: who handles the pull requests?
[2013-10-08 08:13:23 -0400] Cope: moin
[2013-10-08 08:18:01 -0400] fishGoM00: Good morning chefs
[2013-10-08 08:25:37 -0400] dmdeklerk: goodmorning to you to
[2013-10-08 08:26:41 -0400] fishGoM00: today I will mostly be getting logstash, ES and kibana working :)
[2013-10-08 08:27:17 -0400] dmdeklerk: sounds good
[2013-10-08 08:28:12 -0400] dmdeklerk: Question ... in recipe database::master there is 'search(:apps)' statement at the start of the file. Will that work with chef-solo?
[2013-10-08 08:29:19 -0400] dmdeklerk: Or. does chef-solo support databag search?
[2013-10-08 08:31:21 -0400] Cope: dmdeklerk: not out of the box, no
[2013-10-08 08:31:30 -0400] Cope: there are workarounds
[2013-10-08 08:31:37 -0400] dmdeklerk: what do I put in the box?
[2013-10-08 08:31:50 -0400] dmdeklerk: chef-solo-search?
[2013-10-08 08:32:51 -0400] Cope: you could put a chef server the box :) or you coud use chef-zero, or chef-solo-search; a few other things too, that I can't remember
[2013-10-08 08:33:20 -0400] dmdeklerk: ok thanks, havent seen all of those
[2013-10-08 08:33:30 -0400] Cope: however, my rule of thumb is that when/if you start feeling pain with chef-solo because its lacking chef server features, that's a sign that you should consider using a chef server
[2013-10-08 08:34:32 -0400] fishGoM00: yupyupyup
[2013-10-08 08:35:30 -0400] dmdeklerk: maybe your right
[2013-10-08 09:03:33 -0400] ocholetras: hi guys!
[2013-10-08 09:03:42 -0400] ocholetras: anyone knows what is node_name  defaults
[2013-10-08 09:03:45 -0400] ocholetras: on a node
[2013-10-08 09:11:02 -0400] chr4: Is there a way to find out when a nodes last successful chef run was, without querying the chef-server? I'm using "knife status" atm, but this takes too long.
[2013-10-08 09:12:46 -0400] ocholetras: are you using a query
[2013-10-08 09:12:59 -0400] ocholetras: in the status comand?
[2013-10-08 09:13:19 -0400] ocholetras: knife status 'name:node.name.fqdn'
[2013-10-08 09:13:22 -0400] chr4: yes.
[2013-10-08 09:13:38 -0400] ocholetras: so you have thousand nodes?
[2013-10-08 09:13:56 -0400] ocholetras: O_o
[2013-10-08 09:14:02 -0400] chr4: I just don't want to load ruby, as this takes sometimes longer than 1000ms. I was considering reading out last modified timestamp of client.log, but with that I cannot distinguish between sucessful and unsucessful runs
[2013-10-08 09:14:29 -0400] ocholetras: umm the last execution logs on the server database
[2013-10-08 09:14:39 -0400] chr4: No, only a few dozen, and the chef server is connceted using gbit. It (not always) but sometimes takes longer than 1000ms
[2013-10-08 09:14:46 -0400] ocholetras: server takes control over all executions etc..
[2013-10-08 09:15:00 -0400] ocholetras: umm
[2013-10-08 09:15:10 -0400] ocholetras: you can "cache" that value
[2013-10-08 09:15:12 -0400] ocholetras: on a file
[2013-10-08 09:15:14 -0400] chr4: I was hoping for something local, but the only thing so far was grepping client.log or so, which is not very clean..
[2013-10-08 09:15:15 -0400] ocholetras: or whatever
[2013-10-08 09:15:33 -0400] ocholetras: on every execution you can have a template with that value
[2013-10-08 09:15:41 -0400] chr4: Yeah, so I have to tinker a little I guess. I hoped that there's something simple that I overlooked...
[2013-10-08 09:15:41 -0400] ocholetras: but it is no so synced
[2013-10-08 09:15:45 -0400] ocholetras: with the executions..
[2013-10-08 09:15:58 -0400] ocholetras: yea
[2013-10-08 09:16:06 -0400] ocholetras: put your brain at work for a while!
[2013-10-08 09:16:11 -0400] ocholetras: sure its a solution
[2013-10-08 09:16:31 -0400] ocholetras: Chef server have an api, may be you can query that api with other language
[2013-10-08 09:16:37 -0400] ocholetras: if ruby load time is the problem ;)
[2013-10-08 09:17:44 -0400] ocholetras: by the way
[2013-10-08 09:17:47 -0400] chr4: That would also be a possibility. I'll think of something
[2013-10-08 09:18:17 -0400] ocholetras: im trying to get that status on my nodes but looks like the "node_name" isnt getting the right value from ohai
[2013-10-08 09:18:27 -0400] ocholetras: if i grep ohai output
[2013-10-08 09:18:30 -0400] ocholetras: fqdn value is ok
[2013-10-08 09:18:41 -0400] ocholetras: but if i dont write it on client.rb
[2013-10-08 09:18:46 -0400] ocholetras: it doesnt get it..
[2013-10-08 09:19:10 -0400] ocholetras: It should be automatic http://docs.opscode.com/config_rb_client.html
[2013-10-08 09:19:33 -0400] chr4: you can doublecheck what your node.name is on chef-shell and check if it matches fqdn?
[2013-10-08 09:19:40 -0400] chr4: Yes, node_name defaults to fqdn
[2013-10-08 09:19:53 -0400] ocholetras: ohai fqnd output is ok
[2013-10-08 09:20:14 -0400] ocholetras: node.name is the name of the node on chefserver
[2013-10-08 09:20:17 -0400] ocholetras: right?
[2013-10-08 09:20:21 -0400] chr4: Also hostname -f tells you the fqdn?
[2013-10-08 09:20:29 -0400] ocholetras: y
[2013-10-08 09:20:33 -0400] chr4: yes, the one that you need to specify as node_name. In your case it should match fqdn
[2013-10-08 09:20:42 -0400] ocholetras: yep
[2013-10-08 09:20:59 -0400] ocholetras: if i write node_name "my.fqdn.name"
[2013-10-08 09:21:01 -0400] ocholetras: on client.rb
[2013-10-08 09:21:03 -0400] ocholetras: it works..
[2013-10-08 09:21:38 -0400] ocholetras: so i dont know from where knife is getting the node_name because fqnd is ok
[2013-10-08 09:23:30 -0400] chr4: if "hostname -f", ohai and "chef-shell -z"'s "node.name" all match your fqdn, I do not have an idea I'm afraid.
[2013-10-08 09:25:25 -0400] ocholetras: lets have a look at chef-shell
[2013-10-08 09:26:13 -0400] chr4: Do you use the chef-client cookbook? That should take care of your client.rb's node_name anyways
[2013-10-08 09:27:18 -0400] ocholetras: umm
[2013-10-08 09:27:34 -0400] ocholetras: i have just bootstraped the node
[2013-10-08 09:44:52 -0400] chr4: I assume there's no way to touch a file (using a recipe) after a successful chef-run?
[2013-10-08 09:46:21 -0400] zaargy: chr4: you could write a chef handler that does that
[2013-10-08 09:46:25 -0400] zaargy: http://docs.opscode.com/essentials_handlers.html
[2013-10-08 09:46:32 -0400] zaargy: although what are you trying to achieve by doing so?
[2013-10-08 09:48:53 -0400] chr4: zaargy: I'll have a look. Thanks. I'm trying to get the status of the last chef run whithout having to query the chef-server, as "knife status" sometimes takes over 1000ms to finish. So I was looking for a way to do it locally.
[2013-10-08 09:59:28 -0400] alexbst: is there any way to redirect attributes ?
[2013-10-08 09:59:39 -0400] alexbst: as in, provide an attribute that points to another attribute ?
[2013-10-08 10:09:08 -0400] dmdeklerk: Question.. I keep getting "Invalid signature for user or client 'FILTERED'" when trying to connect to hosted chef. I have re-generated both user.pem and validator.pem. Any pointers are wellcome.
[2013-10-08 10:09:35 -0400] stormerider: gchristensen: ping?
[2013-10-08 10:09:46 -0400] gchristensen: stormerider: you rose me from the dead :P what's up?
[2013-10-08 10:10:13 -0400] stormerider: what was the issue with my PR that you pointed out? been so long it's fallen out of my head
[2013-10-08 10:11:34 -0400] gchristensen: looking
[2013-10-08 10:11:42 -0400] stormerider: i'm seeing https://github.com/zippykid/nagios/commit/ddddcf5c2fbbfb5742efbf1666ba5d0c17d80720 but it's not making much sense to my insomniac mind
[2013-10-08 10:11:53 -0400] stormerider: (2 ambien and i cant sleep, ugh)
[2013-10-08 10:11:59 -0400] gchristensen: oh jeebus man
[2013-10-08 10:12:05 -0400] gchristensen: I'm only wake because I got paged :P
[2013-10-08 10:12:42 -0400] stormerider: sorry, didnt think an irc notification would wake you up, man :-/
[2013-10-08 10:12:44 -0400] gchristensen: stormerider: so the query wasn't being applied to hostgroups, which is an issue, because if you define a hostgroup (foo) and have no members, it'll say it can't resolve hosts for it
[2013-10-08 10:13:00 -0400] gchristensen: stormerider: no no not you, a customer is writing 2GB/5min to our DB :)
[2013-10-08 10:13:13 -0400] stormerider: ah, ok, dont feel so bad now
[2013-10-08 10:13:58 -0400] gchristensen: does that make sense?
[2013-10-08 10:19:10 -0400] benner_: chef-client cookbook has bad cache_path and backup_path attributes for "debian","rhel","fedora","suse". is it possible overide them in role not for all platforms but for thease? or any other sugestions without cookbook change?
[2013-10-08 10:22:48 -0400] Yvan: Anybody here ?
[2013-10-08 10:29:57 -0400] stormerider: gchristensen: yep. almost done, will have a new branch for you to test in a moment
[2013-10-08 10:30:23 -0400] Yvan: Question about gem_package
[2013-10-08 10:31:34 -0400] Yvan: :gem_package: if I need a to set an http proxy, how come gem_package doesn't use the one set in my client.rb ?
[2013-10-08 10:31:56 -0400] chr4: Why can I access Chef::Config[:file_cache_path], but not Chef::Config[:interval] in my recipe? the latter returns nil, even though it works when using chef-shell -z
[2013-10-08 10:37:41 -0400] stormerider: gchristensen: https://github.com/stormerider/nagios branch 3262-test should have the HG changes in it as well
[2013-10-08 10:41:09 -0400] Yvan: :gem_package: if I need a to set an http proxy, how come gem_package doesn't use the one set in my client.rb ?
[2013-10-08 10:49:48 -0400] ocholetras: benner_: use a wrapped cookbook
[2013-10-08 10:50:10 -0400] stormerider: Yvan: i believe it's because it's calling out to the external gem binary which doesnt know about it, so you have to specify it
[2013-10-08 10:50:48 -0400] threadwaste: ^
[2013-10-08 10:50:59 -0400] threadwaste: the http_proxy is for chef-client's http requests
[2013-10-08 10:51:22 -0400] stormerider: a site-wide http_proxy environment variable would help for other things on the box
[2013-10-08 10:52:02 -0400] threadwaste: i think there are some cookbooks that have attempted to source the client.rb http_proxy setting if no env setting is available, but that seems cludgey imo and i'm not sure it's a wide practice
[2013-10-08 10:52:41 -0400] ocholetras: is it normal that node.node_name is undefined?
[2013-10-08 10:53:05 -0400] ocholetras: it defaults to fqdn, right? O_o
[2013-10-08 10:53:06 -0400] benner_: ocholetras: what is wrapped cookbook?
[2013-10-08 10:53:32 -0400] ocholetras: http://devopsanywhere.blogspot.com.es/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-10-08 10:53:33 -0400] ocholetras: that
[2013-10-08 10:53:56 -0400] threadwaste: Yvan: do note though in your gem_package block you should be able to use options and node[:chef_client][:http_proxy] to do this easily
[2013-10-08 10:55:05 -0400] Yvan: stormerider: thx. hmm that's cool.
[2013-10-08 10:55:35 -0400] benner_: ocholetras: thanks
[2013-10-08 10:56:55 -0400] Yvan: stormerider: can you point me to an example about how to put that in a code block ?
[2013-10-08 10:58:12 -0400] stormerider: all depends on how you want to go about it. at RST we define /etc/environment which is read in by all the shells (not sure if they did custom work there to load that or what) and set http_proxy and https_proxy inside that file.
[2013-10-08 10:58:38 -0400] stormerider: you could likely do something with /etc/profile.d or the like as well
[2013-10-08 10:59:19 -0400] Yvan: stormerider: thx man.
[2013-10-08 11:06:33 -0400] glen: so, what do i do when ohai finds no ips, and therefore chef-client refuses to run
[2013-10-08 11:06:47 -0400] glen: or rather some cookbook fatals out because of missing attributes
[2013-10-08 11:09:20 -0400] glen: something like :  20>> default['mysql']['bind_address']               = attribute?('cloud') ? cloud['local_ipv4'] : ipaddress
[2013-10-08 11:10:16 -0400] klaernie__: hi guys.
[2013-10-08 11:11:13 -0400] klaernie__: is anyone using the apache2 cookbook? I'm trying to use mod_ssl, but specifying it in the runlist doesn't actually enable the module
[2013-10-08 11:56:40 -0400] gchristensen: stormerider: I'm awake again :)
[2013-10-08 12:01:59 -0400] mind_: hi
[2013-10-08 12:03:48 -0400] mind_: when I try to add new node without any cookbook, I get error Syncing cookbooks(TypeError: can't convert Net::ReadAdapter into String). Is there any way to trace, what cookbook and what attribute has this error?
[2013-10-08 12:16:21 -0400] mattjalexander: can i force chef to wait for a notifies to complete?
[2013-10-08 12:25:38 -0400] Yvan: threadwaste: gem_package with http_proxy code block. I guess I must pass it via the options ?
[2013-10-08 12:26:35 -0400] threadwaste: if you want to rig it via client.rb, yeah.
[2013-10-08 12:27:29 -0400] threadwaste: options("--http-proxy #{node[:chef_client][:http_proxy]}") or similar
[2013-10-08 12:27:39 -0400] threadwaste: sorry distracted atm :)
[2013-10-08 12:35:19 -0400] mattjalexander: i have a service resource that has supports :status => true
[2013-10-08 12:35:37 -0400] mattjalexander: is there a way i can reference that to get the status of the service?
[2013-10-08 12:35:49 -0400] mattjalexander: something like notifies :status, 'service[foo]', :immediately
[2013-10-08 12:40:49 -0400] dmdeklerk: I get 'Permission denied.' on Clients, Groups, Users etc.. tabs on manage.opscode.com. I think I messed it up, is there a reset option I can use in hosted chef?
[2013-10-08 12:42:10 -0400] hasrb: dmdeklerk: I got permission denied when I named a client or node(can't remember) the same name as a user I believe, possibly try that.
[2013-10-08 12:42:41 -0400] dmdeklerk: its possible i did that
[2013-10-08 12:45:04 -0400] dmdeklerk: looking through the manage.opscode.com it doesnt seem to let me make any changes (permission denied), Might share how you solved that?
[2013-10-08 12:45:55 -0400] dmdeklerk: google says to email support@opscode.com
[2013-10-08 12:49:20 -0400] ocholetras: does knife-ssh uses .ssh/config
[2013-10-08 12:49:21 -0400] ocholetras: ?
[2013-10-08 12:53:55 -0400] hasrb: dmdeklerk: I can't seem to find my old tickets but I basically just deleted whatever had the same name as something else
[2013-10-08 12:58:02 -0400] ocholetras: is there any way
[2013-10-08 12:58:05 -0400] dmdeklerk: hasrb: did you delete these things in the webui?
[2013-10-08 12:58:17 -0400] ocholetras: to install chef-rewind and use it on the recipe?
[2013-10-08 12:58:19 -0400] hasrb: dmdeklerk: I usually just use the knife command
[2013-10-08 12:58:25 -0400] magrath: I'm getting an odd error during a "knife ec2 server create" execution. Directly after 'Bootstrapping Chef on...', I get 'ERROR: ArgumentError: invalid byte sequence in UTF-8'. Has anyone else here seen this? I've found some references to it online but no solutions.
[2013-10-08 12:58:27 -0400] ocholetras: if fails if is not installed
[2013-10-08 12:58:28 -0400] ocholetras: -_-
[2013-10-08 12:59:00 -0400] dmdeklerk: hasrb: mmm, knife gives HTTP error retrieving children: 401 "Unauthorized"
[2013-10-08 12:59:36 -0400] magrath: I've turned knife logging to extra verbose and all I've gotten in between 'Bootstrapping Chef on...' and 'ERROR: ArgumentError: invalid byte sequence in UTF-8' has been 'DEBUG: Adding ....'
[2013-10-08 13:00:28 -0400] dmdeklerk: magrath: that sounds like a ruby problem
[2013-10-08 13:01:28 -0400] dmdeklerk: magrath: I believe you had to put some #xxx something at the top of a ruby file if it used some kind of character set ..?? not sure though
[2013-10-08 13:01:30 -0400] hasrb: magrath: Is it trying to load any data bags or anythign?
[2013-10-08 13:02:21 -0400] dmdeklerk: put "# encoding: UTF-8" at the start of the file
[2013-10-08 13:02:25 -0400] magrath: dmdeklerk: The Ruby used is the one at /opt/chef/embedded/bin/ruby. The version is ruby 1.9.3p429 (2013-05-15 revision 40747) [i686-linux].
[2013-10-08 13:02:50 -0400] magrath: dmdeklerk: At the top of what file?
[2013-10-08 13:03:18 -0400] magrath: hasrb: Not at this point, no.
[2013-10-08 13:03:38 -0400] magrath: hasrb: It is just creating an EC2 instance with a very basic role.
[2013-10-08 13:04:23 -0400] magrath: A colleague of mine has tried running the same command with the same parameters and same role and doesn't have any problems.
[2013-10-08 13:05:13 -0400] magrath: We have the same ruby version and chef knife version.
[2013-10-08 13:05:53 -0400] dmdeklerk: sorry dont know what to do, its just that 'invalid byte sequence in UTF-8'' in your post rang a bell to something I run in writing ruby scrips
[2013-10-08 13:05:57 -0400] magrath: Is there anyway to get more debug information from knife than can be got from the -VV argument?
[2013-10-08 13:15:50 -0400] magrath: Think I found the problem. Corrupt validator key. Awful error message though.
[2013-10-08 13:17:20 -0400] juliancdunn: if you get a chance it would be worth filing a bug at tickets.opscode.com magrath
[2013-10-08 13:25:17 -0400] ocholetras: hoy do you modify a template resource on a wrapped cookbook?
[2013-10-08 13:25:44 -0400] ocholetras: i was using rewind, but client log fullfilled with "cloned resource warnings"!
[2013-10-08 13:27:12 -0400] magrath: juliancdunn: Good idea.
[2013-10-08 13:27:40 -0400] ocholetras: i can do r = resources('template[/what/ever]') and then r.source = "my_override_template.erb"
[2013-10-08 13:27:40 -0400] ocholetras: ?
[2013-10-08 13:36:13 -0400] magrath: juliancdunn: Done https://tickets.opscode.com/browse/CHEF-4601
[2013-10-08 15:05:35 -0400] markp_: hey guys, when using remote_file, does :create_if_missing check the checksum to verify the file is fully downloaded?
[2013-10-08 15:06:46 -0400] markp_: nvm yes
[2013-10-08 15:17:16 -0400] eliklein: seth vargo around?
[2013-10-08 15:19:44 -0400] eliklein: or i suppose anyone who's familiar with the providers in the jenkins cookbook (cli or node specifically)
[2013-10-08 15:20:07 -0400] eliklein: i'm working on a pull request, but i've run into some snags and would love some feedback from someone who's done lots of the dev work on it
[2013-10-08 15:20:38 -0400] sethvargo: @eliklein you probably want @schisamo
[2013-10-08 15:21:47 -0400] eliklein: sethvargo: ah ok.. well do you mind me bouncing what's going on off you?
[2013-10-08 15:21:55 -0400] eliklein: ran into a snag with the home parameter
[2013-10-08 15:22:01 -0400] sethvargo: @el
[2013-10-08 15:22:14 -0400] sethvargo: @eliklein you can try, but I'm not super familiar with the cookbook
[2013-10-08 15:22:19 -0400] eliklein: ok :)
[2013-10-08 15:23:07 -0400] eliklein: so we ran into a secondary bug in the cli provider where the home that you've set isn't used properly
[2013-10-08 15:23:21 -0400] eliklein: especially if you pass it into jenkins_plugin
[2013-10-08 15:24:29 -0400] sethvargo: @eliklein ok what do you mean by "used properly"?
[2013-10-08 15:24:42 -0400] eliklein: i'm starting to think that either a) these providers simply aren't meant to be used when you have multiple buildslaves on a single system or b) i'm missing something simple about how you might use this to multiple buildslaves on a single system
[2013-10-08 15:25:07 -0400] mattjalexander: that sounds like an odd setup
[2013-10-08 15:25:28 -0400] sethvargo: @eliklein I've never encountered someone running multiple build slaves on the same OS, in my experience
[2013-10-08 15:25:28 -0400] eliklein: not if you have things that conflict if you run them as a single user
[2013-10-08 15:25:32 -0400] sethvargo: why can you just change the number of executors?
[2013-10-08 15:25:45 -0400] eliklein: long story :)
[2013-10-08 15:26:03 -0400] mattjalexander: so yeah. the cookbook as i understand it just has a single node[:user], node[:home], etc.
[2013-10-08 15:26:33 -0400] sethvargo: @eliklein the community cookbooks are designed for the most common use cases. It sounds like you may be doing something above and beyond what the community cookbook can/would support. I think @mattjalexander is right - this is a bit of an odd setup
[2013-10-08 15:27:34 -0400] eliklein: sethvargo: well at first glance, it appears to be a fairly straight forward fix to get it working
[2013-10-08 15:27:50 -0400] Cope: thom: there?
[2013-10-08 15:27:51 -0400] eliklein: sethvargo: the only hangup is node registration when using the cli key
[2013-10-08 15:28:49 -0400] eliklein: and that's where things get dicey, because you either have to place the key in a common place for all your buildslaves to use to register, or you somehow figure out how to pass in the home parameter from jenkins_node to jenkins_cli and then use it properly
[2013-10-08 15:28:51 -0400] thom: Cope: yeah, if massively jetlag-brain-deficient
[2013-10-08 15:29:10 -0400] Cope: thom: with simon lucy - he's wearing a joost shirt :)
[2013-10-08 15:30:15 -0400] thom: oh nice. tell him i'm sure he owes me beer ;)
[2013-10-08 15:30:20 -0400] sethvargo: @eliklein yea, unfortunately you're exceeding my personal knowledge of how jenkins works. I've never worked with a multi-node on a single box installation, so I don't have any good advice on the matter :(
[2013-10-08 15:31:07 -0400] Cope: thom: are you here or there?
[2013-10-08 15:31:43 -0400] thom: here. i think
[2013-10-08 15:31:57 -0400] Cope: we shall organise drinkies :)
[2013-10-08 15:32:45 -0400] eliklein: sethvargo: not a problem :) do you think schisamo might have any insights around this?
[2013-10-08 15:33:42 -0400] eliklein: we can certainly wrap the cookbook and figure out a way around it, but i'd really love to find a way to contribute back and help out anyone else who might have our same use-case
[2013-10-08 15:34:04 -0400] gazarsgo: eliklein: you don't need multiple build slaves on the same box to get user isolation  ?
[2013-10-08 15:34:28 -0400] gazarsgo: eliklein: just give jenkins build agent user permission to switch user 
[2013-10-08 15:35:02 -0400] eliklein: gazarsgo: interesting.. have you had success with this?
[2013-10-08 15:35:24 -0400] gazarsgo: "success" is a pretty loaded term ?
[2013-10-08 15:35:38 -0400] eliklein: gazarsgo: haha true.. especially when jenkins is involved.
[2013-10-08 15:35:39 -0400] gazarsgo: it's 100% better to create isolation within your jobs than to rely on user level isolation
[2013-10-08 15:35:56 -0400] sethvargo: @eliklein he may, but to be honest, I think you might be in a very small population of people
[2013-10-08 15:36:21 -0400] eliklein: sethvargo: agreed :)
[2013-10-08 15:37:08 -0400] eliklein: gazarsgo: what do you mean to create isolation within the job?
[2013-10-08 15:38:05 -0400] gazarsgo: the simplest example is if two things depend on write access to the file system, give them their own temporary working directory unique to each job run
[2013-10-08 15:38:34 -0400] eliklein: gazarsgo: well yes, i understand things like that
[2013-10-08 15:38:34 -0400] gazarsgo: that's what workspaces are intended for to begin with  just have to apply the same concept across each dependency
[2013-10-08 15:39:34 -0400] gazarsgo: if you require read/write to a database, do it in a transaction or private namespace
[2013-10-08 15:39:47 -0400] eliklein: gazarsgo: yes, we do those things
[2013-10-08 15:40:01 -0400] gazarsgo: if you did those things all the way, you could run all your jobs as the same user in a jenkins instance :)
[2013-10-08 15:40:02 -0400] sethvargo: @eliklein just sent you a private message
[2013-10-08 15:40:17 -0400] eliklein: gazarsgo: what about the case where you need to run multiple application servers in a guitest situation
[2013-10-08 15:40:37 -0400] gazarsgo: give them dynamic ports
[2013-10-08 15:40:54 -0400] gazarsgo: whatever you have to do to make them unique to a job run, do it :)
[2013-10-08 15:41:09 -0400] eliklein: gazarsgo: yeah, we've been down the dynamic port path as well :)
[2013-10-08 15:41:17 -0400] eliklein: it seems to be pain no matter what direction we turn
[2013-10-08 15:41:26 -0400] gazarsgo: docker might be better for your use case, if there is architectural complexity
[2013-10-08 15:44:36 -0400] eliklein: gazarsgo: yeah, all of this work is for a legacy set of apps
[2013-10-08 15:44:54 -0400] eliklein: gazarsgo: we're able to Do The Right Thing with the newer stuff
[2013-10-08 16:13:47 -0400] fly9: Anyone know a user cookbook that works with encrypted databags?
[2013-10-08 16:15:02 -0400] mattupstate: fly9: don't think one exists, i'd say your best bet is to fork the community cookbook
[2013-10-08 16:15:25 -0400] fly9: really? how do people manage users?
[2013-10-08 16:15:45 -0400] mattupstate: i use the community cookbook
[2013-10-08 16:16:35 -0400] mattjalexander: https://github.com/fnichol/chef-user uses databags, i don't know much more it would be to use encrypted databags
[2013-10-08 16:16:40 -0400] mattjalexander: @fly9 ldap :p
[2013-10-08 16:18:17 -0400] fly9: I need to create a user that has sudo access to other boxes I'm creating from a central point, so I need to add a public key to authorized keys on the other machines, if I use the keygen property I don't have any way of knowing the pubkey for the other machines - so I'm defining the public and private beforehand and need to encrypt it
[2013-10-08 16:18:30 -0400] fly9: I suppose I could just extract the private key manually
[2013-10-08 16:18:49 -0400] fly9: its strange that encrypted wouldn't be the default
[2013-10-08 16:19:35 -0400] mattupstate: fly9: i'd say that generating user keys isn't too common
[2013-10-08 16:20:04 -0400] mattupstate: more common is granting access like github, just ask for someone's public key
[2013-10-08 16:20:19 -0400] mattupstate: create an account for them on whatever node you want to give them access to
[2013-10-08 16:20:24 -0400] mattupstate: and add the public key
[2013-10-08 16:26:20 -0400] gchristensen: fly9: the way I do that is I create a user using the users cookbook, and then place SSH key there using a databag containing the jumphost SSH keys, and I make the user giv eme their public key
[2013-10-08 16:27:16 -0400] fly9: gchristensen: that sounds like the right approach
[2013-10-08 16:27:50 -0400] gchristensen: let me see if it makes sense to open source my cookbook
[2013-10-08 16:27:53 -0400] fly9: is there a consensus on the users cookbook vs chef-user from fnichol?
[2013-10-08 16:29:13 -0400] gchristensen: it does not :) my cookbook is pretty simple, but too integrated into my stuff :(
[2013-10-08 16:31:41 -0400] fly9: np, I'll make unencrypted bags for users and an encrypted key bag for my jump private key
[2013-10-08 16:31:54 -0400] fly9: thanks for the quick replies!
[2013-10-08 16:39:19 -0400] gchristensen: fly9: for the record, putting private keys in databags makes me feel icky inside.
[2013-10-08 16:39:26 -0400] fly9: could it be a better method to use ssh_keygen in the users cookbook and then just have each server pull the public key from my jump server's user account?
[2013-10-08 16:39:36 -0400] fly9: gchristensen: that's what I'm thinking
[2013-10-08 16:40:10 -0400] fly9: although I need to do that for my ssl for sure
[2013-10-08 16:44:59 -0400] jmartin1: anyone ever had issue with the opensource webui saying 'Could not complete logging in.' ?
[2013-10-08 16:45:34 -0400] phutchin1: Anyone know a version of Berkshelf that fixed the "always pull from cached cookbooks no matter what" bug?
[2013-10-08 16:46:00 -0400] phutchin1: I'm on 1.4.2 currently...
[2013-10-08 16:49:35 -0400] teukka: phutchin1: many lockfile and cache bugs are fixed in 2.0
[2013-10-08 16:51:16 -0400] fly9: if I have an encrypted data bag item (that will rarely change), I'm using chef solo, and I want others to be able to provision with the item, can I store it in a tarfile on s3 and point chef to it?
[2013-10-08 16:51:19 -0400] phutchin1: teukka: ok awesome. I'm not quite sure it will work with the rest of our infrastructure but I'll give it a shot...
[2013-10-08 17:02:12 -0400] Mukluc: Hello I have a question about getting a "return value" from a LWRP
[2013-10-08 17:02:54 -0400] Mukluc: I have defined a LWRP which contacts a WEB API to download a file, and I would like to to somehow "return" the full path the file was downloaded to.
[2013-10-08 17:03:02 -0400] Mukluc: How would I go about doing this? Thanks!
[2013-10-08 17:06:50 -0400] Mukluc: Hello I have a question about getting a "return value" from a LWRP. I have defined a LWRP which contacts a WEB API to download a file, and I would like to to somehow "return" the full path the file was downloaded to. How would I go about doing this? Thanks!
[2013-10-08 17:07:35 -0400] jessicab1: Mukluc: couldnt you just have the lwrp set an attribute and then check that later?
[2013-10-08 17:09:02 -0400] daos: anyone here use chef-vault?
[2013-10-08 17:11:01 -0400] fly9: jessicab1: I'd love to know how to do that, do you know of a guide?
[2013-10-08 17:11:22 -0400] jessicab1: daos: i downloaded it the other day, but it requires chef 11 which the depends doesnt mention :(
[2013-10-08 17:11:45 -0400] daos: ahh
[2013-10-08 17:12:01 -0400] daos: i am running chef 11
[2013-10-08 17:12:26 -0400] jessicab1: fly9: yea, this is the attribute guide.. just use set level if you want it to stay on the node.. default is wiped every run - http://docs.opscode.com/chef_overview_attributes.html
[2013-10-08 17:12:45 -0400] fly9: amazing!
[2013-10-08 17:13:48 -0400] damien: morning :)
[2013-10-08 17:14:50 -0400] Guest16510: Hey am I barking up the wrong tree here trying to use a range in a nodes name?  knife search "myhost[15 TO 16].bla.com" , where i'm looking for myhost15.bla.com and myhost16.bla.com?
[2013-10-08 17:15:04 -0400] Guest16510: or can you only use that on fields/attributes that are only numeric?
[2013-10-08 17:17:45 -0400] jmartin1: anyone run into an issue with chef11 webui saying 'could not complete logging in'?
[2013-10-08 17:19:45 -0400] adnichols: damien_joldersma http://lucene.apache.org/core/2_9_4/queryparsersyntax.html#Range Searches makes it look like you can specify ranges for words too - but perhaps not a substring
[2013-10-08 17:20:01 -0400] damien_joldersma: adnichols, ah sounds reasonable :) ty!
[2013-10-08 17:22:26 -0400] damien_joldersma: adnichols, yup, I think you are right, pretty much says whole field: Range Queries allow one to match documents whose field(s) values are between the lower and upper bound specified by the Range Query.
[2013-10-08 17:22:41 -0400] damien_joldersma: aight, np, just being kinda super lazy
[2013-10-08 17:22:43 -0400] damien_joldersma: :D
[2013-10-08 17:22:48 -0400] adnichols: :)
[2013-10-08 17:27:18 -0400] jmartin: hrm it seems that omnibus does not segregate the webui enough
[2013-10-08 17:34:28 -0400] gchristensen: is there a way to reduce the size of a diff that chef will suppress?
[2013-10-08 17:34:58 -0400] gchristensen: I believe if its > 1,000 lines it'll supress it, I'd like to make it 500
[2013-10-08 17:37:42 -0400] polysics: hi!
[2013-10-08 17:37:43 -0400] rkroll: Hey all - I'm trying to use the opscode database cookbook to auto-create a database for development but cannot seem to get it to execute.  Chef's reporting it in the runlist, but I do not see any output from it...can anyone give me some debugging suggestions?
[2013-10-08 17:37:53 -0400] polysics: what are the current options for testing Chef recipes, please?
[2013-10-08 17:40:43 -0400] pabst^: so. there is a users databag, ther are users with the sysadmin group, yet htpasswd keeps coming up blank.... wtf nagios cookbook!
[2013-10-08 17:41:52 -0400] jessicab1: polysics: theres test-kitchen - https://github.com/opscode/test-kitchen or lots of people use jenkins jobs if youre looking for something more automated
[2013-10-08 17:42:20 -0400] cwj: and of course you can also use test-kitchen inside a jenkins job
[2013-10-08 17:43:29 -0400] cwj: i use test-kitchen but theres also chefspec, serverspec and minitest-chef
[2013-10-08 17:44:08 -0400] cwj: and minitest-chef can be used in conjunction with test-kitchen, as can bats and a few other testing frameworks
[2013-10-08 17:44:15 -0400] dgarstang2: anyone use https://github.com/customink-webops/hostsfile .... seems broken
[2013-10-08 17:44:37 -0400] polysics: cwj: how did you choose, please?
[2013-10-08 17:45:42 -0400] cwj: i tried chefspec once and didnt get a lot of traction with it because the cookbook i was trying to test did a lot of things that chefspec cant test very easily
[2013-10-08 17:46:07 -0400] cwj: test-kitchen gets me full integration testing, but the feedback loops are much longer than if i could test reliably with chefspec
[2013-10-08 17:46:25 -0400] cwj: so for some cookbooks it is good enough for the chef run to succeed
[2013-10-08 17:46:42 -0400] cwj: and for others i want the chef run to succeed and a suite of tests run on the test node to pass
[2013-10-08 17:46:51 -0400] polysics: yeah, true
[2013-10-08 17:47:01 -0400] cwj: in those cases i prefer to use bats for the tests
[2013-10-08 17:47:33 -0400] dgarstang2: no, really, https://github.com/customink-webops/hostsfile seems broken
[2013-10-08 17:47:38 -0400] polysics: how do you test the recipes themselves?
[2013-10-08 17:47:48 -0400] polysics: ie. this recipe copies a template with the correct variables in it
[2013-10-08 17:50:22 -0400] cwj: i am satisfied to let opscode test the low level chef resources
[2013-10-08 17:50:37 -0400] polysics: no, I mean, if I am writing a recipe
[2013-10-08 17:50:42 -0400] polysics: a cookbook, sorry :)
[2013-10-08 17:50:46 -0400] cwj: if the value of a variable is wrong then i expect either my chef run to fail (e.g. service fails to start)
[2013-10-08 17:51:04 -0400] cwj: or one of the tests to fail (e.g. i cant curl some local url)
[2013-10-08 17:51:25 -0400] polysics: yeah, unfortunately that is not always the case, or you need an overly complex test
[2013-10-08 17:51:26 -0400] cwj: test-kitchen allows you to define suites
[2013-10-08 17:51:47 -0400] cwj: so if you want to test a particular recipes behavior you can give it its own suite
[2013-10-08 17:52:14 -0400] cwj: what would be overly complex? you can write a bats test to grep for a value in the template
[2013-10-08 17:52:27 -0400] polysics: and you could then check, say, a SIP peer is defined in a config
[2013-10-08 17:52:49 -0400] polysics: you would otherwise have to log in and somehow dial the peer
[2013-10-08 17:52:50 -0400] cwj: yes each suite can have its own tests
[2013-10-08 17:53:25 -0400] cwj: if you can dial the sip peer via a shell command, then you could write a bats test for it
[2013-10-08 17:53:43 -0400] polysics: yes, but it would actually be better to just check the config
[2013-10-08 17:54:29 -0400] jmartin: anyone know how i can reset my chef-server-webui admin password?
[2013-10-08 17:55:47 -0400] dgarstang2: Works for anyone??? https://github.com/customink-webops/hostsfile
[2013-10-08 17:58:13 -0400] dgarstang2: hostsfile_entry[172.16.1.11] already exists - skipping create_if_missing .. and then it went and removed it. Good grief.
[2013-10-08 18:01:44 -0400] jblack: Hi, I'm trying to use php_pear, and I got the following: [Tue, 08 Oct 2013 17:59:51 +0000] FATAL: RuntimeError: php_pear[log4php/Apache_log4php] (rolestar::install_application line 31) had an error: RuntimeError: Package log4php/Apache_log4php not found in either PEAR or PECL.
[2013-10-08 18:01:59 -0400] jblack: However, running "sudo pear install log4php/Apache_log4php"  works fine
[2013-10-08 18:02:33 -0400] jblack: I'm using this in my recipe: php_pear "log4php/Apache_log4php" do      action:install     end
[2013-10-08 18:06:01 -0400] dmdeklerk: I dont quite understand the need for  /etc/chef/client.rb - Do I need that on my workstation? (setup vagrant, chef_client, berkshelf)
[2013-10-08 18:09:30 -0400] azret: do i have to specify the list of packages to be installed for rhel/centos distributions with the mysql cookbook? keeps failing my installs with a block error
[2013-10-08 18:10:17 -0400] delianides: dmdeklerk: Not for a vagrant / berkshelf type setup
[2013-10-08 18:12:11 -0400] dmdeklerk: delianides: thanks for clearing that up.
[2013-10-08 18:12:57 -0400] dmdeklerk: I got this error message when provisioning with vagrant and chef_client. Do these values look allright?  https://gist.github.com/dmdeklerk/6888969
[2013-10-08 18:13:52 -0400] dmdeklerk: It says 'chef-validator' in the error. But my ORGNAME is not 'chef'.
[2013-10-08 18:15:11 -0400] wdilly: so I would like for a recipe to behave slightly different dependent on which knife workstation bootstraps it, is this possible? Basically and if / else based on what workstation it was bootstrapped from?
[2013-10-08 18:15:58 -0400] mveitas: what's the best way to get a community cookbook upgraded. The Logstash cookbook on the community site is 0.5.9 and the latest released is 0.6.1 in github
[2013-10-08 18:20:02 -0400] cwj: mveitas: ping the listed maintainters
[2013-10-08 18:21:15 -0400] mveitas: that is what I figured good thing for Berkshelf and being able to specify a git repo and tag :)
[2013-10-08 18:28:14 -0400] markp_: hm on remote_file :create_if_missing doesn't seem to check the hash of the file, it doesn't download the file if it exists but it's 0 bytes
[2013-10-08 18:28:18 -0400] markp_: is this intended?
[2013-10-08 18:33:25 -0400] cwj: markp_: use the source :)
[2013-10-08 18:33:25 -0400] cwj: https://github.com/opscode/chef/blob/master/lib/chef/provider/file.rb#L77-L83
[2013-10-08 18:35:32 -0400] cwj: i read that as the checksum wont be checked if the action is :create_if_missing
[2013-10-08 18:35:40 -0400] markp_: yea
[2013-10-08 18:35:42 -0400] markp_: shame that
[2013-10-08 18:35:59 -0400] markp_: if you specify a checksum it should check the file is valid
[2013-10-08 18:36:06 -0400] markp_: or it's always going to fail
[2013-10-08 18:36:14 -0400] markp_: if the file partly downloads etc.
[2013-10-08 18:36:17 -0400] cwj: why would you want to use create_if_missing when you care about the files checksum
[2013-10-08 18:36:26 -0400] cwj: to me they seem to be at cross purposes
[2013-10-08 18:36:41 -0400] markp_: well :create always re-downloads the file right?
[2013-10-08 18:36:48 -0400] markp_: I don't want to re-download the file every chef run
[2013-10-08 18:36:55 -0400] markp_: but I do if it's not the correct file
[2013-10-08 18:37:25 -0400] jblack: php_pear[Apache_log4php] (rolestar::install_application line 6) had an error: NameError: Cannot find a resource for converge_by on ubuntu version 12.04
[2013-10-08 18:37:38 -0400] jblack: What would cause that? A missing cookbook?
[2013-10-08 18:38:16 -0400] markp_: sorry dumb coffee shop wifi
[2013-10-08 18:38:24 -0400] markp_: "[11:36:48] <markp_> I don't want to re-download the file every chef run
[2013-10-08 18:38:25 -0400] markp_: [11:36:55] <markp_> but I do if it's not the correct file"
[2013-10-08 18:39:27 -0400] markp_: for example, if the first download fails due to a broken connection
[2013-10-08 18:39:35 -0400] markp_: chef will die when it tries to extract and compile
[2013-10-08 18:39:46 -0400] markp_: but the next scheduled run it should try and re-download the file
[2013-10-08 18:39:55 -0400] cwj: but a broken connection would raise an exception
[2013-10-08 18:40:07 -0400] markp_: yep
[2013-10-08 18:40:34 -0400] markp_: so lets say we have 50 machines
[2013-10-08 18:40:41 -0400] markp_: chef-client runs every x minutes
[2013-10-08 18:40:46 -0400] markp_: I want it to retry
[2013-10-08 18:40:53 -0400] markp_: so I don't have to mess around
[2013-10-08 18:41:10 -0400] markp_: I'll probably just add a checksum check in but that means including the digest gem
[2013-10-08 18:43:39 -0400] pabst^: Does chef-client cache searches?
[2013-10-08 18:43:51 -0400] bean: markp_: usually chef will download again if the checksum doesn't match
[2013-10-08 18:43:58 -0400] bean: and thats a default behavior for remote_file i think
[2013-10-08 18:43:58 -0400] bean: etc
[2013-10-08 18:44:22 -0400] markp_: with :create or :create_if_missing ?
[2013-10-08 18:44:30 -0400] bean: i thought with create, but maybe i'm on drugs.
[2013-10-08 18:44:32 -0400] cwj: markp_: you might also look at use_conditional_get and use_etag options for remote_file
[2013-10-08 18:44:52 -0400] markp_: I found it was re-downloading every time with :create and :create_if_missing didn't care about checksum
[2013-10-08 18:45:05 -0400] markp_: ok thanks cwj
[2013-10-08 18:45:57 -0400] cwj: the remote_file documentation states "If the local file matches the checksum, the chef-client will not download it."
[2013-10-08 18:45:58 -0400] markp_: i'll take a look
[2013-10-08 18:45:58 -0400] markp_: ok heading home
[2013-10-08 18:45:58 -0400] markp_: thanks for your help
[2013-10-08 18:46:08 -0400] cwj: if thats not the actual behavior then it sounds like there is a bug
[2013-10-08 18:50:41 -0400] fly9: jessicab1: about attribute setting, I use set['cookbook']['attribute'] = "value" - it's worked thus far, but I don't see 'set' in the attribute guide - is there a substitute I can use for wrapper cookbooks where I want to override the community cookbook? (chef solo)
[2013-10-08 18:51:16 -0400] fly9: ^^ this is in an attribute file in my wrapper cookbook (berkshelf way)
[2013-10-08 18:51:25 -0400] cwj: fly9: node.default[foo] = bar in your wrapper cookbooks recipe will usually work
[2013-10-08 18:51:35 -0400] fly9: usually?
[2013-10-08 18:51:49 -0400] cwj: well if the cookbook is using default level attributes
[2013-10-08 18:51:52 -0400] jessicab1: fly9: i think set is the same as normal? and id check out attribute precedence.. i think its at the bottom of that page? it explains what can override what
[2013-10-08 18:51:58 -0400] cwj: the cookbook you are wrapping that is
[2013-10-08 18:52:24 -0400] cwj: you can use node.override[foo] = bar if you feel you need to be forceful
[2013-10-08 18:52:28 -0400] fly9: i see
[2013-10-08 18:52:41 -0400] cwj: but yeah, study the attribute precedence table
[2013-10-08 18:53:28 -0400] fly9: thanksthanks
[2013-10-08 18:54:40 -0400] cwj: i think jessicab1 is right, node.normal would be analogous to node.set
[2013-10-08 19:02:56 -0400] fly9: and if I want to return an overridden attribute in a wrapper cookbook recipe? does node[ work?
[2013-10-08 19:25:55 -0400] jblack: Yeah, I need some actual help here. I have an error when trying to install log4php:  "[Tue, 08 Oct 2013 19:23:49 +0000] FATAL: NameError: php_pear[Apache_log4php] (rolestar::install_application line 6) had an error: NameError: Cannot find a resource for converge_by on ubuntu version 12.04".  Someone responded here to a similiar error with " proofek, on the VM that is throwing the error. You should update it with whatever tool works best but
[2013-10-08 19:28:11 -0400] dgarstang2: is this the correct syntax for a conditional in a template? <% if node['hadoop']['task_tracker']? -%>
[2013-10-08 19:28:45 -0400] dgarstang2: I previously did ... node.set['hadoop']['task_tracker'] = true
[2013-10-08 19:29:04 -0400] chip-: dgarstang2: shouldn't need the ? at the end.
[2013-10-08 19:29:19 -0400] dgarstang2: chip-: No? Ok.
[2013-10-08 19:29:20 -0400] chip-: Since it's a boolean it'll return true if invoked.
[2013-10-08 19:29:23 -0400] dgarstang2: kk
[2013-10-08 19:29:57 -0400] chip-: 1.9.3-p448 :003 > b = true; b
[2013-10-08 19:29:58 -0400] chip-:  => true
[2013-10-08 19:30:08 -0400] chip-: (sorry for the pasta, but I figured only two lines)
[2013-10-08 19:30:16 -0400] dgarstang2: mmmm pasta
[2013-10-08 19:34:57 -0400] cwj: jblack: what version of chef are you using? i think converge_by is only chef 11+
[2013-10-08 19:36:36 -0400] jblack: 10.12.  It seems from #vagrant that I grabbed an image with an old version of chef.
[2013-10-08 19:37:00 -0400] chgravier: yes cwj is correct, I had this error yesterday
[2013-10-08 19:37:44 -0400] chgravier: provisioning chef to latest version in Vagrantfile fixed the problem (you may be using a vagrant box with an "old" version of chef ?)
[2013-10-08 19:38:11 -0400] gkra: crap
[2013-10-08 19:38:16 -0400] gkra: I think something broke when /var filled up
[2013-10-08 19:38:25 -0400] gkra: in web UI, looking up a cookbook, I get this:
[2013-10-08 19:38:25 -0400] gkra: ERROR: undefined method `close!' for nil:NilClass
[2013-10-08 19:38:42 -0400] gkra: 'knife cookbook show' claims it's there
[2013-10-08 19:39:56 -0400] gkra: is there a list of things to check/fix if chef-server runs out of disk in /var?
[2013-10-08 19:41:10 -0400] fak3r: gkra: why not dump some logs? also, install ncdu for a gui 'tree' to find which directories are eating up the most room
[2013-10-08 19:41:40 -0400] gkra: well, nginx access log ate all the space
[2013-10-08 19:41:52 -0400] gkra: that was easy to find
[2013-10-08 19:44:36 -0400] gkra: seeing this from RabbitMQ:
[2013-10-08 19:44:36 -0400] gkra: 2013-10-08_19:03:50.46463 Activating RabbitMQ plugins ...
[2013-10-08 19:44:37 -0400] gkra: 2013-10-08_19:03:50.74594 ERROR: Could not create dir /var/opt/chef-server/rabbitmq/db/rabbit@localhost-plugins-expand (enospc)
[2013-10-08 19:44:51 -0400] gkra: (okay, but post restart the log is clean)
[2013-10-08 19:51:44 -0400] gkra: chef-server-ctl test fails on:
[2013-10-08 19:51:54 -0400] gkra:   1) /environments/ENVIRONMENT/cookbooks API endpoint with multiple versions of multiple cookbooks with no environment constraints from a non-default environment when fetching cookbooks should respond with 200 OK and latest versions of ALL cookbooks
[2013-10-08 19:52:33 -0400] ratdaddy: I have a chef-solo question. I got a collection of recipes working for chef-solo with Vagrant on an Ubuntu box but when I move that same set of recipes to a production Ubuntu instance (nicely provisioned with the opscode scripts via curl), I get additional missing dependencies, some of which don't seem to make any sense, like yum.
[2013-10-08 19:53:49 -0400] ratdaddy: Why would I get those dependencies when the configuration shouldn't be including recipes that use them? Is the metadata for a cookbook being referenced in this case?
[2013-10-08 19:54:32 -0400] ratdaddy: To clarify, I'm still using chef-solo on the production box - but with a collection of the same cookbooks that work for me with Vagrant.
[2013-10-08 19:59:05 -0400] gkra: bah
[2013-10-08 19:59:16 -0400] gkra: I think it's specific to the Zabbix cookbook :(
[2013-10-08 20:03:38 -0400] fak3r: building a new cookbook to install centrify, how do I point the cookbook at the install files from the company? (they're not in a repo)
[2013-10-08 20:04:09 -0400] fak3r: looking for an example, anything in opscode cookbooks that doesn't use packages from a distro's repo? (proprietary blobs I guess)
[2013-10-08 20:07:07 -0400] gkra: Is there a workaround for cookbooks that try to intall a chef-gem on nodes that don't have Internet access?
[2013-10-08 20:07:16 -0400] fak3r: guess I could base it on this oracle example https://github.com/juliandunn/oracle-instantclient/tree/master/recipes
[2013-10-08 20:07:26 -0400] gkra: a way to specify an http proxy for chef-client maybe?
[2013-10-08 20:08:11 -0400] gkra: oh, duh
[2013-10-08 20:08:14 -0400] gkra: yay i can read docs!
[2013-10-08 20:31:02 -0400] cconstantine_: Hey y'all.  I can't help but notice there is a 'files/default' directory structure for static files in chef.  Is it possible use variants of those files by using something like 'file/variant' ?
[2013-10-08 20:33:33 -0400] dmdeklerk: Each time I run `vagrant up` berkshelf will upload all my cookbooks to the chefserver. Can I prevent this (Ie. upload only once)
[2013-10-08 20:35:00 -0400] chip-: cconstantine_: You can do things like "files/ubuntu" or "files/hostname" or "files/rhel" if you want, but I'd strongly advise you examine your pattern before digging into that functionality.
[2013-10-08 20:35:44 -0400] cconstantine_: chip: what would you suggest?
[2013-10-08 20:36:02 -0400] chip-: Well, what's the use case? What static files are you deploying?
[2013-10-08 20:36:38 -0400] cconstantine_: the one I'm working on now is a config file for a service
[2013-10-08 20:37:29 -0400] chip-: Do the file contents need to change depending on context?
[2013-10-08 20:37:34 -0400] cconstantine_: this service is running on 3 separate servers with potentially big differences for each  (staging, demo, and production environments)
[2013-10-08 20:37:58 -0400] chip-: In that case, a template is probably the correct chef resource, rather than cookbook_file.
[2013-10-08 20:38:30 -0400] chip-: Then Chef can change the file contents at runtime depending on the environment.
[2013-10-08 20:38:31 -0400] cconstantine_: by big differences I mean most of the content is different, and the structure isn't really the same
[2013-10-08 20:39:37 -0400] chip-: You in Chef 11?
[2013-10-08 20:39:48 -0400] cconstantine_: yes
[2013-10-08 20:40:11 -0400] chip-: Then I'd suggest: http://docs.opscode.com/essentials_cookbook_templates.html#partial-templates
[2013-10-08 20:41:28 -0400] chip-: that said, the context switching in the files/etc/ can be useful, if for instance you want to have distro-like config files that vary radically between machines (mysql my.ini's or something), but generally it leads to drift as the files don't all get updated together.
[2013-10-08 20:43:35 -0400] cconstantine_: chip-, yeah, the only thing in common between these files is that they need to have the same name across machines
[2013-10-08 20:44:07 -0400] cconstantine_: and I get that concern.  that kind of drift would be terrible
[2013-10-08 20:44:17 -0400] chip-: Well, that's the exact use case it's for, then!
[2013-10-08 20:44:49 -0400] cconstantine_: sweet :)
[2013-10-08 20:44:57 -0400] jblack: Ok, so, since I upgraded to using an new version of chef, the application cookbook is no longer working for me. I'm now getting "FATAL: Errno::ENOENT: deploy_revision[rolestar] (/tmp/vagrant-chef-1/chef-solo-1/cookbooks/application/providers/default.rb line 122) had an error: Errno::ENOENT: No such file or directory - git ls-remote git@github.com:rolestar/RoleStar.git HEAD"..   Some googling implies that I'm missing a git cookbook
[2013-10-08 20:45:18 -0400] jblack: Oh, wait. never mind.  I get it. new systme image has new chef and is missing git
[2013-10-08 20:45:25 -0400] cconstantine_: chip-, I've made the file, now how do I reference it from a recipe?
[2013-10-08 20:45:32 -0400] chip-: It just happens.
[2013-10-08 20:45:49 -0400] cconstantine_: how does it know which one to choose?
[2013-10-08 20:46:28 -0400] chip-: http://docs.opscode.com/chef/resources.html#file-specificity
[2013-10-08 20:46:55 -0400] chip-: It's for platform switches
[2013-10-08 20:46:57 -0400] cconstantine_: thanks :)
[2013-10-08 20:47:13 -0400] chip-: If you want to switch off environment, you'll need to use differently-named files and a case statement.
[2013-10-08 20:48:45 -0400] cconstantine_: :/
[2013-10-08 20:52:13 -0400] cconstantine_: if I have a recipe that changes the fqdn, does that change reflect in later recipies that use it for selecting static files?
[2013-10-08 20:55:12 -0400] chip-: I think it builds off node name, not fqdn
[2013-10-08 20:55:47 -0400] cconstantine_: the link you gave lists host-node[:fqdn] as the only host specific selector
[2013-10-08 20:57:33 -0400] ughani: hey guyshas anyone tested this cookbook on a rhel or a solaris system? -> https://github.com/fnichol/chef-user
[2013-10-08 21:01:23 -0400] siezer: ughani fnichol wrote test kitchen, so if centos is in his kitchen.yml, I'd assume he did =)
[2013-10-08 21:02:47 -0400] ughani: i hope sobecause according to the documentation he only tested it on debian and mac_os
[2013-10-08 21:13:31 -0400] stormerider: gchristensen: https://github.com/stormerider/nagios/tree/3262-test should be updated with the fix for your issue as well, if you can test when you have time and ping me back
[2013-10-08 21:14:04 -0400] gchristensen: stormerider: today is getting a bit long in the tooth, can you ping me about it tomorrow?
[2013-10-08 21:14:09 -0400] gchristensen: also - did you ever get any sleep?
[2013-10-08 21:14:30 -0400] stormerider: gchristensen: if i remember, i will. yeah, finally did, thanks.
[2013-10-08 21:14:34 -0400] gchristensen: thank you :)
[2013-10-08 21:14:36 -0400] gchristensen: and good
[2013-10-08 21:15:47 -0400] stormerider: anyone around here played with the nagios cookbook and escalations?
[2013-10-08 21:17:24 -0400] gchristensen: I have a bit
[2013-10-08 21:18:31 -0400] stormerider: i still havent managed to figure out how to get them to work everything always alerts every 10m, even when i have a databag item like this: https://gist.github.com/stormerider/5817835
[2013-10-08 22:03:57 -0400] dgarstang2: hadoop cluster with chef. booyah. :)
[2013-10-08 22:06:34 -0400] jblack: So, now I have chef supposedly installing log4php. http://pastebin.com/1WExB9z4.    However, pear list doesn't show log4php  in the list of installed packages.
[2013-10-08 22:06:40 -0400] jblack: Suggestions?
[2013-10-08 22:08:05 -0400] avalarion: Hey ho, is there a way to supress a notification?
[2013-10-08 22:16:58 -0400] jeff_r: what's node['ec2']['idletime'] ?
[2013-10-08 22:59:41 -0400] jmickle: jblack: is the recipe installing through pear? or is it installing the package?
[2013-10-08 22:59:57 -0400] daos: hey all
[2013-10-08 23:00:02 -0400] daos: any chef-vault users around?
[2013-10-08 23:00:39 -0400] jblack: I'm not sure how chef's php_pear does it
[2013-10-08 23:00:42 -0400] jblack: but it used the channel
[2013-10-08 23:02:06 -0400] jmickle: try pecl list
[2013-10-08 23:02:12 -0400] jmickle: jblack: *
[2013-10-08 23:02:29 -0400] jblack: will do
[2013-10-08 23:21:12 -0400] jblack: pecl list is empty
[2013-10-08 23:22:57 -0400] jblack: pecl list-all  gave an error for some missing tmp directories, sudo pecl list-all  listed a pile of package that I didn't expect to have installed
[2013-10-08 23:23:09 -0400] jblack: pardon, the second pecl list-all was prepended with a sudo
[2013-10-08 23:32:28 -0400] scalp42: Mounted Drives: Macintosh HD: Total: 249.80 GB; Free: 36.37 GB
[2013-10-08 23:32:34 -0400] scalp42: woops
[2013-10-08 23:33:21 -0400] jblack: Looks like it's actually installed, and pecl list and pear list are just wrong.
[2013-10-08 23:40:00 -0400] dopacki: Hi. Is there anything similar to the remote_file resource, but which understands IAM roles?

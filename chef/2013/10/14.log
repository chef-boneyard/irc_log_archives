[2013-10-14 01:46:09 -0400] Apsu: 'lo. Having some odd behavior with knife exec. Trying to remove some node attributes with a nodes.transform, but it seems to not work every time. Even when I stick a puts in there to show the node contents, or even the result of .delete
[2013-10-14 01:46:23 -0400] Apsu: Tried an explicit node.save, too
[2013-10-14 01:48:13 -0400] Apsu: My basic approach is: knife exec -E "nodes.transform('roles:blah||roles:blah') { |n| n.normal_attrs.delete('foo') }
[2013-10-14 01:48:27 -0400] Apsu: (it's a top-level attribute)
[2013-10-14 01:48:57 -0400] Apsu: This is chef server 11.0.4, knife 11.0.0
[2013-10-14 02:36:10 -0400] 17SADFNJW: does anyone know if i can use a wikdcard here for an if else inside a template
[2013-10-14 02:36:12 -0400] 17SADFNJW: i.e
[2013-10-14 02:37:13 -0400] 17SADFNJW: <% elsif ["web-new.somedns.com","web3-new.somedns.com","web4-new.somedns.com","web5-new.somedns.com","web6.somedns.com","web7.somedns.com","web8.somedns.com","web9.somedns.com","web10.somedns.com","web11.somedns.com","web12.somedns.com","web13.somedns.com","web14.somedns.com","web15.somedns.com","web16.somedns.com","web17.somedns.com","web18.somedns.com","web19.somedns.com"].include?(node["fqdn"]) %>
[2013-10-14 02:38:43 -0400] 17SADFNJW: hello?
[2013-10-14 02:39:28 -0400] adnichols: 17SADFNJW it's ruby, no you cannot - the .include method looks for a specific entry in the list you provide
[2013-10-14 02:39:43 -0400] adnichols: if you want to use something like .match, then perhaps
[2013-10-14 02:39:44 -0400] Apsu: Having some odd behavior with knife exec. Trying to remove some node attributes with a nodes.transform, but it seems to not work every time. Even when I stick a puts in there to show the node contents, or even the result of .delete
[2013-10-14 02:39:50 -0400] 17SADFNJW: how would you go about handling this to use a wildcard
[2013-10-14 02:40:12 -0400] adnichols: take a look at regex matching in ruby
[2013-10-14 02:41:02 -0400] Apsu: Just made a knife plugin to delete the attributes instead. Same thing. Doesn't seem to do the needful every time.
[2013-10-14 02:41:09 -0400] Apsu: Despite matching.
[2013-10-14 02:45:09 -0400] Apsu: Is there a delay time between a node.save via knife and starting up a chef-client run for the save to be consistently committed?
[2013-10-14 04:23:11 -0400] ikrima: Hey guys, how do you bootstrap provisioning windows machines? Like installing drivers, etc
[2013-10-14 05:14:42 -0400] flaccid: ikrima: there is some resources that can help such as powershell provider
[2013-10-14 08:35:16 -0400] ocholetras: good morning Vietnam!
[2013-10-14 08:35:21 -0400] ocholetras: ^^
[2013-10-14 08:39:26 -0400] aberrios: is there a way to copy a directory recursively from a local dir to another local dir? I've tried remote_directory resource specifying the source as "file:///tmp/dir" and fil
[2013-10-14 08:39:34 -0400] aberrios: and "/tmp/dir"
[2013-10-14 08:39:39 -0400] aberrios: no dice
[2013-10-14 08:39:57 -0400] flaccid: execute resource i guess
[2013-10-14 08:40:18 -0400] aberrios: could do that i suppose
[2013-10-14 08:41:24 -0400] s2r2: aberrios: a symlink won't do? ;)
[2013-10-14 08:44:19 -0400] aberrios: its an idea, thanks s2r2
[2013-10-14 10:45:01 -0400] sc0: is it possible to have test-kitchen install gems on the guest VMs it creates?
[2013-10-14 10:45:26 -0400] sc0: presumably via the .kitchen.yml
[2013-10-14 10:47:24 -0400] sc0: i'm trying to pull in gems that i need for testing
[2013-10-14 11:01:49 -0400] sc0: so it looks like other cookbooks just run a cookbook for testing that installs all them gems it might need to run the tests.
[2013-10-14 11:43:33 -0400] zenloop_: is there a way to run a resource with a retry?  Or better yet if it fails try a different action?
[2013-10-14 12:00:13 -0400] s2r2: zenloop_: "retries" is an attribute of any resource
[2013-10-14 12:00:48 -0400] zenloop_: s2r2: no way! sweet.
[2013-10-14 12:00:49 -0400] s2r2: execute "foo" do retries 10 end; default wait between is 2sec IIRC
[2013-10-14 12:03:40 -0400] zenloop_: s2r2: Good to know.  I have  a situation where mysql is failing to start from the start script because of a innodb recovery that sometimes takes place from restoring an ec2 volume snapshot.  What I have done before using chef is to run mysqladmin to test whether the recovery has finished.  I think I can do something similar with begin and rescue?
[2013-10-14 12:05:06 -0400] s2r2: you could do a blocking "ruby-block" that waits for whatever check you want to be successful...
[2013-10-14 12:05:25 -0400] zenloop_: s2r2: is there an unlimited retry?
[2013-10-14 12:05:38 -0400] s2r2: zenloop_: just use plain ruby ;)
[2013-10-14 12:05:55 -0400] zenloop_: s2r2: do you have an example of the blocking ruby block?  Thanks for the help!
[2013-10-14 12:06:28 -0400] s2r2: zenloop_: https://github.com/cloudbau/chef-xtreemfs/commit/c10d2f2d09cf33bbd2bae614dad14cb127015fbd
[2013-10-14 12:06:51 -0400] s2r2: zenloop_: not your check, but you'll get the idea
[2013-10-14 12:07:49 -0400] zenloop_: s2r2: ahh. ok so just running an until. cool.  I am new to ruby but it is close enough to python that I get the picture.
[2013-10-14 12:08:08 -0400] s2r2: zenloop_: but can't you avoid the situation?  i.e. do something inside the VM before the snapshot is taken?
[2013-10-14 12:10:18 -0400] s2r2: zenloop_: as in the ebs_* recipes of the database cookbook
[2013-10-14 12:10:43 -0400] s2r2: ah, database::snapshot seems to be the place to look at: https://github.com/opscode-cookbooks/database/blob/master/recipes/snapshot.rb
[2013-10-14 12:12:34 -0400] zenloop_: s2r2: Nice.   I completely shut down mysql and unmount the file system before taking the snapshot as I have a read slave just for backups.
[2013-10-14 12:14:18 -0400] zenloop_: s2r2: I use innodb_fast_shutdown 0 as well.
[2013-10-14 12:21:28 -0400] iserko: hello everyone, Chef newbie here ... am I correct in thinking that when you have a recipe with a resource that creates a file, and then a second resource that reads that file (ex. if you use File.read(file)) ... that will never work as Chef renders all recipes beforehand and translates pure Ruby at the start?
[2013-10-14 12:24:43 -0400] arussel: I'm working on a recipe and run in vagrant. It takes a long time to run/debug as vagrant up takes time and I need several recipe to run before.
[2013-10-14 12:25:16 -0400] arussel: is there a way to vagrant ssh and be able to re-run a single recipe ? would it be possible to modify it to fix it and re-run it again ?
[2013-10-14 12:28:07 -0400] s2r2: arussel: chef-solo:  "sudo chef-solo -c /tmp/vagrant-chef-1/solo.rb -j /tmp/vagrant-chef-1/dna.json -ldebug -o RUNME::ONLY"
[2013-10-14 12:30:13 -0400] arussel: s2r2: I don't seem to have a solo.rb (I've got client.rb, dna.json and validation.pem in here)
[2013-10-14 12:30:29 -0400] s2r2: arussel: oh, chef-client, not chef-solo.  :)
[2013-10-14 12:30:42 -0400] s2r2: arussel: chef-client -c client.rb -k validation.pem etc etc
[2013-10-14 12:31:26 -0400] s2r2: arussel: or just "sudo chef-client -o " when you set "chef.provisioning_path = '/etc/chef'" in you Vagrantfile
[2013-10-14 12:33:05 -0400] arussel: s2r2: for what I understand, chef download the recipe locally, if I modify it, would chef-client run it or will it download the one on the server ?
[2013-10-14 12:33:35 -0400] s2r2: arussel: chef-client synchronises the recipes from the server - each time
[2013-10-14 12:34:01 -0400] s2r2: arussel: so the workflow would be update cookbook -> upload cookbook -> run chef-client in vagrant
[2013-10-14 12:34:07 -0400] s2r2: but you can override the run_list
[2013-10-14 12:35:25 -0400] arussel: s2r2: isn't there a way to run the 'local' recipe using plain ruby ?
[2013-10-14 12:35:42 -0400] s2r2: sure, there's chef-shell
[2013-10-14 12:36:14 -0400] s2r2: (and there's chef-apply, but for debugging you might better try chef-shell)
[2013-10-14 12:37:00 -0400] arussel: I'll give chef-shell a shot, thanks for your help
[2013-10-14 12:37:44 -0400] s2r2: you're welcome.  chef-shell -z makes it behave as chef-client does (works best with the provisioning_path setting from above)
[2013-10-14 12:57:15 -0400] fooJBar: iserko: that is not correct, recipes are indeed "compiled" first, so loose Ruby code in your recipe won't have access to a file created by a resource. This is where ruby_block resources come into play. Any code within a ruby_block resource will run during the "convergence" phase, and thus have access to files created by other resources.
[2013-10-14 12:59:23 -0400] fooJBar: iserko: this is also true for only_if, not_if clauses etc. which are evaluated during the convergence phase.
[2013-10-14 12:59:41 -0400] gavala: any know if there is a way to make chef search work in templates?
[2013-10-14 12:59:55 -0400] gavala: *anyone
[2013-10-14 13:00:22 -0400] gavala: i.e. instead of doing the search in the recipe and passing a variable to the template
[2013-10-14 13:01:51 -0400] fooJBar: gavala: I assumed you tried and it didn't work?
[2013-10-14 13:02:01 -0400] gavala: i did and it didn't yeah
[2013-10-14 13:02:16 -0400] gavala: undefined method `search' for #<Chef::Mixin::Template::TemplateContext:0xa14c044>
[2013-10-14 13:02:58 -0400] gavala: seems like an obvious thing someone might want to be able to do to me
[2013-10-14 13:03:15 -0400] gavala: chef 11 btw
[2013-10-14 13:03:57 -0400] fooJBar: gavala: shame, the search method is probably implemented on Recipe. There's possibly a way to inject the search method as a proc variable in your template context...
[2013-10-14 13:04:36 -0400] gavala: yeah I thought it's probably because it's recipe dsl
[2013-10-14 13:05:14 -0400] gavala: i don't know enough about ruby/chef to try your suggestion though, google reveals little
[2013-10-14 13:06:53 -0400] gavala: reason i want to be able to is that once the cookbook is written, i'd rather people don't have to edit the recipe *and* the template to make what should be a simple change to config file
[2013-10-14 13:07:07 -0400] gavala: if it's all the searches are in the template, that isn't the case
[2013-10-14 13:07:27 -0400] fooJBar: gavala: or you could inject/define the search method in the TemplateContext class at the beginning of your recipe. This means all templates would have access to search.
[2013-10-14 13:09:49 -0400] gavala: that sounds like something i would want to do
[2013-10-14 13:09:54 -0400] gavala: i guess i have to do some reading
[2013-10-14 13:12:05 -0400] fooJBar: gavala: as a first step, to check if it would work, you can try calling the fully qualified search method. For example Chef::Search::Query.new.search(<query>)
[2013-10-14 13:15:10 -0400] gavala: hmm that does seem to work
[2013-10-14 13:15:54 -0400] iserko: fooJBar: oh good to know that only_if, not_if guards support that too, anyway I did try as you suggested, but it would seem that I'm not doing it right? The read value is always nil ... see http://pastebin.com/EQzAGw96
[2013-10-14 13:16:04 -0400] gavala: the search itself is happening in a module from a different cookbook though which does other things and it now complaining about missing methods for those other things so I guess I need to fix that
[2013-10-14 13:16:27 -0400] randy2009: Hi, how does chef handle provisioning?
[2013-10-14 13:16:58 -0400] randy2009: is it needed to use openstack as a provisioning layer?
[2013-10-14 13:23:36 -0400] fooJBar: iserko: the message attribute in your http_request is computed at compile time
[2013-10-14 13:24:02 -0400] fooJBar: iserko: to solve this problem you would need to construct the http request programatically in a ruby_block
[2013-10-14 13:24:44 -0400] iserko: fooJBar: well I solved it by just having a bash script running curl ... but this explains why it didn't work with http_request
[2013-10-14 13:24:57 -0400] iserko: fooJBar: thank you very much!
[2013-10-14 13:25:00 -0400] fooJBar: iserko: yw
[2013-10-14 13:36:36 -0400] gavala: fooJBar: can i trouble you for another prod in the right direction?
[2013-10-14 13:36:50 -0400] gavala: undefined method `role?' for #<Array:0x9dcafd8> is what i get now
[2013-10-14 13:37:03 -0400] gavala: we're doing this:
[2013-10-14 13:37:11 -0400] gavala: @all_nodes ||= Chef::Search::Query.new.search(:node, "chef_environment:#{node.chef_environment}")
[2013-10-14 13:37:12 -0400] gavala: role_members = @all_nodes.select { |n| n.role?(role) }
[2013-10-14 13:37:27 -0400] gavala: the search bit works now, in a template
[2013-10-14 13:37:39 -0400] gavala: i'm not really sure where to start
[2013-10-14 13:50:30 -0400] Afterglow: knife backup on our private chef server is writing clients with their public keys set to null, it seems to be populated for open source chef is there a way to dump the keys with knife backup and private chef?
[2013-10-14 13:57:58 -0400] s2r2: Afterglow: I can't really help, but I suppose you could try 'knife download' and 'knife upload'
[2013-10-14 14:02:44 -0400] Afterglow: I dunno even knife client show has the public_key as null
[2013-10-14 14:03:56 -0400] s2r2: oh
[2013-10-14 14:09:37 -0400] pabst^: How do others set the run lists on servers? I can't imagine that everyone manually sets a run list, or a role.
[2013-10-14 14:09:55 -0400] bean__: I usually set it at bootstrap time.
[2013-10-14 14:10:02 -0400] bean__: (which is usually with knife-ec2)
[2013-10-14 14:10:15 -0400] granth: quick question: if I'm inside a recipe and what to access the value of the current cookbook, is that exposed? e.g. log "Hey look, we're currently inside #{cookbook}! executing recipe #{recipe}" ?
[2013-10-14 14:11:17 -0400] fak3r: pabst^: currently in a role, that defines a wrapper cookbook that has all the needed cookbooks listed
[2013-10-14 14:11:19 -0400] bean__: granth: wouldn't you know what cookbook you're in...?
[2013-10-14 14:11:31 -0400] bean__: no real need to do it dynamically
[2013-10-14 14:11:41 -0400] pabst^: heh. Yeah, I wish I had the luxury of ec2 or openstack... These are baremetal services, and the first run gets the proper role and run list because I have a python script that detects what kind of server is running and does chef-client -S <server> -E <environment> -o <role> unfortunately, after that run it doesn't stay with that role
[2013-10-14 14:12:06 -0400] pabst^: fak3r: Right. But when and how do you define the role?
[2013-10-14 14:12:24 -0400] iserko: pabst^, chef-client --json-attributes first-boot.json
[2013-10-14 14:12:57 -0400] iserko: pabst^: then first-boot.json contains : {"run_list": ["role[your_role]"]}
[2013-10-14 14:13:33 -0400] pabst^: iserko: Thanks! I will look up some documentation on how to use first-boot.json, I thought that might be the case, but i wasn't entirely positive, I haven't used first-boot.json in the past because ive been able to use knife-ec2.
[2013-10-14 14:14:22 -0400] iserko: pabst^: good luck, most of the documentation I've found was Windows oriented, but this works for me
[2013-10-14 14:15:41 -0400] pabst^: iserko: ahk! It seems to me that when I am kickstarting the server I can use chef-client --json-attributes first-boot.json to build the first-boot.json file?
[2013-10-14 14:16:44 -0400] iserko: pabst^: well you write into the first-boot.json file which role you're running the server on ... then after the run is __successfully__ completely ... any subsequent chef-client runs will run on their own
[2013-10-14 14:16:56 -0400] iserko: pabst^: you will not need the first-boot.json file after that
[2013-10-14 14:17:21 -0400] pabst^: iserko: So are you manually creating this file?
[2013-10-14 14:17:43 -0400] iserko: pabst^: yes ... I'm using it on EC2, so in my case it's cloud-init, that creates it
[2013-10-14 14:17:48 -0400] pabst^: iserko: instead of sitting here asking silly questions, ill screw with it a bit and see if I can figure it out, thanks for the direction
[2013-10-14 14:17:53 -0400] pabst^: heh.
[2013-10-14 14:19:08 -0400] iserko: pabst^: can't really auto-scale if you have to call knife-ec2 for every instance you're starting
[2013-10-14 14:19:39 -0400] pabst^: iserko: my point exactly, my goal is no touch points between bare-metal to provisioned server
[2013-10-14 14:20:36 -0400] pabst^: iserko: we are dealing strictly with physical here, and I want to be able to have someone turn the server on, it pxe boots and done. my problem is, setting the role becomes a touch point if chef-client -o role doesn't save for future runs
[2013-10-14 14:21:21 -0400] bean__: just need to have /something/ generate the first-boot.json
[2013-10-14 14:21:27 -0400] iserko: exactly
[2013-10-14 14:21:30 -0400] bean__: thats what knife-bootstrap does anyways i beleive
[2013-10-14 14:22:17 -0400] iserko: echo '{"run_list": ["role[my_role]"]}' > /etc/chef/first-boot.json && chef-client --json-attributes /etc/chef/first-boot.json --no-fork --once
[2013-10-14 14:22:18 -0400] thebishop: chef seems to be ignoring steps in my recipe.  i've got include_recipe[apache::mod_rewrite], and it doesn't run.  any idea what can cause this?
[2013-10-14 14:22:41 -0400] pabst^: bean__: yep. probably instead of calling the chef-client -o in my python script that hands off from kickstart to chef, I will add in some logic to the python script to build the first-boot.json file
[2013-10-14 14:22:56 -0400] bean__: likely.
[2013-10-14 14:27:14 -0400] iserko: thebishop: did you try putting include_recipe("apache::mod_write") instead of include_recipe[apache::mod_rewrite] ?
[2013-10-14 14:27:29 -0400] iserko: thebishop: sorry that's mod_rewrite and not mod_write
[2013-10-14 14:28:13 -0400] thebishop: iserko, i'll try it now.  it's actually   include_recipe "apache2::mod_rewrite" currently
[2013-10-14 14:29:28 -0400] thebishop: iserko, i'm wondering if the code is running from somewhere else by mistake.  like from the cookbook code uploaded to the server maybe?  i've tried adding Logging to my recipes, but i never see the output
[2013-10-14 14:30:24 -0400] bean__: thebishop: it will download all cookbooks that are in your metadata to your server.
[2013-10-14 14:30:24 -0400] bean__: so,
[2013-10-14 14:30:39 -0400] bean__: do you have apache cookbook in your metadata of your cookbook?
[2013-10-14 14:31:49 -0400] thebishop: bean__, no.  it's a dependency of another cookbook in my metadata
[2013-10-14 14:32:33 -0400] thebishop: iserko, parenthesis didn't help
[2013-10-14 14:33:07 -0400] thebishop: bean__, i'm using Berkshelf if that makes a difference
[2013-10-14 14:33:16 -0400] bean__: shouldnt
[2013-10-14 14:33:28 -0400] thebishop: bean__, shouldn't use berkshelf?
[2013-10-14 14:33:43 -0400] bean__: no, it shouldnt make a difference
[2013-10-14 14:34:03 -0400] gavala: anyone know why Chef::Search::Query.new.search(:node, "chef_environment:#{node.chef_environment}") and search(:node, "chef_environment:#{node.chef_environment}") return different results?
[2013-10-14 14:35:03 -0400] gavala: the first seems to be a single element array containing the array of search results (node objects) and the second returns an array of search results
[2013-10-14 14:45:19 -0400] thebishop: bean__, i just modified the default recipe of a downloaded cookbook.  commented everything out and added "include_recipe "vim"".  Then added depends vim to the metadata.  when i'm bringing the server up, it uploads vim to my chef server, but once the machine is up, there's no vim.  like i said before, chef seems to be ignoring the code in my recipe
[2013-10-14 14:48:55 -0400] gavala: holy crap it works, thank you thank you so much fooJBar
[2013-10-14 14:54:24 -0400] bean__: thebishop: and you're sure that chef-client is running?
[2013-10-14 15:00:31 -0400] thebishop: bean__, yes.  but i might have figured it out.  it seems like the foldername of the cookbook is actually important.  is that correct?
[2013-10-14 15:00:41 -0400] thebishop: i.e. the folder name must match the configured name of the cookbook
[2013-10-14 15:00:53 -0400] bean__: I believe that is correct
[2013-10-14 15:01:00 -0400] bean__: the metadata is what controls the actual CB name
[2013-10-14 15:01:02 -0400] thebishop: ok, i think that was screwing me
[2013-10-14 15:01:03 -0400] thebishop: right
[2013-10-14 15:01:53 -0400] thebishop: bean__, i was working with the opscode munin cookbook, and made two separate folders "munin-node" and "munin-server"
[2013-10-14 15:02:12 -0400] thebishop: i think that broke it, even though the provisioning would complete without a warning
[2013-10-14 15:02:32 -0400] bean__: ah, thebishop, did you copy it to each or make it a wrapper cookbook?
[2013-10-14 15:03:27 -0400] thebishop: bean__, yes, i copied it to each trying to test them separately in a wrapper cookbook
[2013-10-14 15:08:01 -0400] bean__: thebishop: you likely didnt bump version numbers, etc, then
[2013-10-14 15:08:25 -0400] thebishop: bean__, right.  so then it uses an older version stored elsewhere i presume?
[2013-10-14 15:09:11 -0400] bean__: I'd be inclined to believe so, if you have the old versions on your server.
[2013-10-14 15:09:18 -0400] thebishop: right
[2013-10-14 15:11:35 -0400] fak3r: running chef server, can't hit the webui - fine in qa, same ports running in prod, I can ssh to it trying to figure out the config since it's all in /opt...
[2013-10-14 15:13:01 -0400] pabst^: Can I *NOT* have variables inside of " ? "svn://#{node['company']['svnserver']}/user/operations/branches/#{node['company']['latest-release']}"
[2013-10-14 15:13:42 -0400] gchristensen: pabst^: you can concatenate instead of interpolate
[2013-10-14 15:19:08 -0400] pabst^: gchristensen: im going to smack you for using such large words so early. :) thanks though...
[2013-10-14 15:19:38 -0400] gchristensen: pabst^: I got like 3hrs of sleep this entire weekend... I'm feelin' ya
[2013-10-14 15:20:08 -0400] pabst^: gchristensen: haha :)
[2013-10-14 15:20:19 -0400] pabst^: gchristensen: you obviously function better sleep deprived than I do
[2013-10-14 15:20:27 -0400] gchristensen: tell that to all my root terminals
[2013-10-14 15:20:31 -0400] gchristensen: rm -rf /mysql/data #lolwhut
[2013-10-14 15:20:39 -0400] pabst^: please don't do that
[2013-10-14 15:20:48 -0400] gchristensen: haha yeah
[2013-10-14 15:20:50 -0400] gchristensen: exactly
[2013-10-14 15:21:10 -0400] workmad3: gchristensen: 'knife ssh --sudo "recipes:mysql" "rm -rf /mysql/data"
[2013-10-14 15:21:25 -0400] workmad3: gchristensen: if you're gonna go crazy, at least automate it ;)
[2013-10-14 15:21:42 -0400] gchristensen: you're a brute
[2013-10-14 15:22:15 -0400] workmad3: (thankfully, it looks like knife ssh doesn't support a --sudo)
[2013-10-14 15:22:19 -0400] pabst^: workmad3++
[2013-10-14 15:22:34 -0400] gchristensen: workmad3: not like that, but if you do `sudo rm -rf ...` it'll only prompt for your password once
[2013-10-14 15:22:43 -0400] workmad3: gchristensen: hehe :)
[2013-10-14 15:22:45 -0400] gchristensen: ask me how I know
[2013-10-14 15:22:59 -0400] workmad3: gchristensen: you got disgruntled at a previous employer?
[2013-10-14 15:23:27 -0400] fak3r: pabst^: I'm going for one more, so that'll be 3 on the day for me
[2013-10-14 15:23:30 -0400] gchristensen: current employer* "you did WHAT to how many servers and made them all snowflakes?" knife ssh "*:*" "sudo chef-client"
[2013-10-14 15:23:45 -0400] workmad3: gchristensen: heh
[2013-10-14 15:23:51 -0400] gchristensen: they disabled the chef client
[2013-10-14 15:23:56 -0400] workmad3: gchristensen: that one isn't quite so blatently awful though...
[2013-10-14 15:24:09 -0400] workmad3: gchristensen: if you only want to run chef-client on demand, it kinda makes sense :)
[2013-10-14 15:24:21 -0400] gchristensen: nah, I hsoud really save the "ask me how I know" phrase for interesting stories
[2013-10-14 15:25:03 -0400] workmad3: you mean like how many people discovered that 'rake test' clears out the test database in rails
[2013-10-14 15:25:23 -0400] workmad3: because they'd set up all their database environments to be the same and ran 'rake test' on their prod server
[2013-10-14 15:25:53 -0400] gchristensen: ahahaha they deserve that
[2013-10-14 15:26:29 -0400] workmad3: tried to help one guy in #rubyonrails with that... unfortunately they *really* deserved it... because they also had no backups
[2013-10-14 15:26:47 -0400] gchristensen: there just isn't anything to be done
[2013-10-14 15:27:09 -0400] gchristensen: that was them paying their stupid tax
[2013-10-14 15:27:20 -0400] workmad3: which reminds me... need to start working on my bacula client and server chef resources
[2013-10-14 15:34:55 -0400] pabst^: fak3r: im getting to old for that... im on call this week, which means I won't get any sleep
[2013-10-14 15:35:07 -0400] pabst^: fak3r: by the end of the week ill be a zombie
[2013-10-14 15:35:42 -0400] pabst^: fak3r: I generally stick to 2 cups of coffee a day. Im already 1 lattee and 2 cups in.
[2013-10-14 15:49:31 -0400] aauthor: Hey-o, anyone use chef to install Gems from Git instead of rubygems
[2013-10-14 15:51:00 -0400] j^2: aauthor: nope, omnibus is the way to go
[2013-10-14 15:51:09 -0400] j^2: oh
[2013-10-14 15:51:19 -0400] j^2: sorry miss read what you wrote
[2013-10-14 15:51:25 -0400] j^2: yep, i have
[2013-10-14 15:51:39 -0400] j^2: the source just needs to be the repo iirc
[2013-10-14 15:52:17 -0400] workmad3: it probably needs a gemspec at the root of the git repo too
[2013-10-14 15:52:28 -0400] tmichael: issue with test kitchen. runs my tests successfully, but won't exit when done.  have to ctrl-c to get out.  kitchen v1.0.0.beta.3.  anyone else seen this?
[2013-10-14 15:53:14 -0400] j^2: tmichael: virtualbox?
[2013-10-14 15:53:36 -0400] aauthor: Thanks j^2 and workmad3, I'll give that a go.
[2013-10-14 15:54:05 -0400] tmichael: actually openstack
[2013-10-14 15:54:23 -0400] tmichael: j^2  ^^
[2013-10-14 15:55:04 -0400] j^2: tmichael: hmm... not sure then, i'd say watch the box (console or the like), maybe the host machine is over subscribed and it's trying to "finish everything off" or something?
[2013-10-14 15:55:16 -0400] j^2: that sounds like a host issue not a VM issue
[2013-10-14 15:57:56 -0400] tmichael: yeah j^2, might actually try changing my provider to see if that makes a difference. never seen issue with vagrant or ec2 and this is first time using kitchen with openstack.  thx
[2013-10-14 16:14:21 -0400] otakup0pe: so what are the reasons a not-most-recent cookbook would be showing up in my runlist when it is not pinned in the  environment
[2013-10-14 16:14:57 -0400] otakup0pe: we aren't using chef roles so it's not pinned in there
[2013-10-14 16:21:43 -0400] otakup0pe: oh nm found it pinned in another cookbook
[2013-10-14 16:26:53 -0400] granth: hey
[2013-10-14 16:26:58 -0400] granth: sorry, wrong chat
[2013-10-14 16:45:22 -0400] Toger: Is there a way to set tags in first-boot.json?
[2013-10-14 17:45:46 -0400] thehar: miah: nice profile
[2013-10-14 17:51:08 -0400] russss: so I'm in this apparently common situation where erchef uses 100% CPU and doesn't tell me why. Is there any way I can find out why?
[2013-10-14 17:51:37 -0400] pcn: OK, I have to joke that it's because it knows that we miss ruby
[2013-10-14 17:52:13 -0400] russss: I have already exhausted every joke at erlang's expense. Chef isn't the only erlang app we run here
[2013-10-14 17:52:51 -0400] dgarstang2: I'm having assloads of trouble getting knife download to work.... anyone got an example of how to use that?
[2013-10-14 17:54:21 -0400] sfalcon: russss: so far the only cause we've identified relates to the cookbook version dependency solver. In the current nightly builds, we've replaced that component and believe it resolves the CPU hang issue
[2013-10-14 17:54:25 -0400] ignatz: dgarstang2: like if you're in ~/chef you can do knife download data_bags
[2013-10-14 17:55:04 -0400] ignatz: works by directory
[2013-10-14 18:01:05 -0400] dgarstang2: ignatz: yes, but I need to specify an alternate location so I don't blow away my local copy and the chef_repo_path is ignored in the config file. If I put it on the command line, I get a ruby back trace.
[2013-10-14 18:01:23 -0400] ignatz: ouch.
[2013-10-14 18:02:00 -0400] russss: sfalcon: thanks, I may try that, after backing up...
[2013-10-14 18:02:54 -0400] sfalcon: russss: the ticket where this issue has been tracked is https://tickets.opscode.com/browse/CHEF-3921
[2013-10-14 18:03:01 -0400] russss: sfalcon: would there be any considerations updating from 11.0.8 to the nightly using the deb?
[2013-10-14 18:05:25 -0400] joenuspl: Is there a way to specify platform specific config in a coobook's metadata.rb ?  It seems silly to have to include the apt cookbook in a rhel-only shop.
[2013-10-14 18:07:23 -0400] sfalcon: russss: should be OK for upgrade. After install, reconfigure, then I'd stop/start and reconfigure once more. And of course backups are smart.
[2013-10-14 18:19:38 -0400] walterheck: Hello everyone, I'm looking for a Chef trainer for my company. Based in Europe or Asia, you get to travel while yapping about Chef all day, who doesn't have this as their life goal? :P http://olindata.com/vacancies/chef-trainer-europe
[2013-10-14 18:22:21 -0400] russss: sfalcon: splendid, works much better (by which I mean, I have a useful error). Thanks.
[2013-10-14 18:23:02 -0400] russss: and on that note (upgrading production chef to a nightly build at 7pm on the only day per week I'm working here), I'm off home :P
[2013-10-14 18:23:22 -0400] sfalcon: russss: \m/
[2013-10-14 18:23:49 -0400] sfalcon: Is the error in cookbook deps or elsewhere? If you want help interpreting the erchef logs, paste them somewhere for me or seth@opscode.com
[2013-10-14 18:24:19 -0400] russss: looks like cookbook deps. The error reported by chef-client is quite readable.
[2013-10-14 18:24:29 -0400] sfalcon: word
[2013-10-14 18:25:03 -0400] russss: I'm not surprised - I just berkshelf uploaded a ton of stuff and we have a fair few legacy cookbooks which have less-than-ideal version constraints
[2013-10-14 18:25:58 -0400] russss: and/or custom packages which shadow the name of opscode community packages, though I hope I've just seen the last of those.
[2013-10-14 18:26:41 -0400] cubed_: what would be the best way to determine a private ip address from a template?
[2013-10-14 18:28:56 -0400] legal90: Hallo, chefs! Does anybody provision OS X  machines using chef? I'm looking for a working solution to manage users in OS X 10.8.  The built-in resource 'user' does not support versions earlier than 10.6
[2013-10-14 18:34:56 -0400] clakeb: legal90: I am about to start
[2013-10-14 18:35:18 -0400] clakeb: Would you like a collection of resources I have gathered on the subject?
[2013-10-14 18:40:18 -0400] legal90: 'user', 'java', 'ark' - that's what i've found
[2013-10-14 18:40:55 -0400] dgarstang2: I'm having assloads of trouble getting knife download to work.... anyone got an example of how to use that?
[2013-10-14 18:41:45 -0400] legal90: clakeb: About 'user' provider: there is an old bug about: https://tickets.opscode.com/browse/CHEF-2813?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel
[2013-10-14 18:51:05 -0400] zenloop: quick question.  can chef notify another recipe to run?  That is just another resource right?  I have a template that when changed needs another recipe to run.
[2013-10-14 18:53:29 -0400] legal90: Just use 'include_recipe'
[2013-10-14 18:54:15 -0400] legal90: http://docs.opscode.com/essentials_cookbook_recipes.html#include-recipes
[2013-10-14 18:54:22 -0400] dgarstang2: knife download... seems totally broken
[2013-10-14 18:55:08 -0400] legal90: it works for me
[2013-10-14 18:55:09 -0400] zenloop: oh sweet. can I add the include as an argument to notifies?
[2013-10-14 18:55:47 -0400] dgarstang2: really broken... 'Error: invalid option: --repo-mode'
[2013-10-14 18:57:03 -0400] gchristensen: if you have alfred... you can add a keyword to do like "cr file" to take you to http://docs.opscode.com/resource_file.html
[2013-10-14 18:57:22 -0400] gchristensen: can almost certainly do the same thing with quicksilver or another launcher
[2013-10-14 18:59:21 -0400] legal90: zenloop,  ah, about notifications  I'm not shure, but is is not good usecase. Recipes is a "set of instructions", not repeatable resource
[2013-10-14 18:59:38 -0400] zenloop: makes sense.
[2013-10-14 19:01:00 -0400] legal90: dgarstang2: do you run 'knife download' in your chef-repo directory?
[2013-10-14 19:05:16 -0400] noahmehl: hey all, I'm a little familiar with chef-solo with Vagrant.  I'm trying to setup my first chef open source server
[2013-10-14 19:05:21 -0400] noahmehl: I've got the server installed
[2013-10-14 19:05:25 -0400] noahmehl: I've got the workstation installed
[2013-10-14 19:05:30 -0400] noahmehl: and I have a node bootstrapped
[2013-10-14 19:05:37 -0400] noahmehl: but, I can't figure out how I add cookbooks to my chef-server
[2013-10-14 19:05:48 -0400] noahmehl: nor, can I find the docs on what I need
[2013-10-14 19:05:54 -0400] noahmehl: at least, I think that's the next step....
[2013-10-14 19:05:56 -0400] jmartin: noahmehl: knife
[2013-10-14 19:06:08 -0400] noahmehl: jmartin: I tried, "knife cookbook download apt"
[2013-10-14 19:06:14 -0400] noahmehl: and I got an error
[2013-10-14 19:06:16 -0400] jmartin: noahmehl: http://docs.opscode.com/knife_cookbook.html
[2013-10-14 19:06:23 -0400] jmartin: are you trying to download the cookbook locally
[2013-10-14 19:06:29 -0400] jmartin: or upload one of yours to the chef server
[2013-10-14 19:06:41 -0400] noahmehl: jmartin: I want to put a community cookbook on the server
[2013-10-14 19:06:52 -0400] jmartin: noahmehl: do you have a local copy of it already?
[2013-10-14 19:07:02 -0400] noahmehl: jmartin: no
[2013-10-14 19:07:06 -0400] noahmehl: maybe that's where I'm confused
[2013-10-14 19:07:24 -0400] techminer: Is there a reason that running chef-client from the CLI synchronizes the cookbooks..but chef-client running as a daemon does not?
[2013-10-14 19:07:36 -0400] jmartin: noahmehl: right, you need to get a local copy in your local chef-repo
[2013-10-14 19:07:40 -0400] jmartin: then you can upload it to the server
[2013-10-14 19:07:42 -0400] noahmehl: jmartin: ok
[2013-10-14 19:07:42 -0400] jmartin: http://docs.opscode.com/knife_cookbook_site.html
[2013-10-14 19:07:48 -0400] jmartin: is how you can grab it from the community site
[2013-10-14 19:07:49 -0400] noahmehl: qq, do people use berkshelf for this?
[2013-10-14 19:07:51 -0400] legal90: noahmehl, Yes, you had to upload cookbooks to your server before you can use it
[2013-10-14 19:07:54 -0400] jmartin: noahmehl: yes
[2013-10-14 19:08:02 -0400] noahmehl: jmartin: ok
[2013-10-14 19:08:12 -0400] noahmehl: so, I used the scripted chef-server install
[2013-10-14 19:08:19 -0400] noahmehl: do I just find the ruby binary in opt
[2013-10-14 19:08:23 -0400] noahmehl: and use that for berkshelf
[2013-10-14 19:08:24 -0400] noahmehl: ?
[2013-10-14 19:08:48 -0400] noahmehl: jmartin: thanks btw
[2013-10-14 19:08:54 -0400] jmartin: noahmehl: you are going to want to do this from your workstation
[2013-10-14 19:08:58 -0400] jmartin: not the server itself
[2013-10-14 19:09:12 -0400] noahmehl: jmartin: I have the workstation installed on the server
[2013-10-14 19:09:13 -0400] noahmehl: is that bad?
[2013-10-14 19:09:56 -0400] jmartin: noahmehl: its not 'bad' per se but i think you might also benefit from www.learnchef.com, it has a basic rundown of working with chef-server iirc
[2013-10-14 19:10:25 -0400] legal90: dgarstang2, you was right. There is a bug in 'knife download' - option 'repo-mode' is invalid (or was previously deprecated)
[2013-10-14 19:11:19 -0400] dgarstang2: legal90: Seems like --chef-repo-path is also broken
[2013-10-14 19:11:32 -0400] noahmehl: jmartin: thanks
[2013-10-14 19:12:20 -0400] dgarstang2: knife download also tries to write to /var/chef/environments and the fails because I'm not running as root
[2013-10-14 19:12:53 -0400] legal90: noahmehl, try to learn berkshelf by this manual: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2013-10-14 19:12:54 -0400] dgarstang2: I just wanna see what's on my server. :(
[2013-10-14 19:13:21 -0400] dgarstang2: ALSO.... knife download doesn't seem to download anything in /
[2013-10-14 19:14:20 -0400] legal90: so, 'knife download ./data_bags' is working fine
[2013-10-14 19:15:23 -0400] legal90: also, cookbooks are downloaded too
[2013-10-14 19:16:04 -0400] legal90: (But I run it in my local chef-repo directory)
[2013-10-14 19:16:22 -0400] dgarstang2: legal90: not looking for cookbooks. We've split our cookbooks into different repos. We're still managing the main repo (roles, data bags etc)... and versioning with berkshelf.
[2013-10-14 19:16:42 -0400] dgarstang2: i just wanna see wathe the VERSION file has in /
[2013-10-14 19:16:51 -0400] techminer: What would cause chef-client to skip the cookbook synchronize step when running as a service?
[2013-10-14 19:16:57 -0400] dgarstang2: altho... hmmm...
[2013-10-14 19:18:19 -0400] noahmehl: jmartin: I figured it out.  Thanks for your help!!
[2013-10-14 19:18:28 -0400] jmartin: noahmehl: no problem
[2013-10-14 19:19:33 -0400] dgarstang2: so, I'd basically say that knife download is unusable.
[2013-10-14 19:22:08 -0400] legal90: dgarstang2, if you want versions of cookbook, try 'knife cookbook show <cookbook_name>'
[2013-10-14 19:23:10 -0400] legal90: It will show all cookbook versions, which available on your chef server
[2013-10-14 19:23:58 -0400] dgarstang2: legal90: This isn't for a cookbook. It's for roles etc
[2013-10-14 19:24:59 -0400] legal90: Ok, sorry. I did't use it
[2013-10-14 19:26:25 -0400] legal90: I use 'wrapper cookbook' pattern instead roles because roles are not supporting the versioning.
[2013-10-14 19:26:29 -0400] noahmehl: jmartin: one more questoin
[2013-10-14 19:26:32 -0400] noahmehl: *question
[2013-10-14 19:26:35 -0400] noahmehl: I've bootstrapped a node
[2013-10-14 19:26:41 -0400] noahmehl: how does the chef-client run again?
[2013-10-14 19:26:50 -0400] noahmehl: is it a scheduled job on the node?
[2013-10-14 19:26:57 -0400] noahmehl: or does the chef-server kick it off?
[2013-10-14 19:26:57 -0400] jmartin: noahmehl: not unless you tell it to
[2013-10-14 19:27:01 -0400] noahmehl: or is it always manual?
[2013-10-14 19:27:22 -0400] jmartin: noahmehl: check out https://github.com/opscode-cookbooks/chef-client
[2013-10-14 19:27:41 -0400] jmartin: you can use that cookbook to set it up to do runs based on cron, run it as a service etc
[2013-10-14 19:27:52 -0400] noahmehl: jmartin: sweet
[2013-10-14 19:27:53 -0400] noahmehl: thanks
[2013-10-14 19:28:02 -0400] noahmehl: it seems weird to me that it's not automatic...?
[2013-10-14 19:29:01 -0400] noahmehl: jmartin: thanks for all of your help!
[2013-10-14 19:29:28 -0400] legal90: noahmehl, no, it is not automatic initially
[2013-10-14 19:29:39 -0400] noahmehl: legal90: ok
[2013-10-14 19:30:02 -0400] noahmehl: this cookbook is awesome!
[2013-10-14 19:30:06 -0400] noahmehl: thanks everyone!
[2013-10-14 19:52:02 -0400] ignatz: I can't seem to find a way to install the chef-client service (or any service) on windows with the delayed start option. Should I just give up and put in a script, or does someone know a way to do this?
[2013-10-14 19:54:16 -0400] ignatz: there doesn't seem to be a constant for that in the Ruby Win32 library even. It's weird.
[2013-10-14 20:29:03 -0400] techminer: Why would a node not sync the latest version of a cookbook available from the chef-server?  I have nodes not doing this.and it's getting annoying :P.  It will sync and converge the latest versions if I run chef-client from the command line, but not when it's running as a service.
[2013-10-14 20:29:39 -0400] phantasm66: are default[:some][:nested_attribute] available to custom libraries (ie: something in the libraries/ directory in a cookbook?
[2013-10-14 20:30:40 -0400] martinisoft: phantasm66: should be available as a computed attribute via the node object.
[2013-10-14 20:30:45 -0400] phantasm66: i am getting ERROR: NameError: undefined local variable or method `node' when i reference node[:some][:nested_attribute] in a libraries/helpers.rb i created
[2013-10-14 20:31:33 -0400] martinisoft: phantasm66: hmm, how is your class written for the library?
[2013-10-14 20:34:54 -0400] phantasm66: @martinisoft: https://gist.github.com/phantasm66/fecb7e3509f646defbad
[2013-10-14 20:35:08 -0400] phantasm66: thats the attributes and libraries
[2013-10-14 20:36:02 -0400] martinisoft: phantasm66: what about the recipe using it?
[2013-10-14 20:36:38 -0400] phantasm66: it's an WLRP that uses it
[2013-10-14 20:36:41 -0400] martinisoft: phantasm66: the doc on it is a pretty good: http://docs.opscode.com/essentials_cookbook_libraries.html
[2013-10-14 20:36:41 -0400] phantasm66: LWRP
[2013-10-14 20:36:51 -0400] jmickle: phantasm66: its better to pass it in as resource object
[2013-10-14 20:36:59 -0400] jmickle: then when you call the helper
[2013-10-14 20:37:05 -0400] jmickle: you can have options and pass in the node options
[2013-10-14 20:37:16 -0400] phantasm66: let me post my providers
[2013-10-14 20:37:18 -0400] jmickle: and inside of the class initiator then you can use new_resource
[2013-10-14 20:37:47 -0400] jmickle: phantasm66: http://docs.opscode.com/lwrp_custom_provider.html
[2013-10-14 20:38:20 -0400] phantasm66: yes. i have read those docs
[2013-10-14 20:38:38 -0400] phantasm66: what did you mean: " its better to pass it in as resource object"
[2013-10-14 20:38:44 -0400] phantasm66: better to pass *what* in?
[2013-10-14 20:39:23 -0400] phantasm66: these helper libraries are being referenced in a provider rb and not a recipe
[2013-10-14 20:41:05 -0400] martinisoft: phantasm66: oh right, it would be better not to directly depend on attributes in the library portion, just treat them as passed variables.
[2013-10-14 20:41:31 -0400] phantasm66: the attributes i am using (or wanting to use) in the library helper are also referenced in a recipe, so i need them to be centrally located "attributes"
[2013-10-14 20:45:47 -0400] phantasm66: i have access to them fine in a recipe
[2013-10-14 20:45:47 -0400] phantasm66: but cannot seem to access them in a node object from a libraries rb
[2013-10-14 20:45:48 -0400] phantasm66: i imagine that's by design
[2013-10-14 20:49:16 -0400] phantasm66: @martinisoft: you said this: "it would be better not to directly depend on attributes in the library portion, just treat them as passed variables"
[2013-10-14 20:49:17 -0400] phantasm66: can you give me an example?
[2013-10-14 20:50:06 -0400] phantasm66: crap: i have to close my laptop and catch a train
[2013-10-14 20:51:49 -0400] phantasm66: I'll ask again later on :)
[2013-10-14 20:52:38 -0400] martinisoft: phantasm66: Application cookbook provides a library that takes in attributes for their LWRP https://github.com/opscode-cookbooks/application/blob/master/libraries/default.rb
[2013-10-14 20:53:03 -0400] phantasm66: sweet, thanks!
[2013-10-14 20:53:04 -0400] martinisoft: phantasm66: its not directly attribute driven via an attributes file
[2013-10-14 20:57:20 -0400] riceandbeans: how does chef support of windows and os x compare to that of puppet?
[2013-10-14 21:13:35 -0400] sn0wb1rd: I accidentally removed my validator on my organization and followed the procedure here (http://wiki.opscode.com/x/LoRuAQ) and recreated the validator. But still when I use knife to bootstrap a new node, I get this error: Your validation client (rs-cookbooks-ci-validator) may have misconfigured authorization permissions.
[2013-10-14 21:13:50 -0400] sn0wb1rd: Has anybody experienced this issue?
[2013-10-14 21:15:05 -0400] ignatz: eh the heck with it I'll just write a registry key.
[2013-10-14 21:17:17 -0400] sn0wb1rd: I was doing the edit-permissions on the validator and not the using the sub-tab
[2013-10-14 21:17:22 -0400] sn0wb1rd: I got that fixed
[2013-10-14 21:18:07 -0400] douglaswth: sn0wb1rd: glad we could help ;P
[2013-10-14 21:35:46 -0400] techminer: can I use knife search to find all nodes that have a cookbook X below revision Y?
[2013-10-14 21:38:39 -0400] techminer: I've got some rogue nodes running old cookbook revisions.and I'm looking for an easy way to identify them.
[2013-10-14 21:43:53 -0400] silk: knife ssh + grep ?
[2013-10-14 21:44:54 -0400] ignatz: fwiw this is what I did to get around chef-client on windows lack of delayed start option: https://gist.github.com/gl-conradheiney/6982714
[2013-10-14 21:48:07 -0400] WilliamPietri: Hi! In my recipes, I want to record various directories as needing to be backed up, and then have my backup automatically get all those. Is chef attributes the right tool for that?
[2013-10-14 22:07:30 -0400] techminer: silk:  thanks that was what I needed
[2013-10-14 22:08:19 -0400] azret: can someone elaborate on how the default.rb is read by chef? does it follow the includes in order or does it do it at random?
[2013-10-14 22:08:29 -0400] lionel_: Alphabetical
[2013-10-14 22:08:41 -0400] azret: that makes sense
[2013-10-14 22:08:42 -0400] lionel_: Oh wait, are you talking about default.rb recipe or attributes?
[2013-10-14 22:08:49 -0400] azret: the default.rb recipe
[2013-10-14 22:08:53 -0400] azret: when i say include_recipe
[2013-10-14 22:08:59 -0400] azret: it does that alphabetically?
[2013-10-14 22:09:03 -0400] lionel_: Well, the chef run isn't exactly linear.
[2013-10-14 22:09:19 -0400] lionel_: (the files inside the attributes/ directory are read in alphabetically i believe by file name)
[2013-10-14 22:09:46 -0400] azret: yea I'm noticing and its definitely causing me some issues, i need yum repos installed before packages get installed but its not doing what i ask, so i needed to know how it was read
[2013-10-14 22:10:30 -0400] lionel_: http://erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/ Erik describes how chef works pretty well here.
[2013-10-14 22:10:53 -0400] jtimberman: in chef 11+ the attributes files arel oaded in run list order
[2013-10-14 22:11:31 -0400] lionel_: Oh, good to know
[2013-10-14 22:13:16 -0400] lionel_: What about when it reads the attribute files inside one cookbook in the run list? Are those done alphabetically? Like for example if you have attribute files in a cookbook: a.rb, b.rb, c.rb. Are they loaded in a,b,c?
[2013-10-14 22:14:38 -0400] azret: so with this http://pastebin.com/xTThZ1vc whats the protocol here?>
[2013-10-14 22:14:56 -0400] azret: how do I get yum to run first? just a run list?
[2013-10-14 22:15:46 -0400] jtimberman: lionel_: http://docs.opscode.com/breaking_changes_chef_11.html#non-recipe-file-evaluation-includes-dependencies
[2013-10-14 22:17:49 -0400] azret: maybe just a run list
[2013-10-14 22:18:24 -0400] lionel_: Are those yum recipes that you are including from the community yum cookbook?
[2013-10-14 22:18:55 -0400] azret: yes
[2013-10-14 22:19:59 -0400] azret: everything here was working until splitting off the last two recipes
[2013-10-14 22:21:04 -0400] lionel_: Those last two includes, do they reference resources in the recipes preceding it?
[2013-10-14 22:22:18 -0400] lionel_: With notifies, subscribes, etc
[2013-10-14 22:22:56 -0400] azret: yes, in the database.rb include_recipe "mysql::percona_repo" which calls for yum::default
[2013-10-14 22:23:30 -0400] azret: this is all pretty standard its just doing it in the wrong order which i can't understand
[2013-10-14 22:39:14 -0400] josephholsten: anyone know how the magik provider selection happens? like where it decides to use the apt vs yum package provider, or the upstart vs sysvinit vs launchd service provider?
[2013-10-14 22:40:55 -0400] josephholsten: like I see no linkage between https://github.com/opscode/chef/blob/master/lib/chef/provider/service.rb and https://github.com/opscode/chef/blob/master/lib/chef/provider/service/upstart.rb
[2013-10-14 22:42:06 -0400] josephholsten: oh, looks like this is it: https://github.com/opscode/chef/blob/master/lib/chef/platform/provider_mapping.rb
[2013-10-14 22:43:28 -0400] josephholsten: now to figure out the way to override that in different environments
[2013-10-14 22:44:39 -0400] josephholsten: though, when your team is writing their own user provider things might be getting funky
[2013-10-14 22:52:19 -0400] hackminx: hi
[2013-10-14 22:52:40 -0400] redondos: I have these two directories: "/default/bin" and "files/foo/bin". if the recipe "recipes/default.rb" has remote_directory "/root/bin", it copies default/bin to the server's /root/bin. how can I copy files/foo/bin to root/bin from recipes/foo.rb?
[2013-10-14 22:52:48 -0400] hackminx: I get this error when I try thr knife bootstrap command
[2013-10-14 22:52:53 -0400] redondos: er first one is "files/default/bin"
[2013-10-14 22:53:04 -0400] hackminx: could anyone please help me?
[2013-10-14 22:53:36 -0400] hackminx: The error is : Network Error: Connection refused - connect(2) Check your knife configuration and network settings
[2013-10-14 22:54:45 -0400] redondos: well, can you connect, hackminx?
[2013-10-14 22:55:20 -0400] rdobbs: Hi, I was wondering if anybody is using the application_java cookbook? It seems somewhat unfunctional when using the RemoteFileDeploy resource
[2013-10-14 22:57:33 -0400] hackminx: yes I am able to redondos
[2013-10-14 22:58:46 -0400] hackminx: but it is not identifying my recipes
[2013-10-14 23:02:57 -0400] hackminx: you there redondos?
[2013-10-14 23:03:12 -0400] redondos: I think you can't connect
[2013-10-14 23:03:26 -0400] redondos: perhaps your knife.rb?
[2013-10-14 23:03:39 -0400] hackminx: it logs me in when i ssh
[2013-10-14 23:27:32 -0400] redondos: I should rephrase my question: how can I copy to the server a file in COOKBOOK_NAME/files/foo/ ?
[2013-10-14 23:28:00 -0400] redondos: does it _always_ have to be "default" or the platform?
[2013-10-14 23:34:54 -0400] stormerider: defalt, platform, or hostname, iirc there's a whole section of the doc on the naming setup for files/templates
[2013-10-14 23:37:12 -0400] WilliamPietri: Is there some way with Test Kitchen that I can tell in my recipes whether I'm running in Test Kitchen or for real?
[2013-10-14 23:55:01 -0400] gchristensen: WilliamPietri: generally if you change your code if it is under test, you're doing something sketch
[2013-10-14 23:55:30 -0400] WilliamPietri: gchristensen: Definitely. In this case, though, I need to install some libraries for my tests, and I don't want to do that to my production machines.
[2013-10-14 23:58:02 -0400] gchristensen: WilliamPietri: perhaps you could add a recipe called test_libraries which does that, and your test kitchen runner includes it?

[2013-10-01 00:13:29 -0400] Majost: coderanger: do you still use your fork of the database cookbook?
[2013-10-01 00:13:42 -0400] coderanger: Majost: No, that was a failed experiment
[2013-10-01 00:14:49 -0400] Majost: Mind if I clode COOK-1569?
[2013-10-01 00:14:53 -0400] Majost: close too
[2013-10-01 00:15:03 -0400] coderanger: looking, sec
[2013-10-01 00:15:09 -0400] coderanger: (on slow net)
[2013-10-01 00:16:02 -0400] coderanger: Yeah, can nuke.
[2013-10-01 00:19:07 -0400] Majost: The cookbook still needs love... one issue I want to fix is the exists? methods which exist in both user and db provider libs....
[2013-10-01 00:19:16 -0400] coderanger: Some day I need to loop back on the RPs schisamo made
[2013-10-01 00:19:26 -0400] coderanger: Yeah
[2013-10-01 00:19:31 -0400] coderanger: they need some love all around
[2013-10-01 00:19:36 -0400] Majost: hehe
[2013-10-01 00:20:02 -0400] Majost: I gotta head out; catch ya later.
[2013-10-01 00:20:07 -0400] coderanger: lat0rz
[2013-10-01 00:35:34 -0400] josephholsten: timsmith: more tunables in the default host template (incl check_command): https://github.com/opscode-cookbooks/nagios/pull/194
[2013-10-01 00:36:34 -0400] timsmith: I saw
[2013-10-01 00:36:37 -0400] timsmith: I'll take a look
[2013-10-01 00:37:33 -0400] josephholsten: <3
[2013-10-01 00:45:26 -0400] josephholsten: oh, I also finally fixed & rebased ye olde pagerduty patch https://github.com/opscode-cookbooks/nagios/pull/44
[2013-10-01 00:46:23 -0400] josephholsten: aww, didn't pass rubycop
[2013-10-01 00:57:17 -0400] josephho_: yay, it passes now
[2013-10-01 01:09:41 -0400] dysinger: 'allo
[2013-10-01 01:09:45 -0400] dysinger: hey I got an "advanced" question for you:
[2013-10-01 01:10:03 -0400] dysinger: Is there anyway to override resources from another cookbook & change the action attribute?
[2013-10-01 01:10:19 -0400] dysinger: because forking a cookbook & hacking it for this just seems so heavy
[2013-10-01 01:10:57 -0400] miah: dysinger: yes
[2013-10-01 01:11:06 -0400] ElbowMacaroni: you could use override_attributes in your environment or role definition
[2013-10-01 01:11:22 -0400] miah: dysinger: chef-rewind is probably the easiest without going too deep
[2013-10-01 01:11:26 -0400] dysinger: or as an alternative: "can I redeclare the ressource somewhere else it will override?"
[2013-10-01 01:11:32 -0400] dysinger: Yeah I've heard of rewind
[2013-10-01 01:11:53 -0400] miah: well, when you declare the resource in a recipe you end up with multiple objects in the runqueue with the same name
[2013-10-01 01:12:00 -0400] miah: but with different actions or possible attributes
[2013-10-01 01:12:05 -0400] dysinger: y
[2013-10-01 01:12:16 -0400] dysinger: dang I wish chef was more extensible in this respect
[2013-10-01 01:12:19 -0400] miah: ya, so. this is why i say cookbook development is hella flawed
[2013-10-01 01:12:23 -0400] miah: dysinger: oh. hold.
[2013-10-01 01:13:02 -0400] miah: https://github.com/miah/chef_logstash/blob/master/libraries/provider_logstash_config.rb#L67-L69
[2013-10-01 01:13:11 -0400] miah: write libraries and talk to the objects directly
[2013-10-01 01:13:12 -0400] josephho_: +1 chef-rewind
[2013-10-01 01:13:14 -0400] miah: but you have to look them up
[2013-10-01 01:13:34 -0400] miah: chef recipes are werird though because they are just a way to add things to the resource collection and run_queue
[2013-10-01 01:13:46 -0400] miah: but people try to use them to do imperative programming
[2013-10-01 01:14:06 -0400] miah: but the reality is you're dealing with a run_queue so you can't really do too much actiony stuff ala (do this, then do that)
[2013-10-01 01:14:15 -0400] miah: each resource is kinda oblivious to the other resources
[2013-10-01 01:14:21 -0400] miah: unless you teach it about the other resources
[2013-10-01 01:14:48 -0400] miah: https://github.com/miah/chef_logstash/blob/master/libraries/helpers.rb#L30-L43
[2013-10-01 01:15:31 -0400] miah: chef is cool when you combine it with oop. but i dont see many people doing the things i do
[2013-10-01 01:15:44 -0400] josephho_: miah: that reminds me of http://www.infrastructures.org/papers/turing/turing.html
[2013-10-01 01:15:56 -0400] burtlo: Is there a good way to dynamically define resources based on content pulled down by another resource?
[2013-10-01 01:16:13 -0400] miah: burtlo: out of the box not really
[2013-10-01 01:16:33 -0400] josephho_: the problems with imperative are one of the best arguments for chef (+ direct access to the object model)
[2013-10-01 01:16:39 -0400] burtlo: I'm git pulling down a repo and then one of the files there has some data to drive the content creation of databases and users
[2013-10-01 01:16:45 -0400] miah: well, chef recipes are not imperative either
[2013-10-01 01:16:48 -0400] miah: they are declarative
[2013-10-01 01:16:55 -0400] burtlo: Thanks @miah
[2013-10-01 01:17:16 -0400] miah: which is why i always find people writing test harnesses that check that chef did what it was supposed to funny
[2013-10-01 01:17:28 -0400] miah: because you're writing an assertion to verify an assertion
[2013-10-01 01:17:29 -0400] burtlo: So I guess I would just need to move all the code to a script and execute the script and let the script figure out the data
[2013-10-01 01:17:36 -0400] josephho_: so amazingly true
[2013-10-01 01:17:38 -0400] miah: burtlo: or write ruby
[2013-10-01 01:17:57 -0400] miah: no reason it has to be a script and no reason your resource can't create its own resource collection or do the magic you need
[2013-10-01 01:18:05 -0400] miah: its just not 'trivial'
[2013-10-01 01:18:14 -0400] burtlo: A resource can create a resource collection?
[2013-10-01 01:18:29 -0400] miah: a resource can do whatever you make it do
[2013-10-01 01:18:41 -0400] miah: lwrp's have the concept of 'inline_resources'
[2013-10-01 01:19:07 -0400] miah: http://docs.opscode.com/lwrp_common_inline_compile.html
[2013-10-01 01:19:19 -0400] josephho_: the best tests verify that load_current_resource identifies all states, and that each action can correctly change state. recipe/attribute tests tend to be worthless.
[2013-10-01 01:20:03 -0400] josephho_: dysinger: mind sharing the particular cookbook/problem you're working on?
[2013-10-01 01:20:10 -0400] miah: load_current_resource is still a little bit 'black magic' to me as far as what it is supposed to do or how you are supposed to correctly support it
[2013-10-01 01:20:16 -0400] burtlo: So would I move the code opening the file and iterating over the content (that creates resources) into the block of the resource it is dependent on?
[2013-10-01 01:20:45 -0400] miah: burtlo: possibly
[2013-10-01 01:21:09 -0400] dysinger: burtlo: we'd like to use this cookbook https://github.com/damm/diamond/blob/master/providers/configure.rb but notify restart on the runit service if and only if the template for the config file changes
[2013-10-01 01:21:27 -0400] dysinger: I'm just tired of forking for small changes
[2013-10-01 01:21:57 -0400] miah: ya
[2013-10-01 01:21:59 -0400] burtlo: Sorry for the dumb questions. I've never created a lwrp
[2013-10-01 01:22:07 -0400] miah: this is why i keep telling people to write libraries and not recipes
[2013-10-01 01:22:08 -0400] dysinger: going to try chef-rewind
[2013-10-01 01:22:12 -0400] miah: but few are catching on :/
[2013-10-01 01:22:27 -0400] miah: burtlo: its just ruby
[2013-10-01 01:22:40 -0400] miah: if you knows ruby its not too much of a stretch. there are plenty of examples out there.
[2013-10-01 01:22:55 -0400] miah: i have several lwrp cooks in my github and a few subclassed rp's
[2013-10-01 01:23:27 -0400] burtlo: Heh. I know ruby quite well. :)
[2013-10-01 01:24:27 -0400] burtlo: So the process would be to create a lwrp. That would let me actually move the file opening and iteration code to be delayed
[2013-10-01 01:25:50 -0400] burtlo: I think I see what's going on with the example you gave me.
[2013-10-01 01:25:56 -0400] burtlo: I'll try it out in the cookbook
[2013-10-01 01:28:06 -0400] miah: resources are basically just your object with attributes, and possibly some reader methods
[2013-10-01 01:28:47 -0400] miah: resources call on providers to invoke a specific action on their attributes and put the resource into the declared state
[2013-10-01 01:28:55 -0400] miah: so, you'll have a resource and a provider
[2013-10-01 01:34:40 -0400] iverson0881: hey did overrides just break
[2013-10-01 01:34:43 -0400] iverson0881: on hosted chef
[2013-10-01 01:35:02 -0400] iverson0881: a bunch of cookbooks and servers stopped working due to overrides not being set anymore
[2013-10-01 01:41:53 -0400] burtlo: Thanks miah
[2013-10-01 01:42:05 -0400] burtlo: I may have thrown something together that is working.
[2013-10-01 01:43:01 -0400] miah: awesome
[2013-10-01 01:53:58 -0400] maraca: any idea why knife ssh is return "Net::SSH::Disconnect: connection closed by remote host" when running a search query with "role:*" ?
[2013-10-01 01:54:11 -0400] maraca: when running with a smaller set of instances I have no problem
[2013-10-01 01:54:19 -0400] maraca: role:* is only about ~20 machines
[2013-10-01 02:15:36 -0400] burtlo: miah thanks again for the crash course into LWRPs.
[2013-10-01 02:15:59 -0400] burtlo: I got my script working.
[2013-10-01 02:33:16 -0400] Glace: Hi everyone, I was wondering how you manage depencies properly with Berkshelf.. when you have multiple applications.. so multiple application cookbooks with different lock files.. on the same project.. and a chef server
[2013-10-01 02:33:32 -0400] Glace: Do you have to create one environment by application in that case?
[2013-10-01 02:34:37 -0400] Glace: just not sure how to manage the environment freezes in that case
[2013-10-01 04:58:27 -0400] jag: helo everyone - my chef-client run throws a resource not found exception when using application_java , can any one point whats wrong !! Here is a gist of the error
[2013-10-01 04:58:28 -0400] jag: https://gist.github.com/jagshub/6774041
[2013-10-01 05:09:36 -0400] mmzyk: jag Is this your cookbook the stack trace is referencing? /var/chef/cache/cookbooks/application/resources/default.rb:126
[2013-10-01 05:09:49 -0400] mmzyk: What does line 126 look like?
[2013-10-01 06:05:19 -0400] jag: mmzk: sorry i was away , its opscode cookbook "application"
[2013-10-01 06:05:51 -0400] jag: mmzk: ln :126   raise NameError, "No resource found for #{name}. Tried #{lookup_path.join(', ')}" unless resource
[2013-10-01 06:09:44 -0400] mmzyk: okay, I'll look at the cookbook and see if anything jumps out at me.
[2013-10-01 06:13:12 -0400] mmzyk: jag When did you download these cookbooks, by the way? And have they worked before?
[2013-10-01 06:14:01 -0400] jag: mmzk: i downloaded a day back.. this is the first time, iam trying to get a war deployed using applocation_java
[2013-10-01 06:14:26 -0400] jag: mmzk: i created a cookbook that depends on applocation_java
[2013-10-01 06:15:07 -0400] jag: mmzk: iam having trouble when i use the resources from "application_java" in my cookbooks default recipe
[2013-10-01 06:15:23 -0400] mmzyk: okay, I was just curious since these cookbooks just got an update pushed today.
[2013-10-01 06:15:42 -0400] mmzyk: I was wondering if maybe a bug had slipped through, but that doesn't seem to be the case.
[2013-10-01 06:16:21 -0400] jag: mmzyk: oh, ok . Can you suggest anything by lookin at the recipe ..i have posted
[2013-10-01 06:17:12 -0400] mmzyk: yeah, I'm looking through it to see if I see anything.
[2013-10-01 06:18:09 -0400] jag: mmzyk: also my recipe is https://gist.github.com/jagshub/6774506
[2013-10-01 06:24:46 -0400] mmzyk: jag java_webapp is the provider in question right? I believe it's b/c you wrapped it in quotes, so chef sees that as a string and isn't finding it. Could be wrong, but that might be it.
[2013-10-01 06:28:37 -0400] jag: mmzyk: i just tried that quotes in the process of getting it to work.. but i did not have the quotes before and still same error
[2013-10-01 06:37:14 -0400] mmzyk: jag Is that your entire recipe? I realized that gist you provided doesn't have an depends lines in it pointing to the applicaiton_java cookbook.
[2013-10-01 06:39:57 -0400] mmzyk: well, that should be in your metadata at least.
[2013-10-01 06:40:34 -0400] mmzyk: See if the read me here https://github.com/opscode-cookbooks/application can point you to any steps you might have missed.
[2013-10-01 06:40:41 -0400] mmzyk: I've got to head out, but hopefully that helps.
[2013-10-01 08:22:49 -0400] jag: hi, iam not able to use application_java LWRP in my cookbook , i get FATAL: NameError: No resource found for java_webapp. Any pointers pls ?
[2013-10-01 08:23:06 -0400] jag: i have the depends "application_java" in metadata
[2013-10-01 08:23:32 -0400] workmad3: jag: are you using a parent 'application' resource block?
[2013-10-01 08:23:42 -0400] jag: yes
[2013-10-01 08:24:03 -0400] jag: workmad3: https://gist.github.com/jagshub/6774506
[2013-10-01 08:24:53 -0400] workmad3: jag: err... big obvious mistake there..
[2013-10-01 08:25:23 -0400] workmad3: jag: why are you doing ' "java_webapp" ' ?
[2013-10-01 08:25:28 -0400] jag: the quotes around java_webapp .. i just tried that.. do you mean that
[2013-10-01 08:25:32 -0400] workmad3: yes
[2013-10-01 08:25:36 -0400] workmad3: don't do that
[2013-10-01 08:25:49 -0400] jag: i removed it.. still, i forgot to update the gist
[2013-10-01 08:26:08 -0400] workmad3: it generally helps if you do before showing people :P
[2013-10-01 08:26:43 -0400] jag: wordmad3: sorry ! i have been trying to get this to work for hrs.. so excuse me..
[2013-10-01 08:30:42 -0400] workmad3: jag: there should be an extra bit on the error you get
[2013-10-01 08:30:47 -0400] workmad3: jag: with a lookup path in it
[2013-10-01 08:31:57 -0400] jag: workmad3: i will make a gist of that now.. just a min
[2013-10-01 08:33:41 -0400] jag: workmad3: https://gist.github.com/jagshub/6775458
[2013-10-01 08:40:45 -0400] bernard_: .
[2013-10-01 08:41:48 -0400] bernard_: How does one create a user on hosted chef? This feature (and many others) bring up a "Coming soon" dialog in the hosted chef UI.
[2013-10-01 08:42:08 -0400] jag: workmad3: i printed the lookup path to log and this is what i see
[2013-10-01 08:42:10 -0400] bernard_: It's also not possible to create a user using the knife user create USER ... This api is marked as not working for hosted chef.
[2013-10-01 08:42:20 -0400] jag: workmad3 : [2013-10-01T14:10:44+05:30] DEBUG: Lookup path ["application_java_webapp", "application_java_java_webapp", :java_webapp]
[2013-10-01 08:43:51 -0400] fishGoM00: bernard_: It sounds like those are not available on hosted chef, have you considered hosting your own chef server?
[2013-10-01 08:44:20 -0400] bernard_: I'm starting with chef server, so I was hoping to save some iniitial work by using the hosted chef from oopscode.
[2013-10-01 08:46:10 -0400] bernard_: The hosted chef server seems like a work in progress. Is anyone using it seriously?
[2013-10-01 08:47:03 -0400] fishGoM00: If you want more than 5 nodes you have to pay
[2013-10-01 08:47:18 -0400] fishGoM00: abd it's cheaper to rent a cloud server and host chef yourself
[2013-10-01 08:48:10 -0400] bernard_: @fishGoM00: true if you don't count the engineering time spent setting it up and managing it.
[2013-10-01 08:48:36 -0400] fishGoM00: that'll take you only a few hours
[2013-10-01 08:48:45 -0400] fishGoM00: it's not too tragic to set it up quickly :)
[2013-10-01 08:50:32 -0400] fishGoM00: http://www.opscode.com/chef/install/
[2013-10-01 08:52:48 -0400] fishGoM00: I've not used it yet either but you may also consider Opsworks from AWS
[2013-10-01 08:52:49 -0400] fishGoM00: http://aws.amazon.com/opsworks/#functionality
[2013-10-01 08:53:20 -0400] fishGoM00: it appears to be managed by them and you can use your cookbooks on there too
[2013-10-01 08:53:58 -0400] workmad3: fishGoM00: iirc, opsworks is still tied to quite an old version of chef
[2013-10-01 08:54:27 -0400] fishGoM00: workmad3: good to know, do you know which version?
[2013-10-01 08:55:04 -0400] workmad3: fishGoM00: no, I've not used it myself, I just remember some people in here asking questions and it turned out to be opsworks using old versions causing issues
[2013-10-01 08:55:20 -0400] workmad3: fishGoM00: I have a suspicion 0.9, but they may have updated by now :)
[2013-10-01 08:55:45 -0400] workmad3: jag: hmm, that looks fine
[2013-10-01 08:55:52 -0400] fishGoM00: interesting, I knew there had to be a catch :)
[2013-10-01 09:26:38 -0400] fitzdsl: Hello, I'm writing a new report handler. I'm for service resource report, I can't find information of the action that actually performed. Because in case of multiple action (ie: service => action [:enabled,:start]) I don't know wich one was triggered
[2013-10-01 09:36:28 -0400] m4rcu5: so, i just broke out every cookbook to a seperate repository, but how do i get them all into chef, or make sure the chef server contains the up2date version of them all?
[2013-10-01 09:43:52 -0400] workmad3: m4rcu5: check out librarian-chef
[2013-10-01 09:45:11 -0400] m4rcu5: workmad3: it looks pretty much like berkshelf, and it seems it goes the other way around, with the :chef_api it looks up the cookbook on the chef server, but i need to get them there :)
[2013-10-01 09:45:40 -0400] workmad3: m4rcu5: you can also give the cookbooks git repo urls
[2013-10-01 09:46:05 -0400] workmad3: m4rcu5: I use berkshelf to manage dependencies within a cookbook and librarian-chef to pull the cookbooks into my chef-repo
[2013-10-01 09:47:27 -0400] m4rcu5: workmad3: that sounds interesting.. so you get all cookbook, (internally, per cookbook, from your own git server) (externally, from the community api) with librarian, but what does berkshelf handle then?
[2013-10-01 09:49:00 -0400] workmad3: m4rcu5: integrating into vagrant and chefspec for testing purposes :)
[2013-10-01 09:50:09 -0400] m4rcu5: workmad3: would it make sense to do it all in berkshelf, by specifying the git urls as well?
[2013-10-01 09:50:53 -0400] workmad3: m4rcu5: possibly... I found librarian-chef easier to work with for pulling stuff into a chef-repo than berkshelf though (but I'm not really an expert in either)
[2013-10-01 09:51:46 -0400] workmad3: m4rcu5: I've also found librarian-chef's dependency management a bit more reliable, and it has a lovely 'librarian-chef outdated' command that lets you know if updates are available for any cookbooks you're using ;)
[2013-10-01 09:52:31 -0400] m4rcu5: workmad3: thats kind of nice
[2013-10-01 09:52:58 -0400] m4rcu5: my collegue is digging into berkshelf, but i think im gonna fork off to librarian :P
[2013-10-01 09:53:03 -0400] workmad3: makes sense
[2013-10-01 09:53:24 -0400] workmad3: do a spike on both, see if one fits better than the other for you guys :)
[2013-10-01 09:55:33 -0400] workmad3: m4rcu5: http://christian-trabold.de/blog/2012/07/13/librarian-chef-vs-berkshelf/ might help
[2013-10-01 09:58:06 -0400] m4rcu5: workmad3: thanks, if you look at librarian, its really focused on vendor cookboks, but could be used internally as well. and i cannot find any dependency handling, define cookbook A but not B its not gonna get B from somewhere right?
[2013-10-01 09:58:32 -0400] workmad3: m4rcu5: it follows dependencies within cookbooks
[2013-10-01 09:59:00 -0400] workmad3: m4rcu5: so if you define cookbook A, and cookbook A depends on cookbook B, then cookbook B will be gotten (assuming it can be found from a source)
[2013-10-01 09:59:01 -0400] m4rcu5: workmad3: and uses the defaultsite to get them?
[2013-10-01 09:59:28 -0400] m4rcu5: and if you define the source by hand in the cheffile, they wil be gotten from that source
[2013-10-01 09:59:32 -0400] workmad3: yeah
[2013-10-01 09:59:38 -0400] m4rcu5: hhmm
[2013-10-01 10:00:01 -0400] workmad3: it's pretty similar to berkshelf like that
[2013-10-01 10:00:04 -0400] m4rcu5: a shame you cant set that to git://my.git.server.com/chef/ :(
[2013-10-01 10:00:11 -0400] workmad3: yeah, I know
[2013-10-01 10:01:10 -0400] workmad3: the same would be nice with berkshelf too
[2013-10-01 10:01:25 -0400] m4rcu5: and if you dont specify the dependant cookbook in the cheffile, you will always get the latest version?
[2013-10-01 10:01:59 -0400] workmad3: no, you'll get a version that can satisfy the version constraints within the cookbook metadata
[2013-10-01 10:02:14 -0400] m4rcu5: ok, but the latest of that one that is
[2013-10-01 10:02:32 -0400] workmad3: or an error that the dependencies can't be met if there's an inconsistency :)
[2013-10-01 10:02:49 -0400] m4rcu5: its not updating a dependancy if there is already a version that satisfys it in the vendor folder, or does it look at the version on the serevr?
[2013-10-01 10:03:10 -0400] workmad3: not sure about vendor folder
[2013-10-01 10:03:30 -0400] m4rcu5: thats where it stores the cookboks as far as i can see
[2013-10-01 10:03:32 -0400] workmad3: it'll only update if you run 'librarian-chef update' though... otherwise it'll look at the Cheffile.lock for versions
[2013-10-01 10:03:46 -0400] workmad3: it's pretty similar to bundler, if you've used that in plain ruby
[2013-10-01 10:05:26 -0400] workmad3: and yeah, I meant I'm not sure if stuff in the vendor folder is considered when doing an initial install :)
[2013-10-01 10:05:42 -0400] m4rcu5: hhmm, ok, so you should include the lock file in the chef-repo?
[2013-10-01 10:05:50 -0400] workmad3: I do
[2013-10-01 10:06:15 -0400] workmad3: I also do that with berkshelf now too... I like to be able to install exactly what I used previously and be sure others are too
[2013-10-01 10:10:17 -0400] m4rcu5: workmad3: true, i want to make sure my collegiues use the same version and no dot start updating all over again, if i would do it right i would have jenkins handle the repositories, but thats even more work
[2013-10-01 10:25:43 -0400] ichilton: How can I run something interactive with knife ssh, like apt-get dist-upgrade ?
[2013-10-01 11:22:40 -0400] Azrael: how do you all install chef, generally?  via .deb or .rpm packages?  or via a gem?
[2013-10-01 11:22:50 -0400] Azrael: jtimberman: are you around?  i have questions about chef-vault
[2013-10-01 11:46:32 -0400] m4rcu5: Azrael: i use the omnibus package everywhere
[2013-10-01 11:46:40 -0400] m4rcu5: combined with the omnibus-updater recipe
[2013-10-01 12:01:28 -0400] renan_saddam: I have a Cheffile and I am loading the cookbooks using "librarian-chef install" ... the cookbooks are installed in ./cookbooks
[2013-10-01 12:01:38 -0400] renan_saddam: How can I change the path where the cookbooks are installed?
[2013-10-01 12:50:16 -0400] mattjalexander: what's the best way to append to default attributes?
[2013-10-01 12:50:34 -0400] mattjalexander: say i have a <company>-base recipe that populates node['authorization']['sudo']['users']
[2013-10-01 12:51:04 -0400] mattjalexander: and i then have a <company>-foo recipe that wants to add the user 'foo' to sudo, but also keep the base users
[2013-10-01 12:51:50 -0400] ravibhure1: mattjalexander: the best way to use into attributes/default.rb
[2013-10-01 12:52:41 -0400] ravibhure1: and you can easily overides these in to recipes
[2013-10-01 12:52:51 -0400] mattjalexander: just do a rubyism like node['authorization']['sudo']['users'] = node['authorization']['sudo']['users'] + [ 'foo' ] ?
[2013-10-01 12:53:24 -0400] mattjalexander: @ravi thank.. i want to keep the default settings from basenode, but add to them
[2013-10-01 12:55:11 -0400] ravibhure1: mattjalexander: ok, the another way is to maintain the metadata which can be handle your issue
[2013-10-01 12:56:37 -0400] ocholetras: mattjalexander: easiest way is to use a sudoers group with the users cookbook
[2013-10-01 12:57:14 -0400] ocholetras: and create the users with the system groups according to your policy
[2013-10-01 12:57:34 -0400] ocholetras: anyway, attributes on chef at same level of precedence will be merged but with no order.
[2013-10-01 12:57:45 -0400] ocholetras: if you dont care about the ordering on that array
[2013-10-01 12:57:47 -0400] ocholetras: go aead
[2013-10-01 12:58:03 -0400] ocholetras: i mean array attributes of same level of precedence...
[2013-10-01 12:58:32 -0400] ravibhure1: ocholetras: I agreed
[2013-10-01 12:58:33 -0400] mattjalexander: oh, they're merged? i thought they were just totally overridden
[2013-10-01 12:59:27 -0400] ocholetras: nop
[2013-10-01 12:59:47 -0400] ocholetras: that is a thing that is not ever commented on the docs but you can find some blog posts talking about that
[2013-10-01 13:01:11 -0400] ocholetras: and some of them recomends to use dicts if you mind the order, something like ['sudoers']['user1']=true ['sudoers']['user2'] = false ... so if you need user3 you do ['sudoers']['user3']=true
[2013-10-01 13:01:49 -0400] ocholetras: if you mind the order can user integers instead of "true's" and within the recipe to a map to the hash to convert it to some ordered array or whatever stuff..
[2013-10-01 13:02:08 -0400] ocholetras: anyway: sudoers + users cookbook seems to be the "right" way...
[2013-10-01 13:02:19 -0400] ocholetras: same thing for sshd allowusers
[2013-10-01 13:02:26 -0400] ocholetras: use AllowGroups instead...
[2013-10-01 13:03:07 -0400] gchristensen: what do people use to document higher level systems things? like how to handle service failures or bringing up new clusters, etc?
[2013-10-01 13:05:45 -0400] mattjalexander: @nop, the base problem is the same, what if i have a higher level cookbook that builds on the base one and wants to add a new AllowGroup
[2013-10-01 13:06:19 -0400] mattjalexander: maybe this is an argument to mange users/sudo outside of chef :p
[2013-10-01 13:07:46 -0400] gchristensen: I locked myselfout of a dedicated box yesterday by having chef first revoke sudo access before secondly granting it after an operation which failed... IPMI and I got close last night.
[2013-10-01 13:10:07 -0400] mattjalexander: hah, that reminds me of when i'd play with iptables in production  i set a cronjob to run iptables -F and allow everything every 5 minutes :p
[2013-10-01 13:10:36 -0400] gchristensen: hah yeah I've done that ... saved my ass a few times
[2013-10-01 13:10:48 -0400] gchristensen: more than a few times*
[2013-10-01 13:22:50 -0400] ocholetras: mattjalexander: oviously you add users to the sudoers group o to de ssh access group to allow access...
[2013-10-01 13:23:00 -0400] ocholetras: permissions groups is a part from that..
[2013-10-01 13:23:17 -0400] renan_saddam: I am doing "chef-solo -j roles/special.json" which have "default_attributes", yet I don't see the installed packages using any of those attibutes. Am I doing it wrong?
[2013-10-01 13:28:15 -0400] renan_saddam: Doing "chef-solo -c solo.rb". Should I specify the role I want on the solo.rb file? How?
[2013-10-01 13:29:03 -0400] tomduffield: renan_saddam: were you specifying the full path with your -j flag?
[2013-10-01 13:29:48 -0400] renan_saddam: tomduffield: nope, however the recipes defined in the role are installed
[2013-10-01 13:29:55 -0400] renan_saddam: only default_attributes is not applied
[2013-10-01 13:30:16 -0400] renan_saddam: first time doing it, so not sure where things should go
[2013-10-01 13:30:34 -0400] tomduffield: can you share your json file via gist?
[2013-10-01 13:32:34 -0400] renan_saddam: tomduffield: sure! https://gist.github.com/renan/6778486
[2013-10-01 13:34:36 -0400] renan_saddam: maybe I need a node instead of a role
[2013-10-01 13:34:58 -0400] tomduffield: its something like that. You don't normally pass in a role via the -j flag.
[2013-10-01 13:35:37 -0400] tomduffield: you normally configure your role_path in your solo.rb file
[2013-10-01 13:36:18 -0400] tomduffield: and then specify your runlist (this time including your role) in either the solo.rb file or using the -o flag
[2013-10-01 13:36:25 -0400] tomduffield: http://docs.opscode.com/chef/solo_rb.html
[2013-10-01 13:37:02 -0400] renan_saddam: let me try that
[2013-10-01 13:38:17 -0400] renan_saddam: tomduffield: the runlist on solo.rb needs to be done using json_attribs, right?
[2013-10-01 13:38:33 -0400] renan_saddam: because I don't see runlist anywhere in that page
[2013-10-01 13:39:23 -0400] tomduffield: i'm sorry. i misinformed you. it should be the -o flag
[2013-10-01 13:40:40 -0400] renan_saddam: and if I don't want to pass the runlist on -o flag I should use a node configuration instead and set "node_name" on solo.rb?
[2013-10-01 13:43:03 -0400] tomduffield: well in this case the runlist would be your role, so you can either pass it in via the -o flag or the -j flag.
[2013-10-01 13:43:56 -0400] tomduffield: i would recommend the -o flag vs setting up a node configuration
[2013-10-01 13:45:05 -0400] tomduffield: alternatively, you can treat that json file as just an attributes file instead of a role file
[2013-10-01 13:45:15 -0400] tomduffield: http://docs.opscode.com/chef_solo.html#attributes
[2013-10-01 13:45:41 -0400] tomduffield: to do this you would put the attributes at the top level instead of inside the default_attributes block and remove all mention of roles
[2013-10-01 13:46:48 -0400] renan_saddam: hmm ... let try that :)
[2013-10-01 13:55:59 -0400] fitzdsl: any one can help for Exception/Report Handler ?
[2013-10-01 13:56:17 -0400] tomduffield: yeah fitzdsl, whats up?
[2013-10-01 13:56:48 -0400] fitzdsl: I'm writing a new report handler. I'm for service resource report, I can't find information of the action that actually performed. Because in case of multiple action (ie: service => action [:enabled,:start]) I don't know wich one was triggered
[2013-10-01 13:58:10 -0400] tomduffield: so when you declare multiple actions like that, both actions would be enforced
[2013-10-01 13:58:16 -0400] tomduffield: if the service is not enabled, it will be enabled
[2013-10-01 13:58:24 -0400] tomduffield: if the service is not started, it will be started
[2013-10-01 13:59:02 -0400] fitzdsl: tomduffield: yes of course, but in report I would like to which one chef did. Was the service not running and chef started it or was it disabled and chef enabled it or both ?
[2013-10-01 13:59:13 -0400] tomduffield: okay
[2013-10-01 13:59:35 -0400] fitzdsl: but with the resource in updated_resource I don't find the information
[2013-10-01 14:01:04 -0400] fitzdsl: I just know that this particular service was updated and what actions were asked but not which action triggered a change
[2013-10-01 14:01:40 -0400] tomduffield: give me one sec :)
[2013-10-01 14:01:49 -0400] fitzdsl: no pb, thanks :)
[2013-10-01 14:02:56 -0400] tomduffield: are you doing this for monitoring purposes?
[2013-10-01 14:03:14 -0400] fitzdsl: tomduffield: for reporting ;)
[2013-10-01 14:03:42 -0400] fitzdsl: tomduffield: I'm working on a report binding between Chef and TheForeman https://github.com/rvrignaud/chef-foreman-reporting
[2013-10-01 14:03:48 -0400] fitzdsl: www.theforeman.org
[2013-10-01 14:04:16 -0400] fitzdsl: untill now Foreman only supported Puppet but we are working on supporting Chef also
[2013-10-01 14:13:40 -0400] ianco: am i crazy, or is setting default attrs in attributes/ named something other than the cookbook just plain wrong?
[2013-10-01 14:14:09 -0400] ianco: for example cookbook abc/attributes setting default['php']
[2013-10-01 14:15:35 -0400] tomduffield: fitzdsl: i'm having trouble getting a hold of someone who can help you. is there some other way I can contact you when I finally do? Twitter? Email?
[2013-10-01 14:16:32 -0400] tomduffield: ianco: it can depend on your situation but yes, typically you can want to consider namespacing
[2013-10-01 14:17:35 -0400] renan_saddam: tomduffield: so now I have these two files (https://gist.github.com/renan/6778486) and I am doing "chef-solo -c solo.rb -o default.json"
[2013-10-01 14:17:47 -0400] renan_saddam: but the "default_attributes" are still not being applied to the files
[2013-10-01 14:18:06 -0400] tomduffield: right, remember that nginx should be your top-level hash
[2013-10-01 14:18:15 -0400] tomduffield: remove the default_attributes wrapper
[2013-10-01 14:19:06 -0400] tomduffield: renan_saddam: I made a comment on your gist
[2013-10-01 14:19:58 -0400] renan_saddam: tomduffield: thanks a bunch! that worked
[2013-10-01 14:20:34 -0400] renan_saddam: I was looking at http://docs.opscode.com/essentials_roles.html and thought it needed to be default_attributes
[2013-10-01 14:20:45 -0400] renan_saddam: all good now :)
[2013-10-01 14:21:13 -0400] tos9: How do I get a list of node names for a given query as a simple list of lines
[2013-10-01 14:21:54 -0400] tos9: E.g. if I just do even `knife search node "role:thing AND env:prod"` I get a thing that I have to parse if I want to pass along to (xargs/foo/bar/baz/)
[2013-10-01 14:22:25 -0400] tos9: (er, sorry, that command line was supposed to have a -a name at the end of it obviously)
[2013-10-01 14:24:21 -0400] tomduffield: tos9: you can use the -F flag
[2013-10-01 14:24:21 -0400] tomduffield: the values are  summary (default), text, json, yaml, and pp.
[2013-10-01 14:24:27 -0400] tomduffield: if you need to format it further you'd probably want to use another tool
[2013-10-01 14:25:10 -0400] tomduffield: and pipe the knife output into that
[2013-10-01 14:26:26 -0400] tos9: tomduffield: Is there a reason knife doesn't have a manpage :/
[2013-10-01 14:26:55 -0400] tos9: (also thank you very much, that looks like what I want then)
[2013-10-01 14:27:49 -0400] tomduffield: tos9: I'm not sure, but there is a remarkably robust documentation site at docs.opscode.com
[2013-10-01 14:27:54 -0400] fishGoM00: tos9: Seems to be issues updating the offical docs, let alone a man page too :)
[2013-10-01 14:28:49 -0400] tos9: Hrm the text format doesn't look like it's any different than summary in this case.
[2013-10-01 14:29:52 -0400] broconne: Is there a compact way to do an include_recipe while overriding specific attributes?   Or do you need to break it out w/ an override above?
[2013-10-01 14:30:09 -0400] tomduffield: fitzdsl: the level of detail you are looking for in the Report Handler isn't exposed.
[2013-10-01 14:30:28 -0400] tomduffield: fitzdsl: If you want to, you can make a feature request in the CHEF project over at tickets.opscode.com
[2013-10-01 14:30:38 -0400] fitzdsl: tomduffield: that's what I thought
[2013-10-01 14:31:28 -0400] fitzdsl: tomduffield: thank you for asking arround :)
[2013-10-01 14:31:36 -0400] tomduffield: fitzdsl: you are welcome
[2013-10-01 14:32:29 -0400] tomduffield: broconne: do you have a particular use case you are working on?
[2013-10-01 14:32:54 -0400] tomduffield: because you can use node.override in a recipe along with an include_recipe
[2013-10-01 14:35:22 -0400] broconne: I just didn't know.. if I could do like include_recipe <name_of_recipe> { override[blah][foo] = 'bar' }
[2013-10-01 14:35:28 -0400] broconne: for testing.. didn't know if there was a good short syntax for that
[2013-10-01 14:36:33 -0400] broconne: I know i can do it in the attributes file, etc.  or a node.override
[2013-10-01 14:37:19 -0400] tomduffield: broconne: resources and attributes are two different things really so no, something like you mention above doesn't really exist
[2013-10-01 14:37:22 -0400] tomduffield: to my knowledge
[2013-10-01 14:40:03 -0400] broconne: thanks
[2013-10-01 14:48:15 -0400] broconne: Is there any support to run multiple instances of a cookbook from one application cookbook?   I am assuming not, based on the flat structure of the node system...
[2013-10-01 14:49:50 -0400] tomduffield: can you clarify what you mean by multiple instances?
[2013-10-01 14:50:24 -0400] broconne: so, lets say I have a dependant cookbook called.  "LogSystem".  In my application cookbook, I want to include "LogSystem" twice, once with one set of attributes, once with another set.
[2013-10-01 14:51:34 -0400] tomduffield: yeah, that isn't really supported. what are the differences between the attributes?
[2013-10-01 14:52:02 -0400] broconne: there are about 20 different attributes that could be different.  and it should launch different instances of the program once configured.
[2013-10-01 14:52:24 -0400] broconne: and its really between 1 to N in this example..  might be 5 to 10 instnaces of this running.. depending on what logs it is reaping.
[2013-10-01 14:52:49 -0400] tomduffield: yeah. in this scenario you'd want to transfer that complexity from your application cookbook to the logsystem cookbook
[2013-10-01 14:53:45 -0400] broconne: yeah..  I think we could flatten out the attributes by inserting an "instance" identifier between the system and the attribute...
[2013-10-01 14:54:13 -0400] broconne: I guess....  *shrug*
[2013-10-01 14:54:14 -0400] tomduffield: I would personally create an array of instances objects inthe logsystem attributes
[2013-10-01 14:54:24 -0400] tomduffield: and have logsystem spin up each of those N instances
[2013-10-01 14:54:24 -0400] broconne: hmm
[2013-10-01 14:54:39 -0400] broconne: yes, but you need to map that attributes per instance somehow...
[2013-10-01 14:54:40 -0400] broconne: right?
[2013-10-01 14:55:07 -0400] tomduffield: i'm not sure how logsystem works in this case
[2013-10-01 14:55:23 -0400] broconne: well, more broadly..  I suppose..  let me give an example.
[2013-10-01 14:55:26 -0400] broconne: right now I have
[2013-10-01 14:55:27 -0400] tomduffield: but I would think you could create a hash object filled with the necessary information and create an array of those hash objects
[2013-10-01 14:55:43 -0400] broconne: default['Logsystem']['ssl'] = true
[2013-10-01 14:55:53 -0400] broconne: I will need in some way to have
[2013-10-01 14:56:12 -0400] broconne: default['logsystem'][instance???]['ssl'] = true
[2013-10-01 14:56:17 -0400] broconne: for each instance we need to spin up.
[2013-10-01 14:56:28 -0400] tomduffield: yep
[2013-10-01 14:56:40 -0400] tomduffield: so with some slight tweaks
[2013-10-01 14:56:55 -0400] tomduffield: you could have an attribute called default['logsystem']['instances']
[2013-10-01 14:57:08 -0400] tomduffield: which would be an array of hash objects that would include details like ssl, etc
[2013-10-01 14:57:29 -0400] tomduffield: and then push those objects into logsystem['instances']
[2013-10-01 14:57:29 -0400] broconne: ok
[2013-10-01 14:57:48 -0400] tomduffield: to end up with logsystem['instances'][N]['ssl']
[2013-10-01 14:57:59 -0400] tomduffield: then just loop through logsystem['instances'] and do your magic
[2013-10-01 14:58:18 -0400] broconne: do_magic
[2013-10-01 14:58:19 -0400] broconne: thanks
[2013-10-01 14:58:22 -0400] broconne: :-)
[2013-10-01 14:58:25 -0400] broconne: think I got it now
[2013-10-01 14:58:52 -0400] tomduffield: awesome. let me know if you have any others q's!
[2013-10-01 15:06:01 -0400] broconne: I do wish I could pass in a set of variables to a template, without explicit mapping and have it map automatically to its name.
[2013-10-01 15:07:19 -0400] tomduffield: is the variables parameter not working for you?
[2013-10-01 15:09:19 -0400] broconne: its fine.. there are just like 20 of them.. and I end up doing the exact same mapping over and over:  user => node[:log][:instance][:user].  password => node[:log][:instance][:password]
[2013-10-01 15:09:22 -0400] broconne: woudl be nice if I could do
[2013-10-01 15:09:31 -0400] tomduffield: have you thought about using data bags?
[2013-10-01 15:09:40 -0400] broconne: variables ( {   node[:log][:instance] } )
[2013-10-01 15:09:56 -0400] broconne: and it auto exapands that to iterate through all hash elements and do the mapping for me (of the same name of course)
[2013-10-01 15:10:16 -0400] broconne: looked at them a bit, but some of these things we want to override in different environemnts
[2013-10-01 15:10:22 -0400] broconne: seemed like attributes were the goto in that scenario
[2013-10-01 15:10:47 -0400] broconne: just would be nice if I could auto-expand the hash into a mapping..
[2013-10-01 15:10:54 -0400] broconne: wonder if I could do that in a library...
[2013-10-01 15:11:17 -0400] tomduffield: well
[2013-10-01 15:11:22 -0400] tomduffield: with my method above
[2013-10-01 15:11:49 -0400] tomduffield: if you did variable(instance => node['logsystem']['instance'][N])
[2013-10-01 15:12:13 -0400] tomduffield: you could then access the mapping via instance['user'], instance['password']
[2013-10-01 15:12:37 -0400] broconne: ah in the tempate erb?
[2013-10-01 15:12:44 -0400] tomduffield: yeah
[2013-10-01 15:12:52 -0400] broconne: well, that is easy as cake :-)
[2013-10-01 15:12:57 -0400] broconne: thanks.. saved me a lot of work
[2013-10-01 15:12:57 -0400] tomduffield: so in the template it would be <%= @instance['user'] %>
[2013-10-01 15:13:19 -0400] broconne: yeah, brilliant (well probably obviousl to someone using ruby and chef for a while, but brilliant to me)
[2013-10-01 15:22:03 -0400] legal90: Hallo! Tell me please - is there a way to install JDK on OS X using chef?
[2013-10-01 15:22:37 -0400] chris613: What's the easiest way to get a list of all cookbooks on the server from inside a recipe?
[2013-10-01 15:24:32 -0400] tomduffield: legal90: you might be able to use the java cookbook
[2013-10-01 15:24:57 -0400] tomduffield: chris613: I'm not sure there is an easy way. What is your use case?
[2013-10-01 15:26:10 -0400] chris613: tomduffield: I'm generating a jenkikns job builder config that targets "each of the cookbooks". So I need an array of all the cookbooks to work from
[2013-10-01 15:26:39 -0400] tomduffield: you'll probably need to shell out to knife
[2013-10-01 15:26:56 -0400] tomduffield: unless there is a library to do it
[2013-10-01 15:27:11 -0400] tomduffield: but iirc there is no way to do that with built-in chef resources
[2013-10-01 15:27:15 -0400] chris613: Okay thanks
[2013-10-01 15:27:25 -0400] legal90: tomduffield but this cookbook does mot support a Mac OS: only Linux & Windows
[2013-10-01 15:28:58 -0400] tomduffield: legal90: maybe someone else is working on a fork
[2013-10-01 15:29:29 -0400] tomduffield: but individual apps and OS are not really supported by chef
[2013-10-01 15:30:10 -0400] threadwaste: chris613: use the api to query the cookbook endpoint?
[2013-10-01 15:30:44 -0400] legal90: tomduffield, May be I trust to find such people here, in this channel
[2013-10-01 15:31:58 -0400] chris613: threadwaste: Yeah looking at that option too.
[2013-10-01 15:32:00 -0400] chris613: thanks
[2013-10-01 15:33:18 -0400] cwj: chris613: you may find spiceweasel to be relevant to your interests https://github.com/mattray/spiceweasel
[2013-10-01 15:34:19 -0400] legal90: wow, looks like i've fond a solution to install Java on OS X: https://github.com/kitchenplan/chef-applications/blob/master/recipes/java.rb. So easy )
[2013-10-01 15:34:52 -0400] fishGoM00: ick java :)
[2013-10-01 15:35:05 -0400] fishGoM00: make sure it's up to date :)
[2013-10-01 15:35:29 -0400] chris613: cwj: Neat! We have a "chef-data" cookbook for loading up our chef servers, but if we outgrow it spiceweasel looks like it will help
[2013-10-01 15:35:33 -0400] legal90: yeah, I will check links
[2013-10-01 16:13:00 -0400] david118: how do you deal with it when you have developed a cookbook using vagrant-berkshelf (where the cookbook is in a subdirectory) and then you want to work on a cookbook that consumes the first cookbook? I checked in the first cookbook into git, but the cookbook is in gitroot/cookbooks/<name> in git
[2013-10-01 16:14:28 -0400] cwj: the berkshelf model assumes repo-per-cookbook
[2013-10-01 16:14:59 -0400] cwj: if you want to reference a local copy of the cookbook you can specify a path in the berksfile
[2013-10-01 16:15:08 -0400] cwj: but thats not optimal for a lot of cases
[2013-10-01 16:17:59 -0400] Sauraus_: anyone here know why yum_pacakge :install behaves different from actually running yum install on a target OS?
[2013-10-01 16:18:16 -0400] bougyman: trying to find docs on using chef from a regular ruby script
[2013-10-01 16:18:31 -0400] bougyman: lilke... having the same access shef -z does
[2013-10-01 16:18:40 -0400] bougyman: but in a script I can cron
[2013-10-01 16:18:47 -0400] bougyman: anyone know of a doc on this?
[2013-10-01 16:19:18 -0400] Sauraus_: Why do you need to cron chef?
[2013-10-01 16:19:36 -0400] bougyman: http://ruby.dzone.com/articles/consuming-chef-api-any-script this helps a bit
[2013-10-01 16:19:40 -0400] bougyman: I don't have to cron chef
[2013-10-01 16:19:48 -0400] cwj: bougyman: check out knife exec? http://docs.opscode.com/knife_exec.html
[2013-10-01 16:19:53 -0400] bougyman: I just want to have access to data bags from my ruby script which does other things
[2013-10-01 16:19:59 -0400] bougyman: and not have a full knife env.
[2013-10-01 16:20:12 -0400] bougyman: everything I need I have access to in shef -z
[2013-10-01 16:20:34 -0400] cwj: you need the same credentials for shef -z that you would need for knife exec
[2013-10-01 16:20:36 -0400] cwj: fwiw
[2013-10-01 16:20:54 -0400] bougyman: right.. but knife requires more things to be on the node.
[2013-10-01 16:21:05 -0400] bougyman: like... knife, knife.rb, a user for knife, etc.
[2013-10-01 16:21:19 -0400] cwj: you may also want to look at http://github.com/riotgames/ridley or https://github.com/danryan/spice (no longer developed)
[2013-10-01 16:22:22 -0400] Sauraus: +1 on Ridley
[2013-10-01 16:23:18 -0400] bougyman: so no way to do it with just chef or shef?
[2013-10-01 16:23:38 -0400] bougyman: sucks that I can't take the work I just did in shef and throw it in a script and have it work :(
[2013-10-01 16:23:44 -0400] bougyman: no worries, i'll read up on ridley, thanks.
[2013-10-01 16:23:45 -0400] cwj: not sure how you would be in a situation where you have shef executable but not knife executable. the credentials are interchangeable unless you want to run knife commands which require admin access, knife.rb is not much different from client.rb required for shef -z
[2013-10-01 16:23:56 -0400] david118: cwj: so are you saying that my vagrantfile should exist in the root directory of my cookbook?
[2013-10-01 16:24:04 -0400] bougyman: it is some different, though, no?
[2013-10-01 16:24:16 -0400] bougyman: I can't point knife (nor ridley) at /etc/chef/client.rb, can I?
[2013-10-01 16:24:43 -0400] david118: cwj: (i was having 1 cookbook per repo - i think it might just be layout
[2013-10-01 16:26:17 -0400] cwj: david118: what im getting at is that if you want cookbook bar to depend on cookbook foo (which is published in a git repo), the berkshelf approach would be to list foo in the berkshelf file for bar with a git repo reference
[2013-10-01 16:26:18 -0400] Sauraus: @david118 in your berksfile do something like this: [cookbook 'solr', github: 'ROBLOX/solr' ] or [cookbook 'solr-roblox', path: 'C:\%PATHTOYOURSOURCE%\GitHub\solr']
[2013-10-01 16:26:34 -0400] cwj: david118: and berksshelf would assume that the cookbook is in the root of that repo
[2013-10-01 16:26:59 -0400] cwj: david118: you can also use your chef server as a place to get cookbooks from, in which case it doesnt matter how they are stored in git
[2013-10-01 16:27:45 -0400] cwj: bougyman: both client.rb and knife.rb have the same basic config, e.g. chef_server_url, node_name and client_key settings
[2013-10-01 16:28:23 -0400] david118: but in my development cycle I have a vagrant directory, with a cookbooks directory and my single cookbook 'bar' there. If I put the whole hierarchy in git, it doesn't have the default layout of a cookbook when something else wants to reference it.
[2013-10-01 16:29:18 -0400] david118: but I think you answered it indirectly. I should change my layout so I do a 'berks cookbook bar' and then put the Vagrantfile inside it.
[2013-10-01 16:30:00 -0400] cwj: bougyman: but yes there are differences, and whether it is better for you to use an api access gem like ridley instead of using knife exec really depends on your needs
[2013-10-01 16:32:45 -0400] gchristensen: FFS - does nobody use SSH keys with passwords with chef?
[2013-10-01 16:33:23 -0400] gleam: i'm guessing they use ssh-agent..
[2013-10-01 16:34:12 -0400] gchristensen: hrm... my agent seems to be set up correctly, but its possible given I recently reconfigured my station.
[2013-10-01 16:37:55 -0400] fak3r: chef-client issue, I'm not seeing it run every 15 mins per `knife status` but ps shows. root      9778     1  0 11:14 ?        00:00:00 /opt/chef/embedded/bin/ruby /usr/bin/chef-client -d -c /etc/chef/client.rb -L /var/log/chef/client.log -P /var/run/chef/client.pid -i 900 -s 300
[2013-10-01 16:38:07 -0400] jhujhiti: guys, i've got a BIG problem. suddenly, all of my searches are returning nothing. i've tried reindexing. nothing.
[2013-10-01 16:38:27 -0400] gabrtv: i just wasted 2 hours on hosted chef search due to what i now know are hosted chef index issues
[2013-10-01 16:38:28 -0400] jhujhiti: 'knife search node \*' - 0 items found. but i can edit the nodes. they're there
[2013-10-01 16:38:43 -0400] stormerider: gchristensen: yes, i do for the moment what's up?
[2013-10-01 16:40:28 -0400] gchristensen: stormerider: every time I try to use knife I get errors about PKey
[2013-10-01 16:40:49 -0400] stormerider: gchristensen: what errors?
[2013-10-01 16:40:54 -0400] gchristensen: one moment
[2013-10-01 16:41:36 -0400] fak3r: so I guess I'm still not getting how to install chef-client and have it run on it's own and checkin every 15 minutes. Was running it via runit before, but took that out so the config would control when it runs.
[2013-10-01 16:41:42 -0400] gchristensen: stormerider: "ArgumentError: Could not parse PKey: no start line" - from NetSSH
[2013-10-01 16:41:51 -0400] fak3r: do I need to run chef-client via cron? I'd assume the line above shows it'll run every 15 mins
[2013-10-01 16:42:21 -0400] bean__: fak3r: i just have it run as its own service.
[2013-10-01 16:42:22 -0400] stormerider: gchristensen: hm. that's a new one. ssh-add -l look fine? maybe ssh-add -D and re-add your private keys?
[2013-10-01 16:42:39 -0400] binamov: fak3r using the chef-client cookbook?
[2013-10-01 16:42:55 -0400] fak3r: bean__: ok, so looking at it in ps - it looks right? `root   9778   1 0 11:14 ?    00:00:00 /opt/chef/embedded/bin/ruby /usr/bin/chef-client -d -c /etc/chef/client.rb -L /var/log/chef/client.log -P /var/run/chef/client.pid -i 900 -s 300`
[2013-10-01 16:43:31 -0400] fak3r: binamov: yes
[2013-10-01 16:43:51 -0400] binamov: fak3r and you can run chef-client manually (sanity check) ?
[2013-10-01 16:44:04 -0400] stormerider: fak3r: that's using the sysv init script, not cron, i believe
[2013-10-01 16:44:25 -0400] fak3r: binamov: yes, so that works fine, but when I wait and look later, it hasn't run in 40 mins or something, so I can tell it's not running on its own
[2013-10-01 16:44:30 -0400] bean__: fak3r: well, -s 300 means its going to add some sort of random value between 1-300 seconds (i think) to your run time.
[2013-10-01 16:44:58 -0400] binamov: -s is splay, yes
[2013-10-01 16:45:05 -0400] bean__: yeah
[2013-10-01 16:45:15 -0400] bean__: (default on that is 20)
[2013-10-01 16:45:24 -0400] fak3r: bean__: gotcha, that might explain it - the splay, I left it at default - maybe that's it
[2013-10-01 16:45:33 -0400] binamov: fak3r anything in  /var/log/chef/client.log ?
[2013-10-01 16:45:34 -0400] fak3r: bean__: I'll wait and get back, thanks!
[2013-10-01 16:45:45 -0400] fak3r: binamov: I'm tailing it, looks like it may have kicked off on it
[2013-10-01 16:45:47 -0400] fak3r: 's own
[2013-10-01 16:48:17 -0400] fak3r: bean__:  ok, think that was it, thank you
[2013-10-01 16:48:23 -0400] bean__: np
[2013-10-01 16:48:38 -0400] fak3r: bean__: it ran on its own, just took that splay time, plus time it took to run
[2013-10-01 16:49:03 -0400] bean__: yep
[2013-10-01 16:49:04 -0400] bean__: makes sense.
[2013-10-01 16:56:53 -0400] kmaqsudi: where do i need to look in order to add a cookbook only to a specific environment?  Base role will add to all, i only want it added to QA servers.
[2013-10-01 16:58:09 -0400] cwj: kmaqsudi: http://docs.opscode.com/essentials_roles.html#set-per-environment-run-lists
[2013-10-01 16:58:54 -0400] bougyman: cwj: well, from a ruby script, ridley makes more sense, I think, than shelling out to knife
[2013-10-01 17:02:53 -0400] dgarstang1: Anyone used this? https://github.com/RiotGames/cloudera-cookbook
[2013-10-01 17:15:20 -0400] dgarstang1: Anyone used this? https://github.com/RiotGames/cloudera-cookbook
[2013-10-01 17:17:13 -0400] bougyman: wow, ridley is really heavy
[2013-10-01 17:17:19 -0400] bougyman: something like 25 extra deps.
[2013-10-01 17:17:26 -0400] bougyman: i think i'd rather hack shef to not load irb
[2013-10-01 17:17:38 -0400] bougyman: seems simple enough
[2013-10-01 17:28:31 -0400] jmickle: ticket review today?
[2013-10-01 17:29:00 -0400] stkowski: Yay ticket reviews.
[2013-10-01 17:31:25 -0400] dgarstang1: Anyone used this? https://github.com/RiotGames/cloudera-cookbook
[2013-10-01 17:35:50 -0400] gazarsgo: how do i knife search node by an attribute ?
[2013-10-01 17:36:22 -0400] gazarsgo: i can show the attribute with -a but i want its value to be part of the criteria ...
[2013-10-01 17:37:26 -0400] threadwaste: knife search node "attr:crit"
[2013-10-01 17:37:48 -0400] david118: is there a way to setup git to create tags automatically based on metadata.rb ?
[2013-10-01 17:38:54 -0400] gazarsgo: thanks threadwaste , how would i have found that from the docs ?
[2013-10-01 17:40:12 -0400] threadwaste: gazarsgo: http://docs.opscode.com/knife_search.html
[2013-10-01 17:40:20 -0400] threadwaste: and http://docs.opscode.com/essentials_search.html
[2013-10-01 17:40:33 -0400] threadwaste: though i suppose the knife search documentation isn't totally explict about what SEARCH_QUERY is.
[2013-10-01 17:40:48 -0400] gazarsgo: that's what i was looking for more information on
[2013-10-01 17:41:41 -0400] gazarsgo: i don't understand how underscores come into play
[2013-10-01 17:41:49 -0400] gazarsgo: that's just how i index into a hash ?
[2013-10-01 17:42:05 -0400] gazarsgo: and what if my hash has underscores in a name ?
[2013-10-01 17:42:25 -0400] dgarstang1: Can I recursively push out templates with chef?
[2013-10-01 17:44:06 -0400] threadwaste: gazarsgo: underscores can be used to search compound keys generated by flattening nested attributes.
[2013-10-01 17:44:22 -0400] threadwaste: ex { x: { y: 1 } } search x_y:1
[2013-10-01 17:45:05 -0400] threadwaste: but it's not entirely necessary, as you coul also simply perform a search on y:1.
[2013-10-01 17:45:07 -0400] threadwaste: it's use case specific.
[2013-10-01 17:46:12 -0400] jhujhiti: how are you guys doing HA with the open source chef server?
[2013-10-01 17:46:22 -0400] bean__: dgarstang1: you might want to explain further
[2013-10-01 17:46:52 -0400] bean__: jhujhiti: I'm not :)
[2013-10-01 17:48:08 -0400] jhujhiti: i'll ask another way: is everything a server needs, besides the installation files, in /var/opt/chef-server? if i make that a DRBD volume, is it safe to fail over by mounting that somewhere else and starting the server?
[2013-10-01 17:48:17 -0400] gazarsgo: threadwaste: ah, so it's mostly for disambiguating ...
[2013-10-01 17:48:59 -0400] threadwaste: correct.
[2013-10-01 17:49:59 -0400] dgarstang1: bean__: I would like to push out all files from a parent, rather templates from a parent.
[2013-10-01 17:50:10 -0400] dgarstang1: bean__: oh, you know what, that doesn't make sense
[2013-10-01 17:50:18 -0400] bean__: yeah, I was about to be like "what"
[2013-10-01 17:50:30 -0400] dgarstang1: bean__: from a variable replacement perspective anyways
[2013-10-01 17:50:43 -0400] bean__: if you have multiple templates you could do some sort of loop on their names.
[2013-10-01 17:50:53 -0400] dgarstang1: yah
[2013-10-01 17:53:50 -0400] bean__: so dgarstang1 hows your chef experience going now, now that you're > a month into it
[2013-10-01 17:56:47 -0400] fak3r: so we have chef-client fine now, thanks! only having one more issue
[2013-10-01 17:59:03 -0400] joemiller: how to determine the current log-level? I'd like to have a conditional on if loglevel==debug
[2013-10-01 18:00:01 -0400] bean__: joemiller: why? :)
[2013-10-01 18:00:25 -0400] bean__: fak3r: whats your issue
[2013-10-01 18:00:29 -0400] juliancdunn: Chef::Config[:log_level] will tell you joemiller
[2013-10-01 18:00:32 -0400] joemiller: juliancdunn: tnx
[2013-10-01 18:01:11 -0400] joemiller: bean__: custom handler i only want to run if `-l debug`. although considering separating it and requiring an ENV var to be set
[2013-10-01 18:01:36 -0400] fak3r: sometimes chef-client dies why trying to find php apc - anyone else have this?
[2013-10-01 18:01:40 -0400] fak3r: Generated at 2013-10-01 12:52:00 -0500
[2013-10-01 18:01:40 -0400] fak3r: RuntimeError: php_pear[APC] (php::module_apc line 29) had an error: RuntimeError: Package APC not found in either PEAR or PECL.
[2013-10-01 18:01:40 -0400] fak3r: /var/chef/cache/cookbooks/php/providers/pear.rb:261:in `pecl?'
[2013-10-01 18:02:02 -0400] bean__: ah, valid. You could always just use "Chef::Log.debug("message") and then it'll only print when it needs to .
[2013-10-01 18:02:32 -0400] cconstantine_: Hey guys, I've got a directory of static files that I want to drop into place on the configured server but the permissions on the files are very specific for each file.  Is there anyway to just perserve the permissions that the source file has (using chef-solo) ?
[2013-10-01 18:02:52 -0400] joemiller: bean__: i actually do that for another handler, but this one is a little heavier (runs bats tests), so i'd like to skip the test executionn altogether if the caller does not want to run them
[2013-10-01 18:03:02 -0400] gchristensen: cconstantine_: since usually the files are downloaded over http, that isn't supported I don't believe.
[2013-10-01 18:03:06 -0400] bean__: oh, valid, joemiller.
[2013-10-01 18:03:54 -0400] cconstantine_: gchristensen, :(  even though chef-solo will be pulling from files already on the machine that got there via git (that honors permissions) ?
[2013-10-01 18:04:12 -0400] gchristensen: cconstantine_: that is my best guess
[2013-10-01 18:04:15 -0400] joemiller: i'm working on a bats-chef-handler, similar to minitest-chef-handler. about to try it out internally.
[2013-10-01 18:04:32 -0400] gchristensen: cconstantine_: since it is a generally unsafe assumption to make, in most use cases of cookbooks
[2013-10-01 18:04:34 -0400] cconstantine_: gchristensen, ok, thanks.  better to hear that now and stop trying :)
[2013-10-01 18:04:38 -0400] cconstantine_: yeah
[2013-10-01 18:08:51 -0400] fak3r: bean__: sorry, so "error: RuntimeError: Package APC not found in either PEAR or PECL." so sometimes it fails to find that, then I run chef-client manually, and it usually completes fine
[2013-10-01 18:09:54 -0400] bean__: fak3r: sorry, I probably can't help.
[2013-10-01 18:09:59 -0400] bean__: I don't ever use chef w/ php
[2013-10-01 18:14:31 -0400] tomduffield: fak3r: can we maybe see your resource declaration where you are calling php_pear?
[2013-10-01 18:21:20 -0400] dgarstang1: Anyone used this? https://github.com/RiotGames/cloudera-cookbook
[2013-10-01 18:24:53 -0400] bean__: dgarstang1: we use cloudera hadoop
[2013-10-01 18:24:58 -0400] bean__: let me see which upstream we use
[2013-10-01 18:26:21 -0400] bean__: dgarstang1: that is likely the one that we use
[2013-10-01 18:27:23 -0400] dgarstang1: bean__: Ok... so.... did you use that cookbook?
[2013-10-01 18:27:33 -0400] dgarstang1: bean__: its out of date now anyways
[2013-10-01 18:27:44 -0400] bean__: dgarstang1: we have our own wrapper around it.
[2013-10-01 18:27:49 -0400] bean__: oh, nope
[2013-10-01 18:27:56 -0400] bean__: we use one called cloudera-hadoop
[2013-10-01 18:28:09 -0400] dgarstang1: bean__: that's the one I was pointing at.... no?
[2013-10-01 18:28:46 -0400] surge__: Can anyone tell me why this "createdb" call is still executing? http://pastebin.com/7uK7zVWL I thought this "not_if" condition would be enough.
[2013-10-01 18:28:46 -0400] bean__: nope, that one doesn't even support ubuntu so we wouldn't use it
[2013-10-01 18:29:11 -0400] dgarstang1: bean__: oh. got a linky?
[2013-10-01 18:29:25 -0400] bean__: checking.. it might be our own internal one
[2013-10-01 18:29:27 -0400] bean__: looking
[2013-10-01 18:29:36 -0400] dgarstang1: bean__: kk, thanks
[2013-10-01 18:29:39 -0400] bean__: yep, its our own internal one
[2013-10-01 18:29:47 -0400] dgarstang1: bean__: Darn. K.
[2013-10-01 18:29:59 -0400] bean__: Maybe we'll open source it eventually ;)
[2013-10-01 18:32:49 -0400] dgarstang1: bean__: to answer your earlier question about chef, the ruby syntax still makes my eyes bleed
[2013-10-01 18:47:23 -0400] ultimoo: I'm seeing a strange issue where an attrib. that is available on the node isn't accessible from the client. It appears in `knife node show nodename -a foo`, also appears in `knife search "name:nodename" -a foo`, also can be seen on the chef server UI, but fails to resolve during the chef-client run or even in `shef -z`. This attrib. works as expected on other identical nodes running the same recipe.
[2013-10-01 18:51:50 -0400] fak3r: tomduffield: sure, let me gist it
[2013-10-01 18:53:03 -0400] jmickle: what time is ticket review
[2013-10-01 18:53:53 -0400] jmickle: or is it thurs?
[2013-10-01 18:56:58 -0400] gchristensen: jtimberman: it would be really nice if the opscode manager said "are you sure you want to do delete XYZ node?" instead of "delete this node?"
[2013-10-01 19:00:39 -0400] bean__: dgarstang1: are you still writing cookbooks like this? http://pastebin.com/QLdui7xV
[2013-10-01 19:00:57 -0400] bean__: cuz that syntax would make my eyes bleed too
[2013-10-01 19:03:00 -0400] gchristensen: oh goodnes
[2013-10-01 19:03:21 -0400] dgarstang1: bean__: well thats the syntax you need to override a cookbook
[2013-10-01 19:03:31 -0400] bean__: dgarstang1: have you heard of chef-rewind?
[2013-10-01 19:03:43 -0400] dgarstang1: bean__: Yes
[2013-10-01 19:05:08 -0400] dgarstang1: bean__: this will hurt enough. https://github.com/RiotGames/cloudera-cookbook/blob/master/recipes/default.rb . Extraneous colons and hashes will do it far sooner
[2013-10-01 19:06:43 -0400] dgarstang1: bean__: there's 36 references to ':hadoop'
[2013-10-01 19:07:11 -0400] bean__: your point? they're accessing node variables that are under node[:hadoop]
[2013-10-01 19:07:39 -0400] dgarstang1: bean__: what's wrong with node[hadoop] ?
[2013-10-01 19:07:52 -0400] bean__: bro, do you even symbol?
[2013-10-01 19:08:15 -0400] dgarstang1: bean__: not a ruby programmer. :)
[2013-10-01 19:08:35 -0400] dgarstang1: bean__: if you haven't heard, you don't need to know ruby to use chef
[2013-10-01 19:08:50 -0400] bean__: dgarstang1: you need to know just enough ruby for chef.
[2013-10-01 19:08:58 -0400] bean__: :hadoop is a symbol
[2013-10-01 19:09:04 -0400] bean__: its like "hadoop" but lighterweight
[2013-10-01 19:09:14 -0400] broconne: and immutable :-)
[2013-10-01 19:09:15 -0400] dgarstang1: bean__: opscode should update their docs then
[2013-10-01 19:09:24 -0400] david118: when using berkshelf is there a way to setup git to create tags automatically based on metadata.rb ?
[2013-10-01 19:09:27 -0400] siezer: they all end up as strings underneat the hood
[2013-10-01 19:09:27 -0400] bean__: http://docs.opscode.com/just_enough_ruby_for_chef.html
[2013-10-01 19:09:38 -0400] siezer: opscode recooments node['single']['quotes']
[2013-10-01 19:09:54 -0400] siezer: recommends even
[2013-10-01 19:10:00 -0400] dgarstang1: bean__: no mention of the word 'symbol' on that page. :)
[2013-10-01 19:10:24 -0400] bean__: dgarstang1: right, because they recommend node['hadoop'] or similar.
[2013-10-01 19:10:49 -0400] dgarstang1: bean__: which is why I was asking why node['hadoop'] wasn't good enough.
[2013-10-01 19:11:01 -0400] bean__: no, you just said node[hadoop]
[2013-10-01 19:11:01 -0400] dgarstang1: bean__: guess that makes the colon extraneous. :)
[2013-10-01 19:11:04 -0400] bean__: there were no quotes.
[2013-10-01 19:11:13 -0400] dgarstang1: bean__: i meant node['hadoop']
[2013-10-01 19:11:24 -0400] bean__: then type what you mean, sir!
[2013-10-01 19:11:29 -0400] siezer: node['hadoop'] is how it ends up serialized in the json document that is your node object saved to chef server
[2013-10-01 19:11:36 -0400] dgarstang1: bean__: Ok, why are there extraneous colons? :)
[2013-10-01 19:11:44 -0400] bean__: dgarstang1: its 1 less character.
[2013-10-01 19:11:50 -0400] dgarstang1: bean__: and a lot less clear.
[2013-10-01 19:11:59 -0400] bean__: not if you know ruby, which a large number of chef people do.
[2013-10-01 19:12:23 -0400] dgarstang1: bean__:  use of symbols should be on http://docs.opscode.com/just_enough_ruby_for_chef.html then
[2013-10-01 19:12:34 -0400] surge__: dgar, do you argue for the sake of arguing?
[2013-10-01 19:12:43 -0400] bean__: seems so
[2013-10-01 19:13:16 -0400] surge__: 'string'   "string" and :string work the same in any chef recipe
[2013-10-01 19:13:23 -0400] surge__: now you know
[2013-10-01 19:13:35 -0400] bean__: documentation is not meant to be exhaustive
[2013-10-01 19:14:06 -0400] bean__: a better question would be, "why do they use node['hadoop'] instead of node[:hadoop]. I've never seen the colon syntax before!"
[2013-10-01 19:14:49 -0400] siezer: the node[:hadoop] syntax was added to satisfy angry ruby programmers that were complaining about things in irc
[2013-10-01 19:14:56 -0400] bean__: ^
[2013-10-01 19:15:00 -0400] siezer: use node['hadoop']
[2013-10-01 19:16:22 -0400] siezer: also valid is node.hadoop but we dont talk about that
[2013-10-01 19:16:29 -0400] siezer: sssh
[2013-10-01 19:16:30 -0400] bean__: lol
[2013-10-01 19:17:43 -0400] siezer: in Real Ruby Programming, people like to use :symbols as hash keys instead of strings because it saves then some rams.
[2013-10-01 19:18:01 -0400] siezer: in Chef attributes, they're all strings anyway
[2013-10-01 19:19:31 -0400] mattray: anyone know how to find the path to the Chef gem in a recipe? I want to pull out lib/chef/knife/bootstrap/chef-full.erb
[2013-10-01 19:20:01 -0400] mattray: I've been using remote_file to pull it from GitHub but that's proved problematic :)
[2013-10-01 19:30:10 -0400] mattray: node['chef_packages']['chef']['chef_root'] for those of you waiting with bated breath
[2013-10-01 19:34:01 -0400] otakup0pe: hey so anyone here use knife ssh and socksify?
[2013-10-01 19:34:26 -0400] otakup0pe: trying to figure out how to route all knife stuff through a ssh/socks5 thing
[2013-10-01 19:38:42 -0400] jblack: Hi. Im trying to use librarian-chef. I've added a couple new cookbooks to a cheffile. librarian-chef is now stating "Could not resolve the dependencies". How do I figure out what's going wrong?
[2013-10-01 19:40:23 -0400] jblack: The problem seems to be when I attempt to add this (it's 3 lines, but I've compated it here)   cookbook 'application_php', :git => 'https://github.com/opscode-cookbooks/application_php.git', :ref => 'master'
[2013-10-01 19:40:58 -0400] jblack: Oh, I see, I need apache2 and  php cookbooks too
[2013-10-01 19:43:50 -0400] dysinger: https://github.com/opscode/test-kitchen/issues/209
[2013-10-01 19:50:03 -0400] jblack: I have the cheffile here:  http://pastebin.com/HPR6gS3S   It works if I take out the application_php stanza, but complains about dependencies if I don't.  The bookbook lists three dependencies, "apache2", "application" and "php".  I have all three inclued in the cheffile
[2013-10-01 19:55:01 -0400] spheromak: siezer, some people just like how it looks
[2013-10-01 19:55:06 -0400] spheromak:  foo[:bar]
[2013-10-01 19:55:08 -0400] spheromak: :)
[2013-10-01 19:55:14 -0400] jblack: [Librarian]       Conflict between application (~> 3.0) <https://github.com/opscode-cookbooks/application.git#master> and application/4.0.1 <https://github.com/opscode-cookbooks/application.git#master>
[2013-10-01 19:56:19 -0400] jblack: Oh, I see. The application cookbook is newer than application_php accepts
[2013-10-01 19:57:35 -0400] cburroughs: I'm trying to track down a chef run that is failing with ":Cannot create directory[/home/foo] at /home/foo due to insufficient permissions"
[2013-10-01 19:57:39 -0400] cburroughs: but like, chef runs as root
[2013-10-01 19:58:01 -0400] cburroughs: I found https://tickets.opscode.com/browse/CHEF-3787 ; but that seemed windows only
[2013-10-01 19:59:26 -0400] spheromak: dysinger, https://github.com/opscode/test-kitchen/commit/3f78edb9da5ef54051bee66a39bc8bc80385e829 is what caused it
[2013-10-01 19:59:52 -0400] dysinger: yeah I put it on the issue
[2013-10-01 20:00:17 -0400] dysinger: I made some comments on the commit on saturday but they seem gone now for some reason.
[2013-10-01 20:00:32 -0400] dysinger: so I'm filing a bug
[2013-10-01 20:00:37 -0400] spheromak: yup
[2013-10-01 20:00:45 -0400] jbz: Do any @opscode folks have any info on when we might get 11.0.10 released?  Waiting on a game-breaker bugfix :-P
[2013-10-01 20:02:45 -0400] jblack: I figured it out. I just had to give a git revision that was still in the 3.0.x series for the application cookbook. Thanks anyway
[2013-10-01 20:03:59 -0400] tomduffield: jbz: 11.6.2 is coming out within the next week or so
[2013-10-01 20:04:09 -0400] jbz: server?
[2013-10-01 20:04:29 -0400] jbz: sorry, mean server :-)
[2013-10-01 20:04:56 -0400] tomduffield: open source chef server?
[2013-10-01 20:08:29 -0400] broconne: is there a way on a specific vagrant run to tell it to use a different box other than default?  for example, I have default runnign w/ something and i want to test another VM.   But I don't want to tear down the running one and I don't want to setup a multi-machine environment..
[2013-10-01 20:09:56 -0400] jperry: ohai!
[2013-10-01 20:10:28 -0400] jperry: anyone know why someone would use a query such as "hostname:[* TO *]"?
[2013-10-01 20:10:55 -0400] jperry: it's combined with another query but it doesn't seem to really do anything with or without it
[2013-10-01 20:11:11 -0400] spheromak: jperry, older glob syntax
[2013-10-01 20:11:16 -0400] jperry: oh
[2013-10-01 20:11:24 -0400] jperry: what i similar?
[2013-10-01 20:11:27 -0400] jperry: what is similar
[2013-10-01 20:11:28 -0400] spheromak: hostname:*
[2013-10-01 20:11:32 -0400] jperry: ah okay
[2013-10-01 20:11:33 -0400] jperry: got it
[2013-10-01 20:11:38 -0400] jperry: thank you very much
[2013-10-01 20:11:58 -0400] magoo: funny you bring that up, that search syntax appears to be broken in chef-zero
[2013-10-01 20:12:09 -0400] magoo: have been troubleshooting it for a while now
[2013-10-01 20:12:16 -0400] jperry: ha
[2013-10-01 20:12:22 -0400] jperry: yeah I just commented on an issue
[2013-10-01 20:12:25 -0400] jperry: we use chef-zero
[2013-10-01 20:12:44 -0400] magoo: Nagios uses that search syntax and isn't playing nice in zero
[2013-10-01 20:13:04 -0400] jperry: yeah, we have a nagios cookbook :)
[2013-10-01 20:13:21 -0400] magoo: is it running in zero for you guys?
[2013-10-01 20:13:29 -0400] jperry: so just replacing it with "*" should work
[2013-10-01 20:14:10 -0400] jperry: I haven't hit it yet so that code might not have been hit yet in our minitest-handler tests
[2013-10-01 20:15:11 -0400] magoo: Yup, seems to work with single *
[2013-10-01 20:15:24 -0400] jperry: actually sorry it is failing on the nagios::hosts recipe
[2013-10-01 20:15:30 -0400] magoo: I was hoping to refactor and not touch the main Nagios cookbook this time around :-/
[2013-10-01 20:15:46 -0400] jperry: I am going to just change the few queries that are usin git
[2013-10-01 20:15:48 -0400] jperry: using it
[2013-10-01 20:16:15 -0400] magoo: same
[2013-10-01 20:16:51 -0400] jperry: thx for the help
[2013-10-01 20:17:23 -0400] paulczar: hey guys, is there a omnibus specific irc channel ?
[2013-10-01 20:17:54 -0400] magoo: you too man
[2013-10-01 20:22:03 -0400] magoo: any bay area folks in here?
[2013-10-01 20:24:33 -0400] otakup0pe: in an irc chatroom about devops ?
[2013-10-01 20:24:35 -0400] otakup0pe: probably not ;)
[2013-10-01 20:24:42 -0400] otakup0pe: ( i can't be the only one )
[2013-10-01 20:25:13 -0400] spheromak: magoo, yea we opened up a ticket on zero's search
[2013-10-01 20:25:28 -0400] magoo: Haven't seen many meetups out here for it
[2013-10-01 20:25:35 -0400] magoo: then again, i'm still pretty new to the area
[2013-10-01 20:25:39 -0400] magoo: spheromak: nice
[2013-10-01 20:25:50 -0400] spheromak: https://github.com/jkeiser/chef-zero/issues/31
[2013-10-01 20:26:14 -0400] spheromak: should have been fixed
[2013-10-01 20:26:35 -0400] bean__: paulczar: as in "chef omnibus" ?
[2013-10-01 20:26:41 -0400] bean__: this is the channel for all things chef.
[2013-10-01 20:27:14 -0400] magoo: spheromak: in this case, it's [* TO *]
[2013-10-01 20:27:18 -0400] magoo: doesn't sound the same
[2013-10-01 20:27:20 -0400] spheromak: ah
[2013-10-01 20:27:31 -0400] spheromak: yea supporting old syntax
[2013-10-01 20:27:41 -0400] spheromak: might open an issue on that one
[2013-10-01 20:27:49 -0400] magoo: using a single * works around the issue
[2013-10-01 20:27:54 -0400] spheromak: ye[
[2013-10-01 20:28:18 -0400] spheromak: *yea should be a simple enough fix, and zero should support the solr range .
[2013-10-01 20:28:22 -0400] magoo: if that's deprecated syntax, perhaps I should open with the nagios repo
[2013-10-01 20:28:30 -0400] magoo: ?
[2013-10-01 20:28:49 -0400] otakup0pe: i need to go to more meetups. i know there are devops things and i've heard of chef meetups.
[2013-10-01 20:28:52 -0400] otakup0pe: meet / drink ups
[2013-10-01 20:28:59 -0400] magoo: same here
[2013-10-01 20:29:10 -0400] magoo: i'm extremely interested.. I've been using meetup.com and not seeing a lot
[2013-10-01 20:29:53 -0400] siezer: http://www.meetup.com/San-Francisco-DevOps/
[2013-10-01 20:30:08 -0400] siezer: http://www.meetup.com/The-Bay-Area-Chef-User-Group
[2013-10-01 20:30:32 -0400] magoo: laste meeting on the first was March
[2013-10-01 20:30:38 -0400] magoo: the second is new to me
[2013-10-01 20:30:39 -0400] magoo: thanks
[2013-10-01 20:43:31 -0400] gchristensen: has anyone implemented some sort of dead-mans-switch on a node for if the chef client doesn't run for a Long Time (tm)? for example: I would like to truncate a file if chef-client doesn't run for 30 minutes
[2013-10-01 20:47:18 -0400] gazarsgo: wow how often are you running chef-client ?
[2013-10-01 20:48:04 -0400] gazarsgo: if you are OK with cron math you can scheduled something in the future on each run ...
[2013-10-01 20:49:57 -0400] jperry: hey guys, does the chef-server store if a chef-client run passed on a node?
[2013-10-01 20:50:07 -0400] jperry: is that a node attribute
[2013-10-01 20:50:11 -0400] jperry: without logging into the node
[2013-10-01 20:52:01 -0400] scarolan: jperry: If a run completes successfully, it stores node attributes on the server.
[2013-10-01 20:52:11 -0400] fromonesrc: anyone here familiar with the rbenv cookbook?
[2013-10-01 20:52:26 -0400] jperry: scarolan: is it last_status or something
[2013-10-01 20:52:34 -0400] jperry: this isn't the first run
[2013-10-01 20:52:34 -0400] fromonesrc: getting this odd error when running rbenv_execute: https://gist.github.com/fromonesrc/011766e4398716664975/raw/bffd820f6d1ab3f6a0b052104833e512515718f7/gistfile1.txt
[2013-10-01 20:55:17 -0400] scarolan: jperry: try "knife status"...or you might want "ohai_time"
[2013-10-01 20:55:25 -0400] scarolan: jtimberman wronte a blog post about this:  http://jtimberman.housepub.org/blog/2013/02/16/last-check-in-time-for-nodes/
[2013-10-01 21:01:51 -0400] jperry: scarolan - was able to fetch the ohai_time
[2013-10-01 21:01:52 -0400] jperry: thank you
[2013-10-01 21:02:24 -0400] scarolan: keep in mind that is the time the run *started*, not finished, but it may be good enough for what you need
[2013-10-01 21:05:23 -0400] jperry: yeah, it is.  thank you
[2013-10-01 21:13:41 -0400] pixlpushr: I'm unclear as to how chef-client is bootstrapped onto the nodes. I'm using knife ec2 to create nodes. If I select a Ubuntu 12.04 image, how does Chef 10 get bootstrapped onto the node instead of Chef 11?
[2013-10-01 21:15:13 -0400] mattray: pixlpushr: the bootstrap uses whatever version of Chef the workstation has
[2013-10-01 21:15:20 -0400] mattray: by default
[2013-10-01 21:18:57 -0400] jmickle: hey mattray when is ticket review again?
[2013-10-01 21:20:02 -0400] mattray: jmickle: https://wiki.opscode.com/display/chef/Code+Review
[2013-10-01 21:20:14 -0400] mattray: jmickle: Thursday for knife plugins
[2013-10-01 21:20:22 -0400] jmickle: ah i didn't know if that was still the schedule thanks
[2013-10-01 21:27:07 -0400] geggam: feature request... docs.opscode.com be also found at rtfm.opscode.com
[2013-10-01 21:28:23 -0400] douglaswth: lol
[2013-10-01 21:41:05 -0400] magoo: can someone eli5, why have everything centered around data bags in the nagios cookbook?
[2013-10-01 21:41:18 -0400] magoo: there's so much data, it's really going to end up in a repository
[2013-10-01 21:41:26 -0400] magoo: and then that defeats the point of the data bag, no?
[2013-10-01 21:50:20 -0400] gazarsgo: how would you do it ?
[2013-10-01 21:51:52 -0400] maplebed: magoo: I don't understand what you mean by stuff ending up in a repository defeating the purpose of a data bag.
[2013-10-01 21:52:40 -0400] maplebed: I've always kept data bag definitions in git (and loaded them into chef with 'data bag from file ...'). Is that weird?
[2013-10-01 21:52:51 -0400] storme_out: maplebed: not in my book
[2013-10-01 21:53:27 -0400] storme_out: magoo: databags help separate data from code, so you can configure it without having to alter the cookbook. has nothing to do with SCMing or not.
[2013-10-01 21:55:36 -0400] gchristensen: is it possible using the users cookbook / the user resource to remove the password from an existing user?
[2013-10-01 22:07:36 -0400] magoo: that definitely changes the way i think about it
[2013-10-01 22:07:52 -0400] magoo: i thought it was discouraged to commit data bags to scm
[2013-10-01 22:08:49 -0400] jameson__: gchristensen: I would assume setting password to nil would do that
[2013-10-01 22:09:49 -0400] magoo: but to answer your question, I'd prefer a pure lwrp implementation
[2013-10-01 22:11:24 -0400] gchristensen: jameson__: that ... is a remarkably sane assumption.
[2013-10-01 22:11:30 -0400] jameson__: @_@
[2013-10-01 22:11:34 -0400] jameson__: try it
[2013-10-01 22:12:45 -0400] kobe: I need to delete a orginazation...   but I get a warning saying I can't do it because something behind.
[2013-10-01 22:14:25 -0400] dgarstang1: hm  is there a cookybook out there for managing physical disks (ie no lvm)
[2013-10-01 22:17:22 -0400] dgarstang1: No? Strange
[2013-10-01 22:17:54 -0400] magoo: lvm gives me the warm and fuzzies - couldn't abstract myself away from that
[2013-10-01 22:18:30 -0400] dgarstang1: magoo: usually me too, but this is for hadoop, which needs formatted volumes without lvm
[2013-10-01 22:18:41 -0400] magoo: yeah, i'm j/k... i'm on ebs
[2013-10-01 22:18:47 -0400] magoo: otherwise, i'd probably try to wrap it
[2013-10-01 22:19:14 -0400] dgarstang1: magoo: me too, but gonna use ephemeral instead
[2013-10-01 22:19:19 -0400] thekev: https://github.com/miah/chef-mkfs
[2013-10-01 22:19:34 -0400] dgarstang1: thekev: *squinty eye*
[2013-10-01 22:21:05 -0400] lopaka: looking a chef server disaster planning - noticed there are several ways to take a 'backup' on chef server ("knife download .", knife-backups, knife-hack), and noticed backup of 'user' is not addressed.  why?
[2013-10-01 22:22:07 -0400] geggam: users are expendable
[2013-10-01 22:22:15 -0400] geggam: >:]
[2013-10-01 22:22:28 -0400] jameson__: so are servers >:3
[2013-10-01 22:22:31 -0400] lopaka: "users are losers" :)
[2013-10-01 22:22:48 -0400] atomic-penguin: lopaka, pretty sure you can do a knife download on the users
[2013-10-01 22:23:05 -0400] lopaka: you can, and I have, but restoring becomes a problem then
[2013-10-01 22:23:07 -0400] geggam: so that whole expendable server thing doesnt apply when you are using servers to archive irreplaceable data :)
[2013-10-01 22:23:08 -0400] atomic-penguin: lopaka, note those are different than clients
[2013-10-01 22:23:24 -0400] atomic-penguin: lopaka, "users" are just a webui concept
[2013-10-01 22:23:42 -0400] jameson__: i'm trying to squash unique-snowflakes :( so much attachment to local data.
[2013-10-01 22:24:13 -0400] geggam: we house petabytes of snowflakes
[2013-10-01 22:24:43 -0400] lopaka: atomic-penguin: now that makes sense - thanks all for the assist
[2013-10-01 22:30:58 -0400] jameson__: @_@
[2013-10-01 22:32:25 -0400] otakup0pe: alisdair: is there an irc room that you don't stalk me in
[2013-10-01 22:32:41 -0400] alisdair: no
[2013-10-01 22:32:58 -0400] alisdair: we just both have exquisitely good taste?
[2013-10-01 22:33:08 -0400] otakup0pe: indeed.
[2013-10-01 22:33:20 -0400] alisdair: you are not in #clojure as far as i can see?
[2013-10-01 22:33:51 -0400] otakup0pe: ah
[2013-10-01 22:34:16 -0400] otakup0pe: you know damn well my heart belongs to erlang
[2013-10-01 22:49:02 -0400] dgarstang1: Hm so I'm trying to use chef execute to format a disk. Obviously, I don't want to do that on every chef run. With puppet, execute has unless/onlyif which I would test for a label with. Equivalent in chef?
[2013-10-01 22:50:51 -0400] granth: I'm building a cookbook and it looks like the best way to deal with the json config file the app uses is to build an lwrp setting up blocks. Anyone know of an example I could look at, i.e. a cookbook that builds a json config file via attributes or with an lwrp?
[2013-10-01 22:51:32 -0400] mattray: dgarstang1: http://docs.opscode.com/chef/resources.html#conditional-execution
[2013-10-01 22:55:39 -0400] dgarstang1: mattray: cool, thanks
[2013-10-01 22:56:02 -0400] mattray: dgarstang1: take a look at the drbd cookbook, it does some filesystem stuff with check
[2013-10-01 22:56:04 -0400] mattray: s
[2013-10-01 22:56:47 -0400] mattray: https://github.com/opscode-cookbooks/drbd/blob/master/recipes/pair.rb
[2013-10-01 22:56:51 -0400] mattray: just for examples of guards
[2013-10-01 22:56:57 -0400] mattray: probably newer/better stuff to use
[2013-10-01 22:57:05 -0400] mattray: for making filesystems
[2013-10-01 22:57:12 -0400] mattray: if there isn't there should be
[2013-10-01 23:16:08 -0400] gsymons-di: dgarstang1: You can look at node['filesystem'][device]['fs_type'], and if it's the filesystem you want it to be you can use a not_if to prevent the format:
[2013-10-01 23:16:09 -0400] gsymons-di: execute "format_#{volume}_as_xfs" do
[2013-10-01 23:16:09 -0400] gsymons-di:    command "yes | mkfs -t xfs -f #{volume}"
[2013-10-01 23:16:09 -0400] gsymons-di:    not_if { node['filesystem'][volume]['fs_type'] == 'xfs' }
[2013-10-01 23:16:09 -0400] gsymons-di: end
[2013-10-01 23:17:52 -0400] gsymons-di: granth: I've got a couple cookbooks that build up JSON config files, but I just build up a hash and then use JSON.generate to generate the JSON.
[2013-10-01 23:31:22 -0400] gabrtv: i had to hotfix a cookbook, but i can't seem to re-upload to opscode community site.. 504 timeout.. any ideas why?
[2013-10-01 23:31:37 -0400] geggam: connection timeout would be my guess
[2013-10-01 23:32:29 -0400] gabrtv: the first upload worked just fine.. i'm wondering if the fact that i'm trying to upload the same version of the cookbook is causing a timeout.. i'm reuploading v0.1.0
[2013-10-01 23:32:56 -0400] gchristensen: that is not recommended
[2013-10-01 23:33:04 -0400] gchristensen: doing a patch version bump is best
[2013-10-01 23:33:42 -0400] gabrtv: i understand it's not recommended, but we hotfix other software tied to the same versioning scheme
[2013-10-01 23:33:48 -0400] gabrtv: i'm wondering if it's possible
[2013-10-01 23:34:39 -0400] gsymons-di: I'm pretty sure that the community site will not allow multiple uploads of the same version of a cookbook.
[2013-10-01 23:35:00 -0400] gabrtv: is there a way to delete a version of a cookbook?  i can't find that either
[2013-10-01 23:35:57 -0400] granth: gsymons-di: sounds reasonable. Any of them public that I could peek at?
[2013-10-01 23:37:02 -0400] coderanger: gabrtv: You need to contact Opscode support
[2013-10-01 23:37:06 -0400] gsymons-di: Unfortunately, no... one of them probably could be, but we haven't had time to set a policy on opening our stuff up.
[2013-10-01 23:37:21 -0400] coderanger: gabrtv: Also if this is internal only, you shouldn't be putting it up on the community site, semver is expected
[2013-10-01 23:38:56 -0400] gabrtv: coderanger: thx, it's not private.. it's for http://deis.io/
[2013-10-01 23:39:23 -0400] coderanger: Then "we use our own version numbers internally" isn't a valid excuse ;-)
[2013-10-01 23:42:34 -0400] gabrtv: coderanger: we just pushed a bad cookbook.. just now.. no one's downloaded it.. if we have to push a new version, we have to roll semver on 3 other projects and push those too
[2013-10-01 23:43:05 -0400] coderanger: If you want to get the bad push nuked, you'll have to contact support
[2013-10-01 23:43:06 -0400] gabrtv: i understand the semver requirement, but if there's zero downloads i hope you can make an exception
[2013-10-01 23:43:11 -0400] coderanger: But I wouldn't recommend it
[2013-10-01 23:43:16 -0400] gabrtv: i just contacted them
[2013-10-01 23:43:22 -0400] coderanger: ssd7: ^^
[2013-10-01 23:44:23 -0400] coderanger: ssd7: echo 'DELETE FROM cookbook_versions WHERE ...' |  fab community.dbshell
[2013-10-01 23:55:23 -0400] Sasi122: hello... we use chef cookbook for mongodb... everything was working fine until a couple od days ago... now we get an error when trying to bootstrap an instance using the same roles we had been using for a while... the error "undefined method `keys' for nil:NilClass"
[2013-10-01 23:55:34 -0400] ATX_123: i have 3 member replicaset.  the primary has high IO and is in the middle of balancing.  the two secondaries periodically get the following: SocketException: remote: x.x.x.x:27017 error: 9001 socket exception [3] server - then magically start working again later.  ideas?
[2013-10-01 23:56:23 -0400] coderanger: ATX_123: You might be in the wrong place
[2013-10-01 23:56:32 -0400] ATX_123: yup
[2013-10-01 23:56:33 -0400] coderanger: Sasi122: Whats the line of code that is erroring?
[2013-10-01 23:56:45 -0400] Sasi122: the instance was being bootstrapped as a mongos instance...
[2013-10-01 23:56:50 -0400] ATX_123: i have 3 member replicaset. the primary has high IO and is in the middle of balancing. the two secondaries periodically get the following: SocketException: remote: x.x.x.x:27017 error: 9001 socket exception [3] server - then magically start working again later. ideas?
[2013-10-01 23:57:00 -0400] coderanger: ATX_123: Still the wrong channel
[2013-10-01 23:57:11 -0400] Sasi122: coderanger: Error executing action `create` on resource 'ruby_block[config_sharding]'
[2013-10-01 23:57:22 -0400] coderanger: Sasi122: Please pastebin the relevant code
[2013-10-01 23:59:30 -0400] Sasi122: coderanger: http://pastebin.pw/gkeram

[2013-10-18 00:18:56 -0400] pabst^: cpan is the bane of my existance right now
[2013-10-18 00:19:01 -0400] pabst^: everything should be python
[2013-10-18 00:42:15 -0400] sgronblom: I'm getting a strange error "You must supply a name when declaring default resource" on a line that just contains a call to File.join
[2013-10-18 00:56:23 -0400] knuckolls: sgronblom: in a recipe? gist it?
[2013-10-18 01:00:51 -0400] sgronblom: Ok, I tried narrowing it down a bit, just doing puts default results in the same error message
[2013-10-18 01:01:35 -0400] sgronblom: Shouldn't this be possible?
[2013-10-18 01:03:31 -0400] sgronblom: Ah, I should not refer to default in the recipe?
[2013-10-18 01:03:48 -0400] sgronblom: Byt that time all the attributes will have been squashed together into node intead?
[2013-10-18 01:14:38 -0400] knuckolls: sgronblom: yes they're all accessible via the node object
[2013-10-18 01:35:59 -0400] onepiece: is there a way to "source" a cookbook_file that physically resides in another cookbook?
[2013-10-18 01:57:31 -0400] knuckolls: onepiece: many of the resources have a cookbook attribute that lets you do just that
[2013-10-18 01:57:40 -0400] knuckolls: i know the template resource does
[2013-10-18 01:58:19 -0400] knuckolls: i'd put money on the cookbook_file having the same functionality
[2013-10-18 01:59:39 -0400] onepiece: knuckolls: indeed it does.
[2013-10-18 02:11:15 -0400] sgronblom: I have a cookbook with one default attribute that depends on another default attribute, how should I override the dependent attribute from a wrapper cookbook to make it affect the other default attribute that depends on it
[2013-10-18 02:12:55 -0400] adnichols: sgronblom I'm not clear on what you are trying to do - first, what do you mean by an attribute which depends on another attribute? Do you have some code examples you can pastebin?
[2013-10-18 02:14:42 -0400] sgronblom: for example default[:progname][:downloadhost] = "www.progname.org" followed by default[:progname][:download_url] = default[:progname][:downloadhost] + "/path"
[2013-10-18 02:15:03 -0400] sgronblom: In my wrapper cookbook I want to override the downloadhost so that the download_url gets updated
[2013-10-18 02:16:45 -0400] sgronblom: So in the wrapper cookbooks's default recipe I'm trying to figure out the right version of node.overridesomething[:progname][:downloadhost] to use
[2013-10-18 02:17:48 -0400] sgronblom: Not sure if I should be doing it some other way
[2013-10-18 02:18:17 -0400] sgronblom: Maybe make the download_url property be lazy
[2013-10-18 02:20:07 -0400] adnichols: We've had issues w/ having attributes (which are set in attributes files) be dynamic like that
[2013-10-18 02:20:17 -0400] adnichols: specifically, overriding them doesn't work as we expect
[2013-10-18 02:20:37 -0400] sgronblom: And did you manage to solve the problem?
[2013-10-18 02:20:42 -0400] adnichols: don't do that :)
[2013-10-18 02:20:58 -0400] sgronblom: But surely there must be a way to do it
[2013-10-18 02:21:01 -0400] adnichols: it seems like you can set them dynamically inside a recipe
[2013-10-18 02:21:28 -0400] adnichols: but doing so inside the attributes file is problematic - I haven't personally tested it extensively
[2013-10-18 02:22:13 -0400] adnichols: do you have the same path being used to download from different hosts? Is that why you want the host configurable independently?
[2013-10-18 02:22:27 -0400] adnichols: otherwise I'd just make that a straight URL & override it
[2013-10-18 02:23:08 -0400] sgronblom: I'm trying to use/hack a cassandra cookbook I found on github
[2013-10-18 02:23:19 -0400] adnichols: ah, and it sets the url that way?
[2013-10-18 02:23:26 -0400] sgronblom: It was originally written for 1.2 and I want to make it work with 2.0
[2013-10-18 02:23:35 -0400] sgronblom: The url was hardcoded initially except for the version
[2013-10-18 02:23:51 -0400] sgronblom: I want to be able to override multiple parts of the url
[2013-10-18 02:26:13 -0400] adnichols: I am not sure you're going to be able to influence dynamic attributes like that - you can certainly override the end value, but I'm not sure you can override the attributes it uses to construct the URL in a way which actually modifies the resulting URL
[2013-10-18 02:26:38 -0400] sgronblom: That would make me a bit sad
[2013-10-18 02:26:55 -0400] adnichols: you could crack open the original cookbook resources in your wrapper cookbook and probably modfy things easier that way
[2013-10-18 02:26:58 -0400] sgronblom: I thought with the amount of levels of attribute preference that Chef has this would have been possible somehow
[2013-10-18 02:27:11 -0400] adnichols: yeah, but this isn't exactly a precidence issue
[2013-10-18 02:27:32 -0400] adnichols: There's some late binding weirdness I don't fully understand in the way attributes are evaluated
[2013-10-18 02:28:32 -0400] sgronblom: Well there could be one precedence that is "set to this value before defaults" and any values set as default would not override those.
[2013-10-18 02:28:35 -0400] adnichols: If these were just strings it follows straightforward rules - but when you have attributes which are used to construct other attributes I'm not sure when everything is evaluated. Our experience has been that it's not quite the same as a normal attribute
[2013-10-18 02:29:12 -0400] adnichols: yeah, but default/normal/override is a preference that applies when attributes are merged
[2013-10-18 02:29:52 -0400] adnichols: I can't explain it very well because I don't understand it very well :) Don't have a good solution for you
[2013-10-18 02:30:08 -0400] adnichols: But I'm familiar w/ problems related to this
[2013-10-18 02:30:23 -0400] sgronblom: Yeah Chef is complicated :)
[2013-10-18 02:30:43 -0400] adnichols: But there's likely a resource that's using that URL inside the original recipe
[2013-10-18 02:31:01 -0400] sgronblom: Yeah it is using a resource
[2013-10-18 02:31:02 -0400] adnichols: you can modify that resource to use an attribute that you construct vs. the one in the original cookbook
[2013-10-18 02:31:40 -0400] sgronblom: And I would have to reconstruct the URL in my wrapper cookbook to make the effect take place
[2013-10-18 02:31:49 -0400] adnichols: you would
[2013-10-18 02:31:56 -0400] sgronblom: Which sucks
[2013-10-18 02:32:17 -0400] adnichols: yeah, maybe there's a better way
[2013-10-18 02:32:42 -0400] sgronblom: You can't assign lambdas as values?
[2013-10-18 02:34:35 -0400] adnichols: I think you *can* assign just about anything
[2013-10-18 02:34:49 -0400] adnichols: the issue is how they are evaluated & how you can override them
[2013-10-18 03:05:55 -0400] sgronblom: adnichols: You didn't try just creating a library of static helper functions for your cookbook?
[2013-10-18 03:06:40 -0400] adnichols: we do have some of those - but not sure we tried that to fix the override issues
[2013-10-18 03:08:09 -0400] sgronblom: Gonna try it now
[2013-10-18 03:11:16 -0400] arussel: adnichols: I'm having the exact same problem. chef doesn't take into account attribute dependency.
[2013-10-18 03:11:56 -0400] arussel: creating this kind of problem: https://github.com/opscode-cookbooks/maven/pull/27
[2013-10-18 03:12:14 -0400] adnichols: I believe cookbooks are evaluated in alphabetical order - I'd be curious if your wrapper cookbook was "before" your dependent cookbook if it'd change anything - but yeah
[2013-10-18 03:12:22 -0400] arussel: you have to override not only an attribute but also all the attribute taht depent on this one
[2013-10-18 03:13:45 -0400] arussel: override and default, instead of being function that create a tree of depent attribute that when all attribute of all scope are read would compute the value of attribute are just plain hash.
[2013-10-18 03:13:55 -0400] arussel: (this is extremly disapointing)
[2013-10-18 03:14:40 -0400] arussel: the worst is that cookbook, even the one written by opscode, doesn't take this into account.
[2013-10-18 03:14:52 -0400] adnichols: yes, there was a fair amount of forehead to desk over this earlier in the week
[2013-10-18 03:15:27 -0400] arussel: you could just have plain map, if cookbook were written properly.
[2013-10-18 03:15:57 -0400] adnichols: we've kinda taken the approach of not composing attributes in attributes files
[2013-10-18 03:16:01 -0400] arussel: but having this https://github.com/opscode-cookbooks/maven/blob/master/attributes/default.rb knowing that attribute resolution doesn't take dependency into account makes no sense to me.
[2013-10-18 03:16:10 -0400] adnichols: we either make them simple strings or compose them in a recipe
[2013-10-18 03:16:12 -0400] arussel: yes, do it in recipe
[2013-10-18 03:16:19 -0400] arussel: exactly :-)
[2013-10-18 03:17:21 -0400] arussel: simple goes into attribute file, then in the read me you describe all the dependent one.
[2013-10-18 03:17:45 -0400] arussel: in recipe, you check the presence of dependent one, if none, you recreate it with the value of simple one.
[2013-10-18 03:18:44 -0400] arussel: node['foo']['bar'] ||= "#{node['x']['y']}"
[2013-10-18 03:18:59 -0400] adnichols: makes sense
[2013-10-18 03:20:58 -0400] arussel: I'm not a ruby prog, it might be a bit more complex than single line, if it depends of multiple attribute, but considering the recipe writter knows the attribute dependency tree, it can't be that complex.
[2013-10-18 03:21:45 -0400] adnichols: I have no idea how complex changing it would be
[2013-10-18 03:33:35 -0400] knuckolls: adnichols, arussel: as i understand it, the attribute files are eval'd only once. because there is no second pass they don't get eval'd when they have all of the information about all the attributes
[2013-10-18 03:34:01 -0400] adnichols: knuckolls right, that's my understanding
[2013-10-18 03:34:34 -0400] adnichols: however, I think attributes of the same precidence are first come first win - so you could possibly override by getting your wrapper cookbook to eval first
[2013-10-18 03:35:21 -0400] knuckolls: i have solved this in the past with chef-rewind or just dealt with it and painstakenly overridden all the attributes that were messed up because of the load order
[2013-10-18 03:35:47 -0400] adnichols: and using chef-rewind you are just modifying the resource that uses the attribute to use one from your wrapper?
[2013-10-18 03:36:22 -0400] knuckolls: if it works out that i can do that to the wrapped cookbook
[2013-10-18 03:36:45 -0400] knuckolls: for example, i don't believe you can rewind the not_if idempotency guardw
[2013-10-18 03:36:51 -0400] knuckolls: guards*
[2013-10-18 03:37:08 -0400] adnichols: huh, interesting
[2013-10-18 03:37:46 -0400] knuckolls: so if dependent attributes are used in those i just override the attribute manually and deal with the maintenance overhead
[2013-10-18 03:38:06 -0400] adnichols: ok
[2013-10-18 03:38:23 -0400] knuckolls: and submit a patch if i can
[2013-10-18 03:38:58 -0400] knuckolls: the factoid about not being able to rewind not_ifs may not be 100% true
[2013-10-18 03:39:10 -0400] knuckolls: but i recall having troubles doing so
[2013-10-18 03:40:02 -0400] arussel: knuckolls: I don't know much about ruby, but it should be trivial to create a dependency tree of attribute first and then set them when we have all info, no ?
[2013-10-18 03:42:05 -0400] knuckolls: yes, within chef. that would be a breaking change to how attributes work though
[2013-10-18 03:42:33 -0400] knuckolls: even though i consider it a bug
[2013-10-18 03:44:02 -0400] knuckolls: arussel: cyclical dependencies
[2013-10-18 03:44:12 -0400] knuckolls: that would be the complexity
[2013-10-18 03:44:18 -0400] arussel: knuckolls: do you have an example ?
[2013-10-18 03:44:35 -0400] knuckolls: of cyclical dependencies?
[2013-10-18 03:44:42 -0400] arussel: (a real life example of a cookbook writer that would want to use cyclical dependency)
[2013-10-18 03:45:18 -0400] knuckolls: oh i would consider all cyclical dependencies bugs i think
[2013-10-18 03:45:25 -0400] arussel: if we're just talking therory, then use the recipie order.
[2013-10-18 03:46:15 -0400] arussel: it would be a bug, and creating the tree would actually warn the user that he's got a but, even better
[2013-10-18 03:46:26 -0400] arussel: s/but/bug/
[2013-10-18 03:46:43 -0400] knuckolls: that's true
[2013-10-18 03:47:24 -0400] knuckolls: it would merely be more complexity in the implementation to detect and warn about such things
[2013-10-18 03:47:36 -0400] knuckolls: i suppose that's what i meant
[2013-10-18 03:47:52 -0400] knuckolls: but if implemented seems like it would be quite nice
[2013-10-18 04:01:06 -0400] arussel: would love to know, when you create a function in ruby foo(bar: String) and if bar is "#{x}" you can somehow know that it was #{x} or if you just get the resolved string (in which case you can't don anything)
[2013-10-18 04:34:31 -0400] knuckolls: as far as i'm aware it works exactly as described. you would just get the resolved string
[2013-10-18 05:34:06 -0400] ezkl: arussel: If you really, really wanted to know and you're using Ruby 2.0, you could potentially use http://ruby-doc.org/core-2.0.0/TracePoint.html
[2013-10-18 05:49:05 -0400] arussel: ezkl: isn't #{ a function call you could overwite ?
[2013-10-18 05:49:48 -0400] arussel: but it is mostly pointless curiosity on my side :-)
[2013-10-18 06:35:28 -0400] Cope: moin
[2013-10-18 07:21:32 -0400] coderanger: kallistec: Can the deploy resource not remove the folder for failed deploys? Makes it super hard to debug interactively
[2013-10-18 07:22:53 -0400] coderanger: (maybe just move it to releases/failed or something)
[2013-10-18 08:05:28 -0400] legal90: Hallo! Is the system group 'sysamin' using for something special in chef?
[2013-10-18 08:06:29 -0400] legal90: looks like I've found a bug in the 'sudo' cookbook
[2013-10-18 08:06:31 -0400] legal90: https://github.com/opscode-cookbooks/sudo/blob/master/templates/default/sudoers.erb
[2013-10-18 08:07:09 -0400] legal90: I really don't need for 'sysadmin' group
[2013-10-18 08:11:39 -0400] laurent\: legal90: i'm not sure it's a bug, but i agree it should not be included by default
[2013-10-18 08:12:21 -0400] laurent\: i don't see the point of having by default
[2013-10-18 08:12:37 -0400] laurent\: oh i guess you could fill a ticket about that
[2013-10-18 08:12:59 -0400] laurent\: not too difficult to provide a patch for that
[2013-10-18 08:14:42 -0400] legal90: yeah, i'm going to make a pull-request which provides Mac OS X capatibility for this cookbook. I'll discuss this default template entry too
[2013-10-18 08:15:17 -0400] BladieBla: Does chef-client -o <cookbook> also changes the run list on the chef-server?
[2013-10-18 08:15:43 -0400] BladieBla: Chef client 11.6 and server 11.4
[2013-10-18 08:20:19 -0400] kisoku: yes
[2013-10-18 08:20:23 -0400] kisoku: erm
[2013-10-18 08:20:24 -0400] kisoku: no
[2013-10-18 08:20:35 -0400] kisoku: it doesn't change the run_list of the node on the server
[2013-10-18 08:20:56 -0400] kisoku: but it DOES save the expanded node[:recipes] and node[:roles] on the server
[2013-10-18 08:21:11 -0400] kisoku: which can be problematic for searches in your cookbooks later
[2013-10-18 08:23:17 -0400] BladieBla: If the -o option gets a cookbook which is not in the standard run list, then does it remove the other roles the node has on the chef-server?
[2013-10-18 08:41:54 -0400] BladieBla: If the -o option gets a cookbook which is not in the standard run list, then does it remove the other roles the node has on the chef-server?
[2013-10-18 09:03:16 -0400] ravibhim: hi, I'm writing a file to /etc/profile.d, which sets up some environment variables. Whats a clean way to load up those environment variables in the same chef-run, so that the subsequent commands work?
[2013-10-18 09:13:54 -0400] laurent\: ravibhim: is the file made from a template ? iow do you get the env from a node attribute ?
[2013-10-18 09:20:18 -0400] ravibhim: file "/etc/profile.d/ruby_path.sh" do
[2013-10-18 09:20:19 -0400] ravibhim:   owner "root"
[2013-10-18 09:20:19 -0400] ravibhim:   group "root"
[2013-10-18 09:20:19 -0400] ravibhim:   mode 00755
[2013-10-18 09:20:19 -0400] ravibhim:   action :create_if_missing
[2013-10-18 09:20:20 -0400] ravibhim:   content "export PATH=/usr/local/ruby/1.9.3-p362/bin:$PATH"
[2013-10-18 09:20:20 -0400] ravibhim: end
[2013-10-18 09:21:52 -0400] ravibhim: laurent: basically the problem I'm solving is that I've installed ruby 1.9.3 and its path is not setting set in the PATH
[2013-10-18 09:23:18 -0400] ravibhim: so what I've done is create a file in /etc/profile.d and somehow source it before further commands such as bundle
[2013-10-18 09:30:19 -0400] ezkl: ravibhim: tried update-alternatives?
[2013-10-18 09:31:39 -0400] arussel: I'm having a problem with this: sed -i 's/java\(.*\)/screen -d -m java\1 \&/' run.sh this is in a code part of bash resource using <<-EOH..EOH
[2013-10-18 09:32:56 -0400] arussel: when I run the command inside my vm it does as expected, but when chef is running the commmand, the file stays unchanged. Is there anything in that command that could be parsed by ruby instead of  being sent straight to bash ?
[2013-10-18 09:33:34 -0400] dmdeklerk: arussel: <<-EOH..EOH is a ruby doc string
[2013-10-18 09:34:02 -0400] arussel: isn't it just a multiline string ?
[2013-10-18 09:34:04 -0400] dmdeklerk: arussel: have you tried running it in IRB
[2013-10-18 09:34:21 -0400] arussel: that's easy to do, thanks for the advice :-)
[2013-10-18 09:36:25 -0400] ravibhim: ezkl: reading up on update-alterntives
[2013-10-18 09:36:43 -0400] ravibhim: hearing it for hte first time
[2013-10-18 09:38:46 -0400] Garo_: Anybody here use Ironfan? I'd like to hear some opinions about it :)
[2013-10-18 09:43:33 -0400] arussel: when I print the string, what was \1 becomes \001, not sure what that means
[2013-10-18 09:45:34 -0400] dmdeklerk: arussel: what should it print? "\1" ?
[2013-10-18 09:46:56 -0400] arussel: my sed expression is 's/foo(.*)/bar\1/', \1 means the value 'caught' by the capturing () .
[2013-10-18 09:47:36 -0400] arussel: so \1 should be sent to bash and not \001
[2013-10-18 09:50:20 -0400] dmdeklerk: arussel: you could try `puts '\\1'` notice the single quotes
[2013-10-18 09:50:40 -0400] arussel: yes, I'm trying it now :-)
[2013-10-18 09:51:25 -0400] dmdeklerk: arussel: in IRB "puts 's/foo(.*)/bar\\1/'" this works for me
[2013-10-18 09:51:38 -0400] dmdeklerk: outputs: s/foo(.*)/bar\1/
[2013-10-18 09:53:25 -0400] arussel: dmdeklerk: yes, this seems to work, thanks for your help
[2013-10-18 09:54:29 -0400] dmdeklerk: arussel: cool, i never heard of sed, it sounds complicated "Sed is the ultimate stream editor. " wtf
[2013-10-18 09:55:30 -0400] arussel: dmdeklerk: it was, it is the son of ed, which we can call a single line text editor.
[2013-10-18 09:55:45 -0400] dmdeklerk: lol
[2013-10-18 09:56:06 -0400] arussel: but it allows to run regex on file and modify content, this is actually a very common admin tool.
[2013-10-18 09:56:28 -0400] arussel: it was use a lot before IDE to refactor code
[2013-10-18 09:56:44 -0400] arussel: grep the function name and the sed it to refactor :-)
[2013-10-18 09:56:52 -0400] dmdeklerk: ahhh, cool learned something today
[2013-10-18 09:57:13 -0400] bougyman: you've never heard of sed?
[2013-10-18 09:57:20 -0400] arussel: but you should have a look at basic sed, this is very usefull (ed not that much)
[2013-10-18 09:57:34 -0400] bougyman: sed and awk are sysadmin 101.
[2013-10-18 09:57:55 -0400] arussel: bougyman: there was a time were you had never heard of it too :-)
[2013-10-18 09:58:06 -0400] dmdeklerk: I'm a java now ruby convert, I came to chef because i need to setup a web stack
[2013-10-18 09:58:18 -0400] arussel: (I might disagree about awk)
[2013-10-18 09:58:21 -0400] bougyman: arussel: before they existed, maybe.
[2013-10-18 09:59:46 -0400] bougyman: arussel: i've always considered sed and awk cousins
[2013-10-18 09:59:50 -0400] dmdeklerk: learned two things today http://en.wikipedia.org/wiki/AWK
[2013-10-18 10:00:39 -0400] arussel: bougyman: they are, but if you're a ruby dev, and haven't previously learn awk, I doubt that you will bother as ruby oneliner will most likely do the job
[2013-10-18 10:01:15 -0400] bougyman: very few people who use ruby even know of ruby -F
[2013-10-18 10:01:17 -0400] dmdeklerk: arussel: I agree, it depends on the system your on i guess
[2013-10-18 10:01:25 -0400] bougyman: and it's more clumsy than awk, even with -F
[2013-10-18 10:02:02 -0400] ichilton: Is there a guide somewhere for submitting cookbooks to the community site?
[2013-10-18 10:02:24 -0400] arussel: not saying ruby is better than awk for some job, but that learning awk for those particular job might be to much time. (this is obviously a factless opinion)
[2013-10-18 10:02:48 -0400] arussel: ichilton: knife cookbook share ... (iirc)
[2013-10-18 10:03:08 -0400] ichilton: arussel: ok, thanks
[2013-10-18 10:03:57 -0400] bougyman: arussel: especially for something like git st|awk  'BEGIN{p=0}/modified/&&p==1{printf $(NF)\" \"}/Changes not staged for commit:/{p=1}'
[2013-10-18 10:04:11 -0400] bougyman: BEGIN and END are the powerhouse features of awk, imo
[2013-10-18 10:06:05 -0400] arussel: awk oneliner are nice :-)
[2013-10-18 10:07:27 -0400] bougyman: i don't even want to think about how much ruby that would take
[2013-10-18 10:10:54 -0400] arussel: probably a small script that a ruby dev would write much faster than getting the awk oneliner right
[2013-10-18 10:11:57 -0400] arussel: isn't begin and end just a way to keep some state while reading the file lines ?
[2013-10-18 10:12:52 -0400] dmdeklerk: I guess you'll never know because the ruby dev could never figure out what that awk command does. ;)
[2013-10-18 10:16:35 -0400] irr: Ohai Chefs. Does anybody know how to get the new version of a cookbook installed with Berkshelf? I have "chef_api: config" as a default cookbooks source and running `berks install` or `berks update` doesn't update cookbooks cache if there is a new cookbook in chef-server
[2013-10-18 10:17:38 -0400] dmdeklerk: irr: try deleting the cookbook from .berkshelf/cookbooks and delete Berksfile.lock, that might work
[2013-10-18 10:18:20 -0400] irr: dmdeklerk: deleting the cache at ~/.berkshelf/my-cookbook definitely work but I'm trying to do it with berks
[2013-10-18 10:20:11 -0400] dmdeklerk: irr: ?? sorry dontknow
[2013-10-18 10:21:19 -0400] arussel: irr: last time I asked a question on #berkshelf, an answer came really quickly
[2013-10-18 10:21:39 -0400] irr: arussel: thanks, I'll try it
[2013-10-18 10:35:01 -0400] slam-: hey jtimberman, we need a cookbook to create cron lines in /etc/crontab (or wherever else), based on attributes. Is it worth a contrib to https://github.com/opscode-cookbooks/cron ?
[2013-10-18 10:38:43 -0400] irr: slam-: why just not to use lwrp provided by opscode-cookbooks/cron? It installs new cron jobs into /etc/cron.d/ https://github.com/opscode-cookbooks/cron/blob/master/providers/d.rb#L27
[2013-10-18 10:40:13 -0400] slam-: i can see that
[2013-10-18 10:42:04 -0400] slam-: but i need to create different cronjobs on multiple nodes, and i think i could declare role attributes for each node, and let 1 cookbook handle the job, instead of creating 1 cookbook per node
[2013-10-18 10:43:02 -0400] slam-: eventually, the existing cron cookbook could handle it
[2013-10-18 10:43:46 -0400] slam-: whatever if it actually uses cron() or cron_d()
[2013-10-18 10:47:22 -0400] irr: slam-: you definitely should not create cookbook per node. Just create a cookbook wrapper for "cron" cookbook and provide node[:cron][:whatever] as params to cron() or cron_d(). Then assign this cookbook-wrapper/recipe to all the nodes you need
[2013-10-18 10:50:56 -0400] slam-: thanks for your suggestion, thats why i asked if it is worth a contrib to the "cron" cookbook directly
[2013-10-18 10:51:21 -0400] slam-: but i might be wrong
[2013-10-18 10:56:16 -0400] ocholetras: attributes setted on recipes
[2013-10-18 10:56:36 -0400] ocholetras: get merged with all other ones following precedence rules before start to execute recipes?
[2013-10-18 10:57:42 -0400] irr: slam-: afaik "cron" is supposed to be a "library" cookbook and should only provide lwrp.
[2013-10-18 10:58:25 -0400] slam-: irr: ok, i did not get that, i will write a wrapper, thanks ! :)
[2013-10-18 11:11:52 -0400] ocholetras: so recipe attributes are evaluated on runlist order, does also cookbook attribute files evaluated in order? that said i cant use an attribute now if that attribute is going to be setted by a recipe later in the runlist
[2013-10-18 11:11:56 -0400] ocholetras: am i right?
[2013-10-18 11:13:55 -0400] ocholetras: pecedence order on attributes also implies greather precedence value attributes to be evaluated earlier than lower ones..
[2013-10-18 11:16:25 -0400] ocholetras: omg defining default array attr on role, gets merged with cookbook defaults.rb
[2013-10-18 11:16:34 -0400] ocholetras: but defining array attr on recipe...
[2013-10-18 11:16:47 -0400] ocholetras: override the defaults.rb ones..
[2013-10-18 11:16:48 -0400] ocholetras: O_o
[2013-10-18 11:18:57 -0400] arussel: ocholetras: this might help http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-10-18 11:20:21 -0400] ocholetras: arussel: im talking about attributes on recipes, not attribute files
[2013-10-18 11:21:22 -0400] ocholetras: i have already readed that
[2013-10-18 11:21:46 -0400] ocholetras: I have an attr on attribute file like: default['foo'] = ['bar']
[2013-10-18 11:22:07 -0400] ocholetras: when i put default_attributes on role 'foo' => ['bar1']
[2013-10-18 11:22:22 -0400] arussel: so Attribute Precedence tells that attribue on recipe overwrite attribute on file
[2013-10-18 11:22:26 -0400] ocholetras: end value for "foo" attribute is ['bar','bar1']
[2013-10-18 11:22:50 -0400] arussel: hmm
[2013-10-18 11:23:10 -0400] ocholetras: when attribute is an array
[2013-10-18 11:23:15 -0400] ocholetras: it gets merged
[2013-10-18 11:23:18 -0400] ocholetras: array or hash
[2013-10-18 11:24:30 -0400] ocholetras: if the attr is a value, then is overwritten
[2013-10-18 11:24:37 -0400] ocholetras: according to the precedence order..
[2013-10-18 11:26:20 -0400] bcave: good afternoon :)
[2013-10-18 11:26:38 -0400] ocholetras: node.default["openssh"]["server"]["allow_groups"] = ["example"]
[2013-10-18 11:26:38 -0400] ocholetras: that is  on a recipe. Is it right?
[2013-10-18 11:26:38 -0400] ocholetras: hi
[2013-10-18 11:26:55 -0400] dmdeklerk: noon to you to
[2013-10-18 11:27:55 -0400] ocholetras: arussel: seems right according to this http://docs.opscode.com/chef_overview_attributes.html#examples
[2013-10-18 11:29:01 -0400] arussel: ocholetras: where do you see that this should push to the array instead of overwriting it ?
[2013-10-18 11:29:09 -0400] arussel: this doesn't seems right to me.
[2013-10-18 11:29:10 -0400] ocholetras: in action
[2013-10-18 11:29:27 -0400] arussel: how then do you remove 'bar' from the array ?
[2013-10-18 11:29:34 -0400] ocholetras: https://coderanger.net/2013/06/arrays-and-chef/
[2013-10-18 11:30:01 -0400] ocholetras: yo have to define a higher precedence attribute, i think
[2013-10-18 11:30:16 -0400] ocholetras: then the attribute is overwritten
[2013-10-18 11:31:28 -0400] arussel: really good to know
[2013-10-18 11:31:43 -0400] ocholetras: there is nothing about that behaviour on the docs..
[2013-10-18 11:31:48 -0400] ocholetras: -_-'
[2013-10-18 11:32:25 -0400] ocholetras: is the same that happens when you use hashes
[2013-10-18 11:32:33 -0400] arussel: yeah, the last comment on the blog complains about it too
[2013-10-18 11:41:28 -0400] mattsmith: Hi All, What are the best practices for multiple users editing cookbooks within the same organisation?  how does hosted chef deal with conflicts etc?
[2013-10-18 11:42:46 -0400] ocholetras: mattsmith: the conflicts and the works goes throught git and the team repo
[2013-10-18 11:42:51 -0400] arussel: for me a chef server is a bit like a nexus/maven server, you put file there that have been tested, you don't just push there
[2013-10-18 11:43:11 -0400] arussel: push to git -> test -> deploy to server
[2013-10-18 11:43:20 -0400] ocholetras: you can work with environments and cookbook versions
[2013-10-18 11:43:28 -0400] ocholetras: or vagrant ...etc...
[2013-10-18 11:43:36 -0400] ocholetras: do a search on testing strategies with chef
[2013-10-18 11:43:44 -0400] ocholetras: you will get some useful links
[2013-10-18 11:45:26 -0400] ocholetras: arussel: what can i do if i want to add a 3rdparty group to "allo_groups" on sshserver attribute. When a node has a 3rdparty role, without having to define attrs on the role?
[2013-10-18 11:45:26 -0400] ocholetras: now im using a users::3rdparty recipe to create users and assign the 3rdparty group, and tried to define default attribute array there..
[2013-10-18 11:46:05 -0400] ocholetras: The role method works, but there are a lot of people saying that you dont have to put attrs on roles unless it is absolutely unavoidable!
[2013-10-18 11:46:09 -0400] ocholetras: ><'
[2013-10-18 11:47:08 -0400] arussel: no idea
[2013-10-18 11:47:30 -0400] arussel: I'm far from being an expert user :/
[2013-10-18 11:50:05 -0400] mattsmith: ocholetras, git -> test -> deploy to server? how do you test without pushing to the server?
[2013-10-18 11:50:33 -0400] ocholetras: with vagrant
[2013-10-18 11:50:34 -0400] ocholetras: and chef-solo
[2013-10-18 11:50:47 -0400] ocholetras: and you can pin the version of your cookbook, upload new one and include it on the testing environment..
[2013-10-18 11:50:50 -0400] ocholetras: then apply to a node..
[2013-10-18 11:50:53 -0400] ocholetras: when it is stable
[2013-10-18 11:51:03 -0400] ocholetras: change de old version for the new one on the production environment
[2013-10-18 11:51:12 -0400] ocholetras: do that search on google,
[2013-10-18 11:51:20 -0400] ocholetras: it is everything there ;)
[2013-10-18 11:53:12 -0400] mattsmith: ocholetras, thanks for the great advise. Found some very useful articles
[2013-10-18 11:53:45 -0400] ocholetras: np
[2013-10-18 11:55:35 -0400] ocholetras: arussel: if i do a +=
[2013-10-18 11:55:44 -0400] ocholetras: on the recipe attribute assignation
[2013-10-18 11:55:50 -0400] ocholetras: it merges to the array
[2013-10-18 11:55:52 -0400] ocholetras: so wtf XD
[2013-10-18 11:56:07 -0400] ocholetras: Are Recipe attributes  direct assignation? O_o
[2013-10-18 11:57:54 -0400] arussel: I believe the only way to find out what is going on is to look at the code ...
[2013-10-18 12:06:09 -0400] ocholetras: from now on im going to assume that recipe array attributes doesnt get merged, at same level of precedence as other like roles, attrfiles etc..
[2013-10-18 12:07:43 -0400] knuckolls: ocholetras: https://coderanger.net/2013/06/arrays-and-chef/
[2013-10-18 12:07:56 -0400] knuckolls: possibly useful
[2013-10-18 12:08:39 -0400] ocholetras: yea
[2013-10-18 12:08:43 -0400] ocholetras: already saw that
[2013-10-18 12:08:47 -0400] arussel: :-) he posted the link less than an hour ago
[2013-10-18 12:13:07 -0400] ocholetras: knuckolls: i have just check that when you do node.default['foo'] = ['bar2'] having node.default['foo'] = ['bar1'] (on attributes file on your cookbook) then arrays are not set-unioned
[2013-10-18 12:17:30 -0400] ocholetras: arussel:
[2013-10-18 12:17:39 -0400] ocholetras: i have found the issue
[2013-10-18 12:18:10 -0400] ocholetras: was trying to define attributes from one cookbook on a recipe inside another cookbook
[2013-10-18 12:18:29 -0400] ocholetras: inside the same cookbook, assignation works as expected
[2013-10-18 12:28:03 -0400] bcave: mind if I ask a more ruby-related question here?
[2013-10-18 12:28:25 -0400] dmdeklerk: bcave: ask
[2013-10-18 12:29:02 -0400] bcave: actually, I'll try figure it out myself, never mind.
[2013-10-18 12:31:03 -0400] dmdeklerk: Are there recipes that should NOT be used with 'include_recipe'
[2013-10-18 12:31:05 -0400] dmdeklerk: ?
[2013-10-18 12:31:57 -0400] dmdeklerk: It seems like recipes loaded through include_recipe do things *different*  from loading one through a run_lits
[2013-10-18 12:32:01 -0400] dmdeklerk: list
[2013-10-18 12:33:44 -0400] dmdeklerk: Is anyone using "include_recipe    'chef-client'" in your recipe? I read it in the "chef-infrastructure-automation-cookbook" book
[2013-10-18 12:38:27 -0400] ocholetras: include loads default.rb recipe
[2013-10-18 12:39:10 -0400] bcave: dmdeklerk: it was more of a  syntax question. i wasn't sure about syntax of  var = condition ? "true"
[2013-10-18 12:39:23 -0400] bcave: dmdeklerk: it was more of a  syntax question. i wasn't sure about syntax of  var = condition ? "true" : "false" (can never remember the name of that structure)
[2013-10-18 12:41:08 -0400] dmdeklerk: ocholtras: yeah I know that, never mind, time for coffee
[2013-10-18 12:41:51 -0400] dmdeklerk: bcave: dont the name of that either. but it sure is valid ruby.
[2013-10-18 12:43:30 -0400] bcave: but my condition had AND's and OR's too, so relatively easy to test
[2013-10-18 12:43:30 -0400] bcave: file_suffix = (node.chef_environment.nil? or node.chef_environment == "_default") ? "BUILD" : node.chef_environment
[2013-10-18 12:43:30 -0400] bcave: dmdeklerk: are you using an include_recipe "cookbook::recipe" syntax ?
[2013-10-18 12:45:22 -0400] Cope: bcave: ternary
[2013-10-18 12:45:47 -0400] dmdeklerk: bcave: i'm trying to set up test-kitchen and now standard opscode cookbooks start failing, its like using include_recipe does not load the attributes or resources/providers from a cookbook
[2013-10-18 12:47:01 -0400] dmdeklerk: when I do "include_recipe 'chef-client'" it fails in /tmp/kitchen-chef-solo/cookbooks/chef-client/recipes/service.rb: 37>> init_style = node["chef_client"]["init_style"]
[2013-10-18 12:47:37 -0400] bcave: i generally put chef-client directly into my role. 'recipe[chef-client::service]', instead of include_recipe "chef-client::service]'
[2013-10-18 12:47:37 -0400] bcave: then again, the way I generally do things I am sure goes against quite a number of best-practises :)
[2013-10-18 12:48:19 -0400] dmdeklerk: bcave: I saw that just now, rbenv through include_recipe does not work but on my run_list it does
[2013-10-18 12:48:34 -0400] dmdeklerk: where all beginners  ;-)
[2013-10-18 12:51:15 -0400] ocholetras: dmdeklerk: do you have "depends" statements on metadata.rb
[2013-10-18 12:51:17 -0400] ocholetras: ?
[2013-10-18 12:51:37 -0400] ocholetras: only by having that, attributes from the depends cookbooks gets evaluated
[2013-10-18 12:51:46 -0400] ocholetras: even if you dont make an include
[2013-10-18 12:54:03 -0400] dmdeklerk: ocholetras: yes i do, it seems to be working as long as i directly list recipes in kitchen.yml instead of doing include_recipe from my own recipe. works for me
[2013-10-18 12:56:39 -0400] ocholetras: never  used test-kitchen
[2013-10-18 12:56:45 -0400] ocholetras: starting with chef..
[2013-10-18 12:56:50 -0400] ocholetras: enough to learn
[2013-10-18 12:56:56 -0400] ocholetras: test will come.. some daty
[2013-10-18 12:56:57 -0400] ocholetras: day
[2013-10-18 12:56:59 -0400] ocholetras: ><'
[2013-10-18 12:57:11 -0400] dmdeklerk: me too. you should try tdd though.
[2013-10-18 13:00:33 -0400] dmdeklerk: ocholetras: thanks, you gave me an idea, in my test-kitchen setup there is a test cookbook and its metadata.rb did not reference my main recipe. can we fix it.. YES we can
[2013-10-18 13:02:38 -0400] proffalken: If I have a script that is run as part of a "bash" block (python in this case from a template), can I turn the output of that script into data I can search easily from other nodes?
[2013-10-18 13:05:44 -0400] Cope: i suspect not, using a bash block
[2013-10-18 13:06:04 -0400] Cope: however with a ruby block you could assign the output of a shellout to a value
[2013-10-18 13:07:08 -0400] ocholetras: dmdeklerk: glad i can help ^^
[2013-10-18 13:07:33 -0400] Cope: i'm not saying this with any degree of certainty, and I've not tested it... but I think I'd start with a Ruby block calling the python via %x[] or somesuch
[2013-10-18 13:08:02 -0400] proffalken: yeah, maybe I'll try to force the value through the Django ORM from chef instead... :D
[2013-10-18 13:08:40 -0400] pabst^: so what would cause the node status page to be inaccurate?
[2013-10-18 13:08:52 -0400] pabst^: Nodes that are checking in just fine, don't show up on the page
[2013-10-18 13:18:30 -0400] sanguisdex: where can I read up on updating a previously boot strapped node to with its updated run list?
[2013-10-18 13:19:33 -0400] dmdeklerk: sanguisdex: http://www.packtpub.com/chef-infrastructure-automation-cookbook/book
[2013-10-18 13:19:44 -0400] CPS: run chef-client on the node, that will execute its run list
[2013-10-18 13:20:01 -0400] dmdeklerk: sanguisdex: i know thats kinda lame, i'm reading it right now
[2013-10-18 13:20:33 -0400] sanguisdex: dmdeklerk: hey I asked for reading you provided, I did not say free reading :)
[2013-10-18 13:20:40 -0400] sanguisdex: CPS cheers!
[2013-10-18 13:21:03 -0400] dmdeklerk: sanguisdex: its not free.. but its worth it
[2013-10-18 13:21:41 -0400] sanguisdex: I will have my boss order it for me!
[2013-10-18 13:27:26 -0400] dmdeklerk: Cool.. just got a "SystemStackError:stack level too deep error" in test-kitchen, there is a recipe within a recipe within a cookbook within a kitchen. whats the name of that movie
[2013-10-18 13:29:41 -0400] gchristensen: I wish I could only get chapter 7 of TDI with Chef ed 2
[2013-10-18 13:36:40 -0400] proffalken: dmdeklerk: inception?
[2013-10-18 13:37:49 -0400] dmdeklerk: gchristensen: thanks for the tip, i have edition 1 but edition 2 seems to have over 300 pages instead of 90 for edition 1.
[2013-10-18 13:38:09 -0400] gchristensen: dmdeklerk: what?
[2013-10-18 13:38:18 -0400] dmdeklerk: proffalken: thats the one
[2013-10-18 13:38:44 -0400] dmdeklerk: gchristensen: i did not know there was a 2nd edition of that book
[2013-10-18 13:38:53 -0400] gchristensen: OH! got it :) it just came out. I wasn't sure how I gave you a tip :P
[2013-10-18 13:39:25 -0400] dmdeklerk: "chapter 7 of TDI with Chef ed 2"
[2013-10-18 13:39:33 -0400] ichilton: Yeah, it's just been released
[2013-10-18 13:40:24 -0400] ichilton: It's a big revision over the first edition
[2013-10-18 13:41:44 -0400] dmdeklerk: first there is no documentation (in book form) and now there are two..
[2013-10-18 13:42:16 -0400] ichilton: gchristensen: hmmm, Ch.7 is the Bibliography in the old draft I reviewed back in June - they must have added a chapter!
[2013-10-18 13:42:21 -0400] dmdeklerk: i wish i had that when I started chef a (very frustrating) month ago
[2013-10-18 13:42:33 -0400] ichilton: oh wait, I think I remember Cope saying they were splitting one of the long chapters into 2...
[2013-10-18 13:42:47 -0400] gchristensen: ichilton: ch7 is the only one that looks interesting to me :P
[2013-10-18 13:42:52 -0400] dcrosta: i always forget, can someone remind me how to search in "nested" attributes using `knife search` -- e.g. knife search node "ec2.instance_id:blahblah" (although . doesn't work, nor _)
[2013-10-18 13:42:56 -0400] ichilton: gchristensen: the toolchain one?
[2013-10-18 13:43:23 -0400] gchristensen: ichilton: yeah, that one seemed the only one that actually got somewhere. heh.
[2013-10-18 13:43:50 -0400] ichilton: nod - that's ch.6 in my review copy
[2013-10-18 13:44:02 -0400] ichilton: There are actually 3x Chef books now
[2013-10-18 13:44:28 -0400] dmdeklerk: Test-Driven Infrastructure with Chef, 2nd Edition: http://shop.oreilly.com/product/0636920030973.do (for anyone who is interested)
[2013-10-18 13:44:38 -0400] ichilton: ^^ that one
[2013-10-18 13:44:49 -0400] ichilton: the packtpub starter one - http://www.packtpub.com/chef-starter/book
[2013-10-18 13:45:00 -0400] ichilton: the packtpub cookbook - http://www.packtpub.com/chef-infrastructure-automation-cookbook/book
[2013-10-18 13:45:27 -0400] ichilton: They are all worth a read.
[2013-10-18 13:45:40 -0400] dmdeklerk: Those books should be http://docs.opscode.com !!
[2013-10-18 13:45:47 -0400] dmdeklerk:  *on*
[2013-10-18 13:46:13 -0400] ichilton: yeah
[2013-10-18 13:46:15 -0400] dmdeklerk: at least a reference to them
[2013-10-18 13:49:07 -0400] ocholetras: learnchef pdf is beeing useful for me also
[2013-10-18 13:49:46 -0400] dmdeklerk: ocholetras: thats the wiki in pdf form right?
[2013-10-18 13:49:55 -0400] ocholetras: nop
[2013-10-18 13:50:04 -0400] ocholetras: is a slideshow pdf
[2013-10-18 13:50:29 -0400] dmdeklerk: ocholetras: got a link?
[2013-10-18 13:53:50 -0400] dmdeklerk: ocholetras: this one ? https://github.com/opscode/chef-fundamentals/blob/master/slides/introduction/01_slide.md it starts with "Welcome to Chef Fundamentals!"
[2013-10-18 13:54:54 -0400] ocholetras: http://www.opscode.com/training/#free-open
[2013-10-18 13:55:30 -0400] ocholetras: the one im talking about has 574 Slides
[2013-10-18 13:55:38 -0400] ocholetras: you can request for free on that url!
[2013-10-18 13:55:42 -0400] dmdeklerk: cool thanks.
[2013-10-18 13:55:51 -0400] ocholetras: it is some basic concepts
[2013-10-18 13:56:18 -0400] ocholetras: but examples and some like step by step... as far as you can do with slides he he
[2013-10-18 13:56:25 -0400] b-dean: I'm having an issue with the java cookbook on windows and I'm wondering what is the best way to figure out why a user on github decided to write something that to me seems really strange
[2013-10-18 13:57:03 -0400] b-dean: I added a comment on the line on the revision on github but I have no idea if people actually read those
[2013-10-18 14:00:17 -0400] b-dean: nevermind, I think I figured out what they were doing
[2013-10-18 14:11:32 -0400] tos9: Hey.
[2013-10-18 14:11:56 -0400] jbz: Cheers.
[2013-10-18 14:12:05 -0400] tos9: Does anyone have anything interesting that they use for leaving messages (to other devs) about why chef is stopped on a node?
[2013-10-18 14:12:17 -0400] jbz: motd.
[2013-10-18 14:12:48 -0400] jbz: Dunno if that's interesting though.
[2013-10-18 14:12:50 -0400] tos9: Hm. Yeah I guess putting it in motd would be good.
[2013-10-18 14:13:13 -0400] jbz: Unless you're using cron, it's the only real way to ensure they'll see it before re-activating :-)
[2013-10-18 14:13:45 -0400] jbz: And even then, if they use knife to restart it, you're in trouble.
[2013-10-18 14:14:03 -0400] BriGuy: is there any way to use a template with remote_file -OR- a way to use an SVN http path with template?
[2013-10-18 14:14:31 -0400] jbz: If I know I need to leave a node with chef deactivated, and I have to leave it for a while, I'll remove the node/client record from the server and either remove or rename the validator key (if it hasn't already been removed by the runlist).
[2013-10-18 14:15:02 -0400] tos9: jbz: I'm more interested in someone being *able* to answer the question "who stopped this and is there any reason I can't start it now" than preventing accidents, people are pretty good at at least going and looking if they notice it's stopped I think
[2013-10-18 14:15:10 -0400] jbz: Ah yes. Then motd.
[2013-10-18 14:15:52 -0400] tos9: Thanks
[2013-10-18 14:15:56 -0400] jbz: yw
[2013-10-18 14:47:14 -0400] ortho_stice: I'm seeing some odd behavior with OSC chef server 11.0.8 and knife 11.6.0 . If I upload a cookbook with knife, then down load it, every file is slightly corrupted.  Each file has a 4-byte prefix appended, the first three bytes of which appear to be random - 57e^M, 865^M, etc.  The contents of the file follow normally, then there is garbage appended at end of file: : ^M0^M^M  Anyone see anything like that ebfore?
[2013-10-18 14:48:32 -0400] ortho_stice: I poked around in the bookshelf data area.  Each file on disk has a short bit of binary data at the beginning, but I don't know if that is normal.
[2013-10-18 14:50:11 -0400] bcave: wondering if anyone could assist with an encrypted data bag issue I have
[2013-10-18 14:51:06 -0400] bcave: i have a recipe that has this: secret = Chef::EncryptedDataBagItem.load_secret("#{node[:cookbook][:secretpath]}")
[2013-10-18 14:51:43 -0400] bcave: it's failing with: invalid zero length secret in '/path/to/my/secret'
[2013-10-18 14:52:53 -0400] jbz: bcave: Have you checked the file in question?  Stupid Q, I know, but just being sure.
[2013-10-18 14:53:46 -0400] ema: hey there
[2013-10-18 14:54:07 -0400] ema: I wrote a little knife plugin to bootstrap / purge docker containers. Feedback welcome: https://github.com/ema/knife-docker
[2013-10-18 14:54:54 -0400] bcave: on the chef-client: $ md5sum /path/to//my/secret
[2013-10-18 14:55:00 -0400] bcave: a223424334
[2013-10-18 14:55:29 -0400] bcave: which matches my local encryption secret (on my knife workstation
[2013-10-18 14:55:55 -0400] bcave: i've checked contents visually and via md5sum, the same
[2013-10-18 14:59:37 -0400] bcave: I get it earlier in the recipe from a remote location
[2013-10-18 15:00:32 -0400] bcave: the funny thing is that the load_secret hasn't changed at all - the same as it always has been. The only thing that has changed is the way i retrieve it.
[2013-10-18 15:00:47 -0400] bcave: I used to save the secret onto the node before chef was executed
[2013-10-18 15:01:01 -0400] bcave: now im fetching in the same chef run as to when it is used, using inline ruby
[2013-10-18 15:01:20 -0400] bcave: File.write("the_contents")
[2013-10-18 15:05:13 -0400] bcave: ah - that was it. Using File.write() directly as ruby code seemed to break it. I moved it to a "ruby_block" and it loads fine now
[2013-10-18 15:26:37 -0400] mbursi:  /join #fedora-it
[2013-10-18 15:31:22 -0400] joe_k: if I have some recipe .rb files next to each other in a cookbook, is there a way to include one from the other?
[2013-10-18 15:31:41 -0400] joe_k: docs for include_recipe say "external cookbooks"
[2013-10-18 15:31:49 -0400] joe_k: not sure how I reference those sibling recipes
[2013-10-18 15:31:49 -0400] cwj: joe_k: include_recipe cookbook::recipe"
[2013-10-18 15:32:20 -0400] cwj: and its a good idea to ensure the cookbook name is defined in metadata.rb
[2013-10-18 15:35:40 -0400] laurent\: i'm at least 6 month late, upgrading to v11 = PITA
[2013-10-18 15:44:23 -0400] jtimberman: dmdeklerk: That repository is deprecated, just hadn't been updated with an informational notice about that. It links to the open training materials which are current.
[2013-10-18 15:46:48 -0400] failshell: foodcritic is complaining abouf rule #48 which is not even documented on the site yet hehe
[2013-10-18 15:48:07 -0400] failshell: oh wait. foodcritic.io
[2013-10-18 15:48:11 -0400] failshell: the old site should 301 there
[2013-10-18 15:54:05 -0400] laurent\: for some reason indexing is broken
[2013-10-18 15:56:50 -0400] Yvan_: Hi All! I got this msg: Use RbConfig instead of obsolete and deprecated Config. when starting chef-client 11.6.2
[2013-10-18 15:57:35 -0400] sanguisdex: I ran chef-client and it updated items from the original runlist/role but it did not take in to account the fact that the role has been updated. How do I get a chfe node to update its runlist/role?
[2013-10-18 16:06:09 -0400] laurent\: http://docs.opscode.com/config_rb_chef_server.html how to start stuff in debug mode ?.
[2013-10-18 16:06:26 -0400] laurent\: the expander thingy for instance
[2013-10-18 16:07:33 -0400] laurent\: just willing to understand why "chef-server-ctl reindex" only indexes 1% of the stuff
[2013-10-18 16:09:58 -0400] dmdeklerk: jtimberman: ok thanks for the info.
[2013-10-18 16:10:03 -0400] jtgiri_: hey guys, is there an attribute that can give me name of the current recipe ?
[2013-10-18 16:13:31 -0400] jtimberman: jtgiri_: when in a recipe, the recipe_name method will return the name of the recipe being evaluated.
[2013-10-18 16:13:56 -0400] jtgiri_: jtimberman: thanks
[2013-10-18 16:14:15 -0400] jperry: ohai guys
[2013-10-18 16:15:03 -0400] jperry: anyone know if there is any documentation on adding a helper method such as encrypted_data_bag so that all recipes have access to it?
[2013-10-18 16:15:45 -0400] jperry: initially I was going to add it into the chef-client cookbook and later extract into a gem but was wondering if anyone knows of an example or documentation to do something like this?
[2013-10-18 16:24:47 -0400] laurent\: this upgrade to v11 is really doing my head in
[2013-10-18 16:27:49 -0400] sanguisdex: how do I get a node to update its runlist based on an updated role?
[2013-10-18 16:28:53 -0400] jbz: sanguisdex: If the node has the role in its runlist (and you're using chef-server or hosted) then at the start of the first run after the change, it should download a new expanded runlist from the server.
[2013-10-18 16:29:45 -0400] laurent\: guys, how to run chef-expander in debug mode ?
[2013-10-18 16:52:19 -0400] fak3r: dc2mgmtsavqa01.mgmt.sdirect
[2013-10-18 16:53:24 -0400] edelschaedel: is it possible for node A to update an attribute in node B from within a recipe?  I can't find any info on the topic on the opscode doc site.   Does anyone know if it's possible and have a link to point me to?
[2013-10-18 16:53:48 -0400] trobrock: I have a provider that notifies a resources that exists on most servers the recipe is ran on, but not all. Is there a way to tell it to notify a resource, only if the resource exists?
[2013-10-18 17:07:30 -0400] sanguisdex: what's that gem that's a cookbook dependency manger?
[2013-10-18 17:07:36 -0400] gchristensen: berkshelf?
[2013-10-18 17:07:58 -0400] gchristensen: some people prefer librarian, but berkshelf seems to be taking the community by storm and has a whole philosophy behind it
[2013-10-18 17:08:24 -0400] sanguisdex: gchristensen: that's the one
[2013-10-18 17:08:27 -0400] sanguisdex: thanks
[2013-10-18 17:08:31 -0400] gchristensen: which one? :)
[2013-10-18 17:08:49 -0400] sanguisdex: or the 2 but berkshelf is the one I have heard more then
[2013-10-18 17:08:54 -0400] gchristensen: ah
[2013-10-18 17:09:00 -0400] gchristensen: yeah. berkshelf is great.
[2013-10-18 17:09:04 -0400] sanguisdex: s/then/often/
[2013-10-18 17:22:44 -0400] amontalenti: I've got a chef-managed node with some borked recipes. I've updated the recipes and uploaded them with knife, but when the chef client ran, it still used the  old copy of the recipes (and I can confirm the old copy is in /var/cache/chef)
[2013-10-18 17:23:06 -0400] amontalenti: how can I force chef-client to download the freshest? I always thought it just did this upon run, but it doesn't seem like it.
[2013-10-18 17:23:50 -0400] stormerider: amontalenti: if the cookbook version didnt get bumped it might not redownload it if it is already cached
[2013-10-18 17:24:14 -0400] stormerider: so you can clear the cache or ensure that you're always bumping your cb version
[2013-10-18 17:24:31 -0400] countdigi: rm -rf /var/cache/chef/cookbooks :-)
[2013-10-18 17:24:58 -0400] amontalenti: stormerider, ah hah... is there any way I can get transparency into that process? it seems like chef-client makes no noise about it in the log files
[2013-10-18 17:25:21 -0400] amontalenti: countdigi, I wish, unfortunately the very thing that got borked is that a chef recipe installed a sudo file that's corrupt
[2013-10-18 17:25:23 -0400] countdigi: chef-client -l debug
[2013-10-18 17:25:48 -0400] countdigi: ah gotcha
[2013-10-18 17:25:54 -0400] stormerider: chef-client -F min works fine for me
[2013-10-18 17:26:37 -0400] countdigi: i would check ur version in metadata.rb as stormerider suggested
[2013-10-18 17:26:39 -0400] amontalenti: stormerider, I'll try bumping the version, I was wondering about that when I made the chagne
[2013-10-18 17:27:13 -0400] stormerider: any change should be bumping the version, unless you're submitting a PR to another maintainer
[2013-10-18 17:27:24 -0400] gchristensen: +1 keep that metadata semver'd
[2013-10-18 17:27:49 -0400] amontalenti: good to know
[2013-10-18 17:27:54 -0400] gchristensen: one cookbook internally had been not been semver'd... just straight -up v0.1.487
[2013-10-18 17:33:38 -0400] cassianoleal: does anyone know if vagrant supports environments using chef solo?
[2013-10-18 17:34:07 -0400] amontalenti: anyone know a trick to force a chef-client daemon to re-run without using "sudo chef-client"? either using knife or chef server, perhaps?
[2013-10-18 17:34:57 -0400] arussel: would anyone know of a good blog/tutorial on debugging a recipe in a node ?
[2013-10-18 17:34:59 -0400] stormerider: chef server cannot issue a client kick yet, amontalenti
[2013-10-18 17:35:13 -0400] cassianoleal: amintalenti: knife ssh 'role:myappsrole' 'sudo chef-client'
[2013-10-18 17:35:21 -0400] stormerider: and the way to do it with knife would be knife ssh, yeah.
[2013-10-18 17:35:38 -0400] amontalenti: yea, I'm in this catch-22 since "sudo" is borked on the host machine
[2013-10-18 17:35:51 -0400] amontalenti: so though chef-client daemon is running on startup no problem, can't run "sudo chef-client"
[2013-10-18 17:37:00 -0400] cassianoleal: amintalenti: can't you reboot the machine? if the client runs fine on startup...
[2013-10-18 17:37:28 -0400] amontalenti: cassianoleal, it's a machine I'd rather not reboot
[2013-10-18 17:37:58 -0400] cassianoleal: amontalenti: I see... doesn't the chef-client run periodically as a daemon?
[2013-10-18 17:38:18 -0400] amontalenti: cassianoleal, yea, in fact, it just ran -- and, despite me bumping the cookbook version, it doesn't seem to have synced the latest version
[2013-10-18 17:38:28 -0400] amontalenti: (frustratingly :-))
[2013-10-18 17:38:55 -0400] amontalenti: stormerider, looks like metadata.rb was updated in the cache directory, but a file template that shouldn't be there is still therre
[2013-10-18 17:39:02 -0400] amontalenti: any other thing that could possibly stop chef from syncing?
[2013-10-18 17:39:12 -0400] amontalenti: or "syncing correctly", I guess?
[2013-10-18 17:41:46 -0400] amontalenti: stormerider, what's strange to me about this is that the same recipe affects 5 other nodes, and all of the other ones got the latest version and were fixed, but this single node is being stubborn
[2013-10-18 17:42:17 -0400] stormerider: amontalenti: dont have any further suggestions amontalenti
[2013-10-18 17:45:18 -0400] mondo: Is anyone managing RHN channel subscriptions with Chef?
[2013-10-18 17:48:35 -0400] Cope: If you've tried the -ssh-gateway GATEWAY functionality of knife ec2 server create, could you let me know?
[2013-10-18 17:48:55 -0400] Cope: I'm just looking into provisining servers in VPC via a bastion host
[2013-10-18 17:49:12 -0400] Cope: and if I get stuck, it'd be good to know if anyone else has got it going
[2013-10-18 17:50:04 -0400] Cope: I don't see any docs for it, but google shows: http://clarkdave.net/2013/05/creating-ec2-instances-in-an-amazon-vpc-using-chef-and-knife/
[2013-10-18 17:50:36 -0400] Cope: although I'm a bit puzzled about the claim that you need to give the VPC machine an elastic IP; anyway - will play and see
[2013-10-18 17:54:31 -0400] dmdeklerk: arusssel: what about http://docs.opscode.com/chef_shell.html or https://github.com/opscode/chef-docs/blob/master/chef_master/source/chef_shell.rst#step-through-a-run-list have not played with it yet
[2013-10-18 17:55:26 -0400] dgarstang2: How do I download roles from a chef server?
[2013-10-18 17:55:53 -0400] cassianoleal: dgarstang2: knife download roles/*
[2013-10-18 17:56:12 -0400] dmdeklerk: arussel: or this http://docs.opscode.com/chef_shell.html#breakpoint-resource
[2013-10-18 17:56:49 -0400] dgarstang2: cassianoleal: yeah except knife is broken. Actually, I can just use the UI
[2013-10-18 17:56:52 -0400] arussel: dmdeklerk: yes, I'm giving chef-shell a go right now
[2013-10-18 17:59:35 -0400] azret: has anyone figured out how to get the percona recipe and the database cookbook to work together yet?
[2013-10-18 17:59:58 -0400] arussel: so I'm trying to debug a recipe but for this to make sense, I need the attribute file to be loaded, how can I do this in chef-shell ?
[2013-10-18 18:00:03 -0400] dmdeklerk: arussel: I could have used that breakpoint resource before myself, never thought it would exist
[2013-10-18 18:01:07 -0400] arussel: I'm more interested in copy/pasting part of my recipe to debug it than modifying a recipe and having to upload it to the server to then fetch it with chef-shell
[2013-10-18 18:01:38 -0400] dgarstang2: Is anyone using berkshelf with Thor?
[2013-10-18 18:01:40 -0400] arussel: it is possible with recipe_mode, which is fantastic to debug/write a recipe
[2013-10-18 18:01:45 -0400] dgarstang2: specifcally Thor scm version thingy
[2013-10-18 18:02:07 -0400] dmdeklerk: arussel: how do you load that attribute file?
[2013-10-18 18:02:41 -0400] arussel: for what I understand now, you have to type each attribute (but then, this is just copy/paste)
[2013-10-18 18:03:50 -0400] dmdeklerk: mmm maybe use ruby's ability to load and evaluate a file
[2013-10-18 18:03:59 -0400] arussel: dmdeklerk: this is what is describe at the end of: http://docs.opscode.com/chef_shell.html
[2013-10-18 18:04:11 -0400] josephholsten: anyone got any brilliant ideas on how to use the community nagios cookbook but make some hosts (*nix) use one check_command, while others (win) use another?
[2013-10-18 18:04:20 -0400] josephholsten: timsmith: ^^
[2013-10-18 18:04:36 -0400] dmdeklerk: arussel: give it the path to your attribute file. the stuff in chef-shell is interpreted ruby i guess
[2013-10-18 18:06:18 -0400] arussel: dmdeklerk: where does chef caches the file ?
[2013-10-18 18:06:41 -0400] dmdeklerk: arussel: on ubuntu its in /tmp
[2013-10-18 18:07:22 -0400] dmdeklerk: arussel: try something like "$ chef:recipe > load('/tmp/recipe/whatup.rb')" not sure if will work
[2013-10-18 18:07:46 -0400] dgarstang2: I keep uploading to my chef server, and shit ain't there. Argh
[2013-10-18 18:08:48 -0400] josephholsten: dgarstang2: ?
[2013-10-18 18:08:56 -0400] timsmith: josephholsten:  search based checks
[2013-10-18 18:09:10 -0400] timsmith: role: blah AND platform:windows gets check a
[2013-10-18 18:09:32 -0400] timsmith: but there is no native per platform check support
[2013-10-18 18:09:55 -0400] josephholsten: I need it to be the host's check_command, not a service check_command
[2013-10-18 18:10:06 -0400] josephholsten: as in check-host-alive
[2013-10-18 18:10:20 -0400] josephholsten: I have a feeling I'm going to have to build this
[2013-10-18 18:10:48 -0400] dgarstang2: josephholsten: yeah, exactly
[2013-10-18 18:10:52 -0400] josephholsten: just haven't figured out the best way.
[2013-10-18 18:10:53 -0400] arussel: I can create and run resource with chef-shell, but I haven't got the context of a cookbook so can't access template
[2013-10-18 18:11:32 -0400] dgarstang2: I keep running /opt/chef/embedded/bin/berks upload -c ~/.berkshelf/config-hub.json ... and it say it worked. I check the chef server however, and the change isn;t there
[2013-10-18 18:11:52 -0400] josephholsten: dgarstang2: did you bump the versions of your cookbooks?
[2013-10-18 18:12:07 -0400] dgarstang2: josephholsten: Is that mandatory?
[2013-10-18 18:12:10 -0400] josephholsten: yep
[2013-10-18 18:12:15 -0400] dgarstang2: hm.
[2013-10-18 18:12:33 -0400] josephholsten: it checks the version that's in the server, and doesn't upload if it matches what's local
[2013-10-18 18:12:34 -0400] miah: sup
[2013-10-18 18:12:57 -0400] josephholsten: howdy miah
[2013-10-18 18:12:59 -0400] dgarstang2: josephholsten: this is so complicated when you add tagging with thor scm version.
[2013-10-18 18:13:51 -0400] josephholsten: dgarstang2: I haven't really figured out the workflow for thor-scmversion
[2013-10-18 18:14:20 -0400] josephholsten: it sounds neat, but I'd need to watch someone using it successfully
[2013-10-18 18:15:51 -0400] dgarstang2: josephholsten: Ditto.
[2013-10-18 18:16:39 -0400] amontalenti: stormerider, btw, I figured out what was going on
[2013-10-18 18:16:55 -0400] amontalenti: so, it seems as though chef-client, if it fails in the middle of a chef-client run, it does a sleep-and-re-run thing
[2013-10-18 18:17:11 -0400] amontalenti: but I think this sleep-and-rerun upon failure doesn't include a proper sync-up of latest cookbooks (unfortunately)
[2013-10-18 18:17:19 -0400] miah: it should
[2013-10-18 18:17:34 -0400] amontalenti: I managed to get root on this machine by other means -- once I cleared out the file that was causing the chef stacktrace, it managed to download the latest cookbook and continue as normal
[2013-10-18 18:17:51 -0400] miah: ah ya
[2013-10-18 18:18:14 -0400] amontalenti: essentially, this wouldn't have been a problem if I could run "sudo chef-client"
[2013-10-18 18:18:21 -0400] amontalenti: since, it seems clear that doing that always syncs the latest
[2013-10-18 18:18:34 -0400] amontalenti: but I think the daemon is just a tad different about "how it sleeps and re-runs"
[2013-10-18 18:18:40 -0400] Cope: ok, so, http://lpaste.net/94457
[2013-10-18 18:18:49 -0400] Cope: The machine is provisioned
[2013-10-18 18:19:00 -0400] Cope: I can ssh to it via ssh -A through the bastion host
[2013-10-18 18:19:09 -0400] amontalenti: the lesson learned for me is, don't let an engineer check in a sudoer file edit that doesn't use the sudo lwrp!
[2013-10-18 18:19:21 -0400] amontalenti: because borking sudo sucks!
[2013-10-18 18:19:22 -0400] Cope: but knife hasn't done that, as on the box there's no evidence of an attempt, and chef hasnt been installed
[2013-10-18 18:19:30 -0400] Cope: amontalenti: hah, yes
[2013-10-18 18:19:59 -0400] amontalenti: (it was made especially bad by the fact that on our team, we disable root login as a paranoia security step)
[2013-10-18 18:20:22 -0400] amontalenti: (the wisdom of which I'm actually questioning :-))
[2013-10-18 18:20:32 -0400] miah: oh hi Cope
[2013-10-18 18:21:25 -0400] Cope: hi miah
[2013-10-18 18:22:27 -0400] josephholsten: amontalenti: if it's easier to rebuild than repair, you don't have that problem ;-)
[2013-10-18 18:22:48 -0400] arussel: dmdeklerk: I'm on linux and don't have the recipe in /tmp
[2013-10-18 18:25:04 -0400] miah: Cope: congrats on the release =)
[2013-10-18 18:25:24 -0400] miah: Cope: will you be at Summit next month?
[2013-10-18 18:25:36 -0400] Cope: ooh it's working! just typo'd the bastion host
[2013-10-18 18:25:45 -0400] arussel: I don't understand the doc, it says: "chef-shell can be used to debug existing recipes. The recipe first needs to be added to a run-list for the node, so that it is cached when starting chef-shell and then used for debugging. chef-shell will report which recipes are being cached when it is started:"
[2013-10-18 18:26:26 -0400] BriGuy: is there any way to have the template resource use a HTTP source like remote_file - or if not, use a template file with remote_file?
[2013-10-18 18:26:30 -0400] gchristensen: chef-shell seems super difficult - am I just missing a basic component of it?
[2013-10-18 18:26:57 -0400] arussel: I'm 100% sure that at least some recipe are loaded as I've got mongo installed. But running 'sudo chef-shell -z' shows: Loading..resolving cookbooks for run list: []
[2013-10-18 18:28:31 -0400] arussel: hmm, got it, because the first run wasn't successful, then the node wasn't created on the chef server. But then, if the run would have been successful, I wouldn't have to debug the shit, wouldn't I ?
[2013-10-18 18:29:02 -0400] Cope: miah: maybe!
[2013-10-18 18:29:10 -0400] Cope: miah: more likely today than yesterday
[2013-10-18 18:30:00 -0400] arussel: is there a way from chef-shell to fetch a recipe from server or load a recipe from fs ?
[2013-10-18 18:30:52 -0400] miah: Cope: hah awesome =)
[2013-10-18 18:31:26 -0400] miah: arussel: http://blog.vicecity.co.uk/post/58905064410/chef-11-libraries-and-lwrp-testing-in-chef-shell
[2013-10-18 18:32:57 -0400] arussel: miah: would you know where is cached the cookbooks on ubuntu ?
[2013-10-18 18:33:52 -0400] wdilly: i belive /var/chef/cache/cookbooks
[2013-10-18 18:34:11 -0400] dmdeklerk: arussel: this is from one of my earlier runs: Uploaded /tmp/default-ubuntu-1204-sandbox-20131018-23473-1d0ubk4/cookbooks/application/libraries/default.rb (5791 bytes)
[2013-10-18 18:34:48 -0400] josephholsten: arussel: you can check the value in Chef::Config[:file_cache_path]
[2013-10-18 18:35:18 -0400] arussel: miah, wdilly, dmdeklerk, josephholsten: thanks, I'm getting there :-)
[2013-10-18 18:36:11 -0400] arussel: this is in /srv/chef/file_store :-)
[2013-10-18 18:37:03 -0400] arussel: dmdeklerk: btw, you can load attribute by using include_attribute "apache2", I'm very close from being able to do what I want. I would be able to do a cookbook in 1 hour when now it taks me 3 days :-)
[2013-10-18 18:39:30 -0400] dmdeklerk: arussel: cool thanks for sharing
[2013-10-18 18:43:51 -0400] ascendantlogic: Curious if anyone can explain to me what an "Unable to satisfy constraints onf cookbook" message is all about? Googling around doesn't really reveal anything helpful
[2013-10-18 18:44:08 -0400] arussel: josephholsten: this is really weird, I've got a cookbook dir in /srv/chef/file_store, with all mycookbooks, inside each directories attributes, providers, ... but not a single file, only directory.
[2013-10-18 18:44:30 -0400] arussel: (so obviously I can't load anything ...)
[2013-10-18 18:44:40 -0400] josephholsten: wow.
[2013-10-18 18:45:16 -0400] arussel: even the mongodb/recipes is empty when it has run on this node as I have mongo installed.
[2013-10-18 18:45:29 -0400] miah: maybe thats not really the cache dir?
[2013-10-18 18:45:53 -0400] dmdeklerk: ascendantlogic: http://docs.opscode.com/essentials_cookbook_versions.html#constraints
[2013-10-18 18:46:05 -0400] josephholsten: ascendantlogic: you have cookbook dependencies that are either contradictory or require versions that don't exist. check the depends lines of your cookbooks and the cookbook_versions in your environments.
[2013-10-18 18:46:36 -0400] josephholsten: also, log level debug will actually show you the different ways it tried to satisfy the constraints
[2013-10-18 18:47:46 -0400] arussel: if a run in not successfull and the node haven't been created, would chef clean the cache dir ?
[2013-10-18 18:49:04 -0400] ascendantlogic: thanks :) Will do some research and check back
[2013-10-18 18:49:30 -0400] dmdeklerk: arussel: that does sound familiar
[2013-10-18 18:49:53 -0400] dmdeklerk: arussel: that should be in the output if you run with :debug
[2013-10-18 18:53:04 -0400] arussel: well, the log does say: [2013-10-18T17:49:38+00:00] INFO: Storing updated cookbooks/partial_search/recipes/default.rb in the cache.
[2013-10-18 18:53:29 -0400] arussel: but either it was removed, or this is note in the cache dir (but then I can't find where it is)
[2013-10-18 18:55:33 -0400] arussel: I've found them, in /vagrant/cookbook :-)
[2013-10-18 19:06:25 -0400] ascendantlogic: "Unable to satisfy constraints on cookbook yum, which does not exist, due to run list item (git >= 0.0.0)
[2013-10-18 19:06:31 -0400] ascendantlogic: unsatisfiable_run_list_item":"(git >= 0.0.0)"}
[2013-10-18 19:06:41 -0400] ascendantlogic: knife cookbook show git
[2013-10-18 19:06:41 -0400] ascendantlogic: git   2.0.0
[2013-10-18 19:07:12 -0400] jbz: ascendantlogic: Do you have the yum cookbook?  Git might have a dependency on it.
[2013-10-18 19:07:31 -0400] ascendantlogic: knife cookbook show yum
[2013-10-18 19:07:31 -0400] ascendantlogic: yum   2.3.2
[2013-10-18 19:07:41 -0400] jbz: huh
[2013-10-18 19:07:43 -0400] ascendantlogic: Run list items that may result in a constraint on yum: [(git = 2.0.0) -> (yum >= 0.0.0)]
[2013-10-18 19:09:30 -0400] ascendantlogic: yeah, I'm stumped
[2013-10-18 19:09:39 -0400] mconigliaro: hey guys, if i don't want to deep merge an attribute (i just want to overwrite it), how can i do that? i know one way is to change the data type, but i don't think that's an option here.
[2013-10-18 19:10:15 -0400] mconigliaro: can i set an override to completely overwrite an attribute?
[2013-10-18 19:10:34 -0400] mconigliaro: i thought that was supposed to work
[2013-10-18 19:16:08 -0400] EnriqueCadalso: Hi, I am writing a wrapper cookbook to set the attributes I want to be used whenever I use the wrapped cookbook. Where is the best place to set the attributes? In the recipe or in the attributes files of this wrapper cookbook? I am not sure about precedence implications.
[2013-10-18 19:18:01 -0400] ascendantlogic: I would keep the data in the attributes of the wrapper cookbook
[2013-10-18 19:18:07 -0400] ascendantlogic: and then have a params.rb recipe
[2013-10-18 19:18:09 -0400] ascendantlogic: that actually sets them
[2013-10-18 19:18:15 -0400] ascendantlogic: I do that a lot for environment-specific overrides
[2013-10-18 19:18:25 -0400] ascendantlogic: since environments and roles are not versioned
[2013-10-18 19:18:34 -0400] ascendantlogic: keeping them in the params recipe allows me to version the overrides
[2013-10-18 19:19:59 -0400] EnriqueCadalso: yes, I am trying to get rid of roles the most I can. Why a params recipe allows you to version the overrides? Isn't the same to version the whole cookbook?
[2013-10-18 19:20:25 -0400] ascendantlogic: I just keep that logic in a separate params cookbook
[2013-10-18 19:20:26 -0400] ascendantlogic: err
[2013-10-18 19:20:29 -0400] ascendantlogic: separate params recipe
[2013-10-18 19:20:38 -0400] ascendantlogic: so for instance, we have a cookbook for our main rails app
[2013-10-18 19:22:14 -0400] ascendantlogic: the default recipe calls the params recipe first
[2013-10-18 19:22:17 -0400] ascendantlogic: to set per-environment overrides
[2013-10-18 19:22:23 -0400] ascendantlogic: then everything else gets called
[2013-10-18 19:22:51 -0400] EnriqueCadalso: ascendantlogic: I see, thanks a lot for your advice. I will follow that path, thanks again.
[2013-10-18 19:23:15 -0400] Kzim: can i use node.default['toto'] = tata in a recipe ?
[2013-10-18 19:24:26 -0400] ascendantlogic: I think you have to do a node.set
[2013-10-18 19:24:35 -0400] ascendantlogic: but don't quote me on that
[2013-10-18 19:25:03 -0400] Kzim: thx a lot
[2013-10-18 19:27:49 -0400] memelet: When I start sensu-server I get rabbitmq connection error. No other info in the log. Logstash has no problems connecting to same rabbit. What can I do to debug this?
[2013-10-18 19:28:53 -0400] gchristensen: any people with noob-to-moderate level experience with Chef looking for full time work? :)
[2013-10-18 19:29:57 -0400] dmdeklerk: gchristensen: whats the location, just curious
[2013-10-18 19:30:45 -0400] gchristensen: dmdeklerk: Your Own Desk. HQ is in San Antonio, TX, I'm in Austin, TX and telecommuting. I'm open to telecommuting with low amounts of travel.
[2013-10-18 19:34:41 -0400] jhayden: Is there anyway to programaticlaly create/set an attribute on a node using something line Chef::Node  ?
[2013-10-18 19:35:30 -0400] ascendantlogic: gchristensen: What's the story? I'm and advanced beginner with Chef
[2013-10-18 19:35:37 -0400] ascendantlogic: *an
[2013-10-18 19:35:42 -0400] gchristensen: ascendantlogic: PM me :)
[2013-10-18 19:42:12 -0400] mcnamarabrian: question for the room re: chef upgrade from 10 to 11.  we have dumped cookbooks from the chef 10 server (using knife download ) and can successfully upload them to the chef 11 server.  however, the downloaded cookbooks have the version name embedded in them.  is there any way to strip the version out of the name?  we have a need  to maintain multiple versions of the same cookbook.
[2013-10-18 19:44:13 -0400] cpuguy83: mcnamarabrian: Use Ruby to rename them, of course.
[2013-10-18 19:44:38 -0400] j^2: blah!
[2013-10-18 19:44:41 -0400] mcnamarabrian: thought about that but there would be name conflict, no?
[2013-10-18 19:45:02 -0400] spheromak: version to chef server is in the metadata
[2013-10-18 19:45:37 -0400] konopka: download via knife essentials handles multi-version by putting it into the directory name
[2013-10-18 19:47:24 -0400] spheromak: well knife-download does that.  so when you upload it back the dir name should be ignored. and metadata  name and version should be used
[2013-10-18 19:47:47 -0400] spheromak: assuming theres is a metadata  "name"   if not then it uses the directory name
[2013-10-18 19:47:51 -0400] konopka: hmm doesn't seem to though (i'm sitting here with mcnamarabrian)
[2013-10-18 19:48:13 -0400] konopka: the cookbooks ended up named with the version in the name
[2013-10-18 19:48:58 -0400] spheromak: so its uloading back with teh name as the  "version"   even tho there is a metadata  name  defined ?
[2013-10-18 19:49:00 -0400] spheromak: :\
[2013-10-18 19:49:28 -0400] spheromak: alternative would be to just write some wrapper to cycle throught them and strip the name.
[2013-10-18 19:49:53 -0400] spheromak: moving the cook dir to temp location and uploading from there.
[2013-10-18 19:50:02 -0400] spheromak: could also use ridley
[2013-10-18 19:50:05 -0400] spheromak: to upload
[2013-10-18 19:50:12 -0400] spheromak: write your own loader
[2013-10-18 19:50:50 -0400] konopka: seems off though that the download pulls down in one format but can't handle the format for upload
[2013-10-18 19:52:09 -0400] spheromak: well
[2013-10-18 19:52:19 -0400] spheromak: do those cooks have a metadata  name field ?
[2013-10-18 19:52:32 -0400] mcnamarabrian: checking some of the conflicting ones now.
[2013-10-18 19:52:34 -0400] spheromak: cause if they don't. I would expect the behavior you are seing
[2013-10-18 19:52:41 -0400] spheromak: *seeing
[2013-10-18 19:52:59 -0400] spheromak: it's unfortunate that its an  "optional" field
[2013-10-18 19:55:03 -0400] sanguisdex: so I totally don't get berkshelf, I just wanted to add a cookbook and its dependencies to my /cooksbooks dir so that I could update my runlist and chef server with the needed dependancies. and it wants to make a local vagrant install?
[2013-10-18 19:55:31 -0400] mcnamarabrian: some of them do but even those that have name defined in metadata.rb have a different cookbook name.
[2013-10-18 19:56:09 -0400] mcnamarabrian: *that have the same name defined in metadata.rb have a different cookbook named (verified via knife cookbook list)
[2013-10-18 19:56:46 -0400] ascendantlogic: I don't get berkshelf either, hence I use librarian-chef
[2013-10-18 19:57:13 -0400] ascendantlogic: although I'm neck deep in circular dependency hell
[2013-10-18 19:57:24 -0400] ascendantlogic: so maybe librarian screwed me, who knows
[2013-10-18 19:57:31 -0400] papasmile: Peace
[2013-10-18 19:58:59 -0400] spheromak: sanguisdex, you mean the berks init  or config  created a vagrant ?
[2013-10-18 19:59:12 -0400] spheromak: you can nuke all that in your ~/.berkshelf/config.json
[2013-10-18 19:59:14 -0400] sanguisdex: init
[2013-10-18 19:59:15 -0400] spheromak: so it doens't do that
[2013-10-18 19:59:22 -0400] spheromak: init is for making a cook
[2013-10-18 19:59:38 -0400] spheromak: so it lays down the stuff that Riot uses/wants
[2013-10-18 19:59:47 -0400] sanguisdex: okay
[2013-10-18 19:59:48 -0400] spheromak: you can just  create a Berksfile
[2013-10-18 19:59:54 -0400] spheromak: with  sit: "opscode"
[2013-10-18 19:59:59 -0400] spheromak: *site
[2013-10-18 20:00:02 -0400] spheromak: and metadata
[2013-10-18 20:00:10 -0400] spheromak: and then berks install --path /somplace
[2013-10-18 20:00:37 -0400] sanguisdex: spheromak: I hand coded an Berks file
[2013-10-18 20:00:40 -0400] spheromak: mcnamarabrian, dunno what to tell ya man.    I guess you are gonna have to write some shell script
[2013-10-18 20:00:43 -0400] sanguisdex: ahhh path
[2013-10-18 20:01:17 -0400] spheromak: yea if you want it do download the cooks and put them somplace to be used by solo or  site-cookbooks from knife
[2013-10-18 20:01:27 -0400] spheromak: generally berks wants to replace  knife  cookbook upload
[2013-10-18 20:01:32 -0400] spheromak: thus  berks  upload
[2013-10-18 20:01:59 -0400] papasmile: Dear all, any ideas why application_ruby will install, migrate, but not run my rails app?  I debuged and found restart_command is blank (on osx 10.8, rails 3, chef 10.24, chef-solo) thanks
[2013-10-18 20:06:52 -0400] papasmile: ok well thanks for listening :-)
[2013-10-18 20:07:23 -0400] mcnamarabrian: big ups to konopka...
[2013-10-18 20:07:35 -0400] mcnamarabrian: option in knife.rb - versioned_cookbooks set to true
[2013-10-18 20:26:05 -0400] mveitas: If there are some errors / additions / clarifications that can be made to the docs, should I just file a JIRA issue? What's the best way to submit?
[2013-10-18 20:26:43 -0400] gchristensen: mveitas: yeah a ticket is probably the best way, with the proposed change
[2013-10-18 20:41:23 -0400] dgarstang2: Is there a chef cookbook for hosting a local gem server?
[2013-10-18 20:46:56 -0400] jblack: Hi. I'm trying to figure out how to get librarian-chef to use two Cheffiles a standard one that comes with a project, and a local one that can override cookbooks listed in the standard one
[2013-10-18 20:47:07 -0400] cpuguy83: dgarstang2: gem_server cookbook looks like it does it
[2013-10-18 20:48:10 -0400] dgarstang2: cpuguy83: Looks oooold
[2013-10-18 20:48:24 -0400] cpuguy83: Well, stuff doesn't always need to change.
[2013-10-18 20:49:15 -0400] dgarstang2: when I do a 'gem install' where's the location come from?
[2013-10-18 20:49:34 -0400] dgarstang2: ie the server it tries to get it from. Debian equiv is /etc/apt/source.list.d/ etc
[2013-10-18 20:49:43 -0400] cpuguy83: from 'gem sources'
[2013-10-18 20:50:00 -0400] dgarstang2: cpuguy83: config file?
[2013-10-18 20:50:16 -0400] cpuguy83: dgarstang2: You can google these things
[2013-10-18 20:50:25 -0400] cpuguy83: That's what I'm doing right now
[2013-10-18 20:50:30 -0400] dgarstang2: cpuguy83: *squinty eye*
[2013-10-18 20:50:35 -0400] jblack: cpuguy: By default, rubygems.org ?
[2013-10-18 20:51:03 -0400] coderanger: kallistec: Yo, you around?
[2013-10-18 21:04:54 -0400] ascendantlogic: Ok this is really starting to suck
[2013-10-18 21:05:18 -0400] ascendantlogic: My chef server is essentially down because I get this error everywhere: HTTP Request Returned 412 Precondition Failed: {"message":"Unable to satisfy constraints on cookbook yum, which does not exist, due to run list item (git >= 0.0.0).
[2013-10-18 21:05:27 -0400] ascendantlogic: "most_constrained_cookbooks":["Package yum"],"non_existent_cookbooks":[],"unsatisfiable_run_list_item":"(git >= 0.0.0)"}
[2013-10-18 21:05:34 -0400] ascendantlogic: yum 2.3.2 and git 2.7.0 are on the server
[2013-10-18 21:05:57 -0400] ascendantlogic: yum 2.3.2 and git 2.7.0 are on the server
[2013-10-18 21:05:59 -0400] ascendantlogic: woops, sorry
[2013-10-18 21:06:03 -0400] ascendantlogic: Matthews-MacBook-Pro-2:chef_server matthewcase$ knife cookbook list | grep yum
[2013-10-18 21:06:04 -0400] ascendantlogic:   yum                               2.3.2
[2013-10-18 21:06:04 -0400] ascendantlogic:   yumrepo                           2.0.0
[2013-10-18 21:06:05 -0400] ascendantlogic: Matthews-MacBook-Pro-2:chef_server matthewcase$ knife cookbook list | grep git
[2013-10-18 21:06:07 -0400] ascendantlogic:   git                               2.7.0
[2013-10-18 21:09:32 -0400] josephholsten: timsmith: well, I figured out a way for each node to specify its own host template. it might be terrible, but it's the least terrible thing I could think of.
[2013-10-18 21:10:10 -0400] timsmith: least terrible describes a lot of things in nagios
[2013-10-18 21:10:23 -0400] ascendantlogic: Nagios ><
[2013-10-18 21:10:58 -0400] jbz: ugh nagios
[2013-10-18 21:13:11 -0400] ascendantlogic: I figured it out
[2013-10-18 21:13:13 -0400] ascendantlogic: fml
[2013-10-18 21:13:38 -0400] ascendantlogic: I had yum and git pinned to older versions that weren't on the server anymore in my environment file
[2013-10-18 21:31:17 -0400] stkowski: I'd like to set the value of a variable in a ruby_block that is later used in a execute block  but the ruby_block seems scoped in its own name space. What is the proper way of doing that?
[2013-10-18 21:31:43 -0400] jbz: stkowski: use an attribute?
[2013-10-18 21:31:57 -0400] jbz: (dunno if that's proper.  That's what I would try. :-)  I'm not too bright.)
[2013-10-18 21:36:45 -0400] josephholsten: I love how every time I have to change the nagios cookbook, the time breakdown is 75% thinking, 20% documenting, and 5% actual implementation.
[2013-10-18 21:36:57 -0400] josephholsten: anyway, host templates will be here soon!
[2013-10-18 21:37:55 -0400] josephholsten: oh hell. this really ought to be a non-backwards compatible change
[2013-10-18 21:40:23 -0400] josephholsten: so terribly terribly ugly though
[2013-10-18 21:41:44 -0400] timsmith: the real change that needs to happen in that cookbook
[2013-10-18 21:41:50 -0400] timsmith: and I have the ticket for it
[2013-10-18 21:41:58 -0400] timsmith: is to take all the logic out of the templates
[2013-10-18 21:42:19 -0400] timsmith: we should generate a large set of all the hosts and their values
[2013-10-18 21:42:22 -0400] timsmith: and pass it to the template
[2013-10-18 21:42:30 -0400] timsmith: I think that'll help a lot of it
[2013-10-18 21:42:51 -0400] timsmith: having giant nested statements in an erb file
[2013-10-18 21:42:53 -0400] timsmith: is just evil
[2013-10-18 21:44:30 -0400] ascendantlogic: without having seen the cookbook, I'd agree. Logic should be in the recipe
[2013-10-18 21:44:38 -0400] ascendantlogic: templates should just be handed parameter lists
[2013-10-18 21:44:45 -0400] ascendantlogic: and only have logic around parsing those parameters
[2013-10-18 21:44:58 -0400] timsmith: it was really simple at one point and then a million use cases were added and it just gets worse and worse with each release
[2013-10-18 21:45:21 -0400] ascendantlogic: sounds like a job for multiple recipes then
[2013-10-18 21:45:27 -0400] ascendantlogic: based on different use cases
[2013-10-18 21:47:02 -0400] timsmith: nagios is a really complex application
[2013-10-18 21:47:12 -0400] timsmith: same issues occur in the mysql cookbook
[2013-10-18 21:47:21 -0400] timsmith: there's a lot of tunables
[2013-10-18 21:47:41 -0400] ascendantlogic: It's been about 10 years since I've interacted with Nagios. I can only imagine what it's like to deal with the cookbook(s) for it
[2013-10-18 21:47:44 -0400] timsmith: although if I was to do it over again I would make NRPE a sep recipe
[2013-10-18 22:00:47 -0400] chance: hey guys, im getting an error "cannot load such file -- mysql" at this line: https://github.com/opscode-cookbooks/database/blob/master/libraries/provider_database_mysql.rb#L29
[2013-10-18 22:01:01 -0400] chance: im not really sure what to do about that particular issue.
[2013-10-18 22:01:49 -0400] ascendantlogic: looks like you're requiring the mysql gem
[2013-10-18 22:02:11 -0400] chance: yeah, thats what i thought, and im including the mysql recipe for server & client.
[2013-10-18 22:02:20 -0400] chance: so it should be doing that for me, at least i thought
[2013-10-18 22:02:25 -0400] ascendantlogic: MySQL: leverages the mysql gem which is installed as part of the mysql::ruby recipe. You can use database::mysql to include this, too.
[2013-10-18 22:02:31 -0400] ascendantlogic: are you including the mysql::ruby recipe?
[2013-10-18 22:03:00 -0400] chance: by default the mysql client recipe includes it, so it should be
[2013-10-18 22:03:04 -0400] ascendantlogic: hmm
[2013-10-18 22:03:22 -0400] ascendantlogic: Ok, next question. Are you using RVM or rbenv?
[2013-10-18 22:03:28 -0400] chance: neither
[2013-10-18 22:03:40 -0400] chance: running it all in vagrant
[2013-10-18 22:04:08 -0400] ascendantlogic: Are there any lines of output from the mysql::ruby recipe indicating that it's running and has installed the gem?
[2013-10-18 22:04:17 -0400] ascendantlogic: if you do a gem list --local | grep mysql on the server, does it show up?
[2013-10-18 22:05:07 -0400] chance: not sure.
[2013-10-18 22:05:16 -0400] chance: ill check the gem list
[2013-10-18 22:05:34 -0400] ascendantlogic: I'll be here neckpunching myself over logstash. :)
[2013-10-18 22:05:35 -0400] chance: gem command not found :<
[2013-10-18 22:05:40 -0400] ascendantlogic: interesting
[2013-10-18 22:06:00 -0400] chance: it oculd be that's all in the chef root folder
[2013-10-18 22:06:02 -0400] ascendantlogic: can you "sudo su" and then do "which gem"
[2013-10-18 22:06:08 -0400] ascendantlogic: since presumably you're running chef as root
[2013-10-18 22:06:10 -0400] chance: since chef comes with its own ruby interpeter (and I assume gems as well)
[2013-10-18 22:06:23 -0400] chance: no gem for root either.
[2013-10-18 22:06:30 -0400] ascendantlogic: ok so that's an issue
[2013-10-18 22:06:38 -0400] ascendantlogic: but doing "which ruby" shows you using something?
[2013-10-18 22:06:51 -0400] chance: no
[2013-10-18 22:06:58 -0400] ascendantlogic: so there's no ruby on your system
[2013-10-18 22:07:02 -0400] ascendantlogic: I don't think Chef bootstraps ruby
[2013-10-18 22:07:18 -0400] ascendantlogic: install ruby in your vagrant basebox and try again
[2013-10-18 22:07:36 -0400] ascendantlogic: I use rbenv to manage my rubies, even on servers and vagrant
[2013-10-18 22:07:37 -0400] jmickle: when including a recipe from 1 recipe is it possible to update a hash in the included recipe and then update it from the main recipe before use?
[2013-10-18 22:07:39 -0400] ascendantlogic: makes life mch easier
[2013-10-18 22:07:58 -0400] ascendantlogic: I think whichever updates it last wins
[2013-10-18 22:12:57 -0400] Kzim: hi can i check if a recipe is in the node run_list from another recipe without using search
[2013-10-18 22:13:36 -0400] ascendantlogic: yes, I just saw this earlier today
[2013-10-18 22:13:38 -0400] ascendantlogic: let me see if I can remember
[2013-10-18 22:14:03 -0400] ascendantlogic: https://github.com/elasticsearch/cookbook-elasticsearch/blob/master/attributes/data.rb
[2013-10-18 22:14:09 -0400] ascendantlogic: look at the bottom of that file
[2013-10-18 22:14:18 -0400] ascendantlogic: node.default.build_essential.compiletime = true if node.recipes.any? { |r| r =~ /elasticsearch::ebs|build-essential/ }
[2013-10-18 22:14:57 -0400] ascendantlogic: I'm not 100% that is correct for what you're asking, but it seems to fit the bill
[2013-10-18 22:16:24 -0400] ascendantlogic: so it looks like you could just do node.recipies.include?(recipe_name)
[2013-10-18 22:16:27 -0400] ascendantlogic: err
[2013-10-18 22:16:33 -0400] ascendantlogic: node.recipes.include?(recipe_name)
[2013-10-18 22:24:45 -0400] feutete: hello all, i have what will hopefully be a simple question... I want to set an attribute in <cookbook>/attributes/default.rb from an attribute that is set in a role on my node, and for some reason, can't seem to get the syntax right. Can somebody point me in the right direction?
[2013-10-18 22:25:21 -0400] ascendantlogic: can you paste in your role file?
[2013-10-18 22:26:12 -0400] dgarstang2: Getting an error "ERROR: knife encountered an unexpected error" when running "knife-hub node create pano01.hub.bitcasa.com". Arrgh!
[2013-10-18 22:27:40 -0400] feutete: ascendantlogic: something like this: https://gist.github.com/anonymous/7049160
[2013-10-18 22:28:02 -0400] feutete: and in the attributes/default.rb, I have something like this: default[:postfix][:mail_relay_networks] = "[:myenvironment][:mgmt][:network]"
[2013-10-18 22:28:12 -0400] feutete: the right side of the = is my problem
[2013-10-18 22:29:14 -0400] cwj: feutete: try default[:postfix][:mail_relay_networks] = node[:myenvironment][:mgmt][:network]
[2013-10-18 22:29:42 -0400] cwj: but keep in mind its possible the role attribute might not be available to you at the time the cookbook attribute file is being evaluated
[2013-10-18 22:29:53 -0400] feutete: cwj: first of all, hello! second, I tried that and it blew chunks
[2013-10-18 22:30:14 -0400] cwj: hi!
[2013-10-18 22:30:37 -0400] feutete: I wondered about that too. How to properly control that ordering? I did see some errors about the myenvironment attribute not being defined
[2013-10-18 22:30:39 -0400] cwj: i usually try to avoid basing default attrs on other attrs like that
[2013-10-18 22:30:49 -0400] cwj: maybe try setting the attribute in the cookbooks recipe instead? e.g. node.default[cookbook]['foo] = node[bar_from_role]
[2013-10-18 22:31:06 -0400] feutete: cwj:  I might give that a spin...
[2013-10-18 22:31:28 -0400] cwj: make yourself a little wrapper cookbook for postfix if you want to avoid forking that cookbook for a minor change like that
[2013-10-18 22:32:13 -0400] chance: ascendantlogic: looks like including the mysql::ruby recipe works. It seems its not included in the client recipe like i thought.
[2013-10-18 22:32:20 -0400] chance: thanks for the help
[2013-10-18 22:32:30 -0400] ascendantlogic: no problem
[2013-10-18 22:32:41 -0400] feutete: cwj: not a bad idea
[2013-10-18 22:33:14 -0400] ascendantlogic: cwj: that's interesting, I've never been able to get my attributes to use previously-defined attribute values defined earlier in the same file
[2013-10-18 22:33:21 -0400] ascendantlogic: which leads to a lot of duplicate values in my strings
[2013-10-18 22:37:01 -0400] cwj: ive done stuff like this https://gist.github.com/cwjohnston/6bbf580e41656aae82a8
[2013-10-18 22:37:06 -0400] cwj: which i am not proud of
[2013-10-18 22:37:08 -0400] cwj: but it seems to work
[2013-10-18 22:37:30 -0400] cwj: re lines 4 and 12
[2013-10-18 22:38:34 -0400] ascendantlogic: what i need to do is stuff like base_dir = "/data/rails"
[2013-10-18 22:38:48 -0400] ascendantlogic: and then say config_dir = "#{node[:base_dir]}/config"
[2013-10-18 22:39:09 -0400] ascendantlogic: but instead I do config_dir = "/data/rails/config"
[2013-10-18 22:39:14 -0400] ascendantlogic: which duplicates the string
[2013-10-18 22:39:20 -0400] ascendantlogic: and means if I ever change that basedir I gotta change a ton of crap
[2013-10-18 22:41:12 -0400] chance: i reference my node attributes in my attributes.rb a few times. Its not terrible
[2013-10-18 22:43:20 -0400] objectiveous: I'm using test kitchen and fog to spin up host. All is well until it tries to use my cookbook that has a LWPR. Seems that a library required library in my provide is not on the system. So, how does kitchen go about determining what gems to put on the target?
[2013-10-18 22:43:25 -0400] objectiveous: I wonder.
[2013-10-18 22:44:34 -0400] cwj: objectiveous: the cookbook providing your lwrp should probably include a recipe which installs the required gem(s)
[2013-10-18 22:44:54 -0400] cwj: objectiveous: then users of your lwrp include that recipe to ensure they have everything they need to use the lwrp
[2013-10-18 22:45:06 -0400] objectiveous: cwj: Ah!
[2013-10-18 22:46:29 -0400] cwj: for example, some of my cookbooks do nothing other than implement a lwrp, and they have a default recipe which ensures the gem they depend on (i.e. rest-client) is available via a chef_gem resource
[2013-10-18 22:47:10 -0400] spheromak: can do it withing the lwrp as well
[2013-10-18 22:47:56 -0400] spheromak: https://github.com/spheromak/github_cookbook/blob/master/providers/hook.rb#L8-L19
[2013-10-18 22:47:58 -0400] ikrima: hey guys, on windows, I keep getting an error "erubis" is not recognized as an internal or exenal command
[2013-10-18 22:48:04 -0400] stormerider: is there a way to run ridley manually to do a syntax check on a cookbook before berkshelf tries to upload it? or similar tool?
[2013-10-18 22:48:12 -0400] ikrima: whenever I have any templates in my cookbook. Any ideas?
[2013-10-18 22:48:24 -0400] spheromak: stormerider, you can run ruby -c
[2013-10-18 22:51:13 -0400] stormerider: ah, there's knife cookbook test
[2013-10-18 22:52:10 -0400] objectiveous: cwj: Trying out your suggestion.
[2013-10-18 22:56:19 -0400] waziers: hi everyone, i just upgraded from private chef 1.X.X to private chef 11 using the knife download/upload strategy; one my nodes now I get a 403 forbidden "DEBUG: Saving the current state of node" PUT to the server
[2013-10-18 22:56:33 -0400] stkowski: I <3 "lazy { }"
[2013-10-18 22:57:02 -0400] waziers: any ideas what could generate that? i have the correct validator.pem and client.pem (i believe)
[2013-10-18 23:02:23 -0400] jmickle: hey
[2013-10-18 23:04:08 -0400] ericedge: In nagios::pagerduty 5.0.1, if I set nagios.pagerduty.key without setting the now-deprecated nagios.pagerduty_key, nagios.pagerduty.key gets overwritten as null for the node.  Am I doing something wrong?
[2013-10-18 23:20:28 -0400] ericedge: Hm, perhaps I was supposed to set nagios.pagerduty.key in the role rather than the node.  Still seems weird to me to not accept the node's value, though.
[2013-10-18 23:24:46 -0400] dgarstang2: So.... anyone use https://github.com/opscode-cookbooks/ssh_known_hosts ? It doesn't seem to work
[2013-10-18 23:24:57 -0400] dgarstang2: It omits the fqdn at the start of each line
[2013-10-18 23:26:42 -0400] dgarstang2: Not true; https://tickets.opscode.com/browse/COOK-493
[2013-10-18 23:28:18 -0400] dgarstang2: Wow. http://community.opscode.com/cookbooks/ssh_known_hosts has been downloaded 1,250 times and no one has commented that it's broken?
[2013-10-18 23:29:54 -0400] ajsharp: hi. disclaimer: i'm a chef noob. I'm trying to figure out how to add a cookbook to the node run list
[2013-10-18 23:30:04 -0400] ajsharp: i'm using aws opsworks
[2013-10-18 23:35:15 -0400] jmickle: whats the best way to merge a hash in a cookbook with a hash inside of default attr?
[2013-10-18 23:58:23 -0400] objectiveous: cwj: I've observed that my default recipe for my LWRP packages is not getting invoked. If I load my dependent gem in the calling recipe, the install begins as expected. Any thoughts on how chef "compiles" and loads reciepies?
[2013-10-18 23:59:17 -0400] jbz: objectiveous: the default recipe in the cookbook containing the lwrp?
[2013-10-18 23:59:29 -0400] objectiveous: jbz: Yeah.
[2013-10-18 23:59:46 -0400] jbz: If you call a LWRP from another cookbook, it will *not* automatically execute the default.rb in the lwrp cookbook, no.
[2013-10-18 23:59:52 -0400] jbz: Only if you call the *cookbook*.

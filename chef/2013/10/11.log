[2013-10-11 01:43:53 -0400] flaccid: hmm with Cheffile and librarian-chef if you just define cookbook 'foo' it will always pull the latest version. it seems to ignore :ref => 'bar'. how do can i specify the version without having to use :git ?
[2013-10-11 01:49:06 -0400] dysinger: hosted chef down?
[2013-10-11 01:55:03 -0400] mmzyk: designer yeah, there are a few issues currently. It's being worked on. Apologies.
[2013-10-11 01:58:49 -0400] mmzyk: er, designer ^. apparently I typed designer. sorry.
[2013-10-11 01:59:13 -0400] mmzyk: ah, dammit. try again dysinger
[2013-10-11 02:00:57 -0400] dysinger: ok thanks
[2013-10-11 02:02:04 -0400] mmzyk: by try again I meant me trying to type your name, fyi.
[2013-10-11 02:02:45 -0400] mmzyk: but you should also be good to try again against hosted as well.
[2013-10-11 02:11:15 -0400] jtimberman: Hosted Enterprise Chef is still in maintenance
[2013-10-11 02:13:33 -0400] mmzyk: I should read status.opscode.com where it states there is a maintenance window going on.
[2013-10-11 02:27:16 -0400] jtimberman: mmzyk: :)
[2013-10-11 02:41:02 -0400] timsmith: anyone around that's experienced with chef-zero and test kitchen?
[2013-10-11 03:25:24 -0400] arussel: how do you create a binary secret data bag ?
[2013-10-11 04:27:50 -0400] silk: so, is there a way to search for nodes with attribute  less than X in knife?
[2013-10-11 04:29:26 -0400] silk: apparently there is.
[2013-10-11 04:39:18 -0400] atomi: ERROR: Your private key could not be loaded from C:/chef/client.pem
[2013-10-11 04:39:43 -0400] atomi: what's this error about?
[2013-10-11 04:39:51 -0400] atomi: running knife role create
[2013-10-11 04:40:02 -0400] atomi: using chef solo
[2013-10-11 04:42:47 -0400] atomi: I'm not sure I haven't ran knife configure
[2013-10-11 05:43:46 -0400] atomi: well I guess knife is really not designed for chef-solo
[2013-10-11 05:47:02 -0400] hakunin: berkshelf seems to be just incredibly touchy
[2013-10-11 05:47:33 -0400] hakunin: all i have is 3 git repos, and a metadata reference
[2013-10-11 05:47:44 -0400] hakunin: metadata lists a bunch more cookbook deps
[2013-10-11 05:47:53 -0400] hakunin: and every time i run berks, it's like a roulette
[2013-10-11 05:47:56 -0400] hakunin: a game of chance
[2013-10-11 05:48:29 -0400] hakunin: it can't find the very much existing repo in any sources
[2013-10-11 05:48:41 -0400] hakunin: it has weird issues
[2013-10-11 05:49:43 -0400] hakunin: after a completely random session of rm -rf various cached dirs in ~/.berkshelf/cookbooks you might (if lucky) end up with everything installed
[2013-10-11 05:49:54 -0400] hakunin: and then berks will keep working but
[2013-10-11 05:50:00 -0400] hakunin: only until you need to do a berks update
[2013-10-11 05:50:12 -0400] hakunin: if you need to update a cookbook  sorry
[2013-10-11 05:50:20 -0400] hakunin: not going to happen
[2013-10-11 05:50:25 -0400] hakunin: the whole thing starts from scratch
[2013-10-11 05:51:01 -0400] hakunin: this is coming from a person who's been using berks for half a year now
[2013-10-11 05:51:40 -0400] hakunin: i had to mess with lock file and do some voodoo in cache dir again
[2013-10-11 05:51:53 -0400] hakunin: and finally got berks to install with an updated cookbook
[2013-10-11 05:52:05 -0400] hakunin: only to find that the very next run of berks upload is yet again broken
[2013-10-11 05:52:23 -0400] hakunin: Failed to download 'brightbox' from git: 'git://github.com/filtersquad/chef-brightbox.git' with branch: 'master' at ref: '2e14bc390659b30d0c85c41e36d0bd4141d3712a'
[2013-10-11 05:52:31 -0400] hakunin: Cookbook 'brightbox' not found in any of the default locations
[2013-10-11 05:52:33 -0400] hakunin: etc
[2013-10-11 05:54:21 -0400] hakunin: well, i knew that berks runs install when you run berks upload, but it also keeps breaking entirely on every install. I think i am not doing anything weird, very basic stuff.
[2013-10-11 06:33:13 -0400] fitzdsl_: Hello. In the mongodb library from edelight (https://github.com/edelight/chef-mongodb/blob/master/libraries/mongodb.rb). Chef cannot load mongo gem even if the gem is installed on the system
[2013-10-11 06:33:35 -0400] fitzdsl_: when I try to load the gem in irb it works well
[2013-10-11 06:33:56 -0400] fitzdsl_: but during chef run, I got 'LoadError: cannot load such file -- mongo'
[2013-10-11 06:34:25 -0400] fitzdsl_: any idea ?
[2013-10-11 06:34:47 -0400] fitzdsl_: chef-client 11.4.0 on CentOS 6
[2013-10-11 06:35:36 -0400] Garo_: fitzdsl_: we've had this kind of problems when running virtual machines with Rightscale. They have their own Ruby environment for Chef instead of the default ruby installation
[2013-10-11 06:36:11 -0400] fitzdsl_: Garo_: I'm on in house vmware installation
[2013-10-11 06:36:23 -0400] Garo_: fitzdsl_: in that case I had to find the gem binary under some obscure path inside /opt instead of the default 'gem' binary
[2013-10-11 06:36:43 -0400] fitzdsl_: irb can load correctly the gem
[2013-10-11 06:36:59 -0400] fitzdsl_: and it's located in '/usr/lib/ruby/gems/1.8/gems/mongo-1.9.2/'
[2013-10-11 06:38:56 -0400] Garo_: I wish I could help you more, but I don't think I can :(
[2013-10-11 06:39:06 -0400] fitzdsl_: Garo_: thanks any way
[2013-10-11 06:39:14 -0400] Garo_: )
[2013-10-11 06:39:16 -0400] Garo_: :)
[2013-10-11 06:49:04 -0400] hakunin: anyone knows why i removed some overridden attributes from my cookbook, but chef client keeps them somehow cached, instead of falling back on default attributes of the cookbook
[2013-10-11 06:51:41 -0400] hakunin: basically attributes have changed in a new version of cookbook, but client still sees old ones
[2013-10-11 06:52:53 -0400] fitzdsl_: is that possible that my problem could come from the fact that mongo gem is installed for ruby1.8 and chef is running ruby1.9 ?
[2013-10-11 07:01:01 -0400] fitzdsl_: from system irb I can load mongo but not from chef's one
[2013-10-11 07:01:42 -0400] fitzdsl_: and mongo is not listed in chef's gem list
[2013-10-11 07:23:41 -0400] jverdeyen: Goodmorning! Anyone who can give me feedback on this issue i'm having? https://github.com/joerocklin/chef-mariadb/issues/2#issuecomment-26097512
[2013-10-11 07:52:33 -0400] bigbigbang: Hi ! Is it possible to perform a search using something like attribute > 0 ?? Currently I do :  knife search node "security_unix_passwd_nb_user_with_empty_password:1" .. which work but isn't enough ..
[2013-10-11 07:53:17 -0400] laurent\: yes :)
[2013-10-11 07:53:40 -0400] laurent\: security_unix_passwd_nb_user_with_empty_password:[1 TO *]
[2013-10-11 07:58:30 -0400] bigbigbang: thanks laurent\
[2013-10-11 08:02:19 -0400] pixie79: hi all, is there a way to have only certain entries in a databag encrypted? for example i have a role field which i do not want to encrypt and needs to be searchable, but at the moment it is being encrypted and chef can not decrypt it
[2013-10-11 08:03:21 -0400] arussel: pixie79: why don't you use different data bag ?
[2013-10-11 08:03:44 -0400] pixie79: for some reason chef has encrpyted all my databags now by default
[2013-10-11 08:03:49 -0400] pixie79: and i dont see how to stop it
[2013-10-11 08:04:02 -0400] arussel: pixie79: do you have it in your knife config ?
[2013-10-11 08:04:06 -0400] pixie79: in fact i dont really need any of this bag encrypted
[2013-10-11 08:04:28 -0400] arussel: it happened to me when I put the file-secret in my knife.rb
[2013-10-11 08:04:49 -0400] arussel: it would encrypt by default, I just removed it and add the option when I need encryption
[2013-10-11 08:04:50 -0400] pixie79: i do have the secret there, but i though that was needed?
[2013-10-11 08:05:03 -0400] arussel: not if you don't need secret :-)
[2013-10-11 08:05:15 -0400] pixie79: arh ok  - so if i remove and re upload then it will be fixed :)
[2013-10-11 08:05:25 -0400] arussel: remove it and add the command line option if you want to encrypt some stuff
[2013-10-11 08:06:12 -0400] pixie79: ok - so if i want a bag encrypted - i just supply that file when uploading
[2013-10-11 08:06:44 -0400] arussel: iirc, with something like --secre-file /path/to/file
[2013-10-11 08:13:02 -0400] pixie79: thanks :) i was starting to go mad
[2013-10-11 08:13:28 -0400] arussel: np
[2013-10-11 08:17:37 -0400] toontje__: Hey all! What are the prereqs to be able to bootstrap a node? I have a standard Ubuntu 12.04 server as target. SSH disabled. knife bootstrap gives me a networking error. SSH enabled knife bootstrap gives me "Bootstrapping Chef on <IP> and nothing else. I am following http://docs.opscode.com/install_bootstrap.html
[2013-10-11 08:18:21 -0400] n1ko: what are you actually trying to do?
[2013-10-11 08:18:30 -0400] n1ko: you have a role or a recipe you are trying to bootstrap, right?
[2013-10-11 08:18:52 -0400] n1ko: and bootstrap needs ssh, like is mentioned on the page
[2013-10-11 08:19:41 -0400] toontje__: This is what i'm trying to do:  It will install the chef-client executable (if necessary), generate keys, and register the node with the server.
[2013-10-11 08:22:37 -0400] n1ko: so did you look at the server whats happening when its bootstrappin?
[2013-10-11 08:22:42 -0400] n1ko: installing ruby and chef takes awhile
[2013-10-11 08:24:28 -0400] toontje__: Newbie here. Where can i follow what is happening? I have top running on the console, and i can see ruby and postgres activity, but are there any logs i can follow?
[2013-10-11 08:24:42 -0400] TCMSLP: I've found knife quite good at reporting failures (the error messages perhaps not so useful though)
[2013-10-11 08:25:00 -0400] TCMSLP: toontje__: I think you can add a -V or two to dump debug info
[2013-10-11 08:25:02 -0400] arussel: toontje__: to learn the basic of bootstraping and all, I would recommend: https://learnchef.opscode.com/
[2013-10-11 08:25:23 -0400] n1ko: toontje__: on the server what you are trying to configure
[2013-10-11 08:25:36 -0400] n1ko: not on chef-server
[2013-10-11 08:59:32 -0400] toontje__: Where can i find log files regarding what the server is doing? I cannot get knife bootstrap to work. #newbie
[2013-10-11 09:03:29 -0400] ultimex: toontje__, knife bootstrap isn't somethings done by the server
[2013-10-11 09:03:58 -0400] toontje__: So how do you troubleshoot when knife bootstrap doesn't do anything?
[2013-10-11 09:04:31 -0400] ultimex: can you put you command line and log on a paste/gist?
[2013-10-11 09:05:13 -0400] ultimex: but to begin, you may have to activate verbose mode for knife
[2013-10-11 09:11:04 -0400] toontje__: Command: knife bootstrap <IP of the node> -x <myusername> -P <mypassword>
[2013-10-11 09:11:21 -0400] toontje__: BTW, my Windows node seems to respond fine.
[2013-10-11 09:12:16 -0400] ultimex: you are trying to bootstrap on windows?
[2013-10-11 09:14:05 -0400] ultimex: if it's the case, you must use something like that: knife bootstrap windows winrm ...
[2013-10-11 09:14:08 -0400] n1ko: toontje__: if you are boostrapping ubuntu you need sudo
[2013-10-11 09:14:37 -0400] n1ko: like the guide you were followed suggests
[2013-10-11 09:15:46 -0400] toontje__: Sorry, forgot to copy paste that. I am doing the --sudo. The command line i use is knife bootstrap <IP of the node> -x <myuserid> -P <mypassword> --sudo
[2013-10-11 09:16:27 -0400] toontje__: And all i get is the message: Bootstrapping Chef on <IP>  nothing else.
[2013-10-11 09:17:11 -0400] toontje__: where when i bootstrap the windows box i get all kinds of messages what knife is doing.
[2013-10-11 09:17:48 -0400] toontje__: and i see script activity on the windows target.
[2013-10-11 09:17:56 -0400] toontje__: On the ubuntu target nada.
[2013-10-11 09:18:52 -0400] toontje__: Windows node added successfully.
[2013-10-11 09:19:26 -0400] dmdeklerk: Hi guys/gals
[2013-10-11 09:19:54 -0400] dmdeklerk: Anyone running a multivm setup on vagrant/virtualbox?
[2013-10-11 09:21:36 -0400] dmdeklerk: Am running into troubles using :private_network and the application_ruby  cookbook. Ohai is returing the wrong (for me) ipaddress.
[2013-10-11 09:21:38 -0400] ultimex: toontje__, you must activate verbose, it can be a problem with ssh connection
[2013-10-11 09:22:59 -0400] dmdeklerk: Need the ohai to give the address on eth0 instead of eth1. Sound familiar? Really looking for a best practice/blog post/whatever ...
[2013-10-11 09:23:13 -0400] arussel: dmdeklerk: you can ask ohai for different address
[2013-10-11 09:23:23 -0400] arussel: (sounds very familiar)
[2013-10-11 09:23:42 -0400] dmdeklerk: lots of people must be running into this
[2013-10-11 09:23:53 -0400] arussel: node['network']['interfaces']['eth1']['routes'][0]['src']
[2013-10-11 09:24:03 -0400] arussel: but I wouldn't call it a best practice :-)
[2013-10-11 09:24:28 -0400] arussel: this is the same problem on ec2
[2013-10-11 09:24:43 -0400] arussel: node["ec2"]["public_hostname"]
[2013-10-11 09:24:55 -0400] dmdeklerk: arussel: very interesting
[2013-10-11 09:25:15 -0400] toontje__: ultimex: Command line: knife bootstrap <IP> -u <userid> -P <password> --sudo --use-sudo-password -V
[2013-10-11 09:25:24 -0400] toontje__: ultimex: Same output
[2013-10-11 09:25:33 -0400] arussel: what could ohai do ? choosing the first interface seems the best option, even if not the one we want
[2013-10-11 09:25:52 -0400] dmdeklerk: arussel: This looks nice http://johntdyer.com/blog/2013/01/25/ohai/ cant get it work though
[2013-10-11 09:26:43 -0400] ultimex: dmdeklerk, you can also adapt this plugin: https://github.com/avishai-ish-shalom/vagrant-ohai/blob/master/lib/ohai/vagrant.rb
[2013-10-11 09:26:49 -0400] dmdeklerk: arussel: must I hack the opscode cookbook to get this (node['network']['interfaces']['eth1']['routes'][0]['src']) to work. I rather not
[2013-10-11 09:27:22 -0400] arussel: dmdeklerk: where do you need the IP ?
[2013-10-11 09:27:29 -0400] dmdeklerk: ultimex: cool the more links the better (thats not an invite to flood the channel guys)
[2013-10-11 09:28:53 -0400] dmdeklerk: arussel: i'm kinda dumb regarding to networking, so i'm glad the application_ruby cookbook fixes this in the background, it uses the address on eth0 by default which is not accessible by the other vm.
[2013-10-11 09:29:58 -0400] arussel: dmdeklerk: I needed to know the IP of the db, I got the db node from a search and got the 'real' IP out of it, so this was only in my own cookbook.
[2013-10-11 09:30:00 -0400] ultimex: toontje__, :/ it seems difficult to know the problem is nothing happen on log. You can try to look at "$ ps" if an ssh is running, at "$ tcpdump" if a connection is done... I don't know :/
[2013-10-11 09:30:13 -0400] dmdeklerk: So basically my question should be.... How do I get the application_ruby cookbook working with multiple VM's, using vagrant+virtualbox???
[2013-10-11 09:30:31 -0400] toontje__: ultimex: Ok, thanks anyway.
[2013-10-11 09:31:16 -0400] arussel: dmdeklerk: why does the cookbook needs the IP for ?
[2013-10-11 09:31:25 -0400] arussel: s/why/what/
[2013-10-11 09:32:12 -0400] dmdeklerk: arussel: its just to set the host variable in the database.yml (thats the rails db config file)
[2013-10-11 09:32:45 -0400] dmdeklerk: I could set it manually, but that just smells a bit
[2013-10-11 09:32:50 -0400] ultimex: dmdeklerk, IMPOV: I will use vagrant-ohai and node['ipaddress']. All communications between front and db will be on a private network... and it's a good thing :)
[2013-10-11 09:33:23 -0400] dmdeklerk: ultimex: i will look into that right now.. thanks you guys.. very helfull
[2013-10-11 09:33:31 -0400] dmdeklerk: arussel: thank you too!
[2013-10-11 09:53:39 -0400] KungFu_: hello! anyone out there?
[2013-10-11 09:57:16 -0400] dmdeklerk: there are 536 people in this channel ;) hello
[2013-10-11 09:57:56 -0400] KungFu_: thank you :)
[2013-10-11 09:58:16 -0400] dmdeklerk: your wellcome
[2013-10-11 09:58:23 -0400] KungFu_: i was wondering if someone can answer me some questions about ohai
[2013-10-11 09:58:51 -0400] KungFu_: im starting with chef right now
[2013-10-11 09:59:03 -0400] KungFu_: but im very interested about that ohai tool
[2013-10-11 09:59:31 -0400] KungFu_: is it possible to use ohai for collecting my websphere application server configuration?
[2013-10-11 09:59:51 -0400] dmdeklerk: my advise would be to ask for short to the point questions. preferably those that could be awnsered with yes or no.
[2013-10-11 10:01:58 -0400] KungFu_: ok tk you
[2013-10-11 10:02:01 -0400] KungFu_: ;)
[2013-10-11 10:08:29 -0400] dmdeklerk: KungFu: I'm sorry I dont known that, but note that its the middle of the night right now in the states where most of the chef devs work. It will be much more busy in a couple of hours when the workday starts over there
[2013-10-11 10:10:23 -0400] dmdeklerk: KungFu: Did you know you can search the irc archives? http://community.opscode.com/search?query=websphere&scope=irc_log
[2013-10-11 11:07:18 -0400] dmdeklerk: ultimex: thanks for your tip about the vagrant-ohai plugin. I finally have my rails app running on my local network. Wanna check it out http://33.33.33.16 (haha I'm so funny)
[2013-10-11 12:32:19 -0400] toontje__: Hey all! Having an issue getting a Ubuntu box to bootstrap.
[2013-10-11 12:33:15 -0400] toontje__: Using: knife bootstrap <IP> -u <username> -P <password> --sudo --use-sudo-password -V
[2013-10-11 12:33:39 -0400] toontje__: All i get is the message "Bootstrapping Chef on <IP>"
[2013-10-11 12:34:13 -0400] toontje__: Packet sniffer tells me there is a key exchange and then the target goes out to DNS to do a reverse lookup for my client IP.
[2013-10-11 12:34:19 -0400] toontje__: Which it cannot find.
[2013-10-11 12:35:02 -0400] toontje__: Any idea why it's doing that? Does my client need to be resolvable from the internet?
[2013-10-11 12:58:46 -0400] cwj: toontje__: your client doesnt need to have working reverse dns
[2013-10-11 12:58:58 -0400] cwj: not sure why bootstrap would be checking
[2013-10-11 12:59:20 -0400] jmara: toontje__: can you connect to your node through ssh?
[2013-10-11 12:59:23 -0400] toontje__: cwj: Thanks. It's the node that is checking. What else can i do to troubleshoot this issue?
[2013-10-11 12:59:33 -0400] toontje__: cwl: Yes, i can.
[2013-10-11 12:59:51 -0400] cwj: toontje__: do you see the same reverse dns lookup from the node when you run ohai there?
[2013-10-11 13:00:41 -0400] toontje__: cwj: On the node? Or on the client?
[2013-10-11 13:00:56 -0400] toontje__: cwl: On the node i don't have the ohai command.
[2013-10-11 13:01:02 -0400] cwj: the target system you are bootstrapping
[2013-10-11 13:01:22 -0400] toontje__: cwj: I don't have the ohai command there.
[2013-10-11 13:01:22 -0400] cwj: in chef terminology that would be the node
[2013-10-11 13:01:40 -0400] cwj: ok then your bootstrap isnt getting far enough for chef to be installed
[2013-10-11 13:01:50 -0400] toontje__: cwj: Exactly.
[2013-10-11 13:02:32 -0400] cwj: if you are running bootstrap without specifying a script, this is the template for script which is most likely being used: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-10-11 13:02:42 -0400] toontje__: cwj: In the sniffer i only see appx 15 packages being exchanged. Basically the SSH2 key exchange.
[2013-10-11 13:03:07 -0400] jmara: toontje__: which chef version do you got on your workstation?
[2013-10-11 13:03:22 -0400] toontje__: Latest.
[2013-10-11 13:04:12 -0400] toontje__: jmara: 11.6.0
[2013-10-11 13:04:41 -0400] cwj: if you are only exchanging 15 packets, i am guessing its not even getting to copy or execute the script that template produces
[2013-10-11 13:04:41 -0400] jmara: do you recieve a timeout or does it load forever?
[2013-10-11 13:05:28 -0400] toontje__: jmara: None of the above. I only get the message that it's bootstrapping Chef on <IP>, nothing else. No errors, no script output, nothing.
[2013-10-11 13:05:49 -0400] toontje__: jmara: I get my prompt back after appx 10 seconds.
[2013-10-11 13:06:15 -0400] toontje__: jmara: Sorry, that is not 10 but 2 seconds.
[2013-10-11 13:07:26 -0400] cwj: toontje__: are you connecting directly to the node you are trying to bootstrap, or is there some kind of proxy in path?
[2013-10-11 13:07:42 -0400] toontje__: cwj: No proxies. All on the same network.
[2013-10-11 13:08:03 -0400] cwj: is that node able to connect to the internet without a proxy?
[2013-10-11 13:08:16 -0400] toontje__: cwj: chef-server and 2 nodes in VM's, client on the Mac where VMWare is installed.
[2013-10-11 13:08:27 -0400] jmara: toontje__: You've posted that you user -u as Username, but thats the API User, I you need a SSH Username use -x   :-)
[2013-10-11 13:09:26 -0400] toontje__: jmara: You won!! Will you go on for the $1.000.000 prize?
[2013-10-11 13:09:39 -0400] jmara: ;)
[2013-10-11 13:09:53 -0400] toontje__: jmara: Thank you!!!!
[2013-10-11 13:10:04 -0400] jmara: toontje__: you're welcome :)
[2013-10-11 13:10:33 -0400] toontje__: jmara: Now i have a name resolution error, but that's easy to fix. Thanks, all!!
[2013-10-11 13:15:15 -0400] ultimex: Nobody know hos to do a "chmod -R" with a chef resource?
[2013-10-11 13:15:40 -0400] ultimex: directory only do for current dir
[2013-10-11 13:16:24 -0400] ultimex: and if I use "execute" it will always "notifies" even if nothing to do
[2013-10-11 13:18:29 -0400] IceyEC: is there anybody from Opscode in here?
[2013-10-11 13:25:23 -0400] ocholetras: guys on dictionaries
[2013-10-11 13:25:27 -0400] ocholetras: use symbols
[2013-10-11 13:25:30 -0400] ocholetras: or strings?
[2013-10-11 13:25:45 -0400] ocholetras: i have found some cookbooks doing by symbols
[2013-10-11 13:25:48 -0400] ocholetras: others by strings..
[2013-10-11 13:25:59 -0400] ocholetras: is there any "good practice" recomendation?
[2013-10-11 13:26:01 -0400] ddyke: Good morning all, I am attempting to use knife bootstrap with --ssh-gateway to hit an instance on a private VPC; and I am being prompted for a pw; I have already set up key authentication. Is this normal? Do i have to supply a password?
[2013-10-11 13:26:26 -0400] ocholetras: ddyke:  do you have a ssh-key-aggent?
[2013-10-11 13:26:41 -0400] cpuguy83: ocholetras: In Chef people generally use strings.  In plain ole ruby, symbols are generally preferred.
[2013-10-11 13:26:47 -0400] jmara: ddyke: did you allow AgentForwarding in your local .ssh/config ?
[2013-10-11 13:27:07 -0400] ddyke: on my workstation?
[2013-10-11 13:27:10 -0400] ocholetras: ddyke:  if not you need to indicate knife what identity file to use
[2013-10-11 13:27:11 -0400] ddyke: no i have not.
[2013-10-11 13:27:18 -0400] ocholetras: ddyke: using "-i" flag
[2013-10-11 13:27:27 -0400] ddyke: ocholetras: I am using -i or --identity-file flag
[2013-10-11 13:27:46 -0400] ocholetras: can you check if you can login with ssh client ?
[2013-10-11 13:28:09 -0400] ddyke: ocholetras: I can login seamlessly with ssh
[2013-10-11 13:28:22 -0400] ocholetras: without any password prompt?
[2013-10-11 13:28:49 -0400] ddyke: ocholetras: yep
[2013-10-11 13:29:52 -0400] ocholetras: does your key had been generated with a passphrase?
[2013-10-11 13:30:15 -0400] ddyke: ocholetras: negative
[2013-10-11 13:30:42 -0400] ocholetras: ddyke: if you are able to login with ssh -i hen knife should be cappable of login also
[2013-10-11 13:31:03 -0400] ddyke: ocholetras: thus confusion and predicametn
[2013-10-11 13:31:32 -0400] ocholetras: are you using the -x flag
[2013-10-11 13:31:37 -0400] ocholetras: to indicate user to login
[2013-10-11 13:31:38 -0400] ocholetras: etc..
[2013-10-11 13:31:39 -0400] ocholetras: ?
[2013-10-11 13:31:43 -0400] ddyke: yes
[2013-10-11 13:32:00 -0400] ocholetras: did you see anything useful on auth.log
[2013-10-11 13:32:03 -0400] ocholetras: on the node?
[2013-10-11 13:32:23 -0400] ddyke: its closing the connection with [preauth]
[2013-10-11 13:32:37 -0400] ddyke: I am looking into what they said about agent forwarding right now
[2013-10-11 13:33:31 -0400] jmara: -A should enable agent forwarding for knife
[2013-10-11 13:34:56 -0400] jmara: ddyke: It sounds a bit the you recieve the password prompt from the node after you successful connected to your ssh gateway cause it doesn't see the private key
[2013-10-11 13:35:54 -0400] ddyke: jmara: I have set the key on the gateway node and able to connect gateway node -> vpc node
[2013-10-11 13:36:55 -0400] jmara: according to this blog post that should not be needed: http://clarkdave.net/2013/05/creating-ec2-instances-in-an-amazon-vpc-using-chef-and-knife/
[2013-10-11 13:37:43 -0400] ddyke: jmara: that is exactly what i used
[2013-10-11 13:38:16 -0400] ddyke: jmara: my guess is my ssh-gateway isn't configured properly
[2013-10-11 13:38:32 -0400] jmara: is it possoble that knife connects to the wrong user at your ssh-gateway host?
[2013-10-11 13:39:26 -0400] ddyke: I tried to pass -V for verbose on the knife command to see but nothing
[2013-10-11 13:40:29 -0400] ddyke: sshd[3883]: Connection closed by xxx.xxx.xxx.xxxx [preauth]
[2013-10-11 13:40:44 -0400] jmara: on the ssh-gateway?
[2013-10-11 13:40:46 -0400] ddyke: that is what i see on the SSH node
[2013-10-11 13:40:48 -0400] ddyke: corret
[2013-10-11 13:43:11 -0400] jmara: did you try --ssh-gateway="user@gateway-host" to verify that its not a wrong user your try to enter on the gateway?
[2013-10-11 13:44:26 -0400] ddyke: let me try and string it
[2013-10-11 13:44:54 -0400] ddyke: same thing
[2013-10-11 13:44:59 -0400] jmara: :-/
[2013-10-11 13:45:15 -0400] ddyke: wait a tick
[2013-10-11 13:45:43 -0400] ddyke: is it required to have bootstraped the sshgateway node
[2013-10-11 13:46:16 -0400] jmara: no I don't thinks so
[2013-10-11 13:46:20 -0400] jmara: -s
[2013-10-11 13:57:51 -0400] ddyke: So. I can confirm I can use the node as a gateway. I configured my local config to use it wiht ssh -W
[2013-10-11 13:57:55 -0400] ddyke: and its working properly
[2013-10-11 13:58:01 -0400] ocholetras: anybody managing pam with a recipe+template+attr?
[2013-10-11 13:58:05 -0400] ocholetras: or simply put file?
[2013-10-11 13:58:09 -0400] ddyke: still investigating why knife boostrap wants to request a password
[2013-10-11 14:02:59 -0400] TomP:  h
[2013-10-11 14:03:23 -0400] ALVAN: hi all,  how can i print line in chef if line contains a specific string ?
[2013-10-11 14:03:43 -0400] ALVAN: i want to print the line in chef  debug logs
[2013-10-11 14:04:06 -0400] TomP: Having an issue trying to use application_java. The error is: Cookbook application_java depends on cookbook 'application' version '~> 3.0'
[2013-10-11 14:16:44 -0400] TCMSLP: ALVAN: I'm guessing you need ruby code?
[2013-10-11 14:17:58 -0400] ALVAN: TCMSLP: yes
[2013-10-11 14:18:50 -0400] mondo: is anyone managing nodes' RHN channels with Chef?
[2013-10-11 14:20:34 -0400] cwj: ALVAN: Chef::Log.debug(Your message here) if your_condition
[2013-10-11 14:21:44 -0400] cwj: http://www.ruby-doc.org/core-1.9.2/String.html#method-i-3D-7E is probably what you want for making a conditional on a string match
[2013-10-11 14:22:17 -0400] ALVAN: cwj i need to print each line from all files in a directory, if the line  matches string
[2013-10-11 14:22:25 -0400] ALVAN: i have done https://dpaste.de/MM2V/raw/
[2013-10-11 14:22:30 -0400] ALVAN: but is not working ok
[2013-10-11 14:23:01 -0400] cwj: change your puts line to Chef::Log.debug(line)
[2013-10-11 14:23:20 -0400] cwj: Chef::Log.debug(line) if line =~ /cougar.datasource*URL/
[2013-10-11 14:23:27 -0400] ddyke: does gw_ops need to be supplied for the -ssh-gateway?
[2013-10-11 14:24:51 -0400] ddyke: how would I print the output of session.via(gw_host, gw_user || config[:ssh_user], gw_opts)
[2013-10-11 14:25:17 -0400] ALVAN: cwj problem is that even without chef ..the above code i paste is not working on all files recursive
[2013-10-11 14:25:27 -0400] ALVAN: i mean only in ruby code
[2013-10-11 14:25:37 -0400] ALVAN: but i will try to add that as well
[2013-10-11 14:26:11 -0400] cwj: ALVAN: sounds like you need to add more debugging output then
[2013-10-11 14:26:54 -0400] cwj: print out what you are doing at each level of looping to help you determine where your logic is failing
[2013-10-11 14:28:22 -0400] toontje__: Next problem. Creating my first cookbook. knife cookbook create ntp (according to https://learnchef.opscode.com/starter-use-cases/ntp/). ERROR: Errno::EACCES: Permission denied - /var/chef Client is Mac, server is Ubuntu 12.04 User has the Admin checkbox checked.
[2013-10-11 14:30:13 -0400] TCMSLP: I didn't think 'knife cookbook create' talked to the server;  I thought it only did than for 'upload'
[2013-10-11 14:30:48 -0400] TCMSLP: local file permissions?   I'm new to chef though so could well be wrong
[2013-10-11 14:32:06 -0400] toontje__: TCMSLP: Running it on a Mac. Client should not have to write to /var if not root. There is no /var/chef on my filesystem.
[2013-10-11 14:33:01 -0400] toontje__: TCMSLP: Regular user doesn't have permissions there. And they shouldn't have, i think.
[2013-10-11 14:40:11 -0400] TCMSLP: toontje_: I'm trying to figure out how chef/knife knows where your local repo is
[2013-10-11 14:40:34 -0400] TCMSLP: toontje_: Do you have a chef-repo directory?  Did you untar the standard supplied repo?
[2013-10-11 14:40:53 -0400] TCMSLP: I'm wondering if this is missing, if knife defaults to a system /var/chef
[2013-10-11 14:41:41 -0400] jbz: TCMSLP: There is a chef_repo_path config field in knife.rb
[2013-10-11 14:41:59 -0400] jbz: can also be used as a commadn line option with some knife subcommands
[2013-10-11 14:42:19 -0400] jbz: oh I'm sorry didn't realize you were asking another user, my bad. :-)
[2013-10-11 14:42:34 -0400] TCMSLP: jbz: I don't recall manually setting this at install/run time
[2013-10-11 14:42:44 -0400] daxroc: Evening all
[2013-10-11 14:42:51 -0400] TCMSLP: jbz: it worked for me, but toontje__ is having problems
[2013-10-11 14:43:04 -0400] TCMSLP: toontje__: see above
[2013-10-11 14:43:13 -0400] jbz: reading backscroll
[2013-10-11 14:43:29 -0400] toontje__: Ok, there is no repo path in my knife.rb. Looking it up in the docs now.
[2013-10-11 14:43:50 -0400] daxroc: I'm working on a custom Ohai plugin, can other recipes require them ? What's the correct method to load them for a node ?
[2013-10-11 14:46:53 -0400] toontje__: TCMSLP: Added cookbook path to the knife.rb. All working now. Step by step. ;-)
[2013-10-11 14:48:13 -0400] jbz: daxroc: There is an 'ohai' cookbook on Opscode's community cookbook repo
[2013-10-11 14:48:25 -0400] TCMSLP: toontje__: I only did this myself yesterday, followed the quick-start (under ubuntu) and it all 'just worked'.  I'm unsure how/when knife sets this.
[2013-10-11 14:48:31 -0400] jbz: daxroc: You put your plugins in the files dir, and the recipe installs 'em.
[2013-10-11 14:48:55 -0400] jbz: daxroc: https://github.com/opscode-cookbooks/ohai
[2013-10-11 14:49:32 -0400] toontje__: TCMSLP: Yes, if you follow the (hosted) learn chef tutorials all just work. However i am setting up my own environment. And yes, i also started only a few days ago. #beginner
[2013-10-11 14:51:13 -0400] d```: toontje__: I started out the way that you're starting out, I'd recommend starting with hosted chef to demo/evaluate
[2013-10-11 14:52:06 -0400] d```: toontje__: mostly because actual chef server maintenance is pretty minimal once you get going, and it's probably better to how you like the DSL etc
[2013-10-11 14:52:22 -0400] daxroc: jbz: Thats what I've tried didn't create the info in the ui tho.
[2013-10-11 14:53:22 -0400] toontje__: d````: Thanks for the advice. Probably i will eventually end up that way, but i also want to play around with the chef server i guess. Lets see. Just beginning here.
[2013-10-11 14:53:23 -0400] jbz: daxroc: The attributes for your plugin didn't show up in the server record for the node?
[2013-10-11 14:54:02 -0400] daxroc: jbz: yes
[2013-10-11 14:54:15 -0400] daxroc: jbz: They didn't show up
[2013-10-11 14:54:20 -0400] jbz: daxroc:  Do they show up if you run ohai manually on the node?
[2013-10-11 14:54:25 -0400] jbz: (after running that recipe)
[2013-10-11 14:56:09 -0400] daxroc: jbz: No, not listed on the node directly either
[2013-10-11 14:58:41 -0400] jbz: daxroc: Hm, and it did install the plugin file?
[2013-10-11 15:02:39 -0400] daxroc: jbz: plugins are present in the plugin path
[2013-10-11 15:03:00 -0400] jchauncey: so how are people using environments here?
[2013-10-11 15:29:30 -0400] IceD^: can anyone point me to some doc/guide/proper google query - I need to manage hundreds of EC2 instances and stop/start operations are very common. I do not want to do setup on each new server each time (it takes ~7-8 mins), I'd rather ask chef to create ec2 custom image somehow and use it to start servers
[2013-10-11 15:30:28 -0400] ktownsend: is there any reason, in chef 10.16.6, why chef_gem would run before an include_recipe?
[2013-10-11 15:30:51 -0400] ktownsend: or before package, for that matter
[2013-10-11 15:31:27 -0400] fak3r: blah, selinux, can chef set it to 'permissive' in a recipe?
[2013-10-11 15:35:10 -0400] dmdeklerk: Question ... Do you use a "resque" cookbook ??? If so.. Which one? The one from infochimps (http://community.opscode.com/cookbooks/resque) seems to be no longer supported.
[2013-10-11 15:45:21 -0400] fak3r: my workaround: execute "setenforce" do command "setenforce 0" action :run end
[2013-10-11 15:58:23 -0400] ddyke: would there be any reason why knife bootstrap will ignore an identity file being passed
[2013-10-11 16:01:47 -0400] nicgrayson: ktownsend: i'm pretty sure the chef_gems all run before other includes
[2013-10-11 16:03:05 -0400] nicgrayson: ktownsend: so i've had to do strange things like this https://gist.github.com/nicgrayson/6937379
[2013-10-11 16:04:23 -0400] ddyke: is there a way i can obtain the output of the session.via(gw_host, gw_user || config[:ssh_user], gw_opts)
[2013-10-11 16:17:26 -0400] ddyke: exit
[2013-10-11 16:19:02 -0400] broconne: ok, this seems odd..... chef is thowing a validation error on one linux platform that it doesn't on another.
[2013-10-11 16:20:10 -0400] broconne: I pass "cookbook_name" into a provider.  on redhat that is fine.. on sles it tells me its not a string ( appears to be a symbol).
[2013-10-11 16:22:24 -0400] bean: broconne: try .to_s'ing it
[2013-10-11 16:22:25 -0400] bean: :)
[2013-10-11 16:22:59 -0400] broconne: yeah..  just didn't expect that from chef.
[2013-10-11 16:23:12 -0400] broconne: on two similiar linux platforms
[2013-10-11 16:24:47 -0400] bean: broconne: I'd imagine it has to do with the chef version
[2013-10-11 16:25:00 -0400] bean: unless they're the same
[2013-10-11 16:25:31 -0400] broconne: hould be the same, using omnibus latest
[2013-10-11 16:25:47 -0400] broconne: yeah 11.6.2
[2013-10-11 16:25:49 -0400] mattupstate: anyone else getting a 400 on posting reporting data?
[2013-10-11 16:31:24 -0400] jchauncey: being able to execute your test-kitchen serverspec tests against a host you provisioned with chef and have them pass as well is relaly freaking awesome
[2013-10-11 16:31:35 -0400] jchauncey: a remote host that is
[2013-10-11 16:35:22 -0400] jamesc: mattupstate: Can you send me details of the 400 you're getting (a copy of the failed-reporting-run.json, orgname, hostname) to james@opscode.com
[2013-10-11 16:36:57 -0400] jamesc: We've got some validation errors that we're tracking down in the server code right now and client side output will help. Note that the errors don't affect your chef-client runs - it's only the posting of reporting data that fails.
[2013-10-11 16:38:01 -0400] jamesc: The reason you're seeing them is that we've enabled some organizations in hosted with the new reporting feature before the full launch of reporting.  You can see the reporting data your hosts have sent if you use preview.opscode.com
[2013-10-11 16:38:57 -0400] fak3r: yikes, so a cookbook deletes a dir, but I need it to NOT try and delete it if it's not there
[2013-10-11 16:39:11 -0400] mattupstate: jamesc: sure, one sec
[2013-10-11 16:39:19 -0400] mattupstate: and by hostname, what do you mean?
[2013-10-11 16:39:45 -0400] broconne: fak3r - doesn't it do taht by default?
[2013-10-11 16:40:13 -0400] jamesc: mattupstate: the name of the client which is seeing the error- it'll help me correlate it in the logs
[2013-10-11 16:40:22 -0400] broconne: fak3r:  usually chef guards that stuff.. if it doesn't can't you just add a not_if ?
[2013-10-11 16:40:24 -0400] mattupstate: jamesc: got it, incoming...
[2013-10-11 16:41:27 -0400] fak3r: broconne: ya, I have it rm a directory, then create a symlink by that name to another dir. So when I run it again it tries to del the directory again, but that dir isn't there (it's a symlink) so I need it NOT to try and delete it
[2013-10-11 16:41:56 -0400] fak3r: broconne: so if -d "$DIR"; then rm $DIR fi
[2013-10-11 16:42:09 -0400] jchauncey: just use a not_if guard
[2013-10-11 16:42:23 -0400] jchauncey: and do a test for that directory
[2013-10-11 16:42:38 -0400] mattupstate: jamesc: sent
[2013-10-11 16:42:44 -0400] broconne: yeah exactly..
[2013-10-11 16:42:47 -0400] broconne: are you doing an rm?
[2013-10-11 16:42:59 -0400] jamesc: mattupstate: got it, thanks - will have a dig into this and get back to you
[2013-10-11 16:43:32 -0400] broconne: or are you using the chef directory resource, with the action of delete?
[2013-10-11 16:43:55 -0400] mattupstate: jamesc: appreciate it
[2013-10-11 16:45:15 -0400] broconne: I would recommend using hte chef directory resource.. and if you need to guard it.. just add the not_if w/ the appropriate test.
[2013-10-11 16:46:48 -0400] fak3r: broconne: thanks, yes, using :delete to rm it, I've wrote it up with the not_if as jchauncey mentioned. think this will work?
[2013-10-11 16:46:49 -0400] fak3r: https://gist.github.com/philcryer/6938089
[2013-10-11 16:47:34 -0400] fak3r: it's dumb, but I need to make this work with the client's env - later when I redo it, I'll fix things like this...
[2013-10-11 16:47:41 -0400] broconne: that looks right to me.
[2013-10-11 16:47:49 -0400] broconne: I would also extract the dir into a variable..
[2013-10-11 16:47:53 -0400] broconne: but I am pretty into DRY
[2013-10-11 16:48:07 -0400] broconne: or potentially an attribute, depending on your needs.
[2013-10-11 16:48:07 -0400] fak3r: k, thanks
[2013-10-11 16:48:09 -0400] jchauncey: fak3r: sounds like a great reason to write some test-kitchen tests =)
[2013-10-11 16:48:21 -0400] jchauncey: and some chefspec tests
[2013-10-11 17:07:12 -0400] dgarstang2: Question::: ... seems like an execute lwrp always logs that it's running, even when it's not. Is that true?
[2013-10-11 17:08:13 -0400] elBarto_: hello!
[2013-10-11 17:12:34 -0400] aauthor: Is there good way to install a system gem from a git repo?
[2013-10-11 17:12:38 -0400] timsmith: dgarstang2: If it's logging then it's most likely running
[2013-10-11 17:12:45 -0400] timsmith: what do you have the action set to?
[2013-10-11 17:12:50 -0400] timsmith: it defaults to run
[2013-10-11 17:16:12 -0400] arussel: how do you get a secret binary file on a node  ? I see how to transform it in base64, put it in a secret data bag, but then I'm not sure how to base64 decode and create a file from it
[2013-10-11 17:16:47 -0400] krimcl: Is there a way to override the auto generated ohai attributes? I'm using eucalyptus and despite feeding knife bootstrap the private ip address that is route-able the ohai address ends up with the non-route-able one stored as a node attribute... Which prevents knife ssh from connecting properly.
[2013-10-11 17:17:08 -0400] dgarstang2: timsmith: I don't think it is
[2013-10-11 17:17:26 -0400] timsmith: are you notifying it from a different resource
[2013-10-11 17:17:35 -0400] timsmith: I've never seen it run every time unless I do something wrong
[2013-10-11 17:18:05 -0400] itisit: Hi
[2013-10-11 17:18:54 -0400] itisit: I set a attribute in role file to override the value set in attributes/default.rb, but it does not take effect, as below:
[2013-10-11 17:19:29 -0400] itisit: In role JSON file: "version": "3.1.5", in attributes/default.rb: default['rabbitmq']['version'] = '3.1.3'
[2013-10-11 17:19:57 -0400] itisit: Anyone know what could be the reason?, this is a rabbitmq cookbook
[2013-10-11 17:20:38 -0400] itisit: rest attributes setting in role file do work.
[2013-10-11 17:21:58 -0400] d```: itisit: are you setting rabbitmq version as an override attribute in the role?
[2013-10-11 17:22:08 -0400] itisit: no, as default
[2013-10-11 17:22:38 -0400] geekbri: nice.  Anybody suddenly have issues using hipchat notifies because of gem dep crap or am I the last human not using omnibus :)
[2013-10-11 17:22:45 -0400] odyssey4me: krimcl - to my knowledge, no. I've needed to override it before and ended up writing an ohai plugin to do it. It was remarkably simple to write. :)
[2013-10-11 17:23:17 -0400] odyssey4me: geekbri - not the last, but a rare breed ;)
[2013-10-11 17:23:22 -0400] mondo: is anyone managing RHEL nodes' RHN channels with Chef?
[2013-10-11 17:23:46 -0400] geekbri: I think httpparty is whats breaking everything
[2013-10-11 17:24:58 -0400] itisit: suppose the priority of default attribute located in role is higher than default attribute located in attribute file, right?
[2013-10-11 17:29:36 -0400] thebishop: what's the best way to add instrumentation to a recipe?
[2013-10-11 17:30:25 -0400] broconne: there is an Airplane! joke in here somewhere....
[2013-10-11 17:31:21 -0400] dgarstang2: Anyone here deployed hadoop with chef? :)
[2013-10-11 17:33:54 -0400] thehar: yes
[2013-10-11 17:34:01 -0400] thehar: and lots of others.
[2013-10-11 17:34:14 -0400] fak3r: in my recipe     node.default['zabbix']['agent']['servers'] = [ '111.222.333.444' ]     but then in the file it writes out     Server=["10.187.255.246"]
[2013-10-11 17:34:18 -0400] thehar: https://github.com/infochimps-labs/ironfan
[2013-10-11 17:34:30 -0400] fak3r: it's an array so I need it in [ ] but it should just write it as Server=10.187.255.246
[2013-10-11 17:38:28 -0400] odyssey4me: fak3r - in your recipe are you iterating through a loop to write out the value, or just writing out the array?
[2013-10-11 17:41:34 -0400] geekbri: So just for the edification of others
[2013-10-11 17:41:54 -0400] geekbri: the new HTTParty 0.12.0 requires json 1.8.0 which may cause gem dependency issues
[2013-10-11 17:43:43 -0400] gchristensen: yeah it does :(
[2013-10-11 17:44:21 -0400] gchristensen: geekbri: do you have a solution for that?
[2013-10-11 17:44:31 -0400] geekbri: gchristensen: Lock httparty into 0.11.0 :)
[2013-10-11 17:44:55 -0400] geekbri: I don't have the time right now to poke around and figure out what has a dep on json 1.7.X
[2013-10-11 17:45:10 -0400] geekbri: It could be exclusive to my setup that im just using an old gem causing the problem
[2013-10-11 17:45:24 -0400] geekbri: I'll try to poke around later.  For the time being if you force an install of httparty 0.11.0 you'll be ok
[2013-10-11 17:45:55 -0400] gchristensen: kx
[2013-10-11 17:46:46 -0400] mondo: Hey zabbix!  How are you registering your machines with the Zabbix server?  I have a script I use without Chef that uses the Zabbix API to add servers, but if anyone has added this functionality to a Chef recipe
[2013-10-11 17:47:10 -0400] mondo: wondering if anyone*
[2013-10-11 17:50:07 -0400] fak3r: odyssey4me: not sure, it's only 1 IP, but it can be many, so I understand it's array
[2013-10-11 17:50:27 -0400] fak3r: odyssey4me: but, well here's the details- what I have in template, recipe and what I get https://gist.github.com/philcryer/6938089
[2013-10-11 17:56:33 -0400] mondo: fak3r, in the zabbix recipe I'm using (https://github.com/laradji/zabbix) he's doing Server=<%= node.zabbix.agent.servers.join(',') %>
[2013-10-11 17:56:38 -0400] geekbri: gchristensen: so my solution doesn't work just yet.  :)
[2013-10-11 17:56:44 -0400] gchristensen: heh
[2013-10-11 17:57:04 -0400] geekbri: gchristensen: even after forcing an install of httparty 0.11.0 something is causing it to install httparty 0.12.0 so the problem keeps occuring
[2013-10-11 17:57:11 -0400] geekbri: looks like i'll be forced to dig deeper
[2013-10-11 17:57:36 -0400] gchristensen: got it
[2013-10-11 18:03:20 -0400] fak3r: mondo: ah, ok I'll try it that way, thanks!
[2013-10-11 18:04:54 -0400] fak3r: mondo: hey, that worked, so I had it written in the template wrong - wasn't looking there - thank you!
[2013-10-11 18:05:05 -0400] mondo: awesome!
[2013-10-11 18:49:29 -0400] dgarstang2: So.... how do you put your chef git repo under berkshelf control when you've split the cookbooks into separate repos? What's left behind isn't a cookbook.
[2013-10-11 18:50:51 -0400] siezer: dgarstang2 berkshelf is about managing artifacts not git repos
[2013-10-11 18:53:27 -0400] siezer: dgarstang2 if you have a need to point berkshelf at a SCM repo, it should be a temporary developement phase thing
[2013-10-11 18:53:36 -0400] siezer: equate it with bundler
[2013-10-11 18:57:04 -0400] siezer: or perl carton
[2013-10-11 18:57:24 -0400] siezer: or python pip
[2013-10-11 19:00:20 -0400] arussel: how do you get a secret binary file on a node  ? I see how to transform it in base64, put it in a secret data bag, but then I'm not sure how to base64 decode and create a file from it
[2013-10-11 19:02:48 -0400] bean: arussel: it's not base64ing it
[2013-10-11 19:02:59 -0400] bean: its encrypting it with your encrypted_data_bag_secret
[2013-10-11 19:04:35 -0400] arussel: bean:  I'm not saying that the encrypting process base64 the file. I have a binary file that I need to put on the node, so *I* base64 for it, put it in a data bag, encrypt it, get it back in the node, but don't know how to create a binary file back from it
[2013-10-11 19:05:21 -0400] bean: Chef::EncryptedDataBagItem.load
[2013-10-11 19:08:25 -0400] arussel: bean: I don't see how the load could help me. I know how to get the decrypted file from the encrypted databag.
[2013-10-11 19:08:49 -0400] bean: pull it out from the databag and restore it to the server?
[2013-10-11 19:10:20 -0400] arussel: bean:  have a base64 string, how do I decode it and create a file from it ? (this was my initial question), I don't mean how do I decrypt an item of my data bag
[2013-10-11 19:11:10 -0400] bean: using a file resource with content = to the de-base64'd scring?
[2013-10-11 19:12:58 -0400] arussel: can I 'require base64' in my recipe ? will it handle properly a binary content, not a string content ?
[2013-10-11 19:28:34 -0400] ddyke: resolved the knife --ssh-gateway auth issue. :)
[2013-10-11 19:40:34 -0400] Drewzar: How can I get an array of current roles, and then remove an element from that array?
[2013-10-11 19:40:57 -0400] Drewzar: I can use node.roles to get all the roles, but I can't seem to do anything with that array.
[2013-10-11 19:41:21 -0400] dysinger: possible to set chef_environment in test-kitchen runs?
[2013-10-11 19:42:11 -0400] broconne: anyone run into issues w/ chef and zypper not working for local packages?
[2013-10-11 19:42:23 -0400] dysinger: maybe this is something chef-zero handles? I see nothing about chef_environment in test-kitchen code.
[2013-10-11 19:44:18 -0400] jkeiser: No, I think it would e part of test-kitchen--chef_environment is something you set when you create the node object
[2013-10-11 19:47:03 -0400] dysinger: I think I tried setting it before in the test-kitchen yml attributes but it got overridden to '_default'
[2013-10-11 19:49:34 -0400] cwj: chef_environment isnt really an attribute, so setting it in test-kitchen attributes wont be effective
[2013-10-11 19:51:30 -0400] broconne: hmm..  zypper provider (Looking at the source code) ignores the source attribute..  does one raise that as a defect w/ opscode usually?
[2013-10-11 20:00:56 -0400] eherot: Any Storm users out there?
[2013-10-11 20:05:35 -0400] josephholsten: in the chef-client cookbook, it says "node['chef_client']['log_level'] - Not set anymore, use the default log level and output formatting from Chef 11."
[2013-10-11 20:06:19 -0400] josephholsten: I don't really follow. it sounds like it's trying to say I shouldn't use node['chef_client']['config']['log_level']?
[2013-10-11 20:07:09 -0400] josephholsten: but I need it not to set to :auto, because I need the config to be parsable with chef-rundeck
[2013-10-11 20:25:58 -0400] techminer: Anyone using Sensu to monitor their chef runs?  I've got a sensu plugin I wrote that checks 'knife status' on the chef-server to report nodes that haven't updated their "ohai_time" in X hours.  Just wondering if there is a better way
[2013-10-11 20:26:47 -0400] gingeneer: techminer: we use a Chef handler to report run success/failure
[2013-10-11 20:27:08 -0400] gingeneer: and I believe we touch a status_file on the node
[2013-10-11 20:27:16 -0400] gingeneer: and have the sensu run check the mtime of that file to determine time since last run
[2013-10-11 20:28:03 -0400] techminer: the chef handler reports in to sensu?
[2013-10-11 20:28:15 -0400] gingeneer: lemme dig up the cookbook
[2013-10-11 20:30:17 -0400] gingeneer: looks like we write to /var/chef/status_file
[2013-10-11 20:30:40 -0400] gingeneer: contents are CHEF OK: Run completed in 11.115285127
[2013-10-11 20:30:49 -0400] gingeneer: so we have a custom Chef handler which writes that file when Chef runs
[2013-10-11 20:30:54 -0400] gingeneer: and a Sensu check which parses that file
[2013-10-11 20:30:59 -0400] techminer: gotcha
[2013-10-11 20:41:39 -0400] cwj: i bet it would be easy to write a handler which formats the run log as json and dumps it to the tcp port sensu-client listens on
[2013-10-11 20:41:53 -0400] cwj: so errors would be sent to the sensu server immediately
[2013-10-11 20:45:43 -0400] glen: why recipes i encounter have "package" action :install, not :upgrade? shouldn't chef keep packages updated after initial install?
[2013-10-11 20:46:10 -0400] cwj: glen: depends very much on your level of trust in upstream package maintainers
[2013-10-11 20:49:22 -0400] glen: but it's not something i can actually configure (without modifying recipe)
[2013-10-11 20:50:52 -0400] cwj: you can write a wrapper cookbook which depends upon and includes the recipe, then changes the resources action
[2013-10-11 20:55:17 -0400] jkline: Hello. I have three chef environments, and several roles. Given a particular environment and role is it possible to find out what the total run list would be without launching a node. How can I do that? Thank you.
[2013-10-11 21:05:26 -0400] glen: cwj: should i perhaps write to cookbook upstream to make action configurable via action?
[2013-10-11 21:05:40 -0400] glen: cwj: and what's the best to make "wrapper cookbook"?
[2013-10-11 21:08:54 -0400] cwj: glen: you could certainly do that
[2013-10-11 21:09:20 -0400] cwj: glen: this video might help you with the concept of wrapper cookbooks https://www.youtube.com/watch?v=hYt0E84kYUI
[2013-10-11 21:17:23 -0400] cubed_: so quick question... since httparty 0.12.0 requires json 1.8.0, which causes gem dependency issues for me, does anyone have any suggestions about how i would  go about locking httparty using the chef_gem resource?
[2013-10-11 21:19:14 -0400] glen: cwj: sorry, meant configurable via attributes :D
[2013-10-11 21:19:29 -0400] cwj: glen: yeah i took that to be your meaning
[2013-10-11 21:40:47 -0400] dgarstang2: why no workie? knife search "roles:bc-cloudera-hadoop::datanode"
[2013-10-11 21:41:21 -0400] josephholsten: you need to escape the colons
[2013-10-11 21:41:51 -0400] josephholsten: for more advanced search tricks see: http://lucene.apache.org/core/3_6_2/queryparsersyntax.html
[2013-10-11 21:41:54 -0400] dgarstang2: josephholsten: ah
[2013-10-11 21:42:37 -0400] josephholsten: do we have a bot with a brain around? there should be a search-syntax record
[2013-10-11 21:42:37 -0400] dgarstang2: well, closer...search node "role:bc-cloudera-hadoop\:\:datanode" no error, but no matches either
[2013-10-11 21:43:30 -0400] dgarstang2: still nuttin.... knife-hub search node "roles:bc-cloudera-hadoop\:\:datanode"
[2013-10-11 21:44:19 -0400] josephholsten: does it show up when you knife node show the host?
[2013-10-11 21:45:16 -0400] dgarstang2: josephholsten: yep, this gets me a node... knife-hub search node "name:hdnn01.hub.foo.com"
[2013-10-11 21:45:34 -0400] dgarstang2: oh wait
[2013-10-11 21:45:39 -0400] dgarstang2: user error I think
[2013-10-11 21:45:42 -0400] josephholsten: and it has a role called bc-cloudera-hadoop::datanode?
[2013-10-11 21:45:50 -0400] dgarstang2: i need to search on recipe, not role
[2013-10-11 21:45:58 -0400] josephholsten: I've never seen anyone use colons in a role before
[2013-10-11 21:46:11 -0400] dgarstang2: josephholsten: recipe...
[2013-10-11 21:46:12 -0400] d```: dgarstang2: you may have to double escape
[2013-10-11 21:46:26 -0400] josephholsten: lol
[2013-10-11 21:46:40 -0400] josephholsten: pebkac huh?
[2013-10-11 21:46:43 -0400] d```: ie. roles:bc-cloudera-hadoop\\:\\:datanode
[2013-10-11 21:46:46 -0400] MrBIOS: hey folks, I'm getting "Cannot find a resource for include on debian version 7.1" when I do a chef run
[2013-10-11 21:47:00 -0400] d```: oh wait, that's only for recipes
[2013-10-11 21:47:23 -0400] dgarstang2: ok, eez working
[2013-10-11 21:47:47 -0400] josephholsten: MrBIOS: you are using a literal 'include' in one of your recipes. perhaps you mean 'include_recipe'?
[2013-10-11 21:48:03 -0400] MrBIOS: yep, that seems to be the problem :)
[2013-10-11 21:48:41 -0400] josephholsten: Cannot find a resource for ... usually means you've got some broken ruby code calling a non-existent method
[2013-10-11 21:49:02 -0400] josephholsten: at least I have that problem much more often than actually missing a resource defn
[2013-10-11 21:53:12 -0400] justizin: is there a way in my recipe to empty out a default attr set by another cookbook?
[2013-10-11 21:53:29 -0400] jbz: You could just set it to null
[2013-10-11 21:54:37 -0400] justizin: I'm using the postgres cookbook, which can install the latest versions via pgdg's apt/yum repos, but postgres 9.3 does not support one of the config variables (unix_socket_directory) that is set, and postgres cookbook takes all keys of node['postgresql']['config'] and generates them into a file..
[2013-10-11 21:54:43 -0400] justizin: so I need the key to not exist..
[2013-10-11 21:55:28 -0400] justizin: hm I wonder if I can node['postgresql']['config'].delete("unix_socket_directory")
[2013-10-11 21:55:33 -0400] d```: I'd use chef-rewind and rewrite the template in a wrapper cookbook
[2013-10-11 21:55:40 -0400] dgarstang2: Argh. This gets me a 400 BAD REQUEST from teh chef server .... "search(:node, "recipe:bc-cloudera-hadoop\:\:datanode") do |n|"
[2013-10-11 21:55:45 -0400] justizin: chef-rewind, eh?
[2013-10-11 21:55:51 -0400] d```: or submit a patch to the postgres cookbook
[2013-10-11 21:56:04 -0400] justizin: right, i plan to submit a patch, but today i just want the damned thing to run. ;)
[2013-10-11 21:56:17 -0400] d```: dgarstang2: recipe:bc-cloudera-hadoop\\:\\:datanode
[2013-10-11 21:56:38 -0400] d```: justizin: getting it to work today == chef-rewind + wrapper
[2013-10-11 21:56:57 -0400] dgarstang2: d```: really?
[2013-10-11 21:57:06 -0400] justizin: overriding the template doesn't do much good, either, since i want the template to perform the same, i just want there not to be a value in the hash for this val..
[2013-10-11 21:57:26 -0400] d```: dgarstang2: yes, it's getting interpretted by two things
[2013-10-11 21:57:45 -0400] dgarstang2: d```: crikey
[2013-10-11 21:58:22 -0400] justizin: hm unwind looks like it may do it
[2013-10-11 21:58:41 -0400] justizin: chef-rewind is awesome, how did i not know about this?
[2013-10-11 22:00:25 -0400] justizin: hm, no, default attr is not a resource..
[2013-10-11 22:06:06 -0400] dgarstang2: if I can get a list of nodes with search in a recipe and iterate over them... those values are keys to a hash right? ie |n| for each I can do n['network']['ipaddress'] ?
[2013-10-11 22:07:08 -0400] jbz: dgarstang2: Yep.
[2013-10-11 22:07:23 -0400] dgarstang2: jbz: ok, cuz I'm getting no data but I can see it with ohai
[2013-10-11 22:07:46 -0400] jbz: dgarstang: Can you see the data in the appropriate node records on the server?
[2013-10-11 22:07:56 -0400] dgarstang2: jbz: lemme see
[2013-10-11 22:08:02 -0400] jbz: remember, that data only exists after the nodes in question have successfully converged and saved nodestate
[2013-10-11 22:08:53 -0400] dgarstang2: jbz: ip addres shouldn't change... so should always be there... (except for the first run?)
[2013-10-11 22:09:04 -0400] jbz: right, except for first run
[2013-10-11 22:09:10 -0400] jbz: so are you sure you're getting back node results?
[2013-10-11 22:09:18 -0400] dgarstang2: jbz: well that kinda sucks.
[2013-10-11 22:09:26 -0400] justizin: well, fuck, you for sure can't delete a member of a hash on a node attr ;d
[2013-10-11 22:09:27 -0400] dgarstang2: jbz: doesn't matter. if it's gonna fail on the first run it's unusable.
[2013-10-11 22:10:02 -0400] jbz: well it'll fail looking for itself yes unless there is a prepop value for that node
[2013-10-11 22:10:23 -0400] dgarstang2: jbz: prepop....
[2013-10-11 22:10:32 -0400] jbz: dgarstang2: if you're searching for *other node records* on the first run of the searching node, that should still work
[2013-10-11 22:10:38 -0400] jbz: assuming the other nodes have all checked in
[2013-10-11 22:10:48 -0400] jbz: sorry, prepopulated
[2013-10-11 22:10:49 -0400] dgarstang2: jbz: not necessarily.
[2013-10-11 22:10:56 -0400] dgarstang2: prepopulated how?
[2013-10-11 22:11:17 -0400] jbz: If a node record already exists, e.g., but that's highly unlikely/annoying to do.
[2013-10-11 22:11:59 -0400] dgarstang2: jbz: well bugger. *rethinks*
[2013-10-11 22:12:21 -0400] gkra: crap
[2013-10-11 22:12:27 -0400] gkra: open source chef server just lost its mind
[2013-10-11 22:12:45 -0400] dgarstang2: how do I get a knife search to show all data for all found nodes?
[2013-10-11 22:12:45 -0400] gkra: https://gist.github.com/gkra/fb5b84cef0c0f519aa04
[2013-10-11 22:13:10 -0400] gkra: CPU currently maxed out, is there any way to figure out what's causing it to crash?
[2013-10-11 22:13:17 -0400] dgarstang2: -l
[2013-10-11 22:14:02 -0400] dgarstang2: jbz: looks like it's n['ipaddress'] not n['network']['ipaddress']. easy mistake to make with the json 'format'
[2013-10-11 22:14:14 -0400] jbz: oh sorry
[2013-10-11 22:14:19 -0400] jbz: I should have caught that :-(
[2013-10-11 22:14:27 -0400] jbz: yeah ipaddress is a top-level attrib
[2013-10-11 22:14:27 -0400] dgarstang2: jbz: no worries
[2013-10-11 22:14:39 -0400] dgarstang2: jbz: looked like it was under network... json... blah
[2013-10-11 22:14:44 -0400] jbz: yeah
[2013-10-11 22:15:48 -0400] dgarstang2: well ain't this dumb.
[2013-10-11 22:18:46 -0400] dgarstang2: Using knife search for clusters seems problematic. In the use case of hadoop, the namenode  needs to know about all data nodes. The chef server isn't populated with the data from the data node until  after the data node has run chef one time. If chef is run on the name node to add the data node, unless chef has run once on the data node, the server won't know about it yet. However, the first time that chef runs
[2013-10-11 22:18:49 -0400] dgarstang2: on the data node, it will fail, because the name node (not knowing about it yet) will tell it to fuck off.
[2013-10-11 22:19:50 -0400] dgarstang2: Anyone got a solution for that type of problem?
[2013-10-11 22:20:00 -0400] jbz: uh
[2013-10-11 22:20:32 -0400] jbz: the datanode should converge without failing if it doesn't find a namenode
[2013-10-11 22:20:43 -0400] jbz: allowing it to complete its run and save state
[2013-10-11 22:20:54 -0400] jbz: and then the namenode, when it does come up, should find it eventually
[2013-10-11 22:21:02 -0400] jbz: and things should fix themselves, it just might take a few runs.
[2013-10-11 22:21:08 -0400] dgarstang2: jbz: if the namenode doesn't have reverse DNS for the datanode, when the datanode connects to the namenode, the name node tells it ti get lost.
[2013-10-11 22:21:16 -0400] dgarstang2: jbz: few runs == fail
[2013-10-11 22:21:41 -0400] jbz: dgarstang:  OK, first problem acknowledged, but remember, Chef is loosely coupled
[2013-10-11 22:21:54 -0400] jbz: so you won't be able to rely on things happening sychronously
[2013-10-11 22:22:03 -0400] dgarstang2: :(
[2013-10-11 22:22:34 -0400] jbz: this is a problem that causes a lot of people to spend a lot of time writing add-on leader election tweaks and stuff for chef-managed software :-P
[2013-10-11 22:22:48 -0400] jbz: wait
[2013-10-11 22:22:52 -0400] jbz: so
[2013-10-11 22:22:54 -0400] jbz: if the datanode comes up
[2013-10-11 22:22:57 -0400] jbz: and doesn't find a namenode
[2013-10-11 22:23:23 -0400] jbz: it can still complete its run.  By 'have reverse DNS' do you mean 'on the namenode locally' or 'in DNS as put there by the data node'?
[2013-10-11 22:23:27 -0400] dgarstang2: jbz: it finds a namenode
[2013-10-11 22:23:38 -0400] dgarstang2: jbz: reverse DNS on name node.
[2013-10-11 22:23:51 -0400] jbz: yeah OK so you have interlocking conditions there
[2013-10-11 22:24:14 -0400] jbz: the data node must exist and be in chef for the name node to have placed it in reverse DNS, I assume?
[2013-10-11 22:24:21 -0400] dgarstang2: jbz: not really. if the data node doesn't have a reverse DNS entry, the name node tells it to go away
[2013-10-11 22:24:39 -0400] jbz: I'm still not sure why you can't just let a couple runs go by
[2013-10-11 22:24:45 -0400] jbz: the data node comes up, registers itself with DNS
[2013-10-11 22:24:52 -0400] dgarstang2: jbz: That's bad
[2013-10-11 22:24:57 -0400] jbz: the name node comes up, finds the data node, registers itself with chef
[2013-10-11 22:25:04 -0400] jbz: the data node runs again, finds the name node, connects
[2013-10-11 22:25:10 -0400] dgarstang2: name node is typically up first
[2013-10-11 22:25:22 -0400] jbz: uh
[2013-10-11 22:25:29 -0400] jbz: then I don't understand how you expect this to work
[2013-10-11 22:25:35 -0400] dgarstang2: jbz: ???
[2013-10-11 22:25:38 -0400] jbz: if the namenode is up first, the data node won't be ready, right?
[2013-10-11 22:25:41 -0400] jbz: so how would this ever work?
[2013-10-11 22:25:49 -0400] dgarstang2: you've totally lost me
[2013-10-11 22:26:07 -0400] jbz: By 'reverse DNS' do you mean in a hosts file on the namenode?  Or on a nameserver the namenode can reach?
[2013-10-11 22:26:11 -0400] dgarstang2: works fine when I add the IP of the data node to /etc/hosts on the namenode
[2013-10-11 22:26:23 -0400] dgarstang2: jbz: First one
[2013-10-11 22:26:27 -0400] jbz: why can't it take 2 runs or so to converge?
[2013-10-11 22:26:30 -0400] jbz: as in:
[2013-10-11 22:26:46 -0400] jbz: 1) namenode comes up.  Finds no datanodes.  Happily saves its state to chef.
[2013-10-11 22:27:01 -0400] dgarstang2: jbz: multitple runs are bad. Multiple runs also don't work so well with ... autoscaling
[2013-10-11 22:27:29 -0400] jbz: multiple runs are a problem, in this case, you're going to spend exponential resources to fix, and it probably won't ever work reliably, IMO.
[2013-10-11 22:27:47 -0400] jbz: If you need things that happen across multiple servers to happen reliably every time with back-and-forthing, chef is the wrong tool.
[2013-10-11 22:27:57 -0400] jbz: I mean, if it all has to happen in one chef run.
[2013-10-11 22:28:16 -0400] dgarstang2: jbz: no back and forthing... just need datanode chef to work first time. :)
[2013-10-11 22:28:36 -0400] jbz: ok, you've confused me then, I withdraw.
[2013-10-11 22:28:42 -0400] dgarstang2: puppet can do it on a single run. facts from the O/S are available immediately.
[2013-10-11 22:28:49 -0400] dgarstang2: jbz: thanks anyway
[2013-10-11 22:29:04 -0400] jbz: that's because puppet forces you to prepopulate info about *all* nodes prior to a run on any node.
[2013-10-11 22:29:19 -0400] dgarstang2: jbz: which is rather handy in this situation.
[2013-10-11 22:29:43 -0400] jbz: I'll take the flexibility, thanks :-)
[2013-10-11 22:30:25 -0400] jbz: I'm also unsure that the situation is as you think.  I still haven't figured out the failure from your sequence of events.
[2013-10-11 22:31:21 -0400] dgarstang2: jbz: thought I was pretty clear with it
[2013-10-11 22:31:47 -0400] jbz: I'm not clear why the following doesn't work:
[2013-10-11 22:31:54 -0400] jbz: 1) Namenode comes up.  Converges.  Saves state to chef.
[2013-10-11 22:32:10 -0400] jbz: 2) Data node comes up.  Saves its state to chef.
[2013-10-11 22:32:27 -0400] dgarstang2: jbz: #2 does not happen
[2013-10-11 22:32:56 -0400] jbz: dgarstang2: Right.  I'm saying you can use a NOFAIL to make sure that the node doesnt' fail to converge just because one step doesn't complete.
[2013-10-11 22:33:15 -0400] jbz: So the datanode converges, just not fully configured yet, but saves enough state to show up in namenode searches.
[2013-10-11 22:33:27 -0400] jbz: 3) Name node, next run, sees data node and adds it to reverse DNS.
[2013-10-11 22:33:36 -0400] jbz: 4) Data node runs again, tries, succeeds.
[2013-10-11 22:34:14 -0400] jbz: Or, if you absolutely have to have all this configured prior to run, you put the various config data in a data bag prior to the run and nodes configure themselves based on that info.
[2013-10-11 22:36:54 -0400] dgarstang2: jbz: thanks, checking
[2013-10-11 22:38:06 -0400] jbz: dgarstang2: Sorry, it's technically "ignore_failure" I think
[2013-10-11 22:38:56 -0400] jbz: see here: http://docs.opscode.com/chef/resources.html#common-functionality-for-all-resources
[2013-10-11 23:16:54 -0400] beantown1015: I am just learning Chef and trying to create a repo. It looks like there is integration with Git, but has anyone used any other source control system?
[2013-10-11 23:19:10 -0400] beantown1015: Is chef server somehow git version aware? If I upload nginx, then change, then reload will chef server know this cookbooks history?
[2013-10-11 23:19:20 -0400] siezer: chef isn't scm aware at all
[2013-10-11 23:19:27 -0400] siezer: you can use whatever you want
[2013-10-11 23:20:02 -0400] beantown1015: but it looks like knife has capability to download from opscode, and commit to your git repo directly
[2013-10-11 23:20:14 -0400] siezer: oh, knife cookbook site install
[2013-10-11 23:20:21 -0400] siezer: dont use that
[2013-10-11 23:20:23 -0400] beantown1015: knife cookbook site install apache2
[2013-10-11 23:20:40 -0400] beantown1015: I was afraid too
[2013-10-11 23:21:06 -0400] siezer: that's from The Ancient Days where everyone kept a giant flat chef-repo with the cookbooks directory in the same git repo
[2013-10-11 23:21:13 -0400] beantown1015: so knife just need a certain dir structure and its happy
[2013-10-11 23:21:27 -0400] siezer: now everyone versions cookbooks individually
[2013-10-11 23:21:39 -0400] siezer: either use knife cookbook site download to get the tar artifact
[2013-10-11 23:22:05 -0400] siezer: or use berkshelf to manange them like bundler/pip/carton/maven/whatever
[2013-10-11 23:24:05 -0400] beantown1015: ok @siezer thanks for the advice
[2013-10-11 23:38:08 -0400] force: I want a cookbook to create a file, but I want a cookbook that requires it to define the source via an attribute. Does anybody know any examples of cookbooks that do that?
[2013-10-11 23:39:10 -0400] siezer: "cookbook that requires it"?
[2013-10-11 23:40:10 -0400] force: I have a cookbook that defines how to deploy a service. This service uses SSL certificates. The cookbook deploying the service defines how to write the certificate to the location in a generic way, but another cookbook specific to our site specifies the certificate to be used.
[2013-10-11 23:41:03 -0400] force: So I want the site cookbook to have an attribute that the service cookbook can use. And I'd like it to use Chef directly rather than write a file resource first. I'm aware that Chef has methods for addressing cached files by name, but I don't remember them.
[2013-10-11 23:42:44 -0400] siezer: oh
[2013-10-11 23:42:44 -0400] siezer: sec
[2013-10-11 23:42:46 -0400] force: Chef::FileCache looks like the place?
[2013-10-11 23:44:54 -0400] siezer: don't ever do that
[2013-10-11 23:44:56 -0400] siezer: do this
[2013-10-11 23:44:59 -0400] siezer: https://gist.github.com/someara/0bdbcf0b815ce9d31a66
[2013-10-11 23:47:15 -0400] dgarstang2: Arrgh!
[2013-10-11 23:48:09 -0400] dgarstang2: I tried to do a knife download. My knife.rb has chef_repo_path  ["/tmp/knife-dump"] ... well it STARTED to put stuff in /tmp/knife-dump and then part way through started putting stuff in my local git repo. FFS!!!!
[2013-10-11 23:48:09 -0400] beantown1015: I have a need for orgs but only have the money for open chef hah! Anyone have this problem and how are you handling it?
[2013-10-11 23:48:33 -0400] force: siezer: thanks. That works if I dynamically define the cookbook with a node, too. Perfect!
[2013-10-11 23:48:42 -0400] siezer: np
[2013-10-11 23:49:52 -0400] dgarstang2: knife download /roles.... does nothing. Why?
[2013-10-11 23:52:39 -0400] dgarstang2: knife download --chef-repo-path /tmp/foo /  == error
[2013-10-11 23:53:32 -0400] dgarstang2: it's on the goddamn man page
[2013-10-11 23:54:02 -0400] gingeneer: dgarstang2: knife download roles/
[2013-10-11 23:54:19 -0400] gingeneer: and --chef-repo-path=/tmp/foo/
[2013-10-11 23:54:19 -0400] dgarstang2: gingeneer: I'm trying to specify an alternate location
[2013-10-11 23:55:01 -0400] dgarstang2: knife download / --chef-repo-path=/tmp/foo == /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/knife-essentials-1.5.3/lib/chef_fs/knife.rb:66:in `block in configure_chef': undefined local variable or method `chef_repo_paths' for #<Chef::Knife::Download:0x007fdbdc334b58> (NameError)
[2013-10-11 23:57:03 -0400] dgarstang2: and just about every other variation of knife download gets me the same error

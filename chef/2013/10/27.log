[2013-10-27 00:00:16 -0400] johncolombia: Hi, I have a file named nodes/172.15.0.2.json
[2013-10-27 00:00:53 -0400] johncolombia: it is possible to set a variable inside it in such a way that that variable take the value 172.15.0.2
[2013-10-27 00:00:58 -0400] johncolombia: better say
[2013-10-27 00:01:44 -0400] johncolombia: when I run knife solo cook vagrant@172.15.0.2
[2013-10-27 00:01:58 -0400] johncolombia: the variable is set to that ip
[2013-10-27 00:47:32 -0400] slicknick: any tips/tricks/suggestions for installing packages from source?  i need very specific versions of apache, mysql, php and redis.  the opscode cookbooks on github imply the install method can be source or package, however, its not clear if i need to supply the source code, but more importantly how to specify which version
[2013-10-27 00:54:44 -0400] slicknick: ahhh.. the chef repo server eh?  extract the files there, then move em to the node i want them on.  ya??
[2013-10-27 00:55:47 -0400] teukka: slicknick: my recommendation is to build them to distro's native packages in a build server, and then install from private package (e.g. apt) repo
[2013-10-27 00:56:29 -0400] teukka: so you don't need to install build tools to prod servers
[2013-10-27 00:56:38 -0400] slicknick: cool, thanks.
[2013-10-27 00:56:38 -0400] teukka: and faster to test on vagrant etc
[2013-10-27 00:56:59 -0400] teukka: fpm might be your friend
[2013-10-27 00:57:11 -0400] gchristensen: fpm++
[2013-10-27 00:57:51 -0400] slicknick: right, right ... im using the source tarballs for each application -- the centos repos dont always have the exact version we need
[2013-10-27 00:58:25 -0400] slicknick: appreciate the replies
[2013-10-27 01:00:38 -0400] gchristensen: slicknick: building your own packages isn't difficult ... and totally worth it.
[2013-10-27 01:09:53 -0400] slicknick: gchristensen: yeah for sure. not concerned with builiding them -- its more about getting the builds on the nodes.  but i do have another question
[2013-10-27 01:10:02 -0400] gchristensen: slicknick: build them, set up a custom yum repo.
[2013-10-27 01:11:17 -0400] slicknick: ok, so on a build server i run configure, make .. do i run make install too ?
[2013-10-27 01:12:27 -0400] teukka: yes, but with DESTINATION (or something) env var pointing to a specific directory which you then package with fpm
[2013-10-27 01:12:30 -0400] slicknick: im not sure how to get all the files the application installs and then uses (various directions, modles, etc) wrapped up and put on the chef repo
[2013-10-27 01:12:35 -0400] teukka: the fpm wiki has examples
[2013-10-27 01:14:04 -0400] slicknick: teukka: would you be kind enough to shoot me the url
[2013-10-27 01:14:12 -0400] teukka: then you upload the rpm to your yum repo. which is configured to nodes with your own cookbook/recipe
[2013-10-27 01:14:32 -0400] teukka: slicknick: https://github.com/jordansissel/fpm
[2013-10-27 01:14:49 -0400] teukka: and https://github.com/jordansissel/fpm/wiki
[2013-10-27 01:14:54 -0400] slicknick: cool, thanks
[2013-10-27 01:16:39 -0400] teukka: DESTDIR is the standard env var that most wellbehaving software supports: https://github.com/jordansissel/fpm/wiki/PackageMakeInstall
[2013-10-27 01:17:05 -0400] slicknick: crazy, i just clicked that link myself heh
[2013-10-27 01:18:22 -0400] teukka: other option is to read and implement all the distro specific packaging policies
[2013-10-27 01:18:24 -0400] teukka: :P
[2013-10-27 01:19:04 -0400] slicknick: thankfully only working with rpm's here ;)
[2013-10-27 01:23:02 -0400] slicknick: bbiab with more to discuss
[2013-10-27 01:58:42 -0400] judd7: ohai chefs!
[2013-10-27 01:59:53 -0400] judd7: I'm utterly confused about: not_if "/usr/bin/curl -s http://127.0.0.1:80/"  it runs the execute resource even though port 80 is listening on localhost.
[2013-10-27 02:09:37 -0400] judd7: feh. nm
[2013-10-27 11:28:17 -0400] mc_fail: hi guys, i have a data bag that looks like a http://pastebin.com/7PKvPAi4
[2013-10-27 11:28:44 -0400] mc_fail: how i can get some values from array in recipie/
[2013-10-27 11:29:15 -0400] mc_fail: for example, if i want create config for each item of ipsec array
[2013-10-27 11:30:19 -0400] mc_fail: i'm trying using methods from http://docs.opscode.com/dsl_recipe_method_data_bag.html but i can't understand any
[2013-10-27 11:30:30 -0400] mc_fail: what is data_bag_item = Chef::Cookbook.get_ssl_certificate_data_bag?
[2013-10-27 11:30:53 -0400] mc_fail: and what means get_ssl_certificate_data_bag is it some chef specific method?
[2013-10-27 11:31:10 -0400] mc_fail: where i can find a decription about this methods?
[2013-10-27 11:32:19 -0400] mc_fail: and how i can execute something for each array item?
[2013-10-27 15:12:48 -0400] chgravier: Hello, my "kichen converge" fails ( Data bag path '/var/chef/data_bags' is invalid : this is not my databag path !), but it suceeds when I run Vagrant up. Is it possible that kitchen doesn't use the Vagrantfile ?
[2013-10-27 15:26:39 -0400] dmdeklerk: chgravier: I believe test-kitchen creates its own Vagrantfile. Regarding data_bags and test-kitchen checkout this ticket that implements data_bags in test-kitchen https://github.com/opscode/test-kitchen/issues/129
[2013-10-27 15:27:58 -0400] chgravier: yep thanks ! I read this one, the problem is that the databag is expected to be in a subdir of the repo, which not very convenient
[2013-10-27 15:28:09 -0400] chgravier: I tried the ticket linked in #129 : https://github.com/opscode/test-kitchen/pull/161
[2013-10-27 15:28:31 -0400] chgravier: unfortunately, i think this applies for the suites part, but not for the provisioning phase
[2013-10-27 15:35:11 -0400] dmdeklerk: chgravier: I'm not sure about this but '/var/chef/data_bags' sounds like its referring to your workstation. What happens if you create that directory locally and then run kitchen converge? Plus I really do think the only way to have a data_bag in a test-kitchen run is to set the 'data_bags_path' on the suites stanza in .kitchen.yml.
[2013-10-27 15:36:28 -0400] chgravier: dmdeklerk: it does refers to a folder on my machine. I tried to symlink to the actual databag without success. I am going to try to put a testing databag as depicted in issue #129 you previsouly linked
[2013-10-27 15:38:23 -0400] dmdeklerk: chgravier: Thinking about it i'm pretty sure you MUST use the 'data_bags_path' entry in kitchen.yml
[2013-10-27 15:40:42 -0400] mc_fail: does chef have some provider for managing systemd services?
[2013-10-27 15:46:33 -0400] chgravier: dmdeklerk: When using "data_bags_path" (see my .kitchen.yml : https://gist.github.com/cgravier/3d3636ac18c7222628a8), it however doesn't overwrite the databag path in the Vagrant file generate by kitchen (running "kitchen test" still gives : "Data bag path '/var/chef/data_bags' is invalid").
[2013-10-27 15:47:25 -0400] chgravier: I don't know if it is important but I have the test in a cookbook in a subdir. I followed http://jtimberman.housepub.org/blog/2013/03/19/anatomy-of-a-test-kitchen-1-dot-0-cookbook-part-2/ (successfuly on cookbooks which are not using databags, for instance : https://github.com/cgravier/selfsigned_certificate/)
[2013-10-27 15:56:01 -0400] dmdeklerk: chgravier: i dont see what is wrong with your setup, i'm far from an expert though, this https://github.com/opscode/test-kitchen/pull/5 seems to indicate a specific place for your data_bags folder. Otherwise i dont know.
[2013-10-27 15:59:10 -0400] mc_fail: i'm trying execute a knife bootstrap for one of my servers, but it just return Bootstrapping Chef on 192.168.128.153 and nothing happens
[2013-10-27 15:59:19 -0400] mc_fail: why it happens?
[2013-10-27 16:02:09 -0400] dmdeklerk: mc_fail: is your log level set to debug?
[2013-10-27 16:07:30 -0400] chgravier: dmdeklerk: well, it doesn't work either. Even if I copy my databags folder to /var/chef/data_bags and checking rights. I guess I'll post an issue on kitchen-test repo
[2013-10-27 16:07:35 -0400] chgravier: thanks anyway !
[2013-10-27 16:08:05 -0400] dmdeklerk: or ask here tomorrow, now its really quite
[2013-10-27 16:08:25 -0400] dmdeklerk: *quiet*
[2013-10-27 16:09:54 -0400] mc_fail: dmdeklerk i don't see any knife arguments for debug
[2013-10-27 16:10:15 -0400] mc_fail: just -V but nothing changes
[2013-10-27 16:11:58 -0400] dmdeklerk: try -VV
[2013-10-27 16:15:48 -0400] mc_fail: ooh, it was wrong password
[2013-10-27 16:15:56 -0400] mc_fail: dmdeklerk thank you for -VV
[2013-10-27 16:16:12 -0400] dmdeklerk: your Very Vellcome ;)
[2013-10-27 16:50:37 -0400] stormerider: are there any good guides for converting a role into a recipe?
[2013-10-27 16:52:56 -0400] stormerider: im not quite sure how to handle override_attributes in a recipe vs default attributes
[2013-10-27 16:58:17 -0400] stormerider: is it as simple as changing from default["foo"]["bar"] = "blah" to override["foo"]["bar"] = "zee" ?
[2013-10-27 17:03:09 -0400] Guest74740: hello
[2013-10-27 17:03:50 -0400] Guest74740: is this the place to chat. cant see anything
[2013-10-27 17:04:31 -0400] mc_fail: how i can chec if data bag exist?
[2013-10-27 17:04:34 -0400] mc_fail: *check
[2013-10-27 17:05:28 -0400] dmdeklerk: Guest74740: It's sunday, so really quiet.
[2013-10-27 17:05:29 -0400] mc_fail: i'm trying to do if data_bag_item("srv", "#{node['hostname']}") but if data bag doesn't exist, chef-client stops with fatal error
[2013-10-27 17:05:34 -0400] gchristensen: mc_fail: https://github.com/opscode-cookbooks/nagios/blob/master/libraries/data_bag_helper.rb
[2013-10-27 17:05:40 -0400] ptwobrussell: hey folks - i have a vagrant box that uses chef solo to get some things up and running. as part of the setup, there's an .erb file that's a template that the runit service instantiates to define how to start a service that can be controlled with "service  start/stop/etc." what i'd like to be able to do is figure out where the options in that .erb template are being cached so that i can modify it after a vm has been launched. can't find it anywhere
[2013-10-27 17:05:41 -0400] ptwobrussell: so far. in other words, where does chef write out the info in those templates so i can figure out where to go change it?
[2013-10-27 17:05:54 -0400] dmdeklerk: gchristensen: hi
[2013-10-27 17:05:59 -0400] gchristensen: hi dmdeklerk
[2013-10-27 17:06:29 -0400] dmdeklerk: gchristensen: did you get my email?
[2013-10-27 17:07:33 -0400] gchristensen: dmdeklerk: I did - back in 15
[2013-10-27 17:07:51 -0400] Guest74740: Have being tring to run graphite cookbook for a number of days but keep getting exceptions. Has anyone sucessfully done this?
[2013-10-27 17:08:23 -0400] dmdeklerk: gchristensen: i'm about to have dinner, back in 30 or so ;)
[2013-10-27 17:32:54 -0400] xargs: Anyone know of a cpanel install with a chef cookbook?
[2013-10-27 17:40:03 -0400] jcrum: Just installed Chef-Server (latest version) on centos 6. I can download all user, roles, data bags, etc... that I have created with the exception of the environments. I get No such file or directory - /var/chef/environments. It doesn't look the other data types (roles, data bags have their own folders; still get the error after manually creating the folder and bouncing the server. Any one seen this before?
[2013-10-27 17:42:58 -0400] dmdeklerk: gchristensen: i'm back
[2013-10-27 17:58:38 -0400] thun_: Hi guys I am pretty new to Chef. I am trying to setup a Percona db using percona-install. It all went well and now I am trying to provision the db (users, defaults) with the database cookbook that requires mysql. Does anyone know of good docs on setting up Percona?
[2013-10-27 17:59:07 -0400] stormerider: thun_: istr there's a interaction problem between those two cookbooks
[2013-10-27 17:59:55 -0400] thun_: How do most people deal with? Just create manual scripts and call execute from Chef for users and db import?
[2013-10-27 18:01:13 -0400] stormerider: iirc, there's a thread on the mailing list about it
[2013-10-27 18:03:08 -0400] thun_: Can find anything
[2013-10-27 18:03:08 -0400] thun_: *Cant
[2013-10-27 18:03:32 -0400] thun_: I have tons of scripts created already, is it bad form to just call my scripts vs using the database cookbook?
[2013-10-27 18:18:55 -0400] dmdeklerk: thun_: the database cookbook allows you to create a database and user through data_bag data only. i believe to seed your db you simply call execute resource, the mysql::server recipe does that too
[2013-10-27 18:20:56 -0400] chip-: Just because there's a dependency on the mysql cookbook, doesn't mean any recipes get run. Just means it's in memory and the attributes exist.
[2013-10-27 18:21:31 -0400] chip-: So using database with the mysql_* resources should probably still work against percona, since you hit percona via the mysql gem anyway.
[2013-10-27 18:21:49 -0400] chip-: the mysql::ruby recipe has logic in there for percona compatibility.
[2013-10-27 19:12:48 -0400] thun_: Ugg got D/C Do I just remove the dependency check? Where do I start debugging this? http://pastebin.com/NuigMWat
[2013-10-27 19:12:51 -0400] Cope: thun_: it's good to be pragmatic; if you have reliable scripts that do what you need, a great first step is to run them with Chef.
[2013-10-27 19:13:13 -0400] thun_: Yah I agree
[2013-10-27 19:15:04 -0400] Cope: thun_: 412 precondition failed typically means: can't find the cookbook you asked for
[2013-10-27 19:15:45 -0400] Cope: either because you specified a version that isn't on teh chef server, or because you typo'd it
[2013-10-27 19:15:52 -0400] Cope: or just never uploaded it
[2013-10-27 19:19:08 -0400] thun_: Cope: that was it! Ty
[2013-10-27 19:19:16 -0400] thun_: not uploaded
[2013-10-27 20:06:55 -0400] thun_: Is template the best way to add a static file to Chef server? Or is there some sort of special static resouce?
[2013-10-27 20:09:25 -0400] jcrum: thun_: take a look at the file resource (http://docs.opscode.com/resource_file.html)
[2013-10-27 20:10:07 -0400] chip-: thun_: cookbook_file
[2013-10-27 20:10:29 -0400] thun_: ty guys perfect
[2013-10-27 20:11:24 -0400] jcrum: sorry grabbed the wrong link. chip-: has the write one.
[2013-10-27 21:02:03 -0400] chgravier: Is there someone using knife openstack and VMs without a public IP ? When using "--private-network" I receive "ERROR: No IP address available for bootstrapping". I have already reported this months ago (https://tickets.opscode.com/browse/KNIFE-277). This makes the chef server unusable. Surely I'm not alone using private VMs on a private lcoud. It makes me think that there must be a workaround or another approach to instanciate
[2013-10-27 21:02:04 -0400] chgravier: "private" VMs ?

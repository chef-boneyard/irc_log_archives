[2013-10-31 00:00:18 -0400] dgarstang: coderanger: getting a nasty warning from pychef
[2013-10-31 00:00:40 -0400] dgarstang: coderanger: http://pastebin.com/SWExPUdQ
[2013-10-31 00:01:30 -0400] coderanger: dgarstang: Your eggs are busted
[2013-10-31 00:01:40 -0400] coderanger: Not related to pychef, as you can see in the error
[2013-10-31 00:01:56 -0400] coderanger: importing pkg_resources triggers a consistency check on eggs
[2013-10-31 00:02:22 -0400] coderanger: In other news, stop using eggs
[2013-10-31 00:02:25 -0400] dgarstang: coderanger: funny tho how it only started after I did the pychef import
[2013-10-31 00:02:35 -0400] dgarstang: coderanger: normally I don't
[2013-10-31 00:02:37 -0400] coderanger: dgarstang: Yes, pychef imports pkg_resources
[2013-10-31 00:04:21 -0400] dgarstang: funny... i can't call hasattr on a Role object?
[2013-10-31 00:06:21 -0400] dgarstang: oh god. ineed sleep
[2013-10-31 00:10:11 -0400] coderanger: dgarstang: Sure you can
[2013-10-31 00:11:31 -0400] robawt: day two
[2013-10-31 00:11:38 -0400] robawt: coderanger is still awake at all hours
[2013-10-31 00:11:48 -0400] coderanger: robawt: Its only 5PM here :P
[2013-10-31 00:13:01 -0400] algofoogle: hi all.
[2013-10-31 00:13:37 -0400] algofoogle: I'm using Hosted Chef. while working to train my staff on using Chef, I am regularly rolling back a VM to a point before I bootstrapped it.
[2013-10-31 00:14:16 -0400] algofoogle: is there an easy way to RE-run a "knife bootstrap" against that node, giving it the same name each time, WITHOUT having fail while trying to re-create the "Client" identity on the Hosted Chef server?
[2013-10-31 00:14:46 -0400] someara: you could snapshot just after bootstrap
[2013-10-31 00:14:55 -0400] someara: and it would not have to re-register
[2013-10-31 00:15:02 -0400] algofoogle: what I've had to do is leave the Node entry in place (since it contains data about the VM that i'm bootstrapping, and I want to keep that data), and do "knife client delete..." each time.
[2013-10-31 00:15:15 -0400] coderanger: algofoogle: This isn't easy to do, sorry
[2013-10-31 00:15:22 -0400] algofoogle: someara, yeah, but I want to repeatedly demonstrate the bootstrap itself :)
[2013-10-31 00:15:24 -0400] coderanger: algofoogle: Just copy off the client.pem and put it back
[2013-10-31 00:15:40 -0400] coderanger: algofoogle: Or just use a different node name each time
[2013-10-31 00:15:41 -0400] someara: you can do that
[2013-10-31 00:15:49 -0400] coderanger: knife bootstrap -N
[2013-10-31 00:16:15 -0400] algofoogle: i already do "knife bootstrap -N" to effectively 'select' Node details which are pre-configured in the Hosted Chef account
[2013-10-31 00:16:54 -0400] algofoogle: otherwise it would just be a blank node, created from scratch, etach time.
[2013-10-31 00:17:58 -0400] coderanger: algofoogle: Bootstrapping against an already created node object in hosted chef will almost always not be what you want
[2013-10-31 00:18:20 -0400] someara: why are you preconfiguring node details?
[2013-10-31 00:18:22 -0400] coderanger: due to how hosted chef does ACLs, for it to work correctly, the relevant client has to be the one to create the node
[2013-10-31 00:18:32 -0400] coderanger: (or you need to fix the ACLs yourself)
[2013-10-31 00:18:45 -0400] algofoogle: basically I just want to have clones for development, and each clone should have identical node details all coming from the same base Node entry in Hosted Chef
[2013-10-31 00:19:30 -0400] algofoogle: internally, on each dev's workstation, these VMs will be identical, even down to (host-only) internal IP addresses
[2013-10-31 00:20:00 -0400] algofoogle: whether they bootstrap a brand new VM from the template Node, or just update an existing bootstrapped node by running chef-client, the result should be the same.
[2013-10-31 00:20:49 -0400] algofoogle: if I have to create a brand new node for each clone, this will defeat the purpose of having a repeatable system
[2013-10-31 00:21:16 -0400] dgarstang: coderanger: nuthin about clients in api. Does a node delete, also delete the client?
[2013-10-31 00:21:21 -0400] someara: your nodes should be ephemeral anyway all the data you need to configure the system should come from the run list
[2013-10-31 00:21:46 -0400] algofoogle: ...in which case I'd have to distribute an actual pre-bootstrapped copy of the VM to each dev.
[2013-10-31 00:21:53 -0400] dgarstang: someara: you talkin' to me?
[2013-10-31 00:22:07 -0400] coderanger: dgarstang: https://github.com/coderanger/pychef/blob/master/chef/client.py#L4
[2013-10-31 00:22:31 -0400] algofoogle: someara, that's fine, but i intended to have encrypted data bags for things like credentials to access an external DB server, etc.
[2013-10-31 00:22:44 -0400] coderanger: algofoogle: Those aren't related to the node
[2013-10-31 00:22:49 -0400] someara: right
[2013-10-31 00:22:55 -0400] algofoogle: dgarstang: I don't think a "knife node delete" will delete the Client record. you can separately do "knife client delete"
[2013-10-31 00:23:06 -0400] dgarstang: algofoogle: right
[2013-10-31 00:23:17 -0400] dgarstang: algofoogle: talking about if pychef does it for me tho. Seems like no.
[2013-10-31 00:23:27 -0400] someara: there's a shortcut to do them both, but I cant remember what it is
[2013-10-31 00:23:28 -0400] algofoogle: ah, ok
[2013-10-31 00:23:37 -0400] coderanger: dgarstang: No, node delete in pychef doesn't do a client delete
[2013-10-31 00:23:42 -0400] dgarstang: k
[2013-10-31 00:25:08 -0400] algofoogle: coderanger: ok, i may be going about this the wrong way. i was just hoping to leverage the unique Node attributes, etc, such that a single Node entry could serve as a cookie-cutter template for multiple identical (or at least transient) VMs
[2013-10-31 00:25:20 -0400] coderanger: algofoogle: That isn't what nodes are
[2013-10-31 00:25:26 -0400] coderanger: That _is_ what roles are :)
[2013-10-31 00:26:05 -0400] algofoogle: i suppose i'm trying to find a strategy that makes sense, cost-wise, for development.
[2013-10-31 00:26:20 -0400] coderanger: Take whatever settings you have on your template node and put them in a role
[2013-10-31 00:26:24 -0400] algofoogle: in our production system, we may need to manage, say, 20 machines. that comes at a certain monthly cost.
[2013-10-31 00:26:25 -0400] coderanger: should take all of 30s
[2013-10-31 00:26:36 -0400] magoo: how do i search nodes for a recipe? ie. recipe:cookbook::recipe isn't going to work
[2013-10-31 00:26:45 -0400] magoo: is there an escape?
[2013-10-31 00:26:47 -0400] algofoogle: but if we have to create a node for every single DEVELOPMENT VM, which may be a standard set of 5 VMs per every DEVELOPER, then we're looking at 100 NON-production systems.
[2013-10-31 00:27:09 -0400] coderanger: algofoogle: You just mean re: hosted-chef pricing?
[2013-10-31 00:27:36 -0400] coderanger: algofoogle: The pricing is basically just relative to the number of API requests you are making, with # of nodes as a coarse measurement of that
[2013-10-31 00:27:57 -0400] coderanger: So yes, if you have 100 devs making API hits against hosted chef, that incurs substatial load, and therefore cost
[2013-10-31 00:28:10 -0400] coderanger: trying to hack around the pricing model just makes more work for ssd7 :P
[2013-10-31 00:28:16 -0400] algofoogle: coderanger: basically, yeah. i mean, what I intend to do makes sense to me in other cases in my head -- and maybe not outside that -- but the notion of having to arbitrarily create new nodes all over the place seems silly.
[2013-10-31 00:28:22 -0400] hugespoon: algofoogle: you can always just setup an opensource chef server for testing?
[2013-10-31 00:28:39 -0400] coderanger: Or use chef-solo for dev boxes since its all on a single VM you don't need search
[2013-10-31 00:28:45 -0400] coderanger: (thats what I do anyway)
[2013-10-31 00:28:56 -0400] algofoogle: yeah, i may have to consider using chef-solo, opensource chef, etc.
[2013-10-31 00:29:16 -0400] algofoogle: i initially didn't see what I was trying to do as hacking around the pricing model, but rather eliminating waste. i can understand your point, tho
[2013-10-31 00:29:44 -0400] coderanger: algofoogle: The extra disk storage for node objects isn't what costs Opscode money to a useful degree :)
[2013-10-31 00:30:08 -0400] coderanger: Really the pricing model should be 95th percentile API rate, but thats hard to explain to people
[2013-10-31 00:30:18 -0400] hugespoon: coderanger: i always figured it was hardware + support
[2013-10-31 00:30:31 -0400] hugespoon: i.e. most of the price coming from support
[2013-10-31 00:30:54 -0400] coderanger: hugespoon: its server load and support, load is relative API calls and support is relative to number of employees asking questions
[2013-10-31 00:31:09 -0400] coderanger: I mean this is just common sense stuff :)
[2013-10-31 00:31:23 -0400] coderanger: The 1k of storage for the node isn't related to either
[2013-10-31 00:31:23 -0400] magoo: doh, i should have just tried my first instinct - escape with \
[2013-10-31 00:31:31 -0400] hugespoon: coderanger: right
[2013-10-31 00:32:14 -0400] hugespoon: now to attempt to remember how to configure hadoop!
[2013-10-31 00:32:48 -0400] algofoogle: ok, no worries, i understand guys. thanks for your help.
[2013-10-31 00:33:08 -0400] coderanger: algofoogle: Also remember that vagrant lets you put node data in the vagrantfile :)
[2013-10-31 00:33:14 -0400] coderanger: thats handy for dev-vm overrides
[2013-10-31 00:33:50 -0400] algofoogle: coderanger: oh ok, i will look into that. thanks :)
[2013-10-31 01:39:18 -0400] coderanger: Ruby people (ping miah), is making an adaptive mixin a terrible idea? http://hastebin.com/yemoqabeqa.rb
[2013-10-31 01:47:12 -0400] daos: any reason why when chef-client tries to write some of my templates i get a Net::HTTPServerException: 403 "Forbidden" and when I re-run it -right after- it works?
[2013-10-31 01:47:20 -0400] daos: it seems almost reandom
[2013-10-31 01:47:26 -0400] daos: *random
[2013-10-31 01:47:35 -0400] coderanger: daos: Are your chef runs really long?
[2013-10-31 01:47:48 -0400] coderanger: Also are you using hosted chef?
[2013-10-31 01:48:05 -0400] daos: coderanger: pretty long... >50min usually
[2013-10-31 01:48:10 -0400] daos: and no--i'm hosting myself
[2013-10-31 01:48:25 -0400] daos: well, hosted chef just not by opscode :)
[2013-10-31 01:48:27 -0400] daos: sorry if that's unclear
[2013-10-31 01:48:33 -0400] coderanger: Hmm, I don't know if bookshelf obeys timeouts, ssd7_?
[2013-10-31 01:49:05 -0400] coderanger: So the issue with hosted is usually that it stores cookbook files on S3 and uses timed-signed URLs to give access
[2013-10-31 01:49:21 -0400] pmde: doas: i get that when a step runs a long time - i work around it by putting all my file/template,. etc. resources at the start of the recipe, before anything that could potentially take a long time to run
[2013-10-31 01:49:23 -0400] coderanger: FOSS chef uses a thing called bookshelf which is a local S3 simulator
[2013-10-31 01:50:18 -0400] pmde: related: i also sometimes get Net::HTTPServerException: 413 "Request Entity Too  Large", for which I add to /etc/chef/client.rb:Ohai::Config[:disabled_plugins] = ["passwd"]
[2013-10-31 01:53:12 -0400] daos: interesting
[2013-10-31 01:53:24 -0400] daos: pmde: i'll look into that--thanks for the tip
[2013-10-31 01:53:47 -0400] pmde: doas: yw
[2013-10-31 01:54:07 -0400] coderanger: Out of curiosity what takes so long?
[2013-10-31 01:54:14 -0400] daos: coderanger: is there a way to disable the time-signed urls?
[2013-10-31 01:54:22 -0400] coderanger: daos: Unlikely
[2013-10-31 01:54:34 -0400] daos: ok so my best bet is probably to follow pmde's suggestion
[2013-10-31 01:54:39 -0400] coderanger: but sfalcon would be the one to ask
[2013-10-31 01:54:42 -0400] daos: cool
[2013-10-31 01:54:48 -0400] pmde: coderanger: for me it is installing database
[2013-10-31 01:55:29 -0400] coderanger: It is like oracle or something?
[2013-10-31 01:55:44 -0400] pmde: yep
[2013-10-31 01:55:49 -0400] pmde: exactly
[2013-10-31 01:55:52 -0400] coderanger: lamesauce
[2013-10-31 01:55:58 -0400] daos: coderanger: it usually errors out in 2 places specifically. 1) after i install a ton of cpan modules, and then try to write a script in /etc/profile.d from a template (withihn the same recipe) and 2) cloning a C repo and compiling it
[2013-10-31 01:55:58 -0400] coderanger: Guess not something you can fix though :)
[2013-10-31 01:56:23 -0400] coderanger: daos: If it is this issue, it is only related to wall time elapsed since the chef run started
[2013-10-31 01:56:38 -0400] daos: crap
[2013-10-31 01:56:54 -0400] daos: so my best bet is to write all the templates and files /first/
[2013-10-31 01:57:00 -0400] daos: like before all of my other recipes/cookbooks even
[2013-10-31 01:57:04 -0400] coderanger: Or just deal with the issue
[2013-10-31 01:57:15 -0400] daos: the slowness of cpan is kind of out of my hands
[2013-10-31 01:57:27 -0400] daos: i've experimented with super beefy ec2 instances it still takes forever
[2013-10-31 01:57:28 -0400] coderanger: and if chef-client fails with that error, run it again
[2013-10-31 01:57:42 -0400] coderanger: eventual consistency ftl >_<
[2013-10-31 01:57:45 -0400] daos: it becomes a hassle when i'm bootstrapping machines
[2013-10-31 01:57:59 -0400] daos: i don't want to have to manually run anything when deploying chef nodes :)
[2013-10-31 01:58:02 -0400] daos: (first world problems)
[2013-10-31 01:58:21 -0400] coderanger: Yeah, no great solution that I know of, sorry :(
[2013-10-31 01:58:45 -0400] daos: no problem man i appreciate the help. at least i have more of an idea _why_ it's happening
[2013-10-31 01:58:56 -0400] daos: way better than chasing down a bug in my code that may or may not exist
[2013-10-31 01:59:04 -0400] someara: trying to get serverspec working with test-kitchen, but failing.. anyone have any clues here? https://gist.github.com/someara/4b06307a4d914a893613
[2013-10-31 01:59:04 -0400] pmde: putting all the long running stuff last works fine for me
[2013-10-31 01:59:21 -0400] coderanger: daos: It could also be something totally different, just shooting from the hip :)
[2013-10-31 02:00:01 -0400] daos: haha of course :)
[2013-10-31 02:00:47 -0400] daos: pmde: i'm going to try that for sure
[2013-10-31 02:00:53 -0400] daos: will need to see about re-factoring a bit
[2013-10-31 02:59:09 -0400] thun_: https://github.com/albertsj1/chef-ebs  <--- How do I set attributes they request on a recipe or a role?
[2013-10-31 03:15:33 -0400] thun_: default[:ebs][:creds][:encrypted] = false
[2013-10-31 03:15:40 -0400] thun_: That is giving me the problem
[2013-10-31 03:16:16 -0400] thun_: You must supply a name when declaring a default resource
[2013-10-31 03:16:31 -0400] thun_: CallCalling that from a defalut.rb in a recipe
[2013-10-31 03:17:10 -0400] douglaswth: what kind of file is that in? is it under attributes/?
[2013-10-31 03:23:50 -0400] thun_: I just moved it to attributes. The real problem is this data
[2013-10-31 03:25:07 -0400] thun_: {  :ebs => { :raids => {  '/dev/md0' => {   :num_disks => 4,        :disk_size => 10,  :piops => 2000,  :raid_level =>10,   :fstype => 'xfs',  :mount_point => '/data',  :uselvm => true,
[2013-10-31 03:25:08 -0400] thun_:       } }  } }
[2013-10-31 03:25:20 -0400] thun_: How do I set that in an attribute file
[2013-10-31 03:25:45 -0400] thun_: node.default :ebs :raids ??
[2013-10-31 04:01:21 -0400] thun_: default.node[:ebs][:creds][:encrypted] = false  Can I do this from a recipe?
[2013-10-31 04:05:16 -0400] douglaswth: thun_: you want to do node.default instead, but why are you using default rather than say override or set?
[2013-10-31 04:06:24 -0400] thun_: Very new to Chef. I want to use an attribute file like described here: https://github.com/albertsj1/chef-ebs
[2013-10-31 04:06:45 -0400] thun_: But had no luck. Moved to recipe. I would much rather use a normal attribute file but it was not being set.
[2013-10-31 04:07:48 -0400] douglaswth: what isn't working in the attributes file then?
[2013-10-31 04:09:10 -0400] thun_: First thing... what cookbook should I set the attributes file in. Can I have a cook my-server and set the attributes folder for it?
[2013-10-31 04:09:22 -0400] thun_: Or do I have to modify the attributes in the ebs cookbook
[2013-10-31 04:12:10 -0400] thun_: So they have the array on that page { ebs: => blah blah blah } Do I just drop the entire array in the attributes/default.rb folder in the cookbook I am calling ebs from?
[2013-10-31 04:59:00 -0400] DrMeta: trying to put my .emacs.d git repo in my home directory
[2013-10-31 04:59:01 -0400] DrMeta: code:
[2013-10-31 04:59:08 -0400] DrMeta: git "/Users/tylercloke/" do
[2013-10-31 04:59:09 -0400] DrMeta:   repository "https://github.com/tylercloke/.emacs.d.git"
[2013-10-31 04:59:09 -0400] DrMeta:   reference "master"
[2013-10-31 04:59:09 -0400] DrMeta:   user "tyler"
[2013-10-31 04:59:10 -0400] DrMeta:   action :sync
[2013-10-31 04:59:10 -0400] DrMeta: end
[2013-10-31 04:59:12 -0400] DrMeta: error:
[2013-10-31 04:59:25 -0400] DrMeta: Chef::Exceptions::MissingParentDirectory
[2013-10-31 04:59:26 -0400] DrMeta: ----------------------------------------
[2013-10-31 04:59:26 -0400] DrMeta: Cannot clone git[/Users/tylercloke/] to /Users/tylercloke/, the enclosing directory /Users does not exist
[2013-10-31 04:59:35 -0400] DrMeta: but /Users/tylercloke definitely exists
[2013-10-31 05:03:08 -0400] DrMeta: nvm
[2013-10-31 05:06:21 -0400] algofoogle: hi guys. I'm looking at knife.rb, and the knife[:secret_file] parameter.
[2013-10-31 05:06:42 -0400] algofoogle: it appears that if you specify this, you can't stop "knife data bag create ..." from encrypting everything
[2013-10-31 05:06:46 -0400] algofoogle: is that right??
[2013-10-31 05:08:00 -0400] algofoogle: i was hoping for a way to specify the secret file, such that it would get deployed during a bootstrap, but it appears it not only does that but also forces every knife data bag operation to think it's encrypting/decrypting
[2013-10-31 05:11:23 -0400] algofoogle: i'm thinking of doing something smelly in knife.rb like: knife[:secret_file] = "#{current_dir}/encrypted_data_bag_secret" unless ENV['INSECURE']
[2013-10-31 05:12:09 -0400] algofoogle: or maybe the opposite: knife[:secret_file] = "#{current_dir}/encrypted_data_bag_secret" if ENV['ENCRYPTED_DATA_BAG']
[2013-10-31 05:12:25 -0400] algofoogle: ....that way I can control when knife[:secret_file] is used.
[2013-10-31 05:49:27 -0400] jaykatta: Hi, need help
[2013-10-31 05:49:29 -0400] jaykatta: chef-node.ibm.com  chef-node.ibm.com   * execute[key_exchange] action run chef-node.ibm.com  chef-node.ibm.com     - execute /home/jaykatta/demo/keyexchange.exp 192.168.122.208 root root1234 192.168.123.1 root root1234 chef-node.ibm.com  chef-node.ibm.com Chef Client finished, 2 resources updated
[2013-10-31 05:49:56 -0400] jaykatta: here when I bootstrap, I would like to suppress the output of execute statement
[2013-10-31 05:50:26 -0400] jaykatta: may I know how to disable verbose when I knife bootstrap
[2013-10-31 06:10:26 -0400] jaykatta: how to supress the output of knife bootstarp command
[2013-10-31 06:10:53 -0400] jaykatta: chef-node.ibm.com     - execute touch /home/jaykatta/demo.txt chef-node.ibm.com  chef-node.ibm.com   * execute[key_exchange] action run chef-node.ibm.com  chef-node.ibm.com     - execute /home/jaykatta/demo/keyexchange.exp 192.168.122.208 root root1234 192.168.123.1 root root1234 chef-node.ibm.com  chef-node.ibm.com Chef Client finished, 2 resources updated , Here I do not wanna print execute statement on screen while running knife b
[2013-10-31 07:29:31 -0400] v-yarotsky: Hi guys. Given I have many similar applications for which environment is prepared by chef, how do I preserve my sanity using Chef Environments? Is it a good idea to have a few environments per application, resulting in app_name-env_name environments? The problem Im trying to solve is locking cookbook versions for different apps and their respective environments (production, staging). Thanks in advance.
[2013-10-31 07:31:06 -0400] arussel: can't you set the version of app_name in an env for prod, staging ... and then inside the app_name cookbook set the version for the other relevant cookbook ?
[2013-10-31 07:33:16 -0400] v-yarotsky: so you recommend creating a wrapper cookbook for each of my apps, right?
[2013-10-31 07:33:56 -0400] arussel: I don't 'recommend', but that's what I'm doing
[2013-10-31 07:34:09 -0400] v-yarotsky: sorry, by application I mean project, each of them has lots of things to setup
[2013-10-31 07:34:44 -0400] arussel: project meaning that you would deploy to multiple node ?
[2013-10-31 07:34:59 -0400] arussel: (in which case wrapper cookbook wouldn't work)
[2013-10-31 07:35:40 -0400] arussel: then projecta_env1 seems the only solution
[2013-10-31 07:36:36 -0400] v-yarotsky: yep, each project has frontends, databases, etc
[2013-10-31 07:37:49 -0400] v-yarotsky: would be helpful if chef had another layer - 'project', though on the other hand it's already got enough complicated..
[2013-10-31 07:40:54 -0400] arussel: maybe you could work with organisation, but I'm not sure you can share recipes
[2013-10-31 07:50:46 -0400] arussel: I need to fetch a zip file and unzip it, is there a way to do it without usign bash ?
[2013-10-31 08:02:35 -0400] v-yarotsky: nothing built-in. lwrp?
[2013-10-31 08:03:19 -0400] arussel: not that I found, the remote_file show an example that use bash to unzip
[2013-10-31 08:04:24 -0400] arussel: I'm going to give ark a shot, it seems to do the job
[2013-10-31 08:06:52 -0400] v-yarotsky: looks cool. But I decided to package everything with fpm
[2013-10-31 08:07:35 -0400] v-yarotsky: if there are many things to be installed from source, packaging is the way to go, imho
[2013-10-31 08:07:47 -0400] v-yarotsky: it's way faster
[2013-10-31 08:10:48 -0400] JeanMertz: Hey guys, is it possible to force a run_list for a node on the node itself and push that to Chef Server using the chef-client cookbook (or some other way)? Basically, I want my application cookbooks to tell Chef Server which recipes it runs and Chef Server to pick that up instead of me defining the run_list for the node on chef server
[2013-10-31 08:58:54 -0400] sassyn: ho all
[2013-10-31 08:59:00 -0400] sassyn: hi group
[2013-10-31 08:59:25 -0400] sassyn: What is the diffrent between Recipe and Role?
[2013-10-31 08:59:44 -0400] dmdeklerk: hi, a role consists of recipes
[2013-10-31 08:59:56 -0400] dmdeklerk: among other things
[2013-10-31 09:00:26 -0400] sassyn: so node can have 1. recipe
[2013-10-31 09:00:31 -0400] sassyn: or 2. role
[2013-10-31 09:00:40 -0400] sassyn: where role is a collection of recipes
[2013-10-31 09:00:40 -0400] dmdeklerk: or both
[2013-10-31 09:01:10 -0400] dmdeklerk: role=collection of recipes and attribute overrides
[2013-10-31 09:01:31 -0400] bigbigbang: role is more for scenario : it can contains many cookbook . A recipe is an element in a cookbook, which define how to deploy, what to deploy (template...) .. and a Cookbook contains a recipe and all the necessary things to execute this recipe
[2013-10-31 09:01:56 -0400] sassyn: u assign recipe to a node. what about role? do u assign role to a node - or u assign node to a role?
[2013-10-31 09:02:51 -0400] bigbigbang: sassyn: You can assign recipe in role . EG : you have the role web-server (which contains the cookbook for apache, mysql ...)
[2013-10-31 09:03:34 -0400] sassyn: bigbigbang: but then what? u asggin the role to the node?
[2013-10-31 09:03:39 -0400] bigbigbang: sassyn: and then you assign a role to a node
[2013-10-31 09:03:55 -0400] sassyn: OK
[2013-10-31 09:03:59 -0400] sassyn: got it- thanks :-)
[2013-10-31 09:04:04 -0400] bigbigbang: sassyn: you can have a role that apply to many node as you want
[2013-10-31 09:04:19 -0400] sassyn: got it - thank u
[2013-10-31 09:25:01 -0400] bigbigbang: How can I get retrieve the uid and gid wich are presents on node ? I was looking if the gid and uid of the inspected file is present on system. that's was i was typing :  gid_present = node["etc"].values.find{|a| a["gid"] == s.gid}["gid"]   where s.gid = s = File.stat(file)  # file stats
[2013-10-31 10:31:32 -0400] zytta: quit
[2013-10-31 11:22:54 -0400] s2r2: we've hit a very weird situation here so any input is helpful:  is it possible that a node's chef-client run changes the environment?
[2013-10-31 11:29:43 -0400] lawnchair: i'm trying to use vagrant w/ chef and omnibus is complaining: Error: #<Gem::LoadError: Unable to activate uber-s3-0.2.4, because mime-types-2.0 conflicts with mime-types (~> 1.17)>
[2013-10-31 11:29:50 -0400] lawnchair: i was wondering if anyone knew how to fix this up
[2013-10-31 11:29:55 -0400] lawnchair: i tried the vagrant channel w/o much luck
[2013-10-31 11:50:08 -0400] lflux: Is there a way to search for fields that are non-empty in a chef search query?
[2013-10-31 11:51:02 -0400] lflux: for example, if I have the password attribute set but empty on elements in a data bag, searching for "password:*" will still return those with "password":"" in the data bag entry
[2013-10-31 12:18:13 -0400] kraM: Hi there, adding a recice to a run_list within a role; how can I guarantee this recipe runs last in the run_list?
[2013-10-31 12:22:23 -0400] mgalkiewicz: add it at the end?
[2013-10-31 12:23:17 -0400] kraM: In the role: run_list[cookbook::recipe] - What do I need to do to add it at the end?
[2013-10-31 12:27:49 -0400] mgalkiewicz: run list should looks like this: run_list "recipe[coobook1::recipe]", "recipe[cookbook2::recipe]"
[2013-10-31 12:30:48 -0400] kraM: Sure, but the run_list is generated somewhere else and I do not want to meddle with that. I just want a single machine to provision like any other machine but execute a final recipe based on an additional role.
[2013-10-31 12:33:07 -0400] kraM: knife node edit? Would that be the "correct" way?
[2013-10-31 12:44:10 -0400] juliancdunn: provision the machine with both things in the run_list?
[2013-10-31 12:44:59 -0400] juliancdunn: knife bootstrap ........ -r 'role[something],recipe[additional_cookbook::recipe]'
[2013-10-31 13:08:33 -0400] dmdeklerk: I was wondering what is regarded the best sidekiq cookbook for ubuntu at the moment. The community cookbook is smartos only and I'm not sure I can use the one in ey-cloud-recipes (https://github.com/engineyard/ey-cloud-recipes/tree/master/cookbooks)
[2013-10-31 13:12:09 -0400] michaelhart: I'm writing a lwrp, and need to modify a node attribute that's an array, such as node['xyz'
[2013-10-31 13:12:21 -0400] michaelhart: oops. node['xyz'] = []
[2013-10-31 13:13:18 -0400] michaelhart: I can add to the array by doing something like this, array=node['xyz'].uniq, modifying the array then: node.normal['xyz'] = array
[2013-10-31 13:13:47 -0400] michaelhart: but I can't delete items from it using array.delete(). What's the best way to do this? Or, am I doing this completely wrong?
[2013-10-31 13:17:10 -0400] michaelhart: the error I get when executing array.delete() is "Node attributes are read-only when you do not specify which precedence level to set.". But I've copied the array using the .uniq operator (I think). Ruby is not my strength obviously.
[2013-10-31 13:18:56 -0400] michaelhart: I need to have more coffee. .dup is the correct way to copy an array and then it works.
[2013-10-31 13:29:49 -0400] AndyMoore: im trying to install some stuff that depends on logrotate, so ive added the opscode logrotate git repo as a submodule and retried knife upload. i'm now getting errors around spec/spec_helper.rb which i understand is a chefspec file? do i need chefspec installed?
[2013-10-31 13:31:12 -0400] dmdeklerk: If I repackage a Vagrant box provisioned with chef-client. Must I then remove client.pem before runnnig vagrant package?
[2013-10-31 13:57:20 -0400] lflux: What's the process of updating open source chef-server from 11.0 to 11.6? I can't find any documentation on opscode.com for upgrading the server
[2013-10-31 13:57:29 -0400] lflux: I'm on redhat, so is it just rpm -Uvh ?
[2013-10-31 14:00:35 -0400] teukka: lflux: the latest chef-server release is 11.0.8 and upgrading should be just installing the new package. (11.6.0 is the chef-client version)
[2013-10-31 14:01:42 -0400] lflux: teukka: thanks, it seems that's the one I was running.
[2013-10-31 14:01:52 -0400] lflux: I thought that 11.6 also went for the server
[2013-10-31 14:02:18 -0400] teukka: chef-server is totally different software since 11.0
[2013-10-31 14:03:16 -0400] teukka: og course you can (and maybe should) install chef-client to the same machine too =)
[2013-10-31 14:03:36 -0400] lflux: I was just reading http://docs.opscode.com/release_notes.html#known-issues wrong then
[2013-10-31 14:05:25 -0400] teukka: yeah, that's release notes for the client release. could be maybe mentioned better there
[2013-10-31 14:06:54 -0400] lflux: specifically " Chef::DataBag.save does a PUT getting a 405 from the chef server; as a result of changes to the Chef Server API, a chef-client must be version 11.6 (or higher) when using the knife data bag from file argument with the Enterprise Chef or Open Source Chef version 11 servers."
[2013-10-31 14:07:12 -0400] lflux: and now that I have coffee I realize it only mentions version 11 servers, not 11.6
[2013-10-31 14:07:45 -0400] teukka: ooh, coffee. I want some too!
[2013-10-31 14:17:26 -0400] togume: Hello. I've installed the knife-ec2 gem from source (0.6.6.rc.0), but it's not being recognized by knife... Thoughts on where I'm going wrong/what I'm missing?
[2013-10-31 14:30:02 -0400] CygnusS: hi! i try to poulate a mysql database with a mysqldump using the database receipe - works great if i provide an absoulte path to the file.
[2013-10-31 14:31:54 -0400] CygnusS: what i can not get to work is using a file that is supplied with my cookbook. How does the line sql {::File.open("/home/vagrant/testfile").read} has to look to work with something like "source testfile"?
[2013-10-31 14:33:27 -0400] strictlyb: amyone here using irccat and have a second
[2013-10-31 14:40:42 -0400] gchristensen: so anyone running iDRAC7? what OS and browser are you using?
[2013-10-31 15:05:36 -0400] togume: Hello. I've installed the knife-ec2 gem from source (0.6.6.rc.0), but it's not being recognized by knife... Thoughts on where I'm going wrong/what I'm missing?
[2013-10-31 15:37:39 -0400] tobin: I'd like to install packages rather than use chef_gem. how are others doing this with respect to omnibus paths etc?
[2013-10-31 15:38:09 -0400] tobin: Bsaically i don't want to be building things like fog from source when we launch a new chef management client
[2013-10-31 15:40:00 -0400] v-yarotsky: Hi all. How do you (who use open-source chef server) bootstrap your nodes? For some reason, 'knife bootstrap' overwrites node definition, are there any known workarounds?
[2013-10-31 15:41:23 -0400] tobin: We use cloud-init + some glue to run chef-client
[2013-10-31 15:41:36 -0400] allaire: anybody use the "users" cookbook?
[2013-10-31 15:41:49 -0400] allaire: I get the following: STDERR: useradd: group 'deployer' does not exist
[2013-10-31 15:43:44 -0400] brandon_dacrib: I have chef 0.9.12, How can I run chef in a read only why-run mode with this version?
[2013-10-31 15:52:02 -0400] cap10morgan: brandon_dacrib: is there a reason you're stuck on such an old version? I don't think 0.9 supports why-run mode. and for lots of other reasons, you should really upgrade to the latest version.
[2013-10-31 15:55:29 -0400] cwj: thats correct, why-run mode is not available in that version
[2013-10-31 15:59:16 -0400] Holos: If I have multiple chef servers (different clients) is there a suggested method for isolating the two instances? different users? differenet knife.rb / .chef's?
[2013-10-31 16:00:43 -0400] mgalkiewicz: there is a plugin to knife
[2013-10-31 16:00:52 -0400] mgalkiewicz: however I dont remember the name
[2013-10-31 16:01:22 -0400] Holos: mgalkiewicz: knife Block
[2013-10-31 16:02:25 -0400] nicgrayson: Holos: i just using different commands for each knife-prod, knife-stage-uat
[2013-10-31 16:02:46 -0400] nicgrayson: those are just bash scripts with the knife.rb file specified
[2013-10-31 16:07:26 -0400] mgalkiewicz: nicgrayson:  like holos suggested
[2013-10-31 16:08:23 -0400] bean__: yeah, nicgrayson and I used knife block for a while, but having different commands works p well.
[2013-10-31 16:28:58 -0400] pmde: hi chefs.  i need to provision applications that require multiple nodes and there are dependencies between the nodes, and sequencing issues.  I know I could build something with a 'master node' using ssh, and I know there are things like MC, Func, Fabric, etc.  But I guess what I would really like is to have some kind of orchestration, maybe built into the chef server, or as an add on.  I saw some discussion in the wikis about this.  I was wondering
[2013-10-31 16:41:54 -0400] dgarstang: PyChef, creating a new node.... how do I pass node to method?
[2013-10-31 16:45:42 -0400] mattupstate: pmde: happen to use AWS?
[2013-10-31 16:48:16 -0400] pmde: mattupstate: no
[2013-10-31 16:49:43 -0400] mattupstate: pmde: bummer, was going to suggest cloudformation
[2013-10-31 16:50:04 -0400] mattupstate: i'd love a high level tool that does this though
[2013-10-31 16:51:34 -0400] joe_k: hey i have been trying to figure that out too
[2013-10-31 16:52:04 -0400] joe_k: and how to handle transient collections of such nodes instead of a persistent set of them
[2013-10-31 16:53:01 -0400] joe_k: cloudformation does have the declarative "stack" idea done pretty well, but I think I need to be using chef-solo on each node
[2013-10-31 16:55:35 -0400] troyready: dgarstang, http://pychef.readthedocs.org/en/latest/api.html#chef.Node.create ?
[2013-10-31 16:59:43 -0400] JayF: Are there any suggestions for a good chef cookbook for configuring a nat gateway? Seems as if most of the existing iptables recipes are heavily weighted toward a filter-only usecase.
[2013-10-31 17:00:30 -0400] dgarstang: troyready: yes, but Im trying to figure out how to pass the node data...  dictionary isn't working.
[2013-10-31 17:02:51 -0400] allaire: Anybody know what's going on? https://gist.github.com/allaire/aaa07985d7e536010c17
[2013-10-31 17:03:57 -0400] troyready: dgarstang, sorry, it's out of my wheelhouse a bit. I know there are plenty of others that pre-create nodes before spinning up VMs, but I'm not one of them. Maybe someone will come on later with more experience with it
[2013-10-31 17:04:51 -0400] dgarstang: troyready: no worries, thanks.
[2013-10-31 17:07:16 -0400] troyready: dgarstang, I am kinda intrigued by the issue though; could you pastebin the issue (I probably can't help, but someone else might be able to do more with the pastebin)
[2013-10-31 17:09:45 -0400] dgarstang: troyready: it's probably a user issue. sticking data into a dictionary as it would appear in node and then calling Node.Create(name, dict).
[2013-10-31 17:11:25 -0400] gswallow: I have a spooky issue with templates on Windows.
[2013-10-31 17:11:25 -0400] gswallow: https://gist.github.com/gswallow/7253370
[2013-10-31 17:11:40 -0400] gswallow: Why does chef fail even though my template is good?
[2013-10-31 17:15:43 -0400] joe_k: looks like someone is expecting a certain set of success codes and failing if that set isnt found
[2013-10-31 17:16:11 -0400] joe_k: and whatever tool used a previously unused code or defined a new one
[2013-10-31 17:17:08 -0400] joe_k: tools like the windows installer or vsix installer will return one code for succes, one code for success + reboot needed, etc
[2013-10-31 17:23:07 -0400] dgarstang: troyready: got it
[2013-10-31 17:32:03 -0400] gswallow: @joe_k you talkin' to me?
[2013-10-31 17:40:24 -0400] tubbo: </taxi-driver>
[2013-10-31 17:52:43 -0400] heathsnow_: Is there another way to do this now....this throws cannot find resource win_friendly_path error for me:  ::Chef::Recipe.send(:include, Windows::Helper)  my_batch_file = win_friendly_path(::File.join( node['cookbook']['batch_dir'],'foo.bat'))
[2013-10-31 17:57:08 -0400] joe_k: gswallow: yes
[2013-10-31 18:01:34 -0400] heathsnow_: grrr....is there a trick to using the template resource when your path has spaces?  The template is working but is throwing error:  Could not determine diff. Error: diff: extra operand `(x86)/Parametric'.
[2013-10-31 18:02:13 -0400] heathsnow_: and thus doesn't 'notifies' correctly
[2013-10-31 18:02:57 -0400] daos: i've got a simple recipe that just installs a template. it's in my rolefile relatively early in the run_list but it doesn't seem to run right away... is thre a way to tell the template resource to run immediately?
[2013-10-31 18:06:00 -0400] joe_k: heathsnow_: can you show the line you're referring to that path in
[2013-10-31 18:06:11 -0400] joe_k: and I might be able to give you a suggestion on quoting out the spaces
[2013-10-31 18:08:49 -0400] heathsnow_: Joe_k: the node attribute is install_path = 'C:\Program Files (x86)\Parametric Portfolio Associates\PPA.Chronos' and config = 'PPA.Chronos.Service.exe.config'.  The template call is template File.join(install_path, config) do
[2013-10-31 18:10:59 -0400] gswallow: @heathsnow_ I am far from the person you should be taking chef-on-windows advice but I do this:
[2013-10-31 18:11:00 -0400] gswallow: "#{ENV['ProgramFiles(x86)']}/indigobiosystems/MzConvertService/MzConvertService.exe.config"
[2013-10-31 18:12:20 -0400] heathsnow_: gswallow:  I'll give that a shot...it makes sense there probably some shorthand for C:\Program Files (x86)\
[2013-10-31 18:17:11 -0400] dgarstang: I my cookbook includes java, and the java cookbook has a node attribute that sets the java version, can I put node.set['java']['jdk_version'] = '7' in the TOP level cookbook?
[2013-10-31 18:24:51 -0400] ckwalsh: Hey, I'm having issues with knife bootstrap, and I think it's related to the script not being run inside sudo on the target system. Any way to have knife dump the commands it runs in the console to help debug? Tried -V and it didn't seem to help
[2013-10-31 18:25:59 -0400] ckwalsh: I swear, that wasn't me... :P
[2013-10-31 18:28:41 -0400] smeyer1: having problem with chef server install
[2013-10-31 18:28:50 -0400] smeyer1: it dies with :  createdb: could not connect to database template
[2013-10-31 18:28:58 -0400] smeyer1: anyone know a work around
[2013-10-31 18:29:14 -0400] joe_k: is your db server running?
[2013-10-31 18:29:39 -0400] smeyer1: how can i check, using ubuntu
[2013-10-31 18:29:40 -0400] joe_k: afaik "template" is the database that comes with postgres that is copied to produce a new db
[2013-10-31 18:29:51 -0400] daos: smeyer1: omnibus installer?
[2013-10-31 18:29:51 -0400] joe_k: ps wwwaux | grep postgres
[2013-10-31 18:30:02 -0400] smeyer1: yes
[2013-10-31 18:30:06 -0400] daos: it uses daemontools afaik
[2013-10-31 18:30:10 -0400] daos: i forget the default path though
[2013-10-31 18:30:36 -0400] smeyer1: loosk to be running
[2013-10-31 18:32:53 -0400] smeyer1: the postgres db is running
[2013-10-31 18:33:48 -0400] dgarstang: Anyone tried to use the opscode java cookbook with java 7? It blows up
[2013-10-31 18:35:04 -0400] gswallow: I ended up writing my own recipe that uses the oab-java.sh script from flexion
[2013-10-31 18:35:10 -0400] gswallow: (@dgarstang ^^)
[2013-10-31 18:38:22 -0400] BevanK: does someone have a cookbook or recipe that uses the aws cookbook to attach an ebs volume using the aws_ebs_volume LWRP using the most_recent_snapshot attribute
[2013-10-31 18:39:42 -0400] troyready: I haven't done it yet, but I'm a little suspicious of the claim that the opscode java cookbook 'blows up' with Java 7 use. The pull requests on it seem to indicate that the java 7 urls work, but are just out of date
[2013-10-31 18:40:41 -0400] troyready: dgarstang, in any case, for your TOP level cookbook, I'd put a default['java']['jdk_version'] = '7'
[2013-10-31 18:40:44 -0400] doomviki1g: everything has to Just F'ing Work (tm)
[2013-10-31 18:41:20 -0400] troyready: Whoops, dgarstang --- meant "override['java']['jdk_version'] = '7'"
[2013-10-31 18:41:24 -0400] gchristensen: what is thebest way to disable search if search is not available?
[2013-10-31 18:41:46 -0400] gchristensen: switch on Chef::Config[:solo]?
[2013-10-31 18:43:54 -0400] gchristensen: ^ I ask specifically in the context of chefspec where I want to test with and without searh support.
[2013-10-31 18:45:23 -0400] dmdeklerk: gchristensen: dont you need to mock out search in chefspec. and if your asking to turn off search in individual cookbooks that depends largely on each cookbook
[2013-10-31 18:46:36 -0400] gchristensen: dmdeklerk: yes, and I'm mocking the search, but I also want to test that the cookbook runs without search support. Chef::Config[:solo] doesn't work, because chefspec always returns false, it seems.
[2013-10-31 18:47:58 -0400] dmdeklerk: I believe everything in chefspec is *faked* so it should not matter if you use solo or server/client. Since both are not used in chefspec
[2013-10-31 18:49:01 -0400] dmdeklerk: Also the last time I used chefspec I got back from the developers that is really intended for testing really simple things, so no search, thats more integration testing terain
[2013-10-31 18:49:32 -0400] dmdeklerk: BTW.. I'm  looking for a monitoring solution for my rails app, mysql db and cluster of sidekiq workers.
[2013-10-31 18:49:42 -0400] dmdeklerk: There are hosted sollutions NewRelic and others.
[2013-10-31 18:49:55 -0400] dmdeklerk: And there are (I believe) self hosted sollutions; nagios, icinca, etc..
[2013-10-31 18:50:01 -0400] gchristensen: dmdeklerk: I think we have our wires crossed here. yes, it is all faked. I want to fake the scenario where search is available, and I want to fake the scenario where search is not available. right now if in my recipe if I check Chef::Config[:solo] it will always return false, even if I stub the search.
[2013-10-31 18:50:08 -0400] dmdeklerk: Does anyone have good experience with either
[2013-10-31 18:50:43 -0400] dmdeklerk: ahhh. get it
[2013-10-31 18:50:58 -0400] thehar: dmdeklerk: I use NewRelic for most all application monitoring, Ganglia for systems monitoring and graphing, NewRelic for database monitoring, Nagios + PagerDuty for alerting and Graphite for misc things.
[2013-10-31 18:51:46 -0400] dmdeklerk: thehar: do you use the free services versions?
[2013-10-31 18:51:56 -0400] thehar: we host so much in newrelic that we have to pay
[2013-10-31 18:51:58 -0400] thehar: but it's worth it
[2013-10-31 18:52:07 -0400] thehar: it's the only SaaS I actually don't mind paying for
[2013-10-31 18:52:29 -0400] dmdeklerk: oke.. so waste in trying it out I guess
[2013-10-31 18:52:47 -0400] dgarstang: yuck. https://github.com/opscode-cookbooks/java doesn't have JCE support
[2013-10-31 18:53:00 -0400] dmdeklerk: waste= no waste
[2013-10-31 19:00:37 -0400] dmdeklerk: gchristensen: cant you monkeypatch that something like. module Chef; module Config; def [](x); true if x == 'solo'; end; end; end
[2013-10-31 19:00:39 -0400] troyready: dgarstang, maybe this is your chance to give back with a pull request to fix that? :)
[2013-10-31 19:00:51 -0400] dgarstang: troyready: sorry? just came back
[2013-10-31 19:01:26 -0400] gchristensen: dmdeklerk: curiou - good point
[2013-10-31 19:01:56 -0400] troyready: dgarstang, sounds like the java cookbook could be improved. Given that they've already done the hard work of managing the oracle download cookie, should be simple enough for you to add in the JCE report and get a pull request to opscode so we can all benefit
[2013-10-31 19:02:09 -0400] troyready: *JCE support
[2013-10-31 19:02:27 -0400] dgarstang: troyready: right now I'm trying to sort out this java issue. If I put node.default['java']['jdk_version'] = '7' in the top level cookbook and then include the recipe, it installs the java 6 package but then tries to set alternatives for java 7. I really don't understand how this works
[2013-10-31 19:09:21 -0400] Guest19756: I can't upload my cookbooks because RabbitMQ keeps going down and coming back up, would anybody be able to help me figure this out?
[2013-10-31 19:18:24 -0400] Guest19756: "AMQPLAIN login refused: user 'chef' - invalid credentials"
[2013-10-31 19:26:42 -0400] dgarstang: I my cookbook includes java, and the java cookbook has a node attribute that sets the java version, can I put node.set['java']['jdk_version'] = '7' in the TOP level cookbook?
[2013-10-31 19:29:24 -0400] dgarstang: would it be true that attributes set in default/attributes are applied before ANY include_recipe's are done?
[2013-10-31 19:41:53 -0400] JeanMertz: Anyone else ever used private chef server and have every cookbook in the webui return "404 not found" when clicking on it?
[2013-10-31 19:42:27 -0400] JeanMertz: I can't seem to pinpoint what's happening. Bookshelf returns 404, but I can actually find the file with the correct contents in the data folder
[2013-10-31 19:42:53 -0400] tomduffield: dgarstang: the attributes from all dependent cookbooks are loaded before you start evaluation any recipes, so yes
[2013-10-31 19:54:47 -0400] dgarstang: tomduffield: rather confused then, because I've got node.default['java']['jdk_version'] = '7' in my cookbook, and the included one, seems to be ignoring it
[2013-10-31 19:58:12 -0400] tomduffield: dgarstang: you can try to use chef-shell to debug it or you can try using node.normal instead of node.default
[2013-10-31 19:59:02 -0400] dgarstang: tomduffield: so, the included cookbook, has default['java']['jdk_version'] = '6' ... isn't that going to blow away what I put in my own cookbook?
[2013-10-31 20:00:10 -0400] tomduffield: dgarstang: not if you take advantage of precedence http://docs.opscode.com/chef_overview_attributes.html
[2013-10-31 20:02:50 -0400] dgarstang: tomduffield: what's the best practise when overriding someone's cookbook settings? use node.override? If that's even valid...
[2013-10-31 20:04:37 -0400] tomduffield: dgarstang: typically you only want to use override in environment files. if you want to set a node value in a recipe its best to use default/normal (whichever works better)
[2013-10-31 20:05:06 -0400] adamjk-dev: hey all.... anyone want to tell me how I broke the CI build for the jenkins cookbook on my pull request: https://github.com/opscode-cookbooks/jenkins/pull/98
[2013-10-31 20:05:28 -0400] adamjk-dev: I have not used Travis and it is just sitting forever on my 'first sync' to GitHub
[2013-10-31 20:05:31 -0400] adamjk-dev: so I am annoyed
[2013-10-31 20:05:35 -0400] dgarstang: tomduffield: Well, it's gotta be 'normal' then because the other cookbook's using default... seems my default gets blown away by their default.
[2013-10-31 20:06:32 -0400] tomduffield: adamjk-dev: it'll tell you why on travis: https://travis-ci.org/opscode-cookbooks/jenkins/jobs/13328594
[2013-10-31 20:09:05 -0400] adamjk-dev: tomduffield: if travis ever loaded for me I would look :)
[2013-10-31 20:09:25 -0400] adamjk-dev: tomduffield: "Just a few more seconds as we talk to GitHub to find out which repositories belong to you."
[2013-10-31 20:09:34 -0400] adamjk-dev: been a long time sitting there
[2013-10-31 20:09:47 -0400] tomduffield: hint: use fail instead of raise on providers/job.rb line 64
[2013-10-31 20:11:41 -0400] adamjk-dev: eh? I didn't change that line
[2013-10-31 20:11:59 -0400] tomduffield: then it may be something else causing the failure
[2013-10-31 20:12:10 -0400] adamjk-dev: yah i have no idea
[2013-10-31 20:12:13 -0400] adamjk-dev: my changes were minimal lol
[2013-10-31 20:12:21 -0400] adamjk-dev: one additional attribute
[2013-10-31 20:12:28 -0400] tomduffield: looks like it was a rubocop failure
[2013-10-31 20:12:32 -0400] adamjk-dev: and one change from a hardcoded value in a template to use a parameter
[2013-10-31 20:12:35 -0400] tomduffield: and rubocop got added pretty recently
[2013-10-31 20:12:38 -0400] adamjk-dev: ah, I see
[2013-10-31 20:12:39 -0400] adamjk-dev: yes it id
[2013-10-31 20:12:40 -0400] adamjk-dev: did
[2013-10-31 20:12:42 -0400] adamjk-dev: i noticed that
[2013-10-31 20:12:45 -0400] adamjk-dev: good call
[2013-10-31 20:19:04 -0400] dgarstang: I am sooo confused. My wrapper cookbook has node.normal['java']['jdk_version'] = '7', and the upstream cookbook has default['java']['openjdk_packages'] = ["sun-jdk#{node['java']['jdk_version']} ... but it's picking up '6' from it's own default, not the 7 I set
[2013-10-31 20:21:25 -0400] tubbo: hey all, i'm reading http://docs.opscode.com/install_server.html and one thing i can't understand...how does chef-server-webui "know" what hostname to be served as?
[2013-10-31 20:22:37 -0400] tomduffield: dgarstang: node['java']['openjdk_packages'] has already been set to sun-jdk6 before you overwrote jdk_version to 7
[2013-10-31 20:22:55 -0400] programmerq: so, pretty much all our ruby projects (including internal cookbooks) end up with a .ruby-version and .ruby-gemset file in their root.
[2013-10-31 20:22:55 -0400] hugespoon: tubbo: it defaults to the fqdn of the server (or hostname) iirc
[2013-10-31 20:23:01 -0400] tubbo: hugespoon: ah ok
[2013-10-31 20:23:10 -0400] hugespoon: tubbo:  you can customize it through chef-server.rb
[2013-10-31 20:23:24 -0400] tubbo: hugespoon: where's that located? in /etc/chef-server?
[2013-10-31 20:23:34 -0400] programmerq: I don't see those files in upstream cookbooks. Is there something that people generally do to help simplify gemsets across all the cookbooks one eventually ends up cloning?
[2013-10-31 20:23:42 -0400] dgarstang: tomduffield: so...
[2013-10-31 20:23:51 -0400] hugespoon: tubbo:  http://docs.opscode.com/config_rb_chef_server.html
[2013-10-31 20:23:57 -0400] hugespoon: tubbo: you need to create it yourself
[2013-10-31 20:24:00 -0400] tubbo: thanks man
[2013-10-31 20:24:04 -0400] hugespoon: it will override the defaults
[2013-10-31 20:24:25 -0400] tubbo: hugespoon: i'm actually just demoing this to see if it's necessary for us
[2013-10-31 20:25:04 -0400] tomduffield: dgarstang: you'll need to update attributes accordingly
[2013-10-31 20:25:08 -0400] dgarstang: tomduffield: if my attribute is included first, and then I include the recipe, since my attribute is a normal, and it's using a default, mine should take precendence, right?
[2013-10-31 20:25:31 -0400] dgarstang: tomduffield: not sure watcha mean by that
[2013-10-31 20:26:39 -0400] tubbo: hugespoon: so here's my situation...i'm running chef-server on a box that already includes an app
[2013-10-31 20:26:45 -0400] tubbo: and i'm running said app on :80 with nginx
[2013-10-31 20:26:45 -0400] tomduffield: dgarstang: your attribute will overwrite jdk_version, but not before openjdk_packages has been set using the original value
[2013-10-31 20:26:49 -0400] dgarstang: tomduffield: sorry to bug you. This sort of stuff I'd love to see documented, but I don't think the standard opscode docs really go far enough
[2013-10-31 20:27:10 -0400] tubbo: i'm assuming, since the webui is a simple unicorn server, i can just proxypass to the proper unix socket
[2013-10-31 20:27:16 -0400] tubbo: trouble is, i don't know what that socket is
[2013-10-31 20:27:20 -0400] jchauncey: https://wiki.opscode.com/display/chef/How+to+Proxy+Chef+Server+with+Apache <---- manual steps to proxy chef server with apache....
[2013-10-31 20:28:00 -0400] dgarstang: tomduffield: You did say that my attributes would be evaulated before the upstream cookbook was included, which would make me think it would set it's values based on what I had in mine.
[2013-10-31 20:29:02 -0400] tomduffield: dgarstang: I said that all of the attributes for all the dependent cookbooks are evaluated before any recipe code is evaluated. The attributes for your wrapper cookbook and the upstream cookbook are evaluated at the same time
[2013-10-31 20:29:59 -0400] dgarstang: tomduffield: so it sounds like your saying there's no clean way to override an upstream cookbooks values.
[2013-10-31 20:30:51 -0400] tomduffield: dgarstang: there is, but not when attributes are imbedded within one another
[2013-10-31 20:30:57 -0400] tomduffield: *embedded
[2013-10-31 20:31:03 -0400] holms: heya :) anybody can tell me where to find docs , on how to specify which recipe of cookbook to execute in node.json or ./nodes/*.json file
[2013-10-31 20:31:06 -0400] holms: in run_list
[2013-10-31 20:31:13 -0400] dgarstang: tomduffield: so... i guess if I set the packages explicitly in this case?
[2013-10-31 20:31:28 -0400] tomduffield: dgarstang: that would address the issue
[2013-10-31 20:32:40 -0400] dgarstang: tomduffield: thanks, and .. Ugh
[2013-10-31 20:33:31 -0400] dgarstang: tomduffield: wonder if that's documented anywhere...
[2013-10-31 20:33:55 -0400] tomduffield: wonder if what is documented?
[2013-10-31 20:34:24 -0400] dgarstang: tomduffield: that attributes embedded in another in an upstream cookbook can't be overridden
[2013-10-31 20:34:41 -0400] tomduffield: dgarstang: its more of a ruby thing than a chef thing
[2013-10-31 20:34:45 -0400] someara: huh?
[2013-10-31 20:34:51 -0400] dgarstang: tomduffield: Lovely.
[2013-10-31 20:35:19 -0400] jchauncey: when is the chef-client -z stuff going to make it into test-kitchen?
[2013-10-31 20:35:43 -0400] someara: chef-client -z was release 15 minutes ago. Patience.
[2013-10-31 20:36:47 -0400] holms: anybody =/?
[2013-10-31 20:38:44 -0400] tomduffield: holmes: run_list items for cookbook recipes follow this pattern: recipe[<cookbook>::<recipe>]
[2013-10-31 20:38:56 -0400] tomduffield: so the mod_ssl recipe of apache would be recipe[apache::mod_ssl]
[2013-10-31 20:39:06 -0400] holms: tomduffield: may force be with you! thanks!!!!
[2013-10-31 20:39:22 -0400] jchauncey: someara: i have none of that =)
[2013-10-31 20:39:44 -0400] someara: =)
[2013-10-31 20:40:06 -0400] CPS: i want to have a 'geography' attribute on each of my nodes. what's the best way to define this?
[2013-10-31 20:41:20 -0400] jbz: CPS: It'll depend on what you want to do with it, and how it's determined.
[2013-10-31 20:41:49 -0400] jbz: CPS: One of the simplest is to make sure every node belongs to a role, and have the value in the role.
[2013-10-31 20:41:57 -0400] CPS: it's set on node creation
[2013-10-31 20:42:22 -0400] jbz: Is it determined from or dependent on other node attribs like IP?  Or is it basically a label you apply?
[2013-10-31 20:42:31 -0400] mveitas: whack: I am doing some work on the AWS related inputs/outputs and consolidating the configurations as each is sort of doing things slightly different. There have been some attributes that are deprecated, but moving to use the aws_config mixin makes these attributes non-deprecated again --> :region. Wanted to get your thoughts about it
[2013-10-31 20:42:33 -0400] CPS: it's an applied label
[2013-10-31 20:42:53 -0400] CPS: i need to reference it in recipes
[2013-10-31 20:42:56 -0400] tomduffield: CPS what are some examples of this geography attribute?
[2013-10-31 20:43:11 -0400] CPS: "HKA", "NTC", "Cali"
[2013-10-31 20:43:28 -0400] jbz: CPS:  Ah, ok.  Then you should look at the attributes.json file - the chef-client can be pointed to a local file which contains attributes in JSON format.  If you start chef-client as a service, it'll load those attributes, and then the first time it successfully converges, it'll save them up to the node record on the server.
[2013-10-31 20:43:45 -0400] CPS: how do i vary that by node?
[2013-10-31 20:43:54 -0400] jbz: Well, you'd have to vary it based on your provisioning.
[2013-10-31 20:44:18 -0400] jbz: If you're looking to have a value which Chef just accepts from an external source, you're going to have to have a way to set that value.
[2013-10-31 20:44:41 -0400] CPS: where is attributes.json/
[2013-10-31 20:45:00 -0400] mondo: What's a good way to have a service start the first time chef installs it?  I don't want chef to start it back up if I've manually shut it down.
[2013-10-31 20:45:04 -0400] jbz: CPS:  It's generally kept in /etc/chef (on *ix).
[2013-10-31 20:45:25 -0400] CPS: i'm on windows
[2013-10-31 20:45:37 -0400] CPS: not in C:\chef
[2013-10-31 20:45:45 -0400] jbz: Ah, there I'm not gong to be much help.
[2013-10-31 20:46:24 -0400] programmerq: mondo: the way we solved that is on knife bootstrap, we pass a run_list of chef_client::service (I could be remembering the exact recipe wrong)
[2013-10-31 20:46:38 -0400] programmerq: and then when we knife node from file, we pass out the "real" run list that way.
[2013-10-31 20:46:56 -0400] programmerq: and then we can service chef-client stop , and our manual chef runs don't turn itself back on.
[2013-10-31 20:47:27 -0400] jbz: CPS:  Do you have a client.rb file?
[2013-10-31 20:47:30 -0400] CPS: yeah
[2013-10-31 20:47:37 -0400] CPS: no attributes file is referenced though
[2013-10-31 20:47:42 -0400] jbz: CPS: You can put a value in there, attreibutes_file = 'path/to/file'
[2013-10-31 20:47:51 -0400] jbz: Oh wait, no
[2013-10-31 20:47:53 -0400] jbz: heh
[2013-10-31 20:47:54 -0400] jbz: hm
[2013-10-31 20:48:23 -0400] cstewart_: any nagios cookbook knowledge in here?  looking for service definition support.  specifically the use of command argument macros
[2013-10-31 20:48:38 -0400] jbz: CPS: Ah, you want json_attribs = 'path/to/file'
[2013-10-31 20:48:59 -0400] jbz: That should, I think, tell the chef-client to load that json file into attributes as part of the first run.
[2013-10-31 20:49:16 -0400] CPS: so if i had {"geo":"HKA"} could i do node["geo"] in a recipe?
[2013-10-31 20:50:01 -0400] jbz: I believe so, yes.  I'm not sure if the structure of the json file is that or if you need add'l entities.
[2013-10-31 20:50:24 -0400] CPS: ok, thanks, i'll look into that
[2013-10-31 20:50:27 -0400] jbz: but in the general sense, right, you set the attributes in that file, and they're accessible using node['attribute'] in recipes.
[2013-10-31 20:50:44 -0400] jbz: You could also get clever about it
[2013-10-31 20:51:04 -0400] jbz: CPS: For example, if you can determine the proper value of that label based on the IP address, you could write an ohai plugin that did that
[2013-10-31 20:51:21 -0400] jbz: That would obviate the need to provision the attribs file :-)
[2013-10-31 20:51:36 -0400] CPS: how the geos are set isn't really in my sphere
[2013-10-31 20:51:43 -0400] jbz: ah gotcha.
[2013-10-31 21:00:11 -0400] dmdeklerk: How to deploy with chef? Is it normal practice to run a knife command that executes a recipe consisting of only the deploy_revision resource?
[2013-10-31 21:01:36 -0400] bean__: dmdeklerk: it's common to change your environment or some other attribute to what version or w/e that you want. Chef usually runs as a daemon.
[2013-10-31 21:01:47 -0400] tomduffield: dmdeklerk: you can also check out pushy: http://docs.opscode.com/pushy.html
[2013-10-31 21:02:05 -0400] bobbyz: Is there a way to namespace definitions within a recipe?  It turns out one of my definitions has the same name as a definition in a cookbook that I have recently started using, and some of my existing recipes are now picking up that definition by mistake
[2013-10-31 21:02:41 -0400] tomduffield: boobyz: not really :/
[2013-10-31 21:02:43 -0400] bobbyz: I can rename my definition, but just curious if there's a way to explicitly specify the definition
[2013-10-31 21:02:44 -0400] bobbyz: ok
[2013-10-31 21:04:38 -0400] dmdeklerk: bean__: tomduffield: thanks for the input
[2013-10-31 21:06:07 -0400] bean__: bobbyz: i mean you can do something like default[:mynamespace][:myconfigoption]
[2013-10-31 21:07:28 -0400] bobbyz: bean__: I'm not sure I follow what you mean.  We're talking about definitions, right?  That looks like you're referring to attribute naming
[2013-10-31 21:07:43 -0400] bean__: bobbyz: ah, sorry, i thought that was what you were talking about
[2013-10-31 21:07:44 -0400] bean__: my bad.
[2013-10-31 21:08:24 -0400] bobbyz: bean__: np.
[2013-10-31 21:10:49 -0400] dmdeklerk: bean__: So you can for instance set a "node[:commit] = 'foo'" and knife upload or even better update an existing data_bag and if your in a hurry run "ssh -c 'sudo chef-client'". Sounds easy enough
[2013-10-31 21:11:15 -0400] bean__: dmdeklerk: yep.
[2013-10-31 21:11:20 -0400] dmdeklerk: cool
[2013-10-31 21:11:28 -0400] failshell: anyone using the knife vsphere plugin? im trying the following command, but it says it can't find the VM: knife vsphere vm state foo off
[2013-10-31 21:11:29 -0400] bean__: dmdeklerk: i often /etc/init.d/chef-client run when im deploying
[2013-10-31 21:12:20 -0400] dmdeklerk: bean__: is that better than "sudo chef-client" ?
[2013-10-31 21:12:47 -0400] bean__: dmdeklerk: I mean, it triggers a run on your running daemon.
[2013-10-31 21:13:07 -0400] dmdeklerk: bean__: ahh so either way will work
[2013-10-31 21:13:13 -0400] bean__: i'd imagine so
[2013-10-31 21:13:19 -0400] dmdeklerk: again cool
[2013-10-31 21:14:38 -0400] silk: killall -USR1 chef-client will trigger a chef-client run on an already running daemon.
[2013-10-31 21:14:46 -0400] silk: and not tread on itself if its already running
[2013-10-31 21:15:21 -0400] dmdeklerk: *added another one to book*
[2013-10-31 21:30:19 -0400] heathsnow_: Hmmm...are variables created in the ruby_block resource available to other resources?
[2013-10-31 21:34:46 -0400] tomduffield: heathsnow_ depends but most likely not. do you have a specific example.
[2013-10-31 21:37:24 -0400] heathsnow_: tomduffield: I current set a 'version' variable outside of all resources in my library.  Then I have a bunch of resources with only_if {version == installed_version}.  Can I set the 'version' within a ruby_block and still have my other resource use only_if {version == installed_version}?
[2013-10-31 21:38:04 -0400] tomduffield: heathsnow_ one sec
[2013-10-31 21:40:36 -0400] tomduffield: heathsnow_ I dont believe so. I tried it a couple different ways and wasn't able to get it to work
[2013-10-31 21:41:23 -0400] tomduffield: that being said, I didn't have your library
[2013-10-31 21:41:26 -0400] tomduffield: you can always try it
[2013-10-31 21:41:28 -0400] heathsnow_: tomduffield didn't think so but woulda been nice
[2013-10-31 21:46:01 -0400] heathsnow_: tomduffield thx for checking
[2013-10-31 21:58:28 -0400] hatchetation: Is anyone aware of any changes with the omnibus 11.6.0 installer (for debian) which would result in puma being pulled in as a gem dependancy?
[2013-10-31 21:59:53 -0400] hatchetation: "nothing has changed" on our side, but bootstrapping new boxes fails on inclusion of the first chef_gem resource due to puma trying to compile, and a compiler not being available
[2013-10-31 22:01:49 -0400] jtimberman: hatchetation: what is the chef_gem resource you'reu sing?
[2013-10-31 22:02:03 -0400] hatchetation: jtimberman: airbrake_handler
[2013-10-31 22:02:13 -0400] hatchetation: (at 0.4.0, unchanged since forever)
[2013-10-31 22:02:43 -0400] jtimberman: hatchetation: airbrake_handler depends on chef.
[2013-10-31 22:02:53 -0400] jtimberman: chef 11.8.0 was just released today
[2013-10-31 22:03:10 -0400] jtimberman: part of the release is the inclusion of localmode, which uses chef-zero. chef-zero uses puma as the web server.
[2013-10-31 22:03:10 -0400] hatchetation: comparing with a previous node that launched yesterday and worked, grep'ing in the embedded gem specfifications, chef 11.6.0 is the only thing that seems to care about puma
[2013-10-31 22:05:26 -0400] hatchetation: jtimberman: i noticed that, I don't think 11.8.0 is being pulled in, I only see chef-11.6.0 in the list of gems. figure something else more subtle has changed in external deps or the chef gemspec to trigger puma installation, but am having trouble finding what.
[2013-10-31 22:05:58 -0400] crombar: I have a question concerning dependency management. I am trying to create a wrapper cookbook, which sets some defaults to install tomcat. I have another wrapper cookbook which installs java. Now I am facing the issue that tomcat includes the java opscode cookbook. It seems that this overrides my java installation with an openjdk version. How do I tell my tomcat-wrapper cookbook, that it should ignore the java dependency of the tomcat 
[2013-10-31 22:06:06 -0400] hatchetation: sounds like it's not a known issue -- i'm continuing to look
[2013-10-31 22:10:38 -0400] troyready: dgarstang, just coming back to my console now, and wanted to throw in my two cents regarding your attributes issue: this is another side effect of your use of recipes as roles. The reason it's not explicit in Opscode's documentation as that their docs won't direct your to the type of setup that you're deploying
[2013-10-31 22:10:50 -0400] troyready: Not that what you're doing is wrong (lots of people advocate the recipe-based roles), but it has caveats to it
[2013-10-31 22:10:59 -0400] troyready: If you instead were calling the java::default recipe from a regular role placed on your node's run-list, you could set the  java version attribute on that role, and attribute inheritance would take care of it all for you seamlessly
[2013-10-31 22:13:26 -0400] navid: How do I upgrade Knife to the latest version?
[2013-10-31 22:14:20 -0400] jtimberman: hatchetation: well, if you can open an issue in tickets.opscode.com with full details about your environment, that'd be gerat
[2013-10-31 22:17:34 -0400] hatchetation: jtimberman: you bet. Trying to reproduce in a cleaner environment
[2013-10-31 22:28:10 -0400] kallistec: hatchetation: this makes sense. gem install foo will try to upgrade all of foo's deps to the latest compatible version
[2013-10-31 22:28:30 -0400] kallistec: so installing the airbrake_handler is attempting to upgrade your chef to 11.8
[2013-10-31 22:28:57 -0400] kallistec: IMO plugin-y things shouldn't specify deps on the things they're plugins for because of this problem
[2013-10-31 22:29:28 -0400] hatchetation: kallistec: interesting. i just noticed that an updated mixlib-config gem is being installed (2.0.0)
[2013-10-31 22:30:21 -0400] kallistec: hatchetation: right, that's just how rubygems rolls, it upgrades everything whenever it gets the chance
[2013-10-31 22:30:51 -0400] kallistec: I think there's now an option to disable that, which we should look at supporting in gem_package and chef_gem
[2013-10-31 22:31:08 -0400] josephholsten: yeah, it's --conservative
[2013-10-31 22:37:58 -0400] dgarstang: oh noes. back to cookbook ordering issues. if I have bc-users in my run list BEFORE postfix, how can the postfix recipe be running BEFORE the bc-users one?
[2013-10-31 22:43:58 -0400] darkdust: In chef11, I'm trying to set the JSON property "validator" to true in the chef-validator client. However it is not taking effect. has anyone seen this before?
[2013-10-31 22:44:10 -0400] darkdust: following the instructions here: http://www.opscode.com/blog/2013/03/12/5106/
[2013-10-31 22:59:57 -0400] silk: dgarstang: ?
[2013-10-31 23:03:02 -0400] andrewdeandrade: When using the git resource to :sync a repo I have, chef checks out a new branch called deploy and deletes a tarball that i want to keep. I simply don't understand this behavior. If I ssh into the server and go to my repo and type git status it lists the one file I want to keep as deleted.
[2013-10-31 23:04:55 -0400] andrewdeandrade: I've gone through the source at https://github.com/opscode/chef/blob/master/lib/chef/provider/git.rb and I cannot see why this is happening
[2013-10-31 23:05:38 -0400] coderanger: andrewdeandrade: Check for something elsewhere in the recipe that does the delete?
[2013-10-31 23:06:42 -0400] andrewdeandrade: nothing... the only things that are run after the clone are npm install, bower install, grunt optimize and upstart
[2013-10-31 23:07:15 -0400] allaire: is it legit to use include_attribute if in an attribute file I refer to other attributes (which I include_attribute) to ensure the right order?
[2013-10-31 23:07:50 -0400] andrewdeandrade: coderanger: shit.... i see what's happening....
[2013-10-31 23:07:52 -0400] coderanger: allaire: Yes
[2013-10-31 23:08:04 -0400] coderanger: allaire: Within the same cookbook you mean?
[2013-10-31 23:08:10 -0400] allaire: @coderanger: yes
[2013-10-31 23:08:14 -0400] andrewdeandrade: coderanger: I've been looking at this for two hours and as soon as I ask I see it...
[2013-10-31 23:08:29 -0400] allaire: coderanger: include_attribute 'my-cookbook::ruby'
[2013-10-31 23:08:39 -0400] allaire: is there anything like 'self::ruby' ? :P
[2013-10-31 23:08:49 -0400] allaire: when I'm in the cookbook, refering to it seems akward :P
[2013-10-31 23:09:16 -0400] coderanger: allaire: Hmm, I don't think the current cookbook name is exposed in there, might be somewhere I haven't looked though
[2013-10-31 23:09:30 -0400] coderanger: allaire: There isn't a ton of value in having multiple attr files in a single cookbook though
[2013-10-31 23:09:49 -0400] allaire: coderanger: I have this weird structure :P
[2013-10-31 23:10:09 -0400] coderanger: allaire: Also you shouldn't generally have attributes depend on other attributes because that often sucks to work with
[2013-10-31 23:11:16 -0400] allaire: coderanger: Thanks for the tips
[2013-10-31 23:11:44 -0400] coderanger: allaire: The issue is that because they aren't lazily evaluated, the indirection makes changes hard
[2013-10-31 23:12:20 -0400] allaire: @coderanger: My case is weird. I'm working on a cookbook that I want to include in every chef-solo setup I create for every clients we have, makes sense?
[2013-10-31 23:12:44 -0400] allaire: coderanger: It's just to DRY things a bit, so I don't always copy/paste everytime each of my chef-solo directory
[2013-10-31 23:12:45 -0400] coderanger: Makes sense, but I don't see the correlation with mutliple attr files :)
[2013-10-31 23:13:15 -0400] allaire: well, I wrap other cookbooks with a recipes and attributes files
[2013-10-31 23:13:32 -0400] allaire: coderanger: https://www.dropbox.com/s/f3siogjz5fhn6hx/Screenshot%202013-10-31%2019.13.27.png
[2013-10-31 23:14:02 -0400] allaire: Just to better organize my stuff
[2013-10-31 23:14:09 -0400] allaire: instead of having multiple cookbook-wrapper
[2013-10-31 23:15:56 -0400] allaire: coderanger: makes more sense? :/
[2013-10-31 23:16:24 -0400] coderanger: No, there is no functional different than having it in one file aside from not having one really long file
[2013-10-31 23:16:38 -0400] coderanger: But the tradeoff is you have to deal with ordering :)
[2013-10-31 23:17:50 -0400] allaire: coderanger: Yeah, good point :)
[2013-10-31 23:20:26 -0400] coderanger: allaire: Either way works
[2013-10-31 23:21:08 -0400] allaire: coderanger: Is foodcritic the only way to "check" for obvious cookbook errors?
[2013-10-31 23:21:17 -0400] allaire: currently I always run on vagrant, but it's something long :/
[2013-10-31 23:21:18 -0400] coderanger: allaire: Its the best one
[2013-10-31 23:21:29 -0400] coderanger: What do you mean "on vagrant"?
[2013-10-31 23:21:41 -0400] coderanger: Its a static checker, so you can just run it on your workstation
[2013-10-31 23:22:14 -0400] allaire: well, what I can't test with foodcritic, I do it on vagrant
[2013-10-31 23:22:53 -0400] coderanger: I mean after foodcritic the next thing to use is test-kitchen
[2013-10-31 23:23:03 -0400] coderanger: foodcritic is a linter, so it only catches style errors basically
[2013-10-31 23:23:32 -0400] allaire: ok I'll take a look, thanks !
[2013-10-31 23:23:41 -0400] coderanger: There is also knife cookbook test
[2013-10-31 23:23:47 -0400] coderanger: which basically just runs ruby -c
[2013-10-31 23:23:55 -0400] coderanger: which checks if the recipes are valid Ruby syntax
[2013-10-31 23:24:10 -0400] coderanger: test-kitchen is an actual unit/intergration test harness though
[2013-10-31 23:41:43 -0400] allaire: coderanger: https://gist.github.com/allaire/3e2938d0d8c4043478ce  is it legit to do things like this?
[2013-10-31 23:42:09 -0400] allaire: I often to that, set some node attributes in my wrapper-recipe BEFORE including the recipe from the vendor cookbook
[2013-10-31 23:42:30 -0400] coderanger: allaire: Hmm, there are a bunch of ways to answer that
[2013-10-31 23:43:01 -0400] coderanger: first check out https://coderanger.net/2013/06/arrays-and-chef/ to see why arrays in attrs are badnewsbears
[2013-10-31 23:43:09 -0400] coderanger: allaire: second, I would probably use node.override =
[2013-10-31 23:43:16 -0400] coderanger: and third, yes :)
[2013-10-31 23:43:25 -0400] coderanger: in that that will probably work give or take weird merge issues
[2013-10-31 23:45:07 -0400] allaire: Bookmarked that link thanks!
[2013-10-31 23:48:04 -0400] josephholsten: anyone had issues with /environments/foo/cookbook_versions 500'ing?
[2013-10-31 23:48:16 -0400] coderanger: josephholsten: Very often, yes
[2013-10-31 23:48:27 -0400] coderanger: josephholsten: That is the depsolver endpoint
[2013-10-31 23:48:57 -0400] coderanger: josephholsten: So any unmet deps, or version conflicts, or unsolvable deps, etc
[2013-10-31 23:50:09 -0400] josephholsten: it's 500ing intermittently on a run list that it has been able to resolve
[2013-10-31 23:51:18 -0400] josephholsten: hmm, {badrecord,chef_cookbook_version}
[2013-10-31 23:53:52 -0400] josephholsten: <3 erlang error messages
[2013-10-31 23:54:40 -0400] josephholsten: yeah, that's not good. when I start clients accross ~50 nodes at the same time, 500's from the badrecord thing
[2013-10-31 23:54:49 -0400] josephholsten: one node at a time: no problem
[2013-10-31 23:55:48 -0400] josephholsten: maybe a postgres issue?
[2013-10-31 23:58:08 -0400] josephholsten: I can never navigate this codebase
[2013-10-31 23:58:38 -0400] allaire: dat huge catched chef_gem 'pg' error exception

[2013-10-25 00:24:50 -0400] andrewdeandrade: I'm at wits end and about to tear my hair out with a problem here. When data bags are created, where are they stored? I have a data_bag_path set in my knife.rb file and `knife data bag list` is empty even though I have manually created data bags. When I create data bags with `knife data bag create foo bar` it creates data bags, but i cant figure out where since they arent in /var/chef/data_bags/
[2013-10-25 00:26:14 -0400] andrewdeandrade: when I go to another project and add a data_bag it also goes in the same system wide global data bag. when I do a `$ sudo find / -name name_of_some_databag_i_made -print` i get no results
[2013-10-25 00:26:29 -0400] andrewdeandrade: where are they going?
[2013-10-25 00:26:53 -0400] coderanger: andrewdeandrade: They end up postgres
[2013-10-25 00:27:03 -0400] andrewdeandrade: postgres?
[2013-10-25 00:27:35 -0400] coderanger: Yes, on the chef-server
[2013-10-25 00:27:59 -0400] coderanger: Everything except cookbook files gets stored in the DB
[2013-10-25 00:28:12 -0400] andrewdeandrade: coderanger: but is it possible to have them local and upload them to the server like cookbooks and roles?
[2013-10-25 00:28:19 -0400] coderanger: Sure
[2013-10-25 00:28:26 -0400] coderanger: knife upload data_bags/
[2013-10-25 00:28:58 -0400] coderanger: Works (almost) exactly the same as roles and envs
[2013-10-25 00:29:06 -0400] andrewdeandrade: coderanger: is this something that changed between chef 10 and 11? Why could I not find this in documentation anywhere?
[2013-10-25 00:29:22 -0400] coderanger: In general, no
[2013-10-25 00:29:37 -0400] coderanger: the DB changed from couch to postgres, but the structure is the same
[2013-10-25 00:29:58 -0400] andrewdeandrade: coderanger: all the docs I found made reference only to json files and said nothing about those only existing remotely on the server
[2013-10-25 00:32:44 -0400] GeoffC_: can someone help me connecting knife to create an ec2 instance?
[2013-10-25 00:33:19 -0400] andrewdeandrade: GeoffC_: have you set up you credentials in your knife.rb file?
[2013-10-25 00:33:30 -0400] andrewdeandrade: GeoffC_: tell us what you've done already
[2013-10-25 00:33:55 -0400] GeoffC_: I am running through the nagios quick start tutorial and I am trying to do the knife ec2 server create  command but I get the key pair does not match
[2013-10-25 00:34:15 -0400] GeoffC_: I have entered the correct keys in knife.rb
[2013-10-25 00:35:22 -0400] andrewdeandrade: coderanger: how do I simply upload all the databags in the chef/data_bags/ folder in my project. I tried `knife data bag from file --all` but that didnt work
[2013-10-25 00:36:07 -0400] andrewdeandrade: GeoffC_: what are all the keys declared in knife.rb?
[2013-10-25 00:37:02 -0400] andrewdeandrade: GeoffC_: :aws_access_key_id :aws_secret_access_key :aws_ssh_key_id :identity_file etc?
[2013-10-25 00:37:20 -0400] coderanger: andrewdeandrade: knife upload data_bags/
[2013-10-25 00:37:24 -0400] GeoffC_: oh I don't have the identity file
[2013-10-25 00:40:17 -0400] GeoffC_: same error
[2013-10-25 00:42:28 -0400] andrewdeandrade: GeoffC_: identity file should be the path to the key that you downloaded from amazon
[2013-10-25 00:42:47 -0400] andrewdeandrade: e.g. knife[:identity_file] = "#{ENV['HOME']}/.ec2/#{ENV['AWS_REGISTRY_KEYPAIR_NAME']}.pem"
[2013-10-25 00:46:47 -0400] GeoffC_: same
[2013-10-25 00:47:02 -0400] GeoffC_: well I am specifying all this in the command
[2013-10-25 00:47:31 -0400] GeoffC_: so -S and -i
[2013-10-25 00:49:09 -0400] andrewdeandrade: coderanger: does the `chef-shell` read from knife.rb? It seems that it is not respecting the data_bag_path I set in it
[2013-10-25 00:49:28 -0400] andrewdeandrade: GeoffC_: can you give me the exact command you are running?
[2013-10-25 00:49:59 -0400] coderanger: andrewdeandrade: I don't think so, it uses chef-shell.rb
[2013-10-25 00:50:11 -0400] GeoffC_: C:\Users\**\chef-repo\nagios-quick-start [master]> knife ec2 server create -G  default -I ami-7000f019 -f m1.small -S SSH -i ~/.ssh/SSH.pem -x ubuntu -r 'role [production],role[base],role[monitoring]'
[2013-10-25 00:50:21 -0400] coderanger: andrewdeandrade: chef-shell --help details the config lookup structure
[2013-10-25 00:53:30 -0400] andrewdeandrade: coderanger: I just saw that I can set the config with a flag. thanks for your help
[2013-10-25 00:53:56 -0400] andrewdeandrade: GeoffC_: What's the region you are using?
[2013-10-25 00:54:07 -0400] GeoffC_: idk
[2013-10-25 00:54:21 -0400] GeoffC_: I was just following this guide https://github.com/opscode/nagios-quick-start
[2013-10-25 00:54:23 -0400] andrewdeandrade: GeoffC_: IIRC correctly your key needs to be created in the same region as your instance
[2013-10-25 00:55:08 -0400] andrewdeandrade: when you were in the amazon console and you made your AWS pem file, what region was it?
[2013-10-25 00:55:27 -0400] GeoffC_: OH do I have to create an ami?
[2013-10-25 00:55:43 -0400] GeoffC_: I'm in est
[2013-10-25 00:56:12 -0400] flaccid: already too many AMIs out there :P
[2013-10-25 00:56:13 -0400] GeoffC_: right now the site says oregon
[2013-10-25 00:56:16 -0400] andrewdeandrade: no, but you need to make a key pair in the AWS console
[2013-10-25 00:56:34 -0400] GeoffC_: would it have changed since I created the keypair or did I just create it in the wrong region?
[2013-10-25 00:56:51 -0400] andrewdeandrade: that's the identity file you should be using when you create a machine
[2013-10-25 00:57:18 -0400] andrewdeandrade: Well you need to make sure that you specify the region at the command line that corresponds to the key pair you are using.
[2013-10-25 00:57:55 -0400] andrewdeandrade: The default region for chef may be different than the default region for the EC2 console
[2013-10-25 00:59:17 -0400] GeoffC_: works great now!  thanks andrew
[2013-10-25 06:10:03 -0400] zaargy: is ohai data only saved on the first run if the run was successful?
[2013-10-25 06:16:13 -0400] midnitekiller: #join #learnchef
[2013-10-25 07:31:59 -0400] bcave: morning all
[2013-10-25 07:33:23 -0400] bcave: wondering if someone could clarify how attributes are passed on to recipes, because I'm getting unexpected behaviour
[2013-10-25 07:33:57 -0400] bcave: i have a role that has a run list to install java (oracle) and another recipe that depends on java
[2013-10-25 07:35:33 -0400] bcave: override_attributes[:java][:install_flavour] => "oracle" and if I add recipe['java::oracle'] to the run_list, it installs correctly (there are 2 ways to install oracle: 1 - by setting install_flavor and calling the default recipe, or 2 - by using the java::oracle recipe directly)
[2013-10-25 07:36:25 -0400] bcave: However, in another recipe that requires java, i have include_recipe "java". This is triggering the openjdk (not oracle) recipe to run
[2013-10-25 07:43:45 -0400] bcave: never mind
[2013-10-25 07:43:58 -0400] bcave: i was using "install_flavour" instead of "install_flavor"
[2013-10-25 08:11:23 -0400] mc_fail: does it possible install a chef-server without using a rpm or deb package?
[2013-10-25 08:18:16 -0400] mc_fail: or does it possible install a just cheif-server, and somehow integrate it with my own nginx and postgres?
[2013-10-25 08:23:44 -0400] arussel: is an instance of a provider created of each resource ?
[2013-10-25 09:04:27 -0400] s2r2: mc_fail: http://docs.opscode.com/config_rb_chef_server.html  < you can disable postgres and nginx here
[2013-10-25 09:04:57 -0400] s2r2: mc_fail: but I'm not sure why you'd want to do that the omnibus package is pretty cool ;)
[2013-10-25 09:08:17 -0400] mc_fail: s2r2 i don't want disable it, i just already have a postgres and http server installed on this machine, and i just don't use another one
[2013-10-25 09:08:55 -0400] s2r2: mc_fail: I was implicitly proposing to still use the omnibus package, but disable its embedded postgres/nginx service
[2013-10-25 09:09:32 -0400] s2r2: mc_fail: but in the end, I was really proposing to just keep it simple and use the integrated solution that just works ;)
[2013-10-25 09:12:38 -0400] mc_fail: hmm, and does it possible to install chef on fedora?
[2013-10-25 09:21:32 -0400] dantleech: hi everyone
[2013-10-25 09:21:47 -0400] dantleech: noob question .. how are services registered in chef?
[2013-10-25 09:22:26 -0400] dantleech: are they registered automatically, i.e. if there is a service "idmapd" in /etc/init.d should     notifies :restart, "service[idmapd]"
[2013-10-25 09:22:29 -0400] dantleech: work ?
[2013-10-25 09:25:50 -0400] zaargy: dantleech: you need to have service resource defined somewhere in your recipes
[2013-10-25 09:25:58 -0400] zaargy: notifies won't work without that
[2013-10-25 09:26:20 -0400] zaargy: chef only knows about what you've defined explictly basically
[2013-10-25 09:26:29 -0400] dantleech: zaargy: ah .. ok, I wasn't sure. thanks
[2013-10-25 09:26:41 -0400] dantleech: i guess apache2 is there by default?
[2013-10-25 09:27:07 -0400] zaargy: noting is there by default :) maybe you are using the apache2 cookbook which has the service resource defined?
[2013-10-25 09:27:14 -0400] zaargy: s/noting/nothing/
[2013-10-25 09:27:23 -0400] dantleech: ah.. i see
[2013-10-25 09:27:25 -0400] dantleech: service 'apache2' do
[2013-10-25 09:27:27 -0400] dantleech:     action :restart
[2013-10-25 09:27:29 -0400] dantleech: end
[2013-10-25 09:27:39 -0400] dantleech: so I guess all I need is the same for idmapd
[2013-10-25 09:27:50 -0400] dantleech: it is starting to become clear :)
[2013-10-25 09:30:54 -0400] mc_fail: hmm, chef-server-ctl reconfigure hangs at   * ruby_block[supervise_rabbitmq_sleep] action run
[2013-10-25 09:31:15 -0400] mc_fail: where i can find some debug information about it?
[2013-10-25 09:31:19 -0400] mc_fail: what it means?
[2013-10-25 09:35:02 -0400] s2r2: mc_fail: got some other rabbitmq running already?
[2013-10-25 09:35:52 -0400] s2r2: mc_fail: it means that the chef-solo inside of chef-server-ctl has linked the rabbitmq sv directory into the service directory (of the embedded runit) and is not waiting for the service to be started by the supervisor (runit)
[2013-10-25 09:36:23 -0400] s2r2: mc_fail: if it hangs forever, the service cannot be started somewhere in /var/log/chef-server you will find details
[2013-10-25 09:37:24 -0400] mc_fail: s2r2 it habgs forever, but /var/log/chef-server is empty
[2013-10-25 09:37:54 -0400] s2r2: mc_fail: have a look at /opt/chef-server/service/rabbitmq
[2013-10-25 09:38:09 -0400] s2r2: for something like logs/current
[2013-10-25 09:38:49 -0400] mc_fail: [root@chef ~]# tree /var/log/chef-server/
[2013-10-25 09:38:50 -0400] mc_fail: /var/log/chef-server/
[2013-10-25 09:38:51 -0400] mc_fail:  rabbitmq
[2013-10-25 09:38:51 -0400] mc_fail: 1 directory, 0 files
[2013-10-25 09:40:26 -0400] mc_fail: it looks like problem in a /opt/chef-server/embedded/cookbooks/runit/recipes/default.rb, it contains string 'when "redhat","centos","rhel","scientific" ', but for me it fedora
[2013-10-25 09:40:42 -0400] mc_fail: how does case node["platform"]?
[2013-10-25 09:40:50 -0400] mc_fail: it cat some filse in etc?
[2013-10-25 09:40:57 -0400] mfridh: it should probably have used platform_family instead.
[2013-10-25 09:41:41 -0400] mfridh: platform is an ohai attribute
[2013-10-25 09:42:22 -0400] s2r2: hmm weird, the chef-server cookbook actually supports fedora: https://github.com/opscode-cookbooks/chef-server/blob/master/metadata.rb   so I'd expect this to work
[2013-10-25 09:43:33 -0400] s2r2: https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/runit/recipes/default.rb  < this defaults to include_recipe "runit::sysvinit", which is probably ok so, no bug per se.
[2013-10-25 09:44:44 -0400] mc_fail: hmm, when i added "fedora" and changed node['platform_version'] to /^16/ it works great, but now it have a new errors about a /etc/init folder
[2013-10-25 09:45:12 -0400] s2r2: mc_fail: could you do a "netstat -lnp | grep 5672", please? ;)
[2013-10-25 09:45:33 -0400] mc_fail: s2r2 no, it doesnt return any
[2013-10-25 09:45:38 -0400] s2r2: ok
[2013-10-25 09:46:00 -0400] mc_fail: i think now porblem happens just because it fedora have a systemd
[2013-10-25 09:46:10 -0400] mc_fail: so, now i think i can fix it by myself
[2013-10-25 09:47:38 -0400] s2r2: mc_fail: just noticed there's no fedora support for the chef server download options @ opscode.com/chef/install  now I'm a little confused.
[2013-10-25 10:30:25 -0400] mc_fail: s2r2 yes, it fedora not supported, but i don't know the reason why chef shoudn't work on fedora, it the same linux and it have the same librares
[2013-10-25 10:32:05 -0400] bcave: another attribute-related question...
[2013-10-25 10:32:42 -0400] bcave: if I look at the attribute of a node, say node[:cookbook][:someAttribe], and it's value is unset....
[2013-10-25 10:33:34 -0400] bcave: if I update the role (chef-client has a run_list of role[theRole]) with override_attribute "cookbook" => "someAttribute" => "foobar"....
[2013-10-25 10:33:51 -0400] mc_fail: it looks like i for make chef working in fedora i just need make a systemd recipe
[2013-10-25 10:33:54 -0400] bcave: then after the next chef-client, the attribute of someAttribute on the chef server should reflect as updated?
[2013-10-25 10:35:31 -0400] bcave: it looks like the role is used to determine a run_list when the node is initially provisioned, and thereafter it changes from a role to the run_list from the role....
[2013-10-25 10:36:47 -0400] bcave: no, wait...
[2013-10-25 10:36:49 -0400] bcave: it doesn't...
[2013-10-25 10:36:58 -0400] bcave: it keeps the role, but isn't being updated for some reasdon
[2013-10-25 10:49:30 -0400] bcave: very confused about it
[2013-10-25 10:55:55 -0400] mfridh: any knife solo users here? Does anyone else other than me feel the "cook" command could need a split into two parts - the part that compiles the kitchen and the part that uploads-and-runs on a node? .. that way it could be easily parallelized with whatever tool ... (fabric in my case)... I saw some other things such as sous_chef, but it feels like the two could be separated in knife solo already instead of another tool on top.. what do you 
[2013-10-25 10:58:50 -0400] bcave: great - it was crashing because it was referencing a variable that was set based on attributes....
[2013-10-25 10:59:00 -0400] bcave: Chef::Log.info("The attribute is
[2013-10-25 10:59:08 -0400] bcave: Chef::Log.info("The attribute is " + someAttribute)
[2013-10-25 10:59:28 -0400] bcave: earlier on in the recipe: someAttribute = node[:cookbook][:value]
[2013-10-25 10:59:39 -0400] bcave: chef-client fails while trying to determine the value of someAttribute
[2013-10-25 11:05:55 -0400] bcave: Chef::Log.info("#{someValue}") - prints the correct value
[2013-10-25 11:06:05 -0400] bcave: Chef::Log.info(someValue) - chef-client fails
[2013-10-25 11:07:28 -0400] bcave: type conversions
[2013-10-25 11:38:15 -0400] teukka: mfridh: you can pass `--no-berkshelf` or `--no-librarian` (depending which one you use) to the cook command
[2013-10-25 11:38:47 -0400] mfridh: teukka: but without berkshelf, what does "cook" actually do then? it just uses whatever is in cookbooks/ right then and there?
[2013-10-25 11:39:11 -0400] teukka: mfridh: and call `librarian install` or `berks install --path cookbooks` yourself
[2013-10-25 11:39:35 -0400] mfridh: damn yeah you're right
[2013-10-25 11:39:53 -0400] teukka: mfridh: yes, you just have to take care that the directory where you install is listed in .chef/knife.rb in `cookbook_path` array
[2013-10-25 11:39:54 -0400] mfridh: and guess I could add some very simple convenience commands to that
[2013-10-25 11:48:29 -0400] teukka: mfridh: feel free to ping me if you have more questions of knife-solo. I know too much of it =)
[2013-10-25 11:48:34 -0400] arussel: how does a provider access the templates of his own cookbook ?
[2013-10-25 11:48:56 -0400] teukka: mfridh: and the documentation is obviously lacking
[2013-10-25 11:48:57 -0400] arussel: (shouldn't that be the default)
[2013-10-25 11:49:24 -0400] mfridh: teukka: thanks! I'm just scratching the surface but found it quite useful right now. Trying to port some silly things from fabric that needs to be in CM...
[2013-10-25 11:49:44 -0400] teukka: arussel: I think the default is the using cookbook, as resources/providers are evaluated in that context
[2013-10-25 11:50:21 -0400] teukka: arussel: if you want the defining cookbook, you have to use `cookbook` attribute
[2013-10-25 11:50:34 -0400] arussel: teukka: thanks
[2013-10-25 12:02:37 -0400] mc_fail: what the difference between a postgresql in chief-server package and a stock postgresql?
[2013-10-25 12:12:49 -0400] arussel: not sure many people install 'stock postgres' anymore, package are so easy.
[2013-10-25 12:20:51 -0400] GeoffC_: anybody good with connecting knife to vsphere?  Having trouble with the intial credentials
[2013-10-25 12:32:37 -0400] GeoffC_: anybody good with connecting knife to open chef server?
[2013-10-25 12:39:48 -0400] midnite-chef: hi guys, how do I do bash call that accepts input interaction?
[2013-10-25 12:40:10 -0400] arussel: to interact with who ? how ?
[2013-10-25 12:40:46 -0400] midnite-chef: that asks for input/interaction from user. Asks for path-to-install, then 'y/n'
[2013-10-25 12:42:16 -0400] arussel: which user ? how do you run chef-client ?
[2013-10-25 12:42:40 -0400] midnite-chef: chef-solo
[2013-10-25 12:43:30 -0400] midnite-chef: need something like "bash 'run installer'"...
[2013-10-25 12:44:41 -0400] arussel: I'm not sure chef is meant to be run in interactive mode (apart from debugging), you might want to look into another tool.
[2013-10-25 12:51:04 -0400] midnite-chef: was going for automated input. The installer's the one asking for input
[2013-10-25 12:51:59 -0400] jonlives: midnite-chef: try expect: http://linux.die.net/man/1/expect
[2013-10-25 12:52:50 -0400] dmdeklerk: midnite-chef: cant you pass a parameter like -y or --force and --path=foo
[2013-10-25 12:53:42 -0400] midnite-chef: nope
[2013-10-25 12:53:47 -0400] dmdeklerk: bummer
[2013-10-25 12:55:08 -0400] arussel: even ssh let you work without user input
[2013-10-25 12:56:55 -0400] midnite-chef: arussel, I'm not getting you
[2013-10-25 12:58:07 -0400] arussel: midnite-chef: I've misunderstood your problem, I thought you wanted to run chef with user input, not that you were trying to work around a command line that needed user input.
[2013-10-25 12:58:48 -0400] midnite-chef: From a recipe
[2013-10-25 12:59:02 -0400] midnite-chef: yep, bummer :D
[2013-10-25 13:00:39 -0400] GeoffC_: can anyone help me connect a windows chef workstation to an open source ubuntu chef server
[2013-10-25 13:07:13 -0400] arussel: I've got a resources/default.rb with in it: "attribute :app_parameters, :kind_of => Array, default => []", but when running the resource, I've got: undefined method `app_parameters' for Chef::Resource::JavaWrapper
[2013-10-25 13:07:20 -0400] arussel: any idea what could be wrong ?
[2013-10-25 13:07:56 -0400] midnite-chef: is there a metadata.rb/json generator which reverses all attributes and recipes?
[2013-10-25 13:24:46 -0400] gchristensen: midnite-chef: reverses?
[2013-10-25 13:25:19 -0400] midnite-chef: not sure what's it called. But something that generates a metadata from your current cookbook
[2013-10-25 14:10:33 -0400] mfridh: teukka: guess next thing I'm looking for is a way to pass berkshelf options from knife solo. for example to have berkshelf do the equivalent of berks install --without <group>
[2013-10-25 14:11:04 -0400] olesku: Hello. What is the best way to change the root password using chef ?
[2013-10-25 14:13:14 -0400] mfridh: teukka: actually nevermind, I don't need that right now... thought I did but no.
[2013-10-25 14:13:32 -0400] teukka: mfridh: I thought you just skipped using the integration ;)
[2013-10-25 14:13:44 -0400] mfridh: not quite yet :)
[2013-10-25 14:14:25 -0400] teukka: mfridh: but anyway, currently there is no way to pass other options than the target directory. sorry
[2013-10-25 14:15:44 -0400] mfridh: but I will do something, either run separate berks install, or add a knife solo preheat
[2013-10-25 14:15:58 -0400] mfridh: :-D
[2013-10-25 14:18:08 -0400] teukka: mfridh: please open an issue in the github project if you think other options should be supported
[2013-10-25 14:18:33 -0400] mfridh: sure thing, as soon as this works out :)
[2013-10-25 14:50:46 -0400] judd7: [o__o]: help bangmotivate
[2013-10-25 14:50:46 -0400] [o__o]: Notifies people of the excellent work they are doing.
[2013-10-25 14:50:48 -0400] [o__o]: More details: https://botbot.me/freenode/chef/help/#bangmotivate
[2013-10-25 14:55:40 -0400] bean: your bot, judd7?
[2013-10-25 14:55:43 -0400] noahmehl: Hey all!  I'm trying to make a cookbook for pbis-open
[2013-10-25 14:55:54 -0400] noahmehl: and they don't have a apt or yum repo
[2013-10-25 14:56:04 -0400] noahmehl: so, I have to download and extract the packages manually
[2013-10-25 14:56:11 -0400] noahmehl: except I want to make the install idempotent
[2013-10-25 14:56:23 -0400] noahmehl: so, I want to first check to see if the package already exists in dpkg or something
[2013-10-25 14:56:32 -0400] noahmehl: does anyone have a code reference for such a thing?
[2013-10-25 14:56:45 -0400] bean: noahmehl: does it still come as a .deb?
[2013-10-25 14:56:48 -0400] noahmehl: yes
[2013-10-25 14:56:49 -0400] noahmehl: bean:
[2013-10-25 14:57:00 -0400] bean: http://docs.opscode.com/resource_dpkg_package.html
[2013-10-25 14:57:00 -0400] bean: :)
[2013-10-25 14:57:02 -0400] noahmehl: so, I'm able to download, extract and install the package from a file
[2013-10-25 14:57:11 -0400] bean: you can use source.
[2013-10-25 14:57:12 -0400] bean: in that.
[2013-10-25 14:57:13 -0400] noahmehl: bean: I have that part working
[2013-10-25 14:57:29 -0400] bean: ah, some things post package install that you modify?
[2013-10-25 14:57:29 -0400] noahmehl: but, I want to check to see if the package is already installed before trying to download and install it
[2013-10-25 14:57:34 -0400] noahmehl: no that too
[2013-10-25 14:57:54 -0400] noahmehl: like, I don't want every machine to download and cache that archive
[2013-10-25 14:57:58 -0400] noahmehl: every time they reboot
[2013-10-25 14:58:03 -0400] noahmehl: because chef cache is in /tmp
[2013-10-25 14:58:04 -0400] noahmehl: right?
[2013-10-25 14:58:46 -0400] mattray: noahmehl: notify the dpkg_package from the remote_file call
[2013-10-25 14:58:51 -0400] bean: ^
[2013-10-25 14:59:00 -0400] mattray: dpkg_package only gets called when the file is downloaded
[2013-10-25 14:59:07 -0400] noahmehl: mattray: but that's the thing
[2013-10-25 14:59:10 -0400] noahmehl: I don't want to download the file
[2013-10-25 14:59:16 -0400] mattray: the cache is /var/chef/cache
[2013-10-25 14:59:22 -0400] mattray: write it out there
[2013-10-25 14:59:27 -0400] noahmehl: mattray
[2013-10-25 14:59:32 -0400] noahmehl: still, i want to check in dpkg for the package
[2013-10-25 14:59:34 -0400] mattray: Chef::Config[:file_cache_path]
[2013-10-25 14:59:36 -0400] noahmehl: before I download and install
[2013-10-25 14:59:50 -0400] noahmehl: is that super weird in chef?
[2013-10-25 15:00:05 -0400] mattray: then your conditional will probably need to shell_out to "dpkg -l package"
[2013-10-25 15:00:19 -0400] mattray: and use that as a not_if in your remote_file
[2013-10-25 15:00:20 -0400] noahmehl: mattray: right!
[2013-10-25 15:00:29 -0400] noahmehl: I was hoping for some help with that
[2013-10-25 15:00:51 -0400] mattray: http://docs.opscode.com/chef/resources.html#not-if-examples
[2013-10-25 15:00:56 -0400] allaire: Hi, anybody use the rbenv cookbook?
[2013-10-25 15:01:23 -0400] jmartin: allaire: yes
[2013-10-25 15:01:31 -0400] mattray: noahmehl: check the exit code for dpkg -l, it's probably 0 or 1
[2013-10-25 15:01:36 -0400] noahmehl: mattray: perfect!
[2013-10-25 15:01:37 -0400] mattray: so it's safe to use in the not_if
[2013-10-25 15:01:42 -0400] noahmehl: mattray: actually
[2013-10-25 15:01:44 -0400] allaire: jmartin: The RiotGames one?
[2013-10-25 15:01:49 -0400] noahmehl: how do you find out the exit code for something
[2013-10-25 15:01:56 -0400] noahmehl: this is a general linux question that i've always had
[2013-10-25 15:02:10 -0400] mattray: noahmehl: the not_if is looking for it automatically, but from shell it's $?
[2013-10-25 15:02:18 -0400] mattray: so "ls; echo $?"
[2013-10-25 15:02:24 -0400] mattray: and you'll see "1"
[2013-10-25 15:02:34 -0400] jmartin: allaire: i believe so yes, it has some the lwrps
[2013-10-25 15:02:39 -0400] jmartin: -some
[2013-10-25 15:02:44 -0400] noahmehl: mattray: PERFECT!
[2013-10-25 15:02:47 -0400] noahmehl: thanks so much!
[2013-10-25 15:02:52 -0400] mattray: err, you'll see 0 :)
[2013-10-25 15:02:54 -0400] noahmehl: mattray: you're the man!
[2013-10-25 15:02:56 -0400] noahmehl: it's a 0
[2013-10-25 15:02:59 -0400] mattray: heh
[2013-10-25 15:02:59 -0400] noahmehl: i understand now :)
[2013-10-25 15:03:06 -0400] noahmehl: mattray: are you with opscode?
[2013-10-25 15:03:06 -0400] mattray: 0 is good, anything else is bad
[2013-10-25 15:03:11 -0400] mattray: yup
[2013-10-25 15:03:31 -0400] allaire: jmartin: Yeah, I was wondering, by default it installs rubies in /opt using the rbenv user, did you keep that setup? I'm currently doing all my work using a 'deployer' user
[2013-10-25 15:04:18 -0400] jmartin: allaire: yes, my use case wasnt too exotic so i wanted to provide the various versions to all users
[2013-10-25 15:04:56 -0400] allaire: jmartin: So when you change ruby version, you always sudo su rbenv and use rbenv CLI from there?
[2013-10-25 15:04:58 -0400] noahmehl: mattray: no dice
[2013-10-25 15:05:02 -0400] noahmehl: dpkg -l pbis-open
[2013-10-25 15:05:05 -0400] noahmehl: still returns 0
[2013-10-25 15:05:12 -0400] noahmehl: even though it's not installed :(
[2013-10-25 15:05:16 -0400] noahmehl: ok
[2013-10-25 15:05:21 -0400] noahmehl: let me look into this for a bit
[2013-10-25 15:05:52 -0400] mattray: you could probably get away with using grep
[2013-10-25 15:06:24 -0400] noahmehl: mattray: god it
[2013-10-25 15:06:28 -0400] noahmehl: dpkg -s pbis-open; echo $?
[2013-10-25 15:06:29 -0400] noahmehl: *got it
[2013-10-25 15:06:32 -0400] noahmehl: -s not -l
[2013-10-25 15:06:33 -0400] noahmehl:  :)
[2013-10-25 15:06:48 -0400] mattray: you don't want the echo $? in your not_if block
[2013-10-25 15:06:56 -0400] mattray: that's just for you
[2013-10-25 15:06:57 -0400] noahmehl: mattray: yeah, I got that ;)
[2013-10-25 15:07:02 -0400] jmartin: allaire: if i remember correctly, we dont have to do that, i set the global version then just use rbenv from whatever user to set a local if i need it
[2013-10-25 15:07:50 -0400] allaire: jmartin: Got it, and what do you do if you want to change the global version?
[2013-10-25 15:09:15 -0400] itisit: Start two rabbitmq nodes on same server, do they share same rabbit.config file?
[2013-10-25 15:16:04 -0400] mc_fail: how does it possible to prepare a node in fully isolated infrastructure, without a internet access?
[2013-10-25 15:16:20 -0400] jmartin: allaire: edit your chef recipe/attribute (if you drive it that way)
[2013-10-25 15:16:28 -0400] CPS: i've created a role using the web interface. how do i get the json file to my workstation?
[2013-10-25 15:16:51 -0400] mc_fail: hmm...
[2013-10-25 15:19:44 -0400] midnite-chef: hi, what's the proper way to upgrade/install new ruby version on system? Trying to do some multi rails apps with different versions.
[2013-10-25 15:21:10 -0400] dmdeklerk: midnite-chef: rbenv, rvm or chruby
[2013-10-25 15:21:53 -0400] midnite-chef: i tried rbenv,rvm... it breaks the chef
[2013-10-25 15:22:19 -0400] midnite-chef: I may be doing it wrong, anyone got a helpful docs? I've tried a lot and failed :(
[2013-10-25 15:22:44 -0400] dmdeklerk: just use the rbenv cookbook or chruby cookbook on the community site
[2013-10-25 15:22:51 -0400] noahmehl: mattray: I decided to use grep commands
[2013-10-25 15:23:08 -0400] noahmehl: mattray: actually
[2013-10-25 15:23:13 -0400] noahmehl: I can do dpkg -s
[2013-10-25 15:23:18 -0400] noahmehl: to see if the package is installed
[2013-10-25 15:23:28 -0400] noahmehl: but, really, I should check to see what version is installed
[2013-10-25 15:23:34 -0400] midnite-chef: dmdeklerk, thanks. I'll try again.
[2013-10-25 15:23:37 -0400] noahmehl: and then upgrade if the version number is lower
[2013-10-25 15:23:42 -0400] noahmehl: do people do that
[2013-10-25 15:23:50 -0400] noahmehl: or, generally, chef recipes only install if missing
[2013-10-25 15:23:53 -0400] noahmehl: ?
[2013-10-25 15:24:17 -0400] tcate: generally you would just pull the file down and do dpkg_package which would update if appropiate, that would dl the file at least once on every server though
[2013-10-25 15:29:49 -0400] noahmehl: tcate: well, I figure out how to determine whether or not to download the file
[2013-10-25 15:29:55 -0400] noahmehl: based on whether or not the package is installed
[2013-10-25 15:30:03 -0400] mc_fail: why when i trying create a new coockbook on my workstation with 'knife cookbook create' i recive error ERROR: Errno::EACCES: Permission denied - /var/chef
[2013-10-25 15:30:41 -0400] mc_fail: i don't want do anything from root on my local machine, i just want create a coockbook on my workstation and upload it to server
[2013-10-25 15:30:42 -0400] noahmehl: the question is that when specifying the version in the attributes for the cookbook, that the cookbook will upgrade the package to the specified version if that version is higher than the installed version
[2013-10-25 15:30:52 -0400] noahmehl: I'm wondering what people general expect the cookbook to do
[2013-10-25 15:31:00 -0400] noahmehl: I think this may be more of an opinion
[2013-10-25 15:31:52 -0400] tcate: I would expect it to upgrade, but many cookbooks let you set a verion attribute to pin your package
[2013-10-25 15:31:59 -0400] tcate: version
[2013-10-25 15:32:06 -0400] dmdeklerk: mc_fail: did you set cookbook_path in knife.rb?
[2013-10-25 15:32:30 -0400] mc_fail: dmdeklerk i though no.
[2013-10-25 15:33:26 -0400] dmdeklerk: mc_fail: i believe /var/chef is the default unless you set something like "cookbook_path ["#{current_dir}/../cookbooks"]" in knife.rb
[2013-10-25 15:33:27 -0400] mc_fail: *thought
[2013-10-25 15:34:51 -0400] mc_fail: dmdeklerk thank you
[2013-10-25 15:37:17 -0400] mc_fail: and when i'm execute a knife bootstrap on workstation, workstation doing bootstrap directly on node, or just quering a new bootstrap task on the server?
[2013-10-25 15:37:48 -0400] mc_fail: (sorry for my terrible engish, i don't know how to explain my qestion better)
[2013-10-25 15:40:12 -0400] dmdeklerk: Maybe explain what you run where, what you expect and what is returned.. Dont understand your question
[2013-10-25 15:40:49 -0400] cwj: when you invoke 'knife bootstrap you are initiating an ssh session between the system where you issue the knife command and the node you indicate for bootstrapping
[2013-10-25 15:41:14 -0400] cwj: the chef-server doesnt become involved until the bootstrap has installed chef and started a chef-client run
[2013-10-25 15:41:15 -0400] mc_fail: cwj thank you
[2013-10-25 15:41:56 -0400] cwj: no problem
[2013-10-25 15:42:25 -0400] cwj: the bootstrap process uses templates to generate scripts, the default bootstrap script template is here https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-10-25 15:42:43 -0400] cwj: so you can get an idea of what is happening on the remote node during bootstrap
[2013-10-25 15:43:04 -0400] cwj: and you can also write your own templates if you find the process needs to be modified for your needs
[2013-10-25 15:43:05 -0400] mc_fail: so, i can install a new chef node only from workstation with knife?
[2013-10-25 15:43:46 -0400] cwj: yes, but if you look at that script template i think youll see where it starts chef-client, so at that point the chef-server would come into play
[2013-10-25 15:48:28 -0400] mc_fail: hmm, great but problem that me and other engineers does not have direct network access to nodes, and i just thought chef have some spetial mechanism for deploying nodes
[2013-10-25 15:50:45 -0400] noahmehl: mattray: can I still do not_if for include_recipe?
[2013-10-25 15:51:30 -0400] phantasm66: Question:  can a helper module i created (in libraries/) to do some node leg work on a node be included in an attributes file? (my goal is to set a node attribute based on what my module returns)
[2013-10-25 15:51:53 -0400] mattray: noahmehl: not_if goes inside a resource
[2013-10-25 15:52:05 -0400] mattray: noahmehl: you can just use Ruby around an include_recipe
[2013-10-25 15:52:14 -0400] mattray: if foo
[2013-10-25 15:52:17 -0400] mattray: include_recipe
[2013-10-25 15:52:19 -0400] mattray: end
[2013-10-25 15:52:28 -0400] mattray: or unless or whatever
[2013-10-25 15:52:43 -0400] noahmehl: can foo be the command?
[2013-10-25 15:52:49 -0400] noahmehl: like:
[2013-10-25 15:53:03 -0400] noahmehl: if "dpkg -s pbis-open"
[2013-10-25 15:53:06 -0400] mattray: yeah you'll want to use mixlib::shellout
[2013-10-25 15:53:07 -0400] noahmehl: include_recipe
[2013-10-25 15:53:08 -0400] noahmehl: end
[2013-10-25 15:53:12 -0400] mattray: and pass around the output
[2013-10-25 15:53:19 -0400] mattray: lemme find an example
[2013-10-25 15:54:01 -0400] noahmehl: mattray: thanks!!!!
[2013-10-25 15:54:46 -0400] mattray: noahmehl: https://github.com/opscode-cookbooks/drbd/blob/master/recipes/pair.rb#L49
[2013-10-25 15:54:55 -0400] mattray: it uses chef::shell_out which is deprecated
[2013-10-25 15:55:06 -0400] mattray: in favor of mixlib::shell_out
[2013-10-25 15:55:13 -0400] mattray: but you see the system call and the output is captured
[2013-10-25 15:55:34 -0400] mattray: overview has stdout, stderr, exit_code
[2013-10-25 15:56:15 -0400] dmdeklerk: phantasm66: i believe so yes, maybe require_relative
[2013-10-25 15:56:30 -0400] phantasm66: also, i guess another question is would library helpers get loaded before node attributes get set?
[2013-10-25 15:57:33 -0400] dmdeklerk: phantasm66: if you require_relative before you assign a value to default[foo] = x, i guess so
[2013-10-25 15:57:39 -0400] allaire: jmartin: Still around?
[2013-10-25 15:58:05 -0400] noahmehl: mattray: http://pastie.org/8430122
[2013-10-25 15:58:09 -0400] noahmehl: why is that any different
[2013-10-25 15:58:14 -0400] noahmehl: I guess I'm totally confused
[2013-10-25 15:58:18 -0400] noahmehl: thanks for all of your help btw
[2013-10-25 15:58:29 -0400] mattray: noahmehl: so include_recipe isn't a resource
[2013-10-25 15:58:33 -0400] noahmehl: ok
[2013-10-25 15:58:38 -0400] phantasm66: @dmdeklerk: OK.. is what i am attempting to do an anti-pattern? or considered *poor* design?
[2013-10-25 15:58:38 -0400] mattray: 1 sec
[2013-10-25 15:58:54 -0400] cwj: i would avoid trying to access node attributes inside library functions
[2013-10-25 15:59:14 -0400] cwj: seems like you could get bit by it easily
[2013-10-25 15:59:36 -0400] cwj: but you could, for example, pass the node object to a function and then act on that
[2013-10-25 15:59:51 -0400] phantasm66: i like to keep *hacky* shit out of my chef cookbooks.. and while this feels ok, i cannot find opscode related examples out in the wild (github, etc).. so i'm just making sure i am not trying to do something crappy (design-wise)
[2013-10-25 16:00:07 -0400] dmdeklerk: phantasm66: i think its more logical to load a module in a recipe and set your attribute overrides there, the point of attribute files is that they are kinda static
[2013-10-25 16:01:56 -0400] phantasm66: right.. ok.. i have seen several examples (from opscode folks) with 'case' and conditional statements to set node attributes.. just didn't know how far that type of design extends before it's just hacky ;)
[2013-10-25 16:02:20 -0400] phantasm66: @dmdeklerk: thanks!
[2013-10-25 16:02:36 -0400] noahmehl: mattray: http://pastie.org/8430131
[2013-10-25 16:02:39 -0400] noahmehl: shouldn't that work?
[2013-10-25 16:02:54 -0400] dmdeklerk: phantasm66: those are on ohai attributes, like platform
[2013-10-25 16:04:29 -0400] phantasm66: @dmdeklerk: right.. ok.. that seems logical then
[2013-10-25 16:05:07 -0400] phantasm66: I'll rethink what i am trying to actually do here and make it more cheffy
[2013-10-25 16:05:22 -0400] phantasm66: thanks for your feedback
[2013-10-25 16:05:37 -0400] dmdeklerk: your wellcome
[2013-10-25 16:05:48 -0400] noahmehl: mattray: sorry, how do I wrap include_recipe inside another resource?
[2013-10-25 16:06:35 -0400] mattray: noahmehl: https://gist.github.com/7157147
[2013-10-25 16:07:06 -0400] mattray: I don't think you can put include_recipe inside a resource, unless it's a ruby_block
[2013-10-25 16:07:18 -0400] noahmehl: mattray: got it
[2013-10-25 16:07:26 -0400] noahmehl: let me review for a sec
[2013-10-25 16:11:05 -0400] noahmehl: mattray: thank you!
[2013-10-25 16:12:28 -0400] noahmehl: mattray: do I need to include a cookbook for mixlib/shell_out?
[2013-10-25 16:13:24 -0400] dJustin: Is there any wayt ot re-build a node's attribute list, without a chef-client run?
[2013-10-25 16:13:29 -0400] noahmehl: mattray: nvm, I think I found the answer to that
[2013-10-25 16:15:07 -0400] mattray: noahmehl: it's included with chef
[2013-10-25 16:15:10 -0400] noahmehl: oh
[2013-10-25 16:15:16 -0400] noahmehl: i'm getting an error when trying to use it
[2013-10-25 16:16:09 -0400] noahmehl: http://pastie.org/8430180
[2013-10-25 16:17:29 -0400] noahmehl: mattray: nvm, removed the require line
[2013-10-25 16:18:19 -0400] phantasm66: is there any way to test nested node attributes with ohai? like see the format/ordering of what is returned by something like node[:network][:interfaces]?
[2013-10-25 16:18:40 -0400] noahmehl: mattray: valid_exit_codes?
[2013-10-25 16:18:51 -0400] noahmehl: and not exit_status?
[2013-10-25 16:19:00 -0400] phantasm66: obviously i cannot see the format on a node by manually running 'ohai network interfaces'
[2013-10-25 16:19:17 -0400] phantasm66: as ohai doesn't do nested attrs (AFAIK)
[2013-10-25 16:19:21 -0400] noahmehl: or returns?
[2013-10-25 16:19:29 -0400] Mayumi: how the fuck do u use this shit
[2013-10-25 16:19:29 -0400] Mayumi: with AWS
[2013-10-25 16:19:30 -0400] Mayumi: lol
[2013-10-25 16:19:57 -0400] mattray: noahmehl: you can override which exit codes are successes
[2013-10-25 16:20:18 -0400] mattray: it might be easiest just to fire up irb or pry and use it
[2013-10-25 16:20:30 -0400] mattray: https://github.com/opscode/mixlib-shellout
[2013-10-25 16:20:50 -0400] mattray: I'm usually just looking for stuff in stdout
[2013-10-25 16:21:04 -0400] mattray: don't remember the exit code stuff
[2013-10-25 16:22:06 -0400] noahmehl: mattray: my bad
[2013-10-25 16:22:08 -0400] noahmehl: it's exitstatus
[2013-10-25 16:22:10 -0400] noahmehl: not exit_status
[2013-10-25 16:22:16 -0400] noahmehl: https://github.com/opscode/mixlib-shellout/blob/master/lib/mixlib/shellout/unix.rb#L31
[2013-10-25 16:22:17 -0400] noahmehl: right?
[2013-10-25 16:22:33 -0400] mattray: if the code says so :)
[2013-10-25 16:22:35 -0400] noahmehl: haha
[2013-10-25 16:24:38 -0400] allaire: if I wrap a cookbook, should I create my own attributes namespace, i.e default['org_rbenv']['my_setting'] or I can dirrectly create the attribute using the wrapped cookbook name, i.e default['rbenv']['my_setting']
[2013-10-25 16:25:35 -0400] ssd7: Ohai Chefs
[2013-10-25 16:30:25 -0400] noahmehl: mattray: I think I have it now! :)
[2013-10-25 16:30:27 -0400] noahmehl: love chef!
[2013-10-25 16:32:28 -0400] mattray: glad to hear it
[2013-10-25 16:40:45 -0400] noahmehl: mattray: https://github.com/combined-public-communications/pbis-open
[2013-10-25 16:40:50 -0400] noahmehl: I've got it installing :)
[2013-10-25 16:40:57 -0400] noahmehl: now I just got's to configure :)
[2013-10-25 16:45:02 -0400] mattray: cool
[2013-10-25 17:19:13 -0400] allaire: Anybody can explain me why run list per environements are in roles/ and attributes per environements are in environements/ ?
[2013-10-25 17:23:00 -0400] noahmehl: mattray: is there a document about submitting a cookbook to opscode community
[2013-10-25 17:23:06 -0400] noahmehl: more like style and expectations
[2013-10-25 17:23:52 -0400] mattray: noahmehl: not off the top of my head. You want to take a look at tools like foodcritic for style
[2013-10-25 17:24:06 -0400] noahmehl: mattray: cool
[2013-10-25 17:24:08 -0400] mattray: but to submit to the community site you "knife cookbook site share..."
[2013-10-25 17:24:16 -0400] noahmehl: I just want the cookbook to be up to community standards
[2013-10-25 17:24:46 -0400] mattray: I think there's one written by the community somewhere on github
[2013-10-25 17:24:51 -0400] mattray: a standards guide
[2013-10-25 17:25:10 -0400] mattray: I mean, I know there is one, I don't know where it is
[2013-10-25 17:32:28 -0400] wdilly: Hi folks, I am getting the following error in my chef-client runs: "Encoding::UndefinedConversionError: "\x8B" from ASCII-8BIT to UTF-8 " I have gone through the process of converting all of my recipes to ascii using iconv but the error is still there.  This even happens on EMPTY recipes. How can i determine what text this is choking on???? Full stack trace: http://fpaste.org/49507/13827223/
[2013-10-25 17:36:03 -0400] binamov: wdilly this happens when you ruin chef-client? it's hard to tell, since the stacktrace seems to be truncated. can I see the exact command and its entire output?
[2013-10-25 17:36:12 -0400] binamov: s/ruin/run
[2013-10-25 17:37:56 -0400] wdilly: that is the entirety of the stacktrace here is the command i am using
[2013-10-25 17:38:19 -0400] wdilly:  knife bootstrap 172.27.118.119 -r 'role[test]' -i ~/.ssh/test.pem -x ubuntu --sudo --node-name test123434
[2013-10-25 17:39:03 -0400] wdilly: that is /var/chef/cache/chef-stacktrace on the failing chef-client
[2013-10-25 17:44:07 -0400] hoerde: I'm trying to get a list of cookbooks for an environment via knife rest api
[2013-10-25 17:44:08 -0400] hoerde: rest.post_rest("environments/#{env}/cookbook_versions")
[2013-10-25 17:44:48 -0400] hoerde: this is returning every cookbook in the chef server, what am I doing wrong?
[2013-10-25 17:46:41 -0400] binamov: wdilly are you able to bootstrap without assigning a run list with the -r argument?
[2013-10-25 17:47:37 -0400] binamov: hoerde afaik all cookbooks are available to all environments within the same org; do you have cookbook version pinning as part of your environments?
[2013-10-25 17:48:21 -0400] wdilly: binamov, how should i specify the run list?
[2013-10-25 17:49:02 -0400] binamov: wdilly i'm trying to break up your issue into smaller chunks; if we can bootstrap successfully, then we can add a run-list later
[2013-10-25 17:49:09 -0400] hoerde: binamov; yes, we are pinning cookbooks
[2013-10-25 17:51:25 -0400] hoerde: what I'm trying to do is list all of the cookbook versions (including transitive dependencies) for an environment, is there an easy way to do this?
[2013-10-25 17:51:27 -0400] arussel: where can I find chef-client code ?
[2013-10-25 17:51:40 -0400] wdilly: binamov, 1 sec while i spin up fresh Virtualmachines
[2013-10-25 17:51:56 -0400] arussel: hoerde: was the version you've got from the command wrong ?
[2013-10-25 17:52:30 -0400] dgarstang: Why is this http://pastebin.com/NmZwx9gM not causing /var/lib/rabbitmq to be created?
[2013-10-25 17:52:58 -0400] hoerde: arussel, it returned all cookbooks in the chef server, so yes, I would say the versions are wrong
[2013-10-25 17:54:02 -0400] binamov: hoerde you want to see cookbook_versions: list that comes out of knife environment show foo, via an api?
[2013-10-25 17:54:37 -0400] hoerde: yes
[2013-10-25 17:55:46 -0400] dgarstang: Anyone? http://pastebin.com/NmZwx9gM
[2013-10-25 17:57:22 -0400] arussel: hoerde: it returned all version of a cookook, even if you've specified a version in your env ?
[2013-10-25 17:58:01 -0400] dmdeklerk: dgarstang: Permission denied ? Why do you need /var/lib/rabbitmq as home and not /home/rabbitmq?
[2013-10-25 17:58:02 -0400] arussel: hoerde: or you believe it is wrong because it returned a cookbook that wasn't mention in your env ?
[2013-10-25 17:58:04 -0400] wdilly: hmmm depending on where i bootstrap a client from it downloads different versions of chef-client is that because of the version of knife i happen to be using?
[2013-10-25 17:58:29 -0400] dgarstang: dmdeklerk: cuz I need it to fit in with what the package will do
[2013-10-25 17:58:59 -0400] arussel: wdilly: might depends also if you're using vagrant for your vm
[2013-10-25 17:59:06 -0400] dmdeklerk: dgarstang: oke just brainstorming here. dunno
[2013-10-25 17:59:28 -0400] dgarstang: dmdeklerk: no worries
[2013-10-25 18:00:12 -0400] wdilly: arussel, I am using eucalyptus/kvm
[2013-10-25 18:00:51 -0400] wdilly: binamov, it failed even if i give it no run list with the same error Encoding::UndefinedConversionError: "\x8B" from ASCII-8BIT to UTF-8
[2013-10-25 18:01:53 -0400] binamov: wdilly cool. can i see the command with its entire output; also maybe check what encoding your knife.rb is?
[2013-10-25 18:02:45 -0400] hoerde: arussel: I have all cookbooks listed in env pinned to a specific version, yet the response is all of the cookbooks in the chef repo
[2013-10-25 18:03:55 -0400] arussel: hoerde: the question is: do you have a cookbook at the wrong version ? otherwise, you're output, considering env have access to all cookbook, is ok.
[2013-10-25 18:04:18 -0400] wdilly: binamov, http://fpaste.org/49510/24235138/
[2013-10-25 18:05:23 -0400] hoerde: arrussel: is  rest.get_rest("environments/#{env}/cookbook_versions") suppose to only bring back cookbook versions related to env?
[2013-10-25 18:05:30 -0400] hoerde: arussel: let me verify the versions
[2013-10-25 18:06:44 -0400] arussel: hoerde: I don't think it is, it return all cookbook pinned for the current env
[2013-10-25 18:07:18 -0400] ssd7: hoerde: That endpoint resolves dependencies for a give runlist, it typically takes a POST body that is the run list you are trying to resolve.
[2013-10-25 18:07:27 -0400] wdilly: my knife.rb is ascii test
[2013-10-25 18:07:36 -0400] wdilly: according to the file command, binamov
[2013-10-25 18:07:39 -0400] ssd7: hoerde: Can you describe the information you are trying to get again?
[2013-10-25 18:08:51 -0400] hoerde: ssd7: I'm trying to get all cookbook versions related to an environment listed
[2013-10-25 18:09:18 -0400] hoerde: ssd7: including cookbook dependencies
[2013-10-25 18:11:02 -0400] binamov: wdilly so is mine weird...
[2013-10-25 18:12:29 -0400] ssd7: hoerde: So, "environments/ENV/cookbooks" is probably the closest to that, it gives you all cookbooks available given the environment's constraints I believe
[2013-10-25 18:13:35 -0400] hoerde: ssd7: that is returning all of the cookbooks in chef server as well
[2013-10-25 18:14:56 -0400] binamov: wdilly so it's some character encoding issue perhaps a ' or a space in the command you're running...
[2013-10-25 18:15:34 -0400] ssd7: hoerde: So, by default all cookbooks in the chef server are available in an environment unless their version is specifically constrained
[2013-10-25 18:15:51 -0400] ssd7: hoerde: are you seeing a case where you have a version constraint but versions that don't match that constraint are listed there?
[2013-10-25 18:16:25 -0400] wdilly: binamov, it presents itself from multipe knife workstation (a rhel box and and ubuntu box)
[2013-10-25 18:16:34 -0400] wdilly: binamov, using the same command though
[2013-10-25 18:17:10 -0400] binamov: wdilly u copy pasting the same command? copied the same knife.rb across?
[2013-10-25 18:17:46 -0400] wdilly: binamov, copy pasting the command but no not copying the knife.rb
[2013-10-25 18:17:57 -0400] wdilly: also, this worked for a long while but all of a suddent stopped
[2013-10-25 18:18:24 -0400] binamov: totally weird wdilly ; type out the command manually?
[2013-10-25 18:18:50 -0400] wdilly: i will try
[2013-10-25 18:20:14 -0400] hoerde: ssd7: using pessimistic locking e.g. prsn_frontendapp: ~> 0.2.9
[2013-10-25 18:20:21 -0400] hoerde: ssd7: would that be the cause?
[2013-10-25 18:20:30 -0400] wdilly: binamov, manually typed it... same issue
[2013-10-25 18:20:40 -0400] wdilly: is there a way to get more verbosity in my chef-stacktrace file?
[2013-10-25 18:22:25 -0400] binamov: wdilly check your knife.rb ?
[2013-10-25 18:23:19 -0400] dmdeklerk: wdilly: there is log_level :debug in your knife.rb
[2013-10-25 18:24:02 -0400] wdilly: which is the most verbose?
[2013-10-25 18:24:09 -0400] dmdeklerk: :debug
[2013-10-25 18:25:27 -0400] noahmehl: does anyone know where data bags are stored on chef server?
[2013-10-25 18:25:41 -0400] noahmehl: or, is there an easy way to query for a specific data bag in json?
[2013-10-25 18:25:55 -0400] wdilly: dmdeklerk, binamov thanks
[2013-10-25 18:27:09 -0400] noahmehl: nvm
[2013-10-25 18:27:11 -0400] noahmehl: got it
[2013-10-25 18:29:30 -0400] midnite-kitchen: Is it possible to update databag entries from a node run?
[2013-10-25 18:31:26 -0400] Skeletor1: midnite-kitchen:  no, the node has to have admin privs to update a databag
[2013-10-25 18:32:41 -0400] jsnapp: hoerde: i'm testing this in my own org ... running the following command will always get you a list of all cookbooks in your org that meet the version constraints for the particular environment
[2013-10-25 18:32:42 -0400] jsnapp: knife exec -E 'pp api.get("environments/test/cookbooks")'
[2013-10-25 18:33:24 -0400] midnite-kitchen: Skeletor1, if it does indeed have privs, then possible?
[2013-10-25 18:33:40 -0400] wdilly: hmmm changing my knife.rb from info to debug doesnt seem to incrrease verbosity anywhere
[2013-10-25 18:33:50 -0400] jsnapp: if you have 10 cookbooks in your org and you set version constraints for two cookbooks in the "test" environment then that knife exec command will return a versions that meet the env. constraints for all 10 cookbooks
[2013-10-25 18:35:01 -0400] jsnapp: if no version constraint was set for a particular cookbook then that knife exec command will return the latest version for that cookbook by default
[2013-10-25 18:36:40 -0400] jsnapp: the only time you will see cookbooks missing is if no cookbook version matches the version constraint set in the environment
[2013-10-25 18:37:56 -0400] jsnapp: wdilly: you want to increase verbosity for a chef-client run right? not a knife command?
[2013-10-25 18:38:42 -0400] jsnapp: wdilly: you can run chef-client with '-l debug' to increase verbosity
[2013-10-25 18:39:38 -0400] jsnapp: wdilly: or set 'log_level :debug' in client.rb
[2013-10-25 18:40:50 -0400] wdilly: jsnapp, thanks
[2013-10-25 18:41:06 -0400] jsnapp: np
[2013-10-25 18:41:27 -0400] CPS: i'd like to use templates to generate xml. how do you write them to generate an arbitrary number of elements?
[2013-10-25 18:44:31 -0400] Skeletor1: midnite-kitchen:  You can grant that client admin privs, recommended no, it would seem that taking whatever you need to modify in the  databag and exporting that to attributes would be best.
[2013-10-25 18:49:35 -0400] stormerider: CPS: templates support looping, since you can embed ruby in the erb file
[2013-10-25 18:49:52 -0400] CPS: that'll work, thanks
[2013-10-25 18:51:33 -0400] Guest19756: I'm having an issue with a Chef recipe. When I include the line "include_recipe 'mysql::server'" I get the error "uninitialized constant Chef::Recipe::Opscode", and I've found very little about it searching around.
[2013-10-25 18:53:11 -0400] Skeletor1: Guest19756: How but you try just : include_recipe "mysql"
[2013-10-25 18:53:54 -0400] Skeletor1: also add depends "mysql" to your cookbooks metadata.rb
[2013-10-25 18:54:24 -0400] jsnapp: Guest19756: the mysql cookbook depends on the openssl cookbook
[2013-10-25 18:54:35 -0400] Guest19756: I've got the openssl cookbook included beforehand
[2013-10-25 18:56:32 -0400] jsnapp: Guest19756: and you uploaded to openssl cookbook to the Chef server so it's available to the node?
[2013-10-25 18:57:10 -0400] Guest19756: well actually i've got it in my cookbooks folder, i'm using kitchen which is using chef-solo
[2013-10-25 18:58:17 -0400] wdilly: what is the purpose of the directory ~/.chef/syntax_check_cache
[2013-10-25 19:00:48 -0400] jsnapp: Guest19756: ah, ok ... did you add "depends 'mysql'" to your cookbook's metadata.rb as Skeletor1 suggested?
[2013-10-25 19:01:01 -0400] dgarstang: Ok, this is weird and annoying. I keep doing berks upload and what I'm seeing is that the VERSION matches, but there are files missing from recipes/
[2013-10-25 19:01:43 -0400] Guest19756: yes, it doesn't seem to like that
[2013-10-25 19:02:01 -0400] Guest19756: i also tried adding depends 'openssl'
[2013-10-25 19:02:44 -0400] Guest19756: skeletor just informed me that mysql will call the depend on openssl though
[2013-10-25 19:02:46 -0400] jsnapp: wdilly: "All files in a cookbook must contain valid Ruby syntax. Use this setting to specify the location in which Knife caches information about files that have been checked for valid Ruby syntax." ... http://docs.opscode.com/config_rb_knife.html  http://docs.opscode.com/config_rb_client.html
[2013-10-25 19:06:06 -0400] Guest19756: It may be a chef-solo issue, but I'm not sure if I can get kitchen to not use it
[2013-10-25 19:06:24 -0400] dgarstang: I just love this berksfile foo. 'Cookbook bc-rabbitmq not found.' except IT IS according to the chef UI
[2013-10-25 19:08:06 -0400] CPS: how do i do calculations in a template file? I'm using each_with_index and i need index+1
[2013-10-25 19:10:38 -0400] CPS: also how do you render " characters?
[2013-10-25 19:12:29 -0400] dgarstang: Arrgh. "Cookbook bc-rabbitmq not found. If you're loading bc-rabbitmq from another cookbook, make sure you configure the dependency in your metadata"
[2013-10-25 19:12:42 -0400] dgarstang: Why would it say that when the UI show's it's there?
[2013-10-25 19:14:20 -0400] dgarstang: knife cookbook list also shows it
[2013-10-25 19:18:40 -0400] dgarstang: WUT!? Seriously? When I try and look at the cookbook now in the UI it's giving me 'ERROR: undefined method `close!' for nil:NilClass'
[2013-10-25 19:20:46 -0400] dgarstang: :(    https://tickets.opscode.com/browse/CHEF-3952
[2013-10-25 19:22:32 -0400] UForgotten: dgarstang: sounds like a good opportunity to provide them with more data to help reproduce
[2013-10-25 19:23:27 -0400] dgarstang: UForgotten: The last comment in that ticket is "If anyone who was experiencing issues with a file could attach a file to reproduce the issue, that would help too"... what does that mean?
[2013-10-25 19:23:29 -0400] bean: dgarstang: i agree with UForgotten. You could provide them more info rather than "WUT!? Seriously?" about it.
[2013-10-25 19:23:47 -0400] dgarstang: bean: seriously, it totally blocks me.
[2013-10-25 19:23:51 -0400] bean: they mean attach whatever file in the cookbook is causing the issue.
[2013-10-25 19:23:54 -0400] UForgotten: ^
[2013-10-25 19:23:59 -0400] UForgotten: to the ticket
[2013-10-25 19:24:02 -0400] dgarstang: bean: How do I know what file is causing the issue?
[2013-10-25 19:24:15 -0400] UForgotten: do you have a stack trace?
[2013-10-25 19:24:25 -0400] dgarstang: UForgotten: its reported by the WEB Ui
[2013-10-25 19:24:41 -0400] bean: so there's probably a stack trace in the server logs
[2013-10-25 19:24:54 -0400] dgarstang: allrighty
[2013-10-25 19:25:56 -0400] hoerde: jsnapp: thanks for the tip
[2013-10-25 19:26:32 -0400] dgarstang: Ok, so I really don't know how to interpret this stack trace
[2013-10-25 19:26:40 -0400] bean: can you pastebin it?
[2013-10-25 19:28:15 -0400] dgarstang: bean: http://pastebin.com/ENNXTqaD
[2013-10-25 19:28:32 -0400] dgarstang: bbiab
[2013-10-25 19:29:46 -0400] bean: dgarstang: is that cookbook a custom written one?
[2013-10-25 19:29:55 -0400] bean: does it have any weird files in files/default?
[2013-10-25 19:55:35 -0400] dgarstang: bean: custom? yes... files in files/default? empty
[2013-10-25 19:56:12 -0400] bean: hm ok
[2013-10-25 19:56:40 -0400] dgarstang: darn it
[2013-10-25 19:58:08 -0400] UForgotten: maybe the local cookbook is out of sync with the chef server somehow. haven't gotten to that point yet with client/server, most of our stuff is chef-solo
[2013-10-25 19:58:37 -0400] dgarstang: UForgotten: Moi? dunno, but I've tried deleting it with knife, hasn't helped
[2013-10-25 19:59:06 -0400] ssd7: COOK code review: https://plus.google.com/hangouts/_/76cpiten1kigffn4rkcrusnqfo
[2013-10-25 20:03:18 -0400] dgarstang: if I try and download the cookbook with knife it hangs on 'Downloading root_files'
[2013-10-25 20:03:26 -0400] dgarstang: ah finally
[2013-10-25 20:04:11 -0400] gchristensen: mattray: may I PM you regarding your pxe cookbook?
[2013-10-25 20:04:19 -0400] dgarstang: This is what a download gets me .... http://pastebin.com/9gh8diKi looks fine?
[2013-10-25 20:04:32 -0400] mattray: gchristensen: sure
[2013-10-25 20:04:43 -0400] dgarstang: ohoh. wait
[2013-10-25 20:04:52 -0400] noahmehl: mattray: does the chef server automatically distribute data bags to all of the clients?
[2013-10-25 20:05:01 -0400] mattray: nope
[2013-10-25 20:05:20 -0400] mattray: only those that request items from it, and only json is passed on the wire, no files
[2013-10-25 20:05:37 -0400] CPS: in this json snippet, i'm passing in the root to a template and iterating over each mesh. how do i access the clients and servers inside each mesh? https://gist.github.com/anonymous/7161018
[2013-10-25 20:06:17 -0400] noahmehl: mattray: so if I do: Chef::EncryptedDataBagItem.load
[2013-10-25 20:06:24 -0400] noahmehl: then it will go get it from the server?
[2013-10-25 20:06:28 -0400] mattray: yes
[2013-10-25 20:06:38 -0400] noahmehl: mattray: also, if I set an override for an attribute in a role
[2013-10-25 20:06:46 -0400] noahmehl: how do I verify that's happening on the client?
[2013-10-25 20:07:12 -0400] mattray: when the chef-client run completes, do a "knife node show foo -a theattributeyoucareabout"
[2013-10-25 20:08:51 -0400] noahmehl: mattray: COOLLL!!!
[2013-10-25 20:09:16 -0400] dgarstang: Ok, we're back to "Cookbook bc-rabbitmq not found. If you're loading bc-rabbitmq from another cookbook, make sure you configure the dependency in your metadata" again which isn't true. I see it in the web UI
[2013-10-25 20:09:18 -0400] noahmehl: mattray: I'm having trouble figuring out the best way to distribute my data bag encryption key
[2013-10-25 20:09:28 -0400] noahmehl: I'm looking at:
[2013-10-25 20:09:29 -0400] noahmehl: http://docs.opscode.com/essentials_data_bags.html
[2013-10-25 20:09:52 -0400] mattray: that's a classic problem
[2013-10-25 20:10:06 -0400] brucelee_: how do you guys implement chef into your infrastructure for servers that are already in production and configured without using chef?
[2013-10-25 20:10:21 -0400] mattray: Chef doesn't have a built-in solution for private key distribution
[2013-10-25 20:10:31 -0400] dgarstang: brucelee_: carefully. :)
[2013-10-25 20:10:31 -0400] brucelee_: dgarstang: haha
[2013-10-25 20:10:34 -0400] Cope: brucelee_: recklessly
[2013-10-25 20:10:37 -0400] brucelee_: LoL
[2013-10-25 20:10:46 -0400] brucelee_: i guess theres no clear way :p
[2013-10-25 20:10:55 -0400] dgarstang: lots of -w
[2013-10-25 20:10:59 -0400] brucelee_: -w?
[2013-10-25 20:11:03 -0400] Cope: brucelee_: a bit at a time; with something very simply first
[2013-10-25 20:11:04 -0400] dgarstang: dry-run
[2013-10-25 20:11:12 -0400] dgarstang: -w and eyeballs
[2013-10-25 20:11:20 -0400] brucelee_: haha
[2013-10-25 20:12:09 -0400] noahmehl: mattray: do you have some examples of what people are doing?
[2013-10-25 20:12:28 -0400] gchristensen: brucelee_: my process is usually: 1) normalize user accounts and keys, 2) timezones, 3) ntp, 4) ssh configurations, 5) other common system daemons, 6) then server-specific stuff
[2013-10-25 20:12:31 -0400] dgarstang: Why would chef client report a cookbook isn't avialble when "knife-us4 cookbook list | grep bc-rabbitmq" == "bc-rabbitmq                0.3.0"
[2013-10-25 20:14:47 -0400] mattray: noahmehl: Chef Vault is what we use, there's also tools like Gazzang's zTrustee
[2013-10-25 20:15:31 -0400] bean: dgarstang: and its in your run list or included by another recipe
[2013-10-25 20:15:52 -0400] noahmehl: mattray: couldn't you just create a cookbook that had the key as a file?
[2013-10-25 20:15:54 -0400] dgarstang: bean: Yah. I believe so.
[2013-10-25 20:16:05 -0400] bean: gonna wanna double check that
[2013-10-25 20:16:14 -0400] mattray: noahmehl: sure, that works as a distribution mechanism
[2013-10-25 20:16:14 -0400] dgarstang: bean: although now I'm back to the previous issue... upload with new version number. version number correct, but files missing on server
[2013-10-25 20:16:25 -0400] bean: what files are missing
[2013-10-25 20:16:28 -0400] mattray: still not great security
[2013-10-25 20:16:41 -0400] dgarstang: bean: updates to files rather. typicall recipes/something
[2013-10-25 20:17:52 -0400] bean: dgarstang: can you pastebin an "ls -laR" of that folder/
[2013-10-25 20:18:33 -0400] dgarstang: bean: I just changed include_recipe "bc-rabbitmq" to include_recipe "bc-rabbitmq::default" (which I know is pointless), ran thor version:bump minor ... and then berks upload -c ~/.berkshelf/config-us4.json ... go to Chef UI... version number has increased, but the change to the recipe is not there. This problem happens all the time
[2013-10-25 20:19:02 -0400] bean: hrmm, odd.
[2013-10-25 20:23:25 -0400] dgarstang: bean: did it twice. it worked 2nd time.
[2013-10-25 20:23:31 -0400] bean: hmm weird.
[2013-10-25 20:23:48 -0400] dgarstang: bean: still cna't find the cookbook tho. *sigh*
[2013-10-25 20:26:12 -0400] brucelee_: gchristensen: helps a lot, thanks for listing that process
[2013-10-25 20:35:15 -0400] dgarstang: at a total loss with chef.
[2013-10-25 20:35:50 -0400] bean: dgarstang: You've literally had more trouble with it than anyone I've ever seen in here :\
[2013-10-25 20:36:01 -0400] bean: I'm not even sure /why/ you're having so much trouble.
[2013-10-25 20:36:03 -0400] dgarstang: bean: *sigh*
[2013-10-25 20:36:14 -0400] bean: (not blaming you at all)
[2013-10-25 20:36:30 -0400] dgarstang: bean: I have an idea. part of the reason is that there's no best practices published
[2013-10-25 20:37:09 -0400] dgarstang: bean: anyone can hack together a cookbook. The real value is documenting the best way to manage them all in a workflow
[2013-10-25 20:37:35 -0400] bean: I think part of the problem with that is that everyone's work flow is different because it's flexible to do it however your team wants to.
[2013-10-25 20:38:34 -0400] dgarstang: coffee time. dead in the water with chef anyway
[2013-10-25 20:39:27 -0400] bean: dgarstang: have you considered using enterprise / hosted chef?
[2013-10-25 20:52:04 -0400] dgarstang: bean: No.
[2013-10-25 20:52:30 -0400] wdilly: how can i get around this and not fubar my chef-server Cannot install package chef-server-11.0.8-1.el6.x86_64. It is obsoleted by installed package chef-server-11.0.4-1.el6.x86_64
[2013-10-25 20:53:58 -0400] troyready: I am not a rhel expert but that sounds like you should rpm -u instead of rpm -i
[2013-10-25 20:55:08 -0400] Cope: wdilly: are there fixes or features you need in 11.0.8 ?
[2013-10-25 20:55:35 -0400] wdilly: Cope I am desperate to fix a problem I cannot explain
[2013-10-25 20:56:28 -0400] Cope: wdilly: ah, and you wonder if upgrading the server will help?
[2013-10-25 20:56:47 -0400] wdilly: Cope, desperate times
[2013-10-25 20:57:06 -0400] Cope: wdilly: how many nodes are you managing with your chef serveR?
[2013-10-25 20:57:12 -0400] anoldhacker: Is Seth around?
[2013-10-25 20:57:26 -0400] anoldhacker: buff-ignore has disappeared off github :(
[2013-10-25 20:57:50 -0400] wdilly: Cope, a eucalyptus private cloud so it depends at any given moment
[2013-10-25 20:59:47 -0400] dgarstang: bean: it's not hard to have issues when you can upload whatever you want to the chef server and it doesn't ever seem to return errors
[2013-10-25 21:00:23 -0400] bean: dgarstang: I've never encountered that with my chef 10 server (3 of them) or my hosted chef account.
[2013-10-25 21:00:32 -0400] freezey_: getting unable to retrieve valid package from opscode
[2013-10-25 21:00:35 -0400] freezey_: on a bootstrap
[2013-10-25 21:01:05 -0400] dgarstang: bean: I accidentally uploaded vagrant disk files... it accepted them as part of the cookbook and then the UI refused to show it
[2013-10-25 21:01:16 -0400] dgarstang: thats pretty sloppy
[2013-10-25 21:01:17 -0400] freezey_: https://gist.github.com/acaiafa/7161791
[2013-10-25 21:01:18 -0400] bean: Ah, that's unfortunate.
[2013-10-25 21:01:28 -0400] dgarstang: bean: same goes any files. No error checking
[2013-10-25 21:02:31 -0400] troyready: dgarstang, as usual, I bet Opscode would love a pull request from you to fix the error
[2013-10-25 21:02:48 -0400] dgarstang: troyready: just as soon as I learn ruby.
[2013-10-25 21:03:21 -0400] troyready: Well, in the meantime, might earn a little more friends (and associated support) with a bit nicer of a tone in here
[2013-10-25 21:03:34 -0400] dgarstang: i like bean. :)
[2013-10-25 21:03:59 -0400] bean: I just try to be helpful, while trying to understand issues.
[2013-10-25 21:04:05 -0400] troyready: Yeah, as do I. Please don't burn him out.
[2013-10-25 21:05:50 -0400] dgarstang: So, if the chef server accepts anything and bumps the version number regardless, how can you be sure that what is on the chef server is good and not going to bork your system when you run the client?
[2013-10-25 21:07:06 -0400] troyready: I've never heard of anyone having an issue like that. If you can make it reproducible, you should open a ticket on their jira.
[2013-10-25 21:07:26 -0400] dgarstang: troyready: upload a vagrant vdi file and see what happens. :)
[2013-10-25 21:07:46 -0400] troyready: Where, in your cookbook's files directory?
[2013-10-25 21:07:57 -0400] dgarstang: troyready: no, the cookbook root
[2013-10-25 21:08:26 -0400] freezey_: anyone know if opscode s3 having issues?
[2013-10-25 21:08:34 -0400] dgarstang: actually, maybe it's berkshelf's fault, cuz I am uploading with that, not knife
[2013-10-25 21:09:03 -0400] freezey_: so i guess its just for 13
[2013-10-25 21:09:09 -0400] troyready: Might want to start with a ticket there, and see where it goes
[2013-10-25 21:09:11 -0400] freezey_: 64bit
[2013-10-25 21:10:28 -0400] freezey_: yeah damnit 13.04 64bit is missing right now
[2013-10-25 21:19:50 -0400] dgarstang: So... is there a best practice for roles? I've just put a rabbitmq role into base.... but now base has to depend on the cookbook used by that role, except it doesn't really depend on it. This is so confusing.
[2013-10-25 21:24:03 -0400] dgarstang: none eh
[2013-10-25 21:26:41 -0400] troyready: It depends on who you ask.
[2013-10-25 21:34:03 -0400] troyready: Anyone else use the opscode selinux cookbook? It was updated this morning with some changes from jtimberman that I've been looking forward to
[2013-10-25 21:34:36 -0400] troyready: But testing its default cooknow, I'm encountering a "NameError: uninitialized constant Chef::Resource::Selinux" error
[2013-10-25 22:11:37 -0400] troyready: Can anyone else help identify why https://github.com/opscode-cookbooks/selinux/blob/master/providers/state.rb#L57 is generating a "uninitialized constant Chef::Resource::Selinux" for me?
[2013-10-25 22:27:24 -0400] brucelee_: anyone here use chef with windows?
[2013-10-25 22:27:37 -0400] segv: you guys ever see a service that has action [ :enable, :start ] only get enabled?
[2013-10-25 22:32:21 -0400] troyready: brucelee_, a tiny bit
[2013-10-25 22:37:52 -0400] ryker_: a couple years ago, I remember coming across a couple blog posts launching ec2 instances via a custom script utlizing the knife classes.  ie. adding require 'chef/knife' ... and then using the methods avaialble to launch ec2 instances.  I'm having a hard time finding these again.  Anyone happen to know of a link to one of these blog posts or a similiar blog post?
[2013-10-25 22:39:11 -0400] dgarstang: Q: *sigh* I'm in GCE. I'm creating a hints file at /etc/chef/ohai/hints/gce.json. Later in a second cookbook I check for node['gce'] which returns false. On a second, it's there. How come?
[2013-10-25 22:51:44 -0400] gkellogg: Hey, I'm having a problem where chef claims that a revision of my application is deployed, but it's not. Anyone see this before?
[2013-10-25 22:52:07 -0400] gkellogg: Using application and application_ruby cookbooks; it worked fine until just recently.
[2013-10-25 22:55:48 -0400] dgarstang: Anyone here making use of ohai? Cuz, I really really got issues with it
[2013-10-25 23:03:01 -0400] dgarstang: hellloooo
[2013-10-25 23:04:48 -0400] brucelee_: troyready: just curious how would you install a random program, like for example, WinRAR or something :p
[2013-10-25 23:05:29 -0400] dgarstang: Isn't chef supposed to run cookbooks in the order given?
[2013-10-25 23:08:49 -0400] dgarstang: Isn't chef supposed to run cookbooks in the order given?
[2013-10-25 23:12:44 -0400] dgarstang: Isn't chef supposed to run cookbooks in the order given?
[2013-10-25 23:20:02 -0400] troyready: dgarstang, you're probably encountering a compile/execute phase issue
[2013-10-25 23:20:36 -0400] troyready: brucelee_, with the windows cookbook: https://github.com/opscode-cookbooks/windows
[2013-10-25 23:20:57 -0400] dgarstang: troyready: you know, I really don't know anymore. I'm looking at the chef-client output and the "Synchronizing Cookbooks:' output doesn't match what's in the base role at all. is it supposed to? If not, where do I look?
[2013-10-25 23:22:07 -0400] troyready: brucelee_, as the readme points out, the tricky part is identifying the name to use with the windows_package resource, as it needs to match  the 'DisplayName' registry value for it to work properly
[2013-10-25 23:22:35 -0400] troyready: brucelee_, so I always end up doing a test install, find the package name, then write the recipe for it
[2013-10-25 23:23:01 -0400] dgarstang: ^ ditto
[2013-10-25 23:23:41 -0400] troyready: dgarstang, the sync is different. That should be pulling every cookbook referenced in the metadata of the recipes of your node's run list. Don't think order matters at that point
[2013-10-25 23:24:10 -0400] dgarstang: troyready: ok, where is the order displayed? There's nothing else between that and the client actually running and doing stuff
[2013-10-25 23:24:45 -0400] troyready: Well, the order is the order listed on your node's run_list
[2013-10-25 23:25:33 -0400] dgarstang: troyready: That'd be easy to confirm if you had every cookbook flatly put into the runlist, but that's not typical.
[2013-10-25 23:26:05 -0400] dgarstang: troyready: my rabbit includes lvm for example. When one cookbook includes another, what happens to the ordering?
[2013-10-25 23:26:31 -0400] troyready: They should all follow their listed order
[2013-10-25 23:26:58 -0400] troyready: Process run list item 1; if it's a role, process its run list item 1; recurse indefinitely
[2013-10-25 23:27:09 -0400] dgarstang: troyready: if I have cookbooks A,B,C in the run list, and cookbook A includes cookbook D, is the run list gonna be A,D,B,C or A,B,C,D ?
[2013-10-25 23:27:52 -0400] dgarstang: it'd be nice to see the final run list for a node before I run the client on it...
[2013-10-25 23:28:49 -0400] troyready: Well that's a little different -- if your recipe in cookbook a 'include_recipe''s cookbook D, I don't think it's every going to show up on the expanded run list
[2013-10-25 23:29:18 -0400] dgarstang: troyready: ok, but what's the order gonna be then?
[2013-10-25 23:29:28 -0400] troyready: It'll be executed in a logical fashion, but (IIRC) it's a current deficit that you can't really see the "true" expanded run_list in that sense
[2013-10-25 23:30:54 -0400] dgarstang: confused. :(
[2013-10-25 23:31:00 -0400] troyready: If you're talking about cookbook a 'include_recipe'ing cookbook d, then it's going to execute how you'd expect -- cookbook a will proceed until it gets to that line then it will execute the contents of the called recipe in cookbook d
[2013-10-25 23:31:02 -0400] dgarstang: just wanna know if it's A,B,C,D or A,D,B,C
[2013-10-25 23:31:31 -0400] dgarstang: ok, so A,D,B,C your saying
[2013-10-25 23:31:42 -0400] dgarstang: or A, A-included, B, C
[2013-10-25 23:32:19 -0400] dgarstang: And we're saying that the list after 'Synchronizing Cookbooks' isn't the actual order they run in?
[2013-10-25 23:32:34 -0400] troyready: Yes. Where it tends to be non-intuitive (IMHO) is when you have problems in the complication phase, because then it will appear that things are running out of order
[2013-10-25 23:33:16 -0400] troyready: I'm not at all sure about the synchronizing order; wouldn't suprise me if it was in order or not
[2013-10-25 23:33:28 -0400] dgarstang: troyready: The compilation phase doesn't make sense to me, becase I see if trying to 'do stuff'
[2013-10-25 23:36:05 -0400] jhayden: has anyone ever seen chef server 10 change the environment of a node to _default on its own?
[2013-10-25 23:38:14 -0400] dgarstang: shouldnt this show me all data for a node? knife-us4 search node name:mbus01-us4.foo.net  -l
[2013-10-25 23:40:32 -0400] dgarstang: there has to be a better way, but ohai is completely useless
[2013-10-25 23:40:53 -0400] troyready: dgarstang, can't say; I'd only try and pull that length of data with 'knife node show'
[2013-10-25 23:41:10 -0400] troyready: jhayden, we've moved to Chef 11 now, but can't say that I ever did see that in the chef 10 days
[2013-10-25 23:41:32 -0400] dgarstang: troyready: it actually is returning all the data, but because the client failed on the first run, there's no ohai data. I really can't fathom how ohai is useful.
[2013-10-25 23:42:30 -0400] troyready: dgarstang, I think its working with puppet to try to call you back
[2013-10-25 23:42:35 -0400] dgarstang: I need to be able to gather certain info about the system though so that I can do shit. Ohai was kind of working on ec2 but on gce I'm getting different behaviour
[2013-10-25 23:43:01 -0400] dgarstang: troyready: :(
[2013-10-25 23:43:33 -0400] dgarstang: calling it a day. can't deal with this anymore.
[2013-10-25 23:44:22 -0400] noahmehl: Hey, qq: is hyphens for attribute names a bad idea?
[2013-10-25 23:50:47 -0400] lazyPower: Greetings, i'm getting an odd error that I cant seem to fix with by adjusting the hostname of the chef server. When i attempt to knife cookbook upload i get: https://gist.github.com/chuckbutler/a658d426c55487e1d459
[2013-10-25 23:53:25 -0400] lazyPower: and doing a reconfigure after setting the host name fixed it, nevermind! TIA

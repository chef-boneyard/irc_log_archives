[2013-10-29 00:01:23 -0400] gzc: how are you trying to overwrite it in your recipe?
[2013-10-29 00:02:59 -0400] allaire: gzc:I tried node.default['postgresql']['version'] = '9.3' & node.override['postgresql']['version'] = '9.3'
[2013-10-29 00:03:27 -0400] allaire: but it still use 9.1
[2013-10-29 00:03:37 -0400] gzc: try node.set
[2013-10-29 00:03:38 -0400] allaire: the only way to have 9.3 is in my node file to have this:
[2013-10-29 00:03:40 -0400] allaire:   "postgresql": {
[2013-10-29 00:03:41 -0400] allaire:     "version": "9.3"
[2013-10-29 00:03:42 -0400] allaire:   },
[2013-10-29 00:04:01 -0400] gzc: are you doing chef server or solo?
[2013-10-29 00:04:12 -0400] allaire: solo
[2013-10-29 00:04:57 -0400] allaire: gzc: same error with node.set :/
[2013-10-29 00:05:01 -0400] allaire: node.set['postgresql']['version'] = '9.3'
[2013-10-29 00:05:52 -0400] allaire: maybe it's because automatic attributes take over all the others
[2013-10-29 00:05:53 -0400] gzc: bizarre, but i never use solo, I'd have thought that a the json above would work if in the 'default_attributes' section
[2013-10-29 00:06:04 -0400] allaire: and in the attributes file, version is wrapped in a if with an automatic attribute
[2013-10-29 00:06:10 -0400] allaire: what do you think?
[2013-10-29 00:06:12 -0400] gzc: defaults and automatics are different, but if nothing else the override should've kicked in
[2013-10-29 00:06:26 -0400] gzc: hrrm, interesante
[2013-10-29 00:07:01 -0400] gzc: still all defaults, should be overridable with 'normal' attrs at the very least
[2013-10-29 00:07:01 -0400] gzc: out of my depth though on solo
[2013-10-29 00:08:21 -0400] allaire: gzc: I think it would be the same behavior with chef srver tho
[2013-10-29 00:50:43 -0400] sn0wb1rd: It appears the the problem I was having will be fixed by https://tickets.opscode.com/browse/COOK-3819
[2013-10-29 01:15:47 -0400] josephholsten: ugh
[2013-10-29 01:16:40 -0400] josephholsten: can anyone find a chef-server ticket about POST /environments/foo/cookbook_versions timing out when a cookbook depends on another cookbook at a certain version, but that version doesn't exist?
[2013-10-29 01:17:13 -0400] josephholsten: @schiasmo ^^
[2013-10-29 01:21:29 -0400] josephholsten: well, it's an nginx 504 gateway timeout
[2013-10-29 01:36:46 -0400] cmaxw: Anyone up for a quick rails/chef question?
[2013-10-29 01:37:15 -0400] cmaxw: I'm trying to use the application and application_ruby recipes to deploy a rails application. But I can't get it to run migrations.
[2013-10-29 01:37:47 -0400] cmaxw: I've set the 'migrate' attribute to true and the 'migration_command' to the rake task (and alternated removing both. Neither helps.
[2013-10-29 01:47:46 -0400] wishlistmaster: cmaxw, your migration_command is like "bundle exec rake task" ?
[2013-10-29 01:48:09 -0400] wishlistmaster: should _default environment be considered as the production? what's the common practice?
[2013-10-29 01:52:31 -0400] janmike: qq:  is there a chef support IRC channel? I noticed that chef runs for servers in APAC in Amazon is failing with a connection error to an S3 bucket (Error connecting to https://s3-external-1.amazonaws.com/opscode-platform-production-data/) and I haven't seen anything on status.opscode.com
[2013-10-29 02:00:47 -0400] holms: ERROR:  Error installing berkshelf: buff-ruby_engine requires Ruby version >= 1.9.2.
[2013-10-29 02:00:50 -0400] holms: =/
[2013-10-29 02:01:30 -0400] edwardc: hello folks, is there any chef build for mac osx 10.9 yet ? i got error message while (re)install chef
[2013-10-29 02:03:13 -0400] edwardc: https://tickets.opscode.com/browse/CHEF-4678 #
[2013-10-29 02:16:31 -0400] kallistec: edwardc: same build works for all supported os x versions, you can grab it here: https://opscode-omnibus-packages.s3.amazonaws.com/mac_os_x/10.7/x86_64/chef-11.6.2_1.mac_os_x.10.7.2.sh
[2013-10-29 02:16:37 -0400] kallistec: http://www.opscode.com/chef/install/
[2013-10-29 02:31:55 -0400] wishlistmaster: Hi guys, what's the steps to do when updating cookbook versions *chef-server*
[2013-10-29 02:53:51 -0400] Joel: how do you move a file around on a machine? I've tried source "file://tmp/blah" but it complains it can't find file://tmpblahfile://tmp/blah
[2013-10-29 02:55:38 -0400] Joel: trying the following: http://pastebin.com/fCiGzN3Z
[2013-10-29 02:56:43 -0400] gchristensen: Joel: I think for that you need file:// (protocol definition) /path/to/foo , file:///tmp/sa-challenge-files
[2013-10-29 02:57:57 -0400] Joel: gchristensen: that gets me undefined method '+' for nil:NilClass
[2013-10-29 02:58:27 -0400] ezotrank: source 'file://tmp/sa-challenge-files/mpc-app.war' maybe source '/tmp/sa-challenge-files/mpc-app.war'
[2013-10-29 02:58:31 -0400] gchristensen: tragically then, it probably isn't supported
[2013-10-29 02:58:56 -0400] Joel: ezotrank: tried that too.
[2013-10-29 02:59:03 -0400] Joel: gchristensen: possibly I'm on too old a version of chef for it.
[2013-10-29 02:59:33 -0400] ezotrank: can you show log?
[2013-10-29 02:59:44 -0400] Joel: ezotrank: which version do youwant the stacktrace of?
[2013-10-29 02:59:52 -0400] Joel: file:// file:// or /tmp
[2013-10-29 02:59:56 -0400] Joel: file:///
[2013-10-29 03:01:19 -0400] ezotrank: '/tmp' version
[2013-10-29 03:01:21 -0400] Joel: https://github.com/jcam/chef/commit/4e31c205ec003734b4ed03ed57121fb4e896afb6
[2013-10-29 03:03:11 -0400] Joel: ezotrank: in that case it seems to be searching in the files portion of the recipe, which is not what I want.
[2013-10-29 03:05:29 -0400] Joel: heh seems to be in a newer version of chef then I' using
[2013-10-29 03:05:59 -0400] holms: i wonder is librarian doing that think I think about.
[2013-10-29 03:06:03 -0400] holms: if it's so this is horrible design
[2013-10-29 03:06:31 -0400] holms: we have Cheffile with cookbook which deps should be installed automatically
[2013-10-29 03:06:36 -0400] holms: and then we write the same to node.json?
[2013-10-29 03:07:21 -0400] Joel: any other thoughts on how to copy a file on the system?
[2013-10-29 03:09:13 -0400] gchristensen: Joel: execute?
[2013-10-29 03:09:33 -0400] Joel: gchristensen: yeah, I'm just going to call a ruby block, seems like the easiest way out.
[2013-10-29 03:09:57 -0400] gchristensen: Joel: not ruby... http://docs.opscode.com/resource_execute.html
[2013-10-29 03:58:12 -0400] edwardc: kallistec: it seems not chef-solo version ? # 10:16 <@kallistec> edwardc: same build works for all supported os x versions, you can grab it here
[2013-10-29 07:40:09 -0400] Paresh: i have chef-client installed on machine which uses ruby 1.9.1 version and i have installed ruby 1.9.3. When i start unicorn which is available on ruby 1.9.3 from my chef server it uses ruby 1.9.1 and gives error
[2013-10-29 07:45:09 -0400] Paresh: anyone out there
[2013-10-29 08:03:14 -0400] arussel: using the chef opensource server, I can create a user, he can create a client and a node, but then he can't delete them. I need to make him admin to be able to delete its own node, is that normal ?
[2013-10-29 08:12:59 -0400] s2r2: arussel: I tend to think about that as "admin" ~ human, "non-admin" ~ chef-client, unpriviledged
[2013-10-29 08:14:17 -0400] arussel: then this would make sense, thanks
[2013-10-29 08:19:55 -0400] arussel: when I use this lwrp in a recipe: https://github.com/arussel/chef-java-wrapper/blob/master/resources/default.rb
[2013-10-29 08:20:02 -0400] arussel: it works without problem
[2013-10-29 08:21:51 -0400] arussel: I get this error: undefined method `app_parameters' for Chef::Resource::JavaWrapper
[2013-10-29 08:21:56 -0400] arussel: when used in multiple recipe
[2013-10-29 08:25:15 -0400] arussel: s2r2: so basically, in open source chef, any human can do anything ?
[2013-10-29 08:26:05 -0400] arussel: it would be nice to at least restrict overwriting a cookbook version
[2013-10-29 08:59:05 -0400] s2r2: arussel: not sure about fine-grained ACLs here but I don't know if enterprise has 'em...
[2013-10-29 09:26:39 -0400] nd__: Guys, I have a problem with opscode-cookbooks/mysql. I include mysql::server which sets up the server, starts it, then writes the my.cnf and tries to restart it, which always fails. So I have to reload the box (vagrant), then provisioning runs through without problems. https://gist.github.com/alappe/e6ab05aee66b9e8fcc05 Has anyone a clue on how to fix that? Or what exactly is the problem here?
[2013-10-29 09:38:08 -0400] MattMaker: nd__: dmesg | grep mysql
[2013-10-29 09:38:22 -0400] MattMaker: does ^ show any additional errors?
[2013-10-29 09:39:02 -0400] nd__: Let me destroy and up again
[2013-10-29 09:40:35 -0400] MattMaker: the internets say it's maybe a file permission issue
[2013-10-29 09:40:48 -0400] bigbigbang: Ohai  Chef ! Does anyone know how I can determine the file system type in ruby ? I want to do security check on files that are only ext3 type ... It'isn't really a question about Chef but perhaps there is a library or cookbook that i'm not aware of ..
[2013-10-29 09:43:31 -0400] MattMaker: nd__: and whatever error logs mysql might keep, perhaps /var/log/mysql.err
[2013-10-29 09:46:22 -0400] MattMaker: or /var/lib/mysql/[hostname].err
[2013-10-29 10:02:33 -0400] terracor: hello! can somebody tell me, if it's possible to reuse an attribute? I want to use the proxy server attributes from my base role to customize a recipe in a role for my cluster servers. something like this: "override_attributes": { "jboss": { "http.proxyHost" : node['proxy']['server'] }} ?
[2013-10-29 10:34:27 -0400] arussel: s2r2: hosted chef has fine grain permission. No permission is a big pb for us, we have dev that don't kno about chef (and shouldn't know) that just want to vagrant up/down, we don't want them to have any rights in our server apart from creating/deleting node/client.
[2013-10-29 10:34:34 -0400] JuanFernandez: Hello everybody
[2013-10-29 10:34:57 -0400] s2r2: arussel: ah, I see
[2013-10-29 10:36:05 -0400] JuanFernandez: I have a question about software package versions and chef (official) cookbooks. I want to adapt the apache2 cookbook to Apache 2.4, and I managed success, but I'd like to reformat the patches in a proper way.
[2013-10-29 10:36:33 -0400] s2r2: arussel: you could spin up a dedicated chef server for your developers and ensure that whatever your chef-team (ops? jenkins?) uploads to the one chef-server they'll also upload to the other one
[2013-10-29 10:37:05 -0400] JuanFernandez: I thought about setting the package version in attributes/default
[2013-10-29 10:37:42 -0400] JuanFernandez: but I'm wondering that setting node['apache']['version'] = '2.4' would not work with subsequent versions, like '2.4.1'
[2013-10-29 10:37:46 -0400] arussel: s2r2: this or maybe use chef-sole for dev or have someone ring opscode an negotiate a fair deal :-)
[2013-10-29 10:38:50 -0400] s2r2: arussel: yep chef-solo might be a good idea.  btw, isn't berkshelf able to grab cookbooks out of a chef-server?  maybe that's the way to go...
[2013-10-29 10:39:02 -0400] JuanFernandez: Is there a way in the cookbook to enforce the installation of a package from a version number up?
[2013-10-29 10:39:29 -0400] JuanFernandez: I mean, I'd like to have a conditional saying ... "if ubuntu 13.10 then install apache 2.4 onwards"
[2013-10-29 10:39:38 -0400] arussel: s2r2: good idea, we're using berkshelf, that would be a good mix
[2013-10-29 10:39:56 -0400] JuanFernandez: and then, in the code, "if apache 2.4 onwards then use this template path"
[2013-10-29 10:40:11 -0400] s2r2: arussel: well, with solo's limitations of course but it might just do the trick
[2013-10-29 10:42:01 -0400] arussel: s2r2: solo for the 'create a vm for a dev' is probably enough then we use our chef server for infrastructure management with only access for devops
[2013-10-29 10:42:26 -0400] s2r2: arussel: yep
[2013-10-29 10:50:09 -0400] nd__: MattMaker: Nothing in the dmesg, .err says InnoDB: Unable to lock /var/lib/mysql/ibdata1, error: 11, InnoDB: Check that you do not already have another mysqld process and the file it want's to use to get the PID (/var/lib/mysql/vagrant-centos-6.pid) doesn't exist, it's base.acm.local.pid. But the .err tells me another thing, right at the end: mysqld_safe mysqld from pid file /var/lib/mysql/vagrant-centos-6.pid ended
[2013-10-29 10:51:14 -0400] nd__: MattMaker: So it could be, that mysql starts up, tries to write into its directory, can't, then exits. Then chef/init tries to kill the process, but it's already dead and this kills the chef-run.
[2013-10-29 10:52:43 -0400] nd__: Then again I don't see the reason yet why there seem to be two mysql-processes trying to setup ibdata
[2013-10-29 10:55:30 -0400] MattMaker: nd__: you are doing something to the config file, I think you said?
[2013-10-29 10:56:12 -0400] MattMaker: you also implied that it does this with mysql still running
[2013-10-29 10:56:47 -0400] nd__: No, the cookbook configures my.cnf, not me I only adjusted attributes.
[2013-10-29 10:57:01 -0400] MattMaker: ah, ok
[2013-10-29 10:57:04 -0400] nd__: I'll try to see if I can test it with test-kitchen in this cookbook
[2013-10-29 10:57:22 -0400] MattMaker: and it's on Centos?
[2013-10-29 10:58:16 -0400] nd__: Yes. Sadly :) I'm not using it very often
[2013-10-29 11:00:20 -0400] nd__: They provide a test-suite, so let's see what happens there either that will help directly or give me something valid to add as an issue on github
[2013-10-29 11:01:51 -0400] MattMaker: nd__: it looks like that error might be one that happens when something tries to stop mysql and mysql fails at stopping
[2013-10-29 11:03:07 -0400] nd__: MattMaker: Yes.
[2013-10-29 11:03:31 -0400] nd__: MattMaker: Reloading the box works fine then everything continues but this is not a good solution ;-)
[2013-10-29 11:05:04 -0400] MattMaker: nd__: are you doing anything funny in the filesystem? NFS?
[2013-10-29 11:07:10 -0400] MattMaker: and are you sure the image you are using doesn't have mysql in it already?
[2013-10-29 11:07:31 -0400] nd__: MattMaker: No, standard fs on centos (whatever it is)
[2013-10-29 11:07:51 -0400] nd__: MattMaker: I just double-checked this, no mysql on the box except the one I install (which is MariaDB)
[2013-10-29 11:10:42 -0400] MattMaker: trying anything unusual in the configuration?
[2013-10-29 11:13:09 -0400] nd__: Wouldn't say so, no.
[2013-10-29 11:14:07 -0400] nd__: MattMaker: Do you have an idea where test-kitchen gets the URL for the image from? mysql-cookbook doesn't provide a Vagrantfile (where I'd expect it) and the URL it finds is not for vmware so I'd have to change it
[2013-10-29 11:14:26 -0400] MattMaker: maybe a silly question, but you aren't out of disk space in that Vagrant somehow?
[2013-10-29 11:14:54 -0400] MattMaker: I don't know much about test-kitchen, sorry
[2013-10-29 11:15:19 -0400] MattMaker: or out of memory, or swap?
[2013-10-29 11:16:04 -0400] nd__: No, definitely not out of disk-space, can't really say out of memory/swap in this exact point of time, but I don't think so. As said, running it a second time works.
[2013-10-29 11:16:29 -0400] nd__: And at this point, a lot of more heavy (memory-wise) things are not on the Box yet some java apps.
[2013-10-29 11:18:28 -0400] MattMaker: I guess you can try setting it to not use innodb :(
[2013-10-29 11:19:05 -0400] nd__: well, but I need InnoDB and as said, after restarting the box, all runs fine
[2013-10-29 11:21:27 -0400] arussel: does someone knows of a small chefspec example for lwrp ?
[2013-10-29 11:29:35 -0400] arussel: found doc on chefspec github
[2013-10-29 11:34:00 -0400] MattMaker: nd__: I'm out of ideas then, except maybe set innodb_fast_shutdown to 0
[2013-10-29 11:35:36 -0400] MattMaker: and make sure that maybe some temp files or folders aren't getting created with permissions mysql can't read (and which are then recreated properly on a reboot)
[2013-10-29 11:41:21 -0400] nd__: MattMaker: Yes, I will try to check that thanks so far
[2013-10-29 12:19:34 -0400] bigbigbang: re Hi , I got a little issue : In a cookbook, I install a gem "sys-filesystem", but then, when I try to load it (require) Chef tells me it can't load this file ( cannot load such file -- sys-filesystem). How should I do that ? Should I reload something ? Should I separate the installation and the use ?
[2013-10-29 12:20:17 -0400] s2r2: bigbigbang: gem's for chef need to be installed with "chef_gem"
[2013-10-29 12:21:13 -0400] bigbigbang: s2r2: yes i have done this , here is a gist of my recipe if it can help .. : https://gist.github.com/bigbigbang/7213657
[2013-10-29 12:28:42 -0400] nd__: MattMaker: Well, during installation, mysql is indeed running twice
[2013-10-29 13:24:55 -0400] zaargy: bigbigbang: you need to do chef_gem "foo" do action :install end.run_action(:install) to get the gem to be there in the subsequent chef run i believe
[2013-10-29 13:25:06 -0400] zaargy: this makes it install the gem during the compile phase
[2013-10-29 13:26:56 -0400] bigbigbang: zaargy: thanks in fact it was a human mistake ... I was doing : "require 'sys-filesystem'  instead of require 'sys/filesystem'      my bad .. thanks anyway
[2013-10-29 13:29:09 -0400] DenisK: hi. is it possible to get list of cookbook files inside recipe?
[2013-10-29 13:29:28 -0400] DenisK: smt like: cookbook_files.each do
[2013-10-29 13:31:27 -0400] bigbigbang: DenisK: Probably with something like node["recipe"]    There is the recipe run-list in ohai so you probably can retrieve this attribute ..
[2013-10-29 13:31:47 -0400] DenisK: thanks. will try it.
[2013-10-29 13:32:24 -0400] bigbigbang: DenisK: with "s" node["recipes"] sorry
[2013-10-29 13:35:57 -0400] zaargy: DenisK: why do you want to do that out of interest?
[2013-10-29 13:37:21 -0400] DenisK: I want to install pure-ftpd and it has config options one per file.
[2013-10-29 14:27:27 -0400] nXqd: hi guys
[2013-10-29 14:27:46 -0400] tomduffield: hi
[2013-10-29 14:27:55 -0400] nXqd: is there anyway that we can replace capistrano completely with chef ?
[2013-10-29 14:29:26 -0400] nXqd: I'm amateur to chef, I use chef mostly to provision and use capistrano to deploy
[2013-10-29 14:30:13 -0400] meineerde: nXqd: have a look at http://docs.opscode.com/resource_deploy.html which is modeled after the capistrano
[2013-10-29 14:30:40 -0400] nXqd: meineerde: nice, didn't know it :P
[2013-10-29 14:31:17 -0400] meineerde: nXqd: you might have to adapt your workflow though as chef is intended to be used with a pull model (i.e. a chef client runs on each server and updates regularly) vs. capistrano which is push (i.e. an admin choses the exact moment when to push code and to perform things)
[2013-10-29 14:32:24 -0400] meineerde: using knife ssh and chef-apply, most things should be able to run similar to capistrano. ymmv
[2013-10-29 14:33:12 -0400] meineerde: nXqd: also have a look at https://github.com/opscode-cookbooks/application which provides a nice abstraction layer
[2013-10-29 14:35:08 -0400] nXqd: meineerde: great, thanks for your anaswer. I will look into that, if I do have any question, I will ask :)
[2013-10-29 14:35:52 -0400] allaire: Anybody use the rbenv-cookbook from RiotGames? Is gem_package working for you?
[2013-10-29 14:54:34 -0400] gazarsgo: i don't think that's where gem_package comes from ?
[2013-10-29 14:55:28 -0400] storme_out: gazarsgo: it's not, but i believe they're asking about interactions between the cb and the standard resource
[2013-10-29 14:56:06 -0400] gazarsgo: ah, i get it.  i'd expect to have to use rbenv's resource rather than the standard one, but i've been surprised by magic before
[2013-10-29 15:07:39 -0400] mattupstate: can't seem to find resources on on how to test LWRP's with test-kitchenanyone have some insight?
[2013-10-29 15:08:25 -0400] bean: mattupstate: Oh, one of my co-workers just did that like 2 days ago. I think nicgrayson is around?
[2013-10-29 15:09:25 -0400] mattupstate: i'm trying to look at the opscode cookbooks but its not apparent at first glance
[2013-10-29 15:09:33 -0400] allaire: When running gem_package, does it uses sudo or not?
[2013-10-29 15:09:52 -0400] tomduffield: it runs as the user you triggered the chef-run as
[2013-10-29 15:09:56 -0400] mattupstate: lots of variance in the `test` folders
[2013-10-29 15:10:07 -0400] tomduffield: so if you ran `sudo chef-client` it'll run as root
[2013-10-29 15:12:04 -0400] chris613: Is there an easy way for a recipe to tell if it's being run in the context of a "chef-client -o" overidden run_list?
[2013-10-29 15:12:11 -0400] allaire: tomduffield: thanks, i dont get it, I installed the rbenv cookbook
[2013-10-29 15:12:28 -0400] allaire: and if I try sudo gem install thin, it returns command not found
[2013-10-29 15:12:42 -0400] allaire: but if I do gem install thin, it finds the command, but can't run it since I dont have the permissions
[2013-10-29 15:12:48 -0400] allaire: O.o, no idea why sudo change my path
[2013-10-29 15:13:54 -0400] allaire: heh, this works: sudo env PATH=$PATH gem install thin
[2013-10-29 15:14:41 -0400] allaire: tomduffield: By any chances, did you ever used rbenv-cookbook?
[2013-10-29 15:15:15 -0400] tomduffield: allaire: nope, sorry
[2013-10-29 15:19:33 -0400] meineerde: allaire: sudo has a list of "safe" paths. it preserves any existing $PATH entries matching that list will be preserved, all others will be removed
[2013-10-29 15:21:02 -0400] meineerde: allaire: you could add this to your /etc/sudoers and sudo will preserve the binary and shims paths:
[2013-10-29 15:21:14 -0400] meineerde: Defaults      secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/rbenv/shims"
[2013-10-29 15:22:08 -0400] allaire: meineerde: Cool trick, rbenv-cookbook should do that by default I guess, do you use it?
[2013-10-29 15:22:40 -0400] meineerde: allaire: if you use the sudo cookbook, you can add that to its config
[2013-10-29 15:23:52 -0400] meineerde: node.default["authorization"]["sudo"]["sudoers_defaults"] << 'secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/rbenv/shims"'
[2013-10-29 15:24:28 -0400] meineerde: but from my pov, having that on by default feels a bit to intrusive, especially concerning other configuration options
[2013-10-29 15:24:44 -0400] allaire: yeah
[2013-10-29 15:24:49 -0400] allaire: I might run rbenv under my deployer user...
[2013-10-29 15:25:15 -0400] bigbigbang: Does someone know how I can retrieve the file system (ext3, etx4) of a path (/root, /opt ...) ? I have tried with ruby File class and a gem :sys-filesystem and I can't get the file system ... Now I see that Ohai detects this but only on path like : /dev/mapper/vg_root-lv_home .. and i don't know how to get a relation between /root and /dev/mapper/vg-root-lv_home to get the file system ..
[2013-10-29 15:32:46 -0400] gazarsgo: cat /etc/fstab ?
[2013-10-29 15:33:01 -0400] gazarsgo: the mount point is the 2nd column
[2013-10-29 15:33:04 -0400] mattupstate: bean:
[2013-10-29 15:33:08 -0400] mattupstate: i think i figured it out
[2013-10-29 15:34:29 -0400] bigbigbang: gazarsgo: thanks for the tips
[2013-10-29 15:39:42 -0400] JuanFernandez: Hello everybody
[2013-10-29 15:39:54 -0400] meineerde: bigbigbang: ohai also gives you the mountpoint, e.g. node["filesystems"]["/dev/mapper/vg_root-lv_home"]["mount"]
[2013-10-29 15:40:02 -0400] JuanFernandez: I need some advice tweaking the apache2 module
[2013-10-29 15:40:17 -0400] allaire: meineerde: If I use knife solo and it runs chef solo using sudo (https://github.com/matschaffer/knife-solo/blob/382d017f4aa588354f1994d4526570f957bb20cb/lib/chef/knife/solo_cook.rb#L284), will gem_package also do 'sudo gem myGem' or simply 'gem myGem' ?
[2013-10-29 15:40:27 -0400] allaire: do you have any idea, still sounds confusing to me :(
[2013-10-29 15:40:39 -0400] meineerde: allaire: it will not use sudo
[2013-10-29 15:41:01 -0400] meineerde: allaire: generally, you should run chef as root whenever possible. else you always have to work around permission issues in the very chef run
[2013-10-29 15:41:25 -0400] JuanFernandez: I would like to modify it completely to support apacher 2.4
[2013-10-29 15:41:52 -0400] allaire: meineerde: i think knife-solo solve that :)
[2013-10-29 15:42:00 -0400] meineerde: yes
[2013-10-29 15:42:00 -0400] allaire: meineerde: it only ask for my sudo pass once at the beginning
[2013-10-29 15:42:11 -0400] JuanFernandez: is it possible to create another cookbook called also apache2 with some version constraints? I would like to set it to require ubuntu 13.10 minimum
[2013-10-29 15:42:35 -0400] JuanFernandez: and indicate in the official one that it does not support ubuntu 13.10
[2013-10-29 15:43:01 -0400] bigbigbang: meineerde: Yeah but I would like the "reverse" thing  : I know the mount point (/root) and I want to retrieve the device ...
[2013-10-29 15:43:36 -0400] bigbigbang: meineerde: and retrieve the file system associated woth the mount point ..
[2013-10-29 15:43:57 -0400] meineerde: JuanFernandez: have a look at the supports keyword in the metadata.rb. http://docs.opscode.com/essentials_cookbook_metadata.html
[2013-10-29 15:44:58 -0400] JuanFernandez: meineerde yes, that's what I thought
[2013-10-29 15:45:25 -0400] thom: bigbigbang: mount | awk '/\/root/ { print $5 }'
[2013-10-29 15:45:27 -0400] JuanFernandez: but the thing is that i would like to name it "apache2" as well, because other cookbooks depending on apache2 don't care if it's 2.2 or 2.4
[2013-10-29 15:45:41 -0400] JuanFernandez: so, depending on the system, it sould grab the 2.2 cookbook or the 2.4 cookbook
[2013-10-29 15:45:44 -0400] JuanFernandez: is that possible?
[2013-10-29 15:46:00 -0400] someara: yep
[2013-10-29 15:46:03 -0400] thom: or $1 if you want the device
[2013-10-29 15:46:13 -0400] someara: cookbook are identified by "name"+"version"
[2013-10-29 15:46:20 -0400] someara: if you omit the version, it grabs the latest
[2013-10-29 15:46:35 -0400] someara: but you can lock them down to specific version with the Environments mechanism
[2013-10-29 15:46:41 -0400] JuanFernandez: but i'm not talking about the cookbook version
[2013-10-29 15:46:56 -0400] bigbigbang: thom: thanks u vry much, will try this
[2013-10-29 15:47:00 -0400] JuanFernandez: but the apache2 2.2 cookbook or the apache2 2.4 cookbook
[2013-10-29 15:47:21 -0400] thom: bigbigbang: mount | awk '$3 == "/root" { print $1 }'    is actually better
[2013-10-29 15:47:22 -0400] someara: oh right
[2013-10-29 15:47:38 -0400] JuanFernandez: we can include the check in the official apache2 cookbook
[2013-10-29 15:47:42 -0400] JuanFernandez: but it's quite dirty
[2013-10-29 15:47:49 -0400] meineerde: bigbigbang: node["filesystems"].values.find{|device| device["mount"] == "/root"}["fstype"]
[2013-10-29 15:47:50 -0400] someara: right now we don't support namespacing
[2013-10-29 15:47:55 -0400] JuanFernandez: there are some structural changes (for example, conf-available / conf-enabled)
[2013-10-29 15:48:05 -0400] someara: so, you'll have to either name it something else
[2013-10-29 15:48:10 -0400] someara: my-apache2
[2013-10-29 15:48:20 -0400] someara: or fork it and use that
[2013-10-29 15:48:28 -0400] JuanFernandez: but it will break dependencies from other cookbooks
[2013-10-29 15:48:52 -0400] someara: things that depend on the apache2 cookbook?
[2013-10-29 15:49:13 -0400] JuanFernandez: the logic would be: if it's ubuntu < 13.10 then use the apache2.2 cookbook, if it's ubuntu >= 13.10 then use apache2.4 cookbook
[2013-10-29 15:49:29 -0400] JuanFernandez: I cannot make it automatic
[2013-10-29 15:49:36 -0400] meineerde: bigbigbang: or even this
[2013-10-29 15:49:38 -0400] meineerde: bigbigbang: mount_fstype_mapping = node["filesystems"].values.inject({}){ |result, device| result[device["mount"]] = device["fstype"]; result }
[2013-10-29 15:49:41 -0400] JuanFernandez: unless, I'm thinking, there is some kind of cookbook aliases
[2013-10-29 15:49:47 -0400] JuanFernandez: that I can set runtime
[2013-10-29 15:50:04 -0400] bigbigbang: meineerde: Wow ! This look as what I was expecting !
[2013-10-29 15:50:28 -0400] bigbigbang: meineerde: thks a lot will try this
[2013-10-29 15:50:44 -0400] someara: historically, we've been encoding distribution and distribution-version specific idioms into The Apache Cookbook
[2013-10-29 15:51:01 -0400] someara: so if you look around the attributes file, you'll see lots of case logic
[2013-10-29 15:51:09 -0400] JuanFernandez: yes, i've seen that and modified in there
[2013-10-29 15:51:13 -0400] someara: but
[2013-10-29 15:51:38 -0400] someara: if apache 2.4 acts differently enough that its going to explode the case logic in The Apache Cookbook
[2013-10-29 15:51:46 -0400] someara: then I'd probably just make a new one
[2013-10-29 15:52:07 -0400] JuanFernandez: exactly
[2013-10-29 15:52:12 -0400] JuanFernandez: but I'd like to be able to keep the other cookbook dependencies
[2013-10-29 15:52:54 -0400] JuanFernandez: some sort of saying "apache2.2 cookbook supports ubuntu < 13.10" (which you should set nowadays in the current apache2 cookbook)
[2013-10-29 15:53:03 -0400] someara: dependencies are hard lets go ride bikes
[2013-10-29 15:53:19 -0400] JuanFernandez: and "if you're using ubuntu >= 13.10, grab this apache2 cookbook (which is the apache2.4 one)"
[2013-10-29 15:53:31 -0400] someara: eh
[2013-10-29 15:53:39 -0400] someara: think of cookbooks the same way you would a rubygem, perl module, or a python module
[2013-10-29 15:53:54 -0400] someara: doing platform specific case logic on deps is the path to madness
[2013-10-29 15:54:01 -0400] someara: think of the depsolver
[2013-10-29 15:54:24 -0400] jtimberman: someara: you have a H control character at the beginning of each line.
[2013-10-29 15:54:34 -0400] jtimberman: so that's weird.
[2013-10-29 15:54:36 -0400] someara: really? that's super lame.
[2013-10-29 15:54:42 -0400] someara: I'm going to blame adium
[2013-10-29 15:54:47 -0400] gleam: that seems fair
[2013-10-29 15:55:25 -0400] stormerider: s/lame/crappy/
[2013-10-29 16:06:34 -0400] gchristensen: does the default bootstrap template not copy the data bag secret?
[2013-10-29 16:08:18 -0400] JuanFernandez: sorry for the delay @someara I got a phone call
[2013-10-29 16:08:47 -0400] JuanFernandez: I can send you the modifications that I'm doing to the apache2 cookbook trying to support it to apache 2.4
[2013-10-29 16:08:59 -0400] JuanFernandez: but it's not a clean way, as you said
[2013-10-29 16:09:10 -0400] JuanFernandez: too many "ifs"
[2013-10-29 16:12:04 -0400] someara: yep
[2013-10-29 16:19:40 -0400] mattupstate: quickest way to determine if a node is on aws?
[2013-10-29 16:19:44 -0400] mattupstate: node['aws'] ?
[2013-10-29 16:20:46 -0400] gchristensen: mattupstate: node['cloud']['provider']
[2013-10-29 16:20:51 -0400] mattupstate: cheers
[2013-10-29 16:20:54 -0400] tomduffield: node['ec2']
[2013-10-29 16:20:58 -0400] xerxas: someara: sorry to bother you directly but as you are ops, you should be staff at opscode. Do you know who is responsible for new packages ? Ive built ubuntu 13.10 bento box, and built omnibus chef client packages within that box. Is it worth opening tickets / doing some pr for this ? who should I ask this ?
[2013-10-29 16:21:03 -0400] gchristensen: so many ways! :P
[2013-10-29 16:21:22 -0400] gchristensen: xerxas: I assumed the same, however not all ops are employees, and not all employees are ops.
[2013-10-29 16:21:36 -0400] xerxas: ;)
[2013-10-29 16:21:59 -0400] xerxas: right, I see some Hwops guys that are ops, for ex ..
[2013-10-29 16:22:01 -0400] xerxas: ;)
[2013-10-29 16:22:12 -0400] gchristensen: wat?
[2013-10-29 16:22:18 -0400] xerxas: gchristensen: anyway , Im searching for  the release manager  ?
[2013-10-29 16:22:44 -0400] xerxas: heavywater ops (a company that is not opscode) ;)
[2013-10-29 16:23:05 -0400] xerxas: but , must ops are from opscode ;)
[2013-10-29 16:31:11 -0400] xerxas: I meant most, not must ;)
[2013-10-29 16:34:07 -0400] bigbigbang: meineerde: Are you still there ? I got a little issue with your command ...  I use this one : filetype = node["filesystems"].values.find{|device| device["mount"] == dir}["fstype"] , but Chef tells me it did'nt know 'values' (undefined method ' values' or nil ....
[2013-10-29 16:35:33 -0400] meineerde: bigbigbang: it's actually node["filesystem"] (notice the missing s at the end)
[2013-10-29 16:35:53 -0400] bigbigbang: meineerde: oh my bad thx
[2013-10-29 16:36:01 -0400] bigbigbang: meineerde: end of the day ...
[2013-10-29 16:36:33 -0400] meineerde: I had it wrong above. I just hadn't tested the code...
[2013-10-29 16:36:44 -0400] elliottt: is there a good way to specify that one recipe depends on the completion of another?  like installing a compiler, then using it to build code from a repo?
[2013-10-29 16:37:57 -0400] someara: so in your thing-you-need-to-build-the-code recipe
[2013-10-29 16:38:17 -0400] someara: do an include_recipe "compiler::stuff"
[2013-10-29 16:38:34 -0400] elliottt: and include_recipe will force it to wait for completion?
[2013-10-29 16:38:51 -0400] someara: well you'd put the include_recipe before the resources that do the compiling
[2013-10-29 16:39:18 -0400] elliottt: i had that, and it was still running the recipes that do the compiling before the compiler was available
[2013-10-29 16:39:37 -0400] elliottt: i'll check my code, maybe i'm not understanding what i did correctly :)
[2013-10-29 16:39:44 -0400] someara: a chef-client run actually evaluates the recipes and compiles a things called a "resource collection"
[2013-10-29 16:40:07 -0400] someara: when it sees package, user, cron, directory, file, whatever those are stuck on an array
[2013-10-29 16:40:46 -0400] someara: so if you have (software) compiley things happening in the (chef) compilation phase, thats usually the problem
[2013-10-29 16:41:29 -0400] elliottt: is something that runs during chef compilation something that specifies an action other than :nothing, or one that has an invocation of an action following the definition?
[2013-10-29 16:44:07 -0400] elliottt: well, let me rephrase that: what's the easiest way to tell what phase something runs in?
[2013-10-29 16:47:37 -0400] jbz: elliottt: Generally, things inside chef resources are run during convergence.  Code *outside* the do/end blocks of resources is run at compilation time.
[2013-10-29 16:47:53 -0400] elliottt: ah, thanks :)
[2013-10-29 16:48:17 -0400] jbz: elliottt: So if you want arbitrary ruby code to execute during compile, put it outside resources.  If you want it to execute *at convergence*, put it inside a ruby block resource.
[2013-10-29 16:48:18 -0400] jbz: e.g.
[2013-10-29 16:48:36 -0400] elliottt: jbz: so that makes my dependency problem even stranger
[2013-10-29 16:48:48 -0400] jbz: sorry, didn't see that
[2013-10-29 16:48:50 -0400] elliottt: jbz: i'm installing a compiler, then trying to use it, and the use of the compiler happens before it's done installing
[2013-10-29 16:48:59 -0400] jbz: how are you trying to use it?
[2013-10-29 16:49:02 -0400] jbz: from inside a block?
[2013-10-29 16:49:06 -0400] elliottt: jbz: yes
[2013-10-29 16:49:29 -0400] jbz: ok, the ordering of blocks is not, AFAIK, completely transparent
[2013-10-29 16:49:35 -0400] elliottt: it's within an execute "install" do ... block
[2013-10-29 16:50:07 -0400] someara: oooh
[2013-10-29 16:50:14 -0400] someara: I see what you're saying
[2013-10-29 16:50:28 -0400] someara: sec let me find an example hack for this
[2013-10-29 16:50:31 -0400] jbz: elliottt: you could do this:
[2013-10-29 16:50:42 -0400] jbz: Have the action on the execute "install" block be :nothing
[2013-10-29 16:50:48 -0400] elliottt: jbz: command is given within the execute install
[2013-10-29 16:50:56 -0400] jbz: but then have the block which installs the compiler notify that resource to :execute
[2013-10-29 16:51:00 -0400] jbz: or, :run sorry
[2013-10-29 16:51:06 -0400] someara: elliot:
[2013-10-29 16:51:06 -0400] jbz: can't remember the exact syntax lol
[2013-10-29 16:51:07 -0400] someara: https://github.com/opscode-cookbooks/jenkins/blob/master/recipes/server.rb#L100
[2013-10-29 16:51:11 -0400] someara: that's what you want
[2013-10-29 16:51:17 -0400] elliottt: and if the two are in separate recipes?
[2013-10-29 16:51:23 -0400] elliottt: well, cookbooks
[2013-10-29 16:51:25 -0400] someara: you want a resource that spins its wheels checking to see if your compiler is done installing
[2013-10-29 16:51:50 -0400] elliottt: using the subscribes attribute?
[2013-10-29 16:52:01 -0400] jbz: ah ok what @someara said looks better
[2013-10-29 16:52:53 -0400] elliottt: is block ruby, or chef?
[2013-10-29 16:53:15 -0400] jbz: the ruby_block  is a chef resource
[2013-10-29 16:53:25 -0400] elliottt: yes, and the block call on the next line?
[2013-10-29 16:54:05 -0400] jbz: that defines the actual code block to be executed by the ruby_block resource
[2013-10-29 16:54:17 -0400] elliottt: ok, so it's an attribute of the recource
[2013-10-29 16:54:20 -0400] jbz: yes, sorry
[2013-10-29 16:54:23 -0400] elliottt: np :)
[2013-10-29 16:54:28 -0400] jbz: note that beneath it is an action attrib
[2013-10-29 16:55:08 -0400] elliottt: so, if action is :nothing, and block is specified, block will still run?
[2013-10-29 16:55:17 -0400] elliottt: oh, i see
[2013-10-29 16:55:18 -0400] jbz: no
[2013-10-29 16:55:25 -0400] elliottt: the log starts it
[2013-10-29 16:55:28 -0400] jbz: the block is being called from the resource below with :create
[2013-10-29 16:55:31 -0400] someara: so
[2013-10-29 16:55:32 -0400] someara: https://gist.github.com/someara/89372922b4d1edc547cf
[2013-10-29 16:55:52 -0400] someara: those three resources will be compiled onto the collection, then fire in order during converge
[2013-10-29 16:55:59 -0400] jbz: action :nothing just means 'don't do anything when you compile this resource'.  It can still be kicked off by notify.
[2013-10-29 16:56:33 -0400] elliottt: so, if it has action :nothing present, will it make it to convergence if nothing ever changes its action?
[2013-10-29 16:56:47 -0400] someara: resource 3 will probably act funny *if resource 2 does not block*
[2013-10-29 16:56:48 -0400] elliottt: so, no notifications, and it has no subscription attribute?
[2013-10-29 16:57:08 -0400] jbz: elliottt if it has :nothing set at compile and nothing notifies it, it will never execute.
[2013-10-29 16:57:13 -0400] someara: depends on how you decide to solve your problem
[2013-10-29 16:57:33 -0400] elliottt: so, notification during convergence modifies the run queue?
[2013-10-29 16:57:39 -0400] someara: yep
[2013-10-29 16:57:44 -0400] elliottt: ok
[2013-10-29 16:57:45 -0400] elliottt: that helps
[2013-10-29 16:58:01 -0400] someara: the block_until_operational trick will basically pause the chef-run until your software is done installing
[2013-10-29 16:58:26 -0400] elliottt: it seems like what i really need is to subscribe to the installation resource for the compiler
[2013-10-29 16:58:36 -0400] elliottt: so that my use of it doesn't start until the compiler has finished
[2013-10-29 16:58:38 -0400] freezey: does anyone know who is working on the juniper client?
[2013-10-29 16:58:40 -0400] someara: in the jenkins cookbook example, the script that stars the java process returns before the software is loaded and operational
[2013-10-29 16:58:50 -0400] someara: so you need to block before a dependent resource fires
[2013-10-29 16:59:03 -0400] someara: I bet you're having the same problem
[2013-10-29 16:59:25 -0400] elliottt: so in that case, the installation script forks something that takes some time to start, and that's the problem?
[2013-10-29 16:59:36 -0400] elliottt: the script exits before the service is ready?
[2013-10-29 16:59:52 -0400] someara: yep
[2013-10-29 17:00:02 -0400] elliottt: i think in my case, the installation script should be running to completion before it exits; there arent any async things happening
[2013-10-29 17:00:14 -0400] someara: oh
[2013-10-29 17:00:18 -0400] elliottt: so i should be able to use the dependency stuff to make it work out
[2013-10-29 17:00:44 -0400] elliottt: or does chef fork all uses of execute?
[2013-10-29 17:00:59 -0400] someara: yea. some combination of blocking, notification or subscription can usually solve anything
[2013-10-29 17:01:08 -0400] someara: depending on what the underlying issue really is
[2013-10-29 17:02:24 -0400] elliottt: ok.  thanks for the help :)
[2013-10-29 17:02:34 -0400] elliottt: you two have really cleared up my mental model of how all this stuff works :)
[2013-10-29 17:02:51 -0400] freezey: added a pr https://github.com/opscode-cookbooks/logrotate
[2013-10-29 17:02:56 -0400] freezey: incase someone wants to allow it
[2013-10-29 17:04:38 -0400] stephenking: hi. I'm again trying to upgrade to chef server 11
[2013-10-29 17:04:47 -0400] stephenking: while iploading, I always get: ERROR: JSON::ParserError: Unsupported `json_class` type 'Chef::WebUIUser'
[2013-10-29 17:05:10 -0400] stephenking: I get the same error also when using knife-vault while adding users
[2013-10-29 17:05:23 -0400] stephenking: but my repo never contains a WebUIUser string
[2013-10-29 17:05:28 -0400] stephenking: any idea what's going wrong?
[2013-10-29 17:09:04 -0400] adamjk-dev: hey all, anyone used knife to create a cookbook with passing in the -m EMAIL option and that option being messed up?
[2013-10-29 17:09:41 -0400] adamjk-dev: I did a knife cookbook create my_cookbook -C "My Company" -m "my_email@email.com" -r md         --> and got the email in the metadata file to be 'd'
[2013-10-29 17:10:04 -0400] gchristensen: when I tell ohai to reload a plugin, it *says* its reloaded, but then the attribute isn't available later. running ohai on the node itself works fine. any suggestions on what may be going on here? I'm following this example here - https://github.com/opscode-cookbooks/nginx/blob/master/recipes/ohai_plugin.rb
[2013-10-29 17:13:03 -0400] gchristensen: is thisthe case that lazy attributes are handy?
[2013-10-29 17:14:14 -0400] gchristensen: boom
[2013-10-29 17:14:26 -0400] gchristensen: oops - wrong channel for the 'boom' - the attribute question still stands :P
[2013-10-29 17:33:17 -0400] stormerider: trying to do a chef-rewind on apache so i can get it working with apache2.4, but i'm getting this: Cannot find a resource matching template[/etc/apache2/apache2.conf] (did you define it first?) -- any ideas?
[2013-10-29 17:51:13 -0400] jstallard: is there a way to reference the name of a recipe from within the recipe itself? i.e. If I have a recipe called foo::bar, is there a variable I can access whose value is "foo::bar" ?
[2013-10-29 17:51:42 -0400] opstrong: jstallard: what is your use case for that?
[2013-10-29 17:52:36 -0400] jstallard: a basic one is a comment line at the top of a template file getting created. e.g. "This file created by chef recipe foo::bar. Do not modify"
[2013-10-29 17:57:07 -0400] tomduffi_: jstallard: do you have multiple recipes referencing the same template file?
[2013-10-29 17:57:11 -0400] stormerider: so i figured that out (the template is defined just as template['apache2.conf']), but now i'm having an error with mod_authz_default, even after changing node['apache']['default_modules']
[2013-10-29 17:59:08 -0400] jstallard: tomduffi_: let's say I do
[2013-10-29 18:12:54 -0400] jstallard: there are cookbook_name and recipe_name variables, in case anyone was wondering. So I can use "#{cookbook_name}::#{recipe_name}" to do what I'm trying to do
[2013-10-29 18:25:56 -0400] sdanzig: Hi DevOps people.  I'm trying to get chef-solo running on a Windows 7 VM, with django running in a virtualenv.  All while learning Chef.  It's been a pain in the ass.  Right now, I'm fighting a "NoMethodError: package[python] (python::package line 46) had an error: NoMethodError: undefined method `version'" error trying to install Python.  I saw in the windows cookbook, there's a "version" method in the libraries..  Tried "depends" in
[2013-10-29 18:26:42 -0400] sdanzig: http://dougireton.com/blog/2012/12/16/how-to-include-the-windows-cookbook-helper-methods-in-your-chef-recipe/ suggested I put "::Chef::Recipe.send(:include, Windows::Helper)" in front of the recipe... no luck yet.  Am I fighting a losing battle here?
[2013-10-29 18:28:56 -0400] tomduffield: are you using the community python cookbook sdanzig?
[2013-10-29 18:29:09 -0400] sdanzig: yep... lemme confirm the URL
[2013-10-29 18:29:29 -0400] sdanzig: http://community.opscode.com/cookbooks/python
[2013-10-29 18:29:45 -0400] SFLimey: I'm building a new cloudformation template at AWS to do a build from our hosted chef account. I'm a little confused which version of chef I should specify. The template I'm working off of show 10.24.4-1. Is there any reason I should be using a later version and if not, do you have a recommendation on which version I should specify?
[2013-10-29 18:29:49 -0400] tomduffield: and you're using the latest 1.4.0?
[2013-10-29 18:30:07 -0400] tomduffield: sdanzig: ^^^
[2013-10-29 18:30:09 -0400] sdanzig: I attempted to add that "helper" thing in the package.rb recipe.  And yeah, I think it's 1.4.1
[2013-10-29 18:30:40 -0400] sdanzig: nope, 1.4.0 .. was downloaded within the last week anyway
[2013-10-29 18:31:24 -0400] tomduffield: okay. I don't see any reference to version in the community recipe. Is your code available sdanzig?
[2013-10-29 18:31:52 -0400] tomduffield: SFLimey: I would recommend using at least 11
[2013-10-29 18:32:28 -0400] bilbur: Can anyone help me understand why my chef-clients are getting this error even when they are not passed a run list? http://fpaste.org/50243/07147113/
[2013-10-29 18:33:04 -0400] stormerider: bilbur: looks like an error with a handler configured in the chef client
[2013-10-29 18:33:46 -0400] bilbur: Can you elaborate on "handler" ?
[2013-10-29 18:33:58 -0400] SFLimey: Thanks Tom, any reason I wouldnt just use 11.0.8 (The latest I believe)?
[2013-10-29 18:34:22 -0400] tomduffield: you're welcome SFLimey. and no, I would always encourage you to use the latest which is 11.8
[2013-10-29 18:34:33 -0400] tomduffield: or 11.6
[2013-10-29 18:34:51 -0400] stormerider: bilbur: error handler, report handler, etc.-- check your client.rb
[2013-10-29 18:35:06 -0400] tomduffield: 11.6.2 i think is the latest SFLimey
[2013-10-29 18:35:53 -0400] sdanzig: hmm... no, not available at the moment, but I can certainly make it available  Going to try to retrace where "version" was used first, and I'll reinstall and retest the python library before I post the code.
[2013-10-29 18:36:59 -0400] bilbur: Thanks stormerider my client.rb is: http://fpaste.org/50246/83071790/
[2013-10-29 18:37:06 -0400] SFLimey: Final question Tom, can you just specify "Latest" for ChefVersion default in the cloudformation template to have it just use the latest version?
[2013-10-29 18:37:42 -0400] bilbur: stormerider: So I dont see any handler information...
[2013-10-29 18:38:07 -0400] stormerider: bilbur: not sure, then.
[2013-10-29 18:39:08 -0400] bilbur: stormerider: thanks anywho
[2013-10-29 18:39:10 -0400] tomduffield: SFLimey: I'm not sure since CloudFormation is an Amazon thing.
[2013-10-29 18:39:35 -0400] tomduffield: if you show me your CF script I could take a look but you can also always just give it a shot!
[2013-10-29 18:40:18 -0400] SFLimey: Okay, appreciate the help again Tom.
[2013-10-29 19:02:45 -0400] azret: is there a way to insert the server FQDN into a template file using node?
[2013-10-29 19:03:06 -0400] azret: i added <%= node[:fqdn] %> to a file, but it didn't aggregate the hostname
[2013-10-29 19:03:50 -0400] sdanzig: tomduffield ... Pushed the garbage I was mucking about in here:  https://github.com/sdanzig/chef-repo/tree/python-attempt
[2013-10-29 19:08:17 -0400] tomduffield: sdanzig: sorry to say this but I don't know if this cookbook, as it currently is, will work on windows
[2013-10-29 19:08:32 -0400] tomduffield: and I'm afraid I don't know how to get around that
[2013-10-29 19:09:04 -0400] sdanzig: yeah, I figured that.  I saw a windows version of a python cookbook.. it doesn't have the virtualenv stuff though.  and have been trying cygwin.. but that's a can of worms
[2013-10-29 19:09:38 -0400] sdanzig: can you at least pray/cry for me and I'll keep trying?
[2013-10-29 19:10:19 -0400] tomduffield: i'll light a candle
[2013-10-29 19:32:46 -0400] bilbur: is there a list of all the data ohai attempts to harvest?
[2013-10-29 19:55:43 -0400] justizin: seriously, am I high? wtf http://pastebin.com/Cp2RDpq8
[2013-10-29 19:56:07 -0400] justizin: the actual message: FATAL: Bad value (mixed) for node['postgresql']['config_pgtune']['db_type'] attribute. Valid values are one of dw, oltp, web, mixed, desktop.
[2013-10-29 20:01:37 -0400] tcate: justizin: just a gues, but do you have that node attribute set somewhere to something other than a string?
[2013-10-29 20:02:04 -0400] awgross: justizin: mixed isnt defined as a symbol or anything right?
[2013-10-29 20:02:13 -0400] justizin: awgross: ah that's worth checking
[2013-10-29 20:02:32 -0400] justizin: yep that's it ;d
[2013-10-29 20:03:17 -0400] awgross: yeah, node stuff is mostly the special Mash type, which can do some weird stuff around symbols and strings
[2013-10-29 20:04:09 -0400] awgross: i ended up writing some custom stuff to find/get a nested key in the node attribute regardless of whether is was a string or symbol because I had that issue often
[2013-10-29 20:04:20 -0400] justizin: yah i went through over the weekend and converted all our unnecessary double quotes to single, and converted single quotes to symbols where possible, and i slightly overdid it :)
[2013-10-29 20:04:22 -0400] dmdeklerk: jblack: Hi! In the irc logs I found you ran into a mysql-server apt install issue. I think I'm running into the exact same issue here, did you happen to find a solution (apart from running chef-client again?)
[2013-10-29 20:05:48 -0400] awgross: justizin: yeah the single vs double is a bad one too
[2013-10-29 20:08:12 -0400] f2s: I'm attempting to use the chef-server cookbook to install using vagrant.  Unfortunately it generates a new chef-validator each time and I can't get it to read in my own chef-validator.pem.  Does anyone have an example of a working chef-server via chef solo provisioner and chef client using validation.pem
[2013-10-29 20:11:08 -0400] rcuirle: some of my nodes are not pulling the latest version of the cookbooks from my private chef server.  There are no environment version restrictions, so it should always be getting the latest.  I've tried deleting the cookbook from the node's chef cache, but it still gets an old version from the server.  Any thoughts on where to begin troublshooting?
[2013-10-29 20:15:29 -0400] justizin: rcuirle: are there version constraints imposed by dependency relationships?
[2013-10-29 20:18:33 -0400] coderanger: kallistec: http://hastebin.com/kofipeyuga.rb ;-)
[2013-10-29 20:19:22 -0400] rcuirle: justizin: there are not.  In fact, the cookbook I'm most concerned about is explicitly named in the runlist, so it's at the root and not in a dependency of the cookbook in the runlist
[2013-10-29 20:19:55 -0400] justizin: ah, but if it is *also* listed as a dependency with a version restriction, that will win over no version restriction
[2013-10-29 20:20:06 -0400] justizin: that may not be it, just helping you think it through
[2013-10-29 20:20:48 -0400] awgross: rcuirle: can you see the latest cookbook version on the Chef-Server / have you tried re uploading it?
[2013-10-29 20:21:10 -0400] rcuirle: good point, but probably not what's happening here.  The correct / latest version IS deploying to OTHER nodes, just not ALL
[2013-10-29 20:21:45 -0400] rcuirle: awgross: I can see the latest version on the chef server.  I have not tried to re-upload - will do so now - with a delete and reupload
[2013-10-29 20:21:47 -0400] tubbo: okay so, i'm having a major issue with the decisions made in the mysql cookbook
[2013-10-29 20:22:26 -0400] tubbo: for starters, why the hell is my upstart script taking forever? because the mysql cookbook implements some kind of db installation that sets the DB up for use when i bring it up. makes sense, until Chef times out waiting for the command to finish.
[2013-10-29 20:22:38 -0400] tubbo: my question is...how do i get this to stop so i can go on with my day?
[2013-10-29 20:23:21 -0400] gazarsgo: sudo apt-get install mysql
[2013-10-29 20:23:35 -0400] savant: Hi all. How does chef know to map data_bag_item to the DataBagItem class?
[2013-10-29 20:23:41 -0400] tubbo: gazarsgo: word. i think i'm gonna try that.
[2013-10-29 20:23:51 -0400] tubbo: gazarsgo: this cookbook is really frustrating me.
[2013-10-29 20:24:07 -0400] gazarsgo: tubbo: you can wrap it in a script block, too, and then it's all chef'd and everything.
[2013-10-29 20:24:25 -0400] tubbo: gazarsgo: does that come with an upstart script too?
[2013-10-29 20:24:55 -0400] tubbo: this just started happening like randomly
[2013-10-29 20:25:01 -0400] gazarsgo: i would find a new distro to use if you install a service as a package and it doesn't come with a wrapper script for initd/upstart/whatever
[2013-10-29 20:27:19 -0400] tubbo: gazarsgo: haha true
[2013-10-29 20:28:19 -0400] m00sey: Folks, I'm trying to build out a chef cookbook for my application, I've added 'include_recipe "openssl"' and 'include_recipe "mysql::sever"' - and I'm receiving the error: NameError: uninitialized constant Chef::Recipe::Opscode
[2013-10-29 20:28:41 -0400] f2s: does anyone expain what chef.validation_key_path does in the chef_client provisioner (vagrant) ?
[2013-10-29 20:29:02 -0400] kallistec: coderanger: still don't like it. compile vs. converge is confusing enough as is without having 3 run contexts in alternate stages of compile and converge. Using a resource defn to wrap your LWRP will do exactly the right thing
[2013-10-29 20:29:05 -0400] m00sey: one issue on git talks about adding a 'depends' not sure where that goes, or if it's needed - could I be missing something else?
[2013-10-29 20:29:19 -0400] coderanger: kallistec: That makes subclassing impossible
[2013-10-29 20:29:35 -0400] coderanger: kallistec: It has to be an interwoven flow to allow replacing subsections
[2013-10-29 20:29:43 -0400] kallistec: coderanger: no, the way the LWRP DSL is written makes subclassing impossible
[2013-10-29 20:29:50 -0400] coderanger: kallistec: This isn't an LWRP
[2013-10-29 20:29:53 -0400] kallistec: if you really want subclassing
[2013-10-29 20:30:07 -0400] kallistec: then make a static method on Chef
[2013-10-29 20:30:34 -0400] kallistec: Chef.define_provider(superclass=Chef::Provider::LWRPBase) do; stuff; end
[2013-10-29 20:30:49 -0400] savant: How do I check if a data_bag_item exists?
[2013-10-29 20:30:50 -0400] kallistec: then write your LWRPs in library files
[2013-10-29 20:31:12 -0400] coderanger: kallistec: http://hastebin.com/doyucaguki.rb is the full resource
[2013-10-29 20:31:18 -0400] savant: I am using chef solo
[2013-10-29 20:31:46 -0400] rcuirle: justizin & awgross: not sure if it's related or not, but the node takes forever in "resolving cookbooks for run list" - yet network communications are fine and I can curl to the server which is up - may or may not be related to not getting the right version of the cookbook
[2013-10-29 20:33:28 -0400] awgross: rcuirle: Definitely curious, have you tried runnning with with `-l debug` for more output?
[2013-10-29 20:33:49 -0400] rcuirle: awgross: I have not.  I will try that as well
[2013-10-29 20:36:03 -0400] mveitas: is there a way to see the versions of the cookbooks that have been run against a node?
[2013-10-29 20:36:31 -0400] m00sey: @savant in ruby wouldn't data_bag_item lookup just be nil?
[2013-10-29 20:39:29 -0400] dmdeklerk: savant: knife data bag list
[2013-10-29 20:40:59 -0400] dmdeklerk: m00sey: 'depends' go in your metadata.rb file
[2013-10-29 20:41:48 -0400] m00sey: gotcha - so does 'depends' run the mysql::server recipe, or does the include_recipe do that?
[2013-10-29 20:42:10 -0400] azret: If I am getting "[2013-10-29T16:41:22-04:00] WARN: Expected JSON response, but got content-type 'application/octet-stream'" for a bz2 file i am downloading on a remote server, how do I get the server to return a json response
[2013-10-29 20:42:13 -0400] awgross: mveitas: Running with `-l debug` tells you the version you download from the Chef Server, though it seems to be in hex, let me see if I can find a better way
[2013-10-29 20:42:37 -0400] dmdeklerk: m00sey: depends brings it in your internal 'structure', you can then include_recipe from that
[2013-10-29 20:42:44 -0400] rcuirle: awgross: with debug on, I can see that GET's to chef server are successful for information about the running node and the environment the node is in.  A POST to /reports/nodes/<nodename>/runs is what hangs
[2013-10-29 20:43:11 -0400] m00sey: ok - I think I get that
[2013-10-29 20:43:20 -0400] m00sey: @dmdeklerk thanks
[2013-10-29 20:43:22 -0400] awgross: rcuirle: very strange, it must be trying to upload a huge amount of node data, do you know if you have any large node data in there?
[2013-10-29 20:43:43 -0400] rcuirle: awgross: so I'm not even getting a version yet.  It may be timing out entirely and using the latest version it has - seems like multiple problems.
[2013-10-29 20:43:48 -0400] andrewdeandrade: so when using a git resource, how do I clone with the --bare option? FWIW I'm trying to setup my application servers so I can deploy to them automatically after all tests pass
[2013-10-29 20:44:10 -0400] dmdeklerk: m00sey: your wellcome
[2013-10-29 20:44:16 -0400] awgross: rcuirle: yeah, something strange is definitely happening.  Is it hosted chef or your own
[2013-10-29 20:44:21 -0400] andrewdeandrade: this is the first time I'm doing continuous integration/deployment with chef, so feel free to correct me if I'm approaching this wrong
[2013-10-29 20:45:15 -0400] rcuirle: our own - private - 11.4.0
[2013-10-29 20:45:50 -0400] rcuirle: awgross; I'll take it up with our infrastructure guy - i just don't get why some nodes (on the same network segment) are fine.
[2013-10-29 20:46:09 -0400] awgross: mveitas: Found it, run with `-l debug` and look for 'DEBUG: Cookbooks detail:'
[2013-10-29 20:46:11 -0400] awgross: mveitas: it should have it there
[2013-10-29 20:46:20 -0400] awgross: rcuirle: ok, sorry I use hosted chef so I am not the best with those issues
[2013-10-29 20:46:26 -0400] mveitas: awgross: thanks :)
[2013-10-29 20:46:47 -0400] awgross: mveitas: np
[2013-10-29 20:50:30 -0400] savant: dmdeklerk: programmatically, from within a recipe
[2013-10-29 20:53:04 -0400] dmdeklerk: savant: why not use chef-client. then its simple.
[2013-10-29 20:53:29 -0400] andrewdeandrade: mveitas: you can add `chef_client_path 'chef-client -l debug'` to your knife.rb file to always run in debug mode. when you don't need it, just comment it out
[2013-10-29 20:54:19 -0400] savant: dmdeklerk: because im using it in a recipe and i dont think shelling out to find out whether a data bag exists is a good idea.
[2013-10-29 20:54:34 -0400] dmdeklerk: savant: search(:data_bag_name)
[2013-10-29 20:54:50 -0400] dmdeklerk: savant: but that doesnt work in chef-solo out of the box
[2013-10-29 20:54:56 -0400] savant: hmmm okay
[2013-10-29 20:55:46 -0400] savant: thanks for your help! i'll figure it out :)
[2013-10-29 20:56:33 -0400] dmdeklerk: savant: Why not use chef-client?
[2013-10-29 20:56:55 -0400] tubbo: yo fuck
[2013-10-29 20:56:56 -0400] tubbo: mysql
[2013-10-29 20:56:58 -0400] tubbo: seriously
[2013-10-29 20:57:30 -0400] savant: dmdeklerk: i have a databag setup
[2013-10-29 20:57:33 -0400] savant: i define what a service is
[2013-10-29 20:57:35 -0400] savant: what commands it runs
[2013-10-29 20:57:46 -0400] savant: and what codebases it can/should install on the server
[2013-10-29 20:58:00 -0400] savant: if the data bag item for that codebase doesnt exist, it should fail gracefully
[2013-10-29 20:58:42 -0400] savant: if you mean "why dont you use chef-server" its because we dont have it and we dont plan on doing so for now.
[2013-10-29 21:00:53 -0400] dmdeklerk: savant: Maybe its time to rethink chef-server
[2013-10-29 21:01:57 -0400] dmdeklerk: savant: I used to look into chef-solo-search, never got it working, but it might help you in this case
[2013-10-29 21:02:10 -0400] awgross: savant: if you want you can just do the databag lookup inside a library file, gives you simple access to begin/rescue.  Could do it once and use that function instead
[2013-10-29 21:03:34 -0400] savant: meh
[2013-10-29 21:03:52 -0400] savant: codebases = data_bag("codebases")
[2013-10-29 21:03:57 -0400] savant: codebases.include? codebase
[2013-10-29 21:04:00 -0400] savant: :)
[2013-10-29 21:04:03 -0400] savant: seems to work
[2013-10-29 21:12:49 -0400] idlemichael: can you pass options to the chef-client throuhg knife when you're provisioning a server or something?
[2013-10-29 21:12:59 -0400] bougyman: sure
[2013-10-29 21:13:27 -0400] idlemichael: how do you do that
[2013-10-29 21:13:28 -0400] idlemichael: :O
[2013-10-29 21:15:55 -0400] andrewdeandrade: Guess my question was missed. I've looked everywhere and can't find an answer, but is there a way to clone via a git resource with the --bare option?
[2013-10-29 21:18:17 -0400] dmdeklerk: andrewdeandrade: I dont think you can do that. Since the git resource tries to be idempotent i dont see an easy way to allow a user to pass all sorts of arguments to it. It seems like you have to use the command/execute resource. I'm no expert thouhg!
[2013-10-29 21:19:21 -0400] andrewdeandrade: dmdeklerk: Yeah, I figured as much. It's a huge pain to have imdempotency span the entire server creation from start to finish without some mechanism for "caching" artifacts created along the way
[2013-10-29 21:20:27 -0400] dmdeklerk: andrewdeandrade: Just to be clear I say this, not knowing what the --bare option does
[2013-10-29 21:20:29 -0400] andrewdeandrade: dmdeklerk: I'm trying to get something where vagrant and ami images are idempotent via Packer.io. Then server configuration idempotency is managed via Chef and finally find another solution for node.js application idempotency
[2013-10-29 21:21:32 -0400] dmdeklerk: andrewdeandrade: cant help you with that
[2013-10-29 21:21:33 -0400] andrewdeandrade: dmdeklerk: the --bare option clones a repo without a working tree. it's meant strictly to receive changes coming from another git repo. It's the option that is commonly used with continuous integration/deployment of apps
[2013-10-29 21:21:37 -0400] andrewdeandrade: dmdeklerk: np
[2013-10-29 21:22:57 -0400] andrewdeandrade: looks like this will work: https://github.com/gerhard/deliver
[2013-10-29 21:25:27 -0400] dmdeklerk: andrewdeandrade: But... do they have an irc channnel?
[2013-10-29 21:32:48 -0400] andrewdeandrade: dmdeklerk: dunno... it's an alternative to what i wanted to do
[2013-10-29 21:33:55 -0400] awgross: they probably do, same people make packer and vagrant
[2013-10-29 21:34:51 -0400] andrewdeandrade: since a lot of people here do ops, I was wondering if anyone knew of a tool that dynamically adds and removes entries in the /etc/hosts file... like if i cd into a chef project that deploys to ec2, it would be nice to be able to have some hosts added dynamically  to /etc/hosts and reloaded
[2013-10-29 21:37:09 -0400] dmdeklerk: andrewdeandrade: google?? http://powdahound.com/2010/07/dynamic-hosts-file-using-chef
[2013-10-29 21:37:37 -0400] andrewdeandrade: dmdeklerk: was just doing that
[2013-10-29 21:37:57 -0400] dmdeklerk: lol
[2013-10-29 21:39:00 -0400] silk: Is there a reason that the data retrieved from an API call to /environments would be different to the data retrieved by knife ? (Is there a possibility of delay in one or the other for recent updates)
[2013-10-29 21:39:38 -0400] andrewdeandrade: silk: I think if you have a Chef Server, knife will always pull from the Chef Server and ignore the local files.
[2013-10-29 21:39:52 -0400] silk: using hosted chef
[2013-10-29 21:39:55 -0400] andrewdeandrade: silk: you need to upload your /environments on each change
[2013-10-29 21:40:14 -0400] silk: well, I used knife to edit it, and the changes have taken place on the node
[2013-10-29 21:40:25 -0400] andrewdeandrade: silk: knife environment from file environments/some_env.{rb,json}
[2013-10-29 21:40:28 -0400] silk: but when querying the contents of the environment via the API, there are differences
[2013-10-29 21:40:43 -0400] silk: Andrew, i dont use that method
[2013-10-29 21:40:47 -0400] andrewdeandrade: silk: oh, you mean via a rest call
[2013-10-29 21:40:55 -0400] silk: knife environment edit $blah
[2013-10-29 21:41:11 -0400] silk: yes
[2013-10-29 21:41:21 -0400] silk: the contents being returned appear to be stale
[2013-10-29 21:43:21 -0400] andrewdeandrade: silk: dunno... haven't used that yet
[2013-10-29 21:47:56 -0400] jjasonclark: anyone have an example of installing mysql 5.1 with the community cookbook? http://community.opscode.com/cookbooks/mysql I can only get it to install version 5.0
[2013-10-29 21:49:19 -0400] dmdeklerk: jjasonclark: I put this in my attributes file. default['mysql']['server']['packages'] = %w[mysql-client-5.5 mysql-server-5.5]. Not sure if I need the client package
[2013-10-29 21:50:47 -0400] jjasonclark: @dmdeklerk I also tried the same thing. I picked mysql51 and mysql51-mysql-server although the log showed it was still trying to install the mysql package
[2013-10-29 21:51:29 -0400] dmdeklerk: jjasonclark: well thats just weird
[2013-10-29 21:51:51 -0400] dmdeklerk: jjasonclark: your on ubuntu?
[2013-10-29 21:52:25 -0400] jjasonclark: @dmdeklerk centos 5.9
[2013-10-29 21:53:20 -0400] dmdeklerk: jjasonclark: is that debian?
[2013-10-29 21:53:22 -0400] jjasonclark: yea. very odd.  I of course can install it manually.  first thing I checked.  Seems odd that chef cannot do it
[2013-10-29 21:53:46 -0400] dmdeklerk: jjasonclark: I was just doing this on ubuntu tonight.
[2013-10-29 21:53:49 -0400] jjasonclark: I think its "rhel"  http://docs.opscode.com/dsl_recipe_method_platform_family.html
[2013-10-29 21:54:56 -0400] dmdeklerk: jjasonclark: did you check out the cookbook source, mysql cookbook is one of the *simple* one IMHO
[2013-10-29 21:56:07 -0400] jjasonclark: @dmdeklerk I did. It looked like https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L104 was what I needed to change. But was surprised when it didn't
[2013-10-29 21:57:04 -0400] jjasonclark: @dmdeklerk the attributes just needed to be updated.  I did that in an app specific cookbook that sets the attribute
[2013-10-29 21:57:14 -0400] dmdeklerk: jjasonclark: that line was giving me troubles too. on ubuntu.
[2013-10-29 21:57:24 -0400] jjasonclark: hmm..
[2013-10-29 21:57:30 -0400] dmdeklerk: jjasonclark: untill i set that attribute.
[2013-10-29 21:57:45 -0400] jjasonclark: how did you set it? maybe I did it wrong
[2013-10-29 21:58:09 -0400] jjasonclark: I have it in my attributes file of the app specific cookbook.  This seems to work for all the other settings.
[2013-10-29 21:58:25 -0400] dmdeklerk: jjasonclark: I 'm on debian offcourse so the package names might be different for you
[2013-10-29 21:58:43 -0400] dmdeklerk: jjasonclark: thats my method too
[2013-10-29 22:02:44 -0400] hugespoon: dmdeklerk: use node.override if you are overriding another cookbooks default attributes (or just override as the node is implied in an attributes file)
[2013-10-29 22:03:11 -0400] hugespoon: dmdeklerk: ive done exactly what you are suggesting in a wrapper cookbook for mysql
[2013-10-29 22:03:49 -0400] dmdeklerk: hugespoon: Cool. Thanks!
[2013-10-29 22:06:26 -0400] dmdeklerk: hugespoon: what is the syntax? "node.override['mysql']['server']['packages'] = foo" ?
[2013-10-29 22:07:45 -0400] dmdeklerk: hugespoon: never mind, it is that syntax, i'm being lazy
[2013-10-29 22:08:06 -0400] hugespoon: dmdeklerk: not a problem, but that should do ya
[2013-10-29 22:26:09 -0400] jjasonclark: shoot! tried it with the override syntax and it didn't work.  I'm guessing I'm not setting an attribute like I should.  Going to read the source 1 more time. Thankfully mysql is a short one
[2013-10-29 22:38:12 -0400] dmdeklerk: jjasonclark: I just noticed mysql::server includes mysql::client, which uses default['mysql']['client']['packages'] = %w[mysql mysql-devel]
[2013-10-29 22:39:25 -0400] dmdeklerk: jjasonclark: That would explain the mysql package in your log.
[2013-10-29 22:41:07 -0400] dmdeklerk: jjasonclark: I'm now seeing this: Ran "/usr/bin/mysql" -u root -p'FILTERED' < "/etc/mysql/grants.sql" returned 1.. ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) arghhh
[2013-10-29 22:57:01 -0400] CharlieSu: Anyone looking for a DevOps job in Colorado?  If so, PM me.
[2013-10-29 23:05:49 -0400] redondos: even though I've configured knife.rb with log_level :info, running `knife bootstrap' throws: opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-log-1.4.1/lib/mixlib/log.rb:97:in `level=': Log level must be one of :debug, :info, :warn, :error, or :fatal (ArgumentError)
[2013-10-29 23:06:00 -0400] redondos: any hints?
[2013-10-29 23:10:26 -0400] coderanger: redondos: Is it throwing that locally or remotely?
[2013-10-29 23:12:21 -0400] redondos: remotely
[2013-10-29 23:12:44 -0400] redondos: coderanger: ^
[2013-10-29 23:13:00 -0400] coderanger: redondos: what does knife --version show
[2013-10-29 23:13:10 -0400] redondos: Chef: 11.6.0
[2013-10-29 23:13:18 -0400] coderanger: And are you using the default bootstrap?
[2013-10-29 23:13:43 -0400] redondos: probably, because I didn't know you could change the bootstrap script
[2013-10-29 23:16:11 -0400] redondos: bootstrapping a different node works well, so it must have to do with a setting in this node
[2013-10-29 23:18:56 -0400] redondos: running it with `-d ubuntu12.04-gems' worked. thanks for the hint, coderanger!
[2013-10-29 23:19:14 -0400] coderanger: redondos: That is highly not recommended
[2013-10-29 23:19:44 -0400] redondos: i assumed since it installed the gems one by one. what do you recommend?
[2013-10-29 23:20:06 -0400] coderanger: You should be using the default, it is likely that first server already had an older version of chef installed by hand
[2013-10-29 23:20:13 -0400] coderanger: You should just kill it and spawn a new one
[2013-10-29 23:21:25 -0400] redondos: ok, thanks again.
[2013-10-29 23:22:01 -0400] coderanger: By default the log_level is set to :auto
[2013-10-29 23:22:08 -0400] coderanger: which older versionso f chef didn't understand
[2013-10-29 23:22:42 -0400] redondos: how could i change the log_level remotely? (knife.rb does specify :info)
[2013-10-29 23:23:03 -0400] coderanger: chef-client cookbook
[2013-10-29 23:23:35 -0400] redondos: and you are right, the node had 10.24.0 installed
[2013-10-29 23:24:15 -0400] redondos: is it possible to use bootstrap to upgrade previous installations of chef?
[2013-10-29 23:33:16 -0400] dmdeklerk: Hi ops-folks..
[2013-10-29 23:33:27 -0400] dmdeklerk: Could someone help this dev out and tell me if this apache conf looks sane?
[2013-10-29 23:33:38 -0400] dmdeklerk: http://paste.ubuntu.com/6326968/ App is giving a "301 Moved Permanently" and "<p>The document has moved <a href="http://pricetool.foo.com/">here</a>.</p>". I'm really not at all sure whats going on there.
[2013-10-29 23:35:01 -0400] dmdeklerk: conf comes from the passenger_apache2 cookbook
[2013-10-29 23:39:38 -0400] coderanger: redondos: Not normally, you can use the omnibus_updater cookbook now though
[2013-10-29 23:41:19 -0400] redondos: k, ty. i'm going to spawn a new instance instead, which means rewriting some recipes but it needed to be done eventually.
[2013-10-29 23:43:35 -0400] coderanger: redondos: Welcome to the ephemeral future
[2013-10-29 23:43:36 -0400] coderanger: :)
[2013-10-29 23:43:45 -0400] redondos: heh
[2013-10-29 23:43:58 -0400] _ci: Using the opscode database cookbook, is there a way to add "REQUIRE SSL" to :grant statements?
[2013-10-29 23:47:35 -0400] quack_up: remedial question, i'm having a hard time using the chef-client cookbook to get the chef-client to run as a service after bootstrap.  i've got a role "base" with chef-client::config, service, init_service recipes (in that order).  after i bootstap vms with that role, the service isn't running.  did i need to do something else to get it to be started by default?
[2013-10-29 23:54:49 -0400] packeteer: guys, can somebody point me at an example role with multiple recipes ?
[2013-10-29 23:55:22 -0400] nshenry03: If you set an attribute in  attributes/default.rb (default['jumpcloud']['databag_name'] = 'secrets'), you should be able to use that in a recipe without setting it in a role or anything, correct?
[2013-10-29 23:55:39 -0400] nshenry03: jumpcloud_credentials = Chef::EncryptedDataBagItem.load(node['jumpcloud']['databag_name'], node['jumpcloud']['databagitem_name'])

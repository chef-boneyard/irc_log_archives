[2013-11-11 00:40:06 -0500] packeteer: guys, is there a guide to the contents of a cookbook? I'm trying to create a document for my company that describes the files/dirs and functions of a cookbook (a picture would be nice)
[2013-11-11 00:57:16 -0500] holms: http://docs.opscode.com/install_server.html
[2013-11-11 00:57:37 -0500] holms: #  chef-server-ctl
[2013-11-11 00:57:37 -0500] holms: -bash: chef-server-ctl: command not found
[2013-11-11 00:57:46 -0500] holms: in /opt/chef everything has different name, wtf?
[2013-11-11 00:57:51 -0500] holms: 2 days ago it was there
[2013-11-11 01:00:58 -0500] holms: anybody? why the hell docs broken again
[2013-11-11 01:23:38 -0500] teukka: holms: are you sure you installed the chef-server, not the chef-client package?
[2013-11-11 01:25:12 -0500] holms: oh debian is not supported =(((
[2013-11-11 01:25:15 -0500] holms: that was stupid of me
[2013-11-11 01:26:13 -0500] teukka: holms: you can use the ubuntu packages. just pick up old enough to get compatible glibc version
[2013-11-11 01:27:10 -0500] teukka: holms: IIRC the 12.04 package works for wheezy
[2013-11-11 01:27:38 -0500] holms: well that what i mean..
[2013-11-11 01:28:01 -0500] holms: anywya nvm.. just rebuilded instance to centos..
[2013-11-11 01:29:05 -0500] holms:  Errno::ENOMEM: Cannot allocate memory - fork(2)
[2013-11-11 01:29:06 -0500] holms: X_X
[2013-11-11 01:29:12 -0500] holms: 512mb is not enough?
[2013-11-11 01:30:29 -0500] teukka: holms: I think 1GB is the minimum requirement
[2013-11-11 01:31:01 -0500] teukka: yep: http://docs.opscode.com/chef_system_requirements.html#the-server
[2013-11-11 01:32:17 -0500] holms: ...
[2013-11-11 01:32:31 -0500] holms: i'll try to add swap instead..
[2013-11-11 01:35:21 -0500] holms: that worked
[2013-11-11 02:13:48 -0500] jameson-pmac: anyone having issue with test-kitchen and busser-bats ?
[2013-11-11 02:14:56 -0500] jameson-pmac: Command [./install.sh /tmp/kitchen-busser/vendor/bats] exit code was 1
[2013-11-11 02:15:11 -0500] jameson-pmac: it was working fine yesterday, but today it's breaking all over the place :\
[2013-11-11 02:15:59 -0500] jameson-pmac: "cp: cannot create regular file `/tmp/kitchen-busser/vendor/bats/share/man/man1': No such file or directory"
[2013-11-11 02:29:28 -0500] holms: guys
[2013-11-11 02:29:35 -0500] holms: i need a pattern here..
[2013-11-11 02:29:50 -0500] holms: add roles, then add nodes with multiple roles, then bootstrap
[2013-11-11 02:30:01 -0500] holms: i've got empty node run_list in this sequence
[2013-11-11 02:30:55 -0500] holms: guys..??
[2013-11-11 02:31:02 -0500] flaccid: girls
[2013-11-11 02:31:14 -0500] holms: where's everybody =/
[2013-11-11 02:31:32 -0500] flaccid: are you trying to ask a question?
[2013-11-11 02:32:48 -0500] holms: issue is not necessary a question
[2013-11-11 02:33:01 -0500] flaccid: ok then..
[2013-11-11 02:33:15 -0500] holms: knife node edit mynode
[2013-11-11 02:33:19 -0500] holms: added role in run_list
[2013-11-11 02:33:27 -0500] holms: knife bootstrap mynode
[2013-11-11 02:33:34 -0500] holms: and run_list is empty after that.. why?
[2013-11-11 02:35:30 -0500] holms: how to provision a node =(
[2013-11-11 02:51:34 -0500] jameson-pmac: mm
[2013-11-11 02:51:48 -0500] jameson-pmac: I managed to enter a issue that have spawned in the last 5 hours @_@
[2013-11-11 02:56:27 -0500] teukka: holms: how can you edit a node before bootstrapping (i.e. creating) it?
[2013-11-11 02:57:04 -0500] teukka: holms: normally you pass the run_list as an option: knife bootstrap -r ...
[2013-11-11 03:01:28 -0500] holms: tubbo:
[2013-11-11 03:01:34 -0500] holms: teukka: well you can
[2013-11-11 03:01:38 -0500] holms: knife node edit mydomain
[2013-11-11 03:01:47 -0500] holms: or create one with: knife node create mydomain
[2013-11-11 03:02:03 -0500] holms: or even more, i prefer to load node from file
[2013-11-11 03:02:25 -0500] holms: if i have 10 roles to apply then what?
[2013-11-11 03:02:35 -0500] holms: running huge command everytime? no thnx
[2013-11-11 03:02:40 -0500] holms: i want to store everything nicely in repo
[2013-11-11 03:06:37 -0500] teukka: holms: you didn't say "create" before =)
[2013-11-11 03:07:00 -0500] holms: ok sorry :)
[2013-11-11 03:07:01 -0500] holms: what's next
[2013-11-11 03:07:05 -0500] jameson-pmac: knie bootstrap is only suppose to install the chef client
[2013-11-11 03:07:09 -0500] teukka: holms: maybe spiceweasel is what you want?
[2013-11-11 03:07:18 -0500] jameson-pmac: unless you tell it otherwise.
[2013-11-11 03:07:39 -0500] teukka: jameson-pmac: it also creates the node and client to chef server if they don't exis
[2013-11-11 03:07:55 -0500] holms: ok trying this manual seems legit
[2013-11-11 03:07:55 -0500] holms: http://leopard.in.ua/2013/09/01/chef-server-getting-started-part-2/
[2013-11-11 03:08:02 -0500] holms: shows how to create env from file, and node from file
[2013-11-11 03:08:36 -0500] jameson-pmac: uh yeah that too
[2013-11-11 03:09:09 -0500] teukka: well, chef-client does it, but still
[2013-11-11 03:09:38 -0500] holms: knife create node on chef-server..
[2013-11-11 03:09:41 -0500] holms: creates*
[2013-11-11 03:09:55 -0500] holms: i'm totally confused how you apply your node config to your vm
[2013-11-11 03:10:06 -0500] holms: there's "knife ec2" and "knife hp"
[2013-11-11 03:10:12 -0500] holms: what about "knife my.stupid.domain.com"
[2013-11-11 03:10:29 -0500] jameson-pmac: are you trying to make the chef-client to run on the node?
[2013-11-11 03:10:33 -0500] teukka: holms: the node names must match
[2013-11-11 03:11:00 -0500] teukka: holms: by default the fqdn, but you can pass `--node-name` or configure it in client.rb
[2013-11-11 03:11:42 -0500] teukka: fqdn as `hostname -f` on the node
[2013-11-11 03:11:45 -0500] holms: jameson-pmac: yes
[2013-11-11 03:12:36 -0500] holms: teukka: what's the command
[2013-11-11 03:12:58 -0500] jameson-pmac: holms:  as teukka said you will need to issue the command to the node (as per that guide)
[2013-11-11 03:14:06 -0500] jameson-pmac: the node config is on the server, and once you have bootstrapped the node, the chef-client must be ran from the node via "knife ssh "name:mynodename" "sudo chef-client"
[2013-11-11 03:15:47 -0500] jameson-pmac: then you can add the chef-client recipe to make it auto-run periodically.
[2013-11-11 03:15:56 -0500] jameson-pmac: er cookbook.
[2013-11-11 03:15:57 -0500] holms: so i was searching for this allover the web for 3 days.. " knife ssh 'name:*' 'sudo chef-client'"
[2013-11-11 03:16:14 -0500] jameson-pmac: :D
[2013-11-11 03:16:18 -0500] holms: bless you guys
[2013-11-11 03:16:28 -0500] holms: i tried so many query strings
[2013-11-11 03:16:36 -0500] holms: like bootstrap, exec, provision, apply
[2013-11-11 03:16:45 -0500] holms: ook..
[2013-11-11 03:16:52 -0500] holms: how to do this massively/
[2013-11-11 03:17:02 -0500] jameson-pmac: the 2nd query in knife ssh is a query string
[2013-11-11 03:17:29 -0500] holms: for example if I edited node,role or smtng else.. and added updates through knife... when chef-client re-runs?
[2013-11-11 03:17:58 -0500] jameson-pmac: by default chef-client doesn't re-run automatically
[2013-11-11 03:18:29 -0500] holms: is there's posbility to enable this?
[2013-11-11 03:18:30 -0500] jameson-pmac: you can use chef-client cookbook to make it update automatically https://github.com/opscode-cookbooks/chef-client
[2013-11-11 03:18:32 -0500] teukka: you can run it as a daemon or from cron (or even manually)
[2013-11-11 03:18:48 -0500] holms: hmz
[2013-11-11 03:18:52 -0500] teukka: +1 for chef-client cookbook. I prefer cron nowadays
[2013-11-11 03:20:56 -0500] teukka: but for bootstrapping I just use `knife bootstrap` or the cloud equivalents. spiceweasel can help in some cases
[2013-11-11 03:21:35 -0500] teukka: but now to sleep. good luck =)
[2013-11-11 03:21:52 -0500] holms: in this situation "knife solo cook" is just a bliss
[2013-11-11 03:22:01 -0500] holms: i mean you just "cook" and it's done
[2013-11-11 03:26:36 -0500] jameson-pmac: some nice things for solo, some not-so-nice things with solo :3
[2013-11-11 03:28:57 -0500] holms: there could be some
[2013-11-11 03:28:59 -0500] holms: knife client run
[2013-11-11 03:29:00 -0500] holms: or smtng..
[2013-11-11 03:29:59 -0500] holms: for now to code Makefile would be really smart..
[2013-11-11 03:32:04 -0500] jameson-pmac: there was a reasoning for why knife bootstrap didn't run chef-client immediately or why it was an option to not run it immediately.
[2013-11-11 03:33:38 -0500] holms: jameson-pmac: so there's and option to run it immediately?
[2013-11-11 03:34:06 -0500] jameson-pmac: well you can tell knife bootstrap with run_list chef-client :D
[2013-11-11 03:34:31 -0500] jameson-pmac: the node will run whatever was configured for it in the node definition I believe (or I could be wrong)
[2013-11-11 03:34:35 -0500] holms: as far as I understood, this just setups a cron
[2013-11-11 03:34:47 -0500] holms: so not an immediate execution
[2013-11-11 03:34:49 -0500] holms: right..?
[2013-11-11 03:35:13 -0500] holms: \o/ STDERR: Failed to fetch http://ftp.us.debian.org/debian/pool/main/libx/libxcb/libxcb-render0_1.8.1-2_amd64.deb  404  Not Found [IP: 64.50.236.52 80]
[2013-11-11 03:36:05 -0500] jameson-pmac: mm yeah
[2013-11-11 03:36:26 -0500] jameson-pmac: knife ssh, I think that's what my provisioning scripts do I think
[2013-11-11 03:36:50 -0500] holms: Makefiles are definetely way to go
[2013-11-11 03:36:55 -0500] holms: just having them in repo..
[2013-11-11 03:36:59 -0500] holms: make mycoolhost.com
[2013-11-11 03:37:18 -0500] jameson-pmac: makefiles, rakefiles, thorfiles, bash files, python script, pick a flavor
[2013-11-11 03:37:52 -0500] flaccid: holms: is the apt cache up to date?
[2013-11-11 04:21:44 -0500] holms: knife role from file roles/myrole.rb doesn't update a file?
[2013-11-11 04:21:46 -0500] holms: a role*
[2013-11-11 04:25:59 -0500] holms: huh=/? http://pastie.org/8471167
[2013-11-11 04:36:04 -0500] rafaelmagu: Is there a way to completely reset a chef-server omnibus install?
[2013-11-11 04:36:14 -0500] rafaelmagu: I want to wipe all cookbooks, roles, etc
[2013-11-11 04:36:40 -0500] rafaelmagu: I'm ready to migrate from a 10.x to an 11.x install on a different node
[2013-11-11 04:36:53 -0500] rafaelmagu: But wanted to wipe my previous tests on that 11.x node
[2013-11-11 06:04:59 -0500] Durzo: is it possible to call a notify to the group resource??
[2013-11-11 06:05:27 -0500] Durzo: i.e from an apt_package - notifies :manage "group[somegroup]", :immediately
[2013-11-11 08:14:10 -0500] michael_mbp: hi
[2013-11-11 08:15:04 -0500] slicknick: wh00dy d00dy
[2013-11-11 08:15:54 -0500] michael_mbp: anyone about? I've got a chef server (called chef) and client (chef_client) setup in vagrant; I've switched the 11.0.8 chef server to use HTTP instead of HTTPS and I was able to upload all cookbooks via `berks upload`.  However, `knife upload nodes` fails with a 'ERROR: Attempt to use relative path 'nodes' when current directory is outside the repository path' error.
[2013-11-11 08:16:29 -0500] michael_mbp: Also trying `knife node from file nodes/*.json -V -V` shows the 'Method Not Allows' error is really a 405 HTTP response.
[2013-11-11 08:16:45 -0500] michael_mbp: hey slicknick
[2013-11-11 08:16:49 -0500] michael_mbp: ideas?
[2013-11-11 08:16:50 -0500] slicknick: you're trying to upload cookbooks from the wrong dir
[2013-11-11 08:16:59 -0500] michael_mbp: slicknick: cookbooks worked
[2013-11-11 08:17:06 -0500] michael_mbp: I'm getting that first error for nodes
[2013-11-11 08:17:19 -0500] michael_mbp: I tried doing the node upload from inside nodes/ as well - same thing
[2013-11-11 08:17:22 -0500] slicknick: upload nodes is a new one to me
[2013-11-11 08:17:32 -0500] slicknick: youre out of my league, sorry
[2013-11-11 08:17:45 -0500] michael_mbp: what about the old school 405 error?
[2013-11-11 08:17:50 -0500] michael_mbp: for knife node from...
[2013-11-11 08:18:15 -0500] michael_mbp: put it this way, the node already exists on the server, could that be the reason
[2013-11-11 08:18:16 -0500] michael_mbp: ?
[2013-11-11 08:19:03 -0500] michael_mbp: when I bootstrapped the node, it was added to the chefserver but now I'm trying to update the node with its run_list.
[2013-11-11 08:22:42 -0500] slicknick: yo no comprende, lo siento
[2013-11-11 08:27:32 -0500] michael_mbp: heh ok
[2013-11-11 08:47:30 -0500] michael_mbp: so strange
[2013-11-11 08:47:46 -0500] michael_mbp: `knife role from file roles/*.json` works but node from nodes gets a 405
[2013-11-11 08:58:07 -0500] dtrott: Why would you try to define nodes from file ?
[2013-11-11 08:58:22 -0500] dtrott: Sorry to put it another way what are your trying to achieve ?
[2013-11-11 09:40:51 -0500] michael_mbp: dtrott: ?
[2013-11-11 09:41:15 -0500] michael_mbp: because we manage everything in the chef-repo (kitchen).
[2013-11-11 09:42:08 -0500] dtrott: How do you bootstrap the nodes though because they need to do the key exchange to register with the server ...
[2013-11-11 09:42:25 -0500] michael_mbp: knife bootstrap does that
[2013-11-11 09:42:35 -0500] michael_mbp: and adds it as a node on the chef server
[2013-11-11 09:42:37 -0500] michael_mbp: that part works.
[2013-11-11 09:42:50 -0500] dtrott: hence my original question what are you doing with node from file ?
[2013-11-11 09:42:53 -0500] michael_mbp: but because I'm trying to work with vagrant, I've got https off.
[2013-11-11 09:43:00 -0500] michael_mbp: dtrott: updating its info
[2013-11-11 09:43:06 -0500] michael_mbp: as I've now added a run_list :)
[2013-11-11 09:43:34 -0500] dtrott: You can pass the run_list to the bootstrap command...
[2013-11-11 09:43:43 -0500] michael_mbp: oh?
[2013-11-11 09:43:51 -0500] michael_mbp: so you're saying not to manage it by file?
[2013-11-11 09:44:16 -0500] dtrott: Thats where things get "iky"
[2013-11-11 09:44:34 -0500] michael_mbp: dtrott: I was following http://leopard.in.ua/2013/09/01/chef-server-getting-started-part-2/
[2013-11-11 09:45:22 -0500] dtrott: We created a custom bootstrapping process where we could bootstrap an entire environment with one file assign the roles to each server...
[2013-11-11 09:45:45 -0500] dtrott: I think it got open sourced as the knife cloudstack plugin.
[2013-11-11 09:46:27 -0500] dtrott: Its not really much better than what your doing, just saved a step...
[2013-11-11 09:48:15 -0500] dtrott: There were plans to take it further but they will have to wait until I get to build them at the next company ....
[2013-11-11 09:51:32 -0500] michael_mbp: hmmm
[2013-11-11 09:52:18 -0500] michael_mbp: dtrott: you work for opscode or?
[2013-11-11 09:52:45 -0500] dtrott: not opscode.
[2013-11-11 09:53:39 -0500] michael_mbp: so you've never uploaded a node from file?
[2013-11-11 09:53:39 -0500] dtrott: knife cs plugin was written @ Edmunds.
[2013-11-11 09:53:42 -0500] michael_mbp: to a chef server?
[2013-11-11 09:54:15 -0500] michael_mbp: I'm new but the way I see it chef-client runs on the node, sees the node info change on the server and updates itself.
[2013-11-11 09:54:48 -0500] dtrott: breaking that statement down:
[2013-11-11 09:54:55 -0500] dtrott: The client run does run on the node.
[2013-11-11 09:55:02 -0500] michael_mbp: I found a reciple (in that same article) to do that on a 30 min cycle.
[2013-11-11 09:55:05 -0500] michael_mbp: *Recipe
[2013-11-11 09:55:28 -0500] dtrott: the client really treats the server as a combination of a file server and a data store.
[2013-11-11 09:55:50 -0500] dtrott: the recipes are really just downloaded from the server (file server).
[2013-11-11 09:56:12 -0500] dtrott: most of the other data is stored in the "datastore" some of which is updated by the client as it runs
[2013-11-11 09:56:26 -0500] dtrott: Ohai (automatic) and any normal attributes.
[2013-11-11 09:56:50 -0500] michael_mbp: rather strange that article says one can do this hmm...
[2013-11-11 09:57:12 -0500] michael_mbp: but I do recall the node (file) really being used during the bootstrap process
[2013-11-11 09:57:54 -0500] dtrott: bootstrapping is rather flexible you can do it a bunch of ways, whatever suits your environment is probably best ...
[2013-11-11 09:58:28 -0500] michael_mbp: ok so question, what if I boostrap the node again
[2013-11-11 09:58:41 -0500] michael_mbp: it should pass the run_list info back to the server...
[2013-11-11 09:58:57 -0500] dtrott: what is your definition of "bootstrapping"?
[2013-11-11 10:01:51 -0500] dtrott: True bootstrapping means registering the node with the server in which case you will need to delete the node and the client records from the server
[2013-11-11 10:02:27 -0500] dtrott: At which point you can re-run the knife bootstrap process and pass in a new run list with the -r switch
[2013-11-11 10:02:54 -0500] dtrott: Alternatively log into the machine and delete the nodes private key and just do a chef-client run.
[2013-11-11 10:03:06 -0500] dtrott: That will re-register the node but with an empty run list
[2013-11-11 10:03:12 -0500] dtrott: hence you will need to add it again.
[2013-11-11 10:03:29 -0500] dtrott: But the question becomes what you are trying to achieve.
[2013-11-11 10:03:43 -0500] dtrott: If you are just testing (manually) most of this is irrelevant.
[2013-11-11 10:04:13 -0500] dtrott: If you are building a large number of machines you probably need to think about what your "whole environment" process looks like.
[2013-11-11 10:47:22 -0500] michael_mbp: dtrott: got it.
[2013-11-11 10:56:38 -0500] michael_mbp: dtrott: how can I updare the node's runlist from knife ?
[2013-11-11 10:56:53 -0500] michael_mbp: paass -r ?
[2013-11-11 10:57:22 -0500] michael_mbp: I agree; bootstrapping should only be done once
[2013-11-11 11:04:44 -0500] michael_mbp: dtrott: ?
[2013-11-11 11:05:09 -0500] dtrott: knife node run_list add ...
[2013-11-11 11:05:16 -0500] michael_mbp: ah thanks :)
[2013-11-11 11:05:29 -0500] dtrott: But again I didn't do that except during manual testing
[2013-11-11 11:05:38 -0500] michael_mbp: oh...
[2013-11-11 11:06:10 -0500] michael_mbp: ok so this is not something one should do as an 'on going' process...
[2013-11-11 11:06:19 -0500] dtrott: See "knife cs stack create"     https://github.com/CloudStack-extras/knife-cloudstack
[2013-11-11 11:06:19 -0500] michael_mbp: that's what you mean "whole env process" ?
[2013-11-11 11:07:55 -0500] dtrott: We ended up breaking it into about 4 stack files for each of the tiers of the app as the first tier needed to be online before bring up the next one.
[2013-11-11 11:08:19 -0500] michael_mbp: ah.
[2013-11-11 11:08:47 -0500] dtrott: an environment was about 250-300 machines split across those files.
[2013-11-11 11:09:10 -0500] holms: can somebody explain, how can I setup fqdn in intranet? chef-server requires fqdn =/
[2013-11-11 11:10:24 -0500] dtrott: #networking ask about DNS
[2013-11-11 11:10:42 -0500] holms: what abuot if don't want to have any dns
[2013-11-11 11:10:50 -0500] holms: why chef-server can't just use IP
[2013-11-11 11:11:35 -0500] dtrott: I think it can if you explicitly name every node during the bootstrap process, but I have never done that.
[2013-11-11 11:11:49 -0500] holms: hmz
[2013-11-11 11:12:31 -0500] dtrott: -N switch for knife bootstrap
[2013-11-11 11:13:34 -0500] irr: Ohai Chef's. Anyone knows how to make option "chef_solr['commit_interval']" actually work? Doesn't work here. Only works if I edit "maxTime" in /var/opt/chef-server/chef-solr/etc/solr.rb
[2013-11-11 11:21:09 -0500] michael_mbp: dtrott: have you worked with chef 10.12?
[2013-11-11 11:22:22 -0500] workmad3: holms: give the machine a decent hostname... the fqdn doesn't need to be resolvable, it just needs to be present
[2013-11-11 11:23:49 -0500] dtrott: michael_mbp: I don't remember the version numbers I am currently just using the latest versions and hosted chef and/or chef solr
[2013-11-11 11:23:52 -0500] dtrott: solo
[2013-11-11 11:43:07 -0500] michael_mbp: hey workmad3 are you using any recipes to set the fqdn?
[2013-11-11 11:43:16 -0500] michael_mbp: I found a popular one on opscode but it breaks.
[2013-11-11 11:44:01 -0500] workmad3: no, I get the hostname (and by extension the fqdn) set when creating my VPS :)
[2013-11-11 11:44:48 -0500] michael_mbp: ah right...
[2013-11-11 11:44:59 -0500] michael_mbp: true, for 'real' deploys, that's usually the case.
[2013-11-11 11:45:12 -0500] michael_mbp: this seems decent https://github.com/nickola/chef-hostname
[2013-11-11 11:45:15 -0500] michael_mbp: not tried it yet.
[2013-11-11 11:45:50 -0500] michael_mbp: for testing cookbooks, I think it makes more sense to use knife-solo and bootstrap a vagrant box (precise64) rather than testing against a chef server itself.
[2013-11-11 11:46:12 -0500] michael_mbp: at the momenmt I've got a dummy server/client runnning with vagrant :)
[2013-11-11 11:46:44 -0500] dtrott: I just wish someone would sort out the bug with vmware and vagrant...
[2013-11-11 11:47:21 -0500] workmad3: michael_mbp: well, with vagrant I'd use https://github.com/smdahlen/vagrant-hostmanager and vagrant's built-in hostname management ;)
[2013-11-11 11:47:27 -0500] michael_mbp: vbox here.  BTW workmad3 have you tried hooking git into chef-client?
[2013-11-11 11:47:44 -0500] michael_mbp: whoo thanks! workmad3
[2013-11-11 11:48:15 -0500] michael_mbp: but for production servers, say IF you could/wanted to change the hosts/hostname/fqdn seen a better cookbook than the one I previously linked?
[2013-11-11 11:48:28 -0500] workmad3: michael_mbp: also, check out https://github.com/schisamo/vagrant-omnibus and https://github.com/dotless-de/vagrant-vbguest
[2013-11-11 11:48:49 -0500] workmad3: michael_mbp: for a production server, I'd personally rebuild from scratch to change the hostname and fqdn
[2013-11-11 11:49:03 -0500] workmad3: michael_mbp: as that changes the chef-client name (unless you set it manually) and causes key issues
[2013-11-11 11:49:17 -0500] michael_mbp: workmad3: true, it's simply enough to throw in a cookbook to do that.
[2013-11-11 11:49:20 -0500] michael_mbp: *simple
[2013-11-11 11:49:23 -0500] dtrott: do you even care what the fqdn is with chef ?
[2013-11-11 11:49:35 -0500] dtrott: you can just do a search for the node name ...
[2013-11-11 11:50:16 -0500] workmad3: dtrott: personally, I don't :)
[2013-11-11 11:50:44 -0500] workmad3: dtrott: I don't even do searches for node names... I set a tag on the node and do a search for that :)
[2013-11-11 11:51:16 -0500] michael_mbp: oooh nice one workmad3 https://github.com/schisamo/vagrant-omnibus that might help me setup a working 10.12 server
[2013-11-11 11:51:22 -0500] dtrott: What sort of thing do you tag ?
[2013-11-11 11:51:40 -0500] michael_mbp: for the life of me, I can't see what's causing it not to boot up on my veewee (Basebox) and manual chef-solo install.
[2013-11-11 11:51:43 -0500] michael_mbp: no logs nothing.
[2013-11-11 11:53:02 -0500] workmad3: dtrott: at a minimum, I'll add a tag for the server cookbook on a node... I also add tags for various resources I've built that generally need to be searched for (e.g. tag("postgres-server") tag("pg-db-mydb")
[2013-11-11 11:54:11 -0500] dtrott: Whats the advantage of that over searching on the role ?
[2013-11-11 11:55:07 -0500] dtrott: ... genuinely interested in how tagging can be utilized (I always found other things that could be used instead)....
[2013-11-11 11:55:26 -0500] michael_mbp: workmad3: how do you tag, via knife or?
[2013-11-11 11:55:47 -0500] michael_mbp: http://docs.opscode.com/knife_tag.html
[2013-11-11 11:55:58 -0500] holms: workmad3: oh ok, i though this should be resolvable
[2013-11-11 11:56:01 -0500] holms: workmad3: thanks
[2013-11-11 11:59:29 -0500] workmad3: holms: it only needs to be resolvable if you plan on using the fqdn to address the server in other recipes ;)
[2013-11-11 11:59:52 -0500] holms: hmz
[2013-11-11 11:59:56 -0500] workmad3: holms: the chef server doesn't try to contact the node directly though, the fqdn is only used for informational purposes
[2013-11-11 12:00:14 -0500] dtrott: you may also want to use knife ssh
[2013-11-11 12:00:18 -0500] workmad3: ^^ that too
[2013-11-11 12:01:18 -0500] dtrott: I don't actually know if knife ssh used fqdn or ip address...
[2013-11-11 12:01:20 -0500] workmad3: holms: you'd probably find things easier if you did set up a local DNS server on your intranet :)
[2013-11-11 12:01:49 -0500] dtrott: You are still going to need a mechanism to update it though ...
[2013-11-11 12:02:02 -0500] workmad3: holms: especially if it was only available on e.g. the intranet (and the intranet allowed VPN sessions)
[2013-11-11 12:02:07 -0500] workmad3: dtrott: chef? :D
[2013-11-11 12:02:14 -0500] dtrott: One option ...
[2013-11-11 12:02:40 -0500] workmad3: dtrott: automatically from a DHCP server? :)
[2013-11-11 12:02:48 -0500] dtrott: another option ...
[2013-11-11 12:03:19 -0500] dtrott: you could also use a dynamic dns not connected to the DHCP.
[2013-11-11 12:03:57 -0500] dtrott: or if you have known list of hosts uses static leases on the DHCP server based on a hostname passed by the DHCP client.
[2013-11-11 12:04:06 -0500] dtrott: In short there are a bunch of ways...
[2013-11-11 12:04:10 -0500] workmad3: yeah
[2013-11-11 12:05:16 -0500] workmad3: if you only care about having addressable chef nodes, chef would make sense to manage all your records... if you want addressable nodes that aren't know about to chef, other mechanisms would make sense (possibly in addition to chef managing the config)
[2013-11-11 12:06:19 -0500] dtrott: or you can just go the AWS path and name your IP addresses and not care about hostnames...
[2013-11-11 12:06:56 -0500] dtrott: its simple and requires very little management (and theres not much that can go wrong ....)
[2013-11-11 12:13:33 -0500] dtrott: Just wondering has anyone written a DNS "adapter" for chef so that you could just run DNS queries directly against the chef server ?
[2013-11-11 12:13:56 -0500] workmad3: dtrott: that would be kinda fun :)
[2013-11-11 12:22:15 -0500] dtrott: Whats available for multi machine orchestration (for example not starting web servers until all the DB servers are online)?
[2013-11-11 12:22:51 -0500] dtrott: I understand I can look them up via chef but how do I know when they are actually responding to requests ?
[2013-11-11 12:28:07 -0500] jameson-pmac: bring your own orchestration
[2013-11-11 12:28:33 -0500] dtrott: Just found this: http://www.youtube.com/watch?v=yHub6E4DNvg  looks interesting ..
[2013-11-11 12:52:22 -0500] michael_mbp: do you guys configure chef-client to auto update regularly?
[2013-11-11 12:53:30 -0500] dtrott: you mean to execute the chef run every 30 minutes ?
[2013-11-11 12:53:45 -0500] michael_mbp: is that bad?
[2013-11-11 12:54:12 -0500] dtrott: Its normal to do that...
[2013-11-11 12:54:28 -0500] dtrott: Most of the time it does nothing though.
[2013-11-11 12:54:36 -0500] michael_mbp: true
[2013-11-11 12:56:18 -0500] dtrott: Scratch my previous comment every 1/2 hour it verifies that nothing needs to be done...
[2013-11-11 12:56:39 -0500] dtrott: Verifying is import ...
[2013-11-11 12:56:45 -0500] dtrott: important...
[2013-11-11 12:59:02 -0500] michael_mbp: so if I want to trigger chef-client on my node, (just as a test) can I login and do that?
[2013-11-11 12:59:05 -0500] michael_mbp: or is there a 'knife way' ?
[2013-11-11 12:59:16 -0500] dtrott: yes and yes
[2013-11-11 12:59:33 -0500] dtrott: on the box:  sudo chef-client
[2013-11-11 12:59:36 -0500] michael_mbp: knife ssh 'name:web.node' 'sudo chef-client'
[2013-11-11 12:59:39 -0500] michael_mbp: for example
[2013-11-11 12:59:45 -0500] michael_mbp:  :D
[2013-11-11 12:59:47 -0500] dtrott: yep
[2013-11-11 12:59:57 -0500] michael_mbp: I should see the output then?
[2013-11-11 13:00:01 -0500] dtrott: though you typically run it on all machines of the same role
[2013-11-11 13:00:10 -0500] michael_mbp: gotcha
[2013-11-11 13:00:24 -0500] dtrott: the knife ssh prefixes every line with the hostname
[2013-11-11 13:00:27 -0500] michael_mbp: knife ssh 'role:base' 'sudo chef-client'
[2013-11-11 13:00:39 -0500] dtrott: aye if you need it on all your machines.
[2013-11-11 13:00:45 -0500] dtrott: you don't update the base role much
[2013-11-11 13:00:50 -0500] michael_mbp: true
[2013-11-11 13:01:03 -0500] dtrott: and since you need to open connections its best to limit it to what you actually want to update.
[2013-11-11 13:01:10 -0500] dtrott: Unless you need a cup of tea....
[2013-11-11 13:01:11 -0500] michael_mbp: gotcha
[2013-11-11 13:02:00 -0500] dtrott: Though again we built extra stuff on top of that so that we could execute a chef run on all machines that had a particular artifact on it.
[2013-11-11 13:03:55 -0500] workmad3: dtrott: that's part of why I started using tags now they're in chef :)
[2013-11-11 13:04:08 -0500] dtrott: http://www.ustream.tv/recorded/29048142
[2013-11-11 13:04:33 -0500] workmad3: dtrott: rather than building extra stuff on top of knife, just have a resource tag if it's something I'm interested in, then 'knife ssh "tags:whatever-tag" "command" '
[2013-11-11 13:05:00 -0500] dtrott: yea our use case was a lot more complex, see the video...
[2013-11-11 13:05:09 -0500] michael_mbp: sorry workmad3 I couldn't remember, how do you tag gain?
[2013-11-11 13:05:15 -0500] michael_mbp: i.e. knife or via files ?
[2013-11-11 13:05:21 -0500] workmad3: michael_mbp: in a recipe - 'tag("new-tag")'
[2013-11-11 13:05:39 -0500] workmad3: michael_mbp: which stores a tag in the 'node["tags"]' array
[2013-11-11 13:06:03 -0500] michael_mbp: ah
[2013-11-11 13:07:08 -0500] michael_mbp: gah https://gist.github.com/bsodmike/7412917
[2013-11-11 13:07:35 -0500] michael_mbp: perhaps the updater shoudl run first
[2013-11-11 13:09:22 -0500] michael_mbp: it's bootstrapped by node with 10.12 lol
[2013-11-11 13:11:44 -0500] michael_mbp: so in knife bootstrap, can't I send the version I want to boostrap?
[2013-11-11 13:14:27 -0500] michael_mbp: aha --bootstrap-version
[2013-11-11 13:19:05 -0500] michael_mbp: 10.33.33.50 Downloading Chef 11.0.8 for ubuntu...
[2013-11-11 13:19:07 -0500] michael_mbp: 10.33.33.50 Unable to retrieve a valid package!  ??
[2013-11-11 13:19:52 -0500] michael_mbp: passing the version doesn't seem to work...
[2013-11-11 13:20:46 -0500] michael_mbp: Starting Chef Client, version 11.8.0
[2013-11-11 13:20:49 -0500] michael_mbp: ha...
[2013-11-11 13:30:04 -0500] michael_mbp: workmad3: do you upload cookbooks to your server via 'berks upload' ?
[2013-11-11 13:32:51 -0500] phutchin1: Anyone have any idea why after setting a node attribute from a recipe. a Chef::Log.info("#{node['myattr']}") does returns null??
[2013-11-11 13:33:32 -0500] Jamin: check the attribute has actually been set
[2013-11-11 13:33:45 -0500] Jamin: you can see this on the show section for each node on the UI if you want
[2013-11-11 13:34:00 -0500] phutchin1: in what way? we're doing the log directly after the node.set
[2013-11-11 13:34:05 -0500] phutchin1: to check and its null right there...
[2013-11-11 13:43:36 -0500] legal90: Hallo, chefs! Please, give me advice - should I use Gems in my recipes or not?  I want to compare some version strings in my recipe and thats why I need to use Gem::Version. But I am afraid to have an error in feature, when this gem will be unavailable  (or something else).
[2013-11-11 13:44:33 -0500] stormerider: lots of recipes work with gems *shrug*
[2013-11-11 13:44:40 -0500] phutchin1: legal90: i think its pretty widely accepted to use gems in your recipes... it is ruby
[2013-11-11 13:45:01 -0500] phutchin1: or just write some simple regex to do it in your recipe
[2013-11-11 13:45:59 -0500] legal90: Ok., good. Is there some list of gems, bundled into chef installation?
[2013-11-11 13:46:27 -0500] stormerider: you can look at them in the omnibus with /opt/chef/embedded/bin/gem list
[2013-11-11 13:47:16 -0500] stormerider: but if you want to rely on them in your recipe, you should ensure they get installed with the chef_gem resource.
[2013-11-11 13:49:26 -0500] legal90: ok, thanks
[2013-11-11 14:25:52 -0500] ___Stefan: Hi, everyone. What is a good way to manage restarts? I need to restart a linux machine after installing a specific package but I do not want to restart again on the next chef run if the package is installed.
[2013-11-11 14:28:14 -0500] stormerider: ___Stefan: subscriptions or notifies, so that it will only fire if the package is actually being installed. though a full reboot happening via code would make me uncomfortable, if there ever ended up being a bug in the logic, you'd have machines randomly bouncing... not good times.
[2013-11-11 14:29:57 -0500] ___Stefan: stormerider: so a notify in an package section will only fire if the package is not install already? My action is set to ':install'
[2013-11-11 14:31:05 -0500] stormerider: right, so you'd do an execute block for the restart with action :nothing, then the package install would notify the execute block with an action to actually run
[2013-11-11 14:31:54 -0500] ___Stefan: stormerider: ok, cool, thanks
[2013-11-11 14:32:28 -0500] stormerider: i would suggest using the shutdown command in reboot mode to schedule the reboot in a few minutes so the chef run can finish completing, vs calling reboot directly
[2013-11-11 14:32:48 -0500] phutchin1: anyone have ideas for node being null immediate after being set in a recipe?
[2013-11-11 14:33:01 -0500] phutchin1: being set with node.set and checked with Chef::Log.info
[2013-11-11 14:33:08 -0500] phutchin1: same recipe fiole
[2013-11-11 14:33:47 -0500] ___Stefan: stormerider: there is node.run_state[:reboot] = true which I guess should be 'safer'
[2013-11-11 14:50:56 -0500] dubbel-trouble: I anyone running chef client/solo out of non-root account (I mean actual prod deployment)?
[2013-11-11 14:55:04 -0500] stormerider: dubbel-trouble: not sure what the point of not using root is
[2013-11-11 14:55:36 -0500] EJC_: hi all - has anyone had issues bootstrapping ec2 instances?  I'm having an issue where the process hangs at "update-initramfs: Generating /boot/initrd.img-3.2.0-55-virtual"
[2013-11-11 14:55:46 -0500] EJC_: anyone have any ideas?
[2013-11-11 14:57:44 -0500] dubbel-trouble: Auditing
[2013-11-11 14:58:06 -0500] EJC_: root
[2013-11-11 15:00:01 -0500] stormerider: dubbel-trouble: well, most of the cookbooks assume running as root so you'd have to reinvent a lot of wheels if you can't audit chef/root directly.
[2013-11-11 15:00:48 -0500] dubbel-trouble: That is what I was guessing, thanks for the confirmation
[2013-11-11 15:06:37 -0500] ptrf: ok, so for some reason, we haven't been using a local chef-repo at work, rather we've had everything on the hosted chef server
[2013-11-11 15:07:01 -0500] ptrf: now, I would like to download all the things from our hosted chef repo, and then start to track it with git
[2013-11-11 15:07:40 -0500] ptrf: now, whenever I say knife download /data_bags for instance, it downloads it to the parent folder of my chef_repo_path
[2013-11-11 15:07:53 -0500] ptrf: so I have cookbook_path ?=
[2013-11-11 15:08:12 -0500] stormerider: ptrf: you might want to look into knife-backup
[2013-11-11 15:08:17 -0500] ptrf: oh okay
[2013-11-11 15:08:41 -0500] ptrf: doing that now :)
[2013-11-11 15:08:54 -0500] stormerider: :)
[2013-11-11 15:15:20 -0500] EJC_: is anyone still bootstrapping with 10.16.2?
[2013-11-11 15:20:41 -0500] EJC_: it just gets stuck expanding the runlist - with all the -VV's - it's just wedged there :-/
[2013-11-11 15:25:28 -0500] EJC_: is/are there any more ways to crank up debugging at this point?
[2013-11-11 15:29:29 -0500] gchristensen: what do people use for your node names in chef? I want to change the domain on 300 nodes and they're all using the FQDN
[2013-11-11 15:29:33 -0500] ptrf: stormerider: thanks for the link. I solved my issue though, it was because I had knife[:chef_repo_path] = ... rarther than chef_repo_path in my config
[2013-11-11 15:35:11 -0500] stormerider: EJC_: i believe the current 10.x is 10.24 or the like?
[2013-11-11 15:39:03 -0500] EJC_: stormerider cool - but using the slightly older version shouldn't create or have any known issues?
[2013-11-11 15:39:09 -0500] EJC_: this was working as of last friday
[2013-11-11 15:40:54 -0500] stormerider: i dont know, ive been on 11 for some time now personally, but i believe 10.16 is fairly old, would suggest trying a client upgrade and see if anything changes. clients are fairly easily swappable, especially if you use the Heavy Water omnibus cookbook (assuming the have omnibus 10 packages, which im not 100% sure on)
[2013-11-11 15:41:46 -0500] heathsnow_: Is there a way to make a chef-client run more connection tolerant?  I need a retry so connection issues don't cause failures.  Does knife or chef-client support it or do I need my own solution?
[2013-11-11 15:58:28 -0500] jkess: Hi all. I'm getting a resource cloning warning when trying to do this: service[foo] stop -> install something -> service[foo] start. Is this what's being addressed in 12.0 via CHEF-3694? What's the best way to handle this behaviour now? Thanks.
[2013-11-11 16:14:49 -0500] michael_mbp: gchristensen: let me know how to tackle that
[2013-11-11 16:14:53 -0500] michael_mbp: *how you.
[2013-11-11 16:16:17 -0500] gchristensen: okay
[2013-11-11 16:16:37 -0500] stormerider: gchristensen: i imagine once you push it out you'll want to do a knife transform to update the nodes/clients to the new nodename after the change
[2013-11-11 16:17:00 -0500] gchristensen: stormerider: if possible, but I didn't think nodes and clients could change their name?
[2013-11-11 16:17:01 -0500] michael_mbp: how can I pass a couple roles along with 'knife solo' ?
[2013-11-11 16:17:13 -0500] michael_mbp: essentially, I'm using knife solo to boostrap a chef server
[2013-11-11 16:18:51 -0500] teukka: michael_mbp: knife solo bootstrap --run-list 'role[foo],recipe[bar::baz]' ...
[2013-11-11 16:19:01 -0500] michael_mbp: hey teukka
[2013-11-11 16:19:10 -0500] michael_mbp: well, my kitchen alreayd has the roles in roles/
[2013-11-11 16:19:26 -0500] michael_mbp: ERROR: Role base (included by 'top level') is in the runlist but does not exist. Skipping expand.
[2013-11-11 16:20:16 -0500] teukka: michael_mbp: do you have `role_path "roles"` (or similar) in your .chef/knife.rb?
[2013-11-11 16:20:21 -0500] stormerider: gchristensen: if you can't do it via the transform, then you'll have to write out your runlist in json and delete the old client.pem and re-register and use the json runlist... that'd be rather ugly to automate
[2013-11-11 16:20:40 -0500] michael_mbp: no
[2013-11-11 16:20:56 -0500] michael_mbp: shall I add it?
[2013-11-11 16:21:00 -0500] teukka: michael_mbp: the default might not be correct. and it depends on chef version a bit
[2013-11-11 16:21:09 -0500] michael_mbp: 11.8.0
[2013-11-11 16:22:01 -0500] teukka: michael_mbp: this is what `knife solo init` creates: https://github.com/matschaffer/knife-solo/blob/master/lib/knife-solo/resources/knife.rb
[2013-11-11 16:22:17 -0500] michael_mbp: ahhh
[2013-11-11 16:22:18 -0500] michael_mbp: thanks
[2013-11-11 16:22:37 -0500] gchristensen: stormerider: very ugly :)
[2013-11-11 16:22:43 -0500] michael_mbp: mine's configured for chef server
[2013-11-11 16:23:03 -0500] michael_mbp: so log_level, node_name, client_key, chef_server_url etc
[2013-11-11 16:23:37 -0500] teukka: michael_mbp: chef 11.8.0 even has a regression with default *_path options. I'll try to file an issue for it today
[2013-11-11 16:24:20 -0500] teukka: michael_mbp: the extra options shouldn't matter, as long as they are not conflicting. but you need to tell knife-solo what to upload to the node
[2013-11-11 16:24:40 -0500] michael_mbp: teukka: I just added that to my knife config
[2013-11-11 16:24:44 -0500] michael_mbp: what you linked and it's working!
[2013-11-11 16:25:20 -0500] teukka: michael_mbp: then when in doubt, you can add `-VV` option to the commands to get debug output. then you see what is really happening
[2013-11-11 16:25:30 -0500] holms: lol almost automatized chef-server instalation, with local repo, transfering keys from chef-server, launching it, uploading configing and installing berkshelf :P
[2013-11-11 16:25:35 -0500] holms: makefiles powa \o/
[2013-11-11 16:25:47 -0500] michael_mbp: teukka: any ideas on how I can setup a chef 10.12.0 server?  I went the route of created a basebox with veewee and doing a chef-solo install by hand
[2013-11-11 16:25:58 -0500] michael_mbp: but chef-server simply would not boot
[2013-11-11 16:26:08 -0500] michael_mbp: server/server-webui-/chef-solr
[2013-11-11 16:26:11 -0500] michael_mbp: only chef-expander would run
[2013-11-11 16:26:14 -0500] michael_mbp: no los too
[2013-11-11 16:26:17 -0500] michael_mbp: *no logs.
[2013-11-11 16:26:25 -0500] teukka: michael_mbp: 10.12.0? that's really old...
[2013-11-11 16:26:33 -0500] michael_mbp: I think 10 was preomnibus?
[2013-11-11 16:26:43 -0500] michael_mbp: or can one install 10.12.0 with the omnibus?
[2013-11-11 16:27:36 -0500] michael_mbp: teukka:  "version": "latest", if I make that "10.12.0" it just erros saying it can't find that version
[2013-11-11 16:27:55 -0500] michael_mbp: that's attempting to override the default_attrib for chef-server
[2013-11-11 16:28:18 -0500] teukka: michael_mbp: chef-server 10 is/was included in the chef-client package (and gem too)
[2013-11-11 16:28:22 -0500] stormerider: michael_mbp: if you're setting up a server, you don't want 10.x, unless youre using it to test cookbooks for some reason
[2013-11-11 16:28:43 -0500] teukka: michael_mbp: ah, no. I get that back
[2013-11-11 16:28:50 -0500] teukka: michael_mbp: same source tree only...
[2013-11-11 16:28:51 -0500] michael_mbp: stormerider: was trying to match the version someone is using.
[2013-11-11 16:28:57 -0500] michael_mbp: teukka: ?
[2013-11-11 16:29:11 -0500] michael_mbp: meaning it's 11 or 10 right?
[2013-11-11 16:29:12 -0500] teukka: michael_mbp: forget what I said :)
[2013-11-11 16:29:15 -0500] michael_mbp: :)
[2013-11-11 16:29:35 -0500] michael_mbp: stormerider: I had no luck in getting 10.12 to run
[2013-11-11 16:29:37 -0500] teukka: michael_mbp: sorry, I have to go for lunch now. back in half an hour
[2013-11-11 16:29:41 -0500] michael_mbp: getting 11 to run has been no prob
[2013-11-11 16:29:44 -0500] michael_mbp: ok I'll be here:)
[2013-11-11 16:29:47 -0500] michael_mbp: bon appetite!
[2013-11-11 16:30:04 -0500] stormerider: i know i ran into issues with... quantal? and 10.x
[2013-11-11 16:30:19 -0500] michael_mbp: stormerider: oh?  12.04 basebox
[2013-11-11 16:30:30 -0500] stormerider: that's precise
[2013-11-11 16:30:31 -0500] michael_mbp: that's what I made, so precise64
[2013-11-11 16:30:35 -0500] michael_mbp: yup
[2013-11-11 16:33:15 -0500] michael_mbp: is it important to set the api_fqdn for chef-server?
[2013-11-11 17:06:38 -0500] holms: people... is FQDN really not so important?
[2013-11-11 17:06:44 -0500] holms: from workstation i've got an error
[2013-11-11 17:06:59 -0500] holms: ERROR: Network Error: getaddrinfo: Name or service not known/usr/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: Name or service not known (SocketError)
[2013-11-11 17:07:45 -0500] rgreg11: I am new to Chef, am installing it to support multiple environments (IFT, Pre-Prod, Prod) in 2 data centers. The application envioronment resides in and Access Zone, 1 per environment - IFT, Pre-Prod, Prod. Does it makes sense to install Chef in (1) location per data center or (1) location per environment (IFT, Pre-Prod, Prod) due to the Access Zone?  Thanks, Greg
[2013-11-11 17:08:08 -0500] stormerider: access zone?
[2013-11-11 17:09:02 -0500] rgreg11: access zone = environment behind firewall/packet filters....like an enclave
[2013-11-11 17:09:45 -0500] holms: support is dead
[2013-11-11 17:09:58 -0500] holms: coderanger: any chance that you're a life?
[2013-11-11 17:10:01 -0500] holms: :}
[2013-11-11 17:10:22 -0500] jbz: rgreg11: not knowing much about what you're doing, I would install chef in each data center, and use Chef environments to separate your app environments.  Or, if the data centers have crosslinks, use 1 server with logic in your cookbooks to handle different data centers.
[2013-11-11 17:11:21 -0500] stormerider: rgreg11: if each AZ is not being able to talk to each other then you probably need multiple servers, but if they can reach a common management network that you can put chef on, you can probably just use one
[2013-11-11 17:11:45 -0500] stormerider: that's more a networking question than a chef question, i think, really
[2013-11-11 17:12:18 -0500] stormerider: holms: did you ever configure your chef server with a name?
[2013-11-11 17:12:24 -0500] holms: stormerider: yeap
[2013-11-11 17:12:41 -0500] holms: hmz or maybe not
[2013-11-11 17:12:46 -0500] holms: what do you mean?
[2013-11-11 17:13:10 -0500] stormerider: a resolvable host name with a domain?
[2013-11-11 17:13:41 -0500] holms: stormerider: em. maybe you can help me with that https://github.com/opscode-cookbooks/chef-server
[2013-11-11 17:13:46 -0500] holms: don't ask why this way
[2013-11-11 17:13:49 -0500] holms: i'll explain  later
[2013-11-11 17:14:10 -0500] stormerider: is your server already set up?
[2013-11-11 17:14:17 -0500] holms: yes
[2013-11-11 17:14:26 -0500] holms: and knife configure
[2013-11-11 17:14:28 -0500] holms: went fine
[2013-11-11 17:14:46 -0500] stormerider: have you customized /etc/chef-server/chef-server.rb with your hostname/etc?
[2013-11-11 17:14:50 -0500] michael_mbp: guys, I'm seeing https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb show default['chef_server']['chef-server-webui']['enable'] = true
[2013-11-11 17:15:00 -0500] michael_mbp: so it's chef-server-webui
[2013-11-11 17:15:01 -0500] holms: stormerider: unless the cookboko did it, one sec ill check
[2013-11-11 17:15:03 -0500] michael_mbp: BUT
[2013-11-11 17:15:35 -0500] michael_mbp: http://docs.opscode.com/config_rb_chef_server.html has it as chef_server_webui ?
[2013-11-11 17:15:39 -0500] michael_mbp: with underscores?
[2013-11-11 17:15:44 -0500] rgreg11: Thank you <jbz> and <stormrider>.  Yes, that is my decision...1 per data center or 1 per environment/access zone. It sounds like either way would work. Thanks.
[2013-11-11 17:16:22 -0500] bcave: hi all
[2013-11-11 17:16:42 -0500] bcave: anyone here using kitchen + ec2 driver?
[2013-11-11 17:18:01 -0500] jbz: rgreg11: Much of chef's power comes from nodes being able to search/'see' other nodes, and make decisions based on that info - so the more you split your infrastructure across different servers, the less useful that part of Chef becomes.
[2013-11-11 17:20:04 -0500] rgreg11: so minimal chef servers such as 1/data center would be better from that perspective...i can tweak the packet filters to allow chef communication in/out of access zones.  Thanks
[2013-11-11 17:20:31 -0500] holms: stormerider: aaactually yes, cookbook did it =( this is autogenerated one yeah?
[2013-11-11 17:21:01 -0500] bcave: I'm trying to converge a node using test-kitchen, and just getting "Converge failed on instance <the-role-im-testing>" Class: Kitche::ActionFailed Message: ubuntu
[2013-11-11 17:21:22 -0500] stormerider: dont believe so. but in any case, you can tweak it and run chef-server-ctl reconfigure and it should honor those values
[2013-11-11 17:24:29 -0500] holms: k
[2013-11-11 17:30:25 -0500] pravka: working on an install of chef-server 11.0.8 on a fresh install of Ubuntu 12.04, and running into issues w/ c-s-c reconfigure
[2013-11-11 17:30:44 -0500] pravka: specifically on verify-system-status -- it would appear that erchef isn't starting cleanly
[2013-11-11 17:30:59 -0500] pravka: any reason why this would happen? I've verified that the hostname is resolvable and pingable
[2013-11-11 17:36:17 -0500] dan`: I don't see a knife key to pass upload message from console and skip editor launch.
[2013-11-11 17:36:41 -0500] dan`: Like git '-m'
[2013-11-11 17:37:21 -0500] stormerider: "Seattle weather is variable this time of year.  And what is variable is the amount of rain that will fall at any given moment.  Consider packing a rain jacket or umbrella." Truth :)
[2013-11-11 17:37:44 -0500] itwasntandy: 2 weeks ago it was lovely in seattle
[2013-11-11 17:38:47 -0500] geggam_: yeah.. every year its lovely for 2 weeks in seattle
[2013-11-11 17:39:15 -0500] itwasntandy: actually to be fair for each of the 12 weeks I've spent in seattle in the last 12 months, the weather has been decent
[2013-11-11 17:39:34 -0500] holms: stormerider: i've even added that fqdn to /etc/hosts on both side - still same error =/
[2013-11-11 17:39:43 -0500] timsmith: we get 9 good months in the pacific northwest
[2013-11-11 17:39:45 -0500] timsmith: 1 great month
[2013-11-11 17:39:47 -0500] geggam_: define decent ? ... its never bad... just always damp n gloomy
[2013-11-11 17:39:52 -0500] holms: stormerider: without it, knife doest create nice node files in nodes/
[2013-11-11 17:39:58 -0500] timsmith: I mean 9 rainy months
[2013-11-11 17:40:02 -0500] geggam_: now i live in SF... its never really bad here
[2013-11-11 17:40:09 -0500] stormerider: "lovely" is in the eye of the beholder. :) i like it overcast and gloomy. "it's fine Scottish weather... the rain's falling straight down, maybe a little to the side like"
[2013-11-11 17:40:30 -0500] holms: hrr hrr hrr
[2013-11-11 17:40:36 -0500] geggam_: i was in the military in seattle... we crawled thru ditches in that "nice weather"
[2013-11-11 17:40:56 -0500] stormerider: geggam_: im on the res on the other side of JBLM
[2013-11-11 17:41:15 -0500] itwasntandy: geggam_: blue skies, sunshine
[2013-11-11 17:41:26 -0500] stormerider: gotta love the house shaking from the mortar rounds
[2013-11-11 17:41:40 -0500] geggam_: when i was in it was Ft Lewis.,.. not  whatever it is now
[2013-11-11 17:41:47 -0500] itwasntandy: its become a running joke with colleagues, that each time I'm in seattle, the weather is decent
[2013-11-11 17:42:07 -0500] stormerider: yeah, they combined ft lewis and mcchord into Joint Base Lewis Mcchord
[2013-11-11 17:42:35 -0500] geggam_: i was next to the airfield we ran around every morning... nice 5 mile jaunt
[2013-11-11 17:42:47 -0500] c_t: ... but everyone still calls it Ft. Lewis and McChord AFB
[2013-11-11 17:43:16 -0500] geggam_: mchord was where we went to eat... air farce has a nice steak / salad thing
[2013-11-11 17:43:46 -0500] stormerider: i like the happy teriyaki near the lewis gate in dupont
[2013-11-11 17:44:06 -0500] geggam_: never really did much off base except drink :)
[2013-11-11 17:44:31 -0500] stormerider: ah, i usually see a bunch of soldiers there whenever i stop by
[2013-11-11 17:44:49 -0500] geggam_: i got out in 92 :)
[2013-11-11 17:44:54 -0500] c_t: you weren't a combat engineer were you?
[2013-11-11 17:44:55 -0500] c_t: oh, ok
[2013-11-11 17:44:59 -0500] geggam_: 19d ...recon
[2013-11-11 17:45:20 -0500] geggam_: cross trained with 11c mortar maggots
[2013-11-11 17:45:31 -0500] c_t: one of the joys of living near a major military installation is that you get real familiar with America's finest
[2013-11-11 17:45:57 -0500] geggam_: yeah... i enjoyed it.. c4 and det cord are fun toys
[2013-11-11 17:45:57 -0500] c_t: as it happens, a fair number of them drive very aggressively in flashy cars, drink a lot, and generally be a nuisance off base
[2013-11-11 17:46:05 -0500] geggam_: yup... that was me
[2013-11-11 17:46:13 -0500] c_t: (I grew up in Olympia)
[2013-11-11 17:46:22 -0500] geggam_: tangled with the bloods and crips a few times
[2013-11-11 17:47:05 -0500] c_t: also, a while back a young soldier dude was slightly buzzed (0.10 field test, 0.081 at the station) and decided it was a good idea to drive 75mph down a road that's maybe 1.5 miles long in the middle of town
[2013-11-11 17:47:11 -0500] c_t: and drove through my house
[2013-11-11 17:47:19 -0500] c_t: (fortunately we were all away)
[2013-11-11 17:47:54 -0500] geggam_: lightweight... we had a breathalyser at the barracks.. we had to blow before going to bed... of course that was a challenge :) ... the .4 club was elite
[2013-11-11 17:47:59 -0500] michael_mbp: Let me know what you think https://github.com/bsodmike/chef-server-with-vagrant workmad3 gchristensen  stormerider
[2013-11-11 17:48:09 -0500] c_t: he was at someone's house apparently
[2013-11-11 17:48:15 -0500] c_t: but yeah, I was kind of surprised
[2013-11-11 17:48:33 -0500] michael_mbp: It's been a fun 'little' test-bed to go from a vagrant chef server to bootstrapping one with knife-solo
[2013-11-11 17:48:40 -0500] c_t: he was at that level where theoretically you know you're a little drunk and are trying to focus on seeming sober
[2013-11-11 17:49:16 -0500] c_t: when I first heard about it I assumed he was at .250, .300 or thereabouts because then you'd expect it
[2013-11-11 17:49:20 -0500] geggam_: public transportation ... that or motorcycle.. cant drive a bike drunk.. you fall over
[2013-11-11 17:49:28 -0500] c_t: but I think he was just stupid
[2013-11-11 17:49:39 -0500] geggam_: lots of that in the military... why i left
[2013-11-11 17:49:55 -0500] c_t: someone found his MySpace page
[2013-11-11 17:50:13 -0500] c_t: his AIM name was Drunkndisorderly or something like that
[2013-11-11 17:50:18 -0500] workmad3: michael_mbp: why not bootstrap the server with vagrant too?
[2013-11-11 17:50:31 -0500] c_t: listed drinking heavily among his favorite activities, etc.
[2013-11-11 17:50:38 -0500] michael_mbp: workmad3: ?
[2013-11-11 17:50:44 -0500] workmad3: michael_mbp: vagrant-aws or vagrant-digital-ocean let you provision a machine using your Vagrantfile ;)
[2013-11-11 17:50:46 -0500] c_t: (as you can imagine I wasn't real happy with him)
[2013-11-11 17:50:46 -0500] geggam_: if you arent a drunk in the military you are lying... IMHO
[2013-11-11 17:50:50 -0500] michael_mbp: there's one server already boostrapped with vagrant
[2013-11-11 17:50:56 -0500] michael_mbp: ahh
[2013-11-11 17:51:13 -0500] c_t: drink all you want, I'd just prefer you not to drive through my office, the hallway, and almost out my daughter's room
[2013-11-11 17:51:16 -0500] thehar: similar version of chef server with vagrant but using linux containers: https://github.com/lookout/testlab-repo
[2013-11-11 17:51:38 -0500] geggam_: im old... dont drink... and not in the military...
[2013-11-11 17:52:08 -0500] c_t: sure, just making sure I don't come across as some sort of anti-drinking fuddy duddy
[2013-11-11 17:52:34 -0500] geggam_: you are :)
[2013-11-11 17:52:52 -0500] c_t: it worked out in the end, anyway
[2013-11-11 17:53:15 -0500] c_t: I had to do an inventory of all the destroyed stuff, though
[2013-11-11 17:53:20 -0500] michael_mbp: workmad3: that's just crazy awesome.
[2013-11-11 17:53:34 -0500] c_t: turns out it's kind of hard to figure out how much, say, an 8" floppy disk is worth
[2013-11-11 17:53:37 -0500] workmad3: michael_mbp: I was really meaning 'why use a different tool to spin up your chef server dependent on whether you're running it with virtualbox or on a cloud server' ;)
[2013-11-11 17:53:55 -0500] michael_mbp: mmm I got you
[2013-11-11 17:53:59 -0500] c_t: also while ISA sound cards are pretty worthless, ISA NICs are surprisingly valuable
[2013-11-11 17:54:14 -0500] michael_mbp: well I would have gone the old skool way of setting it up via the digital-ocean UI
[2013-11-11 17:54:14 -0500] geggam_: still ?
[2013-11-11 17:54:26 -0500] c_t: geggam_: as of 2006
[2013-11-11 17:54:31 -0500] michael_mbp: but this is so much easier, plus the ssh key gets copied across as well
[2013-11-11 17:54:34 -0500] workmad3: c_t: for keeping old servers going?
[2013-11-11 17:54:35 -0500] geggam_: i probably have a few of those
[2013-11-11 17:54:46 -0500] c_t: I think the issue with ISA NICs is that not nearly as many were made back then
[2013-11-11 17:54:57 -0500] c_t: so if you need one, there's a lot fewer to choose from
[2013-11-11 17:55:26 -0500] michael_mbp: workmad3: mind a pm?
[2013-11-11 17:55:35 -0500] workmad3: michael_mbp: if you must :P
[2013-11-11 17:55:38 -0500] c_t: but as I recall I was seeing prices like $50 for the ISA NICs
[2013-11-11 17:56:18 -0500] geggam_: they made a metal gun with a 3d printer workmad3 ... wont be long now
[2013-11-11 17:56:52 -0500] workmad3: geggam_: well, I'm thinking 3d printer resolution needs to get good enough to print microchips
[2013-11-11 17:57:13 -0500] geggam_: isnt that how they do it now ?
[2013-11-11 17:57:15 -0500] stormerider: metal 3d printing?
[2013-11-11 17:57:29 -0500] c_t: I thought the 3d printed gun was made mostly of plastic
[2013-11-11 17:57:30 -0500] geggam_: or do they stamp them ?
[2013-11-11 17:57:39 -0500] c_t: (also could only fire one shot before destroying itself)
[2013-11-11 17:57:43 -0500] geggam_: they made a metal gun... more accurate than a normally made one
[2013-11-11 17:57:45 -0500] gleam: someone else made a metal 3d printed gun. 50+ shots
[2013-11-11 17:57:56 -0500] stormerider: eesh.
[2013-11-11 17:58:04 -0500] stormerider: that's not scary at all....
[2013-11-11 17:58:07 -0500] workmad3: geggam_: I think they've got a whole etching process etc at the moment :)
[2013-11-11 17:58:15 -0500] workmad3: and yeah, they can print metal now with some 3d printers
[2013-11-11 17:58:18 -0500] gleam: done using laser sintering, not something many people have the equipment for
[2013-11-11 17:58:39 -0500] geggam_: oxy6 acetylene torch ... grill igniter... 2 inch oil field pipe and you have a canon... why 3 printing anything is upsetting is wierd to me
[2013-11-11 17:59:17 -0500] pravka: fwiw, on my previous question about erchef failing to start cleanly on c-s-c reconfigure
[2013-11-11 17:59:43 -0500] pravka: the erchef log says it's waiting for rabbitmq process to appear
[2013-11-11 17:59:54 -0500] pravka: but I see that rabbitmq is started and listening on 5672
[2013-11-11 18:00:09 -0500] geggam_: is there a good stop method for chef client outside of kill $PID ?
[2013-11-11 18:00:22 -0500] c_t: Ctrl-C?
[2013-11-11 18:00:22 -0500] geggam_: assuming daemonized
[2013-11-11 18:00:28 -0500] bean: /etc/init.d/chef-client stop ?
[2013-11-11 18:00:29 -0500] bean: :P
[2013-11-11 18:00:35 -0500] stormerider: pravka: is it possibly a rabbitmq from a different application?
[2013-11-11 18:00:40 -0500] geggam_: i dont get init scripts when i install it
[2013-11-11 18:01:07 -0500] pravka: stormerider: not likely
[2013-11-11 18:01:08 -0500] pravka: tcp        0      0 127.0.0.1:5672          0.0.0.0:*               LISTEN      1761/beam.smp
[2013-11-11 18:01:13 -0500] gleam: seems a bit harder to fire a cannon several times in a row :)
[2013-11-11 18:01:57 -0500] geggam_: um... doesnt take much to plumb some piping and make a revolving canon mounted to a pickup
[2013-11-11 18:02:08 -0500] geggam_: also sounds like redneck fun :)
[2013-11-11 18:02:36 -0500] dubbel-trouble: duct dynasty
[2013-11-11 18:02:39 -0500] workmad3: geggam_: daemonized how? runit? upstart? bluepill? init?
[2013-11-11 18:02:46 -0500] geggam_: chef-client -d
[2013-11-11 18:03:49 -0500] geggam_: lets backup.. how does one get the init scripts installed on centos ?
[2013-11-11 18:03:55 -0500] geggam_: id prefer that :)
[2013-11-11 18:04:15 -0500] workmad3: geggam_: chef-client cookbook? ;)
[2013-11-11 18:06:08 -0500] geggam_: workmad3,  can we get  curl -L https://www.opscode.com/chef/install.sh | bash to do that for us ... feature request ?
[2013-11-11 18:07:58 -0500] pravka: it would appear that wait_for_rabbit is where this is failing
[2013-11-11 18:08:04 -0500] pravka: pid=`cat /var/opt/opscode/rabbitmq/db/rabbit@localhost.pid`
[2013-11-11 18:08:06 -0500] pravka: that path exists
[2013-11-11 18:08:20 -0500] pravka: but rabbit's pid isn't in /proc
[2013-11-11 18:09:56 -0500] ianneub: howdy all. is it possible to check if a LWRP resource exists from a recipe that does not include it directly?
[2013-11-11 18:11:47 -0500] bean: pravka: if the pid isn't in /proc it doesn't exist.
[2013-11-11 18:11:55 -0500] bean: is it in "ps aux | grep rabbit"
[2013-11-11 18:21:25 -0500] dgarstang3: Darn, http://shop.oreilly.com/product/0636920030973.do?sortby=publicationDate isn't available as a download on Amazo.
[2013-11-11 18:43:01 -0500] CPS: i'm using an execute block to run msiexec to uninstall an application. if the application has  already been removed, msiexec returns error code 1605 and the run list crashes on the error. how can i capture this return code and not throw an error in this case?
[2013-11-11 18:44:50 -0500] titusjose: was wondering if chef_gem lwpr can take another a url via the source attribute, documentation says "Optional. The package source for providers that use a local file."
[2013-11-11 18:49:47 -0500] holms: how to regenerate pem keys in chef-server/
[2013-11-11 18:50:05 -0500] douglaswth: CPS: I think there's a windows_package resource that can handle MSI stuff, it's probably from the windows cookbook
[2013-11-11 18:51:14 -0500] holms: douglaswth: maybe you know :)?
[2013-11-11 18:52:57 -0500] CPS: apparently returns [0,1605] in the execute resource will do it
[2013-11-11 18:54:54 -0500] holms: jeez.. reintalled whole vm
[2013-11-11 18:54:59 -0500] holms: still no admin.pem wtf..
[2013-11-11 18:55:33 -0500] dgarstang3: What can I safely blow away from .berkshelf between vagrant runs?
[2013-11-11 18:57:13 -0500] sn0wb1rd: @douglaswth do you?
[2013-11-11 18:57:17 -0500] nicgrayson: dgarstang3: .berkshelf/cookbooks for sure
[2013-11-11 18:57:31 -0500] holms: so anybody? how to regenerate chef-server keys?
[2013-11-11 18:57:38 -0500] CPS: holms: where are you looking?
[2013-11-11 18:57:43 -0500] dgarstang3: nicgrayson: .berkshelf/cookbooks or .berkshelf/default/cookbooks? It seems to change all the time
[2013-11-11 18:57:46 -0500] holms:  /etc/chef-server
[2013-11-11 18:58:06 -0500] nicgrayson: holms: https://wiki.opscode.com/display/chef/Common+Errors has a good guide on this
[2013-11-11 18:58:42 -0500] holms: been there
[2013-11-11 18:58:43 -0500] nicgrayson: dgarstang3: hmm i haven't seen it use default ever. i'm sure they are both fine, berks install will just redownload
[2013-11-11 18:58:50 -0500] holms: nothing about chef-server-ctl regerate keys
[2013-11-11 18:58:57 -0500] nicgrayson: holms: which keys are trying to get?
[2013-11-11 18:59:05 -0500] dgarstang3: nicgrayson: Nope, cuz It keeps getting old versions of things
[2013-11-11 18:59:18 -0500] holms: http://pastie.org/8472629
[2013-11-11 18:59:23 -0500] nicgrayson: dgarstang3: have you killed your berksfile.lock?
[2013-11-11 18:59:39 -0500] holms: i've reinstalled deb
[2013-11-11 18:59:41 -0500] holms: reconfigured
[2013-11-11 18:59:44 -0500] holms: it's not in there
[2013-11-11 19:00:14 -0500] dgarstang3: nicgrayson: Yep. We're also getting dependant cookbooks out of git. It says it;s grabbing the latest from git, but what it gets is not the latest. Looks like its caching it somewhere still. There's also directories sometimes in there with the name of the vagrant vm with cookbooks to. It's a mess
[2013-11-11 19:01:02 -0500] nicgrayson: dgarstang3: sounds like it. have you tried going to berkshelf 3? might be a bit of a yak for your problem but it should fix it
[2013-11-11 19:01:35 -0500] holms: so no answer..
[2013-11-11 19:02:27 -0500] nicgrayson: holms: i haven't seen that error. i would just kill the server and make a new one with the chef-solo command to install chef-server
[2013-11-11 19:02:44 -0500] holms: yeah probably that's what im gonna
[2013-11-11 19:02:48 -0500] holms: something went crazy
[2013-11-11 19:02:58 -0500] nicgrayson: for sure
[2013-11-11 19:03:55 -0500] AcesWayUpHigh: is there any way to "preload" a chef server with recipes, without having to use knife upload
[2013-11-11 19:04:33 -0500] titusjose: can chef_gem source attribute take a private gem server url ?
[2013-11-11 19:05:06 -0500] titusjose: any thoughts ?
[2013-11-11 19:06:09 -0500] titusjose: chef_gem lwrp source attribute is what I meant.
[2013-11-11 19:08:34 -0500] cjs226: Is it possible to perform compound searches of encrypted data bags? http://lists.opscode.com/sympa/arc/chef/2013-11/msg00121.html
[2013-11-11 19:16:45 -0500] dgarstang3: vagrant and berkshelf cause so much pain
[2013-11-11 19:17:16 -0500] dgarstang3: Just cleared Berksfile.lock and ~/.berkshelf, start vagrant and get 'No error message'
[2013-11-11 19:17:31 -0500] dgarstang3: try again, different behaviour
[2013-11-11 19:17:36 -0500] michael_mbp: workmad3: when you're back http://www.markerbench.com/blog/2013/10/06/chef-3rd-course/
[2013-11-11 19:17:52 -0500] michael_mbp: nn all thanks teukka gchristensen workmad3
[2013-11-11 19:19:49 -0500] dgarstang3: I can;t work out where [Berkshelf] Installing bc-zookeeper (0.3.0) from chef_api: 'https://10.36.22.106:443' is coming from. Argh
[2013-11-11 19:19:57 -0500] dgarstang3: It SHOULD be 0.10.0
[2013-11-11 19:31:51 -0500] holms: i'll probably end up in madhouse..
[2013-11-11 19:31:52 -0500] holms: http://pastie.org/8472708
[2013-11-11 19:31:56 -0500] holms: what's wrong again =/
[2013-11-11 19:32:00 -0500] holms: ssl issue?
[2013-11-11 19:32:11 -0500] holms: fqdn issue?
[2013-11-11 19:32:20 -0500] holms: on digitalocean it works like a charm
[2013-11-11 19:32:27 -0500] holms: in intranet it's not
[2013-11-11 19:33:34 -0500] teukka: holms: add `-VV` to get debug output. maybe it helps
[2013-11-11 19:34:00 -0500] dgarstang3: Why would berkshelf keep saying '[Berkshelf] Installing bc-zookeeper (0.3.0) from chef_api: 'https://10.36.22.106:443'' when I've blown everything away from ~/.berkshelf!??!
[2013-11-11 19:34:11 -0500] holms: teukka: done http://pastie.org/8472714
[2013-11-11 19:34:15 -0500] dgarstang3: Git has 0.10.0, not 0.3.0
[2013-11-11 19:34:24 -0500] jmickle: :-P
[2013-11-11 19:35:38 -0500] holms: teukka: see anything fun?
[2013-11-11 19:37:14 -0500] holms: dgarstang3: any ideas =/? http://pastie.org/8472714
[2013-11-11 19:38:06 -0500] phutchin1: anyone know why a vagrant provision woudln't get the files directory onto the node? the files directory shows up on the chef server but not on the vagrant host
[2013-11-11 19:38:42 -0500] dgarstang3: holms: sorry, no. My ruby sucks, but, according to opscode you don't need to know ruby to use chef. :)
[2013-11-11 19:39:00 -0500] holms: as you can see ssl without FQDN just dies
[2013-11-11 19:40:27 -0500] teukka: holms: dunno. look through the nginx and chef-server logs. they don't like your requests
[2013-11-11 19:42:51 -0500] CPS: so msiexec sometimes returns 1603, which means i need to repair the installation before i can uninstall it. is there a way to trigger a repair execute block and reattempt the uninstallation if the uninstallation returns 1603?
[2013-11-11 19:43:14 -0500] CPS: the returns variable only says which return codes are accepted
[2013-11-11 19:50:38 -0500] holms: teukka:
[2013-11-11 19:50:42 -0500] holms: any ideas where are the logs?
[2013-11-11 19:51:14 -0500] holms: cause nothing in here http://pastie.org/8472750
[2013-11-11 19:53:18 -0500] scarolan: Greetings, true believers
[2013-11-11 19:53:45 -0500] holms: right..
[2013-11-11 19:54:32 -0500] adamjk-dev: any Windows base boxes out there somewhere?
[2013-11-11 19:54:42 -0500] adamjk-dev: I assume it would have to have a trial license on it or something for that to work
[2013-11-11 19:54:43 -0500] holms: scarolan: hi mister, may I ask for yyour salvation regarding this issue http://pastie.org/8472714
[2013-11-11 19:54:46 -0500] holms: http://pastie.org/8472714
[2013-11-11 19:54:57 -0500] adamjk-dev: basically, does anyone know if Windows base boxes are hosted anywhere for use with Chef/Vagrant/ etc.
[2013-11-11 19:55:05 -0500] otakup0pe: hey so why does knife search node "name:foo*" sometimes return *every* node
[2013-11-11 19:55:26 -0500] scarolan: holms: lemme take a peek
[2013-11-11 19:56:18 -0500] holms: scarolan: there's no FQDN , and I can't have it (intranet here)
[2013-11-11 19:56:28 -0500] holms: scarolan: also api_fqdn set to ip address
[2013-11-11 19:57:03 -0500] holms: scarolan: i'm using chef-server-cookbook because of reason + write my own makefile which does totally the same all over again, and it works in Digital Ocean with proper fqdn
[2013-11-11 19:57:41 -0500] webframp: adamjk-dev offhand nothing I know of publicly available, though http://www.modern.ie/en-us/virtualization-tools could be a starting point
[2013-11-11 19:58:24 -0500] scarolan: Yea, so by default it attempts to use SSL.  In the past I've hacked something like "chefserver.local" into my hosts file.  Lemme ask and see if there's a more elegant way to do it.
[2013-11-11 19:58:49 -0500] webframp: in fact, spox used those as a starting point and converted them to vagrant images
[2013-11-11 19:58:52 -0500] phutchin1: anyone seen chef-client not download all filfes from a cookbook?
[2013-11-11 19:59:10 -0500] phutchin1: the version in metadata matches the version on my chef server but the "files" folder is not getting to the /var/chef/cache/cookbooks/blah folder
[2013-11-11 19:59:56 -0500] adamjk-dev: webframp: thanks, I think the best bet out there is to use bento/veewee and the available definitions to build your own
[2013-11-11 20:00:01 -0500] holms: scarolan: actually even this would be fine for me in current situation. in /etc/chef-server/chef-server.rb (prolly this name), there's a line api_fqdn which I've set to IP. a cookbook does this for me.
[2013-11-11 20:00:30 -0500] holms: scarolan: default is node hostname, which in the end fails with "getaddrinfo() couldn't resolve.."
[2013-11-11 20:00:50 -0500] webframp: adamjk-dev true, unfortunate that licensing impedes sharing that work we're doing over and over
[2013-11-11 20:02:00 -0500] adamjk-dev: webframp: yep.... and I wish there were public RHEL boxes
[2013-11-11 20:02:40 -0500] adamjk-dev: to test with, but I presume it is close enough to centos perhaps
[2013-11-11 20:03:12 -0500] webframp: heh, so far that assumption hasn't bitten me
[2013-11-11 20:05:00 -0500] adamjk-dev: webframp: ah, no server version on that site you gave me, but good find though :) thanks
[2013-11-11 20:05:27 -0500] adamjk-dev: webframp: yeah, likely so, it is just nice to test it all on the exact OS before promoting
[2013-11-11 20:05:38 -0500] adamjk-dev: even if there are only minor differences
[2013-11-11 20:05:59 -0500] adamjk-dev: but perhaps they are close enough and there is no way to get around the licensing, so not sure what one could expect
[2013-11-11 20:06:17 -0500] webframp: def., our usual RHEL workflow is testing on centos, final pass with RHEL in AWS or similar before promoting
[2013-11-11 20:06:55 -0500] adamjk-dev: yeah, true
[2013-11-11 20:07:09 -0500] adamjk-dev: we just deploy everything to our own internal base boxes (rhel)
[2013-11-11 20:11:31 -0500] btm_: @opscode chef/ohai code review: join: https://plus.google.com/hangouts/_/76cpi1k5h6qmku7ng8tre0laag , watch: http://youtu.be/gbzMS9qeea0
[2013-11-11 20:42:37 -0500] nickmeharry: Has anyone had issues with bootstrapping a new node through a gateway host? This is what I'm getting: http://pastebin.com/KW3LwPBn
[2013-11-11 20:53:15 -0500] josephholsten: nickmeharry: can you ssh to the box? bootstrap is just wrapping ssh
[2013-11-11 20:53:45 -0500] nickmeharry: I can ssh to the bastion host just fine, and from there to the node I want to bootstrap.
[2013-11-11 20:54:10 -0500] nickmeharry: I'm trying to figure out where the 127.0.0.1:65535 is coming from.
[2013-11-11 20:54:26 -0500] nickmeharry: The debug output doesn't even mention the bastion host either.
[2013-11-11 21:02:16 -0500] btm_: @opscode no cook code review today, looks like the plague took many victims.
[2013-11-11 21:06:24 -0500] dgarstang3: Don't suppose anyone knows anything about CHEF-3694. It'd be nice not to see hundreds of lines of warning messages on every single chef run
[2013-11-11 21:07:08 -0500] c_t: you should be able to adjust your log level in client.rb
[2013-11-11 21:24:35 -0500] dgarstang3: Ah the joys of community cookbooks using public gems... "WARN:  failed to find gem di-ruby-lvm (>= 0) from [http://rubygems.org/]"
[2013-11-11 21:37:07 -0500] dgarstang3: *sigh* "WARN:  failed to find gem di-ruby-lvm (>= 0) from [http://rubygems.org/]"
[2013-11-11 21:38:41 -0500] dysinger: hela
[2013-11-11 21:38:46 -0500] dysinger: er hola
[2013-11-11 21:40:31 -0500] dysinger: how can I use test-kitchen w/ chef 11.8 omnibus?
[2013-11-11 21:40:36 -0500] dysinger: I want to use chef-zero
[2013-11-11 21:40:57 -0500] dysinger: but it bails with an error that I can't gem install stuff with omnibus chef's gem
[2013-11-11 21:41:03 -0500] dysinger: (it's trying to install chef-zero gem)
[2013-11-11 21:43:08 -0500] dgarstang3: Oh just awesome. http://pastebin.com/2XM88Psx
[2013-11-11 21:49:21 -0500] bean: hmm dgarstang3 I had no problems grabbing that .gem
[2013-11-11 21:49:35 -0500] dgarstang3: bean: neither did I on the 5th attempt.
[2013-11-11 21:49:45 -0500] bean: likely a blip w/ rubygems then
[2013-11-11 21:49:51 -0500] dgarstang3: :(
[2013-11-11 21:50:09 -0500] dgarstang3: right after a cookbook change just to make me think it was me.
[2013-11-11 21:56:50 -0500] Blah1: i'm getting a really strang problem w/ chef-server ...  i've uploaded cookbooks to it on a fresh install.  yet when i make a change to the cookbook (and updated the version # ) , when i go to upload the updated cookbook i get ENETUNREACH: Network is unreachable .  yet i can knife cookbook delete mycookbook just fine and all other knife commands appear to be working
[2013-11-11 21:57:13 -0500] Blah1: chef-server v 11.0.8 on ubuntu 12.04.3 x64
[2013-11-11 22:01:02 -0500] juliancdunn: sounds like bookshelf is down and/or has the wrong fqdn Blah1
[2013-11-11 22:01:20 -0500] juliancdunn: if you "knife upload" with -VV it'll tell you what it's trying to connect to
[2013-11-11 22:01:20 -0500] Blah1: juliancdunn: interesting.  how do i configure the fqdn for bookshelf?
[2013-11-11 22:01:25 -0500] Blah1: kk lemme try that
[2013-11-11 22:01:32 -0500] dgarstang3: *sigh* Why is uploading cookbooks to the chef server so hard?
[2013-11-11 22:02:33 -0500] juliancdunn: Blah1: all the tunables are in http://docs.opscode.com/config_rb_chef_server.html
[2013-11-11 22:02:58 -0500] Blah1: thanks juliancdunn
[2013-11-11 22:15:11 -0500] dgarstang3: Where's best to put the base role? Explicitly in the run list, or in the specific role?
[2013-11-11 22:21:39 -0500] dgarstang3: Where's best to put the base role? Explicitly in the run list, or in the specific role?
[2013-11-11 22:23:21 -0500] bean: you appear to be repeating yourself. are you talking about a "role" cookbook?
[2013-11-11 22:24:20 -0500] supercom32: Hey Everyone. I did a knife bootstrap to a Windows 2008 box and it seems to be ok. But I don't see the machine in my node list. Any ideas?
[2013-11-11 22:28:37 -0500] supercom32: Hrm, manually creating a node generates a runtime error. Interesting.
[2013-11-11 22:36:09 -0500] dgarstang3: bean: Yes
[2013-11-11 22:36:19 -0500] bean: dgarstang3: I'd just put it in the run list.
[2013-11-11 22:36:25 -0500] bean: I try not to use real "roles"
[2013-11-11 22:36:48 -0500] dgarstang3: bean: I can see both sides of it. that seems weird to me, since the role assigned to the box uses base anyway
[2013-11-11 22:41:23 -0500] dgarstang3: bean, you use fake roles?
[2013-11-11 22:42:10 -0500] bean: I only use them when an upstream cookbook requires. Typically we have a "companyname-servicename" cookbook and a "node-servicename" cookbook.
[2013-11-11 22:42:21 -0500] bean: and we have a role called "Essentials"
[2013-11-11 22:42:27 -0500] bean: that bootstraps LDAP, etc on to it.
[2013-11-11 22:44:46 -0500] gclark85: does anyone know if the knife command can be run from the client?
[2013-11-11 22:45:07 -0500] gclark85: I am trying to configure a script on my clients to delete themselves from hosted chef upon shutdown
[2013-11-11 22:47:19 -0500] kallen: gclark85: it can be. whatever user you run it as on the client needs access to admin priv level chef api credential (e.g. /home/automation-user/.chef/automation.pem)
[2013-11-11 22:47:35 -0500] kallen: that's how i think of it
[2013-11-11 22:47:51 -0500] gclark85: I am receiving the message "cannot sign the request without a client name, check that :node_name is assigned
[2013-11-11 22:48:12 -0500] supercom32: When you bootstrap a machine, shouldn't it automatically get added as a node?
[2013-11-11 22:48:50 -0500] gclark85: supercom32 yes typically it will add to your chef server
[2013-11-11 22:49:37 -0500] supercom32: gclark85: Is there a reason a node being bootstrap wouldn't get added to the server? I'm bootstrapping a windows box, and for some reason it's not being added automatically.
[2013-11-11 22:50:46 -0500] bean: didn't you say you were getting a runtime error when adding the node, supercom32
[2013-11-11 22:50:53 -0500] gclark85: I would check your command syntax to make sure it is all accurate
[2013-11-11 22:52:12 -0500] supercom32: bean: ah, that was before. Apparently when adding a node manually I was missing the EDITOR environment variable. So that problem is solved, but it still leaves me head scratching as to why the node was not added during bootstrap.
[2013-11-11 22:52:31 -0500] bean: it should be, you're correct
[2013-11-11 22:56:56 -0500] supercom32: I'm just doing "knife bootstrap winrm '<myHost>' -x user -P password -p 5985 -r 'chef-client'
[2013-11-11 22:57:01 -0500] supercom32: Nothing really out of the ordinary.
[2013-11-11 23:00:06 -0500] supercom32: gclark85: I sure can. It runs just fine.
[2013-11-11 23:00:47 -0500] gclark85: well that's bizarre.  What about firewalls, could there be something blocking the chef client from checking in?  I'm not sure what all is involved there
[2013-11-11 23:01:19 -0500] supercom32: I can even go 'knife winrm "hostname" "chef-client -c c:/chef/client.rb" -m -x user -P password.
[2013-11-11 23:01:35 -0500] supercom32: And kickstart it remotely.
[2013-11-11 23:01:58 -0500] supercom32: Maybe there is a line in the output that should say something like "Added node" or something?
[2013-11-11 23:05:11 -0500] MattStratton: hmm. trying to figure out the best way to handle pending restarts in a windows node
[2013-11-11 23:05:42 -0500] MattStratton: for example, I have a cookbook that installs roles and features, but it wants a reboot once it's done. I suppose I can send a notify, but I don't want to reboot after each role/feature, more after all are installed
[2013-11-11 23:07:50 -0500] dgarstang3: I just love chef for it's wide and varied arbitrary errors. :) "Couldn't cleanly terminate all actors in 10 seconds!. Ridley::NodeResource#finalize crashed!'
[2013-11-11 23:08:40 -0500] MattStratton: ah. the windows_reboot resource in the windows cookbook is what i need. duh.
[2013-11-11 23:11:43 -0500] isafarnik: dgarstang3: That's Ridley, Riot Games' Chef API client: github.com/RiotGames/ridley
[2013-11-11 23:12:57 -0500] supercom32: Hrm... I tried bootstraping another machine and it seems to add a node fine. I did note that for some strange reason, the machine which won't add a node doesn't automatically get added as a client.
[2013-11-11 23:15:26 -0500] dgarstang3: trying to get the latest version of a cookbook onto the chef server almost has me in tears
[2013-11-11 23:18:41 -0500] isafarnik: dgarstang3: What is the output of "knife cookbook upload cookbook name -VV"?
[2013-11-11 23:19:21 -0500] dgarstang3: isafarnik: always works fine
[2013-11-11 23:19:32 -0500] dgarstang3: isafarnik: using berkshelf too
[2013-11-11 23:20:21 -0500] dgarstang3: isafarnik: the problem is typically that the version on the server is old when the client runs
[2013-11-11 23:20:51 -0500] thehar: anyone successfully cheffed a pdu?
[2013-11-11 23:20:56 -0500] thehar: curious if they have enough memory to do so
[2013-11-11 23:21:36 -0500] isafarnik: thehar: It is has SSH :D
[2013-11-11 23:21:42 -0500] thehar: want.
[2013-11-11 23:21:58 -0500] isafarnik: Just curious, what's the use case?
[2013-11-11 23:22:07 -0500] isafarnik: What would you need Chef to do on a PDU?
[2013-11-11 23:22:11 -0500] thehar: i want to map all the ports and stuff to name, etc.
[2013-11-11 23:22:17 -0500] thehar: like i want to magically manage my switches
[2013-11-11 23:22:21 -0500] thehar: and routers
[2013-11-11 23:22:25 -0500] thehar: all the things
[2013-11-11 23:22:49 -0500] isafarnik: all the things!
[2013-11-11 23:22:59 -0500] thehar: yesssssss
[2013-11-11 23:24:37 -0500] dgarstang3: (allthethings)
[2013-11-11 23:24:45 -0500] thehar: #{allTheThings}
[2013-11-11 23:25:11 -0500] dgarstang3: (notimeforthat)

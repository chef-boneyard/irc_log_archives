[2013-11-26 01:32:36 -0500] ss1523: Has anyone tried to install the ssh-keys cookbook from the opscode community webiste: http://community.opscode.com/cookbooks/ssh-keys
[2013-11-26 01:32:43 -0500] ss1523: I get the following error:
[2013-11-26 01:33:53 -0500] ss1523: ERROR: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '128'
[2013-11-26 01:33:53 -0500] ss1523: ---- Begin output of git add ssh-keys ----
[2013-11-26 01:33:53 -0500] ss1523: STDOUT:
[2013-11-26 01:33:53 -0500] ss1523: STDERR: fatal: Not a git repository: /Users/Nickola/Development/.chef/.git/modules/site-cookbooks/ssh-keys
[2013-11-26 01:33:54 -0500] ss1523: ---- End output of git add ssh-keys ----
[2013-11-26 01:33:57 -0500] ss1523: any ideas ?
[2013-11-26 03:04:23 -0500] johncolombia: hi,
[2013-11-26 03:04:53 -0500] johncolombia: Can I define "variables" in a json file to describe a role?
[2013-11-26 03:05:02 -0500] johncolombia: I have this role, nagios-server
[2013-11-26 03:05:07 -0500] johncolombia: nagios-server.json
[2013-11-26 03:05:32 -0500] johncolombia: and after defining "name", "chef-type" and "json_class" I write these lines
[2013-11-26 03:05:41 -0500] johncolombia: "nagios": {
[2013-11-26 03:05:41 -0500] johncolombia: "url": "http://prdownloads.sourceforge.net/sourceforge/nagios/",
[2013-11-26 03:05:42 -0500] johncolombia: "version": "nagios-4.0.1"
[2013-11-26 03:05:42 -0500] johncolombia: },
[2013-11-26 03:05:49 -0500] johncolombia: is this correct?
[2013-11-26 03:07:48 -0500] johncolombia: I try to access these variables in my chef recipes as follows #{node[:nagios][:version]}
[2013-11-26 03:09:07 -0500] juliancdunn: johncolombia: sure, put those under default_attributes in the role
[2013-11-26 03:10:25 -0500] johncolombia: julian can you give a web page where find more info
[2013-11-26 03:10:27 -0500] johncolombia: thanks a lot
[2013-11-26 03:13:17 -0500] johncolombia: ok, may be I find something ;)
[2013-11-26 03:33:19 -0500] tabolario: Evening folks
[2013-11-26 03:33:42 -0500] tabolario: So searching around a bit.. Does anyone know of a cookbook to set a host up as a NAT forwarding box?
[2013-11-26 05:28:52 -0500] theskyisdrunk: Hello! When I attempt a knife SSH I get the following error: FATAL: No nodes returned from search!
[2013-11-26 05:29:02 -0500] theskyisdrunk: I googled
[2013-11-26 05:29:05 -0500] theskyisdrunk: but I cant figure this out :)
[2013-11-26 06:06:14 -0500] jchauncey: theskyisdrunk: that means your search query didnt return any results
[2013-11-26 06:06:42 -0500] jchauncey: theskyisdrunk: what does your query look like?
[2013-11-26 06:18:01 -0500] Garo__: What options are there to orchestrate clusters within Chef? I've only found Ironfan to support this kind of setupping, but it isn't that well documented.
[2013-11-26 08:58:13 -0500] ptrf: hmm, so I have an app/wrapper cookbook, that depends on fnichol's rbenv cookbook, which is not on opscode
[2013-11-26 08:58:17 -0500] ptrf: and I'm using berksfile
[2013-11-26 08:58:23 -0500] ptrf: berkshelf*
[2013-11-26 09:00:51 -0500] slicknick: ok .. and ..
[2013-11-26 09:01:00 -0500] ptrf: yeah, sorry about that
[2013-11-26 09:02:17 -0500] ptrf: in my chef-repo, I have a berksfile with 'site :opscode', 'cookbook "rbenv", github: "fnichol/chef-rbenv", protocol: https' and 'cookbook "wrapper", path: "~/wrapper"'
[2013-11-26 09:03:02 -0500] ptrf: likewise I have in my wrapper cookbook a metadata.rb with depends-statement for the rbenv cookbook
[2013-11-26 09:03:40 -0500] ptrf: and I also have a Berksfile with the lines 'site :opscode', 'metadata', 'cookbook "rbenv", github: ...'
[2013-11-26 09:04:06 -0500] ptrf: yet when I try to berks update && berks upload wrapper, I get an error
[2013-11-26 09:04:13 -0500] ptrf: Cookbook 'rbenv' not found in any of the default locations
[2013-11-26 09:05:08 -0500] ptrf: berks update works fine
[2013-11-26 09:05:16 -0500] slicknick: ok so where is rbenv
[2013-11-26 09:05:30 -0500] slicknick: and where are the rest of these things ...
[2013-11-26 09:06:06 -0500] slicknick: compare directories .. move rbenv as necessary to match .. badda bing badaaa b00m!
[2013-11-26 09:06:45 -0500] ptrf: slicknick: rbenv is on github
[2013-11-26 09:18:27 -0500] slicknick: so theres a problem getting to gitjib
[2013-11-26 09:18:30 -0500] slicknick: github
[2013-11-26 09:21:12 -0500] slicknick: pluck out the piece(s) of all your schtuff associated to, that make up, gather info, whatever it takes to satisfy your github
[2013-11-26 09:21:37 -0500] slicknick: https? ssh/scp? rsync?!
[2013-11-26 09:22:48 -0500] ptrf: slicknick: no actually I just found out
[2013-11-26 09:23:00 -0500] ptrf: I was using berks upload wrapper
[2013-11-26 09:23:18 -0500] slicknick: so maybe you can help me, then ...
[2013-11-26 09:23:26 -0500] ptrf: sure :)
[2013-11-26 09:23:46 -0500] ptrf: So I should be using just berks upload, not berks upload wrapper
[2013-11-26 09:24:00 -0500] slicknick: right on .. howd you figure that out ?
[2013-11-26 09:26:27 -0500] slicknick: centos nodes in various states (patches & kernels) through dev/test/../prod environments.  goal is to compile a list of packages that have updates available for each node
[2013-11-26 09:27:11 -0500] slicknick: for each node, list packages that have updates available
[2013-11-26 09:31:08 -0500] micw: hi
[2013-11-26 09:31:44 -0500] micw: i had a look to puppet and now i'm looking to chef to make a decision what would best fit my needs.
[2013-11-26 09:32:47 -0500] micw: puppet works in a way that it checks "is something already pressent - if not make it be there" (e.g. runs on a bare system as well as on a system that is already running)
[2013-11-26 09:33:08 -0500] micw: is it the same with chef? will it find the difference from what is and what sould be?
[2013-11-26 09:33:34 -0500] ptrf: slicknick: just thouhgt I would try a different approach than uploading a specific cookbook
[2013-11-26 09:34:16 -0500] ptrf: slicknick: you may want to take a look at http://dougireton.com/blog/2013/02/03/knife-tricks/
[2013-11-26 09:37:13 -0500] ptrf: and then you might want to combine it with knife ssh
[2013-11-26 09:37:21 -0500] slicknick: hmm
[2013-11-26 09:37:31 -0500] ptrf: how do you want to compile the list
[2013-11-26 09:37:35 -0500] slicknick: i mean i see the resource http://docs.opscode.com/resource_yum.html but nothing about show or list :/
[2013-11-26 09:38:11 -0500] ptrf: you could also have a recipe that runs a shell command on each host and emails you the output
[2013-11-26 09:38:19 -0500] ptrf: so that's the most rudimentary solution
[2013-11-26 09:38:38 -0500] ptrf: or you could integrate with sensu or nagios or other monitoring system
[2013-11-26 09:38:45 -0500] slicknick: yeah was hoping something was available to take advantage of chefs framework/platform
[2013-11-26 09:39:16 -0500] slicknick: i know its not meant for one time runs :P
[2013-11-26 09:39:50 -0500] slicknick: for audit purpose, playing catch up, base line, see where we're at, etc
[2013-11-26 09:47:00 -0500] ptrf: slicknick: I would definitely recommend a monitoring system
[2013-11-26 09:47:30 -0500] ptrf: sensu works really well with chef, but it's still pretty bare bones
[2013-11-26 09:47:57 -0500] slicknick: noted.
[2013-11-26 09:48:42 -0500] slicknick: but say you had only to your disposal, what exists today -- the monitoring solution does not provide such information.
[2013-11-26 09:49:25 -0500] slicknick: luckily, chef-client is on most systems! lets chat it out
[2013-11-26 09:51:53 -0500] segv: heh
[2013-11-26 09:52:07 -0500] segv: slicknick, zenoss?
[2013-11-26 09:54:25 -0500] slicknick: centos
[2013-11-26 09:54:33 -0500] slicknick: :P
[2013-11-26 09:54:40 -0500] segv: zenoss for monitoring :p
[2013-11-26 09:54:51 -0500] slicknick: i know, i know just being smart
[2013-11-26 09:54:56 -0500] segv: :p
[2013-11-26 09:55:06 -0500] segv: 2am for me, not smart for being awake
[2013-11-26 10:02:19 -0500] nebrera: hello
[2013-11-26 10:02:29 -0500] nebrera: I am getting an issue with chef-client and chef server
[2013-11-26 10:02:53 -0500] nebrera: If I reboot the chef-server the chef-client lost connection and never tries again
[2013-11-26 10:03:08 -0500] nebrera: how could I retry every X seconds ???
[2013-11-26 10:03:30 -0500] ptrf: make sure you have it enabled as a service
[2013-11-26 10:03:43 -0500] ptrf: oh, nevermind, I didn't understand that
[2013-11-26 10:04:01 -0500] ptrf: I'm running hosted chef, so I can't really test that
[2013-11-26 10:04:05 -0500] zeroXten: i'm starting to see why I used to write all my own cookbooks
[2013-11-26 10:04:27 -0500] zeroXten: the time it takes to debug and get other people's stuff working is generally longer than it takes for me to write something specific to my needs
[2013-11-26 10:04:41 -0500] ptrf: ;(
[2013-11-26 10:05:50 -0500] zeroXten: it's quite amazing really. I just want to install a super simple rails app using application_ruby on ubuntu 1204 (LTS).. but my current problem is that but i'm currently getting 404s when installing libcurl
[2013-11-26 10:06:58 -0500] zeroXten: also thinking that if you do actually manage to get a system built, golden images are probably a good idea
[2013-11-26 10:07:15 -0500] zeroXten: either that or mirror *all* the things
[2013-11-26 10:07:21 -0500] zeroXten: </rant>
[2013-11-26 10:08:16 -0500] nebrera: there is no valid option to reconect ?
[2013-11-26 10:08:55 -0500] zeroXten: ah lol.. just need to "aptitude update"... just need to get chef to do it for me as it looks like it doesn't do it by default
[2013-11-26 10:09:31 -0500] gregkare: Yup if you don't update it will try to downloaded versions that have been deleted since
[2013-11-26 10:09:37 -0500] gregkare: -ed
[2013-11-26 10:10:20 -0500] zeroXten: 'This recipe installs the update-notifier-common package to provide the timestamp file used to only run apt-get update if the cache is more than one day old.'
[2013-11-26 10:11:57 -0500] ptrf: this is the worst :) -> <zeroXten> ah lol.. just need to "aptitude update"... just need to get chef to do it for me as it looks like it doesn't do it by default
[2013-11-26 10:12:28 -0500] ptrf: is there a resource for updating the package tree when it actually makes sense?
[2013-11-26 10:12:55 -0500] zeroXten: i'm pinning my hopes on https://github.com/opscode-cookbooks/apt/blob/master/recipes/default.rb
[2013-11-26 10:37:12 -0500] ptrf: hmm, the deploy resource fails if you don't give it a repo, etc.
[2013-11-26 10:37:25 -0500] ptrf: I just want it to build a folder ready for deploy
[2013-11-26 10:37:39 -0500] ptrf: so basically I want chef to perform cap deploy:setup
[2013-11-26 10:49:25 -0500] zeroXten: sweet jesus it works
[2013-11-26 10:55:49 -0500] hrak: argh, just got bit by https://tickets.opscode.com/browse/CHEF-4762
[2013-11-26 10:55:59 -0500] hrak: took a while to find out this is actually a bug
[2013-11-26 11:10:01 -0500] hrak: hey glennpratt, get yourself a new ISP!
[2013-11-26 11:10:13 -0500] hrak: lol
[2013-11-26 11:30:07 -0500] s2r2: https://github.com/opscode/knife-ec2/pull/34  Really?  How do you use different EC2 endpoints with knife-ec2?
[2013-11-26 11:31:09 -0500] s2r2: https://github.com/opscode/knife-ec2/pull/111 nvm :)
[2013-11-26 11:36:41 -0500] s2r2: nvm the nvm, it's not possible right now, right? (yes I'm confused)
[2013-11-26 12:33:54 -0500] pedda: hi there
[2013-11-26 12:34:26 -0500] pedda: i'm struggeling a bit with the php-cookbook from github
[2013-11-26 12:35:07 -0500] pedda: i need to set some directives for the php.ini file, but all those result in a modified /../cli/php.ini
[2013-11-26 12:35:20 -0500] pedda: i need those directives in the apache2/php.ini
[2013-11-26 12:35:41 -0500] pedda: can someone point me in the right direction what to modify?
[2013-11-26 12:53:38 -0500] zeroXten: i think I'm going to give up on application_ruby
[2013-11-26 13:04:24 -0500] ocholetras: hi guys!
[2013-11-26 13:04:33 -0500] ocholetras: How you are doing with environment
[2013-11-26 13:04:57 -0500] ocholetras: here my team are suggesting doing that in a per-cluster basis
[2013-11-26 13:06:05 -0500] ocholetras: but it turns to me that it is going to be t0o much environments
[2013-11-26 13:06:33 -0500] ocholetras: for the info i  have been googling about the thing..
[2013-11-26 13:06:49 -0500] ocholetras: it seems that the correct way is to have 1 environment per stage
[2013-11-26 13:06:57 -0500] ocholetras: Stesting, Staging, Production..
[2013-11-26 13:23:35 -0500] juliancdunn: s2r2: I thought there was --region for that
[2013-11-26 13:23:48 -0500] juliancdunn: because knife-ec2 keeps complaining that I haven't set my region, so it's assuming an endpoint :)
[2013-11-26 13:24:06 -0500] juliancdunn: ocholetras: environments are basically "policy groups"
[2013-11-26 13:24:21 -0500] ocholetras: yup
[2013-11-26 13:24:42 -0500] juliancdunn: so depending on the size of your infra, that could be "qa", "staging", "prod" as you describe
[2013-11-26 13:24:54 -0500] juliancdunn: or, if you don't feel like making changes to all of prod, you might break that up
[2013-11-26 13:24:55 -0500] ocholetras: Yea, that sounds logical
[2013-11-26 13:25:14 -0500] ocholetras: but cluster basis sounds logical too
[2013-11-26 13:25:19 -0500] ocholetras: something like
[2013-11-26 13:25:27 -0500] ocholetras: database_cluster_production
[2013-11-26 13:25:28 -0500] s2r2: juliancdunn: well, I was trying to connect to an EC2-compatible API that is not AWS-ish in any way
[2013-11-26 13:25:40 -0500] ocholetras: storage_cluster_production
[2013-11-26 13:25:57 -0500] ocholetras: rproxy_cluster_production
[2013-11-26 13:25:58 -0500] juliancdunn: ocholetras: if you plan to run different versions of the same cookbooks across those servers then yes, that makes sense
[2013-11-26 13:26:28 -0500] ocholetras: Its not only versions
[2013-11-26 13:26:38 -0500] ocholetras: the IP address for the ha services changes on testing
[2013-11-26 13:26:56 -0500] ocholetras: because they are on private networks instead of publics
[2013-11-26 13:27:08 -0500] juliancdunn: s2r2: I'm not sure that's supported, but you could check the source code to be sure
[2013-11-26 13:27:39 -0500] s2r2: juliancdunn: been there, nothing found the githubs search yields three issues that are related, but no endpoint in the code...
[2013-11-26 13:27:42 -0500] juliancdunn: ocholetras: not sure what that has to do with it?
[2013-11-26 13:27:49 -0500] juliancdunn: s2r2: it probably uses Fog
[2013-11-26 13:27:55 -0500] s2r2: juliancdunn: yep
[2013-11-26 13:28:05 -0500] juliancdunn: so if fog takes an option to let you override the endpoint then you could probably set that...
[2013-11-26 13:28:08 -0500] s2r2: the code in some PR isn't complicated just never merged...
[2013-11-26 13:28:48 -0500] s2r2: https://github.com/opscode/knife-ec2/pull/142  for example
[2013-11-26 13:29:37 -0500] juliancdunn: yeah, I think seth probably wandered off to work on something more pressing
[2013-11-26 13:29:40 -0500] juliancdunn: like ChefSpec 3 :-)
[2013-11-26 13:30:19 -0500] ocholetras: juliancdunn: then where you put the override for the ip address of the cluster when deploying on a testing environment?
[2013-11-26 13:31:06 -0500] juliancdunn: it's a VIP? to what?
[2013-11-26 13:31:11 -0500] enbergj: argh, I'm sorry if I sound rude, but it sounds like the developers have missed quite a few of "Web Development for dummies" classes .. I try to delete a node in hosted chef and it pops open a confirm saying "Please confirm you want to delete this node." .. now which node is that? no-one past the "omg I made a website" -level should really make a confirm dialog that doesn't actually mention which item it's talking about: Are you sure you want to delete 
[2013-11-26 13:31:31 -0500] ocholetras: Its a vip for the service and a private IP for each node of the cluster to check sync is going ok.
[2013-11-26 13:31:37 -0500] juliancdunn: enbergj: sorry to hear. there's a feedback button on the top
[2013-11-26 13:32:00 -0500] juliancdunn: ocholetras: can you discover it dynamically? that's what I normally would do
[2013-11-26 13:32:03 -0500] juliancdunn: use Chef search to find it
[2013-11-26 13:32:20 -0500] enbergj: yeah, I sent a milder tone notification via the web page, but I really neede to exclaim the wrongness of this ;)
[2013-11-26 13:32:44 -0500] ocholetras: so you put it on databag instead of attributeS?
[2013-11-26 13:32:56 -0500] juliancdunn: ocholetras: no, you could search for it if it's a host, for example
[2013-11-26 13:33:24 -0500] juliancdunn: my_haproxy = search(:node, "role:haproxy AND chef_environment:#{node.chef_environment}")
[2013-11-26 13:33:50 -0500] ocholetras: so you have to configure network without chef
[2013-11-26 13:33:53 -0500] juliancdunn: or if it's not (e.g. if it's a VIP on some network device) then data bag item might be the right answer
[2013-11-26 13:33:59 -0500] ocholetras: then use ohai to search for that info
[2013-11-26 13:34:03 -0500] ocholetras: right?
[2013-11-26 13:34:07 -0500] juliancdunn: not sure what you mean
[2013-11-26 13:34:34 -0500] ocholetras: I mean you have to have the eth0 with an ip already configured to search for that address
[2013-11-26 13:35:07 -0500] ocholetras: and i want to get that config from attributes
[2013-11-26 13:35:07 -0500] juliancdunn: yep, I assume your boxes boot up with their eth0 already configured though?
[2013-11-26 13:35:12 -0500] ocholetras: yea
[2013-11-26 13:35:16 -0500] ocholetras: but eth0 is service
[2013-11-26 13:35:20 -0500] ocholetras: eth1 is for ha
[2013-11-26 13:35:38 -0500] juliancdunn: you can descend into ohai attributes for the IP of the interface
[2013-11-26 13:36:36 -0500] juliancdunn: node['interfaces']['eth1']['addresses'] for example would return an array
[2013-11-26 13:36:40 -0500] ocholetras: Yes i can, that is because i said that i have to manage network config stuff outside chef, then run chef-client.. to do the rest of stuf..
[2013-11-26 13:37:08 -0500] juliancdunn: yeah, or even if you want to do it within chef, you can programatically reload Ohai within your run to pick up the new interface info
[2013-11-26 13:37:38 -0500] ocholetras: Yea, but how do yo get the addres for the interfaces cookbook to configure it?
[2013-11-26 13:37:47 -0500] ocholetras: You have to put it on attributes or databags or whatever
[2013-11-26 13:38:02 -0500] ocholetras: that is because we are planing to use environments to set those override attributes
[2013-11-26 13:38:11 -0500] juliancdunn: no, since it's automatic (Ohai) data, it's persisted to the node objects
[2013-11-26 13:38:26 -0500] ocholetras: But 1st time you configure the interface
[2013-11-26 13:38:33 -0500] ocholetras: you do it manually?
[2013-11-26 13:38:44 -0500] ocholetras: if with chef, you need the ip address
[2013-11-26 13:38:54 -0500] ocholetras: if you dont have ip addres nowhere
[2013-11-26 13:39:03 -0500] juliancdunn: oh, I see -- you *assign* eth1 an IP address
[2013-11-26 13:39:14 -0500] ocholetras: Yea
[2013-11-26 13:39:35 -0500] juliancdunn: then yeah, I guess you need to hardcode that somewhere, as you mention
[2013-11-26 13:39:54 -0500] ocholetras: What usecase are you talking
[2013-11-26 13:39:55 -0500] ocholetras: ?
[2013-11-26 13:40:13 -0500] juliancdunn: I'm talking about completely dynamic infrastructures
[2013-11-26 13:40:18 -0500] ocholetras: Yea
[2013-11-26 13:40:25 -0500] ocholetras: But we dont have that part
[2013-11-26 13:40:30 -0500] ocholetras: planning to do  with cobbler
[2013-11-26 13:40:39 -0500] juliancdunn: oh, okay. these are metal machines
[2013-11-26 13:40:44 -0500] ocholetras: yeah
[2013-11-26 13:40:54 -0500] juliancdunn: gotcha.
[2013-11-26 13:40:56 -0500] ocholetras: we have preseed based PXE installs
[2013-11-26 13:41:24 -0500] ocholetras: And we can set ip address manually, but when disconver chef, seems to be a good place to store all that information about your infrastructure..
[2013-11-26 13:41:30 -0500] ocholetras: even ip address
[2013-11-26 13:41:50 -0500] ocholetras: but, thinking about it..
[2013-11-26 13:41:51 -0500] juliancdunn: Chef will definitely store it.
[2013-11-26 13:42:07 -0500] ocholetras: Yea, on the node objects!
[2013-11-26 13:42:23 -0500] ocholetras: you are right!
[2013-11-26 13:42:35 -0500] juliancdunn: correct
[2013-11-26 13:42:50 -0500] ocholetras: thin we need to change the way we think about chef works
[2013-11-26 13:42:56 -0500] juliancdunn: and node A can find out the IP address of node B, given appropriate search criteria
[2013-11-26 13:43:58 -0500] juliancdunn: well I gotta run -- good luck!
[2013-11-26 13:49:31 -0500] fitzdsl: hello. on a brand new installation of chef-client on a mac 10.8  my /opt/chef is 700, I can't use knife with a regular user
[2013-11-26 13:49:47 -0500] fitzdsl: is that normal ?
[2013-11-26 15:00:55 -0500] eliklein: fitzdsl: how did you install chef?
[2013-11-26 15:03:43 -0500] pedda: is this the right plase to file questions about cookbooks ?
[2013-11-26 15:09:30 -0500] fitzdsl: eliklein: with the command "curl -L https://www.opscode.com/chef/install.sh | sudo bash"
[2013-11-26 15:10:29 -0500] eliklein: fitzdsl: generally, if you're installing chef to be used as a regular user, you would "gem install chef" as that user
[2013-11-26 15:11:53 -0500] eliklein: fitzdsl: i suppose you could just fix permissions on /opt/chef, but you'll still need to setup that regular user's .chef/knife.rb and client pem
[2013-11-26 15:15:15 -0500] tcate: is there way to escape quotes in knife ssh? It seems like | awk '{ print $2 }' at the end of my command is being ignored
[2013-11-26 15:30:08 -0500] eliklein: pedda: yep
[2013-11-26 15:30:26 -0500] eliklein: tcate: can you pastebin more context?
[2013-11-26 15:30:58 -0500] pedda: well i have a small issue regrding the php cookbook and adjusting some php.ini via :directive
[2013-11-26 15:31:34 -0500] pedda: my custom directives are written to the wrong php.ini file and i have no clue how to pass the proper file
[2013-11-26 15:31:43 -0500] pedda: to be written to
[2013-11-26 15:32:04 -0500] eliklein: pedda: what php.ini are they being written to and where do you want them to be written to?
[2013-11-26 15:32:37 -0500] pedda: in general there are two php.ini's for two different contexts cli/php.ini and apache2/php.ini
[2013-11-26 15:32:53 -0500] pedda: my directives are written into the cli related php.ini
[2013-11-26 15:33:11 -0500] pedda: i want to have them written to both (when i think about it once again)
[2013-11-26 15:33:32 -0500] pedda: for example: in eed max_execution_time far higher than 30 sec
[2013-11-26 15:33:52 -0500] pedda: default[:php][:directives][:max_execution_time] = 360 does the job
[2013-11-26 15:34:02 -0500] eliklein: pedda: hmm, i'm not super familiar with the php cookbook, but i assume you're using conf_dir and ext_conf_dir?
[2013-11-26 15:34:13 -0500] pedda: no
[2013-11-26 15:34:15 -0500] pedda: not really
[2013-11-26 15:34:31 -0500] pedda: beside including a few recipes of the cookbook
[2013-11-26 15:34:48 -0500] pedda: i have only two lines setting some directives
[2013-11-26 15:34:52 -0500] pedda: but
[2013-11-26 15:34:58 -0500] pedda: conf_dir is a hint ;)
[2013-11-26 15:35:03 -0500] pedda: i will check those out
[2013-11-26 15:35:09 -0500] pedda: if i can set them anyhow
[2013-11-26 15:35:27 -0500] eliklein: pedda: they are listed in the default attributes.. i'd recommend searching through the code to see where they're used
[2013-11-26 15:35:33 -0500] pedda: indeed
[2013-11-26 15:35:41 -0500] pedda: foundem
[2013-11-26 15:36:02 -0500] pedda: i will play around with those two properties :)
[2013-11-26 15:36:08 -0500] eliklein: pedda: nice, good luck!
[2013-11-26 15:36:14 -0500] pedda: thx
[2013-11-26 15:36:21 -0500] pedda: and thx for the hint
[2013-11-26 15:36:40 -0500] eliklein: pedda: happy to help
[2013-11-26 15:39:55 -0500] pedda: eliklein worked like a charm.. how could i ever oversee that one (facepalm)
[2013-11-26 15:45:57 -0500] tcate: eliklein: sure, http://pastebin.com/tZdEqSYR
[2013-11-26 15:46:42 -0500] tcate: it seems like the 'print' from the awk is getting dropped when run through knife ssh, probably due to the quotes, but I can't figure out a way around it
[2013-11-26 15:47:08 -0500] gleam: it's not hte print
[2013-11-26 15:47:09 -0500] gleam: it's the $2
[2013-11-26 15:47:39 -0500] gleam: try instead 'ps -ef | grep [a]rbitrator.py | awk \'{print $2;}\''
[2013-11-26 15:47:57 -0500] tcate: gleam: that's it! actually just \$2 seems to work
[2013-11-26 15:48:00 -0500] gleam: that too
[2013-11-26 15:48:26 -0500] tcate: kept trying to escape the quotes and ignored the $
[2013-11-26 15:48:30 -0500] tcate: thanks man
[2013-11-26 15:53:04 -0500] gyre007: this chef_gem precedency is crazy I swear...
[2013-11-26 15:53:15 -0500] gyre007: like...unless you kick the machine with all kinds of libs
[2013-11-26 15:53:57 -0500] gyre007: you'll never be able to build native extensions...dont really understand why is there highest precedency of chef_gem in the whole resource collection...
[2013-11-26 15:58:04 -0500] CPS: i have a question about packaging recipes. I have a lot of recipes that do the same task with different files. I'd like to move the behavior to a single place and call a function and just feed it input. Is there a way to package functions into a file and make it available to recipes?
[2013-11-26 16:04:52 -0500] eliklein: pedda: awesome!
[2013-11-26 16:07:43 -0500] juliancdunn: CPS: I'm guessing that what you want to do is write a custom resource/provider (LWRP)
[2013-11-26 16:08:33 -0500] CPS: i'm not sure. my recipes are mostly for installing applications, so each recipe goes to a NAS location and fetches an MSI. I'd like to not have that same code in 4 different places, for example
[2013-11-26 16:19:28 -0500] freezey: when i run ohai -d on the custom plugins the information i am looking for shows up with no issues. however when i check the server to do searches based on this attribute the information doesnt populate
[2013-11-26 16:19:33 -0500] freezey: has anyone experienced this?
[2013-11-26 16:51:00 -0500] lewiz: Hey guys, can I have a remote_directory full of templates?  If not, how can I remove all files from a directory and install a single template without repeatedly deleting my template file over and over?
[2013-11-26 16:53:51 -0500] CPS: lewiz: per the template resource documentation, I think they have to come from the local templates directory
[2013-11-26 16:53:52 -0500] CPS: http://docs.opscode.com/resource_template.html
[2013-11-26 16:54:26 -0500] CPS: you can use the file directive to delete files and the directory directive to delete folders
[2013-11-26 16:54:57 -0500] CPS: you could delete everything from the local templates folder, then copy them from the remote resource before using them
[2013-11-26 16:56:38 -0500] lewiz: CPS: oh.  so populate a directory on the local machine and then set that as the remote_directory source?
[2013-11-26 16:56:59 -0500] CPS: what exactly are you trying to do?
[2013-11-26 16:59:06 -0500] pedda: eliklein working was just a miracle ;)
[2013-11-26 16:59:35 -0500] pedda: it seems as having the directives wrapped with quotes is still an issue.. not only for me..
[2013-11-26 16:59:37 -0500] pedda: :P
[2013-11-26 17:00:07 -0500] pedda: i mean.. the directives result in php flags which values are wrapped by quotes..
[2013-11-26 17:00:44 -0500] pedda: there is some COOK-2844 with this at the top: Resolution:
[2013-11-26 17:00:46 -0500] pedda: Won't Fix
[2013-11-26 17:00:58 -0500] pedda: seems as if i need to get around this on my own ..
[2013-11-26 17:02:36 -0500] CPS: also lewiz  i believe templates are included with the cookbook, so they should get downloaded from the server when the node executes its run list
[2013-11-26 17:13:10 -0500] sdicu: hi - did anybody had an issue with erlchef that says {badrecord,chef_cookbook_version},
[2013-11-26 17:55:03 -0500] gswallow: the windows_package resource is slippery.
[2013-11-26 17:55:37 -0500] gswallow: When I tell it to install a package, it calls the NSIS installer, which immediately returns control back to Chef.  Chef then proceeds to stumble through race conditions.
[2013-11-26 17:55:58 -0500] gswallow: So I wrote something like this, to eliminate the race condition (rather than a simple sleep X ):
[2013-11-26 17:56:10 -0500] gswallow: require 'sys/proctable'
[2013-11-26 17:56:10 -0500] gswallow: include Sys
[2013-11-26 17:56:10 -0500] gswallow: loop do
[2013-11-26 17:56:10 -0500] gswallow:   unless (::Sys::ProcTable.ps.index { |p| p['description'] =~ /Au_.exe/ }).nil?
[2013-11-26 17:56:10 -0500] gswallow:     puts "Eureka!"
[2013-11-26 17:56:10 -0500] gswallow:   end
[2013-11-26 17:56:11 -0500] gswallow:   sleep 1
[2013-11-26 17:56:11 -0500] gswallow: end
[2013-11-26 17:56:21 -0500] cheflevelramen: Hey Chefs. Any of you know if berkshelf can force upload a single cookbook and none of it's dependancies? My work flow gets pretty slow because when I work on a CB, I upload the cookbook to chef server to test on remote instance.
[2013-11-26 17:56:32 -0500] gswallow: What I wonder is  does it make sense to bake this into the windows cookbook?
[2013-11-26 17:57:52 -0500] skarufue: ok. i still cant figure out why i cannot  connect to my newly setup chef-server. my local version (with its own ip) works fine but on remote host (where it cannot have its on ip since it needs to be a switchble one) i get this error: http://ay.vc/3J
[2013-11-26 17:58:52 -0500] skarufue: on the server i found these ports open: http://ay.vc/3I so i forwarded them. no dice
[2013-11-26 17:59:05 -0500] cheflevelramen: @skarufue: can you successfully run 'knife client list'?
[2013-11-26 17:59:44 -0500] skarufue: cheflevelramen: yes. and it returns the client list
[2013-11-26 17:59:59 -0500] skarufue: cheflevelramen: also the webUI works fine
[2013-11-26 18:01:13 -0500] cheflevelramen: @skarufue: Hmm. It looks like you might not have necessary gems installed. How did you install chef locally?
[2013-11-26 18:02:19 -0500] skarufue: cheflevelramen: you mean locally or on the server?
[2013-11-26 18:02:30 -0500] cheflevelramen: @skarufue: locally
[2013-11-26 18:04:32 -0500] techminer: Is there a cookbook for configuring Radius authentication?
[2013-11-26 18:04:59 -0500] skarufue: cheflevelramen: well it works with our local devserver
[2013-11-26 18:05:33 -0500] skarufue: cheflevelramen: local meaning in our LAN
[2013-11-26 18:06:56 -0500] cheflevelramen: @skarufue: Interesting. Another possiblity is that you are being blocked by a firewall. Are you using Private Chef or Hosted Chef? If private, is it on the same network as your workstation?
[2013-11-26 18:07:58 -0500] gabrtv: is it possible to use omnibus for generating x-platform installers for python CLIs?
[2013-11-26 18:08:03 -0500] CPS: gswallow: i've had some success using execute blocks to run msiexec to install things
[2013-11-26 18:08:27 -0500] skarufue: cheflevelramen: private chef. the working one is on the same network as workstation. the non working one is somwhere else but all opened ports are beeing forwarded.
[2013-11-26 18:11:11 -0500] skarufue: cheflevelramen: (opened ports are the ports the chef server openen determined by lsof -i)(i am pretty sure everything except 443 and 4000 is unecesarry)
[2013-11-26 18:11:42 -0500] cheflevelramen: @skarufue: What about outbound traffic? Is that being blocked? Can you try telneting to it?
[2013-11-26 18:12:08 -0500] cheflevelramen: @skarufue: SELinux could also be running on the remote chef server
[2013-11-26 18:13:24 -0500] skarufue: cheflevelramen: outbound unlikely but ill telnet to all the ports real quick. SE linux does run but i would see it in the logs if that where the problem
[2013-11-26 18:18:12 -0500] germs1: hey all, if anyone has a moment i have a weird newbie chef problem
[2013-11-26 18:18:23 -0500] germs1: ive created the users data bag using the opscode users cookbook
[2013-11-26 18:18:35 -0500] germs1: users databag has my id, pw, keys, etc syntax checks out
[2013-11-26 18:18:44 -0500] germs1: added users and users::sysadmin to role
[2013-11-26 18:18:53 -0500] germs1: it goes through the users::sysadmins book.. remove and creates
[2013-11-26 18:19:00 -0500] germs1: but never touches the databag
[2013-11-26 18:19:08 -0500] germs1: so the user and the corresponding data never populates
[2013-11-26 18:19:28 -0500] germs1: corresponding data being the additional user parameters (comments, ssh keys, id, etc)
[2013-11-26 18:19:37 -0500] skarufue: cheflevelramen: ok i can telnet to all ports.
[2013-11-26 18:19:41 -0500] germs1: building to a centos6.4 image
[2013-11-26 18:20:43 -0500] CPS: germs1: are you explicitly accessing the data bag anywhere?
[2013-11-26 18:20:56 -0500] germs1: not specifically no
[2013-11-26 18:21:00 -0500] cheflevelramen: skarufue: Not sure then. It's certainly a network issue. You might try disabling SELinux temporarily and see if that fixes the issue?
[2013-11-26 18:21:05 -0500] germs1: using default users cookbook that i thought
[2013-11-26 18:21:08 -0500] germs1: would include it
[2013-11-26 18:21:36 -0500] germs1: so
[2013-11-26 18:21:46 -0500] CPS: i'm new to chef too but as i understand it data bags are just for holding data
[2013-11-26 18:21:48 -0500] skarufue: cheflevelramen: but i just realized that all the cookbooks are already on the local chef server. so no need to upload them. how can i verify if all needet gems are installed. i am on ubuntu and i installed through omnibus
[2013-11-26 18:21:56 -0500] CPS: you need to access them and operate on their contents
[2013-11-26 18:22:06 -0500] skarufue: cheflevelramen: h i am on archlinux sorry
[2013-11-26 18:22:15 -0500] germs1: ok
[2013-11-26 18:22:18 -0500] germs1: sorry, misunderstood
[2013-11-26 18:22:19 -0500] CPS: i haven't done anything with users though and don't know what's in the user cookbook
[2013-11-26 18:22:29 -0500] germs1: in that case, the dfefault users cookbook is designed to do so
[2013-11-26 18:22:33 -0500] cheflevelramen: skarufue: Well, if you are able to interact with the internal chef development server, then you have all the necessary gems
[2013-11-26 18:22:34 -0500] germs1: ill cut and paste
[2013-11-26 18:22:53 -0500] germs1: ack nm, a little long
[2013-11-26 18:22:54 -0500] skarufue: cheflevelramen: ok thx. il dig more into networking then
[2013-11-26 18:23:01 -0500] CPS: germs1: use gist
[2013-11-26 18:23:03 -0500] germs1: the recipe uses a resource that searches that databag
[2013-11-26 18:23:05 -0500] cheflevelramen: skarufue: np, hope you get it figured out
[2013-11-26 18:23:18 -0500] skarufue: cheflevelramen: yup ty for your help
[2013-11-26 18:23:38 -0500] gswallow: @CPS I may give that a shot.
[2013-11-26 18:24:14 -0500] CPS: gist is a copy/paste thing by github
[2013-11-26 18:24:43 -0500] germs1: gotcha cps, 'sorry for the delay
[2013-11-26 18:24:53 -0500] germs1: my colleague is taking a quick stab at it
[2013-11-26 18:24:55 -0500] germs1: brb
[2013-11-26 18:34:51 -0500] CPS: germs1: http://docs.opscode.com/essentials_data_bags.html at the bottom of the page may help
[2013-11-26 18:38:30 -0500] miketheman: I can't seem to find the method for excluding a foodcritic tag on a specific line - am I missing something?
[2013-11-26 18:38:58 -0500] miketheman: nm, found it in the tests.
[2013-11-26 18:38:59 -0500] miketheman: https://github.com/acrmp/foodcritic/blob/master/features/ignore_via_line_comments.feature
[2013-11-26 18:52:27 -0500] maplebed: Hi Folks, I'm having an issue using the runit cookbook. On the first chef run after adding a service that's managed via runit, the chef run fails. runit tries to issue a restart to the service, which fails because the service isn't running yet. On subsequent runs, the restart works. Any suggestions on how to write my runit stuff so that this doesn't happen?
[2013-11-26 18:57:18 -0500] cheflevelramen: Having an issue. Does anyone know when an 'include_recipe' line gets run? I have this: http://pastebin.com/JtbQpQb5 in my recipe. But in order to install the 'pg' gem, postgres must be installed. However, pg is trying to be installed first. Not sure why
[2013-11-26 18:59:39 -0500] maplebed: cheflevelramen: you sure there isn't something earlier triggering the gem install? You might try moving the include_recipe to the very beginning of the recipe you're working with and see if that makes a difference.
[2013-11-26 19:00:09 -0500] maplebed: I would expect those two lines to behave as you are expecting them to.
[2013-11-26 19:00:58 -0500] cheflevelramen: maplebed: okay trying that now.
[2013-11-26 19:04:21 -0500] cheflevelramen: maplebed: same deal. It's almost as if chef_gem and gem_package get executed at compile_time. Do you happen to know if that's standard for those resources?
[2013-11-26 19:04:49 -0500] maplebed: I don't, sorry.
[2013-11-26 19:07:22 -0500] AskSteve: Is it possible to host multiple chef repos on a single chef server?  say test and prod repos?
[2013-11-26 19:07:47 -0500] cheflevelramen: maplebed: Ahh, looks like chef_gem (which was the next line that wasn't pasted), does get executed before convergence
[2013-11-26 19:08:04 -0500] maplebed: chef_gem is definitely a different beast.
[2013-11-26 19:08:20 -0500] cheflevelramen: maplebed: cool, thanks for your help/being a sounding board
[2013-11-26 19:08:24 -0500] maplebed: :D
[2013-11-26 19:08:38 -0500] maplebed: I'm good at that.
[2013-11-26 19:08:41 -0500] chip-: AskSteve: The paid versions of Chef allow for multiple organizations, completely sandboxed from one another.
[2013-11-26 19:08:59 -0500] chip-: AskSteve: The OSS versions of Chef Server are single-tenant, and are locked to only one organization.
[2013-11-26 19:09:05 -0500] AskSteve: Chip: thanks!
[2013-11-26 19:19:38 -0500] daw13: I have question about knife node edit.  Every time I try it, I get Node not updated, skipping node save and the vim windows opens.  Anyone had this happen?  The node is a windows machine
[2013-11-26 19:26:11 -0500] CPS: daw13: i'm on windows but i usually use the web interface
[2013-11-26 19:26:29 -0500] CPS: i have found that knife commands that open a file in the editor don't work super great though
[2013-11-26 19:27:01 -0500] jperry: ohai!
[2013-11-26 19:27:26 -0500] jperry: Does anyone know if there is a bug where the expanded run_list of a node is not showing a recipe that should be executed?
[2013-11-26 19:27:31 -0500] daw13: CPS: Ok, thank you
[2013-11-26 19:27:40 -0500] jperry: I have another node that has the same run_list and it is showing the recipe
[2013-11-26 19:27:55 -0500] juliancdunn: also, it's generally a bad idea to do "knife node edit"
[2013-11-26 19:28:32 -0500] daw13: juliancdunn: What is the correct way to add a node to environment
[2013-11-26 19:29:00 -0500] juliancdunn: you can use knife exec for that, one moment
[2013-11-26 19:29:29 -0500] c_t: juliancdunn: is it?
[2013-11-26 19:29:38 -0500] c_t: crud, I've been doing it that way for a long time
[2013-11-26 19:29:46 -0500] azretd: http://motherfuckingwebsite.com/
[2013-11-26 19:30:52 -0500] juliancdunn: knife exec -E 'nodes.transform("some-solr-query") {|n| n.chef_environment("your-target-env")}'
[2013-11-26 19:31:21 -0500] juliancdunn: c_t: knife node edit does work, but there are other, safer ways to do the things you need
[2013-11-26 19:31:39 -0500] juliancdunn: e.g. modifying run_list -- there is a whole series of "knife node run_list ..." commands
[2013-11-26 19:31:51 -0500] c_t: good to know
[2013-11-26 19:33:14 -0500] daw13: Thanks Julian
[2013-11-26 19:40:41 -0500] juliancdunn: np
[2013-11-26 21:03:38 -0500] supercom32: I know '#{ENV['SYSTEMDRIVE']}" can get the drive letter, but is there a list of other ENV variables I can use?
[2013-11-26 21:06:55 -0500] douglaswth: supercom32: if you run set in the windows command prompt you can get a list of all the env variables that are set
[2013-11-26 21:07:34 -0500] supercom32: Ahhh. It's just the Windows ENV's, and not built into Chef like ohai stuff.
[2013-11-26 21:11:29 -0500] juliancdunn: or in Powershell, do "dir env:\"
[2013-11-26 21:14:31 -0500] fveillette: Why :change action on windows_task provider don't manage start_time start_day frequency update?
[2013-11-26 21:15:54 -0500] Toger: If I have a cookbook that, depending on if it is used in AWS vs a custom datacenter, needs to have different 'depends' clauses, is there any good way to deal with that? Other than forking the cookbook or having location-specific branches (AWS on 1.x.x, custom DC on 2.x.x) ?
[2013-11-26 21:20:26 -0500] supercom32: When I install an msi package (in my case 7-zip), it makes an uninstall entry called "{Some big hash}" in the registry. So when I use Chef to uninstall, I need to pass the package name. Is there a reason a hash is being used instead of the proper name?
[2013-11-26 21:21:08 -0500] fveillette: i think you have to refer to displayname value inside that key
[2013-11-26 21:21:21 -0500] supercom32: How do I tell chef to do that?
[2013-11-26 21:22:01 -0500] fveillette: i think you have to put in your provider name declaration wilie windows_package "the displayname value" do
[2013-11-26 21:22:04 -0500] supercom32: windows_package "<SomePackageName>" do  is what I am doing.
[2013-11-26 21:22:15 -0500] supercom32: So somehow I need to be more specific in my package name.
[2013-11-26 21:22:19 -0500] fveillette: yup
[2013-11-26 21:22:32 -0500] supercom32: But my package name already matches what shows in displayname
[2013-11-26 21:22:37 -0500] fveillette: someone can correcte me if i'm wring :d
[2013-11-26 21:22:52 -0500] fveillette: does your application in 32 bit or 64 bit?
[2013-11-26 21:23:10 -0500] supercom32: 64
[2013-11-26 21:23:13 -0500] fveillette: ok
[2013-11-26 21:23:23 -0500] fveillette: should work fine than normally...
[2013-11-26 21:23:39 -0500] Toger: Is there a way to do conditional 'depends' in metadata.rb ?
[2013-11-26 21:23:41 -0500] fveillette: but waht is your issue exactly?
[2013-11-26 21:23:45 -0500] supercom32: The displayName for the package is "7-Zip 9.20 (x64 edition)" so that's what I put in my chef script.
[2013-11-26 21:23:48 -0500] fveillette: no toger
[2013-11-26 21:23:56 -0500] Toger: fveillette: thx
[2013-11-26 21:24:17 -0500] supercom32: fveillette: When I run the uninstall recipe i wrote, it seems to work ok, but actually no uninstall took place.
[2013-11-26 21:24:59 -0500] fveillette: is really the value you get for displayname for your 7 zip registry key under uninstall "7-Zip 9.20 (x64 edition)"
[2013-11-26 21:25:06 -0500] supercom32: Yep
[2013-11-26 21:25:09 -0500] fveillette: hum...
[2013-11-26 21:25:12 -0500] supercom32: Using regedit that's what it says
[2013-11-26 21:26:41 -0500] fveillette: should work normally than...
[2013-11-26 21:27:02 -0500] supercom32: Well it runs without errors really fast and just goes "Chef client finished, 1 resources updated".
[2013-11-26 21:27:16 -0500] fveillette: and the soft is nost uninstall right
[2013-11-26 21:27:58 -0500] fveillette: Why :change action on windows_task provider don't manage start_time start_day frequency update?
[2013-11-26 21:28:11 -0500] supercom32: the software should uninstall. And it works manually via add/remove programs
[2013-11-26 21:28:40 -0500] fveillette: is is a question of right on the server?
[2013-11-26 21:59:13 -0500] jleveque: Hello, I can see on rabbitMQ that I have some warnings "Mnesia is overloaded". I would like to to somehting very simple which is to run rabbitmqctl report, but I can't get it to work
[2013-11-26 22:00:07 -0500] jleveque: can you tell me what would be the command to run ?
[2013-11-26 22:00:43 -0500] jleveque: chef server is 11.0.2
[2013-11-26 22:01:19 -0500] jleveque: if there is a palce to be, a user account to user, or some erlang cookie stuff to do
[2013-11-26 22:03:48 -0500] jleveque: I always have the message Error: unable to connect to node 'rabbit@chef-server': nodedown
[2013-11-26 22:10:06 -0500] iverson0881: looks like hosted chef is down?
[2013-11-26 22:13:46 -0500] sb: hey guys, is it possinle to do override_Attributes at the node level?
[2013-11-26 22:14:30 -0500] sb: whenever i add them in it gets deleted
[2013-11-26 22:14:34 -0500] sb: and says " Node not updated, skipping node save"
[2013-11-26 22:15:08 -0500] iverson0881: and we're back up
[2013-11-26 22:18:38 -0500] juliancdunn: fveillette: probably whoever wrote the code didn't fix load_current_resource to check that stuff
[2013-11-26 22:50:48 -0500] mattray: anyone have any ideas why this started failing with ChefSpec recently? https://gist.github.com/mattray/7667744
[2013-11-26 22:51:11 -0500] mattray: Chef::Application.fatal! has been around for a long time
[2013-11-26 22:52:39 -0500] fveillette: Why :change action on windows_task provider don't manage start_time start_day frequency update?
[2013-11-26 23:56:56 -0500] supercom32: Does anyone know how to use Chef to install/copy a file or package from a UNC password protected share?

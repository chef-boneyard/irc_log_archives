[2013-11-21 00:01:09 -0500] jameson__: :3
[2013-11-21 00:03:36 -0500] mischief: it looks like this vagrant file was written for ruby 1.9 whereas ubuntu 12.04 lts vagrant package depends on ruby 1.8
[2013-11-21 00:05:22 -0500] gregkare: mischief: You should probably switch to an official package from vagrantup.com
[2013-11-21 00:12:18 -0500] par: Is there a chef-client option for ONLY registering the client with the server (using validator)
[2013-11-21 00:12:24 -0500] par: I dont want it to actually converge
[2013-11-21 00:12:39 -0500] coderanger: par: You could use -o to force the runlist to []
[2013-11-21 00:14:01 -0500] par: I'm trying chef-client -o ""
[2013-11-21 00:14:03 -0500] par: is that wrong?
[2013-11-21 00:14:36 -0500] par: chef-client -o [] results in a syntax error, and chef-client -o "" is running recipes
[2013-11-21 00:15:25 -0500] coderanger: Hmm, I guess I've never tried it, it might not detect that any option was given
[2013-11-21 00:15:38 -0500] coderanger: You could make a noop recipe and use that
[2013-11-21 00:38:31 -0500] mischief: gregkare: thanks. now vagrant times out when waiting for the vm, but i guess thats not a chef problem
[2013-11-21 01:18:38 -0500] skath: Hi all, first time installing chef with client/server here
[2013-11-21 01:19:24 -0500] skath: Question the first, am I really supposed to clone chef-repo into my home directory as outlined at the install_workstation docs page?
[2013-11-21 01:19:56 -0500] skath: Seems odd, how are other admins supposed to administer this thing, or what happens when I leave and my account gets wiped out
[2013-11-21 01:24:44 -0500] doomviking: its a repo...
[2013-11-21 01:26:56 -0500] skath: right, but it has me adding keys into chef-repo/.chef and then adding .chef to .gitignore
[2013-11-21 01:28:19 -0500] skath: seems like there's a lot of stuff localized to my own home directory, I hope none of this is needed for the client to continue communicating with the server?
[2013-11-21 01:29:38 -0500] skath: btw, i'm pretty sure the step to add .chef to the .gitignore file on this document won't actually work
[2013-11-21 01:30:01 -0500] skath: "Add .chef to the .gitignore file to prevent uploading the contents of the .chef folder to github. For example, in a CentOS environment, enter the following: $ cat .gitignore .chef"
[2013-11-21 01:30:06 -0500] skath: I don't think cat works that way
[2013-11-21 01:31:00 -0500] doomviking: it doesnt, yeah. seems to be a typo in whatever you're looking at. none of that stuff is needed for chef client / server coms
[2013-11-21 01:31:16 -0500] doomviking: just you and your chef repo and the chef server
[2013-11-21 01:31:19 -0500] skath: okay, looking at http://docs.opscode.com/chef/install_workstation.html FWIW
[2013-11-21 01:32:38 -0500] skath: I'll just plug along at the walkthrough and stop trying to second-guess it, I suppose it will make more sense to me later
[2013-11-21 01:36:04 -0500] skath: Serves me right for jumping ahead to the "Try it out" sections before reading the "Key concepts" sections
[2013-11-21 02:22:53 -0500] moted: I
[2013-11-21 02:23:03 -0500] moted: was curious if there's a way to patch a built in resource within a recipe
[2013-11-21 02:23:14 -0500] moted: well, a built in provider
[2013-11-21 02:24:18 -0500] coderanger: moted: What are you trying to do
[2013-11-21 02:24:36 -0500] moted: I have to use an older chef version that has a broken mdadm provider
[2013-11-21 02:24:50 -0500] moted: and I want to fix it
[2013-11-21 02:25:04 -0500] moted: but the problem is that I imagine it's already compiled during the converge
[2013-11-21 02:25:13 -0500] moted: so I'd need to somehow monkey patch it
[2013-11-21 02:25:31 -0500] coderanger: moted: Use a library file
[2013-11-21 02:26:22 -0500] moted: coderanger: to completely rewrite the provider or to copy it over?
[2013-11-21 02:26:41 -0500] coderanger: Monkey patch or better yet just subclass it
[2013-11-21 02:32:59 -0500] chef662: Hi, I am new with chef.  I want my chef clients to upgrade latest release everynight @1am. how do i do that with chef?
[2013-11-21 02:37:30 -0500] coderanger: chef662: Grab the omnibus_updater cookbook
[2013-11-21 02:39:01 -0500] chef662: thanks let me try that
[2013-11-21 02:43:47 -0500] moted: coderanger: thanks, that seems to work
[2013-11-21 02:50:34 -0500] bobbyz: Hi all.  I'm running chef-client on a node and it's stuck at 'resolving cookbooks for run list'.  The erchef process on the chef server is pegged at 100% cpu.  I've never seen this before.  Anyone else seen that?
[2013-11-21 02:52:09 -0500] coderanger: bobbyz: Do you have complex cookbook version deps?
[2013-11-21 02:52:24 -0500] coderanger: You are almost certainly stuck in a depsolver loop
[2013-11-21 02:53:14 -0500] bobbyz: I don't within my own cookbooks, but it's entirely possible some of the cookbooks I'm dependent on have complex deps.
[2013-11-21 02:53:30 -0500] bobbyz: So it is possible for the depsolver to get stuck though...that's at least part of what I was curious about
[2013-11-21 02:53:51 -0500] coderanger: Technically it will find a solution eventually, it just might take a very very long time :)
[2013-11-21 02:54:06 -0500] coderanger: The type of constraint solving that chef (and most systems) use is an NP complete problem
[2013-11-21 02:55:56 -0500] bobbyz: yuck...I've never delved into dependency algorithms, so I wouldn't know what solutions are out there.  That stinks though  :)
[2013-11-21 02:56:53 -0500] bobbyz: Any simple flag to indicate 'Force latest available version', or am I stuck forking and editing depends lines from dependent cookbooks?
[2013-11-21 02:57:31 -0500] coderanger: bobbyz: If you are using == for constraints everywhere it shouldn't be a problem
[2013-11-21 02:57:51 -0500] coderanger: the load issues are generally just when you get edge cases and it has to backtrack looking for a solution
[2013-11-21 02:59:22 -0500] bobbyz: ok, so potentially pinning these cookbooks in my environment config might help the depsolver
[2013-11-21 03:10:57 -0500] coderanger: Yeah, == constraints are greedy so it helps reduce the search space
[2013-11-21 03:29:04 -0500] bobbyz: coderanger: Does erchef / chef-server try to cache the depsolver info anywhere?  I'm wondering if I have to kill some sort of cache after having set a bunch of = constraints and still hanging
[2013-11-21 03:29:12 -0500] coderanger: No idea
[2013-11-21 03:29:21 -0500] bobbyz: ok, I'll dig at it then
[2013-11-21 06:27:39 -0500] m4rcu5: g'meurning
[2013-11-21 09:57:12 -0500] Philipp_: is there a way to store a global variable in chef which can be used from multiple cookbooks and dies after the chef run? I do not want to store some tmp stuff in the node itself...
[2013-11-21 10:00:48 -0500] divad: Philipp_: a node attribute is accessible from any cookbook, I guess you could set it and delete it every time
[2013-11-21 10:00:56 -0500] divad: what are you trying to accomplish?
[2013-11-21 10:01:18 -0500] divad: brb
[2013-11-21 10:03:12 -0500] henk_: i keep getting the error: ERROR: Fog::Compute::AWS::Error: RequestLimitExceeded => Request limit exceeded during a knife ec2 server create for a windows client. Is there a way to slow down the process of the password retrieval?
[2013-11-21 10:03:32 -0500] Philipp_: divad I have a cookbook which can configure mutiple nginx servers on the box...
[2013-11-21 10:03:45 -0500] Philipp_: so I have a component and a vhost ressource
[2013-11-21 10:04:20 -0500] Philipp_: first I configure all components... (store nginx.conf, configure init.d, ...)
[2013-11-21 10:04:40 -0500] Philipp_: but my vhost provider needs data of the component, for example where is the base dir
[2013-11-21 10:04:59 -0500] Philipp_: so for each vhost I have to rebuild the whole component config again
[2013-11-21 10:05:11 -0500] Philipp_: divad do you understand?
[2013-11-21 10:12:18 -0500] henk_: if i use the same command on a linux bootstrap, it works fine
[2013-11-21 10:16:22 -0500] omri: Hey. How can I get the mysql cookbook install mysql 5.6?
[2013-11-21 10:30:22 -0500] zeroXten: anyone here doing things the berkshelf way? If so, how are you going about writing tests for other peoples cookbooks? Do create a "test" wrapper cookbook?
[2013-11-21 10:31:27 -0500] zaargy: yep
[2013-11-21 10:31:48 -0500] zaargy: although we put our tests in app cookbook for a role
[2013-11-21 10:32:02 -0500] zaargy: and sometimes that is testing the cookbooks included within if that makes sense...
[2013-11-21 10:34:06 -0500] zeroXten: yeah i think so. If writing tests for the java cookbook, it would make sense to put it in a java-test cookbook so it can be used by other application cookbooks I guess
[2013-11-21 10:35:01 -0500] zeroXten: now i just need to find a nice way of doing lint/static analysis on their cookbooks
[2013-11-21 10:36:21 -0500] zaargy: do you mean foodcritic them?
[2013-11-21 10:37:09 -0500] henk_: does anyone know something about the request limit exceeded ? see my previous question
[2013-11-21 10:40:28 -0500] zeroXten: zaargy: foodcritic and rubocop atm
[2013-11-21 10:43:11 -0500] alclonky: is there a way to reparse the rubycode outside resources after another cookbook is finished?
[2013-11-21 10:43:11 -0500] alclonky: my problem is i have Cookbook A which installs a jre Version and a cookbook B which uses a rpm -qa in a variable which is used in some resources in that cookbook
[2013-11-21 10:43:12 -0500] alclonky: but the variable is set before cookbook A runs
[2013-11-21 10:44:51 -0500] holms: is it possible to update the state of the node from json file
[2013-11-21 10:44:51 -0500] zeroXten: alclonky: i'm lost
[2013-11-21 10:45:01 -0500] holms: instead of just reseting it?
[2013-11-21 10:45:35 -0500] alclonky: the non resourcse ruby code runs at the beginning of the chef run
[2013-11-21 10:46:07 -0500] alclonky: so the rpm -qa runs before the rpm is installed
[2013-11-21 10:46:48 -0500] lewiz: can I change chef config file_cache_path in a cookbook or environment?
[2013-11-21 10:53:56 -0500] holms: so is there's a way to *UPDATE* node state, instead of overwriting?
[2013-11-21 11:17:05 -0500] holms: coderanger: maybe you're around :)? fun stuff in here http://stackoverflow.com/questions/20119427/how-can-i-update-state-of-node-when-using-knife-upload-nodes-instead-of-ove
[2013-11-21 11:51:28 -0500] zaargy: having trouble setting an environment variable in a wrapper cookbook so that teh wrapped cookbook runs with the modified environment. any cookbook that does this i could use as an example?
[2013-11-21 11:51:40 -0500] zaargy: tried sourcing the environment settings in teh wrapper cookbook etc
[2013-11-21 11:52:39 -0500] zaargy: and would rather not modify wrapped cookbook/use rewind
[2013-11-21 11:55:39 -0500] zaargy: nm. got it.
[2013-11-21 12:30:54 -0500] holms: omfg
[2013-11-21 12:30:56 -0500] holms: http://stackoverflow.com/questions/20119427/how-can-i-update-state-of-node-instead-of-overwriting-it
[2013-11-21 12:31:02 -0500] holms: that guy just saved my soul
[2013-11-21 12:31:12 -0500] holms: first world problem in chef
[2013-11-21 12:31:32 -0500] lewiz: holms: that is pretty handy
[2013-11-21 12:31:51 -0500] holms: it's insanely handy for my chef-starter lol
[2013-11-21 12:33:26 -0500] holms: https://github.com/holms/chef-starter/ :P
[2013-11-21 12:36:58 -0500] ocholetras: holms: really nice!
[2013-11-21 12:39:11 -0500] holms: ocholetras: just an attempt to automize stuff, because i'm completely pissed off to enter bunch of commands
[2013-11-21 12:39:19 -0500] holms: every time, to basic reprovisioning
[2013-11-21 12:39:29 -0500] holms: for*
[2013-11-21 13:05:34 -0500] dagan: Can someone help me understand how to assign the contents of a template to a resource attribute?
[2013-11-21 13:07:05 -0500] ocholetras: dagan: what do you exact want to do?
[2013-11-21 13:07:26 -0500] ocholetras: Access attributes inside templates?
[2013-11-21 13:07:41 -0500] dagan: ocholetras: I'd like to use a rendered template to execute SQL on a mysql_database resource.
[2013-11-21 13:08:04 -0500] dagan: So, instead of rendering the template ot a file, I'd like to return the result to the sql attribute of the mysql_database
[2013-11-21 13:08:15 -0500] ocholetras: jumm
[2013-11-21 13:08:16 -0500] dagan: Or, if there's a better way to accomplish the same thing, do that. :-)
[2013-11-21 13:08:53 -0500] ocholetras: i dont know so much mysql_database resource
[2013-11-21 13:09:15 -0500] ocholetras: what query are you executing?
[2013-11-21 13:09:21 -0500] ocholetras: provisioning database one
[2013-11-21 13:09:32 -0500] ocholetras: or a SELECT..
[2013-11-21 13:09:33 -0500] ocholetras: ?
[2013-11-21 13:10:22 -0500] dagan: Creating some tables and doing some INSERTs
[2013-11-21 13:10:53 -0500] dagan: CREATE TABLE `table1` ....; INSERT INTO `table` ...;
[2013-11-21 13:11:13 -0500] dagan: The mysql_database resource is pretty straight forward.
[2013-11-21 13:11:32 -0500] ocholetras: Sure you can do that by and .sql file or whatever..
[2013-11-21 13:11:40 -0500] ocholetras: or by defining a LWRP
[2013-11-21 13:11:56 -0500] dagan: You just need four attributes: database_name, connection (a hash), action (:query), and the sql
[2013-11-21 13:12:03 -0500] ocholetras: umm
[2013-11-21 13:12:06 -0500] dagan: The sql attribute expects a string
[2013-11-21 13:12:12 -0500] ocholetras: umm
[2013-11-21 13:12:22 -0500] ocholetras: that resource is the one on the opscode/mysql cookbook?
[2013-11-21 13:12:33 -0500] dagan: opscode/database
[2013-11-21 13:12:41 -0500] dagan: https://github.com/opscode-cookbooks/database
[2013-11-21 13:13:37 -0500] ocholetras: sounds a little bit tricky to render template inside recipes
[2013-11-21 13:13:41 -0500] ocholetras: but could be possible
[2013-11-21 13:13:46 -0500] ocholetras: anyway
[2013-11-21 13:13:50 -0500] ocholetras: j have never used
[2013-11-21 13:14:13 -0500] dagan: I wonder if I shouldn't just use the ERB class in a ruby block
[2013-11-21 13:14:55 -0500] joshmyers: hey guys, can you put node data in a data bag???
[2013-11-21 13:18:49 -0500] _dumfrie-: joshmyers: You can, although I have to ask why would you want to?
[2013-11-21 13:19:46 -0500] ptrf: adnichols: about our conversation yesterday
[2013-11-21 13:21:05 -0500] ptrf: adnichols: I found out that I had node.blabla.users.blabla in my attributes/default.rb rather than node.blabla.blabla
[2013-11-21 13:21:33 -0500] ptrf: adnichols: would you still recommend only reading using node[:blabla] rather than node.blabla
[2013-11-21 13:21:36 -0500] ptrf: ?
[2013-11-21 13:43:58 -0500] ptrf: berksfile.lock in your chef-repo
[2013-11-21 13:44:27 -0500] ptrf: would you check it in with git (or your DVCS of choice)?
[2013-11-21 13:46:31 -0500] zeroXten: would a chef "harden" cookbook be useful to people? e.g. package blacklisting using attributes, checking common file permissions etc
[2013-11-21 13:46:45 -0500] zeroXten: does one exist already?
[2013-11-21 14:19:21 -0500] glen: why is it so, that i do "node.default['foo']; include_recipe xxx" then xxx recipe does not see the attribute? but when i look from chef-webui the attribute is there
[2013-11-21 14:21:05 -0500] glen: nvm. missed one level in the attribute name
[2013-11-21 14:25:17 -0500] juliancdunn: ptrf: these days I think people have mostly settled on node['foo']['bar'] rather than node.foo.bar
[2013-11-21 14:26:43 -0500] glen: juliancdunn: and why is that? faster code?
[2013-11-21 14:34:23 -0500] ptrf: juliancdunn: if anything, it should be with symbols rather than strings for lookup
[2013-11-21 14:35:09 -0500] ptrf: especially for immutable constants
[2013-11-21 14:36:33 -0500] teukka: chef converts everything to strings internally
[2013-11-21 14:37:29 -0500] Zauberfisch23: teukka: I am not a ruby expert, but I think thats not up to chef
[2013-11-21 14:37:35 -0500] teukka: I think the important thing is to be consistent with style, at least within a cookbook
[2013-11-21 14:38:08 -0500] teukka: and I recall reading that the dotted form might be deprecated in the future. but not sure of that
[2013-11-21 14:38:42 -0500] Zauberfisch23: so node.foo and node['foo'] is part of the ruby language, so chef has no infuence over it
[2013-11-21 14:38:49 -0500] teukka: Zauberfisch23: no, ruby Hashes take whatever objects as keys. be that symbols, string, or your own classes. but chef uses it's own Mash class
[2013-11-21 14:40:01 -0500] juliancdunn: ptrf: it's easier for non-Rubyists to read
[2013-11-21 14:40:20 -0500] teukka: Zauberfisch23: https://github.com/opscode/chef/blob/master/lib/chef/mash.rb#L206
[2013-11-21 14:40:51 -0500] juliancdunn: same thing with symbols. non-Rubyists go "wtf is :xyz"
[2013-11-21 14:40:57 -0500] gyre007: oh gosh Chef...can someone explain to me why this happens on Chef 11.8 ? https://gist.github.com/milosgajdos83/7582649
[2013-11-21 14:41:21 -0500] gyre007: basically bootstrap doesn't seem to be working....because knife is totally ignoring SSH options passed to it ?
[2013-11-21 14:41:25 -0500] gyre007: w000t ?!
[2013-11-21 15:09:23 -0500] zaargy: anyone with chefspec xp around?
[2013-11-21 15:10:09 -0500] zaargy: i am trying to setup an expectation for the contents of a template
[2013-11-21 15:10:28 -0500] zaargy: trying to work out if i can output the contents of the template it is generating during chefspec so i can see what it is doing?
[2013-11-21 15:17:18 -0500] gyre007: ah...knife{:ssh_user} is not overridden by -x command line switch mm
[2013-11-21 15:19:22 -0500] mtm: hai
[2013-11-21 15:23:08 -0500] ptrf: gyre007: oh!
[2013-11-21 15:23:19 -0500] ptrf: gyre007: I was about to suggest you check your .chef/knife.rb
[2013-11-21 15:23:25 -0500] gyre007: yeah
[2013-11-21 15:23:36 -0500] gyre007: tricky :)
[2013-11-21 15:23:51 -0500] zaargy: nm i am an idiot. just need to do the expectation properly then of course it prints out what doesn't match.
[2013-11-21 15:27:04 -0500] mtm: Does anyone know a way to find the current running resource in the context of the whole Chef::ResourceCollection collection?
[2013-11-21 15:27:17 -0500] adnichols: ptrf: It's easier for me to look at an attribute and know that node[:blah] means I'm reading a value and node.(override|set|default) means I'm writing one
[2013-11-21 15:27:37 -0500] adnichols: ptrf: But that's my opinion, you can use whatever works
[2013-11-21 15:27:50 -0500] mtm: i.e I want to look at previous resources that have been run, and future resources that will be run, excluding the current resource.
[2013-11-21 15:28:27 -0500] mtm: in an lwrp
[2013-11-21 15:28:30 -0500] gyre007: I wonder if I can stick some random config into knife,rb and use it in bootstrap template like knife_config[:blah_blah]
[2013-11-21 15:37:10 -0500] teukka: gyre007: should be possible. knife[:foo] = 'bar' in knife.rb, and Chef::Config[:knife][:foo] in the template
[2013-11-21 15:44:58 -0500] gyre007: ah so it must be Chef::Config
[2013-11-21 15:46:38 -0500] gyre007: teukka: looks like @chef_config[:knife] could work too
[2013-11-21 15:48:05 -0500] polysics: hello! how do I specify to use a Github repo and branch in metadata.rb, please?
[2013-11-21 15:49:00 -0500] polysics: I am using Berkshelf but I refer to the metadata.rb file t ocentralize stuff
[2013-11-21 15:50:56 -0500] _dumfrie-: Is there a known issue where custom libraries are incorrect loaded, as a result an exception is raised explaining that a given resource method doesn't exist (clearly because in belongs in the other library)?
[2013-11-21 15:52:13 -0500] teukka: gyre007: ok. I don't remember all the variables in the template context. But Chef::Config is in global namespace so it works always. but not all cli options are necesarily mixed into it
[2013-11-21 15:52:47 -0500] gyre007: I'll give this a go at some point today and let you know
[2013-11-21 15:56:21 -0500] james_d_hen: Would an encrypted data bag be the right way to go if my goal was to have customized database.yml files for various servers and environment levels ?
[2013-11-21 15:58:26 -0500] polysics: does anyone please know how to specify a Gihub repo and branch in a depends clause in metadata.rb?
[2013-11-21 16:03:07 -0500] gyre007: can't believe I still have to delete NODE and CLIENT when I want to remove some server from Chef server..
[2013-11-21 16:03:18 -0500] gyre007: even in Chef 11 mmm
[2013-11-21 16:03:38 -0500] polysics: or should I put the Github data in Berksfile?
[2013-11-21 16:05:10 -0500] _dumfrie-: Resolved, I neglected to define the resource_name attribute within the resource class.
[2013-11-21 16:05:30 -0500] aenger: gyre007 just add a bash function to ease your pain
[2013-11-21 16:05:31 -0500] aenger: function knife_destroy(){
[2013-11-21 16:05:33 -0500] aenger:   echo "Destroying $1...";
[2013-11-21 16:05:34 -0500] aenger:   knife node delete $1 -y;
[2013-11-21 16:05:35 -0500] aenger:   knife client delete $1 -y;
[2013-11-21 16:05:36 -0500] aenger: }
[2013-11-21 16:05:46 -0500] gyre007: yeah im doing something similar
[2013-11-21 16:05:49 -0500] juliancdunn: polysics: metadata.rb doesn't take github versions, it just takes cookbook versions
[2013-11-21 16:05:53 -0500] gyre007: still annoying imho
[2013-11-21 16:06:10 -0500] aenger: anybody familiar with creating yaml configs from a YAML::dump
[2013-11-21 16:06:30 -0500] polysics: juliancdunn: so I should stick that in Berksfile?
[2013-11-21 16:06:32 -0500] chris613: If I'm using a package resource with the :install action and there is an older version already installed, witll it a) behave like an :upgrade action   or  b) Do nothing ?
[2013-11-21 16:06:33 -0500] aenger: my only problem is that it's serialized yaml, containing references to the classes
[2013-11-21 16:06:44 -0500] polysics: before or after the metadata entry, if you know, please?
[2013-11-21 16:06:45 -0500] chris613: Sorry, I'm also specifying a specific version
[2013-11-21 16:10:05 -0500] jperry: anyone know if you can exclude file patterns in foodcritic?
[2013-11-21 16:10:33 -0500] jperry: I am using chef specs and I have a directory <cookbook>/spec/recipes/default_spec.rb and food critic fails because it doesn't have a metadata file
[2013-11-21 16:23:04 -0500] juliancdunn: polysics: after, I believe
[2013-11-21 16:23:38 -0500] polysics: thanks
[2013-11-21 16:25:12 -0500] juliancdunn: polysics: I believe the format is something like
[2013-11-21 16:25:15 -0500] juliancdunn: cookbook "mysql", git: "https://github.com/opscode-cookbooks/mysql.git", branch: "foodcritic"
[2013-11-21 16:25:42 -0500] juliancdunn: search for "Git Location" on www.berkshelf.com
[2013-11-21 16:26:14 -0500] polysics: yeah, I found it ,thanks
[2013-11-21 16:26:24 -0500] polysics: I was just thinking there was a way to put that inmetadata
[2013-11-21 16:27:01 -0500] juliancdunn: no, the Chef server only works off the artifacts it has.
[2013-11-21 16:29:51 -0500] phutchins: Any idea how to make the gruop resource not fail the entire chef run if it fails?
[2013-11-21 16:30:06 -0500] phutchins: i've tried wrapping it in begin, rescue, end but that doesn't seem to work...
[2013-11-21 16:31:16 -0500] juliancdunn: what's failing?
[2013-11-21 16:31:37 -0500] phutchins: groupadd -g is returning a 4
[2013-11-21 16:31:40 -0500] phutchins: expected 0
[2013-11-21 16:31:55 -0500] juliancdunn: what's that exit code mean
[2013-11-21 16:32:00 -0500] phutchins: it will work in production but not on vagrant... just trying to get vagrant to be quiet
[2013-11-21 16:32:07 -0500] phutchins: means the group id alrady exists
[2013-11-21 16:32:11 -0500] phutchins: its vagrant on the vagrant host
[2013-11-21 16:32:19 -0500] phutchins: and ubuntu in production for gid 1000
[2013-11-21 16:32:50 -0500] juliancdunn: it's best to write some idempotency guard for that instead
[2013-11-21 16:33:02 -0500] juliancdunn: not_if { some_test_for_whether_you_are_in_vagrant }
[2013-11-21 16:33:04 -0500] phutchins: thought abotu writing a check for some attr that vagrant sets
[2013-11-21 16:33:05 -0500] phutchins: right
[2013-11-21 16:33:10 -0500] phutchins: that was my next step
[2013-11-21 16:33:13 -0500] phutchins: but i hate writing vagrant into cookbooks
[2013-11-21 16:33:20 -0500] juliancdunn: resources have "ignore_failure", but that's the nuclear option
[2013-11-21 16:33:25 -0500] phutchins: right
[2013-11-21 16:33:33 -0500] mtm: not_if { some_test_for_if the group_exists } maybe
[2013-11-21 16:34:05 -0500] juliancdunn: ideally, the groups you are setting up should be the same across the board whether in Vagrant or in production
[2013-11-21 16:34:10 -0500] juliancdunn: don't know what you're doing exactly so I can't say
[2013-11-21 16:35:00 -0500] phutchins: im not setting them tho
[2013-11-21 16:35:11 -0500] phutchins: i only want to add a key to ubuntu user in prod
[2013-11-21 16:35:16 -0500] phutchins: which in vagrant thats not the same user
[2013-11-21 16:35:28 -0500] phutchins: i dont' create those, they're already created in the image
[2013-11-21 16:36:27 -0500] phutchins: and for the production side i need to add a ssh key for the ubuntu user
[2013-11-21 16:36:29 -0500] joel: https://github.com/opscode/chef/blob/master/lib/chef/provider/service/debian.rb - line 116, my @new_resource.priority hash is empty, thoughts on why? Or where this hash gets populated?
[2013-11-21 16:36:34 -0500] phutchins: which doesn't exist in vagrant
[2013-11-21 16:38:38 -0500] joel: or is there a better spot to ask?
[2013-11-21 16:41:51 -0500] phutchins: juliancdunn: i just add an unless and set node['vagrant'] to true in the Vagrant file... This should work.
[2013-11-21 16:42:56 -0500] joel: it looks like I would need to define all the priorities in my chef recipe?
[2013-11-21 16:48:43 -0500] mtm: <joel> what are you doing in your recipe?
[2013-11-21 16:50:45 -0500] joel: mtm: very basic, one second.
[2013-11-21 16:51:59 -0500] joel: mtm: http://pastebin.com/bwQJVmT9 - ubuntu 10.xish, on a cloud provider, it continually re-enables apache because the new_resource doesn't have priorities
[2013-11-21 16:54:37 -0500] joel: ubuntu 10.04.
[2013-11-21 16:54:45 -0500] joel: ubuntu 10.04.3
[2013-11-21 16:56:01 -0500] joel: mtm: I'm happy to dig any direction you can recommend.
[2013-11-21 16:57:57 -0500] mtm: joel: oic what you mean. it looks like you have to specify the hash.
[2013-11-21 16:58:39 -0500] joel: mtm Do you know of a doc that shows declaring that hash? My google fu isn't hitting
[2013-11-21 16:58:41 -0500] mtm: joel: current_resource builds the hash from "/usr/sbin/update-rc.d -n -f #{service_name} remove"
[2013-11-21 16:59:47 -0500] mtm: joel:  priority[$1] = [($2 == "S" ? :start : :stop), $3]
[2013-11-21 16:59:55 -0500] mtm: joel: UPDATE_RC_D_PRIORITIES = /\/rc([\dS]).d\/([SK])(\d\d)/i
[2013-11-21 17:00:05 -0500] joel: mtm: in the cookbook? I'm lost now :)
[2013-11-21 17:00:41 -0500] mtm: joel: yep.. the get_priority function: https://github.com/opscode/chef/blob/master/lib/chef/provider/service/debian.rb#L69
[2013-11-21 17:01:32 -0500] joel: mtm: seems like this is a bug, no?
[2013-11-21 17:02:15 -0500] joel: mtm priorities are set on current_resource just fine, NOT on new_resource
[2013-11-21 17:02:16 -0500] mtm: joel: a bit yeh.. there's an example of the hash in there too: https://github.com/opscode/chef/blob/master/lib/chef/provider/service/debian.rb#L57
[2013-11-21 17:02:49 -0500] joel: mtm so this code seems to be working fine, I'm having trouble finding the code path for new_resource, to see where priorities might get set
[2013-11-21 17:03:42 -0500] joel: derp, I think I see it now in https://github.com/opscode/chef/blob/master/lib/chef/provider/service/debian.rb#L128
[2013-11-21 17:04:34 -0500] mtm: joel yep, that's just what new_resource.priority gets compared against. the priority is nil unless you define it. https://github.com/opscode/chef/blob/master/lib/chef/resource/service.rb#L153
[2013-11-21 17:05:13 -0500] joel: mtm: huh, how the heck does anyone get idempotent on services on debian?
[2013-11-21 17:06:10 -0500] mtm: joel: don't enable them maybe?? =) or as you mentioned specify a full priority hash
[2013-11-21 17:07:36 -0500] joel: mtm looks like enable it, let the recipe get hit, and remove enable from the recipe, for a nasty workaround: https://github.com/opscode/chef/blob/master/lib/chef/provider/service.rb#L40
[2013-11-21 17:08:34 -0500] mtm: joel: you could make the enable a separate resource and have it notified by whatever installs the service.
[2013-11-21 17:09:02 -0500] joel: mtm: now that you mention that, I think that's how the community cookbook works
[2013-11-21 17:17:39 -0500] zeroXten: do people generally add their company name etc to their application cookbook names?
[2013-11-21 17:18:15 -0500] zeroXten: e.g. i'm going to play with chef-phabricator, so i'd like to 'wrap' it inside mycompany-phabricator
[2013-11-21 17:23:03 -0500] cwj: zeroXten: i think thats a generally accepted practice
[2013-11-21 17:24:56 -0500] zeroXten: cool
[2013-11-21 17:26:19 -0500] mtm: zeroXten:  I prefix with company_xyz.  hyphens ran me into trouble with chefspec and lwrps.
[2013-11-21 17:30:36 -0500] bender__: are there any known issues with the include_attribute method for chef 11.6.0?
[2013-11-21 17:31:00 -0500] joel: mtm: thanks for the second set of eyes, I'm going to test on a newer version of ubuntu, and another service or two, then log an issue.
[2013-11-21 17:32:05 -0500] zeroXten: mtm: good point
[2013-11-21 17:32:13 -0500] zeroXten: old habbits die hard
[2013-11-21 17:32:32 -0500] bender__: i've tried various ways of invoking it, include_attribute "cookbook_name", include_attribute: "cookbook_name:default.rb", etc.  the cookbook is also listed as a dependency in my metadata.rb.  but i get a NameError: Cannot find a resource for include_attribute on ubuntu version 12.04
[2013-11-21 17:32:52 -0500] bender__: "cookbook_name::
[2013-11-21 17:33:13 -0500] bender__: ugh, typing fail.  "cookbook_name::default" rather.  sorry for the spam
[2013-11-21 17:42:13 -0500] dan`: I get in a crazy story with chef. I defined an attribute 'size' with value 512. After that I spent 30min with tracing to get why a recipe gets 4. But this was just ruby Hash method!
[2013-11-21 17:43:19 -0500] bender__: i see, include_attribute only works from another attributes file not a recipe.  mystery solved..
[2013-11-21 17:50:48 -0500] gyre007: can I test for chef solo in attributes file ?
[2013-11-21 17:50:56 -0500] gyre007: or can I only do that in the recipe...
[2013-11-21 17:50:58 -0500] gyre007: Chef 11
[2013-11-21 18:12:37 -0500] dan`: gyre, I don't understand
[2013-11-21 18:14:06 -0500] dan`: If you want to test attributes use chef-shell
[2013-11-21 18:19:11 -0500] juliancdunn: Chef::Config[:solo] returns true if in Solo, false otherwise
[2013-11-21 18:19:16 -0500] holms: what a nice issue ive'just had now
[2013-11-21 18:19:22 -0500] holms: that's when you want to kill cookbook authors
[2013-11-21 18:19:39 -0500] holms: because of default attribute set to = '', i've got failing initctl config
[2013-11-21 18:19:46 -0500] holms: and i've spent 6 hours on debugging this crap
[2013-11-21 18:19:53 -0500] jchauncey: attributes files are ruby so you can do whatever you liek
[2013-11-21 18:20:03 -0500] BenT: Hi, question about versions and berkshelf.  I have a node running version 0.0.1 of a cookbook.  I uploaded version 0.0.2 using berks upload.  What triggers a node to use the new version?  My node is still using version 0.0.1.
[2013-11-21 18:20:31 -0500] jchauncey: metadata.rb
[2013-11-21 18:20:42 -0500] holms: jchauncey: that's not the case
[2013-11-21 18:20:46 -0500] juliancdunn: holms: just because it's on the Internet doesn't mean it's any good :)
[2013-11-21 18:20:51 -0500] dan`: holms, make a pull request.
[2013-11-21 18:20:58 -0500] holms: dan`: ofcourse i will
[2013-11-21 18:21:09 -0500] jbz: BenT:  If your node is in an environment, it will use whatever version the environment has told it to use.  If the node is in _default, it should use the newest version on the server.
[2013-11-21 18:21:10 -0500] holms: point is that this cookbook is official cookbok of that software
[2013-11-21 18:21:22 -0500] holms: and I don't even imagine how this issue could be skipped
[2013-11-21 18:21:26 -0500] holms: unless nobody using it
[2013-11-21 18:21:41 -0500] dgarstang3: Is knife part of the omnibus client?
[2013-11-21 18:21:44 -0500] BenT: jbz: I will have a look at that.  Thanks.
[2013-11-21 18:21:56 -0500] jbz: BenT: But if your node is in an environment other than _default, you'll need to update its environment to point to the new cookbook version.  yw!
[2013-11-21 18:22:24 -0500] juliancdunn: dgarstang3: yes
[2013-11-21 18:22:35 -0500] dgarstang3: juliancdunn: tanx
[2013-11-21 18:23:39 -0500] BenT: Hmm... my node is in _default, _default list no version contraints, and it is not pulling the most recent version 0.0.2, even after I delete /var/chef/cache/cookbooks  I must be missing something.
[2013-11-21 18:24:07 -0500] juliancdunn: BenT: you did upload it to the chef server?
[2013-11-21 18:25:17 -0500] BenT: juliancdunn: yes, and I can see the new version listed in my recipe list.
[2013-11-21 18:25:33 -0500] juliancdunn: wdym "listed in your recipe list"
[2013-11-21 18:25:55 -0500] juliancdunn: does "knife cookbook list -a" show it on the server?
[2013-11-21 18:26:01 -0500] BenT: juliancdunn: in the managmenet console, under recipes, I see the new version listed.
[2013-11-21 18:26:15 -0500] BenT: juliancdunn: let me check "knife cookbook ...."
[2013-11-21 18:26:48 -0500] Holos: When I have a recipie that requires a user be setup on the system before it runs is there a method to check that that recipe has already run? like "depends 'users::joeuser'" in the metadata.rb
[2013-11-21 18:27:33 -0500] BenT: juliancdunn: Output of "knife cookbook list -a": devops-demo        0.0.2  0.0.1
[2013-11-21 18:28:09 -0500] BenT: juliancdunn: both versions appear.  0.0.2 is the new version.  But the chef-client is downloading 0.0.1.
[2013-11-21 18:29:18 -0500] dan`: Holos, put include_recipe 'users::joeuser' on top of your base one.
[2013-11-21 18:29:49 -0500] juliancdunn: BenT: do "knife cookbook download devops-demo" and unpack the tarball that comes down to ensure it's got the right stuff
[2013-11-21 18:30:47 -0500] bmoritz: Is 'data driven application deployment' still best practice?
[2013-11-21 18:32:08 -0500] BenT: juliancdunn: ran the command.  it asked me to select a version.  I selected 0.0.2.  It downloaded the version.  And I validated both the metadata.rb and the recipes.  So download to my local workstation works.
[2013-11-21 18:33:24 -0500] Breaking_Pitt: hi guys, what does it mean..
[2013-11-21 18:33:27 -0500] Breaking_Pitt: [2013-11-21T19:32:39+01:00] FATAL: Errno::ENOENT: template[/etc/kurento/kurento.conf] (kurento::1.1.0_install line 128) had an error: Errno::ENOENT: No such file or directory - (/tmp/chef-rendered-template20131121-4206-okmd09, /etc/kurento/kurento.conf)
[2013-11-21 18:33:28 -0500] juliancdunn: that's strange - so you're saying when you run it on the node, it still downloads 0.0.1?
[2013-11-21 18:33:32 -0500] Breaking_Pitt: this worked til one minute ago
[2013-11-21 18:33:36 -0500] Breaking_Pitt: but nothing has changed
[2013-11-21 18:33:37 -0500] Breaking_Pitt: :/
[2013-11-21 18:33:44 -0500] bmoritz: juliancdunn: You setting people up for the Princeton meetup?
[2013-11-21 18:33:56 -0500] Breaking_Pitt: The template file exists...
[2013-11-21 18:34:15 -0500] juliancdunn: bmoritz: yeah, are you coming?
[2013-11-21 18:34:27 -0500] juliancdunn: Breaking_Pitt: you have an /etc/kurento directory?
[2013-11-21 18:34:54 -0500] Breaking_Pitt: juliancdunn the etc/kuernto needs to be created by chef
[2013-11-21 18:34:58 -0500] bmoritz: juliancdunn: I didn't make the RSVP so I posted a question on the event to see if its ok to show up..
[2013-11-21 18:35:06 -0500] juliancdunn: bmoritz: yeah, just show up
[2013-11-21 18:35:07 -0500] BenT: juliancdunn: yup, just tested it again.  Same behavior.  I can do some more digging.  Sounds like there isn't an obvious answer.
[2013-11-21 18:35:12 -0500] bmoritz: cool
[2013-11-21 18:35:47 -0500] juliancdunn: Breaking_Pitt: do you have a directory resource declared before the template resource?
[2013-11-21 18:35:53 -0500] juliancdunn: BenT: yeah, sorry I couldn't figure it out
[2013-11-21 18:36:28 -0500] BenT: juliancdunn: np, thanks for helping out!
[2013-11-21 18:36:36 -0500] juliancdunn: np
[2013-11-21 18:36:43 -0500] Breaking_Pitt: juliancdunn ii'll take a look
[2013-11-21 18:36:46 -0500] Breaking_Pitt: tahnks juliancdunn
[2013-11-21 18:39:48 -0500] BenT: looks like berkshelf uploaded both versions with frozen? set to true.  could that be affecting this?
[2013-11-21 18:44:53 -0500] juliancdunn: it shouldn't. that just prevents overwriting of the cookbook on upload
[2013-11-21 18:46:57 -0500] Breaking_Pitt: juliancdunn it supposed that this directory shoudl be created by the packaged... it has been worked before :(
[2013-11-21 18:47:16 -0500] BenT: juliancdunn: okay.  I deleted 0.0.1 from the server and now the 0.0.2 cookbook is being used by the node but failing to download and execute due to some dependency issues.  I will keep digging.
[2013-11-21 18:47:46 -0500] BenT: juliancdunn: perhaps that is related.
[2013-11-21 18:50:41 -0500] jmickle: how is everyone handling their multi region chef environments?
[2013-11-21 18:50:48 -0500] jmickle: i feel like how i do it currently sucks
[2013-11-21 18:59:41 -0500] pwelch_: Is it common for Open Source Chef server `chef-server-ctl test` to fail spec/api/environments/recipes_spec ?
[2013-11-21 19:00:07 -0500] pwelch_: it looks like it expects pendant returned values but is instead getting the recipes I loaded up on the chef server
[2013-11-21 19:28:07 -0500] kallistec: pwelch_: the test is designed to run on a fresh instance
[2013-11-21 19:28:59 -0500] pwelch_: kallistec: ok, that's what I wasnt sure about.
[2013-11-21 19:29:08 -0500] pwelch_: kallistec: do you happen to know what reindex is for?
[2013-11-21 19:29:12 -0500] pwelch_: or when I use it?
[2013-11-21 19:29:55 -0500] kallistec: pwelch_: canonical data store is postgres, but search index is in Solr's own data
[2013-11-21 19:30:22 -0500] kallistec: if they get out of sync, you run reindex to nuke the solr data and recreate it from the postgres data
[2013-11-21 19:30:35 -0500] pwelch_: ok
[2013-11-21 19:30:53 -0500] pwelch_: what type of errors might I see if that were the case?
[2013-11-21 19:32:08 -0500] Toger: Anyone have a canned function to fetch the current EC2 IAM access/secret key from ohai?
[2013-11-21 19:32:18 -0500] kallistec: pwelch_: from outside the system, you'd get results from search that are not consistent with the results returned from other APIs
[2013-11-21 19:32:41 -0500] Toger: which is to say, ohai has it, but how to reference it properly / reliably is where I'm having issues, as the role varies between hosts.
[2013-11-21 19:32:56 -0500] kallistec: pwelch_: e.g., `knife node show SOME_NODE` shows data that should (or should not) match a search query
[2013-11-21 19:33:17 -0500] kallistec: pwelch_: but `knife search node QUERY` gives you the incorrect result
[2013-11-21 19:34:37 -0500] pwelch_: kallistec: ok so knife search hits solr ?
[2013-11-21 19:34:59 -0500] pwelch_: Im currently getting a time from the chef-client when it hits: environments/staging/cookbook_versions
[2013-11-21 19:35:14 -0500] pwelch_: it eventually returns this after a few minutes: HTTP Request Returned 504 Gateway Time-out:
[2013-11-21 19:36:36 -0500] pwelch_: related to search index?
[2013-11-21 19:37:10 -0500] kallistec: pwelch_: no, you have dependency contstraints in your cookbooks+environments that cannot be solved
[2013-11-21 19:37:39 -0500] kallistec: pwelch_: there is a certain failure mode there that causes the dependency solver to spin forever
[2013-11-21 19:38:35 -0500] pwelch_: kallistec: ok. I wasnt sure if that was the issue. Thought I would have seen something in the chef-server logs about constraint failure. Might have missed it...
[2013-11-21 19:39:11 -0500] kallistec: pwelch_: no, it's a bug. I believe it's been fixed but not officially released
[2013-11-21 19:39:37 -0500] holms: just a basic question with a cave heat
[2013-11-21 19:39:41 -0500] pwelch_: kallistec: this helps a lot actually. Thanks for your time
[2013-11-21 19:39:44 -0500] holms: how to check if var is empty/
[2013-11-21 19:39:49 -0500] holms: in template*
[2013-11-21 19:40:01 -0500] holms: because if somevar
[2013-11-21 19:40:04 -0500] holms: won't work :)
[2013-11-21 19:40:08 -0500] holms: if somevar=''
[2013-11-21 19:40:39 -0500] kallistec: pwelch_: if you're interested, you can get a nightly build via this: http://docs.opscode.com/api_omnitruck.html
[2013-11-21 19:41:09 -0500] holms: http://stackoverflow.com/questions/252203/checking-if-a-variable-is-not-nil-and-not-zero-in-ruby <<--  how to do this in chef template?
[2013-11-21 19:41:17 -0500] kallistec: pwelch_: but those have not been verified to the same degree
[2013-11-21 19:42:08 -0500] pwelch_: kallistec: ok, thanks. Might take a look at for Dev.
[2013-11-21 19:43:11 -0500] FernandoEscher: Hello everyone, how can I print the result of this command "sudo locale-gen \"#{locale}\" with Chef on vagrant provisioning?
[2013-11-21 19:44:28 -0500] CPS: how do i check to see if a service is installed on a node from within a recipe?
[2013-11-21 19:45:07 -0500] kallistec: holms: post your existing code to a gist? BTW, you need double-equals for testing equality (e.g., `==`)
[2013-11-21 20:21:57 -0500] chefuser123: hello all. i have chef-ssh-keys cookbook installed, and a 'users' databag with the root user, and ssh keys in it. I want to send these ssh keys to a server. can anyone point me to an actual WORKING howto to do this? I've been at it all day, and cant find a step by step guide.
[2013-11-21 20:23:30 -0500] chefuser123: i had the original howto here: http://www.linuxquestions.org/questions/linux-software-2/distributing-ssh-keys-with-chef-4175469703/
[2013-11-21 20:23:38 -0500] chefuser123: but that link stopped working :(
[2013-11-21 20:25:44 -0500] polysics: hello fellow chefs!
[2013-11-21 20:26:00 -0500] polysics: any chance this https://github.com/opscode-cookbooks/application_nginx/pull/13 and this https://github.com/opscode-cookbooks/application_nginx/pull/11 can get merged?
[2013-11-21 20:26:10 -0500] troyready: chefuser123, I believe that functionality should be in Opscode's users cookbook: https://github.com/opscode-cookbooks/users
[2013-11-21 20:26:10 -0500] polysics: it is holding up a lot of our work and they do look ready
[2013-11-21 20:27:12 -0500] chefuser123: troyready thank you very much for the link. i have read it and tried it. but since this is a new technology i need a howto, which doesn't exist there.
[2013-11-21 20:29:00 -0500] chefuser123: troyready, that site is an excellent example of explaining how something works without explaining how to do it.
[2013-11-21 20:29:02 -0500] teukka: polysics: the corresponding jira issues need to be marked as "fix provided" to get into code review (again)
[2013-11-21 20:29:09 -0500] Ken_UNIX: I am UNIX Admin. Can anyone answer a question about Opscode Chef install for me?
[2013-11-21 20:29:34 -0500] polysics: teukka: this one?https://tickets.opscode.com/browse/COOK-3254
[2013-11-21 20:29:37 -0500] stormerider: does anyone have a good guide on working with hashes in attributes and how they get merged down in chef? i'm running into some oddball problems that don't line up with what chef-shell is telling me i should be able to expect
[2013-11-21 20:30:11 -0500] troyready: chefuser123, got it. Then you're dealing with an issue of how to use recipes & attributes -- I'd suggest going through the content at learnchef.com
[2013-11-21 20:30:14 -0500] teukka: polysics: https://github.com/poise/application_nginx/blob/master/CONTRIBUTING
[2013-11-21 20:30:25 -0500] Ken_UNIX: I have a developer playing with Opscode Chef and I need to know what ID(s) will be created by the software on RHEL.
[2013-11-21 20:31:32 -0500] CPS: how do i use the service resource to check that a service exists but not do anything to it?
[2013-11-21 20:31:54 -0500] troyready: Ken_UNIX, the Chef omnibus install (what I assume you're referring to, AKA "installing chef") runs everything as root I believe
[2013-11-21 20:33:37 -0500] Ken_UNIX: hmmm. they have claimed opscode and opscode-sql. does that mean anything or sound like anything?
[2013-11-21 20:34:18 -0500] Ken_UNIX: we don't allow longer than 8 character usernames so the 2nd ID violates our policy and I am trying to see if they are blowing smoke
[2013-11-21 20:34:56 -0500] polysics: teukka: I might be dumb but I do not see how to set the status to "Fix provided"
[2013-11-21 20:35:10 -0500] polysics: also, the patches are not mine, so I think I do not need to sign the CLA, correct?
[2013-11-21 20:35:17 -0500] polysics: I will if it is needed :)
[2013-11-21 20:35:21 -0500] chefuser123: troyready, that is going to be very helpful and I will definitely do that. but it isnt helping me at this moment. the most horrible thing about this is that there was a howto explaining how to do this from scratch since sending ssh keys to a server is like the most basic functionality we deal with as sysadmins.
[2013-11-21 20:36:27 -0500] troyready: Ken_UNIX, Chef is a automation platform that will do whatever your teammates tell it to. Out of the box, the official installers don't do any user provisioning, but your teammates could have it configured to do just about anything
[2013-11-21 20:36:46 -0500] juliancdunn: polysics: you need to sign the CLA if you want to move a bug into Fix Provided
[2013-11-21 20:37:04 -0500] juliancdunn: however -- if there are questions about the PR, the PR author will be contacted, so if they've disappeared...
[2013-11-21 20:37:08 -0500] chefuser123: troyready, have you ever run into a howto regarding anything like what i am talking about? which breaks down to step 1) push a sentence into a file on a server. is it really so complicated that i have to learn Json and Ruby to be able to do this?
[2013-11-21 20:37:22 -0500] Ken_UNIX: Troy, the PO I have says Private Chef Sub - Enterprise Premium.
[2013-11-21 20:37:32 -0500] polysics: juliancdunn: I know how to find the author :D
[2013-11-21 20:37:41 -0500] juliancdunn: is it you? :-)
[2013-11-21 20:37:55 -0500] polysics: nopes, but we work together
[2013-11-21 20:38:00 -0500] juliancdunn: ah, ok
[2013-11-21 20:38:40 -0500] troyready: Ken_UNIX, Ahhhh. It's *possible* that they're some additional customization bundled with your edition (as opposed to the regular open source or hosted one). I doubt it, but I'm not familar with Opscode agreements like that
[2013-11-21 20:39:06 -0500] Ken_UNIX: thanks
[2013-11-21 20:39:08 -0500] troyready: Ken_UNIX, in general: if you download chef, it's going to do a pretty minimal install into /opt/chef, and then execute whatever you tell it to execute
[2013-11-21 20:39:10 -0500] Ken_UNIX: I appreciate it
[2013-11-21 20:39:27 -0500] Ken_UNIX: I think my developers think I am stupid
[2013-11-21 20:39:48 -0500] Ken_UNIX: and I dont' know how to communicate outside them :)
[2013-11-21 20:39:53 -0500] troyready: Ken_UNIX, developers do like pushing sysadmins around :) And vis-versa
[2013-11-21 20:39:56 -0500] polysics: juliancdunn: I signed the CLA.
[2013-11-21 20:40:11 -0500] polysics: now I assume I need to wait :)
[2013-11-21 20:40:13 -0500] Ken_UNIX: I just here to do my job. Thanks again.l have a good day
[2013-11-21 20:40:16 -0500] juliancdunn: polysics: cool. it'll take our people a day or so to deal with that, sorry for the delay
[2013-11-21 20:40:50 -0500] troyready: chefuser123, I don't know of any guides for that specific process. To maintain it, you'll need to store you keys in JSON, so yes, in a sense, you're stuck learning it, though that's not nearly as bad as it sounds
[2013-11-21 20:41:18 -0500] polysics: juliancdunn: thanks for assistance, I hope I am lucky and someone reviews it :)
[2013-11-21 20:42:20 -0500] juliancdunn: polysics: we will! if you come to code review, you can get nearer the top of the queue :0
[2013-11-21 20:43:51 -0500] polysics: I can certainly +1 the changes since I tested them
[2013-11-21 20:44:12 -0500] troyready: chefuser123, conceptually, to accomplish what you're looking for, I think you're going to need to at least understand creating /modifying data bags. Then you could download and run Opscode's users cookbook pretty easily to accomplish what you want
[2013-11-21 20:47:11 -0500] redondos: nova-scheduler.log shows this error when starting an instance with knife-openstack (knife openstack server create -r server_pay  -x ubuntu -V -N pay-knife): Command: sudo nova-rootwrap /etc/nova/rootwrap.conf tee /tmp/openstack-vfs-localfsBrtjd6/etc/chef/ohai/hints/openstack.json\nExit code: 1\nStdout: ''\nStderr: '/usr/bin/tee: /tmp/openstack-vfs-localfsBrtjd6/etc/chef/ohai/hints/openstack.json: No such file or direct
[2013-11-21 20:47:11 -0500] redondos: ory
[2013-11-21 20:47:23 -0500] redondos: mattray: any suggestions? ^
[2013-11-21 20:48:40 -0500] mattray: redondos: not offhand that's a weird message
[2013-11-21 20:48:51 -0500] mattray: the instance is created right?
[2013-11-21 20:49:08 -0500] redondos: mattray: yes but it stays in BUILD state
[2013-11-21 20:49:20 -0500] mattray: what version of knife-openstack?
[2013-11-21 20:49:22 -0500] redondos: is that file supposed to be on the system with knife-openstack, or the compute node?
[2013-11-21 20:49:41 -0500] mattray: redondos: the file gets created on the instance you're creating
[2013-11-21 20:50:22 -0500] mattray: long ago it used to happen via the OpenStack API, now it just gets created when you bootstrap it
[2013-11-21 20:50:34 -0500] redondos: makes sense but it's too soon for it to be looking for that file
[2013-11-21 20:50:34 -0500] redondos: knife-openstack (0.8.1)
[2013-11-21 20:50:55 -0500] mattray: redondos: it's like the VM is spinning up too slow or something
[2013-11-21 20:51:44 -0500] jchauncey: testing lwrps suck
[2013-11-21 20:54:11 -0500] polysics: juliancdunn: the patch author set it to Fix Provided, I managed to reach him
[2013-11-21 21:04:41 -0500] juliancdunn: cool
[2013-11-21 21:20:46 -0500] BenT: Hi, I am having a transitive dependecy conflict using Berkshelf.  Namely a depends on b and c.  b and c both depend on different versions of e.  I started by editing metadata on b and c, but figured that won't scale.  What is the best approach?
[2013-11-21 21:21:33 -0500] BenT: This is Berkshelf 2.0.10
[2013-11-21 21:48:06 -0500] akahn: with gem_package, how would I install a gem for a particular user, not for root?
[2013-11-21 21:48:28 -0500] bmoritz: jtimberman: Do you still recommend using data bags for application deployments through chef?
[2013-11-21 22:11:55 -0500] jmickle: hmm how do you edit the ohai FQDN
[2013-11-21 22:12:01 -0500] jmickle: it does not appear to be taking on my new domain
[2013-11-21 22:12:43 -0500] chip-: What does hostname -f return?
[2013-11-21 22:13:06 -0500] gchristensen: jmickle: ohai attributes cannot be overwritten, it can only be altered by changing what ohai is getting the data from.
[2013-11-21 22:13:32 -0500] jmickle: oh interesting my fqdn is returning that domain
[2013-11-21 22:13:33 -0500] jmickle: hmm
[2013-11-21 22:15:41 -0500] jmickle: chef-client seems to return it back weird
[2013-11-21 22:17:20 -0500] jmickle: ah found it
[2013-11-21 22:20:24 -0500] gclark85: I am having some trouble with a chef node de-registration script that doesn't seem to run when the server is shutdown but runs fine when I execute it manually
[2013-11-21 22:28:35 -0500] gchristensen: do people have different chef servers for different partsof their org? like build servers vs. application A. vs application B.
[2013-11-21 22:29:31 -0500] thehar: I generally use environments to do that work. Managing multiple chef servers is a bit of a nightmare.
[2013-11-21 22:30:44 -0500] gchristensen: interesting! cool!
[2013-11-21 22:38:19 -0500] there_is_only_on: anyone know why a recipe wouldn't honor certain attributes set in the attributes file, its compiling with the wrong URL for the install, in particular, the maven cookbook from opscode
[2013-11-21 22:39:34 -0500] there_is_only_on: its also broken in its current state, i know how to fix it with defined attributes, but it won't honor it
[2013-11-21 22:39:43 -0500] jmickle: node.override[:sys][:domain] = ""
[2013-11-21 22:39:48 -0500] jmickle: is this possible to do from recipe?
[2013-11-21 22:40:18 -0500] there_is_only_on: i don't know why default[:cookbook][:blah] doesn't work
[2013-11-21 22:40:27 -0500] there_is_only_on: it should, it works everywhere else
[2013-11-21 22:40:30 -0500] there_is_only_on: just this one it doesn't
[2013-11-21 22:40:41 -0500] jmickle: i need to set its value from the recipe itself
[2013-11-21 22:41:17 -0500] there_is_only_on: preferred not to do that, but i guess i don't have a choice until its updated
[2013-11-21 22:42:51 -0500] divad: there_is_only_on: are you sure the attribute isn't overriden somewhere else?
[2013-11-21 22:43:35 -0500] there_is_only_on: thats what I'm trying to figure out, to see if the recipe is doing it itself, it forces the version, but the URL is wrong
[2013-11-21 22:45:52 -0500] there_is_only_on: the recipe calls for node['maven]['3']['version]' and the url is written with the mirror parameters for that attribute, but it doesn't take them
[2013-11-21 22:46:05 -0500] there_is_only_on: i am likely going to have to fork it
[2013-11-21 22:46:11 -0500] there_is_only_on: and do it myself
[2013-11-21 22:46:48 -0500] there_is_only_on: theres a pull request for it
[2013-11-21 22:47:04 -0500] there_is_only_on: the attributes are interpolated
[2013-11-21 22:51:55 -0500] gclark85: why is it that my script for knife node delete will execute on run level 3 for instance, but not run level 0 or 6?
[2013-11-21 22:54:53 -0500] jmickle: is it possible to do if statements in the default attributes file for a cookbook?
[2013-11-21 22:55:23 -0500] carmstrong: jmickle: sure, but if you find yourself with a lot of complex logic there, you're probably doing something wrong
[2013-11-21 22:55:33 -0500] jmickle: i just want to switch based on ec2 region
[2013-11-21 22:55:34 -0500] carmstrong: jmickle: common practice is to set attributes based on distro or platform
[2013-11-21 22:55:48 -0500] jmickle: like i just want 1 common attribute thats used in many places
[2013-11-21 22:55:54 -0500] jmickle: to set based on ec2 region
[2013-11-21 22:55:57 -0500] carmstrong: sounds reasonable
[2013-11-21 22:56:07 -0500] jmickle: should i do that in default attr file?
[2013-11-21 22:56:24 -0500] carmstrong: you could. you could also use environment files for this, if you have a different environment per ec2 region
[2013-11-21 22:57:25 -0500] jmickle: http://pastebin.com/nFvA50R0
[2013-11-21 22:58:25 -0500] carmstrong: jmickle: you could clean that up a bit. see https://github.com/opscode-cookbooks/java/blob/master/attributes/default.rb for a good example of using conditionals in attribute files
[2013-11-21 22:58:50 -0500] jmickle: ty
[2013-11-21 22:58:59 -0500] carmstrong: and it's good practice to namespace your attributes - so, if you're setting node[:sys] there, you should probably be doing that in the sys cookbook's default.rb file
[2013-11-21 22:59:04 -0500] carmstrong: otherwise, it's probably cleaner elsewhere
[2013-11-21 23:06:24 -0500] fveillette: https://tickets.opscode.com/browse/COOK-3542
[2013-11-21 23:06:29 -0500] fveillette: i still have this issue
[2013-11-21 23:06:40 -0500] fveillette: even if i download the latest windows cookbook 
[2013-11-21 23:06:43 -0500] fveillette: 1.11.1
[2013-11-21 23:06:54 -0500] fveillette: can someone help
[2013-11-21 23:13:07 -0500] fveillette: any windows guy here?
[2013-11-21 23:37:06 -0500] supercom32: Is it possible to reference attributes located in another cookbook? If so, how do you do it? I tried to call it by name, but I just get back an empty variable.
[2013-11-21 23:38:03 -0500] rsmitty: I'm new to chef, but I believe that you can add a depends on that cookbook in your metadata.rb and it will load those attributes during your chef run
[2013-11-21 23:38:23 -0500] carmstrong: supercom32: absolutely. you should include_attribute "othercookbook::attribute_file_name" as the first thing in your attributes/default.rb file to make sure they're pulled in before your cookbook runs.
[2013-11-21 23:38:28 -0500] supercom32: Ah right. I think that's what I forgot <Doh!>
[2013-11-21 23:38:47 -0500] carmstrong: rsmitty: you'll need to depends to guarantee the cookbook is loaded, but it doesn't parse attributes - just libraries and LWRPs, if I remember correctly
[2013-11-21 23:39:06 -0500] carmstrong: so, you'll need both depends and include_attribute
[2013-11-21 23:39:15 -0500] rsmitty: ah, gotcha. thanks.

[2013-11-08 00:05:05 -0500] dgarstang3: Majost: thanks. seen it a million times. :)
[2013-11-08 00:10:47 -0500] Majost: np
[2013-11-08 00:11:50 -0500] Majost: So you have an attribute value set in a wrapper for a dependent cookbook which is not being respected, yes?
[2013-11-08 00:17:47 -0500] julian____: Is it possible to use a provider within a provider. For example using the execute provider within a custom written provider?
[2013-11-08 00:18:35 -0500] cparedes: hey guys: so, i'm seeing some weird behavior with some node elements being *appended* instead of replaced
[2013-11-08 00:18:35 -0500] julian____: It seems to work when used directly, but the inner provider never gets run when delayed in the context of an event subscription
[2013-11-08 00:19:00 -0500] cparedes: if i load a JSON file through chef-client with -j with some attributes that have arrays attached to them
[2013-11-08 00:19:18 -0500] cparedes: i'm seeing the node def itself update its attribute with an appended version instead of a replaced version of the attribute
[2013-11-08 00:19:47 -0500] cparedes: like for example, node['lvm'] = [ { 'name' => 'foo', 'values' => [ 'foo1' ] } ] before the run
[2013-11-08 00:20:43 -0500] cparedes: now instead of node['lvm'] = [ { 'name' => 'foo', 'values' => [ 'foo1', 'foo2' ] } ], it's now node['lvm'] = [ { 'name' => 'foo', 'values' => [ 'foo1']}, { 'name' => 'foo', 'values' => [ 'foo1', 'foo2' ] } ]
[2013-11-08 00:20:57 -0500] cparedes: not sure if that makes sense to anyone
[2013-11-08 00:21:06 -0500] cparedes: i'm not sure what's going on here
[2013-11-08 00:21:46 -0500] nvmk: Hello
[2013-11-08 00:22:17 -0500] nvmk: Brand new to Chef - looking for some help with Solaris / Weblogic and basic boot strapping
[2013-11-08 00:23:41 -0500] blargel: is it not possible to use the omnibus installer on 10.9?
[2013-11-08 00:23:51 -0500] coderanger: nvmk: What seems to be the issue?
[2013-11-08 00:24:10 -0500] nvmk: When I try to boot strap the Solaris hosts it complains on Wget - Certificates
[2013-11-08 00:24:13 -0500] stormerider: blargel: i dont think that 10.9 is supported yet
[2013-11-08 00:24:25 -0500] coderanger: blargel: It hasn't been updated, curl ... | sed s/10.8/10.9/ | bash
[2013-11-08 00:24:34 -0500] nvmk: so bootstrapping the sparc hosts fails straightaway - any tips there
[2013-11-08 00:24:44 -0500] cparedes: anyone happen to know what's going on with node appending vs. replacing here?
[2013-11-08 00:24:49 -0500] stormerider: but the old installer probably works, yeah. meaning to test that later myself.
[2013-11-08 00:24:57 -0500] coderanger: nvmk: Whats the cert error?
[2013-11-08 00:25:04 -0500] blargel: okay, i was just being cautious about bypassing that
[2013-11-08 00:25:08 -0500] coderanger: cparedes: ?
[2013-11-08 00:25:16 -0500] coderanger: blargel: Yeah, should work fine
[2013-11-08 00:25:16 -0500] blargel: ie didnt know if it was known not working
[2013-11-08 00:25:35 -0500] coderanger: blargel: Just someone has to update a file for new releases
[2013-11-08 00:25:45 -0500] nvmk: coderanger: Also - I'm brand new - just a couple of days into Chef and following along the screencasts - trying to find if there any tutorials that step me through writing something that is not already published in the community
[2013-11-08 00:25:47 -0500] cparedes: er, explained the issue above, but anyway: loading in JSON file with -j with chef-client, trying to replace a node attribute that has an array attached to it
[2013-11-08 00:26:11 -0500] cparedes: before JSON file is loaded, state is node['lvm'] = [ { 'name' => 'foo', 'values' => [ 'foo1' ] } ]
[2013-11-08 00:26:19 -0500] coderanger: cparedes: Have you read my thing about arrays in chef?
[2013-11-08 00:26:19 -0500] nvmk: coderanger - It fails with " certificates not authorized (paraphrasing)  " - use wget --no-check-certificate to bypass
[2013-11-08 00:26:33 -0500] cparedes: coderanger: i don't think so, what's the link?
[2013-11-08 00:26:56 -0500] coderanger: nvmk: How old a vintage of solaris is this?
[2013-11-08 00:27:20 -0500] cparedes: oh, https://coderanger.net/2013/06/arrays-and-chef/ ?
[2013-11-08 00:27:23 -0500] coderanger: cparedes: My firefox is locked up
[2013-11-08 00:27:24 -0500] nvmk: @coderanger - LOL -not vintage at all - Solaris 10 update 9 -
[2013-11-08 00:27:26 -0500] coderanger: but yeah, thats the one
[2013-11-08 00:27:47 -0500] nvmk: but it's nto been patched for a few yrs , I tried one thats fully patched - bootstrapping that also gve me the same error
[2013-11-08 00:27:52 -0500] nvmk: Solaris 10 update 11 I believe
[2013-11-08 00:27:55 -0500] nvmk: its all sparc
[2013-11-08 00:27:55 -0500] blargel: perhaps I am not reading it correctly, but with knife are you only able to create one key:value combo, anything more difficult that you need to open an editor to modify? Ie can I run three knife commands to make three key:value pairs in the same databag?
[2013-11-08 00:28:09 -0500] coderanger: nvmk: Okay, let me check the opscode cert once fx decides to be talkative again
[2013-11-08 00:28:26 -0500] cparedes: cool, thanks
[2013-11-08 00:28:36 -0500] nvmk: @coderanger - appreciate that
[2013-11-08 00:28:57 -0500] nvmk: @coderanger - any places where I can find a step by step on doing something that is not already "packaged" like ntp or apache
[2013-11-08 00:29:15 -0500] coderanger: blargel: Not sure what you mean, data bag editing is always through an editor or text file that I know of
[2013-11-08 00:29:17 -0500] nvmk: want to get Java 7 pushed and WLS pushed and thought - it would be a great opportunity to learn Chef while doing it :)
[2013-11-08 00:31:34 -0500] coderanger: nvmk: The cert looks all good, try installing curl maybe since that has its own CA trust list?
[2013-11-08 00:31:49 -0500] coderanger: As for solaris specifics I know nothing, but jtimberman might be able to help
[2013-11-08 00:32:29 -0500] nvmk: Thanks coderanger - I'll try and get back - I could have sworn all the certs on our end
[2013-11-08 00:33:00 -0500] nvmk: jtimberman - any thoguhts on Java 7 - Solaris push out?
[2013-11-08 00:33:10 -0500] nvmk: and how to make sure all the certs are updated
[2013-11-08 00:33:11 -0500] nvmk: using Chef?
[2013-11-08 00:33:26 -0500] coderanger: nvmk: A8985D3A65E5E5C4B2D7D66D40C6DD2FB19C5436 is the fingerprint of the DigiCert root you need
[2013-11-08 00:34:26 -0500] nvmk: Thanks Coderanger
[2013-11-08 00:34:42 -0500] nvmk: Anyone know where wget actually looks for the cert - is it /usr/ssl/ ?
[2013-11-08 00:38:35 -0500] coderanger: nvmk: I think /etc/ssl/certs is the default on linux
[2013-11-08 00:39:10 -0500] coderanger: nvmk: https://www.gnu.org/software/wget/manual/html_node/Wgetrc-Commands.html you can also control it via ca_directory
[2013-11-08 00:39:32 -0500] nvmk: Yep coderanger - but the problem is that this is coming from opscode
[2013-11-08 00:39:41 -0500] nvmk: dont want to tinker with any chef scripts
[2013-11-08 00:40:20 -0500] coderanger: nvmk: No, you can make a .wgetrc in the user you are bootstrapping as
[2013-11-08 00:40:38 -0500] nvmk: aah -  I didnt know that coderanger
[2013-11-08 00:40:40 -0500] nvmk: perfect
[2013-11-08 00:40:42 -0500] coderanger: and copy over the curl CA bundle file as part of the bootstrap
[2013-11-08 00:40:43 -0500] nvmk: going to try it out shortly
[2013-11-08 00:40:45 -0500] coderanger: :)
[2013-11-08 00:41:01 -0500] nvmk: Copy over the curl CA bundle?
[2013-11-08 00:41:02 -0500] coderanger: Guessing sol10 is just a bit behind the times in SSL roots
[2013-11-08 00:41:28 -0500] coderanger: nvmk: http://curl.haxx.se/ca/cacert.pem
[2013-11-08 00:41:38 -0500] nvmk: I'm probably thinking its our patching too :)
[2013-11-08 00:41:56 -0500] coderanger: nvmk: Or, if you want something trusted more http://curl.haxx.se/docs/caextract.html
[2013-11-08 00:42:07 -0500] nvmk: yeah...I have that one
[2013-11-08 00:42:11 -0500] nvmk: thats the first one I got
[2013-11-08 00:42:34 -0500] coderanger: So you would copy that file over to ~root or whatever and make a wgetrc with ca_file pointed at it
[2013-11-08 00:42:46 -0500] coderanger: Then wget should grok the cert
[2013-11-08 00:42:52 -0500] coderanger: (without being too insecure)
[2013-11-08 00:44:15 -0500] nvmk: ok...
[2013-11-08 00:44:17 -0500] nvmk: let me try it out
[2013-11-08 00:45:55 -0500] nvmk: trying it now coderanger...lets see what happens
[2013-11-08 00:45:59 -0500] coderanger: nvmk: In other news, security is to fracking hard
[2013-11-08 00:46:07 -0500] nvmk: I'm wondering if I have to do that on the host I'm trying to bootstrap
[2013-11-08 00:46:11 -0500] nvmk: or the knife host ?
[2013-11-08 00:46:14 -0500] nvmk: I'm thinking former?
[2013-11-08 00:48:15 -0500] coderanger: indeed
[2013-11-08 00:48:39 -0500] nvmk: this is an annoying error I'm running into when trying to bootstrap hosts
[2013-11-08 00:48:44 -0500] coderanger: Though you could try and write it into the bootstrap script locally so that you don't have to do it manually on each node
[2013-11-08 00:48:51 -0500] nvmk: "Error: NotImplementedError: SSH2 agents are not yet supported"
[2013-11-08 00:49:09 -0500] nvmk: where is the bootstrap script coderanger?
[2013-11-08 00:49:49 -0500] coderanger: nvmk: http://docs.opscode.com/knife_bootstrap.html#custom-templates
[2013-11-08 00:50:05 -0500] coderanger: nvmk: So basically take https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-11-08 00:50:07 -0500] bixu: I'm trying to do a knife search that returns only addresses for an interface that has type 'eth' - can anyone give me pointers on that?
[2013-11-08 00:50:21 -0500] coderanger: copy it to .chef/bootstrap/something.erb
[2013-11-08 00:50:48 -0500] coderanger: nvmk: and at the top put the commands you want
[2013-11-08 00:51:14 -0500] coderanger: bixu: Don't think you can do that directly via search, it can only return nodes
[2013-11-08 00:51:24 -0500] bixu: Ah.
[2013-11-08 00:51:55 -0500] bixu: So I'd be better off having a recipe that figures that out using ohai and sets a custom node attribute?
[2013-11-08 00:52:20 -0500] coderanger: bixu: Sounds like a plan to me
[2013-11-08 00:52:42 -0500] nvmk: Any reason why I should be getting "Error: NotImplementedError: SSH2 agents are not yet supported" ?
[2013-11-08 00:53:43 -0500] coderanger: nvmk: What version of ssh-agent are you using locally?
[2013-11-08 00:54:15 -0500] nvmk: Ssh-agent
[2013-11-08 00:54:16 -0500] nvmk: ?
[2013-11-08 00:54:20 -0500] bixu: coderanger: The reason I ask is because ohai reports ppp interfaces (created by openswan) as the primary interface on machines running openswan.  Do you think that would qualify as a bug?
[2013-11-08 00:54:40 -0500] coderanger: nvmk: Yes, that error is from knife talking to ssh-agent locally to try and find a key to use to login
[2013-11-08 00:54:49 -0500] nvmk: the chef client itself is Solaris
[2013-11-08 00:55:08 -0500] nvmk: it uses Protocol 2
[2013-11-08 00:55:10 -0500] coderanger: nvmk: This is on your workstation
[2013-11-08 00:55:27 -0500] nvmk: yeah - the workstation = solaris host :)
[2013-11-08 00:55:35 -0500] nvmk: I'm trying to keep everything solaris to keep my misery to a minimum
[2013-11-08 00:55:46 -0500] coderanger: nvmk: protocol 2 is different, that an SSH thing
[2013-11-08 00:55:53 -0500] coderanger: this is for the comms with the local key agent
[2013-11-08 00:56:31 -0500] bixu: nvmk: I've run into this as well.  You can do something like this:
[2013-11-08 00:56:51 -0500] bixu: eval $(/usr/bin/ssh-agent)
[2013-11-08 00:56:58 -0500] bixu: in your .bashrc or something like that
[2013-11-08 00:57:24 -0500] nvmk: that just gives me the agent pid
[2013-11-08 00:57:28 -0500] nvmk: doing an eval
[2013-11-08 00:57:29 -0500] nvmk: bixu
[2013-11-08 00:57:32 -0500] bixu: Some operating systems don't start ssh-agent by default, so you have to determine how you want to start the agent.
[2013-11-08 00:57:46 -0500] bixu: Yes, but it also starts the agent for the duration of your session (I think?)
[2013-11-08 00:58:15 -0500] nvmk: Yep...that worked
[2013-11-08 00:58:16 -0500] nvmk: super
[2013-11-08 00:58:39 -0500] bixu: On my systems, ssh-agent invocation sets some envvars as well that ssh-aware tools need.
[2013-11-08 00:58:52 -0500] nvmk: Now it says  "client_key: is invalid
[2013-11-08 00:58:53 -0500] nvmk: argh
[2013-11-08 00:59:21 -0500] bixu: you also need to ssh-add the right private keys to the now-running ssh-agent
[2013-11-08 00:59:39 -0500] bixu: You can also potentially do this in your .bashrc:
[2013-11-08 00:59:39 -0500] nvmk: Whose private keys?
[2013-11-08 00:59:46 -0500] bixu: for key in $(grep -l "BEGIN RSA PRIVATE KEY"  ~/.ssh/*); do ssh-add $key; done
[2013-11-08 01:00:31 -0500] coderanger: nvmk: ssh-agent is a way of loading SSH keys into memory so that you can use them without typing in the decryption key
[2013-11-08 01:00:37 -0500] bixu: In my case, I'm doing this so that I can use manta-sync: https://npmjs.org/package/manta-sync
[2013-11-08 01:01:31 -0500] bixu: coderanger is right.  If you have passphrases on your keys, you'll get prompted for a password when you ssh-add keys.
[2013-11-08 01:01:47 -0500] bixu: OS X takes care of this as party of Keychain handling.
[2013-11-08 01:01:57 -0500] nvmk: no passphrases
[2013-11-08 01:02:10 -0500] bixu: That makes things easier for you, then.
[2013-11-08 01:02:12 -0500] nvmk: I just now need to get past the wget --no-check-certificate thing
[2013-11-08 01:02:32 -0500] bixu: You have old root certs?
[2013-11-08 01:03:19 -0500] nvmk: bixu  - no htis is a fully patched solaris 10
[2013-11-08 01:04:20 -0500] coderanger: nvmk: No, you have old root certs
[2013-11-08 01:04:36 -0500] coderanger: The stuff I suggested is just to work around it by giving wget a better root collection
[2013-11-08 01:04:36 -0500] coderanger: :)
[2013-11-08 01:04:50 -0500] nvmk: Coderanger - I'm trying to get the certs fro curl.haax
[2013-11-08 01:04:53 -0500] nvmk: I put it in
[2013-11-08 01:05:01 -0500] nvmk: now need wget to honor the wgetrc file
[2013-11-08 01:08:06 -0500] bixu: coderanger: Some of the information here (https://wiki.opscode.com/plugins/viewsource/viewpagesrc.action?pageId=6357057) makes it look like I *can* identify nodes by their network interface properties.
[2013-11-08 01:08:06 -0500] nvmk: coderanger - I got the bootstrapfile
[2013-11-08 01:08:12 -0500] bixu: Or am I misunderstanding?
[2013-11-08 01:08:24 -0500] nvmk: do I just modify that file to include "wget --no-check-certificate"
[2013-11-08 01:08:33 -0500] bixu: nvmk: Probably.
[2013-11-08 01:08:33 -0500] nvmk: I put it in .chef/bootstrap/
[2013-11-08 01:08:42 -0500] nvmk: called it - "bootstr.erb"
[2013-11-08 01:08:45 -0500] nvmk: should I call it bootstrap.erb?
[2013-11-08 01:08:54 -0500] bixu: nvmk: It doesn't matter.
[2013-11-08 01:08:55 -0500] coderanger: nvmk: You can call it anything, just pass that name to -d
[2013-11-08 01:09:11 -0500] bixu: (The name minus the .erb extension, I think)
[2013-11-08 01:09:20 -0500] coderanger: bixu: You could find nodes with those interfaces I think, but not the interfaces themselves which is what you asked initially
[2013-11-08 01:09:29 -0500] coderanger: bixu: Also the wiki is very deprecated
[2013-11-08 01:10:23 -0500] bixu: Haha.
[2013-11-08 01:10:42 -0500] nvmk: -d or --template?
[2013-11-08 01:10:51 -0500] bixu: All I need is IPs associated with interfaces of type "eth".
[2013-11-08 01:11:02 -0500] coderanger: nvmk: -d
[2013-11-08 01:11:16 -0500] coderanger: bixu: Right, that requires both search and your own scripting
[2013-11-08 01:11:28 -0500] bixu: Okay.
[2013-11-08 01:11:54 -0500] nvmk: trying now
[2013-11-08 01:13:21 -0500] nvmk: This is painful :( - -- "Downloading 11.8.0 for Solaris2...Unable to retrieve a valid package - Label Omnibus, Version 11.8.0
[2013-11-08 01:14:20 -0500] bixu: nvmk: There is only omnibus support for a limited number of operating systems.
[2013-11-08 01:14:28 -0500] bixu: Are you on SPARC by chance?
[2013-11-08 01:14:30 -0500] nvmk: I thoguht solaris was a supported OS?
[2013-11-08 01:14:33 -0500] nvmk: Yes - Sparc Sol 10
[2013-11-08 01:14:42 -0500] bixu: I think only x86 for Omnibus installs.
[2013-11-08 01:15:07 -0500] bixu: If you are on SPARC, you will want to install from rubygems (though I have no idea what trouble you might run into).
[2013-11-08 01:15:18 -0500] nvmk: When I saw online - I thought Chef was supported on Sparc - I saw some recipes for Zones
[2013-11-08 01:15:23 -0500] nvmk: rubygems should be installable
[2013-11-08 01:15:32 -0500] nvmk: I should install that before I install Chef?
[2013-11-08 01:15:39 -0500] nvmk: chef-client bootstrap I mean
[2013-11-08 01:15:39 -0500] nvmk: ?
[2013-11-08 01:15:44 -0500] bixu: Any gems with C extensions might prove difficult.
[2013-11-08 01:16:26 -0500] bixu: nvmk: You can construct a bootstrap file that install the needed ruby bits instead of using Omnibus.
[2013-11-08 01:16:48 -0500] coderanger: nvmk: sparc is only supported for sol9
[2013-11-08 01:16:53 -0500] coderanger: sorry, didn't notice that
[2013-11-08 01:17:01 -0500] nvmk: coderanger - that :'(
[2013-11-08 01:17:11 -0500] bixu: nvmk: Is this your production machine?
[2013-11-08 01:17:12 -0500] nvmk: we love sparc!
[2013-11-08 01:17:15 -0500] bixu: Or just a test?
[2013-11-08 01:17:24 -0500] nvmk: Test / Dev - installing opencsw now
[2013-11-08 01:17:31 -0500] bixu: Hmm.
[2013-11-08 01:17:33 -0500] nvmk: can grab rubygems from there
[2013-11-08 01:17:42 -0500] nvmk: once I figure out what to get - I can write the custom bootstrapper
[2013-11-08 01:17:57 -0500] coderanger: nvmk: sol9/sparc was added as part of a consulting deal with opscode, you can see if they would be interested in working with you on sol10/sparc
[2013-11-08 01:18:16 -0500] bixu: You should install your needed gems via the bootstrap file.
[2013-11-08 01:18:29 -0500] bixu: But, as coderanger says, it's unsupported.
[2013-11-08 01:18:56 -0500] nvmk: So you're saying the entire chef platform is unsupported for Sol 10?
[2013-11-08 01:19:02 -0500] nvmk: or just sol 10 sparc?
[2013-11-08 01:19:21 -0500] coderanger: just sparc
[2013-11-08 01:19:24 -0500] coderanger: supported on x86
[2013-11-08 01:19:32 -0500] coderanger: sol11/x86 is supported as well
[2013-11-08 01:20:08 -0500] nvmk: http://www.opscode.com/blog/2012/09/07/chef-10-14-0-released/
[2013-11-08 01:20:17 -0500] nvmk: says its supported on 9,10,11 sparc?
[2013-11-08 01:20:48 -0500] bixu: nvmk: Here's an example of a custom bootstrap file that works for Illumos (the open-source offshoot of what was once Solaris 11 pre-release): https://github.com/wanelo-chef/smartos-chef-repo/blob/master/.chef/bootstrap/smartos.erb
[2013-11-08 01:21:43 -0500] coderanger: nvmk: Hmm, maybe I'm misremembering
[2013-11-08 01:21:46 -0500] bixu: It installs some bits (you'd need to figure out how to do on your SPARC box) before placing the Chef-specific keys.
[2013-11-08 01:21:56 -0500] coderanger: nvmk: Lets check the master list :)
[2013-11-08 01:22:08 -0500] coderanger: nvmk: http://www.opscode.com/chef/full_list
[2013-11-08 01:22:25 -0500] nvmk: I get a nice forbidden message
[2013-11-08 01:22:30 -0500] bixu: nvmk: I will warn you, the Rubygems community doesn't use a lot of SPARC, so, as I mentioned, any gems that have C extensions may cause you trouble).
[2013-11-08 01:22:33 -0500] coderanger: nvmk: Yeah, looks like I'm wrong
[2013-11-08 01:22:43 -0500] coderanger: nvmk: /solaris2/5.9/sparc/chef-11.8.0-1.solaris2.5.9.solaris
[2013-11-08 01:23:13 -0500] bixu: So while Chef itself may work, it's possible that cookbooks depending on other gems could break.
[2013-11-08 01:23:18 -0500] nvmk: Yeah
[2013-11-08 01:23:23 -0500] nvmk: its unfortunate
[2013-11-08 01:23:31 -0500] nvmk: Sparc T4 servers are simply amazing :)
[2013-11-08 01:23:43 -0500] nvmk: I'm going to go through the bootstrap and see what happens
[2013-11-08 01:23:47 -0500] nvmk: time for some dinner...brb
[2013-11-08 01:23:53 -0500] bixu: We eventually re-wrote some cookbooks to avoid the nokogiri gem (xml rendering) because it had a fragile C-extension build dependency.
[2013-11-08 01:25:12 -0500] bixu: I hear you about SPARC - there are still plenty of places where it blows the doors off x86 processors.
[2013-11-08 01:27:04 -0500] coderanger: For all your radiation-hardened ops needs :)
[2013-11-08 01:27:20 -0500] jbz: SpacePC ftw
[2013-11-08 01:27:35 -0500] bixu: Or if you just want a huge number of threads per rack u.
[2013-11-08 01:27:52 -0500] coderanger: bixu: If thats what you want, give Calxeda a call
[2013-11-08 01:28:40 -0500] bixu: Ha - I predicted the advent of ARM servers to a co-worker back in '10.  He was skeptical.
[2013-11-08 01:29:06 -0500] bixu: In a lot of ways ARM is just economy SPARC.
[2013-11-08 01:29:30 -0500] bixu: It will be interesting to see what happens to Oracle hardware prices when ARM servers are becoming more common.
[2013-11-08 01:30:17 -0500] coderanger: niagra is cool, but a fully loaded calxeda 2u can be 200 cores I think :)
[2013-11-08 01:30:29 -0500] bixu: GIMME
[2013-11-08 01:31:35 -0500] coderanger: bixu: http://www.systemfabricworks.com/products/systemfabricore
[2013-11-08 01:31:48 -0500] coderanger: 192 cores in a 2U
[2013-11-08 01:32:24 -0500] bixu: So nice.  It's about time that we start caring about power efficiency and environmental impact of DCs.
[2013-11-08 01:33:40 -0500] coderanger: bixu: Yeah, 180W for the CPUs
[2013-11-08 01:34:19 -0500] bixu: A large lightbulb.
[2013-11-08 02:32:04 -0500] netty195: hi all
[2013-11-08 02:35:32 -0500] netty195: A bit new to ruby, how I can I loop over node['roles'] ?
[2013-11-08 02:36:26 -0500] gchristensen: netty195: node['roles'].each do |role| ... end
[2013-11-08 02:37:37 -0500] netty195: great thanks!
[2013-11-08 06:29:31 -0500] brucelee2: trying to understand how the whole chef system works. I have a chef server and a chef workstation
[2013-11-08 06:29:46 -0500] brucelee2: if i want to create a node, how does that node communicate with chef server?
[2013-11-08 06:30:00 -0500] brucelee2: should i take this to #learnchef? :p
[2013-11-08 06:30:34 -0500] brucelee2: is chef workstation basically a glorified chef client
[2013-11-08 06:33:56 -0500] coderanger: brucelee2: chef-client uses a REST API to talk to the server
[2013-11-08 06:34:00 -0500] coderanger: if thats what you are asking
[2013-11-08 06:44:28 -0500] brucelee2: coderanger: how does a chef-client node talk to the chef server?
[2013-11-08 06:45:01 -0500] brucelee2: im kind of confused how the chef client nodes get bootstrapped. If i create a vm with nothing on it, what do i need to install to it manually before it can talk to chef server
[2013-11-08 06:45:51 -0500] brucelee2: im also unsure if the chef workstation should be able to the other client ndoes directly.
[2013-11-08 06:46:38 -0500] brucelee2: so far, from what ive read, it seems the chef workstation talks to the chef server, teaches it recipes and dictates to the chef server what's installed in each of its chef client nodes
[2013-11-08 06:47:12 -0500] brucelee2: and the user needs to log into the chef client manually and tell it to update itself with the most up to date instructions from the chef server
[2013-11-08 06:47:20 -0500] brucelee2: is this how the process goes? kinda unsure :p
[2013-11-08 07:09:22 -0500] coderanger: brucelee2: Still here?
[2013-11-08 07:12:56 -0500] brucelee2: coderanger: yah
[2013-11-08 07:13:13 -0500] coderanger: brucelee2: Okay, taking a break from packing so lets do this
[2013-11-08 07:13:15 -0500] brucelee2: coderanger: i think i kind of figured out my answer by googling "chef bootstrap node"
[2013-11-08 07:13:19 -0500] brucelee2: coderanger: nice
[2013-11-08 07:13:25 -0500] coderanger: So the way it generally works
[2013-11-08 07:13:26 -0500] brucelee2: coderanger: would be cool if you can just confirm :P
[2013-11-08 07:13:40 -0500] coderanger: Chef-server is an HTTP service backed by Postgres and Solr
[2013-11-08 07:14:18 -0500] coderanger: Each client has a name (node_name) and an RSA private key (the server has the public key)
[2013-11-08 07:14:36 -0500] coderanger: so when a converge starts the client contacts the server and says "give me the node data for X"
[2013-11-08 07:14:51 -0500] coderanger: and then from that it grabs its cookbooks and roles and all that
[2013-11-08 07:15:15 -0500] coderanger: normally people run chef-client in daemon mode so it sits in the background and just kicks off a converge cycle every N minutes
[2013-11-08 07:15:21 -0500] coderanger: (usually 30 or 60)
[2013-11-08 07:17:48 -0500] brucelee2: oh ok
[2013-11-08 07:17:51 -0500] coderanger: So with bootstrapping, your workstation SSHs to the target machine, installs chef, copies over an initial config file, a validator key (more on that in a moment), and a first run JSON
[2013-11-08 07:18:01 -0500] coderanger: and then it starts chef-client
[2013-11-08 07:18:18 -0500] coderanger: when chef-client wakes up that first time and sees it doesn't have an RSA key it knows it needs to register itself
[2013-11-08 07:18:18 -0500] brucelee2: oh i see
[2013-11-08 07:18:39 -0500] coderanger: so it uses the validator key to say "Hi, I'm new, please generate a keypair and send me the private half"
[2013-11-08 07:19:16 -0500] brucelee2: so the validator key is a temp key it uses to create a second key for itself
[2013-11-08 07:19:22 -0500] coderanger: so it does that, gets its client key, and continues on until the point where it would download the node data from the server
[2013-11-08 07:19:29 -0500] brucelee2: seems like all the nodes can just use teh validator key right?
[2013-11-08 07:19:51 -0500] coderanger: there it instead uses the first run JSON, which is what includes the bootstrap command line args
[2013-11-08 07:20:05 -0500] coderanger: brucelee2: No, the validator key can do nothing except create new keys
[2013-11-08 07:20:24 -0500] brucelee2: oh ok
[2013-11-08 07:20:45 -0500] coderanger: and each client key has to be matched to the node name of the node that created it
[2013-11-08 07:20:52 -0500] brucelee2: but it essentially lets anyone create a new key essentially it has all the power of the new key :p
[2013-11-08 07:21:48 -0500] coderanger: Yes, the validator key is something you need to keep safe
[2013-11-08 07:21:59 -0500] coderanger: Generally should only be given to admins that will be spawning new machines
[2013-11-08 07:22:00 -0500] brucelee2: ah nice
[2013-11-08 07:22:12 -0500] brucelee2: its crystal clear to me now :)
[2013-11-08 07:22:12 -0500] brucelee2: thanks
[2013-11-08 07:22:30 -0500] coderanger: If you spawn VMs a ton, there are other ways to do things, but thats the simple version
[2013-11-08 07:23:09 -0500] brucelee2: coderanger: ah what else can you do?
[2013-11-08 07:23:27 -0500] brucelee2: coderanger: and when youre talking about spawnning VMs a ton, what method are you generally implying of doing that?
[2013-11-08 07:23:31 -0500] brucelee2: i know in vmware, theres not really a way to do it
[2013-11-08 07:23:43 -0500] brucelee2: its kind of like a point/click method
[2013-11-08 07:23:48 -0500] brucelee2: highly manual process
[2013-11-08 07:24:06 -0500] coderanger: brucelee2: You can bake the validator key into your VM base image and make it delete on first run (which you should do anyway)
[2013-11-08 07:24:26 -0500] coderanger: VMWare Server has an API, and there is a knife-vsphere plugin too
[2013-11-08 07:24:38 -0500] brucelee2: ohhh like make it validate itself to the chef server isntead of bootstrapping through workstation
[2013-11-08 07:24:42 -0500] brucelee2: like through kickstart or something
[2013-11-08 07:24:55 -0500] brucelee2: coderanger: oh really? knife-vsphere awesome!!!
[2013-11-08 07:25:23 -0500] brucelee2: coderanger: this one? http://rubygems.org/gems/knife-vsphere
[2013-11-08 07:25:45 -0500] coderanger: Indeed
[2013-11-08 07:26:12 -0500] brucelee2: coderanger: :D
[2013-11-08 07:26:35 -0500] brucelee2: coderanger: sweet, https://github.com/ezrapagel/knife-vsphere
[2013-11-08 07:35:18 -0500] coderanger: Okay, back to packing!
[2013-11-08 09:08:58 -0500] LHX_AttackParrot: ever come face to face no you havent
[2013-11-08 09:09:06 -0500] LHX_AttackParrot: now you have to deal with d@ p@rr0t
[2013-11-08 09:09:08 -0500] LHX_AttackParrot: RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC RAC
[2013-11-08 09:29:47 -0500] brucelee1: coderanger: still packing?
[2013-11-08 09:50:48 -0500] JuriadoBalzac: I've had some issues after upgrading to chef 11.8 from 11.6, and I get an error in aix.rb, row 91, saying "regexp has invalid interval". Script still works, but gives that in output as well.
[2013-11-08 09:50:54 -0500] JuriadoBalzac: Has anyone seen this before?
[2013-11-08 09:51:12 -0500] JuriadoBalzac: Centos 6.4
[2013-11-08 09:52:34 -0500] JuriadoBalzac: aaargh, quit instead of close :D
[2013-11-08 09:56:33 -0500] JuriadoBalzac: Anyways, is aix.rb needed at all?
[2013-11-08 10:01:18 -0500] LHX_AttackParrot: sucky suck
[2013-11-08 10:23:04 -0500] JuriadoBalzac: Anyone here seen that before? Or is there a way to just disable air.rb?
[2013-11-08 10:23:08 -0500] JuriadoBalzac: aix.rb
[2013-11-08 10:46:04 -0500] JuriadoBalzac: Is there way to require what version to run? I've got both 11.8 and 11.6 installed.
[2013-11-08 10:53:12 -0500] Jug_: is there any good documentation about the workflow when you are using chef-server but still want to test stuff with your own computer(vagrant) should you also confiure vagrant to use the chef server?
[2013-11-08 11:07:00 -0500] zaargy: Jug_: chef zero
[2013-11-08 11:07:33 -0500] zaargy: or you can always use your own chef server or hosted chef server
[2013-11-08 11:07:42 -0500] zaargy: becomes more of a problem if you have lots of peopel working on teh same one
[2013-11-08 11:08:17 -0500] zaargy: and chef zero workflow is really sweet
[2013-11-08 11:09:51 -0500] nd__: zaargy: Chef zero is chef solo?
[2013-11-08 11:10:03 -0500] Jug_: what is chef zero?
[2013-11-08 11:10:17 -0500] zaargy: chef zero is an inmeory chef server
[2013-11-08 11:10:35 -0500] zaargy: http://docs.opscode.com/release_notes.html
[2013-11-08 11:10:39 -0500] zaargy: it is in 11.8
[2013-11-08 11:10:51 -0500] zaargy: or you can use it with a previous version with https://github.com/jkeiser/chef-zero
[2013-11-08 11:10:53 -0500] nd__: oh, nice
[2013-11-08 11:11:13 -0500] Jug_: nice
[2013-11-08 11:11:58 -0500] Jug_: I mainly have a situation that I would like to use chef-client cookbook and test that also on my local machine so I guess that mandates that I can't use chef-solo anymore?
[2013-11-08 11:12:44 -0500] zaargy: you want to test it on your local machine in what way?
[2013-11-08 11:13:09 -0500] zaargy: you need a server with you need to use the search functionality essentially
[2013-11-08 11:14:59 -0500] Jug_: I mean I have my own cookbook which will run the chef-client default recipe and install it as a service so can I get that also working if I just use chef-solo with vagrant?
[2013-11-08 11:25:23 -0500] zaargy: yep
[2013-11-08 14:11:40 -0500] opyate: hello, about the 'remote_file' function
[2013-11-08 14:12:03 -0500] opyate: would it be a good idea to suggest 'remote_resource' function which supports not only http. https, but also file:// , ftp, etc etc ?
[2013-11-08 14:12:44 -0500] opyate: that way, if the recipe uses 'remote'resource', you can override your own attributes to try a local dev copy of something at file://whatever
[2013-11-08 14:16:31 -0500] opyate: ah, nevermind, it already supports file://, thanks
[2013-11-08 14:54:54 -0500] midnitekiller: chef doesn't do site-cookbooks anymore? Trying to do knife solo but I got error that it can't convert Array to String for cookbook_path ["cookbooks", "site-cookbooks"]
[2013-11-08 14:59:12 -0500] teukka: midnitekiller: which chef and knife-solo versions? could you gist/pastebin the full error?
[2013-11-08 14:59:52 -0500] midnitekiller: chef 11.8.0 knife 0.4.0
[2013-11-08 15:00:11 -0500] midnitekiller: I'm removing my knife.rb entry for cookbook_path
[2013-11-08 15:00:15 -0500] midnitekiller: testing now...
[2013-11-08 15:01:05 -0500] teukka: cookbook_path will anyway be an array in knife-solo. it automatically adds components to it
[2013-11-08 15:02:01 -0500] teukka: midnitekiller: yeah, shit. a lot of unit tests also fail on chef 11.8 :/
[2013-11-08 15:02:27 -0500] teukka: midnitekiller: downgrade to chef 11.6.2 if possible. I'll take a closer look
[2013-11-08 15:02:52 -0500] midnitekiller: yep, that's the better thing to do. Trying it
[2013-11-08 15:04:42 -0500] midnitekiller: 11.6.2 still had the issue. it's prolly the knife solo
[2013-11-08 15:07:52 -0500] teukka: tests still passed 8 days ago with chef 11.6.2: https://travis-ci.org/matschaffer/knife-solo
[2013-11-08 15:08:35 -0500] teukka: it might also be some transitional dependency. tests fail now for node_path(s), not for cookbook_path
[2013-11-08 15:09:11 -0500] midnitekiller: ahhh.. should it be cookbook_paths ['cookbooks', 'site-cookbooks'] instead of cookbook_path?
[2013-11-08 15:09:29 -0500] midnitekiller: ths (s)
[2013-11-08 15:10:42 -0500] teukka: no, cookbook_path is correct. node_path is intenally somewhere nodes_path (for chef-solo-search)
[2013-11-08 15:11:48 -0500] holms: is FQDN required? i mean, i'm getting getaddinfo() error from berkshelf. even if I set one, dns should be able to resolve it, cause it's in intranet..
[2013-11-08 15:12:00 -0500] teukka: midnitekiller: do you have `node_path` in knife.rb? try setting `node_path 'nodes'` (or to nil if you don't have it)
[2013-11-08 15:12:14 -0500] midnitekiller: nope, no node_path in my knife.rb
[2013-11-08 15:12:26 -0500] midnitekiller: trying that...
[2013-11-08 15:15:20 -0500] teukka: might be the new mixlib-config
[2013-11-08 15:16:35 -0500] teukka: https://github.com/opscode/chef/commit/ba2e7d0bc2dd468dac0b7f197317b745edafa083
[2013-11-08 15:16:37 -0500] midnitekiller: teukka, node_path indeed fixed it. Was that really necessary? or was it a bug?
[2013-11-08 15:17:21 -0500] teukka: it seems to be now an array by default in chef 11.8 and/or with new mixlib-config. I'm still testing
[2013-11-08 15:17:50 -0500] teukka: tests pass with chef 11.6.2
[2013-11-08 15:19:26 -0500] gchristensen: is there a way to do this (pseudo-code) attribute_path = 'foo.bar.baz' node.get_attribute(attribute_path) == node['foo']['bar']['baz']
[2013-11-08 15:20:00 -0500] teukka: midnitekiller: which also depends on mixlib-client <2.0. so chef 11.6.2 should really work. did you use bundler to lock it down?
[2013-11-08 15:20:54 -0500] midnitekiller: nope. no bundler. just using my system
[2013-11-08 15:22:11 -0500] teukka: then I think you still were using chef 11.8.0. the stack trace should reveal it
[2013-11-08 15:22:27 -0500] midnitekiller: ahh. you mean my client?
[2013-11-08 15:22:36 -0500] teukka: but setting the config explicitly is a valid workaround
[2013-11-08 15:22:56 -0500] teukka: midnitekiller: yeah, the error comes from the workstation
[2013-11-08 15:24:12 -0500] teukka: I knew jkeiser is the enemy of chef-solo and knife-solo, but I wouldn't have thought he makes such a dirty trick :P
[2013-11-08 15:25:27 -0500] jkeiser: I logged on after some important context, it seems :)
[2013-11-08 15:26:00 -0500] jkeiser: Is chef-solo broken?
[2013-11-08 15:26:57 -0500] teukka: jkeiser: it seems chef 11.8.0 (with new mixlib-config) defaults `node_path` to be an arrays instead of string. it breaks knife-solo. probably not chef-solo as I would expect the tests to fail :)
[2013-11-08 15:27:44 -0500] teukka: but chef-solo 11.6.2 at least only accepted strings for most *_path options
[2013-11-08 15:29:12 -0500] jkeiser: teukka: interesting.  I wonder how it handled the default for cookbook_path
[2013-11-08 15:29:22 -0500] holms: anybody can give me answer about FQDN?
[2013-11-08 15:29:40 -0500] jkeiser: teukka: you guys mind filing a bug so it can be tracked down and shot in the head?
[2013-11-08 15:29:58 -0500] holms: jkeiser: you do that too
[2013-11-08 15:30:06 -0500] teukka: jkeiser: this just came up, so I haven't even figured out all the details
[2013-11-08 15:30:07 -0500] holms: just explain how to recreate  a problem and done
[2013-11-08 15:30:16 -0500] jkeiser: Either we fix chef-solo to support it or we have it de-array-ize things
[2013-11-08 15:30:31 -0500] teukka: jkeiser: if chef-solo works fine, it is just knife-solo issue to support both versions
[2013-11-08 15:30:55 -0500] teukka: I was supposed to be working today ;)
[2013-11-08 15:30:56 -0500] jkeiser: teukka: oh right.  still, sucks we broke it, sorry
[2013-11-08 15:32:05 -0500] jkeiser: teukka: I guess since chef has array support for paths (I think it always has) it's not a chef bug.  But, if the default array path sucks, we might want to de-array-ize it anyway
[2013-11-08 15:32:24 -0500] jkeiser: I can't imagine why we would have two paths for nodes
[2013-11-08 15:33:48 -0500] teukka: jkeiser: err, why node_path is even defined there? It was only ever used by chef-server and I made a PR to remove it and itwas merged...
[2013-11-08 15:34:24 -0500] jkeiser: teukka: it's used by knife upload, knife download, chef-client --local-mode, and anything else that cares about all chef objects
[2013-11-08 15:34:28 -0500] teukka: https://tickets.opscode.com/browse/CHEF-4106
[2013-11-08 15:34:36 -0500] teukka: ah, roger
[2013-11-08 15:34:46 -0500] teukka: didn't realize that
[2013-11-08 15:35:16 -0500] jkeiser: teukka: the way it works is, node_path is derived from chef_repo_path by default
[2013-11-08 15:35:53 -0500] jkeiser: chef_repo_path is derived from cookbook_path/.. by default (since many people have a cookbook_path in their knife.rb files)
[2013-11-08 15:36:09 -0500] jkeiser: So if you're looking for a reason, it might be a multiple cookbook path
[2013-11-08 15:36:24 -0500] jkeiser: If you want to fix in knife-solo, you might just set chef_repo_path to a single directory
[2013-11-08 15:36:29 -0500] jkeiser: Everything else should flow from that
[2013-11-08 15:37:48 -0500] jkeiser: If chef_repo_path is [ 'a', 'b' ] then node_path is [ 'a/nodes', 'b/nodes' ]
[2013-11-08 15:38:11 -0500] jkeiser: If cookbook_path is [ 'a/cookbooks', 'b/cookbooks' ] then chef_repo_path is [ 'a', 'b' ]
[2013-11-08 15:38:31 -0500] jkeiser: But if you set chef_repo_path explicitly to 'a' or something, it kills that chain
[2013-11-08 15:38:37 -0500] teukka: when is that evaluated?
[2013-11-08 15:38:39 -0500] jkeiser: And node_path will end up as 'a/nodes'
[2013-11-08 15:38:47 -0500] jkeiser: It's a code default, in Chef::Config
[2013-11-08 15:39:10 -0500] jkeiser: It's evaluated on the fly when you retrieve the variable
[2013-11-08 15:39:43 -0500] jkeiser: i.e. when you read Chef::Config.node_path in knife-solo, if node_path is not explicitly set, it calculates the value then and there
[2013-11-08 15:39:48 -0500] teukka: ok. we always have cookbook_path as an multi-element array as we add embedded chef-solo-search to it
[2013-11-08 15:40:10 -0500] jkeiser: teukka: simple fix is Chef::Config.chef_repo_path = 'a top level thing'
[2013-11-08 15:40:32 -0500] jkeiser: nodes and roles and such will all hang off that
[2013-11-08 15:40:34 -0500] teukka: anyway the good thing is that node_path is relative to chef_repo_path and not /var/chef/nodes as before
[2013-11-08 15:40:47 -0500] jkeiser: Yeah, I always hated that
[2013-11-08 15:40:48 -0500] teukka: which was a really bad default for knife-solo =)
[2013-11-08 15:41:05 -0500] jkeiser: It is a bad default for absolutely everything except chef-client running on a machine :)
[2013-11-08 15:41:24 -0500] jkeiser: running as root
[2013-11-08 15:42:02 -0500] jkeiser: knife-essentials used to have code that would check if those things were set to their terrible default values and shoot them in the head
[2013-11-08 15:42:05 -0500] jkeiser: This simplified that a lot
[2013-11-08 15:42:10 -0500] teukka: I doubt if anyone runs chef-solo nowadays with /var/chef paths. vagrant, knife-solo, everything sets up own paths
[2013-11-08 15:43:22 -0500] teukka: jkeiser: thanks for the help. I really haven't paid too much attention for chef 11.8 changes. or tested knife-solo with master. knife-solo development has been really quiet anyways in the last six months
[2013-11-08 15:43:23 -0500] jkeiser: You may also be interested in the cache_path variable
[2013-11-08 15:43:45 -0500] jkeiser: It's a common root for all the caches that used to go under /var/chef/cache
[2013-11-08 15:43:57 -0500] jkeiser: S you set that one and all the rest get derived from it
[2013-11-08 15:44:53 -0500] jkeiser: And I must disappear for the bus
[2013-11-08 15:45:00 -0500] teukka: ok, that shouldn't be an issue as we anyway run the chef-client as root
[2013-11-08 16:05:15 -0500] ptrf: so, out of interest, I've been using chef haphazardly for the past couple of months, just to have something working
[2013-11-08 16:05:35 -0500] ptrf: now I'm following the How to write reusable cookbooks guide, and in general just trying to nicefy
[2013-11-08 16:05:46 -0500] ptrf: I'm using the opscode-cookbooks/users cookbook to administrato
[2013-11-08 16:05:57 -0500] ptrf: ... users. (sorry for typo)
[2013-11-08 16:07:15 -0500] ptrf: now, I want to add users to an existing group, yet I don't know if the group id stays the same. I would like to somehow resolve the group_id (Something like cat /etc/group | grep #{group_name} | cut -d: -f3 )
[2013-11-08 16:07:59 -0500] ptrf: where should I put the code to do that, in order to conform with chef practices?
[2013-11-08 16:09:29 -0500] cwj: ptrf: depends on how you want to use it
[2013-11-08 16:09:37 -0500] cwj: you can make it a helper method and put it in libraries and use it directly in a recipe
[2013-11-08 16:09:57 -0500] cwj: you can put it in a lwrp and use the lwrp in your recipes
[2013-11-08 16:10:21 -0500] cwj: you can put it in libraries and then use it in the lwrp and use the lwrp in your recipes (this maybe the most reusable)
[2013-11-08 16:16:14 -0500] j^2: heh, i just read nathen's email in his voice about the Community Summit
[2013-11-08 16:20:54 -0500] cwj: hehe
[2013-11-08 16:26:11 -0500] CPS: how do i access a node's OS version from a recipe? node["os"] yields only "windows"
[2013-11-08 16:26:14 -0500] CPS: which is unhelpful
[2013-11-08 16:39:24 -0500] stormerider: CPS: if you run ohai manually on the node you can see all the data collected. or view the node via the chef web ui after a run
[2013-11-08 16:41:53 -0500] jt123: Hi!  Why is it that windows_package detects the software version has a newer version, but it doesn't install or upgrade on the node?
[2013-11-08 16:47:36 -0500] stormerider: so i see that the nagios cookbook supports icinga at this point, but there doesn't seem to be anything in the docs about how to do this... anyone have a guide?
[2013-11-08 16:48:03 -0500] cwj: jt123: im not familiar with windows_package specifically, but i know most package providers have an upgrade action which is distinct from the install action
[2013-11-08 16:48:23 -0500] cwj: jt123: so maybe you need to use action [:install, :upgrade] when you want a package to be upgraded automatically
[2013-11-08 16:49:39 -0500] jt123: I tried both.  None was working.
[2013-11-08 16:50:44 -0500] jt123: When I used "action :install", it recognized the command, but didn't do anything because the older version of Notepad++ (as an example) is already.
[2013-11-08 16:51:33 -0500] jt123: When I used "action :upgrade", it says this in the log: "Option action must be equal to one of: nothing, install, remove, install!  You passed :upgrade."
[2013-11-08 16:51:59 -0500] asd_: Hey. I did template with such code( http://pastebin.com/HLgRB6Bg ), it works ok, but file rewrite again and again with chef-client run. What I did wrong?
[2013-11-08 16:52:23 -0500] cwj: jt123: sounds like you may be using an older version of the windows cookbook? https://github.com/opscode-cookbooks/windows/blob/master/providers/package.rb shows :upgrade is a valid action
[2013-11-08 16:54:19 -0500] cwj: ah but the resource doesnt list it as a valid action https://github.com/opscode-cookbooks/windows/blob/master/resources/package.rb#L21
[2013-11-08 16:54:23 -0500] cwj: maybe thats a bug
[2013-11-08 16:54:29 -0500] bean: asd_: it should only write the file if something in that template needs changing, maybe its how you're calling the template resource?
[2013-11-08 16:56:46 -0500] jt123: Let me try with windows 1.11.0 now.
[2013-11-08 16:57:07 -0500] asd_: bean, I'd like to. Here is the piece of recipe http://pastebin.com/GnEkS9ss
[2013-11-08 16:58:24 -0500] bean: hmm, no, that looks ok to me asd_
[2013-11-08 16:59:06 -0500] jt123: Windows 1.11.0 cookbook has the same error when I used "action :upgrade", it says this in the log: "Option action must be equal to one of: nothing, install, remove, install!  You passed :upgrade."
[2013-11-08 16:59:13 -0500] cannonball: When running a sysctl cookbook (the opscode version) from my common::sysctl cookbook, is there a way to tell it to use my attributes at common/attributes/sysctl.rb to override sysctl/attributes/default.rb ?  I know I can include_attributes inside of another attribute file, but I need to set it from where I am calling it: in common::sysctl.  I'm a little confused about this, I think.
[2013-11-08 17:00:48 -0500] jt123: I did see the ":upgrade" option in the both windows 1.84 and windows 1.11.0 cookbook, but it doesn't work.
[2013-11-08 17:01:16 -0500] coderanger: brucelee: I had passed out by then I think
[2013-11-08 17:01:22 -0500] asd_: bean, thank you. will investigate
[2013-11-08 17:02:27 -0500] cwj: jt123: scroll up, i mentioned it looks like a bug
[2013-11-08 17:02:43 -0500] cwj: jt123: resource/package.rb does not list :upgrade in actions on line 21
[2013-11-08 17:10:32 -0500] jt123: cwj, so I can add :upgrade to it then?
[2013-11-08 17:10:50 -0500] cwj: jt123: yep that should make the action available
[2013-11-08 17:11:13 -0500] jt123: thanks.  let me try.  Will geet back.
[2013-11-08 17:21:58 -0500] stormerider: Is there a schedule for the summit next week, by the way? Looking forward to it
[2013-11-08 17:24:43 -0500] cwj: stormerider: the summit is operated as an open spaces event, so theres no schedule per se but people are brainstorming topics already https://wiki.opscode.com/display/chef/Suggestions+for+2013+Community+Summit
[2013-11-08 17:24:58 -0500] stormerider: cwj: thanks
[2013-11-08 17:28:40 -0500] jt123: cwj: I added ":upgrade" to resource/package.rb.  It recognized the older Notepad++ version 6.4.3, when it tried to upgrade, it had this error: "windows_package[Notepad++] (note-plus::default line 10) had an error: NameError: Cannot find a resource for upgrade_package on windows version 6.1.7601"
[2013-11-08 17:30:41 -0500] cwj: jt123: well, good luck :) i dont have any windows systems to test with so the best i can do is put you on the right track
[2013-11-08 17:31:00 -0500] jt123: thanks!
[2013-11-08 18:11:57 -0500] a13x212: how can you force a service to restart immediately
[2013-11-08 18:13:44 -0500] gchristensen: a13x212: yes, notify restart :immediately
[2013-11-08 18:44:14 -0500] dgarstang3: *sigh* Ok. I have cookbook A. It sets some attributes in default/attributes.rb. Cookbook B includes it and does a node.set on an atribute to override it. When cookbook A runs, which value should it get?
[2013-11-08 18:44:49 -0500] jbz: dgarstang3: If you're overriding the attributes using node.set from a recipe, it will depend on what the run order is.
[2013-11-08 18:45:28 -0500] jbz: dgarstang3: If cookbook A only runs due to the include, and the node.set happens before the include statement, it should get whatever cookbook B set in the attribute.
[2013-11-08 18:46:18 -0500] dgarstang3: jbz: Well, the node.set is after cookbook B includes cookbook A. I mean, it makes no sense to me that would work, but someone said chef evaluates all attributes BEFORE it runs
[2013-11-08 18:46:51 -0500] jbz: Chef evaluates *attributes*, but node.set doesn't fire until execution, and the attribute evaluation happens prior to that phase.
[2013-11-08 18:47:07 -0500] jbz: This is a ramification of using node.set to set an attribute rather than a role/attrib file/etc.
[2013-11-08 18:47:11 -0500] dgarstang3: jbz: so, i have to put the node.set before the include_recipe ?
[2013-11-08 18:47:18 -0500] jbz: Yep.  At least as far as I understand it.
[2013-11-08 18:47:27 -0500] dgarstang3: jbz: well it doesnt work when I put it in attributes/default either
[2013-11-08 18:47:38 -0500] jbz: you can't do node.set in an attributes file.
[2013-11-08 18:47:47 -0500] dgarstang3: jbz: No, I used override[]
[2013-11-08 18:47:53 -0500] jbz: that won't matter.
[2013-11-08 18:47:59 -0500] dgarstang3: jbz: que?
[2013-11-08 18:48:25 -0500] jbz: Attributes are evaluated at the start of the run.  This means that attributes in attribute files, attributes in roles and node records and environments, are all parsed and handled.
[2013-11-08 18:48:26 -0500] jbz: But
[2013-11-08 18:48:38 -0500] jbz: that process *does not* take into account node.set methods from recipe code.
[2013-11-08 18:49:00 -0500] jbz: So even if you use 'override' on the attribs file, that just means 'make sure this is the highest-precedent setting in the evaluation phase.'
[2013-11-08 18:49:13 -0500] jbz: The node.set, later, ignores the entire attrib eval phase and just writes.
[2013-11-08 18:49:27 -0500] dgarstang3: jbzL I would lurve docs on this.
[2013-11-08 18:49:54 -0500] dgarstang3: jbz: but, putting a node.set in the recipe followed by an include_recipe seems completely screwed to me.
[2013-11-08 18:50:16 -0500] jbz: okay so
[2013-11-08 18:50:21 -0500] jbz: normally, you don't use node.set
[2013-11-08 18:50:29 -0500] jbz: you do everything in attribute files and etc.
[2013-11-08 18:50:37 -0500] jbz: So by the time your code starts running, all the attributes are where you want them.
[2013-11-08 18:50:39 -0500] jbz: but
[2013-11-08 18:50:40 -0500] dgarstang3: jbz: but, it doesn't work in an attributes file.
[2013-11-08 18:50:54 -0500] jbz: Right.
[2013-11-08 18:51:17 -0500] jbz: The attributes file is evaluated prior to the part of the chef run where recipe code is executed.
[2013-11-08 18:51:46 -0500] jbz: You can't put arbitrary code in the attributes file because not all the methods etc. are available yet, as I understand it.
[2013-11-08 18:52:20 -0500] jbz: The only reason to use node.set is when you have an attribute setting that needs to happen *after the execution has started*, usually, because that's the only time the information you need is available.
[2013-11-08 18:52:29 -0500] jbz: In your case
[2013-11-08 18:52:37 -0500] jbz: since you're overriding one cookbook's attributes with another
[2013-11-08 18:52:39 -0500] dgarstang3: jbz: *sigh* Ok, let's try this...
[2013-11-08 18:52:44 -0500] jbz: that's what you need to do.
[2013-11-08 18:52:51 -0500] dgarstang3: jbz: sorry, what do I need to do?
[2013-11-08 18:53:01 -0500] jbz: So just make sure the node.set is before the include statement, in the main recipe code.
[2013-11-08 18:53:01 -0500] holms: still the same problem )))))?
[2013-11-08 18:53:10 -0500] jt123: I downloaded the latest IIS cookbook, and uploaded to the Chef server.  When I clicked on the IIS cookbook (http), I got this error: "ERROR: undefined method `close!' for nil:NilClass".  Does anyone experience this?
[2013-11-08 18:54:01 -0500] dgarstang3: jbz: that's amalgous to a python script that sets a value and then does an import. Err...
[2013-11-08 18:55:06 -0500] jbz: dgarstang3: I'm not a python person.  The 'proper' way to do this and avoid this is by not just including a cookbook whose attribs you need to override, but rewriting the included cookbook to be a lwrp or resource, which accepts its required data as part of the call.
[2013-11-08 18:55:18 -0500] jbz: (by 'proper' I mean 'the way that avoids this.)
[2013-11-08 18:55:54 -0500] jbz: But anyway, I'm not a Srs Chef().  I just use the thing here and there. :-)
[2013-11-08 19:00:48 -0500] supershabam: Anybody had experience with chef and lxc? Trying to decide between running chef only on the host lxc server, or run chef inside each of the lxcs
[2013-11-08 19:02:17 -0500] dgarstang3: jbz: I'm sure that approach will also hit a wall when the simply documentation fails to accurately address the complexities of the real world problem I am trying to solve.
[2013-11-08 19:02:26 -0500] CPS: how do i access a node's OS version from a recipe? node["os"] yields only "windows" which is unhelpful
[2013-11-08 19:03:17 -0500] dgarstang3: jbz: besides, I don't think that works here. Both cookbooks aometimes need to be toegther, and sometimes broken apart, depending on context
[2013-11-08 19:03:42 -0500] jbz: dgarstang3: I don't know anything about what you're trying to do, so won't/can't comment.
[2013-11-08 19:04:50 -0500] dgarstang3: jbz: zookeeper and kafka. zookeeper needs to be able to run on it's own. However, kafka needs it. When kafka needs it, both run on the same box. That means, zookeeper which normally uses 100% of the lvm space, only gets 50%.... overridden by kafka
[2013-11-08 19:06:25 -0500] jbz: dgarstang3: And you don't want to have to manually enter role attributes for those two telling them how much space they're allowed?
[2013-11-08 19:06:26 -0500] dgarstang3: jbz: which fundamentally comes down to one cookbook including another and overriding it's attributes, but there's zero documentation on that.
[2013-11-08 19:06:46 -0500] dgarstang3: jbz: No.
[2013-11-08 19:07:20 -0500] dgarstang3: jbz: maybe? not sure I understood your question
[2013-11-08 19:07:52 -0500] dgarstang3: jbz: maybe I should just go ghetto and make the kafka cookbook do everything the zookeeper does. ie copy and paste
[2013-11-08 19:08:24 -0500] jbz: So you want the kafka cookbook to override the zookeeper cookbooks attrib for how much space to use?
[2013-11-08 19:08:38 -0500] dgarstang3: jbz: Yes
[2013-11-08 19:09:06 -0500] jbz: Does the zookepeer cookbook figure out how much space to use based on code (checking disk size, etc.) or does it accept an attribute specifying that space?
[2013-11-08 19:09:45 -0500] dgarstang3: jbz: it was just an attribute, set for now in attributes.rb. That was passed directly to the lwrp that creates the volume.
[2013-11-08 19:10:13 -0500] jbz: If it accepts an attribute telling it how much space to use, then what I would do is have the kafka cookbook do the math to figure out which cookbook gets what, then use node.set to set the zookeeper cookbook's attribute for what it's allowed, right before include-ing the zookeeper cookbook.
[2013-11-08 19:10:16 -0500] dgarstang3: jbz: works fine when it's just zookeeper. it pulls 100% from the attribute, and creates an lvm that uses 100% of the vg
[2013-11-08 19:10:58 -0500] dgarstang3: jbz: that approach eh
[2013-11-08 19:11:28 -0500] jbz: That way, if kafka isn't calling it, the zookeeper cookbook will use the normal attrib value
[2013-11-08 19:11:43 -0500] jbz: if kafka calls it, which is the 'special case', then it's the kafka cookbook's responsibility to handle the changes.
[2013-11-08 19:12:22 -0500] jbz: The cookbook which calls the second cookbook, in my opinion, is responsible for handling things like this, since it's the one with higher precedence and thus control of the situation.
[2013-11-08 19:12:34 -0500] dgarstang3: jbz: but, your saying that has to be with node.set. Won't work if set in kafka's attributes file?
[2013-11-08 19:13:34 -0500] jbz: Well, you *might* be able to set the zookeeper namespace attribute in the kafka attrib file, with a higher precedence, I guess, but that assumes you'll always know (without looking at the environment) what the value should be.
[2013-11-08 19:14:37 -0500] jbz: I try to avoid setting other cookbook's attributes in my cookbooks' attrib files, though.  Not saying it's a required pattern, but it's something I avoid because it tends to confuse the hell out of me later when I try to debug stuff where there's one of these 'magic interactions.'
[2013-11-08 19:14:46 -0500] dgarstang3: jbz: that's what I thouht I did. I set it as default[] in zookeeper, and the same value as overrides[] in kafka, but no luck. It used the original zookeeper value of 100%
[2013-11-08 19:14:50 -0500] jbz: Sometimes I use *shared* namespaces.
[2013-11-08 19:15:13 -0500] jbz: What attribute did you set?
[2013-11-08 19:15:18 -0500] dgarstang3: jbz: i guess I could do it in a role, but it's really unclear to me what to put where
[2013-11-08 19:15:54 -0500] spox: supershabam: ohai
[2013-11-08 19:16:07 -0500] dgarstang3: jbz: the same one. So... in zookeepers attributes I have default['bc-zookeeper']['data_volume_lvm_size'] = "100%VG" and in kafka's attributes.rb I had override['bc-zookeeper']['data_volume_lvm_size'] = "50%VG"
[2013-11-08 19:16:40 -0500] dgarstang3: based on the docs, you'd think that should work. After all, overrides overrides default, right?
[2013-11-08 19:18:19 -0500] jbz: And you don't have anything set in roles or environments?
[2013-11-08 19:18:26 -0500] jbz: (er, don't have that attribute being set)
[2013-11-08 19:18:41 -0500] dgarstang3: jbz: correct
[2013-11-08 19:19:12 -0500] jbz: Then I agree, something is going wrong.
[2013-11-08 19:20:19 -0500] jbz: And at the end of the run, the attribute shows "100%VG"?
[2013-11-08 19:20:31 -0500] jbz: (i.e. on the node record on the server)
[2013-11-08 19:20:48 -0500] supershabam: spox: how can I use ohai for lxc goodness?
[2013-11-08 19:20:58 -0500] jbz: oh wait hmmmm
[2013-11-08 19:21:08 -0500] jbz: is zookeeper in the runlist, or only in the include?
[2013-11-08 19:21:17 -0500] spox: supershabam: not sure what context you mean
[2013-11-08 19:21:39 -0500] spox: but running chef on the host and treating the containers as guests with chef inside is pretty great
[2013-11-08 19:21:51 -0500] dgarstang3: jbz, well, i know it didn't work because all the vg space has been used by the zookeeper disk. As for showing, well I put a log statement before the zookeeper resource that creates the lvm to debug it and the log dodesn't run. Another mystery of chef, commands don't always run in a sequential order.
[2013-11-08 19:22:23 -0500] dgarstang3: jbz: zoeekeeper is only in the include_recipe from kafka, not the run list
[2013-11-08 19:22:36 -0500] jbz: The log statement probably ran at the start of the run, during the compilation phase.
[2013-11-08 19:22:57 -0500] supershabam: spox: how many containers have you run on a single machine each with chef running inside? (thinking about doing ~100 containers)
[2013-11-08 19:23:25 -0500] jbz: dgarstang3: If you use a log *resource* it will get run during execution, i.e. right before the next resource in the list
[2013-11-08 19:23:32 -0500] spox: supershabam: it's completely dependent on the resources available to the machine you're running it on, and what's running inside them
[2013-11-08 19:23:35 -0500] dgarstang3: jbz: not like that isn't confusing or anything...
[2013-11-08 19:23:52 -0500] jbz: dgarstang3: I think it would help you to reread the 'Anatomy of a Chef run' doc
[2013-11-08 19:23:52 -0500] dgarstang3: jbz: don't see it in my vagrant log output
[2013-11-08 19:24:03 -0500] jbz: oh are you running this in chef-solo?
[2013-11-08 19:24:07 -0500] jbz: on vagrant?
[2013-11-08 19:24:07 -0500] dgarstang3: jbz: i keep reading that. It doesn;t make much sense to me.
[2013-11-08 19:24:17 -0500] dgarstang3: jbz: vagrant, so yes
[2013-11-08 19:24:57 -0500] jbz: Heh I'm not sure I'm going to be any help if that doc doesn't help, as I mostly just refer to it.
[2013-11-08 19:25:07 -0500] supershabam: spox: thanks for the insight. chef inside lxc smells magical.
[2013-11-08 19:25:27 -0500] spox: supershabam: no more magical than it running in a vm
[2013-11-08 19:26:23 -0500] supershabam: magical all the way down
[2013-11-08 19:26:31 -0500] dgarstang3: jbz: I'd probably be asking less questions in here if the narrow brain microbe that told a certain company who was doing chef training last week that I wasn't welcome hadn't done so. Fine, they get to keep me asking basic questions for longer.
[2013-11-08 19:27:02 -0500] jbz: *shrug* not touching that.
[2013-11-08 19:32:42 -0500] midnitekiller: how do you create a cron item that only run once after reboot?
[2013-11-08 19:34:32 -0500] gchristensen: midnitekiller: you could probably set minute to "@reboot", and all the others to "" (empty string)
[2013-11-08 19:35:16 -0500] midnitekiller: gchristensen. yep did that. But does that mean that it always gets execute every reboot?
[2013-11-08 19:35:41 -0500] midnitekiller: Another thing with using @reboot. Everytime I do knife run, it adds an entry in the crontab
[2013-11-08 19:35:52 -0500] gchristensen: midnitekiller: like ... on next reboot, do XYZ, but not the one after that?
[2013-11-08 19:36:04 -0500] midnitekiller: wasn't there something like action :update?
[2013-11-08 19:36:47 -0500] midnitekiller: gchristensen, yep... only run once after reboot. *once* and not again at all
[2013-11-08 19:37:50 -0500] gchristensen: midnitekiller: I don't think there is a way to do that with cron.
[2013-11-08 19:38:09 -0500] gchristensen: midnitekiller: you could (in your script that is run by cron) touch a file and say if this file exists , don't run.
[2013-11-08 19:38:57 -0500] midnitekiller: yep, on that. was hoping there's actually a "run-once" boot way for linux
[2013-11-08 19:39:29 -0500] midnitekiller: btw, about cron resource always adding the cron entry every run. how about it?
[2013-11-08 19:41:53 -0500] jbz: midnitekiller: You could put the cron entry in /etc/cron.d/ and have the job remove that file...?
[2013-11-08 19:44:23 -0500] supercom32: When I execute something like: knife winrm 'platform:windows' 'dir' -x userName -P password -a ipaddress, I keep getting back  "FATAL: 1 node found, but does not have the required attribute <ipaddress>". Any ideas why? I tried without specifying an attribute and it's the same error ( more or less)
[2013-11-08 19:44:24 -0500] supercom32: Any ideas?
[2013-11-08 19:44:33 -0500] midnitekiller: jbz, nice. thanks on that
[2013-11-08 19:44:34 -0500] supercom32: Maybe related to https://tickets.opscode.com/browse/KNIFE-222 ?
[2013-11-08 19:44:52 -0500] jbz: midnitekiller: cheers
[2013-11-08 19:52:28 -0500] CPS: to answer my own question, node["os_version"] gives the version number
[2013-11-08 20:01:29 -0500] gchristensen: what does data_bag_item return if a data bag does not exist by that name?
[2013-11-08 20:01:42 -0500] CPS: is it possible to alias the '_default' environment to something else?
[2013-11-08 20:16:14 -0500] matticulous: hoping this is something simple or boneheaded: i am starting a cookbook. trying to install java using the opscode java cookbook. it defaults to jdk_version 6; i'm looking for 7. in my cookbook, my attributes file specifies override['java']['jdk_version'] = '7'. no matter what i've tried, it continues to install version 6. any help on what i could be missing?
[2013-11-08 20:18:06 -0500] dgarstang3: matticulous: i have just what ya need. :)
[2013-11-08 20:18:43 -0500] matticulous: dgarstang3: is it bourbon? b/c i've tried that too. :)
[2013-11-08 20:18:58 -0500] dgarstang3: hehe. put this in your attributes.rb http://pastebin.com/qzpZBvyr
[2013-11-08 20:19:51 -0500] dgarstang3: you gotta set the 'java']['openjdk_packages'] as well.... for some reason related to the whole compile/runtime thing that I don't understand and are documented really badly. :)
[2013-11-08 20:20:41 -0500] spox: it's because composite attributes set in the attributes file are evaluated prior to overrides coming from roles, recipes, etc
[2013-11-08 20:20:58 -0500] spox: so any composite attributes you see using the value you are changing, will need to be changed as well
[2013-11-08 20:21:06 -0500] dgarstang3: there ya go
[2013-11-08 20:21:20 -0500] spox: ideally, those composite attributes should be built at compile time withing a recipe
[2013-11-08 20:21:27 -0500] spox: but "in a perfect world" and all that
[2013-11-08 20:22:40 -0500] matticulous: giving it a shot...
[2013-11-08 20:29:10 -0500] matticulous: spox: dgarstang3: that did it. thanks a lot for the help!
[2013-11-08 20:33:51 -0500] dgarstang3: matticulous: Woo!
[2013-11-08 21:08:55 -0500] programmerq: https://wiki.opscode.com/display/chef/Code+Review - it looks like there's a cookbook code review today. Am I doing my timezone calculations wrong, or was it set to start 8 minutes ago?
[2013-11-08 21:10:53 -0500] programmerq: ah, looks like someone tweeted saying it isn't happening today. bummer.
[2013-11-08 21:14:48 -0500] MattStratton: really stupid question about chef-minitest-handler when used with berkshelf/vagrant if anyone has thoughts...
[2013-11-08 21:15:17 -0500] MattStratton: I'm kind of being dumb about it, but I cannot figure out where to put a puts output in the test (trying to get at the value of a variable to see what it is )
[2013-11-08 21:15:59 -0500] spox: MattStratton: Chef::Log.warn "VARIABLE VALUE: #{your_var}"
[2013-11-08 21:16:18 -0500] spox: MattStratton: Chef::Log.warn "VARIABLE VALUE: #{your_var.inspect}"
[2013-11-08 21:16:26 -0500] spox: i guess would be more betterly accurate
[2013-11-08 21:17:13 -0500] MattStratton: so like this? describe 'xm-demo-cookbook::default' do
[2013-11-08 21:17:14 -0500] MattStratton:   Chef::Log.warn "VARIABLE VALUE: #{group("Guests")}"
[2013-11-08 21:17:28 -0500] MattStratton: if I want to see what is being returned by that object?
[2013-11-08 21:17:45 -0500] MattStratton: basically I have a must_exist on it, and it fails, even though the group is there (btw, this is a Windows guest)
[2013-11-08 21:25:43 -0500] programmerq: MattStratton: I think I've had some success putting a puts statement inside an it block in my minitest-handler tests
[2013-11-08 21:25:48 -0500] programmerq: it's been a while since I've tried it
[2013-11-08 21:26:22 -0500] programmerq: you could also try assert_equal, which I believe gives you the (string) output of whatever you're comparing should it not match what you expect.
[2013-11-08 21:51:57 -0500] josephholsten: anyone tried using knife-windows under ruby 2.0?
[2013-11-08 21:52:20 -0500] josephholsten: getting CRAzy quoting issues
[2013-11-08 22:08:26 -0500] doomviking: not touching 2 for a while
[2013-11-08 22:16:40 -0500] dgarstang3: i tell ya, chef server accepting uploaded cookbooks, complete with new version number and then throwing the rest away is a wee bit irritating.
[2013-11-08 22:18:33 -0500] bean: why are you dgarstang3 now,
[2013-11-08 22:18:38 -0500] bean: you were dgarstang
[2013-11-08 22:18:40 -0500] bean: then dgarstang2
[2013-11-08 22:18:47 -0500] dgarstang3: bean: I don't.... know... it's not me. :)
[2013-11-08 22:18:59 -0500] bean: ?
[2013-11-08 22:18:59 -0500] dgarstang3: nope, not it's working. dunno what I did
[2013-11-08 22:19:06 -0500] dgarstang3: magic!
[2013-11-08 22:19:17 -0500] doomviking: PEBKAC
[2013-11-08 22:19:41 -0500] dgarstang3: doomviking: doubt it. did the same thing 3 times
[2013-11-08 22:26:38 -0500] storme_out: bean: possibly because they keep getting blocked by people :P
[2013-11-08 22:27:05 -0500] bean: storme_out: I mean, I don't doubt it.
[2013-11-08 22:31:30 -0500] jhujhiti: "DEBUG: Loading Recipe yum::remi via include_recipe" - then why doesn't the code inside this recipe ever run?
[2013-11-08 23:04:31 -0500] Urocyon: I have a chef server that spans a couple of data centers.  Each data center has a few environments.  I'd like to limit some searches to servers within a particular data center.  Any suggestions on a good way to handle?
[2013-11-08 23:05:16 -0500] jbz: Just have an attribute for 'data_center'?
[2013-11-08 23:05:22 -0500] jbz: put it in the environments?
[2013-11-08 23:05:28 -0500] Urocyon: yeah, that was my first thought.
[2013-11-08 23:05:44 -0500] Urocyon: For it to persist I guess it would have to be an override attribute.
[2013-11-08 23:05:50 -0500] jbz: no, why?
[2013-11-08 23:05:57 -0500] jbz: oh
[2013-11-08 23:05:59 -0500] jbz: env, right
[2013-11-08 23:06:38 -0500] jbz: Actually, it can be default, right? It'll always get applied from the env.
[2013-11-08 23:06:50 -0500] jbz: As long as nothing else messes with it.
[2013-11-08 23:07:23 -0500] Urocyon: yeah, but I want to search for nodes belonging in a particular data center if it doesn't persist would it still be searchable?
[2013-11-08 23:08:26 -0500] Urocyon: I don't think defaults show up in node attributes when you query like that.
[2013-11-08 23:13:46 -0500] Urocyon: I could maybe add a data center role.
[2013-11-08 23:14:02 -0500] Urocyon: That's not a bad idea.
[2013-11-08 23:14:30 -0500] Urocyon: makes for an easy search.
[2013-11-08 23:21:41 -0500] zaargy: i need to programatically bump up an attribute in one of the attribute files of my application. what is the best/least hacky way to achieve this?
[2013-11-08 23:22:01 -0500] zaargy: of course i could use a reg exp  or such but could i read it as some chef type and then write it back out or something?
[2013-11-08 23:24:05 -0500] zaargy: i guess i might start digging through the source
[2013-11-08 23:37:54 -0500] Cope: zaargy: what are you actually trying to do?
[2013-11-08 23:38:46 -0500] Cope: it usually helps if you explain the problem you're trying to solve, as there may be alterative (and easier) implementations
[2013-11-08 23:40:05 -0500] zaargy: i am developing an app and when i do a new build of that app, i want to seed the cookbook for that app with the version
[2013-11-08 23:40:09 -0500] zaargy: from the build
[2013-11-08 23:40:15 -0500] zaargy: which i am then uploading to my dev environment
[2013-11-08 23:40:22 -0500] zaargy: i onyl you can use attribute overrides and such
[2013-11-08 23:40:27 -0500] zaargy: or put it in a databag
[2013-11-08 23:40:48 -0500] zaargy: but updating the cookbook is my preference for the versioning
[2013-11-08 23:42:12 -0500] zaargy: in any case, i've hacked up something that works now
[2013-11-08 23:44:30 -0500] zaargy: so now when i make a change to my app the cookbook is updated with the version, commited back to git, then uploading to my dev environment, and constrained in the enviroment file which is also commited back to git
[2013-11-08 23:48:51 -0500] Urocyon: I'm thinking longterm I might try using an ohai plugin to try to discover the datacenter a node is in and set a datacenter attribute appropriately.
[2013-11-08 23:49:14 -0500] Urocyon: Short term I may kluge this by setting the datacenter attribute with a role.
[2013-11-08 23:55:13 -0500] jmickle: what IDE's do you guys use with ruby
[2013-11-08 23:55:32 -0500] garrett__2: vim and rubymine
[2013-11-08 23:55:38 -0500] garrett__2: depending on the size of the project
[2013-11-08 23:55:41 -0500] doomviking: vim :)
[2013-11-08 23:56:05 -0500] garrett__: vim and rubymine, depending on the size of the project.
[2013-11-08 23:56:24 -0500] jmickle: I'm soo tired of eclipse crashing
[2013-11-08 23:56:32 -0500] jmickle: how does rubymine do with the chef repo
[2013-11-08 23:56:37 -0500] jmickle: + multiple projects in general open
[2013-11-08 23:56:52 -0500] garrett__: just fine. it just looks at it like another project.
[2013-11-08 23:57:01 -0500] jmickle: ok
[2013-11-08 23:57:37 -0500] garrett__: i switch between that and the codebase that my chef repos supports the infrastructure for without any issues/annoyances
[2013-11-08 23:57:47 -0500] Cope: jmickle: emacs ;)
[2013-11-08 23:57:53 -0500] jmickle: haha
[2013-11-08 23:58:03 -0500] jmickle: I've done this for far too long to try and waste my time on emacs :-P
[2013-11-08 23:58:34 -0500] Cope: I think you'll find a significant number of opscoders are emacsers too :)
[2013-11-08 23:58:44 -0500] jmickle: good for all of you :-P
[2013-11-08 23:58:51 -0500] garrett__: but honestly, i only really use rubymine because of the debugger. i don't know if i'd ever use a fullblown ide for managing chef cookbooks
[2013-11-08 23:58:52 -0500] jmickle: i can write the same code with a lot less pain
[2013-11-08 23:58:53 -0500] jmickle: haha
[2013-11-08 23:59:15 -0500] jmickle: i guess my problem is
[2013-11-08 23:59:19 -0500] jmickle: i usually have 6-10 repos open
[2013-11-08 23:59:22 -0500] jmickle: all different languages
[2013-11-08 23:59:29 -0500] jmickle: i just want to be able to switch between them easily
[2013-11-08 23:59:34 -0500] jmickle: and still have my auto sensing

[2013-06-27 00:00:01 -0400] Otterley: llakey, read the vagrant docs, you just pass the log level into chef-client
[2013-06-27 00:00:14 -0400] sfalcon: Otterley: percentage wise, quite good. Small number of orgs see some issues which we are investigating and working on.
[2013-06-27 00:00:26 -0400] Otterley: cool.  I'm going to assume you fixed it since you eat your own dogwood :D
[2013-06-27 00:00:29 -0400] Otterley: *dogfood
[2013-06-27 00:00:32 -0400] Schuyler: Any ideas about this one?
[2013-06-27 00:00:34 -0400] Schuyler: 2013-06-26_23:59:58.18155 {"init terminating in do_boot",{{badmatch,{aborted,{"Bad transform function",rabbit_durable_exchange,#Fun<rabbit_upgrade_functions.3.132526717>,'rabbit@ops',{function_clause,[{rabbit_upgrade_functions,'-internal_exchanges/0-fun-0-',[{exchange,{resource,<<1 byte>>,exchange,<<0 bytes>>}
[2013-06-27 00:01:11 -0400] Schuyler: that would be RabbitMQ failing to start after I attempted to fix the permissions on /var/{log,lib}/rabbitmq
[2013-06-27 00:01:41 -0400] sfalcon: Schuyler: what's the context here. Setting up a new server and running into troubles or already been running or ??
[2013-06-27 00:02:03 -0400] llakey: Otterley: in the Vagrant docs I saw a way to do that with Puppet but it looked like there was a ticket open for adding that in the future for Chef i.e. https://github.com/mitchellh/vagrant/pull/1353
[2013-06-27 00:04:03 -0400] sfalcon: Otterley: pretty sure we fixed the hang issue in terms of not blocking the server. Fixing the root cause of the hang in the re-implemented solver is trickier.
[2013-06-27 00:05:11 -0400] Otterley: resolvers are hard.
[2013-06-27 00:05:23 -0400] sfalcon: Yar
[2013-06-27 00:05:39 -0400] Otterley: I think I saw once a proof that it's an NP-complete problem.
[2013-06-27 00:06:06 -0400] Schuyler: sfalcon: Server's been running. It has a Chef node registered but I actually have no idea if my ops guy (who is away with a family issue) has made other modifications to the Chef server that aren't captured in its recipes/run list/etc
[2013-06-27 00:06:34 -0400] sfalcon: Well improve the edges as we go, but I think the shape of the problem needs to change -- and really should change such that we don't need a solver -- not (only) because solvers are hard, but because complex cookbook deps is not a scalable way to manage infra.
[2013-06-27 00:06:41 -0400] Schuyler: I probably should've waited for him to resurface, since he set all this up, but you know it is. The work must continue. So I ran "chef-client" on the server and *poof*
[2013-06-27 00:07:13 -0400] Schuyler: it _looks_ like the opscode chef-server package comes with its own version of rabbitmq?
[2013-06-27 00:07:18 -0400] sfalcon: Schuyler: I see.
[2013-06-27 00:07:40 -0400] Schuyler: sfalcon: ... yeah.
[2013-06-27 00:07:56 -0400] sfalcon: Schuyler: absolutely. the omnibus package is self contained. And rabbitmq is included. Any chance you've decided to go outside of that and mix in your own versions of components?
[2013-06-27 00:08:29 -0400] Schuyler: sfalcon: I think that's exactly what happened. I didn't decide -- but when I ran chef-client on the Chef server, it definitely tried to install a rabbitmq package
[2013-06-27 00:08:43 -0400] Schuyler: so I think the run list for this server must be broken.
[2013-06-27 00:09:14 -0400] Schuyler: probably the dude who set all of this up could've told me that if he hadn't been on a transatlantic flight, but again, you know how it is
[2013-06-27 00:09:34 -0400] sfalcon: O_o hmm. that sounds fun. :)
[2013-06-27 00:09:54 -0400] sfalcon: Can you determine which rabbitmq is running (or trying to run)?
[2013-06-27 00:09:58 -0400] Schuyler: so I removed the rabbitmq package and re-ran 'dpkg -i /var/cache/chef/chef-server*deb'
[2013-06-27 00:10:01 -0400] Otterley: smells like an HR problem ;)
[2013-06-27 00:10:17 -0400] Schuyler: hehe well. the guy's got an illness in the family, what am I supposed to do.
[2013-06-27 00:11:20 -0400] Otterley: first thing, kill any chef client running on that server.
[2013-06-27 00:11:22 -0400] Schuyler: obviously I need redundancy in staff knowledge on top of systems redundancy.
[2013-06-27 00:11:29 -0400] Otterley: you don't want it redoing whatever damage it's causing
[2013-06-27 00:11:41 -0400] Otterley: any cron jobs related to it, any runit services, etc.
[2013-06-27 00:11:49 -0400] Otterley: (that are chef-client, not chef-server)
[2013-06-27 00:11:58 -0400] Schuyler: looks like chef-client wasn't running at all until I dipped my oar in.
[2013-06-27 00:12:44 -0400] Schuyler: huzzah! running 'chef-client' on another server works.
[2013-06-27 00:12:51 -0400] Schuyler: so I've at least got my working setup back.
[2013-06-27 00:12:59 -0400] Otterley: so are you good now?
[2013-06-27 00:13:06 -0400] Schuyler: reconfiguring the Chef server is just going to have wait until dude gets back
[2013-06-27 00:13:43 -0400] Schuyler: Otterley, sfalcon: Yeah, it was clearly the redundant RabbitMQ server that was b0rking things. Thanks for the pointers on where to look for diagnosis.
[2013-06-27 00:13:56 -0400] Schuyler: seriously, I really appreciate the patient suggestions :)(
[2013-06-27 00:14:03 -0400] Schuyler: s/)$//
[2013-06-27 00:14:08 -0400] Otterley: chef server is best run on an isolated server, not managed with chef itself other than user management
[2013-06-27 00:14:23 -0400] Schuyler: hmm, that seems clear.
[2013-06-27 00:14:44 -0400] Otterley: "whatever can be done for you automatically can be done to you automatically"
[2013-06-27 00:14:47 -0400] Schuyler: this all started because I had the silly notion to run our system integration tests on the same host.
[2013-06-27 00:15:00 -0400] Schuyler: perhaps that was a bad idea!
[2013-06-27 00:15:11 -0400] Schuyler: I mean, run them _from_ the same host.
[2013-06-27 00:15:23 -0400] Schuyler: anyway. disaster has been averted for one more day.
[2013-06-27 00:15:40 -0400] Schuyler: thanks again!
[2013-06-27 00:20:23 -0400] llakey: Otterley: `chef.log_level = "debug"` worked fine. there's definitely a lot more interesting log output now. i'm not sure what that Vagrant PR is for. nm.
[2013-06-27 00:40:22 -0400] pixlpushr: using berkshelf. getting this error when i run "berks upload": Ridley::Errors::HTTPBadRequest: {"error":["Invalid element in array value of 'files'."]}
[2013-06-27 00:40:47 -0400] ivey: do you have some weird files in files dir?
[2013-06-27 00:41:40 -0400] pixlpushr: nope..nothing that was added recently
[2013-06-27 00:42:12 -0400] ivey: hmm
[2013-06-27 00:42:19 -0400] pixlpushr: but not sure what a "weird file" would qualify as...
[2013-06-27 00:43:01 -0400] pixlpushr: i have some ssh config files and a config file for twurl (twitter gem)
[2013-06-27 00:44:20 -0400] pixlpushr: i was on berkshelf 1.4. upgraded to 2.0.5, but error still exists
[2013-06-27 00:45:02 -0400] ivey: that error is coming from chef server
[2013-06-27 00:45:52 -0400] ivey: is the cookbook open source where i could look at it?
[2013-06-27 00:47:06 -0400] pixlpushr: ivey: unfortunately not, company keeps it privatehmm. trying to think what changed
[2013-06-27 01:07:07 -0400] BrianJ: Having issues access a hash of hashed can anyone tell me what im doing wrong?
[2013-06-27 01:07:10 -0400] BrianJ: http://pastie.org/8084397
[2013-06-27 01:08:45 -0400] Otterley: consider using string keys instead of symbols, make your life easier
[2013-06-27 01:09:59 -0400] Otterley: also, in Ruby 1.9.3, "property names" (which are actually turned into symbol keys) must not have a ":" prefix.
[2013-06-27 01:11:24 -0400] Otterley: oh Ruby, defining more than one language operator for doing the same thing, confusing language newbies.
[2013-06-27 01:14:50 -0400] BrianJ: still getting an error that it cant convert string to integer
[2013-06-27 01:14:52 -0400] BrianJ: http://pastie.org/8084415
[2013-06-27 01:14:58 -0400] BrianJ: when i changed to all strings
[2013-06-27 01:22:46 -0400] juliancdunn: BrianJ: if node['setup']['properties'] is a hash, don't you want .each do |key, value| ?
[2013-06-27 01:24:59 -0400] juliancdunn: also not sure why you decided to use a nested hash... why not just default['setup']['properties'] = { 'name' => 'property', 'foo' => 'bar' }, that sort of thing?
[2013-06-27 01:25:48 -0400] juliancdunn: or even clearer: default['setup']['properties']['foo'] = 'bar'
[2013-06-27 01:33:09 -0400] BrianJ: juliancdunn: ya i need to do key, value, but my value is going to be another hash.. how do I access it's inner variables?
[2013-06-27 01:33:22 -0400] BrianJ: value["item"]
[2013-06-27 01:33:42 -0400] BrianJ: and the reason I'm using a nested hash is because I'm going to have like 30 properties
[2013-06-27 01:34:02 -0400] BrianJ: they all have items, names, and values
[2013-06-27 01:35:36 -0400] juliancdunn: well, preserving your existing structure...
[2013-06-27 01:35:48 -0400] juliancdunn: node['setup']['properties']['property']['name'] would be 'property'
[2013-06-27 01:36:11 -0400] juliancdunn: node['setup']['properties']['property']['item'] would be 'test'
[2013-06-27 05:17:04 -0400] vaskas: hey guys. I'm going from 10 servers to ~20. Should I start using Chef Server?
[2013-06-27 05:17:54 -0400] vaskas: I've been getting away with Chef Solo and gusteau (a knife solo like tool) but seem to need things like centralised access management
[2013-06-27 05:20:21 -0400] stormerider: the more you have the easier a server with search becomes
[2013-06-27 05:20:50 -0400] stormerider: ultimately it's up to you for your workflow, though. if you need monitoring, chef server + nagios cookbook == very handy
[2013-06-27 05:21:35 -0400] coderanger: ivey: Does berks upload have a dry run mode of some kind so I can see what it plans to do first?
[2013-06-27 05:22:30 -0400] coderanger: Also -D doesn't work at all
[2013-06-27 05:22:41 -0400] vaskas: stormerider being a Solo user, I'm not really familiar with search but your nagios example sounds useful
[2013-06-27 05:24:14 -0400] stormerider: vaskas: the nagios cookbook uses search to mine the nodes for info and build a config based off of that. also, being able to run commands across a set (or all) of your servers with knife ssh is very handy, too.
[2013-06-27 05:24:55 -0400] coderanger: vaskas: What are you currently using to store info about what servers you have?
[2013-06-27 05:25:23 -0400] coderanger: If the answer is any of "well, nothing really", "a wiki page", "a text file in git" or "the AWS console" then yes :)
[2013-06-27 05:25:57 -0400] vaskas: coderanger github and yaml, each project has its own chef-repo with a couple of application cookbooks and a bunch of yaml files corresponding to individual servers
[2013-06-27 05:26:23 -0400] coderanger: And thats the authoritative source about what servers you own (or rent)?
[2013-06-27 05:26:32 -0400] vaskas: coderanger yep
[2013-06-27 05:26:47 -0400] coderanger: Sounds very hard to get a central overview of :)
[2013-06-27 05:27:35 -0400] novegin: hi
[2013-06-27 05:28:28 -0400] novegin: am new to chef. does any body know is there a resource for copying directory recursively
[2013-06-27 05:28:41 -0400] coderanger: vaskas: chef-server gives you two major things, 1) central DB that knows about every server and has lots of info about them so you can make automated decisions based on that and 2) an artifact repo for released cookbooks a la artifactory, nexus, apt, etc
[2013-06-27 05:28:45 -0400] vaskas: coderanger exactly. I'd love to share some common databags too. The thing is, we' ve been doing devops on team basis but sometimes somebody needs to look at the other servers.
[2013-06-27 05:29:30 -0400] coderanger: novegin: There is not, you can shell out to rsync but its very hard to do in a fully idempotent manner (granted you probably don't need it to work in 100% of weird edge cases :)
[2013-06-27 05:30:59 -0400] coderanger: vaskas: You can do shared bag-ish things with solo by making them into cookbooks and using berkshelf, its a bit hacky though
[2013-06-27 05:31:00 -0400] vaskas: coderanger I'm also thinking about a good way of giving the developers the ability to contribute and to push cookbooks. GitHub is a good authoritative source, but something will need to upload the cookbooks to the Server
[2013-06-27 05:31:18 -0400] novegin: thanks coderanger
[2013-06-27 05:31:32 -0400] vaskas: coderanger that's what I'm doing for some of the stuff
[2013-06-27 05:31:46 -0400] coderanger: If you want to use "push to git" as the release mechanism for cookbooks, holoway has a thing you can plug in to jenkins
[2013-06-27 05:32:22 -0400] coderanger: But in general people generally treat them more like packages, git is for dev, but releasing them is a thing a person does and that involves a tag and a frozen version pushed to the chef server
[2013-06-27 05:32:43 -0400] coderanger: and I used "general" twice in that sentence, getting tired
[2013-06-27 05:36:53 -0400] vaskas: coderanger yeah, sounds reasonable. Also, we are currently using Solo to provision-deploy the whole nodes, i.e. when we need to deploy an app we just provision everything. How would that work with Chef Server? Can you somehow force-toggle Chef Client run on a subset of nodes?
[2013-06-27 05:37:20 -0400] coderanger: vaskas: You can just run chef-client the same way you would with solo, ssh in and run it
[2013-06-27 05:37:41 -0400] coderanger: You can also run it as a daemon that just checks for updates from the server on a periodic basis
[2013-06-27 06:07:48 -0400] novegin: is there a resource for jar/unjar files
[2013-06-27 06:24:46 -0400] coderanger: novegin: Not sure what you mean
[2013-06-27 06:27:52 -0400] sascha_d: ark
[2013-06-27 06:28:33 -0400] sascha_d: @novegin https://github.com/bryanwb/chef-ark
[2013-06-27 06:30:09 -0400] coderanger: sascha_d: Didn't we migration ark to opscode-cookbooks?
[2013-06-27 06:30:31 -0400] sascha_d: mebbe? I just snagged it from my browser history
[2013-06-27 06:30:31 -0400] coderanger: Yeah https://github.com/opscode-cookbooks/ark
[2013-06-27 06:30:32 -0400] jmickle: did tar ever make it as a resource into chef?
[2013-06-27 06:30:37 -0400] sascha_d: which never gets deleted
[2013-06-27 06:31:08 -0400] coderanger: But I'm not sure thats relevant to jar files
[2013-06-27 06:31:18 -0400] coderanger: generally they are just a single file that you need to copy around
[2013-06-27 06:31:21 -0400] coderanger: remote_file ftw
[2013-06-27 06:31:53 -0400] jmickle: coderanger: i can't get ark to work 100% of the time
[2013-06-27 06:31:56 -0400] jmickle: its buggy :(
[2013-06-27 06:32:18 -0400] coderanger: I've never used it
[2013-06-27 06:32:24 -0400] jmickle: also its make_install function is very limited
[2013-06-27 06:32:28 -0400] coderanger: Also building software in production is awful
[2013-06-27 06:32:37 -0400] jmickle: in this case I'm fixing the community collectd package
[2013-06-27 06:32:44 -0400] jmickle: i agree
[2013-06-27 06:32:48 -0400] jmickle: building software in prod sucks
[2013-06-27 06:33:05 -0400] coderanger: Yeah well, thats a special case of "oops coderanger abandoned things" :(
[2013-06-27 06:33:11 -0400] coderanger: I'll get back to fixing it one of these days
[2013-06-27 06:33:24 -0400] coderanger: miah_'s is slightly better than mine, but still not maintained
[2013-06-27 06:33:36 -0400] jmickle: hahaha
[2013-06-27 06:33:43 -0400] jmickle: well I'm working on miah's right now
[2013-06-27 06:33:51 -0400] jmickle: the install from source recipe
[2013-06-27 06:33:52 -0400] jmickle: uses ark
[2013-06-27 06:33:55 -0400] coderanger: true story time, that collectd cookbook was probably the first chef-related thing I ever released
[2013-06-27 06:33:57 -0400] jmickle: and it has quite a few problems
[2013-06-27 06:34:04 -0400] jmickle: hehehehe
[2013-06-27 06:34:18 -0400] coderanger: miah at least fixed the most egregious "what were you thinking" bugs
[2013-06-27 06:34:28 -0400] jmickle: yeah
[2013-06-27 06:34:32 -0400] jmickle: miah's is pretty good
[2013-06-27 06:34:42 -0400] jmickle: like i said the only problem I've found with miah's so far is ark
[2013-06-27 06:34:50 -0400] jmickle: and trying to compile newer versions of collectd
[2013-06-27 06:35:11 -0400] jmickle: seems like the best option may be to expand it out of ark
[2013-06-27 06:35:15 -0400] jmickle: and utilize the resources
[2013-06-27 06:35:19 -0400] jmickle: so do the manual setup
[2013-06-27 06:35:58 -0400] coderanger: Or just make it use OS packages
[2013-06-27 06:36:40 -0400] jmickle: hehe well if you can find me some os packages :-P
[2013-06-27 06:37:00 -0400] jmickle: i sure as heck don't feel like compiling 1000 debs
[2013-06-27 06:37:02 -0400] jmickle: and 1000 rpms
[2013-06-27 06:37:03 -0400] jmickle: hahaha
[2013-06-27 06:37:46 -0400] coderanger: I mean collectd it packaged in both ubuntu and centos, just not particularly recent
[2013-06-27 06:38:32 -0400] sascha_d: @coderanger oops, you're right. I'm reading jar for tar. Everyone knows I think everything should be in a package with a package manager anyway.
[2013-06-27 06:39:08 -0400] coderanger: sascha_d: Hah, you are outsmarting yourself, since ark does support unzipping so you could technicaly expand a jar file, just don't know why you would :)
[2013-06-27 06:39:35 -0400] sascha_d: yeah, it should on any halfway modern system. But it wouldn't jar it back up I don't think. I have actually never used it
[2013-06-27 06:39:58 -0400] sascha_d: b/c ark tends to be a little too opinionated for me when I do want to use a tar which is almost never
[2013-06-27 06:45:44 -0400] agarson: hey, I'm getting an issue with the chef_gem resource: undefined method `full_name' for nil:NilClass
[2013-06-27 06:45:49 -0400] agarson: anybody seen this before?
[2013-06-27 06:54:46 -0400] vaskas: hey guys, what are the suggested specs for OSS Chef Server?
[2013-06-27 06:58:40 -0400] novegin: am thinking to create resource provider for jar/unjar files. ark doesnot support jar
[2013-06-27 07:02:34 -0400] miah_: sup
[2013-06-27 07:02:51 -0400] c_t: heya
[2013-06-27 07:03:08 -0400] c_t: I was just finishing something up
[2013-06-27 07:03:13 -0400] c_t: https://github.com/ctdk/bsdgames-osx
[2013-06-27 07:03:14 -0400] miah: at least ohare airport hassome decent free wifi
[2013-06-27 07:03:35 -0400] c_t: (it's not *finished*, as such)
[2013-06-27 07:03:39 -0400] miah: awesome =)
[2013-06-27 07:04:08 -0400] c_t: most of the games are working though
[2013-06-27 07:04:18 -0400] c_t: installation process is, sadly, still kind of beastly
[2013-06-27 07:04:29 -0400] miah: no brew install? ;)
[2013-06-27 07:04:39 -0400] c_t: heh
[2013-06-27 07:04:43 -0400] c_t: I did all of this evening
[2013-06-27 07:04:56 -0400] miah: i was on a airplane
[2013-06-27 07:04:57 -0400] c_t: I actually need to learn a bit more about bsdmake Makefile syntax
[2013-06-27 07:05:07 -0400] miah: after yelling at airlines and im still sleeping at an airport tonight
[2013-06-27 07:05:26 -0400] c_t: once I get *that* figured out better, then installation will be a breeze
[2013-06-27 07:05:33 -0400] c_t: and I can make a handy-dandy homebrew formula
[2013-06-27 07:05:35 -0400] miah: nice
[2013-06-27 07:05:52 -0400] c_t: it installs now, but needs a lot of hand-holding
[2013-06-27 07:06:09 -0400] c_t: I've also been turning up hard-coded paths
[2013-06-27 07:06:11 -0400] c_t: think I got most of them
[2013-06-27 07:06:29 -0400] c_t: ... but they should be fixed right
[2013-06-27 07:09:32 -0400] miah: ah.
[2013-06-27 07:11:36 -0400] c_t: backgammon, fortune, hack, hunt, larn, and rogue aren't building yet
[2013-06-27 07:11:57 -0400] c_t: pulled morse and piano since they were depending on the OSS sound libs
[2013-06-27 07:12:05 -0400] c_t: and that was a bit more work than I felt up to
[2013-06-27 08:52:15 -0400] vincy: Hello all! I installed a chef-server and configured it so that my local pem-files are the private keys of my personal client and the validator client. When i try to upload a cookbook using knife i get the following strange error: ERROR: Errno::EACCES: Permission denied - /var/chef
[2013-06-27 08:52:34 -0400] vincy: Anyone else had this problem? Can anyone help me? ^^
[2013-06-27 08:54:51 -0400] Caez: you have the /var/chef directory ?
[2013-06-27 08:55:48 -0400] vincy: on my server? yes
[2013-06-27 08:56:40 -0400] vincy: sorry i disconnected
[2013-06-27 08:56:41 -0400] Caez: and the permission has good, the directory need to be created by the chef server user
[2013-06-27 08:56:55 -0400] vincy: could you repeat what you said :D
[2013-06-27 08:57:12 -0400] Caez: the permission are good ? the directory need to be created by the chef server user
[2013-06-27 08:58:17 -0400] vincy: on my server the directorys owner is the chef user
[2013-06-27 08:58:23 -0400] vincy: but inside the folder
[2013-06-27 08:58:32 -0400] vincy: there is 1 file owned by the root user it seems
[2013-06-27 08:58:49 -0400] vincy: the client.pem inside /etc/chef
[2013-06-27 08:58:53 -0400] vincy: is owned by root
[2013-06-27 08:59:37 -0400] Caez: it's not a problem for this file
[2013-06-27 08:59:44 -0400] vincy: darn
[2013-06-27 09:00:32 -0400] Caez: try to put a 777 chmod on the /var/chef directory and upload a cookbook. If you don't have problem for the upload, you avec to check the permission
[2013-06-27 09:01:29 -0400] vincy: hmmm after i chmod-ed the entire contents of the folder to 777 the error remains
[2013-06-27 09:02:09 -0400] Caez: reput the good chmod
[2013-06-27 09:03:25 -0400] vincy: 664 i guess
[2013-06-27 09:03:58 -0400] Caez: 755
[2013-06-27 09:04:04 -0400] Caez: it's a directory
[2013-06-27 09:04:39 -0400] Caez: have you got information in logs ?
[2013-06-27 09:06:02 -0400] vincy: it apparently is requested when i issue the upload target using knife: merb : chef-server (api) : worker (port 4000) ~ Started request handling: Thu Jun 27 11:02:21 +0200 2013
[2013-06-27 09:06:02 -0400] vincy: merb : chef-server (api) : worker (port 4000) ~ Params: {"num_versions"=>"all", "action"=>"index", "controller"=>"cookbooks"}
[2013-06-27 09:06:03 -0400] vincy: merb : chef-server (api) : worker (port 4000) ~ {:before_filters_time=>0.007844, :dispatch_time=>0.011657, :action_time=>0.011113, :after_filters_time=>1.1e-05}
[2013-06-27 09:06:03 -0400] vincy: merb : chef-server (api) : worker (port 4000) ~
[2013-06-27 09:06:35 -0400] Caez: can you give me the content of you knife.rb file in private ?
[2013-06-27 10:01:05 -0400] admin0: ok
[2013-06-27 11:02:51 -0400] bcave: afternoon all :)
[2013-06-27 11:04:07 -0400] bcave: question for anyone using AWS and granting access to S3 resources: what cookbook are you using on chef-provisioned EC2 instances? Something that supports the temporary authentication mechanisms.
[2013-06-27 11:42:14 -0400] f1gjam: anyone about
[2013-06-27 11:42:39 -0400] f1gjam: i am trying to upload a cookbook to chef server, however it seems it removes the tests directory from inside the cookbook before uploading I want the tests to remain
[2013-06-27 11:42:47 -0400] f1gjam: any ideas why this could be happening?
[2013-06-27 11:43:43 -0400] agarson: check your chefignore file
[2013-06-27 11:45:01 -0400] f1gjam: ok i found the issue, not chef ignore it was configuring mini test as if i was using chef solo :(
[2013-06-27 12:06:49 -0400] chollya: Hello! Is there a way to modify some attribute in recipe and force recalculations of dependent attributes?
[2013-06-27 12:06:54 -0400] vincy: I'm configuring my chef runs to use chef_handler, what would be the most logical place to put my LWRP definition if i want it to apply to all of my cookbooks?
[2013-06-27 12:07:36 -0400] agarson: chollya:  no, you would have to calculate them all in the recipe
[2013-06-27 12:08:30 -0400] chollya: agarson: the reason, i'm asking for it, is that the dependant attributes are from 3rd aprty cookbook. Actually i'm just trying to ask this cookbook https://github.com/opscode-cookbooks/java to install java7 :)
[2013-06-27 12:09:04 -0400] agarson: don't you just have to set a node attribute to the version you want to install?
[2013-06-27 12:09:25 -0400] agarson: default['java']['jdk_version'] = '6'
[2013-06-27 12:09:45 -0400] agarson: set that for your node somehow
[2013-06-27 12:10:25 -0400] chollya: agarson: Wll, i hoped to hide this into my application cookbook, cause i know, that my app requires java7 :)
[2013-06-27 12:10:31 -0400] agarson: you can edit the node, the environment, the cookbook you are calling from or use a role
[2013-06-27 12:10:55 -0400] agarson: ok, so at some point you do an include_recipe "java" right?
[2013-06-27 12:11:09 -0400] chollya: agarson: yes.
[2013-06-27 12:11:22 -0400] agarson: you have a few choices
[2013-06-27 12:11:28 -0400] lewiz: hi guys, in chef 10.18.2 am I correct in understanding that if I run "chef-client -S mychefhost:4000" on a client with only a valid validation.pem in /etc/chef it should autoregister and create a client and node entry?
[2013-06-27 12:11:33 -0400] agarson: you can do a node.set before that, but that is not terribly flexible
[2013-06-27 12:11:36 -0400] isbaran: hello, can you match directories in a template with environment names ? i see it matches for host, node[platform] and lastly default. I wonder if there is a match for environment
[2013-06-27 12:11:50 -0400] agarson: @chollya are you using a chef server?
[2013-06-27 12:12:44 -0400] agarson: either way, you should be able to redefine that attribute in your attributes/default.rb (or any other attr file) and set it to what you want
[2013-06-27 12:12:58 -0400] agarson: if that doesn't work, you can do a node.set before that include_recipe
[2013-06-27 12:13:07 -0400] chollya: agarson: the idea was that i should not memorize "aw, i need to add default['java']['jdk_version'] = '6' to a node", but incapsulate it into recipe
[2013-06-27 12:13:35 -0400] agarson: so you dont want to knife edit the node, thats fine
[2013-06-27 12:13:44 -0400] chollya: agarson: yes and no, i use chef server for production, but in development i'm using vagrant with solo
[2013-06-27 12:13:59 -0400] agarson: in your cookbook, open attributes/default.rb and set the value you want in there
[2013-06-27 12:14:11 -0400] agarson: it should overwrite what is in the java cookbook
[2013-06-27 12:14:32 -0400] agarson: if not, then right before your include_recipe "java" do a node.set
[2013-06-27 12:15:01 -0400] chollya: agarson: i tried both, before coming here :) Right now i have 'node.set["java"]["jdk_version"] = '7' include_recipe "java"'
[2013-06-27 12:15:52 -0400] chollya: agarson: and when i try it on vagrant with chef solo i see 2013-06-27T15:16:02+03:00] INFO: Processing package[openjdk-6-jdk] action install (java::openjdk line 39)
[2013-06-27 12:15:53 -0400] agarson: and that doesn't work?
[2013-06-27 12:16:39 -0400] agarson: try running shef on the box and looking at the attribute value
[2013-06-27 12:16:48 -0400] agarson: make sure nothing else it overriding it
[2013-06-27 12:16:53 -0400] chollya: agarson: Yep. I believe that's because pakacge names are calculated before my node.set is executed. https://github.com/opscode-cookbooks/java/blob/master/attributes/default.rb
[2013-06-27 12:17:02 -0400] agarson: o, yes
[2013-06-27 12:17:04 -0400] agarson:  i see
[2013-06-27 12:18:38 -0400] chollya: agarson: so, is there a way to recalculate them?
[2013-06-27 12:18:54 -0400] agarson: not that i am aware of
[2013-06-27 12:19:14 -0400] agarson: try setting that value through chef.json in vagrant
[2013-06-27 12:20:22 -0400] agarson: you could set an env attribute in production to avoid having to modify individual nodes (assuming java 7 is what you want everywhere in that env)
[2013-06-27 12:21:12 -0400] chollya: agarson: That's was the problem - java 7 is exception :( Everything runs java6 atm, but this particular app requires java7
[2013-06-27 12:21:17 -0400] agarson: ok
[2013-06-27 12:21:26 -0400] agarson: in your attributes/default.rb do this
[2013-06-27 12:21:44 -0400] agarson: normal[:java][:jdkversion] = 7; include_attribute "java"
[2013-06-27 12:22:08 -0400] agarson: set the jdk version at a level above default, then when the java attributes get loaded you should override them
[2013-06-27 12:23:04 -0400] jga: Hi guys. Am I the only one getting Yajl::ParseError when doing a knife download against our local chef-server
[2013-06-27 12:24:13 -0400] agarson: @chollya if that doesn't work, you probably just have to set the packages attribute by hand
[2013-06-27 12:29:11 -0400] vincy: trying to use chef_handler, what would be the most logical place to put my LWRP definition if i want it to apply to all of my cookbooks for a certaint node and how?
[2013-06-27 12:30:04 -0400] agarson: @vincy you are writing a provider for chef_handler?
[2013-06-27 12:30:33 -0400] chollya: agarson: unfortunately, reading attributes from attributes/default.rb doesn't helps too :( Thanks for the ideas
[2013-06-27 12:30:54 -0400] agarson: i would put that into its own cookbook and then make that a dependency of my base cookbook (which all of my application cookbooks then depend upon)
[2013-06-27 12:31:16 -0400] agarson: @chollya you best bet is to just override both attributes then
[2013-06-27 12:31:19 -0400] cburroughs: Is there a way from inside a recipe to get the contents of an arbitrary role?
[2013-06-27 12:32:04 -0400] cburroughs: I'm trying to setup a central monitoring server.  Someething like for cluster_name in search(:roles, "cluster-*): template cluster name and find nodes with role
[2013-06-27 12:33:52 -0400] agarson: @cburroughs chef search supports wildcard searches, i think that is all you want right?
[2013-06-27 12:33:56 -0400] agarson: http://docs.opscode.com/essentials_search.html
[2013-06-27 12:34:03 -0400] vincy: @argarson At the moment i am just using it to generate a json file for my chef runs, these i can then use to report the status of my sandbox environment
[2013-06-27 12:34:49 -0400] cburroughs: I know how to search, but doesn't that just give me the *names* of the roles/nodes, not anything else about them?
[2013-06-27 12:34:52 -0400] vincy: so when a node is a sandbox node, i'd like to apply the json handler ^^
[2013-06-27 12:35:34 -0400] agarson: @cburroughs i'm not familiar with roles as i don't use them, but when you serach for nodes you get a whole node object back
[2013-06-27 12:35:45 -0400] agarson: i would assume something similar happens for roles
[2013-06-27 12:36:15 -0400] cburroughs: hmm, thanks.  I might have just been discarding everything but the name before.  my bad
[2013-06-27 12:36:35 -0400] agarson: @vincy what makes it a sandbox node? its inside a particular environment?
[2013-06-27 12:37:31 -0400] agarson: in that case you could only call the chef handlers if an attribute is set, default the attribute to false and then override it in your sandbox environment
[2013-06-27 12:38:31 -0400] agarson: @cburroughs like i said, i have never actually searched for a role that way, its just an informed guess
[2013-06-27 12:39:51 -0400] cburroughs: well, if the node objections have the roll in it, I can work backwards from there :-)
[2013-06-27 12:47:07 -0400] vincy: @agarson correct!
[2013-06-27 12:47:10 -0400] vincy: oO
[2013-06-27 12:47:51 -0400] vincy: For anyone here interested in the 'sollution' as of now i defined the prefered handler in the chef_handler's default recipe itself
[2013-06-27 12:48:48 -0400] vincy: so sandbox nodes will have chef_handler in their runlist by default
[2013-06-27 12:51:07 -0400] chuck_01: Hi, I'm looking for some help on creating and using an ohai plugin to update languages[:ruby] attributes
[2013-06-27 12:51:25 -0400] chuck_01: It seems like I need to run it twice to view the changes I've made on it.
[2013-06-27 12:52:00 -0400] chuck_01: What is the best way to call a plugin from a recipe?
[2013-06-27 12:55:13 -0400] chuck_01: Help !!
[2013-06-27 13:03:49 -0400] agarson: @chuck_01 do you just need to reload the values?
[2013-06-27 13:09:17 -0400] chuck_01: I'm installing a new ruby through the rbenv cookbook and I need to update those settings to be able to gem in the new context
[2013-06-27 13:09:45 -0400] agarson: so your need to reload the values from an ohai plugin?
[2013-06-27 13:09:49 -0400] agarson: use the ohai resource
[2013-06-27 13:10:05 -0400] agarson: http://docs.opscode.com/resource_ohai.html
[2013-06-27 13:10:58 -0400] agarson: is that what you need?
[2013-06-27 13:12:04 -0400] chuck_01: @agarson I'm trying to use the ohai resource but it doesn't work at the first run
[2013-06-27 13:12:38 -0400] chuck_01: I'm trying to do this :
[2013-06-27 13:12:48 -0400] chuck_01: require_plugin "languages"
[2013-06-27 13:13:09 -0400] chuck_01: languages[:ruby][:ruby_bin] = new_path
[2013-06-27 13:14:07 -0400] chuck_01: puts when I'm trying to inspect the new values setted via log node['languages']['ruby'] nothing has changed
[2013-06-27 13:15:17 -0400] agarson: hm, sorry but i don't know enough about ohai to help you out with that
[2013-06-27 13:19:20 -0400] chuck_01: @agarson maybe someone else will be able to...
[2013-06-27 13:20:02 -0400] matti: chuck_01: Why do you set languages?
[2013-06-27 13:21:54 -0400] chuck_01: @matti I'm using chef solo via chef omnibus and after installing a ruby for my server I need to install the passenger gem in the installed ruby and not the embedded one
[2013-06-27 13:23:30 -0400] chuck_01: @matti If I don't change the default value I can't use gem_package anymore
[2013-06-27 13:37:10 -0400] profil: Is this a bug or expected behaviour? When a recipe fails which uses encrypted data bags the decrypted data is printed into the log files, which compromises the whole idea behind why they are encrypted
[2013-06-27 13:37:49 -0400] profil: it doesnt only print it to stderr, it also writes it to disk
[2013-06-27 13:51:37 -0400] proppen: The horror when you realize that the profile you just edited also was use in production and nodes starts to fail... Luckily I stopped chef clients on the other servers in time... *phew*
[2013-06-27 13:51:47 -0400] proppen: Time to read up on Chef anti patterns ;)
[2013-06-27 13:52:48 -0400] chuck_01: Some help on a way to update languages setting at chef solo first run?
[2013-06-27 14:05:48 -0400] gondoi: I have an attribute that is an array, my recipe is doing something like this node.default['array'] << something_new
[2013-06-27 14:06:00 -0400] gondoi: the problem i run into is if i have an override for 'array'
[2013-06-27 14:06:11 -0400] gondoi: that push doesn't get added to the array
[2013-06-27 14:06:25 -0400] gondoi: but if i use .set it doesn't have the << defined
[2013-06-27 14:06:34 -0400] gondoi: anyone have any suggestions on how to accomplish this?
[2013-06-27 14:08:17 -0400] agarson: gondoi:  don't use an array, chef doesn't treat them very well
[2013-06-27 14:08:30 -0400] agarson: you can probably get better merging semantics if you use a hash
[2013-06-27 14:08:43 -0400] gondoi: well i kinda need an array for this case
[2013-06-27 14:09:04 -0400] gondoi: i'm taking that array and simply prettyprinting it in a template
[2013-06-27 14:09:13 -0400] gondoi: so it needs to come out looking like an array
[2013-06-27 14:09:19 -0400] agarson: yeah, my team banged out heads against array for a long time, and i know somebody from opscode wrote a good blogpost about not using arrays
[2013-06-27 14:09:34 -0400] aramus: Hi, I am just starting to pick up Chef. Can anyone tell me if Chef runs recipes serially or in parallel? For example, I have a run-list of three recipes. Will the second and third not run if the first has not finished and/or executed correctly?
[2013-06-27 14:09:43 -0400] juliancdunn: aramus: serially
[2013-06-27 14:09:47 -0400] juliancdunn: Chef runs everything in order
[2013-06-27 14:10:29 -0400] gondoi: agarson, yeah it would be easier not to use arrays, but the application being deployed needs the final output to be an array
[2013-06-27 14:10:33 -0400] gondoi: i think i may have figured it out
[2013-06-27 14:10:45 -0400] agarson: there are a lot of edge cases
[2013-06-27 14:10:57 -0400] aramus: Alright. Is there a way to run recipes in parallel?
[2013-06-27 14:10:59 -0400] agarson: especially if its an attribute in a base cookbook that multiple others could modify (our case)
[2013-06-27 14:11:11 -0400] gondoi: i'm going to try and pass a variable to the template like so:    array => node['array'] << something_new
[2013-06-27 14:11:28 -0400] aramus: juliancdunn: Alright. Is there a way to run recipes in parallel?
[2013-06-27 14:11:41 -0400] juliancdunn: aramus: no, that's not how it's designed
[2013-06-27 14:12:38 -0400] agarson: gondoi:  do you need something_new to persist between runs?
[2013-06-27 14:12:42 -0400] aramus: juliancdunn: alright, that makes sense. Thanks, it's just all these little things that I need to know!
[2013-06-27 14:12:50 -0400] juliancdunn: np
[2013-06-27 14:12:53 -0400] gondoi: it's pulled from a databag
[2013-06-27 14:13:03 -0400] agarson: then you probably don't want to use <<
[2013-06-27 14:13:16 -0400] gondoi: what's going to happen?
[2013-06-27 14:13:17 -0400] agarson: gondoi:  i would use [node[:foo], something_new].flatten
[2013-06-27 14:13:28 -0400] agarson: << will modify the node attribute
[2013-06-27 14:13:33 -0400] gondoi: ah
[2013-06-27 14:13:40 -0400] gondoi: good call
[2013-06-27 14:13:56 -0400] agarson: you could also use someting like node[:foo] + something_new
[2013-06-27 14:14:07 -0400] agarson: but i can never remember the exact semantics of that command, so i like flatten
[2013-06-27 14:15:26 -0400] gondoi: awesome
[2013-06-27 14:15:30 -0400] gondoi: thanks, testing now
[2013-06-27 14:16:00 -0400] agarson: gondoi:  i think this is the blog post https://coderanger.net/2013/06/arrays-and-chef/
[2013-06-27 14:28:14 -0400] lewiz: hi... I'm looking at http://docs.opscode.com/essentials_environments.html#set-per-environment-run-lists but I don't know where I am defining this.  can anybody help out?
[2013-06-27 14:28:38 -0400] jgood: Hi all, any ideas what's supposed to go under Use the Ohai Recipe on this link? The Documentation is exactly the same as the input section before it (Upload a Custom Plugin
[2013-06-27 14:28:43 -0400] lewiz: I'm trying to create a default runlist for all hosts in the environment.  and or add a default role to all nodes in the environment
[2013-06-27 14:28:50 -0400] jgood: http://docs.opscode.com/ohai.html#upload-a-custom-plugin
[2013-06-27 14:29:13 -0400] lewiz: oh wait... I just realised what http://docs.opscode.com/essentials_environments.html#set-per-environment-run-lists is doing and it's not what I want :(
[2013-06-27 14:34:34 -0400] will: hello! is there an easy way to see pending changes for an environment? IE, what changes will be applied when I hit apply? thanks!
[2013-06-27 14:52:17 -0400] antrax: hello
[2013-06-27 14:52:49 -0400] atomic-penguin: 'sup
[2013-06-27 14:53:02 -0400] antrax: i try to install rmps with yum place in a folder
[2013-06-27 14:53:05 -0400] antrax: like this
[2013-06-27 14:53:13 -0400] antrax: yum_package "*" do   action :install   source "/tmp/rpm/php53/"
[2013-06-27 14:53:27 -0400] antrax: but it's not work
[2013-06-27 14:53:39 -0400] antrax: ::Package: No version specified, and no candidate version available for *
[2013-06-27 14:54:03 -0400] antrax: how i can run the installation of all package in my folder
[2013-06-27 14:55:08 -0400] atomic-penguin: antrax, why use yum_package, when you could use rpm_package, or just package?
[2013-06-27 14:55:15 -0400] atomic-penguin: antrax, http://docs.opscode.com/resource_package.html
[2013-06-27 14:55:31 -0400] aramus: Hello, I've got a question about chef. I know Chef doesn't support recipes running in parallel but if we're setting up two servers to be exactly the same, is there anyway to have the recipe set up both at the same time?
[2013-06-27 14:55:33 -0400] antrax: because yum solve dependancies
[2013-06-27 14:55:46 -0400] antrax: for installing all the package in the good order
[2013-06-27 14:56:38 -0400] antrax: atomic-penguin, because yum solve dependancies
[2013-06-27 14:56:47 -0400] atomic-penguin: antrax, does the folder "/tmp/rpm/php53/" have yum repository metadata?
[2013-06-27 14:57:01 -0400] atomic-penguin: antrax, because if not, I don't see how it would
[2013-06-27 14:58:04 -0400] antrax: atomic-penguin, nop. if i run a manualy install, i run a yum localinstall *.rpm
[2013-06-27 14:58:11 -0400] antrax: and it's working
[2013-06-27 14:58:12 -0400] chris613: aramus: I might be misunderstanding the question, but simply run chef-client on both the servers.
[2013-06-27 14:58:43 -0400] antrax: atomic-penguin, i woul'd make the same with chef
[2013-06-27 14:59:04 -0400] chris613: aramus: I have hundreds of servers that all run the same recipes in parallel
[2013-06-27 14:59:38 -0400] aramus: chris613: I thought chef execution was serial.
[2013-06-27 15:00:17 -0400] chris613: aramus: In a single chef-client run, it is, but when you run chef-client it grabs the cookbooks from the server and runs them. The server doesn't know or care how many nodes do that at once
[2013-06-27 15:00:51 -0400] aramus: chris613: oh, i see.
[2013-06-27 15:01:08 -0400] aramus: chris613: I thought it would set one server up, then set the next one up again.
[2013-06-27 15:01:15 -0400] antrax: atomic-penguin: you know what I mean
[2013-06-27 15:01:16 -0400] antrax: ?
[2013-06-27 15:01:35 -0400] chris613: aramus: You have it backwards. "It" doesn't set up a server. A server runs the client, and then sets itself up
[2013-06-27 15:01:40 -0400] atomic-penguin: antrax, well you are making the assumption that the yum provider works in exactly the same way.  I mean it isn't like you are telling yum_package to use 'localinstall'.
[2013-06-27 15:02:19 -0400] chris613: aramus I often will do something like this: knife ssh 'chef_environment:prod' -- chef-client      and then 400 machines all run chef-client at once
[2013-06-27 15:05:35 -0400] aramus: chris613: Alright, that makes sense. What if server2 can only set itself up when server1 is set up? If execution isn't serial, how would you take into account that scenario?
[2013-06-27 15:05:37 -0400] atomic-penguin: antrax, if it were me, I would just do https://gist.github.com/atomic-penguin/5877208
[2013-06-27 15:05:44 -0400] antrax: @ atomic-penguin  ; i tell me yum_package it's not working with localinstal. can i put a parameter for that or its not compatible
[2013-06-27 15:06:46 -0400] chris613: aramus: Well in that case you need to take care to build them in the right order when you are initially provisioning them. But that's your requirement, not one forced on you by chef.
[2013-06-27 15:08:18 -0400] antrax: atomic-penguin: Thank you
[2013-06-27 15:09:08 -0400] antrax: atomic-penguin: I'm going to install my own yum repo
[2013-06-27 15:09:21 -0400] atomic-penguin: antrax, alternatively you could set up a local yum repository with your files, and add that to your server with yumrepo::corporate
[2013-06-27 15:09:34 -0400] antrax: atomic-penguin: i think is more easy
[2013-06-27 15:09:36 -0400] aramus: chris613: Alright.  What is the chef way to do this in this scenario? Would you just use the :nothing action and wait until it gets notified?
[2013-06-27 15:09:41 -0400] dyu: how do i do a --disablerepo from within the yum cookbook? i've checked the documentation and can't seem to find it
[2013-06-27 15:09:48 -0400] antrax: atomic-penguin: yep exactly
[2013-06-27 15:09:54 -0400] atomic-penguin: antrax, it is pretty easy
[2013-06-27 15:10:28 -0400] antrax: atomic-penguin: thank you for your help
[2013-06-27 15:10:45 -0400] antrax: atomic-penguin: have a good day
[2013-06-27 15:10:50 -0400] atomic-penguin: antrax, np, you too
[2013-06-27 15:11:10 -0400] chris613: aramus: I'm not sure I know enough about what you're trying to do. Notifies can't (AFAIK) come from another machine, they come from recipes executing within the same chef run on the same machine.
[2013-06-27 15:11:59 -0400] chris613: aramus: Is the issue that recipes search for other machines to configure their inter-communications, or that you literally just can't build the second machine until the first one is up (like depending on a pxe boot server or something)
[2013-06-27 15:12:42 -0400] chris613: If it's just config based on a search, just run chef-client often enough that it will take care of itself in short order. So the first run will leave the server largely unconfigured with respect to the other machines in the environment, but the second run will get them all properly stiched together
[2013-06-27 15:13:32 -0400] aramus: Oh, I see.
[2013-06-27 15:14:27 -0400] aramus: chris613: Sounds like the solution is just to knife everything until it all gets configured.
[2013-06-27 15:36:10 -0400] gchristensen: Hi, how does ohai detect the default interface? I'm having an issue where it is picking the wrong one (picking the public instead of the private network.)
[2013-06-27 15:40:07 -0400] djstunami: So, I'm not getting any dmi/cpu/hardware information from a sparc Solaris 10 chef client (11.4.4-2) install, is that normal?
[2013-06-27 15:40:32 -0400] rracterr: Would it not make more sense if the chef-client exited when finding a pid file, rather then blocking?  If I wanted to crank down the cron to 1 minute checks... blocking will cause a huge stack of pending runs anytime a chef run takes longer than the interval between runs....
[2013-06-27 15:41:35 -0400] chris613: rracterr: I would prefer that behaviour too. Out of sheer curiosity, is this a production environment where you intend to run chef-client every minute, or a test lab?
[2013-06-27 15:42:36 -0400] coderanger: rracterr: The blocking is more helpful when you have interactive runs competing with daemonized runs
[2013-06-27 15:42:38 -0400] rracterr: I'm exaggerating for effect, but its valid on short or long duration runs... I cant think of a time when I would ever want a chef client to sit waiting for the previous to finish
[2013-06-27 15:43:24 -0400] erthad: hiall
[2013-06-27 15:43:26 -0400] rracterr: but if your tinkering around with interactive runs isnt that really more a case for chef-shell anyhow?
[2013-06-27 15:43:34 -0400] erthad: is there a way chef run inside a LWRP
[2013-06-27 15:43:35 -0400] erthad: ?
[2013-06-27 15:43:43 -0400] coderanger: No, interactive as in started via ssh (knife ssh, fabric, rundeck, etc)
[2013-06-27 15:43:50 -0400] rracterr: ah gotcha
[2013-06-27 15:44:09 -0400] erthad: i.e. I manage several resources in LWRP -- is there a way to find out how they are processed?
[2013-06-27 15:44:16 -0400] coderanger: If you want really low interval, just use chef-client's daemon mode
[2013-06-27 15:44:16 -0400] tabolario: is there any way to get back the node attributes generated by knife-ec2? i accidentally wiped them off one of my nodes when i did node from file just now
[2013-06-27 15:44:28 -0400] coderanger: rracterr: Since it understands interval is just gap between runs
[2013-06-27 15:44:40 -0400] coderanger: tabolario: Which ones do you mean?
[2013-06-27 15:44:53 -0400] tabolario: coderanger: the auto-generated ec2.* attributes
[2013-06-27 15:44:55 -0400] gchristensen: is there a way to hint to ohai which interface I want it to use as its IP address?
[2013-06-27 15:45:06 -0400] coderanger: erthad: Not sure what you mean, it is just normal Chef run structure in there
[2013-06-27 15:45:23 -0400] coderanger: tabolario: Those come from ohai and will come back on your next chef run
[2013-06-27 15:45:43 -0400] coderanger: gchristensen: Not sure, node['ipaddress'] is supposed to be determined by the default route
[2013-06-27 15:45:44 -0400] tabolario: coderanger: aha thanks, and yeah just looked they're back :)
[2013-06-27 15:46:00 -0400] tabolario: i was upset for a moment thinking i was going to have to blow away the node
[2013-06-27 15:46:06 -0400] coderanger: gchristensen: but you can also just manually iterate over the interfaces and find what you want
[2013-06-27 15:46:32 -0400] tabolario: and this is why i love chef :D
[2013-06-27 15:46:48 -0400] erthad: coderanger: chef just produces in logs "Processing providername[foobar] action run" without unfolding inner resources
[2013-06-27 15:47:09 -0400] coderanger: erthad: Are you using inline resources mode?
[2013-06-27 15:47:28 -0400] erthad: coderanger: not sure, I use the default one. should I use the other?
[2013-06-27 15:47:29 -0400] gchristensen: coderanger: my issue right now is the default interface its picking is the public IP address, where all the ports are completely locked down. I'd like it to pick instead the private IP address, where the communication actually happens (and anything to the server from here is over the VPN.) I can't set the private IP as the default route though (I don't think) becuase it can't access the public network.
[2013-06-27 15:47:56 -0400] coderanger: gchristensen: Is this just for knife ssh or something?
[2013-06-27 15:48:11 -0400] erthad: coderanger: thanks for the clue, I'll try that
[2013-06-27 15:48:15 -0400] tabolario: has anyone here set up custom dns/dhcp within a VPC on EC2? i would love if my hostnames in the VPC matched the node names in chef instead of ip-10-0-1-whatever
[2013-06-27 15:48:42 -0400] gchristensen: no, its for all of the cookbooks everywhere :P only two servers have public IP addresses which have open ports.
[2013-06-27 15:50:14 -0400] jhammerman: Hi Chef IRC. Does anyone know if the chef git resource supports sparse checkouts?
[2013-06-27 15:50:54 -0400] coderanger: jhammerman: Do you mean shallow clones?
[2013-06-27 15:51:28 -0400] jhammerman: coderanger: Yes, I believe so. I want to co a particular subdirectory of a Git repo
[2013-06-27 15:51:47 -0400] coderanger: No, that isn't a shallow clone and is not something git supports to the best of my knowledge
[2013-06-27 15:52:07 -0400] gchristensen: jhammerman: no, that isn't something you can do with git.
[2013-06-27 15:52:22 -0400] jhammerman: Thanks guys!
[2013-06-27 15:53:08 -0400] coderanger: gchristensen: Hmm, so your best bet is probably to make a little ohai plugin that populated ipaddress_private or something
[2013-06-27 15:53:33 -0400] coderanger: gchristensen: Is this on a major cloud provider? ohai already does that for a lot of them via cloud.ipv4_private
[2013-06-27 15:53:44 -0400] coderanger: or private_ipv4, I forget
[2013-06-27 15:54:00 -0400] gchristensen: coderanger: this is for a major ... provider. Softlayer, all dedicated hardware.
[2013-06-27 15:54:35 -0400] coderanger: Ahh, then yeah just make a little ohai plugin (as long as there is areasonable heuristic to know which address is which :)
[2013-06-27 15:54:58 -0400] gchristensen: hrm... I have a feeling we're going to be fighting our way upstream on this :( okay, though.
[2013-06-27 15:55:33 -0400] coderanger: Its pretty easy, you don't have to do the actual data extraction since the network plugin does that for you
[2013-06-27 15:55:50 -0400] gchristensen: yeah, the ohai provider isn't the upstream part ;P
[2013-06-27 15:56:05 -0400] gchristensen: its all the cookbooks that will need updated
[2013-06-27 15:56:07 -0400] gchristensen: updating*
[2013-06-27 15:56:15 -0400] coderanger: Ahh, well your plugin can override ipaddress too
[2013-06-27 15:56:21 -0400] coderanger: Thats up to you :)
[2013-06-27 15:56:31 -0400] gchristensen: hrm... I guess you're right...
[2013-06-27 15:56:46 -0400] coderanger: Just might want to copy the public one somewhere first
[2013-06-27 15:58:15 -0400] erthad: coderanger: does chef 10.18.2 support use_inline_resources yet? chef run crashes when I try to use it nor can I grep that in chef source code
[2013-06-27 15:58:29 -0400] coderanger: Nope, new in chef 11
[2013-06-27 15:58:34 -0400] gchristensen: for sure. coderanger: I was stuck in the mindset that you can't override ohai, yet, ohai can override itself.
[2013-06-27 15:59:08 -0400] erthad: too bad, as opscode-hosted apt repository still uses 10.18.2
[2013-06-27 15:59:17 -0400] erthad: coderanger: thank you anyway
[2013-06-27 15:59:30 -0400] coderanger: erthad: Stop using that immediately, it will never be updated again
[2013-06-27 15:59:41 -0400] coderanger: Use the omnibus installers
[2013-06-27 16:00:50 -0400] gchristensen: coderanger: features (like the apt repo) are like sex - one mistake and you support it forever!
[2013-06-27 16:01:18 -0400] coderanger: We'll keep supporting apt in general, just not that repo or install format
[2013-06-27 16:01:34 -0400] gchristensen: it was a joke
[2013-06-27 16:01:38 -0400] erthad: coderanger: I see, I'll plan moving to that then as soon as I have time for that. thanks
[2013-06-27 16:02:06 -0400] erthad: coderanger: could you please put big README in the root of the repo that recommends not to use it?
[2013-06-27 16:02:51 -0400] coderanger: erthad: How many people open a repo via HTTP and look for a readme? :P
[2013-06-27 16:03:28 -0400] erthad: coderanger: not they actually look for it but it could attract attention at least =)
[2013-06-27 16:04:18 -0400] coderanger: Its already marked as deprecated in all our docs, hard to get much more exposure than that
[2013-06-27 16:04:23 -0400] coderanger: other than, ya know, disabling it
[2013-06-27 16:06:06 -0400] remil: coderanger: i may have missed part of the conversation, but which repo are you talking about ? apt.opscode.com ?
[2013-06-27 16:06:09 -0400] gchristensen: coderanger: when do you plan on doing that? it'll be a good way to make hte point that it doens't work anymore :P
[2013-06-27 16:06:16 -0400] erthad: actually I don't think I've seen references to apt repo in docs but I think I've known about that much accidentally
[2013-06-27 16:06:28 -0400] gchristensen: coderanger: also, may I ask why you stopped supporting it? I ask becauseI'm in the process of setting up an apt repository for my omnibus bulids...
[2013-06-27 16:06:36 -0400] coderanger: remil: yeah
[2013-06-27 16:07:04 -0400] coderanger: gchristensen: Because we can't easily do a transparent migration covering all edge cases from the old distro-style packages to omnibus-style
[2013-06-27 16:07:24 -0400] gchristensen: not due to the complexities of managing the apt repo, then?
[2013-06-27 16:07:24 -0400] coderanger: gchristensen: So we opted to do it in a way that doesn't break production for people
[2013-06-27 16:07:37 -0400] coderanger: Ahh, no, though managing apt repos sucks so I wrote a thing for it
[2013-06-27 16:07:44 -0400] gchristensen: coderanger: may I see? :)
[2013-06-27 16:08:22 -0400] coderanger: https://crate.io/packages/depot/
[2013-06-27 16:08:26 -0400] coderanger: Lolformatting
[2013-06-27 16:08:43 -0400] erthad: is there any info on why omnibus is better than plain ruby packages?
[2013-06-27 16:09:14 -0400] coderanger: erthad: Because managing dependencies, ruby versions, etc is a nightmare
[2013-06-27 16:09:19 -0400] paulmooring: erthad: by plain ruby packages do you mean gems?
[2013-06-27 16:09:54 -0400] erthad: no, deb-packages of course. unless you use tons of gems it is quite easy
[2013-06-27 16:10:10 -0400] erthad: otherwise you are right, managing gem dependencies is painful
[2013-06-27 16:10:13 -0400] paulmooring: well, omnibus is a deb package
[2013-06-27 16:10:17 -0400] coderanger: gchristensen: depot is specifically an apt (and yum when I get around to it) manager that groks clouds and doing incremental updates
[2013-06-27 16:10:59 -0400] gchristensen: erthad: the reason I do it is you can install this .deb or .rpm or whatever into even the most toxic systems, with absolutely no concern that something previously installed on it will be broken by it, nor will break yours.
[2013-06-27 16:11:00 -0400] coderanger: Yahr, it is a deb package, but instead of matching Debian packaging guidelines like the old ones, it just shoves a static universe into /opt/chef which JFWs
[2013-06-27 16:11:07 -0400] paulmooring: the difference is it installs it's own ruby/gems/dependencies under /opt in a controlled environment so it's much less likely to cause you grief due to dependency conflicts
[2013-06-27 16:13:00 -0400] erthad: I've met an issue some time ago when I was not able to install some gem (like pg) into omnibus and that's why I don't like embedded ruby since that time =)
[2013-06-27 16:13:41 -0400] rracterr: anyone got experience configuring chef-rundeck and such?  half the links on the web are 404... is this thing even supported anymore?
[2013-06-27 16:13:48 -0400] chris613: erthad: I know it was some time ago, but the move to omnibus means that you need to use a chef_gem resource instead of a gem resource if it needs to be available for chef to use
[2013-06-27 16:14:40 -0400] Guest57557: Hi I need some help on understanding how I can use chef solo to install a ruby on a server then install gem into this new one?
[2013-06-27 16:15:34 -0400] erthad: chris613: no, there was some issue with bindings to system libraries or something like that, I don't recall atm exactly
[2013-06-27 16:15:52 -0400] tabolario: Guest57557: What do you need help understanding?
[2013-06-27 16:16:50 -0400] paulmooring: erthad: there are some things that can be a little more difficult but overall most people find omnibus much easier to deal with than gem install (even if those gems are packaged as debs)
[2013-06-27 16:18:39 -0400] stkowski: Getting to watch gmiranda23 teach a class.
[2013-06-27 16:19:01 -0400] stkowski: 16 sysadmins in the silicon valley taking a chef class. 0 PCs present. All Osx laptops.
[2013-06-27 16:19:36 -0400] stkowski: 3 people have mentioned taking the class due to "large amount of chef requests" for consulting classes. 2 people have mentioned they are learning chef instead of puppet.
[2013-06-27 16:19:45 -0400] erthad: paulmooring: sure, installing some custom binary-linked gems to chef doesn't look like an everyday usecase
[2013-06-27 16:19:46 -0400] stkowski: erin place of puppet.
[2013-06-27 16:20:55 -0400] paulmooring: erthad: fwiw I'm pretty sure the community postgres cookbook will handle the nuances around getting that gem installed in omnibus
[2013-06-27 16:21:23 -0400] erthad: paulmooring: I think it is already fixed, yes
[2013-06-27 16:25:25 -0400] jgood: Tried asking this earlier to no avail, but does anyone know what is supposed to go under "Use The Ohai Recipe" on this page, it is the exact same information as the section above it which doesn't make sense :\ http://docs.opscode.com/ohai.html#upload-a-custom-plugin
[2013-06-27 16:30:53 -0400] juliancdunn: jgood: dunno... I'll poke our tech writer :)
[2013-06-27 16:31:42 -0400] jgood: juliancdunn: thanks
[2013-06-27 16:39:12 -0400] jchauncey: alright i have a transitive dependency question in our berksfile for a cookbook we are specifying a specific version of ark that we have patched (it is pointing to our github repo) but when i include that cookbook (the one that uses ark) as a depenedency in another cookbook it does not resolve our version of ark (it gets the one from github)
[2013-06-27 16:39:22 -0400] jchauncey: er it gets the one from opscode rather
[2013-06-27 16:49:58 -0400] iwilson: Afternoon.
[2013-06-27 16:54:39 -0400] juliancdunn: jgood: he says he pushed a change - just waiting for Jenkins to build and push it
[2013-06-27 16:55:22 -0400] juliancdunn: 2nd section should say something about using the ohai cookbook
[2013-06-27 17:16:14 -0400] BrianJ: if i create a resource in my cookbook do i still need to use the cookbook name when calling it? cookbook_sshkey
[2013-06-27 17:16:18 -0400] BrianJ: or can i just do sshkey
[2013-06-27 17:21:58 -0400] jxu: my  "knife upload environments" command failed with the error msg "ERROR: Server returned error for http://10.190.225.88:4000/environments, retrying 1/5 in 3s".
[2013-06-27 17:22:23 -0400] jxu: the chef server error is http://pastebin.com/NnvZL1E6
[2013-06-27 17:22:26 -0400] jxu: any ideas?
[2013-06-27 17:23:20 -0400] jgood: juliancdunn: awesome, thanks for the help!
[2013-06-27 17:25:10 -0400] gchristensen: is there a way to make Chef's limit for a diff being too big to display lower? right now 1000 means that the entire 'cpanm' file gets dumped, and its a real PITA.
[2013-06-27 17:32:03 -0400] BrianJ: Having issues with opening a file in a provider. http://pastie.org/8086794
[2013-06-27 17:32:19 -0400] BrianJ: not sure where to go considering File.open should just be a ruby thing
[2013-06-27 17:32:57 -0400] siezer: BrianJ, you'll need to use ::File to access Ruby's File class instead of Chef's
[2013-06-27 17:33:20 -0400] siezer: so, on lines 5 and 9, just s/File/::File/
[2013-06-27 17:34:04 -0400] lewiz: can I run chef-client against an open source server without creating a node?  I'd like to do the equivalent of chef-solo but without checking out all of the files... any thoughts?
[2013-06-27 17:34:44 -0400] siezer: checkout out all the files
[2013-06-27 17:34:45 -0400] siezer: ?
[2013-06-27 17:35:09 -0400] lewiz: siezer: I thought chef-solo needed a copy of the repo?
[2013-06-27 17:35:14 -0400] BrianJ: siezer: thanks. is that for every ruby class? or just the chef overrides
[2013-06-27 17:35:37 -0400] siezer: BrianJ just the ones chef overrides
[2013-06-27 17:35:38 -0400] lewiz: siezer: cookbook_path
[2013-06-27 17:35:57 -0400] siezer: lewiz chef-client will only download the cookbooks it needs from the chef-server
[2013-06-27 17:36:10 -0400] BrianJ: siezer: thanks. That issue would have wasted my entire day without a doubt
[2013-06-27 17:36:29 -0400] lewiz: siezer: I'd like that but I don't want to register the machine as a client & node
[2013-06-27 17:36:41 -0400] siezer: so, a runlist of 'recipe[foo]', will onlt download the foo cookbook. then parse its metadata and download any deps
[2013-06-27 17:37:22 -0400] siezer: lewiz is this a local vm?
[2013-06-27 17:38:14 -0400] siezer: if so, berkshelf/vagrant may be the droid you're looking for
[2013-06-27 17:38:52 -0400] siezer: if not, then you're kinda stuck either copying your cookbooks to the machine, or letting chef-client register with chef-server so it can grab what it neesd
[2013-06-27 17:39:12 -0400] lewiz: siezer: I'm integrating chef into a kickstart config which will be used on vms & physical hosts.  chef-client works but requires that the node/client not already exist, which is a problem.  I'd like to do the equivalent of chef-client for a specific base role
[2013-06-27 17:40:18 -0400] lewiz: siezer: is there any reason I couldn't use a generic client/node for multiple hosts and remove the client.rb & client.pem once chef-client has run the first time?
[2013-06-27 17:40:34 -0400] siezer: then you're going to have to resolve your cookbook deps and ship them around with chef-solo
[2013-06-27 17:41:00 -0400] xrl: My "knife ec2 server create" command is failing without a stacktrace, saying it "Can not find bootstrap definition for"
[2013-06-27 17:41:13 -0400] siezer: erm...
[2013-06-27 17:41:16 -0400] xrl: it looks like the config setting for the distro is getting overwritten
[2013-06-27 17:41:23 -0400] xrl: but I'm not setting it in the cli
[2013-06-27 17:41:25 -0400] siezer: you mean like..
[2013-06-27 17:41:56 -0400] siezer: knife node create "foo: ; knife client create "foo", then sneakernet around foo's private key?
[2013-06-27 17:42:19 -0400] siezer: s/:/\"/
[2013-06-27 17:42:42 -0400] lewiz: siezer: yes.  it only gets used as a lightweight bootstrap before the node properly gets chef'd up
[2013-06-27 17:42:43 -0400] siezer: I suppose you could, but but I'm not seeing the use case really
[2013-06-27 17:43:11 -0400] lewiz: siezer: chef-server won't have problems with the same node checking in multiple times?
[2013-06-27 17:43:17 -0400] siezer: what are you trying to do in this pre-chef cheffing that you can't do in a normal cheffing
[2013-06-27 17:43:39 -0400] siezer: if they all have the same private key, they're all the same node as far as chef-server is concerned
[2013-06-27 17:44:18 -0400] lewiz: siezer: they'd only have the same private key for the duration of kickstart which would do some basic setup.  using chef rules saves duplicating the work in kickstart config.  at a later date the nodes might be fully chef'd up
[2013-06-27 17:44:32 -0400] lewiz: siezer: I don't know that this makes sense yet.  I'm just trying to evaluate my options fully
[2013-06-27 17:44:45 -0400] siezer: well I've never actually tried this
[2013-06-27 17:44:46 -0400] siezer: but
[2013-06-27 17:45:05 -0400] siezer: I'd try doing a knife node create "kickstart"
[2013-06-27 17:45:13 -0400] siezer: knife client create kickstart
[2013-06-27 17:45:37 -0400] siezer: then bake the resulting key into your /etc/chef/client.pem
[2013-06-27 17:45:49 -0400] lewiz: siezer: that's exactly what I was thinking, yes
[2013-06-27 17:46:04 -0400] siezer: this is kind of what the validation pem is for really
[2013-06-27 17:46:21 -0400] siezer: sorta
[2013-06-27 17:46:26 -0400] lewiz: siezer: yep.  but there's no way for a client to fetch an existing validation key, is there?
[2013-06-27 17:46:46 -0400] lewiz: that's the problem I'm trying to solve.  so I'll probably use this kickstart node as a fallback if it can't autoregister
[2013-06-27 17:46:48 -0400] siezer: nope. you write it as part of the initial bootstrap
[2013-06-27 17:47:06 -0400] siezer: why not just bake the validation.pem into the kickstart and chef from there?
[2013-06-27 17:47:31 -0400] lewiz: siezer: I have validation.pem in kickstart.  that's how the host autoregisters.  but if that host is already present it fails
[2013-06-27 17:47:47 -0400] lewiz: siezer: perhaps I could just use knife to remove the existing node & client and go again
[2013-06-27 17:48:28 -0400] siezer: that's what I do... delete the client and node when de-provisioning a machine
[2013-06-27 17:48:57 -0400] lewiz: siezer: makes sense.
[2013-06-27 17:49:10 -0400] siezer: but to answer you actual initial question, you can make arbitrary client and node objects with the api (knife)
[2013-06-27 17:50:05 -0400] lewiz: siezer: thanks, you've been very helpful.  I appreciate some of this might sound idiotic... I'm mostly thinking out loud and trying to get a feel for how to handle this.
[2013-06-27 17:50:12 -0400] siezer: no problem
[2013-06-27 17:50:37 -0400] lewiz: siezer: I must admit the fact that I can't fetch a client.pem again is a real annoyance.  I guess I could build my own infrastructure to do this, but it's extra work
[2013-06-27 17:51:49 -0400] siezer: lewiz if you could do that, you hijack nodes
[2013-06-27 17:51:52 -0400] siezer: could
[2013-06-27 17:52:28 -0400] peregrinator: hello all - I'm installing chef server 11.0.8 on an ubuntu 12.04 box but getting errors when running the tests to confirm installation - google hasn't helped much
[2013-06-27 17:52:46 -0400] peregrinator: Creating client pedant_admin_client... Encountered an error attempting to create client pedant_admin_client Response Code was: 500 Response Body was: {"error":["internal service error"]} Exception during Pedant credentials setup
[2013-06-27 17:53:11 -0400] peregrinator: where should I be looking to resolve this?
[2013-06-27 17:53:46 -0400] sfalcon: peregrinator: what does: `chef-server-ctl status` give you?
[2013-06-27 17:54:17 -0400] peregrinator: run: bookshelf: (pid 3718) 703s; run: log: (pid 3717) 703s run: chef-expander: (pid 3677) 709s; run: log: (pid 3676) 709s run: chef-server-webui: (pid 3870) 686s; run: log: (pid 3869) 686s run: chef-solr: (pid 3627) 715s; run: log: (pid 3626) 715s run: erchef: (pid 4067) 667s; run: log: (pid 3757) 697s run: nginx: (pid 4066) 667s; run: log: (pid 4049) 669s run: postgresql: (pid 3534) 721s; run: log: (pid 3533) 721s run: rabbitmq: (
[2013-06-27 17:54:25 -0400] lewiz: siezer: yep, I see your point
[2013-06-27 17:55:03 -0400] gchristensen: so, the process to getting a fix merged in to an opscode cookbook has always confounded me. what does it take to get this fix: https://github.com/opscode-cookbooks/mysql/pull/94/files to this bug: http://tickets.opscode.com/browse/COOK-3149 merged in?
[2013-06-27 17:55:31 -0400] sfalcon: peregrinator: how much RAM is on the box? You can view logs with `chef-server-ctl tail` and try the self-test command again. Might help you identify what's up
[2013-06-27 17:56:38 -0400] peregrinator: sfalcon: not a lot of RAM, it's a micro instance at amazon, will look at logs
[2013-06-27 17:57:06 -0400] sfalcon: peregrinator: that isn't enough RAM. Use a small and it should work.
[2013-06-27 17:57:31 -0400] peregrinator: sfalcon: good to know! will switch boxes
[2013-06-27 17:57:32 -0400] tabolario: any berkshelfers around? having a strange issue that i can't seem to nail down (#berkshelf seems a bit dead at the moment)
[2013-06-27 17:57:52 -0400] ivey: i'll help you over there
[2013-06-27 18:03:45 -0400] gchristensen: so I just marked http://tickets.opscode.com/browse/COOK-3149 as confirmed (since I confirmed it) and then marked it as Fix Provided, since he submitted a PR... is that the right thing to do? I don't want to be a thorn in anyone's side, I just want to get this rolling :)
[2013-06-27 18:06:50 -0400] martha: has anyone tried to do a query action using the database cookbook?  I'm trying to get this working on a mysql database, but chef never runs the query, it always thinks that it is up to date:  http://pastebin.com/n9mmfEgy
[2013-06-27 18:30:16 -0400] shennyg: anyone know of an example cookbook integrating php-fpm and apache2?
[2013-06-27 18:37:41 -0400] log1kal: looking for some good chef_spec examples having to do with lwrps from other cookbooks. Anyone know of some good links?
[2013-06-27 18:42:04 -0400] log1kal: I have some minitest tests for the calling cookbook, but that means waiting for virtualbox provisioning time in my org :(
[2013-06-27 18:42:41 -0400] maruq: has anyone played with knife-azure? I seem to be having fun getting a connection via winrm
[2013-06-27 18:43:44 -0400] maruq: running the latest knife-azure (built from github), booting Win Server 2012
[2013-06-27 18:53:26 -0400] a13x2121: can i run a chef recipe locally?
[2013-06-27 18:55:22 -0400] erthad: hi again
[2013-06-27 18:55:54 -0400] erthad: re: omnibus-installed chef -- what is the recommended way to upgrade this one?
[2013-06-27 19:06:32 -0400] mbessey: Hey guys, I'm wondering if there's a way to change the chef user during execution?
[2013-06-27 19:06:58 -0400] noahmehl: I'm wondering how to substitute the arch (x86_64) in a chef recipe
[2013-06-27 19:07:05 -0400] maruq: It looks as though my winrm / knife-azure problems all come from the username / password. does the --winrm-user flag set the user on VM, or is the one to auth with?
[2013-06-27 19:07:20 -0400] noahmehl: like, I know i can do: #{node['platform_version'].to_i} for the release version
[2013-06-27 19:07:26 -0400] noahmehl: but how do I do the node's arch?
[2013-06-27 19:07:58 -0400] noahmehl: node kernel machine?
[2013-06-27 19:08:54 -0400] noahmehl: like #{node['kernel']['machine']}?
[2013-06-27 19:10:07 -0400] maruq: noahmehl: I don't know it off the top of my head, but but you could get everything ohai knows about a node using `knife node show -l <node-name>`
[2013-06-27 19:10:19 -0400] noahmehl: maruq: that's a great tool
[2013-06-27 19:10:20 -0400] noahmehl: thanks!
[2013-06-27 19:10:25 -0400] maruq: pipe that to a file, and you should be able to find a field you're after
[2013-06-27 19:14:02 -0400] mirzu: hopefully easy question: How do you search for all nodes that have anything in an attribute googling for solr syntax gives examples like company:['' TO *] but that returns an error: ERROR: ArgumentError: Type must be a string or a symbol!
[2013-06-27 19:20:06 -0400] jtimberman: mirzu: recipe or knife?
[2013-06-27 19:20:10 -0400] jtimberman: sounds like knife
[2013-06-27 19:20:17 -0400] jtimberman: knife search node "query"
[2013-06-27 19:20:26 -0400] jtimberman: where node is the index you want to search
[2013-06-27 19:22:01 -0400] djstunami: I'm trying to do something similar right now, I'd like to find all hosts with a virtualization.role of "host"
[2013-06-27 19:22:30 -0400] djstunami: while I can see what I'm looking for with knife search node "name:*" -a virtualization.role
[2013-06-27 19:22:56 -0400] jtimberman: djstunami: "virtualization_role:host"
[2013-06-27 19:23:08 -0400] jtimberman: djstunami: nested attributes are flattened with underscores in the solr field
[2013-06-27 19:23:11 -0400] djstunami: oh! underscores instead of dots
[2013-06-27 19:23:16 -0400] djstunami: thanks!!
[2013-06-27 19:23:21 -0400] jtimberman: that's a solr thing iirc.
[2013-06-27 19:23:28 -0400] djstunami: good to know
[2013-06-27 19:23:30 -0400] jtimberman: like, you can't have dots in the field name or something (i could be totally inaccurate on that)
[2013-06-27 19:25:02 -0400] djstunami: So if I want to know more about the query structure, I can just go look at solr docs?
[2013-06-27 19:25:12 -0400] mirzu: jtimberman: knife
[2013-06-27 19:30:35 -0400] cassianoleal: I'm having a bit of trouble with chefspec...
[2013-06-27 19:30:43 -0400] cassianoleal: can anyone help me with understanding why this fails?
[2013-06-27 19:30:44 -0400] cassianoleal: Failure/Error: expect(chef_run.directory "#{chef_run.node[:apache][:dir]}/apps-available").to be_owned_by chef_run.node[:apache][:user]
[2013-06-27 19:30:44 -0400] cassianoleal: expected <directory[/etc/apache2/apps-available] @name: "/etc/apache2/apps-available" @noop: nil @before: nil @params: {} @provider: Chef::Provider::Directory @allowed_actions: [:nothing, :create, :delete] @action: [:create] @updated: false @updated_by_last_action: false @supports: {} @ignore_failure: false @retries: 0 @retry_delay: 2 @source_line: "/private/Users/cassiano/Projects/cookbooks/zapache/vendor/cookbooks/zapache/recipes/default.rb:45:in `b
[2013-06-27 19:30:45 -0400] cassianoleal: from_file'" @elapsed_time: 0 @resource_name: :directory @path: "/etc/apache2/apps-available" @recursive: false @cookbook_name: :zapache @recipe_name: "default" @owner: "www-data" @group: "www-data" @mode: 493> to be owned by "www-data"
[2013-06-27 19:31:41 -0400] cassianoleal: I have @owner: "www-data"   and expect to be owned by "www-data" :-/
[2013-06-27 19:35:42 -0400] peregrinator: Hi all, I'm getting familiar with installing chef server 11 on ubuntu 12.04 and in the documentation for setting up a workstation it says to run `knife configure --initial` on the newly install server - either knife isn't installed or it's not in my path - should it be?
[2013-06-27 19:36:12 -0400] peregrinator: sfalcon: tests passed on the small server on ec2 - thanks for the help there
[2013-06-27 19:38:54 -0400] sfalcon: peregrinator: awesome!
[2013-06-27 19:39:02 -0400] stormerider: peregrinator: you need the chef client installed to get knife, iirc
[2013-06-27 19:39:38 -0400] peregrinator: stormerider: so am I supposed to install chef-client on the new server as well? did I miss that in the docs?
[2013-06-27 19:39:54 -0400] stormerider: 10 included both, 11 has them separate
[2013-06-27 19:40:22 -0400] stormerider: you dont have to have both on there, although the server probably should also be a client, but you need the client on any workstation
[2013-06-27 19:41:12 -0400] peregrinator: stormerider: ah I see
[2013-06-27 20:02:57 -0400] idlemichael: i'm referencing the mongodb cookbook with a wrapper cookbook. my wrapper cookbook cannot find the template files that are supplied by the mongodb cookbook. any ideas what i'm missing?
[2013-06-27 20:03:24 -0400] juliancdunn: idlemichael: specify the cookbook attribute in your template resource to be 'mongodb'
[2013-06-27 20:03:30 -0400] juliancdunn: otherwise it'll try to find the templates in your current cookbook
[2013-06-27 20:08:08 -0400] zanshin: I'm trying to get the apt cookbook working. Specifically adding a ppa. Here's what I have for the resource:
[2013-06-27 20:08:25 -0400] zanshin: apt_repository "#{node['subversion']['subversion_ppa']}" do
[2013-06-27 20:08:26 -0400] zanshin: uri node['subversion']['subversion_ppa']
[2013-06-27 20:08:27 -0400] zanshin: components ["main"]
[2013-06-27 20:08:28 -0400] zanshin: keyserver "keyserver.ubuntu.com"
[2013-06-27 20:08:29 -0400] zanshin: key "29E526FC"
[2013-06-27 20:08:30 -0400] zanshin: end
[2013-06-27 20:08:56 -0400] zanshin: Where the uri is http://ppa.launchpad.net/dominik-stadler/subversion-1.7/ubuntu
[2013-06-27 20:09:25 -0400] zanshin: All I get are error messages saying the enclosing directory does not exist
[2013-06-27 20:10:41 -0400] a13x2121: is there an easy way to pull attributes from ohai?
[2013-06-27 20:10:45 -0400] zanshin: Should the uri be http://ppa.launchpad.net/dominik-stadler/subversion-1.7/ubuntu or ppa:dominik-stadler/subversion-1.7
[2013-06-27 20:17:47 -0400] idlemichael: juliancdunn: what if the template is being created within the mongodb recipes, and it's IN that cookbook? i'm just referencing the mongodb cookbook itself
[2013-06-27 20:24:22 -0400] hakunin: anyone here can recommend a way to run multiple nodes in test-kitchen? I created a few "platforms", one per node, with each node having its own recipe in runlist. And I made a single default suite. This way everything works, I can launch multiple nodes, and have them talk to each other, but I can't run any tests. My tests are also separate for each node.
[2013-06-27 20:24:55 -0400] jtimberman: test-kitchen isn't really designed/intended to be a multi-node test lab environment.
[2013-06-27 20:25:14 -0400] jtimberman: it's designed primarily to test a single project on a single node in isolation.
[2013-06-27 20:25:32 -0400] hakunin: jtimberman: yeah, i've been noticing this
[2013-06-27 20:25:46 -0400] hakunin: jtimberman: i'm using the application cookbook approach, which is probably causing you some headache lately :)
[2013-06-27 20:26:07 -0400] hakunin: jtimberman: and i saw this old demo that tried to solve this problem: https://github.com/bryanwb/tk-demo
[2013-06-27 20:27:08 -0400] hakunin: jtimberman: the thing is - it's so close. i have multiple nodes running at the same time, each converged with its own runlist. All I need is to run a different test suite on each, and that little tiny next step seems impossible
[2013-06-27 20:27:16 -0400] behemphi: @jtimberman I have been thinking about this as we move in the direction of test kitchen will you define "project".  I am having a hard time thinking of it as less than a full web stack
[2013-06-27 20:27:18 -0400] jtimberman: hakunin: yeah, that's not a thing we're supporting in test kitchen, you'd have to ask bryan about it :)
[2013-06-27 20:28:00 -0400] jtimberman: i'd test a multi-node thing in a nonproduction environment.
[2013-06-27 20:28:22 -0400] jtimberman: and by non-production, i mean something that resembles what your actual production environment is, in some fashion and not "VMs on a dev laptop"
[2013-06-27 20:29:31 -0400] hakunin: jtimberman: in fact, i used to have suite per platform, and i was able to setup them separately and run tests on them just fine. Then i had to rewrite my .kitchen.yml because i wanted to have them talking to one another. I had to move runlists from suites to platforms, etc. This made it impossible to run a suite per node.
[2013-06-27 20:30:07 -0400] hakunin: jtimberman: i hear you. so if we just go back a bit
[2013-06-27 20:30:24 -0400] hakunin: jtimberman: how do you run arbitrary tests sitting in test kitchen on an arbitrary host
[2013-06-27 20:31:40 -0400] jtimberman: well
[2013-06-27 20:31:46 -0400] jtimberman: i run test kitchen to test cookbooks.
[2013-06-27 20:31:54 -0400] jtimberman: because I write "library" cookbooks.
[2013-06-27 20:32:03 -0400] jtimberman: whatever "library" cookbooks mean.
[2013-06-27 20:32:09 -0400] jtimberman: The ones that opscode publishes/maintains.
[2013-06-27 20:32:21 -0400] jtimberman: so my use case is not your use case.
[2013-06-27 20:32:41 -0400] hakunin: jtimberman: yeah, and I see how it works perfectly in your case
[2013-06-27 20:33:14 -0400] hakunin: jtimberman: the application cookbook usecase however is a tiny step away from being perfect too
[2013-06-27 20:33:26 -0400] hakunin: :(
[2013-06-27 20:33:30 -0400] xrl: what can I do to speed up cookbook sync? I'm using a strictly version environment (berkshelf apply BLAH) and it's still hella slow
[2013-06-27 20:33:44 -0400] jtimberman: hakunin: yeah, sorry - i don't have a solution.
[2013-06-27 20:33:48 -0400] xrl: 5-10s a cookbook from AWS
[2013-06-27 20:41:44 -0400] behemphi: xrl, I am moving to Berkshelf and re-deving all our cookbooks following The Way.  We are using chef-solo for that purpose (and chef-solo-search to support databags).  It is a stunning time saver
[2013-06-27 20:42:06 -0400] behemphi: We still intend to use the chef-server in prodcution but dev is now chef-solo!
[2013-06-27 20:42:52 -0400] lflux: jtimberman: while on the subject of test-kitchen - where are the actual tests in the postgresql cookbook?
[2013-06-27 20:43:09 -0400] maruq: has anyone managed to launch an azure windows instance via knife & strap it up via winrm?
[2013-06-27 20:43:21 -0400] maruq: I can open all the ports & stuff, but it never connects
[2013-06-27 20:44:03 -0400] Cheeezit: is there a way to modify cookbook recipe attributes without re-uploading the cookbook
[2013-06-27 20:44:04 -0400] jimiray: has anyone got experience w/ passenger_apache2 cookbook using passenger-4.0.5?
[2013-06-27 20:44:55 -0400] behemphi: @Cheezit I think chef-client -j will do the trick
[2013-06-27 20:45:24 -0400] ianco: coderanger: just noticed the psf-chf/haproxy cookbook includes its own deb, was just wondering why
[2013-06-27 20:45:30 -0400] aramus_: Hello, when I use the command "knife data bag create test test.json", I can access that data bag item. I was under the assumption that this would create a directory called "data_bags" and a file "test.json" that would be in it but I cannot find it anywhere. Where would it be?
[2013-06-27 20:46:19 -0400] Cheeezit: @behemphi thx I'll check it out
[2013-06-27 20:48:14 -0400] maruq: aramus_: That command creates it on the server, not on your workstation. you can create the files locally, and then upload to the server with `knife data bag from file test/test.json`
[2013-06-27 20:49:31 -0400] maruq: aramus_: I may have a typo on the last bit not sure if it's "test/test.json" or "test test.json", I think the latter
[2013-06-27 20:50:42 -0400] aramus_: maruq: I see. Would this create a directory called data_bags on the server or I'd have to access it using knife from the workstation every time?
[2013-06-27 20:51:35 -0400] xrl: behemphi: what does it mean to re-dev cookbooks?
[2013-06-27 20:51:51 -0400] jtimberman: lflux: files/default/tests/minitest
[2013-06-27 20:51:57 -0400] maruq: aramus_: this just uploads your data bag from your local workstation to the server. you would make a change locally & run the same command again to push to server
[2013-06-27 20:52:38 -0400] lflux: jtimberman: ah, thanks
[2013-06-27 20:52:43 -0400] behemphi: xrl we are rewriting our cookbooks from scratch and adopting a number of best practices (application cookbook pattern, eschewing roles, The Berkshelf Way, etc).  So re-dev = re-developing from ground up
[2013-06-27 20:52:48 -0400] maruq: aramus_: you don't have to have the data bags locally, they can just live directly on the server, but your coworkers will thank you for putting them in version control ;)
[2013-06-27 20:53:06 -0400] jtimberman: I would definitely not say that eschewing roles is a best practice :P
[2013-06-27 20:53:16 -0400] jtimberman: that is
[2013-06-27 20:53:18 -0400] jtimberman: roles are awesome.
[2013-06-27 20:53:19 -0400] jtimberman: :P
[2013-06-27 20:53:20 -0400] gkarekinian: aramus_: The command should be "knife data bag from file test data_bags/test/test.json" cc maruq
[2013-06-27 20:53:43 -0400] xrl: behemphi: sure, that's what I'm doing as well. I'm taking a 3 year old config and berkshelfing it. but it's still so slow to deploy to production
[2013-06-27 20:53:43 -0400] gkarekinian: The first argument is the data bag's id and the second one the path to the file
[2013-06-27 20:54:11 -0400] aramus_: maruq: does chef put them in version control? If not, I should probably manually write the data bag files in my repository and add them to git.
[2013-06-27 20:54:25 -0400] behemphi: @jtimberman having thought through it, it seems a cookbook that serves the function of a role is the better way to go.  Can you talk me off the ledge (this is not troll bait)
[2013-06-27 20:54:30 -0400] jtimberman: chef doesn't put anything in version control
[2013-06-27 20:54:38 -0400] maruq: aramus_: nope. uploading to chef server & git are too different things
[2013-06-27 20:54:59 -0400] jtimberman: behemphi: include_recipe does not append the included recipe to the node['recipes'] attribute.
[2013-06-27 20:55:07 -0400] behemphi: @xrl that is too funny as that is exactly what we are doing!  Are you using chef-solo as the vagrant provider?
[2013-06-27 20:55:15 -0400] jtimberman: behemphi: so you have no way to properly search for which nodes include a particular recipe.
[2013-06-27 20:55:28 -0400] aramus_: maruq: thanks, i guess manually editing them instead of using knife would be better then.
[2013-06-27 20:55:31 -0400] maruq: aramus_: there are tools around that workflow though I think knife-spork ?
[2013-06-27 20:55:35 -0400] jtimberman: the semantics of 'knife search node "role:foo"' are easy to reason about.
[2013-06-27 20:55:53 -0400] behemphi: @jtimberman I was thinking to handle the knife search issue with tags
[2013-06-27 20:55:55 -0400] xrl: behemphi: ya, we're using vagrant to test things out. but now I'm doing EBS stuff so I need to test on AWS
[2013-06-27 20:56:05 -0400] maruq: aramus_: yes, but then if you ever accidentally kill your chef server, you have to manually add them all again
[2013-06-27 20:56:06 -0400] xrl: behemphi: but dang is it slow on first boot... after that it's fine
[2013-06-27 20:56:15 -0400] xrl: behemphi: I might be optimizing the wrong thing ;)
[2013-06-27 20:56:16 -0400] jtimberman: we use tags for things like "don't monitor" or "don't deploy" kinds of things.
[2013-06-27 20:56:25 -0400] jtimberman: treating them as ephemeral
[2013-06-27 20:56:38 -0400] jtimberman: I mean, use the primitives you like
[2013-06-27 20:56:54 -0400] behemphi: ah, I think I misunderstood your question @xrl I thought it was the cookbooks coming from in from AWS (where the chef server might keep them) was the problem.  apologiies for the rabbit trail!
[2013-06-27 20:56:56 -0400] aramus_: maruq: thanks, i'll definitely look into knife-spork
[2013-06-27 20:56:58 -0400] jtimberman: but the idea that roles are bad for everyone is disingenuous.
[2013-06-27 20:58:25 -0400] behemphi: It understand you @jtimberman and will stipulate that my statement about not using roles as a best practice is too strong :-)
[2013-06-27 20:59:06 -0400] gkarekinian: knife-spork doesn't deal with data bags though
[2013-06-27 21:00:07 -0400] jtimberman: behemphi: :D
[2013-06-27 21:01:43 -0400] maruq: gkarekinian: hmm that's not the one I was thinking of then there was some git + chef workflow stuff
[2013-06-27 21:02:14 -0400] devx: do i need to include ohai as part of my recipe, or is it included automatically?
[2013-06-27 21:07:11 -0400] maruq: devx: depends what you mean ohai is installed as part of chef & will automagically pass system attributes up for use inside your recipes
[2013-06-27 21:07:26 -0400] devx: ok
[2013-06-27 21:07:31 -0400] devx: that's what i wanted to know
[2013-06-27 21:08:05 -0400] devx: I wasn't sure if i needed to call it explicitly
[2013-06-27 21:08:09 -0400] devx: thanks for the info
[2013-06-27 21:22:01 -0400] jmickle: miah: you around?
[2013-06-27 21:40:21 -0400] gad0lin: heyo, I would like to get notifications about any new uploads of cookbooks, env, roles and connect ideally hook hubot, so it could notify me. I am looking at knife spork. Its good but requires entire workflow change and I cannot ensure that someone wont use knife cookbook upload. Is there sth on chef server side supporting it?
[2013-06-27 22:06:05 -0400] gad0lin: guys, funny question I have just removed all the clients from the chef server and try to recover, webui stopped working, no change after restart, any hints?
[2013-06-27 22:09:22 -0400] gad0lin: I restored backup :p
[2013-06-27 22:40:30 -0400] zaargy: anyone else have the misfortune of having to run chef on widnows?
[2013-06-27 22:40:37 -0400] zaargy: if so, do you use a ssh server? which one?
[2013-06-27 22:51:19 -0400] juliancdunn: zaargy: you can use WinRM to talk to Windows
[2013-06-27 22:51:42 -0400] juliancdunn: that's what I do
[2013-06-27 22:54:59 -0400] Majost: is #{'chef_home'} a thing?
[2013-06-27 22:57:01 -0400] maruq: juliancdunn: did you get WinRM to work from a Mac?
[2013-06-27 22:57:25 -0400] maruq: mine hangs trying to connect, but it looks like the ports are open in Azure
[2013-06-27 23:03:15 -0400] wdpro_kevin: ohai chefs
[2013-06-27 23:03:39 -0400] wdpro_kevin: anyone know a way to inspect the run_list of a node from within a recipe?
[2013-06-27 23:04:02 -0400] juliancdunn: maruq: yeah, I use a Mac
[2013-06-27 23:04:19 -0400] juliancdunn: knife-windows doesn't currently do credssp/kerberos though
[2013-06-27 23:04:23 -0400] juliancdunn: so you have to open port 5985
[2013-06-27 23:04:29 -0400] wdpro_kevin: I'm totally blanking I'm msure it's like node.run_list?(recipe[hello])
[2013-06-27 23:04:38 -0400] maruq: juliancdunn: hmm yeah, i did that
[2013-06-27 23:04:46 -0400] juliancdunn: hmm... I've used it with Azure before
[2013-06-27 23:05:01 -0400] maruq: juliancdunn: which OS?
[2013-06-27 23:05:12 -0400] juliancdunn: maruq: 2012
[2013-06-27 23:05:29 -0400] juliancdunn: did you configure the winrm service on the target?
[2013-06-27 23:05:29 -0400] maruq: I was trying Win Server 2012 Datacenter & R2
[2013-06-27 23:05:37 -0400] Otterley: wdpro_kevin, node.run_list.include?
[2013-06-27 23:05:46 -0400] Otterley: wdpro_kevin, but I would caution against using it
[2013-06-27 23:05:57 -0400] Otterley: it's better practice to predicate on a node attribute than its run list
[2013-06-27 23:05:58 -0400] maruq: juliancdunn: I was just using default images Azure offers
[2013-06-27 23:06:17 -0400] juliancdunn: maruq: I don't believe those have winrm turned on by default
[2013-06-27 23:06:30 -0400] juliancdunn: do they have a way to pass in "user data" on machine creation yet?
[2013-06-27 23:06:37 -0400] wdpro_kevin: thanks Otterley.
[2013-06-27 23:06:41 -0400] juliancdunn: here's my cheatsheet for bootstrapping machines in EC2: https://gist.github.com/juliandunn/7995d219c979d91becf0
[2013-06-27 23:06:58 -0400] juliancdunn: the stuff in the powershell block is what needs to be run when the machine is created
[2013-06-27 23:08:03 -0400] maruq: juliancdunn: ah, I was trying to go through knife-azure, knife-windows might be easier
[2013-06-27 23:10:33 -0400] juliancdunn: maruq: I think 'knife azure server create' will request the machine for you through the azure API and then just calls the knife-windows bootstrap
[2013-06-27 23:11:12 -0400] maruq: yeah, that's what I was doing one sec, I'll gist
[2013-06-27 23:13:55 -0400] maruq: juliancdunn: https://gist.github.com/markbate/8c900c549108110b450e
[2013-06-27 23:14:18 -0400] maruq: I'm not really a windows user though.. it's an experiment
[2013-06-27 23:15:11 -0400] Majost: nm, figured out there seems to be Chef::Config[:encrypted_data_bag_secret]
[2013-06-27 23:19:47 -0400] maruq: juliancdunn: can you see anything obvious I'm missing there?
[2013-06-27 23:23:19 -0400] juliancdunn: maruq: the command looks sensible.
[2013-06-27 23:23:38 -0400] maruq: juliancdunn: ok thanks
[2013-06-27 23:23:40 -0400] juliancdunn: but I'm going to put money down that the stock Azure images don't have all that firewall-and-WinRM-config nonsense I posted earlier enabled
[2013-06-27 23:23:55 -0400] maruq: yeah, that was my thought
[2013-06-27 23:24:09 -0400] juliancdunn: try to launch one by hand and monkey with the WinRM config until "knife bootstrap windows" works
[2013-06-27 23:24:26 -0400] maruq: I might borrow your gist & see if I can get stuff going ;)
[2013-06-27 23:24:39 -0400] juliancdunn: yeah, I've had success with launching EC2 machines with one click using that
[2013-06-27 23:24:52 -0400] maruq: cool
[2013-06-27 23:24:52 -0400] juliancdunn: badger MSFT to support user-data if they don't have it yet :-)
[2013-06-27 23:27:45 -0400] withnale: I've bought a sandisk clip+ little mp3 player and having real trouble with it with ubuntu. I can boot it and see it in nautilus but whenever I try to sync to it from either rhythmbox or banshee both of them bomb out.
[2013-06-27 23:28:19 -0400] withnale: any ideas how to get it to talk? I've tried setting it to use MTP and MSC and neither seem to fly.
[2013-06-27 23:30:49 -0400] Otterley: withnale, wrong channel?
[2013-06-27 23:31:20 -0400] withnale: doh! thanks - it seemed a bit quiet.
[2013-06-27 23:33:57 -0400] cheflevelramen: Hi all, quick question. I'm writing a cookbook for Katello (new project from Redhat that will augment/replace Satellite), and I'm running into a design delemma. Katello runs on Apache, and by default Redhat blocks 80/443 ports in iptables. So, my question is, should I modify iptables in the cookbook, or should I keep it seperate and mention that in the README?
[2013-06-27 23:37:27 -0400] Otterley: cheflevelramen, I would note it in the README.  you don't want your cookbook to have unexpected side effects.
[2013-06-27 23:38:13 -0400] Otterley: firewalls are a site policy matter that should remain under the control of the user, even if would render yours ineffective.
[2013-06-27 23:39:36 -0400] f1gjam: hey guys, anyone here running minitest-handler?
[2013-06-27 23:39:44 -0400] f1gjam: I am trying to get a very simple test done on windows
[2013-06-27 23:39:46 -0400] f1gjam: with no luck
[2013-06-27 23:39:58 -0400] cheflevelramen: Otterley: Cool, thanks. I was thinking the same thing, but wanted to try to design the cookbook to fix all 'unforeseen' issues. Being a little too ambitious me thinks.
[2013-06-27 23:40:47 -0400] Otterley: cheflevelramen, from a practical perspective, that would be difficult anyway.  you don't know whether a user's firewall cookbook will run after yours and undo your changes.
[2013-06-27 23:41:07 -0400] cheflevelramen: Otterley: Yea, I was beginning to realize that :)
[2013-06-27 23:45:43 -0400] juliancdunn: cheflevelramen: you can also note that Opscode's apache2 cookbook has an iptables recipe just to deal with that issue :)
[2013-06-27 23:46:31 -0400] Otterley: I contend that that's Not Cool.
[2013-06-27 23:47:21 -0400] juliancdunn: you don't have to run it... it's not on by default
[2013-06-27 23:47:44 -0400] Otterley: ah.  that's reasonable

[2013-06-12 00:00:22 -0400] ccapndave: Or supremely over-confident...
[2013-06-12 00:01:18 -0400] ccapndave: I can't quite figure out the docs to be honest; once I've done that it will be easier I am sure
[2013-06-12 00:01:34 -0400] paulmooring: ccapndave: have you checked out learnchef?
[2013-06-12 00:01:41 -0400] ccapndave: I just found Chef::Application.fatal! mentioned in passing, so I'm assuming there is a Chef::Application.debug or .info or something but can't find the page for it
[2013-06-12 00:01:43 -0400] ccapndave: No
[2013-06-12 00:02:00 -0400] paulmooring: it's layed out more like a tutorial and less like a reference
[2013-06-12 00:02:08 -0400] paulmooring: if you're new to Chef it's worth a look
[2013-06-12 00:02:13 -0400] paulmooring: https://learnchef.opscode.com/
[2013-06-12 00:03:03 -0400] ccapndave: Think I've got as far as learnchef
[2013-06-12 00:03:10 -0400] ccapndave: I need to learn the API really
[2013-06-12 00:03:44 -0400] paulmooring: capen: You probably want Chef::Log.fatal (debug, ect.)
[2013-06-12 00:03:47 -0400] paulmooring: rather than Application
[2013-06-12 00:03:56 -0400] ccapndave: Is there just some normal Rubydoc online somewhere
[2013-06-12 00:04:17 -0400] ccapndave: Where I can find these kind of commands
[2013-06-12 00:06:02 -0400] paulmooring: well you can find the Rubydocs online
[2013-06-12 00:06:11 -0400] Otterley: learning Chef via Rubydoc is not a good method
[2013-06-12 00:06:23 -0400] Otterley: it's useful for getting into the internals, but not really understanding Chef
[2013-06-12 00:06:32 -0400] paulmooring: but that's not necessarily the best idea as you'll find a lot of methods that aren't suppose to be public
[2013-06-12 00:06:49 -0400] paulmooring: you shouldn't need much out of the Ruby API, but should learn the DSL
[2013-06-12 00:07:33 -0400] ccapndave: ok
[2013-06-12 00:08:15 -0400] coderanger: Or go write recipes in Python!
[2013-06-12 00:08:16 -0400] paulmooring: in my opinion it's better to think of Ruby as a embedded Chef component than Chef as a Ruby library
[2013-06-12 00:08:19 -0400] coderanger: Warning: don't actually do that
[2013-06-12 00:08:26 -0400] ccapndave: :)
[2013-06-12 00:08:43 -0400] coderanger: I should fix up chef-funnel a bit more though
[2013-06-12 00:08:50 -0400] coderanger: Never got to exposing the node to python
[2013-06-12 00:09:01 -0400] paulmooring: also don't take coderanger too seriously, that's my other pro-tip ;)
[2013-06-12 00:09:10 -0400] coderanger: s/too //
[2013-06-12 00:09:16 -0400] asharp: i've got a bash script that changes to a specific directory and then gives an ant command. if i do it manually it works fine, but if i run it as a chef script then it fails. ant command not found
[2013-06-12 00:10:26 -0400] asharp: coderanger: it's all on a vagrant vm. when i ssh into the vm it's the same .bashrc as chef works with, right?
[2013-06-12 00:10:58 -0400] coderanger: Unless you changed it, yes
[2013-06-12 00:11:12 -0400] coderanger: How did you install ant?
[2013-06-12 00:12:06 -0400] asharp: coderanger: just a minute
[2013-06-12 00:13:49 -0400] asharp: coderanger: okay i can't answer that question, but i just added another cd to the bash script and now it works
[2013-06-12 00:13:58 -0400] asharp: that cd is right after the ant call
[2013-06-12 00:16:26 -0400] asharp: coderanger: is it possible that it executes the commands of the bash script out of order?
[2013-06-12 00:17:04 -0400] coderanger: No ...
[2013-06-12 00:17:22 -0400] asharp: coderanger: okay now i just 'wrap' the ant commands with cd commands and it works
[2013-06-12 00:18:50 -0400] Fox__: hey all
[2013-06-12 00:19:03 -0400] coderanger: asharp: Whats the actual error?
[2013-06-12 00:19:11 -0400] asharp: 'ant not found'
[2013-06-12 00:19:18 -0400] asharp: sorry
[2013-06-12 00:19:22 -0400] asharp: 'ant: command not found'
[2013-06-12 00:19:26 -0400] coderanger: Can you pastebin the recipe code?
[2013-06-12 00:19:33 -0400] coderanger: Someone about this doesn't make sense
[2013-06-12 00:19:37 -0400] coderanger: er, something
[2013-06-12 00:20:13 -0400] Fox__: does anyone have any experience trying to bootstrap a windows ec2 instance in a vpc using knife?
[2013-06-12 00:20:38 -0400] asharp: coderanger: i don't think i'm supposed too, just interning here. thanks though
[2013-06-12 00:21:20 -0400] coderanger: asharp: I would check for syntax issues in your bash code
[2013-06-12 00:21:42 -0400] asharp: coderanger: k will do
[2013-06-12 00:26:40 -0400] asharp: coderanger: okay definitely is not working, i was foolish, those commands take about a half hour to complete
[2013-06-12 00:27:21 -0400] coderanger: More likely you were just masking the return value of the bash script itself so chef wasn't erroring out
[2013-06-12 00:28:36 -0400] asharp: i'm supposed to put the bash in between 'code <<-EOH' and 'EOH' right?
[2013-06-12 00:29:04 -0400] coderanger: Thats a Ruby heredoc, yes
[2013-06-12 00:41:40 -0400] asharp: coderanger: so i think you were on to something with the environment bit. i'm adding an environment attribute to the bash resource. i'm formatting it as
[2013-06-12 00:42:13 -0400] asharp: environment { 'ASDF' => "path", 'JKL' => "another/path" }
[2013-06-12 00:42:23 -0400] asharp: coderanger: is that correct?
[2013-06-12 00:43:41 -0400] coderanger: Yes
[2013-06-12 00:43:51 -0400] coderanger: Well no
[2013-06-12 00:43:57 -0400] coderanger: You need environment({..})
[2013-06-12 00:44:02 -0400] coderanger: thanks to ruby parsing nonsense
[2013-06-12 00:44:17 -0400] asharp: okay good b/c i was getting syntax error. thank you for your patience
[2013-06-12 00:44:19 -0400] coderanger: or environment FOO: 'bar', BAZ: 'whatever'
[2013-06-12 00:44:33 -0400] Otterley: it's not ruby parsing nonsense; they're arguments to a function
[2013-06-12 00:44:43 -0400] Otterley: that people are leaving parens out weirds me out more.
[2013-06-12 00:45:07 -0400] coderanger: Otterley: foo({}) vs foo() {} is an awful parser ambiguity
[2013-06-12 00:45:09 -0400] Otterley: (I realize my opinion here is in the minority)
[2013-06-12 00:45:24 -0400] coderanger: And people generally don't realize that chef resources and attributes are method calls
[2013-06-12 00:45:36 -0400] coderanger: Otterley: Do you do node()['foo'] too ;-)
[2013-06-12 00:46:32 -0400] Otterley: you mean node isn't a variable?  surprise, surprise
[2013-06-12 00:46:48 -0400] Otterley: MAGIC!
[2013-06-12 00:47:10 -0400] coderanger: Otterley: Local variables must be lexical so it can't be, and instance vars always have @
[2013-06-12 00:47:19 -0400] coderanger: _everything else_ is either a method call or const get
[2013-06-12 00:47:24 -0400] coderanger: Thats just how Ruby works
[2013-06-12 00:47:44 -0400] coderanger: and it means the parser is awful and ugly
[2013-06-12 00:47:53 -0400] Otterley: Yeah, I know.  I'm just pointing out that it leads to confusion like this
[2013-06-12 00:48:06 -0400] Otterley: preaching to the choir I'm sure
[2013-06-12 00:49:19 -0400] asharp: is there any way to point the environment attribute to a file (say .bashrc?)
[2013-06-12 00:49:54 -0400] asharp: actually i think it's working now
[2013-06-12 00:49:59 -0400] asharp: thanks
[2013-06-12 00:50:52 -0400] coderanger: asharp: No, its just a set of keys and values that will be set before the bash subproc is run
[2013-06-12 01:00:01 -0400] markxnelson: hi chefs.. i have an odd issue - I created a new cookbook, uploaded it, created a role, assigned it to a node, I can see it in the runlist in the UI or when I run knife show node - but when I run chef-client on the node - it is saying it has an empty run list/no roles and is not doing anything...
[2013-06-12 01:05:43 -0400] Otterley: what is the node name according to chef-client and /etc/chef/client.rb?  do they match?
[2013-06-12 02:21:38 -0400] jhowarth: Is the mount resource idempotent?  i.e. if the mount already exists will it try to remount it?
[2013-06-12 02:34:14 -0400] jhowarth: reading the code it looks like it is
[2013-06-12 02:56:30 -0400] vaskas: Hi guys. Test-kitchen question. Is it possible to define platform-specific test suites?
[2013-06-12 03:44:37 -0400] grobot_: apt cookbook fails because of "use_inline_resources" - is this a chef version issue?
[2013-06-12 03:45:58 -0400] grobot_: from https://github.com/opscode-cookbooks/apt/commit/7d3fb0018d99066d20358266f1ab32629b489581
[2013-06-12 03:46:15 -0400] grobot_: (commenting out that value makes it work fine)
[2013-06-12 03:46:22 -0400] grobot_: s/value/method/
[2013-06-12 03:46:28 -0400] spheromak: grobot_, chef11 brings in use_inline_resources
[2013-06-12 03:46:50 -0400] grobot_: right, so i need to upgrade my coworker's chef-solo on the vm. thanks.
[2013-06-12 05:48:04 -0400] hakunin: could somebody assist me with berkshelf? I can't install anything, it just errors out like this: https://gist.github.com/maxim/03133b79fd4926b3e4c9
[2013-06-12 05:48:16 -0400] hakunin: cc ivey
[2013-06-12 05:48:55 -0400] hakunin: version 2.0.3
[2013-06-12 05:55:11 -0400] hakunin: hm weird, now it worked
[2013-06-12 05:59:58 -0400] koaps: Is there a way to manage multiple opensource chef servers? or get the webui to use multiple servers? I wasn't sure if you can use the lb service in chef 11
[2013-06-12 06:26:27 -0400] stormerider: koaps: what do you mean by "manage multiple"? if you mean like with knife, look at knife-block
[2013-06-12 06:27:03 -0400] stormerider: if you mean clustering, i think some people are doing that with HA on the PG DB, but i dont know anything abt that personally
[2013-06-12 06:34:57 -0400] koaps: stormerider: thanks, I looked at knife-block, it could be a way to handle the issue maybe
[2013-06-12 06:35:52 -0400] koaps: ideally I wanted a single webui to manage chef in multiple datacenters, but that would require a bunch of code work
[2013-06-12 06:47:52 -0400] stormerider: you could probably use knife block + a good Rakefile to tie things together (and Berkshelf, IMO)
[2013-06-12 06:48:11 -0400] koaps: an override attribute in an environment will be higher precedence than a default attribute in a cookbook correct? (just making sure I'm reading the doc page right)
[2013-06-12 06:49:26 -0400] koaps: I was going to check out berkshelf, we are in the beginning stages of using chef and i'm trying to figure out how we should approach it, since both ops and dev are working on cookbooks, it could turn into a cluster-f pretty quickly
[2013-06-12 06:49:48 -0400] koaps: I'm forcing people to use foodcritic
[2013-06-12 06:51:04 -0400] stormerider: berkshelf allows you to keep your repos to your own code and stop dealing with the external cookbooks, along with handling dependencies automatically. (assuming they're specified properly in the cookbooks, of course)
[2013-06-12 06:51:35 -0400] stormerider: koaps: i believe that is correct, but i only use environments for locking cb versions, personally.
[2013-06-12 06:55:12 -0400] koaps: I'm wondering if I'm using env in a way that won't be an issue, basically setting attributes that are uniq to our environments (prod, stage, dev, etc), I like being able to move nodes from one environment to another and have all the attributes change, but I've seen some talks say not to use them for that purpose and use attributes in cookbooks, wondering if I should have both and use override in the env
[2013-06-12 06:56:37 -0400] stormerider: there's a lot of ways to do things, really
[2013-06-12 06:56:53 -0400] stormerider: IMO the most important thing is to decide on a plan/policy and stick to it.
[2013-06-12 06:57:11 -0400] stormerider: chef makes it pretty easy to change things if you find it's not working out the way you meant it to.
[2013-06-12 06:58:08 -0400] koaps: yea, I'm trying to keep the bubble and tape out of the code, already not a big fan of some of the stuff I'm seeing using bash and shellout in the cookbooks
[2013-06-12 06:58:32 -0400] koaps: s/bubble/bubble gum/ that is
[2013-06-12 06:58:34 -0400] stormerider: *nod*
[2013-06-12 06:58:52 -0400] stormerider: time for me to turn into a pumpkin, best of luck!
[2013-06-12 06:59:04 -0400] koaps: l8rs
[2013-06-12 07:53:37 -0400] Philipp_: anyone uses knife solo with the identity file option?
[2013-06-12 08:12:45 -0400] b0c1: hi
[2013-06-12 08:13:33 -0400] b0c1: ehh :)
[2013-06-12 08:13:47 -0400] admin0: pizza will be in the evening :)
[2013-06-12 08:13:50 -0400] m4rcu5: ohai b0c1 and thanks admin0
[2013-06-12 08:13:53 -0400] b0c1: nomnom
[2013-06-12 08:14:34 -0400] b0c1: Whats the best way? I have own application. I create a cookbook, and receipe to install.
[2013-06-12 08:14:46 -0400] b0c1: But how can I handle the new versions deploy?
[2013-06-12 08:15:09 -0400] m4rcu5: b0c1: as in when its installed or what do you mean?
[2013-06-12 08:15:15 -0400] b0c1: (I using vagrant) its enough to vagrant provision and its install the new war file
[2013-06-12 08:15:50 -0400] b0c1: (so chef know the file is changed and redeploy it?)
[2013-06-12 08:17:21 -0400] b0c1: ok I start from the beginning... :D Im a little discursive :)
[2013-06-12 08:17:41 -0400] m4rcu5: b0c1: you could use a version number in your remote file and use a attribute to set it like the omnibus_updater cookbook
[2013-06-12 08:18:24 -0400] b0c1: First Im now in win. So I have two virtualbox vm, first is where I using knife, second is the test vm...
[2013-06-12 08:19:44 -0400] hakunin: hi, I'm trying to understand something. I created a custom cookbook for my infrastructure, which has multiple recipes for building different nodes. I was using test kitchen to test drive it, all good. Now I want to bootstrap an actual server with knife solo. So I created a kitchen, and used Berkshelf to depend on my cookbook from the kitchen. However, my cookbook depends on some github cookbooks, and kitchen doesn't know that, s
[2013-06-12 08:19:44 -0400] hakunin: o it's trying to use community versions.
[2013-06-12 08:20:27 -0400] b0c1: I dunno im using the right way... so I create a role, with using many recipes (logstash, mongodb, java, tomcat etc.)
[2013-06-12 08:20:49 -0400] b0c1: (recipes installed with knife cookbook site install)
[2013-06-12 08:21:01 -0400] b0c1: and using default/override attributes to configure it
[2013-06-12 08:21:38 -0400] b0c1: in vagrant config I set chef solo and set only the role
[2013-06-12 08:21:54 -0400] b0c1: here I have some question:
[2013-06-12 08:21:59 -0400] b0c1: -this is the right way?
[2013-06-12 08:22:16 -0400] hakunin: I guess this describes my situation: https://github.com/RiotGames/berkshelf/issues/154
[2013-06-12 08:23:01 -0400] b0c1: -to special configure the installed applications (example mongodb initial database import), using my own cookbook mongodb receipe, or modify the installed cookbook receipe?
[2013-06-12 08:24:26 -0400] b0c1: -this architecture is good for hosted/private chef too?
[2013-06-12 08:24:42 -0400] b0c1: thnx
[2013-06-12 08:25:03 -0400] m4rcu5: b0c1: well, you could create your own mycompany-monodb::config-db recipe and use that, and maybe depend on mongodb::default, or you could use chef-rewind to change the mongodb recipe in your own cookbook. or indeed modify the original cookbook, however updating is a bit harder then
[2013-06-12 08:26:17 -0400] b0c1: m4rcu5: I have a own cookbook, here I want to initialize the mongodb (for example) and my war file install, etc...
[2013-06-12 08:26:58 -0400] b0c1: so its depend to mongodb, but in the role its need to only my cookbook?
[2013-06-12 08:27:38 -0400] b0c1: if yes, what happened if my cookbook depend more than one cookbook?
[2013-06-12 08:27:47 -0400] b0c1: for example, tomcat
[2013-06-12 08:28:57 -0400] m4rcu5: b0c1: if you use include_recipe in your cookbook, there is no need to install the dependant cookbooks by hand, if not, then you will need to install them by hand
[2013-06-12 08:29:18 -0400] b0c1: install them mean: site install...
[2013-06-12 08:29:36 -0400] b0c1: or need to set in the role run_list ?
[2013-06-12 08:29:47 -0400] m4rcu5: run_list
[2013-06-12 08:29:51 -0400] b0c1: ok
[2013-06-12 08:30:16 -0400] b0c1: so mongodb installed in runlest, after that my receipe
[2013-06-12 08:30:24 -0400] b0c1: import the data into the db
[2013-06-12 08:32:13 -0400] b0c1: I imagine, my application only do post configuration :)
[2013-06-12 08:34:03 -0400] m4rcu5: b0c1: i would have your cookbook depend or include the mongodb one, what happens if you app will run earlyer in the run_list?
[2013-06-12 08:55:20 -0400] b0c1: m4rcu5: my app depend to the mongodb
[2013-06-12 08:56:07 -0400] b0c1: but You said, its not enough, mongodb need in the runlist
[2013-06-12 08:56:13 -0400] b0c1: or I misunderstood you :)
[2013-06-12 08:57:39 -0400] m4rcu5: b0c1: did you just add depends mongodb in the metadata or really included the needed recipe in your code?
[2013-06-12 08:57:44 -0400] m4rcu5: s/code/recipe/
[2013-06-12 08:58:24 -0400] b0c1: only depend in metadata
[2013-06-12 09:02:48 -0400] m4rcu5: b0c1: so the cookbook wil be uploaded to teh node, but it does nothing with it, you will need to add an include_recipe somewhere if you hard depend on it
[2013-06-12 09:10:42 -0400] b0c1: ok, in this case the role run_list receipe[mongodb::receipename] is not required? only my own receipe (which include the mongodb receipe)
[2013-06-12 09:12:15 -0400] steffenmllr: Hey there - is there a way to tell knife solo to use the default values when I'm configuring my node within the josn?
[2013-06-12 09:46:53 -0400] _smadamr: Hi, is it realistic to have an encrypted data_bag with its own key, and have that data decrypted and used in different cookbook?
[2013-06-12 10:08:52 -0400] mmack: hey all... how can i make a template executable under /usr/local/bin/ ? I have a template resource, it's copied to the right place but i don't know how i can change richts to execute it...
[2013-06-12 10:12:48 -0400] aruntomar: mmack: in the template resource specify the mode "0755", and when the template is rendered and copied to the location, it'll have those permissions that you specified
[2013-06-12 10:13:00 -0400] mmack: ah ok thanks!
[2013-06-12 10:13:01 -0400] aruntomar: mmack: http://docs.opscode.com/essentials_cookbook_templates.html
[2013-06-12 11:01:37 -0400] nicloay: hey guys. Could someone tell me what i need to do next. I applied role to the node, this role contains some receipts, but i can't find what to do next to apply new receipts to the node. do i need to use knife bootstrap NODE_NAME or something else.
[2013-06-12 11:15:17 -0400] rbueno: nicloay Do you want create more recipes on your chef-server ? thats it ?
[2013-06-12 11:15:58 -0400] nicloay: no, I alredy uploaded receipt to my server (munin from site) create the role monitoring, and now i don't know how to perform default instalation of munin on node
[2013-06-12 11:16:58 -0400] nicloay: all steps from this tutorial is done http://community.opscode.com/cookbooks/munin now i just need to install munin server.
[2013-06-12 11:20:47 -0400] rbueno: You are trying to add the recipe on runlist of a machine or a group of machines ?
[2013-06-12 11:21:02 -0400] nicloay: http://storage4.static.itmages.ru/i/13/0612/h_1371035990_3278994_3292634839.png runlist contains role monitoring
[2013-06-12 11:21:41 -0400] nicloay: do i need to run something "knife bootstrap 192.168.1.12 --sshuser ... --run-list "role[monitoring]" --sudo:" ?
[2013-06-12 11:21:47 -0400] ctennis: nicloay, you have to run the 'chef-client' program on the machine you're wanting to do that work on
[2013-06-12 11:22:05 -0400] rbueno: Your machine already appears on Nodes ?
[2013-06-12 11:22:08 -0400] nicloay: yes.
[2013-06-12 11:22:26 -0400] nicloay: so i need to login to my node (monitoring) and run chef-client there ?
[2013-06-12 11:23:11 -0400] ctennis: yes.  there may be a way to do that with the variosu knife commands, but in essence that's what has to happen
[2013-06-12 11:23:28 -0400] ctennis: chef-client will looks for /etc/chef/client.rb for the configuration of where to find the chef server and how to authenticate to it
[2013-06-12 11:24:00 -0400] rbueno: But if the machine is already on the nodes, he already register the machine using the chef-client, no ?
[2013-06-12 11:24:01 -0400] nicloay: yes, this files already there, i think they come there after i did bootstrap command.
[2013-06-12 11:24:15 -0400] nicloay: rbueno: right.
[2013-06-12 11:24:35 -0400] rbueno: If your machine already in the nodes, you already created the role for your machine and already apply the recipe in the role, this is all to be done.
[2013-06-12 11:24:57 -0400] rbueno: You already try to add the recipe direct on the node ?
[2013-06-12 11:25:06 -0400] nicloay: yes, this already done i think.
[2013-06-12 11:25:23 -0400] rbueno: open your chef-server click on your node, move the recipe to your machine run list
[2013-06-12 11:25:38 -0400] rbueno: wait for the munin install
[2013-06-12 11:25:40 -0400] rbueno: thats all
[2013-06-12 11:26:22 -0400] rbueno: Do you already added the recipe to runlist node install ?
[2013-06-12 11:26:49 -0400] nicloay: let me google about runlist node install.
[2013-06-12 11:28:03 -0400] nicloay: currently it looks like this http://storage1.static.itmages.ru/i/13/0612/h_1371036437_1153494_06253d49a0.png , probably role monitoring doesn't contains any receipts.
[2013-06-12 11:28:32 -0400] rbueno: thats it
[2013-06-12 11:30:21 -0400] nicloay: no, it's already contains receipte munin::server http://storage3.static.itmages.ru/i/13/0612/h_1371036588_7145462_73ea8aa8d9.png
[2013-06-12 11:48:04 -0400] nicloay: i'm still in stuck. but i found that there is a command chef-apply, do i need to use it to install munin on node?
[2013-06-12 11:49:20 -0400] nicloay: also maybe it's not installed after i applied role to node because on my working machine chef-client doesn't work and show error  (kernel_require.rb:45:in `require': cannot load such file -- rubygems/format (LoadError))
[2013-06-12 11:55:11 -0400] rbueno: nicloay that show work, probably a error is occur on install, try to install the recipe manually on a machine using Vagrant and VirtualBox first.
[2013-06-12 11:55:54 -0400] nicloay: rbueno: through chef-client ?
[2013-06-12 11:58:15 -0400] nicloay: i'm working on virtualbox with vagrant and image from vagrant site. but i can't understand core design, how recipts runs on node and where should i make some actions to make this receipts done, except of command line (knife bootstrap .... --run-list "..." --sudo).
[2013-06-12 12:14:04 -0400] nicloay: ok. so after i watchd screencast on youtube i found that by default chef-client must run each 1 hour on all clients. Thanks to everyone =)
[2013-06-12 12:19:22 -0400] nicloay: how does chef-clients run? through crontab or there is some daemon. i can't find any chef process (ps -ae) or any records in /etc/cron*/*
[2013-06-12 12:19:37 -0400] m4rcu5: nicloay: standart, it aint
[2013-06-12 12:19:48 -0400] m4rcu5: check out the chef-client cookbook for options on how to run it
[2013-06-12 12:20:07 -0400] nicloay: oh.. ok. thanks.. so chef-client cookbook will set it up.
[2013-06-12 12:20:14 -0400] m4rcu5: the omnibus install just supplies the chef-client software, no schedule or anything :)
[2013-06-12 12:20:37 -0400] nicloay: this was my mistake =) , i thought that everything will be out of the box.
[2013-06-12 12:22:01 -0400] nicloay: will it be easy to install tool like rundeck to run run_list manually but on all nodes, after any changes on server ?
[2013-06-12 12:22:24 -0400] nicloay: I meant will it be more comfortable?
[2013-06-12 12:23:22 -0400] m4rcu5: nicloay: like?: knife ssh "role:base" "chef-client" -x root
[2013-06-12 12:23:43 -0400] m4rcu5: thats how i fire them off manually for all nodes in the role:base
[2013-06-12 12:26:09 -0400] nicloay: thanks, it's much easiest
[2013-06-12 12:40:55 -0400] situ: I am trying to bootstrap a windows node by using "knife bootstrap windows" command but knife is not able to connect to Windows node and exits on timeout errors, Windows node is properly configured to accept connections through WinRM.
[2013-06-12 13:31:04 -0400] m4rcu5: what dio you guys keep under version control in the chef-repo? im looking into "Branch Tracking" the cookbooks, but then keeping the environment files in git seems to be redundant?
[2013-06-12 14:09:52 -0400] patcon: hey guys, does opscode keep install.sh in a repo somewhere now?
[2013-06-12 14:09:58 -0400] patcon: not sure where it's vers-ctrld
[2013-06-12 14:14:45 -0400] admin0: hi all . is there any way via chef to find out if 2 network cards are cross connected
[2013-06-12 14:14:58 -0400] admin0: using any tools known to mankind
[2013-06-12 14:15:48 -0400] knuckolls_: admin0: define "cross connected"
[2013-06-12 14:16:11 -0400] knuckolls_: also, if you can do it without chef -- then you can do it with chef
[2013-06-12 14:16:22 -0400] admin0: connected to each other via a cross-cable and not connected to a switch
[2013-06-12 14:19:08 -0400] laurent\: admin0: you can use lldpd to achieve that
[2013-06-12 14:19:21 -0400] laurent\: hmm
[2013-06-12 14:20:00 -0400] laurent\: might not be enough tho
[2013-06-12 14:21:01 -0400] admin0: laurent\,  i guess using lldpd ,i can parse the switch info and rule out the ports that are connected to a switch
[2013-06-12 14:21:46 -0400] laurent\: admin0: yep that's the idea
[2013-06-12 14:22:09 -0400] mikebb: hello chef folks, can anyone help with an interminable 403 error?
[2013-06-12 14:22:33 -0400] laurent\: but that would only work if every ports of every of your switches are configured to use lldp, cdp, edp (something lldpd supports)
[2013-06-12 14:23:56 -0400] laurent\: i guess you also use the arp table as a complementary test
[2013-06-12 14:26:36 -0400] Cope: my, laurent\, you're looking handsome today; and may I say, the quality of your Chef code is quite unsurpassed!
[2013-06-12 14:28:30 -0400] laurent\: admin0: also if you run lldpd on every of your physical node you'll when it's directly connected to another host (or connected thru a dumb switch)
[2013-06-12 14:28:38 -0400] laurent\: Cope: i beg your pardon ? :)
[2013-06-12 14:36:54 -0400] laurent\: Cope: sorry i'm not really with you, what's that all about ? :)
[2013-06-12 14:39:34 -0400] admin0: laurent\, thanks .. i will check and update
[2013-06-12 14:45:32 -0400] mikebb: can anyone give me a clue around a 403 error?
[2013-06-12 14:46:57 -0400] laurent\: mikebb: have you looked at http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-403Forbidden ?
[2013-06-12 14:48:01 -0400] mikebb: laurent\: yes, thanks, the section lists issues for hosted chef
[2013-06-12 14:48:12 -0400] mikebb: but I'm not using hosted chef
[2013-06-12 14:48:47 -0400] laurent\: ok
[2013-06-12 14:49:07 -0400] mikebb: laurent\: done the usual
[2013-06-12 14:49:17 -0400] mikebb: recreated validation pem 100 times :)
[2013-06-12 14:49:34 -0400] mikebb: and that works for 401 issues normally
[2013-06-12 14:49:37 -0400] mikebb: but this
[2013-06-12 14:49:39 -0400] mikebb: There may already be a client named "playguide-ch-node"
[2013-06-12 14:49:39 -0400] mikebb: 10.0.1.111 * Your validation client (chef-validator) may have misconfigured authorization permissions.
[2013-06-12 14:49:54 -0400] mikebb: is different
[2013-06-12 14:50:15 -0400] jmartin: is there already a client?
[2013-06-12 14:50:17 -0400] jmartin: with that name
[2013-06-12 14:50:40 -0400] mikebb: jmartin: no, using unique every time
[2013-06-12 14:53:54 -0400] mikebb: am seeing this in the log
[2013-06-12 14:53:55 -0400] mikebb: Authentication failed: Cannot find client ip-10-48-98-219.eu-west-1.compute.internal in CouchDB!, /usr/lib/ruby/vendor_ruby/chef/couchdb.rb:212:in `find_by_name'
[2013-06-12 14:54:30 -0400] mikebb: any idea what that means?
[2013-06-12 14:54:55 -0400] nicloay: how to post a bug in github? i can't find a "report" button, there is small issue with munin nginx conf file.
[2013-06-12 14:55:36 -0400] knuckolls_: nicloay: the issues section is likely what you're looking for
[2013-06-12 14:55:40 -0400] mikebb: nicloay: can you not just add issue?
[2013-06-12 14:55:41 -0400] knuckolls_: should be one per github repo
[2013-06-12 14:56:48 -0400] nicloay: knuckolls_: where is it? on git hub or somwhere on opscode ?
[2013-06-12 14:57:17 -0400] nicloay: i remember that it's possible to enable/disable bugtracker on github.
[2013-06-12 14:57:42 -0400] knuckolls_: nicloay: what cookbook are you hoping to add an issue for?
[2013-06-12 14:57:45 -0400] knuckolls_: munin?
[2013-06-12 14:57:55 -0400] jtimberman: nicloay: We use our JIRA for issues, tickets.ospcode.com
[2013-06-12 14:58:19 -0400] jtimberman: we don't use github issues. for a number of reasons :)
[2013-06-12 14:58:20 -0400] knuckolls_: pfft i knew that jtimberman. sorry for pointing him to anywhere else.
[2013-06-12 14:58:32 -0400] jtimberman: knuckolls_: <3
[2013-06-12 14:58:58 -0400] nicloay: jtimberman: understand that, if you have jira =) or something similar with custom workflows github bugtracker is very ugly.
[2013-06-12 14:59:38 -0400] nicloay: anyway tickets.ospcode.com is not available
[2013-06-12 15:01:29 -0400] knuckolls_: tickets.opscode.com
[2013-06-12 15:01:37 -0400] knuckolls_: nicloay: ^^
[2013-06-12 15:02:26 -0400] nicloay: does all users even with free account, has account in your ticket system?
[2013-06-12 15:04:06 -0400] mikebb: can someone explain please?
[2013-06-12 15:04:13 -0400] mikebb: when you bootstrap a node
[2013-06-12 15:04:18 -0400] knuckolls_: nicloay: http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-06-12 15:04:22 -0400] knuckolls_: goes over the jira processes
[2013-06-12 15:04:46 -0400] mikebb: a cert gets created fpr that client to talk to the server?
[2013-06-12 15:05:00 -0400] mikebb: this lone
[2013-06-12 15:05:05 -0400] mikebb: ^line
[2013-06-12 15:05:07 -0400] mikebb: merb : chef-server (api) : worker (port 4000) ~ You are not allowed to take this action. - (Merb::ControllerExceptions::Forbidden)
[2013-06-12 15:05:17 -0400] nicloay: knuckolls_: thanks. will do that
[2013-06-12 15:05:38 -0400] mikebb: is based on the action "update"
[2013-06-12 15:06:03 -0400] tnarik: hi all
[2013-06-12 15:06:15 -0400] mikebb: but the client appears to be authentictaed
[2013-06-12 15:06:17 -0400] mikebb:  Hashes match?: true
[2013-06-12 15:06:34 -0400] jtimberman: nicloay: unfortunately at this time the jira/confluence users are separate from the hosted chef accounts.
[2013-06-12 15:06:36 -0400] tnarik: From a recipe I need to trigger a HTTP request to a service, and then get the response (a JSON payload) to extract a configuration value
[2013-06-12 15:06:46 -0400] tnarik: which is the preferred Chef way of doing so?
[2013-06-12 15:06:54 -0400] tnarik: can Chef::REST be used for this?
[2013-06-12 15:07:02 -0400] nicloay: jtimberman: don't have money for atlassian croud i guess =)
[2013-06-12 15:07:02 -0400] mikebb: is it because the request has ""admin"=>false"
[2013-06-12 15:07:27 -0400] nicloay: ah.. you are opensource. that's mean it should be free =)
[2013-06-12 15:07:57 -0400] jgood: Hi, does anyone have any info on an error when running # sudo chef-server-ctl reconfigure
[2013-06-12 15:07:59 -0400] jgood: = Error executing action `run` on resource 'execute[/opt/chef-server/embedded/bin/chpst -u chef_server -U chef_server /opt/chef-server/embedded/bin/rabbitmqctl wait /var/opt/chef-server/rabbitmq/db/rabbit@localhost.pid]'
[2013-06-12 15:24:48 -0400] tnarik: From a recipe I need to trigger a HTTP request to a service, and then get the response (a JSON payload) to extract a configuration value
[2013-06-12 15:25:00 -0400] tnarik: which is the preferred Chef way of doing so? Chef::REST?
[2013-06-12 15:29:56 -0400] knuckolls_: tnarik: if you don't want to pull in an external dependency then that'll probably do the trick. :) you can shove whatever ruby code you want in a library in your cookbook and call those functions / modules / classes from your recipes. so really you're free to build out what you need.
[2013-06-12 15:30:15 -0400] knuckolls_: if you use any gems in there, use the chef_gem resource to install them so they can be used by chef itself
[2013-06-12 15:31:34 -0400] tnarik: knuckolls: I see. I just thought that there was maybe something like the http_request resource but suitable to fetch bodies
[2013-06-12 15:31:56 -0400] gchristensen: hrm... is hosted chef having issues? I'm having many retries happen when uploading cookbooks.
[2013-06-12 15:32:13 -0400] tnarik: and thanks for the response
[2013-06-12 15:33:38 -0400] juliancdunn: gchristensen: yes, there are increased timeouts atm
[2013-06-12 15:38:53 -0400] isr37: hi
[2013-06-12 15:40:22 -0400] isr37: i have a quick questions about attributes
[2013-06-12 15:42:59 -0400] isr22: hello
[2013-06-12 15:46:31 -0400] juliancdunn: hello, isrs
[2013-06-12 15:46:51 -0400] juliancdunn: go ahead, you're on the air
[2013-06-12 15:52:50 -0400] asharp: can i post chef logs in between bash code in the same bash resource?
[2013-06-12 15:52:54 -0400] mikebb: sorry  to be a PITA
[2013-06-12 15:53:09 -0400] mikebb: I can't see my way out of this 403
[2013-06-12 15:53:22 -0400] mikebb: I've recreated certs, restarted all services
[2013-06-12 15:53:56 -0400] jax: am i supposed to be using chef? I'm trying to automate deployment of some applications i'm coding. The servers already have the services ready, but i would like to git pull, run some scripts, apply some patches, and restart a service or two
[2013-06-12 15:54:16 -0400] fish_: hi
[2013-06-12 15:54:27 -0400] kallistec: mikebb: backing up a bit, do you understand the validator stuff?
[2013-06-12 15:54:44 -0400] mikebb: thanks kallistec, yes, I think so
[2013-06-12 15:54:54 -0400] kallistec: jax: chef can do that
[2013-06-12 15:54:57 -0400] mikebb: I went througha  world of pain with 401s
[2013-06-12 15:55:07 -0400] mikebb: and I get it I think
[2013-06-12 15:55:34 -0400] mikebb: this 403 seem sto be related to client wanting to be bootstrapped that ISN'T admin
[2013-06-12 15:56:01 -0400] kallistec: mikebb: I'm missing some context, my IRC client is being naughty. So this is a client create giving a 403?
[2013-06-12 15:56:22 -0400] jax: kallistec: but is it the right tool to use? i'm confused by all these tools.. fabric, puppet, chef, salt, buildout ?
[2013-06-12 15:56:29 -0400] mikebb: kallistec: yes, using knife to bootstrap a node
[2013-06-12 15:56:49 -0400] mikebb: I get this
[2013-06-12 15:56:50 -0400] mikebb: * There may already be a client named "ip-10-0-1-220"
[2013-06-12 15:56:50 -0400] mikebb: 10.0.1.220 * Your validation client (chef-validator) may have misconfigured authorization permissions.
[2013-06-12 15:56:51 -0400] kallistec: mikebb: most likely a client with the same name exists already (?)
[2013-06-12 15:57:11 -0400] mikebb: kallistec: I don;t think so, unless its being cached somwhere
[2013-06-12 15:57:21 -0400] fish_: hrm when I set a node attribute in a lrwp like this: node.set['foo']['bar'][res.foo] = 23 and than call this lrwp multiple times for the same node, I end up with only the last calls input. -> seems like the attribute doesn't get merged as expected
[2013-06-12 15:57:25 -0400] kallistec: mikebb: does `knife client list` on your workstation show anything?
[2013-06-12 15:57:26 -0400] fish_: is there a way around it?
[2013-06-12 15:57:31 -0400] juliancdunn: jax: well... whether it's the right tool is for you to decide, but it can certainly do all the things you want
[2013-06-12 15:57:33 -0400] mikebb: I'm using knife client list and not seeing it
[2013-06-12 15:57:53 -0400] mikebb: and knife node list has nothing
[2013-06-12 15:58:08 -0400] kallistec: mikebb: in this case it's client list that's important
[2013-06-12 15:58:38 -0400] kallistec: mikebb: this is open source chef 10 server?
[2013-06-12 15:59:02 -0400] mikebb: kallistec: I ALWAYS get retrys whenever I try anfd list anything
[2013-06-12 15:59:12 -0400] mikebb: i.e. clients/playguide-node, retrying 1/5 in 4s
[2013-06-12 15:59:29 -0400] mikebb: kallistec:  then ERROR: The object you are looking for could not be found
[2013-06-12 15:59:47 -0400] fish_: it seems that I can't even access the attributes already set by my lwrp, probably because they get merged later somehow
[2013-06-12 15:59:47 -0400] kallistec: mikebb: what flavor of chef server though?
[2013-06-12 16:00:11 -0400] mikebb: not hosted - just on ubuntu 11.10
[2013-06-12 16:00:37 -0400] mikebb: kallistec: Chef Server (API) Version: 10.18.2
[2013-06-12 16:02:03 -0400] kallistec: mikebb: seems like something's hosed. Can you post server logs to gist?
[2013-06-12 16:02:52 -0400] mikebb: thanks kallistec, I think this is related
[2013-06-12 16:02:53 -0400] mikebb: DEBUG: Authentication failed: Cannot find client ip-10-48-98-219.eu-west-1.compute.internal in CouchDB!, /usr/lib/ruby/vendor_ruby/chef/couchdb.rb:212:in `find_by_name'
[2013-06-12 16:03:34 -0400] mikebb: kallistec: I assume that means chef can't find the public key for the new client?
[2013-06-12 16:04:29 -0400] kallistec: mikebb: yeah, that's correct
[2013-06-12 16:05:23 -0400] kallistec: mikebb: is that from you using knife, or trying to bootstrap a new host?
[2013-06-12 16:06:13 -0400] mikebb: kallistec:I get that when I run bootstrap on an existing instance
[2013-06-12 16:06:52 -0400] mikebb: kallistec:  running from scratch I get this issue with Params: {"private_key"=>true, "controller"=>"clients", "admin"=>false, "name"=>"ip-10-0-1-220", "id"=>"ip-
[2013-06-12 16:06:52 -0400] mikebb: 10-0-1-220", "action"=>"update"}merb : chef-server (api) : worker (port 4000) ~ You are not allowed to take this action
[2013-06-12 16:08:21 -0400] kallistec: mikebb: why bootstrap an existing instance?
[2013-06-12 16:09:22 -0400] juliancdunn: mikebb: it seems like there's a mismatch between the name of the client you bootstrapped with and the actual name
[2013-06-12 16:09:49 -0400] mikebb: kallistec:  because it exists in EC2 and I wanted to to look at the logs and try again
[2013-06-12 16:10:04 -0400] mikebb: kallistec: thanks, log here https://gist.github.com/anonymous/5766756
[2013-06-12 16:10:31 -0400] isr37: juliancdunn: so if i need to change any default attributes in a recipe do i have to maintain my own copy
[2013-06-12 16:10:54 -0400] juliancdunn: isr37: no, just wrap the cookbook with your own cookbook
[2013-06-12 16:11:01 -0400] mikebb: juliancdunn:  I'm actually running it from knife ec2
[2013-06-12 16:11:25 -0400] juliancdunn: isr37: write a recipe that does "node.default[whatevs]" and then include_recipe on the things you need from the upstream
[2013-06-12 16:12:01 -0400] juliancdunn: mikebb: what's your bootstrap command line look like?
[2013-06-12 16:12:27 -0400] isr37: juliancdunn: thanks
[2013-06-12 16:13:40 -0400] mikebb: juliancdunn: knife ec2 server create -i ~/.ssh/conn-mb.pem --region eu-west-1 -I ami-f2191786 -g sg-fe362e92,sg-30342c5c -s subnet-1276a57a -T name=playguide --ebs-size 8 --node-name playguide -r "role[lamp]" --ssh-user ubuntu --ssh-key conn-mb -A $AWS_ACCESS_KEY_ID -K $AWS_SECRET_KEY --verbose
[2013-06-12 16:15:09 -0400] Urocyon: Starting/restarting tomcat servers on linux sometimes messes up my chef run.   The startup of the vm can take a while and a restart often comes in when it can't be interrupted.. so the service restart call fails.
[2013-06-12 16:16:05 -0400] juliancdunn: mikebb: so the bootstrap works and then subsequent runs fail?
[2013-06-12 16:16:28 -0400] mikebb: juliancdunn: no, it won't bootstrap
[2013-06-12 16:16:50 -0400] mikebb: juliancdunn: I get the 403 error, but it isn't a dupe node name
[2013-06-12 16:17:12 -0400] mikebb: unless the server is caching the client
[2013-06-12 16:17:16 -0400] kallistec: mikebb: I'm almost certain that there's a client with the same name already
[2013-06-12 16:17:24 -0400] richard_wolford: hi, was hoping I could get some assistance.  I successfully bootstrap my Linux boxes with Chef, works great.  However, it seems that chef-client cannot connect to the chef server because of DNS.  So I needed to know if there is a way to tell chef-client to connect via an IP address instead of a hostname.
[2013-06-12 16:17:51 -0400] juliancdunn: mikebb: I'm with kallistec. try to not specify --node-name and see what happens
[2013-06-12 16:18:05 -0400] juliancdunn: let Chef register the node with its EC2 FQDN
[2013-06-12 16:18:33 -0400] mikebb: kallistec: juliancdunn: okay, thanks guys, I will try that, really 'ppreciate it
[2013-06-12 16:19:22 -0400] richard_wolford: I may be bootstrapping wrong then, here's my bootstrap command:  knife bootstrap ip -x user -P pw  --sudo
[2013-06-12 16:19:47 -0400] richard_wolford: then I issue knife node run_list add nodename cookbook -a ipaddress
[2013-06-12 16:19:57 -0400] juliancdunn: Urocyon: you could add retries and/or retry_delay metaparameters to the failing resource
[2013-06-12 16:20:52 -0400] richard_wolford: those two knife commands work just fine, but then chef-client can't resolve the name of the chef server.  it works if I modify the hosts file, but I'd rather not do that.
[2013-06-12 16:21:16 -0400] juliancdunn: richard_wolford: it's going to populate the client.rb on the server with the chef_server_url with what's on your workstation
[2013-06-12 16:21:29 -0400] richard_wolford: in the knife.rb?
[2013-06-12 16:21:32 -0400] juliancdunn: yup
[2013-06-12 16:21:41 -0400] juliancdunn: so I'd say... make that hostname resolve on the remote machine :-)
[2013-06-12 16:21:41 -0400] richard_wolford: I have the IP in there
[2013-06-12 16:21:56 -0400] kallistec: mikebb: the logic for client registration is here: https://github.com/opscode/chef/blob/master/lib/chef/api_client/registration.rb#L83-90
[2013-06-12 16:21:56 -0400] juliancdunn: what's in the client.rb on the remote end then?
[2013-06-12 16:22:10 -0400] richard_wolford: chef_server_url is set to https://ipaddress
[2013-06-12 16:22:16 -0400] kallistec: mikebb: in your error, I see `"action"=>"update"`
[2013-06-12 16:22:25 -0400] mikebb: kallistec: juliancdunn, no luck - 10.0.1.26 * There may already be a client named "i-ec543fa1"
[2013-06-12 16:22:25 -0400] mikebb: 10.0.1.26 * Your validation client (chef-validator) may have misconfigured authorization permissions.
[2013-06-12 16:22:29 -0400] richard_wolford: one sec and I'll check
[2013-06-12 16:23:05 -0400] richard_wolford: where would the client.rb usually be found?
[2013-06-12 16:23:10 -0400] juliancdunn: mikebb: dunno, that seems like something is seriously hosed then. like your validator isn't actually valid for this Chef server
[2013-06-12 16:23:21 -0400] juliancdunn: richard_wolford: /etc/chef/client.rb on Linux/UNIX
[2013-06-12 16:23:26 -0400] kallistec: mikebb: and action "update" corresponds to chef trying to register, getting a 409, then trying to update
[2013-06-12 16:23:38 -0400] richard_wolford: got it!  It also has the IP address
[2013-06-12 16:23:56 -0400] juliancdunn: richard_wolford: so it's not a DNS problem
[2013-06-12 16:24:17 -0400] kallistec: mikebb: does what I just said match up to what you see in the logs? do you first get some logs for an action "create" request?
[2013-06-12 16:24:18 -0400] richard_wolford: yeah it's kinda weird.  If I were to add the chef server to the hosts file it would work just fine
[2013-06-12 16:24:29 -0400] richard_wolford: I've tested that much
[2013-06-12 16:24:54 -0400] richard_wolford: in the error from chef-client, it says it can't find the host and spits out the host name of the server instead of the IP
[2013-06-12 16:25:26 -0400] juliancdunn: richard_wolford: there must be some other config then that's being used
[2013-06-12 16:25:55 -0400] richard_wolford: yeah cause I have no idea where it even got the hostname of the chef server
[2013-06-12 16:25:59 -0400] juliancdunn: it should use /etc/chef/client.rb -- you can try running it with "sudo chef-client -c /etc/chef/client.rb"
[2013-06-12 16:26:13 -0400] richard_wolford: only files I see in /etc/chef are the two pem files, the client.rb and first-boot.json
[2013-06-12 16:26:28 -0400] juliancdunn: if that works, try to hunt down the other config
[2013-06-12 16:26:37 -0400] richard_wolford: just tried it, same error
[2013-06-12 16:26:39 -0400] mikebb: kallistec: I can't see a "create"
[2013-06-12 16:26:54 -0400] fish_: can I set default attributes in a lrwp? I need to make sure that when that lwrp isn't called anymore the node attributes disapear
[2013-06-12 16:27:00 -0400] juliancdunn: richard_wolford: and if you grep /etc/chef/client.rb there's no mention of the hostname in there?
[2013-06-12 16:27:28 -0400] mikebb: kallistec: actually yes I do
[2013-06-12 16:27:31 -0400] richard_wolford: na it's pretty tiny
[2013-06-12 16:27:40 -0400] mikebb:  chef-server (api) : worker (port 4000) ~ Params: {"controller"=>"clients", "admin"=>false, "name"=>"i-ec543fa1", "action"=>"create"}
[2013-06-12 16:27:56 -0400] richard_wolford: oh, and on the ou tput it said my chef server URL may be wrong, but it spit out the correct IP.  Then later in the error, it again is trying to hit the hostname instead of the IP
[2013-06-12 16:28:12 -0400] mikebb: kallistec: this looks ominous
[2013-06-12 16:28:55 -0400] mikebb: BEGIN and END public key has nothing in the middle
[2013-06-12 16:35:12 -0400] Majost: Is anyone using the maven cookbook? I seem to be having an issue where it the provider downloads the specified artifact, but when it looks at the checksum for the downloaded file and then tries to compare with the remote they do not match. Somehow, the provider seems to be getting the sha1sum for the metadata for the remote file opposed to the file itself
[2013-06-12 16:37:00 -0400] asharp: in the environment attribute of the bash resource, can i describe environments with bash variables? like environment({ 'ONE' => "/home/user", 'TWO' => "$ONE/Music"})
[2013-06-12 16:37:25 -0400] hakunin: I'm trying to solve the berkshelf (application cookbook pattern) + knife solo combination, and while I saw extensive discussion here: https://github.com/RiotGames/berkshelf/pull/304  i'm still not sure how to resolve this
[2013-06-12 16:38:09 -0400] hakunin: If you wrote an application cookbook, and it has github dependencies in its Berksfile, then you create a kitchen and depend on that cookbook with a path
[2013-06-12 16:38:28 -0400] hakunin: the kitchen berks will not honor github links in the cookbook
[2013-06-12 16:38:58 -0400] hakunin: so i'm trying to figure out a way to workaround this, and all I come up with is hacks
[2013-06-12 16:39:44 -0400] Majost: hakunin:  The confusion I think people are having "unreleased" dependencies.
[2013-06-12 16:39:53 -0400] hakunin: like write a little script that copies application cookbook into site-cookbooks of the kitchen, then runs berks inside that cookbook with vendor path set to "cookbooks"
[2013-06-12 16:40:06 -0400] hakunin: in the same dir
[2013-06-12 16:40:19 -0400] hakunin: Majost: definitely, but in current chef world it's practically impossible to avoid
[2013-06-12 16:40:41 -0400] fish_: hrm, so is there a way I can set attributes which have a live cycle until the next chef run?
[2013-06-12 16:41:08 -0400] Majost: hakunin: can you test the changes of to the dependent cookbooks and push them into your chef server once they are good?
[2013-06-12 16:41:25 -0400] hakunin: Majost: that's another central point here - i don't have a chef server
[2013-06-12 16:41:34 -0400] hakunin: Majost: that's why i need a local kitchen
[2013-06-12 16:41:46 -0400] hakunin: it's a chef solo setup
[2013-06-12 16:41:50 -0400] Majost: ah
[2013-06-12 16:42:34 -0400] hakunin: so there is almost no info on how to deal with this type of thing on chef solo
[2013-06-12 16:43:43 -0400] Majost: bershelf_ext didn't do this for you?
[2013-06-12 16:43:45 -0400] teukka: hakunin: yeah, currently you need to add all the github dependencies to the Berksfile
[2013-06-12 16:43:58 -0400] hakunin: Majost: i was trying to avoid it
[2013-06-12 16:44:07 -0400] hakunin: teukka: :(
[2013-06-12 16:44:35 -0400] Majost: yeah, I think teukka is right. =/
[2013-06-12 16:44:39 -0400] hakunin: teukka: Majost: however, if my kitchen really just needs one cookbook since i follow the application cookbook pattern
[2013-06-12 16:45:24 -0400] hakunin: teukka: Majost: perhaps i could write that script after all, which copies the cookbook into site-cookbooks, and runs berks _inside of it_ pointing vendor path at "cookbook" dir in this kitchen
[2013-06-12 16:45:40 -0400] teukka: hakunin: this issue is also related: https://github.com/RiotGames/berkshelf/issues/615
[2013-06-12 16:46:29 -0400] hakunin: teukka: yeah
[2013-06-12 16:46:54 -0400] teukka: hakunin: if you have fetched all the cookbooks to some dir (site-cookbooks), you can just put some glob magic to Berksfile
[2013-06-12 16:47:20 -0400] teukka: hakunin: latest prerelease versions of knife-solo run `berks install` automatically if Berksfile and berkshelf gem are found
[2013-06-12 16:47:55 -0400] hakunin: teukka: exactly, i use latest prerelease, but i'm actually proposing slightly different solution. i'm proposing not using Berksfile at all in the kitchen
[2013-06-12 16:48:12 -0400] Majost: hakunin: Alternatively, use the metadata in the berksfile and use path for specific overrides in dependent cookbooks
[2013-06-12 16:48:58 -0400] hakunin: teukka: so what happens is this: knife solo init kitchen; cd kitchen; cp ../my-cookbook ./site-cookbooks/; cd site-cookbooks/my-cookbook && berks --vendor ../cookbooks
[2013-06-12 16:49:44 -0400] hakunin: teukka: so all i end up having in the kitchen is my cookbook in site-cookbooks and everything in that cookbook's berksfile vendored into cookbooks
[2013-06-12 16:53:30 -0400] teukka: hakunin: if all of the *transitive* dependencies of my-cookbook are found in the community site, you can do as Majost proposed. i.e. put `cookbook 'my-cookbook', path: 'site-cookbooks/my-cookbook'` to Berksfile
[2013-06-12 16:53:43 -0400] teukka: or `metadata path: ...`
[2013-06-12 16:54:28 -0400] teukka: then at least the direct dependencies are read from the metadata of my-cookbook
[2013-06-12 16:55:08 -0400] CharlieSu: Could any Berkshelf users answer this question for me?  I've created a my own cookbook that uses Berkshelf and has its own chef repository.  I want to use it with other cookbooks so I'm going to upload it to Github.  Does Berkshelf's workflow take care of creating tags and uploading things to Github?  Or is that a manual process?  Seems like something should be able to look at my cookbook's metadata file and automatically subm
[2013-06-12 16:55:56 -0400] PierreO: lvrjnwvljr
[2013-06-12 16:56:23 -0400] PierreO: CharlieSu from what I know, you should handle the github part alone
[2013-06-12 16:56:32 -0400] hakunin: teukka: Majost: this solution involves always remembering to specify non-community paths in 2 Berksfiles
[2013-06-12 16:56:50 -0400] fish_: feels like ubuntu support channels here
[2013-06-12 16:57:16 -0400] CharlieSu: PierreO: thanks!
[2013-06-12 16:58:25 -0400] hakunin: teukka: Majost: if we pretend for a second that "kitchen" is actually a sort of "chef server", then perhaps having an "upload" script that i need to run to pull in and vendor cookbooks and their dependencies isn't all that weird. Of course it's not a mainstream solution, which remains to be discovered, but i'm going to try this
[2013-06-12 17:00:41 -0400] Majost: hakunin: it would be worth a blog post or something if you find it works well
[2013-06-12 17:01:14 -0400] Majost: hakunin: I am sure more people are going to run into this issue as the community grows
[2013-06-12 17:02:10 -0400] hakunin: Majost: yeah, i made sense of crazy amount of totally ambiguous moving parts that don't fit well together in the last week, wanted to blog about "how chef solo, knife solo, berkshelf, and test kitchen fit together"
[2013-06-12 17:02:41 -0400] hakunin: Majost: but i'm writing down ideas until I revamp my blog, which is on my todo list :(
[2013-06-12 17:03:32 -0400] hakunin: there is literally no info, except scattered talks on youtube, and tons of inconclusive discussion packed into github issues
[2013-06-12 17:15:33 -0400] teukka: hakunin: feel free to ping me about questions about knife-solo. for sure all the tools are moving fast and documentation is lacking
[2013-06-12 17:17:18 -0400] teukka: I also guess that knife-solo will include or be replaced with some chef-zero setup in the future. so more moving parts ;)
[2013-06-12 17:19:01 -0400] hakunin: teukka: thanks. it's a bit funny that i got my application cookbook to work with test kitchen, converge vagrant instances, run bats tests. And now to provision an actual remote server I am stuck again. At first I wasn't sure why do I even need a kitchen. I also thought that berkshelf's "Application Cookbook" pattern was implying that you provision everything from that cookbook, without any kitchens. And then while taking a showe
[2013-06-12 17:19:02 -0400] hakunin: r it dawned on me that Jamie Winsor was talkign about using it with chef server, and for solo you do need something like kitchen.
[2013-06-12 17:22:32 -0400] teukka: hakunin: correct. even though with chef server you might need something like "kitchen" if you want to version control roles, data bags, etc.
[2013-06-12 17:23:21 -0400] hakunin: teukka: right. some of us have never seen a chef server (like me) but when reading guides it's just crucial to understand that server is where most of them are coming from
[2013-06-12 17:23:28 -0400] teukka: actually it is normally called chef-repo =)
[2013-06-12 17:24:40 -0400] teukka: hakunin: yeah chef-solo is a bit of a ugly duckling or something :)  most knife commands interact with chef server
[2013-06-12 17:25:08 -0400] teukka: I hope chef-zero will unify many differences that are present now
[2013-06-12 17:25:45 -0400] hakunin: teukka: or "now we have 2 problems"
[2013-06-12 17:25:47 -0400] hakunin: :)
[2013-06-12 17:28:43 -0400] denken: https://gist.github.com/jlott/b8d028bf9ea70468f40d does anyone a clue why berkshelf isnt locking the correct version of just one cookbook there?
[2013-06-12 17:29:21 -0400] ivey: move the depends mysql higher up
[2013-06-12 17:29:28 -0400] ivey: or set it in Berksfile
[2013-06-12 17:30:08 -0400] ivey: berks has a known issue with some dependency trees, will be fixed soon
[2013-06-12 17:30:35 -0400] denken: ivey: interesting. i'll try that.
[2013-06-12 17:30:37 -0400] denken: thank you
[2013-06-12 17:33:59 -0400] trobrock: I am having some trouble with my users data bags, I uploaded some changes to the data bags and the nodes do not seem to be picking up the changes
[2013-06-12 17:38:35 -0400] denken: ivey: that worked fine. thanks again. that was helpful
[2013-06-12 17:56:24 -0400] hatchetation: anyone @ opscode aware of any issues with the API / website currently?
[2013-06-12 17:57:00 -0400] nicgrayson: hatchetation: they said there were issues with hosted chef earlier this morning
[2013-06-12 17:57:26 -0400] hatchetation: I'm seeing intermittant issues and failed runs due to timed out connections to the opscode download site
[2013-06-12 17:57:51 -0400] hatchetation: (omnibus_updater cookbook -- sadly i don't have the exact URL its trying to hit in the stacktrace)
[2013-06-12 17:57:58 -0400] hatchetation: Thanks nicgrayson, going to assume its related
[2013-06-12 18:02:39 -0400] asharp: what part of the environment attribute would result in "STDERR: sh: bash: command not found" from a bash resource?
[2013-06-12 18:02:48 -0400] asharp: all i changed was the environment
[2013-06-12 18:06:07 -0400] Otterley: asharp, maybe the PATH was set to something that doesn't have bash in it?
[2013-06-12 18:10:20 -0400] asharp: Otterley: i think that's it. the path did change
[2013-06-12 18:11:21 -0400] asharp: Otterley: yes that must have been it
[2013-06-12 18:11:26 -0400] asharp: thanks
[2013-06-12 18:29:54 -0400] monokrome: Is there a way to have a machine ask another machine to deploy?
[2013-06-12 18:39:04 -0400] spheromak: anyone here been able to get chef-solo-search working in TK 1.0 ?
[2013-06-12 18:44:45 -0400] monokrome: TK 1.0?
[2013-06-12 18:52:41 -0400] spheromak:  monokrome test kitchen
[2013-06-12 19:01:12 -0400] btm: @opscode #opschef code review, join: https://plus.google.com/hangouts/_/1f5731c6b67ec14bd4c81274a02cdfcc0833ad5e, watch: http://youtu.be/fSaGIv3-FZE
[2013-06-12 19:01:41 -0400] teukka: spheromak: I think I've used it in TK. note that with Chef 11 you have to include it to the run_list or as a dependency in some metadata for chef to load its libraries
[2013-06-12 19:02:04 -0400] spheromak: yea I figured that out :D
[2013-06-12 19:02:30 -0400] monokrome: spheromak: Doesn
[2013-06-12 19:02:31 -0400] spheromak: teukka, yea I was really trying to get it to load the cook from test/cookbooks/ instead of adding it to berksfile
[2013-06-12 19:02:34 -0400] monokrome: Doesn't that use vagrant
[2013-06-12 19:02:52 -0400] spheromak: monokrome, can use whatever
[2013-06-12 19:02:59 -0400] spheromak: I use lxc/vagrant/ec2
[2013-06-12 19:03:04 -0400] spheromak: as drivers
[2013-06-12 19:03:20 -0400] mwatson: What's the best way to copy a remote file that requires a username/password in a recipe (equivalent to scp)? I don't see a way to use a password with a remote_file resource.
[2013-06-12 19:03:21 -0400] spheromak: depending if im on my workstation or laptop or if its jenkins doing the tests
[2013-06-12 19:03:21 -0400] spheromak: :D
[2013-06-12 19:03:41 -0400] monokrome: ah ok
[2013-06-12 19:05:26 -0400] teukka: spheromak: oh and the other issue is that the version in community site does not work as libraries were not uploaded recursively. so berksfile with github source is the way to go with chef-solo-search
[2013-06-12 19:05:39 -0400] spheromak: yea
[2013-06-12 19:05:42 -0400] spheromak: thats what im doing :D
[2013-06-12 19:05:58 -0400] spheromak: jsut rather have it tucked under test
[2013-06-12 19:06:02 -0400] spheromak: but its ok this way too :D
[2013-06-12 19:07:20 -0400] teukka: spheromak: I put it in `:integration` group in Berksfile and then exclude that when working with chef server etc.
[2013-06-12 19:07:32 -0400] spheromak: teukka, yeap
[2013-06-12 19:08:21 -0400] spheromak: teukka, really doesn't matter the  libs in the solo-search only load if you're running chef-solo
[2013-06-12 19:08:31 -0400] spheromak: its why I don't mind it in berks
[2013-06-12 19:11:54 -0400] teukka: spheromak: true, but still I don't like monkey patches on my production nodes ;)
[2013-06-12 19:12:28 -0400] markmc_att: I have a users recipe that works the first time but complains about 'ruby-shadow' not installed the second and subequent
[2013-06-12 19:12:36 -0400] markmc_att: any idea for a workaround?
[2013-06-12 19:12:47 -0400] markmc_att: chef 11.44 client
[2013-06-12 19:12:52 -0400] markmc_att: opscode server
[2013-06-12 19:12:59 -0400] teukka: spheromak: well, of course it would need to be in the run_list. I'll get my coat =)
[2013-06-12 19:13:19 -0400] markmc_att: it is in the run_list
[2013-06-12 19:18:23 -0400] teukka: markmc_att: are you installing other ruby versions in the first run?
[2013-06-12 19:18:44 -0400] markmc_att: 1.9.1 yes
[2013-06-12 19:19:13 -0400] markmc_att: Supposedly 11.44 requires this?
[2013-06-12 19:21:38 -0400] Otterley: markmc_att, use Omnibus chef client, then you won't have to worry about this
[2013-06-12 19:21:50 -0400] teukka: markmc_att: if you are using the omnibus package it includes ruby 1.9.3 and ruby-shadow gem. seems like the second run picks your new ruby
[2013-06-12 19:22:11 -0400] teukka: markmc_att: if you don't use the omnibus ruby you need to install the gem yourself
[2013-06-12 19:22:36 -0400] markmc_att: just 'gem install ruby-shadow' on the client?
[2013-06-12 19:24:01 -0400] teukka: markmc_att: yeah, or gem_package or chef_gem resource on the recipe. but I would recommend using the omnibus packaged chef with its own ruby. much safer
[2013-06-12 19:25:17 -0400] markmc_att: teukka: I just used the installation instructions on the 'install chef' web for the workstation
[2013-06-12 19:25:51 -0400] markmc_att: and then bootstrapped the client from that using a customized bootstrap .erb that installs ruby 1.9.1
[2013-06-12 19:26:39 -0400] teukka: ruby 1.9.1 is ancient. if you really want to use own ruby install the latest 1.9.3
[2013-06-12 19:27:15 -0400] Otterley: markmc_att, start here: http://www.opscode.com/chef/install/
[2013-06-12 19:27:23 -0400] Otterley: this will get you going with Omnibus chef
[2013-06-12 19:27:38 -0400] Otterley: and knife bootstrap will also install it by default
[2013-06-12 19:28:00 -0400] markmc_att: Otterley: that's what I did for the workstation but then bootstrapped the node.
[2013-06-12 19:28:23 -0400] markmc_att: This gives me enough to experiment with thanks much.
[2013-06-12 19:58:15 -0400] kallan: has anyone ever experienced an error during a Chef run in the MixLib library: `uid=': Resource temporarily unavailable (Errno::EAGAIN)
[2013-06-12 19:58:39 -0400] kallan: mixlib-shellout
[2013-06-12 19:59:20 -0400] spheromak: kallen, sounds like ulimits, but thats jsut my gut
[2013-06-12 20:00:33 -0400] kallan: yes, that is what I suspected as well
[2013-06-12 20:01:37 -0400] kallan: ulimit of the user I switch to for my command is 2048. I used shef-shell and added a resource to see how many processes that user had before the resource that fails and was under that limit by about 1,000.
[2013-06-12 20:01:50 -0400] kallan: unfortunately, I am not super sure of a way to solve this
[2013-06-12 20:02:14 -0400] kallan: aside from finding a pure ruby implementation of untarring / gzipping a tgz file and setting permissions that way
[2013-06-12 20:02:30 -0400] btm: @opscode cookbook code review, join: https://plus.google.com/hangouts/_/4d7a319a2aadc2c497a587eacb95c4189b2ee6da, watch: http://youtu.be/SVe4Peiz_ro
[2013-06-12 20:03:49 -0400] tobin: I'm writing my first cookbook. Can someone here give me some pointers on using chef-user? I'm using vagrant + chef solo. I've created a data_bags/users/user.json file and added it to the run_list, however I'm not seeing the users ever getting installed.
[2013-06-12 20:03:50 -0400] tobin: http://fnichol.github.io/chef-user/
[2013-06-12 20:04:24 -0400] tobin: Unsure of the syntax, if any, needed in recipes/default.rb
[2013-06-12 20:05:04 -0400] Otterley: kallan, chef-client runs as root so you can always raise its own ulimit
[2013-06-12 20:07:22 -0400] Otterley: also, which resource are you limiting?
[2013-06-12 20:13:23 -0400] justizin_: anyone have chef code for renaming ec2 instances? i've done this outside of chef before, just thinking maybe i can avoid reinventing the wheel..
[2013-06-12 20:16:22 -0400] kallan: Otterley: yes, I don't think that is the problem I am experiencing. My resource that fails is an execute that attempts to switch the user to untar a file. I am not sure if I should expect the user to be at 1100 of a 2048 ulimit before the resource runs
[2013-06-12 20:16:33 -0400] kallan: to hit that during that resrources execution
[2013-06-12 20:17:12 -0400] kallan: Its slightly harder because the real resource is "artifact_deploy" from the artifact-cookbook, which does many things using resources, including this execute resource I am having trouble with
[2013-06-12 20:18:04 -0400] gmr: Hey there, am in CentOS land and am using the opscode jenkins cookbook which uses runit. It appears that if the runit process does, the opscode runit cookbook does not start it again and it did not install any startup scripts.
[2013-06-12 20:18:10 -0400] Otterley: kallan, unless Chef is spawning a login shell (which I don't think it does, I'm not sure limits.conf is even being read)
[2013-06-12 20:18:16 -0400] gmr: Are there any suggestions on how I can get this running again, say when a server reboots?
[2013-06-12 20:18:53 -0400] Otterley: gmr, there's no such thing as a runit process.  can you be more specific?
[2013-06-12 20:19:05 -0400] kallan: so if limits.conf is perhaps never read, would that mean limits.d/files in there are never being read either
[2013-06-12 20:19:23 -0400] freezey: trying to do a knife upload / following the migration process and i continue to see "ERROR: Errno::EACCES: Permission denied - /var/chef" anyone experience this?
[2013-06-12 20:19:28 -0400] Otterley: kallan, that is correct, limits.conf only applies to login shells
[2013-06-12 20:20:20 -0400] gmr: chef-client installs jenkins, and it runs and everything works. box reboots, it does not start on default I can not find any init script. From what I have reversed in the cookbooks, it's using runit. runit has appears to have some daemon that needs to start so that the cookbook (!?) can start the jenkins process properly.
[2013-06-12 20:21:28 -0400] caryp: quick style questions:  1) Do you prefer '_' vs. '-' in multi-word attribute keys?  (i.e. 'some_attr_name' vs.'some-attr-name').  2) How about in cookbook names?
[2013-06-12 20:21:34 -0400] seubert_: Were there any changes with the '-y' flag for 'knife' commands in Chef 11? I'm strangely getting a 401 response with the -y flag on a ``knife client delete`` but it works fine without the -y flag
[2013-06-12 20:21:40 -0400] seubert_: very strange
[2013-06-12 20:21:55 -0400] Guest__: yo, is it possible to create nested LWRPs?
[2013-06-12 20:22:07 -0400] Guest__: i.e.
[2013-06-12 20:22:15 -0400] Otterley: gmr, my quick reading of the runit cookbook is that it does not add anything to /etc/inittab like it should on RHEL platforms
[2013-06-12 20:22:46 -0400] Guest__: top_level_lwrp "name" do
[2013-06-12 20:22:46 -0400] Guest__:     # contains second level LWRPs
[2013-06-12 20:22:47 -0400] Guest__:     second_level_lwrp "name" do
[2013-06-12 20:22:47 -0400] Guest__:         ....
[2013-06-12 20:22:47 -0400] Guest__:     end
[2013-06-12 20:22:47 -0400] Guest__: end
[2013-06-12 20:22:55 -0400] kallan: Otterley: I would think that if the way I executed a chef run was by SSHing to the node and triggering a chef-client, that it would be using a login-shell
[2013-06-12 20:22:58 -0400] Otterley: Guest__, what's the use case?
[2013-06-12 20:23:27 -0400] Otterley: kallan, but that's the root user, which probably shouldn't be subject to strict ulimits
[2013-06-12 20:23:57 -0400] Guest__: an LWRP that contains multiple second level LWRPs
[2013-06-12 20:24:23 -0400] seubert: OOPS ignore me
[2013-06-12 20:24:23 -0400] kallan: so even if my execute resource switches to another user to run, the limits from whichever user initiated the chef-run would still apply?
[2013-06-12 20:24:41 -0400] Otterley: Guest__, what problem are you trying to solve?  You've simply restated your question
[2013-06-12 20:24:43 -0400] gmr: Otterley: glad I came to the same conclusion. I guess I'll open a ticket.
[2013-06-12 20:25:14 -0400] Otterley: the runit cookbook is loaded with bugs :(  I wish it got more love
[2013-06-12 20:25:16 -0400] Guest__: say, creating a gdash lwrp, where the top level is a dashboard, and you want to be able to include multiple graphs in the lwrp
[2013-06-12 20:26:58 -0400] Otterley: Guest__, I'm not an LWRP expert but you'll probably want to make those second level resources attributes of the dashboard resource instead of declaring resources within
[2013-06-12 20:27:59 -0400] Otterley: then, in your dashboard provider, you can instantiate the graph resources based on the value of the attribute passed in
[2013-06-12 20:28:30 -0400] Guest__: hrm, so then you couldn't nest them? how would you also pass attributes for the graphs in that case?
[2013-06-12 20:28:33 -0400] Otterley: kallan, I believe so
[2013-06-12 20:28:50 -0400] Otterley: Guest__, define your own classes and pass instances of them in, perhaps
[2013-06-12 20:29:03 -0400] Guest__: mmmk
[2013-06-12 20:31:34 -0400] Otterley: Guest__, another option is to assign the graph resource to a variable and pass that in (or a list of them) to the dashboard resource as an attribute
[2013-06-12 20:31:50 -0400] Otterley: e.g. graph1 = graph "my graph" do  end
[2013-06-12 20:32:16 -0400] Otterley: dashboard "mydashboard" do graphs graph1,  end
[2013-06-12 20:32:34 -0400] Guest__: Otterley: interesting idea
[2013-06-12 20:32:53 -0400] Otterley: not sure if it'll work 100% but it's worth a shot
[2013-06-12 20:34:55 -0400] cheflevelramen: Hi Everyone. Quick question about testing. I come from an sysadmin background and my developement experience is limited, so please bear with me. I'm trying to nail down a decent cookbook/environment testing workflow, and there seem to be a whole lot of various tools to possibly use. Is there a recommend testing pipeline? I was thinking something along the lines of:
[2013-06-12 20:35:00 -0400] cheflevelramen: Foodcritic -> ChefSpec (Unit tessting) -> ServerSpec (Integration testing)
[2013-06-12 20:35:03 -0400] cheflevelramen: But there are other tools too, like Test-kitchen and Minitest. How do they fit in?
[2013-06-12 20:35:03 -0400] kallan: Guest__: I'm not sure if the documentation is quite there yet, but the zabbix cookbook uses an approach similar to that with LWRPS
[2013-06-12 20:35:18 -0400] Guest__: cool, i will check that cookbook out
[2013-06-12 20:36:06 -0400] Otterley: cheflevelramen, we use food critic, test kitchen and chef-minitest
[2013-06-12 20:39:03 -0400] cheflevelramen: Otterley: Cool, just looked more at minitest. It looks pretty nice. Do you find that minitest and testkitchen are easier to use than the RSpec family of testing tools?
[2013-06-12 20:39:35 -0400] Otterley: I'm not really a testing guru, so I can't say.  I hate all of them equally ;)
[2013-06-12 20:40:14 -0400] hakunin: Majost: teukka: if you're interested, I came up with this approach https://gist.github.com/maxim/5768923
[2013-06-12 20:42:13 -0400] hakunin: Majost: teukka: it's stupid simple - instead of writing a separate berksfile for the chef repo, just run upload.sh ../my-cookbook and it will cd into that dir and run berks in there with --path to the cookbooks in the chef repo, which will place all correct github dependencies into cookbooks, even the my-cookbook itself
[2013-06-12 20:42:36 -0400] hakunin: Majost: teukka: so the chef repo doesn't have to do anything with berkshelf at all, just have everything sitting in cookbooks dir
[2013-06-12 20:43:49 -0400] hakunin: this implies that you will only ever need one cookbook for your whole chef setup
[2013-06-12 20:43:53 -0400] hakunin: the application cookbook
[2013-06-12 20:45:15 -0400] Majost: thanks
[2013-06-12 20:46:04 -0400] hakunin: you can think of it as a chef solo version of "uploading your application cookbook to the chef server"
[2013-06-12 20:46:21 -0400] Majost: Is there a written (or unwritten) etiquette for adding sub-tasks to an existing opscode ticket?
[2013-06-12 20:46:32 -0400] Majost: I want to add to this: http://tickets.opscode.com/browse/COOK-2848
[2013-06-12 20:46:46 -0400] failshell: how can i access chef's version from within a recipe?
[2013-06-12 20:47:09 -0400] reset: hakunin: why not just put the cookbook in it's own repository and hook it up to a CI job that would test it / lint it / upload it?
[2013-06-12 20:47:27 -0400] Majost: reset: he is doing this via solo
[2013-06-12 20:47:43 -0400] hakunin: reset: the cookbook is in its own repository, but yes, exactly what Majost said
[2013-06-12 20:47:47 -0400] reset: I see
[2013-06-12 20:48:19 -0400] hakunin: reset: a lot of confusion i see in issues discussions in berkshelf are coming from the fact that you assume chef server most of the time
[2013-06-12 20:48:52 -0400] reset: hakunin: did you know about the "package" command?
[2013-06-12 20:48:59 -0400] ivey: because if you're trying to do anything with more than one node, you really need a chef server
[2013-06-12 20:49:08 -0400] hakunin: ivey: is that really the case?
[2013-06-12 20:49:17 -0400] hakunin: reset: no didn't see that
[2013-06-12 20:49:20 -0400] jmartin: its not strictly speaking the case
[2013-06-12 20:49:27 -0400] jmartin: but you will want to use one
[2013-06-12 20:49:40 -0400] reset: ivey: I don't particularly agree, it's just you'll end up doing things on your own that the chef server would do for you
[2013-06-12 20:49:47 -0400] reset: but it does make your life easier ;)
[2013-06-12 20:49:58 -0400] hakunin: reset: ivey: if you have a chef repo on your laptop, the node json files are saved to a directory, and isn't that all you need?
[2013-06-12 20:49:59 -0400] ivey: didn't say have to have, i said need
[2013-06-12 20:50:00 -0400] reset: hakunin: the package command was added because we actually do love Chef-Solo
[2013-06-12 20:50:18 -0400] reset: I use the SHIT out of Chef-Solo
[2013-06-12 20:50:37 -0400] reset: package will take your dependencies and bundle them up in an archive for you
[2013-06-12 20:50:44 -0400] reset: that you can feed to Chef-Solo
[2013-06-12 20:50:55 -0400] reset: there's this one gotcha, though
[2013-06-12 20:51:02 -0400] reset: you need some sort of "meta" Berksfile
[2013-06-12 20:51:09 -0400] reset: to grab all of your applications and bundle them up
[2013-06-12 20:51:25 -0400] reset: if you want to package EVERYTHING up and give it to somebody
[2013-06-12 20:51:39 -0400] spheromak: reset, I use a berks in a repo to represent that
[2013-06-12 20:51:57 -0400] spheromak: assuming git repo per cook
[2013-06-12 20:52:10 -0400] hakunin: reset: i did something a bit different, i made have one application cookbook with a bunch of services, as per your talk (like load balancer, database, app), and the cookbooks has a Berksfile
[2013-06-12 20:52:10 -0400] reset: hakunin: package was added and released in 2.0. Do you think that would be useful for you?
[2013-06-12 20:52:40 -0400] reset: hakunin: I support that decision :)
[2013-06-12 20:52:44 -0400] hakunin: reset: the application cookbook has its Berksfile where everything is
[2013-06-12 20:52:53 -0400] hakunin: reset: but since i have github dependencies in there
[2013-06-12 20:52:57 -0400] hakunin: reset: i can't have a meta Berksfile
[2013-06-12 20:53:15 -0400] reset: yeah, I was probably explaining away a problem that you don't have when I mentioned the meta Berksfile
[2013-06-12 20:53:18 -0400] reset: ignore that
[2013-06-12 20:53:44 -0400] hakunin: reset: yeah i know what you meant
[2013-06-12 20:54:04 -0400] hakunin: reset: so i wrote a script that i can run from the chef solo repo, which i can point to my application cookbook https://gist.github.com/maxim/5768923
[2013-06-12 20:54:22 -0400] hakunin: reset: it would go into that cookbook and run berks install with --path pointing to chef solo repo's cookbooks dir
[2013-06-12 20:54:30 -0400] reset: yeah I understand completely
[2013-06-12 20:54:37 -0400] reset: that'll work for sure
[2013-06-12 20:55:11 -0400] hakunin: reset: as long as i only have one cookbook for my whole setup
[2013-06-12 20:55:19 -0400] hakunin: reset: which i don't see a reason not to
[2013-06-12 20:55:21 -0400] reset: yep
[2013-06-12 20:55:43 -0400] reset: hakunin: one more thing. Did you know that you can pass a "recipe-url" to Chef-Solo?
[2013-06-12 20:57:04 -0400] hakunin: reset: not really, i never quite dealt with chef solo directly, only knife solo
[2013-06-12 20:57:10 -0400] hakunin: reset: what does that do?
[2013-06-12 20:57:23 -0400] reset: it'll pull down a tarball from a remote url or file
[2013-06-12 20:57:41 -0400] reset: so the output of `berks package` can be directly given to chef-solo
[2013-06-12 20:58:02 -0400] reset: it can even be hosted on some web server somewhere so you don't gotta copy it to your machines
[2013-06-12 20:59:20 -0400] hakunin: reset: i see, but it's kind of redundant for this sort of chef solo setup
[2013-06-12 20:59:47 -0400] rkesters: question about using node attributes in roles to override a receipe attribute, I have attempted this override_attributes "krb5" => { "default_realm_kdcs" => [ "vpe-dc1.#{node['domain']}" ]} but knife complains that node is unknown
[2013-06-12 20:59:51 -0400] reset: Ya, it might not be worth it to you right now. I thought that was pretty cool though ;)
[2013-06-12 20:59:59 -0400] hakunin: reset: the idea of chef solo the way i'm using it is exactly that you don't want extra ways to share, you already have that via git
[2013-06-12 21:00:34 -0400] rracterr: Can someone have a look at http://pastebin.com/UfV0TKN4  and tell me what they think my problem is
[2013-06-12 21:00:38 -0400] hakunin: reset: it is awesome for a much more distributed setup, but perhaps not if you're under 10 devs
[2013-06-12 21:00:53 -0400] reset: ya, you're probably right
[2013-06-12 21:03:10 -0400] hakunin: reset: in either case, my setup is not in conflict with packaging and distributing cookbooks, so at any point it's easy to add
[2013-06-12 21:03:25 -0400] reset: fors ure
[2013-06-12 21:04:45 -0400] Otterley: rkesters, you can't reference a node in a role
[2013-06-12 21:07:38 -0400] rkesters: Otterley: then how to you customize roles for each node? is this something I need to do in the receipe?
[2013-06-12 21:08:35 -0400] rkesters: can a role include roles
[2013-06-12 21:08:38 -0400] Otterley: rkesters, if a value of a node attribute needs to be derived from the value of another node attribute, that can only be done in a recipe
[2013-06-12 21:08:54 -0400] Otterley: s/recipe/cookbook
[2013-06-12 21:14:41 -0400] ggolin: hey guys. has anyone been able to get chef-rvm + application_ruby + vagrant to work? as in, to deploy an app using bundler, etc.
[2013-06-12 21:43:10 -0400] Majost: grrrr..... Error executing action `create` on resource 'directory[/usr/share/tomcat6/lib/endorsed]'
[2013-06-12 21:43:33 -0400] Majost: anyone using the new version of the tomcat cookbook (0.14.0)
[2013-06-12 21:47:15 -0400] timsmith: what's the full error?
[2013-06-12 21:47:55 -0400] Majost: timsmith: one sec, I will post a gist with debug output
[2013-06-12 21:48:23 -0400] Majost: I set ['tomcat']['base_version'] = 7
[2013-06-12 21:48:56 -0400] Majost: though, I just realized that the line completing that may be expecting a string, not an int
[2013-06-12 21:48:59 -0400] Majost: let me check that
[2013-06-12 21:52:47 -0400] Majost: newp... still barfs... one sec
[2013-06-12 21:53:33 -0400] mToombs: Hi all. . .
[2013-06-12 21:53:56 -0400] mToombs: I'm having some issues getting started with the Chef setup. . .
[2013-06-12 21:54:59 -0400] Majost: timsmith: https://gist.github.com/rhass/5769476
[2013-06-12 21:55:09 -0400] mToombs: running through the Getting Started Guide and running into a NoMethodError when attempting to bootstrap the demo VM
[2013-06-12 21:56:04 -0400] mToombs: it is telling me that there is no Alias for MagicShellAlias. . .though the documentation does not mention where I have to explicitly define this. . .
[2013-06-12 21:56:18 -0400] jtimberman: Majost: what platform?
[2013-06-12 21:56:22 -0400] mToombs: Windows
[2013-06-12 21:56:28 -0400] mToombs: win 7
[2013-06-12 21:56:29 -0400] Majost: jtimberman: Ubuntu 12.04.2
[2013-06-12 21:56:31 -0400] mToombs: 64 bit
[2013-06-12 21:56:47 -0400] jtimberman: Majost: hm, test-kitchen suite worked :/
[2013-06-12 21:56:55 -0400] jtimberman: i wouldn't have shipped it if it didnt :)
[2013-06-12 21:56:56 -0400] timsmith: Majost:  are you on chef 10?
[2013-06-12 21:57:07 -0400] jtimberman: ooh, yeah there's that.
[2013-06-12 21:57:17 -0400] Majost: timsmith: this is a solo instance via berkshelf  using 11
[2013-06-12 21:57:19 -0400] mToombs: Ubunto 12.04
[2013-06-12 21:57:37 -0400] timsmith: Majost:  And you set the attribute for the base_version to 7?
[2013-06-12 21:57:42 -0400] Majost: yep
[2013-06-12 21:57:46 -0400] mToombs: running Chef 11.4.4.2
[2013-06-12 21:58:15 -0400] Majost: timsmith: used node.set to do it in my attributes file
[2013-06-12 21:58:21 -0400] Majost: it pulls down tomcat7 and installs it
[2013-06-12 21:59:03 -0400] timsmith: Majost:  Can you send the attributes file or at least that portion of the file
[2013-06-12 21:59:11 -0400] Majost: timsmith: sure
[2013-06-12 21:59:21 -0400] timsmith: Majost:  What you're experiencing it very Chef 10 like, not Chef 11 like
[2013-06-12 21:59:57 -0400] Majost: huh
[2013-06-12 22:00:38 -0400] jtimberman: timsmith: yeah, but he's very much running chef 11.
[2013-06-12 22:00:43 -0400] timsmith: Chef 11 lets you build attributes with another attribute, which is what's going on here.  So you could override the Tomcat version and build all those directories correctly using Tomcat 7
[2013-06-12 22:00:46 -0400] timsmith: yep
[2013-06-12 22:00:47 -0400] Majost: yeah, this is running via 11.4.0 ... one sec, I will send you what you need
[2013-06-12 22:00:48 -0400] CharlieSu: Any Berkshelf users?  I've just move each of my cookbooks into their own repositories and I'm using Berkshelf to manage their dependencies..  Now that I've done that, I'm wonder how most people organize their Chef repository.  Is your cookbooks/ directory empty?  do you just use your repo for roles, environments and databags then?  I haven't seen any good documentation on this
[2013-06-12 22:01:07 -0400] timsmith: his problem just reminds me why I need to get off 10
[2013-06-12 22:01:14 -0400] timsmith: silly attributes
[2013-06-12 22:01:49 -0400] juliancdunn: CharlieSu: I make each cookbook its own module in source control
[2013-06-12 22:02:02 -0400] juliancdunn: then check out foo.git into cookbooks/foo
[2013-06-12 22:02:03 -0400] kisoku: is the vagrant-berkshelf plugin known to be broken ?
[2013-06-12 22:02:14 -0400] juliancdunn: kisoku: it works for me...
[2013-06-12 22:02:22 -0400] kisoku: getting dependency errors when trying to install it
[2013-06-12 22:02:24 -0400] CharlieSu: kisoku: works for me..
[2013-06-12 22:02:41 -0400] juliancdunn: there's a #berkshelf channel iirc
[2013-06-12 22:02:42 -0400] CharlieSu: juliancdunn: so git submodules inside of cookbooks/ ?
[2013-06-12 22:02:48 -0400] juliancdunn: CharlieSu: no submodules
[2013-06-12 22:02:51 -0400] juliancdunn: submodules bad
[2013-06-12 22:02:51 -0400] Majost: timsmith: jtimberman: updated gits
[2013-06-12 22:02:52 -0400] Majost: er gist
[2013-06-12 22:03:00 -0400] juliancdunn: just individual modules CharlieSu
[2013-06-12 22:03:18 -0400] CharlieSu: juliancdunn: I'm not familiar..  can you provide me with an example?
[2013-06-12 22:03:56 -0400] Majost: the jdk stuff isn't well respected with tomcat7 ... but I don't care about that at the moment.
[2013-06-12 22:03:57 -0400] juliancdunn: CharlieSu: sure, from my last company: https://github.com/secondmarket-cookbooks/
[2013-06-12 22:04:27 -0400] juliancdunn: and then our 'chef-data' went in its own module in another repo, 'secondmarket', that just contained roles, environments, and data_bags
[2013-06-12 22:05:22 -0400] kisoku: juliancdunn: that's really helpful are you sure you are not from the puppet community ?
[2013-06-12 22:05:25 -0400] kisoku: :-P
[2013-06-12 22:06:08 -0400] Majost: timsmith: jtimberman: and note, I tried defining base_version as both an int and a string with the same result
[2013-06-12 22:06:25 -0400] timsmith: Majost:  gist doesn't show as updated for me
[2013-06-12 22:06:35 -0400] Majost: oops
[2013-06-12 22:06:38 -0400] Majost: refresh
[2013-06-12 22:06:39 -0400] Majost: hah
[2013-06-12 22:06:47 -0400] CharlieSu: juliancdunn: so the normal chef-repo structure sans cookbooks/ was another repository ?
[2013-06-12 22:06:55 -0400] juliancdunn: kisoku: I'm just saying, there's a channel devoted to Berkshelf where you may get more help
[2013-06-12 22:07:08 -0400] juliancdunn: CharlieSu: exactly
[2013-06-12 22:07:08 -0400] Majost: ack
[2013-06-12 22:07:09 -0400] Majost: one sec
[2013-06-12 22:08:05 -0400] Majost: try now
[2013-06-12 22:08:22 -0400] CharlieSu: juliancdunn: What did you mean by 'then check out foo.git into cookbooks/foo' ?  Did you actually reference the individual cookbook repositories from your chef-repo somehow?
[2013-06-12 22:09:21 -0400] Majost: timsmith: thats an attributes file
[2013-06-12 22:09:33 -0400] juliancdunn: CharlieSu: no, we just kept a very small # of cookbooks that weren't upstream, so we knew what they were
[2013-06-12 22:09:49 -0400] Majost: gist wouldn't let me put it as attributes/default.rb which is why it didn't take initially.
[2013-06-12 22:09:59 -0400] juliancdunn: so if someone wanted to work on the SecondMarket PostgreSQL "wrapper" cookbook they'd just "git clone smpostgresql.git"
[2013-06-12 22:12:56 -0400] idlemichael: when i use the "bash" resource and set a user, there doesn't seem to be anything at all set in the $PATH variable
[2013-06-12 22:12:59 -0400] idlemichael: why is that?
[2013-06-12 22:14:12 -0400] idlemichael: er, nm
[2013-06-12 22:14:33 -0400] timsmith: jtimberman: how does solo handle node.set?
[2013-06-12 22:14:42 -0400] timsmith: < not a solo guy at all
[2013-06-12 22:16:35 -0400] Majost: hrmm
[2013-06-12 22:16:39 -0400] Majost: node data doesn't persist
[2013-06-12 22:16:47 -0400] Majost: so I might be referencing a phantom value
[2013-06-12 22:16:48 -0400] Majost: =/
[2013-06-12 22:17:15 -0400] Majost: However, I would expect it to persist throughout  a single chef run
[2013-06-12 22:17:32 -0400] Majost: whereas this seems to flip to the cookbook default in mid-run
[2013-06-12 22:17:44 -0400] idlemichael: has anyone used the "rbenv" cookbook?
[2013-06-12 22:18:50 -0400] _pobrien_: idlemichael: I have
[2013-06-12 22:19:17 -0400] idlemichael: how do you handle a user other htan rbenv being able to install gems, run bundler, etc
[2013-06-12 22:19:27 -0400] idlemichael: i feel like i'm doing it in incredible hacky ways
[2013-06-12 22:19:42 -0400] _pobrien_: solved that by using incredibly hacky ways :)
[2013-06-12 22:19:50 -0400] idlemichael: haha
[2013-06-12 22:19:57 -0400] idlemichael: any public cookbooks you use it in?
[2013-06-12 22:20:15 -0400] _pobrien_: no, just internal things
[2013-06-12 22:24:44 -0400] pwf: sooo don't delete the chef-webui client from the chef web ui
[2013-06-12 22:24:46 -0400] pwf: fyi
[2013-06-12 22:27:46 -0400] Otterley: allowing ordinary users to install gems in system directories sounds like bad practice
[2013-06-12 22:27:55 -0400] idlemichael: it's not a system directory
[2013-06-12 22:28:04 -0400] idlemichael: nor is it a ordinary user
[2013-06-12 22:28:19 -0400] andreask: anyone an elegant idea how to print the value of a data bag entry to sdout ? ... like a script returning a secret on exection
[2013-06-12 22:28:23 -0400] Otterley: I don't follow, then
[2013-06-12 22:28:29 -0400] jtimberman: timsmith: same as chef-client
[2013-06-12 22:28:40 -0400] Otterley: bundler allows any user to install a gem in any directory
[2013-06-12 22:28:52 -0400] Otterley: there's no need to involve rbenv at that point
[2013-06-12 22:28:52 -0400] jtimberman: timsmith: the difference for attributes is how the node gets loaded in client vs solo
[2013-06-12 22:29:05 -0400] jtimberman: since w/ client it loads the node from the server.
[2013-06-12 22:29:16 -0400] jtimberman: and solo it loads it from JSON (if you give it a json file)
[2013-06-12 22:29:19 -0400] idlemichael: rbenv is what's providing you the environment Otterley, without it you can't even use gem, bundle, etc
[2013-06-12 22:29:41 -0400] Otterley: sure
[2013-06-12 22:29:54 -0400] Otterley: maybe you can better explain the problem you're trying to solve
[2013-06-12 22:31:22 -0400] timsmith: jtimberman:  This is where I get into places I've just never had a need to go.  If you did a node.set in your own cookbook's attribute file would that effectively override the upstream cookbook you have in berkshelf
[2013-06-12 22:31:28 -0400] Otterley: in production, I'd install rbenv to /usr/local/rbenv, add /usr/local/rbenv to $PATH, install rubies in /opt/ruby-$VERSION, add the symlinks from /usr/local/rbenv/versions to there, then for each version, install bundler, and rehash
[2013-06-12 22:31:58 -0400] dardub: brand new to chef, if I make local changes to a recipe, how do I make the changes take effect in vagrant, i'm using hosted opscode service
[2013-06-12 22:32:37 -0400] timsmith: switching those node.sets to node.normal or override worked
[2013-06-12 22:33:14 -0400] Otterley: ^^ I meant add /usr/local/rbenv/bin to $PATH
[2013-06-12 22:33:39 -0400] jtimberman: timsmith: node.set is an alias for node.normal (or vice versa, i forget which direction it goes)
[2013-06-12 22:34:17 -0400] timsmith: I thought it aliased to normal
[2013-06-12 22:34:32 -0400] timsmith: I've only used it in the cookbooks not attributes file
[2013-06-12 22:35:34 -0400] Majost: I used node.normal
[2013-06-12 22:36:12 -0400] Majost: set I think is an alias for normal given most of my nodes have normal values when set
[2013-06-12 22:36:15 -0400] Majost: heh
[2013-06-12 22:38:00 -0400] Majost: ah crap
[2013-06-12 22:39:07 -0400] Majost: node['tomcat']['webapp_dir']} is now completing as /var/lib/7/webapps
[2013-06-12 22:41:39 -0400] Majost: Whiche doesn't make sense  looking at the code: https://github.com/rhass/tomcat/blob/master/attributes/default.rb#L57
[2013-06-12 22:42:40 -0400] asharp: how do data bags work with chef-solo? are they pointless?
[2013-06-12 22:42:53 -0400] Majost: json files basically.
[2013-06-12 22:43:00 -0400] asharp: why not use attributes?
[2013-06-12 22:43:39 -0400] Majost: If you need to encrypt the values I suppose
[2013-06-12 22:44:23 -0400] asharp: makes sense
[2013-06-12 22:44:26 -0400] asharp: thanks
[2013-06-12 22:44:30 -0400] Majost: np
[2013-06-12 22:44:46 -0400] timsmith: Majost: I'm looking over what could cause that to happen
[2013-06-12 22:44:58 -0400] timsmith: this is Ubuntu right?
[2013-06-12 22:45:40 -0400] Majost: timsmith: yessir
[2013-06-12 22:48:42 -0400] spheromak: asharp, they work fine you set the path in your solo config.  you can use  chef-solo-search cook to get search features with them
[2013-06-12 22:49:52 -0400] asharp: spheromak: alright thanks
[2013-06-12 22:52:57 -0400] timsmith: webapp_dir has a typo in the tomcat recipe
[2013-06-12 22:53:08 -0400] timsmith: default["tomcat"]["webapp_dir"] = "/var/lib/#{node["tomcat"]["base_version"]}/webapps"
[2013-06-12 22:53:48 -0400] timsmith: in other places it's set to default["tomcat"]["webapp_dir"] = "/var/lib/tomcat#{node["tomcat"]["base_version"]}/webapps"
[2013-06-12 22:54:01 -0400] timsmith: it'll work if you fix that probably
[2013-06-12 22:54:10 -0400] Majost: timsmith: ahhh
[2013-06-12 22:54:33 -0400] timsmith: if you want to be awesome confirm that what I just said is true
[2013-06-12 22:54:49 -0400] timsmith: and open a bug on the Opscode JIRA site
[2013-06-12 22:54:52 -0400] timsmith: assign it to me
[2013-06-12 22:55:19 -0400] Majost: will do
[2013-06-12 23:01:14 -0400] CharlieSu: Just trying to confirm something..  If I've got a default attribute set in an environment of [:elasticsearch][:version]  and a default attribute in a role of [:elasticsearch][:cloud], they're combined during the chef run.. I don't have to worry about setting all [:elasticsearch] child keys in one place do I?
[2013-06-12 23:01:33 -0400] spheromak: anyone know a decent centos6 base ami ?
[2013-06-12 23:01:57 -0400] dardub: how do I add a new cookbook to vagrant using knife?
[2013-06-12 23:02:05 -0400] spheromak: the centos official ones are root login.  which is preventing some of my kitchen fu from rocking
[2013-06-12 23:03:17 -0400] siezer: as they should be. sudo is for desktop users. =)
[2013-06-12 23:03:29 -0400] spheromak: siezer, heh
[2013-06-12 23:03:36 -0400] spheromak: root logins are for consoles
[2013-06-12 23:03:43 -0400] spheromak: :P
[2013-06-12 23:03:46 -0400] siezer: root login all the things
[2013-06-12 23:04:24 -0400] spheromak: siezer, heh just hard to test the cook that changes all of that on the ami since I can't controll it for busser
[2013-06-12 23:05:32 -0400] spheromak: ill fix it with some custom attribs in the kitchen.yml I think
[2013-06-12 23:08:00 -0400] krakensden: I have a powershell/chef question, regarding this: http://pastebin.com/7TZYpUGh
[2013-06-12 23:09:04 -0400] krakensden: It will fail consistently, but if I take the same text, put it in a file, and run it with the same options used while the recipe is running, it works
[2013-06-12 23:09:22 -0400] krakensden: [ie, by hand]
[2013-06-12 23:09:55 -0400] Majost: timsmith: That fixedit
[2013-06-12 23:10:03 -0400] Majost: I opened an issue and assigned it to you
[2013-06-12 23:10:13 -0400] Majost: http://tickets.opscode.com/browse/COOK-3165
[2013-06-12 23:10:49 -0400] Majost: set it to 'critical' because this is probably gonna break peoples boxes when they upgrade the cookbook to 0.14.0
[2013-06-12 23:13:02 -0400] spheromak: jtimberman nother kitchen Q :) you know how  I might define overrides for attribs across all suites in my  local config ? I.e. i want to set these things for the jenkins box
[2013-06-12 23:13:30 -0400] timsmith: Majost:  I'll get that fix in asap
[2013-06-12 23:13:37 -0400] timsmith: nice simple 1 line change
[2013-06-12 23:13:49 -0400] spheromak: timsmith, famous last words!
[2013-06-12 23:13:53 -0400] spheromak: :D
[2013-06-12 23:14:04 -0400] Majost: spheromak: its already tested =)
[2013-06-12 23:14:09 -0400] spheromak: :P
[2013-06-12 23:14:14 -0400] Majost: haha
[2013-06-12 23:18:45 -0400] timsmith: what could go wrong...
[2013-06-12 23:20:11 -0400] spheromak: jtimberman nvm was a durp moment on my part. :\
[2013-06-12 23:29:14 -0400] chance: if im in a sub-resource, how can i access the sub-resources parent values?
[2013-06-12 23:31:47 -0400] knuckolls_: chance: in a lwrp?
[2013-06-12 23:32:10 -0400] chance: yeah
[2013-06-12 23:32:50 -0400] chance: the current implementation of the migration_command is hard to over-write with python apps and virtualenv because you cant reference the virtualenv until later in a sub-resource.
[2013-06-12 23:33:18 -0400] piclez: hi
[2013-06-12 23:33:28 -0400] Otterley: why does test kitchen use YAML instead its own DSL?
[2013-06-12 23:33:36 -0400] piclez: I'm running chef solo but getting this error: NoMethodError: undefined method `default_release' for Chef::Resource::Package
[2013-06-12 23:36:04 -0400] coderanger: chance: Unless you are using the inline_resources mode, you can just access stuff directly, the LWRP is just appending to the same resource collection
[2013-06-12 23:36:47 -0400] coderanger: Otterley: Because Yaml is a standard format that is easy to read and write and the kitchen data really is simple declarative settings?
[2013-06-12 23:37:08 -0400] Otterley: @coderanger, but what if you have fairly complex Vagrant configurations?
[2013-06-12 23:37:21 -0400] Otterley: there's an inherent tension between "easy" and "flexible"
[2013-06-12 23:37:22 -0400] chance: coderanger: not exactly. so by default the migration_command is either virtualenv_path/bin/python manage.py syncdb --noinput OR whatever you set it to
[2013-06-12 23:37:39 -0400] chance: and thats done in the django resource
[2013-06-12 23:37:53 -0400] coderanger: Otterley: Just make a new driver
[2013-06-12 23:38:05 -0400] chance: so how do i set the migration_command and have access to the virtualenv variable
[2013-06-12 23:38:21 -0400] coderanger: subclass the existing vagrant one and do more complex stuff
[2013-06-12 23:38:24 -0400] chance: because i was getting an error saying it cant find path, which makes sense.
[2013-06-12 23:38:37 -0400] coderanger: Otterley: Ahh, migration_command is a deploy resource thing, which is separate
[2013-06-12 23:38:48 -0400] coderanger: er sorry, mistab
[2013-06-12 23:38:54 -0400] coderanger: chance: Are you using app_python?
[2013-06-12 23:38:58 -0400] chance: yeah
[2013-06-12 23:39:17 -0400] coderanger: Sigh, I feel like I should apologize each time someone uses it :(
[2013-06-12 23:39:30 -0400] chance: that feeling is shared. :<
[2013-06-12 23:39:31 -0400] Otterley: @coderanger, so every cookbook has to have a new driver if I need different Vagrant configurations for each one?  That sounds.. suboptimal
[2013-06-12 23:39:34 -0400] coderanger: So there is a way, trying to remember what the trick is
[2013-06-12 23:39:35 -0400] coderanger: sec
[2013-06-12 23:39:50 -0400] coderanger: Otterley: What vagrant settings do you need that aren't mapped in the Yaml?
[2013-06-12 23:39:59 -0400] chance: i feel like the application cookbooks have though of everything, except all the things.
[2013-06-12 23:40:06 -0400] Otterley: LOL
[2013-06-12 23:40:18 -0400] coderanger: chance: I thought syncdb was directly supported too, I would have done that I'm pretty sure
[2013-06-12 23:40:26 -0400] chance: coderanger: it is, thats the default
[2013-06-12 23:40:36 -0400] Otterley: chance, I feel like they often do too much at the expense of doing the core things right
[2013-06-12 23:41:01 -0400] chance: but i need to run manage.py migrate after syncdb, OR just make my migration command into manage.py syncdb --migrate
[2013-06-12 23:41:04 -0400] coderanger: chance: Oh, are you trying to set it up for nashvegas or something?
[2013-06-12 23:41:07 -0400] chance: nah
[2013-06-12 23:41:15 -0400] Otterley: 99% of the time you just need a package installed and a way to get a config file into it
[2013-06-12 23:41:38 -0400] chance: if i do: migration_command "manage.py syncdb --migrate" it fails because i need to use the virtualenv
[2013-06-12 23:41:53 -0400] coderanger: chance: Oh, I see, I made it just use syncdb
[2013-06-12 23:41:58 -0400] coderanger: I wonder why I did that
[2013-06-12 23:42:01 -0400] coderanger: Sigh
[2013-06-12 23:42:25 -0400] chance: this: migration_command "#{virtualenv}/bin/python syncdb --migrate"  has scoping issues since virtualenv gets set in the django lwrp sub resource later.
[2013-06-12 23:43:13 -0400] coderanger: Anyways, try making it a block migration_command do execute "..." do ... end end
[2013-06-12 23:43:27 -0400] coderanger: That should put off the compilation until the venv path is available
[2013-06-12 23:43:52 -0400] coderanger: Alternatively, just hard code the path to the venv since it should always be deploy_path/shared/virtualenv
[2013-06-12 23:49:49 -0400] knuckolls_: coderanger: chance: at my previous gig we forked app_python and added some virtualenv stuff. i didn't do the work, but it's here. should likely be a PR, but isn't.
[2013-06-12 23:50:30 -0400] knuckolls_: https://github.com/wbills/application_python/tree/gunicorn_virtualenv
[2013-06-12 23:51:38 -0400] coderanger: I'm slowly working out a design for a new version that should hopefully learn from the general advances of the last 18 months or so
[2013-06-12 23:51:43 -0400] coderanger: Just need more time >_<
[2013-06-12 23:53:14 -0400] chance: heh
[2013-06-12 23:53:37 -0400] idlemichael: is that chance lacina
[2013-06-12 23:53:59 -0400] chance: who
[2013-06-12 23:53:59 -0400] coderanger: also need to rewrite the python cookbook first
[2013-06-12 23:54:08 -0400] coderanger: since dayyyuum it needs love
[2013-06-12 23:54:42 -0400] Otterley: apt-get install python? :)
[2013-06-12 23:55:03 -0400] asharp: i'm looking at the opscode docs for the platform? method right now, i dont see any mention of Mac or OSX. is platform?("OSX") possible?
[2013-06-12 23:56:55 -0400] apes: Is it possible to scope a recipe to 3+ levels? eg cookbook_name::level2::recipe_name
[2013-06-12 23:57:05 -0400] apes: Sort of like scoping modules in Puppet?
[2013-06-12 23:57:16 -0400] siezer: nope
[2013-06-12 23:57:31 -0400] siezer: what would level2 be?
[2013-06-12 23:58:01 -0400] coderanger: asharp: mac_os_x
[2013-06-12 23:58:08 -0400] asharp: coderanger: thanks
[2013-06-12 23:58:12 -0400] coderanger: asharp: You can always check by running `ohai platform`
[2013-06-12 23:58:20 -0400] coderanger: and similarly `ohai platform_family`
[2013-06-12 23:58:30 -0400] apes: seizer: Maybe something like mysql::app::client or something similar
[2013-06-12 23:58:45 -0400] apes: Just a quick example off the top of my head
[2013-06-12 23:58:48 -0400] coderanger: apes: Thats generally an indicator you should make a second cookbook
[2013-06-12 23:59:32 -0400] apes: What would the scope of the two cookbooks be?
[2013-06-12 23:59:36 -0400] chance: coderanger: well i tried using the execute block, no scoping issues (i think?) but it doesnt run the command, but no errors it seems
[2013-06-12 23:59:45 -0400] Otterley: cookbooks aren't scoped @apes

[2013-06-26 00:17:34 -0400] swedish_chef: Is there a way to get the exit code of a script resource?
[2013-06-26 00:47:37 -0400] jhujhiti: i'm looking for a howto on installing chef server manually
[2013-06-26 00:47:50 -0400] jhujhiti: not sure why this is being difficult to google...
[2013-06-26 00:48:36 -0400] jhujhiti: by manually i mean not the omnibus installer
[2013-06-26 00:49:24 -0400] ECa9Ne: jhujhiti: you did this already and clicked on server tab? http://www.opscode.com/chef/install/
[2013-06-26 00:49:46 -0400] Otterley: does it matter which recipe a node.override is declared in for it to take precedence?
[2013-06-26 00:50:38 -0400] Otterley: i.e., if I have the recipe in which this is declared later in the run_list than the recipe in which it is used, will that cause it to be ineffective?
[2013-06-26 00:50:39 -0400] jhujhiti: ECa9Ne: that's exactly what i don't want to do. i want to handle installing and configuring dependencies. also there are no packages provided for my system
[2013-06-26 00:50:48 -0400] ECa9Ne: gotcha
[2013-06-26 00:51:52 -0400] ECa9Ne: let me look, i just did the smae today and i know i came across is. they definitely need to do a better job organizing their documentation
[2013-06-26 00:52:14 -0400] jhujhiti: i don't understand the trend to mask everything. i don't like mystery
[2013-06-26 00:52:36 -0400] ECa9Ne: they're not masking, their documentation is just a mess
[2013-06-26 00:52:42 -0400] jhujhiti: this attitude of "just run this binary, it'll work, we promise" scares me
[2013-06-26 00:53:16 -0400] jhujhiti: ECa9Ne: heh, i'm here asking because i've set this up using the magic installer at work after failing to find docs. i'd like to play with it at home but i refuse to use that installer
[2013-06-26 00:54:31 -0400] ECa9Ne: for me none of the apt or curl methods worked properly, had to use gem
[2013-06-26 00:55:13 -0400] jhujhiti: i only see chef server 10 gems on rubygems.org
[2013-06-26 00:55:43 -0400] ECa9Ne: Chef Server (API) Version: 10.18.2 on my end. yes
[2013-06-26 00:56:22 -0400] Otterley: jhujhiti, if you don't use the installer, you're going to have a bad time.
[2013-06-26 00:56:38 -0400] Otterley: depending on your OS, all it does is install an RPM or .deb.
[2013-06-26 00:56:49 -0400] Otterley: feel free to read the source if you don't trust it.
[2013-06-26 00:56:59 -0400] gchristensen: I don't know if this would interest anyone, but here is a bash command to diff a Cheffile.lock and output URLs to opscode-cookbooks to compare teh changes which have updated for each repository: https://gist.github.com/grahamc/a5429339d7435c37e1eb
[2013-06-26 00:57:01 -0400] jhujhiti: it craps out a bunch of stuff i already have. i don't need to run a second postgres instance
[2013-06-26 00:57:07 -0400] jhujhiti: plus, there are no freebsd packages
[2013-06-26 00:57:17 -0400] Otterley: are you talking about chef server?
[2013-06-26 00:57:51 -0400] jhujhiti: yes
[2013-06-26 00:57:53 -0400] ECa9Ne: jhujhuti: just gave me the idea to port to obsd
[2013-06-26 00:57:59 -0400] Otterley: ah, good luck :)
[2013-06-26 00:58:29 -0400] jhujhiti: i also came here to ask: do i really NEED to run a freaking solr instance for this thing?
[2013-06-26 00:58:32 -0400] Otterley: yes.
[2013-06-26 00:59:02 -0400] Otterley: chef server was really only designed for Linux.  Fighting to installing it on FBSD will probably be more trouble than it's worth.
[2013-06-26 00:59:15 -0400] ECa9Ne: Otterley: definitely could be
[2013-06-26 01:00:12 -0400] ECa9Ne: jhujhiti: i had to do the gem steps listed toward the bottom if this http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually
[2013-06-26 01:00:26 -0400] jhujhiti: ECa9Ne: for 10 only though
[2013-06-26 01:00:30 -0400] ECa9Ne: right
[2013-06-26 01:01:32 -0400] ECa9Ne: why the wiki page links to depreciated instructions is !?
[2013-06-26 01:02:24 -0400] jhujhiti: ECa9Ne: this is quintessential 'ruby culture'-style documentation. i could bitch and moan for hours
[2013-06-26 01:02:34 -0400] ECa9Ne: :D
[2013-06-26 01:03:15 -0400] jhujhiti: *grumble* well i'm annoyed with puppet, cfengine sucks, chef isn't going to run and is comically over-engineered anyway. what else is ther?
[2013-06-26 01:03:38 -0400] Otterley: ansible?  salt?
[2013-06-26 01:04:28 -0400] ECa9Ne: jhujhiti: have you tried to use rpm2cpio and the rhat chef.11 pkg?
[2013-06-26 01:04:34 -0400] jhujhiti: Otterley: salt looks commercial?
[2013-06-26 01:04:49 -0400] ECa9Ne: http://www.freebsd.org/doc/en/books/handbook/linuxemu-lbc-install.html 11.2.3 on there
[2013-06-26 01:05:08 -0400] jhujhiti: ECa9Ne: freebsd ABI only supports 32 bit linux, and it makes me feel dirty anyway :/
[2013-06-26 01:05:18 -0400] ECa9Ne: lol
[2013-06-26 01:05:20 -0400] Otterley: I'm just trying to help
[2013-06-26 01:05:34 -0400] jhujhiti: Otterley: it was a question. i wasn't sure if i googled the right thing.
[2013-06-26 01:05:42 -0400] jhujhiti: ansible looks interesting
[2013-06-26 01:06:09 -0400] Otterley: salt is open source
[2013-06-26 01:07:00 -0400] jhujhiti: ahh i see, they're one of these companies that hides it ;)
[2013-06-26 01:07:18 -0400] jhujhiti: i will definitely do some reading on these. thanks
[2013-06-26 01:08:05 -0400] ECa9Ne: whats the link to salt?
[2013-06-26 01:08:26 -0400] ECa9Ne: can you post it rather
[2013-06-26 01:08:52 -0400] jhujhiti: http://saltstack.com/ https://github.com/saltstack
[2013-06-26 01:09:00 -0400] ECa9Ne: ty
[2013-06-26 01:09:01 -0400] jhujhiti: github link is buried at the bottom of their 'community' page
[2013-06-26 01:10:07 -0400] Otterley: I don't think any of the alternatives are as powerful as Chef though
[2013-06-26 01:10:31 -0400] Otterley: being able to return node state to the server and query it from other nodes is incredibly useful
[2013-06-26 01:10:43 -0400] Otterley: e.g. when building Nagios configurations
[2013-06-26 01:11:25 -0400] ECa9Ne: otterley: you are probbaly right. being handcuffed to debian and no solaris or bsd support is a problem tho
[2013-06-26 01:11:34 -0400] jhujhiti: that's one of my requirements. i'm doing it with puppet
[2013-06-26 01:11:57 -0400] Otterley: ECa9Ne, the client definitely runs on Solaris + BSD
[2013-06-26 01:12:09 -0400] ECa9Ne: server
[2013-06-26 01:12:13 -0400] jhujhiti: i'm ambitious enough to write one myself but don't have the time
[2013-06-26 01:12:19 -0400] ECa9Ne: need the whole shebang
[2013-06-26 01:12:23 -0400] Otterley: you're unable to install a server on Linux?
[2013-06-26 01:13:04 -0400] ECa9Ne: i did, we're talking about bsd and others
[2013-06-26 01:13:38 -0400] jhujhiti: my attitude is that if it's open source and doesn't like non-linux systems, it was either poorly-written or does not have the style community behind it that i can work with
[2013-06-26 01:14:15 -0400] Otterley: ISTM you have a problem you need to solve; you can be religious about it if you like, but being pragmatic about it may make your life eaiser
[2013-06-26 01:14:58 -0400] jhujhiti: i'm pragmatic at my day job. everything turns into a mess when you're pragmatic all the time
[2013-06-26 01:15:02 -0400] jhujhiti: i'm ideallistic at home
[2013-06-26 01:16:35 -0400] Otterley: for better or worse, the Chef engineering team is focused on the majority here and for their own business interests, which are: open-source, easy to install on Linux; or pay for Hosted Chef
[2013-06-26 01:16:56 -0400] ECa9Ne: thats understandable
[2013-06-26 01:17:04 -0400] Otterley: if you want to blaze a trail and make it easy to install on FreeBSD, then by all means do so :)
[2013-06-26 01:17:17 -0400] Otterley: but Opscode's resources are constrained and they can't please everyone.
[2013-06-26 01:38:50 -0400] kisoku: anyone know if the community summit is happening this year ?
[2013-06-26 01:38:54 -0400] kisoku: and if so
[2013-06-26 01:38:57 -0400] kisoku: what dates ?
[2013-06-26 01:41:01 -0400] jhujhiti: heh salt doesn't look terrible to me so far, but i can't get past the name
[2013-06-26 01:49:06 -0400] bnzmnzhnz: jhujhiti: have you considered going server-less with {chef,knife}-solo?
[2013-06-26 01:50:50 -0400] jhujhiti: bnzmnzhnz: i have a soft requirement (strong preference) for something that can pass knowledge of other nodes into my code
[2013-06-26 01:50:58 -0400] jhujhiti: bnzmnzhnz: for example, i'm sick and tired of adding hosts to nagios
[2013-06-26 01:52:06 -0400] bnzmnzhnz: switch to ganglia? :-)
[2013-06-26 01:52:19 -0400] bnzmnzhnz: joking aside, that is an advantage of having a server component
[2013-06-26 01:53:24 -0400] bnzmnzhnz: I've operated at huge scale before, currently operating at small scale and value being able to code in recipes (a real language vs yaml) over shared state
[2013-06-26 02:00:26 -0400] lefnire: question about chef-vagrant - do i need to `chef cookbook upload` changes between `vagrant up`s? or does it pick up local files?
[2013-06-26 03:09:22 -0400] swedish_chef: @jtimberman I figured out how to get the bluepill cookbook to play nice with rvm. It involved dynamically subclassing the provider and overriding shell_out!. https://gist.github.com/ssimeonov/5864454
[2013-06-26 03:18:55 -0400] jtimberman: jhulten: Chef/Chef Server is open source, and the source for the system (omnibus) we use to build the full stack packages is open (apache 2 license). it's not that the server was designed specifically for linux - it's the platform that has the most inertia and market demand (specifically, ubuntu LTS and RHEL varieties). there are people in the community making an effort to improve things for FreeBSD such as "omnibus"-style packaging.
[2013-06-26 03:19:00 -0400] jtimberman: er,
[2013-06-26 03:19:03 -0400] jtimberman: jhujhiti.
[2013-06-26 03:19:14 -0400] jtimberman: but he's not here now, so that statement will live in the log
[2013-06-26 03:19:20 -0400] jtimberman: swedish_chef: cool.
[2013-06-26 03:25:09 -0400] petecheslock: don't worry jtimberman  - I still enjoyed your explanation. <3
[2013-06-26 03:26:29 -0400] samsonite: hey guys I'm trying to use a url as a source for a template but source "http://example.com/path/to/file" isn't working
[2013-06-26 03:32:42 -0400] samsonite: I should be using remote_file
[2013-06-26 03:34:55 -0400] samsonite: hmm it should work with template though too
[2013-06-26 04:09:13 -0400] ElderFain_: I'm using add_recipe('postgresql::server') and trying to figure out how to create a database as part of chef solo. I'm reading here https://github.com/opscode-cookbooks/postgresql but it looks like I'll need to bring in a new cookbook?
[2013-06-26 04:09:22 -0400] ElderFain_: this one, https://github.com/opscode-cookbooks/database ?
[2013-06-26 04:21:05 -0400] freezey: any clean way to search for a nodes mac address with knife?
[2013-06-26 04:23:55 -0400] freezey: nevermind got it
[2013-06-26 04:25:59 -0400] edwardc: anyone tried redis cookbook with ppa support ? it's seems install from source tarball so far
[2013-06-26 04:26:51 -0400] ElderFain_: edwardc: I was able to setup redis
[2013-06-26 04:26:55 -0400] ElderFain_: but no ppa support
[2013-06-26 04:27:11 -0400] ElderFain_: using redis::install
[2013-06-26 04:27:18 -0400] ElderFain_: and redisio
[2013-06-26 04:33:12 -0400] edwardc: ElderFain_: thanks for the tips, are u using redis or redisio ?
[2013-06-26 04:33:38 -0400] ElderFain_: http://community.opscode.com/cookbooks/redisio
[2013-06-26 04:33:47 -0400] edwardc: gotcha, same here.
[2013-06-26 04:35:27 -0400] ElderFain_: ugh
[2013-06-26 04:35:28 -0400] ElderFain_: undefined local variable or method `use_inline_resources'
[2013-06-26 04:35:59 -0400] ElderFain_: looks like I have to pin apt to 1.9.0..
[2013-06-26 04:36:12 -0400] ElderFain_: is there a particular place to specify pins like that?
[2013-06-26 04:36:20 -0400] ElderFain_: nvm
[2013-06-26 04:36:22 -0400] ElderFain_: cheffile ;)
[2013-06-26 05:33:56 -0400] llakey: does the recipe name live in a chef variable anywhere which can be expanded? if that were possible, i would use the recipe name variable and parameter expand it in a few places in a recipe i'm working on
[2013-06-26 06:24:03 -0400] GreatSUN: hi all
[2013-06-26 06:24:11 -0400] GreatSUN: short question:
[2013-06-26 06:24:27 -0400] GreatSUN: is it possible to access libraries from within a definition?
[2013-06-26 07:15:41 -0400] bcave: good morning all.
[2013-06-26 07:16:46 -0400] bcave: I have a question about multiple users using opscode-hosted chef. During the setup, an "myorg-validator" was created, which I then downloaded.
[2013-06-26 07:16:47 -0400] ptrf: :) morning
[2013-06-26 07:16:51 -0400] bcave: how are you ptrf ?
[2013-06-26 07:17:08 -0400] bcave: getting straight into the Q&A today :)
[2013-06-26 07:17:12 -0400] ptrf: fine, hope you are well too :)
[2013-06-26 07:17:27 -0400] ptrf: i'll give you the answer, if I know it
[2013-06-26 07:17:49 -0400] bcave: i am good. made some good progress yesterday with chef + aws... amazing tooling!
[2013-06-26 07:18:18 -0400] bcave: back to my question. I am now getting one of my engineers set up, and was wondering what the approach is to getting them validated in the organization.
[2013-06-26 07:18:39 -0400] bcave: create a new client? So each ops engineer has their own validator?
[2013-06-26 07:19:51 -0400] ptrf: bcave: we have hosted-chef at opscode as well
[2013-06-26 07:19:53 -0400] bcave: or should I just share the knife.rb and myorg-validator.pem ?
[2013-06-26 07:20:02 -0400] ptrf: everyone has their own login on manage.opscode.com
[2013-06-26 07:20:13 -0400] ptrf: and then we are all in the same organization
[2013-06-26 07:20:39 -0400] bcave: ok - so far same as us. and all have the same knife.rb + yourorg-validator.pem in the chef workspace?
[2013-06-26 07:20:56 -0400] ptrf: under the organizations pane (Selected in the top right, when you're logged in), you can see which organizations you're part of
[2013-06-26 07:21:04 -0400] ptrf: i'm in ptrf and <my_company>
[2013-06-26 07:21:21 -0400] ptrf: and for both I have some options: Select | Manage account | Regenerate validation key | Generate knife config
[2013-06-26 07:21:53 -0400] bcave: what I'm concerned with is that if I regerenerate validation key, it will invalidate existing clients ... ?
[2013-06-26 07:22:06 -0400] ptrf: yeah I'm pretty sure
[2013-06-26 07:22:19 -0400] ptrf: but I'm not entirely sure if it's only for that specific user or for everyboduy
[2013-06-26 07:22:25 -0400] ptrf: dont exactly remember
[2013-06-26 07:23:03 -0400] ptrf: but it's on one of the introduction pages on docs. i think
[2013-06-26 07:23:04 -0400] bcave: do you have >1 person that uses knife?
[2013-06-26 07:23:20 -0400] stormerider: bcave: i believe that the validation key is only used for client registration? i might be wrong
[2013-06-26 07:23:41 -0400] bcave: stormerider: it's also used for knife validation.
[2013-06-26 07:23:57 -0400] stormerider: bcave: ah, right, yeah. forgot about that.
[2013-06-26 07:23:57 -0400] bcave: it allows authentication to chef server for a) knife and b) chef-client
[2013-06-26 07:24:30 -0400] stormerider: once chef-client registers it can be tossed, but it's needed each request for knife. ok, yeah, that makes sense.
[2013-06-26 07:24:32 -0400] bcave: yeah - when i clicked the regenerate API key, it confirms whether I want to invalidate the current key
[2013-06-26 07:26:19 -0400] stormerider: you can have multiple validators, iirc. it's an attribute on the client (like admin: true, but validators specifically can't be admins)
[2013-06-26 07:27:06 -0400] stormerider: however, knife client show -Fj doesn't actually show the field for some reason
[2013-06-26 07:31:20 -0400] bcave: ah, ok. I have created a new client called myorg-validator-user2 and have just cloned the chef repo now, testing with new user's details to see how it works.
[2013-06-26 07:31:32 -0400] bcave: that's probably the best approach, i would assume.
[2013-06-26 07:31:58 -0400] stormerider: right now im the only chef user so i havent dealt with that yet myself
[2013-06-26 07:34:53 -0400] bcave: waiting for my engineer to get back, will confirm that that setup works. only thing is that a new validator doesn't give the option to generate knife.rb (think it's only the myorg-validator that does that)
[2013-06-26 07:41:45 -0400] bcave: well I could switch to the new valiator client (by updating my knife.rb), and then set the permissions for that client to allow listing and editing, and looks like everything works.
[2013-06-26 07:57:35 -0400] bcave: ok - both ways work. shared validator or 1 x validator per user. feel free to share your (more persistent) comments on http://community.opscode.com/questions/415 :p
[2013-06-26 08:03:42 -0400] foobulator: kisoku: pong
[2013-06-26 08:04:04 -0400] foobulator: kisoku: pong
[2013-06-26 08:04:28 -0400] floink: kisoku: pong
[2013-06-26 08:06:11 -0400] GreatSUN: is it possible to access libraries from within a definition?
[2013-06-26 08:06:44 -0400] floink: don't see why not
[2013-06-26 08:07:32 -0400] kisoku: ahem. yeah that was me in another test irc client btw
[2013-06-26 08:15:17 -0400] floink: msf: pong
[2013-06-26 08:16:07 -0400] floink: msf: pong
[2013-06-26 08:16:44 -0400] floink: kisoku: pong
[2013-06-26 08:17:39 -0400] floink: kisoku: pong
[2013-06-26 08:35:03 -0400] Steve______: Hi, I installed chef server on Ubuntu 12.04 using a brand new AWS ec2 t1.micro instance. Used dpkg and afterwards sudo chef-server-ctl reconfigure. Both without any problems. But the chef-server-ctl test failed with http erro 500. Any idea?
[2013-06-26 08:37:17 -0400] Steve______: BTW: Its chef-server_11.0.8-1.ubuntu.12.04_amd64.deb
[2013-06-26 08:40:20 -0400] isbaran: Steve______: i suggest using knife server plugin, sounds like security rule problem
[2013-06-26 08:41:27 -0400] Steve______: Can you explain a little bit more where to search (I'm new to the whole chef stuff)?
[2013-06-26 08:41:57 -0400] isbaran: Steve______: on your workstation install server plugin for knife, it bootstraps chef server automatically
[2013-06-26 08:42:06 -0400] isbaran: name of the plugin is "server"
[2013-06-26 08:42:40 -0400] isbaran: http://fnichol.github.io/knife-server/
[2013-06-26 08:44:05 -0400] Steve______: Ah, ok. I did it last time (on my PC with vagrant etc) the other way arround, i.e. first install the server and afetrwards install the workstation. Am I correct that I should install the workstation and than bootstrap a server?!
[2013-06-26 08:45:04 -0400] isbaran: Steve______: installing chef gem should be enough at first step
[2013-06-26 08:46:08 -0400] Steve______: Ok. I will try it this way. Thank you very much for your support.
[2013-06-26 09:03:12 -0400] el_vino: Hey guys! Trying to look into chef_handler but i cant seem to get it up and working to start messing with it... any extremely simple examples i could look into?
[2013-06-26 09:06:47 -0400] zuci: Hi! Please help me to find out chef 10.18.2 exact gem dependencies.  I am trying to follow this doc:
[2013-06-26 09:06:48 -0400] zuci: http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2013-06-26 09:06:48 -0400] zuci: But there was nothing about these gems:
[2013-06-26 09:06:48 -0400] zuci: [....] Starting chef-expander : chef-expander/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- fast_xs (LoadError)
[2013-06-26 09:06:49 -0400] zuci: Starting chef-expander : chef-expander/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- escape_utils/escape_utils
[2013-06-26 09:06:54 -0400] zuci: Starting chef-expander : chef-expander/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- http11_client (LoadError)
[2013-06-26 09:06:57 -0400] zuci: How can I install them all together? Is there Gemfile? bundle?
[2013-06-26 09:06:59 -0400] zuci: PS (omnibus installer with the latest chef does not feet our environment)
[2013-06-26 09:18:45 -0400] bcave: anyone know if there's a knife s3 plugin? If I want to publish something to S3 from my workstation... ?
[2013-06-26 09:19:48 -0400] s2r2: I wonder how github.com/blueboxgroup/razor-vagrant-lab works out the runit cookbook version restrictions that I can't overcome: djbdns -> runit <= 0.16.2; razor -> runit >= 1.0.2 (numbers from memory, sth like that)
[2013-06-26 09:20:37 -0400] s2r2: from what I see, they don't, but chef-solo doesn't seem to care... really?
[2013-06-26 09:30:22 -0400] bcave: not sure, i have dependency issues when I use berks, but without using berks, if i manually install, everything works out.
[2013-06-26 09:30:58 -0400] bcave: which is terrible practise... but it worked when setting up a new chef repo
[2013-06-26 09:41:32 -0400] el_vino: No one here exprience with chef_handler? ^^
[2013-06-26 10:21:10 -0400] jbianquetti: Ohai!   Somebody working with aws cookbook and aws_ebs_raid resource?
[2013-06-26 10:24:11 -0400] edwardc: hi, is there any example that override default attributes by node json file ?
[2013-06-26 10:25:41 -0400] jbianquetti: Working with aws cookbook, the aws_ebs_raid resource creates the right RAID 10 device first time.   But If I reboot the machine on EC2,  next Chef run  dumps :   /var/chef/cache/cookbooks/aws/providers/ebs_raid.rb line 182) had an error: ArgumentError: You tried to set a nested key, where the parent is not a hash-like object: aws/raid//var/lib/mongodb/device_map/sdi1/sdi2/sdi1
[2013-06-26 11:01:11 -0400] ragusource: hey guys, i'm getting this error: [2013-06-26T10:57:32+00:00] FATAL: Chef::Exceptions::FileNotFound: template[/etc/httpd/sites-available/my_site.conf]
[2013-06-26 11:19:25 -0400] zuci: Does anybody know straight way to install chef without omnibus installer? Using Omnibus installer supposes dedicated host for chef and we have not. Thanks in advance.
[2013-06-26 11:24:14 -0400] zaargy: zuci: what do you mean by dedicated host for chef?
[2013-06-26 11:24:17 -0400] zaargy: do you mean chef server?
[2013-06-26 11:26:47 -0400] ragusource: zuci: chef is available as a ruby gem
[2013-06-26 11:27:00 -0400] zuci: omnibus installer has embeded postgresql, some appliance listening 8000 which conflict with already installed software(
[2013-06-26 11:36:48 -0400] ragusource: Has anyone come across this error: [2013-06-26T11:35:57+00:00] FATAL: Chef::Exceptions::FileNotFound: template[/etc/httpd/sites-available/my_site.conf]
[2013-06-26 11:36:57 -0400] ragusource: When using the apache2 cookbook?
[2013-06-26 12:04:19 -0400] Steve______: @isbaran: bootstrapping the chef-server on the ec2 node with knife server plugin works very well. I had some headache what I should pass in as node-name. I used an elastic ip for this and assigned this elastic ip after creation of the instance. Is this a fashionable way? Thanks.
[2013-06-26 12:07:53 -0400] isbaran: Steve______: what ever suits you, i don't use eip and name it simply as chefserver, knife node list doesn't list chef server in chef 11 so its not a problem naming it
[2013-06-26 12:10:02 -0400] Steve______: ok. Thanks again. Have a nice day!
[2013-06-26 12:10:32 -0400] isbaran: you too
[2013-06-26 12:52:31 -0400] teetora: Has anyone run into the problem with using knife ssh "bignum too big to convert to long"?  The node is running freeSSHd and the ssh connection worked correctly for bootstraping.  The gems folder is 1.9.1 yet the only reference to a similar bug I can find said it was fixed in 1.8.7 and still should be working.
[2013-06-26 13:34:37 -0400] version2beta: does anyone know of a good cookbook for syslog-ng?
[2013-06-26 13:36:48 -0400] teetora: Has anyone run into the problem with using knife ssh "bignum too big to convert to long"?  The node is running freeSSHd and the ssh connection worked correctly for bootstraping.  The gems folder is 1.9.1 yet the only reference to a similar bug I can find said it was fixed in 1.8.7 and still should be working.
[2013-06-26 14:20:10 -0400] erik_: I'm running into a problem possibly related to CHEF-4117
[2013-06-26 14:20:43 -0400] tknerr: ohai
[2013-06-26 14:20:54 -0400] erik_: hai
[2013-06-26 14:21:20 -0400] tknerr: anyone knows how to get the external dns name on aws?
[2013-06-26 14:21:32 -0400] tknerr: node['fqdn'] returns the internal dns
[2013-06-26 14:23:03 -0400] adnichols: tknerr node['ec2']['public_hostname'] ?
[2013-06-26 14:23:06 -0400] erik_: I get a Recipe Compile Error in chef_handler, coming from lwrp_base.rb, looks very similar to CHEF-4117.  any ideas what to do?
[2013-06-26 14:24:02 -0400] ikv: does anybody know where I can find some literature about installing chef on Arch linux?
[2013-06-26 14:24:17 -0400] ikv: or ideas about where to start?
[2013-06-26 14:25:05 -0400] heathsnow: Anyone else have a problem doing Bundle install on a machine using the Chef Omibus installer?  Problem is the installer ships w/ruby.1.9.2 but the 'activesupport' gem (updated to 4.0.0 just yesterday) requires ruby.1.9.3 and so a Bundle Install fails :S
[2013-06-26 14:25:36 -0400] tknerr: adnichols: so what's the standard pattern for writing recipes that work both on AWS and other providers?
[2013-06-26 14:25:56 -0400] tknerr: adnichols: `if node['ec'] ...`?
[2013-06-26 14:26:06 -0400] adnichols: tknerr I'm not sure there is one - the problem is 'other providers' can be fairly broad
[2013-06-26 14:27:03 -0400] sparr: I've followed the directions at http://www.opscode.com/chef/install/ to install chef-server on my centos server. Now I want to set up my user account on the chef server and my OSX laptop as workstations so I can run knife commands. I'm finding a lot of instructions that involve copying /etc/chef/*.pem from the chef server, but that folder is empty. Have I skipped a step?
[2013-06-26 14:27:32 -0400] tknerr: adnichols: I thought there was a `node['cloud']` attribute, which whould be either `ec2`, `rackspace`, etc...
[2013-06-26 14:27:47 -0400] adnichols: You can run 'ohai' on any node and look at the attributes
[2013-06-26 14:28:10 -0400] adnichols: There is also a 'cloud' attribute
[2013-06-26 14:28:29 -0400] adnichols: whether that'll work with all providers is another question entierly
[2013-06-26 14:29:14 -0400] adnichols: There seems to be a node[:cloud][:public_hostname] on both my rackspace & aws nodes
[2013-06-26 14:30:21 -0400] tknerr: adnichol: ok, good to know, thanks!
[2013-06-26 14:32:25 -0400] heathsnow: Anyone know if any of the Chef Omnibus installers after v11.4.4 are bundled with Ruby 1.9.3?
[2013-06-26 14:34:06 -0400] daxroc: Evening all
[2013-06-26 14:36:46 -0400] aotto2013: How do I update chef server from 11.0.4 to 11.0.8 now that there is no apt repository since chef server 11? Just install the right deb package with dpkg and run chef-server-ctl reconfigure afterwards?
[2013-06-26 14:39:24 -0400] priestjim: aotto2013: exactly
[2013-06-26 14:39:28 -0400] daxroc: Any one have any public documentation on using chef in a highly available scenario? Some rough figures would be 1500 nodes at 5min runs
[2013-06-26 14:41:03 -0400] jonlives: daxroc: we're using ~1300 nodes at 10 min runs if that helps
[2013-06-26 14:44:40 -0400] aotto2013: priestjim: Thanks!
[2013-06-26 14:45:17 -0400] priestjim: jonlives: meh :-P
[2013-06-26 14:45:31 -0400] jonlives: :p
[2013-06-26 14:45:59 -0400] priestjim: anyone using metachef effectively?
[2013-06-26 14:46:47 -0400] ikv: anyone using chef workstation on Arch ?
[2013-06-26 14:47:30 -0400] priestjim: ikv: better question: anyone using arch? :P
[2013-06-26 14:47:52 -0400] daxroc: jonlives: Curios on what hardware your running chef server on, are you using open-source or hosted?
[2013-06-26 14:48:26 -0400] ikv: priestjim: clearly only the nerdiest :p
[2013-06-26 14:50:38 -0400] Doc_X: is there a "best practice" for encapsulating actions inside a chef cookbook for stuff i want to do every time a service is notified?
[2013-06-26 14:51:31 -0400] Doc_X: for example, i'd like to do a cache clear of tomcat cached classes when i restart tomcat, but i can't seem to put a 'command' entry inside the service definition
[2013-06-26 14:52:09 -0400] Doc_X: or if i wanted to do a touch on a file when a service is restarted . . . but i can't seem to put 'file' inside a service definition either. . . so how would one accomplish this?
[2013-06-26 14:52:11 -0400] jonlives: daxroc: open sourced chef 11, running on a HP ProLiant DL360p Gen8 with 48GB RAM and 2 x Intel(R) Xeon(R) CPU E5-2640 0 @ 2.50GHz
[2013-06-26 14:52:27 -0400] Doc_X: and am i the only one who's run into this sort of thing (googling has been fruitless so far)
[2013-06-26 14:52:43 -0400] jonlives: daxroc: currently sitting at around 30% cpu usage and 7GB or so of RAM used.
[2013-06-26 14:54:06 -0400] daxroc: jonlives: Nice, Have you looked into scaling it for HA ? We operate in multiple regions so having two zones that stay in sync would be ideal if you get my meaning
[2013-06-26 14:55:30 -0400] daxroc: As I understand the frontend scales quite well, the database is now in postgresql so it shouldn't be too complicated to implement ( Famous last words )
[2013-06-26 14:55:37 -0400] jonlives: daxroc: we've not had a need to look at that yet - now that it's running postgres etc tho in chef 11 it should be easier than it would have been with 10 :p
[2013-06-26 14:55:50 -0400] jonlives: daxroc: the only thing we had to scale with chef 10 was more API workers.
[2013-06-26 14:56:52 -0400] daxroc: Yeah as it defaults to one. How are you doing the balancing on them
[2013-06-26 14:58:17 -0400] adnichols: Doc_X have you tried having the service notify another resource like execute/bash? Not sure if a service that is notified to restart can notify another resource
[2013-06-26 14:58:18 -0400] jonlives: daxroc: this was how we did it: http://blog.jonliv.es/2012/03/13/scaling-chef-with-more-api-workers/
[2013-06-26 14:58:24 -0400] jonlives: daxroc: chef 11 uses nginx now tho
[2013-06-26 15:00:27 -0400] Doc_X: adnichols i think that's what i'm looking for... for some reason i was thinking notifies could only notify services. completely missed notifies execute.
[2013-06-26 15:00:27 -0400] Doc_X: thanks much for the pointer!
[2013-06-26 15:00:49 -0400] adnichols: sure, hopefully it works
[2013-06-26 15:01:19 -0400] daxroc: jonlives: I'm probably over-engineering here but I'm thinking would be nice to have the load split between two geo-diverse sites and have then handle failover / upgrades etc ?
[2013-06-26 15:02:30 -0400] jonlives: daxroc: we've not found the need for that thus far, but we've made sure we can recover quickly if the server happens to crap out. I'd be very interested to hear how you get on if you do that tho, cos we'll likely end up looking at it eventually.
[2013-06-26 15:02:55 -0400] jonlives: we sync all of our stuff to opscode platform for one, so we can flip over to that if we have to
[2013-06-26 15:03:14 -0400] daxroc: Ah so you have the hosted as a backup ?
[2013-06-26 15:03:33 -0400] jonlives: daxroc: exactly
[2013-06-26 15:03:39 -0400] daxroc: and for support  :D
[2013-06-26 15:03:47 -0400] jonlives: daxroc: pfft, who needs support :p
[2013-06-26 15:03:50 -0400] jonlives: but yes ;)
[2013-06-26 15:04:17 -0400] daxroc: Have you guys ever need to flip it ?
[2013-06-26 15:04:33 -0400] jonlives: daxroc: not so far, but we've gamedayed it
[2013-06-26 15:04:37 -0400] jonlives: not so far for *real* anyway
[2013-06-26 15:04:51 -0400] jonlives: the box has raid etc so we're immune-ish to disk failures and so forth
[2013-06-26 15:05:35 -0400] daxroc: Curios on whats your bandwidth usage on checkin ?
[2013-06-26 15:06:26 -0400] jonlives: daxroc: the box is pretty constant on 20-25Mbit/sec out, 10-20Mbit/sec in
[2013-06-26 15:07:30 -0400] jonlives: daxroc: the higher figure largely lines up with the 10-minutely runs :)
[2013-06-26 15:08:39 -0400] sparr: I am working through http://docs.opscode.com/install_workstation.html and I am at the "knife configure --initial" step on my chef server. It can't connect to itself on port 4000, probably because nothing is listening on port 4000. Have I missed a step?
[2013-06-26 15:08:53 -0400] daxroc: jonlives: So it's all on one server including DB
[2013-06-26 15:09:30 -0400] jonlives: daxroc: yep
[2013-06-26 15:09:44 -0400] adnichols: sparr chef11? It listens on port 443
[2013-06-26 15:09:54 -0400] sparr: adnichols: good to know
[2013-06-26 15:11:01 -0400] sparr: a bit annoying that knife's defaults don't follow that
[2013-06-26 15:11:10 -0400] sparr: or know where admin.pem is stored by default (on centos)
[2013-06-26 15:12:03 -0400] daxroc: jonlives: Appreciate it
[2013-06-26 15:12:10 -0400] jonlives: daxroc: any time :)
[2013-06-26 15:12:21 -0400] sparr: thanks adnichols
[2013-06-26 15:12:28 -0400] daxroc: I'll hold you to that one ! sure to have lots of questions :D
[2013-06-26 15:12:30 -0400] sparr: attempt #17 succeeds!
[2013-06-26 15:12:54 -0400] jonlives: daxroc: I look forward to it ;)
[2013-06-26 15:26:16 -0400] houdini: I get Connection reset by peer - SSL_connect when sudo chef-server-ctl test. Any ideas how to fix it?
[2013-06-26 15:26:33 -0400] houdini: here is additional information: https://gist.github.com/Houdini/5868356
[2013-06-26 15:40:44 -0400] sparr: does the chef-repo need to exist on the server, or only on the workstations?
[2013-06-26 15:41:08 -0400] sparr: I expect it needs to be on the server, so that nodes can be given new recipes when they check in periodically if their updated run list calls for it
[2013-06-26 15:41:20 -0400] sparr: but all the instructions I can find only involve putting the repository on a workstation
[2013-06-26 15:41:38 -0400] poolpog: howdy folks
[2013-06-26 15:42:07 -0400] poolpog: I'm trying to figure out how to install an Ohai plugin, but the docs omit some basic information
[2013-06-26 15:42:19 -0400] poolpog: (basic to me at least) .... http://docs.opscode.com/ohai.html
[2013-06-26 15:42:37 -0400] poolpog: there is an example how to load a plugin, but only within the context of IRB
[2013-06-26 15:43:12 -0400] bcave: another beginner ruby question... if I want to install multiple packages, how can I specify a list? `package "pkg1" "pkg2" do .... end`
[2013-06-26 15:43:16 -0400] bcave: ?
[2013-06-26 15:44:37 -0400] poolpog: also, there is a default plugin path mentioned, but the docs are missing this: How do I get an Ohai plugin installed so that all the nodes have it?
[2013-06-26 15:44:42 -0400] poolpog: confused
[2013-06-26 15:53:13 -0400] poolpog: one more thing... The nginx cookbook is cited as an example that uses an Ohai plugin. So is it good practice to include an Ohai plugin in a recipe that needs it? Also does the recipe then load and run the Ohai plugin before the recipe needs the data the plugin generates?
[2013-06-26 15:59:21 -0400] poolpog: bcave: I do stuff like that by iterating over an array...
[2013-06-26 15:59:51 -0400] poolpog: e.g.  %W[package1 package2 package3].each { |p| package p }
[2013-06-26 15:59:54 -0400] poolpog: something liket hat
[2013-06-26 16:04:36 -0400] bnzmnzhnz: rookie question about using LWRPs ... I want to do this in my recipe:
[2013-06-26 16:04:36 -0400] bnzmnzhnz: include_recipe 'sudo'; sudo 'foo' {...}
[2013-06-26 16:04:56 -0400] bnzmnzhnz: but it is throwing 'Cannot find a resource for sudo on ubuntu version 12.04'
[2013-06-26 16:05:13 -0400] bnzmnzhnz: the sudo cookbook is correctly installed with berkshelf
[2013-06-26 16:05:34 -0400] bnzmnzhnz: am I using include_recipe correctly?
[2013-06-26 16:26:50 -0400] poolpog: ok, I think we figured some of this out
[2013-06-26 16:26:52 -0400] poolpog: but
[2013-06-26 16:27:02 -0400] poolpog: how does Ohai load a custom plugin on each run?
[2013-06-26 16:27:15 -0400] poolpog: the example in the doc is limited to manually loading the plugin in IRB
[2013-06-26 16:27:33 -0400] poolpog: hello? anyone here today? I hope you are having a pleasant day
[2013-06-26 17:25:38 -0400] stormerider: is there a way in virtualbox to get the name of the VM? like using vagrant, it's vagrant_12402394 or the like
[2013-06-26 17:31:45 -0400] gad0lin_: I want to cry and shout. I am using berkshelf and it ignores the entries pointing to my cookbooks e.g. cookbook 'yum', git:'git@...'
[2013-06-26 17:32:02 -0400] gad0lin_: it always fetch cookbooks from opscode site
[2013-06-26 17:32:26 -0400] gad0lin_: anyone happen to see that mysterious thing?
[2013-06-26 17:32:46 -0400] stormerider: try deleting your berkshelf.lock?
[2013-06-26 17:34:02 -0400] gad0lin: it does not help
[2013-06-26 17:34:35 -0400] gad0lin: stormerider: i goes to opscode site when i try to upload graphite cookbook (that one should be fetch from there)
[2013-06-26 17:35:51 -0400] xrl: I'm using "knife ec2 server create" but my server doesn't have /etc/chef/client.pem so it's failing to bootstrap
[2013-06-26 17:36:12 -0400] xrl: how can I configure knife to copy over the client.pem on a new box? otherwise I have to log in to the box and start chef-client manually
[2013-06-26 17:36:28 -0400] trollwork: so question for you guys.. I'm building a dkim install recipe.. but how would you test it after install if you're not running dns on a dev box?
[2013-06-26 17:36:35 -0400] stormerider: if its not the lock file, i dont know, sorry.
[2013-06-26 17:37:08 -0400] gad0lin_: stormerider: thx, anyway
[2013-06-26 17:37:11 -0400] spox: gad0lin: are you specifying the cookbook for upload
[2013-06-26 17:37:33 -0400] gad0lin_: spox: yep, I do berks upload graphite
[2013-06-26 17:38:09 -0400] spox: are the other cookbooks already uploaded?
[2013-06-26 17:38:33 -0400] gad0lin_: spox: yes, they are
[2013-06-26 17:38:43 -0400] spox: add --skip-dependencies
[2013-06-26 17:41:11 -0400] gad0lin_: spox: sth is really messed up, evern tough I set the flag it tells Uploading yum (2.3.0) to:
[2013-06-26 17:41:27 -0400] stormerider: skip-dependencies is broken right now
[2013-06-26 17:41:28 -0400] btorch: hmm I thought if I had the environment setup on my knife.rb whenever I uploaded roles and cookbooks it would only show up on that environment
[2013-06-26 17:41:31 -0400] btorch: is that not so ?
[2013-06-26 17:41:34 -0400] stormerider: there's an open ticket on it
[2013-06-26 17:42:43 -0400] cinen: btorch: cookbooks aren't environment specific
[2013-06-26 17:44:41 -0400] cinen: roles can be but all environments use _default environment roles unless specified otherwise
[2013-06-26 17:56:08 -0400] jmickle: jtimberman: coderanger either of you around?
[2013-06-26 17:56:19 -0400] coderanger: For like 3 minutes before a meeting
[2013-06-26 17:56:35 -0400] jmickle: i have a super weird problem after upgrading to chef 11
[2013-06-26 17:56:51 -0400] jmickle: essentially a cookbook that worked fine and wasn't touched, was only invoking 2 lines of the recipe
[2013-06-26 17:56:58 -0400] jmickle: then would prematurely stop no errors
[2013-06-26 17:57:04 -0400] jmickle: when i added log statements
[2013-06-26 17:57:07 -0400] jmickle: it kicked in all the other functions
[2013-06-26 17:57:11 -0400] jmickle: and works fine
[2013-06-26 17:57:22 -0400] jmickle: but if i remove log "I am here" from before the other functions
[2013-06-26 17:57:25 -0400] jmickle: nothing is invoked
[2013-06-26 17:57:33 -0400] jmickle: have you heard/seen this behavior?
[2013-06-26 17:57:35 -0400] coderanger: can you pastebin the code?
[2013-06-26 17:57:39 -0400] coderanger: (also meeting, so back in ~15)
[2013-06-26 17:57:46 -0400] jmickle: yeah hit me up when you are back
[2013-06-26 17:57:50 -0400] jmickle: please
[2013-06-26 18:05:20 -0400] coderanger: Okay, so pastebin?
[2013-06-26 18:05:39 -0400] lindenle: Hi All, newbie, why is there package and yum_package? shouldn't package always be used to abstract the actually way of installing in a given system?
[2013-06-26 18:06:04 -0400] lindenle: Can someone provide a really good 101? Or advanced 101?
[2013-06-26 18:07:37 -0400] KarlHungus: lindenle: see the examples on the package resource, specifically the provider attribute
[2013-06-26 18:08:46 -0400] coderanger: lindenle: 99% of the time you should just use package
[2013-06-26 18:09:02 -0400] lindenle: coderanger, ok, any hints at the 1% ;)
[2013-06-26 18:09:12 -0400] coderanger: lindenle: The override helpers for each platform are for really silly things and are just a convenience
[2013-06-26 18:09:20 -0400] lindenle: coderanger, coming in from puppet/cfengine path
[2013-06-26 18:10:00 -0400] coderanger: Like apt_package vs. dpkg_package
[2013-06-26 18:10:14 -0400] coderanger: on Debian-oids package == apt_package
[2013-06-26 18:10:27 -0400] lindenle: k
[2013-06-26 18:10:38 -0400] coderanger: but sometimes you want to just use dpkg directly like for a local package file
[2013-06-26 18:10:42 -0400] coderanger: or weird options
[2013-06-26 18:11:00 -0400] coderanger: or the even weirder times, like wanting to install an RPM on Gentoo or something
[2013-06-26 18:11:25 -0400] coderanger: (usually for old-school third party software that doesn't grok linux very much)
[2013-06-26 18:11:58 -0400] coderanger: Like Maya, a 3D modeling tool, was only shipped as RPMs for a while, even though it was a static build and ran on anything
[2013-06-26 18:12:42 -0400] log1kal: Anyone have some tips on LWRP availability changes in chef 10 and 11? e.g. "sendgrid_application_deploy_key" works fine in chef 10, but "NameError: Cannot find a resource for sendgrid_application_deploy_key" is what I get from chef 11
[2013-06-26 18:13:18 -0400] log1kal: I'm wondering if I'm running into what "use_inline_resources" is for.
[2013-06-26 18:13:30 -0400] coderanger: log1kal: Are you sure the cookbook is loading correctly?
[2013-06-26 18:13:42 -0400] coderanger: Check your depedencies in the cookbook metadata, for example :)
[2013-06-26 18:13:44 -0400] log1kal: it's called in the same cookbook that it's defined in
[2013-06-26 18:14:19 -0400] Otterley: hi folks
[2013-06-26 18:14:26 -0400] log1kal: eg, I have a recipe sendgrid_application::deployment that calls sendgrid_application_deploy_key
[2013-06-26 18:15:24 -0400] coderanger: and you have a resources/deploy_key.rb in that cookbook?
[2013-06-26 18:15:29 -0400] jmickle: hey coderanger you back?
[2013-06-26 18:15:36 -0400] log1kal: kitchen testing has this working correctly in 10 (same recipe and lwrp), but not in 11
[2013-06-26 18:15:40 -0400] Otterley: yesterday I asked about attribute precedence, but didn't get a response.  does the order of the run_list matter when it comes to setting overrides?  in other words, if a recipe says "node.override['foo'] = bar", and this attribute is referenced a cookbook that runs prior to the one in which it is set, and there are no other overrides for this attribute, what will happen?
[2013-06-26 18:15:42 -0400] coderanger: jmickle: Yep, I poked you a while ago, still need pastebin :P
[2013-06-26 18:15:45 -0400] Otterley: or what is supposed to happen?
[2013-06-26 18:15:49 -0400] jmickle: oops sorry i was ark
[2013-06-26 18:15:52 -0400] jmickle: afk*
[2013-06-26 18:15:56 -0400] jmickle: let me get that for you
[2013-06-26 18:16:07 -0400] coderanger: Otterley: It matters, but not in that case
[2013-06-26 18:16:15 -0400] coderanger: All attribute files are run before all recipes
[2013-06-26 18:16:21 -0400] coderanger: but they are run in run list order
[2013-06-26 18:16:21 -0400] Otterley: coderanger, I'm not getting the expected outcome
[2013-06-26 18:16:33 -0400] Otterley: the override is declared in a recipe, not in an attributes file.
[2013-06-26 18:16:39 -0400] xrl: how should my knife.rb setup be initializing client keys?
[2013-06-26 18:16:54 -0400] coderanger: xrl: Open source or Hosted (or Private)?
[2013-06-26 18:17:03 -0400] xrl: coderanger: hosted on opscode
[2013-06-26 18:17:09 -0400] coderanger: Otterley: Hmm, that should just be normal imperative code then
[2013-06-26 18:17:39 -0400] xrl: my knife command is bringing up a box, but it's hitting a 403 when it tries to save back to its node definition on opscode
[2013-06-26 18:17:50 -0400] coderanger: xrl: Ignore the lorem ipsum, but do this, https://preview.opscode.com, then Admin -> click on your org -> Getting Started
[2013-06-26 18:18:04 -0400] coderanger: xrl: You can download your starter kit from there
[2013-06-26 18:18:07 -0400] xrl: when I look at the ACL of the node on opscode the new client doesn't have the proper permissions
[2013-06-26 18:18:18 -0400] Otterley: coderanger, what's happening is: I'm calling recipe A and recipe B, in that order.  Recipe A uses an attribute that has a default in its cookbook's attributes/default.rb that is overridden by a recipe B (as a node.override= statement).  When recipe A runs, the attribute appears to evaluate to its default value, not to its overridden value.
[2013-06-26 18:18:47 -0400] Otterley: according to the documentation, recipe B's override should prevail, but I'm not setting that happening
[2013-06-26 18:19:00 -0400] coderanger: Otterley: That sounds correct, if recipe A runs first then there is no override at that point
[2013-06-26 18:19:00 -0400] xrl: coderanger: whoa, this interface is pretty nice :)
[2013-06-26 18:19:03 -0400] log1kal: recipe B needs to actually run to apply that override, doesn't it? if you've got that in cookbook code, and not attributes
[2013-06-26 18:19:39 -0400] coderanger: Otterley: If you are doing the override at compile time in B, then inside a ruby_block in A you should see it, but at compile time in A you would not
[2013-06-26 18:19:39 -0400] Otterley: coderanger, so it sounds like the documentation re: precedence needs some clarification
[2013-06-26 18:19:45 -0400] daxroc: Has anyone used chef to control software firewalls ?
[2013-06-26 18:19:47 -0400] log1kal: coderanger: ignore my previous, this is failing in 10 and 11. Back to digging.
[2013-06-26 18:20:13 -0400] Otterley: coderanger, ok - what if I want to use the attribute as an only_if guard in a resource declaration in recipe B?
[2013-06-26 18:20:16 -0400] coderanger: xrl: That starter kit should have everything you need :)
[2013-06-26 18:20:24 -0400] jmickle: coderanger: i pm'd it to you
[2013-06-26 18:20:34 -0400] coderanger: Otterley: That is evaluated at compile time, so no dice
[2013-06-26 18:20:40 -0400] Otterley: suggestions?
[2013-06-26 18:21:01 -0400] coderanger: Otterley: Move the relevant logic into a C that runs after both?
[2013-06-26 18:21:08 -0400] coderanger: Hard to tell if thats viable without more context
[2013-06-26 18:21:17 -0400] coderanger: or move the override into a attr file
[2013-06-26 18:21:29 -0400] xrl: coderanger: where's the starter kit? I just see a login and new webui?
[2013-06-26 18:21:30 -0400] log1kal: set the override in B's attribute's files?
[2013-06-26 18:21:40 -0400] coderanger: xrl: Well you have to login :)
[2013-06-26 18:21:45 -0400] Otterley: coderanger, doesn't Chef still evaluate all attributes files, regardless of the recipe being run?
[2013-06-26 18:21:54 -0400] coderanger: Otterley: Indeed
[2013-06-26 18:21:56 -0400] Otterley: this would be easy if I could associate an attributes file with the recipe
[2013-06-26 18:22:03 -0400] Otterley: that never gets evaluated otherwise
[2013-06-26 18:22:37 -0400] xrl: coderanger: ok, now that I'm logged in I just see my two opscode groups. where in the webui should i go for it?
[2013-06-26 18:23:00 -0400] coderanger: jmickle: It looks like there is an extra "end" at the bottom of the file?
[2013-06-26 18:23:19 -0400] jmickle: yeah i just noticed that but would that cause it to only initiate the first 2 statements of that recipe?
[2013-06-26 18:23:20 -0400] coderanger: xrl: Admin tab, click on your org, choose getting started in the sidebar
[2013-06-26 18:23:49 -0400] coderanger: jmickle: Probably some ruby eval parsing craziness
[2013-06-26 18:24:05 -0400] xrl: whoa, it's going to reset my user and organiziation keys
[2013-06-26 18:24:07 -0400] coderanger: ahh no, that end corresponds to the each
[2013-06-26 18:24:16 -0400] coderanger: xrl: Yeah, but if you are just getting started that should be okay
[2013-06-26 18:24:26 -0400] Eiam: is there any handy way to setup replication with chef for postgres?
[2013-06-26 18:24:28 -0400] xrl: coderanger: that's not quite what i was going for. I've been upgrading our chef stack to 11. we already have something that kinda/sorta works
[2013-06-26 18:24:28 -0400] jmickle: oh yeah
[2013-06-26 18:24:31 -0400] jmickle: spacing is off
[2013-06-26 18:24:35 -0400] coderanger: xrl: Ahh, sorry
[2013-06-26 18:24:46 -0400] Eiam: It looks like "no" because it requires setting up both a master and a slave, and only my "slaves" are controlled via chef
[2013-06-26 18:24:51 -0400] xrl: coderanger: I'd like to start over but I can't break what we have already :)
[2013-06-26 18:25:06 -0400] coderanger: xrl: So ignore that then, bad perms on the node object usually means it was created by the wrong client
[2013-06-26 18:25:16 -0400] coderanger: xrl: Check that your validation key is correct
[2013-06-26 18:26:00 -0400] coderanger: xrl: The actor (read: user or client) that creates an object in hosted chef becomes its owner
[2013-06-26 18:26:06 -0400] jmickle: i sent you the log of the chef-client output as well
[2013-06-26 18:26:13 -0400] jmickle: for that section
[2013-06-26 18:26:18 -0400] jmickle: it only processes those 2 lines then moves on
[2013-06-26 18:26:22 -0400] jmickle: doesn't seem to eval anything els
[2013-06-26 18:26:47 -0400] jessicab: xrl: yesterday it sorta sounded like the workflow might be off? when you create a new server do you do a knife client delete, knife node delete and then do the knife ec2 server create? cause that should always create the client correctly
[2013-06-26 18:26:56 -0400] xrl: coderanger: oh, ok. here's an example of my knife command: https://gist.github.com/xrl/5869986
[2013-06-26 18:27:21 -0400] xrl: jessicab: hi, thanks for that help yesterday! nodes/*.json were the way to go
[2013-06-26 18:27:38 -0400] coderanger: Ahh yeah, negatory
[2013-06-26 18:27:43 -0400] coderanger: You can't do that node from file
[2013-06-26 18:27:47 -0400] jessicab: xrl: ah yea, that knife node create is whats messing you up.. you should be able to add that file to the knife ec2 command
[2013-06-26 18:27:51 -0400] coderanger: since in that case it is your user creating the node object
[2013-06-26 18:28:01 -0400] coderanger: you want to make sure it is the node's client that makes it
[2013-06-26 18:28:06 -0400] xrl: so don't do "knife node from file nodes/berksinstein.json"
[2013-06-26 18:28:21 -0400] coderanger: Or you have to reset the ACLs
[2013-06-26 18:29:28 -0400] xrl: coderanger: ok, so I should use the -j option on knife to have it load from the nodes/*.json?
[2013-06-26 18:29:53 -0400] coderanger: What data are you trying to load?
[2013-06-26 18:29:59 -0400] coderanger: The answer is "probably"
[2013-06-26 18:30:17 -0400] xrl: coderanger: pretty basic stuff. it has the run list and some normal attributes for that node
[2013-06-26 18:30:43 -0400] xrl: hrm, -j looks like it wants a literal string, not a file
[2013-06-26 18:30:46 -0400] coderanger: Right, so the run list you should be setting via the -R option
[2013-06-26 18:31:12 -0400] xrl: ok, what about attributes then?
[2013-06-26 18:31:22 -0400] coderanger: there isn't a great way to set node attrs during bootstrap that I know of
[2013-06-26 18:31:31 -0400] coderanger: The -j option should work
[2013-06-26 18:31:34 -0400] coderanger: if a bit clunky
[2013-06-26 18:31:35 -0400] xrl: oh
[2013-06-26 18:31:45 -0400] xrl: why aren't people setting attributes at bootstrap?
[2013-06-26 18:32:02 -0400] coderanger: Mostly because we advise not ever setting attributes on nodes
[2013-06-26 18:32:11 -0400] coderanger: generally they go in roles, environments, and cookbooks
[2013-06-26 18:32:29 -0400] coderanger: but setting things on nodes often leads to special snowflake servers
[2013-06-26 18:32:38 -0400] xrl: hmm, but I'm bringing up this box with an existing EBS volumes
[2013-06-26 18:32:48 -0400] coderanger: Yeah, that would be an example of where you need to do it :)
[2013-06-26 18:33:10 -0400] xrl: coderanger: haha, ok
[2013-06-26 18:33:19 -0400] coderanger: Usually just not done at bootstrap time I guess, bootstrap, then update the node, then chef-client it again
[2013-06-26 18:33:32 -0400] jessicab: xrl: you could always just create some sort of ebs cookbook, and just include that on those nodes.. might be easier than trying to set the attributes
[2013-06-26 18:34:10 -0400] xrl: sounds like no one wants my workflow lol
[2013-06-26 18:34:12 -0400] coderanger: jessicab: Its specific to the instance
[2013-06-26 18:34:21 -0400] coderanger: jessicab: The EBS volume ID and mount info
[2013-06-26 18:34:33 -0400] coderanger: xrl: EBS is definitely not as popular as it once was
[2013-06-26 18:34:35 -0400] xrl: I want to version control my node configs in my chef repo
[2013-06-26 18:34:48 -0400] xrl: and just remake boxes using those configs
[2013-06-26 18:34:51 -0400] coderanger: Yeah, thats not really a normal workflow
[2013-06-26 18:34:54 -0400] xrl: I guess it's because these are 'snowflake' boxes
[2013-06-26 18:34:59 -0400] coderanger: nodes are generally treated as 100% disposable
[2013-06-26 18:35:02 -0400] xrl: they're whitebox apps
[2013-06-26 18:35:29 -0400] xrl: coderanger: got'cha
[2013-06-26 18:35:39 -0400] coderanger: But it does definitely work :)
[2013-06-26 18:35:49 -0400] coderanger: You just need to poke the node after bootstrap instead of before
[2013-06-26 18:35:57 -0400] coderanger: not that different from what you are doing now :)
[2013-06-26 18:36:13 -0400] xrl: hmm, except bootstrap fails when the box tries to write back to the server
[2013-06-26 18:36:21 -0400] xrl: I'll use the -j and see what happens
[2013-06-26 18:36:27 -0400] xrl: it'll probably work ;)
[2013-06-26 18:36:45 -0400] coderanger: Ahh yeah, you would have to make sure the recipes can cope with not have the EBS volume loaded
[2013-06-26 18:37:02 -0400] coderanger: Granted given EBS' track record, I would recommend that regardless ;-)
[2013-06-26 18:37:28 -0400] xrl: we run our own DBs on each instance
[2013-06-26 18:37:48 -0400] xrl: and we have to keep them local because of customer demands
[2013-06-26 18:37:59 -0400] coderanger: Right, so you can make the recipe code not start the DB service if the EBS volume is missing
[2013-06-26 18:38:17 -0400] coderanger: Gotta go run to more meetings
[2013-06-26 18:38:39 -0400] coderanger: Also if the -j option doesn't work, you can also just make a custom bootstrap template
[2013-06-26 18:38:43 -0400] coderanger: :)
[2013-06-26 18:39:00 -0400] xrl: coderanger: we had a customer bootstrap template... but we weren't using omnibus
[2013-06-26 18:39:08 -0400] xrl: coderanger: later
[2013-06-26 18:44:41 -0400] cassianoleal: In AWS, how do I find the IP of an ELB instance dynamically in a recipe?
[2013-06-26 18:45:10 -0400] coderanger: cassianoleal: Grab the AWS gem (or Fog) and query for it?
[2013-06-26 18:45:37 -0400] cwj: i think aws cookbook uses right-aws gem
[2013-06-26 18:45:44 -0400] cwj: which should be able to do the jerb
[2013-06-26 18:46:29 -0400] coderanger: Or use chef-funnel and boto! (note, don't actually do that)
[2013-06-26 18:46:32 -0400] cassianoleal: coderanger and cwj: I'll have a look at both approaches. I was actually hoping that there was already something pre-implemented in a cookbook (aws, maybe) for that
[2013-06-26 18:46:40 -0400] cassianoleal: coderanger: no, thanks :)
[2013-06-26 18:47:12 -0400] stormerider: chef-funnel?
[2013-06-26 18:47:15 -0400] cwj: coderanger just wants to watch the world burn
[2013-06-26 18:47:21 -0400] cwj: ;)
[2013-06-26 18:47:23 -0400] cassianoleal: lol
[2013-06-26 18:51:01 -0400] stormerider: coderanger: "Using this in production will probably result in your servers catching fire." cute :)
[2013-06-26 18:51:29 -0400] coderanger: stormerider: Look at the code and you'll agree
[2013-06-26 18:52:16 -0400] stormerider: so it's really chef-blender, waiting for you to insert your hands? :P
[2013-06-26 18:52:42 -0400] cwj: chef-woodchipper
[2013-06-26 18:52:48 -0400] stormerider: hehe
[2013-06-26 18:52:51 -0400] trollwork: lol
[2013-06-26 18:53:19 -0400] coderanger: I should probably split the Python-on-Ruby stuff into a gem at some point
[2013-06-26 18:53:31 -0400] coderanger: since that is legitimately useful
[2013-06-26 18:55:29 -0400] ianco: coderanger, how goes the haproxy lwrp mergification?
[2013-06-26 18:55:46 -0400] coderanger: ianco: Brain still on fire with other things, haven't touched it lately
[2013-06-26 18:55:52 -0400] ianco: :)
[2013-06-26 18:55:53 -0400] ianco: if theres anything i can help with, by all means
[2013-06-26 18:56:01 -0400] coderanger: Up in Seattle this week training new webdevs :)
[2013-06-26 18:56:58 -0400] c_t: you picked kind of a terrible time to come up here
[2013-06-26 18:57:47 -0400] stormerider: whyso?
[2013-06-26 18:58:33 -0400] pixlpushr: has anyone run into this problem? i'm using the deploy resource to deploy my application code. i have 2 chef environments - prod and dev. how can I have the deploy resource use either my code's prod branch or dev branch using a single cookbook (containing my deploy resource)
[2013-06-26 19:01:45 -0400] d```: pixlpushr: set the revision based on node[chef_environment]
[2013-06-26 19:02:27 -0400] pixlpushr: d```: ha, as soon as i asked my question, i had that idea
[2013-06-26 19:02:31 -0400] cwj: pixlpushr: you could store the revision in a data bag item, one per-environment
[2013-06-26 19:02:49 -0400] cwj: TMTOWTDI
[2013-06-26 19:03:27 -0400] pixlpushr: cwj: ah, that could work too
[2013-06-26 19:04:31 -0400] c_t: stormerider: it's a bit dreary up here right now
[2013-06-26 19:05:19 -0400] |rt|: I have a mini-test question...how do you pass node attributes to a test?  I have to pass a source attribute to the package resource but can't figure out how to write a mini-test that also uses it to verify that a package is installed
[2013-06-26 19:05:37 -0400] stormerider: c_t: i know. it's lovely. :)
[2013-06-26 19:06:01 -0400] btm: @opscode chef code review: join: https://plus.google.com/hangouts/_/a925dde15076f1f1cc5eeb8bfbe28cbb1ebc8e24, watch: http://youtu.be/YYODcab3jGU
[2013-06-26 19:06:17 -0400] Kzim: hi is there an easy way to change the ip of an hostname without destroy toe client and node ?
[2013-06-26 19:06:31 -0400] jessicab: |rt|: ive always had to use the node attributes within the it block, it doesnt work outside of the block.. and i think you also have to be sure to use describe_recipe
[2013-06-26 19:06:37 -0400] poolpog: sweet, i see people talkn finally...
[2013-06-26 19:06:47 -0400] poolpog: howdy. how can I access node information in a role?
[2013-06-26 19:07:04 -0400] poolpog: e.g., in a role file, do "node[:ipaddress]"
[2013-06-26 19:07:21 -0400] poolpog: by "do" I mean "get the value of the ipaddress for the node
[2013-06-26 19:07:40 -0400] c_t: stormerider: I just hope it clears up within a couple of weeks
[2013-06-26 19:07:51 -0400] c_t: I'm planning on going to Goldendale for a star party
[2013-06-26 19:08:08 -0400] stormerider: c_t: i like it dark and overcast. the sun and i are not friends. especially on days like today... day 5 of a migraine.
[2013-06-26 19:09:12 -0400] c_t: stormerider: I'm not a huge fan of the bright sun, but I am a fan of clear night skies
[2013-06-26 19:10:04 -0400] Otterley: I've been to Goldendale.  I think time forgot that place.
[2013-06-26 19:10:45 -0400] c_t: I'm not even going to Goldendale proper
[2013-06-26 19:10:56 -0400] c_t: I'm going to a barren patch of land a ways outside of Goldendale
[2013-06-26 19:11:23 -0400] |rt|: jessicab: https://gist.github.com/3dinfluence/0953f493d297e2359c59
[2013-06-26 19:12:32 -0400] |rt|: I get the same output even if I don't try to pass :source to the package .must_be_installed
[2013-06-26 19:12:45 -0400] |rt|: that was me shooting from the hip
[2013-06-26 19:13:15 -0400] jessicab: |rt|: do you have the requires and includes at the top?
[2013-06-26 19:13:26 -0400] |rt|: I actually need to pass the attribute to the resource so that the test will function properly
[2013-06-26 19:14:04 -0400] |rt|: jessicab: top of the test code?
[2013-06-26 19:14:29 -0400] jessicab: |rt|: pmed it to you
[2013-06-26 19:15:04 -0400] |rt|: thanks
[2013-06-26 19:19:06 -0400] heathsnow: knife winrm broken?  getting "# nodes found, but does not have the required attribute (fqdn) to establish the connection." when just doing: knife winrm 'chef_environment:devops' 'ipconfig' -x USERNAME -P PASSWORD
[2013-06-26 19:19:34 -0400] heathsnow: a workaround would be nice too :P
[2013-06-26 19:20:08 -0400] d```: is there a way to rename the "current" directory when using the application cookbook without modifying the cookbook itself?
[2013-06-26 19:20:12 -0400] MrBIOS: hi folks
[2013-06-26 19:20:26 -0400] MrBIOS: I'm trying to do something like "knife ssh -a 'node['network']['ipaddress_eth1']' 'role:web' uptime"
[2013-06-26 19:20:31 -0400] MrBIOS: to no avail
[2013-06-26 19:20:45 -0400] freerobby: Is there a best practice for creating ubuntu upstarts with Chef?
[2013-06-26 19:21:18 -0400] timsmith: attributes are called like this network_ipaddress_eth1
[2013-06-26 19:21:32 -0400] d```: MrBIOS, are you trying to show the ip address and uptime of all your nodes with role:web?
[2013-06-26 19:22:02 -0400] MrBIOS: yeah, but the IP address field in chef has its public IP, not private, which is what I need to SSH to.
[2013-06-26 19:22:55 -0400] d```: MrBIOS: I think timsmith's suggestion should work
[2013-06-26 19:23:11 -0400] MrBIOS: @timsmith perfect, thanks
[2013-06-26 19:24:29 -0400] MrBIOS: hm, now it says "FATAL: 1 node found, but does not have the required attribute to establish the connection"
[2013-06-26 19:24:47 -0400] MrBIOS: but the attribute is very much there when I examine it
[2013-06-26 19:25:26 -0400] timsmith: not sure about that one
[2013-06-26 19:29:54 -0400] poolpog: :(
[2013-06-26 19:30:17 -0400] Otterley: freerobby, I'd suggest runit over upstart
[2013-06-26 19:40:40 -0400] maplebed: best practices question. I have several servers, each of which may run one (or more) of several services.  On a given node, I want a list of which services are running. I initially thought of creating a node attribute that is an array, with each recipe that starts a given service adding that service to the array. However, working with array attributes in chef can be strange (what with precedence and merges). Should I use an array or a hash (and only
[2013-06-26 19:45:50 -0400] Otterley: I would use a hash
[2013-06-26 19:45:59 -0400] Otterley: service name = key, value = true/false
[2013-06-26 19:46:13 -0400] maplebed: http://omniti.com/seeds/seeds-our-experiences-with-chef-cookbook-and-attribute-design and https://coderanger.net/2013/06/arrays-and-chef/ both seem to agree with you.
[2013-06-26 19:46:52 -0400] maplebed: (though the first recommends using an empty hash as the value instead of true/false, so that you can later add an :enabled key or other attribute keys.)
[2013-06-26 19:47:01 -0400] Otterley: I'm always thrilled when Theo agrees with me ;)
[2013-06-26 19:47:33 -0400] Otterley: err, never mind, that's not Theo
[2013-06-26 20:00:15 -0400] thasmo: Does anyone know if this is fixed already or when it will be? Seems like it's not possible to use Omnibus installer with Ubuntu Raring 32 bit. http://tickets.opscode.com/browse/CHEF-4142
[2013-06-26 20:03:45 -0400] btm: @opscode cookbook code review: join: https://plus.google.com/hangouts/_/532d11bb33634315fd86b6054a73fa8b9a6ce8da watch: http://youtu.be/Tlp6kXR4Ap4
[2013-06-26 20:16:59 -0400] tscanausa: is there a defined procedure to reporting bugs for cookbooks?
[2013-06-26 20:17:46 -0400] Death_Syn: if it's opscode, report it in their jira, if it is someone else's cookbook, usually opening an issue on their github works
[2013-06-26 20:18:49 -0400] tscanausa: ok thanks Death_Syn
[2013-06-26 20:19:56 -0400] gad0lin: sth, was change in the chef now? I have gem_package "god" and now binary is not in /usr/bin/god  but in /opt/chef/embedded/bin, so the GEM_PATH, or bin directory is not the system now?
[2013-06-26 20:21:11 -0400] gad0lin: so do I have to specify gem_binary pointing to system one everywhere !?
[2013-06-26 20:22:50 -0400] CoilDomain: just started out with chef, i updated the recipes from rackspace's openstack to the latest one, but even though keystone shows up, i seem to be getting "could not find recipe server for cookbook keystone"
[2013-06-26 20:23:03 -0400] CoilDomain: am i missing something or perhaps theres a bug in the recipes?
[2013-06-26 20:23:12 -0400] gad0lin: I saw http://tickets.opscode.com/browse/CHEF-3581, that talks little bit about that, or maybe now I should assume that all bin things installed through gem_package will live in /opt/chef/embedded/bin ?
[2013-06-26 20:23:58 -0400] gad0lin: CoilDomain: did you upload the cookbook to chef server with knife cookbook upload keystone?
[2013-06-26 20:24:10 -0400] CoilDomain: yup, its listed on my hosted chef
[2013-06-26 20:24:22 -0400] gad0lin: CoilDomain: check output of knife cookbook list
[2013-06-26 20:24:50 -0400] CoilDomain: keystone               1.0.20
[2013-06-26 20:24:55 -0400] gad0lin: CoilDomain: ah, you are missing keystone/recipes/server.rb which must have been remove recently
[2013-06-26 20:25:02 -0400] CoilDomain: aah
[2013-06-26 20:25:20 -0400] CoilDomain: the master branch had worked previously, guess v4 isnt fully finished
[2013-06-26 20:26:25 -0400] CoilDomain: lemme compare them and see
[2013-06-26 20:26:39 -0400] gad0lin: CoilDomain: probably they are changing it, so maybe you need to check if server recipe is still needed
[2013-06-26 20:29:27 -0400] CoilDomain: thanks! looks like it is missing in the v4 branch
[2013-06-26 20:37:08 -0400] stormerider: jtimberman: updated the PR with the cleaner syntax, thanks.
[2013-06-26 20:40:09 -0400] zhirafovod: Hello everybody, how can I propose a change to chef11 workstation installation script to support Debian wheezy/sid distro? One line addition to https://www.opscode.com/chef/install.sh. Is it somewhere on github?
[2013-06-26 20:43:52 -0400] idlemichael: has anyone used the "application" cookbook? How do you control the :deploy, :restart, and other actions?
[2013-06-26 20:44:23 -0400] idlemichael: asdf
[2013-06-26 20:45:51 -0400] Kzim: hi is there an easy way to change the ip of an node without destroy the client and node ?
[2013-06-26 20:46:28 -0400] Otterley: kzim, log in and change it.
[2013-06-26 20:52:51 -0400] Kzim: Otterley, log in ? i mean on the chef node list. so i don't have to delete them fron the node list and re-add
[2013-06-26 20:53:27 -0400] Otterley: I don't understand.  The IP address comes from Ohai; it's an automatic attribute and cannot be overwritten.
[2013-06-26 20:53:36 -0400] Otterley: The node itself is authoritative.
[2013-06-26 20:53:56 -0400] Otterley: If you're trying to re-IP the node, you'll have to do it outside of Chef.
[2013-06-26 20:53:59 -0400] Kzim: Otterley, oh ! you mean i don't have anything to change
[2013-06-26 20:54:11 -0400] Kzim: on the chef side
[2013-06-26 20:54:30 -0400] Kzim: thanks a lot
[2013-06-26 20:54:32 -0400] Otterley: sure
[2013-06-26 21:02:09 -0400] jtimberman: stormerider: what ticket # was that
[2013-06-26 21:02:28 -0400] stormerider: jtimberman: COOK-3140
[2013-06-26 21:02:39 -0400] Otterley: are we doing a Hangout today?
[2013-06-26 21:02:59 -0400] jtimberman: stormerider: thanks!
[2013-06-26 21:05:22 -0400] rkesters: I am trying to change the port that the chef webui is using. I made changes to /etc/chef-server/chef-server.rb to include chef_server_webui = { "port" => 80}. and ran reconfigure but unicorn is still on 9462, any thoughts?
[2013-06-26 21:06:20 -0400] stormerider: jtimberman: anytime :) i have another one coming in the next few days as well, to allow for filtering when you're specifying multiple environments (so you can say like search for all nodes but "NOT chef_environment:_default", etc.)
[2013-06-26 21:08:44 -0400] Otterley: rkesters: unicorn?  are you running Chef 10 server?
[2013-06-26 21:09:22 -0400] rkesters: no Chef 11... thought it said unicorn beofre
[2013-06-26 21:10:04 -0400] rkesters: I just changed teh chef-server.rb to chef_server_webui["port"] = 80 and I saw changes
[2013-06-26 21:10:16 -0400] Otterley: Oh, maybe the Web UI uses Unicorn behind the nginx proxy
[2013-06-26 21:10:29 -0400] rkesters: but still not accessible on port 80
[2013-06-26 21:10:34 -0400] Otterley: anyway, it's all fronted by nginx.
[2013-06-26 21:10:55 -0400] Otterley: I'm not super familiar with webui configuration so I'll leave that to others :)
[2013-06-26 21:11:23 -0400] rkesters: Otterley: does ngnix normally come up on port 80
[2013-06-26 21:11:44 -0400] Otterley: 80 + 443
[2013-06-26 21:12:48 -0400] rkesters: I see anythung bound to port 80 or port 443,
[2013-06-26 21:12:58 -0400] Otterley: did you do a chef-server-ctl reconfigure?
[2013-06-26 21:13:03 -0400] koaps: rkesters: that syntax is wrong for chef11
[2013-06-26 21:13:13 -0400] rkesters: yes
[2013-06-26 21:13:25 -0400] Otterley: rkesters: http://docs.opscode.com/config_rb_chef_server.html
[2013-06-26 21:13:35 -0400] rkesters: I removed the line for the webui,
[2013-06-26 21:14:04 -0400] koaps: you want chef11 webui on port 80?
[2013-06-26 21:14:43 -0400] rkesters: how do I get ngix to start on port 80, it appears to be configured to proxy the webui to port 9462
[2013-06-26 21:15:02 -0400] koaps: you have to enable non_ssl
[2013-06-26 21:15:09 -0400] rkesters: but nginx is not bound to anythign in netstat
[2013-06-26 21:15:33 -0400] koaps: this is what I use
[2013-06-26 21:15:34 -0400] koaps: v
[2013-06-26 21:15:36 -0400] koaps: nginx['enable_non_ssl'] = true
[2013-06-26 21:15:36 -0400] koaps: nginx['non_ssl_port'] = 8080
[2013-06-26 21:15:36 -0400] koaps: nginx['ssl_port'] = 4433
[2013-06-26 21:16:04 -0400] koaps: in the chef-server.rb
[2013-06-26 21:16:13 -0400] rkesters: okay I will try that.. thanks
[2013-06-26 21:17:29 -0400] koaps: if you want 80, you really don't need the last two, just the nginx['enable_non_ssl'] = true
[2013-06-26 21:18:50 -0400] VirtualNorman: question: I have been studying the override hierarchy, but I can't manage to override the mysql version: On RHEL 6 I want to install mysql55 from ius, but having difficulty overriding the cookbook. In my server role, I've tried default_attributes(), override_attributes(), and now default["mysql"]["client"]["packages"] = ["mysql55"]. But after I sudo chef-client, when I look at https://manage.opscode.com/nodes/my-node, I 
[2013-06-26 21:18:50 -0400] VirtualNorman: mysql55 has been added after "mysql" and "mysql-devel", rather than replacing. What is my conceptual error?
[2013-06-26 21:20:33 -0400] rkesters: koaps, make the changes but netstat does not show anything up on those ports
[2013-06-26 21:22:12 -0400] rkesters: nginx is running (accroding to ps) but not listed as bound in netstat
[2013-06-26 21:23:09 -0400] stormerider: rkesters: did you do a reconfigure?
[2013-06-26 21:24:36 -0400] rkesters: I did reconfigure
[2013-06-26 21:26:01 -0400] rkesters: for some reason, nginx service had been started.... guess that makes me the noob of the day
[2013-06-26 21:26:50 -0400] rkesters: not nginx won't stay up now.... looking at logs now
[2013-06-26 21:28:16 -0400] adnichols: rkesters did you make these changes in /opt/chef or by overriding values in /etc/chef/chef-server.rb ?
[2013-06-26 21:28:28 -0400] adnichols: also - do you possibly have another service already binding to port 80 still?
[2013-06-26 21:30:54 -0400] rkesters: adnichols: made changes in /etc/chef/chef-server.rb.... now it appears that the nginx recipe is not picking up the node['fqdn']  value for server_name
[2013-06-26 21:30:55 -0400] adnichols: sorry, it's /etc/chef-server/chef-server.rb
[2013-06-26 21:31:19 -0400] rkesters: that is where i did it
[2013-06-26 21:31:28 -0400] adnichols: ok
[2013-06-26 21:32:28 -0400] adnichols: does hostname -f return the fqdn?
[2013-06-26 21:32:36 -0400] rkesters: yes
[2013-06-26 21:32:49 -0400] rkesters: ohai fqdn does as well
[2013-06-26 21:33:14 -0400] adnichols: what makes you think it's not being picked up then? messed up looking config?
[2013-06-26 21:34:24 -0400] Eiam: Not exactlys ure what just happened to my configuration, but I just tried to bring my VM back up and I'm getting failures with windows_architecture_helper.rb, "uninitialized constnat chef::mixin:powershellout
[2013-06-26 21:34:26 -0400] rkesters: I checked the nginx log file and it complained about the value, I just set the ngix['server_name'] value in chef-server.rb and all is working.
[2013-06-26 21:34:39 -0400] Eiam: apparently the "git" cookbook requires Windows which requires Powershell. no idea why as I'm on ubuntu
[2013-06-26 21:34:56 -0400] rkesters: looks fixed now... thanks to all
[2013-06-26 21:35:13 -0400] adnichols: rkesters I'd be uncomfortable with that but ymmv - can't argue w/ it working
[2013-06-26 21:35:21 -0400] jtimberman: Eiam: because Chef dependencies don't have platform specific handling.
[2013-06-26 21:35:23 -0400] jtimberman: Its all or nothing.
[2013-06-26 21:35:35 -0400] Eiam: okay, well when I brought the VM up last night, it provisioned no problem
[2013-06-26 21:35:39 -0400] jtimberman: also, 'chef-client' has all kinds of platform specific stuff you're not using either :)
[2013-06-26 21:35:40 -0400] Eiam: today suddenly it fails to provision with this
[2013-06-26 21:36:00 -0400] rkesters: All , is there any way to intergrate the open source chef with ldap
[2013-06-26 21:36:54 -0400] rkesters: I would like chef to auth users via my ldap, any thoughts?
[2013-06-26 21:37:21 -0400] Eiam: so what happened?
[2013-06-26 21:39:26 -0400] adnichols: rkesters I'm not aware of a solution for that - users would still have to get a pem generated to use knife
[2013-06-26 21:39:46 -0400] kisoku: which part of chef do you want to auth users via ldap ?
[2013-06-26 21:39:52 -0400] kisoku: specifically ?
[2013-06-26 21:40:48 -0400] rkesters: I would like the users to be able to use knife. My understanding is that the user could login via the webui, switch would gen the key pair
[2013-06-26 21:45:19 -0400] Eiam: windows 1.10.0 broke it
[2013-06-26 21:45:24 -0400] Eiam: rolling back to 1.9 and it works
[2013-06-26 21:49:50 -0400] adnichols: rkesters I'm gonna go with "no" based on CHEF-541
[2013-06-26 21:49:50 -0400] adnichols: not sure if others have made bits of it work
[2013-06-26 21:57:33 -0400] BrianJ: How do the resource names get built? for instance in the windows cookbook there's a zipfile.rb, and then to use it you use windows_zipfile. How does the namespacing work?
[2013-06-26 21:58:01 -0400] BrianJ: do i just need to have a zipfile.rb in my resources/ and cookbookname_zipfile.rb will work?
[2013-06-26 22:01:09 -0400] ddyke: Hello, I am running into an issue with Hosted Chef; I reset my SSH keys from the OC site, but when trying to view the knife node list I am receiving "Invalid Signature" for the user
[2013-06-26 22:01:21 -0400] ddyke: Is there a delay with the OC hosted chef for the updated signatures? Am I missing a step
[2013-06-26 22:03:43 -0400] jessicab: BrianJ: yea, thats exactly how it works.. if the windows cookbook had a resources/default.rb and provider/default.rb you could refer to it as just "windows" too
[2013-06-26 22:04:16 -0400] BrianJ: thanks jessicab
[2013-06-26 22:06:01 -0400] ddyke: exit
[2013-06-26 22:06:01 -0400] ddyke: end
[2013-06-26 22:09:36 -0400] BrianJ: one more question. What is the correlation between providers and resources regarding naming
[2013-06-26 22:09:40 -0400] BrianJ: do they need to be the same?
[2013-06-26 22:14:07 -0400] Otterley: BrianJ, yes
[2013-06-26 22:21:05 -0400] superbenk: Running chef-client via cron doesn't seem to have any concept of PID-locking or the ability to determine if there is another instance of chef-client already running.  Am I missing something?  Is there a way to keep a 2nd instance of chef-client from running if there's already a run in progress?
[2013-06-26 22:21:37 -0400] Otterley: well, you can wrap it in flock yourself, but that's advisory locking only.  I thought Chef client was supposed to lock a file itself.
[2013-06-26 22:22:33 -0400] superbenk: Otterley: I'm a bit surprised it's not setting a lock (or respecting it) myself
[2013-06-26 22:23:30 -0400] Otterley: lib/chef/run_lib.rb suggests it's locking config[:file_cache_path]}/chef-client-running.pid
[2013-06-26 22:23:42 -0400] superbenk: But we're seeing issues where a Chef server is getting overwhelmed & chef-client runs are slowing WAAY down (yes, this is a Chef server issue we need to fix) & because of that our 30 minute cron frequency causes multiple chef-clients to stack up and make the problem worse.
[2013-06-26 22:25:16 -0400] Otterley: try flocking it yourself in one window and running chef-client manually in another
[2013-06-26 22:25:54 -0400] Otterley: it would be nice if you could tell Chef not to block on the lock and die instead if the lock is taken
[2013-06-26 22:27:04 -0400] superbenk: chef-client has the '-P' option for setting a PID file.  It also says it defaults to /tmp/chef-client.pid
[2013-06-26 22:27:49 -0400] Otterley: that does not apply to the lock file
[2013-06-26 22:28:19 -0400] Otterley: the fact that the lock file name ends in '.pid' is misleading.  it's really a lock file.
[2013-06-26 22:29:25 -0400] superbenk: Well, I'm not seeing that file nor am I seeing a chef-client-running.pid file being set
[2013-06-26 22:29:42 -0400] Otterley: which client are you running?
[2013-06-26 22:29:57 -0400] superbenk: 10.20.0
[2013-06-26 22:30:13 -0400] Otterley: ah.  upgrade.
[2013-06-26 22:30:24 -0400] superbenk: Hah.  I knew that was coming.
[2013-06-26 22:31:16 -0400] Otterley: I think it's a rule of thumb that you always check the latest version to see whether your issue is fixed before you complain that something is broken :)
[2013-06-26 22:31:47 -0400] superbenk: I suppose I can't argue with that.
[2013-06-26 22:32:13 -0400] stormerider: well you can, but wont do much good ;)
[2013-06-26 22:33:45 -0400] superbenk: Ya, I've been on the giving end of that argument too.  Thing is, I can't really just upgrade right this minute so I'm looking to get advice on what I have now.  But I haven't checked to see if it's been fixed (or was even a bug).
[2013-06-26 22:34:08 -0400] superbenk: Seems the '-P' flag doesn't really do anything, though.
[2013-06-26 22:34:55 -0400] superbenk: Or maybe it only works in daemon mode
[2013-06-26 22:35:41 -0400] stormerider: istr hearing about that problem pre-10.24
[2013-06-26 22:36:08 -0400] stormerider: check the ticketing system for pid locking and see what turns up, but im pretty sure the answer is going to be upgrade.
[2013-06-26 22:36:28 -0400] stormerider: or switch to daemon mode
[2013-06-26 22:36:32 -0400] superbenk: Fair enough.  Thanks
[2013-06-26 22:41:27 -0400] Otterley: anyone know why why_run mode doesn't work in Chef 11 if the output is piped to another command?
[2013-06-26 22:41:35 -0400] Otterley: I'm looking for a ticket re: the issue but can't find one
[2013-06-26 22:41:48 -0400] stormerider: works for me
[2013-06-26 22:42:01 -0400] stormerider: i have it in /etc/aliases
[2013-06-26 22:42:10 -0400] Otterley: really?  Chef 11.4.4?
[2013-06-26 22:42:21 -0400] Otterley: I've seen it work before but it seems as though there was a regression
[2013-06-26 22:42:44 -0400] stormerider: er /etc/profile.d, rather
[2013-06-26 22:43:00 -0400] stormerider: alias chef-dryrun="sudo chef-client -F min -W 2>&1 | egrep -v '(INFO|WARN|lwrp_base.rb)'"
[2013-06-26 22:43:14 -0400] Otterley: and you're running 11.4.4?
[2013-06-26 22:43:17 -0400] stormerider: yeah
[2013-06-26 22:43:38 -0400] Otterley: odd.  if I pipe it to anything, I see output but no diffs
[2013-06-26 22:43:48 -0400] stormerider: i think the 2>&1 was important, actually. istr vaguely that there was no output if i didnt have that in there.
[2013-06-26 22:44:19 -0400] stormerider: or missing some output. something like that.
[2013-06-26 22:44:42 -0400] Otterley: tried that, no love
[2013-06-26 22:44:50 -0400] Otterley: I only see the diffs if I run it without the pipe.
[2013-06-26 22:44:59 -0400] Otterley: even piping to cat, you can see it
[2013-06-26 22:45:16 -0400] Otterley: oh, which formatter are you using in /etc/chef/client.rb?
[2013-06-26 22:45:47 -0400] Otterley: err, never mind.  which log_level?
[2013-06-26 22:46:51 -0400] stormerider: info
[2013-06-26 22:47:10 -0400] a13x2121: are there any guides to upgrading chef?
[2013-06-26 22:47:13 -0400] stormerider: https://gist.github.com/stormerider/5872430
[2013-06-26 22:49:59 -0400] Otterley: stormerider, what happens if you pipe it to cat?
[2013-06-26 22:50:03 -0400] stormerider: a13x2121: from 10 -> 11?
[2013-06-26 22:51:02 -0400] stormerider: Otterley: i see the same kind of stuff, with all the info and warn lines back.
[2013-06-26 22:51:10 -0400] Otterley: odd.
[2013-06-26 22:51:15 -0400] Otterley: so puzzling.
[2013-06-26 22:52:01 -0400] a13x2121: 11.04 to 11.08
[2013-06-26 22:53:29 -0400] Otterley: stormerider, I'm guessing there's some environmental factor that's at the root of this
[2013-06-26 22:53:48 -0400] stormerider: i think it was a pretty straightforward dpkg upgrade, a13x2121, from what i remember
[2013-06-26 22:54:04 -0400] stormerider: Otterley: likely :-/ what shell you using?
[2013-06-26 22:55:07 -0400] Otterley: wtfsh
[2013-06-26 22:55:36 -0400] stormerider: try bash?
[2013-06-26 22:55:45 -0400] Otterley: it is bash.  I'm kidding
[2013-06-26 22:56:00 -0400] stormerider: heh, sorry, migraines make me literal
[2013-06-26 22:56:08 -0400] stormerider: yeah, sorry, i got nothin' else
[2013-06-26 22:57:02 -0400] josephholsten: anyone working on getting chef working in ruby 2.0? Im noticing there's an issue with changes in rubygems/format
[2013-06-26 22:57:55 -0400] stormerider: i imagine they'll stick with 1.9.3 for a while given the omnibus installers.
[2013-06-26 23:15:12 -0400] josephholsten: I've heard that 2.0 is much faster on windows, seems like we'd want that soonish
[2013-06-26 23:17:37 -0400] Otterley: josephholsten, it's doubtful that the Ruby version will make a significant amount of difference to your Chef runs.
[2013-06-26 23:18:45 -0400] Otterley: with the exception of the new Net::HTTP client, which has the potential to make client-server communication much faster as it supports persistent HTTP connections.  but chef-client will need code changes to make that work.
[2013-06-26 23:18:57 -0400] josephholsten: Otterley: on windows, the difference between 1.8.7 and 1.9.4 was surprisingly large
[2013-06-26 23:20:12 -0400] josephholsten: on unix, you're absolutely right
[2013-06-26 23:43:45 -0400] Schuyler: how do I debug a "Bad Gateway" error in chef-client?
[2013-06-26 23:44:23 -0400] Schuyler: chef-client reports "Server returned error for http://chef-server.domain/nodes/my-node"
[2013-06-26 23:44:29 -0400] Schuyler: but it doesn't say what the error is
[2013-06-26 23:44:45 -0400] Schuyler: a cursory glance in /var/log/chef-server/* on the chef server is unenlightening
[2013-06-26 23:44:57 -0400] Schuyler: I mean, seriously, how do I even go about finding what the error even _is_?
[2013-06-26 23:45:09 -0400] Otterley: are you running your own Chef server?
[2013-06-26 23:45:12 -0400] Schuyler: yes.
[2013-06-26 23:45:21 -0400] Schuyler: and it's been running fine until today.
[2013-06-26 23:45:22 -0400] Otterley: if so, you either need to use https, or reconfigure your server to allow HTTP.
[2013-06-26 23:45:29 -0400] Schuyler: ahem
[2013-06-26 23:45:30 -0400] Schuyler: sorry
[2013-06-26 23:45:37 -0400] Schuyler: "https://chef-server.domain/nodes/my-node"
[2013-06-26 23:45:50 -0400] Schuyler: it is using HTTPS
[2013-06-26 23:45:53 -0400] Otterley: ok, then that suggests that nginx isn't talking to erchef
[2013-06-26 23:46:05 -0400] Schuyler: erchef is definitely dumping stuff to a log file quite actively
[2013-06-26 23:46:15 -0400] Otterley: anything in the nginx error log?
[2013-06-26 23:46:16 -0400] Schuyler: but the contents of the log are... not very lucid
[2013-06-26 23:46:35 -0400] Otterley: yeah, erchef has quite possibly the world's suckiest logging
[2013-06-26 23:47:06 -0400] Schuyler: "connect() failed (111: Connection refused) while connecting to upstream"
[2013-06-26 23:47:12 -0400] Schuyler: the upstream is 127.0.0.1:8000
[2013-06-26 23:47:28 -0400] Otterley: I think that's erchef's port IIRC
[2013-06-26 23:47:44 -0400] Schuyler: as in "http://127.0.0.1:8000//nodes/kraken" (for example)
[2013-06-26 23:47:46 -0400] sfalcon: Schuyler: does chef-server-ctl status report erchef running?
[2013-06-26 23:47:52 -0400] Schuyler: I do have a node called kraken, fwiw.
[2013-06-26 23:48:17 -0400] Schuyler: sfalcon: yes, but it says bookshelf is down
[2013-06-26 23:48:28 -0400] Schuyler: (I didn't think to try chef-server-ctl status)
[2013-06-26 23:48:38 -0400] Schuyler: is that likely to be the issue?
[2013-06-26 23:49:10 -0400] Schuyler: uh, rabbitmq seems to be crashing and restarting repeatedly
[2013-06-26 23:49:13 -0400] sfalcon: Schuyler: that is likely to be _an_ issue, yes. bookshelf handles cookbook content. So without bookshelf you won't be able to upload or download cookbooks.
[2013-06-26 23:49:54 -0400] sfalcon: On the server try: curl -s 'http://localhost:8000/_status'
[2013-06-26 23:49:58 -0400] Schuyler: whoa
[2013-06-26 23:50:08 -0400] sfalcon: Unhappy rabbit would explain unhappy erchef
[2013-06-26 23:50:12 -0400] Schuyler: "2013-06-26_23:49:45.83687 /opt/chef-server/embedded/bin/rabbitmq-server: 73: /opt/chef-server/embedded/bin/rabbitmq-server: cannot create /var/lib/rabbitmq/mnesia/rabbit@chef-server.pid: Permission denied"
[2013-06-26 23:50:42 -0400] Schuyler: that seems to be what's killing rabbitmq
[2013-06-26 23:50:45 -0400] sfalcon: Otterley: specific suggestions for improving erchef logs welcome. It's something that will improve in a next version.
[2013-06-26 23:51:11 -0400] Otterley: sfalcon, we've been in touch with you about it, specifically around the resolver locking up
[2013-06-26 23:51:12 -0400] sfalcon: For now, a small bit of investment will pay off in terms of learning what's there. Usually a fair bit of detail once you sort out which file(s) to look at.
[2013-06-26 23:51:47 -0400] sfalcon: Ah, indeed.
[2013-06-26 23:53:25 -0400] sfalcon: Otterley: were you able to obtain a nightly to see if that helped?
[2013-06-26 23:53:38 -0400] Otterley: sfalcon, there's also the issue of the name of the current log file it writes to changing, rather than writing to a file with a constant name and rotating out the older ones, like every other program on the planet does
[2013-06-26 23:54:03 -0400] Schuyler: so, and this is weird: /var/lib/rabbitmq/mnesia is owned by the `rabbitmq` user but the rabbitmq-server seems to be getting run by the `chef_server` user
[2013-06-26 23:54:04 -0400] Otterley: (sorry if I sound snippy)
[2013-06-26 23:54:13 -0400] Schuyler: which user _should_ be running the rabbitmq server?
[2013-06-26 23:54:16 -0400] sfalcon: Otterley yeah, an "interesting" feature of Erlang's built in stuff.
[2013-06-26 23:55:04 -0400] Schuyler: so, is it ill-advised to manage your Chef server with Chef itself?
[2013-06-26 23:55:10 -0400] Schuyler: because that seems to be what got me into this mess.
[2013-06-26 23:55:24 -0400] Otterley: sfalcon, unfortunately we haven't had the resources to look at this closer because we're in high gear getting everything up, so we've removed almost all our cookbook metadata.rb constraints and are version-locking in environments instead.
[2013-06-26 23:55:50 -0400] Otterley: sfalcon, also, you kind of made it less than convenient to turn on debug logging :(
[2013-06-26 23:56:31 -0400] sfalcon: Otterley: the version locking is in a larger sense, the right fix.
[2013-06-26 23:57:06 -0400] sfalcon: Point taken on debug logging.
[2013-06-26 23:57:20 -0400] Otterley: it is, but ultimately for testing we probably need to put the version constraints back into our cookbooks so I assume we'll run into this problem again
[2013-06-26 23:57:39 -0400] Otterley: sfalcon, are you not having the same issue with Hosted Chef?  I'm surprised you aren't suffering from this problem yourselves.
[2013-06-26 23:58:11 -0400] sfalcon: I suspect must less of an issue once environment version locking (equality constraints) are in place.
[2013-06-26 23:58:21 -0400] llakey: `package "mongo-10gen"` results in error: FATAL: Chef::Exceptions::Exec: package[mongo-10gen] (mongo-server::default line 23) had an error: Chef::Exceptions::Exec:  returned 1, expected 0
[2013-06-26 23:58:36 -0400] llakey: how can i find out why this is failing? installing the package manually works fine
[2013-06-26 23:59:03 -0400] Otterley: llakey, run with -l debug
[2013-06-26 23:59:18 -0400] sfalcon: Otterley: A patched version is now live across OHC.
[2013-06-26 23:59:22 -0400] llakey: is there a way to do that when running this with Vagrant?
[2013-06-26 23:59:26 -0400] Otterley: sfalcon, how's it been since?

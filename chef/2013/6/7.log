[2013-06-07 00:14:44 -0400] gzc: anyone else using the chef_server cookbook? I'm hoping there's a way to use it that's idempotent... but for now, it's downloading the omnibus install every single run
[2013-06-07 00:16:55 -0400] scalp42: I'm trying to write specs for a cookbook using chefspec, but it keeps blowing up on setting node attributes https://gist.github.com/scalp42/5726162, if anyone has any idea
[2013-06-07 00:18:07 -0400] Otterley: is it possible to specify a cookbook version in a run-list override at the chef-client commandline?
[2013-06-07 00:18:21 -0400] Otterley: this doesn't work:  "-o foo@1.2.3::bar"
[2013-06-07 00:21:22 -0400] Otterley: ah, I had it backwards - should be "-o foo::bar@1.2.3"
[2013-06-07 00:43:36 -0400] stormerider: gzc: i had been, but i didnt see any need to after chef 11
[2013-06-07 00:43:37 -0400] AlainODea: Is there a way to use environments with roles without env_run_lists?
[2013-06-07 00:44:02 -0400] stormerider: i think for omnibus it's mainly for use in bootstrapping, not post-install maintenance. i might be wrong about that, though.
[2013-06-07 01:30:35 -0400] AlainODea: I found a Ruby way to answer my question and posted it at http://community.opscode.com/questions/393
[2013-06-07 01:35:14 -0400] Rich__: hi all, i have a question about jenkins and/or chef... where does one stop and the other take over?
[2013-06-07 01:35:33 -0400] Rich__: looking for some advice for a newbie :)
[2013-06-07 01:35:44 -0400] joonas: they are two different things
[2013-06-07 01:35:48 -0400] joonas: very different
[2013-06-07 01:37:18 -0400] AlainODea: Rich__: in one possible implementation jenkins builds your software and publishes artifacts and Chef recipes deploy those artifacts to servers to run
[2013-06-07 01:38:46 -0400] Rich__: AlainODea: thanks.our developers have gotten started with jenkins and it sounds very robust.. so on the infrastructure side we're considering well, do we pursue chef? do we look at jenkins more?
[2013-06-07 01:39:06 -0400] Rich__: joonas: two very different things, can you expand?
[2013-06-07 01:39:33 -0400] joonas: Rich__: you need both
[2013-06-07 01:39:38 -0400] joonas: they are not mutually exclusive
[2013-06-07 01:39:39 -0400] stormerider: Rich__: from what ive seen, chef manages the architecture, jenkins manages tests and app deployment
[2013-06-07 01:40:35 -0400] AlainODea: Rich__: you pursue both I think.  We use TeamCity to build our product and Chef to bring up servers with the necessary packages/middleware and deploy our software on top.
[2013-06-07 01:41:55 -0400] Rich__: stormerider: thanks, that's what we were thinking but weren't sure if it was better/required to use both. we're still in the infancy of our planning/thoughts :)
[2013-06-07 01:42:08 -0400] Rich__: AlainODea: TeamCity, thanks for the recommendation. I'll check it out.
[2013-06-07 01:42:09 -0400] joonas: Rich__: it's recommended you use both
[2013-06-07 01:42:21 -0400] joonas: Rich__: jenkins allows you to do continuous integration
[2013-06-07 01:42:27 -0400] joonas: Rich__: chef allows you to do configuration management
[2013-06-07 01:42:39 -0400] joonas: you could test your chef cookbooks with jenkins
[2013-06-07 01:44:10 -0400] stormerider: or with bamboo, or travis, or any other CI system, really.
[2013-06-07 01:44:11 -0400] Rich__: joonas: ah.. ok, that sounds exactly like exactly what we're looking for.  we're an organization that has apple/android/windows/web applications... in addition to an existing organization infrastructure (read slow moving)
[2013-06-07 01:44:21 -0400] stormerider: jenkins just tends to be common in that space.
[2013-06-07 01:44:32 -0400] AlainODea: Rich__: TeamCity is very easy to set up and is flexible to configure.  It gets costly ($1000/yr server + $150/yr per build agent licensing) so it may be worth the investment in Jenkins to be without scaling license costs.
[2013-06-07 01:45:26 -0400] Rich__: AlainODea: thanks for the cost comparison. right now we've got a couple folks who are excited about jenkins but we'll definitely put teamcity on the radar. but cost could be an issue
[2013-06-07 01:46:42 -0400] AlainODea: Rich__: excited people generally do magical things. I'd somehow slip TeamCity in in such a way that investigating it is their idea ;)
[2013-06-07 01:46:54 -0400] Rich__: we're very similar to Parts Unlimited in the Phoenix Project ;-)
[2013-06-07 01:50:49 -0400] Rich__: cool, thanks for the feedback joonas, AlainODea, stormerider.  ttyl
[2013-06-07 01:51:13 -0400] joonas: richoiddd: yeah, you definitely need CI :)
[2013-06-07 01:51:20 -0400] joonas: err, the other Rich
[2013-06-07 02:27:17 -0400] AlainODea: I am bringing up a node in EC2 and Chef Server shows it as being in environment "dev", but when I run "node.chef_environment" in chef-shell it shows "_default
[2013-06-07 02:27:56 -0400] AlainODea: It is causing my recipes to fail with no metdho [] for NilClass
[2013-06-07 02:36:57 -0400] gzc: anyone know if there's an easy way to query which packages are installed in a vaguely-abstract way? as in I don't want to use a package resource if it's already installed- but there's some wrapping going on that I need to specifically short-circuit, so I can't rely on the resource to do it
[2013-06-07 02:50:40 -0400] stormerider: hm. im trying to use the nagios cookbook to set the hostname of the nagios hosts to ec2.public_hostname instead of the general hostname field
[2013-06-07 02:50:42 -0400] AlainODea: gzc: I don't know of any generic solution, but most recipes put telltale attributes on the node so they might work
[2013-06-07 02:51:07 -0400] stormerider: but both ec2.public_hostname and ec2_public_hostname seem to be giving me back null hostnames
[2013-06-07 02:52:16 -0400] AlainODea: stormerider: as in you'd like the public DNS hostname?
[2013-06-07 02:52:24 -0400] gzc: AlainODea: yeah, I think I'll just patch it to set an attr and use that
[2013-06-07 02:52:42 -0400] gzc: feels inelegant but whatevs, that's Software
[2013-06-07 02:52:45 -0400] AlainODea: gzc: is the instance in a VPC?
[2013-06-07 02:52:50 -0400] gzc: not yet!
[2013-06-07 02:52:56 -0400] stormerider: looking at the erb, it's doing n[node['nagios']['host_name_attribute']], so im guessing it's because the ec2.public_hostname isnt in the top level of attributes accessible via n[]?
[2013-06-07 02:53:00 -0400] stormerider: AlainODea: correct
[2013-06-07 02:54:02 -0400] AlainODea: stormerider: sorry. I'm on an empty tank here. TIme for sleep or coffee.  VPC hosts don't appear to get the public DNS name in their Chef attributes
[2013-06-07 02:54:27 -0400] AlainODea: There may be a cookbook from the OpsWorks stuff that could get it
[2013-06-07 02:56:45 -0400] AlainODea: gzc: most cookbooks put in node[cookbookname] so node[cookbookname].nil? might be a good starting point
[2013-06-07 02:58:34 -0400] dyu: is there a mariadb cookbook? or i can just change node['mysql']['server']['packages'] to make it get from mariadb?
[2013-06-07 02:59:05 -0400] AlainODea: Thank you for your help tonight folks. I'm off :)
[2013-06-07 03:02:57 -0400] grobot: i'm running into "Cannot find a resource for mysql_database on debian version 6.0.6"
[2013-06-07 03:03:01 -0400] grobot: don't see same on ubuntu
[2013-06-07 03:03:17 -0400] grobot: debian system is using chef-solo, ubuntu is using vagrant
[2013-06-07 03:04:31 -0400] grobot: hostname.json run_list includes role[lamp], and roles/lamp.json includes recipe[mysql] and recipe[mysql::server]
[2013-06-07 03:04:47 -0400] grobot: what am i missing here?
[2013-06-07 03:05:49 -0400] juliancdunn: grobot: whose mysql cookbook are you using? Opscode's?
[2013-06-07 03:06:11 -0400] grobot: cookbook "mysql" # from Cheffile
[2013-06-07 03:06:16 -0400] grobot: so presumably opscode?
[2013-06-07 03:06:21 -0400] juliancdunn: probably
[2013-06-07 03:06:31 -0400] grobot: yep: site 'http://community.opscode.com/api/v1'
[2013-06-07 03:06:35 -0400] juliancdunn: the database_mysql provider is in the database cookbook
[2013-06-07 03:06:48 -0400] juliancdunn: er rather, mysql_database
[2013-06-07 03:07:14 -0400] grobot: so i add that to run_list for the role?
[2013-06-07 03:07:36 -0400] grobot: or as an include to the recipe where i call it?
[2013-06-07 03:07:59 -0400] grobot: aha http://tickets.opscode.com/browse/COOK-684
[2013-06-07 03:08:03 -0400] juliancdunn: that would do it, or just as a dependency to a cookbook, to load the LWRPs into the namespace
[2013-06-07 03:09:09 -0400] grobot: grant
[2013-06-07 03:09:10 -0400] grobot: er
[2013-06-07 03:09:11 -0400] grobot: grand
[2013-06-07 03:09:36 -0400] grobot: needed to replace "include database::mysql" with "include database" and all good (and onto the next error :)
[2013-06-07 03:18:01 -0400] gzc: well that feels filthy but hey, maybe someone else will want this https://github.com/gcymbalski/chef-server/tree/idempotence-plus
[2013-06-07 04:39:09 -0400] atrius`: so.. trying to run Chef on a system that gets the system ruby from RVM. things work as long as they are called via knife (bootstrap for instance) but the minute anything tries to run outside of that context (launching bluepill for instance) things break because the system doesn't know where the gems are... is this as simple as adding the embedded chef's gem path or do i need to do more?
[2013-06-07 04:48:47 -0400] atrius`: googling for this problem gets me dozens of hits on installing RVM via chef but nothing on running chef on an RVM based system
[2013-06-07 04:56:03 -0400] ignatz: you should check your path. your local user's path may well have RVM in it, but the system path may not.
[2013-06-07 04:57:28 -0400] atrius`: ignatz: what seems to be happening is that when i bootstrapped the new node it installed a full embedded ruby... that ruby is getting all the gems installed via the recipes and the system RVM can't find them
[2013-06-07 04:58:11 -0400] ignatz: aah
[2013-06-07 04:59:00 -0400] ignatz: If you write a recipe that has ruby_gems in it that should go to the system ruby
[2013-06-07 04:59:15 -0400] ignatz: as opposed to gems *used* by chef
[2013-06-07 04:59:22 -0400] ignatz: but that's where my knowledge ends
[2013-06-07 04:59:48 -0400] atrius`: well damn... things were going so well with this attempt with chef too
[2013-06-07 05:00:04 -0400] atrius`: last time i couldn't hardly get it to do anything
[2013-06-07 05:01:50 -0400] spox: is this just a workstation?
[2013-06-07 05:02:33 -0400] atrius`: it's a test system that i'm working on learning chef so that we can move to production with it later
[2013-06-07 05:02:39 -0400] atrius`: the production systems are using RVM
[2013-06-07 05:03:21 -0400] spox: yikes
[2013-06-07 05:03:40 -0400] atrius`: why yikes?
[2013-06-07 05:04:01 -0400] spox: at using rvm on a prod system instead of just having a single ruby
[2013-06-07 05:04:19 -0400] spox: but anyway, there is an rvm cookbook around out there that should help
[2013-06-07 05:04:36 -0400] spox: you can also set the `gem_binary` attribute in the gem_package resource to point to the rvm gem executable
[2013-06-07 05:04:36 -0400] atrius`: ah.. yeah.. wasn't entirely my idea. we are only using a single ruby (which makes RVM somewhat pointless?) but things were built this way.. soooo
[2013-06-07 05:05:26 -0400] atrius`: where is that set? in the recipes?
[2013-06-07 05:08:59 -0400] atrius`: more to the point, is that something i can set in knife so i'm not having to modify every recipe out there?
[2013-06-07 05:35:27 -0400] a_a_g: i'm running into a strange problem. I have a plugin in which I switch the role of a node. i do a search a query to verify this and redo the whole thing until it is confirmed. but when i run chef client it still picks up the old runlist
[2013-06-07 05:35:53 -0400] a_a_g: this happens intermittently and has started happening since last week
[2013-06-07 05:36:01 -0400] a_a_g: the same code was working fine till then
[2013-06-07 05:44:56 -0400] brucelee_: ::Chef::Recipe.send(:include, Opscode::OpenSSL::Password)
[2013-06-07 05:45:02 -0400] brucelee_: theres a line here in my chef recipe, how do i find out what that means?
[2013-06-07 05:45:15 -0400] brucelee_: is that in ruby syntax?
[2013-06-07 05:47:40 -0400] spox: brucelee_: it's including that module into recipe instances so recipes can have direct access to those methods
[2013-06-07 05:48:07 -0400] brucelee_: spox: oh ok
[2013-06-07 05:48:18 -0400] aruntomar: a_a_g: if you could paste the part of code where it's creating trouble, may be we could suggest something :)
[2013-06-07 05:51:15 -0400] brucelee_: spox: what do i look up to determine what exactly the syntax is doing?
[2013-06-07 05:51:23 -0400] brucelee_: spox: do i look up 'ruby include'
[2013-06-07 05:51:23 -0400] brucelee_: ?
[2013-06-07 05:53:55 -0400] brucelee_: oh ok
[2013-06-07 06:17:10 -0400] arosen1: Hi, I'm  getting the following error http://codepad.org/56yhNRt1 I followed this: http://www.morethanseven.net/2010/10/30/Chef-hello-world/
[2013-06-07 06:17:13 -0400] arosen1: any ideas?
[2013-06-07 06:19:29 -0400] coderanger: Woo, new starter kit system is up :)
[2013-06-07 06:19:35 -0400] arosen1: nvm i got it. There was an error in the blog post.
[2013-06-07 06:25:05 -0400] coderanger: Anyone lurking here trying to get started with hosted chef/
[2013-06-07 06:25:16 -0400] a_a_g: aruntomar, https://gist.github.com/adityagodbole/5727386
[2013-06-07 06:26:09 -0400] a_a_g: switch role returns. the chef-client picks up the old role. also, this has started a week ago. I havent changed the code recently
[2013-06-07 06:36:53 -0400] aruntomar: a_a_g: ur code seems to be fine
[2013-06-07 06:37:18 -0400] aruntomar: a_a_g: have u tried running chef-client in debug mode
[2013-06-07 06:38:40 -0400] a_a_g: yes, nothing that stands out
[2013-06-07 06:38:51 -0400] a_a_g: the runlist it picks up is the old runlist
[2013-06-07 06:40:41 -0400] aruntomar: a_a_g: you could log the query results, and try to see why it's not switching the role
[2013-06-07 06:41:01 -0400] a_a_g: the server returns the old role
[2013-06-07 06:51:46 -0400] aruntomar: a_a_g: hmmmm. that's weird.
[2013-06-07 06:53:04 -0400] a_a_g: i know :)
[2013-06-07 07:01:20 -0400] dyu: what attribute should i change to make the mysql community cookbook get mariadb?
[2013-06-07 07:02:32 -0400] aruntomar: a_a_g: another thought, it may be that records r updating on the server, only it's a bit delayed. that could be cause. when you query, it's fetched by solr. when you update something, it goes to db, and solr will pick it up from there and index it. that might cause the old cached results to display. i've seen that when i bootstrap a new server or run a chef-client on a server, followed immediately by knife status, those changes are not immediately reflec
[2013-06-07 07:03:49 -0400] aruntomar: a_a_g: try a 30 sec delay, before you fetch the run_list to check whether it's modified or not.
[2013-06-07 07:11:31 -0400] a_a_g: aruntomar, but the method switch_role! is successful and returns
[2013-06-07 07:11:48 -0400] Athreyan: Hi
[2013-06-07 07:12:04 -0400] Athreyan: is anybody there
[2013-06-07 07:12:07 -0400] a_a_g: yes, but i am sleping for 180 seconds before i start the converge on the nodes after switching
[2013-06-07 07:12:08 -0400] Athreyan: i  need a help
[2013-06-07 07:12:28 -0400] Athreyan: i just know about Chef?
[2013-06-07 07:12:40 -0400] Athreyan: is this a automation and orcestration tool?
[2013-06-07 07:12:57 -0400] Athreyan: we are looking for a alternative to Tivoli provisioning manager..
[2013-06-07 07:13:02 -0400] Athreyan: is this the right tool?
[2013-06-07 07:13:36 -0400] Athreyan: is this having capacity to remotely execute commands over target endpoints ( Linux, windows, virtual servers )
[2013-06-07 07:13:57 -0400] gigo1980: yes us cab
[2013-06-07 07:14:02 -0400] gigo1980: yes it can
[2013-06-07 07:14:21 -0400] gigo1980: but the regular way is to make an abstract layer with cookbooks
[2013-06-07 07:14:46 -0400] Athreyan: also helps copying files over endpoints, right?
[2013-06-07 07:14:53 -0400] Athreyan: thanks Gigo1980.
[2013-06-07 07:14:57 -0400] gigo1980: but it is also posible to execute hard coded command line executions / but that is the right way to use chef
[2013-06-07 07:15:40 -0400] Athreyan: is this web based?
[2013-06-07 07:15:55 -0400] Athreyan: i mean access consoles of chef thru browser?
[2013-06-07 07:16:18 -0400] Athreyan: also.. how can i see a demo with out installing anything in my pc?
[2013-06-07 07:16:20 -0400] gigo1980: yes i also copy files. i have a local workstation where i setup my infrastructure setup. push this to the chef server, an inside there are also some config files, that can be copied to the destination
[2013-06-07 07:16:36 -0400] gigo1980: it it both
[2013-06-07 07:16:48 -0400] Athreyan: ok Thanks Gigo...
[2013-06-07 07:17:32 -0400] Athreyan: over all.. it helps Automating Tasks in IT Infrastructure and help is orceshtration rite?
[2013-06-07 07:17:34 -0400] gigo1980: so you have tool called "knife" on you local workstation (computer of one of the adminstrators / or can be also an dedicated vm for all)
[2013-06-07 07:17:58 -0400] gigo1980: right, i start with it before 2 weeks a ago, and it is realy amazing
[2013-06-07 07:17:59 -0400] Athreyan: also will it communicate thru web service??
[2013-06-07 07:18:30 -0400] gigo1980: you can use knife for communication, if it has a webservice i dont know
[2013-06-07 07:18:50 -0400] Athreyan: knife is a command line for Chef rite?
[2013-06-07 07:19:15 -0400] gigo1980: right, that you can execute everythere
[2013-06-07 07:19:23 -0400] gigo1980: and that is like a webservice
[2013-06-07 07:19:38 -0400] gigo1980: so you can write an own webservice and map this to the local knife ;)
[2013-06-07 07:19:54 -0400] Athreyan: :-)
[2013-06-07 07:19:59 -0400] gigo1980: what do you use for virtualization ?
[2013-06-07 07:20:05 -0400] Athreyan: VMWare
[2013-06-07 07:20:51 -0400] gigo1980: do you have more linux oder windows installtions ?
[2013-06-07 07:21:05 -0400] Athreyan: Yes Gigo...
[2013-06-07 07:21:31 -0400] Athreyan: actually i am check ing this tool to suggest to my client who is having a big data centers... having loads of servers
[2013-06-07 07:21:46 -0400] spheromak: Athreyan,  you can signup on opscode platform for free, knife is generally how we opperate / interact, but the chef server and API'
[2013-06-07 07:21:48 -0400] spheromak: is REST
[2013-06-07 07:21:54 -0400] Athreyan: hope this will help in IT automation for them and do orchestration
[2013-06-07 07:22:32 -0400] spheromak: there are clients for doing all sortsa thing,  knife has many plugins and such, and is in general the prefered way to interact with your chef server/platform
[2013-06-07 07:22:47 -0400] gigo1980: thx, spheromak. i did not take a look at the knife ruby code ...
[2013-06-07 07:23:40 -0400] spheromak: ther are other libraries. ridley is the one the guys @ riotgames wrote that is independant of any chef code but interacts with the chef-server api
[2013-06-07 07:24:07 -0400] spheromak: in general this is chef strength imo  (can glue anything to or fro)
[2013-06-07 07:24:24 -0400] gigo1980: but when you are here, i have also an small question. there is an offical opscode "users" coobook <- this does only match groups or should it also create the users that are in the data bags (this does not work for me)
[2013-06-07 07:24:30 -0400] Athreyan: @Spheromak, if the chef server and API is using REST... we can use Java to communicate with Chef in backgroud rite?
[2013-06-07 07:24:42 -0400] spheromak: totally doable
[2013-06-07 07:24:50 -0400] spheromak: you just have to get the signed headers right
[2013-06-07 07:25:36 -0400] spheromak: http://docs.opscode.com/api_chef_server.html  :)
[2013-06-07 07:25:41 -0400] Athreyan: @Spheromak are u from Opscode? or just a power use ;-)
[2013-06-07 07:25:49 -0400] Athreyan: user*
[2013-06-07 07:26:04 -0400] spheromak: I've used chef sine it was first announced
[2013-06-07 07:26:15 -0400] Athreyan: oh.. when is the year?
[2013-06-07 07:26:18 -0400] spheromak: eh
[2013-06-07 07:26:29 -0400] Athreyan: which year?
[2013-06-07 07:27:04 -0400] spheromak: feels like forever, but really not that long ago ! ~2009 IIRC
[2013-06-07 07:27:11 -0400] gigo1980: so athreyan , i think spheromak can help you more, i am only an chef noob *G*
[2013-06-07 07:27:42 -0400] Athreyan: @gigo... yes i think.. Thanks anyways for the things you shared.. really helpful
[2013-06-07 07:28:33 -0400] Athreyan: @Spheromak can u say in a line.. shall i suggest my client to have this for Large Scale IT Automation and Orcestration ( Cloud Support )
[2013-06-07 07:28:48 -0400] spheromak: yes
[2013-06-07 07:28:48 -0400] spheromak: :D
[2013-06-07 07:29:03 -0400] Athreyan: @Spheromak Thanks a Lot...
[2013-06-07 07:29:04 -0400] gigo1980: but what i can it say. you have to invest about 2 days till your setup is running and deploy your first servers. and understand the docu (thats not realy much time) and write the first cookbooks
[2013-06-07 07:29:05 -0400] spheromak: I've worked in 2 large corps and implemented chef there
[2013-06-07 07:29:28 -0400] Athreyan: oh thats great...
[2013-06-07 07:29:30 -0400] spheromak: the Curve is a bit steep, but the tooling is highly  flexable to your needs.
[2013-06-07 07:29:53 -0400] Athreyan: we are currently using Tivoli Provisioning manager from IBM
[2013-06-07 07:30:01 -0400] spheromak: O.o
[2013-06-07 07:30:10 -0400] gigo1980: does you client think about to kick vmware ?
[2013-06-07 07:30:11 -0400] Athreyan: the operating cost for this is too high,, and having so many troubles...
[2013-06-07 07:30:27 -0400] Athreyan: they have vmware already
[2013-06-07 07:30:45 -0400] spheromak: well IIRC  thats a image manager and the like  ?
[2013-06-07 07:30:53 -0400] gigo1980: so if you will get the big cloud thing, take a look at open stack (chef can be a part of this)
[2013-06-07 07:31:10 -0400] spheromak: the  shift with chef is sorta moving away from binary images for systems, and describing the system in code (infra as code)]
[2013-06-07 07:31:35 -0400] Athreyan: hmm... yes
[2013-06-07 07:31:48 -0400] Athreyan: u mentioned about the Curve..whats that?
[2013-06-07 07:31:51 -0400] spheromak: gigo1980, chef is :P   https://github.com/stackforge/openstack-chef-repo
[2013-06-07 07:32:02 -0400] spheromak: Athreyan, the time it takes to get  going
[2013-06-07 07:32:11 -0400] spheromak: or to become good
[2013-06-07 07:32:20 -0400] spheromak: Athreyan,
[2013-06-07 07:32:24 -0400] spheromak: https://learnchef.opscode.com/
[2013-06-07 07:32:24 -0400] gigo1980: for me openstack was to big , and i switch to "proxmox", and with this bundel und chef it is posible that one it guy can manage all vms in this stack
[2013-06-07 07:33:51 -0400] Athreyan: okies...
[2013-06-07 07:34:06 -0400] spheromak: gigo1980, yea so many  nice projects out there..
[2013-06-07 07:34:09 -0400] Athreyan: do u suggest any other tools... for my need....
[2013-06-07 07:34:28 -0400] Athreyan: just to show case the capabilities of diff tools to my clients...
[2013-06-07 07:34:36 -0400] Athreyan: so that they can select based on the features..
[2013-06-07 07:34:47 -0400] Athreyan: i shortlisted Chef after speaking to you both
[2013-06-07 07:34:49 -0400] Athreyan: ;-0
[2013-06-07 07:34:53 -0400] Athreyan: ;-)
[2013-06-07 07:35:01 -0400] gigo1980: i take also a look on "puppet", but i think for me chef was the right tool
[2013-06-07 07:35:28 -0400] Athreyan: what about Saltstalk?
[2013-06-07 07:37:18 -0400] gigo1980: but spheromak did you also used in you long chef time the "users" cookbook from opscode?
[2013-06-07 07:38:05 -0400] spheromak: Athreyan, well check out razor  (puppet-razor) if you're replacing tivoli
[2013-06-07 07:38:11 -0400] spheromak: it also integrates with chef
[2013-06-07 07:38:41 -0400] spheromak: Athreyan, https://speakerdeck.com/fnichol/chefconf-2013-harnessing-the-power-of-bare-metal-with-razor-and-chef-server
[2013-06-07 07:39:14 -0400] spheromak: gigo1980, I have a  different users cook that I use thats based on that, but is not the same :D
[2013-06-07 07:39:15 -0400] Athreyan: ok.. i will have a look and analyse, 1. Chef  2. Razor 3. Puppet
[2013-06-07 07:39:38 -0400] spheromak: Athreyan, salt  cfengine3, ansible also other systems
[2013-06-07 07:39:49 -0400] spheromak: I've uses ansible and  original cfengine b4
[2013-06-07 07:40:03 -0400] spheromak: cfengien back in ~2001 :\
[2013-06-07 07:40:08 -0400] spheromak: *engine
[2013-06-07 07:42:07 -0400] Athreyan: 1. Chef
[2013-06-07 07:42:13 -0400] Athreyan: 2. Razor
[2013-06-07 07:42:18 -0400] Athreyan: 3. Puppet
[2013-06-07 07:42:21 -0400] Athreyan: 4. Salt
[2013-06-07 07:42:25 -0400] Athreyan: 5. cfengine3
[2013-06-07 07:42:27 -0400] Athreyan: 6. Ansible
[2013-06-07 07:42:36 -0400] spheromak: razor is  sytem building  (like cobbler sorta or  ghost) you use it with chef or puppet  (or other things)
[2013-06-07 07:43:03 -0400] spheromak: 3/4/5/6 all other configuration management frameworks
[2013-06-07 07:43:21 -0400] gigo1980: the "users" cookbook, should it also create the user? or should i use the "user" command to create the user
[2013-06-07 07:43:42 -0400] spheromak: gigo1980, it should use data bags to create users based on the attributes
[2013-06-07 07:43:48 -0400] spheromak: gnight
[2013-06-07 07:44:01 -0400] Athreyan: spheromak, good night..
[2013-06-07 07:44:08 -0400] Athreyan: see you..
[2013-06-07 07:44:13 -0400] Athreyan: bye
[2013-06-07 07:44:20 -0400] Athreyan: @gigo...
[2013-06-07 07:44:25 -0400] Athreyan: gotto go lunch
[2013-06-07 07:44:30 -0400] Athreyan: catch up later..
[2013-06-07 07:44:38 -0400] Athreyan: thanks for the help for you both..
[2013-06-07 07:44:43 -0400] Athreyan:  appreciated.
[2013-06-07 07:44:44 -0400] gigo1980: i use data bags for this. but should i have to write my own code to create that users ?
[2013-06-07 07:44:57 -0400] gigo1980: so that i itterate over the data baf
[2013-06-07 07:45:00 -0400] gigo1980: bag
[2013-06-07 07:47:25 -0400] gigo1980: i only found this here http://docs.opscode.com/essentials_data_bags.html#create-users
[2013-06-07 08:08:55 -0400] bigbigbang: Hi chefs ! Is there a way to display the Solr webpage that is embedded with chef open-source ?
[2013-06-07 08:26:13 -0400] dyu: re: yum cookbook. are the url and key fields combined when fetching the GPG key?
[2013-06-07 08:26:49 -0400] dyu: from what i've seen, only the filename of the GPG is passed to yum_repository
[2013-06-07 08:28:10 -0400] dyu: i'm assuming that the recipe combines them somewhere or makes an assumption for the base url of the GPG key. my problem is that MariaDB's baseurl and gpgkey have very different base URL's
[2013-06-07 08:29:06 -0400] dyu: is there a way to explicitly set the complete URL for the GPG key? or am i doing it wrong?
[2013-06-07 08:32:32 -0400] dyu: i think i understand now. the key function in the yum_repo block sets the name for your local copy of the key and it's not the location of the original copy of the key
[2013-06-07 09:42:18 -0400] gigo1980: hi all, do you also manage the "root" user over chef ?
[2013-06-07 10:00:22 -0400] linuxboy: hey guys
[2013-06-07 10:00:30 -0400] linuxboy: I'm using the jenkins cookbook to download plugins for me
[2013-06-07 10:00:38 -0400] linuxboy: and every time I run chef I get this output:
[2013-06-07 10:00:39 -0400] linuxboy:     - copy file downloaded from [] into /var/lib/jenkins/jenkins-data/plugins/subversion.hpi
[2013-06-07 10:01:23 -0400] linuxboy: it looks like the file renames itself to subversion.jpi and chef thinks that it doesn't exist anymore, so it redownloads it
[2013-06-07 11:27:35 -0400] aalmenar: Hello, im currently having very rare issue with chef client 11.4.4
[2013-06-07 11:28:17 -0400] aalmenar: when it times out when trying to connect to chef-server, it never tries again...
[2013-06-07 11:28:46 -0400] aalmenar: it just my config ? im using the opscode chef-client recipe almost with default options
[2013-06-07 11:29:29 -0400] aalmenar: if needed chef-server is 11.0.8
[2013-06-07 12:04:41 -0400] CaptainQuirk: Hi there
[2013-06-07 12:05:34 -0400] CaptainQuirk: I already asked the question here but I'm having an issue letting the cron resource work
[2013-06-07 12:07:09 -0400] CaptainQuirk: I don't seem to find the place where the entry in the crontab should be
[2013-06-07 12:26:41 -0400] CaptainQuirk: ok found it
[2013-06-07 12:58:18 -0400] abiko: Hey guys. Quick question about cookbooks and whole process with dealing with them -  I can have them on a local computer, then use knife t upload them to the server and save changes to a private repo somewhere ?
[2013-06-07 13:04:37 -0400] eponymi_: abiko: i lost you at "save changes to a private repo somewhere"
[2013-06-07 13:05:21 -0400] abiko: git push to remote  repo,  I have a gitlab install which keeps this
[2013-06-07 13:05:28 -0400] abiko: Not really keen on having some cookbooks on public place like github
[2013-06-07 13:09:23 -0400] eponymi_: the cookbooks are just files; you can store them wherever you please
[2013-06-07 13:09:52 -0400] abiko: Chef server just sees the new version when you upload it using knife ?
[2013-06-07 13:11:37 -0400] eponymi_: http://docs.opscode.com/knife_cookbook.html#upload
[2013-06-07 13:11:46 -0400] eponymi_: "Only files that do not already exist on the Chef Server will be uploaded."
[2013-06-07 13:13:00 -0400] wildahunden: I have an attribute that I set with an attributes file:  "apps" => {"cv"=>{"version"=>"1", "location"=>"abc"}, "blueprint"=>{"version"="2", "location"=>"def"}}.  In a role file I want to override the attribute so that id only has blueprint (e.g., remove cv).  The override doesn't seem to remove cv.  Is there a way to remove an attribute in an override attribute?
[2013-06-07 13:13:34 -0400] wildahunden: You can add or change.  I don't see a way to remove it.
[2013-06-07 13:13:53 -0400] spox: wildahunden: not remove, but you can set it to false
[2013-06-07 13:14:37 -0400] wildahunden: "apps" => {"cv"=>false, "blueprint"=>{"version"="2", "location"=>"def"}} ?
[2013-06-07 13:15:34 -0400] wildahunden: spox:  thank you.
[2013-06-07 13:16:09 -0400] spox: wildahunden: sure
[2013-06-07 13:56:31 -0400] aalmenar: Hello, im currently having very rare issue with chef client 11.4.4 when it times out when trying to connect to chef-server, it never tries again...
[2013-06-07 13:56:48 -0400] aalmenar: it just my config ? im using the opscode chef-client recipe almost with default options
[2013-06-07 13:57:00 -0400] aalmenar: the usual fix is restart the chef client
[2013-06-07 13:58:50 -0400] spox: yeah, there is an old issue hanging about in jira for stuck connections
[2013-06-07 14:05:35 -0400] s2r2: hmm using open source chef server, `knife` seems to work fine but `berks` doesnt, some strange error from ridley sandbox / faraday -- what could be wrong?
[2013-06-07 14:40:24 -0400] m4rcu5: anyone running the chef-client cookbook on chef servers as well? it complains about the missing chef user, but this seems to be chef_server by default?
[2013-06-07 15:15:38 -0400] rayrod2030: Anyone run into this bug when using test-kitchen in jenkins with jtimberman's kitchen-jenkins cookbook? https://gist.github.com/rayrod2030/5730006
[2013-06-07 15:15:57 -0400] rayrod2030: I've already tried this fix but it has not worked for me: https://gist.github.com/crackmac/5686367/
[2013-06-07 15:36:29 -0400] asharp: having trouble creating mysql databases on a centos box. I can start a mysql server, ssh into the vagrant vm, and create databases manually. but if i use the database cookbook, i get "LoadError: cannot load such file -- mysql"
[2013-06-07 15:38:11 -0400] siezer: asharp you have to include the mysql::ruby recipe before you use any of the LWRPs shipped in the database cookbook
[2013-06-07 15:43:03 -0400] rayrod2030: to answer my own question here: https://github.com/dtao/safe_yaml/issues/40
[2013-06-07 15:43:14 -0400] BryanWB_: chef-hackers, would it be possible to omnibus just the gems and the compiled c extensions for command-line ruby app and not bundle the entire rubyvm?
[2013-06-07 15:43:26 -0400] asharp: siezer the error is gone and i see "INFO: Processing mysql_database[oracle_rules] action create (database::default line 21)", but the "oracle_rules" database is not showing
[2013-06-07 15:43:32 -0400] BryanWB_: and just require the end user to have a ruby 1.9* vm installed
[2013-06-07 15:54:24 -0400] Trinitro1X: so I think I found a potential bug in knife cookbook upload
[2013-06-07 15:59:27 -0400] Trinitro1X: I just did a 'knife cookbook upload chef-solo-search', and some files in 'libraries' did not get uploaded to my chef server
[2013-06-07 16:00:12 -0400] Trinitro1X: specifically any sub directories of the 'chef-solo-search/libraries' folder
[2013-06-07 16:02:59 -0400] axsuul: Is there any way to categorize nodes on chef server?
[2013-06-07 16:04:12 -0400] tspencer: Roles/environments?
[2013-06-07 16:05:27 -0400] Trinitro1X: Yeah, roles or environments are probably what you want @axsuul
[2013-06-07 16:05:51 -0400] axsuul: Like how puppet allows you to group nodes
[2013-06-07 16:05:56 -0400] axsuul: is there anything similar in chef
[2013-06-07 16:06:10 -0400] john5223: environment?
[2013-06-07 16:06:26 -0400] axsuul: Hmm, environment only affects attributes right?
[2013-06-07 16:06:37 -0400] john5223: a node belongs to an environment
[2013-06-07 16:06:40 -0400] john5223: thus...a group
[2013-06-07 16:06:45 -0400] john5223: an environment also has attributes as well
[2013-06-07 16:06:46 -0400] gleam: environment can affect a lot of things, or nothing
[2013-06-07 16:07:01 -0400] asharp: trying to create mysql databases with chef-solo. i was pointed to this webpage but i dont understand it https://gist.github.com/lusis/769365
[2013-06-07 16:07:03 -0400] john5223: so your environment...could tell your node what to do
[2013-06-07 16:07:09 -0400] john5223: or could just be blank...and just a group of nodes
[2013-06-07 16:08:06 -0400] axsuul: john5223: i see, thanks
[2013-06-07 16:11:55 -0400] axsuul: john5223: Any way to see nodes from a certain environment within web ui?
[2013-06-07 16:20:01 -0400] bean: axsuul: sure, select the env from the dropdown at the top
[2013-06-07 16:20:03 -0400] bean: go to nodes
[2013-06-07 16:20:09 -0400] bean: only nodes in that env will be displayed
[2013-06-07 16:23:12 -0400] john5223: knife search node 'chef_environment:_default'
[2013-06-07 16:23:14 -0400] john5223: from cli
[2013-06-07 16:23:38 -0400] axsuul: wish it filter the nodes like that in status
[2013-06-07 16:23:41 -0400] axsuul: it would*
[2013-06-07 16:23:54 -0400] axsuul: Chef webui is kinda ugly isn't it
[2013-06-07 16:24:05 -0400] gleam: status only shows 20 nodes anyway
[2013-06-07 16:26:59 -0400] bgleb: gleam: use `knife status` it will show you all the nodes and their status or fork&patch chef-server-webui :)
[2013-06-07 16:29:33 -0400] gleam: oh i know, i don't really use the webui
[2013-06-07 16:29:36 -0400] gleam: just stating a fact
[2013-06-07 16:32:04 -0400] john5223: they have another web ui for the paid members
[2013-06-07 16:32:11 -0400] john5223: that web ui is just plain...
[2013-06-07 16:32:20 -0400] bgleb: i've patched webui to add company-specific details and dashboards. it wasn't hard - just simple rails app. i think that it's only way to get what you want from ui.
[2013-06-07 16:32:34 -0400] john5223: or build your own
[2013-06-07 16:32:38 -0400] john5223: im writing one in python :)
[2013-06-07 16:33:34 -0400] bgleb: john5223: have you ever seen screenshots of private chef ui? i cant find one. whats about rsa request signing?
[2013-06-07 16:33:56 -0400] john5223: no idea
[2013-06-07 16:34:04 -0400] john5223: i was looking for a better ui about a month ago
[2013-06-07 16:34:30 -0400] john5223: came across  chef ui (sucks),  another one you have to pay for, and i saw in a news article that chef has a ui for its advanced members
[2013-06-07 16:34:32 -0400] john5223: or something like that
[2013-06-07 16:34:38 -0400] john5223: someone from chef can probably  tell you more
[2013-06-07 16:34:45 -0400] john5223: or opscode*
[2013-06-07 16:35:12 -0400] timsmith: hosted chef has a better UI
[2013-06-07 16:35:19 -0400] timsmith: it's pretty slick
[2013-06-07 16:36:09 -0400] axsuul: puppet's ui is really nice
[2013-06-07 16:36:11 -0400] eponymi: timsmith: tell me some other things you think are slick plz
[2013-06-07 16:37:35 -0400] timsmith: 1) It's no slow like the old UI 2) It has autocomplete  3)  It looks nice now  4)  Has a much nicer tabbed layout that the old UI
[2013-06-07 16:38:02 -0400] timsmith: 5)  You don't have to just through pages to do actions as there's pull down menus for things like deleting nodes now
[2013-06-07 16:38:13 -0400] timsmith: 6)  There's nice search
[2013-06-07 16:38:47 -0400] timsmith: 7)  Works as expected on wide screens
[2013-06-07 16:40:03 -0400] paulmooring: john5223: the chef webui is an open source project, if you wanted to awesome it up I think you would make some people happy ;)
[2013-06-07 17:02:27 -0400] asharp: trying to create mysql databases with chef-solo. i was pointed to this webpage but i dont understand it https://gist.github.com/lusis/769365
[2013-06-07 17:03:59 -0400] jameson__: the two json files are for inserting into your databag directory
[2013-06-07 17:04:44 -0400] jameson__: and the ruby file is suppose to be the recipe that uses that to create the two user and set their mysql permissions
[2013-06-07 17:05:26 -0400] eponymi: asharp: any reason you're not using https://github.com/opscode-cookbooks/database/tree/master/libraries?
[2013-06-07 17:06:44 -0400] mattt: anyone use knife-vagrant ?
[2013-06-07 17:08:33 -0400] asharp: eponymi i was, here's what was in my default.rb# create a mysql database
[2013-06-07 17:08:33 -0400] asharp: mysql_database 'oracle_rules' do
[2013-06-07 17:08:34 -0400] asharp:   connection ({:host => "localhost", :username => 'root', :password => node['mysql']['server_root_password']})
[2013-06-07 17:08:34 -0400] asharp:   action :create
[2013-06-07 17:08:34 -0400] asharp: end
[2013-06-07 17:08:47 -0400] timsmith: anyone know the sorting method of the chef cookbook reviews in jira now.  Priority or Updated Date?
[2013-06-07 17:09:03 -0400] asharp: eponymi i'm running it again to get the error, hold on
[2013-06-07 17:10:20 -0400] Afterglow: with berkshelf if you specify a config with -c/config is that supposed to imply the command install?
[2013-06-07 17:10:51 -0400] Afterglow: oh maybe I am just putting the args in the wrong order :)
[2013-06-07 17:11:25 -0400] asharp: eponymi the problem is that the database doesn't get created
[2013-06-07 17:12:04 -0400] asharp: eponymi unless i log into the server as root.
[2013-06-07 17:12:06 -0400] asharp: problem fixed
[2013-06-07 17:15:02 -0400] rracterr: I've got a reoccuring problem across dozens of machines of clients ending up zombied... is there some known tweak/hack/cron related thing to manage clients locking up and then blocking further runs?
[2013-06-07 17:16:46 -0400] bgleb: rracterr: r u using chef-client in daemon mode or just running it as cron-job?
[2013-06-07 17:17:21 -0400] rracterr: daemon mode, all settings left default, set up by the chef-client recipe
[2013-06-07 17:20:58 -0400] bgleb: rracterr: hm. there was few msg about that above, cant find link to the jira :( i'm running using cron.d (10min interval) with timeout wrapper set for 6min. never seen zombied chef-client. is there anything in chef-client logs?
[2013-06-07 17:21:24 -0400] timsmith: what version of chef rracterr?
[2013-06-07 17:21:42 -0400] rracterr: actually I found a comment on the internet about someone having this problem and they found they had a bad dns entry in resolv.conf... running down that road right now... current version of everything
[2013-06-07 17:27:33 -0400] tspencer: everybody:  Is there a best practice for deciding whether to use packages or cookbooks to manage stuff?  For instance, if I need to install something from CPAN, I can (on CentOS at least) 'package "perl-CPAN"' and then execute cpan commands in a recipe.  Or I could get the cpan cookbook and use that to install stuff in a recipe.
[2013-06-07 17:28:52 -0400] tspencer: The package way would seem to make it easier for me to use yum-security to figure out if there are security updates that need applying, but the cookbook way seems to be more chef-y.
[2013-06-07 17:29:20 -0400] rracterr: will package work on windows?
[2013-06-07 17:29:22 -0400] tspencer: I'm just wondering if anybody else has come up with a good reason to do one over the other.  :-)
[2013-06-07 17:29:38 -0400] rracterr: I've assumed the platform differences were what you were getting from using a recipe over the package command
[2013-06-07 17:31:22 -0400] tspencer: Hmm.  Good point.  I guess that in my world, windows SHALL NOT PASS, so that's never been a factor.
[2013-06-07 17:34:42 -0400] tspencer: I guess I've got an answer then, but it's not satisfactory for me, in a linux world.
[2013-06-07 17:35:48 -0400] asharp: my git resource creates 'current', 'releases', and 'shared' directories, how do i limit it to just the 'current'? In fact, I only want the contents of current
[2013-06-07 17:41:40 -0400] rep0st: sooooooo....how does one handle periods in a username (don't get me started) when creating a user in the chef webui.
[2013-06-07 17:48:14 -0400] atrius`: how would one get the gems chef installs to install into the area the system ruby expects vice into the embedded ruby?
[2013-06-07 17:48:43 -0400] coderanger: atrius`: use gem_package instead of chef_gem
[2013-06-07 17:49:25 -0400] atrius`: coderanger: the recipes in question are using that, but they still seem to end up in /opt/chef/blahblahblah and 'gem list' contains only rake
[2013-06-07 17:49:55 -0400] coderanger: atrius`: if your normal gem binary isn't first on $PATH, make sure you set it correctly
[2013-06-07 17:50:00 -0400] atrius`: the system in question is using RVM (not from a recipe) if that changes anything
[2013-06-07 17:50:28 -0400] coderanger: Yeah, it probably means chef can't see your gem binary on PATH
[2013-06-07 17:50:35 -0400] coderanger: so just set it manually via #gem_binary
[2013-06-07 17:51:03 -0400] coderanger: The default it otherwise just 'gem', which in this case it probably finding chef's
[2013-06-07 17:51:49 -0400] atrius`: coderanger: damn it.. just figured it out.. during bootstrap everything is run with just 'sudo foo' right? well, when i do 'which gem' i get "/usr/share/ruby-rvm/rubies/ruby-1.9.2-head/bin/gem" but if i do 'sudo which gem' i get "/usr/bin/gem"
[2013-06-07 17:51:50 -0400] atrius`: grrrrr
[2013-06-07 17:51:53 -0400] atrius`: thanks :)
[2013-06-07 17:52:29 -0400] coderanger: Yep, and obligatory warning that RVM on a server is a pile of fail and hate the likes of which you have never seen
[2013-06-07 17:52:35 -0400] coderanger: I would highly recommend avoiding it
[2013-06-07 17:52:39 -0400] defishguy: We use a an apache served depot of rpm packages, and I would like to know if there is a way to use wildcards with remote_file + source.  I really want to avoid versioning in the recipies if I can.
[2013-06-07 17:53:21 -0400] atrius`: coderanger: yeah, i've been getting that a lot lately. unfortunately things got setup that way (on the advice of Those Who Came Before) before i knew any better :(
[2013-06-07 17:53:22 -0400] coderanger: defishguy: Not really, you would have to hit the Chef API from inside the recipe to enumerate all the files in the cookbook
[2013-06-07 17:53:50 -0400] coderanger: atrius`: I figured, I still have to say it out of deep hatred for rvm :)
[2013-06-07 17:54:51 -0400] atrius`: coderanger: i'm starting to get that hate too. seems like a complex answer looking for a question (unless you're switching rubies all the bloody time)
[2013-06-07 17:55:09 -0400] defishguy: @coderanger:  Grrrr..... The file I'm wanting to install is hosted on apache server.  I was hoping to say something like source "http://123.234.456.789/depot/foo*"
[2013-06-07 17:55:28 -0400] coderanger: defishguy: HTTP doesn't work that way
[2013-06-07 17:55:29 -0400] defishguy: I was afeared that I'd have to put specific versions in each recipe.
[2013-06-07 17:55:45 -0400] coderanger: defishguy: Why not put them in a yum repo and let yum sort it all out?
[2013-06-07 17:55:54 -0400] defishguy: I know the http part.  I was hoping there was a way to get chef to enumerate files of a certain type over http.
[2013-06-07 17:56:08 -0400] coderanger: There is literally no way to enumerate files over HTTP :)
[2013-06-07 17:56:16 -0400] defishguy: I wish I could.
[2013-06-07 17:56:34 -0400] coderanger: Not without additional semantics on top of HTTP, like "scrap the Apache index page"
[2013-06-07 17:56:42 -0400] defishguy: Currently our chef deployment is basically a terrific way of distributing bash scripts.  I'm wanting to change that.
[2013-06-07 17:57:24 -0400] coderanger: and if you want to write a little snippet of ruby code, you can definitely do that
[2013-06-07 17:57:26 -0400] coderanger: :)
[2013-06-07 17:57:50 -0400] coderanger: Just use net::http to grab the page, and some regexes (warning: this is exactly as good an idea as it sounds :)
[2013-06-07 17:57:52 -0400] defishguy: That's a good idea.  I'm new to ruby, but that doesn't sound too difficult.
[2013-06-07 17:58:18 -0400] coderanger: Should be pretty easy though, apache/nginx index pages are easy to parse
[2013-06-07 17:58:21 -0400] defishguy: Yeah regex is always fun.
[2013-06-07 18:02:40 -0400] jameson__: does chef have a 'which' command?
[2013-06-07 18:02:45 -0400] coderanger: jameson__: Hmm?
[2013-06-07 18:02:54 -0400] coderanger: which is generally a shell builtin
[2013-06-07 18:03:05 -0400] jameson__: right, if it has a value stored for it
[2013-06-07 18:03:29 -0400] jameson__: i'm looking at the python cookbook, and I feel like it is better done with not_if 'which pip'
[2013-06-07 18:04:12 -0400] jameson__: so as long as the shell is compliant(?), it would be fine..?
[2013-06-07 18:04:14 -0400] coderanger: 1) which on some shells doesn't return an error code if the command is not found (solaris)
[2013-06-07 18:04:29 -0400] coderanger: 2) to what check are you referring?
[2013-06-07 18:04:35 -0400] jameson__: the ones for installing pip
[2013-06-07 18:04:57 -0400] jameson__: because this breaks my ubuntu installs
[2013-06-07 18:05:32 -0400] spheromak: jameson__, most portable is "command"
[2013-06-07 18:06:11 -0400] coderanger: Better question, why are you using global pip ever, we should really just remove that and fix the venv install to go directly
[2013-06-07 18:06:12 -0400] coderanger: :)
[2013-06-07 18:07:10 -0400] coderanger: Maybe this weekend I'll rewrite the bloody thing
[2013-06-07 18:09:02 -0400] siezer: I'm *this* close to re-writing yum
[2013-06-07 18:11:15 -0400] atrius`: if the system ruby is jruby, does that complicate things from the perspective of chef?
[2013-06-07 18:13:14 -0400] awgross: is there any documentation on the format of what is returned from Chef::Search::Query.new ?
[2013-06-07 18:13:18 -0400] awgross: it returns an array
[2013-06-07 18:13:30 -0400] awgross: the first element, is an array of hashes of result nodes
[2013-06-07 18:13:36 -0400] awgross: i thinkt he second one is number of results
[2013-06-07 18:13:40 -0400] siezer: atrius first, you should use the omnibus chef installer, which is hermetically sealed into /opt
[2013-06-07 18:13:41 -0400] awgross: the third, not sure
[2013-06-07 18:13:49 -0400] siezer: second, what system uses jruby as its system ruby?
[2013-06-07 18:13:49 -0400] spheromak: coderanger, you  opinions ?  Nevar!
[2013-06-07 18:13:56 -0400] awgross: err, 3rd is results, second I am unsure
[2013-06-07 18:14:03 -0400] spheromak: <3
[2013-06-07 18:14:15 -0400] coderanger: siezer: Want to submit yum support for my depot tool too? :)
[2013-06-07 18:14:20 -0400] awgross: when I search for a node by name, I get [[node[my_machine]], 0, 1]
[2013-06-07 18:14:25 -0400] coderanger: spheromak: ALL YOUR LWRP ARE BELONG TO US
[2013-06-07 18:14:30 -0400] spheromak: :P
[2013-06-07 18:14:46 -0400] siezer: I'm looking for ibuprofen and reading the openldap spec file
[2013-06-07 18:14:48 -0400] siezer: so probably not today
[2013-06-07 18:15:47 -0400] atrius`: siezer: none yet. we're kicking around moving our application to jruby and didn't know if that would impact the system ruby or not. i would actually think it wouldn't necessarily. when you say i should be using the omnibus installer, are you referring to the clients or server?
[2013-06-07 18:16:02 -0400] coderanger: siezer: This is exactly why I haven't written said yum support yet, my eyes glaze over when they start talking about dynamic sqlite files
[2013-06-07 18:17:05 -0400] siezer: atrius ah. yea the "system" ruby on any particular system is meant to be a dependency for other packages.... so, fedora, for example, has a gnome cdrom utility that depends on ruby 1.8.7
[2013-06-07 18:17:24 -0400] siezer: just as python-2.4 is "system" to support anaconda and such
[2013-06-07 18:17:36 -0400] siezer: so don't fuck with "system" anything, ever, as general rule of thumb
[2013-06-07 18:17:52 -0400] siezer: chef's ruby lives in /opt/chef
[2013-06-07 18:18:05 -0400] siezer: your app's jruby can live anywhere you want, probably /opt/yourapp
[2013-06-07 18:19:22 -0400] atrius`: that makes sense. eventually we'll probably move to having chef deploy updates and such. i'll have to write the recipes in my Copious Free Time
[2013-06-07 18:19:51 -0400] jameson__: coderanger: yeah, we all know the python cb needs some more love
[2013-06-07 18:19:54 -0400] jameson__: and lwrping
[2013-06-07 18:21:14 -0400] jameson__: lots and lots of lwrping
[2013-06-07 18:22:08 -0400] jameson__: my biggest issue with the python package though is that upgrade rom package to source is not possible
[2013-06-07 18:22:31 -0400] siezer: eh?
[2013-06-07 18:22:59 -0400] jameson__: because distribute > 0.6.24 breaks with distribute <= 0.6.24
[2013-06-07 18:23:02 -0400] jameson__: or .28
[2013-06-07 18:23:18 -0400] runfromnowhere: Hi all, got a question about the Ifconfig provider - does anyone actually use it?
[2013-06-07 18:24:52 -0400] awgross: ahh, the second field is the paging
[2013-06-07 18:24:56 -0400] awgross: https://github.com/opscode/chef/blob/master/lib/chef/search/query.rb#L51
[2013-06-07 18:25:09 -0400] awgross: a shame the APi is locked in, would have nice to have it as a labeled hash
[2013-06-07 18:25:15 -0400] awgross: instead of an opaque array
[2013-06-07 18:27:16 -0400] zackf: Is there any trick to getting Log messages to appear in a chef client run from a provider?
[2013-06-07 18:31:15 -0400] awgross: zackf: they should just show up
[2013-06-07 18:31:28 -0400] awgross: normally they log when they are parsed
[2013-06-07 18:31:30 -0400] awgross: before the converge
[2013-06-07 18:31:36 -0400] awgross: if you want them to log during the converge
[2013-06-07 18:31:41 -0400] awgross: put them inside a ruby block
[2013-06-07 18:32:21 -0400] zackf: I can only get them when i run chef-client -l debug, when I use Chef::Log.debug from the provider.
[2013-06-07 18:32:29 -0400] zackf: ah ok
[2013-06-07 18:32:53 -0400] jmkacz: ohai chefs
[2013-06-07 18:33:27 -0400] jmkacz: I'm using the opscode aws cookbook to create an ebs volume, and I would like to turn aorund and tag that new resource.
[2013-06-07 18:34:02 -0400] jmkacz: Problem is I can't just reference node["aws"]["ebs_volume"][the_volume_name]["volume_id"]
[2013-06-07 18:34:55 -0400] jmkacz: I get a recipe compile error, since ebs_volume is not defined on node["aws"]
[2013-06-07 18:35:54 -0400] Otterley: jmkacz, typical way of handling that is to put the tagging action in a ruby_block, then notify the ruby_block after creating the ebs volue
[2013-06-07 18:36:14 -0400] jmkacz: https://gist.github.com/jmkacz/5731388
[2013-06-07 18:37:01 -0400] Otterley: is aws_ebs_volume not setting a node attribute when it runs?
[2013-06-07 18:38:39 -0400] jmkacz: Otterley: the error occurs during recipe compilation; before the volume is created, it seems
[2013-06-07 18:38:52 -0400] Otterley: jmkacz, hence the suggestion for the ruby_block
[2013-06-07 18:39:02 -0400] jmkacz: If I try putting the resource into a ruby block, I get undefined method `aws_resource_tag' for Chef::Resource::RubyBlock
[2013-06-07 18:39:34 -0400] prefix: how might I go about updating commands on a IBM DB2 server?
[2013-06-07 18:40:15 -0400] jmkacz: Otterley: I updated my gist
[2013-06-07 18:40:32 -0400] prefix: *using chef to update an IBM DB2 database
[2013-06-07 18:41:13 -0400] Otterley: jmkacz, hmm
[2013-06-07 18:41:27 -0400] siezer: prefix two questions: what command would you type to figure out if you needed to do the updates? and what command would you type to actually do the update?
[2013-06-07 18:41:42 -0400] Otterley: this is a typical problem with chef, where you can't know a parameter for a resource until a prior resource has run already
[2013-06-07 18:42:32 -0400] jmkacz: It appears to be a confirmed bug: https://tickets.opscode.com/browse/COOK-2675?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel
[2013-06-07 18:43:45 -0400] Otterley: jmkacz, there are examples out there of ruby blocks that invoke the Chef API directly
[2013-06-07 18:43:47 -0400] Otterley: e.g. https://gist.github.com/mostlygeek/1672827
[2013-06-07 18:44:14 -0400] Otterley: it's ugly, but you can coerce Chef to do your bidding
[2013-06-07 18:44:25 -0400] prefix: siezer I'm less concerned about the commands themselves. I'm wondering if there is a way to do it though chef. It appears that DB2 uses SQL syntax.
[2013-06-07 18:44:49 -0400] siezer: prefix the answer is you would need to implement a custom resource in chef to handle it
[2013-06-07 18:44:58 -0400] Otterley: jmkacz, see also http://stackoverflow.com/questions/14633509/is-there-any-way-to-delay-a-resources-attribute-resolution-until-the-execute
[2013-06-07 18:45:00 -0400] awgross: zackf: you can also do Chef::Log.info
[2013-06-07 18:45:03 -0400] siezer: but it's totally possible
[2013-06-07 18:45:08 -0400] prefix: ok
[2013-06-07 18:46:38 -0400] Otterley: jmkacz, what I'd love to see is the ability to pass arguments through notifications/subscriptions, and a way to indicate in a resource definition that it is abstract
[2013-06-07 18:47:36 -0400] Otterley: if it's abstract, the default run_action will be :nothing, and the compiler won't complain if required attributes are undefined
[2013-06-07 18:48:28 -0400] Otterley: this would solve a whole bunch of race conditions I have involving creation of files whose owners are not yet defined on the host
[2013-06-07 18:53:07 -0400] behemphi: OK, its Friday and time for a laugh
[2013-06-07 18:53:08 -0400] behemphi: http://theonion.github.io/fartscroll.js/
[2013-06-07 18:53:13 -0400] behemphi: then scroll
[2013-06-07 18:53:26 -0400] behemphi: work safe, but turn down speakers
[2013-06-07 18:56:22 -0400] greenmoss: hi all; has anyone noticed the ordering behavior of "include_recipe" changing between chef versions?
[2013-06-07 18:58:43 -0400] siezer: greenmoss no?
[2013-06-07 18:59:15 -0400] greenmoss: in 10.12, I could define a ruby_block above include_recipe, then reference that block from the included recipe
[2013-06-07 18:59:41 -0400] greenmoss: in 10.24 the included recipe would complain that it couldn't find the ruby block
[2013-06-07 18:59:51 -0400] greenmoss: in 11.4 it worked the same as in 10.12
[2013-06-07 19:00:05 -0400] greenmoss: in 11.4.4 it switched back to the behavior of 10.24
[2013-06-07 19:00:19 -0400] siezer: weird.
[2013-06-07 19:00:22 -0400] ignatz: I edited the gemspec for knife-cfn to make it work with newest chef. I hope it doesn't eat my face off.
[2013-06-07 19:00:54 -0400] jmkacz: Otterley: thanks, I'll try those ... and I agree
[2013-06-07 19:02:07 -0400] Otterley: greenmoss, I'm investigating various regressions in Chef 11.  things seem weird, but I'm still gathering evidence
[2013-06-07 19:08:04 -0400] Otterley: there is definitely a regression in Chef 11 re: --why-run on directories
[2013-06-07 19:08:25 -0400] Otterley: the bug has been fixed for months but is being held hostage to a CLA (for a 1-line change??)
[2013-06-07 19:08:45 -0400] zackf: thanks awgross
[2013-06-07 19:08:57 -0400] zackf: Is it bad practice to set node attributes from a provider?
[2013-06-07 19:09:08 -0400] Otterley: zackf, not at all
[2013-06-07 19:09:19 -0400] Otterley: ohai does exactly that
[2013-06-07 19:09:21 -0400] zackf: perfect
[2013-06-07 19:09:29 -0400] zackf: Thanks for that!
[2013-06-07 19:14:01 -0400] greenmoss: Otterley: cool thanks
[2013-06-07 19:14:10 -0400] greenmoss: I first suspected that I was in fact going insane
[2013-06-07 19:15:32 -0400] ericReeves: Related:  Best pull request ever.  https://github.com/theonion/fartscroll.js/pull/9
[2013-06-07 19:15:48 -0400] ericReeves: Oops, I was apparently quite backscrolled.  :)
[2013-06-07 19:17:55 -0400] jmkacz: (for reference I'm on 10.24.0)
[2013-06-07 19:18:38 -0400] jmkacz: Otterly, the SO soln won't work for me since the hash reference is resolved at compile time, not convergence time
[2013-06-07 19:19:12 -0400] jmkacz: or at least that's what I'm seeing
[2013-06-07 19:19:29 -0400] jmkacz: even in a ruby block
[2013-06-07 19:22:01 -0400] jmkacz: oh, I was using block begin, not block do
[2013-06-07 19:28:09 -0400] Otterley: jmkacz, not familiar with block begin syntax :)
[2013-06-07 19:28:55 -0400] jmkacz: Otterley: I went tiwth this
[2013-06-07 19:28:56 -0400] jmkacz: https://gist.github.com/jmkacz/5731388
[2013-06-07 19:29:07 -0400] jmkacz: block begin is evaluated at compile time
[2013-06-07 19:29:23 -0400] jmkacz: block do appears to be evaluated later
[2013-06-07 19:29:24 -0400] Otterley: jmkacz, if it works, awesome!
[2013-06-07 19:29:42 -0400] jmkacz: I'm blocked right now b/c the snapshot I'm depending on is still in the pending state
[2013-06-07 19:29:45 -0400] jmickle: miah: what is =~ in ruby?
[2013-06-07 19:30:05 -0400] jmkacz: Otterley: thanks a lot
[2013-06-07 19:30:08 -0400] Otterley: anytime
[2013-06-07 19:30:51 -0400] greenmoss: jmickle: match regex
[2013-06-07 19:30:55 -0400] jmickle: ah
[2013-06-07 19:30:56 -0400] jmickle: ty
[2013-06-07 19:31:00 -0400] Otterley: jmkacz, just to be pedantic, best practice is to refer to node/Mash keys as strings instead of symbols
[2013-06-07 19:31:18 -0400] greenmoss: Otterley: did that finally get decided one way or another?
[2013-06-07 19:31:30 -0400] Otterley: greenmoss, it's going to take a while, sorry :D
[2013-06-07 19:31:32 -0400] greenmoss: last I checked a few months ago, that had been retracted as a best practice
[2013-06-07 19:31:36 -0400] awgross: zackf: i find it is bad to set ones that may be common, due to namespacing conflicts, but prefacing them with a name space is fine.  node['settings'] vs node['my_cookbook']['settings']
[2013-06-07 19:31:57 -0400] Otterley: greenmoss, any idea why?
[2013-06-07 19:32:42 -0400] greenmoss: I'd have to look around to find the discussion
[2013-06-07 19:32:48 -0400] greenmoss: it was in a foodcritic ticket
[2013-06-07 19:32:59 -0400] greenmoss: foodcritic used to complain about symbols, but then it stopped
[2013-06-07 19:33:03 -0400] greenmoss: IIRC
[2013-06-07 19:33:05 -0400] siezer: re recommend node[]
[2013-06-07 19:33:06 -0400] siezer: er
[2013-06-07 19:33:25 -0400] siezer: we recommend node['cookbook']['settings'] at least
[2013-06-07 19:33:40 -0400] ranjib: siezer,  +1
[2013-06-07 19:33:41 -0400] siezer: if not node['cookbook']['recipe']['settings']
[2013-06-07 19:33:49 -0400] greenmoss: https://github.com/acrmp/foodcritic/issues/86
[2013-06-07 19:33:59 -0400] Otterley: ok, then
[2013-06-07 19:34:39 -0400] Otterley: if there's no logic behind the rule, I'll let it be.  personally I think it's a good rule because it keeps your json syntax and cookbook references consistent
[2013-06-07 19:34:46 -0400] zackf: Thanks awgross
[2013-06-07 19:34:46 -0400] Otterley: but that's a weak argument
[2013-06-07 19:35:04 -0400] siezer: also, the reasoning for node['with_single']['quotes'] is because of the node['cookbook'] convention
[2013-06-07 19:35:10 -0400] siezer: for example
[2013-06-07 19:35:19 -0400] Otterley: this comment is a good one, though https://github.com/acrmp/foodcritic/issues/86#issuecomment-11723235
[2013-06-07 19:35:27 -0400] siezer: node['build-essential']['whatever'] is totally fine
[2013-06-07 19:35:29 -0400] siezer: but
[2013-06-07 19:35:45 -0400] siezer: node[:build-essential]['is_broken']
[2013-06-07 19:36:04 -0400] siezer: because you're trying to subtract an undefined variable from a non-existent symbol
[2013-06-07 19:36:28 -0400] miah: jmickle: =~ is regular expression operator
[2013-06-07 19:36:34 -0400] siezer: also they all end up as strings under the hood anyway so you're not saving any memory by using strings
[2013-06-07 19:36:37 -0400] siezer: er, symbols
[2013-06-07 19:37:14 -0400] jmickle: miah: thanks
[2013-06-07 19:37:18 -0400] Otterley: siezer, we use double-quotes instead of single quotes
[2013-06-07 19:37:26 -0400] miah: double quotes vs single quotes make no difference
[2013-06-07 19:37:38 -0400] Otterley: there's a tiny performance gain in using single quotes, but not enough to matter in a 2+ minute Chef run :D
[2013-06-07 19:37:41 -0400] greenmoss: well, there is actually a slight interpreter hit for double quotes
[2013-06-07 19:37:46 -0400] miah: double quotes just also allow string interpolation
[2013-06-07 19:38:02 -0400] miah: greenmoss: uh. if people worried about 'performance' in chef they wouldn't shellout so much
[2013-06-07 19:38:19 -0400] greenmoss: I'm not arguing for one or the other
[2013-06-07 19:38:24 -0400] greenmoss: just stating the facts :)
[2013-06-07 19:38:27 -0400] miah: true true
[2013-06-07 19:38:30 -0400] Otterley: most of our time is spent waiting on the server, especially far away, because Chef doesn't yet use a HTTP client that makes persistent connections :(
[2013-06-07 19:38:41 -0400] miah: i typically use single quotes _unless_ i am doing string interpolation
[2013-06-07 19:38:48 -0400] awgross: ^
[2013-06-07 19:38:48 -0400] gkra: miah: more ruby blocks instead of bash shellouts? :)
[2013-06-07 19:38:54 -0400] gkra: heh "shellout"
[2013-06-07 19:38:58 -0400] ranjib: miah, when you want to do the google hangout on viscera ?
[2013-06-07 19:38:59 -0400] miah: uh. i dont ruby_block much either
[2013-06-07 19:39:30 -0400] miah: ranjib: picking up daughters soonish. im free some tonight, sporatically throughout the weekend and tons next week monday/tuesday
[2013-06-07 19:39:31 -0400] ranjib: gkra, if its shellout! then why not execute resource
[2013-06-07 19:39:34 -0400] gkra: I have  one? in the cookbooks I've written so far. couldn't think of a better way at the time, and now it's in my "must refactor" backlog.
[2013-06-07 19:39:52 -0400] miah: i am a fan of writing resource providers more than recipes
[2013-06-07 19:39:55 -0400] Otterley: I have at least a few
[2013-06-07 19:40:09 -0400] Otterley: mainly to get around the delayed-compilation problem
[2013-06-07 19:40:16 -0400] miah: and if i have a way to communicate with a service via unix socket then i'll just do that rather than shellout
[2013-06-07 19:40:28 -0400] greenmoss: so anyway WRT to strings vs symbols, I will abide by whatever foodcritic says
[2013-06-07 19:40:44 -0400] gkra: Most of the recipes I'm writing for $work are role/policy recipes. Been leveraging the community cookbooks for all they're worth...
[2013-06-07 19:40:46 -0400] greenmoss: that seems to be the chef "style guide", thus a good thing
[2013-06-07 19:40:49 -0400] miah: basically, it doesnt really matter until you are doing .to_sym =)
[2013-06-07 19:41:08 -0400] miah: because if you're not careful there you could end up increasing the size of the symbol table each run
[2013-06-07 19:41:19 -0400] miah: best to --fork chef-client anyways
[2013-06-07 19:41:42 -0400] gkra: oh, is that how my chef-client ended up at 2+GB ram?
[2013-06-07 19:41:57 -0400] miah: probably
[2013-06-07 19:42:05 -0400] Otterley: we're switching to running it from cron; multiple-daemon detection is not very robust :(
[2013-06-07 19:42:23 -0400] gkra: yeah, we switched to cron here, too
[2013-06-07 19:42:34 -0400] gleam: moi aussi
[2013-06-07 19:42:38 -0400] miah: ya, they didnt fix the locking stuff until recently. but i typically just run chef-client via runit and --fork my intervals
[2013-06-07 19:43:49 -0400] Otterley: if only the runit cookbook wasn't horribly broken
[2013-06-07 19:43:58 -0400] miah: the new cookbook is better
[2013-06-07 19:44:06 -0400] miah: what brokenness are you seeing?
[2013-06-07 19:44:14 -0400] miah: there are a few issues i have with it that i need to submit fixes for
[2013-06-07 19:44:15 -0400] Otterley: log/run doesn't get updated if it already exists
[2013-06-07 19:44:22 -0400] miah: ah
[2013-06-07 19:44:30 -0400] miah: do you have a ticket filed for it?
[2013-06-07 19:45:17 -0400] gkra:  I'd be happier if there were a runit package in EPEL or something...
[2013-06-07 19:45:26 -0400] miah: you could build your own package
[2013-06-07 19:45:36 -0400] gkra: agreed.
[2013-06-07 19:45:48 -0400] awgross: does anyone know what the keysize is for the generated RSA keys for chef?
[2013-06-07 19:45:55 -0400] awgross: im thinking 1024
[2013-06-07 19:45:56 -0400] awgross: err
[2013-06-07 19:45:56 -0400] Otterley: miah, http://tickets.opscode.com/browse/COOK-2353
[2013-06-07 19:45:57 -0400] awgross: 2048
[2013-06-07 19:46:08 -0400] gkra: it's on the "backlog" list, though it'll likely get bumped as I'm goign to have to get logstash going in short order...
[2013-06-07 19:46:11 -0400] awgross: trying to fake a key for Ridley/Chef-Zero
[2013-06-07 19:46:57 -0400] miah: Otterley: cool. i'll take a look at this later. im about to go for a walk. but i have a similar issue with some permissions.
[2013-06-07 19:46:58 -0400] jkeiser: awgross: there is a sample key in chef-zero
[2013-06-07 19:47:04 -0400] Otterley: miah, great
[2013-06-07 19:47:31 -0400] miah: i use runit cookbook a bunch so i like for it to work =)
[2013-06-07 19:47:36 -0400] Otterley: I feel like there's also some regression WRT the apt provider, where why-run isn't working.
[2013-06-07 19:47:39 -0400] awgross: jkeiser: yeah, atm doing some stuff with travis, dont want to pick around in the gem to find it
[2013-06-07 19:47:44 -0400] Otterley: we've updated the Chef client, but it's still throwing errors
[2013-06-07 19:47:45 -0400] jkeiser: awgross: https://github.com/jkeiser/chef-zero/blob/master/lib/chef_zero.rb#L6
[2013-06-07 19:47:49 -0400] awgross: jkeiser: thanks for the all help recently btw
[2013-06-07 19:49:02 -0400] jkeiser: awgross: paste the private key into a .pem if you need a file
[2013-06-07 19:49:12 -0400] jkeiser: the public key there correctly pairs to it
[2013-06-07 19:49:50 -0400] awgross: jkeiser: i can, just seems silly to carry around a .pem that authenticates to nothing, esp if i need to stash it for each repo so travis doesnt complain
[2013-06-07 19:50:23 -0400] jkeiser: awgross: you might want to see if ridley can work in a no-auth mode
[2013-06-07 19:50:37 -0400] jkeiser: awgross: it's entirely possible, since berkshelf uses chef-zero for testing
[2013-06-07 19:50:54 -0400] jkeiser: awgross: Chef::Rest works in no-auth mode if you pass it nil for the key
[2013-06-07 19:51:42 -0400] awgross: unfortunately looks like it requires something for client key
[2013-06-07 19:51:50 -0400] awgross: not based off the Chef libs anyways I suppose
[2013-06-07 19:56:28 -0400] stormerider: berkshelf likely uses the knife credentials?
[2013-06-07 19:57:37 -0400] awgross: yeah
[2013-06-07 19:57:45 -0400] awgross: thats what i was using before
[2013-06-07 19:57:46 -0400] awgross: but
[2013-06-07 19:57:50 -0400] awgross: poor practice for testing
[2013-06-07 20:00:28 -0400] asharp: does the deploy resource avoid the 'authenticity of host  can't be established' check?
[2013-06-07 20:00:40 -0400] btm: @opscode cookbook code review, join: https://plus.google.com/hangouts/_/53438f01cad77a0bd25f54a59a7696253b3ce220, watch: http://youtu.be/xJlfqaGdbT4
[2013-06-07 20:14:31 -0400] rh1n0: Hi all. Ive installed chef server 11.4.4 (new install - didn't want to try and migrate our v10 server yet). I keep getting an error connecting to the new chef server via knife or the web. I have checked the processes and defaults and it should be running. Any ideas?
[2013-06-07 20:15:32 -0400] rh1n0: Im sorry - i meant chef server version 11.0.8-1
[2013-06-07 20:15:42 -0400] rh1n0: on ubuntu 12.04
[2013-06-07 20:17:13 -0400] stormerider: rh1n0: what error?
[2013-06-07 20:17:29 -0400] runfromnowhere: rh1n0: First check for me is usually "Does the OS have a firewall enabled"?
[2013-06-07 20:18:04 -0400] rh1n0: No firewall, its in amazon ec2 and i have ensured the security group has the appropriate ports open
[2013-06-07 20:18:19 -0400] stormerider: rh1n0: also bear in mind the chef 11 default is port 80, where it was different in 10
[2013-06-07 20:18:23 -0400] rh1n0: its using the same group as our v10 existing server
[2013-06-07 20:18:31 -0400] stormerider: well, 80/443
[2013-06-07 20:18:39 -0400] rh1n0: i noticed that - port 80/443 are open as well
[2013-06-07 20:18:56 -0400] stormerider: then i go back to what error :)
[2013-06-07 20:19:32 -0400] runfromnowhere: Yep, the precise error's gonna be important now :)
[2013-06-07 20:19:51 -0400] rh1n0: connection refused. First I've seen a few docs on this. Is https enabled by default or not. Should  knife be connecting to port 80 or port 4000?
[2013-06-07 20:20:22 -0400] stormerider: everything is 80/443 under 11. and yes, https is enabled by default.
[2013-06-07 20:20:35 -0400] stormerider: i think 80 might be off by default? i cant remember.
[2013-06-07 20:20:36 -0400] awgross: ahh k, figured out my Chef pem problem, forgot to use .flush on tempfile
[2013-06-07 20:21:05 -0400] stormerider: id also do a "chef-server-ctl status" and verify everything started ok
[2013-06-07 20:21:18 -0400] rh1n0: ok good to know. Im curious anyway because i live in Oklahoma near where the tornadopocalypse occurred recently. Still wondering if my cable provider network is experiencing glitches
[2013-06-07 20:21:46 -0400] rh1n0: stormerider did that a few min ago - all ok
[2013-06-07 20:22:36 -0400] rh1n0: typing says port 80 is open, as is 443
[2013-06-07 20:22:47 -0400] rh1n0: ugh - typing rather
[2013-06-07 20:23:07 -0400] rh1n0: well i didn't realize until now that textual fixes perceived misspelling errors
[2013-06-07 20:23:28 -0400] stormerider: id do a "sudo netstat -lntp | grep nginx" and verify what ports nginx is binding to
[2013-06-07 20:23:29 -0400] rh1n0: that was supposed to be "tnsping"
[2013-06-07 20:23:54 -0400] rh1n0: 80 and 443
[2013-06-07 20:24:00 -0400] rh1n0: i think its something on my end
[2013-06-07 20:24:22 -0400] stormerider: try running "chef-server-ctl tail" and see if you see anything happen when you try to hit it.
[2013-06-07 20:24:39 -0400] rh1n0: damn firefox
[2013-06-07 20:25:20 -0400] rh1n0: it works fine on chrome - i was testing on my MacBook Pro and iMac and could not hit it with firefox. Probably some broken extension
[2013-06-07 20:26:13 -0400] stormerider: or dns caching, maybe. restart and see if it works.
[2013-06-07 20:26:22 -0400] stormerider: (ff, that is.)
[2013-06-07 20:28:45 -0400] stormerider: im not sure if ff private browsing works the same as chrome incognito, but if it does, loading a private window will bypass the extensions
[2013-06-07 20:30:17 -0400] rh1n0: knife config works now. Thanks for the help!
[2013-06-07 20:32:12 -0400] rayrod2030: so I've got my my kitchen-ec2 settings in .kitchen.yml and my vagrant settings in .kitchen.local.yml.
[2013-06-07 20:32:53 -0400] rayrod2030: What's the best way to ensure that .kitchen.yml is processed by my jenkins server and thus testing on ec2 nodes while having jenkins ignore .kitchen.local.yml.
[2013-06-07 20:33:30 -0400] rayrod2030: Should I not keep .kitchen.local.yml in git and just have engineers manage their own .kitchen.local.yml?
[2013-06-07 20:34:26 -0400] siezer: yep. keep the locals out of git
[2013-06-07 20:40:25 -0400] rayrod2030: siezer: thanks
[2013-06-07 20:41:21 -0400] Otterley: jtimberman, was there some sort of regression in the apt cookbook that is causing why-run to fail again?  I'm using 1.10.0 and it's still failing on both Chef 11.4.4 and 10.24.4
[2013-06-07 20:49:22 -0400] ssd7_: Otterley: Can you post the failure to gist or pastbin?
[2013-06-07 20:49:57 -0400] Otterley: ssd7_, sent you a pm
[2013-06-07 20:50:11 -0400] ssd7_: thanks
[2013-06-07 20:53:10 -0400] asharp: at what point in the vagrant up process is it safe to edit my cookbooks?
[2013-06-07 20:54:52 -0400] siezer: after an up and between provisions
[2013-06-07 20:55:27 -0400] asharp: after the whole process is complete?
[2013-06-07 20:56:33 -0400] siezer: yea
[2013-06-07 20:56:39 -0400] asharp: alright thanks
[2013-06-07 20:56:42 -0400] falckdt: hi anyone familiar with setting up jenkins with chef?
[2013-06-07 20:57:18 -0400] [tpn]leifmadsen: sure :)
[2013-06-07 20:57:24 -0400] [tpn]leifmadsen: I used the jenkins cookbok
[2013-06-07 20:57:28 -0400] [tpn]leifmadsen: cookbook*
[2013-06-07 20:57:38 -0400] a13x212: any cookbook/examples of doing ipconfig on redhat/ubuntu
[2013-06-07 20:57:55 -0400] Otterley: what sort of ipconfig a13x212 ?
[2013-06-07 20:58:53 -0400] falckdt: can you point me to the jenkins cookbook you used? I can't seem to get it working and there are not usage instruction for https://github.com/opscode-cookbooks/jenkins
[2013-06-07 20:59:42 -0400] Otterley: ssd7, any thoughts?
[2013-06-07 20:59:51 -0400] a13x212: Otterley, changing ips, gateway, netmasks, disabling interfaces and enabling interfaces
[2013-06-07 21:00:19 -0400] Otterley: a13x212, what's the use case?  it's inherently dangerous to manipulate system interfaces with chef
[2013-06-07 21:01:09 -0400] ssd7: Otterley: So, looking at the code, I think that JIRA and the README is confusing and that this was never really fixed yet
[2013-06-07 21:01:17 -0400] ssd7: it is likely fixed on master against Chef 11 given the commits
[2013-06-07 21:01:32 -0400] Otterley: ssd7, I'm looking forward to a fix, I'll open a paid support ticket
[2013-06-07 21:01:49 -0400] Otterley: the fix for this and the directory why-run bug in chef 11 are pretty urgent for us
[2013-06-07 21:02:52 -0400] a13x212: Otterley, we use rackspace so one of the first steps we take is to disable eth0/public interface
[2013-06-07 21:03:35 -0400] a13x212: so i also need to change the default gateway
[2013-06-07 21:03:39 -0400] timsmith: is there any way to see if a cookbook file exists?  I want to copy in a file using variable for the filename, but only if it exists
[2013-06-07 21:04:15 -0400] hyperboreean: if I specify depends "java" in my metadata.rb, does it handle downloading the cookbook or I have to do it ?
[2013-06-07 21:04:17 -0400] Otterley: a13x212, if you're not extremely careful you could end up with an unreachable host
[2013-06-07 21:04:31 -0400] timsmith: depends will download it to the system
[2013-06-07 21:04:54 -0400] Otterley: but only if it's in your repo already :)
[2013-06-07 21:05:33 -0400] invsblduck: hi there, i see my server hostname sprinkled around /etc/chef-server/chef-server-running.json (eg., web_ui_fqdn), but that's NOT a fqdn...it's just a test server; how can i change this?  i don't see any documentation for it. thanks
[2013-06-07 21:05:34 -0400] hyperboreean: doesn't it default to opscode repos ?
[2013-06-07 21:05:53 -0400] invsblduck: knife cookbook upload is trying to connect to this url (based on the server hostname) and it's not resolvable.
[2013-06-07 21:05:55 -0400] Otterley: invsblduck, what does ohai say?
[2013-06-07 21:06:09 -0400] Otterley: oh, server, n/m
[2013-06-07 21:06:28 -0400] Otterley: hyperboreean, nope
[2013-06-07 21:06:51 -0400] a13x212: Otterley, understood but how would you do fully automated deployment of a new server?
[2013-06-07 21:07:25 -0400] Otterley: invsblduck, knife  have you populated /etc/chef/knife.rb ?
[2013-06-07 21:07:33 -0400] pipework: a13x212: No, he has his automatons start the deployment, but from there it's automagic.
[2013-06-07 21:07:34 -0400] invsblduck: Otterley: on the workstation? yes.
[2013-06-07 21:08:07 -0400] Otterley: a13x212, at least for us, we provision our servers with PXE and debian-installer, and as part of the OS installation process, we inject some scripts into the system that configure the interfaces at first boot, before the initial Chef run
[2013-06-07 21:08:47 -0400] invsblduck: Otterley: on the workstation, i can `knife node list', `knife client list', etc all day long.  `knife cookbook upload' results in an exception: "getaddrinfo: Name or service not known"
[2013-06-07 21:09:16 -0400] Otterley: invsblduck, how about ~/.chef/knife.rb?  any overrides there?
[2013-06-07 21:09:26 -0400] invsblduck: Otterley: when i run knife in debug mode i see it's connecting to https://foo (the unresolvable hostname of the server)
[2013-06-07 21:10:40 -0400] Otterley: a13x212, since you're on RS, check out http://docs.opscode.com/resource_ifconfig.html, but again, very risky
[2013-06-07 21:10:43 -0400] invsblduck: Otterley: i take it back, /etc/chef/knife.rb does not exist, but ~/.chef/knife.rb does.  on the workstation.
[2013-06-07 21:10:49 -0400] a13x212: Otterley, how do you re-ip a server afterwards? manually?
[2013-06-07 21:11:10 -0400] invsblduck: everybody ask Otterley questions
[2013-06-07 21:11:12 -0400] invsblduck: :P
[2013-06-07 21:11:28 -0400] Otterley: a13x212, initial IP address info is provided by DHCP, as part of the first-boot process we have a dhclient exit hook that rewrites /etc/network/interfaces and converts it to static and sets up interface bonding
[2013-06-07 21:11:43 -0400] Otterley: if we need to re-ip a host, we trash it and rebuild it
[2013-06-07 21:12:01 -0400] Otterley: but we're self-hosted, so that's rarely something we need to do
[2013-06-07 21:12:17 -0400] a13x212: Otterley, thanks i already looked at it, it only supports redhat and seems to be very buggy
[2013-06-07 21:12:39 -0400] Otterley: a13x212, not surprising - it probably is a rarely-used provider
[2013-06-07 21:12:55 -0400] spheromak: a13x212, I actually have a less buggy non commited version of that code I've been running for years :\
[2013-06-07 21:12:59 -0400] Otterley: it doesn't help that RHEL's configuration files for interfaces are way more flexible than Debian/Ubuntu's
[2013-06-07 21:13:10 -0400] spheromak: a13x212, but it is absolutely meant for redhat
[2013-06-07 21:13:38 -0400] spheromak: a13x212, you can do it on ubuntu  pretty easily as the interface files are  broken out, so a small lwrp/template can handle most of your use cases.
[2013-06-07 21:13:59 -0400] Otterley: spheromak, the interface files aren't broken out on Ubuntu; there's only /etc/network/interfaces
[2013-06-07 21:14:07 -0400] Otterley: it's challenging to parse too :(
[2013-06-07 21:14:21 -0400] Otterley: you have to declare all your interfaces in it
[2013-06-07 21:14:27 -0400] spheromak: sorry I meant its a single file
[2013-06-07 21:14:43 -0400] spheromak: you can manage it easily in a template. vs redhat. I got it  twisted in my head :D
[2013-06-07 21:15:02 -0400] spheromak: you don't parse it you just state what you want it to be with bags or attribs per-host
[2013-06-07 21:15:10 -0400] Otterley: that is true, but it does mean you have to explicitly declare each interface
[2013-06-07 21:15:15 -0400] spheromak: or use something like razor to manage that per a profile
[2013-06-07 21:15:38 -0400] spheromak: and you can use accumulator  to manage that as an LWRP for making interfaces (single file  multiple resources)
[2013-06-07 21:15:55 -0400] spheromak: https://github.com/kisoku/chef-accumulator
[2013-06-07 21:15:57 -0400] Otterley: the other issue is that if you modify it to say, remove an interface, then call ifdown(8) on that interface, it won't work
[2013-06-07 21:16:04 -0400] Otterley: you have to do it the other way around
[2013-06-07 21:16:23 -0400] Otterley: and god help you if you do bonding....
[2013-06-07 21:16:47 -0400] spheromak: why wont it work ?
[2013-06-07 21:16:55 -0400] spheromak: the run isn't depending on the network at that point
[2013-06-07 21:17:01 -0400] spheromak: you mod b4 you donw
[2013-06-07 21:17:03 -0400] spheromak: *down
[2013-06-07 21:17:06 -0400] spheromak: i getcha.
[2013-06-07 21:17:48 -0400] spheromak: Otterley, no doubt tho that the ifconfig baked in  provider could use massive work. It was one of the first ruby things I ever did :)
[2013-06-07 21:18:25 -0400] Otterley: accumulator looks interesting, wish it had documentation
[2013-06-07 21:18:41 -0400] spheromak: Otterley, https://github.com/spheromak/sysctl-cookbook/blob/master/recipes/default.rb
[2013-06-07 21:18:44 -0400] spheromak: my usage
[2013-06-07 21:18:51 -0400] spheromak: I can talk about it.
[2013-06-07 21:19:07 -0400] Otterley: very nice, spheromak
[2013-06-07 21:20:28 -0400] invsblduck: Otterley: so we don't know why `cookbook upload' command tries to connect to the wrong url (as found in /etc/chef-server/chef-server-running.json)?  is it because of that file/config on the server?
[2013-06-07 21:20:31 -0400] spheromak:  kisoku_ is usually around in here too
[2013-06-07 21:20:51 -0400] spheromak: invsblduck,  typically caused by an internal redirect
[2013-06-07 21:21:19 -0400] invsblduck: spheromak: right...so i'm wondering why that's happening. is that doc'ed anywhere?
[2013-06-07 21:21:22 -0400] spheromak: invsblduck,  what version of chef-server
[2013-06-07 21:21:49 -0400] invsblduck: chef-server_11.0.8-1.ubuntu.12.04_amd64.deb
[2013-06-07 21:21:52 -0400] Otterley: ah, yes, good point, the server is probably doing that.  you may need to edit your /etc/chef-server/chef-server.rb file and run 'chef-server-ctl reconfigure'
[2013-06-07 21:21:54 -0400] spheromak: invsblduck,  eh  The chef-server.rb config options are documented now.  I use this config https://gist.github.com/spheromak/5017833  as my server.rb
[2013-06-07 21:22:06 -0400] Otterley: see the "Load Balancer" section of http://docs.opscode.com/config_rb_chef_server.html
[2013-06-07 21:22:07 -0400] spheromak: but I belvie they fixed a bit of that so you only need 1 setting now
[2013-06-07 21:22:31 -0400] Otterley: also nginx['server_name']
[2013-06-07 21:22:44 -0400] invsblduck: great i don't even have a chef-server.rb
[2013-06-07 21:22:53 -0400] Otterley: and nginx['url
[2013-06-07 21:23:14 -0400] asharp: my deploy resources give me current, releases, and shared folders for a git repo. how do i only download the current?
[2013-06-07 21:23:15 -0400] spheromak: invsblduck, yea its not needed
[2013-06-07 21:23:19 -0400] spheromak: as it does defaults
[2013-06-07 21:23:26 -0400] spheromak: but you want to change api_fqdn
[2013-06-07 21:23:40 -0400] spheromak: IIRC that should actually drive all the other  endpoint names by default
[2013-06-07 21:23:48 -0400] invsblduck: spheromak: this is because it's 11.08 isn't it.  last time i did this was 11.04 or 11.06.
[2013-06-07 21:24:03 -0400] spheromak: invsblduck, that gist I linked was for the early chef-server  11
[2013-06-07 21:24:15 -0400] invsblduck: spheromak: thanks dude
[2013-06-07 21:24:36 -0400] spheromak: invsblduck, this is usualy cause the detected FQDN of the box during install was not the actual fqdn (like it has many interfaces or something else)
[2013-06-07 21:25:02 -0400] spheromak: so the api would respond, but bookshelf or nginx would redirect to the fqdn it detected on install/first configure
[2013-06-07 21:25:05 -0400] spheromak: make sense ?
[2013-06-07 21:25:08 -0400] invsblduck: yes
[2013-06-07 21:25:23 -0400] spheromak: there was a bug that got squashed  (a couple ) around this, but I can't remember the tickets. :D
[2013-06-07 21:25:36 -0400] spheromak: anyhow you should be able to set api_fqdn and be done with it.
[2013-06-07 21:25:40 -0400] invsblduck: except that i deployed a couple servers the same way previously (multiple interfaces, no real fqdn) and didn't have this problem.
[2013-06-07 21:25:46 -0400] spheromak: I would try that first, if not add in the other component configs
[2013-06-07 21:25:57 -0400] invsblduck: i will do that thank you.
[2013-06-07 21:26:01 -0400] spheromak: invsblduck, it will only show its head when you upload cooks
[2013-06-07 21:26:01 -0400] spheromak: :D
[2013-06-07 21:26:07 -0400] invsblduck: hehe.
[2013-06-07 21:26:09 -0400] spheromak: as the bookshelf will do a redirect
[2013-06-07 21:26:23 -0400] spheromak: and then knife/ridley will blow up trying to connect to something that doesn't exist
[2013-06-07 21:27:18 -0400] spheromak: invsblduck, that page for the config options will help :)
[2013-06-07 21:30:56 -0400] invsblduck: spheromak: turns out api_fqdn wants an actual fqdn, not an ip ;p
[2013-06-07 21:31:11 -0400] invsblduck: guess i'll need to go find a fqdn! :)
[2013-06-07 21:31:11 -0400] spheromak: hrm
[2013-06-07 21:31:21 -0400] spheromak: as a quoted string it should have worked
[2013-06-07 21:31:29 -0400] invsblduck: standby.
[2013-06-07 21:31:31 -0400] spheromak: I am almost certain I have ip only servers
[2013-06-07 21:31:45 -0400] spheromak: *in development envs*
[2013-06-07 21:32:01 -0400] spheromak: maybe not tho.
[2013-06-07 21:32:07 -0400] invsblduck: yes quoting helps.  no moar float
[2013-06-07 21:32:10 -0400] spheromak: :)
[2013-06-07 21:34:43 -0400] invsblduck: ^ forgot i was editing a ruby file `=]
[2013-06-07 21:35:17 -0400] invsblduck: ...in a flurry of flying fingers and terminals.
[2013-06-07 21:37:28 -0400] invsblduck: spheromak: had to override nginx['url']. thanks again.
[2013-06-07 21:47:37 -0400] jmickle: anyone have any idea with a knife upload would give a 400 bad response on /sandboxes?
[2013-06-07 21:57:43 -0400] jmickle: whats the command again to output a node's attributes with knife
[2013-06-07 21:57:45 -0400] jmickle: i always forget this one
[2013-06-07 21:59:38 -0400] Otterley: knife node show -Fj -l <name>
[2013-06-07 22:05:11 -0400] gkra: hey what am I doing wrong here? knife search node "network.default_gateway:a.b.c.d" returns 0 nodes, but when I ask for that property from any node, I get what I'm expecting
[2013-06-07 22:15:16 -0400] AckZ: wow.. just got bit by CHEF-4040 that is an awful bug
[2013-06-07 22:16:10 -0400] asharp: i put a symlink into /vagrant that points to a directory on my host machine. when i try to cd via that directory from the vagrant vm i get "no such file or directory"
[2013-06-07 22:25:45 -0400] gkra: so...
[2013-06-07 22:26:12 -0400] gkra: knife search node "network.default_gateway:10.0.1.2"
[2013-06-07 22:26:13 -0400] gkra: 0 results...
[2013-06-07 22:26:29 -0400] gkra: knife node <nodename> -a network.default_gateway
[2013-06-07 22:26:34 -0400] gkra: gives me 10.0.1.2
[2013-06-07 22:26:54 -0400] gkra: am I simply not grokking knife search?
[2013-06-07 22:27:09 -0400] Otterley: maybe your server needs to be reindexed?
[2013-06-07 22:27:53 -0400] gkra: there a doc on that? :)
[2013-06-07 22:28:00 -0400] rracterr: yea, how does one force an indexing?
[2013-06-07 22:28:12 -0400] Otterley: chef-server-ctl reindex
[2013-06-07 22:28:33 -0400] gkra: what breaks while it's re-indexing?
[2013-06-07 22:28:44 -0400] Otterley: for what it's worth, though, that same search isn't working for me, either
[2013-06-07 22:28:56 -0400] gkra: heh
[2013-06-07 22:30:38 -0400] Otterley: your search syntax is incorrect
[2013-06-07 22:30:50 -0400] Otterley: you want network_default_gateway
[2013-06-07 22:31:44 -0400] Otterley: http://docs.opscode.com/essentials_search.html
[2013-06-07 22:39:31 -0400] invsblduck: so apparently deleting the chef-validator.pem from /etc/chef-server and then doing a restart or a reconfigure doesn't generate a new one.
[2013-06-07 22:39:45 -0400] invsblduck: :D
[2013-06-07 22:40:09 -0400] invsblduck: winning.
[2013-06-07 22:42:33 -0400] stormerider: i think there's a different step in 11 to do that but i dont remember what offhand
[2013-06-07 22:44:05 -0400] jmickle: every time i download the ark cookbook and submit it to a chef repo i have such the greatest commit messages of "ark ark ark"
[2013-06-07 22:44:06 -0400] jmickle: haha
[2013-06-07 22:49:18 -0400] Kyle11: Anyone have an example vagrant file of launching multiple machines at the same time? (aka a sql box and an apache box)
[2013-06-07 23:13:12 -0400] ChiliMan: hello, when I use knife ec2 create  with -r "role[test]" , the chef client throws an error that "The following cookbooks are required by the client but don't exist on the server: * roles". When I logged into that server, the /etc/chef/first-boot.json contained the following json: "{"run_list":["roles"]}"
[2013-06-07 23:13:37 -0400] ChiliMan: i'm not sure why its parsing the -r option incorrectly
[2013-06-07 23:14:04 -0400] ChiliMan: everything works fine if I use -r with a recipe instead of a role
[2013-06-07 23:14:29 -0400] siezer: what's in the test role?
[2013-06-07 23:14:52 -0400] siezer: it's going to expand that role into recipes
[2013-06-07 23:15:09 -0400] ChiliMan: the the test tole there is this : "name 'test' description 'Sample role' run_list 'recipe[base]'"
[2013-06-07 23:15:40 -0400] ChiliMan: I've ran knife ec2 create with -r 'recipe[base]' and that works fine
[2013-06-07 23:15:44 -0400] siezer: hrm
[2013-06-07 23:16:01 -0400] siezer: ooOh
[2013-06-07 23:16:02 -0400] siezer: try
[2013-06-07 23:16:08 -0400] siezer: -r 'role[test]'
[2013-06-07 23:16:23 -0400] siezer: bash is expanding your double quotes and getting confused by the brackets
[2013-06-07 23:16:39 -0400] ChiliMan: ooo, ok that makes sense
[2013-06-07 23:16:47 -0400] ChiliMan: let me try that real quick
[2013-06-07 23:19:32 -0400] ChiliMan: nope, I still get the same error as before when I just use the single quote insetad of the double quote
[2013-06-07 23:20:36 -0400] siezer: does the firstboot still not say test?
[2013-06-07 23:20:40 -0400] siezer: .json
[2013-06-07 23:21:47 -0400] ChiliMan: nay, it still says this {"run_list":["roles"]}
[2013-06-07 23:22:22 -0400] siezer: super strange
[2013-06-07 23:23:10 -0400] ChiliMan: Yeah, i'm not sure where its even getting the 'roles' value from
[2013-06-07 23:37:36 -0400] rayrod2030: finally got my cookbooks testing via test-kitchen using the kitchen-ec2 driver in jenkins.  Very happy. :)
[2013-06-07 23:59:35 -0400] timsmith: how would someone go about determining if a template source file exists in a cookbook

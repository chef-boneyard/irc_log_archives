[2013-06-03 00:13:44 -0400] DevX: what would be the best way to force an apt-get update... I have a recipe that is failing right after I kick a new server
[2013-06-03 00:14:56 -0400] mross: Hi all I'm getting the following error trying to run the following command on an ubuntu 12.04 machine
[2013-06-03 00:14:59 -0400] mross: chef-solo -c /etc/chef/solo.rb -j /vagrant/services/chef_server/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz
[2013-06-03 00:15:03 -0400] mross: extconf.rb:57: Gecode not installed (RuntimeError)
[2013-06-03 00:16:11 -0400] mross: I realize that it can't find the files. libgecode-dev is installed.
[2013-06-03 00:16:43 -0400] mross: What do i need to set for the path for chef-solo to run properly. Thanks.
[2013-06-03 02:46:13 -0400] coderanger: DevX: apt cookbook
[2013-06-03 02:46:29 -0400] coderanger: remil: Please use the omnibus installers
[2013-06-03 02:46:36 -0400] coderanger: remil: Sorry, mistab
[2013-06-03 02:46:48 -0400] coderanger: Oh, because he left already, derppp
[2013-06-03 02:56:30 -0400] scalp42: hey folks, whats the difference between setting an attribute with node['java'] and lets say default['java'] (which equal to node.default['java'] if I
[2013-06-03 02:56:37 -0400] scalp42: *Im correct)
[2013-06-03 02:57:20 -0400] scalp42: I suppose its the same but just making sure, thanks in advance
[2013-06-03 03:25:47 -0400] dane_: Hello. chef-server died and I'm looking for some help restarting.  I'm getting this error: ERROR: Connection refused connecting to localhost:5984 for /chef/_design%2Fchecksums
[2013-06-03 03:26:08 -0400] dane_: ubuntu 12.04 x64, chef10
[2013-06-03 03:26:47 -0400] coderanger: dane_: couchdb isn't running
[2013-06-03 03:27:08 -0400] dane_: well.. this works: # curl -X GET http://localhost:5984/_all_dbs ["_users","chef"]
[2013-06-03 03:29:06 -0400] dane_: the next line after that error is : INFO: HTTP Request Returned 409 Conflict: conflict
[2013-06-03 03:32:13 -0400] dane_: weird.  I tried again, and the error changed to a different couchdb path: ERROR: Connection refused connecting to localhost:5984 for /chef/_design%2Fenvironments, retry 1/5
[2013-06-03 03:34:25 -0400] coderanger: dane_: Hmm, I don't think its normal for URL encoding in there
[2013-06-03 03:34:41 -0400] coderanger: but I've let my CouchDB knowledge atrophy since we no longer use it
[2013-06-03 03:36:53 -0400] dane_: also, rabbitmq-server fails to start.  related?
[2013-06-03 03:39:29 -0400] dane_: Activating RabbitMQ plugins ...  ERROR: Could not create dir /var/lib/rabbitmq/mnesia/rabbit@chef10-plugins-expand (enospc)
[2013-06-03 03:46:15 -0400] coderanger: That sounds like there is no disk space
[2013-06-03 03:46:19 -0400] coderanger: what does df -h whoe?
[2013-06-03 03:46:23 -0400] coderanger: er ,show
[2013-06-03 03:46:54 -0400] dane_: yikes.  there is no disk space
[2013-06-03 03:47:01 -0400] dane_: thanks... sorry
[2013-06-03 03:47:04 -0400] coderanger: That does bad things :)
[2013-06-03 03:52:46 -0400] jtimberman: dane_: you probably need to compact your chef-server's couchdb databases.
[2013-06-03 03:53:25 -0400] dane_: and it works again :)  thank you
[2013-06-03 03:55:32 -0400] coderanger: dane_: I would highly recommend upgrading to chef 11 server ASAP
[2013-06-03 03:55:44 -0400] coderanger: dane_: You can continue using chef 10 clients against the 11 server
[2013-06-03 03:55:50 -0400] coderanger: but its a world of difference
[2013-06-03 03:56:28 -0400] dane_: oh yeah?  I just upgraded about 3 months ago from 9... will look into chef 11
[2013-06-03 03:57:20 -0400] coderanger: dane_: Chef 11 server moves the database to postgres, and uses erlang for the API server instead of Ruby (read: way lower RAM and CPU usage)
[2013-06-03 03:57:29 -0400] coderanger: also installs and upgrades are far simpler thanks to omnibus
[2013-06-03 03:59:25 -0400] dane_: I vaguely remember something about features deprecated in 11.  would need to fix the warnings in our recipes
[2013-06-03 03:59:51 -0400] dane_: but it sounds like it's worth prioritizing
[2013-06-03 04:00:07 -0400] jtimberman: http://docs.opscode.com/breaking_changes_chef_11.html
[2013-06-03 04:00:22 -0400] coderanger: You can upgrade the client and server independently
[2013-06-03 04:00:29 -0400] coderanger: Chef 11 server is 100% compatible with Chef 10 clients
[2013-06-03 04:00:52 -0400] coderanger: Not technically true, knife reindex no longer works :)
[2013-06-03 04:01:07 -0400] coderanger: but if you are calling that from recipe code, you have some bigger problems
[2013-06-03 04:02:51 -0400] dane_: what about cloning resources?  I thought I needed to clean up the duplicate resources before moving to chef 11
[2013-06-03 04:03:24 -0400] coderanger: Thats all client related
[2013-06-03 04:03:48 -0400] dane_: for example, WARN: Cloning resource attributes for group[admin]
[2013-06-03 04:04:03 -0400] coderanger: Yes, all client related, nothing to do with the server
[2013-06-03 04:04:08 -0400] dane_: ah I see.  ok
[2013-06-03 04:04:11 -0400] coderanger: I promise you, you can upgrade :)
[2013-06-03 04:09:55 -0400] dane_: ha :)  coderanger told me to do it!  thanks very much.  signing off
[2013-06-03 05:15:15 -0400] jesdynf: Can someone point me at what I should be looking at? I've got a chef install -- generic Ubuntu install, chef from package manager, chef-solo with no special sauce, trying to run opscode-cookbooks/java.
[2013-06-03 05:15:51 -0400] jesdynf: "chef-solo --override-runlist java::oracle" gives me this odd error I don't want to spam about "cannot find a resource for converge_by"?
[2013-06-03 05:25:24 -0400] jesdynf: Oh, never mind. Searching for it with Ubuntu answered me -- it looks like the version in the repository is old and I need to install from Opscode's repo.
[2013-06-03 05:25:34 -0400] jesdynf: Geez. Okay.
[2013-06-03 06:28:38 -0400] GreatSUN: hey guys
[2013-06-03 06:28:55 -0400] GreatSUN: analyzing an error...
[2013-06-03 06:29:17 -0400] GreatSUN: Is there some special way to use a lwrp from another cookbook?
[2013-06-03 06:32:13 -0400] rahuljoshi80: I keep getting the following error when i use knife ec2. response_call': Expected(200) <=> Actual(400 Bad Request) (Excon::Errors::BadRequest)
[2013-06-03 06:32:35 -0400] rahuljoshi80: i cannot figure out why...i have been beating my head againts this for hours now...
[2013-06-03 06:33:00 -0400] rahuljoshi80: has anyone had this problem befoe?
[2013-06-03 06:35:34 -0400] flaccid: GreatSUN: depend on the cookbook in the metadata.rb
[2013-06-03 06:40:53 -0400] GreatSUN: flaccid: what do you mean? if there is a dependency?
[2013-06-03 06:40:59 -0400] GreatSUN: flaccid: it is there
[2013-06-03 06:43:39 -0400] flaccid: GreatSUN: if you depends on a cookbook in metadata then you have access to its lwrps
[2013-06-03 06:44:42 -0400] GreatSUN: flaccid: ok, thanks, then I have some problem with the lwrp itself ;-)
[2013-06-03 06:44:58 -0400] flaccid: GreatSUN: i dunno, you havnt cited errors yet..
[2013-06-03 06:50:29 -0400] GreatSUN: flaccid: just naming stuff... I should learn to read/write carefully
[2013-06-03 06:50:32 -0400] GreatSUN: ;-)
[2013-06-03 06:50:39 -0400] flaccid: hehe
[2013-06-03 06:51:28 -0400] GreatSUN: flaccid: and I already thought I might have done something wrong in general :D
[2013-06-03 06:51:58 -0400] flaccid: human error is better than a real error! at least if you find it it is
[2013-06-03 07:22:45 -0400] BryanWB: how do i set attributes on a cookbook before I have included it w/ include_recipe? this only works for me if i do  default['foo'] ||= {} ; override['foo']['bar'] = 'baz' ; include_recipe 'foo'
[2013-06-03 07:22:54 -0400] BryanWB: i would like to use set['foo']['bar'] = 'baz' but that is always wiped out once i include_recipe, an the base foo cookbook has default['foo']['bar'] = 'blah'
[2013-06-03 07:25:43 -0400] flaccid: BryanWB: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-06-03 07:29:34 -0400] ermajn: can someone help me with chef-shell, it won't load my configuration so that I can import recipes
[2013-06-03 07:29:45 -0400] ermajn: it always shows node['recipe'] = []
[2013-06-03 07:30:44 -0400] ermajn: with same configuration my chef-solo works normaly
[2013-06-03 07:46:33 -0400] ermajn: noone?
[2013-06-03 07:52:48 -0400] spox: ermajn: in client mode? are you including -z?
[2013-06-03 07:59:34 -0400] ermajn: spox, no,  -s
[2013-06-03 08:05:02 -0400] dyu: is there some convention attached to the attributes directory? like how filenames in the templates/ directory matches up to OSs or environments?
[2013-06-03 08:05:47 -0400] ermajn: spox, normally I use it on my virtual machine and I'm using just chef-solo, so no client configured
[2013-06-03 08:27:30 -0400] masterkorp: good morning everyon
[2013-06-03 08:42:49 -0400] isbaran: dyu: as far as i know, they are alphabetically included thats all
[2013-06-03 08:43:01 -0400] isbaran: included/processed*
[2013-06-03 08:43:16 -0400] dyu: isbaran: thank
[2013-06-03 08:43:22 -0400] dyu: thanks
[2013-06-03 09:32:19 -0400] houst0n: Morning folks, I've come into work this morning to find almost all my hosted chef managed nodes have not checked in in like 19 hours
[2013-06-03 09:32:32 -0400] houst0n: http://pastebin.com/mvgAkg4m
[2013-06-03 09:33:00 -0400] houst0n: Looks like the hosted chef server(s) went arse over bollocks sometime sunday morning, which has caused a whole bunch of the chef-client's to lock somehow
[2013-06-03 09:33:14 -0400] houst0n: if you strace 'em you can see they're locked waiting on some pipe fd
[2013-06-03 09:33:44 -0400] houst0n: Anyone else having issues?
[2013-06-03 09:34:14 -0400] Mez: Hi all, I've 2 questions
[2013-06-03 09:34:25 -0400] Mez: 1) How do I check if a directory exists (and do things if it does)
[2013-06-03 09:34:40 -0400] Mez: and 2) How do I run certain bits of a recipe if a package is installed ?
[2013-06-03 09:34:57 -0400] isbaran: Mez: see directory and package resources
[2013-06-03 09:35:43 -0400] Mez: isbaran: I'm aware of them, I don't know how to use them to check if they exist.  I don't want to install a package, but if it's installed on a machine, I want to do X
[2013-06-03 09:36:18 -0400] Mez: (so, in this example, if polkit is installed, I want to install special rules, but I don't want to install polkit if it's not already)
[2013-06-03 09:36:46 -0400] Mithrandir: that's generally a bad idea, but you can use a cookbook_file resource with an only_if check for the package being installed
[2013-06-03 09:37:32 -0400] Mez: Mithrandir: why is it generally a bad idea :)
[2013-06-03 09:37:43 -0400] Mez: (and I'm aware of only_if - but how would I actually do the check?)
[2013-06-03 09:37:50 -0400] Mithrandir: becomes hard to debug, for instance.
[2013-06-03 09:38:05 -0400] houst0n: Mez: because you should have a clearer idea of what your nodes are doing
[2013-06-03 09:38:25 -0400] houst0n: Mez: You should never say: IF this do this, but: do this do this. Split into sep roles if rq
[2013-06-03 09:38:26 -0400] Mithrandir: cookbook_file "/whatever" do \n only if "dpkg -l foo | grep -qs ^ii" \n end
[2013-06-03 09:38:27 -0400] Mithrandir: or somesuch
[2013-06-03 09:39:13 -0400] Mez: houst0n: in the case of ubuntu - a base server install won't install polkit, but a base desktop one will.  The recipe is to grant sudo rights...
[2013-06-03 09:39:51 -0400] houst0n: And what dmaage does installing the policy have on a machine w/o polkit? It's just a file right?
[2013-06-03 09:39:52 -0400] Mez: well, elevated privileges.
[2013-06-03 09:40:25 -0400] Mez: houst0n: Probably nothing, but the recipe broke because the directory doesn't exist :P)
[2013-06-03 09:40:26 -0400] houst0n: Or are you running some cmds also?
[2013-06-03 09:40:34 -0400] houst0n: Mef, so make the directory
[2013-06-03 09:40:37 -0400] houst0n: Keep life simple
[2013-06-03 09:40:37 -0400] houst0n: :)
[2013-06-03 09:41:11 -0400] Mez: houst0n: I never actuallty thought of that.
[2013-06-03 09:41:20 -0400] Mez: houst0n: that sounded sarcastic, but it wasnt
[2013-06-03 09:41:25 -0400] houst0n: Heh
[2013-06-03 09:41:27 -0400] houst0n: w/e
[2013-06-03 09:41:46 -0400] houst0n: Has really no one else got a bunch of totally fscked up chef-clients this morning?
[2013-06-03 09:42:10 -0400] houst0n: I find it hard to feel unique in my configuration here...
[2013-06-03 09:46:45 -0400] Mez: how are they fscked?
[2013-06-03 09:50:36 -0400] houst0n: http://pastebin.com/mvgAkg4m
[2013-06-03 09:50:48 -0400] houst0n: They're all locked on some pipe fd
[2013-06-03 09:51:12 -0400] houst0n: If I restart the chef-client, then they're fine. But there's some shitty code in there somewhere
[2013-06-03 09:51:46 -0400] Mez: that' looks like something wrong with apt.opscode.com
[2013-06-03 09:52:08 -0400] houst0n: Yeah the api went down (happens a lot)
[2013-06-03 09:52:11 -0400] Mez: api *
[2013-06-03 09:52:20 -0400] houst0n: But even after it came back, the clients are all borked
[2013-06-03 09:52:31 -0400] Mez: This is why I don't use hosted chef.
[2013-06-03 09:53:00 -0400] houst0n: Mef, I've got ahold of someone @opscode who will crack the whip and find out
[2013-06-03 09:55:00 -0400] houst0n: I cba setting up a fully redundany chef-server
[2013-06-03 09:55:05 -0400] houst0n: although it seems neither can opscode! :PP
[2013-06-03 10:03:30 -0400] ermajn: this chef-shell not loading recipes is making me crazy
[2013-06-03 10:54:41 -0400] svparijs: Hey guys i'm running into this error: ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: (null)
[2013-06-03 10:54:57 -0400] svparijs: Any of you know what i can do about this?
[2013-06-03 10:57:12 -0400] houst0n: Sure you're hitting a ssl endpoint?
[2013-06-03 10:57:46 -0400] houst0n: Or maybe you forgot to gen certs or something. First check the port is open w/ telnet/netcat/whatever, then look into ssl
[2013-06-03 10:57:54 -0400] houst0n: a simple way to test ssl: openssl s_client -connect host:port
[2013-06-03 10:58:05 -0400] houst0n: should see a cert in the output, if not then you know there's a problem
[2013-06-03 11:02:39 -0400] svparijs: ill give that a try
[2013-06-03 11:03:40 -0400] svparijs: i have a cert in the output
[2013-06-03 11:03:56 -0400] svparijs: but the cert is self generated.
[2013-06-03 11:11:12 -0400] ermajn: anyone have even idea why my chef-shell won't load cookbook? I have even go through debug and i can not get it to load.
[2013-06-03 11:11:58 -0400] willejs: anyone got iron fan working with chef 11?
[2013-06-03 11:12:01 -0400] svparijs: houst0n: thanks i had a messed up knife.rb while trying to debug this issue.
[2013-06-03 11:12:08 -0400] svparijs: houst0n: now i have this: usr/local/Cellar/ruby/1.9.3-p327/lib/ruby/1.9.1/net/http.rb:2632:in `error!': 405 "Method Not Allowed" (Net::HTTPServerException)
[2013-06-03 11:20:25 -0400] svparijs: It turns out to be this issue: http://serverfault.com/questions/476426/chef-knife-upload-cookbook-method-not-allowed
[2013-06-03 11:39:19 -0400] kechagia: what's the advantage of using chef's shellout instead of system()?
[2013-06-03 11:45:50 -0400] GreatSUN: re
[2013-06-03 11:46:23 -0400] GreatSUN: does someone of you guys have some example on how to notify a template lwrp?
[2013-06-03 11:51:25 -0400] isbaran: GreatSUN: should be same, :create template[xx] etc.
[2013-06-03 12:20:03 -0400] axyelp: my chef run always fails in a script which bootstraps it! is there anything wrong with this approach!
[2013-06-03 12:20:03 -0400] axyelp: i bootstrap the node with its hostname & hostname -i, add environments, roles and then call a
[2013-06-03 12:20:03 -0400] axyelp: chef-run -o recipe[rolename::deploy] in an immediate script. but it never completes!
[2013-06-03 13:07:10 -0400] svparijs: anyone know what this means "The page you were looking for doesn't exist. You may have mistyped the address or the page may have moved." for this url: https://10.10.0.27/sandboxes/000000000000af770882cb1a138b00c7
[2013-06-03 13:12:35 -0400] kechagia: Question: How can I create a resource like this: "#{Etc.getpwnam(user).dir}/.rc" when "user" is created during the chef-run and not available at parse-time? I'm playing around with ruby_block and stuff, but no success so far..
[2013-06-03 13:44:19 -0400] djstunami: .
[2013-06-03 14:17:00 -0400] nathanmilford: Hot drama.  It seems my chef runs are failing on some encoding error thus: https://gist.github.com/nmilford/5698431  but I am unable to locate what bit of data is choking it up.  Any advice on how to catch the bad bit of data would be appreciated.  We have a bunch of people who touch the servers, but I don't see any recent knife uploads.
[2013-06-03 14:43:38 -0400] iyp: Can anyone tell me how to re-run ohai after I set a hostname so that node['fqdn'] is updated?
[2013-06-03 14:45:02 -0400] isbaran: iyp: first google search gives you the result
[2013-06-03 14:45:10 -0400] isbaran: notifies :reload, "ohai[reload]"
[2013-06-03 14:45:27 -0400] isbaran: checkout hostname cookbook
[2013-06-03 14:50:13 -0400] axyelp: my bootstrap --sudo always fails despite the client having :ALL in its sudoers! but it works the second time around. any idea what's going wrong here?
[2013-06-03 15:00:48 -0400] iyp: isbaran: thanks!
[2013-06-03 15:03:16 -0400] quattro_: how do i define a node's ip in a role?
[2013-06-03 15:05:48 -0400] jtimberman: Mez: you can use ruby to detect if a particular directory exists, e.g., ::File.exist?("/path/to/directory") or ::File.directory?("/path/to/directory")
[2013-06-03 15:14:02 -0400] surge_: Ihttp://fnichol.github.io/knife-server/ suggests to make an AWS security group for Open Source Chef server with the following
[2013-06-03 15:14:04 -0400] surge_: TCP ports 22, 443, and 444
[2013-06-03 15:14:20 -0400] surge_: but I currently don't have 444 open (on my test instance), is that even needed anymore?
[2013-06-03 15:14:34 -0400] surge_: i was able to upload a cookbook just fine
[2013-06-03 15:15:32 -0400] isbaran: surge_: i didn't use it with 10.x server, everything was working fine but it was automatically created with knife server plugin, i thought it is used by 11.x
[2013-06-03 15:17:04 -0400] surge_: isbaran: Yeah, I installed it using the OpsCode guide and I was already halfway into it when I found the knife-server plugin.
[2013-06-03 15:17:38 -0400] isbaran: surge_: backup/restore feature is nice, other than that it looks same stuff
[2013-06-03 15:18:17 -0400] surge_: So, I ran into some issues I may not have normally seen otherwise (i.e. /etc/hostname set to ec2.internal ip addy) and then knife cookbook uploads would fail until i changed the hostname manually
[2013-06-03 15:19:05 -0400] isbaran: same happened to me just a few days ago, i was gonna look what causes this but didnt have time
[2013-06-03 15:19:30 -0400] isbaran: but its not related to port 444
[2013-06-03 15:20:40 -0400] surge_: Yeah, it seems to be only the hostname causing the issue
[2013-06-03 15:20:51 -0400] surge_: and editing /etc/hosts also looks like it may be required
[2013-06-03 15:21:07 -0400] isbaran: surge_: adding ip address for fqdn didn't fix it for me
[2013-06-03 15:21:13 -0400] surge_: that way you don't need to edit /etc/chef-server/chef-server.rb with the changes suggested here: http://tickets.opscode.com/browse/CHEF-4226
[2013-06-03 15:21:27 -0400] isbaran: had to add 127.0.1.1 chef.example.com chef
[2013-06-03 15:21:38 -0400] surge_: isbaran: oh, i used the route53 subdomain i registered, not an IP
[2013-06-03 15:22:35 -0400] surge_: I will admit I'm pretty novice, but i used this in my hosts file 127.0.0.1 chef.DOMAIN.com localhost
[2013-06-03 15:22:50 -0400] surge_: restarted the instance it worked after a reconfigure
[2013-06-03 15:22:54 -0400] surge_: and it worked*
[2013-06-03 15:23:15 -0400] isbaran: surge_: hmm, maybe i missed sth. but i also added and restarted/reconfigured and it still didnt work
[2013-06-03 15:23:31 -0400] isbaran: it worked after adding to 127.0.1.1
[2013-06-03 15:23:51 -0400] isbaran: and i got that trick from knife server plugin, it adds the dns to 127.0.1.1 line
[2013-06-03 15:24:08 -0400] isbaran: dns/name*
[2013-06-03 15:25:15 -0400] jbz: jtimberman: ping?
[2013-06-03 15:26:12 -0400] surge_: isbaran: Hm, well i'm hoping I'm not forgetting something .... I know I also passed in nginx[ssl_certificate] and a few other nginx parameters into the chef-server.rb file, but it was only nginx-related stuff there
[2013-06-03 15:26:31 -0400] surge_: isbaran: probably going to kill this instance anyway and make a new 1 using the knife-server plugin :)
[2013-06-03 15:28:38 -0400] surge_: isbaran: Btw, what size server are you using for chef server if you don't mind me asking?
[2013-06-03 15:29:16 -0400] surge_: isbaran: I was told an m1.small would be fine for up to 300 servers, jus wanted to get a 2nd opinion
[2013-06-03 15:29:18 -0400] isbaran: surge_: of course not, i thought m1.small would be enough, i'll have around 150 instances
[2013-06-03 15:29:41 -0400] isbaran: surge_: yes i think it'll be no problem
[2013-06-03 15:31:45 -0400] isbaran: anyways, changing the server is very easy, you can even start with a t1.micro if you dont expect that much instance
[2013-06-03 15:35:33 -0400] surge_: isbaran: Yeah, that was actually going to be my next google search actually... `how to change the chef-server my client uses` or something to that effect
[2013-06-03 15:37:28 -0400] isbaran: surge_: boot up new one, restore it (knife server restore .. ), change server addr in your old chef server, and it'll also have to register itself to new instance
[2013-06-03 15:38:18 -0400] isbaran: i didn't have to reregister the nodes to new chef server cause i can easily open new instances and switch to them
[2013-06-03 15:38:25 -0400] isbaran: but shouldnt be that hard
[2013-06-03 15:39:26 -0400] mwatson: has anyone else had issues with the error "No version specified, and no candidate version available for [package]"?
[2013-06-03 15:39:40 -0400] isbaran: mwatson: did you write it in your metadata.rb
[2013-06-03 15:40:16 -0400] mwatson: Yes
[2013-06-03 15:40:31 -0400] isbaran: ah sorry, i thought it was a cookbook
[2013-06-03 15:40:58 -0400] isbaran: what are you trying to install
[2013-06-03 15:41:03 -0400] mwatson: the error occurs when I'm trying to install a package
[2013-06-03 15:41:20 -0400] mwatson: well right now the cookbook supervisord
[2013-06-03 15:43:05 -0400] mwatson: I have to line "package"supervisor" in my recipe, according to the documentation I shouldn't need to specify a version
[2013-06-03 15:43:42 -0400] mwatson: and I'd rather not hard-code in a version
[2013-06-03 15:45:02 -0400] isbaran: mwatson: hm i checked the cookbook and didnt get why it errors
[2013-06-03 15:45:50 -0400] mwatson: isbarab: I used the cookbook: http://community.opscode.com/cookbooks/supervisord/source and the error occurs on line 1 of default.rb
[2013-06-03 15:46:40 -0400] mwatson: isbarab: it's like the install action doesn't know what version to choose
[2013-06-03 15:48:44 -0400] gkarekinian: Which distro are you on? Does it have a 'supervisor' package?
[2013-06-03 15:49:39 -0400] isbaran: gkarekinian: it supports debian, ubuntu
[2013-06-03 15:49:45 -0400] isbaran: package is available
[2013-06-03 15:50:01 -0400] dsteen: is there any way to get the return code for a command run via "execute"
[2013-06-03 15:50:07 -0400] isbaran: i gotto go, see you
[2013-06-03 15:50:19 -0400] mwatson: I think it's because I'm on centOS and there is no supervisor pckage for yum?
[2013-06-03 15:51:40 -0400] freezey: anyone in nyc looking for a job?
[2013-06-03 15:51:43 -0400] freezey: :)
[2013-06-03 16:02:47 -0400] ctennis: running into Forbidden errors periodically on the latest client/server install.  Seems to do with long pauses between cookbook_file calls in a recipe..do the credentials used by the client timeout after something like 5 minutes?
[2013-06-03 16:07:10 -0400] jtimberman: jbz: pong
[2013-06-03 16:12:27 -0400] jbz: jtimberman: Cheers!  quick question - I see the rsyslog cookbook has  PR which contains a feature we'd implemented on our fork of it a year or so ago (IMFILE lwrp).  Is that likely going to be accepted, do you think, or should I go ahead and reimplement that for our use in a private cookbook?
[2013-06-03 16:24:11 -0400] jtimberman: jbz: well, the thing about PRs is we don't usually look at them in detail unless they have a COOK ticket
[2013-06-03 16:24:26 -0400] jbz: ahhh
[2013-06-03 16:25:00 -0400] jbz: jtimberman: OK, so it sounds like if I want that functionality, I should go ahead and produce it on my end rather than assume it'll make it into the cookbook.  Thanks.
[2013-06-03 16:26:21 -0400] nd__: Using the ufw cookbook always cuts my ssh I wonder why is that the case?
[2013-06-03 16:26:58 -0400] nd__: It fails like this: https://gist.github.com/alappe/36d3309ae98e01f9aaa0
[2013-06-03 16:30:03 -0400] jtimberman: jbz: thats not what i'm saying :)
[2013-06-03 16:30:13 -0400] jbz: jtimberman: Ah. :)
[2013-06-03 16:36:01 -0400] nd__: And it confuses me even more that this does not happen on my local vagrant boxes
[2013-06-03 16:43:57 -0400] jtimberman: jbz: looks like the PR needs some updates per the ticket.
[2013-06-03 16:44:57 -0400] someara: anyone have an example of referencing the node object from minitest-chef?
[2013-06-03 16:45:09 -0400] jtimberman: jbz: i updated the PR to reference the ticket
[2013-06-03 16:45:21 -0400] jbz: jtimberman: cool, thanks
[2013-06-03 16:45:27 -0400] ismell: if i have my chef-repo with a bunch of my cookbooks, can I have berksfile upload those to the chef server for me?
[2013-06-03 16:46:28 -0400] nd__: ismell: berks upload cookbookname
[2013-06-03 16:46:42 -0400] ismell: oh, that will search in my cookbooks folder?
[2013-06-03 16:47:14 -0400] jtimberman: someara: see the rabbitmq cookbook's tests
[2013-06-03 16:47:47 -0400] nd__: Clues what I miss with the firewall? I understand that it opens ssh by default right? My role includes both recipe[ufw] and recipe[firewall]
[2013-06-03 16:47:56 -0400] nd__: ismell: This should search in your berkshelf
[2013-06-03 17:14:40 -0400] Otterley: is anyone using Chef to manage XenServer hosts?
[2013-06-03 17:15:26 -0400] Otterley: dom0 looks very similar to a RHEL 5 host
[2013-06-03 17:17:52 -0400] gazarsgo: if i wanted to consume a community cookbook where would i begin ?
[2013-06-03 17:21:05 -0400] Otterley: what do you mean "consume" ?
[2013-06-03 17:21:13 -0400] gazarsgo: i don't know how dependencies work in chef yet
[2013-06-03 17:21:23 -0400] gazarsgo: so i want to use a community cookbook in a role of mine
[2013-06-03 17:22:01 -0400] gazarsgo: i assume i can't just drop it into my run list .. ?
[2013-06-03 17:22:12 -0400] jbz: gazarsgo: You would need to download the community cookbook and upload it to your chef server or hosted chef org
[2013-06-03 17:22:51 -0400] jbz: As far as I know, auto dep mgmt a la Berkshelf is available for local testing environments, but not at the server level.  Yet?
[2013-06-03 17:23:35 -0400] gazarsgo: so i can't chef my chef yet ?
[2013-06-03 17:24:14 -0400] Otterley: gazarsgo, you need to declare the dependency on the community cookbook in the metadata for your dependent cookbook, then upload the community cookbook to your chef server
[2013-06-03 17:24:30 -0400] jbz: right, what Otterley said. :-)
[2013-06-03 17:24:32 -0400] Otterley: knife will upload the community cookbook for you
[2013-06-03 17:25:12 -0400] gazarsgo: yeah that's my question though, what does "declare my dependency" look like or mean? just include_recipe ?
[2013-06-03 17:27:11 -0400] Otterley: gazarsgo: there's documentation for metadata.rb explaining it
[2013-06-03 17:27:18 -0400] gazarsgo: oh, metadata is an actual file, ok
[2013-06-03 17:27:25 -0400] Otterley: gazarsgo, have you read all the documentation on creating cookbooks?
[2013-06-03 17:28:04 -0400] gazarsgo: i am still learning, so i'm not even sure what 'all the docs' means in this context.  i've read the definitions for script/file/directory
[2013-06-03 17:30:18 -0400] HAPPYFUNBRO: how do you move directories with chef?
[2013-06-03 17:30:54 -0400] jbz: You don'tthat's an imperative rather than idempotent actionat least as far as I know
[2013-06-03 17:31:10 -0400] jbz: If you absolutely need to move stuff, you can do it in a code block
[2013-06-03 17:31:18 -0400] jbz: and have idempotent triggers for it
[2013-06-03 17:31:20 -0400] HAPPYFUNBRO: how about "copy"
[2013-06-03 17:31:26 -0400] HAPPYFUNBRO: *copying
[2013-06-03 17:31:29 -0400] jbz: again...heh
[2013-06-03 17:31:33 -0400] jbz: If I had to do that
[2013-06-03 17:31:34 -0400] prefix: hm
[2013-06-03 17:31:35 -0400] coderanger: HAPPYFUNBRO: execute "mv what ever"
[2013-06-03 17:31:59 -0400] coderanger: Just setup your not_if/only_if carefully
[2013-06-03 17:32:02 -0400] jbz: I'd do what coderanger said, and have only_if or not_if statements iwth it
[2013-06-03 17:32:10 -0400] prefix: interesting
[2013-06-03 17:32:10 -0400] prefix: ok
[2013-06-03 17:33:43 -0400] prefix: coderanger how about remote_directory?
[2013-06-03 17:34:20 -0400] coderanger: prefix: That is related to copying content from the cookbook onto the target system
[2013-06-03 17:34:35 -0400] prefix: ok
[2013-06-03 17:34:43 -0400] coderanger: file : cookbook_file :: directory : remote_directory
[2013-06-03 17:35:22 -0400] prefix: so I just need to write some inline ruby code (inline = in my recipe) to copy a file locally if necessary?
[2013-06-03 17:35:37 -0400] coderanger: No? Just execute mv or cp
[2013-06-03 17:35:57 -0400] coderanger: I mean there are advantages to doing it in ruby code, but you don't have to :)
[2013-06-03 17:48:11 -0400] ateetor: When I do a knife bootstrapo command with -VV it gets to the error messag "ipadress: This service is prohibited" and then it gets stuck
[2013-06-03 17:48:23 -0400] ateetor: would anyone happen to know the fix?
[2013-06-03 17:50:18 -0400] ateetor: i'm about to just try going the route of running chef-solo commands over ssh instead of using hosted chef TT
[2013-06-03 17:56:36 -0400] ismell: so if i have a chef-repo and I have all my custom cookbooks in there, is it proper to have each cookbook have it's oen Berksfile?
[2013-06-03 17:56:40 -0400] knuckolls: atteetor: knife-solo may be helpful in that case
[2013-06-03 17:57:06 -0400] knuckolls: ismell: i ended up breaking out all my cookbooks into one repo per cookbook, but there's no reason each cookbook shouldn't have a berksfile whether or not it's broken out like that
[2013-06-03 17:57:44 -0400] ismell: k, that solves some confusion
[2013-06-03 17:57:51 -0400] ismell: I had the Berksfile at the root of myh chef-repo
[2013-06-03 17:57:58 -0400] ismell: but that was confusing me
[2013-06-03 17:58:00 -0400] knuckolls: ateetor: ^^ spelled your name wrong.
[2013-06-03 17:59:03 -0400] ateetor: knuckolls: what would I gain from knife solo? I have succesfully run chef scripts with just chef-solo before
[2013-06-03 17:59:34 -0400] Otterley: "knife solo" ?  what is that?
[2013-06-03 17:59:50 -0400] bean: https://github.com/matschaffer/knife-solo
[2013-06-03 17:59:53 -0400] bean: knife solo
[2013-06-03 18:00:16 -0400] Otterley: thx
[2013-06-03 18:02:24 -0400] ateetor: knife-solo doesn't sound useful though... you can run chef scripts from chef-solo fine
[2013-06-03 18:03:35 -0400] bubu: hey guys, anyone here use the retryable gem with chef recipe? am trying this: https://gist.github.com/anonymous/c7caf131f8456cdb235c
[2013-06-03 18:03:57 -0400] bubu: but chef still blows up as the sql query can't be run straight away
[2013-06-03 18:04:12 -0400] bubu: want it to try, when receives the Mixlib error, try again etc but its not doing so
[2013-06-03 18:07:39 -0400] bubu: jtimberman: any ideas? sorry to be a pain
[2013-06-03 18:16:43 -0400] pmariani: Hi. I am using chef-solo and librarian-chef to manage community cookbooks, and have my own cookbooks in a different directory. Community cookbooks aren't tracked in SVC, but mine are.
[2013-06-03 18:16:43 -0400] pmariani: I am using the community cookbook 'mysql'. To do so, I need to specify node['mysql']['server_root_password'], among other things.
[2013-06-03 18:16:43 -0400] pmariani: I'd like to manage this password using an encrypted data bag.
[2013-06-03 18:16:43 -0400] pmariani: How do I set the node['mysql']['server_root_password'] to the actual value without having to modify the 'mysql' cookbook?
[2013-06-03 18:16:44 -0400] pmariani: Should I create a custom cookbook to read the value out of the data_bag and use it to set node['mysql']['server_root_password'], or is there a pattern to follow?
[2013-06-03 18:26:05 -0400] ismell: knuckolls: so do you have a chef-repo that some how references all your other cookbooks?
[2013-06-03 18:28:06 -0400] aramus: When you use the "log" resource, where is the log actually located?
[2013-06-03 18:29:14 -0400] jbz: Depends on the chef-client settings
[2013-06-03 18:29:20 -0400] jbz: aramus: ^^
[2013-06-03 18:29:39 -0400] aramus: I see, where is the setting that specifies where the logs are>
[2013-06-03 18:29:41 -0400] aramus: ?*
[2013-06-03 18:29:56 -0400] jbz: aramus: Are you using chef-client on *ux?
[2013-06-03 18:30:04 -0400] aramus: RHEL 6
[2013-06-03 18:30:39 -0400] jbz: OK there should be a client.rb file
[2013-06-03 18:30:50 -0400] jbz: http://docs.opscode.com/config_rb_client.html
[2013-06-03 18:30:57 -0400] jbz: has log_location and log_level
[2013-06-03 18:31:24 -0400] jbz: (generally found at /etc/chef/client.rb)
[2013-06-03 18:31:40 -0400] aramus: Okay, if I have not set them et, would they have any default location?
[2013-06-03 18:31:44 -0400] aramus: yet*
[2013-06-03 18:32:17 -0400] coderanger: Does anyone have the link to the formal erb docs?
[2013-06-03 18:32:22 -0400] coderanger: I can never find the blasted things
[2013-06-03 18:33:06 -0400] josephholsten: erubis docs: http://www.kuwata-lab.com/erubis/users-guide.html
[2013-06-03 18:33:55 -0400] coderanger: Do we actually use erbuis?
[2013-06-03 18:34:02 -0400] coderanger: Not sure which impl we are on
[2013-06-03 18:34:16 -0400] Cope: pretty sure it is
[2013-06-03 18:34:35 -0400] josephholsten: I hope so
[2013-06-03 18:34:41 -0400] coderanger: Ahh yeah, it is
[2013-06-03 18:34:53 -0400] coderanger: Thanky :)
[2013-06-03 18:35:11 -0400] coderanger: Trying to add some nice examples to the new starter kit content
[2013-06-03 18:35:50 -0400] jmartin: coderanger: starter kit?
[2013-06-03 18:35:52 -0400] josephholsten: the only things I ever need there are how <%=  -%> and <%%  %> work: http://www.kuwata-lab.com/erubis/users-guide.06.html#topics-trimspaces
[2013-06-03 18:36:12 -0400] jbz: aramus: Hm, check /var/log/chef-client.log
[2013-06-03 18:36:46 -0400] aramus: Oh, it is there, thank you very much!
[2013-06-03 18:37:05 -0400] jbz: yw!
[2013-06-03 18:38:53 -0400] prefix: yo look at that crazy motherfucker aramus
[2013-06-03 18:38:55 -0400] coderanger: I know Ruby itself has a syntax doc for erb, but it is ungoogleable >_<
[2013-06-03 18:39:34 -0400] madteckhead: Help!
[2013-06-03 18:39:40 -0400] madteckhead: :)
[2013-06-03 18:39:49 -0400] madteckhead: Not really, I just need some advice.
[2013-06-03 18:40:08 -0400] prefix: how would I run a resource inside of another resource? specifically, how would I run "log" inside of something like "mount?"
[2013-06-03 18:40:27 -0400] josephholsten: madteckhead: add chocolate or avocado. makes everything better.
[2013-06-03 18:41:08 -0400] josephholsten: prefix: that's not quite how things work. you could write a logging_mount lwrp that does both though.
[2013-06-03 18:41:20 -0400] madteckhead: Josephholsten: im more of a butter guy
[2013-06-03 18:41:33 -0400] madteckhead: I'm not sure what this means and how to debug it
[2013-06-03 18:41:34 -0400] madteckhead: FATAL: Chef::Mixin::Template::TemplateError: Undefined node attribute or method `<=>' on `node'
[2013-06-03 18:41:35 -0400] prefix: oh boy
[2013-06-03 18:42:12 -0400] madteckhead: its been working in production for ages, but setting up a new instance and hit that snag.
[2013-06-03 18:42:21 -0400] josephholsten: madteckhead: that means something is trying to sort nodes. sort uses the <=> (comparison, aka spaceship) operator internally
[2013-06-03 18:42:42 -0400] madteckhead: and you can't sort nodes?
[2013-06-03 18:43:11 -0400] josephholsten: I don't really know what that would mean.
[2013-06-03 18:43:15 -0400] Cope: Anything that mixes in Comparable can be sorted :)
[2013-06-03 18:44:35 -0400] josephholsten: Cope: assuming it's already got the #<=>() method defined ;-)
[2013-06-03 18:44:41 -0400] madteckhead: was there some internal change in chef that would cause this? everything in pinned, so im not sure where the change was introduced.
[2013-06-03 18:44:46 -0400] madteckhead: https://github.com/efficiency20/opscode-cookbooks/blob/master/munin/templates/default/munin-node.conf.erb#L39
[2013-06-03 18:44:52 -0400] Cope: madteckhead: but i'd guess on a typo somewhere; as usual some context woudl help - ah there we go
[2013-06-03 18:45:00 -0400] Cope: josephholsten: indeed
[2013-06-03 18:45:01 -0400] prefix: so what's the appropriate way to log stuff then?
[2013-06-03 18:45:32 -0400] madteckhead: cope: ubuntu 12.04, chef 11.4.0
[2013-06-03 18:45:34 -0400] Sony_: ERROR: RbVmomi::Fault: NicSettingMismatch: fault.NicSettingMismatch.summary
[2013-06-03 18:45:47 -0400] Sony_: have anybody come across this error ?
[2013-06-03 18:45:54 -0400] Sony_: while trying to clone from a template
[2013-06-03 18:46:12 -0400] josephholsten: prefix: use a log resource, then the mount resource. I'm guessing you know this, and are asking me something specific I'm not grokking
[2013-06-03 18:46:26 -0400] madteckhead: okay, nevermind
[2013-06-03 18:46:33 -0400] Cope: madteckhead: hmm?
[2013-06-03 18:46:34 -0400] madteckhead: my template is out of date
[2013-06-03 18:46:54 -0400] josephholsten: madteckhead: I love it when that happens
[2013-06-03 18:46:55 -0400] madteckhead: what really bugs me is I have no idea how this was introduced
[2013-06-03 18:47:32 -0400] coderanger: Sony_: That doesn't sound like something from Chef
[2013-06-03 18:47:38 -0400] madteckhead: I must be missing something, configuration management, that misses some configuration options seems to be what i have
[2013-06-03 18:47:41 -0400] josephholsten: madteckhead: git blame?
[2013-06-03 18:48:45 -0400] madteckhead: I'm not a ruby guy, but i try - and i guess i feel some frustration that every few months when i rerun some chef stuff to provision a new server some how changes have been introduced that cause things to fail
[2013-06-03 18:49:12 -0400] Sony_: yes it is.. reason being I am able to clone from gui, without modifying any settings
[2013-06-03 18:49:12 -0400] madteckhead: in mysterious ways i am willing to correct the errors of my ways, but am not sure exactly where I am going wrong?
[2013-06-03 18:49:46 -0400] madteckhead: should i be doing integration testing, automated and more frequently?
[2013-06-03 18:50:00 -0400] mattupstate: curiousif i have multiple `notifies ` directives on a lwrp, is there any guarantee of the order they will be executed given the same timing parameter?
[2013-06-03 18:50:39 -0400] madteckhead: any pointers greatly appreciated
[2013-06-03 18:50:51 -0400] Cope: madteckhead: do you run chef often?
[2013-06-03 18:51:02 -0400] gsymons-di: mattupstate: They are ordered in the order they are in the declaration... not sure if that's guaranteed, though.
[2013-06-03 18:51:23 -0400] madteckhead: yes, but i find that provising a new server and running chef seem to produce different results .
[2013-06-03 18:51:35 -0400] madteckhead: *provisioning
[2013-06-03 18:51:42 -0400] prefix: Okay, thanks for that josephholsten. Are there any specific chef conventions for the name in log?
[2013-06-03 18:51:54 -0400] prefix: so for example.
[2013-06-03 18:52:10 -0400] prefix: log "hello" do message "hello world" end
[2013-06-03 18:52:20 -0400] prefix: should the name match the message or...?
[2013-06-03 18:52:37 -0400] madteckhead: I ended up setting up a vagrant based node, locally for staging - that introduces another step in picking up bugs before they get close to production
[2013-06-03 18:52:47 -0400] josephholsten: prefix: I tend to just use the name, I thought the message was optional
[2013-06-03 18:53:03 -0400] mattupstate: gsymons-di: ok, i noticed in one of my chef-client runs that the 2nd notifies was run before the first, and in theory they had to execute in my specified order, but everything seemed to work out fine oddly
[2013-06-03 18:53:25 -0400] madteckhead: but I guess i need to provision entire new (vagrant) boxes often to pick up all the bugs.
[2013-06-03 18:53:40 -0400] defishguy: Aplogoies for what will amount to an obvious queston... it's just not my day I guess.  What is the syntax to rev a cookbook version before uploading?
[2013-06-03 18:54:12 -0400] madteckhead: back in an hour - just have to relocate - thanks for the help guys
[2013-06-03 18:58:45 -0400] prefix: So would this log "Creating /mnt/saasinstall" if the directory /mnt/saasinstall does not exist? http://pastebin.com/4FpsJCDb
[2013-06-03 19:03:04 -0400] btm: @opscode #opschef code review now, join: https://plus.google.com/hangouts/_/5dff4a3b0ce95814798add3d35c4ecfc89767e40, watch: http://youtu.be/HOQHusecN_U
[2013-06-03 19:06:33 -0400] prefix: what happens if a directory exists when I use "directory" to create a directory
[2013-06-03 19:07:17 -0400] prefix: nevermind
[2013-06-03 19:07:24 -0400] prefix: rtfm etc
[2013-06-03 19:07:54 -0400] awgross: is it possible to use knife without a configuration file
[2013-06-03 19:08:03 -0400] awgross: debating the best way to push data up to Chef Zero
[2013-06-03 19:08:13 -0400] awgross: id prefer to not have to create a fake config file just for that
[2013-06-03 19:13:14 -0400] knuckolls: ismell: i tend to believe that you should have a chef-repo with all your things like environments and databags and access controls and other little chef exec scripts, but that cookbooks get their own repo
[2013-06-03 19:13:34 -0400] knuckolls: ismell: if you want an inventory of them in some manner, you can build that out with spiceweasel or perhaps knife-whisk
[2013-06-03 19:13:37 -0400] ismell: https://github.com/RiotGames/berkshelf/issues/535 this is a nice thread on what iw as asking
[2013-06-03 19:14:27 -0400] knuckolls: yep i used to use librarian, now i frankly don't see a need for it
[2013-06-03 19:14:52 -0400] knuckolls: each cookbook manages it's dependencies, and if i hack on a cookbook when i release a new version i make sure everything's uploaded and upgraded properly
[2013-06-03 19:15:09 -0400] knuckolls: pin things to specific upstream versions in the metadata.rb file
[2013-06-03 19:15:15 -0400] knuckolls: ismell: ^^
[2013-06-03 19:20:02 -0400] lehrblogger: Hi, I've been using Chef::Util::FileEdit's insert_line_if_no_match, but it started to fail with "ArgumentError: invalid byte sequence in US-ASCII" when the file previously contained unicode characters such as "".
[2013-06-03 19:20:06 -0400] lehrblogger: I'm using 10.16.4, but it doesn't seem like the file in question has changed recently: https://github.com/opscode/chef/blob/master/lib/chef/util/file_edit.rb#L71-L73
[2013-06-03 19:20:27 -0400] lehrblogger: I could avoid using unicode in that file altogether, but perhaps there's a better solution?
[2013-06-03 19:20:44 -0400] awgross: lehrblogger: not an option to template the whole file?
[2013-06-03 19:20:55 -0400] ismell: thanks for the clarification
[2013-06-03 19:21:24 -0400] lehrblogger: awgross: it's my .bash_history, i just want to pre-populate it with commonly used commands
[2013-06-03 19:21:40 -0400] lehrblogger: but would rather not clear it every time chef runs
[2013-06-03 19:22:11 -0400] awgross: ic
[2013-06-03 19:25:09 -0400] awgross: hmm, alternatively
[2013-06-03 19:25:24 -0400] awgross: is it possible to force Berkshelf to use a specific config file?
[2013-06-03 19:25:29 -0400] awgross: i can have one for Chef Zero
[2013-06-03 19:25:33 -0400] awgross: and one for my regular Chef zerver
[2013-06-03 19:31:00 -0400] gazarsgo: argh, this sudo cookbook isn't picking up the passwordless option and keeps borking my nodes :(
[2013-06-03 19:31:55 -0400] scalp42: awgross: berks configure --path ./.berkshelf/config.json
[2013-06-03 19:32:09 -0400] awgross: scalp42: cool, thanks
[2013-06-03 19:32:17 -0400] scalp42: might do the trick
[2013-06-03 19:32:31 -0400] scalp42: configure path config-whatever.json
[2013-06-03 19:32:43 -0400] awgross: yeah i can pass -c
[2013-06-03 19:32:47 -0400] awgross: to use a specific file
[2013-06-03 19:47:59 -0400] ianco: in an after_created def in my resource, i want to check if either param a or b has been provided, but not both or neither
[2013-06-03 19:48:03 -0400] ianco: im using something like: raise 'either a or b, dude' if self.a && self.b
[2013-06-03 19:48:22 -0400] ianco: but that doesnt seem to cut the mustard for neither are supplied
[2013-06-03 19:48:41 -0400] ianco: anyone handling something like this in a nice way?
[2013-06-03 19:49:42 -0400] madteckhead: how does not_if work? i don't want to install lessc unless lessc doesn't exist
[2013-06-03 19:50:02 -0400] madteckhead: when i use it i get a had an error: Errno::ENOENT: No such file or directory
[2013-06-03 19:50:35 -0400] madteckhead: am i misunderstanding not_if?
[2013-06-03 19:52:25 -0400] mattupstate: madteckhead: depends
[2013-06-03 19:52:34 -0400] mattupstate: what's the condition in your not_if directive
[2013-06-03 19:54:18 -0400] madteckhead: execute "install lesscss" do
[2013-06-03 19:54:18 -0400] madteckhead:   command "sudo npm install less -g"
[2013-06-03 19:54:19 -0400] madteckhead:   not_if "lessc"
[2013-06-03 19:54:19 -0400] madteckhead: end
[2013-06-03 19:54:43 -0400] madteckhead: shoudl it be: test -f lessc
[2013-06-03 19:56:46 -0400] mattupstate: madteckhead: i prefer to use plain ruby
[2013-06-03 19:56:50 -0400] mattupstate: http://docs.opscode.com/resource_common_conditionals.html
[2013-06-03 19:57:07 -0400] aramus: Is it possible to mount an ISO in chef?
[2013-06-03 19:57:21 -0400] madteckhead: mattupstate, thanks
[2013-06-03 19:57:41 -0400] madteckhead: what does it look like in plain ruby
[2013-06-03 19:58:19 -0400] mattupstate: look at the exaples
[2013-06-03 19:58:22 -0400] cspicy: aramus: yes, see the mount resource here: http://docs.opscode.com/resource_mount.html
[2013-06-03 19:58:35 -0400] mattupstate: { ::File.exsits?('/path/to/file') }
[2013-06-03 19:58:47 -0400] mattupstate: i'm awful at typing today
[2013-06-03 19:58:50 -0400] madteckhead: so those examples are plain ruby? - i thought that was using chef DSL
[2013-06-03 19:58:56 -0400] aramus: Yeah, I looked at it but it did not have a specific example for iso
[2013-06-03 19:59:02 -0400] aramus: Are isos a :label or a :device?
[2013-06-03 19:59:32 -0400] cspicy: the path would be a device
[2013-06-03 20:00:17 -0400] madteckhead: ahh i see, it shows both ways
[2013-06-03 20:00:24 -0400] aramus: Oh, okay, thanks!
[2013-06-03 20:00:37 -0400] nicgrayson: are there any docs for working with encrypted data bags in chefspec? do i need to mock the data or can i pull from a local dir?
[2013-06-03 20:00:39 -0400] madteckhead: aramus: sorry i was not talking to you
[2013-06-03 20:03:04 -0400] surge_: The nagios cookbook is giving me Error executing action `install` on resource 'package[nagios3]'
[2013-06-03 20:03:10 -0400] surge_: typically that arises from apt-get update not running
[2013-06-03 20:03:16 -0400] surge_: but i ran it manually, and it's still failing
[2013-06-03 20:03:31 -0400] surge_: Not sure how to go about fixing that
[2013-06-03 20:05:56 -0400] btm: @opscode cookbook code review now: join: https://plus.google.com/hangouts/_/6c1a9fe70dd2001429e997d7dbc8752f3f58a52a, watch: http://youtu.be/RXGXz9e0bi4
[2013-06-03 20:06:01 -0400] surge_: Chef::Exceptions::Exec >>>> apt-get -q -y install nagios-nrpe-plugin=2.12-5ubuntu1.1 returned 100, expected 0
[2013-06-03 20:09:01 -0400] teukka: surge_: run that command manually (with sudo or as root) on the node to see what's the problem
[2013-06-03 20:10:27 -0400] mattupstate: surge_: when apt-get returns 100 it means many things, but usually there's a network error
[2013-06-03 20:11:32 -0400] surge_: Oh I see, something is amiss in Apache
[2013-06-03 20:11:38 -0400] madteckhead: for the logs this was my solution: not_if "type -a lessc /dev/null 2>&1"
[2013-06-03 20:13:49 -0400] bytheway: anyone figured out how best to chefspec test a recipe that uses an lwrp?
[2013-06-03 20:13:56 -0400] bytheway: does it require a custom matcher to be added?
[2013-06-03 20:14:25 -0400] bytheway: I'm not necessarily wanting to test the lwrp, but a recipe that uses one
[2013-06-03 20:14:41 -0400] thatothermitch: are cookbook libraries available to ALL cookbooks or just the cookbook that they are defined in?
[2013-06-03 20:14:49 -0400] shane___: is there a way to use a node's status in a regex with knife
[2013-06-03 20:15:00 -0400] shane___: i.e. delete nodes that have not checked in for >1 day
[2013-06-03 20:22:24 -0400] nicgrayson: bytheway: did you try step_into: => lwrp_name?
[2013-06-03 20:22:40 -0400] awgross: is it possible to have Vagrant endpoints on your host? I want to run Chef Zero on host machine and have Vagrant reach out to it
[2013-06-03 20:22:51 -0400] nicgrayson: thatothermitch: are you talking about cb_name/libraries?
[2013-06-03 20:22:52 -0400] awgross: without doing something silly with etc hosts and domain names
[2013-06-03 20:22:58 -0400] s2r2: shane___: if you can search for them, you could pipe them into `xargs knife node delete -y`
[2013-06-03 20:23:10 -0400] bytheway: nicgrayson: yes but I'm not wanting to step into it, just ensure it is included
[2013-06-03 20:23:32 -0400] bytheway: actually, my issue is slightly more complex, because what I'm actually doing is testing an lwrp that includes and uses another lwrp
[2013-06-03 20:23:33 -0400] thatothermitch: Is there a supported way of using "search" from a namespaced library? For example, if I want to use "MyLib.method_that_searches" to invoke it.
[2013-06-03 20:23:51 -0400] bytheway: so, I've already stepped into the first one
[2013-06-03 20:24:09 -0400] nicgrayson: bytheway: i'm working on the same issue haven't found a clean solution
[2013-06-03 20:24:12 -0400] thatothermitch: docs suggest this should be defined as a class / module method (i.e. def self.method_that_searches)
[2013-06-03 20:25:21 -0400] bytheway: nicgrayson: be nice if there was a sort of method_missing for the matchers that could be used for generic resources
[2013-06-03 20:26:22 -0400] awgross: thatothermitch: you can, you need to make them a singleton
[2013-06-03 20:26:53 -0400] awgross: thatothermitch: mode MyLib self.method_that_searches() blah end
[2013-06-03 20:29:09 -0400] thatothermitch: awgross: thanks for the response. i'm not sure i understand. FWIW i have the library itself working -- it's interfacing with the recipe DSL (just the search method in this case) that is proving more challenging
[2013-06-03 20:29:42 -0400] thatothermitch: (library is working isofar as i can call MyLib.method_that_searches and the right code runs
[2013-06-03 20:29:42 -0400] thatothermitch: )
[2013-06-03 20:30:07 -0400] rracterr: any chance there is a RHEL4 port of the chef client someplace?
[2013-06-03 20:30:31 -0400] thatothermitch: nicgrayson: sorry, didn't see your response. yes, i am talking about cb_name/libraries
[2013-06-03 20:30:39 -0400] awgross: thatothermitch: can you give me an example of you using this?
[2013-06-03 20:30:44 -0400] rracterr: Linux build02.dev.prognet.com 2.6.9-34.ELsmp #1 SMP Wed Mar 8 00:27:03 CST 2006 i686 i686 i386 GNU/Linux   is coming up with no package
[2013-06-03 20:31:45 -0400] rracterr: wait, centos 4.3 hmm
[2013-06-03 20:32:30 -0400] rracterr: ok, new question, any chance a port exists that should run on centos 4.3
[2013-06-03 20:33:01 -0400] thatothermitch: awgross: roger that. assembling now
[2013-06-03 20:34:48 -0400] thatothermitch: awgross: https://gist.github.com/thatothermitch/2a0a652ef3908e94883b
[2013-06-03 20:35:52 -0400] thatothermitch: main fear is that Chef::Search::Query is likely to change / move in future versions
[2013-06-03 20:36:35 -0400] awgross: its pretty stable
[2013-06-03 20:36:38 -0400] awgross: thats how I access it
[2013-06-03 20:37:26 -0400] thatothermitch: sure, seems like the only way
[2013-06-03 20:37:43 -0400] awgross: thatothermitch: i just added a comment with my "pattern"
[2013-06-03 20:38:03 -0400] thatothermitch: ah, right
[2013-06-03 20:38:37 -0400] thatothermitch: i could probably provide a library in a more fundamental package to smooth over that behavior
[2013-06-03 20:38:45 -0400] thatothermitch: er sorry more fundamental cookbook*
[2013-06-03 20:38:49 -0400] awgross: perhaps
[2013-06-03 20:38:58 -0400] awgross: it matches up pretty clsoe to the knife syntax
[2013-06-03 20:39:49 -0400] thatothermitch: oh yeah, it's just that  Chef::Search::Query.new tries to read a PEM file that won't exist at test time.
[2013-06-03 20:40:34 -0400] thatothermitch: really my goal here was to try and find a way of stubbing Chef::Search::Query#search
[2013-06-03 20:40:42 -0400] thatothermitch: but thanks, you've given me a few ideas
[2013-06-03 21:04:22 -0400] timsmith: is there any sort of clear recommendation for how people would go about upgrading their omnibus chef clients?
[2013-06-03 21:07:16 -0400] xmltok: whats the recommended way to copy a string and do a character replacement inside of a cookbook?
[2013-06-03 21:07:44 -0400] xmltok: its part of a definition, i need to take a filename and remove /'s so that i can use it as a unique string for the definition
[2013-06-03 21:08:18 -0400] awgross: gsub?
[2013-06-03 21:08:24 -0400] miah: foo = filename.split('/)[0]
[2013-06-03 21:08:32 -0400] miah: er, missing trailing '
[2013-06-03 21:10:03 -0400] miah: i try to avoid using a full string as a filename with directories though and use ::File.join
[2013-06-03 21:19:54 -0400] xmltok: i've tried using gsub inside of an assignment but it modifies the original string too
[2013-06-03 21:20:21 -0400] xmltok: see here, http://pastebin.com/E5dLTT2t. it ends up with :file also being modified
[2013-06-03 21:20:25 -0400] adnichols: I seem to have a chicken & egg problem where chef_gem is installing a gem which wants to build native extensions but that resource is being called before the package resource which installs build-essential, despite the package resource being first in the recipe. Is it generally not possible to install chef_gem gem dependencies in the same recipe as the gem is being installed?
[2013-06-03 21:21:51 -0400] adnichols: also - despite this cookbook being at the end of my runlist it's being moved to the front and executed first - so moving the build-essential install to another recipe doesn't help me. I'm assuming that's 'cause this cookbook contains a library but not totally sure why that's happening
[2013-06-03 21:21:55 -0400] cwj: adnichols: the build-essential cookbook tries to handle this condition for you
[2013-06-03 21:22:01 -0400] awgross: adnichols: you can install build-essentaisl first
[2013-06-03 21:22:08 -0400] awgross: check out the build-essentials cookbook
[2013-06-03 21:22:09 -0400] awgross: or
[2013-06-03 21:22:12 -0400] awgross: spoiler alert
[2013-06-03 21:22:18 -0400] awgross: tack .run_action(:install)
[2013-06-03 21:22:23 -0400] awgross: onto the end of the package block
[2013-06-03 21:22:40 -0400] adnichols: ok
[2013-06-03 21:23:28 -0400] adnichols: is it true that a recipe from a cookbook containing libraries will get run first despite it's placement in the run_list? That's the other oddity about this that I don't understand
[2013-06-03 21:24:01 -0400] cwj: i dont think that is true
[2013-06-03 21:24:03 -0400] spheromak: library code is part of compile phase.  The library code will be loaded.
[2013-06-03 21:24:31 -0400] adnichols: that makes sense - i'm just not understanding why the very first thing chef-client is trying to do is install this gem
[2013-06-03 21:24:40 -0400] spheromak: the recipes will not be ran  there are some tricks to get things to evaluate at compile time tho
[2013-06-03 21:24:55 -0400] awgross: adnichols: chef_gem has an implicit .run_action
[2013-06-03 21:25:05 -0400] awgross: .run_action causes it to be run during the parsing phase
[2013-06-03 21:25:33 -0400] adnichols: awgross is it possible to change that if you know a gem isn't necessary for the recipes in the run_list?
[2013-06-03 21:25:50 -0400] spheromak: chef_gem gem deps should be able to build native extensions if you are using the omni installer
[2013-06-03 21:26:16 -0400] adnichols: spheromak I am, but they aren't because build-essential isn't there (I assume)
[2013-06-03 21:26:26 -0400] adnichols: error is make is missing..
[2013-06-03 21:27:02 -0400] miah: you can install make
[2013-06-03 21:27:24 -0400] adnichols: miah I know - but when bootstrapping a host chef is trying to install the gem before installing build-essential
[2013-06-03 21:27:25 -0400] spheromak: I think we are gonna need some gists or pasties to see everything that may be going on. The chef_gem should have a toolchain in /opt/chef/
[2013-06-03 21:27:55 -0400] miah: you might need to just make build-essential run during the compile phase (and there are docs on how to do that)
[2013-06-03 21:27:56 -0400] adnichols: let me try out the build-essential cookbook stuff, that may be the more-right way to deal with this
[2013-06-03 21:28:05 -0400] miah: as well as making sure that it happens before the chef_gem part
[2013-06-03 21:28:55 -0400] adnichols: I have the build-essential cookbook but I don't think I'm calling it explicitly in the run_list - it's just there as a dependency
[2013-06-03 21:29:18 -0400] spheromak: will need a include_recipe or explicit call in run_list
[2013-06-03 21:29:27 -0400] adnichols: spheromak thanks, that makes sense
[2013-06-03 21:29:29 -0400] miah: node['build_essential']['compiletime'] - Whether the resources in the default recipe should be configured at the "Compile" phase of the Chef run. Defaults to false, see Usage for more information.
[2013-06-03 21:30:40 -0400] spheromak: metadata depend only makes the cookbook and its LWRP/Libraries/providers available to the rest of the run. It will not cause the cookbook::default recipe to run.
[2013-06-03 21:30:54 -0400] adnichols: yep - that seems to be my problem
[2013-06-03 21:31:00 -0400] adnichols: Thanks all
[2013-06-03 22:01:59 -0400] chaosmaker: Hi, someone using sql_server cookbook to install sql server standard edition? I'm trying to find more information about the package needed to install sql standard, at least the 2012 version does not allow to use a standard key on a express install.
[2013-06-03 22:03:27 -0400] awgross: is there a tutorial on how to configure chef without a configuration file? i want to use just pure ruby in a rake file to dump things in to chef zero but the configuration seems heavily dependent on having a file to read from, at least initially
[2013-06-03 22:07:50 -0400] als: Has anyone had problems with  YumRepository light-weight resource already initialized -- overriding ?
[2013-06-03 22:11:51 -0400] gazarsgo: script resource can't sudo ?
[2013-06-03 22:12:37 -0400] als: When trying to run a recipe which has been confirmed working together with another recipe I get the resource already iniitialized and thereafter it will get into the stanza in the recipe but wont do anything
[2013-06-03 22:17:44 -0400] mattray: gazarsgo: you can specify the user
[2013-06-03 22:17:56 -0400] gazarsgo: i specified root and i get permission denied trying to execute sh
[2013-06-03 22:19:04 -0400] Troy: had a working set of cookbooks, started in a new cloud instance, put all the same stuff on, but now get ArgumentError: wrong number of arguments (2 for 1) for chef_handler
[2013-06-03 22:19:05 -0400] mattray: gazarsgo: http://docs.opscode.com/chef/resources.html#script
[2013-06-03 22:19:36 -0400] mattray: gazarsgo: path maybe?
[2013-06-03 22:19:58 -0400] Troy: Compile error on this line  42>>         if Resource.const_defined?(class_name, false)
[2013-06-03 22:20:14 -0400] miah: Troy: you're using Chef on Ruby 1.8
[2013-06-03 22:20:46 -0400] miah: use omnibus or upgrade to a recent ruby =)
[2013-06-03 22:20:51 -0400] Troy: @miah I have to go look up the Ruby version
[2013-06-03 22:21:09 -0400] miah: i can tell you its 1.8, because const_defined? in Ruby 1.8 takes a single argument and 1.9 takes two.
[2013-06-03 22:21:29 -0400] gazarsgo: mattray: just trying to wget a file :( it works when i do it by hand
[2013-06-03 22:21:41 -0400] Troy: @miah 1.8.7
[2013-06-03 22:21:55 -0400] mattray: gazarsgo: use http://docs.opscode.com/chef/resources.html#remote-file
[2013-06-03 22:22:15 -0400] miah: there you go =)
[2013-06-03 22:22:22 -0400] gazarsgo: oh cool, thanks
[2013-06-03 22:22:31 -0400] mattray: gazarsgo: doing it by hand means you're probably a logged in user, so you have a full blown env
[2013-06-03 22:22:49 -0400] mattray: gazarsgo: the perils of using script and execute are getting env right
[2013-06-03 22:23:04 -0400] Troy: @miah I need to install Ruby 1.9 instead
[2013-06-03 22:23:35 -0400] miah: Troy: use the omnibus installer found at www.opscode.com/chef/install
[2013-06-03 22:23:37 -0400] miah: much much easier
[2013-06-03 22:24:01 -0400] gazarsgo: mattray: lol, my whole task today is to try to disable requiretty :(
[2013-06-03 22:24:48 -0400] mattray: gazarsgo: familiarize yourself with the resources provided by Chef and things will go smoother
[2013-06-03 22:24:59 -0400] mattray: I've had that link open for years
[2013-06-03 22:25:02 -0400] Otterley: it's probably worth reading ALL the docs
[2013-06-03 22:25:06 -0400] gazarsgo: good tip, thank you
[2013-06-03 22:25:09 -0400] mattray: well, months since it moved from wiki -> docs :)
[2013-06-03 22:26:14 -0400] Troy: @miah I new-ish to Chef, had not heard of that installer. If I use it then I can't apt-get to do updates?
[2013-06-03 22:27:09 -0400] Otterley: I don't think Opscode provides a bona fide apt repo for Omnibus chef yet :(
[2013-06-03 22:27:57 -0400] Otterley: someone could manage a PPA, I suppose (not volunteering!)
[2013-06-03 22:29:10 -0400] mattray: it's on Opscode's backlog to put one back up for the omnibus stuff
[2013-06-03 22:29:13 -0400] mattray: and a yum repo
[2013-06-03 22:29:22 -0400] mattray: apt.opscode.com has gone stale :/
[2013-06-03 22:29:47 -0400] Otterley: maybe you can manage your repo with Chef.
[2013-06-03 22:29:54 -0400] miah: Troy: there is a cookbook that will let you update easily.
[2013-06-03 22:30:20 -0400] miah: its a all in one package, everything you need to run chef (including ruby) so you can mess up your system ruby and not affect chef (or vice versa)
[2013-06-03 22:30:35 -0400] justizin: anyone familiar with errors related to add_to_path.sh.erb from ark cookbook? gradle cookbook is failing, complaining that the gradle cookbook has no such template..
[2013-06-03 22:30:37 -0400] miah: http://community.opscode.com/cookbooks/omnibus_updater
[2013-06-03 22:31:34 -0400] Troy: @miah i don't get it, a cookbook to install chef that would require chef to be installed to run it
[2013-06-03 22:33:56 -0400] chaosmaker: anyone used the sql_server cookbook to bootstrap sql server standard edition?
[2013-06-03 22:34:37 -0400] miah: Troy: the cookbook _maintains_ chef after its installed
[2013-06-03 22:35:36 -0400] eponymi: Troy: installation is a tiny part of idempotency
[2013-06-03 22:36:23 -0400] Troy: @miah I may have given the impression of maint, but what I really want is a simple set of commands on Ubuntu that will just get a working set of products to run chef-solo
[2013-06-03 22:36:45 -0400] gazarsgo: Troy: you can't chef your chef yet :(
[2013-06-03 22:36:54 -0400] Troy: i had it but somehow I'm not getting the right version of Ruby
[2013-06-03 22:37:27 -0400] Troy: i always start a new cloud instance and bsically start over
[2013-06-03 22:38:24 -0400] eponymi: Troy: the omnibus installer should do everything you need for bootstrapping
[2013-06-03 22:38:31 -0400] eponymi: it comes with its own version of ruby
[2013-06-03 22:38:36 -0400] miah: Troy: install omnibus, its quite simple.
[2013-06-03 22:40:18 -0400] Troy: ok, will have to try tomorrow. I'll install based on the instructions here: http://www.opscode.com/chef/install/ and see if it gets me everything for a bootstrap
[2013-06-03 22:40:19 -0400] Troy: thanks
[2013-06-03 22:43:26 -0400] eponymi: would it be accurate to say that test kitchen bussers have no access to node attributes other than those defined in .kitchen.yml?
[2013-06-03 22:44:15 -0400] miah: i doubt they even have access to the attributes defined in .kitchen.yml
[2013-06-03 22:44:19 -0400] miah: but maybe =)
[2013-06-03 22:44:51 -0400] eponymi: huh? then why would you define attributes in .kitchen.yml?
[2013-06-03 22:45:04 -0400] eponymi: wait, don't answer that. i'm an idiot.
[2013-06-03 22:45:40 -0400] surge_: Anyone install nagios 3.5.0 on Ubuntu from source? It's looking for /etc/nagios3/resource.cfg, which doesn't exist.
[2013-06-03 22:46:38 -0400] surge_: The directory didn't exist to begin with so I'm not sure why it failed to install
[2013-06-03 22:46:44 -0400] eponymi: surge_: from the cookbook or from, like, actual source?
[2013-06-03 22:46:50 -0400] surge_: cookbook ^
[2013-06-03 22:47:23 -0400] eponymi: which source? client, server, or nrpe?
[2013-06-03 22:47:30 -0400] surge_: Admittedly, I apt-get remove'd the old install and then passed in 'source' as an attribute
[2013-06-03 22:47:32 -0400] surge_: nagios server
[2013-06-03 22:47:47 -0400] surge_: admittedly, it was a sloppy removal when i apt-get remove'd *
[2013-06-03 22:47:57 -0400] surge_: i feel like i didn't get all the files removed
[2013-06-03 22:48:12 -0400] surge_: i did a mv /etc/nagios3 /etc/nagios.old
[2013-06-03 22:48:39 -0400] eponymi: whoa you lost me
[2013-06-03 22:48:44 -0400] surge_: lol
[2013-06-03 22:48:45 -0400] surge_: yeah
[2013-06-03 22:49:02 -0400] surge_: i installed nagios3 via cookbook using the default package attribute
[2013-06-03 22:49:26 -0400] eponymi: then you knifed into the server and removed it?
[2013-06-03 22:49:29 -0400] surge_: i then manually did apt-get remove nagios3 and w/e else came up as installed on my intaced
[2013-06-03 22:49:34 -0400] surge_: yea
[2013-06-03 22:49:54 -0400] surge_: but the /etc/nagios3 wasnt removed
[2013-06-03 22:49:57 -0400] surge_: so i jus renamed it
[2013-06-03 22:50:07 -0400] surge_: and then ran sudo chef-client again
[2013-06-03 22:50:21 -0400] surge_: and so resource.cfg never got created
[2013-06-03 22:50:24 -0400] surge_: : shrug :
[2013-06-03 22:50:45 -0400] surge_: instance**
[2013-06-03 22:50:51 -0400] eponymi: well i am a noob, but i don't even see a resource.cfg.erb in the templates
[2013-06-03 22:51:00 -0400] surge_: yeah that was the first thing i checked
[2013-06-03 22:51:44 -0400] eponymi: i do see this in the attributes, which might be pertinent: default['nagios']['config_dir'] = '/etc/nagios3/conf.d'
[2013-06-03 22:55:06 -0400] surge_: eponymi: Did a rename of all /etc/nagios folders to /etc/nagios*.old and re ran chef-client... now it works haha
[2013-06-03 22:55:14 -0400] surge_: a bit hacky but it got the job done
[2013-06-03 22:55:20 -0400] eponymi: that's what matters
[2013-06-03 22:55:42 -0400] eponymi: surge_: maybe you can help me. can i include_recipe dynamically? like include_recipe node['cookbook']['attr']
[2013-06-03 22:56:18 -0400] eponymi: i think it should work, but i don't see it done anywhere, so i'm wondering if it either doesn't work or if it's bad practice
[2013-06-03 22:58:45 -0400] surge_: eponymi: This is in the nagios server.rb recipe include_recipe "nagios::server_#{node['nagios']['server']['install_method']}"
[2013-06-03 22:59:12 -0400] surge_: put it in a string and try again?
[2013-06-03 23:00:11 -0400] eponymi: yeah, guess that's the issue. trying to avoid string interpolation bc of food critic, but i guess its required there
[2013-06-03 23:00:18 -0400] eponymi: thanks
[2013-06-03 23:05:56 -0400] surge_: eponymi: never used foodcritic before so didnt know that
[2013-06-03 23:06:30 -0400] surge_: set it to a variable above the include_recipe line?
[2013-06-03 23:06:41 -0400] eponymi: i probably shouldn't be bc i'm so noob, but figured i should try to use all of the things while i'm learning.
[2013-06-03 23:06:54 -0400] eponymi: well i think the foodcritic thing only applies in instances where it's not required to make something work
[2013-06-03 23:07:16 -0400] eponymi: so i'm going to try with interpolation for now and see if foodcritic complains later. i only run it on travis when i push
[2013-06-03 23:15:58 -0400] mikeg: Trying to install a new chef11 instance.  getting the following when I try knife commands:
[2013-06-03 23:16:14 -0400] mikeg: ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: sslv3 alert handshake failure
[2013-06-03 23:16:38 -0400] mikeg: I get that it's just a standard SSL error.  just surprised it's happening on a default installation
[2013-06-03 23:27:25 -0400] mikeg: ok.  let me ask this a different way, is there any way to tell knife to ignore cert errors
[2013-06-03 23:27:47 -0400] mikeg: or to import whatever CA was created on that box when the installation ran?
[2013-06-03 23:29:46 -0400] mikeg: mattray: I see you green here.  found this https://github.com/opscode/knife-openstack/blob/master/CHANGELOG.md  any chance the "Allow an option to ignore the SSL cert (KNIFE-225)(BK Box)" from v0.7.0 has made it way into opscode chef?
[2013-06-03 23:30:55 -0400] mattray: mikeg: that works for knife-openstack, allowing it to ignore cert warnings
[2013-06-03 23:31:16 -0400] mattray: could be used with other knife plugins as necessary
[2013-06-03 23:32:02 -0400] mikeg: I need it to work with the packaged knife plugins.  like "knife client list"
[2013-06-03 23:32:28 -0400] mikeg: think that's possible?
[2013-06-03 23:33:17 -0400] mattray: mikeg: you've got a self-signed cert for open source chef server?
[2013-06-03 23:34:07 -0400] mikeg: yes.  currently it's just the cert that was generated by default by the install.  because this is just our QA POC
[2013-06-03 23:35:14 -0400] mikeg: frustrating that I have to have a proper cert to POC.  should be able to ignore cert warnings.  I suppose I'll just have to import the CA that was used to generate that cert.  hopefully that'll work
[2013-06-03 23:36:28 -0400] bean: I just wouldn't use SSL for your POC
[2013-06-03 23:36:32 -0400] bean: i think you can do that?
[2013-06-03 23:37:57 -0400] mikeg: Yes.  I was going down that path but was side tracked.  I can manually edit the nginx conf to stop redirecting from 80 to 443.  but hopefully I can add some attributes to the chef-server.rb file to make that happen on a reconfigure
[2013-06-03 23:38:09 -0400] mikeg: bean: thanks for putting me back on track.  that's a better idea
[2013-06-03 23:39:06 -0400] mikeg: nginx['enable_non_ssl']
[2013-06-03 23:39:10 -0400] mikeg: found it.  thx again
[2013-06-03 23:42:43 -0400] bean: np
[2013-06-03 23:48:27 -0400] mikeg: well, in case anyone is following, that doesn't work.  in fact don't really know what that 'enabled_non_ssl' does.  the description doesn't seem to jive.  anyway, going to have to manually tweet the template so it'lll survive reconfigure.  but the 80->443 redirect is hard coded
[2013-06-03 23:56:14 -0400] mjijackson: i'm using chef-solo with vagrant, trying to provision couchdb and run it on port 80
[2013-06-03 23:56:34 -0400] mjijackson: i can provision couchdb ok, but it fails when it tries to run
[2013-06-03 23:56:59 -0400] mjijackson: because 80 is a privileged port, and i believe the /etc/init.d/couchdb script is being run by the couchdb user
[2013-06-03 23:57:12 -0400] mjijackson: any idea how to get that script to run as root?
[2013-06-03 23:57:30 -0400] mjijackson: *or rather how to run /etc/init.d/couchdb as root?

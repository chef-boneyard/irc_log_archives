[2013-06-21 00:37:22 -0400] scalp42: anyone know to use chef omnibus when bootstrapping nodes on ec2 for example?
[2013-06-21 00:37:29 -0400] scalp42: do I need to change the template?
[2013-06-21 00:40:01 -0400] Astral303: what are the valid arguments for knife search --sort?
[2013-06-21 00:40:05 -0400] Astral303: i can't seem to find any docs
[2013-06-21 00:41:08 -0400] Astral303: specifically how to search by node name
[2013-06-21 00:41:08 -0400] Astral303: i mean sort
[2013-06-21 00:44:43 -0400] atomi: I got an error using the opscode java cookbook but it installed java fine
[2013-06-21 00:45:02 -0400] atomi: Chef::Exceptions::Package: sun-java6-jdk has no candidate in the apt-cache
[2013-06-21 00:45:59 -0400] atomi: I think it might be because I have remove_deprecated_packages on
[2013-06-21 00:46:00 -0400] Astral303: knife search node 'ec2:*' --sort "name"  -a name --- things are not sorted. any ideas?
[2013-06-21 00:46:39 -0400] atomi: not me Astral303
[2013-06-21 01:25:26 -0400] FuZion755: hi all, i've been working toward getting a system wide ruby installation functioning with the rest of my recipes.  almost everything is functional, but my node[:languages][:ruby] values don't point to the new installation.  i refresh ohai (output seems like it's successful) but other resource calls don't pick up the new ruby values, are the node values set at compile time?
[2013-06-21 03:55:32 -0400] rich__: hi all, i have a question about getting environment variables in a recipe. i'm trying to create a cookbook for an oracle tnsnames.ora file. I want to be able to write this file to $ORACLE_HOME/network/admin/tnsnames.ora and i want to read $ORACLE_HOME from the host environment
[2013-06-21 03:55:53 -0400] rich__: so if we have oracle clients installed on windows i need to read that variable. same with oracle on linux or aix
[2013-06-21 03:56:57 -0400] rich__: windows might be C:\oracle or maybe C:\Program Files\oracle... while my linux *should* be /u01/app/oracle/product/11.2 but i can't be 100% sure so i won't hardcode the path. just read an env var
[2013-06-21 05:08:00 -0400] mrk___: any idea how to make this happen? https://github.com/opscode/chef/pull/734#issuecomment-19797068
[2013-06-21 05:47:10 -0400] uzoj: adom jacob taking the gloves off vs puppet at velocity?
[2013-06-21 05:47:16 -0400] uzoj: adam
[2013-06-21 05:47:22 -0400] uzoj: nice to see
[2013-06-21 05:49:44 -0400] uzoj: my boss is one of those admins that's been around a long time without ever learning to program much so ruby was too scary. he created this monster of a puppet repo
[2013-06-21 05:50:09 -0400] uzoj: using hiera to load entire modules from yaml files
[2013-06-21 05:50:36 -0400] uzoj: without a single line of actual puppet
[2013-06-21 05:51:04 -0400] uzoj: well, except the hiera call
[2013-06-21 06:00:14 -0400] uzoj: so my challenge is how do i convince my boss who says he chose puppet because there were two times the jobs on dice/craigslist/whatever for puppet engineers
[2013-06-21 06:00:22 -0400] uzoj: that chef is the way to go
[2013-06-21 06:00:34 -0400] uzoj: and to ditch all his old overly complex modules
[2013-06-21 06:06:55 -0400] Otterley: uzoj: because if you leave, he'll have to look for a puppet engineer, just like all those other poor guys on Dice ;)
[2013-06-21 06:13:35 -0400] uzoj: haha good point otterley
[2013-06-21 07:25:14 -0400] denniswisnia: hej guys, how can I delete the exiting Host eintrag for a Server in Knife? Got "ERROR: Net::SSH::HostKeyMismatch:"
[2013-06-21 07:36:36 -0400] denniswisnia: anyone?
[2013-06-21 07:37:28 -0400] stormerider: eintrag?
[2013-06-21 07:37:40 -0400] stormerider: not following the question
[2013-06-21 07:40:28 -0400] denniswisnia: got it.
[2013-06-21 07:40:32 -0400] denniswisnia: :)
[2013-06-21 07:40:41 -0400] denniswisnia: Its to early
[2013-06-21 07:44:35 -0400] stormerider: yeah it is, heh
[2013-06-21 08:40:01 -0400] ermajn_: hello, I'm having problem.. that one of my node is not having fqdn attribute
[2013-06-21 08:40:19 -0400] ermajn_: knife search node name:<node-name>
[2013-06-21 08:40:33 -0400] ermajn_: returns me info about node,but FQDN is empty
[2013-06-21 08:40:52 -0400] ermajn_: that's make crash compiling some cookbooks
[2013-06-21 08:42:19 -0400] stormerider: check hostname -f on the machine, i'd suggest. and/or manually check ohai on the machine.
[2013-06-21 08:44:37 -0400] ermajn_: yes, that's problem, on mentioned node 'hostname --fqdn' returns nothing
[2013-06-21 09:31:44 -0400] stormerider: i ran into something similar with an ubuntu 10.04 box, it didn't like me specifying the fqdn in /etc/hostname. i had to set it to the short name and put the full in /etc/hosts
[2013-06-21 10:05:56 -0400] pixie79: Hi all - how can I set a flag that shows if something has been done on a previous run and thus should not be repeated i.e I dont want to format hdfs on each chef run
[2013-06-21 10:16:12 -0400] mattt: pixie79: some sort of only_if not_if ?
[2013-06-21 10:17:18 -0400] pixie79: I thought i could only use that in individual stanzas, i need this for half a recipe really
[2013-06-21 10:24:55 -0400] mattt: pixie79: you could move that part out to a new recipe and only include it under certain conditions
[2013-06-21 10:27:57 -0400] mattt: pixie79: alternatively, you could set an attribute after you first format, and then don't format again once the attribute is set
[2013-06-21 10:28:21 -0400] pixie79: ok - that would probably sound better - i will look into the attribute option
[2013-06-21 10:45:55 -0400] ermajn: hello, when I include recipe form another cookbook, it does not read default attribute values values ...
[2013-06-21 10:46:34 -0400] ermajn: when I directly include recipe, it works normaly... what's problem..
[2013-06-21 10:56:39 -0400] ermajn: so.. when I call from my recipe node['included_cookbook']['value']
[2013-06-21 10:56:42 -0400] ermajn: I got nil
[2013-06-21 10:56:57 -0400] ermajn: but when in runlist is default recipe of included_cookbook it reads it normaly
[2013-06-21 10:57:04 -0400] ermajn: whats the problem?!
[2013-06-21 10:57:45 -0400] Naji: you need to define, that your cookbook depends on the vendor cookbook
[2013-06-21 10:57:48 -0400] Naji: in metadata.rb
[2013-06-21 10:57:53 -0400] ermajn: Naji: aaah, just got it
[2013-06-21 10:57:55 -0400] ermajn: stupid me :D
[2013-06-21 11:25:49 -0400] pixie79: how do i call stop for a service? for example I have a recipe that loads all my services, then before I configure things I need to stop the service and then restart once they been configured. I know i can use notifies :start to start a process inside a template stanza but how do i call stop ?
[2013-06-21 11:34:15 -0400] Hildgrim: see http://docs.opscode.com/resource_common_notifications.html
[2013-06-21 11:34:19 -0400] Hildgrim: :delayed specifically
[2013-06-21 11:36:43 -0400] prognostikos: how are attributes that are an array handled? I'm using a cookbook that defines an array of files in a default attributes file in the cookbook. I'm setting the same attribute to an empty array in a role. It seems like chef merges the two instead of overwriting the cookbook's default?
[2013-06-21 11:39:25 -0400] prognostikos: and to answer my own question, yes it looks like attributes at the same precedence level are merged
[2013-06-21 12:01:12 -0400] jverdeyen: Hi guys
[2013-06-21 12:01:35 -0400] jverdeyen: I'm using Chef 11.4.4
[2013-06-21 12:01:51 -0400] jverdeyen: With the nginx cookbook (requres ohai coobook)
[2013-06-21 12:02:07 -0400] jverdeyen: But when I run it with chef solo it seems like the default attribute values aren't filled in
[2013-06-21 12:02:15 -0400] jverdeyen: "DEBUG: Re-raising exception: NoMethodError - undefined method `[]' for nil:NilClass"
[2013-06-21 12:02:25 -0400] jverdeyen: on this line : '20>> unless Ohai::Config[:plugin_path].include?(node['ohai']['plugin_path'])'
[2013-06-21 12:03:11 -0400] jverdeyen: any idea?
[2013-06-21 13:27:36 -0400] pbpolar_: I hope someone here has the patience to help a Chef newbie -- we're on a three-day 'Chef hackathon' to see if we want to switch from Puppet to Chef, and I'd really like to get as much Chef working as possible, so... I'm trying to get the sensu-chef cookbook working, but the client run dies on a syntax error in the 'discovery' cookbook.
[2013-06-21 13:28:15 -0400] pbpolar_: We're using Berksfile/berkshelf, and I'd like to see what cookbook depends on the 'discovery' cookbook before moving on.
[2013-06-21 13:28:49 -0400] pbpolar_: Is there a way to query berks for what cookbooks have a dependency on 'discovery'?
[2013-06-21 13:31:06 -0400] pbpolar_: I got lucky, and looked at the chef-redis cookbook, to find that that's the cookbook using 'discovery'.  Still curious if there's a convention for finding that out.
[2013-06-21 13:45:26 -0400] joshmyers: pbpolar_: you should see what cookbook it has failed on
[2013-06-21 14:06:18 -0400] swedish_chef: We are seeing a bizarre problem with chef-client: it is not downloading all the assets of a cookbook that's in OpsCode to the client node. In particular: (a) recipe/* subfolders are missing and (b) templates folder is missing altogether. Has anybody seen something like this?
[2013-06-21 14:15:24 -0400] suffix: Could someone point me to a tutorial that allows per-instance variables (attributes?) to be set or configured for specific nodes?
[2013-06-21 14:16:34 -0400] atomi: suffix: yeah I want a good tutorial for that too
[2013-06-21 14:16:56 -0400] atomi: I think you probably have to edit nodes/xxxx.json file
[2013-06-21 14:17:49 -0400] suffix: specifically, I need to do things like choosing a directory from which to pull an installer depending on the node type in question
[2013-06-21 14:18:34 -0400] atomi: suffix: what are you trying to do?
[2013-06-21 14:19:35 -0400] atomi: suffix: yeah, I'm still learning chef so I can't really help much
[2013-06-21 14:20:09 -0400] swedish_chef: We are seeing random knife behavior between cookbook upload & cookbook download: between different runs of the same cookbook. The download command will bring different assets down, missing different files or folders every single time. Any ideas on how to debug what is causing this?
[2013-06-21 14:21:36 -0400] atomi: isn't there a debug flag when you run your command?
[2013-06-21 14:22:25 -0400] aslan: Debug http traffic with wireshark, you might see useful status codes.
[2013-06-21 14:22:46 -0400] suffix: so, it looks like an "attribute file" would be what I need
[2013-06-21 14:22:52 -0400] suffix: could someone confirm this though?
[2013-06-21 14:23:01 -0400] poolpog: hi, quick question about the java cookbook here: https://github.com/opscode-cookbooks/java (but it is actually a general question about dependencies)
[2013-06-21 14:23:15 -0400] poolpog: that cookbook has "depends 'windows'" in its metadata.rb
[2013-06-21 14:23:27 -0400] poolpog: our platform does not now nor will it ever use Windows
[2013-06-21 14:23:39 -0400] poolpog: what will break if I remove that "depends" line?
[2013-06-21 14:24:08 -0400] tabolario: poolpog: if you're not on windows, nothing.
[2013-06-21 14:24:12 -0400] poolpog: ok
[2013-06-21 14:24:22 -0400] poolpog: thanks, that's what I was hoping to hear...
[2013-06-21 14:24:23 -0400] tabolario: if you're not on windows though, you shouldn't need to worry about that line anyway
[2013-06-21 14:24:39 -0400] tabolario: well i should say, if you're node is not on windows
[2013-06-21 14:24:48 -0400] poolpog: but that leads me to a more genral question: why would that line be there?
[2013-06-21 14:25:06 -0400] poolpog: i.e. why include that line in a general cookbook when not everyone is using windows?
[2013-06-21 14:25:39 -0400] cwj: because chef doesnt know if you are running on windows until it is too late to load the cookbooks
[2013-06-21 14:26:04 -0400] poolpog: hmmm...
[2013-06-21 14:26:09 -0400] cwj: all your cookbooks are either a) downloaded from the server at beginning of the run or b) uploaded by you for use with chef-solo
[2013-06-21 14:26:09 -0400] poolpog: I'll have to digest that answer
[2013-06-21 14:26:33 -0400] poolpog: thanks folks
[2013-06-21 14:26:46 -0400] poolpog: also, I hope everyone is having a nice day
[2013-06-21 14:26:52 -0400] cwj: cheers :)
[2013-06-21 14:26:53 -0400] poolpog: it is beautiful here in b-more
[2013-06-21 14:27:54 -0400] poolpog: boom! looks like it worked
[2013-06-21 14:27:56 -0400] poolpog: thanks
[2013-06-21 14:28:20 -0400] poolpog: hmmm...
[2013-06-21 14:28:22 -0400] tabolario: it's very nice in DC today
[2013-06-21 14:28:33 -0400] tabolario: starting to get a bit toasty though
[2013-06-21 14:28:39 -0400] poolpog: is it possible to override that dependency in the role? I'm guessing "no" from the error I got
[2013-06-21 14:28:52 -0400] poolpog: my parent company is in DC
[2013-06-21 14:28:58 -0400] poolpog: also, i grew up there
[2013-06-21 14:29:37 -0400] tabolario: well, if you're node isn't running windows and/or you don't reference the windows recipe from that cookbook, it won't matter at all that the windows stuff is there
[2013-06-21 14:29:47 -0400] tabolario: just a few extra bytes on your chef server :)
[2013-06-21 14:30:05 -0400] cwj: yep
[2013-06-21 14:36:37 -0400] suffix: anyone in here familair with the concecpt of reusable recipes? I am having a hard time understanding how to use attributes to generalize recipes for use on various node types.
[2013-06-21 14:36:47 -0400] StDiluted: suffix, I had that same issue
[2013-06-21 14:36:56 -0400] suffix: had or have?
[2013-06-21 14:36:58 -0400] StDiluted: I can tell you what I ended up doing
[2013-06-21 14:37:04 -0400] suffix: what did you end up doing
[2013-06-21 14:37:06 -0400] StDiluted: but it's still in progress
[2013-06-21 14:37:18 -0400] StDiluted: so I use Berkshelf
[2013-06-21 14:37:31 -0400] StDiluted: but basically
[2013-06-21 14:37:41 -0400] StDiluted: I make a new cookbook for each thing I want to modify
[2013-06-21 14:37:46 -0400] StDiluted: so suppose I work for acme
[2013-06-21 14:37:54 -0400] StDiluted: and we run nginx
[2013-06-21 14:37:59 -0400] suffix: whoa
[2013-06-21 14:38:03 -0400] suffix: that sounds huge
[2013-06-21 14:38:06 -0400] StDiluted: i make a new recipe called acme-nginx
[2013-06-21 14:38:20 -0400] StDiluted: sorry
[2013-06-21 14:38:28 -0400] StDiluted: i make a new COOKBOOK called
[2013-06-21 14:38:31 -0400] StDiluted: acme-nginx
[2013-06-21 14:38:45 -0400] suffix: what if I have to configure something liek 50 different attributes in a single recipe?
[2013-06-21 14:38:53 -0400] StDiluted: sure
[2013-06-21 14:39:06 -0400] StDiluted: well, you don't want to modify (fork) the official recipe
[2013-06-21 14:39:07 -0400] StDiluted: so
[2013-06-21 14:39:08 -0400] suffix: do I mka e50 different cookbooks?
[2013-06-21 14:39:12 -0400] StDiluted: no
[2013-06-21 14:39:26 -0400] suffix: ok. go on
[2013-06-21 14:39:43 -0400] StDiluted: so i make a new wrapper cookbook for nginx
[2013-06-21 14:39:54 -0400] StDiluted: and metadata.rb has depends 'nginx'
[2013-06-21 14:40:06 -0400] StDiluted: the recipe has include_recipe 'nginx'
[2013-06-21 14:40:13 -0400] StDiluted: default recipe that is
[2013-06-21 14:40:25 -0400] StDiluted: acme-nginx/recipes/default.rb
[2013-06-21 14:40:46 -0400] StDiluted: and then acme-nginx/attributes/default.rb is where I put all the overrides
[2013-06-21 14:41:01 -0400] StDiluted: for nginx and any other related recipes
[2013-06-21 14:41:42 -0400] StDiluted: like override["nginx"]["client_max_body_size"] = "1G"
[2013-06-21 14:42:14 -0400] StDiluted: then I create a cookbook for acme-webserver
[2013-06-21 14:42:23 -0400] StDiluted: and in the default recipe for that
[2013-06-21 14:42:35 -0400] StDiluted: i use include_recipe 'acme-nginx'
[2013-06-21 14:42:49 -0400] StDiluted: and I use Berkshelf to manage all the dependencies
[2013-06-21 14:45:04 -0400] atomi: StDiluted: is that what most people do?
[2013-06-21 14:45:12 -0400] StDiluted: I suppose you could make a new cookbook with all your site-specific recipes and call them the same way, and that would make things a little smaller
[2013-06-21 14:45:49 -0400] StDiluted: atomi: well, there are a lot of different ways to do things, and I am more or less new to this, but this seems to be the current best practice as far as 'reusable' cookbooks go
[2013-06-21 14:45:54 -0400] StDiluted: you could use roles, etc
[2013-06-21 14:46:01 -0400] StDiluted: but that seems to be falling out of favor
[2013-06-21 14:46:12 -0400] StDiluted: because roles are not versioned
[2013-06-21 14:46:40 -0400] StDiluted: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-06-21 14:46:53 -0400] StDiluted: this is where the concepts are coming from
[2013-06-21 14:47:25 -0400] StDiluted: and this video explains the idea behind that
[2013-06-21 14:47:25 -0400] StDiluted: http://www.youtube.com/watch?v=hYt0E84kYUI
[2013-06-21 14:48:04 -0400] StDiluted: and I've been using vagrant for short iterations
[2013-06-21 14:48:35 -0400] StDiluted: because bringing up an ec2 instance for testing every time is wasteful and takes an extra 3-7 minutes in foot tapping
[2013-06-21 14:53:06 -0400] stormerider: StDiluted: yeah, that's why im working on futzing with vagrant myself.
[2013-06-21 14:53:25 -0400] StDiluted: suffix, does that help?
[2013-06-21 14:53:35 -0400] StDiluted: again, I'm new to this pattern
[2013-06-21 14:53:54 -0400] StDiluted: so that's just what I've been doing
[2013-06-21 14:54:14 -0400] stormerider: i dont really see a problem with roles, but i havent needed to really care about versioning outside of short-term basis for environments.
[2013-06-21 14:54:26 -0400] suffix: StDiluted possibly
[2013-06-21 14:54:53 -0400] suffix: so, here is a specific example of what I would need to change for several different node types:
[2013-06-21 14:54:53 -0400] suffix: http://pastebin.com/Y9v7iVXt
[2013-06-21 14:55:15 -0400] StDiluted: stormerider, my understanding is that roles are problematic because changing a role can affect machines in multiple environments
[2013-06-21 14:55:27 -0400] StDiluted: and you can't pin a particular version of a role
[2013-06-21 14:55:33 -0400] StDiluted: in a particular environment
[2013-06-21 14:56:01 -0400] stormerider: *nod* i get the theory, i just havent needed to be that precise... yet, at least.
[2013-06-21 14:56:39 -0400] StDiluted: suffix, ok, so that would just be a .erb in the acme-nginx/templates/ directory
[2013-06-21 14:56:52 -0400] stormerider: but more of my work is in the cookbooks themselves and the roles tie them together, so if i pin the cookbook then it doesnt matter.
[2013-06-21 14:57:08 -0400] suffix: StDiluted what's an .erb?
[2013-06-21 14:57:19 -0400] stormerider: but i can see where others would want to avoid it.
[2013-06-21 14:57:25 -0400] StDiluted: ah wait, my bad that's  not a config file
[2013-06-21 14:57:46 -0400] StDiluted: so you have different types of nodes
[2013-06-21 14:58:08 -0400] StDiluted: and you want to change that variable based on the node type?
[2013-06-21 14:58:09 -0400] suffix: I also have different versions of the same type of node
[2013-06-21 14:58:27 -0400] StDiluted: are you using environments?
[2013-06-21 14:58:42 -0400] suffix: basically, I'd want to let a sysadmin set a bunch of vars and then run the recipe to provision the node
[2013-06-21 14:59:43 -0400] StDiluted: I think the 'chef' way would be more to use a template to edit the /etc/fstab to add the mount and then to run a mount -a
[2013-06-21 14:59:46 -0400] suffix: does that make sense?
[2013-06-21 14:59:51 -0400] Astral303: can i call a ruby_block from a ruby_block?
[2013-06-21 15:00:00 -0400] StDiluted: however, that's just my n00b thoughts
[2013-06-21 15:00:06 -0400] suffix: yeah that won';t work
[2013-06-21 15:00:32 -0400] suffix: I need to give a user the ability to set specific parameters before running a recipe
[2013-06-21 15:00:45 -0400] heathsnow: anyone have a fix or workaround to this error:  8 nodes found, but does not have the required attribute (fqdn) to establish the connection.
[2013-06-21 15:00:51 -0400] suffix: this needs to happen without a user directly accessing a node
[2013-06-21 15:01:07 -0400] StDiluted: http://serverfault.com/questions/480179/is-there-a-way-to-pass-parameters-at-run-time-in-chef
[2013-06-21 15:01:53 -0400] aaarnett123: Hi there... Setting up a new server on RHEL6 following the instructions on http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/ Install (using 'sudo chef-server-ctl reconfigure') works fine and passes all tests (after killing qpidd to get rabbitmq to pass), but when I run the optional 'sudo chef-server-ctl test' I get several failures... I'm looking for a resource to help understand how to track down and u
[2013-06-21 15:03:50 -0400] Astral303: is it possible to call another cookbook's ruby block?
[2013-06-21 15:04:11 -0400] StDiluted: suffix: if you don't want to pass them at runtime, like that, then you can just make a wrapper cookbook and the user can edit acme-nginx/attributes/default.rb before running the run list
[2013-06-21 15:04:27 -0400] mrk___: trying to install chef 11 on ec2. Everytime I make a call to chef.domainname.com, it gets rerouted to the ec2 internal hostname
[2013-06-21 15:04:31 -0400] mrk___: any idea how to fix this?
[2013-06-21 15:04:52 -0400] StDiluted: mrk: i had the same problem
[2013-06-21 15:05:07 -0400] StDiluted: i set the hostname and reconfigured
[2013-06-21 15:06:09 -0400] mrk___: aah - reconfigured ... is what im missing :)
[2013-06-21 15:06:13 -0400] mrk___: thanks StDiluted
[2013-06-21 15:06:26 -0400] StDiluted: trying to remember if I did anything else
[2013-06-21 15:06:39 -0400] mrk___: id probably want to make this permanent in etc/hosts or something
[2013-06-21 15:06:58 -0400] StDiluted: yeah, or set /etc/hostname
[2013-06-21 15:07:12 -0400] mrk___: "   - update content in file /etc/chef-server/chef-server-running.json from 677d5f to dba3c9 "
[2013-06-21 15:07:15 -0400] StDiluted: you want the command 'hostname --fqdn to return whatever is expected
[2013-06-21 15:07:20 -0400] mrk___: that definitely has the right fqdn in there now :)
[2013-06-21 15:07:25 -0400] mrk___: thanks a lot
[2013-06-21 15:07:25 -0400] aaarnett123: mrk... The second comment at http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/ talks about your issue...
[2013-06-21 15:08:02 -0400] mrk___: yeah aaarnett123 , I did read that, but had it setup after installing chef
[2013-06-21 15:08:12 -0400] mrk___: didn't realize running reconfigure will update configs and all
[2013-06-21 15:08:30 -0400] aaarnett123: Good point... Don't think those comments include that step.
[2013-06-21 15:09:28 -0400] mrk___: whats funny is - chef has all these cool ec2 recipes to setup your fqdns on bootstrap .. but first i need chef setup .. lol
[2013-06-21 15:10:22 -0400] tabolario: having chef set up chef is actually quite a fun exercise :)
[2013-06-21 15:10:55 -0400] mrk___: tabolario, i had it all written in a cloudformation template for 10, trying to update it for 11 now . Bringing the exercise one step further :D
[2013-06-21 15:11:20 -0400] tabolario: mrk___: are you using knife-ec2 at all?
[2013-06-21 15:11:27 -0400] mrk___: nope
[2013-06-21 15:11:39 -0400] mrk___: everything is behind autoscalers
[2013-06-21 15:11:43 -0400] tabolario: i haven't really checked out cloudformation yet
[2013-06-21 15:12:56 -0400] mrk___: the AS will start my instances, and i use cfn-init to call chef-client -j /etc/chef/first-boot.json
[2013-06-21 15:13:39 -0400] mrk___: happy to share the CloudFormation template once I have something solid
[2013-06-21 15:27:00 -0400] Iano: hey all, i have a recipe that calls "npm install" and while running it via the command promp returns 0, it tends to break when invoked via chef, anyone have experience in this?
[2013-06-21 15:35:42 -0400] jchauncey: anyone know if its possible to mock data for an encrypted databag with chefspec?
[2013-06-21 15:39:54 -0400] wildahunden: We're using the subversion resource.  It fails with an return code of 42.  The logs don't show too much.  Any ideas what might be causing it?
[2013-06-21 15:44:33 -0400] ranjibd: jchauncey: yes its is possible, standard rspec though, nothing specific to chefspec
[2013-06-21 15:44:49 -0400] ranjibd: also you can load them chef-solo way
[2013-06-21 15:45:33 -0400] jchauncey: looks like i might be able to stub them (maybe)
[2013-06-21 15:52:11 -0400] fluffhead: does anyone know of a guide or any sort of information on setting up a HA chef-server 11 cluster?
[2013-06-21 16:00:33 -0400] qhartman: fluffhead, this should give you some clues: http://docs.opscode.com/server_components.html
[2013-06-21 16:01:01 -0400] qhartman: They use pretty standard components, so the HA techniques for each of those pieces should apply as usual
[2013-06-21 16:06:55 -0400] phutchins: Anyone know how to create a notifies in the new standard that contains a variable for the resource name?
[2013-06-21 16:07:26 -0400] phutchins: I have it working the old style, but it doesn't pass foodcritic... The new way, with a variable like so: notifies :restart, "service[#{cur_ser}]"
[2013-06-21 16:07:41 -0400] phutchins: fails. cur_ser is a variable containing the service name.
[2013-06-21 16:12:57 -0400] pbpolar_: How do I track down why Berkshelf is uploading cookbooks from the community site, to our chef server, when my Berksfile specifies a git repo?
[2013-06-21 16:13:34 -0400] pbpolar_: e.g.:
[2013-06-21 16:13:37 -0400] pbpolar_: cookbook 'redis',
[2013-06-21 16:13:38 -0400] pbpolar_:   git: 'git://github.com/pburkholder/chef-redis.git'
[2013-06-21 16:14:21 -0400] pbpolar_: in my Berksfile, but when I include the 'sensu' cookbook then it gets the redis cookbook from opscode, which is all busted for my needs.
[2013-06-21 16:19:43 -0400] StDiluted: when you do berks install, what do you get
[2013-06-21 16:20:26 -0400] StDiluted: maybe you need to specify the custom repo before the :opscode block in your Berksfile?
[2013-06-21 16:28:28 -0400] paulmooring: quit
[2013-06-21 16:47:20 -0400] atomi: in my nodes directory how can I add a json file that will work for all nodes?
[2013-06-21 16:48:54 -0400] ianco: atomi, you could add some role json, and have the role in runlists
[2013-06-21 17:09:20 -0400] Josh__: Hello -- I'm having some trouble w/ running a script in a chef recipe.  The script is an installer, but the installer requires some user interactivity (for example, accepting terms of service and specifying directories for the install).  I was able to resolve this by using "expect".  I'm able to run the expect script manually from the command line once ssh'ed in, however, when I try to add it as a chef recipe, it fails.
[2013-06-21 17:10:12 -0400] Josh__: When I try using the script resource without specifying the interpreter, then I get an error saying "Permission Denied" and when I run it using execute or the bash resource, then it starts running, but never "returns to the terminal" and so the chef recipe just hangs there.
[2013-06-21 17:10:15 -0400] awgross: Josh__: how are you calling it ins chef
[2013-06-21 17:11:04 -0400] Josh__: Here's an example of how I tried it with the bash resource:
[2013-06-21 17:11:24 -0400] Josh__: bash "install-test" do
[2013-06-21 17:11:28 -0400] Josh__: user "root"
[2013-06-21 17:11:32 -0400] Josh__: cwd "/tmp"
[2013-06-21 17:11:36 -0400] Josh__: code <<-EIO
[2013-06-21 17:11:41 -0400] Josh__: touch /tmp/.program_installed
[2013-06-21 17:12:15 -0400] Josh__:  -- /usr/bin/expect -f /tmp/program_expect_installer.exp > /dev/null
[2013-06-21 17:12:20 -0400] Josh__: (without the dashes)
[2013-06-21 17:12:27 -0400] Josh__: EIO
[2013-06-21 17:12:33 -0400] Josh__: creates '/tmp/.program_installed'
[2013-06-21 17:12:37 -0400] Josh__: end
[2013-06-21 17:13:04 -0400] Josh__:  That's it
[2013-06-21 17:13:22 -0400] Josh__: When I run it using the bash resource like that, it actually completes the "touch" step
[2013-06-21 17:13:54 -0400] Josh__: but doesn't seem to start the expect portion
[2013-06-21 17:15:42 -0400] awgross: hmm
[2013-06-21 17:16:46 -0400] awgross: perhaps remove the /dev/null
[2013-06-21 17:16:57 -0400] awgross: and see if you figure out where in expect it is failing
[2013-06-21 17:17:07 -0400] pdufour: hey does anyone know how to set the chef_environment for a chef solo run
[2013-06-21 17:17:07 -0400] Josh__: k, I'll give that a shot
[2013-06-21 17:17:58 -0400] pdufour: what I've tried: putting chef_environment in the node dna.json file. putting chef_environment 'env' in solo.rb
[2013-06-21 17:21:15 -0400] pdufour: i built the code from master so i have the chef solo env support
[2013-06-21 17:45:53 -0400] theSurfer: I am having some problem with chef-client running as a service on Windows 2008 R2. Usually the ruby process takes around 70MB of ram memory but in a few hosts it seems that there is a memory Leak and it is consuming 1GB.
[2013-06-21 17:46:03 -0400] phutchins: Anyone know how to create a notifies in the new standard that contains a variable for the resource name?
[2013-06-21 17:46:14 -0400] phutchins: I have it working the old style, but it doesn't pass foodcritic... The new way, with a variable like so: notifies :restart, "service[#{cur_ser}]"
[2013-06-21 17:46:20 -0400] phutchins: fails. cur_ser is a variable containing the service name.
[2013-06-21 17:46:54 -0400] theSurfer: Does that memory leak could have been caused by a bad cookbook?
[2013-06-21 17:47:47 -0400] bean__: theSurfer: I've seem similar things in linux, where I had to make it fork for its runs... I don't know if thats even possible on windows though.
[2013-06-21 17:49:05 -0400] theSurfer: bean__: Ok.. yeah I saw a few posts about the fork option on Linux... I am not sure about Windows either.
[2013-06-21 17:50:25 -0400] theSurfer: bean__: on Linux where do you set that option? on the cookbook?
[2013-06-21 17:51:50 -0400] theSurfer: I see
[2013-06-21 17:51:51 -0400] theSurfer: client_fork true
[2013-06-21 17:52:05 -0400] theSurfer: I am going to try that on Windows
[2013-06-21 17:53:15 -0400] bean__: yep, theSurfer
[2013-06-21 17:53:53 -0400] theSurfer: thanks bean__
[2013-06-21 17:53:58 -0400] bean__: np
[2013-06-21 17:56:24 -0400] atomi: any reason why knife solo bootstrap would delete all my cookbooks in cookbooks/?
[2013-06-21 17:56:49 -0400] rracterr: I'm stumped, I have one node that no matter how many times I bootstrap it into existance never shows up on the status screen, even if I run the chef-client repeatedly successfully it does not show up in status, yet has no trouble running the client and shows up in clients and nodes just fine... ideas?
[2013-06-21 17:56:54 -0400] theSurfer: here is the only thing I see in the error logs: http://pastie.org/private/thodsbbjr29w011y23fz1w
[2013-06-21 17:57:31 -0400] theSurfer: but just warnings... I wouldn't think that could be causing that
[2013-06-21 18:07:54 -0400] rracterr: 20 node limit on status page? wtf is that crap... anyone know how to tweak that?
[2013-06-21 18:09:18 -0400] atomi: knife solo is deleting all my cookbooks
[2013-06-21 18:22:18 -0400] vaq: Hello, I have a few environments in my Chef server. I am trying to get a attribute value from my environment stored on the chef server. Can anyone direct me to some docu on how to do this.
[2013-06-21 18:22:32 -0400] vaq: {"ip_address":"0.0.0.0"} is stored in an environment called test
[2013-06-21 18:22:40 -0400] vaq: I want to use that value in a recipe, 0.0.0.0
[2013-06-21 18:23:11 -0400] awgross: vaq: try changing the key for it
[2013-06-21 18:23:13 -0400] awgross: the way it works
[2013-06-21 18:23:22 -0400] awgross: is it compiles node info from recipes, roles and environments
[2013-06-21 18:23:30 -0400] awgross: and then it grabs your local system data and puts in top
[2013-06-21 18:23:44 -0400] awgross: so if the local system data has a key called ip_address (which it does) you will always get that back
[2013-06-21 18:23:47 -0400] Matthaeus: Hello.  I'm having a problem with the lvm cookbook that I can't quite track down.  The chef error may be found here: http://pastie.org/8067271 and the relevant chef block may be found here:  http://pastie.org/8067275  Can someone shed light on this?
[2013-06-21 18:24:12 -0400] vaq: awgross: But I need the ip_address from the chef env to set a new ip with
[2013-06-21 18:24:38 -0400] vaq: awgross: I store that information in the chef server, to be able to boot a new machine through knife xapi
[2013-06-21 18:24:45 -0400] awgross: vaq: so make the key "new_ip_address"
[2013-06-21 18:24:52 -0400] vaq: awgross: it will then connect to chef and bootstrap through the env
[2013-06-21 18:25:15 -0400] awgross: oic, i was thinking during a run
[2013-06-21 18:25:32 -0400] vaq: awgross: I did, {"ip_address":"0.0.0.0"} is stored in the chef env test on the chef server
[2013-06-21 18:25:38 -0400] vaq: how do I retrieve the value from within a cookbook
[2013-06-21 18:25:44 -0400] vaq: when it's run
[2013-06-21 18:25:49 -0400] awgross: it will be
[2013-06-21 18:25:54 -0400] awgross: node['ip_address']
[2013-06-21 18:26:11 -0400] vaq: really? cool
[2013-06-21 18:26:18 -0400] zaargy: trying to work out if node attributes can be hashes?
[2013-06-21 18:26:38 -0400] awgross: yeah, but like i said, ohai will overwrite that tow hatever it finds locally because it uses the ip_address key
[2013-06-21 18:26:48 -0400] djustin: What would cause a global variable to lose it's value?
[2013-06-21 18:26:48 -0400] Matthaeus: vaq:  node['ip_address'] will be replaced by ohai with whatever your machine's actual ip address is.  if you put {'new_ip_address': '0.0.0.0'} in the environment, you can access that during runtime as node['new_ip_address']
[2013-06-21 18:26:58 -0400] djustin: I'm only ever setting it's value once
[2013-06-21 18:27:01 -0400] vaq: Matthaeus: thanks, good to know!
[2013-06-21 18:27:06 -0400] awgross: http://docs.opscode.com/essentials_cookbook_attribute_files.html#attribute-precedence
[2013-06-21 18:29:08 -0400] Matthaeus: Anyone able to help debug a LocalJumpError in a community cookbook?
[2013-06-21 18:36:16 -0400] sprack: I keep running into a ruby-ism caused by the way the remap vars. When I merge  my attribs into an already assigned hash I still get "Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'" if I try to modify anything in the new hash.
[2013-06-21 18:37:04 -0400] sprack: i can clone the attribs into a new hash and then merge it, but that seems terribly wasteful. Is there a better way....not override
[2013-06-21 18:37:07 -0400] gchristensen: sprack: do yourval = node['foo']['bar'].to_a I believe
[2013-06-21 18:37:15 -0400] chris613: Is it possible to have an LWRP defined in a cookbook that has a '-' in its name?
[2013-06-21 18:37:24 -0400] gchristensen: that'll break the connection from the node values
[2013-06-21 18:37:34 -0400] chris613: It seems to want to create symbols based on the cookbook name, and it's not working due to the - :-(
[2013-06-21 18:37:49 -0400] gchristensen: chris613: I believe it renames it to use _'s
[2013-06-21 18:38:09 -0400] chris613: gchristensen: That's a good answer! Thanks I'll try it
[2013-06-21 18:38:18 -0400] gchristensen: sure thing
[2013-06-21 18:40:43 -0400] gothaggis: hello, new to chef, have it up and running and created a ec2 instance with knife ec2.  when i try to boostrap the server using knife bootstrap ipaddress -N newname -x ubuntu --sudo it appears to process, then after saying "Creating a new client identity for newname using the validtor key" it says Chef encounted an error attempting to create the client "newname"
[2013-06-21 18:41:02 -0400] gothaggis: and then says Network Error: There was a network error connecting to the Chef Server
[2013-06-21 18:41:41 -0400] gothaggis: however I can connect to the Chef Server just fine.  The Chef Server is on the same network I am , however not accessible from outside - is the issue that the amazon ec2 server can't access chef?
[2013-06-21 18:41:48 -0400] Matthaeus: Third try:  I'm having a problem with setting the stripe_size in the lvm community cookbook.  When I specify a numeric value for the stripe_size, the cookbook fails with a LocalJumpError (unexpected return).  I have googled, but nothing has come up.
[2013-06-21 18:42:01 -0400] Matthaeus: gothaggis:  the ec2 instance must be able to reach your chef server directly.
[2013-06-21 18:42:10 -0400] gothaggis: ah ok, great.  thanks.
[2013-06-21 18:42:15 -0400] martinisoft: gothaggis: yes because it will need to get the cookbooks from somewhere
[2013-06-21 18:42:50 -0400] Otterley: Matthaeus, can you post the relevant code to pastebin/gist?
[2013-06-21 18:43:32 -0400] martinisoft: Anyone able to code review my way of 'gracefully' falling back when a data bag is not present and able to be decoded? https://github.com/martinisoft/funnies-cookbook/blob/master/recipes/default.rb#L24-L33
[2013-06-21 18:44:22 -0400] sprack: gchristensen: I don't think I can since all the attribs that are being merged are hashes. and .to_h is only in MRI-2.0
[2013-06-21 18:45:19 -0400] Otterley: martinisoft, is the exception ENOENT when the data bag can't be decrypted, or when it can't be located?
[2013-06-21 18:45:37 -0400] gchristensen: sprack: aye.. :/ sorry
[2013-06-21 18:45:57 -0400] martinisoft: Otterley: kind of a mixed bag, can be missing file or unable to read I think
[2013-06-21 18:46:17 -0400] Otterley: you may have your warnings mixed up then
[2013-06-21 18:46:28 -0400] msmoyer: cool, thanks
[2013-06-21 18:47:01 -0400] Matthaeus: Otterly:  The chef error may be found here: http://pastie.org/8067271and the relevant chef block may be found here: http://pastie.org/8067275
[2013-06-21 18:47:36 -0400] Otterley: Matthaeus, you can't use return
[2013-06-21 18:48:02 -0400] Matthaeus: Otterley:  this is a community cookbook.  Does this mean that there's a bug in the cookbook?
[2013-06-21 18:48:06 -0400] Otterley: Yes.
[2013-06-21 18:48:53 -0400] Otterley: it should be "lambda { |v| Math.log2(v) % 1 == 0 }"
[2013-06-21 18:49:16 -0400] Matthaeus: Very well.  Thank you.
[2013-06-21 18:49:29 -0400] Matthaeus: Just removing the return should work as well, yes?
[2013-06-21 18:49:34 -0400] Otterley: Yes
[2013-06-21 18:49:38 -0400] Matthaeus: Okay.
[2013-06-21 18:49:55 -0400] sprack: well this kinks it again. I still get the "Node attributes are read-only" when I try to clone it into a new var
[2013-06-21 18:50:41 -0400] martinisoft: Otterley: looks like https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb#L404-L406 for file missing
[2013-06-21 18:50:47 -0400] martinisoft: so I might be throwing the wrong one
[2013-06-21 18:50:57 -0400] martinisoft: err capturing the wrong exception
[2013-06-21 18:51:00 -0400] Matthaeus: sprack:  You may be going about something bass-ackwards.  What are you trying to accomplish?
[2013-06-21 18:53:29 -0400] sprack: Matthaeus: I have a hash of settings for services that depend on a grid of ohai values. if it find I have a nil for that grid location I want to fill it with a default that depends on the service. that's then sent as the hash through template variables
[2013-06-21 18:53:50 -0400] Matthaeus: Otterley:  Pull request sent.  Thanks for your help!
[2013-06-21 18:54:18 -0400] Matthaeus: sprack:  is your hash nested?
[2013-06-21 18:54:29 -0400] sprack: Matthaeus: yes
[2013-06-21 18:56:48 -0400] sprack: Matthaeus: looks like I'm not the first. http://tickets.opscode.com/browse/CHEF-3857
[2013-06-21 18:56:53 -0400] tabolario: hrm, is it normal behavior for chef server to change the environment of a node back to what it was before after i change the node with `knife node edit`?
[2013-06-21 18:57:05 -0400] tabolario: or am i just doing it wrong
[2013-06-21 18:58:39 -0400] Otterley: in production, I would advise against using "knife node edit" in favor of "knife node from file" - you want your SCM to be the source of truth
[2013-06-21 19:03:08 -0400] btm: @opscode special ohai code review, join: https://plus.google.com/hangouts/_/322a28799c564cd775e7ef2cab7770f512192203 watch: http://youtu.be/bUYjpc-hDRQ
[2013-06-21 19:27:33 -0400] chris613: Can someone point me to a good explanation of the one-repo-per-cookbook strategy and why it will make my life easier? (Not [yet?] using berks)
[2013-06-21 19:29:12 -0400] log1kal: I'm either losing my mind, doing something wrong, or chef_gem is broken in 10.26 when you try to pass it options. https://gist.github.com/logikal/5833204
[2013-06-21 19:31:39 -0400] log1kal: ah, I see everyone is probably in code review, I'll ask again later
[2013-06-21 19:35:18 -0400] programmerq: Hello. We're getting a "ERROR: NameError: uninitialized constant Chef::Provider::Service::Runit" when we run chef-client. our cookbook extends the runit cookbook. We have the runit cookbook in our metadata.rb dependency list. We're using chef 10.26.0. We're not sure what we're doing wrong.
[2013-06-21 19:38:35 -0400] nbouscal: programmerq: i had a somewhat similar error that was resolved by 'bundle update', not sure if that would help in your case.
[2013-06-21 19:39:38 -0400] programmerq: we're using the opscode omnibus rpm for chef. I don't know where I would go to do a bundle update within its embedded ruby.
[2013-06-21 19:39:54 -0400] nbouscal: programmerq: k, different scenario then. just thought i'd mention it in case
[2013-06-21 19:39:57 -0400] Otterley: yeah, don't do that
[2013-06-21 19:40:13 -0400] programmerq: k, I figured it was different. :)
[2013-06-21 19:40:14 -0400] Otterley: programmerq, is the default recipe in your wrapper cookbook calling "include_recipe 'runit'" ?
[2013-06-21 19:41:01 -0400] programmerq: Otterley: I don't think we have a default recipe. The strangest part is that it seems to work in some of our environments, but not all of them. I can certainly add a default recipe with include_recipe 'runit' inside it.
[2013-06-21 19:41:08 -0400] programmerq: one moment.
[2013-06-21 19:41:53 -0400] cjs226: being that data bags (and roles) aren't versioned we're looking at expanding to 2 chef servers, prod/non-prod.  is there any possibility of a 'federated' search across multiple chef servers?
[2013-06-21 19:41:55 -0400] Otterley: it's not supposed to be necessary.
[2013-06-21 19:42:46 -0400] Otterley: programmerq, was the cookbook ever uploaded before the metadata.rb declared a dependency on runit?
[2013-06-21 19:43:09 -0400] programmerq: Otterley: not in this chef server, no
[2013-06-21 19:43:22 -0400] programmerq: in the chef servers that we have that aren't having the problem, yes.
[2013-06-21 19:43:30 -0400] Otterley: huh.
[2013-06-21 19:43:52 -0400] Otterley: just for grins, it would be useful to check the cookbook cache on the nodes on which it's failing to see whether the metadata.rb is correct in the cached copy
[2013-06-21 19:44:16 -0400] Otterley: we've seen sporadic issues with cookbooks not refreshing after we've updated version constraints in environments
[2013-06-21 19:45:14 -0400] cburroughs: been googling around for a bit without luck, is there already a cookbook for nicstat hiding somewhere? https://blogs.oracle.com/timc/entry/nicstat_the_solaris_and_linux
[2013-06-21 19:46:02 -0400] Otterley: do you mean a cookbook that will install it?
[2013-06-21 19:46:12 -0400] cburroughs: yeah
[2013-06-21 19:46:42 -0400] cburroughs: could not find an rpm I liked.  https://github.com/joyent/smartos_cookbooks/blob/master/cookbooks/smartos/recipes/nicstat.rb just uses a binary smartos blob it seems
[2013-06-21 19:47:13 -0400] Otterley: nothing in the DAG repo?
[2013-06-21 19:49:06 -0400] cburroughs: hmm, found a fedora one that might work
[2013-06-21 19:51:02 -0400] tylercipriani: How does having a ~/.chef/knife.rb and having a .chef/knife.rb in your chef repo on your management machine work? Or does it work?
[2013-06-21 19:51:37 -0400] drgage: hi. i have noticed that official opscode cookbooks for software with a web ui such as munin create a VirtualHost in sites-enabled instead of using the default conf.d/ setup. Why is this? I don't want a vhost so it seems like i have to back out these changes to get the default behavior?
[2013-06-21 19:51:39 -0400] cburroughs: yeah I'm just apparently terirble at google, there are some fedora ones that lookgood
[2013-06-21 19:53:40 -0400] sprack: Matthaeus: I figured out a way around it. Marshalling the object gives me a deep copy i can use and discard.
[2013-06-21 19:53:48 -0400] freerobby: When I run the chef-server reconfigure tool, is there any way to pass in an option to override the server name? I'm on a box where it's only locally resolvable, which causes problems when external clients need to connect to it
[2013-06-21 19:54:20 -0400] rayrod2030: Ok what's a good solution for the following problem.  I have a war I'd like to deploy to tomcat.  I have a properties file that needs to run in the applicatons classpath but I don't want my chef run to have to wait for a war to explode then parse the properties file template with chef attributes.  Is there any way to place that properties file outside of the application folder in tomcat?
[2013-06-21 19:55:43 -0400] Matthaeus: sprack:  glad to hear.  that's hackish, but probably a lot less dev time than a recursive object clone would be.
[2013-06-21 19:56:35 -0400] drgage: rayrod2030: in server.xml you can do something like this inside your Context: <Parameter name="configFile" value="/var/foo/prod/config.cfg"/>
[2013-06-21 19:58:04 -0400] rayrod2030: drgage: that should work.  Thank you.
[2013-06-21 20:10:05 -0400] btm: @opscode cookbook code review, join: https://plus.google.com/hangouts/_/12609b36e4853be84b837404d5f0396cf7b560a9, watch: http://youtu.be/_qxkKHMnqsU
[2013-06-21 20:40:00 -0400] maraca: I installed the latest chef client (11.4.4.2) on ubuntu 12.04
[2013-06-21 20:40:02 -0400] maraca: not im getting this
[2013-06-21 20:40:04 -0400] maraca: martin@pickle:~$ knife
[2013-06-21 20:40:04 -0400] maraca: /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0)
[2013-06-21 20:40:21 -0400] maraca: any idea what's causing this?
[2013-06-21 20:47:49 -0400] suffix: how would I go about running a script as a specific user (on the node) in chef?
[2013-06-21 20:57:25 -0400] cwj: suffix: http://docs.opscode.com/chef/resources.html#execute would be one way
[2013-06-21 20:57:57 -0400] suffix: nice
[2013-06-21 20:57:57 -0400] suffix: thansk
[2013-06-21 20:58:00 -0400] cwj: drop off the script and then use an execute resource to run it
[2013-06-21 20:58:03 -0400] cwj: np
[2013-06-21 21:13:13 -0400] scalp42: any hits on using the omnibus client when bootstrapping new nodes instead of the gem ?
[2013-06-21 21:13:22 -0400] scalp42: s/hits/hints
[2013-06-21 21:14:06 -0400] cinen: just need to customize the bootstrap template
[2013-06-21 21:14:25 -0400] scalp42: okay making sure
[2013-06-21 21:14:29 -0400] scalp42: thanks cinen
[2013-06-21 21:14:43 -0400] cinen: np
[2013-06-21 21:15:11 -0400] scalp42: im just curious regarding ruby versions on hosts if people update ruby or use omnibus one
[2013-06-21 21:15:23 -0400] scalp42: (for things like libshadow and stuff)
[2013-06-21 21:17:00 -0400] cinen: personally I use a custom ruby package and just install the gem
[2013-06-21 21:18:55 -0400] nbouscal: Trying to install the opscode postgresql::server recipe, getting the error "Uninitialized constant Chef::Application", any ideas?
[2013-06-21 21:22:38 -0400] wildahunden: trying to track down and issue we think might be related to chef-client 10.26.0 for windows.  Is there a location where we can download that release to install on a test server?
[2013-06-21 21:26:14 -0400] aaarnett123: I'm setting up my first chef server based on http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/... Everything with install and 'chef-server-ctl reconfigure' looked to work, but getting some errors with 'chef-server-ctl test' and subsequent 'knife configure -i' using 11.4.4... Been investigating most of the day but just stuck... Don't know what I don't know... Any suggestions on where to go from here, particularly to understand the errors
[2013-06-21 21:27:14 -0400] dwoods: I'm having an issue with the directory resource - I have an mode '777' and action :create, and I keep getting a "file exists" error.  I thought chef should ignore if the file exists.  Is there anything that might cause this?  thanks
[2013-06-21 21:36:12 -0400] dwoods: nevermind - the directory turned out to already be a symlink, to a non-existant target
[2013-06-21 21:36:40 -0400] benkay: working on a databag, and ran into some confusion. i think that I want a .json file with all of my users in it, but the docs seem to point towards a single file for each user. could I stick all of my users in data_bags/users.json and format each user as a single json entry?
[2013-06-21 21:37:47 -0400] benkay: { "username" : "thisluser"
[2013-06-21 21:37:47 -0400] benkay: "password" : "somehash"}
[2013-06-21 21:37:47 -0400] benkay: etc
[2013-06-21 21:43:03 -0400] Matthaeus: benkay:  one user, one file.
[2013-06-21 21:43:10 -0400] awayne: afternoon all
[2013-06-21 21:43:12 -0400] Matthaeus: one databag, one directory.
[2013-06-21 21:44:06 -0400] benkay: thanks matthaeus.
[2013-06-21 21:44:12 -0400] Matthaeus: np
[2013-06-21 21:46:35 -0400] jmickle: hello
[2013-06-21 21:47:01 -0400] pdufour: hello
[2013-06-21 21:47:46 -0400] benkay: pong
[2013-06-21 21:48:12 -0400] jmickle: I'm trying to upgrade chef-client 10 to 11 on all my boxes
[2013-06-21 21:48:19 -0400] jmickle: ive used apt to install
[2013-06-21 21:48:26 -0400] jmickle: does anyone have any advice on this?
[2013-06-21 21:48:38 -0400] gleam: there are debs for chef 11
[2013-06-21 21:50:13 -0400] jmickle: does the apt repo contain the 11?
[2013-06-21 21:50:53 -0400] gleam: no, the apt repo is discontinued
[2013-06-21 21:50:57 -0400] gleam: the omnibus installer script will download it
[2013-06-21 21:51:02 -0400] gleam: you can either run your own repo or use the script on all the nodes
[2013-06-21 21:52:55 -0400] jmickle: yeah thats what i was thinking
[2013-06-21 21:53:22 -0400] jmickle: so would you say the best approach might be to apt remove chef-client
[2013-06-21 21:53:32 -0400] jmickle: then run the omnibus installer?
[2013-06-21 22:15:43 -0400] cbarraford: question, if my chef server is 10.18.2, can i run 10.26.0 clients??
[2013-06-21 22:19:15 -0400] jessicab1: cbarraford: yep, they dont need to be the same version.. you can even run chef 11 clients
[2013-06-21 22:20:40 -0400] cbarraford: jessicab1: sweet thanks!
[2013-06-21 22:56:25 -0400] StandardToaster: Hey guys, If i'm writing two recipes in the same cookbook, that share a couple of elements from a config file, is there a preferred way to allow both recipes to modify the file? Specifically, cobbler has an optional web interface that takes options from both of the primary files, but i figure it's best to enable/disable it via a recipe, rather than some kind of enabled attribute flag.
[2013-06-21 22:58:41 -0400] KineticKittens: Hello
[2013-06-21 22:59:27 -0400] KineticKittens: I am a beginning Chef-er and needed some help getting through a tutorial
[2013-06-21 22:59:40 -0400] KineticKittens: I keep getting this message: Recipe Compile Error in /var/chef/cache/cookbooks/database/recipes/master.rb
[2013-06-21 23:00:12 -0400] KineticKittens: I have done some Google research but sadly I cannot seem to find a clear answer (clear enough for a beginner)
[2013-06-21 23:00:14 -0400] Matthaeus: KineticKittens: Please paste the error in a gist or a pastie.org and provide us the link.
[2013-06-21 23:00:23 -0400] KineticKittens: Okay
[2013-06-21 23:01:26 -0400] KineticKittens: http://pastie.org/8067928
[2013-06-21 23:01:49 -0400] KineticKittens: I am following this guide: http://wiki.opscode.com/display/chef/Build+a+Django+Stack
[2013-06-21 23:02:21 -0400] KineticKittens: It failed when I was trying to launch the first instance
[2013-06-21 23:16:41 -0400] vaq: Hi, I am trying to retrieve values from a environment inside a template action with: :ipaddr => node['network']['ipaddr']
[2013-06-21 23:16:52 -0400] vaq: 47: syntax error, unexpected tASSOC, expecting keyword_end
[2013-06-21 23:18:17 -0400] vaq: What am I doing wrong?
[2013-06-21 23:19:06 -0400] benkay: http://docs.opscode.com/resource_user.html
[2013-06-21 23:19:18 -0400] benkay: you mean to tell me the default users provider doesn't handle ssh keys?
[2013-06-21 23:26:38 -0400] cwj: benkay: nope, but the users_manage lwrp from the 'users' cookbook does
[2013-06-21 23:26:38 -0400] cwj: http://cookbooks.opscode.com/cookbooks/users
[2013-06-21 23:28:44 -0400] benkay: cwj: seen it
[2013-06-21 23:29:20 -0400] benkay: trying to figure out which i feel least bad about: installing a new cookbook to get our users and keys into VCS or shelling out and just making the damn keys happen.
[2013-06-21 23:30:21 -0400] KineticKittens: ?
[2013-06-21 23:36:27 -0400] cwj: benkay: i think you'll find that chef tends to favor basic primitives for the built-in resources which are intended to be used together to achieve the higher order configuration, instead of dictating (for example) where ssh keys come from in a low-level way thats hard to change
[2013-06-21 23:36:48 -0400] cwj: that said, writing your own cookbook that shells out to do the work is valid if thats what works for you
[2013-06-21 23:38:38 -0400] benkay: doing stuff the chef way is very definitely a secondary concern to automating business recovery :)
[2013-06-21 23:39:11 -0400] benkay: i have no idea how this client would ever recover their cluster with codebase in current state
[2013-06-21 23:39:20 -0400] benkay: actually i do
[2013-06-21 23:39:26 -0400] benkay: $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
[2013-06-21 23:52:00 -0400] nbouscal: Looks like it's impossible to set a version to compile nginx from source using the opscode nginx cookbook, because it gets overridden by the ohai automatic attribute. Since nginx changes pretty fast, I'd really like to use a newer version. Any way of doing that that I've missed, other than writing my own nginx cookbook?
[2013-06-21 23:54:45 -0400] cwj: nbouscal: i have stuck with the 0.99.2 version of the opscode nginx cookbook, still works for me under latest chef 10
[2013-06-21 23:55:22 -0400] cwj: i havent tried this one, but if you are into openresty it might be usable http://community.opscode.com/cookbooks/openresty
[2013-06-21 23:56:04 -0400] nbouscal: cwj: First I've ever heard of openresty, actually
[2013-06-21 23:56:15 -0400] nbouscal: cwj: I'm a developer playing at ops :P
[2013-06-21 23:56:42 -0400] cwj: ive never tried it myself but ive heard good things
[2013-06-21 23:59:21 -0400] nbouscal: cwj: Tried running with 0.99, but chef is yelling at me for it and I don't know enough to dig my way out of that. I think I'll just put together my own nginx cookbook, probably won't take too long since I only have to worry about one platform. Thanks for the help
[2013-06-21 23:59:29 -0400] awayne: I can only imagine what I'm missing here. I'm trying to define a LWRP and am encountering "undefined method `source' for nil:NilClass". I'm sure I'm missing something very obvious.

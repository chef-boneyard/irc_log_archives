[2013-06-01 00:21:18 -0400] banachtarski: anybody?
[2013-06-01 00:21:22 -0400] banachtarski: this is frustrating
[2013-06-01 00:21:35 -0400] banachtarski: it installs 11.4.2 and proceeds to use 11.4.4 immediately afterwards
[2013-06-01 00:21:42 -0400] banachtarski: and 11.4.4 breaks the apt cookbook
[2013-06-01 00:24:51 -0400] coderanger: banachtarski: What do you mean by 'use 11.4.4'?
[2013-06-01 00:28:13 -0400] monokrome: Does anyone in here use the cookbook-cloudmonitoring cookbook?
[2013-06-01 00:29:08 -0400] banachtarski: @coderanger the chef-client version on bootstrap
[2013-06-01 00:29:26 -0400] coderanger: banachtarski: You said it installs 11.4.2 though
[2013-06-01 00:29:32 -0400] banachtarski: @coderanger it does
[2013-06-01 00:29:51 -0400] banachtarski: @coderanger and it then does a run with chef-client-11.4.4 immediately afterwards
[2013-06-01 00:29:55 -0400] banachtarski: and i have no idea why
[2013-06-01 00:30:00 -0400] coderanger: Where is that version coming from?
[2013-06-01 00:30:14 -0400] coderanger: Do you have the chef-client cookbook setup to auto-upgrade perhaps?
[2013-06-01 00:30:49 -0400] banachtarski: this is before any cookbooks are applied
[2013-06-01 00:30:56 -0400] banachtarski: 11.4.4 fails on the first cookbook, apt
[2013-06-01 00:31:04 -0400] banachtarski: because of some bug with the LWRP code
[2013-06-01 00:32:36 -0400] coderanger: So it isn't installing 11.4.2 then, it is installing 11.4.4?
[2013-06-01 00:32:54 -0400] banachtarski: hmm actually i see an error message with 11.4.2
[2013-06-01 00:33:00 -0400] banachtarski: it says it can't find it in any repository
[2013-06-01 00:33:34 -0400] coderanger: Can you please pastebin the command you are running and the output?
[2013-06-01 00:35:16 -0400] banachtarski: http://pastebin.com/Dq6y2Kbr
[2013-06-01 00:35:39 -0400] banachtarski: in the -d file, I manually change the chef client version to 11.4.1
[2013-06-01 00:35:47 -0400] banachtarski: i tried 11.4.2 before with no luck
[2013-06-01 00:40:22 -0400] banachtarski: i did a gem list -r and it looks like the only chef version available is 11.4.4
[2013-06-01 00:40:31 -0400] banachtarski: what happened? I was able to bootstrap a node fine yesterday
[2013-06-01 00:41:03 -0400] coderanger: I see 11.4.2 up there
[2013-06-01 00:41:12 -0400] coderanger: 11.4.1 isn't a release though
[2013-06-01 00:41:15 -0400] coderanger: did you typo that?
[2013-06-01 00:42:44 -0400] coderanger: Also we reeeeeeally don't recommend installing via rubygems
[2013-06-01 00:43:31 -0400] banachtarski: how should i bootstrap then?
[2013-06-01 00:43:55 -0400] banachtarski: well, i had to manually add a gem source, and then it successfully installed 11.4.2 but then proceeded to use 11.4.4
[2013-06-01 00:47:33 -0400] coderanger: banachtarski: Use the omnibus installer packages
[2013-06-01 01:40:58 -0400] thehar: ohai
[2013-06-01 01:44:56 -0400] coderanger: Woot, first run of the hosted chef starter kit is a go!
[2013-06-01 01:45:59 -0400] coderanger: Getting started with chef is going to be sooooo easy
[2013-06-01 01:47:04 -0400] thehar: it's a jeremydei
[2013-06-01 03:19:12 -0400] ponyofdeath: hi, i seem to have gotten my environment wich knife as an yaml file but am unable to upload it as yaml?
[2013-06-01 03:19:40 -0400] ponyofdeath: http://paste.ubuntu.com/5721795 is the error i get
[2013-06-01 03:21:53 -0400] coderanger: ponyofdeath: I ma not aware of any Yaml support in any of our files
[2013-06-01 03:22:04 -0400] coderanger: ponyofdeath: spiceweasel does its own IO
[2013-06-01 03:22:09 -0400] coderanger: but other than that, no idea
[2013-06-01 03:22:58 -0400] ponyofdeath: knife environment show -F yaml
[2013-06-01 03:23:00 -0400] ponyofdeath: is how i got it
[2013-06-01 03:23:15 -0400] coderanger: That is definitely not something I think we have input support for :)
[2013-06-01 03:23:21 -0400] coderanger: You can use JSON though
[2013-06-01 03:23:28 -0400] ponyofdeath: :)
[2013-06-01 03:23:34 -0400] ponyofdeath: thx
[2013-06-01 03:23:37 -0400] coderanger: Well, if we do support it
[2013-06-01 03:23:41 -0400] coderanger: you would want the filename to be .yml
[2013-06-01 03:23:43 -0400] coderanger: not .rb
[2013-06-01 03:23:48 -0400] coderanger: So try that
[2013-06-01 03:23:49 -0400] ponyofdeath: tried
[2013-06-01 03:24:15 -0400] coderanger: Then yeah, probably not supported for input
[2013-06-01 03:25:23 -0400] ponyofdeath: ok thanks!
[2013-06-01 07:23:57 -0400] coderanger: Woot, first ever resource converge from Python
[2013-06-01 07:27:15 -0400] flaccid: coderanger: sick
[2013-06-01 07:40:28 -0400] coderanger: https://github.com/coderanger/chef-funnel#example-python-receipe
[2013-06-01 07:40:32 -0400] coderanger: If anyone dares
[2013-06-01 07:40:43 -0400] Guest79901: ok, im having problems with a package installation on centos system. The package in question is mongodb, and it seems to be failing whenever I provide a version number. To the best I can tell, the reason for this is that 10gen chose to implement version control by suffixing their package name with the version
[2013-06-01 07:41:42 -0400] coderanger: Guest79901: What does the package name look like?
[2013-06-01 07:42:17 -0400] Guest79901: default[:mongodb][:package_name] = "mongo-10gen-server"
[2013-06-01 07:42:47 -0400] coderanger: That seems sane to me, do they just not populate the version field in the rpm correctly maybe?
[2013-06-01 07:42:57 -0400] Guest79901: http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/#manage-installed-versions
[2013-06-01 07:43:10 -0400] Guest79901: mongo does something fishy (i think)
[2013-06-01 07:43:32 -0400] Guest79901: when you want a fixed version, they want you to use a different package name, and not provide a version to yum
[2013-06-01 07:43:49 -0400] coderanger: Guest79901: Yeah, sounds like they don't have a normal yum repo setup
[2013-06-01 07:43:52 -0400] coderanger: you might be out of luck
[2013-06-01 07:44:03 -0400] Guest79901: I tried a script I thought would work, but it didnt make sense
[2013-06-01 07:44:17 -0400] Guest79901: lemme find a pastebin quick
[2013-06-01 07:44:20 -0400] coderanger: We just call out to yum, so if there is any wonkiness, it is almost certainly on their side
[2013-06-01 07:45:25 -0400] Guest79901: http://pastebin.com/KDVp0t4y
[2013-06-01 07:45:38 -0400] Guest79901: the bottom of that is how its currently working in my python based runfile i used to use
[2013-06-01 07:46:06 -0400] Guest79901: the top of the conditional is what I added thinking that might work, but its not
[2013-06-01 07:47:06 -0400] Guest79901: and the error I get with that is "not a valid version, and no candidate version available"
[2013-06-01 07:48:22 -0400] coderanger: Guest79901: Use platform_family?('rhel')
[2013-06-01 07:48:38 -0400] coderanger: Should be more accurate anyway
[2013-06-01 07:49:00 -0400] coderanger: Also just nuke the version line
[2013-06-01 07:54:17 -0400] Guest79901: nuked the version line, its still saying "yum_package[mongo-10gen-server-2.4.3] Chef::Exceptions::Package: No version specified, and no candidate version available for mongo-10gen-server-2.4.3
[2013-06-01 07:54:44 -0400] flaccid: Guest32714: does it even support rhel or centos?
[2013-06-01 07:54:53 -0400] flaccid: this is edelight?
[2013-06-01 07:54:56 -0400] coderanger: flaccid: Are you sure you have the yum repo setup?
[2013-06-01 07:55:04 -0400] flaccid: coderanger: i'm not using it
[2013-06-01 07:55:12 -0400] coderanger: er, yeah, that was for Guest79901
[2013-06-01 07:55:28 -0400] coderanger: My brain is currently hitting a null pointer exception I think
[2013-06-01 07:55:48 -0400] flaccid: Guest32714: read https://github.com/edelight/chef-mongodb#10gen-repository
[2013-06-01 07:55:54 -0400] Guest79901: this is for centos, the mongodb cookbook i forked had rhel support from what it seemed in the docs, including an rpm depends
[2013-06-01 07:56:05 -0400] Guest79901: i wasnt using edelight
[2013-06-01 07:56:22 -0400] flaccid: Guest32714: i don't know what you are using and looks like that fork hasn't pull requested back
[2013-06-01 07:56:45 -0400] Guest79901: actually scratch that, it was
[2013-06-01 07:56:50 -0400] Guest79901: correct, ive been working on it today
[2013-06-01 07:57:14 -0400] Guest79901: the only thing ive been working out is trying to get it to run with a version on the centos stack
[2013-06-01 07:57:21 -0400] Guest79901: in fact, thats the only bit changed
[2013-06-01 07:57:44 -0400] flaccid: rhel or fedora is supported not centos  https://github.com/edelight/chef-mongodb/blob/master/recipes/10gen_repo.rb#L25
[2013-06-01 07:58:10 -0400] coderanger: flaccid: No
[2013-06-01 07:58:15 -0400] coderanger: Thats platform_family
[2013-06-01 07:58:28 -0400] coderanger: rhel family == rhel, centos, scilin, amazon, etc
[2013-06-01 07:58:29 -0400] Guest79901: thats a platform family check
[2013-06-01 07:58:35 -0400] Guest79901: and centos is recognized as rhel
[2013-06-01 07:58:43 -0400] Guest79901: so im hitting rhel conditionals
[2013-06-01 07:58:48 -0400] flaccid: i forgot they were in bed together
[2013-06-01 07:58:57 -0400] flaccid: Guest32714: you may like to pastebin your debug output of the run
[2013-06-01 07:59:06 -0400] Guest79901: its why that script was originally just checking the platform, considering this may be a centos only issue
[2013-06-01 07:59:19 -0400] Guest79901: sure thing
[2013-06-01 08:00:55 -0400] Guest79901: http://pastebin.com/KCJ0Me50
[2013-06-01 08:01:48 -0400] Guest79901: any ideas at all are welcome, ive been knocking my head against this for several hours now
[2013-06-01 08:02:24 -0400] Guest79901: the default install worked fyi, with the default package and no version specified, but the moment you added a version that failed
[2013-06-01 08:02:35 -0400] flaccid: Guest32714: i guess mongo-10gen-server-2.4.3 doesn't exist?
[2013-06-01 08:02:38 -0400] flaccid: yum install mongo-10gen-server-2.4.3
[2013-06-01 08:02:38 -0400] Guest79901: (and i cannot use the default as I can't have my replica sets accidently migrating)
[2013-06-01 08:04:19 -0400] Guest79901: for the record, here is it working from the same server im trying to deploy to
[2013-06-01 08:04:20 -0400] Guest79901: http://pastebin.com/Y45MDaDB
[2013-06-01 08:04:29 -0400] Guest79901: but that did give me something to try i think
[2013-06-01 08:04:55 -0400] Guest79901: it seems like its something of a package alias
[2013-06-01 08:05:15 -0400] Guest79901: any ideas?
[2013-06-01 08:05:18 -0400] flaccid: what you are running doesn't appear to be the master of edelight
[2013-06-01 08:05:59 -0400] flaccid: obviously yum_package[mongo-10gen-server-2.4.3] is not going to work because there is no such package
[2013-06-01 08:06:25 -0400] flaccid: https://github.com/edelight/chef-mongodb/blob/master/recipes/default.rb#L22
[2013-06-01 08:07:43 -0400] Guest79901: its not the master of edelight, the master of edelight was pretty nieve in some aspects. would not take versions at all on the centos, and config servers had no overrides. both of these limited migrational capability, and i until the code works, im not putting out a pull request
[2013-06-01 08:08:25 -0400] flaccid: how can we inspect that if you don't cite it?
[2013-06-01 08:08:53 -0400] Guest79901: I posted the change on pastebin earlier up
[2013-06-01 08:09:04 -0400] Guest79901: im not sure what you need me to do, but ill gladly do it
[2013-06-01 08:09:21 -0400] flaccid: show me your fork
[2013-06-01 08:10:12 -0400] Guest79901: its not a fork, its a clone, i have no knowledge of forking. the clone was made earlier today.
[2013-06-01 08:10:30 -0400] flaccid: a git clone Guest32714  ?
[2013-06-01 08:10:34 -0400] Guest79901: correct
[2013-06-01 08:10:43 -0400] flaccid: Guest32714: what is the repos url?
[2013-06-01 08:10:45 -0400] Guest79901: i git cloned to a private bitbucket, and i fork from my local
[2013-06-01 08:10:51 -0400] Guest79901: its a private bitbucket
[2013-06-01 08:10:56 -0400] Guest79901: the companies
[2013-06-01 08:10:58 -0400] flaccid: can't help you then sorry
[2013-06-01 08:11:26 -0400] Guest79901: i have absolutely no problem forking out the 2 changes, but considering i just learned ruby 2 hours ago I don't think im of adaquate skill to be making such request
[2013-06-01 08:11:58 -0400] Guest79901: im not even sure what i am doing is solid or correct, it took me nearly 8 hours to get the small cloud going with chef open server.
[2013-06-01 08:13:09 -0400] flaccid: happy to help you if you fork it on github
[2013-06-01 08:13:16 -0400] flaccid: can't help with something i can't see
[2013-06-01 08:13:25 -0400] flaccid: aka closed source
[2013-06-01 08:13:45 -0400] flaccid: flaccid: obviously yum_package[mongo-10gen-server-2.4.3] is not going to work because there is no such package
[2013-06-01 08:14:02 -0400] flaccid: from http://docs.mongodb.org/manual/tutorial/install-mongodb-on-red-hat-centos-or-fedora-linux/#manage-installed-versions "yum install mongo-10gen-2.2.3 mongo-10gen-server-2.2.3"
[2013-06-01 08:17:02 -0400] Guest79901: the problem is the repository is my entire chef repo, not just cookbooks, is it possible for me to fork just the cookbook?
[2013-06-01 08:17:31 -0400] flaccid: Guest32714: yes, you github fork https://github.com/edelight/chef-mongodb
[2013-06-01 08:17:40 -0400] Guest79901: yea, and the command works with yum, but its not working in the ruby package, its giving that version error from an earlier pastebin
[2013-06-01 08:17:45 -0400] flaccid: copying a cookbook's files to another directory != forking
[2013-06-01 08:18:21 -0400] jtgiri_: hey guys , is there a good community cookbook which has both unit tests and integration tests added ? I am looking for one for good references
[2013-06-01 08:18:43 -0400] flaccid: Guest32714: what version of centos are you using?
[2013-06-01 08:18:54 -0400] Guest79901: 5.4 x64
[2013-06-01 08:18:58 -0400] Guest79901: *6.4 x64
[2013-06-01 08:19:12 -0400] Guest79901: all 9 nodes
[2013-06-01 08:19:20 -0400] flaccid: ok, i will try master of the cookbook on that
[2013-06-01 08:21:25 -0400] Guest79901: http://pastebin.com/pzECH3sN
[2013-06-01 08:21:37 -0400] Guest79901: thats the entire file, changes inclusive
[2013-06-01 08:21:50 -0400] Guest79901: i also added an include for bson since that was failing on the system
[2013-06-01 08:22:01 -0400] Guest79901: and i dont understand dependencies properly so i shoved it in there
[2013-06-01 08:22:53 -0400] Guest79901: what is mastering a cookbook?
[2013-06-01 08:23:01 -0400] flaccid: i'm not going to look at it
[2013-06-01 08:26:45 -0400] Guest79901: I wrote those changes, so im copyright holder for them, and i hearby declare my changes public domain. this is part of R&D not actual deployment, i just can't share all the nitty gritty details of our deployment, since im manually including databags with sensitive information that is checked in.
[2013-06-01 08:26:57 -0400] flaccid: lol
[2013-06-01 08:27:22 -0400] Guest79901: and i have no clue how to use git at that level, I work in a predominantly SVN shop
[2013-06-01 08:27:42 -0400] flaccid: be a good idea to learn git, github and open source
[2013-06-01 08:29:02 -0400] flaccid: and licensing for that matter :)
[2013-06-01 08:29:15 -0400] Guest79901: i understand git from the command line. i have a thing against github personally (nothing against open source, was salted at a convention)
[2013-06-01 08:29:43 -0400] Guest79901: at what point is it proper to fork or do a pull request
[2013-06-01 08:29:51 -0400] flaccid: thats going to be an issue if you want to use github cookbooks
[2013-06-01 08:29:53 -0400] Guest79901: i mean, im still writing it
[2013-06-01 08:30:22 -0400] flaccid: the point where it works and the code is good enough to request pull back
[2013-06-01 08:30:40 -0400] Guest79901: which neither of those points are satisfied to my understanding
[2013-06-01 08:31:04 -0400] flaccid: you don't need a pull request to push it to your fork
[2013-06-01 08:31:21 -0400] flaccid: Guest32714: https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCwQFjAA&url=https%3A%2F%2Fhelp.github.com%2Farticles%2Ffork-a-repo&ei=ULGpUbCIJpDbkgW_o4GoAQ&usg=AFQjCNGWA00564ujSejYonBbt5iEnWy_AA&sig2=3D9XmZyJag57jhlLlW0AEg&bvm=bv.47244034,d.dGI
[2013-06-01 08:31:25 -0400] Guest79901: so in other words, i should have a seperate repository for these cookbooks, which are forks
[2013-06-01 08:31:39 -0400] flaccid: the above link will show you
[2013-06-01 08:32:18 -0400] Guest79901: ok
[2013-06-01 08:32:26 -0400] flaccid: i'm going to test this latest edelight master in vagrant with ubuntu, then i'll chuck it in ec2 for crapos 6.4
[2013-06-01 08:33:18 -0400] Guest79901: is that just a bash at my neivity, or is something wrong with centos?
[2013-06-01 08:33:35 -0400] Guest79901: barring solaris systems, ive rarely had more stable units
[2013-06-01 08:34:19 -0400] flaccid: nothing to do with you, its just want i call centos
[2013-06-01 08:44:57 -0400] flaccid: Guest32714: your run_list at a minimum is "run_list": [ "mongodb::10gen_repo", "mongodb" ] right?
[2013-06-01 08:45:28 -0400] flaccid: Guest32714: would be great if you chose a real nickname too
[2013-06-01 08:46:08 -0400] rpcesar: correct
[2013-06-01 08:46:35 -0400] rpcesar: and I did a bit ago
[2013-06-01 08:46:40 -0400] flaccid: rpcesar: who are you?
[2013-06-01 08:46:49 -0400] rpcesar: yes, thats exactly the run list
[2013-06-01 08:47:04 -0400] flaccid: Guest32714 do you know this rpcesar guy?
[2013-06-01 08:47:06 -0400] rpcesar: the "guest" you were talking to
[2013-06-01 08:47:21 -0400] flaccid: oh right, so you need to learn chef, git, github and irc. lots of work to do
[2013-06-01 08:47:36 -0400] rpcesar: it was Guest79901 , using webchat.freenode. didnt sign in. im rpcesar
[2013-06-01 08:47:57 -0400] rpcesar: lmao, right, the work never ends
[2013-06-01 08:51:01 -0400] rpcesar: its 4am in the morning, and im trying to rush-job a cloud deploy of a rather complex stack from a single server because my client cannot scale vertically. I have no bearings in ruby, I chose python. I dont use IRC programs because they are noisy, I just log in via webchat and whether or not I get my password right any given day dtermines whether I log in as a guest or as myself
[2013-06-01 08:52:00 -0400] rpcesar: I was forced to learn ruby today, because I needed a good deployment option, and chef seemed like the best fit. I already had initialization scripts written for the stack, deployable using a redis messaging pump and transmitting host files over git
[2013-06-01 08:53:05 -0400] rpcesar: im simply a software engineer being run over by insane client who believes that a production-ready cloud deploy should be a 1 day job
[2013-06-01 08:53:44 -0400] rpcesar: so please, stop trying to be insulting
[2013-06-01 08:55:53 -0400] flaccid: i'm not insulting you rpcesar, im spending time helping you
[2013-06-01 08:56:15 -0400] flaccid: customers won't things asap, that sounds like every day at work for me
[2013-06-01 08:56:43 -0400] flaccid: ubuntu worked fine in vagrant, i will push to cloud and try centos 6.4
[2013-06-01 08:58:00 -0400] rpcesar: thank you for your help, its been a very stressful day
[2013-06-01 08:58:22 -0400] flaccid: yeah sorry; won't=want
[2013-06-01 08:58:40 -0400] rpcesar: I got ya
[2013-06-01 08:58:53 -0400] flaccid: i've pushed the cache to https://github.com/rightscale-blueprints/mongodb
[2013-06-01 09:04:24 -0400] rpcesar: have you tested that on centos? im not quite sure what to do with that since its a different branch, can't pull updates, and can't identify any changes.
[2013-06-01 09:04:43 -0400] rpcesar: different fork i mean
[2013-06-01 09:04:50 -0400] flaccid: thats the problem with copying
[2013-06-01 09:05:00 -0400] flaccid: https://github.com/edelight/chef-mongodb/blob/master/metadata.rb has errors, so i will need to fork myself and contribute
[2013-06-01 09:05:14 -0400] rpcesar: and not sure what this vagrant is either
[2013-06-01 09:06:13 -0400] flaccid: try google
[2013-06-01 09:08:27 -0400] rpcesar: thanks, i never would have thought to try that.
[2013-06-01 09:09:33 -0400] flaccid: common mistake
[2013-06-01 09:18:16 -0400] flaccid: rpcesar: this is what you should be doing https://github.com/edelight/chef-mongodb/pull/123
[2013-06-01 09:24:13 -0400] rpcesar: yea, ive seen it done, i just havent established the process.
[2013-06-01 09:24:59 -0400] rpcesar: i can only do/learn one thing at a time, and the order of which is determined by a neive individual who pays for my time
[2013-06-01 09:26:41 -0400] Cope: moin
[2013-06-01 09:32:14 -0400] flaccid: rpcesar: its one button. i gave the link earlier
[2013-06-01 09:42:47 -0400] rpcesar: ok, well thanks for your help mate. the problem was related to aliasing by mongo in the repository, and I fixed it by appending "-mongo_1" to the version, which is what it seems to alias to. not really sure how to implement it properly programmatically, but this works
[2013-06-01 09:59:48 -0400] flaccid: right so i was right, rpcesar was referencing a package that doesn't exist.
[2013-06-01 10:12:40 -0400] flaccid: Jun  1 10:11:59 01-1c04lmq7jet3b RightLink[1798]: 10:11:57: package[mongo-10gen-server] installing mongo-10gen-server-2.4.3-mongodb_1 from 10gen repository
[2013-06-01 10:12:51 -0400] flaccid: Jun  1 10:12:34 01-1c04lmq7jet3b RightLink[1798]: 10:12:32: package[mongo-10gen-server] installed version 2.4.3-mongodb_1
[2013-06-01 10:12:57 -0400] flaccid: working absolutely fine with no changes to the cookbook for me
[2013-06-01 10:13:08 -0400] flaccid: rpcesar was a good time wster
[2013-06-01 10:13:46 -0400] flaccid: Guest79901: default[:mongodb][:package_name] = "mongo-10gen-server" = fail
[2013-06-01 10:26:40 -0400] Cope: flaccid: I don't like to see JFGI attitude on this channel.  If you don't have the patience to help someone, say nothing.
[2013-06-01 10:27:34 -0400] flaccid: Cope: JFGI?
[2013-06-01 10:27:39 -0400] Cope: the irony!
[2013-06-01 10:27:47 -0400] flaccid: Cope: explain
[2013-06-01 10:27:57 -0400] flaccid: double irony now Cope
[2013-06-01 10:28:19 -0400] flaccid: i just spent 2 hours helping that user.
[2013-06-01 10:28:20 -0400] Cope: Get a new private key
[2013-06-01 10:28:20 -0400] Cope: If you've lost your private key, or would like to replace it, click the button below.
[2013-06-01 10:28:23 -0400] Cope: When you get a new key, your old key will stop working.
[2013-06-01 10:28:26 -0400] Cope: This private key replaces your old key.
[2013-06-01 10:28:29 -0400] Cope: oops sorry about that paste :)
[2013-06-01 10:28:32 -0400] flaccid: are you on drugs ?
[2013-06-01 10:28:40 -0400] Cope: flaccid: yeah I saw you helped him.
[2013-06-01 10:28:46 -0400] Cope: but I didn't like:
[2013-06-01 10:28:49 -0400] flaccid: actually that was closer to 3 hours
[2013-06-01 10:28:57 -0400] Cope: 09:11 < rpcesar> and not sure what this vagrant is either
[2013-06-01 10:28:57 -0400] Cope: 09:12 < flaccid> try google
[2013-06-01 10:28:57 -0400] Cope: 09:14 < rpcesar> thanks, i never would have thought to try that.
[2013-06-01 10:28:57 -0400] Cope: 09:15 < flaccid> common mistake
[2013-06-01 10:29:09 -0400] flaccid: i'm sorry that you didn't like that
[2013-06-01 10:29:18 -0400] Cope: maybe the guy was frustating you - but it's not an attitude we encourage in this community.
[2013-06-01 10:30:00 -0400] flaccid: do you encourage helping?
[2013-06-01 10:30:05 -0400] Cope: absolutely!!
[2013-06-01 10:30:14 -0400] flaccid: i look forward to seeing it
[2013-06-01 10:34:28 -0400] Cope: flaccid: I'm sorry - I didn't read back and see how much you helped the guy; but we treasure our welcoming attitude, and seeing people saying 'try google' to someone saying they don't know what vagrant is is the kind of response that is common on IRC, but is an approach that, as a community, we pride on being absent.
[2013-06-01 10:34:44 -0400] Cope: so I called it out.  And I will again.
[2013-06-01 10:35:29 -0400] flaccid: i was busy spending my personal time doing dev/test for the user instead, thus why i said to google it. spoonfeeding is a fulltime job Cope
[2013-06-01 10:35:52 -0400] Cope: hard to balance between spoonfeeding and being helpful
[2013-06-01 10:35:55 -0400] flaccid: i pride on being real. sorry that doesn't meet your arbitrary policy
[2013-06-01 10:36:03 -0400] Cope: real is great :)
[2013-06-01 10:36:09 -0400] flaccid: that is what i keep.
[2013-06-01 10:36:13 -0400] Cope: good stuff
[2013-06-01 10:39:16 -0400] BryanWB: yo yo chefs!
[2013-06-01 10:39:24 -0400] flaccid: Cope: the result of my time was 3 contributions. the pull request for the errors in the metadata.rb, https://github.com/edelight/chef-mongodb/pull/123 ; a new version of the packaged chef solution https://github.com/rightscale-blueprints/mongodb and a new revision of the ServerTemplate for RightScale, http://www.rightscale.com/library/server_templates/MongoDB/lineage/2094
[2013-06-01 10:39:35 -0400] Cope: flaccid: awesome
[2013-06-01 10:39:43 -0400] flaccid: i hope that meets some of your standards
[2013-06-01 10:40:40 -0400] Cope: hi BryanWB
[2013-06-01 10:41:39 -0400] BryanWB: Cope: hi!
[2013-06-01 10:42:26 -0400] Cope: flaccid: they're not my standards; they're the standards of the community i've been a part of for 4 years; of the company that makes Chef - we're welcoming to people.
[2013-06-01 10:43:02 -0400] Cope: and helping the guy for 3 hrs is totally welcoming, so that's great
[2013-06-01 10:43:32 -0400] Cope: but I saw you saying: try google... common mistake; and that definitely isn't a welcoming thing to say, by anyone's standards.
[2013-06-01 10:43:41 -0400] Cope: so I mentioned it.  That's all.
[2013-06-01 10:44:51 -0400] flaccid: Cope: can i have a link to those standards please
[2013-06-01 10:45:26 -0400] Cope: I think this is probably the closest I can offer: http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQtwIwAA&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DAd_yUBslqzo&ei=tNCpUffYCbOO7AbnhYGYDA&usg=AFQjCNFuuXv-JbDOW5MYbQgcQC61uFZWQQ&bvm=bv.47244034,d.ZGU
[2013-06-01 10:45:36 -0400] Cope: sorry: http://www.youtube.com/watch?v=Ad_yUBslqzo
[2013-06-01 10:45:56 -0400] flaccid: and you're the one saying to not google
[2013-06-01 10:45:58 -0400] flaccid: how ironic
[2013-06-01 10:46:24 -0400] flaccid: wow
[2013-06-01 10:46:29 -0400] Cope: I paste the search result, not the page
[2013-06-01 10:46:49 -0400] Cope: Maybe it would be a good idea to have a page on the wiki - there might even be one.
[2013-06-01 10:47:02 -0400] flaccid: yeah it might be, before you act like an asshole
[2013-06-01 10:47:53 -0400] Cope: btw to be clear, I'm not saying your an asshole :) But that's a core community principle.
[2013-06-01 10:47:57 -0400] Cope: *you're
[2013-06-01 10:49:10 -0400] Mithrandir: (sorry if this seems like ganging up on you, but..) fwiw, I read it the same way as Cope did, the difference is I didn't call you on it.  If you had just said "I'm busy trying to reproduce this for you, can you google it yourself?", that'd be fine.
[2013-06-01 10:50:31 -0400] flaccid: btw, you linked to a video on assholes
[2013-06-01 10:51:25 -0400] flaccid: and btw, you could of spent your time helping the user yourself
[2013-06-01 12:55:36 -0400] eponymi: in this post (http://jtimberman.housepub.org/blog/2013/03/19/anatomy-of-a-test-kitchen-1-dot-0-cookbook-part-1/), the minitest-handler recipe is explicitly included in the run list in .kitchen.yml. but in the getting started with test kitchen (https://github.com/opscode/test-kitchen/wiki/Getting-Started) it says test kitchen will automatically find tests in the right path.
[2013-06-01 12:55:54 -0400] eponymi: so do i not need minitest-handler in my run list in .kitchen.yml?
[2013-06-01 13:32:43 -0400] Cope: eponymi: that's 2 different sorts of test
[2013-06-01 13:33:03 -0400] Cope: test kitchen will find tests to run if you put them in the right place
[2013-06-01 13:33:13 -0400] eponymi: Cope: so the minitest busser and minitest-handler are two different things/
[2013-06-01 13:33:15 -0400] Cope: but minitest-handler is not run by test kitchen
[2013-06-01 13:33:15 -0400] eponymi: ?*
[2013-06-01 13:33:18 -0400] Cope: exactly
[2013-06-01 13:33:27 -0400] eponymi: that's confusing
[2013-06-01 13:33:28 -0400] Cope: minitest-handler is run by chef - as a report handler
[2013-06-01 13:33:47 -0400] Cope: the clue is in the name 'handler'
[2013-06-01 13:34:07 -0400] Cope: http://docs.opscode.com/essentials_handlers.html
[2013-06-01 13:34:11 -0400] Cope: yes, it is rather
[2013-06-01 13:34:52 -0400] eponymi: right, i understand that there is a different word there :) it's just that "busier" doesn't really mean anything to me, so i thought that minitest and bats "bussers" were essentially handlers.
[2013-06-01 13:36:02 -0400] eponymi: really i think i just need to read more on that topic though.
[2013-06-01 13:36:36 -0400] Cope: yes!
[2013-06-01 13:36:41 -0400] Cope: Busser is an unfortunate name
[2013-06-01 13:36:58 -0400] eponymi: there comes a point when all of the food/restaurant lingo might be a little much
[2013-06-01 13:37:11 -0400] Cope: also it seems to be a US-english term; I had no idea what one was.
[2013-06-01 13:37:45 -0400] eponymi: something that i don't think reading will solve: in this (https://github.com/opscode/test-kitchen/wiki/Getting-Started#real-example) when `kitchen test` is run, and it gets to `-----> Converging <default-ubuntu-1204>` there is no mention in the output of downloading Chef 11.4.4 (or whatever version)
[2013-06-01 13:37:55 -0400] Cope: aha
[2013-06-01 13:38:04 -0400] Cope: so, are you using vagrant?
[2013-06-01 13:39:01 -0400] eponymi: yes
[2013-06-01 13:39:10 -0400] kisoku_: I think busser is a perfect metaphor for what it actually does
[2013-06-01 13:39:13 -0400] kisoku_: :-P
[2013-06-01 13:39:31 -0400] kisoku_: it makes sure all the stuff you need makes it in and out of your kitchen
[2013-06-01 13:40:09 -0400] eponymi: kisoku_ food runners take it out of the kitchen :)
[2013-06-01 13:42:21 -0400] Cope: eponymi: so, what vagrant box are you using
[2013-06-01 13:42:27 -0400] eponymi: i might prefer something like "tester" or "test_runner"
[2013-06-01 13:42:40 -0400] eponymi: Cope: http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-vagrant-disk1.box
[2013-06-01 13:42:51 -0400] Cope: if you're using a provisioner-less one, you need the vagrant-omnibus plugin
[2013-06-01 13:43:00 -0400] Cope: kisoku_: ohai!!
[2013-06-01 13:43:33 -0400] Cope: kisoku_: yes, it totally does that; but until I looked up what a kitchen busser was, I had no idea
[2013-06-01 13:43:36 -0400] eponymi: i'm pretty sure that example from "getting started" link i sent is using provisionerless, but it doesn't show the vagrant file
[2013-06-01 13:45:13 -0400] eponymi: so i can't tell if it's using vagrant omnibus.
[2013-06-01 13:45:32 -0400] eponymi: and even if it were using vagrant omnibus, wouldn't there still be output for the downloading of chef?
[2013-06-01 13:48:27 -0400] eponymi: i'm guessing that it's just a case of that output being removed from what was pasted into the example. but there's no note about output being removed, so if it has been, i think it's kind of misleading.
[2013-06-01 13:48:53 -0400] Cope: vagrant plugin list
[2013-06-01 13:49:01 -0400] eponymi: i have omnibus installed
[2013-06-01 13:49:05 -0400] eponymi: i know how to use omnibus
[2013-06-01 13:49:21 -0400] Cope: you need to set it to be used - one sec
[2013-06-01 13:49:54 -0400] eponymi: but since i can't see the vagrantfile in the example, i can't tell if it's being used; there's nowhere for me to see "config.omnibus.chef_version = :latest"
[2013-06-01 13:52:32 -0400] Cope: You need to add `require_chef_omnibus: true` in your platform's driver_config section
[2013-06-01 13:53:10 -0400] eponymi: it's there.
[2013-06-01 13:54:00 -0400] Cope: right, so if it's there, and you have the vagrant-omnibus plugin installed, I would expect it to work.
[2013-06-01 13:54:24 -0400] Cope: so if it doesn't that feels like a bug in vagrant-omnibus, probably
[2013-06-01 13:54:42 -0400] Cope: because that certainly works with the opscode provisionerless boxes
[2013-06-01 13:54:54 -0400] eponymi: vagrant plugin list \ ridley (0.12.3) \ vagrant-berkshelf (1.2.0) \ vagrant-omnibus (1.0.2)
[2013-06-01 13:54:58 -0400] Cope: maybe the ubuntu box already has chef installed?
[2013-06-01 13:56:01 -0400] eponymi: would it still try to download chef if it did?
[2013-06-01 13:56:28 -0400] Cope: i suspect not, but I'm guessing; would need to look at the code.
[2013-06-01 13:59:39 -0400] eponymi: ok, i'm going to try just replicating exactly what's in the getting started and see if that provides a different result
[2013-06-01 13:59:48 -0400] Cope: good plan
[2013-06-01 14:00:30 -0400] eponymi: but now i have to copy their box, and my connection is 1.5m :(
[2013-06-01 14:00:40 -0400] Cope: :(
[2013-06-01 14:01:58 -0400] eponymi: ok, last dummy question and i'll go work on this stuff. the point of a bats test is to exit with 0, correct?
[2013-06-01 14:05:19 -0400] gkarekinian: You can have other kinds of tests with bats too
[2013-06-01 14:06:28 -0400] gkarekinian: I mean in the end it's about the last line exiting with 0 yeah
[2013-06-01 14:06:42 -0400] gkarekinian: https://github.com/sstephenson/bats#the-run-helper
[2013-06-01 14:07:08 -0400] eponymi: thank you
[2013-06-01 14:07:28 -0400] gkarekinian: You're welcome
[2013-06-01 14:08:18 -0400] Cope: eponymi: yep - so we know if the test passed or failed by the exit code
[2013-06-01 14:10:00 -0400] eponymi: alright, thanks for all the help. now i'll go eat breakfast, bc "Progress: 18% (Rate: 152k/s, Estimated time remaining: 0:45:35))"
[2013-06-01 14:38:32 -0400] tnarik: hi
[2013-06-01 14:38:47 -0400] tnarik: I'm trying to fetch a file from a server that uses Basic Auth
[2013-06-01 14:38:57 -0400] tnarik: I know remote_file can be used with this kind of source http://user:pass@hostname/path/
[2013-06-01 14:39:11 -0400] tnarik: but I was wondering if the credentials could be passed as a Header
[2013-06-01 14:39:40 -0400] tnarik: with http_request is possible doing this, but I cannot see how to fetch the response
[2013-06-01 14:39:58 -0400] tnarik: and I don't think that's the goal of http_request
[2013-06-01 14:46:39 -0400] eponymi: ok, so here's a potentially big different between minitest and bats. in minitest, i have access to node attributes. are they available in bats?
[2013-06-01 14:50:29 -0400] eponymi: i can see that it's not available in regular bats (obvs. since it's not a chef thing), but i didn't know if the busser added support for node attributes.
[2013-06-01 14:50:32 -0400] Cope: eponymi: correction, in minitest-handler you do
[2013-06-01 14:50:41 -0400] Cope: eponymi: and no, you don't.
[2013-06-01 14:50:55 -0400] Cope: the tests run by busser know nothing about chef at all
[2013-06-01 14:51:24 -0400] eponymi: oh, so no node attrs in any bussers?
[2013-06-01 14:51:32 -0400] Cope: right
[2013-06-01 14:52:54 -0400] eponymi: ooooh, so that's why i would need "files/default/tests/minitest/*" and "test/integration/default/minitest/*".
[2013-06-01 14:53:10 -0400] eponymi: and why i would need to have minitest-handler in my test kitchen test suite
[2013-06-01 14:53:41 -0400] Cope: right - they're two different things
[2013-06-01 14:53:51 -0400] Cope: minitest is just a testing framework in ruby
[2013-06-01 14:54:02 -0400] Cope: the busser just makes the gem available
[2013-06-01 14:54:18 -0400] Cope: (it's baked into ruby 1.9 already, but the gem may have newer stuff)
[2013-06-01 14:54:31 -0400] Cope: so you can write tests using minitest.
[2013-06-01 14:54:44 -0400] Cope: But you have precisely no custom matchers, or special chef support
[2013-06-01 14:54:46 -0400] Cope: just minitest
[2013-06-01 14:55:04 -0400] Cope: minitest-handler is entirely different
[2013-06-01 14:55:11 -0400] Cope: yes, it uses minites to run tests
[2013-06-01 14:55:18 -0400] Cope: but the tests are run using the chef handler mechanism
[2013-06-01 14:55:30 -0400] eponymi: ok, now i finally get it. i think.
[2013-06-01 14:55:33 -0400] eponymi: i swear i'm not as dumb as i seem.
[2013-06-01 14:55:42 -0400] Cope: and it includes a whole heap of custom matchers, which use the fact that your are within the context of a chef run
[2013-06-01 14:56:02 -0400] Cope: hence you can see the node attrs, and assert that services are in a given state etc
[2013-06-01 14:56:35 -0400] Cope: BryanWB: around?
[2013-06-01 14:56:37 -0400] eponymi: yeah i think i get it now.
[2013-06-01 14:56:45 -0400] BryanWB: Cope: yeah
[2013-06-01 14:57:21 -0400] Cope: did something change in ark? my chruby recipe used to result in /usr/local/chruby/
[2013-06-01 14:57:29 -0400] Cope: now it's usr/local/chruby-1
[2013-06-01 14:57:33 -0400] Cope: which breaks things
[2013-06-01 14:58:07 -0400] Cope: -bash: /usr/local/chruby/share/chruby/chruby.sh: No such file or directory
[2013-06-01 14:59:08 -0400] Cope: $ ls -ld /usr/local/chruby*
[2013-06-01 14:59:08 -0400] Cope: drwxr-xr-x 8 root root 4096 Jun  1 14:50 /usr/local/chruby-1
[2013-06-01 14:59:15 -0400] BryanWB: Cope: argh, um, i don't know
[2013-06-01 14:59:39 -0400] BryanWB: haven't kept up w/ it since now jtimberman actively maintains it
[2013-06-01 15:04:33 -0400] Cope: ok
[2013-06-01 15:10:54 -0400] eponymi: Cope: so my box download just finished and it's still downloading chef.
[2013-06-01 15:11:40 -0400] eponymi: i copied everything directly from the "getting started" wiki.
[2013-06-01 15:14:45 -0400] eponymi: where the "real world example" has `-----> Converging <default-ubuntu-1204> \ Uploaded tmux/metadata.rb (259 bytes)`
[2013-06-01 15:14:55 -0400] eponymi: i get `-----> Converging <default-ubuntu-1204> \ -----> Installing Chef Omnibus (true)` plus all the omnibus install stuff
[2013-06-01 15:33:19 -0400] bearrito: Getting this error : FATAL: NameError: Cannot find a resource for db on ubuntu version 12.04. I've added the msql and database cookbooks as dependencies to my cookbook
[2013-06-01 15:54:35 -0400] Tnarik_: Hi again
[2013-06-01 15:54:59 -0400] Tnarik_: http_request and fetching the response, is it possible?
[2013-06-01 15:58:13 -0400] eponymi: weird stuff going on with the bats busser in testkitchen. if anyone could take a look at (https://github.com/fnichol/busser-bats/issues/2) i would appreciate it.
[2013-06-01 16:14:16 -0400] gkarekinian: eponymi: Your bats test should have the .bats extension, not .rb
[2013-06-01 16:14:37 -0400] eponymi: it does.
[2013-06-01 16:14:45 -0400] eponymi: does it say .rb in the issue?
[2013-06-01 16:15:07 -0400] eponymi: the minitest one has .rb
[2013-06-01 16:15:21 -0400] gkarekinian: Ok, I got confused because of your edit in the issue
[2013-06-01 16:15:57 -0400] eponymi: whoops, sorry about that. edited the edit :)
[2013-06-01 16:16:28 -0400] gkarekinian: What's on line 6 of /tmp/bats.3835.src and /tmp/bats.3851.src?
[2013-06-01 16:17:18 -0400] eponymi: not sure, i just destroyed the machine to try again fresh, i'll login and find out in a sec. I'm guessing its just the end of the `mycookbook.bats` file, since that's only six lines long
[2013-06-01 16:17:29 -0400] eponymi: but the closing `}` is there, so i don't see why that'd be an issue
[2013-06-01 16:17:58 -0400] gkarekinian: Otherwise, all I can think of right now is that you don't need the "#!/usr/bin/env bats" line in your bats tests
[2013-06-01 16:18:05 -0400] eponymi: wait, it's only 5 lines long.
[2013-06-01 16:18:43 -0400] eponymi: so maybe it's going on to the next line expecting something else to be there.
[2013-06-01 16:19:27 -0400] eponymi: i only put that statement there because of (https://github.com/opscode-cookbooks/yum/blob/spec_bats/test/integration/test/bats/yum.bats) and (https://github.com/drnic/chef-hub/blob/master/test/integration/default/bats/hub.bats)
[2013-06-01 16:20:47 -0400] gkarekinian: Ok, I guess that line's not relevant to the issue then
[2013-06-01 16:22:18 -0400] eponymi: i have an idea, but no good reason for it. give me a sec
[2013-06-01 16:24:07 -0400] eponymi: really wish i could figure out why i keep "Downloading Chef  for ubuntu... ", that's slowing down the process quite a bit
[2013-06-01 16:25:12 -0400] gkarekinian: Do you have require_chef_omnibus set in the driver_config?
[2013-06-01 16:25:31 -0400] gkarekinian: I can't reproduce your issue with your test suite
[2013-06-01 16:25:36 -0400] gkarekinian: Just ran it successfully
[2013-06-01 16:25:53 -0400] gkarekinian: Are you sure the file is saved?
[2013-06-01 16:28:48 -0400] eponymi: which file?
[2013-06-01 16:28:58 -0400] eponymi: i do have require_chef_omnibus in the driver_config
[2013-06-01 16:31:24 -0400] eponymi: can't find out what is in /tmp/bats.* because they're deleted after `kitchen verify`
[2013-06-01 16:31:55 -0400] eponymi: but i think i know what is happening, just don't know why
[2013-06-01 16:32:05 -0400] eponymi: i added another test, so the total file is now 9 lines long
[2013-06-01 16:32:22 -0400] eponymi: but the error is outputting `/tmp/bats.2982.src: line 11: syntax error: unexpected end of file`
[2013-06-01 16:32:30 -0400] eponymi: so for some reason, extra lines are being added to the end of the file
[2013-06-01 16:32:58 -0400] eponymi: bbiab
[2013-06-01 16:40:02 -0400] gkarekinian: require_chef_omnibus will download Omnibus Chef to the latest version if set to true or a specified version
[2013-06-01 17:15:00 -0400] DandyPandy: Hello! I'm going to be deploying a chef server for a new environment I'm standing up. I want to have a fault tolerant setup, so I'm curious how I might achieve that given the omnibus installer sets everything up as a vertical stack. I will also have a separate postgres and rabbitmq server that I would prefer to use over the embedded ones. Is this easily achieved? The docs are sorely lacking on this.
[2013-06-01 17:16:50 -0400] DandyPandy: and by "a chef server" I actually mean I would like to setup two in a load balanced pair for redundancy purposes.
[2013-06-01 17:40:34 -0400] eponymi: gkarekinian: re: chef_omnibus, that's the behavior that i anticipated, but the output in the "Real World Example" of the "Getting Started" test kitchen wiki seems to suggest that it doesn't download omnibus
[2013-06-01 18:35:07 -0400] ekarlso: is there a way to apply a cookbook on the current node ?
[2013-06-01 18:37:14 -0400] ekarlso: like apply it locally
[2013-06-01 19:08:15 -0400] coderanger: ekarlso: chef-client you mean?
[2013-06-01 19:13:49 -0400] ekarlso: like
[2013-06-01 19:13:54 -0400] ekarlso: puppet apply site.pp
[2013-06-01 19:14:21 -0400] coderanger: chef-apply :)
[2013-06-01 19:14:25 -0400] coderanger: new in chef 11
[2013-06-01 19:14:40 -0400] coderanger: That is for running recipes though, not whole cookbooks
[2013-06-01 19:57:12 -0400] spheromak: chef-client -o as well for 0netime run list
[2013-06-01 20:17:47 -0400] coderanger: Yeah, or chef-solo for applying a full cookbook once
[2013-06-01 20:23:01 -0400] zytta: I'm trying to run "npm install" (from NodeJS) as an execute resource. And I need it to run as a specific user.
[2013-06-01 20:23:44 -0400] zytta: I've tried various things, lastly this snippet: su ubuntu -l -c 'cd /home/ubuntu/hal && bash -i npm install
[2013-06-01 20:24:13 -0400] zytta: I'm sure I can add cwd to it to simplify. What's the current workaround to execute something as a specific user in Chef?
[2013-06-01 20:24:53 -0400] coderanger: zytta: execute 'whatever' do user 'me' end
[2013-06-01 20:25:15 -0400] coderanger: zytta: Check the docs for the execute resource for all the available attrs
[2013-06-01 20:25:22 -0400] coderanger: group and cwd are also available, for example
[2013-06-01 20:26:51 -0400] zytta: I have done that, and it doesn't work.
[2013-06-01 20:26:52 -0400] zytta: Yeah, I use cwd in other examples
[2013-06-01 20:26:52 -0400] zytta: my example was a bit crude :)
[2013-06-01 20:26:52 -0400] zytta: http://tickets.opscode.com/browse/CHEF-2288
[2013-06-01 20:27:14 -0400] zytta: preferrably I'd like to run it in a shell with the users environment
[2013-06-01 20:27:32 -0400] coderanger: Ahh, thats a different story
[2013-06-01 20:27:45 -0400] zytta: Yeah, sorry for omitting info :)
[2013-06-01 20:27:57 -0400] zytta: It bombs if not done the way I want, AFAIK.
[2013-06-01 20:29:13 -0400] zytta: I was hoping somebody had a straight forward workaround, I've been fiddling with this for too many hours.
[2013-06-01 20:29:53 -0400] coderanger: zytta: any reason 'sudo -i -u ubuntu npm install' doesn't work?
[2013-06-01 20:30:04 -0400] zytta: haven't tried. let me give it a go.
[2013-06-01 20:30:15 -0400] zytta: Any way to easily test snipets in Chef? I haven't looked, just curious.
[2013-06-01 20:30:25 -0400] coderanger: chef-shell and chef-apply
[2013-06-01 20:30:27 -0400] zytta: snippets*
[2013-06-01 20:30:32 -0400] coderanger: in this case chef-shell is what you want
[2013-06-01 20:30:36 -0400] zytta: ah, cheers!
[2013-06-01 20:30:37 -0400] coderanger: interactive Chef repl
[2013-06-01 20:31:03 -0400] zytta: so irb for chef
[2013-06-01 20:31:39 -0400] coderanger: more or less, yeah
[2013-06-01 20:35:35 -0400] zytta: Thanks, I'll have to read this and hopefully everything will work itself out.
[2013-06-01 20:36:34 -0400] eponymi: speaking of fiddling with this for too many hours: https://github.com/fnichol/busser-bats/issues/2
[2013-06-01 20:36:46 -0400] eponymi: if anyone can explain why my fix/reproduce works, i would be very appreciative.
[2013-06-01 20:44:14 -0400] ordos: Could anyone take a look at http://community.opscode.com/questions/380 please? :)
[2013-06-01 20:44:51 -0400] coderanger: ordos: The questions and ideas systems are deprecated and not really used, I would recommend using here and/or the ML first in the future
[2013-06-01 20:45:53 -0400] coderanger: ordos: Unfortunately most of our large customers won't release exact numbers as it would be sharing a bit more than they are comfortable with
[2013-06-01 20:46:18 -0400] coderanger: ordos: Our internalo load testing is done with a modified basho_bench if that helps
[2013-06-01 20:46:51 -0400] coderanger: ordos: Facebook released some somewhat fuzzed graphs as part of Phil's keynote at chefconf though
[2013-06-01 20:47:05 -0400] coderanger: the video should be up online
[2013-06-01 20:47:16 -0400] ordos: Ill do a search for it :)
[2013-06-01 20:47:44 -0400] ordos: I'm doing this simulation for my thesis
[2013-06-01 20:47:59 -0400] ordos: And was just a bit too surprised of the result :p
[2013-06-01 20:48:43 -0400] coderanger: ordos: With chef11/erchef, the bottleneck is almost always postgres at this point
[2013-06-01 20:49:01 -0400] ordos: It was the erchef in my case
[2013-06-01 20:49:06 -0400] coderanger: ordos: and we are working to improve it even further by shifting some logic into sprocs, etc
[2013-06-01 20:49:29 -0400] ordos: erchef, expander and nginx worker are top 3 i think
[2013-06-01 20:49:32 -0400] cassianoleal: is there a way to set the chef_environment in a test kitchen run?
[2013-06-01 20:50:06 -0400] coderanger: ordos: expander and solr aren't really perf bottlenecks since they live off in a decoupled universe
[2013-06-01 20:50:40 -0400] eponymi: cassianol i think so
[2013-06-01 20:50:41 -0400] ordos: coderanger: what do you mean?
[2013-06-01 20:51:29 -0400] coderanger: ordos: there is a queue between incoming changes and the solr update system, so the maximum rate of incoming requests is decoupled from solr's throughput
[2013-06-01 20:51:30 -0400] eponymi: cassianoleal: not cassianol. sorry i can't tell you the exact way to do it, but i think i remember hearing that you could in all the stuff i read/watched about test kitchen this week
[2013-06-01 20:51:40 -0400] coderanger: ordos: Though eventually you would overflow the queue I suppose
[2013-06-01 20:52:00 -0400] cassianoleal: eponymi: I tried setting 'environment' and 'chef_environment' right below the test suite name attribute, but neither worked
[2013-06-01 20:52:07 -0400] cassianoleal: and I can't find documentation for that
[2013-06-01 20:53:01 -0400] ordos: @coderanger: https://dl.dropboxusercontent.com/u/718467/chef.png shows the top cpu-using processes in my simulation
[2013-06-01 20:53:38 -0400] ordos: @coderanger: at 12500 api requests / minute
[2013-06-01 20:53:45 -0400] coderanger: ordos: What is using CPU is not usually what is bounding performance, we are I/O limited, not CPU
[2013-06-01 20:54:16 -0400] ordos: @coderanger: yes, i can imagine. that was somewhat my conclusion on the simulation as well
[2013-06-01 20:54:34 -0400] coderanger: ordos: Some exceptions exist though, if you spammed the server with client key reset requests, you would rapidly overload the CPU, for example
[2013-06-01 20:55:39 -0400] coderanger: ordos: So yeah, we are trying to find more places to make CPU-I/O tradeoffs that will increase throughput :)
[2013-06-01 20:55:50 -0400] coderanger: IF you have suggestions, we are definitely all ears (and also hiring)
[2013-06-01 20:55:51 -0400] coderanger: ;-)
[2013-06-01 20:56:19 -0400] ordos: @coderanger: still, I am actually really surprised that I could get these results with chef
[2013-06-01 20:56:26 -0400] eponymi: cassianoleal have you looked into trying fauxhai?
[2013-06-01 20:56:39 -0400] coderanger: The next big one is trying to find a way to improve signature verification speed
[2013-06-01 20:56:54 -0400] coderanger: Using RSA sigs is cute, but something based around HMAC might perform a lot better
[2013-06-01 20:56:58 -0400] cassianoleal: eponymi: not really, but I think it would be a bit overkill for what I'm doing :)
[2013-06-01 20:57:21 -0400] cassianoleal: I mean, it's great and even necessary for chefspec stuff, but I think kitchen should have environment support built in
[2013-06-01 20:57:53 -0400] ordos: @coderanger: thank you for your time!
[2013-06-01 20:59:31 -0400] coderanger: ordos: No prob
[2013-06-01 21:00:40 -0400] eponymi: i'm guessing there's probably a way to set environment variables
[2013-06-01 21:20:21 -0400] karmajunkie: hi all, quick question: easier to start learning chef with the hosted version or chef-solo?
[2013-06-01 21:27:11 -0400] gleam_: no search in chef solo so i'd probably go hosted
[2013-06-01 21:28:32 -0400] coderanger: karmajunkie: Solo is probably easier
[2013-06-01 21:28:41 -0400] coderanger: but when you learn is much much more limited
[2013-06-01 21:28:49 -0400] coderanger: so I would still stick with hosted
[2013-06-01 21:29:14 -0400] karmajunkie: @coderanger thanks!
[2013-06-01 21:29:30 -0400] coderanger: karmajunkie: and hosted is going to get much easier in a few days :D
[2013-06-01 21:30:27 -0400] karmajunkie: @coderanger ORLY?
[2013-06-01 21:30:43 -0400] karmajunkie: new release coming out?
[2013-06-01 21:30:52 -0400] coderanger: Yahr, just putting the finishing touches on the new starter kit system
[2013-06-01 21:31:19 -0400] karmajunkie: i guess i better get on it so i can say i started with chef before it got super easy :)
[2013-06-01 22:01:27 -0400] karmajunkie: is it generally accepted practice to create the chef repo OUTSIDE the project directory? Or is it better to put it inside the project? (This is a rails project if it matters)
[2013-06-01 22:03:22 -0400] eponymi: karmajunk: i don't know what the generally accepted practice is, but i keep my kitchen separate from my application
[2013-06-01 22:06:28 -0400] karmajunkie: eponymi: thanks!
[2013-06-01 22:08:45 -0400] ermajn: hello, I have in my cookbooks files directory two subdirectories "default" and "plugins"
[2013-06-01 22:09:21 -0400] ermajn: but when I upload cookbook with knife command, on chef web tool all my files are in files directory, there are no subdirectories
[2013-06-01 22:20:05 -0400] ianco: i have a lwrp that needs to accept either a socket or a port. is there a clever way to specify that in the resources file?
[2013-06-01 22:20:47 -0400] ianco: in other words, socket or port needs to be populated. not both and not neither
[2013-06-01 22:22:17 -0400] ianco: maybe a field similar to a mysql enum type
[2013-06-01 22:24:01 -0400] coderanger: ermajn: the default/ thing is a Chef requirement
[2013-06-01 22:24:15 -0400] coderanger: ermajn: put the plugins/ folder inside default/
[2013-06-01 22:24:35 -0400] coderanger: ianco: You can use #after_create to run some extra validation
[2013-06-01 22:24:59 -0400] ianco: coderanger: cool! is there a cookbook i can checkout as an example?
[2013-06-01 22:25:26 -0400] coderanger: ianco: Just add 'def after_create ... end' to your resource file
[2013-06-01 22:25:50 -0400] coderanger: with the ... probably being 'raise "ONE AT A TIME" if self.port && self.socket'
[2013-06-01 22:26:27 -0400] coderanger: or something like that
[2013-06-01 22:26:42 -0400] ianco: hrm, awesome
[2013-06-01 22:27:00 -0400] ianco: kinda off topic but would if self.port && self.socket work in that scenario
[2013-06-01 22:27:09 -0400] ianco: if they are both set, that would return true, no?
[2013-06-01 22:27:39 -0400] coderanger: Not sure what you are asking
[2013-06-01 22:27:55 -0400] ianco: coderanger, thanks. i see what are saying
[2013-06-01 22:27:57 -0400] ianco: appreciated
[2013-06-01 22:27:59 -0400] ianco: :)
[2013-06-01 22:28:04 -0400] coderanger: but yes, if both options are given (since the default value is usually nil) then that would trigger, which would raise an exception
[2013-06-01 22:28:44 -0400] ianco: high five for helpin a dude out on the weekend
[2013-06-01 22:29:16 -0400] coderanger: I'm just slowboating around in Eve, IRC is a nice distraction
[2013-06-01 22:36:36 -0400] ermajn: coderanger, thanks, i'v solved it
[2013-06-01 22:45:51 -0400] mjcsj: Setting up new management workstation, having a problem with knife ec2-plugin. Where is the best place to paste the error I'm getting and get some expert help?
[2013-06-01 22:48:09 -0400] eponymi: gist/pastebin and then link it here
[2013-06-01 22:54:34 -0400] mjcsj: Here's the error I'm getting: http://pastebin.com/download.php?i=f9T9mebQ  - after following instructions in http://wiki.opscode.com/display/chef/EC2+Bootstrap+Fast+Start+Guide
[2013-06-01 22:55:24 -0400] schuckles1: hi
[2013-06-01 22:55:58 -0400] schuckles1: Im wondering if anyone has any experience using the riverbed cookbook?
[2013-06-01 22:58:23 -0400] mjcsj: Also, in that EC2 faststart guide, there are some steps related to installing Ruby 1.8, when it appears 1.9.1 is in the omnibus installer - for example: "sudo apt-get install ruby1.8-dev ruby1.8 ri1.8 rdoc1.8 irb1.8" - is this needed and/or correct?
[2013-06-01 23:07:30 -0400] eponymi: mjcsj you should use rbenv or rvm and try different versions; that doc is probably outdated
[2013-06-01 23:08:26 -0400] eponymi: re: your error; i'm far from an expert, but it looks like you don't have the chef_zero gem is not installed or available in that context
[2013-06-01 23:08:44 -0400] eponymi: got to go, hope you get it figured out.
[2013-06-01 23:09:09 -0400] mjcsj: noob to ruby, heard of those, but don't know how to use them. Is there no single place to get a simple startup guide to install the latest chef omnibus on Ubuntu 12.04, then install just what's needed to run the knife ec2 plugin. Not using Ruby for anything else on this management workstation. I don't need any other version of Ruby.
[2013-06-01 23:09:25 -0400] MartinCleaver: Can I, from within a virtualbox guest vm, run vagrant such that commands refer to virtual machines that are in a sibling vm of the first guest?
[2013-06-01 23:09:26 -0400] MartinCleaver: I ask because things like rvm and librarian-chef, etc, all need setting up but why not have those set up in a Vagrant box too?
[2013-06-01 23:12:59 -0400] mjcsj: FYI: eponym's suggestion on chef-zero was correct. I installed that with: "sudo /opt/chef/embedded/bin/gem install chef-zero --no-ri --no-rdoc" and then "knife ec2 server list" worked.
[2013-06-01 23:13:09 -0400] mjcsj: Thanks, that was my problem for today...
[2013-06-01 23:14:16 -0400] zirpu: so i created a hosted chef account. saved off my private key when that was created. following the intro tutorial.  created a node via the web interface.
[2013-06-01 23:14:46 -0400] zirpu: however, i keep getting a "Failed to authenticate" with the key to the organization.
[2013-06-01 23:15:08 -0400] zirpu: says ensure node_name and client are correct.  client is the validator pem file right?
[2013-06-01 23:15:43 -0400] zirpu: does the knife.rb need to have $(hostname -s)  as the 'node_name' valued?
[2013-06-01 23:35:25 -0400] zirpu: gah

[2013-06-06 00:00:03 -0400] timsmith: I know that rolled up some functionality into the client
[2013-06-06 00:00:07 -0400] timsmith: which is awesome btw
[2013-06-06 00:00:07 -0400] jmickle: miah: *
[2013-06-06 00:00:38 -0400] supergrilo: jtimberman http://pastebin.ca/2390725
[2013-06-06 00:00:41 -0400] coderanger: jmickle: yo
[2013-06-06 00:00:57 -0400] coderanger: jmickle: I see your comment on the collectd stuffs
[2013-06-06 00:01:02 -0400] jmickle: hey coderanger I'm trying to deploy the collectd cookbook and i discovered the bandwidth limit
[2013-06-06 00:01:11 -0400] coderanger: Heh
[2013-06-06 00:01:13 -0400] jmickle: just wanted to check the current status and see if there is something i can help to get that rolling
[2013-06-06 00:01:17 -0400] supergrilo: jtimberman omnibus works fine
[2013-06-06 00:01:24 -0400] coderanger: jmickle: I defer to miah on that
[2013-06-06 00:01:40 -0400] coderanger: My copies of the cookbooks are super ancient
[2013-06-06 00:01:44 -0400] jmickle: coderanger: hehehehe ok, what do you think of just rolling a PPA?
[2013-06-06 00:01:58 -0400] coderanger: jmickle: Or just shove them on S3
[2013-06-06 00:02:11 -0400] jmickle: coderanger: true but whose going to front the s3 costs for pub download :-P
[2013-06-06 00:02:22 -0400] coderanger: Ahh, fair 'nuff
[2013-06-06 00:02:27 -0400] coderanger: github pages? ;-)
[2013-06-06 00:02:28 -0400] timsmith: that bandwidth limit killed me
[2013-06-06 00:02:32 -0400] timsmith: I was thinking there was some issue with ark
[2013-06-06 00:02:47 -0400] jmickle: coderanger: hahahahaha i would love to but I'm sure my company wouldn't be tooooo happy to see a couple extra grand in bw charges hehehe
[2013-06-06 00:02:48 -0400] supergrilo: i opened a ticket: http://tickets.opscode.com/browse/CHEF-4242
[2013-06-06 00:02:48 -0400] timsmith: finally saw the redirect
[2013-06-06 00:03:45 -0400] jmickle: coderanger: i can try and roll some deb packages tonight and push them up to my PPA at least then debian users can source my repo
[2013-06-06 00:06:07 -0400] jtimberman: supergrilo: glad omnibus works :). that's definitely the best and recommended way anyway.
[2013-06-06 00:07:41 -0400] supergrilo: jtimberman perhaps you ought to think about discontinuing the repository, or to create an omnibus repo ...
[2013-06-06 00:08:05 -0400] supergrilo: apt.opscode.com omnibus main
[2013-06-06 00:08:06 -0400] supergrilo: :D
[2013-06-06 00:08:50 -0400] timsmith: jmickle:  There's a few PPAs with fairly recent debs out there
[2013-06-06 00:08:52 -0400] supergrilo: use the same s3 bucket but create a Packages.gz
[2013-06-06 00:08:57 -0400] supergrilo: :D
[2013-06-06 00:11:09 -0400] supergrilo: dpkg-scanpackages -m dists/omnibus/main/binary-amd64 /dev/null | gzip -9c > dists/omnibus/main/binary-amd64/Packages.gz
[2013-06-06 00:12:13 -0400] supergrilo: jtimberman thank you for your time. congratulations for de omnibus
[2013-06-06 00:12:14 -0400] supergrilo: :)
[2013-06-06 00:12:30 -0400] supergrilo: s/de/the/
[2013-06-06 00:13:24 -0400] supergrilo: thank you for your time. congratulations for the omnibus project
[2013-06-06 00:14:11 -0400] jmickle: coderanger: is your github repo the latest of the cookbook? I notice opscode community cookbook site points to yours
[2013-06-06 00:15:13 -0400] coderanger: jmickle: I usually use miah's
[2013-06-06 00:15:20 -0400] coderanger: Take that as you will :)
[2013-06-06 00:16:06 -0400] jmickle: hahaha
[2013-06-06 00:16:08 -0400] jmickle: fair enough
[2013-06-06 00:23:32 -0400] jmickle: il hack something up tonight to try and help solve this but I'm curious to hear what miah is currently working on with the download situation ;-/
[2013-06-06 00:54:10 -0400] miah: you can just change the URL in your attributes to point to something that you own
[2013-06-06 00:54:56 -0400] miah: i havent been able to concentrate on fixing ark, but i think my brainpower is about to open back up
[2013-06-06 01:20:01 -0400] scalp42: does anyone use knife-spork by any chance ?
[2013-06-06 02:26:08 -0400] scalp42: im getting a "ERROR: undefined method `close!' for nil:NilClass" when I try to click on a cookbook in the UI if anyone has an idea
[2013-06-06 02:42:06 -0400] mattw: I feel the need for conditional cookbook dependencies lately. I see some chatter about this on old list logs etc. but can't find a current ticket applicable to the issue. Has there been any recent movement or thought around this?
[2013-06-06 03:10:17 -0400] halcyonCorsair: jtimberman: ping
[2013-06-06 03:13:12 -0400] timsmith: mattw:  It would be an awesome feature
[2013-06-06 03:46:42 -0400] jtimberman: halcyonCorsair: hey, saw your @mention
[2013-06-06 03:46:54 -0400] timsmith: thanks for the hugops
[2013-06-06 06:00:01 -0400] ssd7: Ohai Chefs
[2013-06-06 09:03:39 -0400] bubu: hey guys, anyone able to help with an erb template I'm having problems with? blows up line 48! https://gist.github.com/anonymous/7b45de85bf669a8401f8
[2013-06-06 09:10:39 -0400] gkarekinian: You need <% not <%=
[2013-06-06 09:22:03 -0400] quattro: is it possible with chef to cook a new appserver and when its done with that automatically update another node (loadbalancer) with the new app node?
[2013-06-06 09:22:17 -0400] quattro: with one command
[2013-06-06 09:38:06 -0400] admin0: how do I pass attributes/variables in knife solo ..   knife solo cook user@ip is what i am using now, with the run-list provided from nodes/ip.json file
[2013-06-06 09:38:16 -0400] admin0: i want to pass it from the cli
[2013-06-06 09:38:45 -0400] willejs: quattro: not that i know of, you could make a rest call with the http resource to your loadbalancer? or if its HA Proxy you could write a bash script to echo something via telnet and execute that in your recipe?
[2013-06-06 09:39:34 -0400] BryanWB: ohai chefs!
[2013-06-06 09:39:39 -0400] admin0: ohai
[2013-06-06 09:40:34 -0400] willejs: ohai
[2013-06-06 10:47:19 -0400] mattt: have a resource defined in two cookbooks
[2013-06-06 10:47:46 -0400] mattt: one has a not_if specified, but still seems to be applied even tho the code inside the block is evaluating to true ?
[2013-06-06 10:48:52 -0400] mattt: anyone know what i'm missing ?
[2013-06-06 10:55:04 -0400] blrunner: hi all!
[2013-06-06 10:58:02 -0400] blrunner: Could you please somebody help me with the chef-server-ctl reindex issue? (Opensource chef-server 11.4.4) I got the following messages: "escript: exception error: no match of right hand side value"
[2013-06-06 10:59:11 -0400] blrunner: I'm suspecting chef-solr issue, but I can't find any errors in log , looks like solr running well
[2013-06-06 11:52:41 -0400] skarufue_: hello. will this: http://tny.cz/02c35e94 get the variable pw into the json which is send back to the chef-server
[2013-06-06 11:53:12 -0400] skarufue_: if so how to prevent. also howto view this json with knife search?
[2013-06-06 12:15:23 -0400] fearoffish: I have a little issue, when I run: knife ssh 'name:*my_env*' 'uptime' -a ec2.public_ipv4
[2013-06-06 12:15:33 -0400] fearoffish: it says I don't have the required attribute but it found 3 nodes
[2013-06-06 12:15:43 -0400] gigo1980: hi what do you use to deploy your custom wep / app not the stack, only how do you push your code to the application nodes (do you use the continous integration server for that?, or do you use chef ?)
[2013-06-06 12:15:47 -0400] fearoffish: I've checked on the chef server, that attribute is there (they're ec2 nodes)
[2013-06-06 12:16:18 -0400] fearoffish: gigo1980: we have a mix, for our staging servers we use ci and for prod we use local capistrano
[2013-06-06 12:16:28 -0400] fearoffish: but no, chef doesn't deploy our app
[2013-06-06 12:17:47 -0400] gigo1980: ok so chef is realy only for create and manage the infrastracture for the app. ok
[2013-06-06 12:18:32 -0400] gigo1980: do you develope in ruby, or what was the reason to use capistrano ?
[2013-06-06 12:19:02 -0400] fearoffish: we develop in ruby, yes
[2013-06-06 12:19:13 -0400] fearoffish: and it was already set up that way, and if it 'aint broke ;)
[2013-06-06 12:20:04 -0400] gigo1980: i have a mix of application that i ll deploy so some are java some are c++ and some are php
[2013-06-06 12:32:59 -0400] fearoffish: oh and I'm on 10.26.0 for my question
[2013-06-06 12:36:57 -0400] AlainODea: How do I patch a provider in Chef? I am encountering a bug and I have a fix that I'd like to apply.
[2013-06-06 12:41:25 -0400] supergrilo: gigo1980 i use debian packages for everything
[2013-06-06 12:51:11 -0400] siezer: AlainODea what provider?
[2013-06-06 13:28:26 -0400] skarufue_: how can i view all the JSON transferred to the server for s specific chef-client run on a specific node
[2013-06-06 13:42:22 -0400] cpasmoi: Is anyone using apt cookbook ? I'd like to use the squeeze-backport repository but I don't see how. The wheezy-backports works well, but the squeeze one is not in the main Debian archive and though requires a "debian-backports" at the end of the url (name of the archive)
[2013-06-06 13:44:45 -0400] cpasmoi: hum, maybe using the uri component
[2013-06-06 13:45:24 -0400] joelawson: Hi everyone, I was wondering if there is a way to have chef echo ***** or not echo at all certain variables such as passwords in its logs.  If that isn't possible, how would I prevent template files from echoing a diff in the log?
[2013-06-06 13:50:39 -0400] skarufue_: joelawson: do you know if those logs are transportet to the chef-server
[2013-06-06 13:51:15 -0400] skarufue_: joelawson: i am having the same problem atm but i am not even shure if the passwords are getting transportet back to the chef-server
[2013-06-06 13:52:17 -0400] skarufue_: joelawson: ok on a second reading i am not so shure anymore if we have the same question...
[2013-06-06 13:53:14 -0400] skarufue_: so again. i need to see all the JSON uploaded to chef server. for a specific chef-client run on a specific node. how so?
[2013-06-06 13:55:46 -0400] flipture: lo all
[2013-06-06 13:56:00 -0400] AlainODea: siezer: It's the usermod provider.
[2013-06-06 13:56:16 -0400] flipture: Anyone know about doing a notifies from within a ruby_block?
[2013-06-06 13:56:50 -0400] flipture: I've got it working by using this format: notifies :restart, resources(:service => "#{variable_containing_service_name}")
[2013-06-06 13:57:15 -0400] flipture: but i'm not 100% sure why this works and the others don't. I'd love to understand better WHY it works...
[2013-06-06 14:01:28 -0400] joelawson: skarufue_: I'm using chef solo so I provide a node.json file via fabric script
[2013-06-06 14:06:00 -0400] admin0: how do I run apt after adding a file in apt.conf.d via cookbook file method ?
[2013-06-06 14:09:16 -0400] chris613: I've recently started using the minitest-handler cookbook and minitest/spec, but I've been having a hell of a time finding complete documentation anywhere, or even which source files I should be reading (my ruby is still a bit weak). Can anyone give me hints as to where I should be looking? I'm trying to learn all the assertions and expectations and whatnot that I can write.
[2013-06-06 14:09:21 -0400] eponymi: hello, it's me, guy with all the annoying questions about tests. i don't see where the database to run features on is created in the mysql cookbook (https://github.com/opscode-cookbooks/mysql/tree/master/test). is it just assumed that you will have created that database?
[2013-06-06 14:11:40 -0400] eponymi: chris613: it's heavily in flux right now and i think the documentation out there is divergent at best, poopoo at worst. here are the minitest-chef assertions and stuff: https://github.com/calavera/minitest-chef-handler/tree/master/lib/minitest-chef-handler
[2013-06-06 14:16:06 -0400] chris613: eponymi: Thanks I've been reading that source, but I guess I need to study it a bit more
[2013-06-06 14:16:37 -0400] eponymi: chris613: now those are just the chef-specific minitest things, there's also the regular minitest stuff here https://github.com/seattlerb/minitest/tree/master/lib/minitest
[2013-06-06 14:16:45 -0400] chris613: eponymi: That was my next question!!! Thanks!
[2013-06-06 14:16:48 -0400] eponymi: well what are you trying to do that you can't get from that source?
[2013-06-06 14:17:00 -0400] eponymi: is it just a matter of actually implementing the tests?
[2013-06-06 14:18:07 -0400] chris613: eponymi: it's just a matter of not being able (weak ruby) to clearly see how that code translates into actual things I can write. Working from the few examples I have it IS becomign clearer, though. This will do for now
[2013-06-06 14:18:09 -0400] jmartin: jtimberman: ahoy sir
[2013-06-06 14:18:52 -0400] nicgrayson: chris613: if you are stronger in bash you could look at bats for test-kitchen for testing instead
[2013-06-06 14:19:17 -0400] nicgrayson: granted it's an intergration test instead
[2013-06-06 14:19:27 -0400] chris613: nicgrayson: Thanks for the recommendation, I'll look at it but want to keep going down this road if I can
[2013-06-06 14:19:52 -0400] eponymi: chris613: alright good deal. don't over think it. most of the assertions have pretty straightforward names. so like, if you wanted to make sure apache was enabled, you'd use the "assert_enabled" assertion on apache
[2013-06-06 14:20:12 -0400] nicgrayson: chris613: there is a great youtube talk about this style being used in a tdd way from dr nic williams
[2013-06-06 14:20:14 -0400] eponymi: then to write that code, you'd just include the apache cookbook + recipe.
[2013-06-06 14:20:51 -0400] eponymi: nicgrayson: isn't that one specific to bats, though?
[2013-06-06 14:22:08 -0400] chris613: eponymi: What was tripping me up was that things like file.must_have(:owner, 'blah).and(......   that stuff didn't appear to cleanly map to anything I was reading, but I've found how it works now and it's startting to make more sense
[2013-06-06 14:22:12 -0400] nicgrayson: eponymi: yes it's bats
[2013-06-06 14:25:46 -0400] eponymi: chris613: there are a lot of things that are "hidden" in my opinion.
[2013-06-06 14:26:00 -0400] eponymi: just make sure that you look at the associated resource definitions when you're writing tests.
[2013-06-06 14:26:19 -0400] eponymi: so for that specific example, you'd look at the file resource, which would give you the attributes.
[2013-06-06 14:26:37 -0400] eponymi: and if you're not great with ruby, the whole string and symbol mixing thing might be confusing
[2013-06-06 14:26:56 -0400] chris613: eponymi: I at least understand symbols :)
[2013-06-06 14:27:00 -0400] chris613: Thanks for all your hints
[2013-06-06 14:27:15 -0400] eponymi: no problem; learning this stuff myself right now, hope it helps.
[2013-06-06 14:30:22 -0400] chris613: eponymi: If you don't mind following that example for a minute, though. in resources.rb, :file is mentioned, but it's just passed to register_resource. The only place I find the references to 'user' and 'group' is in the code for assert_file(), yet I don't have to write assert_file in my test. Is this two different things or does one somehow lead to the other?
[2013-06-06 14:35:05 -0400] eponymi: ok, which resources.rb is that?
[2013-06-06 14:52:35 -0400] astlock: Hello. Guys, please help me with this. FATAL: Chef::Mixin::Template::TemplateError: undefined method `[]' for nil:NilClass
[2013-06-06 14:53:25 -0400] astlock: It happened at zabbix cookbooks zabbix::web_nginx.
[2013-06-06 14:54:22 -0400] astlock: v
[2013-06-06 14:54:24 -0400] astlock: Where should I look to fix this?
[2013-06-06 14:58:26 -0400] knuckolls: astlock:  can you gist the stacktrace, etc from the failed chef run?
[2013-06-06 15:00:36 -0400] Guest94973: hi, has anyone gotten knife winrm to access network shares?
[2013-06-06 15:01:11 -0400] jmartin: Guest94973: do you have credssp enabled?
[2013-06-06 15:01:26 -0400] Guest94973: jmartin: it's set to false
[2013-06-06 15:01:37 -0400] jmartin: then it wont pass your creds on to the network share
[2013-06-06 15:01:44 -0400] Guest94973: gotcha trying now
[2013-06-06 15:04:42 -0400] Guest94973: jmartin: access denied
[2013-06-06 15:06:55 -0400] Guest94973: jmartin: is there a doc that describes winrm access to network shares? i've looked everywhere couldn't find it
[2013-06-06 15:06:55 -0400] astlock: knuckolls, https://gist.github.com/astlock/5722218. Thanks
[2013-06-06 15:08:06 -0400] astlock: and https://gist.github.com/astlock/5722233
[2013-06-06 15:09:34 -0400] knuckolls: astlock: the @database variable is not set up for the template
[2013-06-06 15:09:45 -0400] knuckolls: look at the template resource documentation at the variables parameter
[2013-06-06 15:09:47 -0400] Guest94973: jmartin: i also enabled AllowFreshCredentials policy on the windows client
[2013-06-06 15:09:57 -0400] knuckolls: it'll let you define databases and inject that as @databases into your template
[2013-06-06 15:10:14 -0400] knuckolls: astlock: thus it's saying it can't call [] on a nil object
[2013-06-06 15:13:14 -0400] ryker: anyone know how I fill in the 'license' entry for a cookbook I uploaded to cookbooks.opscode.com?  The 'edit cookbook' link doesn't specify the license field.
[2013-06-06 15:14:35 -0400] ryker: ah, i bet it's grabbed from the metadata.rb and I didn't fill that in.  :/
[2013-06-06 15:16:01 -0400] astlock: <knuckolls>, thanks for the help. It's just new cookbook as well as error... Went to read the documentation.
[2013-06-06 15:16:19 -0400] astlock: *for me
[2013-06-06 15:16:24 -0400] knuckolls: astlock: hope that got you going :)
[2013-06-06 15:33:25 -0400] chris613: I've got a package that once installed requires me to run a cli config tool and answer a bunch of questions. Is there anything in chef to help with that, or do I need to script it in plain old ruby, bash, etc?
[2013-06-06 15:47:12 -0400] owain_: I am trying to run this command with knife "knife bootstrap windows winrm x.x.x.x -r recipe[some::recipe] -x aaaaaaa -P bbbbbbb --node-name ba-wsg-0001.example.com -V --bootstrap-version 10.24.0-1"
[2013-06-06 15:47:28 -0400] owain_: but the version always goes to 11.x
[2013-06-06 15:48:04 -0400] owain_:  C:\Users\vagrant>cscript /nologo C:\chef\wget.vbs /url:"https://www.opscode.com/chef/download?p=windows&pv=2008r2&m=x86_64" /path:"C:\Users\v
[2013-06-06 15:48:19 -0400] owain_: is the output in  knife
[2013-06-06 15:48:56 -0400] owain_: Anyone seen this before?
[2013-06-06 15:56:09 -0400] daquinox: (hopefully) quick question. My Google-fu is failing, but is there any documentation for running chef server 11 against an external postgres instance? Thanks
[2013-06-06 15:57:38 -0400] Trinitro1X: @ryker, yeah I think that's defined in the metadata.rb
[2013-06-06 15:58:45 -0400] ryker: Trinitro1X: yeah, I forgot to respond back. I updated the metadata.rb and it's now showing the license at the cookbooks site.  Make sense. Not sure why I didn't think about that before asking on here. :)
[2013-06-06 16:04:27 -0400] waj: I'm trying to use the "application" cookbook with a mercurial repository. I added the "mercurial" cookbook as dependency but I'm getting this error: "Cannot find a resource for revision_slug on ubuntu version 13.04"
[2013-06-06 16:08:35 -0400] Trinitro1X: @waj: I found that revision_slug is a method of Chef::Provider::Git  (http://ruby-doc.org/gems/docs/n/naked-chef-0.9.15.3/Chef/Provider/Git.html)
[2013-06-06 16:09:17 -0400] Trinitro1X: @waj: My guess is the mercurial provider doesn't provide that method, or Chef is having some problem finding the right mercurial provider on your platform
[2013-06-06 16:10:05 -0400] waj: Mm right, and I found this pull request that maybe solves the issue: https://github.com/opscode-cookbooks/mercurial/pull/5
[2013-06-06 16:10:10 -0400] waj: I'll try
[2013-06-06 16:12:05 -0400] bean: owain_: https://github.com/opscode/knife-windows/blob/master/lib/chef/knife/bootstrap/windows-chef-client-msi.erb#L81 it appears that bootstrap version isnt implemented there
[2013-06-06 16:14:51 -0400] Trinitro1X: Does anyone know how Ruby/Chef determines the LOAD_PATH for libraries within a cookbook?
[2013-06-06 16:15:20 -0400] Trinitro1X: Reason I ask:  I'm getting an error when trying to use edelight/chef-solo-search
[2013-06-06 16:15:29 -0400] Trinitro1X: https://gist.github.com/5717611
[2013-06-06 16:16:49 -0400] owain_: @bean I just raised a ticket about , that , I will do a fix , but I don't know what the uri for the "https://www.opscode.com/chef/download?p=windows&pv=%MACHINE_OS%&m=%MACHINE_ARCH%" to pass in the version
[2013-06-06 16:17:25 -0400] Trinitro1X: Load error for requiring a library that's provided inside that very same cookbook: https://github.com/edelight/chef-solo-search/tree/master/libraries
[2013-06-06 16:17:29 -0400] bean: Neither do I, owain_
[2013-06-06 16:18:29 -0400] Trinitro1X: It even looks like chef-solo-search sets the load path manually at the top: https://github.com/edelight/chef-solo-search/blob/master/libraries/search.rb#L23-L28
[2013-06-06 16:19:03 -0400] Trinitro1X: is something weird with using this within vagrant + berkshelf?
[2013-06-06 16:25:12 -0400] sparr: I want to synchronize some information in chef about my nodes with an outside database that we use for machine status and inventory tracking. Are there any frameworks I should be looking at for implementing that synchronization?
[2013-06-06 16:26:29 -0400] jmickle: sparr: it would help if there was a bit more information, there are tones of inventory management systems and many of which even have direct plugins to utilizing ohai
[2013-06-06 16:26:45 -0400] sparr: this one is home grown. it's tiny.
[2013-06-06 16:26:52 -0400] sparr: just a two table db we are throwing together
[2013-06-06 16:27:10 -0400] jmickle: sparr: I would suggest looking into collecting ohai data
[2013-06-06 16:28:18 -0400] jmickle: sparr: http://docs.opscode.com/ohai.html
[2013-06-06 16:29:27 -0400] willejs: sparr: you could directly access the postgress sql db that chef 11 runs on
[2013-06-06 16:29:34 -0400] willejs: thats pretty nasty tho
[2013-06-06 16:29:47 -0400] sparr: willejs: hoping to avoid that
[2013-06-06 16:30:05 -0400] sparr: jmickle: the other direction is equally important to us
[2013-06-06 16:30:13 -0400] jmartin: sparr: can you not get the information from the REST API?
[2013-06-06 16:31:35 -0400] jmickle: sparr: it sounds like this is more of a conversation you need to have with whoever wrote your inventory management system :-P We don't know the capabilities of how you can pull or gather the data but what we all are giving you on here is that there are endless ways for you to grab the data and do something with it
[2013-06-06 16:31:58 -0400] sparr: jmickle: that's me, and it's not written yet
[2013-06-06 16:32:17 -0400] jmickle: sparr: ok so how do you want to grab the data? Do you want it pushed in? or do you want to pull it?
[2013-06-06 16:32:47 -0400] sparr: not picky. hoping to build it around whatever already exists for purposes such as this
[2013-06-06 16:33:45 -0400] jmickle: sparr: well check out the link we sent earlier, I have built recipes in the past using the ohai attributes and pushing them into a inventory management application through rest calls
[2013-06-06 16:34:17 -0400] jmickle: sparr: I have also built inventory management apps that simply have a cron job to update the db every 5 min and communicate with the chef rest layer
[2013-06-06 16:34:32 -0400] jmickle: sparr: so the possibilities are really up to you in how you want to build it
[2013-06-06 16:35:08 -0400] jmickle: sparr: when i don't have chef-client running continuously on a system i use recipes to push it in
[2013-06-06 16:35:22 -0400] jmickle: sparr: when i do have chef-client running continuously its just as easy to have the cron job to poll for it
[2013-06-06 16:35:50 -0400] sparr: the inventory system is going to live on the chef server
[2013-06-06 16:36:08 -0400] sparr: it won't talk to chef clients
[2013-06-06 16:36:17 -0400] sparr: I just want to move data from the chef server to the inventory system, and vice versa
[2013-06-06 16:36:23 -0400] sparr: s/server/service/
[2013-06-06 16:36:31 -0400] sparr: stupid overloaded english language
[2013-06-06 16:36:50 -0400] jmickle: sparr: then it sounds like you will want too try and use the chef-server's native rest information
[2013-06-06 17:33:33 -0400] Sony: how to remove statements like "D, [2013-06-06T10:12:38.671161 #14718] DEBUG -- : Shutdown completed cleanly" while executing knife commands on shell
[2013-06-06 17:34:08 -0400] fearoffish: I'd assume you set the debug level in your knife.rb
[2013-06-06 17:34:58 -0400] Sony: log_level                :info
[2013-06-06 17:35:04 -0400] Sony: is what I have
[2013-06-06 17:35:49 -0400] djstunami: sparr: I'm doing something similar, your best bet is to use the Chef Server API http://docs.opscode.com/api_chef_server.html
[2013-06-06 17:35:59 -0400] sparr: thanks
[2013-06-06 17:37:47 -0400] djstunami: depending on what you're coding it in, there are already some libraries out there which handle the dirty work of dealing with the authentication headers
[2013-06-06 17:43:31 -0400] frank____: hi all
[2013-06-06 17:43:53 -0400] frank____: I have a problem with the "embedded" ruby/gems that are bundled with the recent "one-package installers"
[2013-06-06 17:44:08 -0400] frank____: i need to have the mysql gem accessible in my chef recipes
[2013-06-06 17:44:18 -0400] frank____: and while "gem install mysql" works
[2013-06-06 17:44:26 -0400] frank____: the chef_gem install mysql fails
[2013-06-06 17:44:32 -0400] frank____: it seems it can't find the mysql headers
[2013-06-06 17:44:44 -0400] frank____: (it probably only searches in /opt/chef/embedded ?)
[2013-06-06 17:44:51 -0400] frank____: any suggestions how to fix that?
[2013-06-06 17:46:56 -0400] gleam: presumably you can pass environment variables or command line arguments with the path to the headers
[2013-06-06 17:48:28 -0400] frank____: any idea how/where these are documented? and preferably: how I can use them in chef_gem?
[2013-06-06 18:15:02 -0400] grmers: hi  i'm having issues with knife winrm authentication, I can't reach network shares on a remote windows host just keep getting access denied, CredSSP is set to true on the client
[2013-06-06 18:20:40 -0400] chaosmaker: grmers can it be something related do UAC? take a look ah Dennif-J post from Sunday, December 30, 2012 12:19 AM on http://social.msdn.microsoft.com/Forums/en-US/netfxremoting/thread/ad02461a-878c-49a9-bc08-a0199d69b85c
[2013-06-06 18:25:14 -0400] grmers: chaosmaker: i dont think i have this issue, i was able to cofigure winrm and i can run commands local to the remote host, i'm only running into trouble when i try to browse a netwokr share on the remote host, it seems like the "multi hop authentication" isn't working
[2013-06-06 18:27:02 -0400] chaosmaker: UAC will not block everything, but just some operations, maybe it can help you
[2013-06-06 18:27:48 -0400] chaosmaker: I'm reading the post again, and it's my fault sorry
[2013-06-06 18:27:54 -0400] chaosmaker: but even using winrm
[2013-06-06 18:28:00 -0400] behemphi: If you spend a great deal of time at the command line and are familiar with VI, this can be a real time saver.  http://goo.gl/5QkJL
[2013-06-06 18:28:01 -0400] chaosmaker: you are under UAC security settings
[2013-06-06 18:28:55 -0400] jonbaer: Hey can someone help, trying to figure out how to deploy from a private github repo + unsure what cookbook to use
[2013-06-06 18:29:06 -0400] chaosmaker: grmers http://tickets.opscode.com/browse/KNIFE-5
[2013-06-06 18:29:14 -0400] chaosmaker: I'm not sure if will solve your porblem
[2013-06-06 18:29:35 -0400] chaosmaker: but you can try to run chef-client as the local administrator
[2013-06-06 18:29:44 -0400] chaosmaker: just need to be sure to set a password on the account
[2013-06-06 18:32:35 -0400] grmers: chaosmaker: trying thanks
[2013-06-06 18:35:06 -0400] grmers: chaosmaker: no luck access is denied
[2013-06-06 18:35:36 -0400] grmers: i'm able to dir c: with both local and domain administrator, but still no network share access
[2013-06-06 18:38:20 -0400] eponymi: jonbaer: deploying from a private repo shouldn't be a problem. you mean deploying an application, right?
[2013-06-06 18:39:00 -0400] eponymi: whoa hold on. test kitchen automatically runs cucumber features?
[2013-06-06 18:39:11 -0400] eponymi: i feel like that should be mentioned in the "Getting Started" wiki...
[2013-06-06 18:39:45 -0400] jonbaer: well I'm trying to do a chef solo w/ vagrant as a test, i think i got it as the key was just added  Github SSH key successfully added for precise64
[2013-06-06 18:39:49 -0400] jonbaer: I'm trying chef-deploy
[2013-06-06 18:40:54 -0400] eponymi: yeah, that should work as long as the key and host are properly specified and the host allows you to connect
[2013-06-06 18:43:38 -0400] chaosmaker: grmers I saw on your message that you have CredSSP enabled on the client
[2013-06-06 18:43:41 -0400] chaosmaker: grmers CredSSP delegation must be enabled in the client settings and in the service settings on the remote computer. In addition, using CredSSP requires setting up an HTTP or HTTPS listener on the server.
[2013-06-06 18:44:23 -0400] chaosmaker: maybe it's trying to authenticate on the remote winrm because credssp is to not use kerberos at all
[2013-06-06 18:44:25 -0400] chaosmaker: I'm not sure
[2013-06-06 18:44:34 -0400] chaosmaker: I'm just throwing ideas hehe
[2013-06-06 18:47:17 -0400] grmers: hm i think credssp only uses kerberos maybe that's my problem
[2013-06-06 18:49:36 -0400] chaosmaker: CredSSP authentication is intended for environments where Kerberos delegation cannot be used.
[2013-06-06 18:56:52 -0400] geggam: is there a "chef proxy" or forwarder type node that can be used in restricted network environments allowing for one master ?
[2013-06-06 18:58:16 -0400] ianco: you could just use tinyproxy or similar
[2013-06-06 19:06:20 -0400] ryker: quit
[2013-06-06 19:06:24 -0400] ryker: oops
[2013-06-06 19:09:14 -0400] grmers: chaosmaker: this is such a headache!
[2013-06-06 19:13:36 -0400] jbz: Anyone got a sec for a minitest/test-kitchen question?
[2013-06-06 19:21:10 -0400] chaosmaker: grmers let me know if it works, maybe it can save me headaches on the future hehe
[2013-06-06 19:22:06 -0400] grmers: chaosmaker: it doesn't
[2013-06-06 19:22:10 -0400] timsmith: grmers:  I asked a coworker that struggled with the same issue for a while he said the key is test it using enter-pssession on the remote system so you can make sure your actually have access to the resources
[2013-06-06 19:22:34 -0400] grmers: sorry using what?
[2013-06-06 19:23:32 -0400] grmers: timsmith: on the windows host i can use winrs to dir \\remote\share
[2013-06-06 19:23:41 -0400] timsmith: check this doc for the various setting you need to enable
[2013-06-06 19:23:42 -0400] timsmith: http://msdn.microsoft.com/en-us/library/windows/desktop/ee309365%28v=vs.85%29.aspx
[2013-06-06 19:23:54 -0400] grmers: tmichael: i pass the -ad flag and it seems to be passing on the credentials correctly
[2013-06-06 19:23:58 -0400] timsmith: there's a lot to enable to make that work even though is seems pretty straight forward
[2013-06-06 19:26:20 -0400] grmers: timsmith: yep that's one of the docs i went through
[2013-06-06 19:26:47 -0400] grmers: timsmith: was your coworker able to reach network shares from the windows host?
[2013-06-06 19:27:16 -0400] jds_: Hi there
[2013-06-06 19:27:20 -0400] jds_: I'm new to chef, and am confusing myself with the wide range of (conflicting?) instructions available on Google.  I have the eventual aim of getting chef working with vagrant, but for now am just running chef-solo by hand on the assumption that things might become clearer...
[2013-06-06 19:27:28 -0400] jds_: I was trying to just install nginx, but got an error "undefined method `[]' for nil:NilClass" in ohai_plugin in nginx.  Ended up having to add ohai, apt, build-essential, runit, and yum to the cookbooks directory before I could persuade it that all dependencies where available
[2013-06-06 19:27:34 -0400] jds_: At which point I get "NameError: undefined local variable or method `use_inline_resources'", which I guess is a chef 11 thing
[2013-06-06 19:27:40 -0400] jds_: I tried to use chef 11 earlier, but I got "Resource.const_defined?(class_name, false)", which suggests it depends on ruby 1.9
[2013-06-06 19:27:46 -0400] jds_: Should I just upgrade everything to ruby 1.9 & chef 11, or am I better off trying to make things work in chef 10 ?
[2013-06-06 19:27:51 -0400] timsmith: grmers:  he was after a lot of struggling
[2013-06-06 19:28:49 -0400] grmers: timsmith: ah so there is hope... any chance he wrote down his struggle somewhere on the internet?
[2013-06-06 19:28:49 -0400] timsmith: jds_:  If you're new to Chef you should probably start out with Chef 11 using the omnibus installer which includes an embedded copy of Ruby 1.9.  It'll save you time updating later
[2013-06-06 19:29:00 -0400] timsmith: nope sorry grmers
[2013-06-06 19:29:16 -0400] jds_: timsmith: Hm, ok.  It's reasonably well supported by the various recipes, then?
[2013-06-06 19:29:44 -0400] timsmith: support seems to be getting there and a lot of recipes are slowly dropping support for chef 10
[2013-06-06 19:29:59 -0400] timsmith: there's a few simple things you might have to change in community cookbooks
[2013-06-06 19:30:04 -0400] timsmith: but I'd do 11 if I was starting fresh
[2013-06-06 19:30:04 -0400] grmers: timsmith: did he need to use kerberos or was he passing the credentials on the command line to knife winrm?
[2013-06-06 19:30:11 -0400] jds_: I'm still struggling with chef 11, however...   The nginx recipe calls 'template "#{node['ohai']['plugin_path']}/nginx.rb"'.   When I try to use it, node['ohai'] is nil.  What am I missing that would usually set that up?
[2013-06-06 19:30:39 -0400] timsmith: grmers:  he was passing creds and had the specific host he was using as a jumphost setup to be allowed on the client machine
[2013-06-06 19:31:04 -0400] timsmith: jds_:  What version of the nginx cookbook are you using
[2013-06-06 19:31:27 -0400] timsmith: there's a lot of change happening in that cookbook.  It didn't really work all that well in Chef 10 either
[2013-06-06 19:33:03 -0400] jds_: timsmith: 1.6.0
[2013-06-06 19:33:19 -0400] jds_: Hmm.  Maybe I chose a bad package to start learning with...
[2013-06-06 19:33:27 -0400] timsmith: how did you install chef?  gems or omnibus installer?
[2013-06-06 19:33:38 -0400] grmers: timsmith: any specifics on how he setup the jumphost to be allowed on the client?
[2013-06-06 19:34:02 -0400] timsmith: grmers:  Every client had to be setup to allow the jumphost
[2013-06-06 19:34:06 -0400] timsmith: I believe that's in the doc
[2013-06-06 19:34:12 -0400] timsmith: but they allowed a wildcard
[2013-06-06 19:34:21 -0400] jds_: timsmith: I was using gems for chef 10, but used omnibus for chef 11
[2013-06-06 19:35:04 -0400] grmers: timsmith: i allow a wildcard as well
[2013-06-06 19:35:12 -0400] timsmith: jds_:  nginx might not be the best cookbook to learn with.  There's a lot of work to refactor it.
[2013-06-06 19:36:34 -0400] zaargy: anyone using chef-zero?
[2013-06-06 19:37:01 -0400] timsmith: grmers:  not sure then.  sorry
[2013-06-06 19:37:07 -0400] jds_: Is there a recommended guide for 'the one true way' of setting up chef (or at least chef-solo)?  Googling has proved pretty confusing, with a range of opinions from a range of chef versions
[2013-06-06 19:37:18 -0400] grmers: timsmith: ok thank you
[2013-06-06 19:37:23 -0400] timsmith: it's mostly opinion
[2013-06-06 19:37:31 -0400] jds_: (and chef-solo vs 'proper chef' isn't helping)
[2013-06-06 19:37:33 -0400] grmers: timsmith: at least you gave me hope
[2013-06-06 19:37:45 -0400] timsmith: grmers:  it can be made to work
[2013-06-06 19:39:07 -0400] frank____: meh
[2013-06-06 19:39:23 -0400] frank____: i am starting to think omnibus is a BAD idea!
[2013-06-06 19:39:28 -0400] Otterley: why?
[2013-06-06 19:39:38 -0400] frank____: see the ugly that's needed for the pg gem: https://github.com/hw-cookbooks/postgresql/commit/b26a0dd9777755f698b04efd4db8772279e42b0b
[2013-06-06 19:39:49 -0400] frank____: i need exactly the same thing for mysql
[2013-06-06 19:40:10 -0400] frank____: and i'll need the same thing for every bloody gem I need in a recipe
[2013-06-06 19:40:59 -0400] Otterley: is that because rbconfig has bad data in it?
[2013-06-06 19:41:24 -0400] frank____: the embedded ruby is linked against embedded libssl
[2013-06-06 19:41:32 -0400] Otterley:  so
[2013-06-06 19:41:33 -0400] jkeiser: zaargy: yeah, but I wrote it so I might not count
[2013-06-06 19:41:50 -0400] frank____: but embedded gem install seems to use system ssl gems
[2013-06-06 19:41:58 -0400] frank____: when linking against eg libmysqlclient
[2013-06-06 19:42:14 -0400] jbz: Any minitest/test-kitchen gurus around?
[2013-06-06 19:42:20 -0400] frank____: other option would be to put entire mysql distrib in /opt/chef/embedded as well
[2013-06-06 19:42:25 -0400] frank____: but that's even more ugly
[2013-06-06 19:42:57 -0400] Otterley: yeah, installing gems that link to native code is probably nontrivial under Omnibus
[2013-06-06 19:43:15 -0400] frank____: well, mysql gem kind of needs it :)
[2013-06-06 19:43:21 -0400] Otterley: but then again I don't try to manage databases with Chef.
[2013-06-06 19:43:44 -0400] frank____: and I configure my mysql servers using chef, from within the recipes, using direct mysql commands
[2013-06-06 19:43:55 -0400] frank____: s/commands/ruby
[2013-06-06 19:44:19 -0400] Otterley: IMHO the only thing you should be configuring with Chef re: MySQL servers is my.cnf and other static data
[2013-06-06 19:44:32 -0400] Otterley: schemas, replication, etc. are all dynamic state
[2013-06-06 19:44:40 -0400] grmers: timsmith: i like how after insetting every setting in the doc you linked i can still connect with winrm and list local dir
[2013-06-06 19:45:17 -0400] frank____: Otterley: haha, funny boy
[2013-06-06 19:45:29 -0400] Otterley: *shrug*
[2013-06-06 19:45:46 -0400] frank____: Otterley: some of the basic stuff we do using chef: - configure grants for monitoring users
[2013-06-06 19:45:56 -0400] frank____: - configure master/master replication in clusters
[2013-06-06 19:45:57 -0400] frank____: etc
[2013-06-06 19:46:08 -0400] Otterley: you're gonna have a bad time ...
[2013-06-06 19:46:18 -0400] frank____: - get data from our controlpanel to create/change grants
[2013-06-06 19:46:26 -0400] frank____: we already do that, for more than a year now
[2013-06-06 19:46:51 -0400] Otterley: it works, until it doesn't
[2013-06-06 19:46:57 -0400] frank____: it's only today when we wanted to work around the "can't have rubygems2/ruby2 and run chef"
[2013-06-06 19:47:05 -0400] frank____: and tried to use the omnibus installer
[2013-06-06 19:47:13 -0400] frank____: all other installs are non-omnibus
[2013-06-06 19:47:22 -0400] frank____: wanted to see if it would work
[2013-06-06 19:47:27 -0400] frank____: as advertised
[2013-06-06 19:47:40 -0400] frank____: but we'll stick to non-omnibus then!
[2013-06-06 19:47:48 -0400] frank____: (pitty, as it means no ruby2 servers :()
[2013-06-06 19:47:51 -0400] Otterley: you're gonna have a bad time.
[2013-06-06 19:48:18 -0400] frank____: no, i am not. I am going to rm -rf /opt/chef and do a gem install chef instead
[2013-06-06 19:48:31 -0400] Otterley: "when you have a hammer, everything looks like your thumb"
[2013-06-06 19:49:03 -0400] hatchetation: so, has Opscode officially deprecated their apt repo, or am I in the wrong place @ http://apt.opscode.com
[2013-06-06 19:49:08 -0400] frank____: unless you have a better solution to make chef_gem mysql actually work?
[2013-06-06 19:49:16 -0400] astlock: <knuckolls>, Thank you, I fixed my problem:)
[2013-06-06 19:49:52 -0400] gleam: 9
[2013-06-06 19:51:18 -0400] AlainODea: Can I patch a resource provider during a chef-client run and use the patched provider during that run? I have a problem with usermod and I have a fix that works, but I have a chicken/egg problem or I have to bootstrap twice
[2013-06-06 20:00:59 -0400] faldridge: I want to use an attribute in a cookbook that can then be overridden via the web UI for a particular node.  How do I do this?  None of the documentation I have read mentions how to override an attribute on a specific node.
[2013-06-06 20:01:55 -0400] techminer: attribute precedence question again  I have two cookbooks, A and B, in the runlist on my node.  Both set the same attribute and I want them merged on the node.  The recipe runs in cookbook A.  It ignores the attribute I'm wanting to merge in from the attributes file of cookbok B.
[2013-06-06 20:02:57 -0400] techminer: Is there a way to solve that?  I've even tried override and force_override in cookbook B, but the recipe in cookbook A STILL ignores it.
[2013-06-06 20:03:22 -0400] jbz: techminer: if you know you want to check cookbook B's attribs
[2013-06-06 20:03:35 -0400] jbz: I think you can use 'include_attributes <cookbook B' in cookbook A's attrib file
[2013-06-06 20:03:37 -0400] jbz: that should force a merge
[2013-06-06 20:03:49 -0400] jbz: I will caveat that with *I think* lol
[2013-06-06 20:04:46 -0400] techminer: ah ok.I'll try that.  It's the /etc/cron.allow file I'm managing and it will could get very customized on different nodes.
[2013-06-06 20:07:32 -0400] jbz: techminer: check here, second section: http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-06-06 20:08:00 -0400] techminer: jbz:  thanks just found that link   :)
[2013-06-06 20:08:18 -0400] jbz: :-)
[2013-06-06 20:11:43 -0400] faldridge: I've tried defining the attribute in the attributes file of my cookbook as a "normal" attribute because that makes them persist according to the docs.  This causes the attribute to appear in my attribute  list when editing the node through the web UI.  I can then change the value to what I want and save the node, and it shows up as the value in the node list.  However, when I run chef-client, the value resets to the value defined in the
[2013-06-06 20:11:44 -0400] faldridge: attribute file.  How do I make the change in the web UI truly permanent?
[2013-06-06 20:13:21 -0400] jmickle: faldridge: put it in override if you want that attribute to stick on that server
[2013-06-06 20:14:23 -0400] faldridge: jmickle: could you please elaborate with exactly how to define the attribute in my cookbook and how where to put the attribute in the JSON in the web UI?  I have tried this, too, but am probably doing it wrong.
[2013-06-06 20:15:05 -0400] jmickle: faldridge: inside your json file you have a section called override_attributes
[2013-06-06 20:15:16 -0400] techminer: jbz:  odd.it ignored that completely and imported an attribute from another cookbook in that runlist
[2013-06-06 20:15:33 -0400] jmickle: faldridge: drop the setting into there and that should take a high precedence on the loading
[2013-06-06 20:15:39 -0400] jmickle: faldridge: http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-06-06 20:15:52 -0400] jmickle: faldridge: that link shows the loading mechanism of attributes and where to put them based on the loading you wish
[2013-06-06 20:17:11 -0400] jbz: techminer: that'sreally peculiar.
[2013-06-06 20:36:34 -0400] jesse_: Has anyone seen a FATAL: Net::HTTPServerException: 400 "Bad Request" error when bootstraping a node?
[2013-06-06 20:39:05 -0400] jbz: Are you bootstrapping on EC2?
[2013-06-06 20:39:28 -0400] jesse_: Nope.  Bootstrapping in my datacenter
[2013-06-06 20:39:41 -0400] jbz: Ah. n/m.
[2013-06-06 20:40:08 -0400] jesse_: We just finished installing chef client on about 75 nodes.  5 of them have this error when chef-client is run
[2013-06-06 20:42:50 -0400] faldridge: jmickle: here's the problem with that document for me: it doesn't mention the UI at all
[2013-06-06 20:43:26 -0400] faldridge: So I have no idea how to define an attribute in a cookbook, and then edit the value in the web UI, and have that attribute not get reset to the value defined in the cookbook when chef-client runs
[2013-06-06 20:44:57 -0400] aub: i'm trying to put together a development environment for a rails app using chef and vagrant. i'm installing nginx via the standard cookbook, and it creates a default site config. i'm a total noob, but i can't figure out how i could specify either my own site config or modifications to the default one.
[2013-06-06 20:45:03 -0400] jmickle: faldridge: i don't think you can modify cookbook attributes through the web UI i think its really just node attributes you can edit in the web ui
[2013-06-06 20:45:16 -0400] jmickle: faldridge: i think it would make a lot more sense if you set up knife and pull your recipes down
[2013-06-06 20:45:46 -0400] wakked_: I'm completly new to chef and trying to figure out how to install java via chef.  I'm able to bootstrap my windows machine and get the chef client installed no problem, but now I have the java install downloaded locally and want to use chef to copy that to the windows machine and run the installer...help?
[2013-06-06 20:46:40 -0400] faldridge: jmickle: I do have knife.  All I want to accomplish is being able to override an attribute on a single node, basically at "run time" in that the value doesn't belong in any repo, it's very context dependent and I need to be able to change it at whim.
[2013-06-06 20:46:55 -0400] faldridge: jmickle: whether I can do that through the web UI or through knife I don't care.
[2013-06-06 20:47:02 -0400] faldridge: jmickle: I just can't find a way to do that
[2013-06-06 20:47:19 -0400] jmickle: faldridge: you can do a knife node edit on the node and edit the JSON file directly if you are more familiar with JSON
[2013-06-06 20:47:21 -0400] faldridge: jmickle: and what exactly are node attributes and how do I define one?
[2013-06-06 20:47:40 -0400] jmickle: faldridge: or you can do it directly from the web ui but personally i find even the web ui a bit confusing
[2013-06-06 20:47:53 -0400] jmickle: faldridge: try doing a knife node edit, i think you might find it much easier
[2013-06-06 20:48:12 -0400] faldridge: jmickle: I would be comfortable with either; I just want to define an attribute for the node that doesn't get reset to the value in my cookbook.
[2013-06-06 20:48:25 -0400] faldridge: jmickle: are you saying that "node attributes" are the key to doing that?
[2013-06-06 20:49:04 -0400] jmickle: faldridge: correct you are just trying to edit this for 1 node correct? You don't want to update the entire environment or the entire cookbook or the entire role right?
[2013-06-06 20:49:12 -0400] faldridge: jmickle: correct.
[2013-06-06 20:49:25 -0400] faldridge: Where do I define an attribute that makes it a "node attribute" and not some other kind?
[2013-06-06 20:50:03 -0400] jmickle: faldridge: correct then just do a knife node edit and it will present you a json file with your information in side of there will be a "normal" block you should be able to put it into there and accomplish what you are looking for
[2013-06-06 20:50:32 -0400] faldridge: I want to define a default value for the attribute in my cookbook, then have my cookbook use the value hand-edited for the node if different, otherwise use the default value.  How in the world do I do that?
[2013-06-06 20:50:36 -0400] jmickle: faldridge: although depending on your cookbook attributes you may need to try putting in an "override" block versus using normal but I've always had pretty good luck with normal so i would start there
[2013-06-06 20:51:03 -0400] jmickle: faldridge: default values for cookbooks can be places in the cookbook's attributes file
[2013-06-06 20:51:13 -0400] jmickle: faldridge: then you can place specific environment over rides in an environment file
[2013-06-06 20:51:21 -0400] jmickle: faldridge: you can also place specific role overrides in a role file
[2013-06-06 20:51:30 -0400] jmickle: faldridge: you can also place node over rides in the node json
[2013-06-06 20:52:03 -0400] faldridge: the node json is only stored on the node, right?  Not in my local chef repo?
[2013-06-06 20:52:27 -0400] jmickle: faldridge: it comes from your chef-server but its not stored in the "repo" you won't get it through a knife download
[2013-06-06 20:52:39 -0400] jmickle: faldridge: I particularly look at node overrides as temporary overrides
[2013-06-06 20:53:17 -0400] jmickle: faldridge: if you want a permanent solution i would look more into overriding by role or environment you can use node for it but you have to remember to always edit that one
[2013-06-06 20:54:21 -0400] gazarsgo: how do i specify server url to knife data bag ? -s isn't getting picked up, keeps using localhost
[2013-06-06 20:54:47 -0400] faldridge: jmickle: this is exactly that: a temporary override.  So I define the attribute via "default['foo']['my_attr']: in the cookbook and then use the exact path but under the "normal" key in the json, e.g.: {"normal": {"foo": {"myattr": "myval"}}}?
[2013-06-06 20:55:12 -0400] jmickle: faldridge: exactly
[2013-06-06 20:55:23 -0400] jmickle: faldridge: that json would be your knife node edit
[2013-06-06 20:57:26 -0400] jmickle: faldridge: remember to remove the node override though when you are done, otherwise it will override when you don't want it to
[2013-06-06 21:00:06 -0400] jmickle: wakked_: check out the community cookbook http://community.opscode.com/cookbooks/java
[2013-06-06 21:00:35 -0400] jmickle: wakked_: this cookbook supports windows installs, if you put this recipe in your run list for the server and run chef-client it will do the install and setup
[2013-06-06 21:00:36 -0400] miah: hi
[2013-06-06 21:00:44 -0400] jmickle: hi miah
[2013-06-06 21:00:59 -0400] miah: hihi
[2013-06-06 21:01:04 -0400] jmickle: welcome back
[2013-06-06 21:01:05 -0400] jmickle: ;-)
[2013-06-06 21:01:18 -0400] miah: yar. had a meeting then lunch with a friend
[2013-06-06 21:01:23 -0400] wakked_: @jmickle I saw that but it want's to pull down from a repo, I want to copy from a local version
[2013-06-06 21:02:01 -0400] miah: your local version can be hosted on a local webserver =)
[2013-06-06 21:02:02 -0400] jmickle: wakked_: you might be able to change the source it pulls from I'm not sure i haven't don't that on windows so i am guessing at that one
[2013-06-06 21:04:17 -0400] jmickle: wakked_: miah is right you can host it on a local web server and then in the attributes file point to that location for it to pick it up
[2013-06-06 21:09:02 -0400] faldridge: jmickle: thank you so, so much!  That worked.  As is common, now I understand and hate Chef more than before.
[2013-06-06 21:10:10 -0400] jmickle: faldridge: no problem glad that worked and glad that helped shed some light. I hope soon you can learn to love chef and not hate chef :-)
[2013-06-06 21:11:23 -0400] faldridge: I'm trying. ;)
[2013-06-06 21:12:11 -0400] jmickle: faldridge: for a long time i hated puppet/chef/cfengine as well. But then i realized after many years of writing things like nagios config files how much better it was to be able to be lazy
[2013-06-06 21:12:41 -0400] jmickle: faldridge: eventually i realized the power chef brought into my infrastructure and exactly how lazy it could make me and how i could focus on doing much more important things then worrying about versions of configs etc etc
[2013-06-06 21:12:58 -0400] jmickle: faldridge: now i embrace it and help the community to spread it :-)
[2013-06-06 21:17:19 -0400] jmickle: faldridge: for kicks, you should take a look at how the UI Looks with the override saved. It might make it easier to add them through the UI later
[2013-06-06 21:17:56 -0400] faldridge: jmickle: that's what I did since I couldn't get the changes I made from knife: edit to actually save.
[2013-06-06 21:18:19 -0400] faldridge: How do you do that by the way?  When I made changes with a write/quit, I got a message indicating a failure to save.
[2013-06-06 21:18:37 -0400] jmickle: faldridge: interesting not sure why but typically when you save and exit it uploads
[2013-06-06 21:18:56 -0400] jmickle: faldridge: i'd have to see the error also check your permissions etc etc make sure your knife client is set up properly
[2013-06-06 21:18:56 -0400] faldridge: maybe there was an error in my json syntax.
[2013-06-06 21:19:22 -0400] jmickle: faldridge: possible that could be the case as well
[2013-06-06 21:19:32 -0400] faldridge: jmickle: which permissions should I check?
[2013-06-06 21:19:54 -0400] jmickle: faldridge: first check to make sure your knife.rb is setup properly and your chef client key has permissions to modify
[2013-06-06 21:20:08 -0400] idlemichael: what are the best practices for creating users in chef? for example, if you want a user named 'www' on your system, is that something you do in the recipe for your cookbook or somewhere else?
[2013-06-06 21:20:33 -0400] chaosmaker: someone managing ssl certificates on windows/IIS using chef?
[2013-06-06 21:30:10 -0400] eponymi_: idlemichael: Probably the user resource
[2013-06-06 21:30:43 -0400] benkay_: does anyone have experience with the openssh cookbook?
[2013-06-06 21:31:20 -0400] benkay_: i'd love to use it to provision a match group directive
[2013-06-06 21:31:26 -0400] benkay_: foar teh sftp
[2013-06-06 21:36:46 -0400] rayrod2030: anyone running test-kitchen jobs via jenkins on AWS?
[2013-06-06 21:45:44 -0400] faldridge: ok, thanks again!
[2013-06-06 21:46:48 -0400] idlemichael: eponymi: i'm looking at https://github.com/opscode-cookbooks/apache2, and cannot find how they create a user -- i've been grepping all over looking for it in the repo
[2013-06-06 21:47:18 -0400] eponymi: idlemichael: You might try googling "chef user resource"
[2013-06-06 21:47:20 -0400] juliancdunn: idlemichael: what kind of user? what do you mean?
[2013-06-06 21:47:41 -0400] idlemichael: eponymi: i've read the doc on user -- it doesn't say anything about creating users before any other action, etc
[2013-06-06 21:48:06 -0400] idlemichael: juliancdunn: i want to create a user to run my web server that isn't root, or the default system user
[2013-06-06 21:48:47 -0400] idlemichael: juliancdunn: so for instance, i'm trying to create a simple webserver that uses nginx, but i want to change the default user nginx uses -- i've tried overriding the variable, but it doesn't seem to start up nginx
[2013-06-06 21:49:35 -0400] juliancdunn: idlemichael: use the 'user' resource - http://docs.opscode.com/resource_user.html
[2013-06-06 21:50:04 -0400] idlemichael: ..i am
[2013-06-06 21:50:11 -0400] idlemichael: exactly as the doc lays it out
[2013-06-06 21:50:21 -0400] idlemichael: my "www" user isn't created before nginx is started
[2013-06-06 21:50:43 -0400] juliancdunn: put the recipe where you create your 'www' user before the recipe where nginx is started
[2013-06-06 21:50:46 -0400] juliancdunn: in your run list
[2013-06-06 21:51:16 -0400] juliancdunn: of course, you are probably going to create your own init script or whatever to start nginx the way you want
[2013-06-06 21:51:42 -0400] idlemichael: defaults are fine for Now juliancdunn, just wanted to get a diff user running the service. i'll try that suggestion, thanks
[2013-06-06 21:54:46 -0400] idlemichael: juliancdunn: i just tried something along the lines of hwat you said -- i moved the 'include_recipe 'nginx'' after my user creation in my default.rb recipe
[2013-06-06 21:55:09 -0400] idlemichael: i didn't realize you could do that -- i thought the "include_recipe" statements were like C/C++/Java style include statements
[2013-06-06 21:55:12 -0400] idlemichael: sort of like header files
[2013-06-06 21:58:38 -0400] eponymi: idlemichael: Something funny about all this idempotency stuff is that the orders of lines in your files really matters
[2013-06-06 21:59:17 -0400] idlemichael: eponymi: when i was reading through tutorials/guides i actually thought i read somewhere that it SHOULDN'T matter in order to be idempotent?
[2013-06-06 21:59:25 -0400] eponymi: There's some sort of "first run" concept that is supposed to explain it all, but seems to me just an excuse for why things don't work in the "idempotent" manner you'd expect
[2013-06-06 21:59:49 -0400] eponymi: idlemichael: It doesn't, just ask the chefs
[2013-06-06 21:59:58 -0400] eponymi: Except for re: the first run
[2013-06-06 22:00:07 -0400] idlemichael: eponymi: ah.. i see waht you're saying now
[2013-06-06 22:00:16 -0400] idlemichael: eponymi: so the first run is a special case?
[2013-06-06 22:00:42 -0400] eponymi: In which case, throw all of that reading you just did about idempotency and its associated magic out the window
[2013-06-06 22:01:04 -0400] idlemichael: eponymi: i can't tell how sarcastic you're being right now and who it's aimed at :o
[2013-06-06 22:01:22 -0400] runfromnowhere: Idempotency isn't magic
[2013-06-06 22:01:36 -0400] runfromnowhere: And remember that Chef is half Ruby
[2013-06-06 22:01:54 -0400] runfromnowhere: It's entirely possible to build cookbooks and recipes with dependencies that aren't declared or checked
[2013-06-06 22:02:01 -0400] eponymi: idlemichael: I'm being very sarcastic and it's not aimed at you
[2013-06-06 22:02:04 -0400] runfromnowhere: And then order matters
[2013-06-06 22:02:30 -0400] idlemichael: eponymi: i appreciate the help regardless, juliancdunn too! i have a slightly better understanding of how this is working
[2013-06-06 22:02:55 -0400] miah: if the only way you write cookbooks is via 'recipes' then you will probably have order of execution issues and potentially issues with idempotency.
[2013-06-06 22:03:03 -0400] eponymi: The idea of idempotency is paramount in all of the docs aimed at noobs, but order is actually quite important
[2013-06-06 22:03:40 -0400] eponymi: Its just that order is manifested in different ways bc of all of the lingo
[2013-06-06 22:03:46 -0400] runfromnowhere: eponymi: I'm also a little curious as to your definition of "idempotent"
[2013-06-06 22:04:46 -0400] eponymi: runfromnowhere: I like to use Benjamin Peirce's; I was a math major for a couple semesters
[2013-06-06 22:05:39 -0400] runfromnowhere: I don't believe that definition implies that multiple idempotent operations will never be order-dependent?
[2013-06-06 22:06:04 -0400] eponymi: Indeed it does
[2013-06-06 22:06:19 -0400] eponymi: f of f of x should always be f of x
[2013-06-06 22:06:23 -0400] runfromnowhere: Well yes
[2013-06-06 22:06:28 -0400] runfromnowhere: But
[2013-06-06 22:06:58 -0400] runfromnowhere: Does that mean abs(f(x)) must be equal to f(abs(x)) if both f(x) and abs(x) are, indivitually, idempotent operations?
[2013-06-06 22:07:02 -0400] eponymi: Unless those two semesters weren't enough to make me an expert in advanced mathematical concepts :)
[2013-06-06 22:07:38 -0400] joeyfitz: what is the best way to orchestrate multiple chef runs (including reboots in-between each step) leveraging vagrant? any ideas?
[2013-06-06 22:08:00 -0400] joeyfitz: (including reboots in-between each run), rather
[2013-06-06 22:08:04 -0400] eponymi: runfromnowhere: Not pertinent in this case, because you've defined a binary relationship and, by all written auspices, the chef run should be a unary function
[2013-06-06 22:08:41 -0400] eponymi: Until you discover the hidden caveat of the "first run"
[2013-06-06 22:09:39 -0400] eponymi: And then until you discover "include_recipe"s on line 85 of opscode cookbooks
[2013-06-06 22:10:44 -0400] runfromnowhere: I'll agree - that's the danger zone you enter when you get outside of a fixed set of operations
[2013-06-06 22:12:14 -0400] eponymi: Basically, I think it's a cool term that was adopted (like many other IT eponyms) to lend established credibility to a new idea. And, like those many others, I don't know that it lives up to its billing.
[2013-06-06 22:13:09 -0400] jmauntel: Anyone know how to see the json data that is uploaded from the chef client to the chef server at the end of a client run?  I'm having a problem with a few of my new clients and the /var/log/chef-server/erchef/erchef.log.1 file on my server reports a status 400 error and the reason is "error,invalid_json"
[2013-06-06 22:13:17 -0400] Otterley: joeyfitz, why are you rebooting servers?
[2013-06-06 22:13:33 -0400] Otterley: unless you're doing kernel upgrades, this should not be necessary
[2013-06-06 22:13:50 -0400] joeyfitz: Otterley: there are two scenarios
[2013-06-06 22:14:15 -0400] joeyfitz: 1) The vagrant base box for precise64_vmware is built using a virtual kernel
[2013-06-06 22:14:32 -0400] runfromnowhere: eponymi: I'm not sure...perhaps the term is not the most perfect one to use but at the same time it's meaningful to differentiate this tool from earlier config management tools that either behaved erratically and had to be run at prescribed times or that didn't guarantee results or state changes except over many repeated runs
[2013-06-06 22:15:09 -0400] joeyfitz: and i need to install the linux-image-extra-virtual and quota packages and restart to enable quotas (which is required in my next step)
[2013-06-06 22:15:17 -0400] eponymi: runfromnowhere: However, the community at large would likely argue that it is up two the author to fulfill the contract of idempotence within his or her code.
[2013-06-06 22:15:27 -0400] joeyfitz: 2) when working with windows, invariably many things require reboots, and it's just a fact of life
[2013-06-06 22:15:36 -0400] Otterley: joeyfitz, I'd make my own base box instead.  can't speak for windows
[2013-06-06 22:16:44 -0400] joeyfitz: assuming for a second that i couldn't make a base box, and i had to deal with windows - and i want to execute _n_ runs until some desired end state is required is there anything out there that will help me or do i have to (re)invent the wheel
[2013-06-06 22:16:58 -0400] eponymi: runfromnowhere: I have no experience with previous config management tools, so I can not put forward an opinion on that. But I do think (as someone who absolutely loves what chef has done for his workflow and productivity) the use of the term is mostly fancy marketing.
[2013-06-06 22:17:10 -0400] Otterley: joeyfitz, this is probably better done out of band from Chef
[2013-06-06 22:17:14 -0400] runfromnowhere: eponymi: True, and that's where things get tricky - not everyone will fulfill that contract and when they don't you'll get unexpected results.  And many people will rush to get something to work rather than engineer it properly.
[2013-06-06 22:17:28 -0400] runfromnowhere: Be glad you haven't used prior config management tools.  Most of them are ugly as sin :(
[2013-06-06 22:17:37 -0400] eponymi: Now, it's time for my long weekend, and accordingly, beer.
[2013-06-06 22:17:38 -0400] Otterley: Chef is just one tool in the toolbox; often you need to complement it with other tools
[2013-06-06 22:17:53 -0400] runfromnowhere: Heheh have a good weekend :)
[2013-06-06 22:21:38 -0400] rshade98: Did you guys branch your cookbooks before moving them to 11.x syntax?
[2013-06-06 22:23:02 -0400] miah: i always branch my cookbooks when doing dev
[2013-06-06 22:23:42 -0400] rshade98: miah, I was talking about the opscode-cookbooks ones
[2013-06-06 22:24:11 -0400] rshade98: Thank you though
[2013-06-06 22:24:39 -0400] miah: they also do branch based dev'd. you should be able to pull previous versions if you're on 10.x
[2013-06-06 22:26:43 -0400] umairmufti: hi there. can anyone help me with a 'Network Error: getaddrinfo' issue with hosted chef? all the documentation i've seen says to reconfigure the server. but i'm using hosted chef.
[2013-06-06 22:27:12 -0400] spheromak: joeyfitz, you could have a chef_handler that trys to do another converge.
[2013-06-06 22:27:22 -0400] spheromak: joeyfitz, that would be interesting  :D
[2013-06-06 22:27:47 -0400] joeyfitz: spheromak: i was kind of hoping vagrant would have something to help me with this
[2013-06-06 22:27:53 -0400] spheromak: nope
[2013-06-06 22:28:00 -0400] spheromak: you could run a shell script provisioner
[2013-06-06 22:28:04 -0400] joeyfitz: particularly given that it is aware of vm state
[2013-06-06 22:28:15 -0400] spheromak: that ran your solo  XX times or untill exit is 0 status
[2013-06-06 22:28:55 -0400] joeyfitz: are there any examples of how you might use a shell script provisioner to trigger chef-solo?
[2013-06-06 22:29:27 -0400] miah: joeyfitz: http://docs-v1.vagrantup.com/v1/docs/provisioners/shell.html
[2013-06-06 22:29:33 -0400] joeyfitz: the issue there is the shell script is run on the VM
[2013-06-06 22:29:35 -0400] joeyfitz: not locally
[2013-06-06 22:29:42 -0400] spheromak: yea thats what you want
[2013-06-06 22:29:47 -0400] spheromak: you are converging the guest right ?
[2013-06-06 22:29:50 -0400] joeyfitz: yes
[2013-06-06 22:29:55 -0400] spheromak: and you need 3 runs to get it where you want
[2013-06-06 22:30:09 -0400] spheromak: so you write a shell provisioner that will run chef-solo on your guest (what the provisioners do )
[2013-06-06 22:30:11 -0400] joeyfitz: but if it's running on the guest, how will it recover when the guest reboots?
[2013-06-06 22:30:17 -0400] spheromak: oh
[2013-06-06 22:30:24 -0400] joeyfitz: this is my issue
[2013-06-06 22:30:26 -0400] spheromak: your issue is a reboot mid-run ?
[2013-06-06 22:30:40 -0400] joeyfitz: well i need multiple runs
[2013-06-06 22:30:40 -0400] spheromak: only caught the question asking for a way to converge multiple times
[2013-06-06 22:30:53 -0400] spheromak: multiple runs then a reboot
[2013-06-06 22:30:54 -0400] spheromak: ?
[2013-06-06 22:31:02 -0400] joeyfitz: assuming that some runs may result in a reboot, so i would want to pause in the middle and check if the vm is rebooting
[2013-06-06 22:31:07 -0400] spheromak: ah
[2013-06-06 22:31:17 -0400] spheromak: you're getting into vagrant plugin land
[2013-06-06 22:31:19 -0400] spheromak: :)
[2013-06-06 22:31:21 -0400] joeyfitz: i wonder if writing a vagrant plugin would assist me
[2013-06-06 22:31:25 -0400] miah: why do you need to reboot?
[2013-06-06 22:31:32 -0400] spheromak: miah, windows
[2013-06-06 22:31:47 -0400] miah: oh right.
[2013-06-06 22:31:50 -0400] miah: use omi ;)
[2013-06-06 22:31:53 -0400] joeyfitz: miah: 1) The vagrant base box for precise64_vmware is built using a virtual kernel, and i need to install the linux-image-extra-virtual and quota packages and restart to enable quotas (which is required in my next step)
[2013-06-06 22:31:54 -0400] spheromak: miah, /wave
[2013-06-06 22:32:01 -0400] joeyfitz: miah: 2) when working with windows, invariably many things require reboots, and it's just a fact of life
[2013-06-06 22:32:16 -0400] miah: spheromak: <3
[2013-06-06 22:32:41 -0400] joeyfitz: windows sucks to work with in that way, yes - but right now my use case is actually linux-based
[2013-06-06 22:33:04 -0400] miah: rather than rebooting, kexec
[2013-06-06 22:33:07 -0400] spheromak: joeyfitz, one way around is to build your own basebox
[2013-06-06 22:33:17 -0400] joeyfitz: yep, understand i can build a basebox
[2013-06-06 22:33:32 -0400] joeyfitz: and i know there's lots of opinion about rebooting
[2013-06-06 22:33:44 -0400] miah: https://en.wikipedia.org/wiki/Kexec
[2013-06-06 22:33:47 -0400] spheromak: im not aware tho, and this doesn't mean it isn't out there, of a vagrant plugin that will reprovision after restart
[2013-06-06 22:33:49 -0400] joeyfitz: but i think there are valid use cases: e.g. i don't want to host a base box for 1000's of people who might use an image
[2013-06-06 22:33:51 -0400] spheromak: you would have to write it
[2013-06-06 22:34:15 -0400] spheromak: joeyfitz,  well  thats why i put those things in a public dropbox :D
[2013-06-06 22:34:19 -0400] joeyfitz: :)
[2013-06-06 22:34:34 -0400] joeyfitz: and when mitchellh updates the default fusion box, then i have to also
[2013-06-06 22:34:40 -0400] joeyfitz: don't want to be in base box maintenance land
[2013-06-06 22:34:50 -0400] joeyfitz: would rather write the plugin
[2013-06-06 22:35:11 -0400] joeyfitz: see >> windows use cases which would also benefit
[2013-06-06 22:35:28 -0400] spheromak: yea
[2013-06-06 22:35:49 -0400] spheromak: I would say go into plugin that can watch powerstate and will wait for a poweroff/reset and then initiate provision step
[2013-06-06 22:35:52 -0400] joeyfitz: no idea why precise64 uses normal kernel and precise64_vmware uses virtual
[2013-06-06 22:35:54 -0400] joeyfitz: total pain
[2013-06-06 22:35:58 -0400] spheromak: add in some controll like "max cycles"
[2013-06-06 22:36:00 -0400] spheromak: or something
[2013-06-06 22:38:26 -0400] joeyfitz: spheromak: any tips on how to watch for power state?
[2013-06-06 22:38:55 -0400] spheromak: joeyfitz, well you could be dead simple and run a pinger dunno if theres something else
[2013-06-06 22:39:13 -0400] joeyfitz: fair point
[2013-06-06 22:39:19 -0400] spheromak: would hit up some vagrant folks :D
[2013-06-06 22:39:26 -0400] joeyfitz: yeah - their channel is silent
[2013-06-06 22:39:27 -0400] joeyfitz: :)
[2013-06-06 22:39:50 -0400] spheromak: get yer code  goggles on  :D
[2013-06-06 23:08:54 -0400] rracterr: ok guys, I'm stumped here and need some help... yesterday one of my boxes stopped updating, I logged in and manually executed the chef-client and it just sits there.... not apparently doing anything but blocking... is there any diagnostic step I can take here to figure out why its hanging up?
[2013-06-06 23:12:11 -0400] rracterr: great, a problem nobody has seen eh?
[2013-06-06 23:16:44 -0400] rracterr: Aha, there was already another client running that was stalled
[2013-06-06 23:17:46 -0400] tolland_: rracterr: are you getting the message ...INFO: Chef client is running, will wait for it to finish and then run.
[2013-06-06 23:18:36 -0400] tolland_: if so, there is a /var/cache/chef/chef-client-running.pid or alternatively a /var/chef/cache/chef-client-running.pid
[2013-06-06 23:18:42 -0400] rracterr: actually I was not getting it with :auto set... I did get it when I turned on verbose and set :debug
[2013-06-06 23:18:56 -0400] tolland_: try to run
[2013-06-06 23:19:06 -0400] tolland_: $ sudo chef-client -l info
[2013-06-06 23:19:23 -0400] tolland_: and if its because of the stale lockfile, it will give that message
[2013-06-06 23:19:38 -0400] rracterr: thanks much
[2013-06-06 23:19:56 -0400] tolland_: ah, I see you found a zombied client... i missed that. ignore me
[2013-06-06 23:20:12 -0400] rracterr: I should probably read up on what :auto really means

[2013-06-25 00:07:15 -0400] llakey: using the sysctl cookbook should i be able to put a `sysctl_param 'fs.file-max' do` block into an attributes file or does it have to be in a recipe file?
[2013-06-25 00:29:43 -0400] zuhaib: Question about node.set, if I used node.set in one cookbook, during the same chef run and I reference that node attribute
[2013-06-25 00:29:55 -0400] zuhaib: would I get the new value for that node
[2013-06-25 00:30:51 -0400] zuhaib: ir node.set[:cookbook][:bar] = "foo" and later on read back node.cookbook.bar I expect to get back "foo"
[2013-06-25 01:30:04 -0400] sunil_: anyone using the bind cookbook? I am trying to use it and have zones set in the role, but chef-client run is erroring out with "TypeError: can't convert String into Integer", I am following the read me from github
[2013-06-25 01:31:12 -0400] sunil_: looks like it doesn't want strings in an array, but there are strings being used in the doc as well..so confused..
[2013-06-25 01:43:21 -0400] BrianJ: when running chef-solo on windows what user does it run as?
[2013-06-25 01:43:30 -0400] BrianJ: whatever user logged into the powershell?
[2013-06-25 01:43:41 -0400] BrianJ: or is there a chef user it gets farmed out to
[2013-06-25 02:00:36 -0400] atomi: is there a chef way of adding sbin to my user's path?
[2013-06-25 02:20:21 -0400] atomi: just going to use execute then
[2013-06-25 03:12:51 -0400] BrianJ: How would i go about creating a directory in c:\Program files\ using chef? whenever i try using the directory resource, i get an "insufficent permission" error
[2013-06-25 04:00:14 -0400] coderanger: BrianJ: How are you running chef-client?
[2013-06-25 04:00:27 -0400] coderanger: You would need to run it with admin privs
[2013-06-25 04:00:54 -0400] BrianJ: @coderanger: I am. It's a fresh ec2 instance and im logged into it as administrator
[2013-06-25 04:01:08 -0400] coderanger: How are you running chef-client though
[2013-06-25 04:01:20 -0400] BrianJ: im using chef-solo
[2013-06-25 04:01:36 -0400] coderanger: (warning: my windows knowledge has atrophied severely, so you are probably better off asking on the ML)
[2013-06-25 04:01:43 -0400] coderanger: Okay, how are you running chef-solo
[2013-06-25 04:01:51 -0400] coderanger: Is it from an admin-mode terminal?
[2013-06-25 04:02:22 -0400] BrianJ: from powershell: chef-solo -c .\solo.rb -j .\solo.js -l debug
[2013-06-25 04:02:29 -0400] BrianJ: and yes
[2013-06-25 04:02:44 -0400] BrianJ: its in a powershell running as "Administartor"
[2013-06-25 04:02:49 -0400] BrianJ: administrator*
[2013-06-25 04:03:26 -0400] BrianJ: I think I found my solution.. unfortunately it means i cant leverage the directory resource as theres a bug with windows: http://tickets.opscode.com/browse/CHEF-3787?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel
[2013-06-25 04:04:04 -0400] BrianJ: cause FileUtils.mkdir_p 'C:\Program Files\mydir' works
[2013-06-25 04:13:04 -0400] coderanger: Might be something funky in how we play with sids
[2013-06-25 04:42:08 -0400] BrianJ: if you need to run a windows reboot midway through your run list will it automatically pick up after reboot?
[2013-06-25 04:42:18 -0400] BrianJ: does chef need to be re run?
[2013-06-25 04:45:16 -0400] llakey: i have an application cookbook which includes a "base" library cookbook which includes the "ntp" cookbook. i get the error: FATAL: NoMethodError: undefined method `[]' for nil:NilClass
[2013-06-25 04:45:24 -0400] llakey: if i move "ntp" from the library cookbook into the application cookbook the error goes away.
[2013-06-25 04:53:41 -0400] coderanger: llakey: Can you pastebin the relevant code?
[2013-06-25 04:53:49 -0400] coderanger: and possibly a stack trace
[2013-06-25 04:54:15 -0400] llakey: coderanger: sure. i'll work up a gist and post it here
[2013-06-25 04:56:17 -0400] n1ko: lets try again; anybody have any tips on how to debug slow "Storing updated cookbooks .. in the cache"
[2013-06-25 04:58:09 -0400] coderanger: n1ko: pass -l debug
[2013-06-25 04:58:15 -0400] coderanger: That enables debug logging
[2013-06-25 04:58:22 -0400] coderanger: it will show every API request made to the server
[2013-06-25 04:58:29 -0400] coderanger: check that you aren't out of disk space though
[2013-06-25 05:01:56 -0400] n1ko: lets see... i'm using vagrant and the machine hasn't been bootstrapped yet to give that to the machines chef-client
[2013-06-25 05:02:18 -0400] n1ko: hdd on client and server have plenty of space, dns are correct, bandwidth is 100Mbps (tested) and latency is less than 5ms
[2013-06-25 05:05:51 -0400] coderanger: Just install chef manually and run chef-client yourself
[2013-06-25 05:09:25 -0400] n1ko: nothing weird in the debug log, except that the dns name it seems to use isnt available to the client. Although i use ip everywhere it seems to get the private dns name from somewhere
[2013-06-25 05:09:34 -0400] n1ko: maybe its timing out the dns somehow, altough the process works anyway
[2013-06-25 05:11:50 -0400] coderanger: It uses the same chef_server_url as in your knife.rb
[2013-06-25 05:11:59 -0400] coderanger: (when bootstrapping)
[2013-06-25 05:12:43 -0400] n1ko: i got the ip in knife.rb (and in vagrantfile and berks conf)
[2013-06-25 05:12:51 -0400] n1ko: but even fixing the dns doesnt seem to fix it
[2013-06-25 05:13:19 -0400] llakey: coderanger: https://gist.github.com/anonymous/5856085
[2013-06-25 05:14:15 -0400] coderanger: llakey: What is supposed to be defining that attribute?
[2013-06-25 05:15:42 -0400] llakey: coderanger: i may not understand the question? the attribute is defining alternate ntp servers from those in the "ntp" cookbook. i don't know how to answer the question you actually asked.
[2013-06-25 05:15:48 -0400] coderanger: also chef-application-ntp-test doesn't have a dep on chef-library-ntp-test
[2013-06-25 05:16:08 -0400] coderanger: the error is because nothing has ever set a value for the 'ntp' node attribute
[2013-06-25 05:16:21 -0400] coderanger: chances are that is supposed to come from an attributes file in the ntp cookbook
[2013-06-25 05:16:30 -0400] coderanger: but you don't have the right cookbook deps configured, so it isn't loading
[2013-06-25 05:16:56 -0400] coderanger: A berkshelf dep is not a replacement for a metadata.rb dep
[2013-06-25 05:17:08 -0400] coderanger: the former is not used in Chef dependency calculations
[2013-06-25 05:22:37 -0400] n1ko: coderanger: is there any relevant logs on the server side? the Sending HTTP Request via GET  to .. seems to be the phase taking time
[2013-06-25 05:22:57 -0400] coderanger: n1ko: What kind of chef server are you using?
[2013-06-25 05:23:13 -0400] n1ko: centos, private, newest version
[2013-06-25 05:24:10 -0400] n1ko: beefy physical hardware without any load, if my memory serves its a dl3x0 g6
[2013-06-25 05:25:54 -0400] coderanger: Your best bet is to put a support ticket in, they can show you where to find the logs for your version of OPC
[2013-06-25 05:26:07 -0400] llakey: coderanger: changing the dep as you suggested fixed it. ok. i think i don't quite understand the difference between the Berksfile and the metadata.rb file.
[2013-06-25 05:26:14 -0400] coderanger: In this case it is probably bookshelf, I think /var/log/opscode/bookshelf/something
[2013-06-25 05:26:44 -0400] coderanger: llakey: Basically berksfile is only used for downloading cookbooks locally, the chef deps are what are used when computing the dependency chain on the server
[2013-06-25 05:27:13 -0400] coderanger: llakey: In a single-cookbook-level berksfile you will rarely have many cookbook deps, mostly just in the metadata
[2013-06-25 05:27:29 -0400] coderanger: The only ones you might pull in via berkshelf are for a test-kitchen harness
[2013-06-25 05:27:55 -0400] coderanger: It is only for repo-level berksfiles that you see lots of the cookbook source lines
[2013-06-25 06:10:21 -0400] llakey: coderanger: awesome help. thanks. i'm noticing that having a local private cookbook and path listed in my application cookbook Berksfile doesn't result in my private cookbook literally being copied into my  ~/.berkshelf/cookbooks directory but I see that `vagrant up` results in all of the cookbooks, local private cookbooks included, being copied to the Vagrant instance and `berks upload` results in all of the cookbooks ...
[2013-06-25 06:10:27 -0400] llakey: ... from the Berksfile and the metadata.rb file being uploaded to the chef server
[2013-06-25 06:10:45 -0400] coderanger: Yes
[2013-06-25 06:10:57 -0400] coderanger: the cookbooks folder is just for stuff that has to be downloaded
[2013-06-25 08:12:41 -0400] pedda: hi all
[2013-06-25 08:54:48 -0400] bcave: good morning
[2013-06-25 08:56:50 -0400] pedda: hi
[2013-06-25 09:04:33 -0400] bcave: is it possible to use a user-space tool to deregister a client & node from chef server? I'm looking  at chef-client --help that doesn't seem to have the options.
[2013-06-25 09:04:44 -0400] bcave: is that only possible with knife?
[2013-06-25 09:19:14 -0400] bcave: and next question: where do bootstrap logs go? in the client.rb in the chef gem, there's a Chef::Log.info(). On my client / node, /etc/chef/client.fb has log_level :auto  and log_location STDOUT. But I don't see the info message. assuming that auto defaults to something like warn or error, and skips info ?
[2013-06-25 09:25:54 -0400] WPsites: bcave: You can delete the client and node from the chef server using the API or web front end
[2013-06-25 09:27:06 -0400] bcave: WPSites: thanks. managed to find something in google eventually... doesn't look like the chef-client has the ability, but if you run chef-client with a missing client.pem, it will re-register itself, as long as the name from client.rb isn't already registered as client / node.
[2013-06-25 09:27:56 -0400] bcave: and then deregistration: found this article that was quite useful for my use-case http://blog.cloudreach.co.uk/2012/06/auto-scaling-and-chef-nodes.html
[2013-06-25 09:28:10 -0400] WPsites: yeah correct, a fresh install of chef-client needs just the validation.pem key file in /etc/chef/..
[2013-06-25 09:28:27 -0400] WPsites: then the client and node info will be created on the server automatically
[2013-06-25 09:29:01 -0400] WPsites: then on first run of chef-client you just need to pass in the IP of the chef server and away you go
[2013-06-25 09:31:54 -0400] WPsites: you need to change the log location to a file path so that you can view the log I think
[2013-06-25 09:34:31 -0400] WPsites: bcave: also in server.rb I sometimes set verbose_logging to true for extra log info
[2013-06-25 09:36:20 -0400] bcave: ah, awesome. thanks WPsites. would be great to use that while testing.
[2013-06-25 09:36:49 -0400] WPsites: what sort of a setup are you working on? sounds like you are trying to do some similar things to me
[2013-06-25 09:37:08 -0400] bcave: 2 step process with chef + aws.
[2013-06-25 09:37:39 -0400] WPsites: 2 step?
[2013-06-25 09:37:40 -0400] bcave: 1st step is to bootstrap a default AMI with some packages to get to a "base" system configuration. Then register that as an AMI.
[2013-06-25 09:38:11 -0400] bcave: step 2 is to use that AMI with auto scaling and/or cloudformation to automate stuff
[2013-06-25 09:39:30 -0400] bcave: busy working on the chef-client registration for newly deployed instances, and have an approach that works now :) just busy testing how the various scenarios work and what errors are thrown - e.g. if node / client doesn'
[2013-06-25 09:39:44 -0400] bcave: doesn't exist on server and client runs, vice versa
[2013-06-25 09:39:44 -0400] WPsites: ahh cool. I'm working on my hosting control panel and I need my control panel to be able to commission new servers through Rackspace cloud using their api and then bootstrap the server with chef and configure it.
[2013-06-25 09:40:29 -0400] bcave: ah, ok. so similar bootprocess then
[2013-06-25 09:41:33 -0400] bcave: i was initially going to bootstrap the entire system on deployment, but find that using a preconfigured ami knocks off a bit of configuration time, so pre-configuring speeds up application instance deployment
[2013-06-25 09:41:45 -0400] WPsites: Yes. Took me a while yesterday to work out how to practically achieve the same as "knife bootstrap" but without using knife as I don't want to have to install/configure knife on the control panel server. I wanted it all to be done through APIs and SSH
[2013-06-25 09:42:32 -0400] bcave: the most useful bit of information that I found yesterday: "if EC2 user-data starts with #!, user-data will be executed as a script in the startup process"
[2013-06-25 09:43:15 -0400] bcave: I can now configure the system without even needing ssh access ;)
[2013-06-25 09:43:43 -0400] WPsites: ah, interesting. Would be more interesting if I used EC2 but I'm kind of looking at this from the angle of being portable for any cloud going forward.
[2013-06-25 09:43:54 -0400] bcave: ah, ok.
[2013-06-25 09:45:04 -0400] WPsites: Yes I think with the Rackspace api I can feed in a file for the boot process when commissioning a server but for me it's just as easy to have my system automatically ssh to the box once it's booted.
[2013-06-25 09:46:46 -0400] bcave: yeah, ssh does make it easy. but there's 2 use cases where it's not always feasible: when using AWS VPC, or if (for some or other reason) the spec is that SSH access isn't allowed to a cloud instance.
[2013-06-25 09:47:25 -0400] bcave: some organizations have paranoid security policies
[2013-06-25 09:50:18 -0400] WPsites: I'm not experienced with AWS but I see what you mean about security policies. for me it's not until the server has chef installed that security is tightened up, by chef
[2013-06-25 09:51:00 -0400] bcave: ah, ok. yeah, so you only have a small time window of exposure. makes sense
[2013-06-25 09:52:07 -0400] WPsites: then my VPN cookbook adds it to a secure VPN and SSH is then only allowed on that connection
[2013-06-25 10:59:47 -0400] axyelp: is there any way i can use libraries (modules) across cookbooks?
[2013-06-25 12:09:54 -0400] xerxas: Hi all !
[2013-06-25 12:12:09 -0400] xerxas: how should I name my environments, how should I put my nodes in environements ? I have locally developped complex (postgres, rabbitmq, consumers, front) applications (4 of them), each one has nothing to do with others. should I have dev, staging, prod environments, or should I have dev_app_name, staging_app_name, prod_app_name environments ?
[2013-06-25 12:13:20 -0400] xerxas: the thing is, I find application attributes more readable in the environements but some attributes are different from one application to the other , and also , more dangerous, I think (not sure) I want to lock cookbook_versions per application
[2013-06-25 12:13:58 -0400] xerxas: so when I have an issue I want to fix with updating a cookbook, the cookbook is not updated in every of my application, but just the one concerned with my problem
[2013-06-25 12:15:23 -0400] xerxas: I find it more safe to use prod_app_name environment names rather than just prod, am I wrong ?
[2013-06-25 12:36:06 -0400] ianco: Im trying to remember the name of a project, looked like a framework for physical server installation; dhcp, pxe, install image. I heard of it in this channel, I think.
[2013-06-25 12:36:13 -0400] ianco: anyone know what it might be?
[2013-06-25 12:41:38 -0400] drrk: razor
[2013-06-25 12:41:58 -0400] ianco: there it is, thx drrk
[2013-06-25 12:41:58 -0400] drrk: https://github.com/puppetlabs/Razor
[2013-06-25 12:42:17 -0400] drrk: no worries, i've been looking at ti recently
[2013-06-25 12:53:08 -0400] Hima: Hi there
[2013-06-25 12:53:51 -0400] Hima: I need help i got that error form tomcat cookbook with base version 7
[2013-06-25 12:54:17 -0400] Hima: 54.229.36.127 # Declared in /var/chef/cache/cookbooks/tomcat/recipes/default.rb:36:in `block in from_file' 54.229.36.127  54.229.36.127 package("tomcat7") do 54.229.36.127   action [:install] 54.229.36.127   retries 0 54.229.36.127   retry_delay 2 54.229.36.127   package_name "tomcat7" 54.229.36.127   cookbook_name "tomcat" 54.229.36.127   recipe_name "default" 54.229.36.127 end 54.229.36.127  54.229.36.127  54.229.36.127  54.229.36.127 [
[2013-06-25 12:54:50 -0400] Hima: sorry this is wrong copy
[2013-06-25 12:55:13 -0400] Hima: FATAL: Chef::Exceptions::Package: package[tomcat7] (tomcat::default line 36) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for tomcat7
[2013-06-25 12:55:48 -0400] Hima: is there is any clue?
[2013-06-25 13:05:58 -0400] wsoula: I tried to setup a chef 11 server today and I cannot connect to it, I get ERROR: Errno::ECONNRESET: Connection reset by peer - SSL_connect
[2013-06-25 13:06:10 -0400] wsoula: when running knife configure -i
[2013-06-25 13:15:37 -0400] juliancdunn: Hima: what platform?
[2013-06-25 13:16:03 -0400] Hima: Centos 6.3 64 bit
[2013-06-25 13:17:18 -0400] juliancdunn: Hima: CentOS does not have Tomcat 7
[2013-06-25 13:18:06 -0400] Hima: so if i want to use chef tomcat cookbook for installing tomcat7 what do you recommend
[2013-06-25 13:18:09 -0400] Hima: ?
[2013-06-25 13:18:42 -0400] juliancdunn: on that platform you won't be able to use the Opscode cookbook out of the box
[2013-06-25 13:19:20 -0400] Hima: then tell me what can i change to use it that way
[2013-06-25 13:19:50 -0400] Hima: julian im somehow new to chef
[2013-06-25 13:22:43 -0400] Hima: juliancdunn how can i tailor the Opscode tomcat cookbook to install tomcat 7 on centos 6.3??
[2013-06-25 13:23:30 -0400] wsoula: so changing from chef_server_url of https://localhost to http://localhost:8000 makes it work
[2013-06-25 13:24:10 -0400] wsoula: is this the correct value for chef_server_url?
[2013-06-25 13:35:48 -0400] zeroXten: ok, why the hell is chef ignoring my cookbook_file block? :(
[2013-06-25 13:35:59 -0400] zeroXten: just tries to chef_gem a file that doesn't exist...
[2013-06-25 13:45:12 -0400] bigbigbang: Hi there ! please help me : What is the solr webpage ? ( i'm currently trying to replicate Solr on several chef, and i need to know how I can access my "replication" page which is physicly located in /var/opt/chef-server/chef-solr/jetty/work/Jetty_127_0_0_1_8983_solr.war__solr__x48438/webapp/admin/replication/
[2013-06-25 14:05:16 -0400] bigbigbang: why is it so hard to find documentation on scaling chef server ?
[2013-06-25 14:07:04 -0400] drrk: I suspect because thos that need it scalign beyond one server get hosted or private chef
[2013-06-25 14:09:23 -0400] bigbigbang: In attribute of chef-server recipe there is : default['chef_server']['chef-solr']['ip_address'] = '127.0.0.1' default['chef_server']['chef-solr']['vip'] = '127.0.0.1'   can someone explain me the difference between .
[2013-06-25 14:13:18 -0400] bigbigbang: Yes you'r probably right, but however I can't find any docs or blog trying to implement HA or failover .. I can't believe i am the only one ... :-(
[2013-06-25 14:14:32 -0400] jmartin: bigbigbang: http://docs.opscode.com/server/private_chef_1x_architecture.html#high-availability seems that they use a LB in front and 2 servers with DRBD in back
[2013-06-25 14:17:48 -0400] cinen: I am looking to do the same thing so if you find any more info link it here, and I'll do the same
[2013-06-25 14:18:26 -0400] bigbigbang: hehe ! great !
[2013-06-25 14:18:52 -0400] bigbigbang: jmartin: many thanks, but it doesn't really help me .. I already had the "global" architecture to achieve this , now it's time to practice ..
[2013-06-25 14:20:03 -0400] cinen: to me it seems the hard part is clustering bookshelf and rabbitmq
[2013-06-25 14:20:08 -0400] bigbigbang: :cinen Have you already try some stuff ?
[2013-06-25 14:21:37 -0400] cinen: I have 2 seperate instances running from the chef-server cookbook and have just been tinkering with settings to get them to communicate, haven't spent a whole lot of time on it yet
[2013-06-25 14:22:00 -0400] bigbigbang: :cinen What i have done for now : postgre replication / rabbitmq cluster and "same authentification" with chef 11.0.8 on scientific linux 6.3
[2013-06-25 14:22:28 -0400] bigbigbang: :cinen it only miss the solr replication ..
[2013-06-25 14:23:57 -0400] cinen: if I understand it correctly, which I might not, solr is just a REST api with bookshelf as its backend
[2013-06-25 14:24:11 -0400] cinen: so bookshelf needs to be replicated
[2013-06-25 14:24:47 -0400] pedda: join learnchef
[2013-06-25 14:24:51 -0400] pedda: ups :P
[2013-06-25 14:26:11 -0400] bigbigbang: hum i think you'r wrong, solr is the global search engine of chef , so it has no "link" with bookshelf (wich is just a "versionning tool") for recipes ... but i might be wrong to ... but in this case completely wrong ..
[2013-06-25 14:29:21 -0400] bigbigbang: cinen : will you share your work ? have you a blog or something that will permit to share ?
[2013-06-25 14:31:42 -0400] bigbigbang: cinen : mine will be on my blog , bigbigbangblog.blogspot.com / currently my work on HA and failover is not updated, but it will asap
[2013-06-25 14:32:43 -0400] bigbigbang: like i said I directly change the recipe before the "chef-server reconfigure" , one recipe for master , one for slave ...
[2013-06-25 14:47:28 -0400] awgross: When submitting a contribution to Chef, do I need to touch the resolution field?  Currently the instructions just mention Fix provided
[2013-06-25 14:47:40 -0400] awgross: but I seem to remember needing to set it to "Resolved" in the past as well
[2013-06-25 14:47:46 -0400] awgross: http://tickets.opscode.com/browse/KNIFE-272
[2013-06-25 14:47:53 -0400] awgross: Still waiting to get this merged in
[2013-06-25 14:50:37 -0400] pedda: someone using mysql cookbook ?
[2013-06-25 14:50:48 -0400] pedda: -someone +anyone
[2013-06-25 14:51:04 -0400] pedda: and default precise32 box
[2013-06-25 14:51:37 -0400] tknerr_: ohai!
[2013-06-25 14:51:54 -0400] tknerr_: does anyone know of a vagrant provider for the azure cloud?
[2013-06-25 14:52:40 -0400] priestjim: tknerr_: i don't think it exists...
[2013-06-25 14:53:01 -0400] awgross: tknerr_: but you can write one =D
[2013-06-25 14:53:22 -0400] awgross: its not that bad, can probably copy a ton from vagrant-aws
[2013-06-25 14:54:22 -0400] tknerr_: awgross, priestjim: yes, i was thinking of that too. does fog support azure? (just googling in parallel)
[2013-06-25 14:54:50 -0400] priestjim: tknerr_: don't think so either
[2013-06-25 14:55:04 -0400] priestjim: there is the waz-storage gem
[2013-06-25 14:55:21 -0400] priestjim: and the azure cookbok which i've written
[2013-06-25 14:57:20 -0400] tknerr_: priestjim: cool!
[2013-06-25 14:57:53 -0400] priestjim: tknerr_: it provides node['cloud'] attributes, which has been missing for ages! there is an open ticket too! nobody cares for azure :P
[2013-06-25 14:58:08 -0400] tknerr_: priestjim: do you have a link to the azure cookbook on github?
[2013-06-25 14:58:24 -0400] priestjim: yeah /priestjim/chef-azure
[2013-06-25 14:58:30 -0400] priestjim: it's also on the community site
[2013-06-25 14:58:41 -0400] tknerr_: priestjim: ah - i found johnnyhalife/waz-storage
[2013-06-25 14:59:04 -0400] priestjim: but i'd propose using the github revision, there are a couple of fixes there not published on the community site
[2013-06-25 14:59:11 -0400] tknerr_: priestjim: found it on the community site but the link to github was not ther (or i overlooked it)
[2013-06-25 15:00:09 -0400] priestjim: tknerr_: well there you go :)
[2013-06-25 15:02:53 -0400] tknerr_: priestjim: hmmm - i was hoping that vagrant / chef / azure would as smooth as aws - but my first impression is that it won't be that easy :-/
[2013-06-25 15:04:24 -0400] priestjim: tknerr_: why would you want to use azure in the first place with vagrant?
[2013-06-25 15:05:38 -0400] stormerider: from what ive heard, the best supported clouds are ec2 & rackspace
[2013-06-25 15:06:44 -0400] stormerider: but i was under the impression that vagrant was for local testing, not cloud bootstrapping
[2013-06-25 15:07:07 -0400] tknerr_: priestjim, stormrider: the customer has an azure strategy, no chance ec2 or rackspace :-/
[2013-06-25 15:07:22 -0400] awgross: stormerider: vagrant has been switching a bit, to allow it to wrap any sort of VM
[2013-06-25 15:07:33 -0400] awgross: stormerider: so testing, not just locally
[2013-06-25 15:07:36 -0400] stormerider: awgross: huh. interesting.
[2013-06-25 15:07:46 -0400] awgross: stormerider: though i havent heard of many people using it for much beydon VMware or vbox
[2013-06-25 15:07:46 -0400] tknerr_: priestjim, stormrider: the new version of vagrant >= 1.1 has pluggable providers, e.g. vagrant-aws, vagrant-rackspace, vagrant-vsphere, etc...
[2013-06-25 15:08:32 -0400] stormerider: ill have to look into that at some point.
[2013-06-25 15:08:41 -0400] tknerr_: priestjim, stormrider: so you can have the same configuration mechanism (Vagrantfile) and commandline interface (vagrant up, etc...) no matter where you deploy to
[2013-06-25 15:09:08 -0400] priestjim: tknerr_: i know, i am using azure heavily but i am only iterating locally and then `knife bootstrap` on production
[2013-06-25 15:09:11 -0400] tknerr_: stormerider: it's revolutionary compared to 1.0 :-)
[2013-06-25 15:09:41 -0400] stormerider: i havent really had enough time to get vagrant + vbox integrated into my workflow yet, heh
[2013-06-25 15:10:01 -0400] awgross: stormerider: missing out ={P
[2013-06-25 15:10:03 -0400] stormerider: esp with my additional ram dying on me and setting me back to 4g *sigh*
[2013-06-25 15:10:14 -0400] awgross: yeah im on 4g atm, it hurts
[2013-06-25 15:10:56 -0400] stormerider: awgross: ive done some initial steps, but i really need to spend some time converting my EC2 AMIs into boxes, which will take a bit... no real easy way to do that that ive found.
[2013-06-25 15:11:32 -0400] awgross: stormerider: in our case, we just started with a blank Vagrant box of our Flavor of linux, added omnibus version X, resaved it
[2013-06-25 15:11:38 -0400] tknerr_: priestjim: ok, knife would work as well, but a) i'm on chef solo and b) i actually wanted to be independent of chef (e.g. using shell/puppet/whatever provisioner)
[2013-06-25 15:11:44 -0400] awgross: stormerider: all local testing starts from that box now
[2013-06-25 15:12:00 -0400] stormerider: awgross: i have soem stuff baked into the AMIs that's not done via chef yet.
[2013-06-25 15:12:09 -0400] awgross: stormerider: gotcha
[2013-06-25 15:12:17 -0400] stormerider: like porting elasticbeanstalk to ubuntu.
[2013-06-25 15:12:24 -0400] tknerr_: priestjim: that's why i want to settle on vagrant as the "vm provisioning layer"
[2013-06-25 15:15:00 -0400] priestjim: tknerr_: right. if you are working with azure the "right way", the currently available apis suck
[2013-06-25 15:15:18 -0400] tknerr_: priestjim: what's the Windows Azure Linux agent btw?
[2013-06-25 15:15:44 -0400] priestjim: tknerr_: a python app for communicating with WAZ's fabric controller
[2013-06-25 15:15:53 -0400] priestjim: it's critical for operating within azure
[2013-06-25 15:15:58 -0400] tknerr_: ah i see https://github.com/windows-azure/walinuxagent
[2013-06-25 15:16:10 -0400] priestjim: that's already shipped with all the VMs available at azure
[2013-06-25 15:16:48 -0400] tknerr_: priestjim: is it comparable to ec2-tools? i.e to be used on my workstation for controlling VMs in the azure cloud?
[2013-06-25 15:16:59 -0400] priestjim: no
[2013-06-25 15:17:10 -0400] priestjim: what you need is the azure-cli tools
[2013-06-25 15:17:14 -0400] priestjim: it's a node.js app
[2013-06-25 15:18:09 -0400] tknerr_: priestjm: ok cool, thanks!
[2013-06-25 15:18:35 -0400] tknerr_: have to rush out and get my train. thanks for your help!
[2013-06-25 15:18:43 -0400] priestjim: you're most welcome :)
[2013-06-25 15:18:49 -0400] tknerr_: :-)
[2013-06-25 15:18:55 -0400] tknerr_: cu soonish...
[2013-06-25 15:19:32 -0400] alexbst: light-weight provider already initialized -- overriding!
[2013-06-25 15:19:43 -0400] alexbst: anyone know what the cause if these annoying messages is ?
[2013-06-25 15:24:45 -0400] stormerider: alexbst: the lwrp_base.rb errors?
[2013-06-25 15:29:19 -0400] stormerider: if so, im not sure the cause, i just filter them out in my chef-run alias (sudo chef-client -F min 2>&1 | egrep -v '(INFO|WARN|lwrp_base.rb)')
[2013-06-25 15:31:27 -0400] gazarsgo: where can i put a library to include it across cookbooks ?
[2013-06-25 15:32:23 -0400] bigbigbang: can someone explain me the "chef-solr" recipe ? In "configuration file " there is :  default['chef_server']['chef-solr']['ip_address'] = '127.0.0.1' default['chef_server']['chef-solr']['vip'] = '127.0.0.1' . What are the difference ?
[2013-06-25 15:32:59 -0400] bigbigbang: is it here that I can specifies solr to "listen" to ? or there is no "listen" with solr ?
[2013-06-25 15:38:27 -0400] hdee: anyone here use knife ec2 with vpc? i want to set ip addresses on two eth devices during instance creation
[2013-06-25 15:46:29 -0400] bcave: hdee: i do, but haven't tried that specific use-case.
[2013-06-25 15:47:35 -0400] kamikazemicrowav: Anyone know if its possible to determine the Chef server version from the client/node?
[2013-06-25 15:48:09 -0400] hdee: i'm not sure if it can do it bcave
[2013-06-25 15:48:20 -0400] hdee: i don't see any option to set subnet/ipaddress per eth interface
[2013-06-25 15:48:22 -0400] gchristensen: feature detection? :)
[2013-06-25 15:48:24 -0400] kamikazemicrowav: Getting burned by the following bug and would like to only implement the workaround if the server is affected :: http://tickets.opscode.com/browse/CHEF-3975
[2013-06-25 15:48:42 -0400] bcave: im looking at the options and it seems not. going to have a look at the gem now and see.
[2013-06-25 15:48:56 -0400] bcave: you can set --private-ip-address
[2013-06-25 15:49:37 -0400] bcave: but thats only for primary eth, don't see how to add additional interfaces.
[2013-06-25 15:50:11 -0400] hdee: in my setup, 0.0.0.0 goes out eth0, eth1 is attached to subnet that routes through vpn connection to my company... thats the route i use to access instance after creation
[2013-06-25 15:50:24 -0400] hdee: so i gotta be able to set secondary interface =|
[2013-06-25 15:50:32 -0400] hdee: works great through amazon console of course
[2013-06-25 15:50:37 -0400] hdee: just gotta figure out how to do it cmdline
[2013-06-25 15:50:59 -0400] bcave: well it's configurable via the API, so would have to add that functionality into the knife-ec2 gem
[2013-06-25 15:51:42 -0400] hdee: heh, i'll try my hand at it... my first fork =P
[2013-06-25 15:52:32 -0400] bcave: if you have a look at this https://github.com/opscode/knife-ec2/pull/87 it shows how a "--iam-profile-name" option was added to the client, and how it was implemented through to the API call.
[2013-06-25 15:53:29 -0400] hdee: thank you
[2013-06-25 15:56:12 -0400] bcave: http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-RunInstances.html -> the parameters for additional interfaces check the example for " and two secondary private IP addresses "
[2013-06-25 16:24:42 -0400] gad0lin_: how can I put validation, client keys from old to new chef server. I assume that once I have the same key I just change the ip address and nodes will be switched to new chef server and will have old run list, is it true?
[2013-06-25 16:26:06 -0400] pwf: how do i set the databag on an encrypted data bag item
[2013-06-25 16:26:14 -0400] rocket: Does anyone have a doc on backing up the chef server?  eg if I wanted to save the keys etc?
[2013-06-25 16:28:42 -0400] gad0lin_: rocket: have a look on knife-backup  http://www.ducea.com/2013/03/05/howto-migrate-to-chef-11/
[2013-06-25 16:28:50 -0400] pwf: do i have to pull the encrypted hash out of this data bag item, create a normal data bag item, and then call .data_bag and .save on it?
[2013-06-25 16:28:59 -0400] gleam: yeah, i use knife backup
[2013-06-25 16:29:03 -0400] pwf: why does EncryptedDataBagItem not inherit from DataBagItem
[2013-06-25 16:32:19 -0400] gleam: knife backup doesn't get users
[2013-06-25 16:32:28 -0400] gleam: but knife download --purge --chef-repo-path /path/to/chef-backups/ --repo-mode everything /users
[2013-06-25 16:32:31 -0400] gleam: will
[2013-06-25 16:33:24 -0400] rocket: thanks :)
[2013-06-25 16:52:45 -0400] gchristensen: does anyone have recommended reading for someone implementing chef across multiple datacenters?
[2013-06-25 16:53:40 -0400] gchristensen: like using ohai to detect the DC or something
[2013-06-25 16:53:56 -0400] Death_Syn: i haven't such a thing, but wouldn't mind hearing about it.  right now I use roles to help me define which data center a node is in (or should be in)
[2013-06-25 16:54:01 -0400] Death_Syn: but something like that might be fun
[2013-06-25 16:54:05 -0400] priestjim: gchristensen: you can write your own ohai plugin (it's fairly easy)
[2013-06-25 16:54:16 -0400] gchristensen: okay
[2013-06-25 16:54:24 -0400] Death_Syn: ohai seems to be able to detect rackspace public vs ec2 vs racksapce managed virtualization pretty easily
[2013-06-25 16:54:26 -0400] priestjim: gchristensen: and may detect location from the private IP ranges?
[2013-06-25 16:54:50 -0400] gchristensen: that is what I was thinking, since rackspace dedis are very different than the ones I'm getting from my other DC.
[2013-06-25 16:54:51 -0400] priestjim: or default gateways? or dns? or hostname?
[2013-06-25 16:55:15 -0400] Death_Syn: my roles tend to configure dns
[2013-06-25 16:55:21 -0400] priestjim: it seriously is REALLY REALLY easy to write ohai plugins that help you with exactly that!
[2013-06-25 16:55:22 -0400] gchristensen: hostname would be good, but I'm still wrangling a whole lot of non-standard hostnames of yore
[2013-06-25 16:55:33 -0400] priestjim: gchristensen: domainname then!
[2013-06-25 16:55:35 -0400] gchristensen: cool. thank you priestjim!
[2013-06-25 16:56:03 -0400] priestjim: gchristensen: i for example seggregate between aws and waz by using a subdomain
[2013-06-25 16:56:13 -0400] priestjim: waz = windows azure
[2013-06-25 16:56:23 -0400] gchristensen: ahh
[2013-06-25 16:56:25 -0400] gchristensen: okay
[2013-06-25 16:56:48 -0400] priestjim: when i bootstrap the node, i declare the node name as node1.waz.example.com
[2013-06-25 16:56:52 -0400] gchristensen: I could use a whitelist then... all the new deployments are hostnamed and subdomained with an iron fist. the RS DC is all a mess.
[2013-06-25 16:57:42 -0400] priestjim: gchristensen: you can whitelist ad absurdum
[2013-06-25 16:58:03 -0400] priestjim: like node['fqdn'].match(/cool-new-domain.*/)
[2013-06-25 16:58:14 -0400] priestjim: and if it matches, it's THAT DC
[2013-06-25 16:58:37 -0400] gchristensen: awesome. thank you priestjim :)
[2013-06-25 16:58:49 -0400] priestjim: :)
[2013-06-25 17:02:53 -0400] gad0lin_: gleam: I am trying to use knife download but it throws exception when parsing cookbooks - https://gist.github.com/gad0lin/3d4f57fa341198f73bdb, have you seen it ?
[2013-06-25 17:03:12 -0400] gleam: i haven't used knife download for anything except users
[2013-06-25 17:03:55 -0400] gad0lin_: gleam: ah ok, I wanted to use it to migrate from one chef 11 to another chef 11, as shown on opscode site: http://www.opscode.com/blog/2013/03/12/5106/
[2013-06-25 17:05:30 -0400] gad0lin_: has anyone played with knife download, it looks that it excepct attributes/* to be in json format and throws : Yajl::ParseError: lexical error: invalid char in json text.
[2013-06-25 17:07:08 -0400] gad0lin_: I have exact config as here -  https://gist.github.com/gad0lin/3d4f57fa341198f73bdb
[2013-06-25 17:34:01 -0400] cbarraford: question on the git resource. If i have a git resource with action :sync. Does notifies only run when changes were downloaded, or on every chef run?
[2013-06-25 17:34:03 -0400] cbarraford: http://docs.opscode.com/resource_git.html
[2013-06-25 17:34:48 -0400] freerobby: Is it possible to define multiple roles in a role.rb file?
[2013-06-25 17:35:26 -0400] cbarraford: freerobby: put them in the runlist
[2013-06-25 17:35:53 -0400] freerobby: cbarraford: Sorry, I mean to create/define multiple roles in one .rb file, not to call them
[2013-06-25 17:36:20 -0400] freerobby: Basically, I have an "app" role and I want to have an "app-node1" role, "app-node2", "app-node3", etc. because I have to enforce some uniqueness across nodes.
[2013-06-25 17:36:26 -0400] freerobby: I can't think of another safe way to do it.
[2013-06-25 17:36:47 -0400] cbarraford: i don't think so
[2013-06-25 17:36:53 -0400] freerobby: Grr.
[2013-06-25 17:37:05 -0400] cbarraford: i can't imagine a situation where thats the right move
[2013-06-25 17:37:10 -0400] freerobby: Can you think of any other way to enforce that each node of a given role has a unique attribute for it?
[2013-06-25 17:37:17 -0400] freerobby: Say that each app server needs a unique ID
[2013-06-25 17:37:26 -0400] freerobby: How would you define it with global uniqueness across the cluster.
[2013-06-25 17:37:30 -0400] freerobby: The IDs range from 0-100.
[2013-06-25 17:37:39 -0400] cbarraford: sure
[2013-06-25 17:37:59 -0400] freerobby: cbarraford: Is there a better way to do this/best practice I'm unaware of?
[2013-06-25 17:38:07 -0400] stormerider: ohai plugin + reference it in the recipe?
[2013-06-25 17:38:35 -0400] cbarraford: uniq_ids : { "app001": 'xxxx', 'app002': 'yyyyy', 'app003': 'zzzz' }
[2013-06-25 17:39:39 -0400] stormerider: ah, yeah, that's probably easier, heh
[2013-06-25 17:39:43 -0400] freerobby: stormerider: cbarraford: Ahh, maybe combine that with an environment.rb attribute mapping node names to IDs?
[2013-06-25 17:39:53 -0400] atrius: so.. is it correct to say that custom configs for a particular node is considered harmful?
[2013-06-25 17:39:59 -0400] atrius: or did i misunderstand what someone said before?
[2013-06-25 17:40:25 -0400] freerobby: atrius: My concern with that is if somebody forgets to set it, or just copies it from another node, it would introduce corruption in our system.
[2013-06-25 17:40:29 -0400] freerobby: Because of the uniqueness requirement.
[2013-06-25 17:40:55 -0400] freerobby: atrius: I don't think that's Chef's fault though - it's just a constraint we have on one particular kind of app server.
[2013-06-25 17:41:17 -0400] atrius: so, that being the case.. what is the best practice way of setting specific things for a specific node? say i want redis configured a particular way on node A but differently on B (for whatever reason)
[2013-06-25 17:41:18 -0400] freerobby: This is for a primary key ticketing system, so each node operates in its own keyspace
[2013-06-25 17:41:30 -0400] stormerider: if the customization is programatically determined i dont see that being an issue
[2013-06-25 17:41:40 -0400] freerobby: atrius: I like stormerider/cbarraford's idea of defining it in the environment with a mapping to node names
[2013-06-25 17:41:54 -0400] freerobby: stormerider: It is not, in this case. It's a set value from 0-100.
[2013-06-25 17:42:20 -0400] stormerider: well, if you program the id lookup, it is as far as the recipe is concerned
[2013-06-25 17:43:01 -0400] stormerider: atrius: that sounds more like the two redis boxes are serving different roles in your environment to me.
[2013-06-25 17:43:02 -0400] freerobby: Well sure, but then you're just looking it up from a statically set value.
[2013-06-25 17:43:28 -0400] stormerider: atrius: they may both be redis boxes but they serve different purposes, im assuming.
[2013-06-25 17:43:39 -0400] atrius: stormerider: that's probably a fair statement. so ideally you'd just have different roles for such a thing? like developmentRedis vs productionRedis?
[2013-06-25 17:44:09 -0400] stormerider: atrius: well, dev should be virtually identical to prod ;) but redis-functionA and redis-functionB
[2013-06-25 17:44:11 -0400] atrius: stormerider: kinda.. just picked the example at semi-random because i'm working with a redis setup at the moment and wondered what was the 'proper' way to configure such differences
[2013-06-25 17:44:41 -0400] stormerider: (or at least QA should be virtually identical to prod)
[2013-06-25 17:45:09 -0400] atrius: because i know you can specify various things via attributes but wasn't sure whether it would be wise to do node specific things like that or not.. i imagine not unless you had multiple roles created for those variations
[2013-06-25 17:45:56 -0400] stormerider: well, i'd say it depends. like if you're using node attributes to configure replication between two redis servers? that makes sense to me.
[2013-06-25 17:46:30 -0400] stormerider: but if they're serving different purposes, abstracting the roles is cleaner even if you could (for now) do it just with attributes.
[2013-06-25 17:47:01 -0400] stormerider: the way i function at least is one server function = one role
[2013-06-25 17:47:06 -0400] atrius: okay.. i'll ponder that. i'm still learning chef at home with my personal VMs trying to get a good grip on it before trying it for real in work's production environment
[2013-06-25 17:48:23 -0400] stormerider: *nod* ultimately the thing about chef is that it's pretty easy to adjust strategies if you find something isnt working for you, IMO
[2013-06-25 17:49:00 -0400] atrius: that does seem to be the case. i am liking the flexibility even if that introduces complexity at times
[2013-06-25 17:49:08 -0400] atrius: of course, that's the way of things anyway
[2013-06-25 17:49:33 -0400] stormerider: *nod* definitely a learning curve, but it's more natural to me than puppet ever felt. plus, cookbooks. <3 cookbooks.
[2013-06-25 17:50:07 -0400] atrius: i looked at them both at first.. i seem to recall Puppet had an.. attitude.. i didn't like for some reason
[2013-06-25 17:50:12 -0400] atrius: don't really recall now :d
[2013-06-25 17:50:13 -0400] atrius: :D
[2013-06-25 17:50:19 -0400] stormerider: i'd also recommend https://leanpub.com/chef-survival-guide -- helped me figure out how to piece the different chef utensils together into a workflow. it's a work in progress but helpful nonetheless.
[2013-06-25 17:50:33 -0400] stormerider: chef definitely has a much more vibrant community.
[2013-06-25 17:50:55 -0400] atrius: i do admit before i try this in production i'm likely to try and get work to send me to a class. i can figure things out, but i'm sure a class or two would make it go faster and smoother the first time
[2013-06-25 17:51:49 -0400] stormerider: *nod* i'm hoping that my work will as well, since they're looking to roll out chef to the corporate network (i'm part of a recent acquisition)
[2013-06-25 17:52:07 -0400] atrius: ah, it makes sense after all
[2013-06-25 17:53:19 -0400] stormerider: im managing some 50 aws nodes with it, id like a better grasp on things before we tackle the 1k vms that they have without a CMS in place o.O
[2013-06-25 17:54:04 -0400] atrius: lkfjsdjf!??@
[2013-06-25 17:54:06 -0400] atrius: yikes
[2013-06-25 17:54:08 -0400] atrius: yeah
[2013-06-25 17:54:36 -0400] atrius: sadly, we don't have a CMS system yet.. but we don't have anywhere near that many VMs and i could probably recreate things from memory at this point
[2013-06-25 17:54:43 -0400] atrius: of course, that won't always be the case and thus Chef
[2013-06-25 17:55:29 -0400] stormerider: *nod*
[2013-06-25 17:55:47 -0400] atrius: lol... TIL: no, you can't enable a service before you install it.. that won't in fact work
[2013-06-25 17:55:48 -0400] atrius: :D
[2013-06-25 17:57:50 -0400] jtimberman: atrius: order matters
[2013-06-25 17:57:52 -0400] jtimberman: :)
[2013-06-25 17:58:04 -0400] atrius: jtimberman: indeed
[2013-06-25 17:58:05 -0400] atrius: :D
[2013-06-25 17:58:28 -0400] jtimberman: at least if you want it to happen in a single run ;)
[2013-06-25 17:58:39 -0400] atrius: i created the redisserver role... popped the recipes in.. and then was like "gee, why didn't that work?!" oh.. that's why... :D
[2013-06-25 17:59:26 -0400] c_t: stupid computers, not doing what we want them to do
[2013-06-25 17:59:38 -0400] atrius: c_t: and not reading our minds... what jerks
[2013-06-25 17:59:40 -0400] bcave: c_t: only what we tell them to do ::p
[2013-06-25 17:59:40 -0400] c_t: stubbornly insisting on doing what we told them to do
[2013-06-25 17:59:56 -0400] atrius: do what i meant! not what i said!
[2013-06-25 17:59:57 -0400] c_t: bcave: I was getting there
[2013-06-25 18:00:05 -0400] bcave: I see so :)
[2013-06-25 18:00:47 -0400] bcave: it used to be only 1 or 2 that used to, now with these tools, you get multiples of servers doing what you tell instead of what you want
[2013-06-25 18:01:02 -0400] atrius: lol
[2013-06-25 18:15:34 -0400] navid: Where can I find the chef recipes that are run on the client?
[2013-06-25 18:29:45 -0400] rottmanj: What is the deal with the speed of opscode's hosted chef? nearly 5 minutes to sync cookbooks to a node?
[2013-06-25 18:30:26 -0400] rhand: navid: knife node show host
[2013-06-25 18:30:44 -0400] rhand: or the web ui
[2013-06-25 18:32:14 -0400] navid: thanks!
[2013-06-25 18:32:35 -0400] navid: oh i meant the files themselves but i found them under /var/chef
[2013-06-25 18:33:36 -0400] rhand: ah
[2013-06-25 18:35:13 -0400] swedish_chef: It seems like a lot of community cookbooks that wrap Ruby gems, e.g., bluepill-service, are not RVM (Ruby Version Manager) aware. Without RVM some these try running Ruby commands using the Chef-installed (internal) Ruby which causes problems. Is there a recommended approach for dealing with this problem?
[2013-06-25 18:36:51 -0400] jtimberman: swedish_chef: there's a lot of nuances to the reason, and most of them are "there's too many ways to install/manage ruby, supporting them all leads to madness" (not everyone uses rvm)
[2013-06-25 18:39:12 -0400] geekbri: anybody here have a recommendation for a jenkins cookbook? Looks like the opscode was has officially released a version in over a year.  They also haven't tagged any versions in their repo :-\
[2013-06-25 18:39:24 -0400] stormerider: jtimberman: do you have a recommendation for how to manage that? like right now my osx box is pointing at the chef/embedded/bin for foodcritic/etc because of ruby 1.8 system
[2013-06-25 18:40:29 -0400] stormerider: i tried rvm and it was a mess, so i ended up ditching it and just abusing the chef ruby instead, heh
[2013-06-25 18:44:40 -0400] swedish_chef: @jtimberman I'm with you on the Ruby version management insanity (and thanks for the bluepill cookbook!)
[2013-06-25 18:44:55 -0400] jtimberman: stormerider: package manager :)
[2013-06-25 18:45:16 -0400] jtimberman: stormerider: if the version of ruby that the distribution supplies is not the one you want to run, build and host your own package
[2013-06-25 18:45:37 -0400] swedish_chef: @jtimberman the problem remains though: bluepill-service throws error when running under chef's Ruby and I cannot get it to start running under RVM
[2013-06-25 18:45:49 -0400] jtimberman: geekbri: http://community.opscode.com/cookbooks/jenkins was released feb 1 this year
[2013-06-25 18:46:23 -0400] jtimberman: that said the git master branch has a lot of changes and improvements, but i don't know when a release will happen. schisamo is managing that one
[2013-06-25 18:47:20 -0400] geekbri: jtimberman: Yeah I was looking at the github history for the metadata.rb file and saw that commit was in April 03.  Looks like there are a ton of unreleased changes. I'll stick to 0.6.3 thanks.
[2013-06-25 18:47:30 -0400] stormerider: ill try homebrew's ruby193 and see how that works, thanks. just wasnt sure if there was a recommended alternative to rvm
[2013-06-25 18:47:57 -0400] ktam: Hello, I tried to search for this online but couldn't tease things out with the right search terms, I guess: running hosted chef. What's the best way to reset attributes for nodes in the chef org after modifying recipes? We have instances where we no longer specify the value of an attribute in our own cookbooks and take it out of our cookbook. However, the value of that attribute on the node in the chef org remains the same, doens't get 
[2013-06-25 18:48:11 -0400] swedish_chef: @jtimberman is your advice to install a new system-wide, non-RVM ruby on the box image or replace Chef's internal Ruby image
[2013-06-25 18:48:38 -0400] jtimberman: swedish_chef: Chef's internal ruby is for Chef.
[2013-06-25 18:48:46 -0400] jtimberman: swedish_chef: use it for Chef only. :)
[2013-06-25 18:49:03 -0400] jtimberman: if you need Ruby for your app, I'd install a package
[2013-06-25 18:49:09 -0400] swedish_chef: @jtimberman yup! but in the errors from bluepill I'm seeing it is trying to use Chef's ruby somehow
[2013-06-25 18:49:21 -0400] jtimberman: source builds take a long time, and *can* lead to disparate versions being installed.
[2013-06-25 18:49:30 -0400] jtimberman: possibly
[2013-06-25 18:50:03 -0400] swedish_chef: @jtimberman yes, binary is better and more reproducible.
[2013-06-25 18:50:04 -0400] idlemichael: using Chef::Log.info("my info message") is sitll a valid way to hit hte Chef log from within a resource, isn't it?
[2013-06-25 18:50:21 -0400] ktam: So far what we've been doing is logging into hosted chef and deleting existing attribute values that way. but that will get unwieldy with many nodes. Is there a more efficient way to do this, say using knife?
[2013-06-25 18:50:26 -0400] hdee: swedish_chef: i had the same issues as you, chef-client and cookbooks would overwrite gem_path env variable
[2013-06-25 18:50:32 -0400] jtimberman: swedish_chef: you may need to set the node['bluepill']['bin'] attribute.
[2013-06-25 18:50:35 -0400] jessicab1: ktam: part of your question got cut off.. but if you set default attributes those wont persist through the next run, only normal, set, overrides do.. you could also delete the attribute manually with .delete too
[2013-06-25 18:50:38 -0400] hdee: i'd always have issues where a required gem wasn't installed because wrong gem_path was being used
[2013-06-25 18:51:27 -0400] jessicab1: ktam: for example - node.normal_attrs['cookbook'].delete("attribute")
[2013-06-25 18:52:10 -0400] ktam: @jessicab1 thanks for your reponse - so would you advise adding lines to our recipes with a .delete for the removed attributes, running chef-client once on those nodes, then removing that line on subsequent chef runs?
[2013-06-25 18:53:05 -0400] jessicab1: ktam: well.. first id check to see if you can set the attributes at default level instead of normal? some people just set it wrong not realizing those persist while default doesnt
[2013-06-25 18:53:56 -0400] jessicab1: ktam: but yea, you can throw that in a recipe to delete attributes.. like i use it in an lwrp when someone sends a remove action, to delete any attributes that might be left.. but its somewhat rare thats needed
[2013-06-25 18:53:57 -0400] swedish_chef: @jtimberman tried that to point it to my RVM but it errored out on not having the environment set up right. Is there a way to force Chef's shell scripts (what bluepill-service uses to runs its commands) to execute the equivalent of a .bashrc where we can set up the environment right?
[2013-06-25 18:55:12 -0400] ktam: jessicab1: thanks, I will look into the difference between normal and default attributes ... usually these are attributes from upstream opscode community cookbooks that we might modify for our own environment
[2013-06-25 18:55:15 -0400] hdee: swedish_chef: it's dirty but why not set gem_path environment variable in your bluepill cookbook somehwere? ENV['GEM_PATH']='pathtogems'
[2013-06-25 18:55:41 -0400] ktam: jessicab1: and then as cookbooks get updated, someone decides we don't need to change those attributes anymore, takes it out of the recipe, and gets very confused as to why nothing is working
[2013-06-25 18:55:47 -0400] swedish_chef: hdee will that persist to the shell command?
[2013-06-25 18:56:16 -0400] hdee: as long as the env var doesn't get overwritten by something else
[2013-06-25 18:56:40 -0400] hdee: you could try setting it right before cookbook loads required gems or something
[2013-06-25 18:57:26 -0400] swedish_chef: hdee ah, so Chef applies its ENV to the shells it runs?
[2013-06-25 18:58:12 -0400] hdee: yea in my experience this worked, once you set env variable it stays like that for the rest of the run
[2013-06-25 18:58:16 -0400] hdee: unless it's over written by something else
[2013-06-25 18:58:26 -0400] swedish_chef: hdee thanks, worth trying
[2013-06-25 18:59:06 -0400] bnzmnzhnz: any idea why chef-solo might throw Chef::Exceptions::CookbookNotFound when the solo.rb definitely point at the the correct location containing the requested cookbook?
[2013-06-25 18:59:26 -0400] swedish_chef: bnzmnzhnz are you using Berkshelf?
[2013-06-25 18:59:44 -0400] bnzmnzhnz: swedish_chef: indeed I am
[2013-06-25 19:00:02 -0400] bnzmnzhnz: and knife-solo
[2013-06-25 19:00:11 -0400] swedish_chef: bnzmnzhnz does this happen during an actual deployment or running tests?
[2013-06-25 19:00:30 -0400] bnzmnzhnz: swedish_chef: deployment, and can recreate by hand using chef-solo
[2013-06-25 19:00:30 -0400] markxnelson: hi chefs, I have a file in my cookbook, in which I need to place the hostname of the node... I know I could write a script to go do sed on the file, but I was wondering if there is a way to use a variable in a file?  I am pretty new to chef, and could not find anything in the doc.. thanks
[2013-06-25 19:00:55 -0400] swedish_chef: bnzmnzhnz hmm, I haven't seen this one
[2013-06-25 19:01:00 -0400] bnzmnzhnz: deployment is using knife-solo and the cookbooks are getting rsynced to the correct location
[2013-06-25 19:01:05 -0400] adnichols: markxnelson look at templates
[2013-06-25 19:01:14 -0400] markxnelson: adnichols: thanks!
[2013-06-25 19:01:30 -0400] adnichols: markxnelson you can pass in variables to be used inside a template
[2013-06-25 19:01:35 -0400] swedish_chef: bnzmnzhnz where is the exception coming from? build-essential by any chance?
[2013-06-25 19:02:20 -0400] bnzmnzhnz: swedish_chef: no, it is coming from here: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.4/lib/chef/cookbook/cookbook_collection.rb:38:in `block in initialize'
[2013-06-25 19:02:48 -0400] swedish_chef: bnzmnzhnz can you pls post a Gist with the full output?
[2013-06-25 19:03:39 -0400] swedish_chef: bnzmnzhnz I hit a number of similar issues with Berkshelf; want to see if your output rings a bell
[2013-06-25 19:04:46 -0400] bnzmnzhnz: swedish_chef: here's the run attempt: http://hastebin.com/javoqavewi.hs
[2013-06-25 19:05:39 -0400] bnzmnzhnz: and the stacktrace: http://hastebin.com/tefeqosowe.vbs
[2013-06-25 19:06:20 -0400] swedish_chef: pls run again with debug flag: sudo chef-solo -c /tmp/chef-solo/solo.rb -j /tmp/chef-solo/nodes/$(hostname).json -l debug
[2013-06-25 19:08:47 -0400] bnzmnzhnz: swedish_chef: http://hastebin.com/bekafeyiva.vbs
[2013-06-25 19:08:49 -0400] swedish_chef: bnzmnzhnz and motd-tail is in the right place? I've noticed that despite Berkshelf, Chef often needs explicit depends statements in metadata.rb
[2013-06-25 19:09:01 -0400] idlemichael: is there a good way to test if a drive is mounted with chef/ruby?
[2013-06-25 19:09:43 -0400] bnzmnzhnz: swedish_chef: yes, http://hastebin.com/xopevaseba.mel
[2013-06-25 19:10:09 -0400] bnzmnzhnz: earlier output I sent I mentioned mysql, seeing this issue with both these cookbooks installed clean using berkshelf
[2013-06-25 19:10:18 -0400] markxnelson: adnichols:  can I say variables ( :hostname => :node.fqdn ) ??
[2013-06-25 19:10:19 -0400] bnzmnzhnz: no issue with my own site-cookbooks
[2013-06-25 19:10:43 -0400] markxnelson: or :hostname => node.['fqdn']
[2013-06-25 19:11:18 -0400] adnichols: markxnelson yes - though I'd use node[:fqdn]
[2013-06-25 19:11:26 -0400] adnichols: or your 2nd example
[2013-06-25 19:11:29 -0400] swedish_chef: bnzmnzhnz I think I know what the problem is
[2013-06-25 19:11:40 -0400] bnzmnzhnz: swedish_chef: on the edge of my seat :-)
[2013-06-25 19:11:41 -0400] markxnelson: thanks
[2013-06-25 19:11:51 -0400] swedish_chef: the cookbook listed in that directory is a versioned copy created by Berkshelf
[2013-06-25 19:12:02 -0400] bnzmnzhnz: ah
[2013-06-25 19:12:03 -0400] swedish_chef: Chef doesn't understand these
[2013-06-25 19:12:12 -0400] bnzmnzhnz: and my cookbooks have no version in the name
[2013-06-25 19:12:14 -0400] swedish_chef: to verify that this is the problem
[2013-06-25 19:12:23 -0400] swedish_chef: rename it to remove the version
[2013-06-25 19:12:34 -0400] swedish_chef: I hypothesize that the error will go away to be replaced by another one
[2013-06-25 19:12:43 -0400] swedish_chef: it means one of two things
[2013-06-25 19:12:55 -0400] swedish_chef: 1. Berkshelf is not correctly loading into your chef runtime
[2013-06-25 19:13:32 -0400] bnzmnzhnz: swedish_chef: ok, I symlinked motd-tail-1.2.0 to motd-tail and it ran
[2013-06-25 19:13:35 -0400] swedish_chef: 2. some problem during asset creation
[2013-06-25 19:13:44 -0400] swedish_chef: bnzmnzhnz ok, cool
[2013-06-25 19:13:55 -0400] swedish_chef: I am not super-familiar with chef-solo
[2013-06-25 19:14:01 -0400] bnzmnzhnz: is there a way to get berkshelf loaded?
[2013-06-25 19:14:09 -0400] swedish_chef: is it in your Gemfile?
[2013-06-25 19:14:28 -0400] bnzmnzhnz: I am running knife solo bootstrap, which install chef on the node
[2013-06-25 19:14:59 -0400] xrl: I'm having some trouble with clients in chef. We have an existing deploy method that uses knife and seems to work fine. I'm redoing things with berkshelf and I upgraded chef. I didn't change the .chef/knife.rb but now my nodes can't update their config on the chef server
[2013-06-25 19:15:00 -0400] bnzmnzhnz: Gemfile does have berkshelf
[2013-06-25 19:15:15 -0400] swedish_chef: bummer
[2013-06-25 19:15:31 -0400] xrl: how can I debug permissions issues with clients?
[2013-06-25 19:15:50 -0400] swedish_chef: are you running berks install?
[2013-06-25 19:16:01 -0400] swedish_chef: or copying the Berkshelf repository?
[2013-06-25 19:16:59 -0400] bnzmnzhnz: swedish_chef: what do you mean by Bershelf repository?
[2013-06-25 19:17:27 -0400] swedish_chef: something like ~/.berkshelf
[2013-06-25 19:17:29 -0400] bnzmnzhnz: berks install is being used to pull in cookbooks locally on the workstation, to ./cookbooks
[2013-06-25 19:17:38 -0400] rottmanj: @jtimberman have you ever gotten your passenger_enterprise cookbook to work with RVM?
[2013-06-25 19:17:51 -0400] swedish_chef: and it writes the names with version numbers in them?
[2013-06-25 19:17:59 -0400] bnzmnzhnz: ah, so I have BERKSHELF_PATH set to '.', and so it installs cookbooks to ./cookbooks
[2013-06-25 19:18:05 -0400] bnzmnzhnz: then knife solo rsyncs that to the node
[2013-06-25 19:18:40 -0400] swedish_chef: you want to separate where Berkshelf installs the versioned cookbooks it manages for all cookbooks
[2013-06-25 19:19:05 -0400] swedish_chef: from where Berkshelf installs the unversioned cookbooks bound to a specific cookbook
[2013-06-25 19:19:19 -0400] swedish_chef: you need to rsync the latter, per cookbook
[2013-06-25 19:19:50 -0400] swedish_chef: (or rsynch the entire Berkshelf local repo and then run berks install using the repo on the node, per recipe)
[2013-06-25 19:19:57 -0400] bnzmnzhnz: ah, so I should have a global dir like ~/.berkshelf/cookbooks with versioned? and a local one ./cookbooks with unversioned, it being the local that gets rsynced?
[2013-06-25 19:20:08 -0400] swedish_chef: yup
[2013-06-25 19:20:13 -0400] swedish_chef: that should do it
[2013-06-25 19:20:18 -0400] swedish_chef: good luck
[2013-06-25 19:20:30 -0400] bnzmnzhnz: ok, there's probably some setting to make that happen, but I don't have it
[2013-06-25 19:21:44 -0400] swedish_chef: it's the default behavior which you've changed by modifying the paths. The Berkshelf docs cover all the options
[2013-06-25 19:25:37 -0400] xrl: any tips on debugging a chef client permission issue?
[2013-06-25 19:25:49 -0400] xrl: freshly deployed server which can't update its entry on opscode
[2013-06-25 19:26:30 -0400] jessicab1: xrl: what error are you getting when you run the client? just a 403?
[2013-06-25 19:27:58 -0400] xrl: jessicab1: yeah, 403 forbidden when the postgresql cookbook tries to upload it's generated password
[2013-06-25 19:28:26 -0400] yoloswagjesus420: Hi, can anyone point me towards a medium-sized chef project for me to take a look at?
[2013-06-25 19:29:17 -0400] jessicab1: xrl: oh.. odd, perhaps check the api endpoint its trying to reach and make sure the client has permissions for that? not sure where its trying to upload the pass.. but the debug logs should show you where its not authorized
[2013-06-25 19:30:34 -0400] xrl: how can I turn up debugging? I can run chef-client on the server... use the log_level there?
[2013-06-25 19:31:12 -0400] jessicab: xrl: just add -l debug to the chef-client command and itll do it.. or you can set the log_level
[2013-06-25 19:32:34 -0400] xrl: jessicab: ok, cool. it's doing some posts to the server just fine then blows up on "Sending HTTP Request via PUT to api.opscode.com:443/organizations/xrls_org/nodes/berksinstein"
[2013-06-25 19:33:21 -0400] jessicab: xrl: is berksinstein the node youre running it on? perhaps the client doesnt have perms on its own node?
[2013-06-25 19:33:49 -0400] xrl: hmm, but the client/node pair were generated by knife?
[2013-06-25 19:34:00 -0400] jessicab: it check out the berksinstein nodes perm tab in the webui.. itll be something on that page
[2013-06-25 19:34:02 -0400] xrl: so I can modify the ACL using the opscode web interface
[2013-06-25 19:34:25 -0400] jessicab: xrl: ah, you did a knife client create and knife node create? that wont create perms quite right btw
[2013-06-25 19:34:51 -0400] xrl: I did a "knife ec2 server create" with a -N setting
[2013-06-25 19:35:09 -0400] xrl: how should I be bringing up a new ec2 box?
[2013-06-25 19:35:30 -0400] xrl: so it's working now
[2013-06-25 19:35:32 -0400] jessicab: xrl: maybe the node already existed when you did that? but the client was deleted beforehand? bootstrapping should create perms right
[2013-06-25 19:35:48 -0400] xrl: hmm, I'll try clearing out all things berksinstein and starting over
[2013-06-25 19:36:00 -0400] xrl: I want to make sure our process for new servers is free of surprsises
[2013-06-25 19:36:18 -0400] xrl: thanks a lot for the help, I'm glad to see the recipes firing off now
[2013-06-25 19:37:02 -0400] jessicab: xrl: how that happens btw.. is when you bootstrap it should put the org key on the client, which creates the client key, which creates the node.. it has to happen in that order. but if the node gets created some other way, or if it already exists when you bootstrap.. thatll cause weird perm issues
[2013-06-25 19:37:10 -0400] jessicab: heh nice, np
[2013-06-25 19:41:46 -0400] nmeunier: Hello!
[2013-06-25 19:42:10 -0400] nmeunier: is it possible to access other cookbooks default attributes values in my own attributes/default.rb file?
[2013-06-25 19:44:15 -0400] ktam: sorry if this question about attributes is a bit too low-level for this channel, but no one appears to be in learnchef so here goes;
[2013-06-25 19:44:34 -0400] leifmadsen: nmeunier: include_attribute "tpn-asterisk"
[2013-06-25 19:44:35 -0400] leifmadsen: for example
[2013-06-25 19:44:58 -0400] ktam: what are the best practices for setting attributes in cookbooks? it's stated that default should be used as often as possible, but normal is the only attribute that persists after the chef run
[2013-06-25 19:44:59 -0400] leifmadsen: nmeunier: that's in my tlc-call-server/attributes/default.rb file, and it includes the attributes from tpn-asterisk
[2013-06-25 19:45:13 -0400] nmeunier: can I do it in my attributes/default.rb or should I do it in the recipe?
[2013-06-25 19:45:25 -0400] nmeunier: I am trying to define something like this
[2013-06-25 19:45:27 -0400] nmeunier: default['rvm_passenger']['module_path'] = "#{default['rvm_passenger']['root_path']}/libout/apache2/mod_passenger.so"
[2013-06-25 19:45:42 -0400] nmeunier: but default['rvm_passenger']['root_path'] is not found
[2013-06-25 19:45:50 -0400] nmeunier: as it is defined in the rvm_passenger cookbook
[2013-06-25 19:46:07 -0400] ktam: we have a whole bunch of attributes in the chef org already that are set using set (or normal) - so rewriting cookbooks to use default at this point would not work, since default attributes will never overwrite normal attributes, if i understand correctly
[2013-06-25 19:46:32 -0400] nmeunier: thanks leifmadsen
[2013-06-25 19:46:36 -0400] nmeunier: will try this right away
[2013-06-25 19:47:43 -0400] bcave: in the same way that a role in chef provides a way of batch executing recipes on a client, is there any similar mechanism for batching commands for knife on a developer workstation?
[2013-06-25 19:47:56 -0400] ktam: furthermore, if we set others' cookbooks attributes using default, will our specification override the upstream cookbook's default values? Or at equal priority, will the last-read one simply take precedence
[2013-06-25 19:49:02 -0400] bcave: for example... i might want to "knife cookbook upload x; knife role from file roles/some-role.rb; knife do_something_else", and wondering if there's an existing mechanism to provide a sort of run_list to knife?
[2013-06-25 19:49:03 -0400] nmeunier: leifmadsen: are you accessing your tpn-asterisk attributes as default['tpn-asterisk'][''] or node['tpn-asterisk']['']
[2013-06-25 19:49:18 -0400] leifmadsen: nmeunier: ummm, great question :)
[2013-06-25 19:49:21 -0400] nmeunier: in your tlc-call-server/attributes/default.rb file
[2013-06-25 19:50:13 -0400] leifmadsen: oh, well they are included :)
[2013-06-25 19:50:22 -0400] leifmadsen: so they are whatever they were defined as i nthe other file
[2013-06-25 19:52:21 -0400] priestjim: bcave: it's called spiceweasel
[2013-06-25 19:52:31 -0400] priestjim: bcave: and it does exactly that
[2013-06-25 19:53:26 -0400] bcave: perfect. thank you priestjim
[2013-06-25 19:53:52 -0400] KarlHungus: is there a health url in chef-server?
[2013-06-25 19:53:57 -0400] KarlHungus: oss chef server, i should add
[2013-06-25 19:58:34 -0400] KarlHungus: meh. tcp connect will work ;)
[2013-06-25 19:59:25 -0400] wsoula: i installed chef 11 today and i can view the web-ui at http://localhost:9462.  What do I need to change to view the web-ui at http://[fqdn]:9462?
[2013-06-25 20:12:28 -0400] wsoula: i installed chef 11 today and i can view the web-ui at http://localhost:9462.  What do I need to change to view the web-ui at http://[fqdn]:9462?
[2013-06-25 20:13:05 -0400] bnzmnzhnz: swedish_chef: wrt to my earlier problem, I have found that if I run 'berks install --path ./cookbooks', I get installed versioned cookbooks in ~/.berkshelf/cookbooks, and non-versioned in ./cookbooks, which is what I need
[2013-06-25 20:13:42 -0400] bnzmnzhnz: will take a look at the berkshelf code later to discover exactly what neatest way to do this could be
[2013-06-25 20:13:44 -0400] bnzmnzhnz: thx for help
[2013-06-25 20:13:46 -0400] ivey: ~/.berkshelf/cookbooks is the Berkshelf itself, it's the canonical place cookbooks get stored
[2013-06-25 20:14:16 -0400] bnzmnzhnz: ivey: so it's a versioned cache of sorts?
[2013-06-25 20:14:21 -0400] ivey: sure
[2013-06-25 20:14:34 -0400] bnzmnzhnz: with the intent I use --path to get a specific version into my local repo?
[2013-06-25 20:14:42 -0400] bnzmnzhnz: this is knife-solo btw
[2013-06-25 20:14:45 -0400] bnzmnzhnz: so no upload
[2013-06-25 20:15:14 -0400] bcave: something that's relatively basic, I'm sure, but something I didn't find in the docs was the preferred method for making a node check in with the server regularly (environment: ec2). The default knife ec2 server create doesn't seem to schedule checkins. whats the norm, cron?
[2013-06-25 20:15:21 -0400] bnzmnzhnz: just trying to figure out the "right" way to do things
[2013-06-25 20:15:22 -0400] ivey: yes, "install --path" should have been called "export" or something. it's a way of getting a set of cookbook versions for use without berks
[2013-06-25 20:15:31 -0400] bnzmnzhnz: aha
[2013-06-25 20:15:38 -0400] ivey: see also:   berks package [COOKBOOK]    # Package a cookbook (and dependencies) as a tarball
[2013-06-25 20:16:08 -0400] bnzmnzhnz: interesting
[2013-06-25 20:16:23 -0400] ivey: ideally we'd have a knife-solo plugin to look in the berkshelf itself, or at least fake it like we do w/ vagrant
[2013-06-25 20:17:24 -0400] teukka: bnzmnzhnz: I might have missed some of the discussion but prerelease version of knife-solo has berkshelf integration. if it finds Berksfile and berkshelf gem it will call it like `berks install --path ..` and upload and use that directory
[2013-06-25 20:17:25 -0400] ivey: bcave: you can run chef-client in daemon mode
[2013-06-25 20:17:32 -0400] bnzmnzhnz: ivey: yes, that would make sense to me, look in the bookshelf for requested cookbooks and rsync them out w/o the version number
[2013-06-25 20:17:35 -0400] bcave: oh wait... probably add the chef-client cookbook and use one of the recipes..?
[2013-06-25 20:17:49 -0400] ivey: sweet
[2013-06-25 20:18:31 -0400] bnzmnzhnz: teukka: where does that get called from? when I do 'knife solo cook ...'?
[2013-06-25 20:18:32 -0400] bcave: ok ivey, thanks
[2013-06-25 20:19:13 -0400] teukka: bnzmnzhnz: yes, on `cook`
[2013-06-25 20:19:31 -0400] bnzmnzhnz: teukka: sweet
[2013-06-25 20:19:55 -0400] teukka: bnzmnzhnz: add `-VV` to see all the debug output. there you can see what is actually happening
[2013-06-25 20:21:12 -0400] teukka: bnzmnzhnz: the 0.3.0 prerelease has some big changes. please read https://github.com/matschaffer/knife-solo/wiki/Upgrading-to-0.3.0
[2013-06-25 20:23:22 -0400] xrl: I'm trying to use "knife node from file nodes/berksinstein.rb" and it's work except the attributes are not being uploaded
[2013-06-25 20:23:37 -0400] xrl: so its getting the right name, environment, and run_list
[2013-06-25 20:23:51 -0400] xrl: but not sending the big attributes hash I'm defining
[2013-06-25 20:24:05 -0400] xrl: I think this is the API: https://github.com/opscode/chef/blob/master/lib/chef/node.rb#L414
[2013-06-25 20:24:13 -0400] xrl: so I'm trying attributes=, normal=, etc
[2013-06-25 20:26:14 -0400] jessicab: xrl: sounds like it might be a formatting issue? you wont want any equal signs in your json file.. theres an example here of what a role json would look like, nodes is really similar - http://docs.opscode.com/essentials_roles.html
[2013-06-25 20:26:27 -0400] jessicab: kinda near the bottom of the page
[2013-06-25 20:27:35 -0400] xrl: jessicab: hmm, "Exception: NoMethodError: Undefined node attribute or method `default_attributes' on `node'"
[2013-06-25 20:27:59 -0400] aramus: Hi, I was wondering if it was possible to run several recipes in parallel in chef.
[2013-06-25 20:28:20 -0400] aramus: And if it is, how would you do it?
[2013-06-25 20:28:58 -0400] jessicab: xrl: actually, i think the example here under edit would be a better one - http://docs.opscode.com/knife_node.html
[2013-06-25 20:31:36 -0400] xrl: jessicab: here's a sample of what I'm doing in nodes/berksinstein.rb: https://gist.github.com/xrl/5862075
[2013-06-25 20:32:04 -0400] xrl: it's giving the error "Undefined node attribute or method `default_attributes' on `node'"
[2013-06-25 20:33:05 -0400] surge_: Is there a way to include a base role from another role and then remove particular recipes for the aforementioned role?
[2013-06-25 20:33:34 -0400] xrl: surge_: sounds like you may want to split that top-level role in two
[2013-06-25 20:33:35 -0400] bnzmnzhnz: teukka: got to run, but thanks for info, will check the pre-release knife-solo later today
[2013-06-25 20:33:59 -0400] surge_: I want role B to include most of role A but without recipe X and Y, but with recipe A, B, and C and all the associated attributes.
[2013-06-25 20:34:05 -0400] jessicab: xrl: hm.. yea, i could be wrong, but i dont think you can use that sort of syntax with chef? pretty sure it hates equals or => and you have to use : also.. i think all those attributes need to be in the default section
[2013-06-25 20:34:15 -0400] surge_: xrl: yeah, I was thinking that would need to be the case, but i was looking for a work around
[2013-06-25 20:34:24 -0400] pwf: hm... my execute resource doesn't seem to be doing anything
[2013-06-25 20:34:36 -0400] pwf: are there any gotchas with execute resources and blobs or something
[2013-06-25 20:34:44 -0400] jessicab: xrl: heres a nice example - http://jinsunspace.blogspot.com/2013/01/create-node-from-json-file.html
[2013-06-25 20:34:47 -0400] pwf: it says it's running it in the debug log, but it doesn't actually do anything...
[2013-06-25 20:37:33 -0400] freerobby: Has anybody here found a way to use the application_ruby cookbook to deploy a sinatra app?
[2013-06-25 20:38:38 -0400] btorch: new here to chef ... just wondering if I'm reading this wrong or not , but is it possible to set "environment 'myenv'" into the knife.rb and client.rb files ?
[2013-06-25 20:39:05 -0400] btorch: or I always have to use knife -E env
[2013-06-25 20:42:16 -0400] freerobby: btorch: you can do `environment "production"` in knife.rb
[2013-06-25 20:42:39 -0400] xrl: jessicab: ok, the trick there was switching from a ruby file to a json file
[2013-06-25 20:42:55 -0400] xrl: jessicab: that does mean I have to give up my trick of using __FILE__ for the node name, but oh well :)
[2013-06-25 20:43:06 -0400] xrl: check the web ui and the attributes were there
[2013-06-25 20:51:41 -0400] ccg: looking for how to connect to our local pypi server using python_pip
[2013-06-25 20:52:34 -0400] thatothermitch_: is it permissible to use ruby sets as node attributes?
[2013-06-25 20:52:57 -0400] flagg0204: is it possible to use a template from another cookbook in a seperate cookbook
[2013-06-25 20:52:58 -0400] flagg0204: ?
[2013-06-25 20:53:24 -0400] thatothermitch_: flagg0204: depending on what you're doing, that might be a job for a LWRP
[2013-06-25 20:53:28 -0400] flagg0204: so if i have foo::default, and i want to write a coobook bar::Default.  Can bar::default use a template from foo
[2013-06-25 20:53:51 -0400] flagg0204: thatothermitch_: i actually am using an LWRP but it write sa template
[2013-06-25 20:54:28 -0400] flagg0204: its the mongodb cookbook.  I am trying to write and 'application' cookbook that uses mongodb.  the lwrp in mongo uses a template resource which is not found when i am running the app cookbook
[2013-06-25 20:55:31 -0400] thatothermitch_: flagg0204: unfortunately i haven't come across that one personally. I would have thought the LWRP would find its template in its home cookbook.
[2013-06-25 20:56:14 -0400] flagg0204: ok.  thanks il keep digging
[2013-06-25 21:06:51 -0400] flagg0204: thatothermitch_: fixed it.  the definition needed a "Cookbook <foobar>" added to it, in order for the app cookbook to find the correct template
[2013-06-25 21:11:03 -0400] jmickle: hmm
[2013-06-25 21:11:10 -0400] jmickle: opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.4/lib/chef/chef_fs/file_system/rest_list_entry.rb:108:in `write': Name in remote/environments/production.json/production.json must be 'production' (is '') (RuntimeError)
[2013-06-25 21:11:17 -0400] jmickle: any one have any idea what the heck this means?
[2013-06-25 21:19:39 -0400] atrius: so.. for ruby under ubuntu.. is there any real good alternative to building from source all the time?
[2013-06-25 21:21:19 -0400] stormerider: jmickle: sounds like production.json doesn't have a "name" field
[2013-06-25 21:21:24 -0400] Death_Syn: atrius_: i've done that and rvm
[2013-06-25 21:21:32 -0400] Death_Syn: both worked well for my various needs
[2013-06-25 21:21:53 -0400] Death_Syn: packaged rubies for debian-based systems have never been that great, in my experience
[2013-06-25 21:22:47 -0400] atrius: DeadZen_: i was doing RVM on the current base VM we're using... but it's caused all kinds of hate and such
[2013-06-25 21:23:59 -0400] Death_Syn: i use ruby_installer::source quite often
[2013-06-25 21:24:06 -0400] Death_Syn: for local builds where rvm is inappropriate
[2013-06-25 21:24:10 -0400] Death_Syn: it still is a source build
[2013-06-25 21:24:27 -0400] atrius: which i imagine uses ruby-install from postmodern?
[2013-06-25 21:24:30 -0400] Death_Syn: but generally all i have to do is set versions and go
[2013-06-25 21:24:34 -0400] atrius: https://github.com/postmodern/ruby-install <-- this?
[2013-06-25 21:24:42 -0400] Death_Syn: never seen taht one
[2013-06-25 21:25:07 -0400] Death_Syn: looks fun
[2013-06-25 21:25:41 -0400] atrius: fun seems to be the way to describe most of these options...haha
[2013-06-25 21:28:37 -0400] gchristensen: in order to install a custom ohai plugin, is all it takes to drop a file into /etc/chef/ohai_plugins/ and re-run ohai for that plugin?
[2013-06-25 21:33:02 -0400] jtimberman: atrius: ruby1.9.1-full package is 1.9.3-psomething, where something varies by newness of the ubuntu version.
[2013-06-25 21:33:58 -0400] ryker: quick question. In the mysql::client recipe, I see node['platform'] used and platform?.  What is the difference?
[2013-06-25 21:34:06 -0400] jtimberman: I wrote a blog post a couple years ago about how to make an updated ruby package with fpm: http://jtimberman.housepub.org/blog/2011/04/02/debian-ubuntu-package-for-ruby-1-9-2-with-fpm/
[2013-06-25 21:34:26 -0400] jtimberman: ryker: platform? is a predicate method that returns true if the node['platform'] matches the argument.
[2013-06-25 21:34:43 -0400] atrius: jtimberman: i'll check that out.. thanks :)
[2013-06-25 21:34:51 -0400] jtimberman: it is preferrable to use predicate methods when checking for simple truthiness rather than using a string/regex equality check
[2013-06-25 21:35:02 -0400] gchristensen: atrius: I use the opscode omnibus project to make dotdeb files for my ruby builds, and install them into /opt/ruby-myversion, instead of building it on the server (which I think is an atrocious idea...)
[2013-06-25 21:35:20 -0400] jtimberman: e.g., if platform?("redhat") vs if node['platform'] == 'redhat'
[2013-06-25 21:35:39 -0400] ryker: jtimberman: thx.  is there a list somewhere of available predicate methods? Or just search the source?   :)
[2013-06-25 21:36:07 -0400] atrius: gchristensen: yeah, building on the server all the time would be terrible. the initial deployment will end up happening by way of the base VM getting cloned. but updates obviously won't work that way
[2013-06-25 21:36:25 -0400] jtimberman: ryker: http://docs.opscode.com/chef/dsl_recipe.html
[2013-06-25 21:37:01 -0400] gchristensen: also at this point I find deploying ruby projects (any of them...) so miserable, I do .debs and .rpms for them all now... but that can be a big time sink.
[2013-06-25 21:42:50 -0400] PhilK: I just updated my nginx cookbook to match upstream and I'm getting an error in the ohai_plugin recipe. I'm pretty sure this is wrong unless you're doing the source recipe but I feel like someone else would've noticed this issue before me and I'm just doing something wrong...
[2013-06-25 21:42:54 -0400] PhilK: https://github.com/opscode-cookbooks/nginx/blob/master/recipes/ohai_plugin.rb#L33
[2013-06-25 21:43:11 -0400] PhilK: it looks like it was broken here: https://github.com/opscode-cookbooks/nginx/commit/c91a628189e392d746ddccecb2817fa80bdb344f
[2013-06-25 21:43:24 -0400] PhilK: then fixed the right way here: https://github.com/opscode-cookbooks/nginx/commit/480d08de38426eb0b4dad23f9edd2f45c6ee94a9
[2013-06-25 21:43:44 -0400] PhilK: but the addition of the source prefix attribute wasn't removed
[2013-06-25 21:43:52 -0400] PhilK: will submit a PR if that seems reasonable
[2013-06-25 21:47:30 -0400] d```: I'm having two issues with the application cookbook
[2013-06-25 21:48:35 -0400] d```: 1. when I set the deploy_key using an attribute, the recipe complains that the key is not of string type nil
[2013-06-25 21:49:30 -0400] d```: 2. I get a missing method error on line 130:  resource.application WeakRef.new(self)
[2013-06-25 21:53:31 -0400] Guest61933: hi guys... soon I'll need to setup 1-2 servers, do you think is worth the time learning chef and start with it from day 1?
[2013-06-25 21:54:32 -0400] gchristensen: Guest61933: are you going to set up a third server ever? or will one of those servers surprisingly disappear?
[2013-06-25 21:55:04 -0400] gchristensen: Guest61933: (the answer is "most definitely so".) as someone who took the time to learn it, I'd say yes absolutely
[2013-06-25 21:55:16 -0400] Guest61933: gchristensen: hopefully there will be the 3rd, 4th, and others... but I don't know if it'll be after a month or after 1-2 years
[2013-06-25 21:55:54 -0400] Guest61933: how long does it take to learn it (considering that i already know ruby)?
[2013-06-25 21:56:08 -0400] Guest61933: i'll have to refresh my sysadmin skills though :)
[2013-06-25 21:56:54 -0400] gchristensen: it took me quite some time, but I did it the dumb way. read the docs, it shouldn't be too bad.
[2013-06-25 21:57:18 -0400] Guest61933: ok :)
[2013-06-25 21:57:46 -0400] Guest61933: how did you learn it? by trial and error?
[2013-06-25 22:01:29 -0400] rkesters: I am trying to link my private chef install to my ldap, I created a file called /etc/chef-server/private-chef.rb and reconfiged but nothing appeared to change
[2013-06-25 22:02:22 -0400] Guest61933: gchristensen: also, do you suggest going with chef solo or the hosted version on opscode? (i think that a self hosted version would be too much for now)
[2013-06-25 22:03:21 -0400] bean: Guest61933: why would the self-hosted be too much?
[2013-06-25 22:03:45 -0400] bean: I'd probably do a free hosted chef acct though
[2013-06-25 22:04:27 -0400] Guest61933: bean: setting the whole self-hosted on a server/vps of itsown for just 1-2 servers? i think it would require quite a lot of time to set it up correctly
[2013-06-25 22:04:44 -0400] bean: ah, for 1-2 servers i'd do a hosted chef
[2013-06-25 22:04:54 -0400] bean: i think you get 10 for free
[2013-06-25 22:04:56 -0400] bean: or something
[2013-06-25 22:05:23 -0400] Guest61933: 5 :)
[2013-06-25 22:05:31 -0400] bean: yeah
[2013-06-25 22:05:32 -0400] bean: idk
[2013-06-25 22:05:34 -0400] bean: we just pay for it
[2013-06-25 22:05:34 -0400] bean: :p
[2013-06-25 22:05:49 -0400] Guest61933: eheh... how many servers do you manage?
[2013-06-25 22:06:12 -0400] rkesters: any help on connect to a private ldap?
[2013-06-25 22:07:01 -0400] bean: Guest61933: On hosted chef, not many currently but on my self-hosted chef > 50
[2013-06-25 22:07:24 -0400] Guest61933: cool :)
[2013-06-25 22:07:25 -0400] bean: rkesters: so what you're saying is that you followed the setup steps, and then tried to log in with LDAP and it doesn't work?
[2013-06-25 22:11:05 -0400] rkesters: correct
[2013-06-25 22:11:19 -0400] bean: have you checked any sort of logs to see what is happening?
[2013-06-25 22:11:21 -0400] rkesters: I ran reconfigure but did not appear to pick up the changes
[2013-06-25 22:11:37 -0400] rkesters: I made the changes in /etc/chef-server/private-chef.rb
[2013-06-25 22:11:40 -0400] bean: I don't know enough about private chef to really help, I jsut deal with ldap a lot.
[2013-06-25 22:12:05 -0400] rkesters: I made sure I could query the ldap with ldap search
[2013-06-25 22:12:45 -0400] rkesters: some of the chef documentation seems old, not sure if i put the file in the correct location.
[2013-06-25 22:30:28 -0400] rkesters: has anyone configured a private chef server to work with ldap? I am not sure where the config file goes, I put the config in /etc/chef-server/private-chef.rb
[2013-06-25 22:32:42 -0400] bean: rkesters: you might be better off asking during more work-y hours
[2013-06-25 22:32:45 -0400] bean: or hit up the mailing list.
[2013-06-25 22:36:41 -0400] juliancdunn: rkesters: or, if you're a private Chef customer, just email support, since you're paying anyways
[2013-06-25 22:39:50 -0400] freerobby: I feel like I have the crazies is there still no functional sinatra cookbook or is it called something else?
[2013-06-25 22:46:20 -0400] thom: freerobby: not trolling, but what would a sinatra cookbook actually do? because really, you're wanting the unicorn cookbook to run unicorn, and then it's just a deploy resource or similar with a callback to run bundle install
[2013-06-25 22:46:37 -0400] thom: and then apache/nginx in front as a proxy
[2013-06-25 22:58:26 -0400] freerobby: thom: i'd expect it to set up and pass in an environment variable, write app-specific configs and maybe use god or monit
[2013-06-25 22:59:10 -0400] thom: yeah, so i think that's going to be different on an app by app basis
[2013-06-25 22:59:21 -0400] freerobby: thom: basically i'd expect to be able to say `sinatra 'myapp' do set env stuff end`
[2013-06-25 22:59:28 -0400] freerobby: yeah?
[2013-06-25 22:59:57 -0400] thom: yup. but feel free to build one and see what you think :)
[2013-06-25 23:00:13 -0400] ryker: ls/quit
[2013-06-25 23:00:16 -0400] ryker: oops
[2013-06-25 23:00:19 -0400] ryker: :)
[2013-06-25 23:00:50 -0400] jmickle: whats the syntax to override in a recipe
[2013-06-25 23:00:56 -0400] jmickle: an attribute thats specified in default attr file
[2013-06-25 23:03:14 -0400] jmickle: nvm found it
[2013-06-25 23:04:42 -0400] cwj: coderanger or some other opscoder: i'm under the impression its not possible for me to delete and republish the same version of a cookbook on the community site, is that correct?
[2013-06-25 23:05:25 -0400] cwj: just discovered that emeril didnt upload definitions with my cookbook  :)
[2013-06-25 23:11:36 -0400] coderanger: cwj: That is correct
[2013-06-25 23:11:43 -0400] cwj: ok, thanks
[2013-06-25 23:11:44 -0400] coderanger: cwj: It would be better to make a new rev
[2013-06-25 23:11:50 -0400] cwj: yeah thats what i'll do
[2013-06-25 23:13:11 -0400] cwj: coderanger: is there a way to mark a version as bad?
[2013-06-25 23:14:15 -0400] coderanger: No
[2013-06-25 23:43:16 -0400] josephholsten: aw, fnichol isn't around
[2013-06-25 23:44:00 -0400] josephholsten: anyone got any brilliant ideas on how to use a support cookbook with test-kitchen? for testing lwrps etc?
[2013-06-25 23:45:54 -0400] cwj: josephholsten: write the support cookbook, stuff it in test/cookbooks/ and use berksfile or cheffile to ensure the cookbook gets copied up into the test-kitchen vm
[2013-06-25 23:46:11 -0400] cwj: then put the cookbook in the suite(s) run list(s)
[2013-06-25 23:46:13 -0400] josephholsten: i tried that with a path, it didn't like me
[2013-06-25 23:46:58 -0400] cwj: works on my machine :)
[2013-06-25 23:47:01 -0400] cwj: are you using berkshelf?
[2013-06-25 23:47:28 -0400] cwj: opscode rabbitmq cookbook has an example
[2013-06-25 23:47:41 -0400] josephholsten: yep, using berks
[2013-06-25 23:54:21 -0400] scalp42: docs are down http://docs.opscode.com/ohai_plugins.html
[2013-06-25 23:58:26 -0400] josephholsten: hmm, berks install --path is not copying the contents of that cb
[2013-06-25 23:59:22 -0400] josephholsten: ah, berks bug. I should have known. just had to update berks

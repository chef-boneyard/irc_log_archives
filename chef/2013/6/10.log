[2013-06-10 00:00:01 -0400] axsuul: coderanger: Ah so no need to file a ticket?
[2013-06-10 00:00:18 -0400] coderanger: I would file it, just you can mention it should be resolved upstream
[2013-06-10 00:00:26 -0400] coderanger: and you can try installing knife-essentials
[2013-06-10 00:00:34 -0400] coderanger: not sure how that works with chef 11
[2013-06-10 00:06:08 -0400] axsuul: coderanger: http://tickets.opscode.com/browse/CHEF-4258
[2013-06-10 00:07:25 -0400] coderanger: o7
[2013-06-10 00:16:46 -0400] axsuul: coderanger: If say I wanted to remove all nodes, roles, environments from server with knife, how would you suggest I do it?
[2013-06-10 00:22:11 -0400] coderanger: axsuul: With knife? most data types have a `knife bulk delete` command
[2013-06-10 00:22:16 -0400] coderanger: knife node bulk delete, etc
[2013-06-10 00:22:21 -0400] coderanger: takes a regex
[2013-06-10 00:22:37 -0400] coderanger: I would probably make a little pychef script though, personally :)
[2013-06-10 00:25:53 -0400] axsuul: coderanger: thanks
[2013-06-10 00:32:41 -0400] axsuul: coderanger: Sorry again for bothering you, I'm having trouble comprehending this, how can you cook a node if isn't even an ip address attached to it? And I don't see anywhere you can specify that as an attribute within the docs
[2013-06-10 00:33:09 -0400] coderanger: Not sure what you mean, just run chef-client and that will get filled in
[2013-06-10 00:33:32 -0400] coderanger: ohai pulls in local networking details (along with a bajillion other things)
[2013-06-10 00:36:39 -0400] axsuul: coderanger: So say I want to manually add a node within webui, how would I attach a server to that node (ip address or whatever)
[2013-06-10 00:37:29 -0400] coderanger: axsuul: You generally cannot create a node in the webui. FOSS allows it and the current gen hosted UI allows it (but it will cause issues when you try to run the node)
[2013-06-10 00:37:38 -0400] coderanger: webui2 does not allow creating nodes via the UI
[2013-06-10 00:37:54 -0400] coderanger: knife bootstrap and friends are the usual ways to make nodes
[2013-06-10 00:43:43 -0400] axsuul: coderanger: Bummer, so there's no way to use the API to create nodes and bootstrap/cook them?
[2013-06-10 00:44:01 -0400] coderanger: No, the chef server never directly contacts your server for security reasons
[2013-06-10 00:44:23 -0400] coderanger: Any time you need to SSH to the server, it goes directly from your workstation to the target
[2013-06-10 01:09:17 -0400] liamk: Hi!  I'm new to Chef (and Ruby for that matter) and have been banging my head against the wall with a deploy problem...  Hoping someone hear can point me in the right direction
[2013-06-10 01:10:44 -0400] liamk: I'm deploying a Django application using application_python.   The problem has to do with the layout, and where manage.py and local_settings.py get placed.
[2013-06-10 01:13:56 -0400] liamk: There is a known, open issue with this: COOK-2570
[2013-06-10 01:19:22 -0400] liamk: Nothing?
[2013-06-10 01:30:39 -0400] bradbeam: if i wanted to unset an attribute at the node/role level that was defined in the cookbook as a default attribute, how would i do that?
[2013-06-10 02:04:50 -0400] ssd7: Ohai Chefs
[2013-06-10 02:26:38 -0400] axsuul: Anyone know why IP of my node is 127.0.0.2 and not the actual IP address?
[2013-06-10 02:43:01 -0400] axsuul: Hmm would you do something like run chef-client on all nodes
[2013-06-10 02:45:09 -0400] ssd7: axsuul: For your first question, I would have to see the network config and the ohai output.  But basically there is really no such thing as a "primary" ip address on most linux systems, so Ohai does its best to choose one that most people would expect.
[2013-06-10 02:45:43 -0400] ssd7: For your second question, it depends.  Unless you have a large number of nodes, knife-ssh tends to do the job well: knife ssh '*:*' 'sudo chef-client'
[2013-06-10 02:48:20 -0400] axsuul: ssd7: Thanks, now in that case, does my node have to *have* a FQDN?
[2013-06-10 02:48:30 -0400] axsuul: ssd7: cause most of my nodes have an unresolvable FQDN
[2013-06-10 02:48:55 -0400] axsuul: ssd7: they are mostly just IPs
[2013-06-10 02:50:05 -0400] ssd7: axsuul: You can use any attribute that ohai collects using the -a field.  So to you ipaddress you would use: knife ssh '*:*' 'sudo chef-client' -a ipaddress
[2013-06-10 02:51:36 -0400] axsuul: ssd7: Hmm but all my nodes have an ip address of 127.0.0.2
[2013-06-10 02:52:46 -0400] ssd7: :). So, any ip address on the machine should be in the ohai data somewhere.
[2013-06-10 02:54:11 -0400] ssd7: Does `sudo ohai network` should show you all the interfaces and the addresses associated with them on the machine you run it on
[2013-06-10 02:54:19 -0400] ssd7: Might give some insight into why 127.0.0.2
[2013-06-10 02:54:31 -0400] ssd7: was chosen as the ipaddress
[2013-06-10 03:07:50 -0400] killfill: knife ssh '*:*' 'ls /' <--- that seems to be using the node's name to connect.
[2013-06-10 03:07:57 -0400] killfill: is it possible to make it use the IP?
[2013-06-10 03:08:06 -0400] killfill: WARNING: Failed to connect to  -- SocketError: getaddrinfo: nodename nor servname provided, or not known
[2013-06-10 03:08:12 -0400] killfill: now sure why is it failing.. :S
[2013-06-10 03:08:26 -0400] ssd7: killfill: You can make it use the IP by appending -a ipaddress
[2013-06-10 03:09:54 -0400] killfill: ssd7: wow.. completly misunderstoof the -a.. :)
[2013-06-10 03:10:00 -0400] killfill: ssd7: thanks!
[2013-06-10 03:11:04 -0400] invsblduck: so...making lwrp's notify seems to be tricky? using updated_by_last_action(), but seems like i can't subscribe the lwrp from a service resource
[2013-06-10 03:11:24 -0400] invsblduck: http://tickets.opscode.com/browse/CHEF-2404
[2013-06-10 03:12:30 -0400] invsblduck: is it true that using the old syntax for "notifies" works within lwrp? seems to be fixing the problem for some people.
[2013-06-10 03:12:43 -0400] invsblduck: eg., `notifies :run, resources(:service => "rsyslog"), :immediately'
[2013-06-10 03:14:17 -0400] invsblduck: any tips appreciated! :)
[2013-06-10 03:53:29 -0400] dyu: I'm using yum_repository. The repo gets added, but it doesn't save the GPG key.
[2013-06-10 04:35:30 -0400] invsblduck: ^^^ i guess use_inline_resources is probably the answer to my confusion.
[2013-06-10 04:41:21 -0400] stoked: sascha_d: thanks for the tip the other day
[2013-06-10 04:41:31 -0400] stoked: sascha_d: I ended up using chef.node_name = "vagrant-win2k8r2-#{ENV['USER']}"
[2013-06-10 04:41:52 -0400] sascha_d: @stoked you're welcome!
[2013-06-10 04:42:03 -0400] stoked: but now I'm trying to figure out how to package the validation.pem with the vagrant box
[2013-06-10 04:46:56 -0400] aruntomar: dyu: keys don't get added automatically, you need to add the keys using the provider
[2013-06-10 05:20:26 -0400] stoked: can I auto-assign roles to nodes based on their name?
[2013-06-10 05:50:38 -0400] dyu: aruntomar: that explains it. i used yum_key instead
[2013-06-10 05:51:14 -0400] aruntomar: dyu: ok
[2013-06-10 05:51:26 -0400] dyu: thanks!
[2013-06-10 05:53:09 -0400] koaps: heya all
[2013-06-10 06:53:27 -0400] stormerider: is http://erik.hollensbe.org/2012/02/24/abusing-the-chef-api-for-fun-and-profit/ still current for 11?
[2013-06-10 07:17:44 -0400] m4rcu5: jtimberman: you have mind reading capability? friday morning i was trying to do run the chef-client on a chef-server and it failed on the user and messed with my configuration, and now i see your pull requestst to fix it all :)
[2013-06-10 07:28:20 -0400] stormerider: m4rcu5: *grins*
[2013-06-10 07:36:34 -0400] m4rcu5: now the waiting begins, it needs to be pulled before i can install it with knife cookbook site install :)
[2013-06-10 07:52:30 -0400] koaps: does anyone know what the lb settings in chef-server 11 are for?
[2013-06-10 09:11:16 -0400] aszeszo: hi all, what are the orchestration systems cool kids use these days? i am thinking about alternatives to running ssh in for loop :)
[2013-06-10 09:12:52 -0400] admin0: aszeszo, i started using chef  so that i do not have to do a for loop anymoer
[2013-06-10 09:20:02 -0400] aszeszo: you can't use it to run arbitrary commands "right now" on multiple nodes, can you?
[2013-06-10 09:20:33 -0400] aszeszo: i am using chef-solo, so not sure if chef server/client setups offer that
[2013-06-10 09:22:36 -0400] admin0: you can use the bash cookbook and run arbitary commands
[2013-06-10 09:24:13 -0400] admin0: aszeszo, i am using both .. client-/server and solo too .. if bash is used, it can be used to run custom commands .. but ssh is more elegant for that .. unless the bash is for custom package install/configs etc
[2013-06-10 09:24:30 -0400] admin0: if you want to do df on all servers right now, i would still use for loop in ssh to get the df output
[2013-06-10 09:25:03 -0400] admin0: unless you want to do df on a regular basis, save the output somewhere, manage it .. then chef it
[2013-06-10 09:32:23 -0400] kisoku_: is there any way to call include_recipe safely from within a HWRP ?
[2013-06-10 09:41:05 -0400] bcave: hello.
[2013-06-10 09:43:18 -0400] bcave: I've just started using chef, wanting to use it to manage some ec2 resources and am following learnchef.opscode.com. I've just run into my first issue: dependency conflicts. the "chef" gem depends on json <= 1.7.7 and knife-ec2 depends on json 1.8.0. what are the guidelines for resolving conflicts like this in chef?
[2013-06-10 09:55:37 -0400] stormerider: aszeszo: i use knife ssh, but I'm using a chef server
[2013-06-10 10:35:47 -0400] dyu: is it possible to assign values from databags inside attributes/?
[2013-06-10 11:31:39 -0400] bcave: i have a question about chef layout, maybe have a gap in my understanding of various chef components...
[2013-06-10 11:32:13 -0400] bcave: I am writing a cookbook for a nodejs-based application, and then defining a role that references the recipe...
[2013-06-10 11:36:01 -0400] bcave: from what I can tell, there are 2 approaches to configure the system. A) install site cookbook for node. in the role, call recipe[node::install] before recipe[myapp:install] ... or B)  call recipe[myapp::install] from the role, and in my recipe call include_recipe "nodejs:install"
[2013-06-10 11:36:52 -0400] bcave: is there a big difference between the 2 approaches?
[2013-06-10 12:02:47 -0400] siezer: bcave or you could create a recipe that calls include_recipe on both recipes
[2013-06-10 12:03:37 -0400] siezer: bcave the difference is cookbooks have meaningful metadata with versioning constraints that can play with the dependency solvers in cookbook managers
[2013-06-10 12:04:40 -0400] siezer: and chef-server wont let you upload cookbook A if its metadata requires cookbook B, if cookbookB is not already installed
[2013-06-10 12:04:59 -0400] siezer: roles are just data and will let you get into odd states more easily
[2013-06-10 12:15:45 -0400] owain_p: what is the best way to debug a handler?
[2013-06-10 12:27:06 -0400] siezer: owain_p that depends on a lot of things...a little more info?
[2013-06-10 12:28:23 -0400] owain_p: @siezer I am trying to get irc snitch to work with an internal irc server , I get no messages, but can't see what is wrong or where I can look for failures?
[2013-06-10 12:31:21 -0400] siezer: seems that's a handler... I'd run chef-solo with tcpdump, then break out pry
[2013-06-10 12:31:34 -0400] siezer: chef-client -l debug
[2013-06-10 12:31:35 -0400] siezer: etc
[2013-06-10 12:32:11 -0400] owain_p: ok cool thanks for the hint
[2013-06-10 12:40:57 -0400] bcave: thanks for clarifying siezer. am using include_recipe in the default recipe for "myapplication" cookbook.
[2013-06-10 12:41:33 -0400] stormerider: owain_p: I'd suggest using the chef-irc_handler cookbook for that
[2013-06-10 12:42:11 -0400] stormerider: i've sent some code contributions to bflad, it's a very helpful cookbook. https://github.com/bflad/chef-irc_handler
[2013-06-10 12:43:09 -0400] bflad: I found the IRC notifications pretty useful. We kept an IRC channel just for the Chef failures
[2013-06-10 12:43:33 -0400] bflad: stormerider: thanks for submitting that
[2013-06-10 12:43:48 -0400] owain_p: @stormerider - I have tried that one too, but I don't get any output of any kind on a chef run failure
[2013-06-10 12:44:36 -0400] stormerider: bflad: np, thanks for your work on that. i have one for that purpose, too :)
[2013-06-10 12:46:25 -0400] stormerider: owain_p: hm. are you sure the credentials are right?
[2013-06-10 12:47:32 -0400] owain_p: @stormerider - no to be honest, I hoped that I would see an error of some sort to guide me to the right values.
[2013-06-10 12:48:05 -0400] owain_p: @stormerider - how do you write / debug a handler typically?
[2013-06-10 12:48:37 -0400] owain_p: @stormerider - as in go around the code test refactor loop with a handler
[2013-06-10 13:11:13 -0400] stormerider: i first configured an irc client with the settings, then configured them in the role for the chef-irc_handler cookbook. im not sure, tbh; that's part of why i went with that cookbook initially, as i had trouble trying to do things manually.
[2013-06-10 13:57:29 -0400] bcave: sorry guys, going to ask a newbie question here, not getting a response on #learnchef. im writing a recipe that needs authentication details, but i don't want to hard code the details into the recipe. the details are currently in my knife.rb - how can i reference these variables?
[2013-06-10 13:57:53 -0400] bcave: knife.rb: knife[:some_key] = "XYZ"
[2013-06-10 13:58:41 -0400] jsh: bcave: encrypted data bags might be what you're looking for. http://docs.opscode.com/essentials_data_bags_encrypt.html
[2013-06-10 13:58:48 -0400] gchristensen: huh... I'm not sure you can. I store secret keys in encrypted data bags, so they're changable and not hard coded in the recipes.
[2013-06-10 13:58:54 -0400] bcave: thanks jsh
[2013-06-10 13:59:00 -0400] bcave: and gchristensen
[2013-06-10 14:36:57 -0400] bcave: ok, so making some good progress, looks like that's exactly what I was looking for. question though. According to that doc jsh, "knife bootstrap" automatically copies the key over. is there a way to send the key over with knife ec2 by any chance?
[2013-06-10 14:38:48 -0400] knuckolls_: bcave i'm just catching the end of this conversation. are you curious as to how to bootstrap a machine with the knife ec2 plugin and have it register with the chef server?
[2013-06-10 14:39:01 -0400] bcave: knuckolls: i got all that working.
[2013-06-10 14:39:05 -0400] knuckolls_: kk
[2013-06-10 14:39:24 -0400] bcave: im working on the deployment aspect, and wanting to pull an artifact from S3. however, i don't want to hard-code my AWS authentication details into my recipe
[2013-06-10 14:39:38 -0400] knuckolls_: oh bcave these days you use the IAM roles
[2013-06-10 14:39:54 -0400] knuckolls_: and the fog gem will automatically use them
[2013-06-10 14:39:59 -0400] bcave: so im using an encrypted data bag. i'm wanted to get the key..
[2013-06-10 14:40:04 -0400] knuckolls_: if it sees that any IAM roles have been supplied to the node
[2013-06-10 14:40:12 -0400] bcave: hmm... IAM roles... is that using the AWS SDK ?
[2013-06-10 14:40:25 -0400] bcave: aahh.... node-based roles....
[2013-06-10 14:40:26 -0400] knuckolls_: have you worked with IAM yet?
[2013-06-10 14:40:39 -0400] knuckolls_: the roles do a lot of nice things like auto rotate
[2013-06-10 14:40:46 -0400] knuckolls_: and you don't have to worry about getting the creds on the box
[2013-06-10 14:40:47 -0400] bcave: we're using it for console access and some custom api clients
[2013-06-10 14:40:54 -0400] knuckolls_: kk so you're familiar with it
[2013-06-10 14:41:09 -0400] knuckolls_: iam roles simplify things significantly
[2013-06-10 14:41:24 -0400] bcave: that sounds great. yeah, am familiar, have a handful of policies applied to groups, although havent played around in the roles area
[2013-06-10 14:41:32 -0400] bcave: checking it out now...
[2013-06-10 14:41:49 -0400] bcave: I was taking this approach to getting an S3 object...
[2013-06-10 14:41:51 -0400] bcave: https://gist.github.com/peplin/470321
[2013-06-10 14:42:09 -0400] knuckolls_: bcave i wrote something similar at my last gig
[2013-06-10 14:42:22 -0400] bcave: I'm assuming that the better approach would be to use DavidAllison's mod>?
[2013-06-10 14:42:40 -0400] knuckolls_: i think that approach is fine
[2013-06-10 14:42:42 -0400] bcave: your last gig knuckolls?
[2013-06-10 14:43:03 -0400] knuckolls_: yeah i worked at a place called mosaik solutions where we did a lot of aws work
[2013-06-10 14:43:17 -0400] knuckolls_: anyway you can just adapt that provider to use fog's new built in stuff for the IAM roles
[2013-06-10 14:43:33 -0400] knuckolls_: so you don't have to supply creds in the code at all, it'll just notice it's on an AWS node and grab the correct credentials
[2013-06-10 14:43:42 -0400] knuckolls_: it's all abstracted away from you and it works exceptionally well
[2013-06-10 14:44:16 -0400] bcave: that streamlines the process
[2013-06-10 14:44:25 -0400] knuckolls_: yep! less to worry about
[2013-06-10 14:44:32 -0400] bcave: sounds effective, thanks for the heads up :)
[2013-06-10 14:44:39 -0400] knuckolls_: np good luck
[2013-06-10 14:45:55 -0400] bcave: thanks. started with chef this morning, and am loving it. 5 days building a nodejs AWS API client to provision what's taken me a few hours with chef. and easier for the rest of the devops to understand too.
[2013-06-10 14:46:22 -0400] siezer: you mean "the rest of your engineers" to understand
[2013-06-10 14:46:28 -0400] siezer: ;)
[2013-06-10 14:46:30 -0400] knuckolls_: ^^ +1
[2013-06-10 14:49:46 -0400] bcave: thanks
[2013-06-10 14:49:52 -0400] bcave: the rest of the engineers.
[2013-06-10 14:50:11 -0400] bcave: haha.
[2013-06-10 14:51:21 -0400] bigbigbang: hi there ! does someone know where is located the postgre database ?
[2013-06-10 14:52:12 -0400] bigbigbang: probably somewhere like /var/opt/chef-server/postgresql/data/base ... but then ?
[2013-06-10 14:52:56 -0400] bcave: is there a way to use the knife ec2 gem to specify a role to associate an instance to when creating it? i'm looking at the "ec2 server create --help"
[2013-06-10 14:53:33 -0400] bcave: and i provioned instances have "IAM Role: -"
[2013-06-10 14:54:33 -0400] rubbish: bcave: https://github.com/opscode/knife-ec2/pull/87
[2013-06-10 14:54:47 -0400] rubbish: makes me sad.
[2013-06-10 15:07:57 -0400] bcave: yes. me too now. why pull out the ebs_optimized option though?
[2013-06-10 15:08:06 -0400] bcave: s/option/default
[2013-06-10 15:08:51 -0400] admin0: hi.. using knife solo, i have to pass data_bag_path as  --data-bag-path /home/xxxx/data_bags ..  i also have that path in solo.rb as data_bag_path " " ... but when I cook something, it says failed to load that
[2013-06-10 15:08:58 -0400] admin0: how/where do I troubleshoot
[2013-06-10 15:09:42 -0400] admin0: if I do a knife solo data bag show authorized_keys admin --data-bag-path /home/admin/chef-repo/data_bags  , it shows up fine
[2013-06-10 15:13:26 -0400] bcave: yet another pull request silently joins the others on that one rubbish ....
[2013-06-10 15:33:44 -0400] knuckolls_: bcave, luckily it's not hard to just maintain your own repo that has the PRs merged that you find useful :)
[2013-06-10 15:54:15 -0400] bcave: yep. fork it.
[2013-06-10 15:54:41 -0400] bcave: will do soon :p but im trying to fix my knife. playing around, i seem to have broken it :(
[2013-06-10 15:55:01 -0400] bcave: is there a knife cache locally? i think it's something to do with git.
[2013-06-10 16:08:14 -0400] phoellig: Anyone familiar with knife-azure? I'm able to use it to provision linux VMs but not windows ones.
[2013-06-10 16:09:47 -0400] awgross: that made me chuckle
[2013-06-10 16:10:52 -0400] phoellig: It's a rather amusing point that getting linux working on the microsoft platform is easier than getting windows working.
[2013-06-10 16:19:19 -0400] zeroXten2: am i misreading http://docs.opscode.com/essentials_roles.html - seems like env_run_list can only specify one role/recipe per environment?
[2013-06-10 16:19:50 -0400] gleam: it's an array
[2013-06-10 16:20:08 -0400] gleam: oh, nevermind
[2013-06-10 16:24:30 -0400] zeroXten2: oh nevermind?
[2013-06-10 16:24:54 -0400] zeroXten2: it certainly used to be an array
[2013-06-10 16:30:09 -0400] gkarekinian: What makes you think it's one role/recipe per environment?
[2013-06-10 16:36:00 -0400] thom: think that's a bug in the doc
[2013-06-10 16:36:13 -0400] coderanger: Yeah
[2013-06-10 16:36:24 -0400] coderanger: I think our writer might have been too literal with the example
[2013-06-10 16:36:25 -0400] thom: well, given that i have env_run_lists with extensive arrays of recipes, i know it is
[2013-06-10 16:37:09 -0400] coderanger: I just mentioned it to him, thanks for the report :)
[2013-06-10 16:38:28 -0400] gkarekinian: Oh, I've just seen the relevant part, yeah
[2013-06-10 16:38:57 -0400] gkarekinian: He probably got confused between the environment and the recipe/roles
[2013-06-10 16:38:59 -0400] gkarekinian: "A list of environments, each specifying a recipe or a role that will be applied to that environment. Each environment in the list may only have a single recipe or role assigned to it."
[2013-06-10 16:40:24 -0400] coderanger: Docs rebuilding now, should be fixed in prod in a few minutes :)
[2013-06-10 16:41:01 -0400] gkarekinian: Hooray
[2013-06-10 16:41:20 -0400] runfromnowhere: LOL I know I've asked about it a few times, but it was during somewhat off hours - anyone have any insight into how the "Ifconfig" provider is supposed to function?
[2013-06-10 16:42:17 -0400] gkarekinian: By the way it's not a "list of environments", it's a hash with environments as keys and an array (run_list) as value
[2013-06-10 17:03:17 -0400] bcave: knuckolls: i don't suppose you still have the s3 client library that you used? been battling away for hours to retrieve a file from s3
[2013-06-10 17:04:25 -0400] knuckolls: bcave, i do not. if i had any advice i'd make your code work by hand on an aws node with an iam role and fog, then adapt that into chef
[2013-06-10 17:04:56 -0400] knuckolls: take away variables and cognitive load
[2013-06-10 17:05:36 -0400] bcave: yeah, i've done that.
[2013-06-10 17:07:47 -0400] bcave: well i have the IAM role set up, haven't done anything with fog yet. that might be where im falling short. was trying to use an existing s3_file library, but then had to preinstall the aws-sdk on the client. got that right, but then the "require aws-sdk" failed...
[2013-06-10 17:08:21 -0400] knuckolls: bcave: the aws-sdk gem, and the fog gem have system library dependencies
[2013-06-10 17:08:29 -0400] knuckolls: because i think they both rely on the nokogiri gem
[2013-06-10 17:08:44 -0400] knuckolls: which relies on libxml2-dev and libxslt-dev
[2013-06-10 17:08:46 -0400] knuckolls: at least on ubuntu
[2013-06-10 17:08:53 -0400] knuckolls: those libs are also off the cuff, but i'm close.
[2013-06-10 17:09:14 -0400] knuckolls: the github.com/opscode-cookbooks/aws really should have s3 providers but it doesn't
[2013-06-10 17:09:24 -0400] knuckolls: that cookbook uses the right_aws gem
[2013-06-10 17:09:29 -0400] knuckolls: which doesn't have so many dependencies
[2013-06-10 17:09:48 -0400] knuckolls: but in my experience, I wouldn't want to use right_aws again. fog and the aws-sdk gems have gotten it right. I'm cool with the dependencies.
[2013-06-10 17:10:03 -0400] knuckolls: this opinion is a bit antiquated though, right_aws may have improved.
[2013-06-10 17:11:43 -0400] knuckolls: i spoke a little bit about all of this on last week's food fight show about aws and chef. there may be useful tidbits of context in there.
[2013-06-10 17:14:40 -0400] scalp42: anything to know related to having an EC2 Chef server in a region and nodes in different regions ?
[2013-06-10 17:14:57 -0400] scalp42: if anybody went through this setup has advices, I'll take them ;)
[2013-06-10 17:17:31 -0400] invsblduck: hi there, have a lwrp that templates 2 files; a service is subscribed to the lwrp. even when debug shows 'content has not changed' for both templates, the lwrp sends a restart action... any ideas why?
[2013-06-10 17:20:20 -0400] invsblduck: one of my template resources is assigned to a variable (compile phase) that does `new_resource.updated_by_last_action(t.updated_by_last_action?)', as in the cron.d example from the docs page.
[2013-06-10 17:27:52 -0400] revamp: I'm running into a weird scenario when doing an include_attribute within a begin-rescue: https://gist.github.com/anonymous/d282a3e0de0e7106f187
[2013-06-10 17:28:39 -0400] revamp: Essentially, the attribute file it's supposed to load does not exist (and I know it doesn't exist), but instead of erroring out...it loads a similar naming attribute file (fakeDevConfig and realDevConfig are the attribute file names)
[2013-06-10 17:28:58 -0400] revamp: is this a bug?
[2013-06-10 17:37:38 -0400] shope: Does anyone know of a simple Chef client written for Windows (for example, in C#) that doesn't require a full Chef install?  Would like to read a databag, and it's a bit of work to format/encrypt the http request.
[2013-06-10 17:52:51 -0400] revamp: I'm running into a weird scenario when doing an include_attribute within a begin-rescue: https://gist.github.com/anonymous/d282a3e0de0e7106f187
[2013-06-10 17:53:01 -0400] revamp:  Essentially, the attribute file it's supposed to load does not exist (and I know it doesn't exist), but instead of erroring out...it loads a similar naming attribute file (fakeDevConfig and realDevConfig are the attribute file names). Is this a bug?
[2013-06-10 17:54:28 -0400] siezer: revamp all attributes files from a cookbook are loaded from a cookbook, just like libraries, resources, and providers
[2013-06-10 17:54:37 -0400] siezer: you can't selectively load them like that
[2013-06-10 17:55:38 -0400] siezer: include_attribtues exists because cookbooks are loaded in alphabetical ordering, and sometimes you need to muck with the ordering
[2013-06-10 17:56:35 -0400] siezer: for example, in an attributes file, you could say default['cookbookA']['somekey'] = "#{node['cookbookB'][some_otherkey]}/blah/blah"
[2013-06-10 17:57:16 -0400] revamp: ahh that makes sense
[2013-06-10 17:57:27 -0400] siezer: in that case, node['cookbookB'] would not be loaded yet, and the attribute set in cookbookA would not be what you want. you'd fix it with include_attributes
[2013-06-10 17:57:36 -0400] revamp: that explains why it's being included but  not why it doesn't cause on error on the second include
[2013-06-10 17:57:52 -0400] siezer: yea I'd expect an error
[2013-06-10 17:58:05 -0400] siezer: lack-of-error may be a bug, but I'd have to ask
[2013-06-10 18:57:26 -0400] isotope: is there a way to search in a recipe and only return specific attributes?
[2013-06-10 18:58:08 -0400] rpcesar: im trying to create my first init.d template for a service in chef. im looking at some other cookbooks, and I keep seeing a reference in these templates to a variable called "@provider", but googles not revealing to me what this is
[2013-06-10 18:58:50 -0400] rpcesar: can anyone tell me what that is, or provide some sort of link or key terms I can use to bring up some information on the topic, I am throughly confused
[2013-06-10 18:59:56 -0400] isotope: @providor is the result of a search
[2013-06-10 18:59:57 -0400] isotope: usually
[2013-06-10 19:00:50 -0400] rpcesar: meh, i should have used some common sense here, it seems to just be some sort of community standard name for a variable being passed to the template file , /doh
[2013-06-10 19:01:18 -0400] rpcesar: doing a find over one of the cookbooks reveals it being passed in as "variables" to the template, everyone just seems to want to use that convention
[2013-06-10 19:02:13 -0400] miah: this is standard ruby. the erb template expects a hash of variables to be passed to it for replacement.
[2013-06-10 19:03:04 -0400] miah: we define those variables as object instance variables (@foo)
[2013-06-10 19:03:04 -0400] miah: http://www.tutorialspoint.com/ruby/ruby_variables.htm
[2013-06-10 19:03:45 -0400] Otterley: jtimberman, why did you bump the version of the apt cookbook to 2.0.0?
[2013-06-10 19:03:52 -0400] Otterley: AFAICT there's no API change that justifies it
[2013-06-10 19:09:51 -0400] Otterley: rpcesar, see http://docs.opscode.com/essentials_cookbook_templates.html
[2013-06-10 19:28:27 -0400] LN: Hi, I am collecting chef recipe errors due to the recipe not being idempotent ...
[2013-06-10 19:29:10 -0400] LN: any suggestions on common on popular such (idempotence) related errors?
[2013-06-10 19:38:07 -0400] zackf: Is there a way to have a shared role across all ORGS in private chef?
[2013-06-10 19:42:57 -0400] jtimberman: Otterley: requirement for Chef 11.
[2013-06-10 19:43:05 -0400] Otterley: I don't follow
[2013-06-10 19:43:23 -0400] jtimberman: the apt_repository provider has use_inline_resources
[2013-06-10 19:43:29 -0400] jtimberman: which is only available in chef 11.
[2013-06-10 19:43:42 -0400] jtimberman: version numbers are also pretty inexpensive :)
[2013-06-10 19:44:08 -0400] Otterley: but isn't semantic versioning supposed to relate to the dependent cookbooks as opposed to the chef client version?
[2013-06-10 19:44:21 -0400] jtimberman: it's not strictly semver.
[2013-06-10 19:44:31 -0400] Otterley: that much is clear :P
[2013-06-10 19:45:11 -0400] Otterley: the problem is you just forced every cookbook that depended on apt ~> 1.x to be updated
[2013-06-10 19:45:27 -0400] Otterley: even though there's no API incompatibility introduced by this new version
[2013-06-10 19:47:06 -0400] jtimberman: or, you don't *have* to update.
[2013-06-10 19:47:32 -0400] Otterley: it's a pretty critical bugfix.
[2013-06-10 19:48:14 -0400] Otterley: the damage is done, but please consider carefully before updating major version #s
[2013-06-10 19:49:28 -0400] jtimberman: I do.
[2013-06-10 19:49:37 -0400] Otterley: and you considered this outcome?
[2013-06-10 19:49:54 -0400] jtimberman: I cannot possibly predict every outcome of every nuance.
[2013-06-10 19:50:17 -0400] Otterley: this is a fairly well known outcome of upgrading major version numbers.
[2013-06-10 19:50:22 -0400] jtimberman: Is it?
[2013-06-10 19:50:29 -0400] jtimberman: If people are using Chef 10
[2013-06-10 19:50:32 -0400] jtimberman: they'd be pretty pissed.
[2013-06-10 19:50:45 -0400] jtimberman: I get heat when I *don't* consider Chef 10 users.
[2013-06-10 19:50:56 -0400] jtimberman: I kind of can't win here.
[2013-06-10 19:51:15 -0400] siezer: we still love you. don't fret
[2013-06-10 19:51:22 -0400] timsmith: major bump was the best for us Chef 10 users
[2013-06-10 19:51:26 -0400] knuckolls_: +1
[2013-06-10 19:51:28 -0400] awgross: 2.0 seems like a valid sem ver bump
[2013-06-10 19:51:29 -0400] log1kal: +2
[2013-06-10 19:51:34 -0400] timsmith: makes you double check what changed
[2013-06-10 19:51:38 -0400] awgross: backwards incompatible APi changes
[2013-06-10 19:51:48 -0400] awgross: aka, will not load
[2013-06-10 19:52:02 -0400] Otterley: alright, fair enough
[2013-06-10 20:02:32 -0400] btm: @opscode cookbook code review: join: https://plus.google.com/hangouts/_/b95c596082dcf09c3e63a567a6f4bfd7ca4bea2f, watch: http://youtu.be/YIW7ClDK4Ps
[2013-06-10 20:04:24 -0400] awgross: anyone here tango'd with writing Vagrant Plugins before? Trying to figure out the best way to get access to the :chef_server_url set in the vagrantfile, having a little trouble finding where I can access it from
[2013-06-10 20:04:32 -0400] Otterley: is anyone aware of a way to put erchef in debug mode?
[2013-06-10 20:04:45 -0400] Otterley: we're trying to trace down the root cause of CHEF-3921
[2013-06-10 20:05:01 -0400] Otterley: it's hit us like a ton of bricks, our erchef server is completely hosed
[2013-06-10 20:06:11 -0400] Otterley: spheromak, did you ever get to the root of it?
[2013-06-10 20:07:04 -0400] spheromak: no need to take the time to contrive the issue so they can repeat it
[2013-06-10 20:07:25 -0400] spheromak: it should be when a metadata dependent cook is there but not at the version requested
[2013-06-10 20:07:38 -0400] spheromak: I was able to upload it with ridley *but old ridley*
[2013-06-10 20:07:53 -0400] spheromak: if you use knife it shouldn't be able to happen.  :)
[2013-06-10 20:08:03 -0400] Otterley: to my knowledge we only use knife
[2013-06-10 20:08:07 -0400] spheromak: possibly can setup the scenario by deleting some versions
[2013-06-10 20:08:23 -0400] Otterley: what I'd like to know is exactly which cookbook erchef is unable to find
[2013-06-10 20:08:28 -0400] spheromak: cook A  depends B ~>1.1.0  but only 1.2.0 exists
[2013-06-10 20:08:45 -0400] spheromak: I tracked that down through deduction in my environment
[2013-06-10 20:08:46 -0400] Otterley: that way I can trace down the errant cookbook
[2013-06-10 20:08:58 -0400] spheromak: reducing the run list
[2013-06-10 20:09:06 -0400] Otterley: ugh, that's going to be a nontrivial exercise in a production chef environment
[2013-06-10 20:09:13 -0400] spheromak: :/
[2013-06-10 20:09:16 -0400] Otterley: we have hundreds of (cookbook, version) tuples
[2013-06-10 20:09:19 -0400] spheromak: make a new server in a vm
[2013-06-10 20:09:28 -0400] spheromak: and try to re-create in isolation
[2013-06-10 20:10:25 -0400] Otterley: I feel like that's way too much effort on my part to spend chasing down this issue
[2013-06-10 20:10:40 -0400] Otterley: simply because erchef has shitty logging
[2013-06-10 20:10:50 -0400] knuckolls_: awgross, i have gone down that road and flat out given up
[2013-06-10 20:11:04 -0400] spheromak: Otterley,  you can turn up the logs on erchef
[2013-06-10 20:11:12 -0400] spheromak: its bookshelf
[2013-06-10 20:11:17 -0400] spheromak: that was blowing up IIRC
[2013-06-10 20:11:19 -0400] knuckolls_: i think the solution is in a vagrant plugin to monkey patch a variable into the chef_server provider's scope
[2013-06-10 20:11:37 -0400] Otterley: spheromak, which variable? http://docs.opscode.com/config_rb_chef_server.html
[2013-06-10 20:11:45 -0400] spheromak: I mean at this point I reported it a long time ago and tried to give all the info I could to reproduce, but no one could. Others are getting bit, but opscode can't reproduce
[2013-06-10 20:12:14 -0400] awgross: knuckolls: I don't want to put one in to their scope, I just want the url so I can parse out the host/port.  Berkshelf does it, but its a mess navigating between vagrant-berkshelf and berkshelf gem to figure out how
[2013-06-10 20:12:25 -0400] knuckolls_: oh i understand.
[2013-06-10 20:12:34 -0400] knuckolls_: the exact same problem is the one i wanted to solve
[2013-06-10 20:12:46 -0400] knuckolls_: and i threw in the towel, bigger fish to fry
[2013-06-10 20:12:56 -0400] awgross: haha
[2013-06-10 20:13:11 -0400] patcon: anyone know what's happening here? https://travis-ci.org/patcon/vagrant-prototyping/builds/7959967#L2831
[2013-06-10 20:13:11 -0400] knuckolls_: you used to be able to load rubygems in vagrantfiles
[2013-06-10 20:13:19 -0400] awgross: well, would be really silly to have a second config option that just repeats the first
[2013-06-10 20:13:38 -0400] patcon: seems Chef::Rest in remote_file lwrp is saying 404 when I know that's it just a 302 redirect.
[2013-06-10 20:13:39 -0400] knuckolls_: so i just loaded up chef, had it load the ~/.chef/knife.rb and then i just pulled out the stuff i needed for the provider
[2013-06-10 20:13:43 -0400] miah: sup
[2013-06-10 20:13:49 -0400] patcon: Works fine on centos6.4, but not 6.3
[2013-06-10 20:14:02 -0400] knuckolls_: now all of vagrant's gems are in a sandbox and you can only install "plugins"
[2013-06-10 20:14:26 -0400] awgross: knuckolls_: hmm, not a great workaround, my whole goal is to not have to use any knife stuff
[2013-06-10 20:14:31 -0400] patcon: `curl -v http://download.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-6`
[2013-06-10 20:15:10 -0400] awgross: well, its somewhere in here, ill find it, time to drop some debuggers in my vagrant gem
[2013-06-10 20:15:34 -0400] knuckolls_: awgross: godspeed. gist it when you're done? :)
[2013-06-10 20:16:05 -0400] knuckolls_: awgross: https://github.com/RiotGames/vagrant-berkshelf/issues/14 context
[2013-06-10 20:17:29 -0400] awgross: heh, im the opposite direction, Berkshelf is able to get the chef server url if its defined in the Vagrantfile, thats what I am having trouble reading
[2013-06-10 20:17:33 -0400] awgross: ill still keep poking
[2013-06-10 20:30:28 -0400] awgross: provisioner.config.chef_server_url
[2013-06-10 20:32:19 -0400] knuckolls_: and you pass that to berkshelf?
[2013-06-10 20:32:52 -0400] awgross: nah, thats what I needed
[2013-06-10 20:32:59 -0400] awgross: its what berkshelf uses when it gets the url
[2013-06-10 20:33:22 -0400] kallistec: spheromak && Otterley -- I asked Seth Falcon to update the ticket, as we have made some progress on the https://tickets.opscode.com/browse/CHEF-3921
[2013-06-10 20:33:23 -0400] awgross: berkshelfs problem is you have to define that and a url in the berks.config.  I just want the url
[2013-06-10 20:33:36 -0400] awgross: i dont care how it gets there
[2013-06-10 20:34:08 -0400] knuckolls_: awgross ah
[2013-06-10 20:34:16 -0400] Otterley: @kallistec, thanks - is there a way I can get additional debug logs from erchef/bookshelf so that I can identify which (cookbook, version) tuple it's spinning on?
[2013-06-10 20:35:02 -0400] justizin: anyone familiar with riotgames' rbenv-cookbook? having a wierd issue installing bundler into an rbenv detailed @ https://github.com/RiotGames/rbenv-cookbook/issues/37
[2013-06-10 20:35:09 -0400] Otterley: justizin, we use it
[2013-06-10 20:35:17 -0400] Otterley: oh, rbenv, nevermind
[2013-06-10 20:35:21 -0400] Otterley: I wish we were :D
[2013-06-10 20:35:33 -0400] justizin: when i installed bundler via rbenv_gem, I get no shim, though if I install it with gem after chef builds the node, I do.
[2013-06-10 20:35:45 -0400] justizin: also https://github.com/RiotGames/rbenv-cookbook/issues/36 is wierd ;)
[2013-06-10 20:36:06 -0400] Otterley: rbenv requires you run rehash after installing a new gem to set up the proper symlink
[2013-06-10 20:36:40 -0400] Otterley: if the cookbook isn't doing that, that's a bug
[2013-06-10 20:37:07 -0400] kallistec: Otterley: I don't know for sure, I believe enhanced debug logging in the solver is included with the patch, but I don't think there's anything built in to the current release
[2013-06-10 20:37:09 -0400] justizin: it has nothing to do with rehash..
[2013-06-10 20:37:40 -0400] justizin: i can say that definitively.. i'm not even sure the latest rbenv hasn't integrated the rbenv-rehash plugin, because when i 'gem install bundler' i get a shim in /opt/rbenv/shims/ without a rehash..
[2013-06-10 20:37:59 -0400] justizin: and if there were no shim, there would still be like /opt/rbenv/versions/$BLAH/bin/bundle, and there is not
[2013-06-10 20:38:00 -0400] spheromak: kallistec, Good news.  Wish I had seen that reproduction was a problem back when I reported I had a few days where those test envs were up :\
[2013-06-10 20:38:02 -0400] Otterley: just brainstorming with you :)
[2013-06-10 20:39:10 -0400] Otterley: kallistec, crap.  this means I have to guess. :(
[2013-06-10 20:44:28 -0400] justizin: Otterley: appreciate, just letting you know what i've walked through so far. :)
[2013-06-10 20:44:36 -0400] justizin: i was hoping it would be rehash last wk ;d
[2013-06-10 20:46:21 -0400] justizin: there is also fnichol's rbenv cookbook, but it uses a whole diff approach and i kind of think i like this on ebetter..
[2013-06-10 20:49:16 -0400] larpede: Hi Im trying to deploy a rails app with chef using the deploy_revision ressource
[2013-06-10 20:49:35 -0400] larpede: and I have some problems getting it to do what I want
[2013-06-10 20:49:54 -0400] Otterley: kallistec, added a comment as well
[2013-06-10 20:50:03 -0400] larpede: my problem is that my rails app loads an application.yml file during start up
[2013-06-10 20:50:47 -0400] larpede: that file is a template  in chef and I would like my rails app to restart when the template changes
[2013-06-10 20:51:41 -0400] larpede: right now my deploy_revision looks like
[2013-06-10 20:53:57 -0400] larpede: well that would be too much copy and paste but my template code now resides in the before_mirgration part of the ressource which means it only gets run if the entire app gets updated with a new revision
[2013-06-10 20:54:35 -0400] larpede: of cause I can force_deploy but is that really the way to do this ?
[2013-06-10 20:55:11 -0400] kamikazemicrowav: Possibly dumb question, but is it possible to access the resource collection from inside an LWRP? I get a 'Cannot find a resource for resources' exception when trying to use the "resources" method inside my provider
[2013-06-10 20:58:52 -0400] HAPPYFUNBRO: hey. how would I parameterize something like a file path?
[2013-06-10 20:59:23 -0400] Otterley: file node["cookbook
[2013-06-10 20:59:27 -0400] philsturgeon: whats happening here: http://d.pr/i/KNDV
[2013-06-10 20:59:28 -0400] Otterley: file node["cookbook"]["path"] do ...
[2013-06-10 20:59:51 -0400] HAPPYFUNBRO: Otterley tutorial link>
[2013-06-10 20:59:53 -0400] HAPPYFUNBRO: ?
[2013-06-10 21:00:03 -0400] Otterley: HAPPYFUNBRO, you should read all the Chef documentation first
[2013-06-10 21:00:07 -0400] philsturgeon: logs above it show this http://d.pr/i/RmoE
[2013-06-10 21:00:41 -0400] HAPPYFUNBRO: Otterley I am reading the documentation
[2013-06-10 21:00:53 -0400] Otterley: well, when you finish reading it. :)
[2013-06-10 21:01:06 -0400] HAPPYFUNBRO: ok
[2013-06-10 21:01:10 -0400] HAPPYFUNBRO: that's not very helpful
[2013-06-10 21:01:16 -0400] HAPPYFUNBRO: there is a TON of documentation
[2013-06-10 21:01:23 -0400] Otterley: and it's there for a reason!
[2013-06-10 21:01:25 -0400] miah: welcome to systems administration
[2013-06-10 21:01:47 -0400] miah: being able to parse and absorb information quickly is one of the skills
[2013-06-10 21:02:02 -0400] Otterley: I'm not sure speed is a factor, but comprehension is
[2013-06-10 21:02:18 -0400] miah: indeeed
[2013-06-10 21:02:22 -0400] HAPPYFUNBRO: well, this surehas been a fruitful conversation
[2013-06-10 21:02:25 -0400] miah: =)
[2013-06-10 21:02:40 -0400] philsturgeon: anyone?
[2013-06-10 21:02:44 -0400] miah: there are plenty of examples in the docs on how to use the file resource
[2013-06-10 21:02:47 -0400] Otterley: HAPPYFUNBRO, sorry to disappoint you, but we don't have the bandwidth to delve into this with you because it's so essential to the basics of Chef
[2013-06-10 21:02:59 -0400] miah: as well as attributes
[2013-06-10 21:03:20 -0400] Otterley: there is also lots of Chef training available from Opscode and others
[2013-06-10 21:03:37 -0400] HAPPYFUNBRO: are you to friends?
[2013-06-10 21:03:40 -0400] HAPPYFUNBRO: are you married?
[2013-06-10 21:03:43 -0400] HAPPYFUNBRO: do you live together?
[2013-06-10 21:03:45 -0400] HAPPYFUNBRO: you should!
[2013-06-10 21:03:52 -0400] miah: philsturgeon: have you uploaded your cookbooks?
[2013-06-10 21:04:06 -0400] philsturgeon: miah:  yup knife cookbook upload -a
[2013-06-10 21:04:24 -0400] miah: can you verify with 'knife cookbook list' or something?
[2013-06-10 21:04:24 -0400] philsturgeon: miah: the only different could be that recently I changed a version number from 0.1.0 to 0.2.0
[2013-06-10 21:04:47 -0400] philsturgeon: yeah http://d.pr/i/Kp62
[2013-06-10 21:04:49 -0400] philsturgeon: miah:
[2013-06-10 21:04:59 -0400] miah: looks like some error with the 'kapture' cookbook
[2013-06-10 21:05:24 -0400] philsturgeon: miah: i changed up kapture from 0.1.0 to 0.2.0. deleted both of them, tried updating again
[2013-06-10 21:06:52 -0400] HAPPYFUNBRO: yeeesss. the chef documentation isn't great
[2013-06-10 21:07:35 -0400] miah: philsturgeon: did you upload it? also you might have a cookbook that is depending on version 0.0.0 of it and not '>= 0.0.0'
[2013-06-10 21:08:30 -0400] michaelh: why do I feel like if I set up all our stuff with chef I'll have walked into a deadly trap? :o
[2013-06-10 21:08:42 -0400] Otterley: michaelh, it's not an uncommon feeling :(
[2013-06-10 21:08:55 -0400] Otterley: chef is very much a work in progress
[2013-06-10 21:09:04 -0400] justizin: michaelh: depends on what decisions you make..
[2013-06-10 21:09:09 -0400] miah: confidence comes with experience
[2013-06-10 21:09:10 -0400] philsturgeon: miah: nothing depends on kapture
[2013-06-10 21:09:23 -0400] miah: philsturgeon: something does, its a unmet dependency
[2013-06-10 21:09:45 -0400] miah: "unsatisfyable runlist item kapture >= 0.0.0"
[2013-06-10 21:09:46 -0400] philsturgeon: miah: kapture is the name of the application, everything else is downloaded "memcache
[2013-06-10 21:09:51 -0400] philsturgeon: and stuff
[2013-06-10 21:09:59 -0400] philsturgeon: there is definitely nothing requiring kapture
[2013-06-10 21:10:02 -0400] miah: maybe you've got it specified in the runlist somethere
[2013-06-10 21:10:04 -0400] miah: somewhere
[2013-06-10 21:10:42 -0400] philsturgeon: miah: definitely not
[2013-06-10 21:10:56 -0400] miah: then why is it in the runlist?
[2013-06-10 21:11:09 -0400] miah: your error is showing exactly that
[2013-06-10 21:11:39 -0400] philsturgeon: miah: kapture has multiple recipies for each different type of server. my node has kapture::foo mentioned, but nothing depends on kapture
[2013-06-10 21:12:07 -0400] Otterley: kallistec, I think I found something
[2013-06-10 21:12:08 -0400] philsturgeon: I've had this running for a year, just changed some cookbooks around and I have a weird circular dependency where the missing cookbook list is empty
[2013-06-10 21:12:37 -0400] Otterley: kallistec, have you set up a situation where you have two cookbooks in a run_list whose metadata declares a dependency on two mutually exclusive cookbooks?
[2013-06-10 21:12:37 -0400] kamikazemicrowav: so I can see in other cookbooks where people create/use resources inside their LWRP's but they in all of the cases the resources can "stand on their own". For example, they are files that unique to just that instance of a resource. But I'm not sure how to handle the case where I need to adjust a "global" configuration wthout overwriting changes a previous LWRP may have created. I imagine there has to be a way to get the resource
[2013-06-10 21:12:37 -0400] kamikazemicrowav: collection inside an LWRP if I can add resources to it
[2013-06-10 21:12:55 -0400] Otterley: kallistec, i.e., depends          "apt", "~> 1.9.0" and depends          "apt", "~> 2.0.0"
[2013-06-10 21:14:05 -0400] philsturgeon: miah:
[2013-06-10 21:14:10 -0400] philsturgeon: "I've had this running for a year, just changed some cookbooks around and I have a weird circular dependency where the missing cookbook list is empty"
[2013-06-10 21:14:33 -0400] kallistec: philsturgeon: I think your error is saying that you have conflicting requirements on the runit version
[2013-06-10 21:15:00 -0400] kallistec: Otterley: I'm not on the team looking at the issue, I'll ping them
[2013-06-10 21:15:00 -0400] scalp42: any input on replacing a Chef server when nodes have already been configured ?
[2013-06-10 21:15:19 -0400] Otterley: scalp42, there is a great export/import knife plugin
[2013-06-10 21:15:26 -0400] miah: kallistec: oh. good point.
[2013-06-10 21:15:49 -0400] philsturgeon: kallistec: yeah graphite seems to want < 0.16 and I think something else wants 1.0.0
[2013-06-10 21:16:25 -0400] scalp42: Otterley: are you talking about knife backup ? I'm looking to move our Chef server to a different region
[2013-06-10 21:16:35 -0400] scalp42: *knife server backup or something like this
[2013-06-10 21:16:37 -0400] kallistec: philsturgeon: you have a handful of cookbooks that want either ~> 1.0.0 or >= 1.0.0
[2013-06-10 21:17:02 -0400] Otterley: scalp42, https://github.com/mdxp/knife-backup
[2013-06-10 21:17:43 -0400] philsturgeon: kallistec: ha yeah lots http://d.pr/i/suSn
[2013-06-10 21:17:46 -0400] scalp42: Otterley, right but things will break especially because IPs are wrong for the nodes etc
[2013-06-10 21:20:42 -0400] miah: this is why 'node' data should be considered worthless
[2013-06-10 21:20:48 -0400] miah: and if your node data has value, you're doing it wrong.
[2013-06-10 21:21:07 -0400] miah: you should be able to rebuild any node from scratch without requiring existing node data
[2013-06-10 21:22:41 -0400] gzc: amen
[2013-06-10 21:24:39 -0400] miah: certainly feel free to store state in your node, but dont _require_ it. if its not there you should be able to regenerate it. the term to think about here is 'memoize'
[2013-06-10 21:26:26 -0400] Otterley: miah, I won't say that entirely
[2013-06-10 21:26:47 -0400] miah: i will.
[2013-06-10 21:26:48 -0400] Otterley: we gather info from existing nodes to do things like build icinga configurations and maintain ssh authorized_keys files
[2013-06-10 21:27:42 -0400] Otterley: destroying nodes completely is not always the answer; there may be another way here, like performing substitutions on the exported node data before re-importing it
[2013-06-10 21:30:34 -0400] miah: Otterley: lets resume this in a bit, in a meeting.
[2013-06-10 21:30:43 -0400] Otterley: kk
[2013-06-10 21:32:38 -0400] kamikazemicrowav: Hate being that guy, but did anyone have any advice on my earlier LWRP questions? I've been beating my head over this for awhile now and am unfortunantly not making much progress. I think there is probably a simple soliution but im just missing something
[2013-06-10 21:33:59 -0400] awgross: about to try monkey patching the validate parameter out of the chef_client provisioner in Vagrant, down this path lies madness
[2013-06-10 21:34:49 -0400] Otterley: awgross, we monkey patch Vagrant via our own inhouse plugin
[2013-06-10 21:35:00 -0400] awgross: monkeypatching is a sin
[2013-06-10 21:35:04 -0400] awgross: and ruby seems to love sinners
[2013-06-10 21:35:34 -0400] Otterley: I'm not Ruby apologist, but IMHO the fault lies more with the community than the language
[2013-06-10 21:35:39 -0400] awgross: true
[2013-06-10 21:35:49 -0400] awgross: python lets you do the same thing, but its pretty much never an issue
[2013-06-10 21:35:51 -0400] Otterley: people write inscrutable code
[2013-06-10 21:36:05 -0400] Otterley: and don't document their APIs
[2013-06-10 21:36:08 -0400] justizin: monkeypatching is sacred!
[2013-06-10 21:37:26 -0400] Otterley: monkeypatching is something
[2013-06-10 21:37:52 -0400] Otterley: awgross, maybe fork the provider instead of monkey patching it?
[2013-06-10 21:38:05 -0400] failshell: monkeypatching gems with a chef template. now that's real monkey patching!
[2013-06-10 21:39:18 -0400] awgross: Otterley: is the Chef_client provider built in to vagrant
[2013-06-10 21:39:27 -0400] Otterley: awgross, not sure
[2013-06-10 21:39:34 -0400] awgross: Otterley: i need it to not be such a jerk about having loosely defined chef server urls and client keys
[2013-06-10 21:40:27 -0400] Otterley: awgross, the Internets say "yes" http://docs.vagrantup.com/v2/provisioning/chef_client.html
[2013-06-10 21:41:09 -0400] awgross: ?
[2013-06-10 21:41:33 -0400] awgross: not 100% sure how that helps
[2013-06-10 21:42:39 -0400] asharp: getting an error from yum 'no more mirrors to try'. the error is coming from the 'epel' repository, which is unnecessary. how can i tell the package resource to ignore this repository?
[2013-06-10 21:48:36 -0400] Otterley: awgross, you asked whether the provisioner was builtin to Vagrant
[2013-06-10 21:49:08 -0400] awgross: oh sorry, miscommunication.  I know it is built in
[2013-06-10 21:50:16 -0400] awgross: now i need to figure out how to patch it
[2013-06-10 21:58:56 -0400] Otterley: asharp, ignore_failure true ?
[2013-06-10 22:02:57 -0400] surge_: What would be the best way to query aws for a certain tag's value? Does the AWS cookbook provide resources for that? I feel like it should be able to except I only see methods to add, update, and remove.
[2013-06-10 22:14:12 -0400] rpcesar: the of-used pattern for recipies seems to reference a symbol that appears to be self named to represent a node. ie, for mongodb you would see it referencing node params like node[:mongodb]['some value'], but :mongodb in that case appears to not be defined anywhere by doing a find/replace over the packages. same with every other cookbook. I went to write a cookbook, called the cookbook "pyramid", but its crashing when referencing node[:
[2013-06-10 22:14:27 -0400] asharp: Otterley: i sent an option to yum, disablerepo
[2013-06-10 22:14:28 -0400] rpcesar: so where does this initial symbol come from
[2013-06-10 22:15:03 -0400] Otterley: rpcesar, first, it's often better to use strings as the values of attribute keys than symbols
[2013-06-10 22:15:19 -0400] Otterley: and that first key is the name of the cookbook, not the node
[2013-06-10 22:15:29 -0400] Otterley: e.g. node["my cookbook"]["some_attribute"] = value
[2013-06-10 22:16:05 -0400] rpcesar: i see other cookbooks using a symbol to reference their namespace, but not defining it anywhere. is there a "rule" to that?
[2013-06-10 22:16:08 -0400] Otterley: any attribute you create in a cookbook should have a default value in attributes/default.rb
[2013-06-10 22:16:16 -0400] rpcesar: ok
[2013-06-10 22:16:32 -0400] Otterley: our practice, where a good default does not exist, is to do something like:
[2013-06-10 22:17:03 -0400] Otterley: default["my cookbook"]["foo"] = "PLEASE_DEFINE_MYCOOKBOOK[FOO]"
[2013-06-10 22:17:31 -0400] Otterley: that way you can spot errors very quickly, like forgetting to define those attributes in a role or node
[2013-06-10 22:20:28 -0400] rpcesar: yeayea, ive already been in the habbit of declaring default.rb's
[2013-06-10 22:21:22 -0400] rpcesar: but in the files i was using as a reference point, they always declared them something like this: default[:mongodb][:dbpath] = "/var/lib/mongodb"
[2013-06-10 22:21:38 -0400] Otterley: yeah, that's old-style
[2013-06-10 22:21:42 -0400] rpcesar: and for them, it works, id like to be able to at least understand why
[2013-06-10 22:21:44 -0400] rpcesar: ok
[2013-06-10 22:22:00 -0400] rpcesar: so new style, declare your namespaces explicitly , dont use symbols?
[2013-06-10 22:22:00 -0400] Otterley: you can reference them via either symbols or strings
[2013-06-10 22:22:19 -0400] rpcesar: so in the old-style, for the sake of knowledge, where are these symbols getting defined?
[2013-06-10 22:22:38 -0400] Otterley: symbols are auto vivified and are global to the Ruby interpreter
[2013-06-10 22:22:38 -0400] rpcesar: is there something implicit going on there? or a define im just not seeing
[2013-06-10 22:23:15 -0400] Otterley: you can refer to them in Ruby without assigning a value to them
[2013-06-10 22:23:23 -0400] Otterley: and :foo will always equal :foo
[2013-06-10 22:23:54 -0400] Otterley: you cannot assign to them, either.  i.e. you can't make :foo = :bar
[2013-06-10 22:24:18 -0400] rpcesar: right, my research lead me to look at them as something like globally scoped pointers
[2013-06-10 22:24:21 -0400] Otterley: Chef will automatically translate symbols to strings in attributes
[2013-06-10 22:24:59 -0400] Otterley: so if a cookbook says default[:mycookbook][:foo] = "bar", you can reference them with node["mycookbook"]["foo"] just as well
[2013-06-10 22:25:08 -0400] rpcesar: AH
[2013-06-10 22:25:12 -0400] rpcesar: i think i get it
[2013-06-10 22:25:24 -0400] surge_: nvm poking around the library answered my question: https://github.com/opscode-cookbooks/aws/blob/ab591b4dbced4ccb8ed4c74e98df1d3b1b6216e0/libraries/ec2.rb#L65
[2013-06-10 22:25:24 -0400] rpcesar: so in other words, it gets auto-defined
[2013-06-10 22:25:30 -0400] Otterley: it's magic, too much magic for my taste
[2013-06-10 22:25:37 -0400] Otterley: but Rubyists like it for some perverse reason
[2013-06-10 22:25:46 -0400] rpcesar: im pythonic, ruby is very new to me
[2013-06-10 22:25:50 -0400] Otterley: that whole duck-typing thing
[2013-06-10 22:26:30 -0400] rpcesar: so in other words, the symbolic usage is something ruby purists use, is not actually required, and could just as easily (or easier) be defined by just a string identifier on the namespace
[2013-06-10 22:26:30 -0400] Otterley: rpcesar, it's not defined, it's implemented by implementing a subscripting method in the Mash class that does it under the hood (I think)
[2013-06-10 22:26:46 -0400] rpcesar: yikes, i agree, too much magic
[2013-06-10 22:27:18 -0400] rpcesar: ok, so there is nothing at all aversely wrong with me just using a string to identify the namespace
[2013-06-10 22:27:29 -0400] Otterley: not at all, in fact, that's our local standard
[2013-06-10 22:27:43 -0400] rpcesar: default['mycookbooknamespace']['some paramter'] = X
[2013-06-10 22:27:56 -0400] rpcesar: thank you for clearing that up Otterley
[2013-06-10 22:28:15 -0400] Otterley: sure thing, it's confusing to people coming from other more strictly-typed environments
[2013-06-10 22:37:49 -0400] awgross: knuckolls: good news, if you search ObjectSpace for the ChefClient object, you can save the validator method, then redefine it to the exact same thing, but the time it gets reloaded you will have had a chance to mess with it and patch in your changes
[2013-06-10 22:38:35 -0400] awgross: though its a pretty deep sin in ruby to hope that your changes get loaded in the proper order
[2013-06-10 22:40:17 -0400] awgross: i should start a blog where i repent my ruby sins
[2013-06-10 22:48:12 -0400] rpcesar: is it possible to use upstart services with chef? rather then the typical init.d, i was having it place an upstart file in /etc/init, but its failing saying no init.d for the service (im using the service declaration, not sure the best vocabulary to use here)
[2013-06-10 22:49:58 -0400] Otterley: it is, but I encourage runit over upstart for service management

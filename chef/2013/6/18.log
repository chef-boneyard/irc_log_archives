[2013-06-18 00:41:13 -0400] zackf: anyone familiar with omnibus-ruby repo in here?
[2013-06-18 00:44:06 -0400] gchristensen: zackf: you'll probably have more luck in #chef-hacking
[2013-06-18 00:44:15 -0400] zackf: kk
[2013-06-18 00:44:17 -0400] zackf: thanks
[2013-06-18 00:44:21 -0400] gchristensen: you're welcome
[2013-06-18 00:45:25 -0400] jtgiri_: ohai , is there a way to forward ports in kitchen.yml ?
[2013-06-18 00:54:35 -0400] miah: miketheman: doh
[2013-06-18 00:55:16 -0400] miketheman: yeah, I'm having all sorts of fun with good-intentioned history all mess b/c they didn't know any better
[2013-06-18 01:03:26 -0400] kisoku: hrm. chef-server-full doesn't come with an SSL protected API endpoint by default ?
[2013-06-18 01:03:37 -0400] kisoku: or am I missing something ?
[2013-06-18 01:48:59 -0400] coderanger: kisoku: It should
[2013-06-18 01:49:09 -0400] coderanger: the chef 11 server builds run everything over SSL
[2013-06-18 01:49:17 -0400] kisoku: over 443 ?
[2013-06-18 01:49:31 -0400] coderanger: Yep, 80 just redirects to 443 as a convenience
[2013-06-18 01:49:36 -0400] kisoku: because I am not seeing anything running on 444 as I expected
[2013-06-18 01:49:46 -0400] kisoku: oh so no separate socket for api and web now ?
[2013-06-18 01:52:33 -0400] coderanger: chef 11 server ships nginx as a proxy in front of the internal app servers
[2013-06-18 01:52:40 -0400] coderanger: erchef and the UI only listen on localhost
[2013-06-18 01:54:11 -0400] kisoku: I see
[2013-06-18 01:54:20 -0400] kisoku: looking at the nginx.conf now
[2013-06-18 01:58:18 -0400] zackf: coderanger: do you know who can proviide guidanceto help me build a deb of my own hacked version of erchef? I want to test the changes I made before I make a PR.
[2013-06-18 01:58:41 -0400] coderanger: zackf: Sorry, I've basically never touched erchef
[2013-06-18 01:58:54 -0400] zackf: Ok, thanks!
[2013-06-18 02:15:14 -0400] northface: anyone notice that the omnibus installer is having issue and stalling?
[2013-06-18 02:15:45 -0400] swedish_chef: I am wondering if there is an easy way to find out if a recipe is being executed in debug mode. I need to pass extra arguments to an execute resource in that case to generate additional debugging output.
[2013-06-18 02:18:07 -0400] lazukars: I'm trying to access the webui of chef server ( I installed chef server on an ec2 instance ).  Whenever I enter my ec2 instance's ip address in the web browser, it redirects to and internal IP ( something like https://my-internal-ip.ec2.internal ) Any ideas?
[2013-06-18 02:18:40 -0400] swedish_chef: lazukars Using VPC?
[2013-06-18 02:19:10 -0400] lazukars: @swedish_chef:  Sorry, I'm not familar.  What's VPC?
[2013-06-18 02:19:19 -0400] swedish_chef: virtual private cloud
[2013-06-18 02:20:09 -0400] coderanger: lazukars: http://docs.opscode.com/config_rb_chef_server.html
[2013-06-18 02:20:11 -0400] lazukars: As far as I know it's just a regular ec2 instance with Centos installed on it.  I launched the instance from here: https://aws.amazon.com/marketplace/ordering?productId=85586466-5b6c-4495-b580-14f72b4bcf51&ref_=dtl_psb_continue&region=us-east-1
[2013-06-18 02:20:14 -0400] coderanger: fir nginx.server_name
[2013-06-18 02:20:27 -0400] coderanger: lazukars: the default is the FQDN, which in amazon is the private hostname
[2013-06-18 02:20:45 -0400] swedish_chef: what @coderanger said :)
[2013-06-18 02:21:10 -0400] lazukars: @coderanger: k. thanks.  i changed the FDQN to my elastic ip, whether that's right or wrong.
[2013-06-18 02:21:10 -0400] coderanger: Remember that this means that traffic from inside EC2 to the chef server will be billed as transit I think
[2013-06-18 02:21:24 -0400] coderanger: lazukars: That is incorrect
[2013-06-18 02:21:39 -0400] coderanger: but if you chef-server-ctl reconfigure, it should try and use it
[2013-06-18 02:21:51 -0400] coderanger: definitely not a good idea though
[2013-06-18 02:23:07 -0400] lazukars: @coderanger: Wow, thanks for the useful information.  Yeah, I tried to reconfig chef with the elastice IP as the FDQN, from what you said, it sounds like that's not the right thing to do.  And it does not work after reconfig, to support that claim
[2013-06-18 02:23:48 -0400] coderanger: lazukars: Just set the value in chef-server.rb :-)
[2013-06-18 02:23:58 -0400] coderanger: and the reconfig and it will rebuild the nginx config
[2013-06-18 02:24:13 -0400] lazukars: ahhh.  Gotcha, I'll def. give that a shot.  You rock!
[2013-06-18 02:25:12 -0400] coderanger: In general with cloud systems it is best to leave the FQDN/hostname alone
[2013-06-18 02:25:35 -0400] coderanger: Some things get confused otherwise :-)
[2013-06-18 02:25:37 -0400] lazukars: k great to know.  Switching it back now :)
[2013-06-18 02:55:03 -0400] jtimberman: coderanger: you said smartos, that's channeling someara. i'm more about omnios :)
[2013-06-18 02:55:23 -0400] jtimberman: not that smartos isn't great, but i don't have any hardware to install it on
[2013-06-18 02:55:48 -0400] coderanger: jtimberman: I literally don't know the difference anymore
[2013-06-18 02:57:09 -0400] coderanger: Aren't they both opensolaris variants?
[2013-06-18 02:58:23 -0400] coderanger: Ahh, smartos is an illumos/linux hybrid of doom
[2013-06-18 02:58:26 -0400] jtimberman: IllumOS
[2013-06-18 03:08:08 -0400] northface: i am writing a cookbook to install two log monitoring agents....  both of these do the same thing, just different attributes. What is the best way to run a common recipe just with different values for the attributes?
[2013-06-18 03:09:29 -0400] coderanger: northface: LWRPs!
[2013-06-18 03:09:52 -0400] coderanger: Granted thats my answer for everything, but here it really is :-)
[2013-06-18 03:09:56 -0400] northface: that seems to be the solution for a lot of things
[2013-06-18 03:10:32 -0400] coderanger: Encapsulation and code reuse, its whats for dinner!
[2013-06-18 03:11:16 -0400] coderanger: Its almost like there are 50 years of software engineering learning that I am going to force down the brain-hole of every sysop whether they like it or not :)
[2013-06-18 03:11:56 -0400] northface: I was trying to do something like this:   Call node.default['agent']['type'] = 'threatmanager' in the recipe and then include a common recipe that has agent_type = node.default['agent']['type'] \n\n service_name = node['alertlogic']['agent'][agent_type]['service_name']
[2013-06-18 03:12:24 -0400] northface: but during convergence the common recipe is not called a 2nd time
[2013-06-18 03:12:32 -0400] northface: or so it seems
[2013-06-18 03:16:00 -0400] coderanger: Yep
[2013-06-18 03:16:17 -0400] coderanger: recipes are basically singletons, you can't run a given recipe more than once
[2013-06-18 03:16:23 -0400] coderanger: Thats what LWRPs are for :-)
[2013-06-18 03:16:56 -0400] northface: makes sense... all these little things you learn :)
[2013-06-18 03:18:25 -0400] northface: @coderanger: Writing this for a quick trial, and if we go to production I will make sure to use a LWRP, but for speed copying the recipe to two locations will work (BAD BAD BAD)
[2013-06-18 03:18:52 -0400] coderanger: Lulz, well be careful
[2013-06-18 03:19:02 -0400] coderanger: remember that two resources with the same name share internal state
[2013-06-18 03:19:17 -0400] coderanger: so if the names aren't prefixed, bad things could happen
[2013-06-18 03:19:34 -0400] northface: they will have different names!
[2013-06-18 03:19:46 -0400] coderanger: Then all should be well :-)
[2013-06-18 03:19:48 -0400] northface: I even have a test for that :)
[2013-06-18 03:20:21 -0400] coderanger: You could also remove the flag from the run data that says that recipe has been run before, but copy-pasta is probably better as a short term fix :-)
[2013-06-18 03:21:01 -0400] northface: copy-paste will work till we finish the eval, but even this stuff I want to cookbook up :)
[2013-06-18 03:21:47 -0400] northface: nothing is going into our infrastructure without being cooked up
[2013-06-18 03:23:32 -0400] Jason__: Hello, my name is Jason and please teach me if I am asking questions incorrectly. I recently installed chef-server on my centos 6.4 laptop and I am wondering how chef started up after I rebooted my laptop even though it wasn't listed in services when i ran the comand sudo service --status-all | grep chef
[2013-06-18 03:27:58 -0400] zackf: I got it!
[2013-06-18 03:28:51 -0400] coderanger: Jason__: Its probably just called "runit" in the service definition
[2013-06-18 03:29:14 -0400] coderanger: Jason__: We ship runit inside the chef-server blob, and then that manages all the services that make up the chef server
[2013-06-18 03:39:38 -0400] chrisfordham: coderanger: heya there. i was wondering if we know which distro/versions application_python is mean to work with?
[2013-06-18 03:40:29 -0400] Jason__: Thanks coderanger, I ran a grep for the runnit service and I can't seem to find it on the list. I also ran a grep on /etc/initi.d/ for chef and runnit and it appears neither of them are there. Maybe I made a mistake and started it up manually
[2013-06-18 03:41:38 -0400] coderanger: chrisfordham: I only use ubuntu 12.04, so thats what I tested with :-) it should be pretty OS-neutral though
[2013-06-18 03:42:14 -0400] chrisfordham: coderanger: oh sweet. it seemed to want python2.6 and didn't install python pip packages
[2013-06-18 03:42:18 -0400] chrisfordham: (on 12.04)
[2013-06-18 03:44:44 -0400] coderanger: chrisfordham: It depends on the python cookbook which installs pip and venv from source
[2013-06-18 03:45:34 -0400] chrisfordham: coderanger: i'll setup a test in vagrant to show how it fails
[2013-06-18 03:46:10 -0400] coderanger: Jason__: Look in /etc/init/opscode-runsvdir.conf
[2013-06-18 03:46:22 -0400] coderanger: I think thats the right script name anyway
[2013-06-18 03:48:20 -0400] Jason__: @coderanger aha you are right. That's where it was hidden
[2013-06-18 03:48:32 -0400] coderanger: Jason__: https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/runit/recipes/upstart.rb
[2013-06-18 03:48:41 -0400] coderanger: Thats what does the actual service install :-)
[2013-06-18 03:49:31 -0400] hujifeng: hello
[2013-06-18 03:50:00 -0400] hujifeng: anyone know chef pushy?
[2013-06-18 03:50:52 -0400] hujifeng: chef pushy fearture is ready?
[2013-06-18 03:51:14 -0400] coderanger: hujifeng: It has not been released yet
[2013-06-18 03:51:32 -0400] coderanger: There were a few talks about it at ChefConf 2013 if you want more info
[2013-06-18 03:51:35 -0400] hujifeng: how long will it release?
[2013-06-18 03:52:01 -0400] chrisfordham: coderanger: initially it seems to have this pip freeze issue i.e. the pip pkg is not installed https://dpaste.de/kyrjJ/ i am not sure if this is logical error
[2013-06-18 03:52:13 -0400] hujifeng: where i can get chefconf 2013?
[2013-06-18 03:52:56 -0400] chrisfordham: coderanger: https://github.com/rightscale-blueprints/django_app_server/blob/master/examples/chef-solo/node.json  https://github.com/rightscale-blueprints/django_app_server/blob/master/cookbooks/django_application/recipes/default.rb
[2013-06-18 03:53:46 -0400] hujifeng: chef pushy is based on ssh?
[2013-06-18 03:54:02 -0400] coderanger: hujifeng: Not sure, I'm not on that team, I think the plan is to release it to interested Private Chef customers first for testing, the Open Source version is probably a ways off
[2013-06-18 03:54:11 -0400] coderanger: hujifeng: No, pushy is based around a custom 0MQ protocol
[2013-06-18 03:54:24 -0400] coderanger: SSH doesn't work so well when trying to send commands to more than a few dozen servers
[2013-06-18 03:54:43 -0400] hujifeng: cool,you know ssh is sentive for ops
[2013-06-18 03:55:18 -0400] hujifeng: i think it should not be bases on ssh
[2013-06-18 03:55:40 -0400] coderanger: chrisfordham: Hmm, can you run "pip freeze" manually in that venv?
[2013-06-18 03:55:47 -0400] chrisfordham: coderanger: yep
[2013-06-18 03:55:52 -0400] coderanger: chrisfordham: Can't see the underlying error since the grep filters it out :-(
[2013-06-18 03:56:04 -0400] hujifeng: i know from official webiste it is based zeroMQ,why not based on rabbitmq
[2013-06-18 03:56:08 -0400] chrisfordham: well there is no output as itts not installes
[2013-06-18 03:56:18 -0400] hujifeng: you know,chef -server is basesd on RABBITMQ
[2013-06-18 03:56:38 -0400] coderanger: hujifeng: Despite the name, 0MQ has nothing to do with queuing or AMQP (of which rabbitmq is an implementation)
[2013-06-18 03:56:39 -0400] chrisfordham: coderanger: a range of pip packages installed but not virtualenv in this case
[2013-06-18 03:57:07 -0400] coderanger: chrisfordham: Wait, let me think this through for a seccond
[2013-06-18 03:57:24 -0400] FuZion755: Hi all, I'm having so some serious issues getting a solid ruby installation going with chef solo.  No matter how I set it up my passenger gem is installed to the chef ruby, this makes it unavailable in my path so the passenger_apache2 recipe doesn't work and furthermore I'd like to user ruby 2.0.0 but my chef is 1.9.1.   Does anyone have a good resource on a solid ruby setup?  I haven't had any luck so far
[2013-06-18 03:57:38 -0400] chrisfordham: coderanger: np thanks
[2013-06-18 03:57:40 -0400] coderanger: hujifeng: ZeroMQ would be better named TCP2 or something, its a set of helpers for writing network protocols and clients/servers
[2013-06-18 03:57:59 -0400] coderanger: FuZion755: Are you just using gem_package?
[2013-06-18 03:58:59 -0400] FuZion755: coderanger: yes the passenger_apache2 cookbook from opscode uses gem_package, was considering using the rbenv or rvm lwrp equivalents but I figured if opscode released this cookbook there must be a sensible way to use it
[2013-06-18 03:59:39 -0400] coderanger: FuZion755: How did you install Ruby?
[2013-06-18 03:59:42 -0400] hujifeng: chef is perfect,but no pushy, it is a pity
[2013-06-18 04:00:03 -0400] coderanger: FuZion755: You may need to change the gem_binary option if chef isn't finding the right ruby
[2013-06-18 04:00:09 -0400] hujifeng: bootsrap is based on ssh, it is not good idea.
[2013-06-18 04:00:34 -0400] coderanger: hujifeng: Not much way around htat
[2013-06-18 04:00:52 -0400] coderanger: hujifeng: Most large deploys bake chef into their standard OS image though, and do not use knife bootstrap
[2013-06-18 04:01:24 -0400] coderanger: thats not something we can really provide in a unified way though, so we are stuck with a mix of SSH and WinRM for initial bootstrap as a fallback (which is the definition of a bootstrap system in fact)
[2013-06-18 04:01:32 -0400] FuZion755: coderanger: I've tried chef-rvm (gem directories weren't added to the cook user's path) and rbenv (gem_package wasn't installing to the rbenv ruby), both system wide installs
[2013-06-18 04:01:35 -0400] hujifeng: yes,but chef-client is pull after some while.
[2013-06-18 04:01:46 -0400] hujifeng: do know the result right now
[2013-06-18 04:01:59 -0400] hujifeng: do not know
[2013-06-18 04:02:22 -0400] coderanger: hujifeng: With pushy, it is then push-based (hence the name), also our new reporting systems let you get very detailed information about chef runs regardless of what starts them
[2013-06-18 04:02:26 -0400] hujifeng: pushy will raise the usage of chef
[2013-06-18 04:02:38 -0400] coderanger: FuZion755: Try just setting gem_binary to the full path to your ruby binary
[2013-06-18 04:03:12 -0400] coderanger: FuZion755: both rvm and rbenv depend on shell includes to alter your path, so normally Chef can't detect Ruby's installed with them
[2013-06-18 04:04:42 -0400] swedish_chef: I've been looking at how sub-resources are defined and hooked up in the application & application_ruby cookbooks. The mechanism for doing this seems a bit convoluted (#method_missing, etc.). Are there any other cookbooks I should look at for alternative implementations?
[2013-06-18 04:04:44 -0400] coderanger: hujifeng: We do certainly hope more people will use Chef because of Pushy :) That is kind of the point of building new products
[2013-06-18 04:04:52 -0400] swedish_chef: I'm referring to https://github.com/opscode-cookbooks/application/blob/9f6bb119ade22dda719bbfecc216065966f06bd9/resources/default.rb#L132
[2013-06-18 04:05:16 -0400] coderanger: swedish_chef: Nope, I'm working on v2 of the idea right now though :-)
[2013-06-18 04:05:22 -0400] coderanger: swedish_chef: but its still definitely a complex hack
[2013-06-18 04:05:30 -0400] FuZion755: coderanger: thanks will do, so it seems then that the opscode passenger_apache2 cookbook assumes that you'll use the chef ruby install?  is that a typical chef paradigm?
[2013-06-18 04:05:41 -0400] swedish_chef: @coderanger it's a pattern for sure
[2013-06-18 04:05:50 -0400] coderanger: FuZion755: No, it assumes you are using a system-packaged Ruby
[2013-06-18 04:06:34 -0400] FuZion755: coderanger: Ah so gem_package searches PATH for the one to use and falls back on the chef one?
[2013-06-18 04:06:48 -0400] swedish_chef: @coderanger in another life was the architect of a runnable tag-based language that dealt with these issues
[2013-06-18 04:07:05 -0400] coderanger: swedish_chef: :-) Shooting a little smaller this time, trying to make it so you can optionally use python_virtualenv as a resource container to just automatically venv-ize sub resources
[2013-06-18 04:07:14 -0400] swedish_chef: @coderanger perhaps the idea can be abstracted into parent & child mixins?
[2013-06-18 04:07:25 -0400] coderanger: FuZion755: It shouldn't even fall back on the chef one I don't think, that would be a bug
[2013-06-18 04:07:37 -0400] coderanger: FuZion755: It should default to /usr/bin/ruby I think
[2013-06-18 04:07:49 -0400] coderanger: swedish_chef: Ding ding ding, thats what I'm doing
[2013-06-18 04:08:05 -0400] swedish_chef: @coderanger ok, let me know if there is a way to help
[2013-06-18 04:08:10 -0400] coderanger: swedish_chef: also want to allow both nested and flat structures
[2013-06-18 04:08:21 -0400] swedish_chef: @coderanger writing a rake resource now
[2013-06-18 04:08:47 -0400] swedish_chef: @coderanger want to be able to specify runner sub-resources, e.g., Foreman or heroku
[2013-06-18 04:09:11 -0400] swedish_chef: @coderanger yes, nested + flat would be nice
[2013-06-18 04:09:12 -0400] coderanger: swedish_chef: Check out my heartbeat cookbook
[2013-06-18 04:09:28 -0400] swedish_chef: @coderanger checking
[2013-06-18 04:09:42 -0400] coderanger: I think that got merged to upstream, sec
[2013-06-18 04:10:12 -0400] coderanger: swedish_chef: https://github.com/opscode-cookbooks/heartbeat/blob/master/resources/default.rb
[2013-06-18 04:10:38 -0400] FuZion755: coderanger, interesting I'll dive into what it's doing, thank you for the info it is much appreciated
[2013-06-18 04:10:46 -0400] coderanger: swedish_chef: and https://github.com/opscode-cookbooks/heartbeat/blob/master/libraries/default.rb#L39
[2013-06-18 04:10:55 -0400] swedish_chef: @coderanger I'm there. Which part?
[2013-06-18 04:11:11 -0400] coderanger: swedish_chef: So the first link, look at the resources method
[2013-06-18 04:11:19 -0400] coderanger: which creates an instance of the second link
[2013-06-18 04:11:31 -0400] coderanger: HeartbeatResourceGroup is used to mediate the subresources
[2013-06-18 04:12:12 -0400] swedish_chef: @coderanger got it; simple & clean
[2013-06-18 04:12:46 -0400] coderanger: swedish_chef: My attempts at this are getting slowly better I hope :)
[2013-06-18 04:13:16 -0400] swedish_chef: @coderanger certainly trending that way :)
[2013-06-18 04:13:45 -0400] swedish_chef: @coderanger I think I need to meditate in the Chef garden a bit longer before I choose this path
[2013-06-18 04:13:48 -0400] coderanger: The next piece of the puzzle is a mixin for the "client side" of the sub-ing
[2013-06-18 04:14:05 -0400] coderanger: that can help clean up the structural bits on that side
[2013-06-18 04:14:32 -0400] swedish_chef: @coderanger I have many #method_missing scars. Works beautifully once tuned but debugging #method_missing code can be PIA even with BDD
[2013-06-18 04:14:58 -0400] swedish_chef: @coderanger so I really appreciate you trying to generalize the pattern!
[2013-06-18 04:15:11 -0400] coderanger: Its definitely into the realm of "making new DSL syntax"
[2013-06-18 04:15:19 -0400] coderanger: which is understandably hard to do right
[2013-06-18 04:15:58 -0400] chrisfordham: coderanger: only thought I have is that maybe it doesn't do sane PATH for /usr/local/bin or something. bash[install-pip]  then Processing python_pip[virtualenv]
[2013-06-18 04:17:44 -0400] swedish_chef: @coderanger yup; there is no simple way to allow the parent to navigate an entire subtree but there are some simplifying approaches for other cases, e.g., descendants pushing data/objects into ancestors in the context of a simple event/processing lifecycle
[2013-06-18 04:18:14 -0400] coderanger: chrisfordham: I think this is just a bug, it shouldn't be failing the run like that
[2013-06-18 04:18:29 -0400] coderanger: chrisfordham: https://github.com/opscode-cookbooks/python/blob/master/providers/pip.rb#L109-L118
[2013-06-18 04:18:45 -0400] coderanger: chrisfordham: It should just see that as meaning it isn't installed, because it isn't installed
[2013-06-18 04:18:55 -0400] swedish_chef: @coderanger it works well in a surprising number of cases; happy to chat more offline if you'd like. Meanwhile: thanks & godspeed.
[2013-06-18 04:19:08 -0400] chrisfordham: coderanger: that sounds right too, but then not sure how you would of been able to test/use it. in the past i just used python::package but in this case its called from application so can't work around
[2013-06-18 04:19:25 -0400] coderanger: chrisfordham: Yeah, what version of Chef is this running under?
[2013-06-18 04:19:33 -0400] chrisfordham: coderanger: 10.24.0
[2013-06-18 04:19:41 -0400] chrisfordham: sorry 10.14.2
[2013-06-18 04:19:46 -0400] coderanger: chrisfordham: The log disagrees
[2013-06-18 04:19:46 -0400] coderanger: yeah
[2013-06-18 04:19:53 -0400] coderanger: Can you try updating that?
[2013-06-18 04:20:23 -0400] chrisfordham: coderanger: upgrade chef version?
[2013-06-18 04:20:31 -0400] coderanger: You can use the vagrant-omnibus plugin to install a specific version of chef ;-)
[2013-06-18 04:21:02 -0400] chrisfordham: thats true, but i can' just do it in vagrant provision quickly. which should i test with?
[2013-06-18 04:21:58 -0400] coderanger: What do you use in production?
[2013-06-18 04:23:01 -0400] flaccid: coderanger: nick change, dang client. latest 10 atm
[2013-06-18 04:23:05 -0400] flaccid: so i guess 10.24.0
[2013-06-18 04:23:32 -0400] flaccid: i'll just Vagrantfile in config.vm.provision :shell, :inline => 'gem list | grep chef | grep 10.24.0 || gem install chef -v 10.24.0 --no-rdoc --no-ri'
[2013-06-18 04:23:55 -0400] coderanger: Heh, that works too
[2013-06-18 04:24:11 -0400] coderanger: but you can do that with the omnibus plugin too :-)
[2013-06-18 04:24:30 -0400] flaccid: yep that is on my todo list for sure
[2013-06-18 04:24:35 -0400] flaccid: can do after we fix this :P
[2013-06-18 04:24:57 -0400] flaccid: coderanger: ok same thing happens on this chef version, its the cookbook code that has the bug right?
[2013-06-18 04:25:38 -0400] coderanger: Yeah, except I'm using this in production on tons of servers
[2013-06-18 04:26:08 -0400] coderanger: Unless something in here changed
[2013-06-18 04:27:06 -0400] coderanger: https://github.com/opscode-cookbooks/python/commit/87223e2a75b24d06c43397d3ed0f9911d4f6644f
[2013-06-18 04:28:13 -0400] coderanger: flaccid: So I bet version 1.2.2 of the cookbook would work for you
[2013-06-18 04:28:37 -0400] flaccid: coderanger: oh i see, thanks for digging in; i will test now, sec
[2013-06-18 04:29:38 -0400] coderanger: flaccid: Can you also post a debug log and/or full trace?
[2013-06-18 04:29:50 -0400] coderanger: even under 10.24 I don't see why #shell_out should raise an exception
[2013-06-18 04:29:57 -0400] coderanger: Only #shell_out! should do that
[2013-06-18 04:30:02 -0400] flaccid: ok np, sec
[2013-06-18 04:34:35 -0400] flaccid: coderanger: i think 1.2.2 works so you are right on that. i get this now NoMethodError: ruby_block[django-blank before_deploy] (/tmp/vagrant-chef-1/chef-solo-1/cookbooks/application/providers/default.rb line 107) had an error: NoMethodError: application_python_gunicorn[django-blank] (django_application::default line 109) had an error: NoMethodError: undefined method `push' for nil:NilClass
[2013-06-18 04:34:41 -0400] flaccid: which may be a logical error, checking it out
[2013-06-18 04:34:54 -0400] flaccid: should i give you debug first on the current master version though?
[2013-06-18 04:34:59 -0400] hujifeng: yes,i expect pushy,but right now i need a push way to deploy application
[2013-06-18 04:35:59 -0400] coderanger: hujifeng: Ahh, mcollective is an option :-)
[2013-06-18 04:36:18 -0400] hujifeng: right now i plan add a socket server on managed node.
[2013-06-18 04:36:18 -0400] coderanger: hujifeng: There are plugins that integrate chef node data with mcollective's facets
[2013-06-18 04:36:43 -0400] coderanger: But if you want to build something, go for it :-)
[2013-06-18 04:37:03 -0400] hujifeng: and  a agent on chef-server
[2013-06-18 04:43:16 -0400] hujifeng: any way to run chef-client on chef-sever?
[2013-06-18 04:43:50 -0400] coderanger: Just run it? The two are unrelated
[2013-06-18 04:44:09 -0400] coderanger: flaccid: the full trace on current version would be good
[2013-06-18 04:44:25 -0400] coderanger: flaccid: just to see what is actually raising the exception, since it should be "impossible" (lolsoftware)
[2013-06-18 04:44:42 -0400] flaccid: ah well i'm hitting another error now with a fresh one coderanger
[2013-06-18 04:44:48 -0400] hujifeng: any way to run chef-client on chef-sever?
[2013-06-18 04:45:01 -0400] coderanger: hujifeng: Yes, just run chef-client on the chef server machine
[2013-06-18 04:45:06 -0400] coderanger: Nothing special needed
[2013-06-18 04:45:23 -0400] coderanger: It is just another server as far as chef is concerned
[2013-06-18 04:45:51 -0400] hujifeng: chef-client can trigger the managed node to pull?
[2013-06-18 04:46:06 -0400] hujifeng: chef-client on chef-server
[2013-06-18 04:46:42 -0400] coderanger: No, chef-server cannot trigger anything anywhere
[2013-06-18 04:46:46 -0400] coderanger: (thats what Pushy is)
[2013-06-18 04:47:02 -0400] hujifeng: chef-client on chef-server can trigger the managed node to pull?
[2013-06-18 04:47:07 -0400] hujifeng: lol
[2013-06-18 04:47:16 -0400] coderanger: Not sure what you are asking
[2013-06-18 04:47:24 -0400] hujifeng: i think it can not.
[2013-06-18 04:47:42 -0400] hujifeng: you know chef-client pull from chef-server.
[2013-06-18 04:48:15 -0400] coderanger: If by "can" you mean "always does"
[2013-06-18 04:48:59 -0400] hujifeng: chef-server can not push aside bootstrap right now
[2013-06-18 04:49:28 -0400] coderanger: No, bootstrap is a push from the workstation to the target node
[2013-06-18 04:49:39 -0400] coderanger: the chef-server is not involved
[2013-06-18 04:49:52 -0400] coderanger: Excluding Pushy, the chef server never pushes anything anywhere
[2013-06-18 04:49:57 -0400] hujifeng: sorry,yes you are right
[2013-06-18 04:50:10 -0400] coderanger: and pushy will have very specific restrictions on it to ensure security
[2013-06-18 04:50:28 -0400] coderanger: While it is push based, you need to be running the pushy agent, for example
[2013-06-18 04:51:32 -0400] hujifeng: http://docs.opscode.com/pushy.html
[2013-06-18 04:51:55 -0400] hujifeng: it is very clear,sorry it is not release now
[2013-06-18 04:52:16 -0400] joonas: oh wow
[2013-06-18 04:52:18 -0400] joonas: pushy is nice
[2013-06-18 04:52:23 -0400] joonas: I mean, it's nice to see all these things
[2013-06-18 04:52:27 -0400] joonas: been out of chef for a while :)
[2013-06-18 04:53:13 -0400] hujifeng: yes,it is perfect feature.
[2013-06-18 04:53:18 -0400] hujifeng: very nice idea
[2013-06-18 04:53:56 -0400] mwhooker: anyone know how to get vagrant to override normal attributes in chef.json ?
[2013-06-18 04:54:04 -0400] coderanger: joonas: Pushy + Reporting + Webui2.0 == mucho awesome :)
[2013-06-18 04:54:24 -0400] hujifeng: cool
[2013-06-18 04:54:25 -0400] joonas: coderanger: is that webui being done in some fancy javascript thingymajic?
[2013-06-18 04:55:09 -0400] coderanger: mwhooker: It can't
[2013-06-18 04:55:15 -0400] coderanger: joonas: Yahr
[2013-06-18 04:55:20 -0400] mwhooker: thanks coderanger
[2013-06-18 04:55:29 -0400] coderanger: mwhooker: You can use a recipe or role though :)
[2013-06-18 04:55:31 -0400] joonas: coderanger: cool, are there screenshots/previews/demo anywhere?
[2013-06-18 04:55:36 -0400] FuZion755: it seems that when Chef compiles the recipes before run it does some reordering and certain recipes/resource calls get executed first regardless of their declared order.  How can I accomplish this in my own recipes?  Use case is ensuring a system wide ruby install from source
[2013-06-18 04:55:44 -0400] hujifeng: thanks coderanger warmth.
[2013-06-18 04:55:45 -0400] coderanger: joonas: preview.opscode.com, you can just login and play with it
[2013-06-18 04:56:03 -0400] coderanger: FuZion755: No, things go in whatever order they are in
[2013-06-18 04:56:32 -0400] coderanger: FuZion755: Unless you mean the trick of running resources during the compile phase :-)
[2013-06-18 04:56:54 -0400] joonas: coderanger: oh nice
[2013-06-18 04:57:01 -0400] joonas: coderanger: the blue sidebar is kind of not great though :/
[2013-06-18 04:57:18 -0400] coderanger: joonas: We're still working on it :-)
[2013-06-18 04:57:36 -0400] joonas: coderanger: I thought so, just wanted to bring that up :P
[2013-06-18 04:57:47 -0400] joonas: it's neat though, I like it
[2013-06-18 04:57:57 -0400] FuZion755: coderanger, aha thats it, thanks!
[2013-06-18 04:58:01 -0400] joonas: coderanger: I assume this will only be for the hosted chef, not going to be open sourced or anything?
[2013-06-18 04:58:09 -0400] coderanger: joonas: Yeah :-/ hosted/private
[2013-06-18 04:58:21 -0400] joonas: coderanger: cool, no problem
[2013-06-18 04:58:21 -0400] coderanger: joonas: It needs multi-tennancy/orgs to function
[2013-06-18 04:58:35 -0400] joonas: I've thought about building an ember app that would consume the APIs
[2013-06-18 04:58:46 -0400] joonas: just as a fun exercise :)
[2013-06-18 04:58:53 -0400] coderanger: Heh, this is backbone under the hood
[2013-06-18 04:59:14 -0400] coderanger: FuZion755: Just be careful since thats strictly a two-level priority sort :-)
[2013-06-18 04:59:35 -0400] FuZion755: good to know, thanks!
[2013-06-18 04:59:41 -0400] coderanger: FuZion755: i.e. you can't then run stuff before those, globally
[2013-06-18 05:00:37 -0400] flaccid: coderanger: well i get this now https://dpaste.de/CnBSr/ maybe i need to not use master for application cookbook also
[2013-06-18 05:01:16 -0400] flaccid: i have not set before_deploy
[2013-06-18 05:02:06 -0400] coderanger: flaccid: Hmm, looking
[2013-06-18 05:02:23 -0400] joonas: coderanger: I have to say, I like what you guys are doing with the technologies
[2013-06-18 05:02:37 -0400] coderanger: flaccid: the subresources use the hooks internally
[2013-06-18 05:02:46 -0400] joonas: cool to see pushy use zeromq
[2013-06-18 05:03:39 -0400] flaccid: coderanger: i guess i should try with just django and gunicorn with no options
[2013-06-18 05:03:51 -0400] coderanger: flaccid: Grr, these traces are all mangled by catching and rethrowing
[2013-06-18 05:04:19 -0400] coderanger: flaccid: Trying to figure out what is calling #push
[2013-06-18 05:05:17 -0400] coderanger: flaccid: Its got to be something weird with the resource collections
[2013-06-18 05:05:39 -0400] coderanger: flaccid: the gunicorn provider definitely doesn't call push
[2013-06-18 05:06:14 -0400] coderanger: But I'm betting that when it tries to interpret the recipe DSL in that action, something is going wrong
[2013-06-18 05:06:58 -0400] coderanger: Hmm, nope, that doesn't call #push either
[2013-06-18 05:07:12 -0400] coderanger: it adds to the resource collection with #insert :)
[2013-06-18 05:07:34 -0400] flaccid: i can't find it either
[2013-06-18 05:08:06 -0400] coderanger: We picked a horrible career path, do you think woodsmiths have to go track down phantom errors or something?
[2013-06-18 05:09:13 -0400] coderanger: The subresource DSL uses #<<, so unless that aliased to #push that doesn't sound like it
[2013-06-18 05:09:26 -0400] coderanger: How does ruby report nomethoderrors on alias methods?
[2013-06-18 05:10:38 -0400] flaccid: i dunno ay, i'm not a ruby buff but this sure is annoying
[2013-06-18 05:10:53 -0400] coderanger: flaccid: Consider me stumped, and I need to eat something as it is getting late :(
[2013-06-18 05:11:15 -0400] flaccid: coderanger: :( i wouldn't mind knowing which versions of cookbooks in this stack you are using in prod..
[2013-06-18 05:12:04 -0400] coderanger: flaccid: http://i.imgur.com/eTwaQWe.png
[2013-06-18 05:12:11 -0400] flaccid: thanks coderanger appreciate it
[2013-06-18 05:12:20 -0400] coderanger: Thats just a full dump of the psf org
[2013-06-18 05:12:47 -0400] coderanger: flaccid: You can also see github/python/psf-chef for uses
[2013-06-18 05:13:03 -0400] coderanger: like we just deployed the pycon-2014 site this morning using this
[2013-06-18 05:13:46 -0400] flaccid: coderanger: ah thanks very much!
[2013-06-18 06:16:36 -0400] flaccid: coderanger: well i can get it to finish the chef run but i gets no daemon heh
[2013-06-18 06:50:36 -0400] binamov: any idea why OPC webui status tab only shows me a couple dozen of about 300 nodes?
[2013-06-18 07:00:55 -0400] inconshreveable: is there anyway to use a Hash as the parameters of a resource?
[2013-06-18 07:01:20 -0400] inconshreveable: something like:
[2013-06-18 07:01:40 -0400] inconshreveable: params = (:owner => "root", :group => "root")
[2013-06-18 07:01:46 -0400] inconshreveable: file **params
[2013-06-18 07:02:14 -0400] inconshreveable: similar to python's kwargs unpacking with the ** operator?
[2013-06-18 07:03:09 -0400] flaccid: hmm good question
[2013-06-18 07:03:47 -0400] vaskas: hey guys, does Chef support YAML data bags?
[2013-06-18 07:05:09 -0400] binamov: vaskas JSON afaik
[2013-06-18 07:05:43 -0400] flaccid: easy to convert yaml to json
[2013-06-18 07:09:47 -0400] coderanger: vaskas: No, I've often wished it did though :(
[2013-06-18 07:10:09 -0400] coderanger: it really shouldn't be super hard, if you wanted to submit a patch :)
[2013-06-18 07:10:16 -0400] coderanger: we do support Yaml output now though
[2013-06-18 07:10:48 -0400] flaccid: coderanger: i'm so close but for some reason supervisor doesn't run gunicorn
[2013-06-18 07:15:56 -0400] binamov: i'd like to be able to specify versions for the ntp package in the public cookbook, what would be a sane way to do this? https://github.com/opscode-cookbooks/ntp/blob/master/attributes/default.rb
[2013-06-18 07:17:35 -0400] flaccid: coderanger: hmm http://i.imgur.com/eTwaQWe.png has application_python 1.2.5 but there is no ref for this yet
[2013-06-18 07:17:40 -0400] flaccid: latest tag is 1.2.4
[2013-06-18 07:27:41 -0400] flaccid: coderanger: https://github.com/flaccid/cookbooks/blob/master/cookbooks/django_application/recipes/application.rb
[2013-06-18 07:29:19 -0400] coderanger: flaccid: Yeah, thats a fork in my repo
[2013-06-18 07:30:01 -0400] coderanger: binamov: Use chef-rewind and a wrapper cookbook
[2013-06-18 07:30:11 -0400] coderanger: binjured: Thats a bit too specific to get merged upstream
[2013-06-18 07:30:17 -0400] coderanger: er mistab, sorry
[2013-06-18 07:30:20 -0400] flaccid: coderanger: i even see [2013-06-18T07:28:35+00:00] DEBUG: Using variables server_hooksworker_timeout30backlog2048listen0.0.0.0:8080worker_processes8worker_keepalive2pidworker_classsyncpreload_appfalseworker_max_requests0 to configure gunicorn_config[/srv/django-blank/shared/gunicorn_config.py]
[2013-06-18 07:30:25 -0400] coderanger: binamov: Why do you need specific verisons?
[2013-06-18 07:30:30 -0400] flaccid: but there is no gunicorn running
[2013-06-18 07:30:37 -0400] binamov: coderanger just for experimenting sake
[2013-06-18 07:30:46 -0400] coderanger: flaccid: Hmm, if you "supervisorctl status" do you see a def loaded?
[2013-06-18 07:30:57 -0400] coderanger: flaccid: Might be missing a supervisorctl reload somewhere :(
[2013-06-18 07:31:11 -0400] flaccid: coderanger: i fink that is the issue django-blank                     STOPPED    Not started
[2013-06-18 07:31:25 -0400] coderanger: Okay, so the def is loaded, but not started
[2013-06-18 07:31:32 -0400] coderanger: Good sign :)
[2013-06-18 07:31:43 -0400] coderanger: or at least better than the whole thing being missing
[2013-06-18 07:32:05 -0400] flaccid: coderanger: which param do you give supervisorctl start to start it?
[2013-06-18 07:32:20 -0400] coderanger: binamov: ntpd is probably among the most stable bits of software ever made since chronologists tend to take zero down time seriously and measure in nanoseconds :)
[2013-06-18 07:32:43 -0400] coderanger: flaccid: supervisorctl start <name>
[2013-06-18 07:33:01 -0400] binamov: coderanger that's exactly why, i can't really break things if i try installing different versions of ntp
[2013-06-18 07:33:16 -0400] flaccid: coderanger: if i do supervisorctl start django-blank it returns django-blank: ERROR (no such file)
[2013-06-18 07:35:04 -0400] coderanger: binamov: Sure, but version changes in ntpd are like 90% time data updates and 9.99% adding support for weird new hardware clocks someone built in a basement
[2013-06-18 07:35:22 -0400] coderanger: flaccid: the status command should show the right name
[2013-06-18 07:35:57 -0400] flaccid: coderanger: it shows django-blank                     STOPPED    Not started
[2013-06-18 07:36:14 -0400] binamov: coderanger this just proof of concept i want to set a version attribute but the cookbook takes an array of packages, so how do i match it to an array of versions :)
[2013-06-18 07:36:22 -0400] flaccid: a start all renders the same error
[2013-06-18 07:37:50 -0400] coderanger: binamov: You don't, you would have to reopen the resources with rewind and update them yourself
[2013-06-18 07:38:09 -0400] coderanger: binamov: Due to the fact that setting ntpd versions isn't a thing people do, thats not a feature of the cookbook
[2013-06-18 07:38:30 -0400] coderanger: flaccid: I'm getting to be too tired to debug, but see if you can get a verbose printout from supervisorctl
[2013-06-18 07:38:46 -0400] flaccid: coderanger: sorry man hey, but it not work out of box ! :(
[2013-06-18 07:39:10 -0400] binamov: coderanger ok i'll refactor the cookbook, just experimenting
[2013-06-18 07:39:36 -0400] coderanger: binamov: Um, okay, such a patch would almost certainly not be accepted, so still not sure what you are trying to do
[2013-06-18 07:39:51 -0400] binamov: coderanger i'm playing around
[2013-06-18 07:39:51 -0400] coderanger: binamov: If you are just playing with chef, iterating over a hash of pkg name => version if pretty simple
[2013-06-18 07:40:15 -0400] binamov: so hash, ok :)
[2013-06-18 07:41:19 -0400] flaccid: [program:django-blank]
[2013-06-18 07:41:20 -0400] flaccid: command=gunicorn gunicorn -c /srv/django-blank/shared/gunicorn_config.py
[2013-06-18 07:41:20 -0400] flaccid: process_name=%(program_name)s
[2013-06-18 07:41:37 -0400] flaccid: perhaps this process_name is incorrect
[2013-06-18 07:42:31 -0400] flaccid: but also command=gunicorn gunicorn -c /srv/django-blank/shared/gunicorn_config.py - unicorn is not in path as its embedded in the shared/
[2013-06-18 07:43:07 -0400] coderanger: flaccid: No, the program name is correct, thats just a gunicorn thing
[2013-06-18 07:43:15 -0400] coderanger: well actually its a python iniparser thing
[2013-06-18 07:43:22 -0400] coderanger: but yeah, the path sounds like the issue
[2013-06-18 07:48:43 -0400] flaccid: coderanger: hmm i guess i should work out how i would actually run this blank django app with gunicorn directly first
[2013-06-18 07:49:30 -0400] coderanger: flaccid: The puppy is insisting it is bed time (not making that up, she doesn't like it when we stay up late)
[2013-06-18 07:49:38 -0400] coderanger: so this can wait until tomorrow :)
[2013-06-18 07:49:47 -0400] flaccid: coderanger: hey no worries, appreciate the help; have a good sleepies
[2013-06-18 09:23:59 -0400] wmz: hmm, if all error message i get is
[2013-06-18 09:24:06 -0400] wmz: [Tue, 18 Jun 2013 11:19:50 +0200] ERROR: Running exception handlers
[2013-06-18 09:24:07 -0400] wmz: [Tue, 18 Jun 2013 11:19:50 +0200] FATAL: Saving node information to /var/cache/chef/failed-run-data.json
[2013-06-18 09:24:18 -0400] wmz: what should li look i the failed-run-data.json file?
[2013-06-18 09:24:40 -0400] wmz: it said something about "FATAL: ArgumentError: You must have a string like resource_type[name]!"
[2013-06-18 09:37:02 -0400] dontbecold_: are there any manual install instructions for chef 11?
[2013-06-18 09:37:13 -0400] dontbecold_: the DEB file is clashing with existing architecture
[2013-06-18 09:47:28 -0400] guest__: Hello !  When the server will communicate with the first customer, they shall exchange their SSL keys?
[2013-06-18 10:20:50 -0400] guest__: Hello !  When the server will communicate with the first customer, they shall exchange their SSL keys?
[2013-06-18 11:54:29 -0400] chr4: I'm trying to use Mixlib::Shellout() and use its stdout in a resource. Unfortunately, this doesn't work, as the command depends on a resource created earlier, and chef appears to run Shellout() in advance. What's the best practise in such a situation?
[2013-06-18 11:55:09 -0400] bcave: howdy
[2013-06-18 12:08:51 -0400] guest__: Hello !  When the server will communicate with the first customer, they shall exchange their SSL keys?
[2013-06-18 13:56:08 -0400] Battousai: what am I doing wrong..
[2013-06-18 13:56:13 -0400] Battousai: ERROR:  Error installing librarian-chef: ERROR: Failed to build gem native extension.
[2013-06-18 13:56:31 -0400] Battousai: mkmf.rb can't find header files for ruby at /usr/share/include/ruby.h
[2013-06-18 13:56:40 -0400] Battousai: did I miss a package?
[2013-06-18 13:56:42 -0400] spox: Battousai: you need to install the dev package for your ruby
[2013-06-18 13:56:50 -0400] jrclouda: devruby
[2013-06-18 13:56:51 -0400] Battousai: ok
[2013-06-18 14:03:30 -0400] ddyke: Hello, Good morning.
[2013-06-18 14:04:04 -0400] ddyke: QQ: I am trying to add an until? in my recipe to check for the creation of a directory, however when I add the ruby code, my recipes do not execute.
[2013-06-18 14:04:09 -0400] ddyke: Am I doing this wrong?
[2013-06-18 14:05:22 -0400] swedish_chef: I am trying to subclass a LWRP (rvm_shell from rvm) in a libraries-based heavy-weight resource provider. Is there a way to force Chef to compile the rvm cookbook at libraries/* loading time so that I can find Chef::Resource::RvmShell?
[2013-06-18 14:29:22 -0400] rust: Has anyone successfully used application_ruby together with rvm?
[2013-06-18 14:42:15 -0400] ddyke: can you notify an execute block?
[2013-06-18 14:45:13 -0400] m4rcu5: ddyke: yes
[2013-06-18 14:45:18 -0400] ianco: ddyke, yes. use action run
[2013-06-18 14:50:10 -0400] ddyke: Sweet, I think thats what I need to do, I have an until statement that is prohibiting my recipes to run... i think i just trhow that in an execute block and then notify :)
[2013-06-18 15:09:15 -0400] bigbigbang: Hi there ! does someone know this error ? i'm trying to cluster rabbitmq ...
[2013-06-18 15:09:27 -0400] bigbigbang: NoMethodError: undefined method `admin' for nil:NilClass {:request_params=> 2013-06-18_14:52:46.37649   {"utf8"=>"", 2013-06-18_14:52:46.37650    "authenticity_token"=>"uDruTIbofcJyeQAJ9ambBk58bzkAeQ3iJZIrCsPuJ/w=",
[2013-06-18 15:09:47 -0400] bigbigbang: is this a problem with my security token betwwen the 2 servers ?
[2013-06-18 15:19:18 -0400] Nyss: Good day, guys. I want to check conflicts. I added into cookbooks/cats/metadata.rb : conflicts   "dog". But chef-client does both "cats" and "dogs" cookbooks. What I did wrong?
[2013-06-18 15:25:53 -0400] Nyss:  Good day, guys. I want to check conflicts. I added into cookbooks/cats/metadata.rb : conflicts   "dog". But chef-client does both "cats" and "dogs" cookbooks. What I did wrong?
[2013-06-18 15:28:22 -0400] toioiz: question, if I want to include a recipe from one cookbook to another, but put a version on it, is include_recipe "cookbook::recipe" = "1.0.0" the right syntax? Can't seem to find an example of it.
[2013-06-18 15:30:35 -0400] Nyss: toioiz, try depends in metadata.rb
[2013-06-18 15:30:56 -0400] chef-user: Hello
[2013-06-18 15:31:09 -0400] chef-user: Req Help on Opscode Chef Community Cookbook
[2013-06-18 15:31:14 -0400] chef-user: ark
[2013-06-18 15:31:20 -0400] stensonb: any ridley experts around?! :)
[2013-06-18 15:31:49 -0400] chef-user: stensonb can you help me
[2013-06-18 15:31:58 -0400] stensonb: having success with a ridley call on mac...then get connection errors using the same gem, same ruby, same gemset on window:  https://gist.github.com/stensonb/5806361
[2013-06-18 15:32:29 -0400] stensonb: @chef-user...what's your trouble?
[2013-06-18 15:32:49 -0400] chef-user: I am using the ark community cookbook in my app cookbook
[2013-06-18 15:33:01 -0400] chef-user: which uses the action install_with_make
[2013-06-18 15:33:19 -0400] chef-user: but it is not executing the make and make install commands
[2013-06-18 15:33:55 -0400] ianco: toioiz, use environments to peg versions
[2013-06-18 15:34:43 -0400] chef-user: execute "unpack #{new_resource.release_file}" do     command unpack_command     cwd new_resource.path     environment new_resource.environment     notifies :run, "execute[autogen #{new_resource.path}]"     notifies :run, "execute[configure #{new_resource.path}]"     notifies :run, "execute[make #{new_resource.path}]"     notifies :run, "execute[make install #{new_resource.path}]"     action :nothing   end
[2013-06-18 15:34:48 -0400] stensonb: @chef-user...i don't have any experience with the ark cookbook.  which action is being called in your resource?
[2013-06-18 15:34:52 -0400] chef-user: it has everything in it to execute
[2013-06-18 15:35:02 -0400] chef-user: but the make and make install are not runing
[2013-06-18 15:35:03 -0400] stensonb: @chef-user...use gists...format makes it easier to read.
[2013-06-18 15:35:37 -0400] chef-user: http://www.fpaste.org/19403/69725137/
[2013-06-18 15:36:10 -0400] chef-user: install_with_make action
[2013-06-18 15:37:24 -0400] stensonb: so, your unpack resource, by default, does nothing.  you sure you're notifying this somewhere else?
[2013-06-18 15:38:07 -0400] chef-user: yes
[2013-06-18 15:43:14 -0400] patcon: jtimberman: can I swap out this mysql grant override technique for a cleaner way of doing things? https://github.com/opscode-cookbooks/mysql/commit/ff402eaa3a056febd57c3c5e728121e3831f70fb
[2013-06-18 15:44:24 -0400] patcon: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L175-L186
[2013-06-18 15:44:30 -0400] patcon: jtimberman: ^^ It's still in the code after 3 years, but I feel like having a `grants_source` or `grants_cookbooks` attr would be cleaner?
[2013-06-18 15:45:40 -0400] mutombo: greetings
[2013-06-18 15:45:41 -0400] Nyss: Guy, "conflicts" in metdata.rb does not work. Can you explain what I do wrong?
[2013-06-18 15:47:22 -0400] mutombo: i'm struggeling right now with configuring my private chef server. I've installed the ubuntu package and the system works fine so far, but i cant find a private-chef.rb anywhere
[2013-06-18 15:48:16 -0400] mutombo: at /etc/chef-server is only a chef-server-running.json and when i modify this file, it gets overwritten when a do a chef-server-ctl reconfigure
[2013-06-18 15:49:45 -0400] toioiz: Nyss That worked great, thanks, basically depends "cookbook" = "version" in metadata.rb, then include_recipe "cookbook" in the actual recipe.rb
[2013-06-18 15:50:54 -0400] Nyss: @toioiz, welcome
[2013-06-18 16:02:41 -0400] mutombo: ok seems like the documentations is outdated: http://docs.opscode.com/server/private_chef_1x_install.html
[2013-06-18 16:03:12 -0400] mutombo: is there some recent documentation, how the chef-server.rb should look like?
[2013-06-18 16:06:01 -0400] Nyss: @mutombo, I dont have  chef-server.rb
[2013-06-18 16:07:05 -0400] mutombo: yeah it works fine wothout
[2013-06-18 16:07:08 -0400] mutombo: without
[2013-06-18 16:07:19 -0400] mutombo: but i want to add ldap auth
[2013-06-18 16:07:53 -0400] mutombo: as far as i understood it, i can create a chef-server.rb and it will read all settings from there
[2013-06-18 16:07:59 -0400] Nyss: @mutombo, for what?
[2013-06-18 16:08:46 -0400] mutombo: the users can login then via their ldap account
[2013-06-18 16:09:17 -0400] Majost: blarg... I am still having attribute issues with overriding ['tomcat']['base_version'] from a wrapper cookbook
[2013-06-18 16:09:26 -0400] Nyss: @mutombo, login to where? To chef-server management server?
[2013-06-18 16:09:32 -0400] mutombo: the webui
[2013-06-18 16:10:23 -0400] mutombo: but it looks like this isnt supported yet with the current cookbook
[2013-06-18 16:11:01 -0400] mutombo: i can overwrite other chef server settings via chef-server.rb, but its fails with anything about ldap
[2013-06-18 16:13:17 -0400] mutombo: sorry, gtg to catch my train
[2013-06-18 16:13:35 -0400] Nyss: @mutombo, sorry, I cant help you with this question.
[2013-06-18 16:13:40 -0400] mutombo: np
[2013-06-18 16:14:08 -0400] mutombo: i'll try again tomorrow, guess i need to read the chef-server cookbook
[2013-06-18 16:14:26 -0400] mutombo: bye :)
[2013-06-18 16:16:19 -0400] Nyss: Can anyone help me with "conflicts" in metadata.rb ?
[2013-06-18 16:22:15 -0400] caryp: Nyss: what is the error you are seeing?
[2013-06-18 16:23:43 -0400] Nyss: @caryp, no errors and warnings. I have added "conflict "dogs"'. chef-client does both cats and dogs without any notice.
[2013-06-18 16:27:26 -0400] caryp: Nyss: ah, ic.  Sorry, I have not used "conflicts" with chef-client before.
[2013-06-18 16:27:53 -0400] Nyss: ok,
[2013-06-18 16:27:55 -0400] caryp: I have to run ATM, but what version of Chef client are you running.  Maybe I can look into when I get back
[2013-06-18 16:28:11 -0400] Nyss: 11.4.4
[2013-06-18 16:28:24 -0400] Nyss: two cookbooks, Cats, Dogs.
[2013-06-18 16:29:00 -0400] Nyss: Both assigned to node. In metadata.rb record about conflicts with other cookbook
[2013-06-18 17:01:52 -0400] idlemichael: i'm trying to do a "simple" knife client list, with the same USER.pem in my kitchen/.chef/USER.pem, and on the server /home/USER/.chef/USER.pem, but am getting a: "Response:  Invalid signature for user or client 'USER'" -- where USER is a more reasonable user name
[2013-06-18 17:03:50 -0400] ddyke: has anyone had an issue using berks with chef-server on ec2?
[2013-06-18 17:04:16 -0400] ddyke: I am able to use knife to communicate with the chef server, but when i am attempting to berks upload i get connection refused
[2013-06-18 17:06:46 -0400] cjerdonek: is there a way to set a node attribute and prevent it from persisting to chef server (e.g. a plain-text database password)?
[2013-06-18 17:22:05 -0400] idlemichael: what happens if your chef-server has a client, and a user with the same name?
[2013-06-18 17:31:29 -0400] jmartin: how can i check to see if an attribute is not nil in an attributes file? just node['attrib'].nil?
[2013-06-18 17:34:31 -0400] patcon: anyone here working on test-kitchen extensively? wondering what the vision with kitchen-ec2 is, and whether the direction is to move toward leveraging vagrant for all driver types
[2013-06-18 17:36:26 -0400] jmartin: nvm, forgot about chef-shell
[2013-06-18 17:42:47 -0400] miah: i think the drivers for test-kitchen are going to stay fairly open
[2013-06-18 17:42:58 -0400] miah: and not tied to a specific third party
[2013-06-18 18:27:30 -0400] chrisstreeter: hi everyone, i've got a question about chef and jenkins
[2013-06-18 18:28:20 -0400] chrisstreeter: i'm setting up jenkins using chef, and so far haven't figured out a good way to have chef configure my plugins. do people just store the jenkins plugin XML configuration as templates or files?
[2013-06-18 18:34:58 -0400] bixu: Is anyone aware of a provider for Chef that can detect the default package installation path for one's platform?
[2013-06-18 18:35:39 -0400] bixu: I'm thinking it should be possible to get this from apt/yum/pkgsrc configuration files...?
[2013-06-18 18:39:36 -0400] siezer: cd
[2013-06-18 18:39:38 -0400] siezer: er
[2013-06-18 18:40:38 -0400] curiousbiped: so I have an odd issue running chef-client (not chef-solo) in vagrant 1.2.2 where it takes _forever_ to sync the cookbooks from opscode. Bringing up the VM and converging the cookbook I'm working with takes ~5 minutes with chef-solo, but ~40-45 minutes for the same cookbook with chef-client.
[2013-06-18 18:41:08 -0400] curiousbiped: doing the same thing in ec2 is ~5-8 minutes depending on how long it takes ec2 to give me an instance.
[2013-06-18 18:50:34 -0400] cobby: Hello...  I am having a bit of an issue with encrypted data bags on chef 11.4.4 and vagrant 1.2.2.  I have successfully created an encrypted data bag and I can use knife to show it and decrypt it with no issue.  But once I use vagrant provision <server> it tells me "Data Bag Items must contain a Hash or Mash!".  When I add it to a recipe.  I used the following information for this lookup.  http://docs.opscode.com/essentials_data_bags_encr
[2013-06-18 18:51:14 -0400] cobby: Not sure what I am doing wrong, based on the docs it should just work.
[2013-06-18 19:10:34 -0400] toddf58: Hi,
[2013-06-18 19:12:10 -0400] toddf58: using environments, chef-client is not downloading the templates for the recipe that is using the envirnment.?
[2013-06-18 19:12:25 -0400] toddf58: any guesses?
[2013-06-18 19:12:38 -0400] Otterley: environments only constrain cookbook versions; they do not affect the run_list any other way
[2013-06-18 19:13:12 -0400] Otterley: ensure your node's run list contains the recipes in question
[2013-06-18 19:13:25 -0400] Otterley: either directly or via a role
[2013-06-18 19:13:49 -0400] toddf58: Yup, the recipe downloads minus the templates.
[2013-06-18 19:14:08 -0400] profil: Hey guys, I got a question about the chef-repo in github. In that gitignore we ignore all the pem files in .chef. Shouldn't we also ignore the knife.rb file in .chef also? You specify your username and the path to the pem-file which is to no use to anybody else?
[2013-06-18 19:14:09 -0400] jwitrick: i keep getting the following error when trying to install chef:Cannot load gem at [chef-ssl-gem]
[2013-06-18 19:14:23 -0400] profil: -als
[2013-06-18 19:14:24 -0400] profil: o
[2013-06-18 19:14:44 -0400] Otterley: toddf58, Chef lazily downloads templates from the server.  Does the recipe being run declare the resource?
[2013-06-18 19:15:53 -0400] toddf58: where would the resource be declaired?
[2013-06-18 19:15:58 -0400] Otterley: in the recipe
[2013-06-18 19:16:04 -0400] Otterley: template "foo" do  end
[2013-06-18 19:17:28 -0400] Otterley: jwitrick, how are you installing chef?
[2013-06-18 19:18:10 -0400] jwitrick: gem install chef version 10.26.0
[2013-06-18 19:18:15 -0400] toddf58: if node.chef_environment == "dev"
[2013-06-18 19:18:35 -0400] toddf58: template "etc.......do
[2013-06-18 19:18:37 -0400] toddf58: end
[2013-06-18 19:18:55 -0400] toddf58: yup the templates are being called
[2013-06-18 19:19:53 -0400] Otterley: toddf58, I don't know whether that will work.  have you tried only_if inside the template declaration instead of wrapping it in an 'if' predicate?
[2013-06-18 19:20:19 -0400] geggam: jwitrick, can i ask you you arent installing with the rpm ?
[2013-06-18 19:20:21 -0400] Otterley: jwitrick, suggest installing Omnibus Chef instead, see http://www.opscode.com/chef/install/
[2013-06-18 19:20:49 -0400] jwitrick: im use rvm and i dont want to mess my system up since i have multiple gemsets, etc..
[2013-06-18 19:21:10 -0400] geggam: the omnibus installer embeds everything
[2013-06-18 19:21:10 -0400] jwitrick: but i got it to work by using bundle install. and having it lock in chef below 11.
[2013-06-18 19:21:14 -0400] Otterley: jwitrick, omnibus chef is isolated from any other Rubies you may have.  it reduces a lot of friction
[2013-06-18 19:21:25 -0400] toddf58: if node.chef_environment == "development"  ############################################### #eNasco template "/etc/httpd/sites-available/enasco-site" do   source "enasco-site.erb"   owner "root"   group "root"   mode "0644" variables({      :domain_prefix => "dev",    }) end   template "/etc/httpd/sites-available/enasco-ssl-site" do   source "enasco-ssl-site.erb"   owner "root"   group "root"   mode "0644" variables({      :domain_prefi
[2013-06-18 19:21:35 -0400] jwitrick: not if i want to run chef10 and chef11 on the same machine
[2013-06-18 19:21:54 -0400] Otterley: jwitrick, what's the use case for both?
[2013-06-18 19:22:06 -0400] geggam: not sure i can see the point of doing that in the age of virtualization
[2013-06-18 19:23:00 -0400] jwitrick: I am having to support an old system that is using only chef10 and I want all my tests etc.. to be using the same version as my prod env.
[2013-06-18 19:23:10 -0400] jwitrick: while I need to work on supporting a new env using chef 11.
[2013-06-18 19:23:35 -0400] geggam: http://www.devopsdays.org/events/2013-mountainview/
[2013-06-18 19:24:04 -0400] jwitrick: either way using gemfile and bundle install solved my issues.
[2013-06-18 19:25:30 -0400] toddf58: The use case is to change the vhost names for dev test prod etc.
[2013-06-18 19:34:09 -0400] ryker: Anyone know if there is anything that can automatically trace through Chef code and tell me what files *might* be modified on a node?  I'm looking to provide our developement team and management with a list of files that Chef *might* change on a server.
[2013-06-18 19:35:14 -0400] jwitrick: chef-client -w
[2013-06-18 19:35:39 -0400] awgross: ryker: the term you want is "whyrun" when googling
[2013-06-18 19:36:00 -0400] ryker: Guess I could install chef-client 11 on a server and take a look at the output
[2013-06-18 19:36:05 -0400] ryker: I'm still on 10.x
[2013-06-18 19:36:49 -0400] jwitrick: why run is available on chef-client >= 10.14
[2013-06-18 19:36:50 -0400] ryker: I was actually thinking of something that I could point at the code in my repo and have it generate a list that I could throw in a webpage that someone could check.
[2013-06-18 19:37:59 -0400] ryker: ah, I was thinking whyrun came out in 11.  oops. :)
[2013-06-18 19:38:56 -0400] ryker: yeah, i guess that would probabaly work for me.  chef-client -w | egrep 'cookbook|template'
[2013-06-18 19:39:19 -0400] ryker: ty
[2013-06-18 19:39:56 -0400] ryker: boy it's quiet in here today.  I guess everyone is at Velocity.  Wish I was. :(
[2013-06-18 19:41:40 -0400] Majost: I would love to see this added to the next version of chef http://tickets.opscode.com/browse/CHEF-4234
[2013-06-18 19:42:08 -0400] Majost: How would a person like me go about advocating for something like this?
[2013-06-18 19:42:16 -0400] Majost: (aside from supplying the patch)
[2013-06-18 19:45:03 -0400] toddf58: chef-client -w | egrep 'cookbook|template'  we have a winner!!!!  what did that do??
[2013-06-18 19:47:28 -0400] ryker: toddf58: actually, I just tried this and it does exactly what I need.  chef-client -w 2>&1 | sed -n 's/.*\(file\|template\|cookbook_file\)\[\(.*\)\].*$/\2/p'
[2013-06-18 19:48:33 -0400] ryker: that gives me all the files that might be changed.
[2013-06-18 19:52:10 -0400] toddf58: cool give me a minute, I'm behind
[2013-06-18 19:59:23 -0400] j^2: if i want to run chef-client but NOT download my cookbooks because i had to make a local change to my cache, how would i do that?
[2013-06-18 20:00:44 -0400] jmartin: j^2: that sounds like you are doing something wrong. what did you need to change?
[2013-06-18 20:01:52 -0400] idlemichael: im' following htese notes very closely( http://www.opscode.com/blog/2013/03/12/5106/ ), and can do everything up until knife upload /, where I see this behavior: http://pastebin.com/F1WNReyv
[2013-06-18 20:02:08 -0400] idlemichael: knife upload works for 1-15+ items, and then "mysteriously" fails
[2013-06-18 20:02:13 -0400] j^2: jmartin: one sec
[2013-06-18 20:02:15 -0400] j^2: phone
[2013-06-18 20:02:30 -0400] idlemichael: i can keep re-running the command, and it will keep uploading NEW things, but randomly failing
[2013-06-18 20:07:00 -0400] j^2: jmartin: i have a excute apt-get updat ein a cookbook, i'm running it on a rhel box; i'd like to skip that apt-ge update
[2013-06-18 20:07:18 -0400] jmartin: j^2: just fix that in your cookbook then
[2013-06-18 20:07:22 -0400] j^2: :-/
[2013-06-18 20:07:29 -0400] j^2: i just need to run it once :(
[2013-06-18 20:07:53 -0400] jmartin: j^2: its a simple fix, you could just wrap that block in an if statement
[2013-06-18 20:09:10 -0400] jmartin: or use the package resource
[2013-06-18 20:09:32 -0400] j^2: ok :) thanks!
[2013-06-18 20:13:14 -0400] idlemichael: in case anyone was curious, the chef-server.rb outlined in the comments here: http://tickets.opscode.com/browse/CHEF-4226 solved my problem
[2013-06-18 20:14:58 -0400] idlemichael: er, maybe not 100% solved it.. :)
[2013-06-18 20:15:01 -0400] idlemichael: but mostly
[2013-06-18 20:18:45 -0400] j^2: jmartin: https://gist.github.com/jjasghar/4ed35badcb9970e27851 :)
[2013-06-18 20:19:35 -0400] jmartin: j^2: there you go :D
[2013-06-18 20:19:54 -0400] j^2: :)
[2013-06-18 20:33:28 -0400] omry_: hi, is it possible to have several 'run levels' with chef, where - for example - the first run level is only run to do the base machine setup which is common, and the subsequent level is the actual machine specific level which can run a specific runlist?
[2013-06-18 20:33:54 -0400] toddf58: updating the chef client to 11 showed me an error in another recipe, which I fixed and fixed the templates problem.  thanks.....
[2013-06-18 20:33:55 -0400] gleam: have a role for common stuff and then roles for the more specific stuff
[2013-06-18 20:33:58 -0400] gleam: apply both
[2013-06-18 20:34:03 -0400] Otterley: +1 gleam
[2013-06-18 20:34:28 -0400] Otterley: we do it with cookbooks, not roles, but yes
[2013-06-18 20:34:31 -0400] gleam: yeah
[2013-06-18 20:34:44 -0400] omry_: gleam: the basic stuff involves reboots. I dont want the userland stuff to even start before the machine provisioning steps are done
[2013-06-18 20:35:02 -0400] Otterley: unless you're installing a new kernel there should be no need to reboot
[2013-06-18 20:35:12 -0400] gleam: there might be on windows
[2013-06-18 20:35:18 -0400] omry_: Otterley: or bios upgrades.
[2013-06-18 20:35:21 -0400] Otterley: oh, right, I keep forgetting about windows
[2013-06-18 20:35:52 -0400] omry_: in any case, reboots are needed. ideally 'userland' runbooks will not run before the machine is fully configured
[2013-06-18 20:36:05 -0400] omry_: (= done with the one time provioning steps)
[2013-06-18 20:36:13 -0400] Otterley: omry_, you can guard running of other recipes on existence of files that are only touched after the prerequisite tasks have been run
[2013-06-18 20:36:18 -0400] gleam: yep
[2013-06-18 20:36:26 -0400] gleam: or set an attribute
[2013-06-18 20:36:29 -0400] gleam: or even directly modify run list
[2013-06-18 20:36:32 -0400] gleam: shrug
[2013-06-18 20:37:38 -0400] omry_: Otterley: what will check the files? can the base cookbook include other cookbooks from the client side (after it decided that it's done forever) ?
[2013-06-18 20:37:52 -0400] gleam: populate your run list with everything you want it to do
[2013-06-18 20:38:12 -0400] gleam: in the cookbooks that depend on initial setup have the userland stuff wrapped in a conditional block checking for files or attributes
[2013-06-18 20:38:26 -0400] Otterley: +1
[2013-06-18 20:38:43 -0400] Otterley: there's more than one way to do it, but that's the essential idea
[2013-06-18 20:38:48 -0400] omry_: gleam: I am looking for an infrastructure like solution that will not involve changes to the userland cookbooks.
[2013-06-18 20:38:56 -0400] gleam: then you're out of luck
[2013-06-18 20:39:33 -0400] omry_: I said 'like', it does not be an explicit part of chef. but ideally will not involve changes to each cookbook we are using.
[2013-06-18 20:39:36 -0400] Otterley: well, you don't have to change the user land cookbooks; you can write your own cookbooks that "wrap" those and only include those recipes if the prereqs have been satisfied
[2013-06-18 20:40:29 -0400] omry_: Otterley: that sounds in the direct direction. do you have an example of something like that?
[2013-06-18 20:41:37 -0400] omry_: spheromak: ty
[2013-06-18 20:45:41 -0400] Otterley: omry_, suppose you have an apache cookbook.  you'd create a new cookbook acme_apache, in which you define recipes that instantiate resources or include recipes defined in the apache cookbook, but only if the prereqs have been satisfied.  acme_apache would declare a dependency on apache in metadata.rb and the node's run_list would contain acme_apache::recipe instead of apache::recipe
[2013-06-18 20:47:23 -0400] omry_: Otterley: I see how this can work but I am looking for something more transparent. maybe even changing the chef server.
[2013-06-18 20:48:12 -0400] omry_: so there is a chef server with the provisioning cookbooks, that reboots and does all that stuff and finally changes the chef server to the final one, where it will remain for ever.
[2013-06-18 20:49:25 -0400] Otterley: you can certainly do that, but that's not how I'd do it
[2013-06-18 20:49:47 -0400] Otterley: you'd have to maintain 2 Chef servers, each with differing state for the same node
[2013-06-18 20:50:08 -0400] Otterley: that sounds like a management nightmare in the long term
[2013-06-18 20:50:30 -0400] geggam: why not make chef-solo roles to then connect to th server ?
[2013-06-18 20:50:51 -0400] omry_: Otterley: doing it the way you said will a lot of a work for a large cookbook repository (which we have)
[2013-06-18 20:51:18 -0400] Otterley: I sympathize, I really do
[2013-06-18 20:51:33 -0400] Otterley: the other alternative, which we do, is move all the pre-Chef work out of Chef :)
[2013-06-18 20:52:05 -0400] Otterley: by pre-Chef I mean "pre-userland host preparation automation"
[2013-06-18 20:52:05 -0400] spheromak: uh-oh back to the bootstrap discussion :)
[2013-06-18 20:52:25 -0400] omry_: Otterley: I used to work with puppet, there is a concept there  (which I never actually used) of Enviornment (IIRC) which is probably solving this problem.
[2013-06-18 20:52:39 -0400] spheromak: omry_, what are you trying to get done (high level)
[2013-06-18 20:54:09 -0400] omry_: spheromak: avoid userland cookbooks from running before the machine provisioning cookbooks are done, and do it in a generic way which will not involve changes to the userland cookbooks
[2013-06-18 20:54:33 -0400] omry_: s/avoid/prevent
[2013-06-18 20:54:41 -0400] spheromak: omry_, chef has a similar concept of environments (infact i thik puppet borrowed it from chef)
[2013-06-18 20:54:50 -0400] spheromak: omry_, so whats a userland and whats the machine provisioned cooks ?
[2013-06-18 20:55:04 -0400] spheromak: this is new language/concept for me that I haven't seen used
[2013-06-18 20:55:27 -0400] spheromak: omry_, you are runnign a chef-solo run ?
[2013-06-18 20:55:32 -0400] spheromak: and then a chef-server run ?
[2013-06-18 20:55:48 -0400] omry_: spheromak: userland is services. say  apache. provisioning is hardware specific, kernel, possibly raid,  bios upgrades etc.
[2013-06-18 20:56:08 -0400] spheromak: and this is in your run_list for the node ?
[2013-06-18 20:56:49 -0400] omry_: spheromak: I am actually not sure what we are running now, I have a user's perspective. I have my role whith a few cookbooks and it somehow gets ran. I can ask further about how we are doing that exactly.
[2013-06-18 20:56:58 -0400] spheromak: seems like you have a role (or role cook) and you want to enforce ordering. run list is order-seen.  So maybe I am misunderstanding how this is an issue ?
[2013-06-18 20:57:09 -0400] spheromak: omry_, ok well the run_list is ordered (array)
[2013-06-18 20:57:34 -0400] spheromak: you can have roles that call roless or cooks that call cooks. so if you want that machine stuff first it should be a role or role cook, and be the first thing in the nodes run_list
[2013-06-18 20:57:42 -0400] spheromak: omry_, how are you bootstrapping the node ?
[2013-06-18 20:57:57 -0400] spheromak: omry_, if its with knife-bootstrap this is all very simple as you can specify the run_list there
[2013-06-18 20:59:19 -0400] omry_: spheromak: not sure - but I will pass this info to those who know how we bootstrap the node.  thanks for the tips.
[2013-06-18 21:02:08 -0400] trilitheus: anyone know syntax in test-kitchen-1.0 to forward more than one port?
[2013-06-18 21:02:14 -0400] trilitheus: .kitchen.yml
[2013-06-18 21:03:16 -0400] spheromak: trilitheus, its gonna be driver specific  I am assuming vagrant here ?
[2013-06-18 21:03:24 -0400] trilitheus: spheromak, yes
[2013-06-18 21:03:45 -0400] spheromak: trilitheus,  look @ https://github.com/opscode/kitchen-vagrant
[2013-06-18 21:03:53 -0400] spheromak: under network
[2013-06-18 21:04:02 -0400] trilitheus: thanks
[2013-06-18 21:04:43 -0400] spheromak: trilitheus, meant to link the readme :) but the doc is there
[2013-06-18 21:05:15 -0400] jmartin: having just gotten to love berkshelf + vagrant...i need to move on to test-kitchen too
[2013-06-18 21:05:39 -0400] spheromak: yea TK 1.0
[2013-06-18 21:05:42 -0400] spheromak: is great
[2013-06-18 21:06:21 -0400] spheromak: i've got my standard kit now thats  cane/tailor/foodcritic/TK all in rake with a Guardfile :D
[2013-06-18 21:06:35 -0400] spheromak: makes working on some of my bigger things much nicer across the org
[2013-06-18 21:06:46 -0400] jmartin: spheromak: i need such a setup! hah
[2013-06-18 21:07:17 -0400] jmartin: especially if i can fire off TK into a VMware cluster
[2013-06-18 21:07:26 -0400] jmartin: as it appears i can
[2013-06-18 21:08:28 -0400] jmartin: hrm actually
[2013-06-18 21:08:46 -0400] spheromak: is there a driver for vmware ?
[2013-06-18 21:09:03 -0400] jmartin: there is it seems, but it requires a vagrant plugin that you have to buy
[2013-06-18 21:09:12 -0400] spheromak: I use openstack/ec2/vargant/lxc drivers right now (depending on where the test is being run)
[2013-06-18 21:09:22 -0400] jmartin: yeah, openstack would work better for me
[2013-06-18 21:12:29 -0400] awgross: Hey all, just released Vagrant-Chef-Zero for testing, if you are interested please check it out. https://github.com/andrewgross/vagrant-chef-zero
[2013-06-18 21:13:08 -0400] spheromak: awgross, nice
[2013-06-18 21:13:44 -0400] spheromak: awgross, very nice
[2013-06-18 21:14:43 -0400] cwj: excited to play with that
[2013-06-18 21:14:43 -0400] awgross: code is still kinda fugly due to me writing it while learning how to write Vagrant plugins, but "It works on my machine(tm)"
[2013-06-18 21:14:58 -0400] spheromak: :P
[2013-06-18 21:21:51 -0400] idlemichael: is there a way to configure the validation key location when doing "knife ec2 server create" ?
[2013-06-18 21:23:23 -0400] kallen: i'm looking to download a chef-server (omnibus) installer from http://www.opscode.com/chef/install/ for ubuntu. I only see 11.x pkgs in the drop-down menu. Where can i get 10.x omnibus pkg?
[2013-06-18 21:23:31 -0400] hochmann: Who's here?
[2013-06-18 21:24:14 -0400] hochmann: Looking for some extra examples for a good bash to chef scripting
[2013-06-18 21:24:17 -0400] hochmann: any ideas?
[2013-06-18 21:29:54 -0400] jameson__: my first one was like: bash "my bash script" do code <<-EOS code here EOS action :run
[2013-06-18 21:32:13 -0400] spheromak: jmartin, https://github.com/spheromak/test_cook_skeleton   if yer interested. been meaning to pull it out into something liek this for coworkers
[2013-06-18 21:33:49 -0400] josephholsten: WOO!!!
[2013-06-18 21:34:17 -0400] josephholsten: root_group ohai plugin is merged into master!!!
[2013-06-18 21:34:25 -0400] spheromak: heh
[2013-06-18 21:34:57 -0400] juliancdunn: josephholsten: w00t
[2013-06-18 21:35:06 -0400] juliancdunn: many yaks will retain their hair
[2013-06-18 21:35:08 -0400] jmartin: spheromak: thanks
[2013-06-18 21:35:24 -0400] spicy: has anyone gotten a custon SSL cert working with chef 11? show-config has the right paths but i'm still seeing the self-signed cert on the web UI
[2013-06-18 21:35:50 -0400] jmartin: spheromak: im going to give it a shot now actually heh
[2013-06-18 21:35:59 -0400] josephholsten: spicy: I was just planing to investigate that this afternoon
[2013-06-18 21:36:26 -0400] spicy: josephholsten: let me know how it goes then :)
[2013-06-18 21:36:30 -0400] spheromak: jmartin, well it _should_ work
[2013-06-18 21:36:34 -0400] spheromak: :P
[2013-06-18 21:36:59 -0400] spheromak: jmartin, missin in there is the chefspec bits
[2013-06-18 21:37:14 -0400] spheromak: tho they shoudl run from the rake task when put in test/spec
[2013-06-18 21:42:55 -0400] Otterley: josephholsten, what's that do?
[2013-06-18 21:48:34 -0400] jmartin: spheromak: it is already helping me out, im a test-kitchen newbie, ive got a recipe running (even though i lack tests *for shame*) on the various baseboxes you have listed
[2013-06-18 21:49:49 -0400] spheromak: jmartin, there prob should be ubuntu 10 and centos 5 boxes as well. I don't use them here tho so they aren't in that skel
[2013-06-18 21:50:09 -0400] jmartin: yeah, now that i think about it
[2013-06-18 21:50:19 -0400] jmartin: we dont use ubuntu
[2013-06-18 21:50:22 -0400] jmartin: so i can probably remove that
[2013-06-18 21:50:23 -0400] jmartin: he
[2013-06-18 21:50:25 -0400] jmartin: heh*
[2013-06-18 21:50:42 -0400] jmartin: meh, can't hurt i guess
[2013-06-18 21:50:58 -0400] spheromak: if your gonan do any public cooks good to test on both :)
[2013-06-18 21:51:21 -0400] jmartin: yep
[2013-06-18 21:51:42 -0400] jmartin: across the org we might use other OSes, so if i can get familiar with this, i shall spread it
[2013-06-18 21:52:01 -0400] jmartin: cant hurt to have a good workflow
[2013-06-18 21:53:00 -0400] spheromak: jmartin, oh yea and ignore the cluster stuff in kitchen :P thats for vagabond, which I don't use on most cooks
[2013-06-18 21:58:28 -0400] jmartin: spheromak: hrm welp something broke, probably just my setup
[2013-06-18 22:25:50 -0400] Otterley: chexperts:
[2013-06-18 22:26:35 -0400] Otterley: if I am writing my own LWRP that wraps another LWRP, should multiple actions against the same resource name throw a resource redefinition warning?
[2013-06-18 22:27:00 -0400] Otterley: e.g. resource "foo" do action [:start, :enable]  end
[2013-06-18 22:28:01 -0400] Otterley: the only method I'm wrapping is :enable, the others are merely passed through to the underlying resource
[2013-06-18 22:29:35 -0400] piclez: hi, can please someone help to setup a recipe for running passenger with nginx as module or standalone please?
[2013-06-18 22:30:29 -0400] swedish_chef: @coderanger do you have any recommendations for cookbooks showing off the use of application_ruby in a production environment: SSL, bluepill, etc?
[2013-06-18 22:31:18 -0400] coderanger: swedish_chef: Sorry, not much of a Rails person
[2013-06-18 22:31:32 -0400] coderanger: I just kind of ported what was already there
[2013-06-18 22:31:36 -0400] swedish_chef: got it
[2013-06-18 22:31:52 -0400] coderanger: and I think I tried the example Radiant deploy, but thats like Rails 2.3 and weird
[2013-06-18 22:32:03 -0400] swedish_chef: @coderanger yeah, old skool
[2013-06-18 22:32:19 -0400] swedish_chef: what do you like to do for Web apps?
[2013-06-18 22:32:59 -0400] coderanger: Django/Flask
[2013-06-18 22:33:07 -0400] coderanger: and now learning Node for work stuffs
[2013-06-18 22:33:23 -0400] swedish_chef: nice
[2013-06-18 22:33:39 -0400] Otterley: node *shiver*
[2013-06-18 22:33:59 -0400] Otterley: I still have nightmares
[2013-06-18 22:34:18 -0400] coderanger: Still better than Rails
[2013-06-18 22:34:44 -0400] Otterley: I'd like to erase everything that happened in app frameworks since 2002, please
[2013-06-18 22:35:11 -0400] swedish_chef: @coderanger on a separate note, related to our chat last night about subresources, I came up with a way to cleanly subclass LWRPs so that I can create new top-level resources that essentially delegate to their parent as opposed to deal with the sub-resource problem
[2013-06-18 22:35:36 -0400] swedish_chef: @coderanger doesn't solve the general problem you are going after but it takes some of the pain away for simple cases
[2013-06-18 22:36:11 -0400] coderanger: swedish_chef: Ooh la la, gist?
[2013-06-18 22:37:04 -0400] swedish_chef: @coderanger not generalized yet but I want to turn it into a general utility and do a blog post in case you think it might be helpful. One sec for the gist
[2013-06-18 22:41:11 -0400] swedish_chef: @coderanger https://gist.github.com/ssimeonov/5810145
[2013-06-18 22:50:31 -0400] tabolario: Starting to go through the talks from ChefConf this year, any recommendations on which to watch?
[2013-06-18 22:54:35 -0400] swedish_chef: @coderanger btw, learning that Chef essentially runs on Ruby's method_missing means there is a way to solve the sub-resourcing problem in an entirely different way: by defining methods for the subresources for the scope of the parent's block. The binding then happens automatically: every subresource will end up calling a parent.i_am_subresource_X(*args, &block) method.
[2013-06-18 22:55:27 -0400] coderanger: tabolario: The keynote from reset (jamie windsor) is basically required viewing
[2013-06-18 22:56:33 -0400] tabolario: that would be the berkshelf one right?
[2013-06-18 22:56:38 -0400] coderanger: swedish_chef: looks nifty :) thanks
[2013-06-18 22:57:33 -0400] tabolario: If so, then that's great, that's the first one on my watch list so far :)
[2013-06-18 22:57:47 -0400] coderanger: Yep
[2013-06-18 22:57:56 -0400] swedish_chef: @coderanger I will take some time to turn into a libraries utility method along the lines of subclass_lwrp_resource(name, parent, &block)
[2013-06-18 22:58:02 -0400] coderanger: more about "the berkshelf way" than berkshelf itself as a tool
[2013-06-18 22:58:31 -0400] tabolario: I'll try to watch that on my commute in a minute
[2013-06-18 22:58:32 -0400] tabolario: Thanks!
[2013-06-18 22:58:34 -0400] chrisfordham: coderanger: thanks again for your help yesterday. i am going to test it out today with a modular blank project and see if that was the problem
[2013-06-18 23:01:01 -0400] trilitheus: hi spheromak thanks for helping earlier but i've got this in my kitchen.yaml https://github.com/trilitheus/test-varnish/blob/master/.kitchen.yml
[2013-06-18 23:01:15 -0400] trilitheus: but no forwarded ports
[2013-06-18 23:02:11 -0400] trilitheus: i know I'm probably doing something obviously wrong :)
[2013-06-18 23:26:26 -0400] spheromak: trilitheus, remove the ports from the top driver_config section and add it where you define the driveR_config for the ubuntu box
[2013-06-18 23:27:21 -0400] spheromak: inside platform  driver_config.  I've not used the forwarded ports stuff  so I am taking a guess at it, but the ports are probably per-platform
[2013-06-18 23:33:58 -0400] trilitheus: thanks spheromak
[2013-06-18 23:34:11 -0400] spheromak: trilitheus, did it work ?
[2013-06-18 23:34:12 -0400] trilitheus: its when i try to forward two ports it seems to wibble
[2013-06-18 23:34:19 -0400] trilitheus: one port no problem
[2013-06-18 23:34:31 -0400] spheromak: ah
[2013-06-18 23:34:56 -0400] trilitheus: I can do it in vargrantfile, but not seem to be able to propagate it from kitchen.yml
[2013-06-18 23:45:20 -0400] zuhaib: Is there a room for omnibusy-ruby help?  I got a question about the git ssh hook up and how to work around the known ssh host issue for vagrant
[2013-06-18 23:45:32 -0400] zuhaib: s/omnibusy/omnibus/
[2013-06-18 23:57:22 -0400] Majost: What is the best way to ensure some pull requests I have for bug fixes get reviewed or accepted?
[2013-06-18 23:57:34 -0400] Majost: Attend the code review session?
[2013-06-18 23:58:07 -0400] derks: Hello... is it possible to negate a recipe in a nodes runlist?  for example...  i have a role[base] that includes a recipe that I want on all but 1 server.  I'd like to beable to say '!recipe[XXX]' in that one nodes runlist
[2013-06-18 23:58:11 -0400] derks: ?

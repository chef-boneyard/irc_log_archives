[2013-06-15 00:03:27 -0400] coderanger: mveitas: nil, usually
[2013-06-15 00:03:44 -0400] coderanger: and then make your recipe throw an exception at compile time if it is still null
[2013-06-15 00:04:51 -0400] mveitas: What do you mean by compile time?
[2013-06-15 00:05:09 -0400] stormerider: when the recipe is evaluated on the client
[2013-06-15 00:06:00 -0400] mveitas: ok... fair enough, so it will just fail when being evaluated. Thanks!
[2013-06-15 00:08:04 -0400] chip-: webbower: ohai. Been AFK all day.
[2013-06-15 00:08:11 -0400] chip-: Looks like you're good though.
[2013-06-15 00:08:40 -0400] webbower: chip- "good" is debatable. Trying to spin up Vagrant/Chef/Berkshelf for work purposes now.
[2013-06-15 00:09:01 -0400] webbower: Trying to remember the process you taught me
[2013-06-15 00:09:13 -0400] webbower: Also diff because I need to spin up CentOS instead of Debian-based
[2013-06-15 00:09:21 -0400] webbower: less familiar with Yum
[2013-06-15 00:09:29 -0400] chip-: It's the same thing with different paint
[2013-06-15 00:09:38 -0400] webbower: I realize that
[2013-06-15 00:09:55 -0400] coderanger: Fun fact, apt supports rpms too
[2013-06-15 00:10:17 -0400] coderanger: I've just never heard of anyone using it, and I'm not sure any tools do it
[2013-06-15 00:10:25 -0400] stormerider: coderanger: yeah, unfortunately there aren't many apt repos for rpms out there
[2013-06-15 00:10:32 -0400] coderanger: :-)
[2013-06-15 00:10:32 -0400] webbower: Also, need to figure out that repo caching trick for yum
[2013-06-15 00:10:43 -0400] stormerider: istr there was one distro that did, but i think they died off
[2013-06-15 00:11:06 -0400] webbower: Anyone know how to do this https://gist.github.com/millisami/3798773 but with Yum repos?
[2013-06-15 00:12:05 -0400] coderanger: webbower: You shouldn't need that, it just speeds up a bit if you are downloading a ton of RPMs
[2013-06-15 00:13:13 -0400] webbower: On another version using Ubuntu, it sped up the package compiling process if I ever destroyed the instance
[2013-06-15 00:13:28 -0400] webbower: Right now, I've been waiting for MySQL to finish compiling for 20 min already
[2013-06-15 00:13:34 -0400] webbower: granted, it is the first run
[2013-06-15 00:13:54 -0400] coderanger: Not sure how it would speed up the actual compile, it would just speed up installing build-essentials
[2013-06-15 00:14:12 -0400] coderanger: package files are not usually that huge though, so unless you are on a really slow network I wouldn't worry about it
[2013-06-15 00:14:24 -0400] webbower: maybe apt caches the compiled binaries?
[2013-06-15 00:14:42 -0400] coderanger: No, that folder just holds downloaded debs
[2013-06-15 00:15:52 -0400] stormerider: vagrant is a tool for managing virtualization instances on-demand, kind of like a local knife-ec2, right?
[2013-06-15 00:16:20 -0400] idlemichael: sort of stormerider
[2013-06-15 00:16:41 -0400] stormerider: why compile mysql yourself instead of using a prebuilt binary from centos or percona or the like?
[2013-06-15 00:16:42 -0400] idlemichael: stormerider: vagrant is just for launching virtual machiens -- it's chef independent
[2013-06-15 00:17:07 -0400] idlemichael: stormerider: per-built binaries assume an environment htat supports them
[2013-06-15 00:17:24 -0400] idlemichael: stormerider: you can also configure mysql MORE if you compile it from source, assuming that's what you want
[2013-06-15 00:17:46 -0400] stormerider: ah, ive never needed to personally.
[2013-06-15 00:18:11 -0400] stormerider: does vagrant support vmware as well as virtualbox?
[2013-06-15 00:18:59 -0400] webbower: chip- You taught me the Deb-ism for setting up vhosts. What's the equivalent for CentOS, et al?
[2013-06-15 00:19:25 -0400] chip-: webbower: Trick question, the apache cookbook on the community site bends centos/rhel apaches to the debian way
[2013-06-15 00:19:32 -0400] coderanger: The bigger and more complex something is (MySQL, Postgres, Apache, whatever) the more likely it is the default options in the distro package aren't what you want
[2013-06-15 00:20:24 -0400] webbower: chip- So I can use the apache_site command for ANY env?
[2013-06-15 00:20:37 -0400] coderanger: webbower: Yep, thats a chef definition
[2013-06-15 00:20:48 -0400] webbower: right
[2013-06-15 00:20:52 -0400] coderanger: We make sure it works the same on any platform
[2013-06-15 00:20:58 -0400] coderanger: for certain defintions of "any"
[2013-06-15 00:21:00 -0400] organicveggie: Random question. Looking for a cookbook that I can't remember the name of. :) Something like artifact-cookbook from RiotGames, but with explicit support for downloading packages from Apache mirrors.
[2013-06-15 00:21:07 -0400] organicveggie: Any ideas what I might be thinking of?
[2013-06-15 00:21:14 -0400] organicveggie: I swear it exists :)
[2013-06-15 00:21:17 -0400] coderanger: organicveggie: I think they are using nexus
[2013-06-15 00:21:29 -0400] coderanger: but they were using artifactory at some point
[2013-06-15 00:21:40 -0400] coderanger: I might have those two backwards
[2013-06-15 00:21:44 -0400] webbower: soooooo... LIghttpd doesn't seem to have as nice support with Chef as Apache or Nginx or am I interpreting the data wrong?
[2013-06-15 00:22:04 -0400] chip-: organicveggie: It is in fact called the artifact cookbook from riotgames.
[2013-06-15 00:22:05 -0400] organicveggie: @coderanger: yeah, they're using nexus now. just looked. so, i was definitely confused.
[2013-06-15 00:22:07 -0400] coderanger: webbower: Yeah, opscode doesn't maintain a cookbook for lighty, and I've never looked for one
[2013-06-15 00:22:11 -0400] chip-: organicveggie: http://bit.ly/1999gFC :P
[2013-06-15 00:22:31 -0400] coderanger: webbower: Lighty kind of fell from grace over the last half decade or so
[2013-06-15 00:22:51 -0400] coderanger: Still in use, but "I want something smaller than Apache" was basically overtaken by nginx
[2013-06-15 00:22:56 -0400] stormerider: nginx seems to have taken over the space that lighty once held
[2013-06-15 00:23:01 -0400] idlemichael: stormerider: vagrant does support vmware
[2013-06-15 00:23:02 -0400] coderanger: Also Apache got much better :)
[2013-06-15 00:23:15 -0400] webbower: I know that, but I think my company jumped on the Lighty train at its (brief) peak and hasn't updated to Nginx since
[2013-06-15 00:23:16 -0400] organicveggie: @chip-: Heh. It doesn't look like the artifact-cookbook from RiotGames supports Apache mirrors. More focused on Nexus downloads.
[2013-06-15 00:23:21 -0400] stormerider: idlemichael: thanks, just found the provider.
[2013-06-15 00:23:34 -0400] ivey: organicveggie: artifact supports nexus and HTTP
[2013-06-15 00:23:39 -0400] ivey: what is an "apache mirror"
[2013-06-15 00:24:06 -0400] coderanger: webbower: Then yeah, you'll have to look around for what is out there in terms of cookbooks or build one
[2013-06-15 00:24:11 -0400] webbower: bleh
[2013-06-15 00:24:27 -0400] coderanger: webbower: Happy to provide pointers, but my lighty knowledge has mostly atrophied
[2013-06-15 00:24:34 -0400] organicveggie: @ivey: if you download a package from Apache, it usually redirects you to a mirror. I swear there was a cookbook that had explicit support for coping with that. But maybe I've lost my mind.
[2013-06-15 00:24:39 -0400] ivey: ah
[2013-06-15 00:24:47 -0400] webbower: This one looks reasonable https://github.com/ctdk/chef-lighttpd
[2013-06-15 00:24:52 -0400] coderanger: I did a trac deploy on top of it like 8 years ago, thats all I remember
[2013-06-15 00:25:07 -0400] organicveggie: That way you wouldn't have to hardcode a URL to a specific Apache mirror.
[2013-06-15 00:25:28 -0400] coderanger: webbower: +1, looks decent to me
[2013-06-15 00:25:47 -0400] webbower: Looks like it's got the comparable stuff to Apache and Nginx
[2013-06-15 00:26:00 -0400] coderanger: Yeah, its a direct port of our Apache cookbook
[2013-06-15 00:26:24 -0400] coderanger: Note that it says it is targetting Ubuntu though
[2013-06-15 00:26:30 -0400] coderanger: So might need some fixed for centos :)
[2013-06-15 00:26:37 -0400] coderanger: but I'm sure they would be happy for the patches
[2013-06-15 00:26:45 -0400] webbower: bugger
[2013-06-15 00:27:10 -0400] webbower: <-- Vagrant/Chef n00b
[2013-06-15 00:27:13 -0400] organicveggie: Maybe it was just the ark recipe I was looking for...
[2013-06-15 00:27:17 -0400] webbower: <-- Linux novice
[2013-06-15 00:27:20 -0400] organicveggie: s/recipe/cookbook/
[2013-06-15 00:28:37 -0400] mveitas: coderanger: Going back to the nil attributes, I assume you could just add a report handler to catch the exception and then do whatever you need. Something feels funny about default['myservice']['apiKey'] = nil
[2013-06-15 00:29:00 -0400] mveitas: once you start using Vagrant you never want to go back!
[2013-06-15 00:29:18 -0400] coderanger: mveitas: Sure? the report handler bit would be very specific to your setup though
[2013-06-15 00:29:28 -0400] coderanger: whatever you process for bad configs is
[2013-06-15 00:29:29 -0400] webbower: chip- You said you're booked up until forever?
[2013-06-15 00:29:39 -0400] coderanger: Hopefully that would be caught in testing, not prod :)
[2013-06-15 00:29:56 -0400] chip-: webbower: Kind of ridiculously so
[2013-06-15 00:30:00 -0400] mveitas: yes... Julian gave a nice talk yesterday at the Boston Chef meetup about testing :)
[2013-06-15 00:30:14 -0400] chip-: mveitas: Yeah I'm just reading his deck right now. Good talk!
[2013-06-15 00:30:17 -0400] webbower: chip- I thought you finished your crazy tour
[2013-06-15 00:30:27 -0400] chip-: webbower: Apparently I start another one.
[2013-06-15 00:30:42 -0400] webbower: chip- Ah well. Guess I'm mostly on my own for this one. Weekend project ^^
[2013-06-15 00:31:01 -0400] chip-: Ask all your questions here. It's how I learned.
[2013-06-15 00:31:05 -0400] webbower: ya
[2013-06-15 00:31:05 -0400] mveitas: I think there will be a video available... check the Boston Chef Meetup group page
[2013-06-15 00:31:27 -0400] mveitas: coderanger: Do you know of any cookbooks that do lots of config checking off hand
[2013-06-15 00:31:28 -0400] coderanger: We don't bite, much
[2013-06-15 00:31:53 -0400] coderanger: mveitas: I can't think of any, its not something so special it has its own bucket in my brain :)
[2013-06-15 00:32:18 -0400] coderanger: Just add "raise 'Requires an API key' unless node[:something][:api_key]" to the top of your recipe
[2013-06-15 00:32:19 -0400] mveitas: I thought I would ask before sampling some of the large cookbooks and trolling
[2013-06-15 00:32:21 -0400] coderanger: thats all it takes
[2013-06-15 00:32:46 -0400] coderanger: That will abort the run with the error message if no key is setup
[2013-06-15 00:33:30 -0400] mveitas: Chef has made my life so much easier.... had a developer installing Graphite today, but he got screwed up with some install steps and I told him to Chef it it and 10 min later presto!
[2013-06-15 00:33:33 -0400] webbower: chip- Also, the Opscode screencasts are kind of.... limited
[2013-06-15 00:33:37 -0400] cpplain: Very new Chef and IRC user here...
[2013-06-15 00:33:45 -0400] chip-: webbower: Definitely WIP.
[2013-06-15 00:33:55 -0400] coderanger: webbower: We're working on it :)
[2013-06-15 00:34:05 -0400] cpplain: Anybody know how to delete organizations in Hosted Chef?
[2013-06-15 00:34:12 -0400] coderanger: cpplain: Welcome!
[2013-06-15 00:34:22 -0400] cpplain: Thanks!
[2013-06-15 00:34:27 -0400] webbower: No worries. chip- pointed them to me as a resource while learning so I blame him ;-)
[2013-06-15 00:34:27 -0400] coderanger: cpplain: Just email support@opscode.com and they can take care of it
[2013-06-15 00:34:30 -0400] coderanger: probably on Monday though
[2013-06-15 00:34:51 -0400] cpplain: Sounds good. Thanks for the help.
[2013-06-15 01:40:03 -0400] stormerider: eesh. vbox on a machine with 4g RAM is a bit chuggish.
[2013-06-15 05:56:11 -0400] spheromak: stormerider, yep.. lxc might be a better alternative there :)
[2013-06-15 06:19:24 -0400] jtgiri_: ohai , I noticed that berks init seems to install .kitchen.yml and Vagrantfile, but I noticed that none of opscode cookbooks have vagrant file. Is vagrant file not necessary if you are using test-kitchen ?
[2013-06-15 07:04:56 -0400] binamov: anyone awake :) ?
[2013-06-15 07:06:07 -0400] MerlinDMC: yeah
[2013-06-15 07:07:20 -0400] binamov: MerlinDMC any idea if OPC can have nested organizations?
[2013-06-15 07:08:56 -0400] MerlinDMC: no - no as in "I don't know"
[2013-06-15 07:21:04 -0400] coderanger: binamov: No
[2013-06-15 07:21:15 -0400] coderanger: Orgs are just isolated chef servers effectively
[2013-06-15 07:21:23 -0400] coderanger: Orgs do not interact in any way
[2013-06-15 07:21:45 -0400] binamov: cool thanks!
[2013-06-15 07:21:57 -0400] coderanger: What are you trying to accomplish?
[2013-06-15 07:22:06 -0400] binamov: just messing around
[2013-06-15 07:22:29 -0400] coderanger: Environments do function as a way to create partially overlapping structures within a single chef org/server
[2013-06-15 07:22:43 -0400] binamov: yes, thanks
[2013-06-15 10:32:59 -0400] binamov: hi guise
[2013-06-15 10:34:56 -0400] binamov: if a template resource edits a file, how can i add a note like "file edited by recipe[foo]" ?
[2013-06-15 10:47:19 -0400] timsmith: just add it to the erb
[2013-06-15 10:47:25 -0400] timsmith: people put those in comments a lot
[2013-06-15 10:47:44 -0400] timsmith: you see people adding # This file edited by Chef for node xyz
[2013-06-15 11:11:08 -0400] binamov: yeah but how about a recipe identifying itself? what's the data object for that?
[2013-06-15 11:12:54 -0400] binamov: anyone have problems opening http://docs.opscode.com ?
[2013-06-15 11:54:45 -0400] cheeseplus: binamov: not for me (from London)
[2013-06-15 12:58:03 -0400] mveitas: I had a question about using data bags with Vagrant. It looks like you can specify an attribute 'chef.data_bags_path' to point to a databags directory. Looking for some general best practices with this.
[2013-06-15 12:58:45 -0400] mveitas: My recipe plans to make use of a data bag to store an key for a log monitoring agent, but I want to specify that once in a data bag
[2013-06-15 13:48:00 -0400] cheflevelramen: Morning all. Anyone online able to answer a question about directory structure? I'm in the process of adopting the berkshelf way (library / application cookbooks). Up to this point, I've kept all cookbooks in the cookbooks directory. I'm now breaking out all cookbooks into their own repos.
[2013-06-15 13:48:11 -0400] cheflevelramen: My question is, how do you organize your cookbooks?
[2013-06-15 13:48:22 -0400] cheflevelramen: I'm think something along the lines of:
[2013-06-15 13:48:52 -0400] cheflevelramen: company-cookbooks (this dir contains all cookbooks. Each subdir is the base dir of the cookbook's repo)
[2013-06-15 13:50:12 -0400] cheflevelramen: site-cookbooks (this is where top-level cookbooks are kept. If the company was facebook, it would contain the facebook cookbook, which would be made up of recipes for the whole stack, i.e., fb-database, fb-app, fb-loadbalancer, etc)
[2013-06-15 13:50:56 -0400] cheflevelramen: Does that seem like a reasonable way to do it? I'd use berkshelf to then manage uploading cookbooks to the chef-server.
[2013-06-15 15:21:19 -0400] bubu\a: hey guys, am using chef script resource to pull down a file from s3, and then another to un tar the archive
[2013-06-15 15:21:31 -0400] bubu\a: is there a chef resource I can use to change the file permissions of all files within a dir?
[2013-06-15 15:21:40 -0400] bubu\a: after they have been created..
[2013-06-15 15:56:43 -0400] northface: Looking for some help with stubbing out data bags with chefspec
[2013-06-15 15:59:50 -0400] pyjack: hi
[2013-06-15 16:00:21 -0400] pyjack: i'm stuck on an execute command. Commands ask for "yes" to continue.
[2013-06-15 16:00:34 -0400] pyjack: execute fails
[2013-06-15 16:01:20 -0400] pyjack: anyway to echo "yes" when question pops up?
[2013-06-15 16:25:47 -0400] MartinCleaver: is there an equivalent of mcollective, but for chef?
[2013-06-15 17:00:26 -0400] bobo_: Hi all - why is it that chef workstation (what shows on the webpage install as client) does not install directly from the chef-server?  Why does it have to download the stuff all over from the web again?
[2013-06-15 17:00:48 -0400] bobo_: Isn't the idea to bootstrap a node from the server, and then turn it into a workstation?
[2013-06-15 17:00:55 -0400] bobo_: Wouldn't that be better?
[2013-06-15 17:01:53 -0400] Otterley: bobo_, I think they're trying to satisfy both the chef-client and chef-solo use cases.
[2013-06-15 17:02:06 -0400] Otterley: with chef-solo there is no server.
[2013-06-15 17:02:43 -0400] Otterley: there's no reason, however, why you can't download the package that the installer fetches and add it to a local package repository.
[2013-06-15 17:02:48 -0400] bobo_: Otterley: I see - hmm - the assumption is that all servers have internet access (workstations at least) - my network is private, and we shut the outside doors - PCI restrictions
[2013-06-15 17:02:51 -0400] Otterley: (that's what we do)
[2013-06-15 17:02:53 -0400] bobo_: So I have to deploy within
[2013-06-15 17:03:39 -0400] bobo_: Otterley - I see - so if I get the install.sh from them, then it will install from a private network?
[2013-06-15 17:04:17 -0400] Otterley: Yes, just don't run it, and look at the script, it should give you a hint as to there to fetch the package from.
[2013-06-15 17:04:24 -0400] Otterley: s/there/where/
[2013-06-15 17:04:32 -0400] bobo_: I see
[2013-06-15 17:05:29 -0400] bobo_: Well - I hope they try to make the product more install friendly - I understan SysAdmins we can look all day at scripts and pull and decipher, but who has the time - isn't there a say: "focus on your goal..."
[2013-06-15 17:05:33 -0400] bobo_: Thanks Otterley.
[2013-06-15 17:05:57 -0400] Otterley: I think they're optimizing for the most common case - most places don't have PCI restrictions :)
[2013-06-15 17:06:31 -0400] Otterley: It doesn't get much friendlier to most folks than "run this single command"
[2013-06-15 17:06:40 -0400] bobo_: Oh well - when I saw the Opscode 2012 convention - he spoke of Banks as a customer - there is much PCI in there
[2013-06-15 17:06:57 -0400] Otterley: Sure, but they're one of many :)
[2013-06-15 17:07:45 -0400] bobo_: Sure - well - I think I'll simply get a server install from the internet and pull it in the Private VLAN afterwards
[2013-06-15 17:07:53 -0400] bobo_: More practical and faster.
[2013-06-15 17:07:55 -0400] bobo_: Thanks again
[2013-06-15 17:57:49 -0400] navid: I'm about to install knife via 'knife configure --initial' and there a couple questions i'm unsure about. Please enter the existing admin name: [admin]
[2013-06-15 17:58:00 -0400] navid: and Please enter the location of the existing admin's private key: [/etc/chef/admin.pem]
[2013-06-15 17:58:32 -0400] navid: I don't have an existing admin private key and I don't think I have an existing admin name unless one is created by default.
[2013-06-15 17:59:12 -0400] navid: how do I find out?
[2013-06-15 18:05:47 -0400] atrius`: this may be a silly question.. but when a cookbook's readme says "node['somevalue']" the node can be the hostname? which is to say you can set it to one value for one host and another value for another host?
[2013-06-15 18:07:53 -0400] jbellone: anyone have experience with postgres cookbook and chef solo? :)
[2013-06-15 18:08:22 -0400] atrius`: funny, i was just messing around with that cookbook. can't be of much help with it yet though ;)
[2013-06-15 18:09:37 -0400] jbellone: yeah, seems to be an issue jamming the password
[2013-06-15 18:10:16 -0400] atrius`: oh? what is it doing?
[2013-06-15 18:11:44 -0400] jbellone: PG::Error: FATAL:  no pg_hba.conf entry for host "10.0.2.2", user "postgres", database "postgres", SSL on (Sequel::DatabaseConnectionError)
[2013-06-15 18:11:52 -0400] jbellone: and in vm it gives me authentication error
[2013-06-15 18:16:20 -0400] MartinCleaver: Hi all - is there an equivalent of mcollective, but for chef?
[2013-06-15 18:18:47 -0400] gchristensen: is there any reason that Chef isn't rolling with Ruby 2.0.0? w/ omnibus, it doesn't depend on any package managers out there.
[2013-06-15 18:19:26 -0400] databus23: Whats wrong with mcollective and chef? Its not tied to puppet. I'm using mcollective or the remote command execution/orchestration and use chef for converging the individual nodes.
[2013-06-15 18:22:59 -0400] atrius`: jbellone: well, the HBA entry problem is exactly what it says. you're missing an HBA entry to allow remote connections. the default doesn't allow for remote connections
[2013-06-15 18:23:02 -0400] databus23: The latest chef version 11.4.x still have some problems with rubygems 2.0 which is mandatory for ruby 2.0. The next chef version 11.6 is supposed to work with rubygems 2.0. Some point after that the omnibus installer might ship with ruby 2.0 but my quess is it will still take some time.
[2013-06-15 18:24:02 -0400] databus23: Here is the relavant ticket for rubygems 2.0 support in chef: http://tickets.opscode.com/browse/CHEF-3933
[2013-06-15 18:24:13 -0400] atrius`: jbellone: if you're not able to login local to the VM then the password just may not be set. looking at the default attributes it only says "default['postgresql']['password'] = Hash.new" which i suspect results in a blank password or something funky
[2013-06-15 18:26:11 -0400] jbellone: @atrius` you have to set it in chef solo, I am following the readme and jamming the password with md5
[2013-06-15 18:26:31 -0400] atrius`: jbellone: yeah, i just followed the script logic to that point... hmm.. weird
[2013-06-15 18:26:55 -0400] jbellone: echo -n 'jellyfish''postgres' | openssl md5 | sed -e 's/.* /md5/''
[2013-06-15 18:27:00 -0400] jbellone: etc
[2013-06-15 18:27:38 -0400] atrius`: it wouldn't help your chef issue, but you just need to get in you could just get in without the password and manually reset it
[2013-06-15 18:27:52 -0400] jbellone: to be honest its just for testing
[2013-06-15 18:28:14 -0400] atrius`: of postgres or of chef?
[2013-06-15 18:33:20 -0400] jbellone: something separate :)
[2013-06-15 18:33:23 -0400] jbellone: that requires postgres
[2013-06-15 18:33:25 -0400] atrius`: ah, got you
[2013-06-15 18:33:40 -0400] atrius`: well, in that case i'd just fix the password and not worry about it :)
[2013-06-15 18:42:33 -0400] navid: Would someone please explain how to successfully set up the chef worksations with knife? There are broken instructions that make a lot of assumptions on http://docs.opscode.com/install_workstation.html I installed chef-server but knife configure -i didn't resolve since the omnibus installer didn't put knife command in my path. I found one under /opt/chef-server/embedded/bin Also instructions doesn't tell me how to generate the validation.
[2013-06-15 18:42:33 -0400] navid: admin.pem (what its purpose is and how to generate it). When I run knife configure -i, it fails to run since admin.pem is missing
[2013-06-15 18:43:18 -0400] navid: also the link to "configuration file" is broken. I assume that's a sample knife.rb file?
[2013-06-15 18:44:28 -0400] coderanger: navid: Are you using hosted chef or running an open-source server?
[2013-06-15 18:44:33 -0400] navid: open source
[2013-06-15 18:44:48 -0400] coderanger: Drat, can't get you to try the new way then :(
[2013-06-15 18:44:58 -0400] navid: knife configure -i assumes that the admin.pem exists
[2013-06-15 18:45:05 -0400] atrius`: coderanger: the new way?
[2013-06-15 18:45:19 -0400] coderanger: atrius`: preview.opscode.com/signup :)
[2013-06-15 18:46:02 -0400] atrius`: ah so
[2013-06-15 18:46:07 -0400] coderanger: navid: So when chef-server boots up for the first time it will auto-create two keys
[2013-06-15 18:46:23 -0400] coderanger: navid: They both should end up in /etc/chef in the FOSS version I think
[2013-06-15 18:46:46 -0400] coderanger: You need grab both off the server filesystem, the initial admin key and the validation key
[2013-06-15 18:46:53 -0400] atrius`: btw.. i hate to ask what is really probably a very basic question.. but i've never really dealt with JSON so i have to ask.. if a readme says node['postgresql']['config_pgtune']['db_type'] for a given configuration, what would it look like when you try and put it in via knife edit node foo?
[2013-06-15 18:47:27 -0400] navid: the problem is my /etc/chef/ directory doesn't contain any files
[2013-06-15 18:47:39 -0400] navid: i guess it hasn't booted up yet?
[2013-06-15 18:47:46 -0400] coderanger: atrius`: "override_attributres": {"postgresql": {"config_pgtune": {"db_type": "something"}}}
[2013-06-15 18:47:54 -0400] atrius`: coderanger: ah, thanks :)
[2013-06-15 18:47:55 -0400] coderanger: navid: Do you see the chef server processes running?
[2013-06-15 18:48:32 -0400] coderanger: and/or how did you install chef server?
[2013-06-15 18:48:48 -0400] atrius`: coderanger: i was trying to do something like "node: [ <NL> "postgresql": <NL>" blah blah blah
[2013-06-15 18:49:12 -0400] coderanger: atrius`: Close, [] is for arrays in JSON
[2013-06-15 18:49:22 -0400] coderanger: Guessing you are coming from a PHP background :)
[2013-06-15 18:50:07 -0400] navid: coderanger: there are lots of chef-server related processes but none called 'chef-server'
[2013-06-15 18:50:09 -0400] atrius`: coderanger: more ruby actually. i was looking at the existing ones and an example in the readme for something else and trying to work backwards from there :D
[2013-06-15 18:50:49 -0400] coderanger: navid: Hmm, maybe we moved things, I will confess I haven't run the open-source server in since chef 11 came out
[2013-06-15 18:51:06 -0400] coderanger: atrius`: You can also use the Ruby DSL for most object types if you prefer
[2013-06-15 18:51:23 -0400] navid: coderanger: there are so many like epmd -daemon, cpu_sup, postgresql, etc and more
[2013-06-15 18:54:15 -0400] navid: coderanger: at work we use chef server 10.x. I just need a working solution for now. So maybe i'll try to downgrade. wjhat can I uninstall Chef 11 or downgrade
[2013-06-15 18:54:36 -0400] coderanger: navid: We no longer maintain any installation resources for chef 10 server that I'm aware of
[2013-06-15 18:54:48 -0400] coderanger: chef 11 server was the release that switched to omnibus
[2013-06-15 18:55:01 -0400] atrius`: which is far easier to deal with i have to say
[2013-06-15 18:55:30 -0400] coderanger: You can try and just updatedb && slocate "admin.pem" perhaps
[2013-06-15 18:55:39 -0400] navid: ok anyone know what the service is called for chef-server in the latest 11.x?
[2013-06-15 18:55:50 -0400] atrius`: coderanger: huh.. that's odd. i plug in what you gave above and knife insists the node wasn't updated and therefore won't save it
[2013-06-15 18:56:26 -0400] coderanger: navid: The chef server itself is the erlang daemon process
[2013-06-15 18:56:37 -0400] navid: i'm looking for an init script that will stop all services chef-server related. (hoping there's one)
[2013-06-15 18:56:45 -0400] coderanger: navid: its all in chef-server-ctl
[2013-06-15 18:56:49 -0400] navid: ok
[2013-06-15 18:58:21 -0400] navid: coderanger: thanks chef-server-ctl graceful-kill did it
[2013-06-15 18:58:36 -0400] coderanger: atrius`: It should include a line number in the parse error
[2013-06-15 18:58:47 -0400] coderanger: atrius`: JSON is kind of an asshole when it comes to formatting
[2013-06-15 18:59:04 -0400] atrius`: coderanger: didn't say there was a parse error. it just said things weren't updated, as if i hadn't added a new line, and refused to save
[2013-06-15 18:59:12 -0400] atrius`: coderanger: yeah, i'm noticing that :D
[2013-06-15 19:01:00 -0400] Otterley: I'm very excited for chef-client to move to Ruby 2.0 - getting it to make persistent HTTP connections to the server is high on my wishlist
[2013-06-15 19:01:11 -0400] coderanger: Okay, /me wanders off to make breakfast
[2013-06-15 19:01:14 -0400] coderanger: BACON TIME
[2013-06-15 19:04:58 -0400] navid: coderanger: which one of these processes starts the chef-server process? bookshelf, chef-expander, chef-server-webui, chef-solr, erchef, nginx, postgresql or rabbitmq? I was expecting to see one called 'chef-server'
[2013-06-15 19:05:56 -0400] atrius`: this is starting to piss me off :(
[2013-06-15 19:08:23 -0400] Otterley: what's the matter atrius` ?
[2013-06-15 19:08:31 -0400] Otterley: navid, erchef
[2013-06-15 19:09:16 -0400] Otterley: there is no "chef-server" process anymore in Chef 11
[2013-06-15 19:09:31 -0400] atrius`: Otterley: ah, just annoyed at JSON
[2013-06-15 19:09:36 -0400] atrius`: Otterley: he's on Chef 10
[2013-06-15 19:09:40 -0400] atrius`: i think
[2013-06-15 19:10:05 -0400] Otterley: atrius`, if you can stomach Perl, JSON::XS has pretty good JSON validation.
[2013-06-15 19:10:42 -0400] Otterley: in fact we use it to normalize all our JSON in a Rake task before we commit to git.
[2013-06-15 19:11:13 -0400] atrius`: Otterley: if i have to resort to perl to add a one line override things have truly gone to the dogs :D
[2013-06-15 19:11:28 -0400] navid: Otterley: thanks! what port does chef-server-webui listen on? there is none specified when I do chef-server-ctl show-config. I assume there's a default port. I tried to hit port 4000 no response.
[2013-06-15 19:11:34 -0400] Otterley: *shrug* None of Ruby's JSON libraries have the ability to normalize JSON, to my knowledge.
[2013-06-15 19:12:12 -0400] dahunter3: Hey guys, I'm a complete n00b. I'm trying to set up sense on an EC2 instance. I'm getting the following error. Can anyone point me in the right direction? http://pastebin.com/AtBWyKFv
[2013-06-15 19:12:14 -0400] atrius`: http://pastebin.com/kP4vum3D <-- is there anything particularly wrong with this?
[2013-06-15 19:12:15 -0400] Otterley: navid, in Chef 11, everything goes through an nginx proxy, which listens on ports 80 and 443
[2013-06-15 19:12:40 -0400] dahunter3: sensu*
[2013-06-15 19:12:47 -0400] Otterley: atrius`, you're missing a comma between your run_list and override_attributes
[2013-06-15 19:14:02 -0400] atrius`: Otterley: ah, yeah. missing for the pastebin but there before
[2013-06-15 19:14:08 -0400] atrius`: it claims i've made no changes
[2013-06-15 19:14:13 -0400] atrius`: so, it refuses to save
[2013-06-15 19:14:35 -0400] Otterley: what claims that?
[2013-06-15 19:14:41 -0400] atrius`: knife
[2013-06-15 19:15:03 -0400] Otterley: try deleting the node and re-adding it
[2013-06-15 19:15:27 -0400] atrius`: k
[2013-06-15 19:15:28 -0400] coderanger: navid: There is no process called chef-server, erlang does not work that way
[2013-06-15 19:16:04 -0400] coderanger: navid: erlang is more like java, it doesn't generally overwrite argv[0]
[2013-06-15 19:16:06 -0400] navid: Otterley: I'm doing something temporarly and dumb right now. I'm sharing my chef-server with another web app that runs on port 80. That's on nginx as well. So can I reconfigure erchef to listen on a different port?
[2013-06-15 19:16:23 -0400] Otterley: navid, you can.  see the documentation for chef-server.rb
[2013-06-15 19:16:23 -0400] hexfury: Hello
[2013-06-15 19:16:35 -0400] Otterley: http://docs.opscode.com/config_rb_chef_server.html
[2013-06-15 19:16:36 -0400] navid: ok thanks
[2013-06-15 19:16:38 -0400] coderanger: navid: Erchef doesn't touch port 80, it listens ~4000ish
[2013-06-15 19:16:49 -0400] Otterley: @coderanger, am I invisible to you? :P
[2013-06-15 19:17:02 -0400] coderanger: navid: nginx is on 80/443 (80 is just a redirect to 443) and proxies
[2013-06-15 19:17:09 -0400] coderanger: Otterley: No, just slow typing on phone :)
[2013-06-15 19:17:21 -0400] Otterley: ah
[2013-06-15 19:19:16 -0400] atrius`: Otterley: same thing. just says: "Node not updated, skipping node save"
[2013-06-15 19:20:07 -0400] atrius`: huh... in the webui the json attributes appear to have gone on vacation
[2013-06-15 19:20:31 -0400] hexfury: I'm having an issue with a runit cookbook throwing HTTP 403 error.  I see the GET request, and it starts streaming the download when it throws the 403.  Any ideas on how to resolve?
[2013-06-15 19:21:10 -0400] navid: Otterley: the file /etc/chef-server/chef-server.rb doesn't exist on my server. Is it something that's generated or only if you want to override the defaults, do you create it?
[2013-06-15 19:21:36 -0400] coderanger: atrius`: Sorry, I think I misled you, override_attributes is for a role, on a node it would just be override, but we don't recommend doing that
[2013-06-15 19:21:56 -0400] coderanger: atrius`: In general you should keep attributes overrides in role and environment files
[2013-06-15 19:22:19 -0400] atrius`: coderanger: ah, would that explain the "not changed" thing?
[2013-06-15 19:22:20 -0400] coderanger: special snowflake nodes are the enemy :)
[2013-06-15 19:22:42 -0400] Otterley: navid, it doesn't exist by default, you need to create it if you want to change the defaults
[2013-06-15 19:23:22 -0400] navid: got it well  also the weird thing is that on http://docs.opscode.com/config_rb_chef_server.html, the default erchef port is 8000 but my server doesn't respond to port 8000
[2013-06-15 19:23:52 -0400] Otterley: navid, I believe erchef only listens to the loopback interface.
[2013-06-15 19:24:00 -0400] atrius`: navid: is anyone listening on that port?: netstat -nltp
[2013-06-15 19:24:26 -0400] navid: yep tcp        0      0 127.0.0.1:8000          0.0.0.0:*               LISTEN      24673/beam.smp
[2013-06-15 19:25:03 -0400] atrius`: ah, then yes it is loopback only then
[2013-06-15 19:25:18 -0400] navid: so how do I hit the chef-server-webui remotely?
[2013-06-15 19:25:19 -0400] Otterley: navid, in Chef 11, clients don't talk directly to erchef; they talk to nginx, when then back posts to erchef.
[2013-06-15 19:25:25 -0400] Otterley: same with the webui.
[2013-06-15 19:25:56 -0400] navid: ok at which port can i hit nginx to get to the webui, if i'm already running a web server on port 80
[2013-06-15 19:26:10 -0400] navid: i mean a web app on 80
[2013-06-15 19:26:14 -0400] Otterley: whatever port you want to use.  8080?
[2013-06-15 19:26:16 -0400] Otterley: 4443?
[2013-06-15 19:26:48 -0400] atrius`: coderanger: so the 'proper' way to select the DB type to be applied with the pgtune recipe would be to create a matching role and select it therein? then apply that role to the node?
[2013-06-15 19:26:55 -0400] Otterley: you just need to create the config file, set the nginx parameters, and then chef-server-ctl reconfigure
[2013-06-15 19:30:16 -0400] navid: Otterley: I'm trying to look for the nginx configuration for chef server webui. I'm unable to find it. I'm not an expert in nginx but was able to get it configured to work with a rails app.
[2013-06-15 19:30:58 -0400] Otterley: navid, the keys are nginx['non_ssl_port'] and nginx['ssl_port']
[2013-06-15 19:31:14 -0400] atrius`: sigh... the webui won't create the role
[2013-06-15 19:31:36 -0400] navid: Otterley: Thanks! will try that
[2013-06-15 19:32:02 -0400] Otterley: just assign those in /etc/chef-server/chef-server.rb, run chef-server-ctl reconfigure, and you should be good to go.
[2013-06-15 19:32:45 -0400] navid: Otterley: you've been a huge help. too excited to try this out hehe
[2013-06-15 19:33:08 -0400] Otterley: I accept cash, PayPal, and massage gift certificates.
[2013-06-15 19:34:02 -0400] navid: haha!!
[2013-06-15 19:36:48 -0400] atrius`: TIL: You can't have spaces in role names and the webui won't tell you that and instead just fails silently :(
[2013-06-15 19:37:15 -0400] hexfury: I'm having an issue with a runit cookbook throwing HTTP 403 error.  I see the GET request, and it starts streaming the download when it throws the 403.  Any ideas on how to resolve?
[2013-06-15 19:37:22 -0400] Otterley: atrius`, file a bug
[2013-06-15 19:37:55 -0400] navid: coderanger: thanks for your help!
[2013-06-15 19:38:16 -0400] Otterley: hexfury, if you can run chef-solo or chef-client with the -l debug arguments, and paste the lines around the error in a gist or pastebin and post the URL to us, that would be helpful
[2013-06-15 19:38:21 -0400] coderanger: atrius`: Yeah, or include the override in whichever role includes the pgtune recipe
[2013-06-15 19:38:26 -0400] navid: Otterley: I'm in the webui. now what??? j/k
[2013-06-15 19:38:28 -0400] atrius`: Otterley: at the tickets site?
[2013-06-15 19:38:28 -0400] hexfury: Sure can Otterley
[2013-06-15 19:38:33 -0400] Otterley: atrius`, yup
[2013-06-15 19:38:35 -0400] atrius`: k
[2013-06-15 19:40:52 -0400] hexfury: @Otterley http://pastebin.com/XPPnh9qG
[2013-06-15 19:42:29 -0400] Otterley: hexfury, I'm not very familiar with your chef server setup - looks like S3 is involved somehow?
[2013-06-15 19:42:56 -0400] atrius`: omnibus is The One True Install now, yes?
[2013-06-15 19:42:58 -0400] Otterley: or AWS?
[2013-06-15 19:43:12 -0400] Otterley: atrius`, it is the best practice
[2013-06-15 19:44:32 -0400] robertkowalski: hi
[2013-06-15 19:44:40 -0400] hexfury: Yeah, my chef server is hosted on AWS
[2013-06-15 19:45:03 -0400] Otterley: putting it on EC2 shouldn't better
[2013-06-15 19:45:09 -0400] Otterley: shouldn't matter, that is
[2013-06-15 19:45:26 -0400] Otterley: something else is wrong, because the server is rejecting the client's request to return a cookbook file
[2013-06-15 19:45:27 -0400] hexfury: This error throws on one of the 4 runit services created towards the end of my (very long) chef run
[2013-06-15 19:46:20 -0400] Otterley: hexfury, are you running Chef Server 11?
[2013-06-15 19:47:03 -0400] atrius`: Otterley: got you. here's that bug: http://tickets.opscode.com/browse/CHEF-4284
[2013-06-15 19:47:05 -0400] hexfury: 11.0.8, I updated yesterday
[2013-06-15 19:47:29 -0400] hexfury: had the same error on 11.0.6 and previous to that as well
[2013-06-15 19:47:38 -0400] Otterley: hexfury, try running chef-server-ctl tail on the server and see if it yields any additional clues
[2013-06-15 19:47:57 -0400] hexfury: it's also the latest version of the opscode runit cookbook (just implemented in another cookbook that requires runit
[2013-06-15 19:48:10 -0400] hexfury: Okay
[2013-06-15 19:57:49 -0400] hexfury: @Otterley, I didn't see anything of note in the logs, but here they are http://pastebin.com/aSZniYsW
[2013-06-15 19:59:20 -0400] atrius`: if chef-client is running from init, is there a way to get it to check in immediately?
[2013-06-15 19:59:47 -0400] Otterley: atrius`, send it a kill -USR1
[2013-06-15 19:59:57 -0400] atrius`: Otterley: thanks :)
[2013-06-15 20:00:20 -0400] Otterley: hexfury, hard to tell from the logs - maybe re-register the client?
[2013-06-15 20:00:57 -0400] Otterley: hexfury, on the client, remove its key from /etc/chef/client.pem, add the validator key to /etc/chef/validator.pem and re-run chef-client
[2013-06-15 20:01:04 -0400] hexfury: That was a fresh register from a vagrant destroy/vagrant up
[2013-06-15 20:01:09 -0400] Otterley: oh
[2013-06-15 20:01:16 -0400] Otterley: I'm stumped then
[2013-06-15 20:02:01 -0400] Otterley: I'm not seeing the 403 in the log tail you posted
[2013-06-15 20:02:15 -0400] hexfury: yeah, that's why I've been struggling with this
[2013-06-15 20:02:22 -0400] Otterley: were you tailing it while performing the run?
[2013-06-15 20:02:41 -0400] hexfury: It only seems to happen on 1 of the 3 runit services I start, when downloading their template files
[2013-06-15 20:03:05 -0400] hexfury: well, it was outputting to stdout on my local machine
[2013-06-15 20:03:36 -0400] hexfury: and in the vagrantfile I have chef.log_level = :debug
[2013-06-15 20:03:50 -0400] Otterley: I mean the chef-server-ctl fail
[2013-06-15 20:03:52 -0400] Otterley: *tail
[2013-06-15 20:04:10 -0400] hexfury: oh, no.  I can do that
[2013-06-15 20:04:30 -0400] hexfury: The chef run takes about 10-15m, you want the full log?
[2013-06-15 20:05:00 -0400] Otterley: nah, the only interesting part relates to the run of the recipe in question
[2013-06-15 20:05:03 -0400] hexfury: kk
[2013-06-15 20:44:59 -0400] hexfury: @Otterley, Okay, the last entry shows the 403 happening in the nginx access log
[2013-06-15 20:45:01 -0400] hexfury: http://pastebin.com/FaZtSDrG
[2013-06-15 20:45:52 -0400] Otterley: OK, so that shows the client and server are consistent - how about the erchef logs at that time?
[2013-06-15 20:47:25 -0400] Otterley: and bookshelf logs too
[2013-06-15 20:47:39 -0400] Otterley: BTW, did you try deleting and re-uploading the cookbook in question?
[2013-06-15 20:48:48 -0400] hexfury: yeah done that lots of times
[2013-06-15 20:49:01 -0400] hexfury: the last erchef log entry is from 20m prior
[2013-06-15 20:49:19 -0400] Otterley: erchef may be logging to a different file than  you think.  it's .. odd
[2013-06-15 20:49:30 -0400] Otterley: watch all of them for growth
[2013-06-15 20:49:57 -0400] hexfury: yeah, I looked in the dir, only one been modified today
[2013-06-15 20:50:29 -0400] Otterley: how about the bookshelf logs?
[2013-06-15 20:50:42 -0400] hexfury: Also, bookshelf, the last log was from an hour ago
[2013-06-15 20:51:51 -0400] Otterley: something ain't right, erchef should be logging every request backposted from nginx
[2013-06-15 20:52:50 -0400] hexfury: hrm yeah
[2013-06-15 20:52:57 -0400] Otterley: you're looking in /var/log/chef-server/erchef?
[2013-06-15 20:52:59 -0400] hexfury: Also, this error is intermittent
[2013-06-15 20:53:06 -0400] hexfury: Yes
[2013-06-15 20:53:19 -0400] Otterley: erchef.log.[1-5] should be growing
[2013-06-15 20:53:53 -0400] hexfury: erchef.log.1 is the only one that exists, over 5MB at this point
[2013-06-15 20:54:02 -0400] Otterley: and nothing in there about a 403?
[2013-06-15 20:54:30 -0400] Otterley: status=403 to be precise
[2013-06-15 20:55:05 -0400] hexfury: The last one logged is from yesterday
[2013-06-15 20:55:28 -0400] Otterley: have you made any custom entries in /etc/chef-server/chef-server.rb?
[2013-06-15 20:55:31 -0400] hexfury: Though I watched it happen, relevant log entry 2013-06-14T18:28:51Z erchef@127.0.0.1 INFO req_id=pGX7TdYKfTjMT6MqW+iQiw==; status=403; method=PUT; path=/clients/vagrant-local-suhaim-singlnode-1; user=chef-validator; msg={forbidden}; req_time=4; rdbms_time=1; rdbms_count=2
[2013-06-15 20:57:18 -0400] hexfury: I think someone did regarding bookshelf...
[2013-06-15 20:57:20 -0400] hexfury: root@ip-10-72-190-176:/etc/chef-server# cat chef-server.rb node.default["fqdn"] = "chef.userevents.com" bookshelf["vip"] = "chef.userevents.com" # node["ipaddress"]
[2013-06-15 20:57:23 -0400] Otterley: it's coming from bookshelf
[2013-06-15 20:57:33 -0400] Otterley: the error, that is - that's port 4321
[2013-06-15 20:57:38 -0400] Otterley: so let's ignore erchef
[2013-06-15 20:57:52 -0400] hexfury: What should be in there?
[2013-06-15 20:58:44 -0400] Otterley: I don't have a lot of experience here.  My FQDN matches my chef server so I've never had to mess with the bookshelf VIP
[2013-06-15 20:59:31 -0400] hexfury: hmm, perhaps I'll comment that out and restart the server, see if it makes a difference?
[2013-06-15 20:59:40 -0400] hexfury: i don't know what bookshelf VIP is
[2013-06-15 20:59:52 -0400] Otterley: http://docs.opscode.com/config_rb_chef_server.html#bookshelf
[2013-06-15 21:00:28 -0400] Otterley: this is starting to smell like your bookshelf is corrupted somehow
[2013-06-15 21:01:13 -0400] Otterley: the client is supplying an identical access key for all the requests related to a single cookbook, but it's only throwing up on one of them
[2013-06-15 21:01:39 -0400] hexfury: yeah
[2013-06-15 21:02:04 -0400] hexfury: I just reinstalled chef-server yesterday, is there a way to refresh bookshelf without losing our setup?
[2013-06-15 21:02:41 -0400] Otterley: that's beyond my knowledge
[2013-06-15 21:02:57 -0400] hexfury: Fair enough, you've been tremendously helpful, thank you
[2013-06-15 21:04:34 -0400] Otterley: oh, hexfury
[2013-06-15 21:05:10 -0400] Otterley: does the file organization-0000000000000000000000000000
[2013-06-15 21:05:11 -0400] Otterley: 0000%2Fchecksum-83aef8c806843f8ea51aac0da9513804 exist in /var/opt/chef-server/bookshelf/data/bookshelf ?
[2013-06-15 21:06:19 -0400] Otterley: and it owned by chef_server:chef_server ?
[2013-06-15 21:07:14 -0400] Otterley: ah hah!
[2013-06-15 21:07:23 -0400] Otterley: http://tickets.opscode.com/browse/CHEF-4218
[2013-06-15 21:07:29 -0400] Otterley: see the second comment
[2013-06-15 21:09:30 -0400] hexfury: holy damn, that is fantastic.  Thank you very very much
[2013-06-15 21:09:40 -0400] hexfury: makes perfect sense also, since I have a very long chef run
[2013-06-15 21:12:18 -0400] Otterley: 15 minutes is awfully long
[2013-06-15 21:12:33 -0400] hexfury: I have it doing a lot of stuff
[2013-06-15 21:14:54 -0400] gzc: ooh, neat
[2013-06-15 21:15:16 -0400] Otterley: compiling everything under the sun? :)
[2013-06-15 21:15:18 -0400] gzc: thanks, our runs are just going to get longer, will keep that link handy
[2013-06-15 21:17:14 -0400] Otterley: I'm trying to get our runs down to 1 minute or less, even on new setups
[2013-06-15 21:17:51 -0400] Otterley: <-- impatient
[2013-06-15 21:18:13 -0400] gzc: we're starting to bake software artifacts directly into cookbooks (as cookbook_files), so it'll take a bit just to download
[2013-06-15 21:18:30 -0400] Otterley: how come?
[2013-06-15 21:19:12 -0400] gzc: our CD pipeline does it- cookbook comes in, gets tested; software comes in, gets tested; the combination is packaged/tested/distributed as a big tested artifact
[2013-06-15 21:19:44 -0400] gzc: plus we have an extremely unique use case of distributing those cookbooks to many other, remote chef servers
[2013-06-15 21:20:12 -0400] Otterley: mm, I see
[2013-06-15 21:20:18 -0400] gzc: so keeping everything together lets us do chef server <-> chef server transfers without external deps
[2013-06-15 22:08:38 -0400] martinisoft: got a fun wrapper cookbook question. is there any way for a wrapper cookbook to override the template in the called recipe?
[2013-06-15 22:17:53 -0400] log1kal: martinisoft: you could use chef-rewind for that, yes?
[2013-06-15 22:18:16 -0400] martinisoft: log1kal: hmm, definitely an option there
[2013-06-15 22:18:38 -0400] martinisoft: running into issues with the openssh cookbook and im finding out order of declaration is a thing with sshd
[2013-06-15 22:19:01 -0400] martinisoft: pretty close to just writing a mini cookbook to drop a pre-set config file down and reload the service
[2013-06-15 22:19:11 -0400] log1kal: :(
[2013-06-15 22:19:29 -0400] martinisoft: attribute driven with sorting causes major pain for me right now
[2013-06-15 22:19:58 -0400] log1kal: I successfully used chef-rewind with a wrapper cookbook for one of the tomcat cookbook templates
[2013-06-15 22:20:22 -0400] log1kal: pretty sure my comment for the commit was "THIS IS CHEF MAGIC"
[2013-06-15 22:20:40 -0400] log1kal: also, that does not sound fun, martinisoft
[2013-06-15 22:22:04 -0400] martinisoft: yeah, have to go an alternate route for the SSH configs sadly
[2013-06-15 22:22:10 -0400] martinisoft: like, entirely different
[2013-06-15 22:22:19 -0400] log1kal: Blar.
[2013-06-15 22:22:26 -0400] log1kal: no chef magic for you :(
[2013-06-15 22:22:33 -0400] log1kal: except that chef still feels like magic sometimes.
[2013-06-15 22:22:38 -0400] martinisoft: it does
[2013-06-15 22:22:44 -0400] martinisoft: until you have order dependency issues
[2013-06-15 22:22:50 -0400] martinisoft: in a generated config
[2013-06-15 22:23:07 -0400] log1kal: then it just feels like harder-won magic when it works
[2013-06-15 22:23:20 -0400] martinisoft: yeah, my little sorting hack doesn't work either
[2013-06-15 22:23:37 -0400] martinisoft: since node attributes are immutable, can't delete keys in the template
[2013-06-15 22:30:41 -0400] martinisoft: ah i see a much better solution, will do a PR
[2013-06-15 22:31:10 -0400] martinisoft: thanks log1kal
[2013-06-15 22:36:51 -0400] coderanger: cheeseplus: I have discovered a great injustice: http://en.wikipedia.org/w/index.php?search=greentooth&title=Special%3ASearch
[2013-06-15 22:52:04 -0400] schuckles: hi
[2013-06-15 22:52:42 -0400] schuckles: i'm wondering if anyone can suggest a means/cookbook that's able to take the chef-node-name and apply it within the hosts file?
[2013-06-15 22:53:04 -0400] schuckles: or a bootstrap template or if this is not a good idea?
[2013-06-15 22:54:49 -0400] coderanger: schuckles: https://github.com/3ofcoins/chef-cookbook-hostname/blob/master/recipes/default.rb
[2013-06-15 22:55:02 -0400] coderanger: But usually we go the other way, the node name is set by the server's FQDN
[2013-06-15 22:57:08 -0400] schuckles: so, to have a name that makes sense, for ec2  can i use Chef::Config[:node_name] ?
[2013-06-15 22:59:08 -0400] coderanger: When you bootstrap, just set a -N flag
[2013-06-15 22:59:12 -0400] coderanger: that will set the node name
[2013-06-15 23:00:09 -0400] schuckles: yea, that i do... i simply want that Node Name... to show up in the /etc/hosts file
[2013-06-15 23:00:52 -0400] coderanger: Do you want it to show up in /etc/hosts or do you want to set the machines hostname to that?
[2013-06-15 23:02:00 -0400] schuckles: I think setting an EC2 hostname to something different than the ec2-xxxxxxx convention will muck things up
[2013-06-15 23:02:09 -0400] schuckles: so just the etc/hsots file
[2013-06-15 23:02:56 -0400] schuckles: i.e. https://gist.github.com/schuckles/5789912
[2013-06-15 23:03:00 -0400] schuckles: this doesnt work
[2013-06-15 23:04:57 -0400] schuckles: i know im doing something wrong
[2013-06-15 23:05:56 -0400] coderanger: Use node.name
[2013-06-15 23:06:02 -0400] coderanger: Not the config value
[2013-06-15 23:06:44 -0400] coderanger: Also you might want to be more specific with node['cloud']['private_ipv4'] or public_ipv4
[2013-06-15 23:06:47 -0400] coderanger: since EC2 has both
[2013-06-15 23:07:12 -0400] coderanger: (most likely you want the private IP
[2013-06-15 23:08:57 -0400] schuckles: so it'll be node.name[:node_name] ?
[2013-06-15 23:23:28 -0400] schuckles: ahhh
[2013-06-15 23:23:29 -0400] schuckles: got it!!!!
[2013-06-15 23:26:24 -0400] ignatz: after an hour or so of fighting with my userdata, turns out computers care a lot about / versus \
[2013-06-15 23:26:27 -0400] ignatz: headdesk

[2013-03-28 00:05:16 -0400] GreatSUN: .
[2013-03-28 00:23:05 -0400] GreatSUN: hey guys
[2013-03-28 00:23:10 -0400] GreatSUN: is there someone still alive?
[2013-03-28 00:23:23 -0400] kesor: no
[2013-03-28 00:24:42 -0400] knuckolls: nope
[2013-03-28 00:24:50 -0400] GreatSUN: lol
[2013-03-28 00:25:17 -0400] GreatSUN: maybe someone of you can tell me if and how it might be possible to merge an existing hash/mash into node attributes
[2013-03-28 00:25:36 -0400] knuckolls: from a recipe?
[2013-03-28 00:25:45 -0400] GreatSUN: for hashes it is possible to merge two hashes together. is this the same for node-attributes?
[2013-03-28 00:25:55 -0400] GreatSUN: knuckolls: library
[2013-03-28 00:26:43 -0400] knuckolls: my gut reaction is that it's likely there's already a built in way to do what you want, but it would help if i understood what greater problem you were trying to solve. I.E why a library, etc
[2013-03-28 00:27:34 -0400] GreatSUN: knuckolls: solving backward compatibility issues
[2013-03-28 00:28:04 -0400] GreatSUN: knuckolls: moving to newer version and other attributes and have to support the old style, too
[2013-03-28 00:28:46 -0400] GreatSUN: knuckolls: therefore I built up a library to look for the old attributes and to build up a hash with the new keys
[2013-03-28 00:29:00 -0400] GreatSUN: and the value set to the old
[2013-03-28 00:29:18 -0400] GreatSUN: now I still have to merge this new hash to the node-attributes
[2013-03-28 00:30:20 -0400] knuckolls: so i'm pretty sure that the node object isn't available in the libraries, and that it's just meant to be arbitrary ruby code. I think your best bet is most likely familiarizing yourself with the attributes section of the chef source code and monkeypatching in your updates.
[2013-03-28 00:31:23 -0400] knuckolls: I feel like I've seen that the attributes stuff was a mash on the inside, but I don't know for sure, and I certainly haven't checked since chef 11 rolled around.
[2013-03-28 00:31:25 -0400] GreatSUN: knuckolls: you are wrong. it is available
[2013-03-28 00:31:47 -0400] knuckolls: my knowledge may be outdated then.
[2013-03-28 00:31:57 -0400] GreatSUN: np ;-)
[2013-03-28 00:32:27 -0400] knuckolls: i have one more idea, let me check something
[2013-03-28 00:35:23 -0400] knuckolls: GreatSUN: so i was curious so I pulled up shef -z and got into recipe mode and looked at what methods were avaiable with (node.methods - Object.methods).sort
[2013-03-28 00:35:30 -0400] knuckolls: to see what I've got access to from that standpoint
[2013-03-28 00:36:46 -0400] knuckolls: anyway, there are a lot of methods there that you might be able to use. construct_attributes is likely what's called internally to get the final Chef::Node::Attributes class that's populated
[2013-03-28 00:37:55 -0400] knuckolls: so one idea would be to monkeypatch it by extending the functonality of that method and adding on a .merge method that applies your hash before it's returned to the rest of the code.
[2013-03-28 00:38:21 -0400] knuckolls: that is, unless there's something built in that already does it, but I didn't see it at a glance.
[2013-03-28 00:38:31 -0400] knuckolls: you may get more visibility on the mailing list.
[2013-03-28 00:38:40 -0400] knuckolls: GreatSUN: hope that helps. :)
[2013-03-28 00:39:14 -0400] GreatSUN: knuckolls
[2013-03-28 00:39:17 -0400] GreatSUN: thanks a lot :-)
[2013-03-28 00:39:27 -0400] knuckolls: np good luck!
[2013-03-28 00:39:35 -0400] GreatSUN: thanks
[2013-03-28 00:49:15 -0400] GreatSUN: knuckolls: do you have an idea on a merge between hashes containing hashes?
[2013-03-28 00:49:53 -0400] GreatSUN: for example if a hash is a value at a key in another and has one key that doesn't exist in the other
[2013-03-28 00:50:13 -0400] knuckolls: i think there's a deep merge in the ruby hash class or i've seen one on the internet
[2013-03-28 00:50:14 -0400] GreatSUN: that this key/value is merged to the other hash within the hash
[2013-03-28 00:50:19 -0400] knuckolls: either way, i feel like it's a solved problem?
[2013-03-28 00:50:32 -0400] knuckolls: perhaps?
[2013-03-28 00:50:43 -0400] GreatSUN: knuckolls: i have been reading something about a deep_merge only for one level
[2013-03-28 00:50:48 -0400] GreatSUN: but I will have a look again
[2013-03-28 00:51:21 -0400] GreatSUN: knuckolls: you can use node[<mykey>].to_hash and save it temporarly to another hash and then merge this one with another
[2013-03-28 00:51:37 -0400] knuckolls: right, but then what do you do with that
[2013-03-28 00:51:41 -0400] GreatSUN: and afterwards just set node[<mykey>] to the result
[2013-03-28 00:51:47 -0400] knuckolls: per key
[2013-03-28 00:51:59 -0400] knuckolls: sure would be nice if you could use .merge back into the attributes class
[2013-03-28 00:52:25 -0400] knuckolls: that's why i was thinking about a monkeypatch to get access to whatever structure is within. whether it's a hash or a mash it ought to have a .merge function
[2013-03-28 00:52:28 -0400] knuckolls: theoretically
[2013-03-28 00:56:18 -0400] GreatSUN: knuckolls: the .merge works for node, but destroys kind of the attribute-structure and leads into problems
[2013-03-28 00:56:28 -0400] GreatSUN: maybe I can try deep_merge for node
[2013-03-28 00:56:57 -0400] knuckolls: yeah i imagine you're gonna find some cool corner cases
[2013-03-28 00:57:11 -0400] GreatSUN: knuckolls: I always have
[2013-03-28 00:57:13 -0400] GreatSUN: :-(
[2013-03-28 00:57:25 -0400] knuckolls: that's why i'd suggest a post to the mailing list to see if anyone at opscode has any guidance. they know that codebase real well :)
[2013-03-28 00:58:15 -0400] GreatSUN: I bet, but I still hope to find some good solution in the next minutes
[2013-03-28 01:01:14 -0400] GreatSUN: knuckolls: btw. deep_merge is a custom method which you can implement whereever, not integrated
[2013-03-28 01:01:33 -0400] knuckolls: kk good to know
[2013-03-28 01:10:15 -0400] GreatSUN: knuckolls: open classes is nice in ruby :-)
[2013-03-28 01:10:29 -0400] GreatSUN: knuckolls: just add a method to a class wherever you like :-)
[2013-03-28 01:10:56 -0400] knuckolls: yep! be nice and put it in a file called 'monkeypatches' so maintainers of your code can clearly see that there be dragons in here.
[2013-03-28 01:11:46 -0400] GreatSUN: hehe
[2013-03-28 01:11:58 -0400] GreatSUN: to be nice, I don't even mention it
[2013-03-28 01:12:25 -0400] GreatSUN: knuckolls: it was already kind of hard work and long discussions to create a library
[2013-03-28 01:13:25 -0400] GreatSUN: knuckolls: everything that is ruby default/standard and object oriented programming that is not documented at opscode/chef base website is kinda hard work to implement
[2013-03-28 01:14:07 -0400] knuckolls: i don't even google anymore sometimes, i know full well that i'm just going to have to go figure it out. that's why i use the repl in shef -z.
[2013-03-28 01:15:08 -0400] GreatSUN: yeah all I get to know is that everyone knows something, but all the time you are asked why do you want this and that and whatever
[2013-03-28 01:16:03 -0400] GreatSUN: knuckolls: and if you need to explain everything before so that the others are able to follow your thoughts and all that until they come to the conclusion that you need what you need
[2013-03-28 01:16:11 -0400] GreatSUN: that is kinda taking days
[2013-03-28 01:16:33 -0400] GreatSUN: I appreciate your kind of work
[2013-03-28 01:17:03 -0400] GreatSUN: sometimes I forget about some keyword and just need this word in my mind again
[2013-03-28 01:17:54 -0400] GreatSUN: ok, now I can find out if my backward compatibility stuff is really going to work :-)
[2013-03-28 01:18:04 -0400] GreatSUN: since everything works out with a running node now
[2013-03-28 01:18:15 -0400] GreatSUN: I can destroy all and redeploy
[2013-03-28 01:46:10 -0400] GreatSUN: is there a possibility to search nodes by part of a tag?
[2013-03-28 02:05:19 -0400] bluekelp: GreatSUN: knife search 'tags:foo-*'
[2013-03-28 02:06:22 -0400] GreatSUN: bluekelp: hehe thanks, just found it...
[2013-03-28 02:06:37 -0400] GreatSUN: bluekelp: is there also an option to show all tags of one node?
[2013-03-28 02:06:45 -0400] GreatSUN: this is what I am searching for now
[2013-03-28 02:07:37 -0400] bluekelp: GreatSUN: knife node show <node>
[2013-03-28 02:07:53 -0400] bluekelp: you can add '-F json' if you want to parse it easier
[2013-03-28 02:08:33 -0400] GreatSUN: bluekelp: doesn't show up with tags
[2013-03-28 02:09:15 -0400] bluekelp: hm, not sure what would cause that
[2013-03-28 02:11:42 -0400] denken: shouldnt 'initctl stop opscode-runsvdir' oh, i dont know, stop all the chef processes?
[2013-03-28 02:15:22 -0400] GreatSUN: bluekelp: do you know about the changes in chef 11?
[2013-03-28 02:16:36 -0400] bluekelp: GreatSUN: no, i started on 11 so it's all i've known
[2013-03-28 02:16:58 -0400] bluekelp: GreatSUN: was that the version that introduced erlang/etc or was that 10?
[2013-03-28 02:18:30 -0400] maek: chef 11 is erchef
[2013-03-28 02:18:38 -0400] GreatSUN: :-)
[2013-03-28 02:18:41 -0400] GreatSUN: thanks maek
[2013-03-28 02:19:08 -0400] maek: np :)
[2013-03-28 02:19:24 -0400] GreatSUN: what I wanted to know is if accessing attributes with chef 11 is the same as hashes as long as you do it read only
[2013-03-28 02:19:44 -0400] GreatSUN: cause when setting you have to use node.normal[<key>] = <value>
[2013-03-28 02:20:13 -0400] GreatSUN: access is done like this? : node[<key>].nil?
[2013-03-28 02:20:44 -0400] GreatSUN: or do you have to/should you use node.normal[<key>].nil? at chef 11 ?
[2013-03-28 02:29:24 -0400] bluekelp: GreatSUN: use node[:key].nil?
[2013-03-28 02:29:54 -0400] bluekelp: otherwise i don't think attribute precendence will be correct - you might not get what you "should" get
[2013-03-28 02:33:12 -0400] jtnz: Hi, is there a command (perhaps via a knife plugin) that I can use to lock the highest available version of a cookbook to an environment?
[2013-03-28 02:33:33 -0400] bluekelp: jtnz: http://docs.opscode.com/essentials_environments_formats.html
[2013-03-28 02:33:40 -0400] GreatSUN: bluekelp: I thought so, too
[2013-03-28 02:33:58 -0400] GreatSUN: bluekelp: thanks, then work was good :-)
[2013-03-28 02:34:06 -0400] bluekelp: you need to lock it in a .rb or .json file and then get it to the server. also you'll need to move the node to the environment
[2013-03-28 02:34:42 -0400] bluekelp: jtnz: one level up from that page (http://docs.opscode.com/essentials_environments.html) has more info. sry posted too detailed link
[2013-03-28 02:35:00 -0400] jtnz: bluekelp, yea, I have basically had the cookbooks webui page open while doing knife environment edit but it's prone to error
[2013-03-28 02:35:31 -0400] jtnz: e.g. if I make a typo, it doesn't check that the given cookbook or version actually exists
[2013-03-28 02:36:13 -0400] bluekelp: i don't think so.  i think it checks when client fetches updates from server, so it'd see no updates/etc and keep what it has - i think
[2013-03-28 02:36:55 -0400] jtnz: yeah, I just don't want to miss one, then update it and say a prod node gets the new version and breaks things, because I mis-entered the name or version
[2013-03-28 02:37:30 -0400] denken: c00p: did you ever figure out this issue with 'chef-server-ctl stop' not actually stopping all the chef processes
[2013-03-28 02:46:53 -0400] cdracars: looking for best practices i want to add some extra configs on all nodes should I create sperate recipes for each config that depends on other recipes like php or mysql or is there a way to have a part of a recipe be looked over unless its the right node type?
[2013-03-28 02:48:46 -0400] bluekelp: cdracars: if you tag nodes you can test for that in recipe; or check node's environment or roles
[2013-03-28 02:49:30 -0400] bluekelp: but depending on your rationale for doing it, adding another recipe to the run_list of those nodes might make more sense
[2013-03-28 02:50:27 -0400] cdracars: bluekelp: i have my git config and some basic php.ini configs and such in an extra recipe but don't need them to fire if say php isn't installed
[2013-03-28 02:51:09 -0400] bluekelp: that sounds like a role. you want it done on your PHP nodes but not others (assuning "PHP" makes sense as a role)
[2013-03-28 02:54:28 -0400] cdracars: bluekelp: so basically your saying that it will need to be broken up into smaller recipes to place them in manageable roles
[2013-03-28 02:55:36 -0400] bluekelp: it's one way - but it sounds like these pieces are sprinkled through lots of recipes?
[2013-03-28 02:56:33 -0400] bluekelp: it might be easier to tag the nodes or just check for the presence of the pkg in your recipes - e..g, only_if( File.exists? '/etc/php/php.ini')
[2013-03-28 02:57:17 -0400] cdracars: thanks that gives me some things to think on :)
[2013-03-28 02:59:51 -0400] bluekelp: anyone know /c
[2013-03-28 03:05:46 -0400] GreatSUN: bluekelp: hm?
[2013-03-28 03:08:26 -0400] bluekelp: GreatSUN: typo. had a node wander off into the woods - chef lost its ip/fqdn info somehow or client failed to run
[2013-03-28 03:08:44 -0400] GreatSUN: ah ok
[2013-03-28 03:09:00 -0400] GreatSUN: I am ready now with my implementation
[2013-03-28 03:09:04 -0400] GreatSUN: seams everything works
[2013-03-28 03:09:11 -0400] GreatSUN: and ready for chef 11, too :-)
[2013-03-28 03:10:00 -0400] GreatSUN: so my bed is asking me to come in
[2013-03-28 03:10:02 -0400] GreatSUN: and I will follow
[2013-03-28 03:10:08 -0400] GreatSUN: talk to ya laters
[2013-03-28 03:10:12 -0400] GreatSUN: bye for now
[2013-03-28 05:51:02 -0400] Axsuul: Is thre any way to get gem_package resource to install gem at system level?
[2013-03-28 05:52:52 -0400] knuckolls: Axsuul: i don't have the solution on hand, but i had to solve this problem at my previous job
[2013-03-28 05:53:12 -0400] knuckolls: the way gem_package works is that it's going to install into whatever rubygems it can find
[2013-03-28 05:53:22 -0400] knuckolls: worst case, it'll be the embedded rubygems that chef uses
[2013-03-28 05:53:49 -0400] knuckolls: you've got to install the system ruby first, make sure it's all good with the alternatives subsystem if you're on ubuntu, and then have ohai re-run and discover it
[2013-03-28 05:53:52 -0400] Axsuul: knuckolls: yea, when its embedded seems to fail because it requires sudo. Were you getting htat?
[2013-03-28 05:53:53 -0400] knuckolls: something along those lines
[2013-03-28 05:54:04 -0400] knuckolls: chef-client / chef-solo should be running as root
[2013-03-28 05:54:19 -0400] knuckolls: i've never encountered that problem, no.
[2013-03-28 05:58:32 -0400] Axsuul: knuckolls: I've been trying to debug this https://gist.github.com/axsuul/6afa5bb370962e9c826b
[2013-03-28 05:58:38 -0400] Axsuul: knuckolls: can't figure out why it's failing on that line
[2013-03-28 05:59:06 -0400] Axsuul: knuckolls: Was taking a guess it was gem_package, but not sure
[2013-03-28 05:59:17 -0400] knuckolls: does `which -a gem` show that rubygems is installed anywhere?
[2013-03-28 05:59:35 -0400] knuckolls: also, does /opt/chef/embedded/bin/gem list show that it actually installed anything?
[2013-03-28 06:00:04 -0400] knuckolls: also on the node that failed, can you actually run /opt/chef/embedded/bin/gem install homesick
[2013-03-28 06:01:00 -0400] Axsuul: knuckolls: /opt/chef/embedded/bin/gem doesn't exist, however /usr/bin/gem does
[2013-03-28 06:01:23 -0400] knuckolls: can you install it by hand? in /usr/bin/gem ?
[2013-03-28 06:01:41 -0400] Axsuul: knuckolls: yea I can but wonder why it fails with chef
[2013-03-28 06:01:45 -0400] knuckolls: hm
[2013-03-28 06:02:03 -0400] knuckolls: are you using chef 10 or 11?
[2013-03-28 06:02:39 -0400] Axsuul: chef 10.18.2
[2013-03-28 06:02:58 -0400] knuckolls: k so you should be able to go on the broken node
[2013-03-28 06:03:02 -0400] knuckolls: type `shef`
[2013-03-28 06:03:07 -0400] knuckolls: type `recipe` to go into recipe mode
[2013-03-28 06:03:21 -0400] knuckolls: then you should be able to run that specific gem_package resource by hand
[2013-03-28 06:03:28 -0400] knuckolls: for a more interactive debugging environment
[2013-03-28 06:03:50 -0400] knuckolls: Axsuul: http://wiki.opscode.com/display/chef/Shef
[2013-03-28 06:04:29 -0400] knuckolls: you might also want to look at all the attributes that ohai picks up off the node to see if there's any mention of rubygems, or the gem command at all. `ohai | grep gem`
[2013-03-28 06:05:42 -0400] alop: any one having this trouble on ubuntu 12.04?
[2013-03-28 06:06:00 -0400] alop: when installing chef-solr
[2013-03-28 06:06:10 -0400] Axsuul: knuckolls: neat thanks :)
[2013-03-28 06:06:17 -0400] alop: `gem_original_require': no such file to load -- chef/log
[2013-03-28 06:06:45 -0400] alop: full error is /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- chef/log (LoadError)
[2013-03-28 06:07:00 -0400] alop: this is a fresh install of ubuntu 12.04
[2013-03-28 06:09:17 -0400] knuckolls: alop: i have never encountered that but it looks more like a problem with how chef has been installed
[2013-03-28 06:09:35 -0400] alop: Yeah, I hadn't encountered that before either
[2013-03-28 06:09:48 -0400] alop: and this is using apt with opscode PPA
[2013-03-28 06:10:22 -0400] knuckolls: alop, these days the chef_full bootstrap template and the omnibus installer are your best bet
[2013-03-28 06:10:38 -0400] knuckolls: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-03-28 06:10:43 -0400] alop: I was about to ask, thanks
[2013-03-28 06:10:47 -0400] knuckolls: http://opscode.com/chef/install.sh
[2013-03-28 06:10:59 -0400] knuckolls: you can pass a -v to that install script
[2013-03-28 06:11:09 -0400] knuckolls: otherwise it'll just give you the newest chef 11
[2013-03-28 06:11:15 -0400] alop: yeah, good call
[2013-03-28 06:11:21 -0400] knuckolls: you may not want that if you haven't upgraded to 11
[2013-03-28 06:11:31 -0400] alop: yeah, I don't 10.8.2 is fine
[2013-03-28 06:11:51 -0400] knuckolls: i've found that upgrading among the 10.x releases has been painless
[2013-03-28 06:12:12 -0400] knuckolls: only one of them caused a slight problem wherein a few cookbooks suddenly had idempotency problems
[2013-03-28 06:33:00 -0400] Axsuul: I'm running gem_package resource in recipe mode within shef and after doing `run_chef`, the shef process gets killed
[2013-03-28 06:33:08 -0400] Axsuul: Any suggestions on how to debug this?
[2013-03-28 07:52:24 -0400] chef784: any idea about cookbok run from web-ui
[2013-03-28 07:53:14 -0400] chef784: currently i m using knife ssh to run command chef-client
[2013-03-28 08:58:44 -0400] zts: chef784: you (still) can't use the opensource chef server web-ui to run things on your chef-client nodes
[2013-03-28 09:18:16 -0400] null_route: Hey guys! I have have 2 Chef servers which I'm trying to keep in sync using GIT (dev and production). Pushing the commits and running "knife cookbook upload" etc works great- BUT - what do I do if I delete something on the dev server? How do I automate that change on the productino server?
[2013-03-28 09:18:26 -0400] null_route: (example, let's say I rename a role)
[2013-03-28 10:45:32 -0400] linuxboy: Hi, I'd like to use #{node.fqdn} in my environment.rb file
[2013-03-28 10:45:35 -0400] linuxboy: any ideas how?
[2013-03-28 10:46:19 -0400] zts: linuxboy: you can't, environment.rb's are not evaluated anywhere there is a node object to refer to
[2013-03-28 10:46:31 -0400] zts: linuxboy: taking a step further back, what are you trying to achieve?
[2013-03-28 10:46:52 -0400] linuxboy: Um
[2013-03-28 10:46:58 -0400] linuxboy: I have come boxes that fire up automatically
[2013-03-28 10:47:04 -0400] linuxboy: so I don't have a node.json for them
[2013-03-28 10:47:25 -0400] linuxboy: one of the files I'm writing needs a URL based on the hostname of the box
[2013-03-28 10:58:40 -0400] zts: linuxboy: okay, you can do that in your recipes, or in your cookbook attributes files (depending on what you need to do)
[2013-03-28 10:59:19 -0400] linuxboy: right
[2013-03-28 10:59:24 -0400] linuxboy: so there is another problem
[2013-03-28 10:59:35 -0400] linuxboy: the attributes are something like:
[2013-03-28 10:59:41 -0400] linuxboy: [:a][:url]
[2013-03-28 10:59:46 -0400] linuxboy: [:a][:other_stuff]
[2013-03-28 10:59:49 -0400] linuxboy: and in the template I have
[2013-03-28 11:00:04 -0400] zts: might be easiest to gist/pastebin
[2013-03-28 11:00:06 -0400] linuxboy: <% if @opts[:a] %>
[2013-03-28 11:00:14 -0400] linuxboy: yeah
[2013-03-28 11:00:40 -0400] linuxboy: well
[2013-03-28 11:00:43 -0400] linuxboy: basically
[2013-03-28 11:00:46 -0400] linuxboy: I have an if statement
[2013-03-28 11:01:00 -0400] linuxboy: and if I set the url in the attributes, that statement will always be true
[2013-03-28 11:02:41 -0400] zts: I'm really having trouble imagining what you're doing that isn't working, sorry :/  Could you gist the relevant parts of your attributes, recipe, and template?
[2013-03-28 11:12:22 -0400] chef784: can i run cook book from web ui
[2013-03-28 11:15:27 -0400] zts: chef784: you have asked that question about half a dozen times in the last week.  The answer was no every one of those times.  The answer is no now.  The answer will still be no the next time you ask.
[2013-03-28 11:15:46 -0400] zts: chef784: if you have a budget, contact Opscode Sales and ask them about Private Chef, which will soon be having a feature like that.
[2013-03-28 11:23:06 -0400] kadishmal: Hello
[2013-03-28 11:23:06 -0400] kadishmal: I'm having witnessing some critical bug in mixlib-shellout. Can anybody refer me to the one who maintains this library?
[2013-03-28 11:23:13 -0400] kadishmal: I would really appreciate if you could help me with mixlib-shellout in Chef
[2013-03-28 11:24:03 -0400] kadishmal: anybody who can help me?
[2013-03-28 11:31:42 -0400] mikebb1: hello fellow chef'ers
[2013-03-28 11:32:13 -0400] mikebb1: hi all, I've had lots of trouble with 401 auth issues
[2013-03-28 11:32:34 -0400] mikebb1: finally I get it working last week and bootstrap a node fine
[2013-03-28 11:32:54 -0400] mikebb1: back into it today, and lo and behold, validation errors again.
[2013-03-28 11:34:15 -0400] mikebb1: the validation pem hasn't changed on either the server of workstation, so why am I back to validation pem issues? ANyone got any ideas? At the moment I'm having to purge my validation cert and reset every session
[2013-03-28 11:47:31 -0400] mikebb1: anyone know why my chef-server is invalidating its own validation pem meaning clients with the correct validation pem can't auth to the server please?
[2013-03-28 11:48:16 -0400] Mez: mikebb1: I don't know why - but I had the same problem.
[2013-03-28 11:48:27 -0400] Mez: mikebb1: Did you regenerate the validation pem?
[2013-03-28 11:49:08 -0400] Mez: I had the same issue. Completely deleted the validator client, and recreated it - pushed out new certificate - and it was all fixed.
[2013-03-28 11:49:13 -0400] mikebb1: thanks Mez yes, have to every time I go back into the server
[2013-03-28 11:49:50 -0400] mikebb1: thanks Mez, so you removed the validator client completely?
[2013-03-28 11:50:14 -0400] Mez: yep, via the webui. Then recreated it (no admin) with the same name, and grabbed the new key.
[2013-03-28 11:50:33 -0400] mikebb1: Mez: Thanks loads will try that
[2013-03-28 11:53:55 -0400] Mez: mikebb1: let me know how it goes.
[2013-03-28 11:54:07 -0400] gchristensen: is there a way to reduce "quiet up" a cookbook? ssh_known_hosts_entry outputs 264 lines on every run.
[2013-03-28 11:54:48 -0400] mikebb1: Mez: will do thanks, trying to see through the tears of frustration
[2013-03-28 11:54:56 -0400] smt: I have configured chef-client on one of the mac node. How do I check that its configured there ?
[2013-03-28 11:55:02 -0400] Mez: gchristensen: can you give an example of what you're doing ?
[2013-03-28 11:57:25 -0400] gchristensen: of course. I'm using https://github.com/opscode-cookbooks/ssh_known_hosts/ and the default recipe, which adds SSH host keys to each server. It creates these four lines for every machine: https://gist.github.com/grahamc/59f2b9e60540a3ae119f/raw/cde7b611871b8c7721d61a5cc054a374c06a0038/gistfile1.txt
[2013-03-28 11:58:29 -0400] Mez: gchristensen: you can run chef-client with a different log level?
[2013-03-28 11:59:11 -0400] gchristensen: I could in the general case, but I find this level of output useful, for everything except this recipe :)
[2013-03-28 12:00:00 -0400] Mez: gchristensen: unfortunately, that's just how chef works, it calsl those at an INFO level to let you know what it's stepping through
[2013-03-28 12:00:45 -0400] Mez: gchristensen: if the known hosts list is static - you could just create a recipe that'll just put the file in place?
[2013-03-28 12:00:56 -0400] gchristensen: okay. I'll look into a way to maybe change that :/ pass in a list of nodes, instead of one at a time.
[2013-03-28 12:01:06 -0400] gchristensen: yeah, that's what I'm thinking, something similar to that.
[2013-03-28 12:02:17 -0400] gchristensen: thank you for your input!
[2013-03-28 12:02:25 -0400] Mez: sorry I couldn't help more
[2013-03-28 12:02:32 -0400] gchristensen: no  worries at all
[2013-03-28 13:33:36 -0400] dcrosta: is "node" or "@node" the proper way to refer to the node object in a recipe library?
[2013-03-28 13:45:13 -0400] Mez: dcrosta: I've only ever used "node", never "@node"
[2013-03-28 13:56:50 -0400] BryanWB__: does `berks upload` upload all the files in a cookbook or only certain folders like knife cookbook upload does?
[2013-03-28 14:01:18 -0400] mrechler: has anyone had the template resource not create a file and even remove the file if it exists?
[2013-03-28 14:08:37 -0400] hermes: Question: Here is a snippet from my chef cookbook, http://pastie.org/private/2t9xcsqpf9wswtsi7zc4g . I'm trying to capture when the mount returns a "Mixlib::ShellOut::ShellCommandFailed" (because the directory does not exist), however it just doesn't want to rescue. Any ideas?
[2013-03-28 14:12:37 -0400] Mez: jtimberman: you around?
[2013-03-28 14:12:55 -0400] Mez: jtimberman: nvm, I'm actually in the wrong place, thinking of the wrong thing
[2013-03-28 14:13:18 -0400] drrk: Mez: it's a bit early in seattle isn't it?
[2013-03-28 14:16:25 -0400] ninjanoise: hi, i've never played with chef at all, but was wanting to tinker around. Any suggestions for the easiest place to get started with that? Is there a "try chef" somewhere out there that I've missed?
[2013-03-28 14:16:44 -0400] Mez: drrk: I've np idea where people are :)
[2013-03-28 14:17:23 -0400] Mez: ninjanoise: what're you looking to do with it should be your first question.  As a lot of things are stuff you write yourself (or put together yourself) then that's probably where you should start.
[2013-03-28 14:17:46 -0400] Mez: ninjanoise: there is also Chef managed, which is free for up to 5 clients (manage.opscode.com)
[2013-03-28 14:18:47 -0400] ninjanoise: Mez: I'm just looking to mess with it a little, reading is one thing but playing around is another..
[2013-03-28 14:19:40 -0400] Mez: ninjanoise: What do you hope to acheive?  As in, what do you want chef to do?  You'll need a box setup that can do things - but other than that - chef-solo might be best for you to play with, or the free managed chef.
[2013-03-28 14:19:55 -0400] drrk: Mez: heh fair enough, well jtimberman works for Opscode, so is usually in Seattle AFAIK, but he does go to conferences a lot too
[2013-03-28 14:20:25 -0400] Mez: drrk: also - pings don't need to be answered straight away :) that's what hilights/awaylogs are for :)
[2013-03-28 14:22:46 -0400] BryanWB__: jtimberman is on vacatino
[2013-03-28 14:22:50 -0400] BryanWB__: iirc
[2013-03-28 14:23:54 -0400] Mez: BryanWB__: *shrugs* I don't need him anwyays (and he was here yesterday1(
[2013-03-28 14:25:46 -0400] hermes: Anyone know how to capture a Mixlib::ShellOut::ShellCommandFailed error being thrown in chef?
[2013-03-28 14:29:33 -0400] porque: Hi, I have been trying to make the chef-workstation all day yesterday - but I can't seem to get it to talk to the chef-server via knife
[2013-03-28 14:29:49 -0400] porque: I try to do the knife client list
[2013-03-28 14:29:55 -0400] porque: And I keep getting: ERROR: Failed to authenticate to https://10.10.31.71 as shija03 with key /root/chef-repo/.chef/shija03.pem
[2013-03-28 14:30:35 -0400] porque: Can anyone shed some light?  my workstation is: Chef: 11.4.0
[2013-03-28 14:30:48 -0400] Mez: porque: It may be stupid of me to ask - but have you setup the server on HTTPS? Have you setup the client, and are you using the right key ?
[2013-03-28 14:31:05 -0400] porque: and my chef-server is: Chef: 0.10.10 ????
[2013-03-28 14:31:24 -0400] porque: Mez: I loging to 10.10.31.71 using the Web Interface
[2013-03-28 14:31:33 -0400] porque: I saw the shija03 client
[2013-03-28 14:32:03 -0400] porque: I basically ran the create client from the chef server and then copied the file from the server to the workstation
[2013-03-28 14:32:08 -0400] porque: As indicated on the instructions.
[2013-03-28 14:32:11 -0400] porque: The private key
[2013-03-28 14:32:35 -0400] porque: I checked the time between the two servers (I think this error is probably misleading) and they were the saem
[2013-03-28 14:32:40 -0400] porque: *same
[2013-03-28 14:32:41 -0400] Mez: porque: what instructions are you following ?
[2013-03-28 14:32:45 -0400] porque: 1 sec
[2013-03-28 14:32:50 -0400] porque: Let me find the URL
[2013-03-28 14:33:28 -0400] porque: http://wiki.opscode.com/display/chef/Workstation+Setup+for+CentOS%2C+Red+Hat%2C+Fedora
[2013-03-28 14:33:29 -0400] porque: and
[2013-03-28 14:33:37 -0400] porque: http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually#InstallingChefServerManually-ConfiguretheCommandLineClient
[2013-03-28 14:33:48 -0400] porque: The first URL makes reference to the second one
[2013-03-28 14:34:05 -0400] porque: And I am hammering  my head - cause, it should not be so hard
[2013-03-28 14:34:21 -0400] porque: I even tried to place debug in the knife.rb file, but the output is the same
[2013-03-28 14:34:25 -0400] porque: Perhaps that is the wrong term
[2013-03-28 14:35:10 -0400] porque: http://kl1p.com/porque_chef_knife_rb
[2013-03-28 14:37:26 -0400] porque: Any ideas?
[2013-03-28 14:38:31 -0400] Mez: porque: the only thing I can think is that your key is wrong. Try regenerating it in the webui - and replacing the file with the new private key
[2013-03-28 14:39:49 -0400] porque: OK - I'll try that again - but I did this several times - you mean going to https://10.10.31.71 - login as admin (use the password that I have never changed after the install), regen the private key of the user - copy and paste it on the workstation, and then retry the command?
[2013-03-28 14:40:17 -0400] Mez: porque: yes. Or try and create a new user witha  different name.
[2013-03-28 14:40:42 -0400] Mez: and change your knife.rb to make sure that it's attempting to connect witht he new name.
[2013-03-28 14:41:04 -0400] porque: Mez: this is where I am confused
[2013-03-28 14:41:09 -0400] porque: The GUI shows clients and users
[2013-03-28 14:41:19 -0400] Mez: users == webui.
[2013-03-28 14:41:20 -0400] porque: You are referring to the "Clients" portion
[2013-03-28 14:41:22 -0400] Mez: clients == knife
[2013-03-28 14:41:36 -0400] Mez: (or chef-client)
[2013-03-28 14:41:44 -0400] porque: My current shija03 is in clients
[2013-03-28 14:42:09 -0400] porque: so you are saying to regen the key for "client" "shija03" right?
[2013-03-28 14:42:41 -0400] Mez: porque: yes.  OR create a new client with a different name.
[2013-03-28 14:42:50 -0400] Mez: and try the key for that
[2013-03-28 14:42:53 -0400] porque: OK - I will do both.
[2013-03-28 14:42:56 -0400] porque: Let me try again
[2013-03-28 14:43:28 -0400] porque: I assume the client needs to be "admin" too.
[2013-03-28 14:43:52 -0400] Mez: if you want it to be able to change things, yes
[2013-03-28 14:44:33 -0400] porque: The new client did not work
[2013-03-28 14:44:39 -0400] porque: client is now porque01
[2013-03-28 14:44:52 -0400] porque: Copied the private key information to the workstation
[2013-03-28 14:44:55 -0400] porque: Changed the knife.rb
[2013-03-28 14:45:30 -0400] porque: Another, side question, why the doc keeps speaking of validation.pem, but on the server there is no such file, but chef-validator.pem
[2013-03-28 14:46:02 -0400] porque: Also, when I run knife client on the server, it works
[2013-03-28 14:46:11 -0400] porque: knife client list (from chef server - works fine)
[2013-03-28 14:49:28 -0400] porque: When I run knife client list from the server using the new client in knife.rb, porque01, it works too
[2013-03-28 14:49:53 -0400] Mez: so, the problem is ....?
[2013-03-28 14:50:11 -0400] porque: I can't not run it from the "Workstation"
[2013-03-28 14:50:41 -0400] Mez: And since you've done the above steps?
[2013-03-28 14:50:59 -0400] porque: ERROR: Failed to authenticate to https://10.10.31.71 as porque01 with key /root/chef-repo/.chef/porque01.pem
[2013-03-28 14:51:07 -0400] porque: Yes
[2013-03-28 14:51:20 -0400] porque: From chef-server - things work - even with porque01
[2013-03-28 14:51:25 -0400] porque: But on the workstation - it doesn't
[2013-03-28 14:51:43 -0400] Mez: please paste the whole output of the command to a pastebin.
[2013-03-28 14:52:50 -0400] porque: http://pastebin.com/xyaiWNZ7
[2013-03-28 14:53:30 -0400] Mez: and with knife -V client list
[2013-03-28 14:53:31 -0400] Mez: ?
[2013-03-28 14:53:59 -0400] Mez: sorru
[2013-03-28 14:54:04 -0400] Mez: knife client list -VV
[2013-03-28 14:54:56 -0400] porque: http://pastebin.com/3Z0wrebx
[2013-03-28 14:56:21 -0400] Mez: try it while running chef-server-ctl tail on the server and pastebin the output from the server
[2013-03-28 15:03:23 -0400] porque: Mez - Thank You!
[2013-03-28 15:03:45 -0400] Mez: porque: what was the problem ?
[2013-03-28 15:03:47 -0400] porque: It was the timezone - Duh!! - the servers were showing the same time - but the timezone was different
[2013-03-28 15:04:01 -0400] porque: Thanks to the "tail" command
[2013-03-28 15:04:06 -0400] Mez: porque - add the ntp repository XD
[2013-03-28 15:04:10 -0400] porque: I could see it from the nginx error
[2013-03-28 15:04:10 -0400] Mez: ntp cookbook *
[2013-03-28 15:04:37 -0400] porque: I will
[2013-03-28 15:04:55 -0400] porque: But most importantly you showed me a few debugging flags - which is really what I needed to see.
[2013-03-28 15:04:58 -0400] porque: Thanks
[2013-03-28 15:05:57 -0400] porque: Later then - back to learning chef :D
[2013-03-28 15:13:01 -0400] BryanWB__: sethvargo: sup yinz
[2013-03-28 15:13:25 -0400] sethvargo: lol BryanWB__ what's the plural form of "you" in your parts?
[2013-03-28 15:13:42 -0400] BryanWB__: lei
[2013-03-28 15:13:55 -0400] sethvargo: haha okay. so what's up?
[2013-03-28 15:14:05 -0400] BryanWB__: or "loro" my italian is terrible, and i intend to forget the little i know
[2013-03-28 15:14:30 -0400] BryanWB__: trying to use chefspec to test minitest-handler  which depends on chef_handler
[2013-03-28 15:14:53 -0400] BryanWB__: keep getting CookbookNotFound error
[2013-03-28 15:19:22 -0400] sethvargo: BryanWB__: sorry. I pushed IRC to the BG and didn't get a little notification thingy.
[2013-03-28 15:19:45 -0400] BryanWB__: sethvargo: np
[2013-03-28 15:20:07 -0400] sethvargo: So, the whole idea with unit tests is isolation right?
[2013-03-28 15:20:15 -0400] sethvargo: so you really shouldn't be touching that external dep
[2013-03-28 15:20:25 -0400] sethvargo: my advice: stub "include_recipe"
[2013-03-28 15:20:45 -0400] sethvargo: Chef::Recipe.any_instance.stub(:include_recipe).with("chef_handler").and_return(true)
[2013-03-28 15:21:10 -0400] sethvargo: AH found it: https://gist.github.com/mlafeldt/3736333. I knew Andrew had answer the Q somewhere
[2013-03-28 15:22:33 -0400] BryanWB__: sethvargo: awesome tks
[2013-03-28 15:23:07 -0400] a13x212: can Chef::Util::FileEdit insert mulitple lines?
[2013-03-28 15:27:11 -0400] BryanWB__: sethvargo: argh, fail :( doesn't  work if you have the cookbook specified as dependency in metadata.rb, will keep looking
[2013-03-28 15:27:42 -0400] chefnoob: hi
[2013-03-28 15:28:30 -0400] chefnoob: i installed the chef server on ubuntu going to the download page and downloading the deb .. chef starts OK and everything is running . config file is in /etc/chef-server/chef-server-running.json  ,
[2013-03-28 15:28:38 -0400] sethvargo: @BryanWB__ you'll need to stub out that loading then
[2013-03-28 15:28:58 -0400] chefnoob: i changed all IPs of 127,0.0.1 to  10.x.x.x private IP and restarted the server, but it still binds to the 127,0.0.1 ip
[2013-03-28 15:29:14 -0400] chefnoob: so how do I actually make the chef server listen on my reachable ip
[2013-03-28 15:31:26 -0400] chefnoob: this is what I have: chef-server         - 11.0.6-1.ubuntu.10.04     -   The full stack of chef-server
[2013-03-28 15:34:17 -0400] marlonb: Hello everyone.
[2013-03-28 15:34:36 -0400] a13x212: chefnoob, how can you tell it is not listening on the correct ip?
[2013-03-28 15:34:41 -0400] marlonb: i feel like I'm missing something obvious.  I created a cookbook with some default attributes in it's attributes/default.rb file
[2013-03-28 15:35:07 -0400] marlonb: i'd like to change those default values in another recipe that is including the first one
[2013-03-28 15:35:16 -0400] marlonb: i did node.default[..]  and it did not work
[2013-03-28 15:35:28 -0400] marlonb: do I need to do that BEFORE I add the include_recipe line?
[2013-03-28 15:35:35 -0400] marlonb: or is there a much nicer way to do this?
[2013-03-28 15:38:00 -0400] mikebb: Mez: Thats looking okay at the moment, hopefully it won't get upset with the validation pem next time..thanks
[2013-03-28 15:39:11 -0400] smoyer_: have you considered changing the attribute at a environment, role or node level instead of the recipe?
[2013-03-28 15:39:28 -0400] programmerq: anyone know what the exact location of the chef conference is this year?
[2013-03-28 15:45:55 -0400] marlonb: smoyer_: yes it just seemed like a good idea to do it at the recipe level for this, but I see what you're saying
[2013-03-28 15:46:14 -0400] marlonb: the recipe is specifically for something purpose built
[2013-03-28 15:46:35 -0400] marlonb: but I guess a role setting may work
[2013-03-28 15:51:58 -0400] juliancdunn: programmerq: it's at the Embarcadero Hyatt in San Francisco
[2013-03-28 15:52:02 -0400] juliancdunn: chefconf.opscode.com
[2013-03-28 15:52:47 -0400] programmerq: juliancdunn: thanks for confirming. I didn't see that information for sure on the website
[2013-03-28 15:52:49 -0400] BryanWB__: mconigliaro: i am rewriting the mess that is minitest-handler
[2013-03-28 15:53:14 -0400] BryanWB__: mconigliaro: am trying to distill what minitest-handler adds on top of the gem minitest-chef-handler
[2013-03-28 15:53:20 -0400] programmerq: it looks like 'hyatt' does not appear anywhere on the chefconf.opscode.com front page
[2013-03-28 15:53:22 -0400] mconigliaro: yeah, i was wondering that myself
[2013-03-28 15:53:22 -0400] BryanWB__: mconigliaro: in ur opinion what should it do?
[2013-03-28 15:53:45 -0400] juliancdunn: programmerq: http://chefconf.opscode.com/register/
[2013-03-28 15:53:49 -0400] BryanWB__: i hacked on it just to get it working then took it over from btm mostly by accident
[2013-03-28 15:54:06 -0400] mconigliaro: i mean, it looks like the gem absorbed all the features that your cookbook used to handle
[2013-03-28 15:54:09 -0400] poolpog: quick question about couchdb, compaction, cleanup, stuff like that...
[2013-03-28 15:54:21 -0400] poolpog: our couchdb, on disk, reports 14GB
[2013-03-28 15:54:34 -0400] poolpog: but the _utils/ web service reports 94MB
[2013-03-28 15:54:36 -0400] BryanWB__: most of them afaict
[2013-03-28 15:54:39 -0400] poolpog: what's up with that?
[2013-03-28 15:54:40 -0400] poolpog: and
[2013-03-28 15:54:43 -0400] programmerq: juliancdunn: that page doesn't appear to include the word 'hyatt' either. ;)
[2013-03-28 15:54:46 -0400] poolpog: how can I shrink the thing on disk?
[2013-03-28 15:55:09 -0400] BryanWB__: but it doesn't create folder to put tests in nor remove old tests left by cookbook no longer in run_list
[2013-03-28 15:55:12 -0400] juliancdunn: programmerq: are we looking at the same page?
[2013-03-28 15:55:13 -0400] poolpog: just a link to the appropriate docs is fine, if it is too much to explain here
[2013-03-28 15:55:32 -0400] BryanWB__: and it doesn't automatically add itself to the list of chef handlers
[2013-03-28 15:56:02 -0400] mconigliaro: BryanWB__: right, i think they handled some of that stuff in other ways
[2013-03-28 15:56:03 -0400] programmerq: ah, I clicked on "register now" rather than "register" I see it now.
[2013-03-28 15:56:10 -0400] mconigliaro: but if you look at my comment here: https://github.com/btm/minitest-handler-cookbook/pull/34
[2013-03-28 15:56:23 -0400] BryanWB__: they put it in solo.rb
[2013-03-28 15:56:24 -0400] mconigliaro: that snippet is literally all i needed for my minitest cookbook
[2013-03-28 15:57:09 -0400] BryanWB__: mconigliaro: w/ chef-solo
[2013-03-28 15:57:23 -0400] mconigliaro: yeah, is it different for chef-client?
[2013-03-28 15:57:29 -0400] BryanWB__: mconigliaro:  heh, according to my colleague next to me, ur last name means rabbit-farmer :)
[2013-03-28 15:57:30 -0400] mconigliaro: I'm doing all my testing in vagrant
[2013-03-28 15:57:34 -0400] mconigliaro: haha, he's right
[2013-03-28 15:58:08 -0400] BryanWB__: i use it only w/ vagrant too but i think some ppl use it w/ chef-client
[2013-03-28 15:59:08 -0400] BryanWB__: but does run_status.run_context.loaded_recipes pick up recipes added to run_list w/ a role?
[2013-03-28 15:59:09 -0400] mconigliaro: i guess I'm not sure why it would work differently with chef-client. is it because of the spec/test directories?
[2013-03-28 15:59:19 -0400] BryanWB__: i got a few very vocal complaints about that
[2013-03-28 15:59:34 -0400] BryanWB__: mconigliaro, yup
[2013-03-28 15:59:42 -0400] mconigliaro: i see
[2013-03-28 16:00:00 -0400] BryanWB__: but maybe i should just push that behavior upstream into the main gem
[2013-03-28 16:00:07 -0400] BryanWB__: matching the spec/test dirs
[2013-03-28 16:00:35 -0400] BryanWB__: but as far as handling expanded roles or tests coming from include_recipe, i will prolly have to handle that in this cookbook
[2013-03-28 16:00:39 -0400] mconigliaro: so yes, run_status.run_context.loaded_recipes finds every loaded recipe. even the ones included with include_recipe in a recipe.
[2013-03-28 16:00:50 -0400] mconigliaro: brb
[2013-03-28 16:00:54 -0400] BryanWB__: great, but it should happen in ruby_block
[2013-03-28 16:12:48 -0400] Mez: mikebb1: good to hear :)
[2013-03-28 16:13:06 -0400] poolpog: never mind, I figured it out
[2013-03-28 16:13:10 -0400] poolpog: thanks, poolpog
[2013-03-28 16:13:19 -0400] poolpog: hey, poolpog, what was the solution?
[2013-03-28 16:13:26 -0400] poolpog: poolpog: compact the views, too
[2013-03-28 16:15:42 -0400] Mez: poolpog: how many voices do you have in your head ? :P
[2013-03-28 16:17:30 -0400] juliancdunn: poolpog: in the chef-10 branch of the chef-server cookbook, the default recipe does All The Right Things
[2013-03-28 16:17:37 -0400] juliancdunn: https://github.com/opscode-cookbooks/chef-server/blob/chef10/recipes/default.rb
[2013-03-28 16:18:06 -0400] poolpog: poolpog: only one voice
[2013-03-28 16:18:16 -0400] poolpog: juliancdunn: thanks
[2013-03-28 16:18:33 -0400] poolpog: oops, I meant Mez only one voice
[2013-03-28 16:18:34 -0400] poolpog: whatevs
[2013-03-28 16:20:27 -0400] jtimberman: BryanWB__: am on vacation, but i'm bad at it. also, i live in denver, not seattle.
[2013-03-28 16:21:00 -0400] BryanWB__: jtimberman: i think it was someone else who asked this
[2013-03-28 16:21:12 -0400] BryanWB__: jtimberman: and get back to relaxing! ;)
[2013-03-28 16:41:53 -0400] bakins: so, jamie became test-kitchen 1.0 ?
[2013-03-28 16:57:55 -0400] markp_: could anyone help with berkshelf/vagrant/chef-solo ?
[2013-03-28 16:58:07 -0400] randomautomator: hey guys anyone know what would cause this:
[2013-03-28 16:58:37 -0400] knuckolls: markp_: yes.
[2013-03-28 16:59:18 -0400] randomautomator: http://pastebin.com/T6a7sG0G
[2013-03-28 17:01:32 -0400] knuckolls: randomautomator: can you talk to the chef server at all? `knife cookbook list`
[2013-03-28 17:01:36 -0400] randomautomator: yeah
[2013-03-28 17:01:40 -0400] randomautomator: that works just fine
[2013-03-28 17:01:54 -0400] randomautomator: actually shite
[2013-03-28 17:02:03 -0400] randomautomator: i forgot i just changed my api key
[2013-03-28 17:02:05 -0400] randomautomator: my bad
[2013-03-28 17:02:56 -0400] Mez: randomautomator: er.  possibly something weird with LOGSTASH.rb ?
[2013-03-28 17:04:56 -0400] markp_: knuckolls: vagrant provision [chef-solo] cannot find any cookbooks to load in vm
[2013-03-28 17:05:24 -0400] randomautomator: this is the entire LOGSTASH.rb
[2013-03-28 17:05:28 -0400] randomautomator: run_list *%w[
[2013-03-28 17:05:29 -0400] randomautomator:   recipe[build-essential]
[2013-03-28 17:05:29 -0400] randomautomator:   recipe[redisio::install]
[2013-03-28 17:05:30 -0400] randomautomator:   recipe[redisio::enable]
[2013-03-28 17:05:32 -0400] randomautomator:   recipe[logstash::server]
[2013-03-28 17:05:34 -0400] randomautomator:   recipe[logstash::kibana]
[2013-03-28 17:05:36 -0400] randomautomator: ]
[2013-03-28 17:05:38 -0400] randomautomator: sorry bout that i didn't think that would take multiple lines
[2013-03-28 17:05:45 -0400] knuckolls: markp_: does vagrant up provision it the first time around?
[2013-03-28 17:05:47 -0400] randomautomator: but ya so i made sure i can contact the server
[2013-03-28 17:05:52 -0400] randomautomator: and i can just fine
[2013-03-28 17:05:54 -0400] randomautomator: but i still get that error
[2013-03-28 17:06:04 -0400] jtimberman: bakins: yes, a couple months ago now :)
[2013-03-28 17:06:13 -0400] markp_: berks plugin grabs all cookbooks and vagrant provision hooks berks plugin correctly and downloads everything into stage dir
[2013-03-28 17:06:22 -0400] bakins: well, I got in the testing mood finally, jtimberman
[2013-03-28 17:06:24 -0400] jtimberman: bakins: not released yet, plan is by chefconf
[2013-03-28 17:06:34 -0400] bakins: k, we used jamie a little
[2013-03-28 17:07:13 -0400] Mez: randomautomator: *%w[ ?
[2013-03-28 17:07:21 -0400] markp_: knuckolls: no
[2013-03-28 17:07:32 -0400] randomautomator: i just took that fromt he redisio cookbook example configs
[2013-03-28 17:08:01 -0400] randomautomator: my assumption is that it's a working config.. but maybe not?
[2013-03-28 17:08:27 -0400] markp_: knuckolls: am I missing something?  how does vagrant get cookbooks into vm ... by sharing folder i assume? or scp to vm?
[2013-03-28 17:08:32 -0400] knuckolls: markp_: taking away some variables, does it work at all with a brand new cookbook initialized by berkshelf? `berks cookbook test`
[2013-03-28 17:08:45 -0400] randomautomator: @Mez: i removed the "*" and it's still the same
[2013-03-28 17:08:49 -0400] Mez: randomautomator: welp, I've never seen that in ruby.  It's a weird notation. you probably want run_list [
[2013-03-28 17:09:08 -0400] randomautomator: ok let me give it a try
[2013-03-28 17:09:22 -0400] knuckolls: markp_: berkshelf is going to resolve the dependencies it sees in your metadata.rb and your Berksfile based on the rules in the berksfile. If a dependency is referenced in metadata.rb it's going to look at the Berksfile to see where to pull it from and get it on your vagrant box before the provisioner runs
[2013-03-28 17:10:30 -0400] knuckolls: markp_: but you'll be able to see how it works if you just try it with a brand new cookbook with the default generated configs. If that doesn't behave, then vagrant / berks is misconfigured or has the wrong versions.
[2013-03-28 17:10:38 -0400] markp_: it resolves everything correctly, but somehow the vagrant box does not have anything in it
[2013-03-28 17:12:29 -0400] bakins: jtimberman: vagrant 1.1 only for test-kitchen? vagrant has become libc5 circa 2002 for us...
[2013-03-28 17:13:38 -0400] Mez: randomautomator: have a look at https://gist.github.com/Mezzle/3b91b990136bc26f3b38
[2013-03-28 17:13:57 -0400] Mez: first file is a working role from my setup - 2nd is what yours should probably look like.
[2013-03-28 17:15:00 -0400] jtimberman: bakins: dunno, i've been using vagrant 1.0.6
[2013-03-28 17:15:07 -0400] jtimberman: bakins: pin the version in the Gemfile
[2013-03-28 17:15:11 -0400] randomautomator: @mez: thanks that worked
[2013-03-28 17:15:19 -0400] randomautomator: i think i just was missing the role name in the .rb file
[2013-03-28 17:15:24 -0400] c_t: I see you take vacations like I do, jtimberman
[2013-03-28 17:15:27 -0400] randomautomator: muchas gracias
[2013-03-28 17:15:28 -0400] Mez: randomautomator: glad to be of help
[2013-03-28 17:15:36 -0400] jtimberman: c_t: sucking at vacation since 1999
[2013-03-28 17:15:39 -0400] markp_: i upgraded my env to the new 1.3+ berks as well as the 1.1.14 vagrant dmg
[2013-03-28 17:16:11 -0400] knuckolls: i had all sorts of little problems with vagrant 1.1 and berks 1.3 when i was attempting to migrate to that on monday
[2013-03-28 17:16:42 -0400] knuckolls: we decided it wasn't worth the time and just kept rolling on vagrant 1.0.7 and berkshelf 1.2.1
[2013-03-28 17:17:11 -0400] knuckolls: i wanted to trailblaze and publish my findings out to the community, but basically as far as priorities go i just needed to get work done :)
[2013-03-28 17:17:14 -0400] bakins: knuckolls: that's why I hacked together berkshelf-hobo
[2013-03-28 17:17:26 -0400] bakins: still have to run a hacked up branch of berks, however
[2013-03-28 17:17:29 -0400] knuckolls: bakins: saw that right after we just decided to keep rolling on other things this week.
[2013-03-28 17:17:50 -0400] bakins: I'm hoping it'll be a short lived "project" - itch to scratch, etc
[2013-03-28 17:17:52 -0400] knuckolls: right
[2013-03-28 17:18:18 -0400] knuckolls: previously we auto-loaded chef-client stuff from our ~/.chef/knife.rb via the chef gem
[2013-03-28 17:18:35 -0400] knuckolls: but that had to go because vagrant 1.1 doesn't look at your system rubygems, and won't let you install gems to it's sandbox
[2013-03-28 17:18:53 -0400] knuckolls: bakins: did you solve that? do you do something like that as well?
[2013-03-28 17:19:27 -0400] knuckolls: i dunno if others use chef-client w/ vagrant & berkshelf. I like to have my vagrantfiles with a solo provisioner and a client provisioner so i can test both real quick
[2013-03-28 17:19:47 -0400] knuckolls: so i can do vagrant up solo, or vagrant up client
[2013-03-28 17:19:50 -0400] bakins: I gave up on vagrant 1.1 for now. I had same issues with gems
[2013-03-28 17:20:15 -0400] knuckolls: i talked to mitchellh in #vagrant and he seemed surprised that he'd removed our use case, and said i should just make it work with a plugin
[2013-03-28 17:20:35 -0400] smoyer_: Anyone know if the chef conf tickets get sent out automatically after you register.. we registered over a week ago and I haven't seen the tickets yet..  I remember getting them by email last year, but I don't remember if it was soon after
[2013-03-28 17:20:50 -0400] knuckolls: bakins: which i tried, and i gave up around the time i had problems accessing classes / objects in the plugin scope
[2013-03-28 17:21:09 -0400] knuckolls: i dunno how he intends for us to get information out of plugins, into the Vagrantfile anymore
[2013-03-28 17:21:26 -0400] knuckolls: worst case, i'll just copy paste code into my Vagrantfile at the bottom and leave it at that.
[2013-03-28 17:21:34 -0400] bakins: knuckolls: same here. I just have some snippets I use in berks that setup our private repos as sources, etc
[2013-03-28 17:22:34 -0400] bakins: looks like 0.6.0 of kitchen-vagrant should work. trying
[2013-03-28 17:22:39 -0400] knuckolls: well someone else having the same problem is at least nice validation.
[2013-03-28 17:22:42 -0400] Kzim: Hello, for mongo auth i need to stop mongo, change de config, start, adduser and restart with the right config. can it be done within a single chef-client run ?
[2013-03-28 17:22:55 -0400] knuckolls: i'll return to the problem in a few weeks.
[2013-03-28 17:23:05 -0400] bakins: we are making our own internal version of chef-utensils, bcs a lot of people here have issues getting it all to work together
[2013-03-28 17:23:16 -0400] bakins: and I'm supposed to be done already...
[2013-03-28 17:23:28 -0400] knuckolls: haha i'm basically also doing that at my new gig
[2013-03-28 17:23:35 -0400] knuckolls: i wrote a hell of a readme
[2013-03-28 17:30:51 -0400] smoyer_: is anyone populating their chef server from source control?  We're doing cookbooks now.. but I'm wondering about populating node attributes, environments, roles from source control as well..  loading a node json file with knife from the repo blows away the ahai attributes, which has been problematic..
[2013-03-28 17:34:00 -0400] gchristensen: smoyer_: roles, cookbooks, environments all from source is common. node attributes less so, is my understanding. for me I don't consider it necessary (I'm no expert, YMMV) since the node attributes are entirely calculated via the roles and recipes and enviroments + ohai
[2013-03-28 17:40:07 -0400] smoyer_: we've used node level attributes to override defaults in a few rare cases .. one example is to define the tomcat jvmRoute for each server.. (it's used for cookie based server affinity) ..  it's a small rather fixed environment.. it might be better to derive the value and do our best to avoid node attributes..
[2013-03-28 18:05:08 -0400] Kzim: hello how could i be sure i execute some ruby after service has been restart ?
[2013-03-28 18:05:30 -0400] sparr0: All of the information the chef server knows about a client, such as its OS and users and versions of software... There's a client command to spit all that out. I've forgotten it. Remind me?
[2013-03-28 18:07:40 -0400] bakins: sparr: ohai ?
[2013-03-28 18:08:16 -0400] programmerq: looking at this, http://docs.opscode.com/essentials_nodes_chef_run.html, we're curious if we can make chef update the attributes at the chef server as soon as the node object is rebuilt (the "reset node attributes step")
[2013-03-28 18:09:36 -0400] programmerq: we have a recipe that does a search and looks for attributes on another node. On an initial run, this means it fails until chef has completed on the nodes that we're searching for. This is okay, but we want to do the same thing so both groups of nodes need to search for eachother.
[2013-03-28 18:09:45 -0400] programmerq: since they will both fail, niether will ever succeed
[2013-03-28 18:09:52 -0400] programmerq: classic chicken/egg problem.
[2013-03-28 18:10:46 -0400] sparr: bakins: thanks!
[2013-03-28 18:10:53 -0400] stearns: Hi all; I reported http://tickets.opscode.com/browse/COOK-2638 a week ago, with a trivial fix, but it hasn't been touched. Did I create it in the wrong state or something? (it's now: status Fix Provided, resolution Unresolved)
[2013-03-28 18:13:49 -0400] wdilly: Guys, I am in the process of deploying chef with our private cloud eucalyptus and am trying to figure out the best practice for nodes to automatically de-register themselves when they are torn down. Is there a way to do this that doesnt involve using knife on the instances? Otherwise is their a way of limiting knifes ability on the instances to only be able to de-register itself? Thanks.
[2013-03-28 18:22:46 -0400] teukka: stearns: it will get reviewed at some point. there seems to be a lot of tickets in the queue especially due to vacations this week
[2013-03-28 18:23:19 -0400] stearns: teukka: ok, thanks! No rush, I just wanted to make sure I hadn't done it wrong.
[2013-03-28 18:23:52 -0400] maplebed: wdilly: I didn't find a good deregistration thing (for ec2) so instead I have a knife exec script that does a bunch of stuff (remove DNS entry, stop instance, delete chef client and node data, delete EBS volumes)
[2013-03-28 18:26:09 -0400] maplebed: stearns: there's also the CLA dance - if you haven't done it yet, they'll block your patch until you do.
[2013-03-28 18:27:21 -0400] dani3113: Hi, so I have an issue. I finished bootstrapping all my nodes, but when I run "knife ssh '*:*'' I get "FATAL: No noes returned from search!"
[2013-03-28 18:28:21 -0400] teukka: maplebed: he wouldn't have been able to change the ticket status without a signed CLA :)
[2013-03-28 18:28:55 -0400] maplebed: nice.  hooray for tech-enforced process!  :D
[2013-03-28 18:30:25 -0400] ranjibd: ohai chefs
[2013-03-28 18:31:15 -0400] stearns: maplebed: Already done that dance twice (once as employee, now standalone) so I'm good :-)
[2013-03-28 18:34:46 -0400] EJC: hi all - not sure if this can be answered quickly, but how come some ec2 nodes have a "cloud" attribute and some don't?
[2013-03-28 18:35:09 -0400] EJC: I'm trying to reuse cookbooks across vm infrastructure to aws and trying to detect if this is a "cloud" deployment
[2013-03-28 18:35:42 -0400] |rt|: I'm trying to write my first LWRP and I've been banging my head against an issue where when I try to call the LWRP the name_attribute string is unexpected
[2013-03-28 18:36:04 -0400] |rt|: has anyone seen this and know the cause....I'm sure it's something obvious but it's escapes me
[2013-03-28 18:36:22 -0400] Mez: EJC: do the ones without cloud have an ec2 attribute?
[2013-03-28 18:37:46 -0400] Mez: EJC: it detects if it's ec2 based on whether there's a specific entry in the arp table of the instance.
[2013-03-28 18:38:25 -0400] EJC: how/when is that table built?
[2013-03-28 18:39:12 -0400] EJC: I'm trying to try out a small recipe without provisioning one of our services but I'm wondering if there's something in my run list
[2013-03-28 18:39:25 -0400] Mez: EJC: that table is built by the way ec2 is setup - basically the arp table is made by it detecting the external routers mac address.
[2013-03-28 18:39:37 -0400] Mez: It's part of ohai, not of chef.
[2013-03-28 18:39:41 -0400] |rt|: ah I think I found a thread on the email list archive describing the same issue I'm running into...reading it now...hopefully it contains the answer
[2013-03-28 18:40:08 -0400] Mez: EJC: do you have an example where it's on ec2, but not detecting that it is? And can you get onto that server and see what the output of "arp" is >?
[2013-03-28 18:41:10 -0400] patroy: Hi, just staring learning about Chef and I have a quick question. Is it a bad design to have the Chef server and workstation on the same physical machine? Thanks!
[2013-03-28 18:41:13 -0400] Mez: EJC: sorry, it's based on having the mac, and being able to connect to the EC2 metadata. so if you have a firewall rule that doesn't allow it to HTTP out, then it won't detect it's EC2
[2013-03-28 18:41:30 -0400] EJC: >.<
[2013-03-28 18:41:32 -0400] Mez: So, it needs to route via ec2 stuff (potentially a problem in vpc?)
[2013-03-28 18:41:44 -0400] Mez: and needs to be able to http to 169.254.169.254
[2013-03-28 18:41:50 -0400] EJC: well, the other ec2 instances have the cloud attribute
[2013-03-28 18:41:59 -0400] EJC: sorry
[2013-03-28 18:42:05 -0400] EJC: the OTHER ones are in/on vpc
[2013-03-28 18:42:08 -0400] benkay: hey y'all, if I want to symlink all the files in folder a to folder b during a `deploy_revision` action, can I just say symlinks ({{"#{release_path}/dir/of/things" => "/dir/where/things/go",})?
[2013-03-28 18:42:15 -0400] EJC: and have "cloud"
[2013-03-28 18:42:24 -0400] Mez: EJC - can you connect to one that hasn't got cloud but are on ec2?
[2013-03-28 18:42:24 -0400] EJC: and the ones that don't do not have "ec2"
[2013-03-28 18:42:28 -0400] benkay: or would it be symlinks ({{"#{release_path}/dir/of/things/*" => "/dir/where/things/go",})
[2013-03-28 18:43:10 -0400] EJC: Mez: yes, I can ssh into it
[2013-03-28 18:43:34 -0400] Mez: EJC - can you ssh to it and run the command "arp" and show the output ?
[2013-03-28 18:44:39 -0400] EJC: Mez: here's the arp output from the one that does NOT have "cloud" attribute
[2013-03-28 18:44:42 -0400] EJC: 10.10.1.1                ether   0a:e3:63:40:00:01   C                     eth0
[2013-03-28 18:46:01 -0400] Mez: EJC - does that have anything special about the way it connects to the internet?
[2013-03-28 18:46:35 -0400] EJC: Mez, that particular instance is in our vpc
[2013-03-28 18:46:46 -0400] Mez: As in, does it go via an internet gateway, rather than an elastic IP?
[2013-03-28 18:47:04 -0400] EJC: correct
[2013-03-28 18:47:18 -0400] Mez: and the ones that are detecting, but in the VPC have an elastic IP?
[2013-03-28 18:47:19 -0400] EJC: all the vpc deployments do tho
[2013-03-28 18:47:24 -0400] EJC: no they don't
[2013-03-28 18:47:47 -0400] Mez: EJC: well, basically, it looks for a HWAddr of fe:ff:ff:ff:ff:ff to detect it's ec2 (that's how it's setup).
[2013-03-28 18:48:02 -0400] Mez: And that's not the case here.
[2013-03-28 18:48:16 -0400] matti: mccraig: ;]
[2013-03-28 18:48:20 -0400] matti: Mez: ;]
[2013-03-28 18:48:38 -0400] Mez: You can set a hint in ohai though - by creating /etc/chef/ohai/hints/ec2.json
[2013-03-28 18:48:49 -0400] Mez: but I don't know whether that's of any use to you (add it to the base AMI?)
[2013-03-28 18:50:18 -0400] dani3113: how does one verify that a bootstrapping was successful?
[2013-03-28 18:51:24 -0400] Mez: EJC: Dunno if that's possible though - if you can't detect you're on ec2 first, you can't add a hint via a recipe - which sucks.
[2013-03-28 18:51:53 -0400] Mez: EJC: see http://tickets.opscode.com/browse/OHAI-305 and http://tickets.opscode.com/browse/OHAI-310
[2013-03-28 18:51:57 -0400] Mez: (also, hi matti
[2013-03-28 18:54:45 -0400] |rt|: apparently you can't have a "-" in the name of a LWRP
[2013-03-28 18:55:18 -0400] Mez: |rt|: not if it's not quoted, as it'd be like 2-1
[2013-03-28 18:55:20 -0400] Mez: (=1)
[2013-03-28 18:55:47 -0400] |rt|: ah so I can try to quote it before renaming it as a test to verify that's my only issue I suppose
[2013-03-28 18:56:02 -0400] |rt|: Mez: but that makes sense now
[2013-03-28 18:56:21 -0400] Mez: |rt| - no - because quoting it will make it not be parsed as an LWRP, but as a string.
[2013-03-28 18:56:34 -0400] matti: |rt|: You cannot have - in the name of any class / method / etc in Ruby, so that is expected.
[2013-03-28 18:56:38 -0400] Mez: and ruby won't know what to do with a random string in the middle of nowhere
[2013-03-28 18:56:49 -0400] |rt|: Mez well it should :)
[2013-03-28 18:57:01 -0400] Mez: matti: I was trying to not mention programming :P
[2013-03-28 18:57:19 -0400] |rt|: Mez: programming doesn't scare me.....but I'm used to Python and not Ruby
[2013-03-28 18:57:44 -0400] |rt|: so trying to get up to speed in both Ruby and Chef at the same time causes some interesting stumbles
[2013-03-28 18:58:07 -0400] matti: Does not matter.
[2013-03-28 18:58:13 -0400] matti: Hyphen is not allowed in Python either.
[2013-03-28 18:58:18 -0400] Mez: |rt|: you can't have them in python ever
[2013-03-28 18:58:22 -0400] Mez: matti: High 5!
[2013-03-28 18:58:26 -0400] matti: Mez: :)
[2013-03-28 18:58:40 -0400] matti: |rt|: Its programming 101 thing.
[2013-03-28 18:58:50 -0400] |rt|: matti: yeah I forget that chef is ruby and not it's own thing
[2013-03-28 18:59:25 -0400] Mez: I'd be surprised if there's any programming language where you can have an operator in a function/classname
[2013-03-28 18:59:25 -0400] matti: |rt|: That is besides the point.
[2013-03-28 18:59:35 -0400] matti: |rt|: Even stupid Bash does not allow hyphens.
[2013-03-28 18:59:53 -0400] |rt|: I believe you can have a - in a method name for python...but now that I think about it I'm not sure I've ever tried
[2013-03-28 18:59:55 -0400] matti: :)
[2013-03-28 19:00:01 -0400] matti: No, you cannot.
[2013-03-28 19:00:09 -0400] Mez: |rt|: I'd make a bet you were wrong on that
[2013-03-28 19:00:35 -0400] |rt|: most likely
[2013-03-28 19:02:12 -0400] Mez: EJC: you could create that hint file in the userdata for launching the instance ?
[2013-03-28 19:02:12 -0400] |rt|: yeah I'm sure it would try to evaluate what's the left of the - and want to subtract it from the right side
[2013-03-28 19:03:09 -0400] |rt|: I guess that's what I get for asking someone here if you were allowed to have -'s or _'s in the name of these things and was told it didn't matter
[2013-03-28 19:03:34 -0400] Mez: |rt|: you think people tell the truth on the internet?
[2013-03-28 19:03:38 -0400] |rt|: got me started off in the wrong and the cookbook worked fine until I made it a LWRP heh
[2013-03-28 19:04:16 -0400] |rt|: Mez: what do you mean that the internets aren't all true?
[2013-03-28 19:04:22 -0400] |rt|: heh
[2013-03-28 19:06:12 -0400] |rt|: this problem totally makes sense now that I'm looking at in the right frame of mind.....the more you know
[2013-03-28 19:06:21 -0400] matti: ;p
[2013-03-28 19:06:26 -0400] matti: |rt|: Just accept it.
[2013-03-28 19:06:32 -0400] matti: |rt|: Fix it, and move over ;p
[2013-03-28 19:06:39 -0400] Mez: TIL: - means "minus"
[2013-03-28 19:07:00 -0400] |rt|: yeah this is going to make my git history messy :)
[2013-03-28 19:07:42 -0400] Mez: |rt|: git rebase -i  :)
[2013-03-28 19:07:48 -0400] Mez: and squash/fixup
[2013-03-28 19:09:01 -0400] matti: No shame in "Fixed it" commits.
[2013-03-28 19:09:02 -0400] |rt|: yeah I use that all the time but I've never tried to clean up the history of a bunch of renames
[2013-03-28 19:09:09 -0400] matti: Although, don't let other see ;p
[2013-03-28 19:14:52 -0400] Majost: Where is the best place to start for writing LWRPs?
[2013-03-28 19:16:11 -0400] matti: Best palce to start for writing?
[2013-03-28 19:16:21 -0400] Majost: heh
[2013-03-28 19:16:28 -0400] matti: Majost: Start with modeling your problem / thinking it through.
[2013-03-28 19:17:23 -0400] |rt|: and don't have a - in the name of your LWRP :)
[2013-03-28 19:17:28 -0400] Majost: What I mean is, what are some of the better examples or posts out there which I can use as a guide and reference?
[2013-03-28 19:17:43 -0400] |rt|: http://dougireton.com/blog/2012/12/31/creating-an-lwrp/ has been helpful
[2013-03-28 19:17:58 -0400] Majost: |rt|: thanks =)
[2013-03-28 19:31:36 -0400] a13x212: how would i copy a file from chef server to chef client?
[2013-03-28 19:43:22 -0400] |rt|: looks like renaming my LWRP did the trick....yay
[2013-03-28 19:54:11 -0400] Majost: hrmm... so looking at the file provider, and something else such as rabbitmq -- the structure is quite different
[2013-03-28 19:54:51 -0400] Majost: Is this only because file is a provider/resource available globally?
[2013-03-28 19:55:15 -0400] Majost: Or can that same class structure be followed for cookbooks?
[2013-03-28 19:56:59 -0400] zachallett: im being affected by http://tickets.opscode.com/browse/CHEF-3933 in my testing environment. any idea when it will be released?
[2013-03-28 20:01:06 -0400] patroy: Hi, I'm getting this error when trying to knife configure -i on my workstation
[2013-03-28 20:01:07 -0400] patroy: ERROR: Chef::Exceptions::ValidationFailed: Option admin must be a kind of [TrueClass, FalseClass]!
[2013-03-28 20:12:50 -0400] Majost: patroy: somewhere you are setting a value for the admin option
[2013-03-28 20:13:13 -0400] Majost: if the value is in quotes, its turning it into a string and the resource expects a boolean
[2013-03-28 20:13:41 -0400] Majost: unquote it and you should be fine
[2013-03-28 20:20:53 -0400] EJC: Mez: fixed the cloud/not a cloud problem....
[2013-03-28 20:21:05 -0400] EJC: Mez: apparently, LOCALLY, I had  MUCH older ec2 gem :-/
[2013-03-28 20:21:12 -0400] EJC: upgrading that to 0.6.2 = bueno
[2013-03-28 20:21:16 -0400] EJC: fml
[2013-03-28 20:43:15 -0400] majuscule: I'm trying to use another cookbook inside one with `include_recipe 'recipename'`. The recipe I am attempting to include is in the same cookbook as the one i'm including it from. I've deleted and reuploaded the cookbook, so it's got to be there. What could I be missing?
[2013-03-28 20:44:01 -0400] eliklein: has anyone experienced a problem where loading cookbooks from a local chef server goes painfully slow? as in, a recipe every 5-10 seconds?
[2013-03-28 20:47:19 -0400] kindsol: majuscule: the format is `include_recipe '<cookbook_name>::<recipe_name>'`
[2013-03-28 21:03:48 -0400] a13x212: getting the following error: Error Syncing Cookbooks: Error connecting to https://chef
[2013-03-28 21:04:02 -0400] a13x212: looks like it is failing due to it using the shortname
[2013-03-28 21:04:21 -0400] tduffield: kindsol: what about if the recipe is default? Can you just put <cookbook_name>?
[2013-03-28 21:04:40 -0400] a13x212: my knife.rb config has the fullname, where else would i need to set it?
[2013-03-28 21:05:48 -0400] kindsol: tduffield: I believe so
[2013-03-28 21:09:49 -0400] bhenerey: The connection to status.opscode.com was interrupted.
[2013-03-28 21:10:43 -0400] edelschaedel: Hosted chef maintenance at 2PM PT?   Really?  Come on Opscode.
[2013-03-28 21:12:21 -0400] bhenerey: this is pretty lousy.
[2013-03-28 21:12:46 -0400] edelschaedel: okay it's up again.  good job opscode! Hopefully everything works :-)
[2013-03-28 21:12:58 -0400] Twirrim: welcome to 24x7 operations
[2013-03-28 21:13:38 -0400] Twirrim: there's no winning with what time slot you choose to do maintenance at.
[2013-03-28 21:14:19 -0400] edelschaedel: well i would prefer it to be at 2PM in someone else's TZ.  but that's just me :-)
[2013-03-28 21:14:45 -0400] Kzim: hello i have a "directory" in a provider and if the directory exist it's not changing the owner
[2013-03-28 21:15:33 -0400] goggins: in chef-shell, has any one seen something like this/any ideas for a fix:
[2013-03-28 21:15:39 -0400] goggins: chef > cookbooks.all
[2013-03-28 21:15:39 -0400] goggins:  => [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]
[2013-03-28 21:16:14 -0400] goggins: it clearly syncs the cookbooks, but when I try to "include_recipe" nothing happens...
[2013-03-28 21:19:13 -0400] majuscule: How can I add an ip to a node? I can't seem to add it with a normal node edit.
[2013-03-28 21:22:34 -0400] lal00: I'm trying to upload my first cookbook after a chef server install. I'm getting a "Connection refused" error.
[2013-03-28 21:22:44 -0400] lal00: Apparently, knife is trying to connect to https://localhost:443.
[2013-03-28 21:22:58 -0400] lal00: For a moment, the server where chef server had a wrong name, and calling "hostname --fqdn" returned "localhost". My guess is that somewhere in the chef server config there is a reference to "localhost", but where?
[2013-03-28 21:24:09 -0400] majuscule: lal00: you should be able to fix that by editing the chef_server in your knife.rb
[2013-03-28 21:24:27 -0400] lal00: majuscule: in my workstation?
[2013-03-28 21:24:54 -0400] lal00: if so, I already checked that and it is correct.
[2013-03-28 21:24:59 -0400] majuscule: lal00: yes, or wherever you are running the knife command from (it's possible to make an account on your server)
[2013-03-28 21:25:09 -0400] majuscule: lal00: did you specify the port number?
[2013-03-28 21:25:31 -0400] lal00: chef_server_url          'https://chefserver.example.com'
[2013-03-28 21:25:38 -0400] lal00: I have something like that.
[2013-03-28 21:25:46 -0400] majuscule: lal00: add the port number, https://example.com:4000
[2013-03-28 21:26:01 -0400] majuscule: and make sure it's using that config file
[2013-03-28 21:26:10 -0400] majuscule: you can specify with --config
[2013-03-28 21:27:02 -0400] gleam: if you're on chef 11 then 443 is what you'd want
[2013-03-28 21:27:25 -0400] lal00: Yes, I'm on chef 11.
[2013-03-28 21:27:39 -0400] lal00: I just ran knife with -c and specified the knife.rb file. Same thing.
[2013-03-28 21:28:22 -0400] gleam: it listens on 0.0.0.0 so it shouldn't really matter whether it's localhost or fqdn
[2013-03-28 21:28:29 -0400] gleam: is nginx running?
[2013-03-28 21:28:40 -0400] gleam: can you access the webui
[2013-03-28 21:29:07 -0400] lal00: yes, I can access it.
[2013-03-28 21:29:24 -0400] maek: anyone know if private-chef-1.4.6-1 == chef 11?
[2013-03-28 21:30:17 -0400] lal00: could it bee a https certificate issue?
[2013-03-28 21:30:49 -0400] lal00: no, I guess not.
[2013-03-28 21:36:54 -0400] lal00: Someone suggested this gist for something similar, but it didn't fix anything for me:
[2013-03-28 21:36:55 -0400] lal00: https://gist.github.com/spheromak/5017833
[2013-03-28 21:38:14 -0400] lal00: weird thing is, only cookbook uploading seems affected. Executing, for example "user list", "node list" or "cookbok list" (or even creating roles) works fine.
[2013-03-28 21:39:51 -0400] maek: lal00: anyting ot do with bookshelf?
[2013-03-28 21:40:09 -0400] maek: oh sorry 443
[2013-03-28 21:40:24 -0400] gad0lin: how can I use berkshelf+vagrant without internet, I would expect that bershelf will download cookbooks once, and then they will be pulled from local dir ~/.berkshelf ?
[2013-03-28 21:40:39 -0400] maek: gad0lin: yes
[2013-03-28 21:40:59 -0400] gad0lin: maek: but when I do vagrant provision (i get Failed to download 'apache2' from git: 'https://github.com/opscode-cookbooks/apache2.git)
[2013-03-28 21:40:59 -0400] maek: ~/.berkshelf/cookbooks
[2013-03-28 21:41:39 -0400] gad0lin: maek: I did experiment and disconnected from internet
[2013-03-28 21:42:12 -0400] gad0lin: maek: could it be because I have entry 'cookbook "apache2", git: "https://github.com/opscode-cookbooks/apache2.git"' without tag?
[2013-03-28 21:42:39 -0400] gad0lin: maek: therefor i always try to get fresh master
[2013-03-28 21:43:01 -0400] maek: yeah
[2013-03-28 21:43:03 -0400] maek: its becuase of git
[2013-03-28 21:44:31 -0400] gad0lin: maek: how do you handle that yourself?
[2013-03-28 21:44:52 -0400] gad0lin: add extra source in Berksfile (like site: opscode)?
[2013-03-28 21:45:17 -0400] maek: gad0lin: you coudl use path
[2013-03-28 21:45:30 -0400] maek: basically anything needing internet in the berks file will try the internet
[2013-03-28 21:45:37 -0400] maek: gad0lin: I dont really work offline
[2013-03-28 21:47:20 -0400] lal00: I traced the behaviour to this: new_sandbox = rest.post_rest("sandboxes", { :checksums => checksums })
[2013-03-28 21:47:45 -0400] lal00: two of the checksums contain a reference to localhost:443
[2013-03-28 21:49:50 -0400] gad0lin: maek: yeah, but if I have bad connection I dont want to wait 3 min every provision to get cookbooks
[2013-03-28 21:50:33 -0400] maek: well i think its actually just checking
[2013-03-28 21:50:38 -0400] maek: not always downlaoding, but yea
[2013-03-28 21:51:18 -0400] maek: gad0lin: one suggestion if you know you are going offline
[2013-03-28 21:51:36 -0400] maek: would be to berks install path /some/place/with/cookbooks
[2013-03-28 21:51:40 -0400] maek: then you coudl use :path to point to that
[2013-03-28 21:51:59 -0400] maek: or clone the cookbooks you need that have :git and use :path to those single cookbooks
[2013-03-28 21:52:56 -0400] sniperd: Has anyone successfully used the git gem inside of a recipe without having it blow up the git resource?
[2013-03-28 21:53:18 -0400] sniperd: Seems to be overwriting namespacing of the git resource
[2013-03-28 21:54:06 -0400] tduffield: gad0lin: There is an enhancement request out there for this: https://github.com/RiotGames/berkshelf-vagrant/issues/5
[2013-03-28 21:58:18 -0400] lal00: Is there a way to recalculate, reset or delete the cookbook checksums?
[2013-03-28 21:59:17 -0400] maek: if you re upload the same cookbook-version it will overrite it
[2013-03-28 21:59:26 -0400] maek: lal00: ^ over write even
[2013-03-28 21:59:27 -0400] techminer: ohai chefs.having trouble setting some nested attributes in a role.chef doesn't like what I'm trying to do here
[2013-03-28 21:59:39 -0400] techminer: $ knife role edit loghost
[2013-03-28 21:59:39 -0400] techminer: ERROR: JSON::ParserError: 376: unexpected token at ': {
[2013-03-28 21:59:40 -0400] techminer:             "path": "/logs/*/*.log"
[2013-03-28 21:59:40 -0400] techminer:           }
[2013-03-28 21:59:40 -0400] techminer:         ]
[2013-03-28 21:59:40 -0400] techminer:       },
[2013-03-28 21:59:40 -0400] techminer:             "type": "syslog",
[2013-03-28 21:59:41 -0400] techminer:       "join_groups": [
[2013-03-28 21:59:41 -0400] techminer:         "logstash",
[2013-03-28 21:59:41 -0400] techminer:         "root"
[2013-03-28 21:59:42 -0400] techminer:       ],
[2013-03-28 21:59:42 -0400] techminer:       "group": "adm"
[2013-03-28 21:59:43 -0400] techminer:     }
[2013-03-28 21:59:43 -0400] techminer:   },
[2013-03-28 22:00:27 -0400] techminer: try this pastie.  http://pastie.org/7155538
[2013-03-28 22:02:16 -0400] techminer: sorry .that didn't have the full Role entry.it does now...
[2013-03-28 22:02:58 -0400] techminer: it doesn't like my override_attributes section where I try to create the "file" input for logstash
[2013-03-28 22:03:18 -0400] lal00: For future reference, running 'chef-server-ctl reconfigur' fixed it -> http://serverfault.com/questions/483957/chef-connection-refused-for-cookbook-upload
[2013-03-28 22:17:37 -0400] sniperd: Has anyone ever used the git gem inside of a chef recipe without it stepping all over the git resource provider?
[2013-03-28 22:31:06 -0400] gchristensen: is there a way to determine if Chef was installed via omnibus?
[2013-03-28 22:32:26 -0400] sniperd: gchristensen: File.exists?("/opt/chef/embedded/") || rpm -qa |grep chef || dpkg -l |grep chef?
[2013-03-28 22:33:02 -0400] gchristensen: so I have an op/chef/embedded - this is a positive match for Omnibus?
[2013-03-28 22:33:31 -0400] sniperd: to my knowledge, yes that would be clear that your omnibus
[2013-03-28 22:33:54 -0400] sniperd: otherwise it would be in gem list chef
[2013-03-28 22:34:04 -0400] gchristensen: excellent. thank you!
[2013-03-28 22:34:07 -0400] sniperd: np
[2013-03-28 22:38:16 -0400] jhubert: hi all. i'm looking to hire someone for some light chef consulting to help our startup get EC2 whipped into shape. is there a chef related job board or something?
[2013-03-28 22:43:11 -0400] gad0lin: I see that berkshelf always expects cookbook from opscode site to be in gz format, and e.g. phpmyadmin (http://community.opscode.com/cookbooks/phpmyadmin) in bzip, should I ask author of cookbook to reupload it or rise bug in berkshelf?
[2013-03-28 22:43:40 -0400] maek: seems odd that community would have one in a random zip format
[2013-03-28 22:43:55 -0400] gad0lin: http://pastebin.com/nF6XYgLQ
[2013-03-28 22:43:56 -0400] maek: but  if thats a think id say berks bug
[2013-03-28 22:44:05 -0400] maek: i would expect that might break other things using community api as well
[2013-03-28 22:45:44 -0400] Majost: If I do: ['my']['config'].each -- will this traverse nested attributes such as node['my']['config']['item1']
[2013-03-28 22:46:02 -0400] Majost: and if not, is there a way to accomplish this?
[2013-03-28 22:47:13 -0400] maek: majoh: it should. I thjink node['my'['config'].each
[2013-03-28 22:48:09 -0400] narcisp: hey, is there any way to use "berks install --except xxx" but that applies to a cookbook also managed by berkshelf? I have a cookbook (chef_rvm) with it's own berksfile with a group with optional dependencies in it that are being automatically included when I berks install my project.
[2013-03-28 22:51:43 -0400] Majost: maek: hrm... I will have to give it a shot I suppose. =)
[2013-03-28 22:55:33 -0400] amccloud_: is there a way to run a resource only on first run and only the first machine?
[2013-03-28 22:56:18 -0400] maek: amccloud_: re first run you could have it touch a file and then not_if File.exists
[2013-03-28 22:56:38 -0400] maek: first machine you could have the run right to a databag but you could have lock contention there if you chef-client al lthe machines at once
[2013-03-28 22:57:55 -0400] amccloud_: maek: thanks! i'm trying to do database fixtures for our application
[2013-03-28 22:58:05 -0400] amccloud_: we have multiple app servers that share one db
[2013-03-28 22:58:18 -0400] maek: amccloud_: whats a fixture?
[2013-03-28 22:58:21 -0400] maek: if there is a test
[2013-03-28 22:58:34 -0400] maek: like the existance of a table or a migration version number
[2013-03-28 22:58:36 -0400] maek: you could test on that
[2013-03-28 22:58:40 -0400] amccloud_: maek just initial data
[2013-03-28 22:58:46 -0400] maek: oh yeah so
[2013-03-28 22:58:55 -0400] maek: just test on the exitance of the db, schema or data
[2013-03-28 22:59:06 -0400] maek: and that way the first node does it and then rest just pass it by
[2013-03-28 22:59:11 -0400] maek: and the db deal with the lock for you
[2013-03-28 22:59:26 -0400] maek: assuming 2 nodes dont ask at the exact time. i guess still lock problem
[2013-03-28 23:11:53 -0400] paigeat__: does anyone know why chef-server 11 isn't generating the validation.pem when I do chef-server-ctl start? how the hell am I supposed to be debugging stuff now it used to be that I would do "chef-server -l debug" to troubleshoot problems like this and
[2013-03-28 23:14:15 -0400] gansbrest: hi. Is there a way to use node attribute in override. Like I would like to set postfix.myhostname = fqdn
[2013-03-28 23:14:30 -0400] gansbrest: since I set fqdn on the instance before
[2013-03-28 23:15:12 -0400] gansbrest: when I use it like that it just writes fqdn to the config on the server
[2013-03-28 23:15:27 -0400] gansbrest: and I want it to be replaced with actual value
[2013-03-28 23:15:40 -0400] maek: gansbrest: node['fqdn'[
[2013-03-28 23:15:43 -0400] maek: ]
[2013-03-28 23:16:00 -0400] maek: oh
[2013-03-28 23:16:03 -0400] maek: i see what you are asking
[2013-03-28 23:16:39 -0400] maek: gansbrest: https://github.com/chrisroberts/cookbook-geminabox/blob/master/attributes/default.rb#L21 like that
[2013-03-28 23:16:47 -0400] maek: no
[2013-03-28 23:16:49 -0400] maek: more lies
[2013-03-28 23:16:54 -0400] maek: sorry :(
[2013-03-28 23:17:23 -0400] gansbrest: but this is cookbook attirbutes
[2013-03-28 23:17:27 -0400] maek: id try node['fqdn'] but I dont know if attributes has access to the node object
[2013-03-28 23:17:27 -0400] Majost: So when defining attributes from a resource, the values automatically get tossed into the top level of the cookbook's attributes -- can define the attributes as something nested?
[2013-03-28 23:17:34 -0400] gansbrest: I want to override some of those
[2013-03-28 23:18:01 -0400] maek: node.override['attributes']
[2013-03-28 23:18:51 -0400] gansbrest: here is what I want basically
[2013-03-28 23:18:51 -0400] gansbrest: http://pastebin.com/Fw3WudAW
[2013-03-28 23:18:56 -0400] Majost: gansbrest: you can use ohai values to set values of other attributes, if this is what you mean
[2013-03-28 23:19:26 -0400] gansbrest: (that snippet was from the role config file)
[2013-03-28 23:19:28 -0400] Majost: gansbrest: yeah, that should work
[2013-03-28 23:19:50 -0400] Majost: but if it is not working you may need to change it from override to normal
[2013-03-28 23:19:58 -0400] gansbrest: here is what I get in the config - myhostname = node[fqdn]
[2013-03-28 23:20:11 -0400] aneto: [fqdn] needs to be ['fqdn']  doesn't it?
[2013-03-28 23:20:18 -0400] gansbrest: let me try
[2013-03-28 23:20:39 -0400] Majost: are you doing a node edit to set the value as node['fqdn']??
[2013-03-28 23:20:55 -0400] aneto: node['fqdn']
[2013-03-28 23:21:02 -0400] gansbrest: no, same with quotes
[2013-03-28 23:21:08 -0400] gansbrest: myhostname = node['fqdn']
[2013-03-28 23:21:16 -0400] gansbrest: writes it to file as is
[2013-03-28 23:21:35 -0400] gansbrest: in the postfix cookbook I use I noticed this
[2013-03-28 23:21:45 -0400] gansbrest: default['postfix']['myhostname'] = fqdn
[2013-03-28 23:22:05 -0400] gansbrest: they just use fqdn and it works when I remove my hostname override
[2013-03-28 23:22:20 -0400] aneto: link the cookbook please
[2013-03-28 23:22:26 -0400] gansbrest: I'm just trying to figure out a way to use node attributes in overrides like they do in cookbook attributes
[2013-03-28 23:22:41 -0400] gansbrest: http://community.opscode.com/cookbooks/postfix
[2013-03-28 23:22:53 -0400] gansbrest: look at the attributes file
[2013-03-28 23:23:04 -0400] Majost: you do node.override['myattr'] = blah
[2013-03-28 23:23:37 -0400] gansbrest: I want "blah" to be node attribute, not a string )
[2013-03-28 23:23:44 -0400] Majost: thats fine
[2013-03-28 23:23:45 -0400] Majost: you can
[2013-03-28 23:23:55 -0400] gansbrest: I can write a string with no problems
[2013-03-28 23:24:00 -0400] Majost: node.override['myattr'] = node['fqdn'] works
[2013-03-28 23:24:29 -0400] gansbrest: I do in it in JSON
[2013-03-28 23:24:38 -0400] gansbrest: can you provide a JSON version please
[2013-03-28 23:24:41 -0400] Majost: ah, thats a different animal
[2013-03-28 23:24:51 -0400] aneto: hehe
[2013-03-28 23:25:03 -0400] Majost: so you are trying to set it by editing the node
[2013-03-28 23:25:13 -0400] Majost: not by running chef, correct?
[2013-03-28 23:25:45 -0400] gansbrest: here is my role config
[2013-03-28 23:25:46 -0400] gansbrest: http://pastebin.com/mGTNxbH5
[2013-03-28 23:25:49 -0400] gansbrest: whole thing
[2013-03-28 23:26:02 -0400] gansbrest: I'm running chef-solo, forgot to mention
[2013-03-28 23:26:04 -0400] paigeat__: https://gist.github.com/paigeadele/59626bd9d59b91f497b9
[2013-03-28 23:26:05 -0400] Majost: ah
[2013-03-28 23:26:07 -0400] paigeat__: seriously dude
[2013-03-28 23:26:08 -0400] paigeat__: wtf
[2013-03-28 23:26:41 -0400] paigeat__: this is why I DONT want to use omnibus
[2013-03-28 23:27:20 -0400] Majost: paigeat: omnibus installs under /opt
[2013-03-28 23:27:44 -0400] fly9: how can I access role default_attributes values from a cookbook in another role?
[2013-03-28 23:27:58 -0400] fly9: does the cookbook role membership matter?
[2013-03-28 23:27:58 -0400] Majost: gansbrest: I haven't messed around with solo to be sure what the right solution is for you...
[2013-03-28 23:28:16 -0400] gansbrest: but I suppose it should be same for normal server
[2013-03-28 23:28:40 -0400] Majost: gansbrest: however, fqdn is set by ohai, node['fqdn'] is ruby itself
[2013-03-28 23:28:43 -0400] gansbrest: maybe I'm not specifying it correctly with JSON
[2013-03-28 23:28:44 -0400] Majost: not json..
[2013-03-28 23:29:20 -0400] Majost: I am not sure how you would dot this without running a recipe to set the value
[2013-03-28 23:29:22 -0400] gansbrest: yes, so how I use ohai attribute in override
[2013-03-28 23:29:24 -0400] gansbrest: is it possible
[2013-03-28 23:29:34 -0400] gansbrest: it seems to be possible in coockbook attribute
[2013-03-28 23:33:23 -0400] Majost: Does anyone know it is possible to nest attributes a layer deeper when defining attributes from a resource; instead of having the values automatically get tossed into the top level of the cookbook's attributes?
[2013-03-28 23:35:44 -0400] Majost: eg: attribute ['grouping']['name']
[2013-03-28 23:36:02 -0400] Majost: attribute ['grouping']['description']
[2013-03-28 23:38:38 -0400] paigeat__: https://gist.github.com/paigeadele/6d4a7e154d4231e221cf how is this not working..
[2013-03-28 23:39:05 -0400] paigeat__: I read somewhere that the java path isnt right but that cant be because thats what omnibus does
[2013-03-28 23:39:18 -0400] paigeat__: and the whole point of omnibus is so things get done right so
[2013-03-28 23:39:22 -0400] paigeat__: obviously that cant be
[2013-03-28 23:40:15 -0400] Majost: its definitely a class path issue.
[2013-03-28 23:40:55 -0400] Majost: Unfortunately, thats about all I can determine and speak intelligently about for this issue.

[2013-03-04 00:00:03 -0500] siezer: literally anything you do that has the concept of a "client" or "server
[2013-03-04 00:00:23 -0500] siezer: pointing an applicaiton server to a db for instance
[2013-03-04 00:00:31 -0500] siezer: has a topology
[2013-03-04 00:00:50 -0500] siezer: server lets you search your node indexes for that topology information
[2013-03-04 00:01:03 -0500] gazarsgo: so what if i already have a solution for that, in jenkins or ansible or rundeck or capistrano even ?
[2013-03-04 00:01:34 -0500] gazarsgo: (or cloudformation/beanstalk/autoscaling groups...)
[2013-03-04 00:01:56 -0500] siezer: add a new node to infrastructure, have all recipes concerned with topology automatically integrate the new node via the feedback loop
[2013-03-04 00:02:21 -0500] spheromak: gazarsgo: then you don't need server.  so in your case maybe theres not alot of value, but not everyone is operating that way.
[2013-03-04 00:02:45 -0500] bfrog: chef server just doesn't seem to jive with ec2 services...
[2013-03-04 00:03:09 -0500] siezer: hows that?
[2013-03-04 00:03:15 -0500] spheromak: i think it jives pretty well considering you want to be able to dynamically allocate things based on some attribs.
[2013-03-04 00:03:49 -0500] spheromak: infacti I would say that was one of the design goals in the beginning. Jive well with ec2.  Amazone has added a lot of new stuff since then.
[2013-03-04 00:04:05 -0500] spheromak: Seems to jive well for the cycle computing guys :)
[2013-03-04 00:04:36 -0500] pipework: gazarsgo: How many servers do you run?
[2013-03-04 00:04:39 -0500] gazarsgo: siezer: if i have the context of what this node is supposed to do, i already know how to feed it the information it needs at provision time, rather than having yet another agent polling endlessly for changes and chewing up network
[2013-03-04 00:04:43 -0500] spheromak: having a searchable index of all your assets and arbitrary data about hose assets is verry powerfull.
[2013-03-04 00:04:50 -0500] gazarsgo: pipework: >80
[2013-03-04 00:05:04 -0500] gazarsgo: spheromak: netflix/edda
[2013-03-04 00:05:06 -0500] bfrog: yeah I mean, I guess in my mind git + cloud-init + configuration tool seems good enough
[2013-03-04 00:05:22 -0500] pipework: Then do you want to have to connect to each machine to run the recipes, or just handle it from a single serveer?
[2013-03-04 00:05:29 -0500] gazarsgo: spheromak: i agree :) but i like having a searchable index of all my infrastructure, not just the compute resources
[2013-03-04 00:05:35 -0500] spheromak: gazarsgo: yea sure. that didn't exist 5 years ago :)
[2013-03-04 00:05:46 -0500] siezer: config mananagement is about provisioning, change management, and maintenance, not just the provisioning part
[2013-03-04 00:05:49 -0500] gazarsgo: i'm living in 2013 :D our tools need to also
[2013-03-04 00:06:03 -0500] spheromak: gazarsgo: and you can put anything into chef's index if you want to. theres a pretty hand rest interface and number of nice clients for doing so
[2013-03-04 00:06:19 -0500] spheromak: gazarsgo: nothing stopping you from loading chef server up with other infra data.
[2013-03-04 00:06:40 -0500] gazarsgo: the point is that i don't need to instrument my cluster with another agent to get that information
[2013-03-04 00:06:45 -0500] pipework: gazarsgo: Chef server is a very up to date tool. :)
[2013-03-04 00:06:51 -0500] pipework: In terms of state of the art.
[2013-03-04 00:06:58 -0500] gazarsgo: pipework: i already have both rundeck and jenkins for that
[2013-03-04 00:07:29 -0500] gazarsgo: although i am tempted to look at ansible
[2013-03-04 00:07:32 -0500] pipework: gazarsgo: I don't use jenkins for pushing server configs and provisioning as well as server management. I use it for CI and deployment of projects.
[2013-03-04 00:07:37 -0500] pipework: YAML galore!
[2013-03-04 00:08:01 -0500] gazarsgo: my server configs are in source control, and i treat machine provisioning as part of the application lifecycle
[2013-03-04 00:08:02 -0500] spheromak: gazarsgo: then like we said. you may not be the best candidate for it. So in your specific case. maybe not as valuable. Not gonna argue whats best for your infra. But your infra isn't everyone elses.
[2013-03-04 00:08:21 -0500] pipework: gazarsgo: Sounds like you have a cacophony of tools you've hobbled together over the years.
[2013-03-04 00:08:29 -0500] gazarsgo: spheromak: i can't optimize my use case unless i explore other people's. local/global maxima :)
[2013-03-04 00:08:30 -0500] pipework: We have chef, a single toolset that handles it. :)
[2013-03-04 00:09:03 -0500] pipework: You might prefer your hodgepodge mixup of tools, that's cool.
[2013-03-04 00:09:11 -0500] pipework: But we've got it handled with one toolset here. :)
[2013-03-04 00:10:26 -0500] gazarsgo: i try to eliminate tools when i add new ones, i just don't see where chef-server fits into my stack, all of its features are duplicated by things i already have.
[2013-03-04 00:10:37 -0500] gazarsgo: can chef-server be configured to push instead of clients pulling changes ?
[2013-03-04 00:10:44 -0500] siezer: no
[2013-03-04 00:10:59 -0500] siezer: there's a remote-execution thing coming down the pipe
[2013-03-04 00:11:11 -0500] siezer: but the pure model is pull based
[2013-03-04 00:11:49 -0500] pipework: gazarsgo: It's handing over the responsibility of managing your toolchain to achieve your goal. You handle it yourself and put your toolchain together and get it working together. Chef handles the toolchain for us and lets us focus on what matters so we don't even have to rarely care that much.
[2013-03-04 00:12:20 -0500] pipework: Any custom toolset put together probably doesn't need much babysitting, but you still have to be conscious of it and have your own custom devised 'fixes' for things.
[2013-03-04 00:56:15 -0500] pixlpushr: trying to install nginx from source using the nginx::source recipe, but it fails because DESTDIR if objs/Makefile is an empty string. how is this variable set?
[2013-03-04 01:27:13 -0500] ssd7: OHai Chefs
[2013-03-04 01:27:48 -0500] gazarsgo: hi2u ssd7
[2013-03-04 01:28:16 -0500] gazarsgo: any speculation as to why github used puppet for their boxen project, when chef is clearly superior in every way ?
[2013-03-04 01:32:28 -0500] ssd7: gazarsgo: My "I actually have no insight into this at all" guess is that the first person to dig into that project has some puppet experience and went to town.  I believe they use a mix of Chef and puppet in different projects.
[2013-03-04 01:32:38 -0500] ssd7: s/has/had/
[2013-03-04 01:33:54 -0500] gazarsgo: ah well. i'm trying to patch in Chef support, we'll see how far i get.  i -think- they should reasonably exist side by side in that project, but i'll try standalone support first.
[2013-03-04 02:17:25 -0500] pipework: gazarsgo: It'll be a fun journey for you. :D
[2013-03-04 02:17:49 -0500] pipework: I know Will, he's pretty cool, the guy who made The Setup which became boxen.
[2013-03-04 02:17:58 -0500] pipework: They knew puppet better than chef so they used that.
[2013-03-04 02:22:32 -0500] gazarsgo: his commit msgs are pretty funny :) i already exchanged a tweet w/ him
[2013-03-04 02:28:45 -0500] pipework: He's a cool guy.
[2013-03-04 02:28:55 -0500] pipework: We've been out drinking together a couple times.
[2013-03-04 02:29:04 -0500] pipework: Even took my light grilling well.
[2013-03-04 06:55:51 -0500] [locke]: how do i get current assigned roles for a node?
[2013-03-04 06:56:01 -0500] [locke]: from within the recipe
[2013-03-04 07:00:26 -0500] MerlinDMC: [locke], I would try to read node['roles']
[2013-03-04 07:02:44 -0500] balgarath: so I have in a recipe a bash resource that runs 'npm install' from a certain directory.  this fails with a permissions error.  however, when I ssh in as the same user, and run 'npm install' by hand from the same directory, it works fine.  any idea for where I should look for an answer to this?
[2013-03-04 09:27:00 -0500] alex___: hey is it possible to commit cookbooks to chef server with git?
[2013-03-04 09:54:51 -0500] GreatSUN: hi all
[2013-03-04 09:55:52 -0500] GreatSUN: does someone know if I can stop chef from failing when receiving an error while issuing a download through yum_package?
[2013-03-04 09:56:08 -0500] GreatSUN: right now, I am trying to download rpm with yum_package
[2013-03-04 09:56:34 -0500] GreatSUN: yum-command seams to return code 1 since you have to issue download with install
[2013-03-04 09:57:17 -0500] GreatSUN: if I surround yum_package with begin rescue block, then chef still fails
[2013-03-04 09:57:45 -0500] GreatSUN: is there any option to yum_package wich stops it from exiting chef-run?
[2013-03-04 10:00:36 -0500] c-moi: GreatSUN, http://docs.opscode.com/resource_common_attributes.html ignore_failure ?
[2013-03-04 10:00:55 -0500] c-moi: that's not yum specific
[2013-03-04 10:01:20 -0500] GreatSUN: ah
[2013-03-04 10:01:24 -0500] GreatSUN: ok. thanks
[2013-03-04 10:01:36 -0500] GreatSUN: I was searching within package-stuff and did not find it
[2013-03-04 10:01:39 -0500] GreatSUN: sorry
[2013-03-04 10:04:13 -0500] c-moi: no problem, hope it serves you
[2013-03-04 10:04:22 -0500] c-moi: still haven't tested this attribute, though
[2013-03-04 10:41:06 -0500] martha: hi all.  anyone know how to change the setting for the new erchef server?
[2013-03-04 10:47:56 -0500] AikiLinux: morning  - can anyone think of a way to pass attributes for a specific host in a databag ?
[2013-03-04 11:42:16 -0500] zts: balgarath: http://serverfault.com/a/482047/140520
[2013-03-04 11:43:34 -0500] zts: alex___: so that when you commit to git, the changes are automatically uploaded?  I don't think there's a standard approach, but several people have shared git hooks to do it (eg http://cliffmoon.tumblr.com/post/487721352/git-deploy-for-chef)
[2013-03-04 11:44:22 -0500] zts: AikiLinux: I'm not sure what that means, can you describe what you're trying to achieve?
[2013-03-04 11:55:16 -0500] AikiLinux: We are generating monitoring configuration via chef's attributes, one of the hosts, when taking in to account his hardware specification is producing values which are incorrect (this is cause the server was build in haste on a machine that was meant for other function and is low spec then what he function needs)
[2013-03-04 11:55:59 -0500] AikiLinux: changing a recipe will affect all hosts , changing a role will impact all other hosts with the same role
[2013-03-04 11:56:43 -0500] AikiLinux: we want to specify some values specific to the host( each host have a matching databag) that will help generate the correct values
[2013-03-04 11:57:21 -0500] zts: AikiLinux: if you are already using attributes, and these settings really are unique to that node, why not override the attributes on the node?
[2013-03-04 11:58:12 -0500] AikiLinux: how ?
[2013-03-04 12:00:29 -0500] zts: AikiLinux: "knife node edit", "knife node from file", "knife exec".. one of those.  It is usually bad practice to set attributes directly on a node, because usually nodes are not special and unique, but sometimes that's not true
[2013-03-04 12:01:04 -0500] zts: AikiLinux: if you have several machines with the same hardware (and these need the same setting), I would use a role to override those attributes, and apply the role on all the machines with the same hardware
[2013-03-04 12:03:18 -0500] zts: AikiLinux: if you need to set special data for every node (or most nodes), then a data bag for each node might be a better option than attributes.  In that case, I would have one data bag item for each node, using the node name for the data bag item id
[2013-03-04 12:03:53 -0500] AikiLinux: it is not for several machines , it is for a single device that we need this, and the whole idea is to make sure we do not need to manually do it if we need to rebuild our chef server
[2013-03-04 12:08:28 -0500] AikiLinux: zts, your missing the point - it is a single server that we have the issue with , and hence why i asked about setting the values in the databag.
[2013-03-04 12:09:16 -0500] AikiLinux: we are already using attributes and roles for all the others but the question was for a single server that is an exception to the rest of the systems
[2013-03-04 12:22:42 -0500] zts: AikiLinux: sure, then edit the attributes on the node.  "knife node edit", or through the web UI, or some other way
[2013-03-04 12:23:19 -0500] zts: AikiLinux: you can store the attributes as json/ruby that you can load with "knife node from file", if you want the same workflow as uploading a data bag
[2013-03-04 12:23:33 -0500] zts: (although personally, I would backup my Chef server)
[2013-03-04 12:24:06 -0500] zts: AikiLinux: if you insist on data bags, you will need to add code to your recipe to check if there is a data bag item for this node, and then override the attributes
[2013-03-04 12:52:46 -0500] GreatSUN: c-moi: attribute works well, but I have a new problem
[2013-03-04 12:53:56 -0500] GreatSUN: When installing a package via rpm_package, does the package name have to be the same name as inside the rpm-package?
[2013-03-04 13:12:31 -0500] c-moi: GreatSUN, I'm not using rpm-package LWRP (if it is a LWRP), only yum
[2013-03-04 13:15:16 -0500] c-moi: GreatSUN, http://docs.opscode.com/resource_package.html#attributes see package_name
[2013-03-04 13:17:56 -0500] GreatSUN: c-moi: so, I guess it is the package name configured in the rpm-package
[2013-03-04 13:18:32 -0500] kerouac: when's the next chef-related gathering near boston?
[2013-03-04 13:34:56 -0500] gyre007: guys, anyone here uses Steve Danna's knife hacks ?
[2013-03-04 13:35:16 -0500] gyre007: I'm trying to get the backup and restore ones to work...but I'm failing...badly :)
[2013-03-04 13:35:24 -0500] geekbri: kerouac: Not sure but there was one in January
[2013-03-04 13:35:43 -0500] gyre007: looks like knife is trying to locate client key in /etc/chef/ in my workstation and is ignoring knife's config...
[2013-03-04 13:35:44 -0500] gyre007: mm
[2013-03-04 13:39:49 -0500] till_: how do i enable a method 'force-reload' on my service resource?
[2013-03-04 13:39:56 -0500] till_: probably more a ruby question, than chef
[2013-03-04 13:41:57 -0500] zts: till_: do you want to make it so that the "reload" action runs "force-reload" on your service, or do you want both of them to be available?
[2013-03-04 13:42:37 -0500] till_: either one would work though i think force-reload on its own sounds cleaner
[2013-03-04 13:43:02 -0500] till_: i just tried adding it to supports[] and i think the '-' in :force-reload throws it off
[2013-03-04 13:43:11 -0500] zts: till_: for the first one, you can use the reload_command resource attribute - see http://docs.opscode.com/resource_service.html#attributes
[2013-03-04 13:44:14 -0500] till_: oh, that makes sense
[2013-03-04 13:44:20 -0500] till_: i should have thought of that
[2013-03-04 13:45:38 -0500] zts: till_: I'm not certain, but I believe that supports[] just affects how Chef uses the actions it already knows about (particularly, restart, reload, and status)
[2013-03-04 13:46:24 -0500] zts: till_: so you'd need to extend the service resource/provider to add extra kinds of actions.  Alternatively, you could use an execute resource to run the other methods when required
[2013-03-04 13:46:54 -0500] till_: yeah
[2013-03-04 14:20:42 -0500] alex___: i got an error : Chef::Exceptions::Exec: user[root] (/var/chef/cache/cookbooks/userhandler/providers/cl.rb line 49) had an error: Chef::Exceptions::Exec: usermod -d '/root' root returned 8, expected 0
[2013-03-04 14:20:52 -0500] alex___: who knows what to do
[2013-03-04 14:21:10 -0500] znDuff: alex___: ...well, that's a pretty straightforward error message to read.
[2013-03-04 14:21:20 -0500] znDuff: alex___: does your usermod manual say what exit status 8 means?
[2013-03-04 14:21:31 -0500] znDuff: alex___: If you run the same command by hand as root, do you get the same exit status?
[2013-03-04 14:21:42 -0500] alex___: lets see
[2013-03-04 14:22:32 -0500] alex___: UX: usermod: ERROR: root is in use.  Cannot change it.
[2013-03-04 14:22:44 -0500] alex___: so i cannot change root home dir?
[2013-03-04 14:22:48 -0500] znDuff: What messed-up OS/distro are you running that doesn't allow that?
[2013-03-04 14:22:59 -0500] alex___: solaris 10
[2013-03-04 14:23:19 -0500] znDuff: Huh. Well -- anyhow, yes, that's the end result; you're hitting an OS limitation.
[2013-03-04 14:26:17 -0500] alex___: uh oke
[2013-03-04 14:27:49 -0500] alex___: is there a simple way of setting it in the /etc/passwd
[2013-03-04 14:27:53 -0500] alex___: ?
[2013-03-04 14:30:25 -0500] alex___: znDuff you know if chef is able to modify a line in a file?
[2013-03-04 14:30:29 -0500] gyre007: anyone getting SSL certificate issues when installing omnibus on Mac OS ??
[2013-03-04 14:30:32 -0500] gp5st: with the application cookbook, is there a way not to use an scm? can i just set scm_provider to nil ?
[2013-03-04 14:30:38 -0500] alex___: without parsing the hole file
[2013-03-04 14:38:45 -0500] alex___: anybody who knows how to set a configuration line in a fileusing chef?
[2013-03-04 14:39:05 -0500] alex___: something like awk or set does
[2013-03-04 14:41:57 -0500] gyre007: this is the error Im getting when I'm trying to install omnibus chef
[2013-03-04 14:41:59 -0500] gyre007: https://gist.github.com/milosgajdos83/5082657
[2013-03-04 14:42:40 -0500] awgross: gyre007: About to connect() to 10.18.2 port 80
[2013-03-04 14:42:44 -0500] awgross: that part seems off
[2013-03-04 14:42:56 -0500] awgross: even with the substitution to 10.18.0.2
[2013-03-04 14:43:03 -0500] gyre007: weird I know
[2013-03-04 14:43:11 -0500] awgross: are you going through a proxy somewhere?
[2013-03-04 14:43:22 -0500] gyre007: nope
[2013-03-04 14:43:29 -0500] awgross: ahh i see whats going on
[2013-03-04 14:43:30 -0500] gyre007: hang on a sec...
[2013-03-04 14:43:33 -0500] awgross: $ curl -L https://www.opscode.com/chef/install.sh -v "10.18.2" |sudo bash
[2013-03-04 14:43:35 -0500] gyre007: looks like it's going on...
[2013-03-04 14:43:38 -0500] awgross: the -v flag is in the wrong spot
[2013-03-04 14:43:51 -0500] awgross: it should be something like
[2013-03-04 14:44:03 -0500] awgross: $ curl -L https://www.opscode.com/chef/install.sh | sudo bash --  -v "10.18.2"
[2013-03-04 14:44:14 -0500] gyre007: mm
[2013-03-04 14:44:29 -0500] gyre007: damn...you might be right...I just installed 11.4
[2013-03-04 14:44:30 -0500] awgross: otherwise the -v flag gets passed to curl and it does whatever it pleases
[2013-03-04 14:44:32 -0500] gyre007: don't want that...
[2013-03-04 14:44:53 -0500] gyre007: is there any way how I can remove 11.4 and override with 10.18.2 ?
[2013-03-04 14:45:12 -0500] alex___: anybody who knows how to set a configuration line in a fileusing chef?
[2013-03-04 14:45:13 -0500] alex___: something like awk or set does
[2013-03-04 14:45:41 -0500] awgross: alex___: from what I have seen people either template the whole file, or shell out a sed command to edit one line
[2013-03-04 14:45:58 -0500] balgarath: zts: thanks ill give that a try
[2013-03-04 14:47:07 -0500] gyre007: awgross: that didnt help...I remember there was some mention of this somewhere in Chef mailing list...I mean how to install specific omnnibus version
[2013-03-04 14:48:40 -0500] gyre007: awgross: found it http://lists.opscode.com/sympa/arc/chef/2012-09/msg00141.html
[2013-03-04 14:50:35 -0500] gyre007: let's see if that overrides 11.4.0
[2013-03-04 14:52:39 -0500] gyre007: how do I uninstall omnibus Chef ?
[2013-03-04 14:52:45 -0500] gyre007: can I just nuke /opt/chef ?
[2013-03-04 14:54:20 -0500] awgross: gyre007: yeah opt/chef/embedded
[2013-03-04 14:54:49 -0500] awgross: also make sure that the binaries arent in /usr/bin/chef-client/solo/ohai etc
[2013-03-04 14:54:55 -0500] awgross: there may be an uninstall script?
[2013-03-04 14:55:45 -0500] gyre007: awgross: is there an uninstall script ?
[2013-03-04 14:56:32 -0500] awgross: not sure
[2013-03-04 14:56:36 -0500] alex___: awgross thanks
[2013-03-04 14:56:36 -0500] balgarath: zts: that did it, thanks a ton!
[2013-03-04 15:13:23 -0500] gyre007: I've been seeing things like   :default => Chef::Config[:knife][:some_param] in some scripts but whenever I put some_param in my knife.rb it's being ignored completely...
[2013-03-04 15:13:44 -0500] gyre007: how am I supposed to configure it in knife so that the scripts which are using it won't ignore it
[2013-03-04 15:18:38 -0500] paulmooring: gyre007: what context is this in, a knife exec script?
[2013-03-04 15:19:04 -0500] gyre007: paulmooring: nope...plugin
[2013-03-04 15:19:27 -0500] paulmooring: should be the same
[2013-03-04 15:19:32 -0500] gyre007: I tried both, some_param <space/tab> value AND knife[:some_param] = val but none works...
[2013-03-04 15:20:27 -0500] paulmooring: but you don't want to add a cli option?
[2013-03-04 15:20:37 -0500] gyre007: I'm trying to make this work https://github.com/stevendanna/knife-hacks/blob/master/plugins/backup_export.rb
[2013-03-04 15:20:55 -0500] gyre007: cli option ? I thought it should be enough to stick it into knife.rb
[2013-03-04 15:21:16 -0500] knuckolls: gyre007: these option statements are always how i do it
[2013-03-04 15:21:18 -0500] knuckolls: https://github.com/knuckolls/knife-eucalyptus/blob/master/lib/chef/knife/euca_base.rb
[2013-03-04 15:21:31 -0500] knuckolls: it'll give you a command line flag and the ability to shove it in knife.rb
[2013-03-04 15:21:40 -0500] paulmooring: Chef::Config[:knife][:foo] = "bar"
[2013-03-04 15:21:47 -0500] paulmooring: put that in you knife.rb and it will work
[2013-03-04 15:22:49 -0500] gyre007: will try..but why should I reference CHef::Config et...mm really strange
[2013-03-04 15:22:56 -0500] gyre007: but will try that paulmooring
[2013-03-04 15:24:35 -0500] gyre007: nope...that didnt do it...
[2013-03-04 15:24:36 -0500] gyre007: mm
[2013-03-04 15:25:29 -0500] gyre007: in my opinion something like should work : knife[:foo] = 'blah'
[2013-03-04 15:25:31 -0500] gyre007: but it's not :)
[2013-03-04 15:25:47 -0500] knuckolls: gyre007: did you try that option statement?
[2013-03-04 15:25:50 -0500] knuckolls: with the proc?
[2013-03-04 15:26:21 -0500] paulmooring: gyre007: that does work for me
[2013-03-04 15:26:32 -0500] paulmooring: is anything similar getting set up?
[2013-03-04 15:27:01 -0500] paulmooring: if you run `knife exec -E 'pp Chef::Config[:knife]'` you should see something getting set
[2013-03-04 15:27:08 -0500] gyre007: i didnt try that option statmenet....
[2013-03-04 15:27:12 -0500] gyre007: was trying something else...
[2013-03-04 15:32:23 -0500] cTIDE: where are the obvious places to look to reclaim memory that the chef-client is consuming? our chef-client has ballooned to consuming 400-500GB, which is pretty rough on our small ec2 instances
[2013-03-04 15:32:37 -0500] awgross: cTIDE: is it running as a service?
[2013-03-04 15:32:40 -0500] cTIDE: yeah
[2013-03-04 15:32:57 -0500] awgross: cTIDE: probably jsut restart the service, cruft from old runs prob
[2013-03-04 15:32:58 -0500] gyre007: you might want to check -f option....Fork...
[2013-03-04 15:33:09 -0500] awgross: also ^
[2013-03-04 15:33:25 -0500] cTIDE: k, thanks
[2013-03-04 15:36:44 -0500] knuckolls: cTIDE: yeah just make sure the chef-client is forking off child processes for each chef-run
[2013-03-04 15:36:46 -0500] gyre007: this knife config thing is driving me nuts haha
[2013-03-04 15:36:46 -0500] knuckolls: https://github.com/opscode-cookbooks/chef-client/pull/28
[2013-03-04 15:41:09 -0500] cTIDE: yeah, just restarting it was a drastic savings so fork will probably do the trick
[2013-03-04 15:42:48 -0500] gyre007: knuckolls: I tried that proc stuff...
[2013-03-04 15:42:51 -0500] gyre007: didnt work :)
[2013-03-04 15:42:58 -0500] gyre007: RROR: TypeError: can't convert nil into String
[2013-03-04 15:43:03 -0500] knuckolls: cool
[2013-03-04 15:43:03 -0500] gyre007: this is really annoying haha
[2013-03-04 15:43:28 -0500] knuckolls: did you try it within Chef::Knife
[2013-03-04 15:44:32 -0500] knuckolls: actually gyre007. can you just gist what you're working with? i'll take a look see
[2013-03-04 15:44:39 -0500] gyre007: ok sec..
[2013-03-04 15:47:05 -0500] zts: gyre007: somewhat related, apparently there's a good solution to this problem in Chef 11: http://tickets.opscode.com/browse/CHEF-3497
[2013-03-04 15:47:20 -0500] gyre007: knuckolls: https://gist.github.com/milosgajdos83/5083165
[2013-03-04 15:48:57 -0500] knuckolls: gyre007: first pass looks good, but let me show you something
[2013-03-04 15:48:59 -0500] knuckolls: https://github.com/knuckolls/knife-eucalyptus/blob/master/lib/chef/knife/euca_flavor_list.rb
[2013-03-04 15:49:12 -0500] knuckolls: see how knife-eucalyptus actually puts their class within class Chef class Knife
[2013-03-04 15:49:21 -0500] knuckolls: that's worth a shot
[2013-03-04 15:50:04 -0500] knuckolls: we wrote a new internal plugin the other day based upon how knife eucalyptus structured their plugin w/ these classes and including the EucaBase module
[2013-03-04 15:50:12 -0500] knuckolls: pulled in config vars just fine
[2013-03-04 15:50:22 -0500] knuckolls: the other thing would be to test if it pulls in _any_ config variables
[2013-03-04 15:50:24 -0500] gyre007: well this plugin is not mine...I mean the one im trying to use...
[2013-03-04 15:55:54 -0500] teukka_: gyre007: with that proc code you need to use `Chef::Config[:knife][:chef_server_backup_dir]` instead of `config[:backup_dir]` in the code. the latter is nil by default
[2013-03-04 15:56:22 -0500] gyre007: teukka_: isnt that what im already doing ?
[2013-03-04 15:56:52 -0500] teukka_: gyre007: at least lines 66 and 79 use config[:backup_dir]
[2013-03-04 15:57:23 -0500] teukka_: gyre007: with chef 11 that would work fine *without* the proc line
[2013-03-04 15:58:12 -0500] gyre007: teukka_: but that plugin fails right after start when it tries to read default value....never reaches line 66 /79
[2013-03-04 15:58:12 -0500] gyre007: :)
[2013-03-04 15:59:37 -0500] teukka_: gyre007: ah, ok, I missed that. also it is mixing :backup_dir and :chef_server_backup_dir so the chef 11 magic wouldn't hold actually...
[2013-03-04 15:59:44 -0500] DigitalFlux: So i upgraded to the latest version of the chef_handler cookbook
[2013-03-04 15:59:52 -0500] DigitalFlux: and how getting trolled by "NameError: Cannot find a resource for converge_by on ubuntu version 12.04" stuff
[2013-03-04 15:59:55 -0500] DigitalFlux: Any hints ?
[2013-03-04 16:00:29 -0500] gyre007: the thing is...teukka if I leave it in its default version ie https://github.com/stevendanna/knife-hacks/blob/master/plugins/backup_export.rb
[2013-03-04 16:01:01 -0500] gyre007: it DOES run just fine...what is SUPERANNOYING is that I can't control backupdir location from knife config...
[2013-03-04 16:01:19 -0500] gyre007: it will always ignore knife config and creates backup in .chef/chef_server_backup...
[2013-03-04 16:01:29 -0500] gyre007: basically looks like there is something rotten in 10.18.2
[2013-03-04 16:01:33 -0500] yfeldblum: how would one set up a default run-list for `knife bootstrap` commands or `knife $CLOUD server create` commands?
[2013-03-04 16:03:24 -0500] gyre007: yfeldblum: doesnt bootstrap file contain something like: run_list" => @run_list
[2013-03-04 16:04:04 -0500] teukka_: gyre007: are you sure your knife config is read? add `-VV` to the knife invocation. `knife[:chef_server_backup_dir] = ..` should work with the original
[2013-03-04 16:04:25 -0500] yfeldblum: gyre007, i'm talking about the `knife bootstrap --node-name foo.bar.com --run-list 'role[base]'` command line ... how to make `--run-list 'role[base]'` come by default without having to specify it on the command line
[2013-03-04 16:04:25 -0500] teukka_: gyre007: sorry, lunch time ->
[2013-03-04 16:05:08 -0500] j^2: question: what can cause a 403 Forbbiden error when using knife bootstrap?
[2013-03-04 16:05:28 -0500] gyre007: yfeldblum: override that bootstrap template ?
[2013-03-04 16:05:34 -0500] gyre007: as I was suggesting earlier
[2013-03-04 16:05:46 -0500] j^2: ie: https://gist.github.com/jjasghar/0654f596c0ad877caf22
[2013-03-04 16:06:31 -0500] gyre007: teukka_: lol..-V is basically printing out all available options as oppose to actual verbose output...weird
[2013-03-04 16:07:04 -0500] knuckolls: yfeldblum: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap.rb#L107
[2013-03-04 16:07:35 -0500] knuckolls: yfeldblum: you could make an alias, or patch knife to accept a default run list from your knife config
[2013-03-04 16:09:03 -0500] yfeldblum: gyre007, knuckolls, to be clear, i'm wondering what can be done strictly in .chef/knife.rb
[2013-03-04 16:09:42 -0500] spox: yfeldblum: chef11 includes the ability for knife plugins to allow knife config values to be auto applied to the options
[2013-03-04 16:09:53 -0500] spox: but i don't believe any of them are currently using it yet
[2013-03-04 16:09:58 -0500] yfeldblum: spox, chef-10 for now
[2013-03-04 16:10:26 -0500] yfeldblum: knuckolls, not against patching knife - i do that liberally already :D
[2013-03-04 16:10:34 -0500] spox: yfeldblum: i am doing the same sort of thing for ec2 commands and options i want defined
[2013-03-04 16:10:50 -0500] flzz: Greetings all, when specifying a cookbook version to pin in an environment, would 'cookbook' => '0.0.1' and 'cookbook' => '= 0.0.1' be synonymous? If so which one is the better option?
[2013-03-04 16:10:55 -0500] spox: i just have the knife.rb loading in a monkey patch to set things out of the knife hash
[2013-03-04 16:11:20 -0500] spox: it's messy, but it works
[2013-03-04 16:11:37 -0500] gyre007: teukka_: ok so IT IS reading correct knife config https://gist.github.com/milosgajdos83/5083344
[2013-03-04 16:11:49 -0500] gyre007: but it's just simply ignoring the values set there :-)
[2013-03-04 16:11:50 -0500] knuckolls: spox: do you have that code up somewhere? i see value in that.
[2013-03-04 16:11:56 -0500] fabio_: hello, I have a directory block
[2013-03-04 16:12:08 -0500] fabio_: and the directory exists
[2013-03-04 16:12:10 -0500] fabio_: and now , I run chef-client
[2013-03-04 16:12:20 -0500] fabio_: and deletes the file inside
[2013-03-04 16:12:22 -0500] fabio_: is it normal?
[2013-03-04 16:13:07 -0500] doomviking: fabio_: do you have a not_if/only_if conditional in the block?
[2013-03-04 16:13:13 -0500] spox: knuckolls: i think it was in the ticket around updating the mixlib + knife stuffs
[2013-03-04 16:13:18 -0500] spox: let me have a quick look
[2013-03-04 16:13:25 -0500] knuckolls: thx
[2013-03-04 16:13:43 -0500] fabio_: doomviking, i have only owner and mode
[2013-03-04 16:15:16 -0500] ShawnMcCool: when i start up vagrant and chef starts the first thing that happens is Client key /etc/chef/client.pem is not present - registering, is this problematic?
[2013-03-04 16:15:26 -0500] doomviking: fabio_: some sort of action is probably good, and I have not_if "test -d /path/to/dir" in my blocks as well
[2013-03-04 16:16:01 -0500] fabio_: I read action :create is by default
[2013-03-04 16:16:10 -0500] doomviking: ok
[2013-03-04 16:16:10 -0500] fabio_: but I have a pidfile inside
[2013-03-04 16:16:14 -0500] fabio_: and it disapears
[2013-03-04 16:16:23 -0500] znDuff: fabio_: What is the entirety of your block?
[2013-03-04 16:18:17 -0500] znDuff: fabio_: You very much shouldn't need to guard your create action.
[2013-03-04 16:18:34 -0500] fabio_: directory node[:nagios][:nrpe][:pid_dir] do
[2013-03-04 16:18:34 -0500] fabio_:   owner "nagios"
[2013-03-04 16:18:34 -0500] fabio_:   group "nagios"
[2013-03-04 16:18:35 -0500] fabio_:   mode 0755
[2013-03-04 16:18:35 -0500] fabio_: end
[2013-03-04 16:20:22 -0500] spox: knuckolls: https://gist.github.com/chrisroberts/5083420
[2013-03-04 16:21:56 -0500] knuckolls: spox: that's a pretty hot lil' monkey patch. thanks
[2013-03-04 16:22:42 -0500] znDuff: fabio_: I can't reproduce that -- the default directory action doesn't do anything to contents.
[2013-03-04 16:22:53 -0500] znDuff: fabio_: Are you very sure that that's where the pidfile is being removed?
[2013-03-04 16:23:07 -0500] fabio_: yea
[2013-03-04 16:23:22 -0500] znDuff: fabio_: If you run with debug-mode logging, what does it say it's doing?
[2013-03-04 16:23:23 -0500] doomviking: and is
[2013-03-04 16:23:28 -0500] doomviking: nagios-nrpe-server running
[2013-03-04 16:23:41 -0500] znDuff: fabio_: even with action :delete, it won't delete contents without explicitly setting recursion on
[2013-03-04 16:23:45 -0500] fabio_: Im working on a server which runs chef-client each half an hour
[2013-03-04 16:23:53 -0500] fabio_: I dont know if it is a good practice
[2013-03-04 16:23:58 -0500] znDuff: fabio_: that's a fine practice
[2013-03-04 16:24:11 -0500] znDuff: fabio_: but I suspect that something else your recipes are doing are having the effect you're complaining about.
[2013-03-04 16:24:12 -0500] fabio_: is not deleted by chef
[2013-03-04 16:24:21 -0500] fabio_: im just realized
[2013-03-04 16:24:32 -0500] doomviking: doh
[2013-03-04 16:24:56 -0500] fabio_: is not chef
[2013-03-04 16:25:02 -0500] fabio_: sorry a lot
[2013-03-04 16:25:23 -0500] penk: realizing there's a biased answer here, but i'm really trying to figure this out.  we're in the "Chef or Puppet?" stage right now.  I've implemented puppet before, and it's pretty sane and straightforward.  I'm having a helluva time trying to get started in chef.  the installations seem hideously complicated, and if there's a problem, i dont' even know where to start.
[2013-03-04 16:25:34 -0500] penk: is this a common problem on new chef users?  do i just need ot take the Ruby Red Pill and all will be well?
[2013-03-04 16:25:41 -0500] penk: or should i just stick with what i know? (puppet)?
[2013-03-04 16:26:07 -0500] siezer: penk whats complicated?
[2013-03-04 16:26:12 -0500] knuckolls: i'm curious too
[2013-03-04 16:26:16 -0500] znDuff: penk: ...so, I've spent a lot of time doing both Puppet and Chef
[2013-03-04 16:26:21 -0500] penk: this is one chef installation:  http://pastebin.stonekeep.com/12605
[2013-03-04 16:26:29 -0500] znDuff: penk: in my experience, easy things are easier with Puppet, but hard things are hellishly complex
[2013-03-04 16:26:41 -0500] znDuff: penk: ...whereas Chef makes hard things... reasonably straightforward.
[2013-03-04 16:26:49 -0500] penk: znDuff: our needs are relatively simple.  packages installed on all hosts, permissions and entries in various config files, etc.
[2013-03-04 16:27:18 -0500] znDuff: penk: Most places I've been, there've eventually been places where one needs cross-host coordination
[2013-03-04 16:27:24 -0500] geekbri: Dont think about what you need now, think about what you need a year from now.
[2013-03-04 16:27:26 -0500] znDuff: penk: and chef's search functionality makes that very, very sane
[2013-03-04 16:27:28 -0500] knuckolls: penk: might be a slipperly slope. you start w/ meager requirements then you realize you'd like to do something more complex
[2013-03-04 16:27:33 -0500] znDuff: *nod*.
[2013-03-04 16:27:51 -0500] geekbri: knuckolls: The ole "This code will only be used for a couple months" trick
[2013-03-04 16:27:54 -0500] znDuff: whereas if you set yourself as a Puppet shop, when you need things Puppet doesn't make easy, you're in a world of pain, but it's too hard/expensive to switch.
[2013-03-04 16:27:55 -0500] geekbri: 5 years later .... ;)
[2013-03-04 16:28:07 -0500] penk: sure, i ack that.  i have a pretty good grip on our needs... we have about 50 hosts in amazon right now with NO config management at all.  and we're getting in trouble with inconsistent configs across similar machines.
[2013-03-04 16:28:21 -0500] knuckolls: penk: been there, that really sucks.
[2013-03-04 16:28:31 -0500] penk: (i've been a sysadmin for 20+ years... so i'm not quite in blinders mode... i can see far out)
[2013-03-04 16:28:32 -0500] awgross: penk: oh no, oh no no no
[2013-03-04 16:28:41 -0500] awgross: penk: we feel your pain
[2013-03-04 16:28:41 -0500] siezer: penk as a former puppet users... after switching to Chef I realized I was spending >%50 of my dev time tracking down strange ordering issues with the graph. chef compiles its "catalog" imperatively so there's less fuss
[2013-03-04 16:28:45 -0500] penk: *grin* thanks guys :)
[2013-03-04 16:28:50 -0500] siezer: also the server search is amazeballs once you start using it
[2013-03-04 16:28:56 -0500] penk: siezer: Noted.
[2013-03-04 16:29:18 -0500] znDuff: ...well -- Puppet has gotten better than it used to be; once upon a time the underpinnings were downright awful.
[2013-03-04 16:29:22 -0500] penk: i guess for me just getting to the point of "is this cronjob on every host?" will halve the amount of work i do daily.  and make me sleep better at night.
[2013-03-04 16:29:34 -0500] znDuff: (Who the hell builds a topological sort that's O(n^2)?!)
[2013-03-04 16:29:56 -0500] penk: (for i in `cat devhosts.txt`; do; ssh $i if [ -e /etc/cron.d/foo ] ......
[2013-03-04 16:29:59 -0500] penk: yes, i'm doing that now :)
[2013-03-04 16:30:05 -0500] znDuff: penk: with my #bash hat on, that's evil.
[2013-03-04 16:30:17 -0500] siezer: penk yea baby steps. don't be scared by the chef-server pid table. trate the server as a black box API end point
[2013-03-04 16:30:19 -0500] penk: znDuff: *grin* i was para-coding there, but i'm doing stuff like that all the time now.
[2013-03-04 16:30:31 -0500] siezer: actually you should *never* have to log into chef-server for anything, ever.
[2013-03-04 16:30:41 -0500] znDuff: penk: ...a slightly less error-prone variant: while read -r hostname; do ...; done <devhosts.txt
[2013-03-04 16:31:08 -0500] znDuff: penk: http://mywiki.wooledge.org/DontReadLinesWithFor
[2013-03-04 16:31:08 -0500] penk: znDuff: hey man, this ain't #bash.  i'll debate that with ya over there. :)  (and you're right... just ... NOTCHEF.
[2013-03-04 16:31:13 -0500] knuckolls: penk: i think the crux of the argument for me when I was choosing which path to go down was that puppet has a configuration language and chef is just a ruby DSL. Once I grokked the basic concepts, which admittedly took a bit, i have been consistently working at a higher level of abstraction every time i chef something up.
[2013-03-04 16:31:29 -0500] knuckolls: penk: i also think that the chef recipes are very readable. which matters for maintenance.
[2013-03-04 16:31:34 -0500] penk: well, they're both DSL's.  just different environments.
[2013-03-04 16:31:47 -0500] geekbri: I believe puppet either recently added or is adding the ability to write arbitrary ruby to their product.  That being said, I still prefer chef.
[2013-03-04 16:31:54 -0500] znDuff: ...well, the thing is that in Chef you have the full power of Ruby available
[2013-03-04 16:32:04 -0500] siezer: a lot of people miss the compilation of the resource collection in Chef when they start
[2013-03-04 16:32:06 -0500] znDuff: ...as geekbri says, that's available for Puppet now, but almost nobody uses it.
[2013-03-04 16:32:07 -0500] penk: *nodnod* i guess i'm  having a hard time just getting to the functionality level.  i've found the chef docs painfully inconsistent and convoluted.  it's like a never ending branch tree.
[2013-03-04 16:32:25 -0500] siezer: penk that's being fixed. try the docs.opscode.com site?
[2013-03-04 16:32:29 -0500] znDuff: ...but anyhow, when you want to do anything fancy, the DSL is just hideously constraining.
[2013-03-04 16:32:31 -0500] penk: i did.
[2013-03-04 16:32:31 -0500] siezer: the wiki is still a tornato
[2013-03-04 16:32:50 -0500] siezer: hrm apparetly I can't type yet. coffe time. brb =)
[2013-03-04 16:33:11 -0500] penk: oh, maybe i wa son the wiki.  see, this is... okay, i wont' get into rant mode.  but the "oh, you're reading the wrong docs, use the OTHER docs." problem is very common.  drives me up a tree.  (and i'm not yelling at you guys, i'm just venting here)
[2013-03-04 16:33:16 -0500] kallistec: penk: my suggestion, start with the resources docs and chef-apply (in chef 11)
[2013-03-04 16:33:36 -0500] penk: how do i know what version i'm running?
[2013-03-04 16:33:52 -0500] kallistec: penk: should be a notice at the top of every wiki page where the content's been moved
[2013-03-04 16:33:55 -0500] penk: dshevett@inf-3:~$ chef-apply -v
[2013-03-04 16:33:55 -0500] penk: Chef: 11.4.0
[2013-03-04 16:33:57 -0500] penk: ah.
[2013-03-04 16:34:52 -0500] kallistec: penk: I say, start by writing resources that configure your system with everything hardcoded, run it with chef-apply
[2013-03-04 16:34:59 -0500] penk: kallistec: so i google 'chef ubuntu install', and i hit:  http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2013-03-04 16:35:15 -0500] penk: am i missing?  that seems like the docs i shoul dbe using.
[2013-03-04 16:35:59 -0500] penk: which, btw, is inconsistent with other installation instructions :(
[2013-03-04 16:36:10 -0500] kallistec: penk: I'd recommend installing everything via the "omnibus" packages on www.opscode.com/chef/install
[2013-03-04 16:36:25 -0500] penk: that's what i did.
[2013-03-04 16:36:37 -0500] kallistec: cool, that's the best way to go
[2013-03-04 16:36:45 -0500] penk: so now what?  :)
[2013-03-04 16:36:56 -0500] penk: what's my next step?  it's running.  i don't know even the basics of the next step
[2013-03-04 16:37:01 -0500] penk: (sorry, whiny n00b here)
[2013-03-04 16:37:37 -0500] penk: hmm,  should i run the chef client on the chef server host?
[2013-03-04 16:37:38 -0500] kallistec: penk: so there's a few different ways to go. One thing that's commonly recommended is to get community cookbooks for some part of your infra
[2013-03-04 16:37:39 -0500] penk: i assume 'yes'
[2013-03-04 16:38:03 -0500] kallistec: the problem is that there's a lot of complexity w/ cross platform support, etc.
[2013-03-04 16:38:15 -0500] penk: well, fortunately, all my hosts are the exact same ubuntu version.  \o/
[2013-03-04 16:38:53 -0500] kallistec: yes, but if you look at some of the more advanced cookbooks, there's a good deal of indirection to make it work on red hat, etc.
[2013-03-04 16:39:15 -0500] kallistec: IMO it's confusing when you're just starting
[2013-03-04 16:39:21 -0500] penk: why yes. yes it is :)
[2013-03-04 16:39:40 -0500] penk: seriously, i'm just sort of staring at my chef server  and all it's pids and going "okay. um. now what?"
[2013-03-04 16:39:42 -0500] kallistec: my advice is, 1. write simple recipes and run them with chef-apply FILE
[2013-03-04 16:39:55 -0500] penk: chef-apply is run on the client, yes?
[2013-03-04 16:39:59 -0500] kallistec: yeah
[2013-03-04 16:40:03 -0500] siezer: penk nope. never log into chef-server
[2013-03-04 16:40:08 -0500] penk: and i need to attach the client to the server somehow so recipes can be distributed?
[2013-03-04 16:40:18 -0500] penk: ever?  how do i auth and set up new clients?
[2013-03-04 16:40:22 -0500] siezer: sec
[2013-03-04 16:40:48 -0500] kallistec: penk: well, once you're comfortable writing just recipes, then you can make a cookbook, upload it to your server, and run it on a client
[2013-03-04 16:40:51 -0500] penk: (i got into trouble here with the docs as well.  lots of chatter about certs, but so many said 'take the pem file in xxx... and put it somewhere' - with no further definition.
[2013-03-04 16:41:28 -0500] penk: kallistec: *nod* hm.  i think i need to pick a random host and set it up with the chef client.  -all- my hosts are 'in use' right now.  i need a sacrificial target.
[2013-03-04 16:41:43 -0500] kallistec: penk: or just a VM or whatever
[2013-03-04 16:41:51 -0500] penk: well, this is all AWS.  so everything is a vm
[2013-03-04 16:41:56 -0500] siezer: I can't find a sufficently short page about it... but
[2013-03-04 16:42:11 -0500] penk: also?  just for the record?  this is a dipshit way of installing software: curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2013-03-04 16:42:12 -0500] penk: just saying.
[2013-03-04 16:42:20 -0500] znDuff: Sure.
[2013-03-04 16:42:21 -0500] penk: </old_fart_geek>
[2013-03-04 16:42:25 -0500] znDuff: If you know that, you're not the target audience.
[2013-03-04 16:42:27 -0500] znDuff: :)
[2013-03-04 16:42:30 -0500] penk: HAH
[2013-03-04 16:42:32 -0500] penk: +1
[2013-03-04 16:42:34 -0500] znDuff: (for that installation package)
[2013-03-04 16:42:47 -0500] kallistec: penk: yeah, if you have vmware fusion or whatever, rolling back w/ snapshots is nice
[2013-03-04 16:43:03 -0500] kallistec: penk: yeah, you can just download the packages and install them
[2013-03-04 16:44:11 -0500] siezer: penk : basically you "bootstrap" nodes from you workstation as you create them (knife ec2 server create)
[2013-03-04 16:44:25 -0500] penk: *nod* i don't unerstand knife.  it's sort of the chef client app?
[2013-03-04 16:44:28 -0500] znDuff: (...now, integrating the approaches -- ie. a system that rolls back to a clean-state snapshot and reapplies your configuration when the code changes -- _that's_ a different story)
[2013-03-04 16:44:32 -0500] siezer: that bootstrap process writes a "validator.pem" (aka the one thing you need to log into your chef server to get)
[2013-03-04 16:44:37 -0500] penk: siezer: ZOMG that would be beautiful.
[2013-03-04 16:44:48 -0500] siezer: then the node registers itself and gets its own key
[2013-03-04 16:45:01 -0500] kallistec: znDuff: for developing cookbooks is where I say use snapshots
[2013-03-04 16:45:11 -0500] penk: i agree with that
[2013-03-04 16:45:21 -0500] siezer: the rest of the time you're manipulating the chef-server via the API from your workstation with knife and a user.pam
[2013-03-04 16:45:21 -0500] penk: if you're aplpying a chef recipe and it completely borks your vm, you just roll it back
[2013-03-04 16:45:25 -0500] siezer: s/pam/pem/
[2013-03-04 16:45:38 -0500] penk: oh hmm.  that's interesting.  that' slike how the ec2 server tools work
[2013-03-04 16:45:49 -0500] penk: "You, server, over there.  do something to that host over there." "SIR YES SIR"
[2013-03-04 16:45:58 -0500] znDuff: kallistec: *nod*; gotcha. Actually, had a QA automation system back at Dell that did exactly that automatically -- you give it new code, it rolls back to the point just before that code is installed/applied, applies it, and gives you a VM with that done.
[2013-03-04 16:46:22 -0500] ShawnMcCool: every time i go to do a vagrant up on this test setup, i have to do a knife client delete otherwise i get an error. what can i do to resolve that?
[2013-03-04 16:46:23 -0500] znDuff: kallistec: ...disappointed I wasn't able to get that either productized or released before leaving; ahh, well.
[2013-03-04 16:46:27 -0500] penk: okay, so i'm going to go roll a target host from one of my snapshots, and set it up.  then i'll wake up again and pester you guys.  hope i'm not killing productivity here.
[2013-03-04 16:46:30 -0500] penk: (for you)
[2013-03-04 16:47:36 -0500] znDuff: (actually, not just one VM at a time -- worked on clusters, freezing/snapshotting all VMs in a cluster simultaneously, and did a bunch of netmap-fu to run multiple clusters off the same snapshots in isolation from each other)
[2013-03-04 16:52:05 -0500] siezer: ShawnMcCool write a wrapper script or shell alias to automatically delete the client/node
[2013-03-04 16:52:18 -0500] siezer: or some sort of vagrant plugin
[2013-03-04 16:53:14 -0500] ShawnMcCool: I've read the chef client page and i'm sort of unclear what a client represents. should i have to delete a client every time i bring up a new box?
[2013-03-04 16:53:59 -0500] znDuff: ShawnMcCool: Do you mean every time you decommission an old box?
[2013-03-04 16:54:13 -0500] znDuff: ShawnMcCool: ...or if you create a new box reusing the name of an old one...
[2013-03-04 16:54:25 -0500] znDuff: ShawnMcCool: ...but if your new boxes have new names, then no.
[2013-03-04 16:55:58 -0500] siezer: ShawnMcCool a client is an API user
[2013-03-04 16:56:58 -0500] siezer: ShawnMcCool when you bring a node online for the first time, it uses the validation.pem to sign the request to the API and does a registration of the node, where it creates a node.example.com node_name and associated client
[2013-03-04 16:57:06 -0500] siezer: the public key us that "client"
[2013-03-04 16:57:18 -0500] siezer: the secret key is written to /etc/chef/client.pem
[2013-03-04 16:57:30 -0500] siezer: and used from then on
[2013-03-04 16:58:23 -0500] siezer: when you vagrant destroy ; vagrant up a machine with the same name, you're trying to re-register it with an existing nodename
[2013-03-04 17:01:38 -0500] ShawnMcCool: all of that is very helpful
[2013-03-04 17:02:42 -0500] ShawnMcCool: so, to clarify. any time i want to test building my box from scratch i need to remove the client record. or is there a better way to test rebuild the box.
[2013-03-04 17:08:02 -0500] dougireton: Just published a new blog post on how to Send Application Deploy Times to StatsD in a Chef Recipe: http://dougireton.com/blog/2013/03/02/send-application-deploy-times-to-statsd-in-a-chef-recipe/.
[2013-03-04 17:08:12 -0500] dougireton: hope it's helpful
[2013-03-04 17:09:34 -0500] kallistec: ShawnMcCool: there's a "vagrant butcher" plugin out there that does the delete on vagrant destroy
[2013-03-04 17:18:57 -0500] queso: After installing open chef server, to set up a workstation, is /etc/chef-server/chef-validator.pem the "ORGANIZATION-validator.pem" file I need to be copying to my workstation?
[2013-03-04 17:20:01 -0500] queso: Also, what is the difference between a User and a Client?  For setting up a workstation, am I supposed to make a new Client or User?
[2013-03-04 17:21:12 -0500] kallistec: queso: users also have passwords so they can log in to the webui
[2013-03-04 17:22:02 -0500] queso: kallistec: Ah, okay.
[2013-03-04 17:22:47 -0500] kallistec: queso: in chef 10 and before, users *only* had passwords, so you'd have a client for knife and a user for the webui
[2013-03-04 17:23:02 -0500] queso: kallistec: So in Chef 11, I should create a user for my workstation.
[2013-03-04 17:23:03 -0500] kallistec: which was different than hosted and private chef
[2013-03-04 17:23:15 -0500] kallistec: yeah, user is the recommended way
[2013-03-04 17:23:33 -0500] queso: kallistec: Is that the correct .pem file before?  I think it had a different filename in Chef 10.
[2013-03-04 17:24:15 -0500] kallistec: looks correct to me, I don't remember what the filename was in the past
[2013-03-04 17:24:24 -0500] kallistec: might have changed slightly
[2013-03-04 17:24:32 -0500] queso: kallistec: Okay, thanks for your help.
[2013-03-04 17:24:34 -0500] daos: i just made a small update to my base role (commented out a recipe in the runlist) and now when i `rake roles` i'm getting the following error: Updated Role base!
[2013-03-04 17:24:37 -0500] daos: Updated Role builder!
[2013-03-04 17:24:38 -0500] daos: ERROR: EOFError: end of file reached
[2013-03-04 17:24:49 -0500] daos: i double checked and the syntax looks OK
[2013-03-04 17:24:54 -0500] daos: any of you guys ever seen this?
[2013-03-04 17:39:41 -0500] queso: Do I have to do something to migrate my chef-repo code from Chef 10 to Chef 11, or should it basically "just work"?
[2013-03-04 17:40:31 -0500] j^2: queso: there are some one offs, mine all worked apart from one line i had to change
[2013-03-04 17:40:44 -0500] queso: j^2: Great, thanks.
[2013-03-04 17:40:50 -0500] kallistec: queso: read this: http://docs.opscode.com/breaking_changes_chef_11.html
[2013-03-04 17:40:58 -0500] queso: kallistec: Thank you.
[2013-03-04 17:42:25 -0500] kallistec: queso: also http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/ and http://www.opscode.com/blog/2013/02/06/chef-11-in-depth-client-improvements/ cover some of the same stuff in more narrative format
[2013-03-04 17:42:48 -0500] queso: kallistec: Thanks again.
[2013-03-04 17:43:07 -0500] queso: I assume my community cookbooks also need to be upgraded. What command can I run to upgrade, say, the yum cookbook in my chef-repo?
[2013-03-04 17:44:25 -0500] bfrog: so does opsworks kind of replace chef-server or something
[2013-03-04 17:44:33 -0500] bfrog: not really sure what opsworks is trying to do vs chef-server
[2013-03-04 17:47:08 -0500] j^2: bfrog: i see opsworks as a "easy happy path way to use chef" while chef-server requires a little amount of hacking to get worknig
[2013-03-04 17:47:49 -0500] bfrog: fair enoguh
[2013-03-04 17:48:01 -0500] bfrog: how do people typically deploy new versions of their app with chef though?
[2013-03-04 17:48:31 -0500] bfrog: like right now what we do is build out an AMI, then use asgard to flip to the new running set of instances
[2013-03-04 17:48:38 -0500] j^2: i don't i just use chef as provisionsing, and capistrano as my app deploy
[2013-03-04 17:49:12 -0500] doomviking: me too
[2013-03-04 17:50:28 -0500] bfrog: the app is written in php
[2013-03-04 17:50:57 -0500] bfrog: so there's really nothing like capistrano, more like git clone... run some sed commands on the config and restart php-fpm
[2013-03-04 17:57:05 -0500] ggolin: bfrog, there's the application cookbook and the database cookbook
[2013-03-04 17:57:14 -0500] ggolin: let me know if you can get these two to work :)
[2013-03-04 18:00:27 -0500] gazarsgo: bfrog: you should manage releases via symlinks at the very least, so you can approximate atomic updates and handle rollback
[2013-03-04 18:01:40 -0500] doomviking: I use capisgtrano for php apps
[2013-03-04 18:01:45 -0500] doomviking: *capistrano
[2013-03-04 18:03:53 -0500] gazarsgo: https://gist.github.com/ralph-tice/5084164
[2013-03-04 18:08:04 -0500] queso: When attempting to upload cookbooks to a fresh install of the latest Chef 11, it errors out with: "Connection refused - connect(2)"  I can get node status and clist list, so my workstation can connect to the server.  Any ideas?  Full traceback: http://dpaste.com/1012132/
[2013-03-04 18:08:31 -0500] j^2: http or https in your knife.rb?
[2013-03-04 18:08:49 -0500] matti: queso: Use https:// and there is no port 4000 any more.
[2013-03-04 18:08:58 -0500] j^2: queso: ^^^ that
[2013-03-04 18:11:18 -0500] queso: j^2, matti: I am already using https and not port 4000 -- http://dpaste.com/1012134/
[2013-03-04 18:16:37 -0500] ranjibd: queso: in your chef server , check /etc/chef-server/chef-server-running.json
[2013-03-04 18:18:18 -0500] ranjibd: as well as the bookshelf endpoint , in /opt/chef/embedded/service/erchef/etc/ ..  cant recall the exact path.. but you might have to change the s3_urls if your chef server's fqdn is not publicly resolvable
[2013-03-04 18:20:38 -0500] queso: ranjibd: Check chef-server-running.json for what?  My /etc/hosts file has an entry for localhost, and the s3url is "https://localhost".. what should I do to fix it?  (I do have it installed on a virtual machine on my workstation, so it is not a fqdn..)
[2013-03-04 18:21:17 -0500] Liquid--: anybody a master of nagios nrpe?
[2013-03-04 18:21:33 -0500] Liquid--: getting the following:
[2013-03-04 18:21:33 -0500] ranjibd: queso: you need to change the bookshelf api end point in chef-server configs
[2013-03-04 18:21:36 -0500] ggolin: Liquid--, not a master, but whats the problem
[2013-03-04 18:22:47 -0500] Liquid--: Chef::Exceptions::Exec
[2013-03-04 18:22:47 -0500] Liquid--: ----------------------
[2013-03-04 18:22:48 -0500] ranjibd: queso: or else just add an /etc/hosts entry for your vm host name, i.e. chef2 against the vm ip
[2013-03-04 18:22:48 -0500] queso: ranjibd: In the /etc/chef/embedded/.../etc/ file?  And change it to what?
[2013-03-04 18:22:54 -0500] Liquid--: update-rc.d nrpe defaults returned 1, expected 0
[2013-03-04 18:23:04 -0500] queso: ranjibd: Yes, I have already added an entry for chef2 to my hosts file.
[2013-03-04 18:23:08 -0500] Liquid--: also seeing this:
[2013-03-04 18:23:14 -0500] Liquid--: Error executing action `enable` on resource 'service[nrpe]'
[2013-03-04 18:23:18 -0500] queso: ranjibd: Ooh, maybe I should add it as a real IP address instead of 127.0.0.1...
[2013-03-04 18:23:30 -0500] ranjibd: queso: yes
[2013-03-04 18:23:39 -0500] queso: ranjibd: OOh, I hope that's the problem!
[2013-03-04 18:23:55 -0500] ranjibd: queso: but this means you wont be able to access your chef server outside your own box
[2013-03-04 18:24:12 -0500] ranjibd: ideally you should change the chef server setting to reflect the ip
[2013-03-04 18:24:20 -0500] ranjibd: which is located in /etc/chef-server
[2013-03-04 18:24:43 -0500] ranjibd: as well as in /opt/chef/embedded/ ..../etc
[2013-03-04 18:25:22 -0500] ranjibd: Liquid--: you are trying to set the nrpe service to start automatic on boot
[2013-03-04 18:25:45 -0500] ranjibd: but the init.d file for nrpe does not provide the rc.d values...>
[2013-03-04 18:25:57 -0500] ranjibd: check the init script for nrpe
[2013-03-04 18:26:09 -0500] ranjibd: Liquid--: are you on ubuntu?
[2013-03-04 18:26:12 -0500] Liquid--: well, it doesn't exist as I have found.
[2013-03-04 18:26:15 -0500] Liquid--: deb6
[2013-03-04 18:26:34 -0500] Liquid--: ran the command manually: sudo /usr/sbin/update-rc.d nrpe defaults
[2013-03-04 18:26:40 -0500] roidrage: ohai chefs
[2013-03-04 18:26:43 -0500] Liquid--: and received this: update-rc.d: /etc/init.d/nrpe: file does not exist
[2013-03-04 18:27:04 -0500] kallistec: roidrage: long time no see
[2013-03-04 18:27:27 -0500] roidrage: anyone had Chef::Exceptions::MultipleFailures without any indication on what the failures actually were? this is chef 0.11.4
[2013-03-04 18:27:29 -0500] Liquid--: so I'm not sure how the dir gets created. I'm just managing nagios, I wasn't the one who put it in place. So I'm learning as I go
[2013-03-04 18:27:53 -0500] roidrage: it fails on the first run with the cookbooks, basically after it's been assigned a new runlist, but the second run works just fine
[2013-03-04 18:28:04 -0500] kallistec: roidrage: it ought to show you all of them
[2013-03-04 18:28:11 -0500] timsmith: Liquid:  Are you using the opscode nagios cookbook to setup NRPE or rolling your own?
[2013-03-04 18:28:37 -0500] roidrage: ah, there's something in the stacktrace file
[2013-03-04 18:28:43 -0500] Liquid--: It's from opscode
[2013-03-04 18:28:48 -0500] ranjibd: Liquid--: may be its an upstart or runit script
[2013-03-04 18:28:53 -0500] roidrage: though this is from the second chef run
[2013-03-04 18:28:58 -0500] timsmith: NRPE from source or from package?
[2013-03-04 18:29:16 -0500] roidrage: kallistec: i looked the previous time it happened and all i found in the stacktrace file was a stacktrace with "Chef::Exceptions::MultipleFailures: Chef::Exceptions::MultipleFailures" :)
[2013-03-04 18:29:19 -0500] roidrage: nothing in the logs
[2013-03-04 18:29:26 -0500] timsmith: I wrote a huge portion of that cookbook.  I've never tried it on debian, but I'd love to figure out what went wrong
[2013-03-04 18:29:27 -0500] Liquid--: I believe opscode's cookbook does it from package.
[2013-03-04 18:29:38 -0500] j^2: Liquid--: you can change it if you want
[2013-03-04 18:29:45 -0500] j^2: it's in the attributes iirc
[2013-03-04 18:29:51 -0500] timsmith: default should be package
[2013-03-04 18:29:56 -0500] chris613: When running knife exec, is there an easy way to get at the list of all nodes in an particular environment without doine nodes.all { |n| if(n.chef_environment ==....   ?
[2013-03-04 18:30:30 -0500] ranjibd: chris613: no.. you can search with chef_environment:some
[2013-03-04 18:30:35 -0500] Liquid--: Oh way cool! - Yeah It's package.
[2013-03-04 18:30:50 -0500] chris613: ranjibd: Okay, that will work, thanks
[2013-03-04 18:30:50 -0500] kallistec: roidrage: should have a multi-line exception message showing the collected exceptions
[2013-03-04 18:30:55 -0500] timsmith: Liquid: you should have a init script for nagios-nrpe-server not nrpe.  NRPE is what's used on everything, but debian based systems
[2013-03-04 18:30:56 -0500] kallistec: brb, standup
[2013-03-04 18:31:02 -0500] timsmith: what version of the cookbook are you using?
[2013-03-04 18:31:26 -0500] ranjibd: but theres not environment scoped nodes.. you can get cookbooks that are environment scoped , but for noded you have to check/search against the node.chef_environment attribute
[2013-03-04 18:31:41 -0500] roidrage: kallistec: i wish it had, but no dice :)
[2013-03-04 18:33:17 -0500] Liquid--: I believe it's the very latest.
[2013-03-04 18:34:33 -0500] timsmith: It should be trying to communicate with the service using an attribute that on debian should be nagios-nrpe-server
[2013-03-04 18:35:14 -0500] Liquid--: okay, hmm. So you are saying that I might have the wrong recipe specified?
[2013-03-04 18:35:16 -0500] timsmith: on one of your nodes if you run sudo shef -z and then run node['nagios']['nrpe']['service_name'] what comes back?
[2013-03-04 18:36:27 -0500] timsmith: and are you including nagios::client on your nodes
[2013-03-04 18:37:01 -0500] Liquid--: I get "nrpe"
[2013-03-04 18:37:07 -0500] Fehlersturm: OHai! trying to apt install chef-server chef. on ubuntu quantal. this is a new setup of quantal-server. Packages libyajl-ruby ruby-yajl are in conflict. They seem to be the same thing. (bindings for ruby to C Yajl). ohai depends on ruby-yajl. chef-* on the other. this seems to be a known bug... but is there a solution?
[2013-03-04 18:38:20 -0500] ranjibd: Fehlersturm: try out the omnibus debs
[2013-03-04 18:38:21 -0500] Liquid--: Yes I am, on this node that I am debugging I am using "recipe[nagios::client]
[2013-03-04 18:38:40 -0500] timsmith: Liquid:  Did you set any node attributes for the cookbook?
[2013-03-04 18:38:41 -0500] roidrage: kallistec: provisioning a new node so i can try and reproduce
[2013-03-04 18:38:47 -0500] timsmith: and can you confirm what version you"re running
[2013-03-04 18:39:11 -0500] kallistec: roidrage: you should also be getting error inspector output for each failure to stdout
[2013-03-04 18:39:29 -0500] roidrage: this was with a daemonized chef client
[2013-03-04 18:41:22 -0500] Liquid--: oh, actually it does look like I'm using 3.1.0
[2013-03-04 18:42:01 -0500] timsmith: Give 4.0 a try
[2013-03-04 18:42:04 -0500] timsmith: TONS of improvements
[2013-03-04 18:42:24 -0500] timsmith: if that doesn't work shoot me an e-mail tsmith84@gmail.com
[2013-03-04 18:42:42 -0500] daos: is there any way to append to an existing file using the file resource
[2013-03-04 18:42:51 -0500] miah: ick. dont do it.
[2013-03-04 18:42:53 -0500] miah: use a template.
[2013-03-04 18:43:02 -0500] daos: well what if the file already exists?
[2013-03-04 18:43:03 -0500] geekbri: the best part about nagios is how beautiful the UI is.
[2013-03-04 18:43:08 -0500] daos: miah: ^
[2013-03-04 18:43:11 -0500] miah: why does the file already exist
[2013-03-04 18:43:23 -0500] miah: is it provided by a deployment, or the os?
[2013-03-04 18:43:28 -0500] daos: it's an EC2 machine and they automatically stick the specified ssh_key into authorized_keys
[2013-03-04 18:43:30 -0500] Liquid--: mmkay, that's awesome! Thank you so much for the help!
[2013-03-04 18:43:43 -0500] miah: so you're talking about the default user?
[2013-03-04 18:43:45 -0500] awgross: for those who care about how to organize Chef Cookbooks, can you take a gander at my blog post and give feedback? http://loadedinthecloud.blogspot.com/2013/03/semantic-chef-writing-readable-recipes.html
[2013-03-04 18:43:46 -0500] daos: yeah
[2013-03-04 18:43:54 -0500] daos: miah: exactly, yeah
[2013-03-04 18:43:59 -0500] Guest90130: anyone using zenoss or zabbix with chef?
[2013-03-04 18:44:00 -0500] miah: i typically delete the default user and then create a user for myself.
[2013-03-04 18:44:03 -0500] miah: shared accounts are a nono
[2013-03-04 18:44:16 -0500] daos: i use the default user for depoys
[2013-03-04 18:44:18 -0500] daos: *deploys
[2013-03-04 18:44:18 -0500] Fehlersturm: ranjibd: haha huge tarball of static stuff. classic ruby solution. :-) THANKS
[2013-03-04 18:44:32 -0500] miah: i see
[2013-03-04 18:44:51 -0500] queso: ranjibd: Thanks for your help, editing that config file got it working.
[2013-03-04 18:44:53 -0500] miah: well, the file class doesn't really have a way to 'append'. the best way would be to add all the keys you want there.
[2013-03-04 18:45:09 -0500] miah: so, i would have chef add the default key since you're using that, as well as whatever other keys.
[2013-03-04 18:45:19 -0500] ranjibd: queso: welcome. next time use the knife-server plugin.
[2013-03-04 18:45:29 -0500] miah: but i'm a fan of dedicating a 'deploy' user to the deploys and then everybody else gets their own dedicated account
[2013-03-04 18:45:43 -0500] queso: ranjibd: knife-server plugin?
[2013-03-04 18:45:44 -0500] ranjibd: Fehlersturm: yeah :-) . actually everything above glibc
[2013-03-04 18:45:44 -0500] daos: miah: ok
[2013-03-04 18:45:51 -0500] miah: easier to see wtf's going on and you dont have to determine if somebody is logged in and causing the problem versus the deployment
[2013-03-04 18:45:51 -0500] daos: miah: thanks for the advice
[2013-03-04 18:45:58 -0500] daos: miah: totally agree on that front
[2013-03-04 18:46:08 -0500] daos: miah: thanks again
[2013-03-04 18:46:10 -0500] miah: i've had many pains with shared user accounts
[2013-03-04 18:46:11 -0500] miah: sure np
[2013-03-04 18:46:12 -0500] daos: yeah
[2013-03-04 18:46:13 -0500] daos: me too
[2013-03-04 18:46:17 -0500] geekbri: shared user accounts are the worst.
[2013-03-04 18:46:22 -0500] daos: ;)
[2013-03-04 18:46:24 -0500] ranjibd: queso: yeah, by fletcher nichol.. it lets you install, restore, backup chef server in ec2, vagrant etc
[2013-03-04 18:46:24 -0500] daos: cya guys
[2013-03-04 18:46:33 -0500] miah: chef makes it easy enough to manage users, so i just do that =)
[2013-03-04 18:46:40 -0500] queso: ranjibd: Okay, thanks for the tip.
[2013-03-04 18:46:47 -0500] geekbri: The individual who worked here before me setup shared user accounts, we still haven't completely removed ourselves from that disaster
[2013-03-04 18:47:29 -0500] miah: :/
[2013-03-04 18:47:33 -0500] ranjibd: geekbri: i feel ya
[2013-03-04 18:47:44 -0500] geekbri: it burnses our skinses
[2013-03-04 18:47:55 -0500] miah: i had to deal with shared user accounts until i configured kerberos+nis
[2013-03-04 18:48:06 -0500] miah: (yes, nis because nis+ is failsauce in most implementations)
[2013-03-04 18:48:18 -0500] woltage: a
[2013-03-04 18:49:09 -0500] miah: not being able to use chef/puppet in that environment made pain
[2013-03-04 18:53:26 -0500] geekbri: I can imagine.  The "good ole days"
[2013-03-04 18:53:53 -0500] geekbri: also known as a SVN or CVS repository with a bunch of janky bash scripts and a series of servers that may or may not have had the same bash scripts run on them :)
[2013-03-04 18:54:45 -0500] bfrog: how do people typically bootstrap chef from just a stock ubuntu instance
[2013-03-04 18:55:03 -0500] bfrog: if I just want to try out chef cookbooks and recipes or whatever using chef solo
[2013-03-04 18:55:20 -0500] bfrog: also what the hell is knife
[2013-03-04 18:55:23 -0500] bjensen: um is this the channel to also talk about chef solo?
[2013-03-04 18:55:32 -0500] Fehlersturm: we have a lxc ubuntu template which is preloaded with chef.
[2013-03-04 18:55:35 -0500] kallistec: bfrog: get the omnibus package from http://opscode.com/chef/install
[2013-03-04 18:56:04 -0500] kallistec: bfrog: knife is a command line client for interacting with a chef-server on your workstation
[2013-03-04 18:56:33 -0500] bfrog: so why not just call it chef?
[2013-03-04 18:56:36 -0500] bfrog: confusing as hell
[2013-03-04 18:56:38 -0500] knuckolls: bfrog: best way to play with chef-solo is vagrant
[2013-03-04 18:56:46 -0500] znDuff: bfrog: ...because it's a separate tool?
[2013-03-04 18:57:10 -0500] bfrog: so when I install chef I don't use knire or I use knife
[2013-03-04 18:57:24 -0500] knuckolls: bfrog: i'll take you through my workflow, maybe that'll help
[2013-03-04 18:57:34 -0500] kallistec: bfrog: if you're just using solo, you don't need to use knife
[2013-03-04 18:57:44 -0500] znDuff: bfrog: When you want to apply configurations, you use chef-client or chef-solo. When you're wanting to configure chef-server, you use knife.
[2013-03-04 18:57:51 -0500] znDuff: (configure, query, instruct, ...)
[2013-03-04 18:58:11 -0500] znDuff: (...set up new nodes, add new users, ...)
[2013-03-04 18:58:56 -0500] bfrog: what happens when chef server isn't available or goes down btw
[2013-03-04 18:59:09 -0500] ShawnMcCool: i hate to ask something vague. and i'm not looking for someone to just solve this for me. but could anyone give me insight on how to troubleshoot this problem?
[2013-03-04 18:59:12 -0500] bfrog: is deploying things not possible then or...?
[2013-03-04 18:59:21 -0500] ShawnMcCool: http://paste.laravel.com/ju9
[2013-03-04 18:59:50 -0500] knuckolls: bfrog: chef-client runs on every node and phones home to the chef server asking basically for "hey anything new i should do?" periodically. if the server is down, they can't pull something new.
[2013-03-04 18:59:55 -0500] ranjibd: ShawnMcCool: the action should be run
[2013-03-04 19:00:01 -0500] knuckolls: and you can't shove new stuff to the chef server for the clients to pick up
[2013-03-04 19:00:12 -0500] knuckolls: i use hosted chef, very very rarely has that been an issue
[2013-03-04 19:00:33 -0500] kallistec: ShawnMcCool: this is hosted chef?
[2013-03-04 19:00:33 -0500] znDuff: bfrog: If your chef server goes down, you use your chef-solo recipes to build a new one with recipes, node definitions, &c. from your git/svn/whatnot repo, unless you did something silly like build it by hand or fail to back it up. :)
[2013-03-04 19:00:40 -0500] ShawnMcCool: kallistec yes
[2013-03-04 19:00:49 -0500] znDuff: bfrog: ...or you use Hosted Chef, and keeping a Chef server up and available is someone else's problem.
[2013-03-04 19:00:50 -0500] ShawnMcCool: i had a solo configuration running, now i'm trying to get it going on hosted chef
[2013-03-04 19:00:56 -0500] ranjibd: ShawnMcCool: check the chef wiki for resource types the ruby_block resource is kinda script resource, which can take action :run, not :create (file, template takes that action)
[2013-03-04 19:01:28 -0500] kallistec: ShawnMcCool: did you create the node with knife or something?
[2013-03-04 19:02:01 -0500] ranjibd: ShawnMcCool: ohh.. sorry it does take create not run.. damn me
[2013-03-04 19:02:11 -0500] ShawnMcCool: it's quite possible, i honestly have been sort of stumbling my way through the process. i am starting to be able to wrap my head around some of this stuff.. but, to be honest i find it difficult to pick up.
[2013-03-04 19:02:35 -0500] ShawnMcCool: regarding setting up the node with knife
[2013-03-04 19:03:03 -0500] kallistec: ShawnMcCool: so with hosted chef, a client typically only has write access to a node that it creates
[2013-03-04 19:03:06 -0500] knuckolls: bfrog: berkshelf is an excellent tool for creating chef-solo recipes and testing them in vagrant. it'll set things up for you out of the box for a nice quickstart. you may find this video helpful http://www.ustream.tv/recorded/27487546/highlight/309841
[2013-03-04 19:03:20 -0500] knuckolls: bfrog: vagrant has chef-solo support built in. http://docs.vagrantup.com/v1/docs/provisioners/chef_solo.html
[2013-03-04 19:03:22 -0500] Fehlersturm: bfrog:  i wondered about that too. its kinda wierd thet a "server provisioning software" needs a initial manual step. but you can work around it by using installimages with chef-client preconfigured. or you use openstack+chef which seems to be a strong combination which ill fiddle around with over the next few days.
[2013-03-04 19:03:27 -0500] bjensen: vagrant is like virtualbox?
[2013-03-04 19:03:34 -0500] knuckolls: vagrant is a nice frontend for virtualbox
[2013-03-04 19:03:45 -0500] knuckolls: that has nice provisioners for getting all set up
[2013-03-04 19:03:47 -0500] bfrog: thanks, will look at that
[2013-03-04 19:04:11 -0500] knuckolls: bjensen: http://docs.vagrantup.com/v1/docs/getting-started/why.html
[2013-03-04 19:04:57 -0500] bjensen: ah fair enough thanks
[2013-03-04 19:04:59 -0500] Fehlersturm: but why virtualbox? its almost useless in a production enviroment.
[2013-03-04 19:05:04 -0500] ShawnMcCool: kallistec i'd like to ask you about some jargon. in the context that i'm simply trying to get a development system set up on my machine at this point and i am using hosted chef. a node is my development environment?
[2013-03-04 19:05:31 -0500] knuckolls: Fehlerstrum: because it's free. you don't use it for production, you use it for having a lightweight way of provisoining testing virtual machines on your local dev box
[2013-03-04 19:05:38 -0500] kallistec: ShawnMcCool: a node is a chunk of data that represents a machine you're managing with chef
[2013-03-04 19:05:56 -0500] Fehlersturm: there is a reason why libvirt supports KVM+Qemu XEN and lxc containers. but not Virtualbox
[2013-03-04 19:06:01 -0500] ShawnMcCool: and if i use multiple environments on my latpop, that's still just 1 node?
[2013-03-04 19:06:01 -0500] bjensen: Im trying to get started with chef-solo and so I figured I would get ubuntu lys 12.04 setup in virtual box first but Im not sure if this is the right approach can you guys point me in the right direction please?
[2013-03-04 19:06:02 -0500] kallistec: ShawnMcCool: unfortunately, that term is also used to refer to the host itself
[2013-03-04 19:06:22 -0500] kallistec: but I try not to use it in the second way
[2013-03-04 19:06:39 -0500] kallistec: ShawnMcCool: what do you mean by environments?
[2013-03-04 19:07:09 -0500] ShawnMcCool: i intend, for example a php 5.4 enivronment running X and Y, and a php 5.2 env running Y and Z
[2013-03-04 19:07:25 -0500] ShawnMcCool: so if i have multiple sites that use multiple vm's and different environments. it's still all on 1 node?
[2013-03-04 19:08:02 -0500] knuckolls: bjensen: i'll point you in the same direction as bfrog. take a look at berkshelf and vagrant for firing up a local ubuntu box and provisioning it with chef-solo. berkshelf has a lot built in that will kickstart you in the right direction. http://www.ustream.tv/recorded/27487546/highlight/309841 http://berkshelf.com/  http://docs.vagrantup.com/v1/docs/provisioners/chef_solo.html
[2013-03-04 19:08:02 -0500] kallistec: ShawnMcCool: probably each host will be a different node
[2013-03-04 19:08:25 -0500] martha: alex___: you can change root's homedir on solaris with this command: /usr/sbin/passmgmt -m -h /root root
[2013-03-04 19:09:19 -0500] ShawnMcCool: and similarly, if multiple people on multiple machine use the same environment, those will be different nodes
[2013-03-04 19:10:29 -0500] siezer: environment let you pin cookbook versions and give you a thing to match against when using search
[2013-03-04 19:12:37 -0500] kallistec: ShawnMcCool: yeah, each host should be its own node. The node data contains stuff like the run list that indicates the desired configuration, and attribute data which includes system profile data (network config, etc.) and some config data (attributes from cookbooks)
[2013-03-04 19:13:06 -0500] ShawnMcCool: k
[2013-03-04 19:18:20 -0500] miah: typically, changing roots homedir on solaris can result in doom and gloom
[2013-03-04 19:19:00 -0500] doomviking: just the word "solaris' gives me the gloom and doom.
[2013-03-04 19:20:45 -0500] roidrage: kallistec: new VM, same cookbooks, no error. weird :)
[2013-03-04 19:21:39 -0500] miah: i'm quite at home in solaris, but i'm glad im not working with it =)
[2013-03-04 19:21:46 -0500] kallistec: roidrage: in Chef 11, chef runs delayed notifications when the run fails, which is the only time you'd see the multiplefailures exception
[2013-03-04 19:22:06 -0500] kallistec: roidrage: because you could have 1 or more errors running delayed notifications
[2013-03-04 19:22:13 -0500] doomviking: no doubt
[2013-03-04 19:22:15 -0500] roidrage: yeah, unfortunately i didn't see any actual failures in the logs :/
[2013-03-04 19:26:30 -0500] kallistec: roidrage: there is a bug in the multiple failures stuff, though
[2013-03-04 19:27:12 -0500] kallistec: it works by defining its own #message method
[2013-03-04 19:27:37 -0500] kallistec: but Exception#to_s does VALUE mesg = rb_attr_get(exc, rb_intern("mesg"));
[2013-03-04 19:27:39 -0500] maplebed: anybody (maybe jtimberman) know if the next cookbook code review is scheduled? I'd like to join when it happens.
[2013-03-04 19:31:48 -0500] faustroll: yfeldblum: any cookbooks in your mind that are well designed in terms of judicious use of databags?
[2013-03-04 19:32:15 -0500] faustroll: yfeldblum: or proper use and not abuse of databags?
[2013-03-04 19:34:37 -0500] znDuff: faustroll: What I think is the best use case for databags I've seen (though the code isn't public) was as an interface between a CRM system used by customer reps and the provisioning tooling used by ops.
[2013-03-04 19:35:11 -0500] znDuff: faustroll: ...rep signs up a new customer / puts in information about their site -> data bag gets pushed into Chef -> hosts get provisioned to run said site.
[2013-03-04 19:35:34 -0500] faustroll: znDuff: interesting
[2013-03-04 19:36:23 -0500] znDuff: ...getting SSL certificate management into the CRM tools was a little interesting (likewise training the reps to understand it), but the system as a whole worked well.
[2013-03-04 19:37:10 -0500] faustroll: znDuff: any public cookbooks that use databags in a well thought out way.
[2013-03-04 19:37:15 -0500] faustroll: ?
[2013-03-04 19:37:31 -0500] faustroll: in your opinion, of course
[2013-03-04 19:37:41 -0500] znDuff: *shrug*.
[2013-03-04 19:37:45 -0500] znDuff: Haven't kept up in a while.
[2013-03-04 19:37:48 -0500] maplebed: dunno about people's opinion of 'well thought out' but the nagios cookbook makes extensive use of data bags.
[2013-03-04 19:38:03 -0500] maplebed: and it seems pretty effective (and easy to use) to me.
[2013-03-04 19:38:23 -0500] Ed_: Is there any alternative to the cron resource for Windows?
[2013-03-04 19:38:27 -0500] faustroll: maplebed: thanks. I'll take a look
[2013-03-04 19:39:29 -0500] faustroll: maplebed: I'm going to have to review our use of that cookbook at some time eventually as well.
[2013-03-04 19:39:34 -0500] jtimberman: maplebed: 2pm mountain today
[2013-03-04 19:39:50 -0500] maplebed: jtimberman: sweet!  thanks.
[2013-03-04 19:45:28 -0500] mixandgo: hello, I'm really new to chef and I am trying to create an nginx site. So while using node[:nginx][:dir] in my recipe, I get undefined method `[]' for nil:NilClass
[2013-03-04 19:45:48 -0500] mixandgo: is there anything I need to require for that to be available ?
[2013-03-04 19:48:49 -0500] timsmith: If you don't have the nginx cookbook actually running on the node then you don't have it attributes.  You can include them in your cookbook though. include_attribute "nginx"
[2013-03-04 19:48:57 -0500] timsmith: I've never used that, but I hear it works
[2013-03-04 19:50:05 -0500] miah: ive used include_attribute it works
[2013-03-04 19:50:56 -0500] kallistec: mixandgo: on chef solo?
[2013-03-04 19:51:15 -0500] kallistec: you might be missing dependencies in your cookbook metadata
[2013-03-04 19:51:17 -0500] mixandgo: yes, chef-solo
[2013-03-04 19:51:32 -0500] mixandgo: "Cannot find a resource for include_attribute on ubuntu version 12.04"
[2013-03-04 19:51:53 -0500] kallistec: mixandgo: include_attribute would go in an attributes file
[2013-03-04 19:52:16 -0500] mixandgo: oh, hmm... let me paste what I have
[2013-03-04 19:52:40 -0500] mixandgo: https://gist.github.com/mixandgo/5085018
[2013-03-04 19:52:41 -0500] ProfFalken: evening all - anyone got a good guide to chef-rundeck and how it all hangs together?
[2013-03-04 19:52:48 -0500] kallistec: mixandgo: assuming you're on Chef 11, adding a dependency on nginx from your other cookbook should be all you need
[2013-03-04 19:52:53 -0500] mixandgo: I've downloaded nginx and ohai cookbooks
[2013-03-04 19:53:17 -0500] mixandgo: Chef: 11.4.0
[2013-03-04 19:53:29 -0500] ProfFalken: The video of the conf talk is proably good, but I'm struggling to get past the marketing and history lesson that takes up the first ten minutes (no offence intended)
[2013-03-04 19:53:50 -0500] ProfFalken: and the documentation is kinda lacking... :o
[2013-03-04 19:54:29 -0500] ProfFalken: for instance, if I'm running chef omnibus 11.4.0, how do I install chef-rundeck? If I use the gems, it pulls in everything all over again and I'm worried that will cause issues...
[2013-03-04 19:54:42 -0500] kallistec: mixandgo: yeah, whatever cookbook that is you pasted the gist from, add a metadata.rb file in the root (if it doesn't already exist), then add `depends "nginx"` to that
[2013-03-04 19:55:11 -0500] kallistec: mixandgo: http://docs.opscode.com/breaking_changes_chef_11.html#non-recipe-file-evaluation-includes-dependencies
[2013-03-04 19:55:58 -0500] roidrage: kallistec: so how's things? :)
[2013-03-04 19:56:33 -0500] kallistec: roidrage: not too bad.
[2013-03-04 19:56:46 -0500] kallistec: grouchy about futbol results, but hey
[2013-03-04 19:56:56 -0500] roidrage: could be worse
[2013-03-04 19:57:41 -0500] kallistec: yep
[2013-03-04 19:57:41 -0500] mixandgo: kallistec: thanks that seems to work
[2013-03-04 19:58:37 -0500] kallistec: roidrage: you should come to the chef conf :)
[2013-03-04 19:59:04 -0500] roidrage: kallistec: would love to, but alas, small business, small budget :/
[2013-03-04 20:00:32 -0500] kallistec: roidrage: hopefully bigger business with bigger budget next year :)
[2013-03-04 20:00:59 -0500] roidrage: hopefully, yes! :)
[2013-03-04 20:01:49 -0500] btm: @opscode Chef Code Review, join: http://bit.ly/XlUAiG, watch: http://youtu.be/rQR_Gln1ZnA #opschef
[2013-03-04 20:02:01 -0500] awgross: huzzah, thanks btm
[2013-03-04 20:04:45 -0500] Fehlersturm: how do i change configuration of a chef-server omnibus install. i have /etc/chef-server/chef-server-running.json. chef-server-ctl seems to write this file. how would i go about changing FQDN when i cannot change FQDN in /etc/hosts for the container to actually point to it.
[2013-03-04 20:08:26 -0500] Fehlersturm: or: can i just add a server.rb to /etc/chef-server?
[2013-03-04 20:09:12 -0500] r3vamp: Fehlersturm: Yes, you have to add /etc/chef-server/chef-server.rb and make changes there.
[2013-03-04 20:09:38 -0500] r3vamp: Fehlersturm: Then do a chef-server-ctl reconfigure
[2013-03-04 20:09:44 -0500] Fehlersturm: r3vamp: TY
[2013-03-04 20:09:55 -0500] bfrog: hi, so I installed chef using the omnibus install in a fresh ubuntu vm, ran chef-solo, got a stacktrace
[2013-03-04 20:10:12 -0500] bfrog: shouldn't that just return some help docs or something?
[2013-03-04 20:11:02 -0500] znDuff: bfrog: No; it's behaving as-designed.
[2013-03-04 20:11:04 -0500] bfrog: http://wiki.opscode.com/display/chef/Installing+Chef+Client+and+Chef+Solo
[2013-03-04 20:11:09 -0500] r3vamp: Fehlersturm: Here are all the attributes you can use, https://github.com/opscode-cookbooks/chef-server/blob/master/attributes/default.rb .
[2013-03-04 20:11:29 -0500] znDuff: (well, probably -- you haven't told us what the stack trace is)
[2013-03-04 20:11:34 -0500] r3vamp: Fehlersturm: woops that's wrong, one sec
[2013-03-04 20:11:52 -0500] bfrog: 1 sec
[2013-03-04 20:12:02 -0500] r3vamp: Fehlersturm: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb that's the right one :)
[2013-03-04 20:12:57 -0500] bfrog: yeah, I dunno, I'm not a ruby guy, but it looks like it can't create a directory or something
[2013-03-04 20:13:03 -0500] bfrog: lemme gist it
[2013-03-04 20:13:23 -0500] bfrog: was looking for some friendly help page I guess, showing it installed correctly
[2013-03-04 20:13:25 -0500] znDuff: bfritz: ...but anyhow, normal behavior when run is to try to apply whatever's in cookbook_path, so if you haven't put anything there, an error is usual.
[2013-03-04 20:13:32 -0500] znDuff: bfritz: so no, there is no help page when run without arguments.
[2013-03-04 20:13:53 -0500] DeadZen: znDuff: bfrog ;p
[2013-03-04 20:14:17 -0500] znDuff: bfrog: ^^ err, directed that wrongly.
[2013-03-04 20:14:27 -0500] bfrog: yeah, I mean puppet just returns a nice "check out puppet help"
[2013-03-04 20:14:33 -0500] bfrog: just thought, chef might want to do that instead
[2013-03-04 20:14:39 -0500] znDuff: bfrog: *shrug*. File a feature request.
[2013-03-04 20:14:41 -0500] bfrog: but my lowly opinion probably doesn't matter
[2013-03-04 20:14:45 -0500] znDuff: bfrog: Or, rather, don't -- that would be a breaking change
[2013-03-04 20:14:50 -0500] DeadZen: lol
[2013-03-04 20:15:04 -0500] znDuff: bfrog: ...as any scripts that depend on the current behavior would be broken by it.
[2013-03-04 20:15:48 -0500] bfrog: so I mean, to use this I really need to know ruby and everything then?
[2013-03-04 20:15:51 -0500] znDuff: This is UNIX. Standard practice is to print help on --help, and to _do something_ when run without arguments as long as it makes sense to do so.
[2013-03-04 20:16:14 -0500] znDuff: No, you don't need to know Ruby.
[2013-03-04 20:16:22 -0500] bfrog: so then why show a ruby stack trace
[2013-03-04 20:16:40 -0500] znDuff: ...so that somebody who _does_ know Ruby can track down what's happening?
[2013-03-04 20:16:46 -0500] znDuff: If you don't know Ruby, ignore the stack trace.
[2013-03-04 20:16:58 -0500] znDuff: ...the rest of the messages should be quite helpful enough.
[2013-03-04 20:17:41 -0500] znDuff: I mean, a kernel OOPS prints a stack dump and a list of instructions. That doesn't mean you can't use Linux unless you know your local architecture's opcodes.
[2013-03-04 20:18:10 -0500] tmichael: tryin to come up with node vs. hostnaming scheme in cloud env  likin advice kallistec gives here: http://lists.opscode.com/sympa/arc/chef/2011-04/msg00008.html...
[2013-03-04 20:18:17 -0500] bfrog: it only does that when it fails miserably, most commands just print out help docs if they require options, if not they generally do something sensible
[2013-03-04 20:18:27 -0500] znDuff: bfritz: but Chef _doesn't_ require options.
[2013-03-04 20:18:34 -0500] tmichael: not sure how to do that w hpcloud though
[2013-03-04 20:18:41 -0500] znDuff: bfrog: It requires either options _or configuration._. It appears you haven't done either.
[2013-03-04 20:18:57 -0500] znDuff: bfrog: ...so, since you provide no options, it tries to go ahead relying only on the configuration.
[2013-03-04 20:19:10 -0500] znDuff: bfrog: do you expect ''ls'' to do nothing and print help when you give it no options?
[2013-03-04 20:19:11 -0500] bfrog: and again, I'm saying thats not very sensible... almost nothing else does that, try just running nginx, it doesn't just give a stack dump
[2013-03-04 20:19:29 -0500] znDuff: bfrog: Most of your standard UNIX tools do that.
[2013-03-04 20:19:32 -0500] znDuff: bfrog: Python. Perl.
[2013-03-04 20:19:35 -0500] bfrog: they all give stack dumps?
[2013-03-04 20:19:45 -0500] znDuff: bfrog: They try to do something that isn't help.
[2013-03-04 20:19:55 -0500] znDuff: And if their configuration is broken, yes, they'll give stack dumps.
[2013-03-04 20:20:01 -0500] znDuff: Try running Python with no arguments with a broken site.py :)
[2013-03-04 20:20:21 -0500] znDuff: bfrog: Anyhow, arguing is getting neither of us anywhere.
[2013-03-04 20:20:23 -0500] bfrog: python with no args gives a python repl
[2013-03-04 20:20:29 -0500] bfrog: and you can type help in that
[2013-03-04 20:20:31 -0500] bfrog: and it works
[2013-03-04 20:20:32 -0500] znDuff: bfrog: Yup, and Chef with no args applies your local configuration.
[2013-03-04 20:20:39 -0500] znDuff: bfrog: which is a perfectly reasonable thing for it to do.
[2013-03-04 20:20:57 -0500] znDuff: bfrog: For it to give help, it would have to _stop_ applying local configuration
[2013-03-04 20:21:02 -0500] ProfFalken: tmichael: you can't set the hostname from the HPCS web console but you can pass it as metadata via the API and have cloudinit configure the FQDN etc.
[2013-03-04 20:21:05 -0500] znDuff: bfrog: and that would break any scripts that rely on the current behavior.
[2013-03-04 20:22:14 -0500] tmichael: ProfFalken: if i wanted to do, as kallistec mentioned in his thread, use some hp instance data (instanceId) as my chef nodename how would i do that via knife hp?
[2013-03-04 20:22:31 -0500] tmichael: don't know how i would pass that via -E
[2013-03-04 20:22:51 -0500] bfrog: znDuff: so when I run git, I get stack traces too right?
[2013-03-04 20:22:54 -0500] tmichael: seems knife ec2 puts that sort of thing in ohai
[2013-03-04 20:22:58 -0500] bfrog: git isn't even considered user friendly...
[2013-03-04 20:22:59 -0500] znDuff: bfrog: As I said, arguing is pointless.
[2013-03-04 20:23:02 -0500] ProfFalken: tmichael: heh, I don't know, I don't use "knife hp", I do the hostname stuff via cloud init (https://gist.github.com/proffalken/5085293) and then just do "knife bootstrap"
[2013-03-04 20:23:09 -0500] znDuff: bfrog: All I'm going to do is say something nasty that'll drive you off to go use Puppet.
[2013-03-04 20:23:37 -0500] awgross: tmichael: i think ohai does all of that, i know you can create "hint files" that make sure ohai runs that particular code apth
[2013-03-04 20:23:37 -0500] bfrog: I mean I get the reason why it can't change, its just incredibly frustrating coming to use this for the first time
[2013-03-04 20:23:51 -0500] ProfFalken: tmichael: if you want the hpcs data in ohai, just touch /etc/chef/ohai-plugins/ec2.json and you'll start getting the data back
[2013-03-04 20:24:05 -0500] znDuff: bfrog: *shrug*. And I don't see the problem, because from where I stand, having help be a zero-args default is a relatively new convention that didn't exist back when I started doing UNIX.
[2013-03-04 20:24:23 -0500] znDuff: bfrog: I mean, you run ''grep'' with no args, and it sits around waiting for input from stdin with no message at all.
[2013-03-04 20:24:24 -0500] ProfFalken: tmichael: hpsc still runs the ec2 metadata service on 169.254.169.254 and you can curl taht from any node :)
[2013-03-04 20:24:36 -0500] znDuff: bfrog: same thing for half your other standard tools.
[2013-03-04 20:24:46 -0500] znDuff: bfrog: You want help from something? Call it with -h or --help.
[2013-03-04 20:24:57 -0500] bfrog: znDuff: go run grep right now
[2013-03-04 20:25:01 -0500] bfrog: and tell me what happens
[2013-03-04 20:25:02 -0500] tmichael: ProfFalken: did't know that.  really interesting that i can use ec2 plugin
[2013-03-04 20:25:16 -0500] bfrog: on my box it gives "Usage: grep [OPTION]... PATTERN [FILE]...
[2013-03-04 20:25:21 -0500] znDuff: bfrog: Okay, fair; it would have to be ''grep foo'' for that.
[2013-03-04 20:25:23 -0500] doomviking: oh lordy.
[2013-03-04 20:25:41 -0500] tmichael: ProfFalken: really new to hpcloud and not nearly the info avail as with ec2.  you have any resources for hpcloud/chef stuff?
[2013-03-04 20:25:54 -0500] bfrog: anyways, I get it, I'm annoyed, I'll be back when I'm less annoyed before I offend more people
[2013-03-04 20:25:56 -0500] ProfFalken: tmichael: it's just the "hint", I've yet to get the hpcs ohai plugin working correctly but that's mainly because I've got ec2 stuff working well so tend to use that :)
[2013-03-04 20:26:20 -0500] ProfFalken: tmichael: resources in what sense?
[2013-03-04 20:26:29 -0500] znDuff: bfrog: It's both of us needing an annoyance time-out here, so yes, probably for the best. :)
[2013-03-04 20:26:44 -0500] tmichael: ProfFalken: doc
[2013-03-04 20:27:12 -0500] DeadZen: znDuff: he's just saying if theres no local configuration it could say theres no local configuration.. that's all he's implying..  he never said an erroneous configuration shouldn't produce a stacktrace
[2013-03-04 20:27:33 -0500] znDuff: DeadZen: It _does_ say there's no local configuration.
[2013-03-04 20:27:41 -0500] znDuff: DeadZen: ...then after that it gives a stacktrace.
[2013-03-04 20:27:53 -0500] znDuff: DeadZen: Apparently he gets caught up on the stack trace and doesn't read the messages above it.
[2013-03-04 20:28:12 -0500] ProfFalken: tmichael: in my case, I create the node using the OpenStack Nova API (https://docs.hpcloud.com/cli/nova) and the metadata as linked above, add the node to DNS and then run "knife bootstrap <fqdn> -x ubuntu --sudo" and it goes and does it's thing...
[2013-03-04 20:29:18 -0500] tmichael: ProfFalken: okay, i was using matt's knife hp plugin to do all in one shot. works well except that i now want to control nodename cuz using the default is causing problems for me...
[2013-03-04 20:29:44 -0500] tmichael: ProfFalken: and wanted to specify something that is not yet known to me as it's created AT setup
[2013-03-04 20:30:04 -0500] tmichael: guess i can just split them up and use output of one as input for the knife bootstrap
[2013-03-04 20:30:45 -0500] ProfFalken: tmichael: yeah, sorry I can't be of more help there... :(
[2013-03-04 20:31:35 -0500] tmichael: ProfFalken: what do you use for chef nodename?  just curious as some advice is to use cloud provided data whereas others say to use your own scheme (e.g. hostname).
[2013-03-04 20:32:13 -0500] tmichael: originally thought about using InstanceID like kallistec advises and then i'd have control over everything else via DNS (CNAMEs)
[2013-03-04 20:32:33 -0500] mwhooker: Hi all. I'm creating a lwrp that depends on a gem. I'm using chef 10.14.2. I tried to call chef_gem from the provider file but I got an undefined method error. Is there a preferred way to install/require gems from providers? just a "require" maybe?
[2013-03-04 20:34:21 -0500] tmichael: but just used to "knife node show nodename" and that would no longer work if i had nodenames that were instanceIDs.  would have to do knife search on some other data I did know to get what i want.  seems like a pain.
[2013-03-04 20:34:37 -0500] ProfFalken: tmichael: I use all my own hostnames for exactly that reason
[2013-03-04 20:34:45 -0500] ProfFalken: I don't want to have to lookup an instance ID to find out what it does
[2013-03-04 20:34:54 -0500] ProfFalken: arguably, that's what roles are for
[2013-03-04 20:35:22 -0500] ProfFalken: but because I can't afford thousands of  per day, I have multiple roles on a single instance
[2013-03-04 20:35:46 -0500] ProfFalken: I also have "non-cloud" vps servers so instance IDs are not appropriate there
[2013-03-04 20:36:10 -0500] tmichael: ProfFalken: all good points.  makes me feel better about just using hostname for my chef nodename :)
[2013-03-04 20:36:58 -0500] ProfFalken: But then again, you're possibly talking to the wrong guy.  I tend to name my servers "<function>(<number_if_required)>.<region_where_appropriate>.<domain>.<tld>
[2013-03-04 20:37:09 -0500] ProfFalken: so I don't really need CNames....
[2013-03-04 20:37:44 -0500] ProfFalken: the only CNAMEs I tend to use is to redirect "www.foo" to webserver01.america.example.com
[2013-03-04 20:37:50 -0500] ProfFalken: or similar
[2013-03-04 20:39:09 -0500] dotslash_: I seem to be running out of memory when using chef to install rpms via the package mechanism. This is on AWS tiny and small instances. Is it working for anyone else on those size machines?
[2013-03-04 20:39:10 -0500] ProfFalken: tmichael: why confuse things, right? Things are complicated enough as they are - call a spade a spade :)
[2013-03-04 20:39:11 -0500] tmichael: ProfFalken: re /etc/chef/ohai-plugins/ec2.json.  i don't see that on chef-server
[2013-03-04 20:39:21 -0500] yfeldblum: faustroll, https://github.com/miah/chef-redis/blob/master/recipes/data_bag.rb
[2013-03-04 20:39:34 -0500] ProfFalken: tmichael: you'll probably need to create that dir and touch that file
[2013-03-04 20:40:32 -0500] yfeldblum: faustroll, that's a convenience recipe in case you, as sysadmin, *choose* to conform to miah's data-bag name and schema; if you choose otherwise, you are still able to use everything in the cookbook
[2013-03-04 20:40:40 -0500] tmichael: last question ProfFalken: you mentioned novaclient.  happened to install hpcloud CLI tool first.  novaclient better or just personal choice?
[2013-03-04 20:41:16 -0500] tmichael: ProfFalken: planned to DL eventually cuz prefer opensource, but curious if one is recommended over the other in the communiyt
[2013-03-04 20:41:26 -0500] yfeldblum: faustroll, if you want your cookbook to use data-bags, make sure that every single aspect of your cookbook can be driven by other means too, with data-bags only a convenience on top that can easily be turned off
[2013-03-04 20:42:00 -0500] bugoff: ?
[2013-03-04 20:42:02 -0500] ProfFalken: tmichael: there are a few thing that hpcloud have done to Openstack to support a few features, these are only supported in the HP Novaclient
[2013-03-04 20:42:43 -0500] ProfFalken: tmichael: but I tend to use the hpcloud novaclient because I script stuff in python (that snippet is from a script that will eventually setup an entire inrastructure including Chef Server, DNS servers, SMTP etc)
[2013-03-04 20:43:04 -0500] ProfFalken: anyway, gotta run, dinner calling :)
[2013-03-04 21:02:23 -0500] btm: @opscode Cookbook code review, join: http://bit.ly/15tTELd, watch: http://youtu.be/XFWFdKfZf2I #opschef
[2013-03-04 21:03:10 -0500] btm: timsmith: @opscode Cookbook code review, join: http://bit.ly/15tTELd, watch: http://youtu.be/XFWFdKfZf2I #opschef
[2013-03-04 21:13:52 -0500] c-moi: Hi
[2013-03-04 21:14:17 -0500] c-moi: I just want to check if an attribut exists in a recipe, and can't find how -_-'
[2013-03-04 21:14:51 -0500] faustroll: yfeldblum: thanks. I share your design goals. databags should be an optional convenience
[2013-03-04 21:15:03 -0500] tmichael: ProfFalken: you still around?
[2013-03-04 21:15:51 -0500] tmichael: added ec2 to hints file assuming next client run would result in some hpcloud data, but no such luck.  figured you'd knew what i was doing wrong.
[2013-03-04 21:16:16 -0500] tmichael: enjoy dinner ProfFalken!
[2013-03-04 21:22:22 -0500] c-moi: hum, undefined method `empty?' for nil:NilClass (NoMethodError)
[2013-03-04 21:22:36 -0500] c-moi: I guess that's not the way to check if an attribute exists
[2013-03-04 21:25:05 -0500] bluekelp: is there a way to clear out unused (were used, no longer used) node names in chef-server? simply deleting a node does not free the name.  trying to re-register a node with a previously used name fatals out. would like to not have to manage this name bookeeping
[2013-03-04 21:25:30 -0500] bluekelp: unable to find a suitable google query to find an answer
[2013-03-04 21:26:30 -0500] zts: bluekelp: you need to delete the clients as well as the nodes
[2013-03-04 21:27:00 -0500] gyre007: how do I load the role/env from json file ? -Fj ?
[2013-03-04 21:27:17 -0500] zts: gyre007: knife role from file
[2013-03-04 21:27:20 -0500] qhartman: bluekelp, you alo need to delete the client entries "knife client delete ...."
[2013-03-04 21:27:37 -0500] gyre007: zts: I know but with no additional options like -Fj ?
[2013-03-04 21:27:41 -0500] bluekelp: zts: does deleting from the web ui not suffice?  it appears to still remember nodes deleted in this manner
[2013-03-04 21:27:43 -0500] gyre007: ie File format = json ?
[2013-03-04 21:27:43 -0500] qhartman: bluekelp, you also have node/client bulk delete available if you have a bunch with similar names
[2013-03-04 21:28:10 -0500] zts: gyre007: shouldn't require any extra options - it'll do the right thing if it has the correct file name
[2013-03-04 21:28:23 -0500] zts: gyre007: ie, if you use the ruby DSL for roles, but call the file rolename.js, that will not work
[2013-03-04 21:29:10 -0500] gyre007: but if the role is pure json and it's called blah.json it should...
[2013-03-04 21:29:12 -0500] gyre007: got it
[2013-03-04 21:32:26 -0500] c-moi: FINALY found it... it was node.has_key?
[2013-03-04 21:34:26 -0500] bluekelp: qhartman: thanks. i assumed the webui would work too but just more proof that the "cli > ui" invariant holds
[2013-03-04 21:38:05 -0500] qhartman: bluekelp, the ui works too, you just need to delete it in two palces, and is cumbersom
[2013-03-04 21:38:31 -0500] miah: doing things programattically vs clickityclick
[2013-03-04 21:48:36 -0500] scheuk: what is the best approach to install system ruby on an ubuntu 12.04 VM, using chef that has been installed with the omnibus package? and I want OHAI to recognize that ruby during the run.
[2013-03-04 21:59:33 -0500] timsmith: It seems like we're getting back to the unfortunate state with the code review that we were at before the 3 reviews per week started. Pull requests are coming in about 2-3x faster than reviews right now
[2013-03-04 22:00:16 -0500] maplebed: s/unfortunate/awesome/?
[2013-03-04 22:00:43 -0500] moos3: how does my reciepe just acces attributes/default.rb if those values aren't set in the node or role file
[2013-03-04 22:01:20 -0500] timsmith: maplebed: It's good and bad I guess.  There's 69 "Fix Provided" tickets right now
[2013-03-04 22:01:44 -0500] maplebed: sounds like a vibrant user community.
[2013-03-04 22:02:02 -0500] maplebed: (and yeah, I'm being a little cheeky...  I know it's a hard thing and admire all the work you do to make it happen)
[2013-03-04 22:03:05 -0500] jtimberman: timsmith: :(
[2013-03-04 22:03:40 -0500] timsmith: just merge it all
[2013-03-04 22:03:40 -0500] timsmith: it'll be fine right
[2013-03-04 22:03:47 -0500] jtimberman: Right?
[2013-03-04 22:04:11 -0500] maplebed: +1
[2013-03-04 22:04:24 -0500] timsmith: serious question though.  What's up with that no_lazy_load chef-client ticket that's be chillin at the top for a month or so
[2013-03-04 22:04:48 -0500] jtimberman: timsmith: the feature for Chef itself isn't merged.
[2013-03-04 22:05:02 -0500] timsmith: k
[2013-03-04 22:05:08 -0500] jtimberman: so introducing a new config option that doesn't exist seems bad.
[2013-03-04 22:05:43 -0500] timsmith: that would seem a bit backwards
[2013-03-04 22:07:19 -0500] jtimberman: Right?
[2013-03-04 22:11:09 -0500] volker-: Hi! I try to understand how shell_out get's executed. From my understanding it is done in mixin/shell_out.rb. But I do not see how it is executed there.
[2013-03-04 22:12:03 -0500] btm: volker-: you looking in the chef gem or the mixlib-shellout gem?
[2013-03-04 22:12:12 -0500] maplebed: Is there a better way to do this: https://gist.github.com/maplebed/5086156
[2013-03-04 22:12:25 -0500] volker-: btm: the one which is used inside of chef (e.g. via the git ressource)
[2013-03-04 22:12:41 -0500] volker-: btm: so I'm looking inside the chef gem
[2013-03-04 22:13:20 -0500] ggolin: maplebed, isnt line 3 redundant?
[2013-03-04 22:13:33 -0500] btm: volker-: Chef::Mixin::ShellOut#shell_out calls Mixlib::ShellOut which is in the mixlib-shellout library/gem.
[2013-03-04 22:13:38 -0500] maplebed: I would think so but it didn't work without it.
[2013-03-04 22:14:08 -0500] ggolin: which part didnt work, maplebed ?
[2013-03-04 22:14:08 -0500] zts: ggolin: not necessarily - depends whether ganglia::default appears earlier in the run list than the recipe containing that code
[2013-03-04 22:14:31 -0500] ggolin: zts, then yeah there should be a better way of doing this :)
[2013-03-04 22:14:37 -0500] volker-: btm: thanks. I was reading Mixin and not Mixlib. I think that's where my confusion started
[2013-03-04 22:14:45 -0500] maplebed: I don't acutally remember...  it was a while ago I wrote it, but I'm trying to clean it up for a PR.
[2013-03-04 22:15:33 -0500] ggolin: does anyone have a working app deployment with the application cookbook?
[2013-03-04 22:15:51 -0500] ggolin: app and db cookbooks, i should say
[2013-03-04 22:15:53 -0500] faustroll: maplebed: it looks odd. hard to know what you are thinking here
[2013-03-04 22:16:00 -0500] zts: ggolin: mm, not entirely sure I agree - that snippet says, "If this node is configured to run ganglia, make sure that ganglia's been configured, and add
[2013-03-04 22:16:15 -0500] zts: ggolin: ...and add the mongodb plugin
[2013-03-04 22:16:19 -0500] maplebed: faustroll: that I only want to use the ganglia_python LWRP if the ganglia cookbook is already present.
[2013-03-04 22:16:37 -0500] maplebed: i.e. if you don't want to use ganglia, fine, but if you do, here's your plugin to get mongo stats.
[2013-03-04 22:16:42 -0500] ggolin: id think you want to use a metapara,eter here, maplebed
[2013-03-04 22:17:10 -0500] maplebed: ggolin: not sure what you mean.
[2013-03-04 22:17:21 -0500] maplebed: (I'm not sure what a metaparameter is.)
[2013-03-04 22:17:28 -0500] ggolin: not_if/only_if
[2013-03-04 22:17:33 -0500] ggolin: sorry
[2013-03-04 22:17:43 -0500] maplebed: huh.  so check for some artifact in the filesystem that ganglia leaves?
[2013-03-04 22:17:58 -0500] zts: ggolin: I imagine that the ganglia_python resource isn't available if the ganglia cookbook hasn't been loaded, so not_if/only_if wouldn't work
[2013-03-04 22:18:16 -0500] maplebed: that seems like I'm violating the abstraction of the cookbook. (I don't really care how ganglia implements the LWRP)
[2013-03-04 22:18:30 -0500] mani_: hi
[2013-03-04 22:18:37 -0500] ggolin: zts, then in this case i'd make sure this particular recipe is in a cookbook that is dependent on ganglia
[2013-03-04 22:18:40 -0500] mani_: im having issues connecting to the server from the client
[2013-03-04 22:18:53 -0500] mani_: can someone walk me thru this process, i think I have followed the steps
[2013-03-04 22:19:28 -0500] zts: ggolin: but then everyone using maplebed's cookbook needs to have the ganglia cookbook around, even if they're not using it - that doesn't sound like a great solution either :)
[2013-03-04 22:20:12 -0500] ggolin: hah welcome to my life :)
[2013-03-04 22:20:21 -0500] maplebed: yaeh, I don't want to introduce a dependency on ganglia.
[2013-03-04 22:20:35 -0500] zts: maplebed: the way you're doing it there is the way that I'd do it.  It's not a perfect solution for the reason you mention, but I don't think there's a good way of dealing with that today
[2013-03-04 22:20:43 -0500] zts: I'd love to hear what other folks are doing though
[2013-03-04 22:20:44 -0500] ggolin: then borrow the resource implementation, maplebed
[2013-03-04 22:21:08 -0500] faustroll: maplebed: I like the idea of not adding unnecessary dependency
[2013-03-04 22:21:20 -0500] volker-: If i look into mixin/shell_out.rb I only see that it use Mixlib::ShellOut. I thought that Chef brings all the dependency versions with it or to require a fixed version. But I don't see how this is assured
[2013-03-04 22:21:26 -0500] zts: maplebed: the other alternative is to have an attribute in your cookbook to let the user control whether or not you'll try to install the plugin
[2013-03-04 22:21:29 -0500] maplebed: I think the way most things handle it is to just force the ganglia cookbook to install the mongo module, which also seems silly.  mongo knows best how to implement monitoring mongo
[2013-03-04 22:21:46 -0500] mani_: i get the below message "Authentication Error:
[2013-03-04 22:21:46 -0500] mani_: ---------------------
[2013-03-04 22:21:47 -0500] mani_: Failed to authenticate to the chef server (http 401)."
[2013-03-04 22:22:09 -0500] mani_: i have created a user on the server and copied the .pem fle to the client but it still gives the same error
[2013-03-04 22:22:13 -0500] faustroll: i might go for the attribute level decision
[2013-03-04 22:22:14 -0500] zts: maplebed: that's a bit nicer in some ways (doesn't make assumptions about the name of the ganglia cookbook, or the source of the ganglia_python resource)
[2013-03-04 22:22:15 -0500] ggolin: hold on you guys, how is this not adding a dependency
[2013-03-04 22:22:32 -0500] ggolin: it depends on the ganglia cb being present :)
[2013-03-04 22:22:40 -0500] zts: ggolin: only if you want to use it
[2013-03-04 22:22:52 -0500] ggolin: thats an intricacy
[2013-03-04 22:22:54 -0500] zts: ggolin: assume that code snippet is replicated for nagios plugin, munin plugin, collectd plugin
[2013-03-04 22:23:10 -0500] zts: ggolin: I want the plugins appropriate to the set of monitoring tools I've already installed
[2013-03-04 22:23:18 -0500] maplebed: hm.  well, thanks for the comments.  I'll keep it as is, but it seems like a problem many systems that provide a framework for other systems to use (like zts says, most monitoring suites)
[2013-03-04 22:23:37 -0500] ggolin: im not sure i agree here, but okay :)
[2013-03-04 22:23:42 -0500] mani_: does anyone have similar experiences
[2013-03-04 22:24:10 -0500] faustroll: maplebed: I don't like the idea of that conditional there. but if it works for now
[2013-03-04 22:24:33 -0500] zts: ggolin: hm, let me walk that back.  I don't think it should be a dependency in the chef sense (that the cookbook must be distributed to the client).  Obviously that dependency exists for the bits of functionality that you do want to use
[2013-03-04 22:24:50 -0500] zts: ggolin: the problem to avoid here is requiring everyone to load and distribute every single monitoring cookbook in the world, even though they only use one
[2013-03-04 22:25:22 -0500] faustroll: i'd prefer an attribute level config, if workable
[2013-03-04 22:25:30 -0500] ggolin: but you see what the deal here is though, its hidden from the operator
[2013-03-04 22:25:46 -0500] ggolin: if ganglia is there, then do this. and if it isnt then nothing.
[2013-03-04 22:26:01 -0500] maplebed: faustroll: but having an attribute level config means I need to go specifically select it.  If I'm using ganglia, why shouldn't it just automagically work?
[2013-03-04 22:26:02 -0500] zts: ggolin: that is a very good point
[2013-03-04 22:26:21 -0500] ggolin: sorry, if ganglia is there, then pull it down now, because i need it here
[2013-03-04 22:26:23 -0500] zts: maplebed: attribute is a much better option - just because someone has ganglia installed doesn't necessarily mean they want you to install the mongodb plugin for them
[2013-03-04 22:26:28 -0500] ggolin: so thats a dependency
[2013-03-04 22:26:52 -0500] ggolin: attribute, yes. i like that too.
[2013-03-04 22:29:04 -0500] mani_: is someone available for a quick chat?
[2013-03-04 22:29:51 -0500] btm: maplebed: some thoughts: https://gist.github.com/btm/5086184
[2013-03-04 22:31:11 -0500] faustroll: mani_ not really. but maybe the entire channel can handle your issue?
[2013-03-04 22:31:37 -0500] spox: is it possible to get to the main run_context from within an lwrp?
[2013-03-04 22:33:00 -0500] programmerq: so, I'm curious if there's a resource that I could use to untar a tarball to a target location.
[2013-03-04 22:33:01 -0500] maplebed: btm: thanks.
[2013-03-04 22:33:17 -0500] ggolin: programmerq, either execute or write one
[2013-03-04 22:33:32 -0500] programmerq: hmmm, will just execute.
[2013-03-04 22:33:40 -0500] programmerq: thanks!
[2013-03-04 22:34:32 -0500] maplebed: programmerq: there's also http://community.opscode.com/cookbooks/ark
[2013-03-04 22:36:08 -0500] maplebed: btm: how is an expanded runlist different from the already loaded recipes?  I think you mean that post-chef11, I won't need both node.recipe? and node[:recipies]; that the former will suffice.
[2013-03-04 22:45:17 -0500] btm: maplebed: a run_list is what is set in the node object. an expanded run_list is when we go through that and add the recipes from all of the roles. seen_recipes are the recipes we have compiled thus far and includes recipes from 'include_recipe'.
[2013-03-04 22:45:38 -0500] btm: maplebed: so seen_recipes will be different in the first recipe in a run than in the last recipe in the run.
[2013-03-04 22:47:02 -0500] maplebed: ah, now I think I remember why there's the "if included then include" confusion - the recipe is in the runlist but has not yet been compiled and so the lwrp isn't available yet.
[2013-03-04 22:47:12 -0500] btm: maplebed: in Chef 11, node#recipes? looks in the run_list, and the expanded run_list via node[:recipes]
[2013-03-04 22:47:36 -0500] btm: maplebed: in Chef 10, node#recipes? looks in the run_list, and then in seen_recipes. I do not think it includes the expanded run_list, would have to test.
[2013-03-04 22:48:03 -0500] btm: maplebed: but the expanded run_list is written out to node[:recipes] on expansion so you could check it yourself.
[2013-03-04 22:48:13 -0500] maplebed: gotcha.
[2013-03-04 22:48:32 -0500] btm: maplebed: right, that's surely why the include_recipe was in there.
[2013-03-04 22:48:57 -0500] btm: maplebed: saves you from having to play a potentially frustrating run_list order game.
[2013-03-04 23:01:26 -0500] tamouse__: i'm having problems getting gem_package to actually install a new version of a gem
[2013-03-04 23:01:39 -0500] mixandgo: any idea why "nxensite" scripts are not installed ?
[2013-03-04 23:02:20 -0500] amccloud: why don't all node attributes show up when I use knife node edit?
[2013-03-04 23:02:39 -0500] mani_: my question remains the same "how do you configure a client to talk a server" - did follow the instructions on the opscode wiki but i get failed authentication error
[2013-03-04 23:02:40 -0500] tamouse__: from the box in question, i look at the remote gems:
[2013-03-04 23:02:41 -0500] tamouse__: gem list --remote | grep '^rds-s3'
[2013-03-04 23:02:42 -0500] tamouse__: rds-s3-backup (0.0.4)
[2013-03-04 23:02:47 -0500] tamouse__: and i see the version i want
[2013-03-04 23:02:55 -0500] tamouse__: chef has the following in the recipe file:
[2013-03-04 23:03:21 -0500] tamouse__: gem_package 'rds-s3-backup' do options("--no-rdoc --no-ri") action :upgrade
[2013-03-04 23:03:21 -0500] tamouse__: end
[2013-03-04 23:03:41 -0500] tamouse__: there's actually line-breaks in there
[2013-03-04 23:03:57 -0500] tamouse__: if i read the doc for :upgrade, it says it upgrades to the newest version
[2013-03-04 23:04:34 -0500] tamouse__: this is chef 10.16.2 hostest
[2013-03-04 23:04:37 -0500] tamouse__: hosted*
[2013-03-04 23:05:01 -0500] tamouse__: the version on the system after the chef run is:
[2013-03-04 23:05:17 -0500] tamouse__: gem which rds-s3-backup
[2013-03-04 23:05:18 -0500] tamouse__: /opt/rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/rds-s3-backup-0.0.3/lib/rds-s3-backup.rb
[2013-03-04 23:09:01 -0500] drgage: can anyone point me at a cookbook or example which loops through an encrypted data bag? i'm trying to create an htpasswd file containing multiple username:passwordstring lines but i'm confused about how to get the data from the bag items and deliver it to the template.
[2013-03-04 23:10:51 -0500] tamouse__: drgage: it's just JSON data. how do you have your data bag set up with the users?
[2013-03-04 23:14:13 -0500] ggolin: caaaaaaaaaan jtimberman please comment on the situation with app/db cookbooks and databags?
[2013-03-04 23:14:41 -0500] ggolin: specifically, the db cookbook still uses databags while the app cookbook specifically deprecates them
[2013-03-04 23:15:44 -0500] drgage: tamouse__: honestly i think part of my confusion stems from not being sure how best to represent the data. i was thinking data_bags/secrets/drgage.json containing like {id:drgage, munin:muninpasswd, icinga:icingapasswd}
[2013-03-04 23:15:48 -0500] jtimberman: ggolin: technical debt.
[2013-03-04 23:16:07 -0500] jtimberman: ggolin: i assume you're talking about the database cookbook's recipes?
[2013-03-04 23:16:13 -0500] ggolin: jtimberman, yessir
[2013-03-04 23:16:20 -0500] magichands: are cookbooks that install things from source still idempotent?
[2013-03-04 23:16:27 -0500] magichands: seems like they wouldn't be
[2013-03-04 23:16:45 -0500] ggolin: jtimberman, the db cookbook master.rb recipe searches :apps for mysql related stuff.
[2013-03-04 23:16:51 -0500] magichands: like if I first start off with nginx 1.2.3 from source, now I decide I want 1.2.7... how does that happen?
[2013-03-04 23:16:53 -0500] jtimberman: magichands: not necessarily
[2013-03-04 23:16:54 -0500] magichands: seems funny
[2013-03-04 23:17:13 -0500] jtimberman: magichands: the nginx cookbook by opscode has a lot of special handling in the source recipe to do that idempotently.
[2013-03-04 23:18:07 -0500] ggolin: jtimberman, ok so its not something i misunderstood. cool.
[2013-03-04 23:18:31 -0500] jtimberman: ggolin: you can still have the application information in a data bag.
[2013-03-04 23:18:43 -0500] magichands: I guess I'm kind of surprised it doesn't use the package manager to build a package
[2013-03-04 23:19:04 -0500] ggolin: jtimberman, but the application cookbook wont use it, correct?
[2013-03-04 23:19:07 -0500] jtimberman: magichands: i totally recommend that you build the exact nginx package you need :)
[2013-03-04 23:19:22 -0500] magichands: yeah, just seems funny building things from source at all
[2013-03-04 23:19:32 -0500] jtimberman: because everything has to be compiled in, and i don't know what you want to support, pre-building one in the cookbook falls under the same problem as just building the source.
[2013-03-04 23:19:33 -0500] ggolin: first there was source.
[2013-03-04 23:19:39 -0500] magichands: is it trying to be something like gentoo on top of ubuntu?
[2013-03-04 23:20:01 -0500] faustroll: \window 1
[2013-03-04 23:20:07 -0500] ggolin: no :P
[2013-03-04 23:20:12 -0500] jtimberman: ggolin: right. there aren't recipes in the application cookbook that use it, but your own cookbook could totally just load the data bag for the app you want and use those values in the application resource.
[2013-03-04 23:20:17 -0500] jtimberman: magichands: no
[2013-03-04 23:20:57 -0500] ggolin: jtimberman, alright, so im sort of still using a databag. ok.
[2013-03-04 23:21:57 -0500] magichands: ok fair enough
[2013-03-04 23:22:09 -0500] magichands: looking also at the nginx cookbook I don't see anything about adding virtualhosts
[2013-03-04 23:22:10 -0500] jtimberman: ggolin: you can
[2013-03-04 23:22:17 -0500] jtimberman: nginx_site
[2013-03-04 23:22:19 -0500] jtimberman: definition
[2013-03-04 23:22:21 -0500] magichands: ah
[2013-03-04 23:22:38 -0500] ggolin: i guess it simplifies a couple of things
[2013-03-04 23:22:43 -0500] ggolin: thanks jtimberman
[2013-03-04 23:22:51 -0500] ggolin: i appreciate your time.
[2013-03-04 23:23:02 -0500] jtimberman: sure thing
[2013-03-04 23:27:00 -0500] tamouse__: drgage: I would think you'd want an array of user/pw combos: { 'users' = [{'user' = 'sarah', 'password' = 'jane'}, {'user' = 'john', 'password' = 'smith'}]}
[2013-03-04 23:28:00 -0500] drgage: oh, that's a good idea. thanks, i'll give that a shot.
[2013-03-04 23:31:27 -0500] tamouse__: anyone have any clues about my question?
[2013-03-04 23:39:01 -0500] jessicab: so.. is there some sort of trick to using node attributes in a minitest? i swear i had it at least working in the assert statement, but now even thats failing.. works fine if i just put in the values though
[2013-03-04 23:55:34 -0500] flaccid: is there anyway to tell the omnibus installer script which version to install?
[2013-03-04 23:56:03 -0500] btm: flaccid: install.sh -v VERSION
[2013-03-04 23:56:09 -0500] flaccid: btm: danke!
[2013-03-04 23:58:37 -0500] paigeat: where does chef server
[2013-03-04 23:58:45 -0500] paigeat: store cookbooks when you upload them
[2013-03-04 23:58:57 -0500] paigeat: I need to delete all of them and re-upload them

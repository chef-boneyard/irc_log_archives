[2013-03-25 00:12:43 -0400] jfl0wers: haydie ho
[2013-03-25 00:13:02 -0400] jfl0wers: question...
[2013-03-25 00:13:02 -0400] jfl0wers: I see this class: Chef::Util::FileEdit
[2013-03-25 00:13:22 -0400] jfl0wers: is there a provider that exposes some of this functionality already?
[2013-03-25 00:15:38 -0400] jfl0wers: specifically this method: search_file_replace(regex, replace)
[2013-03-25 00:15:38 -0400] jfl0wers: search the file line by line and match each line with the given regex if matched, replace the match (all occurances) with the replace parameter
[2013-03-25 00:15:41 -0400] jfl0wers: I don't want to reinvent the wheel...
[2013-03-25 01:45:03 -0400] ephess: I was going to store a database password for a pool of web servers in a data bag the first time a web server was created, then subsequent servers would retrieve it from there however it turns out updating data bags requires admin rights. Anyone had any experience doing something like this?
[2013-03-25 02:14:24 -0400] devx: has anyone had to bootstrap via su before?  I have inherited a couple of machines that don't use sudo, and I have to su to root..
[2013-03-25 02:35:29 -0400] EasyCo: Hey guys, I'm using Chef Solo built in with Vagrant and all is good except if I use the community phpmyadmin cookbook. I get a "I cannot read/etc/chef/client.pem". I looked at the recipe and it does some sha1 encryption but other then removing the line in the recipe I'm not sure what to do
[2013-03-25 03:26:29 -0400] flaccid: hmm has anyone configured smtp for relay with SES e.g. with postfix cookbook?
[2013-03-25 04:50:36 -0400] daos: hey guys
[2013-03-25 04:50:56 -0400] daos: i'm using `knife ec2 server create` and am getting a "Net::SSH::HostKeyMismatch" error
[2013-03-25 04:51:18 -0400] daos: my suspicion is that i might need to clear the known_hosts file on the chef server?
[2013-03-25 04:51:25 -0400] daos: i'm pretty new to chef :)
[2013-03-25 04:53:08 -0400] mohits: daos, you are right, you can actually use --no-host-key-verify with your knife command to disable host key verification
[2013-03-25 04:53:28 -0400] daos: oh cool :) i'll give that a shot
[2013-03-25 04:53:56 -0400] daos: thanks mohits
[2013-03-25 04:54:13 -0400] mohits: daos, np :)
[2013-03-25 06:05:52 -0400] majuscule: I'm trying to set up a client/server on a fresh debian squeeze-6.0 instance, but i can't seem to get the node created with knife - running into problems with the client key. I'm using the validation key that came with the package in /etc/chef/validation.pem, and a client key was automatically generated the first time I ran chef-client. Here's the error from `knife client create test` ERROR: Failed to authenticate to http://localhost:4000 as test with key /
[2013-03-25 06:51:45 -0400] chef738: any idea about how to create small recipes without cookbook and run it on client.... without login on client
[2013-03-25 06:56:22 -0400] mohits: chef738, chef 11 ships with chef-apply [RECIPE file], using which you can apply single recipe but need to be logged-in to node
[2013-03-25 07:08:40 -0400] ProfFalken: morning all :)
[2013-03-25 07:09:15 -0400] ProfFalken: I'm working on a ocuple of webapp servers that will be configured using Chef and the django apps deployed via Jenkins+Fabric+pychef
[2013-03-25 07:09:29 -0400] ProfFalken: I'm going to be using the suprvior cookbook
[2013-03-25 07:09:51 -0400] ProfFalken: am I right in thinking that I just create a new recipe in the supervisor cookbook for each app?
[2013-03-25 07:10:04 -0400] ProfFalken: (for the supervisord stuff anyway!)
[2013-03-25 07:35:41 -0400] chef738: i got error  when using knife ssh on client .......-- Net::SSH::AuthenticationFailed:......any idea about this.........why that happen
[2013-03-25 09:12:34 -0400] alex_____: is it nessesary to create the directory before u use template?
[2013-03-25 09:22:44 -0400] zts: ProfFalken: I haven't used the supervisor cookbook, but it looks like you'd use the supervisor_service LWRP in your app cookbooks
[2013-03-25 09:23:36 -0400] zts: alex_____
[2013-03-25 09:23:50 -0400] zts: whoops
[2013-03-25 09:24:00 -0400] zts: alex_____: yeah, you need to create the directory first
[2013-03-25 10:08:45 -0400] chef738: is that any command we used to ultarnative to chef-client command from server side
[2013-03-25 10:09:49 -0400] ProfFalken: zts: was commuting in... :) Thanks, I'll check it out :)
[2013-03-25 10:32:57 -0400] alex_____: zts thanks already found it out :P
[2013-03-25 10:35:08 -0400] zts: alex_____: no problem - "Try it and see" is usually good advice :)
[2013-03-25 11:47:13 -0400] Sgoettschkes: Is there any reason that some clients don't show up on the status page of the chef webui?
[2013-03-25 11:47:45 -0400] Sgoettschkes: Of my 30 nodes, only 20 are shown
[2013-03-25 11:49:20 -0400] chef738: can we restart services on node using chef webui...
[2013-03-25 11:49:39 -0400] mohits: Sgoettschkes, did they never showed-up, or were showing before and now don't?
[2013-03-25 11:50:17 -0400] Sgoettschkes: mohits: This is the first time I have a close look at the status page
[2013-03-25 11:53:05 -0400] Sgoettschkes: mohits: But it seems very random
[2013-03-25 11:53:35 -0400] zts: Sgoettschkes: that sometimes can be caused if your Chef server has broken search (status comes from search)
[2013-03-25 11:53:45 -0400] Sgoettschkes: ok
[2013-03-25 11:53:53 -0400] Sgoettschkes: zts: Is there any way to fix this?
[2013-03-25 11:53:53 -0400] zts: Sgoettschkes: are the same nodes missing from this output:  knife search node "*:*"
[2013-03-25 11:54:15 -0400] zts: Sgoettschkes: and are you running your own chef server, or using Hosted Chef?
[2013-03-25 11:55:01 -0400] Sgoettschkes: zts: yes, they are missing
[2013-03-25 11:55:10 -0400] Sgoettschkes: zts: My own chef server
[2013-03-25 11:56:03 -0400] zts: Sgoettschkes: okay, which version chef server are you running?
[2013-03-25 11:56:49 -0400] zts: chef738: no, but Private Chef is going to have that ability
[2013-03-25 11:59:12 -0400] Sgoettschkes: zts: How do I look it up? It's chef 11, but I don't know the specific version?
[2013-03-25 11:59:35 -0400] zts: Sgoettschkes: good question, let me just have a look at my chef 11 server to see what to suggest
[2013-03-25 11:59:55 -0400] Sgoettschkes: I don't see any version when running chef-server-ctl
[2013-03-25 12:00:01 -0400] Sgoettschkes: and I don' find anything in the webui
[2013-03-25 12:00:02 -0400] zts: Sgoettschkes: first try running "chef-server-ctl status"
[2013-03-25 12:00:26 -0400] zts: Sgoettschkes: and see if it says chef-expander and chef-solr are both running
[2013-03-25 12:00:38 -0400] Sgoettschkes: zts: both are running
[2013-03-25 12:00:45 -0400] Sgoettschkes: zts: everything is up and running
[2013-03-25 12:02:04 -0400] zts: Sgoettschkes: okay, you could try running "knife index rebuild", which will dump your search index and then try to reindex everything.  That doesn't explain why you have missing data in the first place, though
[2013-03-25 12:02:51 -0400] zts: Sgoettschkes: if you have lots of attribute data on some of your nodes, this used to be an issue: http://tickets.opscode.com/browse/CHEF-2346
[2013-03-25 12:03:30 -0400] zts: I can't tell (from the ticket) whether that fix is in 11 server, so maybe it's still relevant
[2013-03-25 12:03:45 -0400] Sgoettschkes: zts: knife index rebuild doesn't work ("ERROR: Rebuilding the index is not available via knife for Open Source Chef Servers version 11.0.0 and above."), but chef-server-ctl reindex works
[2013-03-25 12:03:51 -0400] Sgoettschkes: now I don't have any status data
[2013-03-25 12:04:34 -0400] Sgoettschkes: But knife search node "*:*" now returns all nodes
[2013-03-25 12:04:36 -0400] Sgoettschkes: it seems
[2013-03-25 12:06:07 -0400] zts: hm interesting!  That puts me out of ideas though.  Perhaps try running chef-client on one node, and see if it then shows up in status?
[2013-03-25 12:06:26 -0400] Sgoettschkes: ah, ok
[2013-03-25 12:06:32 -0400] zts: I guess the way this works has changed some more in Chef 11...
[2013-03-25 12:06:33 -0400] Sgoettschkes: zts: Now some status are there
[2013-03-25 12:06:42 -0400] Sgoettschkes: zts: But the same as before
[2013-03-25 12:06:49 -0400] Sgoettschkes: zts: Missing the same nodes
[2013-03-25 12:07:34 -0400] Sgoettschkes: zts: I don't have much attributes right now, actually no custom ones at all. Just one environment, two roles and some very basic cookbooks
[2013-03-25 12:10:40 -0400] zts: Sgoettschkes: Last thing to check is that the missing nodes completed their chef-client runs successfully - I think status is only updated by successful runs, so nodes won't show up there unless that has happened at least once
[2013-03-25 12:10:48 -0400] zts: Sgoettschkes: but otherwise, I've got no idea - sorry!
[2013-03-25 12:11:38 -0400] Sgoettschkes: zts: For one node I logged into and run chef-client manually
[2013-03-25 12:11:50 -0400] Sgoettschkes: zts: And it completed without issues, but there is no status
[2013-03-25 12:13:25 -0400] zts: oh well.. perhaps ask again later (when the americans are online), or mail the mailing list - I'd be interested to learn what the reason is, when you figure it out
[2013-03-25 12:18:53 -0400] Sgoettschkes: zts: I'll do that, thanks for your help
[2013-03-25 12:22:48 -0400] zts: you're welcome, good luck!
[2013-03-25 12:23:09 -0400] Sgoettschkes: zts: Funny thing: knife status shows all nodes
[2013-03-25 12:25:02 -0400] Sgoettschkes: I'll make a break and write an email to the chef mailing list later
[2013-03-25 12:26:34 -0400] BryanWB__: sup sup chefs!
[2013-03-25 12:41:38 -0400] smt: aruntomar: can you help me in this ? https://gist.github.com/vegardx/1386906 . I am able to ping chef-server-url properly
[2013-03-25 13:11:52 -0400] ekristen: can anyone point out where the docs are on how to install knife?
[2013-03-25 13:19:49 -0400] jmara: smt: did you change the hostname of your chef-server after its setup?
[2013-03-25 13:20:05 -0400] smt: jmara: nop
[2013-03-25 13:21:12 -0400] smt: jmara: its accessed via https
[2013-03-25 13:21:35 -0400] smt: jmara: Is that the problem ?
[2013-03-25 13:22:08 -0400] jmara: no, don't think so
[2013-03-25 13:26:33 -0400] smt: jmara: ok
[2013-03-25 13:28:48 -0400] ProfFalken: hey all, anyone in here isung pychef with Fabric?
[2013-03-25 13:30:07 -0400] ProfFalken: s/isung/using :D
[2013-03-25 13:31:55 -0400] matti: ProfFalken: How did you manage to mistype using that way ;p
[2013-03-25 13:32:00 -0400] matti: ProfFalken: Man ;p
[2013-03-25 13:32:05 -0400] matti: :>
[2013-03-25 13:32:25 -0400] matti: So funny ;p
[2013-03-25 13:34:22 -0400] ProfFalken: matti: meh, I just came back from lunch, could really do with a nap tbh... :P
[2013-03-25 13:36:30 -0400] hxla: Hello guys, I'm trying to check if a node has a specific tag from a role, something like "if node.tags.include? 'xyz' \ tag("zyx") \ end" but I got an error that the variable node it's not defined, is there a way to do that? Thanks
[2013-03-25 13:36:39 -0400] matti: ProfFalken: :)
[2013-03-25 13:36:45 -0400] matti: ProfFalken: +1 - to the nap idea.
[2013-03-25 13:38:27 -0400] chef738: anyone have idea about how we run cook book on chef client from master
[2013-03-25 13:49:11 -0400] Guest61951: hey guys. I can not seem to find any audit logs on the open source chef server. Am I just looking in the wrong place? How do you know who ran what?
[2013-03-25 13:58:11 -0400] alex_____: hey guys is it possible to use git in combination with chef
[2013-03-25 13:58:31 -0400] alex_____: like i do a commit to git and chef picks it up
[2013-03-25 13:58:43 -0400] alex_____: after every commit
[2013-03-25 14:00:23 -0400] specialsauce_: alex_____, look at "git commit hooks". you can trigger any action you want
[2013-03-25 14:00:47 -0400] alex_____: so there is no direct implementation for it?
[2013-03-25 14:07:01 -0400] leifmadsen: alex_____: well that is the direct implementation, on the git side. You can't have chef monitor a remote git repo and do stuff when a commit happens. You trigger chef from git when a commit happens.
[2013-03-25 14:07:16 -0400] leifmadsen: that wouldn't really make sense
[2013-03-25 14:08:05 -0400] alex_____: heheh oke :P
[2013-03-25 14:13:48 -0400] s2r2: hello.  How could I continuie debuggung a failing database-based recipe?  Judging from "chef-client -l debug", the resources execute; from the database or its query log, nothing has happened.
[2013-03-25 14:17:34 -0400] s2r2: my main problem is 'database "foo"' not creating databases and subsequent SQL queries not doing anything, albeit the chef log looks fine.
[2013-03-25 14:20:42 -0400] s2r2: actually, database 'foo' created the database.... so my problem is the SQL queries not doing anything
[2013-03-25 14:22:16 -0400] s2r2: hmm but creating a user didn't work either.  so weird.
[2013-03-25 14:23:01 -0400] j^2: anyone use the nagios cookbook here? I can add new machines via a chef run, but it seems that the cgi wont let me see them though the GUI.  I have all the settings to allow the users too, any thoughts?
[2013-03-25 14:28:51 -0400] failshell: hello. how can i access the loaded list of cookbooks from a recipe?
[2013-03-25 14:29:38 -0400] failshell: i tried node.run_list.expand, but that doesnt include cookbooks loaded by inclue_recipe
[2013-03-25 14:37:25 -0400] jmara: is it possible to pin down an environment in a knife.rb?
[2013-03-25 14:43:56 -0400] j^2: jmara: so every knife commands goes to a specific environment?
[2013-03-25 14:44:35 -0400] jmara: j^2: exactly
[2013-03-25 14:44:59 -0400] j^2: not that i know of
[2013-03-25 14:45:39 -0400] jmara: :-/
[2013-03-25 14:51:24 -0400] zts: which knife commands pay attention to -E, anyway?  Is it just "node create" and (by extension) bootstrap?
[2013-03-25 14:54:00 -0400] jmara: zts: search and ssh, too
[2013-03-25 14:58:45 -0400] s2r2: found my problem(s), database sometimes fails silently when e.g. the database a query should be run on does not exists (or is not specified, stupid me)...
[2013-03-25 15:03:04 -0400] jwitrick: Im a little confused as to the work flow of the ticket dashboard. If I have created a fix to an issue what is my next steps. (The reason I am asking is that all the documentation says to change the status as: resolved, and resolution as fixed. but i can not do that)
[2013-03-25 15:03:27 -0400] jwitrick: The only thing I can do is set the status as 'fix provided' and resoluion as 'unresolved'
[2013-03-25 15:04:47 -0400] jwitrick: any directions as to how to get these pull requests reviewed merged would be helpful
[2013-03-25 15:16:27 -0400] jwitrick: anyone from opscode online to answer my question above.
[2013-03-25 15:19:50 -0400] flagg0204: anyone have the link to fauohai ? cant seem to find it
[2013-03-25 15:20:06 -0400] failshell: this is really annoying me. there doesnt seem to be a way to access the full list of recipes that are being applied to a node
[2013-03-25 15:20:19 -0400] failshell: i cant believe im the only one on Earth who would want to do that ...
[2013-03-25 15:22:43 -0400] ProfFalken: failshell: log on to the node and run "shef -z" and look at the expanded run list?
[2013-03-25 15:23:38 -0400] failshell: ProfFalken: expanded run_list doesnt have recipes added by include_recipe
[2013-03-25 15:24:06 -0400] ProfFalken: failshell: ah, ok, yeah, then that is (AFAIK) an unsolved problem...
[2013-03-25 15:24:38 -0400] ProfFalken: that's why I try not to use "include_recipe"... ;)
[2013-03-25 15:24:54 -0400] failshell: what do you use instead?
[2013-03-25 15:25:33 -0400] ProfFalken: LWRPs instead of libraries
[2013-03-25 15:25:58 -0400] failshell: well, in my case, we include apache2 to a lot of our cookbooks
[2013-03-25 15:26:17 -0400] failshell: i need a way to find that its installed and running on a node, to then add the proper monitoring check
[2013-03-25 15:26:25 -0400] failshell: im kinda screwed if i cant get that info with Chef
[2013-03-25 15:26:26 -0400] ProfFalken: ah, ok, then I just put a dependency in the metatdata.rb and include the apache2 recipe in the role
[2013-03-25 15:26:43 -0400] ProfFalken: and apply the role to the server
[2013-03-25 15:27:10 -0400] failshell: well, that's fine and dandy, but we'd have to modify a lot of cookbooks :)
[2013-03-25 15:27:18 -0400] failshell: for the first time ever, Chef is letting me down :(
[2013-03-25 15:27:49 -0400] ProfFalken: lol, that's why I did it that way, I'd got myself into the situation that you are in and decided to take the time to redeisgn my cookbook relationships :)
[2013-03-25 15:28:10 -0400] ProfFalken: there is "knife spaghetti", but that won't help you here as it only reads roles and metadata.rb, not include_recipe
[2013-03-25 15:28:53 -0400] ProfFalken: http://miketheman.github.com/knife-role-spaghetti/
[2013-03-25 15:30:54 -0400] failshell: well, thanks ProfFalken
[2013-03-25 15:30:59 -0400] failshell: ill try to find a different tactic
[2013-03-25 15:34:08 -0400] zts: jmara: can you give me an example of a search command line that shows that?  As it demonstrably doesn't work for me...
[2013-03-25 15:34:34 -0400] zts: jmara: tried on 10.18.2 and 11.4.0...
[2013-03-25 15:34:47 -0400] ProfFalken: failshell: sure, sorry I couldn't be more help :(
[2013-03-25 15:36:27 -0400] zts: failshell: include_recipe doesn't affect the run list, but the recipes that are loaded are stored somewhere
[2013-03-25 15:37:53 -0400] zts: failshell: where do you need to see that information?  On the node (during the chef run), or from somewhere else?
[2013-03-25 15:37:59 -0400] jmara: zts: you are right, search doesn't respect the -E flag although it says so in knife search --help
[2013-03-25 15:38:47 -0400] zts: jmara: yeah, --help's output is a bit misleading... some options are "common" and show always appear, even though they don't do anything in many plugins
[2013-03-25 15:39:44 -0400] jmara: *grmbl* ;)
[2013-03-25 15:39:55 -0400] failshell: zts: on the node
[2013-03-25 15:40:00 -0400] failshell: zts: anywhere :)
[2013-03-25 15:40:25 -0400] failshell: ive tried node.recipe?('apache2')
[2013-03-25 15:40:27 -0400] failshell: that doesnt work
[2013-03-25 15:40:59 -0400] failshell: also looked in node.run_state
[2013-03-25 15:41:15 -0400] failshell: i cant find that info anywhere :(
[2013-03-25 15:41:42 -0400] zts: failshell: whether you're on 10 or 11 matters here too - I'd have thought node.run_state[:seen_recipes] (on 10) will have it, you could check run_context.loaded_recipe?('apache2') on 11
[2013-03-25 15:43:09 -0400] zts: failshell: and here's a gist from btm that should work on both (and leads me to guess you're on 11) https://gist.github.com/btm/5086184
[2013-03-25 15:43:18 -0400] failshell: im on 10
[2013-03-25 15:43:25 -0400] zts: oh wait, ignore that
[2013-03-25 15:43:31 -0400] zts: (gist)
[2013-03-25 15:45:03 -0400] failshell: node.run_state[:seen_recipes] doesnt have the include_recipe stuff in it
[2013-03-25 15:47:48 -0400] zts: failshell: which version of 10 are you using?  I've just looked at the code for the latest version in git, and it definitely should be upating node.run_state[:seen_recipes]
[2013-03-25 15:48:09 -0400] failshell: zts: server or client?
[2013-03-25 15:48:13 -0400] zts: client
[2013-03-25 15:48:23 -0400] failshell: 10.18.2
[2013-03-25 15:49:20 -0400] zts: other (possibly obvious) thing to check is that the include_recipe is definitely being processed before you're looking for it
[2013-03-25 15:50:20 -0400] chef584: any idea about this error i found this when run knife ssh-- Net::SSH::AuthenticationFailed
[2013-03-25 15:50:47 -0400] failshell: zts: hmm didnt check that though. my monitoring cookbook is probably loaded before the cookbook with the app
[2013-03-25 15:52:01 -0400] failshell: zts: ah ah.
[2013-03-25 15:54:27 -0400] pikesley: hey hey
[2013-03-25 15:54:38 -0400] pikesley: what's the recommended Icinga cookbook?
[2013-03-25 15:56:51 -0400] pikesley: this would be for configuring isinga clients
[2013-03-25 16:00:38 -0400] Sam__: Hi, newbie here.. testing chef with chef-solo: getting weird messages on my ubuntu 12.04 machine. E.g. "cookbook windows not found" when I add the java recipe, or "cookbook dmg not found" when I add the git recipe in my chef-solo JSON node config. Why is chef looking for these cookbooks?
[2013-03-25 16:04:53 -0400] spheromak: cookbook metadata calls them out as deps.
[2013-03-25 16:05:30 -0400] Sam__: Why would it do that?
[2013-03-25 16:06:01 -0400] spheromak: cause if your going to do something on osx/wwindows you may need these cooks. they usually are inert on no supported platforms
[2013-03-25 16:06:28 -0400] Sam__: I am on ubuntu 12.04... so I do not need those cookbooks
[2013-03-25 16:06:38 -0400] spheromak: you can ease the dep hell pain by using berkshelf or librarian
[2013-03-25 16:07:13 -0400] spheromak: yup but for the cook to support other platforms (windows osx) you need those cooks. the  author of the cookbook added those cooks to the dependancies of the cook
[2013-03-25 16:07:42 -0400] spheromak: chef-server only resolves deps as stated by the cookbooks in the run list
[2013-03-25 16:08:00 -0400] spheromak: and tosses an error when the server can't find the called out dep (server/solo)
[2013-03-25 16:08:22 -0400] Sam__: Yep ok.. on solo
[2013-03-25 16:08:23 -0400] spheromak: theres no way for us as cookbook creators to call out on this platform you need this dep unfortunately
[2013-03-25 16:08:38 -0400] spheromak: we can onluy say depends suggests recommends.
[2013-03-25 16:09:24 -0400] spheromak: so with solo i reccomend using berkshelf or librarian  to manage the cooks and their deps. will be the easiest way to get a working set.
[2013-03-25 16:10:10 -0400] Sam__: Ok. Thanks for the info spheromak. I am a bit surprised this is necessary, because I ran a test a couple of weeks ago, and didn't run into this issue, although I installed java in exactly the same manner.
[2013-03-25 16:10:32 -0400] spheromak: hrm.
[2013-03-25 16:11:04 -0400] spheromak: well thats husually the issue. some cook is calling a dep and its not in the set of cooks.  did you update some cookbook maybe ?
[2013-03-25 16:11:43 -0400] Sam__: Yes, but not java. Installed one by one now, and it hitches on java
[2013-03-25 16:12:57 -0400] spheromak: re--reading your aoriginal statement. you said you added a recipe to the runlist from an existing cook. that recipe may be trying to include_recipe  from one of those other cookbooks
[2013-03-25 16:13:19 -0400] Sam__: Also just for info: the only other place I found this issue on the web is from yesterday in this chat... http://community.opscode.com/chat/chef/2013-03-24 Could it be something new...?
[2013-03-25 16:13:33 -0400] spheromak: so it may be the recipe evaluation blowing up.
[2013-03-25 16:13:46 -0400] spheromak: siumple solution add those cooks to your set of cooks for your solo run
[2013-03-25 16:14:44 -0400] Sam__: True, just got me worried about dependency hell when I found not one but two deps, which are required for _other_ platforms
[2013-03-25 16:15:24 -0400] gad0lin: hi guys, I want to dowload  tarbal of master from github  but ark(resource) complains about it.  RuntimeError: Don't know how to expand https://github.com/abc/cde/tarball/master
[2013-03-25 16:15:43 -0400] includex: Hello all, I'm a happy Puppet user but where can I find updated info/doc/wiki/ about Integrating Nagios (through modules) in Puppet 3.1.1? KTNXBYE :)
[2013-03-25 16:15:44 -0400] gad0lin: is there any simple way to download it
[2013-03-25 16:16:31 -0400] spheromak: Sam__: yea its a bit of an anoyance, but usiong tools to manage it makes it go away (root issue there i think is not being able to do platform specific deps for cookbooks)
[2013-03-25 16:17:06 -0400] includex: ups wrong window :/ sorry
[2013-03-25 16:17:15 -0400] Sam__: exactly
[2013-03-25 16:17:51 -0400] Sam__: Good to know I'm not missing something obvious... thanks again spheromak
[2013-03-25 16:22:11 -0400] xaprb: I'm getting an error from a directory resource. The directory exists, and throws "Error executing action `create` on resource 'directory[/var/www/app/web]'" with Errno:EEXIST. AFAIK this isn't supposed to happen. Full pastebin: http://pastebin.com/CUSudLJ0
[2013-03-25 16:24:38 -0400] gad0lin: is there any other way to download tarball from github apart from curl -L ?
[2013-03-25 16:25:21 -0400] xaprb: Does anyone know if I'm doing anything wrong, or is this a Chef bug? Again the pastebin: http://pastebin.com/CUSudLJ0
[2013-03-25 16:30:46 -0400] pikesley: "1.File exists - /var/www/app/web"
[2013-03-25 16:31:01 -0400] pikesley: isn't there "action :force" or something?
[2013-03-25 16:31:29 -0400] gad0lin: ah, got it - just need to use extension "tar.gz" with ark resource
[2013-03-25 16:37:04 -0400] drakythe: anyone have experience with knife-xenserver gem? I have it installed, but I can't execute any of the commands it should be giving me access to
[2013-03-25 16:43:49 -0400] xaprb: Someone figured out the bug -- it is because /var/www/app/web is a symlink, not a directory. False alarm!
[2013-03-25 16:47:36 -0400] Guest30764: hi, i wanna cookbooks for Bamboo, anyone please advise?
[2013-03-25 16:50:07 -0400] Sam__: spheromak: Ha! All is clear now: http://docs.opscode.com/breaking_changes_chef_11.html => "chef-solo users will now see CookbookNotFound errors when a cookbook is listed as a dependency in the metadata but not present on disk"
[2013-03-25 16:50:49 -0400] Sam__: So I just happened to do my two tests once with chef < 11 and once with chef 11 :)
[2013-03-25 16:53:14 -0400] gmcinnes: guys. I can't figure out how to get ruby-shadow installed when I'm using the chef-solo provisioner in Vagrant. Anyone run into this before?
[2013-03-25 16:53:26 -0400] gmcinnes: I need ruby-shadow so I can get the users cookbooks to work right.
[2013-03-25 16:55:29 -0400] Guest30764: we have any template for bamboo installation through chef?
[2013-03-25 16:59:15 -0400] cassianoleal: is there a quick and easy way to update node configuration after upgrading the chef server from 10 to 11?
[2013-03-25 16:59:22 -0400] failshell: is there a way to force a cookbook to be always executed last? independant of the run_list? im guessing no
[2013-03-25 16:59:30 -0400] cassianoleal: my nodes are still hitting chef 10's url (with port 4000 and such)
[2013-03-25 17:07:24 -0400] maek: I know this is the worst possible thing to ask but does chef-server 9 allow you to specify a couchdb url or can it only use localhost?
[2013-03-25 17:08:48 -0400] Guest30764: can anyone help me, for install bamboo thorugh chef pleaase..
[2013-03-25 17:11:17 -0400] wdilly: Hello, I am interested in deploying chef in cloud instances. I have been practicing with virtual machines to wrap my head around the recipes and all and am comfortable bootstrapping a node, but how do you get an instance to communicate with and authenticate against the server when you are constantly creating and tearing down nodes like in the cloud. Also, how do you set its run-list. Thanks so much.
[2013-03-25 17:13:07 -0400] cheeseplus: wdilly: knife bootstrap does all these things for you
[2013-03-25 17:13:57 -0400] cheeseplus: wdilly: it will connect the node to chef server, add the node if not already added, and you can set it's run list in the same command
[2013-03-25 17:14:27 -0400] cheeseplus: wdilly: you could also communicate directly with the chef-server API if that is more your thing
[2013-03-25 17:15:11 -0400] knuckolls: wdilly: if you use ec2 or rackspace there are knife plugins for automatically creating a node and bootstrapping it. knife-rackspace, knife-ec2
[2013-03-25 17:15:17 -0400] knuckolls: most cloud providers have a knife plugin like that.
[2013-03-25 17:16:07 -0400] wdilly: we are using eucalyptus, i guess what i am asking is what steps do i need to take in creating my machine image so that I dont have to manyally type "knife node boostrap xxxx"
[2013-03-25 17:16:30 -0400] wdilly: im guessing i need to install a client.rb into the golden EMI image
[2013-03-25 17:18:56 -0400] zts: wdilly: yes, you'll need to install chef, a suitable client.rb, and the validation.pem
[2013-03-25 17:19:57 -0400] wdilly: zts: the client.rb file i use, is it okay if multiple nodes have the same one?
[2013-03-25 17:20:49 -0400] wdilly: ie standing up a cluster of many nodes all based on one EMI, which has the same client.rb stuck in it.
[2013-03-25 17:21:55 -0400] zts: wdilly: it can be fine, so long as you don't hardcode the node name in your client.rb
[2013-03-25 17:22:37 -0400] zts: wdilly: you could also look at something like cloud-init
[2013-03-25 17:23:12 -0400] newchef: hello.  how would I use a knife attribute / variable in a cookbook recipe?
[2013-03-25 17:23:46 -0400] newchef: more clearly, I have a variable defined in knife.rb that I would also like to use in a recipe.  Is this possible?
[2013-03-25 17:24:06 -0400] AntonZ: Hello, i know this is wrong forum, but could someone put out gitweb.cgi file for me? i deleted my by accident :(
[2013-03-25 17:24:14 -0400] zts: newchef: no
[2013-03-25 17:25:10 -0400] newchef: @zts, so is best practice to redefine in 1 cookbook's attributes and use in multiple recipes?  Or should this go in a databag?  Or should it be defined each time in each cookbook's attributes?
[2013-03-25 17:26:59 -0400] wdilly: zts, what method does the chef-server use to determine the run-list of the nodes? It seems to be based on hostname, knide node list produces hostnames, so if multiple clients query the server with idential client.rb files, but seperate hostnames, is it possible for them to have different run lists.
[2013-03-25 17:27:03 -0400] zts: newchef: to be honest, that's a bit of a vague question - hard to answer with much other than "it depends".  Can you give a specific example of the problem you're trying to solve?
[2013-03-25 17:27:54 -0400] zts: wdilly: by default, the run_list is empty - you can override that by passing a json file to chef-client (when you first run it on the node), or by updating the chef server after the node has been created
[2013-03-25 17:28:20 -0400] newchef: sure, this is a very specific example.  Using Amazon for servers which requires an ID and secret key.  Currently have them defined in knife.rb so I can immediately create a server.  Other cookbooks will require these credentials also.
[2013-03-25 17:28:32 -0400] newchef: Where should I place them?  Seems encrypted data bag might be best?
[2013-03-25 17:28:52 -0400] newchef: Just trying to understand chef best practices
[2013-03-25 17:29:06 -0400] wdilly: zts, is that first-boot.json?
[2013-03-25 17:29:11 -0400] zts: newchef: in that particular case, encrypted data bag sounds like what I'd be using
[2013-03-25 17:29:37 -0400] zts: wdilly: yeah
[2013-03-25 17:29:37 -0400] newchef: thanks.  Just wanted to be sure as I am trying to establish proper behavior before getting too deep into my learning
[2013-03-25 17:29:53 -0400] zts: newchef: no harm in asking questions :)
[2013-03-25 17:30:35 -0400] zts: wdilly: but the questions here is really, "When/where/how do you know what run_list a particular instance should use?"
[2013-03-25 17:31:13 -0400] tabolario: hello all, setting up my first production chef workflow for an AWS infrastructure and i want to do it right, so i may have some questions too :)
[2013-03-25 17:32:45 -0400] wdilly: zts, I agree, but im trying to take baby steps at the moment
[2013-03-25 17:34:25 -0400] wdilly: we will be standing up clusters of identical instances/nodes. Im thinking that will have multiple EMI's each with unique first-boot.json's but this is possibly way off from an ideal setup
[2013-03-25 17:35:07 -0400] zts: wdilly: assuming Eucalyptus has something along the lines of EC2 user-data, that's probably how you want to pass that in
[2013-03-25 17:35:18 -0400] gene: is there a good pattern to use where in a given recipe, all (or almost all) of the resources in that recipe should have a notifies instructing a service to restart? I've been just putting a notifies line in every resource but it seems a little clunky? Is there a better way to say, "all resources in this recipe should have this notifies attribute unless I say otherwise"?
[2013-03-25 17:36:02 -0400] tabolario: for those of you who have a vagrant workflow and a chef server deployment: i'm thinking of having a workflow where i have vagrant boxes to develop each of my roles and the interactions between them, would you suggest using my production chef server for those nodes, running a local chef server, or just using chef-solo for vagrant? i'm not sure if i want to go down the chef-solo route because some of my configs are going to re
[2013-03-25 17:36:02 -0400] tabolario: on role lookups to get hosts
[2013-03-25 17:37:23 -0400] jtran: hey all.  is platform_family method not available in metadata.rb
[2013-03-25 17:37:54 -0400] jtran: is there something else i can use to make depends logic  if rhel or ubuntu
[2013-03-25 17:38:35 -0400] zts: jtran: no, there is no platform-specific depends - it is all or nothing
[2013-03-25 17:38:44 -0400] jtran: zts: thx
[2013-03-25 17:43:25 -0400] gchristensen: is chef-rewind considered a Good Idea? or would it be better to fork and change?
[2013-03-25 17:56:07 -0400] haidangwa: ubuntu 10.04 node running chef-client 10.18.2 - we're seeing a bunch of defunct processes on this from chef-client running as a daemon. As a result, the Private Chef server is getting well over 1900 PUTs from node saves from this node every hour. High load average. The node's run list is empty, so it's basically just uploading a lot of little bits of node data in rapid-fire. Has anyone seen this before with this particular OS/chef-client combo? It's also ju
[2013-03-25 17:56:57 -0400] cwj: gchristensen: i dont think its a bad idea, i think its way better to use chef-rewind than to find yourself in a situation where you have your own kingdom of cookbook forks
[2013-03-25 17:57:18 -0400] cwj: i say this as someone who is currently trying to divest himself of such a fork collection
[2013-03-25 17:57:29 -0400] gchristensen: I see
[2013-03-25 17:57:29 -0400] Brouznouf: hello
[2013-03-25 17:57:30 -0400] cwj: gchristensen: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/ might be relevant to your interests
[2013-03-25 17:57:41 -0400] j^2: anyone use the nagios cookbook here? I can add new machines via a chef run, but it seems that the cgi wont let me see them though the GUI.  I have all the settings to allow the users too, any thoughts?
[2013-03-25 17:59:20 -0400] gchristensen: cwj: thank yo,u
[2013-03-25 18:00:29 -0400] mattray: spox: still working on the spiceweasel merge. Found a couple of odd regressions
[2013-03-25 18:01:51 -0400] cwj: gchristensen: you bet
[2013-03-25 18:04:00 -0400] cwj: gchristensen: fwiw you can achieve similar stuff without using chef-rewind, by modifing the parameters of existing resources in ruby, e.g. resources("template[/etc/foo.conf]").variables.merge!({this => that})
[2013-03-25 18:04:59 -0400] knuckolls: cwj that's pretty awesome.
[2013-03-25 18:05:24 -0400] gchristensen: cwj: good god! that is EXACTLY what I needed.
[2013-03-25 18:06:25 -0400] cwj: so you can write application cookbooks (e.g. my_awesome_site) that depend on and wrap library cookbooks (e.g. apache2)
[2013-03-25 18:09:04 -0400] wdilly: folks, after the client.pem is generated, the validator.pem is no longer needed on the client?
[2013-03-25 18:09:10 -0400] zts: wdilly: correct
[2013-03-25 18:09:56 -0400] Brouznouf: i believe it's required if you need to create new nodes and client no ?
[2013-03-25 18:10:26 -0400] cwj: Brouznouf: you definitely want to keep it around somewhere, but individual nodes dont need to retain a copy once they have their own client.pem
[2013-03-25 18:10:33 -0400] wdilly: zts, thanks
[2013-03-25 18:12:28 -0400] wdilly: o yes, but writing a recipe to delete it would be good practice, once client.rb is there.
[2013-03-25 18:12:52 -0400] zts: wdilly: indeed, and the "chef-client" cookbook (on the community site) has such a recipe too
[2013-03-25 18:13:22 -0400] wdilly: cwj, i would keep it somewhere, just not on nodes where non-sysadmins had login
[2013-03-25 18:14:02 -0400] wdilly: cwj, and it remains on the chef-server indefinitely right?
[2013-03-25 18:14:19 -0400] cwj: wdilly: the server retains the public half of it yes
[2013-03-25 18:14:36 -0400] cwj: if you lose the private half then you'll have to generate a new one
[2013-03-25 18:15:12 -0400] wdilly: cwj, which involves putting the validator.pem back in place and running chef-client again?
[2013-03-25 18:15:21 -0400] queso: What port is the API by default on the server in Chef 11?
[2013-03-25 18:15:50 -0400] failshell: is there a way to delay the execution of a cookbook? to make it run last for example?
[2013-03-25 18:15:53 -0400] ranjibd: queso: 443
[2013-03-25 18:16:18 -0400] wdilly: failshell: wouldnt you just put it as the last item in your run list?
[2013-03-25 18:16:35 -0400] queso: ranjibd: So what is a valid example chef_server_url from knife.rb?
[2013-03-25 18:16:41 -0400] failshell: wdilly: i have hundreds of machine running right now, and they would all need to be reconfigured
[2013-03-25 18:16:45 -0400] ranjibd: queso: https, i think its reverse proxied by nginx.. on https/443, behind the scene its the erchef server running on 800X or something similar
[2013-03-25 18:16:50 -0400] cwj: wdilly: that would be if you lost the private half of a given node's client key. in the case of validation.pem, you'd be regenerating the validation key which is global for the server
[2013-03-25 18:17:07 -0400] ranjibd: queso: https://<server fqdn or ip>
[2013-03-25 18:18:08 -0400] queso: ranjibd: ranjibd: Not https://<server>:443   ?
[2013-03-25 18:18:20 -0400] Hosh: ranjibd: it is in fact being reversed proxied by nginx.
[2013-03-25 18:18:36 -0400] ranjibd: queso: 443 is default for https, so should be options
[2013-03-25 18:18:40 -0400] ranjibd: *options
[2013-03-25 18:18:43 -0400] ranjibd: *optional
[2013-03-25 18:18:46 -0400] Hosh: queso: the 'https://' part of it is SSL, and by default is 443. So the :443 is not necessary but doesn't hurt either.
[2013-03-25 18:18:58 -0400] queso: ranjibd, Host: Right, that's what I thought.
[2013-03-25 18:18:59 -0400] ranjibd: damn this mac key boards..
[2013-03-25 18:19:06 -0400] wdilly: failshell, do each of them have run lists or are you using roles?
[2013-03-25 18:19:06 -0400] queso: ^ Hosh (sorry)
[2013-03-25 18:19:49 -0400] zts: failshell: if you're using chef client/server (rather than solo), you could use "knife exec" to script the updates to your run_list
[2013-03-25 18:20:03 -0400] queso: ranjibd, Hosh: Well, with https://<server>:443 I cannot bootstrap a server..
[2013-03-25 18:20:06 -0400] zts: failshell: but to answer your question, I'm not aware of any other way of ensuring that a recipe runs last
[2013-03-25 18:20:20 -0400] ranjibd: queso: what error you are getting ?
[2013-03-25 18:20:31 -0400] failshell: zts: thought about that. that's fine for the initial reconfiguration. but there's always a possibility of us forgetting to do that
[2013-03-25 18:20:35 -0400] failshell: i guess i could CRON it
[2013-03-25 18:21:03 -0400] zts: failshell: if it's important to you, I'd be inclined to add a report handler which checks whether that recipe was the last thing run, and tells you if it wasn't
[2013-03-25 18:21:20 -0400] failshell: zts: not a bad idea
[2013-03-25 18:21:21 -0400] queso: ranjibd: The server returned a HTTP 404. This usually indicates that your chef_server_url is incorrect.
[2013-03-25 18:22:45 -0400] ranjibd: queso: can you pastebin the log? knife bootstrap -VV
[2013-03-25 18:23:15 -0400] queso: ranjibd: I'm running chef-client directly on the machine.
[2013-03-25 18:23:37 -0400] queso: ranjibd: But I'll try to get a log :)
[2013-03-25 18:23:46 -0400] failshell: zts: node.run_state, is that compiled in the first run? or the second chef execution?
[2013-03-25 18:24:54 -0400] Hosh: failshell: http://docs.opscode.com/resource_common_compile.html
[2013-03-25 18:25:21 -0400] Hosh: There are ways to say I want to run things before, but I don't know about guaranteeing absolute last thing executed
[2013-03-25 18:28:45 -0400] zts: failshell: every run - it starts out empty at the beginning of each run
[2013-03-25 18:30:54 -0400] queso: ranjibd: Ugh... copying lengthy output into pastebins.. sometimes fails.. http://dpaste.com/1034638/
[2013-03-25 18:31:06 -0400] queso: ranjibd: Let me see if I can clean that.
[2013-03-25 18:34:17 -0400] kavi: hi, please advise, whether i can get Bamboo cookbook anywhere???
[2013-03-25 18:35:09 -0400] ranjibd: queso: knife node list works from ur own workstation ?
[2013-03-25 18:35:18 -0400] queso: ranjibd: http://dpaste.com/1034644/
[2013-03-25 18:35:33 -0400] ranjibd: that will validate if the chef server is working or not "https://chefserver.example.com:443"
[2013-03-25 18:35:41 -0400] queso: ranjibd: yes, I can list nodes.
[2013-03-25 18:36:50 -0400] ranjibd: the node you are bootstrapping was under chef earlier ?
[2013-03-25 18:37:09 -0400] queso: ranjibd: It doesn't appear to be a firewall issue since the node can hit the server to get the 404.
[2013-03-25 18:37:11 -0400] ranjibd: does it have a client.pem that belongs to older chef server
[2013-03-25 18:37:19 -0400] ranjibd: yeah
[2013-03-25 18:37:44 -0400] ranjibd: you can telnet to port 443 from the bootstrap node to verify if chef server is reachable
[2013-03-25 18:37:50 -0400] queso: ranjibd: I removed the /etc/chef dir and will try again.
[2013-03-25 18:38:23 -0400] ranjibd: queso: once the bootstrap fails
[2013-03-25 18:38:32 -0400] ranjibd: login to to bootstrap node
[2013-03-25 18:38:56 -0400] queso: ranjibd: The bootstrap failed.  From the node, I tried telnetting to 443 and it worked.
[2013-03-25 18:39:03 -0400] ranjibd: and run chef-client -j /etc/chef/firts-run.json -l debug
[2013-03-25 18:39:12 -0400] ranjibd: interesting
[2013-03-25 18:39:22 -0400] ranjibd: run chef client on debug mode from there
[2013-03-25 18:42:22 -0400] bluekelp: kavi: googling for this isn't easy :) i found this on github but don't know if it's any good: https://github.com/vertis/bamboo_cookbooks
[2013-03-25 18:42:44 -0400] bluekelp: kavi: checks the opscode repo as well. perhaps there are others/better cookbooks
[2013-03-25 18:43:15 -0400] queso: ranjibd: http://dpaste.com/1034656/
[2013-03-25 18:44:25 -0400] queso: ranjibd: It's trying to post to register the client.. keeps getting 404.
[2013-03-25 18:53:02 -0400] kallistec: queso: how'd you set up your server?
[2013-03-25 18:53:32 -0400] queso: kallistec: Just installed the RPM on a fresh CentOS install.
[2013-03-25 18:53:44 -0400] kallistec: queso: of chef 11 server?
[2013-03-25 18:53:49 -0400] queso: kallistec: Yes
[2013-03-25 18:54:15 -0400] kallistec: queso: chef 11 server runs nginx, but response headers show Apache/2.2.15 (CentOS)
[2013-03-25 18:55:09 -0400] kallistec: if you're using an apache proxy on purpose, you should double check the config
[2013-03-25 18:55:17 -0400] kavi: thanks bluekelp
[2013-03-25 18:55:18 -0400] queso: kallistec: Not doing that on purpose..
[2013-03-25 18:55:48 -0400] kallistec: queso: did you install chef server on a fresh box?
[2013-03-25 18:56:24 -0400] queso: kallistec: Yes. Apparently fresh installs have Apache installed??  Oh, that would definitely explain the issues.
[2013-03-25 18:56:47 -0400] beandip: BTW
[2013-03-25 18:57:01 -0400] beandip: why did you bother asking if the answer is in the window behind your chat box?
[2013-03-25 18:57:08 -0400] beandip: erp wrong window
[2013-03-25 18:59:00 -0400] kallistec: queso: I guess apache could be running based on base VM, kickstart config, clicky-clicky in graphical installer or something like that
[2013-03-25 18:59:11 -0400] kallistec: or it could be a DNS problem :P
[2013-03-25 18:59:14 -0400] queso: OOh
[2013-03-25 18:59:36 -0400] queso: kallistec: I know what it is!  This is using openvz and I bet the base centos6 template has apache installed by default.  Ugh.
[2013-03-25 19:00:33 -0400] |rt|: how does someone make suggestions on documentation?
[2013-03-25 19:00:55 -0400] |rt|: I ran across this example today that I felt is a bit confusing
[2013-03-25 19:00:58 -0400] |rt|: http://docs.opscode.com/essentials_data_bags_use_recipe.html
[2013-03-25 19:01:46 -0400] |rt|: if you look at the bottom the variable home is used with the attribute home
[2013-03-25 19:01:54 -0400] btm_: @opscode Chef Code Review, join: http://bit.ly/YPXb0j, watch: http://youtu.be/EDJMBRRbHcI
[2013-03-25 19:02:15 -0400] |rt|: I think this would be much clearer if the variable used were home_dir
[2013-03-25 19:04:12 -0400] tomdzk: |rt|: file a JIRA against the Documentation component, http://tickets.opscode.com/browse/CHEF/component/10030
[2013-03-25 19:05:38 -0400] queso: kallistec: Strangely, I'm still getting the same error, and it's showing "Apache" even with it not installed and having been rebooted.  But I will keep digging into it. Thanks.
[2013-03-25 19:07:03 -0400] ranjibd: kallistec: thats a nice catch. I missed it , :-)
[2013-03-25 19:07:13 -0400] |rt|: tomdzk: thanks will do
[2013-03-25 19:10:28 -0400] jtran: is there a better way to troubleshoot a cookbook other than modifying recipe, uploading cookbook so that it's exposed to all nodes?    my ideal scenario is being able to manually modify the local cache of the recipe, and running from that.  is such a thing possible without too much pain?
[2013-03-25 19:10:43 -0400] jtran: ^from a node
[2013-03-25 19:11:12 -0400] solarce: jtran: is there something about your nodes that prevents you from having a testing env for the cookbook?
[2013-03-25 19:11:44 -0400] jtran: solarce:  somet things testing env didn't catch or is diff than what expected
[2013-03-25 19:11:53 -0400] jtran: i know in ideal world that never happens but irl sometimes it does
[2013-03-25 19:12:15 -0400] solarce: |rt|: tomdzk: it's also on github https://github.com/opscode/chef-docs
[2013-03-25 19:13:02 -0400] |rt|: solarce should I file a bug and a pull request?
[2013-03-25 19:13:13 -0400] |rt|: I'm this close to hitting submit on my bug report in Jira
[2013-03-25 19:14:00 -0400] solarce: |rt|: i dunno
[2013-03-25 19:14:15 -0400] |rt|: I'll do both and reference the Jira ticket in the PR
[2013-03-25 19:18:13 -0400] jedsmith: my machine's FQDN is example.prod.example.com, but I have a CNAME in my zone for just the word "chef", and I'd like to go to "chef" in a browser and have it work. however, the chef 11 server seems to want to redirect to the FQDN given by hostname -f
[2013-03-25 19:18:30 -0400] jedsmith: I found example.prod.example.com in chef-server-running.json; is that the place to twiddle?
[2013-03-25 19:18:35 -0400] jedsmith: or does that only reflect running state? (the name is throwing me)
[2013-03-25 19:18:58 -0400] jedsmith: just curious if this is easy before I put a proxy in front of it
[2013-03-25 19:21:23 -0400] jaryd: my machine is getting stuck before it starts bootstrapping my cookbooks because it's expecting an interactive response -- basically, it want permission to download new packages (presumably from apt-get upgrade) -- is there a way to pass a --yes through knife so i don\t get stuck here?
[2013-03-25 19:21:30 -0400] jedsmith: ah, forced hostname -f through /etc/hosts hackery, I guess that's sorta halfway there
[2013-03-25 19:26:12 -0400] |rt|: wow the docs repo is a bit on the large size
[2013-03-25 19:28:20 -0400] tomdzk: |rt|: for pull requests and the like, see http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-03-25 19:31:27 -0400] |rt|: tomdzk: we are in the middle of getting setup CLA here at work....so I may have to hold off on contributing this in a PR
[2013-03-25 19:32:38 -0400] |rt|: tomdzk: it's likely held up in legal
[2013-03-25 19:33:03 -0400] tomdzk: |rt|: you can file the ticket anyway, without PR :)
[2013-03-25 19:33:15 -0400] |rt|: yeah I've already done that.
[2013-03-25 19:33:34 -0400] |rt|: http://tickets.opscode.com/browse/CHEF-4034
[2013-03-25 19:33:45 -0400] |rt|: not sure I did it correctly but it's in there
[2013-03-25 19:35:08 -0400] jaryd: so throwing the --yes option to knife did not solve the issue. my guess is that it's because i'm bootstrapping a machine through a ssh tunnel
[2013-03-25 19:35:16 -0400] jaryd: anyone have experience with this ?
[2013-03-25 19:35:33 -0400] jaryd: my use case is boostrapping machines in a private VPC on aws
[2013-03-25 19:37:04 -0400] failshell: can you modify the run_list from a recipe?
[2013-03-25 19:46:03 -0400] AskSteve: anybody here running nagios with nginx from the cookbook?
[2013-03-25 20:08:47 -0400] btm: @opscode Cookbook Code Review, join: http://bit.ly/XCdWwL, watch: http://youtu.be/m83sa1I4zsE
[2013-03-25 20:18:33 -0400] GianArb: hi! into a recipe I have add include_recipe "build-essential" but i'm this error
[2013-03-25 20:18:34 -0400] GianArb: Cookbook build-essential not found. If you're loading build-essential from another cookbook, make sure you configure the dependency in your metadata
[2013-03-25 20:18:41 -0400] GianArb: can you help me please?
[2013-03-25 20:19:27 -0400] gleam: put depends 'build-essential' in metadata.rb
[2013-03-25 20:21:53 -0400] GianArb: what do I add into metadata.rb? sorry but this is my first experince with chef/vagrant
[2013-03-25 20:22:45 -0400] GianArb: depends 'build-essential' ?
[2013-03-25 20:24:22 -0400] GianArb: mm doesn't work
[2013-03-25 20:29:57 -0400] martinisoft: GianArb: the depends line should work in the metadata.rb
[2013-03-25 20:32:40 -0400] GianArb: thanks martinisoft i go to try :)
[2013-03-25 20:33:12 -0400] martinisoft: GianArb: that tells chef to require the cookbook so you can include the recipe
[2013-03-25 20:34:16 -0400] GianArb: martinisoft: i have write into metadata.rb depends "build-essential"
[2013-03-25 20:34:25 -0400] techminer: In a recipe, how do I test if this attribute, node['chef_client']['http_proxy'], is set to a value?  I'm trying to write a code block that does one thing if a proxy is set, another if there is no proxy set.
[2013-03-25 20:34:56 -0400] GianArb: but i have this error http://pastebin.com/uDLAR488
[2013-03-25 20:34:57 -0400] martinisoft: GianArb: http://docs.opscode.com/essentials_cookbook_recipes_cookbook_dependencies.html
[2013-03-25 20:37:03 -0400] GianArb: martinisoft: into metadata.rb i have insert depends "build-essential"
[2013-03-25 20:37:23 -0400] GianArb: and into recupe include_recipe "build-essential"
[2013-03-25 20:37:43 -0400] GianArb: but [2013-03-25T20:36:31+00:00] FATAL: Chef::Exceptions::CookbookNotFound: Cookbook build-essential not found. If you're loading build-essential from another cookbook, make sure you configure the dependency in your metadata
[2013-03-25 20:37:48 -0400] GianArb: doesn't work
[2013-03-25 20:37:54 -0400] martinisoft: what does your full chef run look like? could you gist it?
[2013-03-25 20:38:25 -0400] martinisoft: and where are you loading this cookbook from? vagrant? chef-colo? hosted chef?
[2013-03-25 20:38:38 -0400] martinisoft: chef-colo == chef-solo
[2013-03-25 20:38:49 -0400] martinisoft: off on my typing today
[2013-03-25 20:39:50 -0400] gad0lin_: techminer: if/unless node['chef_client']['http_proxy'].nil?
[2013-03-25 20:40:02 -0400] GianArb: https://gist.github.com/GianArb/9ede5878d9d94dd0ce66 martinisoft
[2013-03-25 20:40:18 -0400] GianArb: yes I use vagrant and chef-solo
[2013-03-25 20:41:30 -0400] GianArb: https://github.com/PUGTorino/application_zf this is repo, here https://github.com/PUGTorino/application_zf/blob/master/recipes/default.rb i can add apt and build-essential
[2013-03-25 20:42:40 -0400] martinisoft: GianArb: you might want to move the build-essential higher up in the includes if any of those recipes require compiling tools. for your vagrant, are you using librarian or some system to manage your cookbooks?
[2013-03-25 20:43:45 -0400] GianArb: for manage my cookbooks i use submodule no librartian
[2013-03-25 20:43:49 -0400] wdilly: so I have a VM in non-persistent mode that I would like to use while developing recipes when i restart it and it goes back to the pre-bootstrap stage, and i do a knife node delete nodename sucesfully and then attempt to rebootstrap it, i get a "node already exists error" any thoughts? am i missing a step?
[2013-03-25 20:43:51 -0400] GianArb: librarian
[2013-03-25 20:45:04 -0400] leifmadsen: do I need to specify anything special in order to have a service 'subscribe' to a resource in another cookbook?
[2013-03-25 20:45:57 -0400] GianArb: martinisoft: sorry but I have to go, i return after.. thanks for help yours!
[2013-03-25 20:46:18 -0400] martinisoft: GianArb: np
[2013-03-25 20:46:20 -0400] jkyle: I'm noticing a lot of servers who are successfully checking in, but whose chef-client run sare failing (throws the failed run stack trace). The documentation indicates this would not be the expected behavior of 'knife status'
[2013-03-25 20:46:45 -0400] jkyle: client 10.20.0 and 10.24.0
[2013-03-25 20:51:11 -0400] threesome: Beginner question: Do I need a chef-repo if I'm using berkshelf, or is the idea behind berkshelf to have separate repositories rather than one big one?
[2013-03-25 20:51:30 -0400] justincampbell: threesome: separate repos
[2013-03-25 20:51:31 -0400] ivey: threesome:
[2013-03-25 20:51:45 -0400] ivey: but you may want a chef-repo for environments, data bags, etc
[2013-03-25 20:51:51 -0400] justincampbell: chef-repo is still recommended for environment/databag/etc backups
[2013-03-25 20:51:52 -0400] justincampbell: :)
[2013-03-25 20:52:04 -0400] cwj: and for containing the berksfile referencing all your seperate cookbook repos
[2013-03-25 20:52:44 -0400] ivey: we actually don't use a "master" berksfile. each app cookbook has a CI job that uploads to chef server for it and any dependencies
[2013-03-25 20:53:35 -0400] threesome: So is there a Berksfile in the root of the chef-repo, i.e. ~/chef-repo/Berksfile, as well as in the root of each cookbook, i.e. ~/chef-repo/cookbooks/cb1/Berksfile, ~/chef-repo/cookbooks/cb2/Berksfile, ~/chef-repo/cookbooks/cb3/Berksfile
[2013-03-25 20:54:14 -0400] ivey: not in the process used by the berkshelf authors
[2013-03-25 20:54:18 -0400] ivey: but there can be
[2013-03-25 20:54:28 -0400] jrclouda: I'm trying to install mysql gem via recipe i say "chef_gem "mysql"" and it fails.. When I run it from the command line (gem install mysql) it works fine. anyone run into this?
[2013-03-25 20:54:34 -0400] ivey: we also don't have a cookbooks directory in chef-repo at all
[2013-03-25 20:54:43 -0400] jrclouda: The fact that it works from CLI is really throwing me off
[2013-03-25 20:55:04 -0400] threesome: ivey, interesting, then I'm confused about the use of a chef-repo, if not to be the collection of cookbooks
[2013-03-25 20:55:04 -0400] ivey: threesome: we literally treat app cookbooks like software packages, and repo/CI them individually
[2013-03-25 20:55:10 -0400] ivey: threesome:
[2013-03-25 20:55:31 -0400] ivey: threesome: it's cookbooks, roles, data bags, environments  - cookbooks :-)
[2013-03-25 20:55:50 -0400] ivey: if you don't keep those other things in version control, you don't need a chef-repo
[2013-03-25 20:57:05 -0400] threesome: ivey, maybe I've misunderstood but isn't the purpose of a chef-repo to be a 'mirror' of your Chef server? Analogous to your SVN working copy (Chef repo) vs the SVN server (Chef server)
[2013-03-25 20:58:33 -0400] ivey: some people use it like that. our chef-repo has always been in git, and it also has a CI job that uploads all the files into chef. so it's canonical for us, and pushes to chef on changes.
[2013-03-25 20:58:47 -0400] ivey: do you have a chef-repo now? does it have anything in it that's not in chef-repo/cookbooks?
[2013-03-25 20:59:40 -0400] threesome: ivey, I'm just getting started with Chef so I'm trying to wrap my head around the concepts and understand how to lay everything out
[2013-03-25 20:59:50 -0400] threesome: So no chef-repo yet
[2013-03-25 21:00:11 -0400] ivey: got it. then i'd suggest not making one until you need it. and when/if you do, don't put any cookbooks in it
[2013-03-25 21:01:01 -0400] threesome: ivey, so I can get by without a chef-repo?! Cool, but then what would my workflow of developing and trying out cookbooks look like? It seems like every tutorial out there starts with a chef-repo by default, but doesn't explain what it's actually FOR
[2013-03-25 21:01:07 -0400] LeoSh: is there any way in chef-solo to list all of the available roles in a cookbook?
[2013-03-25 21:01:22 -0400] LeoSh: or rather, in the chef repo itself?
[2013-03-25 21:01:45 -0400] LeoSh: I want to do the equivalent of a search(:Role ) but with chef-solo
[2013-03-25 21:01:53 -0400] ivey: threesome: if you're doing it the "riot way" or berkshelf focused, try this tutorial: http://vialstudios.com/guide-authoring-cookbooks.html
[2013-03-25 21:05:28 -0400] threesome: ivey, I actually went through that tutorial this weekend :) It answered some questions and raised some questions. I think I'm missing some basic key concepts here. For people who don't use a Chef repo as a 'mirror' of what's on their server, what would they use it for?
[2013-03-25 21:05:53 -0400] ivey: a way to version/manage environments roles and databags
[2013-03-25 21:06:01 -0400] ranjibd: threesome: CI server
[2013-03-25 21:09:19 -0400] marlonb: Good evening everyone.
[2013-03-25 21:09:22 -0400] threesome: ivey, is there a way to see how the contents in your Chef repo differ from what's on your Chef server? Because otherwise there could easily be conflicts between what is in your Chef repo (and in git repo), and what's actually being run on your nodes (which gets pulled from Chef server). How can we ensure that what we're seeing on our local workstation Chef repo is the same view of what nodes will see?
[2013-03-25 21:09:37 -0400] threesome: ranjibd, how so?
[2013-03-25 21:16:18 -0400] marlonb: I just installed the open chef server, and the chef-server-running file is listing a fqdn that i don't want..it's creating an issue when I try to upload cookbooks.  I searched and found that i can create /etc/chef-server/chef-server.rb however I don't see a way to change the fqdn through that file
[2013-03-25 21:18:47 -0400] Kzim: Hi
[2013-03-25 21:18:53 -0400] segv: ello
[2013-03-25 21:19:13 -0400] Kzim: Does it make sense to create a Provider to make MongoDB instance ?
[2013-03-25 21:19:45 -0400] segv: Depends on how many you're going to be creating and if you'll need to create an instance from other recipes dynamically
[2013-03-25 21:19:50 -0400] spheromak: marlonb: https://gist.github.com/spheromak/5017833
[2013-03-25 21:19:59 -0400] isotope: Kzim as opposed to using the cookbook ?
[2013-03-25 21:20:20 -0400] Kzim: segv, about 3 instance per VM and i will have lots of them. perhaps from other recipe yes
[2013-03-25 21:20:24 -0400] segv: Otherwise, i'd just stick to the cookbook per host and change attributes per host
[2013-03-25 21:20:33 -0400] Kzim: isotope, has opposed to definition i think
[2013-03-25 21:21:09 -0400] ranjibd: threesome: develop and commit cookbooks in the repo, ci server bumps up the versions and pushes it in chef server and propagate it across environments once tests pass
[2013-03-25 21:21:17 -0400] Kzim: also i'm learning how to make a provider :)
[2013-03-25 21:22:03 -0400] ranjibd: threesome: so the chef repo is actually has all historical data, and u employ all your git workflows on top of it.. which chef server might not have the unused older versions of cookbooks
[2013-03-25 21:22:04 -0400] marlonb: thank you very much
[2013-03-25 21:22:21 -0400] Kzim: there are some thing i don't understand like you have to identify a resource with a unique id to use load_current_resource ?
[2013-03-25 21:22:48 -0400] ranjibd: also the cookbooks directory is vendorized , managed by berks so thats not under git, while org specific cookbooks are in site-cookbooks
[2013-03-25 21:23:35 -0400] threesome: ranjibd, so the cookbooks I develop should go under cookbooks or site-cookbooks directory in the Chef repo?
[2013-03-25 21:26:20 -0400] threesome: ranjibd, so do you ever run knife commands to interact with your Chef server from your workstation, or you only allow your CI server to interact with the Chef server directly through knife commands?
[2013-03-25 21:26:30 -0400] ranjibd: yes
[2013-03-25 21:27:02 -0400] techminer: In a recipe, how do I test if this attribute, node['chef_client']['http_proxy'], has a value? I'm trying to write a code block that does one thing if a proxy is set, another if there is no proxy set.
[2013-03-25 21:27:02 -0400] ranjibd: in some cases i do.. but in the normal cases its the CI server which does this
[2013-03-25 21:27:10 -0400] marlonb: spheromak: Thank you very much, I spent the last 90 minutes working on this
[2013-03-25 21:27:15 -0400] ranjibd: techminer: node.attribute?(:x)
[2013-03-25 21:27:44 -0400] spheromak: marlonb: no problem
[2013-03-25 21:28:11 -0400] marlonb: spheromak: what does the topology line really do?  is that a way to build chef servers out in a cluster?
[2013-03-25 21:31:20 -0400] threesome: ranjibd, how does your CI server bump the version?
[2013-03-25 21:31:53 -0400] ranjibd: i use grit based scripts to do that
[2013-03-25 21:32:10 -0400] ranjibd: so u have some commits that the CI server makes
[2013-03-25 21:32:36 -0400] failshell: oh yeah: http://tickets.opscode.com/browse/CHEF-3651 ehehe #sles #fail
[2013-03-25 21:33:48 -0400] ranjibd: i have also used alternative approach where devs bump up the verison, CI server just uploads it , and freezes everything  (which fails if the devs dont bump up versions_
[2013-03-25 21:35:01 -0400] ranjibd: and CI controls the version constrains in each environment, and environments are not checked in . automatically backed up as json
[2013-03-25 21:35:27 -0400] ranjibd: i guess u'll figure out your own comfortable workflows..
[2013-03-25 21:36:52 -0400] threesome: ranjibd, and how do you manage everything not related to cookbooks on your Chef server? (i.e. environments, roles, data bags)
[2013-03-25 21:37:30 -0400] ranjibd: roles are in git
[2013-03-25 21:37:48 -0400] ranjibd: data bags are generally backed up as json
[2013-03-25 21:38:10 -0400] ranjibd: i prefer to treat them as dbms stuff...
[2013-03-25 21:38:29 -0400] ranjibd: but i have worked on projects that checked in databags in git, and that works fine too
[2013-03-25 21:39:27 -0400] threesome: ranjibd, if another developer changes data bags and pushes those changes to the Chef server, aren't you sitting with outdated data bags in your local Chef repo without even knowing it?
[2013-03-25 21:39:44 -0400] ranjibd: the CI based work flows are complex.. you have to use feature branch and other practices as well, other wise it can mess up things. so to begin with go with something lighter
[2013-03-25 21:40:19 -0400] ranjibd: threesome: thats the whole point , devs should not push stuff in chef server ,
[2013-03-25 21:40:31 -0400] ranjibd: they can test stuff locally using vagrant
[2013-03-25 21:40:41 -0400] ranjibd: also with chef-solor
[2013-03-25 21:40:45 -0400] ranjibd: *chef-solo
[2013-03-25 21:40:51 -0400] ranjibd: which supports data bag
[2013-03-25 21:41:08 -0400] knuckolls: threesome: at my old job we used a knife-sanotku before filter to ensure that whenever anyone uploaded changes to databags on the chef server that it pulled them down to the git repo, committed it, and pushed it.
[2013-03-25 21:41:29 -0400] knuckolls: there was probably some edge case where things got out of sync, but we never encountered it.
[2013-03-25 21:41:39 -0400] knuckolls: https://github.com/knuckolls/knife-santoku
[2013-03-25 21:41:51 -0400] threesome: ranjibd, so data bags aren't versioned? If someone doesn't follow the right procedure, there's no way to known who is using the most recent version of the data bag?
[2013-03-25 21:42:05 -0400] ranjibd: yeah, also in one project we have used a wrapper script that does a sync. so instead of upload individual stuff u'll always do  the sync which does git pull + upload everything
[2013-03-25 21:42:15 -0400] miah: welcome to continuous integration 101
[2013-03-25 21:42:19 -0400] ranjibd: no,, data bag, roles are not versioned
[2013-03-25 21:43:24 -0400] ranjibd: threesome: the best you can do is to do some design trick and use environment-data-bag name or something to segregate it..
[2013-03-25 21:43:28 -0400] miah: creating a workflow that everybody agrees to use is key to successful management of complex environments
[2013-03-25 21:43:51 -0400] miah: its even better when you take away the ability for people to make changes directly to the chef server
[2013-03-25 21:44:10 -0400] miah: and hook it into your testing infrastructure so that some process makes the changes after passing a series of tests
[2013-03-25 21:44:13 -0400] ranjibd: yes.. come up with a convention and follow it
[2013-03-25 21:44:18 -0400] knuckolls: +1
[2013-03-25 21:44:39 -0400] miah: take people out of the equation and lower the chance of some fubar
[2013-03-25 21:45:38 -0400] unix_itspissa: ok
[2013-03-25 21:45:57 -0400] unix_itspissa: so they have chef disbaled to change root passwords, but I want to update all group paswords, is this hard?
[2013-03-25 21:46:08 -0400] unix_itspissa: can I liek temporarily enable chef to change root pass?
[2013-03-25 21:46:22 -0400] miah: if chef is running as root it can change the root password, or any other password
[2013-03-25 21:46:57 -0400] knuckolls: unix_itspissa: consider ssh public/pvt keys instead?
[2013-03-25 21:47:13 -0400] miah: a chef recipe might be protecting the root password, thus making it seem like you cannot change the root password. its a question of resource execution order though.
[2013-03-25 21:47:24 -0400] unix_itspissa: I have but I am not sure they are setup and this is 1000s of boxen
[2013-03-25 21:47:44 -0400] unix_itspissa: hmm
[2013-03-25 21:47:49 -0400] ColinR: Hello, I'm trying to figure out an issue I'm running into with some cookbooks I have. I have two cookbooks that include a "base" cookbook that contains a recipe and attributes file like so: https://gist.github.com/crymer11/5241082. One of the cookbooks installs perfectly, when the 'foo' role doesn't exist, it doesn't include the 'bar' recipe. The other recipe, however, keeps including the 'bar' recipe even when 'foo' role doesn't exist
[2013-03-25 21:47:56 -0400] ColinR: Any ideas why or how to debug this?
[2013-03-25 21:49:57 -0400] threesome: miah, how could I take away the ability for people to directly make changes to the Chef server?
[2013-03-25 21:52:09 -0400] ssd7: ColinR: I would probably start low tech.  Add some Chef::Log.info("Value of role_search(role) is #{role_search(role)}") type lines to that role_exists? function
[2013-03-25 21:52:41 -0400] ColinR: i have those lines inside the conditional statement, but never see the output during the run
[2013-03-25 21:52:58 -0400] ssd7: ColinR: What version of Chef are you on?
[2013-03-25 21:53:03 -0400] ssd7: You might have to change the log level
[2013-03-25 21:53:04 -0400] ColinR: 11
[2013-03-25 21:53:16 -0400] ssd7: try adding -l info
[2013-03-25 21:53:24 -0400] threesome: knuckolls, how did you use that before filter? For example what did you use instead of 'notify' in the examples at https://github.com/knuckolls/knife-santoku/blob/master/examples/santoku-before.rb
[2013-03-25 21:53:58 -0400] knuckolls: threesome: oh the before callbacks are just arbitrary ruby code.
[2013-03-25 21:54:12 -0400] knuckolls: well, both the before and after callbacks are.
[2013-03-25 21:54:22 -0400] miah: threesome: take away their admin privileges
[2013-03-25 21:54:31 -0400] Majost1: what is a clean way of doing something like: node.default['myattr'] = rand(99) + "-"  + rand(99) + "-" + rand(99)
[2013-03-25 21:54:39 -0400] knuckolls: threesome: i tend to agree with miah these days
[2013-03-25 21:55:25 -0400] miah: people (including yourself) will make mistakes. best to try to test / verify everything before it hits the server environment. even if you are only hitting staging. test test test =)
[2013-03-25 21:55:31 -0400] ssd7: Majost1: That could be very clean, depending on what you are trying to do.  Probably best to describe what you want at a higher level.
[2013-03-25 21:55:46 -0400] knuckolls: but previously we had it so that if you uploaded an encrypted data bag, it would actually download it via an after callback for that `knife data bag from file` command, write it to the databag in the repo, git add it, commit, push.
[2013-03-25 21:56:10 -0400] knuckolls: threesome: that made it so we could keep the chef server in sync with the git repo.
[2013-03-25 21:56:13 -0400] threesome: miah, knuckolls: I agree about taking away admin privileges on the Chef server to only those people that need it, but what about organizations where there will be more than one person writing cookbooks? Won't those 2/3/more people still have the same problem between themselves of potentially stepping on each other's work without even realizing it?
[2013-03-25 21:56:39 -0400] miah: these problems have all been solved in developers workspaces for years
[2013-03-25 21:56:56 -0400] miah: cookbooks are a unique software project. you should develop like such.
[2013-03-25 21:57:04 -0400] ColinR: @ssd7 `sudo chef-client -l info` still results in the same thing - 'bar' is included and no info message is output
[2013-03-25 21:57:09 -0400] knuckolls: threesome: make it so only the CI server can write out to the chef server every time it notices a new cookbook version, don't overwrite.
[2013-03-25 21:57:15 -0400] miah: pull requests, code reviews, merge into master. correctly version cookbooks etc.
[2013-03-25 21:57:22 -0400] miah: version pinning in environments
[2013-03-25 21:57:29 -0400] miah: all these things solve these exact issues
[2013-03-25 21:57:55 -0400] Majost1: ssd7: the actual code is a little different as I am using SecureRandom.hex(2) -- but I am generating a random string which is hyphenated every four characters -- eg: xxxx-xxxx-xxxx-xxxx
[2013-03-25 21:58:05 -0400] ColinR: @ssd7, I stand corrected. That'll teach me to grep my logs next time.
[2013-03-25 21:58:19 -0400] Majost1: ssd7: It works -- but it just feels dirty.
[2013-03-25 21:58:36 -0400] senilegenius: hello all. anyone have a good link for chef server v11 redundancy? i'm not too concerned with setting up HA b/c of the overheadwould just like to bring up a new VM and be able to restore to the new server.
[2013-03-25 21:58:40 -0400] miah: http://continuousdelivery.com/ / http://martinfowler.com/books/duvall.html
[2013-03-25 21:58:44 -0400] miah: fantastic books. go read them =)
[2013-03-25 21:59:27 -0400] senilegenius: how would i be able to make this work w/out touching the clients once a new server comes online?
[2013-03-25 22:03:00 -0400] threesome: miah, great advice. Btw are those books applicable for Chef? I hope too much hasn't changed in this whole domain (which I'm new to) since those books were written
[2013-03-25 22:03:48 -0400] kfr_: is there a way to manage keys in /etc/ssh/ with chef
[2013-03-25 22:04:06 -0400] threesome: knuckolls, so if you do a commit to a cookbook in Jenkins CI server and it notices that it's an already existing version, it shouldn't build?
[2013-03-25 22:04:41 -0400] ssd7: Majost1: I can think of other ways to hyphenate a random string every 4 characters.  I'm just not sure if I really think they are any better.
[2013-03-25 22:05:11 -0400] knuckolls: threesome: yeah it shouldn't do anything to the chef server unless it sees that a developer intentionally bumped the version in metadata.rb and git tagged it.
[2013-03-25 22:05:32 -0400] miah: yes, those books are applicable to all software development and management
[2013-03-25 22:06:05 -0400] knuckolls: threesome: if the developer did both of those things, then upload the cookbook to the chef server(s) and freeze the cookbook
[2013-03-25 22:06:40 -0400] knuckolls: threesome: that way your chef server becomes an artifact server that matches the git tags within github for a given cookbook
[2013-03-25 22:07:18 -0400] knuckolls: threesome: and like miah said, you control what code makes it into each environment by pinning cookbook versions in the environment files
[2013-03-25 22:07:59 -0400] knuckolls: heading out. good luck.
[2013-03-25 22:08:05 -0400] basic`: i need help overriding the default packages in the mysql cookbook with the percona packages
[2013-03-25 22:08:17 -0400] basic`: i can't seem to get the client to install the right things, even though i have the override
[2013-03-25 22:09:06 -0400] basic`: http://pastebin.osuosl.org/1468/
[2013-03-25 22:16:45 -0400] threesome: knuckolls, thanks
[2013-03-25 22:21:48 -0400] James_Wells: Strange question, but is there a way inside of a cookbook is there a way to determine which version of Chef Client is being run?  I ask because I have run into an issue where foodcritic is complaining about a couple of cookbook issues, but when I correct them for foodcritic, they fail on a couple of my older Chef clients.
[2013-03-25 22:22:33 -0400] abrown: good evening
[2013-03-25 22:25:06 -0400] James_Wells: As an example of what I mean, if a cookbook's provider does not define a default_action, foodcritic complains, but if you define one, Chef Client v10.4 fails.
[2013-03-25 22:26:01 -0400] abrown: I'm attempting to modify the opscode-mysql cookbook to add support for the MySQL 5.6 binaries.  MySQL 5.6 now generates a random password at package install time that is stored in /root/.mysql_secret (along with some other text).  I need to parse the file and extract the password after the package has been installed and pass it into the mysql command that sets the preferred root password.
[2013-03-25 22:27:13 -0400] vegardx_: Building from source or debian/ubuntu package? Look at the preseed.
[2013-03-25 22:27:13 -0400] abrown: Due to the fact that chef executes ruby code before the resources are executed, I can't figure out how to get that temporary random password  between the package install and pass it to assign-root-password
[2013-03-25 22:27:25 -0400] mswart: James_Wells: Chef::VERSION returns the version as string, like "10.18.2"
[2013-03-25 22:27:25 -0400] abrown: This is from the MySQL canonical RPM packages
[2013-03-25 22:27:42 -0400] vegardx_: aha
[2013-03-25 22:27:48 -0400] abrown: which has mysql_install_db --random-password hard coded into the post-install script :(
[2013-03-25 22:28:01 -0400] vegardx_: What is the password for?
[2013-03-25 22:28:08 -0400] basic`: i'm having trouble with the percona packages for mysql as well
[2013-03-25 22:28:11 -0400] vegardx_: Is there any use for it in chef?
[2013-03-25 22:28:14 -0400] basic`: it seems to think the init script is the wrong name
[2013-03-25 22:28:24 -0400] James_Wells: mswart, excellent, thank you
[2013-03-25 22:28:36 -0400] abrown: The password is the initial root password, so chef needs it to set the preferred root password
[2013-03-25 22:28:46 -0400] vegardx_: aha
[2013-03-25 22:28:48 -0400] abrown: prior to 5.6, the initial root password was a blank string
[2013-03-25 22:30:04 -0400] abrown: @basic` - I just submitted a pull request that fixes a couple problems with the mysql::percona_repo for Debian/Ubuntu
[2013-03-25 22:30:20 -0400] abrown: What's the issue that you're having w/ Percona?
[2013-03-25 22:31:18 -0400] basic`: i think i got it
[2013-03-25 22:31:37 -0400] basic`: abrown: i had to set node['mysql']['service_name'] = 'mysql'
[2013-03-25 22:31:41 -0400] basic`: for centos/rhel
[2013-03-25 22:31:45 -0400] basic`: because the default is mysqld
[2013-03-25 22:31:59 -0400] mswart: abrown: not sure if the is the best approach, but chef allows to run/execute resources like packages installations immediately
[2013-03-25 22:34:48 -0400] Kzim: i tried to make a really simple resource but the chef client don't find it, the file is in the cache :( i get a FATAL: NameError: Cannot find a resource for mongo on centos version 6.0 i use chef 11
[2013-03-25 22:34:52 -0400] spicy: what's the best way to store the new data bag format in the chef repository for encrypted data bags? if you dump the databag without the key you get the full json dump, uploading that back to the server doesn't seem to work though
[2013-03-25 22:35:39 -0400] doomviking: pretty sure the idea is that hyou don't have any of that in a repo
[2013-03-25 22:35:40 -0400] spicy: (it'll upload but if you do knife edit with the key you're still editing the full databag json and not just the encrypted parts)
[2013-03-25 22:36:47 -0400] spicy: doomviking: not really sure that is the case, if so there is no way to store those values outside of the chef server
[2013-03-25 22:37:02 -0400] spicy: it worked fine previously before switching to the new YAML library
[2013-03-25 22:38:24 -0400] Kzim: nevermind :)
[2013-03-25 22:38:34 -0400] spicy: also i really need to turn off join/parts for #chef apparently :)
[2013-03-25 22:49:17 -0400] AskSteve: is there a 'proper way' to submit a bug?
[2013-03-25 22:49:35 -0400] mswart: tickets.opscode.com
[2013-03-25 23:04:26 -0400] jrclouda: is a 30 second check in time too aggresive for chef-client?
[2013-03-25 23:05:48 -0400] spheromak: jrclouda: depends on the number of nodeds number of cookbooks size of cookbooks and ammount of search :) all factors that tend to add stress to your server. IMO 30s is  too agressive.
[2013-03-25 23:05:59 -0400] spicy: i'd tend to agree
[2013-03-25 23:06:17 -0400] jrclouda: Ok, thanks I was just curious
[2013-03-25 23:06:21 -0400] jrclouda: I know it's an open ended question
[2013-03-25 23:10:04 -0400] silk1: WHat was your motivation behind 30 second cycles? trying to catch config updates?
[2013-03-25 23:10:37 -0400] jrclouda: I don't have floating IP's shared IP in my environment, the goal was to detect when the master db went down and the slave was promoted
[2013-03-25 23:10:45 -0400] jrclouda: than have chef checkin and update all the web heads to point to the new master
[2013-03-25 23:21:45 -0400] benkay: during a `knife bootstrap` run, i'm getting the following SSL error:
[2013-03-25 23:21:46 -0400] benkay: OpenSSL::PKey::PKeyError: not a public key "/home/deploy/.ssh/id_rsa.pub"
[2013-03-25 23:22:13 -0400] benkay: which is teh sillies and i do not understand, because i've regenerated that public key from the corresponding private key.
[2013-03-25 23:22:53 -0400] benkay: any ideas on this weirdness?
[2013-03-25 23:26:13 -0400] auser: urg
[2013-03-25 23:26:18 -0400] auser: salt-cloud is making my head explode
[2013-03-25 23:26:56 -0400] auser: seriously brains splattered against my office wall
[2013-03-25 23:34:42 -0400] bluekelp: benkay: can you delete the pub key? don't know why you'd need it
[2013-03-25 23:35:57 -0400] benkay: i'll try that, yeah
[2013-03-25 23:40:40 -0400] benkay: ibd bluekelp that worked

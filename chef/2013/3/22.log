[2013-03-22 00:21:01 -0400] otterley: can anyone point to a good example of the :callbacks validation in a lightweight resource?  the documentation is... sparse
[2013-03-22 00:21:42 -0400] otterley: google is failing me
[2013-03-22 00:26:28 -0400] Majost1: is there a chmod provider?
[2013-03-22 00:26:57 -0400] Majost1: er chown rather
[2013-03-22 00:29:47 -0400] miah: file 'doof' do
[2013-03-22 00:29:51 -0400] miah: owner 'root'
[2013-03-22 00:29:51 -0400] miah: end
[2013-03-22 00:30:28 -0400] Majost1: Is it recursive?
[2013-03-22 00:31:29 -0400] ephess: the file resource works on a file, not directories so probably not
[2013-03-22 00:31:44 -0400] ephess: i think i saw a recursive on the directory resource, haven't used it though
[2013-03-22 00:31:53 -0400] miah: chef manages a resource
[2013-03-22 00:31:57 -0400] ephess: http://docs.opscode.com/resource_directory.html
[2013-03-22 00:32:01 -0400] miah: a list of files is not a single resource
[2013-03-22 00:32:14 -0400] miah: you can probably achieve what you're trying to do in a more logical way
[2013-03-22 00:33:02 -0400] ephess: looks like it doesn't work recursively for ownership/mode so you'll need to find another way to accomplish what you're trying to do
[2013-03-22 00:33:28 -0400] ephess: also see http://tickets.opscode.com/browse/CHEF-690 which might help with some background
[2013-03-22 01:38:28 -0400] w6fu: struggling with chef 11 still :-)
[2013-03-22 01:38:38 -0400] w6fu: seems client.pem is being created empty?
[2013-03-22 01:51:56 -0400] w6fu: i'm having so many weird issues, will check back in when people are online :)
[2013-03-22 04:04:49 -0400] basic`: i have an architecture question
[2013-03-22 04:05:02 -0400] basic`: i just installed simple_iptables, and want to add some recipes
[2013-03-22 04:05:22 -0400] basic`: should those recipes go in a new cookbook for firewall rules, or become additional recipes inside of the simple_iptables cookbook?
[2013-03-22 04:05:28 -0400] basic`: or does it not really matter
[2013-03-22 04:06:58 -0400] basic`: if they go in the new firewall cookbook, which is how I'm testing this, it seems that I need to include both the recipe[simple_iptables] and recipe[firewall] even though i have a depends for simple_iptables in the firewall metadata.rb.
[2013-03-22 04:07:44 -0400] discHead: Hi basic`
[2013-03-22 04:07:56 -0400] basic`: hi discHead
[2013-03-22 04:08:29 -0400] discHead: You can also have "include_recipe 'simple_iptables'" in your firewall recipe
[2013-03-22 04:08:54 -0400] discHead: I'd probably do it that way myself
[2013-03-22 04:08:58 -0400] basic`: great
[2013-03-22 04:09:18 -0400] discHead: Having "depends 'simple_iptables'" in your firewall cookbook's metadata is what will allow that to work
[2013-03-22 04:09:36 -0400] discHead: I'm kind of a rookie myself, so take that for what you will
[2013-03-22 04:09:52 -0400] basic`: i was reading about that command, wanted to make sure i was going in the right direction before committing to that :)
[2013-03-22 04:10:05 -0400] basic`: thanks for your input :)
[2013-03-22 04:10:40 -0400] discHead: You bet
[2013-03-22 04:38:06 -0400] z3uS: I have a question regarding https://github.com/realityforge/chef-authbind
[2013-03-22 04:38:11 -0400] z3uS: and am a total chef newb
[2013-03-22 04:38:26 -0400] z3uS: where do I define or put the authbind_port resource ?
[2013-03-22 04:38:30 -0400] z3uS: for say kibana on port 80
[2013-03-22 04:38:50 -0400] z3uS: seams the chef-logstash::kibana doesn't use authbind in the init.d script
[2013-03-22 04:38:56 -0400] z3uS: and it fails to start as the kibana user
[2013-03-22 04:39:36 -0400] z3uS: KIBANA_HOME=/opt/logstash/kibana/current USER=kibana  KIBANA_CMD="cd $KIBANA_HOME; authbind --deep bundle exec ruby kibana.rb $1"  case "$1" in start)   su - $USER -c "$KIBANA_CMD"   RETVAL=$? ;; KIBANA_HOME=/opt/logstash/kibana/current
[2013-03-22 04:39:37 -0400] z3uS: USER=kibana
[2013-03-22 04:39:37 -0400] z3uS: KIBANA_CMD="cd $KIBANA_HOME; authbind --deep bundle exec ruby kibana.rb $1"
[2013-03-22 04:39:37 -0400] z3uS: case "$1" in
[2013-03-22 04:39:38 -0400] z3uS: start)
[2013-03-22 04:39:40 -0400] z3uS:   su - $USER -c "$KIBANA_CMD"
[2013-03-22 04:39:41 -0400] z3uS:   RETVAL=$?
[2013-03-22 04:39:42 -0400] z3uS: ;;
[2013-03-22 04:39:43 -0400] z3uS: doesn't even work
[2013-03-22 04:39:49 -0400] z3uS: sorry for horrible paste
[2013-03-22 04:39:51 -0400] z3uS: shoot me now
[2013-03-22 04:40:18 -0400] z3uS: something with the su - $USER - c "$KIBANA_CMD" and that call not having a tty is causing it to not start even
[2013-03-22 04:40:28 -0400] basic`: z3uS: hmm, let me see
[2013-03-22 04:40:36 -0400] z3uS: if I manually run the "cd $KIBANA_HOME; authbind --deep bundle exec ruby kibana.rb start" as the kibana user
[2013-03-22 04:40:51 -0400] z3uS: after I've touched and chmod'ed /etc/authbind/byport/80 to kibana user
[2013-03-22 04:40:52 -0400] z3uS: it works
[2013-03-22 04:40:55 -0400] z3uS: but not via the init.d
[2013-03-22 04:40:58 -0400] z3uS: something tty related I think
[2013-03-22 04:41:11 -0400] z3uS: but besides that still want to know how to setup the resource for the authbind chef cookbook
[2013-03-22 04:41:15 -0400] z3uS: and total chef/ruby newb
[2013-03-22 04:41:34 -0400] basic`: z3uS: does your node have the recipe associated with it?
[2013-03-22 04:41:43 -0400] z3uS: authbind?
[2013-03-22 04:41:44 -0400] z3uS: yes
[2013-03-22 04:41:48 -0400] z3uS: its installing authbind
[2013-03-22 04:42:02 -0400] z3uS: I just need to know what .rb file to make to have it create the /etc/authbind/byport/80 file
[2013-03-22 04:42:15 -0400] z3uS: similiar to the glassfish example
[2013-03-22 04:42:17 -0400] basic`: z3uS: funny, i just had a similar question about simple_iptables
[2013-03-22 04:42:29 -0400] basic`: z3uS: what i did was create a firewall cookbook with knife
[2013-03-22 04:42:50 -0400] basic`: and depend on the simple_iptables cookbook, with an include_recipe 'simple_iptables' in my default.rb
[2013-03-22 04:43:21 -0400] basic`: you should be able to do the same for glassfish, and include the recipe for authbind there, along with the resources, in your default.rb
[2013-03-22 04:43:33 -0400] basic`: then include the glassfish recipe you create in your node
[2013-03-22 04:43:34 -0400] z3uS: you're missing my issue a bit
[2013-03-22 04:43:37 -0400] basic`: i think i am
[2013-03-22 04:43:38 -0400] z3uS: I have authbind installed
[2013-03-22 04:43:51 -0400] z3uS: the authbind cookbook itself has defined resources
[2013-03-22 04:43:56 -0400] z3uS: something like
[2013-03-22 04:43:57 -0400] z3uS: authbind_port "AuthBind Kibana Port 80" do
[2013-03-22 04:43:58 -0400] z3uS:     port 80
[2013-03-22 04:43:58 -0400] z3uS:     user 'kibana'
[2013-03-22 04:43:58 -0400] z3uS: end
[2013-03-22 04:44:01 -0400] z3uS: needs to go somewhere
[2013-03-22 04:44:04 -0400] z3uS: I just don't know where
[2013-03-22 04:44:04 -0400] z3uS: :)
[2013-03-22 04:44:25 -0400] basic`: z3uS: that's what i just described
[2013-03-22 04:44:39 -0400] basic`: create a new cookbook that includes the authbind cookbook, and define it inside of your new recipe
[2013-03-22 04:45:04 -0400] z3uS: have to create a whole cookbook to define a resource for another cookbook ?
[2013-03-22 04:45:13 -0400] basic`: or create a new recipe inside of the authbind cookbook for your specific thing.. though I'm not sure what is preferred method
[2013-03-22 04:45:24 -0400] z3uS: ahh
[2013-03-22 04:45:26 -0400] z3uS: thats what I was looking for
[2013-03-22 04:46:04 -0400] basic`: you should be able to do it either way, but I'm no expert (i'm helping because discHead just helped me with the same question)
[2013-03-22 04:46:10 -0400] z3uS: yeah I appreciate it
[2013-03-22 04:47:33 -0400] discHead: I would think of the authbind cookbook as if it were a third-party library
[2013-03-22 04:47:43 -0400] basic`: ya
[2013-03-22 04:47:47 -0400] z3uS: yeah I just want to hack this in to get it to start for now
[2013-03-22 04:47:58 -0400] z3uS: I'll do my internal cookbook after
[2013-03-22 04:48:01 -0400] basic`: so i already had a firewall cookbook that i used simple_iptables in
[2013-03-22 04:48:07 -0400] z3uS: so just dropping it in the default.rb for now
[2013-03-22 04:49:20 -0400] z3uS: sweet that worked
[2013-03-22 04:49:21 -0400] z3uS: :D
[2013-03-22 04:49:25 -0400] z3uS: ok time to start building a cookbook
[2013-03-22 04:49:28 -0400] z3uS: thank you!!!
[2013-03-22 04:49:39 -0400] basic`: you're welcome, good luck!
[2013-03-22 04:50:33 -0400] z3uS: well
[2013-03-22 04:50:37 -0400] z3uS: thats one problem down
[2013-03-22 04:52:00 -0400] z3uS: now to figure out why: su - $USER -c "cd $KIBANA_HOME && authbind --deep bundle exec kibana-daemon.rb start" doesn't work from inside the init.d script
[2013-03-22 04:52:32 -0400] z3uS: yet if I sudo su - kibana and then run "cd $KIBANA_HOME && authbind --deep bundle exec kibana-daemon.rb start"
[2013-03-22 04:52:36 -0400] z3uS: it starts fine
[2013-03-22 04:52:43 -0400] z3uS: 95% sure its a tty issue
[2013-03-22 04:54:23 -0400] basic`: not sure on that one
[2013-03-22 05:04:28 -0400] basic`: is there a cookbook that manages the chef-server?  I'm using the omnitruck rpm
[2013-03-22 05:13:38 -0400] mohits: basic`, https://github.com/opscode-cookbooks/chef-server
[2013-03-22 06:32:28 -0400] BryanWB: sup sup chefs!
[2013-03-22 06:45:38 -0400] sascha_d: ohai Roman man
[2013-03-22 06:45:55 -0400] sascha_d: what are you guys doing in Rome anyway? Just living the good life?
[2013-03-22 07:01:47 -0400] BryanWB: sascha_d, working for UN
[2013-03-22 07:22:05 -0400] kisoku: ohai
[2013-03-22 07:29:15 -0400] BryanWB: kisoku, ohai dude
[2013-03-22 07:32:35 -0400] spheromak: kisoku: /wave
[2013-03-22 07:53:16 -0400] Sgoettschkes: Good morning everyone
[2013-03-22 07:53:23 -0400] Sgoettschkes: I got another beginner question
[2013-03-22 07:53:44 -0400] Sgoettschkes: In my cookbook, I have a execute which has a not_if
[2013-03-22 07:54:15 -0400] Sgoettschkes: and I want to run another execute only if that first execute was not skipped
[2013-03-22 07:54:28 -0400] Sgoettschkes: Can I use notify?
[2013-03-22 08:01:40 -0400] kernel_panik: hey guys! Chef::Config[:file_cache_path]   will be cleaned automatically after chef-client running?
[2013-03-22 08:17:22 -0400] st0ne2thedge: join chef-hacking
[2013-03-22 08:17:32 -0400] st0ne2thedge: oro
[2013-03-22 09:05:06 -0400] st0ne2thedge: You guys know a nice HUD for chef nodes and maybe tests?
[2013-03-22 09:09:30 -0400] st0ne2thedge: I looked into chef dashboard but i didnt seem to like it
[2013-03-22 09:24:19 -0400] mikebb: hi folks, if your servers (node and server) are closely time synced, you are passing the -N arg when you bootstrap and your certs are identical (I've diffed them), what OTHER reasons can cause 401 (not auth) errors? I've tried everything, deleted and recreated validation pem (and copied back to w-station) several times. Its very frustrating, I've had days of it with nothing but some very high level errors? Any other ideas welcomed?
[2013-03-22 09:25:11 -0400] kisoku: anyone here using the newly revived jenkins cookbook ?
[2013-03-22 09:51:19 -0400] gokr: Feedback: Would be nice if "knife configure" had an option for the password. But I googled out that "echo blabla | knife ..." works too.
[2013-03-22 09:51:25 -0400] gokr: (chef 11)
[2013-03-22 09:54:22 -0400] st0ne2thedge: gokr: it's possible to pipe the password like that?
[2013-03-22 09:54:42 -0400] gokr: st0ne2thedge: Seems so, at least that is how the code in knife-server does it.
[2013-03-22 09:54:55 -0400] gokr: https://github.com/fnichol/knife-server/blob/master/lib/knife/server/credentials.rb
[2013-03-22 09:55:03 -0400] gokr: I am just about to test it out in my ... recipes.
[2013-03-22 09:57:56 -0400] gokr: st0ne2thedge: Seemed to work, but it complained that it has to be 6 characters :)
[2013-03-22 10:04:34 -0400] jmara: hey there, can anyone tell me how I prevent apt_repository to import a remote key on every chef-client run?
[2013-03-22 10:40:34 -0400] UukGoblin:  hey guys
[2013-03-22 10:42:23 -0400] UukGoblin: so I have a cookbook that's got a recipe that's in the runlists of maany nodes. Some nodes include the recipe directly, some include it via a role. There's at least 4 roles that include that recipe. I'd like to test out a new version of the recipe on just 1 dev box. Previously I did it by pinning the version of the cookbook on the affected nodes, bumping the version and just applying the new version to one node. But can I pin a coobook everywhere?
[2013-03-22 10:43:06 -0400] UukGoblin: also - how can I search for roles that contain a given recipe? "knife search role recipe:mycookbok\*" doesn't return anything
[2013-03-22 10:43:27 -0400] UukGoblin: (neither does "recipes:mycoobook\*")
[2013-03-22 10:54:13 -0400] gokul: Hello, I was trying to using the Chef::Provider::User with action: modify to change the password, but it is not changing it.
[2013-03-22 11:11:02 -0400] spheromak: kisoku: Im about a day or 2 away from givving the new version a shot. I still am using an old branch of the heavywater jenkins
[2013-03-22 11:13:41 -0400] chef099: any idea about how creat cookbook for restarting apache2 service on nodes
[2013-03-22 11:14:12 -0400] laurent\: on what conditions ?
[2013-03-22 11:16:08 -0400] chef099: my init script in all nods in /etc/init.d/apache2 ........i just wanted restart that services on all nodes at same time
[2013-03-22 11:21:48 -0400] chef099: i got error when try to install cookbook ERROR: Installing multiple cookbooks at once is not supported.
[2013-03-22 11:22:43 -0400] _JamieD_: hi all, I'm having trouble with the jetty recipe on ubuntu 12.04. It all installs fine apart from jetty is not starting on system boot. The jetty recipe has the service block with action [:enable, :start] which I believe should run something like "update-rc.d jetty defaults" on ubuntu. Can anyone provide any insight as to what is going on and how to debug the issue. I'm not particularly familiar with ubuntu's services at b
[2013-03-22 11:53:43 -0400] rb2k: hey. I've been looking around for a way to override the default php memory_limit on either the apache2::mod_php or the php cookbook
[2013-03-22 11:53:57 -0400] rb2k: not quite sure which one is responsible for /etc/php5/apache2/php.ini
[2013-03-22 11:54:03 -0400] rb2k: any hints? :)
[2013-03-22 11:57:15 -0400] cassianoleal: Anyone using Ridley to communicate with the API? I'm getting "undefined method `new' for Ridley:Module"
[2013-03-22 12:17:27 -0400] mikebb1: hi, can someone please check my understanding on bootstrapping - If I take the validation pem on my server (in /etc/chef), stick it on my workstation AND on the empty node I'm trying to bootstrap, then log into the node and run the suggested "sudo chef-client -l debug" and it fails with a 401 - am I mad, or should that work? name is the same chef-validator, time sync okay etc
[2013-03-22 12:23:06 -0400] Sgoettschkes: Hi, how do I check for a tag in a template?
[2013-03-22 12:23:30 -0400] Sgoettschkes: I guess my lack of knowledge about ruby makes this task complicated
[2013-03-22 12:25:33 -0400] Sgoettschkes: I would say variables( :test => tagged?("test") ) should work
[2013-03-22 12:31:49 -0400] botto: How do I check if a service exists?
[2013-03-22 12:32:17 -0400] botto: So when I do a notifies it does no throw an error
[2013-03-22 12:50:17 -0400] pgardella: Looking for some help.  I installed 11.0.6.1 using the omnibus installer, had some problems, so I uninstalled it using dpkg -r, and then removed the traces in /etc and /opt.  But now when I dpkg -i again, the admin.pem and chef-validator.pem are not created when I chef-server-ctl reconfigure.  Is there a way to regenerate it?
[2013-03-22 12:55:15 -0400] pgardella: Figured the problem out.  I needed to chef-server-ctl cleanse and then chef-server-ctl reconfigure to recreate the admin.pem and chef-validator.pem files.
[2013-03-22 13:01:36 -0400] tallgreentree: Hi All - new Chef user here, long time Ruby dev.
[2013-03-22 13:01:53 -0400] timops: hey @tallgreentree! :D
[2013-03-22 13:01:55 -0400] tallgreentree: question: how do I make resources from one cookbook available in another?
[2013-03-22 13:02:02 -0400] tallgreentree: hey timops
[2013-03-22 13:02:29 -0400] timops: it's really as simple as adding to the metadata.rb
[2013-03-22 13:02:31 -0400] timops: depends 'cookbook'
[2013-03-22 13:02:31 -0400] tallgreentree: I've added the first cookbook as a dependency of the second, but the resources aren't available in a recipe
[2013-03-22 13:02:38 -0400] timops: then you can start using LWRP's inside of another cookbook
[2013-03-22 13:02:41 -0400] timops: is that what you're trying to do?
[2013-03-22 13:02:58 -0400] timops: if you want to include a recipe from another cookbook, you'll want to keep that depends line, but also..
[2013-03-22 13:03:04 -0400] timops: include_recipe 'cookbook::recipe'
[2013-03-22 13:03:26 -0400] tallgreentree: I'm using the opscode "database" cookbook, and I'd like to use the postgresql_user resource, but it's giving me a NameError
[2013-03-22 13:03:30 -0400] timops: ok
[2013-03-22 13:03:35 -0400] timops: so use my first recommendation
[2013-03-22 13:03:41 -0400] timops: open up that metadata.rb, and add a depends line
[2013-03-22 13:03:46 -0400] timops: let me find an example from the docs for you
[2013-03-22 13:03:48 -0400] tallgreentree: metadata.rb: depends "database"
[2013-03-22 13:03:52 -0400] tallgreentree: already there
[2013-03-22 13:03:59 -0400] timops: http://docs.opscode.com/config_rb_metadata.html
[2013-03-22 13:04:03 -0400] timops: check out the depends line
[2013-03-22 13:04:32 -0400] tallgreentree: hmm...that's what I thought.
[2013-03-22 13:04:34 -0400] timops: yep! you might want to put a version constraint on it too
[2013-03-22 13:04:41 -0400] timops: did you already try it?  doesn't work?
[2013-03-22 13:05:00 -0400] tallgreentree: I haven't tried it with the version constraint yet - let me give that  a go and see if it does anything
[2013-03-22 13:05:06 -0400] timops: ok
[2013-03-22 13:05:11 -0400] timops: let me know.. i'll be around
[2013-03-22 13:05:16 -0400] tallgreentree: thanks timops!
[2013-03-22 13:05:20 -0400] timops: np!
[2013-03-22 13:18:21 -0400] j-v-e: howdy chef
[2013-03-22 13:20:13 -0400] j-v-e: We're having serious issues with chef searches. it seems that `chef_environment` in searches anymore
[2013-03-22 13:20:16 -0400] j-v-e: see https://gist.github.com/jvehent/5221185
[2013-03-22 13:20:50 -0400] j-v-e: The Chef Server is running 10.20, and the node is running 10.16.2
[2013-03-22 13:21:10 -0400] j-v-e: Did something change with the way chef_environment attributes should be used in searches ?
[2013-03-22 13:25:01 -0400] tallgreentree: Thanks for the help @timops - turns out it was just a typo, and I was looking in the wrong place. Problem resolved.
[2013-03-22 13:25:19 -0400] timops: @tallgreentree awesome! glad to hear you're doing alright now
[2013-03-22 13:27:40 -0400] timops: @j-v-e hmm.. can you see that the nodes in question are actually in the environment?
[2013-03-22 13:27:46 -0400] timops: through the webui or using knife?
[2013-03-22 13:30:31 -0400] timops: @j-v-e looks like you used chef-shell to show it isn't actually assigned to any environment?
[2013-03-22 13:31:26 -0400] j-v-e: timops: yeah, the second block in the gist shows that the target of the search, keymaster.local.vm, is in the vagrant environment
[2013-03-22 13:31:51 -0400] j-v-e: I've recreated my environment multiple times, with fresh chef servers and nodes
[2013-03-22 13:32:12 -0400] j-v-e: and some of my coworkers have had the same issue... using chef_environment in the search returns empty results
[2013-03-22 13:32:41 -0400] timops: chef > print node.chef_environment
[2013-03-22 13:32:41 -0400] timops: vagrant => nil
[2013-03-22 13:32:45 -0400] timops: it doesn't have an environment though?
[2013-03-22 13:34:34 -0400] spox: yeah, is something setting it some where? perhaps in a recipe?
[2013-03-22 13:35:10 -0400] timops: i suspect you're setting it via the Vagrantfile, but i can't see that
[2013-03-22 13:36:15 -0400] j-v-e: timops: https://gist.github.com/jvehent/5221185
[2013-03-22 13:36:21 -0400] spox: i guess the output is throwing me. i dunno if shef output has changed, but generally node.chef_environment will spit you out a string
[2013-03-22 13:36:34 -0400] spox: i'm not sure what to make of the 'vagrant => nil'
[2013-03-22 13:37:21 -0400] spox: j-v-e: 10 or 11?
[2013-03-22 13:37:24 -0400] j-v-e: We set the chef_environment via vagrant
[2013-03-22 13:37:26 -0400] j-v-e: spox: 10
[2013-03-22 13:37:31 -0400] j-v-e: 10.20 on the server
[2013-03-22 13:37:33 -0400] spox: how is it set in the vagant file?
[2013-03-22 13:37:50 -0400] timops: @j-v-e what happens when you do a "knife search node 'chef_environment:<whatever>'"
[2013-03-22 13:38:33 -0400] j-v-e: spox: https://gist.github.com/jvehent/5221185#comment-803489
[2013-03-22 13:40:27 -0400] j-v-e: timops: I only get one: https://gist.github.com/jvehent/5221185#comment-803491 the keymaster VM doesn't show up
[2013-03-22 13:40:48 -0400] makerbreakr: how do you guys do client facing, and internal documentation?
[2013-03-22 13:41:21 -0400] timops: hmm.. did you rebuild the indexes to see if that helps?
[2013-03-22 13:41:26 -0400] makerbreakr: I want to put up a site that clients can look at to see an overview of our systems, but I also want to password protect some areas for internal use only;  I wish octopress did it, but that seems like its too crazy
[2013-03-22 13:42:06 -0400] timops: @j-v-e http://docs.opscode.com/knife_index_rebuild.html
[2013-03-22 13:44:45 -0400] j-v-e: timops: the index rebuild is done, but the result is the same :( https://gist.github.com/jvehent/5221185#comment-803495
[2013-03-22 13:45:34 -0400] timops: hmm.. it has to be an issue with the index, because knife is showing that the machine is in that environment
[2013-03-22 13:45:42 -0400] timops: i wonder if there's a ticket open for this.. i can look around
[2013-03-22 13:48:14 -0400] j-v-e: Funny thing is: our production one doesn't have the issue
[2013-03-22 13:48:40 -0400] j-v-e: and it's running 10.20 as well
[2013-03-22 13:57:38 -0400] MattStratton: kind of stupid question (i'm a n00b) - let's say I add recipes to a community cookbook that I installed - is that appropriate or should I be putting my own extra stuff in my own cookbooks?
[2013-03-22 13:58:02 -0400] MattStratton: for example - is it smart to add recipes to the windows cookbook? or will I get screwed later if there are updates to that cookbook? will my recipes get blown away?
[2013-03-22 13:58:55 -0400] j-v-e: timops: thanks for looking into it. I will reprovision my environment with more CPUs to the chef server, maybe that will help
[2013-03-22 13:59:11 -0400] timops: i'll keep looking, just got caught on a phone call.. sorry :(
[2013-03-22 13:59:54 -0400] j-v-e: MattStratton: what we do, when we add custom stuff to a community cookbook, is create a wrapper cookbook that add the features and call the community cookbook
[2013-03-22 14:00:11 -0400] j-v-e: that way, you can keep updating the community cookbook from upstream and have your custom features in it
[2013-03-22 14:00:17 -0400] MattStratton: yeah. that's what I was thinking/planning to do
[2013-03-22 14:00:58 -0400] MattStratton: so maybe in this case create a cookbook called windows-apts and that is where i do my windows stuff, but we call the windows cookbook
[2013-03-22 14:03:39 -0400] tshauck: Hi... what is a good strategy for automatically cloning an program to an EC2 instance and running it?  I've looked at the scm resource, but I'm not sure if that's the best way to do it... I'm fairly new. Thanks.
[2013-03-22 14:15:39 -0400] Wildahunden_: I have a function that calls the subversion resource.  When I first created the function I was able to debug it and get it working.  Now, I'm calling it from a different recipe.  The function runs and completes w/o errors but it's as if the subversion resource never runs.  What could I look at to try to debug this?
[2013-03-22 14:21:31 -0400] j-v-e: timops: interestingly enough, I reprovision the chef server VM with 4 CPUs instead of one, and my search resolves correctly now
[2013-03-22 14:22:03 -0400] timops: hm that is really weird
[2013-03-22 14:22:15 -0400] timops: i don't have an answer for you on that one :)
[2013-03-22 14:25:30 -0400] j-v-e: chef 10 has too many moving pieces to run everything on 1 cpu, is my answer :)
[2013-03-22 14:25:37 -0400] j-v-e: it fails in a weird way though
[2013-03-22 14:32:29 -0400] SteveM_: I've installed nagios through chef and had it up and working.  We decided to go with nginx instead of apache, so since I installed it on a cloud node, I simply wiped the node and re-chef'd it with nagios configured for nginx instead.  Several things are broken now that were not broken before:  htauth doesn't work properly and all the left side links in the web console 404.  Any thoughts?
[2013-03-22 14:33:53 -0400] concertman: SteveM_: does your nginx error log give you any info?
[2013-03-22 14:36:03 -0400] SteveM_: it says the files are missing -- and its right
[2013-03-22 14:36:32 -0400] SteveM_: [error] 26082#0: *25 open() "/usr/share/nagios3/htdocs/cgi-bin/nagios3/status.cgi" failed (2: No such file or directory)
[2013-03-22 14:37:58 -0400] bugoff_: SteveM_: the cgi-bin dir should be linked to /usr/lib/cgi-/bin/nagios3 i think
[2013-03-22 14:39:01 -0400] bugoff_: in apache there should be a alias /cgi-bin /usr/lib/cgi-bin/nagios3
[2013-03-22 14:40:57 -0400] SteveM_: there is no location /cgi-bin in the nginx config file
[2013-03-22 14:45:35 -0400] SteveM_: I can manually add that to the config, but that will get defeated when chef-client runs again... is there a proper way to enable nginx in the nagios recipe?
[2013-03-22 14:45:45 -0400] dsimon: hey all, i was wondering about something
[2013-03-22 14:45:57 -0400] dsimon: what happens if two different recipes both claim the same target file on the node?
[2013-03-22 14:46:40 -0400] dsimon: i.e. both have a line like: file "/etc/some/important/config" do blah end
[2013-03-22 14:49:32 -0400] mikebb: does anyone know how to make ec2-based nodes have a nice node name AFTER creation - is it as simple as editing the client.rb?
[2013-03-22 14:50:39 -0400] nlloyds: mikebb: IIRC it's not possible (or at least not easy) to change a node name
[2013-03-22 14:51:12 -0400] nlloyds: mikebb: You can change the host name, or you can specify a node name when it's created
[2013-03-22 14:57:45 -0400] wildahunden__: dsimon: I think it depends on your action.  The default will create the file if it's different. If the action is :create_if_missing then it will check to see if it's there and only create the file if it's not already there.
[2013-03-22 14:58:26 -0400] dsimon: wildahunden__, supposing that they both use the default action, then does the latter "file" call take precedence?
[2013-03-22 14:58:44 -0400] dsimon: basically, if i run both recipes on the same node, which one determines what the file will actually look like?
[2013-03-22 14:58:56 -0400] mikebb: nlloyds: thanks very much, re-creation sounds easier...
[2013-03-22 14:58:58 -0400] spox: dsimon: the last one
[2013-03-22 14:59:03 -0400] wildahunden__: dsimon: My understanding is that the last one wins
[2013-03-22 14:59:06 -0400] dsimon: okay, cool
[2013-03-22 14:59:13 -0400] spox: but that's not a good thing
[2013-03-22 14:59:16 -0400] dsimon: is that an appropriate way to override config files?
[2013-03-22 15:00:19 -0400] wildahunden__: dsimon: it's difficult to debug when two recipes stomp on each other.  Better to check why the two recipes are conflicting and try to resolve the conflict (if possible).
[2013-03-22 15:00:38 -0400] spox: dsimon: generally you want to use attribute to setup/configure configuration files
[2013-03-22 15:00:47 -0400] dsimon: okay, that makes sense
[2013-03-22 15:00:53 -0400] dsimon: let me back up then and explain what i'm trying to accomplish
[2013-03-22 15:01:06 -0400] spox: if the cookbook you are using doesn't provide the configuration via attributes for what you want, fork, fix and PR :)
[2013-03-22 15:01:31 -0400] spox: but if you have two resources attempting to manage the same file, they will constantly be overwriting each other ever run
[2013-03-22 15:01:36 -0400] dsimon: ah, ok
[2013-03-22 15:01:39 -0400] spox: every*
[2013-03-22 15:01:44 -0400] dsimon: well, i'm using a community haproxy cookbook
[2013-03-22 15:02:02 -0400] dsimon: but my haproxy configuration is really unusual
[2013-03-22 15:02:48 -0400] dsimon: i don't know that the structure of my haproxy.cfg belongs in the haproxy cookbook, it's rather specific to my app
[2013-03-22 15:03:30 -0400] nlloyds: Anybody having problems with missing cookbooks on chef server 11? I have a cookbook that's there when I knife cookbook show, but on a chef run it says they are missing
[2013-03-22 15:03:46 -0400] dsimon: i believe i can just override the template using site-cookbooks...
[2013-03-22 15:04:28 -0400] dsimon: but that would be rather system wide, which isn't appropriate for this role-specific configuration
[2013-03-22 15:04:30 -0400] spox: nlloyds: do you have environment imposed cookbook version restrictions in place?
[2013-03-22 15:05:23 -0400] nlloyds: spox: huh, looks like I do. I don't remember putting them there though :)
[2013-03-22 15:05:36 -0400] spox: dsimon: maybe you don't really need the cookbook then
[2013-03-22 15:05:51 -0400] spox: or, the recipes for haproxy configuration specifically
[2013-03-22 15:05:56 -0400] dsimon: hm, yeah
[2013-03-22 15:06:04 -0400] spox: just have a recipe of your own include the install recipe required
[2013-03-22 15:06:10 -0400] dsimon: i mostly use that cookbook for its recipe that installs from source
[2013-03-22 15:06:11 -0400] nlloyds: spx: actually I didn't put them there, and there not in the ruby file. Does it lock them automatically somehow?
[2013-03-22 15:06:12 -0400] dsimon: yeah, exactly
[2013-03-22 15:06:13 -0400] dsimon: hm
[2013-03-22 15:06:22 -0400] dsimon: so one thing that would be un-DRY there though
[2013-03-22 15:06:26 -0400] spox: and just write your template and service('haproxy'){ action [:enable, :start]}
[2013-03-22 15:06:33 -0400] dsimon: is that the default recipe in the haproxy cookbook sets up the service
[2013-03-22 15:06:40 -0400] dsimon: is that best practice?
[2013-03-22 15:06:56 -0400] dsimon: i'd basically just be copying&pasting the service section, which makes me itch :-)
[2013-03-22 15:07:11 -0400] spox: dsimon: i generally use wrapper cookbooks around upstreams that i want to do things differently
[2013-03-22 15:07:31 -0400] spox: dsimon: but i usually use them in tandem with a pull request on the upstream cookbook to support the functionality that i want
[2013-03-22 15:07:39 -0400] spox: so that my wrapper can then go away :)
[2013-03-22 15:07:49 -0400] dsimon: wrapper cookbook, eh? let me google that :-)
[2013-03-22 15:08:04 -0400] spox: you could just modify the template resource, but it's a bit, hacky
[2013-03-22 15:08:05 -0400] spox: :)
[2013-03-22 15:08:50 -0400] nlloyds: spox: thanks that fixed it!
[2013-03-22 15:08:57 -0400] spox: nlloyds: sure ;)
[2013-03-22 15:10:04 -0400] nlloyds: Much hugs to everyone who put together the chef server 11 omnibus install. I never thought the easiest thing I did yesterday would be install chef server.
[2013-03-22 15:10:41 -0400] pikesley: Isn't it awesome?
[2013-03-22 15:11:11 -0400] dsimon: hm
[2013-03-22 15:11:15 -0400] w6fu: has anyone gotten chef-server 11 installed on a squeeze box successfully?
[2013-03-22 15:11:24 -0400] dsimon: anyone else here using littlechef? i'm interested in avoiding having to install a chef-server
[2013-03-22 15:11:49 -0400] dsimon: what i'm getting at is, is the prevailing community opinion on little chef thumbs up or down?
[2013-03-22 15:13:29 -0400] queso: I'm having a problem bootstrapping a node. The error is: "The server returned a HTTP 404. This usually indicates that your chef_server_url is incorrect." Interestingly, I've bootstrapped another machine and it worked. My chef_server_url is https://chefserver.example.com:443  Any ideas?
[2013-03-22 15:14:21 -0400] freezey: can the node your trying to bootstrap telnet to 443 on your chef server?
[2013-03-22 15:15:01 -0400] queso: freezey: yes
[2013-03-22 15:20:21 -0400] freezey: queso: run the client in debug
[2013-03-22 15:20:23 -0400] freezey: see whats happening
[2013-03-22 15:20:32 -0400] queso: freezey: How do I do that?
[2013-03-22 15:20:43 -0400] timops: chef-client -ldebug
[2013-03-22 15:20:47 -0400] freezey: yep
[2013-03-22 15:20:54 -0400] queso: freezey, timops: Thanks
[2013-03-22 15:21:00 -0400] timops: np!
[2013-03-22 15:25:34 -0400] queso: It's POSTing to chefserver.example.com:443/clients and getting a 404 not found.
[2013-03-22 15:26:14 -0400] spox: queso: that should be expected on a bootstrap
[2013-03-22 15:26:28 -0400] spox: since the client doesn't exist yet, it shouldn't find it when requesting
[2013-03-22 15:26:47 -0400] spox: oh, post, hur dur
[2013-03-22 15:26:48 -0400] spox: sorry
[2013-03-22 15:26:55 -0400] freezey: quick question
[2013-03-22 15:27:07 -0400] freezey: so why are you doing https://chef.server.com:443?
[2013-03-22 15:27:39 -0400] queso: freezey: What should it be?  That's the only way I got it to work previously. I thought it was fishy.
[2013-03-22 15:28:23 -0400] freezey: i mean it can be anything you wan it to be
[2013-03-22 15:28:24 -0400] freezey: lol
[2013-03-22 15:28:40 -0400] freezey: it should be
[2013-03-22 15:28:44 -0400] freezey: chef.server.com:4000
[2013-03-22 15:28:47 -0400] freezey: because thats the api
[2013-03-22 15:28:51 -0400] queso: freezey: I don't know why the port has to be specified if it says https
[2013-03-22 15:28:52 -0400] freezey: so i have no idea what your doing over there
[2013-03-22 15:29:12 -0400] freezey: i mean you can do it anyway you want
[2013-03-22 15:29:12 -0400] freezey: but
[2013-03-22 15:29:13 -0400] queso: Chef 11 uses port 4000?
[2013-03-22 15:29:20 -0400] freezey: oh i am 10.6.6
[2013-03-22 15:29:35 -0400] queso: I just have a clean, vanilla, nothing special chef 11 install.
[2013-03-22 15:29:47 -0400] queso: Specifying the URL like that was the only way I could get it to work.
[2013-03-22 15:29:47 -0400] freezey: https://engineering.emcien.com/2013/02/2-upgrading-from-chef-10-to-chef-11
[2013-03-22 15:29:59 -0400] mikebb: queso: you can 443 on apache and terminate ssl then reverese proxy to chef-server if you want
[2013-03-22 15:30:15 -0400] freezey: i dont know if you have to specify the port
[2013-03-22 15:30:22 -0400] freezey: i havent used 11 so i wont comment any longer
[2013-03-22 15:30:25 -0400] queso: mikebb: I just want a basic, simple install.
[2013-03-22 15:30:51 -0400] mikebb: yeah, you want 4000 over HTTP which is out-the-box install
[2013-03-22 15:31:17 -0400] mikebb: port is specified on the end of the chef server url in server.rb (on the server)
[2013-03-22 15:31:24 -0400] mikebb: and client.rb on your clients
[2013-03-22 15:31:30 -0400] queso: mikebb: So  http://chefserver.example.com:4000  ?
[2013-03-22 15:31:37 -0400] mikebb: aye, thats it!
[2013-03-22 15:34:06 -0400] queso: Connection timed out this time, nothing on port 4000
[2013-03-22 15:34:14 -0400] queso: Maybe the firewall.
[2013-03-22 15:36:14 -0400] mikebb: queso is this cloud infrastructure?
[2013-03-22 15:36:23 -0400] queso: mikebb: Self-hosting.
[2013-03-22 15:37:08 -0400] mikebb: yeah, check iptables and be sure chef-server, couch, rabbit and solr are all running.
[2013-03-22 15:37:34 -0400] queso: mikebb: Thanks. I have to change gears now, unfortunately, but will back to this later.
[2013-03-22 15:37:39 -0400] mikebb: also, in server.rb, switch log level to debug
[2013-03-22 15:37:49 -0400] mikebb: np
[2013-03-22 15:38:04 -0400] queso: mikebb: Ah, thanks for the tip!
[2013-03-22 15:40:42 -0400] leehambley: what's the best way to package recipes for chef solo runs? is it still librarian ?
[2013-03-22 15:45:11 -0400] scalp42: queso: #> netstat -nlp | grep 4000 and check if you see anything listening to be sure
[2013-03-22 15:47:23 -0400] xerxas: Hi all
[2013-03-22 15:47:57 -0400] xerxas: I'm creating a user, and then using node[:etc][:passwd][@user][:dir] , this works on 2 run, but not in the same run
[2013-03-22 15:48:11 -0400] xerxas: because the user resource (with useradd provider), doesn't reload ohai
[2013-03-22 15:48:14 -0400] xerxas: is this a bug ?
[2013-03-22 15:48:41 -0400] xerxas: I can surely add to me recipe an ohai reload, but I think it's not normal
[2013-03-22 15:53:47 -0400] serjs: someone have problems with setting custom gid while creating group using native group resources? i testing simple group creataion, and got incremental gid instead of my custom set gid in recipe
[2013-03-22 15:54:56 -0400] ckelly: anyone run into a situation where chef ignores a version specific for a package?
[2013-03-22 15:54:58 -0400] ckelly: http://pastebin.com/9yYVQ66N
[2013-03-22 15:55:45 -0400] ckelly: Or does the upgrade action ignore the version?
[2013-03-22 15:56:21 -0400] mattt: my ruby is a bit rusty, how do you see if the current node is present in a search result ?
[2013-03-22 15:57:47 -0400] ckelly: yeah i figured it out, upgrade will always upgrade to the latest version even if a version is specified. Which I suppose to chefs credit its doing exactly what the docs say. Install will either install the specified version, or upgrade to the specified version if needed
[2013-03-22 15:58:10 -0400] magoo_: am I crazy or does 11.4 have a massively improved log output?
[2013-03-22 15:58:31 -0400] pikesley: it does seem to log ALL THE THINGS, yes
[2013-03-22 15:59:10 -0400] magoo_: i like it though
[2013-03-22 15:59:21 -0400] magoo_: looks less like a stack trace
[2013-03-22 16:04:40 -0400] Aaiiit: I think i'm getting retarded.  Learning Chef.  I want to use the users cookbooks, but I don't understand how I add the list of users that I want to add.  I've got to make a data bag I guess, but how do I make the users cookbook retrieve the databag?
[2013-03-22 16:05:52 -0400] magoo_: it automatically does so
[2013-03-22 16:06:14 -0400] magoo_: just include the cookbook and have the users database in place
[2013-03-22 16:06:15 -0400] redelectric: Aaiiit, I'm still pretty new myself, but my understanding is that the databag will be merged by chef at run time.  Make a default list (maybe empty list?) and then your databag can override the default list.
[2013-03-22 16:06:45 -0400] magoo_: s/database/databag/
[2013-03-22 16:06:54 -0400] nlloyds: Aaiiit: The users_manage resource in the users cookbook does a search in the users (by default, you can change this) data bag and iterates through each of them. See https://github.com/opscode-cookbooks/users/blob/master/providers/manage.rb#L56-L143
[2013-03-22 16:09:17 -0400] Aaiiit: ok, thanks ... I guess my chef server does not return the data_bag by search?   in my chef-repo i have data_bags/users/tom.json , so it should find it?
[2013-03-22 16:10:05 -0400] magoo_: knife data bag create users
[2013-03-22 16:10:22 -0400] magoo_: knife data bag from file users path_to_json_file
[2013-03-22 16:10:58 -0400] Aaiiit: @magoo_ : yep, that's how i did it
[2013-03-22 16:11:05 -0400] magoo_: oh, i see
[2013-03-22 16:11:21 -0400] magoo_: i was under the impression you might not have created the data bag
[2013-03-22 16:11:31 -0400] magoo_: 1 sec, I'll check my own implementation
[2013-03-22 16:12:05 -0400] nlloyds: Aalit can you see them when you do knife data bag show users?
[2013-03-22 16:12:15 -0400] Aaiiit: yep
[2013-03-22 16:12:29 -0400] Aaiiit: action:   create groups:   admin id:       tom ssh_keys:
[2013-03-22 16:12:35 -0400] magoo_: nlloyds: comment about users_manager is also important
[2013-03-22 16:16:22 -0400] Aaiiit: ok, i've put the chef.log_level to :debug, let's see how it goes now
[2013-03-22 16:20:01 -0400] magoo_: Aaiiit: chef console is also extremely handy
[2013-03-22 16:20:06 -0400] magoo_: aka shef
[2013-03-22 16:20:30 -0400] magoo_: that might be a bit more than you want to bite off though
[2013-03-22 16:20:30 -0400] Aaiiit: @magoo_ : ok, sounds handy
[2013-03-22 16:20:37 -0400] CharlieSu: Could anyone help me figure out why I can't get chef-solr started?  Yes I'm running an older version of Chef server, but I'm going to be upgrading soon.  https://gist.github.com/CharlieSu/bb17f8fe5f902be23cd5
[2013-03-22 16:22:25 -0400] Aaiiit: @magoo_ : yeah, it's something with my server ... it keeps trying and it fails after 5 times : Server returned error for my-ip:4000/search/users? ....
[2013-03-22 16:24:21 -0400] magoo_: can you do knife show data bags?
[2013-03-22 16:25:11 -0400] Aaiiit: @magoo_ : no, but i can do knife data bag show users tom
[2013-03-22 16:25:25 -0400] magoo_: yeah, i screwed that command way up
[2013-03-22 16:25:56 -0400] magoo_: can you paste your entry for tom? (with redactions of course)
[2013-03-22 16:26:10 -0400] magoo_: pastebin i mean
[2013-03-22 16:27:27 -0400] Aaiiit: @magoo_ : https://gist.github.com/aaiiit/5222685
[2013-03-22 16:30:21 -0400] magoo_: so action: create shouldn't be in there
[2013-03-22 16:30:42 -0400] w6fu: can anyone tell me what may be happening that would cause client.pem to be created empty?
[2013-03-22 16:31:16 -0400] magoo_: you should have action [ :remove, :create] when you call the users_manager resource
[2013-03-22 16:32:03 -0400] Aaiiit: @magoo_ : ok, removed it ... now I have to do knife data bag from file users <path> again?
[2013-03-22 16:32:15 -0400] magoo_: i think you're going to need to assign a uid as well
[2013-03-22 16:32:19 -0400] magoo_: and yes
[2013-03-22 16:33:11 -0400] Aaiiit: @magoo_ : do you have some example code somewhere public?
[2013-03-22 16:33:21 -0400] magoo_: http://community.opscode.com/cookbooks/users
[2013-03-22 16:33:26 -0400] magoo_: i used this to build mine
[2013-03-22 16:33:51 -0400] magoo_: the johndoe1 example is exactly as i configured my users
[2013-03-22 16:36:01 -0400] Aaiiit: @magoo_ : yeah i followed that,  but the fact that my server returned an error is probably not a good sign
[2013-03-22 16:37:27 -0400] Aaiiit: @magoo_ : thanks anyway I'll try it all again ... maybe some old test code is giving me troubles
[2013-03-22 16:48:49 -0400] autif: Is it just me or does this page does not look right? http://www.opscode.com/blog/2011/04/21/chef-0-10-preview-environments/
[2013-03-22 16:49:25 -0400] addisonj: autif: it doesn't, I think they moved blogs and it broke formatting on old posts
[2013-03-22 16:49:26 -0400] autif: the code is in html - not very readable
[2013-03-22 16:49:31 -0400] autif: got it
[2013-03-22 16:50:07 -0400] autif: do I need to report anything or one of the admins can take care of it from here?
[2013-03-22 17:01:25 -0400] SteveM_:  I've installed nagios through chef and had it up and working.  We decided to go with nginx instead of apache, so since I installed it on a cloud node, I simply wiped the node and re-chef'd it with nagios configured for nginx instead.  Several things are broken now that were not broken before:  htauth doesn't work properly and all the left side links in the web console 404.  There is no /cgi-bin in the nginx config, Any thoughts?
[2013-03-22 17:04:22 -0400] magoo_: SteveM_: i had a similar experience and just went with apache
[2013-03-22 17:04:44 -0400] magoo_: i'm more of an nginx guy but i figure if chef is managing it, there's no harm
[2013-03-22 17:05:08 -0400] SteveM_: magoo_: thanks... I was wondering if the recipe was borked or if I missed something
[2013-03-22 17:06:08 -0400] magoo_: np, yeah, mine from broke from the start with a base config. I think it's safe to assume there's an issue
[2013-03-22 17:14:25 -0400] doomviking: yawn
[2013-03-22 17:15:37 -0400] Urocyon: oops, just tried to bootstrap a new client with 11.4 and got an ImmutableAttributeModification from the chef-client cookbook.  :-(
[2013-03-22 17:25:55 -0400] phantasm66: Howdy, i am using Chef: 10.24.0. I cannot figure out how to push custom attributes to a node via knife.
[2013-03-22 17:26:27 -0400] phantasm66: i have checked the knife command help, but cannot immediately see a way to do this
[2013-03-22 17:26:35 -0400] phantasm66: is this possible?
[2013-03-22 17:27:15 -0400] spox: i don't know that you can "push" custom attributes, but you can edit the node and make changes
[2013-03-22 17:30:10 -0400] phantasm66: knife node edit <node name> will allow me to do that, yeah.. i am hoping i can do the equivalent, programatically
[2013-03-22 17:30:42 -0400] phantasm66: instead of having to open an editor, etc.. then make the changes
[2013-03-22 17:31:00 -0400] magoo_: phantasm66: you can show -l the node and choose json as the output
[2013-03-22 17:31:46 -0400] magoo_: then you could probably parse the text and programatically make your insertion
[2013-03-22 17:31:54 -0400] magoo_: knife node from file, etc
[2013-03-22 17:32:13 -0400] phantasm66: magoo_: interesting...
[2013-03-22 17:32:22 -0400] phantasm66: ok, i will explore that a bit
[2013-03-22 17:33:01 -0400] magoo_: maybe there's a more graceful solution out there. this task aches for a plugin
[2013-03-22 17:49:21 -0400] j^2: so i'd like to publish my cookbook to the community site, i have it on git hub, how do i get it listed?
[2013-03-22 17:49:29 -0400] j^2: https://github.com/jjasghar/riemann
[2013-03-22 17:49:51 -0400] j^2: it seems that "add a cookbook" needs a tarball?
[2013-03-22 17:55:01 -0400] cassianoleal: hey dudes I'm trying to upgrade a chef 10 server to 11 using this guide: http://www.opscode.com/blog/2013/03/12/5106/ but I'm getting a strange error
[2013-03-22 17:55:36 -0400] cassianoleal: when I issue the " knife download ", it downloads the clients just fine, but when it starts downloading the cookbooks i get "ERROR: Errno::EACCES: Permission denied - /var/chef/cookbooks"
[2013-03-22 17:55:42 -0400] cassianoleal: has anyone seen that?
[2013-03-22 17:56:13 -0400] jmickle: cassianoleal: whats your chef-server logs look like? any errors in there?
[2013-03-22 17:57:12 -0400] markcornick: cassianoleal: I saw that too. Solved it by making a temporary link from /var/chef to the transfer_repo directory
[2013-03-22 17:57:58 -0400] markcornick: The better fix is probably something in knife.rb, but I was impatient. :D
[2013-03-22 17:58:06 -0400] cassianoleal: markcornick: so it's knife trying to create the cookbook files under /var/chef?
[2013-03-22 17:58:13 -0400] markcornick: Yes, AFAICT.
[2013-03-22 17:58:19 -0400] cassianoleal: jmickle: nothing strange in the server logs
[2013-03-22 17:59:05 -0400] markcornick: Someone who knows knife-essentials better probably has the proper way to fix this, but after I did that everything went well.
[2013-03-22 17:59:19 -0400] markcornick: And you can remove the link after you're done w/ the migration.
[2013-03-22 17:59:42 -0400] cassianoleal: markcornick: yep, it's only during the upgrade, so I might take this route
[2013-03-22 18:00:13 -0400] markcornick: Here's a few other notes I took (although not this one) http://cl.ly/NlDf
[2013-03-22 18:00:15 -0400] jkeiser: markcornick: eep.  Yeah, add cookbook_path nil to your knife.rb
[2013-03-22 18:00:35 -0400] jkeiser: Do you have cookbook_path in your knife.rb?
[2013-03-22 18:00:49 -0400] jkeiser: That's just weird, should have happened when I did it too
[2013-03-22 18:00:52 -0400] cassianoleal: I don't, actually
[2013-03-22 18:00:59 -0400] markcornick: I might have, when I was doing the migration.
[2013-03-22 18:01:05 -0400] cassianoleal: my the file is a copy-paste from the guide
[2013-03-22 18:01:17 -0400] cassianoleal: the only change I made was the chef_server_url
[2013-03-22 18:01:22 -0400] magoo_: try specifying the path on the cmd line
[2013-03-22 18:01:32 -0400] w6fu: after 2 days of trying to get chef-server 11 working on debian I'm just going to say it flat out doesn't work.
[2013-03-22 18:01:47 -0400] jkeiser: Try setting cookbook_path nil in knife.rb, I bet that will work
[2013-03-22 18:02:12 -0400] jkeiser: I'll look through it to see why it's happening in some places but not others
[2013-03-22 18:02:42 -0400] jkeiser: What you did will work too, of course.  I'd love to get the guide fixed though
[2013-03-22 18:03:19 -0400] cassianoleal: jkeiser: "cookbook_path nil" works! tx! :)
[2013-03-22 18:03:44 -0400] jkeiser: I'll add a note
[2013-03-22 18:03:49 -0400] cassianoleal: yep, good idea
[2013-03-22 18:03:50 -0400] markcornick: I forgot all about this until cassianoleal mentioned it. Thanks guys.
[2013-03-22 18:04:25 -0400] jkeiser: cassianoleal: regarding downloading ALL the things, I added a note to the blog entry that the time before uploading is a really good time to clean out crap you don't want anymore.  Just delete the files and they won't get uploaded
[2013-03-22 18:04:38 -0400] isotope1: does anyone know where loglevel auto came from?
[2013-03-22 18:04:45 -0400] isotope1: I can't bootstrap anymore
[2013-03-22 18:05:09 -0400] markcornick: Yeah, my migration was a little bit like a trip through the Museum of Old Cookbook Versions.
[2013-03-22 18:05:09 -0400] isotope1: log_level        :auto
[2013-03-22 18:05:51 -0400] mml: what is the general consensus on the deploy cookbook? good? bad?
[2013-03-22 18:06:24 -0400] mml: seems like there are other tools that have traditionally done the deploy step (cap, vlad etc)
[2013-03-22 18:06:30 -0400] cassianoleal: mml: you mean the core deploy resource? I like it, but you'll have to see if it fits your process
[2013-03-22 18:06:49 -0400] mml: we have a very half-assed capistrano hairball currently
[2013-03-22 18:06:53 -0400] mml: but it's the devil we know
[2013-03-22 18:06:53 -0400] cassianoleal: some people prefer push-style tools (like the ones you mentioned), some are ok with pull
[2013-03-22 18:07:00 -0400] jkeiser: Post updated with cookbook_path nil.  Thanks guys
[2013-03-22 18:07:13 -0400] cassianoleal: jkeiser: tank you, man!
[2013-03-22 18:07:14 -0400] jkeiser: I'll think about how to make knife-essentials deal with that, it's a bit counterintuitive
[2013-03-22 18:24:11 -0400] tmichael: knife bootstrap windows winrm yielding the following
[2013-03-22 18:24:13 -0400] tmichael: ERROR: TypeError: no implicit conversion from nil to integer
[2013-03-22 18:24:44 -0400] tmichael: windows is my kryptonite
[2013-03-22 18:35:25 -0400] Chris_Woods: Hey all, I'm trying to update some scripts to Chef 11.x and I've hit a line that is just way above my head.  I'm hoping someone can help me out.
[2013-03-22 18:36:01 -0400] Chris_Woods: Line is:  "knife exec -E "nodes.transform(:chef_environment => '<environment>') {|n| n['tags'].delete('deploy') ; n['tags'].push('deploy') }"
[2013-03-22 18:36:09 -0400] gad0lin_: Chris_Woods: checked - http://docs.opscode.com/breaking_changes_chef_11.html ?
[2013-03-22 18:36:31 -0400] Chris_Woods: No, I know what's wrong.  I just mean I can't figure out the syntax well enough to fix the problem with protecion on nodes now
[2013-03-22 18:36:53 -0400] Chris_Woods: Since they have default, override, etc. I can't figure out how to change the syntax so Chef is happy that I'm working on the default version of the nodes.
[2013-03-22 18:46:53 -0400] gad0lin_: Chris_Woods:  {|n| n.set['tags'].delete('deploy') ; n.set['tags'].push('deploy') }" ?
[2013-03-22 18:47:58 -0400] Chris_Woods: gad0lin_, Okay, I'm running a process right now but I'll give that a shot as soon as it completes.
[2013-03-22 18:49:30 -0400] shillinm: can someone give me syntax for knife search to find a specific recipe?
[2013-03-22 18:49:39 -0400] shillinm: I can get it to display everything that has a cookbook, but not a recipe
[2013-03-22 18:50:20 -0400] Chris_Woods: gad0lin_, Huh, that worked.  I was fumbling around with trying to figure out if I needed to use .default or .override and where.  What is .set doing to get around that?  (Thanks, also!)
[2013-03-22 18:52:55 -0400] shillinm: nevermind, I figured it out.  you have to escape the : character in a knife search?  that seems strange.  can someone explain why?
[2013-03-22 18:53:20 -0400] wildahunden__: : is a special character in ruby.
[2013-03-22 18:53:53 -0400] wildahunden__: :abc creates a unique constant
[2013-03-22 18:54:00 -0400] wildahunden__: called abc
[2013-03-22 18:54:10 -0400] shillinm: that makses sense
[2013-03-22 18:54:10 -0400] shillinm: thanks
[2013-03-22 18:54:19 -0400] wildahunden__: yw
[2013-03-22 18:56:00 -0400] wildahunden__: Using the subversion resource. I thought it was working last week.  This week not so much.  I put Chef::Log.debug("**************") before and after the call.  When I run chef-client -l debug, the log shows nothing between the two debug statements.  It's as if it isn't running.  Does anybody have an idea why it wouldn't run?
[2013-03-22 19:01:50 -0400] cburroughs: Am I reading this table right that auth via ldap for chef is a paid only feature? http://www.opscode.com/images/chef-features.png  Googling points everything towards a wontfix jira ticket
[2013-03-22 19:02:41 -0400] spox: cburroughs: looks that way
[2013-03-22 19:06:29 -0400] erikbeta: I'm trying to reload attributes from a recipe via node.load_attribute_by_short_filename as shown in the docs but this doesn't seem to work anymore on chef 11.2.0
[2013-03-22 19:06:48 -0400] erikbeta: Does anyone know the proper way to do this again or have a link to more up to date documentation than http://docs.opscode.com/chef/essentials_cookbook_attribute_files.html#reloading-attribute-files-from-recipes
[2013-03-22 19:25:26 -0400] phantasm66: If i setup a mount resource for a mount that already exists, but is setup *exactly* as i specify it in the new mount resource, what does chef do?
[2013-03-22 19:26:58 -0400] phantasm66: Does chef bail and log something like "already mounted"? or is that mount resource simply managed by chef from that point forward?
[2013-03-22 19:30:20 -0400] sprack: has anyone wrapped the rvm cookbook to use optimzation flags for compile?
[2013-03-22 19:31:19 -0400] cheeseplus: phantasm66: chef shouldn't bail, it should see that the mount exists as specified and move on
[2013-03-22 19:31:52 -0400] phantasm66: cheeseplus: thanks mate
[2013-03-22 19:34:30 -0400] jessicab1: so.. cant you use node attributes when writing a provider? didnt that used to work? now i just get undefined method errors
[2013-03-22 19:42:27 -0400] ngrayson: anyone had a problem mounting /tmp/vagrant-chef-1/chef-solo-1/cookbooks when doing vagrant up?
[2013-03-22 19:42:34 -0400] ngrayson: https://gist.github.com/ngrayson/fc030fc1f4de460badf3 is the log
[2013-03-22 19:43:07 -0400] gchristensen: ngrayson: I've had that problem when the directories didn't exist
[2013-03-22 19:43:25 -0400] ngrayson: which directory?
[2013-03-22 19:43:41 -0400] ngrayson: my local /tmp/blah...
[2013-03-22 19:43:47 -0400] gchristensen: yeah
[2013-03-22 19:44:11 -0400] ngrayson: well that doesn't seems to exist, what creates it?
[2013-03-22 19:44:24 -0400] gchristensen: you are supposed to :)
[2013-03-22 19:45:00 -0400] ngrayson: ah
[2013-03-22 19:45:13 -0400] ngrayson: i've never had to do that before
[2013-03-22 19:57:54 -0400] leifmadsen: can I do something like:  node['foo'][#{node['bar']}] in order to get the attribute name from another node attribute?
[2013-03-22 19:58:07 -0400] leifmadsen: perhaps I'm totally approaching this incorrectly :)
[2013-03-22 19:58:32 -0400] leifmadsen: basically, I want to get the contents of a network interface from ohai, but make the interface returned dynamic based on another node attribute set in my environment
[2013-03-22 20:01:27 -0400] Troy: I had a recipes running on a cloud instance, ubuntu 12.04, moved over to a different cloud where it was ubuntu 11.04, same recipes fails
[2013-03-22 20:01:45 -0400] btm: @Opscode cookbook code review, join: http://bit.ly/13jdpHY, watch: http://youtu.be/6SEEqSRm-m8
[2013-03-22 20:02:28 -0400] Troy: could it be the OS version? It's dieing in the required windows.rb which is ironic since I don't really need that cookbook
[2013-03-22 20:03:28 -0400] gad0lin_: Troy:  it fails during compilation phase?
[2013-03-22 20:04:39 -0400] Troy:  /home/ubuntu/chef/cookbooks/windows/providers/package.rb:25:in `require': no such file to load -- chef/mixin/shell_out (LoadError)
[2013-03-22 20:05:11 -0400] alop: anyone know if I can append to an attribute?
[2013-03-22 20:05:30 -0400] Troy: gad0lin_: I'm somewhat new to this so I don't know if it is compiling or not
[2013-03-22 20:05:49 -0400] alop: like, My attribute should be like ['value1','value2','etc']
[2013-03-22 20:08:50 -0400] Troy: gad0lin_: I did not use the opscode apt repo for install
[2013-03-22 20:09:16 -0400] gad0lin_: Troy: what is your  run_list and role for your node?
[2013-03-22 20:09:29 -0400] alop: I wonder if I can do like node.set["my_attribute"] = node["my_attribute"] + "New values"
[2013-03-22 20:10:13 -0400] Troy: gad0lin_:  "run_list": [     "recipe[java]",     "recipe[sharpndn]"   ]
[2013-03-22 20:10:48 -0400] Troy: gad0lin_: I don't know about the role
[2013-03-22 20:11:03 -0400] Troy: gad0lin_: running chef-solo
[2013-03-22 20:12:03 -0400] poolpog: hellpo
[2013-03-22 20:12:06 -0400] poolpog: hello*
[2013-03-22 20:12:25 -0400] poolpog: I have a question about metadata.rb and the "depends" attribute...
[2013-03-22 20:12:53 -0400] poolpog: I'm trying to install a custom cookbook that uses the postgresql cookbook...
[2013-03-22 20:13:24 -0400] poolpog: I tried using 'include_recipe "postgresql"' in my custom cookbook
[2013-03-22 20:13:39 -0400] ngrayson: that is how you do it
[2013-03-22 20:13:45 -0400] poolpog: and got the error "...Cookbook postgresql not found. If you're loading postgresql from another cookbook, make sure you configure the dependency in your metadata"
[2013-03-22 20:14:04 -0400] poolpog: I then added 'depends "postgresql"' to the custom cookbook's metadata.rb
[2013-03-22 20:14:17 -0400] poolpog: but now I get 'undefined method `[]=' for nil:NilClass'
[2013-03-22 20:14:24 -0400] ngrayson: can you gist your recipe and metadata?
[2013-03-22 20:14:34 -0400] poolpog: where is that?
[2013-03-22 20:14:37 -0400] poolpog: is that on github?
[2013-03-22 20:14:43 -0400] ngrayson: gist.github.com
[2013-03-22 20:14:43 -0400] ngrayson: yes
[2013-03-22 20:14:46 -0400] poolpog: k
[2013-03-22 20:14:47 -0400] poolpog: one sec
[2013-03-22 20:15:04 -0400] threesome: I upgraded Chef on my workstation to Chef 11, what's the recommended way to do so on my Vagrant virtual machines?
[2013-03-22 20:16:28 -0400] poolpog: honestly, there isn't much to gist
[2013-03-22 20:16:38 -0400] poolpog: the part I pasted here is the only part giving me trouble
[2013-03-22 20:16:51 -0400] ngrayson: poolpog ik i just want to see the exact formatting
[2013-03-22 20:17:26 -0400] poolpog: ah
[2013-03-22 20:17:49 -0400] poolpog: I'll gist it... I have narrowed it down to the minimum case that causes this problem
[2013-03-22 20:18:00 -0400] ngrayson: ok
[2013-03-22 20:18:07 -0400] poolpog: hey
[2013-03-22 20:18:10 -0400] poolpog: waitaminnit
[2013-03-22 20:18:24 -0400] poolpog: I'll gist in a coupla mins... I have a different issue allasudden
[2013-03-22 20:18:29 -0400] poolpog: thanks, though!
[2013-03-22 20:19:13 -0400] poolpog: aha
[2013-03-22 20:19:33 -0400] poolpog: I was wrong -- the metadata.rb "depends" line IS working...
[2013-03-22 20:19:39 -0400] poolpog: it is something else
[2013-03-22 20:19:44 -0400] ngrayson: okay
[2013-03-22 20:19:58 -0400] gad0lin_: Troy: check  sharpdnd, and find why/where its including windows recipe
[2013-03-22 20:20:11 -0400] poolpog: thanks... even just chatting with someone here always helps me
[2013-03-22 20:20:16 -0400] poolpog: here is the actual issue:
[2013-03-22 20:20:23 -0400] poolpog: node['postgresql']['config_pgtune']['db_type'] = 'mixed'
[2013-03-22 20:20:31 -0400] poolpog: that line is the error line...
[2013-03-22 20:20:41 -0400] poolpog: it is in my recipe/default.rb
[2013-03-22 20:21:11 -0400] poolpog: is the node object not instantiated or something? how do I force the node object to get instantiated and/or filled with valid data?
[2013-03-22 20:21:56 -0400] poolpog: is this is? http://docs.opscode.com/essentials_cookbook_attribute_files_reload.html
[2013-03-22 20:23:06 -0400] ngrayson: where is that line in your cookbook?
[2013-03-22 20:23:09 -0400] gad0lin_: poolpog: node['postgresql']['config_pgtune']['db_type'] => node.set['postgresql']['config_pgtune']['db_type']
[2013-03-22 20:23:30 -0400] poolpog: hmmm
[2013-03-22 20:23:37 -0400] poolpog: thanks, gad0lin_
[2013-03-22 20:23:48 -0400] poolpog: is there a URL to the opscode doc page that describes that?
[2013-03-22 20:24:33 -0400] poolpog: also, still confused...
[2013-03-22 20:24:40 -0400] poolpog: how do I set that to an actual value?
[2013-03-22 20:24:52 -0400] poolpog: I have strings as values for some of those node attributes
[2013-03-22 20:25:32 -0400] poolpog: nm
[2013-03-22 20:25:35 -0400] poolpog: I think I got it
[2013-03-22 20:25:57 -0400] poolpog: sweet...
[2013-03-22 20:26:08 -0400] Troy: gad0lin_: I don't think it is. When I added the java stuff, that cookbook required windows even though I'm on Linux
[2013-03-22 20:26:20 -0400] poolpog: just for closure, in case anyone reads the transcript, gad0lin_'s post "=>" means "change to"
[2013-03-22 20:26:30 -0400] poolpog: thanks gad0lin_
[2013-03-22 20:27:28 -0400] Troy: gad0lin_: It also required the chef_handler cookbook
[2013-03-22 20:27:38 -0400] gad0lin_: poolpog: you set node attribute node.set['postgresql'] =
[2013-03-22 20:27:56 -0400] poolpog: yep, thank you
[2013-03-22 20:29:38 -0400] Troy: gad0lin_: I took java out of the runlist and ran again same error, so hmm
[2013-03-22 20:30:46 -0400] Troy: gad0lin_: except it errors here - windows/providers/task.rb:21
[2013-03-22 20:31:40 -0400] Troy: gad0lin_: I must be missing something that I had done on the other system but forgot to note
[2013-03-22 20:33:45 -0400] gad0lin_: poolpog: http://wiki.opscode.com/display/chef/Breaking+Changes+in+Chef+11,
[2013-03-22 20:35:51 -0400] poolpog: thanks
[2013-03-22 20:36:02 -0400] poolpog: so, what you are saying is "don't upgrade"
[2013-03-22 20:36:04 -0400] poolpog: ;)
[2013-03-22 20:38:18 -0400] gad0lin_: poolpog: upgrade++, chef 11 is great
[2013-03-22 20:40:51 -0400] poolpog: "all your cookbooks will break" != "great"
[2013-03-22 20:41:00 -0400] poolpog: but I get it, I'm really just giving u shit
[2013-03-22 20:41:42 -0400] gad0lin_: poolpog: most of the changes are simple as one above
[2013-03-22 20:41:55 -0400] wildahunden: I did a yum update today on our centos server and am getting this error with chef-client now: Plugin c threw exception #<Ohai::Exceptions::Exec: command xlc -qversion doesn't      exist or is not in the PATH> /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/ohai-6.16.0/lib/ohai/mixin/command.rb:341     :in `rescue in popen4'  Has anyone else seen it?
[2013-03-22 20:51:08 -0400] coredump|br: guys, I am getting this error
[2013-03-22 20:51:12 -0400] coredump|br: Exception: NoMethodError: undefined method `name' for #<Hash:0x007f7f9230cc08>
[2013-03-22 20:51:27 -0400] coredump|br: chef version 10.14.2
[2013-03-22 20:51:34 -0400] coredump|br: is that some json gem craziness?
[2013-03-22 20:54:09 -0400] dyer: Anyone have any suggestions on a good tutorial for Chef minitest  ?
[2013-03-22 20:54:18 -0400] otterley: how can I ask Chef if a resource having a given name already exists?
[2013-03-22 20:54:21 -0400] otterley: I'm trying to avoid redeclaring it
[2013-03-22 20:54:42 -0400] dyer: I dont plan to use testkitchen I just want to add some basic post convergence tests to my cookbooks and I am having a hell of a time finding anything decent
[2013-03-22 20:55:37 -0400] coredump: it was a json problem. rolled back to 1.4.6 and it worked.
[2013-03-22 20:55:39 -0400] coredump: Thanks obama
[2013-03-22 20:57:58 -0400] jessicab: dyer: if you look over the examples in the minitest-handler cookbook, usually just using a ref doc like these is enough to find out all your other options: http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/spec/rdoc/MiniTest/
[2013-03-22 20:58:19 -0400] dyer: I get the options in the specs
[2013-03-22 20:58:28 -0400] dyer: its getting them to run thats driving me nuts
[2013-03-22 20:58:30 -0400] dyer: :)
[2013-03-22 20:58:43 -0400] dyer: sorry if that wasnt clear
[2013-03-22 20:59:02 -0400] dyer: 0 tests, 0 assertions, 0 failures, 0 errors, 0 skips
[2013-03-22 20:59:55 -0400] dyer: I am testing in Vagrant right now and I have added "recipe[minitest-handler]" in my Vagrant file
[2013-03-22 21:00:23 -0400] dyer: I have my simple 'helloworld' like test in files/tests/minitest/default_spec.rb
[2013-03-22 21:00:30 -0400] dyer: I am running 'prism::default'
[2013-03-22 21:00:33 -0400] dyer: but no dice
[2013-03-22 21:00:39 -0400] jessicab: weird.. are you using define_recipe? and adding in the requires lines? thats about all it needs aside from the assert and spec lines inside of an IT block, not if
[2013-03-22 21:01:39 -0400] jessicab: dyer: i guess i technically just use specs too, never tried the traditional type
[2013-03-22 21:03:10 -0400] dyer: jessicab: https://gist.github.com/johntdyer/5224713
[2013-03-22 21:14:00 -0400] ssd7: Ohai Chefs!
[2013-03-22 21:14:34 -0400] drgage: where do i make a feature request to support encrypted data bags in the users cookbook?
[2013-03-22 21:14:49 -0400] ssd7: drgage: tickets.opscode.com under the COOK project.
[2013-03-22 21:14:56 -0400] drgage: thanks
[2013-03-22 21:15:40 -0400] c_t: ohai ssd7
[2013-03-22 21:15:57 -0400] otterley: drgage, why do you want to do that?
[2013-03-22 21:16:08 -0400] c_t: (and other varied and sundry chefs)
[2013-03-22 21:16:53 -0400] drgage: otterly, the users cookbook seems like the poster child for encrypted data bags support. it wants password hashs in the data bag.
[2013-03-22 21:17:11 -0400] otterley: and how, exactly, will further encryption increase security?
[2013-03-22 21:18:25 -0400] drgage: we store configs including data bags on github. we don't want to store sensitive data like password strings there unencrypted.
[2013-03-22 21:19:19 -0400] doomviking: mmm ssh keys.
[2013-03-22 21:19:21 -0400] otterley: so do we.
[2013-03-22 21:19:45 -0400] otterley: doomviking, you still need password hashes if you use sudo, like everyone should.
[2013-03-22 21:20:28 -0400] jordane: otterley: you don't need password hashes if you use the NOPASSWD option
[2013-03-22 21:20:34 -0400] otterley: if your hashes are salted, long and strong enough, the extra encryption around a data bag doesn't give you much.  in fact, it now makes your data bags non searchable
[2013-03-22 21:20:43 -0400] otterley: jordane, anyone who uses NOPASSWD is an idiot.
[2013-03-22 21:22:06 -0400] sc077: if I use the chef_gem resource to install a gem shouldn't it be available to a cookbook library immediately (e.g. require 'some_gem')?
[2013-03-22 21:22:53 -0400] jordane: otterley: fair enough, but you still don't *need* password hashes
[2013-03-22 21:23:12 -0400] otterley: jordane, let's stick to the real world meaning of need, please
[2013-03-22 21:24:00 -0400] ranjibd: ohai chefs...
[2013-03-22 21:24:48 -0400] Troy: gad0lin_: Started a new ubuntu 12.04, ran the same process and it works
[2013-03-22 21:25:11 -0400] Troy: gad0lin_: something is missing when I do it on 11.04
[2013-03-22 21:25:18 -0400] |rt|: yeah I ran into a fun issue with the users cookbook trying to change root's password
[2013-03-22 21:25:32 -0400] |rt|: works on freebsd but the command it tries to run on linux fails
[2013-03-22 21:28:30 -0400] sc077: fwiw I'm using embedded ruby (via omnibus) and chef-solo
[2013-03-22 21:29:49 -0400] otterley: sc077, I don't think that will work, as the resources are converged before the execute runs
[2013-03-22 21:30:29 -0400] otterley: "require" runs at the resource compliation stage; your gem won't have been installed yet
[2013-03-22 21:30:32 -0400] sc077: the docs say that chef_gem runs its actions immediately, before convergence
[2013-03-22 21:30:42 -0400] otterley: ah
[2013-03-22 21:31:07 -0400] spox: sc077: yes, it should be available for require
[2013-03-22 21:31:21 -0400] otterley: I stand corrected :D
[2013-03-22 21:32:41 -0400] sc077: yea, it's odd. just getting a 'cannot load such file "my_gem"'
[2013-03-22 21:34:55 -0400] sc077: hmm: this looks relevant: http://tickets.opscode.com/browse/CHEF-3696
[2013-03-22 21:37:04 -0400] spox: okay, so are you requiring it right after the chef_gem resource, or in a library?
[2013-03-22 21:37:10 -0400] drgage: fwiw it seems someone has already added encrypted data bag support to the users cookbook per CHEF-2610: https://github.com/mb-dev/users
[2013-03-22 21:37:53 -0400] sc077: in a library
[2013-03-22 21:38:36 -0400] sc077: maybe I'll try to convert it to a lwrp and see if that works
[2013-03-22 21:39:54 -0400] siezer: sc077 chef_gem "thing" do :blah end.run_action(:install)
[2013-03-22 21:40:11 -0400] siezer: if you need to use it in the compilation phase
[2013-03-22 22:02:06 -0400] ssd7: siezer: chef_gem already does compile phase magic
[2013-03-22 22:04:47 -0400] spox: sc077: sorry, i got sidetracked away
[2013-03-22 22:04:53 -0400] spox: you just need to lazy load it
[2013-03-22 22:05:13 -0400] spox: let your recipe install it for you, sure
[2013-03-22 22:05:25 -0400] spox: but in the library itself, just require it when you are going to use it, not up front
[2013-03-22 22:12:21 -0400] gmcinnes: are chef-librarian and berkshelf for the same job?
[2013-03-22 22:12:41 -0400] kindsol: basically, yes.
[2013-03-22 22:12:49 -0400] gmcinnes: who's winning?
[2013-03-22 22:12:54 -0400] gmcinnes: :)
[2013-03-22 22:13:12 -0400] kindsol: I prefer berkshelf
[2013-03-22 22:13:19 -0400] gmcinnes: I mean, all else being equal, what should I choose.
[2013-03-22 22:13:23 -0400] gmcinnes: ok. good enough.
[2013-03-22 22:13:38 -0400] kindsol: check out the tutorial http://vialstudios.com/guide-authoring-cookbooks.html
[2013-03-22 22:13:57 -0400] gad0lin_: i am also using berkshelf, I also have plugin for Vagrant
[2013-03-22 22:14:01 -0400] kindsol: It's worth taking an hour to walk though it
[2013-03-22 22:14:34 -0400] kindsol: chef+berkshelf+vagrant = awesome
[2013-03-22 22:14:44 -0400] kindsol: s/=/==/
[2013-03-22 22:15:18 -0400] ranjibd: +1
[2013-03-22 22:16:26 -0400] gmcinnes: good enough for me. I've used librarian-chef previously, and it was a big win.  But this time I'll try 't other

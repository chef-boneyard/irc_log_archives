[2013-03-15 00:01:42 -0400] Majost: will a boolean from an attribute automagically get transposed into a string when used in an erb in a <%= node[myBool] %> context?
[2013-03-15 00:02:37 -0400] Majost: it seems kinda wonky to do it ... but it also is somewhat odd to see a string of 'true' or 'false' in the attributes
[2013-03-15 00:05:15 -0400] miah: no
[2013-03-15 00:05:28 -0400] Majost: miah: thanks
[2013-03-15 00:05:41 -0400] miah: node[myBool].to_s maybe
[2013-03-15 00:06:58 -0400] shanlar: does the action :install for packages also update a package if it has an update available?
[2013-03-15 00:07:23 -0400] timsmith: :upgrade would do that
[2013-03-15 00:07:25 -0400] Majost: shanlar: nope
[2013-03-15 00:07:38 -0400] shanlar: so i would need to do action [ :install, :upgrade] ?
[2013-03-15 00:07:45 -0400] timsmith: just upgrade
[2013-03-15 00:07:52 -0400] timsmith: that'll install and upgrade if available
[2013-03-15 00:07:54 -0400] shanlar: ok thanks
[2013-03-15 00:08:11 -0400] timsmith: np
[2013-03-15 00:08:17 -0400] maplebed: miah: Majost: doesn't https://gist.github.com/maplebed/5166423 imply that it should?
[2013-03-15 00:08:20 -0400] miah: you can specify both too iirc. but ya. :upgrade does install as well
[2013-03-15 00:09:08 -0400] miah: maplebed: hrm. its possible ERB does some magic. but i wouldn't expect it to. i could totally be wrong too =)
[2013-03-15 00:09:20 -0400] Majost: huh
[2013-03-15 00:09:58 -0400] Majost: to_s is probably safer - that seems like a behavior which can change erratically between versions of ruby/erb
[2013-03-15 00:10:11 -0400] miah: Majost: i agree
[2013-03-15 00:10:21 -0400] miah: i try to dry up my content before it gets sent to the template
[2013-03-15 00:10:24 -0400] Majost: I was curious nevertheless
[2013-03-15 00:10:28 -0400] miah: i dont like to do transformations inside the erb
[2013-03-15 00:27:12 -0400] kallen: Gem::LoadError: Unable to activate net-scp-1.1.0, because net-ssh-2.2.2 conflicts with net-ssh (>= 2.6.5)
[2013-03-15 00:27:21 -0400] kallen: mispaste. got that error. wondering how to address..
[2013-03-15 00:27:53 -0400] tomdzk:  kallen: vagrant, local or on a node ?
[2013-03-15 00:28:09 -0400] kallen: on a node. in recipe
[2013-03-15 00:28:20 -0400] kallen: using route53 cookbook
[2013-03-15 00:28:22 -0400] tomdzk: what's the chef version ?
[2013-03-15 00:29:09 -0400] kallen: 10.18.0
[2013-03-15 00:29:10 -0400] kallen: installed fog in recipe via chef_gem resource
[2013-03-15 00:29:10 -0400] kallen: fwiw
[2013-03-15 00:29:11 -0400] kallen: which is an alteration from upstream route53 cookbook
[2013-03-15 00:30:08 -0400] tomdzk: kallen: likely related to http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-03-15 00:31:07 -0400] tomdzk: kallen: yeah, that should fix it
[2013-03-15 00:31:51 -0400] kallen: glad i mispasted, and thus asked :>
[2013-03-15 00:31:59 -0400] tomdzk: heh
[2013-03-15 00:32:05 -0400] kallen: kickass. that fixed it.
[2013-03-15 01:06:05 -0400] asdbla: hi, how do I print overriden chef attribute ?
[2013-03-15 01:17:43 -0400] log1kal: in shef, you can reference node.override
[2013-03-15 01:29:04 -0400] josephholsten: anyone noticed the mount resource executing when it doesn't need to? esp in chef-client 11
[2013-03-15 01:56:51 -0400] asdbla: so nobody knows how to print overriden attribute? :)
[2013-03-15 02:09:12 -0400] Chris_Woods: Is there any way to get a copy of the erb used for the -d option in knife bootstrap?
[2013-03-15 02:10:03 -0400] Chris_Woods: eg, if I 'knife bootstrap <ip> -d centos6-gems', is there a way to get centos6-gems.erb so I can modify what it does and then pass it in with --template?
[2013-03-15 02:30:36 -0400] martinisoft: Chris_Woods: I think you're talking about this https://github.com/opscode/chef/tree/master/lib/chef/knife/bootstrap
[2013-03-15 02:30:46 -0400] martinisoft: Chris_Woods: Bootstrap templates
[2013-03-15 02:40:37 -0400] jhammerman: Hi Chef IRC. Can anyone tell me what is wrong with my syntax here? I have node overrides defined, and I'm trying to dynamically write out network interfaces using them.
[2013-03-15 02:40:38 -0400] jhammerman: template "/etc/sysconfig/network-scripts/ifcfg-#{node[:override][:bonded_interfaces][:master]}" do
[2013-03-15 02:40:55 -0400] jhammerman: chef-client is reporting "FATAL: TypeError: can't convert Symbol into Integer"
[2013-03-15 02:41:06 -0400] jhammerman: kallen: Hey, how are you?
[2013-03-15 02:43:18 -0400] jhammerman: I was able to get around a previous similar error by referencing the variable with %w{variable}, but I don't really now what that is doing...
[2013-03-15 02:48:11 -0400] Chris_Woods: martinisoft: Yes, that looks exactly like what I'm looking for!  How do I figure out where all the different ones might be?  I'm using -d centos6-gems, but I don't see that in this directory.
[2013-03-15 02:49:06 -0400] jhammerman: OK, putting in the chat for posterity, it looks like the variable needed to be referenced with this syntax: node.override.bonded_interfaces.master
[2013-03-15 02:49:30 -0400] jhammerman: Does anyone have a link to a page with documentation on the difference between the method?
[2013-03-15 03:26:36 -0400] martinisoft: Chris_Woods: if you dont see it in that directory then its custom
[2013-03-15 04:02:17 -0400] jhammerman: Hi Chef IRC, I may have spoken too soon. I am writing out files with names like this: ifcfg-#<Chef::Node::Attribute:0x00000002648ed8> I think I must be calling a pointer rather than a value, but I confess to not understanding why.
[2013-03-15 04:02:33 -0400] jhammerman: I'm at my wit's end and would greatly appreciate any help that anyone would be able to offer
[2013-03-15 04:21:16 -0400] scalp42: anyone have come across 502 hitting chef-server upstream: "http://127.0.0.1:9462/
[2013-03-15 04:21:21 -0400] scalp42: looks like its webui
[2013-03-15 04:21:46 -0400] scalp42: clean ubuntu 12.04 using https://opscode-omnitruck-release.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.6-1.ubuntu.12.04_amd64.deb
[2013-03-15 04:25:27 -0400] scalp42: looking at the nginx.conf
[2013-03-15 04:25:37 -0400] scalp42:   location / {
[2013-03-15 04:25:37 -0400] scalp42:           set $my_upstream erchef;
[2013-03-15 04:25:37 -0400] scalp42:       if ($http_x_ops_userid = "") {
[2013-03-15 04:25:37 -0400] scalp42:         set $my_upstream chef_server_webui;
[2013-03-15 04:25:52 -0400] scalp42: looks like im getting redirect to
[2013-03-15 04:25:52 -0400] scalp42:  upstream chef_server_webui {
[2013-03-15 04:25:53 -0400] scalp42:     server 127.0.0.1:9462;
[2013-03-15 04:25:53 -0400] scalp42:   }
[2013-03-15 04:27:24 -0400] scalp42: netstat -nlp doesnt show anything listening on 9462
[2013-03-15 04:34:16 -0400] miah: is nginx running?
[2013-03-15 04:34:23 -0400] miah: also, please only paste to gist.github.com
[2013-03-15 04:37:23 -0400] scalp42: I figured it out, looks like enable webui was set to false in chef-server.rb
[2013-03-15 04:37:54 -0400] scalp42: thanks though!
[2013-03-15 04:48:12 -0400] miah: ok cool
[2013-03-15 05:23:06 -0400] scalp42: agh different error now https://gist.github.com/scalp42/0f6f84881a8a00c89f20
[2013-03-15 05:23:36 -0400] scalp42: remember that beam.smp on riak
[2013-03-15 05:30:48 -0400] scalp42: found the issue : https://gist.github.com/ranjib/5159935
[2013-03-15 05:30:54 -0400] scalp42: small world :)
[2013-03-15 05:38:04 -0400] AndreasSB: good morning to all
[2013-03-15 05:38:53 -0400] AndreasSB: can anybody help me to find out a solution to get the right sources for the apt-get repositiory on debian?
[2013-03-15 05:56:59 -0400] scalp42: AndreasSB: what are you looking to do ?
[2013-03-15 05:57:09 -0400] scalp42: AndreasSB: are you talking about a ppa for example?
[2013-03-15 05:58:50 -0400] AndreasSB: in the deb http://apt.opscode.com/ <codename>-0.10 main
[2013-03-15 05:59:04 -0400] AndreasSB: i want the correct <codename>?
[2013-03-15 05:59:30 -0400] AndreasSB: because a apt-get update fails with this line
[2013-03-15 06:01:32 -0400] scalp42: oh I see
[2013-03-15 06:02:05 -0400] scalp42: AndreasSB: would this help -> distribution node['lsb']['codename']
[2013-03-15 06:02:43 -0400] scalp42: $> root@chef:~# lsb_release -c
[2013-03-15 06:02:43 -0400] scalp42: Codename:precise
[2013-03-15 06:03:09 -0400] AndreasSB: sorry i don't understand?
[2013-03-15 06:03:32 -0400] AndreasSB: can you show me your apt-get sources from opscode?
[2013-03-15 06:04:33 -0400] scalp42: oh sorry misunderstood
[2013-03-15 06:04:49 -0400] scalp42: whats your ubuntu version ? I can spin up a vm real quick
[2013-03-15 06:05:57 -0400] AndreasSB: i use debian 6.0.7
[2013-03-15 06:06:14 -0400] scalp42: oops sorry
[2013-03-15 06:06:22 -0400] scalp42: is it squeeze ? cant remember the codenames
[2013-03-15 06:07:10 -0400] scalp42: can you try in your source.list ->  deb http://apt.opscode.com/  squeeze-0.10 main
[2013-03-15 06:07:15 -0400] AndreasSB: jepp
[2013-03-15 06:07:19 -0400] AndreasSB: it is squeeze
[2013-03-15 06:07:25 -0400] scalp42: then I think it should work
[2013-03-15 06:07:30 -0400] scalp42: give it a try
[2013-03-15 06:08:02 -0400] AndreasSB: i have never install a chef-server before
[2013-03-15 06:08:04 -0400] AndreasSB: sorry
[2013-03-15 06:08:11 -0400] scalp42: oh please dont be :)
[2013-03-15 06:08:13 -0400] mh`: is there a reason that making the box my chef server lives on a chef client is a bad idea? will i destroy the internet?
[2013-03-15 06:08:21 -0400] scalp42: AndreasSB:  ive been there as well
[2013-03-15 06:08:46 -0400] scalp42: mh`: recipe[internet::recover]
[2013-03-15 06:08:53 -0400] mh`: but where will i run that
[2013-03-15 06:08:56 -0400] mh`: with no internet
[2013-03-15 06:09:03 -0400] scalp42: crap
[2013-03-15 06:09:04 -0400] scalp42: ;)
[2013-03-15 06:09:44 -0400] scalp42: AndreasSB: hows the apt-get going?
[2013-03-15 06:09:44 -0400] Mithrandir: mh`: no, that's fine and common
[2013-03-15 06:09:59 -0400] mh`: scalp42: http://i.qkme.me/3tdpit.jpg
[2013-03-15 06:10:06 -0400] mh`: Mithrandir: okay, thanks.
[2013-03-15 06:10:17 -0400] mh`: i didn't want to be the one responsible for what would come to be known as the "deinternetting"
[2013-03-15 06:11:42 -0400] AndreasSB: #scalp42 sorry, but i think i want to read the manual again. something is total wrong at the moment
[2013-03-15 06:11:52 -0400] mh`: scalp42, Mithrandir, you guys there?
[2013-03-15 06:12:24 -0400] scalp42: AndreasSB: no worries, if you can paste the output, maybe I can figure it out in case
[2013-03-15 06:12:26 -0400] mh`: .. someone say something. i did it
[2013-03-15 06:12:27 -0400] mh`: oh thank god
[2013-03-15 06:12:39 -0400] scalp42: mh`: houston
[2013-03-15 07:08:19 -0400] mh`: is there a way to set a default role for nodes
[2013-03-15 07:08:55 -0400] mh`: i'm basically trying to create a default 'baseline' run list
[2013-03-15 07:09:02 -0400] mh`: so if there's a better way to do that, i'm open to that
[2013-03-15 07:10:26 -0400] mh`: oh does that go in the attributes for the environment
[2013-03-15 07:10:33 -0400] mh`: heh sorry, migrating from puppet
[2013-03-15 08:53:52 -0400] BryanWB__: ohai chefs!
[2013-03-15 08:53:55 -0400] BryanWB__: good morning!
[2013-03-15 09:04:22 -0400] ranjibd: ohai BryanWB__
[2013-03-15 09:04:42 -0400] BryanWB__: ranjibd: hey dude, gr8 to c u on foodfightshow the other day
[2013-03-15 09:05:00 -0400] ranjibd: hope my mic was better
[2013-03-15 09:05:07 -0400] BryanWB__: much better :)
[2013-03-15 09:05:09 -0400] ranjibd: why u didnt join ?
[2013-03-15 09:05:14 -0400] BryanWB__: had enough ppl
[2013-03-15 09:05:33 -0400] ranjibd: need to improve my english man.. i do lot of umm ..amm..hmmm..  while talking
[2013-03-15 09:05:42 -0400] ranjibd: and bad english.. very bad
[2013-03-15 09:05:44 -0400] ranjibd: ok
[2013-03-15 09:05:45 -0400] BryanWB__: u also speak too quickly, same mistake i make
[2013-03-15 09:06:03 -0400] BryanWB__: it's better to just pause than say "um"
[2013-03-15 09:07:52 -0400] ranjibd: so you are creating supercomputers now ? :-)
[2013-03-15 09:08:08 -0400] BryanWB__: i will try :)
[2013-03-15 09:47:00 -0400] Azrael: wtf happened to the chef docs?  they use to be so good!
[2013-03-15 10:45:49 -0400] Azrael: ahh, learnchef looks good
[2013-03-15 11:56:07 -0400] BryanWB__: Azrael: looked at docs.opscode.com?
[2013-03-15 12:08:32 -0400] Azrael: BryanWB__: yeah thats what i was not happy with
[2013-03-15 12:08:46 -0400] BryanWB__: Azrael: am surprised, i quite like it
[2013-03-15 12:09:05 -0400] Azrael: BryanWB__: it seems good if you already understand chef
[2013-03-15 12:09:11 -0400] BryanWB__: true
[2013-03-15 12:09:14 -0400] Azrael: BryanWB__: but i'm currently evaluating it
[2013-03-15 12:09:30 -0400] Azrael: it == chef
[2013-03-15 12:09:59 -0400] Azrael: learning it, getting to know it, preparing a recommendation to (or not to) switch from puppet
[2013-03-15 12:10:02 -0400] BryanWB__: Azrael: nathenharvey has a great blog series that could be a good intor
[2013-03-15 12:10:14 -0400] Azrael: nice.  /me googles
[2013-03-15 12:10:30 -0400] BryanWB__: and there is my blog of course :)
[2013-03-15 12:10:40 -0400] Azrael: which is your blog
[2013-03-15 12:10:59 -0400] BryanWB__: Azrael: http://devopsanywhere.blogspot.it/2011/10/puppet-vs-chef-fight.html
[2013-03-15 12:11:36 -0400] Azrael: BryanWB__: ahh yes, i've read this :-)
[2013-03-15 12:12:16 -0400] Azrael: BryanWB__: i liked the graph of sysadmin productivity
[2013-03-15 12:12:23 -0400] BryanWB__: haha tks
[2013-03-15 12:12:56 -0400] Azrael: BryanWB__: but one thing i have noticed, that isn't much talked about in blogs
[2013-03-15 12:13:20 -0400] BryanWB__: and there is the podcast too
[2013-03-15 12:13:25 -0400] BryanWB__: http://foodfightshow.org
[2013-03-15 12:13:43 -0400] Azrael: BryanWB__: is that configuration management -- be it chef, puppet, cfengine, bcfg2, saltstack, whatever -- only improves productivity and only addresses reliability + scalability if the whole team is on board
[2013-03-15 12:13:47 -0400] Azrael: not just on board
[2013-03-15 12:13:48 -0400] Azrael: but actively using it
[2013-03-15 12:13:48 -0400] Azrael: and
[2013-03-15 12:13:50 -0400] Azrael: only using it
[2013-03-15 12:14:05 -0400] Azrael: i've seen a lot of places that "have puppet" for example
[2013-03-15 12:14:10 -0400] BryanWB__: that is the challenge w/ introducing any tool
[2013-03-15 12:14:20 -0400] Azrael: in other words it was setup once by one guy and does basic things like user accounts, thats it
[2013-03-15 12:14:35 -0400] BryanWB__: sure, and others go about their business
[2013-03-15 12:14:39 -0400] Azrael: yeah
[2013-03-15 12:14:50 -0400] Azrael: i like what i see from chef so far
[2013-03-15 12:15:05 -0400] Azrael: i think people actually will use it, once they get to know it
[2013-03-15 12:15:18 -0400] BryanWB__: maybe or maybe not
[2013-03-15 12:15:29 -0400] BryanWB__: some ppl don't want to learn new stuff
[2013-03-15 12:15:32 -0400] Azrael: yep
[2013-03-15 12:15:53 -0400] BryanWB__: i have colleagues that just reuse my cookbooks and never written one of their own
[2013-03-15 12:18:02 -0400] Azrael: BryanWB__: ha... "I must confess that I have an ulterior motive for starting this blog. I am a linux system administrator who is following his wife's career around the world. Previously we were in Nepal, now we are in Italy, next up who knows!"
[2013-03-15 12:18:07 -0400] Azrael: BryanWB__: i'm doing the same
[2013-03-15 12:18:19 -0400] BryanWB__: it worked :)
[2013-03-15 12:18:20 -0400] Azrael: BryanWB__: Copenhagen now.  Next up is possibly Switzerland or Brazil.
[2013-03-15 12:18:31 -0400] Azrael: we are portable
[2013-03-15 12:18:32 -0400] BryanWB__: i now work for http://cyclecomputing.com
[2013-03-15 12:18:43 -0400] BryanWB__: in part due to that blog and the podcast
[2013-03-15 12:19:00 -0400] Azrael: very cool
[2013-03-15 12:19:04 -0400] BryanWB__: i love copenhagen, awesome city
[2013-03-15 12:19:08 -0400] Azrael: i'm at http://www.one.com
[2013-03-15 12:19:13 -0400] Azrael: yeah it is wonderful here
[2013-03-15 12:19:20 -0400] BryanWB__: neat
[2013-03-15 12:45:02 -0400] Azrael: i'm a bit confused
[2013-03-15 12:45:15 -0400] Azrael: some documentation mentions managing your repository as a git repo
[2013-03-15 12:45:19 -0400] Azrael: which of course makes sense
[2013-03-15 12:45:31 -0400] Azrael: but others state that each cookbook should be its own git repo
[2013-03-15 12:45:36 -0400] Azrael: so which is it?
[2013-03-15 12:45:42 -0400] BryanWB__: each cookbook should go in own git repo
[2013-03-15 12:46:12 -0400] kesor: although it doesn't really matter, since what you have uploaded to your chef server is the source of truth, not your git branch.
[2013-03-15 12:46:58 -0400] Azrael: ok
[2013-03-15 12:47:08 -0400] Litex: The wrapper cookbook Kool Aid.  It is delicious.
[2013-03-15 12:47:27 -0400] kesor: Litex: with chef-rewind?
[2013-03-15 12:47:48 -0400] Litex: I haven't tried chef-rewind yet.
[2013-03-15 12:53:21 -0400] kesor: Can someone explain why for upstart you can use "service name do provider Chef::Provider::Service::Upstart end" but for runit the cookbook is using "runit_service" (which is coincidentally also hardcoded in several other cookbooks), and is it possible to re-write the runit cookbook to behave the same way that an upstart provider behaves?
[2013-03-15 13:01:18 -0400] Azrael: BryanWB__: why should each cookbook go into its own git repo
[2013-03-15 13:01:33 -0400] BryanWB__: cuz they change independently of each other
[2013-03-15 13:01:35 -0400] Azrael: BryanWB__: instead of managing one's site entirely in one git repo
[2013-03-15 13:01:36 -0400] BryanWB__: u will find
[2013-03-15 13:01:41 -0400] Azrael: ok
[2013-03-15 13:01:41 -0400] BryanWB__: and so u can use berkshelf
[2013-03-15 13:01:50 -0400] BryanWB__: cuz berkshelf is your friend
[2013-03-15 13:02:07 -0400] kesor: Azrael: you can use berkshelf, or librarian-chef, these tools work better/easier with repo per cookbook.
[2013-03-15 13:02:37 -0400] kesor: Azrael: although, for your own cookbooks, until you opensource them . you can use one repo to hold these, plus librarian-chef to install you the thirdparty ones.
[2013-03-15 13:03:13 -0400] Azrael: instead of knife cookbook site install?
[2013-03-15 13:03:32 -0400] BryanWB__: don't use that
[2013-03-15 13:03:35 -0400] kesor: yes, librarian or berkshelf are more like bundler for cookbooks
[2013-03-15 13:03:39 -0400] Azrael: why not?
[2013-03-15 13:03:51 -0400] BryanWB__: i still don't understand how it works
[2013-03-15 13:03:56 -0400] kesor: you have a Cheffile with versions, sources and a list of cookbooks your project needs. It also resolves all the dependencies.
[2013-03-15 13:05:10 -0400] siXy: how can you tell chef to flush the output buffer so that log lines are displayed in the proper order, rather than after the thing they're supposed to log before?
[2013-03-15 13:05:38 -0400] knuckolls: Azrael: this video took me from, "berkshelf sounds cool but it sounds like a lot of work", to "oh god it looks so simple and easy and i need it" http://www.ustream.tv/recorded/27487546/highlight/309841
[2013-03-15 13:06:26 -0400] Azrael: knuckolls: thanks
[2013-03-15 13:06:34 -0400] Azrael: i'm on the berkshelf site and it explains nothing to me
[2013-03-15 13:06:54 -0400] Azrael: silly rubynerds with the "you should just know" site design attitude
[2013-03-15 13:07:00 -0400] knuckolls: Azrael: i basically felt the same way. it's good docs, that's about it.
[2013-03-15 13:08:05 -0400] BryanWB__: i aint' no ruby nerd
[2013-03-15 13:08:26 -0400] zerokarmaleft: i'll admit, berkshelf's meme-inspired name turned me off at first
[2013-03-15 13:08:47 -0400] knuckolls: zerokarmaleft: i like it, it's easily googleable
[2013-03-15 13:10:37 -0400] knuckolls: BryanWB__: while you're here i figured i'd just say thanks for doing those food fight shows. they're great.
[2013-03-15 13:10:50 -0400] BryanWB__: knuckolls: my pleasure
[2013-03-15 13:10:55 -0400] BryanWB__: i learn a lot that way
[2013-03-15 13:11:01 -0400] knuckolls: i bet.
[2013-03-15 13:11:52 -0400] ekristen: what happened to the old docs!
[2013-03-15 13:12:01 -0400] Azrael: ekristen: yeah!
[2013-03-15 13:12:07 -0400] ekristen: the new ones are horrible!
[2013-03-15 13:12:13 -0400] Azrael: agreed
[2013-03-15 13:12:15 -0400] ekristen: I can't find anything like I used to be able to
[2013-03-15 13:12:15 -0400] Azrael: i was ranting earlier
[2013-03-15 13:12:16 -0400] BryanWB__: u should tell nathenharvey
[2013-03-15 13:12:24 -0400] ekristen: nathenharvey: please bring back the old docs
[2013-03-15 13:12:33 -0400] ekristen: nathenharvey: the new ones are seriously lacking
[2013-03-15 13:12:45 -0400] Litex: Yes, the Food Fight show is -awesome-.   I learn so much from it.
[2013-03-15 13:13:35 -0400] knuckolls: the crux of it for me about the new docs is the typography
[2013-03-15 13:13:41 -0400] knuckolls: it's too dense, hard to scan.
[2013-03-15 13:13:57 -0400] ekristen: seriously what happened to the subversion checkout code
[2013-03-15 13:14:00 -0400] ekristen: I can't find it
[2013-03-15 13:14:06 -0400] ekristen: I can only find deploy resource node
[2013-03-15 13:14:07 -0400] ekristen: now*
[2013-03-15 13:16:05 -0400] ekristen: this sucks
[2013-03-15 13:17:00 -0400] gchristensen: knuckolls: agreed
[2013-03-15 13:17:23 -0400] dsmit: speaking of subversion, qq hopefully.  I have a new recipe using application and i want it to deploy from SVN instead of GIT.  So added 'scm_provider Chef::Provider::Subversion' but i cant get it to authenticate, it doesnt appear to live svn_username attributes? any ideas?
[2013-03-15 13:18:33 -0400] ekristen: well personally I don't want to use the deploy resource I want to use the original subversion resource in the .10 version branch of code since that is what I am still using or use the git resource but I can't find the docs for it
[2013-03-15 13:20:39 -0400] dsmit: i wasnt using a deploy resource i dont think, purely the application cookbook.  I'm new to chef :)
[2013-03-15 13:21:08 -0400] ivey: zerokarmaleft: i am the one who made us choose the name berkshelf. started as a joke but I took it to seriously. but the reason was that it was super google friendly
[2013-03-15 13:26:07 -0400] Azrael: must one use vagrant with berkshelf?
[2013-03-15 13:27:15 -0400] cwj: Azrael: nope, berkshelf just makes using vagrant for cookbook development much easier
[2013-03-15 13:27:22 -0400] Azrael: ok
[2013-03-15 13:27:23 -0400] Azrael: now
[2013-03-15 13:27:24 -0400] Azrael: also
[2013-03-15 13:27:34 -0400] Azrael: berkshelf does automatic dependency resolution
[2013-03-15 13:27:46 -0400] Azrael: it pulls down cookbooks from the magical internets
[2013-03-15 13:27:49 -0400] Azrael: what if you have a cookbook
[2013-03-15 13:27:55 -0400] Azrael: that is not published on github etc
[2013-03-15 13:28:03 -0400] Azrael: but rather it is local to just your company
[2013-03-15 13:28:19 -0400] Azrael: (i know... *gasp!*  *roar!*  not using github for all the things?!!?)
[2013-03-15 13:28:25 -0400] Azrael: but lets say this was the case
[2013-03-15 13:28:25 -0400] cwj: if you have it on disk, just give berkshelf a path
[2013-03-15 13:28:28 -0400] Azrael: ok
[2013-03-15 13:28:35 -0400] cwj: if you have it in an internal git repo, give it that git url
[2013-03-15 13:28:49 -0400] cwj: i dont know about berkshelf and any other vcs
[2013-03-15 13:28:51 -0400] Azrael: where/how
[2013-03-15 13:29:07 -0400] Azrael: git is fine. just not on github.  local git server.
[2013-03-15 13:29:35 -0400] cwj: cookbook 'mysql', git: 'git://github.com/opscode-cookbooks/mysql.git'
[2013-03-15 13:30:10 -0400] cwj: cookbook 'my-secret-sauce', git: 'git://10.0.0.1/my-secret-sauce.git'
[2013-03-15 13:30:28 -0400] cwj: afaik git support predates github-specific support in berkshelf
[2013-03-15 13:30:39 -0400] Azrael: ok cool
[2013-03-15 13:32:04 -0400] dsmit: i guess i should read up on git, i'm used to svn :/
[2013-03-15 13:32:36 -0400] cwj: i came to git from perforce and was happy to do so
[2013-03-15 13:42:01 -0400] zerokarmaleft: ivey: fair enough...fwiw, I find berkshelf incredibly useful, the name just set an impression before I evaluated its technical merits
[2013-03-15 13:44:09 -0400] ekristen: git for the win
[2013-03-15 13:44:16 -0400] ekristen: svn is old school like cvs and needs to die
[2013-03-15 13:44:17 -0400] cwj: zerokarmaleft:  all artifacts are a product of a time and place :)
[2013-03-15 13:44:43 -0400] roidrage: noticed highly increased memory usage with chef client 11.4, odd because with 10.2 and 10.4 it has been very stable
[2013-03-15 13:45:19 -0400] ekristen: roidrage: its like they are trying to kill their users usage of the product
[2013-03-15 13:45:25 -0400] ekristen: release 11, take away 10 docs
[2013-03-15 13:45:38 -0400] roidrage: well, i'm not that much of a pessimist :)
[2013-03-15 13:45:44 -0400] roidrage: memory leaks happen unfortunately
[2013-03-15 13:45:59 -0400] ekristen: roidrage: me neither, just frustrated at the moment that I can't find what i am looking for
[2013-03-15 13:46:08 -0400] ekristen: ;-)
[2013-03-15 13:48:01 -0400] cwj: ekristen: http://web.archive.org/web/20120625114348/http://wiki.opscode.com/display/chef/Deploy+Resource
[2013-03-15 13:48:21 -0400] ekristen: cwj: now why didn't I think of that, lol
[2013-03-15 13:48:40 -0400] ekristen: cwj: thanks, they still need to put v10 docs back up ;-)
[2013-03-15 13:48:44 -0400] cwj: ekristen: maybe do the future a favor and submit a pull request for those docs to https://github.com/opscode/chef-docs
[2013-03-15 13:48:46 -0400] Sanjeeb: Hey everyone, I recently install chef-client on wheezy and durinf the first execution, chef-client return : NoMethodError: undefined method `run_list' for nil:NilClass
[2013-03-15 13:48:59 -0400] roidrage: now to figure out whether there's a client.rb option for the fork mode that's new in chef-client :)
[2013-03-15 13:49:27 -0400] cwj: ekristen: i dont think you are going to get very far hoping for the docs to be reverted, the way forward would be to help improve the new docs via https://github.com/opscode/chef-docs
[2013-03-15 13:49:41 -0400] ekristen: cwj: no I'm not asking they be reverted
[2013-03-15 13:49:50 -0400] ekristen: cwj: I'm asking that they put version 10 docs back up
[2013-03-15 13:49:58 -0400] ekristen: v10 vs v11 is a major upgrade
[2013-03-15 13:50:01 -0400] ekristen: the docs should stand apart
[2013-03-15 13:50:11 -0400] ekristen: v11 should be the default
[2013-03-15 13:50:23 -0400] ekristen: v10 should still be fully accessible in their original form
[2013-03-15 13:51:09 -0400] Azrael: ekristen: agreed
[2013-03-15 13:51:11 -0400] ekristen: https://github.com/opscode/chef-docs, omg the docs aren't tagged or branched based on version?! am I being overly critical?!
[2013-03-15 13:51:29 -0400] Azrael: ekristen: it was irresponsible to remove them and replace (half way) with something less superior
[2013-03-15 13:51:34 -0400] Sanjeeb: Does anyone solve this error : NoMethodError: undefined method `run_list' for nil:NilClass  on wheezy (gem json: 1.7.6) ???
[2013-03-15 13:52:29 -0400] cwj: Sanjeeb: thats a pretty vague error, perhaps if you put a stack trace and the relevant recipe code somewhere public someone might be able to take a look
[2013-03-15 13:54:28 -0400] gkarekinian: roidrage: It should be `client_fork` in client.rb, if I'm reading this right: https://github.com/opscode/chef/blob/master/lib/chef/client.rb#L187
[2013-03-15 13:55:01 -0400] Sanjeeb: cwj:  https://gist.github.com/anonymous/5170026 here is the log
[2013-03-15 13:55:18 -0400] roidrage: yeah, looking at the same code, gonna try that out, thanks!
[2013-03-15 13:56:31 -0400] cwj: Sanjeeb: are you sure you are using version 1.7.6 of json gem? http://tickets.opscode.com/browse/CHEF-3863
[2013-03-15 13:58:46 -0400] Sanjeeb: cwj: *** LOCAL GEMS ***
[2013-03-15 13:58:48 -0400] Sanjeeb: json (1.7.6)
[2013-03-15 13:59:52 -0400] cwj: hrm, dunno what to tell you, looks kinda like the same problem
[2013-03-15 14:00:45 -0400] cwj: i see vendor_ruby in your stack trace, are you reasonably sure the gem command you're running germane to any non-system ruby you might be using?
[2013-03-15 14:01:49 -0400] Sanjeeb: cwj: i install chef with debian package
[2013-03-15 14:02:49 -0400] Sanjeeb: cwj: gem install chef command resolved my issue
[2013-03-15 14:02:56 -0400] cwj: ok
[2013-03-15 14:03:05 -0400] Sanjeeb: Thank you very mush to all for your support
[2013-03-15 14:03:06 -0400] cwj: i'd recommend the chef-full installer myself
[2013-03-15 14:03:13 -0400] cwj: if you have problems in the future
[2013-03-15 14:03:18 -0400] cwj: no problem
[2013-03-15 14:03:30 -0400] Sanjeeb: cwj: have a nice day
[2013-03-15 14:03:36 -0400] cwj: you too :)
[2013-03-15 14:07:30 -0400] nathenharvey: ekristen: I would love to hear more feedback on docs.opscode.com
[2013-03-15 14:08:08 -0400] ekristen: nathenharvey: gladly, I've been a little harsh this morning, so I'll apologize for that from the start.
[2013-03-15 14:08:33 -0400] ekristen: nathenharvey: realistically I'd like to just see the original v10 docs available again, not everyone is able to upgrade to v11
[2013-03-15 14:09:49 -0400] ekristen: nathenharvey: my biggest issue with the new docs is that while I see the organization structure you were aiming for, it makes it difficult to use. having a traditional table of contents available somewhere would be wonderful or somehow make the new format more structured instead of link | link | link | link in a section, etc
[2013-03-15 14:10:30 -0400] rep0st: i think the docs are hosted on git
[2013-03-15 14:11:27 -0400] ekristen: rep0st: they aren't tagged or branched per version, suppose I could sift through the commits, but really v10 is a major version and v11 is one too, their docs should stand apart, obviously this is just my humble opinion on that matter
[2013-03-15 14:11:55 -0400] ekristen: for example in v11 it seems that the subversion resource is no longer available, at least it is no longer in the docs, however I use it in several recipes to control the deployment of my applications
[2013-03-15 14:12:11 -0400] ekristen: I cannot refer to its docs anymore because they've been removed
[2013-03-15 14:12:23 -0400] nathenharvey: ekristen: the git repo for the docs and docs.opscode.com are definitely chef 11, not 10.x
[2013-03-15 14:12:42 -0400] nathenharvey: wiki had chef 10 docs but redirects have been layed overtop of that
[2013-03-15 14:13:01 -0400] ekristen: nathenharvey: anyway you can put the original wiki up under a v10 tag or url?
[2013-03-15 14:13:14 -0400] ekristen: and then mention very clearly these are not the latest docs?
[2013-03-15 14:15:24 -0400] nathenharvey: ekristen: I'm looking into that.  I think it's reasonable to have the wiki available with a big message saying that this is for 10.x and for 11+ you need to go to docs.opscode.com
[2013-03-15 14:15:46 -0400] nathenharvey: ekristen:  have you looked at this - http://docs.opscode.com/resource_scm.html for the subversion resource
[2013-03-15 14:16:09 -0400] ekristen: nathenharvey: thanks! I take back all the bad things I was thinking this morning ;-)
[2013-03-15 14:16:19 -0400] ekristen: nathenharvey: thats what I was trying to find!
[2013-03-15 14:16:46 -0400] ekristen: I didn't think to look under scm, fair enough
[2013-03-15 14:16:54 -0400] ekristen: btw I like the new clean look of the individual pages
[2013-03-15 14:16:59 -0400] roidrage: nice that client_fork option works a treat
[2013-03-15 14:18:10 -0400] nathenharvey: ekristen: did you have the old subversion resource bookmarked?  would help to know if there was a specific thing you expected when you went to url X but were redirected to url Y
[2013-03-15 14:19:04 -0400] ekristen: no I literally just couldn't find it .. https://www.google.com/search?q=chef+subversion goes directly to the deploy reference, no mention of the scm resource in the first 10 results
[2013-03-15 14:19:31 -0400] nathenharvey: ekristen: also subversion is, for the most part, a flavor of the scm resource.  but, perhaps we should list it and git on this page http://docs.opscode.com/chef/resources.html
[2013-03-15 14:19:49 -0400] cwj: on the wiki the scm resources were lumped in with the deploy resources
[2013-03-15 14:20:07 -0400] ekristen: agreed
[2013-03-15 14:20:52 -0400] nathenharvey: ekristen: don't take back all the bad things.  if you were looking for something and couldn't find it, that's a bug and should be addressed
[2013-03-15 14:21:32 -0400] nathenharvey: ekristen: addressed by something a little more scalable than getting an answer from someone in an IRC channel
[2013-03-15 14:22:33 -0400] ekristen: fair enough
[2013-03-15 14:24:06 -0400] romaint: Hi
[2013-03-15 14:24:32 -0400] nathenharvey: knuckolls: you mentioned the typography on new docs being too dense.  I wonder if your screen resolution is something we've not looked at in our testing?
[2013-03-15 14:24:59 -0400] nathenharvey: knuckolls: could you send a screen shot or give any additional detail?  nharvey@opscode.com
[2013-03-15 14:25:22 -0400] romaint: I'm with Sanjeeb and i encounter the "NoMethodError: undefined method `run_list' for nil:NilClass" on Debian with JSON 1.7.6. Any lead?
[2013-03-15 14:26:02 -0400] romaint: (I have seen the http://tickets.opscode.com/browse/CHEF-3936 ticket but as I already use JSON 1.7.6 and i'm on Debian... :s)
[2013-03-15 14:31:22 -0400] nathenharvey: I'll be passing along the feedback about the docs and see what we can do to help there.  We have docs@opscode.com available for feedback, too
[2013-03-15 14:31:56 -0400] roidrage: should send a PR for this neat client_fork option to be mentioned in the docs :)
[2013-03-15 14:32:58 -0400] ekristen: nathenharvey: thanks
[2013-03-15 14:34:48 -0400] nathenharvey: @roidrage that'd be great looks like that came out in 10.14.0 http://www.opscode.com/blog/2012/09/07/chef-10-14-0-released/
[2013-03-15 14:37:43 -0400] laurent\: how do set ENV vars for chef-client ? (init script, client.rb ?)
[2013-03-15 14:38:14 -0400] gkarekinian: About client.rb's client_fork, see also this on the chef-client cookbook: https://github.com/opscode-cookbooks/chef-client/pull/28
[2013-03-15 14:40:53 -0400] randoum: Hi there. I have trouble using UFW recipe with chef solo. I'm trying to have chef solo to activate ufwm deny all and allow http and ssh only. As it's chef-solo I'm trying to configure it with a node.json file, but can't succeed. Any help would be greatly appreciated. Thanks. Here is an extract of my node.json http://pastebin.com/KGnJJv2j
[2013-03-15 14:42:10 -0400] randoum: Result is Chef::Exceptions::ImmutableAttributeModification  / Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'
[2013-03-15 14:55:54 -0400] DrVonNostren: Can someone point me in the direction of how I can configure nodes without bootstrapping them? Basically I want to create a VM template(s) and clone them and automatically have them begin authenticating and communicating with chef server without having to bootstrap each one from my workstation.
[2013-03-15 14:56:39 -0400] DrVonNostren: obviously the template will have chef-client on a crontab and will have keys in place but just wanted to know if anyone knew of a good writeup or what i should be looking at. Thanks!
[2013-03-15 14:59:40 -0400] erthad: hiall
[2013-03-15 14:59:52 -0400] erthad: is there a way to update node permissions via commandline knife?
[2013-03-15 15:01:06 -0400] erthad: or may be there is an easier way to permit node update itself when you create in via 'knife node from file'?
[2013-03-15 15:02:49 -0400] jtimberman: erthad: what is your chef server? open source, opscode private chef or opscode hosted chef?
[2013-03-15 15:03:07 -0400] erthad: jtimberman: opscode hosted chef
[2013-03-15 15:09:37 -0400] jtimberman: erthad: we have an "unofficial, unsupported" knife plugin for manipulating ACLs that should work.
[2013-03-15 15:09:50 -0400] jtimberman: https://github.com/seth/knife-acl
[2013-03-15 15:09:57 -0400] jtimberman: i've used it, it totally works :)
[2013-03-15 15:11:51 -0400] jtimberman: we're working to integrate it in w/ anotherp lugin to make it "official" and "supported" in the near-ish future though.
[2013-03-15 15:12:23 -0400] erthad: jtimberman: I'll give that a try, thank you
[2013-03-15 15:14:12 -0400] erthad: there is no such gem at rubygems =(
[2013-03-15 15:14:54 -0400] erthad: I can build that for myself but I'll have to describe/script up the building process to my customer
[2013-03-15 15:19:35 -0400] jtimberman: erthad: yeah, you'd have to build it
[2013-03-15 15:20:11 -0400] erthad: ahh, I see the issue. If you upload the node from file there is no client to grant permission to yet
[2013-03-15 15:20:57 -0400] erthad: so it seems I can't script adding that permissions prior to first chef run
[2013-03-15 15:24:43 -0400] gkarekinian: I wanted to do a PR to the chef-client cookbook but it's doing "include ::Opscode::ChefClient::Helpers" everywhere, which doesn't work on Chef 10.14, is it supposed to be only >= 11 now ?
[2013-03-15 15:28:56 -0400] jtimberman: gkarekinian: looks like we added include to the recipe DSL so ::Chef::Recipe.send(:include, ::Some::Module) isn't required
[2013-03-15 15:28:59 -0400] jtimberman: in Chef 11.
[2013-03-15 15:30:42 -0400] crypticsymbols: looking for a cookbook recommendation to handle vhost config for nginx & apache with chef solo
[2013-03-15 15:36:18 -0400] jtimberman: crypticsymbols: opscode's nginx and apache2 cookbooks can manage vhost configuration.
[2013-03-15 15:40:37 -0400] crypticsymbols: @jtimberman which recipe should I use? looking through the recipe I don't see any vhost templates or mentions of vhosts in the readme - not for nginx, anyway
[2013-03-15 15:40:56 -0400] crypticsymbols: any usage examples you know of?
[2013-03-15 15:41:14 -0400] jtimberman: crypticsymbols: you use the definitions in your own recipe.
[2013-03-15 15:41:34 -0400] jtimberman: nginx_site will enable a vhost for nginx
[2013-03-15 15:42:01 -0400] jtimberman: drop off the template in /etc/nginx/sites-available/MYVHOST.conf
[2013-03-15 15:45:15 -0400] crypticsymbols: oh, I see - so it does not assemble a vhost file, just performs symlinking to sites-available?
[2013-03-15 15:47:16 -0400] siXy: what are the available types in a LWRP resource? i.e. what kind_of => thing can be set?  I can't find any documentation on this
[2013-03-15 15:47:23 -0400] jtimberman: right. you write the vhost file. chef/we don't know what you want to put in it.
[2013-03-15 15:47:55 -0400] crypticsymbols: ok, I will see about adapting my apache/nginx generator scripts to chef.  Thank you!
[2013-03-15 15:54:51 -0400] j^2: jtimberman: i created /r/chef_opscode  :)
[2013-03-15 15:59:17 -0400] Sanjeeb: cwj: Sorry to re-interrupt you but my problem still persist :  https://gist.github.com/anonymous/5170930
[2013-03-15 15:59:25 -0400] roidrage: kallistec: yo!
[2013-03-15 16:04:00 -0400] Sanjeeb: As you can see on this link : https://gist.github.com/anonymous/5170930, chef-client execution failed after installing chef-client on debian wheezy. Does anyone solve this issue ?
[2013-03-15 16:14:17 -0400] alexbst: Sanjeeb - I sincerely and earnestly recommend using omnibus installer.
[2013-03-15 16:16:56 -0400] Sanjeeb: alexbst: Right, i'll try and i'll keep you inform
[2013-03-15 16:19:23 -0400] Sanjeeb: alexbst: Omnibus installer command return :  Unable to retrieve a valid package! and my /etc/debian_version = 7.0
[2013-03-15 16:23:03 -0400] nd___: I want to configure boxes to log to a central host (I guess you guys all do that already) which uses ssh tunnel the logs A beginner to chef, I wonder how to create and distribute keys for that in a good way? ssh-keygen in the recipe on installation, then add the public key to a databag (is that even possible from that node?)? What's a good way for that?
[2013-03-15 16:25:38 -0400] bean__: nd___: use rsyslog? ssh to tunnel logs is an awful idea
[2013-03-15 16:25:52 -0400] roidrage: where would i look if i wanted to add something to http://docs.opscode.com/config_rb_client.html ?
[2013-03-15 16:29:15 -0400] nd___: bean__: Why is that? I use beaver+ssh-tunnel+logstash. That works fine across all platforms I have to use, some of which not using rsyslog by default
[2013-03-15 16:31:00 -0400] bean__: nd___: just an opinion, not sure why you wouldn't use rsyslog, also doesn't logstash have a "shipper" that can run on the server, if your ultimate goal is to get stuff to logstash, i'd just use logstash
[2013-03-15 16:31:37 -0400] roidrage: jtimberman: is docs.opscode.com generated from https://github.com/opscode/chef-docs?
[2013-03-15 16:32:34 -0400] ssd7: Ohai Chefs
[2013-03-15 16:33:15 -0400] c_t: ohai
[2013-03-15 16:34:55 -0400] nd___: bean__: Yes, it does but being bundled in ruby+jruby it eats quite a lot of ram and I don't need that on the nodes
[2013-03-15 16:38:36 -0400] jtimberman: roidrage: yes
[2013-03-15 16:39:27 -0400] gkarekinian: jtimberman: I'm getting "NameError: uninitialized constant Opscode" even on Chef 11.4.0 when using the chef-client cookbook's latest master, should I create an issue?
[2013-03-15 16:40:54 -0400] gkarekinian: It's probably only an issue with chef-solo
[2013-03-15 16:45:00 -0400] nd___: bean__: Assuming I'd go with rsyslog, I'd still have to distribute certificates to encrypt the traffic, which is a similar problem to my original question. Do you have a clue on that?
[2013-03-15 16:58:07 -0400] nd___: Ok, http://lists.opscode.com/sympa/arc/chef/2013-01/msg00176.html somehow sketches what I want to do I'll try to work with that
[2013-03-15 17:04:29 -0400] jtimberman: gkarekinian: what recipe? I just ran chef-client::service in vagrant+chef solo
[2013-03-15 17:04:44 -0400] jtimberman: (amusing to run chef-client recipes in solo btw:) )
[2013-03-15 17:04:49 -0400] gkarekinian: I was working on chef-client::config
[2013-03-15 17:05:18 -0400] gkarekinian: haha yes, just doing quick & dirty testing by hand in Vagrant
[2013-03-15 17:07:43 -0400] jtimberman: gkarekinian: what platform?
[2013-03-15 17:07:52 -0400] jtimberman: (shouldn't matter, but never know :))
[2013-03-15 17:08:00 -0400] gkarekinian: Ubuntu 12.04
[2013-03-15 17:08:19 -0400] jtimberman: k same one i'm running
[2013-03-15 17:08:44 -0400] gkarekinian: It's weird, it's like it's ignoring the content of the libraries (since those constants are defined there)
[2013-03-15 17:09:16 -0400] jtimberman: gkarekinian: are you using the chef-client::config directly, or are you using it in another cookbook?
[2013-03-15 17:09:17 -0400] gkarekinian: Wait, something's wrong with it
[2013-03-15 17:09:32 -0400] jtimberman: gkarekinian: if you're using it in another cookbook you need to have a dependency
[2013-03-15 17:09:34 -0400] gkarekinian:  ????? ? ?       ?           ?            ? libraries
[2013-03-15 17:09:56 -0400] gkarekinian: Somehow my libraries dir is fucked up on the Vagrant box
[2013-03-15 17:10:04 -0400] jtimberman: :O
[2013-03-15 17:10:42 -0400] gkarekinian: Never seen anything like this, I'm going to destroy that box and see if I can reproduce this, thanks!
[2013-03-15 17:11:49 -0400] littleidea: does anyone have any ohai/chef sauce to deal with red hat system ids?
[2013-03-15 17:13:26 -0400] Azrael: gkarekinian: sounds like filesystem corruption
[2013-03-15 17:13:52 -0400] gkarekinian: Azrael: It's corrupted on the base box then, it's fine on my local machine
[2013-03-15 17:15:08 -0400] gkarekinian: Oh well, now it's fine after a destroy/up dance
[2013-03-15 17:16:24 -0400] Azrael: yup gkarekinian
[2013-03-15 17:17:02 -0400] gkarekinian: It's Vagrant 1.1, I'll report it if it happens to me again
[2013-03-15 17:35:55 -0400] roidrage: jtimberman: sorry to bug you about it. i'm just trying to find the place where all the client.rb atributes are described
[2013-03-15 17:39:09 -0400] jtimberman: roidrage: hm?
[2013-03-15 17:39:22 -0400] jtimberman: roidrage: my internets have been unreliable today, i might have missed a message.
[2013-03-15 17:39:24 -0400] solarce: roidrage: -_-
[2013-03-15 17:39:54 -0400] roidrage: jtimberman: i haven't rebugged you, consider the above message me bugging you :)
[2013-03-15 17:40:32 -0400] roidrage: been looking at this: https://github.com/opscode/chef-docs/blob/master/includes_config/includes_config_rb_client_settings.rst but it's missing the descriptions
[2013-03-15 17:40:40 -0400] roidrage: solarce: \m/
[2013-03-15 17:40:41 -0400] roidrage: #metalops
[2013-03-15 17:41:53 -0400] miah: hi
[2013-03-15 17:41:55 -0400] jtimberman: roidrage: I see!
[2013-03-15 17:42:07 -0400] roidrage: I JUST WANT TO CONTRIBUTE! :)
[2013-03-15 17:42:29 -0400] jtimberman: :D <3
[2013-03-15 17:42:29 -0400] miah: i just see dead people
[2013-03-15 17:42:48 -0400] roidrage: nah, that's just solarce
[2013-03-15 17:42:58 -0400] roidrage: sorry, that was uncalled for :)
[2013-03-15 17:43:07 -0400] roidrage: solarce <3 <3 <3
[2013-03-15 17:44:10 -0400] miah: i see derp people
[2013-03-15 17:44:25 -0400] roidrage: yup, that's me
[2013-03-15 17:44:29 -0400] miah: :P
[2013-03-15 17:45:05 -0400] roidrage: though my chef-client eating up memory is also among them :/
[2013-03-15 17:45:21 -0400] jtimberman: roidrage: you're now using --fork?
[2013-03-15 17:45:27 -0400] jtimberman: roidrage: i don't know if that has a config option offhand
[2013-03-15 17:45:53 -0400] roidrage: jtimberman: it does :)
[2013-03-15 17:45:56 -0400] roidrage: already tried it
[2013-03-15 17:46:08 -0400] roidrage: our staging box is running with it enabled right now
[2013-03-15 17:50:38 -0400] roidrage: feel like i'm rediscovering chef at the moment, first time i'm really using environments :O
[2013-03-15 17:50:44 -0400] jtimberman: nice :)
[2013-03-15 17:50:53 -0400] c_t: Environments are quite handy
[2013-03-15 17:50:54 -0400] miah: yay
[2013-03-15 17:51:21 -0400] roidrage: chef-client with fork is staying at a steady 28MB of RSS
[2013-03-15 17:51:26 -0400] c_t: it's too bad that you can't add stuff to the run_list in an environment though
[2013-03-15 17:51:30 -0400] roidrage: that's my kind of memory consumption
[2013-03-15 17:51:33 -0400] c_t: (I know there's the per-env run lists in roles)
[2013-03-15 17:51:38 -0400] roidrage: c_t: yeah, that's what i've been missing too
[2013-03-15 17:52:11 -0400] c_t: I was also looking yesterday at how hard it would be to add environment to the file specifity list
[2013-03-15 17:52:21 -0400] c_t: turns out, it would be pretty straightforward as far as I can tell
[2013-03-15 17:52:43 -0400] c_t: might be handy right above default
[2013-03-15 17:52:49 -0400] c_t: thoughts?
[2013-03-15 17:55:09 -0400] jtimberman: root      1366  0.0  0.4 108796 32992 ?        Sl   Mar09   0:02 /opt/chef/embedded/bin/ruby /usr/bin/chef-client -i 1800 -s 20 -f -R
[2013-03-15 17:55:19 -0400] jtimberman: roidrage: that's chef-client running on the system this irssi is in :)
[2013-03-15 17:55:36 -0400] roidrage: yeah, i wish i could say the same for mine
[2013-03-15 17:55:40 -0400] jtimberman: :D
[2013-03-15 17:55:50 -0400] jtimberman: dat ruby
[2013-03-15 17:56:28 -0400] roidrage: root      1414  0.2  4.4 436480 280004 ?       Sl   Mar13   7:29 /usr/bin/ruby1.9.1 /usr/bin/chef-client
[2013-03-15 17:56:42 -0400] roidrage: been running for 2.5 days
[2013-03-15 17:57:15 -0400] jtimberman: :O
[2013-03-15 17:57:35 -0400] jtimberman: i'm using -f, obviously :)
[2013-03-15 17:57:42 -0400] roidrage: before i switched my staging client to fork, it ate 1gb after about a week
[2013-03-15 17:59:26 -0400] roidrage: made me sad :(
[2013-03-15 17:59:43 -0400] roidrage: and all the more reason to add something on client_fork to the client.rb documentation :)
[2013-03-15 17:59:44 -0400] c_t: chef has a dependency on Firefox?
[2013-03-15 18:00:05 -0400] jtimberman: c_t: (lolwut)
[2013-03-15 18:00:16 -0400] solarce: only on gentoo
[2013-03-15 18:00:22 -0400] c_t: jtimberman: ballooning up to 1GB after a week
[2013-03-15 18:00:52 -0400] roidrage: so i guess i'll have to sign up for google hangout
[2013-03-15 18:00:55 -0400] knuckolls_: --fork ftw. we had a client w/ a memory leak eating like 15G one day
[2013-03-15 18:01:18 -0400] roidrage: would be nice to see --fork be advised on better and to get the memory leak fixed though :)
[2013-03-15 18:01:42 -0400] c_t: oh man
[2013-03-15 18:02:00 -0400] miah: (it should be default as well)
[2013-03-15 18:02:03 -0400] c_t: one time I added some perl module to a mod_perl app to upload and process excel files for something
[2013-03-15 18:02:08 -0400] knuckolls_: i know the --fork pull request never made it into the chef_client cookbook
[2013-03-15 18:02:12 -0400] knuckolls_: but did it get in there any other way?
[2013-03-15 18:02:13 -0400] roidrage: that chef-client is consuming the same amount as processes running on jruby, processes which run 20 concurrent builds for travis ci in 20 threads :)
[2013-03-15 18:02:43 -0400] c_t: merely *being* there caused all the apache processes to balloon up and consume all available memory and drag everything down into a burning heap of wreckage
[2013-03-15 18:02:58 -0400] knuckolls_: we used a fork of that cookbook at my previous job, and then i quit and it's something i'm gonna set up soon at my new gig
[2013-03-15 18:03:08 -0400] knuckolls_: regardless, i think --fork should be default in the chef_client cookbook
[2013-03-15 18:03:17 -0400] miah: knuckolls_: agreed
[2013-03-15 18:03:55 -0400] miah: knuckolls_: submit a pull request =)
[2013-03-15 18:04:01 -0400] knuckolls_: haha that's what i was just thinking
[2013-03-15 18:04:14 -0400] knuckolls_: probably before the end of next week
[2013-03-15 18:05:25 -0400] Liquid--: Anybody run into issues with the client.rb recipe in the nagios cookbook? It seems to be failing on action: start, and complains that the directory doesn't exist. THis is the error that I'm receiving:
[2013-03-15 18:05:25 -0400] Liquid--: FATAL: Errno::ENOENT: service[nrpe] (nagios::client line 61) had an error: Errno::ENOENT: No such file or directory - /etc/init.d/nrpe start
[2013-03-15 18:12:55 -0400] riceo: Is it possible to "return" a value from a ruby_block?
[2013-03-15 18:14:23 -0400] hikeit: riceo: where would it go?
[2013-03-15 18:14:31 -0400] riceo: Or at least set a variable that's accessible outside of the block?
[2013-03-15 18:14:41 -0400] hikeit: ah
[2013-03-15 18:14:51 -0400] hikeit: that you can do:
[2013-03-15 18:14:58 -0400] hikeit: myvariable = ""
[2013-03-15 18:15:26 -0400] hikeit: ruby_block do block do myvariable = "hello there"; end; end
[2013-03-15 18:15:39 -0400] riceo: ahh right
[2013-03-15 18:15:50 -0400] GianArb: hi! sorry can you help me with configuration of posgtresql recipe in vagrant? https://github.com/opscode-cookbooks/postgresq
[2013-03-15 18:16:03 -0400] riceo: hikeit: thanks
[2013-03-15 18:16:06 -0400] hikeit: but, the ruby block will get executed at convergence time, so you can only reference it and expect to have useful contents in a resource
[2013-03-15 18:16:22 -0400] hikeit: (or another ruby block)
[2013-03-15 18:16:27 -0400] GianArb: i use chef but i have the problem with configuration of password of postgres user, is it correct channel? sorry for my English
[2013-03-15 18:16:32 -0400] riceo: gotcha.
[2013-03-15 18:17:03 -0400] Liquid--: timsmith1: == nagios master! +1
[2013-03-15 18:17:46 -0400] timsmith1: time to try Debian for the first time
[2013-03-15 18:18:03 -0400] hikeit: liquid--: did you have any luck with chef-solr yesterday?
[2013-03-15 18:18:08 -0400] miah: be happy you're not trying it 10 years ago and dealing with dselect
[2013-03-15 18:18:31 -0400] hikeit: hey, i *liked* dselect
[2013-03-15 18:19:22 -0400] Liquid--: hikeit: +1 yes! thank you for your help. I figured out that my disk was full. I learned about compaction of couchDB yesterday lol and threw it in a cronjob. Apparently the chef-server cookbook handles compaction for you? Just haven't applied it yet.
[2013-03-15 18:19:51 -0400] c_t: miah: IIRC, even 10 years ago you could just use apt-get and friends and avoid dselect
[2013-03-15 18:20:49 -0400] miah: c_t: ok, maybe try 14 years ago then
[2013-03-15 18:20:56 -0400] miah: 1999 time
[2013-03-15 18:21:15 -0400] miah: although i will say.. at least its not YaST
[2013-03-15 18:21:55 -0400] c_t: I was using Slackware in the 1999 time
[2013-03-15 18:22:58 -0400] miah: me too primarily.
[2013-03-15 18:23:36 -0400] roidrage: oooh, YaST
[2013-03-15 18:23:49 -0400] roidrage: good old SuSE memories, which i started out with :)
[2013-03-15 18:23:59 -0400] miah: it hasn't gotten any better
[2013-03-15 18:24:03 -0400] roidrage: haha
[2013-03-15 18:24:27 -0400] josephholsten: anyone want to help test an ohai plugin for root_group? (OHAI-428)
[2013-03-15 18:24:29 -0400] miah: i tried seriously using it in 2009 when i was contracting.. so painful. so much broken shit.
[2013-03-15 18:24:52 -0400] miah: and dont get me started about AutoYaST which is even worse
[2013-03-15 18:25:25 -0400] josephholsten: aww, what would supercomputers use if they couldn't use suse?
[2013-03-15 18:26:29 -0400] c_t: Debian?
[2013-03-15 18:26:31 -0400] c_t: iuuhuh
[2013-03-15 18:26:43 -0400] c_t: ooh, NetBSD!
[2013-03-15 18:27:15 -0400] miah: anything
[2013-03-15 18:28:21 -0400] cheeseplus: josephholsten: scientific linux
[2013-03-15 18:45:52 -0400] matschaffer: is there a good cookbook for formatting and mounting a pre-attached blank ebs volume?
[2013-03-15 18:48:54 -0400] matschaffer: my google-fu is failing me
[2013-03-15 18:50:07 -0400] matschaffer: oh hey, this helps http://docs.opscode.com/resource_mount.html now how to get it formatted...
[2013-03-15 18:51:21 -0400] roidrage: here's an example i wrote back in the day: https://github.com/aws/opsworks-cookbooks/blob/master/ebs/recipes/volumes.rb
[2013-03-15 18:51:49 -0400] oddover: Hi all. does anyone know if cookbook versions are supported in chef solo?
[2013-03-15 18:51:50 -0400] roidrage: no way around calling to mkfs afaik :)
[2013-03-15 18:54:32 -0400] siezer: oddover nope.. cookbooks are versioned in their metadata, and you can have multiple versions installed simultaneously on the server, and an environment lets you "lock" them just like a Gemfile in a ruby project
[2013-03-15 18:54:49 -0400] siezer: chef-client will pull the correct version form server
[2013-03-15 18:55:06 -0400] siezer: s/form/from/
[2013-03-15 18:55:36 -0400] oddover: gotcha. thanks
[2013-03-15 18:55:49 -0400] siezer: running a server is stupid easy since chef11 btw
[2013-03-15 18:56:11 -0400] siezer: its a black box, all batteries incuded affair
[2013-03-15 18:56:41 -0400] oddover: yea. the problem I have with server is that there's no docs on how to make it HA and/or distributed
[2013-03-15 18:57:21 -0400] oddover: we need the chef server to be up all the time, and be able to handle massive amounts of traffic, and we haven't found a good way to do that.
[2013-03-15 18:57:35 -0400] siezer: define massive
[2013-03-15 18:58:03 -0400] oddover: 1000-3000 probably. not quite sure
[2013-03-15 18:58:19 -0400] oddover: I guess massive is overkill
[2013-03-15 18:58:58 -0400] oddover: that's number of nodes, btw
[2013-03-15 19:00:11 -0400] roidrage: the question of how HA you need your chef server to be depends on how much fluctuation you have in your infrastructure
[2013-03-15 19:00:30 -0400] roidrage: if you scale up and down quickly, it might be a bigger problem than when you have a pretty defined number of nodes
[2013-03-15 19:01:12 -0400] oddover: yea. we could potentially be scaling quite a bit
[2013-03-15 19:01:41 -0400] oddover: btw, this is for a university, just to give you some context
[2013-03-15 19:01:45 -0400] roidrage: sure, but in a bursty fashion or over time?
[2013-03-15 19:01:55 -0400] oddover: not sure about that
[2013-03-15 19:02:15 -0400] oddover: we'd like to have our chef server up all the time
[2013-03-15 19:02:18 -0400] roidrage: the less bursty you are, the less you can probably worry about Chef HA
[2013-03-15 19:02:27 -0400] roidrage: yes, but you technically don't need it to be up all the time
[2013-03-15 19:02:39 -0400] roidrage: your servers and services will still run even when chef server is down temporarily
[2013-03-15 19:02:46 -0400] roidrage: that's what i'm getting at :)
[2013-03-15 19:02:54 -0400] jtimberman: oddover: hey :)
[2013-03-15 19:02:58 -0400] roidrage: it's going to be inconvenient, for sure :)
[2013-03-15 19:03:15 -0400] bean__: could always look at hosted chef, then its not on you
[2013-03-15 19:03:30 -0400] roidrage: haha, it'll still be down occasionally though :)
[2013-03-15 19:03:37 -0400] jtimberman: roidrage: naw!
[2013-03-15 19:03:41 -0400] jtimberman: ;)
[2013-03-15 19:03:41 -0400] roidrage: just get jtimberman to sign a 100% SLA for you!
[2013-03-15 19:03:47 -0400] oddover: yea, that makes sense. technically, we probably don't need it up all the time, but we will have many sys admins using it to make changes to their services, and if it's not up all the time, they will be forced to make changes manually on their systems.
[2013-03-15 19:04:01 -0400] roidrage: oddover: absolutely understandable.
[2013-03-15 19:04:18 -0400] roidrage: jtimberman: it's fine! multi-tenant infrastructure services are hard :)
[2013-03-15 19:04:23 -0400] jtimberman: roidrage: totally
[2013-03-15 19:04:30 -0400] oddover: jtimberman: hey
[2013-03-15 19:07:46 -0400] oddover: so is anyone doing some sort of HA setup for server/client?
[2013-03-15 19:07:55 -0400] oddover: I'd be curious to hear how it could work
[2013-03-15 19:08:59 -0400] siezer: private chef is done in an active-passive manner with DRBD, heartbeat, and a float IP
[2013-03-15 19:09:07 -0400] siezer: you can make anything HA like that ;)
[2013-03-15 19:11:02 -0400] oddover: ok
[2013-03-15 19:21:12 -0400] nathenharvey: roidrage: http://docs.opscode.com/chef_client.html now includes documentation of fork and a bunch of other changes https://github.com/opscode/chef-docs/commit/e12e7c9568c8e761355515c522c21fd0bf7c8265
[2013-03-15 19:29:21 -0400] roidrage: nathenharvey <3 <3 <3 thank you!
[2013-03-15 19:35:26 -0400] oddover: so, I just read this: http://docs.opscode.com/chef_overview_server.html
[2013-03-15 19:36:00 -0400] oddover: which wasn't around a few months ago. what I'm wondering is how nginx and erchef are distributed.
[2013-03-15 19:37:25 -0400] oddover: is anyone using the architecture described there in an HA/distributed fashion? Or better yet, are there docs out there about it?
[2013-03-15 19:48:33 -0400] ranjibd: oddover: for opensource chef?
[2013-03-15 19:49:11 -0400] ranjibd: private chef has drbd built in, iirc ,but I have never used it
[2013-03-15 19:49:45 -0400] oddover: ranjibd: yea opensource
[2013-03-15 19:53:41 -0400] ranjibd: oddover: the init scripts are not based on runit, i think they are lsb compliant, doing drbd + pacemaker should not be difficult then
[2013-03-15 19:53:58 -0400] ranjibd: sorry.. they are based on runit :-)
[2013-03-15 19:54:06 -0400] gleam: yeah they're runit
[2013-03-15 19:54:57 -0400] oddover: I'm not familiar with drbd, and I'm only slightly familiar with pacemaker
[2013-03-15 19:55:13 -0400] oddover: what does drbd do?
[2013-03-15 19:55:26 -0400] ranjibd: drbd does the content replication.. at block device level
[2013-03-15 19:55:39 -0400] ranjibd: while pacemaker checks the health and does the switch over
[2013-03-15 19:56:23 -0400] oddover: ok. so drbd makes the two (or more) nodes be in sync, and then if one goes down, pacemaker fixes it so the secondary node becomes primary?
[2013-03-15 19:56:34 -0400] ranjibd: precisely
[2013-03-15 19:57:00 -0400] oddover: gotcha. so you'd run that setup on the chef server host?
[2013-03-15 19:57:26 -0400] ranjibd: yes
[2013-03-15 19:57:50 -0400] oddover: and then would the DB be on that host, or a separate host?
[2013-03-15 19:59:05 -0400] ranjibd: oddover: you can employ other strategy also.. may be putting a tcp load balancer like squid/haproxy in front and keep the pg database clustered.. that will make the setup both load balanced as well as HA
[2013-03-15 19:59:20 -0400] gamafranco: hi
[2013-03-15 19:59:46 -0400] gamafranco: I'm having trouble starting the passenger mod, after installing with the passenger_apache2 recipe
[2013-03-15 19:59:48 -0400] ranjibd: oddover: same host. right now the opensource omnibus installers keeps everything in the same host.. but you can split it up
[2013-03-15 20:00:06 -0400] gamafranco: someone has this running?
[2013-03-15 20:00:10 -0400] ranjibd: gamafranco: can you share the stack trace ?
[2013-03-15 20:00:32 -0400] gamafranco: https://gist.github.com/gamafranco/5172694
[2013-03-15 20:00:54 -0400] oddover: ranjibd: ok. that makes sense. for your second strategy, is nginx another example of tcp load balancer?
[2013-03-15 20:00:55 -0400] gamafranco:     'recipe[passenger_apache2::mod_rails]',
[2013-03-15 20:01:05 -0400] gamafranco: I installed passenger with this recipe
[2013-03-15 20:01:38 -0400] ranjibd: oddover: not sure.. never used it for tcp.. have used it for L7 , http load balancing
[2013-03-15 20:02:14 -0400] oddover: ranjibd: ok. I'm speaking directly about this picture: http://docs.opscode.com/chef_overview_server.html
[2013-03-15 20:02:18 -0400] knuckolls_: oddover: i'd use haproxy for tcp load balancing
[2013-03-15 20:02:26 -0400] knuckolls_: dead simple
[2013-03-15 20:02:32 -0400] ranjibd: but if you want SSL termination.. you have to consider nginx.. haproxy cant do that out of the box , though theres a patch available for the same.
[2013-03-15 20:02:48 -0400] gamafranco: it seems apache can't find the mod, and I'm a bit lost. passenger was installed using chef's ruby
[2013-03-15 20:03:24 -0400] knuckolls_: ranjibd: true, i think the 1.5beta release has it built in. i've heard of people using it in production successfully
[2013-03-15 20:03:34 -0400] psi0nik: haproxy actually can do ssl termination as of fairly recently.
[2013-03-15 20:03:55 -0400] ranjibd: oh.. nice.. oddover there you go,
[2013-03-15 20:04:11 -0400] psi0nik: haven't actually used it, but it's there :)
[2013-03-15 20:04:27 -0400] ranjibd: i've been using it with stud or stunnel
[2013-03-15 20:04:36 -0400] oddover: ok. so the architecture for that idea would be the same one as pictured in that diagram, except you'd have haproxy instead of nginx?
[2013-03-15 20:05:17 -0400] miah: ranjibd: actually, haproxy does have ssl support in 1.5 brach. not sure if it has reached full stability yet though.
[2013-03-15 20:05:32 -0400] miah: stud is still what i'd recommend
[2013-03-15 20:05:44 -0400] timsmith1: 1.5 is still in dev
[2013-03-15 20:05:47 -0400] miah: nginx proxy has some failures as it doesn't support streaming of content
[2013-03-15 20:05:56 -0400] miah: so it will store->forward
[2013-03-15 20:06:05 -0400] miah: which can be detremental to your performance and sanity
[2013-03-15 20:06:28 -0400] miah: timsmith1: ya, and i ran it at cx.com as their primary uri routing engine. worked fine =)
[2013-03-15 20:06:57 -0400] miah: just make sure to follow the mailing list and watch for gotcha's and make sure your integration tests still pass.
[2013-03-15 20:07:05 -0400] timsmith1: I'm looking forward to the final release of 1.5
[2013-03-15 20:07:07 -0400] oddover: ok, but the idea is to have some sort of front-end load balancer (which software is debatable) in front of the chef server?
[2013-03-15 20:07:17 -0400] jtimberman: opscode cook code review https://plus.google.com/hangouts/_/deb07333214dc14d45e929f498e557292e30a4f2
[2013-03-15 20:07:23 -0400] ranjibd: oddover: not necessarily ..
[2013-03-15 20:07:29 -0400] jtimberman: oddover: chef 11 has nginx built in in front of the api
[2013-03-15 20:07:39 -0400] ranjibd: that was one way if doing .. HA
[2013-03-15 20:08:08 -0400] miah: http://blog.exceliance.fr/2012/09/10/how-to-get-ssl-with-haproxy-getting-rid-of-stunnel-stud-nginx-or-pound/
[2013-03-15 20:08:21 -0400] miah: pound is full of memory leaks fwiw
[2013-03-15 20:08:35 -0400] miah: stunnel just has bad performance
[2013-03-15 20:09:15 -0400] AskSteve: I'm trying to set a linux passwd on a user.  I'm using the users data bag and the users recipe.  I've added the password: hash to the users data bag and I've included the users LWRP, but I don't see where I have to call any functions to get the users to get updated.  Any suggestions?
[2013-03-15 20:11:57 -0400] knuckolls_: jtimberman: dunno if this is the right review for knife-ec2 but i'm hoping to get this merged. https://github.com/opscode/knife-ec2/pull/93
[2013-03-15 20:12:02 -0400] ranjibd: gamafranco: can you share the full chef run log.. looks like the module was not installed  , also  which version of passenger_apache you are using?
[2013-03-15 20:12:14 -0400] gamafranco: 2.0.0
[2013-03-15 20:12:31 -0400] knuckolls_: jtimberman: i'd hop in that hangout to discuss it, but i'm in the loudest coffee shop today
[2013-03-15 20:12:39 -0400] gamafranco: passenger was installed - the so is on chef/.../gems
[2013-03-15 20:12:56 -0400] gamafranco: ranjibd: but it seems apache doesn't know where to look for the mod
[2013-03-15 20:14:03 -0400] miah: gamafranco: sounds like you chef_gem when you should have 'gem'
[2013-03-15 20:15:40 -0400] ranjibd: miah: but in both cases it should drop the module at node['passenger']['module_path']
[2013-03-15 20:16:08 -0400] miah: maybe.
[2013-03-15 20:16:25 -0400] miah: but if youre using two different rubies there could be some confusion
[2013-03-15 20:16:47 -0400] gamafranco: miah: i used the recipe passenger_apache2::mod_rails
[2013-03-15 20:16:57 -0400] gamafranco: that's how passenger was installed
[2013-03-15 20:17:06 -0400] miah: ya. i vowed to never use that cookbook after reviewing its code 2 years ago
[2013-03-15 20:17:12 -0400] miah: it didnt work how i needed it to
[2013-03-15 20:17:18 -0400] miah: so i have no idea how things work in it these days
[2013-03-15 20:17:47 -0400] knuckolls_: miah, gamafranco: fwiw at my previous job i ran into this and i had to hack things to get it to install passenger in the right spot
[2013-03-15 20:17:53 -0400] knuckolls_: like.. 4/5 months ago
[2013-03-15 20:18:04 -0400] gamafranco: arghhh :)
[2013-03-15 20:18:05 -0400] miah: ya. i just use unicorn and nginx these days
[2013-03-15 20:18:07 -0400] knuckolls_: one of those get it done keep moving moments
[2013-03-15 20:18:22 -0400] ranjibd: now its maintained by opscode .. so it should be  fine..
[2013-03-15 20:18:38 -0400] gamafranco: the problem with unicorn are the init scripts. the cookbooks don't have a nice init script :|
[2013-03-15 20:19:00 -0400] gamafranco: ok, thanks
[2013-03-15 20:19:35 -0400] gamafranco: I'll check the recipes code to figure out why the passenger.conf file was not coppied to mods-available
[2013-03-15 20:20:42 -0400] gamafranco: hmmm
[2013-03-15 20:20:59 -0400] gamafranco: it seems the recipe doesn't have a default value to node[apache][dir]
[2013-03-15 20:21:52 -0400] HarvesterOfBeer: hello. Is there a clean way to remove a user from a group?
[2013-03-15 20:22:22 -0400] HarvesterOfBeer: I see the 'group' resource can easily add a user, but I don't see a way to remove a specific user.
[2013-03-15 20:22:43 -0400] miah: the same way it adds a user
[2013-03-15 20:22:51 -0400] miah: just supply it with a new array that doesn't have the user in it
[2013-03-15 20:23:18 -0400] miah: though that could be broken, i haven't really reviewed that code
[2013-03-15 20:25:23 -0400] AskSteve: I'm trying to use the users cookbook to change a password.  I've created the data bag and added the recipe to the run list, but it doesn't change the password.  Any suggestions?
[2013-03-15 20:25:24 -0400] gamafranco: miah: is there a way to force a reinstall?
[2013-03-15 20:25:52 -0400] gamafranco: AskSteve: do you get an error about ruby shadow?
[2013-03-15 20:26:22 -0400] AskSteve: nope
[2013-03-15 20:26:38 -0400] AskSteve: no mention of shadow at all
[2013-03-15 20:28:31 -0400] oddover: can anyone tell me what the postgres DB stores in this picture? http://docs.opscode.com/chef_overview_server.html
[2013-03-15 20:29:00 -0400] gamafranco: AskSteve: you're calling the add_user method on the recipe? like creating a new user with the same login?
[2013-03-15 20:29:20 -0400] AskSteve: I don't know how to call the add_users method
[2013-03-15 20:30:05 -0400] gamafranco: http://stackoverflow.com/questions/12573208/how-to-create-a-user-with-generic-users-chef-cookbook
[2013-03-15 20:30:13 -0400] gamafranco: AskSteve: it's just like creating a new user
[2013-03-15 20:32:22 -0400] AskSteve: looks like that bypasses the data bags that the users recipe has you create
[2013-03-15 20:34:25 -0400] gamafranco: hm
[2013-03-15 20:34:28 -0400] gamafranco: i asee
[2013-03-15 20:35:54 -0400] rudyl313: so I recently installed the latest version of chef and now my my apt_repository resource in my R recipe is failing.. I tried updating my apt cookbook, but no dice.. can anybody suggest a fix?
[2013-03-15 20:37:21 -0400] gsat: Hi opscode platform (hosted chef) user name , client  and node name all need to sane at node registartion? is ther any doc , which explains this ?
[2013-03-15 20:38:21 -0400] gsat: i.e username should be same as client/node name ?
[2013-03-15 20:38:26 -0400] martinisoft: rudyl313: whats the failure? any backtrace in a gist?
[2013-03-15 20:39:16 -0400] rudyl313: martinisoft: maybe this is a bad time to be asking, because I don't have access to that right now..
[2013-03-15 20:39:23 -0400] rudyl313: martinisoft: maybe I should come back when I do
[2013-03-15 20:39:26 -0400] AskSteve: gamafranco looks like that worked, thanks!
[2013-03-15 20:39:30 -0400] rudyl313: martinisoft: just thought maybe it was a common problem
[2013-03-15 20:39:41 -0400] gamafranco: AskSteve: anytime
[2013-03-15 20:39:56 -0400] rudyl313: martinisoft: the gist of the error message was "Unable to find resource apt_repository for Ubuntu 12.04"
[2013-03-15 20:40:19 -0400] ranjibd: gsat: yeah
[2013-03-15 20:40:35 -0400] ranjibd: gsat: you can download the knife.rb from their web console directly
[2013-03-15 20:40:39 -0400] ranjibd: and check it out
[2013-03-15 20:40:44 -0400] martinisoft: rudyl313: possible that the cookbook doesn't support that platform then. can modify the cookbook separately and test it for the time being, maybe a pull request to that cookbook to update it
[2013-03-15 20:41:00 -0400] rudyl313: martinisoft: ok thanks
[2013-03-15 20:41:08 -0400] martinisoft: rudyl313: check the metadata.rb file for any version constraints
[2013-03-15 20:41:53 -0400] rudyl313: jtimberman: do you think my problem could stem from what martinisoft is saying?
[2013-03-15 20:42:10 -0400] rudyl313: jtimberman: I noticed that you maintain the apt cookbook
[2013-03-15 20:42:25 -0400] gsat: ranjibd:that was not the case with opensource chef
[2013-03-15 20:43:06 -0400] ranjibd: gsat: opensource chef does not have the notion of organization.. its bit different from the private/hosted one
[2013-03-15 20:43:40 -0400] yfeldblum: what's the right way to install a gem into the fullstack rubygems (like chef_gem) but only during convergence, not during recipe-compilation?
[2013-03-15 20:44:01 -0400] rudyl313: martinisoft: looks like "ubuntu" is supported.. maybe the issue is that newer chef version are parsing the distro as "ubuntu 12.04" instead of just "ubuntu"
[2013-03-15 20:44:18 -0400] rudyl313: not sure how fuzzy that match is
[2013-03-15 20:44:52 -0400] benkay: when I run chef-server and see "no such file to load -- chef (LoadError)", what does that even mean?
[2013-03-15 20:45:42 -0400] gsat: How is the org to user mapping ? do we need to create a user per org if we need isolation at org level?
[2013-03-15 20:45:44 -0400] ranjibd: yfeldblum: gem_package supposed to work like that....no?
[2013-03-15 20:46:04 -0400] gsat: ranjibd: How is the org to user mapping ? do we need to create a user per org if we need isolation at org level?
[2013-03-15 20:46:10 -0400] ranjibd: gsat: no.. they are shared.. you can add /remove them from org
[2013-03-15 20:46:22 -0400] yfeldblum: ranjibd, doesn't look like it to me - https://github.com/opscode/chef/blob/10.24.0/chef/lib/chef/provider/package/rubygems.rb#L345
[2013-03-15 20:46:24 -0400] cap10morgan: what's the most up-to-date guide to writing LWRP's?
[2013-03-15 20:49:05 -0400] ranjibd: cap10morgan: its pretty much same as before, just add the dry run support ..
[2013-03-15 20:49:19 -0400] ranjibd: and dont do chef 11 incompatible stuff
[2013-03-15 20:49:39 -0400] cap10morgan: I'm seeing things like recipe_eval in there now which isn't mentioned in the fundamentals doc I was looking at.
[2013-03-15 20:49:47 -0400] cap10morgan: is that needed to use the recipe DSL now?
[2013-03-15 20:51:32 -0400] gsat: ranjibd: Is it recommended to have a user per org? what is the best practice?
[2013-03-15 20:52:31 -0400] ranjibd: yfeldblum: that code block ensures that you get a alternate gem env while running omnibus, but using gem_package. not sure why that should install stuff at compile phase
[2013-03-15 20:52:57 -0400] ranjibd: gsat: ideally not, and i dont think its supported either
[2013-03-15 20:52:59 -0400] yfeldblum: ranjibd, the chef_gem resource triggers itself to run during compile
[2013-03-15 20:53:08 -0400] yfeldblum: ranjibd, with an after_create hook
[2013-03-15 20:53:37 -0400] ranjibd: users are independent of orgs.
[2013-03-15 20:54:10 -0400] benkay: so i'm trying to bring up a chef-server instance, and when I run: chef-server > knife config -i, I receive back "no such file to load -- chef"
[2013-03-15 20:54:39 -0400] benkay: what is this "chef" file I'm apparently supposed to be looking for?
[2013-03-15 20:55:16 -0400] leifmadsen: howdy kids. I'm trying to test out the chef-server 2.0.0 version so that I can use the omnibus installation methods (since the 1.1.1 version doesn't seem to work, it bombs out). However, the examples in the Vagrantfile seem to show I can specify a version, but using:  "chef-server" => { "version" => "10.24.0" } seems to not take. Still attempts to install 11.x
[2013-03-15 20:57:13 -0400] ranjibd: benkay: looks like a gem load error
[2013-03-15 20:57:51 -0400] benkay: pretty similar to what i thought. so i ran gem install chef
[2013-03-15 20:57:54 -0400] benkay: and that went fine
[2013-03-15 20:58:07 -0400] benkay: and error persists.
[2013-03-15 20:59:16 -0400] ranjibd: benkay: are you using rbenv/rvm ?
[2013-03-15 20:59:24 -0400] benkay: no.
[2013-03-15 20:59:42 -0400] ranjibd: can you share the stacktrace?
[2013-03-15 20:59:52 -0400] ranjibd: knife configure -i -VV
[2013-03-15 21:00:34 -0400] benkay: http://dpaste.com/1024172/
[2013-03-15 21:01:48 -0400] benkay: and running chef-server returns this: http://dpaste.com/1024175/
[2013-03-15 21:02:38 -0400] ranjibd: benkay: gem env path
[2013-03-15 21:03:10 -0400] benkay: (slash)var/lib/gems/1.8:/home/deploy/.gem/ruby/1.8
[2013-03-15 21:03:11 -0400] gsat: ranjibd: so node_name in the knife.rb is user name? can it be other then "user" name and still pass the .pem file of "user" name
[2013-03-15 21:03:27 -0400] ranjibd: gsat: no
[2013-03-15 21:03:46 -0400] ranjibd: gsat: chef uses that value for authentication
[2013-03-15 21:04:16 -0400] gsat: ranjidb : node name in the client.rb and knife.rb should be same if we plan to use it as workstation and chef node?
[2013-03-15 21:04:40 -0400] ranjibd: given thats a vanilla ruby file.. you can do some custom foo.. like "#{ENV['USER']}"
[2013-03-15 21:04:56 -0400] ranjibd: gsat: client.rb is required by chef-client
[2013-03-15 21:04:58 -0400] leifmadsen: oh so I think the issue I'm having is that this 2.0.0 version of the chef-server cookbook only supports chef server 11
[2013-03-15 21:05:06 -0400] ranjibd: so its present in chef managed servers
[2013-03-15 21:05:33 -0400] ranjibd: while knife.rb is present in your workstation .. from where you'll work
[2013-03-15 21:06:01 -0400] ranjibd: theres a knife-server knife plugin. try that instead
[2013-03-15 21:06:21 -0400] benkay: was that directed at me ranjibd?
[2013-03-15 21:06:44 -0400] ranjibd: yeah
[2013-03-15 21:06:58 -0400] ranjibd: benkay: check wit gem env path
[2013-03-15 21:07:33 -0400] benkay: (/)var/lib/gems/1.8:/home/ben/.gem/ruby/1.8
[2013-03-15 21:07:34 -0400] ranjibd: that chef is installed in that folder or not.
[2013-03-15 21:07:39 -0400] benkay: kk
[2013-03-15 21:07:47 -0400] benkay: i understand what you're saying now
[2013-03-15 21:07:55 -0400] gsat: ranjibd:correct, node_name in client.rb  and knife.rb should be same ? if they are used as a chef node and workstation?
[2013-03-15 21:08:05 -0400] ranjibd: yeah
[2013-03-15 21:08:40 -0400] ranjibd: but gsat. traditionally the client are chef node .. who dont have write permissions.. so they caan only fetch data from chef-server and post their own shit back
[2013-03-15 21:08:45 -0400] ranjibd: but cant write anything
[2013-03-15 21:08:59 -0400] ranjibd: while the knife.rb generally has a admin client
[2013-03-15 21:09:12 -0400] ranjibd: which can write things.. so you can edit client, node, etc
[2013-03-15 21:09:28 -0400] ranjibd: in general chef calls them client, or api-client to be precise
[2013-03-15 21:09:58 -0400] ranjibd: and they are of two types.. admin (the one we use for knife.rb ) and non -admin (the ones we use for nodes/servers)
[2013-03-15 21:11:16 -0400] ranjibd: chef 11 introduces a separate domain object .. users.. which is kinda api-client .. but they are separate (im not sure how functionally they are different).. but you can independently enlist, create, delate , update them
[2013-03-15 21:12:03 -0400] ranjibd: gotta go..will be back in 2 hrs
[2013-03-15 21:24:51 -0400] benkay: what was the gem env command again?
[2013-03-15 21:33:04 -0400] maek: this is not chef related but Im not really sure where else to pose this question. Im trying to get geminabox using runit. Im using the runit cookbook and rbenv. If I execute the chpst command from the cli using the env vars set in the geminabox runit service dir everything works. I can also do "bash run" and it works. As soon as I try and start geminabox via the service command it tells me rbenv: version `1.9.3-p392' is not installed but it clearly 
[2013-03-15 21:54:15 -0400] miah: a different user is executing it (root via runit), and likely your runsv script doesn't contain the rbenv details so that it knows where to fetch your ruby install.
[2013-03-15 21:54:42 -0400] maek: miah: nginx is doing it. I think maybe its that I dont have rbenv_root set
[2013-03-15 21:54:51 -0400] maek: I thought i had globally installed rbenv
[2013-03-15 22:14:32 -0400] maek: miah: yarg. It was missing rbenv_root - i thought you could do version instead of root :( ty
[2013-03-15 22:16:02 -0400] gsat: On EC2 node how can we deregister a chef node/client at shutdown time?, any pointers please
[2013-03-15 22:20:12 -0400] miah: build a workflow around disabling a node that also notifies the chef server to delete it instead of manually clicking the ec2 instance and terminating it.
[2013-03-15 22:20:26 -0400] miah: chef and aws have handy dandy api's
[2013-03-15 22:21:33 -0400] tomdz: knife ec2 server delete --purge, if you're using that
[2013-03-15 22:24:21 -0400] cbake: howdy!
[2013-03-15 22:24:35 -0400] async_io: anybody here using spiceweasel with a mix of community and their own cookbooks?
[2013-03-15 22:25:51 -0400] cbake: what causes a new OHC chef-client node to be looking at localhost for it's role info? - ERROR: Connection refused connecting to localhost:4000 for /search/role, retry 1/5
[2013-03-15 22:27:01 -0400] stensonb1: @cbake - check client.rb for the chef-server url...looks to be pointing to localhost
[2013-03-15 22:28:35 -0400] cbake: chef_server_url  "https://api.opscode.com/organizations/myorgname"   (yes myorgname is something different)
[2013-03-15 22:29:11 -0400] cbake: we bootstrap ec2 instances alot with knife, and this info hasnt changed since we started
[2013-03-15 22:29:42 -0400] sascha_d: dear chefs, I'm having trouble with my boolean search
[2013-03-15 22:29:42 -0400] sascha_d: I need to find nodes of a particular name type that are missing a role
[2013-03-15 22:30:55 -0400] cbake: if it perhaps not reading the client.rb file? is there a cli option for chef-client on the node to specify the client.rb? similar to -f ./first-boot.json ?
[2013-03-15 22:36:40 -0400] bluekelp: sascha_d: knife search node "NOT role:foo"
[2013-03-15 22:36:50 -0400] sascha_d: @bluekelp yeah I got that part
[2013-03-15 22:36:58 -0400] rava: hey all, so i've a pickle. i've got a config file that i'm dropping as a template, but the binary will occasionally write attribute values into this file that are used and needed for program state
[2013-03-15 22:37:10 -0400] sascha_d: when I paired it with a wild carded name, it hated on me
[2013-03-15 22:37:25 -0400] sascha_d: I finally did the NOT first and then the name search after that
[2013-03-15 23:13:35 -0400] tomdz: what is the preferred way to do one-shot recipes these days ? Still https://github.com/sebastianmoreno/chef-cookbooks/blob/master/one-shot/recipes/default.rb ?
[2013-03-15 23:15:21 -0400] cwj: tomdz: under chef 11 you can use chef-apply
[2013-03-15 23:16:27 -0400] tomdz: that's executed similar to chef-client ?
[2013-03-15 23:17:00 -0400] tomdz: sadly, I'm on 10.24 for the time being
[2013-03-15 23:17:11 -0400] scalp421: tomdz: looks like it https://github.com/opscode/chef/pull/594/files
[2013-03-15 23:20:19 -0400] randoum: Hi everyone. I'm looking for help please. I'm trying to implement ufw cookbook but I get Chef::Exceptions::ImmutableAttributeModification exception
[2013-03-15 23:24:39 -0400] gchristensen: so beyond 'knife diff' - any good tools for reconciling changes between the server and my repository? I'm inheriting it from someone who didn't know up from down, it seems.
[2013-03-15 23:25:55 -0400] randoum: @gchristensen: hi, can you help me for a simple question on ufw cookbook?
[2013-03-15 23:27:02 -0400] gchristensen: unfortunately not. have you googled it, randoum?
[2013-03-15 23:27:47 -0400] randoum: yes, for hours
[2013-03-15 23:28:03 -0400] tomdz: randoum: chef 11 ?
[2013-03-15 23:28:29 -0400] gchristensen: randoum: I've found a number of pull requests into other cookbooks that fix it: https://github.com/DanThiffault/rails-lastmile/pull/12 -- read the description and the fix.
[2013-03-15 23:28:45 -0400] randoum: chef solo, last version. when I use the recipe ufw, I got an exception ImmutableAttributeModification
[2013-03-15 23:29:02 -0400] randoum: thanks gchristensen, I'll check
[2013-03-15 23:29:04 -0400] tomdz: randoum: if chef 11, then check out http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-03-15 23:29:21 -0400] randoum: thanks tomdz
[2013-03-15 23:29:56 -0400] randoum: thanks guys, those seem to be the right direction :) cheers
[2013-03-15 23:33:26 -0400] randoum: I'm a bit surprised though, after reading yout link tomdz I understand that I have to modify ufw files provided by the cookbook
[2013-03-15 23:34:20 -0400] tomdz: randoum: have you tried updating the cookbook ? Seems like the fixes have been made a few days ago: https://github.com/opscode-cookbooks/ufw/commit/b27944e40ac2df520446299ef3d500f4ce6db50d
[2013-03-15 23:34:36 -0400] randoum: yes ok, I'll do that now
[2013-03-15 23:34:38 -0400] randoum: thanks again :)
[2013-03-15 23:38:35 -0400] faustroll: I'm using hosted chef
[2013-03-15 23:38:44 -0400] randoum: and that was simply it.  old story: when you struggle, update your files :)
[2013-03-15 23:38:56 -0400] randoum: cheers, bye guys. thanks again
[2013-03-15 23:39:17 -0400] faustroll: and I'm trying to knife ssh to node with knife ssh role:your_role
[2013-03-15 23:39:52 -0400] faustroll: and I get an error: node found but does not have the required attribute
[2013-03-15 23:40:10 -0400] faustroll: to establish the connection
[2013-03-15 23:40:28 -0400] faustroll: I dont know what the attribute would be offhand
[2013-03-15 23:40:32 -0400] tomdz: faustroll: ec2 ?
[2013-03-15 23:40:36 -0400] faustroll: no
[2013-03-15 23:40:42 -0400] faustroll: rackspace
[2013-03-15 23:41:01 -0400] faustroll: I'm coming late to this party
[2013-03-15 23:41:18 -0400] faustroll: i'm just trying to run more recipes on this node
[2013-03-15 23:41:36 -0400] tomdz: try adding -a ipaddress (literally) to the knife cmd
[2013-03-15 23:41:48 -0400] faustroll: tomdz: will do
[2013-03-15 23:41:54 -0400] faustroll: i tried doman and hostname
[2013-03-15 23:41:58 -0400] faustroll: domain
[2013-03-15 23:43:06 -0400] faustroll: tomdz: no joy
[2013-03-15 23:43:47 -0400] tomdz: faustroll: do a knife show for the node, and check what you get back
[2013-03-15 23:43:55 -0400] tomdz: or knife search
[2013-03-15 23:44:19 -0400] faustroll: will do
[2013-03-15 23:47:37 -0400] faustroll: tomdz: I get a bunch of info for that node. what is relevant?
[2013-03-15 23:49:17 -0400] tomdz: faustroll: check things like domain, fqdn, ipaddress, to see if they are returned (I think you need -v to see all attributes)
[2013-03-15 23:49:43 -0400] sascha_d_: I'm still fighting with search.  knife search node "name:*pen* AND NOT role:myrole" gets me nodes without that role, but doesn't filter names
[2013-03-15 23:50:03 -0400] sascha_d_: I am accepting suggestions
[2013-03-15 23:50:19 -0400] sascha_d_: I can get one or the other but have not managed to get both
[2013-03-15 23:55:35 -0400] miah: put paren's around both
[2013-03-15 23:55:44 -0400] faustroll: tomdz: aha. I think i see. this node has a novalocal domain
[2013-03-15 23:55:55 -0400] miah: (name:fo*) AND (NOT role:bar)
[2013-03-15 23:57:56 -0400] sascha_d_: yes I'm experimenting with moar parens
[2013-03-15 23:58:02 -0400] sascha_d_: PAREN ALL THE THINGS
[2013-03-15 23:58:16 -0400] sascha_d_: knife search node "(name:*pen*) (NOT role:encoder)"
[2013-03-15 23:58:18 -0400] sascha_d_: that failed
[2013-03-15 23:58:19 -0400] paulmooring: sascha_d_: drop the AND
[2013-03-15 23:58:56 -0400] sascha_d_: I'm getting names like this in my search results: sc8a-por013
[2013-03-15 23:59:33 -0400] sascha_d_: and that one worked so badly that those results had wrong names and included the role I'm filtering
[2013-03-15 23:59:37 -0400] paulmooring: how about: `knife search node "name:*pen* -role:myrole"
[2013-03-15 23:59:41 -0400] miah: https://lucene.apache.org/core/3_6_2/queryparsersyntax.html

[2013-03-05 00:00:19 -0500] tamouse__: page: https://manage.opscode.com/
[2013-03-05 00:00:41 -0500] tamouse__: paige: do you know how to make sure a recipe upgrades a gem_package?
[2013-03-05 00:01:10 -0500] paigeat: er
[2013-03-05 00:01:16 -0500] tamouse__: i need a new version at 0.0.4, and chef-client keeps giving 0.0.3
[2013-03-05 00:01:22 -0500] paigeat: oh
[2013-03-05 00:01:31 -0500] tamouse__: i have gem_package action :upgrade
[2013-03-05 00:01:36 -0500] btm: paigeat: files are in checksum cache, but the magic linking the cookbook segments to the files is in the database. deleting by hand is not recommended.
[2013-03-05 00:02:15 -0500] tamouse__: for re-uploading, can't you just bump the version numbers in metadata.rb?
[2013-03-05 00:02:20 -0500] paigeat: tamouse__: maybe execute... doesn't see any arguements for ver for gem resource
[2013-03-05 00:02:54 -0500] paigeat: btm: fuck I keep getting this end of file thing, its not a production server its for testing
[2013-03-05 00:02:57 -0500] tamouse__: i am looking at this: http://docs.opscode.com/chef/resources.html#gem-package-options
[2013-03-05 00:02:59 -0500] paigeat: I'd just like to get it working
[2013-03-05 00:03:06 -0500] paigeat: dont really feel like reinstalling
[2013-03-05 00:03:22 -0500] btm: paigeat: if you're using knife 11+ on your workstation, something like "knife cookbook bulk delete '.*' --purge"
[2013-03-05 00:03:31 -0500] tamouse__: ok, weirdness possibly: make sure your files end with a \n
[2013-03-05 00:03:33 -0500] paigeat: oh what
[2013-03-05 00:03:35 -0500] paigeat: nice
[2013-03-05 00:03:39 -0500] btm: paigeat: pre chef 11, you could get bulk delete from the knife-essentials gem.
[2013-03-05 00:03:48 -0500] paigeat: ive not upgraded to chef-client 11 yet
[2013-03-05 00:03:52 -0500] paigeat: I tested it briefly
[2013-03-05 00:03:56 -0500] paigeat: it doesn't work for me yet
[2013-03-05 00:04:06 -0500] paigeat: I need to fix a lot of stuff before I can upgrade to it
[2013-03-05 00:04:15 -0500] kallistec: bulk delete has been there since 0.9
[2013-03-05 00:04:46 -0500] tamouse__: yeah, i see it in 10.16.2
[2013-03-05 00:05:02 -0500] jkeiser: knife-essentials still installs with 11
[2013-03-05 00:05:11 -0500] jkeiser: But also works against 10
[2013-03-05 00:05:49 -0500] paigeat:  Permanently remove files from backing data store
[2013-03-05 00:05:54 -0500] paigeat: as in /root/chef-repo
[2013-03-05 00:06:17 -0500] jkeiser: knife delete -R /cookbooks (or maybe -r) to delete all cookbooks  knife delete -R /cookbooks/apache* to delete everything starting with apache
[2013-03-05 00:06:29 -0500] paigeat: great that worked btm thank you :)
[2013-03-05 00:06:33 -0500] paigeat: just dropped --purge
[2013-03-05 00:10:12 -0500] paigeat: hmmm
[2013-03-05 00:11:03 -0500] tamouse__: CRIKEY
[2013-03-05 00:11:09 -0500] tamouse__: what the HELL am i supposed to DO???
[2013-03-05 00:11:58 -0500] mani_: hey guys what are the reasosn I keep getting failed to authenticate when I have created the key for the client on the server as per the opscoe wiki doc?
[2013-03-05 00:12:08 -0500] mani_: i also adjusted the ntp time on both machines
[2013-03-05 00:16:48 -0500] paigeat: tamouse__: I'd just do an execute "gem upgrade whatevs" do
[2013-03-05 00:17:06 -0500] zts: tamouse__: it should work the way you did it.  What does your chef-client log say it's doing?
[2013-03-05 00:17:07 -0500] paigeat: someone made an rvm cookbook
[2013-03-05 00:17:20 -0500] paigeat: that might have an example of how to do it with the gem resource if it can be done
[2013-03-05 00:19:17 -0500] miah: https://github.com/fnichol/chef-rvm
[2013-03-05 00:20:18 -0500] tamouse__: zts: here's the log output from that recipe: http://pastebin.com/StnkxBJ7
[2013-03-05 00:20:33 -0500] tamouse__: we use rbenv on the servers
[2013-03-05 00:20:52 -0500] tamouse__: when i specified the explicit version, it worked.
[2013-03-05 00:21:14 -0500] tamouse__: but i should have to bump the version in the recipes/default.rb whenever the gem upgrades
[2013-03-05 00:21:22 -0500] tamouse__: should NOT have to....
[2013-03-05 00:21:37 -0500] tamouse__: right?
[2013-03-05 00:21:43 -0500] tamouse__: if not given, just use the newest?
[2013-03-05 00:24:36 -0500] zts: tamouse__: I didn't think so.. could you try that with debug logging?  Or using --why-run, which should be more explicit about what it's deciding to do, and why
[2013-03-05 00:25:25 -0500] tamouse__: err. well, i just forced it to upgrade by specifying the latest version...
[2013-03-05 00:26:30 -0500] tamouse__: lemme just bump the version on the gem itself and we can go at it again
[2013-03-05 00:27:25 -0500] async_io: anybody ever try to use spiceweasel with Omnibus chef on OSX (Snow Leopard)?  If so, how do you get it to hit /opt/opscode/... ruby install versus system without hand-hacking /usr/bin/spiceweasel to fix the hashbang?
[2013-03-05 00:34:13 -0500] wdpro_kevin: Ohai Chefs
[2013-03-05 00:34:34 -0500] tamouse__: ohai
[2013-03-05 00:34:45 -0500] wdpro_kevin: Anyone have a "knife exec" command to clear a node  attribute?
[2013-03-05 00:35:39 -0500] wdpro_kevin: or delete an attribute
[2013-03-05 00:35:46 -0500] ssd7: wdpro_kevin: node has a delete method which removes an attribute
[2013-03-05 00:35:47 -0500] ssd7: so
[2013-03-05 00:35:51 -0500] wdpro_kevin: I tied something like this: { |n| n.users.delete }   but no bueno
[2013-03-05 00:36:19 -0500] ssd7: knife exec -E 'n = nodes.show("node_name"); n.delete(:users); n.save'
[2013-03-05 00:36:24 -0500] ssd7: something like that should work
[2013-03-05 00:36:31 -0500] wdpro_kevin: ah
[2013-03-05 00:36:51 -0500] paigeat: for fucks sake
[2013-03-05 00:37:01 -0500] paigeat: everytime it tries to get a cookbook
[2013-03-05 00:37:07 -0500] paigeat: it says error end of file reached.
[2013-03-05 00:37:14 -0500] paigeat: even after deleting all of them and reuploading them
[2013-03-05 00:37:43 -0500] ssd7: paigeat: Is this on hosted or your own chef server?
[2013-03-05 00:38:07 -0500] paigeat: own
[2013-03-05 00:38:14 -0500] paigeat: I think Im just gonna have to reinstall the whole vm
[2013-03-05 00:38:19 -0500] paigeat: id really rather not tho
[2013-03-05 00:38:26 -0500] paigeat: I'd liket o understand how this works :P
[2013-03-05 00:38:31 -0500] ssd7: Are you using SSL?
[2013-03-05 00:38:42 -0500] paigeat: hmmmm
[2013-03-05 00:39:01 -0500] paigeat: I dont think thats the issue because in the webui I can't even view the cookbook
[2013-03-05 00:39:04 -0500] paigeat: it gives me the same error
[2013-03-05 00:39:46 -0500] paigeat: I'll try switching the uri to https tho
[2013-03-05 00:39:51 -0500] wdpro_kevin: ssd7 {{hugs}}
[2013-03-05 00:40:15 -0500] ssd7: paigeat: Ah, my guess would have been bad ssl termination, if you aren't using it already, I wouldn't expect turning it on to fix it.
[2013-03-05 00:40:22 -0500] ssd7: paigeat: Is this Chef 11?
[2013-03-05 00:40:26 -0500] ssd7: wdpro_kevin: :)
[2013-03-05 00:40:33 -0500] paigeat: not ssl.
[2013-03-05 00:40:37 -0500] paigeat: no way
[2013-03-05 00:40:37 -0500] paigeat: lol
[2013-03-05 00:40:45 -0500] paigeat: 10.25
[2013-03-05 00:41:20 -0500] ssd7: 10.25?
[2013-03-05 00:41:34 -0500] paigeat: maybe I should delete the couchdb db, and the solr db and start fresh, I know how to do the solr one how do I redo the rabbitmq and couch
[2013-03-05 00:42:30 -0500] paigeat: does the couchdb have to be sourced or do you just give it a user and pass and let it go to town
[2013-03-05 00:42:47 -0500] paigeat: its nosql so theres no schema
[2013-03-05 00:44:05 -0500] miah: there is a schema. but its built into chef.
[2013-03-05 00:44:41 -0500] ssd7: paigeat: I'm unsure what you are asking.  Cookbooks are ultimately just stored on disk though, so you might want to ensure that the uploaded files are what you expect, perhaps see if anything more telling is in the server-side logs.
[2013-03-05 00:45:14 -0500] paigeat: curl -X DELETE http://localhost:8888/test/
[2013-03-05 00:45:30 -0500] paigeat: now put
[2013-03-05 00:45:43 -0500] volker-: ++
[2013-03-05 00:46:26 -0500] jubilo: anyone do capistrano/ruby crap?
[2013-03-05 00:46:31 -0500] jubilo: erm, sorry, wrong window
[2013-03-05 00:47:05 -0500] paigeat: and rabbitmq is already clear
[2013-03-05 00:47:31 -0500] paigeat: cool so I should be starting fresh here.
[2013-03-05 00:49:00 -0500] tamouse__: ok, seriously. i add -l debug and -W, and suddenly chef-client is throwing errors??
[2013-03-05 00:49:23 -0500] ssd7: tamouse__: Can you provide some more context?
[2013-03-05 00:51:29 -0500] miah: preferably gists of your error
[2013-03-05 00:52:08 -0500] tamouse__: sure
[2013-03-05 00:52:18 -0500] tamouse__: i was running chef-client with no options before
[2013-03-05 00:52:32 -0500] miah: thats fine so long as you have a client.rb in /etc/chef
[2013-03-05 00:52:36 -0500] tamouse__: you told me to add debug logging and why-run to see
[2013-03-05 00:52:42 -0500] tamouse__: so i did
[2013-03-05 00:53:05 -0500] tamouse__: and suddenly other recipes are failing with nil dereferencing errors
[2013-03-05 00:53:13 -0500] tamouse__: completely separate from the one i'm working on
[2013-03-05 00:53:27 -0500] tamouse__: apologies
[2013-03-05 00:53:30 -0500] tamouse__: someone told me to
[2013-03-05 00:53:44 -0500] ssd7: tamouse__: If you post a gist or pastebin of the errors, I'd be happy to take a look
[2013-03-05 00:54:39 -0500] ssd7: Could be a bug, could be related to why-run mode, could be related to a state change that happened between commands.  Hard to say without looking at the specific error message.
[2013-03-05 00:57:13 -0500] tamouse__: here's the one throwing the error when i specify chef-client -l debug -W: http://pastebin.com/4pDbFZvv
[2013-03-05 00:57:34 -0500] tamouse__: my previous problem had to do with a gem not getting upgraded
[2013-03-05 00:58:05 -0500] tamouse__: here's the log just specifying -l debug, no -W: http://pastebin.com/RK42jMf2
[2013-03-05 00:58:50 -0500] ssd7: hrmm
[2013-03-05 00:58:54 -0500] ssd7: where do you set the run_state?
[2013-03-05 00:59:10 -0500] ssd7: Could it be inside something that isn't being executed because you are in why-run mode?
[2013-03-05 00:59:15 -0500] ssd7: such as a ruby_block resource?
[2013-03-05 01:00:34 -0500] tamouse__: i don't know
[2013-03-05 01:01:06 -0500] tamouse__: i was looking at another problem entirely, was told to look at why-run, and that is the result
[2013-03-05 01:01:26 -0500] tamouse__: that's not the problem i am trying to solve
[2013-03-05 01:01:47 -0500] tamouse__: this is the problem i'm trying to solve:
[2013-03-05 01:01:50 -0500] tamouse__: [2013-03-05T00:49:46+00:00] DEBUG: gem_package[rds-s3-backup] found installed gem rds-s3-backup version 0.0.4 matching rds-s3-backup (>= 0)
[2013-03-05 01:01:53 -0500] tamouse__: [2013-03-05T00:49:46+00:00] DEBUG: gem_package[rds-s3-backup] no candidate version - nothing to do
[2013-03-05 01:02:02 -0500] tamouse__: i want it to install version 0.0.5
[2013-03-05 01:02:29 -0500] miah: specify the version as '>= 0.0.1'
[2013-03-05 01:02:43 -0500] tamouse__: in fact, what i want is for it to always install the latest version
[2013-03-05 01:03:06 -0500] ssd7: OK. What does the resource definition currently look like for that gem_package?
[2013-03-05 01:05:02 -0500] tamouse__: http://pastebin.com/A6ywdCHE
[2013-03-05 01:05:17 -0500] tamouse__: notice i have commented out the version
[2013-03-05 01:05:25 -0500] tamouse__: that's how i forced it to get to 0.0.4
[2013-03-05 01:07:03 -0500] ssd7: tamouse__: I think that is a bug.  You might want to try miah's workaround.
[2013-03-05 01:07:15 -0500] tamouse__: i'll give it a go
[2013-03-05 01:08:42 -0500] miah: ya
[2013-03-05 01:08:49 -0500] miah: https://github.com/opscode/chef/blob/master/lib/chef/provider/package/rubygems.rb#L541
[2013-03-05 01:09:01 -0500] miah: its basically just an alias
[2013-03-05 01:09:05 -0500] miah: so you should specify the version
[2013-03-05 01:09:59 -0500] miah: and because its just doing a install and it sees that its already installed it wont actually do anything
[2013-03-05 01:10:55 -0500] tamouse__: [2013-03-05T01:10:08+00:00] DEBUG: gem_package[rds-s3-backup] found installed gem rds-s3-backup version 0.0.4 matching rds-s3-backup (>= 0.0.1)
[2013-03-05 01:10:58 -0500] tamouse__: [2013-03-05T01:10:08+00:00] DEBUG: gem_package[rds-s3-backup] no candidate version - nothing to do
[2013-03-05 01:11:08 -0500] miah: ya
[2013-03-05 01:11:17 -0500] miah: so where iw as going
[2013-03-05 01:11:23 -0500] tamouse__: i have to alwasy specify the version? :((
[2013-03-05 01:11:29 -0500] miah: no, but check this
[2013-03-05 01:11:39 -0500] miah: >= 0.0.1 means, greater than or equal to 0.0.1
[2013-03-05 01:11:45 -0500] miah: 0.0.4 is greater than
[2013-03-05 01:11:56 -0500] miah: so its satisfied
[2013-03-05 01:11:56 -0500] tamouse__: right...
[2013-03-05 01:12:03 -0500] miah: it wont do anything more
[2013-03-05 01:12:06 -0500] tamouse__: then how does one always get the latest version?
[2013-03-05 01:12:14 -0500] miah: use bundler :P
[2013-03-05 01:12:32 -0500] tamouse__: i need more info...
[2013-03-05 01:12:36 -0500] tamouse__: instead of what?
[2013-03-05 01:12:52 -0500] miah: bundle your gem installs rather than blindly installing gems to your system ruby
[2013-03-05 01:13:03 -0500] miah: https://github.com/opscode/chef/blob/master/lib/chef/provider/package/rubygems.rb#L541
[2013-03-05 01:13:08 -0500] tamouse__: this is a standalone script
[2013-03-05 01:13:36 -0500] tamouse__: and the environment is using rbenv
[2013-03-05 01:13:43 -0500] miah: rbenv works with bundler
[2013-03-05 01:14:02 -0500] tamouse__: still don't get it
[2013-03-05 01:14:19 -0500] tamouse__: doesn't bundler work with a Gemfile to know which gems to load?
[2013-03-05 01:14:30 -0500] miah: http://gembundler.com/
[2013-03-05 01:14:32 -0500] tamouse__: i mean, i *have* one in the gem, that's how it works there
[2013-03-05 01:15:08 -0500] tamouse__: but from a chef recipe, for a completely stand-alone gem script?
[2013-03-05 01:15:19 -0500] miah: its not stand alone though
[2013-03-05 01:15:24 -0500] miah: because i bet that gem depeneds on other gems
[2013-03-05 01:15:32 -0500] tamouse__: sure
[2013-03-05 01:15:35 -0500] miah: and when one of those gems updates and causes your primary gem to fail
[2013-03-05 01:15:38 -0500] miah: you're going to cry
[2013-03-05 01:15:38 -0500] tamouse__: like i said, the gem has a Gemfile
[2013-03-05 01:15:59 -0500] tamouse__: and i'm using bundler to dev and test it
[2013-03-05 01:16:17 -0500] tmichael: trying to get hpcloud data into ohai, but not working.  found this:
[2013-03-05 01:16:20 -0500] tmichael: http://tickets.opscode.com/browse/OHAI-425
[2013-03-05 01:16:39 -0500] tamouse__: but i don't get how to use bundler to install it on the target system
[2013-03-05 01:16:45 -0500] tamouse__: i thought that's what gem was for
[2013-03-05 01:16:46 -0500] tmichael: just not sure best way to implement that workaround into env
[2013-03-05 01:16:55 -0500] tmichael: until it gets merged and released.
[2013-03-05 01:17:12 -0500] miah: well, you can either patch gem_package to handle updates correctly, always specify the minimum viable version in your chef recipe, or use bundler to segregate your application environment and ensure all its dependencies are correctly met.
[2013-03-05 01:17:21 -0500] miah: bundler manages gems
[2013-03-05 01:17:35 -0500] miah: http://gembundler.com/v1.3/bundle_install.html
[2013-03-05 01:17:37 -0500] tamouse__: from a chef recipe?
[2013-03-05 01:17:51 -0500] miah: sure, you can manage bundles. but you might need to use chef-rbenv
[2013-03-05 01:18:18 -0500] miah: https://github.com/fnichol/chef-rbenv
[2013-03-05 01:19:19 -0500] miah: but you could just as easily write a recipe that executed bundler a in specific directory
[2013-03-05 01:19:23 -0500] miah: not that i would endorse using the execute resource =)
[2013-03-05 01:20:54 -0500] tamouse__: how do i get the most recent version of the gem from rubygems using bundler?
[2013-03-05 01:21:09 -0500] jamescarr: someone said that IBM might be purchasing opscode
[2013-03-05 01:21:15 -0500] tamouse__: i can understand how i might be able to run bunlder when said gem is there
[2013-03-05 01:21:17 -0500] jamescarr: please tell me this won't be tryue
[2013-03-05 01:21:30 -0500] miah: jamescarr: i call bs
[2013-03-05 01:21:45 -0500] miah: tamouse__: all the info required is at gembundler.com
[2013-03-05 01:22:01 -0500] jamescarr: miah: yeah I'm thinking bullshit like the rumor BMC was going to buy puppetlabs
[2013-03-05 01:22:23 -0500] tamouse__: i find that site impossible to navigate to find what i need
[2013-03-05 01:24:01 -0500] miah: tamouse__: just read all the pages then. it wont take you more than a few minutes.
[2013-03-05 01:24:27 -0500] miah: and you'll end up with a better understanding of how people manage complex gem dependencies
[2013-03-05 01:24:40 -0500] zts: \
[2013-03-05 01:24:41 -0500] miah: totally worthwhile =)
[2013-03-05 01:24:48 -0500] tamouse__: crikey
[2013-03-05 01:24:52 -0500] tamouse__: it's just a simple gem
[2013-03-05 01:24:55 -0500] tamouse__: like this: http://gembundler.com/v1.3/rubygems.html
[2013-03-05 01:25:00 -0500] tamouse__: that's what i did
[2013-03-05 01:25:12 -0500] tamouse__: the gem sits up on rubygems.org
[2013-03-05 01:25:47 -0500] miah: yes, bundler has a generator to lay out a directory structure and some default files.
[2013-03-05 01:25:51 -0500] tamouse__: got down to the end, did gem build rds-s3-backup.gemspec
[2013-03-05 01:26:03 -0500] tamouse__: then gem push rds-s3-backup-0.0.5.gem
[2013-03-05 01:26:16 -0500] tamouse__: now i want that gem to be installed on a server
[2013-03-05 01:26:22 -0500] tamouse__: it's not part of anything else
[2013-03-05 01:26:25 -0500] miah: http://gembundler.com/#getting-started
[2013-03-05 01:26:27 -0500] miah: pretty simple
[2013-03-05 01:26:33 -0500] tamouse__: i've read it
[2013-03-05 01:26:45 -0500] tamouse__: several times
[2013-03-05 01:27:47 -0500] tamouse__: nothingn on there says anything about installing your gem from rubygems onto another machine
[2013-03-05 01:28:02 -0500] tamouse__: it is not a gem that is in another application's Gemfile
[2013-03-05 01:28:08 -0500] tamouse__: it is not in ANY Gemfiles
[2013-03-05 01:28:12 -0500] tamouse__: or gemspecs
[2013-03-05 01:28:20 -0500] tamouse__: it is, as i say, stand-alone
[2013-03-05 01:29:26 -0500] miah: the last link i pasted tells you how to do exactly that
[2013-03-05 01:29:32 -0500] tamouse__: IT DOES NOT
[2013-03-05 01:29:44 -0500] miah: regardless that it is 'stand alone' if you want proper gem versioning you should build out a Gemfile and bundle install.
[2013-03-05 01:30:02 -0500] tamouse__: it only says how to add gems you want installed to a Gemfile
[2013-03-05 01:30:07 -0500] tamouse__: WHICH IS PART OF AN APPLICATION
[2013-03-05 01:30:12 -0500] tamouse__: this is not part of an application
[2013-03-05 01:30:16 -0500] miah: or it can be in a directroy
[2013-03-05 01:30:17 -0500] tamouse__: it is STAND ALONE
[2013-03-05 01:30:21 -0500] tamouse__: like
[2013-03-05 01:30:25 -0500] miah: look, if you want help try rage--
[2013-03-05 01:30:27 -0500] tamouse__: mysql
[2013-03-05 01:30:38 -0500] tamouse__: or cat
[2013-03-05 01:30:38 -0500] miah: create a Gemfile in /tmp
[2013-03-05 01:30:52 -0500] miah: put 'mygem', '>= 0.0.5'
[2013-03-05 01:30:54 -0500] miah: 'bundle install'
[2013-03-05 01:31:06 -0500] miah: not super duper hard
[2013-03-05 01:31:09 -0500] miah: and no rage required
[2013-03-05 01:31:11 -0500] miah: just go try it
[2013-03-05 01:31:28 -0500] tamouse__: please tell me *exactly* where is says that on the #getting started page?
[2013-03-05 01:31:39 -0500] miah: Specify your dependencies in a Gemfile in your project's root:
[2013-03-05 01:31:44 -0500] miah: ^- shows you the contents of a Gemfile
[2013-03-05 01:31:52 -0500] miah: then directly benieht that
[2013-03-05 01:31:57 -0500] miah: Install all of the required gems from your specified sources:
[2013-03-05 01:32:00 -0500] miah: $ bundle install
[2013-03-05 01:32:17 -0500] tamouse__: why does "in your project's root" translate to /tmp?
[2013-03-05 01:32:31 -0500] miah: it translates to "whatever fucking directory i imagine"
[2013-03-05 01:32:35 -0500] tamouse__: not to me
[2013-03-05 01:33:17 -0500] miah: nobody can define your project, or its root directory other than you
[2013-03-05 01:33:42 -0500] tamouse__: my project's root directory is on my machine where i'm developing the project
[2013-03-05 01:33:55 -0500] miah: right, but imagine on the server you're installing your application to
[2013-03-05 01:34:11 -0500] miah: where you want to deploy your gem, and know that the system ruby gems wont conflict in any way
[2013-03-05 01:34:21 -0500] miah: where you want to ensure your gems dependencies are correctly met
[2013-03-05 01:34:47 -0500] miah: where you can manage those dependencies and the installation and upgrade of those gems
[2013-03-05 01:35:26 -0500] miah: that is the point of bundler. its basically 'rpm' for your gems. it will figure out what is required and install that.
[2013-03-05 01:35:40 -0500] miah: realize that installing a newer version of a dependant gem to the system could fubar your whole project
[2013-03-05 01:35:46 -0500] miah: segregation is key to stability in complex systems
[2013-03-05 01:36:28 -0500] miah: i need to head home now, but i wish you luck on your project. feel free to ask more questions if you have them and i might get to them within the hour.
[2013-03-05 01:36:46 -0500] miah: others here may help as well of course =)
[2013-03-05 01:39:54 -0500] async_io: @nathenharvey (or anybody else): anybody ever try to use spiceweasel with Omnibus chef on OSX? If so, how do you get it to hit /opt/opscode/... ruby install versus system without hand-hacking /usr/bin/spiceweasel to fix the hashbang?
[2013-03-05 01:42:40 -0500] flaccid_: btm: hmm i wonder if there is any clever way to do that with the curl -L | sudo bash command for -v VERSION
[2013-03-05 01:44:27 -0500] tamouse__: my apologies
[2013-03-05 01:44:30 -0500] solarce: tamouse__: 1. you need to chill out 2. you need to read http://docs.opscode.com/community_code_of_conduct.html 3. you need to remember that you're in a channel where people are volunteering to help you with an open source peace of software, which you got for free, so be kind, courteous, and appreciative that you're getting good advice from smart people
[2013-03-05 01:44:39 -0500] solarce: piecE*
[2013-03-05 01:44:44 -0500] solarce: anyway
[2013-03-05 01:45:14 -0500] tamouse__: i have to get this script working, and running around chasing after why chef doesn't actually do what it's documentation says, and then getting sent off after bundler, which is something i'd have to code around and figure out
[2013-03-05 01:45:20 -0500] async_io: flaccid: did you mean that curl -L thing for me?
[2013-03-05 01:45:20 -0500] tamouse__: and this has to be done and working
[2013-03-05 01:45:29 -0500] flaccid_: async_io: negative
[2013-03-05 01:45:36 -0500] solarce: tamouse__: learning to use any complex piece of software is going to involve a certain amount of yak shaving ( http://projects.csail.mit.edu/gsb/old-archive/gsb-archive/gsb2000-02-11.html ), you just have to lean into it
[2013-03-05 01:46:16 -0500] tamouse__: and if i'm struggling with understanding something, repetition is not going to help
[2013-03-05 01:46:44 -0500] tamouse__: having read the bundler docs over and over and over many times did not reveal anything that i could use in this regard
[2013-03-05 01:46:50 -0500] tamouse__: rtfm has already been done
[2013-03-05 01:47:11 -0500] tamouse__: nothing in the chef documentation tells me that i have to specify the specific version i want to upgrade to
[2013-03-05 01:47:32 -0500] tamouse__: and then being told go rewrite rubygems
[2013-03-05 01:47:53 -0500] tamouse__: and *after* i've spent time here helping others as well
[2013-03-05 01:47:54 -0500] flaccid_: hmm, how do you do remote_file or file with a mode to do +x ?
[2013-03-05 01:48:21 -0500] flaccid_: i guess 7 octal is enough
[2013-03-05 01:48:28 -0500] doomviking: yep
[2013-03-05 01:48:37 -0500] tamouse__: saying over and over "it's all there, just read it" after i've read and read and read
[2013-03-05 01:48:44 -0500] flaccid_: doomviking: for me?
[2013-03-05 01:48:49 -0500] doomviking: flaccid_: yep
[2013-03-05 01:48:53 -0500] flaccid_: doomviking: danke!
[2013-03-05 01:50:49 -0500] solarce: tamouse__: did you pastebin your recipe?
[2013-03-05 01:52:50 -0500] tamouse__: quite a while ago, i just closed all the windows
[2013-03-05 01:53:08 -0500] tamouse__: it doesn
[2013-03-05 01:53:10 -0500] tamouse__: t matter
[2013-03-05 01:53:17 -0500] tamouse__: at this point i know what i need to do
[2013-03-05 01:53:20 -0500] tamouse__: it's stupid
[2013-03-05 01:53:23 -0500] tamouse__: but i can do it
[2013-03-05 01:54:53 -0500] solarce: tamouse__: it sounds like all you need is https://gist.github.com/solarce/4daeb058cc334e2a7106
[2013-03-05 02:05:19 -0500] tamouse__: solarce: that is exactly what i did
[2013-03-05 02:06:14 -0500] kallistec: tamouse__: did it not install 0.0.5 ?
[2013-03-05 02:06:20 -0500] tamouse__: yes
[2013-03-05 02:06:35 -0500] tamouse__: err
[2013-03-05 02:06:37 -0500] tamouse__: it did install
[2013-03-05 02:06:44 -0500] kallistec: tamouse__: which is what you wanted?
[2013-03-05 02:06:45 -0500] tamouse__: i never know how to answer questions put that way
[2013-03-05 02:06:48 -0500] tamouse__: yes
[2013-03-05 02:06:51 -0500] tamouse__: but
[2013-03-05 02:07:08 -0500] tamouse__: now when i make a change to the gem, i have to remember to go back and change the version in the recipe as well
[2013-03-05 02:07:22 -0500] kallistec: tamouse__: is this _your_ gem?
[2013-03-05 02:07:25 -0500] tamouse__: yes
[2013-03-05 02:07:53 -0500] kallistec: ah, I see. was catching up on backscroll
[2013-03-05 02:08:08 -0500] kallistec: anyway, does `action :upgrade` do what you want?
[2013-03-05 02:08:12 -0500] tamouse__: i may not have made that clear, not that it matters
[2013-03-05 02:08:18 -0500] tamouse__: no
[2013-03-05 02:08:43 -0500] tamouse__: what upgrade seems to do, is keep whatever version it has installed that satisfies verion >= 0
[2013-03-05 02:08:53 -0500] tamouse__: unless you specify a version
[2013-03-05 02:09:09 -0500] tamouse__: not how i read teh docu at all
[2013-03-05 02:10:01 -0500] kallistec: lemme test
[2013-03-05 02:10:20 -0500] tamouse__: feel free, i've been at it all day , practically
[2013-03-05 02:10:48 -0500] kallistec: yeah, seems like a bug to me
[2013-03-05 02:14:43 -0500] kallistec: seems like it's this: http://tickets.opscode.com/browse/CHEF-3929
[2013-03-05 02:17:36 -0500] ggolin: guys can someone please explain the clause in line 31 https://github.com/opscode-cookbooks/database/blob/master/recipes/master.rb
[2013-03-05 02:18:44 -0500] tamouse__: there, i just filed a ticket: https://www.opscode.com/support/tickets/14065
[2013-03-05 02:19:37 -0500] tamouse__: ggolin: which part?
[2013-03-05 02:19:54 -0500] ggolin: the part in ()s
[2013-03-05 02:21:02 -0500] tamouse__: the contents of app['database_master_role'] is being bit-wise ANDED with nodes.run_list.roles - which should give a true value if database_master_role is in the current set of roles in the run list
[2013-03-05 02:21:43 -0500] ggolin: why .each then
[2013-03-05 02:22:18 -0500] tamouse__: let me rephrase: a 'truthy' value
[2013-03-05 02:22:28 -0500] tamouse__: it will still be an array
[2013-03-05 02:22:35 -0500] ggolin: iterable
[2013-03-05 02:22:39 -0500] tamouse__: yus
[2013-03-05 02:22:42 -0500] ggolin: er enumerable
[2013-03-05 02:22:50 -0500] tamouse__: well, same idea :)
[2013-03-05 02:23:00 -0500] ggolin: and if it is not truthy
[2013-03-05 02:23:24 -0500] ggolin: ok this is designed to run on a node with the db master role applied.
[2013-03-05 02:23:38 -0500] ggolin: thank you
[2013-03-05 02:23:40 -0500] ggolin: tamouse__,
[2013-03-05 02:23:44 -0500] tamouse__: sure
[2013-03-05 02:23:57 -0500] tamouse__: i have to admit, this is not a recipe i'm familiar with at all
[2013-03-05 02:24:13 -0500] tamouse__: so that was just a bare reading of the code that is there
[2013-03-05 02:25:29 -0500] ggolin: thats what i wanted because i cant get it to work :)
[2013-03-05 02:25:39 -0500] ggolin: so, i thought, maybe im not getting something.
[2013-03-05 02:29:41 -0500] tamouse__afk: thanks
[2013-03-05 02:29:47 -0500] tamouse__afk: and again, my apologies
[2013-03-05 02:36:35 -0500] jubilo: I am certain this has been asked before
[2013-03-05 02:37:01 -0500] jubilo: but: is there a good way to push changes to clients rather than logging into each box and running chef-client manually or waiting for it to run on its own?
[2013-03-05 02:37:17 -0500] miah: there isnt a way to push to clients
[2013-03-05 02:37:54 -0500] miah: set lower intervals, or have another app handle receiving the message and telling chef-client to restart
[2013-03-05 02:37:55 -0500] jubilo: mkay
[2013-03-05 02:38:07 -0500] jubilo: that's kind of what I thought, thanks
[2013-03-05 02:38:08 -0500] ebollens: You can use knife ssh to invoke it
[2013-03-05 02:38:13 -0500] miah: yes
[2013-03-05 02:49:08 -0500] flaccid_: hmm in a template, how do you loop through an @array and comma separate it so the last doesn't have a trailing comma or the first doesn't have a leading comma?
[2013-03-05 02:49:28 -0500] flaccid_: some_directive [ "foo", "bar" ]
[2013-03-05 02:50:08 -0500] kallistec: flaccid_: Array#join
[2013-03-05 02:50:53 -0500] flaccid_: kallistec: thats an erb thing?
[2013-03-05 02:51:03 -0500] kallistec: no, just ruby
[2013-03-05 02:51:26 -0500] kallistec: %w[ a b c ].join(",") #=> "a,b,c"
[2013-03-05 02:51:27 -0500] flaccid_: kallistec: i should pre join in the recipe for the template resource?
[2013-03-05 02:52:45 -0500] kallistec: matter of preference. Ideally, code in the template should only be concerned with presenting the data and not doing "business logic"
[2013-03-05 02:52:59 -0500] kallistec: so in this case, in the template seems fine
[2013-03-05 02:53:07 -0500] flaccid_: kallistec: ok i can pre join, but i also need to encapsulate each in
[2013-03-05 02:53:13 -0500] flaccid_: quoted " literals
[2013-03-05 02:54:28 -0500] kallistec: flaccid_: so do something like "\"#{things.join('", "')}\""
[2013-03-05 02:58:29 -0500] flaccid_: kallistec: ah yeah nice trick, so basically :cookbook_path => node['chef']['solo']['cookbook_path'].join('", "'),
[2013-03-05 02:58:48 -0500] flaccid_: template is cookbook_path [ <%= @cookbook_path %> ]
[2013-03-05 03:23:45 -0500] flaccid_: kallistec: :cookbook_path => node['chef']['solo']['cookbook_path'].join('", "') doesn't come out in the template :( and wouldn't using something like  "\"#{things.join('", "')}\"" just surrond it in quotes instead of each key in the array?
[2013-03-05 03:24:33 -0500] flaccid_: i fink i can do this in the attributes .each i'md oing
[2013-03-05 03:26:21 -0500] flaccid_: hmm dats not the right spot though
[2013-03-05 03:29:52 -0500] bluekelp: i know it's frowned upon but i'm using the "execute" provider in a recipe to run an existing script before it's ported to better/chef methods.  problem is, the daemons (JVMs) this script runs seem to be killed by chef at the end of the chef-client run. how can i avoid this?
[2013-03-05 03:32:10 -0500] flaccid_: working now sweet
[2013-03-05 03:42:11 -0500] ggolin: jtimberman, im sorry man, but this part keeps breaking for me and i think im misunderstanding the intention here in line 31: https://github.com/opscode-cookbooks/database/blob/master/recipes/master.rb
[2013-03-05 03:42:28 -0500] thor__: hi all
[2013-03-05 03:42:33 -0500] ggolin: what should app[database_master_role] contain?
[2013-03-05 03:42:38 -0500] ggolin: hi
[2013-03-05 03:43:09 -0500] thor__: got a problem running chef client to create knife.rb
[2013-03-05 03:43:20 -0500] thor__: client 11.04 server 11.06
[2013-03-05 03:43:28 -0500] ggolin: the error im getting is: undefined method `&' for "testapp_database_master":String
[2013-03-05 03:43:32 -0500] thor__: ERROR: Connection refused connecting to ip-10-76-254-167.ec2.internal:4000
[2013-03-05 04:08:10 -0500] solarce: jubilo: mcollective could be a good fit for push stuff if you don't already have some kind of c&c automation
[2013-03-05 04:38:03 -0500] jeevan: Hi I am unable to configure my laptop running on ubuntu as chef node
[2013-03-05 04:38:13 -0500] jeevan: I am not able to see the FQDN
[2013-03-05 04:39:56 -0500] flaccid_: qiot
[2013-03-05 04:39:58 -0500] flaccid_: oops
[2013-03-05 04:55:42 -0500] ssd7: Ohai Chefs
[2013-03-05 08:52:04 -0500] mixandgo: hello, any idea why I don't have the /usr/sbin/nxensite script after installing the nginx package ?
[2013-03-05 09:16:58 -0500] st0ne2thedge: Hey all! looking for a way to use the execute resourse to store the output from my shell stout, any suggestions?
[2013-03-05 09:20:35 -0500] st0ne2thedge: in other words, i execute a shell command and i want to see what output that shell command gives me
[2013-03-05 09:27:08 -0500] ranjibd: stonevil: use mixlib::shellout library and the ruby_block resource
[2013-03-05 09:27:44 -0500] ranjibd: st0ne2thedge: ^^
[2013-03-05 09:29:13 -0500] st0ne2thedge: ranjibd: I just noticed how https://github.com/opscode/chef/blob/master/lib/chef/provider/execute.rb uses it, would this be a proper source to learn the ways? ^^
[2013-03-05 09:29:35 -0500] ranjibd: yeah
[2013-03-05 09:30:03 -0500] mixandgo: whats the resource collection ? "service[nginx] cannot be found in the resource collection"
[2013-03-05 09:30:03 -0500] ranjibd: execute resource will let you run the command but wont capture the output
[2013-03-05 09:30:11 -0500] ranjibd: shellout will do so
[2013-03-05 09:30:55 -0500] ranjibd: mixandgo: when you apply a recipe/runlist against a node,, it gets expanded into a set of resources... kinda array of different resources
[2013-03-05 09:31:42 -0500] ranjibd: Chef has a clss that represents this ,, called as resource collection, chef uses this collection to notify one resource from another , also to check if those resources are present or not
[2013-03-05 09:32:06 -0500] mixandgo: ranjibd: so what does it mean it can't find a resource ?
[2013-03-05 09:32:57 -0500] mixandgo: the nginx recipe is in my cookbooks folder
[2013-03-05 09:33:45 -0500] ranjibd: yeah,, it means that at that point of execution it cant find a resource named nginx, type service
[2013-03-05 09:33:46 -0500] st0ne2thedge: ranjibd: Do you happen to have a example on using the ShellOut to fetch the output, i'm fairly new to the ruby language
[2013-03-05 09:34:23 -0500] st0ne2thedge: ranjibd: i think this seems nice: https://github.com/opscode/mixlib-shellout
[2013-03-05 09:34:26 -0500] mixandgo: ranjibd: so what can I do ? do I need to require something ?
[2013-03-05 09:36:42 -0500] ranjibd: st0ne2thedge: https://gist.github.com/ranjib/5089081
[2013-03-05 09:36:47 -0500] mixandgo: ranjibd: I think I found it... I've included `include_recipe "nginx"` in my main recipe
[2013-03-05 09:37:08 -0500] ranjibd: mixandgo: awesome!
[2013-03-05 09:37:44 -0500] ranjibd: mixandgo: also, remember to add a "depends" clause in your recipe metadata
[2013-03-05 09:37:53 -0500] mixandgo: yeah I did have that
[2013-03-05 09:43:05 -0500] st0ne2thedge: ranjibd: it worked, very nice guidance good sir!
[2013-03-05 10:14:13 -0500] mixandgo: how can I install gems thru chef ?
[2013-03-05 10:14:39 -0500] ranjibd: mixandgo: gem_package "package_name"
[2013-03-05 10:17:28 -0500] mixandgo: doesn't seem to do anything
[2013-03-05 10:21:58 -0500] mixandgo: I've added: gem_package "bundler"
[2013-03-05 10:22:06 -0500] mixandgo: and it doesn't install bundler
[2013-03-05 10:52:00 -0500] mixandgo: ranjibd: I managed to get it to work but the install fails (my chef recipes weren't syncing with the server) "undefined method `last' for #<Gem::AvailableSet:0x000000022f3418>"
[2013-03-05 10:52:31 -0500] ranjibd: mixandgo: stack trace?
[2013-03-05 10:53:02 -0500] mixandgo: https://gist.github.com/mixandgo/5089488
[2013-03-05 10:56:48 -0500] ranjibd: mixandgo: looks like a bug to me
[2013-03-05 10:57:34 -0500] Rickky: Morning
[2013-03-05 10:59:25 -0500] ranjibd: Rickky: :-) 3 AM here
[2013-03-05 11:00:07 -0500] ranjibd: mixandgo: http://tickets.opscode.com/browse/CHEF-3933
[2013-03-05 11:00:18 -0500] Rickky: I am completely new to chef and are playing around with it. So far I all get how it works. Though I am just not getting this: Instead of downloading an off-the-shelf community.opscode.com zip I installed the knife gem and did knife cookbooks site install composer. The only listed dependency of composr (and in the metadata.rb) is php, which is already in my cookbooks/. Somehow knife also downloads python, xml, openssl, mysql and build-essential. Am I
[2013-03-05 11:00:36 -0500] Rickky: ranjibd UGT :)
[2013-03-05 11:01:14 -0500] ranjibd: Rickky: community cookbooks can have their own dependencies
[2013-03-05 11:01:35 -0500] ranjibd: and for cross platform stuff they use various distro specific dependencies
[2013-03-05 11:02:05 -0500] ranjibd: so, even if those bits are not used in the actual execution phase, the got pulled in
[2013-03-05 11:02:45 -0500] Rickky: ranjibd But the only listed dependency is php? It's just one recipe and attribute file and none of the other package are mentioned there?
[2013-03-05 11:03:00 -0500] ranjibd: as of now there is no platform specific dependency management. So u'll see cookbooks that depends/pulls down apt/yum etc stuff, even if they are not used together
[2013-03-05 11:03:02 -0500] gyre007: damn
[2013-03-05 11:03:18 -0500] ranjibd: Rickky: check the dependency of php
[2013-03-05 11:03:22 -0500] gyre007: looks like after I reinstalled chef on my workstation it completely IGNORES bootstrap script...
[2013-03-05 11:04:06 -0500] ranjibd: gyre007: how you are specifying the bootstrap script? --template-file ?
[2013-03-05 11:04:13 -0500] gyre007: -d
[2013-03-05 11:04:19 -0500] gyre007: like I did before I reinstalled chef
[2013-03-05 11:04:23 -0500] gyre007: on the workstation
[2013-03-05 11:04:57 -0500] ranjibd: should work.. what template you are using.. if thats absent it might default to omnibus/chef-full
[2013-03-05 11:05:01 -0500] gyre007: knifestag rackspace server create -r 'role[base]' --server-name mongo01 --node-name mongo01 --image 12421971 --flavor 3 -d omnibus
[2013-03-05 11:05:09 -0500] gyre007: thats what I run
[2013-03-05 11:05:38 -0500] Rickky: ranjibd Ah yeah that's it. PHP somehow depends on mysql, mysql depends on xxx and so on. I just realized these are just the signs of 'dependency hell'
[2013-03-05 11:06:22 -0500] Rickky: Kinda weird PHP depends on mysql though, when I ask for a bread at the bakery they don't also give me peanutbutter with it because I _might_ want to put peanutbutter on that bread
[2013-03-05 11:07:48 -0500] ranjibd: Rickky: :-)
[2013-03-05 11:07:54 -0500] gyre007: ranjibd: chef never gets bootstrapped on the server...
[2013-03-05 11:07:57 -0500] gyre007: at all
[2013-03-05 11:08:20 -0500] ranjibd: chef 11?
[2013-03-05 11:08:48 -0500] gyre007: no
[2013-03-05 11:08:50 -0500] gyre007: 10.18
[2013-03-05 11:09:01 -0500] gyre007: completely retarded...
[2013-03-05 11:09:13 -0500] ranjibd: im using the 11 currently ,,, works fine for me
[2013-03-05 11:09:17 -0500] gyre007: you reinstall chef from omnibus and it breaks all sorts of things...so annoying
[2013-03-05 11:09:37 -0500] ranjibd: gyre007: try out the knife-server gem, it fixes few common glitches
[2013-03-05 11:10:03 -0500] ranjibd: hmm... bad.. should be backward compatible
[2013-03-05 11:10:54 -0500] gyre007: arrrgh
[2013-03-05 11:11:04 -0500] gyre007: http://docs.opscode.com/knife_bootstrap.html
[2013-03-05 11:11:15 -0500] gyre007: clearly mentions where knife is looking for bootstrap scripts
[2013-03-05 11:11:24 -0500] gyre007: but it's nonsense...because it is not
[2013-03-05 11:12:19 -0500] ranjibd: gyre007: -VV and share the stack trace?
[2013-03-05 11:12:50 -0500] gyre007: yeah was just about to do that...
[2013-03-05 11:13:05 -0500] gyre007: will take a sec
[2013-03-05 11:16:09 -0500] gyre007: bootstrapping new server...
[2013-03-05 11:16:44 -0500] gyre007: maybe the omnibus is NOT looking into ~/.chef/ directory for bootstrap scripts...that would be plain retarded...
[2013-03-05 11:19:43 -0500] gyre007: ranjibd: looks like knife-rackspace is broken...
[2013-03-05 11:19:45 -0500] gyre007: omg
[2013-03-05 11:19:46 -0500] gyre007: https://gist.github.com/milosgajdos83/5089637
[2013-03-05 11:19:56 -0500] gyre007: it DOES find the bootstrap scipt as expected
[2013-03-05 11:20:33 -0500] gyre007: basically knife can't ssh in....on a NEWLY created Rackspace server...
[2013-03-05 11:20:35 -0500] gyre007: brills
[2013-03-05 11:21:00 -0500] ranjibd: gyre007: yeah.. its not a bootstrap template issue
[2013-03-05 11:21:03 -0500] ranjibd: its ssh related
[2013-03-05 11:21:12 -0500] ranjibd: what ssh params are you passing ?
[2013-03-05 11:21:24 -0500] ranjibd: check those... like -x, -i etc
[2013-03-05 11:22:12 -0500] ranjibd: remove everything from ssh-agent (ssh-add -D), and check if you can manually ssh into the instance using those params
[2013-03-05 11:22:27 -0500] gyre007: I'm not passing any...never did...this was always handled by Rackspace plugin
[2013-03-05 11:23:25 -0500] gyre007: if I use the password printed by Rackspace then I can ssh in...but that's something knife bootstrap should be doing...
[2013-03-05 11:23:26 -0500] ranjibd: then it was using the current user and ~/.ssg/id_rsa or similar stuff
[2013-03-05 11:23:34 -0500] gyre007: reading the password in, logging to the server via ssh
[2013-03-05 11:23:37 -0500] gyre007: and doing a bootstrap
[2013-03-05 11:23:49 -0500] gyre007: there is no SSH auth set up when you create a new Rackspace server...
[2013-03-05 11:38:21 -0500] gyre007: looks like omnibus chef on workstations is NO-GO
[2013-03-05 12:09:11 -0500] ranjibd: gyre007: yeah, workstations generally have rvm.rbenv etc installed which effect the GEM_PATH and other env variables, and omnibus might not work as expected
[2013-03-05 12:09:19 -0500] gyre007: nah
[2013-03-05 12:09:24 -0500] gyre007: it ws somethign else...
[2013-03-05 12:09:40 -0500] gyre007: it was ssh_user config in my knife which WAS working just fine before but it's not any more...arrgh
[2013-03-05 12:10:52 -0500] ranjibd: gyre007: default configs in knife has been changed a bit in chef 11. but you or on 10.x.
[2013-03-05 12:19:40 -0500] gyre007: really strange that it worked with chef gem and is NOT with omnibus
[2013-03-05 12:33:26 -0500] fabio__: hi guys, a common i think question
[2013-03-05 12:33:46 -0500] fabio__: Every run of chef-client, perform a apt-get update os my system
[2013-03-05 12:34:16 -0500] fabio__: can I have this updates only done when a new ppa or source is added?
[2013-03-05 12:34:18 -0500] fabio__: thanks!
[2013-03-05 12:36:30 -0500] gyre007: hah...it must be some recipe running it dude..
[2013-03-05 12:36:35 -0500] gyre007: you have to find which one...
[2013-03-05 12:59:56 -0500] Saritha_: I'm trying to install java thru opsworks, using cookbooks for java here https://github.com/opscode-cookbooks/java. Getting Caught exception during execution of custom recipe: java: Chef::Exceptions::CookbookNotFound. I strongly suspect it is to do with folder structure in /opt/aws/opsworks/current/site-cookbooks/. But don't know how to fix this. Any one came across this issue?
[2013-03-05 13:06:42 -0500] fabio__: ey, how can I redirect chef-client -l debug command to a file?
[2013-03-05 13:06:55 -0500] fabio__: if I try >/tmp/file it doesnt write anything
[2013-03-05 13:07:11 -0500] fabio__: if I tru 2>/tmp/file if dumps to my console
[2013-03-05 13:11:14 -0500] pikesley: --logfile ?
[2013-03-05 13:50:55 -0500] mixandgo: how do I install a module ? I need the passenger module with the nginx package
[2013-03-05 14:19:57 -0500] sabooky: I keep hearing that providers should be used instead of definitions as much as possible. What are the technical advantages of using a provider?
[2013-03-05 14:20:09 -0500] sabooky: (If there's a documentation comparing the two, could someone point me to it, I wasn't able to find it)
[2013-03-05 14:30:40 -0500] swinchen: Hi all.  Are there books available for chef along the same lines as "Pro Puppet"?  Doing a search in Amazon for "Chef" isn't really working for me.
[2013-03-05 14:30:52 -0500] rep0st: hehe
[2013-03-05 14:31:05 -0500] bjensen: swinchen: check out the peepcode episodes on chef, very helpful :)
[2013-03-05 14:31:06 -0500] rep0st: swinchen: the best documentation i could find was the wiki pages
[2013-03-05 14:31:47 -0500] swinchen: Alright, thanks for the tips!
[2013-03-05 14:42:39 -0500] jmara: hey guys, can anyone tell me where I find the webui templates of chef-server 11?
[2013-03-05 14:46:54 -0500] rep0st: swinchen: i also forgot to mention. This chat room has been probably the #1 documentation source for me.
[2013-03-05 14:47:09 -0500] rep0st: swinchen: they archive the chat logs to be searchable.
[2013-03-05 15:19:02 -0500] gp5st: is there a way look up attributes in multiple environments in a recipie? i have a "utility" server, that i want to be able to grab the ip address of all of the database servers (the db servers are not under chef control, they are just ip address we're sticking in the env)
[2013-03-05 15:21:38 -0500] knuckolls: gp5st: you can likely use the chef server api to grab the other environments and extract information out of them. by default, it's going to mix in whatever environment your node is in to the utility server's node object
[2013-03-05 15:22:02 -0500] knuckolls: you can likely do that straight w/ internal chef functions from a recipe, or leverage a gem like ridley. https://github.com/reset/ridley
[2013-03-05 15:22:28 -0500] gp5st: knuckolls: ok, thanks
[2013-03-05 15:22:38 -0500] gp5st: i'm still learning/figuring out the search syntax
[2013-03-05 15:22:55 -0500] knuckolls: i'd also take a step back and think about if this is the right way to model this problem
[2013-03-05 15:23:02 -0500] knuckolls: data bags are meant to be globally accessable information
[2013-03-05 15:23:20 -0500] gp5st: that's what i'm debating
[2013-03-05 15:23:52 -0500] gp5st: but the majority case feels like it should be in the environment. it's just this one server that needs to access all the dbs, so idk. i'm still thinking about it
[2013-03-05 15:28:54 -0500] gp5st: search can handle it, so i think that's a nice way to do it
[2013-03-05 15:36:14 -0500] knuckolls: gp5st: you're right, i didn't even think about that. it's what it's built for :)
[2013-03-05 15:45:26 -0500] gp5st: hmm, is there a way to set a config value for a node with chef when creating it? like i would like to specify the databag password when i create the server
[2013-03-05 15:45:33 -0500] gp5st: but don't want the password stored in chef
[2013-03-05 15:46:22 -0500] knuckolls: gp5st: take a look at the chef_full bootstrap template: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-03-05 15:46:31 -0500] knuckolls: line 34
[2013-03-05 15:46:45 -0500] knuckolls: it'll grab your encrypted data bag secret out of your knife config
[2013-03-05 15:46:49 -0500] knuckolls: and put it on the server
[2013-03-05 15:47:04 -0500] knuckolls: so the chef-client on the server can use it to decrypt the databags
[2013-03-05 15:48:10 -0500] knuckolls: so add a line like this in your knife.rb and use the chef_full bootstrap template and it should "just work"
[2013-03-05 15:48:26 -0500] gp5st: thanks. sorry for being dull:(
[2013-03-05 15:48:34 -0500] knuckolls: encrypted_data_bag_secret '~/.chef/encrypted_data_bag_secret'
[2013-03-05 15:48:47 -0500] gp5st: i knew it had to be something easy...
[2013-03-05 15:48:48 -0500] knuckolls: not dull. :) took me a ton of digging to find all this madness.
[2013-03-05 15:49:47 -0500] gp5st: thanks a billion
[2013-03-05 15:49:49 -0500] gp5st: really
[2013-03-05 15:50:20 -0500] gp5st: the docs are frustrating because they're so useful, but i feel like there are certain things that are just hard to find
[2013-03-05 16:22:27 -0500] sabooky: I keep hearing that providers should be used instead of definitions as much as possible. What are the technical advantages of using a provider?
[2013-03-05 16:22:30 -0500] sabooky: (If there's a documentation comparing the two, could someone point me to it, I wasn't able to find it)
[2013-03-05 16:32:39 -0500] geekbri: sabooky: You could argue it depends on your use case.  The thing about definitions is you cannot use subscriptions and notifications with them
[2013-03-05 16:33:15 -0500] sabooky: geekbri: Ok, cool that's actually a good technical detail I didn't know (subscriptions and notifications)
[2013-03-05 16:35:12 -0500] ralphie: hi, am a bit of a newbie to chef, can somebody shed some light on the http://tickets.opscode.com/browse/CHEF-3694 issue for me?
[2013-03-05 16:35:24 -0500] geekbri: sabooky: definitions are also replaced by the resource they define right so, if you look at the resource collection you won't see your definition in there.  You'll see whatever resource is underneath your definition
[2013-03-05 16:35:25 -0500] ralphie: am confused of how i should and how i shold not write my recipies
[2013-03-05 16:35:54 -0500] ralphie: for instance i am using the nginx recipe where it defines the service twice, once to enable it and once to start it
[2013-03-05 16:36:03 -0500] ralphie: seems sensable, but comes out as a warning
[2013-03-05 16:37:07 -0500] geekbri: ralphie: you should post in that ticket thread!
[2013-03-05 16:41:01 -0500] sabooky: geekbri: Makes sense, I guess the only reason to use definitions is for multiple recipes updating a single template?
[2013-03-05 16:46:00 -0500] bbttxu: i'm storing nodes as local files. is it possible to store additional data in that file, like the internal IP for rackspace servers?
[2013-03-05 16:47:06 -0500] chris613: Is there a way to run chef-client -o <recipe> and NOT have it remove all the other cookbooks from the cache?
[2013-03-05 16:49:39 -0500] kallistec: ralphie: for now, I'd recommend to trigger the start with a notification if possible
[2013-03-05 16:51:34 -0500] ralphie: okay. fair enough. but I am right then that it should be possible to amend the same service twice?
[2013-03-05 16:51:55 -0500] ralphie: just wanted to get the assurance of an experienced guy since i just start with chef
[2013-03-05 16:55:14 -0500] kallistec: ralphie: you can also use a different name and set service_name explicitly
[2013-03-05 16:55:41 -0500] kallistec: which is ugly, I know
[2013-03-05 16:56:17 -0500] geekbri: kallistec: what about the case where you want to "reopen: the resource and change some attribute on it
[2013-03-05 16:56:47 -0500] ralphie: thats kind of the used case i talk ab out geebri
[2013-03-05 16:56:49 -0500] kallistec: geekbri: best to do that explicitly with something like rewind
[2013-03-05 16:57:23 -0500] kallistec: ralphie: I think your case is different, you want to have the same resource, but with multiple actions in different spots
[2013-03-05 16:58:41 -0500] ralphie: this is the recipe which emits a warning
[2013-03-05 16:58:42 -0500] ralphie: https://github.com/opscode-cookbooks/nginx/blob/master/recipes/default.rb
[2013-03-05 16:58:55 -0500] ralphie: the standard nginx one...
[2013-03-05 16:59:09 -0500] ralphie: (well if you are not using the source version)
[2013-03-05 17:00:04 -0500] ralphie: was just surprised as a newbie that such a widely used recipe would send me a warning and then got into reading about the chef issue, just wanted some clarification how other ppl deal with this
[2013-03-05 17:01:06 -0500] kallistec: ralphie: looks to me like that cookbook should just have the one service resource at the end with action :enable, :start
[2013-03-05 17:01:47 -0500] ralphie: well, i guess that was done like this in order to not :enable in cs you are using the 'source' option
[2013-03-05 17:02:21 -0500] ralphie: so the clean way would probably be to have the :start only in the source case and :enable, :start in the other one
[2013-03-05 17:03:49 -0500] kallistec: yes. I think the cookbook probably works the way it does because of limitations in older versions of chef around defining notifications for resources that appear later in compile
[2013-03-05 17:03:51 -0500] ralphie: but again ideally the way its done for me should just work as you would want to update the resource, right? or what am i missing
[2013-03-05 17:04:45 -0500] ralphie: so is it 'normal' to get warnings if your using chef? that something i gotta get used to it? or did i just look at a special case?
[2013-03-05 17:04:48 -0500] kallistec: ralphie: the way it works now is that it defines a second resource. This can have totally different options for start/stop/restart command, etc.
[2013-03-05 17:05:04 -0500] ralphie: oh really? okay
[2013-03-05 17:05:43 -0500] kallistec: ralphie: generally, no. This is a recent thing where lots of users were shooting themselves in the foot because this behaves oddly
[2013-03-05 17:05:43 -0500] ralphie: is there a way to identify a resource? so you could actually update it?
[2013-03-05 17:06:06 -0500] kallistec: https://github.com/bryanwb/chef-rewind or you can do what that does manually
[2013-03-05 17:06:17 -0500] kallistec: https://github.com/bryanwb/chef-rewind/blob/master/lib/chef/rewind.rb
[2013-03-05 17:09:51 -0500] ralphie: interesting. so that essentially runs the block on the resource?
[2013-03-05 17:10:03 -0500] kallistec: yes
[2013-03-05 17:10:14 -0500] jroh: I suspect I have a locked chef-client, anyone know how to clear it?
[2013-03-05 17:10:17 -0500] ralphie: why would he call the method rewind?
[2013-03-05 17:10:44 -0500] ralphie: is there a way to identify a service resource?
[2013-03-05 17:11:16 -0500] kallistec: ralphie: I dunno, I would think just "edit" or "edit_resource" would be most obvious. naming is hard
[2013-03-05 17:11:25 -0500] ralphie: yeah :)
[2013-03-05 17:11:34 -0500] jroh: this is on 11.4.0 fwiw
[2013-03-05 17:11:36 -0500] kallistec: ralphie: WDYM "identify a service resource"?
[2013-03-05 17:12:32 -0500] kallistec: jroh: locking in chef 11 uses flock, so a process has to be alive to hold the lock. so either wait for chef to finish or kill it
[2013-03-05 17:12:34 -0500] ralphie: linke in the nginx example. you told me it creates 2 resources. is there a way i can identify the two resources?
[2013-03-05 17:12:56 -0500] znDuff: jroh: ...you can see who holds a flock-based lock with fuser, btw.
[2013-03-05 17:12:57 -0500] ralphie: say i would want to send one of them to the rewind method
[2013-03-05 17:12:58 -0500] kallistec: ralphie: distinguish between the two?
[2013-03-05 17:13:42 -0500] kallistec: ralphie: yeah, that's the problem is that chef most of the time assumes there's only one resource for a given type+name
[2013-03-05 17:14:19 -0500] ralphie: okay. is there a way to explicitly set an id or something?
[2013-03-05 17:14:33 -0500] kallistec: the name is supposed to be the id
[2013-03-05 17:14:46 -0500] kallistec: which is why we have the warnings now
[2013-03-05 17:15:10 -0500] kallistec: unfortunately this behavior was added long ago without consideration for this problem
[2013-03-05 17:15:34 -0500] sabooky: Quick question, to be idempotent when working with multiple resources, should I just wrap the whole resource set in an "if" statement?
[2013-03-05 17:16:10 -0500] ralphie: so the name would be simply 'nginx' in our example for both resources with some internal pointer to the 2 copies?
[2013-03-05 17:16:27 -0500] jroh: kallistec: interesting, the lock file got locked by ntpd and an ipsec related daemon somehow
[2013-03-05 17:16:34 -0500] jroh: so even though chef-client was dead it was still stuck
[2013-03-05 17:17:01 -0500] geekbri: This whole conversation is often confusing to me.  I always assumed that the name attribute was supposed to identify the resource as unique.  Therefore if you called the resource again with the same name you would simply be editing the existing resource
[2013-03-05 17:17:06 -0500] kallistec: jroh: those were holding the lock on a file in var/chef/cache ?
[2013-03-05 17:17:14 -0500] geekbri: now it seems like we should be using a special library to edit an existing resource
[2013-03-05 17:17:26 -0500] geekbri: or at the very least, iterating through the resource collection and editing it oureslves
[2013-03-05 17:17:33 -0500] jroh: kallistec: according to lsof. after restarting those daemons I was able to manually run chef-client again
[2013-03-05 17:18:46 -0500] kallistec: geekbri: yeah, that's why we added the warning, but please leave some comments on the ticket explaining how you would expect things to work
[2013-03-05 17:32:42 -0500] ralphie: thanks kallistec for all the info btw.. very helpful
[2013-03-05 17:33:35 -0500] kallistec: ralphie: thank you for sharing your thoughts. Are you on the mailing list? I may start a thread gathering feedback on the best way to solve all of this
[2013-03-05 17:34:24 -0500] ralphie: would be cool. which list (did i mention i am a newbie?)
[2013-03-05 17:36:33 -0500] ralphie: got em
[2013-03-05 17:43:05 -0500] sabooky: Is it bad practice to have a cookbook that depends on a databag?
[2013-03-05 17:43:37 -0500] remil: hi, is there any news regarding this issue ? http://tickets.opscode.com/browse/CHEF-3084
[2013-03-05 17:43:40 -0500] sabooky: debating best way to have different sets of users/mountpoints for different tiers
[2013-03-05 17:52:00 -0500] qhartman: Anyone have a favorite guide for integrating Vagrant with a live chef-server system? Everything I've found so far is geared towards solo.
[2013-03-05 17:53:24 -0500] qhartman: As usual, moments after asking I finally find this: http://docs.vagrantup.com/v1/docs/provisioners/chef_server.html
[2013-03-05 17:53:46 -0500] qhartman: Anyway, if anyone knows something better, I'd still like to hear about it
[2013-03-05 18:12:36 -0500] magichands: hi, so I added a role to my node runlist in chef solo
[2013-03-05 18:12:59 -0500] magichands: but when I run knife solo cook user@host I get an error saying its missing the role
[2013-03-05 18:13:37 -0500] magichands: not sure whats up, solo.rb was created using knife solo init .
[2013-03-05 18:14:19 -0500] magichands: I have roles/myrole.rb
[2013-03-05 18:14:24 -0500] magichands: and in the run_list for the node I have
[2013-03-05 18:14:39 -0500] cwj: qhartman: not really "something better" but theres a vagrant plugin called butcher (https://github.com/cassianoleal/vagrant-butcher) which ensures that your vagrant box's client and node are deleted from the chef server when you destroy the box
[2013-03-05 18:14:40 -0500] magichands: run_list: ["role['myrole']"]
[2013-03-05 18:15:32 -0500] cwj: qhartman: fwiw i dont use butcher myself, but it looks like a better implementation of the code I have heretofore been manual added to my own Vagrantfiles for the same purpose
[2013-03-05 18:15:35 -0500] magichands: oh I see
[2013-03-05 18:15:37 -0500] magichands: no quotes...?
[2013-03-05 18:15:59 -0500] cwj: magichands: run_list: ["role[myrole]"]
[2013-03-05 18:16:08 -0500] magichands: yeah, I put myrole in quotes by mistake
[2013-03-05 18:16:31 -0500] qhartman: cwj, cool, thanks for the pointer.
[2013-03-05 18:16:35 -0500] magichands: ok now I get something new, thanks
[2013-03-05 18:37:28 -0500] Chocobo: wow... starting with Chef is a bit intimidating.
[2013-03-05 18:39:09 -0500] knuckolls: Chocobo: what's your goal?
[2013-03-05 18:40:34 -0500] Chocobo: knuckolls: My final goal is to manage a highly available openstack cluster.   My short term goal is understand how to do simple tasks in chef.  I have it installed in a virtual machine right now.
[2013-03-05 18:41:48 -0500] Chocobo: I think I may order the peepcode videos.  Someone here mentioned they were good.
[2013-03-05 18:42:49 -0500] gchristensen: peepcode is generally good
[2013-03-05 18:42:55 -0500] gchristensen: never seen one for Chef though
[2013-03-05 18:43:07 -0500] Chocobo: https://peepcode.com/products/chef-i
[2013-03-05 18:43:52 -0500] knuckolls: Chocobo: i think starting small is a good idea. These days, there are a lot of tools that help you do that. Vagrant is a clean frontend for virtualbox that has built in chef-solo providers. They will bootstrap a localhost virtual machine and let you get practice working with cookbooks. Berkshelf is a tool that vastly simplifies working with chef and developing cookbooks. It will get you going with vagrant and chef-solo right out
[2013-03-05 18:43:53 -0500] knuckolls:  of the box. I'd suggest you watch this video, read these docs, and try to make a simple cookbook. That'll illuminate the path towards using chef-client w/ chef server. http://www.ustream.tv/recorded/27487546/highlight/309841 http://berkshelf.com/ http://docs.vagrantup.com/v1/docs/getting-started/why.html
[2013-03-05 18:46:55 -0500] jhowarth: Where is it possible to download older versions of the omnibus installer?
[2013-03-05 18:47:22 -0500] awgross: jhowarth: the script stays the same, you just need to specify a different version
[2013-03-05 18:47:39 -0500] awgross: it takes a -v parameter
[2013-03-05 18:47:42 -0500] jhowarth: thanks
[2013-03-05 18:47:44 -0500] awgross: if you are curling it
[2013-03-05 18:48:20 -0500] awgross: curl http://omnibusscript.sh | sudo bash -s -- -v ${CHEF_VERSION}
[2013-03-05 18:49:16 -0500] knuckolls: jhowarth: you can see exactly how the chef_full bootstrap template works here https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-03-05 18:49:21 -0500] knuckolls: for context
[2013-03-05 18:50:44 -0500] jhowarth: cool
[2013-03-05 18:50:52 -0500] jhowarth: thanks it's installing the version i want
[2013-03-05 19:25:45 -0500] sabooky: Quick question, to be idempotent when working with multiple resources, should I just wrap the whole resource set in an "if" statement?
[2013-03-05 19:26:26 -0500] j^2: awgross: omnibusscript.sh is open to register ;)
[2013-03-05 19:26:39 -0500] j^2: http://www.nic.sh/cgi-bin/whois?query=omnibusscript.sh&search=Search
[2013-03-05 19:26:50 -0500] awgross: jaja
[2013-03-05 19:26:51 -0500] awgross: haha*
[2013-03-05 19:27:11 -0500] awgross: sabooky: you can, normally its better to use the callback pattern
[2013-03-05 19:27:19 -0500] awgross: define your resources with "action :nothing"
[2013-03-05 19:27:39 -0500] awgross: and have one resource with conditions
[2013-03-05 19:27:41 -0500] awgross: when it runs
[2013-03-05 19:27:48 -0500] awgross: it notifies the next thing up the chain
[2013-03-05 19:27:49 -0500] awgross: etc etc
[2013-03-05 19:28:15 -0500] sabooky: awgross: Basically, I'm installing an application.. if it needs to install, then I need to download the archive, extract, create a template, run installer passing in template
[2013-03-05 19:29:30 -0500] awgross: sabooky: sounds like a perfect use case for call backs
[2013-03-05 19:29:51 -0500] sabooky: if installation doesn
[2013-03-05 19:29:53 -0500] awgross: since you really only want the other actions to happen if the first one does
[2013-03-05 19:30:07 -0500] sabooky: doesn't exist, then download and notify the next one?
[2013-03-05 19:30:10 -0500] sabooky: and so on
[2013-03-05 19:30:47 -0500] miah: installation should be a different action than configuration
[2013-03-05 19:31:38 -0500] sabooky: miah: This is all installation. The chain is basically download, extract, generate silent mode param file, run installer passing in param file
[2013-03-05 19:32:13 -0500] sabooky: If I could set dependencies that would be nice.. but don't think chef supports that
[2013-03-05 19:34:28 -0500] sabooky: awgross: Am I correct in my understanding, that the download step will be the one that has the not_if "app_install_check" ?
[2013-03-05 19:34:35 -0500] sabooky: awgross: Everything else will be a notify chain
[2013-03-05 19:35:15 -0500] awgross: sabooky: sounds about right
[2013-03-05 19:35:27 -0500] sabooky: awgross: hmm.. if download step is a remote_file and the file already exists.. the rest of the chain won't be triggered? since remote_file will skip..
[2013-03-05 19:35:42 -0500] sabooky: I think that's how remote_file works anyways (not 100% sure)
[2013-03-05 19:36:42 -0500] m4yfield: has anyone used knife-opc to create users and orgs?
[2013-03-05 19:37:01 -0500] mhalligan: Worst recruiting email ever:
[2013-03-05 19:37:01 -0500] mhalligan: Jimdo is looking for a DevOps Hipster in Hamburg
[2013-03-05 19:40:20 -0500] miah: lol
[2013-03-05 19:40:45 -0500] doomviking: wow. barf
[2013-03-05 19:41:11 -0500] knuckolls: http://www.jimdo.com/jobs/devops-hipster/
[2013-03-05 19:41:19 -0500] doomviking: requirements: skinny jeans. attitude. floppy hair.
[2013-03-05 19:42:06 -0500] knuckolls: complete w/ hipster dog
[2013-03-05 19:42:18 -0500] miah: i <3 these new job posts that basically jump around employment discrimination issues with a 'joke'
[2013-03-05 19:43:22 -0500] cwj: i suspect you don't really <3 them
[2013-03-05 19:43:39 -0500] mhalligan: I wish I can say I was able to contain the vomit in my mouth.
[2013-03-05 19:43:44 -0500] miah: i dont really <3 many things
[2013-03-05 19:44:23 -0500] paigeat: seq --format="knife bootstrap -s http://33.33.33.10:4000 -E "Development" -x paigeat -P "uncledickhead" 33.33.33.%g --sudo --template-file /root/chef-repo/rackspace/bootstrap_chefclient_tpl_devel < sudopass" 50 199 | /bin/bash
[2013-03-05 19:44:27 -0500] paigeat: I vomited that out this morning
[2013-03-05 19:45:58 -0500] paigeat: I switched back to using KVM on multiple hypervisors terminating 802.1q vlan trunks
[2013-03-05 19:46:14 -0500] paigeat: and I setup pxe_dust and all that stuff but I kinda fucked it up
[2013-03-05 19:46:34 -0500] paigeat: anyway
[2013-03-05 19:46:39 -0500] paigeat: found a way to do what I need to do
[2013-03-05 19:46:41 -0500] paigeat: thats all that matters.
[2013-03-05 19:47:12 -0500] paigeat: and I still have my pxe /tftp boot server with the ubuntu preseed on the webserver etc etc
[2013-03-05 19:47:23 -0500] paigeat: works pretty well just doesn't join to chef after it creates because I jacked it it up
[2013-03-05 19:47:27 -0500] paigeat: which is ok
[2013-03-05 19:47:32 -0500] paigeat: good enough
[2013-03-05 19:47:37 -0500] paigeat: fix it later
[2013-03-05 19:48:24 -0500] paigeat: virt-manager rocks
[2013-03-05 19:48:44 -0500] paigeat: I wanna get clvm setup if I can and ditch iscsi
[2013-03-05 19:48:54 -0500] paigeat: clvm is looking pretty bad ass
[2013-03-05 19:49:14 -0500] paigeat: anybody tried it or prefer iscsi over it ?
[2013-03-05 19:58:14 -0500] bjensen: Umm..is it just me or is there no recipe for the newest version of postgres yet?
[2013-03-05 19:58:55 -0500] judd7: Ohai Chefs!  Head chefs, what would you call the opposite of "eventual convergence?"
[2013-03-05 19:59:10 -0500] judd7: "controlled convergence?"
[2013-03-05 19:59:33 -0500] paigeat: and I have a squid cache
[2013-03-05 19:59:47 -0500] paigeat: and wrote a cookbook for it o_O
[2013-03-05 20:00:13 -0500] paigeat: it caches all the ubuntu installs.
[2013-03-05 20:07:59 -0500] awgross: judd7: immediate consistency?
[2013-03-05 20:08:02 -0500] awgross: http://en.wikipedia.org/wiki/Consistency_model
[2013-03-05 20:08:17 -0500] judd7: "hipster consistency"
[2013-03-05 20:08:23 -0500] awgross: derp
[2013-03-05 20:08:30 -0500] awgross: thought you said consistency not convergence
[2013-03-05 20:08:35 -0500] judd7: I did.
[2013-03-05 20:08:39 -0500] judd7: My own mistake.
[2013-03-05 20:08:40 -0500] awgross: hipstasistency
[2013-03-05 20:08:45 -0500] awgross: my new DB
[2013-03-05 20:08:55 -0500] awgross: consistency model
[2013-03-05 20:09:02 -0500] judd7: I can barely pronounce that without having to drive to Williamberg.
[2013-03-05 20:09:50 -0500] awgross: rofl
[2013-03-05 20:09:54 -0500] awgross: nyc area as well?
[2013-03-05 20:09:59 -0500] judd7: yup.
[2013-03-05 20:10:11 -0500] awgross: where abouts?
[2013-03-05 20:10:19 -0500] judd7: But hiding in the Berkshires, overseeing the building of my fortress of solitude.
[2013-03-05 20:10:23 -0500] judd7: Park Slope.
[2013-03-05 20:10:23 -0500] awgross: rofl
[2013-03-05 20:10:26 -0500] awgross: cool
[2013-03-05 20:10:42 -0500] geekbri: speaking of hipstasistency, i thought i heard park slope
[2013-03-05 20:10:43 -0500] judd7: You?
[2013-03-05 20:10:46 -0500] awgross: Flatiron
[2013-03-05 20:11:18 -0500] geekbri: A common grazing area for the hipsters is prospect park
[2013-03-05 20:11:19 -0500] judd7: a thousand strollers of hyperventilating mothers will argue about Park Slope's hipsterness.
[2013-03-05 20:11:23 -0500] geekbri: haha
[2013-03-05 20:11:36 -0500] geekbri: a thousand HIP strollers being pushed by parents in skinny jeans, stopping at the local vietnamese sandwich shop
[2013-03-05 20:11:45 -0500] geekbri: on their way to a free hip hop concert at prospect park
[2013-03-05 20:11:50 -0500] geekbri: ;)
[2013-03-05 20:11:58 -0500] judd7: I (wish I) resembled that remark.
[2013-03-05 20:12:41 -0500] judd7: eventual hipstasistency
[2013-03-05 20:12:56 -0500] geekbri: On a side note, if you haven't tried Hanco's in Park Slope, they make a darn good vietnamese sandwich
[2013-03-05 20:13:07 -0500] geekbri: but those are no longer my stomping grounds, although a very nice area.
[2013-03-05 20:13:09 -0500] cwj: bahn mi so good
[2013-03-05 20:13:11 -0500] judd7: So, are we all in Brooklyn, or pining for it?
[2013-03-05 20:13:22 -0500] geekbri: Alas, no more.  No I am in boston
[2013-03-05 20:13:40 -0500] judd7: I was in Somerville this weekend.
[2013-03-05 20:13:49 -0500] judd7: +1
[2013-03-05 20:13:54 -0500] geekbri: Ah yes, slummerville.  Nice area.  Porter square?
[2013-03-05 20:13:58 -0500] judd7: union
[2013-03-05 20:13:59 -0500] miah:  i used to live there
[2013-03-05 20:14:18 -0500] miah: somerville was better than living in malden
[2013-03-05 20:14:20 -0500] judd7: America the Beautiful (especially @ Market Basket)
[2013-03-05 20:14:40 -0500] geekbri: Market basket @ 11am on a saturday.  Not a great place to be.
[2013-03-05 20:14:41 -0500] jforest: jesus yes
[2013-03-05 20:14:44 -0500] judd7: Friend too me to Aritsan's Asylum.  Amazing place.  Giant Robots.
[2013-03-05 20:14:44 -0500] jforest: I just moved out of malden
[2013-03-05 20:14:52 -0500] jforest: salem ++
[2013-03-05 20:15:14 -0500] geekbri: Medford will be nicer once (if) the green line ever makes it out there
[2013-03-05 20:15:23 -0500] judd7: Ironic Consistency
[2013-03-05 20:15:23 -0500] jforest: heh, sure
[2013-03-05 20:15:28 -0500] geekbri: I currently am residing in watertown, which I enjoy although its a bit more out than i'd like.
[2013-03-05 20:16:37 -0500] miah: meffa
[2013-03-05 20:17:02 -0500] jforest: miah: hehe
[2013-03-05 20:17:09 -0500] jforest: I like the 30 minute train to boston
[2013-03-05 20:17:13 -0500] jforest: I'm working in cambridge today
[2013-03-05 20:17:17 -0500] jforest: quick and easy trip
[2013-03-05 20:17:33 -0500] jforest: and salem has a community! my daughter has friends! my gf has friends!
[2013-03-05 20:17:34 -0500] jforest: win!
[2013-03-05 20:17:34 -0500] judd7: Do you Bostoner Chefs ever meetup?
[2013-03-05 20:17:47 -0500] judd7: The Paperless Post guys are doing great things for the NYC Chefs.
[2013-03-05 20:17:49 -0500] jforest: there have been a couple of meetups
[2013-03-05 20:17:52 -0500] jforest: but I haven't ever been
[2013-03-05 20:17:58 -0500] geekbri: judd7: there is a chef-boston group, it used to meet a lot, now it meets sometimes :)
[2013-03-05 20:18:18 -0500] geekbri: I missed the last meetup unfortunately, which is too bad because either matt ray or nathan harvey was there.  I can't remember which of them ;
[2013-03-05 20:18:19 -0500] geekbri: ;)
[2013-03-05 20:18:27 -0500] judd7: mattyray
[2013-03-05 20:18:38 -0500] judd7: We Dellers were there in farce.
[2013-03-05 20:18:41 -0500] geekbri: there ya go.  I knew it was one of those two social butterflies
[2013-03-05 20:18:45 -0500] judd7: s/farce/force/
[2013-03-05 20:18:58 -0500] r3vamp: What's the best way to make *small* changes to community cookbooks while still being able to update them without worrying about merges? A wrapper?
[2013-03-05 20:19:28 -0500] geekbri: r3vamp: wrapper, or better yet, pull request :)
[2013-03-05 20:19:33 -0500] geekbri: if its a change others could use.
[2013-03-05 20:20:01 -0500] r3vamp: geekbri: k :)
[2013-03-05 20:20:10 -0500] awgross: AWS RDS amazes me sometimes. "I have reviewed your WriteLatency for your RDS instance.. I can see a write latency of 0.23563 seconds, which is not considered high latency."
[2013-03-05 20:20:48 -0500] paigeat: hey geekbri
[2013-03-05 20:21:03 -0500] geekbri: awgross: you're off by a channel awgross! I think that was meant for #aws ;)
[2013-03-05 20:21:10 -0500] geekbri: paigeat: hi
[2013-03-05 20:21:48 -0500] knuckolls: r3vamp: these might be helpful https://github.com/bryanwb/chef-rewind http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-03-05 20:22:31 -0500] r3vamp: knuckolls: Ahh that second link is perfect, was trying to remember where it was. Thanks!
[2013-03-05 20:22:54 -0500] geekbri: miah: by the way, i totally janked your convention of using _ on recipes that are just meant to be included by other recipes and not called directly
[2013-03-05 20:23:32 -0500] knuckolls: snap that's a good idea.
[2013-03-05 20:24:44 -0500] awgross: geekbri: all should know my pain
[2013-03-05 20:24:51 -0500] geekbri: It makes my brain happy, since it brings them all to to top of the directory in nerdtree for me.  I can visually see the difference between my recipes meant for calling, and the ones just there for modularity and the sake of readability
[2013-03-05 20:24:55 -0500] geekbri: awgross: haha.
[2013-03-05 20:28:02 -0500] bjensen: What is the recommended way of getting the /etc/chef/node.json and solo.rb in place?
[2013-03-05 20:28:21 -0500] bjensen: on to a new vm for example
[2013-03-05 20:29:11 -0500] knuckolls: bjensen: a localhost vm for testing?
[2013-03-05 20:30:07 -0500] bjensen: knuckolls: well I am aiming for a procedure where I can quickly do a restore in production, so I am basically looking into steps from going from no OS to getting to run my chef-solo
[2013-03-05 20:31:45 -0500] teukka_: bjensen: check out knife-solo: http://matschaffer.github.com/knife-solo/
[2013-03-05 20:32:09 -0500] knuckolls: bjensen: i don't work with chef-solo outside of the context of localhost, so not too sure. knife-solo i'm aware of, also there was a recent discussion about all this on the mailing list http://lists.opscode.com/sympa/arc/chef/2013-02/msg00452.html
[2013-03-05 20:32:16 -0500] bjensen: yeah I did, it installed chef-solo onto a bare installation of an OS
[2013-03-05 20:32:38 -0500] bjensen: teukka: I wasnt able to see if it could put the solo.rb and node.json in place?
[2013-03-05 20:32:55 -0500] bjensen: thanks Ill check it out
[2013-03-05 20:33:35 -0500] judd7: miah and geekbri - we at Dell are interested in making our cookbooks more upstream friendly.
[2013-03-05 20:33:55 -0500] judd7: We're looking at patterns such at app & lib recipes.
[2013-03-05 20:34:21 -0500] teukka: bjensen: it does. the next release will generate the solo.rb, but currently it uploads one from your local machine/repo
[2013-03-05 20:34:38 -0500] judd7: but also, allowing folks to switch off 'eventual consistency' by wrapping all searches in config switches.
[2013-03-05 20:35:21 -0500] judd7: if EC is "off", then the results normally gotten by a search are provided in attrs.
[2013-03-05 20:35:46 -0500] miah: geekbri: awesome. it wasn't really my convention though =)
[2013-03-05 20:35:56 -0500] judd7: I'm wondering how this overlaps in the Gangnam STYLE.
[2013-03-05 20:36:00 -0500] miah: i'm switching to a more traditional ruby library model though
[2013-03-05 20:36:08 -0500] miah: look at my work in chef_logstash
[2013-03-05 20:36:15 -0500] bjensen: teukka: um in which of the knife-solo steps does it place the node.json and solo.rb files? I am looking at the docs: http://matschaffer.github.com/knife-solo/
[2013-03-05 20:36:48 -0500] miah: i'd rather give people a very stable interface to performing a task and let them write a wrapper cookbook that implements their business logic
[2013-03-05 20:36:58 -0500] bjensen: ah the prepare
[2013-03-05 20:36:59 -0500] teukka: bjensen: in `knife solo cook` (which will also be triggered by `knife solo bootstrap`)
[2013-03-05 20:37:10 -0500] miah: https://github.com/miah/chef_logstash
[2013-03-05 20:37:22 -0500] miah: its not functional yet really. still have to write the config provider
[2013-03-05 20:37:23 -0500] teukka: bjensen: no, prepare just installs chef and rsync etc.
[2013-03-05 20:37:54 -0500] miah: but i can actually run minitest against my cookbook as i dev it and my cycle time is low. i dont have to boot up vm's
[2013-03-05 20:38:11 -0500] miah: i certainly _do_ integration testing. but it doesn't have to happen everytime i make a change.
[2013-03-05 20:38:44 -0500] knuckolls: judd7: i think the toggleable search is a good pattern. that way it works in solo too and you can inject things via attributes if you don't want to use search.
[2013-03-05 20:38:57 -0500] knuckolls: miah: i eagerly await your work with the logstash library cookbook
[2013-03-05 20:39:01 -0500] judd7: that'll be my small contribution to the greatness of Chef.
[2013-03-05 20:39:14 -0500] bjensen: teukka: ok thanks Ill play around with it
[2013-03-05 20:39:50 -0500] judd7: knockolls : our purpose is of course tendentious.  http://crowbar.github.com
[2013-03-05 20:40:17 -0500] judd7: oops. ^ knuckolls
[2013-03-05 20:40:27 -0500] teukka: bjensen: great! feel free to ask if you need help. but now afkb for a while ->
[2013-03-05 20:40:33 -0500] geekbri: miah: I use a lot of libraries in our internal cookbooks.  Especially for any cookbook that needs to model the idea of clusters or what not
[2013-03-05 20:41:21 -0500] miah: geekbri: nice
[2013-03-05 20:41:39 -0500] miah: http://blog.nistu.de/2012/03/04/reusability-in-configuration-management-systems
[2013-03-05 20:41:46 -0500] miah: is where that "_foo" convention is from
[2013-03-05 20:41:50 -0500] geekbri: ahhhh
[2013-03-05 20:42:16 -0500] Chocobo: thank knuckolls (and sorry for the delay)
[2013-03-05 20:42:19 -0500] judd7: miah that's the one I was looking for.
[2013-03-05 20:42:34 -0500] knuckolls: Chocobo: hope it turns out to be helpful :)
[2013-03-05 20:45:28 -0500] awgross: anyone in NYC going to the Opsschool presentation tonight?
[2013-03-05 20:45:52 -0500] judd7: :(
[2013-03-05 20:45:53 -0500] paigeat: finish=920.1min
[2013-03-05 20:46:43 -0500] geekbri: Does chef-client have a constant or method to grab the current version of chef-client ?
[2013-03-05 20:47:05 -0500] paigeat: not that I'm aware of?
[2013-03-05 20:47:17 -0500] paigeat: oh wait nm
[2013-03-05 20:47:20 -0500] paigeat: I read that wrong
[2013-03-05 20:47:23 -0500] paigeat: forget I said anything
[2013-03-05 20:47:32 -0500] geekbri: I meant internally, for use inside a recipe :)
[2013-03-05 20:47:51 -0500] paigeat: I have two raid 5s rebuilding....
[2013-03-05 20:48:19 -0500] paigeat: 1 because I didn't set it up right like I had thought and it only had 3 disks and a hot spare and another because a drive failed
[2013-03-05 20:48:31 -0500] paigeat: I'll bet one of them is gonna fail
[2013-03-05 20:48:44 -0500] paigeat: raid 60 ftw
[2013-03-05 20:48:53 -0500] knuckolls: geekbri: it's in an atttibute from ohai.
[2013-03-05 20:49:00 -0500] geekbri: knuckolls: thanks.
[2013-03-05 20:49:29 -0500] geekbri: knuckolls: with chef11 you can now get the merged_attributes inside of the attributes files right?
[2013-03-05 20:50:09 -0500] knuckolls: geekbri: i think so, haven't migrated my stuff yet ;)
[2013-03-05 20:50:16 -0500] geekbri: I am pretty sure, i'll just google it
[2013-03-05 20:50:27 -0500] paigeat: oh and its all sata drives too
[2013-03-05 20:55:32 -0500] version2beta2: I see that python_pip accepts user and group now, which is cool and I appreciate that. Is there a way to "cwd" before a pip as well? We're deploying some code as pip editables, which puts them "src/" under the current directory. It'd be nice to control that directory. jtimberman?
[2013-03-05 20:55:43 -0500] geekbri: the new docs site doesn't have a search feature?
[2013-03-05 20:55:47 -0500] miah: geekbri: it does
[2013-03-05 20:56:02 -0500] miah: 'support | search | docs >>'
[2013-03-05 20:56:03 -0500] geekbri: ah found it.  Tucked away nicely
[2013-03-05 20:56:10 -0500] miah: ya its not a obvious search box
[2013-03-05 21:00:02 -0500] awgross: out of curiousity, what is the popular redis cookbook? I had heard the one listed on the community site was not the best one.
[2013-03-05 21:01:22 -0500] miah: github.com/miah/chef-redis
[2013-03-05 21:01:38 -0500] miah: i need to update the readme though. its all lwrp driven now
[2013-03-05 21:01:55 -0500] awgross: thanks
[2013-03-05 21:02:49 -0500] isotope1: stupid question of the day
[2013-03-05 21:02:52 -0500] geekbri: I too have a redis cookbook, I plan on doing some major rewrites soon, but it's fairly stable.  https://github.com/brianbianco/redisio
[2013-03-05 21:03:09 -0500] isotope1: If I assign the same recipe twice to a node will it run it twice?
[2013-03-05 21:03:20 -0500] miah: no
[2013-03-05 21:03:34 -0500] isotope1: thanks, that was what I was hoping for
[2013-03-05 21:04:02 -0500] judd7: what if they're not in the run list, but rather, in a recipe.
[2013-03-05 21:05:33 -0500] geekbri: awgross: whoops, that last comment from me was meant for you
[2013-03-05 21:05:56 -0500] kampfschlaefer: hi, anyone here using chefspec to test recipes?
[2013-03-05 21:06:36 -0500] kampfschlaefer: anyone noticed that chefspec fails to test the link-resource?
[2013-03-05 21:07:05 -0500] miah: i just use minitest.. so no.
[2013-03-05 21:07:39 -0500] awgross: kampfschlaefer: i use rspec for libraries, minitest for recipes
[2013-03-05 21:07:47 -0500] rayrod2030: Is anybody deploying on shared infrastructure?  Multi-app per instance?
[2013-03-05 21:08:00 -0500] awgross: kampfschlaefer: chef spec got too close to just repeating the recipe for me
[2013-03-05 21:08:48 -0500] kampfschlaefer: awgross: combined with mocking and fauxhai it seems cool for fast tests without actually deploying machines.
[2013-03-05 21:08:52 -0500] magichands: hi, so using chef-solo to install php
[2013-03-05 21:09:01 -0500] magichands: kind of confused how I would install pear extensions
[2013-03-05 21:09:18 -0500] magichands: I see the doc as some php_pear stuff, but no real mention of the context of it
[2013-03-05 21:09:38 -0500] magichands: do I need to make a custom recipe and copy paste that stuff in there?
[2013-03-05 21:10:00 -0500] kampfschlaefer: is minitest running offline?
[2013-03-05 21:10:00 -0500] tmichael: have cook that was working fine in chef 10 test env, but failing on chef 11.
[2013-03-05 21:10:13 -0500] tmichael: [2013-03-05T20:52:50+00:00] FATAL: Net::HTTPServerException: template[/etc/profile.d/jira.sh] (jira::server line 51) had an error: Net::HTTPServerException: 403 "Forbidden"
[2013-03-05 21:10:51 -0500] awgross: kampfschlaefer: true.  I get that.  For me I prefer to put "logic" in libraries and just test it like any old ruby code.  Then i just need to test the Chef blocks for regressions with Minitest
[2013-03-05 21:10:54 -0500] miah: minitest/rspec don't require a vm
[2013-03-05 21:11:14 -0500] miah: but are really only useful if you're writing cookbooks based around libraries
[2013-03-05 21:11:19 -0500] awgross: kampfschlaefer: sorry Chef Regressions with Minitest Handler*
[2013-03-05 21:11:30 -0500] miah: have fun testing 'recipes' :/
[2013-03-05 21:11:44 -0500] awgross: mock/stub all the things
[2013-03-05 21:11:44 -0500] miah: use test-kitchen for that. get ready to go for a walk and wait for your tests to complete.
[2013-03-05 21:11:58 -0500] miah: mocs are a code smell really
[2013-03-05 21:12:11 -0500] miah: because you end up testing the mock rather than the actual interface
[2013-03-05 21:12:23 -0500] miah: and the interface might change but if you dont update your mock..
[2013-03-05 21:12:35 -0500] awgross: true
[2013-03-05 21:12:56 -0500] kampfschlaefer: but thats a problem with all tests. when the interfaces change, you have to adopt the tests...
[2013-03-05 21:13:15 -0500] miah: certainly. but if its a external resource out of your control.
[2013-03-05 21:13:26 -0500] miah: eg, people often mock web stuff
[2013-03-05 21:14:01 -0500] kampfschlaefer: I find it usefull to mock searches and see if the recipe behaves like I intended
[2013-03-05 21:14:11 -0500] miah: sure
[2013-03-05 21:14:45 -0500] kampfschlaefer: of course foodcritic complains when you don't check for chef-solo. and chefspec set chef-solo to true :-/
[2013-03-05 21:15:24 -0500] geekbri: kampfschlaefer: what are you using to mock your searches?
[2013-03-05 21:16:35 -0500] kampfschlaefer: geekbri: "Chef::Recipe.any_instance.stub(:search).with( (:node), ("search here") ).and_return([])" would give an empy list
[2013-03-05 21:16:59 -0500] kampfschlaefer: I didn't yet manage to make fauxhai return something usable for mocking search-results
[2013-03-05 21:17:13 -0500] geekbri: i heard fnichols had recently released something with search mocking
[2013-03-05 21:17:16 -0500] geekbri: i didn't get to play with it yet.
[2013-03-05 21:17:26 -0500] miah: chef-searchref iirc
[2013-03-05 21:17:57 -0500] geekbri: mm yes, thats the one.
[2013-03-05 21:18:16 -0500] geekbri: I think i tried it briefly, had trouble getting it to do what i wanted and abandoned it due to tight time schedules :)
[2013-03-05 21:18:28 -0500] tmichael: any clue on why i would get a 403 forbidden error during template resource action?  only thing i can find on 403 forbidden errors are with hosted chef.
[2013-03-05 21:19:41 -0500] kampfschlaefer: where can I find searchref? github itself seems to not know it...
[2013-03-05 21:20:21 -0500] miah: github.com/fnichol
[2013-03-05 21:21:26 -0500] kampfschlaefer: miah: thanks, found it
[2013-03-05 21:22:45 -0500] geekbri: kampfschlaefer: he has a sample cookbook that shows you how to use the gem as well in there somewhere
[2013-03-05 21:32:15 -0500] coderanger: version2beta2: -e isn't going to work will with the python_pip resource right now
[2013-03-05 21:32:43 -0500] coderanger: version2beta2: It depends on pip freeze to compute idemopotence, which means -e will never be noticed as installed
[2013-03-05 21:33:28 -0500] coderanger: version2beta2: As a project for PyCon next week I am going to talk with jezdez and crew about adding some internal dryrun support in pip so we can lean on that for idempotence detection
[2013-03-05 21:33:48 -0500] coderanger: version2beta2: But right now you are better off constructing the execute block yourself for anything other than a simple install from PyPI
[2013-03-05 21:33:52 -0500] geekbri: PIP packing is brutal.
[2013-03-05 21:33:59 -0500] coderanger: geekbri: You have no idea
[2013-03-05 21:33:59 -0500] moos3: anyone know how to make subversion resource in chef 11 not to ignore svn_username and svn_password
[2013-03-05 21:34:03 -0500] Gavin_: Hello, I was hoping someone could clear something up for me: what's current best practice if one wants to apply a *slight* customisation to an existing cookbook - say use a sightly different template, but retain the rest of the cookbook?
[2013-03-05 21:34:06 -0500] geekbri: coderanger: believe me, I have a little bit of an idea :)
[2013-03-05 21:34:13 -0500] coderanger: geekbri: I am root on PyPI ;-)
[2013-03-05 21:34:20 -0500] geekbri: coderanger: make the pain stop.
[2013-03-05 21:34:46 -0500] geekbri: coderanger: The things i've had to do to have our own internal pypi server, im not a proud man.
[2013-03-05 21:35:02 -0500] cwj: geekbri: what did you use?
[2013-03-05 21:35:05 -0500] coderanger: geekbri: Working on it, 7 hours of downtime over the past 12 months :)
[2013-03-05 21:35:16 -0500] kampfschlaefer: moos3: there is a fork/pull-request for that
[2013-03-05 21:35:19 -0500] coderanger: geekbri: and server verification is coming online shortly
[2013-03-05 21:35:40 -0500] kampfschlaefer: moos3: at least for chef10 and the application resource
[2013-03-05 21:35:50 -0500] geekbri: cwj: theres a nice little github project out there called pypiserver, it even will fall back to the regular pypi servers if the package is present.
[2013-03-05 21:36:00 -0500] cwj: oh yeah i tried that
[2013-03-05 21:36:06 -0500] geekbri: We just always run into all sorts of stuff with pip packaging in general thats just
[2013-03-05 21:36:07 -0500] cwj: now using localshop
[2013-03-05 21:36:23 -0500] moos3: it seems that the svn command is ignoring --username and --password
[2013-03-05 21:36:26 -0500] geekbri: I'm used to packaging gems.  PIP's make rubys gems and gem problems look like the golden land
[2013-03-05 21:36:27 -0500] j^2: Gavin_: the nagios cookbook is a good example of that, instead of putting templates in for services, you end up putting in data bags
[2013-03-05 21:36:51 -0500] geekbri: cwj: I'll look into it.
[2013-03-05 21:37:22 -0500] coderanger: cwj geekbri: If you care about PyPI packages actually being installable, more voices on http://mail.python.org/pipermail/catalog-sig/2013-February/005330.html would help
[2013-03-05 21:37:25 -0500] cwj: geekbri: i have a cookbook for it also, but right now it depends on changes to localshop which havent been merged upstream
[2013-03-05 21:37:26 -0500] kampfschlaefer: moos3: github.com/lastobelus/chef-application
[2013-03-05 21:37:50 -0500] geekbri: cwj: link me to it.  I'll star it.  Not ready to undertake changing our pypi server yet anyhow.
[2013-03-05 21:38:21 -0500] cwj: geekbri: our fork of localshop is here https://github.com/needle/localshop/tree/needle and the cookbook is here https://github.com/needle-cookbooks/chef-localshop
[2013-03-05 21:38:40 -0500] geekbri: cwj: thanks.
[2013-03-05 21:38:48 -0500] cwj: sure, enjoy
[2013-03-05 21:38:50 -0500] geekbri: now all we need is coderanger to solve all the pip packing issues in the world :)
[2013-03-05 21:38:53 -0500] geekbri: ;)
[2013-03-05 21:39:25 -0500] chmy: is there a way to see a changelog on a chef recipe uploaded to hosted chef if someone did not increment the version #?
[2013-03-05 21:39:27 -0500] coderanger: geekbri: Slow process, putting together plans for getting PyPI fully HA and behind a caching CDN in the next 6-9 months
[2013-03-05 21:39:39 -0500] bjensen: ah knife-solo makes things really cool :)
[2013-03-05 21:39:44 -0500] cwj: coderanger: sounds like you are having lots of fun :)
[2013-03-05 21:39:51 -0500] coderanger: cwj: Sleep is for the week
[2013-03-05 21:39:55 -0500] coderanger: weak
[2013-03-05 21:39:59 -0500] coderanger: whatever
[2013-03-05 21:39:59 -0500] coderanger: :)
[2013-03-05 21:40:02 -0500] geekbri: coderanger: I actually don't have that many complaints about availability.  I am talking more about the actual packing and creation of our own pips.  Soooo brutal
[2013-03-05 21:40:03 -0500] cwj: << so weak
[2013-03-05 21:40:38 -0500] coderanger: geekbri: Yeah, dstufft has been working on the server side of that, trying to make sure packages are installable
[2013-03-05 21:41:42 -0500] failshell: hello. im using something like node.foo.bar.push('meh') in a recipe. problem is, that doesnt get saved on the node. I tried to add node.save, but that doesnt save it. any way to do that?
[2013-03-05 21:41:57 -0500] version2beta2: coderanger, that's awesome advice, thank you. Would you tweet at me @version2beta, maybe I can listen in on the conversation? We do a lot of python and I'm starting to get up to speed on Chef.
[2013-03-05 21:42:19 -0500] moos3: ahhh its a known bug http://tickets.opscode.com/browse/CHEF-3262
[2013-03-05 21:42:22 -0500] coderanger: version2beta2: Heh, would be in person :)
[2013-03-05 21:42:35 -0500] version2beta2: coderanger, I'll be there :-)
[2013-03-05 21:42:59 -0500] coderanger: Ahh, sure then, if things are planned enough in advance :)
[2013-03-05 21:43:10 -0500] coderanger: PS: PyCon is going to be amaaaaazzzzzzziiiiing
[2013-03-05 21:43:37 -0500] version2beta2: coderanger, This will be my first pycon, though I know a lot of the people from Djangocon too. But I'm pretty damn excited.
[2013-03-05 21:44:21 -0500] version2beta2: coderanger, I know that kind of hallway conference doesn't get planned, so just drop me a line while you're there maybe I can just buy you a beer or something.
[2013-03-05 21:44:52 -0500] coderanger: version2beta2: :-) I'll be the giant bearded man that is running around looking frazzled
[2013-03-05 21:45:09 -0500] coderanger: Last year I only got to see 2/3rds of a talk, hoping to hit a full talk this year
[2013-03-05 21:45:27 -0500] geekbri: moos3: it's a punishment for using SVN! ;)
[2013-03-05 21:46:17 -0500] moos3: lol yea, I have been pushing for work to move to git for two years now
[2013-03-05 21:48:40 -0500] failshell: what's the best way to push values to an attribute that would be an array?
[2013-03-05 21:48:44 -0500] failshell: i want the values to be saved
[2013-03-05 21:48:53 -0500] failshell: say from different cookbooks
[2013-03-05 21:49:57 -0500] kreedy: anyone using ironfan?
[2013-03-05 21:54:20 -0500] josephholsten: kreedy: I looked at it ages ago and dismissed it as too opinionated. As I've been building more orchestration tools into our chef cookbooks, I've been meaning to reinvestigate it
[2013-03-05 21:54:54 -0500] kreedy: about to do some work with hadoop and flume and all signs seem to point to it
[2013-03-05 21:54:56 -0500] log1kal: kreedy: we used ironfan as well, and also found some of their cookbooks too opinionated
[2013-03-05 21:55:29 -0500] kreedy: interesting. my first question was whether i should merge https://github.com/infochimps-labs/ironfan-homebase into my chef-repo
[2013-03-05 21:55:37 -0500] kreedy: which seems to back up the opinionated opinion
[2013-03-05 21:55:46 -0500] bjensen: Im using knife-solo and I just downloaded the memcached recipe from the opscode github repo. Lets say I want to change a variable, e.g. amount of memory memcached can use. How should I change it? I doubt you guys want me to change the defaults variable in cookbooks/memcached/attributes/default.rb..
[2013-03-05 21:57:59 -0500] kreedy: their cookbooks for flume and hadoop seem to be the best ones around though
[2013-03-05 21:58:18 -0500] siezer: wtf is knife-solo
[2013-03-05 21:58:26 -0500] iverson0881: bjensen: you can create a role for your memcached servers and then site override_attributes there
[2013-03-05 21:58:33 -0500] bjensen: https://github.com/matschaffer/knife-solo
[2013-03-05 21:59:04 -0500] magichands: knife solo should be renamed harikari
[2013-03-05 21:59:11 -0500] bjensen: iverson0881: well currently I just have 1 server, so I was wondering where I should override the defaults..
[2013-03-05 21:59:31 -0500] cheeseplus: bjensen: modifying nodes or roles
[2013-03-05 21:59:42 -0500] iverson0881: bjensen: the same way i described. createa role for that one server and override it there
[2013-03-05 21:59:43 -0500] cheeseplus: it appears it supports nodes
[2013-03-05 21:59:43 -0500] bjensen: maybe make my own recipe called app name?
[2013-03-05 22:00:00 -0500] cheeseplus: bjensen: you can just edit the node.json
[2013-03-05 22:00:13 -0500] iverson0881: bjensen: or yeah you could override the node
[2013-03-05 22:00:20 -0500] cheeseplus: but the cookbook approach works as well
[2013-03-05 22:00:28 -0500] bjensen: cheeseplus: yeah but as a newbie, I'm trying to get figure out what is best practice :)
[2013-03-05 22:00:52 -0500] cheeseplus: for something like that you'd typically be overriding in a role or on the node itself
[2013-03-05 22:02:01 -0500] cheeseplus: so in my DC we use roles to set that kind of db info
[2013-03-05 22:02:15 -0500] bjensen: well I was thinking I needed to make my own app recipe already because I need to setup god and it wants me to setup it from within my own recipe: https://github.com/opscode-cookbooks/god
[2013-03-05 22:02:32 -0500] cheeseplus: bjensen: then that most definitely works as well
[2013-03-05 22:03:06 -0500] bjensen: i wouldnt want settings spread all over the place. I would like it in 1 place, I'm just trying to figure out where it should be
[2013-03-05 22:03:45 -0500] version2beta2: coderanger, it sounds like we may be doppelgangers.
[2013-03-05 22:04:12 -0500] cheeseplus: indeed, there are just many way to approach that all happen to work - my preferred is roles, only modifying node attributes if I absolutely need to
[2013-03-05 22:04:27 -0500] version2beta2: coderanger, are you @ coderanger on Twitter? coming from the UK?
[2013-03-05 22:05:39 -0500] bjensen: can anyone tell me what the difference is between the directories cookbooks and site-cookbooks in knife?
[2013-03-05 22:06:09 -0500] TriangleIL: kreedy: unless it was updated, the ironfan flume cookbook is very outdated
[2013-03-05 22:06:49 -0500] magichands: so whats the best way to use lwrp, create a custom cookbook and recipe that installs them appropriately?
[2013-03-05 22:06:50 -0500] knuckolls: bjensen: knife can be configured to read cookbooks from any directory. some people keep all the upstream cookbooks in cookbooks, and all the ones they wrote internally in site-cookbooks.
[2013-03-05 22:07:12 -0500] magichands: knife solo init . sets up some basics
[2013-03-05 22:07:23 -0500] bjensen: knuckolls: thanks. I would think it was the other way around :)
[2013-03-05 22:07:45 -0500] kreedy: TriangleIL: good catch. indeed it is
[2013-03-05 22:07:49 -0500] knuckolls: bjensen: https://github.com/applicationsonline/librarian does it the way i described
[2013-03-05 22:08:07 -0500] TriangleIL: kreedy: I know because I wanted to use it, found it to be extremely out of date, haven't started to write my own yet
[2013-03-05 22:08:11 -0500] knuckolls: bjensen: these days i subscribe to the berkshelf philosophy of cookbook management, so it's kind of a moot point. but i used librarian for well over a year at my previous gig
[2013-03-05 22:09:07 -0500] bjensen: ah thanks guys
[2013-03-05 22:09:10 -0500] kreedy: TriangleIL: i might fork https://github.com/danielpoe/cloudera and tidy it up
[2013-03-05 22:09:38 -0500] bjensen: knuckolls: where can I read up on the berkshell way of handling it if I don't want to be watching videos?
[2013-03-05 22:09:50 -0500] miah: berkshelf.com
[2013-03-05 22:09:51 -0500] miah: read the page
[2013-03-05 22:10:05 -0500] bjensen: thanks again
[2013-03-05 22:10:10 -0500] kreedy: or just start from scratch
[2013-03-05 22:13:59 -0500] coderanger: version2beta2: No, @kantrn on there
[2013-03-05 22:14:17 -0500] coderanger: Dan and I battle over the name, he has coderanger.com, I have .net and .org :)
[2013-03-05 22:15:24 -0500] version2beta2: coderanger, I already follow @kantrn. I'll watch for you at pycon, hope to meet you.
[2013-03-05 22:16:37 -0500] coderanger: :-)
[2013-03-05 22:17:03 -0500] coderanger: We'll probably do a Chef/DevOps/Ops/whatever BoF
[2013-03-05 22:17:12 -0500] coderanger: and Kate is doing a Chef talk
[2013-03-05 22:17:23 -0500] isotope1: hey
[2013-03-05 22:18:03 -0500] coderanger: isotope1: hullo
[2013-03-05 22:18:49 -0500] isotope1: sorry wrong window
[2013-03-05 22:24:54 -0500] miah: herp
[2013-03-05 22:25:31 -0500] doomviking: derp
[2013-03-05 22:26:28 -0500] magichands: so the example php_pear "apc" do action :install end doesn't actually work for me
[2013-03-05 22:26:53 -0500] magichands: I get an error... "Package apc not found in either pecl or pear"
[2013-03-05 22:27:09 -0500] magichands: not sure whats up there... apc is definitely in there
[2013-03-05 22:28:59 -0500] magichands: pecl search apc on the box I'm trying to run that recipe on shows there's a APC package
[2013-03-05 22:30:32 -0500] teukka: bjensen: with knife solo you can put roles to ./roles/something.(rb|json) and the add them to the node's run_list in ./nodes/<nodename>.json
[2013-03-05 22:30:35 -0500] magichands: pecl install apc itself fails with "apc package does not have REST xml available"
[2013-03-05 22:31:08 -0500] magichands: sudo pecl install apc works fine though...
[2013-03-05 22:31:12 -0500] teukka: bjensen: you can also set the attributes directly in the node config if you only have one node
[2013-03-05 22:31:35 -0500] bjensen: teukka: right but I was wondering where to put configurations of recipes i downloaded from github. For example the god recipe which requires you to customize it using a block
[2013-03-05 22:32:35 -0500] teukka: bjensen: ah. then create an "application cookbook" that includes the god recipe and does all the things you want
[2013-03-05 22:33:12 -0500] teukka: bjensen: knife-solo currently has automatic support for librarian but berkshelf support will come soon
[2013-03-05 22:33:26 -0500] magichands: do I need to specify that a recipe is run as root possibly?
[2013-03-05 22:33:35 -0500] bjensen: teukka: right but I can imagine that when I get more servers, all of them should get my app-recipe but not recassrily god, would you then make a god-custom recipe?
[2013-03-05 22:34:05 -0500] bjensen: teukka: the task of the god-custom recipe would be to set it up ofcause
[2013-03-05 22:35:38 -0500] teukka: bjensen: I would use different roles with different run_lists for different types of nodes
[2013-03-05 22:36:36 -0500] bjensen: teukka: right, with that in mind you could have the god-custom in the run list of the application node but not for the run list of the db server.
[2013-03-05 22:37:20 -0500] teukka: bjensen: yep
[2013-03-05 22:37:32 -0500] bjensen: then I think I get it :)
[2013-03-05 22:37:42 -0500] bjensen: thanks for helping me learn
[2013-03-05 22:39:23 -0500] teukka: np. the start is a bit difficult but it pays back
[2013-03-05 22:40:42 -0500] bjensen: teukka: I hope so. The peepcode episodes is a really good help for newbs I think :)
[2013-03-05 22:41:07 -0500] bjensen: starts out by you making your own nginx recipe and then shows you its used etc
[2013-03-05 22:42:15 -0500] cwj: i use this but i dont think it was $15 when i bought it http://www.screenyapp.com/
[2013-03-05 22:42:50 -0500] j^2: i'm trying to build a new chef11 server, and i'm getting this happening :(
[2013-03-05 22:42:54 -0500] j^2: https://gist.github.com/jjasghar/cd72f5d112397b9ea554
[2013-03-05 22:42:59 -0500] cwj: wrong window derp
[2013-03-05 22:43:30 -0500] j^2: any thoughts?
[2013-03-05 22:43:53 -0500] knuckolls: j^2: not sure what to do there, but if i were to set up a chef server i'd use this http://fnichol.github.com/knife-server/
[2013-03-05 22:43:55 -0500] magichands: ok I found it
[2013-03-05 22:44:32 -0500] knuckolls: j^2: pretty sure it'll make 11 servers now
[2013-03-05 22:44:43 -0500] j^2: knuckolls: that was gonna be my next question ;)
[2013-03-05 22:44:49 -0500] knuckolls: https://github.com/fnichol/knife-server/blob/master/CHANGELOG.md
[2013-03-05 22:46:22 -0500] josephholsten: ooh, knife-server users
[2013-03-05 22:46:43 -0500] josephholsten: I'm in the middle of testing a chef 11 migration nao
[2013-03-05 22:47:31 -0500] josephholsten: but has anyone figured out how to get `berks upload` to play nice with a chef server with a self-signed cert?
[2013-03-05 22:48:47 -0500] dcrosta: what's the right way to check if a node has a given role from the node object? something like node.run_list.roles.include?("role[my-role]")?
[2013-03-05 22:49:09 -0500] dcrosta: or perhaps just node.run_list.roles.include?("my-role") ?
[2013-03-05 22:49:22 -0500] knuckolls: dcrosta: i think the node object has a roles array
[2013-03-05 22:49:45 -0500] knuckolls: dcrosta: of everything that's actually been applied to the node, could be wrong
[2013-03-05 22:50:04 -0500] dcrosta: unfortunately the chef docs don't actually include a reference on using the node object that i could find
[2013-03-05 22:50:11 -0500] magichands: ok, so its a bit obscure but I guess unlike the pecl install command php_pear requires the name to be case sensitive
[2013-03-05 22:51:11 -0500] knuckolls: dcrosta: just hop in shef on a node w/ `shef -z` type recipes to go into recipes mode then do (node.methods - Object.methods).sort
[2013-03-05 22:51:23 -0500] knuckolls: that's the poor man's way to hop in and see what you can work with :)
[2013-03-05 22:51:36 -0500] dcrosta: knuckolls node.roles is an empty array there
[2013-03-05 22:51:44 -0500] knuckolls: w/ shef -z?
[2013-03-05 22:51:50 -0500] dcrosta: oh, i didn't see -z
[2013-03-05 22:52:34 -0500] dcrosta: -z did the trick, thanks
[2013-03-05 22:52:38 -0500] dcrosta: i may never have found that
[2013-03-05 22:53:05 -0500] knuckolls: dcrosta: it's old chef lore
[2013-03-05 22:53:13 -0500] knuckolls: passed down through the generations
[2013-03-05 22:53:21 -0500] knuckolls: surely it's documented somewhere. ;)
[2013-03-05 23:06:46 -0500] tmichael: is there some sort of client/server connect timeout that could cause 403 forbidden error of one step in a chef run (a download that's going really slow) takes 30 minutes or so to complete?
[2013-03-05 23:07:02 -0500] tmichael: so basically, by the time the chef client goes back to finish the job it's rejected by the server?
[2013-03-05 23:11:19 -0500] miah: you're storing a large file in chef and then downloading it from hosted chef?
[2013-03-05 23:14:33 -0500] tmichael: no
[2013-03-05 23:14:50 -0500] tmichael: cookbook install includes a wget from external source
[2013-03-05 23:14:59 -0500] tmichael: which is taking 30+ minutes to complete
[2013-03-05 23:15:19 -0500] tmichael: it does and then cook moves on to template resource and pukes with a 403 forbidden which makes no sense
[2013-03-05 23:15:26 -0500] miah: why not mirror it to a local server?
[2013-03-05 23:15:28 -0500] tmichael: unless my session is tiing out
[2013-03-05 23:15:47 -0500] bjensen: can anyone get the imagemagick to work on ubuntu 12.04 lts? I get the error: http://pastie.org/6400901
[2013-03-05 23:15:54 -0500] tmichael: that's what i'm thinking i'll do.  just curious if there is such a timeout
[2013-03-05 23:16:22 -0500] tmichael: only thing i can think to explain a 403 on open source chef
[2013-03-05 23:16:54 -0500] miah: there are timeouts
[2013-03-05 23:29:31 -0500] llakey: after installing chef 11 omnibus on ubuntu what do i need to do to find/create the knife.rb and .pem files needed to use knife etc.
[2013-03-05 23:36:53 -0500] tmichael: knife.rb created on new workstation using "knife configure -i"
[2013-03-05 23:38:14 -0500] llakey: tmichael: reading the docs i was under the impression i was supposed to run `knife configure -initial` on the chef server, generate some files, copy them to the workstation, etc. but i don't see that knife is installed on the chef server by the omnibus package.
[2013-03-05 23:38:52 -0500] llakey: i'll try what you posted. thanks
[2013-03-05 23:38:55 -0500] tmichael: llakey: on new chef-server you should see your validation and admin pem certs in /etc/chef-server
[2013-03-05 23:39:07 -0500] tmichael: copy those to your workstation
[2013-03-05 23:39:28 -0500] tmichael: and use knife configure -i to setup your knife.rb and create your user
[2013-03-05 23:39:40 -0500] ggolin: hey guys has anyone been able to get deploy_revision to work? having a bitch of a time over here.
[2013-03-05 23:40:08 -0500] llakey: tmichael: ooooh. thanks. i had looked in /etc/chef/ and i hadn't even noticed /etc/chef-server/
[2013-03-05 23:40:16 -0500] cwj: ggolin: im pretty familiar with it, what seems to be the problem?
[2013-03-05 23:40:19 -0500] tmichael: yeah, /etc/chef is the client
[2013-03-05 23:40:35 -0500] tmichael: cuz even chef-server can be a client (of itself)
[2013-03-05 23:40:41 -0500] ggolin: cwj, i cant get it to clone/checkout consistently
[2013-03-05 23:40:46 -0500] ggolin: cwj, or, at all
[2013-03-05 23:41:56 -0500] cwj: ggolin: what behavior do you expect and what behavior are you seeing?
[2013-03-05 23:42:50 -0500] ggolin: cwj sometimes the cached copy of the git repo is not there and the check out of the repository is no there
[2013-03-05 23:44:28 -0500] cwj: ggolin: are you manually removing a previously deployed copy and expecting deploy_revision to redeploy it?
[2013-03-05 23:44:54 -0500] ggolin: cwj, i manually removed the directory to which :path is pointing, yes
[2013-03-05 23:44:59 -0500] cwj: ok
[2013-03-05 23:45:06 -0500] ggolin: sec let me paste the code
[2013-03-05 23:45:11 -0500] cwj: deploy_revision keeps a cache of revisions it has already deployed
[2013-03-05 23:45:21 -0500] cwj: so if you wipe out the contents of the path, that alone is not enough
[2013-03-05 23:45:47 -0500] ggolin: http://pastie.org/6401271
[2013-03-05 23:45:56 -0500] ggolin: i see
[2013-03-05 23:45:59 -0500] cwj: you need to either wipe out the cache also, or use the :force_deploy action
[2013-03-05 23:46:03 -0500] ggolin: where is the cache? var/cache/chef?
[2013-03-05 23:46:15 -0500] cwj: yeah i think its typically under there
[2013-03-05 23:46:29 -0500] cwj: if you want to deploy the same revision over and over, use deploy instead of deploy_revision
[2013-03-05 23:47:05 -0500] cwj: for a while i was using deploy with a not_if { File.exists?('/path/to/a/lock/file') }
[2013-03-05 23:47:17 -0500] cwj: depends on your needs
[2013-03-05 23:47:31 -0500] ggolin: cwj, thank you i was not aware of it
[2013-03-05 23:47:40 -0500] cwj: no problem
[2013-03-05 23:49:30 -0500] ggolin: cwj, thank you, i got much further now.
[2013-03-05 23:49:54 -0500] cwj: very good
[2013-03-05 23:50:11 -0500] kisoku: cwj: thanks
[2013-03-05 23:50:16 -0500] kisoku: working with ggolin
[2013-03-05 23:50:29 -0500] kisoku: blowing away /var/cache/chef/revision_deploy solved it
[2013-03-05 23:50:47 -0500] cwj: right on
[2013-03-05 23:50:51 -0500] cwj: glad to help
[2013-03-05 23:55:24 -0500] maek: If I use the -o option for chef-client to override the current run list does it change the run list for that node forever or just that single run?

[2013-03-20 00:00:09 -0400] lumbendil: seems like some problem with the ubuntu repos
[2013-03-20 00:01:00 -0400] tomdzk: lumbendil: what's the error ?
[2013-03-20 00:01:10 -0400] lumbendil: http://pastebin.com/7xEmqj2v
[2013-03-20 00:01:27 -0400] lumbendil: update is failing aswell...
[2013-03-20 00:01:37 -0400] tomdzk: lumbendil: can you ping us.archive.ubuntu.com from within the vm ?
[2013-03-20 00:02:09 -0400] lumbendil: I'll try
[2013-03-20 00:02:17 -0400] lumbendil: apt-get update seems to fail aswell
[2013-03-20 00:03:20 -0400] lumbendil: tomdzk, nope, it ain't resolving even google.es
[2013-03-20 00:03:33 -0400] lumbendil: so... VirtualBox issue then...
[2013-03-20 00:04:00 -0400] tomdzk: can you ping 91.189.91.15 (that's the IP that  us.archive.ubuntu.com resolves to) ?
[2013-03-20 00:04:27 -0400] lumbendil: it works, so dns issue
[2013-03-20 00:06:03 -0400] tomdzk: lumbendil: try turning on natdnshostresolver1 for the VM (http://askubuntu.com/questions/238040/how-do-i-fix-name-service-for-vagrant-client)
[2013-03-20 00:11:36 -0400] lumbendil: tomdzk, ok, that issue solved, now more issues for me... seems it doesn't want to work xD
[2013-03-20 00:11:49 -0400] lumbendil: but the issue is by some of my code now
[2013-03-20 00:16:14 -0400] tomdzk: lumbendil: heh
[2013-03-20 00:16:40 -0400] lumbendil: tomdzk, seems I'm running into problems with an apt_repository call
[2013-03-20 00:21:56 -0400] capen: jtimberman: sorry got pulled away to meetings yay! :P  re: supporting pkg version in all cookbooks --> that's definitely a value question and varies depending on vantage point.  whereas, Opscode might not see value in doing that work, it is quite possible that my team putting in the effort to help put that in all the cookbooks is much less overhead
[2013-03-20 00:21:57 -0400] capen: than forking and managing our own.  I would also hope that others may find it to valuable as well.  if it's a matter of effort on retro'ing the cookbooks I may know where to get cycles from. ;)
[2013-03-20 00:29:19 -0400] rafaelmagu: I'm having an issue uploading cookbooks to Chef server 10x
[2013-03-20 00:30:44 -0400] rafaelmagu: Getting a Ridley exception
[2013-03-20 00:30:57 -0400] rafaelmagu: 405 Method Not Allowed uploading a specific cookbook
[2013-03-20 00:31:28 -0400] jtnz: Hi, if I have a method in a library, and I don't want to use it until execution time, I put it in a ruby_block. Problem is it can't find my method, any ideas?
[2013-03-20 00:31:47 -0400] miah: dont put it in a ruby_bloc
[2013-03-20 00:32:06 -0400] jtnz: miah, but it has to run during execution, not compilation time
[2013-03-20 00:35:51 -0400] lumbendil: tomdzk, thanks for all your help, this is working (at last)
[2013-03-20 00:36:10 -0400] tomdzk: lumbendil: great !
[2013-03-20 00:37:31 -0400] jtnz: https://gist.github.com/jtnz/5201424
[2013-03-20 00:45:21 -0400] Chris_Woods: Hmm, when I run knife bootstrap <ip> -N <name> -x <user> -i <rsa_key> I get back "Error: undefined method 'join' for nil:NilClass" -- is there something wrong with the bootstrap.
[2013-03-20 01:25:29 -0400] Chris_Woods: anyone know if there is a workaround for this:  http://tickets.opscode.com/browse/CHEF-3884?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel
[2013-03-20 01:25:55 -0400] Chris_Woods: (summary: you cna't edit databags on chef 11 on ubuntu 12)
[2013-03-20 01:30:25 -0400] segv: wha?
[2013-03-20 01:30:30 -0400] segv: What error are you getting?
[2013-03-20 01:30:57 -0400] segv: Use Chef 11.4.
[2013-03-20 01:31:01 -0400] segv: Not 11.0.x
[2013-03-20 01:32:50 -0400] Chris_Woods: knife -v returns 11.4.0
[2013-03-20 01:33:09 -0400] Chris_Woods: The error is the same as in the bug report:
[2013-03-20 01:33:10 -0400] Chris_Woods: ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2013-03-20 01:33:22 -0400] segv: ah
[2013-03-20 01:33:30 -0400] segv: ruby version?
[2013-03-20 01:33:49 -0400] Chris_Woods: Sure?  Honestly, don't know for sure.  How would I figure that out?
[2013-03-20 01:33:57 -0400] segv: ruby -v
[2013-03-20 01:34:18 -0400] Chris_Woods: on the chef server, correct?
[2013-03-20 01:34:20 -0400] segv: and gem list | grep -i chef
[2013-03-20 01:34:21 -0400] segv: yes
[2013-03-20 01:34:30 -0400] segv: See if there are any conflicts
[2013-03-20 01:34:42 -0400] segv: And make sure your client (locally) is chef 11.x
[2013-03-20 01:34:48 -0400] segv: not just 'apt-get install chef'
[2013-03-20 01:35:05 -0400] segv: knife -v for me
[2013-03-20 01:36:33 -0400] Chris_Woods: Hrm, I'm  a little weak on reading this output, but it looks like both ruby1.8 and ruby1.9.1 are installed.  Or neither one is and it's telling me what's available.
[2013-03-20 01:36:46 -0400] segv: ruby -v is saying that?
[2013-03-20 01:37:05 -0400] Chris_Woods: The program 'ruby' can be found in the following packages:
[2013-03-20 01:37:08 -0400] Chris_Woods:  * ruby1.8
[2013-03-20 01:37:13 -0400] Chris_Woods:  * ruby1.9.1
[2013-03-20 01:37:17 -0400] Chris_Woods: Try: apt-get install <selected package>
[2013-03-20 01:37:21 -0400] Chris_Woods: is what I get back from ruby -v
[2013-03-20 01:37:46 -0400] segv: aye means ruby isn't installed natively, but no big
[2013-03-20 01:37:50 -0400] segv: what does knive -v say?
[2013-03-20 01:38:21 -0400] Chris_Woods: On the server, knife returns command not found.  On the client, 11.4
[2013-03-20 01:38:37 -0400] segv: okay, so same client as server
[2013-03-20 01:38:43 -0400] segv: Can rule that out then
[2013-03-20 01:39:02 -0400] Chris_Woods: Uh, maybe.  I setup the client a while ago.  How do I check the server version?  It's no longer on the webUI
[2013-03-20 01:39:30 -0400] segv: On the server dpkg -l | grep chef
[2013-03-20 01:40:08 -0400] Chris_Woods: yeah, it's 11.0.6.  Damn.  Is there a way to update it without losing the runlists and cooks I've uploaded thus far?
[2013-03-20 01:41:00 -0400] segv: You should be able to safely upgrade without it nuking out postgres
[2013-03-20 01:41:11 -0400] segv: backup the /opt/chef directory
[2013-03-20 01:41:25 -0400] segv: then dpkg -i the new .deb
[2013-03-20 01:41:43 -0400] Chris_Woods: kk, that's not so bad.  Do I put /opt/chef back after the dpkg?
[2013-03-20 01:42:21 -0400] segv: nope
[2013-03-20 01:42:24 -0400] segv: that's just in case it blows up
[2013-03-20 01:42:30 -0400] Chris_Woods: ah, gotcha.
[2013-03-20 01:42:34 -0400] segv: then you can remove the old chef install install the safe version back
[2013-03-20 01:42:41 -0400] segv: and overwrite the directory with your backed up install
[2013-03-20 01:42:46 -0400] segv: omnitruck <3
[2013-03-20 01:43:59 -0400] Chris_Woods: okay, so just to be sure -- I backup /opt/chef-server, then I grab the new deb from omnibus, then I dpkg it.  In theory, after those three things, everything should by 11.6.0?
[2013-03-20 01:44:04 -0400] eliklein: err, what's the argument to set a hint during bootstrap
[2013-03-20 01:44:06 -0400] eliklein: ?
[2013-03-20 01:44:43 -0400] segv: should be 11.4.0
[2013-03-20 01:45:16 -0400] eliklein: ahhh --hint
[2013-03-20 01:45:19 -0400] eliklein: haha.
[2013-03-20 01:45:56 -0400] segv: eliklein, yeah was going to say
[2013-03-20 01:46:04 -0400] segv: sorry, at home wife was yellin for somethin heh
[2013-03-20 01:46:11 -0400] eliklein: no worries :)
[2013-03-20 01:46:17 -0400] eliklein: it forced me to not be lazy
[2013-03-20 01:46:20 -0400] Chris_Woods: Hum, omnibus only has 11.0.4 or 11.0.6 for ubuntu 12.04.  Where should I get the right package?
[2013-03-20 01:46:24 -0400] eliklein: and use the useful help :)
[2013-03-20 01:46:39 -0400] segv: Chris_Woods, ah, didn't know it was that limited.
[2013-03-20 01:46:51 -0400] segv: Chris_Woods, I am not sure if the 11.4 client is backwards compatible with 11.0.6
[2013-03-20 01:46:57 -0400] segv: jtimberman, you around?
[2013-03-20 01:48:16 -0400] Chris_Woods: Hm, websearches seem to indicate there is an 11.4 for ubuntu; is http://www.opscode.com/chef/install/ not the correct place to get the most recent?
[2013-03-20 01:48:32 -0400] segv: There is, but I am not sure if it works on 12.04, it works for 12.10
[2013-03-20 01:48:51 -0400] segv: https://opscode-omnitruck-release.s3.amazonaws.com/ubuntu/11.04/x86_64/chef_11.4.0-1.ubuntu.11.04_amd64.deb
[2013-03-20 01:48:52 -0400] eliklein: so
[2013-03-20 01:49:04 -0400] segv: knife bootstrap --help <3
[2013-03-20 01:49:18 -0400] eliklein: omnibus says "11.0.4" even tho the version is 11.4
[2013-03-20 01:49:19 -0400] eliklein: i thought
[2013-03-20 01:49:25 -0400] eliklein: and 11.0.6 is 11.6
[2013-03-20 01:49:32 -0400] eliklein: am i incorrect in that assumption?
[2013-03-20 01:49:39 -0400] segv: No.
[2013-03-20 01:49:50 -0400] segv: Not that I am aware of
[2013-03-20 01:50:01 -0400] eliklein: ah curious
[2013-03-20 01:50:09 -0400] segv: there is 11.0.0, 11.2.0 and 11.4.0
[2013-03-20 01:50:12 -0400] eliklein: ok
[2013-03-20 01:50:31 -0400] segv: Where are you guys seeing 11.0.6?
[2013-03-20 01:50:45 -0400] segv: OHHH
[2013-03-20 01:50:45 -0400] eliklein: i don't recall
[2013-03-20 01:50:47 -0400] segv: god client
[2013-03-20 01:50:48 -0400] segv: blah
[2013-03-20 01:50:52 -0400] segv: haha, my fault
[2013-03-20 01:50:54 -0400] eliklein: chef server?
[2013-03-20 01:50:57 -0400] eliklein: client?
[2013-03-20 01:50:57 -0400] segv: yeah
[2013-03-20 01:50:58 -0400] eliklein: yeah
[2013-03-20 01:51:00 -0400] segv: I was on client
[2013-03-20 01:51:10 -0400] segv: yeah 11.0.6 server, 11.4 client
[2013-03-20 01:51:14 -0400] eliklein: got it
[2013-03-20 01:51:19 -0400] eliklein: clear as mud :)
[2013-03-20 01:51:27 -0400] segv: muds pretty translucent man
[2013-03-20 01:51:45 -0400] Chris_Woods: okay, so 11.0.6 is the correct server for me to be running, and 11.4 is the correct client?
[2013-03-20 01:51:55 -0400] segv: Chris_Woods, correct
[2013-03-20 01:52:31 -0400] Chris_Woods: well damn.  That brings me back to the databag bug.  (http://tickets.opscode.com/browse/CHEF-3884?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)
[2013-03-20 01:54:47 -0400] segv: yeah
[2013-03-20 01:54:51 -0400] segv: not sure whats going on here
[2013-03-20 01:54:57 -0400] svanzoest: in chef-server 11 is there a way to specify the listen IP for nginx? not seeing anything other than  nginx['server_name'] I would like to hang chef-server off an alias IP on the box as the defaults are already in use.
[2013-03-20 01:56:22 -0400] segv: svanzoest, you can hack that by setting the fqdn to the ip of the virtual ip
[2013-03-20 01:56:24 -0400] segv: then reconfiguring it
[2013-03-20 01:56:34 -0400] segv: Just a theory.
[2013-03-20 01:56:52 -0400] rafaelmagu: I just updated the gems on Chef server to see if I could get rid of the Method Not Allowed error and now I'm getting a "Could not find resource model User" in the logs for chef-server
[2013-03-20 01:56:59 -0400] rafaelmagu: Repeats with Node, Role, Environment and Datum
[2013-03-20 01:57:06 -0400] rafaelmagu: HALP!
[2013-03-20 01:58:19 -0400] segv: aye
[2013-03-20 01:58:55 -0400] rmcl: noob question.. With chef-solo if I want to use opscode's git cookbook do I need to download all of the dependent cookbooks like "dmg" and "windows" even though I'm not running on osx or windows?
[2013-03-20 02:00:58 -0400] svanzoest: segv: hmm.. looks like nginx['ssl_port'] = "172.1.1.54:443" did the trick. the template just throws that variable in the config at the listen directive
[2013-03-20 02:01:08 -0400] segv: nice
[2013-03-20 02:03:45 -0400] Chris_Woods: hrm, knife data bag edit <bag> also fails.  Is there another way to edit the contents of a bag?
[2013-03-20 02:04:40 -0400] Chris_Woods: ahh, looks like the docs at http://docs.opscode.com/knife_data_bag.html aren't current.
[2013-03-20 02:05:07 -0400] Chris_Woods: knife data bag create <bag>; then knife data bag create <bag> <item> will bring up $EDITOR to work on the contents of that and save it
[2013-03-20 02:05:11 -0400] Chris_Woods: So, there is a workaround.
[2013-03-20 02:08:52 -0400] svanzoest: this got my chef server 11 up; https://gist.github.com/svanzoest/5201772
[2013-03-20 02:25:35 -0400] svanzoest: rmcl: yes you need all the dependencies if they are listed in the metadata
[2013-03-20 02:51:44 -0400] jtimberman: segv: chef 11.4 is compatible with 11.0.6 open source server
[2013-03-20 02:56:18 -0400] eliklein: jtimberman: i just saw that the knife-ec2 plugin was updated to include vpc private ips
[2013-03-20 02:56:23 -0400] segv: jtimberman, Yeah, after I figured I was looking at the wrong pace, I figured it out
[2013-03-20 02:56:24 -0400] jtimberman: eliklein: oho?
[2013-03-20 02:56:31 -0400] eliklein: jtimberman: what's the easiest way for me to get my hands on the newest version?
[2013-03-20 02:56:33 -0400] eliklein: github?
[2013-03-20 02:56:48 -0400] jtimberman: with the "11.x" versions, the client and server versions are separate.
[2013-03-20 02:56:54 -0400] jtimberman: eliklein: build the gem yeah
[2013-03-20 02:57:59 -0400] eliklein: k
[2013-03-20 02:58:48 -0400] jtimberman: eliklein: are you using bundler w/ your chef-repo?
[2013-03-20 02:58:57 -0400] eliklein: no
[2013-03-20 02:59:18 -0400] jtimberman: k, i won't say "put the github repo in your Gemfile and bundle update" then
[2013-03-20 02:59:22 -0400] jtimberman: ;)
[2013-03-20 02:59:32 -0400] eliklein: haha
[2013-03-20 03:04:19 -0400] segv: http://www.barilla.com/content/product/three-cheese-tortellini <-- sham
[2013-03-20 03:04:29 -0400] eliklein: man, i close on my new place tomorrow
[2013-03-20 03:04:31 -0400] eliklein: <- pumped
[2013-03-20 03:04:41 -0400] segv: I bought that stuff, so not whats on the cover
[2013-03-20 03:04:47 -0400] segv: eliklein, buying or renting?
[2013-03-20 03:04:50 -0400] segv: either way, congrats!
[2013-03-20 03:04:52 -0400] eliklein: buying
[2013-03-20 03:05:17 -0400] eliklein: now i just need to make sure my old house makes it through inspection and appraisal
[2013-03-20 03:05:28 -0400] eliklein: or i'm gonna have a bad time :)
[2013-03-20 03:05:53 -0400] rafaelmagu: AAAAAAARGHHHH!
[2013-03-20 03:05:59 -0400] rafaelmagu: Damn 405 Method Not Allowed again
[2013-03-20 03:06:06 -0400] rafaelmagu: I can't for the life of me figure it out
[2013-03-20 03:07:37 -0400] segv: eliklein, awesome
[2013-03-20 03:07:49 -0400] segv: I have yet to buy, but I am in the bay area
[2013-03-20 03:07:54 -0400] eliklein: segv, yeah, keeping my fingers crossed :)
[2013-03-20 03:07:54 -0400] segv: I need like 100K for a down payment
[2013-03-20 03:07:59 -0400] eliklein: ah yes, different story
[2013-03-20 03:08:01 -0400] eliklein: haha yeah
[2013-03-20 03:20:32 -0400] Chris_Woods: I'm having a little trouble understanding an error in my cookbook.  It's an old script from a previous version of chef that might have changed interfaces in some way.  My error is:
[2013-03-20 03:20:44 -0400] Chris_Woods: Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'
[2013-03-20 03:20:47 -0400] Chris_Woods: generated from the code:
[2013-03-20 03:20:56 -0400] Chris_Woods: 18>> node['reckoning_role'] = roles[0]
[2013-03-20 03:21:20 -0400] Chris_Woods: Am I supposed to update that to "node.default['reckoning_role'] = roles[0]"?
[2013-03-20 03:35:29 -0400] bluekelp: Chris_Woods: i generally assign to node.override instead of node.default but yeah
[2013-03-20 03:36:18 -0400] Chris_Woods: bluekelp, just so I understand why what does node.override do that node.default doesn't?
[2013-03-20 03:38:22 -0400] bluekelp: i don't fully understand the precendence. for your purpose it might not matter. but since i was (by intent) overriding defaults that were already set it seemed more correct
[2013-03-20 03:39:13 -0400] bluekelp: also note that if you use "node.set[:foo][:bar] = :derp" the node will have that attribute set on it (see it later with "knife node show -F json <node_name>")
[2013-03-20 03:39:26 -0400] bluekelp: it's there but generally not what you need/require
[2013-03-20 03:41:59 -0400] rafaelmagu: Cool
[2013-03-20 03:42:11 -0400] rafaelmagu: So I purged all the cookbooks from my Chef server
[2013-03-20 03:42:15 -0400] rafaelmagu: And can't upload any new ones
[2013-03-20 03:42:30 -0400] rafaelmagu: So I have a cookbook-less Chef server
[2013-03-20 03:42:32 -0400] rafaelmagu: Handy
[2013-03-20 03:43:07 -0400] bluekelp: rafaelmagu: not so much :(
[2013-03-20 03:43:18 -0400] rafaelmagu: bluekelp: :/
[2013-03-20 03:43:36 -0400] bluekelp: rafaelmagu: how did you purse them from the server?
[2013-03-20 03:44:28 -0400] rafaelmagu: knife cookbook bulk delete --purge
[2013-03-20 03:44:35 -0400] rafaelmagu: Trying to fix an issue where I can't upload new cookbooks
[2013-03-20 03:44:38 -0400] gchristensen: has anyone made the network map actually work with the nagios cookbook? it looks like it would be an extremely large time investment to get it to display anything meaningful.
[2013-03-20 03:48:56 -0400] bluekelp: rafaelmagu: do you get an error when you try and re-upload?
[2013-03-20 03:49:11 -0400] rafaelmagu: yeap
[2013-03-20 03:49:14 -0400] rafaelmagu: Holdon
[2013-03-20 03:50:01 -0400] rafaelmagu: That's weird
[2013-03-20 03:50:09 -0400] rafaelmagu: I can upload with knife upload, individually
[2013-03-20 03:50:13 -0400] rafaelmagu: But can't using berkshelf
[2013-03-20 03:50:16 -0400] rafaelmagu: Hmm
[2013-03-20 03:50:18 -0400] rafaelmagu: Plot thickens
[2013-03-20 03:50:31 -0400] bluekelp: "I'm glad I could help!"
[2013-03-20 03:50:42 -0400] rafaelmagu: :D
[2013-03-20 03:53:09 -0400] eliklein: rafaelmagu: upgrade ridley
[2013-03-20 03:53:27 -0400] rafaelmagu: eliklein: did already
[2013-03-20 03:53:34 -0400] eliklein: ah damn  :)
[2013-03-20 03:54:10 -0400] rafaelmagu: Went through a lot of trouble
[2013-03-20 03:54:14 -0400] rafaelmagu: Breaking and then fixing my gems
[2013-03-20 03:54:48 -0400] rafaelmagu: Running 0.8.5 ridley
[2013-03-20 03:55:13 -0400] rafaelmagu: When doing a berks upload
[2013-03-20 03:55:14 -0400] rafaelmagu: Ridley::SandboxUploader crashed!
[2013-03-20 03:55:15 -0400] rafaelmagu: Ridley::Errors::HTTPMethodNotAllowed:
[2013-03-20 03:55:35 -0400] rafaelmagu: Then the full html source of an Apache error page for status 405
[2013-03-20 03:55:47 -0400] rafaelmagu: The requested method PUT is not allowed for the URL /sandboxes/de4258a623c7472891da4d1a1809c6df/b5104f086b508ba611b4d4f41c1144c3
[2013-03-20 04:01:28 -0400] eliklein: ahh, that's a different error than i was getting
[2013-03-20 04:01:32 -0400] eliklein: i was having checksum problems
[2013-03-20 04:01:42 -0400] rafaelmagu: Yeah
[2013-03-20 04:01:44 -0400] rafaelmagu: Weird
[2013-03-20 04:01:52 -0400] rafaelmagu: Seems berkshelf is uploading things incorrectly
[2013-03-20 04:02:23 -0400] ivey: ridley had a bug, but it's fixed
[2013-03-20 04:02:56 -0400] ivey: 0.8.6 has the fix
[2013-03-20 04:03:02 -0400] rafaelmagu: Ahh
[2013-03-20 04:03:04 -0400] rafaelmagu: There you go
[2013-03-20 04:03:09 -0400] rafaelmagu: I'm on 0.8.5
[2013-03-20 04:03:13 -0400] eliklein: yay, maybe i was right
[2013-03-20 04:03:15 -0400] rafaelmagu: knife upload works
[2013-03-20 04:03:18 -0400] ivey: wait, 0.8.5 should have as well
[2013-03-20 04:03:23 -0400] ivey: sure you have 0.8.5?
[2013-03-20 04:03:23 -0400] eliklein: doh nm
[2013-03-20 04:03:29 -0400] rafaelmagu: yup
[2013-03-20 04:04:02 -0400] ivey: reset: 0.8.5 had the sandbox fix right?
[2013-03-20 04:04:17 -0400] reset: yeah, 0.8.5 should have the sandbox fix
[2013-03-20 04:04:29 -0400] rafaelmagu: my normal workflow => berks update; berks upload
[2013-03-20 04:04:46 -0400] rafaelmagu: my current workflow => berks update; berks install --path cookbooks/; knife cookbook upload --all
[2013-03-20 04:05:38 -0400] reset: master of Berkshelf locks to the fixed version of Ridley
[2013-03-20 04:05:46 -0400] reset: you can also just install the new version yourself
[2013-03-20 04:05:55 -0400] rafaelmagu: 0.8.6?
[2013-03-20 04:05:56 -0400] reset: new version of Berkshelf should be out pretty soon
[2013-03-20 04:05:59 -0400] rafaelmagu: How do I pull that?
[2013-03-20 04:06:00 -0400] reset: I would suggest 0.8.6
[2013-03-20 04:06:11 -0400] reset: gem install ridley will do it
[2013-03-20 04:06:13 -0400] rafaelmagu: doing a gem cleanup just in case
[2013-03-20 04:08:27 -0400] rafaelmagu: ridley (0.8.5)
[2013-03-20 04:08:30 -0400] rafaelmagu: double checked
[2013-03-20 04:08:46 -0400] reset: double checked what
[2013-03-20 04:09:05 -0400] rafaelmagu: the gem version
[2013-03-20 04:09:15 -0400] rafaelmagu: how do I install 0.8.6?
[2013-03-20 04:09:22 -0400] rafaelmagu: just in the interest of testing it
[2013-03-20 04:09:51 -0400] reset: gem install ridley will get 0.8.6
[2013-03-20 04:10:17 -0400] rafaelmagu: hmm
[2013-03-20 04:14:59 -0400] reset: rafaelmagu: if you want to try the master branch i'm about to add a debug flag that will enable debug output
[2013-03-20 04:17:55 -0400] rafaelmagu: I'll check berks with 0.8.6 first
[2013-03-20 04:17:58 -0400] rafaelmagu: See if it does the trick
[2013-03-20 04:21:52 -0400] bluekelp: what's the best way to fork a broken recipe that's being pulled in via librarian/etc?
[2013-03-20 04:22:35 -0400] bluekelp: i was thinking of just copying the repo it comes from and adding a third "forked-cookbooks" dir that librarian pulls from until/unless the upstream repo accepts a pull request and fixes
[2013-03-20 04:22:38 -0400] rafaelmagu: 0.8.6 doesn't fix it
[2013-03-20 04:22:42 -0400] rafaelmagu: fyi
[2013-03-20 04:27:36 -0400] reset: rafaelmagu: if you want to try the master branch of Berkshelf there is a -d flag on the CLI
[2013-03-20 04:27:44 -0400] reset: if you set it then you'll get debug output
[2013-03-20 04:27:49 -0400] rafaelmagu: Neat
[2013-03-20 04:27:59 -0400] rafaelmagu: How do I get a hold of that
[2013-03-20 04:28:06 -0400] reset: https://github.com/RiotGames/berkshelf
[2013-03-20 04:28:10 -0400] reset: git clone it down
[2013-03-20 04:28:21 -0400] reset: or if you wait until tomorrow it should be released to rubygems
[2013-03-20 04:28:26 -0400] rafaelmagu: Ahh
[2013-03-20 04:28:28 -0400] rafaelmagu: Might wait then
[2013-03-20 04:28:34 -0400] rafaelmagu: End of shift today here
[2013-03-20 04:29:19 -0400] reset: ok we can try tomorrow
[2013-03-20 04:31:21 -0400] rafaelmagu: good enough
[2013-03-20 06:42:57 -0400] Mithrandir: vegardx: you want to use template foo do variables({nginx_listenaddress => node[:nginx][:listenaddress]}) end and then use @nginx_listenaddress in the template.  Else, you'll get a broken template and no error if the listen address isn't set.
[2013-03-20 07:29:50 -0400] BryanWB__: juliancdunn: around?
[2013-03-20 07:55:12 -0400] BryanWB: rubgems down?
[2013-03-20 07:56:45 -0400] BryanWB: bundle install is hanging for me at "fetching gem metadata"
[2013-03-20 10:04:41 -0400] railsraider: is it valid and ok to have a method inside a definition that will generate a template?
[2013-03-20 10:05:52 -0400] railsraider: basically i wanna check the params[:option] if it has a specific key i wanna call loop over all the array in the params[:options] calling generate_template each time
[2013-03-20 10:10:01 -0400] zts: railsraider: creating multiple resources inside a definition is fine
[2013-03-20 10:10:18 -0400] zts: railsraider: defining helper methods inside your definition, I'm not sure - I'd expect it to work, but try it and see
[2013-03-20 10:10:27 -0400] railsraider: ok
[2013-03-20 10:10:29 -0400] railsraider: thanks
[2013-03-20 10:17:48 -0400] s2r2: hello.  Has anybody else run into trouble using opscode-cookbooks/application_java's java_local_file strategy?  (Or using jcam's branch?)  Both fail for me..
[2013-03-20 10:19:26 -0400] s2r2: the "default" way creates a file containing the _absolute file name_ of the file it was supposed to copy...
[2013-03-20 10:42:00 -0400] Sgoettschkes: Hi. After setting up chef server/client/everything, I was able to bootstrap a node
[2013-03-20 10:42:10 -0400] Sgoettschkes: I added a role to it and everything
[2013-03-20 10:42:25 -0400] Sgoettschkes: how do I tell that node to update itself?
[2013-03-20 10:51:23 -0400] zts: Sgoettschkes: you run chef-client again on the node
[2013-03-20 10:51:43 -0400] Sgoettschkes: so I have to log into that node?
[2013-03-20 10:52:02 -0400] zts: you could run chef-client as a service, so that it automatically updates every so often
[2013-03-20 10:52:09 -0400] zts: or run it out of cron
[2013-03-20 10:52:09 -0400] Sgoettschkes: hmmm
[2013-03-20 10:52:27 -0400] Sgoettschkes: yeah, of course, but wouldn't it be nice if there would a knife command for that?
[2013-03-20 10:52:32 -0400] zts: but other than that, yes.  Some people use "knife ssh" to run chef-client on a bunch of nodes
[2013-03-20 10:52:43 -0400] zts: or you could use mcollective or a similar tool
[2013-03-20 10:53:00 -0400] Sgoettschkes: hmm
[2013-03-20 10:53:14 -0400] Sgoettschkes: I see
[2013-03-20 10:54:10 -0400] zts: Actually, it might be interesting to write a knife plugin designed to fire off chef-client on a bunch of nodes (it could probably just wrap 'knife ssh' with some sensible defaults)
[2013-03-20 10:54:31 -0400] Sgoettschkes: I am surprised this is not part of knife
[2013-03-20 10:54:48 -0400] Sgoettschkes: I was super happy with the knife bootstrap thing, thinking I would never have to log into my node
[2013-03-20 10:55:12 -0400] zts: well like I said, you can do it with "knife ssh".  Not everyone permits workstations ssh'ing into all of their servers and running things as root
[2013-03-20 10:55:30 -0400] Sgoettschkes: that's true
[2013-03-20 10:56:15 -0400] s2r2: Sgoettschkes: there's a cookbook for setting up the chef-client service on a node: http://community.opscode.com/cookbooks/chef-client
[2013-03-20 10:56:18 -0400] zts: you might also want to check out the "chef-client" cookbook, which can make sure that it runs occasionally on your server.  That doesn't help if you want to make a change happen _right now_, but it's generally useful
[2013-03-20 10:56:23 -0400] zts: s2r2: snap :)
[2013-03-20 10:57:31 -0400] Sgoettschkes: s2r2: Thanks, I'll have a look
[2013-03-20 10:57:57 -0400] Sgoettschkes: I'm not sure if this is the right approach as server config doesn't change that often
[2013-03-20 10:58:29 -0400] Sgoettschkes: and sometimes I'd need a change to happen quickly
[2013-03-20 10:59:31 -0400] Sgoettschkes: anyway, thanks for your help s2r2, zts
[2013-03-20 10:59:45 -0400] Sgoettschkes: I now know my options
[2013-03-20 10:59:48 -0400] s2r2: zts: :)
[2013-03-20 10:59:50 -0400] Sgoettschkes: I'll play around a bit
[2013-03-20 11:02:14 -0400] Sgoettschkes: oh, ok, the docs show how to run chef-client with knife ssh: http://docs.opscode.com/knife_ssh.html
[2013-03-20 11:02:26 -0400] Sgoettschkes: that's nice and actually almost what I was looking for
[2013-03-20 11:02:34 -0400] Sgoettschkes: The query makes it very nice to update a bunch of nodes
[2013-03-20 11:07:36 -0400] mikebb: hello, new here, wondered if there was anyone about to clarify something I'm clearly misunderstanding
[2013-03-20 11:14:12 -0400] st0ne2thedge: mikebb: depends ^^
[2013-03-20 11:15:36 -0400] mikebb: st0ne2thedge: can I try you?
[2013-03-20 11:16:47 -0400] mikebb: I'm tyring to bootstrap an ec2 box on a private subnet using knide ev2 server create and get logged in okay, but get 401 auth errors
[2013-03-20 11:17:04 -0400] mikebb: all the certs match up
[2013-03-20 11:17:44 -0400] mikebb: I was assuming my workstation sent the validation cert to the new box, which then used it to authenticate against the server
[2013-03-20 11:18:09 -0400] mikebb: therefore if the workstation has the same cert as the server, we're good to go?
[2013-03-20 11:18:43 -0400] mikebb: I must be misunderstanding that step
[2013-03-20 11:18:53 -0400] mikebb: any idea if this is the actually the process?
[2013-03-20 11:19:58 -0400] mikebb: I'm using a canonical ubuntu image, and can't see an "old" validation.pem on there which could be confusing the issue
[2013-03-20 11:30:12 -0400] st0ne2thedge: mikebb: if i understand correctly you are having a ssh problem due to the keys you are using?
[2013-03-20 11:30:28 -0400] st0ne2thedge: if so start out by debugging your ssh connection using the verbose flag
[2013-03-20 11:30:43 -0400] st0ne2thedge: bootstrap will use ssh to operate
[2013-03-20 11:34:51 -0400] mikebb: thanks st0ne2thedge -
[2013-03-20 11:38:02 -0400] st0ne2thedge: Anyone here have a nice cookbook testing framework that takes the results of other tests and formats them into...lets say html page perhaps? ^^
[2013-03-20 11:43:29 -0400] zts: mikebb: you could get auth errors at various points of the process - but yes, if you are using bootstrap / ec2 server create, it will copy the validation.pem from your workstation to the server being bootstrapped, and chef-client should use that to register a new client
[2013-03-20 11:44:23 -0400] zts: mikebb: reasons it could fail are that you have the wrong validation.pem, that a client already exists with the same name, that the instance being bootstrapped has the time set wrong, and some other things
[2013-03-20 11:46:28 -0400] mikebb: zts: thanks very much, as far as existing client issue, presuambly knife client list should tell me if that is the issue?
[2013-03-20 11:49:31 -0400] zts: mikebb: that'll certainly give you a hint - although to be honest, it's somewhat unlikely if you're using the ec2-generated hostnames on your instances  (the default nodename is the FQDN of your machine)
[2013-03-20 11:50:03 -0400] zts: mikebb: the chef-client output will usually have some more information that hints at where things are going wrong.  You could try running chef-client by hand, and putting that output into a gist/pastebin to share in here
[2013-03-20 11:58:19 -0400] Sgoettschkes: Is there a way to force knife ssh to use the nodes ip adress instead of the hostname?
[2013-03-20 12:01:51 -0400] zts: Sgoettschkes: yeah, you'll want to use the -a option.  "-a ipaddress" will usually work
[2013-03-20 12:03:00 -0400] Sgoettschkes: but only if QUERY matches one node?
[2013-03-20 12:03:16 -0400] mikebb: thanks loads zts, all I see is the standard 401, have pasted here http://pastebin.com/eJbbtxxA
[2013-03-20 12:03:19 -0400] Sgoettschkes: my problem is that the fqdn is set to the hostname but our system usually uses IPs
[2013-03-20 12:03:38 -0400] Sgoettschkes: so I'd either need knife ssh to only use ip or to set the fqdn to the ip
[2013-03-20 12:14:12 -0400] zts: Sgoettschkes: sure, you can do something like:  knife ssh "fqdn:foo.bar.baz" -a ipaddress
[2013-03-20 12:14:46 -0400] Sgoettschkes: zts: That would be possible
[2013-03-20 12:15:05 -0400] Sgoettschkes: zts: But if I want to execute a ssh command on all servers of role something
[2013-03-20 12:15:28 -0400] zts: mikebb: yeah, looks like it's not happy with your validation.pem.  Can you confirm that /etc/chef/validation.pem is identical on the node you're bootstrapping, and on chef.builds.xxxxxxxxxxxxxx.co.uk ?
[2013-03-20 12:15:42 -0400] zts: Sgoettschkes: in that case, knife ssh "role:rolename" -a ipaddress
[2013-03-20 12:16:13 -0400] GreatSUN: Hey guys
[2013-03-20 12:16:20 -0400] GreatSUN: in Chef 10.12
[2013-03-20 12:16:23 -0400] zts: Sgoettschkes: the idea is that you have a search query that returns a set of nodes, and then select one attribute (-a ipaddress) as the thing to try to connect to.  It will then ssh to that
[2013-03-20 12:16:23 -0400] Sgoettschkes: zts: Oh sure, now I get it. I thought I have to replace the ipaddress with one specific address
[2013-03-20 12:16:36 -0400] Sgoettschkes: but reading the docs its clear now
[2013-03-20 12:16:36 -0400] zts: Sgoettschkes: oh, sorry!  Yeah, that was ambiguous :)
[2013-03-20 12:16:40 -0400] GreatSUN: if I set something in a databag within one recipe in a cookbook
[2013-03-20 12:16:51 -0400] Sgoettschkes: actually I'm reading the docs right now but I somehow misunderstood it
[2013-03-20 12:16:55 -0400] GreatSUN: will it be immediately available within another cookbook/recipe?
[2013-03-20 12:17:34 -0400] zts: GreatSUN: if you're retrieving the data bag item by name, I believe that will be immediately available.  If you're retrieving it via search, there might be a delay before it becomes available
[2013-03-20 12:18:08 -0400] GreatSUN: zts: nope, by name and creating it within a recipe, too
[2013-03-20 12:18:14 -0400] GreatSUN: zts: thanks for information :-)
[2013-03-20 12:18:33 -0400] GreatSUN: zts: btw. is it possible to access databags within libraries?
[2013-03-20 12:18:51 -0400] gokr: Hey ho. Is it correct that currently one do not install a chef server using recipes?
[2013-03-20 12:19:21 -0400] Sgoettschkes: zts: This is working, thank you
[2013-03-20 12:19:26 -0400] GreatSUN: iirc it is the same as in recipe
[2013-03-20 12:19:56 -0400] zts: GreatSUN: mm I imagine it's possible, but I don't think it's easy.  The way that I think about it, is that libraries should (in theory) work outside Chef - if you need something chef specific inside a library method, you should pass it in from your recipe
[2013-03-20 12:20:06 -0400] gokr: I have been using the "chef-server::rubygems-install" but... for it's not the Way for 11 or?
[2013-03-20 12:20:37 -0400] GreatSUN: zts: within libs you also have access to node attributes
[2013-03-20 12:20:55 -0400] GreatSUN: what you are talking about sounds more like lwrp to me
[2013-03-20 12:21:15 -0400] zts: GreatSUN: LWRPs definitely won't work outside Chef :)
[2013-03-20 12:21:38 -0400] GreatSUN: zts: ok, sure, but they work in their own environment
[2013-03-20 12:21:49 -0400] GreatSUN: not having access to node attributes or such
[2013-03-20 12:22:00 -0400] GreatSUN: that was what I was thinking about
[2013-03-20 12:22:29 -0400] zts: gokr: yeah, that's changed for 11 - I thought I heard that cookbook had been updated, but it won't be the rubygems-install recipe you want any more
[2013-03-20 12:22:46 -0400] gokr: Right, I am just reading now and... oh, so 11 is all in Erlang?
[2013-03-20 12:22:55 -0400] gokr: Then I guess "gems" are quite non interesting :)
[2013-03-20 12:23:14 -0400] zts: mostly, yeah - the webui is still Ruby, but I think everything else is Erlang
[2013-03-20 12:23:16 -0400] gokr: Hmmm, I have been "out of the loop" for a little while here obviously.
[2013-03-20 12:23:17 -0400] zts: indeed :)
[2013-03-20 12:23:48 -0400] mikebb: zts: thanks, yes - the validation.pem in /et/chef on the node I'm trying to bootstrap is identical to the validation.pem in /etc/chef on the server - BTW -  if I try and boostrap manually using knife bootstrap {node-fqdn} I get a permissions error on the cert (cant read it) and need to sudo the knife command- could that be related? Otherwise I'm wondering if I'm getting a connectivity error because of the provate subnet, but dis
[2013-03-20 12:24:04 -0400] gokr: But 11 is fine otherwise? I mean, is it a huge difference compared to the old server? Or reasonably backwards compat?
[2013-03-20 12:24:12 -0400] zts: GreatSUN: LWRPs most certainly do have access to the node object
[2013-03-20 12:24:50 -0400] zts: GreatSUN: well, lightweight providers do anyway.
[2013-03-20 12:24:57 -0400] GreatSUN: zts: next time I try myself before listening to others
[2013-03-20 12:25:34 -0400] GreatSUN: zts: so it should be easy to watch the node attributes from an lwrp
[2013-03-20 12:25:59 -0400] zts: GreatSUN: there are some tricks to be aware of, concerning what order things are loaded - but when the actions in the provider code runs, the node object should be available
[2013-03-20 12:26:06 -0400] GreatSUN: cause within the library changes look like they are not there for the next run
[2013-03-20 12:26:44 -0400] zts: gokr: I've only started playing with it recently, and haven't gone too deeply into the server side.  I think it's still a bit rough around the edges, docs are somewhat lacking, etc
[2013-03-20 12:27:14 -0400] GreatSUN: zts: the thing what I am worrying about atm is that I have to implement configuration changes based on some node attributes set and set other node attributes according to the source attributes
[2013-03-20 12:27:18 -0400] gokr: zts: Ok, then I should probably try to... lock down to 10. Not sure why my build here jumps to 11...
[2013-03-20 12:27:30 -0400] GreatSUN: and then in another run I have dependencies to these attributes
[2013-03-20 12:27:33 -0400] zts: gokr: there were some early problems with running things on nonstandard ports (or something of that nature), but I'm given to understand that was fixed in the latest release
[2013-03-20 12:28:08 -0400] GreatSUN: but if I can't see them, I can only use defaults and then the set attributes with the defaults get into an error
[2013-03-20 12:28:28 -0400] GreatSUN: so I rebuild everything to an lwrp now and it should work out :-)
[2013-03-20 12:28:45 -0400] zts: GreatSUN: would you be able to gist/pastebin some code that shows what you're doing / what the problem is?  I don't quite understand...
[2013-03-20 12:29:30 -0400] GreatSUN: zts: it's a bit too difficult to just paste code somewhere
[2013-03-20 12:29:50 -0400] GreatSUN: zts: a small example
[2013-03-20 12:31:10 -0400] GreatSUN: zts: I have attribute1 set by cookbook1 to value1. in cookbook2 I read attribute1 set by cookbook1 and create attributes 2 and 3 and then in cookbook3 I create other attributes according to the values of attributes 2 and 3
[2013-03-20 12:31:38 -0400] GreatSUN: but all that is variable and can change to other combinations
[2013-03-20 12:31:42 -0400] zts: GreatSUN: to be clear, are you doing this in cookbook attributes files, or in recipes?
[2013-03-20 12:31:48 -0400] GreatSUN: but the main thing is always the same
[2013-03-20 12:32:25 -0400] GreatSUN: zts: since chef 10 does not have attributes set when running through attribute  files, I am working on that in recipes
[2013-03-20 12:43:32 -0400] Sgoettschkes: I think I have to bother you all again
[2013-03-20 12:44:00 -0400] Sgoettschkes: How do I get the node name in a recipe?
[2013-03-20 12:44:23 -0400] zts: GreatSUN: from what you describe, I would think that you just need to make sure that your recipe in cookbook2 uses include_recipe "cookbook1:whatever" to make sure it runs first?
[2013-03-20 12:45:11 -0400] mikebb: zts: in case it helps anyone, it definitely ISN'T private subnet related, clearly that part is working fine, as I can't bootstrap a new instance on vanilla EC2 either (rather than the VPC issue I have)
[2013-03-20 12:45:31 -0400] zts: Sgoettschkes: node.name
[2013-03-20 12:45:40 -0400] Sgoettschkes: ok, that's easy
[2013-03-20 12:46:08 -0400] Sgoettschkes: Where would I find this information? I suspect I'm looking in the wrong place
[2013-03-20 12:47:05 -0400] GreatSUN: zts: nope, not really... the order is working nice, but the values of the attribtues set by cookbook1 are not available in cookbook2 in time of library execution
[2013-03-20 12:47:50 -0400] tobingaa: hi guys. just downloaded chef the first time, just to do some experiments. i'm trying to install chef server on centos 6.3, so i installed the rpm and ran the command "chef-server-ctl reconfigure". but after a few seconds at "* execute[/opt/chef-server/embedded/bin/createdb -T template0 -E UTF-8 opscode_chef] action runPassword:" i am prompted for a password? dont know what password it wants from me :/
[2013-03-20 12:49:15 -0400] erthad: hiall
[2013-03-20 12:49:17 -0400] mikebb: tobingaa: in my humble opinion, YMMV on Centos 6.3 - I had no end of issues with chef server on centos - switched to ubuntu, up and running inside 10 mins...
[2013-03-20 12:51:06 -0400] zts: Sgoettschkes: that's a really good question, I'm not sure - I vaguely recall seeing a page that listed some of the common ones, just seeing if I can dig it up
[2013-03-20 12:52:05 -0400] Sgoettschkes: zts: Thanks for your effort. You're a big help :)
[2013-03-20 12:52:49 -0400] zts: GreatSUN: hm, at the time the library is loaded, definitely there will be nothing on the node object.  If you're calling a method from your library in a recipe from cookbook2, I would expect the updates made by the recipe in cookbook1 to be there...
[2013-03-20 12:53:07 -0400] zts: GreatSUN: but I gather you've spent quite a lot of time on this, so I am probably misunderstanding your issue
[2013-03-20 12:53:35 -0400] zts: Sgoettschkes: you're welcome!
[2013-03-20 12:58:27 -0400] erthad: is there an easy way to dump node attributes in json?
[2013-03-20 12:59:43 -0400] erthad: or the way to overload node attributes from json without wiping attributes on chef-server would work for me too
[2013-03-20 13:04:09 -0400] erthad: knife node show -l -F json
[2013-03-20 13:14:17 -0400] GreatSUN: zts: that was what I expected, too, but they haven't been there
[2013-03-20 13:14:40 -0400] GreatSUN: zts: at least not after I moved libs to one cookbook only
[2013-03-20 13:20:45 -0400] nvbasd: oh my, I think I broke our chef cookbooks...
[2013-03-20 13:21:14 -0400] nvbasd: and my chef bootstrap isn't installing chef-client
[2013-03-20 13:22:57 -0400] nvbasd: does anyone have a clue what I may have done to do that sort of thing?
[2013-03-20 13:27:42 -0400] zts: Sgoettschkes: this is the page I was thinking of, but it doesn't actually include node name (as that's not set by ohai) - http://docs.opscode.com/ohai_automatic_attributes.html
[2013-03-20 13:28:07 -0400] zts: Sgoettschkes: other than that, you can explore what data is available using: "knife node show <nodename> -l"
[2013-03-20 13:29:06 -0400] Sgoettschkes: ok, so I can access all attributes that way and just have to look for the name
[2013-03-20 13:29:07 -0400] Sgoettschkes: nice
[2013-03-20 13:32:13 -0400] zts: Sgoettschkes: oh sorry, I might have misunderstood your question - I thought it was, "Where can I find what attributes exist on a node?"
[2013-03-20 13:33:10 -0400] Sgoettschkes: yeah, that way my question and your answer was exactly what I was looking for :)
[2013-03-20 13:33:22 -0400] Sgoettschkes: thank you
[2013-03-20 13:33:34 -0400] st0ne2thedge: Anyone here have a nice cookbook testing framework that takes the results of other tests and formats them into...lets say html page perhaps? ^^
[2013-03-20 13:34:28 -0400] alex_____: is it possible to edit the path variable?
[2013-03-20 13:36:14 -0400] s2r2: Sorry to be a nuisance, but does "strategy :java_local_file" with application_java actually work for someone?
[2013-03-20 13:36:30 -0400] zts: Sgoettschkes: no problem :)
[2013-03-20 13:36:43 -0400] zts: alex_____: which one, in particular?
[2013-03-20 13:38:12 -0400] alex_____: JAVA_HOME
[2013-03-20 13:38:43 -0400] alex_____: i want to add the var JAVA_HOME and include it in PATH
[2013-03-20 13:38:46 -0400] alex_____: like:
[2013-03-20 13:39:01 -0400] alex_____: -bash-3.00# export JAVA_HOME=/opt/java
[2013-03-20 13:39:01 -0400] alex_____: -bash-3.00# export PATH=$JAVA_HOME/bin:$PATH
[2013-03-20 13:39:56 -0400] KenR: Hi everyone. I want to add a handler to a node in client.rb so it notify us if it fails convergence. But, I can't modify the chef-client cookbook because I don't want to change every node in our company. Can I override the chef-client cookbook for just my groups nodes somehow?
[2013-03-20 13:39:58 -0400] s2r2: s2r2: it fails for the source is below a symlink
[2013-03-20 13:40:09 -0400] alex_____: you know what i mean zts?
[2013-03-20 13:40:48 -0400] makerbreakr: ya, thats a great question KenR, it seems like there should be an easy way to be notified about a failed chef-client run
[2013-03-20 13:40:54 -0400] zts: alex_____: ah yes, I think that kind of depends on what sort of system you are on, as different linux distributions (and different operating systems) solve that problem differently
[2013-03-20 13:41:11 -0400] alex_____: only solaris
[2013-03-20 13:41:19 -0400] alex_____: and that commands works
[2013-03-20 13:41:22 -0400] alex_____: but
[2013-03-20 13:41:26 -0400] alex_____: not in chef
[2013-03-20 13:41:27 -0400] alex_____: :P
[2013-03-20 13:41:45 -0400] alex_____: [2013-03-20T14:30:51+01:00] FATAL: Errno::ENOENT: ruby_block[install_java] (bos::java line 74) had an error: Errno::ENOENT: No such file or directory -  export JAVA_HOME=/opt/java
[2013-03-20 13:42:23 -0400] alex_____: you see zts?
[2013-03-20 13:42:23 -0400] zts: alex_____: yeah, that's not a ruby command :)  But where do you need the change to be made?  Only for chef-client, for things that chef-client starts, or for other things on the system?
[2013-03-20 13:42:42 -0400] alex_____: other things
[2013-03-20 13:42:50 -0400] alex_____: i am currently installing java
[2013-03-20 13:43:04 -0400] alex_____: and need to start glassfish
[2013-03-20 13:43:18 -0400] zts: KenR: if you wanted to use a different template just for one machine, you could use File Specificity - http://docs.opscode.com/essentials_cookbook_files_specificity.html
[2013-03-20 13:43:22 -0400] alex_____: so i really need to have it :P
[2013-03-20 13:43:38 -0400] alex_____: i use : %Q[ export JAVA_HOME=#{node['java']['home']}java ]
[2013-03-20 13:43:41 -0400] zts: KenR: for a group of hosts, you'd need to change the recipe (or the template) to just add those lines for some hosts
[2013-03-20 13:44:33 -0400] zts: alex_____: it might be better to put that into your glassfish startup script?  Otherwise, you won't be able to start glassfish outside of Chef (if you rely on Chef to set the right environment first)
[2013-03-20 13:45:20 -0400] alex_____: uh after that one i want to set %Q[ export PATH=$JAVA_HOME/bin:$PATH ]
[2013-03-20 13:45:31 -0400] alex_____: which would stay right?
[2013-03-20 13:45:37 -0400] GreatSUN: zts: if I want to use a resource from another cookbook... is that possible? if yes, how?
[2013-03-20 13:45:49 -0400] alex_____: ccokbook
[2013-03-20 13:45:52 -0400] GreatSUN: iirc it should be possible
[2013-03-20 13:46:08 -0400] alex_____: template has a method cookbook
[2013-03-20 13:46:09 -0400] GreatSUN: -> cookbookname_resource
[2013-03-20 13:46:23 -0400] alex_____: o yes
[2013-03-20 13:46:24 -0400] zts: alex_____: otherwise, if you are starting a process with (eg) execute resource, you can pass a set of environment variables to set: http://docs.opscode.com/chef/resources.html#execute
[2013-03-20 13:46:35 -0400] alex_____: with a dependency GreatSUN
[2013-03-20 13:46:44 -0400] zts: GreatSUN: yeah, cookbookname_resourcename
[2013-03-20 13:46:55 -0400] GreatSUN: alex_____: the cookbook I am calling this from is dependant already
[2013-03-20 13:47:03 -0400] alex_____: zts so there is no way to alter the path
[2013-03-20 13:47:18 -0400] alex_____: GreatSUN than it should work
[2013-03-20 13:47:51 -0400] GreatSUN: any idea why I get error: NameError: Cannot find a resource for action_update on redhat version 5.7
[2013-03-20 13:47:51 -0400] GreatSUN: ?
[2013-03-20 13:48:01 -0400] KenR: zts: thanks, I'll see if I can get the file specificity to work for our nodes.
[2013-03-20 13:48:08 -0400] alex_____: action is your cookbook?
[2013-03-20 13:48:20 -0400] alex_____: and update is your resource?
[2013-03-20 13:48:29 -0400] GreatSUN: nope
[2013-03-20 13:48:38 -0400] GreatSUN: cookbookname_resource
[2013-03-20 13:48:44 -0400] GreatSUN: action :update
[2013-03-20 13:48:50 -0400] zts: alex_____: I guess what I'm saying is that you are asking the wrong question.  You are talking about setting environment variables, and there's different places you could set them, and different ways to do it
[2013-03-20 13:48:50 -0400] alex_____: o oke
[2013-03-20 13:49:27 -0400] zts: alex_____: one way to affect chef-client only, a different way for affecting programs in execute/bash/script resources, and a completely other way if you want to affect the settings for users logging into the system
[2013-03-20 13:49:34 -0400] zts: alex_____: I'm not quite sure which one you need...
[2013-03-20 13:49:36 -0400] alex_____: zts i want them inside my path like when i type $PATH on linux
[2013-03-20 13:50:19 -0400] alex_____: GreatSun that al you have?
[2013-03-20 13:50:25 -0400] alex_____: no more information?>
[2013-03-20 13:50:27 -0400] zts: alex_____: in that case, think about how you would solve it if you weren't using chef, but wanted it to be automatic.  Would you put it in /home/alex/.bashrc or something like that?
[2013-03-20 13:50:49 -0400] GreatSUN: alex_____: what do you mean?
[2013-03-20 13:50:51 -0400] GreatSUN: there is more
[2013-03-20 13:51:06 -0400] GreatSUN: didn't want to open nopaste ;-)
[2013-03-20 13:51:16 -0400] alex_____: more error information like few lines up or down
[2013-03-20 13:51:27 -0400] GreatSUN: alex_____: and calling from inside the same cookbook works
[2013-03-20 13:52:09 -0400] alex_____: zts i want to make java available just like /usr/bin
[2013-03-20 13:52:47 -0400] alex_____: GreatSUN and you depend that cookbook in your metadata?
[2013-03-20 13:53:06 -0400] GreatSUN: yeah
[2013-03-20 13:53:16 -0400] GreatSUN: with depends <cookbookname>
[2013-03-20 13:53:22 -0400] alex_____: let me ss
[2013-03-20 13:53:43 -0400] GreatSUN: alex_____: what all would you like me to paste to nopaste
[2013-03-20 13:54:19 -0400] alex_____: try include a recipe
[2013-03-20 13:54:20 -0400] KenR: hmm, file specificity is going to be kind of ugly, we have a lot of nodes that we'd want to configure, it's just that we have lots and lots of nodes in general in the organziation
[2013-03-20 13:54:25 -0400] alex_____: a empty one
[2013-03-20 13:54:51 -0400] KenR: I was really hoping there was a way to put into a role that instead of this cookbook, use this other one.
[2013-03-20 13:56:35 -0400] KenR: also, would the file specificity work for a template? because I think that's what we need to change.
[2013-03-20 13:56:51 -0400] siezer: KenR what are you trying to do? the backscroll is giving me a headache with the the "______"s all over the place
[2013-03-20 14:02:31 -0400] mikebb: doer anyone know a why of finding out which validation pem the chef server is ACTUALLY using? Is it in memory or read off disk?
[2013-03-20 14:05:56 -0400] alex_____: zts you know what i try to do?
[2013-03-20 14:06:33 -0400] KenR: siezer: I want to change the client.rb on our nodes to have an exception handler to notify us of convergence failures. I can't just edit the chef-client cookbook because everyone in our organization is using it.
[2013-03-20 14:06:51 -0400] KenR: (and our group doesnt' want emails for everyone's convergence failures anyway)
[2013-03-20 14:10:49 -0400] ehershey: [18:39] < bluekelp> ehershey: greenmoss: if you're just putting together things the way your org likes, i'd recommend namaspacing with org-name
[2013-03-20 14:10:54 -0400] ehershey: that wasn't really meant for me was it?
[2013-03-20 14:20:46 -0400] alex_____: .
[2013-03-20 14:20:50 -0400] kesor: just opensourced a rails application cookbook, maybe someone will find it useful -- github.com/devops-israel/chef-rails_application it basically allows to do everything that opscode/application_ruby provides but with attributes instead of hardcoding.
[2013-03-20 14:25:13 -0400] kesor: also will gladly hear any reviews of opinions about the approach we took in that cookbook.
[2013-03-20 14:31:10 -0400] mikebb: dumb question - if my server.rb on chef server is missing validation_key and validation_client_name params, is this an issue?
[2013-03-20 14:36:19 -0400] juliancdunn: mikebb: that's fine
[2013-03-20 14:37:37 -0400] mikebb: thanks juliancdunn, racking my brains about why I can't bootstrap a node, tailing my server logs just tells me merb : chef-server (api) : worker (port 4000) ~ Failed to authenticate. Ensure that your client key is valid. - (Merb::ControllerExceptions::Unauthorized)
[2013-03-20 14:38:25 -0400] mikebb: juliancdunn: identical certs (at least the ones in /etc/chef/validation.pem on node and server are)
[2013-03-20 14:41:27 -0400] pxg: I have a question, which I've not been able to find an answer to elsewhere online. When I bootstrap a node is will Chef always compile all cookbooks? It compiles ones that I don't require for the node I'm provisioning.
[2013-03-20 14:44:09 -0400] maruq: pxg: If you're running in chef-client it should only pull down the ones it needs to fulfil your run list.
[2013-03-20 14:44:48 -0400] maruq: In chef-solo you pass it the cookbooks anyway, so I'm not entirely sure. But I believe it only pulls in what you need
[2013-03-20 14:45:30 -0400] TotalEvil: hi2all
[2013-03-20 14:45:49 -0400] TotalEvil: anyone working with SoftLayer api?
[2013-03-20 14:46:14 -0400] pxg: I'm using knife ec2 with chef server to provision a box. It appears to be compiling Cookbooks I don't need. Problem is one is causing an error.
[2013-03-20 14:46:33 -0400] pxg: As I don't need it I'm tempted to remove the cookbook from the server, provision the box then upload it again.
[2013-03-20 14:48:39 -0400] kesor: pxg: sounds like a good plan.
[2013-03-20 14:49:39 -0400] alex_____: humm is there anyone who can help me place and use path settings
[2013-03-20 14:54:33 -0400] chef171: hello
[2013-03-20 14:54:41 -0400] TotalEvil: hey
[2013-03-20 14:56:29 -0400] chef171: any idea about system requirement for chef server i mean hard disk and ram
[2013-03-20 14:57:43 -0400] maruq: just out of interest has anyone played with Test Kitchen & Vagrant 1.1's providers?
[2013-03-20 14:58:33 -0400] maruq: thinking of doing more with the testing, would be awesome to be able to test real ec2 stuff
[2013-03-20 15:01:36 -0400] spox: maruq: i have setup testing with the < 1.0 t-k on cloud nodes using spiceweasel configs
[2013-03-20 15:02:50 -0400] BryanWB: i am trying to just grab the amount of total ram available using ohai, https://gist.github.com/bryanwb/5205366
[2013-03-20 15:03:05 -0400] BryanWB: how can i just use the memory plugin rather than all of them?
[2013-03-20 15:03:11 -0400] maruq: spox: hmm interesting. I haven't played too much with either, how are you tying them together?
[2013-03-20 15:04:09 -0400] TotalEvil: looking for experts who has expirience with softlayer api) and chef
[2013-03-20 15:04:57 -0400] spox: maruq: i have configs defined for the "thing" i want, be it a db cluster, or an app stack, what ever. run list just provides minitest-handler + recipes to test. in some places i used berkshelf to pull in test cookbooks from the cookbook to get it out.
[2013-03-20 15:05:36 -0400] spox: also, i use a scratch chef server for this :)
[2013-03-20 15:05:59 -0400] spox: but it makes it nice since execution will load everything, then build nodes. deletion wipes everything, kills nodes
[2013-03-20 15:12:12 -0400] rteabeault: whois @jtimberman
[2013-03-20 15:12:19 -0400] rteabeault: doh
[2013-03-20 15:12:26 -0400] BryanWB: the king of all sysadmins :)
[2013-03-20 15:12:31 -0400] eliklein: haha
[2013-03-20 15:13:03 -0400] BryanWB: eliklein, i am working on a parser for jvm commandline options
[2013-03-20 15:13:17 -0400] BryanWB: eliklein, does that interest you? i will need some testing helpl
[2013-03-20 15:13:17 -0400] eliklein: hm?
[2013-03-20 15:13:33 -0400] eliklein: perhaps :)
[2013-03-20 15:13:50 -0400] eliklein: explain the use case?
[2013-03-20 15:14:15 -0400] BryanWB: eliklein, for use in a cookbook https://github.com/bryanwb/jvmargs   to sanitize cmdline args
[2013-03-20 15:15:22 -0400] maruq: spox: ah ok cool. will have to play a bit more when I get chance ;)
[2013-03-20 15:15:23 -0400] BryanWB: does ohai consistently report RAM in kB ?
[2013-03-20 15:15:36 -0400] eliklein: think so
[2013-03-20 15:16:38 -0400] mikebb: holy sh*t, I'm going nuts, are there any other obvious reasons why you get  a 401 not authorized when bootstrapping a node and the certs are fine (i've diff'd them)
[2013-03-20 15:17:01 -0400] NetworkString: mikebb, time?
[2013-03-20 15:17:02 -0400] eliklein: BryanWB: i'd be interested in helping test that
[2013-03-20 15:17:08 -0400] rteabeault: But it seems that in my case for an array the values are not merged but the one with higher precedence replaces the one with lower.  They are not merged.
[2013-03-20 15:17:17 -0400] BryanWB: eliklein, kewl, i'll ping u in a few days when it actually works
[2013-03-20 15:17:22 -0400] eliklein: BryanWB: ok
[2013-03-20 15:17:45 -0400] BryanWB: i intend to use it in every java-related app cookbook i touch
[2013-03-20 15:17:47 -0400] mikebb: NetworkString: okay? in terms of the client being ahead?
[2013-03-20 15:18:19 -0400] NetworkString: mikebb, either which way. Time-drift will screw mixlib auth
[2013-03-20 15:18:53 -0400] mikebb: thanks NetworkString, will check that, nice one
[2013-03-20 15:18:59 -0400] behemphi: @mikebb does a client with the name you are trying to create already exist?
[2013-03-20 15:19:21 -0400] TotalEvil: anyone working with softlayer api?
[2013-03-20 15:19:26 -0400] mikebb: behemphi: not that I can tell from running knife node list / knife client list?
[2013-03-20 15:19:48 -0400] behemphi: @mikebb cool, that one catches me out sometimes
[2013-03-20 15:20:07 -0400] eliklein: did anyone see rteabeault's original question?
[2013-03-20 15:20:30 -0400] mikebb: thanks behemphi, I will double check them all again just in case
[2013-03-20 15:23:53 -0400] BryanWB: behemphi, coming to chefconf?
[2013-03-20 15:24:16 -0400] behemphi: Defn @BryanWB  looking forward to it!
[2013-03-20 15:24:17 -0400] behemphi: you?
[2013-03-20 15:24:24 -0400] rteabeault: I was told my last question did not come through so I am going to ask it again.
[2013-03-20 15:24:28 -0400] BryanWB: behemphi, awesome! y, me too
[2013-03-20 15:24:36 -0400] rteabeault: The docs state the following "When an attribute is of the same type of data, such as a hash or an array, the contents are merged. This is true even with different levels of precedence, such as default and override attributes."
[2013-03-20 15:24:50 -0400] rteabeault: However I am not seeing this behavior for arrays
[2013-03-20 15:25:35 -0400] rteabeault: If the precedence is the same they are merged but if the precedence is different the resulting value is that if the higher precedence.
[2013-03-20 15:25:55 -0400] rteabeault: So are the docs wrong or is this a bug?
[2013-03-20 15:25:58 -0400] behemphi: Looking forward to seeing you again @BryanWB
[2013-03-20 15:26:10 -0400] BryanWB: behemphi, likewise, mos def
[2013-03-20 15:44:09 -0400] rays: I have include_recipe "apt" but I get "Cannot find a resource for apt_repository[...]" when adding the dotdeb recipe
[2013-03-20 15:44:47 -0400] zts: rays: does that cookbook  have "depends 'apt'" in its metadata.rb ?
[2013-03-20 15:45:38 -0400] rays: nope, can I add it to the parent metadata.rb?
[2013-03-20 15:46:55 -0400] rays: zts: thanks, added it to my metadata.rb and its working now
[2013-03-20 15:48:07 -0400] zts: rays: no problem, it just needs to be on your run list, or listed as 'depends' from some cookbook that is on your run list
[2013-03-20 15:48:24 -0400] zts: rays: either one of those things will make sure that chef loads the 'apt' cookbook, and the resources it defines (like apt_repository)
[2013-03-20 15:57:33 -0400] Guest28326: Whats going on
[2013-03-20 15:58:23 -0400] Guest28326: Whats up with this erchef thing its not working--- having the same issue as this other person .... pemme get the ticket link... fast log
[2013-03-20 16:01:22 -0400] Guest28326: I did some googling and searching and this is like the first thing that came up http://tickets.opscode.com/browse/CHEF-4019?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab
[2013-03-20 16:01:50 -0400] Guest28326: I cant figure what to do but I hear ppl use erchef soooo
[2013-03-20 16:03:33 -0400] solarce: jtimberman is a bot who turns veggies into chef cookbooks
[2013-03-20 16:06:19 -0400] Guest28326: Hey ssd im having an issue with erchef that seems like it might be trivial but when I google and search I find tick
[2013-03-20 16:06:26 -0400] Guest28326: http://tickets.opscode.com/browse/CHEF-4019?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab
[2013-03-20 16:06:46 -0400] Guest28326: Of person having same problem
[2013-03-20 16:07:03 -0400] Guest28326: Does that mean nobody can use erchef ?
[2013-03-20 16:07:17 -0400] Guest28326: Im confuzled
[2013-03-20 16:08:49 -0400] Guest28326: Herro ? Dude this place is so dead
[2013-03-20 16:09:03 -0400] laurent\: sometimes it is
[2013-03-20 16:09:29 -0400] laurent\: i'm not running erchef yet
[2013-03-20 16:09:56 -0400] gokr: is there any info somewhere on compatibility etc between chef server 10 and 11?
[2013-03-20 16:10:17 -0400] Guest28326: Gokr nup
[2013-03-20 16:10:24 -0400] gokr: I am just messing with installation scripts for chef-server and... well, I am staying with 10 but didn't find much info on 11.
[2013-03-20 16:10:31 -0400] Guest28326: I had to ask to figure it out
[2013-03-20 16:10:43 -0400] Guest28326: But client 11 wont work with server 10
[2013-03-20 16:10:54 -0400] gokr: Oh?
[2013-03-20 16:10:56 -0400] Guest28326: Server 11 will work with client 10 I guess though
[2013-03-20 16:11:15 -0400] Guest28326: But I can NOT even GET server 11
[2013-03-20 16:11:30 -0400] Guest28326: And I found someone having the same prob as me http://tickets.opscode.com/browse/CHEF-4019?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab
[2013-03-20 16:11:34 -0400] Guest28326: So I donno
[2013-03-20 16:11:41 -0400] nkrinner: there are breaking changes from chef 10 to chef 11, there is a page in the wiki about that
[2013-03-20 16:12:28 -0400] Guest28326: Link?
[2013-03-20 16:12:32 -0400] gokr: So if I am sticking with chef-server 10 I better stick with client 10 also?
[2013-03-20 16:13:10 -0400] Guest28326: Yes
[2013-03-20 16:13:14 -0400] spox: Guest28326: are you building erchef yourself? you can just install from a package
[2013-03-20 16:13:51 -0400] Guest28326: Yeah packages no good
[2013-03-20 16:14:20 -0400] Guest28326: I lfs user
[2013-03-20 16:16:03 -0400] nkrinner: Guest28326, http://docs.opscode.com/breaking_changes_chef_11.html
[2013-03-20 16:16:27 -0400] Guest28326: O thank u
[2013-03-20 16:18:09 -0400] Guest28326: Spox is this a better question for #erlounge
[2013-03-20 16:20:50 -0400] solarce: Guest28326: the brave, the few, the lfs users
[2013-03-20 16:22:47 -0400] spox: Guest28326: i haven't seen the behavior on my installs, so i unfortunately don't have much to offer on the issue :/
[2013-03-20 16:23:33 -0400] Guest28326: Thats ... scary
[2013-03-20 16:30:04 -0400] maruq: trying to debug some inherited cookbooks If my cookbook depends on & calls the default of another, the libraries of the other should be available to me, correct?
[2013-03-20 16:30:46 -0400] maruq: I have depends "inherited_cookbook" in my metadata & I call inherited_cookbook::default in my default
[2013-03-20 16:31:19 -0400] maruq: it's the inherited_cookbook that calls the library, but doesn't seem to find it's own resource in that library
[2013-03-20 16:31:45 -0400] maruq: my understanding (from the docs) is that libraries are one of the first things interpretted
[2013-03-20 16:32:01 -0400] spox: could be a bug in the dependency cookbook?
[2013-03-20 16:32:24 -0400] maruq: spox: I'm pretty sure it is, but not really sure why it wouldn't be loaded
[2013-03-20 16:32:50 -0400] maruq: via chef-solo 10.22.0
[2013-03-20 16:33:11 -0400] maruq: er, I lied. 11.4.0
[2013-03-20 16:33:56 -0400] spox: you might try running the cookbook by itself. see if it fails. it may just be doing something wrong
[2013-03-20 16:35:24 -0400] geekbri: maruq: libraries are indeed the first thing loaded when a cookbook is loaded
[2013-03-20 16:36:22 -0400] maruq: geekbri: thanks. yeah, now trying to figure out what the awesome wrapper script is doing, in-order to debug with why-run / shef
[2013-03-20 16:39:07 -0400] paigeat_: ugh
[2013-03-20 16:39:34 -0400] paigeat_: I have a long way to go
[2013-03-20 16:39:43 -0400] paigeat_: like learning chef server all over again
[2013-03-20 16:40:25 -0400] paigeat_: i think I'll just ask ppl in erlounge since nobody here seems to know xD
[2013-03-20 16:43:08 -0400] paigeat_: ugghghhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh
[2013-03-20 16:44:13 -0400] skarufue: Hello. I am on the newest omnibus chef-server / chef client. all of a sudden i cannot upload cookbooks anymore. i get these in the bookshelf log: 2013-03-20_16:40:20.32783 could not start kernel pid (application_controller) (error in config file "/opt/chef-server/embedded/service/bookshelf/etc/app.config" (none): configuration file not found)
[2013-03-20 16:44:20 -0400] skarufue: i did not delete that config
[2013-03-20 16:44:31 -0400] paigeat_: skarufue: are you talking about erchef 11?
[2013-03-20 16:44:37 -0400] skarufue: yes
[2013-03-20 16:45:04 -0400] paigeat_: how did you even get it to run
[2013-03-20 16:45:18 -0400] skarufue: omnibus
[2013-03-20 16:45:23 -0400] paigeat_: ohhh
[2013-03-20 16:45:25 -0400] paigeat_: yeah
[2013-03-20 16:45:32 -0400] paigeat_: rly
[2013-03-20 16:45:45 -0400] skarufue: ya rly
[2013-03-20 16:45:46 -0400] paigeat_: I dont want to use that
[2013-03-20 16:45:58 -0400] skarufue: ther is no other way
[2013-03-20 16:46:02 -0400] paigeat_: like last time I remember there was some talk about it being deprecated
[2013-03-20 16:46:05 -0400] skarufue: i tried the other ways
[2013-03-20 16:46:11 -0400] skarufue: it is all horribad
[2013-03-20 16:46:50 -0400] skarufue: it should be. it is everything aboce libc in a huge static shitheap...
[2013-03-20 16:47:15 -0400] zts: paigeat_: eh?  the omnibus installers are definitely not deprecated (they seem to be preferred)
[2013-03-20 16:47:44 -0400] paigeat_: zts I want to git clone and make rel and run it that way
[2013-03-20 16:47:58 -0400] paigeat_: even if I have to use like the release branch or something
[2013-03-20 16:48:45 -0400] skarufue: paigeat_: why?
[2013-03-20 16:48:53 -0400] KarlHungus: paigeat_: you should build omnibus yourself with version overrides and use that package then
[2013-03-20 16:48:58 -0400] paigeat_: because I know sooner or later I'll just have to do it that way anyway just like with chef server 10 and rvm and all that crap I had to figure out so might as well get to the bottom of this now unless you're saying that literally, erlang is so fucking bad that it can't work properly with my libc
[2013-03-20 16:49:07 -0400] zts: paigeat_: you are, of course, free to want whatever you want - my point is that omnibus seems to be the preferred install method for the forseeable future
[2013-03-20 16:49:28 -0400] paigeat_: no no I understand that
[2013-03-20 16:49:34 -0400] paigeat_: and my point is
[2013-03-20 16:49:46 -0400] paigeat_: Im interested in figuring out how this works without training wheels
[2013-03-20 16:49:47 -0400] KarlHungus: paigeat_: its not libc thats at fault. its dynamic linking.
[2013-03-20 16:50:06 -0400] skarufue: paigeat_: erlang is fine
[2013-03-20 16:50:09 -0400] zts: paigeat_: sorry, I guess we are talking past each other - I was responding to your comment that you heard it was going to be deprecated
[2013-03-20 16:50:32 -0400] KarlHungus: and libc isn't built into omnibus ;) just the userland deps like openssl, ruby, etc
[2013-03-20 16:50:47 -0400] zts: paigeat_: I don't have much to offer on putting a server together by hand, unfortunately, as I've just been using the omnibus installer
[2013-03-20 16:50:50 -0400] paigeat_: ohhh haha no sorry I even said that I just remember trying to use it and somebody saying don't do that! build your own gem, install rvm thats the way to go and thats what I did
[2013-03-20 16:50:59 -0400] skarufue: KarlHungus: its every dependency above libc
[2013-03-20 16:51:00 -0400] paigeat_: and it actually worked out better for me
[2013-03-20 16:51:11 -0400] paigeat_: I ended up learning a lot of stuff about chef server that way :)
[2013-03-20 16:51:29 -0400] KarlHungus: regardless, if you want to build your own chef server stuff, you'd be best served by learning omnibus and building it that way
[2013-03-20 16:51:33 -0400] KarlHungus: skarufue: its more than that
[2013-03-20 16:51:46 -0400] KarlHungus: skarufue: you can see the specific os whitelists in the health check script from omnibus-ruby
[2013-03-20 16:51:52 -0400] zts: paigeat_: I'll probably have to do that one day :)  But so far, I've been far more interested in using Chef on the client, rather than how it's put together on the server
[2013-03-20 16:51:54 -0400] paigeat_: KarlHungus: I looked through omnibus's code a little yesterday ...
[2013-03-20 16:52:06 -0400] paigeat_: Im able to build erchef just fine I just can get ./erchef start to work
[2013-03-20 16:52:13 -0400] paigeat_: http://tickets.opscode.com/browse/CHEF-4019?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab
[2013-03-20 16:52:18 -0400] maruq: geekbri: here's the relevant chunks of code / output. not sure why it's not loading https://gist.github.com/markbate/b9145f97f18a35cf3126
[2013-03-20 16:52:27 -0400] paigeat_: its like the erlang equivalent to a segmentation fault without debugging symbols
[2013-03-20 16:52:36 -0400] paigeat_: and no gdb
[2013-03-20 16:53:03 -0400] paigeat_: I asked some people in #erlounge how to debug it but if anybody knows that would be useful
[2013-03-20 16:53:06 -0400] skarufue: so. back to my bookshelf problem: 2013-03-20_16:40:20.32783 could not start kernel pid (application_controller) (error in config file "/opt/chef-server/embedded/service/bookshelf/etc/app.config" (none): configuration file not found)
[2013-03-20 16:53:44 -0400] paigeat_: is that an omnibus issue?
[2013-03-20 16:54:04 -0400] skarufue: how can i generate thic config. know its synatax/options. how did it even get lost
[2013-03-20 16:54:20 -0400] skarufue: paigeat_: yeah one thet just appeared
[2013-03-20 16:54:29 -0400] paigeat_: I mean obviously not but do you get what Im saying now what happens when I have to deal with skarufue's prob and nobody knows because nobody knows erlang
[2013-03-20 16:54:34 -0400] skarufue: paigeat_: worked actually quite well
[2013-03-20 16:55:07 -0400] skarufue: acually bookshelf is written in ruby i think..
[2013-03-20 16:55:14 -0400] paigeat_: it looks like you dont even have your app.config which we had to create one too actually lemme go check something
[2013-03-20 16:56:20 -0400] skarufue: well i naver had to generate that config myself. and i already added some cookbooks
[2013-03-20 16:56:24 -0400] skarufue: so meh.
[2013-03-20 16:56:50 -0400] paigeat_: zts: I just found out she didn't even change any of the values in the app.config that we found yesterday so maybe that has something to do with it
[2013-03-20 16:58:00 -0400] paigeat_: it kinda just occured to me maybe fast_log needs mysql or something and isn't handling the connection error or something
[2013-03-20 16:58:08 -0400] skarufue: can anyone with omnibus paste me their : /opt/chef-server/embedded/service/bookshelf/etc/app.config
[2013-03-20 16:58:31 -0400] maruq: geekbri: yeah, I have no idea why they're doing weird stuff with gems.
[2013-03-20 16:59:23 -0400] paigeat_: ah or it didn't create the log dir
[2013-03-20 16:59:23 -0400] paigeat_: lol
[2013-03-20 17:00:10 -0400] skarufue: or tell me if they are also missing a /var/opt/chef-server/bookshelf/etc directory
[2013-03-20 17:02:38 -0400] w6fu: has anyone upgraded their chef server to v11? If you did, I'm assuming you've built a new one and replaced the v10?
[2013-03-20 17:03:01 -0400] ranjibd: w6fu: yes
[2013-03-20 17:03:50 -0400] paigeat_: read(3, "Node 'erchef@127.0.0.1' not resp"..., 128) = 49
[2013-03-20 17:04:20 -0400] gyre007: anyone know if there is any wall-e cookbook ?
[2013-03-20 17:04:27 -0400] gyre007: ie https://github.com/heroku/WAL-E
[2013-03-20 17:05:26 -0400] zts: gyre007: there wasn't 6 months ago when I needed one :(
[2013-03-20 17:05:46 -0400] gyre007: zts so I assume you wrote your own
[2013-03-20 17:05:48 -0400] paigeat_: http://tickets.opscode.com/browse/CHEF-4019?focusedCommentId=33538&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-33538
[2013-03-20 17:05:55 -0400] gyre007: looks like ill be doing the same then
[2013-03-20 17:05:56 -0400] paigeat_: theres the full strace
[2013-03-20 17:06:11 -0400] gyre007: zts hows walle working out for you ?
[2013-03-20 17:06:22 -0400] gyre007: I'm going to be setting it up
[2013-03-20 17:07:20 -0400] zts: gyre007: Unfortunately, I didn't have the time in that contract to do a good job - ended up packaging the necessary components (using fpm), with a simple recipe for installing those and dropping the required configuration in
[2013-03-20 17:07:55 -0400] gyre007: I see
[2013-03-20 17:08:06 -0400] zts: gyre007: they haven't come looking for me since I finished, so I assume it's still going okay :)  One big problem at the time, though, is that it has a bug if you are using any region apart from us-east
[2013-03-20 17:08:26 -0400] zts: https://github.com/heroku/WAL-E/issues/24 <- that one
[2013-03-20 17:08:33 -0400] gyre007: lemme se
[2013-03-20 17:08:41 -0400] matti: WAL-E :)
[2013-03-20 17:08:43 -0400] matti: Haha
[2013-03-20 17:08:45 -0400] skarufue: paigeat_: you are probably right in your approach. i fixed my problem. but it really bugs me that this config just dissapeared.
[2013-03-20 17:09:48 -0400] paigeat_: skarufue: https://gist.github.com/paigeadele/bc2eab04ce464c2a53d5#file-gistfile1-txt-L346
[2013-03-20 17:09:56 -0400] paigeat_: thats where shit is going sideways and I was right
[2013-03-20 17:10:03 -0400] paigeat_: its due to the fact that they never changed anything in the config
[2013-03-20 17:10:05 -0400] paigeat_: :)
[2013-03-20 17:10:16 -0400] paigeat_: I just kinda assumed they would like
[2013-03-20 17:10:24 -0400] paigeat_: thats what I get for assuming things
[2013-03-20 17:10:49 -0400] gyre007: zts that issue seems to have been resolved ?
[2013-03-20 17:10:52 -0400] paigeat_: ie, rabbitmq, mysql ... all that needs to be setup
[2013-03-20 17:11:13 -0400] paigeat_: skarufue: thats weird your config disappeared :/
[2013-03-20 17:11:28 -0400] paigeat_: maybe your coworker blew it away by accident
[2013-03-20 17:11:29 -0400] paigeat_: lol
[2013-03-20 17:12:23 -0400] skarufue: paigeat_: nah. that could have been only me. someone said uh i heard chef is teh awesome. hey server guy go figure it out.
[2013-03-20 17:12:36 -0400] skarufue: paigeat_: i am still alone on this machine
[2013-03-20 17:17:34 -0400] DJJazzyJosh: Has anyone successfully used the nginx cookbook on a CentOS machine? I keep running into an issue during execution stating "undefined method `[]' for nil:NilClass" at cookbooks/nginx/recipes/ohai_plugin.rb:27:in `from_file'
[2013-03-20 17:17:54 -0400] DJJazzyJosh: same thing for both default execution and ::source recipe
[2013-03-20 17:18:49 -0400] zts: gyre007: yeah, seems like.  Good :)
[2013-03-20 17:19:10 -0400] gyre007: Ill let you knowill be playing about with this tomo..
[2013-03-20 17:21:31 -0400] paigeat_: when is the next chef meetup in seattle
[2013-03-20 17:21:33 -0400] paigeat_: I want to come
[2013-03-20 17:30:17 -0400] paigeat_: can anybody tell me what this is read(3, "-name erchef@127.0.0.1\n", 128) = 23
[2013-03-20 17:32:19 -0400] postwait: paigeat_: is that the output of truss or strace?
[2013-03-20 17:32:58 -0400] paigeat_: strace
[2013-03-20 17:33:16 -0400] postwait: then it is a successful read of 23 bytes from file descriptor 3
[2013-03-20 17:33:55 -0400] paigeat_: *nod* Im more curious about what -name erchef@127.0.0.1 is
[2013-03-20 17:34:09 -0400] paigeat_: read(3, "Node 'erchef@127.0.0.1' not resp"..., 128) = 49
[2013-03-20 17:34:27 -0400] postwait: it's the data that was read from that file descriptor.
[2013-03-20 17:34:50 -0400] paigeat_: yes I realize that it is data read from a file descriptor
[2013-03-20 17:34:57 -0400] paigeat_: what relevance does this data have to erchef though
[2013-03-20 17:34:59 -0400] paigeat_: if any
[2013-03-20 17:35:32 -0400] paigeat_: open("/dev/tty", O_RDWR|O_NONBLOCK)     = 3
[2013-03-20 17:35:50 -0400] paigeat_: wait thats not what I think it is
[2013-03-20 17:35:57 -0400] paigeat_: open("/proc/meminfo", O_RDONLY|O_CLOEXEC) = 3
[2013-03-20 17:35:58 -0400] paigeat_: fstat(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
[2013-03-20 17:36:04 -0400] paigeat_: close(3)
[2013-03-20 17:37:37 -0400] paigeat_: oh its from a bash script
[2013-03-20 17:37:48 -0400] paigeat_: read(255, "if [ -z \"$NAME_ARG\" ]; then\n    "..., 6030) = 5325
[2013-03-20 17:40:33 -0400] paigeat_: write(1, "Node is already running!\n", 25Node is already running!
[2013-03-20 17:40:37 -0400] paigeat_: rly
[2013-03-20 17:49:38 -0400] paigeat_: root@Daedalus:/opt/erchef/rel# erchef/bin/./erchef start
[2013-03-20 17:49:38 -0400] paigeat_: root@Daedalus:/opt/erchef/rel# erchef/bin/./erchef start
[2013-03-20 17:49:38 -0400] paigeat_: Node is already running!
[2013-03-20 17:49:38 -0400] paigeat_: root@Daedalus:/opt/erchef/rel# erchef/bin/./erchef start
[2013-03-20 17:50:44 -0400] paigeat_:         HEART_COMMAND="$RUNNER_BASE_DIR/bin/$SCRIPT start"
[2013-03-20 17:50:47 -0400] paigeat_: I should prob try that
[2013-03-20 17:54:13 -0400] paigeat_:         $ERTS_PATH/run_erl -daemon $PIPE_DIR $RUNNER_LOG_DIR "exec $RUNNER_BASE_DIR/bin/$SCRIPT console $@" 2>&1
[2013-03-20 17:56:27 -0400] paigeat_: /opt/erchef/rel/erchef/erts-5.9.2/bin/run_erl -daemon /tmp//opt/erchef/rel/erchef/ /opt/erchef/rel/erchef/log exec /opt/erchef/rel/erchef/bin/erchef console
[2013-03-20 17:57:19 -0400] paigeat_: root@Daedalus:/opt/erchef/rel/erchef# /opt/erchef/rel/erchef/erts-5.9.2/bin/run_erl /tmp//opt/erchef/rel/erchef/ /opt/erchef/rel/erchef/log exec /opt/erchef/rel/erchef/bin/erchef console
[2013-03-20 17:57:23 -0400] paigeat_: run_erl:615 [3849] Wed Mar 20 10:57:00 2013
[2013-03-20 17:57:25 -0400] paigeat_: Erlang closed the connection.
[2013-03-20 17:57:28 -0400] paigeat_: root@Daedalus:/opt/erchef/rel/erchef#
[2013-03-20 17:57:47 -0400] shanlar: are data bags encrypted even with no secret key?
[2013-03-20 17:57:53 -0400] paigeat_: making some progress here...
[2013-03-20 17:58:04 -0400] paigeat_: guess I'm gonna have to write the doc
[2013-03-20 17:59:22 -0400] shanlar: nm
[2013-03-20 18:02:24 -0400] rava: greetings programs
[2013-03-20 18:02:47 -0400] rava: looking for the suggested way of pruning couchdb's data
[2013-03-20 18:03:13 -0400] rava: i've regular compaction job running, but this couchdb's managed to grow to 55gb
[2013-03-20 18:03:22 -0400] kallistec: paigeat_: cookbooks in omnibus-chef write the app.config for erchef when you run `chef-server-ctl reconfigure` IIRC
[2013-03-20 18:04:19 -0400] kallistec: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/recipes/erchef.rb#L48
[2013-03-20 18:12:29 -0400] skarufue: sorry for this probably stupid question. i am probably googling really badly... how do i make a node check in with chef-server again after the initial knife bootstrap?
[2013-03-20 18:12:51 -0400] rava: skarufue: run the chef-client
[2013-03-20 18:13:32 -0400] paigeat_: kallistec: yaaalp
[2013-03-20 18:14:11 -0400] rava: looking for the suggested way of pruning couchdb's data dir size
[2013-03-20 18:23:14 -0400] skarufue: rava: ok i figured that much. but lets say i update a node definition (i.e. add a recipe) do i then need ssh to the node and run chef-client?
[2013-03-20 18:23:17 -0400] paigeat_: kallistec: FYI, https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-03-20 18:23:29 -0400] paigeat_: reading through it more now I started to yesterday and it crossed my mind this morning
[2013-03-20 18:23:47 -0400] paigeat_: not a bad place to start still I just don't want to use omnibus
[2013-03-20 18:23:48 -0400] rava: skarufue: unless you've scheduled the client to run via cron, or started it as a daemon with a specified time interval
[2013-03-20 18:23:52 -0400] paigeat_: thank you for reminding me though
[2013-03-20 18:24:18 -0400] skarufue: rava: ok thanks for clearing that up.
[2013-03-20 18:24:30 -0400] rava: skarufue: if you want to do a force execution, you can use knife search to find group of nodes to execute on
[2013-03-20 18:24:40 -0400] rava: skarufue: or a target node specifically
[2013-03-20 18:27:44 -0400] bhuwan: Hello
[2013-03-20 18:29:03 -0400] bluekelp: what's the best way to fork a broken recipe that's being pulled in via librarian/etc?
[2013-03-20 18:29:13 -0400] bluekelp: i was thinking of just copying the repo it comes from and adding a third "forked-cookbooks" dir that librarian pulls from until/unless the upstream repo accepts a pull request and fixes
[2013-03-20 18:29:48 -0400] skarufue: ok. now for the final question for tonight. i used omnibus to install things. so configfiles are generated by chef-server-ctl reconfigure. where is the recipe that generates those configs. i.e. i wish for my FQDN not to be pulled from /etc/host
[2013-03-20 18:31:19 -0400] ranjibd: skarufue: /opt/chef-server/embedded/service/<foo>/etc has configs, and chef-server/embedded/cookbooks has the cookbooks
[2013-03-20 18:42:05 -0400] bhuwan: Has anyone ever seen this error on a bootstrap: "bash: line 70: chef-client: command not found" ?
[2013-03-20 18:44:17 -0400] paigeat_: default['chef_server']['postgresql']['sql_password'] = "snakepliskin"
[2013-03-20 18:44:19 -0400] paigeat_: heh
[2013-03-20 18:47:00 -0400] rava: i set the revision limit in couchdb to 10 for the chef db, any reason i should make that higher?
[2013-03-20 18:47:15 -0400] rava: i'm not using replication for couch, so not worried about replication collisions
[2013-03-20 18:48:18 -0400] teukka: bhuwan: most probably the installation of chef failed. were there no errors before that line?
[2013-03-20 18:48:46 -0400] bhuwan: Thanks.  There weren't any errors - are there logs available someplace?
[2013-03-20 18:50:47 -0400] teukka: I think it only outputs to stdout by default
[2013-03-20 18:55:02 -0400] skarufue: FATAL: Chef::Exceptions::Exec: package[libperl-dev] (perl::default line 22) had an error: Chef::Exceptions::Exec: apt-get -q -y install libperl-dev=5.14.2-13 returned 100, expected 0
[2013-03-20 18:55:36 -0400] bhuwan: ok
[2013-03-20 18:55:57 -0400] skarufue: ok i ca fix this easy (apt-get update) but!!!!! man you ruby people are traumatized... forcing a version number with apt thats just...
[2013-03-20 18:58:59 -0400] kallistec: skarufue: the version number comes from apt-cache policy most likely
[2013-03-20 18:59:07 -0400] chrisballinger: hey all, does setting a password for the postgres user not work with the postgres cookbook?
[2013-03-20 19:01:14 -0400] btm: @opscode chef code review, join: http://bit.ly/WEjSI5, watch: http://youtu.be/95BnbGMCwUE
[2013-03-20 19:06:16 -0400] skarufue: kallistec: ok you seem to be right. but would have been a good joke. :-(
[2013-03-20 19:16:06 -0400] Sytses: I'm using the application_ruby cookbook and get the error 'Module passenger does not exist!', can someone help me with what to check?
[2013-03-20 19:37:19 -0400] gswallow: I am actually getting back wonky search results from my chef serer.
[2013-03-20 19:37:56 -0400] chrisballinger: hey have you guys ever gotten encrypted data bags to work with chef solo in vagrant?
[2013-03-20 19:38:40 -0400] gswallow: http://pastebin.com/XKxqXbfz
[2013-03-20 19:38:49 -0400] gswallow: Why am I getting different results?
[2013-03-20 19:38:57 -0400] gswallow: those are essentially the same data set.
[2013-03-20 19:45:23 -0400] gswallow: node.cluster_name("blah") doesn't work in chef 11
[2013-03-20 19:45:34 -0400] gswallow: err
[2013-03-20 19:46:16 -0400] matti: gswallow: IIRC, there was a change regarding this in 11.
[2013-03-20 19:46:23 -0400] matti: gswallow: http://wiki.opscode.com/display/chef/Breaking+Changes+in+Chef+11
[2013-03-20 19:46:46 -0400] gswallow: yeah, sorry.  taht was meant for my other conversation I was having.
[2013-03-20 19:46:53 -0400] matti: Ah.
[2013-03-20 19:46:57 -0400] matti: No worries ;]
[2013-03-20 19:47:38 -0400] gswallow: this is really stumping me though  my "different search results" problem.
[2013-03-20 19:50:41 -0400] gswallow: knife exec -c ~/.chef/qa1/knife.rb -E 'nodes.transform("name:qain1hc1*") { |n| n.normal.cluster_name("inqa1hc1") ; n.save ; puts "#{n.fqdn} #{n.cluster_name} #{n.chef_environment}" }'
[2013-03-20 19:50:48 -0400] gswallow: that operates on 24 nodes or so
[2013-03-20 19:50:57 -0400] gswallow: then I go back and search for it, and I get 9 nodes returned.
[2013-03-20 19:52:04 -0400] gswallow: does couchdb hold indexes or something, that could be stale?
[2013-03-20 20:03:24 -0400] Chris_Woods: This question will make me sound ultra noobish (probably because I am...) but once I setup the chef server I can safely rm the chef-server-11.deb, correct?  That's just the install package and now just takes up space, right?
[2013-03-20 20:05:50 -0400] danielle_: Chris_Woods,  yeah that should be okay.
[2013-03-20 20:06:56 -0400] Chris_Woods: danielle_, thanks.  I'm learning chef through some cloud hosted vms, and I'm using really small boxes 'cause this is just a pet project anyhow.  Every meg counts on these things!
[2013-03-20 20:07:32 -0400] matti: Chris_Woods: I recommend getting Vagrant locally.
[2013-03-20 20:07:43 -0400] matti: Chris_Woods: With some already pre-built boxes.
[2013-03-20 20:07:50 -0400] danielle_: Np
[2013-03-20 20:08:03 -0400] danielle_: ^^
[2013-03-20 20:08:12 -0400] matti: Chris_Woods: You can hen make as many VMs you only like withouth any concern about resources.
[2013-03-20 20:08:19 -0400] matti: danielle_: :)
[2013-03-20 20:08:54 -0400] Chris_Woods: matti, Oh, will Vagrant just let me partition my local machine into a buncha vms?
[2013-03-20 20:09:31 -0400] matti: Chris_Woods: No "partition"  per se -- not like IBM Main Frame / HP Super Dome :)
[2013-03-20 20:09:42 -0400] matti: Chris_Woods: It will allow you to run multiple VMs without hussle.
[2013-03-20 20:09:48 -0400] matti: Chris_Woods: It is a pain-free experience.
[2013-03-20 20:10:19 -0400] matti: Chris_Woods: http://www.vagrantup.com/
[2013-03-20 20:10:40 -0400] matti: Chris_Woods: On OS X -- get homebrew, get rbenv, get ruby-build for rbenv via homebew.
[2013-03-20 20:10:56 -0400] matti: Chris_Woods: Install decent version of Ruby. And then gem install vagrant.
[2013-03-20 20:11:04 -0400] matti: Chris_Woods: Plus, VirtualBox.
[2013-03-20 20:11:07 -0400] matti: Chris_Woods: And off you go.
[2013-03-20 20:11:24 -0400] cheeseplus: matti: I'd suggest using the installer style vagrant as opposed to the gem*
[2013-03-20 20:11:38 -0400] Chris_Woods: matti, Okay fun.  I'll check it out.  Haha, by the time I'm done with this I'll know all sorts of crazy software!
[2013-03-20 20:11:42 -0400] cheeseplus: at least that is what is now recommended ;)
[2013-03-20 20:11:44 -0400] matti: Chris_Woods: On Linux, it is very similar - although, you can use KVM on most new machines.
[2013-03-20 20:11:46 -0400] btm: @opscode cookbook code review: join: http://bit.ly/Y6N4La, watch: http://youtu.be/0zU6WsuvY38
[2013-03-20 20:11:54 -0400] matti: cheeseplus: Oh, OK ;)
[2013-03-20 20:12:01 -0400] matti: cheeseplus: Did no know that :)
[2013-03-20 20:12:15 -0400] matti: btm: Live stream?
[2013-03-20 20:12:19 -0400] cheeseplus: very minor naggle though, otherwise great advice
[2013-03-20 20:12:42 -0400] cheeseplus: matti: it's the equivalent of omnibus chef for vagrant
[2013-03-20 20:12:51 -0400] cheeseplus: nice and separate from system rubies
[2013-03-20 20:13:13 -0400] matti: Ah, OK.
[2013-03-20 20:13:27 -0400] matti: I use rbenv for newer Ruby anyway.
[2013-03-20 20:13:31 -0400] matti: But a good point.
[2013-03-20 20:13:34 -0400] matti: Good to know, thanks!
[2013-03-20 20:14:03 -0400] matti: cheeseplus: It will save Chris_Woods a lot of worries / monies etc ;]
[2013-03-20 20:14:13 -0400] cheeseplus: I do too but have been stung by gems mucking with vagrant and chef before, given how much I rely on them I <3 the segregation
[2013-03-20 20:14:24 -0400] cheeseplus: indeed!
[2013-03-20 20:14:53 -0400] matti: :)
[2013-03-20 20:15:15 -0400] matti: On Linux I still prefer KVM + KSM.
[2013-03-20 20:15:16 -0400] GreatSUN: re
[2013-03-20 20:15:19 -0400] matti: For speed over VB.
[2013-03-20 20:15:33 -0400] matti: Not as pleasunt to use as vagrant though.
[2013-03-20 20:16:01 -0400] spicy: i think there are plans to add support for other hypervisors
[2013-03-20 20:16:16 -0400] GreatSUN: if I have a LWRP within a cookbook, is there a possibility to call it through something like Chef::Resource or Chef::Provider?
[2013-03-20 20:16:20 -0400] epc: Hi there. I'm new to Chef and I'm trying to learn how to use the chef-solo but I'm getting some errors. can anyone help me out?
[2013-03-20 20:17:07 -0400] matti: epc: Hey, welcome!
[2013-03-20 20:17:17 -0400] GreatSUN: yeah :-)
[2013-03-20 20:17:20 -0400] GreatSUN: welcome epc :-)
[2013-03-20 20:17:21 -0400] matti: epc: Please paste them on pastebin.com or github gist :)
[2013-03-20 20:17:41 -0400] matti: spicy: They are :)
[2013-03-20 20:17:59 -0400] matti: spicy: If Mitchell will add LXC and KVM, I am going to send him box of sweets ;]
[2013-03-20 20:18:42 -0400] matti: btm: Who is who there?
[2013-03-20 20:18:50 -0400] spicy: oh wow, i didn't realize they had already released a version for vmware fusion
[2013-03-20 20:18:57 -0400] spicy: i was eagerly awaiting that
[2013-03-20 20:19:00 -0400] epc: hi matti! actually I'm trying something pretty simple. I used knife-solo to create a simple  cookbook with a an nginx recipe and pushed it to github.
[2013-03-20 20:19:48 -0400] matti: epc: OK, and? ;]
[2013-03-20 20:19:50 -0400] epc: and then from an ubuntu server I'm trying to execute chef-solo with json.attrib file (-j) and recipes (-r) pointing directly to github
[2013-03-20 20:20:13 -0400] matti: epc: I would not bother with github for the time being.
[2013-03-20 20:20:21 -0400] matti: epc: See if having it locally works for you.
[2013-03-20 20:20:39 -0400] matti: epc: Then use download facility on github and/or make sure that URL is to the RAW version -- otherwise you will get HTML.
[2013-03-20 20:21:39 -0400] epc: matti: I went pretty much this way. I first tested it with knife solo prepare/cook and only than I moved to chef-solo.
[2013-03-20 20:22:04 -0400] matti: epc: Does it work? ;]
[2013-03-20 20:22:25 -0400] epc: matti: yep. but than when I move to the download step it broke.
[2013-03-20 20:23:10 -0400] epc: give me a minute to paste bin the command and error stacktrace brb.
[2013-03-20 20:23:11 -0400] matti: Can you paste an error somewhere?
[2013-03-20 20:23:17 -0400] matti: Aye
[2013-03-20 20:28:46 -0400] GreatSUN: matti: do you have an idea if there is a possibility to call an LWRP in another way than <cookbook>_<resource>?
[2013-03-20 20:28:50 -0400] epc: matti: there you go: http://pastebin.com/98VhczCi
[2013-03-20 20:29:42 -0400] epc: matti: this error happens after installing chef-client using opscode repository (version 10.18.2)
[2013-03-20 20:30:19 -0400] epc: matti: the ubuntu server is pristine, everything including ruby, ruby gems was installed as dependency of the chef package.
[2013-03-20 20:30:59 -0400] mconigliaro: does anyone know if attributes are set in recipes at compile time?
[2013-03-20 20:32:11 -0400] GreatSUN: mconigliaro: what exactly do you want to know? It is not easy to give a 100% correct answer
[2013-03-20 20:32:24 -0400] GreatSUN: mconigliaro: also, which chef-version are you using?
[2013-03-20 20:32:28 -0400] mconigliaro: GreatSUN: i suspect that this line doesn't do anything: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/ruby.rb#L28
[2013-03-20 20:32:41 -0400] mconigliaro: 11
[2013-03-20 20:33:21 -0400] GreatSUN: mconigliaro: exchange set with normal
[2013-03-20 20:33:26 -0400] matti: epc: I am not sure if -j takes an URL.
[2013-03-20 20:33:51 -0400] GreatSUN: mconigliaro: iirc it should work afterwards
[2013-03-20 20:34:02 -0400] jessicab1: mconigliaro: i think that has to do with how that recipe is using it.. since the build essential recipe sets the attribute to a variable during compile time
[2013-03-20 20:34:04 -0400] epc: matti: I got this from http://wiki.opscode.com/display/chef/Chef+Solo docs
[2013-03-20 20:34:27 -0400] jessicab1: mconigliaro: since this line would happen at compile time - https://github.com/opscode-cookbooks/build-essential/blob/master/recipes/default.rb#L22
[2013-03-20 20:34:35 -0400] epc: matti: "chef-solo -c ~/solo.rb -j http://www.example.com/node.json  -r http://www.example.com/chef-solo.tar.gz"
[2013-03-20 20:34:37 -0400] mconigliaro: yeah, i see what they're trying to do
[2013-03-20 20:34:39 -0400] GreatSUN: jessicab1: afaik node.set is deprecated with chef 11
[2013-03-20 20:34:42 -0400] mconigliaro: the problem is that it doesn't work
[2013-03-20 20:35:09 -0400] GreatSUN: jessicab1: and before attributes are not really available in other recipes (within ruby parts)
[2013-03-20 20:35:51 -0400] gleam: no, node.set works
[2013-03-20 20:35:54 -0400] gleam: node[whatever] doesn't
[2013-03-20 20:35:56 -0400] jessicab1: GreatSUN: weird.. i havent heard anything about that, whered you see that its depreciated now?
[2013-03-20 20:35:57 -0400] matti: epc: Does "/var/chef-solo/cookbooks-master/" exist?
[2013-03-20 20:36:27 -0400] GreatSUN: jessicab1: it's not really deprecated, but should not be used anymore... read this today
[2013-03-20 20:36:31 -0400] GreatSUN: some article
[2013-03-20 20:36:40 -0400] matti: Ah.
[2013-03-20 20:36:45 -0400] mconigliaro: GreatSUN: node.normal didn't matter
[2013-03-20 20:36:46 -0400] epc: matti: no. /var/chef-solo exists.
[2013-03-20 20:36:53 -0400] matti: epc: s/cookbook_path/cookbooks_path/
[2013-03-20 20:36:59 -0400] mconigliaro: so there's no way to make this work as far as i can tell
[2013-03-20 20:37:01 -0400] matti: epc: Line that blows:       recipes_path = File.expand_path(File.join(cookbooks_path, '..'))
[2013-03-20 20:37:16 -0400] mconigliaro: thanks anyway
[2013-03-20 20:37:20 -0400] GreatSUN: mconigliaro: ok, then give it a Chef::Log.debug() directly afterwards and in the next recipe
[2013-03-20 20:37:42 -0400] epc: matti: but would not be this directory created by chef-solo itself, once it extract the tar ball?
[2013-03-20 20:37:44 -0400] GreatSUN: might be the code is running before value is set
[2013-03-20 20:38:11 -0400] GreatSUN: mconigliaro: I was told that the attribute handling is still not 100% ready in 11
[2013-03-20 20:38:49 -0400] mconigliaro: the real problem is that some people in my company think its a good idea to use these community cookbooks
[2013-03-20 20:38:55 -0400] mconigliaro: they're terrible
[2013-03-20 20:39:32 -0400] GreatSUN: mconigliaro: chef is still in development, you will always have terrible code-parts in recipes or cookbooks
[2013-03-20 20:39:52 -0400] mconigliaro: not when i write them myself
[2013-03-20 20:39:55 -0400] timsmith1: btm: can you guys look at COOK-2612
[2013-03-20 20:40:10 -0400] mconigliaro: nobody knows how to configure my infrastructure better than i do
[2013-03-20 20:40:12 -0400] GreatSUN: mconigliaro: might be with next chef version they are again terrible ;-)
[2013-03-20 20:40:20 -0400] GreatSUN: matters what is going to be changed
[2013-03-20 20:40:32 -0400] GreatSUN: mconigliaro: totally right :-)
[2013-03-20 20:40:45 -0400] mconigliaro: ugh, anyway...
[2013-03-20 20:40:53 -0400] mconigliaro: thanks for the help
[2013-03-20 20:40:58 -0400] GreatSUN: np
[2013-03-20 20:41:22 -0400] GreatSUN: whenever you need it and I can help I will do my very best
[2013-03-20 20:43:51 -0400] yfeldblum: ... people need to stop converging resources at runtime ... just declare the resources at runtime, and let them be converged at converge time ...
[2013-03-20 20:44:13 -0400] GreatSUN: jessicab1: do you have an idea on how I can access a resource from within another cookbook, if <cookbookname>_<resource> doen't work somehow?
[2013-03-20 20:44:30 -0400] yfeldblum: GreatSUN, declare a dependency
[2013-03-20 20:44:37 -0400] gleam: put depends 'whatever' in metadata.rb
[2013-03-20 20:44:50 -0400] GreatSUN: yfeldblum: cookbook dependency is declared in metadata
[2013-03-20 20:44:56 -0400] GreatSUN: but doesn't work out
[2013-03-20 20:45:11 -0400] GreatSUN: oh
[2013-03-20 20:45:13 -0400] GreatSUN: ha
[2013-03-20 20:45:18 -0400] GreatSUN: I found the problem
[2013-03-20 20:45:20 -0400] GreatSUN: :D
[2013-03-20 20:45:23 -0400] epc: matti: ok, I tried something else now I got another error.
[2013-03-20 20:45:25 -0400] GreatSUN: misspelling
[2013-03-20 20:45:35 -0400] GreatSUN: and that takes me half of day...
[2013-03-20 20:46:59 -0400] mvisich: Hello, I am trying to figure out how to get a list of all roles on all nodes. I thought it was someting along these lines..  roles = roles.select { |r| r =~ /cluster-*/ } but it does not seem to like the roles.select part. What am I missing for this?
[2013-03-20 20:51:41 -0400] matti: epc: Hehe
[2013-03-20 20:53:16 -0400] epc: matti: let me just confirm this.
[2013-03-20 20:58:16 -0400] epc: matti: should cookbook_path point to a cookbook repository like the one created with knife solo init?
[2013-03-20 21:02:25 -0400] Chris_Woods_: I just ran chef-client on a new node and then realized that I forgot to set it to the right environment.  Is it safe just to change it's environment and run chef-client again, or is there something more I need to do to make sure it's right?
[2013-03-20 21:02:34 -0400] gswallow: we just did :)
[2013-03-20 21:02:47 -0400] gswallow: same problem you had, Chris_Woods_
[2013-03-20 21:03:03 -0400] epc: matti: got it working without the download from github. :)
[2013-03-20 21:03:29 -0400] spicy: Chris_Woods: yep that is fine
[2013-03-20 21:03:39 -0400] Chris_Woods_: gswallow, So that should be a safe way to resolve that?  It won't have an odd configuration and come back to haunt me later?
[2013-03-20 21:03:40 -0400] epc: matti: let me try it now with the download.
[2013-03-20 21:04:20 -0400] gswallow: Chris_Woods_ it's working for us so far.
[2013-03-20 21:04:50 -0400] gswallow: afaik it's only a normal attribute
[2013-03-20 21:05:16 -0400] matti: epc: :)
[2013-03-20 21:06:49 -0400] epc: matti: ok, here is what I figured out. please help out to see if I got it right...
[2013-03-20 21:09:04 -0400] epc: matti: let me just run it again before saying anything wrong.. ;)
[2013-03-20 21:11:42 -0400] epc: matti: ok. the cookbook path in solo.rb seems to be the place where the chef-solo will extract the content of recipes tarball
[2013-03-20 21:12:46 -0400] matti: epc: Yeah.
[2013-03-20 21:13:09 -0400] epc: matti: the problem seems to be that when I point it directly to github, since we have an extra "top level" dir inside the tarball (the branch_name) it seems  this breaks everything.
[2013-03-20 21:13:29 -0400] matti: epc: Why do you need to have it on github?
[2013-03-20 21:13:49 -0400] Chris_Woods_: gswallow, I guess I was worried about the recipies running from the wrong environment leaving around a bunch of bad data, but I'll just worry about that once something bad actually happens!  Thanks!
[2013-03-20 21:14:20 -0400] epc: matti: don't really need it. I just assumed it would be practical to use since I use it control the recipes development.
[2013-03-20 21:15:21 -0400] epc: matti: it would save an extra step of building and publishing a tar ball during deploy if it could be served directly from github. but that would be just a convenience. ;)
[2013-03-20 21:16:49 -0400] epc: matti: thanks for the help!
[2013-03-20 21:17:41 -0400] timsmith1: question for the Opscode guys regarding COOK-2307.  What's the best way to alert the user to a problem when in an ERB
[2013-03-20 21:17:44 -0400] timsmith1: ?
[2013-03-20 21:19:57 -0400] yfeldblum: timsmith1, to not have problems in the ERB
[2013-03-20 21:20:05 -0400] yfeldblum: timsmith1, by composing your data in the recipe
[2013-03-20 21:20:22 -0400] yfeldblum: timsmith1, and passing to the ERB an extremely simple data-structure without any problems
[2013-03-20 21:20:23 -0400] timsmith1: in the Nagios cookbook that's not really possible
[2013-03-20 21:20:38 -0400] timsmith1: I mean maybe you could
[2013-03-20 21:20:46 -0400] timsmith1: it would just require an enormous amount of rework
[2013-03-20 21:20:49 -0400] timsmith1: of the code
[2013-03-20 21:21:00 -0400] yfeldblum: timsmith1, yep
[2013-03-20 21:21:06 -0400] yfeldblum: timsmith1, nevertheless, that's the best way
[2013-03-20 21:22:06 -0400] CharlieSu: All, I'm thinking about having my Chef clients on AWS cleanup their node and client keys upon termination.  The thought is to have it execute this script in rc0.d/   https://gist.github.com/CharlieSu/b9f580c71cb80f870c42   Any thoughts/concerns?
[2013-03-20 21:25:13 -0400] epc: cheers mate.
[2013-03-20 21:26:00 -0400] yfeldblum: CharlieSu, why not have whatever terminates the node do the cleanup?
[2013-03-20 21:26:26 -0400] CharlieSu: yfeldblum: because some of the instances are spot instances..  They're terminated by AWS automtically ..
[2013-03-20 21:26:31 -0400] matti: evalencia-: :)
[2013-03-20 21:26:46 -0400] matti: GreatSUN: Not from the top of my head.
[2013-03-20 21:26:49 -0400] jtimberman: timsmith1: i'm going to agree with yfeldblum :)
[2013-03-20 21:26:55 -0400] matti: GreatSUN: But it should be possible.
[2013-03-20 21:27:05 -0400] jtimberman: timsmith1: all that crazy logic should be in a library that massages the data and passes it into the template.
[2013-03-20 21:27:07 -0400] yfeldblum: jtimberman, there's always a first for everything
[2013-03-20 21:27:11 -0400] mikeg: is it possible to set an attribute to the result of a shell command?
[2013-03-20 21:27:22 -0400] timsmith1: I was afraid that would be the answer
[2013-03-20 21:27:24 -0400] timsmith1: it's time though
[2013-03-20 21:27:31 -0400] bemu: What is the new way to do  node.has_key?("ec2") ?
[2013-03-20 21:27:38 -0400] bemu: My googlefu failing.
[2013-03-20 21:27:44 -0400] yfeldblum: bemu, that's fine
[2013-03-20 21:27:50 -0400] bemu: Fails in chef11
[2013-03-20 21:27:52 -0400] bhouse: I'm having a problem with berkshelf failing to upload the partial_search cookbook from the community site because of the name field missing in metadata.rb
[2013-03-20 21:28:00 -0400] yfeldblum: bemu, well it should be fine :D
[2013-03-20 21:28:03 -0400] GreatSUN: so, ok
[2013-03-20 21:28:07 -0400] bemu: Have you tested it in chef11?
[2013-03-20 21:28:15 -0400] GreatSUN: I still have some problem I can not see
[2013-03-20 21:28:20 -0400] bhouse: looks like the github version was bumped and includes name, so i can point there for now, but any chance of getting the community site updated?
[2013-03-20 21:28:22 -0400] GreatSUN: maybe someone can help me: http://nopaste.info/f078955d4e.html
[2013-03-20 21:28:30 -0400] yfeldblum: bemu, failing in what way?
[2013-03-20 21:28:35 -0400] GreatSUN: I get the error that there is no resource for action update
[2013-03-20 21:28:41 -0400] timsmith1: node.attribute?("ec2")
[2013-03-20 21:28:45 -0400] timsmith1: that work?
[2013-03-20 21:29:30 -0400] CharlieSu: yfeldblum: do you see any problems with the idea?
[2013-03-20 21:30:07 -0400] yfeldblum: CharlieSu, i see theoretical problems, absolutely
[2013-03-20 21:30:20 -0400] yfeldblum: CharlieSu, it violates the Law of Finalizers, which I just made up
[2013-03-20 21:30:44 -0400] CharlieSu: smh...
[2013-03-20 21:31:32 -0400] GreatSUN: maybe it is the name of the action itself?!
[2013-03-20 21:31:46 -0400] yfeldblum: CharlieSu, https://twitter.com/yfeldblum/status/314489423339327490
[2013-03-20 21:32:21 -0400] jtimberman: yfeldblum: aw, we agree quite often :)
[2013-03-20 21:32:46 -0400] yfeldblum: CharlieSu, you *can* do it that way, but you *cannot* rely on it to be done that way (you need a separate way of cleaning up resources that don't get finalized)
[2013-03-20 21:33:36 -0400] yfeldblum: CharlieSu, which basically means you might bother to do it that way only if it is a significant performance optimization or debugging aid, but otherwise there's not much point
[2013-03-20 21:34:51 -0400] CharlieSu: yfeldblum: Got it. Thanks.
[2013-03-20 21:36:21 -0400] yfeldblum: "Chef Client finished, X resources updated" ... not my resources ... fix your public cookbooks!!!
[2013-03-20 21:38:14 -0400] spox: ruby_block("annoy yfeldblum"){ block{ true } }
[2013-03-20 21:39:00 -0400] bemu: I think yfeldblum is going to be unable to walk at ChefConf with all of the beer and coffee he is owed. :)
[2013-03-20 21:39:40 -0400] BryanWB: bemu, big +1
[2013-03-20 21:42:29 -0400] bemu: yfeldblum: I think it was user error, thank you!
[2013-03-20 21:43:47 -0400] GreatSUN: hey BryanWB :-)
[2013-03-20 21:43:57 -0400] BryanWB: GreatSUN, hey dude ;)
[2013-03-20 21:44:37 -0400] GreatSUN: BryanWB: everything fine?
[2013-03-20 21:45:05 -0400] yfeldblum: bemu, sure
[2013-03-20 21:45:12 -0400] yfeldblum: spox, that would do it
[2013-03-20 21:45:48 -0400] spox: :)
[2013-03-20 21:45:56 -0400] GreatSUN: is it possible to access databags from within attribute-files ?
[2013-03-20 21:47:11 -0400] yfeldblum: GreatSUN, yes, but don't do that
[2013-03-20 21:47:35 -0400] yfeldblum: GreatSUN, do *everything* from a recipe that you don't have a specific reason to do somewhere else
[2013-03-20 21:48:34 -0400] yfeldblum: GreatSUN, https://twitter.com/yfeldblum/status/314493663038296064
[2013-03-20 21:51:42 -0400] GreatSUN: yfeldblum: I just came across another solution :-)
[2013-03-20 21:51:50 -0400] GreatSUN: yfeldblum: thanks anyways :-)
[2013-03-20 22:06:26 -0400] cconst_work: anyone here use soloist?  I just installed it and I get an error: 'chef-solo: command not found' when running soloist, even though `which chef-solo` gives me a program
[2013-03-20 22:11:59 -0400] xtristan: I put up a new cookbook -- I haven't seen one with the same purpose yet https://github.com/tristanfisher/charybdis IRC server
[2013-03-20 22:16:04 -0400] TotalEvil: hi2all
[2013-03-20 22:17:49 -0400] gswallow: eek
[2013-03-20 22:20:53 -0400] magoo_: the nagios cookbook is populated my node ipaddress as fe80::a00:27ff:fefe:50f9,prefixlen64scopeLinkfamilyinet6
[2013-03-20 22:21:07 -0400] magoo_: i don't think it's an ohai issue as it shows the right value for "ipaddress"
[2013-03-20 22:21:57 -0400] GreatSUN: yfeldblum: still there?
[2013-03-20 22:22:06 -0400] yfeldblum: GreatSUN, yeah
[2013-03-20 22:22:35 -0400] GreatSUN: do you perhaps know how I can check if a databag I create at runtime is already existing or not?
[2013-03-20 22:23:09 -0400] yfeldblum: GreatSUN, i would say your recipes should all be read-only w.r.t. data-bags and data-bag items
[2013-03-20 22:23:47 -0400] yfeldblum: GreatSUN, or did you mean something else by "run-time"?
[2013-03-20 22:23:49 -0400] GreatSUN: what does w.r.t. mean?
[2013-03-20 22:24:06 -0400] spox: "with regard to"
[2013-03-20 22:24:10 -0400] yfeldblum: GreatSUN, "with respect to"
[2013-03-20 22:24:21 -0400] yfeldblum: or what spox said
[2013-03-20 22:24:22 -0400] GreatSUN: yfeldblum: I need to create databag if not existing to save data in them
[2013-03-20 22:24:43 -0400] GreatSUN: thanks, didn't know this short form till now
[2013-03-20 22:24:53 -0400] yfeldblum: GreatSUN, recipes should only save data to the node object, and should not call save directly but should only rely on the auto-save after everything finishes converging
[2013-03-20 22:25:22 -0400] yfeldblum: GreatSUN, recipes should not create, update, or delete data-bags or data-bag items
[2013-03-20 22:25:44 -0400] GreatSUN: yfeldblum: with the node attributes I got the problem that the data doesn't persist between two cookbooks when I need it
[2013-03-20 22:26:01 -0400] yfeldblum: GreatSUN, not sure what that means
[2013-03-20 22:26:16 -0400] GreatSUN: yfeldblum: here I have to use chef 10
[2013-03-20 22:26:16 -0400] TotalEvil: anyone has practic with softlayer clouds?
[2013-03-20 22:26:30 -0400] yfeldblum: GreatSUN, if you're having a concurrency problem, then adding read-write data-bag items will give you another concurrency problem on top, not solve anything
[2013-03-20 22:26:50 -0400] GreatSUN: when updating node attributes from one recipe within one cookbook, the values are not sure to persist in another recipe in another cookbook
[2013-03-20 22:27:20 -0400] GreatSUN: yfeldblum: no real concurrency problem
[2013-03-20 22:27:35 -0400] GreatSUN: but the problem that I can not work with the data in the other cookbook
[2013-03-20 22:27:55 -0400] GreatSUN: the data persists when resources and stuff are loaded, but not before
[2013-03-20 22:28:28 -0400] GreatSUN: with chef 11 that all gets better, but with chef 10 I need to find some workaround for that
[2013-03-20 22:28:41 -0400] jessicab: GreatSUN: sounds like perhaps a run order issue? the attributes should just get loaded based on precedence.. but that does have a little to do with loading order
[2013-03-20 22:28:42 -0400] GreatSUN: and since databags persist and contain data just in time
[2013-03-20 22:28:50 -0400] GreatSUN: that would be a nice workaround
[2013-03-20 22:28:57 -0400] GreatSUN: jessicab: nope, run order is nice
[2013-03-20 22:29:25 -0400] GreatSUN: jessicab: but the data from the first stuff is not persisting in the second which causes the second to set default data
[2013-03-20 22:29:37 -0400] GreatSUN: but with that default data the first data is incompatible
[2013-03-20 22:29:46 -0400] GreatSUN: so it doesnt work
[2013-03-20 22:29:53 -0400] TotalEvil: ((looking someone who also using SoftLayer cloud
[2013-03-20 22:29:57 -0400] jessicab: hm.. cant say ive seen that issue, and i use attributes across recipes
[2013-03-20 22:30:12 -0400] GreatSUN: TotalEvil: hehe
[2013-03-20 22:30:28 -0400] TotalEvil: not hehe(
[2013-03-20 22:30:44 -0400] GreatSUN: jessicab: when you set attributes only in attribute files, then you have access to them throughout recipes
[2013-03-20 22:31:10 -0400] GreatSUN: but if you depend on attributes set within recipes from cookbook1 in cookbook2
[2013-03-20 22:31:25 -0400] GreatSUN: and cookbook2 isn't loaded via runlist/role
[2013-03-20 22:31:32 -0400] GreatSUN: then you have a problem
[2013-03-20 22:31:41 -0400] GreatSUN: and yes, I know that this is no good design
[2013-03-20 22:31:48 -0400] spox: ...
[2013-03-20 22:31:50 -0400] GreatSUN: but I am not the guy who made this design
[2013-03-20 22:31:55 -0400] GreatSUN: just have to get along with it
[2013-03-20 22:32:43 -0400] GreatSUN: so back to the question I had...
[2013-03-20 22:32:58 -0400] GreatSUN: can I check from within a recipe if databag exists already?
[2013-03-20 22:33:20 -0400] laurent\: magoo_: and what does ohai ip6address give ?
[2013-03-20 22:33:23 -0400] yfeldblum: GreatSUN, maybe you could be more specific about what you're doing and what the issue is?
[2013-03-20 22:33:42 -0400] yfeldblum: GreatSUN, more detailed
[2013-03-20 22:33:46 -0400] spox: and yes, you can search for a databag and see if you get a result
[2013-03-20 22:34:07 -0400] spox: but as yfeldblum says, more details on what you are doing would be good. databags will likely make this situation worse (?)
[2013-03-20 22:34:20 -0400] GreatSUN: yfeldblum: perhaps I should write some website about it
[2013-03-20 22:34:33 -0400] GreatSUN: yfeldblum: have been writing that 3 times already today :D
[2013-03-20 22:34:54 -0400] yfeldblum: GreatSUN, or maybe just a gist/pastie :D
[2013-03-20 22:35:08 -0400] magoo_: laurent\: ha, i just thought it was an anomaly but, yeah, i guess it's grabbing ipv6
[2013-03-20 22:35:22 -0400] magoo_: this is probably configurable somewhere
[2013-03-20 22:35:48 -0400] laurent\: magoo_: "fe80::a00:27ff:fefe:50f9,prefixlen64scopeLinkfamilyinet6" is an anomaly ! :)
[2013-03-20 22:36:47 -0400] magoo_: well, that's true... both my ipv4 and ipv6 are normal addresses
[2013-03-20 22:37:00 -0400] magoo_: none of the garbage appended on the end
[2013-03-20 22:38:40 -0400] magoo_: I don't understand the logic in the cookbook
[2013-03-20 22:38:58 -0400] laurent\: magoo_: where is it ? hosts definition ? address field ?
[2013-03-20 22:39:40 -0400] magoo_: ip = node['ipaddress'].include?('.') ? n['cloud']['public_ipv4'] : n['ipaddress']
[2013-03-20 22:39:54 -0400] magoo_: from the hosts.cfg.erb template
[2013-03-20 22:40:17 -0400] GreatSUN: yfeldblum: http://nopaste.info/72b305f72e.html
[2013-03-20 22:40:24 -0400] magoo_: i just don't understand the include?('.')
[2013-03-20 22:40:56 -0400] TotalEvil: GreatSUN: ) ur hehe means u have deal with it?)
[2013-03-20 22:41:09 -0400] yfeldblum: GreatSUN, the data-bag solution will be anti-reliable
[2013-03-20 22:41:43 -0400] laurent\: magoo_: i don't really know what node["cloud"]["public_ipv4"] is supposed to store, do you have a cloud attribute anyway ?
[2013-03-20 22:42:31 -0400] magoo_: definitely not in vagrant... i think the nagios cookbook is making the assumption that I am and who knows what is coming from that attribute
[2013-03-20 22:42:36 -0400] danielle_: So i'm trying to build chef-server with omnibus and i run the command "CHEF_GIT_REV=master rake projects:chef-server" but I end up getting this https://ezcrypt.it/hi6n#7uCJtfth7KGUBViUWzCMaJro
[2013-03-20 22:42:38 -0400] magoo_: i'm surprised it's working at all
[2013-03-20 22:43:02 -0400] danielle_: Apparently it's not connecting with amazon's servers??
[2013-03-20 22:43:04 -0400] magoo_: i'll mod the recipe to look for vagrant and just us ipaddress
[2013-03-20 22:43:08 -0400] magoo_: *use
[2013-03-20 22:43:10 -0400] GreatSUN: yfeldblum: which solution would do the job though?
[2013-03-20 22:43:29 -0400] GreatSUN: TotalEvil: I always have deals with dynamic stuffs
[2013-03-20 22:43:43 -0400] TotalEvil: GreatSUN: ^))hehe
[2013-03-20 22:43:53 -0400] TotalEvil: GreatSUN: can u give me some advices?)
[2013-03-20 22:44:20 -0400] GreatSUN: TotalEvil: also have build some php-framework where you can add software into kind of a cms
[2013-03-20 22:44:37 -0400] TotalEvil: GreatSUN: nice)))
[2013-03-20 22:44:38 -0400] GreatSUN: dynamic software structure administrated by templates saved in database
[2013-03-20 22:45:17 -0400] GreatSUN: also I have base types which you can have in a runplan for the website (name can be defined freely with the cms-like administration)
[2013-03-20 22:45:28 -0400] yfeldblum: GreatSUN, so the order of execution works like this: all attributes from roles are set, then all attributes files from all cookbooks are run, then the recipes are run
[2013-03-20 22:45:37 -0400] GreatSUN: I have build all administration with the framework just with the template editor
[2013-03-20 22:45:46 -0400] magoo_: well, in another location (that also has the bad ip), it just does this: mon_host << node['ipaddress']
[2013-03-20 22:45:52 -0400] magoo_: so that theory is blown
[2013-03-20 22:45:55 -0400] GreatSUN: yfeldblum: I know
[2013-03-20 22:46:19 -0400] TotalEvil: GreatSUN: )) true guy)
[2013-03-20 22:46:51 -0400] TotalEvil: GreatSUN: mb u have some solutions) how to run chef-client whe cloud is ordered and booting
[2013-03-20 22:46:53 -0400] GreatSUN: yfeldblum: but my problem is that I have to decide what to do and what attribute sets to build up based on the attributes
[2013-03-20 22:47:10 -0400] TotalEvil: GreatSUN: without access to it by ssh
[2013-03-20 22:47:20 -0400] GreatSUN: TotalEvil: dunno right now
[2013-03-20 22:47:25 -0400] yfeldblum: GreatSUN, the calling recipe can rewrite the attributes that were previously set by another cookbooks attributes file
[2013-03-20 22:47:34 -0400] GreatSUN: didn't think about something like that till now
[2013-03-20 22:47:44 -0400] GreatSUN: yfeldblum: yes
[2013-03-20 22:48:19 -0400] GreatSUN: yfeldblum: but when another recipe of another cookbook which is included/dependant is loaded the rewritten attribute-values are not there
[2013-03-20 22:48:33 -0400] GreatSUN: and there I have the problem to work around
[2013-03-20 22:48:45 -0400] yfeldblum: GreatSUN, sure they are - i do just that plenty often
[2013-03-20 22:48:46 -0400] GreatSUN: this problem gets better with chef11
[2013-03-20 22:48:55 -0400] yfeldblum: GreatSUN, it sounds like something else is going on though
[2013-03-20 22:49:08 -0400] GreatSUN: yfeldblum: ah, ok... I know
[2013-03-20 22:49:18 -0400] GreatSUN: it's cause I have used libraries
[2013-03-20 22:49:38 -0400] TotalEvil: GreatSUN: i found solutions for ec2(( but for softlayer no luck(
[2013-03-20 22:51:41 -0400] GreatSUN: yfeldblum: to be honest I tried to do it with recipe, too, but I would have to build all the code per recipe and would be stuck into that design, no good coding, high maintanance
[2013-03-20 22:54:00 -0400] jaryd: hey guys.. is tehre a way to clear ssh hostkeys on the chef server through a knife command or something?
[2013-03-20 23:04:33 -0400] GreatSUN: guys
[2013-03-20 23:04:55 -0400] GreatSUN: if I run search for databag I get error (due to databag not existing)
[2013-03-20 23:05:09 -0400] GreatSUN: but the error leads to chef to stop continue working
[2013-03-20 23:05:17 -0400] GreatSUN: isn't there some easier possibility?
[2013-03-20 23:05:37 -0400] jordane: GreatSUN: you can encapsulate the search in a try catch block
[2013-03-20 23:05:49 -0400] jordane: so it an exception is raised, it does something else instead of exiting.
[2013-03-20 23:06:12 -0400] TotalEvil: jordane
[2013-03-20 23:06:35 -0400] TotalEvil: jordane:  mb u have) some expirience with softlayer clouds?
[2013-03-20 23:07:06 -0400] jordane: TotalEvil: nope, just rackspace and openstack. Sorry.
[2013-03-20 23:07:15 -0400] GreatSUN: jordane: yeah, just thought there might be another solution
[2013-03-20 23:07:19 -0400] TotalEvil: jordane: ohh( seems no one have(
[2013-03-20 23:08:14 -0400] jordane: GreatSUN: not really. Typically if your data bag isn't there, it is safest to assume it is a big deal and exit. a begin-rescue-end block will allow you to do it something else. A bit annoying, but not too bad.
[2013-03-20 23:08:51 -0400] jordane: certainly better than shooting yourself in the foot trying to access a non-existant data bag, or skipping a recipe and breaking your server.
[2013-03-20 23:09:46 -0400] yfeldblum: GreatSUN, you can use `Chef::DataBag.list` to find out if a data-bag exists
[2013-03-20 23:11:05 -0400] GreatSUN: yfeldblum: thanks :-)
[2013-03-20 23:13:15 -0400] redelectric: hi chefs!  any pointers for debugging a 404 error for a search in a recipe?
[2013-03-20 23:15:08 -0400] yfeldblum: redelectric, either create the data-bag first (from your workstation, with knife), or check if the data-bag exists first (in the recipe that is conducting the search)
[2013-03-20 23:16:17 -0400] bluekelp: how do people generally manage "base" server config?  a separate role, something included from all other recipes, a separate run_list entry setup on bootstrap, etc.?
[2013-03-20 23:16:32 -0400] miah: a base role
[2013-03-20 23:16:49 -0400] miah: which has a run_list that specifies recipes or roles i'd like to run on every system.
[2013-03-20 23:16:53 -0400] redelectric: yfeldblum, trying to search for :nodes,  I'm checking chef-shell now wand search gives me Net::HttpServerException: 404 "Not Found"
[2013-03-20 23:18:29 -0400] jordane: bluekelp: like miah, we just use a role called base. It sets up basic things that are common to every server. Ssh stuff, adding our users, ntp, things like that.
[2013-03-20 23:19:22 -0400] yfeldblum: redelectric, search for :node, not for :nodes
[2013-03-20 23:21:08 -0400] redelectric: yfeldblum, yep, that fixed it.  Thanks! :D
[2013-03-20 23:41:10 -0400] GreatSUN: n8 guys
[2013-03-20 23:41:17 -0400] GreatSUN: I have to sleep for 3-4 hours
[2013-03-20 23:41:24 -0400] GreatSUN: see ya laters
[2013-03-20 23:43:28 -0400] bluekelp: are files in libaries/ in a recipe auto included?
[2013-03-20 23:50:35 -0400] yfeldblum: bluekelp, they are *loaded*
[2013-03-20 23:50:44 -0400] yfeldblum: bluekelp, not "included", because files can't be included
[2013-03-20 23:53:41 -0400] sascha_d: I am having trouble getting chef to use my custom ohai plugin unless I dump it in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/ohai-6.16.0/lib/ohai/plugins
[2013-03-20 23:54:37 -0400] sascha_d: I actually took the opscode cookbook and just put my file in there and it's deploying and it's issuing debug. However, I got no node atterbutes
[2013-03-20 23:54:57 -0400] sascha_d: if I dump it in the official plugin dir, I get all the attributes I want
[2013-03-20 23:58:19 -0400] bluekelp: yfeldblum: thanks.  i *think* what i wanted in this case was just an attributes file but i think i see your point
[2013-03-20 23:58:32 -0400] bluekelp: took me a while to figure out this is where all these magic functions in recipes were coming from

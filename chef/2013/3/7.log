[2013-03-07 00:00:28 -0500] gene: anyhow, after putting daemontools in the run_list, this caused the cookbook to be loaded and for the LWRPs it defines to be available anywhere in the chef run
[2013-03-07 00:00:48 -0500] gene: so, problem solved. thanks to metaxis for reminding me what's going on under the hood
[2013-03-07 00:04:01 -0500] juliancdunn: gene: putting daemontools in your metadata as a 'depends' doesn't do it?
[2013-03-07 00:05:07 -0500] gene: juliancdunn : I'm about to try that method now. The reason I didn't start there is that I need to do 1 thing before daemontools tries to install the daemontools package, which is create a yum.repos.d file that points it to somewhere that it can actually get the package. I had thought that depends would run the default recipe, which I now don't think is the case
[2013-03-07 00:08:46 -0500] juliancdunn: gene: nope, depends doesn't run anything
[2013-03-07 00:08:53 -0500] gene: sweet
[2013-03-07 00:09:00 -0500] gene: ya, my chef chops are rusty =(
[2013-03-07 00:09:10 -0500] juliancdunn: np
[2013-03-07 00:09:14 -0500] gene: juliancdunn : thanks for the details
[2013-03-07 00:10:58 -0500] jforce: I'm trying to stop a service before updating its init file. Anybody know how to do that?
[2013-03-07 00:15:15 -0500] juliancdunn: jforce: add a service resource with action :stop before the template/file resource?
[2013-03-07 00:16:14 -0500] jforce: juliancdunn: do those necessarily get evaluated in order? I was hoping for some kind of "before" and "after" methods.
[2013-03-07 00:16:25 -0500] juliancdunn: jforce: everything in Chef is ordered
[2013-03-07 00:19:22 -0500] jforce: juliancdunn: sounds like that'll do it. thanks!
[2013-03-07 00:19:36 -0500] bigoldrock: RE: http://community.opscode.com/questions/267
[2013-03-07 00:20:03 -0500] bigoldrock: there's someone who says they fixed the problem "I told chef to bootstrap version 10.20.0 (which is a minor upgrade and works fine) which has the fix for this issue."
[2013-03-07 00:20:21 -0500] bigoldrock: how do you tell chef to bootstrap version 10.20.0?
[2013-03-07 00:23:10 -0500] willsalt: i am trying to perform a delayed restart on a supervisor service, however, it doesn't seem to actually happen
[2013-03-07 00:23:53 -0500] willsalt: INFO: Processing supervisor_service[<servicename redacted>] action restart (<cookbookname redacted>::default line 144)
[2013-03-07 00:24:07 -0500] willsalt: but the service is not restarted
[2013-03-07 00:25:32 -0500] juliancdunn: bigoldrock: by default Chef will bootstrap a server using whatever version is running on your workstation
[2013-03-07 00:26:06 -0500] juliancdunn: the file it uses to do this is called chef-full.erb and it lives in /opt/chef/embedded/....../chef-full.erb (don't remember the path exactly)
[2013-03-07 00:26:33 -0500] juliancdunn: if you don't like what it does, you can copy the chef-full.erb to your ~/.chef/bootstrap directory, rename it, and customize it
[2013-03-07 00:27:05 -0500] juliancdunn: then pass "-d" to the bootstrap command for your customized bootstrap
[2013-03-07 00:28:05 -0500] bigoldrock: @juliancdunn, thanks! Just to confirm, I can do all this without upgrading chef server, just hack the bootstrap process per your instruction, right?
[2013-03-07 00:28:34 -0500] alxism: can a resource be named with an attribute value? or will the compilation step get confused?
[2013-03-07 00:28:44 -0500] alxism: I'm thinking of something like:
[2013-03-07 00:29:15 -0500] alxism: file node['myfiile'] do  end
[2013-03-07 00:30:23 -0500] juliancdunn: bigoldrock: that's right
[2013-03-07 00:31:40 -0500] juliancdunn: alxism: yes it can
[2013-03-07 00:34:20 -0500] alxism: thx
[2013-03-07 00:48:15 -0500] flaccid: hmm, node.run_list doesn't seem to contain the run_list itself. should i be checking something else?
[2013-03-07 00:51:46 -0500] flaccid: hmm maybe node.run_list.expand(node.chef_environment).recipes
[2013-03-07 00:57:13 -0500] benkay: hey chefs, i'm looking at application_python, and don't see a default.rb recipe
[2013-03-07 00:57:29 -0500] benkay: am I supposed to write that?
[2013-03-07 00:58:31 -0500] juliancdunn: benkay: no, that cookbook just gives you subclass LWRPs of "application"
[2013-03-07 00:59:04 -0500] benkay: juliancdunn: does that mean that I need the "application" cookbook as well?
[2013-03-07 01:00:24 -0500] juliancdunn: benkay: yep
[2013-03-07 01:00:46 -0500] benkay: good. so I'm not crazy, then.
[2013-03-07 01:00:48 -0500] benkay: well
[2013-03-07 01:00:59 -0500] juliancdunn: if you get familiar with the base LWRPs in "application" then the application_python cookbook will make more sense to you
[2013-03-07 01:01:05 -0500] juliancdunn: benkay: heh
[2013-03-07 01:01:11 -0500] benkay: ;)
[2013-03-07 01:01:17 -0500] Guest66278: Anyone having issues with the hosted chef? I'm seeing a some errors tonight. Can't seem to regenerate a organization key for example, error 32033.
[2013-03-07 01:03:10 -0500] benkay: so, the methods in application/providers/default.rb?
[2013-03-07 01:04:48 -0500] juliancdunn: benkay: yes, those, although the README.md explains at a much higher level if you're just getting started
[2013-03-07 01:05:01 -0500] challgren: Is there an issue with the website everytime I try to regena validator key I keep getting Organization not found. (Error 32033)
[2013-03-07 01:05:43 -0500] benkay: *facepalm*
[2013-03-07 01:07:17 -0500] benkay: okay, feeling slightly more comfortable.
[2013-03-07 01:08:05 -0500] benkay: different question: I'm reviewing community.opscode.com/cookbooks/application_python
[2013-03-07 01:08:29 -0500] benkay: and i'm looking at the "Usage" codeblock; is that intended to be run as a recipe?
[2013-03-07 01:09:12 -0500] juliancdunn: benkay: yep. put that in your application's cookbook
[2013-03-07 01:09:35 -0500] juliancdunn: and "depends" the right things in your metadata.rb
[2013-03-07 01:09:46 -0500] benkay: groovy, grokking more and more. so i need a cookbook for my application, that at the outset looks like
[2013-03-07 01:10:01 -0500] benkay: root/chef/cookbooks/myapp/recipes/default.rb
[2013-03-07 01:10:18 -0500] benkay: with a root/chef/cookbooks/myapp/recipes/default.rb
[2013-03-07 01:10:27 -0500] juliancdunn: benkay: that's the pattern, yes, and you use other cookbooks as libraries
[2013-03-07 01:10:48 -0500] juliancdunn: just like how your actual Django app would depend on MySQL (or whatever), etc.
[2013-03-07 01:11:18 -0500] benkay: makes sense.
[2013-03-07 01:12:14 -0500] benkay: so depends.rb would have things like "python", "unicorn"?
[2013-03-07 01:12:29 -0500] benkay: gunicorn, dear spellchecker.
[2013-03-07 01:13:33 -0500] juliancdunn: benkay: yup
[2013-03-07 01:17:38 -0500] benkay: I'm looking at the python metadata.rb, I see depends "build-essential" and "yum", does that mean that chef will look for those cookbooks and into their default recipes to see what to do and then do that?
[2013-03-07 01:20:08 -0500] juliancdunn: no, "depends" executes nothing
[2013-03-07 01:20:26 -0500] benkay: what's its function, then?
[2013-03-07 01:21:02 -0500] juliancdunn: it just a) makes the LWRPs available to you, and b) ensures that the cookbook is downloaded onto the server so you can invoke its recipes with "include_recipe" if you want
[2013-03-07 01:21:34 -0500] benkay: re a: LWRP'
[2013-03-07 01:21:52 -0500] benkay: the LWRP's associated with the libraries specified by "depends"?
[2013-03-07 01:22:08 -0500] willsalt: anyone familiar with the delayed action?
[2013-03-07 01:22:25 -0500] juliancdunn: benkay: the LWRPs in the cookbooks in the "depends"
[2013-03-07 01:22:29 -0500] willsalt: I'm asking chef to carry out a delayed action on a supervisor service but it never happens?
[2013-03-07 01:22:50 -0500] benkay: great. gotcha.
[2013-03-07 01:25:04 -0500] juliancdunn: willsalt: would need more context. maybe paste a Gist link with the chef-client output as well
[2013-03-07 01:26:19 -0500] willsalt: juliancdunn: 2 secs
[2013-03-07 01:29:42 -0500] willsalt: juliancdunn: http://pastie.org/6408324
[2013-03-07 01:31:22 -0500] juliancdunn: willsalt: where do you actually do the restart?
[2013-03-07 01:31:27 -0500] willsalt: the command is never called though. i have checked this by tcpdumping supervisorctl...
[2013-03-07 01:31:32 -0500] willsalt: http://pastie.org/6408333
[2013-03-07 01:31:36 -0500] matti: jakedavis: You should mention that depends only work when used with a Role, IIRC.
[2013-03-07 01:31:40 -0500] matti: Ops.
[2013-03-07 01:31:41 -0500] willsalt: i do it as a notifies command
[2013-03-07 01:31:42 -0500] matti: I mean, juliancdunn
[2013-03-07 01:31:45 -0500] matti: jakedavis: Sorry :)
[2013-03-07 01:33:33 -0500] juliancdunn: willsalt: that's weird. also, :delayed is the default, so it should work
[2013-03-07 01:33:42 -0500] juliancdunn: matti: what do you mean?
[2013-03-07 01:34:27 -0500] willsalt: juliancdunn: i have the supervisor service defined in a for loop, it is used to define many services
[2013-03-07 01:34:43 -0500] willsalt: the delayed is called within the loop
[2013-03-07 01:34:55 -0500] willsalt: but runs at the end, after the loop exists, could that douse a problem?
[2013-03-07 01:36:06 -0500] juliancdunn: no, that shouldn't have anything to do with it
[2013-03-07 01:36:34 -0500] juliancdunn: maybe re-run chef-client with -ldebug, that'll show exactly what it's trying to do
[2013-03-07 01:36:45 -0500] willsalt: yeah done that
[2013-03-07 01:36:51 -0500] willsalt: iahh cheers anyway mate
[2013-03-07 01:36:57 -0500] willsalt: i need to sleep!
[2013-03-07 01:37:01 -0500] juliancdunn: sure, sorry i couldn't figure it out
[2013-03-07 03:03:32 -0500] josephholsten: grr, chef 11 is refusing a cookbook upload with 'Response: Invalid key 'service[elasticsearch]' for metadata.providing'
[2013-03-07 03:09:16 -0500] bluekelp: is there a "no_op" or null resource that can be used to trigger another resource, subject to an only_if clause?
[2013-03-07 03:09:43 -0500] bluekelp: e.g., we want to confirm a file matches as expected sha1 hash before proceeding with other steps in a recipe
[2013-03-07 03:27:16 -0500] josephholsten: woo, I guess I get to spelunk in erlang for this error
[2013-03-07 03:29:30 -0500] bluekelp: josephholsten: is it "providing" or "provides" in the metadata?
[2013-03-07 03:30:05 -0500] josephholsten: the metadata file contains the line provides 'service[elasticsearch]'
[2013-03-07 03:32:08 -0500] bluekelp: sorry i can't help more. i'm only ~3 days into chef myself
[2013-03-07 03:32:20 -0500] josephholsten: thanks for trying
[2013-03-07 03:34:14 -0500] bluekelp: do you know how many clients a server can handle running at once?  a friend of mine was complaining about puppet server not being able to handle many.  i have yet to get more than a test node running - still working on the nominal run_list for our base servers
[2013-03-07 03:35:01 -0500] josephholsten: ok, I found it. anyone know how to run tests in chef_objects?
[2013-03-07 03:35:38 -0500] josephholsten: bluekelp: chef 10 or 11? We're feeling pain with a naively configured chef 10 server with ~300 servers
[2013-03-07 03:36:01 -0500] josephholsten: I've heard chef 11 can handle 10k
[2013-03-07 03:36:12 -0500] josephholsten: which is exactly why I'm trying to migrate
[2013-03-07 03:36:14 -0500] bluekelp: 11. and i'm sure ours is setup naively
[2013-03-07 03:42:19 -0500] jtimberman: josephholsten: the provides part of metadata isn't used, enforced or otherwise implemented.
[2013-03-07 03:42:27 -0500] jtimberman: so i'd just remove that line.
[2013-03-07 03:42:37 -0500] jtimberman: or, if you want it there for future things, comment out :)
[2013-03-07 03:43:55 -0500] jtimberman: bluekelp: it's less the number of clients and more the number of converges aggregate over time that is the factor.
[2013-03-07 03:44:33 -0500] jtimberman: bluekelp: i don't have exact metrics for nodes per chef server or what hardware you would need.
[2013-03-07 03:44:45 -0500] jtimberman: but what's your current hardware and number of nodes?
[2013-03-07 03:44:49 -0500] bluekelp: jtimberman: how much work does the server do, other than updating client info?
[2013-03-07 03:45:40 -0500] bluekelp: jtimberman: it's an EC2 instance, probably not too beefy, atm.  i'm in the process of translating our bash scripts into chef (for deploy, system setup, etc.).
[2013-03-07 03:46:16 -0500] bluekelp: i don't know how many nodes we'll have - we're looking to scale out so potentially a few hundred semi-near term.  not too large
[2013-03-07 03:48:26 -0500] josephholsten: jtimberman: I guess we should let seth know that provides isn't enforced: https://github.com/opscode/chef_objects/blame/master/test/chef_cookbook_tests.erl#L162
[2013-03-07 03:49:08 -0500] josephholsten: I'll probably just comment it out, but I'm going to try to get a test for this hacked out
[2013-03-07 03:49:18 -0500] jtimberman: bluekelp: the server doesn't do a lot of work really. it's a publishing service that provides policy and data to nodes.
[2013-03-07 03:50:49 -0500] jtimberman: bluekelp: an m1.large is probably suitable
[2013-03-07 03:51:17 -0500] bluekelp: we might go the solo route if server is an issue but i'd like to be able to query/search nodes - that geeks me out
[2013-03-07 03:51:33 -0500] josephholsten: bluekelp: have you considered hosted?
[2013-03-07 03:51:47 -0500] bluekelp: ok cool.  yeah i didn't think the server did much. sounded like it maybe did more in puppet land
[2013-03-07 03:52:18 -0500] jtimberman: bluekelp: search is badass :)
[2013-03-07 03:52:19 -0500] josephholsten: if you're in aws, i'm guessing you don't have the inside-the-firewall issues some folks have
[2013-03-07 03:52:28 -0500] bluekelp: josephholsten: we have.  not sure where we'll end up. a co-worker followed a tutorial to get a server running but not sure what we'll do when we go live with it
[2013-03-07 03:52:53 -0500] josephholsten: (unlike jtimberman, I don't work for opscode. I'm pimping it because it's useful)
[2013-03-07 03:53:40 -0500] bluekelp: i'm so excited about search, and being able to build our nagios configs, properties files (cassandra seeds, etc.) from it, etc., that i wet myself a little when i think of it
[2013-03-07 03:53:56 -0500] jtimberman: bluekelp: well, www.ec2instances.info says an m1.large will cost $172.80 in instance cost alone.
[2013-03-07 03:54:13 -0500] bluekelp: heh.  i'm not opposed to hosted.  it's not my money and it'll let us concentrate on using rather than administering yet another piece of infra
[2013-03-07 03:54:25 -0500] jtimberman: that doesn't count the time and energy in maintaining the chef server (making it HA if required for your infra, dealing with potential ec2 issues etc :D
[2013-03-07 03:54:34 -0500] jtimberman: exactly the argument ;)
[2013-03-07 03:54:41 -0500] jtimberman: josephholsten: <3
[2013-03-07 03:54:49 -0500] bluekelp: we're spending much more than that right now for our instances.  i don't think hosting costs will be our cash-slayer
[2013-03-07 03:55:04 -0500] josephholsten: anyone know why my chef_objects build is dying from a missing ~/.dialyzer_plt?
[2013-03-07 03:55:14 -0500] jtimberman: josephholsten: re that providing test, i don't know. my understanding that only the dependency and version are relevant in metadata.
[2013-03-07 03:55:35 -0500] jtimberman: and i don't know about chef_objects build failing
[2013-03-07 03:56:44 -0500] josephholsten: aww, I was hoping I could get my first patch into an erlang repo today
[2013-03-07 03:57:38 -0500] bmoritz: jtimberman: do you know why the apt repo isn't building past 10.18?
[2013-03-07 03:57:59 -0500] jtimberman: bmoritz: because we haven't built and published newer packages there yet.
[2013-03-07 03:58:31 -0500] jtimberman: bmoritz: i don't have an eta.
[2013-03-07 03:58:39 -0500] bmoritz: oh, I thought it was automated.  can I help?
[2013-03-07 03:59:04 -0500] jtimberman: we're building and recommending the 'omnibus' package for both server and client use.
[2013-03-07 03:59:13 -0500] jtimberman: which is automated
[2013-03-07 03:59:14 -0500] jtimberman: :)
[2013-03-07 03:59:17 -0500] bmoritz: for 10.x?
[2013-03-07 03:59:23 -0500] jtimberman: yes
[2013-03-07 03:59:45 -0500] bmoritz: I would rather switch to your best practice then.. thanks
[2013-03-07 04:00:09 -0500] jtimberman: :)
[2013-03-07 04:00:17 -0500] josephholsten: hmm, chef_objects tickets: in jira or github issues?
[2013-03-07 04:00:25 -0500] jtimberman: josephholsten: jira
[2013-03-07 04:00:35 -0500] jtimberman: chef server component
[2013-03-07 04:01:45 -0500] jtimberman: bmoritz: fwiw, omnibus has its own  installation of ruby (v 1.9.3p286), and doesn't worry about the upstream distro's changes to the components it needs.
[2013-03-07 04:02:48 -0500] bmoritz: jtimberman: oh you don't have to sell me on the benies.  I just thought apt was easier to manage.  That was before I found omnibus_updater
[2013-03-07 04:03:44 -0500] jtimberman: :D
[2013-03-07 04:04:02 -0500] jtimberman: bmoritz: well, if you have your own apt repository you could always grab the deb and stick it on your repo, too.
[2013-03-07 04:04:31 -0500] jtimberman: which i'd probably totally do :)
[2013-03-07 04:04:35 -0500] bmoritz: omnibus wasn't always deb right?
[2013-03-07 04:05:01 -0500] bmoritz: I think I was evaluating before the switch
[2013-03-07 04:05:32 -0500] bluekelp: is it a bug that the execute resource's only_if is called even if its action is :nothing?
[2013-03-07 04:06:39 -0500] bluekelp: i'm running a slow checksum to only deploy (java server) if checksum matches the blessed version but the only_if is run twice (once when triggered by the remote_file resource and again when it's encountered in it's :nothing action no-op form
[2013-03-07 04:08:55 -0500] bluekelp: seems like this is a bug but it's also pretty fundamental to the resource workflow so maybe it's desirable
[2013-03-07 04:09:14 -0500] aruntomar: bluekelp: plz paste the code to gist
[2013-03-07 04:16:06 -0500] bluekelp: aruntomar: https://gist.github.com/anonymous/71718be6126c2992ac4f
[2013-03-07 04:21:25 -0500] aruntomar: bluekelp: i haven't faced this issue. i assume you are using chef 11. if gives a very good description of why a resource was run or skipped etc.
[2013-03-07 04:28:33 -0500] bluekelp:   * execute[deploy] action run (skipped due to only_if)
[2013-03-07 04:28:33 -0500] bluekelp:   * execute[deploy] action nothing (skipped due to only_if)
[2013-03-07 04:30:03 -0500] bluekelp: i don't know the internals of resources and workflow so not sure this is a bug - but it does slow things w/the way i have the recipe written. not sure how to avoid this other than a custom resource i write (hack?)
[2013-03-07 04:35:58 -0500] aruntomar: bluekelp: if you'll see the examples at http://docs.opscode.com/resource_execute.html. there, if you are using action :nothing, you'll not find "only_if" block.
[2013-03-07 04:40:35 -0500] bluekelp: yeah. but in my case i need to protect against the case where the remote_file resource fires with a non-approved file.  i haven't thought of another way to organize things to prevent either the double only_if call, or the execute resource being fired for an incorrect checksum
[2013-03-07 04:49:36 -0500] freezey: trying to figure out howto search this databag info and pull it into a recipe for a template.. http://pastie.org/private/jn38ny3sai0diidtxtdq
[2013-03-07 04:57:22 -0500] aruntomar: freezey: http://docs.opscode.com/dsl_recipe_method_search.html
[2013-03-07 05:00:22 -0500] freezey: hm
[2013-03-07 05:01:35 -0500] freezey: aruntomar: thats the best way?
[2013-03-07 05:02:11 -0500] freezey: you couldnt do something like info = data_bag_item('whatever','something')['environment'].include or .find
[2013-03-07 05:02:13 -0500] freezey: something like that?
[2013-03-07 05:03:54 -0500] aruntomar: freezey: yes, i believe you could do it this way also
[2013-03-07 05:04:35 -0500] freezey: yeah i figured that also
[2013-03-07 05:04:35 -0500] freezey: heh
[2013-03-07 05:09:32 -0500] jroh`: anyone know if there's a way to set a nil in a json role? {"x":null} doesn't work even though that should be valid json to get converted to a ruby nil
[2013-03-07 05:12:39 -0500] freezey: !q transactional_stats q05
[2013-03-07 05:15:27 -0500] josephholsten: somehow I doubt seth falcon is around? I need to figure out how these dialyzer plt files work
[2013-03-07 05:18:14 -0500] aruntomar: jroh`: what u r saying is correct. if should work. try, creating a ruby role and then upload it to chef server, maybe that will work.
[2013-03-07 05:20:40 -0500] jroh`: I think I'm just going to test for empty? and use an empty string for now
[2013-03-07 06:57:18 -0500] josephholsten: is there a best repl for erlang?
[2013-03-07 06:59:16 -0500] erratic: I'm going back home in time and I am going through my phone number for your business is going on here for more details and I am going through my phone number for your business is going on here for more details and I am going through my phone number for your business is going on here for more details and
[2013-03-07 06:59:34 -0500] Guest58641: The first one is the most part I have to do it in a while back but it was the last few days later I am not a problem for me and I have to do it in a while back but it was the last few days later and I will be a good idea to have a great day and night and day out of the most important thing is that the company is a
[2013-03-07 07:00:44 -0500] Guest58641: How is the most part I have to do it in a while back but it was the last few days later I am going through my phone number for your business is going on in the morning and evening of the most important thing is that the company is a big difference is between us that you have a lot to be able and I have to do it in a while back but it was really nice guy is the first place I could get it done before we leave on Saturday morning at lea
[2013-03-07 07:00:48 -0500] Guest58641: Lool
[2013-03-07 07:01:20 -0500] Guest58641: Wtf
[2013-03-07 07:01:46 -0500] Guest58641: Where do these suggestions come from
[2013-03-07 07:02:47 -0500] Guest58641: Thanks for sharing this week and the kids to the next couple of things you should know by now that the best way for a long way in a couple
[2013-03-07 07:02:53 -0500] Guest58641: K!
[2013-03-07 07:02:57 -0500] Guest58641: Lol
[2013-03-07 07:03:53 -0500] denniswisnia: hey guys!
[2013-03-07 07:04:05 -0500] Guest58641: This is a great time to get a chance to be on your website but I'm sure the other hand is going on in your home or office
[2013-03-07 07:04:11 -0500] Guest58641: Lol
[2013-03-07 07:05:01 -0500] denniswisnia: https://github.com/opscode-cookbooks/application - how did I configure an private github repo on it?
[2013-03-07 07:05:08 -0500] denniswisnia: using private chef
[2013-03-07 07:05:17 -0500] julienphalip: Hi there. I'm having some issue with the 'template' resource in a Vagrant/CentOS VM. Here are the relevant details from the traceback: http://dpaste.org/7ffko/
[2013-03-07 07:05:50 -0500] Guest58641: Video ouija with my galaxy note 2 and stylus ...on irc. It is a great deal of time and effort to make it a great deal to you
[2013-03-07 07:06:07 -0500] julienphalip: What's strange is that the target wsgi.py file actually does get created.
[2013-03-07 07:09:45 -0500] coderanger: julienphalip: Thanks for the report, let me know if they come back
[2013-03-07 07:10:26 -0500] julienphalip: coderanger: No worries!
[2013-03-07 07:16:50 -0500] julienphalip: It appears that all files in the repository, as seen from inside the Vagrant VM, are owned by the 'games' user. Perhaps this is why the 'template' resource fails as it uses 'vagrant' as the 'owner' parameter?
[2013-03-07 07:29:56 -0500] st0ne2thedge: exit
[2013-03-07 07:34:30 -0500] julienphalip: If I remove the 'user' and 'group' attributes from the 'template' resource, it will work on my Vagrant VM. However in production the created wsgi.py file will be owned by root, which then generates other kinds of permission issues...
[2013-03-07 07:35:17 -0500] julienphalip: Does anyone have an idea about how to ensure the 'user' and 'group' attribute will work for the 'template' resource inside the Vagrant VM?
[2013-03-07 07:35:29 -0500] coderanger: julienphalip: This is on the vbox fs share, right?
[2013-03-07 07:35:45 -0500] julienphalip: Yes that's right.
[2013-03-07 07:35:53 -0500] coderanger: Its kind of shitshow :(
[2013-03-07 07:36:01 -0500] coderanger: vboxfs doesn't really grok users
[2013-03-07 07:36:02 -0500] julienphalip: All files appear to be owned by a user called 'games'....
[2013-03-07 07:36:25 -0500] coderanger: That would be the UID from the host machine of your user mapped into the VM I bet
[2013-03-07 07:37:10 -0500] coderanger: chmod also basically doesn't work on vboxfs
[2013-03-07 07:37:32 -0500] coderanger: The default in vagrant should be to setup the share such that it is all 777
[2013-03-07 07:37:57 -0500] coderanger: if you `man mount.vboxfs` you should be able to see some of the overrides
[2013-03-07 07:39:02 -0500] julienphalip: coderanger: That command doesn't seem to work. Is there a typo?
[2013-03-07 07:39:59 -0500] coderanger: Sigh, looks like vbox doesn't ship manpages anymore
[2013-03-07 07:40:10 -0500] coderanger: http://manpages.ubuntu.com/manpages/maverick/man8/mount.vboxsf.8.html
[2013-03-07 07:40:11 -0500] coderanger: :)
[2013-03-07 07:42:35 -0500] julienphalip: coderanger: Oh, I just found that: https://github.com/mitchellh/vagrant/issues/897#issuecomment-5336194
[2013-03-07 07:42:43 -0500] julienphalip: coderanger: G'night!
[2013-03-07 07:45:21 -0500] julienphalip: coderanger: For the record, also found this: http://serverfault.com/a/399230
[2013-03-07 08:00:14 -0500] st0ne2thedge: I am wondering what the opscode search rule does in the recipe cliemt.rb fil
[2013-03-07 08:01:27 -0500] st0ne2thedge: of the Nagios cookbook by opscode
[2013-03-07 08:01:33 -0500] st0ne2thedge: forgot to mention that :D
[2013-03-07 08:18:08 -0500] null_route: Hey guys - I'm having issues with the mdadm provider ( https://github.com/opscode/chef/blob/master/lib/chef/provider/mdadm.rb ) . I don't see that "load_current_resource" is ever called, so it tries to re-create my metadevices each time
[2013-03-07 08:51:39 -0500] denniswisnia: anyone using opscode-application cookbook to deploy anything from github?
[2013-03-07 09:01:27 -0500] null_route: found my issue - the "name" parameter to the mdadm resource needs to be a full path - ie /dev/md/mdData
[2013-03-07 10:00:21 -0500] cpasmoi: Hi !
[2013-03-07 10:00:52 -0500] cpasmoi: Is there a way in chef to catch the string return by a execute command bloc ?
[2013-03-07 10:01:13 -0500] cpasmoi: like `ps ux|wc -l`
[2013-03-07 10:02:01 -0500] st0ne2thedge: cpasmoi: there is a pretty easy way
[2013-03-07 10:02:47 -0500] st0ne2thedge: cpasmoi: require 'chef/mixin/shell_out'
[2013-03-07 10:03:09 -0500] st0ne2thedge: cpasmoi: You'll need the mixin library shell_out
[2013-03-07 10:04:02 -0500] st0ne2thedge: cpasmoi: let me link you an example i maed
[2013-03-07 10:05:56 -0500] cpasmoi: oh, you're saving me !
[2013-03-07 10:07:00 -0500] st0ne2thedge: cpasmoi: http://pastebin.com/EtgYMCP5
[2013-03-07 10:07:00 -0500] cpasmoi: my former colleague used a system("ps ux|grep patter |wc -l>/tmp/tmc_proc_nb") and then a File.open("/tmp/tmc_proc_nb")
[2013-03-07 10:07:08 -0500] cpasmoi: I'm cleaning this =)
[2013-03-07 10:07:11 -0500] cpasmoi: thanks
[2013-03-07 10:07:19 -0500] st0ne2thedge: cpasmoi: there you go, opening files is bad practice ^^
[2013-03-07 10:07:58 -0500] cpasmoi: yeah...
[2013-03-07 10:14:14 -0500] cpasmoi: st0ne2thedge, where should I install the lib ? with cookbooks or on the client node ?
[2013-03-07 10:15:13 -0500] cpasmoi: oh neverminde
[2013-03-07 10:15:24 -0500] cpasmoi: nevermind, I see it's a debian package
[2013-03-07 10:15:30 -0500] mixandgo: how do I override a cookbook value ? I need to limit the number of nginx processes (less than what the cookbok provides)
[2013-03-07 10:15:45 -0500] cpasmoi: guess I just need to install it in the recipe
[2013-03-07 10:16:06 -0500] cpasmoi: mixandgo, with the override_attributes in the role definition ?
[2013-03-07 10:16:56 -0500] mixandgo: cpasmoi: whats the role definition ? the section in the node.json ?
[2013-03-07 10:17:55 -0500] mixandgo: can you give me an example ?
[2013-03-07 10:25:13 -0500] alex___: is it possible to provide arguments to a ruby block
[2013-03-07 10:25:14 -0500] alex___: ?
[2013-03-07 10:27:13 -0500] haan: Hello!
[2013-03-07 10:27:26 -0500] haan: Is anyone awake here?
[2013-03-07 10:27:30 -0500] ranjibd: yo
[2013-03-07 10:27:39 -0500] ranjibd: alex___: not that im aware of
[2013-03-07 10:27:41 -0500] alex___: me
[2013-03-07 10:27:42 -0500] alex___: :P
[2013-03-07 10:27:47 -0500] haan: :-)
[2013-03-07 10:28:07 -0500] ranjibd: alex___: you can always access the recipe's instance/local variables
[2013-03-07 10:29:16 -0500] haan: I'm running into issues with my existing recipes after adding a new node... The node is ubuntu 12.10 instead of 12.04, and chef is 11.04 instead of 10.16.
[2013-03-07 10:29:48 -0500] haan: I'm using chef-solo, and it's throwing up exceptions of the kind "uninitialized constant Opscode::Mysql"
[2013-03-07 10:31:03 -0500] haan: the recipes run fine on the 12.04 node; using log-level debug, I can see that the dependencies are loaded, but they somehow don't register under ::Chef::Recipes::Opscode
[2013-03-07 10:31:27 -0500] alex___: ranjibd: instance variables?
[2013-03-07 10:31:32 -0500] haan: anyone any ideas?
[2013-03-07 10:31:44 -0500] alex___: not really
[2013-03-07 10:32:13 -0500] cpasmoi: mixandgo, yes, in the json role file. You should have a '"override_attributes": {}, ' object in here
[2013-03-07 10:32:17 -0500] alex___: it means your module / class Mysql is not defined
[2013-03-07 10:32:18 -0500] ranjibd: haan: have you included the mysql recipe?
[2013-03-07 10:33:11 -0500] ranjibd: alex___: yeah.. also you can access any node attributes
[2013-03-07 10:33:25 -0500] ranjibd: so in your recipe you can do node.set[:some]=x
[2013-03-07 10:33:41 -0500] ranjibd: and in your ruby_block you can access that back as node[:some]
[2013-03-07 10:33:45 -0500] haan: ranjibd: well, it's the same recipe that runs fine on 12.04
[2013-03-07 10:33:53 -0500] ranjibd: alex___: does that solve your issue?
[2013-03-07 10:34:39 -0500] ranjibd: haan: the order in which recipes are loaded has changed (for a good reason, to attain a deterministic & intuitive way)
[2013-03-07 10:34:47 -0500] cpasmoi: st0ne2thedge, unfortunately, mixlib::shellout doesn't exist for centos5
[2013-03-07 10:34:47 -0500] ranjibd: this might be due to that fact
[2013-03-07 10:34:48 -0500] alex___: a little but i dont want to really set attributes
[2013-03-07 10:34:53 -0500] ranjibd: but im not sure
[2013-03-07 10:35:01 -0500] cpasmoi: (or my yum / gem are not that good)
[2013-03-07 10:35:34 -0500] alex___: i want to use a variable that disapairs after running the recipe
[2013-03-07 10:35:41 -0500] haan: ranjibd: thanks, I'll try the 10 -> 11 changelog then?
[2013-03-07 10:35:43 -0500] ranjibd: haan: so try including the mysql or load the library in the recipe you are getting this issue
[2013-03-07 10:35:51 -0500] ranjibd: haan: yes
[2013-03-07 10:36:06 -0500] alex___: something like @variable does in classes
[2013-03-07 10:36:14 -0500] ranjibd: alex___: you are passing messages between two resources..
[2013-03-07 10:36:28 -0500] alex___: how?
[2013-03-07 10:36:44 -0500] ranjibd: wher you'll compute the value?
[2013-03-07 10:37:03 -0500] ranjibd: either inside another resource ... or during the compile phase
[2013-03-07 10:37:06 -0500] alex___: uhm 2 sec
[2013-03-07 10:37:33 -0500] ranjibd: if you want an elegant way.. you can always make an lwrp.. which take an argument and a block
[2013-03-07 10:38:01 -0500] alex___: inside an other resource
[2013-03-07 10:38:17 -0500] alex___: oke
[2013-03-07 10:38:29 -0500] alex___: i thought that would be an overkill
[2013-03-07 10:39:14 -0500] haan: ranjibd: I've just added 'depends :mysql' to the recipes metadata.rb. The mysql error has now gone (and chef is complaining on the next dependency). So, solved this. Thank you for helping :-)
[2013-03-07 10:39:26 -0500] alex___: i want to make a backup of a file before overriding it with the template resource
[2013-03-07 10:39:29 -0500] alex___: after that
[2013-03-07 10:39:36 -0500] ranjibd: haan: you are welcome
[2013-03-07 10:39:45 -0500] alex___: i want apache to check if the config is valid
[2013-03-07 10:39:54 -0500] alex___: if not restore backup files
[2013-03-07 10:40:17 -0500] ranjibd: alex___: chef backsup all the file/template that it rewrites, before rewriting it, you can control the number of backups.. iirc
[2013-03-07 10:40:30 -0500] alex___: thats true
[2013-03-07 10:40:33 -0500] ranjibd: yeah.. so you can rollback
[2013-03-07 10:40:41 -0500] alex___: but how can i place them back?
[2013-03-07 10:40:47 -0500] alex___: rollback?
[2013-03-07 10:41:21 -0500] alex___: i do only want to rollback the config files used in that recipe
[2013-03-07 10:43:28 -0500] ranjibd: never done it.. so cant tell for sure.. but i guess u can grab it from Chef::Config[:file_cache_path]
[2013-03-07 10:44:56 -0500] amry: hi, anyone notice chef-client -v got error in ruby 2.0.0?
[2013-03-07 10:49:00 -0500] alex___: oke
[2013-03-07 10:55:40 -0500] spheromak: alex___: you are probably better off making the file in a sandboxed location and running your test against it there. then moving it into production after verification
[2013-03-07 10:56:08 -0500] spheromak: or at least that whould be much easier to achiev
[2013-03-07 10:56:15 -0500] aruntomar: amry: r u taking about this error: cannot load such file -- rubygems/format (LoadError)
[2013-03-07 10:56:22 -0500] spheromak: win7
[2013-03-07 10:56:24 -0500] spheromak: wops
[2013-03-07 11:07:01 -0500] alex___: spheromak well i dont have the luxery to create a test apache space and this will be a problem more frequently so i really do want to create a backup if the template overwrites the config file and place it back on faillure
[2013-03-07 11:07:16 -0500] alex___: should not be so difficult right
[2013-03-07 11:07:29 -0500] alex___: as said chef already backups files
[2013-03-07 11:07:31 -0500] spheromak: you will have to write a handler for it
[2013-03-07 11:07:35 -0500] spheromak: yea and theres already a backup
[2013-03-07 11:08:34 -0500] alex___: only thing i need to know is which template resources changed my files and roll them back
[2013-03-07 11:08:46 -0500] alex___: but not files of other recipes
[2013-03-07 11:09:24 -0500] spheromak: yea should be available in a handler
[2013-03-07 11:09:34 -0500] alex___: does the template resource contains a rollback feature?
[2013-03-07 11:10:08 -0500] spheromak: nope
[2013-03-07 11:11:05 -0500] spheromak: you can create a custom lwrp for it prob pretty easy. then you have your template resource call your service resource call your validate  validate can then chose to roll the file back, and then notify a service restart.
[2013-03-07 11:11:19 -0500] spheromak: if you want it in runtime :D
[2013-03-07 11:12:42 -0500] spheromak: or you can do a report handler that runs a validate when the template has taken action, and then can roll it back (but you might have to jumpt thorugh hoops to triger a service restart via chef here. )
[2013-03-07 11:13:59 -0500] spheromak: or extend tempalte https://github.com/opscode/chef/blob/master/lib/chef/provider/template.rb
[2013-03-07 11:14:09 -0500] spheromak: timtowtdi
[2013-03-07 11:14:12 -0500] spheromak: :D
[2013-03-07 11:15:40 -0500] spheromak: you can also look at the deploy resources and see how they implement it. I think with symlink juggling.
[2013-03-07 11:45:29 -0500] f1gjam: hey guys, when running execute and using the command
[2013-03-07 11:45:39 -0500] f1gjam: whats the difference between using %Q or "
[2013-03-07 11:57:58 -0500] mvidner: Hi; does Chef have a concept of telling a provider to handle multiple instances of a resource at once? As in, calling `rpm -U foo bar baz` instead of `rpm -U foo; rpm -U bar; rpm -U baz`
[2013-03-07 12:01:41 -0500] aruntomar: mvidner: you can create an array. loop over it and use the resource you need.
[2013-03-07 12:02:56 -0500] mvidner: that's what I do, but working with the resources individually is inefficient, and in my case the zypper provider has a high latency
[2013-03-07 12:08:09 -0500] f1gjam: hey guys
[2013-03-07 12:08:17 -0500] f1gjam: can anyone help me with my question about %Q
[2013-03-07 12:08:26 -0500] f1gjam: in command vs using just " "
[2013-03-07 12:11:16 -0500] aruntomar: mvidner: i don't that package or rpm resource takes multiple packages.
[2013-03-07 12:12:43 -0500] prognostikos: so I've inherited a chef server (10.12.0) that has been sitting on the open internet (no ssl) for 218 days
[2013-03-07 12:12:48 -0500] prognostikos: how worried should I be?
[2013-03-07 12:13:47 -0500] prognostikos: it's of course unpatched ubuntu 10.04.4
[2013-03-07 12:14:36 -0500] aruntomar: prognostikos: if u want to secure it, just block 4040 or filter 4040 if u need to access the web ui
[2013-03-07 12:15:22 -0500] aruntomar: prognostikos: all api communication happens on 4000 on the earlier chef, and that uses rsa key pair, so that shouldn't be a problem.
[2013-03-07 12:16:04 -0500] prognostikos: aruntomar: oh I will. I'm just wondering how open it has been...can see that e.g. amqp is listening on all interfaces, etc.
[2013-03-07 12:16:17 -0500] denniswisnia: does anyone use the nginx und and the nginxapplications cookbooks? Dont understand how I use it in the right way
[2013-03-07 12:16:50 -0500] aruntomar: prognostikos: so you can block or filter all ports. only 4000 is needed by chef-clients to communicate with chef server using the api.
[2013-03-07 12:17:24 -0500] gamafranco: h
[2013-03-07 12:17:25 -0500] gamafranco: hi
[2013-03-07 12:17:29 -0500] aruntomar: denniswisnia: we r using nginx cookbooks. what's up?
[2013-03-07 12:17:44 -0500] gamafranco: has anyone been able to install RVM without breaking chef on vagrant?
[2013-03-07 12:18:03 -0500] denniswisnia: aruntomar: i want to configure with chef in the front an loadbalancer and two webnodes
[2013-03-07 12:18:38 -0500] denniswisnia: aruntomar: configured with the nginx upstream
[2013-03-07 12:19:10 -0500] aruntomar: denniswisnia: k, so what's the issue?
[2013-03-07 12:19:24 -0500] gamafranco: I'm installing RVM https://github.com/fnichol/chef-rvm, but it breaks chef :|
[2013-03-07 12:19:43 -0500] denniswisnia: aruntomar: dont know how i configure an site with the cookbooks
[2013-03-07 12:20:38 -0500] aruntomar: gamafranco: haven't used it on vagrant. but i've installed rvm successfully on my production servers using rvm cookbooks. though, i need to look into which cookbook i used.
[2013-03-07 12:21:09 -0500] gamafranco: aruntomar: can you confirm the book? and which recipe is used?
[2013-03-07 12:21:28 -0500] gamafranco: this cookbook has one recipe just for vagrant, but it still breaks chef
[2013-03-07 12:22:19 -0500] aruntomar: gamafranco: https://github.com/fnichol/chef-rvm.git
[2013-03-07 12:22:28 -0500] gamafranco: yeah, that's the one I use
[2013-03-07 12:22:40 -0500] gamafranco: which recipe? rvm::system?
[2013-03-07 12:23:06 -0500] aruntomar: gamafranco: my requirement was to install rvm on per user basis
[2013-03-07 12:23:18 -0500] aruntomar: gamafranco: haven't tried the system one
[2013-03-07 12:23:57 -0500] gamafranco: ok
[2013-03-07 12:24:12 -0500] aruntomar: denniswisnia: create a template for nginx virtualhost. then use "nginx_site" to enable it.
[2013-03-07 12:24:25 -0500] gamafranco: I should try per user basis too then. Thanks aruntomar.
[2013-03-07 12:24:38 -0500] aruntomar: denniswisnia: you are using nginx as the loadbalancer or haproxy
[2013-03-07 12:24:38 -0500] alex___: spheromak well thanks for your input i will take a look at the options
[2013-03-07 12:25:02 -0500] denniswisnia: yes, want to use nginx as loadbalancer.
[2013-03-07 12:25:04 -0500] emanuelez: hello. is there any way to tell berkshelf to only upload the cookbook being worked on to the chef server? it's quite a waste of time to always upload cookbooks that did not change at every provisioning
[2013-03-07 12:25:14 -0500] smt: need help in this http://community.opscode.com/questions/274. I am on ubuntu 12.04
[2013-03-07 12:26:41 -0500] aruntomar: denniswisnia: nginx is an excellent web & proxy server. it can do lb also, but mostly people use haproxy for lb requirements.
[2013-03-07 12:28:16 -0500] prognostikos: aruntomar: I know how to secure it. My question is what bad things could have happened while it was insecure. Is it "just" that passwords could have been sniffed from webui usage? Or are there more fundamental vulnerabilites that I should consider?
[2013-03-07 12:29:00 -0500] denniswisnia: aruntomar: yes, sure. Really like it too. But actually, I want to design an full chef managed infrastructure with LB(Nginx LB), webnodes (Nginx with php-fpm) and database (myysql). Looking now for great cookbooks. But I dont understand the following cookbook: https://github.com/opscode-cookbooks/application_nginx
[2013-03-07 12:30:18 -0500] gamafranco: aruntomar: are you considering varnish too?
[2013-03-07 12:31:04 -0500] aruntomar: prognostikos: if you get access to webui admin account, you can almost do everything. view databags for information, if not encrypted and modify run_list of nodes, everything.
[2013-03-07 12:31:51 -0500] aruntomar: gamafranco: yes, i'll looking into varnish as well.
[2013-03-07 12:32:51 -0500] aruntomar: denniswisnia: i have multiple servers distributed in multiple zones behind lb using nginx+fpm.
[2013-03-07 12:33:32 -0500] denniswisnia: aruntomar: with an own written cookbook?
[2013-03-07 12:34:39 -0500] aruntomar: smt: i haven't faced the issue u've mentioned. here's my blog on my chef server installation: may be useful to you. http://www.linuxguy.in/how-to-install-and-configure-open-source-chef-server-11/
[2013-03-07 12:35:03 -0500] aruntomar: denniswisnia: i'm using community nginx cookbook. rest my own.
[2013-03-07 12:35:55 -0500] aruntomar: denniswisnia: my current infra is on aws, so we are using ELB for lb, but if i've to use software lb, then i would prefer haproxy.
[2013-03-07 12:36:04 -0500] smt: aruntomar: I was referring your blog :) http://www.linuxguy.in/tag/chef-11/
[2013-03-07 12:36:28 -0500] aruntomar: smt: :)
[2013-03-07 12:36:58 -0500] smt: aruntomar: I am facing problem in Step 4: Reconfigure your chef server
[2013-03-07 12:37:03 -0500] aruntomar: smt: what's ur server config
[2013-03-07 12:37:54 -0500] aruntomar: smt: i tried with 512 mb ram, and it was not working properly, so i increased it to 1 gig and everything is working perfectly.
[2013-03-07 12:38:58 -0500] fabio_: hello, im trying to upload the database cookbook to create a postgresql user but says this:
[2013-03-07 12:38:59 -0500] fabio_: Cookbook database depends on cookbook 'mysql' version '>= 1.3.0',
[2013-03-07 12:39:16 -0500] fabio_: I dont want any mysql in my server, can I remove the depend in the metadata
[2013-03-07 12:39:52 -0500] aruntomar: fabio_: it'll not install mysql on your server
[2013-03-07 12:40:16 -0500] aruntomar: fabio_: it's a dependency, b'cas database cookbook works with mysql, postgres and few other db's.
[2013-03-07 12:40:40 -0500] aruntomar: fabio_: so just upload the mysql community cookbook to your chef server
[2013-03-07 12:40:58 -0500] fabio_: I removed the dependency and now it upload
[2013-03-07 12:41:19 -0500] fabio_: then Im using only database::postgresql in my runlist
[2013-03-07 12:41:24 -0500] fabio_: im doing clean?
[2013-03-07 12:42:25 -0500] smt: aruntomar: ram is more than 1 gig
[2013-03-07 12:43:32 -0500] smt: aruntomar: Error executing action `run` on resource
[2013-03-07 12:43:38 -0500] aruntomar: fabio_: it's not recommended to modify the community cookbook directly, unless you want to send a pull request with the modifications. b'cas if later on you want to download and use the latest version of it, then you'll have to modify it again.
[2013-03-07 12:45:30 -0500] aruntomar: smt: is it a new server?
[2013-03-07 12:45:49 -0500] aruntomar: smt: or do you have nodes , cb etc
[2013-03-07 12:46:42 -0500] aruntomar: smt: chef-server-ctl cleanse and then chef-server-ctl reconfigure
[2013-03-07 12:46:53 -0500] aruntomar: smt: remember: cleanse
[2013-03-07 12:46:53 -0500] aruntomar:   Delete *all* private chef data, and start from scratch.
[2013-03-07 12:50:49 -0500] gamafranco: arutomar: I found the problem with RVM
[2013-03-07 12:50:58 -0500] gamafranco: it depends on http://community.opscode.com/cookbooks/chef_gem
[2013-03-07 12:51:17 -0500] gamafranco: but if you run it without having the cookbook on the repo, it doesn't complaint
[2013-03-07 12:51:21 -0500] gamafranco: and breaks chef
[2013-03-07 12:51:22 -0500] gamafranco: :|
[2013-03-07 12:54:38 -0500] aruntomar: gamafranco: k, good to know. i haven't faced the issue though. may be b'cas i'm using the latest version of chef-clients
[2013-03-07 12:56:24 -0500] aruntomar: denniswisnia: i've not used the nginx application cookbook you mentioned, so can't say much about it.
[2013-03-07 13:04:30 -0500] smt: aruntomar: did cleanse but still not working. I thing there is some problem with  rabbit@localhost.pid
[2013-03-07 13:04:58 -0500] aruntomar: smt: try stopping rabbitmq
[2013-03-07 13:05:25 -0500] aruntomar: smt: chef-server-ctl stop
[2013-03-07 13:06:21 -0500] aruntomar: smt: stop all the services and then reconfigure
[2013-03-07 13:06:41 -0500] aruntomar: smt: still if that's a problem, destroy the instance, create a new one, and try again :0
[2013-03-07 13:13:48 -0500] smt: aruntomar: reconfigure is starting rabbitmq and thats why its again failing
[2013-03-07 13:20:55 -0500] erthad: hiall
[2013-03-07 13:21:11 -0500] erthad: does the 'ignore_failure true' work on cookbook_file ?
[2013-03-07 13:21:51 -0500] erthad: chef still seems to crash on cookbook_file resources with nonexistent source file with ignore_failure set to true
[2013-03-07 13:38:20 -0500] RJ2: i signed up for free hosted chef, can't see how to download the myorg-validator.pem file
[2013-03-07 13:38:37 -0500] RJ2: clicking "regenerate validation key" under orgs gives the error: "Permission denied. You do not have permission to regenerate that organization key. (Error 32032)"
[2013-03-07 13:39:36 -0500] RJ2: hm, maybe i neglected to download it when i created the org. guess i'll recreate the org..
[2013-03-07 13:40:03 -0500] pikesley: I wrote some profanity in a comment in a cookbook yesterday. I just accidentally uncommented it. Hence: NameError: uninitialized constant Chef::Recipe::FUCKED
[2013-03-07 13:40:38 -0500] dn2k: lol
[2013-03-07 13:43:01 -0500] RJ2: hmm can't delete the org either
[2013-03-07 14:01:32 -0500] fabio_: hello, im trying to install postgresql cookbook in a ubuntu 12.04 instance with libpq-dev installed
[2013-03-07 14:01:38 -0500] fabio_: but the gem pg fails
[2013-03-07 14:01:45 -0500] fabio_: anyone knows this error?
[2013-03-07 14:03:37 -0500] withnale: Hello. Is there a setting in chef to perform a node update but not perform a cookbook run? I thought --whyrun might do it but it doesn't do a node update
[2013-03-07 14:06:00 -0500] leifmadsen: withnale: could you do a chef-client run with -o and specify either no or a minimal set of cookbooks to run?
[2013-03-07 14:06:09 -0500] leifmadsen: that should do the node updates... (I've not tried this)
[2013-03-07 14:20:59 -0500] tabakhase: so, ive read about 123243 blogs asking "chef OR puppet" - and still dont have an idea ;D - 'we' are currently 52 hosts, one quite big webapplication with multiple side services that get threathed in different  ways - say for example there is the maindb cluster, the generic web cluster, but also some boxes for the api that might require additional things/diffrent settings
[2013-03-07 14:21:35 -0500] tabakhase: so, still kindof lost... what i know is that vagrant  is 'loads to small' so im left with chef/puppet
[2013-03-07 14:21:44 -0500] tabakhase: any personal recos?
[2013-03-07 14:23:12 -0500] cheeseplus: either one _can_ fit that setup
[2013-03-07 14:23:24 -0500] tabakhase: Also: they say they drive diffrently? one is "i need to create the folder /test, its there already, so skip" while the other is more like "there should be a folder /test, if not fix that problem by creating it" - did i got that right?
[2013-03-07 14:24:21 -0500] leifmadsen: tabakhase: vagrant uses chef and/or puppet... it is a wrapper for spinning up VMs and provisioning them. It isn't at the same level as Chef or Puppet -- it works in conjunction with./
[2013-03-07 14:25:02 -0500] leifmadsen: basically biggest difference from what I can see, is chef uses a more native ruby language to configure, and puppet uses its own simplified language that can sometimes make things easier or harder
[2013-03-07 14:25:12 -0500] cheeseplus: ^
[2013-03-07 14:25:13 -0500] leifmadsen: I started with puppet, moved to chef after I changed jobs
[2013-03-07 14:25:28 -0500] leifmadsen: but use ruby as the language (ignoring chef 11)
[2013-03-07 14:25:57 -0500] leifmadsen: s/language/language that the system is built with
[2013-03-07 14:26:18 -0500] leifmadsen: honestly, if you don't have time to try both out and figure out what you prefer, flip a coin and you'll be fine
[2013-03-07 14:26:38 -0500] leifmadsen: otherwise the way to figure out what to use is to evaluate both
[2013-03-07 14:28:01 -0500] tabakhase: thats the answer i feared most^^ - but sadly its the correct one...
[2013-03-07 14:29:30 -0500] tabakhase: im just about starting a new 'clustertree', host1 chef, host2 puppet, configure all, kill the hated and let it rebuild by the loved...
[2013-03-07 14:30:56 -0500] withnale: leifmadsen: how do you specify no cookbooks? I've tried -o ""  and it doesn't like it.
[2013-03-07 14:31:05 -0500] leifmadsen: withnale: not sure, it was a crapshoot answer
[2013-03-07 14:31:12 -0500] leifmadsen: create a cookbook that does nothing :)
[2013-03-07 14:31:31 -0500] leifmadsen: tabakhase: you're in #chef, so I'm going to say, you should use Chef
[2013-03-07 14:32:13 -0500] leifmadsen: I started with puppet and helped found github.com/kickstandproject (which my friend pabelanger has worked very hard on). I migrated to chef and have been using it well over a year now
[2013-03-07 14:33:43 -0500] erthad: is there a way not only ignore_failure on resource but also make it hide the error also?
[2013-03-07 14:35:19 -0500] erthad: no, there is not as I see from code :-(
[2013-03-07 14:35:55 -0500] paulmoor1ng: erthad: not really, unless you want to wrap the whole resource in an if so it's never run to being with
[2013-03-07 14:36:44 -0500] erthad: paulmoor1ng: I can't do that as I want to process a template resource if there is any source for it in a cookbook
[2013-03-07 14:37:16 -0500] tabakhase: leifmadsen i think your upvote for the "TRY!" actually is what ive been looking for...
[2013-03-07 14:37:31 -0500] erthad: iterate over all included recipes and create firewall rules for all of them if there is any defined for it
[2013-03-07 14:37:36 -0500] leifmadsen: my answer for most things is, "did you try that?"
[2013-03-07 14:37:37 -0500] leifmadsen: :)
[2013-03-07 14:38:10 -0500] paulmoor1ng: tabakhase: sign up for a free hosted Chef account, it's a pretty pain free way to play with Chef
[2013-03-07 14:38:15 -0500] leifmadsen: erthad: what we do actually is create separate files and dump them into iptables.d so that we don't have to create the rules per se
[2013-03-07 14:38:25 -0500] leifmadsen: then the cookbooks just add their own firewall rules and don't conflict with other cookbooks
[2013-03-07 14:39:10 -0500] erthad: leifmadsen: yes, I was going to do the same but trigger the rules creation from the cookbook with firewall processing but not from the cookbook holding a s ervice
[2013-03-07 14:41:22 -0500] tabakhase: biggest bunner is pricing based on nodecount...
[2013-03-07 14:46:51 -0500] Azrael: quick question about the chef wiki (main documentation).  why does it, in some subsections, take you to instead to docs.opscode.com... and in other cases not?
[2013-03-07 14:48:24 -0500] cwj: Azrael: theres been a transition under way from wiki to docs site for some time now. it seems to me that sections of the wiki being redirected to the docs site is a recent phase in that transition.
[2013-03-07 14:48:34 -0500] cwj: i just noticed it myself the other day
[2013-03-07 14:50:15 -0500] Azrael: cwj: ah ok, thanks
[2013-03-07 14:52:16 -0500] Azrael: does anyone know if there will be a chef server 11 release for debian?  what's available atm is ubuntu and rhel packages.
[2013-03-07 14:53:18 -0500] Azrael: the half-transitioned docs and no debian support are making chef a difficult sell where i work, compared to puppet, unfortunately
[2013-03-07 14:54:22 -0500] drrk: is it possible to have fine grained access control on a chef server, so I can say x group of users can modifiy this groups of nodes, and Y group a different set of nodes
[2013-03-07 14:54:30 -0500] drrk: likewise databags
[2013-03-07 14:54:37 -0500] erthad: leifmadsen: paulmoor1ng: I eventually ended up checking for the presence of the file in cookbook in the way similar to http://stackoverflow.com/questions/12571948/chef-test-for-cookbook-file-existence
[2013-03-07 14:55:02 -0500] paulmoor1ng: drrk: that would be Hosted/Private Chef
[2013-03-07 14:55:11 -0500] drrk: ah right
[2013-03-07 14:55:38 -0500] drrk: well I guess opscode need to make money :)
[2013-03-07 14:57:25 -0500] paulmoor1ng: drrk: It's easy to upgrade and 5 nodes are free, might be worthwhile to just sign up and play with it
[2013-03-07 14:57:28 -0500] drrk: hmm, 646 vms on one vm system
[2013-03-07 14:57:38 -0500] paulmoor1ng: then upgrade once you decide it's awesome :)
[2013-03-07 14:57:58 -0500] drrk: I don't want to find it's awesoem if it's not going to be affordable
[2013-03-07 15:00:05 -0500] drrk: i like the fact hosted chef and private chef are the same price
[2013-03-07 15:00:52 -0500] erthad: actually it also does not work the way I need =(
[2013-03-07 15:31:23 -0500] geekbri: drrk: its open source, you can always just run your own server.  Thats pretty affordable
[2013-03-07 15:31:42 -0500] drrk: private chef isn't
[2013-03-07 15:32:09 -0500] geekbri: Private chef and maintaining your own chef server are different things.
[2013-03-07 15:32:12 -0500] geekbri: free is pretty affordable.
[2013-03-07 15:32:22 -0500] drrk: yeah, I have a chef server already
[2013-03-07 15:32:44 -0500] drrk: but it doesn't have that feature, that's only in provate and hosted chef aparantly
[2013-03-07 15:33:11 -0500] drrk: I could add the feature, perhaps
[2013-03-07 15:33:16 -0500] geekbri: thats what I was about to say ;)
[2013-03-07 15:33:47 -0500] geekbri: I thought they added the user access stuff in the open source version.
[2013-03-07 15:34:09 -0500] drrk: i'm not sure, hence asking, certainly not obviously
[2013-03-07 15:34:39 -0500] geekbri: I also am not sure, but I thought I read that they were adding the access control stuff to the open source UI
[2013-03-07 15:34:49 -0500] geekbri: it's worth looking into, I can't recall.  My memory of it is a bit fuzzy
[2013-03-07 15:35:22 -0500] drrk: "Open Source Chef has a single tenant access control model, which is very different from the role-based access control (RBAC) model of Hosted Chef and Private Chef. "
[2013-03-07 15:35:27 -0500] drrk: from the wikiw
[2013-03-07 15:36:10 -0500] geekbri: Unfortunately the wiki isn't actually the best place to get information always :)
[2013-03-07 15:37:16 -0500] drrk: http://lists.opscode.com/sympa/arc/chef-dev/2010-09/msg00000.html <- foudn this but not sure if anything came of it
[2013-03-07 15:46:35 -0500] Kzim: hi
[2013-03-07 15:47:01 -0500] Kzim: ANyone know a plugin to have node list by environment or something to handle large number of nodes ? thanks
[2013-03-07 15:50:52 -0500] geekbri: Kzim: knife search node "chef_environment:staging" ?
[2013-03-07 15:51:03 -0500] knuckolls: ^^
[2013-03-07 15:51:32 -0500] fabio_: anyone knows how to fix the postgresql::ruby recipe?
[2013-03-07 15:51:48 -0500] fabio_: it has problems on a clean install in ubuntu12.04
[2013-03-07 15:51:52 -0500] fabio_: with chef 11.04
[2013-03-07 15:52:35 -0500] benner: hi
[2013-03-07 15:53:30 -0500] benner: when i'm trying to search for empty run list, in result i see few nodes with not empty run list; how to fix this?
[2013-03-07 15:55:27 -0500] ColinR: So I have an attributes/default.rb file that defines an attribute for a logstash output configuration, e.g. default['logstash']['server']['outputs'] = [   :graphite => {     :host => "#{search(:node, node.logstash.graphite_query)[0]['ipaddress']}",     :metrics => ["logstash.other.events", "1"]   } ]
[2013-03-07 15:57:06 -0500] ColinR: search doesn't work in this file, but I need to dynamically set the host value. Is there a way to use search for setting an attribute in the attributes/default.rb file or will I need to set another attribute in a recipe and then have my logstash output reference that attribute?
[2013-03-07 15:59:09 -0500] ColinR: will chef update attributes that reference other attributes if the referenced attributes change?
[2013-03-07 16:00:07 -0500] ColinR: So I have an attributes/default.rb file that defines an attribute for a logstash output configuration, e.g. default['logstash']['server']['outputs'] = [   :graphite => {     :host => "#{search(:node, node.logstash.graphite_query)[0]['ipaddress']}",     :metrics => ["logstash.other.events", "1"]   } ]
[2013-03-07 16:00:21 -0500] ColinR: sorry, didn't mean to repaste that
[2013-03-07 16:00:41 -0500] Kzim: geekbri, something like that yes but with all the machine i ll take a look thanks !
[2013-03-07 16:11:39 -0500] f1gjam: guys is it possible to run multiple commands in a execute block?
[2013-03-07 16:17:32 -0500] knuckolls: f1gjam: yes
[2013-03-07 16:18:00 -0500] f1gjam: knuckolls, how i did it one block but it only runs the last command?
[2013-03-07 16:19:31 -0500] btm: f1gjam: http://docs.opscode.com/resource_execute.html, search the page for 'command <<' for an example.
[2013-03-07 16:20:41 -0500] f1gjam: thanks
[2013-03-07 16:20:47 -0500] f1gjam: can you help me with one more thing
[2013-03-07 16:20:52 -0500] f1gjam: whats the difference between using %Q or "
[2013-03-07 16:20:56 -0500] f1gjam: when running command?
[2013-03-07 16:21:54 -0500] test_: http://stackoverflow.com/questions/10144543/what-is-the-use-case-for-rubys-q-q-quoting-methods
[2013-03-07 16:22:24 -0500] test_: anyone know how to purge the files of a cookbook?  i know of --purge, but only on the cookbook delete command of knife
[2013-03-07 16:22:59 -0500] f1gjam: :)
[2013-03-07 16:23:16 -0500] fabio_: anyone knows how to make postgresql::ruby to work?
[2013-03-07 16:25:08 -0500] btm: f1gjam: %q helps with escaping: http://pastie.org/6412623
[2013-03-07 16:25:47 -0500] faustroll: f1gjam: i use the %Q syntax to disambiguate the reading of a line with quotes and odd chars
[2013-03-07 16:25:48 -0500] f1gjam: thanks btm
[2013-03-07 16:25:53 -0500] test_: you can always escape the " or ' as well, but that does look cleaner witht he %q/Q
[2013-03-07 16:26:04 -0500] f1gjam: faustroll, yeah it makes it cleaner
[2013-03-07 16:26:08 -0500] f1gjam: test_,  agreed
[2013-03-07 16:26:22 -0500] f1gjam: freaking msi files :(
[2013-03-07 16:26:37 -0500] test_: one more try :)
[2013-03-07 16:26:40 -0500] test_: anyone know how to purge the files of a cookbook?  i know of --purge, but only on the cookbook delete command of knife
[2013-03-07 16:26:48 -0500] faustroll: test_ I hate the leaning toothpick look
[2013-03-07 16:27:06 -0500] test_: takes all kinds to make the world go around
[2013-03-07 16:27:24 -0500] test_: but, i agree with you
[2013-03-07 16:29:17 -0500] awgross: is it possible to get a listing of all of the template files in a cookbook? or do I have to find where my cookbook is being cached and iterate over them
[2013-03-07 16:30:52 -0500] Kzim: can't i put a recipe in and environment ? i would like a Base role to run on every node and i want to be sure even if the admin forget :)
[2013-03-07 16:32:05 -0500] test_: I've only seen the ability to set the version constraints on the environment
[2013-03-07 16:34:48 -0500] test_: http://docs.opscode.com/essentials_environments_formats.html
[2013-03-07 16:34:55 -0500] test_: name "environment_name"
[2013-03-07 16:35:07 -0500] test_: cookbook OR cookbook_versions  "cookbook" OR "cookbook" => "cookbook_version"
[2013-03-07 16:40:02 -0500] faustroll: Kzim: you can set version constraints in a run_list via a hash key with version in it
[2013-03-07 16:44:03 -0500] matticulous: hoping someone has run into this (or its something silly): running a vagrant vm using chef solo to run a recipe. in the recipe, i am using remote_file to pull "http://nodejs.org/dist/node-v0.8.18-linux-x64.tar.gz" explicitly. on the chef run, i get an HTTP Server Error 404. however, when i ssh into the box and do 'curl -O' for the same file,  i am able to download it.
[2013-03-07 16:44:11 -0500] matticulous: troubleshooting tips?
[2013-03-07 16:47:08 -0500] fabio_: hello, im trying to install postgresql::ruby recipe
[2013-03-07 16:47:20 -0500] fabio_: but it installs in compiletime, before build-essential
[2013-03-07 16:47:24 -0500] fabio_: how can i fix that?
[2013-03-07 16:48:30 -0500] Kzim: faustroll, there is only version constraints not run_list right ? i still have to put my recipe in the role ?
[2013-03-07 16:50:18 -0500] faustroll: Kzim: {"run_list":["recipe[nginx@1.2.3]"]}
[2013-03-07 16:51:06 -0500] faustroll: Kzim: http://docs.opscode.com/essentials_cookbook_versions.html
[2013-03-07 16:56:19 -0500] tmichael: have issue with local "wrapper" cook and attribute assignment/override
[2013-03-07 16:56:59 -0500] tmichael: in main cookbook attributes file i have something like default['confluence']['version']='4.2.3'
[2013-03-07 16:57:24 -0500] tmichael: so in foo-cook wrapper i have attributes file with override['confluence']['version']='5.0.1'
[2013-03-07 16:58:50 -0500] tmichael: see both in node data and running cook pulls 4.2.3
[2013-03-07 17:00:02 -0500] tmichael: okay, now i see the problem.  just not sure why. let me put in gist
[2013-03-07 17:00:47 -0500] tmichael: https://gist.github.com/toddmichael/fdf28e694a61404b026c
[2013-03-07 17:01:02 -0500] tmichael: tried setting via default vs override just to see what would happen
[2013-03-07 17:01:19 -0500] tmichael: basically, the attrib for version that i'm setting (via default OR override) is working
[2013-03-07 17:01:41 -0500] tmichael: problem is that it's not being reflected in subsequent attributes that call on it
[2013-03-07 17:01:50 -0500] tmichael: so i get:
[2013-03-07 17:01:53 -0500] tmichael:       "version": "5.0.1",
[2013-03-07 17:02:01 -0500] tmichael:       "tarball": "atlassian-confluence-4.3.2.tar.gz",
[2013-03-07 17:02:17 -0500] tmichael: assumed i could just override one and all others would update, but guess not
[2013-03-07 17:02:45 -0500] tmichael: if anyone knows why would appreciate explanation.  workaround: i'll just manually override all attributes
[2013-03-07 17:05:50 -0500] faustroll: ack. I'm getting a Gem::LoadError inside a recipe
[2013-03-07 17:06:15 -0500] faustroll: Unable to activate net-scp-1.1.0, because net-ssh-2.2.2 conflicts with net-ssh (>= 2.6.5)
[2013-03-07 17:06:25 -0500] faustroll: hate that
[2013-03-07 17:14:47 -0500] f1gjam: guys where can i download the old chef 10 windows client - all downloads seem to be chef 11
[2013-03-07 17:19:50 -0500] f1gjam: anyone know
[2013-03-07 17:22:31 -0500] geekbri: tmichael: are you using chef 10 or chef11?
[2013-03-07 17:22:48 -0500] tmichael: chef 11 geekbri
[2013-03-07 17:23:23 -0500] tmichael: btw, updated the gist: https://gist.github.com/toddmichael/fdf28e694a61404b026c
[2013-03-07 17:23:37 -0500] tmichael: solution was to override any of the dynamic attributes that feed off the one i overrode
[2013-03-07 17:23:47 -0500] tmichael: just doesn't make sense that i'd need to do that
[2013-03-07 17:23:51 -0500] geekbri: tmichael: yeah, that was supposed to be solved in chef11 I thought
[2013-03-07 17:24:10 -0500] geekbri: tmichael: in chef10 you couldn't compost attributes then use them in other ones.  In chef11 I was lead to believe that had been changed.
[2013-03-07 17:24:31 -0500] tmichael: geekbri: okay, so this is known issue.  yeah, you'll see from what i posted that it's still not working then
[2013-03-07 17:24:55 -0500] geekbri: tmichael: I'm going to play around with it since I was just writing a recipe that uses chef11 and i was basically doing what youre doing.  I'll let you know if i spot a problem
[2013-03-07 17:25:45 -0500] tmichael: geekbri: appreciate that.  if you find a way to make it work let me know.  alternatively, if you know of bug or feature request on the topic share and i'll update it with my comments/findings.
[2013-03-07 17:25:52 -0500] geekbri: tmichael: http://wiki.opscode.com/display/chef/Breaking+Changes+in+Chef+11#BreakingChangesinChef11-RoleandEnvironmentDefaultandOverrideAttributesareVisibleinAttributesFiles
[2013-03-07 17:28:46 -0500] tmichael: outstanding.  thx geekbri
[2013-03-07 17:29:05 -0500] geekbri: tmichael: just FYI, composting them like that wiki says in chef11 is working for me
[2013-03-07 17:33:05 -0500] tmichael: geekbri: you doing all yours in the various attribute files or are overrides happening in role/env files?
[2013-03-07 17:33:34 -0500] tmichael: also seems we're back to symbols
[2013-03-07 17:34:23 -0500] tmichael: feel like we keep going back 'n forth on this unless i'm misunderstanding something
[2013-03-07 17:35:37 -0500] geekbri: tmichael: https://gist.github.com/anonymous/5109990  I was able to do that, then I was able to override "run_dir" in my role file, both as a default_attribute, then as an override_attribute
[2013-03-07 17:35:59 -0500] geekbri: tmichael: Both times, with chef 11, the attributes based off of it were changed appropriately
[2013-03-07 17:37:25 -0500] tmichael: geekbri: i'm trying to do this in attributes files:  cook/attributes/default.rb and my_company-cook/attributes/default.rb
[2013-03-07 17:37:46 -0500] geekbri: tmichael: yeah, that gist i sent you is from an attributes file.
[2013-03-07 17:41:33 -0500] tmichael: appreciate all the info geekbri.  there are a few other things you did to make the layout more grockable.  gonna implement those and and give this another go.  much obliged!
[2013-03-07 17:42:17 -0500] tmichael: easier to resolve now that I know it's not Chef, it's just me :)
[2013-03-07 17:50:23 -0500] fabio_: how can it be possible to have opscode cookbooks broken for a clean ubuntu install
[2013-03-07 17:50:39 -0500] fabio_: only try to do a postgresql::server, postgresql::client and database::postgresql
[2013-03-07 17:50:49 -0500] fabio_: but postgresql::ruby is broken
[2013-03-07 17:52:04 -0500] knuckolls: fabio_: i've had to submit pull requests to all sorts of the upstream cookbooks. it probably worked on 10.04. figure out what's wrong and share it w/ the rest of us. :)
[2013-03-07 17:52:06 -0500] fabio_: how can i call a method inside a recipe?
[2013-03-07 17:52:19 -0500] fabio_: knuckolls, is what im doing
[2013-03-07 17:52:29 -0500] knuckolls: fabio_: at compile time, or convergence?
[2013-03-07 17:52:34 -0500] fabio_: compile time
[2013-03-07 17:52:42 -0500] fabio_: i wrote a method in the ruby.py
[2013-03-07 17:52:44 -0500] fabio_: recipe
[2013-03-07 17:52:59 -0500] fabio_: but then when i call it a line below, it throws me a nomethoderror
[2013-03-07 17:53:14 -0500] fabio_: in the chef-client run
[2013-03-07 17:54:03 -0500] knuckolls: recipes are just arbitrary ruby code, so you should be able to define a method in the recipe and call it.
[2013-03-07 17:54:18 -0500] knuckolls: does it work in shef -z => recipe mode?
[2013-03-07 17:54:25 -0500] fabio_: how?
[2013-03-07 17:55:08 -0500] fabio_: the chef-client run says nomethod error
[2013-03-07 17:55:24 -0500] fabio_: but im only defining a method and then calling in the ruby.rb file
[2013-03-07 17:55:37 -0500] knuckolls: gist it?
[2013-03-07 17:55:51 -0500] fabio_:  FATAL: NoMethodError: undefined method `pkg_devel_installed' for Chef::Resource::Link
[2013-03-07 17:55:52 -0500] fabio_: oko
[2013-03-07 17:57:19 -0500] fabio_: https://gist.github.com/avances123/7e498ddce2003f3645c1
[2013-03-07 17:57:57 -0500] fabio_: and the ruby.rb
[2013-03-07 17:57:58 -0500] fabio_: https://gist.github.com/55f84231ada4575ea581
[2013-03-07 18:08:14 -0500] hardyra: I am behind a proxy i was trying to use the opscode installer the way it passes the download url to wget was not working. I fixed this by adding "" to the wget url line so it look like this  wget -O "$tmp_dir/$filename" "$url" 2>/tmp/stderr instead of  wget -O "$tmp_dir/$filename" $url 2>/tmp/stderr just thought i would let you guys know
[2013-03-07 18:09:15 -0500] knuckolls: fabio_: i've never seen a resource cut up like that w/ the unless. would a not_if or only_if block not suffice?
[2013-03-07 18:09:52 -0500] knuckolls: you can also wrap the entire resource in the unless statement, and have two branches, one with each variation of the resource
[2013-03-07 18:11:08 -0500] knuckolls: i think the method is a scoping problem i've encountered before. the method is being defined during compilation, but the inside of that link resource isn't being evaluated until convergence, likely in a different context. i've never fully understood how the scoping works in recipes, so there might be someone else that can help more than I.
[2013-03-07 18:13:48 -0500] jfl0wers: anyone here familiar with Berkshelf?
[2013-03-07 18:14:23 -0500] kindsol: there are many
[2013-03-07 18:14:43 -0500] jfl0wers: I get this almost helpful error: Failed to download 'apache2' from chef_api: 'https://domainname.com:8443'
[2013-03-07 18:15:05 -0500] jfl0wers: I replaced the domain name there...
[2013-03-07 18:15:30 -0500] jfl0wers: I don't know why I am getting that error
[2013-03-07 18:15:52 -0500] hardyra: found out that it has nothing to do with the proxy and it is just the behavor of wget it brakes the url up by & signs unless there are quotes around the url.
[2013-03-07 18:15:54 -0500] jfl0wers: I know that the cookbook is in the chef server as I see it when I do a knife cookbook list...
[2013-03-07 18:18:15 -0500] jfl0wers: is there a way to up the log level on Berkshelf or Ridley?
[2013-03-07 18:20:01 -0500] kindsol: ENV['BERKSHELF_DEBUG']
[2013-03-07 18:20:11 -0500] kindsol: https://github.com/RiotGames/berkshelf/blob/master/bin/berks
[2013-03-07 18:20:17 -0500] kindsol: jfl0wers: ^^
[2013-03-07 18:21:10 -0500] jfl0wers: thank you!
[2013-03-07 18:22:15 -0500] Chocobo: Ok in the switch from puppet to Chef one thing is clear, I need a LOT more ruby knowledge.  Can anyone recommend a good tutorial>
[2013-03-07 18:23:14 -0500] cpasmoi: Chocobo, http://docs.opscode.com/just_enough_ruby_for_chef.html
[2013-03-07 18:23:20 -0500] jfl0wers: Hmm
[2013-03-07 18:23:32 -0500] kindsol: cpasmoi: http://docs.opscode.com/just_enough_ruby_for_chef.html
[2013-03-07 18:23:42 -0500] Chocobo: wow, that is strangely specific :)  Thanks cpasmoi and kindsol
[2013-03-07 18:23:43 -0500] cpasmoi: ?
[2013-03-07 18:23:56 -0500] jfl0wers: @kindsol I tried this but I don't see anymore output that before: BERKSHELF_DEBUG=true berks install -c berkshelf-config.json  --path berkshelf-cookbooks
[2013-03-07 18:24:02 -0500] kindsol: cpasmoi: you beat me to it ;)
[2013-03-07 18:24:05 -0500] cpasmoi: and then http://www.ruby-doc.org of course
[2013-03-07 18:24:30 -0500] cpasmoi: cpasmoi, hehe, and you failed in tab completion :p
[2013-03-07 18:25:15 -0500] kindsol: cpasmoi: exactly
[2013-03-07 18:25:30 -0500] rb1980: If I have a "feature request" for knife, where is the appropriate place to submit that? I know in the open source community, the answer to this is usually "submit a patch", but I am too green still...
[2013-03-07 18:25:57 -0500] kindsol: jfl0wers: yeah, apparently that is not used throughout berkshelf.  I am not real familiar with the download feature from chef_api.  looking now
[2013-03-07 18:27:01 -0500] spox: rb1980: tickets.opscode.com
[2013-03-07 18:27:36 -0500] Chocobo: hhmmm that document is pretty helpful.  I guess I will need to dig deeper to understand something like "@node[:nginx][:something_else]"  or the ".... do |something, else|" format
[2013-03-07 18:29:48 -0500] kindsol: Chocobo: node[:nginx][:something_else] is just a ruby hash. http://zetcode.com/lang/rubytutorial/hashes/
[2013-03-07 18:31:09 -0500] spox: well, it's an attribute, that has a lot of the same characteristics of a hash
[2013-03-07 18:31:23 -0500] Chocobo: kindsol: does the ":" have any meaning?  I am digging around ruby-doc right now
[2013-03-07 18:31:35 -0500] kindsol: jfl0wers: is there a full backtrace for the failure you are seeing?  or just that one line?
[2013-03-07 18:32:28 -0500] gene: jtimberman : is the canonical location for opscode cookbooks currently github.com/opscode-cookbooks/ instead of github.com/cookbooks/ ?
[2013-03-07 18:32:47 -0500] gene: I just spent a few hours troubleshooting something because I was using one and looking at code from the other
[2013-03-07 18:33:11 -0500] spox: gene: yes, it's opscode-cookbooks
[2013-03-07 18:33:23 -0500] gene: if github.com/cookbooks/ is deprecated, would it be possible to add that in big letters to the all the READMEs of the cookbooks and the repo descriptions?
[2013-03-07 18:33:30 -0500] spox: the cookbooks is some 3rd party org that collects cookbooks from everywhere, and is generally  out of date
[2013-03-07 18:33:31 -0500] gene: this is the second time I've ended up working in the wrong repo
[2013-03-07 18:33:36 -0500] gene: shoot
[2013-03-07 18:33:54 -0500] spox: gene: yeah, it's terribly annoying.
[2013-03-07 18:34:43 -0500] gene: jtimberman : would it be possible to add that in big letters to the all the READMEs of the cookbooks and the repo descriptions?
[2013-03-07 18:34:59 -0500] kindsol: Chocobo: it is a symbol.  basically shorthand for a string
[2013-03-07 18:35:06 -0500] kindsol: http://ruby-doc.org/core-1.9.3/Symbol.html
[2013-03-07 18:35:10 -0500] gene: jtimberman : if you have a specific model in mind (big test in readme,s something else) I'd be happy to do the work and submit the 100+ PRs
[2013-03-07 18:35:17 -0500] jfl0wers: kindsol: here is the full output - https://gist.github.com/jflowers/5110524
[2013-03-07 18:35:22 -0500] gene: ....(big text in readme....
[2013-03-07 18:35:37 -0500] spox: gene: i think ideally more people should just complain at the cookbooks org owners
[2013-03-07 18:35:45 -0500] spox: since it affects more than just opscode
[2013-03-07 18:36:00 -0500] gene: !
[2013-03-07 18:36:05 -0500] gene: oh is that repo not owned by opscode?
[2013-03-07 18:36:09 -0500] spox: gene: no
[2013-03-07 18:36:13 -0500] gene: !
[2013-03-07 18:36:15 -0500] gene: sigh
[2013-03-07 18:36:17 -0500] gene: didn't realize that
[2013-03-07 18:36:30 -0500] Chocobo: thanks kindsol
[2013-03-07 18:36:53 -0500] gene: spox : ok, hitting up jtimberman then is probably not the way to go. I'll email the guys that run that repo
[2013-03-07 18:37:36 -0500] fcecagno: hi folks, may I ask you some help on writing a particular recipe?
[2013-03-07 18:38:59 -0500] fcecagno: actually I'd like to know if there's a way to abort the execution without raise an exception
[2013-03-07 18:39:18 -0500] Chocobo: Hrm, symbols are strange
[2013-03-07 18:41:05 -0500] Aqueous: is there a widely used ssl certificates cookbook?
[2013-03-07 18:42:21 -0500] gene: spox : emailed the maintainers asking if I can help fix it
[2013-03-07 18:42:41 -0500] cwj: Aqueous: i use the 'certificate' cookbook from the community site to drop off ssl certificates and keys
[2013-03-07 18:42:48 -0500] gene: spox : now to see (in the interim) if there's some way I can may my browser refuse to browse to anything under github.com/cookbooks/
[2013-03-07 18:42:54 -0500] Aqueous: cwj: thanks!
[2013-03-07 18:49:20 -0500] riceo: running Chef 11.4.0, I'm trying to set "node.normal['mysql_install_complete'] = 1" in a recipe. When the client runs, it fails on "Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'" for that line, even though it shows me`node.normal` in the stacktrace. Any ideas what's going on?
[2013-03-07 18:50:09 -0500] riceo: From my understanding of http://docs.opscode.com/breaking_changes_chef_11.html, I should be able to set a normal attribute like that
[2013-03-07 18:52:32 -0500] bigoldrock: When using "ubuntu12.04-gems.erb" the template for 10.18.x chef server for some reason the client does not get a proper /etc/chef/client.rb , etc. it looks like the stock one from the gem
[2013-03-07 18:53:46 -0500] bigoldrock: There are no errors, but clearly connecting to localhost:4000 is not what we want. Any ideas?
[2013-03-07 18:55:27 -0500] ranjibd: bigoldrock: /etc/chef/client.rb is always generated from the bootstrap script, none of the templatws have hardcoded client.rb
[2013-03-07 18:56:34 -0500] bigoldrock: okay, that helps, so I know the issue is with my template "ubuntu12.04-gems.erb"
[2013-03-07 18:57:59 -0500] bigoldrock: is there an example somewhere that shows me how to get the proper client.rb (and other important files) to the client? I'm new to chef server
[2013-03-07 18:59:13 -0500] kindsol: jfl0wers: not seeing any smoking gun here.  Just that you are getting a 404. And that it has to do with the cookbook url that bershelf is creating.  I would check you chef server config settings and your version constrains  on the cookbook.  I you are comfortable with editing gems on your system, there is a way to turn on more debugging in ridley (which is what berkshelf uses as a chef server API  client)
[2013-03-07 19:00:02 -0500] jfl0wers: I am
[2013-03-07 19:00:06 -0500] jfl0wers: what should I edit
[2013-03-07 19:00:44 -0500] jfl0wers: actually I edited open-uri.rb already
[2013-03-07 19:01:00 -0500] jfl0wers: to show more info on the file failing to download
[2013-03-07 19:01:11 -0500] jfl0wers: I get this from my temp puts statement: Unable to download: /cookbooks/apache2/1.3.0/files/7662da1adad28445e4bc3a3e466ed979
[2013-03-07 19:01:48 -0500] kindsol: https://github.com/reset/ridley/blob/v0.8.1/lib/ridley/logging.rb#L11
[2013-03-07 19:02:02 -0500] kindsol: change Logger::WARN to Logger::DEBUG
[2013-03-07 19:02:10 -0500] jfl0wers: gotcha
[2013-03-07 19:03:02 -0500] bigoldrock: @ranjibd I'm guessing there is a client.rb that gets copied to the client (not /etc/chef/client.rb on the chef server), looking for that now. Am I on the right path?
[2013-03-07 19:04:05 -0500] jfl0wers: it strips off the port # 8443
[2013-03-07 19:04:27 -0500] jfl0wers: so a bug in ridley
[2013-03-07 19:05:30 -0500] jfl0wers: here is the key log statement: downloading cookbook: 'apache2-1.3.0'
[2013-03-07 19:05:30 -0500] jfl0wers: downloading 'recipes' file: #<Hashie::Mash checksum="7662da1adad28445e4bc3a3e466ed979" name="default.rb" path="recipes/default.rb" specificity="default" url="https://********/cookbooks/apache2/1.3.0/files/7662da1adad28445e4bc3a3e466ed979"> to: '/var/folders/7n/635c8gyx76zbwg_9dhy050lcymrcnj/T/d20130307-11574-10ujwz7/recipes/default.rb'
[2013-03-07 19:05:38 -0500] ranjibd: bigoldrock:  https://github.com/opscode/chef/blob/master/lib/chef/knife/core/bootstrap_context.rb#L57 this is the method, which is invoked inside the bootstrap template to generate the chef client config
[2013-03-07 19:05:59 -0500] ranjibd: jfl0wers: chef 11?
[2013-03-07 19:06:13 -0500] jfl0wers: nope
[2013-03-07 19:06:16 -0500] jfl0wers: 10.14.4
[2013-03-07 19:07:37 -0500] kindsol: jfl0wers: nice find.  yeah I was going to suggest loging the value of 'target' here https://github.com/reset/ridley/blob/v0.8.1/lib/ridley/connection.rb#L117
[2013-03-07 19:07:49 -0500] kindsol: it would probably show the same thing
[2013-03-07 19:08:17 -0500] jfl0wers: I was just trying to hunt down where target is coming from...
[2013-03-07 19:08:45 -0500] kindsol: yep. from file[url]
[2013-03-07 19:09:16 -0500] kindsol: glad that debug statement helped
[2013-03-07 19:12:31 -0500] kindsol: jfl0wers: maybe check the value if uri at this point https://github.com/RiotGames/berkshelf/blob/master/lib/berkshelf/locations/chef_api_location.rb#L126
[2013-03-07 19:12:44 -0500] kindsol: s/if/of/
[2013-03-07 19:12:53 -0500] kindsol: gotta run. good luck
[2013-03-07 19:13:07 -0500] jfl0wers: thanks for your help
[2013-03-07 19:13:29 -0500] kindsol: np
[2013-03-07 19:24:15 -0500] coderanger: miah: Hah, those other things you mentioned were indeed my prior art :)
[2013-03-07 19:26:01 -0500] coderanger: miah: I'm going to work with Nathen on something stronger for Chefconf, doesn't really apply to the global community guidelines since stuff like incident handling and reporting aren't as concrete outside of meatspace
[2013-03-07 19:36:04 -0500] miah: coderanger: yes, indeed. =)
[2013-03-07 19:36:18 -0500] miah: i figured you had to have been apart of it since it was all pycon related =)
[2013-03-07 19:36:31 -0500] miah: i think the chefconf policy is good, but it could be _better_ =)
[2013-03-07 19:36:47 -0500] geekbri: i think they need to have a chefconf on the darn east coast!
[2013-03-07 19:36:51 -0500] coderanger: Just need more free time once PyCon stops melting my brain
[2013-03-07 19:36:54 -0500] geekbri: :D
[2013-03-07 19:36:57 -0500] miah: ya im sure
[2013-03-07 19:37:35 -0500] jsh: geekbri: East Coast and West Coast conferences need to compromise...everyone meets in Kansas City ;-)
[2013-03-07 19:37:46 -0500] miah: east coast tends to be a little more uptight
[2013-03-07 19:37:47 -0500] geekbri: Google Fiber?  I'm down.
[2013-03-07 19:38:52 -0500] miah: im totally down for google fiber.
[2013-03-07 19:39:14 -0500] miah: but ya'll should go read: http://www.amazon.com/Captive-Audience-Telecom-Industry-Monopoly/dp/0300153139/
[2013-03-07 19:39:17 -0500] miah: =)
[2013-03-07 19:40:39 -0500] miah: or at the very least watch: http://www.youtube.com/watch?v=7R4xhwy-1oI
[2013-03-07 19:40:51 -0500] jsh: this is nice at work (http://www.speedtest.net/result/2557825360.png), just wish I could get the same at home
[2013-03-07 19:41:42 -0500] miah: ya. thats great.
[2013-03-07 19:42:14 -0500] jsh: would be better, but when I changed desks, I told them I didn't need gigabit anymore :(
[2013-03-07 19:42:30 -0500] miah: why would you say such a thing
[2013-03-07 19:43:31 -0500] jsh: miah: I know, it's sad...but tmux + vim + knife don't require all that much :)
[2013-03-07 19:44:46 -0500] jsh: sascha_d: hey, looking forward to #hangops tomorrow
[2013-03-07 19:47:20 -0500] sascha_d: ohai
[2013-03-07 19:47:33 -0500] sascha_d: it should be fun!
[2013-03-07 19:51:39 -0500] [7hunderbird]_: hello, any gentoo chef geeks in the house know how to emerge with the emerge flages --reinstall changed-use in the emerge resource?
[2013-03-07 19:51:56 -0500] [7hunderbird]_: so I could do something like this line:
[2013-03-07 19:51:57 -0500] [7hunderbird]_: emerge --pretend =dev-lang/ruby-1.9.3_p392 --reinstall changed-use
[2013-03-07 19:52:23 -0500] [7hunderbird]_: I add "--pretend" to examine the output when doing it locally, etc
[2013-03-07 19:55:12 -0500] freezey: anyway to set an environment in a role file?
[2013-03-07 19:57:17 -0500] geekbri: anybody know when the next chef code review is?
[2013-03-07 19:58:16 -0500] julienphalip: Hello. I'm a bit stumped by the
[2013-03-07 19:59:19 -0500] julienphalip: by the 'not_if' condition. Basically a 'bash' resource is getting skipped, even though the 'not_if' command return '1' when I manually run it inside the Vagrant (CentOS) VM.
[2013-03-07 19:59:51 -0500] julienphalip: Does any one have any idea what I could be missing or how I could debug this?
[2013-03-07 20:00:42 -0500] julienphalip: Wait... never mind, I think I might have spoken too soon, sorry.
[2013-03-07 20:04:17 -0500] elijah-mbp: hey, is someone around who can help me quickly with how data gets into the solr index on chef 10?
[2013-03-07 20:04:39 -0500] elijah-mbp: we're trying to debug an instance that works right... except for node search.
[2013-03-07 20:09:49 -0500] elijah-mbp: we think solr is okay, but we think the data is never making its way into there to get indexed.
[2013-03-07 20:28:22 -0500] maplebed: geekbri: IIRC cookbook code review is mwf 2pm mountain time.
[2013-03-07 20:28:41 -0500] awgross: any idea when they do knife plugin review?
[2013-03-07 20:28:46 -0500] geekbri: maplebed: Sorry I meant the regular chef ticket code review :)
[2013-03-07 20:29:00 -0500] maplebed: it's announced in here so if you set your IRC client to ping you on the phrase 'code review' you'll get notified.
[2013-03-07 20:29:22 -0500] maplebed: this past monday the chef ticket review happened the hour before the cookbook review, but I don't know how strict that schedule is.
[2013-03-07 20:29:34 -0500] maplebed: btm_ would know.
[2013-03-07 20:38:22 -0500] geekbri: gotcha
[2013-03-07 20:39:55 -0500] jhayden: I have a recipe question for all you iron chefs out there
[2013-03-07 20:40:17 -0500] bgood: are they any articles out there about ways to keep the yaml files needed for my rails app synced with the templates that chef needs
[2013-03-07 20:40:20 -0500] jhayden: if I have a recipe "foo" and inside to an include_recipe "bar"
[2013-03-07 20:40:52 -0500] jhayden: does recipe bar have awareness of variables in "foo"?
[2013-03-07 20:41:23 -0500] jhayden: If so, does anyone know of a good example
[2013-03-07 20:41:34 -0500] geekbri: it does not have awareness of local variables no.
[2013-03-07 20:42:39 -0500] maplebed: bgood: I don't have an article to reference but I can tell you how we do it...
[2013-03-07 20:42:43 -0500] awgross: geekbri: in redisio minitests, have you had an issue with them erroring out when trying to run the minitests?
[2013-03-07 20:43:05 -0500] bgood: i would really appreciate it
[2013-03-07 20:43:06 -0500] geekbri: awgross: not using minitest for it yet.  My current testing involves test kitchen and a bunch of different VMs
[2013-03-07 20:43:08 -0500] nmische: hello, i've been updating some cookbooks for Chef 11 and I ran into this:
[2013-03-07 20:43:12 -0500] nmische: node.default['foo'] << bar
[2013-03-07 20:43:14 -0500] nmische: works
[2013-03-07 20:43:33 -0500] nmische: node.normal['foo'] << bar
[2013-03-07 20:43:39 -0500] nmische: does not work
[2013-03-07 20:44:20 -0500] bgood: I would assume like other folks were are experiencing some pain with devs making a yaml change and the new key not showing up on the test box
[2013-03-07 20:44:50 -0500] awgross: geekbri: derp, that is correct
[2013-03-07 20:46:20 -0500] nmische: ended up doing: node.set['foo'] = node['foo'].dup << bar but was wondering why the difference between default and normal precedence
[2013-03-07 20:46:36 -0500] maplebed: bgood: short version; chef distributes yaml files to a known location with "correct" data, capistrano copies those files into the production location on deploy.  The yaml files have 'production' 'staging' and 'dev' sections that basically all point to localhost.
[2013-03-07 20:47:00 -0500] maplebed: (no promises that this is a good model but it more or less works so far.  full disclosure though, we're trying to move away from them and towards using zookeeper instead)
[2013-03-07 20:47:27 -0500] maplebed: when devs add a new section, they have to coordinate with ops to get the change into staging and production.
[2013-03-07 20:47:36 -0500] faustroll: geekbri: are you using test-kitchen 0.7 ??
[2013-03-07 20:47:53 -0500] bgood: maplebed: we are doing something similar, however, that coordination is a but cumbersome
[2013-03-07 20:48:11 -0500] geekbri: faustroll: I think 0.6.0 why?
[2013-03-07 20:48:21 -0500] bgood: so I was curious to know if there was less manual process dependent
[2013-03-07 20:48:37 -0500] faustroll: geekbri: I'm running into an annoying issue with vagrant and net-ssh with 0.7
[2013-03-07 20:48:59 -0500] geekbri: good ole netssh and the problems it causes
[2013-03-07 20:49:03 -0500] maplebed: one thing we do for other software is to have multiple locations where yml files can live, one of which is writable by devs in non-production boxes; they then write their own stuff there and the coordination is restricted to when things go to prod.
[2013-03-07 20:49:10 -0500] geekbri: im using a version of vagrant that installs its gems for itself using vagrant gem so
[2013-03-07 20:49:16 -0500] faustroll: i'm prolly going to upgrade test-kitchen to 1.0
[2013-03-07 20:49:23 -0500] maplebed: (eg it'll look in ~/ymlfiles first or something like that)
[2013-03-07 20:49:40 -0500] bgood: that is an interesting idea
[2013-03-07 20:49:48 -0500] faustroll: geekbri: yeah. what a timesuck. hating it
[2013-03-07 20:50:02 -0500] geekbri: Somebody asked the difference between default and normal level attributes.  Normal level attributes are higher prescendance than default level, and they stay with the node even after the cookbook / role is done
[2013-03-07 20:50:13 -0500] geekbri: .set == normal level
[2013-03-07 20:50:31 -0500] bgood: have you run into problems where someone got a feature working with the ~/ymlfiles and then had it blow up in prod because of communication breakdown?
[2013-03-07 20:50:51 -0500] maplebed: nope. but we're still small enough.
[2013-03-07 20:51:06 -0500] bgood: how big is your team right now?
[2013-03-07 20:51:16 -0500] faustroll: geekbri: problem also is test-kitchen 1.0 has its own quirks
[2013-03-07 20:51:18 -0500] maplebed: but regardless, deploy notes are a must if you're doing handoffs...
[2013-03-07 20:51:29 -0500] maplebed: ~20
[2013-03-07 20:51:49 -0500] geekbri: faustroll: Sometimes I don't bother using test kitchen and I just test it all by hand with a different set of VMs I have that just have a shared home directory with my local machine
[2013-03-07 20:51:52 -0500] nmische: thanks geekbri, yeah wondering why the array mutators are different though
[2013-03-07 20:51:54 -0500] geekbri: I just have symlinks in those VMs to my codebase
[2013-03-07 20:52:17 -0500] bgood: have you or anyone else let the devs update the templates?
[2013-03-07 20:52:28 -0500] geekbri: nmische: Could be an accidental oversight.  I recently sent in a pull request and ticket because if you use .to_hash on a nested immutable Mash you get back a hash which contains immutable mash inside of it
[2013-03-07 20:52:46 -0500] geekbri: nmische: The immutable code is still relatively new.  If I have some time i'll try to dig into those methods.
[2013-03-07 20:52:54 -0500] nmische: geekbri: ok thanks
[2013-03-07 20:53:02 -0500] nmische: just threw me for a loop
[2013-03-07 20:53:05 -0500] geekbri: Thats why I asked about when the code review was, I was hoping to see the feedback on that pull request :)
[2013-03-07 20:53:46 -0500] faustroll: geekbri: yes. tis not really a testkitchen problem as much as the annoying net-ssh 2.2.2 versus 2.6.5 with vagrant
[2013-03-07 20:53:48 -0500] chris613: Is there an omnibus package for chef-server in the 10 series? Or just in 11?
[2013-03-07 20:53:49 -0500] maplebed: bgood: we let devs issue pull requests against our chef repo
[2013-03-07 20:53:56 -0500] nmische: is this the best approach if a need to append to a normal scope array: node.set['foo'] = node['foo'].dup << bar
[2013-03-07 20:54:36 -0500] bgood: pull requests would make for a nice handoff
[2013-03-07 20:54:41 -0500] bgood: also trackable
[2013-03-07 20:55:04 -0500] maplebed: it seems to be working pretty well for opscode...  (for cookbook changes at least)
[2013-03-07 20:55:07 -0500] maplebed: :)
[2013-03-07 20:55:24 -0500] bgood: we'll give that a go
[2013-03-07 20:55:31 -0500] bgood: thanks for the help
[2013-03-07 20:55:35 -0500] maplebed: I mean, that's part of the whole devops thing, right?  treating infra maintenance in a manner similar to traditional software dev?
[2013-03-07 20:55:47 -0500] maplebed: which means PRs, code review, apis, etc.
[2013-03-07 20:56:43 -0500] bgood: yep
[2013-03-07 21:00:31 -0500] faustroll: need more... ram
[2013-03-07 21:00:43 -0500] faustroll: waiting for VM to boot
[2013-03-07 21:01:19 -0500] faustroll: VMs were invented to keep me buying more ram
[2013-03-07 21:16:16 -0500] bwern: Trying to get Chef Server 11 to listen on a different port (existing nginx already on the normal ports). Populated non_ssl_port and ssl_port in chef-server.rb and reconfigured. Now the login page responds on the new SSL port, but immediately after loging in, it redirects to the normal port 80. Am I missing a configuration variable somewhere?
[2013-03-07 21:20:30 -0500] kallistec: bwern: there is a bug, can you try the latest RC? http://lists.opscode.com/sympa/arc/chef/2013-03/msg00136.html
[2013-03-07 21:20:33 -0500] btm_: bwern: are you using 11.0.6 or 11.0.8.rc.1?
[2013-03-07 21:20:43 -0500] kallistec: http://tickets.opscode.com/browse/CHEF-3849
[2013-03-07 21:21:23 -0500] matti: kallistec: What bug?
[2013-03-07 21:21:43 -0500] kallistec: matti: the one I posted, CHEF-3849
[2013-03-07 21:21:54 -0500] matti: Ack.
[2013-03-07 21:23:59 -0500] matti: So, recently got 11.0.4 now there is .6 and .8 coming.
[2013-03-07 21:24:14 -0500] matti: It is getting harder to justyify constant upgrades to management, bah.
[2013-03-07 21:24:54 -0500] kallistec: .4 and .6 were security fixes, .8 is the first realy bugfix release
[2013-03-07 21:25:15 -0500] kallistec: *really
[2013-03-07 21:25:30 -0500] kallistec: or real, whatever I meant to type
[2013-03-07 21:25:31 -0500] matti: Right.
[2013-03-07 21:26:43 -0500] kallistec: anyway, if you're running everything on default ports, you probably don't need .8
[2013-03-07 21:26:46 -0500] bwern: It's 11.04
[2013-03-07 21:27:01 -0500] kallistec: but you really should get .6
[2013-03-07 21:27:27 -0500] bwern: I can pull down the latest RC in a bit -- didn't realize I was already so far behind! :)
[2013-03-07 21:28:42 -0500] kallistec: bwern: as we were just discussing, there have been a flurry of security fixes for ruby stuff lately, which is why we shipped .4 and .6 as quickly as possible
[2013-03-07 21:28:58 -0500] kallistec: .8 addresses bugs around changing default ports
[2013-03-07 21:30:05 -0500] bwern: Thanks!
[2013-03-07 21:58:14 -0500] cheflevelramen: Hi Chefs. I'm trying to wrap my head around all the different repositories that wind up being created in Chef, and would like to know if what I'm doing is a good or normal design choice. First of all, as a general Chef design decision, I've settled upon the notion that I'll have two main directories: 1) {organization}-chef, and {organization}-cookbooks. I'm planning on putting each cookbook in it's own repository under the {or
[2013-03-07 21:58:53 -0500] cheflevelramen: I'm going to be using Berkshelf (whole other can of worms), so does organizing things this way correct?
[2013-03-07 21:59:49 -0500] cheflevelramen: I'm a little confused if cookbooks will wind up being in two repositories, or if berkshelf will grab them from their individual respective git repositories
[2013-03-07 22:00:20 -0500] cheflevelramen: Sorry if this is not very clear. As you can see, I'm a bit confused by this design, development process
[2013-03-07 22:00:36 -0500] knuckolls: cheflevelramen: cookbooks will live in source control in repos under your -cookbooks organization
[2013-03-07 22:00:51 -0500] knuckolls: cheflevelramen: berkshelf will handle uploading those to the chef-server
[2013-03-07 22:01:28 -0500] knuckolls: the master chef-repo used to hold cookbooks, but berkshelf doesn't work that way, you'll keep your environments, roles, helper scripts, Gemfile, etc in that repo
[2013-03-07 22:01:50 -0500] knuckolls: and you'll still use knife to work with the chef server to upload / download roles, environments, data bags, etc
[2013-03-07 22:02:42 -0500] cheflevelramen: knuckolls: Ah, that makes sense, and is pretty close to what I thought. So when using 'berks configure', I should be in the -cookbooks direectory, correct?
[2013-03-07 22:04:22 -0500] knuckolls: cheflevelramen: i'm just beginning to use berkshelf myself, looks to me like berks configure is going to set a system wide berkshelf config that it will fill with sensible defaults if it can find your knife.rb
[2013-03-07 22:04:39 -0500] knuckolls: could be wrong on that one, but that's my impression
[2013-03-07 22:05:50 -0500] cheflevelramen: knuckolls: Cool, well I'll try it in the cookbooks directory. Thanks for the help
[2013-03-07 22:14:41 -0500] awgross: does remote_file w/ checksum do any sort of checking if the newly downloaded file matches the given checksum (if it is the first download?)
[2013-03-07 22:15:54 -0500] jforce: Can I notify a service outside of a resource definition? Say I have a service called derp, and I just want to stop derp at the top of my cookbook and start it again at the bottom, do I have to use `ruby_block 'stop derp' { notifies :stop, 'service[derp]' }`? Or is there a way to just throw the notification down right there? Google is not helping...
[2013-03-07 22:16:26 -0500] jforce: something like a bare `notify :stop, 'service[derp]'` would be nice
[2013-03-07 22:18:11 -0500] jforce: my first inclination is to say `service 'derp' { action :stop }`, then `service 'derp' { action :start }`, but I think that this amounts to defining the resource twice.
[2013-03-07 22:21:10 -0500] troy_: newbie here - anyone there
[2013-03-07 22:22:13 -0500] doomviking: troy_: speak, and maybe someone will answer
[2013-03-07 22:22:17 -0500] troy_: downloaded java cookbook from OpsCode. Installed on Ubuntu along with Chef solo.
[2013-03-07 22:23:10 -0500] troy_: But with run list as   "run_list": [ "recipe[java]" ]  I get errors about missing windows cookbook even though I'm on Ubuntu
[2013-03-07 22:24:07 -0500] jforce: troy_: that's because the java cookbook requires the specified windows cookbook.
[2013-03-07 22:24:15 -0500] jforce: troy_: don't worry! this is an easy fix.
[2013-03-07 22:24:36 -0500] jforce: You have to include the windows cookbook even if you're not using windows. It won't affect your box.
[2013-03-07 22:24:46 -0500] silk: there is  "depends" in the metadata.rb file
[2013-03-07 22:25:08 -0500] troy_: so I need to downoad windows cookbook from where?
[2013-03-07 22:25:09 -0500] jforce: I found that the python cookbook depends on yum. I'm only using Ubuntu, but I still had to upload the yum cookbook to my chef server.
[2013-03-07 22:25:17 -0500] jforce: google chef windows cookbook
[2013-03-07 22:25:26 -0500] jforce: http://community.opscode.com/cookbooks/windows
[2013-03-07 22:25:42 -0500] jforce: rinse and repeat for any other missing dependencies.
[2013-03-07 22:26:05 -0500] troy_: got it, will try, thanks (seems odd for sure)
[2013-03-07 22:28:45 -0500] troy_: seems like the OpsCode java web page should list everything that it depends upon
[2013-03-07 22:29:00 -0500] jforce: troy_: it may depend on a thing that depends on a thing that depends on windows.
[2013-03-07 22:32:22 -0500] bougyman: how can I install chef server without omnibus?
[2013-03-07 22:32:29 -0500] bougyman: i can't find those instructions anymore
[2013-03-07 22:34:34 -0500] doomviking: troy_: what jforce said is correct, but in this case the java cookbook explicitly has a depends "windows"
[2013-03-07 22:34:51 -0500] doomviking: I know its weird
[2013-03-07 22:39:38 -0500] awgross: I was doign so well in refactoring geekbri's redisio cookbook, then i hit the 200 line configure method
[2013-03-07 22:39:45 -0500] awgross: *Cries*
[2013-03-07 22:44:24 -0500] jforce: awgross: I feel for you. I inherited a hell of a chef repo...
[2013-03-07 22:44:44 -0500] awgross: i look forward to passing my sins on to my developers someday
[2013-03-07 22:44:50 -0500] awgross: it has already started as they are working with chef now
[2013-03-07 23:11:57 -0500] Loadx: 200 line configure fuck me
[2013-03-07 23:12:42 -0500] awgross: not make configure
[2013-03-07 23:12:51 -0500] awgross: just a method called configure
[2013-03-07 23:12:54 -0500] awgross: in an LWRP
[2013-03-07 23:13:14 -0500] Loadx: oh snap
[2013-03-07 23:13:40 -0500] Loadx: i was goin to cry with you for a second there :P
[2013-03-07 23:13:55 -0500] miah: awgross: take a look at mine if you want to see other ways to handle builds. github.com/miah/chef-redis
[2013-03-07 23:14:23 -0500] awgross: miah: thanks miah i checked it out earlier, was having issues with some of the dependencies in it
[2013-03-07 23:14:36 -0500] magoo: does anyone know how to use the users_manage lwrp to configure a user from a databag that doesn't belong to a special group?
[2013-03-07 23:14:39 -0500] miah: awgross: oh?
[2013-03-07 23:14:50 -0500] awgross: miah: yeah metachef was causing problems
[2013-03-07 23:15:04 -0500] miah: it doesnt use metachef?
[2013-03-07 23:15:18 -0500] awgross: ill have to investigate again
[2013-03-07 23:15:25 -0500] awgross: i grabbed the version from the 2.0.0 tag
[2013-03-07 23:16:17 -0500] awgross: maybe something weird got messed up
[2013-03-07 23:16:36 -0500] miah: i'd definitely love to hear about any issues you have
[2013-03-07 23:16:45 -0500] miah: please feel free to ping me here, or file a issue
[2013-03-07 23:17:35 -0500] awgross: will do
[2013-03-07 23:22:08 -0500] Perceptes: Is there a way to prevent the "execute" resource from buffering/redirecting the output of the command? I want to follow what's happening with a long-running command
[2013-03-07 23:38:28 -0500] cwj: anyone had success using 'subscribes' with runit_service resources?
[2013-03-07 23:39:59 -0500] cwj: ah never mind i'm dumb

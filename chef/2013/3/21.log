[2013-03-21 00:10:59 -0400] hatchetation: is there a particular reason why so many cookbooks use IPs for hosts instead of hostnames?
[2013-03-21 00:11:29 -0400] yfeldblum: hatchetation, that's not the right question
[2013-03-21 00:11:34 -0400] hatchetation: I've hacked it out of several cookbooks and things seem to work, but wanted to make sure there's not a particular reason this is done before I go too far down this path
[2013-03-21 00:11:53 -0400] hatchetation: yfeldblum: enlighten me?
[2013-03-21 00:11:57 -0400] yfeldblum: hatchetation, the right question is why so many cookbooks don't allow a way to configure what shall be used
[2013-03-21 00:12:57 -0400] yfeldblum: hatchetation, some people require the first ipaddress on eth0; some people require the fqdn; some people require something else altogether
[2013-03-21 00:12:59 -0400] hatchetation: in theory they could just refer to node['service']['host'] and accept an IP literal, yeah?
[2013-03-21 00:13:37 -0400] hatchetation: yeah, it's that complexity with chef attempting to introspect the IP address and passing it around as a literal that irks me
[2013-03-21 00:14:16 -0400] yfeldblum: hatchetation, that could work sometimes
[2013-03-21 00:14:25 -0400] yfeldblum: hatchetation, but a more general solution is often needed
[2013-03-21 00:15:47 -0400] hatchetation: I can see that for service discovery, sure.
[2013-03-21 00:17:25 -0400] |rt|: With many cloud deployments hostnames don't mean much.
[2013-03-21 00:18:28 -0400] bluekelp: yeah i'm running into that.  the fqdn on new nodes isn't reachable/resolvable by anyone but the node itself
[2013-03-21 00:21:58 -0400] yfeldblum: lulz ruby scripts don't work when switching to chef-full because there's no ruby
[2013-03-21 00:25:54 -0400] yfeldblum: poll time: should VMs have a system ruby for running admin ruby scripts (e.g. cron jobs written in ruby) even when using chef-full? or should those admin ruby scripts use the chef-full ruby? or should those ruby scripts be written in $OTHER_LANG?
[2013-03-21 00:33:34 -0400] bluekelp: yfeldblum: where to these ruby scripts live (on the f/s)?  i'm leaning on system ruby
[2013-03-21 00:35:25 -0400] yfeldblum: bluekelp, suppose they can live anywhere; they're adminy scripts that do adminy things, and are dropped wholesale by chef from a cookbook/files/default/file.rb cookbook_file thingy
[2013-03-21 00:37:59 -0400] bluekelp: yfeldblum: i'll admit ignorance of what you're doing.  but something re: a VM?  :) I'd prefer system ruby so i could (if I wanted to) use rvm to switch/patch instead of what i assume would be hard-coded paths if you use the chef-full ruby (path)
[2013-03-21 01:18:19 -0400] jtimberman: yfeldblum: imo, if you need ruby for non-chef things, install the ruby you want in a recipe.
[2013-03-21 01:18:32 -0400] jtimberman: rbenv, rvm, system ruby
[2013-03-21 01:37:46 -0400] pixlpushr: why would my ubuntu packages not install when using the "package" resource? i'm trying to install libjpeg-dev on ubuntu precise
[2013-03-21 01:38:32 -0400] pixlpushr: here's the relevant part of my recipe: http://dpaste.com/1029636/
[2013-03-21 01:39:30 -0400] tomdzk: pixlpushr: simplest way to find out is to ssh to the box and try the apt-get install manually
[2013-03-21 01:39:38 -0400] tomdzk: to see what the error is
[2013-03-21 01:40:21 -0400] pixlpushr: tomdzk: i've triedno error
[2013-03-21 01:40:35 -0400] pixlpushr: sudo apt-get install libjpeg-dev
[2013-03-21 01:40:46 -0400] tomdzk: any output from apt when running chef-client with debug logging ?
[2013-03-21 01:41:52 -0400] pixlpushr: unfortunately not. http://dpaste.com/1029643/
[2013-03-21 01:42:51 -0400] tomdzk: pixlpushr: that looks like it's on info level, did you try debug level ?
[2013-03-21 01:44:49 -0400] jtimberman: pixlpushr: the packages are already installed.
[2013-03-21 01:45:01 -0400] jtimberman:     options "-y" # bypass prompts
[2013-03-21 01:45:09 -0400] jtimberman: is unnecessary btw, it's passed to apt-get install already
[2013-03-21 01:45:50 -0400] pixlpushr: jtimberman: my application raises an exception because the library is not installed. once i install the library it works
[2013-03-21 01:55:21 -0400] pixlpushr: tomdzk: btw, I'm using vagrant. here's the output of VAGRANT_LOG=DEBUG vagrant provision
[2013-03-21 01:55:22 -0400] pixlpushr: http://dpaste.com/1029647/
[2013-03-21 01:57:22 -0400] tomdzk: pixlpushr: do you have chef.log_level = :debug in your Vagrantfile ?
[2013-03-21 01:59:05 -0400] pixlpushr: tomdsk: no i don't. thankstrying now
[2013-03-21 02:03:30 -0400] pixlpushr: tomdsk: http://dpaste.com/1029652/ some progress
[2013-03-21 02:08:13 -0400] jtimberman: Temporary failure resolving 'us.archive.ubuntu.com'
[2013-03-21 02:08:45 -0400] jfl0wers: anyone know if there is a public repo for the ruby/chef omnibus rpm for centos
[2013-03-21 02:08:47 -0400] pixlpushr: tomdsk: i added the include_recipe "apt" which seems to solve that problem. it was already in my cookbook but i commented it out trying to find the root cause
[2013-03-21 02:09:41 -0400] jfl0wers: I am having trouble with berkshelf on CentOS with omnibus
[2013-03-21 02:10:01 -0400] jfl0wers: the stack size that ruby was compiled with is too small
[2013-03-21 02:10:18 -0400] jfl0wers: it seems to be smaller than on OSx and Windows
[2013-03-21 02:10:50 -0400] jfl0wers: I get one of these errors https://github.com/celluloid/celluloid/wiki/Fiber-stack-errors
[2013-03-21 02:11:30 -0400] jfl0wers: I was hoping that I could recompile the ruby that comes with omnibus for CentOS to fix this issue
[2013-03-21 06:20:45 -0400] gad0lin: guys, is there a smooth way to include other file in  template? Is it already done in one of community cookbooks? I want to generate use collecd-java to collect data from various MBeans.
[2013-03-21 06:27:21 -0400] GreatSUN: re
[2013-03-21 06:48:47 -0400] gad0lin: any other hints? ;)
[2013-03-21 07:11:11 -0400] psykidel1: Hi, whats the suggested way to mount the ephemeral storage in EC2 to a drive?
[2013-03-21 07:23:01 -0400] gad0lin: psykidel1: http://community.opscode.com/cookbooks/volumes
[2013-03-21 07:34:07 -0400] rd1988: any idea about this ERROR: Your private key could not be loaded from /root/.chef/rahul.pem
[2013-03-21 07:38:38 -0400] rd1988: Check your configuration file and ensure that your private key is readable
[2013-03-21 07:40:22 -0400] psykidel1: gad0lin: Thanks. I will read now.
[2013-03-21 07:51:49 -0400] psykidel1: gad0lin: Interesting, the original source at: https://github.com/infochimps-cookbooks/volumes, does not seem to exist.
[2013-03-21 08:59:39 -0400] alex_____: ENV['JAVA_HOME'] = "#{node['java']['home']}java"
[2013-03-21 08:59:41 -0400] alex_____: ENV['PATH'] = "$JAVA_HOME/bin:$PATH"
[2013-03-21 08:59:50 -0400] alex_____: is something like this possible?
[2013-03-21 09:43:52 -0400] alex_____: anybody who can help me
[2013-03-21 09:45:26 -0400] fclausen: alex: Maybe this will provide an answer - http://goo.gl/Izz8r
[2013-03-21 09:47:25 -0400] alex_____: so the awnser so no
[2013-03-21 09:48:15 -0400] fclausen: it appears so
[2013-03-21 09:49:03 -0400] spheromak: kisoku: i'll be at chef conf
[2013-03-21 09:49:35 -0400] spheromak: alex_____: what are you trying to do ?
[2013-03-21 09:49:48 -0400] spheromak: you can run an exec and pass in env args
[2013-03-21 09:50:36 -0400] spheromak: *in chef execute resource
[2013-03-21 09:50:44 -0400] alex_____: i need JAVA_HOME in my classpath
[2013-03-21 09:50:52 -0400] alex_____: path*
[2013-03-21 09:52:46 -0400] alex_____: but that is the big problem i need to concat it with my current path
[2013-03-21 09:59:28 -0400] spheromak: that stuffis available to you via ENV, and if you have stuff in attribs and are writing back out a file or calling an execute resource you can set teh values back.
[2013-03-21 09:59:44 -0400] spheromak: so are you trying to execute a command in a run, or write some init script ?
[2013-03-21 10:06:09 -0400] alex_____: execute it in a commanf
[2013-03-21 10:06:33 -0400] spheromak: http://docs.opscode.com/resource_execute.html
[2013-03-21 10:06:44 -0400] spheromak: environment attrib
[2013-03-21 10:11:14 -0400] alex_____: yes but can i concat it with an existing env variable
[2013-03-21 10:11:21 -0400] spheromak: yes
[2013-03-21 10:11:32 -0400] spheromak: ENV['PATH']  plain ruby
[2013-03-21 10:12:28 -0400] alex_____: ah thanks
[2013-03-21 10:12:46 -0400] alex_____: only one extra problem
[2013-03-21 10:13:00 -0400] alex_____: i install java in a ruby_block
[2013-03-21 10:13:21 -0400] alex_____: and i want to use the var in another
[2013-03-21 10:13:25 -0400] alex_____: is that possible?
[2013-03-21 10:16:49 -0400] spheromak: if that variable is an environment variable it may not be available to ENV, but I assume ou know some of the pathing and can set it up in attribs or some other variable in your recipe space that you can pass to your execute
[2013-03-21 10:16:53 -0400] spheromak: https://gist.github.com/spheromak/5212007
[2013-03-21 10:17:01 -0400] spheromak: for example concat path on execute
[2013-03-21 10:18:12 -0400] alex_____: ah thanks
[2013-03-21 10:21:37 -0400] tms:  I have installed chef-server. Now where can I find the steps for connecting it to chef-client
[2013-03-21 10:23:21 -0400] spheromak: chef-server 11 or 10 ?
[2013-03-21 10:24:11 -0400] spheromak: docs.opscode.com for mostthings, tho i dun think the server11 docs are up yet
[2013-03-21 10:24:47 -0400] tms: chef-server 11
[2013-03-21 10:24:55 -0400] zts: in any event, you connect the client to the server, not the other way around
[2013-03-21 10:25:15 -0400] zts: tms: do you have a workstation with knife configured to talk to your server?
[2013-03-21 10:26:23 -0400] tms: zts: Yes I have installed chef-client on other machine
[2013-03-21 10:28:08 -0400] zts: tms: usually you will have your chef server, your workstation (where you run knife), and then all the nodes where you run chef-client
[2013-03-21 10:28:37 -0400] zts: tms: there is documentation for setting up your workstation - http://docs.opscode.com/chef/install_workstation.html - and then using knife to bootstrap a node - http://docs.opscode.com/install_bootstrap.html
[2013-03-21 10:29:22 -0400] zts: tms: I'm not sure if there's any good docs for what to do if you install chef-client on the node yourself - it's not too hard, but maybe it's easier to follow the documentation when you're getting started
[2013-03-21 10:29:25 -0400] tms: zts: ok will follow those links
[2013-03-21 10:30:44 -0400] tms: zts: workstation will be on server side ?
[2013-03-21 10:30:54 -0400] zts: tms: one thing I will point out, unfortunately the installation instructions all assume you are using Opscode's paid-for Chef servers.  On the "install workstation" page, there's a section about downloading PEM files that will be different for you
[2013-03-21 10:31:15 -0400] zts: just looking for the correct information for you...
[2013-03-21 10:32:33 -0400] tms: zts: yes I am not using Opscode's paid-for Chef servers . I have installed it locally
[2013-03-21 10:33:27 -0400] zts: tms: this doc is a bit old, but I think this section still works the same on 11 Server: http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually#InstallingChefServerManually-ConfiguretheCommandLineClient
[2013-03-21 10:35:45 -0400] zts: oh, even better... here's an open issue about adding the relevant details to the new docs: https://github.com/opscode/chef-docs/issues/41
[2013-03-21 10:36:15 -0400] zts: which links to this, which contains those details: http://chef-docs.s3-website-us-east-1.amazonaws.com/install_workstation.html
[2013-03-21 10:42:55 -0400] gokr: tms: This is better I think.
[2013-03-21 10:42:58 -0400] gokr: Oops.
[2013-03-21 10:43:00 -0400] gokr: tms: http://docs.opscode.com/install_workstation.html
[2013-03-21 10:43:21 -0400] gokr: Ah, perhaps that was the doc zts pointed at, although differen URL.
[2013-03-21 10:43:46 -0400] gokr: I am actually in the process of rewriting my "install chef-server and workstation on a box" recipes.
[2013-03-21 10:43:51 -0400] gokr: To use 11.
[2013-03-21 10:44:08 -0400] zts: gokr: I think that one is missing some updates (specifically, explaining where to find the pem files from the open source server)
[2013-03-21 10:44:17 -0400] gokr: zts: Aha.
[2013-03-21 10:44:17 -0400] zts: however my morning coffee has not yet sunk in, so I may have overlooked it :)
[2013-03-21 10:44:46 -0400] gokr: Another thing I just "noticed" - include_recipe ...yeah, works fine. If you declare a dependency in metadata.rb - gotcha!
[2013-03-21 10:45:09 -0400] gokr: The include_recipe doc page should mention that - it is mentioned somewhere else instead.
[2013-03-21 10:47:02 -0400] zts: yeah, that should definitely be called out
[2013-03-21 10:47:18 -0400] zts: possibly in the docs for LWRPs/Definitions/Libraries too, but it's a more obvious problem with include_recipe
[2013-03-21 10:48:19 -0400] AJ_: Hi, im having knife hand when i try and bootstrap clients, this was working fine recently but today its getting stuck after getting a pty: DEBUG: queueing packet nr 8 type 98 len 2876 DEBUG: sent 2984 bytes DEBUG: read 88 bytes DEBUG: received packet nr 7 type 93 len 28 INFO: channel_window_adjust: 0 +2097152 DEBUG: received packet nr 8 type 99 len 12 INFO: channel_success: 0
[2013-03-21 10:48:25 -0400] AJ_: and ideas?
[2013-03-21 10:48:29 -0400] BryanWB: sup sup chefs
[2013-03-21 10:48:35 -0400] zts: hola BryanWB
[2013-03-21 10:48:47 -0400] BryanWB: zts, hey dude
[2013-03-21 10:49:02 -0400] AJ_: hang*
[2013-03-21 10:49:44 -0400] zts: BryanWB: saw your jvmargs announce, seems like a good idea (although I don't have an immediate use for it!)
[2013-03-21 10:49:56 -0400] kernel_panik: hi guys!  how I can set the ENV variables (like  PATH) for a specific user  w/ chef?
[2013-03-21 10:51:40 -0400] zts: kernel_panik: for a specific user, you'll need to manage their shell configuration files - ~/.profile or ~/.bashrc or whatever is appropriate for the shell they are using
[2013-03-21 10:52:08 -0400] kernel_panik: yes, I thot there is a chef resource for do that
[2013-03-21 10:52:58 -0400] zts: kernel_panik: it gets asked often enough that it'd be nice if there was :)  But there is so much variation in what is required, I don't think it's possible to make a generally useful resource
[2013-03-21 10:53:33 -0400] zts: maybe someone will prove me wrong
[2013-03-21 10:56:30 -0400] kernel_panik: ok, I do it  w/  script reoure
[2013-03-21 10:56:36 -0400] kernel_panik: *resource
[2013-03-21 10:58:02 -0400] gokr: Ehm, daft question - the Omnibus installer includes the client/solo, right?
[2013-03-21 10:58:16 -0400] gokr: I mean, the Omnibus *server* installer.
[2013-03-21 10:58:43 -0400] zts: gokr: I don't believe so, no
[2013-03-21 10:58:46 -0400] zts: let me double-check
[2013-03-21 10:59:05 -0400] zts: "sort of"
[2013-03-21 10:59:13 -0400] gokr: No, you are probably right. i am fooling myself since I am inside a Vagrant box.
[2013-03-21 10:59:15 -0400] zts: If you install the omnibus client, you end up with /opt/omnibus/bin/chef-client
[2013-03-21 10:59:29 -0400] zts: If you install the omnibus server (11, at least), you'll find /opt/omnibus/embedded/bin/chef-client
[2013-03-21 10:59:46 -0400] zts: ie, omnibus server has chef-client installed as a gem in its embedded ruby
[2013-03-21 11:00:04 -0400] zts: I'm not sure whether you'd want to be using that to manage your system though
[2013-03-21 11:00:05 -0400] gokr: Right! There it is.
[2013-03-21 11:00:26 -0400] gokr: Ehm.
[2013-03-21 11:00:35 -0400] zts: (at the same time, I'm not sure why you shouldn't)
[2013-03-21 11:00:56 -0400] gokr: I am creating a server that is both a chef-server and a workstation at the same time.
[2013-03-21 11:01:27 -0400] gokr: And... frankly, installing chef (in all its flavor and components etc) is a PITA.
[2013-03-21 11:02:16 -0400] gokr: So... you think I should probably install the Omnibus client too?
[2013-03-21 11:02:30 -0400] gokr: And not use that embedded client in the server?
[2013-03-21 11:03:04 -0400] zts: I honestly don't know well enough to recommend one way or the other - I've gone down the road of installing the omnibus client alongside the omnibus server, on my chef server
[2013-03-21 11:03:09 -0400] gokr: I would presume the Omnibus client ends up in its own "universe" then. So in Vagrant I will have three different chef-client suddenly ;)
[2013-03-21 11:03:26 -0400] zts: one thing I like about that approach is that I can upgrade the client the same way on all of my nodes, and without messing around with the guts of the server installation
[2013-03-21 11:03:40 -0400] zts: but I have no idea whether that's necessary/recommended/indifferent
[2013-03-21 11:03:44 -0400] gokr: zts: Yeah, I am all for "safe" here.
[2013-03-21 11:04:08 -0400] zts: yeah, inside a vagrant box, I guess that starts looking pretty ridiculous :)
[2013-03-21 11:04:10 -0400] gokr: I am doing this from a recipe - how do you install the omnibus client?
[2013-03-21 11:04:25 -0400] gokr: I mean, from a recipe.
[2013-03-21 11:05:01 -0400] gokr: I am using the chef-server cookbook for chef 11 to install the omnibus server stuff. But the client...
[2013-03-21 11:05:37 -0400] zts: gokr: maybe check out this cookbook - https://github.com/hw-cookbooks/omnibus_updater
[2013-03-21 11:05:39 -0400] gokr: (chef-server cookbook from github, not the one on "site" because that one is old)
[2013-03-21 11:06:13 -0400] zts: gokr: for new installs, I've been using "knife bootstrap" or installing the omnibus package outside of Chef, but I have used that cookbook to migrate some older nodes to the omnibus installer
[2013-03-21 11:06:27 -0400] zts: but I haven't looked into it more deeply than that
[2013-03-21 11:06:58 -0400] gokr: Mm, my use case is slightly different - I am "scripting" all this using recipes.
[2013-03-21 11:07:46 -0400] gokr: Yeah, that may sound odd - but ... well, a long story. I am building an appliance that will work as a fairly advanced "cloud installer".
[2013-03-21 11:08:01 -0400] tms: gokr: zts:  thank you. I will follow the links
[2013-03-21 11:08:13 -0400] gokr: And the first thing this appliance can do - when fired up in say VirtualBox - is to "install itself" onto a cloud.
[2013-03-21 11:08:21 -0400] gokr: And it is doing this using... tada, chef.
[2013-03-21 11:08:59 -0400] zts: gotcha
[2013-03-21 11:09:36 -0400] AJ_: Does anyone have any experience of knife hanging when bootstrapping rhel clients?
[2013-03-21 11:10:04 -0400] gokr: Anyway, I want to keep my dependencies down ... perhaps I will adjust/clone the chef-server recipe to also do client.
[2013-03-21 11:10:25 -0400] gokr: I did stumble onto a chef-client cookbook but it looked ... too advanced.
[2013-03-21 11:11:30 -0400] zts: yeah, there's a lot in that one
[2013-03-21 11:12:13 -0400] gokr: This one: https://github.com/opscode-cookbooks/chef-client
[2013-03-21 11:12:56 -0400] gokr: And oh, it looks like chef 10 also.
[2013-03-21 11:17:15 -0400] zts: just checked, and I'm using it with Chef 11 without issues - although I think it's more concerned with managing it once it's installed, rather than getting it there to begin with
[2013-03-21 11:17:47 -0400] gokr: Or I just use that install.sh thingy from a "execute". I can give install.sh a version I see.
[2013-03-21 11:18:16 -0400] zts: yeah, that's probably the simplest option
[2013-03-21 11:26:00 -0400] rd1988: any idea about  how to restart apache2 services from chef server on all the client ......?
[2013-03-21 11:33:27 -0400] zts: rd1988: that's not really how chef works, but you could use "knife ssh" to connect to each node and restart apache2
[2013-03-21 11:34:00 -0400] zts: rd1988: private chef is apparently going to have some feature where you can press a button in the web UI and run something on all the nodes, but I don't think that's out yet
[2013-03-21 11:40:52 -0400] gokr: Silly think I just managed to do, install using specific version: wget -O- https://www.opscode.com/chef/install.sh | sudo bash -s - -v 11.4.0
[2013-03-21 11:41:11 -0400] gokr: Being no unix guru that last part took some googling :)
[2013-03-21 11:44:51 -0400] zts: nice one :)
[2013-03-21 11:49:46 -0400] serjs: It's wrong to make cookbook repos using yum and apt cookbooks insde? As a result i have on both debian and centos default attributes in node from apt and yum attributes, can i set option to don't write default attributes to node if it's platform different?
[2013-03-21 11:53:35 -0400] zts: serjs: you could probably have a recipe to delete the attributes you don't want - but why?  Are they causing you a problem?
[2013-03-21 11:56:09 -0400] serjs: zts actually no, they have no effect of course (eg yum attributes for deb machine) but if in future if i have many servers unnecessary attributes may affect on search speed or something like this?
[2013-03-21 11:57:58 -0400] zts: serjs: in my experience, any effect is too small to worry about - I would suggest waiting until you find you have a problem
[2013-03-21 11:58:41 -0400] zts: serjs: even then, you could have a bigger impact by disabling some ohai plugins that you don't need (there's lots of data returned by default, even before you add your first cookbook)
[2013-03-21 11:59:46 -0400] serjs: zts yea) you are right, thank you
[2013-03-21 12:00:37 -0400] zts: you're welcome
[2013-03-21 12:33:09 -0400] Xiol: Does anyone have any examples of the use of search? Either through existing cookbooks or hypothetical ones? I can't help but feel that search is a powerful component of Chef that I'm not using, because I don't know when I *should* be using it.
[2013-03-21 12:33:39 -0400] Xiol: Just to clarify, I don't mean technical/DSL implementations, just more like "You'd use search when you want to do x"
[2013-03-21 12:34:08 -0400] kechagia: mmh. I'm getting a "ERROR: Method Not Allowed" response when I try "knife coobkook upload" on my new chef-0.11 server. "knife client list" works though. Any ideas?
[2013-03-21 12:35:22 -0400] spox: kechagia: get some verbosity output on your knife command
[2013-03-21 12:35:34 -0400] spox: should give some clues to go on
[2013-03-21 12:36:41 -0400] kechagia: spox: thanks, found it. needed to use https instead of http in my chef_server_url
[2013-03-21 12:36:56 -0400] spox: :)
[2013-03-21 12:37:14 -0400] rd1988: any idea about difference bettween  hosted chef , private chef and chef
[2013-03-21 12:37:14 -0400] kechagia: I think chef-client should follow the 301 though
[2013-03-21 12:40:51 -0400] kechagia: spox: you don't happen to know where the http connect is implemented in chef-client? I'd like to fix a pull-request..
[2013-03-21 12:41:24 -0400] spox: kechagia: probably in the chef::rest libs
[2013-03-21 12:41:33 -0400] spox: lib/chef/rest.rb and the like
[2013-03-21 12:44:01 -0400] spox: rd1988: http://www.opscode.com/chef/
[2013-03-21 12:44:08 -0400] spox: scroll down just a bit
[2013-03-21 12:44:24 -0400] spox: they have a nice infographic that shows you what you get/don't get with each
[2013-03-21 12:44:48 -0400] rd1988: thanks
[2013-03-21 12:49:14 -0400] rd1988: i have just install chef ......my question is can run script ,creat file ,  restart some services  on nods using chef server web interface....?
[2013-03-21 12:52:59 -0400] rd1988: will i eligibal to  run command on node by using  chef server
[2013-03-21 12:55:51 -0400] behemphi: @rd1988 you cannot run script etc from the chef server per se
[2013-03-21 12:55:57 -0400] behemphi: it holds the state of your nodes
[2013-03-21 12:56:08 -0400] behemphi: there is another client (overloaded word)
[2013-03-21 12:56:15 -0400] behemphi: it is called knife
[2013-03-21 12:56:37 -0400] behemphi: from the command line of your work station you can do something like `knife exec ` to run script
[2013-03-21 12:57:02 -0400] behemphi: `knife ssh ` to connect to a group of nodes (based on some search like environment or role or memory size)
[2013-03-21 12:58:33 -0400] behemphi: However, if the file is part of your configuration then really it should be part of a recipe that describes the state of a "converged node" which is fancy chef speak for "after the chef-client runs, all the stuff in your recipes should be there as described" :-)
[2013-03-21 12:59:05 -0400] behemphi: Finally @rd1988 there is a #learnchef channel Opscode just started up.  You might also try asking there too.
[2013-03-21 13:00:22 -0400] spox: rd1988: http://docs.opscode.com/index.html has great documentation to give an overview of how everything works + examples
[2013-03-21 13:51:15 -0400] kernel_panik: hey guys!  have u ever seen it ?   Cookbook  not found. If you're loading  from another cookbook, make sure you configure the dependency in your metadata
[2013-03-21 13:51:30 -0400] kernel_panik: there is not which cookbook...the name of it
[2013-03-21 13:58:07 -0400] cassianoleal: is there any way to easily find out all IP addresses in a node?
[2013-03-21 13:58:45 -0400] cassianoleal: I have a few network interfaces on the node, and I want to get all of their IPs in an array in a recipe using search
[2013-03-21 14:22:10 -0400] tacchino: Having a problem when performing a search on role
[2013-03-21 14:22:14 -0400] tacchino: knife search role '*:*' ERROR: ArgumentError: Unable to create Chef::RunList::RunListItem from String:"recipe[recipe[]]": must be recipe[] or role[]
[2013-03-21 14:22:28 -0400] tacchino: Happens both with knife and in a recipe
[2013-03-21 14:24:22 -0400] BryanWB: can i have private methods inside a module?
[2013-03-21 14:27:44 -0400] _ci: hello
[2013-03-21 14:28:08 -0400] _ci: Can I run a single cookbook on an already provisioned server without reprovisioning the entire server?
[2013-03-21 14:28:23 -0400] _ci: I don't want to lose my website data as I am not using chef for deployment at this time
[2013-03-21 15:08:14 -0400] kernel_panik: I am using cookbook_file resource  (I tried also w/ remote_file)   to download  a file from internet.... but why returns this error?  files/
[2013-03-21 15:08:29 -0400] kernel_panik: does not contain a file at any of these locations:
[2013-03-21 15:08:29 -0400] kernel_panik:   files/..
[2013-03-21 15:09:01 -0400] kernel_panik: (I am searching a file externally...  http://fooo.org/fooo.txt)
[2013-03-21 15:11:17 -0400] ngrayson: cookbook_file pulls from the file/ directory in your cookbook
[2013-03-21 15:11:36 -0400] ngrayson: s/file/files
[2013-03-21 15:12:31 -0400] ngrayson: remote_file is what you want
[2013-03-21 15:12:34 -0400] kernel_panik: and how I can set the search out fo the cookbook?
[2013-03-21 15:12:38 -0400] ngrayson: remote_file "#{Chef::Config[:file_cache_path]}/large-file.tar.gz" do
[2013-03-21 15:12:38 -0400] ngrayson:   source "http://www.example.org/large-file.tar.gz"
[2013-03-21 15:12:39 -0400] ngrayson: end
[2013-03-21 15:13:08 -0400] ngrayson: http://docs.opscode.com/resource_remote_file.html
[2013-03-21 15:13:26 -0400] kernel_panik: but Is already in this why.. in fact chef try to copy this :  files/centos/http://image_magick.veidrodis.com/image_magick/ImageMagick-6.8.3-9.tar.gz
[2013-03-21 15:14:05 -0400] ngrayson: can you gist the recipe?
[2013-03-21 15:16:13 -0400] kernel_panik: yes thanks!  https://gist.github.com/anonymous/5213827
[2013-03-21 15:17:43 -0400] kavi: hi, anyone plese help me, when i trying to login in chef-server webui, i'm getting error like ""We're sorry, but something went wrong.""
[2013-03-21 15:18:16 -0400] ngrayson: kernel_panik what is the node['my-openoffice']['imagemagick']['url'] value?
[2013-03-21 15:19:58 -0400] kernel_panik: default['my-openoffice']['imagemagick']['url'] = "http://image_magick.veidrodis.com/image_magick/ImageMagick-#{node['my-openoffice']['imagemagick']['version']}.tar.gz
[2013-03-21 15:20:15 -0400] kernel_panik: default['my-openoffice']['imagemagick']['version'] = "6.8.3-9"
[2013-03-21 15:23:39 -0400] ngrayson: did you try running it with the attribute? just putt the url in the recipe?
[2013-03-21 15:25:07 -0400] _ci: on my server, i can run sudo chef-client and update all my cookbooks by reprovisioning the server
[2013-03-21 15:25:34 -0400] _ci: Can I update a single cookbook on my server without reprovisioning the entire server?
[2013-03-21 15:29:13 -0400] kernel_panik: I try
[2013-03-21 15:29:15 -0400] ngrayson: kernel_panik well something clearly isn't working since you should be seeing 2 http:// in the url
[2013-03-21 15:29:23 -0400] ngrayson: you have it in 2 places
[2013-03-21 15:30:59 -0400] _ci: Anyone have any idea?
[2013-03-21 15:31:42 -0400] timops: @_ci you should update a single cookbook on your server using 'knife cookbook upload <cookbookname>"
[2013-03-21 15:31:49 -0400] timops: is that what you're trying to do?
[2013-03-21 15:32:27 -0400] kernel_panik: ngrayson I tryied to pu source "http://image_magick.veidrodis.com/image_magick/ImageMagick-6.8.3-8.tar.gz"
[2013-03-21 15:32:35 -0400] kernel_panik: but does not work
[2013-03-21 15:32:43 -0400] zts: _ci: Chef is designed so that you can run the same recipes every time - if nothing has changed, they won't do anything.  But look at the --override-runlist option if you really want to run a different run list just once
[2013-03-21 15:33:15 -0400] ngrayson: kernel_panik what error do you get?
[2013-03-21 15:33:35 -0400] _ci: @zts so if I run sudo chef-client AND I am NOT using chef for provisioning, it won't overwrite my existing web files?
[2013-03-21 15:34:00 -0400] _ci: I was under the impression that it did a fresh install each time?  Am I incorrect?
[2013-03-21 15:34:44 -0400] timops: @_ci it depends on the resource definition for your installer
[2013-03-21 15:34:59 -0400] timops: if it's just a package resource, chef will know that the provider doesn't need to take action
[2013-03-21 15:35:07 -0400] _ci: @timops not quite.  The cookbook has a different configuration than previously.  I want to update the cookbook on the server without overwriting the entire server
[2013-03-21 15:35:18 -0400] kernel_panik: https://gist.github.com/anonymous/5213971
[2013-03-21 15:35:55 -0400] timops: @_ci can you show us the diff between former/current cookbook?
[2013-03-21 15:36:54 -0400] _ci: installing postfix.  cookbook wasn't previously installed.  It is now installed but I am worried about sudo chef-client and the effect on the rest of the server
[2013-03-21 15:38:33 -0400] jtimberman: _ci: Chef doesn't make changes to the resources it manages if it doesn't need to. This is called convergence. If a package is already installed, then chef won't try to reinstall it. If the target config file on disk matches the contents as Chef would render from a template, it won't overwrite the target file. If you make a change either a) in the cookbook (like updating a template), or b) on the system itself (like updating the config file), Ch
[2013-03-21 15:38:52 -0400] ngrayson: kernel_panik that makes zero sense i don't have time to test it right now though
[2013-03-21 15:39:02 -0400] jtimberman: _ci: so if postfix is installed, chef doesn't try to install it. if the /etc/postfix/main.cf matches what chef would render from a template, it won't update.
[2013-03-21 15:39:42 -0400] timops: @kernel_panik: from the look of that gist, you're using a cookbook_file resource and not remote_file?
[2013-03-21 15:39:56 -0400] jtimberman: _ci: does that make sense?
[2013-03-21 15:39:58 -0400] timops: @kernel_panik: i'm looking at the second gist
[2013-03-21 15:40:31 -0400] _ci: @jtimberman yes, thanks!!  and use --override-runlist if I want to be sure.  Thanks!
[2013-03-21 15:40:54 -0400] timops: @_ci: don't forget --why-run also if you'd like to see what providers will take action
[2013-03-21 15:42:18 -0400] ngrayson: kernel_panik timops that is what i looked like too, which made no sense. the recipe kernel_panik gisted has remote_file
[2013-03-21 15:42:22 -0400] _ci: @timops wasnt familiar with that one.  Thanks
[2013-03-21 15:42:50 -0400] timops: @ngrayson yeah i see that now .. hmmm...
[2013-03-21 15:43:19 -0400] timops: @kernel_panik run chef-client -ldebug ?
[2013-03-21 15:43:19 -0400] ngrayson: kernel_panik are you for sure running the right version of the recipe/cookbook to get that error?
[2013-03-21 15:43:22 -0400] timops: make a new gist?
[2013-03-21 15:43:45 -0400] kernel_panik: sure one moment!
[2013-03-21 15:43:50 -0400] timops: also, would be nice to see attributes file
[2013-03-21 15:47:22 -0400] Flex: hey guys, how can I get away from multiple blocks used to create the directories in this recipe? https://gist.github.com/25547884a1d0720fcad3
[2013-03-21 15:48:42 -0400] kernel_panik: <ngrayson>  <timops>    unfortunately I have to go..  but thank you very much for your help,  sure there is something of wrong in my recipes. I let u know!
[2013-03-21 15:49:03 -0400] timops: @kernel_panik ok, we'll be around to help out when you come back
[2013-03-21 15:49:07 -0400] jonlives: Flex: stick a single directory block in a node['flume'].each loop
[2013-03-21 15:49:18 -0400] kernel_panik: thanks ;)
[2013-03-21 15:49:44 -0400] timops: @Flex create an array of dirs?
[2013-03-21 15:50:18 -0400] Flex: ok sorry new to ruy/chef so still learning :/
[2013-03-21 15:50:29 -0400] timops: @Flex no problem!
[2013-03-21 15:50:39 -0400] timops: let me draw up a quick example for you
[2013-03-21 15:50:48 -0400] Flex: ah thank you, much appreciated :)
[2013-03-21 15:51:12 -0400] Flex: something like directories = [ bla, bla, bla]
[2013-03-21 15:51:24 -0400] Flex: directories.each do ?
[2013-03-21 15:52:39 -0400] timops: @Flex something like this should do the trick: https://gist.github.com/timops/5214117
[2013-03-21 15:53:09 -0400] timops: replace that '-' with a '='
[2013-03-21 15:53:16 -0400] Flex: lol was thinking that :P
[2013-03-21 15:53:20 -0400] Flex: thx dude
[2013-03-21 15:53:40 -0400] timops: there's also some other shortcuts in ruby for creating arrays
[2013-03-21 15:53:45 -0400] timops: that might be a little bit cleaner
[2013-03-21 15:53:58 -0400] timops: for example:  dies = %w{ /dir/1 /dir/2 /dir/3 }
[2013-03-21 15:54:00 -0400] timops: have fun :D
[2013-03-21 15:54:06 -0400] timops: dirs
[2013-03-21 15:54:24 -0400] Flex: yes I liek your second method :)
[2013-03-21 15:54:49 -0400] Flex: and then would just be dies.each do
[2013-03-21 15:54:51 -0400] Flex: ?
[2013-03-21 15:55:11 -0400] timops: yep! just make sure you pass the current element of the array to your block
[2013-03-21 15:55:20 -0400] timops: dies.each do |this_dir|
[2013-03-21 15:56:18 -0400] Aaiiit: I'm trying out Chef.  Love it, still having troubles debugging and understanding the magic though.  I'm using it with vagrant right now.   I'm experiencing the same problem with trying to install different recipes.  chef-stacktrace.out : NoMethodError: undefined method `default_action'
[2013-03-21 15:56:37 -0400] Flex: can I not just to dirs = %w{ 'bla' 'bla' 'bla'}
[2013-03-21 15:56:46 -0400] Flex: and then dirs.each do
[2013-03-21 15:56:55 -0400] Flex: why do I have to pass |this_dir| ?
[2013-03-21 15:57:37 -0400] timops: @Flex - because you are doing work against one element of the array at a time
[2013-03-21 15:57:41 -0400] ianselby: was wondering if anyone could point me to the right logs to figure out what the cause of a 500 error is on a knife cookbook upload
[2013-03-21 15:57:44 -0400] timops: that's how you pass it to a block
[2013-03-21 15:58:03 -0400] ianselby: log location, rather
[2013-03-21 15:58:10 -0400] Flex: dirs.each do |x| be ok?
[2013-03-21 15:58:13 -0400] timops: @ianselby did you already try 'knife cookbook upload -V' ?
[2013-03-21 15:58:49 -0400] timops: @Flex yep, the variable between the pipes is temporary.. you can name it like any other var
[2013-03-21 15:59:04 -0400] ianselby: @timops, just did, not much there other than INFO: HTTP Request Returned 500 Internal Server Error: internal service error
[2013-03-21 15:59:22 -0400] Flex: thx timops, will mock something up and see if you think it will work :)
[2013-03-21 15:59:31 -0400] timops: @Aaiiit more logs? gist of Vagrantfile?
[2013-03-21 15:59:51 -0400] ianselby: looks like it uploads metadata.rb, recipes/default.rb, README.md, then pukes
[2013-03-21 15:59:59 -0400] ianselby: consequently, the only three files in the cookbook
[2013-03-21 16:00:15 -0400] ianselby: ERROR: Server returned error for https://XXXXXX/sandboxes/0000000000001aa4141b3e2c9b1d67c3
[2013-03-21 16:00:24 -0400] ianselby: was working a few days ago
[2013-03-21 16:00:39 -0400] timops: @ianselby you're running OSS chef server?
[2013-03-21 16:00:48 -0400] ianselby: yep
[2013-03-21 16:00:55 -0400] timops: is it chef 11 ?
[2013-03-21 16:01:02 -0400] ianselby: yessir
[2013-03-21 16:02:09 -0400] timops: i think it would be best to dig into web machine logs
[2013-03-21 16:02:19 -0400] timops: let me see if i can get a path for you
[2013-03-21 16:03:21 -0400] ianselby: @timops, thanks, just trying to figure out the best place to start digging around
[2013-03-21 16:03:22 -0400] timops: @ianselby http://docs.opscode.com/ctl_chef_server.html
[2013-03-21 16:03:34 -0400] timops: did you try chef-server-ctl tail
[2013-03-21 16:03:57 -0400] timops: this will tail ALL of the logs.. might get a little noisy
[2013-03-21 16:04:52 -0400] Flex: timops: would this work? :)
[2013-03-21 16:04:52 -0400] Flex: https://gist.github.com/joshmyers/89ac244a5372476d4ab7
[2013-03-21 16:06:02 -0400] queso: How do I conditionally load an encrypted data bag item?  Doing  if ...  secret = Chef::EncryptedDataBagItem.load_secret(...)  in my recipe does not work.
[2013-03-21 16:06:24 -0400] timops: @Flex i would recommend you build out an array inside of the attributes file, and then it would look like my_array.each do |dir|
[2013-03-21 16:07:05 -0400] ianselby: @timops, sent you the output privately, so as not to spam the whole room with log output
[2013-03-21 16:07:13 -0400] Flex: ok thx timops
[2013-03-21 16:07:17 -0400] Flex: but would ^^ work?
[2013-03-21 16:08:35 -0400] Aaiiit: @timops  default_action problem had something to do with incompatible chef versions i guess    just removed a box, downloaded a newer one (with updated chef-client) and now it works    , got lucky
[2013-03-21 16:09:33 -0400] ianselby: @Flex, you need to remove the quotes from your list there and use a capital W for that array to expand properly
[2013-03-21 16:09:48 -0400] ianselby: I believe
[2013-03-21 16:09:50 -0400] timops: @Flex %w is for literals .. just use [ node[a], node[b] ] instead
[2013-03-21 16:09:59 -0400] timops: @ianselby yep! or that :D
[2013-03-21 16:10:30 -0400] timops: @Aaiit sweet! glad it's working out
[2013-03-21 16:11:11 -0400] Flex: oki
[2013-03-21 16:11:26 -0400] siXy: how can I load aribtary data into a node attribute at runtime?
[2013-03-21 16:11:55 -0400] ianselby: @siXy what kind of data?
[2013-03-21 16:12:50 -0400] siezer: siXy through cookbook attribute files, role/environment definitions, or from recipes via node.<level>.set
[2013-03-21 16:12:54 -0400] siXy: ianselby: well in this case, lists of loaded selinux modules, current state of selinux booleans, etc
[2013-03-21 16:13:25 -0400] siezer: ah. I'd use cookbook attribute files
[2013-03-21 16:13:32 -0400] timops: @queso try handling it as an exception instead?
[2013-03-21 16:13:39 -0400] timops: begin / rescue
[2013-03-21 16:13:41 -0400] ianselby: you want to use that data during a cookbook run?
[2013-03-21 16:13:55 -0400] queso: timops: Is that "clean"?
[2013-03-21 16:14:03 -0400] siXy: siezer: kinda.  I need to set the attributes based on what's actually on the node, so I can check that it matches.
[2013-03-21 16:14:12 -0400] timops: @queso - what do you want to happen if the data bag doesn't exist?
[2013-03-21 16:14:15 -0400] ianselby: if that were the case, I'd write a function in the cookbook you could call to get the data back and then just use it that way
[2013-03-21 16:14:41 -0400] siezer: siXy an ohio plugin may work
[2013-03-21 16:14:46 -0400] siezer: ohai even
[2013-03-21 16:14:58 -0400] ianselby: that would be better ;)
[2013-03-21 16:15:06 -0400] siXy: I was afraid of that :(
[2013-03-21 16:15:50 -0400] siezer: or a "ghetto ohai plugin" via a library for starters
[2013-03-21 16:15:57 -0400] siXy: hoping there might be some way to do something like node['selinux']['booleans'] = execute "getsebool -a"
[2013-03-21 16:15:59 -0400] yfeldblum: what's the best way of detecting whether chef is installed using the chef-full installer, from within a recipe?
[2013-03-21 16:16:15 -0400] siXy: and have that persist for the entire chef run, not just that cookbook
[2013-03-21 16:16:29 -0400] siezer: siXy everything persists over the entire chef run
[2013-03-21 16:16:55 -0400] siezer: chef-client -> sync cookbooks -> load all data from libraries/attributes/resources/providers, etc.....
[2013-03-21 16:17:11 -0400] timops: @siXy ianselby is right, building a simple ohai plugin is the way to go
[2013-03-21 16:17:17 -0400] siezer: then finally, evaluate the recipes in the run_list, compiling your resource_collection
[2013-03-21 16:17:20 -0400] siezer: then converge
[2013-03-21 16:17:27 -0400] siXy: oh really? so I can do that ^ in cookbook A and then read node['selinux']['booleans'] in cookbook B? that's perfect.  thanks!
[2013-03-21 16:17:54 -0400] siezer: yep. just make sure to put "depends cookbookA" in cookbookB's metadata
[2013-03-21 16:18:42 -0400] siezer: yfeldblum check the ruby path maybe? I saw that technique in the chef-client cookbook iir
[2013-03-21 16:18:44 -0400] siezer: c
[2013-03-21 16:18:49 -0400] siXy: thanks everyone :)
[2013-03-21 16:19:50 -0400] queso: timops: http://dpaste.com/1030303/ This is what I'm trying to accomplish.
[2013-03-21 16:22:04 -0400] timops: @yfeldblum check the path of node['chef_packages']['chef']['chef_root']  ?
[2013-03-21 16:23:09 -0400] mml: is there some reason why when i run chef-client -o "myrecipe" all my node data seems to be empty?
[2013-03-21 16:23:18 -0400] mml: with a normal run, it's all in place as expected
[2013-03-21 16:24:57 -0400] timops: @queso so there's a possibility that the data bag doesn't exist and you want to handle that gracefully?
[2013-03-21 16:28:17 -0400] AmishGeek: i'm still running on chef-server 10.4  how much of a pita is it going to be to upgrade to 11.x?
[2013-03-21 16:28:39 -0400] nlloyds: Anybody written a simple nagios check for omnibus chef server? Like `chef-server-ctl status | grep ^[^run] |  ?
[2013-03-21 16:28:47 -0400] AmishGeek: considering i seem to no longer be able to bootstrap new nodes with my current knife repo
[2013-03-21 16:29:28 -0400] nlloyds: AmishGeek: I'm in the middle of doing it right now. Looks pretty easy if you follow http://www.opscode.com/blog/2013/03/12/5106/
[2013-03-21 16:30:21 -0400] nlloyds: AmishGeek: I had problems using the 11 client with a 10 server. Are you using the 10 or 11 client?
[2013-03-21 16:31:00 -0400] AmishGeek: nlloyds: i'm bootstrapping ubuntu on 12.04, so if 11 is the default when ubuntu does apt-get install chef-client.. then yeah
[2013-03-21 16:31:13 -0400] AmishGeek: i haven't updated my bootstrap scripts in a while
[2013-03-21 16:31:51 -0400] AmishGeek: its actually about time i overhaul all my cookbooks and recipes too
[2013-03-21 16:32:07 -0400] nlloyds: AmishGeek: You can set --bootstrap-version 10.24.0, at least on the chef-full bootstrap
[2013-03-21 16:32:39 -0400] AmishGeek: i might just throw up a new chef 11 server, upload all my cookbooks and swap old nodes with new ones on the 11 setup
[2013-03-21 16:32:56 -0400] AmishGeek: since i'm really just using chef to manage dummy web server nodes on amazon
[2013-03-21 16:33:21 -0400] timops: @AmishGeek knife essentials (part of knife core now) makes this really easy
[2013-03-21 16:33:30 -0400] nlloyds: AmishGeek: That's what I'm doing. The omnibus install for chef server 11 is pretty insanely good.
[2013-03-21 16:33:36 -0400] timops: it's part of that post that nlloyds already shared
[2013-03-21 16:33:53 -0400] AmishGeek: timops: thanks, i'm reading that post now
[2013-03-21 16:37:52 -0400] jkeiser: I'd love to hear about experiences with the upgrade :)
[2013-03-21 16:38:21 -0400] jtimberman: jkeiser: knife-essentials is also a separate gem, right? has a new release been done since chef 11?
[2013-03-21 16:38:58 -0400] jkeiser: jtimberman: nope.  There are so many changes that we've decided to let -essentials develop separately and merge the whole thing when it settles down
[2013-03-21 16:39:12 -0400] jkeiser: If you want to upgrade, you MUST gem install knife-essentials
[2013-03-21 16:39:29 -0400] jkeiser: Consider it the development release (though it's pretty widely used)
[2013-03-21 16:39:56 -0400] jmickle: interesting
[2013-03-21 16:40:06 -0400] c_t: ahoi ohai
[2013-03-21 16:42:16 -0400] jtimberman: jkeiser: gotcha.
[2013-03-21 16:44:06 -0400] nkrinner: make rel
[2013-03-21 16:44:15 -0400] nkrinner: sorry wrong window
[2013-03-21 16:44:37 -0400] jmickle: hehehe at least it wasn't your password ;-P
[2013-03-21 16:44:47 -0400] c_t: t0ps3kr1t
[2013-03-21 16:46:05 -0400] nkrinner: jmickle, :-)
[2013-03-21 16:47:37 -0400] jmickle: :-)
[2013-03-21 16:48:51 -0400] jtimberman: c_t: I use the same password on my luggae.
[2013-03-21 16:49:19 -0400] nlloyds: I really wanted to go there, but restrained myself
[2013-03-21 16:50:17 -0400] c_t: it's the piece of pop culture most associated with passwords
[2013-03-21 16:50:43 -0400] queso: timops: I want it to not create the SSL keys if there is no node["server"]["ssl_cert"] set, hence the if statement. :)
[2013-03-21 16:50:56 -0400] queso: timops: I want it to fail if the data bag key doesn't exist.
[2013-03-21 16:51:10 -0400] queso: timops: But only if node["server"]["ssl_cert"] is set to something.
[2013-03-21 16:53:54 -0400] timops: @queso begin/rescue block would cover it, you can also peek at the data bag item with Chef::EncryptedDataBagItem.nil? afaik
[2013-03-21 16:54:57 -0400] queso: timops: I don't think I've explained myself well.  I'm asking: Is there a way I can use an if statement as I have it?  If this attribute is set, do this block, otherwise don't do the block.
[2013-03-21 16:55:24 -0400] queso: timops: I don't want to try/except on if the data bag exists.
[2013-03-21 16:55:56 -0400] timops: ok, so you're only interested in looking at the "if node["server"]["ssl_cert"]" part ?
[2013-03-21 16:56:36 -0400] timops: i can't see where it's failing, maybe logs would help us here
[2013-03-21 16:56:36 -0400] queso: timops: Right. Even with that attribute being an empty string, it still attempts to grab the data bag, which makes no sense.
[2013-03-21 16:56:37 -0400] timops: ?
[2013-03-21 16:57:05 -0400] queso: timops: I think it's because the Chef::EncryptedDataBagItem.load_secret() and Chef::EncryptedDataBagItem.load() are evaluated early in the run?
[2013-03-21 16:57:27 -0400] timops: @queso, the if statement should also get evaluated at compile time
[2013-03-21 16:57:32 -0400] timops: so i don't think that's the issue
[2013-03-21 16:57:41 -0400] timops: can you show me the log ?
[2013-03-21 16:58:02 -0400] queso: timops: I will change it to read "if false" and see what happens.
[2013-03-21 16:58:10 -0400] timops: ok
[2013-03-21 16:59:19 -0400] queso: timops: Hmm, it's running now!  the if node[..][..] must not evaluate the way Python does. ;)
[2013-03-21 16:59:32 -0400] timops: LOL! glad i could help ;)
[2013-03-21 16:59:39 -0400] queso: timops: Empty strings apparently aren't falsy..
[2013-03-21 16:59:42 -0400] _hippiehacker: http://docker.io/ looks like fun in a box
[2013-03-21 16:59:53 -0400] queso: timops: Yes, thank you. :)
[2013-03-21 17:02:57 -0400] danielle_: so dumb question, I recently installed chef-server from a deb but i can't get chef-server-webui to work.
[2013-03-21 17:03:38 -0400] danielle_: I think i might need a configuration file for it
[2013-03-21 17:03:47 -0400] nlloyds:  danielle_ : I think it might be at the same URL as the API, if you're using the omnibus installer
[2013-03-21 17:04:15 -0400] danielle_: yeah the url is the same
[2013-03-21 17:04:55 -0400] timops: @danielle_ can you hit the web server from localhost using something like curl/telnet?
[2013-03-21 17:05:16 -0400] danielle_: no, i've been trying with netcat
[2013-03-21 17:05:41 -0400] danielle_: it says 400 Bad Request
[2013-03-21 17:06:28 -0400] danielle_: I have a feeling i'm doing something incredibly stupid
[2013-03-21 17:06:32 -0400] zts: danielle_: if it's chef 11, did you specifically enable it in /etc/chef-server/chef-server.rb ?  (it was disabled for me, out of the box)
[2013-03-21 17:06:48 -0400] danielle_: no, i don't have a chef-server.rb
[2013-03-21 17:06:52 -0400] danielle_: how do i generate one?
[2013-03-21 17:08:32 -0400] timops: @danielle_ touch /etc/chef-server/chef-server.rb :)
[2013-03-21 17:08:38 -0400] timops: then...
[2013-03-21 17:08:40 -0400] danielle_: pff
[2013-03-21 17:08:50 -0400] zts: hrm, I don't remember needing to... but yeah, you could try that
[2013-03-21 17:08:58 -0400] zts: http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/ has some more instructions
[2013-03-21 17:09:05 -0400] danielle_: ah thank you
[2013-03-21 17:09:14 -0400] timops: yeah, there's a list of tunables somewhere
[2013-03-21 17:09:15 -0400] timops: thanks @zts :)
[2013-03-21 17:09:38 -0400] zts: Thank jtimberman for writing it :)
[2013-03-21 17:10:50 -0400] danielle_: thanks guys, i had assumed there was some autogenerate for that
[2013-03-21 17:11:24 -0400] ank: is there a way to suppress or redirect the ui output if I call Knife::Bootstrap.run from another plugin?
[2013-03-21 17:11:54 -0400] jtimberman: :)
[2013-03-21 17:11:58 -0400] jtimberman: zts: you're welcome.
[2013-03-21 17:13:45 -0400] bougyman: anyone use the chef_rvm cookbook and run into the 'could not find rvm' issue on user_install ?
[2013-03-21 17:14:16 -0400] bougyman: i had to manually /opt/chef/embedded/bin/gem i rvm to get past it. I have a feeling I could set an attribute to take care of that but can't figure it out.
[2013-03-21 17:15:24 -0400] bougyman: it failing on 'require rvm', line https://github.com/fnichol/chef-rvm/blob/master/recipes/default.rb#L25 during the compilation phase.
[2013-03-21 17:15:41 -0400] bougyman: even though he specifies the gem_package 'rvm' is supposed to allow it.
[2013-03-21 17:16:36 -0400] bougyman: should I try 'chef_gem' there instead of gem_package?
[2013-03-21 17:17:59 -0400] kavi: hi, anyone plese help me, when i trying to login in chef-server webui, i'm getting error like ""We're sorry, but something went wrong.""
[2013-03-21 17:19:07 -0400] timops: @kavi what do you get from chef-server-ctl status ?
[2013-03-21 17:29:43 -0400] railsraider: anyone can please help me with a regex on array elements?
[2013-03-21 17:30:12 -0400] railsraider: i am trying to get all upstart jobs for resque and filter out what i don't need
[2013-03-21 17:31:56 -0400] railsraider: http://pastie.org/6972793
[2013-03-21 17:38:53 -0400] Aaiiit: join #rvm
[2013-03-21 17:46:36 -0400] drgonzo65: I am having a problem with apt packages and upstart.  When I install an apt package, say Nginx, it installs it into /etc/init.d, starts the process, and sets it to run at boot.  I want to use upstart to run this process, so I need to do a service { action [:stop, :disable] } then setup the upstart config, but unless I then remove this block from the recipe, it will stoop the upstart service each time chef-client runs.  Has anyone figured out how to properly 
[2013-03-21 17:46:36 -0400] drgonzo65:  this?
[2013-03-21 17:49:37 -0400] kavi: hi, anyone plese help me, when i trying to login in chef-server webui, i'm getting error like ""We're sorry, but something went wrong.""
[2013-03-21 17:50:22 -0400] nlloyds: kavi: That's a 500 error. If you can find the log it's logging to you can see the exact error message
[2013-03-21 17:50:56 -0400] kavi: pls advise, which log should i check?
[2013-03-21 17:54:34 -0400] epc: hi guys, matti.
[2013-03-21 17:57:23 -0400] epc: hey guys, I have a really simple recipe that I'm using to learn chef (I'm new to it) which runs fine in chef-solo 10.24 but breaks in chef-solo 11.4.0. could someone help me out figure the couse? stacktrace is in http://pastebin.com/rv6p3TFR
[2013-03-21 17:58:12 -0400] nkrinner: epc,  maybe http://docs.opscode.com/breaking_changes_chef_11.html helps you
[2013-03-21 18:00:57 -0400] epc: thanks mkrinner! I actuall
[2013-03-21 18:02:53 -0400] epc: : thanks mkrinner! I actually read it already, but could not found anything. The recipe is really, really simple (taken from a devops screen cast) and it only install nginx in a server. And the same recipe works perfectly in my local machine with chef-solo 11. only in the server with chef-solo it breaks.
[2013-03-21 18:04:04 -0400] epc: from the logs it seems that is something regarding  highline gem, but I'm lost on it.
[2013-03-21 18:06:49 -0400] Kzim: hi
[2013-03-21 18:07:57 -0400] matti: Hi
[2013-03-21 18:08:00 -0400] matti: epc: ;]
[2013-03-21 18:09:09 -0400] Kzim: i want to create a mongodb replicatset and i use chef server (but i don't want to use search). is there a very simple orchastration possible ? i was planning on put all members fqdn and info in a databag and perhaps use something like dominodes to lock understand the other members are setup
[2013-03-21 18:09:24 -0400] epc: hi matti! could you help me out with another problem?
[2013-03-21 18:09:44 -0400] matti: epc: ;] Let me see your paste.
[2013-03-21 18:10:02 -0400] epc: thanks. I pasted in http://pastebin.com/rv6p3TFR
[2013-03-21 18:10:19 -0400] matti: I know.
[2013-03-21 18:10:20 -0400] matti: [2013-03-21T17:51:18+00:00] DEBUG: IOError: closed stream
[2013-03-21 18:10:23 -0400] matti: IOError
[2013-03-21 18:11:37 -0400] matti: epc: Not sure how Chef forks to execute tar.
[2013-03-21 18:11:52 -0400] matti: epc: But it looks like tar ended and some file descriptors got closed.
[2013-03-21 18:12:07 -0400] matti: epc: Hence the closed stream IOError - you cannot read from closed fd.
[2013-03-21 18:12:45 -0400] matti: epc: When you do this: tar zxvfC /var/chef-solo/recipes.tgz /var/chef-solo; manually, does it finishes cleanly?
[2013-03-21 18:13:12 -0400] matti: epc: http://tickets.opscode.com/browse/CHEF-3084
[2013-03-21 18:14:00 -0400] matti: epc: What Ruby do you have?
[2013-03-21 18:14:54 -0400] matti: Kzim: You could include all the details in a data bags.
[2013-03-21 18:15:05 -0400] epc: matti: at first (yesterday) I was running 1.8.x, but today I moved to 1.9.3. maybe there was some residual in my server.
[2013-03-21 18:15:18 -0400] matti: Kzim: And when you run Solo / Client, load them and parse manually.
[2013-03-21 18:15:34 -0400] kavi: Hi, im getting error "We are sorry, but something went wrong" when i login in to chef server webUI
[2013-03-21 18:15:36 -0400] matti: Kzim: I do that with ZooKeeper / Kafka / etc, to setup proper unique IDs for each node.
[2013-03-21 18:15:59 -0400] matti: epc: Make sure that 1.9.x is in the PATH _before_ 1.8.
[2013-03-21 18:16:21 -0400] matti: epc: There is sometimes problem when scripts have #!/bin/env ruby
[2013-03-21 18:16:30 -0400] matti: epc: Or, when they load Ruby gems etc.
[2013-03-21 18:16:41 -0400] matti: epc: FWIW, it is better to get rid of 1.8 anyway
[2013-03-21 18:16:43 -0400] Kzim: matti, isn't that bad to have fqdn in a databag ? in a conf i mean ?
[2013-03-21 18:16:56 -0400] epc: got it. I'll launch a new server and retry from scratch with ruby 1.9.3
[2013-03-21 18:17:17 -0400] epc: got back to you in a few minutes with results. thanks!
[2013-03-21 18:17:19 -0400] matti: Kzim: If you do not want to rely on Nodes and search.
[2013-03-21 18:17:29 -0400] matti: Kzim: Then you have very little choice :)
[2013-03-21 18:17:44 -0400] matti: Kzim: Otherwise, how do you identify them?
[2013-03-21 18:17:53 -0400] matti: Kzim: There has to me some dependency, even a transitional one.
[2013-03-21 18:18:07 -0400] matti: Kzim: I use IP address of primary interface over FQDN.
[2013-03-21 18:18:14 -0400] matti: Kzim: It is ugly as hell.
[2013-03-21 18:18:24 -0400] matti: Kzim: And I will be tromented by it forever ;]
[2013-03-21 18:18:55 -0400] matti: epc: If you have Omnibus then it should be not a problem.
[2013-03-21 18:19:05 -0400] matti: epc: Unless you mean "server" as the actual host / Linux box.
[2013-03-21 18:19:18 -0400] UukGoblin: http://docs.opscode.com/resource_cron.html#attributes
[2013-03-21 18:19:34 -0400] UukGoblin: copy & paste fail: "The command to run. Default value: *."
[2013-03-21 18:19:35 -0400] epc: matti: yeah, I meant the linux machine being configured by chef-solo. :)
[2013-03-21 18:19:55 -0400] matti: epc: OK
[2013-03-21 18:19:59 -0400] kavi: Hi, im getting error "We are sorry, but something went wrong" when i login in to chef server webUI
[2013-03-21 18:20:08 -0400] matti: Kzim: Hosted?
[2013-03-21 18:20:25 -0400] matti: Kzim: If not, then check logs or something ;]
[2013-03-21 18:20:32 -0400] kklimonda: hmm.. I'm trying to use application_ruby cookbook with unicorn and it installs unicorn in /opt/chef/embedded but nothing ever adds /opt/chef/embedded/bin to the system PATH, so runit fails (not finding the unicorn exec). What did I do wrong? :)
[2013-03-21 18:22:04 -0400] kavi: hi anyone pls help me, i'm unable to login in to shef server WebUi
[2013-03-21 18:22:32 -0400] matti: kavi: http://www.catb.org/esr/faqs/smart-questions.html
[2013-03-21 18:22:38 -0400] kavi: after entering user id anf pwd i;m getting error "We are sorry, but something went wrong"
[2013-03-21 18:23:19 -0400] matti: I mean, kavi not Kzim.
[2013-03-21 18:23:22 -0400] matti: kavi: Hosted Chef?
[2013-03-21 18:23:27 -0400] matti: kavi: Omnibus?
[2013-03-21 18:23:30 -0400] kavi: no open chef
[2013-03-21 18:23:34 -0400] kavi: chef server
[2013-03-21 18:23:41 -0400] matti: Installed via Omnibus?
[2013-03-21 18:23:51 -0400] kavi: no
[2013-03-21 18:24:01 -0400] Kzim: matti, hehe fqdn is fine yes do you have a doc about what you told me about zkp kafka ?
[2013-03-21 18:24:23 -0400] matti: Kzim: No, sadly. :) It wrote it for my company :)
[2013-03-21 18:24:42 -0400] sabooky: I noticed some places use ::File.open() and others File.open(). Which is the more correct one?
[2013-03-21 18:25:03 -0400] sabooky: (in recipe files)
[2013-03-21 18:25:27 -0400] matti: Kzim: It is just a matter of: a) loading data bags; b) walking through them and loading relevant bits of data; c) identifying which one should be used for *this* host on which Chef runs;
[2013-03-21 18:25:44 -0400] matti: sabooky: :: changes the scope.
[2013-03-21 18:25:56 -0400] matti: sabooky: If A has File in it.
[2013-03-21 18:26:10 -0400] matti: sabooky: And you want to use Ruby's core File.
[2013-03-21 18:26:24 -0400] gchristensen: Hi, I'm having issues with this line "munin_servers.sort! { |a,b| a[:fqdn] <=> b[:fqdn] }" in the opscode munin cookbook on Chef 11.4.0, saying "comparison of Chef::Node with Chef::Node failed": https://gist.github.com/grahamc/78ee4d9bccba00920f86 has anyone resolved this or come up with a patch?
[2013-03-21 18:26:26 -0400] sabooky: "If A has File in it."?
[2013-03-21 18:26:27 -0400] matti: sabooky: Then you need to specify top-level scope with ::File
[2013-03-21 18:26:32 -0400] gchristensen: or know what might be going on in my environment...
[2013-03-21 18:26:33 -0400] kavi: i have installed open chef server in RHEL
[2013-03-21 18:26:37 -0400] matti: sabooky: A being a class.
[2013-03-21 18:26:48 -0400] sabooky: Does chef extend/expand File?
[2013-03-21 18:27:09 -0400] Kzim: matti, i'm not a zkp expert. so let's say you need to wait for the 3 mongo to be up to initialize de conf. you wait for a message that come from zkp ?
[2013-03-21 18:27:15 -0400] matti: sabooky: Ruby MRO will look for File in current scope first, and if Chef provides its own File then it may not do what you want.
[2013-03-21 18:27:32 -0400] matti: Kzim: Oh, you misunderstood me :)
[2013-03-21 18:27:47 -0400] matti: Kzim: What I meant, I used seatch-less approach in my ZK cookbook.
[2013-03-21 18:27:51 -0400] matti: Kzim: ZK is not needed for Mongo ;p
[2013-03-21 18:28:23 -0400] sabooky: matti: Yeah, I understand the scoping from a technical level.. Guess I'm confused on whether A) chef modifies File and B) If chef modifies File, are there advantages to using the chef modded File
[2013-03-21 18:28:42 -0400] sabooky: matti: Assuming user didn't do anything to it in libraries/
[2013-03-21 18:29:14 -0400] matti: sabooky: I personally never used ::File in cookbooks.
[2013-03-21 18:29:19 -0400] matti: sabooky: Libraries might be different case.
[2013-03-21 18:29:24 -0400] matti: sabooky: So far have not had issues.
[2013-03-21 18:30:00 -0400] sabooky: matti: ok, thanks.. not sure why a developer committed that change.. no comments :(
[2013-03-21 18:30:07 -0400] Kzim: matti, oh okay but with zkp/kafka you just have to get the right list of host not wait for one to be installed first right ?
[2013-03-21 18:30:16 -0400] epc: matti: worked like charm now! you are the man!
[2013-03-21 18:30:30 -0400] matti: sabooky: ::File won't do any harm there.
[2013-03-21 18:30:55 -0400] sabooky: yea, I'll leave it in.. just thought it was strange is all
[2013-03-21 18:31:07 -0400] matti: Kzim: Yeah, you have to pre-configure it, true.
[2013-03-21 18:31:13 -0400] matti: epc: LOL
[2013-03-21 18:31:22 -0400] matti: epc: Cool beans :)
[2013-03-21 18:31:57 -0400] matti: Kzim: With Mongo, there is a little bit of a dance to do with "mongo" and some JavaScript to configure it as Relica Set.
[2013-03-21 18:32:02 -0400] matti: Kzim: Which might be annoying.
[2013-03-21 18:32:31 -0400] matti: Kzim: Why don't you want to use search?
[2013-03-21 18:32:31 -0400] sabooky: matti: oh, there is a commit message.. fyi..
[2013-03-21 18:32:37 -0400] sabooky:     [CFORD-998]: Set class hierarchy File class
[2013-03-21 18:32:37 -0400] sabooky:     Chef10 was searching for File class in wrong parent classes
[2013-03-21 18:32:37 -0400] sabooky:     For example in "Chef::Resource::File:Class"
[2013-03-21 18:32:39 -0400] sabooky:     Calling File class methods as ::File.method() solves the issue.
[2013-03-21 18:32:54 -0400] sabooky: for what it's worth..
[2013-03-21 18:33:18 -0400] sabooky: maybe early versions of chef 10 had a bug
[2013-03-21 18:33:23 -0400] matti: sabooky: Haha, yeah. It is needed then as MRO will prefer Resource::File.
[2013-03-21 18:33:47 -0400] matti: They really should have called it ChefFile or something.
[2013-03-21 18:35:54 -0400] kavi: im using open chef server, there is a problem in webUI
[2013-03-21 18:35:57 -0400] kavi: pls help
[2013-03-21 18:36:24 -0400] matti: kavi: Have a look on the logs.
[2013-03-21 18:36:53 -0400] Kzim: matti, yeah this little dance is the problem :( i don;t use search because i want my cookbook to be usable with chef solo
[2013-03-21 18:36:59 -0400] matti: kavi: It is hard to answer / help if nobody knows why.
[2013-03-21 18:37:07 -0400] mattray: spox: finally digging through your spiceweasel PR
[2013-03-21 18:37:18 -0400] mattray: spox: sorry I went on vacation ;)
[2013-03-21 18:37:31 -0400] matti: mattray: Holidays?!
[2013-03-21 18:37:36 -0400] matti: mattray: How could you ;p
[2013-03-21 18:37:45 -0400] matti: mattray: Was it fun? :)
[2013-03-21 18:37:55 -0400] gchristensen: any ideas why munin_servers.sort! { |a,b| a[:fqdn] <=> b[:fqdn] } is causing  this error to come up: "comparison of Chef::Node with Chef::Node failed" ? I don't see any ticket for it. full sample: https://gist.github.com/grahamc/78ee4d9bccba00920f86
[2013-03-21 18:37:59 -0400] kavi: because, API mode its working fine only with Webui,
[2013-03-21 18:38:54 -0400] mattray: matti: yeah, Spring Break with the family in NYC. My wife blogged about it here: http://www.musicalsoupeaters.com/?p=1327
[2013-03-21 18:39:29 -0400] mattray: also, ever since Arrested Development does anyone else refer to Spring Break as "The Holidays"?
[2013-03-21 18:39:32 -0400] matti: mattray: Nice!
[2013-03-21 18:40:02 -0400] matti: mattray: Perhaps people not in the US would.
[2013-03-21 18:40:12 -0400] spox: mattray: \o/
[2013-03-21 18:40:15 -0400] matti: :)
[2013-03-21 18:40:16 -0400] spox: i figured as much :)
[2013-03-21 18:42:12 -0400] mattray: spox: I'll kick the tires with the new Berkshelf as well.
[2013-03-21 18:42:52 -0400] JoseM: hi, can anybody help me with this error? FATAL: ArgumentError: Attribute set is not defined
[2013-03-21 18:43:27 -0400] JoseM: I'm getting it from the accounts cookbook (which yes I know is deprecated) on 9>> node['accounts'].set[:dir] = "/home" unless node['accounts'].has_key?(:dir)
[2013-03-21 18:44:11 -0400] JoseM: I believe I added the .set in there recently because Chef was complaining about assigning node values w/o using the .set method
[2013-03-21 18:44:19 -0400] UukGoblin: also the example is wrong... can't really have something like "day *" - the asterisk needs quoting
[2013-03-21 18:44:33 -0400] UukGoblin: on http://docs.opscode.com/resource_cron.html#syntax
[2013-03-21 18:44:43 -0400] maplebed: Is there any process to modify or file bugs against docs.opscode.com/stuff?
[2013-03-21 18:45:20 -0400] maplebed: I'm looking at http://docs.opscode.com/resource_cron.html and no example has a command as part of the cronspec.  that just seems weird.
[2013-03-21 18:45:28 -0400] mattray: UukGoblin: you can make a PR at github.com/opscode/chef-docs, no CLA required
[2013-03-21 18:45:47 -0400] maplebed: ah. two of us asking te same question at the same time!
[2013-03-21 18:45:49 -0400] maplebed: thanks mattray
[2013-03-21 18:45:51 -0400] mattray: maplebed: same as what I just told UukGoblin
[2013-03-21 18:46:02 -0400] gchristensen: is there a way to set the FQDN on a node that doesn't have it set now? I've run the chef client multiple times, and it still lacks one.
[2013-03-21 18:46:10 -0400] mattray: yeah, chef-docs has a turn-around of about 24 hours on PRs
[2013-03-21 18:46:38 -0400] mattray: and twitter.com/chefdocs
[2013-03-21 18:47:56 -0400] JoseM: actually my problem seems to be the way the default node attribute is being set... I'm guessing that Mash.new doesn't have a .set method?
[2013-03-21 18:48:07 -0400] JoseM:   7:  node.set['accounts'] = Mash.new unless node.attribute?("accounts")   8:  # global settings   9>> node['accounts'].set[:dir] = "/home" unless node['accounts'].has_key?(:dir)
[2013-03-21 18:48:31 -0400] miah: JoseM: https://github.com/opscode/chef/blob/master/lib/chef/mash.rb
[2013-03-21 18:48:35 -0400] miah: it subclasses Hash
[2013-03-21 18:49:32 -0400] JoseM: I seem to be encountering this problem http://tickets.opscode.com/browse/CHEF-478
[2013-03-21 18:52:07 -0400] gad0lin: Hi, is there a smooth way to include other file in template? Is it already done in one of community cookbooks? I want to generate use collecd-java to collect data from various MBeans. Its more visible if I could put mbeans definitions and merge them to colllectd xml file
[2013-03-21 18:52:21 -0400] UukGoblin: 400MB docs? :-O
[2013-03-21 18:52:30 -0400] JoseM: so I don't see that Mash or Hash have a .set method -- btw I'm not too familiar with the Ruby language
[2013-03-21 18:54:36 -0400] gad0lin: JoseM: thats true
[2013-03-21 18:55:10 -0400] maplebed: heh...  UukGoblin I was just realizing my clone hadn't finished yet...
[2013-03-21 18:55:16 -0400] JoseM: maybe I just need to read this in detail http://wiki.opscode.com/display/chef/Breaking+Changes+in+Chef+11
[2013-03-21 18:58:11 -0400] danielle_: So when i reinstall chef from the .deb it doesn't generate new .pem files in /etc/chef-server. Where am I supposed to get those files?
[2013-03-21 19:00:58 -0400] ranjibd: danielle_: when you re install, does  that remove db stuff ?
[2013-03-21 19:01:15 -0400] ranjibd: generally couch/pg/mysql will keep the db files
[2013-03-21 19:01:43 -0400] danielle_: what db stuff?
[2013-03-21 19:01:49 -0400] danielle_: sorry
[2013-03-21 19:02:06 -0400] danielle_: i'm not sure how to check for that
[2013-03-21 19:03:16 -0400] ranjibd: when you say u have reinstall chef from db? do you mean the client ?
[2013-03-21 19:03:34 -0400] danielle_: no chef server
[2013-03-21 19:03:37 -0400] ranjibd: if thats the case. u dont have to do anything,,, the client should be able to reuse the old cert
[2013-03-21 19:03:50 -0400] danielle_: oh by "db" you mean "deb"
[2013-03-21 19:03:52 -0400] ranjibd: is it the new omnibus installer?
[2013-03-21 19:04:01 -0400] danielle_: yeah
[2013-03-21 19:04:03 -0400] ranjibd: no.. by db i mean data base :-)
[2013-03-21 19:04:11 -0400] ranjibd: chef-server-crl reconfigure
[2013-03-21 19:04:13 -0400] ranjibd: run that
[2013-03-21 19:04:54 -0400] danielle_: kay?
[2013-03-21 19:05:46 -0400] faustroll: danielle: from the docs
[2013-03-21 19:05:52 -0400] faustroll: chef-validator.pem. This private key is created by the open source Chef Server on startup and is located in the /etc/chef-server folder on the server after it is created.
[2013-03-21 19:06:00 -0400] faustroll: USER.pem. This private key is created by running the knife configure --initial command.
[2013-03-21 19:06:37 -0400] ranjibd: yeah.. btw dpkg should say after the installation that run "chef-server-ctl reconfiguee"
[2013-03-21 19:06:41 -0400] ranjibd: *reconfigure
[2013-03-21 19:06:42 -0400] faustroll: danielle_: open source I presume and not hosted
[2013-03-21 19:06:58 -0400] Guest45295: Super silly question from a newbie
[2013-03-21 19:07:16 -0400] danielle_: yeah
[2013-03-21 19:07:21 -0400] gad0lin: so guys its not smart idea to include other files into template I am generating ?
[2013-03-21 19:07:53 -0400] UukGoblin: maplebed, you want to submit a PR for the cron resource too? :-)
[2013-03-21 19:08:09 -0400] UukGoblin: maplebed, how about I fix the asterisk and the default value for 'command', and you add some 'command's to examples?
[2013-03-21 19:08:37 -0400] ranjibd: gad0lin: are you using partial template ?
[2013-03-21 19:08:58 -0400] Guest45295: Let's say, for instance, MySQL install is part of the run list for a new node.  After the install completes successfully, is the proper workflow then to remove the mysql install from the run-list?
[2013-03-21 19:08:58 -0400] danielle_: ranjibd, i've reinstalled this several times and ran chef-server-ctl every time but for some reason this time it worked out
[2013-03-21 19:09:20 -0400] ranjibd: danielle_: same happened with me , few times
[2013-03-21 19:09:41 -0400] ranjibd: some time is fails due to fqdn ,, which screws up the bookshelf component
[2013-03-21 19:09:48 -0400] danielle_: ah
[2013-03-21 19:10:04 -0400] faustroll: danielle_: that is flaky behavior
[2013-03-21 19:10:37 -0400] ranjibd: some time runit fails..the version of runit cookbook , chef-server comes with is actually older.. and screws up if platform is different than REL/Centos/Debian
[2013-03-21 19:10:56 -0400] danielle_: ah
[2013-03-21 19:11:17 -0400] danielle_: well thanks guys, it's working now :)
[2013-03-21 19:11:28 -0400] ranjibd: its very new.. so with time this things will be fixed,, as they get discovered ,,, what is important is to have a continuous release process, and a thriving community / support system
[2013-03-21 19:11:50 -0400] gad0lin: ranjibd: no, sounds like sth I want
[2013-03-21 19:12:08 -0400] ranjibd: Guest45295: not rally
[2013-03-21 19:12:12 -0400] ranjibd: *really.
[2013-03-21 19:12:35 -0400] Guest45295: So you'd keep it as part of the node - next time around when you re-run it, wouldn't it attempt to re-install mysql ?
[2013-03-21 19:12:45 -0400] ranjibd: you would like to keep it in the run list.. so that anytime something changes, chef will fix that
[2013-03-21 19:12:50 -0400] ranjibd: no
[2013-03-21 19:12:58 -0400] ranjibd: and that property is called idempotency
[2013-03-21 19:13:12 -0400] ranjibd: which is a cornerstone of any configuration management system
[2013-03-21 19:13:13 -0400] siezer: actually that's convergence
[2013-03-21 19:13:20 -0400] siezer: ;)
[2013-03-21 19:13:37 -0400] ranjibd: convergence , is when all your resource executed successfully.
[2013-03-21 19:13:41 -0400] ranjibd: its a state
[2013-03-21 19:13:44 -0400] ranjibd: not a property
[2013-03-21 19:14:00 -0400] ranjibd: idempotency comes from idempotent function
[2013-03-21 19:14:06 -0400] siezer: well... providers have the property of being convergent
[2013-03-21 19:14:30 -0400] ranjibd: maths.. where it specifies a function that does not do additional stuff after repeated application..
[2013-03-21 19:14:31 -0400] siezer: they'd still be idempotent if they did the work every run, so long as the outcome was the same
[2013-03-21 19:14:54 -0400] ranjibd: no.. then those resource are non-idempotent
[2013-03-21 19:15:06 -0400] ranjibd: on the other hand,. u can still call it a converged state
[2013-03-21 19:15:26 -0400] gad0lin: ranjibd: thx
[2013-03-21 19:15:29 -0400] ranjibd: because all your resources have reached the desired state
[2013-03-21 19:15:45 -0400] ranjibd: chef... ships with some non-idempotent resources
[2013-03-21 19:15:52 -0400] ranjibd: and the docs clearly says so
[2013-03-21 19:16:28 -0400] ranjibd: examples are execute, script family (bash, python etc), ruby_block etc
[2013-03-21 19:17:08 -0400] ranjibd: by default they are non-idempotent.. you have to do additional not_if, only_if stuff or something similar  to make them idempotent
[2013-03-21 19:17:40 -0400] siezer: I don't want to spend too long splitting hairs, but convergent is a stronger property than idempotent. All idempotent means is that a function won't change the result after repeated applicaitons (beyond the initial)
[2013-03-21 19:17:43 -0400] Guest45295: Thank you, I think I need to read more about idempotent - But thanks!
[2013-03-21 19:17:53 -0400] siezer: the term is heavily abused in the CM space and drives me a little crazy
[2013-03-21 19:18:03 -0400] jtimberman: What siezer said. The resource: execute "echo hi" is idempotent.
[2013-03-21 19:18:38 -0400] ranjibd: jtimberman: really ? i thought the execute family is non-idempotent
[2013-03-21 19:18:41 -0400] jtimberman: siezer: you should write a blog post about it!
[2013-03-21 19:18:53 -0400] siezer: I only blog once a year ;)
[2013-03-21 19:18:57 -0400] jtimberman: ranjibd: "it depends" :)
[2013-03-21 19:19:08 -0400] siezer: besides, mburgess has already written that one
[2013-03-21 19:19:08 -0400] ranjibd: +1 .. siezer , totally need that,,
[2013-03-21 19:19:43 -0400] gad0lin: ranjibd: is there example of sub templates in one of the community cookbooks that you recall?
[2013-03-21 19:20:17 -0400] ranjibd: BryanWB: should have something with xml config
[2013-03-21 19:20:32 -0400] superbenk: Any reason a knife search wouldn't return a node when searching for an environment even when a 'knife node show' displays the node with the correct environment set?
[2013-03-21 19:20:43 -0400] BryanWB: ranjibd, y, i shud, but that's a big problem to tackle,
[2013-03-21 19:20:48 -0400] BryanWB: have any specific ideas?
[2013-03-21 19:20:59 -0400] superbenk: knife search node "role:foo AND chef_environment:production"
[2013-03-21 19:21:34 -0400] ranjibd: no.. i just dont have any examples of partial templates..
[2013-03-21 19:22:21 -0400] BryanWB: ranjibd, i guess the most basic things would be 1) partial templates in xml  and 2) a validator function for rendered xml
[2013-03-21 19:22:37 -0400] jtimberman: superbenk: is the role foo on the node's direct run list, or is it included in another role?
[2013-03-21 19:22:51 -0400] superbenk: jtimberman: yes, the role is included
[2013-03-21 19:23:37 -0400] Guest45295: siezer is there really a blog post? got a link?
[2013-03-21 19:23:53 -0400] ranjibd: idempotency vs convergence http://verticalsysadmin.com/blog/uncategorized/idempotence-vs-convergence-in-configuration-management
[2013-03-21 19:24:07 -0400] threesome: What is the difference between a Chef repository and the Chef server? Is it a one-to-one relationship?
[2013-03-21 19:24:25 -0400] superbenk: jtimberman: here is a pastebin for example: http://pastebin.com/ZBFK3VGe
[2013-03-21 19:25:35 -0400] juliancdunn: threesome: the Chef repository is your workspace for Chef stuff on your local computer
[2013-03-21 19:25:47 -0400] juliancdunn: similar to a "Projects" or "Workspace" folder in an IDE
[2013-03-21 19:25:57 -0400] Guest45295: cool
[2013-03-21 19:26:14 -0400] Guest45295: thanks ranjibd
[2013-03-21 19:27:34 -0400] jtimberman: superbenk: the search index might not be updated. have you tried again? it can take several seconds to a couple minutes depending on the load on the chef server.
[2013-03-21 19:27:39 -0400] threesome: juliancdunn, let's say someone works with multiple Chef servers, do they need multiple repos on their computer?
[2013-03-21 19:27:50 -0400] jtimberman: threesome: "maybe"
[2013-03-21 19:27:54 -0400] superbenk: jtimberman: it's been several minutes (like 15) since the node was provisioned
[2013-03-21 19:28:30 -0400] superbenk: jtimberman: A number of people in the office are running into this for various searches that use chef_environment
[2013-03-21 19:28:42 -0400] juliancdunn: threesome: you can share certain elements (e.g. cookbooks) but generally not
[2013-03-21 19:28:55 -0400] juliancdunn: for instance, it's unlikely that you'd have the same roles across multiple servers
[2013-03-21 19:28:58 -0400] superbenk: Is there a way to force a reindex?
[2013-03-21 19:29:30 -0400] superbenk: I'm wondering if the Chef DB is fubarred or something
[2013-03-21 19:29:49 -0400] jtimberman: superbenk: is this open source chef server?
[2013-03-21 19:29:55 -0400] superbenk: jtimberman: yes
[2013-03-21 19:30:12 -0400] jtimberman: superbenk: check that solr, rabbitmq and the expander (indexer) are running.
[2013-03-21 19:30:13 -0400] superbenk: 10.20
[2013-03-21 19:31:00 -0400] superbenk: jtimberman: other searches work fine (sort of).  I can do 'knife search node "role:base"' & get 2 of the 3 nodes registered, but not this graphite node
[2013-03-21 19:31:32 -0400] superbenk: jtimberman: and yet, as you saw, 'knife node show graphite.local.vm' shows the registered node attributes just fine
[2013-03-21 19:32:05 -0400] superbenk: solr, rabbitmq & expander are all running
[2013-03-21 19:33:45 -0400] threesome: Where does something like Berkshelf fit into the picture? Every cookbook needs its own repository in that case?
[2013-03-21 19:34:36 -0400] superbenk: jtimberman: these are the only things generated in the /var/log/chef/* logs: http://pastebin.com/hxnmDiWa
[2013-03-21 19:34:45 -0400] superbenk: No obvious errors
[2013-03-21 19:35:49 -0400] UukGoblin: mattray, https://github.com/opscode/chef-docs/pull/50 :-)
[2013-03-21 19:36:20 -0400] mattray: UukGoblin: boom! Thanks!
[2013-03-21 19:36:23 -0400] jtimberman: superbenk: there's a reindex command for knife, but i don't remember it off hand
[2013-03-21 19:36:38 -0400] UukGoblin: mattray, cloning that was a small adventure ;-)
[2013-03-21 19:36:47 -0400] mattray: UukGoblin: no doubt
[2013-03-21 19:36:58 -0400] jtimberman: knife index rebuild
[2013-03-21 19:37:06 -0400] superbenk: Just found it :)
[2013-03-21 19:39:06 -0400] jmickle: a developer evangelist who the hell calls themselves a developer evangelist...
[2013-03-21 19:39:30 -0400] jmickle: I'm going to be the chef evangelist
[2013-03-21 19:39:39 -0400] jmickle: hey jtimberman have you see chef?
[2013-03-21 19:39:43 -0400] jmickle: you should check it out
[2013-03-21 19:40:13 -0400] yfeldblum: is it possible to use < and > version constraints in the package resource?
[2013-03-21 19:40:17 -0400] superbenk: Reindex == no love :( http://pastebin.com/eWFWVKjU
[2013-03-21 19:40:34 -0400] superbenk: jmickle: What's Chef?  Is it cool?
[2013-03-21 19:40:59 -0400] jmickle: lol superbenk check out my tv series on sunday
[2013-03-21 19:41:12 -0400] jmickle: the message from chef: from your local evangelist
[2013-03-21 19:41:33 -0400] superbenk: Will I go to hell if I don't use Chef?
[2013-03-21 19:41:39 -0400] leifmadsen: likely
[2013-03-21 19:41:48 -0400] jmickle: if you don't embrace chef your infrastructure will go to hell
[2013-03-21 19:42:00 -0400] jmickle: but i as an evangelist can make your infrastructure worthy of that messaged from chef
[2013-03-21 19:42:02 -0400] c_t: "Have you heard about the plan Chef has for your family?"
[2013-03-21 19:42:02 -0400] jmickle: lol
[2013-03-21 19:42:11 -0400] superbenk: Heh, in my case, they seem to be going to hell regardless :)
[2013-03-21 19:42:20 -0400] leifmadsen: yfeldblum: I did that test recently, and > and < works, but the >= does not seem to
[2013-03-21 19:42:21 -0400] jmickle: ha
[2013-03-21 19:42:35 -0400] leifmadsen: yfeldblum: this was specifically via version attribute for gem installation though
[2013-03-21 19:42:37 -0400] jmickle: lets do a community ban on this adria richards
[2013-03-21 19:42:37 -0400] jmickle: haha
[2013-03-21 19:42:53 -0400] yfeldblum: leifmadsen, ah i'm talking about platform packages (apt)
[2013-03-21 19:42:54 -0400] c_t: I'm looking forward to the coming schism over how many fingers to use when typing knife commands
[2013-03-21 19:42:55 -0400] jmickle: just for calling herself an evangelist
[2013-03-21 19:43:02 -0400] superbenk: jtimberman: did you see that the reindex didn't fix it? :/
[2013-03-21 19:43:47 -0400] leifmadsen: yfeldblum: ya, I haven't tried for apt or yum etc yet I don't think. Just happened to test for a gem I needed to remove in chef-server cookbook
[2013-03-21 19:44:10 -0400] jmickle: I'm going to order some business cards for chef conf that just say _________ evangelist
[2013-03-21 19:44:35 -0400] superbenk: Why not a t-shirt that says "Hi, I'm an evangelist!"
[2013-03-21 19:44:44 -0400] jmickle: ooo good idea
[2013-03-21 19:44:50 -0400] c_t: likely to lead to misunderstandings
[2013-03-21 19:44:58 -0400] superbenk: But great conversations
[2013-03-21 19:44:59 -0400] jmickle: with the "aint nobody got time of dat" underneath it
[2013-03-21 19:45:00 -0400] leifmadsen: Evangelize all the things!
[2013-03-21 19:45:14 -0400] leifmadsen: I evangelize all the things <-- good tshirt
[2013-03-21 19:45:34 -0400] jmickle: im a forking evangelist....
[2013-03-21 19:45:39 -0400] leifmadsen: I evangelized your mom last night
[2013-03-21 19:45:56 -0400] jforest: any people heavy users of chef-solo?
[2013-03-21 19:45:57 -0400] superbenk: That's not how she said it
[2013-03-21 19:46:08 -0400] jmickle: lol
[2013-03-21 19:46:26 -0400] jmickle: ok ok, no more I'm sure theres better discussions for this chat room then that of the current article
[2013-03-21 19:46:29 -0400] jmickle: sorry for starting this
[2013-03-21 19:47:10 -0400] superbenk: Meanwhile, chef search is foobarred w/ no apparent fix
[2013-03-21 19:47:17 -0400] jmickle: oh noes.....
[2013-03-21 19:51:20 -0400] superbenk: ya http://pastebin.com/ZBFK3VGe
[2013-03-21 19:54:59 -0400] jtimberman: superbenk: how many nodes do you have? does a search for "*:*" work?
[2013-03-21 19:55:43 -0400] superbenk: 3 currently...
[2013-03-21 19:55:44 -0400] superbenk: $ knife search node "*:*"
[2013-03-21 19:55:44 -0400] superbenk: 0 items found
[2013-03-21 19:56:31 -0400] yfeldblum: is it possible to add a range hold (>= a.b.c, < x.y.z) to an apt package?
[2013-03-21 19:56:59 -0400] pikesley: cassianoleal: are you still around?
[2013-03-21 19:58:48 -0400] superbenk: Weird, now none of my searches are working at all
[2013-03-21 19:59:24 -0400] superbenk: This was absolutely working before the knife reindex command:
[2013-03-21 19:59:24 -0400] superbenk: $ knife search node "role:base"
[2013-03-21 19:59:24 -0400] superbenk: 0 items found
[2013-03-21 20:00:06 -0400] jtimberman: superbenk: hm, if you tail the chef-solr log, it should say messages like "indexing node" when nodes get saved.
[2013-03-21 20:00:18 -0400] jtimberman: superbenk: try rerunning chef client on one of the nodes?
[2013-03-21 20:01:33 -0400] superbenk: jtimberman: just did that.  I don't see any "indexing node" messages in the solr logs, but I see all the node attributes in the chef-server log
[2013-03-21 20:01:53 -0400] superbenk: Restarting chef-solr & chef-expander
[2013-03-21 20:04:50 -0400] superbenk: Can I come on the Food Fight Podcast & have a panel of Chef evangelists fix my problems? :)
[2013-03-21 20:06:54 -0400] superbenk: Restarted solr & re-ran chef-client, no fix  restarted expander & re-ran chef-client, no fix
[2013-03-21 20:07:12 -0400] paigeat: I'ev been lookin for you jtimberman
[2013-03-21 20:07:16 -0400] paigeat: :|
[2013-03-21 20:07:18 -0400] paigeat: j/k
[2013-03-21 20:13:55 -0400] paigeat: wow chef 11 is kinda neat
[2013-03-21 20:14:01 -0400] paigeat: bundle exec unicorn
[2013-03-21 20:15:03 -0400] paigeat: still did never get that omnibus to work so I'm gonna write my own stuff for generating configs and copy off the chef-solo cookbook
[2013-03-21 20:16:49 -0400] jtimberman: paigeat: :)
[2013-03-21 20:16:55 -0400] jtimberman: paigeat: i'm behind on teh email
[2013-03-21 20:17:05 -0400] paigeat: seems no worries
[2013-03-21 20:17:44 -0400] paigeat: err typo
[2013-03-21 20:17:50 -0400] paigeat: yes, dont worry Im not in any rush
[2013-03-21 20:18:02 -0400] paigeat: also I have a feeling I know what the answer is going to be
[2013-03-21 20:18:49 -0400] paigeat: I kinda thought about it after I asked, for some reason I never think much about what I'm asking until after I've asked probably because half the time I don't even know what I wanna ask so
[2013-03-21 20:18:57 -0400] paigeat: Im gonna go get something to drink brb
[2013-03-21 20:26:51 -0400] joewilliams: anyone know why the package provider might not find a package that is in yum list? https://dl.dropbox.com/s/jkdetxs1xmeldvh/2013-03-21_at_1.25.13_PM.png
[2013-03-21 20:28:34 -0400] joewilliams: also i added a 'execute("yum install bprobe")' and that worked fine, just package is the thing with the issue it seems (cc jtimberman)
[2013-03-21 20:32:30 -0400] paigeat: jtimberman: that whole workflow that I described is probably a lot more intuitive to me than it is to anybody such as myself a year ago who had never touched ruby or erlang
[2013-03-21 20:32:41 -0400] paigeat: or wrote chef cookbooks
[2013-03-21 20:34:39 -0400] paigeat: also probably not the best for getting support but to be perfectly honest, I like wearing the hat of supporting my own infrastructure and not paying for support and its really hard sometimes but hell, what else would I do with my life besides sit at the bar and drink 6 dollar porters and stouts and setup really bad ass networks at home remotely if I didn't have something more productive to do with my time like figure out h
[2013-03-21 20:35:06 -0400] rava: hey guys, i'm having trouble deleting clients. i run a delete from the pychef library, and i see the delete call in the chef-solr log, but the client still shows up in knife client list
[2013-03-21 20:35:18 -0400] paigeat: so if its a bug in the particular version of ruby or openssl ... doesn't matter I'm pretty good at figuring shit out :)
[2013-03-21 20:35:38 -0400] paigeat: totally get why people wouldn't though and why omnibus is kinda dope for that purpose
[2013-03-21 20:36:04 -0400] paigeat: rava: delete the node too ?
[2013-03-21 20:36:25 -0400] rava: clean it out, on aws so i have test nodes that come up and down and should be cleaned out
[2013-03-21 20:36:54 -0400] rava: but i'm seeing where there's a failure now. looks like solr is returning connection refused when the server tries to connect
[2013-03-21 20:37:16 -0400] rava: merb : chef-server (api) : worker (port 4000) ~ Connection refused - connect(2) - (Errno::ECONNREFUSED)
[2013-03-21 20:37:16 -0400] paigeat: ohh yeah ... you might try using an environment to manage those if you're not already, because you can bulk delete clients and nodes
[2013-03-21 20:37:24 -0400] paigeat: if you have a way to search for them by
[2013-03-21 20:37:58 -0400] paigeat: what version of chef server are you running
[2013-03-21 20:37:59 -0400] rava: aye, though i'm doing it through the wrapper scripts our engineers use to stand up and tear them down, cron hourly does a sweep as well
[2013-03-21 20:38:03 -0400] rava: 10.18
[2013-03-21 20:38:18 -0400] rava: i've bounced chef-solr service and the chef-server service
[2013-03-21 20:39:41 -0400] rava: it's annoying because jetty's returning a 200 ok to the delete call, so the pychef api won't return an error
[2013-03-21 20:40:31 -0400] paigeat: hmm pychef... btw the client that you're using for pychef is it an admin client?
[2013-03-21 20:40:33 -0400] rava: but other knife commands work, like search and the like
[2013-03-21 20:40:38 -0400] rava: paigeat: yes
[2013-03-21 20:41:32 -0400] rava: hrm, but the knife command works just fine for deleting the client
[2013-03-21 20:41:46 -0400] paigeat: with all that old stuff, the way I'd debug it would be to stop all the services, and start them each in their own screen or byobu window or whatever you use I use screen and start each of them with -l debug and switch between them after you run the pychef thing
[2013-03-21 20:41:53 -0400] paigeat: and see if anything catches your eye
[2013-03-21 20:42:09 -0400] rava: sounds like an idea, thanks
[2013-03-21 20:57:51 -0400] danielle_: quick question, how is webui_priv.pem created?
[2013-03-21 20:58:17 -0400] btm: danielle_: the chef-server should create it on startup if it doesn't exist.
[2013-03-21 20:58:57 -0400] danielle_: would that be chef-webui.pem?
[2013-03-21 20:59:31 -0400] danielle_: that's the only pem file with webui in it in /etc/chef-server
[2013-03-21 20:59:57 -0400] danielle_: but the webui wants a webui_priv.pem
[2013-03-21 21:00:21 -0400] danielle_: and I tried renaming chef-webui.pem to webui_priv.pem
[2013-03-21 21:02:08 -0400] singsong: anybody around for a possible easy problem?
[2013-03-21 21:02:27 -0400] nlloyds: singsong: Sure, if it's easy :)
[2013-03-21 21:02:39 -0400] singsong: got a problem bootstrapping a node, chef-client tries to pull down cookbooks
[2013-03-21 21:02:43 -0400] singsong: but name resolution not set up yet
[2013-03-21 21:02:57 -0400] singsong: my knife.rb has raw ip address in it
[2013-03-21 21:03:29 -0400] singsong: but the server must be handing back a fqdn
[2013-03-21 21:04:31 -0400] cjs226: I'm trying out my first chef 11 server and can't get ports 4000 nor 4040 live.  <chef-server-ctl reconfigure> and <chef-server-ctl test> complete without issue.  here's a gist showing the status: https://gist.github.com/cjs226/5216699
[2013-03-21 21:04:40 -0400] nlloyds: singsong: Which bootstrap script are you using?
[2013-03-21 21:05:17 -0400] singsong: i'm using "knife ec2 server creeate"
[2013-03-21 21:05:44 -0400] singsong: i think it's using the omnibus installer and pulling down an rpm
[2013-03-21 21:05:51 -0400] singsong: ec2-54-241-232-1.us-west-1.compute.amazonaws.com warning: /tmp/tmp.6fWxMj2e/chef-11.4.0.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY
[2013-03-21 21:07:00 -0400] singsong: knife-client creates a new client identity with no problems
[2013-03-21 21:07:18 -0400] singsong: but fails on synchronizing cookbooks
[2013-03-21 21:07:24 -0400] nlloyds: singsong: Doesn't the ec2 instance have a default /etc/hosts with amazon's resolver?
[2013-03-21 21:07:43 -0400] singsong: Error connecting to https://ops-1/bookshelf/ ... getaddrinfo: Name or service not known
[2013-03-21 21:07:50 -0400] nlloyds: er, /etc/resolv.conf I mean
[2013-03-21 21:07:54 -0400] singsong: yeah, but ops-1 is an internal name
[2013-03-21 21:08:37 -0400] singsong: i'd hope that chef could help to get name resolution working
[2013-03-21 21:08:50 -0400] yfeldblum: cjs226, the 4000/4040 applies to chef 10 server 10, not chef 11 server
[2013-03-21 21:09:12 -0400] singsong: still pretty new to chef, so my thinking is a cookbook is needed to get name resolution set up
[2013-03-21 21:09:29 -0400] singsong: and that's the infinite loop i'm in
[2013-03-21 21:09:44 -0400] cjs226: yfeldblum: oh, i was following http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/ which shows 4000 in the knife.rb
[2013-03-21 21:09:47 -0400] nlloyds: singsong: oh, right. can you pass --server-url http://. with the ip of the server
[2013-03-21 21:10:17 -0400] nlloyds: to knife ec2 server create?
[2013-03-21 21:10:32 -0400] singsong: that is an option
[2013-03-21 21:10:38 -0400] singsong: i figured that was the same as what was in knife.rb
[2013-03-21 21:10:41 -0400] singsong: but i'll give it a shot
[2013-03-21 21:10:50 -0400] yfeldblum: cjs226, i'm not seeing that
[2013-03-21 21:10:53 -0400] cjs226: yfeldblum: actually, i see now that it shows that as the default, but doesn't specify a port in the actual input
[2013-03-21 21:11:02 -0400] yfeldblum: cjs226, exactly
[2013-03-21 21:11:13 -0400] cjs226: yfeldblum: thx
[2013-03-21 21:11:41 -0400] nlloyds: singsong: The bootstrap distro script writes out a new knife.rb on the machine being bootstrapped, and uses some of those command line options
[2013-03-21 21:11:45 -0400] yfeldblum: cjs226, the full-stack installer for chef 11 server automatically does some really fun stuff in the apache2 config to make the whole 4000/4040 thing not an issue anymore
[2013-03-21 21:12:09 -0400] rava: figured out where i was going wrong with pychef. i was calling the .save() method on a node object right after calling .delete() thinking i had to call it to send the actual api call. turns out that .save() will create the node/client object you are calling it from if it doesn't already exist
[2013-03-21 21:12:21 -0400] nlloyds: singsong: I mean it writes a new client.rb
[2013-03-21 21:12:37 -0400] cjs226: yfeldblum: awesome, thx.  is it apache or nginx?
[2013-03-21 21:12:51 -0400] singsong: nlloyds: got it, i'm glad there's rhymes and reasons
[2013-03-21 21:13:27 -0400] nlloyds: singsong: this is what gets run when you bootstrap: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-03-21 21:14:36 -0400] nlloyds: and this is what <%= config_content %> is: https://github.com/opscode/chef/blob/master/lib/chef/knife/core/bootstrap_context.rb#L57-L80
[2013-03-21 21:16:09 -0400] singsong: nlloyds: same error, server's handing back it's hostname
[2013-03-21 21:16:43 -0400] nlloyds: can you ssh in there and see what /etc/chef/client.rb looks like?
[2013-03-21 21:17:00 -0400] singsong: yep, taking a look
[2013-03-21 21:19:34 -0400] singsong: nlloyds: client.rb has raw ip address in it
[2013-03-21 21:19:49 -0400] singsong: chef_server_url  "https://10.223.15.8:443"
[2013-03-21 21:20:08 -0400] nlloyds: what happens if you curl/wget that url?
[2013-03-21 21:20:43 -0400] singsong: super strange, the call to bookshelf has awskeyid as a query param
[2013-03-21 21:21:33 -0400] paigeat: MAKEOPTS='-j26'
[2013-03-21 21:22:01 -0400] singsong: nlloyds: curl complains about the cert, which i dont think chef-client cares about
[2013-03-21 21:22:33 -0400] singsong: looking for the curl opt to ignore a the cert
[2013-03-21 21:23:08 -0400] nlloyds: -k
[2013-03-21 21:23:27 -0400] singsong: yep, so it returns a 302
[2013-03-21 21:23:37 -0400] singsong: Location: https://10.223.15.8/users/login
[2013-03-21 21:24:54 -0400] nlloyds: and `sudo chef-client`? Does it blow up with a stacktrace?
[2013-03-21 21:25:10 -0400] singsong: nlloyds: i can curl -k the url that errors out if i replace the hostname w/ ip address
[2013-03-21 21:25:34 -0400] singsong: hah, no
[2013-03-21 21:25:37 -0400] singsong: it exits 0
[2013-03-21 21:25:39 -0400] kesor: singsong: the certificate CN must match the server_url, or else ruby goes crazy.
[2013-03-21 21:26:01 -0400] singsong: but it does say that the server has an empty run list
[2013-03-21 21:26:24 -0400] kesor: singsong: some things work, others dont. having the cert CN different from the server_url messes half the things.
[2013-03-21 21:26:54 -0400] singsong: kesor: right but fixing name resolution resolves this problem immidiately
[2013-03-21 21:27:16 -0400] kesor: singsong: as I said, the server_url must match the common name (cn) from the certificate...
[2013-03-21 21:27:17 -0400] nlloyds: singsong: When you bootstrap but it doesn't complete the whole run it usually reverts the run list to []
[2013-03-21 21:28:55 -0400] kesor: singsong: you can see the certificate details using `openssl s_client -connect 10.223.15.8:443` check what the CN in the certificate is, and use that as your chef_server_name, anything else, like for example having https://the_ip_address will not work correctly, it fails with random errors.
[2013-03-21 21:29:11 -0400] kesor: singsong: sorry, chef_server_url
[2013-03-21 21:30:52 -0400] singsong: "sudo chef-client -l debug" shows that subsequent runs connect to the server by ip
[2013-03-21 21:31:45 -0400] kesor: singsong: is it in your /etc/chef/client.rb?
[2013-03-21 21:31:54 -0400] singsong: it is, yes
[2013-03-21 21:31:59 -0400] totumo: Hi all. Random Q. I'm getting zombies (defunct) processes after the chef runs. No parent chef-client processes to be found. Also, after multiple runs chef-croaks due to memory. Any ideas?
[2013-03-21 21:32:19 -0400] kesor: singsong: sooooo change it to the hostname.
[2013-03-21 21:32:22 -0400] singsong: is there some way to set up name resolution in the bootstrap process before needing to pull down cookbooks?
[2013-03-21 21:32:38 -0400] threesome: Hi, is it recommended to do 'vagrant init' (creating the Vagrantfile) inside a chef-repo directory? Could anyone recommend a directory structure (all within my home directory on Linux) to set up on my workstation?
[2013-03-21 21:32:42 -0400] kesor: singsong: you can put it in your /etc/hosts if you dont have some kind of a dns.
[2013-03-21 21:33:09 -0400] singsong: kesor: i'm at a loss as to how to set up name resolution without having to do it outside of chef
[2013-03-21 21:33:27 -0400] singsong: sure, but i want chef to handle this
[2013-03-21 21:33:28 -0400] kesor: singsong: so do it outside of chef then. since chef will not work by using an ip.
[2013-03-21 21:33:52 -0400] kesor: singsong: or use a dns. you probably have one.
[2013-03-21 21:33:54 -0400] paigeat: -j52
[2013-03-21 21:34:06 -0400] doomviking: moar dns
[2013-03-21 21:34:17 -0400] caspyin: Hi all. Is "build" a resource like "script"? I see it used in omnibus-software but can't find any documentation on it.
[2013-03-21 21:34:20 -0400] singsong: hah, circles, w're going in circles
[2013-03-21 21:35:09 -0400] singsong: knife is ssh'ing into the box to bootstrap, can i get knife to do some cookbooky stuff?
[2013-03-21 21:35:37 -0400] kesor: singsong: no, but you can ssh yourself to add one line to /etc/hosts.
[2013-03-21 21:35:45 -0400] doomviking: getting stabby
[2013-03-21 21:35:50 -0400] singsong: grr, this is why i use config mgmt
[2013-03-21 21:36:24 -0400] doomviking: theres a hosts file cookbook
[2013-03-21 21:36:24 -0400] spicy: you can use a custom bootstrapper to do that for you instead of doing it manually
[2013-03-21 21:36:59 -0400] singsong: spicy: this is what i'm hoping to find
[2013-03-21 21:37:09 -0400] spicy: singsong: http://docs.opscode.com/knife_bootstrap.html
[2013-03-21 21:37:14 -0400] singsong: cool
[2013-03-21 21:37:20 -0400] spicy: there are details there on how to customize the bootstrap script
[2013-03-21 21:37:20 -0400] kesor: chef is not a silver bullet. trying to solve all the problems (including chef's) with the same hammer as if everything is a nail does not work . fortunately.
[2013-03-21 21:38:31 -0400] kesor: spicy: nothing there that can help you add a host to /etc/hosts though.
[2013-03-21 21:39:22 -0400] singsong: kesor: by accepting that, you're accepting that "knife ec2 server create" would never work unless your org's chef server was publicly resolable
[2013-03-21 21:39:23 -0400] spicy: it's basically a bash script, you can add a line in there to do it
[2013-03-21 21:40:01 -0400] kesor: singsong: whats the problem with publicly resolving it? you can resolve it to 127.0.0.1  so what?
[2013-03-21 21:40:21 -0400] singsong: dude, you're assuming so much
[2013-03-21 21:40:37 -0400] kesor: singsong: also, just fyi, knife cec2 server create has bugs  lots of em. I recommend to NOT use it.
[2013-03-21 21:40:45 -0400] singsong: maybe i don't even have a dns server yet? maybe i'd like to get chef going before i start building out my infrastructure?
[2013-03-21 21:41:00 -0400] singsong: kesor: thanks for the tip, how bad?
[2013-03-21 21:41:00 -0400] kesor: singsong: also, if you are using ec2 - you can use "user data" scripts to run a bootstrap process once your ec2 instance boots up.
[2013-03-21 21:41:12 -0400] singsong: fair point
[2013-03-21 21:41:27 -0400] doomviking: yeah what knife ec2 bugs?
[2013-03-21 21:41:30 -0400] kesor: singsong: multiple people complain about race conditions in its code.
[2013-03-21 21:41:58 -0400] singsong: i'm ok with it, i'm just using ec2 for now while i wait for hardware to arrive
[2013-03-21 21:42:16 -0400] kesor: for example, one bug I helped someone solve this week was it tries to add tags to an instance before ec2 says the instance has been created. thus instead of spinning up 50 instances, you spin up 30 and get a stack trace. race condition.
[2013-03-21 21:42:41 -0400] singsong: kesor: that sounds familiar
[2013-03-21 21:43:01 -0400] singsong: before i found chef, i'd written a stack of boto code that had to handle that
[2013-03-21 21:43:04 -0400] kesor: knife ec2 has bugs. just dont be surprised when it blows up in your face.
[2013-03-21 21:43:14 -0400] singsong: aws api inconsistent
[2013-03-21 21:43:17 -0400] spicy: chef has bugs too :)
[2013-03-21 21:43:26 -0400] kesor: singsong: fog (the ruby boto equiv) has a lot of bugs, severe ones.
[2013-03-21 21:43:41 -0400] doomviking: everything has bugs
[2013-03-21 21:43:56 -0400] spicy: and yes, fog is a pain in the ass sometimes, especially if you aren't using newer versions
[2013-03-21 21:44:39 -0400] spicy: fwiw i am using knife ec2 successfully in a production environment though
[2013-03-21 21:44:46 -0400] kesor: knife ec2 is using fog. incorrectly at places  so you get a multiplication of bugs, and instead of getting your infrastructure consistently working  the tools make it inconsistently fail to work.
[2013-03-21 21:44:55 -0400] spicy: have run into bugs, nothing world ending
[2013-03-21 21:45:30 -0400] doomviking: yeah. me too.
[2013-03-21 21:45:30 -0400] spicy: (as are many others)
[2013-03-21 21:45:35 -0400] singsong: that's cool, i'm mostly just using ec2 to learn chef so that when hardware arrives i can get on w/ deploying systems
[2013-03-21 21:45:40 -0400] kesor: as long as you know they are there, you can mitigate your risks.
[2013-03-21 21:45:50 -0400] spicy: yep
[2013-03-21 21:47:10 -0400] singsong: any pointers on creating the user data object? are there shortcuts in knife or do i have to make the MIME object by hand?
[2013-03-21 21:47:26 -0400] kesor: singsong, and as I already wrote several times  chef has a bug where you can't have chef_server_url be different from your CN in the certificate. and the way to solve it, is to have it resolve in some way. whatever way you know how to resolve host lookups.
[2013-03-21 21:47:49 -0400] kesor: singsong: user-data can just be a string that contains a bash script basically.
[2013-03-21 21:48:23 -0400] siezer: kesor that's not a bug, that's how SSL works
[2013-03-21 21:48:54 -0400] singsong: oh, i was thinking about user-data + cloud init
[2013-03-21 21:49:11 -0400] kesor: singsong: yes, think you can pass it as an option to knife ec2.
[2013-03-21 21:49:26 -0400] singsong: that's what i hoped, cool
[2013-03-21 21:49:36 -0400] danielle_: My chef11 server didn't generate a webui-priv.pem when it was installed. Any ideas on how to create one?
[2013-03-21 21:49:36 -0400] kesor: siezer: i know. unfortunately people expect it to work differently, so expectation != reality = bug.
[2013-03-21 21:49:46 -0400] siezer: it works how I expect
[2013-03-21 21:50:06 -0400] kesor: siezer: not everyone's level of competency is the same.
[2013-03-21 21:50:18 -0400] siezer: if I visit www.example.com to make an api request, I expect the SSL certificate to say "www.example.com
[2013-03-21 21:50:20 -0400] kesor: siezer: you are great, but you are not the sole user of chef.
[2013-03-21 21:51:58 -0400] singsong: so figured there were flags set to ignore bad certs, but i was conflating not having a proper chain with the wrong CN
[2013-03-21 21:52:22 -0400] kesor: siezer: the flow most people have is like this - 1) create a server for chef-server with hostname chefserver.localnet  2) install/configure the chef-server  3) use the ip address of the server in chef_server_url=https://ip-addr/   it seems logical to most people that this would work. although you and I agree that it should not. and the error chef gives in this case does not help at all.
[2013-03-21 21:52:47 -0400] kesor: singsong: self-signed certs are one thing, but a cert that matches the hostname is a different kind of error.
[2013-03-21 21:52:59 -0400] kesor: i mean doesn't match.
[2013-03-21 21:54:14 -0400] kesor: because of how ruby networking works, the error you get has no clue that you had an ssl error. you usually get something fuzzy like getaddrinfo exception or something.
[2013-03-21 21:55:09 -0400] singsong: kesor: that makes more sense now
[2013-03-21 22:04:22 -0400] GreatSUN: re
[2013-03-21 22:04:42 -0400] GreatSUN: small question to you chef-masters ;-)
[2013-03-21 22:05:23 -0400] GreatSUN: is it possible to programmatically (metadata.rb, attributes, recipe) clear cached attributes (not those set within current chef-run)
[2013-03-21 22:05:26 -0400] GreatSUN: ?
[2013-03-21 22:05:48 -0400] kesor: GreatSUN: you mean those stored in the node metadata?
[2013-03-21 22:06:01 -0400] GreatSUN: kesor: ACK
[2013-03-21 22:06:48 -0400] kesor: something like node.normal_attrs[:foo].delete(:bar) might work
[2013-03-21 22:07:14 -0400] GreatSUN: kesor: but this deletes all values set already, doesn't it?
[2013-03-21 22:07:31 -0400] kesor: didn't you say its what you want?
[2013-03-21 22:07:42 -0400] GreatSUN: the point is, I don't wanna delete all attributes, but those which are cached
[2013-03-21 22:07:52 -0400] kesor: what does "cached" mean?
[2013-03-21 22:08:10 -0400] GreatSUN: since I don't know if another recipe is called before in current chef run
[2013-03-21 22:08:22 -0400] GreatSUN: those set by this recipe shall stay
[2013-03-21 22:08:51 -0400] yfeldblum: GreatSUN, sounds like an XY Problem: http://www.perlmonks.org/index.pl?node_id=542341
[2013-03-21 22:09:05 -0400] Majost1: is there a rake task or something which will populate the README.md with all the attribute information?
[2013-03-21 22:09:54 -0400] GreatSUN: yfeldblum: maybe you are right
[2013-03-21 22:10:25 -0400] GreatSUN: ok, look, when I run my recipe, I have data set to node-attributes before my recipe sets them
[2013-03-21 22:10:39 -0400] GreatSUN: so what I think is that they are cached
[2013-03-21 22:10:46 -0400] yfeldblum: GreatSUN, i know you were dealing with the same or similar problem yesterday ... it would be really helpful if you could provide an example of (not just describe) what you're trying to do
[2013-03-21 22:10:53 -0400] GreatSUN: and I don't want cached data to interfear
[2013-03-21 22:11:11 -0400] kesor: GreatSUN: look, when you do "knife node show node-name -Fj" you see the attributes in there? is that what you mean?
[2013-03-21 22:11:33 -0400] kesor: replace node-name with the name of the bow
[2013-03-21 22:11:37 -0400] yfeldblum: GreatSUN, i.e. make a simplified copy of what you're trying to do, change the particulars of the attribute names etc if you need to to protect sensitive information, and show that
[2013-03-21 22:11:39 -0400] kesor: of the node
[2013-03-21 22:12:59 -0400] GreatSUN: yfeldblum: next time I will :-)
[2013-03-21 22:13:17 -0400] GreatSUN: but solution is already done for the problems of yesterday and such
[2013-03-21 22:13:26 -0400] GreatSUN: new day, new problem ;-)
[2013-03-21 22:14:05 -0400] GreatSUN: kesor: might be, just recreated the node, so there is no information stored now
[2013-03-21 22:14:34 -0400] GreatSUN: kesor: at least it looks like the data is stored in there
[2013-03-21 22:15:15 -0400] kesor: GreatSUN: just do me a favor, don't call it "cached" anymore. just call these with their real name, "node attributes".
[2013-03-21 22:16:52 -0400] GreatSUN: kesor: ok as you like
[2013-03-21 22:17:26 -0400] GreatSUN: kesor: but what is the difference between those stored in the node at the last chef-run and those in the current, or isn't it possible to find out?
[2013-03-21 22:18:54 -0400] kesor: usually node attributes are stored when you have something like "node.set[:foo] = :bar" in your recipes. you can also conditionally set these, with "node.set_unless[:foo] = :bar" which will set them only if its not already set. your cookbook has attributes/default.rb file that has attributes, these are not store, these take effect only during the chef run.
[2013-03-21 22:19:34 -0400] kesor: GreatSUN: you need to read a bit more about how chef handles attributes, I suggest the documentation. http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-03-21 22:19:50 -0400] tomdzk: GreatSUN: the node attributes are a collection of data describing the node as it is currently (e.g. ohai stuff) and what it is supposed to be (for this chef run), and you recipe should generally work based on that data as is, not off a delta between chef runs
[2013-03-21 22:20:22 -0400] tomdzk: GreatSUN: if you need deltas, you can always store a file somewhere on the node and do that yourself, though I haven't yet encountered a case where I would have needed that
[2013-03-21 22:21:20 -0400] GreatSUN: ok guys, thanks for information
[2013-03-21 22:23:41 -0400] xerxas: Hi all
[2013-03-21 22:25:28 -0400] GreatSUN: kesor: I don't see any new information
[2013-03-21 22:25:49 -0400] martinisoft: Anyone have ideas on how to reduce chef-client memory usage? Mine is currently eating about 4.1Gb on my system
[2013-03-21 22:26:34 -0400] kesor: martinisoft: hmm how long has it been running?
[2013-03-21 22:27:03 -0400] martinisoft: kesor: quite some time, probably a week or two
[2013-03-21 22:27:12 -0400] tomdzk: martinisoft: cron ?
[2013-03-21 22:27:22 -0400] martinisoft: Have it configured for 30 minute check-ins via the chef-client cookbook
[2013-03-21 22:27:28 -0400] kesor: yeah, cron  also thought about it.
[2013-03-21 22:28:02 -0400] kesor: put it in non-daemon mode to run via cron once every 30m  same thing, without the memory leaks.
[2013-03-21 22:28:19 -0400] martinisoft: kesor: good idea
[2013-03-21 22:28:26 -0400] martinisoft: does the chef-client cookbook support that?
[2013-03-21 22:28:56 -0400] ssd7: If you are on a recent version, you can also try the --fork option.
[2013-03-21 22:29:41 -0400] ssd7: How quickly is it climbing to 4.1GB?
[2013-03-21 22:31:03 -0400] kesor: martinisoft: i think there is the chef-client::cron recipe, yeah.
[2013-03-21 22:39:28 -0400] w6fu: just updated to chef 11, missing one piece "OpenSSL::PKey::RSAError: private key needed"
[2013-03-21 22:39:43 -0400] w6fu: that's when a client tried to run against the new server
[2013-03-21 22:39:52 -0400] w6fu: should be validation.pem?
[2013-03-21 22:42:36 -0400] Sgoettschkes: Hi
[2013-03-21 22:43:12 -0400] Sgoettschkes: I got a short question: If I want to use a LWRP, do I have to do another thing than downloading/installing the cookbook?
[2013-03-21 22:43:25 -0400] Sgoettschkes: and then using the LWRP in my cookbook
[2013-03-21 22:44:29 -0400] jvance: Hello all.
[2013-03-21 22:45:44 -0400] tomdzk: Sgoettschkes: you need a dependency on the cookbook in your metadata.rb
[2013-03-21 22:46:10 -0400] jvance: I have kind of an involved question regarding chef-ec2 - what is the underlying mechanism it uses to bootstrap chef onto an ec2 instance, and how can I modify it?
[2013-03-21 22:46:10 -0400] Sgoettschkes: ah, ok
[2013-03-21 22:46:23 -0400] jvance: If this isn't the appropriate forum, where would you point me?
[2013-03-21 22:47:11 -0400] jvance: Sorry that's knife-ec2
[2013-03-21 22:47:13 -0400] Sgoettschkes: tomdzk: I'll have a look, thanks
[2013-03-21 22:49:31 -0400] jvance: Specifically I want to load up shared rbenv with ruby 1.9.3p392 first and bootstrap on top of that.
[2013-03-21 22:49:58 -0400] Sgoettschkes: tomdzk: Works, thank you again :)
[2013-03-21 22:52:48 -0400] jvance: Maybe more of a correct strategy question - should I just go ahead and accept what knife-ec2 does and then load up rbenv?
[2013-03-21 22:58:27 -0400] basic`: so i just did a knife role create base_system
[2013-03-21 22:58:38 -0400] basic`: i have my knife.rb configured to store these in chef-repo/roles
[2013-03-21 22:59:26 -0400] basic`: after writing the file, the role shows up in knife role list, but i dont see a json file in chef-repo/roles ?
[2013-03-21 23:02:34 -0400] w6fu: can someone explain how I can resolve this error? "Your validation client is not authorized to create the client for this node (HTTP 403)."
[2013-03-21 23:05:10 -0400] jordane: w6fu: are you trying to create a new client? Is the client you are creating it from an admin client?
[2013-03-21 23:05:18 -0400] jordane: You must be an admin to make more clients
[2013-03-21 23:05:29 -0400] w6fu: yes, i've deleted the old node and client (this is a chef11 upgrade)
[2013-03-21 23:05:33 -0400] w6fu: Your validation client (chef-validator) may have misconfigured authorization permissions.
[2013-03-21 23:05:55 -0400] jordane: Ah, I'm not familiar with the chef11 upgrade. We're still on chef 10 :\
[2013-03-21 23:05:56 -0400] w6fu: that must be the issue, do i need to make chef-validator an admin
[2013-03-21 23:06:01 -0400] jordane: probably.
[2013-03-21 23:45:47 -0400] otterley: hi all!  I created a resource definition that wraps a template.  It seems to write the template if it doesn't exist, but if the template does exist and the resulting file is changed, it won't overwrite the destination file.  any idea why?
[2013-03-21 23:58:22 -0400] anthroprose: hey, using chef-solo for the first time, any major reason it would be completly ignoring 'default_attributes' in the -j json being passed?

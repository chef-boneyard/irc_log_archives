[2013-03-12 00:07:18 -0400] jtimberman: looks like benkay left. but for future googling (since this channel is logged), "omnibus" is the project we use that builds "full stack" packages. the client one includes solo.
[2013-03-12 00:08:46 -0400] tmichael: are default ssl cert paths non-standard in chef such that i'd get somthing like this trying to ssl connect in cookbook library:
[2013-03-12 00:08:49 -0400] tmichael: FATAL: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
[2013-03-12 00:09:05 -0400] tmichael: assume chef doesn't know to look here: /etc/pki/tls/cert.pem ?
[2013-03-12 00:32:05 -0400] maplebed: chef11 vs. chef10 syntax question: how do I make this work in chef10? https://gist.github.com/maplebed/5139266
[2013-03-12 00:32:37 -0400] maplebed: the symptom in chef10 is that the mongo gem is not installed (depsite having mongodb::replicaset in my runlist).
[2013-03-12 00:33:12 -0400] macros: I've managed to generate gems that choke gem_package, can't find anything obviously broken
[2013-03-12 00:33:28 -0400] macros: Tries to install with an empty versino string
[2013-03-12 00:38:35 -0400] cwj: maplebed: that seems like it should work on chef 10 to me
[2013-03-12 00:38:49 -0400] cwj: or is it the logic that doesn't work?
[2013-03-12 00:38:55 -0400] cwj: for needs_mongo_gem
[2013-03-12 00:39:10 -0400] maplebed: I think it's the needs_mongo_gem check returns false when it should return true.
[2013-03-12 00:39:16 -0400] cwj: ok
[2013-03-12 00:39:41 -0400] cwj: try node['recipes'].include?('foo')
[2013-03-12 00:39:47 -0400] maplebed: k.
[2013-03-12 00:43:08 -0400] Litex: Is there a simple way to freeze a cookbook you have already uploaded?
[2013-03-12 00:44:05 -0400] awgross: Litex: reupload it with --freeze
[2013-03-12 00:44:54 -0400] Litex: I'm uploading with berkshelf from a CI job.
[2013-03-12 00:45:26 -0400] Litex: I suppose I could use 'berks install' to stage the cookbook, then run the knife upload from there.
[2013-03-12 00:45:40 -0400] Litex: (which I will probably have to do anyway to get 'knife cookbook test' to work)
[2013-03-12 00:49:44 -0400] zuhaib: Has anyone put out an guide on upgrading/switching from Chef 10.x server to Chef 11 server?
[2013-03-12 00:50:54 -0400] tmichael: haven't used this and not official Opscode guide, but happened to read this yesterday in DevOps weekly email:  http://www.ducea.com/2013/03/05/howto-migrate-to-chef-11/
[2013-03-12 00:51:00 -0400] tmichael: ^^ zuhaib
[2013-03-12 00:53:26 -0400] zuhaib: tmichael: thanks, i will review it
[2013-03-12 00:53:48 -0400] tmichael: np, hope you find it useful
[2013-03-12 00:53:58 -0400] maplebed: cwj:  didn't seem to do anything.  I dropped in some debugging messages to verify my theory that it's the seen logic.
[2013-03-12 00:58:03 -0400] maplebed: grumble..  my little 'puts "seen is #{needs_mongo_gem}"' throws out 'seen is true' but despite that the chef-run fails with "cannot load such file -- mongo" when it comes across the "require 'mongo'" line.
[2013-03-12 00:58:49 -0400] maplebed: aaaaand I need to leave.  cwj if you have any other suggestions, I'll be back tomorrow.  :(
[2013-03-12 00:59:36 -0400] cwj: maybe use chef_gem instead of gem_package :)
[2013-03-12 00:59:42 -0400] cwj: then you know you are hitting the right ruby
[2013-03-12 01:00:21 -0400] clundquist: has anyone seen, "undefined method `preferred_filename_on_disk_location' for nil:NilClass" when using the template resource?
[2013-03-12 01:01:53 -0400] clundquist: I'm giving it an absolute path to the template as a dynamically defined resource
[2013-03-12 01:03:38 -0400] clundquist: It looks like it is struggling to determine the cookbook name
[2013-03-12 01:06:47 -0400] clundquist: https://github.com/sometimesfood/sandwich/commit/d3540feade873929daaf78312d30a6729eb00bc3 seems to have had the same issue
[2013-03-12 01:23:31 -0400] kerouac: bosses just ok'd the request for hosted and/or private chef... how long does the trial period last?
[2013-03-12 01:26:17 -0400] samsquanch: Question for the Chef experts - I'm on 11.4.0 and anything I try to do with knife results in the following error: /usr/lib/ruby/gems/1.9.1/gems/chefspec-0.9.0/lib/chefspec/monkey_patches/provider.rb:6:in `alias_method': undefined method `build_from_file' for class `Class' (NameError)
[2013-03-12 01:26:38 -0400] samsquanch: I googled and found a couple of threads on the matter, but no solution has fixed me yet.
[2013-03-12 01:28:16 -0400] samsquanch: On Arch Linux if that matters
[2013-03-12 01:37:59 -0400] tabolario: @jtimberman Thanks for the help earlier today btw :)
[2013-03-12 01:39:02 -0400] cwj: oh librarian, i suck at troubleshooting you
[2013-03-12 01:53:51 -0400] sous-chef: Hey all - I'm receiving this error running Chef Solo. Any advice? Gem::LoadError: Unable to activate net-scp-1.1.0, because net-ssh-2.2.2 conflicts with net-ssh (>= 2.6.5)
[2013-03-12 01:54:50 -0400] samsquanch: Well, for anyone else having the issue I reported above, install chefspec from the git repo. Despite 11.4.0 installing chefspec 0.9.0, it needs chefspec 1.0.0 to work.
[2013-03-12 02:00:58 -0400] Wohali: hey folks, i need some code tweaking guidance, any committers awake?
[2013-03-12 02:01:14 -0400] Wohali: http://tickets.opscode.com/browse/CHEF-3997#comment-33287
[2013-03-12 07:11:22 -0400] kavi: hi, pls advise which Operating System is prefered to install Chef server 11
[2013-03-12 07:23:50 -0400] aruntomar: kavi: ubuntu or centos
[2013-03-12 10:00:17 -0400] kesor: can an attribute in chef contain a ruby block/lambda ?
[2013-03-12 10:18:26 -0400] ProfFalken: hey all, any one know what happened to the developer guides for creating Knife plugins for chef 10.x? I can't find them anywhere!
[2013-03-12 10:39:17 -0400] Azrael: hmm.  looks like data bags are broken in chef 11.
[2013-03-12 10:39:39 -0400] siXy: hi.  How can I include one library in another?
[2013-03-12 10:39:56 -0400] Azrael: ahh!  issue reported 1 month ago on tickets.opscode.com with no updates!  awesome!
[2013-03-12 10:47:05 -0400] Azrael: hmm data bags dont work via knife either
[2013-03-12 11:24:37 -0400] jb_: Azrael: are you upgrading vom chef 10?
[2013-03-12 11:24:44 -0400] jb_: s,vom,from,
[2013-03-12 11:54:56 -0400] Azrael: jb_: nope.  this is a fresh install of chef server 11.
[2013-03-12 11:59:06 -0400] Azrael: jb_: i can create databags, but if i try to create an item within i get the error:  ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2013-03-12 12:26:52 -0400] maruq: hey chefs
[2013-03-12 12:29:46 -0400] a_a_g1: how do i do a knife search where i want to match a token against elements in an array
[2013-03-12 13:12:19 -0400] awgross: any know if the LWRP resource syntax "attribute :foo, :kind_of => String, :default => node['non_ohai']['attribute']" works in Chef 11+? It does not work in 10.18.2
[2013-03-12 13:29:47 -0400] AskSteve: does any body have a good link to creating a recipe for a tarball?  (.tar.gz)
[2013-03-12 13:34:10 -0400] jsh: AskSteve: installing some package/files from a tarball in a recipe? http://community.opscode.com/cookbooks/ark can do .tar.gz
[2013-03-12 13:38:47 -0400] AskSteve: Looks good, thanks!
[2013-03-12 13:39:08 -0400] jsh: np
[2013-03-12 14:01:38 -0400] nvbasd: how do I delete a single file from a cookbook?
[2013-03-12 14:02:15 -0400] nvbasd: somebody somehow added a .DS_Store file to a recipe
[2013-03-12 14:02:40 -0400] drrk: ah those mac users, can you not just rm it?
[2013-03-12 14:03:01 -0400] nvbasd: I can do git rm locally, but off the server?
[2013-03-12 14:03:09 -0400] nvbasd: do I have to just upload a full new version?
[2013-03-12 14:04:04 -0400] drrk: I suspect so
[2013-03-12 14:04:23 -0400] drrk: and then create a Chefignore
[2013-03-12 14:04:32 -0400] drrk: so it doesn't happen again
[2013-03-12 14:05:12 -0400] pmohan: Question : is there a cookbook which will run "apt-get update" on deb/ubuntu and "yum update" on cent/rhel ?
[2013-03-12 14:06:31 -0400] nvbasd: ta... that's done.
[2013-03-12 14:06:39 -0400] kesor: pmohan: the apt cookbook and the yum cookbook  they wont do anything where apt/yum is not installed
[2013-03-12 14:06:42 -0400] nvbasd: I was hoping for a way on the server to do it.
[2013-03-12 14:08:14 -0400] pmohan: nvbasd: thanks
[2013-03-12 14:09:11 -0400] pmohan: @kesor thanks
[2013-03-12 14:09:27 -0400] queso: Can someone point me to a resource on best practices for handling recipe dependencies?  I have been handling it by creating a role (web-apache-php) that groups a bunch of recipies together in the right order that would be needed to install dependencies for most of our PHP apps.  But I'm not sure that's the best way to do it.
[2013-03-12 14:16:26 -0400] fabio_: hello, im editing a file to tune it while a run chef-client.
[2013-03-12 14:16:48 -0400] fabio_: how can I avoid to get this file as is, without being copied from the cookbook?
[2013-03-12 14:22:44 -0400] alet: Hi all! I have a question. Why chef's 11.4 file provider require the parent folder should exists? And how to be without ugly hacks such as ::FileUtils.mkdir_p(::File.dirname(new_resource.full_path)) in cookbook?
[2013-03-12 14:36:31 -0400] c0ff33: good morning
[2013-03-12 14:40:55 -0400] cwj: alet: its been my experience that chef has always required parent directories to exist. to ensure that the directory i need exists, i often i use a directory resource with the recursive parameter set to true
[2013-03-12 14:41:47 -0400] zts: alet: you should use the Directory resource, instead of ruby like that...
[2013-03-12 14:43:25 -0400] alet: thanks, in first look I didn't find it. Now see that it exists
[2013-03-12 14:52:04 -0400] robertlemke: Folks, I'm a newbie at Chef and Ruby - I hope this it the right channel for asking a medium simple question: In my own lightweight provider I am using a template, as I am used to from my recipes already. Now, the source file I defined is searched in the cookbook _using_ my resource, but I'd like to refer to a template file which is provided by the cookbook defining the resource / provider. Got a hint for me?
[2013-03-12 14:53:28 -0400] awgross: robertlemke: it can be done
[2013-03-12 14:53:36 -0400] awgross: robertlemke: let me see if I can find an example
[2013-03-12 14:53:37 -0400] cwj: robertlemke: theres a 'cookbook' parameter that can be used with the template resource
[2013-03-12 14:53:39 -0400] chris613: robertlemke: I've never tried what you're describing, but I think the cookbook_name resource attribute is what you're looking for
[2013-03-12 14:53:49 -0400] cwj: yeah
[2013-03-12 14:54:04 -0400] robertlemke: sounds logic ;-) thanks, I'll try that!
[2013-03-12 14:54:07 -0400] chris613: is "resource parameter" the correct term? I felt a bit awkward using "resource attribute"
[2013-03-12 14:54:15 -0400] cwj: so instrument your lwrp with a parameter that you can pass the cookbook name to
[2013-03-12 14:54:23 -0400] cwj: and use that in the template resource declaration
[2013-03-12 14:54:39 -0400] cwj: chris613: i think of it like nodes have attributes and resources have parameters
[2013-03-12 14:54:54 -0400] chris613: cwj: A useful distinction
[2013-03-12 14:55:38 -0400] awgross: robertlemke: seems i cant find my example but "cookbook_name" is what you want
[2013-03-12 14:55:55 -0400] smt: aruntomar: I am following http://www.linuxguy.in/how-to-install-and-configure-open-source-chef-server-11, only difference is that I am doing on vm via vagrant(Vagrant version 1.0.6). In Vagrantfile network settings: config.vm.network :bridged and config.vm.forward_port 80, 8080. I am not able to access chef-server by localhost :(. How to access chef-server?
[2013-03-12 14:56:09 -0400] robertlemke: awgross: thanks a lot! Now looking at the error message (Compiled Resource) I could have seen that "cookbook_name" was set ...
[2013-03-12 14:57:29 -0400] c0ff33: smt i think on chef 11 you have to use HTTPS/SSL/443
[2013-03-12 14:58:12 -0400] smt: aruntomar: using Ubuntu 12.04.1 LTS box
[2013-03-12 14:58:20 -0400] smt: c0ff33: ok
[2013-03-12 14:59:36 -0400] smt: c0ff33: doing https://localhost/ . Still unable to connect
[2013-03-12 15:00:37 -0400] c0ff33: smt are your services all running when you run `chef-server-ctl status`
[2013-03-12 15:01:17 -0400] c0ff33: smt also try telnet localhost 443
[2013-03-12 15:01:18 -0400] smt: c0ff33: yes . Even chef-server-ctl test passed
[2013-03-12 15:02:27 -0400] c0ff33: i'm looking for a primer on sv/runit - not having much luck with google
[2013-03-12 15:03:05 -0400] kerouac: ok, so private chef
[2013-03-12 15:03:25 -0400] c0ff33: also - why does chef use sv/runit instead of init ?
[2013-03-12 15:04:35 -0400] queso: Init doesn't restart processes.
[2013-03-12 15:05:06 -0400] c0ff33: queso - isn't that what the 'service' scripts / init.d is used for?
[2013-03-12 15:05:25 -0400] queso: Init doesn't automatically restart processes.
[2013-03-12 15:05:49 -0400] c0ff33: queso - if they fail or stop?
[2013-03-12 15:05:57 -0400] queso: c0ff33: Right. It's a supervisor.
[2013-03-12 15:06:01 -0400] awgross: c0ff33: the main thing is that init.d was meant for starting system services that dont really crash.  It can be ok for starting things that fork off their actually worker process.  In the case of Chef is it better to have something monitoring it to restart it if it fails/bloats
[2013-03-12 15:06:13 -0400] awgross: their actual worker*
[2013-03-12 15:06:27 -0400] awgross: just a bit different process models is all
[2013-03-12 15:06:59 -0400] c0ff33: awgross got it - runit is a bit more comprehensive then
[2013-03-12 15:07:11 -0400] awgross: yeah, better suited to this sort of thing
[2013-03-12 15:07:49 -0400] c0ff33: awgross: but i suppose that when your system starts you don't want every single init script being monitored so init has its place too
[2013-03-12 15:08:27 -0400] awgross: c0ff33: correct, runit itself can be started with init.d (so that is starts in a specified order, always on reboot etc)
[2013-03-12 15:08:39 -0400] awgross: however the processes it runs dont have those same constraints
[2013-03-12 15:08:40 -0400] c0ff33: i'm trying to dig into sv and chef more to better understand them - is there like a 'sv list all' command?
[2013-03-12 15:09:28 -0400] kerouac: starting a private chef install using standalone configuration
[2013-03-12 15:09:40 -0400] queso: c0ff33: man sv
[2013-03-12 15:09:47 -0400] kerouac: it *seems * straightforward to migrate to HA
[2013-03-12 15:09:53 -0400] kerouac: am i missing something?
[2013-03-12 15:09:54 -0400] c0ff33: yeah i didnt see any list all in there queso
[2013-03-12 15:10:23 -0400] c0ff33: as far as i can tell you just look at /opt/chef-server/sv for the case of the embedded sv
[2013-03-12 15:10:37 -0400] queso: c0ff33: chef-server-ctl status
[2013-03-12 15:10:55 -0400] queso: c0ff33: That gives the output of the appropriate sv commands.
[2013-03-12 15:10:55 -0400] c0ff33: > i'm trying to dig into sv and chef more to better understand them
[2013-03-12 15:11:00 -0400] kerouac: to rephrase: the migratin to HA just invovled VIPs and a shared filestore via drdb ... migration is that simple, yes?
[2013-03-12 15:11:23 -0400] queso: c0ff33: http://smarden.org/runit/
[2013-03-12 15:12:34 -0400] c0ff33: queso seen that too
[2013-03-12 15:13:24 -0400] kerouac: i'll send a mail to opscode and ask
[2013-03-12 15:14:11 -0400] cwj: kerouac: i think you are on the right track there
[2013-03-12 15:14:46 -0400] kerouac: cwj: with asking apscode support? yeah- i thought i'd ask here first, in case it was obvious
[2013-03-12 15:14:52 -0400] c0ff33: ok so apparently there is no way to use sv to list all services
[2013-03-12 15:14:55 -0400] kerouac: so i didn't look dumb on reord
[2013-03-12 15:14:59 -0400] cwj: i think one of the opscode guys recently said on foodfightshow that drbd and a VIP is all thats required
[2013-03-12 15:15:07 -0400] kerouac: ohhh cool
[2013-03-12 15:15:13 -0400] kerouac: thanks, cwj
[2013-03-12 15:15:16 -0400] cwj: all the server data goes in the same dir
[2013-03-12 15:15:20 -0400] kerouac: yeah
[2013-03-12 15:15:23 -0400] cwj: wouldnt hurt to ask them anyway
[2013-03-12 15:15:37 -0400] kerouac: nice, i can start with what i've got while i put in tickets for more infrastrcucture
[2013-03-12 15:15:47 -0400] kerouac: wanted to avoid painign myself in a corner, thanks
[2013-03-12 15:16:10 -0400] kerouac: i'll ask and let you know
[2013-03-12 15:16:17 -0400] cwj: cool, good luck
[2013-03-12 15:17:49 -0400] c0ff33: on the opscode [blog](http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/) they have listed that the config file is /etc/chef-server/chef-server.rb but apparently it is actually `/etc/chef-server/chef-server-running.json` ... I'm not surprised that the chef documentation is inaccurate yet again.
[2013-03-12 15:19:05 -0400] awgross: c0ff33: thats happens, make a quick pull request to https://github.com/opscode/chef-docs
[2013-03-12 15:19:44 -0400] c0ff33: awgross - for the blog entry?
[2013-03-12 15:19:57 -0400] awgross: c0ff33: erps, nope cant do that
[2013-03-12 15:20:36 -0400] c0ff33: i don't even have a chef-server.rb file on my system - i have no clue where that even came from
[2013-03-12 15:26:37 -0400] gkarekinian: The /etc/chef-server/chef-server.rb config file is used to set the FQDN and various options, mine was generated by the chef-server cookbook
[2013-03-12 15:39:21 -0400] edannenbe: i have a couple of recipes failing, apparently node.run_state[:users] is not set, i was expecting that this would be filled with items from the users databag, however further reading suggests that run_state is only used for setting temp variables you would just need for the client run, is this correct?
[2013-03-12 15:40:20 -0400] c0ff33: thanks gkarekinian that makes sense
[2013-03-12 15:44:25 -0400] queso: What is a good way to differentiate encrypted data bags for different environments?
[2013-03-12 15:44:39 -0400] queso: Or just don't store encrypted data bags in the chef-repo?
[2013-03-12 15:46:15 -0400] gale_: any easy solution to the opscode users cookbook putting carriage returns in .ssh/authorized_keys?
[2013-03-12 15:46:50 -0400] c0ff33: beam is using a lot of memory - is there a way to reduce that?
[2013-03-12 15:52:44 -0400] awgross: any know if the LWRP resource syntax "attribute :foo, :kind_of => String, :default => node['non_ohai']['attribute']" works in Chef 11+? It does not work in 10.18.2
[2013-03-12 15:57:52 -0400] xtristan: is it possible to notify a cookbook_file resource?  i'm using remote_file to pull down a bundled installer, then using a bash block to do the dirty work -- including recreating a folder, then i need to tell a few cookbook_files to source
[2013-03-12 15:59:02 -0400] xtristan: as part of the install, the folder those cookbook_files live in gets destroyed, so i need to enforce a remote_file, bash_script, then cookbook_file source order
[2013-03-12 15:59:47 -0400] cowboycoder: can anybody point me to an example of how to programatically add attributes to a node?
[2013-03-12 16:00:56 -0400] awgross: xtristan: you should be able to notify it, jsut figure out what the default action is
[2013-03-12 16:03:15 -0400] programmerq: so, I have a block of code in my recipe that I use in three recipes. I'm trying to deduplicate that. I tried shoving it in the libraries folder in my cookbook, but it is doing a search. Search appears to not be available to ruby blocks in the libraries.
[2013-03-12 16:03:52 -0400] programmerq: basically, my block does a search, and grabs some attributes, and builds a url for accessing redis
[2013-03-12 16:04:19 -0400] programmerq: is there a way to run a search from a library? or is there a better way to approach this whole thing?
[2013-03-12 16:04:23 -0400] xtristan: awgross the default is :create, so it looks like i then have to mark things that need to happen as :immediately and then pray?
[2013-03-12 16:06:19 -0400] awgross: xtristan: play around with it an see
[2013-03-12 16:06:26 -0400] awgross: xtristan: not sure what other actions it has
[2013-03-12 16:06:45 -0400] xtristan: yeah, it gets kind of gross.  unfortunately, i'm hitting the boundry of "awful hackish shit made worse by mixing ruby/bash/chef"
[2013-03-12 16:06:54 -0400] c0ff33: im trying to turn down the heap size by editing /etc/chef-server/chef-server.rb
[2013-03-12 16:07:00 -0400] c0ff33: i have tried node.override['chef_server']['chef-solr']['heap_size'] = "200M"
[2013-03-12 16:07:05 -0400] c0ff33: and also chef_server['chef-solr']['heap_size'] = "200M"
[2013-03-12 16:07:18 -0400] c0ff33: and i keep getting FATAL: NoMethodError: undefined method `/' for "200M":String
[2013-03-12 16:07:32 -0400] awgross: xtristan: hehe, happens
[2013-03-12 16:08:03 -0400] awgross: programmerq: require 'chef/search/query'
[2013-03-12 16:08:24 -0400] sascha_d: so is chef config verbose_logging no longer a thing?
[2013-03-12 16:08:42 -0400] xtristan: thanks for reading though.  it's a recipe that calls my ruby library to get the URL for remote_file via parsing json, gets a file that unzips, runs an install bash script, then moves some ./templates and ./files into place before restarting
[2013-03-12 16:08:42 -0400] rep0st: What's the general best practice on using chef environments. Is it more ideal to use them as Datacenter Specific values or is it more ideal to use them as a prod vs dev.
[2013-03-12 16:09:15 -0400] rep0st: and in addition. Is it better to inherit chef environments at the top level, or at the bottom level when certain roles need to have environment values.
[2013-03-12 16:09:51 -0400] sascha_d: from the source code, it looks like if the service is also running, it won't stream to stdout even if I have verbose_logging set to true:  if STDOUT.tty? && !Chef::Config[:daemon] && Chef::Log.debug?
[2013-03-12 16:15:57 -0400] programmerq: awgross: I put that at the top of my library, but search still doesn't work: NoMethodError: undefined method `search' for RedisHelper:Class
[2013-03-12 16:16:09 -0400] programmerq: do I need to do like Chef::Search.search or something?
[2013-03-12 16:16:21 -0400] programmerq: Unfortunately, I'm fairly new to ruby still too.
[2013-03-12 16:16:45 -0400] awgross: Hmm, anyone have any luck use dynamic method creation for node attributes inside resource files? I need to to wait to run until the node data is converged, but I cant run it from inside a method since it is a private method of the class
[2013-03-12 16:17:28 -0400] awgross: programmerq:  s = Chef::Search::Query.new
[2013-03-12 16:17:28 -0400] awgross:               result = s.search(:node, query)
[2013-03-12 16:17:40 -0400] programmerq: awgross: that makes sense
[2013-03-12 16:17:59 -0400] awgross: ironically taken from my own Redis Helper library
[2013-03-12 16:18:30 -0400] programmerq: that's awesome.
[2013-03-12 16:20:05 -0400] drrk: is it possible to get chef11 to ignore the https certificate validation errors?
[2013-03-12 16:20:30 -0400] drrk: i've set ssl_verify_mode  :verify_none
[2013-03-12 16:20:37 -0400] drrk: but that doesn't seem to do anyting
[2013-03-12 16:38:52 -0400] withnale: is there an easy way to bulk move a node to a new environment on the commandline? knife node flip seems to be failing
[2013-03-12 16:39:34 -0400] j^2: withnale: one sec
[2013-03-12 16:40:19 -0400] j^2: damn, it used to be on the wiki under environments
[2013-03-12 16:43:39 -0400] withnale: I thought the following would work...
[2013-03-12 16:43:42 -0400] c0ff33: so in chef 11 you set up your remote knife user as a "user" instead of a client ?
[2013-03-12 16:43:59 -0400] withnale: knife node list | grep matching | xargs -I STR -n 1 knife node flip STR new_environment
[2013-03-12 16:44:55 -0400] matticulous: c0ff33: correct.
[2013-03-12 16:45:11 -0400] c0ff33: tks matticulous
[2013-03-12 16:48:35 -0400] c0ff33: chef 11: are cookbooks stored in solr or the database? they aren't in the FS
[2013-03-12 16:54:02 -0400] j^2: any interest in starting up a chef subreddit? i come accross alot of blog/tutorials on chef, but no consolidation, thoughts?
[2013-03-12 16:55:56 -0400] patcon_: jtimberman: i don't suppose you've done any testing of jenkins running under runit with pam auth? seems that using the linux user db fails when I switched from the old cookbook to the new...
[2013-03-12 17:05:55 -0400] swaite: I have a cookbook in vendor_cookbooks, and a newer rev of the same cookbook that is in "our" cookbooks, and librarian seems to default to using the one in vendor_cookbooks. When I delete the vendor_cookbooks one, and then run librarian-chef, again, the vendor cookbook re-appears. How does one stop this?
[2013-03-12 17:11:36 -0400] log1kal: swaite: do either of the methods at https://github.com/applicationsonline/librarian/wiki/FAQ help with your issue?
[2013-03-12 17:14:39 -0400] swaite: log1kal: I don't believe so, the new cookbook is in a separate dir, and is referenced in the cheffile
[2013-03-12 17:16:27 -0400] clundquist: in berkshelf you can use `cookbook 'foo', :git => 'repo', 'ref' => '1.0'
[2013-03-12 17:16:36 -0400] clundquist: I think you can do something similar in librarian
[2013-03-12 17:17:03 -0400] clundquist: alternatively `cookbook 'foo', :path => 'site-cookbooks/foo'
[2013-03-12 17:17:05 -0400] clundquist: might work
[2013-03-12 17:18:18 -0400] nacer: heyy that's too bad install.sh script don't seem to use the http_proxy variable
[2013-03-12 17:19:03 -0400] swaite: clundquist: that's what it looks like we're doing
[2013-03-12 17:19:04 -0400] swaite: cookbook 'snmp',
[2013-03-12 17:19:04 -0400] swaite:         :path => 'cookbooks'
[2013-03-12 17:19:18 -0400] queso: Is the organization of the chef-repo/data_bags directory standardized?
[2013-03-12 17:19:51 -0400] clundquist: queso: yes, as far as I know
[2013-03-12 17:20:09 -0400] clundquist: swaite: check metadata.rb for a name attribute
[2013-03-12 17:20:13 -0400] queso: clundquist: So I couldn't do chef-repo/data_bags/environment/bagname/itemname ?
[2013-03-12 17:20:25 -0400] juliancdunn: queso: data bags are global
[2013-03-12 17:20:50 -0400] clundquist: queso: I would expect it would blow up saying it couldn't find it
[2013-03-12 17:21:02 -0400] queso: juliancdunn: Yeah, I know. But if I want to mirror all production credentials for testing, what's the right way to do that?
[2013-03-12 17:21:08 -0400] queso: clundquist: hmm, okay.
[2013-03-12 17:21:39 -0400] ssofos: quick question: I have some normal attributes set on some chef nodes I need to delete, what is the best way to remove these normal attributes in mass?
[2013-03-12 17:21:47 -0400] clundquist: add an entry in your data_bag that says :env
[2013-03-12 17:21:50 -0400] clundquist: and search on it
[2013-03-12 17:22:10 -0400] clundquist: sounds like the best way from where you are
[2013-03-12 17:22:41 -0400] queso: clundquist: Do you store both testing and production encrypted data bags in your chef-repo?
[2013-03-12 17:22:42 -0400] geekbri: queso: What i've done to deal with the situation youre talking about, at least some of the smaller scale stuff, is have a data bag and inside of it a key called env: then just nest the per environment information inside of them
[2013-03-12 17:23:02 -0400] geekbri: the other answer of course, is just to have separate chef servers per environment.  It depends on how you are using environments really
[2013-03-12 17:23:04 -0400] clundquist: ssofos: knife node from file nodes/* after dumping the nodes and regexping
[2013-03-12 17:23:39 -0400] ssofos: qq
[2013-03-12 17:23:40 -0400] clundquist: queso: we have multiple chef servers
[2013-03-12 17:23:48 -0400] queso: geekbri: I think I'm going to do the separate chef server route. But that doesn't answer the question of how to differentiate the environment-specific data bag items.. except adding "env" as you've said.
[2013-03-12 17:24:21 -0400] geekbri: queso: I think that is unfortunately the answer :)
[2013-03-12 17:24:39 -0400] queso: geekbri, clundquist: So, you have an app_settings bag.  In there is a widget_app data bag item.  Now .. how to differentiate testing creds from prod creds?
[2013-03-12 17:24:40 -0400] clundquist: the other option is to put that in plain text in roles
[2013-03-12 17:25:42 -0400] queso: clundquist, geekbri: I was just thinking of having skeleton data bag items in the chef-repo with empty passwords. Then you grab all the necessary files you need, fill in the passwords, etc., and upload to the server.
[2013-03-12 17:26:09 -0400] geekbri: queso: I was about to say, you may want to seperate the credentials from the rest of the configuraiton
[2013-03-12 17:27:15 -0400] queso: geekbri, clundquist: Another question: Do you use a separate key for every data bag item, or one key per environment?
[2013-03-12 17:28:01 -0400] clundquist: the pattern I've seen is to "tag" databags
[2013-03-12 17:28:07 -0400] clundquist: by having an environment key in it
[2013-03-12 17:28:18 -0400] clundquist: and then searching based on node.environment
[2013-03-12 17:28:33 -0400] clundquist: Is that a good pattern? I donno, but it is what I have seen and makes sense
[2013-03-12 17:29:01 -0400] queso: clundquist: But if the item is encrypted, how can you see what environment it's in? ;)
[2013-03-12 17:29:20 -0400] queso: (or, what environment it's encrypted for..)
[2013-03-12 17:29:24 -0400] clundquist: does search not work with encrypted data bags?
[2013-03-12 17:29:31 -0400] queso: clundquist: Only on the keys.
[2013-03-12 17:30:07 -0400] clundquist: then name spacing the keys it is
[2013-03-12 17:34:14 -0400] queso: clundquist, geekbri: Thanks for your help, guys.
[2013-03-12 17:34:23 -0400] clundquist: sure thing
[2013-03-12 17:37:00 -0400] alop: I want to lodge a complaint about the new docs.opscode.com site I don't like it. that is all
[2013-03-12 17:38:21 -0400] qhartman: alop, seconded. The old site was easier to navigate.
[2013-03-12 17:38:37 -0400] alop: yeah
[2013-03-12 17:43:49 -0400] awgross: could always send some pull requests =D
[2013-03-12 17:45:15 -0400] zts: I don't like that "Anatomy of a Chef Run" from the old site now forces a redirect to an inferior page on the new site
[2013-03-12 17:45:19 -0400] zts: other than that, I actually quite like it :)
[2013-03-12 17:47:46 -0400] w6fu: question about /etc/chef/encrypted_data_bag_secret, chef just "knows" this is the default location? So I should add it to my base role?
[2013-03-12 17:48:43 -0400] ssofos: clundquist. yes that sounds good, what about running a knife exec command to transform the normal attributes of a node? Also is there any deeper documentation on the chef-shell DSL for knife exec commands?
[2013-03-12 17:50:12 -0400] doomviking: w6fu: thats the default
[2013-03-12 17:51:03 -0400] w6fu: doomviking: thank you, trying to use my first encrypted data bag
[2013-03-12 17:51:35 -0400] doomviking: w6fu: god luck and good speed
[2013-03-12 17:52:06 -0400] w6fu: doomviking: seriously :-)
[2013-03-12 17:52:34 -0400] doomviking: w6fu: its easy. just dont get your keys crossed
[2013-03-12 17:56:14 -0400] w6fu: another q: how would I change this attribute to use data bag "passwords mysql"? default["percona"]["encrypted_data_bag"]
[2013-03-12 17:56:58 -0400] w6fu: it's default is just "passwords", and for the life of me I can't seem to figure out how it should be changed
[2013-03-12 17:57:05 -0400] clundquist: chef-apply: how do you use templates with it?
[2013-03-12 17:57:36 -0400] doomviking: w6fu: you're looking at the doc, I assume
[2013-03-12 17:57:55 -0400] w6fu: I thought so :)
[2013-03-12 17:58:02 -0400] doomviking: http://docs.opscode.com/essentials_data_bags_encrypt.html
[2013-03-12 17:58:14 -0400] doomviking: the examples there should get you going
[2013-03-12 18:00:40 -0400] clundquist: where can I find out more about chef-apply? The best I can find is a foot note, http://docs.opscode.com/breaking_changes_chef_11.html#chef-apply
[2013-03-12 18:01:03 -0400] awgross: is it possible to get info about who notified your LWRP?  For example get the name of the template file that is notifying your service restart?
[2013-03-12 18:05:12 -0400] tmichael: knife json output no longer pretty print format.  anything change?  trying to track down option for this, but prior to yesterday it just worked so not sure where to begin
[2013-03-12 18:06:58 -0400] endzyme: Is there a good cookbook already out there for configuring activemq clusters?
[2013-03-12 18:07:36 -0400] tolland: tmichael: knife role show test1 -Fj | python -mjson.tool
[2013-03-12 18:08:47 -0400] tmichael: tolland: appreciate it.  found that capability.  just wondering what could have changed that now requires it?  been using knife for years and always just worked by default
[2013-03-12 18:09:38 -0400] tmichael: maybe something borked in .bashrc or something
[2013-03-12 18:09:53 -0400] tolland: I've got a recipe that depends on the existence of some attribute say node["foo"], so rather than have each resource check for it only_if, is there an idiom for putting a guard at the top of the recipe that will
[2013-03-12 18:10:20 -0400] tolland: cause the recipe to skip with a warning
[2013-03-12 18:10:29 -0400] tolland: I don't really want to generate a failure
[2013-03-12 18:11:10 -0400] tolland: tmichael: so there was the recent json dep fiasco, which borked new chef deploys for a few hours
[2013-03-12 18:11:33 -0400] tolland: presumably they are depending on that underlying library defaults
[2013-03-12 18:11:36 -0400] toady00|away: should https://www.opscode.com/chef/download?p=windows&pv=2008r2&m=i686 be returning a 404? The bootstrap process for windows is trying to download a .msi from here.
[2013-03-12 18:14:15 -0400] fauncybillups: I'm running chef-client via cron.. I'd like to write a nagios check to ensures that there was a successful chef client run within the past "n" minutes, is there an easy way to do this?
[2013-03-12 18:27:10 -0400] awgross: geekbri: good news, almost done with my refactor of your redis cookbook.  Bad new, its pretty much unrecognizeable
[2013-03-12 18:29:16 -0400] skarufue: hello. i use chef-server 12.06 installed with the omnibus installer. i have knife (Chef: 10.12.0) from aptitude. if i do a knife coocbook upload i get a ERROR: Method Not Allowed. I assume these versions are incompatible. what is the best way to install a compatible knife
[2013-03-12 18:34:43 -0400] ctb: fauncybillups: why not run chef-client as a service and have nagios check that the process is running?
[2013-03-12 18:35:24 -0400] fauncybillups: ctb: we ran into an issue where chef-client would slowly leak memory, so we decided to run it via cron instead
[2013-03-12 18:36:35 -0400] clundquist: Who is the best person to talk to about chef-apply?
[2013-03-12 18:36:38 -0400] skarufue: maybe i should also mention thet i cannot install from opscode ubuntu repository beacause of:
[2013-03-12 18:36:39 -0400] skarufue: Errors were encountered while processing:
[2013-03-12 18:36:41 -0400] skarufue:  /var/cache/apt/archives/libpolyglot-ruby_0.3.1-0opscode1_all.deb
[2013-03-12 18:36:42 -0400] skarufue:  /var/cache/apt/archives/libtreetop-ruby_1.4.9-0opscode1_all.deb
[2013-03-12 18:36:44 -0400] skarufue: E: Sub-process /usr/bin/dpkg returned an error code (1)
[2013-03-12 18:39:41 -0400] miah: so. have you debugged those errors/
[2013-03-12 18:41:19 -0400] spox: fauncybillups: seen -f ?
[2013-03-12 18:42:07 -0400] miah: indeed. --fork ftw.
[2013-03-12 18:42:40 -0400] skarufue: ok i managed to get ma a chef-client version 10.18.0 but i still get the ERROR: Method Not Allowed when i try to upload a cookbook
[2013-03-12 18:42:51 -0400] miah: http://www.opscode.com/blog/2012/09/07/chef-10-14-0-released/ fork details
[2013-03-12 18:43:18 -0400] miah: http://tickets.opscode.com/browse/CHEF-310
[2013-03-12 18:43:26 -0400] miah: doh. http://tickets.opscode.com/browse/CHEF-3104
[2013-03-12 18:46:26 -0400] fauncybillups: spox / miah: I was not aware of that option.. thank you
[2013-03-12 18:48:32 -0400] priestjim: hey people! does anybody have issues with compound keys in databags (ie "this": { "that" : "else" }) when searching for them (i.e. this_that:*) in Chef 11?
[2013-03-12 18:51:07 -0400] sashimiblade: hi everyone.  I'm using Amazon's new OpsWorks tool to deploy my apps, and I'm getting the following error when trying to execute the ohai recipe: "ohai: NoMethodError - undefined method `platform_family?' for Chef::Resource::RemoteDirectory"
[2013-03-12 18:53:48 -0400] jtimberman: sashimiblade: OpsWorks uses Chef 0.9, which doesn't have the platform_family methods, or the ohai version that returns an attribute for the platform family.
[2013-03-12 18:54:13 -0400] jtimberman: sashimiblade: you'll need to downgrade the cookbook to a version that doesn't use platform_family
[2013-03-12 18:54:21 -0400] miah: i just realized yesterday that EY uses Chef 0.6
[2013-03-12 18:54:40 -0400] miah: its putting a serious damper on writing good cookbooks :P
[2013-03-12 18:54:44 -0400] c_t: ooof
[2013-03-12 18:54:55 -0400] c_t: on the plus side, the cuneiform cookbooks have a certain beauty
[2013-03-12 18:55:01 -0400] sashimiblade: jtimberman: is downgrading the cookbook a reason to not use OpsWorks?  Wouldn't I have to downgrade all my other cookbooks too?
[2013-03-12 18:55:14 -0400] clundquist: sashimiblade: yes
[2013-03-12 18:55:14 -0400] miah: i <3 'main' cookbook with all the if / case conditionals
[2013-03-12 18:55:43 -0400] clundquist: miah: who was the author?
[2013-03-12 18:55:44 -0400] c_t: (speaking of: You can, in fact, install cuneiform fonts on your computer)
[2013-03-12 18:55:45 -0400] miah: sashimiblade: yes. using opsworks means you'll have to backport / modify all cookbooks to work in their environment.
[2013-03-12 18:55:56 -0400] sashimiblade: wow, that is a drag
[2013-03-12 18:56:16 -0400] miah: clundquist: of the cookbook? well..
[2013-03-12 18:56:37 -0400] miah: a certain damm's name is all over that chef implementation. but its not his fault that EY has done nothing to update.
[2013-03-12 18:58:17 -0400] clundquist: you mean since that commit Ezra made 4 years ago?
[2013-03-12 18:58:36 -0400] miah: =)
[2013-03-12 18:58:45 -0400] clundquist: :)
[2013-03-12 18:59:14 -0400] miah: there are obvious reasons why i'm currently working on moving my company _out_ of EY
[2013-03-12 18:59:39 -0400] faustroll: miah: costs as well?
[2013-03-12 18:59:54 -0400] miah: not really costs.. more around technology and control.
[2013-03-12 19:00:13 -0400] faustroll: miah: i gathered that.
[2013-03-12 19:01:00 -0400] faustroll: miah: ey locks you in to *their* decisions
[2013-03-12 19:01:01 -0400] clundquist: If you you are looking around I would be happy to talk
[2013-03-12 19:01:56 -0400] clundquist: https://github.com/opscode/chef/blob/master/lib/chef/application/apply.rb has a bug with template resources
[2013-03-12 19:02:24 -0400] clundquist: There is a work around done here, https://github.com/sometimesfood/sandwich/commit/d3540feade873929daaf78312d30a6729eb00bc3
[2013-03-12 19:02:35 -0400] faustroll: miah: ey works for setups that fit with their way
[2013-03-12 19:02:38 -0400] clundquist: is there a better work around we should do in core/
[2013-03-12 19:03:11 -0400] miah: faustroll: yup.
[2013-03-12 19:03:24 -0400] miah: i think they are fine for new startups. but you eventually outgrow them.
[2013-03-12 19:03:59 -0400] pwf: hmmm, ohai has an empty addresses block for one of my interfaces
[2013-03-12 19:04:07 -0400] pwf: but 'ifconfig' shows a value
[2013-03-12 19:04:08 -0400] miah: clundquist: well. i'm definitely considering BB for a few things. right now much of our architecture is moving to ec2.
[2013-03-12 19:04:12 -0400] awgross: miah, faustroll or get rapgenius'd
[2013-03-12 19:04:25 -0400] miah: awgross: indeed.
[2013-03-12 19:04:42 -0400] miah: does ohai still use ifconfig, or does it use 'ip' nowadays.
[2013-03-12 19:04:52 -0400] clundquist: ohai uses ip addr show
[2013-03-12 19:04:59 -0400] clundquist: and then falls back when not present
[2013-03-12 19:04:59 -0400] miah: cool
[2013-03-12 19:05:26 -0400] clundquist: pwf: does that interface have sub interfaces? say in an OpenVZ container?
[2013-03-12 19:05:33 -0400] miah: its crazy that the last two chef environments i've supported (this one and previous) both use ancient chef
[2013-03-12 19:05:42 -0400] miah: previous job was still running a forked version of 0.9.16
[2013-03-12 19:05:46 -0400] clundquist: ip doesn't really do well with virtual child interfaces or whatever
[2013-03-12 19:05:49 -0400] awgross: miah: ouch
[2013-03-12 19:05:58 -0400] pwf: it's an openvpn interface, tun0... but it doesn't have sub-interfaces as far as i know
[2013-03-12 19:06:24 -0400] clundquist: in there tun0:0 ?
[2013-03-12 19:07:28 -0400] faustroll: miah: I see that kind of issue quite often
[2013-03-12 19:08:18 -0400] pwf: no clundquist :/
[2013-03-12 19:08:24 -0400] clundquist: hmm
[2013-03-12 19:09:36 -0400] clundquist: is the route block empty as well?
[2013-03-12 19:10:39 -0400] pwf: i see no route block anywhere
[2013-03-12 19:10:42 -0400] pwf: so yes
[2013-03-12 19:11:18 -0400] skarufue: ok i fixed the error myself. for some reason knife switches to a GET method after recieving a 301 response. now nginx in omnibus installer rewrites to https. If you have https://chef-server in your knife.rb it works. ( the error was Error: Method Not Allowed when doing a knife cookbook upload)
[2013-03-12 19:11:19 -0400] faustroll: miah: you can help them develop a sensible way of updating Chef on major stable releases?
[2013-03-12 19:12:42 -0400] balgarath: how can I use the result of a bash command inside of a recipe? i'm wanting to render a template that uses the commit hash of a git directory.
[2013-03-12 19:15:49 -0400] failshell: how do you delete an attribute from a recipe? ive been trying a few things and i just cant seem to find the right voodoo
[2013-03-12 19:17:01 -0400] geekbri: awgross: haha, well, as long as its unrecognizable but more manageable and backwards compatible thats not such a bad thing.
[2013-03-12 19:18:33 -0400] awgross: geekbri: yeah i refactored the LWRPs a lot, installation is done via a recipe with substituteable parts.  Server creation is now done via an LWRP.  And I improved the default settings model a bit.
[2013-03-12 19:20:55 -0400] priestjim: seriously, nobody has encountered this issue? http://tickets.opscode.com/browse/CHEF-3975
[2013-03-12 19:23:13 -0400] xerxas: Hi all
[2013-03-12 19:23:23 -0400] geekbri: awgross: hah, i actually had tickets for doing something similar
[2013-03-12 19:23:26 -0400] geekbri: awgross: just no time :)
[2013-03-12 19:23:31 -0400] xerxas: I need to read a file which contains some urls of files I need to download
[2013-03-12 19:23:41 -0400] xerxas: I first need to download this file
[2013-03-12 19:24:14 -0400] awgross: geekbri: going to finish up the config reloader later today hopefully
[2013-03-12 19:24:20 -0400] awgross: then just need some more testing around it
[2013-03-12 19:24:28 -0400] xerxas: but File.open("filename").each do |url| ... , seems to be executed at compile phase, and thus, the remote_file above is not executed first
[2013-03-12 19:24:34 -0400] awgross: i probably also broke upstart and old chef compatability =/
[2013-03-12 19:24:56 -0400] xerxas: any Idea how I can: 1/ download a file, 2/ read every line in the file 3/ create some remote_file for each line of 2 ?
[2013-03-12 19:31:15 -0400] jtimberman: sashimiblade: I wouldn't say it's a reason to not use OpsWorks. There's just an element of fitting within their sandbox. Based on what I've read on the internet (twitter mainly) they're looking to update their Chef version.
[2013-03-12 19:31:27 -0400] jtimberman: But you'd have to ask on their forums or other support channels for specifics about that.
[2013-03-12 19:32:26 -0400] miah: faustroll: sure, but whats in it for me? =)
[2013-03-12 19:32:33 -0400] knuckolls: xerxas, recipes are just ruby code. you can just write that logic in the recipe and inside the loop where you loop over the urls you just run a remote_file resource. i think that ought to work. might not be the cleanest way, but it'll work.
[2013-03-12 19:32:40 -0400] miah: i could just as easily go elsewhere. i have tons of stuff on my plate already.
[2013-03-12 19:33:00 -0400] faustroll: miah: lol. of course
[2013-03-12 19:34:03 -0400] faustroll: miah: sensible use of any open source framework needs an upgrade strategy in place
[2013-03-12 19:34:15 -0400] miah: yup
[2013-03-12 19:34:31 -0400] faustroll: miah: I do that when i set things up
[2013-03-12 19:34:47 -0400] miah: i think their problem at this point is they have a large number of people with custom chef 0.6 recipes and updating it will break who knows what and piss off lots of people
[2013-03-12 19:34:49 -0400] faustroll: miah: I'm just surprised when thought is not put into that
[2013-03-12 19:35:00 -0400] miah: yup
[2013-03-12 19:35:35 -0400] xerxas: knuckolls: I tried that , but it doesn't work , maybe my fault
[2013-03-12 19:35:42 -0400] faustroll: miah: yes. there is the
[2013-03-12 19:35:51 -0400] faustroll: lol
[2013-03-12 19:35:57 -0400] xerxas: knuckolls: if I do File.read() within a recipe, it's not ran in compile phase ?
[2013-03-12 19:36:21 -0400] miah: its only run when the recipe is run
[2013-03-12 19:36:22 -0400] knuckolls: xerxas: just pull the file down into a variable in ruby? don't write it to disk?
[2013-03-12 19:36:33 -0400] faustroll: miah: it is a pleasure to work with a group that puts thought into what they do
[2013-03-12 19:36:35 -0400] xnp70: does chef support NAT clients ?
[2013-03-12 19:36:51 -0400] miah: also, make sure your remote_file resource pulls from a local mirror and not something that is truely remote and possible to fail.
[2013-03-12 19:37:12 -0400] miah: xnp70: chef-client _pulls_ from a chef server. so yes.
[2013-03-12 19:37:14 -0400] xerxas: knuckolls:  interesting , can I do that with remote_file ? (actually, I'm not telling the truth , I'm using s3_aware_remote_file , a library I found on github, allowing me to download private files on s3 )
[2013-03-12 19:37:26 -0400] miah: so long as the chef server isn't behind a nat and the clients can access it
[2013-03-12 19:37:37 -0400] faustroll: miah: I've had to become a psychoanalyst in order to help people out of their confusion
[2013-03-12 19:37:44 -0400] xerxas: knuckolls: you mean sth like this: content = remote_file "name" do  ... end  ?
[2013-03-12 19:37:48 -0400] miah: faustroll: indeed.
[2013-03-12 19:37:59 -0400] xnp70: miah: what if the server is behind a firewall and its IP is mapped ( different from the public IP ) ?
[2013-03-12 19:38:02 -0400] miah: i quit my last job because my coworkers would rather fight about bullshit than get thigns done.
[2013-03-12 19:38:14 -0400] miah: xnp70: so long as the clients can access it.
[2013-03-12 19:38:25 -0400] miah: chef does not currently _push_ to clients
[2013-03-12 19:38:38 -0400] miah: so setup your acl's however, just make sure clients can access
[2013-03-12 19:39:06 -0400] faustroll: miah: Their network and their codebase are artifacts of their mental state.
[2013-03-12 19:39:14 -0400] miah: yup
[2013-03-12 19:40:19 -0400] geekbri: awgross: well that might be a problem :(
[2013-03-12 19:40:55 -0400] geekbri: awgross: one reason I was taking so long with some of my bigger changes is that I was going to attempt to have some level of compatibility layer.  I could easily just rewrite the whole cookbook and make it really clean and much nicer
[2013-03-12 19:42:12 -0400] awgross: yeah well see, I have to do more testing
[2013-03-12 19:42:20 -0400] awgross: and pick up a few more vagrant boxes apparently
[2013-03-12 19:42:25 -0400] awgross: geekbri:
[2013-03-12 19:42:37 -0400] geekbri: hehe
[2013-03-12 19:43:22 -0400] miah: all the vagrant boxes =)
[2013-03-12 19:43:24 -0400] awgross: also whats the redis-gem stuff for
[2013-03-12 19:43:29 -0400] faustroll: miah: My current policy is to work with confused groups only if I have the mandate to clean things up and do things in a good enough way
[2013-03-12 19:43:29 -0400] awgross: just to install it in case?
[2013-03-12 19:43:43 -0400] miah: faustroll: indeed. thats what i thought i had going into my last job. but i was lied to.
[2013-03-12 19:44:13 -0400] geekbri: awgross: somebody had requested that.
[2013-03-12 19:44:14 -0400] miah: "hi, we want to hire you to rescue us from this mess"
[2013-03-12 19:44:23 -0400] geekbri: awgross: I haven't touched it since somebody requested it as an issue :)
[2013-03-12 19:44:38 -0400] geekbri: miah: That almost never works out / is true
[2013-03-12 19:44:42 -0400] faustroll: miah: lol. they wanted you to collude with them
[2013-03-12 19:45:05 -0400] miah: well. if its a clearly defined rescue project its fine. i've dealt with them at every job honestly.
[2013-03-12 19:45:21 -0400] miah: but in this case they had a serious case of stockholm syndrome
[2013-03-12 19:45:34 -0400] faustroll: miah: the mess is mostly psychological
[2013-03-12 19:45:45 -0400] miah: they also didn't like that i didnt want to _refactor_ their mess and instead just rewrite some of the bigger pieces of it
[2013-03-12 19:46:09 -0400] Litex: It's always better to band-aid things with ugly wrappers!
[2013-03-12 19:46:13 -0400] miah: when 'writing a new version of this from scratch' ends up being faster, why would you band-aid?
[2013-03-12 19:46:27 -0400] Litex: </horriblesarcasm>
[2013-03-12 19:46:31 -0400] miah: =)
[2013-03-12 19:46:55 -0400] Litex: Then it's REALLY fun when it blows up in your face, which it inevitably will.
[2013-03-12 19:46:55 -0400] miah: i'm certainly not the best in this field, and there are tons of things i need to learn. but if you hire me to fix chef, please let me attempt to do that.
[2013-03-12 19:47:55 -0400] faustroll: miah: a healthy group wants you to learn and wants to move to better practices
[2013-03-12 19:48:28 -0400] faustroll: miah: a healthy group also tries to learn from the pain of doing it wrong
[2013-03-12 19:48:40 -0400] miah: right
[2013-03-12 19:48:58 -0400] miah: this is why im really happy about where im working now
[2013-03-12 19:49:14 -0400] awgross: hmm apparently ruby does not like skipping lines with a # when reading from a file
[2013-03-12 19:49:22 -0400] faustroll: miah: hence my focus on psychology. I'm getting better and better at reading the psych of a group
[2013-03-12 19:49:37 -0400] faustroll: awgross: what?
[2013-03-12 19:49:48 -0400] awgross: trying to parse a redis config file and skip lines with #
[2013-03-12 19:49:57 -0400] awgross: it just seems to ignore my regex
[2013-03-12 19:49:59 -0400] miah: why not just connect to the redis instance and dump its configuration?
[2013-03-12 19:50:01 -0400] faustroll: awgross: show me a gist?
[2013-03-12 19:50:21 -0400] awgross: miah: this is to apply changs from the tempalted config file w/o restarting redis
[2013-03-12 19:50:37 -0400] miah: if the config is templated, then you already have all the answers in ruby
[2013-03-12 19:50:48 -0400] miah: just also write those answers to the instance
[2013-03-12 19:50:56 -0400] awgross: not a bad plan
[2013-03-12 19:51:15 -0400] miah: its a good idea to keep erb's as dry as possible. i dont like to stick much transformative code in them.
[2013-03-12 19:51:38 -0400] faustroll: I hate erb
[2013-03-12 19:51:46 -0400] Litex: +1 to keeping any logic out of ERB's.
[2013-03-12 19:51:46 -0400] geekbri: Depending what the cookbook does, my typical erb's just iterate over a mash
[2013-03-12 19:52:07 -0400] geekbri: at least thats what I do now a days :)
[2013-03-12 19:52:07 -0400] miah: the only reason i hate erb is because people will do everything they can to avoid writing a proper config generator.
[2013-03-12 19:52:21 -0400] miah: and then struggle and try to make that erb fit every task
[2013-03-12 19:52:27 -0400] yfeldblum: miah, that's not really anything to do with ERB tho
[2013-03-12 19:52:30 -0400] miah: indeed
[2013-03-12 19:52:33 -0400] miah: its not erb's fault =)
[2013-03-12 19:52:59 -0400] miah: its more of a failure in system automation education
[2013-03-12 19:53:03 -0400] faustroll: anyone using HAML in Chef?
[2013-03-12 19:53:31 -0400] miah: which means we have to do a better job of educating people on our pains with certain patterns
[2013-03-12 19:53:38 -0400] geekbri: miah: I wouldn't even limit my comments to just system automation :)
[2013-03-12 19:53:45 -0400] miah: well sure
[2013-03-12 19:53:58 -0400] awgross: faustroll: https://gist.github.com/andrewgross/5146392
[2013-03-12 19:54:03 -0400] geekbri: Config files, the source and solution to all of lifes problems!
[2013-03-12 19:54:24 -0400] yfeldblum: faustroll, burn
[2013-03-12 19:54:30 -0400] yfeldblum: faustroll, :D
[2013-03-12 19:54:39 -0400] yfeldblum: faustroll, really not a fan of that idea
[2013-03-12 19:54:44 -0400] yfeldblum: faustroll, what would be the point?
[2013-03-12 19:54:53 -0400] awgross: Ive got 99 problems and config files are every single one
[2013-03-12 19:54:58 -0400] miah: =)
[2013-03-12 19:55:08 -0400] Litex: hah
[2013-03-12 19:55:36 -0400] awgross: faustroll: very possible i made some mistake, Ruby is not my native language
[2013-03-12 19:56:09 -0400] faustroll: awgross: I'll check it in a second
[2013-03-12 19:56:35 -0400] awgross: faustroll: np, going to go with miah's suggestion of just reading my configs directly
[2013-03-12 19:56:38 -0400] faustroll: yfeldblum: just a question. HAML is cleaner
[2013-03-12 19:56:40 -0400] awgross: err writing
[2013-03-12 19:56:51 -0400] yfeldblum: faustroll, why are you generating html in chef?
[2013-03-12 19:57:01 -0400] yfeldblum: faustroll, are you trying to generate xml?
[2013-03-12 19:57:12 -0400] yfeldblum: faustroll, there's rexml and nokogiri for that, plus plenty more
[2013-03-12 19:58:22 -0400] Majost: Are the debian packages discontinued with Chef  >= 10.22
[2013-03-12 19:58:31 -0400] faustroll: yfeldblum: I'm not doing any of the above. just asking an idle question re: templating and erb
[2013-03-12 19:58:56 -0400] miah: Majost: i think there is a big push to move to omnibus. not sure if individual packages are still being pushed.
[2013-03-12 19:59:27 -0400] Majost: miah: Do you know if there will be an upgrade document published for migrating from package installs to omnibus?
[2013-03-12 20:03:49 -0400] faustroll: yfeldblum: excuse me for asking such a nonsensical question
[2013-03-12 20:04:00 -0400] miah: Majost: no idea. i'd ask the mailing list.
[2013-03-12 20:04:05 -0400] miah: or support@opscode.com
[2013-03-12 20:04:05 -0400] yfeldblum: faustroll, :D
[2013-03-12 20:04:09 -0400] faustroll: yfeldblum: It only shows my ignorance.
[2013-03-12 20:04:24 -0400] miah: there are no stupid questions. only stupid people.. ;)
[2013-03-12 20:04:39 -0400] miah: asking questions is good. dont be afeared
[2013-03-12 20:04:51 -0400] faustroll: miah: lol
[2013-03-12 20:07:20 -0400] faustroll: yfeldblum: lol. I had some fantasy that HAML might have more flexibility than it does.
[2013-03-12 20:07:32 -0400] miah: why not TOML?
[2013-03-12 20:09:33 -0400] faustroll: miah: looking at toml now
[2013-03-12 20:09:45 -0400] faustroll: awgross: will look at your gist now
[2013-03-12 20:10:36 -0400] awgross: faustroll: k np, more curious now than anything
[2013-03-12 20:11:03 -0400] faustroll: np
[2013-03-12 20:18:54 -0400] faustroll: awgross: I cannot reproduce the bug. your gist works for me in irb
[2013-03-12 20:19:49 -0400] awgross: fun with ruby
[2013-03-12 20:19:51 -0400] awgross: thanks faustroll
[2013-03-12 20:20:20 -0400] faustroll: awgross: on 1.9.3 works just fine
[2013-03-12 20:20:48 -0400] awgross: yeah im using a vagrant 1.8 ruby
[2013-03-12 20:20:52 -0400] awgross: could be it
[2013-03-12 20:21:23 -0400] faustroll: simplest regex is fine in 1.9.3 File.readlines(config_file).each{ |line| puts line unless line.match(/^#/) }
[2013-03-12 20:22:54 -0400] ssofos: question: how do you delete normal attributes on single node using knife exec?
[2013-03-12 20:23:15 -0400] faustroll: awgross: I don't even have 1.8 installed in this enviro. sorry
[2013-03-12 20:24:09 -0400] awgross: no problem, i normally use 1.9+, just my vagrant box has it for vagrant related stuff, chef runs off 1.9
[2013-03-12 20:24:12 -0400] miah: hrm ya. no ruby 1.8 anywhere at this point.
[2013-03-12 20:24:32 -0400] awgross: ruby1.8 is a disease
[2013-03-12 20:24:40 -0400] miah: so is life.
[2013-03-12 20:24:48 -0400] awgross: haha
[2013-03-12 20:24:52 -0400] DeadZen: s/1.8//
[2013-03-12 20:25:29 -0400] faustroll: awgross: now I'm curious. pretty basic regex.
[2013-03-12 20:26:42 -0400] miah: i like to remove all default comments and empty lines from configuration templates. i might keep one or two just as section markers though.
[2013-03-12 20:26:56 -0400] miah: but i like my config's to fit on a single page if possible
[2013-03-12 20:32:55 -0400] cassianoleal: Has anyone been able to use http://community.opscode.com/cookbooks/passenger_apache2 with RVM? For me, it fails to install the apache module because it can't find passenger's gem.
[2013-03-12 20:38:02 -0400] faustroll: awgross: I spun up a vm with 1.8.7 and your code works just fine
[2013-03-12 20:38:13 -0400] awgross: weird
[2013-03-12 20:38:20 -0400] awgross: well, thanks for investigating
[2013-03-12 20:38:22 -0400] awgross: its a vagrant machine
[2013-03-12 20:38:28 -0400] awgross: so i may have messed something up
[2013-03-12 20:39:21 -0400] ssofos: is there anyone that can educate me or point me to documentation that explains how to remove all or clear normal attributes on node objects in mass?
[2013-03-12 20:40:58 -0400] geekbri: ssofos: you could use knife exec and write a nifty little script and use .delete
[2013-03-12 20:41:18 -0400] geekbri: Although I'm not sure what effect node#delete has in chef11 with immutable mashs
[2013-03-12 20:43:21 -0400] ssofos: geekbri, yes that was what I was thinking to do, the problem is I do not know how to, Is there a reference document on the chef-shell DSL available for the knife exec command? There is not much on docs.opscode.com.
[2013-03-12 20:45:17 -0400] geekbri: ssofos: I don't remember reading much documentation about knife exec heh.
[2013-03-12 20:45:25 -0400] martinisoft: I'm writing a wrapper cookbook and trying to get a template_file call within the include_recipe call to fall back to the template defined within that cookbook, but it keeps referencing my cookbook template instead. Is there a way to get it to fall back?
[2013-03-12 20:46:26 -0400] ssofos: geekbri, also I have dumped all the nodes from my server in json. The normal attributes are listed as "normal":{}. Any ideas on a regular expression on how to empty the contents of the curly braces after "normal": ?
[2013-03-12 20:47:05 -0400] nkrinner_:  when i build chef-server with omnibus-chef, where do the build instructions come from? i suppose there are some cookbooks somewhere, but i can't find them. any hints?
[2013-03-12 20:47:19 -0400] geekbri: ssofos: if i were you the way in which i would handle it would probably be to use Chef::Node.load in a knife exec script, make the changes, then perform a node.save
[2013-03-12 20:47:58 -0400] geekbri: ssofos: since i'm not sure of the changes with .delete and chef11, you could always just set the normal_attr itself to an empty mash
[2013-03-12 20:48:08 -0400] geekbri: or nil
[2013-03-12 20:48:21 -0400] geekbri: I would look into the delete method for you, but I just don't have the time at the moment :)
[2013-03-12 20:49:16 -0400] ssofos: geekbri, thank you for the ideas, I will hack away and see if I can get a working script
[2013-03-12 20:49:25 -0400] geekbri: sounds like a plan :)
[2013-03-12 20:50:54 -0400] jubilo: is there a method to pull the environment, similar to pulling node attributes?
[2013-03-12 20:51:15 -0400] jubilo: similar to this:
[2013-03-12 20:51:15 -0400] jubilo: if platform?("redhat", "centos", "fedora") # code for only redhat family systems.
[2013-03-12 20:51:16 -0400] jubilo: end
[2013-03-12 20:51:51 -0400] jubilo: so if I've defined prod and staging environments, i can do soemthing in a recipe based on the environment, like copy over a file?
[2013-03-12 20:52:42 -0400] ssofos: jubilo, I am pretty sure node['chef_environment'] will give you what you need
[2013-03-12 20:52:49 -0400] pmohan: i thoughts that what we do with roles
[2013-03-12 20:53:09 -0400] jubilo: ssofos: thanks, that might work
[2013-03-12 20:53:24 -0400] jubilo: pmohan: I'm fairly new so I'm still figuring out the best practices for these things
[2013-03-12 20:53:38 -0400] jubilo: I will investigate roles for this purpose
[2013-03-12 20:55:37 -0400] pmohan: welcome to the club. its fun to cook
[2013-03-12 20:55:42 -0400] jubilo: :)
[2013-03-12 21:01:33 -0400] w6fu: doomviking: only took 2 hours, but I figured out my encrypted data bag issue! (mostly)
[2013-03-12 21:02:29 -0400] doomviking: w6fu: mostly is good
[2013-03-12 21:03:03 -0400] pmohan: I am trying to bootstrap a vagrant vm and install chef using the following command
[2013-03-12 21:03:04 -0400] pmohan: knife bootstrap localhost -p 2222 -x vagrant -P vagrant --sudo
[2013-03-12 21:03:04 -0400] pmohan: but nothing is happening - no error messages as seen in this paste bin - http://pastebin.com/06pyGAHZ please advice ? what am i missing ...
[2013-03-12 21:03:05 -0400] pmohan: my vagrant file for reference - http://pastebin.com/djncyWNn
[2013-03-12 21:05:40 -0400] priestjim: vagrant provision
[2013-03-12 21:05:47 -0400] priestjim: pmohan: try vagrant provision
[2013-03-12 21:30:42 -0400] knuckolls_: pmohan: any reason you're not using the built in chef provisioners for vagrant?
[2013-03-12 21:31:41 -0400] knuckolls_: pmohan: if you want to re-provision a vagrant, just type vagrant provision in the folder w/ the vagrant file
[2013-03-12 21:34:46 -0400] hikeit: of course i finally get approval to go to chef conf? and the cookbook authoring workshop is full
[2013-03-12 21:38:08 -0400] agoddard: :(
[2013-03-12 21:38:24 -0400] magichan1s: is there a common way to manage a users authorized_keys file when creating a user using opcodes LWRP?
[2013-03-12 21:38:24 -0400] jhammerman: Hi Chef IRC. I'm trying to set up a bonded interface recipe. When defining the teamed NIC's using the ifconfig resource, I don't see an attribute for MASTER.
[2013-03-12 21:38:47 -0400] jhammerman: Does anyone have any ideas regarding how to accomplish what I'm attempting to do here?
[2013-03-12 21:41:39 -0400] josephholsten: jhammerman: I never knew there was an ifconfig resource
[2013-03-12 21:41:56 -0400] josephholsten: I assume you've looked here already: http://docs.opscode.com/resource_ifconfig.html
[2013-03-12 21:42:49 -0400] jhammerman: josephholsten: Yes, I took a look there, no joy from what I can tell
[2013-03-12 21:43:33 -0400] jhammerman: I imagine I could use files, and include the path to where to distribute them to, and have it notify the network resource if they are changed
[2013-03-12 21:43:55 -0400] josephholsten: I'm looking into the implementation: https://github.com/opscode/chef/blob/master/lib/chef/provider/ifconfig.rb
[2013-03-12 21:44:50 -0400] josephholsten: are you on rhel?
[2013-03-12 21:46:12 -0400] josephholsten: well, it definitely doesn't support that out of the box
[2013-03-12 21:49:17 -0400] jhammerman: josephholsten: Yes, well, CentOS
[2013-03-12 21:50:10 -0400] josephholsten: here's how it's generating the ifcfg- file: https://github.com/opscode/chef/blob/master/lib/chef/provider/ifconfig.rb#L166
[2013-03-12 21:50:49 -0400] pmohan: priestjim: i can try vagrant provision it might work. but what is puzzling to me is this 1) eventhough its a vagrant vm, it is no different , it has a ip address, i am able to ssh from local machine using ssh vagrant@localhost -p 2222 2) The knife statement is not giving any error message , it is silently does nothing
[2013-03-12 21:51:47 -0400] josephholsten: jhammerman: that should get you started. But could you also file a ticket? I'd definitely support that feature.
[2013-03-12 21:54:44 -0400] jhammerman: josephholston:Dang! looks like ti would be as simple as adding the array element and dumping it into the file. Which makes sense.
[2013-03-12 21:56:12 -0400] magichands: how do other people distribute public ssh keys with chef?
[2013-03-12 21:56:14 -0400] josephholsten: well, there's the ancient ticket to port ifconfig bits to use iproute2
[2013-03-12 21:56:23 -0400] knuckolls_: magichands: the users cookbook
[2013-03-12 21:56:35 -0400] magichands: the opscode one?
[2013-03-12 21:56:38 -0400] knuckolls_: magichands: https://github.com/opscode-cookbooks/users
[2013-03-12 21:56:39 -0400] josephholsten: magichands: data bags, or application cookbooks
[2013-03-12 21:56:51 -0400] magichands: there's no ssh_key attributes there though
[2013-03-12 21:57:07 -0400] magichands: oh ...
[2013-03-12 21:57:09 -0400] magichands: what the heck
[2013-03-12 21:57:11 -0400] magichands: this doc is different
[2013-03-12 21:57:20 -0400] josephholsten: oh. yeah, do that if you don't want to do ldap.
[2013-03-12 21:57:43 -0400] magichands: http://docs.opscode.com/resource_user.html
[2013-03-12 21:58:04 -0400] magichands: are the docs not up to date? confused
[2013-03-12 21:58:18 -0400] knuckolls_: magichands: that's the user creation resource. the cookbook i linked you to are a cookbook that uses the users resource in tandem w/ data bags.
[2013-03-12 21:58:37 -0400] knuckolls_: magichands: it'd be a good learning experience to read the source of the users cookbook. :)
[2013-03-12 21:58:52 -0400] magichands: ah, makes sense
[2013-03-12 21:59:07 -0400] magichands: yeah just trying to get my app deployed using chef to start, will work on refining things after things work
[2013-03-12 21:59:24 -0400] magichands: this was hanging me up, thanks
[2013-03-12 22:00:01 -0400] knuckolls_: magichands: if you're just getting started, you can make a server-essentials cookbook that just sets up one user and writes the public ssh key to a user's .ssh/authorized_keys
[2013-03-12 22:00:08 -0400] knuckolls_: both ways work
[2013-03-12 22:00:21 -0400] knuckolls_: i use the users cookbook to manage all the users on my machine
[2013-03-12 22:00:26 -0400] knuckolls_: but it relies on data bags
[2013-03-12 22:00:52 -0400] knuckolls_: simplest path to completion is a cookbook of your own that just sets things up
[2013-03-12 22:01:04 -0400] magichands: yeah, thats basically what I'm doing
[2013-03-12 22:01:14 -0400] magichands: got to that user section... and was like, no ssh keys...?
[2013-03-12 22:01:33 -0400] magichands: I just have a cook book that runs through a big list of crap to do
[2013-03-12 22:01:54 -0400] magichands: install packages, dump some config files, create some users, then (now... with ssh...) clone some stuff
[2013-03-12 22:02:07 -0400] knuckolls: magichands: i'll take this opportunity while you're learning to introduce you to the wrapper cookbook best practice
[2013-03-12 22:02:10 -0400] knuckolls: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-03-12 22:02:30 -0400] josephholsten: magichands: you might investigate the deploy resource, or even better, the application cookbook.
[2013-03-12 22:02:57 -0400] martinisoft: anyone with experience writing wrapper/application cookbooks?
[2013-03-12 22:03:01 -0400] martinisoft: got a weird templating thing
[2013-03-12 22:03:16 -0400] knuckolls: martinisoft: i do. what's up?
[2013-03-12 22:03:23 -0400] josephholsten: (don't mind the fact that the gangnam style references in that post are terrible. it's an excellent resource)
[2013-03-12 22:03:36 -0400] Altonymous: We have a private chef server setup at work.  I was previously setup fine with knife and everything was happy.  I then reformatted my machine and I didn't backup my username.pem.  I tried recreating it with knife client create <username> -f ~/.chef/<username>.pem -u chef-validator -k ~/.chef/validation.pem  which seemed to work, however, now I'm getting a permission denied error...
[2013-03-12 22:03:44 -0400] knuckolls: josephholsten: agreed. :)
[2013-03-12 22:03:56 -0400] Altonymous: $ knife cookbook upload console Uploading console #[0.1.0] ERROR: Errno::EACCES: Permission denied - /var/chef
[2013-03-12 22:04:04 -0400] otterley: hey kids!  I have a fork of partial_search that implements a client-side cache; shaves at least 5 seconds off our client runs.  is that cookbook still active, or should I submit a PR elsewhere?
[2013-03-12 22:04:17 -0400] martinisoft: knuckolls: writing an application cookbook and when I include the recipe, it does a template_file call for a template inside that recipe/cookbook, but I get an error when its converging saying it can't find the template in my cookbook's directory
[2013-03-12 22:04:29 -0400] knuckolls: otterley: i think that's merged into chef 11 these days?
[2013-03-12 22:04:33 -0400] Altonymous: Anyone have a guide I can follow for getting back on track or things to check?
[2013-03-12 22:04:35 -0400] hikeit: otterley: its still active, hasn't merged into core yet
[2013-03-12 22:04:37 -0400] josephholsten: otterley: I just submitted a patch to pull it into chef 11, but it's not in yet
[2013-03-12 22:04:38 -0400] martinisoft: knuckolls: so its just not falling back should it?
[2013-03-12 22:04:39 -0400] agoddard: Altonymous is your knife.rb looking in /var/chef for the .pem instead of .chef/name.pem
[2013-03-12 22:04:47 -0400] otterley: josephholsten, what's your recommendation?
[2013-03-12 22:04:56 -0400] otterley: wait for integration or submit against cookbook?
[2013-03-12 22:05:01 -0400] Altonymous: @agoddard no I checked that.  It's looking in the correct location
[2013-03-12 22:05:04 -0400] josephholsten: let me find the ticket and see its status
[2013-03-12 22:05:25 -0400] knuckolls: martinisoft: so templates in the included recipe aren't behaving?
[2013-03-12 22:05:35 -0400] agoddard: Altonymous for client_key and validation_key?
[2013-03-12 22:05:42 -0400] knuckolls: martinisoft: or you're referencing templates in the "wrapped" cookbook
[2013-03-12 22:05:44 -0400] Altonymous: client_key               '/Users/<username>/.chef/<username>.pem'
[2013-03-12 22:05:48 -0400] martinisoft: knuckolls: yeah, its not finding the templates already in the included cookbook
[2013-03-12 22:05:51 -0400] josephholsten: http://tickets.opscode.com/browse/CHEF-3878
[2013-03-12 22:06:01 -0400] Altonymous: and validation.pem is in the same location but obviously called validation.pem
[2013-03-12 22:06:12 -0400] knuckolls: martinisoft: and it works if you just run that recipe straight from the run_list, no include_recipe?
[2013-03-12 22:06:15 -0400] Altonymous: validation_key           '/Users/<username>/.chef/validation.pem'
[2013-03-12 22:06:19 -0400] agoddard: Altonymous hrmf.. cookbook_path?
[2013-03-12 22:06:23 -0400] otterley: @josephholsten, I'll submit a PR against the current cookbook and add a note to this ticket.  sound good?
[2013-03-12 22:06:29 -0400] martinisoft: knuckolls: the included recipe is calling a template_file for its cookbooks own template, but Chef thinks im trying to call a template inside my recipe instead
[2013-03-12 22:06:33 -0400] josephholsten: otterley: +9000
[2013-03-12 22:06:45 -0400] Altonymous: @agoddard  cookbook_path [ '/Users/<username>/Projects/chef-server/cookbooks' ]
[2013-03-12 22:06:45 -0400] martinisoft: knuckolls: yeah it converged with no issues on its own because that cookbook has the template file
[2013-03-12 22:06:47 -0400] Altonymous: which is correct
[2013-03-12 22:07:16 -0400] martinisoft: knuckolls: I don't need to override the included default template in my cookbook so I'd like to just let Chef go for the one already there
[2013-03-12 22:07:30 -0400] knuckolls: martinisoft: to tell you the truth, i've never had that issue at all. sounds like a bug, frankly. you might get some traction on the mailing list if you gist it up.
[2013-03-12 22:07:37 -0400] otterley: also attn jkeiser
[2013-03-12 22:07:48 -0400] knuckolls: martinisoft: if you include a recipe, it should just work just as if you'd put it in the run_list directly.
[2013-03-12 22:08:10 -0400] martinisoft: knuckolls: if I remove the template file in my cookbook, it will say it can't find it
[2013-03-12 22:08:49 -0400] Altonymous: agoddard I will note that when I run $knife cookbook test it tells me there are no cookbooks.  But I assure you they are there and the path is correct.
[2013-03-12 22:10:03 -0400] jkeiser: I believe the partial_search cookbook is still active.  I don't recall it getting merged into the client, though IMO it ought to be
[2013-03-12 22:10:20 -0400] agoddard: Altonymous hmm I saw that error today when I was setting up knife for a new chef11 server, I can't remember which knife.rb setting was missing.. I don't have an instance I can check against at the moment though :(
[2013-03-12 22:12:13 -0400] Altonymous: agoddard hopefully someone else will see my issue and have some feedback.  For the past 2 days I've been passing off work to my pair and having him deal with it.  but that's not going to fly forever.
[2013-03-12 22:12:47 -0400] agoddard: Altonymous ah, I just scrolled up - I was missing "cache_options( :path => '/Users/agoddard/rc-chef/.chef/checksums' )"
[2013-03-12 22:13:07 -0400] agoddard: and without it cookbook upload gives me "ERROR: Errno::EACCES: Permission denied - /var/chef"
[2013-03-12 22:13:29 -0400] agoddard: I guess the default cache location is /var/chef
[2013-03-12 22:13:34 -0400] Altonymous: agoddard let me give it a try
[2013-03-12 22:13:48 -0400] martinisoft: knuckolls: https://gist.github.com/martinisoft/5147571
[2013-03-12 22:13:52 -0400] martinisoft: got the gist up
[2013-03-12 22:14:51 -0400] Altonymous: agoddard that got me further along!    You authenticated successfully to http://chef.lab:4000 as <username> but you are not authorized for this action
[2013-03-12 22:15:11 -0400] Altonymous: thanks!
[2013-03-12 22:15:41 -0400] martinisoft: knuckolls: the template exists in the cookbook I'm including, but Chef isn't looking there
[2013-03-12 22:16:05 -0400] martinisoft: knuckolls: not sure if you know a way to make Chef look there
[2013-03-12 22:16:17 -0400] agoddard: Altonymous no probs. I don't use private chef, but I know it has ACLs, maybe it's an ACL thing now (maybe making the client an admin or something would resolve, but I've never used the ACLs so can't say)
[2013-03-12 22:17:12 -0400] Altonymous: agoddard yeah I'm trying to research that part now.  I think you're right
[2013-03-12 22:23:44 -0400] jtran: if i include_recipe foo::bar in a different cookbook  blah::default ,   it doesn't appear that foo::bar is getting executed when blah::default runs.   I see that foo::bar is being loaded but that doesnt' necessarily mean its code gets executed?
[2013-03-12 22:27:28 -0400] juliancdunn: jtran: no, it should get executed
[2013-03-12 22:27:35 -0400] timsmith: yep
[2013-03-12 22:27:46 -0400] juliancdunn: ohai timsmith!
[2013-03-12 22:27:56 -0400] timsmith: hi
[2013-03-12 22:27:59 -0400] juliancdunn: oh, wrong tim... never mind. ohai nonetheless
[2013-03-12 22:28:00 -0400] jtran: juliancdunn:  ok thanks
[2013-03-12 22:28:02 -0400] juliancdunn: tab completion failed
[2013-03-12 23:42:13 -0400] clundquist: I need to pull in the default attributes a recipe specifies and am having trouble doing so when using Node#consume_run_list (https://github.com/opscode/chef/blob/master/lib/chef/node.rb#L294)
[2013-03-12 23:42:37 -0400] clundquist: is there a better method to call to get those default values?
[2013-03-12 23:43:34 -0400] awgross: clundquist: this is jsut the defaults, not the compiled node attributes?
[2013-03-12 23:43:53 -0400] clundquist: yeah, recipe defaults
[2013-03-12 23:44:29 -0400] clundquist: I am in an awkward situation with chef-apply and test-kitchen 1.0
[2013-03-12 23:47:13 -0400] clundquist: basically in chef-shell
[2013-03-12 23:47:35 -0400] clundquist: I need `node.consume_run_list({ "run_list" => [ "recipe[test-kitchen-example]" ] })` to populate the node.example attributes
